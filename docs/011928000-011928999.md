# StackOverflow 问答 11928000-11928999

# php - 在 php 中发送了一个额外的附件

> ID：11928004
> 
> 赞同：4
> 
> 时间：2012-08-13T03:52:46.283
> 
> 标签：php

我使用以下代码创建 csv 文件并将其发送到 php 中的特定邮箱。我可以成功接收 csv 文件，但是，我不明白为什么还要附加一个名为 ATT00001.txt 的 txt 文件。谁能帮我看看？

以下是发送邮件的部分代码：

```
// email fields: to, from, subject, and so on 
$to = "you@home.com"; 
$from = "me@home.com";  
$subject ="Test mail";  
$message = "please check the csv out!"; 
$headers = "From: $from"; 

$fileName = pathtocsv;

// boundary  
$semi_rand = md5(time());  
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";  

// headers for attachment  
$headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";  

// multipart boundary  
$message = "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";  
$message .= "--{$mime_boundary}\n"; 

// preparing attachments 
$file = fopen($fileName,"rb"); 
$data = fread($file,filesize($fileName)); 
fclose($file); 
$data = chunk_split(base64_encode($data)); 
$message .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"record.csv\"\n" .  
"Content-Disposition: attachment;\n" . " filename=\"test.csv\"\n" .  
"Content-Transfer-Encoding: base64\n\n" . $data . "\n\n"; 
$message .= "--{$mime_boundary}\n"; 

mail($to, $subject, $message, $headers); 
```

![又发送了一个文本文件](../Images/4033224d11382cc6d4e925dcfc2306e1.png)
当我查看它时，它只是一个空的txt文件。我在 Outlook 中打开邮件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T04:20:34.577

更改最后一条边界线：

```
$message .= "--{$mime_boundary}\n"; 
```

到：

```
$message .= "--{$mime_boundary}--\n"; 
```

注意最后的额外`--`内容。

[RFC 2046](http://www.ietf.org/rfc/rfc2046.txt) ^(（第 5.1.1 节 - 通用语法 [第 19 页]）)指出：

> 最后一个正文部分之后的边界定界线是一个
> 显着的定界符，表示后面不会再有正文部分
> 。这样的分隔线与之前的分隔线相同，只是在 边界参数值
> 之后添加了两个连字符。
> 
> --gc0pJq0M:08jU534c0p--

由于缺少最后一个边界，Outlook 创建包含一些额外数据或空附件的附件似乎是默认行为。

James-Luo 的第二个答案也可能是有效[的](http://social.technet.microsoft.com/Forums/en/exchangesvrgeneral/thread/1047cf36-fb42-4a1f-b6de-442b38c09de5)。他指出，在消息正文*之前*向 MIME 消息添加附件可能会导致与附件类似的结果。

# c++ - 将 char ' ' 或换行符转换为字符串

> ID：11928009
> 
> 赞同：1
> 
> 时间：2012-08-13T03:53:43.197
> 
> 标签：c++, stringstream

我的目标是转换`' '`成`" "`, 并`'\n'`转换成`"\n"`

下面的代码适用于一般情况，但不适用于空格和`'\n'`. 因为`>>`and`<<`运算符不接受`' '`and `'\n'`s。

```
std::string stringFromChar(char a) {
    std::stringstream ss(std::stringstream::in | std::stringstream::out | std::stringstream::binary);
    std::string s;
    ss << a;
    ss >> s;
    return s;
} 
```

我想通过使用`std::stringstream::binary`，它使用二进制数进行读写。因此，保留字符，而不会丢失空格或换行符。

我发现，虽然`a`是`' '`，`s`原来是`""`。

我知道解决这个问题的方法：

```
std::string stringFromChar(char a) {
    std::stringstream ss(std::stringstream::in | std::stringstream::out | std::stringstream::binary);
    std::string s;
    ss << a;
    s = ss.str();
    return s;
} 
```

阅读时不会删除空格或换行符，但在写作时会被删除，这是真的吗？为什么不使用带有 stringstream 的二进制文件？

另外，我尝试使用 ss >> std::noskipws >> s 如：

```
std::string stringFromChar(char a) {
    std::stringstream ss(std::stringstream::in | std::stringstream::out | std::stringstream::binary);
    std::string s;
    ss << a;
    ss >> std::noskipws >> s;
    return s;
} 
```

它也没有工作。为什么？s 仍然返回为“”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T04:02:35.613

不要让它这么复杂：

```
std::string stringFromChar(char a)
{
    return std::string(1,a);
} 
```

作为次要说明：
唯一要做的`std::ios::binary`就是打开二进制模式。二进制模式停止 '\n' 与行终止序列（定义为行尾的特定平台字符序列）之间的转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:01:40.823

哎呀，这一切似乎都非常复杂......

为什么不试试这个：

```
std::string stringFromChar(char a) {
    return std::string( &a, 1 );
} 
```

或这个：

```
std::string stringFromChar(char a) {
    char tmp[2] = { a, 0 };
    return std::string(tmp);
} 
```

**编辑**：如果你坚持使用流，试试这个：

```
std::string stringFromChar(char a) {
    std::stringstream ss;
    ss.put(a);
    return ss.str();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T18:51:22.873

使用 ss.get(a) 从流中获取每个字符，而不会跳过空格和换行符，其中 a 是 char 类型

# java-7 - Eclipse Indigo 不能在带有 JDK 7 的 Mountain Lion 上运行

> ID：11928012
> 
> 赞同：4
> 
> 时间：2012-08-13T03:55:02.573
> 
> 标签：java-7, eclipse-indigo, osx-mountain-lion

我一直在尝试在 Mountain Lion 上使用 JDK 7（尝试了官方 7u5 版本和开发者预览版 7u6）运行 Eclipse，但它似乎总是使用 Apple 的 JDK 6u33。

我尝试配置 Info.plist 以在我的 JDK 7 安装路径上查找 vm，但是当我检查 Eclipse 正在使用的 VM 时，它显示了 6u33。

我确实可以在 Eclipse 上的已安装 JRE 上配置 JDK 并使用它来编译和验证我的 Java 7 项目，但我不能使用 Hibernate 工具在数据库上生成我的实体，因为 Hibernate 配置无法加载实体使用项目上的 JDK 6 设置为 Java 7。

有人在 Mac OS X Mountain Lion 上的 JDK 7 上成功运行 Eclipse Indigo 吗？如果是，我该怎么做？

提前致谢。

**更新**

刚刚在此链接上找到了在 Mountain Lion 上运行 Indigo 的方法：[https ://apple.stackexchange.com/questions/58203/mountain-lion-with-java-7-only](https://apple.stackexchange.com/questions/58203/mountain-lion-with-java-7-only)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:17:38.560

您可以简单地修改 eclipse.ini 以指向 JDK 7

[http://wiki.eclipse.org/Eclipse.ini#-vm_value:_Mac_OS_X_Example](http://wiki.eclipse.org/Eclipse.ini#-vm_value:_Mac_OS_X_Example)

即在 eclipse.ini 中添加以下 2 行：

```
-vm
/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/bin/java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:20:13.543

它很脏......但它可以工作......欺骗你的MAC，你有1.6.0，虽然它指向Java 7

```
sudo mkdir /System/Library/Java/JavaVirtualMachines
sudo ln -s /Library/Java/JavaVirtualMachines/1.7.0.jdk /System/Library/Java/JavaVirtualMachines/1.6.0.jdk 
```

# windows - “NODE_ENV”不是内部或外部命令、可操作命令或批处理文件

> ID：11928013
> 
> 赞同：339
> 
> 时间：2012-08-13T03:55:25.963
> 
> 标签：windows, node.js

我正在尝试为 Node.js 应用程序设置环境。但我每次都收到这个错误。

> “NODE_ENV”不是内部或外部命令、可操作命令或批处理文件。

这是什么意思，我该如何解决这个问题？

我正在使用 Windows，也尝试过`set NODE_ENV=development`但没有运气。

* * *

## 回答 #1

> 赞同：449
> 
> 时间：2016-12-05T05:29:41.600

我为此编写了一个模块：[win-node-env](https://github.com/laggingreflex/win-node-env)。

它创建一个`NODE_ENV.cmd`设置`NODE_ENV`环境变量并使用命令的其余部分及其参数生成一个子进程。

只需（全局）安装它，然后运行你的 npm 脚本命令，它应该会自动使它们工作。

```
npm install -g win-node-env 
```

* * *

## 回答 #2

> 赞同：374
> 
> 时间：2012-08-13T04:27:47.760

听起来您的错误来自尝试运行这样的东西（在 Linux 中有效）

```
NODE_ENV=development node foo.js 
```

Windows中的等价物是

```
SET NODE_ENV=development
node foo.js 
```

在同一个命令外壳中运行。您提到 set NODE_ENV 不起作用，但不清楚如何/何时执行它。

* * *

## 回答 #3

> 赞同：236
> 
> 时间：2015-11-17T11:11:02.870

对于 windows`&`在命令之间也可以使用。像，

```
 "scripts": {
    "start": "SET NODE_ENV=development & nodemon app/app.js",
  } 
```

* * *

## 回答 #4

> 赞同：160
> 
> 时间：2016-05-10T06:56:15.850

1.  `npm install --save-dev "cross-env"`模块。
2.  将代码修改为`cross-env NODE_ENV=development node foo.js`. 然后就可以运行like了`npm run build`。

* * *

## 回答 #5

> 赞同：64
> 
> 时间：2018-02-24T19:00:15.470

使用[win-node-env](https://github.com/laggingreflex/win-node-env)`cmd` ，要使用它，只需在or `power shell`or上运行以下命令`git bash`：

```
npm install -g win-node-env 
```

之后一切都像Linux。

* * *

## 回答 #6

> 赞同：38
> 
> 时间：2020-10-30T12:40:47.840

我遇到了同样的问题，在 Windows 平台上，我只运行了以下命令

```
npm install -g win-node-env 
```

一切正常

* * *

## 回答 #7

> 赞同：37
> 
> 时间：2017-07-27T08:30:50.120

```
set NODE_ENV=production & nodemon app/app.js 
```

将导致 NODE_ENV在末尾**包含一个空格**：

```
process.env.NODE_ENV == 'production'; //false
process.env.NODE_ENV == 'production '; //true 
```

[如这里](https://stackoverflow.com/a/9250168/977206)的评论中所述，请改用：

```
NODE_ENV=production&& nodemon app/app.js 
```

* * *

## 回答 #8

> 赞同：30
> 
> 时间：2019-05-25T15:36:13.523

更改脚本以适应 Windows 是一件非常痛苦的事情。试图找出适当的 Windows 翻译并维护 2 套脚本是没有办法过上你的生活的。

将 npm 配置为在 Windows 上使用 bash 要容易得多，并且您的脚本将按原样运行。

简单地运行`npm config set script-shell "C:\\Program Files\\Git\\bin\\bash.exe"`。确保 bash 可执行文件的路径对于您的机器是正确的。***您可能需要启动终端的新实例才能使更改生效。***

下面的屏幕截图说明了好处。

1.  npm 错误！最初尝试运行脚本时。
2.  为 Windows 使用而修改的脚本运行但不显示返回消息。
3.  更新 npm config 以使用 bash 后，脚本运行并返回相应的消息。

[![让 npm 脚本在 Windows 中按原样运行](../Images/26352cf12ad1c2e197dbfa2f27261d16.png)](https://i.stack.imgur.com/IhYmc.png)

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2019-04-11T19:09:04.093

对于那些使用 Git Bash 并遇到问题的人`npm run <script>`，

只需将 npm 设置为使用 Git Bash 运行脚本

`npm config set script-shell "C:\\Program Files\\git\\bin\\bash.exe"`（根据您的安装更改路径）

然后 npm 将使用 Git Bash 运行脚本，因此此类用法`NODE_ENV=`将正常工作。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2020-07-29T16:58:55.190

这样做肯定会奏效

```
"scripts": {
    "start": "SET NODE_ENV=production && node server"
} 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2021-07-19T06:53:43.943

这对我有用，因为它很容易解决。我克隆了一个在 WINDOWS 中开发的存储库，但我使用的是 MACOS。

如果您使用的是 Windows，请使用 SET 作为前缀：

```
"scripts": {
    "dev": "SET NODE_ENV=development && nodemon index.js",
  }, 
```

但是，如果您使用**的是 MacOS，请删除 SET 关键字**并使用：

```
"scripts": {
    "dev": "NODE_ENV=development && nodemon index.js",
  }, 
```

所以**简而言之**

如果您使用 Windows ，请在运行脚本之前使用**SET前缀，并从 MacOS（也可能是 LINUX）中****删除 SET**，如上所示。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-08-06T02:55:57.403

```
npm install -S cross-env 
```

为我工作

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-01-09T18:00:06.210

如果其他人像我一样来到这里试图找到错误的解决方案：

```
'env' is not recognized as an internal or external command 
```

我得到这个的原因是我正在将一个角度解决方案从 Mac 开发机器迁移到 Windows 10 桌面。这就是我解决它的方法。

1.  跑`npm install --save-dev cross-env`

2.  进入我的 package.json 文件并将所有脚本引用从 更改`env <whatever>`为`cross-env <whatever>`

然后我的命令就像：`npm run start:some_random_environment_var`现在在 Windows 10 上运行良好。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2020-05-12T03:02:31.967

对于 Windows，你可以这样做

```
"scripts": {
    "start:prod" : "SET NODE_ENV=production & nodemon app.js",
    "start:dev" : "SET NODE_ENV=development & nodemon app.js"
}, 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-09-13T22:10:27.550

上面的大多数答案对我没有帮助..

帮助我的是`NODE_ENV=production&& nodemon app/app.js`

注意空间。祝你好运。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2018-11-27T12:07:30.737

对于 Windows **打开 git bash**并尝试

`NODE_ENV=production node app.js`

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2021-03-09T12:28:39.687

**在“package.json”文件中**设置脚本“test” ：****

 **例如：

**在 Windows 中**；"test": "SET NODE_ENV=test & jest",

**在 Linux/Mac 中**；"test": "NODE_ENV=test jest",

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2021-12-31T07:53:09.797

如果您使用“Yarn Packager”，则可以通过以下命令解决此问题：

```
yarn global add win-node-env 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2022-01-13T14:33:21.647

> `"set NODE_ENV=production&& nodemon server.js"`这个对我有用。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-01-16T10:53:46.883

**process.env.NODE_ENV**正在添加一个**空格**这样做

```
process.env.NODE_ENV.trim() == 'production' 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-07-13T00:41:25.523

```
NODE_ENV=development & node [your file name here] 
```

或者

```
SET NODE_ENV=development & node [your file name here] 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-02-05T19:00:35.010

在 Windows 平台上

> ($env:NODE_ENV="environmentName") -and (node file.js)

杀死终端（Ctrl + C）然后运行文件

> 节点文件.js

* * *

## 回答 #23

> 赞同：-2
> 
> 时间：2021-07-03T10:52:02.597

在 Windows 机器上 npm install -g win-node-env**

# html - 如何在 html 页面中创建“转到邮箱”链接

> ID：11928015
> 
> 赞同：1
> 
> 时间：2012-08-13T03:56:05.007
> 
> 标签：html

我正在创建一个确认页面，上面写着“验证电子邮件已发送到您的邮箱 [foo@bar.com]，请点击`<here>`查看您的电子邮件”。

问题是如何创建链接，`<here>`以便当用户单击它时，它将加载默认邮件客户端（包括 gmail）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:11:28.367

从 HTML 启动用户的邮件阅读客户端根本没有可靠的方法。

正如已经指出的那样，您*可以*制作一个`mailto`链接，但所做的只是加载用户为该浏览器选择的邮件*发送应用程序。*应用程序能够将自己注册为能够处理`mailto`链接，但这些应用程序不一定是要接收邮件的相同应用程序。例如，您可以要求 Gmail 接管`mailto`许多浏览器中的链接。

即使这样，考虑到用户可能没有使用桌面邮件客户端来阅读他们的邮件。他们可以在移动设备上，或者不使用他们的普通计算机，或者可以使用网络邮件界面。

简单地告诉用户阅读他们的邮件对任何人来说都足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-24T20:27:54.623

我只是从输入电子邮件中解析域，例如@gmail.com，然后我有一个最受欢迎的电子邮件字典，例如 gmail 的 mail.google.com。对其他人也是如此，如果用户的电子邮件不在我的字典中，我只需指向 mail..com 并祈祷它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T03:59:11.217

用这个：

```
<a href="mailto:someone@something.com" >Your text</a> 
```

# gwt - 使用 RequestFactory 的 stableId() 作为状态信息时，可以避免注入 Places 吗？

> ID：11928017
> 
> 赞同：0
> 
> 时间：2012-08-13T03:56:26.773
> 
> 标签：gwt, requestfactory, gwt-gin, gwt-places

我的注入 Gin 的 GWT 应用程序将 RequestFactory 与活动和地点一起使用。

为了在 Places 中标记 RequestFactory `stableId()`，我注入了 RequestFactory。这使班级可以访问`getProxyId(token)`和`getHistoryToken(stableId)`。Tokenizer 调用非静态的、受保护的方法来标记特定的 Place。

这是一个示例类。

```
public class StableIdPlace extends Place {

  @Inject private static Provider<StableIdPlace> provider;

  private final MyRequestFactory requestFactory;
  private EntityProxyId<StableIdProxy> stableId;

  @Inject
  public StableIdPlace(MyRequestFactory rf) {
    requestFactory = rf;
  }

  public void setStableId(EntityProxyId<StableIdProxy> which) {
    stableId = which;
  }

  public EntityProxyId<StableIdProxy> getStableId() {
    return stableId;
  }

  protected void setFromHistoryToken(String token) {
    stableId = requestFactory.getProxyId(token);
  }

  protected String getHistoryToken() {
    return requestFactory.getHistoryToken(stableId);
  }

  public static class Tokenizer implements PlaceTokenizer<StableIdPlace> {
    @Override
    public String getToken(StableIdPlace place) {
      return place.getHistoryToken();
    }
    @Override
    public StableIdPlace getPlace(String token) {
      StableIdPlace place = provider.get();
      place.setFromHistoryToken(token);
      return place;
  }
} 
```

该策略需要在需要新地方的地方注入提供者。**不幸的是，这包括静态标记器。**

我尝试`requestStaticInjection()`在 Gin 客户端模块中启动静态注入（针对每个 Place 类）。我所拥有的作品——历史除外。我无法让静态提供程序初始化。它会在 Tokenizer 中导致 Null 异常。

有一个更好的方法吗？谢谢你的指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:45:12.493

您可以使用 a`PlaceHistoryMapperWithFactory`从 Ginjector、Provider 或 AssistedInject 工厂创建标记器实例。

（我宁愿将射频注入标记器而不是地方，地方是关于代理的，标记器是关于*历史令牌*的）

# css - Bootstrap 链接按钮和按钮宽度不一样。怎么修？

> ID：11928024
> 
> 赞同：5
> 
> 时间：2012-08-13T03:57:18.190
> 
> 标签：css, button, twitter-bootstrap, width

我将宽度属性添加到引导按钮。但是，它 `<a class="btn" />`的宽度与`<button class="btn" />`. 这是[jsFiddle](http://jsfiddle.net/6b9T4/)。

这是在 Chrome 中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T04:03:21.667

将左右重置`padding`为零会有所帮助，但会使链接按钮宽 2 像素。

这是因为 chrome 的用户代理适用`box-sizing: border-box`于`button`元素，这意味着`padding`将包含在其中`width`而不是添加到其中。

在你的班级中设置`box-sizing: content-box`也修复了这个 2px 的差异。

见**[演示](http://jsfiddle.net/6b9T4/9/)**。

# java - 如果在我的代码中使用strictmode，登录的安全性会被削弱吗？

> ID：11928025
> 
> 赞同：0
> 
> 时间：2012-08-13T03:57:57.223
> 
> 标签：java, android, android-strictmode

对在我的登录应用程序中导入严格模式有一些疑问。如果我在我的代码中启用它，

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
```

我的登录中的安全功能会被削弱吗？或者我应该只使用异步任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:04:54.227

从 android 版本 3.0 开始，在主 ui 线程中使用网络相关代码存在一些限制，因为它会导致 ANR。因此，通过将严格模式线程策略放入您的代码中，您违反了此限制，您可以在主线程中使用网络相关代码，这无论如何都不会削弱您的登录功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:05:28.930

根据[文档](http://developer.android.com/reference/android/os/StrictMode.ThreadPolicy.html)，默认策略`StrictMode.ThreadPolicy`是`LAX`“......它什么也抓不到”。因此，除非之前设置了非默认策略，否则您的代码不应更改任何内容。

# python - 在 python 中加速 numpy/scipy 中的矢量化相关函数？

> ID：11928028
> 
> 赞同：2
> 
> 时间：2012-08-13T03:58:16.977
> 
> 标签：python, numpy, scipy

我编写了一个函数，该函数采用矩阵中列的成对相关性（如内置的`pdist`in `scipy.stats`），但可以处理参数指定的缺失值`na_values`。IE：

```
def my_pdist(X, dist_func, na_values=["NA"]):
    X = array(X, dtype=object)
    num_rows, num_cols = X.shape
    dist_matrix = []
    for col1 in range(num_cols):
        pdist_row = []
        for col2 in range(num_cols):
            pairs = array([[x, y] for x, y in zip(X[:, col1], X[:, col2]) \
                           if (x not in na_values) and (y not in na_values)])
            if len(pairs) == 0:
                continue
            dist = dist_func(pairs[:, 0],
                             pairs[:, 1])
            pdist_row.append(dist)
        dist_matrix.append(pdist_row)
    dist_matrix = array(dist_matrix)
    return dist_matrix 
```

其中`dist_func`是指定距离度量的函数。有没有办法加快这个功能？使用它的一个例子是：

```
def spearman_dist(u, v, na_vals=["NA"]):
    matrix = [[x, y] for x, y in zip(u, v) \
              if (u not in na_vals) and (v not in na_vals)]
    matrix = array(matrix)
    spearman = scipy.stats.spearmanr(matrix[:, 0], matrix[:, 1])[0]
    return 1 - spearman

my_pdist(X, spearman_dist, na_values=["NA"]) 
```

如何将其矢量化/制作得更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T19:47:06.183

我有几个建议：

1.  不要使用类型为“对象”的数组。这可以防止 numpy 使用其任何内置优化，因为它被迫对 python 对象而不是原始值进行操作。如果您使用浮点数组，那么您可以使用 np.nan 而不是 'NA'。对于整数数组，最好将一个好/坏值的掩码存储在一个单独的数组中（您也可以为此使用掩码数组，但我发现它们有点笨拙）。

2.  我敢打赌，这条线占用了大部分时间：

    ```
    pairs = array([[x, y] for x, y in zip(X[:, col1], X[:, col2]) \
                       if (x not in na_values) and (y not in na_values)]) 
    ```

    所以你可以像这样加速内循环：

    ```
    x1 = X[:, col1]
    x2 = X[:, col2]
    mask = ~np.isnan(x1) * ~np.isnan(x2)
    if mask.sum() == 0:
        continue
    dist = dist_func(x1[mask], x2[mask]) 
    ```

3.  与其使用 list.append 构建 dist_matrix，不如从一个空数组开始，并在执行过程中填充元素：

    ```
    dist_matrix = np.empty((num_cols, num_cols))
    for col1 in range(num_cols):
        for col2 in range(num_cols):
            ...
            dist_matrix[col1, col2] = dist 
    ```

4.  由于您在 range(num_cols) 上进行了两次迭代，因此您实际上是在计算大多数距离值两次。这可以优化：

    ```
    dist_matrix = np.empty((num_cols, num_cols))
    for col1 in range(num_cols):
        for col2 in range(col1, num_cols):
            ...
            dist_matrix[col1, col2] = dist
            dist_matrix[col2, col1] = dist 
    ```

5.  完全不需要任何 for 循环就可以完成整个计算，但这取决于 dist_func 的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:25:39.777

您可以尝试用 numpy 的[Masked Arrays](http://docs.scipy.org/doc/numpy/reference/maskedarray.generic.html)替换您的 na_vals 。

# c++ - 非本地函数调用本地类型

> ID：11928029
> 
> 赞同：0
> 
> 时间：2012-08-13T03:59:09.390
> 
> 标签：c++

```
 432     void RoleExternModel::getShareConfig(SourceList& sourceList, std::vector<UInt16>& packs, ShopModel& shopModel)
   433     {
   434         std::copy(Packs, Packs + SHARE_PRIZE, std::insert_iterator<std::vector<UInt16> >(packs, packs.begin()));
   435         struct Fun {
   436             std::vector<std::pair<UInt16, UInt8> > pairs;
   437             void operator () (UInt16 type) {
   438                 pairs.push_back(std::make_pair<UInt16, UInt8>(type, Configuration::PACKS));
   439             }
   440         };
   441         Fun fun();
   442         std::for_each(Packs, Packs + SHARE_PRIZE, fun);
   443         shopModel shopModel(fun.pairs);
   444         shopModel.load(sourceList);
   445     } 
```

为什么编译器说：

> 错误：非本地函数 'Pet::RoleExternModel::getShareConfig(Pet::SourceList&, std::vector >&, Pet::ShopModel&)::Fun Pet::fun()' 使用本地类型 'Pet::RoleExternModel ::getShareConfig(Pet::SourceList&, std::vector >&, Pet::ShopModel&)::Fun'</p>

如何使其合法化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:19:58.507

这条线是问题所在：

```
Fun fun(); 
```

它声明了一个不带参数并返回一个对象的*函数*名称。`fun``Fun`

这被称为[最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。

删除括号，然后声明一个名为的对象`fun`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:02:02.553

其他答案在编译器错误上在技术上是正确的，但错过了一个微妙的点：`fun`使用不正确。它似乎旨在作为收集结果的局部变量`fun.pairs`。但是，`std::for_each`可以复制`fun`而不是，然后`fun.pairs`不更新。

正确解决方案：`Fun fun = std::for_each(Packs, Packs + SHARE_PRIZE, Fun());`.

# php - PHP array_rand 问题

> ID：11928031
> 
> 赞同：0
> 
> 时间：2012-08-13T03:59:11.713
> 
> 标签：php, arrays

我无法使用 PHP 的`array_rand()`函数提取随机数组值。我究竟做错了什么？！

```
$topics = array("1","2","3");
$colors = array("#ff3333", "#ffcc00", "#ccff33");

foreach ($topics as $t) {

            $c = array_rand($colors,1);

            echo "style='color:$c'";

        } 
```

我正在返回整数，而不是我的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T04:01:33.447

array_rand() 返回随机条目的键。

所以你需要使用`$colors[$c]`.

*代码：*

```
echo "style='color:$colors[$c]'"; 
```

# javascript - 在 Google Map Api v3 反向地理编码上未定义

> ID：11928040
> 
> 赞同：0
> 
> 时间：2012-08-13T04:00:36.510
> 
> 标签：javascript, google-maps-api-3

> **可能重复：**
> [未定义不是函数，谷歌地理定位](https://stackoverflow.com/questions/11798431/undefined-is-not-a-function-google-geolocation)

我正在尝试获取位置的谷歌反向地理编码，它返回我未定义但在 console.log 它显示地址

这是获取值的函数

```
function getLatLng(latlng, callback) {
    var codedAddress;

    geocoder.geocode({'latLng': new google.maps.LatLng(40.730885,-73.997383)}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            codedAddress = results[1].formatted_address;
            console.log("codedAddress 1 = "+codedAddress);
        } else {
            alert("There was a problem with the map");
        }
        console.log("codedAddress 2 = "+codedAddress);
    });
    callback(codedAddress);
} 
```

这是我的初始化代码

```
function initialize() {
    var mapOptions = {
        zoom: 11,
        center: new google.maps.LatLng(5.386, 100.245),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var location_coords = [
        <?php echo $output; ?>
    ];

    var location_status = [
        <?php echo $status; ?>
    ];

    var location_users = [
        <?php echo $users; ?>
    ];

    var location_date = [
        <?php echo $date; ?>
    ];

    for(i=0;i<location_coords.length;i++) {
      var traffic_options = {
        strokeColor: '#A52A2A',
        strokeOpacity: 0.8,
        strokeWeight: 1,
        fillColor: getColor(location_status[i]),
        fillOpacity: 0.5,
        map: map,
        center: location_coords[i],
        radius: 300
      };
      cityCircle = new google.maps.Circle(traffic_options);

    barr[i] = new Object;

    var marker = new google.maps.Marker({
        position: location_coords[i],
        map: map,
    });

    barr[i].marker = marker;
    barr[i].html = "<div><span style='font-size:9px'>Reported by " + location_users[i] + " on " + location_date[i] + "</span>" +
        "Traffic Location: " + getLatLng(location_coords[i], function(codedAddress) { return codedAddress; }) + 
        "<p>Traffic Condition: " + getCondition(location_status[i]) + "</p></div>";

    barr[i].infoWindow = new google.maps.InfoWindow({
        content: barr[i].html
    });

    barr[i].listener = makeClosure(i, barr[i].marker);
    }
} 
```

问题出在这个语句中

```
"Traffic Location: " + getLatLng(location_coords[i], function(codedAddress) { return codedAddress; }) 
```

我如何在此处获取值而不是“未定义”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:22:34.753

您需要将回调移动到谷歌地图回调函数中：

```
function getLatLng(latlng, callback) {
  var codedAddress;

  geocoder.geocode({'latLng': new google.maps.LatLng(40.730885,-73.997383)}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        codedAddress = results[1].formatted_address;
        console.log("codedAddress 1 = "+codedAddress);
      } else {
        alert("There was a problem with the map");
      }
      console.log("codedAddress 2 = "+codedAddress);
      callback(codedAddress); //moved here
  });
  //it was here
} 
```

因为您在 Google API 填充变量之前调用了回调。

编辑：您还需要修改写出位置的代码，因为假设函数调用是同步的。

例如：

```
getLatLng(location_coords[i], function(codedAddress) {
    barr[i].html = "<div><span style='font-size:9px'>Reported by " + location_users[i] + " on " + location_date[i] + "</span>" +
      "Traffic Location: " + codedAddress;  + 
      "<p>Traffic Condition: " + getCondition(location_status[i]) + "</p></div>";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:28:07.393

在 getLatLng() （doh，它是......）中，您需要移动`callback(codedAddress);`到地理编码调用中（并使用 latlng 参数）：

```
function getLatLng(latlng, callback) {
  var codedAddress;

  geocoder.geocode({'latLng': latlng}, 
    function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        codedAddress = results[1].formatted_address;
        console.log("codedAddress 1 = "+codedAddress);
      } else {
        alert("There was a problem with the map");
      }
      console.log("codedAddress 2 = "+codedAddress);
    }

    callback(codedAddress);
  );      
} 
```

此函数将返回 void，因此您的回调应初始化`barr`对象。

# struts2 - 任何使用struts 2 动作类的多种方法？

> ID：11928044
> 
> 赞同：0
> 
> 时间：2012-08-13T04:01:16.770
> 
> 标签：struts2

我体验过struts1.x，在这个默认情况下，所有动作类都是单例行为。
我们可以通过扩展 DispatchAction 类在单个动作类中编写多个方法，这样对方法的任意数量的请求将只创建一个对象并共享所有实例成员。

但是在Struts2中，有一个特点就是可以写多个方法。
在 struts2 中，对于每个请求都会创建新实例。那么在一个 Action 类中编写多个方法有什么用呢？
每个方法可能有多个实例成员，然后如果你将它们组合并创建一个对象，每次创建对象时都会占用大量内存。
你能告诉我在单个动作类中编写多个方法有什么用Struts2.x ？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:09:40.263

Struts1 和 Struts2 的设计方式和动作类的编写方式完全不同。

Actions 基本上代表一组相关操作的用户操作。这是一个以良好方式模块化应用程序的功能。虽然您可以在操作类中自由定义单个方法，但我相信它会破坏 Action 类的目的一个好方法。

例如，假设我们想要开发一个用户管理功能，其中包括

1.  用户注册。
2.  用户更新
3.  其他一些用户功能。

如果我们仔细观察，我们将创建一个 User bean 来保存与用户相关的属性，现在我们需要考虑 ActionClasses 的设计。我将创建一个`UserManagementAction`类似的方法

1.  创建用户
2.  更新用户
3.  任何其他此类方法

我认为这种方法将集中用户管理系统，因为所有这些方法都与用户管理功能相关，而且您的操作类的所有组件都可以像用户 bean、用户服务等一样使用，因为它们特定于用户并将被使用在所有方法调用中。

另一方面，在第二种方法中，我们只剩下一个选择，例如为每个功能创建操作，例如

1.  UserRegistrationAction
2.  更新用户操作

并且在所有这些操作中，我们复制了 biz DTO 的服务类和任何其他实用程序方法的大部分内容，除了痛苦地拥有如此多的操作和一些不必要的配置。

简而言之，它决定了您想要设计和开发应用程序的方式和方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:40:12.977

struts2 甚至在 struts1 动作类中允许多个方法的原因与对象创建（动作类）无关。原因是帮助开发人员将执行类似操作的操作分组到一个类中。例如，如果你有一个实体说`product`，你可能想要`create`，`modify`或者`remove`一个产品。`create, modify and remove`出于代码组织的目的，如果您有这些操作，即在单个操作类中，它将是干净的。因此，对于每个请求，都会创建您的操作类的实例，并在服务请求后将其销毁。

# spring - Grails、Vaadin 和 Spring 安全插件一起使用

> ID：11928048
> 
> 赞同：1
> 
> 时间：2012-08-13T04:01:39.467
> 
> 标签：spring, grails, spring-security, vaadin

我有 grails 使用 vaadin 和 spring 安全核心插件，但不能将这三个结合起来。如果我转到使用@Secured 的页面，它会按预期工作。但是，如果我将 @Secured 放在我的 vaadin 应用程序类中，它不会做任何事情。我要做的是保护整个 vaadin 应用程序，然后保护该应用程序中的某些内容以获得更高权限的角色。我在这里做错了什么？如果有人能指出我正确的方向，那就太棒了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:05:09.047

看看[这篇文章](http://sebastien-arbogast.com/2011/02/23/grails-vaadin-and-spring-security-core/)- 他将要保护的方法放入 Grails 服务类中，注释在其中工作，并从 vaadin 应用程序调用服务方法。

（请注意，不建议在 vaadin 应用程序中依赖依赖注入，请参阅[插件文档中的 getBean(String beanName) getBean(Class beanType)](http://grails.org/plugin/vaadin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T14:38:37.037

您需要在 Vaadin 应用程序中使用 Grails 服务。使用 Vaadin 插件，在您的 UI 或任何 Vaadin 组件中声明您的服务，例如：

```
import com.vaadin.grails.Grails
import com.company.app.SecurityService

class <YourComponent> extends CustomComponent implements View {

def securityService = Grails.get(SecurityService)
...
<use securityService in your component's methods>

} 
```

在名为“securityService”的 grails 服务中，连接 springSecurityService，并使用注释或 spring-security grails 插件提供的任何内容。此外，由于 Grails 的优点，服务已经是事务性的。

```
@Transactional
class SecurityService {

    def springSecurityService

    def signOut() {
        SCH.context.authentication = null
    }

    boolean isSignedIn() {
        return springSecurityService.isLoggedIn()
    }

    User getCurrentUser() {
        return springSecurityService.currentUser
    } 
```

...或任何安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:05:59.433

您是否尝试过在 Config.groovy 中设置 URL 映射？

@Secured-annotation 将在 grails 控制器类中使用。

# c++ - 将复杂结构读/写到二进制文件中

> ID：11928053
> 
> 赞同：0
> 
> 时间：2012-08-13T04:02:14.973
> 
> 标签：c++, file-io, vector, struct

我有以下结构

```
typedef struct a_t
{
    vector <int> a;
    int p;
}a;

typedef struct b_t
{
    a x;
    int y;
}b; 
```

struct a 是一个包含向量的结构，struct b 包含 struct a 我想将 struct b 写入/读取到二进制文件中。以下代码不起作用

```
int main()
{

    b m;
    m.x.a.push_back(1);
    m.x.a.push_back(2);
    m.x.a.push_back(3);
    m.x.p = 5;
    m.y = 7;
    cout << sizeof(m.y) << endl;
    cout << sizeof(m.x) << endl;
    cout << sizeof(m) << endl;
    ofstream outfile("model",ios::out|ios::binary);
    outfile.write((char*)&m,sizeof(m));
    outfile.close();

    b p;
    ifstream iffile("model", ios::in|ios::binary);
    iffile.read((char*)&p,sizeof(a));
    iffile.close();

    cout << p.y << endl;;
    cout << p.x.p << endl;
    cout << p.x.a[0] << endl;
    cout << p.x.a[1] << endl;
    cout << p.x.a[2] << endl;
    return 0;
} 
```

错误消息是“ *** glibc 检测到****双重释放或损坏（顶部）：0x0000000000504010 ** * 中止（核心转储）”旁边，它不会将结构写入文件。*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:23:41.040

您不能写入和读取向量，因为它们在堆上分配数据。如果您的应用程序有真正的限制，您可能会决定使用普通的 C 数组更好（为了速度和清晰度，可能会牺牲存储空间）：

```
#define MAXARR_A 100

typedef struct a_t
{
    int a[MAXARR_A];
    int p;
} a; 
```

否则，您必须通过写出大小然后转储数组数据来序列化您的向量。要读回它，请读取大小，然后调整向量的大小并将字节读入其中。

**编辑**：决定为你添加一些代码......它*可能会*编译！=)

```
void write_a( a& data, ostream& s )
{
    size_t len = data.a.size();
    s.write( (char*)&len, sizeof(len) );
    s.write( (char*)&data.a[0], len * sizeof(int) );
    s.write( (char*)&data.p, sizeof(int) );
}

void write_b( b& data, ostream& s )
{
    write_a( data.x, s );
    s.write( (char*)&data.y, sizeof(int) );
}

void read_a( a& data, istream& s )
{
    size_t len;
    s.read( (char*)&len, sizeof(len) );
    data.a.resize(len);
    s.read( (char*)&data.a[0], len * sizeof(int) );
    s.read( (char*)&data.p, sizeof(int) );
}

void read_b( b& data, istream& s )
{
    read_a( data.x, s );
    s.read( (char*)&data.y, sizeof(int) );
} 
```

`read`请注意，我没有包括任何错误检查......此外，将这些函数作为结构上的`write`成员函数会更像 C++ 。*

# c# - 如何在 Ajax ModalPopUp Extender 中显示 GridView 中列出的项目信息？

> ID：11928055
> 
> 赞同：1
> 
> 时间：2012-08-13T04:02:26.870
> 
> 标签：c#, asp.net, gridview, modalpopupextender

我是一名新的 ASP.NET 开发人员，我正在为公司的部门开发一个简单的 Intranet 注册系统。可用事件将列在 GridView 中，显示事件标题的第一列将作为链接按钮。我现在想要的是以下内容：

当用户单击其中一个事件标题时，将显示一个弹出窗口，其中显示带有注册按钮的 GridView 中已存在的事件信息。我是 AjaxToolKit ModalPopUp 扩展器。我几乎做了所有事情，但我不知道如何在 ModalPopUp 中显示该事件的信息。

**你能帮我解决这个问题吗？**

我的代码隐藏（C#）：

```
protected void lnkTitle_Click(object sender, EventArgs e)
{
    //to get the GridViewRow from the sender, so we can get the datakey we need
    GridViewRow gvrow = (GridViewRow)(((LinkButton)sender)).NamingContainer;
    HiddenField1.Value = ListOfAvailableEvents_GrivView.DataKeys[gvrow.RowIndex].Value.ToString();

    //show the modalPopUp
    modalPopupExtender1.Show();
} 
```

我的 ASP.NET 代码：

```
<asp:GridView ID="ListOfAvailableEvents_GrivView" runat="server" AutoGenerateColumns="False"
    DataKeyNames="ID" CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333" GridLines="None"
    AllowPaging="True" PageSize="5">
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" CssClass="generaltext" />
    <Columns>
        <asp:TemplateField HeaderText="Title">
            <ItemTemplate>
                <asp:LinkButton ID="lnkTitle" runat="server" Text='<%# Eval("Title") %>' OnClick="lnkTitle_Click"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
        <asp:BoundField DataField="Location" HeaderText="Location" SortExpression="Location" />
        <asp:BoundField DataField="StartDateTime" HeaderText="Start Date & Time" SortExpression="StartDateTime" />
        <asp:BoundField DataField="EndDateTime" HeaderText="End Date & Time" SortExpression="EndDateTime" />
    </Columns>
    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <HeaderStyle Font-Bold="True" CssClass="complete" />
    <EditRowStyle BackColor="#999999" />
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
</asp:GridView>

<asp:Button ID="btnModalPopUp" runat="server" Style="display: none" />
<ajaxToolkit:ModalPopupExtender ID="modalPopupExtender1" runat="server" TargetControlID="btnModalPopUp"
    PopupControlID="pnlPopUp" BackgroundCssClass="popUpStyle" PopupDragHandleControlID="panelDragHandle"
    OkControlID="OKButton">
</ajaxToolkit:ModalPopupExtender>

<asp:HiddenField ID="HiddenField1" runat="server" />
<asp:Panel ID="pnlPopUp" runat="server" CssClass="popUpStyle">
    <asp:Button ID="confirmButton" runat="server" Text="Register" OnClick="btnSendConfirmationEmail_Click" />
    <asp:Button ID="OKButton" runat="server" Text="Cancel" />
</asp:Panel>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:PM_RegistrationSysDBConnectionString %>"
    SelectCommand="SELECT     ID, Title, Description, Location, StartDateTime, EndDateTime
                    FROM         dbo.Events
                    WHERE     (IsActive = 1)
                    ORDER BY ID DESC">
</asp:SqlDataSource> 
```

仅供参考，我的数据库中有下表，我将其绑定到 GridView：

```
Events Table: ID, Title, Description, Location, StartDateTime, EndDateTime 
```

请注意，我不想在 GridView 中显示带有其他信息的 ID

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T04:27:34.823

这里有几个链接显示了一个很好的教程，在我看来，这将帮助您在不使用代码隐藏的情况下仅使用客户端实现您想要的，这样您就可以避免在用户单击链接按钮时刷新页面

[http://technico.qnownow.com/using-ajax-modal-popup-extender-asp-net-gridview-control/](http://technico.qnownow.com/using-ajax-modal-popup-extender-asp-net-gridview-control/)

[http://shibashishdotnetocean.blogspot.com/2011/12/modalpopupextender-in-gridview.html](http://shibashishdotnetocean.blogspot.com/2011/12/modalpopupextender-in-gridview.html)

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=212](http://www.dotnetcurry.com/ShowArticle.aspx?ID=212)

[http://kishor-naik-dotnet.blogspot.com/2011/10/ajax-modalpopupextender-in-gridview.html](http://kishor-naik-dotnet.blogspot.com/2011/10/ajax-modalpopupextender-in-gridview.html)

# jquery - 如何在 js.erb 文件中使用 ruby if 语句？

> ID：11928056
> 
> 赞同：7
> 
> 时间：2012-08-13T04:02:32.430
> 
> 标签：jquery, ruby-on-rails

我需要做如下所示的事情；根据rails中实例对象的值添加jquery效果

```
("$('#cart').show(2000);") if @cart.total_items ==1 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-13T04:04:21.150

```
<% if @cart.total_items ==1 %>
  $('#cart').show(2000);
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-31T06:57:46.007

@xdazz 答案是正确的，但我曾经使用如下条件语句

```
var mycount = <%= @cart.total_items %>

if (mycount == 1){
$("#cart").show(2000)
} 
```

我主要`conditional statements`在 javascript 中使用（在 js.erb 文件中）的原因是因为这看起来很容易处理

# .htaccess - 我的友好 URL 中的大小写

> ID：11928058
> 
> 赞同：1
> 
> 时间：2012-08-13T04:02:39.537
> 
> 标签：.htaccess

每个人..

我的网址有问题。我像这个友好的网址一样重写我的网址。

```
http://www.lankainstitute.com/1289/Mahesh Jayarathna HTTP/1./?1 
```

但是在我的网址末尾添加了这个字符串“HTTP/1./?1”..

谁能告诉我这是为什么？？？

这是来自我的 .htaccess 文件

```
RewriteEngine On

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /profiles/tutors/index.php\?tutorCode=([0-9]+)&tutorName=([^&]+)&?([^\ ]+)
RewriteRule ^profiles/tutors/index\.php /%1/%2/?%3 [R=301,L,NE]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9]+)/(.+)/$ /profiles/tutors/index.php?tutorCode=$1&tutorName=$2 [L,QSA] 
```

任何意见都非常感谢..

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:15:25.317

您需要在`%{THE_REQUEST}`比赛中调整您的正则表达式。当查询字符串参数之后没有任何内容时，请求中的`tutorName=something`之前的空格`HTTP/1.1`永远不会匹配，因此它最终成为`([^&]+)`分组的一部分。尝试将正则表达式调整为如下所示（并在规则中注意，需要将反向引用更改为`%4`）：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /profiles/tutors/index.php\?tutorCode=([0-9]+)&tutorName=([^&\ ]+)(&([^\ ]+))?
RewriteRule ^profiles/tutors/index\.php /%1/%2/?%4 [R=301,L,NE] 
```

# biztalk - 将 Biztalk 主机实例作为每日计划作业重新启动是最佳做法吗？

> ID：11928061
> 
> 赞同：1
> 
> 时间：2012-08-13T04:03:10.607
> 
> 标签：biztalk, biztalk-2009

我是 BizTalk 新手，最近遇到了一些问题，即 biztalk 编排卡住了，我不得不重新启动主机实例以再次获得消息处理。

我发现奇怪的是通过测试，我可以看到任务管理器中的 biztalk 主机实例占用了大量内存并且即使在编排进入脱水模式后也不会释放它们。

是因为我在我的 biztalk 编排中做的一些糟糕的编程吗？

仅供参考，我的编排使用调用 WCF 从 SQL Server 2008 R2 检索数据的实用程序 DLL。

编排使用计时器实用程序进行编程，以在四个小时非操作后退出。

设置：仅供参考，我在 windows server 2008 r2 中使用 biztalk 2009，24GB 内存，intel xeon 处理器。

## 更新：

好吧，你们是对的，正如预期的那样！

重新启动主机实例并不能真正解决这个问题，到目前为止，我仍然不知道它有什么问题。

我已经进行了调试诊断运行以获取内存转储，并且我相信内存正在被模式和 biztalk 应用程序的其他部分消耗，所以我认为它可能没问题。

我确实偶然发现了[一长串累积更新](http://support.microsoft.com/kb/2555976)，并试图查看我需要安装哪个来解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T04:44:38.083

在 .Net 帮助程序代码中执行所有 Wcf 和 SQL 调用绝对**不是**最佳实践，也不是定期重新启动主机实例。

有什么方法可以重构代码以使用开箱即用的适配器？如果做不到这一点，请尝试使用[内存分析器](https://stackoverflow.com/questions/308816/any-good-free-net-profiler)来查看内存泄漏的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T04:09:41.660

我不认为 Biztalk 需要每天重新启动。

我会确保您的 DLL 中的所有资源都被适当地清理/处置。然后在测试中做一些测量，看看是不是你的代码给服务器带来了负载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T15:17:00.517

您不应每天重新启动 BizTalk 主机实例，BizTalk 是一种企业产品，通常用于关键任务应用程序。

当你说很多内存是什么意思？默认情况下，BizTalk 主机实例进程内存消耗的限制设置为可用系统内存的 25%。因此，如果您的服务器有 32GB 内存，BizTalk 服务器将假定在应用任何限制条件之前达到 8GB 消耗是安全的。

您可以使用 Process Monitor (http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx) 深入挖掘 BizTalk 主机实例并查看内存消耗的位置。以我的经验，它总是会产生一些自定义代码。查看您的自定义 DLL，看看他们是否使用 XmlDocument 之类的技术来加载大文档以解析某些值。

# mysql - 显示和添加 mysql

> ID：11928077
> 
> 赞同：0
> 
> 时间：2012-08-13T04:06:23.740
> 
> 标签：mysql, sql

我有这个问题：

```
$qry_display = 'SELECT subjass,objass,bp,pr,temp,rr 
                  FROM tbl_adata 
                 WHERE sick_id = "1"';

$sql = 'INSERT INTO tbl_view (subjass_view) SELECT subjass from tbl_adata'; 
```

有没有办法将这两个语句结合起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:09:59.253

我想你想要`INSERT...SELECT`声明。为此，您需要将要插入记录的表的列数与`SELECT`语句中的列数相匹配。

```
INSERT INTO tbl_view (col1, col2, col3, col4, col5, col6)
SELECT subjass, objass, bp, pr, temp, rr
FROM tbl_adata
WHERE sick_id = 1 
```

**[这是另一个例子。](http://www.brightcherry.co.uk/scribbles/mysql-insert-select-example/)**

# windows - 在 Windows 中永久更改环境变量

> ID：11928078
> 
> 赞同：21
> 
> 时间：2012-08-13T04:06:25.653
> 
> 标签：windows, cmd, environment-variables

我找到了一种更改用户默认主目录的方法，但我遇到了麻烦。

![在此处输入图像描述](../Images/0631b38280156a1161f4d2c7ba351576.png)

![在此处输入图像描述](../Images/e70d29f42b116fadd0149725e1246374.png)

![在此处输入图像描述](../Images/9ea5caf22ae1959b5be5f61751d5bf4f.png)

这样做会将主驱动器更改为 C：

但是当我检查环境变量时：

![在此处输入图像描述](../Images/120c1b6c3254e545f4cf839b78c2dd1f.png)

还是H:，系统重启后windows设置里的Enviroment变量也会回到H:/

我也试过这样改变它：

![在此处输入图像描述](../Images/8c496afe8f52ef166804631db1a6ca47.png)

这似乎有效，但如果我打开一个新的 cmd，它将恢复为 H:/

现在我正在尝试这样做，以便 OpenSSH 将 C 识别为我的主目录，而不是 H:，这是一个网络驱动器，迫使 OpenSSH 无法工作，除非我通过 VPN 连接到我的大学网络。

在 OpenSSH 的眼中，我能做些什么来永久设置它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T23:20:01.513

它没有提到 HOMEDRIVE 值和 HOMEDIRECTORY 值之间的依赖关系，发生的事情（我认为）是它未能将主目录映射到 HOMEDRIVE，因此默认返回安全值（C :)

我编写了一个脚本来更新本地 AD，将 [] 中的值替换为您的值。复制并粘贴到 .vbs 文件中，然后双击它运行它。

```
Set objUser = GetObject("WinNT://[COMPUTERNAME]/[USERNAME],user")
objUser.homeDirDrive = "H:"
objUser.HomeDirectory = "[URNPATH]"
objUser.SetInfo 
```

例如

```
Set objUser = GetObject("WinNT://UQBDART-2328/BEN,user")
objUser.homeDirDrive = "H:"
objUser.HomeDirectory = "\\SERVER\SHARE"
objUser.SetInfo 
```

运行它，重新启动并测试。它对我有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T14:35:30.640

听起来域上的 AD 配置文件正在覆盖用户定义的变量。我看到您的屏幕截图显示您已连接到 eait.org.edu.au 域。那将是您问题的根源。只是在这里包含一些我在其他地方发现的细节，这可能对你有帮助：

HOMEDRIVE、HOMEPATH 和 HOMESHARE 通过 Active Directory 设置和更新。HOMEDRIVE 和 HOMEPATH 即使没有在帐户上设置主驱动器也已设置；但是它们将被 AD 中设置的任何用户帐户属性覆盖。

另请参阅这些知识库文章：

```
http://support.microsoft.com/kb/841343
http://support.microsoft.com/kb/237566
http://support.microsoft.com/kb/101507 
```

* * *

在旁注中以另一种方式解决该问题：

- 我过去创建了一个新的 Windows 命令行 shell 可执行文件实例，它自动运行自定义脚本，因此每次启动 shell 时，环境变量都可以被覆盖。

- 为此，您只需将发布的用于更改环境变量的代码放入批处理脚本中，存储在您喜欢的任何位置，然后通过转到属性> 编辑用于启动 shell 的快捷方式 > 然后更改目标框： %SystemRoot%\system32\cmd.exe /K "C:\Documents and Settings\Administrator\My Documents\customshellscript.cmd" （显然 /K 之后的路径部分是您自定义脚本的位置）

这样，如果您仍然在控制台上使用 openSSH，它将始终正确设置 homedrive。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T04:19:29.480

更改这些环境变量的值不是“支持”的，至少它不会像您预期的那样工作，因为 Windows 会将它们更改回来。

根据这篇[Microsoft 知识库文章 (KB841343)](http://support.microsoft.com/kb/841343/en)，如果您需要更改这些设置，您应该使用策略。这篇文章还包含如何做到这一点的链接（但就个人而言，我从未尝试过）。请注意，这篇文章最初是为 Windows 2000 编写的，但我强烈怀疑它对当前的 Windows 版本仍然有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T21:31:03.203

早在 DOS 时代，环境变量是程序段的一部分，这意味着您基本上可以在本地快照商店中获取仅限于该程序范围的变量。

我猜 Windows 并没有改变这一点，并且 CMD 窗口可用的环境变量只有该窗口的范围和它产生的任何其他窗口。这个小实验支持这一点：

在 CMD 窗口类型中

```
set homedrive=h:\ 
```

然后通过键入来测试它是否已更新

```
set h 
```

从同一个窗口类型

```
start cmd 
```

在这个新的窗口类型中

```
set h 
```

完成此操作后，我得到 HOMEDRIVE=H:\

如果我只是从开始菜单打开一个新的 CMD 窗口并执行相同的 SET HI get HOMEDRIVE=C:\

我对 OpenSSH 一无所知，但我怀疑 START CMD 获得了更新的 HOMEDRIVE 环境变量，如果你编写一个批处理来更新环境变量然后执行 OpenSSH 就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-16T22:22:09.070

我有一个类似的问题， HOMEDRIVE 变量设置为 U: 这是我们不再使用的驱动器。这仅适用于一个特定用户。我在 AD 中访问了该用户的个人资料并单击了属性编辑器选项卡。HOMEDRIVE 有一个属性，我将其从 U: 更改为 C: - 当用户再次登录时，它设置正确。我还在这里更新了 HomeDirectory 属性。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-02-23T07:48:14.170

这个问题让我在试图找到解决方案时感到非常沮丧，但我找到了我认为是明确的答案并将其发布在：

[https://stackoverflow.com/a/60235759/12903197](https://stackoverflow.com/a/60235759/12903197)

您需要运行“net user USERNAME /homedir:PATH”，其中 USERNAME 是您尝试更改的用户名，PATH 是所需主文件夹的驱动器号和完整路径，该主文件夹必须已经存在。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-12-27T17:47:48.330

在 Windows 8 上：

1.  点击“Windows 键”。
2.  键入“系统环境变量”。
3.  允许“高级系统设置”进行更改。
4.  选择“高级”选项卡。
5.  单击“环境变量...”。
6.  双击“XXXXXXXXX的用户变量”中的“路径”
7.  在变量末尾添加您想要用分号分隔的新路径。

    例如 C:\Program Files\;C:\Python27\ shareeditdelete (1)flag

# php - 使用PHPMailer发送邮件时是否可以添加签名？

> ID：11928081
> 
> 赞同：2
> 
> 时间：2012-08-13T04:06:38.823
> 
> 标签：php, phpmailer

我一直在使用 PHPMailer，它运行良好。我可以像 Outlook 那样添加签名吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T04:56:33.207

[http://en.wikipedia.org/wiki/Signature_block#E-mail_and_Usenet](http://en.wikipedia.org/wiki/Signature_block#E-mail_and_Usenet) 提供了有关电子邮件签名的概述。正如人们已经提到的，签名只是电子邮件正文的一部分。唯一的限制是：“*它应该与消息正文分隔为一行，该行由正好两个连字符组成，后跟一个空格，然后是行尾（即，“-- \n”）* “。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T04:41:48.200

如果您已经在函数中敲击了邮寄过程，那么让函数将您的签名添加到正文的末尾（$mail->MsgHTML）。

作为澄清...

```
$body = 'My message';
$body .= 'My signature';

$mail->MsgHTML($body); 
```

# html - 如何将数据获取到 html 复选框列表中，取自 javascript 函数调用

> ID：11928083
> 
> 赞同：0
> 
> 时间：2012-08-13T04:06:48.403
> 
> 标签：html, checkbox, javascript

我有一个页面，它在调用名为“hndlr”的函数时为数组分配一些值。文件的代码如下所示

```
<html>
  <head>
    <title>Search Example</title>
  </head>
  <body>
    <script>
    var pageName = new Array();
    var pageLink = new Array();
    var pageDetails = new Array();

      function hndlr(response) {
       // here I assign values to arrays pageName,pageLink,pageDetails using a for loop     
      }

    // Some codes (I cant change anything in here)
    // call the function hndlr here (I cant change anything in here)     
    </script>     

  </body>
</html> 
```

**我想将 pageName 数组放入复选框列表中，并将所选复选框的 pageLink 传递给另一个文件。**

我尝试在正文标记结束之前使用波纹管代码。但它没有将任何数据传递到下一页（b.php）

```
<form action="b.php" method="post">
<script>
for (var j = 0; j < 5; j++) {
document.write("<input type='checkbox' name='formDoor[]' id='"+j+"' value= '' />"+pageName[j]+"<br />"); 
document.getElementById(j).value = pageLink[j]; 
}
</script>
<input type="submit" name="formSubmit" value="Submit" />
</form> 
```

当我打印输出时，它会在复选框之前显示“未定义”字符串。
这意味着 pageName[j] 不返回任何值。

**问题是，这些数组对第二部分不可见（我尝试使用复选框的部分）**

请告诉我这样做的方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:16:19.280

奇怪，你的代码对我有用（点击代码框显示）：[http ://codepad.viper-7.com/4IVobE](http://codepad.viper-7.com/4IVobE)

您无法在此站点上提交表单，但您可以看到可以在第二个脚本标记中访问这些数组。我也在我的本地服务器上尝试过，在提交表单后，我能够`b.php`很好地访问这些值。

# python - 为什么我的 Python 脚本没有正确返回页面源？

> ID：11928084
> 
> 赞同：-1
> 
> 时间：2012-08-13T04:07:20.037
> 
> 标签：python, url, urllib2

我刚刚编写了一个脚本，旨在通过字母表查找所有无人认领的四字母 Twitter 名称（实际上只是为了练习，因为我是 Python 新手）。我已经编写了几个使用“urllib2”从 url 获取网站 html 的先前脚本，但这次它似乎不起作用。这是我的脚本：

```
import urllib2

src=''
url=''
print "finding four-letter @usernames on twitter..."
d_one=''
d_two=''
d_three=''
d_four=''
n_one=0
n_two=0
n_three=0
n_four=0
letters = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']

while (n_one > 26):
    while(n_two > 26):
        while (n_three > 26):
            while (n_four > 26):
                d_one=letters[n_one]
                d_two=letters[n_two]
                d_three=letters[n_three]
                d_four=letters[n_four]
                url = "twitter.com/" + d_one + d_two + d_three + d_four

                src=urllib2.urlopen(url)
                src=src.read()
                if (src.find('Sorry, that page doesn’t exist!') >= 0):
                    print "nope"
                    n_four+=1
                else:
                    print url
                    n_four+=1
            n_three+=1
            n_four=0
        n_two+=1
        n_three=0
        n_four=0
    n_one+=1    
    n_two=0
    n_three=0
    n_four=0 
```

运行此代码返回以下错误：

> SyntaxError：第 29 行的文件 name.py 中的非 ASCII 字符“\xe2”，但未声明编码； 有关详细信息，请参见[http://www.python.org/peps/pep-0263.html](http://www.python.org/peps/pep-0263.html)

在访问该链接并进行一些额外的搜索后，我在文档顶部添加了以下行：

```
# coding: utf-8 
```

现在，虽然它不再返回错误，但似乎没有发生任何事情。我添加了行

```
print src 
```

它应该打印了每个 url 的 html，但是当我运行它时什么也没发生。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T04:13:10.503

您可以通过使用摆脱过度嵌套`itertools.product`

```
from itertools import product
for d_one, d_two, d_three, d_four in product(letters, repeat=4):
    ... 
```

而不是定义一个字母列表，你可以使用`strings.ascii_lowercase`

您应该告诉 urlopen 您正在使用哪种协议（http）

```
url = "http://twitter.com/" + d_one + d_two + d_three + d_four 
```

此外，当您*确实*获得一个不存在的页面时， urlopen 会引发 a `404`，因此您应该检查它而不是查看页面文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:16:05.660

好吧，你初始化`n_one=0`，然后做一个循环`while (n_one > 26)`。当 Python 第一次遇到它时，它会看到`while (0 > 26)`显然是错误的，因此它会跳过整个循环。

正如 gnibbler 的回答告诉你的那样，无论如何都有更干净的方法来做循环。

# ios - 向下滚动时，UITableview 看不到最后一个单元格

> ID：11928085
> 
> 赞同：20
> 
> 时间：2012-08-13T04:07:35.640
> 
> 标签：ios, uitableview, scroll

我对 iOS 很陌生。我有一个填充了许多自定义单元格的 UITableView，但是向下滚动时底部单元格不可见。我的 UITableView 的 Y 值为 44，高度为 480。向下滚动时只有最后一个单元格的一半可见。我该如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-13T04:09:31.087

采用 -

```
 tableView.contentInset = UIEdgeInsetsMake(0, 0, 120, 0); //values 
```

> 通过是 - 上，左，下，右

根据您的需要通过底部偏移。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-07T09:35:10.587

这是因为你设置你的tableview的框架错误，如果你的视图有一个导航栏，通常使用这个代码：

```
CGRect frame = self.view.bounds;
frame.height -= 44; 
```

44 是导航栏的高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T04:22:28.247

如果您在顶部有一个可见的状态栏，那么它将占据 20px，这会将您的 tableView 向下推。为避免这种情况，请将 tableView 高度设置为 460 而不是 480。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-28T12:39:39.843

对我来说，这是可行的。

我已经注释掉了我的代码

```
-(void)viewWillLayoutSubviews
{
dispatch_async(dispatch_get_main_queue(), ^{
    //This code will run in the main thread:
    CGRect frame = tableViewObj.frame;
    frame.size.height = tableViewObj.contentSize.height;//commenting this code worked.
    tableViewObj.frame = frame;

});

} 
```

就是这样。它对我有用。请确保您在实现文件中的某些位置没有更改 tableview 框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-15T03:58:43.843

如果您在 iOS7 上并使用导航控制器工具栏，请确保将其设置为半透明：

```
 self.navigationController.toolbar.translucent = NO; 
```

# c++ - 与正在定义的类相同类型的静态 constexpr 成员

> ID：11928089
> 
> 赞同：48
> 
> 时间：2012-08-13T04:08:00.353
> 
> 标签：c++, c++11, constexpr

我希望 C 类有一个 C 类型的静态 constexpr 成员。这在 C++11 中可能吗？

尝试1：

```
struct Foo {
    constexpr Foo() {}
    static constexpr Foo f = Foo();
};
constexpr Foo Foo::f; 
```

g++ 4.7.0 说：“不完整类型的无效使用”指的是`Foo()`调用。

尝试2：

```
struct Foo {
    constexpr Foo() {}
    static constexpr Foo f;
};
constexpr Foo Foo::f = Foo(); 
```

现在的问题是类定义中的`constexpr`成员缺少初始化程序。`f`

尝试 3：

```
struct Foo {
    constexpr Foo() {}
    static const Foo f;
};
constexpr Foo Foo::f = Foo(); 
```

现在 g++ 抱怨重新声明`Foo::f`了`constexpr`.

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-13T07:04:45.683

如果我正确解释标准，这是不可能的。

> (§9.4.2/3) [...] 可以使用 constexpr 说明符在类定义中声明文字类型的静态数据成员；如果是这样，它的声明应指定一个大括号或等式初始化器，其中作为赋值表达式的每个初始化器子句都是一个常量表达式。[...]

从上面（以及在静态数据成员声明中没有关于非文字类型的单独声明这一事实），我相信它`constexpr`必须是**文字类型**的静态数据成员（如 §3.9/10 中所定义） )，**并且**它的**定义必须包含在声明中**。后一个条件可以通过使用以下代码来满足：

```
struct Foo {
  constexpr Foo() {}
  static constexpr Foo f {};
}; 
```

这类似于您的尝试 1，但没有类外部定义。

但是，由于`Foo`在静态成员的声明/定义时是不完整的，编译器无法检查它是否是文字类型（如 §3.9/10 中所定义），因此它拒绝该代码。

请注意，有[这个 C++-11 后文档 (N3308)](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3308.pdf)讨论了标准中当前定义的各种问题`constexpr`，并提出了修改建议。具体来说，“提议的措辞”部分建议对 §3.9/10 进行修订，暗示将不完整类型作为一种文字类型包含在内。如果该修订被接受到标准的未来版本中，您的问题将得到解决。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-24T03:52:20.497

我认为 GCC 拒绝您的尝试 3 是不正确的。C++11 标准（或其任何已接受的缺陷报告）中没有规定重新声明变量必须是`constexpr`iff 先前的声明。最接近该规则的标准是**[dcl.constexpr](7.1.5)/1_**：

> 如果函数或函数模板的任何声明具有说明`constexpr`符，则其所有声明都应包含说明`constexpr`符。

Clang 的实现`constexpr`接受您的尝试 3。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-08-21T07:32:18.100

更新[Richard Smith 的答案](https://stackoverflow.com/a/12558623/1242873)，尝试 3 现在可以在 GCC 4.9 和 5.1 以及 clang 3.4 上编译。

```
struct Foo {
  std::size_t v;
  constexpr Foo() : v(){}
  static const Foo f;
};

constexpr const Foo Foo::f = Foo();

std::array<int, Foo::f.v> a; 
```

但是，当 Foo 是类模板时，clang 3.4 失败，但 GCC 4.9 和 5.1 仍然可以正常工作：

```
template < class T >
struct Foo {
  T v;
  constexpr Foo() : v(){}
  static const Foo f;
};

template < class T >
constexpr const Foo<T> Foo<T>::f = Foo();

std::array<int, Foo<std::size_t>::f.v> a; // gcc ok, clang complains 
```

叮当错误：

```
error: non-type template argument is not a constant expression
std::array<int, Foo<std::size_t>::f.v> a;
                ^~~~~~~~~~~~~~~~~~~~~ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-10T18:35:31.650

早些时候我遇到了同样的问题，遇到了这个十年前的问题。我很高兴地报告说，在这几年中出现了解决方案。我们只需要执行上面的“尝试 3”之类的操作，但将定义标记为`Foo::f`as `inline`。编译的最小示例`g++ --std=c++17`：

**foo.hpp**

```
#ifndef __FOO_HPP
#define __FOO_HPP

struct Foo
{
    constexpr Foo() {}
    static const Foo f;
};

inline constexpr Foo Foo::f = Foo();

#endif 
```

foo.cpp

```
#include "foo.h" 
```

**主文件**

```
#include "foo.h"

int main(int, char **) { return 0; } 
```

# algorithm - 2-SUM 的线性时间算法

> ID：11928091
> 
> 赞同：24
> 
> 时间：2012-08-13T04:08:13.330
> 
> 标签：algorithm

给定一个整数 x 和一个由 N 个不同整数组成的排序数组 a，设计一个线性时间算法来确定是否存在两个不同的索引 i 和 j 使得 a[i] + a[j] == x

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-13T04:20:01.003

这是[子集和问题的类型](https://en.wikipedia.org/wiki/Subset_sum_problem)

这是我的解决方案。不知道是不是早知道。想象一下两个变量 i 和 j 的函数的 3D 图：

```
sum(i,j) = a[i]+a[j] 
```

对于每一个`i`有这样`j`的`a[i]+a[j]`最接近`x`。所有这些`(i,j)`对形成*最接近 x*线。我们只需要沿着这条线走并寻找`a[i]+a[j] == x`：

```
 int i = 0; 
 int j = lower_bound(a.begin(), a.end(), x)  -  a.begin(); 
 while (j >= 0 && j < a.size()  &&  i < a.size())  {  
    int sum = a[i]+a[j]; 
    if (sum == x)   { 
        cout << "found: " << i << " " << j << endl;  
        return;
    }
    if (sum > x)    j--;
    else            i++;
    if (i > j) break;
 }  
 cout << " not found\n"; 
```

复杂度：O(n)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-13T04:15:14.203

从补语的角度思考。

遍历列表，为每个项目计算出该数字到达 X 所需的数字是多少。将数字和补码放入哈希中。在迭代检查以查看数字或其补码是否在散列中。如果是的话，找到了。

编辑：因为我有一些时间，一些伪代码。

```
boolean find(int[] array, int x) {
    HashSet<Integer> s = new HashSet<Integer>();

    for(int i = 0; i < array.length; i++) {
        if (s.contains(array[i]) || s.contains(x-array[i])) {
            return true;
        }
        s.add(array[i]);
        s.add(x-array[i]);
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T20:37:37.503

1.  首先通过搜索 > ceil(x/2) 的第一个值。让我们将此值称为 L。
2.  从 L 的索引开始，向后搜索，直到找到与总和匹配的另一个操作数。

它是 2*n ~ O(n)

这我们可以扩展到二分搜索。

1.  使用二分搜索来搜索一个元素，使得我们找到 L，使得 L 为 min(elements in a > ceil(x/2))。

2.  对 R 执行相同操作，但现在将 L 作为数组中可搜索元素的最大大小。

这种方法是 2*log(n)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-22T00:53:29.417

这是一个使用 Dictionary 数据结构和数字补码的 python 版本。这具有线性运行时间（N 阶：O(N)）：

```
def twoSum(N, x):
    dict = {}

    for i in range(len(N)):
        complement = x - N[i]
        if complement in dict:
            return True
        dict[N[i]] = i

    return False

# Test
print twoSum([2, 7, 11, 15], 9) # True
print twoSum([2, 7, 11, 15], 3) # False 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-06-19T14:39:17.257

鉴于数组已排序（WLOG 以降序排列），我们可以执行以下操作： 算法 A_1：给定 (a_1,...,a_n,m)，a_1<...,<a_n。将一个指针放在列表的顶部，一个放在底部。计算两个指针所在的总和。如果总和大于 m，则将上面的指针向下移动。如果总和小于 m，则将下指针向上移动。如果一个指针在另一个指针上（这里我们假设每个数字只能使用一次），报告 unsat。否则，（将找到相等的总和），报告 sat。

很明显，这是 O(n)，因为计算的和的最大数量正好是 n。正确性的证明留作练习。

这只是 SUBSET-SUM 的 Horowitz 和 Sahni (1974) 算法的一个子程序。（但是，请注意，几乎所有通用 SS 算法都包含这样的例程，Schroeppel, Shamir (1981), Howgrave-Graham_Joux (2010), Becker-Joux (2011)。）

如果给定一个无序列表，实现这个算法将是 O(nlogn)，因为我们可以使用 Mergesort 对列表进行排序，然后应用 A_1。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-27T15:56:16.477

遍历数组并将合格的数字及其索引保存到地图中。该算法的时间复杂度为 O(n)。

```
vector<int> twoSum(vector<int> &numbers, int target) {
    map<int, int> summap;
    vector<int> result;
    for (int i = 0; i < numbers.size(); i++) {
        summap[numbers[i]] = i;
    }
    for (int i = 0; i < numbers.size(); i++) {
        int searched = target - numbers[i];
        if (summap.find(searched) != summap.end()) {
            result.push_back(i + 1);
            result.push_back(summap[searched] + 1);
            break;
        }
    }
    return result;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-12T18:23:22.287

我只是将差异添加到`HashSet<T>`这样的：

```
public static bool Find(int[] array, int toReach)
{
    HashSet<int> hashSet = new HashSet<int>();

    foreach (int current in array)
    {
        if (hashSet.Contains(current))
        {
            return true;
        }
        hashSet.Add(toReach - current);
    }
    return false;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-08T06:20:44.960

```
int[] b = new int[N];
for (int i = 0; i < N; i++)
{
    b[i] = x - a[N -1 - i];
}
for (int i = 0, j = 0; i < N && j < N;)
    if(a[i] == b[j])
    {
       cout << "found";
       return;
     } else if(a[i] < b[j])
        i++;
     else
        j++;
cout << "not found"; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-07T22:45:26.700

归功于狮子座

他在java中的解决方案，如果你想试一试

我删除了返回，所以如果数组已排序，但允许重复，它仍然给出对

```
static boolean cpp(int[] a, int x) {
    int i = 0;
    int j = a.length - 1;
    while (j >= 0 && j < a.length && i < a.length) {
        int sum = a[i] + a[j];
        if (sum == x) {
        System.out.printf("found %s, %s \n", i, j);
//                return true;
        }
        if (sum > x) j--;
        else i++;
        if (i > j) break;
    }
    System.out.println("not found");
    return false;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-12T22:10:34.363

解决方案

*   我们需要数组来存储索引
*   检查数组是否为空或包含少于 2 个元素
*   定义数组的起点和终点
*   迭代直到满足条件
*   检查总和是否等于目标。如果是，请获取索引。
*   如果不满足条件，则根据总和值向左或向右遍历
*   向右移动
*   向左移动

欲了解更多信息：[ [http://www.prathapkudupublog.com/2017/05/two-sum-ii-input-array-is-sorted.html](http://www.prathapkudupublog.com/2017/05/two-sum-ii-input-array-is-sorted.html) [![在此处输入图像描述](../Images/6f0dc0dca948502cb11637b93c1575e8.png)](https://i.stack.imgur.com/QQDF3.gif)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-17T09:40:40.240

这是一个线性时间复杂度解 O(n) 时间 O(1) 空间

```
 public void twoSum(int[] arr){

   if(arr.length < 2) return;

   int max = arr[0] + arr[1];
   int bigger = Math.max(arr[0], arr[1]);
   int smaller = Math.min(arr[0], arr[1]);
   int biggerIndex = 0;
   int smallerIndex = 0;

    for(int i = 2 ; i < arr.length ; i++){

        if(arr[i] + bigger <= max){ continue;}
        else{
            if(arr[i] > bigger){
                smaller = bigger;
                bigger = arr[i];
                biggerIndex = i;
            }else if(arr[i] > smaller)
            {
                smaller = arr[i];
                smallerIndex = i;
            }
            max = bigger + smaller;
        }

    }

    System.out.println("Biggest sum is: " + max + "with indices ["+biggerIndex+","+smallerIndex+"]"); 
```

}

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-24T01:16:56.037

*注意：代码是我的，但测试文件不是。此外，哈希函数的这个想法来自网络上的各种阅读。*

Scala 中的一个实现。它对值使用 hashMap 和自定义（但简单）映射。我同意它没有利用初始数组的排序特性。

**哈希函数**

我通过将每个值除以 10000 来固定存储桶大小。该数字可能会有所不同，具体取决于您想要的存储桶大小，可以根据输入范围进行优化。

例如，键 1 负责从 1 到 9 的所有整数。

**对搜索范围的影响**

这意味着，对于当前值*n*，您正在寻找补码*c*例如*n + c = x*（*x*是您试图找到 2-SUM 的元素），有只有 3 个可能的桶，其中补码可以是：

*   -钥匙
*   -键 + 1
*   -键 - 1

假设您的号码位于以下格式的文件中：

```
0
1
10
10
-10
10000
-10000
10001
9999
-10001
-9999
10000
5000
5000
-5000
-1
1000
2000
-1000
-2000 
```

这是Scala中的实现

```
import scala.collection.mutable                                                                                                                                                                       
import scala.io.Source

object TwoSumRed {
  val usage = """ 
    Usage: scala TwoSumRed.scala [filename]
  """

  def main(args: Array[String]) {
    val carte = createMap(args) match {
      case None => return
      case Some(m) => m
    }

    var t: Int = 1

    carte.foreach {
      case (bucket, values) => {
        var toCheck: Array[Long] = Array[Long]() 

        if (carte.contains(-bucket)) {
          toCheck = toCheck ++: carte(-bucket)
        }
        if (carte.contains(-bucket - 1)) {
          toCheck = toCheck ++: carte(-bucket - 1)
        }
        if (carte.contains(-bucket + 1)) {
          toCheck = toCheck ++: carte(-bucket + 1)
        }

        values.foreach { v =>
          toCheck.foreach { c =>
            if ((c + v) == t) {
              println(s"$c and $v forms a 2-sum for $t")
              return
            }
          }
        }
      }
    }
  }

  def createMap(args: Array[String]): Option[mutable.HashMap[Int, Array[Long]]] = {
    var carte: mutable.HashMap[Int,Array[Long]] = mutable.HashMap[Int,Array[Long]]()

    if (args.length == 1) {
      val filename = args.toList(0)
      val lines: List[Long] = Source.fromFile(filename).getLines().map(_.toLong).toList
      lines.foreach { l =>
        val idx: Int = math.floor(l / 10000).toInt
        if (carte.contains(idx)) {
          carte(idx) = carte(idx) :+ l
        } else {
          carte += (idx -> Array[Long](l))
        }
      }
      Some(carte)
    } else {
      println(usage)
      None
    }
  }
} 
```

# regex - 匹配跨越多行的标记

> ID：11928095
> 
> 赞同：0
> 
> 时间：2012-08-13T04:09:12.193
> 
> 标签：regex, scala

考虑下面的示例字符串：
“是否有可能促进
和解与建设和平？”

我想匹配令牌**reconciliation**。

类似的东西`"""(?m)\b[^\s]*\-$"""`匹配**recon-**但`"""(?m)\b[^\s]*\-$^[^\s]*\b"""`不匹配**reconc-iliation**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:14:06.140

**这会起作用**

```
\b(\S+-[\r\n]+\S+)\b 
```

**更新**

`^`--> 匹配行首/或字符串开始（取决于使用`s`开关）

`$`--> 匹配行尾/或字符串结尾（取决于使用`s`开关）

`\b`--> 匹配单词边界

`\r`--> 回车

`\n`--> 新行

只有 Windows 同时使用`\r`和`\n`作为行分隔符。

# python - 在许多文件上运行 python 脚本的问题

> ID：11928099
> 
> 赞同：0
> 
> 时间：2012-08-13T04:09:32.257
> 
> 标签：python, linux, bash, shell

我在 Linux (Ubuntu 11.10) 机器上；再次伯恩斯。

我必须使用 python 脚本处理一个充满文件的目录。我的同事编写了 python 脚本，我之前已经成功地一次在一个文件上使用过它。它有两个参数：要处理的文件的路径用引号括起来，以及一个称为次要参数`-min`，它需要一个整数。此外，脚本写入标准输出。

根据我的 shell 脚本编写经验以及在此论坛上关注其他人的经验，我使用以下方法遍历文件目录：

```
for f in path/to/data_directory/*; do
  path/to/pythonscript.py $f -min 1 > path/to/out_directory/$f;
done 
```

我在`out_directory`. 每一个的内容都是只有python脚本才能写的。也就是说，上面的 for 循环成功地将文件传递给脚本。但是，每个文件内容的性质是完全错误的（因为脚本所做的计算是错误的）。当我在 中的一个文件上运行 python 脚本时`data_directory`，输出文件具有正确的内容（脚本执行的计算是正确的）。

使它更复杂的是，相同的 shell 方法（`for`循环）在我同事的 Mac OS X 中完美运行。

问题出在哪里？我错过了一些关于 Linux shell 的非常基本的东西吗？也许这是一个语法错误？

任何帮助将不胜感激。

更新：我只是再次运行了 for 循环，但我没有将它指向文件的 data_directory，而是将它指向 data_directory 中的一个文件。我遇到了同样的问题 - python 脚本没有计算出正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:20:25.823

我看到的唯一问题是文件名可能包含空格 - 所以你应该引用文件名：

```
for f in path/to/data_directory/*; do
  path/to/pythonscript.py "$f" -min 1 > "path/to/out_directory/$f"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:44:41.023

好吧，我不知道这是否有帮助。

```
path/to/pythonscript.py $f -min > path/to/out_director/$f 
```

替换为

```
path/to/pythongscript.py path/to/data_directory/myfile -min 1 > path/out_directory/path/to/data_directory/myfile 
```

脚本应该是

```
cd path/to/data_directory
for f in *; do
path/to/pythonscript.py $f -min 1 >  path/to/out_directory/$f
done 
```

您正在运行哪个版本的 bash？

如果你运行这个脚本你会得到什么？

```
cd path/to/data_directory
for f in *; do
echo $f > /tmp/$f
done 
```

当然，这应该会给你一堆包含它们自己的文件名的文件。

# ios5 - 如何在 iOS ipad aap 的 UITableView 中选择单个控件？

> ID：11928101
> 
> 赞同：0
> 
> 时间：2012-08-13T04:10:03.220
> 
> 标签：ios5, uitableview, uisplitview

我对 iOS 开发非常陌生。我已经为我的 ipad 应用程序使用项目向导创建了一个拆分视图项目。现在我面临的问题是，我想在一个单元格中添加三个按钮并希望它们单独点击。当我运行时，我运行项目并尝试点击按钮，整行被选中，而不是单个按钮。如何防止这种情况..请帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:53:40.900

我想你用过

```
 [cell.backgroundView addSubview:yourButton]; 
```

利用

```
 [cell.contentView addSubview:yourButton]; 
```

# asp.net - 在 ASP.NET 中将 <%= %> 或 <%# %> 与 runat=server 一起使用

> ID：11928105
> 
> 赞同：5
> 
> 时间：2012-08-13T04:11:06.637
> 
> 标签：asp.net, asp.net-webcontrol

我有一个看起来像这样的网络控件

```
公共类 Foo : WebControl
{
  [可绑定（真）]
  [类别（“默认”）]
  [默认值（””）]
  [可本地化（真）]
  公共字符串栏 { 获取；放; }

  受保护的覆盖无效渲染（HtmlTextWriter 输出）
  {
    output.WriteLine(Bar);
  }
}

```

我想把这个 webcontrol 放在我的 aspx 页面中，如下所示：

```
<cc1:Foo Bar="<%= Fa.La.La %>/otherstuff" runat="server" />

```

（显然这段代码被简化以显示问题）

在我的 Render 方法中，变量 Fa.La.La 没有被评估。它以原始文本“<%= Fa.La.La %>”的形式出现我如何评估它？

我并不特别说明变量是如何传入的。如果变量以 <%# ... %> 的形式传入，则可以对其进行评估，那可以正常工作。关键是我有一些服务器端变量要在调用 Render() 方法之前/期间进行评估。

我唯一能想到的是使用正则表达式来获取 <%= ... %> 的内容并使用反射或其他东西，但必须有一种更优雅的方式来做到这一点。

[这个问题与在带有 runat=server 的 href <%= xx %> 中使用服务器变量](https://stackoverflow.com/q/4306850/24267)非常相似，但并不完全相同，因为那里的答案都没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T05:01:32.330

好吧，首先你应该清楚区分两个标签。这是我读过并实际使用过的一些要点。

*   `<%=`表达式在渲染时进行评估
*   如果未调用 DataBind() ，则`<%#`表达式会在`DataBind()`time 时进行评估，并且根本不会进行评估。
*   `<%#`表达式可以用作服务器端控件中的属性。`<%=`表达式不能。

[在MSDN 博客](http://blogs.msdn.com/b/dancre/archive/2007/02/13/the-difference-between-lt-and-lt-in-asp-net.aspx)上阅读更多内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T04:21:02.260

您应该必须使用绑定表达式`<%# expr %>`。

```
<cc1:Foo Bar='<%# String.Concat(Fa.La.La,"/otherstuff")%>' runat="server" /> 
```

`DataBind()`并在代码隐藏中调用方法。

```
public void page_load()
{
  DataBind();
} 
```

# php - 带有隐私条件检查的查询中的 mysql 查询

> ID：11928108
> 
> 赞同：1
> 
> 时间：2012-08-13T04:11:24.107
> 
> 标签：php, mysql

我有 3 张桌子。

```
myMembers
------------------------------------
id | username | privacy
------------------------------------
1  | userA    | 0
2  | userB    | 1
3  | userC    | 0
4  | userD    | 1

following
--------------------------------
id  | user_id  | follower_id
--------------------------------
1   | 2        | 1

posts
-------------------------------------
id  |  userID | username   | statusMsg
--------------------------------------
1   |  4      | userD    | Issac Newton is genius
2   |  2      | userB    | Newton Saw apple
3   |  3      | userC    | Newtonian Physics
4   |  1      | userA    | Calculus came from Sir Newton 
```

有一个搜索字段。当登录用户在表“帖子”中搜索“关键字”时，我想省略那些将其隐私设置为“1”且搜索者未关注用户 B 的用户的结果。

查询在逻辑上应该这样做。

```
SELECT * from posts WHERE (match the keyword) 
            AND ( 
                if (poster's privacy (which is set in myMembers)==1){
                    if (seacher is following poster){
                        select this post
                    }
                }
                   else { select this post
                }
             )
                   LIMIT results to 5 rows 
```

因此，对于关键字“Newton”，如果 userA 正在搜索，则应返回来自 'posts' 的第 2、3、4 行。如果 userD 正在搜索，则只应返回“posts”中的第 1、3 和 4 行，

基于隐私和以下编辑：标记以供将来搜索：mySql 中 WHERE 子句中的 IF 条件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:14:23.710

请尝试此查询（也在[SQL Fiddle](http://www.sqlfiddle.com/#!2/48b44/3)上）：

```
SELECT p.id, p.user_id, m.username, m.privacy,
       searcher.username "Searcher", p.status_msg
  FROM posts p
  JOIN members m ON m.id = p.user_id
  LEFT JOIN following f ON p.user_id = f.user_id
  JOIN members searcher ON searcher.username = 'userA'
 WHERE (m.privacy = 0 OR (m.privacy = 1 AND f.follower_id = searcher.id)
                      OR m.id = searcher.id)
   AND p.status_msg LIKE '%New%'
 ORDER BY p.id
 LIMIT 5; 
```

我`username`从`posts`表中删除了字段，因为它是多余的。此外，我对表和列的命名略有不同，因此查询可能需要对您的架构进行外观更改。

子句中的第一行`WHERE`是您要查找的行，它按以下顺序选择帖子：

1.  来自没有隐私的成员的第一个帖子；
2.  然后是当前成员的帖子`searcher`；
3.  最后是会员本人的帖子。

* * *

**编辑：**

此查询使用原始标识符：

```
SELECT p.id, p.`userID`, m.username, m.privacy,
       searcher.username "Searcher", p.`statusMsg`
  FROM posts p
  JOIN `myMembers` m ON m.id = p.`userID`
  LEFT JOIN following f ON p.`userID` = f.user_id
  JOIN `myMembers` searcher ON searcher.username = 'userD'
 WHERE (m.privacy = 0 OR f.follower_id = searcher.id OR m.id = searcher.id)
   AND p.`statusMsg` LIKE '%New%'
 ORDER BY p.id
 LIMIT 5; 
```

* * *

**编辑2：**

为避免重复，以防`posts`表中的用户有多个关注者，连接和过滤条件应按以下方式更改（在[SQL Fiddle](http://www.sqlfiddle.com/#!2/a6262/31)上）：

```
SELECT p.id, p.user_id, m.username, m.privacy,
       searcher.username "Searcher", p.status_msg
  FROM posts p
  JOIN members m ON m.id = p.user_id
  JOIN members searcher ON searcher.username = 'userC'
  LEFT JOIN following f ON p.user_id = f.user_id
   AND follower_id = searcher.id
 WHERE (m.privacy = 0 OR (m.privacy = 1 AND f.id IS NOT NULL)
                      OR m.id = searcher.id)  
 ORDER BY p.id
 LIMIT 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:23:02.953

尝试这个：

```
SELECT a.*
FROM posts a
     LEFT JOIN (SELECT user_id
                FROM following a1
                     INNER JOIN myMembers b1
                       ON a1.follower_id = b1.id
                  WHERE a1.follower_id = 1 AND
                        b1.privacy = 1
                ) b
                ON a.userID = b.user_id AND
WHERE a.statusMsg LIKE '%search%' AND
      b.user_id IS NULL
LIMIT 5; 
```

或没有子查询的更好方法：

```
SELECT a.*
FROM posts a
     LEFT JOIN myMembers b
         ON a.userID = b.id AND
            b.privacy = 1
     LEFT JOIN following c
         ON a.userID = c.user_id AND
            c.follower_id = 1
WHERE a.statusMsg LIKE '%search%' AND
      b.id IS NULL AND
      c.user_id IS NULL
LIMIT 5; 
```

请参阅：[SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:11:26.077

尝试以下操作：

```
SET @my_user_id= 1;

SELECT * FROM posts p
INNER JOIN myMembers m ON p.user_id= m.id  
WHERE statusMsg LIKE '%'
AND privacy=0
AND user_id IN (SELECT follower_id FROM following f WHERE f.user_id=@my_user_id)
LIMIT 5 
```

# android - Android Json解析复杂数组

> ID：11928111
> 
> 赞同：0
> 
> 时间：2012-08-13T04:11:33.893
> 
> 标签：android

```
[
  {
    "countries": [
      {
        "id": 1,
        "country": "India"
      },
      {
        "id": 2,
        "country": "Australia"
      },
      {
        "id": 3,
        "country": "Srilanka"
      },
      {
        "id": 4,
        "country": "Pakistan"
      },
      {
        "id": 5,
        "country": "Switzerland"
      }
    ]
  }
] 
```

如何在 Android 中解析这个 Json 响应。我没有得到任何适当的解决方案。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T04:16:21.433

像这样做...

```
JSONArray arr = locs.getJSONArray("countries");

for (int i = 0; i < arr.length(); ++i) {
    JSONObject rec = arr.getJSONObject(i);
    int id = rec.getInt("id");
    String con = rec.getString("country");
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:17:26.593

```
 JSONArray jArr=new JSONArray(response);
    for(int i=0;i<jArr.length;i++)
    {
    id[]=jArr.getJSONObject(i).getInt("id");
    con[]=jArr.getJSONObject(i).getString("country");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T04:15:01.257

[http://developer.android.com/reference/org/json/JSONTokener.html](http://developer.android.com/reference/org/json/JSONTokener.html)

我还看到[Jackson](http://wiki.fasterxml.com/JacksonDocumentation)在 Android 应用程序中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T04:57:39.000

```
 JSONArray countriesobj = new JSONArray();   
 JSONObject json;
            try {
                JSONObject jObject = new JSONObject(response);
                json = jObject;

                countriesobj = json.getJSONArray("countries");

                country = new String[countriesobj.length()];
                for (int i = 0; i < countriesobj.length(); i++) {

                    JSONObject e = countriesobj.getJSONObject(i);

                    country[i] = e.getString("country");

                }

            } catch (Exception e) {
                e.printStackTrace();

            } 
```

# c++ - 为什么 std::remove_copy_if() 不实际删除？

> ID：11928115
> 
> 赞同：22
> 
> 时间：2012-08-13T04:12:26.950
> 
> 标签：c++, stl

这可能是 STL 中命名最差的函数吗？（反问）

std::remove_copy_if() 实际上似乎没有做任何*删除*。据我所知，它的行为更像 copy_if_not。

否定有点令人困惑，但可以用 std::not1() 解决，但是我可能会误解一些东西，因为我无法理解这个函数与删除有什么关系——我错过了什么吗？

如果没有，是否有 STL 算法有条件地从容器中删除（移动？）元素并将它们放入另一个容器中？

编辑以添加示例，以便读者减少困惑。

以下程序似乎使输入范围（V1）保持不变：

```
#include <vector>
#include <iostream>
#include <algorithm>
#include <iterator>

using std::cout;
using std::endl;

int main (void)
{
    std::vector<int> V1, V2;
    V1.push_back(-2);
    V1.push_back(0);
    V1.push_back(-1);
    V1.push_back(0);
    V1.push_back(1);
    V1.push_back(2);

    std::copy(V1.begin(), V1.end(), std::ostream_iterator<int>(cout, " "));
    cout << endl;

    std::remove_copy_if(
        V1.begin(),
        V1.end(),
        std::back_inserter(V2),
        std::bind2nd(std::less<int>(), 0));

    std::copy(V2.begin(), V2.end(), std::ostream_iterator<int>(cout, " "));
    cout << endl;
    std::copy(V1.begin(), V1.end(), std::ostream_iterator<int>(cout, " "));
    cout << endl;
} 
```

它输出：

```
-2 0 -1 0 1 2 
0 0 1 2 
-2 0 -1 0 1 2 
```

我期待看到这样的东西：

```
-2 0 -1 0 1 2 
0 0 1 2 
0 0 1 2 ? ? ? 
```

在哪里 ？可以是任何值。但令我惊讶的是，输入范围未被触及，并且返回值不能与（在这种情况下）std::vector::erase() 一起使用。（返回值是一个*输出*迭代器。）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-13T10:45:18.003

> 这可能是 STL 中命名最差的函数吗？

一些背景信息：在标准库（或原始 STL）中，存在三个概念，即容器、容器中的迭代器以及应用于迭代器的算法。迭代器用作范围元素的游标和访问器，但没有对容器的引用（如前所述，甚至可能没有底层容器）。

这种分离有一个很好的特性，您可以将算法应用于不属于容器的元素范围（考虑像`std::istream_iterator`or之类的迭代器适配器`std::ostream_iterator`）或者属于容器的不考虑所有元素（`std::sort( v.begin(), v.begin()+v.size()/2 )`缩短容器的前半部分） ）。

不利的一面是，因为算法（和迭代器）并不真正了解容器，他们无法真正修改它，他们只能修改存储的元素（这是他们可以访问的）。变异算法，喜欢`std::remove`或`std::remove_if`在这个前提下工作：它们覆盖与条件不匹配的元素，有效地*将*它们从容器中删除，但它们不修改容器，只修改包含的值，这取决于调用者在第二步*擦除删除*成语的：

```
v.erase( std::remove_if( v.begin(), v.end(), pred ),
         v.end() ); 
```

此外，对于变异算法（那些执行更改的算法），就像`std::remove`有一个通过添加名称来命名的非变异版本`copy`：`std::remove_copy_if`. 没有一种`XXXcopyYYY`算法被认为会更改输入序列（尽管如果您使用别名迭代器，它们可以）。

虽然这确实不是命名 的借口，但`std::remove_copy_if`我希望它有助于理解一个算法在给定它的名称时做了什么：`remove_if`将修改范围的*内容*并产生一个范围，其中所有与谓词匹配的元素都已被*删除*（返回的范围是由算法的第一个参数到返回的迭代器形成的）。`std::remove_copy_if`做同样的事情，但不是修改底层序列，而是创建序列的*副本*，其中与谓词匹配的那些元素已被删除。即所有 * *copy* * 算法都等价于*copy*然后应用原算法（注意等价是合乎逻辑的，`std::remove_copy_if`只需要一个*OutputIterator*，这意味着它不可能*复制*然后遍历复制的范围应用`std::remove_if`。

相同的推理路线可以应用于其他变异算法：`reverse`反转范围中的*值*（请记住，迭代器不访问容器），将范围中`reverse_copy`的元素以相反的顺序复制到单独的范围中。

> 如果没有，是否有 STL 算法有条件地从容器中删除（移动？）元素并将它们放入另一个容器中？

STL 中没有这样的算法，但它很容易实现：

```
template <typename FIterator, typename OIterator, typename Pred>
FIterator splice_if( FIterator first, FIterator last, OIterator out, Pred p )
{
   FIterator result = first;
   for ( ; first != last; ++first ) {
      if ( p( *first ) ) {
         *result++ = *first;
      } else {
         *out++ = *first;
      }
   }
   return result;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T08:20:14.370

> 是否有用于有条件地从容器中删除（移动？）元素并将它们放入另一个容器中的 STL 算法？

我能想到的最接近的事情是[`std::stable_partition`](http://en.cppreference.com/w/cpp/algorithm/stable_partition)：

```
std::vector<int> v;
// ...
auto it = std::stable_partition(v.begin(), v.end(), pick_the_good_elements);
std::vector<int> w(std::make_move_iter(it), std::make_move_iter(v.end()));
v.erase(it, v.end()); 
```

现在`v`将包含“好”元素，`w`并将包含“坏”元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T04:30:02.837

> 如果没有，是否有 STL 算法有条件地从容器中删除（移动？）元素并将它们放入另一个容器中？

并不真地。这个想法是允许修改算法在容器中“移动”（不是 C++ 意义上的）元素，但不能改变容器的长度。所以`remove`可以调用算法`prepare_for_removal`。

顺便说一句，C++11 提供了[std::copy_if](http://en.cppreference.com/w/cpp/algorithm/copy)，它允许您将选定的元素从一个容器复制到另一个容器，而无需使用`remove_copy_if`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T04:21:27.047

你是对的，这就是它的作用...... std::remove_copy_if 复制向量，删除任何与 pred 匹配的内容。

std::remove_if ... 在条件下删除（或者更确切地说，将事物随机化）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T04:29:54.480

我同意这`remove`不是这个函数系列的最佳名称。

但正如 Luc 所说，它的工作方式是有原因的，他提到的[GoTW 项目](http://www.gotw.ca/gotw/051.htm)解释了它是如何工作的。`remove_if`工作方式与 remove 完全相同 - 这是您所期望的。

您可能还想阅读这篇[Wikibooks 文章](http://en.wikibooks.org/wiki/More_C++_Idioms/Erase-Remove)。

# android - 使用多个微调器，但只有一个微调器拥有所有数据

> ID：11928116
> 
> 赞同：-1
> 
> 时间：2012-08-13T04:12:30.963
> 
> 标签：android

我有两个微调器和两个数组。但是，一个微调器接收两个数组，而另一个微调器没有从两个数组中的任何一个接收值。注意：我不想使用单选按钮，因为数据会被缩短以供查看。

```
final ArrayList<String> serialnums = new ArrayList<String>();
serialnums.add("576798");
serialnums.add("495874");
serialnums.add("345667");
serialnums.add("956345");

final ArrayList<String> carrys = new ArrayList<String>();
serialnums.add("R");
serialnums.add("L");
serialnums.add("F");
serialnums.add("B");

s1 = (Spinner) findViewById(R.id.spinnerSerial);
spinnerCarry = (Spinner) findViewById(R.id.spinnerCarry);

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, serialnums );
ArrayAdapter<String> adapterCarrys = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, carrys );

s1.setAdapter(adapter);
spinnerCarry.setAdapter(adapterCarrys); 
```

注 2： Spinner`s1`获取所有数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:13:54.323

一个微调器拥有所有数据，因为您将所有数据分配给它。改变这个：

```
final ArrayList<String> carrys = new ArrayList<String>();
serialnums.add("R");
serialnums.add("L");
serialnums.add("F");
serialnums.add("B"); 
```

对此：

```
final ArrayList<String> carrys = new ArrayList<String>();
carrys.add("R");
carrys.add("L");
carrys.add("F");
carrys.add("B"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:34:28.437

您正在添加“R”“L”“F”“B”以 `serialnums`将其添加到`carrys`

# php - 从数据库发送批量短信

> ID：11928118
> 
> 赞同：0
> 
> 时间：2012-08-13T04:12:50.570
> 
> 标签：php, mysql, database, sms

我一直在尝试使用下面的代码发送短信，但是当我循环时它没有发送。仅当我从数据库中选择一个数字时它才有效。我在数据库中有超过 5,000 个号码，并希望同时向所有号码发送短信，请帮助。

```
mysql_select_db($database_xxx, $xxx);
$query_rs = "SELECT phone FROM `notify` order by id asc LIMIT $l1 , $l2";
$rs= mysql_query($query_rs, $xxx) or die(mysql_error());
$row_rs = mysql_fetch_assoc($rs);
$totalRows_rs= mysql_num_rows($rs);

$phone = $row_rs['phone'];

// Do while loop to send sms.
while($row=mysql_fetch_assoc($rs)){

                         // Let's do some formatting and keep smiling.
    $giringirin = ereg_replace("[^0-9]", "", $phone );
    if (strlen($giringirin) == 11) { 
    $phone1=substr($giringirin, 1);
    $phone= "234$phone1";
    } elseif (strlen($giringirin) == 13){ 
    $phone = $giringirin; 
    }

extract($_POST);

//set POST variables
$url = "http://sms.xxx.com/bulksms/bulksms.php?username=$username&password=$password&message=$smsmessage&mobile=$phone&sender=$sender";
$fields = array(
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
//execute post
$result = curl_exec($ch);

if ($result == '1801') { echo "SMS has also been sent to the Customer ($phone) \n";} else { echo "Oooops, No sms was sent";}

//close connection
curl_close($ch);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:21:47.470

您的代码令人困惑...

```
curl_setopt($ch,CURLOPT_POST,count($fields)); 
```

CURLOPT_POST 是一个布尔标志。要么你在做一个帖子，要么你不是。您发布的字段数量无关紧要。

您正在构建一系列要发布的变量/值，但通过字符串操作来完成。CURL 完全能够获取一个数组并为您完成所有这些工作，将您的整个 foreach 循环减少到仅

```
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields); 
```

您正在使用`extract()`on `$_POST`，这会污染您脚本的变量名称空间，并带有恶意用户想要发送的任何垃圾 - 您实际上是`register_globals`在再次复制 PHP 完全愚蠢的脑死亡。

您正在使用`ereg`，它已被弃用了大约 500 万互联网年。您应该改用这些`preg`功能

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T04:19:40.527

当您在浏览器中运行此脚本时会发生什么？空白页？某物？错误？

从改变开始

```
$url = "http://sms.xxx.com/bulksms/bulksms.php?username=$username&password=$password&message=$smsmessage&mobile=$phone&sender=$sender"; 
```

至

```
$url = "http://sms.xxx.com/bulksms/bulksms.php?username=".$username."&password=".$password."&message=".$smsmessage."&mobile=".$phone."&sender=".$sender.""; 
```

# java - AudioTrack 没有播放完整的缓冲区

> ID：11928123
> 
> 赞同：2
> 
> 时间：2012-08-13T04:13:42.007
> 
> 标签：java, android, audio, audiotrack

我试图以 600hz 播放 10 秒的声音，但我得到 600hz 的时间不超过 3 秒。有人可以指出我做错了什么吗？

```
 int minBuffersize = AudioTrack.getMinBufferSize(samplerate, 
           AudioFormat.CHANNEL_OUT_MONO,
            AudioFormat.ENCODING_PCM_16BIT);

    int size= (int) ((10f*samplerate)
            /minBuffersize +1);

            size*=minBuffersize;//round to the nearest minBuffersize multiple so I don't get an error

    short[] play= new short[size];

    for(int i =0;i<play.length;i++){
        float time=(float)i/(float)samplerate;

        play[i]=(short) (((float)Short.MAX_VALUE/10f)*Math.sin(
                600f
                *time
                *(2f*Math.PI)));
    }

    AudioTrack at = new AudioTrack(AudioManager.STREAM_MUSIC,
            samplerate,
            AudioFormat.CHANNEL_OUT_MONO,
            AudioFormat.ENCODING_PCM_16BIT,
            play.length,
            AudioTrack.MODE_STATIC);

    int result=at.write(play,0,play.length);

    Log.d("!!!", "result: "+result);

    at.play(); 
```

调试行返回的位置

```
result: 221184 
```

始终如一。

注意 play.length = 442368。

经过一些更多的实验，缓冲区总是 play.length 的一半，但声音本身只持续 3-5 秒，不管缓冲区有多大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:24:39.777

AudioTrack 需要缓冲区大小（以字节为单位）。由于 Short 使用 2 个字节，您应该使用 size * 2 作为缓冲区大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T11:10:50.183

在您正在使用的 AudioTrack 中`AudioTrack.MODE_STATIC`（对于具有低延迟要求的短声音），您应该使用`AudioTrack.MODE_STREAM`它，因为它是长缓冲区的正确选择（不确切知道，但可能与 3 秒有关）。

看看[这里：AudioTrack](http://developer.android.com/reference/android/media/AudioTrack.html)

只需将您的代码更改为：

```
AudioTrack at = new AudioTrack(AudioManager.STREAM_MUSIC,
        samplerate,
        AudioFormat.CHANNEL_OUT_MONO,
        AudioFormat.ENCODING_PCM_16BIT,
        play.length,
        AudioTrack.MODE_STREAM); 
```

它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:43:37.350

我建议将播放长度与 AudioTrack 缓冲区大小分离。以我的经验，只使用最小缓冲区大小然后让大写块直到完成。

我注意到可能会影响这一点的其他事情是，直到缓冲区的一半被填满，音频才会播放。AudioTrack 中的缓冲区可能如此之大，以至于它只占用了那一半并试图通过它。

# iphone - 如何在 UIViewController 中使用 applicationDidBecomeActive？

> ID：11928126
> 
> 赞同：66
> 
> 时间：2012-08-13T04:14:01.927
> 
> 标签：iphone, objective-c, ios

当应用程序变为活动或成为前台时，我想在 UIViewController 中重新加载数据。

我知道在 AppDelegate 类中调用了 applicationDidBecomeActive。
但是我必须有一个全局变量供 UIViewController 重新加载它在 AppDelegate 类中的数据，如下所示：

```
in AppDelegate.m

// global variable
UIViewController *viewController1;
UIViewController *viewController2;

-(void)applicationDidBecomeActive:(UIApplication *)application
{
    [viewController1 reloadData];
    [viewController2 reloadData];
} 
```

但这很不方便，尤其是当我有很多 UIViewControllers 时。

我可以在 UIViewController 而不是 AppDelegate 类中使用 applicationDidBecomeActive 吗？
或者有比为 UIViewController 设置全局变量更好的方法吗？

我还需要使用 UIViewControllers 中的以下方法：

```
-(void)applicationWillResignActive:(UIApplication *)application
-(void)applicationDidEnterBackground:(UIApplication *)application
-(void)applicationWillEnterForeground:(UIApplication *)application 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-08-13T04:36:57.270

在重新激活的时候，如果你想为一个视图控制器携带一个特定的东西，你应该在它的`viewDidLoad`方法中注册一个通知。

`UIApplicationDidBecomeActiveNotification`如果他们注册了，将自动通知您的应用程序和给定的控制器。

```
 [[NSNotificationCenter defaultCenter]addObserver:self
                                         selector:@selector(yourMethod)
                                             name:UIApplicationDidBecomeActiveNotification
                                           object:nil]; 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2015-08-12T00:16:30.270

这是在 Swift 中注册通知处理程序的示例（改编自 Apurv 上面的回答）：

```
override func viewDidLoad() {
    super.viewDidLoad()

    NotificationCenter.default.addObserver(
        self,
        selector: #selector(applicationDidBecomeActive(notification:)),
        name: NSNotification.Name.UIApplicationDidBecomeActive,
        object: nil)
}

@objc func applicationDidBecomeActive(notification: NSNotification) {
    // do something
} 
```

**更新`Swift 4.2`：**

```
override func viewDidLoad() {
    super.viewDidLoad()

    NotificationCenter.default.addObserver(self, selector: #selector(applicationDidBecomeActive), name: UIApplication.didBecomeActiveNotification, object: nil)
}

@objc func applicationDidBecomeActive(notification: NSNotification) {
    // Application is back in the foreground

    print("active")
} 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-12-07T17:35:07.617

**斯威夫特 3**：

```
NotificationCenter.default.addObserver(
    self,
    selector: #selector(applicationDidBecomeActive(_:)),
    name: NSNotification.Name.UIApplicationDidBecomeActive,
    object: nil)

func applicationDidBecomeActive(_ notification: NSNotification) {
    // do something
} 
```

注意：不要忘记移除观察者

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T04:22:05.267

你不能`applicationDidBecomeActive`在 viewController 中使用；它不是该类的方法。

但是，您可以使用`applicationDidBecomeActive`AppDelegate 中的方法来调用视图控制器中您认为在启动时很重要的任何方法。只需保留一个指向您的控制器的指针，以便 App Delegate 可以访问它。

这些方法在你的视图控制器中可能是什么完全取决于你和你的程序的细节。也许这意味着在您的视图控制器中调用自定义更新方法或您认为需要的任何其他方法。

您还可以使用此处概述的 NSNotificationCenter，许多系统通知可用于应用程序启动：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

但是，在我看来，严重依赖 NSNotificationCenter 是让应用程序变得杂乱无章的好方法。如果您仅从 AppDelegate 中的主要方法调用所有内容，则始终可以参考该方法以准确了解您的应用程序在启动时正在做什么。相反，如果您使用 NSNotificationCenter，您可能会将操作分散在许多类/对象中，并且可能更难追踪正在发生的事情。由于您提到了多个控制器对象，我认为调用所有内容`applicationDidBecomeActive`而不是注册每个视图控制器以获得相同的通知更加精简和有组织。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-06T02:16:38.523

Swift 5 的更新

```
class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view.
        NotificationCenter.default.addObserver(self, selector: #selector(applicationDidBecomeActive), name: UIApplication.didBecomeActiveNotification, object: nil)

    }
   // remove the observer 
   deinit {

       print("Receiver teardown")

       NotificationCenter.default.removeObserver(self)

   }

    @objc func applicationDidBecomeActive(notification: NSNotification) {
        // Application is back in the foreground

        print("applicationDidBecomeActive")
    }

} 
```

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2012-08-19T10:57:02.797

谢谢大家回答我的问题。
但我发现在 UIViewController 中使用 applicationDidBecomeActive 的更简单方法。

```
@implementation AppDelegate

-(void)applicationDidBecomeActive:(UIApplication *)application
{
    UIViewController<MyAppDelegate> *topViewController = (UIViewController<MyAppDelegate> *)navigationController.topViewController;
    if ([topViewController respondsToSelector:@selector(MyApplicationDidBecomeActive)]) {
        [topViewController MyApplicationDidBecomeActive];
    }
}
@end

@protocol MyAppDelegate
@optional
-(void)MyApplicationDidBecomeActive;
@end 
```

# graphics - 在directx11中使用顶点缓冲区绘制点画线

> ID：11928134
> 
> 赞同：1
> 
> 时间：2012-08-13T04:15:23.863
> 
> 标签：graphics, directx, directx-9, directx-11

在 OpenGL 中我们可以使用 And 在 dx9 中设置线条图案，我们可以使用's 方法`glEnable (GL_LINE_STIPPLE);glLineStipple(2,0x00FF);` 绘制点画线。`ID3DXLine``SetPattern(0x00FF)`

但似乎dx11中没有这样的方法来设置点画线的图案。如果这是真的，我想知道是否有一种聪明的方法可以在 dx11 中绘制点画线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:39:47.670

你可以看看[这个问题](https://stackoverflow.com/q/6017176/743214)。它询问如何在未弃用的现代 OpenGL 中进行线条点画，其功能类似于 Direct3D 10+。

[我的回答](https://stackoverflow.com/a/6017239/743214)基本上是使用 alpha 测试和几何着色器的组合来做到这一点：

> 也许您也可以使用 alpha（或红色）通道将模式编码为 0.0（无线）或 1.0（线）的 1D 纹理，然后让线的纹理坐标从 0 变为 1，并在片段着色器中制作一个简单的 alpha 测试，丢弃 alpha 低于某个阈值的片段。您可以促进几何着色器生成线条的 texCoords，否则您需要为每条线设置不同的顶点。这样，您还可以使 texCoord 取决于行的屏幕空间长度。
> 
> 如果您绘制三角形（使用多边形模式 GL_LINE），整个事情会变得更加困难。然后您必须自己在几何着色器中进行三角形线转换，放入三角形并取出线条（这也可能是将来弃用多边形模式的原因，如果还没有的话）。

尽管这个问题是关于 OpenGL 的，但基本原理完全相同，您只需要将着色器从答案映射到 HLSL，考虑到它们的简单性，这应该不会太难。

# php - 使用 mysql php pdo 从数据库返回一个值

> ID：11928136
> 
> 赞同：28
> 
> 时间：2012-08-13T04:15:37.123
> 
> 标签：php, mysql, pdo

我没有尝试使用循环。我只是从一列的一列中提取一个值。我用下面的代码得到了我想要的东西，但必须有一种更简单的方法来使用 PDO。

```
try {
        $conn = new PDO('mysql:host=localhost;dbname=advlou_test', 'advlou_wh', 'advlou_wh');
        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    } catch(PDOException $e) {
        echo 'ERROR: ' . $e->getMessage();
    }

$userid = 1;

$username = $conn->query("SELECT name FROM `login_users` WHERE username='$userid'");
$username2 = $username->fetch();
$username3 = $username2['name'];

echo $username3; 
```

这看起来像是太多行，无法从数据库中获取一个值。:\

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-12-01T00:41:31.223

您可以使用`fetchColumn()`：

```
$q= $conn->prepare("SELECT name FROM `login_users` WHERE username=?");
$q->execute([$userid]);
$username = $q->fetchColumn(); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-13T05:04:20.647

您可以为此创建一个函数，并在每次需要单个值时调用该函数。出于安全原因，请避免连接字符串以形成 SQL 查询。相反，对值使用准备好的语句，并对 SQL 字符串中的所有其他内容进行硬编码。为了获得某个列，只需在查询中明确列出它。一种`fetchColumn()`方法也可以方便地从查询中获取单个值

```
function getSingleValue($conn, $sql, $parameters)
{
    $q = $conn->prepare($sql);
    $q->execute($parameters);
    return $q->fetchColumn();
} 
```

然后你可以简单地做：

```
$name = getSingleValue($conn, "SELECT name FROM login_users WHERE id=?", [$userid]); 
```

它会给你带来想要的价值。

因此，您只需创建一次该函数，但可以将其重用于不同的查询。

此答案已经过社区编辑，解决了安全问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T04:29:18.103

就像你必须上车，开车去商店，在人群中奋力前行，拿起你需要的那一罐牛奶，然后奋力回家，这样你就可以喝奶昔了。

所有这些阶段都是必要的，并且每个后续步骤都取决于之前已执行的步骤。

如果您重复执行此操作，那么一定要围绕它包装一个函数，以便您可以重用它并将其减少到一个`getMyValue()`调用 - 但在后台所有代码仍然必须存在。

# iphone - UITableView 编辑后取消选择选定的单元格

> ID：11928141
> 
> 赞同：1
> 
> 时间：2012-08-13T04:16:35.857
> 
> 标签：iphone, objective-c, ios, uitableview, ios5

我在 UITableView 中选择了多个单元格，但在编辑后它们会自动取消选择。我搜索了一下，我看到人们说他们调用了“reloadData”，这导致选择被删除，但除了“viewDidAppear”之外，我不会在任何地方调用 reloadData。即使在没有更改任何内容的情况下取消了编辑，它们也会被取消选择（单击工具栏中的“编辑”按钮，然后单击“完成”按钮而不进行任何编辑）。我不确定这发生在哪里。或者，如果我可以检测到编辑何时完成（单击“完成”按钮时），我可以简单地重新选择所有已选择的单元格，但我不确定如何检测到它.. 怎么可能我防止单元格被取消选择？还是在编辑后重新选择单元格？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:51:11.083

我假设您正在尝试在按钮按下时实现选择和取消选择，如果您尝试更改 UITableViewCell 中的选择状态，请尝试使用按钮操作中的方法。

```
-(IBAction) someAction {
    if(buttonToggled){
    [tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
    }else{
    //Do something
    }
} 
```

用于更改背景颜色。

```
cell.selectionStyle = UITableViewCellSelectionStyleGray;
cell.selectedBackgroundView.backgroundColor=[UIColor blackColor]; 
```

有关上述内容的更多信息，请查看链接。

[UITableView 单元格选择颜色？](https://stackoverflow.com/questions/1998775/uitableview-cell-selected-color)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:58:48.353

我建议最好的办法是在每次按下“完成”按钮后自己重新选择它们。

取消选择单元格或未按下按钮是很正常的，因为这是它们的正常状态-除非您编写自己的代码来更改它-就像您的情况一样。

这是选择行的方法：

```
[tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone]; 
```

如果您有多个可以选择的行，请确保您有相应的设置，否则它可能总是取消选择除最新行之外的所有行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:53:17.703

没关系。我发现`- (void)setEditing:(BOOL)editing animated:(BOOL)animated`每当单击“编辑”或“完成”按钮时都会调用它。

# excel - 如何简单地excel公式？

> ID：11928142
> 
> 赞同：0
> 
> 时间：2012-08-13T04:16:45.127
> 
> 标签：excel, vsto, excel-formula

我有一个查询，它将在 SQL 的数组中生成以下公式并设置到工作表中的一个范围内，但很难阅读：

`=SUMIF(INDIRECT(ADDRESS(ROW()-1,5)&":"&ADDRESS(ROW()-6,5)),"+",INDIRECT(ADDRESS(ROW()-1,COLUMN())&":"&ADDRESS(ROW()-6,COLUMN())))-SUMIF(INDIRECT(ADDRESS(ROW()-1,5)&":"&ADDRESS(ROW()-6,5)),"-",INDIRECT(ADDRESS(ROW()-1,COLUMN())&":"&ADDRESS(ROW()-6,COLUMN())))`

那么excel是否包含任何方法来仅更改地址部分`INDIRECT(ADDRESS(ROW()-1,5)&":"&ADDRESS(ROW()-6,5))`以便`E10:E5`于跟踪？

由于公式需要在设置到工作表之前动态生成（即动态列和行），所以在设置数组到单元格之后需要简化。

任何方法都可以做类似的事情，比如`Evaluate`excel 中的函数，但只适用于`INDIRECT`并`ADDRESS`允许用户阅读简单的公式，如`=SUMIF(E10:E5,"+",J10:J5)-SUMIF(E10:E5,"-",J10:J5)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:18:50.653

为了简化公式，您可以通过将引用样式更改为`R1C1`或使用来输入 RC 表示法`.FormulaR1C1`。RC 表示法的优点是公式文本在整个列中是一致的。对于上面的公式，您可以输入：

```
=SUMIF(R[-6]C5:R[-1]C5,"+",R[-6]C:R[-1]C)-SUMIF(R[-6]C5:R[-1]C5,"-",R[-6]C:R[-1]C) 
```

或者`=SUM(SUMIF(R[-6]C5:R[-1]C5,{"+","-"},R[-6]C:R[-1]C)*{1,-1})`

`A1`并且公式应该在符号中易于阅读。

# linux - 请求一个 IP 并从同一台机器上的另一个 IP 回复

> ID：11928146
> 
> 赞同：0
> 
> 时间：2012-08-13T04:17:59.857
> 
> 标签：linux, nic, tftp

我有一个拓扑，其中我的机器将 tftp 流量发送到一个 IP 地址上的 tftp 服务器 [linux 机器]，并从另一个 IP 地址 [tftp 服务器上的 2 个 NIC] 接收回复，然后使用第二个 IP 地址进行整个传输。但我想知道如何配置这个规则[在 tftp 服务器上]，当它回复时，它应该来自***第二个***IP 地址。

我需要配置什么样的规则是IP表吗？请假设路由是在 linux 机器上配置的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:53:05.570

与 iptables 无关...我不知道您为什么要设置像您这样的场景，但是在一个 IP 上接收请求的常规 TFTP 服务器将在同一个 IP 上应答，否则您需要自定义编码的 TFTP 服务器。 ..

# mysql - MySQL - 表实现

> ID：11928148
> 
> 赞同：0
> 
> 时间：2012-08-13T04:19:03.487
> 
> 标签：mysql, database, database-design

我必须在我的数据库中实现以下内容：

*   用户参与的活动。每个活动的名称最多可包含 80 个字符，并且只应存储不同的活动。也就是说，如果两个不同的用户喜欢“Swimming”，那么“Swimming”活动应该只作为字符串存储一次。

*   每个用户都参与了哪些活动。请注意，一个用户可以有多个爱好！

因此，我必须为此目的实现表，如果需要，我还必须对现有表进行任何修改，并实现所需的任何键和外键关系。

所有这些都必须以最少的存储量存储，即，您必须从 MySQL 手册中选择适当的数据类型。您可能会假设新活动会频繁添加，活动几乎不会被删除，并且不同活动的总数可能会达到 100,000。

所以我已经有一个以“user_id”作为主键的“用户”表。

我对此的解决方案：
创建一个名为“Activities”的表，并将“activity_id”作为 PK (mediumint(5))，将“activity”作为存储爱好 (varchar(80))，然后我可以创建另一个名为“Link”的表并使用用户表中的“user_id”外键和“活动”表中的“活动ID”外键向用户显示他们喜欢做的活动。

我对这个问题的处理方法正确吗？还有其他方法可以提高效率吗？

如果一个用户在外键表“链接”中进行不止一项活动，我将如何显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:26:12.160

你的想法是正确的，也是唯一的（？）方式..它被称为多对多关系。

重申一下您的建议是，您将有一个用户表，这将有一个用户 ID，然后是一个带有活动 ID 的活动表。

要形成关系，您将拥有第三张表，出于性能考虑，它不需要主键，但是您应该索引两列（用户 ID 和活动 ID）

在您的逻辑中，当有人输入活动名称时，从活动表中提取所有记录，检查输入的值是否存在，如果不添加到表并取回新的活动 ID，然后将条目添加到将活动 ID 链接到用户 ID 的 user_activity 表.

如果它已经存在，只需添加一个将该活动 ID 链接到用户 ID 的条目。

所以你的方法是正确的，最后一个问题只是表明你应该在谷歌上搜索“多对多”关系以获取更多信息。

# node.js - 猫鼬输出错误“错误：连接关闭”

> ID：11928151
> 
> 赞同：3
> 
> 时间：2012-08-13T04:19:37.930
> 
> 标签：node.js, mongodb, mongoose

我偶然发现了一个关于 mongoose connect the mongodb 的奇怪问题，它会生成如下详细错误

```
 e:\Mentor_Resources\node\node_twitter_bootstrap>node app
Express server listening on port 3000
Trace: error occure when start to connect dbError: connection closed
    at e:\Mentor_Resources\node\node_twitter_bootstrap\server\module\word.js:14:
17
    at Connection.open (e:\Mentor_Resources\node\node_twitter_bootstrap\node_mod
ules\mongoose\lib\connection.js:201:5)
    at Db.open (e:\Mentor_Resources\node\node_twitter_bootstrap\node_modules\mon
goose\node_modules\mongodb\lib\mongodb\db.js:247:16)
    at Server.connect.connectionPool.on.server._serverState (e:\Mentor_Resources
\node\node_twitter_bootstrap\node_modules\mongoose\node_modules\mongodb\lib\mong
odb\connection\server.js:413:7)
    at EventEmitter.emit (events.js:115:20)
    at connection.on.connectionStatus (e:\Mentor_Resources\node\node_twitter_boo
tstrap\node_modules\mongoose\node_modules\mongodb\lib\mongodb\connection\connect
ion_pool.js:108:15)
    at EventEmitter.emit (events.js:91:17)
    at Socket.closeHandler (e:\Mentor_Resources\node\node_twitter_bootstrap\node
_modules\mongoose\node_modules\mongodb\lib\mongodb\connection\connection.js:401:
12)
    at Socket.EventEmitter.emit (events.js:88:17)
    at Socket._destroy.destroyed (net.js:364:10) 
```

猫鼬的代码片段是：

```
var mongoose = require('mongoose');

mongoose.connect("mongodb://localhost/word-sentence",function(err) {
    if(err)
        console.trace('error occure when start to connect db' + err);
}); 
```

我确定mongodb是打开的，我重新启动了几次mongodb，但错误仍然存​​在，所以我重新启动了我的Windows XP，然后再试一次问题消失了，一切正常，所以我想知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-14T19:59:24.673

当运行时间较长的应用程序中的池连接返回时，这是一个常见问题`connection closed`。

猫鼬[文档](https://mongoosejs.com/docs/connections.html#keepAlive)建议添加`keepAlive`到您传递给`connect`函数的选项对象。

这是一个例子（`replset`如果你不使用这个，你可以删除），

```
// include keep alive for closing connections,
// http://tldp.org/HOWTO/TCP-Keepalive-HOWTO/overview.html
var mongoOptions =
{
    db: {safe: true},
    server: {
        socketOptions: {
            keepAlive: 1
        }
    },
    replset: {
        rs_name: 'myReplSet',
        socketOptions: {
            keepAlive: 1
        }
    }
};

mongoose.connect( YOUR_URI, mongoOptions );

mongoose.connection.on('error', function(err) {
    console.log('Mongo Error:\n');
    console.log(err);
}).on('open', function() {
    console.log('Connection opened');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:15:47.400

[`mongoose.connect()`](http://mongoosejs.com/docs/api.html#index_Mongoose-connect)不接受您在代码中使用的任何回调函数，即您的猫鼬代码片段：

```
var mongoose = require('mongoose');

mongoose.connect("mongodb://localhost/word-sentence",function(err) {
    if(err)
        console.trace('error occurred, when attempted to connect db. Error: ' + err);
}); 
```

所以，我建议你从这个开始：

```
var mongoose = require('mongoose');
mongoose.connect('mongodb://localhost/word-sentence');
var db = mongoose.connection;
db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', function callback () {
  // yay connected!
}); 
```

同样，您不能期望回调中的任何参数来自`db.open('open', function cb(){})`

我建议通过这些[快速](http://mongoosejs.com/docs/index.html)[入门 mongoose 文档- 如果在文档和](https://stackoverflow.com/questions/14480257/why-two-remove-reference-item-are-there-for-model-remove-in-mongoose-api-docs)[mongodb/mongoose 关闭连接](https://stackoverflow.com/questions/14495975/why-its-recommended-not-to-close-any-mongodb-connection-anywhere-in-node-js-code)中发现某些冲突，请了解如何跳转到源代码

# ruby - aptana 3.2 ruby 代码辅助/完成不起作用

> ID：11928153
> 
> 赞同：1
> 
> 时间：2012-08-13T04:19:45.763
> 
> 标签：ruby, autocomplete, aptana

例如 ：

```
a="hello"
a. 
```

当我们尝试输入“a”时。并按“Ctrl+Space”，现在出现适当的

哪里错了？

任何想法将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:15:13.923

Aptana studio 3 现在支持 Ruby/Rails 的代码自动完成（CTRL+空格）。

# git - Git 推送到本地仓库

> ID：11928154
> 
> 赞同：0
> 
> 时间：2012-08-13T04:19:51.027
> 
> 标签：git, repository, push

我在我的机器上创建了两个存储库，我遵循这个[指南](http://michael.otacoo.com/linux-2/setting-a-git-server-with-dropbox/)。在最后一步我得到这个错误：

```
elta compression using up to 2 threads.
error: inflate: data stream error (incorrect data check)
error: corrupt loose object '6dcf134fd4eb663f01bc1088b12f7cf389254636'
fatal: loose object 6dcf134fd4eb663f01bc1088b12f7cf389254636 (stored in .git/objects/6d/cf134fd4eb663f01bc1088b12f7cf389254636) is corrupt
error: failed to push some refs to 
```

我从头开始多次删除并创建存储库，但没有帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-13T04:40:43.240

我也使用 github，但在 Windows 中。至少在我发现问题之前，我遇到了两个主要问题。尝试查看这两种解决方案

1.  URL 区分大小写。因此，请确保您的遥控器的网址完全正确，包括（大写/小写字母）。

2.  出于某种原因（从不费心找出原因），您可能还需要在推送之前从 github 拉取。到目前为止，我必须为每个项目都这样做（至少在第一次推送之前）。

所以：

```
git pull <remote name> <branch name>
git push <remote name> <branch name> 
```

最有可能在您的情况下：

```
remote name = origin
branch name = master 
```

并且只是迭代整个过程。您是否执行了所有这些步骤：

```
git init 
git add .
git commit -m "inital commit"
git remote add <device name> URL
git pull <device Name> master
git push <decive Name> master 
```

另请注意，许多 git 演练都试图使用遥控器。至少在你开始工作之前，我会介绍最基本的内容。所以要打死马！

```
git remote add origin https://github.com/<account name>/<repo name>.git 
```

或者在我的情况下，它看起来像这样：

```
git remote add origin https://github.com/DanielHaro/my_app.git 
```

但我讨厌远程名称来源，所以我实际上使用：

```
git remote add tron https://github.com/DanielHaro/my_app.git 
```

太可爱了，因为以后你可以使用：

```
git push tron master 
```

# javascript - 如何使内容脚本中的调整大小事件起作用？

> ID：11928157
> 
> 赞同：2
> 
> 时间：2012-08-13T04:20:07.360
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

调整大小事件不适用于附加 SDK (1.8) 中的内容脚本
此脚本中的内容脚本：[https ://builder.addons.mozilla.org/package/142401/latest/](https://builder.addons.mozilla.org/package/142401/latest/)

**主.js：**

```
var Widget = require("widget").Widget;
var tabs = require('tabs');
var self = require('self');
var data = self.data;
var PageMod = require('page-mod').PageMod;

exports.main = function() {

    PageMod({
        include: [data.url("thepage.html")],
        contentScriptWhen: 'start',
        contentScriptFile: [data.url('thescript.js')],
        onAttach: function(worker) {
                console.log("attaching...")
        },
    });

    new Widget({
        id: "my-widget-1",
        label: "Widget",
        contentURL: "http://www.mozilla.org/favicon.ico",
        onClick: function(event) {
            tabs.open(data.url("thepage.html"));
        }
    });
}; 
```

**脚本.js**

```
console.log('started')
window.onresize = function(){console.log('resized!!!');}; //not working, never calls 
```

如何在内容脚本中触发调整大小事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:51:47.507

通常不建议使用`window.onfoo`附加事件侦听器。如果其他一些代码尝试以相同的方式附加事件侦听器（一个事件侦听器会胜出，而您不知道是哪一个），则可能会出现问题，并且[如果您`window`通过包装器而不是直接](https://developer.mozilla.org/en-US/docs/XPCNativeWrapper#Limitations_of_XPCNativeWrapper)访问它，它将无法工作。所以最好使用[`addEventListener`方法](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)来代替：

```
window.addEventListener("resize", function() {
  console.log('resized!!!');
}, false); 
```

在您的情况下，这实际上解决了问题 - 调整窗口大小时触发事件侦听器。

# grails - 将 groovy sql 的 sql.eachRow() 存储到 List

> ID：11928158
> 
> 赞同：4
> 
> 时间：2012-08-13T04:20:15.123
> 
> 标签：grails, groovy

你知道如何存储结果

```
 sql.eachRow() 
```

groovy sql 的列表？例如 def personList = [] ？

例子：

```
 sql.eachRow('select lastname from users where id='active') 
```

我想要的是存储结果，即。将姓氏添加到列表中，即 def personlist = []; 我知道我可以通过 namedQuery 轻松做到这一点，而且我已经做到了。但他们对此有一些潜在的原因。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T06:40:09.517

```
def reqdColName = "lastname"
def query = "select $reqdColName from users where id='active'" 
```

直接选项是使用[rows](http://groovy.codehaus.org/api/groovy/sql/Sql.html#rows%28groovy.lang.GString%29) () 方法。

```
def list= Sql.rows(query) //returns groovyrowresult as list 
```

* * *

另一种选择是您可以改用[executeQuery](http://groovy.codehaus.org/api/groovy/sql/Sql.html#executeQuery%28java.lang.String%29)来获取查询的结果集，从而获得一个数组/列表。

```
def array = Sql.executeQuery(query).getArray(reqdColName)

//If you need as a list
def personList = Arrays.asList(array) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-31T10:45:05.380

I know that the question has been asked a long time ago, but still, I feel the answer may be of help for someone out there.

```
 def personlist = []
    sql = Sql.newInstance(url, username, password, driver)
    query = "select $reqdColName from users where id='active'"
    sql.eachRow(query)
    {
       row-> personlist << row.toString()
    }
    sql.close()

    personlist.each{println it}  // you can also return the list 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-18T20:21:14.920

```
def personList = sql.rows("select lastname from users where id='active'")*.lastname 
```

# wcf - 具有 HTTPS 和 HTTP 端点的 WCF 服务

> ID：11928159
> 
> 赞同：1
> 
> 时间：2012-08-13T04:20:17.877
> 
> 标签：wcf, ssl, iis-7, endpoints

我已经成功配置了一个 WCF 服务，该服务使用基于 SSL 的 WCF 客户端的相互证书身份验证。

对于通过 HTTPS 进行的相互身份验证，客户端和服务器都有证书，并且已经在带外交换了它们的公钥，因此 WCF 会分别显式检查客户端或服务器以确保使用正确的证书。

**问题：**

我现在需要为 PHP 客户端公开一个 HTTP 端点，其中消息将在客户端手动加密并在 WCF 服务手动解密。

最初我在 IIS 7 中将“需要 SSL”设置设置为“需要”，但现在我尝试将其更改为“接受”，以便 IIS 接受非 https 流量并配置另一个没有安全性的 wsHttpBinding 端点服务. 两个端点都有相对地址。

我收到以下错误： **服务“SslRequireCert”的 SSL 设置与 IIS“SslNegotiateCert”的设置不匹配。**

我试图用 WCF 和 IIS 做些什么？我认为设置一个具有不同绑定的附加端点会相对简单。

# wordpress - 如果帖子标题中不存在，如何在标题中添加类别名称

> ID：11928171
> 
> 赞同：1
> 
> 时间：2012-08-13T04:21:29.263
> 
> 标签：wordpress

在 single,php 中，如果类别名称还不是帖子标题的一部分，我会尝试自动将类别名称添加到标题标签中。否则，不要添加任何东西。这是我尝试使用 preg_match 的方法，但没有成功。

```
<?php
$keywords = array('Category phrase a', 'Category phrase b');
foreach($keywords as $word)
{
    if(preg_match('/'.$word.'/i', 'wp_title', 'return=true')) {
echo "";
} else {
echo "Category Phrase";
} 
}
?> 
```

有任何想法吗？

**更新：**所以我有点想通了，但数组匹配不是很正确：

```
$keywords = array('Test word', 'Test word more');
$issouttxt = "Category Phrase: ";
$isstitle = wp_title('',false,'right'); 
foreach($keywords as $word)
{ if(preg_match('/'.$word.'/i', $isstitle)) {
$issout = '';
} else {
$issout = $issouttxt;
}}
print $issout; 
```

例如，如果 WP 标题包含“测试词”，则它无法识别匹配项并且 $issout = $issouttxt（即，它错误地添加了类别名称）。如果我删除数组的第二部分（'Test word more'），它会识别匹配项和 $issout = '';。

是否有不同的方法来设置数组以使所有关键字都匹配并且它们不会相互干扰？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:58:41.857

如果你在循环中，那么我会像这样运行它。如果您不在循环中，则可以将帖子 ID 添加到标题和类别的调用中。

此脚本会将所有缺少的类别添加到标题中。

```
<?php
$title=get_the_title();
$categories=get_the_category(); // or use get_categories() for all categories

  if(!empty($categories)) :
    foreach($categories as $category) :
      if(strpos($title,$category->name)===false)
        $title.=', '.$category->name;
    endforeach;
  endif;
 echo $title;
?> 
```

# jquery - 将 HTML 插入到 fancybox 关闭按钮

> ID：11928175
> 
> 赞同：3
> 
> 时间：2012-08-13T04:22:00.770
> 
> 标签：jquery, fancybox, fancybox-2

我想为 fancybox 关闭按钮使用 html 而不是图像。

这是我认为应该起作用的：

```
$('.fancybox-media').fancybox({
    afterLoad : function() {
        $('div.fancybox-close').html('X');
    }
}); 
```

只关注这里的关闭按钮。任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T07:05:52.790

对于fancybox v2.x，您可以使用该选项`tpl`来设置您想要的任何html

```
$(".fancybox").fancybox({
 tpl: {
  closeBtn: '<div title="Close" id="myCloseID ">[CLOSE]</div>'
 }
}); 
```

请注意，在此示例中，我将自己的选择器`id="myCloseID "`设置为`close`容器 ( `closeBtn`)，因此我可以将自己的 css 样式添加到新的 html 中，例如：

```
#myCloseID {
 position: absolute; /* this is important */
 z-index: 8040; /* this is important */
 top: -18px; /* or whatever needed */
 right: -10px;
 width: 50px; /* or whatever needed */
 height: 36px;
 cursor: pointer;
 color : #ff0034; /* or whatever needed */
 /* etc. */
} 
```

最终，您可能更喜欢将默认值`tpl`用于`closeBtn`您自己的 html

```
$(".fancybox").fancybox({
 tpl: {
  closeBtn: '<div title="Close" class="fancybox-item fancybox-close">[my closing html]</div>'
 }
}); 
```

...只需通过 css 删除背景图像

```
.fancybox-close {
 background-image: none; /* prevents the use of the fancybox sprite */
 color : #ff0034; /* or whatever needed, etc. */
 /* etc. */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:26:28.833

它应该可以工作，但您还需要`background`将`none`.

试试这个：

```
$('div.fancybox-close').html('X').css({background:'none',color:'white'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T04:42:05.220

请试试这个

```
$('.fancybox-close').html('X').css({background:'none',color:'white'}); 
```

# java - 如何导出到在外部工具上运行的 jar 中？

> ID：11928181
> 
> 赞同：0
> 
> 时间：2012-08-13T04:22:58.473
> 
> 标签：java, eclipse, jar, export

我需要将我的项目导出到 .jar 中，结果为了运行它，我使用了我在“外部工具配置”中指定的外部工具。如果我在“Run As-Java Application”中运行 .java，则应用程序无法正常工作。我需要知道如何导出我的项目，以便获得一个使用外部工具的运行配置运行的 .jar。

我在 Eclipse IDE Indigo 中工作。

请查看图片：[1](http://i.imgur.com/2rnhu.gif "应用程序必须以绿色箭头运行，它以红色叉失败")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:33:11.687

您可以使用 eclipse 创建可执行的 .Jar 文件，只需使用以下步骤，

*   转到文件菜单，选择“导出”选项，
*   将出现以下对话框，
*   在其中选择“Runnable Jar File”选项。
*   点击下一步。
*   选择启动配置
*   单击完成。

![在此处输入图像描述](../Images/230f3bafb2b8694fcfd1cb46909f9c76.png)

# c - 通过C中的宏转换数据类型

> ID：11928183
> 
> 赞同：-2
> 
> 时间：2012-08-13T04:23:09.763
> 
> 标签：c, types, macros

```
#include <stdio.h>
#include <ctype.h>
#define int long
int main ()
{
  char c;
  int i=0;
  char str[]="Example sentence to test isspace\n";
  while (str[i])
  {
    c=str[i];
    if (isspace(c)) c='\n';
    putchar (c);
    i++;
  }
  return 0;
} 
```

它在linux环境下出错，因为： `isspace`将扩展为

```
if (((*__ctype_b_loc ())[(int) ((c))] & (unsigned short int) _ISspace)) c='\n'; 
```

当我通过宏将 int 更改为 long 时，它将变为

```
if (((*__ctype_b_loc ())[(long) ((c))] & (unsigned short long) _ISspace)) c='\n'; 
```

因此它会引发错误，请提供答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:25:36.440

简单的答案：**不要使用宏将 int 更改为 long。**

如果你真的必须这样做，你可以这样做：

```
#include <stdio.h>
#include <ctype.h>
#define int long
int main ()
{
  char c;
  int i=0;
  char str[]="Example sentence to test isspace\n";
  while (str[i])
  {
    c=str[i];
#define int int
    if (isspace(c)) c='\n';
#define int long
    putchar (c);
    i++;
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:15:01.573

```
#define int long 
```

这是一个非常糟糕的主意。不要这样做。

> linux环境报错

不，它没有。使用 gcc 编译和执行就好了。

> 当我通过宏将 int 更改为 long

这是一个非常糟糕的主意。不要这样做。

您的问题的答案是：如果您尝试使用宏重新发明 C 语言，将会发生不好的事情，而您只能靠自己来解决它们。

# windows-phone-7 - 哪种方法更好？“墓碑应用程序并在恢复时重新加载数据”或“在锁定屏幕/背景下运行”

> ID：11928186
> 
> 赞同：0
> 
> 时间：2012-08-13T04:23:41.667
> 
> 标签：windows-phone-7, windows-phone-7.1, tombstoning

我目前正在开发一个需要从网上获取数据的应用程序。但是如果用户按下开始按钮或启动任何其他应用程序，我的应用程序中的数据获取过程就会中断，并且应用程序会抛出 WebException 等异常。

为了防止这种情况发生，即使用户停用它，我也强制应用程序在后台运行。这是一种不好的方法吗？将应用程序墓碑化并从状态字典中恢复状态会是一种更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:46:44.083

如果要下载大量数据，最好使用[BackgroundTransferService -](http://msdn.microsoft.com/en-us/library/microsoft.phone.backgroundtransfer.backgroundtransferservice%28v=vs.92%29.aspx) [Windows Phone 培训工具包](http://go.microsoft.com/fwlink/?LinkId=219203)的第二课中介绍了它

# python - Dulwich：如何自动暂存修改过的文件

> ID：11928190
> 
> 赞同：2
> 
> 时间：2012-08-13T04:24:32.723
> 
> 标签：python, git, dulwich

在 git 命令行中，我们可以使用`git commit -a`.

我怎样才能使用德威做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:18:17.660

在考虑提交的各种测试时，例如 中的那些[`test_repository.py`](https://github.com/jelmer/dulwich/blob/master/dulwich/tests/test_repository.py#L446-L461)，似乎不可能在一行中进行：

```
 r.stage(['a'])
    commit_sha = r.do_commit('modified a',
                             committer='Test Committer <test@nodomain.com>',
                             author='Test Author <test@nodomain.com>',
                             commit_timestamp=12395, commit_timezone=0,
                             author_timestamp=12395, author_timezone=0) 
```

在调用提交之前，您需要先找到修改或删除的文件，并将它们暂存。

另一种选择是使用[git-python](http://gitorious.org/projects/git-python)，它是 git 的包装器，但它不提供开箱即用的任何一个功能。

# gnuplot - gnuplot 连接数据的端点

> ID：11928194
> 
> 赞同：1
> 
> 时间：2012-08-13T04:24:56.657
> 
> 标签：gnuplot

我正在用 gnuplot “splot” 函数绘制一个 3d 曲面。数据以 (x,y,z) 格式写入文本文件的 3 列中。当我从文件中绘制数据时， splot 连接数据的端点。表面本身是正确的，但在表面底部还有一组额外的不需要的平行线（形成 xy 平面）。所以对于每个 x，它会绘制一个对称衰减到零的函数，但是 +\infty 和 -\infty 也连接在一起！这使得图表下方出现了一个不需要的 x 轴。

我试图将边界设置为零，玩数据格式等。没有运气！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:41:47.610

您的问题是您的数据不是*“网格数据”*格式。Gnuplot 看到数据并将其绘制为*线*而不是将其绘制为表面。不幸的是，我不知道 matlab，但这里有一些应该可以工作的伪代码（尽管可能不是编写数据的最有效方式）：

```
 do iy=1 to ny
    do ix=1 to nx
       write gridx(ix,iy), gridy(ix,iy), data(ix,iy)
    enddo
    write blank line
 enddo 
```

当然，如果您的网格可以表示为一维数组（而不是上面的二维），您可以执行以下操作（使用适当的循环）：

```
 write gridx(ix), gridy(iy), data(ix,iy) 
```

或者，您可以`dgrid3d`在 gnuplot 中使用。 `dgrid3d`将非网格数据插入到网格数据中。默认情况下，它会插入一个 10x10 的网格，正如您所指出的，它非常粗糙。您可以通过`set dgrid3d NX,NY`where`NX`和`NY`分别增加 x 和 y 轴上的点数。

最后，如果您不想弄乱您的数据文件，您可能需要考虑使用[gnuplot FAQ](http://www.gnuplot.info/faq/faq.html)（第 3.9 节）中的以下`awk`脚本：

```
#addblanks.awk
/^[[:blank:]]*#/ {next} # ignore comments (lines starting with #)
NF < 3 {next} # ignore lines which don't have at least 3 columns
$1 != prev {printf "\n"; prev=$1} # print blank line
{print} # print the line 
```

现在绘制你的表面：

```
set surface
splot "<awk -f addblanks.awk yourdatafile.dat" 
```

# iphone - iphone中的3des加密

> ID：11928196
> 
> 赞同：2
> 
> 时间：2012-08-13T04:25:10.540
> 
> 标签：iphone, ios, encryption, 3des

我对iOS开发和目标c相当陌生。我正在开发一个将加密数据发送到服务器的应用程序。服务器使用带有 cbc 的 3des 并且没有填充。我已经阅读了 stackoverflow 中的大部分相关问题，但仍然无法正常工作。已经为此工作了几天，但仍然无法使其与服务器加密相匹配。

这是我的工作：

```
NSString* plaintexthex = @"536176696E67204163636F756E747C313233343536000000";
NSData *dTextIn = [self dataFromHexString:plaintexthex]; //my own way of convert hex to data

NSString* keyhex = @"6E7B336FD2051BA165A9362BD9735531";
NSData *_keyData = [self dataFromHexString:keyhex]; //my own way of convert hex to data

CCCryptorStatus ccStatus;
uint8_t *bufferPtr = NULL;
size_t bufferPtrSize = 0;
size_t movedBytes = 0;

bufferPtrSize = ([dTextIn length] + kCCBlockSize3DES) & ~(kCCBlockSize3DES - 1);
bufferPtr = malloc( bufferPtrSize * sizeof(uint8_t));
memset((void *)bufferPtr, 0x00, bufferPtrSize);

uint8_t iv[kCCBlockSize3DES];
memset((void *) iv, 0x00, (size_t) sizeof(iv));

unsigned char *bytePtr = (unsigned char *)[_keyData bytes];

ccStatus = CCCrypt(kCCEncrypt,              // CCoperation op
                   kCCAlgorithm3DES,        // CCAlgorithm alg
                   kCCModeCBC,              // CCOptions
                   [_keyData bytes],        // const void *key
                   kCCKeySize3DES,          // 3DES key size length 24 bit
                   iv,                      // const void *iv,
                   [dTextIn bytes],         // const void *dataIn 
                   [dTextIn length],        // size_t dataInLength
                   bufferPtr,               // void *dataOut
                   bufferPtrSize,           // size_t dataOutAvailable
                   &movedBytes);            // size_t *dataOutMoved

NSString *result;
NSData *myData = [NSData dataWithBytes:(const void *)bufferPtr length:            (NSUInteger)movedBytes];
result = [self hexStringFromData:myData];

NSLog(@"Data to encrypt %@",dTextIn);
NSLog(@"Encryption key %@",_keyData);
NSLog(@"Bytes of key are %s ", bytePtr);
NSLog(@"Key length %d ",[_keyData length]);
NSLog(@"Encrypted bytes %@", myData);
NSLog(@"Encrypted string %@", result);
NSLog(@"Encrypted string length %d", [result length]);

- (NSData *)dataFromHexString:(NSString *)string 
{   
    NSMutableData *stringData = [[[NSMutableData alloc] init] autorelease];
    unsigned char whole_byte;
    char byte_chars[3] = {'\0','\0','\0'};
    int i;
    for (i=0; i < [string length] / 2; i++) {
        byte_chars[0] = [string characterAtIndex:i*2];
        byte_chars[1] = [string characterAtIndex:i*2+1];
        whole_byte = strtol(byte_chars, NULL, 16);
        [stringData appendBytes:&whole_byte length:1]; 
    }
    return stringData;
} 
```

我在 Android 平台上开发了一个类似的应用程序，它与服务器配合得很好。这是我在Android平台上使用的函数的加密。

```
public byte[] encrypt(byte[] key, byte[] message) throws Exception {

       byte [] plainTextBytes = message;
       byte[] encryptKey = key;

       SecretKey theKey = new SecretKeySpec(encryptKey, "DESede");
       Cipher cipher = Cipher.getInstance("DESede/CBC/NoPadding");
       IvParameterSpec IvParameters = new IvParameterSpec(new byte[] {(byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00});
       cipher.init(Cipher.ENCRYPT_MODE, theKey, IvParameters);
       byte[] encrypted = cipher.doFinal(plainTextBytes);
       return encrypted;
  } 
```

基本上我想复制这种类似的加密以在 iOS 平台上使用。欢迎任何帮助，并提前感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:37:31.547

`kCCModeCBC`是一种模式，而不是一种选择。您想要的选项是`0`. CBC 是`CCCrypt()`. 默认也没有填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:53:19.070

我是 iOS 用户，不是开发人员，但据我所知，iOS 不再支持 3DES。我使用 iPad 进行 VPN，iOS 3 可以很好地使用 3DES 加密，但从 iOS 4 开始，所需的最低加密级别是 AES128。

希望有帮助。

# java - url.getFile() 和 getpath() 有什么区别？

> ID：11928199
> 
> 赞同：16
> 
> 时间：2012-08-13T04:26:02.893
> 
> 标签：java, http, url, path

里面有`java.net.url`一个[`getFile()`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#getFile%28%29)方法和一个[`getPath()`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#getPath%28%29)方法。

在我的测试中，它们都返回相同的结果：域名斜杠后的完整路径和文件。

例如，两种方法都`http://www.google.com/x/y/z.html`返回`x/y/z.html`。

有人可以详细说明 Javadocs 吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-13T04:29:28.467

`URL.getFile()`javadocs这样说：

> 获取此 URL 的文件名。返回的文件部分将与 getPath() 相同，加上 getQuery() 值的串联（如果有）。如果没有查询部分，此方法和 getPath() 将返回相同的结果。

除非有查询字符串，例如`?somename=value&somethingelse=value2`URL 中的 a，否则它们将是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:48:17.387

[URL.getFile()](https://docs.oracle.com/javase/8/docs/api/java/net/URL.html#getFile--)：

> 获取此 URL 的文件名。返回的文件部分将与 getPath() 相同，加上 getQuery() 值的串联（如果有）。如果没有查询部分，此方法和 getPath() 将返回相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-12T20:36:20.557

## 在一般情况下，文件较长

```
new URL("http://www.google.com/x/y/z.html?v=1#chapter1").getFile();
// returns:  "/x/y/z.html?v=1" 
```

，比路径：

```
new URL("http://www.google.com/x/y/z.html?v=1#chapter1").getPath();
// returns:  "/x/y/z.html" 
```

# php - 在php中将日期yM更改为Ym

> ID：11928204
> 
> 赞同：1
> 
> 时间：2012-08-13T04:26:48.993
> 
> 标签：php, date, strtotime

我想将日期从`11-Mar`到`2011-03`。但我认为 php 的想法`11-Mar`是`2012-Mar-11`. 我该怎么做？

价值 : 11-Mar

预计：2011-03

结果 : 2012-03 [ `date(strtotime('11-Mar'))`]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T04:44:03.520

如果你使用 PHP >= 5.3.0 那么你可以使用这个...

```
$date = date_create_from_format('y-M', '11-Mar');
echo date_format($date, 'Y-m'); 
```

[http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T04:40:28.873

您可以使用`DateTime`php.ini 中的类来执行此操作。

```
$str = "11-Mar";
$date = DateTime::createFromFormat('y-M', $str);
echo $date->format('Y-m'); 
```

[http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

问候，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T04:39:50.557

```
$result = date ('Y-m',strtotime('2011-Mar'));

echo $result; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T04:32:33.620

尝试

```
$date= date('Y-m',strtotime('2011 Mar'));
echo $date; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T04:44:23.517

以上很好，这对于您需要转换的内容更准确：

```
<?php

$a = "11-Mar";
$date = explode("-", $a);
if ($date[0] <= 99)
    $year = '19'.$date[0];

else
    $year = '20'.$date[0];

$mon = $date[1];

$date= date('Y-m',strtotime("$year $mon"));
echo $date; // echoes 2011-03

?> 
```

# javascript - JAVASCRIPT - 未捕获的类型错误：无法读取 null 的属性“值”

> ID：11928205
> 
> 赞同：0
> 
> 时间：2012-08-13T04:27:01.777
> 
> 标签：javascript, html

```
<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
        <title>Javascript Form Testing</title>
</head>

<body>
Name: <input type="text" name="Name" value="Name" id="fname"> <br>
Email: <input type="text" name="Email" value="Email" id="mail" > <br>
Phone: <input type="text" name="Number" value="Phone Number" id="dvr" onchange="validatePhone();">
<span id="phoneval"> ?</span>

    <script type="text/javascript">
    phonenum = document.getElementById("dvr").value.length;
       function validatePhone() {
            if (phonenum == 10){
                document.getElementById('phoneval').innerhtml="<-- Valid";
            }
            else{
                document.getElementById('phoneval').innerhtml="<-- Not Valid";
            }
        }
    </script>
</body>
</html> 
```

嗨，当标签位于头部时，我收到错误“Uncaught TypeError: Cannot read property 'value' of null”，但由于我移动了它，它就消失了。但是，现在它没有输出错误并且什么都不做。请帮忙？

对不起任何格式和东西，新的：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T04:33:36.330

**编辑：**

工作原理略有不同的实现：http: [//jsfiddle.net/SfTR2/](http://jsfiddle.net/SfTR2/) 确保在 HTML 之后加载 JS，或者使用`window.onload`

**原答案：**

您需要在验证函数中获取长度：

```
 function validatePhone() {
        var phonenum = document.getElementById("dvr").value.length; //MOVE IT HERE
        if (phonenum == 10){
            document.getElementById('phoneval').innerHTML="<-- Valid";
        }
        else{
            document.getElementById('phoneval').innerHTML="<-- Not Valid";
        }
    } 
```

如前所述，您正在缓存空长度。

另外，正如@su 提到的，您需要使用innerHTML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:32:26.800

添加

```
validatePhone(); 
```

到脚本的末尾（您定义了函数但从未调用它）。并将innerhtml更改为innerHTML

# android - 带有 textview 和复选框的 Listvew

> ID：11928207
> 
> 赞同：0
> 
> 时间：2012-08-13T04:27:16.607
> 
> 标签：android, checkbox, android-listview, nullpointerexception

我想要一个带有 textview + 复选框的列表视图。我能够创建列表视图。我可以捕获列表视图项目选择。但是，当我尝试捕获复选框选择时，取消选择我得到一个空指针异常。如何为复选框编写 setOnCheckedChangeListener()..

```
public class LocationActivity extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.locationmain);

    ListView listview = (ListView) findViewById(R.id.listView1);

    String selectQuery = "SELECT  * FROM " +     DatabaseHandler.TABLE_LOCATIONLABLES;
    SQLiteDatabase db = new DatabaseHandler(this).getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    final List<String> locLables = new ArrayList<String>();

    if(cursor != null){
        if (cursor.moveToFirst()) {
            do {

                locLables.add(cursor.getString(1));

            } while (cursor.moveToNext());
        }
    }

    //String[] locLables = new String[] {"Home","University","Office"};
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.locationmain_entry,R.id.textView12, locLables);

    //cb gives a null pointer exception
    CheckBox cb = (CheckBox) listview.findViewById(R.id.checkBox12);

    cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            if(isChecked){
                System.out.println("selected");
            }else if(!isChecked){
                System.out.println("not selected");
            }

        }
    });     
    listview.setAdapter(adapter);

    listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), locLables.get(arg2), Toast.LENGTH_SHORT).show();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:44:42.113

您可以维护单独的 adpater 类，以便您可以轻松实现这一目标....

```
 public class bsAdapter extends BaseAdapter
 {
   Activity cntx;
   public bsAdapter(Activity context)
   {
     // TODO Auto-generated constructor stub
     this.cntx=context;

   }

   public int getCount()
   {
     // TODO Auto-generated method stub
     return listview_arr.length;
   }

  public Object getItem(int position)
  {
     // TODO Auto-generated method stub
     return listview_arr[position];
  }

  public long getItemId(int position)
  {
     // TODO Auto-generated method stub
     return listview_array.length;
  }

  public View getView(final int position, View convertView, ViewGroup parent)
  {
     View row=null;

    LayoutInflater inflater=cntx.getLayoutInflater();
    row=inflater.inflate(R.layout.search_list_item, null);

    TextView tv=(TextView)row.findViewById(R.id.title);
    CheckBox cb=(CheckBox)row.findViewById(R.id.cb01);

    tv.setText(listview_arr[position]);

    cb.setOnClickListener(new OnClickListener(){

    public void onClick(View v) {

    if(cb.ischecked)
    {
       //ur code
    }

    else //ur code

    }
  });

  return row;
  }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:48:32.470

不要使用`listview.findViewById()`，只需`findViewById()`像您对列表一样使用。

除非复选框是每个列表项的一部分，在这种情况下，您必须`getView()`从`ListAdapter`.

# django - South /Mezzanine/ Django - AttributeError: 'NoneType' 对象没有属性 'lower'

> ID：11928212
> 
> 赞同：1
> 
> 时间：2012-08-13T04:27:55.873
> 
> 标签：django, django-models, django-south

这是 South & 尝试设置新环境的问题。在我的所有应用程序上运行迁移时，我收到以下错误：

```
Traceback (most recent call last):
  File "/Users/emilepetrone/Sites/tindie2/lib/python2.7/site-packages/south/migration/migrators.py", line 175, in _run_migration
    migration_function()
  File "/Users/emilepetrone/Sites/tindie2/lib/python2.7/site-packages/south/migration/migrators.py", line 57, in <lambda>
    return (lambda: direction(orm))
  File "/Users/emilepetrone/Sites/tindie2/tindie/tindie/apps/seller/migrations/0001_initial.py", line 26, in forwards
    ('comments', self.gf('mezzanine.generic.fields.CommentsField')(object_id_field='object_pk', to=orm['generic.ThreadedComment'])),
  File "/Users/emilepetrone/Sites/tindie2/lib/python2.7/site-packages/south/db/generic.py", line 44, in _cache_clear
    return func(self, table, *args, **opts)
  File "/Users/emilepetrone/Sites/tindie2/lib/python2.7/site-packages/south/db/generic.py", line 343, in create_table
    for field_name, field in fields
  File "/Users/emilepetrone/Sites/tindie2/lib/python2.7/site-packages/south/db/generic.py", line 643, in column_sql
    field = self._field_sanity(field)
  File "/Users/emilepetrone/Sites/tindie2/lib/python2.7/site-packages/south/db/mysql.py", line 263, in _field_sanity
    type = self._db_type_for_alter_column(field).lower()
AttributeError: 'NoneType' object has no attribute 'lower' 
```

这似乎是我上一次架构迁移或我的 models.py 中的某个问题。

在我的模型中，该字段看起来像（并且在迁移之间没有改变）：

```
from mezzanine.generic.fields import CommentsField

class MyClass(models.Model):
    comments = CommentsField(verbose_name=_("Comments")) 
```

从迁移：

```
 'generic.threadedcomment': {
        'Meta': {'ordering': "('submit_date',)", 'object_name': 'ThreadedComment', '_ormbases': ['comments.Comment']},
        'by_author': ('django.db.models.fields.BooleanField', [], {'default': 'False'}),
        'comment_ptr': ('django.db.models.fields.related.OneToOneField', [], {'to': "orm['comments.Comment']", 'unique': 'True', 'primary_key': 'True'}),
        'replied_to': ('django.db.models.fields.related.ForeignKey', [], {'related_name': "'comments'", 'null': 'True', 'to': "orm['generic.ThreadedComment']"})
    }, 
```

我有点困惑，因为这个字段在迁移之间没有改变，而且夹层也没有改变。提前感谢您的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:44:27.423

据我所知，问题在于 Mezzazine 的extends[`CommentsField`](https://github.com/stephenmcd/mezzanine/blob/master/mezzanine/generic/fields.py)和[`GenericRelation`](https://github.com/django/django/blob/master/django/contrib/contenttypes/generic.py)return ，因为它是 Django 的语法糖，并且该字段在模式中没有列表示，但 South 仍在尝试生成SQL 语句并尝试设置通过有效地调用列类型，这就是你得到异常的原因。[`GenericRelation.db_type()`](https://github.com/django/django/blob/master/django/contrib/contenttypes/generic.py#L207)`None``ALTER TABLE``None.lower()`

这似乎是一个如此明显的错误，很可能我的理解完全不正确，但据我所知，您应该能够手动编辑 South 生成的迁移脚本并删除对作为新列添加的通用关系字段的任何引用。

# ruby-on-rails - Rails 路由错误：没有路由匹配 [POST] "/students/1"

> ID：11928217
> 
> 赞同：0
> 
> 时间：2012-08-13T04:28:34.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我收到一个路由错误：没有路由匹配 [POST] "/students/1" 我无法弄清楚。这是详细信息。

查看代码：

```
<% @students.each do |student| %>
.
.
    <td><%= link_to 'Show', student %></td>
    <td><%= link_to 'Edit', edit_student_path(student) %></td>
    <td><%= link_to 'Select Subjects', select_path(student) %></td>  # error occurs here 
```

在我的学生控制器中：

```
def select
  .
  .
end 
```

routes.rb: HomeSchool::Application.routes.draw 做

```
 resources :notes

  resources :assignments

  resources :subjects do
    resources :assignments, :only => [:create, :index, :new]
  end

  resources :students

  resources :resources

  match "students/:id/select" => "students#select", :as => :select

  root :to => 'students#index'

end 
```

rake 路由的输出为：

```
 GET    /students/:id/select(.:format)                  students/:id#select
                 notes GET    /notes(.:format)                                notes#index
                       POST   /notes(.:format)                                notes#create
              new_note GET    /notes/new(.:format)                            notes#new
             edit_note GET    /notes/:id/edit(.:format)                       notes#edit
                  note GET    /notes/:id(.:format)                            notes#show
                       PUT    /notes/:id(.:format)                            notes#update
                       DELETE /notes/:id(.:format)                            notes#destroy
           assignments GET    /assignments(.:format)                          assignments#index
                       POST   /assignments(.:format)                          assignments#create
        new_assignment GET    /assignments/new(.:format)                      assignments#new
       edit_assignment GET    /assignments/:id/edit(.:format)                 assignments#edit
            assignment GET    /assignments/:id(.:format)                      assignments#show
                       PUT    /assignments/:id(.:format)                      assignments#update
                       DELETE /assignments/:id(.:format)                      assignments#destroy
   subject_assignments GET    /subjects/:subject_id/assignments(.:format)     assignments#index
                       POST   /subjects/:subject_id/assignments(.:format)     assignments#create
new_subject_assignment GET    /subjects/:subject_id/assignments/new(.:format) assignments#new
              subjects GET    /subjects(.:format)                             subjects#index
                       POST   /subjects(.:format)                             subjects#create
           new_subject GET    /subjects/new(.:format)                         subjects#new
          edit_subject GET    /subjects/:id/edit(.:format)                    subjects#edit
               subject GET    /subjects/:id(.:format)                         subjects#show
                       PUT    /subjects/:id(.:format)                         subjects#update
                       DELETE /subjects/:id(.:format)                         subjects#destroy
              students GET    /students(.:format)                             students#index
                       POST   /students(.:format)                             students#create
           new_student GET    /students/new(.:format)                         students#new
          edit_student GET    /students/:id/edit(.:format)                    students#edit
               student GET    /students/:id(.:format)                         students#show
                       PUT    /students/:id(.:format)                         students#update
                       DELETE /students/:id(.:format)                         students#destroy
             resources GET    /resources(.:format)                            resources#index
                       POST   /resources(.:format)                            resources#create
          new_resource GET    /resources/new(.:format)                        resources#new
         edit_resource GET    /resources/:id/edit(.:format)                   resources#edit
              resource GET    /resources/:id(.:format)                        resources#show
                       PUT    /resources/:id(.:format)                        resources#update
                       DELETE /resources/:id(.:format)                        resources#destroy
                select        /students/:id/select(.:format)                  students#select
                  root        /                                               students#index 
```

有什么建议么？我很难准确掌握rails中的路由应该如何工作，我还没有找到任何关于它的论文，但我很确定没有为我的选择路线列出任何方法至少是我的问题。

谢谢，

朗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:48:10.087

尝试删除文件中的并将您的`match`资源更改为：`routes.rb``students`

```
resources :students do
  member do
    get 'select'
  end
end 
```

还要更新您的视图以调用`select_student_path(student)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-14T16:51:42.087

发生这种情况是因为您的 routes.rb 文件。在“/students/new”中没有 post 方法的回调

纠正这一点。转到 routes.rb 并`post 'students/new' to: 'students#new'`在结束之前添加。

并检查`rails routes`。您会在那里找到帖子的路由路径。

# objective-c - 从 MKMapView 中的标注中分离

> ID：11928218
> 
> 赞同：0
> 
> 时间：2012-08-13T04:29:11.220
> 
> 标签：objective-c, xcode, uinavigationcontroller, mkmapview, segue

嗨，我有一个弹出注释的 mapView，我希望能够在单击注释标注按钮时进行 segue。但是，当我这样做时，我遇到了一些问题。我有几个问题 1) 我必须将 mapViewController 嵌入到导航控制器中吗？如果是，我的注释在我显示时没有显示，怎么会？2) 是否从 performSegueWithIdentifier 调用 prepareforsegue？3）当你发送自我时，在这种情况下自我会是什么？谢谢

```
 - (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
    {
[self performSegueWithIdentifier:@"Present Photo" sender:self];
    } 
```

意识到这里发生的问题，我曾经从 id 详细信息中获取地图控制器，但现在我认为它是导航控制器，我现在如何获取对地图控制器的引用？

```
-(void) updateSplitViewDetail{
// ERROR OCCURS HERE!!! No longer map controller since I embed in navigation controller
id detail = [self.splitViewController.viewControllers lastObject];
if ([detail isKindOfClass:[MapViewController class]]) {
MapViewController *mapVC = (MapViewController*) detail;
mapVC.delegate = self;
mapVC.annotations = [self mapAnnotations];
}

}

- (void)viewDidLoad
{
[super viewDidLoad];
[self updateSplitViewDetail]; //Error may be here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:20:49.797

## 1)

是的。如果你想执行推送 segue，源视图控制器（你的地图视图控制器）应该嵌入到导航控制器中。

我不确定为什么您的注释/标注没有出现在这种情况下——我已经看到很多项目以这种方式正常工作。也许您在添加注释时对地图视图的引用不是您认为的那样？（而您正在添加注释`nil`？）您需要提供更多详细信息以便我们提供帮助。（编辑您的问题或发布一个新问题，因为它是一个单独的问题。）

## 2)

是的。`prepareForSegue:sender:`在你调用之后调用`performSegueWithIdentifier:sender:`。

## 3)

这些方法中的“sender”参数完全供您自己使用——它存在的唯一原因是允许您从调用`performSegueWithIdentifier:sender:`. `prepareForSegue:sender:`（或者在用户点击某个控件时自动执行 segues 的情况下，以允许您的`prepareForSegue:sender:`实现知道哪个控件被点击了。）

所以，传递你想要的任何东西：`self`很好，`nil`如果你不使用它也是如此。或者，如果您的`prepareForSegue:sender`实现知道点击了哪个标注很有用，您可以考虑将注释视图的注释作为“发送者”传递（例如，它可以使用适当的信息设置目标视图控制器）。

# html - 我在哪里可以找到一个像样的 HTML Table 可视化编辑器？

> ID：11928219
> 
> 赞同：1
> 
> 时间：2012-08-13T04:29:15.120
> 
> 标签：html, html-table, ide, editor

Adobe Dreamweaver 有很好的 HTML 表格可视化编辑器，它非常适合快速编辑大型表格数据，例如添加删除行，而不必担心正确嵌套的 tr 和 td。

是否有任何其他 IDE 或独立应用程序为 html 表提供可视化编辑器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:35:05.583

看看[https://github.com/bgkittrell/yui-rte-tables](https://github.com/bgkittrell/yui-rte-tables)

# c++ - 从 C++ 文件中读取和显示字符数组

> ID：11928229
> 
> 赞同：0
> 
> 时间：2012-08-13T04:30:25.553
> 
> 标签：c++, arrays, character

我正在尝试编写一个程序，从文件中读取名称和票数。但是我无法让 char 数组从文件中正确读取。

 `````
void Output(char candidateLastName[][10], long votesRecieved[])
    {
         ifstream Electionr("Election.dat");
         int loop = 0;

         cout << left << setw(10) << "Candidate" << setw(5) << "Votes" << endl;

         Electionr >> candidateLastName[0][10];
         Electionr >> votesRecieved[0];

         cout << setw(10) << candidateLastName[0] << setw(5)
              << votesRecieved[0] << endl;

         for(int loop = 1; loop < 5; loop++)
         {
                 Electionr >> candidateLastName[0][10];
                 Electionr >> votesRecieved[loop];

                 cout << setw(10) << candidateLastName << setw(5)
                      << votesRecieved[loop] << endl;
         }

         Electionr.close();
    } 
````  `虽然文件中的数字正确读取，但字符不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:53:28.220

```
Electionr >> candidateLastName[0][10]; 
```

This is reading in a single character. Ignore for a moment that it's reading into the wrong location (the first character of the string at index 1)... I suspect that you want to do something like:

```
Electionr >> candidateLastName[0]; 
```

Also, I presume in your loop you want to use the `loop` variable instead of `0` to index the array. In that case, why did you not start your loop at zero and avoid duplicating that code?

```
for(int loop = 0; loop < 5; loop++)
{
    memset( &candidateLastName[loop], 0, 10 );

    Electionr >> candidateLastName[loop];
    Electionr >> votesRecieved[loop];

    cout << setw(10) << candidateLastName[loop] << setw(5)
         << votesRecieved[loop] << endl;
} 
```

(I've also made a minor fix to the `cout` call above)

Be aware that you may need to explicitly null-terminate your strings (I forced that in my modified loop, but only if you happen to read 9 characters or less - otherwise you will overflow and have problems). I'm not sure if this is handled when reading into character arrays with the `>>` operator. I never do it for something like this. I use `std::string` instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:43:54.957

首先，您在数组上有一个超出范围的索引。此外，您总是在写入第一个元素。此外，您不应该使用这样的原始数组。如果您要使用固定大小的数组，请至少使用 std::array。但在这种情况下 std::string 是最合适的。

无论如何，很难说出你真正想要什么，但这是我对如何重写代码的最佳猜测。

```
std::map<std::string, unsigned long> Output()
{
    std::map<std::string, unsigned long> data;
     ifstream Electionr("Election.dat");

     cout << left << setw(10) << "Candidate" << setw(5) << "Votes" << endl;

     while(Electionr.good()){
        std::string name;
        unsigned long votes = 0;

        getline(Electionr, name, ' ');
        Electionr >> votes;

        data[name] = votes;

        cout << setw(10) << name << setw(5)
          << votes << endl;
     }

     return data;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T04:45:57.460

您的第一次阅读应该是：

```
 Electionr >> candidateLastName[0]; 
```

在你的循环中，你想要：

```
 Electionr >> candidateLastName[loop]; 
```

但是，您假设每个名称的长度最多为 9 个字符（加上一个用于空终止）。

将您的 name 数组和`std::string`.

```
void Output(std::string candidateLastName[], long votesRecieved[]) 
`````

# xcode - 需要帮助使用 Beeblex 通过 xCode 验证应用内购买

> ID：11928231
> 
> 赞同：2
> 
> 时间：2012-08-13T04:30:28.327
> 
> 标签：xcode, ipad, in-app-purchase

有没有人成功使用 Beeblex 验证应用内购买？我有一个应用程序已经存在于应用程序商店中，并且启用了应用程序内购买并且可以正常工作。鉴于最近有关应用内购买的黑客新闻，我正在尝试更新它以使用 Beeblex 来验证购买。问题是 Beeblex 总是返回一个结果，说苹果声称购买无效。我希望这里有人成功使用 Beeblex 并可以发布一个工作示例。我按照他们的建议让购买完全通过，然后进行验证。我基本上只是从他们的网站上剪切并粘贴了他们的代码，所以不确定我能做些什么不同的事情。

```
- (void) validatePurchaseOrRestore 
```

{

```
//The transaction has been reported as complete for a new purchase of the upgrade.  I now make use of Beeblex
//to verify the receipt to ensure the purchase is legit.
if (![BBXIAPTransaction canValidateTransactions])
{
    transactionResult = 4;
    return; // There is no connectivity to reach the server.
    // You should try the validation at a later date.
}

BBXIAPTransaction *bbxTransaction = [[BBXIAPTransaction alloc] initWithTransaction:transactionCopy];
bbxTransaction.useSandbox;

[bbxTransaction validateWithCompletionBlock:^(NSError *error)
 {
     if (bbxTransaction.transactionVerified)
     {
         if (bbxTransaction.transactionIsDuplicate)
         {

             // The transaction is valid, but duplicate - it has already been
             // sent to Beeblex in the past.
             transactionResult = 1;

         }
         else
         {
             // The transaction has been successfully validated
             // and is unique.

             NSLog(@"Transaction data: %@", bbxTransaction.validatedTransactionData);
             transactionResult = 0;
         }
     }
     else
     {
         // Check whether this is a validation error, or if something
         // went wrong with Beeblex.

         if (bbxTransaction.hasServerError)
         {                 
             // The error was not caused by a problem with the data, but is
             // most likely due to some transient networking issues.
             transactionResult = 4;
         }
         else
         {                 
             // The transaction supplied to the validation service was not valid according to Apple.
             transactionResult = 3;
             purchaseDidFail = TRUE;
         }    
     }
 }]; 
```

}

# c# - 有没有办法使用 LINQ 从文本中删除额外的换行符？

> ID：11928232
> 
> 赞同：2
> 
> 时间：2012-08-13T04:30:46.260
> 
> 标签：c#, linq

我刚刚写了一些代码来从一些文本中去除额外的换行符。每组连续的换行符都会折叠成一个换行符。

这似乎是使用 LINQ 简化代码的好地方。虽然我对 LINQ 很陌生，所以不知道该怎么做。任何人都可以提出解决方案吗？

这是我的原始代码：

```
/// <summary>
/// Collapse extra newlines.
/// </summary>
private string CollapseNewlines(string script)
{
    // Remove extra newlines.
    var lines = script.Split('\n');

    var output = new StringBuilder();

    bool prevLineWasEmpty = false;

    foreach (var line in lines)
    {
        if (line.Trim() == string.Empty)
        {
            if (prevLineWasEmpty)
            {
                continue; // Ignore this line.
            }

            prevLineWasEmpty = true;
        }
        else
        {
            prevLineWasEmpty = false;
        }

        output.Append(line);
        output.Append("\n");
    }

    return output.ToString();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T04:47:17.090

试试这个：

```
var lines = script.Split('\n')
            .Where(line => !string.IsNullOrWhiteSpace(line));

string output = string.Join("\n", lines); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T04:36:17.753

为什么不使用正则表达式呢？

就像是

```
Regex.Replace(source, @"(\r\n)+", "\r\n"); 
```

或者

```
Regex.Replace(source, @"\n+", "\n"); 
```

[正则表达式类](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)

[Regex.Replace 方法（字符串，字符串）](http://msdn.microsoft.com/en-us/library/xwewhkd1.aspx)

# php - PHP 刮 Mp3 文件

> ID：11928233
> 
> 赞同：1
> 
> 时间：2012-08-13T04:31:18.783
> 
> 标签：php

我在我的网站上嵌入了一些 mp3 文件。问题是一些名称不同，我的网站不知道如何嵌入 - 除非我用正确的名称定义所有文件。

例如，

`http://example.com/chapter1/book-[some random name].001.mp3`

我已经建立了我的网站，所以它像这样嵌入

`http://example.com/chapter1/book.001.mp3`

是否有任何可能的解决方案可以与 php 一起使用，以便它自动填充`[some random name]`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:47:18.847

你有一些选择，

1.  正确输出文件的路径（最简单）

2.  在 db 或平面文件中构建和存储 mp3 注册表，并使用 mod_rewrite 将参数传递给加载程序脚本。（以下示例）

> ```
> <?php 
> /* mod_rewrite  .htaccess in chapters folder
> RewriteEngine On
> Options -Indexes
> RewriteBase /chapter1
> RewriteCond %{REQUEST_FILENAME} !-f
> RewriteRule ^(.*).mp3$ index.php?loadmp3=$1 [L]
> */
> $mp3_dir='./mp3s/';
> //Example passed url: http://localhost/chapter1/book.002.mp3
> if(isset($_GET['loadmp3'])){
>     $real_path = get_mp3_list($_GET['loadmp3']);
>     if($real_path != false){
>         //Result:  ./mp3s/book-next_random_name.002.mp3
>         print_r($real_path);
>         //Pass the url to a streamer script
>     }else{
>         //not found
>     }
> } 
> ```

```
/**
 * Build & cache, search for mp3 from array
 */
function get_mp3_list($search){
    global $mp3_dir;
    if(file_exists($mp3_dir.'mp3s.json')){
        $list = json_decode(file_get_contents($mp3_dir.'mp3s.json'),true);
    }else{
        $mp3s = glob($mp3_dir."*.mp3");
        $list = array();
        foreach($mp3s as $mp3){
            if(preg_match("#(\w+)-(\w+).(\d+).mp3#", $mp3, $match)){
                $list[]=array('location'=>$mp3,
                'type'=>$match[1],
                'name'=>$match[2],
                'episode'=>$match[3]);
            }
            if(!empty($list)){file_put_contents($mp3_dir.'mp3s.json', json_encode($list));}
        }
    }

    $search = explode('.',$search,2);
    foreach($list as $mp3){
        if($mp3['type'] == $search[0] && $mp3['episode'] == $search[1]){
            return $mp3['location'];
        }
    }
    return false;
}
/*
$list Example Array 
(
    [0] => Array
        (
            [location] => ./mp3s/book-next_random_name.002.mp3
            [type] => book
            [name] => next_random_name
            [episode] => 002
        )

    [1] => Array
        (
            [location] => ./mp3s/book-some_random_name.001.mp3
            [type] => book
            [name] => some_random_name
            [episode] => 001
        )

)
*/
?> 
```

希望能帮助到你

# objective-c - 我的 UIButton 没有被吸引到屏幕上

> ID：11928235
> 
> 赞同：1
> 
> 时间：2012-08-13T04:31:48.740
> 
> 标签：objective-c, button, user-interface, opengl-es, simulator

我正在尝试实际测试如何仅使用 Xcode 目前提供的单一视图模板对接口进行硬编码。

我给了 AppDelegate.h 一个 ivar 和 UILabel *titleLabel 的属性；并且我的 AppDelegate.m 代码在 -(void) 中声明并完成启动：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    // Set the view controller as the window's root view controller and display.
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;

    UIButton *button                  = [UIButton buttonWithType: UIButtonTypeRoundedRect];
    button.titleLabel.font            = [UIFont systemFontOfSize: 12];
    button.titleLabel.lineBreakMode   = UILineBreakModeTailTruncation;
    button.titleLabel.shadowOffset    = CGSizeMake (1.0, 0.0);

    [self.window addSubview: button];

} 
```

我编译成功，但屏幕上没有绘制按钮——我只是让标准空白模板在模拟器中运行。我如何让它绘制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:37:51.433

您的窗口似乎未初始化，并且您的函数返回得太早。尝试这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.
    self.window = [[UIWindow alloc]initWithFrame:[[UIScreen mainScreen]bounds]];
    // Set the view controller as the window's root view controller and display.
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    UIButton *button                  = [UIButton buttonWithType: UIButtonTypeRoundedRect];
button.titleLabel.font            = [UIFont systemFontOfSize: 12];
button.titleLabel.lineBreakMode   = UILineBreakModeTailTruncation;
button.titleLabel.shadowOffset    = CGSizeMake (1.0, 0.0);

[self.window addSubview: button];
return YES;
} 
```

请记住，`return`立即退出一个函数，并且它下面的任何代码都不会被执行。

# email - 仅发送电子邮件服务器

> ID：11928239
> 
> 赞同：0
> 
> 时间：2012-08-13T04:32:41.840
> 
> 标签：email, amazon-ec2

我注册了一个域，并且将带有 LAMP 的 AWS EC2 用作在线游戏服务器。现在我想在上面设置一个电子邮件服务器。但经过一番研究，我发现它有点复杂。电子邮件服务器仅用于向玩家发送忘记密码的电子邮件。所以我正在寻找一种简单的方法来设置一个没有邮箱或任何其他可以使事情变得复杂的功能的发送邮件服务器。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:12:31.077

我绝对建议您使用[Amazon SES](http://aws.amazon.com/ses/)。您将使用 Amazon 的基础设施将电子邮件作为服务发送。

对我来说，这似乎是您用例的最佳解决方案。您无需支付太多费用，无需担心停机时间或可扩展性，只需以您喜欢的任何语言使用他们的 SDK。

看看[定价](http://aws.amazon.com/ses/#pricing)，还是挺诱人的。

# javascript - 如何将变量值添加到超链接

> ID：11928241
> 
> 赞同：0
> 
> 时间：2012-08-13T04:33:15.113
> 
> 标签：javascript, jquery, ajax, django

这是我的功能：问题是我不知道如何将“价值”添加到“链接”。

```
 function add_subject_to_subjects_list() {
        var value = $("#id_name").val();
        var link = "/subject/create/"+value;
        show_subjects_list();
        $("#btn-create-subject").click(function() {
            $.post(link, function(data) {
                show_subjects_list();
                alert(data).hide("fast");
            });
        });
    } 
```

因此，我的函数将数据发布到不同的链接：`http://127.0.0.1:8000/subject/create/`

但我希望我的链接取决于价值：它应该看起来像：

```
http://127.0.0.1:8000/subject/create/some_value/ 
```

这就是该页面的整个 js：

```
$(document).ready(function (){
    add_subject_to_subjects_list();
});

function show_subjects_list() {
    $.post("/subject/list/", function(data){
        for( var i=0; i<data.length; i++) {
            $("#list").append('<li>'+data[i]['fields']['name']+'</li><br>');
        };
    }, 'json');
}

function add_subject_to_subjects_list() {
    var value = $("#id_name").val();
    var link = "/subject/create/"+value;
    show_subjects_list();
    $("#btn-create-subject").click(function() {
        $.post(link, function(data) {
            show_subjects_list();
            alert(data).hide("fast");
        });
    });
} 
```

那是我的服务器端（我正在使用 Django/Python）：

```
@csrf_exempt
def subjects_list(request):
    user = request.user
    subjects = Subjects.objects.filter(user__exact = user)
    result = serializers.serialize("json", subjects, fields=('name'))
    return HttpResponse(result)

@csrf_exempt
def new_subject(request, subject):
    subject, created= Subjects.objects.get_or_create( 
        name=subject,
        user=request.user,
        created_by=request.user)
    if created:
        message = "Subject was created"
    else:
        message = "No subject was added to the database"
    return HttpResponse(message) 
```

那是我的html：

```
{% block left-menu %}

    <div class="sidebar">
        <h3>Subjects</h3>
        <p> Enter subject name to add </p>
        <br>

        <div id="create-subject">
            <form method="post" action="."> {% csrf_token %}
                {{ subject_creation_form.as_p }}
                <input type="button" value="Create Subject" id="btn-create-subject" />
            </form>
        </div>

            <div id="subjects-list">
                <a id="append">myID</a>
                <ul id="list">

                </ul>
            </div>
        </div>
{% endblock %} 
```

那是那个html的形式：

```
class SubjectCreationForm(forms.Form):
    name = forms.CharField(label="Subject Name", widget=forms.TextInput(attrs={'size':9}))

    class Meta:
        exclude = ('created_by', 'created_time', 'num_of_followers', 'vote')
    def clean_name(self):
        name = self.cleaned_data['name']
        if len(name)>1:
            return name
        else:
            raise forms.ValidationError("Subject name should be longer") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:05:17.480

点击处理程序附加在页面加载并使用该`id_name`时间的值，我假设它是空的，使用`id_name`单击按钮时的值。

```
function add_subject_to_subjects_list() {
    show_subjects_list();
    $("#btn-create-subject").click(function() {
        $.post("/subject/create/"+$("#id_name").val(), function(data) {
            show_subjects_list();
            alert(data);//.hide("fast");
        });
    });
} 
```

也做同样的事情`show_subjects_list`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:13:03.907

就像@nnnnnn 建议的那样，前两行代码必须像这样放在 $.post 中：

```
......
$("#btn-create-subject").click(function() {
        var value = $("#id_name").val();
        var link = "/subject/create/"+value;
        $.post(link, function(data) {
            alert(data);
        });
....... 
```

谢谢大家）

# css - 使用 jQuery 创建一个固定的 其位置相对于居中 ?

> ID：11928247
> 
> 赞同：0
> 
> 时间：2012-08-13T04:34:34.463
> 
> 标签：css

我认为标题解释了这一切，但这是我想要做的：

我有一个居中对齐的网站，我希望在用户滚动时固定（或滑动，但你想描述它）向下移动页面。当我将 ' 位置定义为绝对位置时，我可以使用 jQuery 来实现这一点，但显然这会创建它相对于整个浏览器窗口的位置。相对于内容，它应该是向右 980px，但是使用 Absolute 它位于页面中间的某个位置，并且在调整窗口大小时不会停留在页面上的同一位置。使用 position:relative 将其放在正确的位置，但不允许它在页面滚动时移动，它会随着页面滚动。

那有意义吗？我看到各种使用绝对定位的示例，如果我的网站与左侧对齐，这将非常有用，但事实并非如此。

想法？

您可以在此处将我的网站视为正在进行中的工作：http: [//cdn.twelvestops.com/wordpress_one](http://cdn.twelvestops.com/wordpress_one)。随意戳代码等等。（为了记录，主题设计师并没有多大帮助。）

注意：我知道我的网站没有使用自动边距居中，但好像它是使用 CSS 中的 .center 类的所有文本一样。

# java - JPanel 中的内容不会出现

> ID：11928248
> 
> 赞同：0
> 
> 时间：2012-08-13T04:34:37.080
> 
> 标签：java, swing, layout, awt, jpanel

没有错误，但是当我运行它时，我添加到 JPanel 中的内容不会出现，只会出现不在 JPanel 内的内容。

```
import javax.swing.*; 

import java.awt.*;

public class SimpleGUI extends JFrame 
{ 

        public static void main(String arg[]) 
        { 
                SimpleGUI f = new SimpleGUI("GUI components"); 
                f.setSize(600,200); 
                f.setVisible(true); 
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
         } 
        SimpleGUI(String s) 
         { 

                setTitle(s); 
                setLayout(new GridLayout(3,2)); 

                JLabel msg = new JLabel("FINAL EXAM IS JUST AROUND THE CORNER!"); 
                JButton bt = new JButton("OK"); 

                JLabel lb = new JLabel ("Enter your name:"); 
                JTextField tf = new JTextField("<type name here>"); 

                JLabel lb2 = new JLabel ("Enter age:"); 
                JTextField tf2= new JTextField(10);
                tf2.setHorizontalAlignment(JTextField.RIGHT); 

                JCheckBox cb = new JCheckBox("Bold",true); 
                JRadioButton rb1 = new JRadioButton("Red"); 

                JTextArea ta = new JTextArea(5,20);
                JList list = new JList(new Object[] {"Block A", "Block B"}); 
                JComboBox jcb = new JComboBox(new Object[] {"Hello", "Bye"}); 

                ImageIcon ic = new ImageIcon("music.gif"); 
                JButton newbt = new JButton("Play",ic); 
                newbt.setVerticalTextPosition(JButton.TOP); 
                newbt.setHorizontalTextPosition(JButton.CENTER); 

                JPanel p1 = new JPanel(); 
                p1.setLayout(new BorderLayout()); 
                p1.add(lb, BorderLayout.WEST); 
                p1.add(tf, BorderLayout.CENTER);
                p1.add(cb, BorderLayout.EAST); 

                JPanel p2 = new JPanel();
                p2.setLayout(new BorderLayout()); 
                p2.add(lb2, BorderLayout.WEST); 
                p2.add(tf2, BorderLayout.CENTER);                 
                p2.add(rb1, BorderLayout.EAST);

                JPanel p3 = new JPanel();
                p3.setLayout(new BorderLayout());
                p3.add(jcb); 
                add(ta); 
                add(list);
                p3.add(newbt, BorderLayout.NORTH); 
                add(msg);
                p3.add(bt, BorderLayout.SOUTH); 
        } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T04:54:45.527

I've updated your code. Have a look at this version:

```
import javax.swing.*;

import java.awt.*;

public class SimpleGUI extends JFrame {

    public static void main(String arg[]) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                SimpleGUI f = new SimpleGUI("GUI components");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            }

        });

    }

    public SimpleGUI(String s) {

        setTitle(s);
        setLayout(new GridLayout(3, 2));

        JLabel msg = new JLabel("FINAL EXAM IS JUST AROUND THE CORNER!");
        JButton bt = new JButton("OK");

        JLabel lb = new JLabel("Enter your name:");
        JTextField tf = new JTextField("<type name here>");

        JLabel lb2 = new JLabel("Enter age:");
        JTextField tf2 = new JTextField(10);
        tf2.setHorizontalAlignment(JTextField.RIGHT);

        JCheckBox cb = new JCheckBox("Bold", true);
        JRadioButton rb1 = new JRadioButton("Red");

        JTextArea ta = new JTextArea(5, 20);
        JList list = new JList(new Object[]{"Block A", "Block B"});
        JComboBox jcb = new JComboBox(new Object[]{"Hello", "Bye"});

        ImageIcon ic = new ImageIcon("music.gif");
        JButton newbt = new JButton("Play", ic);
        newbt.setVerticalTextPosition(JButton.TOP);
        newbt.setHorizontalTextPosition(JButton.CENTER);

        JPanel p1 = new JPanel();
        p1.setLayout(new BorderLayout());
        p1.add(lb, BorderLayout.WEST);
        p1.add(tf, BorderLayout.CENTER);
        p1.add(cb, BorderLayout.EAST);

        JPanel p2 = new JPanel();
        p2.setLayout(new BorderLayout());
        p2.add(lb2, BorderLayout.WEST);
        p2.add(tf2, BorderLayout.CENTER);
        p2.add(rb1, BorderLayout.EAST);

        JPanel p3 = new JPanel();
        p3.setLayout(new BorderLayout());
        p3.add(jcb);
        add(ta);
        add(list);
        p3.add(newbt, BorderLayout.NORTH);
        add(msg);
        p3.add(bt, BorderLayout.SOUTH);

        /**
         * Need to add the following lines
         */
        this.add(p1);
        this.add(p2);
        this.add(p3);

        this.pack();
        this.setVisible(true);
    }
} 
```

A couple of pointers:

*   You need to `add` your `components` to your `JFrame` for them to actually show up.

*   Any updates to the user interface must happen on the `event dispatch thread`. Consequently you would notice that I've added a `SwingUtilites.invokeLater()` to the `main`. Have a look at this article to understand ["Threading with Swing"](http://www.javamex.com/tutorials/threads/swing_ui.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:40:53.023

您在哪里将面板添加到框架中？另外，忘记了我的java“规则和规定”：你需要调用“super()”吗？

# ruby-on-rails - Rspec 2 - --format html 使用守卫

> ID：11928250
> 
> 赞同：2
> 
> 时间：2012-08-13T04:35:03.380
> 
> 标签：ruby-on-rails, rake, rspec2, guard

在我的 rails 项目中，我的 .rspec 文件如下：

```
--color
--format progress
--format html --out tmp/spec_outputs/spec_results.html 
```

当我运行“rake spec”时，输出符合预期：我在标准输出中看到了进度输出，并且在给定目录中创建了 html 文件。

但是，当我尝试使用“bundle exec guard”自动化我的测试时，html 也会发送到 stdout，并且不会创建/更新 html 文件。注意：如果我只是在没有“bundle exec”的情况下运行“guard”，我也会遇到同样的问题。

我的保护文件如下：

```
guard 'cucumber', cli: "-p wip" do
  watch(%r{^features/.+\.feature$})
  watch(%r{^features/support/.+$})          { 'features' }
  watch(%r{^features/step_definitions/(.+)_steps\.rb$}) { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'features' }
end

guard 'rspec', :version => 2 do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }

  # Rails example
  watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }
  watch(%r{^app/(.*)(\.erb|\.haml)$})                 { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] }
  watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
  watch('config/routes.rb')                           { "spec/routing" }
  watch('app/controllers/application_controller.rb')  { "spec/controllers" }

  # Capybara request specs
  watch(%r{^app/views/(.+)/.*\.(erb|haml)$})          { |m| "spec/requests/#{m[1]}_spec.rb" }

  # Turnip features and steps
  watch(%r{^spec/acceptance/(.+)\.feature$})
  watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$})   { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'spec/acceptance' }
end 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:48:27.793

运行的`rspec`命令`guard`不尊重您的`.rspec`文件。您可以`--format`使用`:cli`选项将参数传递给 rspec：

```
guard 'rspec', :cli => "--color --format progress --format html --out tmp/spec_outputs/spec_results.html" do
  # ...
end 
```

有关更多信息，请查看`guard-rspec`文档[guard/guard-rspec](https://github.com/guard/guard-rspec#readme)。

# testing - 在 Grails Spock 规范测试中注入依赖项

> ID：11928252
> 
> 赞同：12
> 
> 时间：2012-08-13T04:35:14.337
> 
> 标签：testing, grails, groovy, dependency-injection, spock

我需要在我的测试中将依赖项注入到我的域对象中。

此测试放置在 test/integration 目录中，并从`spock.lang.Specification`.

我怎样才能做到这一点？

注意：我看过这篇文章[How to injection spring beans into spock test](https://stackoverflow.com/questions/9811345/how-to-inject-spring-beans-into-spock-test)，但它与 grails 无关。

编辑：

我想要注入的依赖项`springSecurityService`在我的`SecUser`子类中，称为`Player`. 失败的方法是`encodePassword()`，它在`beforeInsert()`.

我可以`encodePassword()`在一些测试中模拟这个方法，但是当我想测试我的控制器方法`save()`时，我不能模拟`Player`正在创建的那个，因为这一切都发生在控制器方法中。

更改为 extend 后`IntegrationSpec`，这是我的测试代码：

```
package intertigre.test.domain
import intertigre.domain.Fecha;
import intertigre.test.util.DomainFactoryTestService
import grails.plugin.spock.IntegrationSpec
import grails.test.mixin.TestFor

    @TestFor(Fecha)
    class FechaSpec extends IntegrationSpec{

    DomainFactoryTestService domainFactoryTestService = new DomainFactoryTestService()

    def 'test'(){
        given:
            def fecha = new Fecha()
        when:
            fecha.save()
        then:
            Fecha.get(1) == fecha
    }

} 
```

运行时出现此异常`grails test-app :spock`：

```
java.lang.NullPointerException: Cannot get property 'mainContext' on null object
    at grails.plugin.spock.IntegrationSpec.$spock_initializeSharedFields(IntegrationSpec.groovy) 
```

当我单独运行测试时，这是一个：

```
| Failure:  intertigre.test.domain.FechaSpec
|  java.lang.NullPointerException: Cannot get property 'autowireCapableBeanFactory' on null object
    at grails.plugin.spock.IntegrationSpec.setupSpec(IntegrationSpec.groovy:47)
| Failure:  intertigre.test.domain.FechaSpec
|  java.lang.NullPointerException: Cannot invoke method isActive() on null object
    at grails.test.mixin.support.GrailsUnitTestMixin.shutdownApplicationContext(GrailsUnitTestMixin.groovy:232)
    at org.spockframework.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:176)
    at org.spockframework.runtime.extension.builtin.JUnitFixtureMethodsExtension$FixtureType$FixtureMethodInterceptor.intercept(JUnitFixtureMethodsExtension.java:145)
    at org.spockframework.runtime.extension.MethodInvocation.proceed(MethodInvocation.java:84)
    at org.spockframework.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:176) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T13:12:46.400

尝试将 springSecurityService 声明到测试中，就像在控制器中一样。Grails 应该为您完成所有工作:)

对于集成测试，您可以执行以下操作：

```
package intertigre.test.domain
import intertigre.domain.Fecha;
import intertigre.test.util.DomainFactoryTestService
import grails.plugin.spock.IntegrationSpec

class DomainFactoryTestServiceSpec extends IntegrationSpec{

def domainFactoryTestService // you dont need to create a new instance, it's injected by spring

def 'test'(){
     given:
         // ...
     when:
         // ...
     then:
         // ....
 } 
```

如果您需要测试特定的域对象（作为您的 Fecha 类），您可能需要进行单元测试，如下所示：

```
package intertigre.test.domain
import intertigre.domain.Fecha
import intertigre.test.util.DomainFactoryTestService
import grails.test.mixin.TestFor
import grails.test.mixin.Mock
import spock.lang.Specification

@TestFor(Fecha)
@Mock([OtherObject1, OtherObject2])
class FechaSpec extends Specification {

def domainFactoryTestService // same thing here, if you need the service

def 'test'() {
     given:
         def fecha = new Fecha()
     and:
         def oo1 = new OtherObject1()
     when:
         // ...
     then:
         // ....
 } 
```

您也可以使用单元测试来测试服务，这取决于您要测试的内容（一个类-服务-或“情况”-服务的使用方式-）。

附言。当然，这里的这段代码没有经过测试，可能有错别字。:) 但我希望你明白我关于如何测试的观点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-17T18:05:38.847

上面接受的答案适用于需要注入服务类的控制器的单元测试。

如果您在 resources.groovy 中定义了其他 Spring 托管 bean 并需要注入它们，您可以在规范类的顶部添加这一行

```
static loadExternalBeans = true //<-- loads resources.groovy beans 
```

**来源**： http: [//grails.github.io/grails-doc/2.4.4/guide/testing.html#unitTesting](http://grails.github.io/grails-doc/2.4.4/guide/testing.html#unitTesting)

> 将静态 loadExternalBeans = true 字段定义添加到单元测试类会使 Grails 单元测试运行时加载来自 grails-app/conf/spring/resources.groovy 和 grails-app/conf/spring/resources.xml 文件的所有 bean 定义。

# android - droidText：如何减少内存消耗

> ID：11928254
> 
> 赞同：1
> 
> 时间：2012-08-13T04:35:23.663
> 
> 标签：android, pdf-generation, heap-memory

生成 pdf 时会消耗大约 4MB 的内存，应用程序堆大小也在增加，生成 pdf 后堆大小保持不变，如果再次尝试生成 pdf，堆大小会进一步增加。

生成pdf后是否可以让堆大小减小，4Mb的内存消耗是否合理？

# audio - 以 HTML5 播放 RTMP 直播

> ID：11928264
> 
> 赞同：5
> 
> 时间：2012-08-13T04:37:23.977
> 
> 标签：audio, mp3, rtmp, ogg

我有一个来自 Flash 应用程序的 RTMP 用户流式麦克风。如何使用 HTML5（非 Flash）将此流广播给其他用户？

浏览器是否支持 HTML5 中的实时音频流？我需要使用什么格式，mp3，ogg？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T04:43:24.597

HTML5 不支持 RTMP。但是，它们使用标签支持音频播放。您需要包含 mp3 ogg 和 wav，因为所有浏览器都不支持任何一种格式。但是，就像我说的，HTML5 只支持 httpd，不支持 RTMP

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T00:50:24.283

似乎 HTML5 现在支持文件流，但我不认为它与 RTMP 兼容。这是一个链接

[http://www.html5rocks.com/en/tutorials/webrtc/basics/](http://www.html5rocks.com/en/tutorials/webrtc/basics/)

# php - 是否在 URLS 中传递 id 或主键以安全地在 symfony2 中进行编辑

> ID：11928270
> 
> 赞同：0
> 
> 时间：2012-08-13T04:38:32.213
> 
> 标签：php, symfony, doctrine-orm

对于控制器，我的网址如下所示

`/user/profile/{id}/edit`

现在我觉得它不是很安全，因为如果特权成员在那里输入任何其他数字，那么数据将被插入到错误的用户中。

基本上，我在首页上有表格，上面有学生选择列表，然后老师选择学生，然后走得更远。在这里，我提交表单并设置`userid`会话变量。

很少有页面可以正常工作，因为我没有在 URL 中放置任何变量。

但是我被困在我有用户添加的分配列表的地方。正如我以表格格式显示的那样，每次点击都会转到单独的分配。我必须把`assignmentid`网址

有什么办法可以解决这个问题，这样我就不需要在 URL 中添加任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:47:34.460

首先，您应该假设每个用户的输入/操作都可能是错误的或邪恶的：因此，在 Symfony2 防火墙和 isGranted 函数下实现验证，以检查用户是否有权编辑用户。

其次，也许你应该在 url 中给一个 id 一个用户名或一个用户 slug：然后通过耕种你的基地的所有用户 id 来访问编辑页面会更加困难

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:55:48.023

There's nothing wrong with passing the IDs through the URL. You *could* use `POST` or `SESSION` data to pass the IDs around, but it can be cumbersome and annoying for users because it can upset browser history navigation.

Instead, you should be doing privilege verification on every request if security is a concern. If the problem is an aesthetic one and not a security one, you could create a unique name for each assignment that you can pass in the URL instead.

# sql - 如何在sql server中使用for循环场景

> ID：11928273
> 
> 赞同：1
> 
> 时间：2012-08-13T04:39:15.540
> 
> 标签：sql, sql-server, loops

我从查询中得到多个值。

```
select l_t_id from MLTalukDetails join MLDistrictDetails on MLTalukDetails.L_D_Id=4 
```

它返回 13、14、15、16。现在我想一次获取这些值中的每一个并从这些值中获取详细信息，即

```
select Sc_Id from MSchoolDetails 
where 
MSchoolDetails.L_T_Id=@talukid and 
MSchoolDetails.Y_Id=@yearid 
```

我该怎么办这种情况。我如何在这里使用 for 循环语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:51:42.110

我从您的问题推断这是您实际正在寻找的完整解决方案：

```
 SELECT MSchoolDetails.* 
      FROM MLTalukDetails
INNER JOIN MSchoolDetails ON MTalukDetails.l_t_id = MSchoolDetails.L_T_Id
     WHERE MLTalukDetails.L_D_ID = 4 AND MSchoolDetails.Y_Id=@yearid 
```

*通常*一个连接条件涉及两个表。

我建议[阅读](https://stackoverflow.com/questions/419375/sql-join-differences)各种连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:54:36.987

如果您想使用循环，请使用游标......这是我在存储过程中实现的解决方法......

```
CREATE PROCEDURE [dbo].[proc_GetSc_Id]
@yearid INT
AS
CREATE TABLE #Sc_Id(Sc_Id varchar(20))
BEGIN       
DECLARE @talukid varchar(20)

    declare c cursor For 
    select l_t_id from MLTalukDetails join MLDistrictDetails on MLTalukDetails.L_D_Id=4

open c
    fetch next from c into @talukid
    while(@@FETCH_STATUS=0)
    BEGIN
        insert into #Sc_Id(Sc_Id) 
            select Sc_Id from MSchoolDetails where MSchoolDetails.L_T_Id=@talukid and MSchoolDetails.Y_Id=@yearid
        fetch next from c into @talukid
    END
    select * from  #Sc_Id;---Here you got your final result.
close c
deallocate c
DROP TABLE #Sc_Id
END 
```

# python - Rpy2 和 Python 安装障碍

> ID：11928277
> 
> 赞同：1
> 
> 时间：2012-08-13T04:39:37.937
> 
> 标签：python, rpy2

我似乎无法为 python 安装 Rpy2。最初我遇到了显示以下错误的问题。

```
Tried to guess R's HOME but no R command in the PATH. 
```

但后来我按照以下线程中的说明进行操作：[在 win7 上安装 rpy2 时遇到问题（R 2.12，Python 2.5）](https://stackoverflow.com/questions/4924917/trouble-installing-rpy2-on-win7-r-2-12-python-2-5)

我将 R\R-2.12.1\bin\i386 中的所有文件放置并复制到 R\R-2.12.1\bin 中，然后将我的环境路径设置为指向 R\R-2.12.1。现在尝试再次从源安装它..

```
python setup.py run 
```

我犯了同样的错误。如果我将路径变量设置为 R\R-2.12.1\bin\ 那么我得到以下错误，如给出第二个答案的人所示

```
ValueError: Invalid substring in string 
```

那个线程没有想法，所以我想一年后是否有新的方法来解决这个问题。

编辑 = 一次

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T13:34:51.840

我也是，我在启动和运行 rpy2 时遇到了很多困难，即使在遵循 lgauthier 答案中的关键链接之后也是如此。但是，最终的帮助来自该邮件列表上的一个回复。

总而言之，这些是在我的 Windows7 计算机上启动并运行 rpy2 所需的 4 个步骤：

1.  从此链接安装 rpy2：[https ://bitbucket.org/breisfeld/rpy2_w32_fix/issue/1/binary-installer-for-win32](https://bitbucket.org/breisfeld/rpy2_w32_fix/issue/1/binary-installer-for-win32)
2.  将 C:\Program Files\R\R-2.12.1\bin\i386（R.dll 的路径）添加到环境变量 PATH
3.  使用 C:\Program Files\R\R-2.12.1 添加环境变量 R_HOME
4.  使用您的 Windows 用户名添加环境变量 R_USER

如果您不知道如何添加/更改环境变量，请查看此处： http: [//www.computerhope.com/issues/ch000549.htm](http://www.computerhope.com/issues/ch000549.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:31:10.750

检查 7 月 18 日的[rpy 邮件列表](http://www.mail-archive.com/rpy-list@lists.sourceforge.net/msg03340.html)。rpy2 在 Windows 方面取得了轻微进展，人们报告说运行它取得了一些成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-22T07:25:53.510

我尝试了上面的四个步骤，效果很好。对卡迪赞不绝口。

关于 user1234440 的问题，我只使用了 easy_install rpy2，它工作得很好。

[http://rpy.sourceforge.net/rpy2/doc-2.2/html/overview.html#download](http://rpy.sourceforge.net/rpy2/doc-2.2/html/overview.html#download)

确保您已安装 setup_up 工具。如果您不知道如何操作，请查看下面的链接。

[https://pypi.python.org/pypi/setuptools#windows](https://pypi.python.org/pypi/setuptools#windows)

您可以运行 ez_setup.py 并让它为您决定。

然后您只需按照 Kadee 提供的步骤 2 到 4 进行操作。

# ios - 如何使用多个核心图像过滤器影响图像（不重置结果）

> ID：11928279
> 
> 赞同：5
> 
> 时间：2012-08-13T04:39:58.483
> 
> 标签：ios, image-processing, xcode4, slider, core-image

我有一个项目有几个核心图像过滤器，每个都连接到不同的滑块。一切正常，但我还没有想出将结果从一个过滤器传递到下一个过滤器的最佳方法。每次我更改任何其他滑块时，它们都会重置。原因是从导入图像创建的原始图像被每个过滤器绘制为输入图像。但不知道如何解决这个问题。

我正在尝试考虑将多个过滤器的结果传递到一个输出图像的最佳方法。

这是项目：[owolf.net/uploads/StackOverflow/CoreImageFilter.zip](http://owolf.net/uploads/StackOverflow/CoreImageFilter.zip)

以及下面粘贴的一些viewControler的代码：

```
- (void)viewDidLoad
{
    //Create CIImage
    UIImage *aUIImage = [imageView image];
    CGImageRef aCGImage = aUIImage.CGImage;
    aCIImage = [CIImage imageWithCGImage:aCGImage];

    //Create context
    context = [CIContext contextWithOptions:nil];

    saturationFilter = [CIFilter filterWithName:@"CIColorControls" keysAndValues: @"inputImage", aCIImage, nil];
    brightnessFilter = [CIFilter filterWithName:@"CIColorControls" keysAndValues: @"inputImage", aCIImage, nil];
    contrastFilter = [CIFilter filterWithName:@"CIColorControls" keysAndValues: @"inputImage", aCIImage, nil];
        [super viewDidLoad];
}

- (IBAction)saturationSliderValueChanged:(id)sender {
    outputImage = [saturationFilter outputImage];
    CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
    newUIImage = [UIImage imageWithCGImage:cgimg];
    CGImageRelease(cgimg);
    [imageView setImage:newUIImage];   
}

- (IBAction)brightnessSliderValueChanged:(id)sender {
    [brightnessFilter setValue:[NSNumber numberWithFloat:brigtnessSlider.value] forKey: @"inputBrightness"];
    outputImage = [brightnessFilter outputImage];
    CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
    newUIImage = [UIImage imageWithCGImage:cgimg];
    CGImageRelease(cgimg);
    [imageView setImage:newUIImage];
}

- (IBAction)contrastSliderValueChanged:(id)sender { 
    [contrastFilter setValue:[NSNumber numberWithFloat:contrastSlider.value] forKey: @"inputContrast"];
    outputImage = [contrastFilter outputImage];
    CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
    newUIImage = [UIImage imageWithCGImage:cgimg];
    CGImageRelease(cgimg);
    [imageView setImage:newUIImage];
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T04:47:25.077

您需要选择应用过滤器的顺序，然后将第一个过滤器的输出用作第二个过滤器的输入图像，依此类推。这是我的一个项目中的一个示例：

```
CIImage *adjustedImage = self.originalImage;

[self.vibranceFilter setValue:adjustedImage forKey:@"inputImage"];
adjustedImage = [self.vibranceFilter outputImage];

[self.hueFilter setValue:adjustedImage forKey:@"inputImage"];
adjustedImage = [self.hueFilter outputImage];

[self.vignetteFilter setValue:adjustedImage forKey:@"inputImage"];
adjustedImage = [self.vignetteFilter outputImage];

CGImageRef cgImage = [self.imageContext createCGImage:adjustedImage fromRect:[adjustedImage extent]];

self.imageView.image = [UIImage imageWithCGImage:cgImage];

CGImageRelease(cgImage); 
```

该值`adjustedImage`有效地累积了 Core Image 滤镜的效果。这一切都在它自己的方法中进行，每当您的任何滑块值发生变化时都会调用该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T04:47:58.227

问题是您将所有这些的输入图像设置为`aCIImage`. 你需要做这样的事情：

```
[filter1 setValue:aCIImage forKey:@"inputImage"];

filter1Output = [filter1 outputImage];
[filter2 setValue:filter1Output forKey:@"inputImage"]; 
```

等等

# c++ - 为类对象赋值

> ID：11928289
> 
> 赞同：0
> 
> 时间：2012-08-13T04:41:35.520
> 
> 标签：c++

主要的

```
#include <stdio.h>
#include "Student.h"
#include <stdlib.h>

void main()
{
Student* pStudents = new Student[0];
int arraySize = 0;

int input = 0;

while(input != 3)
{
    printf("Press 1 to add student, 2 to print and 3 to quit.\n");
    scanf_s("%d", &input);
    switch(input)
    {
    case 1:
        pStudents[numOfStudents].AddStudent(pStudents, arraySize);
        arraySize++;
        numOfStudents++;
        break;
    case 2:
        break;
    case 3:
        break;
    default:
        printf("Invalid input\n");
        break;
    }
} 
```

}

学生.h

```
#pragma once
#include <string>
#include <iostream>
using namespace std;

class Student
{
public:
    Student(void);
    ~Student(void);
     void AddStudent(Student* pStudent, int arraySize);
private:
    string name;
    int ID;
}; 
```

学生.cpp

```
#include "Student.h"

Student::Student(void)
    : name("N/A")
    , ID(0)
{

}

Student::~Student(void)
{
}
void Student::AddStudent(Student* pStudent, int arraySize)
{
if(arraySize == 0)
{
    delete[] pStudent;
    pStudent = NULL;
    pStudent = new Student[1];

}
else
{
    Student* temp = new Student[(arraySize+1)];
    for(int i = 0; i < arraySize; ++i)
    {
        temp[i] = pStudent[i];
    }
    delete[] pStudent;
    pStudent = temp;
}
printf("Enter name of student.\n");
cin >> name;
printf("Enter ID of student. \n");
cin >> ID;
} 
```

好吧，我一直试图弄清楚这一点，但我做不到。我不确定自己做错了什么，但是当我尝试输入名称时，我不断收到写入违规。我试着查找答案，我看到的一些东西尝试使用向量，但我还没有被教导如何使用它们。

更新

主文件

```
void main()
{
Student* pStudents = new Student[100];
Student studentGenerator;
int numOfStudents = 0;
string name;
int ID;

int input = 0;

while(input != 3)
{
    printf("Press 1 to add student, 2 to print and 3 to quit.\n");
    scanf_s("%d", &input);
    switch(input)
    {
    case 1:
        printf("Enter name of student.\n");
        cin >> name;
        printf("Enter ID of student. \n");
        cin >> ID;
        studentGenerator = Student(name, ID);
        pStudents[numOfStudents] = studentGenerator;
        numOfStudents++;
        break;
    case 2:
        for(int i = 0; i < numOfStudents; ++i)
        {
            studentGenerator.PrintStudents(pStudents[i]);
        }
        break;
    case 3:
        break;
    default:
        printf("Invalid input\n");
        break;
    }
}

} 
```

学生.cpp

```
#include "Student.h"

Student::Student(void)
: name("N/A")
, ID(0)
{

}

Student::~Student(void)
{
}
Student::Student(string studentName, int studentID)
{   
name = studentName;
ID = studentID;
}
void Student::PrintStudents(Student student)
{
cout << "Name: " <<  name << endl;
cout << "ID: " << ID << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:49:51.377

你的设计存在严重缺陷。

Student 类管理 Student 列表，它实际上只是 "main()" 中的一个数组？这是没有意义的！

如何`StudentList`管理一个集合（可以是一个数组）`Student`？

为了澄清您的理解，您认为这是在做什么？：

`Student* pStudents = new Student[0];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:59:36.430

您将数组大小初始化为 0。您不能这样做，因为数组大小是静态的。你需要设置一个更大的数字我建议至少 100 这样它应该读

学生* pStudents = 新学生[100]；

您的学生班级也可以改善

应该创建一个构造函数，该构造函数接受学生姓名和 id 并将它们设置为类变量。此外，您根本不应该关心学生班级内的数组。数组函数应该在测试类级别或 main.js 中处理。学生姓名和 id 也应该在主要或测试功能中询问。v

另外，我从用户那里获取数据的更好方法如下所示：

```
cout << "Enter Students name-->";
getline(cin,studentName); 
```

跟进您的其他问题：

好的，我可以告诉你的新人，你需要掌握 opp。因此，简单地说，阅读您的书或获得更好的知识，因为您完全迷失了！

为了帮助你一点点，你想这样做：在main中创建一个Student类型的虚拟变量，我们称之为studentGenerator。从这里你有两个选择：

选项 1：要求用户输入名称和 ID 以分隔变量。然后使用这些变量生成新变量，这样 StudentGenerator = new Student(name,id)

选项 2：在学生班级中有新的 mutator 并使用 mutaros 设置数据：这个选项有点糟糕，我会改用选项 1！

所以现在你已经生成了这个新学生，把它放到你的数组中。即 StundentArray[counter] = StudentGenerator。

现在这完成了 studentGenerator 是垃圾，因此您可以重用命令（在循环中） StudentGenerator = new Student(name,id) 来添加额外的学生。

# css - CSS位置：绝对位置：相对“顶部”不起作用

> ID：11928294
> 
> 赞同：11
> 
> 时间：2012-08-13T04:42:42.977
> 
> 标签：css, css-position

我正在一个使用位置的网站上工作：包含位置的相对 div：绝对 div。我理解我相信的概念，一切都很好，除了我似乎无法获得`top`做任何事情的属性。左作品，但不是顶部。我的代码如下：

```
<div id="imagemenu">
    <div class="west">
        <img src="/makingmusicstore/wp-content/themes/makingmusic/img/west.png" alt="west">
    </div>
    <div class="southwest">
        <img src="/makingmusicstore/wp-content/themes/makingmusic/img/southwest.png alt=" southwest ">
    </div>
    <div class="south ">
        <img src="/makingmusicstore/wp-content/themes/makingmusic/img/south.png " alt="south ">
    </div>
    <div class="logo ">
        <img src="/makingmusicstore/wp-content/themes/makingmusic/img/logo.png " alt="Making Music Store ">
    </div>
</div> 
```

CSS

```
#imagemenu {
    position: relative;
}
.logo img {
    position: absolute;
    width: 20%;
    top: 50%;
    left: 40%;
}
.west img {
    position: absolute;
    width: 30%;
    left: 15%;
}
.southwest img {
    position: absolute;
    width: 30%;
    left: 15%;
}
.south img {
    position: absolute;
    left: 35%;
} 
```

该网站是 adams-web.net/makingmusicstore，目前一团糟，直到我可以让 top 属性正常工作。在我看来，徽标应该位于页面下方，但它并没有像我认为的那样工作。我不确定我错过了什么。当我将位置更改为静态时它确实有效，但它不能正确保持位置。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-13T04:54:54.250

Hey now define your parent **div height** than used top `%` in top `absolute` **div**

Like this:

```
.parent {
    position: relative;
    height: 100px;
}
.child {
    position: absolute;
    top: 50%;
} 
```

If you don't define your parent div height than used to `px value in top`

```
.child {
    top: 100px;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T04:55:50.420

Add `width` and `height` to `#imagemenu`

For example:

```
#imagemenu {
    width: 100%;
    height: 400px;
} 
```

Then check again if `position: absolute` is working or not.

# android - 使用 Release 签署 Android APK

> ID：11928298
> 
> 赞同：3
> 
> 时间：2012-08-13T04:43:31.270
> 
> 标签：android, android-emulator, google-play, keytool, jarsigner

我已经使用 Eclipse 创建了一个 Android 应用程序。我无法将它上传到 Android Market，因为它是使用调试模式签名的。我想在 Release 模式下签名，我阅读了 Tutorial [Basic Setup for Signing](http://developer.android.com/tools/publishing/app-signing.html#setup)，我也安装了`keytool`但不知道如何安装`jarsigner`。

如何**在发布模式下完成编译和获取 APK**的任务？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T04:50:21.407

Jarsigner 附带 JDK（查看 bin 目录）。我建议使用 Eclipse/ADT 中的[导出向导](http://developer.android.com/tools/publishing/app-signing.html#ExportWizard)来导出和签署您的 jar，这将引导您完成整个过程。

# android - Android：如何在 savedInstancestate 和 resotreInstancestate 上处理 Customview

> ID：11928299
> 
> 赞同：0
> 
> 时间：2012-08-13T04:43:50.383
> 
> 标签：android

如何在 savedInstancestate 和 resotreInstancestate 上处理 Customview？Customview 包含流式视频。一旦我进入下一个活动并进入上一个活动，流式视频将不可见。如何处理？

```
MjpegView container = (MjpegView)findViewById(R.id.video1_surface);
container.setSource(MjpegInputStream.read(Url)); 

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
} 
```

谁能帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:32:32.350

在您的案例中考虑 CustomView 时，您可能会感到困惑。而且我不知道您想在活动中维持什么：视频数据或指向它的链接？

根据您的描述，我猜您想在切换回来和涉足 2 个活动的同时维护数据。为此，您应该使用`SharedPreferences`：

```
public void AppSaveData(Context context, String data_key, String what_to_save)
    {
        SharedPreferences prefs = Context.getSharedPreferences("SHARED_STORE_NAME", Context.MODE_PRIVATE);          
        prefs.edit().putString(data_key, what_to_save).commit();
    }

public String AppGetData(Context context, String data_key)
    {
        SharedPreferences prefs = context.getSharedPreferences("SHARED_STORE_NAME", Context.MODE_PRIVATE);          
        return prefs.getString(data_key,"http://default_link.html");
    } 
```

注意：上下文是您的`main activity`或`yourActivity.getApplicationContext()`

# sql-server - 如何找到具有特定字符串但不在注释中的代码

> ID：11928306
> 
> 赞同：6
> 
> 时间：2012-08-13T04:44:39.330
> 
> 标签：sql-server, regex

我正在尝试在 1,000 个存储过程和函数中搜索特定字符串（在本例中为电子邮件地址），但当它位于评论块中时，我想忽略它。

这是查找对象的 SQL 语法，但有数百个结果，我不想逐个查看电子邮件地址是在代码中使用还是在评论块中使用。

```
SELECT DISTINCT
  o.name objectname
FROM sys.sql_modules m
  INNER JOIN sys.objects o 
    ON m.object_id = o.object_id
WHERE definition LIKE '%somebody@somewhere.com%'
ORDER BY o.name 
```

我有一个可以使用正则表达式的 CLR 库 (SQLSharp)，但我不确定可以识别注释与有效代码的正则表达式。

对于那些精通 RegEx 而不是精通 SQL Server 的人，注释被定义为以两个破折号（例如 --）开头的单行或以 /* 开头并以 */ 结尾的多行

一想到要弄清楚这一点，我的大脑就会受伤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T23:16:36.733

这可以使用我在 SQL Server Central 上的一篇文章中发布的代码来完成：

[在对象中搜索文本](http://www.sqlservercentral.com/articles/Stored+Procedures/62975/)

那篇文章中描述的存储过程不仅可以忽略内联 ( `--`) 和块 ( `/* ... */`) 注释，而且还可以忽略单引号内的文本。该代码将忽略注释的选项默认为 True，因为它似乎不太可能想要搜索非影响文本。但是忽略字符串的默认值是 False，因为动态 SQL 和其他一些可以进入字符串的文本最终可能仍然是有效的可执行代码。

该代码是为 SQL Server 2000 开发的，因此不会`NVARCHAR(MAX)`在 1 或 2 个真正有帮助的地方使用。此后，我更新了要使用的代码，`NVARCHAR(MAX)`而不是`NVARCHAR(4000)`单个临时表，但没有用这些更改更新文章。我会尝试在这些日子里做到这一点。而且我相信本文中的代码会查看一个数据库，而更新后的代码将查看所有可访问的数据库（如果未指定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:21:54.563

您可以使用以下正则表达式来识别这两种评论

```
(--.*?\n)|(/\*.*?\*/) 
```

确保`.`也匹配换行符以识别多行注释

请注意，在某些系统上，`\r`它被视为换行符，而在某些系统上，它被视为换行符`\r\n`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:39:42.983

您可以使用我的 ModuleStore 项目的解析器组件，它根据您传入的 SQL 创建一个语法树。然后可以以编程方式查询和修改该树。

[http://code.google.com/p/bsn-modulestore/](http://code.google.com/p/bsn-modulestore/)

# cordova - 没有杀死应用程序实例就没有互联网访问消息

> ID：11928311
> 
> 赞同：0
> 
> 时间：2012-08-13T04:45:37.640
> 
> 标签：cordova, extjs, sencha-touch-2

我目前正在开发 sencha touch 2 项目我想在不杀死应用程序实例的情况下显示一条消息“No Internet Access”我如何使用 sencha touch 2 或通过 phonegap 来实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:55:00.053

你可以检查到phonegap的连接如下

navigator.network.connection.type 示例

```
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
<script type="text/javascript" charset="utf-8">

// Wait for Cordova to load
// 
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is loaded and it is now safe to make calls Cordova methods
//
function onDeviceReady() {
    checkConnection();
}

function checkConnection() {
    var networkState = navigator.network.connection.type;

    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';

    alert('Connection type: ' + states[networkState]);
}

</script> 
```

一个对话框将报告网络状态。

有关它的更多信息，请查看**[关于互联网连接的 PHONEGAP 文档](http://docs.phonegap.com/en/2.0.0/cordova_connection_connection.md.html#Connection)**

# hadoop - 如何在 Hadoop 运行时确定任务是减速器还是组合器？

> ID：11928316
> 
> 赞同：4
> 
> 时间：2012-08-13T04:47:14.457
> 
> 标签：hadoop, mapreduce, combiners

如果使用 MapReduce 执行的操作不是可交换的和关联的，那么 combiner 不能与 reducer 相同。

例如，在计算平均值时，组合器对键的值求和，然后归约器求和，然后将总和除以该键的值的总数。组合器的代码只有轻微的修改。如果您可以对 combiner 和 reducer 使用相同的类，并且可以确定当前任务是 combiner 还是 reducer，那会怎样？如果它发现它是一个reducer，那么它将总和除以计数。

像这样的东西：

```
protected void reduce(Text keyIn, Iterable<PairWritable> valuesIn,
      Context context)
  throws IOException, InterruptedException {
    double sum = 0.0d;
    long count = 0l;

    for (PairWritable valueIn : valuesIn) {
      sum += valueIn.getSum();
      count += valueIn.getCount();
    }

    if (THIS_IS_A_REDUCER) {
      sum /= count;
    }

    context.write(keyIn, new PairWritable(sum, count));
  } 
```

是否有可能做到这一点？`THIS_IS_A_REDUCER`可以用某些东西代替上面的代码和平吗？

我可以从任务尝试 ID 字符串中确定任务是映射器还是减速器，但组合器和减速器似乎都具有相似的字符串模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T23:21:32.363

这是一个有缺陷的问题。每当您发现需要区分任务调用哪个 reduce() 时。添加组合器。例如，你写

```
public static class Combine extends MapReduceBase implements Reducer<Text, Text, Text, Text> {
public void reduce(Text key, Iterator<Text> message, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {}

public static class Reduce extends MapReduceBase implements Reducer<Text, Text, Text, Text> {
public void reduce(Text key, Iterator<Text> message, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {} 
```

在 main() 中，你写

```
conf.setReducerClass(Reduce.class);
conf.setCombinerClass(Combine.class); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T21:03:53.293

虽然我知道这个问题已经解决了，但我还有另一个解决方案。我所做的就是让我的Combiner 成为Reducer 的子类。然后在 Reducer 代码中，我能够测试我是否是 Combiner 子类。

这样做的主要好处是我需要在 Reducer 步骤期间修改我的密钥，但不想在 Combining 步骤期间更改它（否则我会应用相同的转换两次）。除此之外，95% 的代码是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T13:25:37.890

我想您可以询问`Context`对象并获取任务 ID。然后，一旦您有了 ID，映射器（包括组合器）的名称中将包含一个“m”，而 reducer 的名称中将包含一个“r”。

要获取任务尝试 ID，请使用[.getTaskAttemptID()](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/mapreduce/TaskAttemptContext.html#getTaskAttemptID%28%29)。我认为你应该能够`context.getTaskAttemptID()`使用它，但我无法确定它。

# javascript - eliminating an addition sign from a calculator

> ID：11928320
> 
> 赞同：0
> 
> 时间：2012-08-13T04:47:28.897
> 
> 标签：javascript, calculator

Can I delete an addition sign in a input field after it has been calculated.

Example: `input_A: (15*2)+30....` Than after it is calculated the Input_A field looks like this : `(15*2),30.`

Check it out:-

[http://jsfiddle.net/qvDFY/12/](http://jsfiddle.net/qvDFY/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:50:37.357

Yes, you can, using the [`.replace`](http://www.w3schools.com/jsref/jsref_replace.asp) function.

And [here](http://jsfiddle.net/qvDFY/13/)'s an example.

# c# - 如果模型中的值为空白或 null，则 httppost 到 mvc 中的控制器不起作用

> ID：11928332
> 
> 赞同：0
> 
> 时间：2012-08-13T04:48:46.733
> 
> 标签：c#, jquery, asp.net, ajax, asp.net-mvc-3

我有以下代码发布到我的控制器中的 httppost 方法：

```
$QuickLoginSubmit.click(function (e) {
        e.preventDefault();
        var LoginModel = {
            'UserName': $QuickEmail.val() == "" ? null : $QuickEmail.val(),
            'Password': $QuickPassword.val() == "" ? null : $QuickPassword.val(),
            'RememberMe': $QuickRemember.val() == "on" ? true : false
        };
        $.ajax({
            url: '/Account/LogOnAjax',
            type: 'POST',
            contentType: 'application/json',
            dataType: 'json',
            data: JSON.stringify(LoginModel),
            success: function (result) {
                if (result == true) {
                    window.location = "/Dashboard";
                } else {
                    $QuickLoginErrors.text(result);
                }
            }
        });
    }); 
```

问题是，如果他们没有在`$QuickEmail`or`$QuickPassword`字段中输入任何内容，则 ajax 调用会返回以下错误：

`The view 'LogOnAjax' or its master was not found or no view engine supports the searched locations. The following locations were searched:<br>~/Views/Account/LogOnAjax.aspx<br>~/Views/Account/LogOnAjax.ascx<br>~/Views/Shared/LogOnAjax.aspx<br>~/Views/Shared/LogOnAjax.ascx<br>~/Views/Account/LogOnAjax.cshtml<br>~/Views/Account/LogOnAjax.vbhtml<br>~/Views/Shared/LogOnAjax.cshtml<br>~/Views/Shared/LogOnAjax.vbhtml</i>`

但是，如果填写了这两个字段，我的 ajax 方法调用就可以正常工作。这是我的httppost方法：

```
[HttpPost]
        public ActionResult LogOnAjax(LogOnModel model)
        {
            if (ModelState.IsValid)
            {
                if (Membership.ValidateUser(model.UserName, model.Password))
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                    return Json(true);                  
                }
                else
                {
                    return Json("The user name or password provided is incorrect.");
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:00:09.863

问题在于您的操作代码的最后一行。

您实际上没有名为**LogOnAjax**的视图。所以，你应该使用

```
return RedirectToAction(YOUR_LOGON_ACTION_NAME); 
```

或者让你的模型回到表格，你可以使用

```
return View(YOUR_LOGON_VIEW_NAME, model); 
```

得到你想要的。

### 更新：

此外，如果您要在所有情况下返回一个 json 对象，最好使用**JsonResult 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:56:31.743

似乎您没有名为“LogOnAjax”的相关视图。由于您期望 JSON 响应，您可以做的就是像这样更改 return 语句。

```
 // If we got this far, something failed, redisplay form
        return Json("Please enter valid username and password");
    } 
```

# python - Python: From 2 Strings Delete Dissimilar Lines

> ID：11928337
> 
> 赞同：0
> 
> 时间：2012-08-13T04:49:59.663
> 
> 标签：python, string

I'm using Python to look at String A and String B.

String A only contains words (with \n newline character as each word is on its own line).

Next, I have String B, which contains lots of words, some which are found in String A and others that are not. I would like to only retain words in String B that are also in String A. The only problem here is that there are other characters after the words in String B that I would also like to retain.

Example:

```
String_A='apple/nbanana/nkiwi/npear'
String_B='cow|0.0|0.25|apple|0.0|0.99|pig|0.0|horse|0.2|banana|0.0|dog|0.2|kiwi|0.25|' 
```

I would like String_C to have an end format of:

```
String_C='apple|0.0|0.99|banana|0.0|kiwi|0.25|' 
```

Please see if you can assist! Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:54:51.830

If there's always exactly two groups after each word in StringB you can do the following

```
def foo(stringA, stringB):
    sawords = frozenset(stringA.split('\n'))
    sbparts = stringB.split('|')
    sbgroups = [sbparts[i:i+3] for i in range(len(sbparts))[::3]]
    filtered = [group for group in sbgroups if group[0] in sawords]
    return '|'.join(itertools.chain(*filtered)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:14:38.783

```
'|'.join([elem for elem in String_A.split('/') if elem in String_B.split('|')]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:23:17.480

这不是更好的实现，但它有效

```
a = String_A.split('\n')
b = String_B.split('|')
c = []
for i in a:
    try:
        found = b.index(i)
        c.append(b[found])
        found += 1
        while found < len(b) and all(map(str.isdigit, (i for i in b[found] if i != '.-'))):
            c.append(b[found])
            found += 1
    except ValueError:
        pass
c = '|'.join(c) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T07:56:32.520

这种方法会忽略名称字段，因为它们可以包含小数、“-”和“.”，只要它还包含其他内容。相反，此函数使用 re 模块来测试非名称字段。如果您想在非名称字段中允许其他字符，您可以修改正则表达式。我对 String_B 进行了一些更改以检查其他非十进制字符类型。

```
import re
import itertools

def filter_strings(stra, strb):
    splita = stra.split("\n")
    splitb = strb.split("|")
    bnestlist = []
    sublist = []

    for segment in splitb:
        if re.match("[\d\.-]+", segment):
            sublist.append(segment)
        else:
            if sublist: bnestlist.append(sublist)
            sublist = []
            sublist.append(segment)

    filtered = [group for group in bnestlist if group[0] in splita]
    return "|".join(itertools.chain.from_iterable(filtered)) 
```

例子：

```
>>> String_A='apple\nbanana\nkiwi\npear'
>>> String_B='cow|0.0|0.25|apple|0.0|-0.99|pig|0.0|horse|0.2|banana|0.0|dog|0.2|kiwi|0.25|'
>>> result = filter_strings(String_A, String_B)
>>> print(result)
apple|0.0|-0.99|banana|0.0|kiwi|0.25 
```

# xml - 使用 XSLT 可以防止输出连续的相同值吗？

> ID：11928339
> 
> 赞同：1
> 
> 时间：2012-08-13T04:50:11.083
> 
> 标签：xml, xslt

是否可以使用 XSL 转换仅匹配 XML 文档中第一次出现的值？

我想打印出 f2 中的每个值，但只打印出 f1 内容的第一个实例。

XML 数据

```
 <doc> 
    <datum>
        <f1>A</f1>
        <f2>Monday</f2>
      </datum>
      <datum>
        <f1>A</f1>
        <f2>Tuesday</f2>
      </datum>
      <datum>
        <f1>B</f1>
        <f2>Wednesday</f2>
    </datum>
    </doc> 
```

输出

```
 A
      -Monday
      -Tuesday
      B
      -Wednesday 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:02:30.353

**I. 这是著名的XSLT 1.0的[Muenchian 分组方法：](http://www.jenitennison.com/xslt/grouping/muenchian.html)**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:key name="kDatumByF1" match="datum" use="f1"/>

 <xsl:template match=
   "datum[generate-id() = generate-id(key('kDatumByF1', f1)[1])]">
   <xsl:value-of select="concat('&#xA;', f1)"/>
   <xsl:apply-templates select="key('kDatumByF1', f1)/f2" mode="inGroup"/>
 </xsl:template>

 <xsl:template match="f2" mode="inGroup">
   - <xsl:value-of select="."/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<doc>
    <datum>
        <f1>A</f1>
        <f2>Monday</f2>
    </datum>
    <datum>
        <f1>A</f1>
        <f2>Tuesday</f2>
    </datum>
    <datum>
        <f1>B</f1>
        <f2>Wednesday</f2>
    </datum>
</doc> 
```

**产生了想要的正确结果**：

```
A
   - Monday
   - Tuesday
B
   - Wednesday 
```

* * *

**二、XSLT 2.0 解决方案，使用[`xsl:for-each-group`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#xsl-for-each-group)**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

 <xsl:template match="/*">
     <xsl:for-each-group select="datum" group-by="f1">
     <xsl:sequence select="'&#xA;', f1"/>
     <xsl:apply-templates select="current-group()/f2"/>
     </xsl:for-each-group>
 </xsl:template>

  <xsl:template match="f2">
   - <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

# jsp - External file (image, css, js) can not loaded in Struts2

> ID：11928343
> 
> 赞同：1
> 
> 时间：2012-08-13T04:50:51.347
> 
> 标签：jsp, struts, struts2

I want to ask why my external css/js was not load in my jsp. My struts.xml content :

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
 "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
  "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
<constant name="struts.enable.DynamicMethodInvocation" value="false" />
<constant name="struts.devMode" value="true" />
<constant name="struts.action.extension" value=""/> 

<package name="default" namespace="/" extends="struts-default">

    <default-action-ref name="home" />

    <action name="home">
        <result name="success">index.jsp</result>
    </action>

</package>  

</struts> 
```

My web.xml content :

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
       http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
       version="2.5">

<display-name>Test</display-name>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 

<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<error-page>
    <error-code>404</error-code>
    <location>error404.jsp</location>
</error-page>

</web-app> 
```

I load my css in my jsp using this code

```
<link rel="stylesheet" type="text/css" href="../style/css/style.css"/> 
```

I also try use this code

```
<link rel="stylesheet" type="text/css" href="<s:url value="/style/css/style.css"/>"/> 
```

even, it's get error when I want to display an image on my jsp

```
<img src="<s:url value="/style/images/icon/car.png"/>" /> 
```

What wrong with this, whether cause of this code (web.xml)

```
<filter-mapping>
   <filter-name>struts2</filter-name>
   <url-pattern>/*</url-pattern>
</filter-mapping> 
```

Thank you for your response.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:51:12.560

原来只是因为我的 struts.xml 中有这段代码

```
<constant name="struts.action.extension" value=""/> 
```

当我删除它时，一切正常。对不起，谢谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T15:48:16.230

您的外部文件夹不在网络服务器的根目录中；所以它不认识它，那么你必须添加它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:12:12.400

这肯定是路径问题。您可以使用 Firebug with Network 查看浏览器尝试加载的确切 URL。之后，您将能够更正 css URL。当然，您不能在现场使用标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T06:50:47.590

你的过滤器阻止了那些图片，CSS

# php - 在外部 php 函数中运行 mysql 查询

> ID：11928348
> 
> 赞同：0
> 
> 时间：2012-08-13T04:51:46.430
> 
> 标签：php, mysql

我正在尝试清理我的代码，我想知道是否可以将我多次调用的 mysql 查询放入我包含在文件顶部的外部 php 函数中。每次我尝试过它时都会收到一个错误，所以我想知道这是否与我对 php 仍然相对较新有关。在我将代码放入新文件（functions.php）之前，一切正常

以下是一些片段：

这是来自要显示的页面

```
<?php
    retreive_user_data();
    while ($result = mysql_fetch_array($queryobj)) {
        echo $result['about'];
    }
?> 
```

这是我包含的 php 文件

```
<?php 
    function retrieve_user_data() {                                 
        $query = "SELECT * FROM users, editables WHERE users.user = editables.user";
        $queryobj = mysql_query($query);
        return $queryobj;
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T04:54:27.557

改变;

```
retreive_user_data(); 
```

到：

```
$queryobj = retreive_user_data(); 
```

其他一些注意事项：

mysql功能被贬值，切换到mysqli。

如果您使用它们，请使用`mysql_fetch_assoc()`not `mysql_fetch_array()`。

浓缩`retrieve_user_data()`为一行：

```
function retrieve_user_data() {                                 
  return mysql_query("SELECT * FROM users, editables WHERE users.user = editables.user");
} 
```

您的查询样式也已贬值。将其更改为：

```
SELECT * FROM users JOIN editables USING user 
```

PS。尝试找到一些更现代的教程来学习。寻找 mysqli 的使用——这是一个很好的信号，它相当新。

# mysql - 除了操作系统术语之外，shell 和命令提示符之间有什么区别吗？

> ID：11928351
> 
> 赞同：5
> 
> 时间：2012-08-13T04:52:36.840
> 
> 标签：mysql, windows, shell, command-prompt

*shell*和*命令提示符*是否指相同的东西，即 Windows 的命令行和 *NIX OS 的 shell？或者还有什么要知道的吗？

实际上，我正在使用命令提示符使用 MySQL，并且正在关注一些关于它的教程，他们正在使用“ *shell* ”，所以我想问一下。我用谷歌搜索了它，有些人认为它们是相同的，而另一些则不是，所以我想从编码人员那里得到更具体的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T04:57:53.537

cmd.exe 和各种 UN*X shell 都是*命令行 shell*。它们都允许您执行命令。

全部支持：

*   从/到命令的某种形式的输入/输出重定向
*   某种形式的管道
*   设置环境变量
*   一组程序结构，例如循环和 if/else

所有都可以编写脚本，从文件中执行 shell 命令。

然而，cmd.exe shell 与它的 UN*X 对应物相比相当原始。UN*X shell 通常支持例如更复杂的字符串操作，并且UN*X 机器上可用的系统命令集提供了更丰富的编程体验。

mysql 程序也是一个命令行 shell，它只专门用于主要使用 SQL 命令与 MySQL 服务器交互。

正如已经指出的那样，术语*外壳*可以更普遍地用于指代提供对系统服务的访问的工具，例如包括任务栏、应用程序切换器等的桌面用户界面。[Shell（计算）的维基百科文章](http://en.wikipedia.org/wiki/Shell_%28computing%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T05:11:26.580

通常，shell 不是命令行界面，而是提供对系统功能的访问的环境。在 Windows 中，explorer.exe（提供任务栏、开始菜单、热键的进程）应该被视为 shell，而不是 cmd.exe。

Unix shell 传统上是基于 CLI 的，但也存在图形 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T04:55:51.350

是的，命令提示符是 Unix shell 的 Windows 术语。

# java - 在不使用openoffice的情况下从java中的doc转换为pdf

> ID：11928352
> 
> 赞同：0
> 
> 时间：2012-08-13T04:52:37.287
> 
> 标签：java, pdf, doc

我需要使用基于 Java 的桌面应用程序将我的 doc 文件转换为 pdf。我无法使用任何类型的服务器或开放式办公室。

您能否提供一段代码来执行此操作。或建议我任何 java 开源 API。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:03:09.493

[这里有一些建议](http://www.daniweb.com/software-development/java/threads/130906/looking-for-api-java-to-convert-.doc-into-.pdf#)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T05:04:59.097

有多个 API（其中几个是开源的）可以帮助您解决这个问题。一些建议如下：

*   [Apache PDFBox](http://pdfbox.apache.org/)库是一个用于处理 PDF 文档的开源 Java 工具。你可以考虑使用这个。

*   另一种选择是使用[Apache™ FOP（格式化对象处理器）](http://xmlgraphics.apache.org/fop/)

*   [文字](http://itextpdf.com/)

# php - 密码/用户名无法使用 php/mysql

> ID：11928353
> 
> 赞同：0
> 
> 时间：2012-08-13T04:52:37.277
> 
> 标签：php, mysql, content-management-system

我正在尝试使用 PHP 和 MYSQL 创建一个非常简单的 CMS。我遇到的问题是，每当我尝试登录时，如果我输入了错误的用户名，我想要发生的事情就会发生。它进入一个显示错误输入的屏幕，并有一个返回登录页面的链接。但是，如果我输入了正确的用户名和错误的密码，它只会重新加载页面，如果我输入了正确的密码，则会出现相同的屏幕，就像我输入了错误的用户名一样，告诉我用户名或密码错误。我检查了数据库以确保我输入的密码正确，并且用户名和密码都正确但它不起作用。谁能帮我解决这个问题？先感谢您

以下是您可能需要查看的功能：

```
function verifyUser($name, $pass)
{
// Escape strings
$username = mysql_real_escape_string($name);
$password - mysql_real_escape_string($pass);

$result = mysql_query("select * from users where username='$username' and       password-'$password' limit 1");

if (mysql_fetch_array($result))
{
    return true;
} else{
    return false;
}

}

function validateUser($name, $pass)
{
    $check = verifyUser($name, md5($pass));

    if($check)
    {
        $_SESSION['status'] = 'authorized';

        header('Location: http://localhost/cms/admin/index.php');

    } else{

        echo'Please enter a correct username and password <br />';
        echo "<a href='http://localhost/cms/admin/login.php'>Try Again?</a>";
        exit;
    }

} 
```

这是 login.php 文件：

```
require_once '../functions.php';

connect();

if($_POST['username'] && $_POST['password'])
{
$result = validateUser($_POST['username'], $_POST['password']);
}

?>

<form method="post" action="">
<p>
    <label for="name">Username: </label>
    <input type="text" name="username" />
</p>

<p>
    <label for="password">Password: </label>
    <input type="password" name="password" />
</p>

<p>
    <input type="submit" id="submit" value="Login" name="submit" />
</p>
</form> 
```

我收到一条通知：未定义索引：第 14 行 C:\xampp\htdocs\cms\admin\login.php 中的用户名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:55:02.517

尝试在成功登录尝试`die();`后添加。`header('Location: ...');`

要更正未定义的索引错误，请在 login.php 中更改：

`if( isset($_POST['username']) && isset($_POST['password']) )`

此外，您的查询中有错误。减号应该是等号（你有`password-'$password'`。除非你需要捕获用户数据，否则你应该尝试计算结果，而不是获取它们。

```
$result = mysql_query("select * from users where username='$username' and       password='$password' limit 1");

if ( mysql_num_rows( $result ) > 0 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:55:12.557

阅读[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)。

基本上，线路`if (mysql_fetch_array($result))`就是问题所在。它不一定像您的 if/else 期望的那样是布尔答案。相反，它要么返回一个资源，要么返回一个`FALSE`. 因此，`$check`永远不会被赋予 的值`true`。

此外，但重要的是，您正在使用的功能正在被弃用。阅读[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:01:56.153

这可能是微不足道的，但请注意您在密码变量后有 '-' 而不是 '='，两次

```
 $password - mysql_real_escape_string($pass);

$result = mysql_query("select * from users where username='$username' and       password-'$password' limit 1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T05:07:44.190

使用正确的查询

```
$result = mysql_query("select * from users where username='{$username}'
 AND password='{$password}' limit 1");
if($result){
return true;
}else{
return false;
} 
```

并且还使用

```
if(isset($_POST["username"]) && isset($_POST["password"])){
$check=verifyuser($_POST["username"],sha1($_POST["password"]));//sha1 is more secure than md5
} 
```

# android - Date picker with default date

> ID：11928354
> 
> 赞同：7
> 
> 时间：2012-08-13T04:52:50.500
> 
> 标签：android, datepicker

In my application i am using date picker for user to select date.ALso i am using database in my application,if user selects 1 particular item means i will fetch data related to that item and i will show it in another screen,in that it will have 1 start date,i have to load that date as default date in date picker..But it is loading the current date as default date but not the date fetched from database..Please help me..Thanks in advance.

My code :

```
 c = Calendar.getInstance();               
               SimpleDateFormat sdf=new SimpleDateFormat("yyyy/MM/dd");
               System.out.println("After format");
               Date pickdefdate=null;
//             String pickdefdatepar=null;
               try {
                   System.out.println("Inside try="+date);
              pickdefdate=sdf.parse(date);              ----------->date which is fetched from database.
              System.out.println("dddddddd="+pickdefdate);

              c.setTime(pickdefdate);    --------------------->Setting this date as current date..
              System.out.println("After parse");
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }           
               mYear = c.get(Calendar.YEAR);             ----------as u said i am setting this value before dialog.
               mMonth = c.get(Calendar.MONTH);
               mDay = c.get(Calendar.DAY_OF_MONTH);     
               showDialog(DATE_DIALOG_ID);

 protected Dialog onCreateDialog(int id) 
     {
            switch (id) {
            case DATE_DIALOG_ID:
                System.out.println("in dia="+mDay);
                return new DatePickerDialog(this, mDateSetListener, mYear, mMonth, mDay);
            }
            return null;
        }    

     private DatePickerDialog.OnDateSetListener mDateSetListener =
                new DatePickerDialog.OnDateSetListener() {
                    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
                        System.out.println("Inside dia");
                        mYear = year;
                        mMonth = monthOfYear;
                        mDay = dayOfMonth;
                    }
            }; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T05:41:21.173

利用

```
 date_picker_dialog.updateDate(year, month - 1, date); 
```

每当您想将现有日期更新为日期选择器时。

如果您想在创建日期选择器时设置任何日期，那么您可以覆盖 oncreatedialog

```
 @Override
    protected Dialog onCreateDialog(int id)
    {
        switch (id) {
            case DATE_DIALOG_ID:
                date_picker_dialog = new DatePickerDialog(this, get_date, year, month - 1, date);
                return date_picker_dialog;
        }
    } 
```

希望它会帮助你。如果您遇到任何问题，那么您可以询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:02:18.667

请参阅`mYear_1`, `mMonth_1`,`mDay_1`是日期选择器中的字段。

在调用`showDialog(DATE_DIALOG_ID_1);`日期选择器对话框之前初始化这些值。

用法==>

```
mYear_1     = 2011;
mMonth_1    = 07;
mDay_1      = 29;

showDialog(DATE_DIALOG_ID_1); 
```

不要这样使用 `c = Calendar.getInstance();`。

只需将数据库中的值初始化为这些值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-26T11:12:10.843

DatePickerDialog 为此有一个默认构造函数。

```
public DatePickerDialog(Context context,
            OnDateSetListener callBack,
            int year,
            int monthOfYear,
            int dayOfMonth) {

    } 
```

# ruby-on-rails - Rails - Model name ends with S

> ID：11928355
> 
> 赞同：18
> 
> 时间：2012-08-13T04:52:57.617
> 
> 标签：ruby-on-rails, scaffolding

I have a model named `ActiveDns`. When I run

```
rails g scaffold_controller ActiveDns 
```

I get the message

> Plural version of the model detected, using singularized version. Override with --force-plural.

Now, the controller and views are generated pretending that the singular is `ActiveDn` and the plural is `ActiveDns`, and I get silly stuff like `link_to new_dn_path`. The `--force-plural` argument doesn't appear to fix this:

```
rails g scaffold_controller ActiveDns --force-plural 
```

still results in controllers using variables named `@active_dn` and views using `new_dn_path`, with rails 3.2.3\. I am removing files between tries using `rails d scaffold_controller ActiveDns`.

What's the right way to do this?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-13T06:44:50.763

> 这样做的正确方法是什么？

我使用[变形](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-inflections)来[记录](http://en.wikipedia.org/wiki/Self-documenting)不可数的实体。

> config/initializers/inflections.rb

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.uncountable "ActiveDns"
end 
```

然后你得到：

```
$ rails g scaffold_controller ActiveDns
      create  app/controllers/active_dns_controller.rb
      invoke  erb
      create    app/views/active_dns
      create    app/views/active_dns/index.html.erb
      create    app/views/active_dns/edit.html.erb
      create    app/views/active_dns/show.html.erb
      create    app/views/active_dns/new.html.erb
      create    app/views/active_dns/_form.html.erb
      invoke  test_unit
      create    test/functional/active_dns_controller_test.rb
      invoke  helper
      create    app/helpers/active_dns_helper.rb
      invoke    test_unit
      create      test/unit/helpers/active_dns_helper_test.rb 
```

这是你想要的吗？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-13T06:58:36.460

我用 rails-3.2 测试过（我想它应该适用于 rails-3.x）

打开您的`config/initializers/inflections.rb`并添加一条规则：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'dns', 'dnses'
end 
```

并生成控制器

```
rails g scaffold_controller ActiveDns 
```

并将路线添加到您的`config/routes.rb`文件中

```
resources :active_dnses 
```

然后你应该看到：

```
$ rake routes

   active_dnses GET    /active_dnses(.:format)          active_dnses#index
                POST   /active_dnses(.:format)          active_dnses#create
 new_active_dns GET    /active_dnses/new(.:format)      active_dnses#new
edit_active_dns GET    /active_dnses/:id/edit(.:format) active_dnses#edit
     active_dns GET    /active_dnses/:id(.:format)      active_dnses#show
                PUT    /active_dnses/:id(.:format)      active_dnses#update
                DELETE /active_dnses/:id(.:format)      active_dnses#destroy 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-16T04:25:54.003

> 我想分享一下我是如何解决我的问题的。

我有一个名为`Pacman`under的 MVC `Data_Warehouse`。

`Pacman`专有名词在哪里。（不能`Pacmen`与 an 一起`e`，但应该`Pacmans`与 an 一起`s`）

并且`Data_Warehouse`就像一个平台名称。（可以是任何东西，在这种情况下是它`DataWarehouse::Pacman`）

所以我有

型号名称 -`models/data_warehouse/pacman.rb`

视图名称 -`views/data_warehouse/pacmans/index.slim`

控制器名称 -`controller/data_warehouse/pacmans_controller.rb`

问题是，Rails 读取了这个路径

`data_warehouse_pacmans_path`

作为

`data_warehouse_pacmen_path`

因为多元化。

所以

我通过添加解决了这个问题

```
ActiveSupport::Inflector.inflections do |inflect|
   inflect.uncountable %w( pacmans )
end 
```

到`inflections.rb`Rails 中的文件。

> 希望这会有所帮助

# java - Java Cron Jobs Stop for one hour a day?

> ID：11928357
> 
> 赞同：0
> 
> 时间：2012-08-13T04:53:52.793
> 
> 标签：java, cron, crontrigger

I am developing java application and in this I wanted to run some method periodically. I have used java schedule to run that method periodically. This is my Cron Expression.

```
/* runs in twelth second by every 5 minutes*/   
public static String CRON_TIME = "12 0/5 * * * ?"; 
```

This works fine. Now I wanted to stop running this scheduler for one hour per day. How I can write Cron Expression to do it? Give me a idea.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:01:59.550

如果您想在 01:00 和 02:00 之间排除，请使用：

```
"12 0/5 0,2-23 * * ?" 
```

# testing - How to integrate different test automation in web project

> ID：11928359
> 
> 赞同：0
> 
> 时间：2012-08-13T04:54:06.980
> 
> 标签：testing, web, automation, phantomjs, robotframework

I want to test all the feature in my web site just like regression test, which is used to guarantee new code do not make other feature crash.

The test i need is just like this:

1.  Login the website with a normal user account to check if the login works well.
2.  Signup a new normal user to see if the signup feature works well.
3.  Login and go to some page to see there is no error or warning showing on the page.
4.  Login the website with an admin account to see if all the admin page works well.

Here is some tools I have found something like what i need.

1.  phantomjs casperjs: headless webkit which can do website navigation and run javascript
2.  robot framework : it looks like a frameworks for test but i have no idear right now.
3.  selenium : I have tried the firefox plugin, it is nice.

And i have seen that some people recommand the vs2010 for test but my team dont use vs...we use emacs, vim so i dont think it is a good choice.

Most importantly, how can i integration these test frameworks with the unittest in my projects? I have no idea on how to choose one to make them together.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:20:49.243

RobotFramework 更像是一个脚本框架，如果我可以这样称呼它的话。它提供了一个运行器/执行器，它将使用通过您的测试运行的现有自动化库（或您的）。与硒一起使用。

Selenium 还允许进行无头浏览器测试：

*   [Selenium 是否支持无头浏览器测试？](https://stackoverflow.com/questions/7568899/does-selenium-support-headless-browser-testing)
*   [无头运行 Selenium](http://www.alittlemadness.com/2008/03/05/running-selenium-headless/)
*   [使用 Jenkins CI 运行 Selenium Headless](http://www.labelmedia.co.uk/blog/posts/setting-up-selenium-server-on-a-headless-jenkins-ci-build-machine.html)
*   [其他谷歌结果](http://www.google.com/search?q=selenium+headless)

您还可以使用 Jenkins/Hudson 或[类似的持续集成](http://en.wikipedia.org/wiki/Comparison_of_Continuous_Integration_Software)软件来运行不同的“批次”测试——单元、系统、集成、回归等。

# mysql - 输出 MySQL 记录列表，按类别分组？

> ID：11928360
> 
> 赞同：1
> 
> 时间：2012-08-13T04:54:13.050
> 
> 标签：mysql, group-by, distinct

我有这样的数据：

```
分类     产品
芥末 热芥末
芥末辣根芥末
芥末蜂蜜芥末
番茄酱
酱汁烧烤酱

```

我想得到这个输出：

```
芥末
辣芥末
辣根芥末
蜂蜜芥末酱

酱汁
番茄酱
烤肉酱

```

我认为我可以使用 GROUP BY 和/或 DISTINCT 来做到这一点，如下所示：

```
    选择 DISTINCT 类别，产品名称
    从食谱
    按类别分组
    按类别排序，产品名称 ASC

```

但我运气不好。任何人都可以帮忙吗？

谢谢 - 乔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T05:00:28.620

试试这个：

```
SELECT category, GROUP_CONCAT(ProdName) as Product
FROM recipes
GROUP BY category
ORDER BY category, ProdName ASC 
```

**输出：**

```
类别产品
-------------------------------------------------- --------
芥末 辣芥末、辣根芥末、蜂蜜芥末
酱汁 番茄酱、烧烤酱

```

### [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!9/f1fad2/1)

# jquery - Multiple submit button validation in jquery

> ID：11928363
> 
> 赞同：0
> 
> 时间：2012-08-13T04:54:36.050
> 
> 标签：jquery

I have added 4 buttons in my Html Form. and I have to add different validation and action for that button. when I attend to validate button That didn't work.,and also I have to add different action for the other buttons.May any one please Help Me..

```
<form id="form-sign-up" class="styled" action="DepartmentServlet" method="post">
            <fieldset>
                <h3>Department </h3>
                <ol>
                    <li class="form-row"><label>Department Id:</label>
                        <input type="text" name="departmentId" id="departmentId" class="text-input required"/><span id="errmsg"></span>
                    </li>
                    <li class="form-row"><label>Department Name:</label>
                        <input type="text" name="departmentName" id="departmentName" class="text-input required"/>
                    </li>
                    <li class="form-row"><label>Department Head:</label>
                        <select name="departmentHead" class="text-input required" id="myDropdown"style="width: 158px"> <option value="">Select Department Head</option>
                            <%

                                String val = "";
                                Department dp = new Department();
                                ResultSet rs = dp.getHeadOfDepartment();
                                while (rs.next()) {
                                    val = rs.getString(2);
                            %>

                            <option value="<%= val%>"><%= val%></option>
                            <%
                                }

                            %>

                        </select>
                    </li>
                    <li class="form-row"><label>Appointed Date:</label>
                        <input id="demo1" name="appointedDate"type="text" maxlength="25" size="25" class="text-input required"><a href="javascript:NewCal('demo1','ddmmmyyyy',true,24)"><img src="images/cal.gif" width="16" height="16" border="0" alt="Pick a date"></a>
            <span class="descriptions">pick a date..</span>
                    </li>

                    <li class="button-row">
                       <input type="submit" value="ADD" class="btn-submit img-swap"/>
                       <input type="submit" value="Delete" class="btn-delete img-swap"/>
                       <input type="submit" value="Update" class="btn-update img-swap"/>
                       <input type="submit" value="Search" class="btn-search img-swap"/>
                    </li>
                </ol>
            </fieldset> 
```

```
$(document).ready(function() { 
     $("#departmentId").keypress(function (e)  
    { 
      //if the letter is not digit then display error and don't type anything
      if( e.which!=8 && e.which!=0 && (e.which<48 || e.which>57))
      {
        //display error message
        $("#errmsg").html("Digits Only").show().fadeOut("slow"); 
        return false;
      } 
    });
      $('.btn-delete').click(function(e){
          var $error = $('<span class="error"></span>');

         if (("#departmentId".val() == "")) {

             $parentTag.addClass('error').append($error.clone().text('Required Field'));

         }

     });

    $('.btn-submit').click(function(e){

        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            var inputVal = $(this).val();
            var $parentTag = $(this).parent();
            if(inputVal == ''){
                $parentTag.addClass('error').append($error.clone().text('Required Field'));
            }

            // Run the email validation using the regex for those input items also having class "email"
            if($(this).hasClass('email') == true){
                if(!emailReg.test(inputVal)){
                    $parentTag.addClass('error').append($error.clone().text('Enter valid email'));
                }
            }

            // Check passwords match for inputs with class "password"
            if($(this).hasClass('password') == true){
                var password1 = $('#password-1').val();
                var password2 = $('#password-2').val();
                if(password1 != password2){
                    $parentTag.addClass('error').append($error.clone().text('Passwords must match'));
                }
            }

        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();

    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:01:41.613

您的输入类型是提交。因此，默认情况下，您的表单正在提交......您必须`preventDefault()`在这种情况下使用

喜欢，

```
$('.btn-delete').click(function(e){
e.preventDefault();
          var $error = $('<span class="error"></span>');

         if (("#departmentId".val() == "")) {

             $parentTag.addClass('error').append($error.clone().text('Required Field'));

         }

     }); 
```

替代方式

将输入类型更改为按钮。完成验证后，使用

```
$("#form-sign-up").submit(); 
```

# macos - How do I add MonoGame project templates to MonoDevelop on MacOS?

> ID：11928367
> 
> 赞同：10
> 
> 时间：2012-08-13T04:54:46.937
> 
> 标签：macos, xamarin.ios, monodevelop, monogame

According to the readme, I am supposed to

> 1.  Shutdown MonoDevelop
> 2.  Find your MonoDevelop AppBundle
> 3.  Right Click on it and select "Show package Contents"
> 4.  Press Alt and Drag and Drop the directory MonoDevelop.MonoGame.2.5 into ../Contents/MacOS/lib/monodevelop/AddIns/

Which I did - but I still don't see the project templates in MonoDevelop. I also looked at these other questions [here](http://monogame.codeplex.com/discussions/258939/), [here](https://stackoverflow.com/questions/10508349/monogame-mac-templates-installation) and a few more on google - but didn't find that anyone got the templates to work (most of them used workarounds that involved hand-editing other such [template projects](https://github.com/danielellis/MonoGame-MacGame) or editing a MonoTouch OpenGL project).

Any help will be much appreciated, thanks!

# iphone - 在 iPhone 上为一系列图像制作动画的最佳方式是什么？

> ID：11928378
> 
> 赞同：1
> 
> 时间：2012-08-13T04:55:52.920
> 
> 标签：iphone, image, animation, sequence

我正在制作一个有胜利状态和失败状态的游戏。对于每个状态，我想显示一个 2-3 秒的短动画。第一个动画包含 60 个 PNG，速率为 30 fps，第二个动画包含 80 个 PNG，同样为 30 fps。我尝试了各种方法，并广泛搜索了解决方案，但我一直发现的前两个结果是使用 UIImageView 动画图像和核心动画。在模拟器中使用 UIImageView 效果很好，但第一次在设备上运行需要很长时间。我认为这是因为图像需要加载到内存中。我正在使用“imageNamed”来填充animationImages数组，但我猜他们需要在第一次调用动画时渲染？我已经尝试在应用程序加载时预渲染它们，这似乎可以解决问题，但是预渲染所有这些图像需要将近 10 秒，这对用户不友好。我也愿意使用 Core Animation，但我对它的了解非常有限，因此非常感谢详细的解释。谢谢！

当您说我需要在应用程序启动时加载所有内容时，您到底是什么意思？现在，我在应用加载时初始化两个动画图像数组，如下所示：

```
// Create thinnestAnimation Array
thinnestAnimation = [[NSMutableArray alloc] init];
for(int i = 1; i <= 60; i++)
{
    UIImage *thinImage = [UIImage imageNamed:[NSString stringWithFormat:@"ThinnestJump_%d.png", i]];
    [thinnestAnimation addObject:thinImage];
}

thinAnimationImageView.animationImages = (NSArray *)thinnestAnimation;
thinAnimationImageView.animationDuration = 2.0;
thinAnimationImageView.animationRepeatCount = 1; 
```

thinAnimationImageView 是我界面中的一个 IBOutlet，`[thinAnimationImageView startAnimating];`当我想要为图像序列设置动画时我会调用它。这严重滞后于第一次通话，但此后很好。有没有办法防止它第一次滞后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:21:55.650

`UIImageView`的内置动画功能是一个很好的方法。但是，您需要在需要制作动画之前加载所有内容，例如在应用程序启动时。如果您需要准备好多个不同的动画，请在启动时加载多个 UIImageView 对象，然后使用它的`startAnimating`方法调用您稍后需要的那个。

还有其他动画方法，例如使用 Cocos2D，它使用 OpenGL 进行动画，性能更快。但是你已经在一个完全不同的框架中构建了你的应用程序，这可能是过度的，这取决于你的应用程序中发生的其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:08:28.770

正如安德鲁斯所提到的，UIImageView 具有动画的内置属性

就像你有一个图像数组（imgarray）和一个图像视图

用于创建图像数组

```
NSMutableArray *imgarray = [NSMutableArray arrayWithCapacity:100]
for (int i = 0; i < 100; ++i) {
  NSString *name = [NSString stringWithFormat:@"img%d.png",i];
  UIImage *image = [UIImage imageNamed:name];
  [imgarray addObject:image];
} 
```

然后用于动画

```
UIImageView *imgview;

imgview.animationimages=imgarray; 
```

然后设置

```
 imgview.animationDuration=2.0;  //in seconds

     [imgview startAnimating]; 
```

stopanimating 用于停止动画，还有一个用于动画重复计数的属性

希望这可以帮助.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:55:28.423

您可能想查看[这篇](http://mysterycoconut.com/blog/2011/01/cag1/)关于使用 CALayer 使用 sprite sheet 制作动画的文章。图层的开销与 spritesheet 一样少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T18:35:04.743

迟到的答案，但我自己处理了这个问题，发现以下有用：

第三个答案的底部，[依次使用图像数组的动画](https://stackoverflow.com/questions/6040528/animation-using-array-of-images-in-sequence)

基本上，使用 imageNamed: 比直接从包中提取图像要慢。这是我所做的使我的加载速度更快的方法：

```
NSMutableArray *imagesArray = [NSMutableArray new];

for (int i = 0; i < 150; i++)
{
    [imagesArray addObject:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"pngSlice-%d", i]
                                                                                            ofType:@"png"]]];
}

self.myImageView.animationImages = imagesArray;
self.myImageView.animationRepeatCount = 1;
self.myImageView.animationDuration = 2.5;

[self.myImageView startAnimating];

imagesArray = nil; 
```

如果您将图像直接添加到包中并按顺序命名它们（即 pngSlice-0、pngSlice-1、pngSlice-2...），则此方法有效。我有 150 张图片，更改条件以匹配您的图片总数。

# mysql - 选择使用“或”和不使用的 MySQL 索引优化

> ID：11928380
> 
> 赞同：-2
> 
> 时间：2012-08-13T04:56:06.207
> 
> 标签：mysql, optimization, indexing

我有一个要快速查询的查询，但有些东西我还不明白。

我使用 3 个查询进行了简单的测试。

在我的表中有列 `1`，并且`3`是带有普通键的 int（每个都有自己的索引） `15`，35 是带有全文键的字符串（每个都有自己的索引）

第一的

```
select `1` from el where ( `15`='Bump' or `35`='Bump' and `3`='1' ) limit 1; 
```

时间：250ms

第二

```
select `1` from el where ( `35`='Bump' and `3`='1' ) limit 1; 
```

时间：0.024ms

第三

```
select `1` from el where ( `15`='Bump' and `3`='1' ) limit 1; 
```

时间：0.007ms

**我的问题是：wtf？还有如何解决它？**

提前致谢！

> 编辑：好的，这似乎是 mysql 的限制，无法真正修复，所以我决定只运行两个查询而不是一个，我得到 0.031 毫秒，这比 0.270 毫秒好得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:03:54.750

你不能直接修复它，这是 MySQL 的一个限制，它只能从一个索引中读取来进行查询，但是没有一个索引可以处理所有三个条件`OR`。

即它必须单独检查每一行以查找任何匹配的行，但没有一个索引可以确定排除行，因此根本不能使用索引。

使用`AND`它可以选择一个，找到匹配的行，然后进一步过滤它们（不使用索引）以确保它们匹配其余条件。

那么如何修复呢？使用`UNION`：

```
SELECT `1` FROM el WHERE `15`='Bump'
UNION
SELECT `1` FROM el WHERE `35`='Bump'
UNION
SELECT `1` FROM el WHERE `3`='1' 
```

这将单独运行检查，然后将它们组合起来。

PS。是的，MySQL 应该自动执行此操作，但事实并非如此。您可能希望查看 PostreSQL - 我不确定，但我认为它可以处理这种类型的查询。

# ios5 - 为什么表格视图不能检测单元格的正确高度？

> ID：11928383
> 
> 赞同：0
> 
> 时间：2012-08-13T04:56:27.673
> 
> 标签：ios5, xcode4, uitableview, uikit, uistoryboard

基本上，我有一个 UITabBar，每个选项卡中都包含一个 UITableView。这些表是不同的，但它们具有相同的自定义 UITableViewCells，除了第二个表视图有一个粗体标签。

这是一个屏幕截图，可以更好地解释这一点：

![截屏](../Images/e70304b8993e7312001b79b89988869d.png)

您可以清楚地单元格 UITabBar，以及它包含的 UITableViews。您可以观察到除了加粗字体之外的单元格几乎相同。我通过选项拖动第一个 UITableViewCell 并更改第一个标签的字体来创建第二个 UITableViewCell。它实际上是另一个单元格的精确副本，具有不同的标签和不同的标识符。

但是当我运行我的应用程序时，我看到了两种不同的东西。只有第一个表格视图中的单元格看起来不错。第二个看起来像普通单元格，里面没有任何自定义视图。

这是第一个看起来不错的表格视图的屏幕截图：

![正确的表格视图单元格](../Images/8be1865e98494b7aba4a64165defa1cc.png)

但是第二个应该显示完全相同大小的相同单元格的第二个却没有。

![不正确的表格视图单元格](../Images/ce20bd52b0bedc8a3d8b108fe2b41062.png)

那么给了什么？这是怎么回事？这是没有意义的。TableViewCells 与我上面提到的几个变化完全相同。是的，它们也有不同的视图控制器，但我没有触及任何视图控制器，以使第一个单元格看起来不错。

会不会是 XCode 的错误？老实说，我发现 XCode 非常有问题，所以如果由于某种原因它完全忽略了我的第二个单元格，我不会感到惊讶。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T02:33:01.750

问题是我自己的愚蠢。我一直在修改错误的屏幕。迟到的答案，几年前就解决了，但我认为这应该有助于那些检查“小事情”的人，总是。

# expect - 如何在脚本之间转移控制？

> ID：11928386
> 
> 赞同：-2
> 
> 时间：2012-08-13T04:56:43.353
> 
> 标签：expect

```
#!/usr/bin/expect -f 
spawn telnet 10.123.9.111 
expect login {send username\r} 
expect password {send password\r} 
----Here i want to execute commands----
----Commands are stored in an array in example.pl script----
----All variables are global in perl script----
----After executing these commands, control should again transfer to the called perl script---- 
```

我怎样才能做到？这是正确的方法吗？或者有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:41:15.337

您需要从 Perl 驱动控制。我会从 Perl 动态编写期望脚本，在命令中编码以从数组运行。然后 Perl 可以执行期望脚本：

```
system "expect", "/tmp/newly_written_script.exp"; 
```

并在期望返回时继续处理。

# php - mysql_ping - 是否过度使用它？

> ID：11928387
> 
> 赞同：0
> 
> 时间：2012-08-13T04:56:51.197
> 
> 标签：php, mysql

我有一个客户端应用程序，它不断用`mysql_ping()`. 这种情况每隔 1-5 秒就会发生一次，如果有大量用户使用该应用程序，成本会有多高？

我这样做的原因是为了避免 MySQL 重新连接延迟，除非客户端和服务器之间每隔 1-5-10 秒发生一次（不确定），否则需要重新连接，这对我没有帮助。

编辑：这**不是网络应用程序**，而是本地软件，所以通过客户端应用程序（机器），我说的是需要不断 ping 服务器的应用程序用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:11:30.837

如果客户端是不同的物理机器，那么 ping*可能*（我强调可能）是一个好主意。

通过避免重新连接，您肯定会加快速度。

主要缺点是用户数量 - MySQL 对用户有限制，如果每个用户始终连接，您可能会达到该限制。

如果你没有达到极限，我认为它没有害处。

就网络使用而言，ping 非常少。当然，如果这是一个本地 LAN（而不是通过 Internet），那么那里没有任何危害。

# android - 如何在 Android 中发送带有 Html 内容和图像的电子邮件

> ID：11928388
> 
> 赞同：1
> 
> 时间：2012-08-13T04:57:02.103
> 
> 标签：android, html, email

我想从我的 android 应用程序发送一封电子邮件，其中包含 HTML 内容和图像作为附件。我的搜索结果显示无法使用 HTML 标记发送图像。我怎样才能实现这一点？即，我想要**HTML 中的内容**（这些是一些 URL）并将**图像作为附件**发送。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:24:45.117

```
String path = Images.Media.insertImage(getContentResolver(), bmp,"title", null);
Uri screenshotUri = Uri.parse(path);
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
emailIntent
        .putExtra(android.content.Intent.EXTRA_EMAIL, emailAddresses);
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
emailIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
emailIntent.setType("image/png");
startActivity(Intent.createChooser(emailIntent, "Send email using")); 
```

发送邮件很有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T05:45:12.017

**要将图像附加到邮件中，请执行此操作**

用于`Intent.ACTION_SEND`像这样将图像从设备附加到电子邮件

```
 File F = new File("/sdcardpath/imagename.png");
 Uri U = Uri.fromFile(F);
 Intent i = new Intent(Intent.ACTION_SEND);
 i.setType("image/png");
 i.putExtra(Intent.EXTRA_STREAM, U);
 startActivity(Intent.createChooser(i,"Email:")); 
```

**& 用于将 html 内容发送到电子邮件正文，请执行此操作**

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("text/html");
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(body));
startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

# python - 带有 gettext 的 Cython

> ID：11928395
> 
> 赞同：2
> 
> 时间：2012-08-13T04:58:11.023
> 
> 标签：python, gettext, cython

我开始使用 Cython，在我的源文件中使用 gettext 翻译时遇到了问题。例如，我有一个名为**ScriptParser.py**的源文件，我正在测试将其编译为 .pyd 对象。这根本没有修改源代码，只是试图让文件在此刻进行编译。此文件是从项目中的主要文件之一导入的。该主文件还导入了一个不同的源文件，它使用 gettext 来安装翻译函数**_()**。Cython 给我的错误是这样的：

```
Error compiling Cython file:
------------------------------------------------------------
...
            fn += u':%i' % step

            fn += u']'
            return eval(fn)
        except:
            error(_(u'IndexError'))
                  ^
------------------------------------------------------------

ScriptParser.py:416:19: undeclared name not builtin: _ 
```

显然 Cython 正在抱怨，因为在这个源文件中没有**_()**引用或定义或任何东西或排序。所以我想知道我应该如何解决这个问题。我是否需要更改构建脚本以包含更多文件？现在我只是尝试一次编译一个文件来测试奇怪的东西等等。当我遇到这个问题时，我已经以这种方式编译了 2 个源文件。

这是我的构建脚本供参考：

```
from distutils.core import setup
from Cython.Build import cythonize

setup(
    name = 'testing',
    ext_modules = cythonize(['ScriptParser.py',
                              ],
                            annotate=True),
    ) 
```

并调用：

> setup.py build_ext --inplace

现在就像我说的那样，我可能只是搞砸了构建过程，这是我第一次涉足 Cython。所以也许我错误地试图一次编译一个源文件，而不是做一些“整个项目”的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:06:29.787

我不认为你做错了什么。只是 gettext 修改`__builtin__`了 cython 无法知道的命名空间。作为一种解决方法，您可以为发生这种情况的所有文件添加：

```
import __builtin__; _ = __builtin__._ 
```

我不知道你会如何告诉 cython 接受范围内非标准变量的存在`__builtin__`，但也许你可以询问 cython 邮件列表是否有另一种方法来欺骗 cython。（请注意，如果在导入模块之前未完成 gettext 内容，这也会失败。尽管添加一个`try: ... except: ...`子句以设置`__builtin__._`为 None 如果它尚不存在将解决该问题。

编辑：当然`_`这里是在模块范围内，但我不认为这应该是一个问题。

# dll - Mono：如何在 Makefile.am 中添加 DLL 引用？

> ID：11928396
> 
> 赞同：0
> 
> 时间：2012-08-13T04:58:48.147
> 
> 标签：dll, mono, makefile, multiple-makefiles, autogen

我正在尝试向[CmisSync](http://cmissync.github.com)添加一个 DLL ，这是一个使用 Mono 和 autogen/configure/Makefiles的[开源项目。](https://github.com/nicolas-raoul/CmisSync)这是我第一次使用 Mono。

我将 DLL 复制到相关子目录，并`Makefile.am`在这一行修改了该目录：

```
LINK = -r:$(DIR_BIN)/SparkleLib.dll 
```

...我添加了`DotCMIS.dll`这样的：

```
LINK = -r:$(DIR_BIN)/SparkleLib.dll:DotCMIS.dll 
```

然后我在项目的根目录下重建了 Makefile：

```
./autogen.sh
./configure 
```

问题：现在运行时出现错误`make`：

```
Making all in SparkleLib/Cmis
Makefile:545: *** multiple target patterns.  Stop.
make: *** [all-recursive] Error 1 
```

它不适用于`-r:$(DIR_BIN)/SparkleLib.dll DotCMIS.dll`任何一个。
我也尝试添加`LIBS=DotCMIS.dll`和`REFERENCES = DotCMIS.dll`线，没有运气。

将 DLL 添加到像这样使用 autogen/configure/Makefiles 的项目的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:31:18.343

通过反复试验，我最终做出了这个幸运的猜测：

```
LINK = -r:$(DIR_BIN)/SparkleLib.dll -r:$(DIR_BIN)/DotCMIS.dll 
```

现在编译好了！

# excel - Excel图表中的条件数字格式

> ID：11928398
> 
> 赞同：0
> 
> 时间：2012-08-13T04:58:54.037
> 
> 标签：excel, charts, number-formatting, conditional-formatting

我正在使用 Excel 2010，我想将条件数字格式应用于图表中的值标签。当我将条件格式应用于工作簿中的单元格时，条件格式工作得很好，但是当我将该数据提供给图表时，值标签上的条件数字格式会丢失。

可以在[此处找到指向我的屏幕截图的链接。](http://tinypic.com/r/35lx0cx/6)（我需要更多的经验点来张贴图片）

我正在使用具有三个单独规则的条件格式功能，这些规则基于单独单元格的值。我需要图表中的数字格式自动更新（即没有宏）。我知道单元格可以在其自定义数字格式中内置条件，但似乎条件只能基于单元格本身的值。

任何帮助将不胜感激，如果您需要更多详细信息，请询问。在接下来的 72 小时内，我将密切关注这一点。

米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:01:58.393

在 stackoverflow、excelforum.com 和我的工作论坛上发布此问题并通过电子邮件发送专家（例如 Excel 的 XY 值标签插件的创建者）后，我确认无法直接执行此操作。即使 LinkNumberFormat = True，图表值标签的数字格式也不会链接回单元格中的条件数字格式。即使我在我的标准中指定 VBA 不是一个选项，也没有一种方法可以务实地访问图表值标签。

这让我（以及其他有同样问题的人）有两个选择

1.  我可以手动或务实地更改原始单元格的数字格式，或者
2.  我可以将值标签指向一个单独的单元格，该单元格使用文本函数和 if 语句来创建表示值标签的字符串。然后这个单元格会自动更新，因此值标签也会自动更新。

希望这将在未来的 Excel 版本中更新 :(

# javascript - 在 mvc3 中显示 PopUP 窗口时如何限制页面的功能？

> ID：11928399
> 
> 赞同：0
> 
> 时间：2012-08-13T04:58:54.453
> 
> 标签：javascript, asp.net-mvc-3, fancybox, popupwindow

其中我有一个链接，当用户单击时会出现一个弹出窗口......弹出窗口的实际情况是当弹出窗口出现在屏幕上时页面的背景不应该工作我不知道在哪里我做错了吗，但是...当弹出窗口打开时，我的后台功能正在运行，任何人都可以在这里纠正我

这是我的弹出窗口的CSS

```
 div#fancy_overlay {
           position:absolute;
           top: 0;
           left: 0;
           z-index: 90;
            width: 100%;
            background-color: #333;
                 }

        div#fancy_loading {
position: absolute;
height: 40px;
width: 40px;
cursor: pointer;
display: none;
overflow: hidden;
background: transparent;
z-index: 100;
          }

      div#fancy_loading div {
position: absolute;
top: 0;
left: 0;
width: 40px;
height: 480px;
background: transparent url(fancy_progress.png) no-repeat;
      }

      div#fancy_close {
position: absolute;
top: -12px;
right: -12px;
height: 30px;
width: 30px;
background: transparent url(fancy_closebox.png) ;
cursor: pointer;
z-index: 100;
display: none;
      }

    div#fancy_content {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
padding: 0; 
margin: 0;
z-index: 96;
     }

   #fancy_frame {
position: relative;
width: 100%;
height: 100%;
display: none;
    }

    img#fancy_img {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
border:0; 
padding: 0; 
margin: 0;
z-index: 92;
      }

    div#fancy_title {
position: absolute;
bottom: -35px;
left: 0;
width: 100%;
z-index: 100;
display: none;
     }

    div#fancy_title table {
margin: 0 auto;
     }

    div#fancy_title div {
color: #FFF;
font: bold 12px Arial;
padding-bottom: 2px;
    }

     td#fancy_title_left {
height: 32px;
width: 15px;
background: transparent url(fancy_title_left.png) repeat-x;
      }

    td#fancy_title_main {
height: 32px;
background: transparent url(fancy_title_main.png) repeat-x;
     }

    td#fancy_title_right {
height: 32px;
width: 15px;
background: transparent url(fancy_title_right.png) repeat-x;
     }

     div#fancy_outer {
position: absolute;
top: 0;
left: 0;
z-index: 90;
padding: 18px 18px 58px 18px;
margin: 0;
overflow: hidden;
background: transparent;
display: none;
  }

    div#fancy_inner {
position: relative;
width:100%;
height:80%;
border: 1px solid #444;
margin:75px 0 0 0;
     box-shadow: 5px 5px 5px #333;
     opacity:0.95;
     filter:alpha(opacity=80); /* For IE8 and earlier */
     }

   a#fancy_left, a#fancy_right {
position: absolute; 
bottom: 10px; 
height: 100%; 
width: 35%; 
cursor: pointer;
background-image: url(data:image/gif;base64,AAAA);
z-index: 100; 
     }

     a#fancy_left {
left: 0px; 
     }

     a#fancy_right {
right: 0px; 
     }

     a#fancy_left:hover {
background: transparent url(fancy_left.gif) no-repeat 0% 100%;
      }

    a#fancy_right:hover {
background: transparent url(fancy_right.gif) no-repeat 100% 100%;
     }

     #fancy_bigIframe, #fancy_freeIframe {
position:absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 10;
     }

     div#fancy_bg {
display: none;
      }

       div.fancy_bg {
position: absolute;
display: block;
z-index: 70;
     }

    div.fancy_bg_n {
top: -18px;
width: 100%;
height: 18px;
background: transparent url(fancy_shadow_n.png) repeat-x;
     }

     div.fancy_bg_ne {
top: -18px;
right: -13px;
width: 13px;
height: 18px;
background: transparent url(fancy_shadow_ne.png) no-repeat;
    }

    div.fancy_bg_e {
right: -13px;
height: 100%;
width: 13px;
background: transparent url(fancy_shadow_e.png) repeat-y;
    }

     div.fancy_bg_se {
bottom: -18px;
right: -13px;
width: 13px;
height: 18px;
background: transparent url(fancy_shadow_se.png) no-repeat;
    }

    div.fancy_bg_s {
bottom: -18px;
width: 100%;
height: 18px;
background: transparent url(fancy_shadow_s.png) repeat-x;
       }

    div.fancy_bg_sw {
bottom: -18px;
left: -13px;
width: 13px;
height: 18px;
background: transparent url(fancy_shadow_sw.png) no-repeat;
    }

    div.fancy_bg_w {
left: -13px;
height: 100%;
width: 13px;
background: transparent url(fancy_shadow_w.png) repeat-y;
     }

    div.fancy_bg_nw {
top: -18px;
left: -13px;
width: 13px;
height: 18px;
background: transparent url(fancy_shadow_nw.png) no-repeat;
     } 
```

这是我的 JS

```
 <script type="text/javascript">
   $(document).ready(function () {
    $(".fancybox").fancybox();
   });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:10:55.337

制作覆盖模式。采用`$(".fancybox").fancybox({modal: true});`

# jquery - jquery live() 或 on() 无法处理没有事件的对象

> ID：11928408
> 
> 赞同：1
> 
> 时间：2012-08-13T05:00:33.083
> 
> 标签：jquery, jquery-ui

我有一个按钮`. on`，单击它会将一个类附加`draggable`到容器中。具有类的 div`draggable`被分配`jquery draggable()`以使其成为`draggable`。

但是，在运行时创建的对象不会变成`dragable`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:03:15.187

要分配给动态元素，请在创建并将它们附加到`draggable`之后尝试以下语句：`draggable``document`

```
$('.class_to_dynamic_element').draggable('destroy').draggable(); 
```

# android - Android 使用手势移动和缩放

> ID：11928410
> 
> 赞同：0
> 
> 时间：2012-08-13T05:00:43.917
> 
> 标签：android, canvas, bitmap, gesture-recognition

一旦单击按钮，我就会创建一个图像；它是在画布中间创建的，正如我设置的那样：

```
if(choosenImage != null) {
     c.drawBitmap(choosenImage, 0, 0, null);
} 
```

我想用手移动和缩放图像，例如拖动到、移动等。

我怎样才能做到这一点 ？和这有关`onTouchListener`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:24:40.503

是的，它与 OnTouchListener 有关。我认为以下链接上的代码将解决您的问题：

[在android imageview中旋转缩放拖动图像](https://stackoverflow.com/questions/5894736/rotate-zoom-drag-image-in-android-imageview)

# mysql - Mysql,JSP,谷歌地图

> ID：11928414
> 
> 赞同：0
> 
> 时间：2012-08-13T05:01:25.140
> 
> 标签：mysql, google-maps, google-maps-api-3

我探索了一些有趣的谷歌地图教程。我有兴趣在我的应用程序上的自定义谷歌地图上显示信息窗口和标记。我想从 MySQL 获取信息窗口和标记的数据，而不是使用我想使用的 php JSP。我在谷歌上搜索了很多。我没有找到任何特定的解决方案。任何人都可以帮助我或给我提示我应该如何去做吗？还是我现在必须学习php？因为我擅长 JSP。任何帮助都会更明显。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T07:37:06.633

我很高兴回答大约 7-8 个月前在堆栈溢出上发布的我自己的问题。

问题：- 我想在 jsp 中显示谷歌地图和一些谷歌地图功能（不是在 PHP 中）。信息窗口等功能。

问题：- 所有 GoogleMap 功能逻辑都存在于 JavaScript 中。所以我想从 javascript 中的 mysql db 获取我的业务数据（可能包含一些经纬度），并在 infowindow 中显示该数据或使用该数据在谷歌地图等上放置一些标记。所有这些我都想在 JSP 的 javascript 中做.

解决方案：-我发现了2个解决方案

1）使用servlet，它将以json格式返回您需要的数据，并使用ajax调用在javascript中调用该servlet url。

2）使用Spring MVC。Spring MVC 返回带有在控制器方法中指定的@ResponseBody 注释的json 对象，您只需要以与我们将使用ajax 调用在javascript 中调用servlet 相同的方式调用该url。

示例 Ajax 函数：-

```
$.ajax({
          type:       "post",
          url:        "/ServletReturnJson/JsonServlet",//URL to your servlet
          dataType: 'json'
          success:function(msg) {
          var m=msg;
          var json = m ,
          obj = JSON.parse(json);
          for(var i=0;i<obj.length;i++){
              //Iterate your data
          }     

      }); 
```

注意：-以上只是示例。您可以尝试使用自己的课程并使用上述示例作为指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:13:42.993

我的建议是阅读并理解[本教程](https://developers.google.com/maps/articles/phpsqlajax_v3)。使用 JSP 而不是 PHP 来实现这个概念。

# asp.net-mvc-3 - Telerik 上传控件的自定义事件

> ID：11928416
> 
> 赞同：0
> 
> 时间：2012-08-13T05:01:28.503
> 
> 标签：asp.net-mvc-3, telerik

我试图在我的项目中使用 Telerik Upload 控件。在那，我需要使用自定义按钮。当上传控件至少有 1 个文件时显示该按钮。如果不存在文件，则隐藏自定义按钮。

这是我的查看代码：（注意：createitems 是我的按钮 ID）

```
function UploadSuccess(e) {
    $('#createitems').show();

}

function UploadRemove(e) {
    var files = e.files;
    if (files.length > 0) {
     $('#createitems').hide();
    }
    else {
        $('#createitems').show();
    }
} 
```

谁能告诉我这个问题的可能性。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-13T05:23:55.560

如果文件至少 1，您可以隐藏和显示您的按钮

```
function UploadRemove(e) {
    var files = e.files;
    if (files.length > 0) {
        $('#createitems').show();

    }
    else {
        $('#createitems').hide();
    }
} 
```

# objective-c - 在 UIWebView 加载时设置密码字段的值？

> ID：11928417
> 
> 赞同：1
> 
> 时间：2012-08-13T05:01:30.397
> 
> 标签：objective-c, uiwebview

html 行：`<input title="Enter your User-ID" class="acctAccessInput4" name="username" id="maskedusername" type="password" value=""></label>`

UIWebView 加载后如何自动填写该字段？

这不起作用：`[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('maskedusername').value = 'myPassword'"];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:01:13.273

您的代码不起作用，因为页面未完全加载。

尝试：

实现委托并添加以下代码。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('maskedusername').value = 'myPassword'"];    
} 
```

以下代码在页面加载时执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:09:42.203

尝试最初在 HTML 字符串本身中加载它：

```
<input title="Enter your User-ID" class="acctAccessInput4" name="username" id="maskedusername" type="password" value="pasword"></label> 
```

# regex - 正则表达式检查约束不适用于 SQL 服务器

> ID：11928419
> 
> 赞同：3
> 
> 时间：2012-08-13T05:01:38.870
> 
> 标签：regex, sql-server-2008, tsql, check-constraints

我试图拒绝所有不是格式“03 xxxx xxxx”的输入，所以我创建了一个表格

```
create table records
(
....
num varchar(255) NOT NULL,
...
CONSTRAINT num_check CHECK (num like '03 [0-9]{4} [0-9]{4}')
) 
```

哪个应该（我认为？）接受例如“03 1234 1234”。但是如果我尝试通过 sql manager 添加它，我会收到一条错误消息：“INSERT 语句与 CHECK 约束“num_check”冲突”

起初我以为我的正则表达式已关闭，但我在其他几个地方尝试过，它接受了上面的例子。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T05:23:55.887

[`like`](http://msdn.microsoft.com/en-us/library/ms179859.aspx)不适用于正则表达式，它有自己的更简单的通配符模式，仅支持`%`, `_`,`[a-z]`和`[^a-z]`. 而已。`{4}`不起作用，就像大多数正则表达式功能一样。
您应该能够使用：

```
like '03 [0-9][0-9][0-9][0-9] [0-9][0-9][0-9][0-9]' 
```

另一种选择，少一点重复：

```
declare @digitChar nvarchar(12)
set @digitChar = '[0-9]' 
```

Where 子句：

```
like '03 ' + replicate(@digitChar,4) + ' ' + replicate(@digitChar,4) 
```

示例：[http ://sqlfiddle.com/#!3/d41d8/3251](http://sqlfiddle.com/#!3/d41d8/3251)

# iphone - 如何在目标 C 中实现 iCal

> ID：11928430
> 
> 赞同：-2
> 
> 时间：2012-08-13T05:02:38.667
> 
> 标签：iphone, objective-c, icalendar

我正在做一个项目，我需要保留特定日期的日期和时间。为此，我计划在 Objective-C 中实现 iCal，以便我可以从 iCal 服务器获取所有信息。

谁能告诉我如何以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:08:03.543

使用库，例如​​ libiCal [http://www.citadel.org/doku.php?id=documentation:featured_projects:libical](http://www.citadel.org/doku.php?id=documentation:featured_projects:libical)

如果您想自己实现，则有 3 个 RFC（RFC 2445、2446 和 2447），所以这不是一件容易的事。

# ios - 为什么我的 UITextField 总是返回数组中的最后一个值？

> ID：11928435
> 
> 赞同：0
> 
> 时间：2012-08-13T05:03:22.427
> 
> 标签：ios, uitableview, nsmutablearray

```
static NSString *cellIdentifier = @"Cell";

NSMutableArray *fields=[[NSMutableArray alloc] init];

MDSpreadViewCell *cell = [aSpreadView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) {
    cell = [[[MDSpreadViewCell alloc] initWithStyle:MDSpreadViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

        for (i =0; i < N; i++){
        NSLog (@"tag = %i", i);

        [fields  addObject:[[UITextField alloc] initWithFrame:CGRectMake(10, 10, 185, 30)]];
        [[fields objectAtIndex:i] setTag:i];

        NSString *John =  [NSString stringWithFormat:@"%i", i];

             [[fields objectAtIndex:i] setText:John];

      [[fields objectAtIndex:i] setBackgroundColor:[UIColor redColor]];
        [[fields objectAtIndex:i] setDelegate:self];
        [[fields objectAtIndex:i] setUserInteractionEnabled:TRUE];
           viewWithTag:i]).text;
            [cell addSubview:[fields objectAtIndex:i]];
    }

    return cell; 
```

输出到控制台的内容是正确的：Tag = 0、1、2、3 等，但每个单元格只表示数组中的最后一个值。我尝试将 for 语句放在不同的位置，并在不同的块中返回单元格。我确信这是我忽略的简单事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:38:13.823

这可能只是一个部分有用的答案，因为您还有一些其他问题需要考虑，到目前为止我在您显示的代码片段中没有看到这些问题（最值得注意的是，您需要某种模型，例如一个多维数组，它独立于表格视图保存电子表格数据，以及当用户更改文本字段中的任何值时将更新模型的代码。）

但我认为此时您只是尝试在表格单元格中创建文本字段并让一些数字出现在其中。你可以尝试这样的事情：

```
static NSString *cellIdentifier = @"Cell";
MDSpreadViewCell *cell = [aSpreadView dequeueReusableCellWithIdentifier:cellIdentifier];

if (cell == nil) {
    cell = [[[MDSpreadViewCell alloc] initWithStyle:MDSpreadViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

    UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(10, 10, 185, 30)]];

    textField.tag = 1;
    textField.backgroundColor = [UIColor redColor];
    textField.delegate = self;
    [textField setUserInteractionEnabled:YES];

    [cell addSubview:textField];
}

UITextField *textFieldForCell = [cell viewWithTag:1];
int numberInCell = rowPath.row + columPath.column;
textFieldForCell.text = [NSString stringWithFormat:@"%i", numberInCell];

return cell; 
```

就像将来的注释一样，在您原来的问题中表明您正在使用[MDSpreadView会很有帮助](https://github.com/mochidev/MDSpreadView/tree/master/Classes)

# linux - 在linux中使用bash查找文件夹中的所有音频文件

> ID：11928440
> 
> 赞同：5
> 
> 时间：2012-08-13T05:04:05.933
> 
> 标签：linux, bash, find, ls

当我在`ls`命令中使用通配符时，它可以工作。

```
$ ls '*.{mp3,ogg}'  # Showing only two formats in the command
cannot access *.mp3: No such file or directory
1.ogg 2.ogg 3.ogg 
```

但是使用 find 命令不起作用

```
$ find ~ -iname '*.{mp3,ogg}' 
```

行中的错误是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-13T05:08:43.807

我认为这应该对你有用

```
 find ~ -name "*.mp3" -o -name "*.ogg" 
```

-o 等价于布尔值`or`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T05:27:28.257

如果启用 extglob ( `shopt -s extglob`)，则可以使用`*.@(ogg|mp3)`.

```
shopt -s extglob
printf '%s\n' *.@(mp3|ogg) 
```

如果您也需要递归，请启用 globstar（需要 bash 4.0 或更高版本）

```
shopt -s extglob globstar
printf '%s\n' **/*.@(mp3|ogg) 
```

当您使用 时`ls *.{mp3,ogg}`，您将结合大括号扩展和路径名扩展。会发生什么：

```
ls *.{mp3,ogg}  
ls *.mp3 *.ogg  # after brace expansion
ls '*.mp3' 1.ogg 2.ogg 3.ogg # after pathname expansion 
```

如果一个 glob 没有匹配的文件，则 glob 将被原封不动地传递。并将`ls`其视为文字文件名；它不知道全局/通配符。

`find ~ -iname '*.{mp3,ogg}'` 不起作用，因为不`find`进行大括号扩展，这是一个 bash 功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-23T15:06:18.930

这个甚至为您提供那些*没有*mp3 或音频扩展名的文件。

```
find -print0 | xargs -0 file -F '//' | awk -F '//' 'tolower($2) ~ /audio/ { print $1 }' 
```

* * *

这解释为：

`find . -print0` 查找（列出）每个文件并使用空终止符输出

`xargs -0 file -F '//'``file(1)`以空字符分隔的标准输入（或管道输入）作为第一个参数运行。

`file -F '//'`分隔文件名及其类型，`//`因为它既不出现在 UNIX 文件名中，也不作为文件类型出现。

`awk -F '//' '...'` 使用`//`分隔符作为字段分隔符。awk 脚本不区分大小写地匹配`audio`第二个字段中出现的 （即由 报告的文件类型`file(1)`），并且对于每个匹配项，打印文件路径。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-10T02:17:27.850

这是我刚刚做的一个。. .

对于 .ogg 和 .mp3

```
 find Music | grep '/*.ogg\|/*.mp3' | sort -u 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T05:08:12.697

`find`不支持完整的 shell 通配符语法（特别是，不支持大括号）。你需要使用这样的东西：

```
find ~ -iname '*.mp3' -o -iname '*.ogg' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-06T20:03:38.237

关于什么？

```
file * | grep audio 
```

# android - 你如何使用 build_native.sh 工具？

> ID：11928448
> 
> 赞同：0
> 
> 时间：2012-08-13T05:05:20.257
> 
> 标签：android, macos, android-ndk, cocos2d-x

我按照raywenderlich.com 上的[本](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)教程进行操作，在需要为 Android 开发构建原生 C++ 库的部分上遇到了麻烦。

我正在使用 Mac OS、Cocos2d-x v2.0.1（最新版本），设置了我的 Android SDK 和 NDK，并且我的 Eclipse (Helios) 具有 C/C++ 所需的正确插件。现在我在为 Android 开发构建 Cocos2d-x 库时遇到了麻烦。我正在使用 build-native.sh 工具。如果我像这样在终端上使用它：

`xxxxx-xxxxx-imac:proj.android xxxxx$ ./build-native.sh`

我得到以下信息：

```
Using prebuilt externals
Android NDK: WARNING: Ignoring unknown import directory: /Users/xxxxx/Desktop/LANCE/COCOS2DX/cocos2d-2.0-rc2-x-2.0.1/cocos2dx/platform/third_party/android/prebuilt    
Android NDK: /Users/xxxxx/Desktop/LANCE/COCOS2DX/cocos2d-2.0-rc2-x-2.0.1/CocosDenshion/android/Android.mk: Cannot find module with tag 'cocos2dx' in import path    
Android NDK: Are you sure your NDK_MODULE_PATH variable is properly defined ?    
Android NDK: The following directories were searched:    
Android NDK:         
make: Entering directory `/Users/xxxxx/Desktop/LANCE/COCOS2DX/cocos2d-2.0-rc2-x-2.0.1/testproj2/proj.android'
jni/Android.mk:19: *** Android NDK: Aborting.    .  Stop.
make: Leaving directory `/Users/xxxxx/Desktop/LANCE/COCOS2DX/cocos2d-2.0-rc2-x-2.0.1/testproj2/proj.android' 
```

我看了看`/Users/xxxxx/Desktop/LANCE/COCOS2DX/cocos2d-2.0-rc2-x-2.0.1/cocos2dx/platform/third_party/android/prebuilt`但这个目录不存在（`platform`文件夹中缺少该`cocos2dx`文件夹）

我该如何解决？提前致谢。

**编辑：**查看脚本后，我注意到 中的`cocos2dx`文件夹`cocos2dx root folder`没有`Android.mk`文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:52:58.167

重新解压 Cocos2d-x ZIP 就可以了。原来需要的文件在 Cocos2d-x 根文件夹中被删除（出于某种原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T10:01:22.703

build_native 工具已经过时，取而代之的是 Cocos2d-Console。

# dom - 将其他 DOM 元素添加到 Backbone 中的视图

> ID：11928452
> 
> 赞同：2
> 
> 时间：2012-08-13T05:06:14.937
> 
> 标签：dom, view, backbone.js

我正在处理视图的子元素，但不确定是否正确处理它们。这个具体的例子是我有一个旋转木马，它有左右按钮，在某些事件上消失（例如，如果你在一个方向到达旋转木马的尽头）。为了操纵这些对象，我一直在做这样的事情，但感觉不对：

```
$(this.el).find('.right-paddle').hide(); 
```

或者在某些情况下，在实例化过程中调用如下：

```
this.rightPaddle = $(this.el).find('.right-paddle'); 
```

这样我以后可以做这样的事情：

```
this.rightPaddle.hide(); 
```

这是不好的形式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:10:33.333

> 为了操纵这些对象，我一直在做这样的事情，但感觉不对：

为什么不？它有什么问题？是不是写得太多了？视图绑定到“父”DOM 元素，并且通常它们中有一些子元素或元素，必须*找到*这些子元素或元素才能操作它们。这是完全有效的

> 或者在某些情况下，在实例化过程中调用类似这样的东西：如果你经常引用它，缓存实例是一个好习惯，因为 DOM 遍历是昂贵的。在你的情况下，它似乎是完全有效的。
> 
> 这是不好的形式吗？

不，有不止一种方法可以做到这一点。做一些使您的应用程序更易于维护和可读性的事情，而不一定要争取过早的优化或难以阅读的代码，除非它对性能非常关键（尽管应该仍然易于阅读:)

这有助于减轻您的担忧吗？

# c# - 如何在 windows phone 中制作可触摸的通知顶部栏？

> ID：11928453
> 
> 赞同：0
> 
> 时间：2012-08-13T05:06:35.780
> 
> 标签：c#, windows-phone-7, reflection, system-tray

如何在 windows phone 中制作可触摸的通知顶部栏？

我是 C# 和 windows phone 世界的新手。所以我的问题可能有一个简单的解决方法，但我用谷歌搜索了很多，但没有成功。这是我的目的：我在整个应用程序中运行了一个计时器，它每隔一小时请求一次通知信息服务，并在屏幕顶​​部显示一个“通知栏”。获取信息很容易，但是当我想将它们显示到页面时，这是我的问题：

**1.** 我使用系统托盘来显示我的信息。它可以工作，但后来我发现进度指示栏没有触摸或单击事件。我什至在 App.xaml.cs 中向 Touch.FrameReported 添加了一个事件，但是，当我触摸系统托盘区域时，该事件不会触发。

**2.** 然后我想用动态的方式来实现它：在当前页面添加一个文本块我得到了当前页面处理程序，但是我只知道当前页面处理程序的类型是PhoneApplicationPage，我无法获取我的Root UI元素（我的所有页面都有一个名为“LayoutRoot”的根元素）当我尝试使用反射方法获取“LayoutRoot”属性时，返回值为null。

代码如下所示：

```
Type type = PhoneApplicationPageHandler.getType()<
//I checked,the type is my page's type
type.getProperty("LayoutRoot") or type.getField("LayoutRoot")
//they all return null 
```

顺便说一句：LayoutRoot 是一个网格，它在我页面的 .xmal 文件中进行了描述。

现在我的选择是让我的所有页面都继承一个默认页面，在这个页面中，我将实现一个方法来实现我的第二种方式来模拟“可触摸顶栏”。

但我认为这种编码很难看。

所以，谁能告诉我：1.如何将触摸事件添加到 SystemTray 或 2.如何获取 xaml 中描述的 ui 元素的处理程序，而我只有该页面的 PhoneApplicationPage 类型处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:10:00.137

您可以使用
1) 此处描述的吐司提示[http://windowsphonegeek.com/articles/WP7-Toast-Prompt-in-depth](http://windowsphonegeek.com/articles/WP7-Toast-Prompt-in-depth)

2) 或此处描述的外壳吐司[http://www.c-sharpcorner.com/UploadFile/ ae35ca/working-with-toast-notification-in%C2%A0windows-phone-7/](http://www.c-sharpcorner.com/UploadFile/ae35ca/working-with-toast-notification-in%C2%A0windows-phone-7/)根据最适合您的要求。

3）您还可以创建一个自定义控件，您可以将其放在 mainPage 的顶部并相应地处理其点击事件。

# symfony - 带有 symfony2 的 Fr3D LDAP BUNDLE

> ID：11928454
> 
> 赞同：2
> 
> 时间：2012-08-13T05:07:01.283
> 
> 标签：symfony, ldap, openldap, fr3dldapbundle

我已经将 FOS BUndle 和 Fr3d Bundle 与 symfony2 集成在一起。这是我遇到的错误

> MappingException：找不到名为“Acme.UserBundle.Entity.User.php”的类“Acme\UserBundle\Entity\User”的映射文件。

这是我的 config.yml

```
fos_user:
    db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
    firewall_name: main
    user_class: Acme\UserBundle\Entity\User

fr3d_ldap:
    client:

    user:
        baseDn: cn=admin, dc=test, dc=local
        filter: (&(ObjectClass=Person))
        attributes:          # Specify ldap attributes mapping [ldap attribute, user object method]

      service:
          user_manager: fos_user.user_manager          # Overrides default user manager
          ldap_manager: acme.ldap.ldap_manager # Overrides default ldap manager 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:24:17.763

在您的`config.yml`中，您需要在...`user_class`下更新您的设置`fos_user`

```
fos_user:
    user_class: YourVendorName\UserBundle\Entity\User 
```

确保该`user_class`属性指向您的用户包中的有效实体（并且显然确保您有一个`UserBundle`）

# fpdf - 如何在 fpdf 中的 MultiCell() 中显示文本？

> ID：11928464
> 
> 赞同：0
> 
> 时间：2012-08-13T05:08:27.590
> 
> 标签：fpdf

我在 FPDF 中遇到问题。我想使用 MultiCell() 来显示文本。我的代码如下：

```
$syarat .='<ol><li>aaa</li>
<li> bbb
<li> ccc</li>
<liddd</li>';

$pdf->SetFont('Arial','',7);
        $pdf->SetX(10);
    $pdf->MultiCell(190,4,$syarat,0); 
```

//但问题是它也显示，

*   标签。如何出现编号而不是 ,*   标签？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:47:44.213

在 FPDF 中不支持 HTML 标签，您必须自己编写。

1）如果你想这样做：你可以尝试使用 HTML->PDF [http://html2pdf.fr/](http://html2pdf.fr/)

2）您可以使用多个单元格请从这个示例中学习 [http://www.fpdf.org/en/script/script3.php](http://www.fpdf.org/en/script/script3.php)

如果您需要示例的帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T16:17:32.920

FPDF 支持 HTML，但您需要使用脚本，例如： http: [//fpdf.org/en/script/script53.php](http://fpdf.org/en/script/script53.php)

这个声称它有`full support for lists <li>`。

要显示数字，您始终可以手动执行此操作，例如：

```
$syarat .='<ul>
     <li>1\. aaa</li>
     <li>2\. bbb
     <li>3\. ccc</li>
     <li>4\. ddd</li>
</ul>'; 
```

[其他脚本在这里](http://fpdf.org/en/script/index.php)可用，但我没有看到另一个支持`<LI>`标签的脚本。

# php - 从数组中删除其他数组中存在的值

> ID：11928471
> 
> 赞同：-3
> 
> 时间：2012-08-13T05:09:37.580
> 
> 标签：php, arrays

我有两个数组。在 PHP 中

```
dir(0=>1,1=>2,2=>3,3=>5,4=>7,5=>8);
list(0=>1,1=>12,2=>18,3=>20,4=>7,5=>8); 
```

结果数组应该是

```
result(0=>2,1=>3,2=>5); 
```

结果数组应包含 list() 数组中不存在的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:44:43.100

```
$diff=array_diff($dir,$lists); 
```

# css - Rails 应用程序中的主题

> ID：11928476
> 
> 赞同：11
> 
> 时间：2012-08-13T05:09:47.423
> 
> 标签：css, ruby-on-rails, templates, styles

我想制作一个 Rails 应用程序，让用户输入数据，然后允许他们更改页面的主题。这样，他们的数据可以根据他们选择的主题进行不同的样式设置。我该怎么做呢？

1.  更改样式表？
2.  具有不同类/元素的两个独立视图？
3.  动态地改变类/ID/选择器？
4.  ?

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T06:03:11.203

为站点设置主题的最简单方法是简单地链接到不同的样式表。您可以使用以下方法动态执行此操作：

```
# in app/views/layouts/application.html.erb
<%= stylesheet_link_tag :application %>
<%= stylesheet_link_tag #{current_theme} %>

# in app/helpers/application_helper
def current_theme
  # You'll have to implement the logic for a user choosing a theme
  # and how to record that in the model.
  # Also, come up with a better name for your default theme, like 'twentyeleven' ;)
  current_user.theme || 'default'
end 
```

然后你可以有几个主题清单。例如，您的资产目录可能如下所示：

*   应用程序/资产/样式表
    *   应用程序.css
    *   按钮.css
    *   主题1/
        *   索引.css
        *   按钮.css
    *   主题2/
        *   索引.css
        *   按钮.css

这将使您开始使用纯 CSS 主题。在某些时候，您可能还想要它们的 javascript 和 html 布局。当您开始发现需要在 html 中执行以下操作时：

```
<% if current_theme == 'theme1' %>
  <li>...
<% elsif current_theme == 'theme2' %>
  <b>...
<% end %> 
```

那么是时候实现一个更强大的主题框架了：

*   按主题命名您的 html 模板（例如 app/views/themes/theme1/users/index.html.erb）并呈现主题版本而不是默认版本
*   命名空间只是模板的部分（例如app/views/themes/theme1/users/_form.html.erb）并添加一个辅助方法，如`render_themed_partial`
*   类似于上述方法，但是当主题变得非常大时，您应该考虑将它们作为 Rails 引擎放入自己的 gem 中

**注意：**这都是针对静态主题的。对于动态主题（例如管理员可以登录和编辑样式表或 html），您必须将主题信息存储在数据库中。根据您的架构，您可以提供一组静态主题，然后提供另一个从数据库中动态获取样式数据的主题。但是，此时您正在开发一个 CMS，因此它超出了此答案的范围：)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-12T04:43:58.183

如果我们为每个主题创建不同的样式表并进行小的更改，那么我们需要在所有样式表中进行相同的更改。真的会很头疼。另一种方法是使用 SASS 概念（mixins）。

添加你的 Gemfile

```
gem 'sass-rails' 
```

然后

```
bundle install 
```

现在您需要在一个 SCSS 文件中包含您的 css 样式。 **basic_styles.scss**

```
$font_color: #565656;
$font-size: 13px;
$success-color: #088A08;
$error-color: #B40404;
@mixin basic_styles($dark_color,$light_color,$bullet_image) 
{
.footer
  {
    background-color: rgba($dark_color,0.9);
    color: $light_color;
    text-align: center;
    position: fixed;
    bottom:0;
    left:0;
    width: 100%;
    height: 15px;
    border-top: 1px solid lighten($dark_color, 9%);     
    padding-left: 10px;
    padding-right: 10px;       
    font-size: $font_size - 2; 
  }
  h3,hr,a,input
  {
    color: $dark_color;
  }
  h3
  {
    margin-top: 2px;
    margin-bottom: 2px;
  }
  hr {
    border-color: lighten($dark_color, 30%) -moz-use-text-color #FFFFFF;
    border-left: 0 none;
    border-right: 0 none;
    border-style: solid none;
    border-width: 1px 0;
  }
  .btn 
  {
    background-color: $dark_color;
    border-color: darken($dark_color, 15%);    
    border-radius: 4px 4px 4px 4px;
    border-style: solid;
    border-width: 1px;
    color: #FFFFFF;
    cursor: pointer;
    display: inline-block;
    line-height: 18px;
    padding: 3px 10px 3px 10px;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.25);
    vertical-align: middle;
  }
  .btn:hover
  {
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.75);
    -moz-box-shadow: 0px 0px 2px 1px lighten($dark_color, 10%);
    -webkit-box-shadow: 0px 0px 2px 1px lighten($dark_color, 10%);
    box-shadow: 0px 0px 2px 1px lighten($dark_color, 10%);
  }
  .success
  {
    color: $success-color;
  }
  .error
  {
    color: $error-color;
  }
} 
```

然后，您可以创建任意数量的主题。例如**Theme_Blue.scss**

```
@import "basic_styles";
$dark_color: #08c;
$light_color: #FFFFFF;
$bullet_image: 'bullet_blue.png';
@include basic_styles($dark_color,$light_color,$bullet_image); 
```

现在在你的 html 中

```
<%= stylesheet_link_tag "Theme_Blue" %> 
```

将使用**basic_styles.scss**中指定的所有 css 类和蓝色。

您可以添加任意数量的主题文件，例如**Theme_Blue.scss**。并更改为

```
<%= stylesheet_link_tag current_user.theme %> 
```

这样，您只需要修改**basic_styles.scss**即可进行任何修改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-30T03:18:01.717

我设法从 Chamnap 的答案中提取了精髓（由于某种原因它不起作用 - 也许是 Rails 的版本？）。

```
class ApplicationController < ActionController::Base
  layout :layout_selector

  def layout_selector
    # puts "*** layout_selector #{session.to_json}"
    name = ['bootstrap', 'mytheme'][session[:theme].to_i] 
    # puts "*** loading theme #{name}"
    prepend_view_path "app/themes/#{name}/views"
    name
  end 
```

你可以在这里阅读它：

*   [http://guides.rubyonrails.org/layouts_and_rendering.html#finding-layouts](http://guides.rubyonrails.org/layouts_and_rendering.html#finding-layouts)
*   [http://apidock.com/rails/AbstractController/Layouts/ClassMethods/layout](http://apidock.com/rails/AbstractController/Layouts/ClassMethods/layout)

您可能必须添加到资产路径和预编译列表（或者使用 gem 而不使用`theme`方法）。

```
 Dir.glob("#{Rails.root}/app/themes/*/assets/*").each do |dir|
    config.assets.paths << dir
  end

  config.assets.precompile += [ Proc.new { |path, fn| fn =~ /app\/themes/ && !%w(.js .css).include?(File.extname(path)) } ]
  config.assets.precompile += Dir["app/themes/*"].map { |path| "#{path.split('/').last}/all.js" }
  config.assets.precompile += Dir["app/themes/*"].map { |path| "#{path.split('/').last}/all.css" } 
```

请记住在具有主题名称的子目录中包含 JS 和图像。它们在服务器上可能是分开的，但对于浏览器和缓存来说，`/images/logo.png`这两个主题看起来是一样的。所以你必须使用`/images/theme1/logo.png`and `/images/theme2/logo.png`。

# c++ - 如果重载的 + 和 = 运算符在以下情况下按值返回，为什么不调用复制构造函数？

> ID：11928479
> 
> 赞同：2
> 
> 时间：2012-08-13T05:10:24.237
> 
> 标签：c++, copy-constructor, assignment-operator

当调用 [abc e = a+b] 时，不会调用复制构造函数。

```
class abc{
        int i;
        public:
        abc()
            {
            i = 10;
            cout<<"constructor"<<endl; 
        }
        abc(const abc &a)
        {   
            cout<<"copy constructor"<<endl;
            i = a.i; 
        }
        abc operator=(const abc &a)
        {
            cout<<"operator="<<endl;
            abc temp;
            temp.i = a.i;
            return temp;
        }
        abc operator+(abc& a)
        {   
            cout <<"Operator+ called"<<endl;
            abc temp;
            temp.i = i+a.i;
            return temp ;
        }
    };

    int main()
    {
        abc a,b;
        cout <<"----------------------------------------------"<<endl;
        a = b;
        cout <<"----------------------------------------------"<<endl;
        abc c = a;
        cout <<"-----------------------------------------------"<<endl;
        abc d(a);
        cout <<"-------------------------------------------"<<endl;
        **abc e = a+b;** 
    } 
```

但是，如果将重载运算符方法替换为以下返回对 abc 类对象的引用的方法，则会调用复制构造函数。

```
abc& operator=(const abc &a)
    {
        cout<<"operator="<<endl;
        i = a.i;
        return *this;
    }
    abc& operator+(const abc& a)
    {   
        cout <<"Operator+ called"<<endl;
        i = i+a.i;
        return *this ;
    } 
```

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:35:45.747

这是由于[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)而发生的。

如果您的构造函数返回引用，则不会进行昂贵的内存复制操作，因此它可以按您预期的方式工作，因为在这种情况下没有进行任何优化。如果它返回一个值，优化就会启动，它会以某种出乎意料的方式工作（对你来说），但标准允许这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:32:34.617

它是标准明确允许的优化。

在 n3376
12.8 第 31 段中：

> 当满足某些条件时，允许实现省略类对象的复制/移动构造，即使为复制/移动操作选择的构造函数和/或对象的析构函数具有副作用。

这种优化可以通过[RVO](http://en.wikipedia.org/wiki/Return_value_optimization)（这种情况）和在某些条件下[NRVO](http://msdn.microsoft.com/en-us/library/ms364057%28v=vs.80%29.aspx)来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:16:37.097

您可以禁用编译器上的优化选项。请检查编译代码时使用的优​​化标志。

# php - Wordpress 插件无法加载其他插件？

> ID：11928480
> 
> 赞同：0
> 
> 时间：2012-08-13T05:10:25.287
> 
> 标签：php, wordpress

这几天我一直在使用这个插件。

[http://wordpress.org/extend/plugins/simple-rss-feeds-widget/](http://wordpress.org/extend/plugins/simple-rss-feeds-widget/)

这是将作为我网站侧边栏中的第一个小部件加载的插件。（我的意思是，在右上角）由于某种原因，如果我提供的 URL 中没有提要（RSS），则其他插件不会被加载。

为了更深入地解释这一点，我设置了 5 个插件，例如 simplee rss feed 小部件、twitter 插件、mail chimp 插件等。如果在获取 RSS feed 时出现任何错误或问题（我的意思是 - rss feed 小部件有问题），其他插件未加载。有什么方法可以检查并显示错误消息并加载所有其他插件？

换句话说，简单 rss 小部件的问题，使其他插件无法工作。即使我的简单 rss 提要小部件失败，是否有任何方法可以加载其他插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:18:19.507

如果您使用最新的 Wordpress 版本，即使它与其他版本一起使用，该插件也可能无法正常工作。正如您从链接中看到的那样，它不是最受欢迎的插件，也没有任何证据表明它可以在最新的 WP 版本中运行。考虑寻找另一个做同样工作的插件。

# ios - Frank iOS 自动化是否允许在真实设备上进行屏幕截图？

> ID：11928481
> 
> 赞同：1
> 
> 时间：2012-08-13T05:10:31.750
> 
> 标签：ios, testing, cucumber, frank

Frank - 用于 iOS 应用程序自动化的 Cucumber 允许用户在测试用例失败的情况下捕获桌面屏幕。这捕获了模拟器的屏幕截图。但是在进行坦率的测试时是否可以捕获真实设备的屏幕截图？

# ruby-on-rails - rails资产管道中的图像无限期加载，但仍然出现

> ID：11928482
> 
> 赞同：1
> 
> 时间：2012-08-13T05:10:33.007
> 
> 标签：ruby-on-rails, asset-pipeline

好的，基本上，我的资产管道中有一个文件（[http://myapp.dev/assets/avatars/default-avatar.jpg](http://myapp.dev/assets/avatars/default-avatar.jpg)）。当我访问 URL 时，图像会加载，但会继续像在传输数据一样（chrome spinner 正在旋转）。如果我在生产而不是开发中访问相同的文件，它就可以正常工作。此外，没有其他文件有这个问题，只是那个 ONE 文件夹中的那个 ONE jpeg。

我不知道这可能是什么。任何人都可以帮忙吗？

编辑：这就是网络活动的样子![网络活动](../Images/5add1fd1e41d4f28966cc106102fbb96.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:29:36.917

我遇到了同样的问题（图像会显示但会继续加载很长一段时间，然后传输最终会失败并且图像会出现损坏）。

正如您在上面的评论中提到的，在 Photoshop 中再次保存图像为我解决了这个问题。一定是图像编码有问题。

# delphi - Datasnap 和 SocketError

> ID：11928483
> 
> 赞同：7
> 
> 时间：2012-08-13T05:10:41.373
> 
> 标签：delphi, delphi-xe2, datasnap

我有一个带有 vcl 表单客户端的数据快照服务器。从客户端，如果服务器已关闭并使用现有客户端连接重新启动，我该如何处理？这种情况会引发 10053 EIdSocketError 异常。

为了复制，我同时运行服务器和客户端，调用服务器（我使用通过 DataSnap 代理生成器公开的方法），它成功了。然后我关闭服务器（例如关闭应用程序）并重新启动它。然后我尝试再次调用服务器。

例如： **客户来电**

```
 sm := TsvrPolicySearchClient.Create(datClientDB.SQLConnection1.DBXConnection);
    try
      ds := sm.SearchPolicyByPolicy(40, WCRef, '', 3);
      dspPolicyGroup.DataSet := ds;

      if cdsPolicyGroup.Active then
        cdsPolicyGroup.Refresh
      else
        cdsPolicyGroup.Open;

    finally
      sm.Free;
    end; 
```

dspPolicyGroup 是 TDataSetProvider 而 cdsPolicyGroup 是 TClientDataSet（我只是在本地使用它来“存储”我的 TDataSet 结果）。

**服务器**

```
function TsvrPolicySearch.SearchPolicyByPolicy(AClientId: Integer; WCRefNum, ClientRef: string; SearchMethod: Integer): TDataSet;
begin
  spPolicyByWCRef.Close;
  spPolicyByWCRef.ParamByName('p_client').AsInteger := AClientId;
  spPolicyByWCRef.ParamByName('p_search_method').AsInteger := SearchMethod;
  spPolicyByWCRef.ParamByName('p_wc_refno').AsString := WCRefNum;
  spPolicyByWCRef.Open;
  Result := spPolicyByWCRef;
end; 
```

我认为人们经常会遇到这种情况，因为它很容易复制。我是否应该在每次调用之前先进行“测试连接”调用或其他东西（例如方法 TestConnection）以检查 EIdSocketError（和等效项）并进行处理？或者它可能更像是一个设计缺陷？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-28T21:16:24.320

我的场景：

*   客户端应用程序连接到 DataSnap 服务器（TCP/IP、远程服务器）
*   客户端请求一个 DataSet（使用 DataSnap 服务器方法）。客户端数据集
*   客户端下载的数据集
*   服务器关闭（taskkill，关闭应用程序无所谓）
*   客户端再次请求数据集（ehhrrr 套接字错误）

解决方案：

*   在客户端我捕获异常 (AppEvents.OnException)
*   识别出连接到 DataSnap 服务器的 Socket 错误
*   我显示对话框窗口，其中包含连接丢失的信息。用户可以点击“重试” - 如果是这样，
    *   释放并重新创建 DataSnap 客户端模块并初始化连接
    *   如果应用程序捕获异常整个过程从头开始工作，请尝试请求数据集（用于连接测试的特殊数据集）。

在此操作之后，我的客户端重新连接到 DataSnap 服务器，并且可以使用新的 TCP/IP 连接请求数据集。当然用户可以关闭对话框，但随后应用程序被关闭。

我认为这可以帮助你。我尝试了许多其他解决方案，但事实证明这是最好的。此外算法还支持与客户端故障的连接丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T16:17:13.387

此问题最简单的解决方法是将 TDSServerClass LifeCycle 属性更改为 Invocation。这将导致您拥有一个无状态服务器，并且服务器将为每个请求创建一个新会话。但是，您将能够在不中断客户端连接的情况下关闭并重新连接服务器。

# javascript - Highcharts 日期时间从错误的日期开始

> ID：11928484
> 
> 赞同：4
> 
> 时间：2012-08-13T05:10:43.893
> 
> 标签：javascript, datetime, highcharts

我有一个 php 将图表输出为 Javascript，它都正确显示，但是，x 轴上的 datetime 函数不是从正确的日期开始的。

我已经设置了这样的图表：

```
xAxis: {
    title:{
        text: 'Day',
        style: {
           color: '#666666',
           fontSize: '12px',
           fontWeight: 'normal'
        }
    },
    type: 'datetime',
    dateTimeLabelFormats: {
        day: '%e.%b'   
    },
    showFirstLabel: false
}, 
```

然后在系列数据级别：

```
series: [{
    name: 'Office', 
    zIndex: '1',
    data: [0, 0, 0, 0, 0, 0, 1.8, 17.67, 17.66, 74.8, 62.45, 71.21, 67.75, 22.28, 16.61, 16.26, 71.79, 72.85, 56.52, 48.68, 47.01, 0, 0, 33.8, 62.72, 40.28, 9.99, 26.06, 8.85, 9.46, ],
    pointStart: Date.UTC(2012, 7, 14),  
    pointInterval: 24 * 3600 * 1000 //one day
}] 
```

因此，这显然设置为每天，并从 2012 年 7 月 14 日开始。但是，当图表显示时，它从今天开始。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T05:21:31.543

尝试

```
pointStart: Date.UTC(2012, 6, 14), 
```

七月 - JS 月份从 0 开始

# height - 车身线自动调整大小的问题

> ID：11928486
> 
> 赞同：0
> 
> 时间：2012-08-13T05:10:54.133
> 
> 标签：height, css

我想让我的身体线基本上是我的容器，高度为：

```
bodyline{
    height:500px;
    min-height:500px;
    height:auto !important;
} 
```

但是当我将它设置为此时，它实际上不起作用。我的页脚位于中间，它弄乱了其中的页脚 div。有没有人有什么建议。也许我把代码弄错了，或者我真的不确定。

例子

[http://jsfiddle.net/zrUSr/](http://jsfiddle.net/zrUSr/)

请帮助某人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:17:35.597

***[现场演示](http://jsfiddle.net/zrUSr/5/embedded/result/)***

`overflow hidden`嘿，现在像这样在你的 CSS 中定义你的 div id

```
#bodyline {
    background-color: #FFFFFF;
    border-radius: 10px 10px 0 0;
    margin: 0 auto;
    min-height: 300px;
    overflow: hidden; // add this line 
   padding-top: 320px; //add this line
    position: relative;
    width: 1000px;
} 

#midSection {
    color: #000000;
    float: left;
    height: auto !important;
    margin: 0 auto;
    min-height: 100px;
    padding-bottom: 50px;
    padding-left: 30px;
    padding-right: 10px;
    position: relative;
    top: 320px; // remove this line
    width: 600px;
} 
```

**[现场演示](http://jsfiddle.net/zrUSr/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:18:37.437

好的，所以我做了上面一些人告诉我的事情。然后发现

```
bodyline{
 min-height:500px;
 height:500px;
height:auto !important;
} 
```

height:auto 没有添加，所以我添加了它，所以查看 jsfiddle [http://jsfiddle.net/jAXp2/](http://jsfiddle.net/jAXp2/)

并找到此代码

```
 /*Add this as many times as you want to*/
 <div id="midSection">
<h2>Updates</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ultricies condimentum velit vel scelerisque. Nam id libero sit amet libero ultrices interdum dignissim nec lorem. Maecenas placerat massa sit amet augue interdum rutrum. Fusce vel lectus arcu. Quisque quis elit et lorem suscipit faucibus a ut odio. Proin ut ante consectetur dui mattis pulvinar non quis neque. Proin ultrices lectus vel orci lacinia a iaculis nibh hendrerit. Mauris sagittis aliquam odio vitae pulvinar. Suspendisse id dolor nibh, sed consectetur sem. Phasellus lacinia laoreet sem, ac ultrices libero lobortis quis. Morbi accumsan tempus neque, sed varius lectus molestie imperdiet. Vivamus porttitor facilisis nunc, sed feugiat quam adipiscing ac. Quisque dolor tellus, porta in ultrices sit amet, luctus sed nunc. Quisque sodales scelerisque orci sed ullamcorper. Nunc nisl arcu, dignissim sed tempor eget, blandit a massa. Praesent ut metus enim, in dictum felis. Integer sagittis ipsum eu mauris lacinia rhoncus. Mauris turpis ligula, dapibus nec rhoncus bibendum, tristique eu nunc. Duis dapibus blandit justo et auctor. Nunc non elit vel diam luctus ullamcorper.

Nulla elementum tristique ultricies. Etiam sit amet felis leo, non imperdiet sapien. Suspendisse venenatis, erat ac mollis sagittis, nulla arcu semper felis, a tempus dolor nibh in est. Nullam. </p>
  </div>
/*Add this as many times as you want to*/ 
```

在它之后添加它多次以查看它的运行情况。

您会看到它可以根据需要扩展身体线条。

# iphone - 数据源方法不在 iOS 4.3 中调用，但在 iOS 5 及更高版本中工作

> ID：11928489
> 
> 赞同：0
> 
> 时间：2012-08-13T05:11:13.147
> 
> 标签：iphone, ios, ios5, ios4, xcode4.2

我有一个 UIViewController 对象 VCobject。在我看来将出现我编写了以下代码的方法。

```
 VCobject = [[GCView alloc] init]; 

    VCobject.dataSource = self;
    VCobject.delegate = self; 
```

数据源方法在 iOS 5.0 和 5.1 中调用。但不是在 iOS 4.3 中调用。我正在使用 Xcode 4.3.2。

任何人有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:29:59.910

iOS 5[改变了`viewWillAppear`调用](http://gamesfromwithin.com/view-controller-notification-changes-on-ios5)方式。为了确保这是一种情况，请在您的`viewWillAppear`方法中设置一个断点。

# database - 根据更好的方法和缺陷改进代码

> ID：11928490
> 
> 赞同：0
> 
> 时间：2012-08-13T05:11:14.877
> 
> 标签：database, plsql, oracle8i

我有以下 PL/SQL 代码，用于调用 API（由客户端提供）以调整帐户。

如果在编写此块时有任何缺点或更好的方法或方法，我想改进我的代码。

PS 不幸的是，我们的客户仍在为他们的产品使用 Oracle 8i。

PLSQL 代码

```
DECLARE
    v_account_id account_adjustments.account_id%TYPE;
    v_adj_no     account_adjustments.adj_no%TYPE;
    v_old_qty    product_warehouse.new_qty%TYPE;
    v_new_qty    product_warehouse.new_qty%TYPE;
BEGIN
    v_old_qty := NULL;
    v_new_qty := NULL;

    FOR acnt IN (SELECT *
                 FROM   temp_table a) LOOP
        SELECT a.new_qty
        INTO   v_old_qty
        FROM   product_warehouse a
        WHERE  ( a.product_no = acnt.product_no );

        Adjust_accounts (in_service_product_no => acnt.product_no,
                         in_service_qty => acnt.qty,
                         out_account_id => v_account_id,
                         out_adj_no => v_adj_no);

        SELECT b.new_qty
        INTO   v_new_qty
        FROM   product_warehouse b
        WHERE  ( b.product_no = acnt.product_no );

        INSERT INTO account_year_todate
                    (product_no,
                     account_id,
                     adj_no,
                     qty_bad,
                     qty_warehouse,
                     qty_factory)
        VALUES      ( acnt.product_no,
                     v_account_id,
                     v_adj_no,
                     acnt.qty,
                     v_old_qty,
                     v_new_qty );
    END LOOP;
EXCEPTION
    WHEN OTHERS THEN
      dbms_output.Put_line ('exceptions '
                            || SQLERRM);

      ROLLBACK;
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:12:39.020

一些要改变的事情：

*   `SELECT *`用您实际需要的列替换For 循环光标。
*   你的异常块就是我所说的无声杀手。这是一个调试噩梦，因为它除了抑制异常之外什么都不做，因为你没有记录它，你没有重新引发它 - 而是只是将所有异常重定向`put_line`到一个缓冲区，它根本不可见，除非你'从始终显示缓冲区输出的 IDE 或通过 SQL*Plus 重新运行程序。将其更改为适当的日志记录系统。
*   我不知道是什么`Adjust_accounts`- 你可能会减少这两个选择语句并使用你调用的存储过程返回金额？

# c++ - CRTP和模板模板？

> ID：11928495
> 
> 赞同：2
> 
> 时间：2012-08-13T05:11:56.723
> 
> 标签：c++, templates, crtp, template-templates

我想为模板类做 CRTP，我希望抽象基类知道派生类的模板参数。

我试过了，但它不起作用：

```
template<template<class T, unsigned int TDIM> class TCRTP> class NAbstract
{
    T _data[TDIM];
};

template<typename T, unsigned int TDIM> class NArray : NAbstract< NArray<T, TDIM> >
{

};

template<typename T, unsigned int TDIM> class NVector : NAbstract< NVector<T, TDIM> >
{

}; 
```

g++ 4.6.2 告诉我：

```
main.cpp|5|error: 'T' does not name a type|
main.cpp|8|error: type/value mismatch at argument 1 in template parameter list for 'template<template<class T, unsigned int TDIM> class TCRTP> class NAbstract'|
main.cpp|8|error:   expected a class template, got 'NArray<T, TDIM>'|
main.cpp|13|error: type/value mismatch at argument 1 in template parameter list for 'template<template<class T, unsigned int TDIM> class TCRTP> class NAbstract'|
main.cpp|13|error:   expected a class template, got 'NVector<T, TDIM>'| 
```

有什么问题，这样的事情有什么好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:47:17.310

下面演示了修复错误后的代码：

```
template<class T, unsigned int TDIM, template<class, unsigned int> class TCRTP>
class NAbstract
{
  T _data[TDIM];
};

template<typename T, unsigned int TDIM>
class NArray : NAbstract< T, TDIM, NArray >
{
};

template<typename T, unsigned int TDIM>
class NVector : NAbstract< T, TDIM, NVector >
{
}; 
```

您不能使用`template template`参数。事实上，编译器只是忽略了它们。
例如，从您的原始代码中，`T`并`TDIM`在下面的行中被忽略：

```
template<template<class T, unsigned int TDIM> class TCRTP> class NAbstract
                       ^^^              ^^^^  // <--- ignored 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:56:39.180

一种解决方案是部分专门化模板：

```
template <typename> struct NAbstract;

template <typename T, unsigned int N>
struct NAbstract<NArray<T, N>>
{
    T _data[N];
    // ...
}; 
```

或者：

```
template <template <typename, unsigned int> class Container,
          typename T, unsigned int N>
struct NAbstract<Container<T, N>>
{
    T _data[N];
    // ...
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:36:47.427

您可以使用特征来完成此操作。然后，您不需要`NAbstract`.

```
template<class TCRTP>
class NAbstract {
    typename TCRTP::value_type data_[TCRTP::DIM];
};

template<typename T, unsigned int TDIM>
struct NTraits {
    typedef T value_type;
    enum { DIM = TDIM };
};

template<typename T, unsigned int TDIM>
struct NArray : NAbstract< NTraits<T, TDIM> > {
};

template<typename T, unsigned int TDIM>
struct NVector : NAbstract< NTraits<T, TDIM> > {
}; 
```

# iphone - 当 insertObject 抛出错误时，如何在索引 0 处添加对象？

> ID：11928503
> 
> 赞同：-1
> 
> 时间：2012-08-13T05:13:27.950
> 
> 标签：iphone, objective-c, nsmutablearray

当第一个索引先前被删除时，我们如何在索引 0 处将对象添加到 NSMutableArray？`insertObject`不工作：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“ *** -[__NSArrayM removeObjectAtIndex:]: index 2 beyond bounds [0 .. 1]”

当屏幕向右移动时，我删除数组的第一个索引（不再可见）并将其添加到右侧。但是如果我想**回到左边，我必须添加之前删除的图像**（现在在索引 2，但图像是相同的，所以如果我只是添加另一个图像并不重要）。`addObject`在数组末尾添加一个对象，insertObject抛出错误...

你知道有什么办法可以解决这个问题吗？

```
linesArray = [[NSMutableArray alloc] initWithObjects:lines1, lines2, lines3, nil];

//left direction : add the object at index 0
if (offsetParam >= offset1){
    CCSprite *temp = [[sprites objectAtIndex:1] retain];
    [sprites removeObjectAtIndex:2];
    [sprites insertObject:temp atIndex:0];//****CRASH HERE****
    temp.position = ccp(-offset1-spriteWidth, temp.position.y);
    [temp release];
    offset1 += spriteWidth;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:21:29.617

如果您仔细阅读该异常

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“* -[__NSArrayM **removeObjectAtIndex:** ]: index 2 beyond bounds [0 .. 1]”

你会看到它实际上是在你提到的那一行之前的一次崩溃。这条线很好：

```
[sprites insertObject:temp atIndex:0];//CRASH HERE**** 
```

它是前一个崩溃的：

```
[sprites removeObjectAtIndex:2]; 
```

看起来您有一个包含 2 个项目（索引 0 和 1）的数组，因此删除索引 2 会崩溃，因为没有索引 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:22:05.077

您之前在线上崩溃了，您尝试在索引 2 处操作对象。错误消息清楚地表明您正在尝试从索引 2 中删除对象。您在代码中执行此操作的唯一位置''ve posted is the line

```
[sprites removeObjectAtIndex:2]; 
```

您的`sprites`数组没有您认为的那么多对象。

您*始终*可以插入到`NSMutableArray`0 的索引中；它适用于空数组或具有任意数量对象的数组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T05:24:45.433

请记住，initWithObjects 是 nil 终止的，这意味着该方法遇到的第一个 nil 将是列表中的最后一个。根据您发布的代码，我的直觉是 lines3 为零，导致您的列表大小为 2，这将导致

```
[sprites removeObjectAtIndex:2]; 
```

因您发布的错误消息而失败。使用调试器检查并验证lines1、lines2 和lines3 不是nil

# magento - Magento - 库存水平的大规模更新失败

> ID：11928504
> 
> 赞同：0
> 
> 时间：2012-08-13T05:13:31.213
> 
> 标签：magento, stocks

我正在尝试将以下代码与最新的 Magento V1.7.1 一起使用：

[http://www.sonassi.com/knowledge-base/magento-kb/mass-update-stock-levels-in-magento-fast/](http://www.sonassi.com/knowledge-base/magento-kb/mass-update-stock-levels-in-magento-fast/)

我从 CSV 文件更新库存数量。

它适用于以下字段：

```
"sku","qty"
"prod1","11" 
```

但是，如果有任何其他字段，它就不起作用。

我试过了：

```
"sku","qty","is_in_stock" 
"prod1","11","1" 
```

然后`qty`被更新，但`is_in_stock`或随后的任何其他字段`qty`都没有被导入到数据库中。

我尝试切换字段并尝试以下操作：

```
"sku","is_in_stock","qty"
"prod1","1","11" 
```

现在`is_in_stock`得到更新，但`qty`没有。

说明说要使用至少两个加上列出的任何附加字段，但它不起作用。

你能分享更新的代码吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:40:08.650

我不知道提到的导入扩展名，但很可能它会[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)像 Magento 一样使用调用来读取 CSV 文件。

该`fgetcsv()`函数默认使用常规 ( `"`, `Shift`+ `2`) 双引号作为包围分隔符。

如果您真的将 CSV 文件中的 CSV 行 1:1 复制到这篇文章中，每行最多包含*三个*不同的附件分隔符 ( )，则没有机会正确返回字段值。`“, ” and "``fgetcsv()`

要解决此问题，只需将 CSV 文件中的所有双引号替换为常规双引号，然后再次保存并导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-22T23:36:48.700

请记住，根据您的操作系统，行尾并不总是相同的。Windows 编辑器有一个讨厌的习惯，即在每一行的末尾添加一个额外的回车（当我用 C++ 为这类工作编写 Linux 解析器时，我很难学到这一点）。最好使用 Notepad++ 之类的工具检查您的 csv，以查看每条记录末尾的内容。

我建议使用 Magmi 进行诸如此类的简单更新。设置需要一些努力（但有非常可靠的文档可以引导您完成整个过程），但是一旦完成，它会快速、稳定并且包含许多额外的插件，您可以使用这些插件来获得更多功能，而不仅仅是库存更新未来。

# iphone - 闪烁/闪烁 UIView

> ID：11928506
> 
> 赞同：0
> 
> 时间：2012-08-13T05:13:50.217
> 
> 标签：iphone, ios, ios5, uiviewanimation

`UIView`我需要在按下按钮或完成任务时给 a 一些拉伸和倾斜动画。

大多数应用到的动画`UIView`通常在它们被添加到或从 a 中删除时应用，`UIView`但是如何使用已经添加到视图的视图来实现这一点。

动画可以是任何东西，只要它能引起用户的注意（表明任务已完成）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:08:46.037

简单的 UIView 动画；暂时扩大观点：

```
[UIView animateWithDuration:0.3 animations:^{
    CGRect frm = view.frame;
    frm.size.width += 20;
    frm.size.height += 20;
    frm.origin.x -= 10;
    frm.origin.y -= 10;
    view.frame = frm;
} completion:^{
    [UIView animateWithDuration:0.3 animations:^{
        CGRect frm = view.frame;
        frm.size.width -= 20;
        frm.size.height -= 20;
        frm.origin.x += 10;
        frm.origin.y += 10;
        view.frame = frm;
    }];
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:38:29.473

**编辑** [如何在单个动画中缩放和旋转视图](https://stackoverflow.com/questions/9341332/how-to-scale-and-rotate-a-view-in-a-single-animation)

您可能需要使用核心动画并将两个动画添加到一个组中：

```
CABasicAnimation *stetchAnimation = [CABasicAnimation animationWithKeyPath:@"transform.scale.x"];
stetchAnimation.toValue = [NSNumber numberWithDouble:(someView.frame.size.width+100)/someView.frame.size.width];

CABasicAnimation *skewAnimation = CABasicAnimation animationWithKeyPath:@"transform.rotation.x"];
stetchAnimation.toValue:[NSNumber numberWithInt:180];

//Add both animation at time when task is completed

CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
animationGroup.animations = [NSArray arrayWithObjects:stetchAnimation,skewAnimation,nil];
animationGroup.removedOnCompletion = YES;
animationGroup.fillMode = kCAFillModeForwards;
animationGroup.duration = 0.7; // increase duration if needed

[someView.layer addAnimation:animationGroup forKey:@"animations"]; 
```

# wordpress - Wordpress 博客帖子网址未重定向到帖子

> ID：11928508
> 
> 赞同：0
> 
> 时间：2012-08-13T05:14:27.857
> 
> 标签：wordpress

我不太确定这是否是发布问题的正确位置，因为它可能不是程序化的事情。我的网站是 windowsvj.com 的博客，有一些奇怪的错误。当我点击任何帖子网址时，它会说

在此服务器上找不到请求的 URL /wpblog/2012/07/resolve-cisco-anyconnect-vpn-client-error-on-windows-8/。此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

谁能提出一定是错的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:30:09.437

似乎这是 SEF 网址问题。在仪表板的设置下，查看永久链接选项。

此外，玩`.htaccess`可能会导致问题。

# actionscript-3 - AS3：从对象中挑选颜色

> ID：11928509
> 
> 赞同：0
> 
> 时间：2012-08-13T05:14:29.727
> 
> 标签：actionscript-3, colortransform

我制作了一些对象并用`Color Transform`. 这是我的代码：

```
function createColorItems():void
{
    for (var i:int = 0; i < colorLength; i++)
    {
        var myColor:Object = new colorArea  ;
        var colorTrans:ColorTransform = new ColorTransform  ;
        arrColorTrans[i] = myXML.bag.color.item[i];
        arrItem.push(myColor);
        arrItem[i].x = 40 * i + 40;
        arrItem[i].y = 300;
        addChild(arrItem[i]);
        colorTrans.color = Number(arrColorTrans[i]);
        arrItem[i].transform.colorTransform = colorTrans;
        arrItem[i].addEventListener(MouseEvent.CLICK,changeColor);
    }
} 
```

这是我改变颜色的地方。

```
function changeColor():void
{
    trace(e.target.color);
    myBox.graphics.beginFill(0x000000,0.5);
    myBox.graphics.drawRect(myImg.x,myImg.y,bagImg.width,bagImg.height);
    myBox.graphics.endFill();
    myBox.transform.colorTransform = publicColor;
    addChild(myBox);
} 
```

我想要的是当单击对象时，另一个对象的颜色会发生变化。我追踪它，`trace(e.target.color)`但它是错误的。我`publicColor`习惯从 中挑选颜色`colorTrans`，但我不知道如何挑选颜色？可能吗？？

对不起，我的语法不好，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:35:47.490

您可以使用`getPixel`BitmapData 的方法。[这](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#getPixel%28%29)是一个文档。使用示例：

```
import flash.events.MouseEvent;
import flash.display.DisplayObject;
import flash.display.BitmapData;
import flash.display.Bitmap;
import flash.geom.Matrix;
import flash.display.Sprite;

var s0:Sprite = new Sprite();
var s1:Sprite = new Sprite();
var testS:Sprite = new Sprite();
var bmd:BitmapData = new BitmapData(1,1);

s0.graphics.beginFill(0x010FFF);
s0.graphics.drawRect(0, 0, 100, 100);
s0.graphics.endFill();
s0.x = 200;
s0.y = 200;

s1.graphics.beginFill(0x555FFF);
s1.graphics.drawRect(0, 0, 100, 100);
s1.graphics.endFill();
s1.x = 300;
s1.y = 200;

addChild(s0);
addChild(s1);
addChild(testS);
addEventListener(MouseEvent.CLICK, clickHandler);

function clickHandler(event:MouseEvent):void{
    const clicked:DisplayObject = event.target as DisplayObject;

    bmd.fillRect(bmd.rect, 0x000000);
    bmd.draw(clicked, new Matrix(1, 0, 0, 1, clicked.x - mouseX, clicked.y - mouseY));

    const color:uint = bmd.getPixel(0, 0);
    testS.graphics.beginFill(color);
    testS.graphics.drawRect(0, 0, 100, 100);
    testS.graphics.endFill();

    trace("color:" + color);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:37:07.720

```
BitmapData.getPixel(x:int, y:int):uint 
```

或者

```
BitmapData.getPixel32(x:int, y:int):uint 
```

返回包含 Alpha 通道数据和 RGB 数据的 ARGB 颜色值。

# objective-c - 使用 Google 路线 API 显示行车路线

> ID：11928510
> 
> 赞同：0
> 
> 时间：2012-08-13T05:14:38.090
> 
> 标签：objective-c, mapkit, google-directions-api

在我的应用程序中，我正在创建从源到目的地的路线，并使用谷歌方向 api，在文本框中也显示行车路线。我正在解析 json 格式的方向响应并显示 html 指令。问题是假设我在 A 位置并且在 B 位置有一个转弯，那么当我到达 B 而不是在那之前，我在 B 位置获得相关的 html 指令。

我用来显示方向的逻辑是：

```
1\. Parse the json response and store the html instructions and their relevant coordinates   in a array
2\. Checking the current updated location
3\. Checking whether the current updated location value is present in the array, if present then displaying the html instruction corresponding to the coordinate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:41:34.523

我通过计算当前更新位置和结束位置之间的距离解决了这个问题，如果这两个坐标之间的距离小于 100 米，那么我将显示该坐标的 html 指令。

您可以使用以下代码计算两个坐标之间的距离：

```
CLLocation *currentLoc = [[CLLocation alloc] initWithLatitude:startLat longitude:startLong]
CLLocation *endLoc = [[CLLocation alloc] initWithLatitude:endLat longitude:endLong];
CLLocationDistance meters = [endLoc distanceFromLocation:currentLoc]; 
```

# ruby-on-rails-3 - RoR：当语法似乎正确时，为什么我的迁移失败。

> ID：11928513
> 
> 赞同：0
> 
> 时间：2012-08-13T05:15:00.870
> 
> 标签：ruby-on-rails-3

```
alex@alex-ThinkPad-T410:~/rails_projects/final$ rake db:migrate
rake aborted!
/home/alex/rails_projects/final/db/migrate/20120813025503_add_price_location_and_product_to_microposts.rb:3: syntax error, unexpected ':', expecting ';' or '\n'
    add_column :microposts, :price, :text # d...
                ^
/home/alex/rails_projects/final/db/migrate/20120813025503_add_price_location_and_product_to_microposts.rb:3: syntax error, unexpected ',', expecting tCOLON2 or '[' or '.'
...add_column :microposts, :price, :text # dont forget to chang...
...                               ^
/home/alex/rails_projects/final/db/migrate/20120813025503_add_price_location_and_product_to_microposts.rb:7: syntax error, unexpected keyword_end, expecting $end 
```

这就是错误。这是迁移（下）

```
class AddPriceLocationAndProductToMicroposts < ActiveRecord::Migration
  def 
    add_column :microposts, :price, :text 
    add_column :microposts, :location, :text
    add_column :microposts, :product, :text
  end
end 
```

我是考虑到这一点而写的[http://guides.rubyonrails.org/migrations.html#chang-migrations](http://guides.rubyonrails.org/migrations.html#changing-migrations)教派。2.2

为什么要分号？我正在尝试将价格、位置、产品列添加到 microposts 表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:17:19.587

您必须在前面写上方法名称`def`

即更改`def`为`def change`

```
class AddPriceLocationAndProductToMicroposts < ActiveRecord::Migration
  def change
    add_column :microposts, :price, :text 
    add_column :microposts, :location, :text
    add_column :microposts, :product, :text
  end
end 
```

# sql - 当我使用“Like”运算符时，Access 数据库挂起？

> ID：11928514
> 
> 赞同：0
> 
> 时间：2012-08-13T05:15:03.630
> 
> 标签：sql, ms-access, ms-access-2010

当我使用 Like 时，访问卡住

```
SELECT ox.*, '+++++++++++' AS judo, sh2.*
FROM OXUS AS ox INNER JOIN Sheet2 AS sh2 ON sh2.ID_P LIKE "*" & ox.ID_P; 
```

如果我使用

```
SELECT ox.*, '+++++++++++' AS judo, sh2.*
FROM OXUS AS ox INNER JOIN Sheet2 AS sh2 ON sh2.ID_P=ox.ID_P; 
```

立即打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:27:50.063

在这种情况下，您可以使用隐式连接，即 WHERE：

```
SELECT DISTINCT ox.P_ID, '+++++++++++' AS judo, sh2.P_ID
FROM OXUS AS ox, Sheet2 AS sh2
WHERE Instr(sh2.P_ID, ox.P_ID)>0 
```

但是，它仅对查找行有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:33:42.670

第一条语句是基于匹配 id 的表之间的直接连接。我怀疑也涉及一个索引。第二个语句是基于使用通配符来检查连接到 ID 上的所有内容（！）来连接表。它也可以根据类型从 int 转换为 varchar .... 全部不使用索引。

Like 语句的成本总是更高，因为它们必须单独检查特定匹配的列内容。不建议将它们用作连接的一部分。

我认为这是对真正问题的削减，因为类似的陈述没有意义。

你想达到什么目的？

# mysql - ubuntu中mysql中的存储过程

> ID：11928516
> 
> 赞同：0
> 
> 时间：2012-08-13T05:15:21.600
> 
> 标签：mysql, linux

我在 Window-7 的 MySQL 中创建了存储过程。它在 Windows 上成功运行。但是当我切换到 Ubuntu 时，它会在存储过程中出现错误。在 Windows 上，我使用 SQLyog 创建存储过程。在 Ubuntu 上，我运行 SQL 脚本并调用该存储过程，但它给出了错误。下面是我的存储过程。

```
DELIMITER $$

USE `adserver`$$

DROP PROCEDURE IF EXISTS `getDaypartTimeDetail`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `getDaypartTimeDetail`
(currentDate DATE,noOfdays INT,cityId BIGINT)
BEGIN

DECLARE i INT;
DECLARE dateCnt INT;
SET dateCnt = 0;

DROP TEMPORARY TABLE IF EXISTS OnlyDate;
DROP TEMPORARY TABLE IF EXISTS AdvScheduleData;
CREATE TEMPORARY TABLE OnlyDate(dday DATE); 
CREATE TEMPORARY TABLE AdvScheduleData(dday BIGINT,daypartId INT,totalFile BIGINT,totalDur BIGINT); 

/* Generate Dates */
WHILE(dateCnt < noOfdays) DO
    SET i = 1;
    INSERT INTO OnlyDate(dday) VALUES (DATE_ADD(currentDate, INTERVAL dateCnt DAY));
SET dateCnt = dateCnt + 1;
END WHILE;

/* Insert all dayparts for all dates */ 
INSERT INTO AdvScheduleData (dday, daypartID) SELECT (UNIX_TIMESTAMP(dday)*1000), id FROM OnlyDate, daypart;
/* Update total files and duration */       
UPDATE AdvScheduleData SET 
    TotalFile =    (SELECT COUNT(advt_id) 
            FROM adv_schedule AdvSch
            INNER JOIN advertisement Adv ON Adv.id = AdvSch.advt_id
              WHERE AdvScheduleData.dday BETWEEN AdvSch.start_date AND AdvSch.end_date
              AND AdvSch.status = 2
              AND AdvSch.active = 1
              AND AdvSch.id IN (SELECT schedule_id FROM schedule_daypart 
               WHERE daypart_id = AdvScheduleData.daypartId )
              AND AdvSch.id IN (SELECT schedule_id FROM schedule_cities WHERE city_id = cityId)
              AND Adv.is_active = 1 
              AND Adv.is_deleted = 0
              AND Adv.status = 2 
              AND Adv.expiry_date >= AdvScheduleData.dday),
    totalDur =    (SELECT SUM(Adv.duration)
            FROM adv_schedule AdvSch
            INNER JOIN advertisement Adv ON Adv.id = ADVSCH.advt_id
              WHERE AdvScheduleData.dday BETWEEN AdvSch.start_date AND AdvSch.end_date
              AND AdvSch.status = 2
              AND AdvSch.active = 1
              AND AdvSch.id IN (SELECT schedule_id FROM schedule_daypart 
               WHERE daypart_id = AdvScheduleData.daypartId )
              AND AdvSch.id IN (SELECT schedule_id FROM schedule_cities WHERE city_id = cityId)
              AND Adv.is_active = 1 
              AND Adv.is_deleted = 0
              AND Adv.status = 2 
              AND Adv.expiry_date >= AdvScheduleData.dday);
SELECT * FROM AdvScheduleData;
END$$

DELIMITER ; 
```

我在 Ubuntu 中得到的输出是

> mysql> 调用 getDaypartTimeDetail('2012-08-13',5,30534); 错误 1054 (42S22)：“on 子句”中的未知列“ADVSCH.advt_id”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:02:38.130

表名和别名在 Ubuntu 中区分大小写。

因此，这个参考给出了一个错误：

```
totalDur =    (SELECT SUM(Adv.duration)
        FROM adv_schedule AdvSch
        INNER JOIN advertisement Adv ON Adv.id = ADVSCH.advt_id 
```

将其更改为`AdvSch.advt_id`

# php - php。建立一个下拉菜单。传递对象数组很草率我该如何简化

> ID：11928520
> 
> 赞同：0
> 
> 时间：2012-08-13T05:15:54.283
> 
> 标签：php

我试图掌握 OOP，我决定建立一个访问 sql 数据库的站点。到目前为止效果很好，我有几张桌子，但我遇到了障碍

我访问数据库并创建一个对象数组

```
$Dog_array = $sth->fetchAll(PDO::FETCH_CLASS, 'Dog'); 
```

简化了，但我的课看起来像这样。

```
class Dog {
     private $name;

     function get_name {
     return $this->name;
    } 
```

建立我的桌子的清单

```
function edit_table($Dog) {

echo "<table><tr><form action='update.php' method ='post'>";
echo "<input type='hidden' name='id' value='" . $id ."'>";

echo "<td>". $Dog->get_id() ."</td>";
?>
<td><input type='text' name='rname' value="<?php echo $Dog->get_rname(); ?>"></td>
<td><input type='text' name='cname' value="<?php echo $Dog->get_cname(); ?>"></td>
<td><input type='text' name='dob' value="<?php echo $Dog->get_dob(); ?>"></td>
<td><input type='radio' name='gender' value='male' <?PHP if($Dog->get_gender() == 'male'){ echo "checked=\"checked\""; } ?> /> Male
<input type='radio' name='gender' value='female' <?PHP if($Dog->get_gender() == 'female'){ echo "checked=\"checked\""; } ?> />Female</td>
<td><input type='text' name='sire' value="<?PHP echo "builddropdown" ?> "></td>
<td><input type='text' name='dam' value="<?PHP drop_menu() ?>"></td>
<?php

if ($Dog->get_available()) {
    $checked = "checked=\"checked\"";
} else {
    $checked = NULL;
echo "<td><input type=\"checkbox\"" . $checked . "name=\"available\" value=\"TRUE\"/></td>";

if ($Dog->get_display()) {
    $checked = "checked=\"checked\"";
} else {
    $checked = NULL;
}
echo "<td><input type=\"checkbox\"" . $checked . "name=\"display\" value=\"TRUE\"/></td></tr></table>";
?>
<input type='submit' value='change image'/></form>
<FORM METHOD="LINK" ACTION="upload.php">
<INPUT TYPE="submit" VALUE="Change Image Thumb">
</FORM>
<input type='submit' value='change image'/></form>
<FORM METHOD="LINK" ACTION="upload.php">
<INPUT TYPE="submit" VALUE="Change Image Thumb">
</FORM>
    <?php
    }
?>
<input type='submit' value='update'/></form>
<FORM METHOD="LINK" ACTION="index.php">
<INPUT TYPE="submit" VALUE="Back">
</FORM>
<?php 
}

?> 
```

我的下拉

```
function drop_menu() {

?>
<form name ="dropdown">
<select ="alldogs">
<?php
        foreach ($Dog_array as $Dogs) { 
        ?>
        <option value="<?php echo $Dogs->get_id() . "\">" . $Dogs->get_rname();   ?></option>
<?php } ?>
</select>
</form>
<? } 
```

我的下拉菜单创建了所有狗的列表。

我收到为 foreach 提供的错误参数无效

我明白为什么我得到错误我只是不知道如何清理它所以我不必将我的 Object 数组传递给我的 edit_table 函数，这样我就可以将它传递给下拉函数。我考虑过创建一个子类，但菜单是由一组对象而不是一个对象构建的，所以我也不知道如何使这项工作。论坛发帖的新手，所以请随意推荐一些关于我如何寻求帮助的更正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:05:10.333

这是arrage $Dog_array 范围的问题。您需要将 $Dog_array 传递给 drop_menu 函数。

```
<?php
function drop_menu($Dog_array) {

?>
<form name ="dropdown">
<select ="alldogs">
<?php
foreach ($Dog_array as $Dogs) { 
?>
<option value="<?php echo $Dogs->get_id() . "\">" . $Dogs->get_rname();   ?>></option>
<?php } ?>
</select>
</form>
<? } 
```

并且每当您需要调用该函数时，请正常传递数组。

您也可以通过引用传递

```
<?php
function drop_menu(&$Dog_array) {?> 
```

在这种情况下，对函数内部数组的任何操作都会直接影响原始数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T07:22:40.610

```
function dropdown( $name, array $options, $selected=null )
{

    //array_push($options, "");

    /*** begin the select ***/

    //<select name="dropdownarray" id="dropdownarray">
    $dropdown = '<select name="'.$name.'" id="'.$name.'">';
    $selected = $selected;
    /*** loop over the options ***/

      echo  "<b>$name : </b>";  // Title

     $dropdown .= '<option value=></option>'."\n"; //empty data

    foreach( $options as $key=>$option )
    {
        /*** assign a selected value ***/
        $select = $selected==$key ? ' selected' : null;

        /*** add each option to the dropdown ***/
        $dropdown .= '<option value="'.$key.'"'.$select.'>'.$option.'</option>'."\n";
    }

    /*** close the select ***/
    $dropdown .= '</select>'."\n";

    /*** and return the completed dropdown ***/
    return $dropdown;
}

enter code here 
```

# php - 使用 ALL(ALL) = ALL 离开 apache 时有哪些注意事项？

> ID：11928521
> 
> 赞同：0
> 
> 时间：2012-08-13T05:16:04.377
> 
> 标签：php, apache, security, sudo

我正在创建一个 Web 应用程序 (php)，用于处理在实时服务器上创建 Drupal 站点。

该系统能够创建新站点并对现有站点进行一些维护。而且，由于这是一个网络托管环境，每个文件夹可能属于不同的用户。

为了正确地做到这一点，我需要让`apache`用户像其他用户一样运行一些命令。

我为创建新文件（并与`git`/ `drush`/etc 交互）所做的事情类似于：

```
$some_command = `echo "PASSWD" | sudo -u USER -S do_something 2>&1; echo $?;`; 
```

我已经在`sudoers`文件上有一组命令，`apache`用户可以作为`git`用户运行。

我现在的问题是我需要让`apache`任何可能在服务器上拥有托管帐户的用户运行。

我的想法是在文件上创建一个`apache ALL=(ALL) ALL`条目。`sudoers`我仍然会留下所有要求用户密码的命令。

考虑到这一点，采用这种方法是否明智？如果没有，也许我可以将“全部允许”策略仅应用于拥有托管帐户的用户。如果是这样，我如何将政策范围缩小到一*组*？

谢谢

* * *

**编辑：**我虽然为此使用**[suPHP](http://www.suphp.org/Home.html)**，因为它允许 apache 作为其所有者运行每个 PHP 脚本。但是我仍然需要以另一个用户身份运行一些其他命令（如在别人的主文件夹/public_html 中创建文件），所以它似乎不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:50:29.863

根据我们在评论中的讨论，我建议安装类似`suPHP`这样的东西，以便您的每个用户的脚本都归其实际用户所有，而不是 Apache。

我认为您遇到此问题是（可能）因为您希望能够从 Web 界面执行其他用户网站的管理功能。如果您有一个像`apache`其他用户一样可以运行脚本的通用用户，那么允许该用户自动`sudo`许可是一个坏主意，因为它很容易被利用来获得未经授权的访问。

为了解决这个问题，请确保您以具有修改其他人文件的权限的特殊管理员用户身份运行您的管理功能。还要确保`chown`您以适当的用户身份创建的任何文件，以便他们可以读/写它们。只要没有其他用户可以访问该管理员帐户或以他们的身份运行 PHP 脚本，您应该会更安全。

如果您从控制台运行管理功能，那么它应该更容易，否则只需设置一个 suPHP 用户来从 Web 运行您的主功能并使用良好的帐户凭据。

做这样的事情会更安全，并且应该允许你做你需要的一切，而不会打开不必要的东西。

# php - 为什么当用户设置是私有的（如位置等）时我无法获取数据。（Facebook PHP SDK）

> ID：11928522
> 
> 赞同：-2
> 
> 时间：2012-08-13T05:16:09.187
> 
> 标签：php, facebook, codeigniter

首先对这个愚蠢的问题感到抱歉，我正在尝试从 facebook 获取数据。我已经为我的网站设置了 facebook 应用程序，正在获取数据，但是当我将位置（Facebook 信息）设置为私有时，返回的数据不包含位置数据。

这是模型

```
class Facebook_model extends CI_Model {

public function __construct()
{
    parent::__construct();

    $config = array(
                    'appId'  => 'APP_ID',
                    'secret' => 'SECRET',
                    'fileUpload' => true, 
                    );

    $this->load->library('Facebook', $config);

    $user = $this->facebook->getUser();
    $profile = null;
    if($user)
    {
        try
        {
            $profile = $this->facebook->api("/me", 'get');
        }catch(FacebookApiException $e)
        {
            error_log($e);
            $user = null;
        }
    }

    $fb_data = array(
        'me' => $profile,
        'uid' => $user,
        'loginUrl' => $this->facebook->getLoginUrl(
            array(
                    'scope' => 'email,publish_stream,user_about_me,user_checkins,publish_stream,friends_about_me',
                    'redirect_uri' => base_url() . 'index.php/welcome/topsecret/'
                )
            ), 
        'logoutUrl' => $this->facebook->getLogoutUrl()  
    );

    $this->session->set_userdata('fb_data', $fb_data);

      } 
```

这是我的虚拟帐户的输出，即隐私设置为公开

```
 Array
(
   [me] => Array
     (
        [id] => 100004160084328
        [name] => Dave Batista
        [first_name] => Dave
        [last_name] => Batista
        [link] => http://www.facebook.com/dave.batista.355
        [username] => dave.batista.355
        [birthday] => 08/03/1991
        [hometown] => Array
            (
                [id] => 106050279435951
                [name] => Quezon City, Philippines
            )

        [location] => Array
            (
                [id] => 106050279435951
                [name] => Quezon City, Philippines
            )

        [gender] => male
        [email] => davebatista@gmail.com
        [timezone] => 8
        [locale] => en_GB
        [updated_time] => 2012-08-12T23:38:18+0000
    )

[uid] => 100004160084328
[loginUrl] => https://www.facebook.com/dialog/oauth?       client_id=266349843476112&redirect_uri=http%3A%2F%2Fpractice.com%2Findex.php%2Fwelcome%2Ftopsecret%2F&state=5d41b131b2d1e631e721cd0f6a1056aa&scope=email%2Cpublish_stream%2Cuser_about_me%2Cuser_checkins%2Cpublish_stream%2Cfriends_about_me
[logoutUrl] => https://www.facebook.com/logout.php?next=http%3A%2F%2Fpractice.com%2Findex.php%2Fwelcome%2Ftopsecret%2F&access_token=AAADyPmfObpABABJKZCZBdAXy3iPJyu4qRFEAPI8XpWS94iFZAtvnnMDkzb8yBjgQQQ8oe2O38g9QzqN834jA9axvTT0RkulRBtNItTOIAZDZD
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:51:04.103

1.  在 facebook 应用程序中为 user_location 获取用户和朋友权限
2.  利用

    $param = array('scope' =>'email,user_location,user_birthday,offline_access', 'redirect_uri' => base_url() ); 重定向($this->fb_connect->getLoginUrl($param));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:25:02.783

尝试将“user_location”添加到您的 $fb_data['loginUrl']['scope']。以下是您可以在 FB API 中使用的所有权限的列表：[https ://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

# maven - 我在编译项目时收到“缺少工件 groupId:artifactId:version:lifecycle”

> ID：11928529
> 
> 赞同：1
> 
> 时间：2012-08-13T05:17:33.180
> 
> 标签：maven, pom.xml, artifacts

我在编译我在 maven 中制作的公司项目时遇到问题`Missing artifact groupId:artifactId:version:lifecycle`，所以我已经解决了 jar 的大部分构建路径依赖项，但现在我被 .m2 存储库中不存在的这个 jar 卡住了，所以我的怀疑 jar 是否在 pom.xml 中配置为依赖项，并且它不在本地存储库 (.m2/repository) 中。

maven 不能通过单击 pom.xml->run as -> maven build 从中央 maven 存储库获取它，还是我必须手动将此文件放入本地存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:22:38.033

确实，如果本地存储库中不存在依赖项，它将从 maven 中央存储库下载。但是，如果中央存储库中不存在特定于项目的依赖项，则必须显式指定存在依赖项的存储库。

您可以搜索[Maven 中央存储库](http://search.maven.org/#search%7Cga%7C1%7C)以查看您想要的工件是否存在于此处。

如果它不存在，您可以使用`<repositories>`标记添加包含所需工件的存储库。

```
<repositories>  
    <respository> 
       <id>myRepository</id>   
       <url>my.repo.link</url>
    <repository>
</repositories> 
```

# scala - 如何检查演员是否在 Scala 应用程序中运行？

> ID：11928532
> 
> 赞同：1
> 
> 时间：2012-08-13T05:17:44.033
> 
> 标签：scala, actor

假设我有一个正在运行的带有演员的 Scala 应用程序。我怀疑一个演员不起作用，即它要么退出，要么“卡住”，要么循环运行。

现在我想知道演员到底发生了什么。Scala 中是否有任何方法可以从应用程序外部检查参与者/他们的邮箱，例如使用`JMX`？

我猜如果演员因为未捕获`Throwable`而退出，Scala 演员库总是将其写入日志。这是对的吗？我还可以使用 JVM 线程转储检查参与者是否被卡住。

我还能用什么来检查我的演员是否正在跑步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:14:59.420

您可以调用该`getState`方法。

# javascript - 通过 facebook 应用在页面上创建相册，但只有页面管理员可以看到该相册

> ID：11928533
> 
> 赞同：0
> 
> 时间：2012-08-13T05:18:13.347
> 
> 标签：javascript, facebook

我必须每周在我的粉丝页面墙上发布一份定期的每周报告，所以我创建了一个 Facebook 应用程序来自动完成。问题是，我可以创建相册并成功添加一些照片，但**只有页面管理员才能看到相册**。我通过facebook tools/explorer查看专辑信息，专辑隐私是**每个人**的，所以我不知道怎么会这样！我需要你的帮助，感谢你的帮助。

**专辑网址**： [https ://www.facebook.com/media/set/?set=a.394051570657835.95561.196520877077573&type=3](https://www.facebook.com/media/set/?set=a.394051570657835.95561.196520877077573&type=3)

**facebook tools explorer 上的专辑信息：http:** [//base.pokey.cc/pokey/picture/fb_info.jpg](http://base.pokey.cc/pokey/picture/fb_info.jpg)

**粉丝专页网址：** www.facebook.com/RightPet.cc

* * *

**这是我创建相册的 javascript 代码：**

```
var args = {};
args.access_token = 'PAGE_TOKEN',
args.name = 'Album_name...',
args.type = 'album',
args.message = 'Album description...',
FB.api('/'+PAGE_ID+'/albums', 'post', args, function(response) {
    if (!response || response.error) {
        alert(response.error.message);
    } else {
        window.open('url.php','_blank');
    }
}); 
```

* * *

**这是我将照片添加到相册的 php 代码：**

```
$facebook->setFileUploadSupport(true);
$args = array('access_token' => 'PAGE_TOKEN';
$args['source'] = "@" . "PHOTO_ROOT";
$args['message'] = "Photo message..."; 
```

最好的问候， Pokey

# java - Websphere 7.X。JMX，如何启用 JConsole 中的所有操作？

> ID：11928535
> 
> 赞同：2
> 
> 时间：2012-08-13T05:18:41.383
> 
> 标签：java, websphere, jmx, websphere-7

当我打开 JConsole（使用配置的 .bat 文件）时，在*AppManagement* Mbean 节点内我看到许多操作。但是大多数都被禁用了，只启用了一个-“MoveModule”操作。如何启用*AppManagement* Mbean节点下的所有JMX操作（如“安装应用程序”、重新部署、卸载等）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:49:00.323

这是不可能的。JConsole 允许调用仅具有简单类型参数的方法。这包括原始类型、原始类型和字符串的包装类。不能调用具有其他类型参数的方法，因为 JConsole 不知道如何构造这些类型的实例。

# gwt - 如何动态设置 GWT DataGrid 样式

> ID：11928537
> 
> 赞同：2
> 
> 时间：2012-08-13T05:19:13.333
> 
> 标签：gwt, datagrid, themes, clientbundle

我在我们的 GWT 应用程序中实现了多个主题。

问题是在构建 DataGrid 时，我找不到更改已传递给它的样式资源的方法。有谁知道如何解决这个问题。还是在每次主题更改时，我们都必须重建网格？

任何其他解决问题的新想法（在这些小部件上有多个主题）都值得赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T09:42:05.127

我能够使用 -

cellTable.setRowStyles(new RowStyles>() {

```
 @Override
        public String getStyleNames(Map<String, String> row, int rowIndex) {
            if (rowIndex % 2 == 0) {
                return "cellTableEvenRow";
            } else {
                return "cellTableOddRow";
            }
        }
    }); 
```

因为，我必须为用户提供 3 个颜色主题，所以我为每种颜色使用了 3 个样式表，并在每个样式表中使用不同颜色指定了以下样式。

```
.cellTableEvenRow {
    background: #fffff !important;
}
.cellTableOddRow {
    background: #E9FDE4 !important;
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:59:28.950

你可以使用 uibinder。

在这个页面

[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Programmatic_access](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Programmatic_access)，

搜索部分

以编程方式访问内联样式

但是，您需要熟悉 uibinder。

# java - 本机 ios 应用程序中的会话操作

> ID：11928538
> 
> 赞同：1
> 
> 时间：2012-08-13T05:19:17.953
> 
> 标签：java, ios, session, servlets

我正在为**本地 ios 应用程序开发 servlet。** 现在我将一些东西放在会话中以便稍后检索，只要我们在 pc 浏览器中运行该网站，这个东西现在工作得很好，但我担心的是，因为pc浏览器总是在后台**的每个请求中传递会话ID**来完成响应（使用标头和特殊键），如何在ios本机应用程序中实现，我的意思是我将在创建会话时发送sessionId该应用程序将告诉 ios 开发人员在发送请求时发送该**密钥（sessionId）** ，并在服务器中获取与该**sessionId关联的确切数据。**

那么是否有可能实现这一点，或者我必须更改服务器代码（我根本不想要...... **;（**）......

请对此有所了解......谢谢......提前...... Ankur

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:35:12.137

我知道您可以使用 HTTP Cookie 来做到这一点。即在服务器端存储一个 cookie 并使用 ASIHTTP/AFNetworking 框架检索它，

仅供参考 -[带有 Cookie 的 Objective-C 异步 Web 请求](https://stackoverflow.com/questions/704985/objective-c-asynchronous-web-request-with-cookies)

仅供参考-http: [//brainwashinc.wordpress.com/2009/12/16/http-cookie-support-iphone/](http://brainwashinc.wordpress.com/2009/12/16/http-cookie-support-iphone/)

对于 httpsession id，您可以使用 javascript 检索它。使用以下代码。

将以下内容存储为 session.js 并将其添加到 iOS 应用程序中的资产中。

```
<script type = "text/javascript">
function GetSession()

{
var SessionID = "<%=Session.SessionID%>";

alert(SessionID);
return SessionID;
}

</script> 
```

用于从资源加载 js - 从资源[加载 javascript 到 UIWebView](https://stackoverflow.com/questions/5733883/loading-javascript-into-a-uiwebview-from-resources)

如果需要，您可以在 webview 中加载 javascript 并将其作为参数发送到您的服务器的另一个请求。

我认为这是解决您的问题的一种可能方法。除非有保持活动连接，否则我不知道是否有任何 HTTPSession 方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:50:11.227

iOS 应用程序应该自动处理您的 cookie，假设它使用`NSURLConnection`. 它不需要任何特殊的代码来处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T10:39:09.730

ASIHttpRequest 会自动为您管理它。看到这个，

[请求 setUseSessionPersistence:YES];

在[这个链接](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

# dojo - 在道场中创建行

> ID：11928539
> 
> 赞同：0
> 
> 时间：2012-08-13T05:19:18.590
> 
> 标签：dojo

我想在道场中显示表格。该表将有多行，每行将有三列。该单元格将具有用于填充数据的文本框。如何使用 DOJO 实现此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:57:50.577

dojo.create("TR",{ style:"whatever" },myTBodyNode);

# android - 将当前用户的经纬度转换为 TextToSpeech

> ID：11928541
> 
> 赞同：0
> 
> 时间：2012-08-13T05:19:36.047
> 
> 标签：android, gps, text-to-speech

我有一个用于查找当前位置的代码。然后我在代码中初始化 TextToSpeech。但我无法将当前位置文本转换为语音。如何在 TextToSpeech 中插入我当前位置的纬度、经度。

我的代码：

```
public class SpeakActivity extends Activity implements OnInitListener{
         private TextToSpeech tts;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_speak);   

        LocationManager locationManager; 
        String context = Context.LOCATION_SERVICE; 
        locationManager = (LocationManager)getSystemService(context); 

        Criteria crta = new Criteria(); 
        crta.setAccuracy(Criteria.ACCURACY_FINE); 
        crta.setAltitudeRequired(false); 
        crta.setBearingRequired(false); 
        crta.setCostAllowed(true); 
        crta.setPowerRequirement(Criteria.POWER_LOW); 
        String provider = locationManager.getBestProvider(crta, true); 

         //String provider = LocationManager.GPS_PROVIDER; 
        Location location = locationManager.getLastKnownLocation(provider); 
        updateWithNewLocation(location);

        tts = new TextToSpeech(this, this);

    }

    public void say(String text2say){

              tts.speak(text2say, TextToSpeech.QUEUE_FLUSH, null);

            }

    @Override

       public void onInit(int status) {

          say("latLongString");    

       }

       @Override

       public void onDestroy() {

          if (tts!= null) {

             tts.stop();

             tts.shutdown();

          }   

          super.onDestroy();

       }

    private void updateWithNewLocation(Location location) { 
        String latLongString;
        TextView myLocation; 
        myLocation = (TextView) findViewById(R.id.myLocation);

        if(location!=null) { 
        double lat = location.getLatitude(); 
        double lon = location.getLongitude(); 
        latLongString = "Lat:" + lat + "\nLong:" + lon;     

        }else{
            latLongString="no location found";
        }
        myLocation.setText("Your current position is:\n" + latLongString);
        say(latLongString);

    } 
```

# iphone - 在 webview 中播放 vimeo 视频的问题

> ID：11928547
> 
> 赞同：0
> 
> 时间：2012-08-13T05:21:28.867
> 
> 标签：iphone, objective-c, ipad, ios5

在我的应用程序中有一个 vimeo 视频。我已使用以下代码在 WebView 中打开它；

```
 NSURL *url = [NSURL URLWithString:@"https://vimeo.com/47278503"];
        NSURLRequest *req = [NSURLRequest requestWithURL:url];
        webview.delegate = self;
        [webview loadRequest:req]; 
```

并在 WebView 上方放置一个取消按钮以关闭 vimeo 视频。

但问题是通过单击取消按钮关闭 WebView 后音频仍然播放。

另一个问题是，在全屏查看时，视频不显示，只有音频在后台播放，点击取消按钮后，视频在后台播放。

**更新 ：**

[链接](https://stackoverflow.com/questions/11085455/watching-vimeo-videos-in-uiwebview-on-ios)中有类似的问题。我已经尝试过它的代码，但它不起作用。我已经写了代码

`[self.view addSubview:self.view.window.rootViewController.view];`

在tableview的`didSelectRowAtIndexPath()`方法中。（并且这个表视图在弹出窗口中）。

我也在`[self.view addSubview:self.view.window.rootViewController.view];`WebView 中尝试过`viewDidLoad()`，但它不起作用。

可能是什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:01:04.123

用于停止 BG 声音。您只需删除、释放并将 nil 设置为您的 UIWebView。

# iphone - 访问导航控制器内的标签栏控制器

> ID：11928550
> 
> 赞同：1
> 
> 时间：2012-08-13T05:21:44.373
> 
> 标签：iphone, uitableview, uinavigationcontroller, uitabbarcontroller, uitabbar

所以基本上，当我在标签栏中显示我的 RootViewController 时，我的代码可以工作，但如果我以正确的方式显示它，则 MainTableViewController 中的 RootViewController 是 UINavigationController 类。出于某种原因，虽然它在 MainTableViewController 中不起作用。

```
MxFifthViewController *viewController = [self.tabBarController.viewControllers lastObject];
NSLog(@"%@", viewController);
int badgeValue = [viewController.tabBarItem.badgeValue intValue];
badgeValue += 1;

viewController.tabBarItem.badgeValue = [NSString stringWithFormat:@"%d", badgeValue];
[viewController downloadUrl:fileURL]; 
```

这段代码在我的 RootViewController 中。我相信它与 self.tabBarController.viewControllers 线有关，但无法弄清楚如何修复它。基本上，当用户选择一行时，它会将 fileURL 发送到“下载”选项卡类（这是我的选项卡栏控制器中的最后一个选项卡，称为“MxFifthViewController”）并向“下载”选项卡添加一个数字标记。

谢谢你的帮助！

PS这个： NSLog(@"%@", viewController); 返回（空）

# dojo - 在 DOJO 中创建 div 容器

> ID：11928554
> 
> 赞同：0
> 
> 时间：2012-08-13T05:22:20.897
> 
> 标签：dojo

我想创建 DIV 容器并用阴影和其他漂亮的外观格式化容器。因为页面会有多个容器，每个容器都有不同的数据。我想用 DOJO 做到这一点，哪个组件最适合呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:23:31.760

据我了解，您想创建一个 div 元素并为其设置样式。然后你应该看看 dojo/dom-construct 和 dojo/dom-style

# ios - 了解 kSecAttrAccessGroup

> ID：11928555
> 
> 赞同：3
> 
> 时间：2012-08-13T05:22:34.450
> 
> 标签：ios, security, keychain, malware

我只是在阅读一些 iOS 应用程序的源代码，我很好奇它的安全性。似乎可以在构建应用程序的权利中指定应用程序的访问组。但是，如果用户在不知情的情况下安装了试图成为特定组的一部分并读取存储在存储中的数据的恶意软件，这难道不是一个安全问题吗？

Apple 应用程序筛选过程是阻止上述攻击的唯一方法吗？还是有一些我错过的权限管理概念？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-30T06:39:14.080

不，这不是安全风险。配置文件确定允许应用程序声明访问哪些访问组，并且配置文件必须由 Apple 签名才能运行。Apple 只允许您声明访问由您的开发者帐户中的其他应用程序创建的访问组。

另一个回答者错了；他/她链接到仅适用于越狱设备且必须以 root 身份运行的工具，绕过适用于大多数设备的标准 iOS 安全机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:30:55.507

是的，这是一个安全漏洞。例如，[此工具](https://github.com/ptoomey3/Keychain-Dumper)可以转储钥匙串中的所有敏感信息，包括您设备上的 Wi-Fi 和邮件/facebook/任何密码。

# mplayer - 使用 mplayer 提取缩略图会导致灰度图像

> ID：11928556
> 
> 赞同：1
> 
> 时间：2012-08-13T05:22:41.037
> 
> 标签：mplayer, video-thumbnails

我正在尝试使用带有此命令的 mplayer 提取缩略图：

```
mplayer -nosound -ss 1 -vf screenshot -frames 1 -vo png:z=9 jump.mpg 
```

问题是它会导致几乎灰色的图像。

如果我现在尝试执行命令：

```
mplayer -ss 1 jump.mpg 
```

然后视频播放跳过第一秒（如预期），但播放的第一秒大部分是灰色的。从技术上讲，我认为它会显示与前一帧的差异，直到它到达关键帧，整个帧都在视频中编码。

现在的问题是：如何强制 mplayer 寻找关键帧，所以在提取时避免出现这种灰色图像？

我找到了选项**-hr-seek off**，听起来它应该做正确的事情，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:57:59.297

只需使用mplayer2，seek问题就解决了。我测试了自己：

[http://www.mplayer2.org/differences/](http://www.mplayer2.org/differences/)

在 debian/ubuntu 上只需通过安装`apt-get install mplayer2`

# python - 循环浮动范围

> ID：11928557
> 
> 赞同：1
> 
> 时间：2012-08-13T05:23:13.063
> 
> 标签：python, numpy, floating-point

你能帮我解决这个问题吗？

代码：-

```
import numpy as np

def test(numList):
    yesList=[]
    for num in numList:
        print num, "start here"
        for i in np.arange(2.0,3.0,0.1):
            print i
        if num==i: yesList.append(num)
    return yesList 
```

`print test([2.1,2.3,3.0])`

输出：-

```
2.1 start here
2.0
2.1
2.2
2.3
2.4
2.5
2.6
2.7
2.8
2.9
2.3 start here
2.0
2.1
2.2
2.3
2.4
2.5
2.6
2.7
2.8
2.9
3.0 start here
2.0
2.1
2.2
2.3
2.4
2.5
2.6
2.7
2.8
2.9
[2.1] 
```

我希望它打印`[2.1,2.3]`，但它只是给了我`[2.1]`如图所示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T05:59:04.873

简短的回答是您正在使用浮点（不精确）数字并期望得到精确的结果，这最终会失败。长答案要复杂得多，但首先看一下[该站点浮点常见问题解答](https://stackoverflow.com/questions/tagged/floating-point?sort=frequent)中的第一项：[浮点数学是否损坏？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)（这是一个 JavaScript 问题，但它同样适用于所有语言。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:52:52.713

它还取决于循环变量在 python 中的递增方式... (i+1)-th 循环值可以是

```
 value[i] = startValue + i * increment 
```

或者

```
 value[i] = value[i-1] + increment 
```

在浮点中，这些值会有所不同......
所以如果你想处理严格的浮点相等，你必须知道这种细节

此外，很难控制循环何时停止......最后一个值很可能是（3.0-epsilon）

第一条规则是不要在浮点上使用循环，无论语言
使用整数代替：

```
def test(numList):
    yesList=[]
    for num in numList:
        print num, "start here"
        for i in np.arange(20,30,1):
            print i*0.1
            if num==(i/10.0): yesList.append(num)
    return yesList 
```

另请注意， i*0.1 和 i/10.0 可能会有所不同，因为浮点数 0.1 不完全是 1/10 ...
因此，如果您编写 if num==(i*0.1) 它将无法按预期工作...
例如 (23*0.1) == (23/10.0) 是假的，虽然最后一个恰好严格等于浮点数 2.3，但它们都不同于数学分数 23/10。

第二条规则告诉不要在浮点数上使用严格相等，这很少是你想的

```
def test(numList):
    yesList=[]
    for num in numList:
        print num, "start here"
        for i in np.arange(20,30,1):
            print i*0.1
            if abs(num-0.1*i) < 0.05 : yesList.append(num)
    return yesList 
```

请阅读“每个计算机科学家都应该知道的关于浮点运算的知识”。[http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

# git - git.exe 位于哪里？

> ID：11928561
> 
> 赞同：358
> 
> 时间：2012-08-13T05:23:32.440
> 
> 标签：git, github-for-windows

我有 PyCharm，我正在四处寻找 git.exe 来用我的 repo 设置它。

git.exe 的路径是什么？

* * *

## 回答 #1

> 赞同：518
> 
> 时间：2013-04-21T04:28:24.620

如果您使用[GitHub for Windows](https://desktop.github.com/)， git.exe 可能不在您的 PATH 中，但您可能会在以下位置找到它：`C:\Users\<username>\AppData\Local\GitHub\PortableGit_<numbersandletters>\bin\git.exe`

这就是我的情况，在 Windows 7 + 版本 1.0 的 GitHub for Windows 中。

在 Windows 10 中，它似乎位于：

`C:\Users\<username>\AppData\Local\GitHub\PortableGit_<numbersandletters>\cmd\git.exe`

（\cmd 与 \bin）

**从[GitHub 桌面](https://desktop.github.com/)1.1**

UI 有所不同，Git 路径现在位于：

`C:\Users\<username>\AppData\Local\GitHubDesktop\app-<appversion>\resources\app\git\cmd\git.exe`

**PS：** *AppData*默认为隐藏文件夹。

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2012-08-13T06:08:51.153

如果`git.exe`确实在你的`%PATH%`（也就是说，如果你可以`git --version`在一个 DOS 窗口中键入 a），那么`which git.exe`会告诉你在哪里。
（前提是您确实[在 Windows 上安装了 GoW：Gnu](https://github.com/bmatzelle/gow/wiki/)：为 Windows 编译的 130 个 unix 命令，包括`which`）。

[下面的](https://stackoverflow.com/questions/11928561/where-is-git-exe-located/11928949?noredirect=1#comment33739625_11928949)[Jonny Leeds](https://stackoverflow.com/users/962696/jonny-leeds)评论您也可以使用`where git.exe`
（Powershell 除外，因为您需要使用`where.exe git.exe`，而不是[PowerShell 命令`where`](https://stackoverflow.com/q/16420160/6309)）

如果没有，不要忘记你可以在任何你想要的地方安装 git，使用~~[msysgit 的便携版](http://code.google.com/p/msysgit/downloads/list)~~. 它只是您在您选择的任何目录中解压缩的存档。

2015 年更新：[**使用便携式版本的 "git-for-windows"**](https://github.com/git-for-windows/git/releases/)，例如：

[`PortableGit-2.4.4.2-3rd-release-candidate-64-bit.7z.exe`](https://github.com/git-for-windows/git/releases/download/v2.4.4.windows.2/PortableGit-2.4.4.2-3rd-release-candidate-64-bit.7z.exe)

然后添加到 %PATH%：

*   `c:\path\to\PortableGit-2.4.4.2-3rd-release-candidate-64-bit\cmd`
*   `c:\path\to\PortableGit-2.4.4.2-3rd-release-candidate-64-bit\usr\bin`

您不仅会获得`git.exe`200 多个可执行的 Unix 命令！不再需要安装 GnuOnWindows。
更多内容请参见“[为什么从网上下载 Git 2.0，总是得到 1.9.4 的安装包？](https://stackoverflow.com/a/26826359/6309) ”。

* * *

最近（2017 年），来自[Luke McGregor](https://stackoverflow.com/users/1070291/luke-mcgregor)的新[**GitHub Desktop**](https://desktop.github.com/)的[回答](https://stackoverflow.com/a/44624061/6309)：[](https://desktop.github.com/)

 **```
"%LOCALAPPDATA%\GitHubDesktop\app-[gfw-version]\resources\app\git\cmd\git.exe"
For instance: 
%LOCALAPPDATA%\GitHubDesktop\app-1.0.1\resources\app\git\cmd 
```

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2017-08-09T21:07:41.857

我很惊讶没有人提到使用 --exec-path 开关。

> git --exec 路径
> 
> C:\Program Files\Git\mingw64/libexec/git-core

我希望这可以帮助别人。

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2013-09-06T01:17:13.263

只是在这里添加几个答案：

在 Windows 上，您可以使用内置的“where”而不是“which”（适用于 Linux）。所以，`where git`假设它在系统路径中，会告诉你 git 的位置。

如果它不在系统路径中，并且您想要一个本机（没有下载或安装），合理的时间命令找​​到它，使用`dir /s git.exe`

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2015-06-01T15:10:00.920

如果您使用[SourceTree](https://www.sourcetreeapp.com/)，可以在此处找到一个实例：

```
%USERPROFILE%\AppData\Local\Atlassian\SourceTree\git_local\bin 
```

您也可以通过[Chocolatey](https://chocolatey.org/packages/git)快速安装。`choco install git`然后它将使其在您的路径上可用，而无需您进行任何进一步的工作。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-01-23T22:49:57.740

在命令行中输入：

```
where git.exe 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2015-12-23T19:31:56.113

以下是分步说明，供您了解：

1.  如果您使用的是任何版本的 Windows，请`Ctrl - Shift - Esc`打开任务管理器。
2.  打开 GitHub，然后查看任务管理器。
3.  应该有这样的东西：[![GitHub 打开时任务管理器中的内容。](../Images/abf2d62b8af453533f244344bf09bd81.png)](https://i.stack.imgur.com/YI7Xj.png)
4.  右键单击名为 的行`GitHub`，然后选择“打开文件位置”。
5.  应该会弹出一个窗口，向您显示文件的位置。 [![Github.exe 找到了！](../Images/6e92fbb214ea0561f764079b388cfbb9.png)](https://i.stack.imgur.com/V1PF6.png)

给你！

您可以对任何应用程序执行此操作，而不仅仅是 GitHub。

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2012-08-13T05:34:16.633

如果您可以使用 git 命令，它应该在您的路径中吗？因此，这应该可以使用 linux 或 linux 之类的操作系统

```
which git 
```

否则也假设 linux like os

```
cd /
find . -name "*git*" 
```

如果在 Windows 上告诉我您使用的是什么版本，我会帮助您。Windows 上的默认路径是 `C:\Program Files (x86)\Git`.

可执行文件的名称并非`git.exe`在所有系统上。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2015-11-27T10:06:23.793

似乎 git.exe 可以在不同的地方找到，具体取决于它的安装方式、版本和 Windows 版本。

我在 Windows 10 Pro N 上安装了 Git-2.6.3-64-bit.exe（全新安装；只是 git，而不是 Github 桌面客户端）。这是默认位置：

%USERPROFILE%\AppData\Local\Programs\Git\mingw64\bin\git.exe

和

%USERPROFILE%\AppData\Local\Programs\Git\bin

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2016-09-11T04:37:05.857

`C:\Users\<username>\AppData\Local\GitHub\PortableGit_<random hash>\cmd\git.exe`是我的 git.exe 在 Windows 10，Git 版本 2.10.0.0 上的位置

**编辑：**使用 GitHubDesktop，位置更改为此

```
C:\Users\<username>\AppData\Local\GitHubDesktop\app-1.0.1\resources\app\git\cmd 
```

或更简单的方法

```
%USERPROFILE%\AppData\Local\GitHubDesktop\app-1.0.1\resources\app\git\cmd 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2019-04-17T07:55:12.987

```
Install git first to your window from 
```

[https://git-scm.com/download/win](https://git-scm.com/download/win)

```
 Select this path while configuring with git to Android studio
    C:\Program Files\Git\cmd\git.exe 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-02-18T16:36:14.697

有时它可以在：`C:\Users\user-name\AppData\Local\Programs\Git\cmd`. 检查 PATH 环境变量的 USER 和 SYSTEM 可以为您提供。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2015-12-29T13:25:54.523

好吧，我只是在我的 Windows 上搜索了**git.exe 。**
许多文件以 和 之类的名称`git-something.exe`返回`git-somethingElse.exe`。
在这些文件中，我可以找到一个确切名称为**git.exe**的文件。我打开文件，可以看到带有各种 git 命令的 cmd，这让我认为它是正确的。
将文件的路径（如下）粘贴到 PyCharm 并且它工作。

```
C:\Users\*Username*\AppData\Local\GitHub\PortableGit_cba306e536fdf878271f7fe636a147f7326ad\cmd\git.exe 
```

PS：我通过Windows GitHub的客户端安装安装了Git和GitHub。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-12-05T16:27:52.657

在 GitHub 2.5.3.0 上的 Windows 7 中，我在 C:\Users(user)\AppData\Local\GitHub\PortableGit_(numbers)\ **mingw32** \bin\git.exe 中找到了它

谢谢`dir /s git.exe`

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2017-06-19T06:56:51.447

似乎在最新版本的 GH for windows 中再次移动到：

```
%USERPROFILE%\AppData\Local\GitHubDesktop\app-[gfw-version]\resources\app\git\cmd\git.exe 
```

鉴于它现在在文件夹结构中有版本，我认为它会在每次自动更新时移动。这使得无法放入路径。我认为最好的选择是单独安装 git。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2019-08-21T15:02:08.203

检查此路径：

```
C:\Program Files\Git\mingw64\libexec\git-core\git.exe 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-02-13T20:48:00.223

GitHub 桌面团队成员在这里

> git.exe 的路径是什么？

GitHub Desktop（或适用于 Windows 的 GitHub）中使用的 Git 版本不打算供用户直接使用，因为路径会在更新之间发生变化，并且可能缺少您需要的一些功能。

我建议安装[Git for Windows](https://gitforwindows.org/)，它将安装在`C:\Program Files\Git\cmd\git.exe`.

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2017-08-03T05:01:18.990

在 Windows 10 上：

[我从 - https://git-for-windows.github.io/](https://git-for-windows.github.io/)安装了 git 。

安装后我在`C:\Program Files\Git\bin\git.exe`

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2015-10-24T18:25:00.807

如果你有基于 PowerShell 的 git 安装，你可以使用 Get-Command 对象来查找 git：

```
Get-Command git.exe | Select-Object -ExpandProperty Definition 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2017-12-09T15:15:52.970

对于可能找不到其他合适解决方案的任何人，

我今天刚刚下载了最新版本，git.exe 位于

```
C:\Users\<user>\AppData\Local\GitHubDesktop\app-1.0.10\resources\app\git\cmd 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2012-08-13T10:14:40.700

如果您安装了[msysgit](http://code.google.com/p/msysgit/downloads/list)，则路径看起来像`c:\Program Files (x86)\Git\bin\git.exe`在 64 位系统上，否则只需下载并安装它，PyCharm 不附带 Git 客户端。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2015-01-16T12:55:16.207

在 Windows 8 中，我发现它的路径如下：

![在此处输入图像描述](../Images/5e0032022e90c071cd153ac900e4bca0.png)

> C:\Program 文件 (x86)\Git\bin\git.exe

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-09-01T04:19:06.813

首先，你应该在你的PC上安装github；其次，您可以下载工具“ [Everything](http://www.voidtools.com/) ”；第三，打开工具一切，输入*git.exe*，然后你会找到位置并将位置复制到PyCharm，然后测试，你会看到成功！

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2015-06-25T13:18:18.593

在 Windows 上，如果您通过 cygwin 安装了 git（打开 cygwin 并键入`git --version`检查），那么路径很可能类似于`C:\cygwin64\bin\git.exe`

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-01-10T10:23:49.213

使用

*   Git 2.11.0,
*   视窗 10,
*   安卓工作室 2.2

git.exe 位置：

> C:\Users\<.username>\AppData\Local\Programs\Git\cmd\git.exe

建议：安装时，复制git路径

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2015-10-26T17:44:08.233

我正在使用 OSX，并看到了这个问题。我发现 xcode 禁用了 git，导致我再次同意 T&Cs。我通过以下方式修复：

1.  在终端窗口中，在我的项目文件夹中：`git status`
2.  我收到以下日志条目：`Agreeing to the Xcode/iOS license requires admin privileges, please re-run as root via sudo.`
3.  我运行了以下内容：`sudo git status`
4.  然后我同意了条款和条件，一切都很好

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2015-12-21T14:33:06.420

我在

```
C:\Users\~\AppData\Local\GitHub\PortableGit_<some_identifier>\mingw32\libexec\git-core\ 
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2016-07-05T17:45:09.547

如果您使用的是[Git For Windows](https://git-for-windows.github.io/)，那么它位于

```
C:\Program Files\Git\mingw64\libexec\git-core 
```

很高兴记住[Git For Windows](https://git-for-windows.github.io/)提供了**Git CMD**，一个已经设置了 PATH 的命令提示符。**Git CMD**可作为快捷方式使用

```
Start Menu > Programs > Git 
```

在其他选项中。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2018-02-26T07:45:02.430

试试看`C:\Program Files\Git\bin`。我已经能够使用`git.exe`位于那里的 PyCharm 来设置我的存储库。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2018-02-13T14:12:21.837

在完成所有答案之后，虽然没有找到路径。
适用于 Windows 10 的最新 githubdesktop.exe 进入此目录：

```
C:\ProgramData\<User>\GitHubDesktop\app-1.0.13\GitHubDesktop.exe 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2018-02-04T19:10:53.610

我正在使用 GitHub Desktop 1.0.13，我想添加`git.exe`到我的 Intellij 环境中。我在`C:\Users\Adam\AppData\Local\GitHubDesktop\app-1.0.13\resources\app\git\mingw64\bin\git.exe`

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2015-12-23T12:55:29.373

I have downloaded stub from [https://desktop.github.com](https://desktop.github.com) After installation of the git from the stub, git.exe is stored in the following location.

`C:\Users\**User Name**\AppData\Local\GitHub\PortableGit_****Some No/characters***\cmd\git.exe`

In Windows 10 64 bit, I feel the exe file is now stored in cmd folder rather than bin folder.

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2017-02-28T17:25:17.067

定位和设置 Git 路径

*   在 Git 软件安装目录中找到 git.exe。

git.exe 的位置将根据您安装的 Git 软件而有所不同！git.exe 文件位于 Git 软件安装目录中，通常位于名为 bin 的文件夹中。标准位置的一些示例： 软件 标准位置 Git C:\Program Files (x86)\Git\bin SmartGit C:\Program Files (x86)\SmartGit\git\bin\git.exe GitHub For Windows C:\Users\'用户名'\AppData\Local\GitHub\PortableGit_'numbersandletters'\cmd\git.exe

-Git的路径设置

在PATH环境变量中设置git.exe路径

右键单击桌面或开始菜单上的我的电脑，然后选择属性。单击高级系统设置选项卡。单击环境变量按钮。在系统变量下，单击 PATH（也可以称为路径），然后单击编辑。将位置粘贴到您的 git.exe* 并确定。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2017-12-12T16:41:49.920

C:\Users\\AppData\Local\GitHub\PortableGit_\cmd\git.exe

这是对我有用的位置。我也无法在 shell 中使用 git。将上述位置设置为解决该问题的路径。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2016-04-23T16:07:36.947

我正在使用 Windows 10，Pycharm 2016.1.2，这是我在以下位置找到 Github.exe 的路径：（请注意，粗体部分是可变的，您应该将其替换为适用的值...）

C:\Users**Salman**\AppData\Local\GitHub\PortableGit_c2ba306e536fdf878271f7fe636a147ff37326ad \bin\ **git.exe**

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2016-04-08T07:02:26.097

如果您已下载最新版本，请尝试查看 CMD 文件夹。git.exe 应该在那里并且应该可以工作。您可能必须使用 File>Settings>Version Control>Git 手动输入它的路径

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2016-08-05T18:06:05.873

在 Windows 10 上对我来说：`C:\Users\Paul\AppData\Local\GitHub\PortableGit_624c8416ee51e205b3f892d1d904e06e6f3c57c8\mingw32\bin\git.exe`**

# html - HTML中的vs标签

> ID：11928566
> 
> 赞同：30
> 
> 时间：2012-08-13T05:24:12.083
> 
> 标签：html

我正在写一个介绍性的 HTML 课程。我记得 9 年前我在学习 HTML 时发现，这两者都可以`<img>`用作`<image>`显示图像的标签，至少在 IE 中是这样。事实上，`<image>`它仍然适用于 5 大顶级浏览器的最新版本。

我意识到这`<image>`是不正确的，不会使用[http://validator.w3.org](http://validator.w3.org)进行验证。但是，是否有人知道如果`<image>`使用而不显示图像的浏览器`<img>`？

此外，我假设现代浏览器显示使用`<image>`标签创建的图像仅仅是因为这是初学者常犯的错误。这个假设正确吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-13T07:12:00.070

是和不是。正如您指出的那样，`<image>`长期以来一直是同义词`<img>`。我相信是早期的 Netscape 浏览器首先这样做，可能是为了补偿用户错误，或者可能是因为当时存在争议该元素是否应该实际调用`<image>`或`<img>`.

无论如何，正如 pst 指出的那样，一旦它在当时主导市场的浏览器中实现，网页就会依赖它。然后，它的持久性归结为浏览器制造商的商业压力。如果所有主流浏览器都支持它，那么浏览器A决定虽然它在版本V中支持它，但它在版本V+1中不支持它，一旦版本V+1发布，他们就会收到很多消息说“站点 S 在您最新的浏览器中损坏。您的浏览器很垃圾。我要切换到浏览器 B"。

HTML5 解析规范要求`<image>`标签在树构建阶段被映射到`img`元素，所以永远没有任何理由使用它。

与其他 HTML 消费者（例如鲜为人知的搜索引擎）相比，我不太关心浏览器。我相信`image`for 的`img`同义词并不广为人知，因此许多此类工具将无法被`<image>`视为引用图像资源。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-04-02T22:35:35.303

它们在 SVG 中有不同的用法。标签在 SVG中`image`创建特定[元素](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/image)，并且不能被`img`标签替换。

[小提琴示例](https://jsfiddle.net/jgrumpers/5tc597nw/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-15T21:36:44.047

我刚刚完成了我正在提交的这个问题的调试，之前没有阅读过上述答案。

虽然不是成熟的浏览器，但电子邮件客户端经常被当作浏览器使用。

我发现，Android Gmail 客户端使用裸 HTML（带有默认的裸 DTD 规范）确实存在这个问题。它只响应`<img />`[ie, not `<image />`]。gmail.com 适用于`<image />`，但不适用于 Android gmail 客户端。

虽然电子邮件客户端并不是真正的浏览器，但我认为您可能会感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T05:28:36.853

确实。现代浏览器将显示无效的代码，以确保旧网站仍然正确显示，并且稍微无效的代码不会搞砸页面。

例如，`<tr>`在您打开一个新的之前忘记关闭一个 - 所有现代浏览器都会简单地假设您关闭了它。

我不知道使用良好的最新浏览器将无法显示`<image>`标签，但会显示`<img>`标签。

# macos - 如何判断 MTDeviceRef 是什么类型的多点触控设备

> ID：11928567
> 
> 赞同：2
> 
> 时间：2012-08-13T05:24:14.967
> 
> 标签：macos, cocoa, multi-touch

我正在尝试编写一个库来从 Apple Magic Mouse 获取触摸事件。我正在使用私有框架 MultitouchSupport.framework 并使用下面的代码来获取多点触控设备的列表。这很好用，我的库也很好用，除了它从所有多点触控设备（例如笔记本电脑触控板）获取触摸事件，而我只想从 Magic Mouse 获取事件。如何判断我正在查看的设备类型以仅监视鼠标？

我用来监听事件的代码是

```
 NSMutableArray* deviceList = (__bridge NSMutableArray*)MTDeviceCreateList(); //grab our device list

    for(int i = 0; i<[deviceList count]; i++) //iterate available devices
    {
        MTRegisterContactFrameCallback([deviceList objectAtIndex:i], touchCallback); //assign callback for device
        MTDeviceStart([deviceList objectAtIndex:i], 0); //start sending events
    } 
```

那么如何过滤掉从 MTDeviceCreateList 返回的 MTDeviceRefs 以仅开始收听魔术鼠标设备？或者至少，过滤掉默认的笔记本电脑触控板？是否有使用此 MultitouchSupport.framework 的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:56:44.333

至少有四种其他方法可以获得 a `MTDeviceRef`：

*   `MTDeviceCreateDefault`
*   `MTDeviceCreateFromDeviceID`
*   `MTDeviceCreateFromGUID`
*   `MTDeviceCreateFromService`

MultitouchSupport.framework 是一个私有框架，您必须对其进行逆向工程，以了解您应该传递给这些函数的参数是什么。

此外，如果您从这些函数之一获得引用，您可能应该使用该`MTDeviceRelease`函数释放设备引用。

或者您可以尝试使用该`MTDeviceIsBuiltIn`功能过滤掉触控板。也许*BuiltIn*意味着*笔记本电脑触控板*。这只是一个疯狂的猜测，我只是查看了 MultitouchSupport 框架二进制文件中的符号。给定函数名称，它的签名可能是

`BOOL MTDeviceIsBuiltIn(MTDeviceRef device)`

同样，这只是一个猜测，我还没有真正尝试过。

# c# - 是否可以使用 sql 参数化查询插入到具有对称加密的加密列中

> ID：11928568
> 
> 赞同：0
> 
> 时间：2012-08-13T05:24:23.300
> 
> 标签：c#, sql, sql-server

我正在研究**数据库加密**，即SQL Server 2008 Express 中**基于单元的对称加密**。但问题是插入的参数化查询不起作用。请帮帮我 。. .

编辑：

我使用以下查询作为示例：

```
foreach (var list in from DataRow row in dataTable.Rows select new ArrayList
                           {
                                 String.Format("@var1, {0}", row["Column1"]), 
                                 String.Format("@var2, {0}", row["Column2"]),
                                 String.Format("@var3, {0}", row["Column3"])
                           })
    {
         var query = String.Format(@"OPEN SYMMETRIC KEY {0} DECRYPTION BY CERTIFICATE {1} 
                     INSERT INTO TableA (Column1, Column2, Column3) VALUES (@ENCRYPTBYKEY(KEY_GUID('symKey'), '{2}'), ENCRYPTBYKEY(KEY_GUID('symKey'), '{3}'), ENCRYPTBYKEY(KEY_GUID('symKey'), '{4}'))", symKey, symCer, "@var1", "@var2", "@var3");
         con.Execute.ExecuteParameterizedQuery(query, list);
    }

public string ExecuteParameterizedQuery(string query, ArrayList parametersList)
{
      errorFlag = Connect(un, pasw, 3);
      if ((String.CompareOrdinal(errorFlag, "Open") == 0))
      {
          var myTran = myConnection.BeginTransaction();
          cmd = new SqlCommand(query, myConnection) { Transaction = myTran };
          for (var i = 0; i < parametersList.Count; i++)
          {
              var split = parametersList[i].ToString().Split(',');
              cmd.Parameters.AddWithValue(split[0], split[1]);
          }
          try
          {
              cmd.CommandText = query;
              cmd.ExecuteNonQuery();
              myTran.Commit();
              errorFlag = string.Empty;
          }
          catch (Exception e)
          {
              errorFlag = e.Message;
          }
          finally
          {
              myConnection.Close();
              myConnection.Dispose();
          }
          return errorFlag;
      }
      myConnection.Close();
      myConnection.Dispose();
      return errorFlag;
  } 
```

编辑2：

```
CREATE PROCEDURE ng_encryptString
(
    @PlaneText VARCHAR(500), @SipherText VARBINARY(2000) OUT
)
AS
BEGIN
OPEN SYMMETRIC KEY symKey DECRYPTION BY CERTIFICATE SymCert 
SELECT ENCRYPTBYKEY(KEY_GUID('SymKey'), @PlaneText)
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:09:01.290

这里我建议的是，

1.  创建一个过程

    ```
    INSERT INTO TableA (Column1, Column2, Column3) VALUES(@val1,@val2,@val3) 
    ```

2.  现在在 C# 中创建一个`encryptThestring(string val)`函数，它应该返回给定正常输入值的加密值。

3.  最后在 C# 中调用该过程并将参数传递为

    ```
    encryptThestring(string val1)
    encryptThestring(string val2)
    encryptThestring(string val3) 
    ```

这是 C#.net 函数

```
public string EncryptString(string val)
            {
                SqlConnection sqlconn = new SqlConnection("conn_string");
                sqlconn.Open();
                SqlCommand cmd = new SqlCommand();
                cmd.Connection = sqlconn;

                cmd.CommandText = "ng_encryptString"; // This is the sproc which will encrypt the string
                cmd.CommandType = CommandType.StoredProcedure;

                SqlParameter param1 = cmd.Parameters.Add("inpuStr", SqlDbType.VarChar, 500);
                param1.Direction = ParameterDirection.Input;

                SqlParameter param3 = cmd.Parameters.Add("@encryptedStr", SqlDbType.VarChar, 2000);
                param3.Direction = ParameterDirection.Output;

                param1.Value = val;

                cmd.ExecuteNonQuery();
                sqlconn.Close();
                return (string)param3.Value;

            } 
```

sproc ng_encryptString

```
CREATE Procedure [dbo].[ng_encryptString]  
@string varchar(255),  
@encryptedStr varbinary(2000)  OUTPUT  

As  
Begin  

Declare @res varbinary(2000)  

IF NOT EXISTS(select * from sys.symmetric_keys where name='##MS_DatabaseMasterKey##')  
CREATE MASTER KEY ENCRYPTION  
BY PASSWORD = 'yourpassword'  

IF NOT EXISTS(select * from sys.certificates where name='EncryptTestCert')  
CREATE CERTIFICATE EncryptTestCert  
WITH SUBJECT = 'yoursubject'  

IF NOT EXISTS(select * from sys.symmetric_keys where name='TestTableKey')   
CREATE SYMMETRIC KEY TestTableKey  
WITH ALGORITHM = TRIPLE_DES ENCRYPTION  
BY CERTIFICATE EncryptTestCert  

OPEN SYMMETRIC KEY TestTableKey DECRYPTION  
BY CERTIFICATE EncryptTestCert  

SELECT @encryptedStr=ENCRYPTBYKEY(KEY_GUID('TestTableKey'),@string)  

end 
```

# sql-server - 如何使 SQL 表中的值成为视图的标题？

> ID：11928569
> 
> 赞同：1
> 
> 时间：2012-08-13T03:21:59.817
> 
> 标签：sql-server, sql, sql-server-2008

我在 SQL Server 2008 中有一个如下类型的表：

```
Headings:  'ClientId'  'FieldName'      'Value'
Line1:     '1'         'Company Name'   'Company1'
Line2:     '1'         'Contract Type'  'Year'
Line3:     '1'         'Login Details'  '13546'
Line4:     '2'         'Company Name'   'Company2'
Line5:     '2'         'Contract Type'  'Month'
Line6:     '2'         'Login Details'  '46528'
Line7:     '3'         'Company Name'   'Company3'
Line8:     '3'         'Contract Type'  'Month'
Line9:     '3'         'Login Details'  '54687' 
```

我需要创建一个视图，它将通过以下方式显示相同的信息：

```
Headings:  'ClientId'  'CompanyName'  'ContractType'  'Login'
Line1:     '1'         'Company1'     'Year'          '13546'
Line2:     '2'         'Company2'     'Month'         '46528'
Line3:     '3'         'Company3'     'Month'         '54687' 
```

我可以使用选择一个特定 FieldName 值的函数获取前两列，`WHERE`但无法在同一视图中获取其他列。另一个问题是输出标题与源表中的不同。据我了解，这里必须使用 SQL 别名，但我不知道如何在这种情况下应用它们。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:52:02.380

您可以使用[枢轴](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx?ppud=4)。

```
select P.ClientId,
       P.[Company Name],
       P.[Contract Type],
       P.[Login Details]
from YourTable
pivot (min(Value) 
       for FieldName in ([Company Name],
                         [Contract Type],
                         [Login Details])
      ) P 
```

[SQL小提琴](http://sqlfiddle.com/#!3/ef93f/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:49:31.797

您可以使用 Pivot，例如[@Mikael Eriksson 答案](https://stackoverflow.com/a/11928808/1407421)也可以使用以下查询：

```
SELECT  A.ClientID, 
        B.VALUE AS CompanyName, 
        C.VALUE AS ContractType, 
        D.VALUE AS [Login]
FROM    (SELECT DISTINCT ClientID FROM yourTable) A
LEFT JOIN YourTable AS B ON B.ClientID = A.ClientID AND B.FieldName = 'Company Name'
LEFT JOIN YourTable AS C ON B.ClientID = A.ClientID AND C.FieldName = 'Contract Type'
LEFT JOIN YourTable AS D ON B.ClientID = A.ClientID AND D.FieldName = 'Login Details' 
```

# android - dispatchDraw(Canvas画布)的使用

> ID：11928570
> 
> 赞同：21
> 
> 时间：2012-08-13T05:24:36.823
> 
> 标签：android, viewgroup

ViewGroup 类中*dispatchDraw(Canvas canvas)*方法有什么用？？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-13T05:26:19.380

从 Android 文档 - [`protected void dispatchDraw (Canvas canvas)`](http://developer.android.com/reference/android/view/ViewGroup.html#dispatchDraw(android.graphics.Canvas))：

> 由 draw 调用以绘制子视图。这可能会被派生类覆盖以在绘制其子级之前（但在绘制其自己的视图之后）获得控制权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T17:19:28.047

比如`ViewGroup`是Linear-、Relative-、FrameLayout-、AbsoluteLayout的Parent。1

因为 ViewGroup 类是抽象的，直接创建一个 Instance 是不可能的。
您可以使用 1 从这里，功能：

```
dispatchDraw(Canvas canvas) 
```

由于未知的原因，第 1 类不会与

```
onDraw(Canvas canvas) 
```

绘图

```
dispatchDraw(Canvas canvas) 
```

在这个 Classes 1 中，可能并且创建 UI 很有趣。

它看起来像这样：

/////

```
public class MainActi extends MyLinearLayout. 
public MainActi(Context con...
super(cont...)
MyLinearLayout extends LinearLayout 

@Override protected void dispatchDraw(Canvas canvas) {
canvas.drawColor(Color.YELLOW); 
```

... ///

或者你跳回去画

```
onDraw(Canvas canvas) 
```

在“视图”中扩展`MainActivity` 或在外部类中引用它，如下所示：

```
MyMelIsDrawing extends View 
   onDraw(Canvas canvas) 
       //now draw... 
```

# c++ - 把一个很长的数字变成一个字符串（美学任务'n）

> ID：11928572
> 
> 赞同：1
> 
> 时间：2012-08-13T05:24:39.837
> 
> 标签：c++

我正在研究 Euler 问题，#8 要求您在 1000 位数字中找到 5 个连续数字的最大乘积。有谁知道我如何将数字格式化为多行的一个长字符串，而不是让它成为一行的一个长字符串？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T05:38:34.903

编译器将自动连接由空格分隔的字符串文字。你可以简单地做：

```
const char bignum[] = 
    "73167176531330624919225119674426574742355349194934"
    ... more lines here ...
    "71636269561882670428252483600823257530420752963450"; 
```

结果字符数组将与您键入一个**非常**长的字符串文字相同。[懒人的链接](http://pastebin.com/jd7iFsjp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:34:42.143

[在https://mattmccutchen.net/bigint/](https://mattmccutchen.net/bigint/)中有一个用于 c++ 的大数字库

# cloud - 使用 Symfony 的 OnApp 包装器

> ID：11928573
> 
> 赞同：0
> 
> 时间：2012-08-13T05:24:43.187
> 
> 标签：cloud, symfony1, symfony-1.4

我必须将[OnApp](http://onapp.com/)（虚拟机（VM））api 与我用 Symfony 编写的虚拟主机控制面板一起使用。现在我有了应用程序上的 PHP 包装文件。

任何人都知道如何与 Symfony 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T02:54:37.647

OnApp API 纯粹用于控制您帐户中的虚拟机。它用于为虚拟机创建、重新启动、更改资源等。

您的 symfony 控制面板需要将 cURL 命令发送到 OnApp API。我假设您希望一个虚拟机来管理您帐户中的其他虚拟机？在这种情况下，您的 symfony 控制面板需要向 API 发送 cURL 请求或使用[PHP 包装器](https://github.com/OnApp/OnApp-PHP-Wrapper)中的类。

需要注意的一点是，带有 symfony 控件的虚拟机只是 OnApp API 的另一个虚拟机。因此，您可以让控制面板虚拟机在最坏的情况下自行删除或重新启动虚拟机……最好使用不在 OnApp 帐户上的服务器。

# google-maps-api-3 - 谷歌地图上的动画折线

> ID：11928576
> 
> 赞同：0
> 
> 时间：2012-08-13T05:24:47.153
> 
> 标签：google-maps-api-3

我是谷歌地图的新手。我在您发布的动画折线上看到了第二张插图，

[http://googlegeodevelopers.blogspot.com/2012/06/powerful-data-visualization-with.html](http://googlegeodevelopers.blogspot.com/2012/06/powerful-data-visualization-with.html)

非常有趣，我学院的项目 tat 真正需要的是显示网络流量。请发布有关如何完成箭头动画的示例代码。帮助将不胜感激

非常感谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-13T06:54:15.857

阅读： [https ://developers.google.com/maps/documentation/javascript/overlays#PolylineSymbols](https://developers.google.com/maps/documentation/javascript/overlays#PolylineSymbols)

# php - 如何删除数字字符之间的空格字符？

> ID：11928579
> 
> 赞同：0
> 
> 时间：2012-08-13T05:25:06.090
> 
> 标签：php, string, space

我有这样的字符串：

```
$str = "old iccid : 809831 3245 345 new iccid : 999000 112221" 
```

如何去除PHP中数字字符之间的空格字符，成为这个输出？

```
$output = "old iccid : 8098313245345 new iccid : 999000112221"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:38:04.437

将数字与字符分开并使用

```
$str="809831 3245 345";
$foo= str_replace(' ','',$str);
echo $foo; // gives 8098313245345 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:45:35.293

`$output = preg_replace( '/\d[ *]\d/', '', $str);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:49:11.273

我从 xdazz (http://stackoverflow.com/users/762073/xdazz) 得到了答案，这种语法效果很好。

```
$output = preg_replace('/(?<=\d)\s+(?=\d)/', '', $str); 
```

# php - 简单的 AJAX POST 返回 HTML

> ID：11928581
> 
> 赞同：0
> 
> 时间：2012-08-13T05:25:34.933
> 
> 标签：php, jquery

我正在使用 $.post 将一些数据发布到服务器中，如果该 php 文件有效，那么我将返回一些 html 片段。现在问题出在 $.post 代码中。我无法将 php 文件中返回的数据插入到包含 $.post 代码的原始文件中。Firebug 显示 html 片段确实返回了，但我在屏幕上看到了它。有什么问题？

下面是包含 .post() 的文件的代码

```
<script type="text/javascript" >

$.post('ajax_send_band_request.php', {

user_id : user_id,
band_request: band_request,
where_to_go: where_to_go,
when_start: when_start,
when_end: when_end,
time: time  

}, function(data){

$(data).find('#message_return').appendTo("#response_from_request_verification")

})  

});

</script>           

<div id="response_from_request_verification"></div> 
```

这是总结的php文件版本。

```
if(this_function_sends the data to the server($register_data) === true);

{

?>

<div id="message_return">Request sent!!</div>

<?php

} else

{

?>  

<div id="message_return">Request was not sent!</div>    

<?php   

}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T05:33:35.053

删除`.find()`部分，您已经有了`div#message_return`$(data)。[`.find()`](http://api.jquery.com/find/)不检查根元素是否匹配，只检查后代。

```
$(data).appendTo("#response_from_request_verification") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:34:01.603

我在这里唯一能看到的错误是缺少；在 appendTo 行上。

确保你的实际代码中有这个，然后我能建议的就是使用像 firebug 这样的交互式调试器来运行它。

在 appendTo 行设置断点，使用控制台确保 $(data).find('#message_return') 得到你想要的 peice 等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:38:03.200

试试这个： $('response_from_request_verification').html(data);
或 $('response_from_request_verification').appendTo(data);

# php - 正则表达式到以下字符串

> ID：11928582
> 
> 赞同：1
> 
> 时间：2012-08-13T05:25:45.857
> 
> 标签：php

让我知道我可以使用该表达式在以下代码中提取 url

```
<div class="bg-movie alpha omega">
<img class="alignnone size-full wp-image-7282" 
         title="CineMundo Tu Mejor Lugar El Caballero de la Noche Asciende" 
         src="http://www.cinemundo.cl/sitio/wp-content/uploads/2012/05/cinemundo_batman_el-caballero-de-la-noche-asciende_estrenos-2012.jpg" 
         alt="Película El Caballero de la Noche Asciende - Estrenos 2012" 
         width="117" height="173">
</div> 
```

来这里，但我工作不好

```
preg_match_all('/<img [class="bg-movie alpha omega"]*src=["|\']([^"|\']+)/i', $html, $images); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:04:32.390

与其试图强制正则表达式在解析 HTML 时处理所有奇怪的边缘情况，不如使用 PHP 的内置 DOM 库来解析 HTML 并获取所需的数据：

```
<?php

$doc = new DOMDocument();

$data = <<<EOD
<div class="bg-movie alpha omega">
<img class="alignnone size-full wp-image-7282"
         title="CineMundo Tu Mejor Lugar El Caballero de la Noche Asciende"
         src="http://www.cinemundo.cl/sitio/wp-content/uploads/2012/05/cinemundo_batman_el-caballero-de-la-noche-asciende_estrenos-2012.jpg"
         alt="Película El Caballero de la Noche Asciende - Estrenos 2012"
         width="117" height="173">
</div>
EOD;

$doc->loadHTML($data);
$xpath = new DOMXpath($doc);
$result = $xpath->query('//img/@src');

foreach ($result as $srcAttr) {
    echo $srcAttr->value, "\n";
} 
```

***编辑：***这是从网站加载页面的示例：

```
<?php

$doc = new DOMDocument();
$url='http://www.cinemundo.cl/peliculas/batman-el-caballero-de-la-noche-asciende/';
@$doc->loadHTMLFile($url);
$xpath = new DOMXpath($doc);
$result = $xpath->query('//div[@class="bg-movie alpha omega"]/img/@src');

foreach ($result as $srcAttr) {
    echo $srcAttr->value, "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:05:29.690

根据建议，您应该考虑使用 PHP DOM 库。您的代码将是可读和可重用的。

```
$dom = new DOMDocument;
$dom->loadXML($html);
echo $dom->getElementsByTagName('img')->item(0)->getAttribute('src'); 
```

# c++ - _WIN64 未在 x64 项目中定义

> ID：11928583
> 
> 赞同：4
> 
> 时间：2012-08-13T05:25:51.910
> 
> 标签：c++, api, winapi, 64-bit

我正在使用 VS2008 并且项目属性设置为（活动）x64

奇怪的是 _WIN64 没有定义，WPARAM 和 LPARAM 仍然是 32 位的。

我应该手动定义 _WIN64 吗？

如果是这样，我应该把#define _WIN64放在哪里？预处理器设置似乎不起作用。

我很确定它被编译为 x64，因为在任务管理器中，exe 没有 *32 后缀。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T06:43:51.467

事情是，

_WIN64 已由编译器定义，但 IDE 无法识别。（似乎在 VS2010 中已修复。）

sizeof(WPARAM) 和 sizeof(LPARAM) 的值都是 8（不是 4）

IDE 以灰色显示 *ifdef _WIN64* 块中的代码，就好像它们处于非活动状态一样，但不是。

[http://bugs.python.org/issue1558](http://bugs.python.org/issue1558)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T05:55:54.580

根据 Microsoft 的说法，在 VS2008 中，您应该在预处理器定义中自行设置 - 用于调试和发布版本 - 看看[这里](http://social.msdn.microsoft.com/Forums/en/vclanguage/thread/b1efc987-490f-4690-a964-f9bcce1ae625)。

# asp.net - DNN 网站：一个用户登录失败，因为 aspnet_membership.isapproved 默认为 0

> ID：11928585
> 
> 赞同：0
> 
> 时间：2012-08-13T05:26:12.143
> 
> 标签：asp.net, dotnetnuke, dotnetnuke-5

在 DNN 上运行网站。一位用户无法登录。这里可能有什么问题。

我在网上找到了一个解决方案，尽管 dnn_userportals.authorized 设置为 1，但该字段 aspnet_membership.isapproved 设置为零。一旦我将 0 更改为 1，登录就起作用了。在哪里以及如何更改 aspnet_membership.isapproved？它是在网站上的代码还是用户界面中。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:34:32.757

这是管理员可以更改的设置。显然 DNN 有 4 种类型的用户注册。

1.  没有任何：

    这将从您的网站中删除注册链接。您网站的管理员只能手动添加新用户。

2.  **私人（您的网站使用此）**：

    出现注册链接。当用户注册时，管理员必须先批准用户，然后才能授予用户访问权限。

3.  上市：

    这是 DotNetNuke 门户的默认设置。出现注册链接。当用户注册时，他们可以立即以会员身份访问您的网站，无需任何验证。

4.  已验证：

    出现注册链接。当用户注册时，他们会收到一封带有验证码的电子邮件。首次登录时，如果验证正确，则要求输入验证码；他们可以作为会员访问您的网站。一旦他们通过验证，他们不再需要输入验证码

执行以下步骤

*   以管理员身份登录
*   转到管理菜单/站点设置
*   向下滚动到“高级设置”——点击加号按钮
*   在“安全设置”和“用户注册”下单击您需要的注册选项（**您需要公开或已验证**）
*   向下滚动并单击更新按钮

这是[参考](http://www.dnncreative.com/DNNUsersSettingtheRegistrationOptions/tabid/89/Default.aspx)。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:40:49.013

如果您是管理员，您可以在用户帐户下编辑用户并选择“授权”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:45:30.237

我们的 DNN 与单点登录解决方案集成。用户是由我们的员工在网上和通过我们的协会管理系统创建的。

遇到此问题时，由于未正确处理未看到的日期值，使用 DNN 管理员将“授权”值更新为 true 失败。

虽然最初的问题对我们来说似乎仍然存在，但修复是更新授权位：UPDATE userportals SET authorized = 1, refreshroles=0 WHERE userid = 73348

用户在下次尝试时登录没有问题。

希望这可以帮助

静电放电

# linux - 使用 shell 脚本在电子邮件中附加一个 html 文件

> ID：11928589
> 
> 赞同：0
> 
> 时间：2012-08-13T05:27:15.473
> 
> 标签：linux, bash, shell, sunos, mailx

我通过组合所有输出并在一封电子邮件中发送来使用以下命令发送电子邮件。这对我来说可以。

```
mailx -s "LIP Data Quality Report for $DATE_YEST_FORMAT1" -r rj@host.com rj@host.com <<EOF
Data Successfully loaded into LIP_DATA_QUALITY table

Total Items Purchased: `echo $QUERY1 | awk '{print $1}'`

Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`

Error Percentage: $QUERY2
EOF 
```

现在我需要在上述电子邮件中附加一个文件，该文件`temp folder`的名称为`chart`. 在发送时，我需要将其作为`chart.html`文件发送。

那么如何修改我的上述命令，以便它可以`chart`从`chart.html file`电子邮件 `temp folder`中附加。

希望我对每个人都清楚。我正在跑步`SunOS`。

任何建议将不胜感激。

**更新：-**

如果我需要在我的 shell 脚本中添加 uuencode 命令，它应该如下所示？或者是其他东西

```
mailx -s "LIP Data Quality Report for $DATE_YEST_FORMAT1" -r rj@host.com rj@host.com <<EOF
uuencode /tmp/chart chart.html
Data Successfully loaded into LIP_DATA_QUALITY table

Total Items Purchased: `echo $QUERY1 | awk '{print $1}'`

Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`

Error Percentage: $QUERY2
EOF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:50:37.187

```
apt-get install sharutils 
```

`run.sh`附件在哪里`hello`，消息在哪里

```
(echo "hello"  ; uuencode run.sh run.sh ) | mailx -s "Testing 2" root@localhost

EMAILCONTENT="Data Successfully loaded into LIP_DATA_QUALITY table \n Total Items Purchased: `echo $QUERY1 | awk '{print $1}'`\n Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`\n Error Percentage: $QUERY2 \n"
(echo $MAILCONTENT ; uuencode /tmp/chart chart.html ) | mailx -s "Testing 2" root@localhost

 ### OR
FILE="/tmp/email.content"
echo -e "Data Successfully loaded into LIP_DATA_QUALITY table \n Total Items Purchased: `echo $QUERY1 | awk '{print $1}'`\n Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`\n Error Percentage: $QUERY2 \n" > $FILE 
(cat $FILE ; uuencode /tmp/chart chart.html ) | mailx -s "Testing 2" root@localhost 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T09:24:10.713

对您的 shell 脚本的最少必要更改是

```
`uuencode /tmp/chart chart.html` 
```

*（在此处文档*中插入 uuencode*命令替换*的反引号）。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:57:46.873

您可以使用更通用的邮件用户代理，例如`email`来自[http://www.cleancode.org/projects/email](http://www.cleancode.org/projects/email)的本地管理附件*

# iphone - 在目标 c 中，有没有办法以非模态方式打开新视图并关闭当前视图？

> ID：11928590
> 
> 赞同：0
> 
> 时间：2012-08-13T05:27:17.293
> 
> 标签：iphone, objective-c, ios, xcode, views

我有一个有很多视图的应用程序。每当我单击第一个视图上的下一个按钮时，我都会呈现第二个视图。目前我这样做如下：

```
NextView *second = [[NextView alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:second animated:YES]; 
```

然而，在这个应用程序中，我不再需要保留第一个视图中的任何信息。有什么方法可以调出第二个视图，并从内存中释放第一个视图？我在想，如果我连续调出 5 个视图，并且它们都是模态的，那么我将使用更多我真正需要的内存。如果用户点击后退按钮，我还想打开第一个视图，并从内存中删除第二个视图。

有什么方法可以节省内存，还是我不应该担心这个内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:10:39.400

您绝对应该尝试使用`UINavigationController`. 随着`pushViewController:animated:`您在堆栈上推送一个新的视图控制器，您将免费获得一个带有“返回”按钮的导航栏。`popToViewController:animated:`你可以回到最初的视图控制器。

`UINavigationController`有很好的文档记录，并且有很多示例程序。我还没有使用 Storyboard，但这应该会使构建基于导航控制器的视图序列变得更加简单。

您不必关心从内存中释放视图。如果内存不足，视图会自动卸载。如果您的视图控制器分配了大量的额外内存，那么您应该实施`didReceiveMemoryWarning`以释放该内存。有关详细信息，请参阅[视图控制器生命周期](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:16:58.423

我认为您应该使用导航栏并将其隐藏并使用此处标记为正确的答案。

[iPhone - 在导航控制器中替换 rootview](https://stackoverflow.com/questions/6717260/iphone-replacing-rootview-in-navigation-controller)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T05:41:39.787

在进入下一个视图时，添加发布之类的

```
NextView *second = [[NextView alloc] init];
[self presentModalViewController:second animated:YES];
[second release]; 
```

# c - 检测到 libc *** ./textfileread.exe：realloc()：下一个大小无效：0x08643008

> ID：11928593
> 
> 赞同：0
> 
> 时间：2012-08-13T05:27:36.707
> 
> 标签：c, linux, dynamic-memory-allocation, realloc

我已经在 main 中声明了双指针并像这样分配内存

```
char  **group_name;
group_name = realloc( NULL, 1);
group_name[0] = realloc(NULL ,20); 
```

我已将此数组传递给一个函数，

```
group_count(object, count, group_name); 
```

它使用 realloc。它工作正常，直到它填充前四个重新分配，但在第五个它给出错误。

```
libc detected *** ./textfileread.exe:  realloc(): invalid next size: 0x08643008

int group_count(struct friends obj[], char cn, char **grp_nm)
{
    int i=0,j=0;
    int grp_cn=0;
    char check=0;
    strcpy(grp_nm[0],obj[0].group);
    grp_cn++;
    grp_count++;

    for(i=1;i<cn;i++) {
        for(j=0;j<grp_cn;j++) {
            if(strcmp(grp_nm[j],obj[i].group)==0)
                check=1;
        }
        if(check==0) {  
            grp_cn++;
            grp_count++;
            printf("\t%d\n",grp_cn);
            grp_nm = realloc( grp_nm, grp_cn);   //at grp_cn=5 allocation gives error
            printf("\t%d\n",grp_nm);
            if(grp_nm == NULL) printf("\t%d\n",grp_cn);  // this 'if' didnt run, means no NULL return
            grp_nm[grp_cn-1] = realloc(NULL ,20);
            strcpy(grp_nm[grp_cn-1],obj[i].group);
        }
    check=0;
    }
} 
```

printf("\t%d\n",grp_nm) 的输出；下面给出，在此之后的第五次重新分配迭代

```
2
140783624
3
140783624
4
140783624
5

*** glibc detected *** ./textfileread.exe: realloc(): invalid next size: 0x099c8008        ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x6b961)[0x17b961]
lib/i386-linux-gnu/libc.so.6(+0x6f1ad)[0x17f1ad]
/lib/i386-linux-gnu/libc.so.6(realloc+0xe9)[0x180579]
./textfileread.exe[0x804934e]
./textfileread.exe[0x8048b42]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0x126e37]
./textfileread.exe[0x8048751]
======= Memory map: ========
00110000-0026a000 r-xp 00000000 08:02 1570626    /lib/i386-linux-gnu/libc-2.13.so 
```

在屏幕上输出 5 之后，地址应该显示为 4 之后显示的那样。但它没有，那么为什么在 5 时它会出错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:48:19.540

您的问题的核心可能是您破坏了 malloc 与新分配的块一起设置的簿记指针。当您将该“块”返回给 realloc 时，它会尝试使用损坏的指针在空闲区和其他类似活动中重新插入内存。

“为什么是 5 而不是 4”... 很可能是因为 realloc 在此之前不需要使用以前返回的块之一（例如，因为您的块实际上比您请求的要大，并且 realloc 认为您无需重新分配就可以了一些记忆）。malloc/free 是复杂的软件，误用时可能会表现出混乱行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:35:37.173

为什么要`realloc`用于初始分配？

反正...

```
char  **group_name;
group_name = realloc( NULL, 1);
// group_name is now pointing to 1 byte of dynamically allocated memory
group_name[0] = realloc(NULL ,20);
// Whoops. Did we just write 4(or more bytes) into our 1 allocated byte? 
```

我认为您的方法中存在相同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:53:27.390

问题很可能是因为您在分配时使用了错误的大小。

```
char  **group_name;
group_name = realloc( NULL, 1); 
```

但 a`char **`不是一个单字节，*它*是四个或八个（取决于您是在 32 位还是 64 位平台上）。而是使用`sizeof`运算符：

```
group_name = realloc( NULL, sizeof *group_name); 
```

稍后当您重新分配时：

```
grp_nm = realloc( grp_nm, grp_cn * sizeof *grp_nm); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:54:12.803

谢谢。它有帮助。

```
 group_name = realloc( NULL, sizeof *group_name); 
    grp_nm = realloc( grp_nm, grp_cn * sizeof *grp_nm); 
```

在那个 libc 错误完成之后。但有时我无法在子程序中填充数组后读取值，即在 main() 中我无法读取值 group_name[3] 假设。但在子程序中 grp_nm[3] 显示得很好，因为我已经在子程序中将指针传递给数组 group_name。我发现的原因是，在重新分配期间，如果它与剩余内存冲突，它会将整个数组重新定义为新位置，从而将指针更改为数组。例如，在我将它传递给子程序之后，在主 group_name=0x5689F0 中，在第一次重新分配时 grp_nm=0x5689F0 在第二次重新分配时 grp_nm=0x5689F0

并且由于内存冲突导致数组**grp_nm的位置发生一些重新分配后，将变为0x345FF1。**所以我必须像这样从子程序中返回这个指针

```
 group_name=group_count(object, count, group_name); 
```

这样如果指针发生变化，它将立即更新 group_name=0x345FF1

# c++ - 对事件具有“调度”功能的原因是什么？

> ID：11928594
> 
> 赞同：1
> 
> 时间：2012-08-13T05:27:49.583
> 
> 标签：c++, events, design-patterns, architecture, event-handling

我一直在阅读有关事件管理器的信息，并且我了解基本机制，或者我是这么认为的。我一直在看到一些情况，例如

```
IEvent* pEvent = m_events;

while(pEvent)   {
    removeEvent(pEvent);
    pEvent->Dispatch(); // What is this?
    pEvent = pEvent->Next;
} 
```

然而，做“pEvent->Dispatch”有什么意义呢？我认为这与事件监听有关，但我不确定是否诚实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:39:58.583

在调用您提供的代码片段时，事件的“侦听”已经完成。“监听”之后，所有的事件都已经收集到了某个容器中，每个事件都需要进行处理。这`Dispatch`可能是类上的一个虚拟方法`IEvent`，因此每个派生事件都可以由特定于该类型事件的例程处理。

```
class IEvent {
protected:
    virtual ~IEvent () {}
    virtual void Dispatch () = 0;
    //...
}; 
```

# ruby-on-rails - Ruby on rails 日期格式

> ID：11928595
> 
> 赞同：1
> 
> 时间：2012-08-13T05:28:05.370
> 
> 标签：ruby-on-rails, time, format, haml

我正在尝试从我的 RoR 项目中格式化我的日期，尽管在理解它是如何工作的方面存在真正的问题。在 php 中，这是一个简单的日期（“格式”，时间（））

如果我只调用存储在我得到的数据库中的标准时间 `2012-08-12 22:25:00 +1000`

我正在尝试调用日期格式 event_time 和 event_date

```
Time::DATE_FORMATS[:month_and_year] = "%B %Y"
Time::DATE_FORMATS[:event_time] = "%l:%M %p"
Time::DATE_FORMATS[:event_date] = "%a, %e %b, %Y" 
```

我目前正试图这样称呼

```
= schedule.time.to_s(:event_time) 
```

我遇到的问题是我收到以下错误：

> > 参数数量错误（1 代表 0）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T05:47:58.130

如果您经常需要这种日期格式的数据，您可以使用 strftime 或 esle 您的方法也很好

您添加的代码对我很有用

```
pritesh@cloudy-pritesh:~/railsdemo$ rails c
Loading development environment (Rails 3.2.6)
1.9.3p194 :001 > Date.today.to_s(:event_time)
 => "2012-08-13" 
1.9.3p194 :002 > Time::DATE_FORMATS[:month_and_year] = "%B %Y"
 => "%B %Y" 
1.9.3p194 :003 > Time::DATE_FORMATS[:event_time] = "%l:%M %p"
 => "%l:%M %p" 
1.9.3p194 :004 > Time::DATE_FORMATS[:event_date] = "%a, %e %b, %Y"
 => "%a, %e %b, %Y" 
1.9.3p194 :005 > Time.now.to_s(:event_time)
 => "11:13 AM" 
```

您也可以使用`Time.now.strftime("%B %Y")`

我的最后一个猜测，可能是您正在循环记录，并且在记录中的某处有一条 time 值为 nil 的记录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T05:33:17.070

使用[strftime](http://apidock.com/rails/ActiveSupport/TimeWithZone/strftime)

```
Time.now.strftime("%B %Y")   #August 2012 
```

然后使用类似下面的东西

```
Time.now.strftime(Time::DATE_FORMATS[:month_and_year]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:40:10.593

这很简单，

```
schedule.time.strftime(Time::DATE_FORMATS[:format_type])   #August 2012 
```

详细使用请参考[http://apidock.com/ruby/Time/strftime](http://apidock.com/ruby/Time/strftime)。

# barcode-scanner - 台式机条码解码器

> ID：11928599
> 
> 赞同：0
> 
> 时间：2012-08-13T05:29:04.790
> 
> 标签：barcode-scanner

我正在寻找适用于桌面应用程序的条形码扫描仪。我们每月生成超过 2000 张图像，需要对其进行处理以解码条形码。现在其中大多数可能包含也可能不包含条形码，在这种情况下，sdk 应该在图像上没有条形码的情况下回复。

大多数条形码图像都是模糊的，因此我们需要一个强大的 sdk。我知道一些可用的开源库，例如：Zxing、Zbar。有一些专有的，但基于移动。

这里最好的选择应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:34:14.110

这可能对你有用...

[http://www.codeproject.com/Articles/10734/Reading-Barcodes-from-an-Image-II](http://www.codeproject.com/Articles/10734/Reading-Barcodes-from-an-Image-II)

# java - 无法调用 JIBX CodeGen。

> ID：11928600
> 
> 赞同：1
> 
> 时间：2012-08-13T05:29:07.050
> 
> 标签：java, classpath, jibx

我想从 xml 文件创建 java 类。我使用 JIBX。我试试这个：

```
java -cp C:\Documents and Settings\kliver\Мои документы\Загрузки\jibx\lib\jibx-tools.jar org.jibx.schema.codegen.CodeGen -t C:\Documents and Settings\kliver\Мои документы\Загрузки\jibx\gen\ -w C:\Documents and Settings\kliver\Мои документы\Загрузки\jibx\V01_STD\STD_MP.xsd 
```

但得到错误

```
C:\Documents and Settings\kliver>java -cp C:\Documents and Settings\kliver\Мои д
окументы\Загрузки\jibx\lib\jibx-tools.jar org.jibx.schema.codegen.CodeGen -t C:\
Documents and Settings\kliver\Мои документы\Загрузки\jibx\gen\ -w C:\Documents a
nd Settings\kliver\Мои документы\Загрузки\jibx\V01_STD\STD_MP.xsd
Exception in thread "main" java.lang.NoClassDefFoundError: and
Caused by: java.lang.ClassNotFoundException: and
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: and.  Program will exit. 
```

我添加`C:\Documents and Settings\kliver\Мои документы\Загрузки\jibx\lib\`到 PATH 和 CLASSPATH 变量，但它没有帮助。

我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:04:45.853

似乎“和”这个词被解释为一个java类。尝试将命令行中引用的路径放在引号中：

java -cp "C:\Documents and Settings\kliver\Мои д окументы\Загрузки\jibx\lib\jibx-tools.jar" .... 等

# objective-c - 一种从表视图中删除空值的方法？

> ID：11928601
> 
> 赞同：-1
> 
> 时间：2012-08-13T05:29:21.387
> 
> 标签：objective-c, ios, uitableview, nsarray, xcode4.3

新目标 c. 我`NSArray`用来填充我的`UITableView`. 有没有办法从数组和`cell.textLabel.text`. 这就是我所做的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    alTableView.delegate = self;
    alTableView.dataSource = self;
    NSArray *BusRoute = alightDesc;
    int i;
    int count = [BusRoute count];
    for (i = 0; i < count; i++)
    {  
        NSDictionary *STEPS = [dic valueForKey:@"STEPS"];            
        alDescArray = [[STEPS valueForKey:@"AlightDesc"] retain];
        boardDescArray = [[STEPS valueForKey:@"BoardDesc"] retain];   
        NSLog(@"boardDescArray = %@", boardDescArray);     

        serviceID = [[STEPS valueForKey:@"ServiceID"] retain];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.textLabel.font = [UIFont systemFontOfSize:14]; //Change this value to adjust size
    cell.textLabel.numberOfLines = 10;
    cell.textLabel.text = [NSString stringWithFormat:@"Walk to and board at %@\nTake Bus Service = %@\nAlight Destination = %@",[boardDescArray objectAtIndex:indexPath.row], [serviceID objectAtIndex:indexPath.row], [alDescArray objectAtIndex:indexPath.row]];
    NSLog(@"cell = %@", cell.textLabel.text);
    return cell;
} 
```

在第二个单元格打印出来，Walk to and board at`(Null)`有没有办法从桌子上删除那句话？

结果：

```
alDescArray = (
"OPP",
"OPP",
"OPP"
)

boardDescArray = (
"BLK",
"AFT",
""
)

serviceID = (
66,
43,
72
)

cell = Walk to and board at BLK 7
       Take Bus Service = 11
       Alight Destination = BLK 11
cell = Walk to and board at 
       Take Bus Service = 3
       Alight Destination = BLK 16
cell = Walk to and board at BLK 38 
       Take Bus Service = 9
       Alight Destination = AA 
```

* * *

**更新答案**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}
cell.textLabel.font = [UIFont systemFontOfSize:14]; //Change this value to adjust size
cell.textLabel.numberOfLines = 10;

NSString *boardDesc = [boardDescArray objectAtIndex:indexPath.row];
NSString *serviceId = [serviceID objectAtIndex:indexPath.row];
NSString *alDesc = [alDescArray objectAtIndex:indexPath.row];
NSLog(@"serviceId - %@",serviceId);

NSString *resultString2 = [NSString stringWithString:@""];

//make a check before making the string
if ([boardDesc length]>0) {
    resultString2 =[resultString2 stringByAppendingFormat:@"Walk to and board at %@,",boardDesc];
}

if ([serviceId length]>0) {
    resultString2 =[resultString2 stringByAppendingFormat:@"Take Bus Service %@: ",serviceId];
}

if ([alDesc length]>0) {
    resultString2 =[resultString2 stringByAppendingFormat:@"Alight Destination %@: ",alDesc];
}

//string that doesnot print null values
NSLog(@"resultString2 - %@",resultString2);
cell.textLabel.text = resultString2;
NSLog(@"cell = %@", cell.textLabel.text);
return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:57:54.937

```
NSString *myName = [NSString stringWithString:@"Mangesh"];
NSString *myAge = [NSString stringWithString:@""];
NSString *myProfession = [NSString stringWithString:@"Developer"];
//just for example you have three string with above values 
//and you want to print Hi, My Name is ABC, I am 22 year old and my Profession is Developer

//string that prints null values     
NSString *resultString1 = [NSString stringWithFormat:@"Hi, My Name is %@, I am %@ year old and my profession is %@",myName,myAge,myProfession];

NSLog(@"resultString1 - %@",resultString1);
//output: resultString1 - Hi, My Name is Mangesh, I am  year old and my profession is Developer

NSString *resultString2 = [NSString stringWithString:@"Hi,"];

//make a check before making the string
if ([myName length]>0) {
    resultString2 =[resultString2 stringByAppendingFormat:@"My Name is %@,",myName];
}

if ([myAge length]>0) {
    resultString2 =[resultString2 stringByAppendingFormat:@"I am %@ year old and",myAge];
}

if ([myProfession length]>0) {
    resultString2 =[resultString2 stringByAppendingFormat:@" my profession is %@",myProfession];
}

//string that doesnot print null values
NSLog(@"resultString2 - %@",resultString2);
//output:-  resultString2 - Hi,My Name is Mangesh, my profession is Developer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:35:47.390

```
NSString *board = [boardDescArray objectAtIndex:indexPath.row];
NSString *firstline = [board length] ? @"Walk to and board at" : @"";

cell.textLabel.text = [NSString stringWithFormat:@"%@%@\nTake Bus Service =
%@\nAlight Destination = %@", firstline, board, [serviceID
objectAtIndex:indexPath.row], [alDescArray objectAtIndex:indexPath.row]]; 
```

# ruby-on-rails-3.2 - 未初始化的常量 Rack::ContentLength (NameError)

> ID：11928602
> 
> 赞同：2
> 
> 时间：2012-08-13T05:29:27.477
> 
> 标签：ruby-on-rails-3.2

```
amol@chikhaldara:~/exp/blog$ rails s
Exiting
/home/amol/.rvm/gems/ruby-1.9.3-p0/gems/async-rack-0.5.1/lib/async_rack/async_callback.rb:7:in `const_get': uninitialized constant Rack::ContentLength (NameError)
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/async-rack-0.5.1/lib/async_rack/async_callback.rb:7:in `AsyncCallback'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/async-rack-0.5.1/lib/async_rack/content_length.rb:4:in `<module:AsyncRack>'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/async-rack-0.5.1/lib/async_rack/content_length.rb:3:in `<top (required)>'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/content_length.rb:6:in `<module:Rack>'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/content_length.rb:3:in `<top (required)>'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/handler/webrick.rb:3:in `require'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/handler/webrick.rb:3:in `<top (required)>'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/handler.rb:43:in `rescue in default'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/handler.rb:40:in `default'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/server.rb:269:in `server'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.7/lib/rails/commands/server.rb:59:in `start'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.7/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.7/lib/rails/commands.rb:50:in `tap'
    from /home/amol/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.7/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
amol@chikhaldara:~/exp/blog$ 
```

刚刚被困住了，任何提示如何解决这个问题

# networking - DNS和IP地址理解

> ID：11928603
> 
> 赞同：-1
> 
> 时间：2012-08-13T05:29:29.253
> 
> 标签：networking, dns, ip-address

我不太确定我对 DNS 和 IP 地址的理解是否正确。但这是我想要做的

我已经在我的 android 手机 [ijetty] 上启动了一个网络服务器。我在那里创建了一些网络应用程序。它可以在我的手机上访问。

我从 whatismyip.com 获取了我的外部 IP 地址。然后将此IP地址附加到服务器的端口号。我在其他一些使用从我的手机连接的 wifi 连接的手机上进行了尝试，我能够登录到该应用程序。

但是当我在我的办公室电脑上尝试相同的网址时，它不起作用，它说`The request timed out before the page could be retrieved.`

根据我的理解，DNS 只是 IP 地址与域名的映射，如果我在主机文件中输入域名，我可以在不提供 IP 地址的情况下访问该页面。那么为什么我无法访问手机上托管的应用程序。

请纠正我哪里错了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:38:18.477

您对 DNS 的理解是正确的。

您面临的问题是非静态 IP。您正在使用的 android 设备必须从某个地方获取其 IP。很可能是 GSM/LTE/CDMA 服务提供商或它所连接的 WiFi，即来自您的 ISP。因此获得的 IP 并不保证始终相同，新/可用的 IP 将在后续续租时租给您。尝试再次从您的 android 设备（服务器）查看 whatismyip，看看 IP 是否与您之前使用的相同。

# jquery - 删除 SugarCRM 的 TPL 文件中的行

> ID：11928604
> 
> 赞同：0
> 
> 时间：2012-08-13T05:29:54.903
> 
> 标签：jquery, sugarcrm

我正在尝试删除 tpl 文件中的一行。当用户单击特定记录时，应删除该记录。在java脚本函数中

```
 var temp=button.id;
 var idTemp1 = temp.split("_");
 var rowNo =  idTemp1[1];
 var row = document.getElementById('table_row_'+rowNo); 
 row.parentNode.removeChild(rowNo); 
```

我得到 rowNo 但是当尝试通过`document.getElementById('table_row_'+rowNo);` 获取 null 来获取 row 时。我是新来的糖。如果您有解决方案，请提供它提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:17:26.323

我假设该按钮是存在于每一行上的“删除”按钮。我对么？你为什么不尝试使用 jQuery 呢？

如果按钮的 ID 类似于“delete_8”：

```
$('#delete_8').click(function(event) {
    var $target = $(event.target);
    $target.closest('tr[id^=table_row]').remove();
}) 
```

这实质上是绑定了按钮上的点击事件。它将“目标”单击的元素设置为 $target 变量。从变量中，您可以找到最近的父节点，它是一个 TR（我假设它是一个表行），其 id 以“table_row”开头并将其删除。

您最终应该切换到使用事件委托来处理对表中所有按钮的单击事件的侦听，而不是将单击事件附加到该表中的每个按钮。

# php - 使用 PHP 时如何在移动设备中确定下载何时完成

> ID：11928607
> 
> 赞同：1
> 
> 时间：2012-08-13T05:30:11.283
> 
> 标签：php, jquery

我正在使用 PHP 标头在移动设备中下载 JAR 文件和[APK](http://en.wikipedia.org/wiki/APK_%28file_format%29)文件。我可以成功下载文件，但我想在下载达到 100% 时显示一个弹出窗口。我如何实现这一目标？

下载完成事件有没有回调方法？

```
header('Content-Type: '.$mime);
header('Content-Length: '.$stat['size']);
header('Connection: close');
header('Content-disposition: attachment; filename='.$file_name);
readfile($path_to_file); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:07:16.460

没有“下载完成”事件。但是您可以使用一种解决方法：

[http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx](http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx)

请参阅[检测浏览器何时接收文件下载](https://stackoverflow.com/questions/1106377/detect-when-browser-receives-file-download?lq=1)

# ruby-on-rails - URL 正则表达式/帮助器/识别器？

> ID：11928609
> 
> 赞同：0
> 
> 时间：2012-08-13T05:30:41.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个允许用户发布的 Rails 应用程序，与论坛非常相似。如果用户键入一个链接，我希望该链接在打印到页面时成为一个元素。例如，假设这是一个用户帖子：

```
"I love this new website www.newwebsite.com!" 
```

我希望将上面的字符串打印到页面上：

```
I love this new website <a href="www.newwebsite.com">www.newwebsite.com</a> 
```

是否有任何 Rails 助手、gem 或内置模块来完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:33:43.647

看看[rails_autolink](https://github.com/tenderlove/rails_autolink)这个。如果您使用的是 3.1 之前的 Rails 版本，则此功能是内置的，您不需要 gem。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T05:39:34.867

你可能想试试这个

```
<%= auto_link(simple_format(word_wrap(@content,:line_width => 75)), :html => { :target => '_blank' }) -%> 
```

更多关于这些文本助手的信息 -> [http://ap.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html](http://ap.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html)

# symfony - 如何制作 symfony2 表单以在表单类型中自动输入当前登录用户的 ID？

> ID：11928610
> 
> 赞同：2
> 
> 时间：2012-08-13T05:30:41.173
> 
> 标签：symfony, twig

我在 symfony2 有一个表单类型：

```
namespace Acme\SomethingBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class GuestType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('email')
            ->add('address')
            ->add('phone')
            ->add('created_at')
            ->add('updated_at')
            ->add('is_activated')
            ->add('user','entity', array('class'=>'Acme\SomethingBundle\Entity\User', 'property'=>'id' ));
    }

    public function getName()
    {
        return 'acme_somethingbundle_guesttype';
    }
} 
```

那个行动：

```
 /**
     * Displays a form to create a new Guest entity.
     *
     */
    public function newAction()
    {
        $entity = new Guest();
        $form   = $this->createForm(new GuestType(), $entity);

        return $this->render('AcmeSomethingBundle:Guest:new.html.twig', array(
            'entity' => $entity,
            'form'   => $form->createView()
        ));
    }

    /**
     * Creates a new Guest entity.
     *
     */
    public function createAction()
    {
        $entity  = new Guest();
        $request = $this->getRequest();
        $form    = $this->createForm(new GuestType(), $entity);
        $form->bindRequest($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getEntityManager();
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('guest_show', array('id' => $entity->getId())));

        }

        return $this->render('AcmeSomethingBundleBundle:Guest:new.html.twig', array(
            'entity' => $entity,
            'form'   => $form->createView()
        ));
    } 
```

树枝模板

```
<h1>Guest creation</h1>
<form action="{{ path('guest_create') }}" method="post" {{ form_enctype(form) }}>
    {{ form_widget(form) }}
    <p>
        <button type="submit">Create</button>
    </p>
</form>

<ul class="record_actions">
    <li>
        <a href="{{ path('guest') }}">
            Back to the list
        </a>
    </li>
</ul> 
```

'user' 属性将用户 ID 的实体作为变量，并在 twig 表单中显示为下拉框。我希望当前登录（经过身份验证的）用户的 ID 自动插入 - 如果可能的话，隐藏 - 在“用户”字段中。我知道我正在获取用户的 ID

```
$user = $this->get('security.context')->getToken()->getUser();
$userId = $user->getId(); 
```

但我不能让它工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T06:42:52.637

如果您想将其放入表单中，并且可以由用户编辑，则必须先在您的 Guest 对象中为用户提供集合，然后再将其注入表单：

```
$entity  = new Guest();
$entity->setUser($this->get('security.context')->getToken()->getUser());
$form    = $this->createForm(new GuestType(), $entity); 
```

否则，如果它不可编辑，则应从表单中删除此字段并在`isValid`() 测试后设置用户。

# android - 无法在 Android 4.0 设备上获取 PhoneStateListener 的广播

> ID：11928613
> 
> 赞同：0
> 
> 时间：2012-08-13T05:31:00.453
> 
> 标签：android, telephonymanager, phone-state-listener

使用接收器，我在 2.3 设备（如（摘机、空闲、响铃）上广播 PhoneStateListener，但是当我在 4.0 设备上运行相同的代码时，它无法广播电话的状态。

谁能告诉如何用接收器在 4.0 上进行广播？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T07:40:29.760

经过大量搜索后，我终于得出了高于 v3.0 api 的结果，必须使用至少一项活动。如果您没有使用任何活动（仅表示接收器），那么在 v3.0 以上，您将无法获得 PhoneStateListner 的广播。出于安全原因，这是由 Google 完成的。

# ruby-on-rails - rails '.variable' 表示法？

> ID：11928615
> 
> 赞同：0
> 
> 时间：2012-08-13T05:31:25.060
> 
> 标签：ruby-on-rails, ruby

我正在查看 ruby​​gems.org 的[源代码](https://github.com/rubygems/rubygems.org/blob/master/app/views/home/index.html.erb)，以进一步了解 Rails 以及如何将它与功能站点一起使用。

我的一个问题是这些到底是做什么的？：

```
<%= t 'download_count', :count => number_with_delimiter(@downloads_count) %>
<%= t '.welcome_blurb' %> 
```

`download_count`和`.welcome_blurb`变量将文本存储在某处吗？如果是这样，我在哪里可以找到它，它如何知道在哪里看？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T05:40:50.887

`download_count`并且`.welcome_blurb`是翻译后的字符串，您可以在`config/locales/`目录中的文件中找到它们，文件名与语言对应，在这种情况下`en.yml`为英语：

`download_count`：[https](https://github.com/rubygems/rubygems.org/blob/master/config/locales/en.yml#L11) `.welcome_blurb` : //github.com/rubygems/rubygems.org/blob/master/config/locales/en.yml#L11 ：https: [//github.com/rubygems/rubygems.org/blob/master/config/locales /en.yml#L31](https://github.com/rubygems/rubygems.org/blob/master/config/locales/en.yml#L31)

前面的点`welcome_blurb`表示惰性查找，这意味着翻译的命名空间默认为您从中调用它的视图，正如您将在`en.yml`文件中看到的那样：

```
home:
  index:
...
    welcome_blurb: "Welcome to your community RubyGem host." 
```

所以`.welcome_blurb`实际上的意思`home.index.welcome_blurb`。

有关更多详细信息，请参阅[rails i18n 文档](http://guides.rubyonrails.org/i18n.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:38:19.570

`t`是一种简写方式`I18n.translate`，它将使用语言环境文件（可能在 config/locales 中）来呈现适合当前语言设置的文本。

有关详细信息，请参阅[http://guides.rubyonrails.org/i18n.html 。](http://guides.rubyonrails.org/i18n.html)

# java - Java Swing 中的 Oyoaha 外观

> ID：11928616
> 
> 赞同：1
> 
> 时间：2012-08-13T05:31:27.823
> 
> 标签：java, swing, look-and-feel

我正在使用 Windows 7。我想在 Java Swing 中使用 Oyoaha 外观。我不知道 Oyoaha 的班级名称。请告诉我如何使用 LookAndFeel？

Oyoaha.jar 可以在以下位置找到：http: [//sourceforge.net/projects/oalnf/](http://sourceforge.net/projects/oalnf/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:07:50.677

任何一个：

```
OyoahaLookAndFeel laf = new OyoahaLookAndFeel();
UIManager.setLookAndFeel(laf); 
```

或者：

```
...
// get laf class name
System.out.println(laf.getClass().getName());
// prints "com.oyoaha.swing.plaf.oyoaha.OyoahaLookAndFeel"
...
UIManager.setLookAndFeel("com.oyoaha.swing.plaf.oyoaha.OyoahaLookAndFeel"); 
```

# android - 检索服务发送的 SMS 消息（显示为名称而不是数字）

> ID：11928617
> 
> 赞同：3
> 
> 时间：2012-08-13T05:31:32.343
> 
> 标签：android, sms

1.  银行、移动网络等（如 TM-VODAFONE）发送的消息 (SMS) 称为什么。我很难为此进行搜索查询。

2.  我想搜索消息收件箱并找出此类消息。我知道我们可以查询`SMS_INBOX`表格，但是我可以使用这样的名称进行搜索吗？还是每条消息都与联系人 ID 或其他内容相关联？

3.  我还想知道这些消息是如何发送的，以便所有手机都显示这样的名称而不是数字，并且我相信只有一个组织可以出于安全目的注册/使用这样的名称

编辑：至少有人可以说出这种消息的名称，以便我可以进行适当的搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:49:38.200

1.  我不知道这样的消息叫什么。

2.  该`address`参数包含发件人的姓名、普通联系人的类似电话号码以及您需要的发件人的姓名。

您可以遍历收件箱中的所有消息，比较每条消息的地址字段。

1.  不知道。

# java - 使用 MQ 的 JMS 多线程概念

> ID：11928620
> 
> 赞同：3
> 
> 时间：2012-08-13T05:32:28.210
> 
> 标签：java, jakarta-ee, queue, jms, messaging

我最近开始学习 JMS，到目前为止了解了一些概念。但是我想知道 IBM MQ 或任何队列提供程序如何处理来自多线程应用程序的请求。例如

考虑一个应用程序，它是多线程的并被配置为使用 MQ 向大型机主机发送消息。此应用程序配置了一个 Put 队列和 get 队列。想象一下正在处理 10 个请求，每个请求都想从主机获取数据。由于队列只是一个，所有这10条消息都同时放入队列中。主机处理消息并将回复发送给客户端，即应用程序。回复消息如何不会混淆并且每个线程都有自己的正确回复消息？

通信时使用了一些 id，它是否特定于发送的特定消息线程？是否需要为每个新的执行线程建立一个 JMS 会话。？所有 10 个请求都使用什么相同的会话？将感谢任何详细解释此概念的示例或链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:16:17.873

JMS 通过以下几个特性支持这一点：

首先，JMSCorrelationId 是一个 JMS 标头，用于将请求与响应关联起来。即每条消息都包含一个全局唯一的（GUID）JMSMessageId。大型机应用程序应简单地将请求中的消息 id 复制到响应消息上的 JMSCorrelationId 并发送回共享响应队列。

因此，只需通过以下方式发送请求：

```
(psuedo code - in one thread, do the following when you need to request data over JMS)
myMessage = session.createTextMessage("My nice request");
messageProducer.send(myMessage); // using some previously setup producer
// commit if needed

mc = session.createConsumer(queue,"JMSCorrelationId='"+myMessage.getMessageId()+"'");
responseMessage = mc.receive(TIMEOUT);
if( responseMessage != null){
  //got OUR response data
}
// close down consumer here. 
```

允许多个消费者线程（或应用程序）的技巧是消费者中的选择器。JMS 选择器类似于 SQL 或类似查询语言的子集。在这种情况下，只需选择 JMSCorrelationId 与请求中的 id 相同的消息，然后再发送一段时间。

这是唯一的“安全”设置，您可以使用您拥有一个固定的共享队列并且请求必须返回到请求它的同一线程的约束来执行。

为了避免 JMS 选择器的开销，您可以使用临时队列进行回复，每个请求一个临时队列，然后将没有其他线程监听特定响应。获得性能的另一个选择是使应用程序更加异步。JMS 实际上促进了这一点，触发一个请求，并让一个消费者线程池处理任何异步响应——每个线程同样能够处理任何响应——例如处理数据并将其放入数据库（或类似数据库）。我不知道这种设计范式是否适用于您的情况，但您至少应该知道这一点。

# php - PHP打开文件并替换内容

> ID：11928626
> 
> 赞同：0
> 
> 时间：2012-08-13T05:32:55.083
> 
> 标签：php, regex, fopen, file-get-contents, fwrite

```
<?php
$modcontent = file_get_contents('hello.xml');
preg_match("/<Content(.*?)>(.+?)<\/Content/s", $modcontent, $xmlmatches);
$search  = array('<![CDATA[',']]>');
$replace = array('','');
$thenewone = str_replace($search, $replace, $xmlmatches[2]);
fopen('hello.xml');
fwrite($thenewone);
fclose('hello.xml');
?> 
```

嗨，从上面的代码开始（不起作用），你能不能让它修改 hello.xml 文件以只保留 之间的内容，就像在 preg_match 中一样？hello.xml 在这里[http://www.google.com/ig/modules/hello.xml](http://www.google.com/ig/modules/hello.xml)。由于我的PHP和我的英语知识相当低，我会用不同的语言再次解释，希望你能理解我的意思。我想要一个可以打开 hello.xml 文件、读取 Content 标签之间的内容、写入该内容并替换文件中其他所有内容并保存 hello.xml 文件的 PHP 脚本。因此，在所有这些操作之后，.xml 应该只包含*Hello, world!* . 非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:20:08.363

在这里使用我最喜欢的[DOMDocument](http://php.net/manual/en/class.domdocument.php)试试这个：

```
<?php 
$xml = file_get_contents('http://www.google.com/ig/modules/hello.xml');

$dom = new DOMDocument("1.0","UTF-8");
@$dom->loadXML($xml);
$dom->preserveWhiteSpace = false;
//Get the node by tag then get the textContent/nodeValue
$content = $dom->getElementsByTagName('Content')->item(0)->textContent;

//Hello, world! 
print_r($content);
//Write to file
file_put_contents('hello.txt',$content);
?> 
```

# php - php中的mysql长文本数据类型

> ID：11928628
> 
> 赞同：-1
> 
> 时间：2012-08-13T05:33:10.980
> 
> 标签：php, mysql

我正在用 PHP mysql 为我的网站开发 wap 论坛。现在在论坛的描述中我使用`longtext`数据类型。当用户输入超过 1500 个字符的描述时，它没有插入到数据库中。我已经搜索过并找到类似的内容

`TINYTEXT 256 bytes`

`TEXT 65,535 bytes ~64kb`

`MEDIUMTEXT 16,777,215 bytes ~16MB`

`LONGTEXT 4,294,967,295 bytes ~4GB`

那么为什么没有插入1500个字符以上的描述呢？这件事的解决方案是什么？

编辑：用于插入的代码（取自注释）：

```
$sql1="
    INSERT INTO 
        forum_top
        (catID,forumN,forumDescr,forum_time,uID,forum_attach) 
        VALUES ($cat_idd,'$top_namee','$top_descri','$tmform',$n_u_id,'$newfilename')"; 
if (!mysql_query($sql1,$con)) { die('Error: ' . mysql_error()); } 
```

$top_descri 来自：

```
 $top_descri =nl2br(mysql_real_escape_string($_POST['top_descri'])); 
```

我已经解决了它我使用了一些检查描述长度的函数，该函数的限制是 1500 个字符，所以它停止工作。现在工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:45:25.760

因为您使用**GET**方法提交表单？它的 URL 限制为大约 2000 个字符。您应该改用**POST**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:50:42.760

您的代码容易发生**[SQL 注入](http://bobby-tables.com/)**。使用**[PHP PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLi](http://php.net/manual/en/book.mysqli.php)**。

使用 PDO 的示例：

```
<?php
$stmt = $dbh->prepare("INSERT INTO forum_top(catID, forumN, forumDescr, 
                                       forum_time, uID, forum_attach) 
                      VALUES (?, ?, ?, ?, ?, ?)");

$stmt->bindParam(1, $cat_idd);
$stmt->bindParam(2, $top_namee);
$stmt->bindParam(3, $top_descri);
$stmt->bindParam(4, $tmform);
$stmt->bindParam(5, $n_u_id);
$stmt->bindParam(6, $newfilename);

$stmt->execute();

?> 
```

***请记住始终清理您的输入。您永远不会知道某些输入包含单引号。***

# python - 带有 Python CGI 的 Apache 错误日志

> ID：11928630
> 
> 赞同：0
> 
> 时间：2012-08-13T05:33:21.657
> 
> 标签：python, apache, shell, cgi

我试图理解 /var/logs/httpd/error_log 中的以下错误。当我通过 apache Web 服务器从 /var/www/cgi-bin 启动 python 脚本时，会引发错误。我不明白的是，它实际上看起来并不像错误，而是 I/O 统计信息。python 脚本触发一个 shell 脚本，该脚本通过 subprocess.Popen 下载带有 curl 的文件。我最好的猜测是下载过程有问题。此外，有时只会引发错误 - 其他时候 python 脚本和 shell 脚本运行时没有错误，并且文件按预期下载到服务器。日志中没有给出其他错误消息。

```
[Mon Aug 13 05:16:56 2012] [error] [client x.x.x.x]                         Dload  Upload   Total   Spent    Left  Speed
[Mon Aug 13 05:16:56 2012] [error] [client x.x.x.x] \r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
[Mon Aug 13 05:16:56 2012] [error] [client x.x.x.x] \r  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0
[Mon Aug 13 05:16:56 2012] [error] [client x.x.x.x] \r100   174    0   174    0     0     43      0 --:--:--  0:00:04 --:--:--    43
[Mon Aug 13 05:16:56 2012] [error] [client x.x.x.x] \r  0     0    0     0    0     0      0      0 --:--:--  0:00:03 --:--:--     0
[Mon Aug 13 05:16:56 2012] [error] [client x.x.x.x] \r100   348    0   348    0     0     85      0 --:--:--  0:00:04 --:--:--    85
[Mon Aug 13 05:16:56 2012] [error] [client x.x.x.x] \r  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0
[Mon Aug 13 05:16:57 2012] [error] [client x.x.x.x] \r100   174    0   174    0     0     49      0 --:--:--  0:00:03 --:--:--    50
[Mon Aug 13 05:16:57 2012] [error] [client x.x.x.x] \r  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0
[Mon Aug 13 05:16:57 2012] [error] [client x.x.x.x] \r100   174    0   174    0     0     40      0 --:--:--  0:00:04 --:--:--    40
[Mon Aug 13 05:16:57 2012] [error] [client x.x.x.x] \r  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0
[Mon Aug 13 05:16:57 2012] [error] [client x.x.x.x] \r  0     0    0     0    0     0      0      0 --:--:--  0:00:02 --:--:--     0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:20:25.610

此线程中的类似问题：[http ://www.velocityreviews.com/forums/t341052-curl-and-popen2.html](http://www.velocityreviews.com/forums/t341052-curl-and-popen2.html)

似乎“错误”输出是 curl 报告其进度，实际上并不是错误。将 --silent 放在 curl 命令中应该会抑制输出。我仍然不明白为什么它最终出现在错误日志中。

# java - 带有用户输入的 xsd 到 xml 工具

> ID：11928632
> 
> 赞同：0
> 
> 时间：2012-08-13T05:33:39.513
> 
> 标签：java, xml, jakarta-ee, xml-signature

有人可以建议我在 java 中执行以下操作的工具或转换器（1）用户将向 Tool 提供 XSD 文件。(2) 工具将解释 XSD 并显示一个屏幕以允许数据输入（根据 XSD 中定义的类型）。(3) 用户将输入值并单击“生成 XML”。(4) 工具将使用用户输入的值生成符合 XSD 定义的 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:04:52.393

您可以考虑使用[JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html)来访问 xml 文档。

# jquery - .keyup 或 .change 事件触发 jquery 中的只读字段？

> ID：11928636
> 
> 赞同：5
> 
> 时间：2012-08-13T05:33:53.040
> 
> 标签：jquery

我有输入字段列表。其中一些是只读字段。我正在使用 .keyup() 事件在输入字段发生变化时触发。但它不会影响只读字段。我也想以某种方式更改这些字段。有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T05:40:03.010

如果您调用`focus`只读输入字段，**则会**`keyup`触发事件。但是，在该字段中键入不会更改其值（毕竟，它是只读的）。也许您需要的是监听其属性的变化？**`value`**

 **我建议听一下`input`，`propertyChange`正如[这个答案](https://stackoverflow.com/a/9205280/520779)所建议的那样：

```
$('input').bind('input propertychange', function() {
    // Do something
}); 
```

这样，当您的输入值发生变化时（~~以任何方式~~），您都会收到通知。*编辑：*如果您以编程方式更改值，则不起作用 - 对于这种情况，唯一可行的跨浏览器替代方案涉及轮询（例如[this](http://darcyclarke.me/development/detect-attribute-changes-with-jquery/)）。更好的选择可能是使用诸如[knockout.js](http://knockoutjs.com/)之类的框架，它可以为您自动执行此操作，同时在视图和模型之间提供清晰的分离。这是[一个例子](http://jsfiddle.net/H68Sb/)。

* * *

**更新：**我记得在已删除的答案中阅读了您的评论，指出您正在以编程方式设置输入的值，对吗？（有 10k rep 的用户可以恢复它吗？）在这种情况下，为什么不让更改值的代码直接触发侦听器呢？

```
$(link).click(function() {
    $(readonlyInput)
        .val("some val") // Update the value
        .trigger('keyup'); // Trigger the listener
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T22:55:43.477

似乎 readonly 字段不侦听暗示诸如“input”、“keyup”等输入的事件，如果您认为这是一种合乎逻辑的行为，它们仍然会侦听 change 事件，那么为什么不使用“onchange”而不是输入事件，使用 jQuery 相当简单：对于

```
 $("input").filter(function(){
      return $(this).prop("readonly");      
 }).on("change", function(){
      // do something
 }); 
```

对于其他非只读输入

```
 $("input").filter(function(){
      return !$(this).prop("readonly");      
 }).on("keyup", function(){
      // do the same thing something
 }); 
```**

# spring - 如何在 Spring Security 中编写自定义过滤器？

> ID：11928637
> 
> 赞同：50
> 
> 时间：2012-08-13T05:33:58.297
> 
> 标签：spring, filter, spring-security

我想为每个请求接收一些信息，所以我认为与其为每个请求提供一个函数并分别从请求中获取这些信息，**不如有一个过滤器。
所以每个请求都应该通过那个过滤器，我就会得到我想要的。**

问题是：如何编写自定义过滤器？
*假设它不像任何预定义的弹簧安全过滤器，它是全新的。*

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-13T06:27:19.087

您可以使用标准的 Java 过滤器。只需将它放在 web.xml 中的身份验证过滤器之后（这意味着它将在过滤器链中稍后并在安全过滤器链之后调用）。

```
public class CustomFilter implements Filter{

    @Override
    public void destroy() {
        // Do nothing
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {

            HttpServletRequest request = (HttpServletRequest) req;

            Authentication authentication = SecurityContextHolder.getContext().getAuthentication();

            Set<String> roles = AuthorityUtils.authorityListToSet(authentication.getAuthorities());
            if (roles.contains("ROLE_USER")) {
                request.getSession().setAttribute("myVale", "myvalue");
            }

            chain.doFilter(req, res);

    }

    @Override
    public void init(FilterConfig arg0) throws ServletException {
        // Do nothing
    }

} 
```

web.xml 的片段：

```
<!-- The Spring Security Filter Chain -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Your filter definition -->
<filter>
    <filter-name>customFilter</filter-name>
    <filter-class>com.yourcompany.test.CustomFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>customFilter</filter-name>
    <url-pattern>/VacationsManager.jsp</url-pattern>
</filter-mapping> 
```

您还可以添加成功登录后将调用的处理程序（您需要扩展*SavedRequestAwareAuthenticationSuccessHandler*）。[看看这里](https://stackoverflow.com/a/11360650/1375049)如何做到这一点。我认为这是一个更好的主意。

* * *

**更新：**
或者您可以在安全过滤器的末尾使用此过滤器，如下所示：

```
<security:filter-chain-map>
    <sec:filter-chain pattern="/**"
            filters="
        ConcurrentSessionFilterAdmin, 
        securityContextPersistenceFilter, 
        logoutFilterAdmin, 
        usernamePasswordAuthenticationFilterAdmin, 
        basicAuthenticationFilterAdmin, 
        requestCacheAwareFilter, 
        securityContextHolderAwareRequestFilter, 
        anonymousAuthenticationFilter, 
        sessionManagementFilterAdmin, 
        exceptionTranslationFilter, 
        filterSecurityInterceptorAdmin,
        MonitoringFilter"/> <!-- Your Filter at the End -->
</security:filter-chain-map> 
```

并有你的过滤器，你可以使用这个：

```
public class MonitoringFilter extends GenericFilterBean{
@Override
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {
    //Implement this Function to have your filter working
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-01-05T17:33:49.447

只是把这个混在一起；如何使用`custom-filter`内部`http`元素：

```
<security:http auto-config="false" ...>
  ...
  <security:custom-filter position="FORM_LOGIN_FILTER" ref="MyCustomFilter" />
</security:http> 
```

# javascript - 在文本字段中添加值

> ID：11928643
> 
> 赞同：1
> 
> 时间：2012-08-13T05:34:42.150
> 
> 标签：javascript, function, textbox

我有一个输入文本，其值为“5+3”我相信这是一个纯字符串，无论如何在 alert() 函数中将其解析为 (8) 吗？5 + 3 是一个文本框的值，它没有被另一个文本框分隔。有没有任何javascript函数可以处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:38:27.963

`eval()`可以将字符串作为 JavaScript 语句执行：

```
<input type="text" id="addNums" />
var addNumsInput = document.getElementById('addNums'),
    val = addNumsInput.value;

alert(eval(val)); 
```

小提琴：http: [//jsfiddle.net/LAwm3/](http://jsfiddle.net/LAwm3/)

**仅供参考**，`eval is evil` [https://www.google.com/#hl=en&sugexp=les%3B&gs_nf=1&tok=WiRGhtSngs9KeYHImoAsFQ&cp=6&gs_id=3e&xhr=t&q=eval+is+evil&pf=p&output=search&sclient=psy-ab&oq=eval+ i&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=2aae9199cf6ab275&biw=1920&bih=989](https://www.google.com/#hl=en&sugexp=les%3B&gs_nf=1&tok=WiRGhtSngs9KeYHImoAsFQ&cp=6&gs_id=3e&xhr=t&q=eval+is+evil&pf=p&output=search&sclient=psy-ab&oq=eval+i&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=2aae9199cf6ab275&biw=1920&bih=989)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:39:24.990

您可以使用`eval()`：

```
alert(eval("5+3")); // alerts 8 
```

# javascript - Javascript/JQuery 中需要的魔法

> ID：11928644
> 
> 赞同：1
> 
> 时间：2012-08-13T05:34:49.813
> 
> 标签：javascript, jquery, css

我`li`在页面底部放置了导航链接，每个链接本身都有一个图像。在鼠标悬停时，在进入时，我将 li 的顶部设置为图像大小的负值，以便图像向上滑动，在鼠标离开时，我将顶部设置为 0。

要求包括一个`div`与每个 一起爬上去的`li`，有一些内容，并与`li`. 现在，问题就出现在这里，当我离开`li`进入鼠标时`div`，`li`水滴带走了`div`它。我尝试了绑定`mousemove`事件，`mouseleave`它获取鼠标坐标并检查鼠标是否在 中`div`，它工作正常，但是在尝试了超过 4 或 5 次之后，它`div`每次都停止动画，firebug 没有错误。

我已经用 css 试过了，包括`div`in `li`; 但是对于each `li`，所有 left 的`div`重叠`li`，否则这将是小菜一碟。

在下面的代码中，bgIdeas 就是`div`上面提到的。

**Javascript**

```
 a.cache.brand_nav.find("li a").hover(function (c) {
        if (a.isTablet && c.currentTarget.href !== f) d.location = c.currentTarget.href;
        else {
            c = b(this);
            c.stop(true, true).animate({ top: '-' + c.find("img").height() + 'px' }, 250, 'easeInCirc');
            $('#bgIdeas').stop(true, true).animate({ bottom: '+' + c.find("img").height() + 'px' }, 500, 'easeInCirc', false);
        }
    },
    function () {
        c = b(this);
        $('#bgIdeas').stop(true, true).animate({ bottom: '0px' }, 250, 'easeInCirc');
        c.stop(true, true).animate({ top: '0px' }, 250, 'easeInCirc');
        clearInterval(myRecFunc);
        $('.bgs').fadeIn(1000).show();
        continueSlideShow();
    }); 
```

注释的代码是我绑定 mousemove 事件以阻止 li 如果指针位于 div 上则下拉的代码。

**HTML**

```
 <ul class="clearfix">

  <li>
    <a style="top: 0px;" href="#" title="Ideas" class="ideas">
    <span class="top">
        <span class="logo">Ideas</span>
        <span class="description">abc<br>
          Click Here</span>
          <span class="creator"><small>abc</small><br>
          Click Here</span>
    </span>
    <img src="images/abc_thumb.jpg" alt="Ideas">
    </a>
  </li>

  <li>
      <a style="top: 0px;" href="#" title="def" class="def">
      <span class="top">
          <span class="logo">Def</span>
          <span class="description">Def<br>
          Click Here</span>
          <span class="creator"><small>Def</small><br>
          Click Here</span>
      </span>
      <img src="images/def_thumb.jpg" alt="Def">
      </a>
  </li>

  <li>
      <a style="top: 0px;" href="#" title="ghi" class="ghi">
      <span class="top">
          <span class="logo">ghi</span>
          <span class="description">ghi<br>
          Click Here</span>
          <span class="creator"><small>ghi</small><br>
          Click Here</span>
      </span>
      <img src="images/ghi_thumb.jpg" alt="ghi">
      </a>
  </li>

  <li>
      <a style="top: 0px;" href="#" title="jkl" class="jkl">
      <span class="top">
          <span class="logo">jkl</span>
          <span class="description">jkl<br>
          Click Here</span>
          <span class="creator"><small>jkl</small><br>
          Click Here</span>
      </span>
      <img src="images/jkl_thumb.jpg" alt="jkl">
      </a>
  </li>

  <li>
      <a style="top: 0px;" href="#" title="mno" class="mno">
      <span class="top">
          <span class="logo">mno</span>
          <span class="description">mno<br>
          Click Here</span>
          <span class="creator"><small>mno</small><br>
          Click Here</span>
      </span>
      <img src="images/mno_thumb.jpg" alt="mno">
      </a>
  </li>

</ul> 
```

# jquery - 绝对定位元素在 IE 中消失

> ID：11928649
> 
> 赞同：0
> 
> 时间：2012-08-13T05:35:27.910
> 
> 标签：jquery, asp.net, html, css, internet-explorer

我有一个 ASP.NET 页面，它有一个绝对定位的跨度，它充当隐藏 div 的按钮。它在 Firefox、Chrome 和 Safari 中运行良好，但在 IE 中消失了。我使用普通 HTML（不是 Web 表单）将相同的 HTML 结构和 CSS 复制到文本编辑器中，但它并没有消失。

这是HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Instructions</title>
        <style type="text/css">
            *
            {
                margin:0;
                outline:0;
                padding:0
            }

            body
            {
                font:normal 12px/1.4 Sans-Serif
            }

            #wrapper
            {
                margin:0 auto;
                width:940px
            }

            .instructions-container
            {
                overflow:hidden;
                position:relative
            }

            .instructions
            {
                border:3px solid #eee;
                margin:10px 0 0;
                padding:7px;
                position:relative
            }

            .hide-instructions
            {
                background:url(../images/icon/cancel.png) no-repeat scroll 0 0 red;
                cursor:pointer;
                display:block;
                height:16px;
                position:absolute;
                right:7px;
                top:7px;
                width:16px;
                zoom:1
            }

            .show-instructions
            {
                background:#eee;
                display:none;
                color:#666;
                float:right;
                padding:10px;
                text-decoration:none
            }

            .show-instructions:hover
            {
                background:#ccc
            }
        </style>
        <script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
        <script>
            $(document).ready(function () {
                InitializeInstructions();
            });

            function InitializeInstructions() {
                var instructions = $('.instructions'),
                    hide = $('.hide-instructions'),
                    show = $('.show-instructions');

                instructions.hide();
                show.show();

                hide.click(function () {
                    instructions.slideUp('slow');
                    show.slideDown('fast');
                });

                show.click(function () {
                    instructions.slideDown('slow');
                    show.slideUp('fast');
                });
            }
        </script>
    </head>
    <body>
        <div id="wrapper">
            <div class="instructions-container">
                <div class="instructions">
                    <h2>
                        Instructions
                    </h2>
                    <p>
                        Nulla vehicula volutpat nibh at semper. Praesent sem odio, dignissim eget scelerisque ut, ornare in enim. 
                        Fusce pellentesque rhoncus egestas. Vestibulum lobortis nunc ligula, a elementum ligula. Pellentesque luctus 
                        convallis sagittis. Nunc ut justo vitae elit luctus cursus a sed odio. Nam nec consectetur neque.
                    </p>
                    <span class="hide-instructions"></span>
                </div>
                <a class="show-instructions" href="#">
                    Show Instructions
                </a>
            </div>
        </div>
    </body>
</html> 
```

当您单击**a.show-instructions**时，div.instructions 与**span.hide-instructions**一起出现。事情是，它在 div 完成滑动后消失。

我真的不明白为什么**span.hide-instructions**在 aspx 页面中会消失；代码是一样的。帮助将不胜感激。

谢谢！

**更新：当您尝试突出显示文本并将鼠标悬停在 IE8 中的蓝色物体上时，跨度会重新出现**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T16:32:43.840

将以下样式添加到正在消失的元素中，这是一个 ie-quirk。

溢出：可见！重要；

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:52:42.360

尝试添加`z-index`属性。可能是图层问题。所以你`.hide-instructions`应该看起来像这样：

```
.hide-instructions
        {
            background:url(../images/icon/cancel.png) no-repeat scroll 0 0 red;
            cursor:pointer;
            display:block;
            height:16px;
            position:absolute;
            right:7px;
            top:7px;
            width:16px;
            zoom:1;
            z-index: 10000; /* Added a lot, because you never know */
        } 
```

# linux - linux中一个软件的名称，它可以通过在它们之间切换使一个控制台窗口使用多个shell

> ID：11928654
> 
> 赞同：1
> 
> 时间：2012-08-13T05:36:11.000
> 
> 标签：linux, shell, console

我记得linux里有一个软件。当我打开一个控制台窗口时，我可以拥有许多“控制台”或 shell。但它们都在一个窗口中。通过按一些键，我可以在它们之间切换 shell。在不打开新控制台的情况下，我只需要一个窗口。

我忘记了软件的名字。你能帮我提醒一下吗？

其实我觉得使用putty连接服务器每次输入密码只能打开一个控制台，非常浪费时间。我想通过只打开一次腻子来拥有许多贝壳。我想知道linux服务器是否支持那个或腻子支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T05:37:58.540

您正在寻找[`GNU screen`](http://en.wikipedia.org/wiki/GNU_Screen)或[`tmux`](http://en.wikipedia.org/wiki/Tmux)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:46:08.730

您可能会谈论 gnome-terminal。大多数现代终端模拟器都支持标签。您按（通常`ctrl-shift-T`），将创建新选项卡。`<something>-Fn`在标签键之间切换 。我不记得是什么了`<something>`，因为很久以前我已经将它重新映射为普通`Fn`键。GNU screen 和 tmux 也很好，但对于新手来说可能太复杂了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:10:41.980

我会推荐[终结者](http://www.tenshu.net/p/terminator.html)。真的很好用。

# rabbitmq - AMQP 1.0 的实现在哪里？等待有意义吗？

> ID：11928655
> 
> 赞同：24
> 
> 时间：2012-08-13T05:36:14.043
> 
> 标签：rabbitmq, amqp, qpid

我正在研究找出我们未来产品的消息传递解决方案，但我无法真正弄清楚这一点。

有一堆 AMQP 0.9.1 实现（RabbitMQ、Apache Qpid、OpenAMQ 等等），但没有 AMQP 1.0 实现，尽管 1.0 已在 2011 年 10 月完成。好吧，除了 SwiftMQ [1]。

阅读 1.0，它似乎与 1.0 之前的规范大相径庭，因此似乎可以理解，对工作正常的东西进行重大重写的热情不大。事实上，我不明白为什么 RabbitMQ 和其他人不会直接决定迁移到 ZeroMQ 而不是 AMQP 1.0。

尽管如此，我仍然找不到 1.0 之前的 AMQP 规范的实现者对此的任何明确声明，除了一些模糊的承诺，例如“努力始终实现最新的 AMQP 规范”。

**编辑：** RabbitMQ 实际上确实说

> [RabbitMQ 的未来版本将实现 AMQP 1.0。请联系我们。](http://www.rabbitmq.com/specification.html)

但是，[有些事情](http://web.archive.org/web/20090505005816/http://www.rabbitmq.com/specification.html)告诉我，该声明已有 3 年多的历史了，即它早于 AMQP 1.0 的发布。

那么是否有任何迹象表明 AMQP 1.0 可能成为标准，除了主要银行和微软支持它的事实吗？后者顺便说一句。没有自己的实现。

似乎 AMQP 0.9.1 比 1.0 更标准。

嗯，有[https://github.com/rabbitmq/rabbitmq-amqp1.0](https://github.com/rabbitmq/rabbitmq-amqp1.0)，它的自称状态是*原型*，显然有半年没有工作了。

[1] 我对 SwiftMQ 的第一印象是通过[它的作者对 Spring 缺乏 AMQP 支持的咆哮](http://forum.springsource.org/archive/index.php/t-121724.html)，这也是我暂时不考虑它的原因。我不想指望那个家伙的*支持*。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-17T10:39:50.887

AMQP 1.0 只是名义上的 AMQP 0-9-1 的替代品。两者是如此不同，因此给它们起不同的名称可能会更清楚。

选择当前的 0-9-1 实现不会限制您：

0-9-1 定义了代理和消息传递模型，而 1.0 定义了消息传输。因此，可以将 AMQP 1.0 传输与 0-9-1 结合起来，正如 RabbitMQ 在 2011 年纽约 AMQP 1.0 会议上所展示的那样。因为它是一种传输，所以 AMQP 1.0 也可以附加到专有和/或封闭的非免版税经纪人。

AMQP 1.0 刚刚进入“为期 60 天的公共审查期，以准备成员投票将其批准为 OASIS 标准”。

“为期 60 天的公开审查从 2012 年 8 月 14 日开始，到 2012 年 10 月 13 日结束。

这是一个公开的评论邀请。OASIS 征求潜在用户、开发人员和其他人（无论是否为 OASIS 成员）的反馈，以提高其技术工作的互操作性和质量。”

完整的细节在这里：

[https://www.oasis-open.org/news/announcements/60-day-public-review-for-advanced-message-queueing-protocol-amqp-v1-0-candidate-o](https://www.oasis-open.org/news/announcements/60-day-public-review-for-advanced-message-queueing-protocol-amqp-v1-0-candidate-o)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-03T05:35:04.393

OASIS AMQP 1.0 标准本周获得批准，请参阅[https://www.oasis-open.org/news/pr/amqp-1-0-approval](https://www.oasis-open.org/news/pr/amqp-1-0-approval)。就 1.0 实现而言，现在还为时过早，而且我知道正在进行很多开发，但是，到目前为止，这里有一个可用组件的列表：

经纪人：

*   SwiftMQ - [http://www.swiftmq.com/downloads/](http://www.swiftmq.com/downloads/)
*   Apache Qpid Java 代理（0.18 版本）- [http://qpid.apache.org](http://qpid.apache.org)
*   Microsoft Azure 服务总线 - [http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-amqp-overview/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-amqp-overview/)

客户端库：

*   SwiftMQ Java 客户端库 - [http://www.swiftmq.com/downloads/](http://www.swiftmq.com/downloads/)
*   Apache Qpid JMS 客户端库（0.18 版本） - [http://qpid.apache.com](http://qpid.apache.com)
*   Apache Qpid Proton-C - C 客户端库公司。Python 和 PHP 的绑定 - [http://qpid.apache.org/proton/](http://qpid.apache.org/proton/)
*   Apache Qpid Proton-J - Java 客户端库 - [http://qpid.apache.org/proton/](http://qpid.apache.org/proton/)
*   Microsoft Azure 服务总线 .NET 客户端 - [http://nuget.org/packages/ServiceBus.Preview](http://nuget.org/packages/ServiceBus.Preview)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-15T00:20:07.000

**根据RabbitMQ 团队**的声明，我可以找到最新的，根据他们**[过时](http://web.archive.org/web/20090505005816/http://www.rabbitmq.com/specification.html)**的规范[页面，](http://www.rabbitmq.com/specification.html)

> 是 AMQP 工作组的积极参与者，该工作组旨在今年提供可实施的 AMQP 1.0 草案。

这是来自 RabbitMQ 的*Simon MacMullen* 2012 年 1 月的消息（省略号，强调我的）：

> > 另外，为什么 RabbitMQ 会考虑不支持 1.0？是认为它可能不会被行业采用，还是其他什么？
> 
> [..]**它与 0-9-1 的差异如此之大，以至于我认为它**确实是一个不同的协议，尽管名称如此。[..]
> 
> 所以是的，**我想支持它，但**我也想支持 MQTT 和 SQS 以及 [..]
> 
> 而且**它可能不会看到太多的行业采用**，[..] 而且不想抱怨太多，**它相当沉重和复杂**，所以为了适当地支持它，我们会考虑*不要*做很多我们想做的其他事情.
> 
> 当然，**如果 AMQP 1.0 大幅起飞，那么这很可能会改变一切**。

来源：[https ://groups.google.com/d/topic/rabbitmq-discuss/9Hj0FzgyLQk/discussion](https://groups.google.com/d/topic/rabbitmq-discuss/9Hj0FzgyLQk/discussion)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-13T09:18:40.450

还有其他 1.0 实现。即将发布的 Qpid 版本（可能会在接下来的几周内发布）将为 JMS 客户端和 Java 代理提供 1.0 支持。对其他组件的 1.0 支持的工作正在进行中（针对后续版本），并且基于新的质子库，该库旨在作为一种简单的方式将 1.0 支持添加到现有代理或其他受益于的系统1.0 支持。因此，Qpid 项目肯定致力于全面支持 1.0，它最终将取代所有以前的版本。API 旨在简化向 1.0 的过渡。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T14:03:50.327

悲伤，但特别是支持是您可以依靠我的东西。;-)

要回答您的问题等待是否有意义：是的！为什么？看看[质子](http://qpid.apache.org/proton/)。

> Proton 基于 AMQP 1.0 消息传递标准。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T23:45:50.893

根据[http://geekswithblogs.net/michaelstephenson/archive/2012/08/12/150399.aspx](http://geekswithblogs.net/michaelstephenson/archive/2012/08/12/150399.aspx)：

> AMQP 目前不支持本地或云中的服务总线，但是有一个网络广播解释了微软对 AMQP 的立场，这听起来像是未来版本中的一个重要功能

所以：

> 等待有意义吗？

我想可以公平地说答案是：**不**。

*   ~~尽管有最初的热情，但 MS 仍然不存在，~~`AMQP`我在公告和[最近发布的](https://blogs.msdn.com/b/windowsazure/archive/2012/10/24/announcing-public-availability-of-service-bus-for-windows-server-service-bus-1-0.aspx?Redirected=true) `Service Bus for Windows Server` **更新**的文档中找不到任何提及：MS 方面有消息，请参阅 David Ingham 的回答。
*   `the upcoming Qpid release (probably available in the next couple of weeks) will have 1.0 support for the JMS client and the Java broker`，那是 11 周前。预测当然很难，但事实上，它仍然不在这里。

因此，从最近的公告和声明来看，除了 SwiftMQ 之外，没有任何可行的 AMQP 1.0 实现，也没有太多的热情。我希望 Qpid 很快就会发布，毕竟 1.0 起草者是该项目的成员 - 但如果不是，那就像棺材上的最后一颗钉子。

无论如何，AMQP 1.0 并未被广泛采用，并且没有可靠的迹象表明它会在可预见的将来变得如此。

# java - 在 Java 中对子类进行排序

> ID：11928656
> 
> 赞同：5
> 
> 时间：2012-08-13T05:36:17.407
> 
> 标签：java, sorting, inheritance

假设一个`Superclass implements Comparable<Superclass>`，这样`Arrays.sort(ArrayOfSuperInstances);`使用这种`compareTo(Superclass other)`方法进行排序。这是否保证 的实例数组`Subclass extends Superclass`将使用相同的方式排序`Arrays.sort(ArrayOfSubInstances);`？（假设 compareTo 在子类定义中没有重载）

或者换句话说，`Subclass`默认情况下会继承它的`compareTo`方法`Superclass`，这样人们就可以盲目地使用`Arrays.sort()`知道它们将被排序为超类吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T06:05:04.097

是的——这就是多态性背后的全部原则，特别是[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。基本上，如果 A 是 B 的子类，那么您应该能够在任何可以使用 B 的地方使用 A，并且它的行为本质上应该与 B 的任何其他实例（或 B 的其他子类）相同。

所以，它不仅会发生，而且几乎总是你想要发生的事情。在子类中通常是错误`compareTo`的。

为什么？好吧，`Comparable<T>`合同的一部分是比较是传递的。由于你的超类可能不知道它的子类在做什么，如果一个子类`compareTo`以这样一种方式覆盖，它给出的答案与它的超类不同，它就会违反合同。

例如，假设您有类似 Square 和 ColorSquare 的东西。Square`compareTo`比较两个正方形的大小：

```
@Override
public int compareTo(Square other) {
    return this.len - other.len;
} 
```

...而 ColorSquare 还添加了颜色比较（假设颜色是 Comparable）。Java 不会让你有 ColorSquare 实现`Comparable<ColorSquare>`（因为它的超类已经实现`Comparable<Square>`），但你可以使用反射来解决这个问题：

```
@Override
public int compareTo(Square other) {
    int cmp = super.compareTo(other);
    // don't do this!
    if (cmp == 0 && (other instanceof ColorSquare)) {
        ColorSquare otherColor = (ColorSquare) other;
        cmp = color.compareTo(otherColor.color);
    }
    return cmp;
} 
```

乍一看，这看起来很无辜。如果两个形状都是 ColorSquare，它们会比较长度和颜色；否则，他们只会比较长度。

但是如果你有：

```
Square a = ...
ColorSquare b = ...
ColorSquare c = ...

assert a.compareTo(b) == 0;  // assume this and the other asserts succeed
assert a.compareTo(c) == 0;
// transitivity implies that b.compareTo(c) is also 0, but maybe
// they have the same lengths but different color!
assert b.compareTo(c) == 1; // contract is broken! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T05:41:24.670

默认情况下，如果您没有覆盖`compareTo`，则将使用其超类的实现。

* * *

现在来*最佳实践*，打开`Effective Java`^(TM)

`compareTo`（方法也是如此）的基本合同`equals`是：

1.  [自反性](http://en.wikipedia.org/wiki/Reflexive_relation)：`x.compareTo(x)`应始终为 0，
2.  对称性：`x.compareTo(y)`并且`y.compareTo(x)`应该总是返回相反的符号或 0，
3.  传递性： if`x.compareTo(y) > 0`和`y.compareTo(z) > 0`; 然后`x.compareTo(z) > 0`

和

> ...没有办法在保留 compareTo 合同的同时用新的值组件扩展可实例化类，除非您愿意放弃面向对象抽象的好处

**更新**（感谢[yshavit](https://stackoverflow.com/questions/11928656/sorting-a-subclass-in-java/11928712#comment15887234_11928712)）

~~所以，你必须知道你在处理什么。理想情况下，我也会写一个`compareTo`in 子类，它可能使用也可能不使用 superClass 的`compareTo`.~~ （对我造成的混乱感到抱歉）

实现`compareTo`或`equals`在您的子类中，您将破坏*对称性*或*传递性*。请参阅第 7 条，有效的 Java ^(TM)。它表明没有办法扩展一个类并以不同的方式覆盖`equals`方法（与 具有相同的合同`compareTo`）：

> 根本没有办法扩展一个可实例化的类并添加一个方面，同时保留 equals 合同。但是，有一个很好的解决方法。遵循第 14 条“优先组合优于继承”的建议。不要让 ColorPoint 扩展 Point，而是给 ColorPoint 一个私有 Point 字段和一个公共视图方法（第 4 项）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:40:58.353

它应该，除非你`compareTo`的被覆盖或者如果调用一些被覆盖的方法。一个更好的问题将显示您尝试时发生了什么，以及您关心的是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T05:42:00.987

是的，行为将与您没有覆盖 compareTo 方法相同，但是请确保您的子类不会以可能破坏超类中实现的 compareTo() 方法中的代码的方式更改任何属性

# java - 如何在 UI 窗口中通过来自主类的消息显示消息？

> ID：11928658
> 
> 赞同：1
> 
> 时间：2012-08-13T05:36:30.697
> 
> 标签：java, swing, swt, awt

不幸的是，我无法在主程序窗口（对象 g）中逐步输出。

## 主要课程的一部分：

```
/* Create a main window  of GUI*/  
    Gui g = new Gui();        
    g.showitself(); /*object is shown on the screen*/

    /*Check folder existing*/
    boolean inOutFilesFolderExists = (new File(vars.diskLetter+"//"+vars.ppmRootFolder+"//"+vars.inOutFilesFolder).exists());
         if (inOutFilesFolderExists)
            {
             System.out.println("Folder exists."); /*it is just for understanding if-operator works*/
             String textMessage = "\n"+"Folder " + vars.diskLetter+"//"+vars.ppmRootFolder+"//"+vars.inOutFilesFolder + "exists."+"\n" ; /*the message that I want to show in the main screen*/
             g.printmessage(logCurDateTime, textMessage); /*I am trying to show textMessage in the main GUI window by this method - g.printmessage  */
             }
         else
             { System.out.println("Folder doesn’t exists.");
            String textMessage = "Folder " + vars.diskLetter+"//"+vars.ppmRootFolder+"//"+vars.inOutFilesFolder + " doesn’t exist and will be created." ;
             g.printmessage(logCurDateTime, textMessage);
             new File(vars.diskLetter+"//"+vars.ppmRootFolder+"//"+vars.inOutFilesFolder).mkdirs();
             }
/** Now I am trying to create a new text message that should follow after previous text message */
            String textMessage = "Hello, Java Log.";
           // get to g object variables for showing 
            g.printmessage(logCurDateTime,  textMessage); 
```

## 图形界面类：

```
 public class Gui {
                        Border solidBorder = BorderFactory.createLineBorder(Color.GRAY, 6);
                        Font font = new Font("Verdana", Font.PLAIN, 12);
                       //method which shows the main window of GUI
                        JFrame main_Window = new JFrame("PPM v.2.0");
                        public void showitself ()
                       {
                            main_Window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                            main_Window.setSize(800, 400);
                            main_Window.setVisible(true);
                       }
                        /*This method should show messages from main class */
                        void printmessage (String logCurDateTime, String textMessage)
                       {
                       JLabel label = new JLabel("      " + logCurDateTime + " - " + textMessage +"\n");
                        main_Window.getContentPane().add(label);
                        }
        } 
```

结果，我只收到带有最后一条消息“Hello, Java Log.”的 GUI 主屏幕。据我了解，这意味着上一条消息被下一条重写，但我需要消息的串行输出（逐条消息），如下所示：

> logCurDateTime - 文件夹存在。（或文件夹不存在，将被创建。）
> 
> logCurDateTime - “你好，Java 日志。”

我也正在尝试将（使用`eclipse.swt`库）printmessage 方法重新编码为

```
void printmessage (String logCurDateTime, String textMessage)
             {

             JTextArea mainTextArea = new JTextArea();
             mainTextArea.append(logCurDateTime + textMessage +"/n");
             } 
```

但这无济于事（根本没有任何消息）。

如何制作一个代码来一一显示来自主类的消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T05:42:23.717

该`printmessage`方法正在创建 a 的新实例，`JTextArea`但从未将该实例添加到容器中。似乎应该在构造函数或`initComponents()`方法中实例化并添加一次文本区域。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T10:35:31.180

默认情况下，内容窗格的布局是 BorderLayout。您可以将其替换为 GridLayout 或 BoxLayout。

```
// a GridLayout
main_Window.getContentPane().setLayout(new GridLayout(0, 1));
// or a BoxLayout
JPanel panel = new JPanel();
panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
main_Window.setContentPane(panel); 
```

GridBagLayout 也是一个可能的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:16:01.350

谢谢大家！此类在框架中逐条显示消息：

```
public class Gui {
    Border solidBorder = BorderFactory.createLineBorder(Color.GRAY, 6);
    Font font = new Font("Verdana", Font.PLAIN, 12);

    JFrame main_Window = new JFrame("PPM v.2.0");
    JTextArea mainTextArea = new JTextArea(5, 200);

    public void showitself ()
    {

            main_Window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            main_Window.setSize(800, 400);
            main_Window.setVisible(true);
            main_Window.add(mainTextArea);

    }

    public void printMessage(final String textMessage) {
        if (EventQueue.isDispatchThread()) {
            appendMessage(textMessage);
        } else {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    appendMessage(textMessage);
                }
            });
        }
    }

    private void appendMessage(String message) {
        mainTextArea.append(message);
        mainTextArea.append("\n");
    }

} 
```

# iptables - 如何在使用 Iptables 重定向到 URL 时将请求的 MAC 地址作为参数发送？

> ID：11928667
> 
> 赞同：0
> 
> 时间：2012-08-13T05:37:23.153
> 
> 标签：iptables, ebtables

我想将客户端重定向到不同的 URL。我已经使用端口重定向完成了这项工作。但现在我想要客户端的 MAC 地址作为 URL 的参数。如何获取 MAC 地址并使用 URL 发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:44:49.407

MAC 地址，不是您可以从应用程序级别获得的东西，例如：客户端浏览器或服务器。请参阅[http://en.wikipedia.org/wiki/OSI_model](http://en.wikipedia.org/wiki/OSI_model)了解它的距离。这就像从乘客座椅的仪表板上要求维修火花塞一样。

当且仅当您的客户端允许运行定制的二进制可执行文件、查找网络接口的 MAC 地址以及以某种方式回拨到您的服务器时，这是否可能。如果您正在寻找阻止/接受 WiFi 路由器的 MAC 地址，请注意它们仅在本地接口级别上工作，也就是说，就在路由器附近。使用 MAC 地址，在硬件级别传输 IP 数据包，但是，一旦它到达另一个路由器，它就会被丢弃。只有 IP 数据包才能在穿越多个路由器的漫长旅程中幸存下来，一路修改 TTL 直到它到达您的服务器。

A better approach would be to handle client side detection with Cookie + https + 1x1 dot images to track unique visitors, and user agents, all combined with a login/password pair. Detecting if it is a valid client, based on the cookie is much practical then trying to install a binary on client's side to peek for a MAC address that may not even be unique (if they modify it with tools, it can be anyting...)

# objective-c - iOS 5 目标 C 方向

> ID：11928668
> 
> 赞同：-1
> 
> 时间：2012-08-13T05:37:31.137
> 
> 标签：objective-c, ios5, orientation-changes

我正在学习在 iOS5 上为 iPhone 开发应用程序。我之前没有任何其他版本的经验。我想支持多个方向，最近我一直在寻找。但我还没有找到解决方案。

1）我可以使用导航控制器，它会根据方向变化将视图控制器推入和弹出堆栈。但这意味着我必须将所有内容复制 2 份，一份用于风景，一份用于肖像。

2）我制作了一个新的横向视图控制器。在 potrait 视图控制器的 willRotateToInterfaceOrientation 方法中，我初始化了 landscpe 视图控制器的一个实例并将其设置为 presentViewController。在横向 VC 中，我初始化了一个 potrait 实例并执行相同操作。但我认为这只会占用越来越多的内存，因为这些实例不会像导航控制器那样被“弹出”。（我还没有阅读内存管理指南）

3）有一些关于调整视图大小的事情。我确实很了解这种方法。

请建议通常使用的方法是什么以及为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:51:37.973

不需要为横向和纵向创建单独的 ViewController。

```
If suppose You have a button named btnSample.

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  UIInterfaceOrientation des=self.interfaceOrientation;
  if ((interfaceOrientation==UIInterfaceOrientationPortrait)||(interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown))
    { 
```

//肖像

```
btnSample.frame=CGRectMake(10,10,100,70);

    }
  else
  { 
```

//景观

```
btnSample.frame=CGRectMake(200,100,100,70);

  } 
```

}

# python - 如何使用 Python 检查数字是否为 32 位整数？

> ID：11928669
> 
> 赞同：12
> 
> 时间：2012-08-13T05:37:32.657
> 
> 标签：python, int

在我的程序中，我正在查看一个字符串，我想知道它是否代表一个 32 位整数。

目前我首先检查它是否是一个数字`isdigit()`，然后我检查它是否超过 2^32 的值（假设我不关心无符号值）。

检查我的输入字符串是否包含有效的 32 位整数的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T06:44:55.287

换个思路，看看值是否可以打包成 4 个字节：

```
>>> from struct import pack, error
>>> def test_32bit(n):
...     try:
...             pack("i", n)
...     except error:
...             return False
...     return True
... 
```

如果使用无符号值，`pack("I", n)`则改为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-01T11:46:59.690

假设最大的 32 位整数是[`0xffffffff`](https://en.wikipedia.org/wiki/2,147,483,647)，

然后，我们需要检查我们的数字是否大于这个值：

```
abs(n) <= 0xffffffff 
```

在数字周围加上一个`abs()`也可以处理负面情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T06:04:44.543

对于无符号值，这将起作用：

```
>>> def is32(n):
...     try:
...         bitstring=bin(n)
...     except (TypeError, ValueError):
...         return False
...         
...     if len(bin(n)[2:]) <=32:
...         return True
...     else:
...         return False    
... 
>>> is32(2**32)
False
>>> is32(2**32-1)
True
>>> is32('abc')
False 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-13T06:18:04.967

```
>>> def is_int32(number):
...     try:
...         return not(int(number)>>32)
...     except ValueError:
...         return False 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-17T18:50:39.533

简单的解决方案将是这样的

```
if abs(number) < 2**31 and number != 2**31 - 1:
   return True
else:
   return False 
```

如果我们的号码在`[−2^31, 2^31 − 1]`范围内，我们很高兴

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-06T12:15:13.597

```
>>> def is_32_bit(n: int) -> bool:
...     if n in range(-2 ** 31, (2**31) - 1):
...         return True
...     return False
... 
>>> is_32_bit(9999999999)
False
>>> is_32_bit(1)
True 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-24T10:18:51.387

我们可以使用左移运算符来应用检查。

```
def check_32_bit(n):
    return n<1<<31 
```

# android - 获取当前关注/正在运行的应用程序的名称或包名（android）

> ID：11928672
> 
> 赞同：0
> 
> 时间：2012-08-13T05:37:51.100
> 
> 标签：android, android-activity

> **可能重复：**
> [Android：如何在屏幕上获取当前打开的应用程序名称](https://stackoverflow.com/questions/11118721/android-how-can-i-get-current-opened-application-name-on-screen)

我正在开发小型 android 应用程序。在我的应用程序中，我正在显示所有安装应用程序的列表。现在，每当用户打开其他应用程序时，我想要做什么，检查该应用程序名称是否出现在我的列表中。

为此，我需要实现一个后台服务或广播接收器类型的功能，持续监听其他应用程序的启动或恢复。我知道这种功能被认为是恶意活动。但是很多其他应用程序，如任务杀手、应用程序安全锁正在做那种东西。

有没有办法实现这种功能。需要帮助......谢谢......

# c# - 在page_load的if条件中调用一个函数？

> ID：11928674
> 
> 赞同：-1
> 
> 时间：2012-08-13T05:37:58.930
> 
> 标签：c#

我在页面加载中有一个 If 条件。我可以在 if 条件中调用一个函数吗？

```
if( //I need to call function here with parameters..)
        {
            messageOut = "invlid user";
        } 
```

函数看起来像这样

```
public void CheckUserExistAndReporter(int Source,string messageIn)
{
   // Some code goes here
} 
```

在这里我尝试了如下，正确吗？

```
if(CheckUserExistAndReporter(int Source,string messageIn) )
    {
        messageOut = "invlid user";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:40:29.347

是的，您可以这样做，但该函数应该返回一个布尔值。

看一下这个

```
if(CheckUserExistAndReporter(someintegervalue, somestringvalue)
{
    messageOut = "invlid user";
} 
```

函数看起来像这样

```
public bool CheckUserExistAndReporter(int Source,string messageIn)
{
   // Some code goes here
   return true; // or false depending on method.
} 
```

`Here i tried it out like below,Is that correct?`

```
if(CheckUserExistAndReporter(int Source,string messageIn) )
{
    messageOut = "invlid user";
} 
```

不，这是不正确的。当您调用未声明参数的方法时，它们已在方法声明中声明。在调用时，您只需为这些参数提供值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:41:18.537

是的，你可以，像这样

```
if(CheckUserExistAndReporter(Source,messageIn))
{
    messageOut = "invlid user";
}

public bool CheckUserExistAndReporter(int Source,string messageIn)
{
   // Some code goes here

   return true; // when user exists 

   return false; // when user does not exist
} 
```

# c# - 如何在 asp.net 网站中添加多语言文本？

> ID：11928684
> 
> 赞同：-1
> 
> 时间：2012-08-13T05:38:42.193
> 
> 标签：c#, asp.net

我是 asp.net 的新手。我正在制作一个文本是多语言的网站。当我在文本框中添加不同语言（英语除外）的文本并提交时。然后它显示未格式化的文本模式。所以告诉我如何向网站添加多语言文本（英语除外）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:46:25.310

这是 Asp.net 中的全球化概念。看看这些样本

*   [代码项目](http://www.codeproject.com/Articles/7998/Creating-multilingual-websites-Part-1)
*   [Asp.net 博客](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-multi-lingual-site-with-localization)

# c# - 在 c# 中使用字典和 linq 将英文数字替换为阿拉伯数字时出错

> ID：11928686
> 
> 赞同：1
> 
> 时间：2012-08-13T05:38:48.120
> 
> 标签：c#, linq, dictionary

我使用字典和 linq 编写了一个函数，用于将任何给定字符串中的英文数字替换为阿拉伯数字。但是该功能并没有完全替换。例如，如果英文数字是 12345，则阿拉伯数字是 12534 或阿拉伯语中的 53214。可能是什么问题？

我的功能如下，

```
private Dictionary<string, string> NumbersInArabic()
{
    Dictionary<string, string> dictionary = new Dictionary<string, string>();

    dictionary.Add("0", "٠");
    dictionary.Add("1", "١");
    dictionary.Add("2", "٢");
    dictionary.Add("3", "٣");
    dictionary.Add("4", "٤");
    dictionary.Add("5", "٥");
    dictionary.Add("6", "٦");
    dictionary.Add("7", "٧");
    dictionary.Add("8", "٨");
    dictionary.Add("9", "٩");

    return dictionary;
}

private string ReplaceNumberTextToArabic(string text)
{
    var newstr = NumbersInArabic().Aggregate(text, (current, value) => current.Replace(value.Key, value.Value));
    return newstr.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:57:15.513

我已经写了你的方法，它在我的最后工作正常。

我认为您的问题出在其他地方。

# android - Andegine 或统一

> ID：11928688
> 
> 赞同：5
> 
> 时间：2012-08-13T05:39:00.050
> 
> 标签：android, game-engine

我是 android 新手，但我一直在计划创建一些基本游戏。我想加入游戏开发。我看过很多关于如何使用 andengine 创建游戏的教程。但是在搜索其他教程时，我遇到了 UNITY。而且它也支持安卓和IOS。另一个是monogame，您可以使用c sharp 创建android 游戏？我的问题是，初学者学习游戏开发哪个更好？是UNITY还是andengine还是monogame？请告诉我你的意见。我需要一个关于我应该从哪里开始的指南？我真的很想创建安卓游戏并想掌握它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:08:51.340

AndEngine 将提供最佳的 Android 特定功能。Unity 将允许更轻松地跨平台移植。

但是，正如您所说，您是 Android 新手，您现在不应该真正尝试制作游戏。相反，在尝试制作游戏之前，您应该至少花 4-6 个月的时间学习 Android、OpenGL 和一些特定于游戏的概念。

# java - 增加tomcat7 maven插件的内存？

> ID：11928689
> 
> 赞同：28
> 
> 时间：2012-08-13T05:39:03.783
> 
> 标签：java, maven, tomcat7

我想使用 tomcat7-maven-plugin 直接从 maven 启动一个嵌入式 tomcat7 实例。这工作正常，但启动的 Tomcat 似乎没有足够的内存。我怀疑我需要设置

```
-XX:MaxPermSize=256m 
```

但我不知道该怎么做。

文档说应该在插件的“配置”部分使用“systemProperties”元素。但是，这些选项被指定为 XML 元素，并且需要如下所示：

```
<configuration>
  <systemProperties>
    <XX:MaxPermSize>256m</XX:MaxPermSize>
  </systemProperties>
</configuration> 
```

但这当然是不可能的，因为它破坏了 XML（XX 被解释为命名空间）。

当然我可以通过设置环境变量来解决这个问题

```
MAVEN_OPTS=-XX:MaxPermSize=256m 
```

但我宁愿只为嵌入式 Tomcat 增加它。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-04T11:44:26.157

正如大多数人在上面的评论中所说的那样， pom.xml 中的属性没有效果。对我有用的是设置我的 MAVEN_OPTS

```
MAVEN_OPTS="-Xmx512m -XX:MaxPermSize=256m" 
```

或者在 cmd 终端中的 Windows 上：

```
set MAVEN_OPTS=-Xmx512m -XX:MaxPermSize=256m 
```

对于 mac/linux 用户，只需将 export 语句添加到您的 ~/.profile（或类似的文件名）。例如：

```
export MAVEN_OPTS="-Xmx512m -XX:MaxPermSize=256m" 
```

并重新启动你的外壳。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T07:30:39.947

可以这样设置属性

```
<configuration>
  <systemProperties>
    <JAVA_OPTS>-Xms256m -Xmx512m -XX:MaxPermSize=256m</JAVA_OPTS>
  </systemProperties>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T15:06:40.280

这个对我有用：

```
<plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <version>...</version>
    <configuration>
        <container>...</container>
        <configuration>
            <type>standalone</type>
            <home>...</home>
            <properties>
                <cargo.jvmargs>-Xmx4096m</cargo.jvmargs>
            </properties>
        </configuration>
        <deployables>...</deployables>
    </configuration>
</plugin> 
```

它使用参数“-Xmx4096m”在新的 JVM 中启动我的 tomcat8。

# webserver - websockets如何保持持久连接以及在现场使用它有多稳定？

> ID：11928693
> 
> 赞同：4
> 
> 时间：2012-08-13T05:39:40.787
> 
> 标签：webserver, websocket, event-based-programming

我需要一个基于事件的服务器，可以轻松地将数据推送到客户端。正如我在论坛中读到的那样，基于 websocket 的服务器是我最好的选择。请解释它的工作原理以及它在生产盒上的使用稳定性如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:46:44.787

因为 web sockets 太新了，我不相信很多应用服务器对 web sockets 有很好的支持。例如 Tomcat 声明如下“Tomcat 为 RFC 6455 定义的 WebSocket 提供支持。此功能尚未最终确定，鼓励您以错误报告的形式提供反馈”。但是，如果您以稍微不同的方式查看架构，则可以利用 Web 套接字的优势。将发送基于事件的股票报价更改的[示例应用程序](http://demo.kaazing.com/portfolio/)可以按以下逻辑步骤工作。

1) 客户端应用程序（网络应用程序或其他启用网络套接字的应用程序）将与请求的资源服务服务器建立网络套接字连接。
2）然后服务器将负责接收外部（后端事件）并选择哪些客户端接收相应的消息。
3) 然后该消息将通过 websocket 连接发送到客户端。标准定义的 Websocket 应允许该连接在客户端在线时保持打开状态，并且应近乎实时地传递该数据。此外，它将提供在标准化端口/协议上运行的优势，可以通过网络可靠地交付。

从这里您可以看到基础架构实际上有 4 个逻辑部分。1) 为接收事件而定制的后端。对于股票报价，这将是机构后端。2) 负责将事件逻辑链接到相应客户端的消息代理。3）到客户端的websocket连接。4) 客户本身

**后端：**真的可以写成任何必要的东西来连接你的事件。对于股票报价系统，这将是一些链接到金融服务提供商的自定义应用程序

**对于 Message Broker**，我建议您使用 JMS 或 AMQP 来处理您的“基于事件的服务”。这些消息代理在很多企业应用程序中都有很好的定义和使用。从硬件的角度来看，它们可以直接在您的后端或单独运行。此外，它们为您提供了您可能希望在应用程序中使用的各种服务（点对点、发布订阅等）。或者，如果你想创建自己的自定义消息服务，你可以使用 Netty 之类的东西。

**对于 websocket 连接**，您需要一个可以轻松可靠地连接到您的消息代理系统的服务。例如，Kaazing（我为 Kaazing 工作的免责声明和全面披露）提供了企业 AMQP 版本和 JMS 版本，可以直接连接到您的消息代理。

**客户端问题：**包括浏览器是否支持 web-sockets 以及什么是回退机制（长轮询、ajax）。这些实际上取决于您用于创建 websocket 连接的服务。虽然有很多提供回退机制的开源服务，但 Kaazing 还提供了一个模拟的 websocket 连接，它在逻辑上更像是 websockets，而不是 websockets 被创建来替代的回退机制（长轮询/ajax）。

在稳定性方面：JMS 和 AMQP 被广泛使用且稳定。有一份令人印象深刻的行业用户名单，他们已经在使用他们的技术。

查看此实时[Web 架构白皮书](http://kaazingcorp.cachefly.net/com/file/Kaazing-WP-Living-Web-Architecture-Mar-2012.pdf)以获取更多详细信息

# facebook - 如何知道我获得了多少 Facebook 赞？

> ID：11928696
> 
> 赞同：0
> 
> 时间：2012-08-13T05:39:59.570
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-fql

我想知道我在 Facebook 获得了多少赞。包括我的评论、帖子、分享...

有没有办法计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:00:06.570

`SELECT url, normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count FROM link_stat WHERE url="[INSERT YOUR URL HERE]"`

欲了解更多信息，请访问： [https ://developers.facebook.com/docs/reference/fql/link_stat/](https://developers.facebook.com/docs/reference/fql/link_stat/)

# python - Mechanize [Errno 10054] 现有连接被远程主机强行关闭

> ID：11928697
> 
> 赞同：3
> 
> 时间：2012-08-13T05:40:02.307
> 
> 标签：python, mechanize

我浏览了整个互联网，但找不到解决此错误的方法。有谁知道发生了什么？

**代码：**

```
for index in range(len(sections)):      
    br.select_form(name="win1")
    post_url, post_data, headers =  br.form.click_request_data()
    post_data = post_data.replace("ICAction=None", "ICAction=DERIVED_CLSRCH_SSR_CLASSNAME_LONG$"+str(index))
    r = br.open(post_url, post_data) ##ERROR ON THIS LINE
    html = r.read()

    if index < range(len(sections)):
        br.select_form(name="win1")
        post_url, post_data, headers =  br.form.click_request_data()
        post_data = post_data.replace("ICAction=None", "ICAction=CLASS_SRCH_WRK2_SSR_PB_BACK")
        r = br.open(post_url, post_data)
        html = r.read() 
```

**错误日志**

```
[Sun Aug 12 22:28:04 2012] [error] Traceback (most recent call last):
[Sun Aug 12 22:28:04 2012] [error]   File "C:/wamp/www/python/scrape.py", line 131, in application
[Sun Aug 12 22:28:04 2012] [error]     r = br.open(post_url, post_data)
[Sun Aug 12 22:28:04 2012] [error]   File "build\\bdist.win-amd64\\egg\\mechanize\\_mechanize.py", line 203, in open
[Sun Aug 12 22:28:04 2012] [error]     return self._mech_open(url, data, timeout=timeout)
[Sun Aug 12 22:28:04 2012] [error]   File "build\\bdist.win-amd64\\egg\\mechanize\\_mechanize.py", line 230, in _mech_open
[Sun Aug 12 22:28:04 2012] [error]     response = UserAgentBase.open(self, request, data)
[Sun Aug 12 22:28:04 2012] [error]   File "build\\bdist.win-amd64\\egg\\mechanize\\_opener.py", line 193, in open
[Sun Aug 12 22:28:04 2012] [error]     response = urlopen(self, req, data)
[Sun Aug 12 22:28:04 2012] [error]   File "build\\bdist.win-amd64\\egg\\mechanize\\_urllib2_fork.py", line 344, in _open
[Sun Aug 12 22:28:04 2012] [error]     '_open', req)
[Sun Aug 12 22:28:04 2012] [error]   File "build\\bdist.win-amd64\\egg\\mechanize\\_urllib2_fork.py", line 332, in _call_chain
[Sun Aug 12 22:28:04 2012] [error]     result = func(*args)
[Sun Aug 12 22:28:04 2012] [error]   File "build\\bdist.win-amd64\\egg\\mechanize\\_urllib2_fork.py", line 1170, in https_open
[Sun Aug 12 22:28:04 2012] [error]     return self.do_open(conn_factory, req)
[Sun Aug 12 22:28:04 2012] [error]   File "build\\bdist.win-amd64\\egg\\mechanize\\_urllib2_fork.py", line 1118, in do_open
[Sun Aug 12 22:28:04 2012] [error]     raise URLError(err)
[Sun Aug 12 22:28:04 2012] [error] URLError: <urlopen error [Errno 10054] An existing connection was forcibly closed by the remote host> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:01:44.577

想通了，帖子数据很大，我猜它弄乱了请求。我把它剪掉了，现在可以正常工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T18:58:17.540

仔细检查您的协议支持，我在尝试连接到禁用 TLS1.0 的服务器时遇到此错误（python 2.7、Windows 2008R2 服务器/IIS 7、Windows 7 客户端），一旦我启用该问题就消失了。

# join - awk-sed 将 3 个表与一个几乎相同的列连接起来......肯定比 python 更容易

> ID：11928699
> 
> 赞同：0
> 
> 时间：2012-08-13T05:40:08.493
> 
> 标签：join, awk, sed, tabular

我目前正在重新构建一个相当庞大的数据库，并且我想加入 3 个具有半匹配内容的表，我有几组这些表，但它们都以三组的形式出现。情况如下：

--注意所有表格都是ascii格式，空格分隔---

T1_01= 表 1 =

```
1 + 'stuff1' + additional content 1  (where additional content only sometimes available)

2  ""

3  ""

....400 
```

T1_02= 表 2 =

```
1 + "different stuff" + additional content 2

2 ""

3 ""

... 400 
```

T1_03 = 表 3 =

```
5 cols yet other stuff + 001 + additional content 3

5 cols yet other stuff + 003    ""

5 cols yet other stuff + 007    ""

...

5 cols yet other stuff + 399   some rows are skipped, varies which ones

5 cols yet other stuff + 400 
```

我想要的是，对于每个“组”，我有 3 个表，因为这些表以方便的方式分组，即 T1_01、T1_02、T1_03 将是第 1 组的表 1、2、3，然后是 T2_01、T2_02、T2_03。我总共需要这样做大约 60 次，我希望的表格输出是：

T1_0123=

```
1 + 'stuff1' + additional content 1 1 + "different stuff" + additional content 2 5 cols yet other stuff + 001 + additional content 3
2 + 'stuff1' + additional content 1 2 + "different stuff" + additional content 2 "something to fill in the empty spaces, like a set of -99.9 values"
3 + 'stuff1' + additional content 1 3 + "different stuff" + additional content 2 5 cols yet other stuff + 003 + additional content 3
...
400 "" 
```

现在我做了一个初步的运行

`join -1 1 -2 1 T1_01 T1_02 > T1_012`效果很好，但只有前两个和

`join -1 1 -2 6 T1_01 T1_03`...不起作用，因为 001 不是 1

我希望一次运行所有 3 个表，然后执行类似 `sed something awk $(cat list_of_T01) $(cat list_of_T02) $(cat list_of_T03)`批处理作业的操作。我一直在学习 python，所以这也可能在那里，但我肯定 AWK 更容易？欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:59:21.477

试试这个：

```
join -1 1 -2 6 <(sed 's/^[0-9] /00&/;s/^[0-9][0-9] /0&/;' T1_01) T1_03 
```

或者如果您的分隔符不是空格，则为这个：

```
join -1 1 -2 6 <(sed 's/^[0-9][^0-9]/00&/;s/^[0-9][0-9][^0-9]/0&/;' T1_01) T1_03 
```

# css - jquery验证处理错误css

> ID：11928707
> 
> 赞同：0
> 
> 时间：2012-08-13T05:40:59.693
> 
> 标签：css, jquery-validate

# 脚本.js

```
$('#registerform').validate({
            errorElement: "div",
                    wrapper: "div",  // a wrapper around the error message
                    errorPlacement: function(error, element){
                    error.appendTo( element.parent().next() );
                    error.css('padding-left','30');
                    element.addClass('error-field');
            },
                    debug:true

        }); 
```

# 怀疑

如果字段有效，我该如何删除类错误字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:02:52.170

我不太使用那个插件，但是根据文档，您只需添加一个`success`参数：

```
$('#registerform').validate({
        errorElement: "div",
                wrapper: "div",  // a wrapper around the error message
                errorPlacement: function(error, element){
                error.appendTo( element.parent().next() );
                error.css('padding-left','30');
                element.addClass('error-field');
        },
                debug:true,
                success: function() {
                    element.removeClass('error-field');
                })

    }); 
```

# c++ - 从 QAbstractScrollArea 派生

> ID：11928708
> 
> 赞同：2
> 
> 时间：2012-08-13T05:41:02.697
> 
> 标签：c++, qt4

我想感受一下QT，决定写一个小的十六进制编辑器。为此，我需要一个允许滚动的小部件。经过一番研究，我看到 QTextEdit 派生自 QAbstractScrollArea 用于此目的。在阅读 QAbstractScrollArea 的文档时，我发现方法“setViewport()”的描述为“QAbstractScrollArea 将拥有给定小部件的所有权。”。这不适合自行显示的小部件的上下文。它仅适用于 QScrollArea 的上下文。

QT 中创建带有显示其自己内容的滚动条的小部件的适当方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:48:28.193

`QAbstactScrollArea`不能显示任何“本身”，并且文档明确指出：

> QAbstractScrollArea 是滚动区域的低级抽象。该区域提供了一个称为视口的中央小部件，其中将滚动该区域的内容（即，内容的可见部分在视口中呈现）。
> 
> 视口旁边是一个垂直滚动条，下面是一个水平滚动条。当所有区域内容都适合视口时，每个滚动条可以是可见的或隐藏的，具体取决于滚动条的 Qt::ScrollBarPolicy。当滚动条被隐藏时，视口会扩大以覆盖所有可用空间。当滚动条再次可见时，视口会缩小以便为滚动条腾出空间。

由于它`QAbstractScrollArea`本身拥有它的 Viewport 的所有权，它非常好，你不需要关心它。您可以将`QAbstractScrolArea + Viewport`as 视为单个元素的组合，可以将其作为单个元素（当然，复合元素）进行操作，并作为单个元素删除，因为获得一个项目的所有权意味着它将被连同它的主人一起被摧毁。

# c# - 服务不是每 15 秒执行一次

> ID：11928716
> 
> 赞同：0
> 
> 时间：2012-08-13T05:41:47.337
> 
> 标签：c#, windows-services

我有一项服务需要每 15 秒运行一次。间隔在配置文件中设置。当我启动/重新启动服务时，工作线程只执行一次并执行其预期的操作。

配置文件：

```
<?xml version="1.0"?>
<configuration>

  <configSections>

  <appSettings>
    <!-- Worker thread will start after 15 seconds interval -->
    <add key="Interval" value="15000"/>

  </appSettings>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>

</configuration> 
```

服务代码：

```
using System;
using System.ServiceProcess;

using WorkflowSupport;
using BitFactory.Logging;
using Efts.Framework.Resources;
using Efts.Framework.Core;

namespace Efts.Framework.Service
{
    public partial class QueueService : ServiceBase
    {
        private WorkflowManager _worker;

        public QueueService()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            try
            {
                // get the polling interval or initialize if missing
                var pollTime = int.Parse(ConfigHelper.Interval());

                // create the thread worker
                _worker = new WorkflowManager("Queue Service",
                                                     new Worker(), //in Efts.Framework.Core
                                                     pollTime,
                                                     true);
                // wire up the event listeners
                WireupWorkflowManagerEvents(_worker);

                // go
                _worker.Start();

            }
            catch (Exception ex)
            {
                ConfigLogger.Instance.LogError(String.Format("{0}{1}::{2}", ex.Message,
                                                             String.IsNullOrWhiteSpace(ex.InnerException.Message)
                                                                 ? String.Empty
                                                                 : String.Format("::{0}", ex.InnerException.Message)
                                                             , ex.StackTrace));
            }
        }

        protected override void OnStop()
        {
            _worker.Stop();
        }

        /// <summary>
        /// Wireups the workflow manager events.
        /// </summary>
        /// <param name="workflowManager">The request workflow manager.</param>
        private static void WireupWorkflowManagerEvents(WorkflowManager workflowManager)
        {
            workflowManager.Started +=
                ((sender, e) => ConfigLogger.Instance.LogDebug(String.Format("{0}: Workflow started", workflowManager.Name)));

            workflowManager.Stopped +=
                ((sender, e) => ConfigLogger.Instance.LogDebug(String.Format("{0}: Workflow stopped", workflowManager.Name)));

            workflowManager.BeginWork +=
                ((sender, e) => ConfigLogger.Instance.LogDebug(String.Format("{0}: Workflow worker is beginning work", workflowManager.Name)));

            workflowManager.EndWork +=
                ((sender, e) => ConfigLogger.Instance.LogDebug(String.Format("{0}: Workflow worker is done.", workflowManager.Name)));

            workflowManager.Message += ((sender, e) => ConfigLogger.Instance.LogInfo(String.Format("{0}: {1}", workflowManager.Name, e.Message)));
        }

    }
} 
```

我在这里有点不知所措。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:47:01.523

好的，我从未使用过 WorkFlows，但我已经编写了很多 Windows 服务。通常我构建这样的方式是：

1.  使计时器对主线程（具有 OnStart、OnStop 等的线程）全局化。

2.  编写将在工作线程中运行的处理代码，即“一劳永逸”。

3.  在 OnStart 中，设置计时器的时间间隔属性，连接 OnElapsed 事件处理程序和 OnStart 中的最后一件事 - 启动计时器。

4.  在 OnElapsed 事件处理程序中 - 这很重要 - 首先要停止计时器。关闭工作线程来做它的事情。此事件处理程序中的最后一件事，重新启动计时器。

我要做的第一件事是评估这个过程是否真的需要（受益）多线程。如果不是，那是您应该避免的一层复杂性，如果是这样，那就这样吧 - 请小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:30:33.830

感谢您的回复。在这种情况下，这是我的问题。我以毫秒为单位指定间隔，而它应该以秒为单位。

# tridion - 如何为自定义按钮触发 PopupReference.js

> ID：11928717
> 
> 赞同：1
> 
> 时间：2012-08-13T05:41:56.473
> 
> 标签：tridion, tridion-2011

我已经创建了一个功能齐全的按钮，名为“buttonreference”。我正在尝试创建一个具有相同功能和不同名称的不同按钮，例如“TestButton”。我遵循了这些步骤。

1.  创建了一个名为 Testbutton 的文件夹。

2.  为此文件夹创建了虚拟目录。

3.  在系统配置中创建编辑器。

4.  但是当我试图访问这个按钮时，它会触发按钮引用文件夹中的 PopupReference.js，而不是触发我的文件夹“Testbutton”中的 PopupReference.js。我不知道为什么它不触发我的js？

我的 Testbutton.js 如下：

```
Type.registerNamespace("RTFExtensions.Commands");

RTFExtensions.Commands.TestButton = function Commands$TestButton(name) {
Type.enableInterface(this, "RTFExtensions.Commands.TestButton");
this.addInterface("Tridion.Cme.Command", [name || "TestButton"]);
this.addInterface("Tridion.Cme.FaCommand", [name || "TestButton"]);
};

RTFExtensions.Commands.TestButton.prototype._isAvailable = function     TestButton$_isAvailable(target) {
if (target.editor.getDisposed()) {
    return false;
}

return true;
};

RTFExtensions.Commands.TestButton.prototype._isEnabled = function     TestButton$_isEnabled(target) {
if (!Tridion.OO.implementsInterface(target.editor, "Tridion.FormatArea")     || target.editor.getDisposed()) {
    return false;
}

return true;
};

RTFExtensions.Commands.TestButton.prototype._execute = function TestButton$_execute(target) {
if (target.item.isActivePopupOpened()) {
    return;
}

function TestButton$execute$onPopupCanceled(event) {
    target.item.closeActivePopup();
};

var url = $config.expandEditorPath("/Popups/PopupReference.aspx","TestButton");
//alert(url);
var popup = $popup.create(url,"toolbar=no,width=900,height=800,resizable=yes,scrollbars=yes", null);

$evt.addEventHandler(popup, "submit",
    function TestButton$execute$onPopupSubmitted(event) {

        alert('Inside testbuttonjs');

        // Release
        target.item.closeActivePopup();
    }
);

$evt.addEventHandler(popup, "unload", TestButton$execute$onPopupCanceled);

target.item.setActivePopup(popup);
popup.open();
}; 
```

我的 TestButton 配置文件是这样的：

```
<?xml version="1.0"?>
<Configuration  xmlns="http://www.sdltridion.com/2009/GUI/Configuration/Merge"  xmlns:cfg="http://www.sdltridion.com/2009/GUI/Configuration"        xmlns:ext="http://www.sdltridion.com/2009/GUI/extensions" xmlns:cmenu="http://www.sdltridion.com/2009/GUI/extensions/ContextMenu">
<resources cache="true">
    <cfg:filters/>
    <cfg:groups>
     <cfg:group name="RTFExtensions.TestButton">
    <cfg:fileset>

      <cfg:file type="script">/Popups/PopupReference.js</cfg:file>
    </cfg:fileset>

    <cfg:dependencies>
      <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
        <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
    </cfg:dependencies>
  </cfg:group>

  <cfg:group    name="RTFExtensions.TestButton.Commands" merger="Tridion.Web.UI.Core.Configuration.Resources.CommandGroupProcessor" include="byreference"   merge="release">
    <cfg:fileset>
      <cfg:file type="script">/Commands/TestButton.js</cfg:file>

      <cfg:file     type="reference">RTFExtensions.TestButton.CommandSet</cfg:file>
    </cfg:fileset>

    <cfg:dependencies>
      <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
        <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
    </cfg:dependencies>
  </cfg:group>

 </cfg:groups>
</resources>      <definitionfiles/>
<extensions>
    <ext:editorextensions>
  <ext:editorextension target="CME">
    <ext:editurls/>
    <ext:listdefinitions/>
    <ext:taskbars/>
    <ext:commands/>
    <ext:commandextensions/>
    <ext:contextmenus/>
    <ext:lists/>
    <ext:tabpages/>
    <ext:toolbars/>
    <ext:ribbontoolbars>
      <ext:add>
        <!-- RIBBON TAB -->

        <!-- GROUPS -->
        <ext:extension assignid="ExtensionGroup" pageid="FormatPage" name="RTF Extensions">
          <ext:group/>
          <ext:apply>
            <ext:view name="ComponentView">
              <ext:control id="ItemToolbar"/>
            </ext:view>
          </ext:apply>
        </ext:extension>

        <!-- BUTTONS -->
        <ext:extension pageid="FormatPage" groupid="ExtensionGroup"     name="TestButton" assignid="TestButton">
          <ext:command>TestButton</ext:command>
          <ext:title>TestButton</ext:title>
          <ext:dependencies>
                    <cfg:dependency>RTFExtensions.TestButton.Commands</cfg:dependency>
          </ext:dependencies>
          <ext:apply>
            <ext:view name="ComponentView">
              <ext:control id="ItemToolbar"/>
            </ext:view>
          </ext:apply>
        </ext:extension>
      </ext:add>
    </ext:ribbontoolbars>
  </ext:editorextension>
    </ext:editorextensions>
    <ext:dataextenders/>
</extensions>
<commands>
    <cfg:commandset id="RTFExtensions.TestButton.CommandSet">
  <cfg:command name="TestButton"    implementation="RTFExtensions.Commands.TestButton"/>
  <cfg:dependencies>
    <cfg:dependency/>
  </cfg:dependencies>
    </cfg:commandset>
</commands>
<contextmenus/>
<localization/>
<settings>
<defaultpage/>
<navigatorurl/>
<editurls/>
<listdefinitions/>
<itemicons/>
<theme>
  <path>Themes</path>
    </theme>
    <customconfiguration/>
 </settings>
</Configuration> 
```

我的 PopupReference.Js 就像：

```
Type.registerNamespace("RTFExtensions.Popups");

RTFExtensions.Popups.PopupReference = function (element) {
Type.enableInterface(this, "RTFExtensions.Popups.PopupReference");
this.addInterface("Tridion.Cme.View");
};

RTFExtensions.Popups.PopupReference.prototype.initialize = function () {
$log.message("Initializing Button Reference popup...");
this.callBase("Tridion.Cme.View", "initialize");
$log.message("Initializing TestButton Reference popup...");
var p = this.properties;
var c = p.controls;

p.HtmlValue = { value: null };

c.InsertButton = $controls.getControl($("#InsertButton"), "Tridion.Controls.Button");
$evt.addEventHandler(c.InsertButton, "click", this.getDelegate(this._execute));
};

RTFExtensions.Popups.PopupReference.prototype._execute = function () {
alert('Inside Popupreferencejs');
this.fireEvent("submit", this.properties.HtmlValue);
window.close();
};

$display.registerView(RTFExtensions.Popups.PopupReference); 
```

我的 TestButton 的 CS 页面是这样的：

```
namespace Tridion.GUI.Extensions.RTF.Popups
{
[ControlResourcesDependency(new Type[] { typeof(Popup), typeof(Tridion.Web.UI.Controls.Button), typeof(Stack), typeof(Dropdown), typeof(List) })]
[ControlResources("RTFExtensions.TestButton")]
public partial class PopupReference : TridionPage
{
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        TridionManager tm = new TridionManager();

        tm.Editor = "RTFTestButton";
        System.Web.UI.HtmlControls.HtmlGenericControl dep = new System.Web.UI.HtmlControls.HtmlGenericControl("dependency");
        dep.InnerText = "Tridion.Web.UI.Editors.CME";
        tm.dependencies.Add(dep);

        System.Web.UI.HtmlControls.HtmlGenericControl dep2 = new System.Web.UI.HtmlControls.HtmlGenericControl("dependency");
        dep2.InnerText = "Tridion.Web.UI.Editors.CME.commands";
        tm.dependencies.Add(dep2);

        //Add them to the Head section
        this.Header.Controls.Add(tm); //At(0, tm);
    }
}
} 
```

谁能帮我找到问题。创建新按钮时我错过了任何步骤吗？我需要将 .dll 保存到任何地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:34:22.473

对我来说，一切看起来都很好！

在您的 c# 中，您使用以下代码调用参考组：

```
[ControlResources("RTFExtensions.TestButton")] 
```

我还看到您的配置文件包含组“RTFExtensions.TestButton”，所以一切看起来都不错。

您是否构建了 .net 项目并将 DLL 放入 [tridion_home]/web/webUI/webRoot/bin

??

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T10:57:11.927

您必须为弹出的 aspx 页面中的更新代码编译 dll。如果不是，您将使用编译代码时页面中存在的任何值。

# git - 如果仅对尚未推送的提交进行修改，则使用 Git 的过滤器分支重写是否安全？

> ID：11928719
> 
> 赞同：1
> 
> 时间：2012-08-13T05:42:09.537
> 
> 标签：git, git-filter-branch

在我注意到我没有使用正确的电子邮件地址或用户名之前，我已经克隆了一个 repo 并继续进行本地提交。在这里使用这个脚本，我成功地运行了过滤器分支并得到了我正在寻找的结果：

[https://help.github.com/articles/changeing-author-info](https://help.github.com/articles/changing-author-info)

从这里的帖子我的理论理解是，我可以影响任何没有被推动的东西，而不会给其他人带来麻烦。我认为这应该是真的，即使我一直在合并其他人的来自 master 的提交。但我想确保在这个非常具体的案例中理论与实践保持一致！

重申：*如果唯一被修改的邮件地址和用户名记录是我的名字从未被推送过的，这安全吗？* 如果（例如）我尝试更改主服务器中存在的提交中的电子邮件名称，我是否认为它突然变得不安全是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:05:10.173

之后`git filter-branch`，您可以在 中看到原始提交`.git/refs/original`。
有关该目录的更多信息，请参阅“[如何删除之后的旧提交`filter-branch`？](https://stackoverflow.com/questions/3223053/how-to-remove-old-commits-after-filter-branch?rq=1) ”。

如果这些 SHA1 都不存在于远程仓库中，那么您是安全的，并且可以随时推送修改后的仓库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:50:06.330

是的。只要您只影响其他人尚未看到的提交，就可以了。

# c# - 当我单击按钮时，动态创建的文本框值未显示在动态文本框中

> ID：11928723
> 
> 赞同：0
> 
> 时间：2012-08-13T05:42:53.943
> 
> 标签：c#, asp.net

我已经动态创建了一个文本框，当我单击按钮时，我得到了文本框的值。但是当我单击按钮时，在动态文本框中输入的值变为空。

下面是我的 ASPX 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="Reports.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>

</div>

<asp:DropDownList ID="DropDownList1" runat="server" 
    onselectedindexchanged="DropDownList1_SelectedIndexChanged" AutoPostBack = "true">
    <asp:ListItem>Text</asp:ListItem>
    <asp:ListItem>Check</asp:ListItem>
</asp:DropDownList> 

<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="GetTextBoxValue" />   
</form>
</body>
</html> 
```

**代码隐藏：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Reports
{
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        TextBox TB = new TextBox();
        TB.ID = "abc";
        form1.Controls.Add(TB);
        Response.Write(Request.Form["abc"]);
    }

    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        createcontrol();
    }

    protected void createcontrol()
    {
        if (DropDownList1.SelectedValue.ToLower().Trim() == "text")
        {
            TextBox TB = new TextBox();
            TB.ID = "abc";
            form1.Controls.Add(TB);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:48:04.520

文本框默认保存它们的状态。`EnableViewState`默认情况下为真。

如果要保留文本值，则必须添加`TextBox`on the `Init`or`Load`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:49:33.780

您应该让您动态创建控件，`Page_PreRender`以防万一。

像这样：//获取值

```
protected void Page_PreRender(object sender, EventArgs e) {
   //....
} 
```

但是您应该在创建元素时使用`IsPostBack`in 。`Page_Load`

[这会有所帮助](http://www.codeproject.com/Articles/73728/ASP-NET-Application-and-Page-Life-Cycle)

# ajax - jqGrid分页不起作用

> ID：11928726
> 
> 赞同：1
> 
> 时间：2012-08-13T05:43:34.177
> 
> 标签：ajax, jqgrid, paging

jqGrid 似乎只显示第一页，服务器似乎是正确的。

这是js：

```
$("#gpaTable").jqGrid({
    datatype: "local",
    pager: "#gpaPager",
    viewrecords: true, 
    jsonReader: {
        repeatitems: true,
        id: "lineId",
        cell: "cell",
        root: "rows",
        records: "records",
        total: "pageTotal",
        page: "pageId"
    },
    ...
});
$("#gpaTable").jqGrid("navGrid", "#gpaPager", { edit: false, add: false, del: false });

$.ajax({
    type: 'POST',
    url: 'alarmInfo.aspx',
    data: { lowestGpa: '1.7' },
    dataType: "json",
    success: function (data) {
        var rows = data['rows'];
        var cnt = rows.length;
        for (var i = 0; i < cnt; ++i) {
            $("#gpaTable").jqGrid("addRowData", i + 1, rows[i]["cell"]);
        }
    }
}); 
```

从服务器返回的内容（使用 ASP.NET）是：

```
{
    "pageId": "1",
    "pageTotal": "4",
    "records": "100",
    "rows": [{
        "cell": {
            "expectGpa": "2.0",
            "failRestCnt": 1,
            "failTotalCnt": 3,
            "lastGpa": 0.0,
            "lowScore": "",
            "name": "name0063",
            "noScore": 13,
            "star": " ",
            "studentId": "5090379063"
        },
        "lineId": 1
    } // ...
    ]
} 
```

`pageTotal`，`pageId`而且`records`似乎没有被使用。从 chrome 控制台和 firebug 中，我找不到有关发送到服务器的分页的参数。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:29:36.000

事实证明，`datatype: "local"`不应该用于 ajax 来获取数据。

正确的做法是：

```
url: "alarmInfo.aspx?request=BasicGpaInfo&lowestGpa=1.7",
datatype: "json", 
```

请注意，返回的 json 应该是：

```
{
    "total": "1",
    "page": "1",
    "records": "2",
    "rows": [
        {
            "id": "1",
            "cell": ["1", "1", "6", "0", "Credit Card", "Movie Hall Pass",
                     "250.0", "2011-03-16", "Entertainment" ]
        },
        ...
    ]
} 
```

代替

```
{
    "total": "1",
    "page": "1",
    "records": "2",
    "rows": [
        {
            "id": "1",
            "cell": {
                "accountId": 1,
                "userId": 1,
                "transactionId": 6,
                "subCatId": 0,
                "accountName": "Credit Card",
                "remarks": "Movie Hall Pass",
                "amount": 250.0,
                "transactionDate": "2011-03-16",
                "subCatName": "Entertainment"
            }
        },
        ...
    ]
} 
```

> 此处参考：[jqGrid fetched json but has empty rows and no data](https://stackoverflow.com/questions/5361678/jqgrid-fetched-json-but-has-empty-rows-and-no-data?rq=1)

# c# - 为什么在尝试使用复选框编辑此字段时出现错误？

> ID：11928729
> 
> 赞同：0
> 
> 时间：2012-08-13T05:43:46.587
> 
> 标签：c#, asp.net, gridview, checkbox

我是一名新的 C# 和 ASP.NET 开发人员。我正在开发一个简单的事件管理系统。我希望管理员能够编辑事件的信息。事件将在绑定到数据库下表的 GridView 中列出：

```
Events Table: ID, Title, Description, Location, NumberOfSeats, StartDateTime, EndDateTime, IsActive 
```

*（IsActive 有点指示活动或非活动事件）*

一切正常，除了当我尝试编辑 IsActive 字段时，它给了我以下错误：

> 输入字符串的格式不正确。

由于以下代码行：

```
int ID = Convert.ToInt32(gvrow.Cells[0].Text); 
```

**你能帮我修一下吗？**

ASP.NET 代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="ID"
            width="500px" DataSourceID="SqlDataSource1" OnRowDataBound="GridView1_RowDataBound">
            <Columns>
                <asp:CommandField ButtonType="Image" ShowEditButton="true" ShowCancelButton="true"
                                EditImageUrl="Images/icons/edit24.png" UpdateImageUrl="Images/icons/update24.png" 
                                CancelImageUrl="Images/icons/cancel324.png" />

                <asp:BoundField DataField="ID" HeaderText="ID" SortExpression="ID" Visible="false" />

                <asp:TemplateField HeaderText="Title">
                    <ItemTemplate>
                        <%# Eval("Title") %>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtTitle"  runat="server" 
                                        Text='<%# Bind("Title") %>'></asp:TextBox>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Description">
                    <ItemTemplate>
                        <%# Eval("Description") %>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtDescription" TextMode="MultiLine"  Rows="4" cols="30"
                            runat="server" Text='<%# Bind("Description") %>'></asp:TextBox>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Location">
                    <ItemTemplate>
                        <%# Eval("Location") %>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtLocation" runat="server"
                                        Text='<%# Bind("Location") %>'></asp:TextBox>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Number of Seats">
                    <ItemTemplate>
                        <%# Eval("NumberOfSeats") %>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtNumberOfSeats"  runat="server"
                                        Text='<%# Bind("NumberOfSeats") %>'></asp:TextBox>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Start Date & Time">
                    <ItemTemplate>
                        <%# Eval("StartDateTime")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="start_DateTime"  runat="server"
                                        Text='<%# Bind("StartDateTime") %>'></asp:TextBox>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="End Date & Time">
                    <ItemTemplate>
                        <%# Eval("EndDateTime")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="end_DateTime" runat="server"
                                        Text='<%# Bind("EndDateTime") %>'></asp:TextBox>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Is Active?">
                    <ItemTemplate>
                        <asp:Label ID="lblIsActive" runat="server" Text='<%# Eval("IsActive") %>'></asp:Label>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" AutoPostBack="true"
                                        OnCheckedChanged="isActive_OnCheckedChanged" 
                                        Checked='<%# Convert.ToBoolean(Eval("IsActive")) %>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Delete?">
                    <ItemTemplate>
                        <span onclick="return confirm('Are you sure to Delete the record?')">
                            <asp:ImageButton ID="lnkB" runat="server" ImageUrl="Images/icons/delete24.png" CommandName="Delete" />
                        </span>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:PM_RegistrationSysDBConnectionString %>" 
            SelectCommand="SELECT ID, Title, Description, Location, StartDateTime, EndDateTime, 
                            NumberOfSeats, IsActive 
                            FROM Events 
                            WHERE (IsActive = 1) 
                            ORDER BY ID DESC"
            UpdateCommand="UPDATE [Events] SET [Title] = @Title, [Description] = @Description, 
                                                [Location] = @Location, [NumberOfSeats] = @NumberOfSeats, 
                                                [StartDateTime]= @StartDateTime, [EndDateTime] = @EndDateTime
                                                WHERE [ID] = @ID"
            DeleteCommand="DELETE FROM [Events] WHERE [ID] = @ID">
            <UpdateParameters>
                <asp:Parameter Name="Title" Type="String" />
                <asp:Parameter Name="Description" Type="String" />
                <asp:Parameter Name="Location" Type="String" />
                <asp:Parameter Name="NumberOfSeats" Type="Int32" />
                <asp:Parameter Name="StartDateTime" Type="DateTime" />
                <asp:Parameter Name="EndDateTime" Type="DateTime" />
            </UpdateParameters>
            <DeleteParameters>
                <asp:Parameter Name="ID" Type="Int32" />
            </DeleteParameters>
        </asp:SqlDataSource> 
```

C#代码：

```
 //for updating the (IsActive) column using checkbox inside the GridView
    protected void isActive_OnCheckedChanged(object sender, EventArgs e)
    {
        CheckBox chkStatus = (CheckBox)sender;
        GridViewRow gvrow = (GridViewRow)chkStatus.NamingContainer;

        //Get the ID which is the ID of the Event
        int ID = Convert.ToInt32(gvrow.Cells[0].Text);
        bool status = chkStatus.Checked;

        string connString = ConfigurationManager.ConnectionStrings["PM_RegistrationSysDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);

        string updateIsActive = "UPDATE Events SET IsActive = @IsActive WHERE ID = @ID";

        SqlCommand cmd = new SqlCommand(updateIsActive, conn);

        cmd.Parameters.AddWithValue("@IsActive", status);
        cmd.Parameters.AddWithValue("@ID", ID);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
        catch (SqlException se)
        {
            throw se;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }

        //this is checkbox is unchecked then set backcolor to Gray
        if (!status)
        {
            gvrow.BackColor = Color.Black;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:20:12.003

最好添加标签并使其可见 false ，将 ID 绑定到它并使用 FindControl 方法找到控件，然后将其转换为 Label 并访问标签的 Text 属性。

```
 <asp:TemplateField HeaderText="Title">
       <ItemTemplate>
          <%# Eval("Title") %>

           <asp:Label ID="lblID"  runat="server" Visible="false" 
              Text='<%# Bind("ID") %>'></asp:Label>
        </ItemTemplate>
     <EditItemTemplate>
         <asp:TextBox ID="txtTitle"  runat="server" Text='<%# Bind("Title") %>'>         </asp:TextBox>

     </EditItemTemplate>
  </asp:TemplateField> 
```

并在后面的代码中。

```
Label lblID = (Label)gvrow.FindControl("lblID");
int ID = Convert.ToInt32(lblID.Text); 
```

然后使用此 ID 更新状态..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:52:00.383

`gvrow.Cells[0]`将参考您的按钮。

它不是指你的身份证。

您已将 id 放在第二列中。

访问代码应该像

```
gvrow.Cells[1] 
```

# cocoa-touch - 有未保留的 id 对象列表？

> ID：11928730
> 
> 赞同：1
> 
> 时间：2012-08-13T05:43:46.883
> 
> 标签：cocoa-touch, cocoa, memory-management, collections

如何实现一个引用了一堆非保留对象的类/`id`对象？

我想要类似于`UIControl`/ `NSControl`has 的东西：（`addTarget:(id)target action:(SEL)action ...;`但在我的情况下，我不需要该`UIControlEvents`部分）。我想使用这个目标/动作模式（最好远离委托模式），但为此我需要确保添加到我的对象的目标不会被保留，否则可能会发生保留周期。

我认为使用`malloc`/实现我自己的数组`free`以确保不保留目标将是一种解决方案，但是所有这些麻烦闻起来就像已经在某处实现了解决方案。有没有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T05:56:20.617

在 OS X 上，您可以创建一个使用, 或（如果您想要一个字典）`NSPointerArray`来保持对其对象的弱引用，它允许键和值中的一个或两个被弱保存。[`+[NSPointerArray weakObjectsPointerArray]`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPointerArray_Class/Introduction/Introduction.html%23//apple_ref/occ/clm/NSPointerArray/weakObjectsPointerArray)[`NSMapTable`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSMapTable_class/Reference/NSMapTable.html)

目前 iOS 上都没有这些功能，但 Core Foundation 是可用的。在 OS X 或 iOS 上，您可以使用`CFArray`or`CFDictionary`传递`NULL`回调以使集合不对其包含的对象进行内存管理。请注意，如果您尝试使用它们，就好像它们是免费的桥接可可对应物一样，该集合将不会满足您不保留/不复制的愿望。您必须使用 CF 函数与它们进行交互（或创建一个包装类）。

您还可以将对象包装在`NSValue`s 中，使用[`valueWithNonretainedObject:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSValue_Class/Reference/Reference.html#//apple_ref/doc/uid/20000177-valueWithNonretainedObject_)并将它们放入 Cocoa 集合 ( `NSDictionary`/ `NSarray`)。集合将拥有该值，但该值将不拥有其对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:56:29.940

您可以创建一个`CFArrayRef`，指定不执行引用计数操作的回调（或者如果您感觉非常懒惰，则只为回调 0 ）：

```
CFAllocatorRef allocator = 0;
const void **values = ...;
CFIndex numValues = ...;
const CFArrayCallBacks* const callBacks = 0;

CFArrayRef arr = CFArrayCreate(allocator, values, numValues, callBacks); 
```

# iphone - Html 未在 UIWebview 中加载

> ID：11928738
> 
> 赞同：0
> 
> 时间：2012-08-13T05:44:39.140
> 
> 标签：iphone, uiwebview

我正在使用以下方式从网站加载 html

```
 -(void)connectionDidFinishLoading:(NSURLConnection *)connection{
//CategoriesParser *parser=[[CategoriesParser alloc]init];
//[parser setDelegate:self];
//[parser startParsing:xmlData];

NSString *str=@"<html><head></head><body>";

NSString* newStr = [[[NSString alloc] initWithData:urlData

                                          encoding:NSUTF8StringEncoding] autorelease];

 newStr=[NSString stringWithFormat:@"<html><head></head><body>%@</body></html>",newStr];

[webView loadHTMLString:newStr baseURL:nil]; 
```

}

但不幸的是，它在 webview 上显示 html 代码为

```
 <p style="text-align: justify;"><span style="font-family: helvetica; font-size: small;">The UAE manages what some Arab cities fail to achieve; 
```

ETC

所以请通过在 webview 中加载 html 字符串来帮助我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:18:06.250

试试这个，它对我有用

```
-(void)loadHTML{

NSMutableString *html  = [NSString stringWithFormat:@"<html><head></head><body>%@</body></html>",@"Hi"]; 
[self.tpWebView loadHTMLString:html baseURL:nil]; 
```

}

# c# - 如何处理 Db.SingleDecimal 中的空异常？

> ID：11928740
> 
> 赞同：0
> 
> 时间：2012-08-13T05:44:45.433
> 
> 标签：c#, dbnull, argumentnullexception

```
c = new TableCell();
decimal pembayaran = Db.SingleDecimal("Select (valuta) from ArInvoice where customerID='01');
c.Text = Cf.Num(pembayaran);
c.Attributes["style"] = "text-align: right;";
tr.Cells.Add(c); 
```

它在查询有值时有效，但当结果为空时包含此错误“对象不能从 DBNull 转换为其他类型”

我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:03:14.103

我从我自己的问题中找到了答案，呵呵。我在sql中使用了**select isnull((valuta),0)**，所以当结果为DbNull时它将替换为0。

```
decimal pembayaran = Db.SingleDecimal("Select isnull((valuta),0) from ArInvoice where customerID='01'); 
```

但是，如果您想在结果为 DbNull 时采取一些措施（不仅设置默认值），也许您可​​以尝试 Eren Ersönmez 或 Marc Gravell 的答案。快乐编码：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:54:23.470

问题在于以下方法调用：

```
Db.SingleDecimal("Select (valuta) from ArInvoice where customerID='01'); 
```

由于问题中未提供方法定义，因此不确定它到底做了什么，但我猜它会尝试将`DBNull`值转换为另一种类型。您需要显示该方法的确切定义以获得更好的帮助，但您通常会使用以下方式处理`DBNull`：

```
var myDecimal = dr.IsDBNull(0) ? 0M : dr.GetDecimal(0); // get a decimal from the first column 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:57:21.927

我不直接熟悉任何带有`SingleDecimal`方法的工具，所以我将在一般意义上回答：

从 ADO.NET（直接或间接）查询数据时，很可能（可能两者都）您将获得某种“阅读器”API（最有可能`IDataReader`），或者您将获得原始`object`值。

在第一种情况下，您应该可以访问一个`IsDBNull`方法（每列）；所以调用那个方法，然后对空值做任何你想做的事情。

在第二种情况下，您应该检查 的值`DBNull`，即`if(val is DBNull`)。

在这两种情况下，代码下一步做什么取决于库。在这两种情况下，您可能需要在这里考虑***两个***空场景：没有行，以及具有单个值的行。

坦率地说，在这两种情况下，使用现有支持的库/工具会更容易。例如，使用 dapper，这将是：

```
string customerId = "01";
decimal? pembayaran = Db.Query<decimal?>(
    "Select valuta from ArInvoice where customerID=@customerId",
    new { customerId }).Single(); 
```

这给了你：

*   正确的参数化
*   空值处理
*   查询所有数据的同一个 API ( `Query<T>`)
*   能够使用您喜欢的任何 LINQ 进行序数（`Single()`、、、`First()`等`ToList()`）

如果您想使用默认值（而不是`decimal?`当单元格的值为 时为空`null`，您可以使用：

```
decimal pembayaran = Db.Query<decimal?>(
    "Select valuta from ArInvoice where customerID=@customerId",
    new { customerId }).Single() ?? 0M; 
```

这里请注意，这`?? 0M`只是一个空合并操作，用于获得一个零`decimal`来代替`null`.

# asp.net-mvc-3 - 如何使用海量数据库在 mvc3 中为具有复合主键的数据库表创建模型？

> ID：11928741
> 
> 赞同：1
> 
> 时间：2012-08-13T05:44:50.667
> 
> 标签：asp.net-mvc-3, composite-primary-key, massive

我是大规模 ORM 的新手。我在 asp .net mvc3 中工作并使用大量 ORM。我有一个复合主表，我需要为它创建模型。谁能告诉我该怎么做？我为具有单个主键的表创建了模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:46:35.220

从 DBA 的角度来看，通常复合键不是一个好主意。当然，这是非常有争议的，但通常在两个感兴趣的列上抛出一个 UNIQUE 约束并通过 PK 来标识是现在许多人所做的。

除此之外 - 没有内置任何东西。

# php - 使用 php 将我的网站事件导入到 facebook 时间线事件

> ID：11928742
> 
> 赞同：-2
> 
> 时间：2012-08-13T05:45:08.950
> 
> 标签：php, facebook

我正在开发与事件管理相关的网站。facebook 中是否有任何设施，用于通过 php 将我的网站事件导入 facebook 时间线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:09:10.547

是的，有... Facebook API。

阅读[Facebook 开发者网站](https://developers.facebook.com/docs/)。

采取的步骤，无需进一步详细说明：

1.  创建一个 FB 应用程序
2.  获取 App ID/API Key、App Secret 和 Access Token。（虽然，offline_access 权限已被删除，因此请确保您也阅读了该权限。）
3.  下载 PHP SDK（您可以在“SDK 参考”下找到它。）
4.  使用 PHP SDK 中的适当函数在您的 Facebook 页面上创建帖子、事件等。第一次这样做时，Facebook 应该会弹出一个窗口，要求您接受应用程序在您的个人资料中添加内容的权利。

# java - 创建 HashMap 和 TreeMap 对象的不同语法

> ID：11928744
> 
> 赞同：2
> 
> 时间：2012-08-13T05:45:18.753
> 
> 标签：java, object, hashmap, treemap

通常，当您创建一个对象时，您会在前面提供相同的类型，例如：

```
Scanner scanner = new Scanner(System.in); 
```

但是声明一个 HashMap 对象和 TreeMap 遵循这样不同的语法。

```
Map m1 = new HashMap();
SortedMap sm = new TreeMap(); 
```

是什么原因？我问我的教授。但他不知道答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T05:52:14.390

> 但是声明一个 HashMap 对象和 TreeMap 遵循这样不同的语法。

*你*不必。你*可以*写：

```
HashMap<String, Integer> map = new HashMap<String, Integer>(); 
```

...只是你通常不会。

同样你*可以*写：

```
Object scanner = new Scanner(System.in); 
```

基本上，涉及到两种类型：

*   您要声明的变量的类型
*   您正在调用其构造函数的类型

它们不必相同，但构造的类型必须与变量类型的*赋值兼容。*它必须是该类支持的超类或接口。仅将一个`Map`（或`List`其他）变量指定为接口类型的意义在于，大多数代码只应将其视为 map/list/set/whatever。它恰好是一个`HashMap`（或`ArrayList`等）在幕后的事实是一个实现细节。

有关此的更多详细信息，请参阅[“对接口编程”](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface) ...但请注意，两种情况下的*语法*是相同的：

```
VariableType variableName = new ActualTypeBeingConstructed(); 
```

> 我问我的教授。但他不知道答案。

这让我害怕...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T05:49:16.147

Map 是一个接口（或更通用的类）- TreeMap 是实现 Map 的东西（或更具体的类）。

例如 List 是一个通用接口，ArrayList 实现 List 所以你可以说

```
List<Obj> list = new ArrayList<Obj>();
// or
ArrayList<Obj> list = new ArrayList<Obj>();
// but not
ArrayList<Obj> list = new List... 
```

如果你的教授真的不能回答这个问题，你真的需要一个新的教授！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T05:48:54.073

`SortedMap`是一个接口，所以你不能实例化它。这就是为什么我们创建一个`TreeMap`实现此接口的子类对象并将其分配给接口对象`SortedMap`，以便它可以使用子类和父类的两个功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T06:06:25.723

你也可以声明

```
HashMap m1 = new HashMap();
TreeMap sm = new TreeMap(); 
```

Map 是一个由 HashMap（和 TreeMap）实现的接口。您可以将实现 Map 接口的任何对象分配给声明为映射的变量。对于接口 TreeMap 也是如此。

在java中，你有一个类和接口的层次结构。一个类可以分配给它实现的任何接口的任何“父”类

一个更复杂的例子是 Swingclass JTextField 这里的层次结构是

```
Component
  Containter
     JContainer
         JTextComponent
             JTextField 
```

所以

```
 Component c1 = new JTextField();
 Containter c2 = new JTextField();
 JContainer c3 = new JTextField();
 JTextComponent c4 = new JTextField(); 
```

都是完全有效的。JTextField 是一个 JTextCompent、JContainer、Container 和 Component。

# html - 当我们将横向更改为纵向或将纵向更改为横向时如何在 iPad 中进行流畅的交易

> ID：11928749
> 
> 赞同：-3
> 
> 时间：2012-08-13T05:45:50.130
> 
> 标签：html, css, ipad, getuikit

我用纯 HTML 和 CSS 设计了基于 iPad 的网站，一切都很好，但我注意到的只有一件事，那就是当我们改变设备视图（从横向到纵向或反向）时，它的变化很小。

下面的标签我只添加了一部分，而不是从 CSS 设置的其他标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:01:29.307

你在使用[CSS3 过渡](http://www.html5rocks.com/en/tutorials/speed/html5/#toc-css3-transitions "CSS3 过渡")吗？您会发现 iPhone 和 iPad 对 CSS3 过渡具有硬件加速支持。许多移动小部件框架（例如 JQuery Mobile 和 Sencha）都支持这一点。

此外，[此链接](http://elliotjaystocks.com/blog/css-transitions-media-queries/ "这个链接")显示了一些调整大小和格式更改的转换，可能有助于平滑您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:43:53.660

最后，这是用简单的元标记修复的。:-)

\

# jquery - 添加 data-native-menu false 会导致页面返回对话框关闭

> ID：11928751
> 
> 赞同：1
> 
> 时间：2012-08-13T05:46:10.730
> 
> 标签：jquery, jquery-mobile

我有一个移动页面，它会打开一个对话框。

在对话框中，有一个多选菜单。

一切正常，比如

1.  我单击对话框中的多选菜单按钮以打开菜单，
2.  我从多选中选择项目
3.  关闭多选菜单
4.  然后我关闭对话框。

现在，当我添加`data-native-menu="false"`到多选菜单时，对话框行为会发生变化，例如

1.  我单击对话框中的多选菜单按钮以打开菜单，
2.  我从多选中选择项目
3.  关闭多选菜单
4.  然后我关闭对话框。
5.  对话框已关闭，我看到了上一页。换句话说，我已经浏览了一页历史

解决方案是什么？

## 代码

这将打开第一个对话框

```
<a href="#refine-search" data-rel="dialog" data-role="button" data-theme="a" data-inline="true">Refine</a> 
```

多选菜单代码

```
<div class="ui-block-b">
                    <select name="select-choice-1" id="select-choice-1" multiple="multiple" data-theme="b" data-native-menu="false">
                      <option>Select</option>
                      <?php foreach($cuisines as $cuisine): ?>
                        <?php echo "<option value='{$cuisine->cuisine_id}'>{$cuisine->cuisine_name}</option>" ;?>
                      <?php endforeach; ?>
                   </select>
                </div> 
```

关联js

```
 jQuery('#refinement-done').on('click', function() {  
        console.log('refinement done');
        var options = '<?php echo $search_options; ?>&',
            min_delivery_amt,                 
            is_pure_veg,
            is_open,              
            min_rating,                       
            cuisines;
        min_delivery_amt = $('input[name="min"]').val();
        if(min_delivery_amt && !parseInt(min_delivery_amt, 10)) {
            alert('Min. Delivery Amount must be a number');
            return false;                                                           
        }                               
        jQuery('.ui-dialog').dialog('close');                                       
        if(jQuery('input[name="min"]').val())                                       
            options += 'minprice=' + jQuery('input[name="min"]').val() + '&';

        if(jQuery('#select-choice-1').val())
            options += "cuisine=" + jQuery('#select-choice-1').val().join(',') + '&';            

        options += 'pureveg=' + jQuery('#is_pure_veg').val() + '&';
        if(jQuery('#rating').raty('score')) {
            options += 'minrating=' + jQuery('#rating').raty('score') + '&maxrating=5';          
        }
        console.log('search data');
        console.log(options);
        JE.search_restaurants(options, "<?php echo $service_type; ?>");
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:20:52.043

这应该是jQM 1.2的一个[已知问题。](https://github.com/jquery/jquery-mobile/issues/4595)它似乎是由`changeHash: false`在 changePage 调用上设置的选项引起的。

但是，您似乎没有在任何地方设置此选项，默认值为`true`. 在我现在正在进行的一个项目中，我实际上遇到了与您相同的问题，如果我设法查明原因，我会告诉您。目前，我只是恢复到早期版本的 jQM（我知道这不是理想的解决方案）。

**编辑：**

JQuery Mobile 1.2 Beta 今天发布了，所以我开始再次深入研究这个问题，看看它是否得到了解决。它不是。我确实做到了，但是设法缩小了问题的范围，如[jsfiddle](http://jsfiddle.net/rXRMZ/5/)所示。如果我删除该行`$.mobile.changePage.defaults.reloadPage = true;`，那么一切正常。不幸的是，对于我的应用程序，我需要将其设置为 true 以防止页面缓存。

# xcode - 归档我的 IOS 应用程序时出错？

> ID：11928753
> 
> 赞同：1
> 
> 时间：2012-08-13T05:46:22.960
> 
> 标签：xcode, ios5, archive

我已经创建了一个 IOS 应用程序，但是当我尝试归档我的项目时，我收到两个错误说-

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_AppDelegate", referenced from:
      objc-class-ref in main.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

和

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_AppDelegate", referenced from:
      objc-class-ref in main.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谁能帮我？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T06:57:29.620

是的，我明白了，编译源中缺少 AppDelegate.m。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T06:36:27.967

我也有同样的问题。以下步骤解决了我的问题：

*   单击项目（Xcode 窗口的左上角）

*   点击`Build Phases tab -> Compile Sources`

*   检查是否`AppDelegate.m`在列表中。如果不，

    *   点击`+`按钮

    *   搜索`AppDelegate.m`然后添加。

# php - htaccess 使用 htaccess 从干净的 url 中删除可变污垢

> ID：11928755
> 
> 赞同：0
> 
> 时间：2012-08-13T05:46:25.237
> 
> 标签：php, .htaccess

我正在使用干净的 url 和 mod rewrite，并且在解析字符串时遇到了一个小问题，

有效的干净网址是 url.com/_flie-23.html

`RewriteRule ^_file-(.*)$ %{DOCUMENT_ROOT}/newFile/$1 [L]`

但是我收到了一些失败的请求，例如 url.com/dirt/_flie-23.html。这现在错过了重写测试。我尝试了以下方法，它适用于 /dirt/ 但不适用于干净。有什么建议我会怎么做？

`RewriteRule ^([^/]+)_file-(.*)$ %{DOCUMENT_ROOT}/newFile/$2 [L]`

**更新**DoH！只需要更改为

`RewriteRule ^(.*)_file-(.*)$ %{DOCUMENT_ROOT}/newFile/$2 [L]`

谢谢艺术

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:00:10.923

您始终可以对清洁和污垢变化使用单独的规则：

```
RewriteRule ^_file-(.*)$ %{DOCUMENT_ROOT}/newFile/$1 [L]
RewriteRule ^([^/]+)/_file-(.*)$ %{DOCUMENT_ROOT}/newFile/$2 [L]
#                   ^----- though I think  you are missing a slash here 
```

否则，您可以使用`?`使分组成为可选，并更改反向引用：

```
RewriteRule ^(([^/]+)/)?_file-(.*)$ %{DOCUMENT_ROOT}/newFile/$3 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:23:23.597

```
RewriteRule ^(.*)_file-(.*)$ %{DOCUMENT_ROOT}/newFile/$2 [L] 
```

# c++ - 编译错误 Odeint CUDA Visual Studio 2008

> ID：11928756
> 
> 赞同：1
> 
> 时间：2012-08-13T05:46:28.723
> 
> 标签：c++, boost, cuda, ode

我正在使用 ODEint 来求解一组耦合 ode 方程。我有一个用于 CPU 的工作代码，并正在尝试使用 CUDA 在 GPU 上实现相同的代码。我已经编译了推力库中给出的 CUDA 代码，这些代码似乎和 CUDA 计算工具包中提供的代码一样工作正常。但是，在在推力部分编译 ODEint 附带的示例 CUDA 代码时，我在编译时收到以下错误：

```
------ Build started: Project: try, Configuration: Debug Win32 ------
1>Compiling with CUDA Build Rule...
1>"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\\bin\nvcc.exe"    -gencode=arch=compute_10,code=\"sm_10,compute_10\" -gencode=arch=compute_20,code=\"sm_20,compute_20\"  --machine 32 -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin"    -Xcompiler "/EHsc /W3 /nologo /O2 /Zi   /MT  "  -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\\include" -maxrregcount=0  --compile -o "Debug/lorenz_parameters.cu.obj" lorenz_parameters.cu 
1>lorenz_parameters.cu
1>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\INCLUDE\boost/config/compiler/visualc.hpp(292) : warning C4005: 'BOOST_COMPILER' : macro redefinition
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\INCLUDE\boost/config/compiler/nvcc.hpp(11) : see previous definition of 'BOOST_COMPILER'
1>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\INCLUDE\boost/numeric/odeint/util/unit_helper.hpp(134): error: name followed by "::" must be a class or namespace name
1>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\INCLUDE\boost/numeric/odeint/util/unit_helper.hpp(134): error: too many arguments for class template "boost::numeric::odeint::inverse_time"
1>2 errors detected in the compilation of "C:/Users/a0092778/AppData/Local/Temp/tmpxft_00002634_00000000-8_lorenz_parameters.compute_20.cpp1.ii".
1>Project : error PRJ0019: A tool returned an error code from "Compiling with CUDA Build Rule..."
1>Build log was saved at "file://c:\Users\a0092778\Desktop\galib247\Projects\try\try\Debug\BuildLog.htm"
1>try - 3 error(s), 1 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我之前也为我的 CPU 代码使用了 boost 库，这些库似乎工作正常。但是当我尝试合并 boost 库并转换我的代码以使其在 GPU 上运行时，它再次显示相同的错误。我正在使用 Visual Studio 2008 IDE 进行编译。我对 CUDA 很陌生，如果有人能帮助我找出问题的解决方案，我将不胜感激。

# uitableview - MonoTouch.Dialog 中的自定义元素：StyledMultilineElement 顶部对齐，与 UIWebView

> ID：11928757
> 
> 赞同：0
> 
> 时间：2012-08-13T05:46:29.767
> 
> 标签：uitableview, xamarin.ios, monotouch.dialog

想就如何进行定制`Element`设计提出一些建议。

我的设计需要一个`UITableViewCell`包含常用文本标签、详细文本标签和自定义 AccessoryView 的`StyledMultilineElement`. 除此之外，我想`UIWebView`在 DetailTextLabel 下方显示一个。

理想情况下，当`UIWebView`点击单元格时，内容将滑入和滑出。

扩展 很简单`StyledMultilineElement`，但默认情况下，`StyledMultineElement`垂直居中对齐`TextLabel`和`DetailTextLabel`。通过扩展`IElementSizing`和覆盖`GetHeight`，我可以增加单元格大小，但标签居中。是否有一种简单的方法可以将它们对齐到单元格的顶部，或者是否需要手动进行布局（即 in `LayoutSubviews`）？

可以向 StyledMultilineElement 添加自定义视图，例如`UIWebView`，还是建议进行完全自定义的布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:47:42.947

我能找到的最佳解决方案是将`Text`and保留`DetailText`在 a 中`StyledMultiLineElement`，并使用单独的单元格来显示其余内容。

# python - 在 Django 上制作文章模型的最佳方法？

> ID：11928758
> 
> 赞同：0
> 
> 时间：2012-08-13T05:46:30.447
> 
> 标签：python, django, django-admin, admin

我正在创建一个站点，我希望能够更改 Django 管理的内容。制作类似于文章的模型的最佳方法是什么，它具有标题和内容。我需要知道如何为这篇文章选择一个位置。最好的方法是诸如名为 home_main 的 CharField 之类的东西，然后将它们添加到模板中。还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:30:56.823

我会在 Article 模型中添加一个带有选项的 CharField。我可以想象只有一组固定的选择可以放置文章。

```
POSITION_CHOICES = (
    HOME_MAIN, "HOME_MAIN",
    BUTTOM_MAIN, "BOTTOM_MAIN",
    TOP_MAIN, "TOP_MAIN"
)

class Article(models.Model):
    position = models.CharField(max_lenght=50, choices=POSITION_CHOICES) 
```

[https://docs.djangoproject.com/en/dev/ref/models/fields/](https://docs.djangoproject.com/en/dev/ref/models/fields/)

# search - 在自定义 Portlet 中建立索引以进行搜索

> ID：11928761
> 
> 赞同：1
> 
> 时间：2012-08-13T05:47:09.620
> 
> 标签：search, indexing, liferay

为索引 portlet 数据调用哪种方法以及它存储在哪个表中？对自定义 portlet 使用搜索功能，是否有必要在不同的类中实现重新索引方法（如书签 portlet 示例所示），还是可以在索引器类本身中完成？

# jquery - 使用 JQuery 从 Instagram api 中提取信息

> ID：11928764
> 
> 赞同：2
> 
> 时间：2012-08-13T05:47:16.647
> 
> 标签：jquery, api, jsonp, instagram

所以最近我一直在尝试通过 ajax 和使用 jquery 向 Instagram API 发出请求。不过，我似乎遇到了一些麻烦。我正在尝试从通过 GET 请求提供的 JSON 数组中提取可用信息，并且似乎只能访问数组的一小部分，而其他所有内容都以未定义或空白的形式出现。这是我正在使用的代码：

```
$.ajax({
type: "GET",
dataType: "jsonp",
cache: false,
url: "https://api.instagram.com/v1/tags/olympics/media/recent?client_id={clientid}",
success: function(response) {
  for (var i=0; i<25; i++)  
  {
    $("#photos").html(response.data[i].comments.from.username);
  }

  }
}); 
```

只是使用 {clientid} 来表示它将去哪里，并且测试信息据说来自 data[i].comments.from.username 但是这不起作用，我正在绘制空白。我已经使用 JSFiddle 试图找出我哪里出错了，但没有成功。

有没有人对如何克服这个障碍有任何想法？我只使用过这个 API，我对任何其他 API 都没有任何问题。任何可能有帮助的代码也会很好！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T05:54:13.267

尝试附加`&callback=?`到网址。

```
url: "https://api.instagram.com/v1/tags/olympics/media/recent?client_id={clientid}&callback=?", 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T01:16:18.943

您的代码是正确的，但问题是您从计算机文件系统查看页面，`file://....../index.html`这不适用于跨域请求。

您必须从托管环境运行代码，`http://localhost/..../index.html`因为 ajax 发出 http 请求，并且这些请求必须发送到同一个域/服务器。

您可能还必须在您的 instagram 应用程序（在 instagrams 网站上）中设置“WEBSITE URL”，instagram API 将使用它来验证您的请求，`client_id`以确保它们来自正确的域。简而言之，您必须将文件托管在您在 Instagram 网站上的应用程序中指定的同一域中，否则请求将失败。

******更新****
实际上最后一点似乎并不正确，虽然某些 API 要求您将文件托管在应用程序中指定的同一域中，但 instagram 不需要。**

 **只需确保从托管环境运行脚本即可。**

# android - 如何部署 .net 网络服务？

> ID：11928778
> 
> 赞同：0
> 
> 时间：2012-08-13T05:48:49.640
> 
> 标签：android, web-services

我创建了一个 .net 网络服务。它在本地主机中运行。我在我的 android 应用程序中使用该网络服务。但我没有得到输出。我想问一下如何让我的网络服务在互联网上可用？

# perl - 使用 XML::Twig 更改 XML 属性值

> ID：11928787
> 
> 赞同：-2
> 
> 时间：2012-08-13T05:49:41.087
> 
> 标签：perl, perl-module, xml-twig

我想使用[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig). 我可以通过这样使用来做到这`XML::LibXML`一点

```
 my $doc = XML::LibXML->new->parsefile();
       my $xpath = '/model/@name';
       my ($attr) = $doc->findnodes($xpath);    
       $attr->setValue('dfdsa'); 
```

`XML::Twig`但由于一些限制，我不得不使用

**输入**

```
<model name="XXXX" oid="i">
  <system oid="1" uri="/gaia" listing="NO">
    <schema desc="HTTP Sever schema" enab="YES" name="HTTP" oid="1" prio="5">
    </schema>
  </system>
</model> 
```

**输出**

```
<model name="dfdsa" oid="i">
  <system oid="1" uri="/gaia" listing="NO">
    <schema desc="HTTP Sever schema" enab="YES" name="HTTP" oid="1" prio="5">
    </schema>
  </system>
</model> 
```

我试过这段代码，但它没有修改内容

```
my $doc = XML::Twig->new->parsefile('pattern.xml');
my $xpath = '/model';
my ($attr) = $doc->findnodes($xpath);
$attr->set_att(name => 'dfdsa'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:07:21.283

我很失望你似乎几乎没有做任何事情来尝试自己解决这个问题。即使您问题中的 XML 格式错误，我也必须对其进行修复。

这个程序会做你想做的

```
use strict;
use warnings;

use XML::Twig;

my $twig = XML::Twig->new;
$twig->parsefile('pattern.xml');

my ($model) = $twig->findnodes('/model[@name]');
$model->set_att(name => 'dfdsa');

$twig->print(pretty_print => 'indented'); 
```

**输出**

```
<model name="dfdsa" oid="i">
  <system listing="NO" oid="1" uri="/gaia">
    <schema desc="HTTP Sever schema" enab="YES" name="HTTP" oid="1" prio="5"></schema>
  </system>
</model> 
```

# google-chrome - 如何从扩展后台检测隐身模式

> ID：11928788
> 
> 赞同：14
> 
> 时间：2012-08-13T05:49:43.890
> 
> 标签：google-chrome, google-chrome-extension

我在清单文件中将“隐身”指定为“拆分”。

[http://developer.chrome.com/extensions/manifest.html#incognito](http://developer.chrome.com/extensions/manifest.html#incognito)

因此，如果应用程序或扩展程序包含背景页面，该页面也将在隐身进程中运行。这个隐身进程与常规进程一起运行，但有一个单独的仅用于内存的 cookie 存储。

那么如何检测后台页面是否在隐身进程中运行。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-14T05:49:03.467

找到了解决方案。

您可以使用

> chrome.extension.inIncognitoContext

[http://developer.chrome.com/dev/extensions/extension.html#property-inIncognitoContext](http://developer.chrome.com/dev/extensions/extension.html#property-inIncognitoContext)

# javascript - 如何在 Jquery 或 javascript 中验证 24 小时格式的时间？

> ID：11928794
> 
> 赞同：3
> 
> 时间：2012-08-13T05:50:31.300
> 
> 标签：javascript, jquery, asp.net, validation, time

我想验证 24 小时格式的时间，时间格式如下。

```
HH:MM:SS 
```

我怎么可能去。请帮我。我的 HTML 代码是

```
 <asp:TextBox Width="120px" MaxLength="20" ID="txtEndTime" runat="server"></asp:TextBox>
                                <ajaxctrl:maskededitextender id="metxtEndTime" runat="server" targetcontrolid="txtEndTime"
                                    mask="99:99:99" messagevalidatortip="true" masktype="Number" inputdirection="LeftToRight"
                                    clearmaskonlostfocus="false" acceptnegative="None" errortooltipenabled="True" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T05:51:47.963

要仅验证格式，您可以使用以下命令：

```
var valid = (timeStr.search(/^\d{2}:\d{2}:\d{2}$/) != -1); 
```

如果您也尝试验证这些值，则可以尝试以下操作：

```
var valid = (timeStr.search(/^\d{2}:\d{2}:\d{2}$/) != -1) &&
            (timeStr.substr(0,2) >= 0 && timeStr.substr(0,2) <= 24) &&
            (timeStr.substr(3,2) >= 0 && timeStr.substr(3,2) <= 59) &&
            (timeStr.substr(6,2) >= 0 && timeStr.substr(6,2) <= 59); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-02T21:15:12.267

一种不同的方法，但使用了额外的 javascript 库：

```
var valid = moment(timeStr, "HH:mm:ss", true).isValid(); 
```

我想如果你已经在你的项目中使用[了 moment.js](http://momentjs.com/)，那就没有缺点了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T05:58:04.857

这项任务的一个很好的模式是

```
/^(?:[01]\d|2[0-3]):(?:[0-5]\d):(?:[0-5]\d)$/.test(document.getElementById("metxtEndTime").value); 
```

该正则表达式可以在`pattern`输入元素的 HTML5 属性中使用，但我还没有尝试过。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T06:02:43.847

要验证格式和值：

```
// Allows times like 24:05:00
function validateTime(s) {
  var t = s.split(':');

  return /^\d\d:\d\d:\d\d$/.test(s) &&
         t[0] >= 0 && t[0] < 25 &&
         t[1] >= 0 && t[1] < 60 &&
         t[2] >= 0 && t[2] < 60;
} 
```

取决于您是否要允许午夜 24:00:00 之类的值，并将 24:15:00 表示为午夜过后 15 分钟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-08T13:01:51.950

这种方法很简单，并且将 24:01 视为无效。“id”是 php 代码中输入语句中的 id，以便可以将冒号 (:) 插入并写回时间。

```
function checkTime(str,id){
    if (str.length == 0) return true;
    if (str.length < 4)  return false;
    var x = str.indexOf(":");
    if (x < 0){
        str = str.substr(0,2)+":"+str.substr(2,2);
        document.getElementById(id).value = str;
        document.getElementById(id).focus();
        return true;
     }  
    if (
        (str.substr(0,2) >= 0 ) && 
        (str.substr(0,2) <= 24) &&
        (str.substr(3,2) >= 0 ) && 
        (str.substr(3,2) <= 59) &&
        (str.substr(0,2) < 24 || (str.substr(0,2) == 24 && str.substr(3,2) == 0))
        )
        return true;
    return false;
} 
```

# java - 优化 portlet 首选项的性能

> ID：11928798
> 
> 赞同：1
> 
> 时间：2012-08-13T05:50:55.547
> 
> 标签：java, class, hashmap, portlet, websphere-portal

我打算为*PortletPreferences*类编写一个静态类。因为每次调用*PortletPreferences.getValue()*时，我都会调用内部门户数据库来获取值。我调用*PortletPreference.setValue()*和*PortletPreferences.store()*将其保存在数据库中。每次我更改首选项时，都会有一个数据库调用。我想优化我的代码的性能。我正在寻找帮助和建议，我如何才能做到这一点。

我有一个我不确定是否正确的想法。我可以编写一个静态 Map 类来实现这一点吗？如果我错了，请纠正我。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:26:52.320

如果您打算让首选项本质上是“只读”并且对每个用户都相同，那么将它们加载到地图一次然后总是在内存中而不是通过 API 访问它们应该没问题。

但是，如果您计划更改 portlet 首选项（无需重新启动 portlet 应用程序）或者如果允许用户为首选项设置自己的值，则应该小心。在这两种情况下，值都是动态的，可能每次都应该获取。您不希望有人更新偏好而没有看到它具有预期的影响。您也不希望一个用户使用另一个用户保存的首选项值。

在地图中存储首选项本质上是创建一个共享缓存，您必须手动更新它，而不是让 API 来做。如果这种缓存的含义符合您的要求，那么一定要去做。

# sublimetext2 - ST2 键盘映射：“expand_selection”的参数

> ID：11928799
> 
> 赞同：3
> 
> 时间：2012-08-13T05:51:16.823
> 
> 标签：sublimetext2

有谁知道如何在 Sublime Text 2 中编辑“expand_selection”键盘映射，以便它只选择当前行而不是它后面的换行符？

默认键盘映射是这样的：

{ "keys": ["ctrl+l"], "command": "expand_selection", "args": {"to": "line"} }

问题是当您选择该行并开始用新代码替换它时，它后面的行会向上移动到当前行。

我假设您将“args”部分中的“line”替换为其他内容，但我似乎无法在任何地方找到此文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:13:49.480

我也找不到任何选择当前行而不选择下一行的示例/文档。幸运的是，我们可以创建一个执行此操作的命令。

1.  创建一个文件`User/my_utilities.py`。我把我所有的随机自主开发的ST命令都贴在这里。
2.  把这个贴在里面：

    ```
    import sublime, sublime_plugin

    class MyExpandSelectionToLine(sublime_plugin.TextCommand):
        def run(self, edit):
            regions = []
            for s in self.view.sel():
                line = self.view.line(sublime.Region(s.begin(), s.end()))
                if line.end() == s.end():
                    # we're at the end of a line, so select the next line
                    line = self.view.line(sublime.Region(s.end(), s.end() + 1))
                regions.append(line)
            for r in regions:
                self.view.sel().add(r) 
    ```

3.  在您的 User .sublime-keymap 文件中，添加以下内容：

    ```
    `{ "keys": ["super+l"], "command": "my_expand_selection_to_line" }` 
    ```

如果在 Windows 上，你会想要`["ctrl+l"]`而不是`["super+l"]`

这会覆盖默认的命令绑定，用于选择一行来运行我们刚刚编写的新命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T21:32:45.910

Matt 的解决方案效果很好，另一种选择是录制宏并将其分配给`ctrl+l`. 这具有仅选择第一个代码字符的额外好处，因此新行的缩进与您要替换的行相同。

这是宏：

```
[
    {
        "args":
        {
            "extend": false,
            "to": "bol"
        },
        "command": "move_to"
    },
    {
        "args":
        {
            "extend": true,
            "to": "eol"
        },
        "command": "move_to"
    }
] 
```

`\Packages\User`这在（Windows）中保存为 MacroName.sublime-macro 。

这是键盘映射：

```
{ "keys": ["ctrl+l"], "command": "run_macro_file", "args": {"file": "Packages/User/MacroName.sublime-macro"} } 
```

由于这消除了通过重复选择其他行的能力`ctrl+l`，因此我还将`expand_selection`命令移至`ctrl+shift+l`（覆盖`split_selection_into_lines`）：

```
{ "keys": ["ctrl+shift+l"], "command": "expand_selection", "args": {"to": "line"} }, 
```

因此，现在要选择当前行，选择`ctrl+l`然后将选择扩展到下面的行，按`ctrl+shift+l`所需的行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T20:55:08.763

将此添加到我的“键绑定 - 用户”为我做了：

```
{ "keys": ["shift+end"], "command": "move_to", "args": {"to": "hardeol", "extend": true} } 
```

信用：[http ://wesbos.com/sublime-text-end-of-line-wrap/](http://wesbos.com/sublime-text-end-of-line-wrap/)

# asp.net-web-api - 为什么 HttpRequestMessage 如此有限？

> ID：11928803
> 
> 赞同：1
> 
> 时间：2012-08-13T05:51:39.493
> 
> 标签：asp.net-web-api

我正在处理我的第一个 ASP.NET Web API 项目，并且我有一个自定义授权属性正在工作。我要做的是设置属性，以便如果请求是本地的（即调试），则绕过授权检查。

在所有其他 ASP.NET MVC 版本中，我可以检查 Request.IsLocal（甚至 Request.UserHostAddress）以查看请求是否来自本地计算机，但 System.Web.Http.AuthorizeAttribute 仅公开 HttpRequestMessage 对象，这显然没有这些信息，并且似乎还缺少 Request 对象中的一些其他内容。

与 Web API 一起使用的全新（显然是有限的）类的处理是什么，也许更直接的是，如何在我的 Authorize 属性中获取被调用者的主机地址？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T07:30:28.023

有几个不同的例子可以[在这里](https://stackoverflow.com/questions/9565889/get-the-ip-address-of-the-remote-host)或[这里](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)获取你想要的请求信息，例如

```
public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        var context = actionContext.Request.Properties["MS_HttpContext"] as System.Web.HttpContextBase;
        bool isLocal = context.Request.IsLocal; 
```

如果这真的只是为了调试，那么在任何仅调试代码周围使用这样的条件语句可能会更安全 - 特别是在安全上下文中......

```
#if DEBUG 
// 
#endif 
```

**至于为什么......**我想这至少部分是为了更容易进行单元测试和模拟，HTTP 上下文是一个 ASP.NET System.Web 构造...... WebApi 被设计为能够作为自托管代码运行独立于 ASP.NET。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:07:55.083

在开发多个中间件组件或支持其他不幸的 IIS 绑定决定使用 HttpContext 或依赖它的人时，我遇到了同样的问题，无论是直接通过 HttpContext 还是通过 MS_HttpContext（这不是 self-主持人）。我编写了一个小型 shim 库来解决这个问题，方法是返回一个适用于这两种情况的 HttpContext。你可以在[github](https://github.com/danielcrenna/vault/tree/master/httpcontext-shim)和 NuGet上找到它

```
Install-Package HttpContextShim 
```

# c# - 如何构建面向动态 GUI/类的 GUI？

> ID：11928804
> 
> 赞同：2
> 
> 时间：2012-08-13T05:51:39.450
> 
> 标签：c#, vb.net, winforms

这是一个涉及风格比什么都重要的问题。我正在寻找可以帮助我解决**常见 GUI 设计问题**的想法。该应用程序是在 Winforms 中完成的，并且宁愿`WPF`，该应用程序已经完成，但是非常完美主义者，当与其他人一起工作时，我决定必须有更好的方法来解决这个问题。

**如何用一组功能封装控件？**考虑到可能有多个具有相同功能的列，可以说我们有以下自定义飞机系统。这允许飞行协调员为每个飞行分配特定的飞行人员。他们可能对整个机队的所有飞机都不感兴趣，因此他们有能力在选择分配的员工之前选择他们想要查看的飞机，或者如果已经分配了员工，那么它将预先填充员工单元.

我们目前实现这个问题的方法是为每个单元格使用一个按钮，尽管这意味着我们必须在一个类中用许多按钮封装每一列。每列由一个名为“ `AirplaneCrew`”的类表示，并组成每个分配的人员和处理这些列数据的当前飞机。`AirplaneCrew`每个都附有一个`AirplaneCrewGUI`封装按钮列，然后将相应地生成 GUI。为了更好地理解它，我提供了一个简单`UML`的，它可能并不完美，但这是我对如何将类与 GUI 交织在一起的地方缺乏了解。如果有人有一本书或者可以提供如何在使用`GUI`元素时实现更好的实践的总结。

![在此处输入图像描述](../Images/02b526f14cff839f053c66e9641ec990.png) ![一种](../Images/176e8a1c15f0d4b522b11245a42c3d9c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:28:48.103

MVVM 和 MVP 都将视图 (UI) 与逻辑分开。

WPF 中的 DataBinding 允许创建基于需要呈现的数据“生成”UI 的模板。

我希望当前设计中缺少这两件事（或正在造成很多痛苦）。

一个灵活的 UI 需要明确的关注点分离，以便您知道在需要满足新需求时在哪里更改系统，并且当您不想手动进行所有调整时，您将需要一些逻辑（运行时或设计时）来生成系统自动基于配置和/或元数据。

如果当前技术不支持这两个功能，您将需要创建它们（大量工作），从其他人那里获取它们或切换到不同的技术。

# iphone - 从我的应用程序捕获 iPhone 屏幕并录制视频

> ID：11928810
> 
> 赞同：0
> 
> 时间：2012-08-13T05:52:11.440
> 
> 标签：iphone, ios, jailbreak, cydia, video-recording

我只是想创建一个记录 iphone 屏幕视频或捕获 iphone 屏幕图像的应用程序。我知道 Apple 不允许在应用商店中使用此类应用，我也无意这样做。如果我愿意，我可以将我的应用程序上传到**Cydia**，但我目前的目标只是开发一个具有捕获 iphone 屏幕视频或截取设备屏幕截图功能的应用程序。

假设我正在玩一个游戏，我想把它记录下来，这样我就可以向我的朋友展示我玩得有多好。如果游戏本身有一些录制视频的选项（通常不可用），那就太好了。我想开发这种功能。

我很想知道如何在**越狱**设备中做到这一点。类似于 Cydia 的**Display Recorder**应用程序。

**编辑：**

我想以 5 秒的延迟捕获屏幕。我最小化我的应用程序并进入游戏，然后屏幕截图将是该游戏的。无论哪个应用程序正在运行，它只需要捕获 iDevice 屏幕的屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:16:42.827

嗨，您可以使用此代码进行屏幕截图..

```
UIGraphicsBeginImageContext(self.view.window.frame.size);
    [BackView.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-17T06:31:02.767

我已经为我想要的客户做了。我还为 Facebook screenCast 录制了视频以供应用审查。

您的所有需求是：

运行 iOS 8 或更高版本的 iOS 设备 运行 OS X Yosemite 或更高版本的 Mac 闪电电缆（iOS 设备随附的电缆）

无需越狱、第三方应用程序或其他硬件。

以下是执行此操作的步骤：

1.  通过闪电电缆将您的 iPhone 或 iPad 连接到您的 Mac
2.  打开**QuickTime 播放器**
3.  点击文件，然后选择“新电影录制”</li>
4.  将出现一个录制窗口（很可能您在其中）。单击录制按钮前面下拉菜单的小箭头，然后选择您的 iPhone 或 iPad
5.  单击录制按钮。现在在您想要记录的 iOS 设备上执行任务。并保存。

[以下是更多方法的链接：](http://www.apptamin.com/blog/capture-iphone-ipad-screen-video/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-11T06:33:30.210

@Kapil .. 要实现这一点，可以使用 privates api。但显然，苹果不允许这样做。所以你的应用会被拒绝。如果您这样做是为了个人使用，那么您可以使用 IOSurface 之类的 api。希望我的回答对你有所帮助。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-07T17:31:23.530

只需同时按住电源按钮和主页按钮，您就可以在相册中看到捕获的屏幕。

# forms - 催化剂 html::formhandler 传递表单值

> ID：11928812
> 
> 赞同：3
> 
> 时间：2012-08-13T05:52:18.837
> 
> 标签：forms, perl, catalyst

我将[HTML::FormHandler](https://metacpan.org/module/HTML::FormHandler)与 Catalyst 一起使用，并且我有这个字段：

```
has_field 'client_account_id' => ( type => 'Select', options_method => 
\&options_account_id); 
```

我有 3 个用外键连接的表：

```
clients    client_accounts    login
-------    ---------------    -----
id         client_id          client_account_id 
```

现在，我只想为*某个*client_id`&options_account_id`填写 client_account_id 字段。这是我到目前为止的方法：

 *```
sub options_account_id {
    use my_app;
    my $self = shift;
    my @client_accounts = my_app->model('DB::ClientAccount')->search({ 
    'client_id' => $client_id},
    {
        select   => [ qw/id domain/ ],                   ## SELECT
    })->all;

    my @options;
    for(@client_accounts) { 
        push @options, { value => $_->id, label => $_->domain};
    }
    return  @options;
} 
```

现在它显然不起作用，因为 $client_id 变量不存在。我的问题是，当我创建新表单时，有没有办法以某种方式传入某个客户 ID？或者有谁知道更好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T12:44:22.743

在控制器内的表单构造函数中提供 client_id：

```
 my $form = MyApp::Form::MyFormPage->new( client_id => $some_id); 
```

在表单类中添加属性`MyApp::Form::MyFormPage`：

```
 has 'client_id' => ( is => 'rw' ); 
```

在您的方法中访问此属性：

```
sub options_account_id {
 my $self = shift; # self is client_account_id field so has no client_id method
 my $clientid = $self->form->client_id; # access parent to get client id
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:28:18.830

如果你已经解决了这个问题，你能分享你的解决方案吗？到目前为止，我可以找到这种方法：

[将 Catalyst 上下文传递给表单对象（尽管根据http://metacpan.org/pod/HTML::FormHandler::Manual::Catalyst#The-Catalyst-context](http://metacpan.org/pod/HTML%3a%3aFormHandler%3a%3aManual%3a%3aCatalyst#The-Catalyst-context)应该避免这种情况），然后查询传递的表单参数的上下文. 而表单本身会根据client_id动态设置这些参数。

虽然这种方法混合了 MVC，但我不喜欢它。因此，如果您确实找到了更好的解决方案 - 请告诉我。

ps：顺便说一句，很高兴看到来自 Austin 的 Catalyst dev！*

# ajax - 如何让 Selenium WebDriver 等待一段时间？

> ID：11928813
> 
> 赞同：4
> 
> 时间：2012-08-13T05:52:30.957
> 
> 标签：ajax, selenium, webdriver, selenium-webdriver

我可以编写以下代码来要求 WebDriver 等待某个时间

```
new WebDriverWait(driver, 20).until(ExpectedConditions.presenceOfElementLocated(By.id("loginBox"))); 
```

但，

实际上我向服务器发送 AJAX 请求。在这里，我给了 20 毫秒的等待时间。20ms 或 500ms 没关系。如果响应超过给定时间（例如 20ms）。然后我会例外，没有找到这样的元素。

那么有没有更好的方法让服务器等待呢？

谁能帮我？

提前致谢， Gnik

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T07:30:04.543

您可以确保在继续执行此代码之前填充了employeeName 文本框 -

```
new WebDriverWait(driver,10).until(new ExpectedCondition<Boolean>() {

        public Boolean apply(WebDriver driver) {                
            String text = driver.findElement(By.id("employeeName")).getText();
            return !text.equals("");
        }
    }); 
```

现在此代码检查employeeName 文本框中的文本是否为空。如果它是空白的，驱动程序会等待 10 秒，或者如果由于 AJAX 调用而在文本字段中填充了一些数据，那么它会继续执行。

如果这不起作用，您可以发布一些用于进行 AJAX 调用的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T21:30:41.690

```
public void WaitForAjaxCompletion()
        {
            Stopwatch sw = new Stopwatch();
            sw.Start();
            try
            {
                while (sw.Elapsed.TotalSeconds < int.Parse(ConfigurationManager.AppSettings["TimeOut"]))
                {
                    var ajaxIsComplete = (bool)((IJavaScriptExecutor)_webDriver).ExecuteScript("return window.jQuery != undefined && jQuery.active==0");
                    if (ajaxIsComplete)
                        break;
                    Thread.Sleep(100);
                }
            }
            catch (Exception)
            {
                Console.WriteLine("Ajax call time out time {0} has passed ", ConfigurationManager.AppSettings["TimeOut"].ToString());
            }
            finally
            {
                sw.Stop();
            }
        } 
```

# perforce - P4V的Branch、Copy、Integrate/Merge有什么区别

> ID：11928816
> 
> 赞同：24
> 
> 时间：2012-08-13T05:53:05.200
> 
> 标签：perforce, p4v

我正在使用 P4v，当我在文件夹上调出上下文菜单时，我有以下选项：- - 集成/合并 - 复制 - 分支

在我看来，他们都在做同样的事情。这些命令有什么真正的区别吗？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-13T15:03:09.983

当您集成或合并时，您将文件混合在一起。也就是说，您最终不得不解析具有重叠更改的文件。“p4 合并”和“p4 集成”执行此操作。

当您复制时，您替换了文件——没有解决重叠的更改。'p4 copy' 就是这样做的。

分支时，您将文件复制到以前不存在文件的位置。'p4 populate' 就是这样做的。

P4V 的功能取决于您拥有的 P4V 版本。您可以在日志窗格中查看它正在运行的 p4 命令。（使用“预览”让它使用 -n 运行这些命令。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-24T16:47:00.047

从[Perforce 手册](https://www.perforce.com/perforce/doc.current/manuals/p4guide/chapter.codelines.html)：

**分支**

（名词）通过复制文件而不是添加文件创建的一组相关文件。一组相关文件通常称为代码行。

（动词）创建一个分支。

**整合**

从现有文件创建新文件，保留其祖先（分支），或将更改从一组文件传播到另一组文件（合并）。

**合并**

将两个冲突文件修订的内容合并到一个文件中的过程，通常使用 P4Merge 之类的合并工具。

**解决**

用于协调文件的两个修订版本之间的差异的过程。您可以选择通过选择要提交的文件或合并冲突文件的内容来解决冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-22T19:39:16.863

从 Calmarius 2013 年 6 月 27 日 9:03 开始​​：

> “p4 copy”是否在服务器端进行复制？

如果您询问 Perforce 是否在服务器上存储每个文件的额外副本，那么答案是否定的。该副本仍然只是对 Perforce 库存储区域中文件的单个实例的引用。

# java - Java EE 容器内的并发编程

> ID：11928817
> 
> 赞同：4
> 
> 时间：2012-08-13T05:53:06.777
> 
> 标签：java, jakarta-ee, tomcat, concurrency, quartz-scheduler

我有一些 Quartz 计划的作业，这些作业是 IO 密集型的，并且很容易分解为多个任务。

多亏了 Spring，作业在 tomcat Web 容器中被实例化和调度。

如果我在 Job 类和 Java EE 容器中使用***java.util.concurrent API 可以吗？***

我可以通过使用***FixedThreadPool***并调整其大小并放弃一些内核（如本例中的两个）来与 Tomcat 共享逻辑处理器吗？

```
int numberOfCores = Runtime.getRuntime().availableProcessors();
final int poolSize = numberOfCores - 2 // Give away Two slots for TOMCAT
final ExecutorService executorPool = Executors.newFixedThreadPool(poolSize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:27:03.870

是的，你可以这样做。但是在将你的工作放入 tomcat 之前。请注意以下事项。

你在tomcat中有一个网络应用程序吗？如果是，您的 Web 应用程序是高度活跃的高负载门户吗？
如果是，您的线程作业将从 tomcat 服务器中带走有价值的处理

作业是由紧密耦合的线程作业完成的还是需要 tomcat 完成的？
如果你的工作真的很依赖。您最好创建一个单独的批处理服务器并使用它。您可以查看 spring-batch 的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:15:20.120

也许，仔细。

请注意，没有任何线程（除了原来的线程——我们称之为 web-app 线程）能够可靠地与容器交互。通常，不鼓励在 Java EE 运行时中使用线程。不过，这并非闻所未闻。

### 雄猫选项：

1.  [Java EE 有一个 WorkManager API](http://docs.oracle.com/javaee/5/api/javax/resource/spi/work/WorkManager.html)。至少有[一种用于 tomcat 的实现](http://commonj.myfoo.de/)。我不能说它的效果如何。 [本文对此进行了更多讨论](http://www.devx.com/Java/Article/28815/0)。

2.  开始你自己的线程。如何管理事物的模型可能是 Swing Event Dispatch Loop `SwingUtilities.invokeLater(Runnable)`；在您的情况下，让工作线程将在容器中完成的工作提交回容器安全的 Web 应用程序线程。该线程将在等待工作线程完成时运行句柄工作循环。

3.  将工作请求发送回 tomcat 服务器：您的 Web 应用现在充当客户端（Web 服务？）。正如 AkhilDev 建议的那样，这样的模型可以很好地扩展以将工作卸载到其他服务器。

# drupal - 如何在drupal分页结果中添加排序

> ID：11928822
> 
> 赞同：0
> 
> 时间：2012-08-13T05:54:00.773
> 
> 标签：drupal, sorting, drupal-6, pagination

我是 drupal 的新手，我正在使用 drupal 6。我有一个分页记录列表。现在我必须在结果中添加排序，但无法更改查询以获取排序结果。那么有什么办法可以让我修改从查询中获取的结果，然后修改分页列表。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:33:44.027

我们需要知道您是否在使用视图或如何对“列表”进行排序。你只是使用默认的首页吗？没有更多上下文，这个问题无法回答

# image - 通过标签处理 Pyrocms 图像

> ID：11928823
> 
> 赞同：0
> 
> 时间：2012-08-13T05:54:04.737
> 
> 标签：image, codeigniter, attributes, pyrocms

我在 pyrocms CP 中创建了一个页面。我正在使用此标签显示我的图像时遇到问题。

```
{{ theme:image file="service.jpg" }} 
```

我知道替代方案

```
echo Asset::img('service.jpg','alt text',array('width'=>200 ,'height'=>200)); 
```

但是第二条指令在控制面板中创建的页面中不起作用。我需要使用第一条指令设置图像的属性。我找到了在设计中使用 css 的替代方法，但它也不起作用。如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T00:30:25.927

当您从 pyro 管理页面创建页面时，恐怕您不能使用 php。这对你有用吗？ `{{theme:image file="service.jpg" alt="foo" title="bar"}}`

# java - Eclipse-CVS 中的 ClassNotFoundException

> ID：11928826
> 
> 赞同：0
> 
> 时间：2012-08-13T05:54:26.947
> 
> 标签：java, liferay

我名为 Liferay`Project A`的项目依赖于 CVS 存储库中名为的另一个项目`Project B`，

`ClassNotFoundException`每次我在`Project B`CVS 项目中使用类时都会得到这个。我不明白为什么，我也将它包含`Project B`在我的项目的构建路径中，但不起作用。

请帮助我，如何使用存储库中项目中的类？这是抛出`Stack Trace`的`exception`：

```
05:28:44,714 ERROR [jsp:154] java.lang.ClassNotFoundException: com.fluxion.profileservice.DAOImpl.EnrolledCustomerDAOImpl
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1491)
    at com.fluxion.myaccounts.service.EnrolledCustomerService.getCustomerIDList(EnrolledCustomerService.java:10)
    at com.fluxion.myaccounts.portlet.OrderTaggingPortlet.doView(OrderTaggingPortlet.java:43)
    at javax.portlet.GenericPortlet.doDispatch(GenericPortlet.java:328)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:101)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:92)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:638)
    at com.liferay.portlet.InvokerPortletImpl.invokeRender(InvokerPortletImpl.java:723)
    at com.liferay.portlet.InvokerPortletImpl.render(InvokerPortletImpl.java:425)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

05:28:49,669 ERROR [jsp:154] java.lang.NoClassDefFoundError: com/fluxion/profileservice/DAOImpl/EnrolledCustomerDAOImpl
    at com.fluxion.myaccounts.service.EnrolledCustomerService.getCustomerIDList(EnrolledCustomerService.java:10)
    at com.fluxion.myaccounts.portlet.OrderTaggingPortlet.doView(OrderTaggingPortlet.java:43)
    at javax.portlet.GenericPortlet.doDispatch(GenericPortlet.java:328)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:101)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:92)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:638)
    at com.liferay.portlet.InvokerPortletImpl.invokeRender(InvokerPortletImpl.java:723)
    at com.liferay.portlet.InvokerPortletImpl.render(InvokerPortletImpl.java:425)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)

Loading file:/C:/liferay-portal-tomcat-6.0.6-20110225/liferay-portal-6.0.6/tomcat-6.0.29/webapps/chat-portlet/WEB-INF/classes/portlet.properties
05:28:49,777 INFO  [PluginPackageUtil:1230] Checking for available updates
05:28:49,780 INFO  [PluginPackageUtil:1274] Finished checking for available updates in 2 ms
05:32:02,296 ERROR [jsp:154] java.lang.NoClassDefFoundError: com/fluxion/profileservice/DAOImpl/EnrolledCustomerDAOImpl
    at com.fluxion.myaccounts.service.EnrolledCustomerService.getCustomerIDList(EnrolledCustomerService.java:10)
    at com.fluxion.myaccounts.portlet.OrderTaggingPortlet.doView(OrderTaggingPortlet.java:43)
    at javax.portlet.GenericPortlet.doDispatch(GenericPortlet.java:328)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:101)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:92)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:638)
    at com.liferay.portlet.InvokerPortletImpl.invokeRender(InvokerPortletImpl.java:723)
    at com.liferay.portlet.InvokerPortletImpl.render(InvokerPortletImpl.java:425)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:27:00.080

问题是项目 B 中的类在编译期间可访问，但在运行时不可访问。要使其正常工作，您有几种方法：

1.  Simpy：将两个项目合并为一个项目。这是最简单的方法，您将多个 portlet 和钩子放在一个项目中。一个类加载器将加载所有类。

2.  如果您需要共享类，这将由多个项目加载 - 创建一个仅包含 java 类的项目（没有门户配置，如 portlet.xml 等）。将此共享项目导出为 jar 文件并将 jar 文件放入文件夹中的其他项目（如您的项目 A）中`docroot/WEB-INF/lib`。如果共享类具有共享状态，则将 jar 文件唯一地放入 tomcat 共享文件夹中，例如`tomcat/lib/ext/`

# c++ - 不能迭代集合

> ID：11928829
> 
> 赞同：1
> 
> 时间：2012-08-13T05:54:36.343
> 
> 标签：c++, stl, iterator, set

我需要帮助。尝试迭代集合时出现以下错误：

> 错误 1 ​​错误 C2440：“正在初始化”：无法从“std::_Tree_const_iterator<_Mytree>”转换为“compound_objectNS::Compound_object *”c:\program files (x86)\microsoft visual studio 10.0\vc\include\xmemory 208

我得到以下代码：从文件“compound_object.cpp”中提取：

```
typedef compound_objectNS::Compound_object OBJECT
    bool OBJECT::operator== (const Compound_object &object) const
    {
        return this == &object;
    }

    bool OBJECT::operator< (const Compound_object &object) const
    {
        return this->m_numberOfObject < object.m_numberOfObject;
    } 
```

在这里允许设置对元素进行排序，我覆盖了运算符“==”和“<”

客户端文件：

```
for (objectImitatorNS::set<compound_objectNS::Compound_object*>::iterator it = Objects->begin();
        it != Objects->end(); ++it)
    {
        this->m_imitatedObjects->insert(it);
    } 
```

当我发现行时会引发错误

> this->m_imitatedObjects->插入（它）

执行。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T05:58:58.070

说`this->m_imitatedObjects->insert(*it);`。您正在插入*values*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T05:59:00.003

`std::set::insert`（采用一个参数的版本）不采用迭代器。它需要一个值。[见这里](http://www.cplusplus.com/reference/stl/set/insert/)。你可以试试：

```
this->m_imitatedObjects->insert(*it); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:10:27.570

您必须插入值而不是迭代器 obj。

# android - 从 Google Play 中分离应用

> ID：11928831
> 
> 赞同：1
> 
> 时间：2012-08-13T05:54:51.883
> 
> 标签：android

我的 SGS2 上有一个带有 OS 2.3.5（根）的开源应用程序，我想从 Google Play 中分离出来。我不希望 Google Play 再向我显示此应用的更新。

我需要做什么才能让这个应用程序从 Google Play 中删除，比如说让该应用程序与 Google Play 中将由 Google 服务器更新的应用程序不同？

由于 Google Market 更改为 Google Play，更新和应用程序的信息不再存储在设备上，而是存储在 Google Play 服务器上，这使得无法再从 Google Play 中分离应用程序。我认为分离一个封闭源代码的应用程序几乎是不可能的，但是当我有源代码时，至少我可以编译它并改变一些东西，但至少是什么？

希望有人可以在这里帮助我，我试图在 android-dev Mailinglist 中发帖，但是这个问题可能是一个初学者的问题。

谢谢你。

坦率

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:23:22.507

我在另一个论坛帖子中找到[了](https://android.stackexchange.com/questions/23862/how-to-hide-updates-from-market-given-titanium-backup-detach-from-market-doe)答案。ce4 的最后一个答案可以解决问题。

使用 Zipsigner2 应用程序，我可以使用另一个密钥（自动测试密钥）对应用程序进行签名。首先我用钛做一个备份（这给了我一个可以用 ES 解压缩的 gz 文件）然后我使用自动测试密钥用 Zipsigner2 签署这个 apk。现在我可以重新安装该应用程序，Google Play 不会尝试更新，不再认为它是同一个应用程序。

如果 Zipsigner 解决方案不起作用，例如应用程序“Swype”将永远崩溃并且无法工作，Firelord 提供了另一个解决方案，在 [如何摆脱 Google Play 商店中给定应用程序的更新通知？](https://android.stackexchange.com/a/114815/24154) 我现在将它用作每小时一次的 Tasker 任务，它似乎有效。感谢火神！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-13T06:00:15.513

一次检查[`Uninstalling Android apps`](http://support.google.com/googleplay/bin/answer.py?hl=en&answer=2521768)

[`You can now update, uninstall Android apps via Google Play site`](http://howto.cnet.com/8301-11310_39-57462148-285/you-can-now-update-uninstall-android-apps-via-google-play-site/)

# magento - 如何将数据从 magento 1.4.1.1 导入到 magento 1.7.0.2 db

> ID：11928832
> 
> 赞同：0
> 
> 时间：2012-08-13T05:54:53.567
> 
> 标签：magento

我有一个 magento 站点版本 1.4.1.1。

我将站点升级到 magento 1.7.0.2。在一个子域中，与另一个数据库。

这意味着现在我有：

```
domain                 db              version

example.com         magento_cart       1.4.1.1
test.example.com    magento_test       1.7.0.2 
```

客户现在使用该`example.com`站点，他每天将产品添加到该数据库中。

在升级子域中的 magento 站点之前，我执行了以下步骤：

```
1.Take a backup from main domain.
2.import that backup into sub domain's db.
3.take a copy of all files in main domain and put it into sub domain.
(Now in sub domain there have a working copy of main domain in sub domain)

4.then upgraded the magento site to 1.7.0.2 in sub domian. 
```

当我在子域中进行此升级时，客户还添加了更多产品并购买了更多产品。这意味着现在新数据库和旧数据库与 theris 数据不同。这意味着在旧数据库中有更多产品。所以我想要将该数据导入到新数据库中的相应表中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:49:46.443

如果它只是您想要升级的产品，最简单的方法（我认为）是通过 csv - system>import/export>profiles 导出。做所有产品，确保复制媒体文件夹，以便照片到位。您可以确保 csv 中的相对图片地址。然后导入新店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:14:46.187

这里已经有一些关于相同问题的链接

[将magento站点从一台服务器移动到另一台服务器](https://stackoverflow.com/questions/11739642/moving-magento-site-from-one-server-to-another-server/11742397#11742397)

[进行 Magento 更新的最佳实践？](https://stackoverflow.com/questions/11757775/best-practice-for-conducting-a-magento-update/11767694#11767694)

[配置兼容的开发和生产站点](https://stackoverflow.com/questions/11808235/configuring-compatible-development-and-production-sites/11808793#comment15738750_11808793)

# java - Java 邮件 API，无法从 Outlook 客户端读取“.msg 附件”

> ID：11928835
> 
> 赞同：2
> 
> 时间：2012-08-13T05:55:33.660
> 
> 标签：java, jakarta-ee, jakarta-mail

我有一个使用 javamail api 阅读电子邮件的类，我面临的问题是，当我从 gmail 发送包含 .msg 附件的邮件时，我的代码可以轻松阅读，但是当我为 Outlook 发送相同的邮件时客户端，“.msg”附件不显示

我的课的代码如下：

```
public class TestEmail {
    static int count = 5;
    static String ipAddress[] = Utility.getipAddress();
    static String auth[] = Utility.getEmailPasswd();

    private static final String SMTP_AUTH_USER = auth[0];
    private static final String SMTP_AUTH_PWD  = auth[1];

    private static String defaultServer=ipAddress[1];
    private static String domainServer=ipAddress[0];

    public static void main(String[] args) throws Exception {
        /*************** Variable Declaration *********************/

        System.out.println("SMTP_AUTH_USER <><> " +  SMTP_AUTH_USER);
        System.out.println("SMTP_AUTH_PWD <><> " +  SMTP_AUTH_PWD);
        System.out.println("defaultServer <><> " +  defaultServer);
        System.out.println("domainServer <><> " +  domainServer);

        int noOfEmail = 0;
        String from = "", replyTo = "", to = "", subject = "", cc = "", bcc = "", msgId = "";
        Date sentDate = new Date();
        String fileName = "";

        /************** End of Variable Declaration ****************/
        Properties props = System.getProperties();
        props.put("mail.smtp.submitter", new MailAuthenticator());
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.host", domainServer);
        props.put("mail.smtp.port", "25");
        props.put("mail.imap.port", "143");
        props.put("mail.smtp.localhost", defaultServer);
//      props.put("mail.debug", "true");
        props.put("mail.smtp.starttls.enable", "true");
        Session session = Session.getDefaultInstance(props,new MailAuthenticator());
//      Store store = session.getStore("pop3");
        Store store = session.getStore("imap");
        store.connect(domainServer, null, null);
//      session.setDebug(true);

        /************ Reading Inbox *********/
        Folder inbox = store.getFolder("INBOX");
        inbox.open(Folder.READ_WRITE);

        /************ No of Email *********/
        noOfEmail = inbox.getMessageCount();
        System.out.println("No Of Mail <><> " + noOfEmail);

        /******** Search Unread Messase ********/
        FlagTerm ft = new FlagTerm(new Flags(Flags.Flag.SEEN), false);
        Message messages[] = inbox.search(ft);
        System.out.println("Total UNREAD MESSAGE <><> " +  messages.length);

        /*********** Traverse The Messase *******/
        for (int i = 0; i < messages.length; i++) {
                Message message = messages[i];
                String contentType = message.getContentType ();
                String content = Utility.splitContentType(contentType);
                boolean multiPart = false;
                if (content.equalsIgnoreCase("mixed")) {
                    multiPart = true;
                } else {
                    multiPart = false;
                }
                if (multiPart == true) {
                    Multipart mp = (Multipart) message.getContent();
                    for (int j = 0, n = mp.getCount(); j < n; j++) {
//                      System.out.println("n Valuev <<><> " + n);
                        Part part = mp.getBodyPart(j);
                        BodyPart bodyPart = mp.getBodyPart(j);
                        String disposition = part.getDisposition();
//                      System.out.println("disposition <><><><> " + disposition);

                        if ((disposition != null)&& ((disposition.equals(Part.ATTACHMENT) || (disposition.equals(Part.INLINE))))) {
                            System.out.println("INSIDE IF ATTACHMENT");
                            fileName = bodyPart.getFileName();
                            System.out.println("fileName <><> " + fileName);
                            String ext = Utility.splitFileName(fileName);
                            if(ext.equalsIgnoreCase("msg")){
                                System.out.println("INSIDE MSG");
                                saveFile(fileName, part.getInputStream());
//                              File emlFile = new File("C:/test/" + fileName); // For Windows
                                File emlFile = new File("/usr/AirtelMail/" + fileName);
                                InputStream source = new FileInputStream(emlFile);
                                MimeMessage message1 = new MimeMessage(session, source);
                                from = InternetAddress.toString(message1.getFrom());
                                replyTo = InternetAddress.toString(message1
                                        .getReplyTo());
                                to = InternetAddress.toString(message1
                                        .getRecipients(Message.RecipientType.TO));
                                cc = InternetAddress.toString(message1
                                        .getRecipients(Message.RecipientType.CC));
                                bcc = InternetAddress.toString(message1
                                        .getRecipients(Message.RecipientType.BCC));
                                subject = message1.getSubject();
                                sentDate = message1.getSentDate();
                                msgId = message1.getMessageID();
                                if (from != null && replyTo != null && to != null
                                        && subject != null && sentDate != null) {
                                    System.out.println("From: " + from);
                                    System.out.println("Reply-to: " + replyTo);
                                    System.out.println("To: " + to);
                                    System.out.println("Subject: " + subject);
                                    System.out.println("Sent Date: " + sentDate);
                                }
                            }else if(ext.equalsIgnoreCase("eml")){
                                System.out.println("INSIDE EML");
                                saveFile(fileName, part.getInputStream());
//                              File emlFile = new File("C:/test/" + fileName); // For Windows
                                File emlFile = new File("/usr/AirtelMail/" + fileName);
                                InputStream source = new FileInputStream(emlFile);
                                MimeMessage message1 = new MimeMessage(session, source);
                                from = InternetAddress.toString(message1.getFrom());
                                replyTo = InternetAddress.toString(message1
                                        .getReplyTo());
                                to = InternetAddress.toString(message1
                                        .getRecipients(Message.RecipientType.TO));
                                cc = InternetAddress.toString(message1
                                        .getRecipients(Message.RecipientType.CC));
                                bcc = InternetAddress.toString(message1
                                        .getRecipients(Message.RecipientType.BCC));
                                subject = message1.getSubject();
                                sentDate = message1.getSentDate();
                                msgId = message1.getMessageID();
                                if (from != null && replyTo != null && to != null
                                        && subject != null && sentDate != null) {
//                                  System.out.println("From: " + from);
//                                  System.out.println("Reply-to: " + replyTo);
//                                  System.out.println("To: " + to);
//                                  System.out.println("Subject: " + subject);
//                                  System.out.println("Sent Date: " + sentDate);
                                }
                            }else{
                                System.out.println("INSIDE NOT EML");
                                from = InternetAddress.toString(message.getFrom());
                                replyTo = InternetAddress.toString(message.getReplyTo());
                                to = InternetAddress.toString(message
                                        .getRecipients(Message.RecipientType.TO));
                                cc = InternetAddress.toString(message
                                        .getRecipients(Message.RecipientType.CC));
                                bcc = InternetAddress.toString(message
                                        .getRecipients(Message.RecipientType.BCC));
                                subject = message.getSubject();
                                sentDate = message.getSentDate();
                                msgId = "";

                                if (from != null && replyTo != null && to != null
                                        && subject != null && sentDate != null) {
//                                  System.out.println("From: " + from);
//                                  System.out.println("Reply-to: " + replyTo);
//                                  System.out.println("To: " + to);
//                                  System.out.println("Subject: " + subject);
//                                  System.out.println("Sent Date: " + sentDate);
                                }
                            }// End Else
                        }// End Check disposition
                    } // End of j loop
                } else {
                    System.out.println("INSIDE IF NOT ATTACHMENT");
                    from = InternetAddress.toString(message.getFrom());
                    replyTo = InternetAddress.toString(message.getReplyTo());
                    to = InternetAddress.toString(message
                            .getRecipients(Message.RecipientType.TO));
                    to = InternetAddress.toString(message
                            .getRecipients(Message.RecipientType.TO));
                    cc = InternetAddress.toString(message
                            .getRecipients(Message.RecipientType.CC));
                    bcc = InternetAddress.toString(message
                            .getRecipients(Message.RecipientType.BCC));
                    subject = message.getSubject();
                    sentDate = message.getSentDate();
                    msgId = "";
                    if (from != null && replyTo != null && to != null
                            && subject != null && sentDate != null) {
                        System.out.println("From: " + from);
                        System.out.println("Reply-to: " + replyTo);
                        System.out.println("To: " + to);
                        System.out.println("Subject: " + subject);
                        System.out.println("Sent Date: " + sentDate);
                    }
                }

//              System.out.println("cccccccc <><> " + cc);
                // Getting Email List if TO OR CC OR BCC has  more than 1 email ID
                ArrayList<String> toEmailList = new ArrayList<String>();
                ArrayList<String> ccEmailList = new ArrayList<String>();
                ArrayList<String> bccEmailList = new ArrayList<String>();
                if(to != null){
                    toEmailList = Utility.getEmailList(to);
                }
                if(cc != null){
                    ccEmailList = Utility.getEmailList(to);
                }
                if(bcc!= null){
                    bccEmailList = Utility.getEmailList(to);
                }

//              String toEmailList[] = Utility.getEmailList(to);
//              String ccEmailList[] = Utility.getEmailList(cc);
//              String bccEmailList[] = Utility.getEmailList(bcc);
                // Get LEA EmailID
                boolean toCheck = false, ccCheck = false, bccCheck = false;
                int count = 0;
                if(toEmailList.size() != 0){
                    for(int k = 0;k<toEmailList.size();k++){
                        String email = toEmailList.get(k); 
                        String trackLeadId = Utility.splitEmail(email);
                        System.out.println("trackLeadId Value<><>" + trackLeadId);
                        String templeaEmailID[] = Utility.getFwdMailId(trackLeadId);
                        String leaEmailID = templeaEmailID[0];
                        String nodalOffID = templeaEmailID[1];
                        System.out.println("leaEmailID <><><> " + leaEmailID);
                        if(leaEmailID != null){
                            TestEmail.SendMail(leaEmailID, from, message, session, subject, msgId);
                            toCheck = true;
                            System.out.println("Mail Forwarded");
                            Utility.insertInfo(leaEmailID, trackLeadId, nodalOffID);
                        }

//                      else{
//                          message.setFlag(Flags.Flag.DELETED, true);
//                          System.out.println("Mail Deleted");
//                      }
                    }// ENd of K Loop
                }

                if(ccEmailList.size() != 0){
                    for(int l = 0;l<ccEmailList.size();l++){
                        String email = ccEmailList.get(l); 
                        String trackLeadId = Utility.splitEmail(email);
                        System.out.println("trackLeadId Value<><>" + trackLeadId);
                        String templeaEmailID[] = Utility.getFwdMailId(trackLeadId);
                        String leaEmailID = templeaEmailID[0];
                        String nodalOffID = templeaEmailID[1];
                        System.out.println("leaEmailID <><><> " + leaEmailID);
                        if(leaEmailID != null){
                            TestEmail.SendMail(leaEmailID, from, message, session, subject, msgId);
                            ccCheck = true;
                            System.out.println("Mail Forwarded");
                            Utility.insertInfo(leaEmailID, trackLeadId, nodalOffID);
                        }
                    }// ENd of L Loop
                }

                if(bccEmailList.size() != 0){
                    for(int m = 0;m<bccEmailList.size();m++){
                        String email = bccEmailList.get(m); 
                        String trackLeadId = Utility.splitEmail(email);
                        System.out.println("trackLeadId Value<><>" + trackLeadId);
                        String templeaEmailID[] = Utility.getFwdMailId(trackLeadId);
                        String leaEmailID = templeaEmailID[0];
                        String nodalOffID = templeaEmailID[1];
                        System.out.println("leaEmailID <><><> " + leaEmailID);
                        if(leaEmailID != null){
                            TestEmail.SendMail(leaEmailID, from, message, session, subject, msgId);
                            bccCheck = true;
                            System.out.println("Mail Forwarded");
                            Utility.insertInfo(leaEmailID, trackLeadId, nodalOffID);
                        }
                    }// ENd of M Loop
                }

                if(ccEmailList.size() == 0 || bccEmailList.size() == 0){
                    if(toCheck == false){
                        message.setFlag(Flags.Flag.DELETED, true);
                        System.out.println("Mail Deleted");

                    }
                }
                if(toCheck == false && ccCheck == false && bccCheck ==false){
                    message.setFlag(Flags.Flag.DELETED, true);
                    System.out.println("Mail Deleted");
                }

        } // End of i Loop
        inbox.close(true);
    }
} 
```

两种情况的控制台输出都是

从 Outlook 发送时：

```
INSIDE IF ATTACHMENT
fileName <><> null 
```

从 gmail 发送时：

```
INSIDE IF ATTACHMENT
fileName <><> "Attachment name".msg 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:41:02.747

您说“...当我为 Outlook 客户端发送相同的邮件时...”；你的意思是**从**Outlook 客户端？

附件不需要包含文件名；也许 Outlook 没有为 .msg 附件设置文件名。您可以使用 JavaMail 附带的 msgshow.java 演示程序来导出消息的整个结构和内容。您可能还想检查邮件的原始 MIME 内容，以准确了解 Outlook 发送给您的内容。

此外，您可能希望查看“isMimeType”方法来简化您的代码。邮件附件的 MIME 类型应为 message/rfc822。

# tsql - 插入速度变差

> ID：11928842
> 
> 赞同：2
> 
> 时间：2012-08-13T05:56:37.730
> 
> 标签：tsql, indexing, sql-server-2008-r2

基本问题是插入率随着数据的加载而下降。

*   禁用所有索引，但 PK
*   禁用 FK 约束。
*   在插入之前使用 LINQ 按 PK 对数据进行排序

但仍有恶化的插入速度。

在加载期间有有限数量的用户。所以不能拿下PK。

数据按 PK 的顺序加载，但该索引仍然是碎片。

Int、TinyInt、String 的复合 PK。

在负载重建索引之前，填充因子为 100%。该表有另一个被禁用的索引。

现在有 20,00 行加载到表中，PK 索引已经有 4% 的碎片。它继续碎片化并且加载速度恶化。使用 DBCC SHOWCONTIG ('docMVtext', 'PK_docMVtext') 检查碎片

*   扫描的页数..................................................: 155
*   扫描范围..........................：26
*   范围开关..............................：25
*   平均 每个范围的页数.......................：6.0
*   扫描密度 [最佳计数：实际计数].......：76.92% [20:26]
*   逻辑扫描碎片......................：4.52%
*   范围扫描碎片......................：96.15％
*   平均 每页可用字节数.....................：54.9
*   平均 页面密度（完整）......................：99.32%

Extent Scan Fragmentation 很高，也许我应该提出第二个问题。

我不认为它是 varchar(600) 值作为 PK 的一部分，因为有一个姐妹表 docSVtext 只有在 int tinyint 上有 PK 并且遇到同样的问题。

通过备份还原从另一个创建此数据库。需要相同的配置表但不同的数据表。从数据表中删除数据并运行 shrinkdb TRUNCATEONLY。

使用插入值 ()、()、() 加载值。

认为值 ()、()、() 可能正在更改顺序，因此将 .NET 更改为每行插入一个，即使按 PK 顺序插入数据，PK 上仍然会出现碎片。

三次检查数据是否按 PK 顺序插入。

在 .NET 应用程序中，我使用 LINQ 在插入之前对数据进行排序。在调试中，我查看了 40 个，它们都已正确排序。

甚至创建了一个具有相同三列的 iden 的镜像表。在该镜像表上使用相同的插入来验证插入顺序。当我在按 iden 排序的镜像表上进行选择时，数据按排序顺序排列。这只是我插入按PK排序的数据的二次测试。

下面是表定义。（是的，我知道在第一段中没有 FK 约束，这显示了 FK 约束。当我删除 FK 约束时，对插入速度没有帮助。）

```
USE [Gabe2a_ENCORE]
GO

/****** Object:  Table [dbo].[docMVtext]    Script Date: 08/12/2012 20:13:35 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[docMVtext](
    [sID] [int] NOT NULL,
    [fieldID] [tinyint] NOT NULL,
    [value] [varchar](600) NOT NULL,
 CONSTRAINT [PK_docMVtext] PRIMARY KEY CLUSTERED 
(
    [sID] ASC,
    [fieldID] ASC,
    [value] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = ON, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON, FILLFACTOR = 100) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[docMVtext]  WITH CHECK ADD  CONSTRAINT [FK_docMVtext_docFieldDef] FOREIGN KEY([fieldID])
REFERENCES [dbo].[docFieldDef] ([ID])
GO

ALTER TABLE [dbo].[docMVtext] CHECK CONSTRAINT [FK_docMVtext_docFieldDef]
GO

ALTER TABLE [dbo].[docMVtext]  WITH NOCHECK ADD  CONSTRAINT [FK_docMVtext_docSVsys] FOREIGN KEY([sID])
REFERENCES [dbo].[docSVsys] ([sID])
GO

ALTER TABLE [dbo].[docMVtext] CHECK CONSTRAINT [FK_docMVtext_docSVsys]
GO 
```

让我感到困惑的是，在这个初始加载之后，我解析和索引文本以创建一个简单的全文搜索索引。为了加载这些表，我在内存中使用相同的排序策略并按 PK 的顺序插入，我在那里得到了 PK 的零碎片。我无法弄清楚在 PK 上获得这种碎片的初始负载有什么不同。

我知道人们不会相信这一点，但主要瓶颈在第一张桌子上。

下面的第一个代码比第二个代码快 10 倍，表中有 300,000 行。第一个在 160 万行时快 30 倍。一开始就为我使用草率的@@identity 服务。

```
SQLcmd.CommandText = commandText + ";  SELECT SCOPE_IDENTITY() ";
sID = int.Parse((SQLcmd.ExecuteScalar().ToString()));

SQLcmd.CommandText = commandText;
rowsRet = SQLcmd.ExecuteNonQuery();
if (rowsRet == 1)
{
    commandText = "select @@identity from [docSVsys]";
    SQLcmd.CommandText = commandText;
    sID = int.Parse(SQLcmd.ExecuteScalar().ToString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:40:10.850

由于这是用于初始化的批量插入，我建议删除表上的所有索引。通过这样做，您可以尽快将数据输入服务器。之后，在数据加载完成时应用 PK 和非聚集索引。Sql server 将能够一次处理所有数据的重新排列，而不是每次达到给定页面的填充因子时。

# web-services - 在黑莓中使用 Web 服务时未捕获的异常

> ID：11928845
> 
> 赞同：0
> 
> 时间：2012-08-13T05:57:05.683
> 
> 标签：web-services, rest, blackberry, blackberry-simulator, blackberry-eclipse-plugin

在黑莓 jre 5.0 中，如果已连接互联网但无法浏览，则应用程序在使用宁静服务时没有响应。请指导我是否有任何方法可以设置响应超时？

我正在使用此代码来使用服务。

```
static HttpConnection con = null;
static InputStream is = null;
static StringBuffer rawResponse;

public static String Call(String url) throws IOException {
    try {
        url = url + getConnectionString() + ";";
        if (CheckConn()) {
            con = (HttpConnection) Connector.open(url, Connector.READ_WRITE, true);
            is = con.openInputStream();
            byte[] responseData = new byte[10000];
            int length = 0;
            rawResponse = new StringBuffer();
            while (-1 != (length = is.read(responseData))) {
                rawResponse.append(new String(responseData, 0, length));
            }
        } else {
            Status.show("Internet service is not avaiable.");
        }
    } catch (IOException ex) {
        Status.show("Internet is not responding");
    } finally {
        try {
            is.close();
            con.close();
        } catch (Exception e) {
            Status.show(e.getMessage());
        }
    }
    return rawResponse.toString();
}

public static String getConnectionString() {
    String connectionString = "";
    if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {
        connectionString = ";interface=wifi";
    }
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {
        connectionString = ";deviceside=false";
    } 
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {
        String carrierUid = getCarrierBIBSUid();
        if (carrierUid == null) {
            connectionString = ";deviceside=true";
        } else {
            connectionString = ";deviceside=false;connectionUID=" + carrierUid + ";ConnectionType=mds-public";
        }
    } 
    else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) {
        connectionString = ";None";
    }
    return connectionString;
}

public static String getCarrierBIBSUid() {
    net.rim.device.api.servicebook.ServiceRecord[] records = ServiceBook.getSB().getRecords();
    int currentRecord;
    for (currentRecord = 0; currentRecord < records.length; currentRecord++) {
        if (records[currentRecord].getCid().toLowerCase().equals("ippp")) {
            if (records[currentRecord].getName().toLowerCase().indexOf("bibs") >= 0) {
                return records[currentRecord].getUid();
            }
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:32:41.223

用它

```
 url = url + getConnectionString() + ";ConnectionTimeout=25000"; 
```

这里超时以毫秒为单位。一旦发生超时，就可以在 catch 块中处理。

# arrays - 向量化访问非连续内存位置的循环

> ID：11928856
> 
> 赞同：3
> 
> 时间：2012-08-13T05:58:07.897
> 
> 标签：arrays, parallel-processing, vectorization, simd, fortran90

我有这个结构的循环

**参考：[麦克斯韦代码示例](http://sc.tamu.edu/help/power/powerlearn/html/ScalarOptnw/sld018.htm)**

```
do z=1,zend
    do y=1,yend
        do x=1,xend
            k=arr(x,y,z)
            do while(k.ne.0)
                ix=fooX(k)
                iy=fooY(k)
                iz=fooZ(k)
                x1=x(ix  ,iy  ,iz)
                x2=x(ix+1,iy  ,iz)
                x3=x(ix  ,iy+1,iz)
                x4=x(ix+1,iy+1,iz)
                x5=x(ix  ,iy  ,iz+1)
                x6=x(ix+1,iy  ,iz+1)
                x7=x(ix  ,iy+1,iz+1)
                x8=x(ix+1,iy+1,iz+1)

                y1=y(ix  ,iy  ,iz)
                y2=y(ix+1,iy  ,iz)
                y3=y(ix  ,iy+1,iz)
                y4=y(ix+1,iy+1,iz)
                y5=y(ix  ,iy  ,iz+1)
                y6=y(ix+1,iy  ,iz+1)
                y7=y(ix  ,iy+1,iz+1)
                y8=y(ix+1,iy+1,iz+1)

                z1=z(ix  ,iy  ,iz)
                z2=z(ix+1,iy  ,iz)
                z3=z(ix  ,iy+1,iz)
                z4=z(ix+1,iy+1,iz)
                z5=z(ix  ,iy  ,iz+1)
                z6=z(ix+1,iy  ,iz+1)
                z7=z(ix  ,iy+1,iz+1)
                z8=z(ix+1,iy+1,iz+1)
                sumX+=x1+x2+..x8
                sumY+=y1+y2+..y8
                sumZ+=z1+z2+..z8

                k=linkArr(k)
            enddo
        enddo
    enddo
enddo 
```

x1 到 x8 是长方体的 8 个角。将此代码向量化面临三个挑战。一是8个数组元素在内存中不连续。其次是固有的 while 循环结构以及链表访问。第三，从 fooX、fooY、fooZ 返回的 ix、iy、iz 的值不是不连续的。所以循环的每次迭代都有一组完全不同的 ix, iy, iz。因此，即使在迭代中，内存访问也是分散的。我尝试了以下方法： 1\. 将 3 级 DO 循环展开为：

```
do z=1,zend
    do y=1,yend
        do x=1,xend  
           if(arr(x,y,z).NE.0) then
                kArr(indx)=arr(x,y,z)
                DO WHILE (kArr(indx).NE.0)
                  indx = indx + 1
                  kArr(indx)=linkArr(kArr(indx-1))
                ENDDO
            endif
        enddo
    enddo
enddo 
```

有了这个，我摆脱了 while 循环结构，现在我可以在 kArr 上运行一个大循环，其中我将 8 个元素分组（比如我的 VPU 一次可以容纳 8 组数据）。它没有提高性能。如果有人感兴趣，我可以发布这些的详细信息。我需要有关如何优化此代码的建议。我尝试的另一个选择是将 x、y、z 数据组合在一个数组中，这样当我计算 x1 时，y1 和 z1 也将位于相邻的内存位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:14:34.060

那个while循环正在杀死你。在几年前的类似情况下，我在执行以下操作时性能略有提高：

```
! at top of your code, introduce:
integer :: special_index
integer :: ix(1000), iy(1000), iz(1000)  !promoting scalars to arrays.
                                         ! make as big as possibly needed.

! code as usual until you get to your loops, then

! first, make lookup table
special_index=0
do z=1,zend
  do y=1,yend
    do x=1,xend
      k=arr(x,y,z)
      do while(k.ne.0)
        special_index=special_index+1
        ix(special_index)=fooX(k)
        iy(special_index)=fooY(k)
        iz(special_index)=fooZ(k)
        k=linkArr(k)
      enddo
    enddo
  enddo
endoo
! and now we do the calculation, loop over lookup table:
do n=1,special_index
  x1=x(ix(n)  ,iy(n)  ,iz(n))
  x2=x(ix(n)+1,iy(n)  ,iz(n))
  x3=x(ix(n)  ,iy(n)+1,iz(n))
  etc.
enddo 
```

就像我说的，这在几年前帮助了我。你的旅费可能会改变。第一个循环仍然不会矢量化，但第二个循环可能会，它可能会提供更好的性能。

# spring - 服务创建时的 JSF 和 Spring 集成错误

> ID：11928860
> 
> 赞同：1
> 
> 时间：2012-08-13T05:58:55.447
> 
> 标签：spring, jsf, jakarta-ee, spring-mvc, jsf-2

我是 JSF 和 Spring 的新手。我的任务是通过集成 JSF2.0 和 Spring3.0 来构建一个简单的应用程序。所以我创建了这些类
，我创建了 MasterSearch.xhtml，它们只需要输入

```
 <table>   
                    <h:form> 
                        <tr><td>Service Number</td>
                            <td>
                            <h:inputText id="txtMasterServiceNumber" styleClass="text-box" value="#{masterSearch.serviceNumber}" validatorMessage="Invalid input"></td>
                            <f:validateRegex pattern="[A-Za-z0-9]{0,40}"/>
                            </h:inputText>
                            <h:message for="txtMasterServiceNumber" />

                            <h:commandButton id="btnMasterSearch"  type="submit" value="Search" styleClass="submitButton"  action="#{masterSearch.findPerson}"></h:commandButton>

                        </h:form>
                </table> 
```

现在它将提交到 masterSearch.findPerson
这是 masterSearch bean

```
 package com.delta.searchbeans;

import java.util.ArrayList;

import javax.annotation.Resource;

import com.delta.resultbeans.MasterSearchResult;
import com.delta.service.MasterSearchService;

public class MasterSearch {

    @Resource(name="personService")
    private MasterSearchService personService;

    String serviceNumber;
    String rank;
    String fullName;
    String CNICNumber;
    String phoneNumber;
    String emailAddress;
    ArrayList<MasterSearchResult> masterSearchResultList;

    public ArrayList<MasterSearchResult> getMasterSearchResultList() {
        return masterSearchResultList;
    }

    public void setMasterSearchResultList(
            ArrayList<MasterSearchResult> masterSearchResultList) {
        this.masterSearchResultList = masterSearchResultList;
    }

    public MasterSearch() {
        System.out.println("Bean initialized ...");
    }

    public String getServiceNumber() {
        return serviceNumber;
    }
    public void setServiceNumber(String serviceNumber) {
        this.serviceNumber = serviceNumber;
    }
    public String getRank() {
        return rank;
    }
    public void setRank(String rank) {
        this.rank = rank;
    }
    public String getFullName() {
        return fullName;
    }
    public void setFullName(String fullName) {
        this.fullName = fullName;
    }
    public String getCNICNumber() {
        return CNICNumber;
    }
    public void setCNICNumber(String cNICNumber) {
        CNICNumber = cNICNumber;
    }
    public String getPhoneNumber() {
        return phoneNumber;
    }
    public void setPhoneNumber(String phoneNumber) {
        this.phoneNumber = phoneNumber;
    }
    public String getEmailAddress() {
        return emailAddress;
    }
    public void setEmailAddress(String emailAddress) {
        this.emailAddress = emailAddress;
    }

    public String findPerson(){

        System.out.println("In person findperson");
        masterSearchResultList = (ArrayList<MasterSearchResult>) personService.getAll();
        System.out.println("Printed By controller: "+masterSearchResultList.get(0).getServiceNumber());
        System.out.println("Printed By controller: "+masterSearchResultList.get(1).getServiceNumber());
        return "personfound";

    }

} 
```

然后 findPerson 将把它传递给基本上是一个 DAO 类并包含 Datasource 等的`springService`方法 `masterSearchResultList = (ArrayList<MasterSearchResult>) personService.getAll();` ，该方法返回包含从 DB 中选取的值的列表......
我在我的 MasterSearch.java 类中获取值，在代码中你可以看到我我正在打印它们，它们打印得很好。所以我将该列表分配给我的 MasterSearch 属性 `MasterSearchResultList`，但是当我在下一个页面上得到这个列表时`(found.jsp)`，如下所示

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<f:view>

<h1>
  <c:forEach var="person" items="${masterSearch.masterSearchResultList}">
<tr>
<td><h:outputText value="#{person.serviceNumber}"></h:outputText>
</td>
</tr>
</c:forEach>
</h1>
</f:view>
</body>
</html> 
```

## 然后:(我得到这个错误页面

```
type Exception report

message

descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception 
org.apache.jasper.JasperException: com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean masterSearch

root cause 
com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean masterSearch

root cause 
com.sun.faces.spi.InjectionProviderException: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Env-Prop: personService@Field-Injectable Resource. Class name = com.delta.searchbeans.MasterSearch Field name=personService@java.lang.String@personService@@ into class com.delta.searchbeans.MasterSearch: Lookup failed for 'java:comp/env/personService' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}

root cause 
com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Env-Prop: personService@Field-Injectable Resource. Class name = com.delta.searchbeans.MasterSearch Field name=personService@java.lang.String@personService@@ into class com.delta.searchbeans.MasterSearch: Lookup failed for 'java:comp/env/personService' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}

root cause 
javax.naming.NamingException: Lookup failed for 'java:comp/env/personService' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NamingException: Lookup failed for 'personService' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming, com.sun.enterprise.naming.logicalName=java:comp/env/personService} [Root exception is javax.naming.NameNotFoundException: personService not found]]

root cause 
javax.naming.NamingException: Lookup failed for 'personService' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming, com.sun.enterprise.naming.logicalName=java:comp/env/personService} [Root exception is javax.naming.NameNotFoundException: personService not found]

root cause 
javax.naming.NameNotFoundException: personService not found 
```

## 和控制台中的这个错误

```
WARNING: ApplicationDispatcher[/DSVAR] PWC1231: Servlet.service() for servlet jsp threw exception
javax.naming.NameNotFoundException: personService not found
    at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:248)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:215)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
    at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:119)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:505)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at com.sun.enterprise.naming.util.JndiNamingObjectFactory.create(JndiNamingObjectFactory.java:90)
    at com.sun.enterprise.container.common.impl.ComponentEnvManagerImpl$1.create(ComponentEnvManagerImpl.java:653)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:776)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:744)
    at com.sun.enterprise.naming.impl.JavaURLContext.lookup(JavaURLContext.java:169)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:498)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:599)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.inject(InjectionManagerImpl.java:470)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.injectInstance(InjectionManagerImpl.java:171)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.inject(GlassFishInjectionProvider.java:184)
    at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:205)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:103)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.faces.el.ChainTypeCompositeELResolver.getValue(ChainTypeCompositeELResolver.java:94)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:188)
    at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:179)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at org.apache.jasper.runtime.PageContextImpl.evaluateExpression(PageContextImpl.java:1009)
    at org.apache.jsp.WebPages.SearchPages.found_jsp._jspx_meth_c_forEach_0(found_jsp.java:154)
    at org.apache.jsp.WebPages.SearchPages.found_jsp._jspx_meth_f_view_0(found_jsp.java:118)
    at org.apache.jsp.WebPages.SearchPages.found_jsp._jspService(found_jsp.java:79)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:809)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:671)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:505)
    at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:476)
    at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:355)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:305)
    at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546)
    at com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:364)
    at com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
javax.naming.NameNotFoundException: personService not found
    at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:248)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:215)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
    at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:119)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:505)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at com.sun.enterprise.naming.util.JndiNamingObjectFactory.create(JndiNamingObjectFactory.java:90)
    at com.sun.enterprise.container.common.impl.ComponentEnvManagerImpl$1.create(ComponentEnvManagerImpl.java:653)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:776)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:744)
    at com.sun.enterprise.naming.impl.JavaURLContext.lookup(JavaURLContext.java:169)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:498)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:599)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.inject(InjectionManagerImpl.java:470)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.injectInstance(InjectionManagerImpl.java:171)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.inject(GlassFishInjectionProvider.java:184)
    at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:205)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:103)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.faces.el.ChainTypeCompositeELResolver.getValue(ChainTypeCompositeELResolver.java:94)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:188)
    at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:179)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at org.apache.jasper.runtime.PageContextImpl.evaluateExpression(PageContextImpl.java:1009)
    at org.apache.jsp.WebPages.SearchPages.found_jsp._jspx_meth_c_forEach_0(found_jsp.java:154)
    at org.apache.jsp.WebPages.SearchPages.found_jsp._jspx_meth_f_view_0(found_jsp.java:118)
    at org.apache.jsp.WebPages.SearchPages.found_jsp._jspService(found_jsp.java:79)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:809)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:671)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:505)
    at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:476)
    at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:355)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:305)
    at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546)
    at com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:364)
    at com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

我真的被卡住了，无法理解这个错误。另外，如果有人知道任何其他好的集成方式，请告诉我。我在这里跳过打印我的项目的 applictionContext.xml 和 faces-config.xml，因为我不这么认为这些文件会有问题。

# 编辑以包含 conf 文件

面孔-config.xml

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"

    version="2.0">

    <application>
        <el-resolver>
            org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
    </application>

<managed-bean>
    <managed-bean-name>masterSearch</managed-bean-name>
        <managed-bean-class>
            com.delta.searchbeans.MasterSearch
        </managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
</managed-bean>

<managed-bean>
    <managed-bean-name>masterSearchResult</managed-bean-name>
        <managed-bean-class>
            com.delta.resultbeans.MasterSearchResult
        </managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
</managed-bean>

<navigation-rule>
    <description>Navigation from the MasterSearch</description>
    <from-view-id>/WebPages/MasterPage/master.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>personfound</from-outcome>
        <to-view-id>/WebPages/SearchPages/found.jsp</to-view-id>
    </navigation-case>
    <navigation-case>
        <from-outcome>personnotfound</from-outcome>
        <to-view-id>/notfound.jsp</to-view-id>
    </navigation-case>
</navigation-rule>
</faces-config> 
```

应用程序上下文.xml

```
<bean id="masterSearch"
class="com.delta.searchbeans.MasterSearch">
</bean>

<context:component-scan base-package="com.delta" />
<tx:annotation-driven transaction-manager="transactionManager"/>
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
destroy-method="close"
p:driverClass="com.mysql.jdbc.Driver"
p:jdbcUrl="jdbc:mysql://localhost/mydb"
p:user="root"
p:password=""
p:acquireIncrement="5"
p:idleConnectionTestPeriod="60"
p:maxPoolSize="100"
p:maxStatements="50"
p:minPoolSize="10" />
 <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
          p:dataSource-ref="dataSource" />
</beans> 
```

# 编辑#2

```
package com.delta.service;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import javax.annotation.Resource;
import javax.sql.DataSource;
import org.springframework.stereotype.Service;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.jdbc.core.simple.SimpleJdbcTemplate;
import org.springframework.transaction.annotation.Transactional;

import com.delta.resultbeans.MasterSearchResult;

@SuppressWarnings("deprecation")
@Service("personService")
@Transactional
public class MasterSearchService {

    private SimpleJdbcTemplate jdbcTemplate;

    @Resource(name="dataSource")
     public void setDataSource(DataSource dataSource) {
         this.jdbcTemplate = new SimpleJdbcTemplate(dataSource);
     }

    public ArrayList<MasterSearchResult> getAll() {

         System.out.println("retrieving all persons ....");

          // Prepare our SQL statement
          String sql = "select id, serialnum from person";
          System.out.println("retrieving all persons ....");  
          // Maps a SQL result to a Java object
          RowMapper<MasterSearchResult> mapper = new RowMapper<MasterSearchResult>() {
                 public MasterSearchResult mapRow(ResultSet rs, int rowNum) throws SQLException {
                     System.out.println("retrieving all persons ....");
                     MasterSearchResult person = new MasterSearchResult();
                     person.setServiceNumber(rs.getString(1));
                     System.out.println("Printed by searchservice: "+rs.getString(1));
                     return person;
                 }
             };

          // Retrieve all
          return (ArrayList<MasterSearchResult>) jdbcTemplate.query(sql, mapper);
         }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:44:10.520

您同时声明`MasterSearch`为 JSF bean (in `faces-context.xml`) 和 Spring bean (in `applicationContext.xml`)。您只需要其中一个声明，因此您应该删除另一个。

*   如果要声明`MasterSearch`为 JSF bean，则应使用`@ManagedProperty("#{personService}")`而不是`@Resource(name="personService")`声明对 Spring bean 的依赖。与 Spring 不同，`@Resource`在 JSF 中使用 JNDI 来解决依赖关系。

*   如果你想声明`MasterSearch`为一个 Spring bean`@Resource`是可以的，但是你需要`scope = "request"`使它成为请求范围的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T08:38:58.013

由于我看不到您的 web.xml 和 MasterSearchService 的代码（您最好将其发布），我猜可能有两个原因：

(1) 您是否在**web.xml**中添加了 contextConfigLocation 上下文参数？

例子：

```
 <context-param>
  <param-name>contextConfigLocation</param-name>
   <param-value>WEB-INF/applicationContext.xml</param-value>
 </context-param> 
```

(2) 你有注释你的 MasterSearchService 类吗？

```
@Service("masterSearchService")
public class MasterSearchService {
 ....
} 
```

# python - Mayavi/mlab：用每个三角形的颜色数据绘制三角形，而不是每个顶点

> ID：11928866
> 
> 赞同：3
> 
> 时间：2012-08-13T05:59:36.557
> 
> 标签：python, mayavi

如果有人使用该功能

```
triangular_mesh 
```

可以传递一组三角形，以索引列表、顶点位置和一组数据的形式给出，以将颜色分配给顶点。然后通过顶点颜色之间的插值对三角形进行着色。

如何在没有任何插值的情况下按三角形分配颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:29:08.763

这也在 scipy 邮件列表中被问到。

您不能使用 triangular_mesh 来实现，但如果您使用三角形网格作为源来制作通用曲面，则可以。

```
s = mlab.pipeline.triangular_mesh_source(x,y,z,triangles)
s.data.cell_data.scalars = .... # Your data here.
surf = mlab.pipeline.surface(s)
surf.contours.filled_contours = True 
```

[http://mail.scipy.org/pipermail/numpy-discussion/2010-September/053040.html](http://mail.scipy.org/pipermail/numpy-discussion/2010-September/053040.html)

# iphone - 使用 SIP 的第三方 MMS 堆栈

> ID：11928867
> 
> 赞同：1
> 
> 时间：2012-08-13T05:59:39.757
> 
> 标签：iphone, ios, sip, mms, pjsip

是否有任何第三方堆栈可用于使用 SIP 的 MMS。或者是否有任何支持 MMS 的 SIP 堆栈。

我们必须在 iPhone 的 VOIP 客户端中集成 MMS 功能。看来我们必须使用一些第三方 MMS 堆栈来执行此操作。所以我正在搜索任何第三方彩信堆栈。

如果术语不正确，请原谅我。

谢谢

# c - 从传递的参数中检索值

> ID：11928870
> 
> 赞同：0
> 
> 时间：2012-08-13T06:00:03.483
> 
> 标签：c, arguments, return

一定有什么我误解了，为什么这不返回10？

```
int main() {

    float i = 0;
    func(i);
    printf("%f", i);

    return 0;
}

void func(float i) {

    int j;
    for (j = 0; j < 5; j++) {

         i += 2;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:04:36.180

原始类型（如浮点数）是“按值传递”，func() 实际上是在修改 i 的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:13:20.590

它是按值传递的。无论您在函数中所做的任何更改都是对传递值的副本而不是实际值进行的。要使其修改原始变量的值，您应该使用指向它的指针，并将该指针的值传递给您的`func`.

使您的功能如下所示：

```
void func(float *i) {
    int j;
    for (j = 0; j < 5; j++) {

         *i += 2;
    }
} 
```

并将此函数称为：

```
func(&i); 
```

# scala - clojure 和 scala 互操作

> ID：11928872
> 
> 赞同：16
> 
> 时间：2012-08-13T06:00:11.163
> 
> 标签：scala, clojure

我熟悉可以从 clojure 调用 scala 类/对象，因为 scala 编译为字节码，并且 clojure 对此很满意。

但是，它是否可以轻松调用 clojure 函数并从 scala 导入命名空间？

我想把优秀的lift框架和clojure混合起来，基本上是从lift中调用clojure代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T06:19:01.250

Scala 中的导入语义与 Java 基本相同。您应该能够通过阅读如何从 Java 调用 Clojure 代码来获得所需的信息，然后在 Scala 中应用相同的原则。

如果你想编译你的 Clojure 代码并将其作为 JAR 包含在你的类路径中，那么这篇文章应该是相关的：

[从 Java 调用 Clojure](https://stackoverflow.com/questions/2181774/calling-clojure-from-java)

如果您希望动态编译/解释 .clj 文件，那么您应该阅读以下内容：

[Clojure 编程：从 Java 调用 Clojure](http://en.wikibooks.org/wiki/Clojure_Programming/Tutorials_and_Tips#Invoking_Clojure_from_Java)

第一个选项对我来说似乎好多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-14T20:48:27.727

FWIW，我最近也有类似的经历。在 clojure 代码库中使用 scala 库并不总是那么简单。如果库作者在设计 api 时考虑到了非 scala 消费者，那么集成可能是微不足道的。如果不是，您可能需要了解您尝试使用的 scala 库生成的 java 接口的详细信息。

我最近写了一篇关于这个确切主题的文档（[https://github.com/grandbora/clojure-scala-cantrips#clojure-scala-cantrips](https://github.com/grandbora/clojure-scala-cantrips#clojure-scala-cantrips)）并且有一些 clojure 库提供了使用 scala 库的糖语法。

# php - 从 html 页面在数据库中插入统计信息

> ID：11928874
> 
> 赞同：-1
> 
> 时间：2012-08-13T06:00:28.460
> 
> 标签：php, mysql, html

我做了一些统计数据，我想将它们插入数据库以查看流量​​统计数据。我主要有 HTML 页面，所以我使用 POST 方法来获取由 PHP 文件发布的统计信息，但它不起作用，没有将统计信息插入到数据库表中。

HTML 代码

```
 <form action="_global/stats/stats.php" method="post">
    <input type="hidden" name="stats" value="true" />
    </form> 
```

PHP 代码

```
 if (isset($_POST['stats']))
    {
    $stats = $_POST['stats'];
    }
    else
    {$stats="false";}

    if ($stats == "true"){ 

        if(!empty($_SERVER['REQUEST_URI'])){
        $url = $_SERVER['REQUEST_URI'];
        }else{$url = "";}

        if(!empty($_SERVER['REMOTE_ADDR'])){
        $user_ip = $_SERVER['REMOTE_ADDR'];
        }else{$user_ip = "";}

        if(!empty($_SERVER['REMOTE_PORT'])){
        $user_port = $_SERVER['REMOTE_PORT'];
        }else{$user_port = "";}

        if(!empty($_SERVER['SERVER_ADDR'])){
        $server_ip = $_SERVER['SERVER_ADDR'];
        }else{$server_ip = "";}

        if(!empty($_SERVER['SERVER_PORT'])){
        $server_port = $_SERVER['SERVER_PORT'];
        }else{$server_port = "";}

        if(!empty($_SERVER['REQUEST_METHOD'])){
        $request_type = mysql_real_escape_string ($_SERVER['REQUEST_METHOD']);
        }else{$request_type = "";}

        if(!empty($_SERVER['HTTP_USER_AGENT'])){
        $browser_type =  mysql_real_escape_string ($_SERVER['HTTP_USER_AGENT']);
        }else{$browser_type = "";} 

    mysql_query("INSERT INTO jinendra_statistics.statistics SET url='$url', user_ip='$user_ip', user_port='$user_port', server_ip='$server_ip', server_port='$server_port', request_type='$request_type', browser_type='$browser_type' ");

    } 
```

请看看这里出了什么问题，并提出任何可能的方法来做到这一点。

**更新**

带有这些代码的 PHP 文件正在工作，我在数据库中获取值。但是将它与 HTML 一起使用不会在数据库中插入值。

```
 if(!empty($_SERVER['REQUEST_URI'])){
    $url = $_SERVER['REQUEST_URI'];
    }else{$url = "";}

    if(!empty($_SERVER['REMOTE_ADDR'])){
    $user_ip = $_SERVER['REMOTE_ADDR'];
    }else{$user_ip = "";}

    if(!empty($_SERVER['REMOTE_PORT'])){
    $user_port = $_SERVER['REMOTE_PORT'];
    }else{$user_port = "";}

    if(!empty($_SERVER['SERVER_ADDR'])){
    $server_ip = $_SERVER['SERVER_ADDR'];
    }else{$server_ip = "";}

    if(!empty($_SERVER['SERVER_PORT'])){
    $server_port = $_SERVER['SERVER_PORT'];
    }else{$server_port = "";}

    if(!empty($_SERVER['REQUEST_METHOD'])){
    $request_type = mysql_real_escape_string ($_SERVER['REQUEST_METHOD']);
    }else{$request_type = "";}

    if(!empty($_SERVER['HTTP_USER_AGENT'])){
    $browser_type =  mysql_real_escape_string ($_SERVER['HTTP_USER_AGENT']);
    }else{$browser_type = "";} 

    mysql_query("INSERT INTO jinendra_statistics.statistics SET url='$url', user_ip='$user_ip', user_port='$user_port', server_ip='$server_ip', server_port='$server_port', request_type='$request_type', browser_type='$browser_type' "); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:04:35.237

您正在使用半`INSERT`半`UPDATE`查询。您的查询应该是

```
mysql_query("INSERT INTO jinendra_statistics.statistics (url, user_ip, user_port, server_ip, server_port, request_type, browser_type) VALUES ('$url', '$user_ip', '$user_port', '$server_ip', '$server_port', '$request_type', '$browser_type')"; 
```

检查语法

*   [MYSQL 插入语法](http://dev.mysql.com/doc/refman/5.0/en/insert.html)
*   [MYSQL 更新语法](http://dev.mysql.com/doc/refman/5.0/en/update.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:03:51.437

对于阅读本文的任何人：有两个问题已修复。

1) 查询的语法不正确，并且

2) 提交表单的过程也不正确。

* * *

```
mysql_query("INSERT INTO jinendra_statistics.statistics (url, user_ip, user_port, server_ip, server_port, request_type, browser_type) VALUES ('$url', '$user_ip', '$user_port', '$server_ip', '$server_port', '$request_type', '$browser_type')"; 
```

你想使用`SET`for`UPDATE`和我为`INSERT`.

* * *

**这个/page.php**

```
<?php

if(isset($_POST['stats'])){

 if(!empty($_SERVER['REQUEST_URI'])){
$url = $_SERVER['REQUEST_URI'];
}else{$url = "";}

if(!empty($_SERVER['REMOTE_ADDR'])){
$user_ip = $_SERVER['REMOTE_ADDR'];
}else{$user_ip = "";}

if(!empty($_SERVER['REMOTE_PORT'])){
$user_port = $_SERVER['REMOTE_PORT'];
}else{$user_port = "";}

if(!empty($_SERVER['SERVER_ADDR'])){
$server_ip = $_SERVER['SERVER_ADDR'];
}else{$server_ip = "";}

if(!empty($_SERVER['SERVER_PORT'])){
$server_port = $_SERVER['SERVER_PORT'];
}else{$server_port = "";}

if(!empty($_SERVER['REQUEST_METHOD'])){
$request_type = mysql_real_escape_string ($_SERVER['REQUEST_METHOD']);
}else{$request_type = "";}

if(!empty($_SERVER['HTTP_USER_AGENT'])){
$browser_type =  mysql_real_escape_string ($_SERVER['HTTP_USER_AGENT']);
}else{$browser_type = "";} 

mysql_query("INSERT INTO jinendra_statistics.statistics SET url='$url', user_ip='$user_ip', user_port='$user_port', server_ip='$server_ip', server_port='$server_port', request_type='$request_type', browser_type='$browser_type' ");

if(mysql_affected_rows()){
    // it worked, redirect, confirm, etc
}
else{
    // it failed
}

}

?>

<form action="this/page.php" method="post">
<input type="hidden" name="stats" value="true" />
<input type="submit" value="Submit Stats" />
</form> 
```

试试这个。输入您在操作中保存的文件的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:12:15.003

您的查询容易发生[SQL 注入](http://bobby-tables.com/)。您可以尝试改用**[PHP PDO](http://php.net/manual/en/book.pdo.php)**吗？

```
<?php
$stmt = $dbh->prepare("INSERT INTO jinendra_statistics.statistics (url, user_ip, 
                                   user_port, server_ip, server_port, 
                                   request_type, browser_type) 
                       VALUES (?,?,?,?,?,?,?)");

$stmt->bindParam(1, $url);
$stmt->bindParam(2, $user_ip);
$stmt->bindParam(3, $user_port);
$stmt->bindParam(4, $server_ip);
$stmt->bindParam(5, $server_port);
$stmt->bindParam(6, $request_type);
$stmt->bindParam(7, $browser_type);

$stmt->execute();

?> 
```

# macos - mac 的远程桌面连接 - 没有“选项”来选择屏幕大小

> ID：11928875
> 
> 赞同：3
> 
> 时间：2012-08-13T06:01:00.540
> 
> 标签：macos, remote-desktop

我有一台MAC机器，操作系统是10.7.4，27寸显示器，我安装了一个名为“Mac远程桌面连接”的软件（从微软网站下载）2.1版本。

当我运行该工具时，只有一个文本框供我输入计算机，然后单击“连接”。没有“选项”按钮或“选项卡”可供我选择屏幕尺寸。而且我在后面的步骤中也找不到任何“选项”，以至于我远程连接win7系统的窗口很小。即使我尝试单击“+”按钮以最大化窗口，如果失败并且没有任何反应。

任何意见？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-06T14:52:25.673

转至 RDC 菜单中的首选项或在 RDC 会话处于活动状态时按 +。然后转到显示选项卡并更改远程桌面大小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T06:41:45.587

Microsoft 的 Mac 远程桌面连接没有很多视图选项。连接到远程计算机后，您可以使用远程桌面连接视图菜单中的项目来更改窗口大小。您的选择是：

*   **命令 1**：适合窗口
*   **命令 2**：全屏

您可能希望使用 Command-2 让远程桌面占据整个屏幕，从而使其尽可能大。在非全屏模式下，您还应该能够拖动远程桌面窗口的边缘以使其变大。

# php - 我如何使用 symfony 记录器将数据写入数据库

> ID：11928877
> 
> 赞同：1
> 
> 时间：2012-08-13T06:01:06.760
> 
> 标签：php, symfony, doctrine-orm

我有单独的数据库 mysql 表，其中包含以下字段

`Message ---type ------date`

我想在数据库中记录所有消息，例如错误，信息，警告，以便我可以查看该站点的过去历史记录以及出现问题时。我可以看到发生了什么事

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T06:35:17.647

您需要编写自定义独白处理程序。有关详细信息，请查看那些链接[学说独白处理程序问题和](https://github.com/Seldaek/monolog/issues/55)[扩展独白](https://github.com/Seldaek/monolog/blob/master/doc/04-extending.md)的官方文档

# javascript - 在 Firefox 中检测“图像损坏或截断”

> ID：11928878
> 
> 赞同：15
> 
> 时间：2012-08-13T06:01:20.800
> 
> 标签：javascript, firefox, canvas, local-storage, picturefill

（先发制人：如果您想将此标记为重复，请注意其他问题似乎在问“我为什么会收到此错误？”我知道为什么会收到此错误；我想知道我是如何可以检测到我的 JavaScript 代码中的错误。它只出现在 Firebug 控制台中，当然，在加载图像时对用户来说是显而易见的。）

我正在为响应式图像使用[图片填充。](https://github.com/scottjehl/picturefill)我有一个为图像上的加载事件触发的回调。因此，每当有人调整浏览器窗口的大小以便通过图片填充加载不同的图像时，回调就会运行。

在回调内部，我通过画布将图像数据转换为 dataURL，这样我就可以将图像数据缓存在 localStorage 中，即使用户离线也可以使用它。

**注意关于“离线”的部分。这就是为什么我不能依赖浏览器缓存。**而且 HTML5 离线应用程序缓存不能满足我的需求，因为图像是响应式的。（有关响应式图像与 HTML 离线应用程序缓存不兼容的解释，请参阅[“应用程序缓存是一个混蛋”](http://www.alistapart.com/articles/application-cache-is-a-douchebag/)。）

在 Mac 上的 Firefox 14.0.1 上，如果我将浏览器的大小调整为非常大的大小，然后在大图像有机会完全加载之前再次将其调整回较小的大小，则会触发加载图像。它最终在 Firebug 控制台中报告“图像损坏或截断”，但不会引发异常或触发错误事件。没有迹象表明代码中有任何问题。就在 Firebug 控制台中。同时，它将截断的图像存储在 localStorage 中。

**如何在 JavaScript 中可靠有效地检测到此问题，以便不缓存该图像？**

以下是我如何遍历图片填充 div 以查找图片填充已插入的 img 标签：

```
 var errorLogger = function () {
        window.console.log('Error loading image.');
        this.removeEventListener('load', cacheImage, false);
    };

    for( var i = 0, il = ps.length; i < il; i++ ){
        if( ps[ i ].getAttribute( "data-picture" ) !== null ){

            image = ps[ i ].getElementsByTagName( "img" )[0];
            if (image) {
                if ((imageSrc = image.getAttribute("src")) !== null) {
                    if (imageSrc.substr(0,5) !== "data:") {
                        image.addEventListener("load", cacheImage, false);
                        image.addEventListener('error', errorLogger, false);
                    }
                }
            }
        }
    } 
```

这是`cacheImage()`回调的样子：

```
var cacheImage = function () {
    var canvas,
        ctx,
        imageSrc;

    imageSrc = this.getAttribute("src");

    if ((pf_index.hasOwnProperty('pf_s_' + imageSrc)) ||
        (imageSrc.substr(0,5) === "data:") ||
        (imageSrc === null) || (imageSrc.length === 0)) {
            return;
    }

    canvas = w.document.createElement("canvas");
    canvas.width = this.width;
    canvas.height = this.height;

    ctx = canvas.getContext("2d");
    ctx.drawImage(this, 0, 0);
    try {
        dataUri = canvas.toDataURL();
    } catch (e) {
        // TODO: Improve error handling here. For now, if canvas.toDataURL()
        //   throws an exception, don't cache the image and move on.
        return;
    }

    // Do not cache if the resulting cache item will take more than 128Kb.
    if (dataUri.length > 131072) {
        return;
    }

    pf_index["pf_s_"+imageSrc] = 1;

    try {
        localStorage.setItem("pf_s_"+imageSrc, dataUri);
        localStorage.setItem("pf_index", JSON.stringify(pf_index));
    } catch (e) {
        // Caching failed. Remove item from index object so next cached item
        //   doesn't wrongly indicate this item was successfully cached.
        delete pf_index["pf_s_"+imageSrc];
    }
}; 
```

最后，这是我在 Firebug 中看到的全文，更改了 URL 以保护有罪者：

> 图片损坏或截断：[http ://www.example.com/pf/external/imgs/extralarge.png](http://www.example.com/pf/external/imgs/extralarge.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T09:29:31.290

似乎在更改标签的`src`属性时`img`，Firefox 会触发一个`load`事件。这与 HTML5 规范相反，该规范规定，[如果](http://www.w3.org/TR/html5/the-img-element.html#update-the-image-data)src 属性发生更改，则应该结束任何其他正在进行的获取（Firefox 会这样做），并且不应发送任何事件。仅当`load`获取成功完成时才应发送事件。所以我会说你得到一个`load`事件的事实是一个 Firefox 错误。

但是，图像*应该*知道它是否完全可用，您可以尝试使用该`complete`属性：

```
if (this.complete === false) {
  return;
} 
```

不幸的是，Firefox 已改为`this.complete`设置`true`，因此这也不是一个选项。

最好的选择可能是`<img>`每次您希望更改`src`属性时创建一个新元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-25T00:18:15.410

我自己今天被这个问题弄傻了。一切正常（图像按预期加载视觉），除了错误一直显示在 Firefox 错误控制台中 - 但在 IE 或 Chrome 中没有此类错误。

在我的情况下，我在完整的 jquery 处理程序中将图像插入到带有 innerHtml 的 div 中。当我使用以下命令抢占 jquery 调用时，错误停止了：

```
var image_holder = new Image();
image_holder.src = img_path;//path of image that's going to be plugged in 
```

它对我有用，但仍然没有任何意义。我认为这与时间有关，因为此代码会在图像到达实际将其插入页面的代码之前启动图像加载。

# python - 如何在 Python 的线程中停止 for 循环？

> ID：11928882
> 
> 赞同：2
> 
> 时间：2012-08-13T06:01:49.613
> 
> 标签：python, multithreading, loops, for-loop, break

我正在尝试在 Python 中创建一个脚本来学习线程，但我似乎无法停止线程中的 for 循环。目前，我正在使用 pyInstaller 编译脚本并结束线程进程，我知道这不是最好的方法，有人可以向我解释如何在命令中结束线程吗？我已经阅读了许多其他问题，但我似乎无法理解如何以“正确”的方式停止线程。这是我现在用来测试它的代码：

```
class Thread(Thread):
        def __init__(self, command, call_back):
        self._command = command
        self._call_back = call_back
        super(Thread, self).__init__()

    def run(self):
        self._command()
        self._call_back()
def test():
    i = 20
    for n in range(0,i):
        #This is to keep the output at a constant speed
        sleep(.5)
        print n
def thread_stop():
    procs = str(os.getpid())
    PROCNAME = 'spam.exe'
    for proc in psutil.process_iter():
        if proc.name == PROCNAME:
            text = str(proc)[19:]
            head, sep, tail = text.partition(',')
            if str(head) != procs:
                subprocess.call(['taskkill', '/PID', str(head), '/F']) 
```

这些函数由 Tkinter 制作的 GUI 调用，目前还可以。

如果您不想阅读所有内容，请直言：当 Python 中的线程中有 for 循环时，如何以“正确的方式”停止线程？谢谢！

编辑：对不起，我提取了我认为最重要的代码。相反，这是整个代码（它是我用来学习 Python 的文本消息器，但上面是我在开始理解它之前第一次尝试线程）。[http://pastebin.com/qaPux1yR](http://pastebin.com/qaPux1yR)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T06:30:33.880

你永远不应该强行杀死一个线程。取而代之的是使用线程定期检查的某种“信号”，如果设置了，那么线程就会很好地完成。

最简单的“信号”是一个简单的布尔变量，可以这样使用：

```
class MyThread(Thread):
    def __init__(self):
        self.continue = True

    def run(self):
        while (self.continue):
            # Do usefull stuff here
            pass

    def stop(self):
        self.continue = False 
```

# css - 创建动态少混合设置属性名称

> ID：11928883
> 
> 赞同：3
> 
> 时间：2012-08-13T06:01:53.063
> 
> 标签：css, less

我想创建一个较少的混合来建立一些边距/填充规则。我已经能够为高度、宽度、高度百分比和宽度百分比创建正确的 mixin。例如，

```
.widthX (@px) when (@px > 0) and (@px =< 30) {
    .width(@px);
    .widthX(@px - 1);
}

.widthX (@px) when (@px >= (30 + 5)) {
    .width(@px);
    .widthX(@px - 5);
}

.width (@px) { (~".w@{px}") { width: ~"@{px}px"; } } 
```

这允许我创建显式宽度或一系列宽度类。下面将为宽度 1-30 以 1 为增量创建 CSS 类，然后从 30-1215 以 5 为增量创建 CSS 类。

```
.widthX (1215); 
```

在它正确创建的 CSS 中：

```
.w1 { width: 1px; }
.w2 { width: 2px; }
// 3-29 ommitted
.w30 { width: 30px; }
.w35 { width: 35px; }
.w40 { width: 40px; }
.w45 { width: 45px; }
// etc 
```

我希望能够为边距和填充创建一个类似的mixin，并允许我将每一边添加为参数，

```
.marginX (@px,@side,@abbr) when (@px > 0) {
    .margin(@px,@side,@abbr);
    .marginX(@px - 1,@side,@abbr);
}

.margin (@px,@side,@abbr) { (~".w@{abbr}@{px}") { ~"width-${side}": ~"@{px}px"; } } 
```

并将其称为：

```
.marginX(100,"top","t"); 
```

为 1-100px 创建 margin-top 类。但是，我不断收到语法错误

```
{ ~"width-${side}": ~"@{px}px"; } } 
```

我尝试了许多变化，但它们都失败了。我可以，但真的不想，为每个方向创建多个 mixin。我希望有人能够提供一些可以解决我的问题的建议。

我发现了这个类似的帖子：[动态 CSS 属性 in less](https://stackoverflow.com/questions/9131175/dynamic-css-properties-in-less)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:53:55.880

LESS 当前不支持动态 CSS 属性。缺乏对动态属性的支持是一个批评点，[有人认为这是 SASS 优于 LESS 的一个优势](http://metaskills.net/2012/02/27/too-less-should-you-be-using-sass/)。[某些库（例如， less.js](https://github.com/cloudhead/less.js/pull/698) ）上确实存在拉取请求，它们添加了此功能。

否则，你几乎被困在做你不想做的事情，即：

```
.margin (@px,@side,@abbr) when (@side = left) {
  (~".m@{abbr}@{px}") { margin-left: ~"@{px}px"; }
}
.margin (@px,@side,@abbr) when (@side = right) { 
  (~".m@{abbr}@{px}") { margin-right: ~"@{px}px"; }
} 
```

# wpf - 将二维颜色数组写入 WPF 图像

> ID：11928884
> 
> 赞同：1
> 
> 时间：2012-08-13T06:01:52.857
> 
> 标签：wpf, image, colors, bitmap

我有本质上是一个二维颜色数组，每个索引代表像素，值是该像素的颜色。为简单起见，让我们想象一个 3x3 像素阵列，它基本上具有 1 像素行红色、1 像素行绿色和 1 像素行蓝色：

```
Color[,] colorArray = new Color[3,3];

for (int i = 0; i < 3; ++i) 
{
    colorArray[0,i] = Colors.Red;
    colorArray[1,i] = Colors.Green;
    colorArray[2,i] = Colors.Blue;
} 
```

我有一个带有图像的 XAML 文件（同样，为简单起见，我们假设图像也是 3x3 像素）。如何将上述像素数据写入可以在该图像文件中显示的内容？

**编辑：** 我已经尝试使用两者`WriteableBitmaps`，`BitmapSources`但似乎无法让它们工作。例如，下面的代码（我只是想把整个屏幕涂成黄色）会产生一个白色的图像（从[这里](http://www.nerdparadise.com/tech/csharp/wpfimageediting/)借来的）。

*位图源示例*

```
uint[] pixelData = new uint[width * height];
for (int y = 0; y < height; ++y)
{
    int yIndex = y * width;
    for (int x = 0; x < width; ++x)
    {
        pixelData[x + yIndex] = (0 << 24) + (255 << 16) + (255 << 8) + 255;
    }
}

var bmp = BitmapSource.Create(width, height, dpi, dpi, PixelFormats.Bgra32, null, pixelData, width * 4);
TestImage.Source = bmp; 
```

*可写位图示例*

```
WriteableBitmap wb = new WriteableBitmap(width, height, dpi, dpi, pf, null);
byte[] pixelData = new byte[height * width * 4];

for (int i = 0; i < (int)wb.Height; i++)
{
    for (int j = 0; j < (int)wb.Width; j++)
    {
        var color = colors[i, j];
        var idx = j * 4 + i * width * 4;

        byte blue = color.B;
        byte green = color.G;
        byte red = color.R;

        pixelData[idx] = blue;
        pixelData[idx + 1] = green;
        pixelData[idx + 2] = red;
        pixelData[idx + 3] = 255;

        //byte[] colorData = { blue, green, red, 255 };
        //Int32Rect rect = new Int32Rect(j, i, 1, 1);
        //wb.WritePixels(rect, colorData, 4, 0);
    }
}

Int32Rect rect = new Int32Rect(0, 0, width, height);
wb.WritePixels(rect, pixelData, 4, 0);
TestImage.Source = wb; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T04:52:52.507

以下代码适用于位图源和 32 位颜色：

```
var height = colorArray.GetUpperBound(0) + 1;
var width = colorArray.GetUpperBound(1) + 1;
var pixelFormat = PixelFormats.Bgra32;
var stride = width * 4; // bytes per row

byte[] pixelData = new byte[height * stride];

for (int y = 0; y < height; ++y)
{
    for (int x = 0; x < width; ++x)
    {
        var color = colorArray[y, x];
        var index = (y * stride) + (x * 4);

        pixelData[index] = color.B;
        pixelData[index + 1] = color.G;
        pixelData[index + 2] = color.R;
        pixelData[index + 3] = color.A; // color.A;
    }
}

var bitmap = BitmapSource.Create(width, height, 96, 96, pixelFormat, null, pixelData, stride);
Image.Source = bitmap; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:00:48.110

使用`WriteableBitmap`类。`WritePixels`方法正是您需要的。( [msdn](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx) )

你的例子：

```
WriteableBitmap wb = new WriteableBitmap(3, 3, 96, 96, PixelFormats.Bgra32, null);

for (int i = 0; i < (int) wb.Height; i++)
{
    byte blue  = (byte) (i == 2 ? 255 : 0),
         green = (byte) (i == 1 ? 255 : 0),
         red   = (byte) (i == 0 ? 255 : 0);

    byte[] colorData = {blue, green, red, 255};

    for (int j = 0; j < (int) wb.Width; j++)
    {
      Int32Rect rect = new Int32Rect(j, i, 1, 1);
      wb.WritePixels(rect, colorData, 4, 0);
    }
 }

 img.Source = wb; 
```

但是如果你想画一张大图，你不应该每次都写一个像素。它可能非常缓慢。相反，您应该填充字节数组并将其复制到您的实例中`WritableBitmap`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T07:56:33.027

[这篇博客](http://www.interact-sw.co.uk/iangblog/2006/03/10/wpfrawpixels)描述了如何使用 BitmapSource 从一个带有像素的字节数组中创建一个图像。

这是从该博客中获取的代码：

```
double dpi = 96;
int width = 128;
int height = 128;
byte[] pixelData = new byte[width*height];

for (int y = 0; y < height; ++y)
{
    int yIndex = y * width;
    for (int x = 0; x < width; ++x)
    {
        pixelData[x + yIndex] = (byte) (x + y);
    }
}

BitmapSource bmpSource = BitmapSource.Create(width, height, dpi, dpi,PixelFormats.Gray8, null, pixelData, width); 
```

# objective-c - iOS 6 中的 UIPopoverController 方向崩溃

> ID：11928885
> 
> 赞同：17
> 
> 时间：2012-08-13T06:02:02.327
> 
> 标签：objective-c, uipopovercontroller, ios6

我目前的程序只支持横向。

在 iOS 6 中，它在`UIPopoverController`.

> 'UIApplicationInvalidInterfaceOrientation'，原因：'支持的方向与应用程序没有共同方向，并且 shouldAutorotate 返回 YES'

我为项目启用了所有方向，它运行良好。但是，我需要对所有视图进行大量更改以仅支持横向。

`UIOrientation`还有其他简单的方法可以解决`UIPopoverController`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:37:52.333

尝试将以下内容添加到您的`UIApplicationDelegate`：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
    return UIInterfaceOrientationMaskAll;
} 
```

您仍然可以在文件中设置支持的界面方向，并在每个视图控制器的方法`Info.plist`中返回一个掩码。`supportedInterfaceOrientations:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:58:28.330

```
Use these delegates for orientation,
- (BOOL)shouldAutorotate
{

return YES;
}

-(NSUInteger)supportedInterfaceOrientations

{
return UIInterfaceOrientationMaskLandscape;

}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return UIInterfaceOrientationLandscapeLeft;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:34:04.910

你这个[链接](https://stackoverflow.com/questions/12600082/set-orientation-to-landscape-mode-in-xcode-4-5-gm-ios-6)。您必须在开始时将您的应用程序设置为支持所有方向。在应用程序委托中进行更改。

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window

{
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        return UIInterfaceOrientationMaskAll;
    else  /* iphone */
        return UIInterfaceOrientationMaskAllButUpsideDown;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T03:49:24.880

新建 UIImagePickerController 的子类并添加以下代码：

```
@property (nonatomic)NSUInteger supportedInterfaceOrientations;

-(NSUInteger)supportedInterfaceOrientations{
    return _supportedInterfaceOrientations;
}
-(BOOL)shouldAutorotate{
    return YES;
} 
```

像这样使用它：

```
 if (imagePickerController==nil) {
        imagePickerController = [[WUIImagePickerController alloc]init];//the subclass
        imagePickerController.delegate = self;
        imagePickerController.supportedInterfaceOrientations = UIInterfaceOrientationMaskLandscapeRight;//any orientation you want to set
        if (popoverController==nil) {
            popoverController = [[UIPopoverController alloc]initWithContentViewController:imagePickerController];
        }
    } 
```

谁知道更好的方法请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T11:22:41.310

```
@interface NonRotatingUIImagePickerController : UIImagePickerController

@end

@implementation NonRotatingUIImagePickerController

- (BOOL)shouldAutorotate
{
    return NO;
}

@end

UIImagePickerController *picker = [[NonRotatingUIImagePickerController alloc] init]; 
```

使用上面的代码，这对我有用。

# svn - 如何在 Fedora 的 svn 存储库中创建文件夹

> ID：11928886
> 
> 赞同：0
> 
> 时间：2012-08-13T06:02:07.210
> 
> 标签：svn, fedora

嗨，我直到现在才使用任何版本控制系统，所以基本上我是使用它的新手。

目前我使用的操作系统是 Fedora 和 svn 用于版本控制，假设我在下面给出了访问文件的链接

```
http://example-theory.com/svn-repos/files/ 
```

当我点击它时，我已经给出了用户名和密码，并且能够访问其中的所有文件。例如格式如下

```
svn-repos - Revision 4: /files

..
Examplefolder_1/
Newfolder_2/ 
```

但是我想创建一个带有名称的单独文件夹，并且`latest_files`需要将一些复制到其中。`pdf files``.py`

如何在 svn 存储库中创建文件夹
如何将 pdf 和其他文件复制到其中。

提前致谢。

**编辑代码：**

1.  安装颠覆
2.  尝试使用此命令`svnadmin create svn` 创建存储库创建了一个文件夹 svn
3.  尝试使用以下命令在`svn`具有名称的文件夹内创建一个目录`folder_example`

    svn mkdir folder_example

我收到以下错误

```
svn mkdir folder_example
svn: '.' is not a working copy 
```

我的意图是创建一个文件夹并从链接中导入所有文件，`http://example-theory.com/svn-repos/files/`然后更新并提交其中的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:33:01.547

你需要一个 Subversion 客户端。见[http://svnbook.red-bean.com](http://svnbook.red-bean.com)

# c# - 刷新 ObservableCollection 当 T 中的属性发生变化时 - WPF MVVM

> ID：11928887
> 
> 赞同：2
> 
> 时间：2012-08-13T06:02:08.273
> 
> 标签：c#, wpf, xaml, mvvm

我有一个`ListBox`绑定到`ObservableCollection<Series>`视图模型中的一个。每次用户单击“删除”按钮时，`Delete` `DelegateCommand`都会在类内执行特定项目`Series`，并将项目从数据库中删除。

我正在寻找某种方法来更新`ObservableCollection<Series>`发生这种情况的时间，以便在删除相关项目后立即将其从 XAML 视图中删除。

目前这没有发生，我对 WPF 比较陌生，并且一直试图让它工作好几天，请提出我哪里出错了：

**相关 XAML：**

```
<ListBox ItemsSource="{Binding SeriesCollection}" Name="lbSeries" Background="#6E7587" ItemContainerStyle="{StaticResource highlightStyle}" SelectionMode="Single" AlternationCount="2" Grid.Row="2" ScrollViewer.VerticalScrollBarVisibility="Auto">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200" />
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBox Margin="5,0" FontSize="14" Name="txtName" Text="{Binding Name}" Width="190" Height="30" Grid.Column="0" />
                <wpfToolkit:IntegerUpDown Value="{Binding Season}"  Name="nudSeason" FontSize="14" Height="30" Width="95" Increment="1" Maximum="100000" Minimum="0" Grid.Column="1" />
                <wpfToolkit:IntegerUpDown Value="{Binding Episode}" Name="nudEpisode" FontSize="14" Height="30" Width="95" Increment="1" Maximum="100000" Minimum="0" Grid.Column="2" />
                <Button Command="{Binding Save}" Grid.Column="3" Width="60" Height="50" Cursor="Hand" ToolTip="Save program" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Button.Template>
                        <ControlTemplate>
                            <Border HorizontalAlignment="Center" VerticalAlignment="Center" >
                                <Image Source="Resources\Save.png" Width="30" Height="40" />
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button Command="{Binding Delete}" Grid.Column="4" Width="60" Height="50" Cursor="Hand" CommandParameter="{Binding ElementName=lbSeries,Path=SelectedItem}" ToolTip="Remove program" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="15,0">
                    <Button.Template>
                        <ControlTemplate>
                            <Border HorizontalAlignment="Center" VerticalAlignment="Center" >
                                <Image Source="Resources\Delete.png" Width="30" Height="40" />
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Label Content="{Binding Information}" Grid.Column="5" FontSize="14" Margin="10,0" />
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

**查看型号：**

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Data;
using SeriesTracker.Functions;
using System.Linq;

namespace SeriesTracker.Client
{
    public class SeriesTrackerViewModel : INotifyPropertyChanged
    {
        public DelegateCommand NewSeries { get; set; }

        public event PropertyChangedEventHandler PropertyChanged;

        private ObservableCollection<Series> _series = new ObservableCollection<Series>();
        public ObservableCollection<Series> SeriesCollection
        {
            get { return _series; }
            set
            {
                _series = value;
                RaisePropertyChanged("SeriesCollection");
            }
        }

        public SeriesTrackerViewModel()
        {
            NewSeries = new DelegateCommand(AddNewSeries);

            DataTable table = DataAccessLayer.GetSeries();
            if (table.Rows.Count > 0)
                LoadSeries(table);
        }

        private void LoadSeries(DataTable table)
        {
            foreach (DataRow row in table.Rows)
            {
                int id = Int32.Parse(row["Id"].ToString());
                string name = row["Name"].ToString();

                int season = 0;
                int episode = 0;

                if (Int32.TryParse(row["Season"].ToString(), out season) &&
                    Int32.TryParse(row["Episode"].ToString(), out episode))
                {
                    var series = new Series(id, name, season, episode);
                    SeriesCollection.Add(series);
                }
            }
        }

        public void AddNewSeries()
        {
            SeriesCollection.AddSeries();
        }

        private void RaisePropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
                handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

**系列类：**

```
using System;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace SeriesTracker.Functions
{
    public class Series : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        private DelegateCommand _save;
        public DelegateCommand Save 
        {
            get { return _save; }
            set
            {
                _save = value;
                RaisePropertyChanged("Save");
            }
        }

        private DelegateCommand _delete;
        public DelegateCommand Delete 
        { 
            get{return _delete;}
            set
            {
                _delete = value;
                RaisePropertyChanged("Delete");
            }
        }

        public int Id { get; set; }

        string _name;
        public String Name
        {
            get { return _name; } 
            set
            {
                _name = value;
                RaisePropertyChanged("Name");
            }
        }

        int _season;
        public Int32 Season 
        {
            get { return _season; } 
            set
            {
                _season = value;
                RaisePropertyChanged("Season");
            }
        }

        int _episode;
        public Int32 Episode 
        {
            get { return _episode; }
            set
            {
                _episode = value;
                RaisePropertyChanged("Episode");
            }
        }

        string _information;
        public String Information 
        {
            get { return _information; }
            set
            {
                _information = value;
                RaisePropertyChanged("Information");
            }
        }

        public Series(int id,string name,int season, int episode)
        {
            Id = id;
            Name = name;
            Season = season;
            Episode = episode;

            Save = new DelegateCommand(SaveItem);
            Delete = new DelegateCommand(DeleteItem);
        }

        public void DeleteItem()
        {
            var selectedItem = this;
            if (selectedItem.Id != -1)
            {
                DataAccessLayer.Delete(selectedItem.Id);
            }
        }

        public void SaveItem()
        {
            var selectedItem = this;
            if (selectedItem.Id == -1)
                DataAccessLayer.AddEntry(selectedItem.Name,selectedItem.Season,selectedItem.Episode);
            else
                DataAccessLayer.Update(selectedItem.Id,
                    selectedItem.Name,selectedItem.Season,selectedItem.Episode);
        }

        private void RaisePropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
                handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T06:08:50.063

您不应该将 DeleteCommand 保留在 Series 类中，它应该在视图模型上。

在视图模型中，您可以轻松更新 ObservableCollection。

您需要在 ViewModel 和 XAML 上使用类型系列的通用委托命令，您需要在命令参数上传递 {Binding}。

**查看模型 C#:-**

```
DelegateCommand<Series> DeleteCommand { get; set; } 
DeleteCommand = new RelayCommand<Series>(OnDelete); 

// This method will gets execute on click the of Delete Button1
private void OnDelete(Series series) 
{
} 
```

**XAML :-** 在删除按钮上更改绑定和命令参数值

> CommandParameter="{Binding }"
> Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:25:59.110

您可以订阅 中`PropertyChangedEventHandler`的每个系列`ObservableCollection`，然后`RaisePropertyChanged("SeriesCollection")`在事件触发时调用

**更新：**我的意思是这样的：

```
private void LoadSeries(DataTable table)
{
    ...
    {
        var series = new Series(id, name, season, episode);
        series.PropertyChanged += { RaisePropertyChanged("SeriesCollection"); }
        SeriesCollection.Add(series);
    }
} 
```

# java - 在 Java 中为 onClick 函数分配快捷键

> ID：11928888
> 
> 赞同：0
> 
> 时间：2012-08-13T06:02:16.617
> 
> 标签：java, function, onclick

我有一个`onClick: function(event)`. 我想要的只是为此 onClick 事件分配一个快捷键。单击链接时执行快捷键，例如：ctrl+D。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:14:35.130

以更简单的方式，您实际上不会尝试`shortcut`为您的`onClick()`事件添加一个。您真正想要的是添加 a`KeyListener`到特定组件（基本上与您在其上添加 的组件相同`MouseListener`），并且您将尝试执行与用户单击该组件时相同的操作。

[“如何编写关键监听器”](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)可能是开始了解更多关于`KeyListeners`.

另一个对您有用的链接可能是：[“如何使用键绑定”](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:20:04.150

你说`execute a shortcut key`。你想模拟击键吗？

如果这是您想要的，请查看`java.awt.Robot` [http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)

# google-earth-plugin - 谷歌地球插件加载3D模型失败

> ID：11928889
> 
> 赞同：0
> 
> 时间：2012-08-13T06:02:18.333
> 
> 标签：google-earth-plugin

我在加载3d文件时遇到问题，详细代码如下，谁能帮我检查为什么我无法加载3d模型。

```

    函数加载3D（）{

    // 地标
    var placemark = ge.createPlacemark('');
    placemark.setName('模型');

    // 地标/模型（几何）
    变种模型 = ge.createModel('');

    // 地标/模型/链接
    var link = ge.createLink('');
    link.setHref('D:/gooleEarthApplication/gooleEarthApplication/3Dsrc/bankright1.dae');
    模型.setLink(链接);

    // 获取中心位置
    // 地标/模型/位置
    var loc = ge.createLocation('');

    loc.setLatitude(30.55423190570);
    loc.setLongitude(114.33491353925);

    模型.setLocation(loc);

    // 将模型地标添加到地球

    placemark.setGeometry（模型）；
    ge.getFeatures().appendChild(地标);

    var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);

    lookAt.setRange(lookAt.getRange() / 20000.0);

    // 设置纬度和经度值
    lookAt.setLatitude(30.55423190570);
    看看.setLongitude(114.33491353925);

    //放大模型
    看.setRange(300);
    看.setTilt(80);

    ge.getView().setAbstractView(lookAt);

    }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:42:11.733

使用 Google 地球插件时，您无法从文件系统加载 DAE（或 KML/KMZ）文件。您需要设置本地 HTTP 服务器（例如 Apache）并从本地 URL（http://localhost/bankright1.dae）加载文件

# c# - 如何从 C# (Winrt) 中的代码动态创建 ListBox 项

> ID：11928890
> 
> 赞同：0
> 
> 时间：2012-08-13T06:02:21.220
> 
> 标签：c#, listbox, windows-runtime

我希望有人能在这里指出我正确的方向，

我面临着创建一个屏幕的任务，我必须使用通过套接字发送给我的消息来构建该屏幕。该屏幕可以包含您的标准 GUI 项目，其中包括一个列表/表格。我可以看到很多关于如何在 XAML 中使用 DataTemplate 创建表的代码和提示，但是我有 2 个（相关的）事情正在努力解决。

1.  从代码（WinRT/c#）创建列表的最佳方法是什么，它可能包含复杂的组件结构（我布置的面板内的按钮/图像）。我看到 ItemContainerGenerator 是一个密封类，所以我不能自己滚动......我是否可以通过代码创建自己的 DataTemplate？

2.  如何实现行回收？我是否需要为每个小参数（如边框颜色和对齐方式）添加绑定，如果需要，这会对性能产生重大影响吗？

任何指针都将不胜感激。（我更熟悉 Android/Java 和 c# 对我来说是一个令人兴奋的新世界）

干杯，

彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:19:06.063

WinRT 并不真正支持在单个屏幕上表示分层数据。如果您查看文件选择器是如何实现的 - 您需要一个一个地挖掘子文件夹，然后以相同的方式返回。

如果你的层次结构很复杂，但相对扁平——虽然对于 Metro 应用程序来说，使用 DataTemplates 可能就足够了——你并不真的希望你的层次结构很复杂，你可能想尝试考虑如何让它更容易在以触​​摸为中心的 UI。

行回收是什么意思？ListView 或 ListBox 默认使用 VirtualizingStackPanel 作为其 ItemsPanel，并自动虚拟化行或列。如果您想要更多自定义 - 您可能需要实现自己的 ItemsControl 子类。

# php - codeigniter 默认控制器 url 路由

> ID：11928893
> 
> 赞同：3
> 
> 时间：2012-08-13T06:02:42.280
> 
> 标签：php, codeigniter, url-routing

我正在组建一个简单的网络站点，并希望这些 url 的工作方式类似于 facebook，因此通过输入 domain.com/username 我会得到一个用户配置文件。我已经可以这样做了

登录用户个人资料

```
domain.com/ 
```

其他用户个人资料位于

```
domain.com/home/username 
```

默认控制器称为 home，我目前正在使用 _remap 函数来检查额外的 url 参数，以根据传递或未传递的内容显示不同的数据。

我的问题是如何将其映射出来，以便我可以通过以下方式访问用户配置文件：

```
domain.com/username 
```

有没有可以使用的 routes.php 设置？访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T06:13:06.487

您应该在 config/routes.php 中添加以下规则

```
// Profile Route
$route['(:any)'] = 'home/$1'; 
```

**这会将您的所有请求重新路由到家庭控制器**。

所以`domain/michelle`将被重新路由，`domain/home/michelle` 但在这种情况下，您的所有请求都将被重新路由到家庭控制器，例如。`domain/pages/about`也将被重新路由到`domain/home/pages/about`wich false。

```
domain/michelle => domain/home/michelle // TRUE
domain/pages/about => domain/home/pages/about // FALSE 
```

**所以你必须在 Profile Route 之前为每个请求添加一个相同的规则**，例如。`$route['pages/(:any)'] = 'pages/$1';`

把它们放在一起：

```
// Page Route 
$route['pages/(:any)']  = 'pages/$1'

// Last Profile Route
$route['(:any)'] = 'home/$1'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:15:38.253

这不是 Codeigniter 中最容易做的事情。为此，您首先需要定义您在 routes.php 中使用的所有路由，并在文件末尾添加行，这会将所有其他请求发送到您的控制器，以检查用户是否存在。

```
$route['stores/(:any)'] = 'stores/$1';
$route['pages/(:any)'] = 'pages/$1'; 

$route['(:any)'] = "home/$1"; //this route will return user's page 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:19:10.883

您可以通过修改 application/config 文件中的 routes.php 文件来做到这一点。要了解有关 routes.php 的更多信息。这是 Codeigniter 中的链接[URI 路由](http://www.phpsyntax.blogspot.in/2012/08/uri-routing-in-codeigniter.html)

# mysql - mysql中主键和索引访问时间的差异

> ID：11928900
> 
> 赞同：0
> 
> 时间：2012-08-13T06:03:14.760
> 
> 标签：mysql, sql, join, indexing, primary-key

我有一个包含两列的表：`dte`和`id`。这两者一起确定了一个独特的记录。使用这两列设置主键或像这样创建常规索引之间的访问时间是否存在差异：

```
create index idx on mytable (dte, id)
create index idx2 on mytable (id) 
```

我正在寻找一个专门针对与也具有这两列的其他表的连接的访问​​时间的答案。特别是看起来很奇怪的是，当我进行`explain`连接时，它告诉我它需要检查其中一个表中的 15 行，其中该配对再次是唯一的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:56:12.783

简而言之，`primary key`标识磁盘上的一行。其他索引包含指向主键的链接（至少在 InnoDB 中）。索引应该存在于内存中，并将数据库引擎发送到磁盘以获取缺少的数据。如果索引包含查询所需的所有数据（以便引擎不需要在磁盘上运行），`covering`则为查询调用索引。

如果您要同时按两列匹配您的行（或始终输出这两列），则显示的两个索引都将被覆盖，并且速度将相对相同（取决于选择性）。

但索引本身需要 RAM。对于 InnoDB，任何非主键都包含主键的副本。因此，在您的情况下，将第二个字段包含在主键中可能会更好。

这都是理论，实际上我还没有理解你的问题。

# cloud - CDN 和 Cloud 是一样的吗？

> ID：11928903
> 
> 赞同：18
> 
> 时间：2012-08-13T06:03:51.080
> 
> 标签：cloud, cdn

CDN和云计算是一样的吗？如果两者不同，它们有何不同？当有人问我这个问题时，我已经用谷歌搜索了它。但我无法对此有任何明确的想法。所以任何人都可以解释这一点，这对很多人来说非常有用。

还请说明 CDN 将在哪里使用以及云将在哪里使用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-13T06:17:50.937

CDN 只是一个复制二进制文件的服务器网络，以便从地理位置接近的位置为它们提供服务。CDN 的存在时间比您今天所知的云计算要长得多。

不是每个云提供商都是 CDN，也不是每个 CDN 都是云计算提供商。

云计算很简单 - 将大型计算资源（通常是处理能力）分成可以远程使用的小块。

CDN 很简单——一堆分布在世界各地不同数据中心的“磁盘”。您将文件上传到这些磁盘之一 - 然后告诉它您的客户来自哪里。然后它将相同的文件复制到离您的客户更近的其他磁盘；为您的访问者提供更快的体验。这种磁盘集合称为内容交付网络。

CDN 中最知名的公司之一是[Akamai](http://www.akamai.com)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T06:11:24.303

最大的区别在于，云计算是一个数据中心大楼中的一大组服务器，通常位于一个位置。另一方面，CDN 也是一组服务器，但分布在全国各地，因此它允许网络访问者更好、更快地访问网站。例如，如果您在 A 位置尝试访问 B 中的服务器，则在 A 中本地访问服务器以获取文件可能会更快。CDN 通常能够支持更大的流量，因为速度是根据流量来自的位置计算的。

CDN 的工作原理是根据用户位置从最近的服务器提供内容。CDN 很短，是一种提高和加快网站周转时间的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:05:29.703

简短的回答：它们是不同的。具体如下：

*   CDN 是 Content Delivery Network 的缩写，更像是边缘计算。它遵循网络意义的端到端原则，尽可能多的工作可以去中心化并分发到用户附近的节点，去做吧。减少单点故障。你可以阅读我写的一篇小文章：[http ://www.sitepoint.com/content-delivery-networks-cdn-get-to-the-edge/](http://www.sitepoint.com/content-delivery-networks-cdn-get-to-the-edge/)

*   云计算不仅仅是在边缘附近交付内容。它是非常广义的弹性计算、存储和网络按需。对于您需要的计算：存储和处理能力，这就是云计算所提供的

# business-process-management - 启用 Activiti 日志记录

> ID：11928906
> 
> 赞同：2
> 
> 时间：2012-08-13T06:04:16.813
> 
> 标签：business-process-management, java.util.logging, bpmn, activiti

我想确认 Activiti 是否提供日志以查看 Activiti 中发生的情况，例如用户何时登录、何时启动哪个进程、分配和完成任务以及由谁完成。目前 Activiti 正在登录没有显示上述所需日志的控制台。我尝试在 logging.properties 文件中将日志级别从 FINE 更改为 FINEST，但什么也没发生。

Activiti 是否提供包含此级别详细信息的日志记录，如果没有，我该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-06T08:57:41.067

Activiti 从 5.12 开始使用 slf4j 日志记录，您可能需要查看其用户指南的这一部分以正确配置日志记录： [http://activiti.org/userguide/index.html#loggingConfiguration](http://activiti.org/userguide/index.html#loggingConfiguration)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T04:27:02.777

这些`ACT_HI_*`表可能对您有用，因为它们会记录正在发生的事情。

您可能需要修改历史级别，请查看文档中的操作方法：http: [//activiti.org/userguide/#historyConfig](http://activiti.org/userguide/#historyConfig)

# scala - `synchronized` 的用法不同

> ID：11928907
> 
> 赞同：4
> 
> 时间：2012-08-13T06:04:20.127
> 
> 标签：scala, scala-collections

在查看时[`scala.collection.mutable.SynchronizedStack`](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/mutable/SynchronizedStack.scala#L1)我注意到`synchronized`使用方式不同，有些方法使用`synchronized[this.type]`形式

```
override def push(elem: A): this.type = synchronized[this.type] { super.push(elem) }
override def pushAll(xs: TraversableOnce[A]): this.type = synchronized[this.type] { super.pushAll(elems) } 
```

和一些用途`synchronized`形式

```
override def isEmpty: Boolean = synchronized { super.isEmpty }
override def pop(): A = synchronized { super.pop } 
```

有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T06:19:03.583

`synchronized`（由 声明）的签名[`AnyRef`](http://www.scala-lang.org/api/current/scala/AnyRef.html)是

```
final def synchronized[T0](arg0: => T0): T0 
```

如果您将其用作

```
override def isEmpty: Boolean = synchronized { super.isEmpty } 
```

然后你把它留给编译器来推断传递给`synchronized`（here `Boolean`）的函数的返回类型。如果您将其用作

```
override def push(elem: A): this.type = synchronized[this.type] {
  super.push(elem)
} 
```

然后您明确指定返回类型（此处`this.type`）。我假设编译器不会推断`this.type`——这表明你返回的正是`this`对象——但它会推断出`SynchronizedStack`它的超类型之一，这不如`this.type`.

# php - 在不提交任何内容的情况下自动刷新.. 在 php 中？

> ID：11928908
> 
> 赞同：0
> 
> 时间：2012-08-13T06:04:20.830
> 
> 标签：php, mysql

需要帮助 面临的问题：在不提交任何内容的情况下自动刷新.. 在来自其他页面的 php 中？使用的工具：php、html 和 mysql。

```
 <?php
            session_start();
            ob_start();
            include('connect.php');
            include('functions.php');
            $uid = $_SESSION['user'];
            ?>
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
            <title>Nikon</title>
            </head>

            <body>
        <div id="wecome" style=" margin-top: 120px; margin-left: 660px; margin-right: 20px;">
                <div id="register_detail" style=" margin-top: 35px; margin-left: 30px;">
                  <?php
                  $image=$_POST['image'];
                  $image1=$_POST['image1'];
                 //$comments=$_POST['comments'];
                  $image=($_FILES['image']['name']);
                  $image1=($_FILES['image1']['name']);

                 //This is the directory where images will be saved
                  $target = "images/uploaded/";
                  $targetx = $target . basename( $_FILES['image']['name']);
                  //Writes the photo to the server
                  if(move_uploaded_file($_FILES['image']['tmp_name'], $targetx))
                  {

                  //Tells you if its all ok
                  }
                  else {
                 //Gives and error if its not
                  }

                 $targetx = $target . basename( $_FILES['image1']['name']);

                 //Writes the photo to the server
                 if(move_uploaded_file($_FILES['image1']['tmp_name'], $targetx))
                 {

                 //Tells you if its all ok
                 }
                 else {
                //Gives and error if its not
                 }
                 if (!$targetx) 
                {
                ///echo '<h1>Copy unsuccessfull!</h1>';
                $errors=1;
                }
                //If no errors registred, print the success message
                    $uid = $_SESSION['user'];
 $sql = "update dealer set image = '$image' ,image1 = '$image1' where id = '$uid'";
                    $result = mysql_query($sql);
                    $success =2;
                  ?>
            <?php
                if($success==2)
                {
            echo '<meta http-equiv="refresh" content="1; url=thank_u.php">';    
                }
                ?><div id="option1" style="width: 354px; height: 185px;">
                    <img src="images/option_big2.jpg" border="0px" /><br/><br/>
                 </div>
                  <form enctype="multipart/form-data"  action="option_2.php" method="post">
      <div id="option3" style="width: 350px; height: 55px; margin-left: 380px;">
      <font style="font-size:12px; color:#666666;">Image 1</font>&nbsp;&nbsp;
      <input type="file" id="image" name="image"><br /><br />
      <font style="font-size:12px; color:#666666;">Image 2</font>&nbsp;&nbsp;
      <input type="file" id="image1" name="image1"><br/>
      <div id="font" style="margin-top: 4px;">
      <font style="font-size:12px;color:#666666;">( jpg, gif, png files only )</font></div>
                  </div><br/><br/>
       <div id="submit" style="margin-top: 10px; text-align:right; margin-right: 110px;">
       <input type= "hidden" name="test" value="2"><input type="submit" value ="Submit">
                  </div>
                  </form>
                  </div>

               </th>
              </tr>

            </table>
            </body>
            </html>

 Please help me in solving it urgently... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:17:57.477

你已经`$success =2`直接分配了。上传内容后分配。我的意思是

```
if(move_uploaded_file() == TRUE)
{
    $success=2;
} 
```

并且不要在`<meta>`. 您想在表单提交后重定向用户，对！那你为什么不使用`header:`or `redirect`？

# android - Android XMLparse 到 Arraylist

> ID：11928918
> 
> 赞同：1
> 
> 时间：2012-08-13T06:05:25.080
> 
> 标签：android, xml, image, arraylist, xml-parsing

对不起，如果我让事情变得混乱。我编辑了整个问题。

我将 XMLPARSER 用于托管在我的网络服务器上的网址。

我想解析我的 url 列表，以便我可以从我的 XMLparser 中检索 url `url.add(map);`。`intent.putExtra(Extra.IMAGES, imageUrls);`请指导我如何使用代码进行操作。我的尝试显示错误

> java.lang.ArrayStoreException：java.util.HashMap 类型的源 [0] 无法存储在 java.lang.String [] 类型的目标数组中

```
public class HomeActivity extends BaseActivity {

        static final String URL = "http://*******";

        static final String KEY_LIST = "list";
        static final String KEY_THUMB_URL = "thumb_url";

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.ac_home);

            ArrayList<HashMap<String, String>> url = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL);
            Document doc = parser.getDomElement(xml); 
            NodeList nl = doc.getElementsByTagName(KEY_LIST);

            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value

                map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

                // adding HashList to ArrayList
                url.add(map); // <***** Set the results from here to imageUrls
            }

        imageUrls = (String[]) url.toArray(new String[0]); // <----***Error****

        }
        public void onImageGridClick(View view) {
            Intent intent = new Intent(this, ImageGridActivity.class);
            intent.putExtra(Extra.IMAGES, imageUrls); 
            startActivity(intent);
        }

        public void onImagePagerClick(View view) {
            Intent intent = new Intent(this, ImagePagerActivity.class);
            intent.putExtra(Extra.IMAGES, imageUrls);
            startActivity(intent);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:16:14.387

试试这个代码

```
public class MainActivity extends BaseActivity {

    String[] imageUrls;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ac_home);
        ArrayList<String> url = new ArrayList<String>();
        try {
            URL url_link = new URL("http:******");
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(url_link.openStream()));
            doc.getDocumentElement().normalize();
            NodeList nodeList = doc.getElementsByTagName("list");

            for (int i = 0; i < nodeList.getLength(); i++) {
                Node node = nodeList.item(i);

                Element fstElmnt = (Element)node;
                NodeList nameList = fstElmnt.getElementsByTagName("thumb_url");
                Element nameElement = (Element)nameList.item(0);
                nameList = nameElement.getChildNodes();

                url.add(nameList.item(0).getNodeValue());
            }
            imageUrls = (String[]) url.toArray(new String[0]);
        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }

    }
    public void onImageGridClick(View view) {
        Intent intent = new Intent(this, ImageGridActivity.class);
        intent.putExtra(Extra.IMAGES, imageUrls); 
        startActivity(intent);
    }

    public void onImagePagerClick(View view) {
        Intent intent = new Intent(this, ImagePagerActivity.class);
        intent.putExtra(Extra.IMAGES, imageUrls);
        startActivity(intent);
    }
} 
```

# c# - 将服务器端表格内容添加到 aspx 页面的 div

> ID：11928919
> 
> 赞同：2
> 
> 时间：2012-08-13T06:05:25.947
> 
> 标签：c#, asp.net

```
//ASPX PAGE
    <div id="nonPrintable">
         <table width="98%" border="0" cellspacing="2" cellpadding="0" align="center">
               --
               --</table>          
     </div>
    <br/>
    <div id="printReport" runat="server">

    </div> 
```

我正在从服务器端写表

```
Response.Write("<table width='95%' border='0' cellpadding='0' cellspacing='0' align='center'>");
Response.Write("<tr class='tdcolbg'>");
Response.Write("<td>");***SOME CONTENT***
Response.Write("</td>");
Response.Write("</tr>");
Response.Write("</table>"); 
```

**我已将服务器端表格内容添加到 div printReport 我该如何添加它。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:12:54.160

为什么不使用[`Repeater`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)?

```
<div id="printReport" runat="server">
     <asp:Repeater id="Repeater1" runat="server">
      <HeaderTemplate>
         <table border="1">
            <tr>
               <td><b>Company</b></td>
               <td><b>Symbol</b></td>
            </tr>
      </HeaderTemplate>

      <ItemTemplate>
         <tr>
            <td> <%# DataBinder.Eval(Container.DataItem, "Name") %> </td>
            <td> <%# DataBinder.Eval(Container.DataItem, "Ticker") %> </td>
         </tr>
      </ItemTemplate>

      <FooterTemplate>
         </table>
      </FooterTemplate>

   </asp:Repeater>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:10:54.020

您已`printReport`通过添加将 div 设置为服务器控件`runat="server"`。像这样添加你的表

```
StringBuilder sb=new StringBuilder();
sb.Append("<table>"); 
```

并将其添加到这样的控件中

```
printReport.innerHTML=sb.toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T06:08:16.383

而不是使用 div 使用标签控件并将内容保存在 stringbuilder 对象中，然后将其分配给标签文本属性。下面的例子

```
 // aspx code
<asp:Label ID ="lbReport" runat="server" />

// Code Behind
StringBuilder sbreport=new StringBuilder();
sbreport.Append("<table width='95%' border='0' cellpadding='0' cellspacing='0' align='center'>");
sbreport.Append("<tr class='tdcolbg'>");
sbreport.Append("<td>");***SOME CONTENT***
sbreport.Append("</td>");
sbreport.Append("</tr>");
sbreport.Append("</table>");

lbReport.Text = sb.ToString(); 
```

# ruby - 列出 Liquid 模板中的所有节点？

> ID：11928921
> 
> 赞同：1
> 
> 时间：2012-08-13T06:05:36.973
> 
> 标签：ruby, liquid

考虑以下已解析的模板及其 root.nodelist 的循环：

```
text = '{% if true %}{{ "poland" | capitalize }}{% else %}{{ "portugal" | capitalize}}{% endif %}'
template = Liquid::Template.parse(text)
template.root.nodelist.each { |node| p node } 
```

将仅打印：

```
Portugal 
```

（而不是波兰）

如何从模板中列出所有节点（包括 Liquid 变量、标签等​​）？尤其是 if/else 逻辑中的那些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:09:07.183

我真的无法找到在某种条件下访问 Blocks 的直接方法，但我使用了一种解决方法，使用以下代码向 Class 添加了一个方法

```
def b
  @blocks
end 
```

然后使用这段代码

```
template.root.nodelist[0].b.each { |a| p a.attachment[0].name } 
```

我可以找到您要查找的列表

# wpf - 带有嵌套控件的 CommandTarget

> ID：11928922
> 
> 赞同：0
> 
> 时间：2012-08-13T06:05:53.753
> 
> 标签：wpf, listview

我有一个自定义 WPF 控件，它继承自`ListView`. 此控件中的每个`ListViewItem`控件都可以包含其他此类控件，并且可以无限地继续。

自定义`ListView`子类具有三个`CommandBinding`s - 剪切、复制和粘贴，以及`ContextMenu`发出这些命令中的每一个的一个。所有工作都在顶层按预期工作 - 我可以剪切、复制和粘贴。但是，如果我右键单击其中一个嵌套的`ListView`-descendant 控件并选择粘贴（尽管其他两个的工作方式相同），则会发生以下情况之一：

如果控件没有 selected `ListViewItem`s，则`CommandExecuted`触发事件，顶部`ListView`为`CommandTarget`. 如果控件有一个 selected `ListViewItem`，一切正常。

这是一个已知的问题？有没有（体面的）解决方法？谢谢。

**编辑**根据要求，这是一个例子：

自定义`ListView`子类：

```
public class MyListView : ListView
{
    public MyListView()
    {
        this.CommandBindings.Add(new CommandBinding(ApplicationCommands.Copy,
            CopyCommand_Executed, CopyCutCommand_CanExecute));
        this.CommandBindings.Add(new CommandBinding(ApplicationCommands.Paste,
            PasteCommand_Executed, PasteCommand_CanExecute));
        this.Background = new SolidColorBrush(Colors.Ivory);
    }

    MyListItem Binding 
    { 
        get { return this.DataContext as MyListItem; } 
    }

    private void CopyCutCommand_CanExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        if (e.Handled)
            return;

        e.CanExecute = (this.SelectedItems.Count > 0);
        e.Handled = true;
    }

    private void CopyCommand_Executed(object sender, ExecutedRoutedEventArgs e)
    {
        if (e.Handled)
            return;

        if (this.SelectedItems.Count < 0)
            return; // Nothing selected

        List<MyListItem> items = new List<MyListItem>();
        foreach (MyListItem str in this.SelectedItems)
            items.Add(str);

        Clipboard.SetData("Stuff", items);

        e.Handled = true;
    }

    private void PasteCommand_CanExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        if (e.Handled)
            return;

        e.CanExecute = Clipboard.ContainsData("Stuff");
        e.Handled = true;
    }

    private void PasteCommand_Executed(object sender, ExecutedRoutedEventArgs e)
    {
        if (e.Handled)
            return;

        MyListView lv = this;

        List<MyListItem> strings = Clipboard.GetData("Stuff") as List<MyListItem>;
        if (strings == null)
            return;

        foreach (MyListItem s in strings)
            this.Binding.Items.Add(s);

        e.Handled = true;
    }
} 
```

简单`ListViewItem`绑定类：

```
[Serializable]
public class MyListItem
{
    public MyListItem() { this.Items = new ObservableCollection<MyListItem>(); }
    public string Caption { get; set; }
    public ObservableCollection<MyListItem> Items { get; set; }
} 
```

XAML for `MyControl`（无代码隐藏），每个的表示`ListViewItem`：

```
<UserControl x:Class="TestNestedListView.MyControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:TestNestedListView">
    <Grid>
        <StackPanel Orientation="Vertical">
            <TextBlock Text="{Binding Path=Caption}" />
            <local:MyListView Padding="10" ItemsSource="{Binding Path=Items}"/>
        </StackPanel>
    </Grid>
</UserControl> 
```

`MainWindow`XAML：

```
<Window x:Class="TestNestedListView.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TestNestedListView"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:MyListItem}">
            <local:MyControl DataContext="{Binding}" />
        </DataTemplate>
        <Style TargetType="local:MyListView">
            <Setter Property="ItemContainerStyle">
                <Setter.Value>
                    <Style TargetType="{x:Type ListViewItem}">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Setter Property="VerticalContentAlignment" Value="Stretch" />
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <local:MyListView x:Name="lv" ItemsSource="{Binding Path=Items}">
        <local:MyListView.ContextMenu>
            <ContextMenu>
                <MenuItem Command="Copy" />
                <MenuItem Command="Paste" />
            </ContextMenu>
        </local:MyListView.ContextMenu>
    </local:MyListView>
</Window> 
```

`MainWindow`代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        MyListItem root = new MyListItem();

        MyListItem item = new MyListItem() { Caption = "Item 1" };
        item.Items.Add(new MyListItem() { Caption = "Subitem 1.1" });
        root.Items.Add(item);
        root.Items.Add(new MyListItem() { Caption = "Item 2" });
        root.Items.Add(new MyListItem() { Caption = "Item 3" });
        root.Items.Add(new MyListItem() { Caption = "Item 4" });

        item = new MyListItem() { Caption = "Item 5" };
        item.Items.Add(new MyListItem() { Caption = "Subitem 5.1" });
        item.Items.Add(new MyListItem() { Caption = "Subitem 5.2" });

        root.Items.Add(item);

        lv.DataContext = root;
    }
} 
```

要查看此操作，请右键单击并复制任何项目。然后右键单击`ListView`“项目 2”下的矩形（它是 ）并单击粘贴。请注意，新项目将被粘贴为顶层中的最后一个项目。右键单击“Subitem 1.1”下的矩形，注意该项粘贴为“Item 1”的子项，而不是“Subitem 1.1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:40:17.830

根据[这个](https://stackoverflow.com/questions/5143060/wpf-how-to-enable-a-command)列表视图必须有焦点正确处理命令。我通过将您的类型的空列表视图添加到表单和文本框来观察到这个缺陷。然后，当我关注文本框并在剪贴板中有一些文本粘贴命令时，即使在您的列表视图中，也不会触发任何 CanExecute 方法，并且选择粘贴命令将粘贴到文本框。这确实看起来像 wpf 中的一个错误，我发现很少有文章表明它是已知的，但我没有找到它的票。

[在 WPF 错误中禁用 ContextMenus](http://www.trentfguidry.net/post/2009/06/14/Disabled-ContextMenus-WPF.aspx)

[为什么我的 ContextMenu 项目被禁用？](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7bd75a7c-eab4-4f3a-967b-94a9534a7455/)

**编辑**

作为您的方案的解决方法，只需添加：

```
protected override void OnMouseDown(MouseButtonEventArgs e)
{
    base.OnMouseDown(e);
    Dispatcher.BeginInvoke(new Func<bool>(Focus));
} 
```

到你的`MyListView`班级。

# c# - 保证GC不会影响代码

> ID：11928926
> 
> 赞同：3
> 
> 时间：2012-08-13T06:06:04.747
> 
> 标签：c#, garbage-collection, extension-methods

我有这个扩展方法可以在给定的时间间隔后禁用计时器。是否可以保证 GC 不会破坏 disableTimer 变量（此方法中的局部变量）？或者是否有理由说明为什么这段代码会在一小时后工作。

```
timer.DisableAfter(1.Hours()) :

    public static void DisableAfter(this Timer timer, TimeSpan timeSpan)
    {
        var disableTimer = new Timer(timeSpan.TotalMilliseconds)
            {
                AutoReset = false,
            };

        disableTimer.Elapsed += (sender, e) =>
            {
                timer.Stop();
                disableTimer.Stop();
            };
        disableTimer.Start();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:14:09.900

没有 garauntee 它是否会被垃圾收集，但如果你不保留对计时器的引用，它肯定有资格收集。

请参阅 Timer 的此 MSDN 页面，进入第一个示例源块，阅读上面的文本，显然是源块本身......这实际上都是关于 Timer 被垃圾收集的。

[http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:28:04.770

我还有一个建议。它更简单，因为它不涉及另一个 Timer。当您在 Elapsed 方法上注册一个处理程序时，将它与另一个处理程序包装起来，该处理程序将保存最后一次触发计时器的时间。当计时器过去时，您首先检查是否已经过了一个小时，如果是 - 您抑制当前执行并取消计时器。

您可以通过 Elapsed 委托的源参数访问计时器对象本身。

# c++ - C++ 中的简单 SAX 或 DOM 解析器

> ID：11928929
> 
> 赞同：-1
> 
> 时间：2012-08-13T06:06:36.593
> 
> 标签：c++, parsing, dom, sax

我找不到 SAX 或 DOM 解析器的简单实现....如果有人可以给我一些关于它的指针或共享一些链接，它将是 gr8 ，因为我所看到的只是 C++ 中的一些第三方解析器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:13:24.967

还有[boost::property_tree](http://www.boost.org/doc/libs/1_50_0/doc/html/property_tree.html)。它不是你所说的小，但有很多功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:14:34.787

您应该考虑[TinyXML](http://www.grinninglizard.com/tinyxml/)。从它的主页：

> TinyXML 是一个简单、小型的 C++ XML 解析器，可以轻松集成到其他程序中。

作者提供了一个更新的版本，称为[TinyXML-2](http://www.grinninglizard.com/tinyxml2/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:57:26.000

提升的一部分。小而快。 [http://rapidxml.sourceforge.net/](http://rapidxml.sourceforge.net/)

# python - Pyconfigini：ImportError：没有名为 lib.pyconfigini 的模块

> ID：11928930
> 
> 赞同：0
> 
> 时间：2012-08-13T06:06:37.660
> 
> 标签：python, python-2.7

我一直在寻找具有继承支持的ini解析，例如Zend_Config_Ini，所以我找到了pyconfigini（https://bitbucket.org/maascamp/pyconfigini）

我有以下项目结构：

*   应用程序
    *   __ 初始化 __.py
    *   设置.py
*   库
    *   __ 初始化 __.py
    *   pyconfigini.py

我将 pyconfigini.py 模块源代码（https://bitbucket.org/maascamp/pyconfigini）复制到 lib/pyconfigini.py 并在我的设置模块（app/setting.py）中编码：

```
import os
from lib.pyconfigini import parse_ini
PROJECT_DIR = os.path.join( os.path.dirname(__file__), '../');
APP_ENV = os.getenv('APP_ENV','development')
config = parse_ini(os.path.abspath(os.path.join(PROJECT_DIR,"config.ini")), APP_ENV)
print config.nome 
```

但是，当我在命令行中运行它时，出现此错误

```
> python settings.py
Traceback (most recent call last):
  File "settings.py", line 7, in <module>
    from lib.pyconfigini import parse_ini
ImportError: No module named lib.pyconfigini 
```

为什么我收到此错误？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:05:31.060

问题是你正在运行

```
python setting.py 
```

从`app/`目录（在脚本开始时变为`current working directory`）。**Python 在PYTHONPATH**环境变量中列出的目录中查找模块（您可以通过`sys.path`变量从 Python 代码访问它）。

此目录列表包含标准`site-packages`、`dist-packages`等目录和您`current working directory`- 一个目录，您尝试从该目录运行您的脚本。

从上面的信息可以看出，`lib`package 找不到，因为它不存在于`sys.path`.

因此，我建议您将入口点脚本位置更改为根目录，`app`以及`lib`包所在的位置。

但是，如果您`settings.py`出于某种原因不想直接运行它来测试模块，您可以手动定义您的 PYTHONPATH，运行您的脚本，例如：

```
PYTHONPATH="../lib" python ./settings.py 
```

这将使用所需的`lib`目录修补您的 PYTHONPATH。

运行应用程序的另一种方法是将`lib`包放在`app/`目录中。

# svn - SVN 工作副本被锁定

> ID：11928931
> 
> 赞同：0
> 
> 时间：2012-08-13T06:06:38.083
> 
> 标签：svn, drupal

好的，所以我什至无法描述过去几个小时我所经历的地狱。

我正在管理一个 drupal 网站，我在本地有一个工作副本，一个在登台服务器上。当我在处理它时，我决定更新 Drupal 核心，并没有真正考虑我只是将所有 Drupal 文件复制到我的工作副本中，一切都在本地运行良好，直到我想将所有内容提交到 svn。

我使用 Cornerstone 来执行此操作，但我的所有文件夹现在都被阻塞了，当我尝试进行清理时，我收到此错误“...不是工作副本目录”。

然后我尝试将所有更新的文件夹移动到其他地方以首先从 svn 中删除它们，这突然给了我这个错误：“......不存在”（为什么？？我正在尝试删除它......）

所以现在我基本上卡住了，我不能提交，我不能更新，我不能清理，基本上什么都做不了。

我不想再次签出，因为我的本地版本较新，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:26:35.710

好的，经过多次尝试，这些是我所做的步骤：

1.  删除所有更新的文件夹
2.  添加回旧文件夹
3.  通过svn删除它们
4.  犯罪
5.  添加回更新的文件夹
6.  犯罪

# google-maps - 这些问题与显示的路线图路径名称有关

> ID：11928933
> 
> 赞同：0
> 
> 时间：2012-08-13T06:06:42.017
> 
> 标签：google-maps, android-emulator, overlay, mapactivity

```
package com.hands;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.List;

import org.ci.geo.route.Road;
import org.ci.geo.route.RoadProvider;

import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;
import android.os.Bundle;
import android.os.Handler;
import android.widget.LinearLayout;
import android.widget.TextView;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class RoutenamesActivity extends MapActivity {

    LinearLayout linearLayout;
    MapView mapView;
    private Road mRoad;

    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
                            setContentView(R.layout.main);
            mapView = (MapView) findViewById(R.id.mapview);
            mapView.setBuiltInZoomControls(true);

            new Thread() {
                    @Override
                    public void run() {

                            double fromLat = 49.85, fromLon = 24.016667, toLat = 50.45, toLon = 30.523333;
                            String url = RoadProvider
                                            .getUrl(fromLat, fromLon, toLat, toLon);

                            InputStream is = getConnection(url);

                            mRoad = RoadProvider.getRoute(is);
                            mHandler.sendEmptyMessage(0);
                    }
            }.start();
    }

    Handler mHandler = new Handler() {
            public void handleMessage(android.os.Message msg) {
                    TextView textView = (TextView) findViewById(R.id.description);

                    textView.setText(mRoad.mName + " " + mRoad.mDescription);
                    MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
                    List<Overlay> listOfOverlays = mapView.getOverlays();
                    listOfOverlays.clear();
                    listOfOverlays.add(mapOverlay);
                    mapView.invalidate();
            };
    };

    private InputStream getConnection(String url) {
            InputStream is = null;
            try {
                    URLConnection conn = new URL(url).openConnection();
                    is = conn.getInputStream();
            } catch (MalformedURLException e) {
                    e.printStackTrace();
            } catch (IOException e) {
                    e.printStackTrace();
            }
            return is;
    }

    @Override
    protected boolean isRouteDisplayed() {
            return false;
    }
} 
```

我的第二节课是

```
 class MapOverlay extends com.google.android.maps.Overlay {
    Road mRoad;
    ArrayList<GeoPoint> mPoints;

    public MapOverlay(Road road, MapView mv) {
            mRoad = road;
            if (road.mRoute.length > 0) {
                    mPoints = new ArrayList<GeoPoint>();
                    for (int i = 0; i < road.mRoute.length; i++) {
                            mPoints.add(new GeoPoint((int) (road.mRoute[i][1] * 1000000),
                                            (int) (road.mRoute[i][0] * 1000000)));
                    }
                    int moveToLat = (mPoints.get(0).getLatitudeE6() + (mPoints.get(
                                    mPoints.size() - 1).getLatitudeE6() - mPoints.get(0)
                                    .getLatitudeE6()) / 2);
                    int moveToLong = (mPoints.get(0).getLongitudeE6() + (mPoints.get(
                                    mPoints.size() - 1).getLongitudeE6() - mPoints.get(0)
                                    .getLongitudeE6()) / 2);
                    GeoPoint moveTo = new GeoPoint(moveToLat, moveToLong);

                    MapController mapController = mv.getController();
                    mapController.animateTo(moveTo);
                    mapController.setZoom(7);
            }
    }

    @Override
    public boolean draw(Canvas canvas, MapView mv, boolean shadow, long when) {
            super.draw(canvas, mv, shadow);

             drawPath(mv, canvas); 
            return true;
    }

    public void drawPath(MapView mv, Canvas canvas) {

        int x1 = -1, y1 = -1, x2 = -1, y2 = -1;

        Paint paint = new Paint();

            paint.setColor(Color.GREEN);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(3);

            **for (int i = 0; i < mPoints.size(); i++) {
   //here mPoints.size  coming as null thats why wholw appn gets crased ?**   

                Point point = new Point();
                    mv.getProjection().toPixels(mPoints.get(i), point);
                    x2 = point.x;
                    y2 = point.y;
                    if (i > 0) {
                        System.out.println("before  canvas.drawLine");

                            canvas.drawLine(x1, y1, x2, y2, paint);

                            System.out.println("after canvas.drawLine");

                    }
                    x1 = x2;
                    y1 = y2;
            }
    }
 } 
```

# android - 在 android 中为 GCM 注册应用程序

> ID：11928934
> 
> 赞同：0
> 
> 时间：2012-08-13T06:07:01.140
> 
> 标签：android, google-cloud-messaging

我正在尝试将 GSM 集成到我的 android 应用程序中。我可以使用我的 Api 密钥和 Sender_id 通过该演示运行 GCM-Client-demo 应用程序并注册设备，但是当我在我的应用程序中使用相同的代码时，我无法使用 GCM 注册设备。

我在日志猫中得到的错误是。

```
08-13 11:24:34.787: W/ActivityManager(2465): Unable to start service Intent { act=com.google.android.c2dm.intent.REGISTRATION cat=[com.demo.demogcm] cmp=com.demo.demogcm/.GCMIntentService (has extras) }: not found 
```

我的清单文件。

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" />

<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />

<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />

<!--
 Creates a custom permission so only this app can receive its messages.

 NOTE: the permission *must* be called PACKAGE.permission.C2D_MESSAGE,
       where PACKAGE is the application's package name.
-->
<permission
    android:name="com.demo.demogcm.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission
    android:name="com.demo.demogcm.permission.C2D_MESSAGE" />

<!-- This app has permission to register and receive data message. -->
<uses-permission
    android:name="com.google.android.c2dm.permission.RECEIVE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".view.DemoActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <receiver
        android:name="com.demo.demogcm.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.demo.demogcm" />
        </intent-filter>
    </receiver>

    <!--
      Application-specific subclass of GCMBaseIntentService that will
      handle received messages.

      By default, it must be named .GCMIntentService, unless the
      application uses a custom BroadcastReceiver that redefines its name.
    -->
    <service android:name=".view.GCMIntentService" />
</application> 
```

谁能告诉我我在做什么错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T06:13:35.470

请替换（在清单中）

**android:name=".view.GCMIntentService"** 代码与这个 **android:name=".GCMIntentService"** 并将 GCMIntentService 放在同一个包 "com.demo.demogcm"

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T11:43:33.840

你也可以使用这个包和类名：`<service android:name=".view.GCMIntentService" />`但有额外的魔力

`This intent service will be called by the GCMBroadcastReceiver (which is is provided by GCM library), as shown in the next step. It must be a subclass of com.google.android.gcm.GCMBaseIntentService, must contain a public constructor, and should be named my_app_package.GCMIntentService (unless you use a subclass of GCMBroadcastReceiver that overrides the method used to name the service).`

这是如何工作的，你可以[在这里](http://dexxtr.com/post/28188228252/rename-or-change-package-of-gcmintentservice-class)看到。

# c# - 使用 C# 如何将 RGB 转换为 YCrCb 和 YCrCb 到 RGB

> ID：11928935
> 
> 赞同：2
> 
> 时间：2012-08-13T06:07:45.417
> 
> 标签：c#

使用 C# 我需要将 RGB 值转换为 YCrCb 格式，并将 YCrCb 转换为 RGB。请任何人提出一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:15:08.447

看看这个（完整的源代码）：[AForge 图像处理库](http://www.koders.com/csharp/fidC25253D9257225B8F879EAF0A9F1161C6FABE14B.aspx)

他们为您提供了完整的课程来做到这一点：

您可以轻松找到像这样的函数**RGB2YCbCr**

# html - 输入文本框时不显示提示？

> ID：11928936
> 
> 赞同：0
> 
> 时间：2012-08-13T06:07:52.950
> 
> 标签：html, css

我在 html 中制作文本框。我想在文本框中禁用自动提示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T06:10:48.920

要关闭自动完成（提示），请添加属性 autocomplete，其值为 off

```
<input autocomplete="off"> 
```

# html - 在 HTML5 中语义显示 BC/BCE 时间

> ID：11928938
> 
> 赞同：4
> 
> 时间：2012-08-13T06:08:01.780
> 
> 标签：html, semantic-web, semantic-markup

我正在寻找一种在 HTML5 中语义表示日期的解决方案。根据[新规范](http://www.whatwg.org/specs/web-apps/current-work/#the-time-element)，现在可以给出没有日期、月份部分等的日期，例如：

```
<time datetime="2011">Last year</time> 
```

[本文](http://www.brucelawson.co.uk/2012/best-of-time/)还演示了一些有用的示例。但是仍然没有提到 BC/BCE 时期的日期。任何语义解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:49:11.460

该`time`元素不适用于无法在[公历](https://en.wikipedia.org/wiki/Gregorian_calendar)上表示的日期，因此该`datetime`属性在 BCE 年份没有支持或标准。`datetime`由于浏览器支持和公历采用的复杂性，这似乎是一个有目的的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:45:02.363

当前指定的 HTML5 不允许使用 0 年之前的日期。

HTML5 日期时间格式是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)日期时间格式的子集。ISO 8601 允许日期 BC/BCE，简单地用减号前缀书写，例如`-86`。

但在 HTML5 中，不允许使用减号前缀。我不知道这是故意的，还是有什么理由。

解决这个问题的一种可能方法是简单地使用 ISO 8601 日期和时间元素，忽略 HTML5 对负值的禁止，我猜。

如果您对此非常关心，您可能还想针对 HTML 规范提交评论。

# mysql - 如何使用 MySQL 在同一行中显示以前的数据？

> ID：11928944
> 
> 赞同：1
> 
> 时间：2012-08-13T06:08:26.303
> 
> 标签：mysql, sql, ruby-on-rails, ruby, ruby-on-rails-3.1

我在显示数据库中的数据时遇到问题。我有`jos_stock`带字段的表`rem_balance`。`rem_balance`有价值`0, 126, 12, 9`。在我的网站上。`rem_balance`显示它取决于周，即 2012 年第 26 周，余额的值为 0。这意味着 2012 年第 25 周 = 126、2012 年第 24 周 = 12 和 2012 年第 23 周 = 9。

我要做的就是如果当前周的值是 26 等于 0。它将显示之前的余额 126。我该怎么做？有什么建议吗？我正在使用 Ruby on Rails。

**这是我在模型中的查询：**

```
SELECT("jos_product.id, jos_product.product_code AS code, jos_product.name, 
pc.id AS category_id, pc.name AS category_name, thumbnail, location, 
original_image,CONCAT(sm.year, '/', sm.week) as week_start, 
CONCAT(sm2.year, '/', sm2.week) AS reprint_week, pr.quantity AS reprint_qty,
jos_stock.rem_balance AS balance")
.joins("INNER JOIN jos_product_category AS pc ON pc.id = jos_product.product_category")
.joins("INNER JOIN jos_stock_movement AS sm ON sm.id = jos_product.start_week")
.joins("LEFT OUTER JOIN jos_stock ON jos_stock.product_id = jos_product.id")
.joins("LEFT OUTER JOIN (select product, max(stock_movement) AS reprint, quantity from 
jos_product_reprint group by product) AS pr ON pr.product IN (jos_product.id)")
.joins("LEFT OUTER JOIN jos_stock_movement AS sm2 ON sm2.id = pr.reprint")
.where("jos_product.published = 1 #{ search_query }")
.order("jos_product.product_code ASC")
.group("jos_product.product_code") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:53:12.403

虽然我无法向您展示可以解决您的问题的确切查询（我没有您所有表的 DDL），但我可以向您展示如何检索前一行数据的假设示例。这里使用的是您的问题中描述的测试数据（我假设您在哪里写“即 2012 年第 36 周，剩余余额的值为 0”，您的意思是“即 2012 年第**26**周，剩余余额的值是0”。

希望您可以从中学习，并将其用于您的 Ruby on Rails 查询：

```
drop table if exists test_jos_stock;

create table test_jos_stock
(
id int unsigned not null primary key auto_increment,
rem_balance int not null default 0,
year int not null default 0,
week int not null default 0
);

insert into test_jos_stock (rem_balance,year,week) values (9,2012,23);
insert into test_jos_stock (rem_balance,year,week) values (12,2012,24);
insert into test_jos_stock (rem_balance,year,week) values (126,2012,25);
insert into test_jos_stock (rem_balance,year,week) values (0,2012,26);

select js.year,js.week,js.rem_balance,
case when js.rem_balance = 0 then @prev_rem_balance else js.rem_balance end as rem_balance_zero_or_prev,
@prev_rem_balance := js.rem_balance
from test_jos_stock js
inner join (SELECT @prev_rem_balance := 0) as t
order by year,week; 
```

# c# - 如何使用 lambda 表达式在 Grid 中获取选定的复选框

> ID：11928946
> 
> 赞同：0
> 
> 时间：2012-08-13T06:08:40.360
> 
> 标签：c#, .net, linq, lambda

```
var sel = chkGrid.Children.Cast<CheckBox>.Where(x => x.Selected); 
```

我用这个但不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:18:50.327

`Cast`是一种方法 - 你忘记了括号：

```
var sel = chkGrid.Children.Cast<CheckBox>().Where(x => x.Selected); 
```

如果这不起作用，也许你的一些孩子不是复选框，在这种情况下你应该使用：

```
var sel = chkGrid.Children.OfType<CheckBox>().Where(x => x.Selected); 
```

另一方面，复选框也*可能*不是`chkGrid`. 您可能需要递归到子控件。当我们甚至不知道这是否是 WinForms、WPF、ASP.NET 时，很难知道更多...

# javascript - 当 start 未定义时，数组的 lastIndexOf 返回 -1

> ID：11928951
> 
> 赞同：4
> 
> 时间：2012-08-13T06:09:00.390
> 
> 标签：javascript

在 javascript 中，Array 实例有两种方法，

```
[].indexOf(searchvalue [,start]) 
```

和

```
[].lastIndexOf(searchvalue [,start]) 
```

如果 "start" 参数未定义，is 的行为会很奇怪：

```
[1,2,3].lastIndexOf(2) // 1
[1,2,3].lastIndexOf(2,undefined) // -1
[1,2,3].indexOf(2,undefined) // 1 
```

这发生在chrome和firefox中，所以indexOf和lastIndexOf的理论是什么对待“未定义”不同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T06:13:42.993

```
array.lastIndexOf(searchElement[, fromIndex]) 
```

> fromIndex 开始向后搜索的索引。默认为数组的长度，即将搜索整个数组。如果索引大于或等于数组的长度，则将搜索整个数组。如果为负，则将其作为距数组末尾的偏移量。请注意，即使索引为负数，仍会从后向前搜索数组。如果计算出的索引小于0，则返回-1，即不搜索数组。

`[1,2,3].lastIndexOf(2,undefined)`与 相同`[1,2,3].lastIndexOf(2, 0)`，因此只会搜索第一个元素。

`[1,2,3].lastIndexOf(2, 0)`将返回`-1`。

`[1,2,3].lastIndexOf(1, 0)`将返回`0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T06:18:49.217

`array.indexOf()`从指定点开始测试，然后继续前进，直到找到与指定值匹配的数组元素。因此，当您使用 时`[1,2,3].indexOf(2,undefined)`，它从索引 0 处的数组元素（`undefined`转换为）开始，然后继续测试每个元素：

```
2 == 1 // false
2 == 2 // true, returns index 1 
```

`array.lastIndexOf()`但是，从指定点开始向后测试。因此，当您使用 时`[1,2,3].lastIndexOf(2,undefined)`，Javascript 从索引为 0 的数组元素开始，然后尝试向后继续：

```
2 == 1 // false, no more elements to test, return -1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T06:15:15.843

这是 Array lastIndexOf 的标准实现。[Javascript 数组 lastIndexOf() 方法](http://www.tutorialspoint.com/javascript/array_lastindexof.htm)

注意：

```
var from = Number(arguments[1]);
if (isNaN(from))
{
  from = len - 1;
}
else
{
  from = (from < 0)
       ? Math.ceil(from)
       : Math.floor(from);
  if (from < 0)
    from += len;
  else if (from >= len)
    from = len - 1;
} 
```

我最初假设`from`等于 0，但实际上它是 NaN。一个可能的结论是mozilla或者webkit的实现不是你想要的

[另一个链接——Javascript Array indexOf() 方法](http://www.tutorialspoint.com/javascript/array_indexof.htm)

可以直接使用

```
 var from = Number(arguments[1]) || 0; 
```

# c++ - SystemParametersInfo 和 ERROR_OPERATION_IN_PROGRESS

> ID：11928953
> 
> 赞同：1
> 
> 时间：2012-08-13T06:09:09.857
> 
> 标签：c++, winapi, windows-8, screensaver, usermode

我正在编写这个用户模式可执行文件，它可以在登录用户的上下文中从 Windows 平台上的本地服务运行。它的主要目的是配置所有登录用户的桌面。它调用以下 API 来设置屏幕保护程序：

```
if(!SystemParametersInfo(SPI_SETSCREENSAVETIMEOUT, nTimeoutSec, 0, 0))
{
    //Error
    GetLastError();
}

if(!SystemParametersInfo(SPI_SETSCREENSAVEACTIVE, nActive, 0, 0))
{
    //Error
    GetLastError();
} 
```

上面的代码在大多数情况下都有效，除了当我有多个用户登录到 Windows 控制台时，我会收到这个奇怪的错误 ERROR_OPERATION_IN_PROGRESS。我查阅了[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)，它有这样的解释：

> 如果机器已进入省电模式或系统锁定状态，则会发生 ERROR_OPERATION_IN_PROGRESS 异常。

好的，但是我该如何处理这个错误呢？

PS。这在 Windows 8 上最常发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:02:08.663

`SPI_SETSCREENSAVEACTIVE`可能会产生一些错误并且什么也不做。尝试向窗口发送一条[`WM_SYSCOMMAND`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646360%28v=vs.85%29.aspx)带有`SC_SCREENSAVE`消息。`GetDesktopWindow()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-12T21:55:00.447

好的，看起来这在 Windows 8+ 上实际上是不可能的，尽管它没有在 MSDN 上明确说明。

# 我的研究

它确实在[SetThreadExecutionState](https://msdn.microsoft.com/en-us/library/windows/desktop/aa373208(v=vs.85).aspx)的另一篇 MSDN 文章中指出，在 Windows 8 上，*ES_DISPLAY_REQUIRED*标志不会唤醒屏幕。

> Windows 8：此标志只能使显示器保持打开状态，不能打开当前关闭的显示器。

有一个用于删除活动屏幕保护程序 ( [SPI_SETSCREENSAVEACTIVE](https://msdn.microsoft.com/en-us/library/windows/desktop/ms724947(v=vs.85).aspx) ) 的 API 调用确实说明了以下内容：

> 如果机器已进入省电模式或系统锁定状态，则会发生 ERROR_OPERATION_IN_PROGRESS 异常

# 结论

系统未处于锁定状态且未处于省电模式（使用[GUID_MIN_POWER_SAVINGS](https://msdn.microsoft.com/en-us/library/windows/desktop/aa372758(v=vs.85).aspx)），因此 Windows 8+ 机器似乎无法唤醒屏幕。

# windows - 如何使用 perl 执行 telnet 登录？

> ID：11928958
> 
> 赞同：-1
> 
> 时间：2012-08-13T06:09:36.113
> 
> 标签：windows, expect

当我在 Unix 中执行下面给出的脚本时，它工作正常。

```
 #!/usr/bin/expect -f 
        spawn telnet 10.123.9.111 
        expect login {send username\r} 
        expect password {send password\r} 
        interact; 
```

当我在 Windows 上执行相同的脚本时，它显示为无法在我安装的 example.pl 上执行 /usr/bin/ `expect`expect`perl package manager.`

有没有办法在 Windows 上添加它的等效动态链接库？

或者，我如何在 Windows 上使用 perl 脚本进行 telnet 登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:14:11.280

使用 Perl（不期望）从 Windows 远程登录可以通过 Net::Telnet 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:21:25.167

#!/usr/bin/expect -f 在 Windows 上不起作用。

你必须给出一个类似窗口的路径来告诉你期望在哪里。

像（真的取决于你在 Windows 中的路径），

```
"C:\strawberry\perl/bin/expect" 
```

或者如果 perl 在您的环境路径中，则只需 #!perl。

# python - 导入一个类并使用python方法

> ID：11928959
> 
> 赞同：0
> 
> 时间：2012-08-13T06:10:09.097
> 
> 标签：python, plone, python-2.4

我有一个像这样的文件结构：产品

```
-product
  - content
    - MyContent.py
  - Tool.py 
```

在 Tool.py 中，我有

```
from AccessControl import ClassSecurityInfo
from OFS.SimpleItem import SimpleItem
from Products.CMFCore.utils import UniqueObject

class Tool(PropertyManager, UniqueObject, SimpleItem):

    @staticmethod
    security.declarePublic('convert_to_lower')
    def convert_to_lower(data):
        return data.lower() 
```

在 MyContent.py 中，我 Tool 访问了这个类方法，所以我做了：

```
from Product.Tool import Tool
from Product.Content.ATContentTypes.content.base import ATCTContent
class MyContent(BaseContent):
      def new_definition(self):
          print Tool.convert_to_lower("ABCD") 
```

我似乎无法在这里找到我做错了什么。我用以下方法实例化 MyContent 的对象：

```
mycontent = MyContent()
mycontent.new_definition() 
```

但是，当我运行它时，它给了我一个错误，说方法 convert_to_lower 没有定义。注意： convert_to_lower() 只是我正在尝试做的一个简单示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:42:44.410

*   您可能在示例中打错了字；正确的拼写是`@staticmethod`，不是`@staticclass`。由于后者会产生名称错误，我相信你已经知道了。:-)

*   将安全声明放在静态方法上是没有意义的，它只适用于类方法（声明存储在类上，而不是方法上）。

*   装饰器被应用于安全声明行的结果，而不是它下面的函数定义。换句话说，你现在`None`在你的类上有一个静态方法。

在 Plone 中提供此类实用程序方法的*常用方法是使用*[ZCA 实用程序注册](http://plone.org/products/dexterity/documentation/manual/five.grok/core-components/utilities)，而不是静态方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:34:57.623

上面的方法看起来很奇怪。您的工具使用 PropertyManager、UniqueObject、SimpleItem 作为基类 - 这意味着您的工具是一个持久对象。所以你想通过使用来掌握这个工具

```
my_tool = getToolByName(self, tool_name)
result = my_tool.my_method() 
```

或者您将您的功能实现为 Zope 实用程序并使用 getUtility() 进行查找。

然而，编写一个持久性工具然后尝试只重视该工具并没有多大意义。如果您的代码不处理持久对象，或者只是一个实用方法，没有考虑核心 Zope 或 Plone 功能：将其设置为没有上述基类的“普通”类，然后将其导入您正在尝试执行的操作。

# ios - 我想在 ios 5 中删除应用程序时输入密码

> ID：11928961
> 
> 赞同：-2
> 
> 时间：2012-08-13T06:10:19.313
> 
> 标签：ios

我正在 iphone 中做一个平台的移动应用程序（主要是 ios 5）我想在我的应用程序被删除时输入密码。有人知道它是如何工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:15:43.707

它不能从 AppStore 应用程序中完成。如果越狱是一个选项，您可以挂钩 SpringBoard 以使用户输入密码。

# c# - 搜索页面从多个表中搜索

> ID：11928970
> 
> 赞同：0
> 
> 时间：2012-08-13T06:11:15.660
> 
> 标签：c#, asp.net

我有一个基本的搜索页面来搜索员工的技能。

在 dbo.Emp 和 dbo.Skill 表之间有一个桥接表，称为“Dbo.Emp_skill_Bridge”。

这是我到目前为止所做的，只允许搜索桥接表。

示例：我需要输入“2”来获取员工的详细信息，并且只能从此表中获取。我有技能可以像“java”一样输入并从 Emp 表中获取员工列表。

```
dbo.Emp_Skill_Bridge
SkillID (FK) | EmpID (FK)

dbo.Skills
SkillName | SkillID(PK)

dbo.Emp
EmpID (PK) | Fname| LName | ..... 
```

所以我需要从 Skills 中搜索 Skills 并获得准确的员工详细信息。
***更新：***

```
protected void Button1_Click(object sender, EventArgs e)
        {

            String var2 = System.Configuration.ConfigurationManager.ConnectionStrings["KKSTechConnectionString"].ConnectionString;
            SqlConnection con = new SqlConnection(var2);

            //SqlCommand cmd = new SqlCommand("select * from Emp_Skill_Bridge where SkillID like '%" + TextBox1.Text + "%' ", con);
            SqlCommand cmd = new SqlCommand("SELECT * FROM Emp_Skill_Bridge ESB INNER JOIN Emp E ON E.EmpId = ESB.EmpId INNER JOIN Skills S ON S.SkillID = ESB.SkillID WHERE ESB.SkillID LIKE '%" + TextBox1.Text + "%' OR ESB.SkillID LIKE '%" + TextBox1.Text + "%'", con);

            //string val = TextBox1.Text.ToString();

            con.Open();

            cmd.ExecuteNonQuery();
            SqlDataAdapter da = new SqlDataAdapter();
            da.SelectCommand = cmd;
            DataSet ds = new DataSet();
            da.Fill(ds, "Emp");
            GridView1.DataSourceID = null;
            GridView1.DataSource = ds;
            GridView1.DataBind();
            con.Close(); 
        } 
```

代码正在工作，但不是 GridView 没有显示数据..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:27:51.110

我们有 Int.Parse 方法，当提供的字符串可以解析为 int 时返回**true ，否则返回****false**。

因此，当您需要检查文本框中的输入值是字符串还是数字时，如果它的数字搜索基于**SkillID**列，或者它的字符串搜索基于列**SkillName**。

```
string strcommand = string.Empty;
int num;
bool result = int.TryParse(txtboxsearch.Text, out num);
if (result == true)
{
strcommand = "SELECT * FROM Emp_Skill_Bridge ESB INNER JOIN  Emp E ON "+
          "E.EmpId = ESB.EmpId INNER JOIN  Skills S ON " +
          "S.SkillID = ESB.SkillID WHERE ESB.SkillID = " + TextBox1.Text ;
}
else
{
    strcommand = "SELECT * FROM Emp_Skill_Bridge ESB INNER JOIN  Emp E " + 
                 "ON E.EmpId = ESB.EmpId INNER JOIN  Skills S ON " +
                 "S.SkillID = ESB.SkillID WHERE ESB.SkillName  like '%" + TextBox1.Text + "%'" ;

}

SqlCommand cmd = new SqlCommand(strcommand ,con); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:27:17.410

如果我正确理解了这个问题

```
 //From this query you will get the skill ID
select * from Emp_Skill_Bridge where SkillID like '% + TextBox1.Text +"%' "
//save the result of this query in a variable and pass it to the below query. Example I save the skill iD in a variable myskillid.

//To get the employee you have to pass teh skillID in the employee table, you have to write   another query
select * from Emp where skillID = myskillId

 //It is better to write a store procedure and use them in your code
 Create procedure getskill 
 @skill bigint -- change it to your column's type
 AS
    Declare @skillid bigint -- change it to your column's type
    set @skillid = ( select * from Emp_Skill_Bridge where SkillID like '%' + skillid +'%'  );
    select * from Emp where skillID = @skillid

  // and in your code you have to make the following changes
   SqlCommand cmd = new SqlCommand();
   cmd.CommandText = getskill; // procedure name
   cmd.CommandType = CommandType.StoredProcedure;
   cmd.Connection = con; // give the connection object
        con.Open(); // open the connection

        cmd.ExecuteNonQuery();
        SqlDataAdapter da = new SqlDataAdapter();
        da.SelectCommand = cmd; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:18:36.267

如果我对您的理解正确，您可以加入这两个表并编写一个查询，其中包含一个 OR 关键字，将用户输入与 WHERE 条件中的技能和 id 列进行比较

```
SELECT * FROM Emp_skill_Bridge ESB
INNER JOIN Emp E
ON E.Id = ESB.Id
INNER JOIN Skill S
ON S.Id = ESB.SkillId
WHERE SkillID LIKE '% + TextBox1.Text + %' 
OR SkillID LIKE '% + TextBox1.Text + %' 
```

我试图在没有数据库结构的情况下即兴创作，但类似上述工作的东西应该可以工作。你可能需要稍微调整一下，因为我没有测试它。

# c# - 如何提高读写大文本文件的性能？

> ID：11928971
> 
> 赞同：2
> 
> 时间：2012-08-13T06:11:16.063
> 
> 标签：c#, performance, io

我编写了一个程序来清理我几个月来收集的一些财务数据。它总共大约 100GB 并且每天都在增长，每个文件大约 1-2GB。它当前以文本文件格式存储。

下面的代码用于清理数据：

```
 static void Main()
    {
        string inputString;
        string outputString;

             // others variable omitted

        string[] lineSplit;

        foreach (string fullPath in Directory.GetFiles(inputDirectory))
        {

            using (StreamReader reader = new StreamReader(fullPath))        //read from input file
            {
                while ((line = reader.ReadLine()) != null)
                {
                          //logic to clean data

                                ...

                         ///////////////////////////////////////////////////////////

                    using (StreamWriter writer = File.AppendText(outputFile))
                    {
                        writer.WriteLine(outputString);
                    }
                }
            }
        }       
    } 
```

它非常慢，我估计 100GB 的数据大约需要 3-4 天才能完成。我知道这是关于我的 IO 操作，因为我没有缓冲区等来做。我对 C# 还是比较陌生，我找不到任何相关示例来为 IO 构建适当的缓冲区。我发现的大多数示例都是用于下载的，不适用于阅读文本文件。而且我无法将整个文件加载到内存中进行处理，因为它太大了。我该怎么做？谁能给我一些我可以使用的代码片段？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T06:13:03.303

您正在重新打开*每一行*的输出文件。将循环移动到以调用开头的块*内部*`File.AppendText`：

```
using (TextReader reader = File.OpenText(fullPath))
{
    using (TextWriter writer = File.AppendText(outputFile))
    {
         while ((line = reader.ReadLine()) != null)
         {
             // Logic to clean data
            writer.WriteLine(outputString);
         }
    }
} 
```

当然，这假设每个输入文件都有一个输出文件。如果不是这种情况 - 如果每一行可以转到一个小集合中的不同文件 - 您可能希望保持所有输出文件打开，并只保留一个字典（或类似的东西），以便您可以快速写入任何您想要的.

# minidump - 子进程崩溃时如何为它创建一个小型转储？

> ID：11928972
> 
> 赞同：1
> 
> 时间：2012-08-13T06:11:21.370
> 
> 标签：minidump

当我的进程出现异常时，我有代码可以[输出一个小型转储](https://stackoverflow.com/questions/1547211/how-to-create-minidump-for-my-process-when-it-crashes)，但我想将该代码移动到父进程，这样一个进程就不会破坏另一个进程。

**（1.）**如何从包装进程中监听子进程崩溃，以及**（2.）**编写一个小型转储结果？

C++ 似乎是包装程序最自然的语言选择，但 .NET 对我来说也是一种选择（我的应用程序是混合 C#/C++）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:25:16.333

据我所知，只有两种方法可以做到这一点。一种是使用调试 API 来“调试”子进程并在遇到异常时编写一个小型转储。我从未尝试过，但我听说它可能会导致问题，因为调试器 API 并不是真的打算以这种方式使用。

另一种是提前在父子进程之间建立通信通道，然后在子进程中注册一个未处理的异常过滤器，通知父进程写一个minidump。Firefox 和 Chrome 都使用此方法通过 Breakpad 库对其子进程进行异常处理。如果您想使用 Breakpad，那么您将在父进程中使用[CrashGenerationServer](http://code.google.com/p/google-breakpad/source/browse/trunk/src/client/windows/handler/exception_handler.h#173)类，并在子进程中使用[ExceptionHandler 构造函数](http://code.google.com/p/google-breakpad/source/browse/trunk/src/client/windows/handler/exception_handler.h#173)，该构造函数将管道名称或管道句柄作为与 CrashGenerationServer 的通信通道的另一端.

# javascript - 使用 jqGrid 更改添加表单的 CSS

> ID：11928974
> 
> 赞同：3
> 
> 时间：2012-08-13T06:11:26.797
> 
> 标签：javascript, jquery, css, jquery-ui, jqgrid

我想更改[jqGrid](http://www.trirand.com/blog/)添加表单的[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)。是否有任何方法可用于在 jqGrid 的添加表单的链接中更改完整的 CSS？

我想为添加表单导入另一个 CSS 文件并申请该添加表单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T15:59:44.793

所有使用 jqGrid 来添加/编辑表单的 CSS 样式，您可以在[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.0/css/ui.jqgrid.css#L99-119)和[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.0/css/ui.jqgrid.css#L88-98)找到。如果您检查这些行并检查任何 jqGrid 表单的 HTML 片段，您将看到 jqGrid 使用的所有类。

我不明白你在“导入另一个CSS”下的意思。只有当您在某个地方有其他 CSS 样式具有相同的类名和相同的元素层次结构（潜水、表格、tr 等元素）时，“导入”才会起作用。所以jqGrid使用的表单样式是可以改变的，但是样式的调整就不那么容易了。您必须检查 jqGrid 对话框（表单）的结构才能进行更改。

**更新：** jqGrid 使用 jQuery UI 样式。因此，您只需将 jQuery UI 更改为另一个，jqGrid 就会使用它。

例如[演示（从](http://www.ok-soft-gmbh.com/jqGrid/CellColorLeFrog1.htm)[答案](https://stackoverflow.com/a/4943722/315935)中对旧演示的简单修改）产生以下编辑表单：

![在此处输入图像描述](../Images/24e998a260a1e762c7cb889d0fc2c326.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T09:46:23.770

在您的情况下，我建议您添加`id`标签`<body>`并更改它而不是更改文件。您可以通过在每个文件中的[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)`.bodyClass1`选择器之前添加来操作它。

**例子**

**样式1.css**

```
.bodyClass1 .C1{ ... }
.bodyClass1 .C2{ ... } 
```

**样式2.css**

```
.bodyClass2 .C1{ ... }
.bodyClass2 .C2{ ... } 
```

因此，当您的[HTML](http://en.wikipedia.org/wiki/HTML)使用`style1.css`并且您想要将其更改为 时`style2.css`，您只需使用：

### [jQuery](http://en.wikipedia.org/wiki/JQuery)

```
$('body').removeClass('bodyClass1');
$('body').addClass('bodyClass2'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T09:42:32.270

尝试`$('#myItemID').css( propertyName , value )`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T09:43:18.310

您不能在不影响整个页面的情况下更改样式表。

我能想到的唯一方法是使用 iframe，但这会有点笨拙。

您可以将一个类添加到父 div，然后将 css 文件更改为类似

```
.sheet1 .c1 {
    border: 1px solid #000
} 
```

在第一张纸和

```
.sheet2 .c1 {
    border: 3px solid #f00;
} 
```

在第二。那么你的标记将是：

```
<div class="sheet1"> <!-- parent div -->
    <div class="c1">Hello!</div>
</div> 
```

`sheet1`将父 div 中的类更改为`sheet2`，子 div 会发生变化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T09:45:42.553

您不能将不同的样式表应用于页面的不同部分。

您最好在 css 文件中包含两个类，例如 C1 和 C2，然后通过使用 id 来更改相关 div 的类，例如：

```
<div id="mydiv" class="c1"> </div>

$('#mydiv').addClass('c2');
$('#mydiv').removeClass('c1'); 
```

# java - 解析“类似 SQL”的查询字符串

> ID：11928979
> 
> 赞同：3
> 
> 时间：2012-08-13T06:12:00.967
> 
> 标签：java, parsing

对于我们产品的 Web 服务接口，我们定义了类似查询字符串的 sql。它们不遵循确切的 sql 语法。它是这样工作的。字符串存在于 xml 请求中。我的应用程序正在解析字符串并根据内容创建 Java 对象。这些 java 对象用于查询数据库。以下是查询字符串的几个示例：

```
 objectType==device && deviceType==mobile && returnType==full
 objectType==device && deviceType==computer && deviceState==connected && returnType==basic
 objectType==networkEntity && namePattern==*.nw && networkEntityType==SGSN 
```

键（例如 objectType）和值（设备/网络实体）通常是枚举的。所以解析机制的期望是：

1.  如果查询字符串中有任何未知元素（键/值），它应该会失败。
2.  元素（键/值）应该以定义的顺序出现（这只是为了简化解析逻辑）
3.  未来，除了“==”和“&&”之外，可能还会引入其他操作。
4.  键/值的不同组合可能会导致大量唯一查询字符串。

现在我正在使用 String.split 和 Scanner 的组合来解析字符串。但是，我发现代码变得越来越复杂且难以调试。到目前为止，我还没有介绍任何主要的验证。有了这个，我期望代码变得更加复杂和“丑陋”。

[问题] 是否有任何库可以帮助我解析此类字符串。任何其他建议/想法也将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T07:55:27.857

有几个 Java 库用于将输入数据解析为对象树。尤其：

*   [JParsec](https://github.com/jparsec/jparsec) - 解析器组合框架（[教程](https://github.com/jparsec/jparsec/wiki/Tutorial)）。
*   [ANTLR](http://www.antlr.org/)（另一种语言识别工具）——一种语言工具，它提供了一个框架，用于从语法描述（[教程](http://www.antlr.org/wiki/display/ANTLR3/Five+minute+introduction+to+ANTLR+3)）构建识别器、解释器、编译器和翻译器。
*   [JavaCC](http://javacc.java.net/) -（[教程](https://www.ibm.com/developerworks/data/library/techarticle/dm-0401brereton/)）。

这取决于您的偏好和背景使用哪一个。JParsec 仅使用本机 Java 语言构建解析器（没有外部语法文件等），另外两个从语法描述文件生成解析器。

使用这样的解析器库一开始可能看起来有点吓人，但它并不难，它会为你省去很多调试和维护自己的解析器的麻烦。而且如果你以后需要改进语言（添加新的运算符、运算符优先级、括号等），这将非常容易。

另请参见[Java 的 Yacc 等效项](https://stackoverflow.com/questions/1639512/yacc-equivalent-for-java)

# filesystems - VFAT 和 FAT32 文件系统有什么区别？

> ID：11928982
> 
> 赞同：89
> 
> 时间：2012-08-13T06:12:19.233
> 
> 标签：filesystems, fat32, fat

我搜索了互联网，但找不到任何令人信服的答案；

文件系统 VFAT 和 FAT32 是否相同，或者它们之间有什么区别？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-08-13T06:14:43.627

复制自[http://technet.microsoft.com/en-us/library/cc750354.aspx](http://technet.microsoft.com/en-us/library/cc750354.aspx)

> ### 什么是脂肪？
> 
> FAT 可能听起来像是一个奇怪的文件系统名称，但它实际上是 File Allocation Table 的首字母缩写。FAT 于 1981 年推出，在计算机术语中是古老的。由于其年代久远，大多数操作系统（包括 Microsoft Windows NT®、Windows 98、Macintosh OS 和某些版本的 UNIX）都提供对 FAT 的支持。
> 
> FAT 文件系统将文件名限制为 8.3 命名约定，这意味着文件名在句点之前不能超过八个字符，在句点之后不能超过三个。FAT 文件系统中的文件名也必须以字母或数字开头，并且不能包含空格。文件名不区分大小写。
> 
> ### VFAT 怎么样？
> 
> 也许您还听说过称为 VFAT 的文件系统。VFAT 是 FAT 文件系统的扩展，是在 Windows 95 中引入的。VFAT 保持与 FAT 的向后兼容性，但放宽了规则。例如，VFAT 文件名最多可以包含 255 个字符、空格和多个句点。尽管 VFAT 保留了文件名的大小写，但它并不区分大小写。
> 
> 当您使用 VFAT 创建长文件名（长于 8.3）时，文件系统实际上会创建两个不同的文件名。一是实际的长文件名。此名称对 Windows 95、Windows 98 和 Windows NT（4.0 及更高版本）可见。第二个文件名称为 MS-DOS® 别名。MS-DOS 别名是长文件名的缩写形式。文件系统通过获取长文件名的前六个字符（不包括空格），后跟波浪号 [~] 和数字尾符来创建 MS-DOS 别名。例如，文件名 Brien 的 Document.txt 将具有 BRIEN'~1.txt 的别名。
> 
> VFAT 存储其长文件名的方式产生了一个有趣的副作用。当您使用 VFAT 创建长文件名时，它使用一个目录条目作为 MS-DOS 别名，并为长文件名的每 13 个字符使用另一个条目。理论上，一个长文件名最多可以占用 21 个目录条目。根目录有 512 个文件的限制，但如果您要使用根目录中的最大长度长文件名，您可以将此限制减少到仅 24 个文件。因此，您应该非常谨慎地在根目录中使用长文件名。其他目录不受此限制的影响。
> 
> 您可能想知道我们为什么要讨论 VFAT。原因是它变得比 FAT 更普遍，但除了我上面提到的差异之外，VFAT 也有相同的限制。当您告诉 Windows NT 将分区格式化为 FAT 时，它实际上将分区格式化为 VFAT。在 Windows NT 4.0 下您将拥有真正的 FAT 分区的唯一情况是当您使用另一个操作系统（例如 MS-DOS）来格式化该分区时。
> 
> ### FAT32
> 
> FAT32 实际上是 FAT 和 VFAT 的扩展，最初是在 Windows 95 OEM Service Release 2 (OSR2) 中引入的。FAT32 极大地增强了 VFAT 文件系统，但它也有其缺点。
> 
> FAT32 的最大优势在于它极大地增加了可用硬盘空间的数量。为了说明这一点，请考虑 FAT 分区（也称为 FAT16 分区）每个分区只允许一定数量的簇。因此，随着分区大小的增加，集群大小也必须增加。例如，512-MB FAT 分区的簇大小为 8K，而 2-GB 分区的簇大小为 32K。
> 
> 在您考虑到 FAT 文件系统仅在单个集群增量中工作之前，这听起来可能没什么大不了的。例如，在一个 2 GB 的分区上，一个 1 字节的文件将占据整个集群，从而消耗 32K，或者大约是文件应该消耗的空间量的 32,000 倍。此规则适用于硬盘上的每个文件，因此您可以查看可以浪费多少空间。
> 
> 将分区转换为 FAT32 可减少群集大小（并克服 2 GB 分区大小限制）。对于 8 GB 或更小的分区，集群大小减少到仅 4K。可以想象，通过将分区转换为 FAT32 来恢复数百兆字节的情况并不少见，尤其是在分区包含大量小文件的情况下。
> 
> **注意：引用/文章（1999）的这一部分已过时。下面更新了信息报价。**
> 
> *正如我所提到的，FAT32 确实有局限性。不幸的是，它与 Windows 98 和 Windows 95 的 OSR2 版本以外的任何操作系统都不兼容。但是，Windows 2000 将能够读取 FAT32 分区。*
> 
> *另一个缺点是您的磁盘实用程序和防病毒软件必须支持 FAT32。否则，他们可能会将新文件结构解释为错误并尝试更正它，从而破坏过程中的数据。*
> 
> 最后，我应该提一下，转换为 FAT32 是一个单向过程。转换为 FAT32 后，您无法将分区转换回 FAT16。因此，在转换为 FAT32 之前，您需要考虑计算机是否会在双引导环境中使用。我还应该指出，虽然其他操作系统如 Windows NT 不能直接读取 FAT32 分区，但它们可以通过网络读取它。因此，与网络上运行旧操作系统的其他计算机共享存储在 FAT32 分区上的信息是没有问题的。

**[Doktor-J](https://stackoverflow.com/users/393089/doktor-j)在评论中提到的更新（类似于更新过时的答案，以防评论丢失）：**

> 我只想指出，大多数现代操作系统（WinXP/Vista/7/8、MacOS X，如果不是所有 Linux 变体的话，大多数）都可以读取 FAT32，这与倒数第二段所暗示的相反。
> 
> 最初的文章写于 1999 年，发布在 Microsoft 网站上，可能与非 Microsoft 操作系统无关。
> 
> 该段“排除”的操作系统可能是最初的 Windows 95、Windows NT 4.0、Windows 3.1、DOS 等。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2019-10-01T18:54:11.350

`FAT32`和`FAT16`和`FAT12`是文件系统类型，但`vfat`和`umsdos`和`msdos`是驱动程序，用于在 Linux 中挂载 FAT 文件系统。驱动程序的选择决定了某些功能如何应用于文件系统。例如，安装了`msdos`驱动程序的系统没有长文件名（它们使用[8.3 格式](https://en.wikipedia.org/wiki/8.3_filename)）。`vfat`是当今最常用的挂载 FAT32 文件系统的驱动程序。

来源：[这篇维基百科文章](https://en.wikipedia.org/wiki/FAT_filesystem_and_Linux)

`df`命令的输出`lsblk`确实显示`vfat`为文件系统类型。但`sudo file -sL /dev/<partition>`显示`FAT (32 bit)`文件系统是否为 FAT32。

您可以通过运行来确认`vfat`是模块而不是文件系统类型`modinfo vfat`。

# extjs - ExtJS 从内部访问表单

> ID：11928986
> 
> 赞同：0
> 
> 时间：2012-08-13T06:12:52.570
> 
> 标签：extjs

**ExtJS 4.1**

我有`Ext.Form.Panel`并且`Ext.Button`在它里面一定要与`formBind: true;`. 有没有办法从按钮的处理程序中访问带有按钮绑定的表单`getForm()`或其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:30:53.250

您可以通过按钮向上查询。

```
{
    xtype:'button',
    handler: function (button, e) {
        button.up('form').getForm();
    }
} 
```

# xcode - 在 Xcode 的导航栏左侧添加一个按钮

> ID：11928997
> 
> 赞同：0
> 
> 时间：2012-08-13T06:13:40.680
> 
> 标签：xcode, button, uinavigationbar, ios5.1

我想在导航栏的左侧创建一个按钮，单击它后，用户将被带到另一个页面。但是我无法让它工作。下面是我的代码。请帮忙！

```
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelEdit:)]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:15:15.903

尝试这个。

```
UIBarButtonItem *leftItem = [[UIBarButtonItem alloc]
                                initWithTitle:@"Left"
                                style:UIBarButtonItemStyleBordered
                                target:self
                                action:@selector(leftItemAction)];
UIBarButtonItem *rightItem = [[UIBarButtonItem alloc]
                               initWithTitle:@"Right"
                               style:UIBarButtonItemStyleBordered
                               target:self
                               action:@selector(rightItemAction)];
self.navigationItem.rightBarButtonItem = rightItem;
self.navigationItem.leftBarButtonItem = leftItem;

- (void)leftItemAction
{
...
}

- (void)rightItemAction
{
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:16:28.953

我已使用此代码添加保存按钮

```
UIButton *button2 = [UIButton buttonWithType:UIButtonTypeCustom];
[button2 setBackgroundImage:[UIImage imageNamed:@"save.png"] forState:UIControlStateNormal];
button2.frame = CGRectMake(0, 0, 100, 31);
[button2 addTarget:self action:@selector(onSave:) forControlEvents:UIControlEventTouchUpInside];    
saveButton = [[UIBarButtonItem alloc]initWithCustomView:button2];
self.navigationItem.leftBarButtonItem = saveButton; 
```

# java - JTextField 自动完成错误

> ID：11928999
> 
> 赞同：1
> 
> 时间：2012-08-13T06:14:05.083
> 
> 标签：java, autocomplete, nullpointerexception, jtextfield, swingx

在[这个线程](https://stackoverflow.com/q/11919914/1547699)中，我找到了一种在 a 中实现`AutoComplete`功能的方法`JTextField`（并且`JComboBox`，但没有问题）。

当尝试在 a 中实现此功能时，`JTextField`它会引发一些异常。以下代码将演示该问题。它是如此简单，与我使用的方式非常相似，效果`JComboBox`很好。

有人可以帮我找到解决方案。

这是代码：（
请*注意我正在使用`swingx`*）

```
import javax.swing.JList;
import org.jdesktop.swingx.JXFrame;
import org.jdesktop.swingx.JXTextField;
import org.jdesktop.swingx.autocomplete.AutoCompleteDecorator;

public class ErrorDemo {

    public static void main(String[] args) {
        JXFrame frame = new JXFrame("Error Demo");
        JXTextField field = new JXTextField();
        String[] users = {"aaa", "bbb", "ccc"};
        AutoCompleteDecorator.decorate(new JList(users), field);

        frame.getContentPane().add(field);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setDefaultCloseOperation(JXFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

这是我收到的错误消息：（
有点*长：D*）

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at org.jdesktop.swingx.autocomplete.ListAdaptor.valueChanged(ListAdaptor.java:76)
    at javax.swing.JList.fireSelectionValueChanged(JList.java:1765)
    at javax.swing.JList$ListSelectionHandler.valueChanged(JList.java:1779)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:167)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:147)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:194)
    at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSelectionModel.java:388)
    at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSelectionModel.java:398)
    at javax.swing.DefaultListSelectionModel.setSelectionInterval(DefaultListSelectionModel.java:442)
    at javax.swing.JList.setSelectedIndex(JList.java:2179)
    at javax.swing.JList.setSelectedValue(JList.java:2295)
    at org.jdesktop.swingx.autocomplete.ListAdaptor.setSelectedItem(ListAdaptor.java:98)
    at org.jdesktop.swingx.autocomplete.AutoCompleteDocument.setSelectedItem(AutoCompleteDocument.java:317)
    at org.jdesktop.swingx.autocomplete.AutoCompleteDocument.insertString(AutoCompleteDocument.java:265)
    at javax.swing.text.JTextComponent.replaceSelection(JTextComponent.java:1358)
    at javax.swing.text.DefaultEditorKit$DefaultKeyTypedAction.actionPerformed(DefaultEditorKit.java:859)
    at javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1636)
    at javax.swing.JComponent.processKeyBinding(JComponent.java:2849)
    at javax.swing.JComponent.processKeyBindings(JComponent.java:2884)
    at javax.swing.JComponent.processKeyEvent(JComponent.java:2812)
    at java.awt.Component.processEvent(Component.java:5815)
    at java.awt.Container.processEvent(Container.java:2058)
    at java.awt.Component.dispatchEventImpl(Component.java:4410)
    at java.awt.Container.dispatchEventImpl(Container.java:2116)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1848)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:697)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:962)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:834)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:661)
    at java.awt.Component.dispatchEventImpl(Component.java:4282)
    at java.awt.Container.dispatchEventImpl(Container.java:2116)
    at java.awt.Window.dispatchEventImpl(Window.java:2429)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:273)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:183)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:173)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:168)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:160)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:121) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:24:55.007

您的代码不`JList`涉及任何内容。我认为它应该读成这样...

```
 org.jdesktop.swingx.autocomplete.AutoCompleteDecorator.decorate(field, Arrays.asList(users), false); 
```

如果您想将 a 绑定`JList`到 a `TextField`（以便文本字段将更新对 的选择`JList`），您想要`decorate(JList list, JTextComponent textComponent, ObjectToStringConverter stringConverter)`...