# StackOverflow 问答 11480000-11480999

# java - Java hashCode方法最大返回值

> ID：11480009
> 
> 赞同：6
> 
> 时间：2012-07-14T00:39:10.233
> 
> 标签：java, hash

有人能告诉我`int`Java`String.hashCode()`方法可以返回的最大值和最小值是多少吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T00:44:16.720

`String.hashCode ()`返回`int`使用以下公式计算的：

> ### [公共 int hashCode()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#hashCode%28%29)
> 
> 返回此字符串的哈希码。
> 
> > String 对象的哈希码计算为
> > 
> > ```
> > s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1] 
> > ```
> > 
> > 使用 int 算术，其中`s[i]`是字符串的第*i*个字符，*n*是字符串的长度，^ 表示求幂。（空字符串的哈希值为零。）

* * *

可以使用以下常量找到最小值和最大值。

```
 System.out.println (java.lang.Integer.MAX_VALUE); //  2147483647
 System.out.println (java.lang.Integer.MIN_VALUE); // -2147483648 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T00:46:28.423

Java int 是 4 个字节，有符号（二进制补码）。-2,147,483,648 至 2,147,483,647。像所有数字类型一样，int 可以转换为其他数字类型（byte、short、long、float、double）。当有损转换完成时（例如 int 到 byte），转换是以较小类型的长度为模完成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T00:44:03.613

从文档中，鉴于某些东西的提升取决于字符串的长度（据我所知，这实际上是无限的），我会说最大值和最小值必须是 Integer.MAX_VALUE (2^31 - 1) 和 Integer.MIN_VALUE (-2^31)，分别。

# mongodb - MongoDB 中的 ROW_NUMBER() 和 RANK()

> ID：11480010
> 
> 赞同：0
> 
> 时间：2012-07-14T00:39:21.670
> 
> 标签：mongodb, mongodb-.net-driver

我有一个具有以下架构的产品表

```
 (ProductID INT, ProductStartDate date, ProductExpDate date, 
ProductTypeID int, #PacketsInProduct int, 
Price int, Discount int, Score int) 
```

我需要在 MongoDB 中编写类似这样的查询。我正在使用 C# 驱动程序 1.5。我在下面的第一个 CTE (Products_CTE) 中遇到的问题，其中 Row_NUMBER() 正在根据我需要过滤第二个 CTE 中的行的排名来决定与我的 where 条件匹配的产品排名。我所有的条件都是动态的，任何人都可以在这里帮助我。提前致谢

```
;WITH Products_CTE
            AS
            (
                SELECT
                    ROW_NUMBER() OVER(PARTITION BY ProductID ORDER BY Score Desc, Price Asc) as RankByProduct,
                    *
                FROM Products
                     WHERE 
                          ProductID IN (1,2,3)
                          AND ProductTypeID IN (001,002)
                          AND [#PacketsInProduct] >3 and [#PacketsInProduct] <10
                         and ProductExpDate < GETDATE()

            ),
            Products2_CTE
            AS
            (
                SELECT 
                    ROW_NUMBER() OVER (ORDER BY Score DESC, Price ASC) as rownum,
                    *
                FROM Products_CTE
                WHERE RankByProduct <= 3
            )
            SELECT
                *
                    from Products2_CTE cte1
            where rownum  BETWEEN 15 AND 25
                ORDER BY [Score] DESC, [Price] ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:39:53.623

此查询将要求您构建一个 map/reduce。在此处查看文档：[http](http://www.mongodb.org/display/DOCS/MapReduce) ://www.mongodb.org/display/DOCS/MapReduce 。

如果您在构建 map/reduce 时需要一些帮助，请告诉我，我会尽力而为。不过，我鼓励您先自己尝试一下。请注意，map/reduce 不适用于实时查询，因此您需要对结果进行快照，这意味着您正在使用最终一致的数据，并且业务需要了解它并接受它。

此外，您的架构可能会根据您的需要针对此类查询进行优化。以与将数据存储在关系数据库中相同的方式将数据存储在 mongodb 中几乎从来都不是正确的选择。如果这是正确的选择，那么无论如何您都应该坚持使用关系模型。

# mysql - 具有主键的关键字以生成唯一 ID

> ID：11480013
> 
> 赞同：1
> 
> 时间：2012-07-14T00:39:44.453
> 
> 标签：mysql

我可以使用什么关键字与主键一起为表中的每个新行生成唯一 ID？

UNIQUE_ID AUTO_INCREMENT INCREMENT_ID AUTO_INCREMENT_ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:52:28.310

[AUTO_INCREMENT](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)是最好的（也可能是唯一的）选择。

# excel - SUMPRODUCT( SUMIF() ) - 这是如何工作的？

> ID：11480017
> 
> 赞同：6
> 
> 时间：2012-07-14T00:40:21.090
> 
> 标签：excel, sum, excel-formula

## 第1部分：

我能够构建一个完全符合我要求的公式（从一些示例中），但是，我无法弄清楚它是如何工作的。我有，从单元格 A1 开始：

```
Price   $
table   20
chair   10

Invoice Quantity
table   17
chair   1
chair   2
table   3 
```

我想要的是发票的最终总数（430），计算为每件商品的数量*价格（17*20 + 1*10 + 2*10 + 3*20）。以下公式正确地做到了这一点：

```
=SUMPRODUCT(B6:B9,SUMIF(A2:A3,A6:A9,B2:B3)) 
```

我了解 SUMPRODUCT 和 SUMIF 的基础知识。但是在这里，我对 SUMIF 范围的论点是 A2:A3，这让我认为 SUMIF 将遍历 A2 和 A3，而不是遍历 A8:A11（这是标准）。是什么赋予了？

**编辑：不清楚的部分是，当前两个参数具有不同的维度（这里，范围是 2 个单元格，而标准是 4 个单元格）时，SUMIF 究竟做了什么（它的迭代模式是什么）。另外，SUMIF 的“输出”是什么？数组？属于什么维度？**

## 第2部分：

此外，如果我忽略数量，只想在看到桌子时添加 20 并且每当看到椅子时添加 10，我想我会这样做：

```
=SUMIF(A2:A3,A6:A9,B2:B3) 
```

但这不起作用，我必须用 SUMPRODUCT() 将它括起来才能正常工作并正确评估为 60。将它包含在 SUM 中也不起作用（可能是因为 SUMIF 不返回数组？ ） 为什么？

我已经阅读了很多教程，但仍然无法理解这一点，并且非常感谢您对这两种情况进行清晰，直观的解释。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T05:25:54.613

`SUMIF`可以产生一系列结果。如果你采用我的公式
`=SUMIF(A6:A9,A2:A3,B6:B9)`
，它会说

对于 A2（即表）中的条件 - 查看 A6:A9
- 匹配表的位置，将 B6:B9 中的相应值相加
- 返回 20（即 17 +0 +0 +3）
- 这存储在第一个位置数组的

然后对于 A3 中的条件（即椅子）
- 查看 A6:A9
- 匹配表的位置，将 B6:B9 中的相应值相加
- 返回 3（即 0 +1 +2 +0）
- 这存储在第二个数组的位置

所以来自的结束数组`SUMIF`是 {20:3}

*您可以通过在 Excel 的公式栏中突出显示 SUMIF 公式然后按 F9 来查看数组结果*

然后使用B2:B3 中的 $ 值乘以`SUMPRODUCT`计数`SUMIF`以获得总美元

={20;3}*{20:10}
=20*20 + 3*10
= 430

**第 1 部分**
而不是
`SUMIF(A2:A3,A6:A9,B2:B3)`
which 产生
={20;10;10;20}的四元素数组
*（对应于 table;chair;chair;table）*

您应该使用
`SUMIF(A6:A9,A2:A3,B6:B9)`
which 将 B6:B9 中的值与 A2:A3 中的两个标准相加，给出所需的结果
={20;3}
*（对应于 table;chair）*

然后`SUMPRODUCT`用来加权你的数组，即 `=SUMPRODUCT(SUMIF(A6:A9,A2:A3,B6:B9),B2:B3)` ={20;3}*{20:10}
=430

**第 2 部分**
用于返回椅子和桌子数量的数组，然后使用 ={20;10} * {2;2} =60`COUNTIF`乘以 vales`SUMPRODUCT`
`=SUMPRODUCT(B2:B3,COUNTIF(A6:A9,A2:A3))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:27:33.963

那么你只有一个小错误：

> 可能是因为 SUMIF 不返回数组？

SUMIF 可以与数组一起使用，这就是为什么您首先使用公式**SUMPRODUCT( SUMIF() )**的原因，要 SUMIF 显示一个数组，您必须选择一组单元格（如 C6:C9）输入公式并使用 CTRL+SHIFT+ENTER而不是仅 ENTER。这会生成一个“数组公式”，由大括号 {} 标识（只能使用 CTRL+SHIFT+ENTER 输入，不能手动输入）并显示数组公式和结果

# java - JVM/CLR 上相同字节的不同浮点值

> ID：11480023
> 
> 赞同：1
> 
> 时间：2012-07-14T00:41:55.203
> 
> 标签：java, vb.net, floating-point, jvm, clr

我正在将最初用 VB.NET 编写的程序移植到 Java。我正在读取一个以小端顺序存储 32 位浮点数的文件。

原始程序这样做：

```
Dim br As BinaryReader = ...
Dim f_vb As Single = br.ReadSingle 
```

Java 是大端，所以我在转换为浮点数之前反转字节。

```
RandomAccessFile raf = // ...
int i = raf.readInt();
int bigEndian = Integer.reverseBytes(i);
float f_java = Float.intBitsToFloat(bigEndian); 
```

据我所知，`f_vb`并`f_java`包含相同的位。也就是说，`BitConverter.ToInt32`on`f_vb`和`Float.floatToIntBits`(and `floatToRawIntBits`) on`f_java`给出相同的东西。但是，浮点数并不相等。例如，让`bigEndian == 0x4969F52F`. Java 会报告`958290.94`，VB.NET 会报告`958290.938`。我猜这是因为 JVM 和 CLR 处理浮点数的方式不同，但我对浮点问题了解得不够多，无法找出原因。这种精度的损失正在造成麻烦，所以我想确定来源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T03:35:01.573

这些位表示的确切值是 958290.9375。可能是您在 Java 中使用的任何值显示“958290.94”，默认四舍五入到小数点后两位或八位有效数字，而您在 VB.NET 中使用的任何显示“958290.938”，默认四舍五入到小数点后三位或九位有效数字。或者，其中之一可能不擅长将浮点数转换为十进制以进行显示。

如果有显示更多数字的选项，请尝试它们。或者，构造值 958290.9375，从 f_java 中减去它，并测试结果是否正好为零。它应该是。

最接近 958290.9375 的单精度浮点数是 958290.875 和 958291。任何中途格式化程序都不能将它们显示为“958290.94”或“958290.938”，因此您拥有的浮点数不太可能是 958290.9375 以外的任何值。

# c# - 合并重叠的时间间隔？

> ID：11480031
> 
> 赞同：12
> 
> 时间：2012-07-14T00:44:06.183
> 
> 标签：c#, linq

我有以下内容：

```
public class Interval
{
   DateTime Start;
   DateTime End; 
} 
```

我有一个`List<Interval>`包含多个间隔的对象。我正在努力实现以下目标（我使用数字使其易于理解）：

```
[(1, 5), (2, 4), (3, 6)] --->  [(1,6)]
[(1, 3), (2, 4), (5, 8)] --->  [(1, 4), (5,8)] 
```

我目前在 Python 中执行以下操作：

```
def merge(times):
    saved = list(times[0])
    for st, en in sorted([sorted(t) for t in times]):
        if st <= saved[1]:
            saved[1] = max(saved[1], en)
        else:
            yield tuple(saved)
            saved[0] = st
            saved[1] = en
    yield tuple(saved) 
```

但我试图在 C# 中实现相同的效果（LINQ 是最好的但可选的）。关于如何有效地做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-14T02:03:23.010

这是一个使用的版本`yield return`- 我发现它比查询更容易阅读`Aggregate`，尽管它仍然是懒惰的评估。这假设您已经订购了列表，如果没有，只需添加该步骤。

```
IEnumerable<Interval> MergeOverlappingIntervals(IEnumerable<Interval> intervals)
{
  var accumulator = intervals.First();  
  intervals = intervals.Skip(1);

  foreach(var interval in intervals)
  {
    if ( interval.Start <= accumulator.End )
    {
        accumulator = Combine(accumulator, interval);
    }
    else
    {
        yield return accumulator;
        accumulator = interval;     
    }       
  }

  yield return accumulator;
}

Interval  Combine(Interval start, Interval end)
{
  return new Interval 
  {
    Start = start.Start,
    End = Max(start.End, end.End),
  };
}

private static DateTime Max(DateTime left, DateTime right) 
{
    return (left > right) ? left : right;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-17T10:21:25.157

今晚我被“不是在这里创造”综合症所困扰，所以这是我的。使用枚举器直接为我节省了几行代码，使其更清晰（IMO），并处理了没有记录的案例。我想如果你关心它，它也可能会跑得更快......

```
public IEnumerable<Tuple<DateTime, DateTime>> Merge(IEnumerable<Tuple<DateTime, DateTime>> ranges)
{
    DateTime extentStart, extentEnd;
    using (var enumerator = ranges.OrderBy(r => r.Item1).GetEnumerator()) {
        bool recordsRemain = enumerator.MoveNext();
        while (recordsRemain)
        {
            extentStart = enumerator.Current.Item1;
            extentEnd = enumerator.Current.Item2;
            while ((recordsRemain = enumerator.MoveNext()) && enumerator.Current.Item1 < extentEnd)
            {
                if (enumerator.Current.Item2 > extentEnd)
                {
                    extentEnd = enumerator.Current.Item2;
                }
            }
            yield return Tuple.Create(extentStart, extentEnd);
        }
    }
} 
```

在我自己的实现中，我使用一个`TimeRange`类型来存储 each `Tuple<DateTime, DateTime>`，就像这里的其他一样。我没有在这里包含它只是为了保持专注/关注主题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-14T01:24:45.823

这可能不是最漂亮的解决方案，但它也可以工作

```
public static List<Interval> Merge(List<Interval> intervals)
{
    var mergedIntervals = new List<Interval>();
    var orderedIntervals = intervals.OrderBy<Interval, DateTime>(x => x.Start).ToList<Interval>();

    DateTime start = orderedIntervals.First().Start;
    DateTime end = orderedIntervals.First().End;

    Interval currentInterval;
    for (int i = 1; i < orderedIntervals.Count; i++)
    {
        currentInterval = orderedIntervals[i];

        if (currentInterval.Start < end)
        {
            end = currentInterval.End;
        }
        else
        {
            mergedIntervals.Add(new Interval()
            {
                Start = start,
                End = end
            });

            start = currentInterval.Start;
            end = currentInterval.End;
        }
    }

    mergedIntervals.Add(new Interval()
                {
                    Start = start,
                    End = end
                });

    return mergedIntervals;
} 
```

任何反馈将不胜感激。

问候

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T01:53:43.617

这种合并通常被视为函数式语言中的折叠。LINQ 等效项是`Aggregate`.

```
IEnumerable<Interval<T>> Merge<T>(IEnumerable<Interval<T>> intervals) 
  where T : IComparable<T>
{
    //error check parameters
    var ret = new List<Interval<T>>(intervals);
    int lastCount
    do
    {
        lastCount = ret.Count;
        ret = ret.Aggregate(new List<Interval<T>>(),
                    (agg, cur) =>
                    {
                        for (int i = 0; i < agg.Count; i++)
                        {
                            var a = agg[i];
                            if (a.Contains(cur.Start))
                            {
                                if (a.End.CompareTo(cur.End) <= 0)
                                {
                                    agg[i] = new Interval<T>(a.Start, cur.End);
                                }
                                return agg;
                            }
                            else if (a.Contains(cur.End))
                            {
                                if (a.Start.CompareTo(cur.Start) >= 0)
                                {
                                    agg[i] = new Interval<T>(cur.Start, a.End);
                                }
                                return agg;
                            }
                        }
                        agg.Add(cur);
                        return agg;
                    });
    } while (ret.Count != lastCount);
    return ret;
} 
```

我创建了 Interval 类泛型 ( `Interval<T> where T : IComparable<T>`)，添加了一个`bool Contains(T value)`方法，并使其不可变，但如果您想像现在一样使用类定义，则不需要对其进行太多更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-06T12:12:09.780

我使用 TimeRange 作为存储范围的容器：

```
public class TimeRange
{
    public TimeRange(DateTime s, DateTime e) { start = s;  end = e; }

    public DateTime start;
    public DateTime end;
} 
```

它将问题划分为组合两个时间范围。因此，当前时间范围（工作）与之前合并的时间范围相匹配。如果先前添加的时间范围之一已过时，则将其删除并使用新的时间范围（结合工作和匹配的时间范围）。我想出的两个范围 () 和 [] 的情况如下：

1.  [] ()
2.  ([])
3.  [(])
4.  [()]
5.  ([)]
6.  ()[]

    ```
    public static IEnumerable<TimeRange> Merge(IEnumerable<TimeRange> timeRanges)
    {
        List<TimeRange> mergedData = new List<TimeRange>();

        foreach (var work in timeRanges)
        {
            Debug.Assert(work.start <= work.end, "start date has to be smaller or equal to end date to be a valid TimeRange");
            var tr = new TimeRange(work.start, work.end);

            int idx = -1;
            for (int i = 0; i < mergedData.Count; i++)
            {
                if (tr.start < mergedData[i].start)
                {
                    if (tr.end < mergedData[i].start)
                        continue;
                    if (tr.end < mergedData[i].end)
                        tr.end = mergedData[i].end;
                }
                else if (tr.start < mergedData[i].end)
                {
                    tr.start = mergedData[i].start;

                    if (tr.end < mergedData[i].end)
                        tr.end = mergedData[i].end;
                }
                else
                    continue;

                idx = i;
                mergedData.RemoveAt(i);
                i--;
            }

            if (idx < 0)
                idx = mergedData.Count;

            mergedData.Insert(idx, tr);
        }

        return mergedData;
    } 
    ```

# xml - eclipse错误XML结构必须以相同的实体开始和结束

> ID：11480035
> 
> 赞同：0
> 
> 时间：2012-07-14T00:44:15.907
> 
> 标签：xml

是的，因为我已经尝试解决这个错误好几天了，它阻止了我学习 android 开发我总是得到这个错误（在标题中）但是我在我的编码中找不到任何错误任何人都可以帮我解决这个问题在我教我的笔记本电脑如何飞行之前出去谢谢

```
</LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="your total is 0"
android:textSize="45dp"
android:layout_gravity="center"
android:id="@+id/tvDisplay"
></TextView>
<Button
android:layout_width="250dp" 
android:layout_height="wrap_content"
android:text="Add one"
android:layout_gravity="center"
android:textSize="20dp"
android:id="@+id/bAdd"
/>

<Button
android:id="@+id/bSub"
android:layout_width="250dp"
android:layout_height="wrap_content"
android:text="subtract one"
android:textSize="20dp"
android:layout_gravity="center"
/>
</LinearLayout>  **this is where the error line is and am new to this stuff so sorry if its somthing simple ** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:23:35.720

只需从 xml 中的线性布局标记的开头删除“/”即可。

# python - Python 3 将范围转换为列表

> ID：11480042
> 
> 赞同：236
> 
> 时间：2012-07-14T00:45:01.527
> 
> 标签：python, python-3.x, list, range

我正在尝试列出一个包含数字的列表`1-1000`。显然，写/读会很烦人，所以我正在尝试制作一个包含范围的列表。在 Python 2 中，似乎：

```
some_list = range(1,1000) 
```

会起作用，但在 Python 3 中，范围类似于`xrange`Python 2？

任何人都可以对此提供一些见解吗？

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2012-07-14T00:48:39.323

您可以从范围对象构造一个列表：

```
my_list = list(range(1, 1001)) 
```

这也是你在 python2.x 中使用生成器的方式。通常来说，你可能不需要列表，因为你可以得到`my_list[i]`更有效的 ( `i + 1`) 值，如果你只需要迭代它，你可以回退到`range`.

另请注意，在 python2.x 上，`xrange`仍然是可索引的¹。这意味着`range`在 python3.x 上也有相同的属性²

^(¹`print xrange(30)[12]`适用于 python2.x)

^(² python3.x 中与¹类似的语句是`print(range(30)[12])`并且也有效。)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2017-11-02T23:53:12.330

在 Pythons <= 3.4 中，您可以像其他人建议的那样使用`list(range(10))`以使列表超出范围（通常是任何可迭代的）。

在 Python 中引入的另一种替代方法`3.5`及其解包泛化是`*`在列表文字中使用`[]`：

```
>>> r = range(10)
>>> l = [*r]
>>> print(l)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

虽然这等同于`list(r)`，但它是文字语法，并且不涉及函数调用的事实确实让它执行得更快。如果您需要编写高尔夫代码，它的字符也会更少:-)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-02-28T18:38:07.523

在 Python 3.x 中，`range()`函数有自己的类型。所以在这种情况下你必须使用迭代器

`list(range(1000))`

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2018-07-24T12:26:41.767

Python3 之所以缺少直接获取范围列表的功能，是因为最初的 Python3 设计者在 Python2 中相当新手。他只考虑`range()`在 for 循环中使用函数，因此，列表永远不需要扩展。事实上，我们经常需要使用`range()`函数来生成列表并传递给函数。

因此，在这种情况下，Python3 不如 Python2 方便，因为：

*   在 Python2 中，我们有`xrange()`和`range()`;
*   在 Python3 中，我们`range()`有`list(range())`

尽管如此，您仍然可以通过这种方式使用列表扩展：

```
[*range(N)] 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-07-14T00:47:28.170

您真的不需要在列表中使用数字 1-1000。但是如果由于某种原因你真的需要这些数字，那么你可以这样做：

```
[i for i in range(1, 1001)] 
```

简单的列表理解：

上面的列表理解转化为：

```
nums = []
for i in range(1, 1001):
    nums.append(i) 
```

这只是列表理解语法，虽然来自 2.x。我知道这将在 python 3 中工作，但不确定是否也有升级的语法

范围开始包括第一个参数；但结束于，**不包括**第二个参数（当提供 2 个参数时；如果第一个参数不存在，它将从 '0' 开始）

```
range(start, end+1)
[start, start+1, .., end] 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2020-11-10T07:40:35.603

蟒蛇 3：

```
my_list = [*range(1001)] 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-14T00:49:24.843

实际上，如果您想要 1-1000（含），请使用`range(...)`带有参数 1 和 1001:的函数`range(1, 1001)`，因为该`range(start, end)`函数从 start 到 (end-1)，包括在内。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-06T02:34:42.587

在 Python 3 中使用[范围。](https://docs.python.org/3/library/stdtypes.html#range)

这是一个示例函数，它在两个数字之间的数字之间返回

```
def get_between_numbers(a, b):
    """
    This function will return in between numbers from two numbers.
    :param a:
    :param b:
    :return:
    """
    x = []
    if b < a:
        x.extend(range(b, a))
        x.append(a)
    else:
        x.extend(range(a, b))
        x.append(b)

    return x 
```

> 结果

```
print(get_between_numbers(5, 9))
print(get_between_numbers(9, 5))

[5, 6, 7, 8, 9]  
[5, 6, 7, 8, 9] 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2018-02-10T09:44:53.263

实际上，这是 Python3 相对于 Python2 的回溯。当然，使用 range() 和 xrange() 的 Python2 比分别使用 list(range()) 和 range() 的 Python3 更方便。原因是Python3的原设计者不是很有经验，他们只考虑了很多初学者使用range函数来迭代大量元素，内存和CPU效率都很低；但他们忽略了使用 range 函数生成数字列表。现在，他们想要改变已经为时已晚。

如果我要成为 Python3 的设计者，我会：

1.  使用 irange 返回一个序列迭代器
2.  使用 lrange 返回一个序列列表
3.  使用 range 返回序列迭代器（如果元素数量很大，例如 range(9999999) 或序列列表（如果元素数量很小，例如 range(10)）

那应该是最优的。

# php - 无法将字符串插入数组

> ID：11480044
> 
> 赞同：1
> 
> 时间：2012-07-14T00:45:22.790
> 
> 标签：php

我有[这个公认的答案](https://stackoverflow.com/questions/11382444/use-value-of-array-in-for-loop-outside-for-loop/)运作良好，其中第 1 列和第 2 列设置为 varchar。当我将字符串插入表单时，它不会将数据插入我的数据库。我知道这是因为我的字符串周围没有引号，例如“值”，但我不知道如何在 php 中处理它？有人在这里有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:47:42.660

嗯...只需键入`"`值？

```
 $sql2 .= '("' .$_POST['column1'][$i] . '", "' . $_POST['column2'][$i] . '")'; 
```

# android - android imageview需要额外的黑色空间

> ID：11480046
> 
> 赞同：4
> 
> 时间：2012-07-14T00:45:41.737
> 
> 标签：android, imageview

imageview 需要额外的 [黑色] 空间，我不知道为什么

好的，这个图像视图应该包装内容，但是..

[照片说明了问题](http://i.stack.imgur.com/4ORiF.png)

这是代码

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout 
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<ImageView
android:id="@+id/map"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/map" /><ImageView
android:id="@+id/blxx"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:paddingBottom="-20dp"
android:src="@drawable/photo" />

<ImageView
android:id="@+id/blxx"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:src="@drawable/blxx" />

</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-09T16:06:08.800

试试下面的：

```
android:adjustViewBounds="true" 
```

这将删除额外的填充空间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T06:05:31.710

您的问题的第一个可能原因：

有时当图像太小时，它不能再划伤然后一些限制。在该限制之后 - 发生的事情就是你所看到的 - imageView 声称的空白空间，预计图像会出现额外的划痕。我建议你拍更大的照片（更大的分辨率）

第二个可能的原因：

在 xml 文件的 imageView 属性中添加以下属性：

```
android:scaleType="fitXY" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T02:33:21.253

```
android:layout_gravity="center" 
```

上一行将图像居中以适合您的 ImageView。尝试不使用它。如果没有，请将重力设置为“填充”并重试。

如前所述，还要删除 blxx 的副本之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T06:23:58.230

希望这会帮助你

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:layout_gravity="center">

<ImageView
android:id="@+id/map"
android:layout_width="fill_parent"
android:layout_height="fill_content"
android:src="@drawable/map" /> 

</LinearLayout>
</ScrollView> 
```

# window - capybara-webkit (0.8.0) 无法在窗口 7 上构建

> ID：11480048
> 
> 赞同：1
> 
> 时间：2012-07-14T00:45:53.180
> 
> 标签：window, capybara-webkit

我是新手。我正在尝试在窗口 7 上使用本机扩展构建 capybara-webkit (0.8.0)。我已经安装了（路径集）：RubyMine、Ruby SDK 和 Gems、Rails、DevKit、Qt、gmake、g++。但我仍然收到以下错误消息。任何帮助是极大的赞赏。

$ gem install capybara-webkit -v '0.8.0' 临时增强 PATH 以包含 DevKit... 构建原生扩展。这可能需要一段时间... 错误：安装 capybara-webkit 时出错：错误：无法构建 gem 原生扩展。

```
 c:/Ruby193/bin/ruby.exe extconf.rb 
```

c:\Qt\4.8.2\bin\qmake.EXE c:\make\gmake.EXE cd src/ && c:/Qt/4.8.2/bin/qmake.exe c:/Ruby193/lib/ruby/gems /1.9.1/gems/capybara-webkit-0.8.0/src/webkit_server.pro -spec c:/Qt/4.8.2/mkspecs/macx-g++ -o Makef\ile.webkit_server c:\make\gmake. EXE cd src/ && gmake -f Makefile.webkit_server gmake[1]: 进入目录`c:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.8.0/src' g++ -c -管道 -g -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -Ic:/Qt/4.8.2/mkspecs/macx-g++ -I. -Ic:/Qt/4.8.2/include/QtCore -Ic:/Qt/4.8.2/include/QtNetwork -Ic:/Qt/4.8.2/include/QtGui -Ic:/Qt/4.8.2/include /QtWebKit -Ic:/Qt/4.8.2/include -I. -o RequestedUrl.o RequestedUrl.cpp process_begin: CreateProcess((null), g++ -c -pipe -g -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -Ic:/Qt/4.8.2/mkspecs/macx-++。-Ic:/Qt/4.8.2/include/QtCore -Ic:/Qt/4.8.2/include/QtNetwork -Ic:/Qt/4.8.2/include/QtGui -Ic:/Qt/4.8.2/include /QtWebKit -Ic:/Qt/4.8.2/include -I. -o RequestedUrl.o Req uestedUrl.cpp, ...) 失败。make (e=2): 系统找不到指定的文件。

gmake[1]: *** [RequestedUrl.o] 错误 2 gmake[1]: Leaving directory `c:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.8.0/src' c:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1515:in`stat': No such file or directory - src/webkit_server (Errno::ENOENT) from c:/Ruby193/lib/ruby/1.9\. 1/fileutils.rb:1515:in `block in fu_each_src_dest' from c:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1529:in`fu_each_src_dest0' 来自 c:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1513:in `fu_each_src_dest' from c:/Ruby193/lib/ruby/1.9.1/fileutils.rb:395:in`cp' 来自 c:/Ruby193/lib/ruby/gems/1.9.1/ gems/capybara-webkit-0.8.0/lib/capybara_webkit_builder.rb:33:in `build' from c:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.8.0/lib/capybara_webkit_builder.rb:39:in`build_all' 来自 extconf.rb:2:in `'

Gem 文件将继续安装在 c:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.8.0 以供检查。结果记录到 c:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.8.0/./gem_make.out

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T09:42:09.140

我遇到了与此类似的错误，以及以下错误：

`g++.exe: unrecognized option '-headerpad_max_install_names'`

`make[1]: Leaving directory /ruby/gems/shared/gems/capybara-webkit-0.12.1/src'`

`Errno::ENOENT: No such file or directory - C:/JRuby/lib/ruby/gems/shared/gems/capybara-webkit-0.12.1/src/webkit_server`

`LoadError: no such file to load`

`No such file or directory - C:/Ruby/capybara-webkit-0.12.1/src/webkit_server`

基本上，所有这些错误的答案与您在 Windows 上安装的 capybara-webkit 版本有关，具体取决于 QT 的正确版本，以及 mingw 工具集中包含的 g++ 编译器的正确版本。必须安装正确的版本并将正确的 bin 目录添加到您的 Windows 路径中。

另外，`RbConfig::CONFIG['host_os']`在 Windows 8 上返回“mswin32”而不是“mingw32”存在一些问题。因此，您必须将 capybara_webkit_builder.rb 和 spec_helper.rb 修复为以下内容：`/mingw32|mswin32/`. 如果你不这样做，那么你将运行 macx-g++，它不能在 Windows 上运行。您必须在 Windows 上运行 win32-g++。

如果您使用的是 JRuby，则`RUBY_PLATFORM`设置为“java”。因此，您必须将相应的 capybara_webkit_builder.rb 和 connection.rb 更改为`/mingw32|java/`. 如果您不这样做，那么二进制文件将编译（但连接中存在错误）但编译器将因找不到 webkit-server 错误而崩溃。

您必须遵循[https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit上的安装脚本](https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit)

在 Windows 上的最后一条指令中，您必须“cd”到 gem 目录，然后运行

```
bundle exec gem install capybara-webkit-0.12.1.gem 
```

或您构建的任何版本。

因此，答案是获取每个依赖项的所有正确版本，修复错误，确保 windows 路径变量指向正确版本的 g++ 编译器（更改路径变量后不要忘记重新启动 cmd），然后确保您在运行命令时位于正确的目录中。

# xcode - 为什么代码签名身份没有列出我的证书？

> ID：11480049
> 
> 赞同：5
> 
> 时间：2012-07-14T00:46:20.713
> 
> 标签：xcode

我正在使用 Xcode 4 并试图签署我的第一个 Mac OS X 应用程序。当我转到 时`Project -> Build Settings -> Code Signing Identity`，它会列出“不签名”、“自动配置文件选择器”和“其他”。在“自动配置文件选择器”下，它列出了“3rd Party Mac Developer Application”。当我构建它失败并说“代码签名错误：

> 身份“第 3 方 Mac 开发人员应用程序”与默认钥匙串中的任何有效证书/私钥对不匹配

早些时候，在 中`Organizer -> Provisiong Profiles`，我进行了刷新。它在 `Device -> Developer Profile`. 配置文件中不显示任何内容。它在开发者资料中显示的两个证书有效地存在于我的钥匙串中。即使我“显示已过期”，我也看不到任何过期的证书。

它在 Developer Profile 中的证书与钥匙串中的证书相匹配：

> 第 3 方 Mac 开发人员安装程序：MyCompany, LLC
> 
> Mac 开发人员：我的名字 (SOMECODE)

不过，我在代码签名身份列表中看不到这些。我什至尝试在其他中输入第一个，但它说找不到。

我不需要权利，所以我没有配置文件设置。我是公司管理员。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:41:11.560

好吧，事实证明这比我想象的要简单得多。

刷新并下载证书后：

1) 点击设备下的我的 Mac。然后单击“添加到门户”。这将下载 Mac 团队配置通配符配置文件

2）通过网站为我的应用程序创建一个应用程序 ID（沙盒/权利所必需的）

3) 通过网站为这个 App ID 添加一个新的 Developer Provisioning Profile

4) 转到管理器并刷新。

现在一切都出现了。

* * *

但是，我意识到对于没有沙盒/权利的 Mac 应用程序，我真的不需要这样做。我本可以只创建生产配置文件，因为它不需要注册设备。

# django - 使用 django.contrib.auth，我怎样才能让用户知道他们登录失败的原因？

> ID：11480051
> 
> 赞同：2
> 
> 时间：2012-07-14T00:46:26.893
> 
> 标签：django, django-authentication

我需要在登录尝试失败时显示一条错误消息，说明用户是否处于非活动状态、密码不正确或未找到用户。我正在针对 API 进行身份验证，因此我创建了一个自定义身份验证后端。目前，为了证明客户端登录正常，我让它引发了异常，称为 UserNotFoundError、InactiveUserError 和 InvalidPasswordError。

我很确定这不是正确的方法，如果我想使用 Django 的身份验证视图，我无论如何也无法捕捉到这些异常。

我假设我需要创建自己的身份验证视图。但是，有没有更好的方法？

*（我知道给出登录失败的原因并不安全，但我必须这样做。）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T02:02:51.727

这是完全未经测试的，也不能保证工作，但你可以尝试这些方面的东西。此解决方案的唯一警告是您的后端必须是最后使用的身份验证后端（或唯一使用的）。

contrib.auth.views.authenticate 方法接受 authentication_form 的参数，这意味着您应该能够使用您自己的扩展 contrib.auth.forms.AuthenticationForm 的表单来覆盖它。这种形式就是调用后端的 authenticate() 方法。因此，在您的后端，您可以返回一些自定义对象，其中包含用户实例以及身份验证失败的“失败”状态和“失败原因”。

如果您的自定义对象处于失败状态，您可以抛出带有异常的 ValidationError，此时登录视图不会对用户进行任何进一步的处理。

还要确保覆盖 form.get_user() 以便它返回实际的 User 实例，而不是您的自定义对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:15:10.023

或者只是覆盖 login()，如下所示：

```
from django.conf import settings
from django.contrib import messages
from django.contrib.auth.decorators import login_required
from django.contrib.auth.views import logout
from django.http import HttpResponseRedirect
from django.template.response import TemplateResponse
from django.utils.translation import ugettext as _
from django.views.decorators.debug import sensitive_post_parameters
from django.views.decorators.cache import never_cache
from django.views.decorators.csrf import csrf_protect

# Avoid shadowing the login() and logout() views below.
from django.contrib.auth import REDIRECT_FIELD_NAME, login as auth_login
from django.contrib.auth.forms import AuthenticationForm
from django.contrib.sites.models import get_current_site

# App specific
from axes.models import AccessAttempt

@sensitive_post_parameters()
@csrf_protect
@never_cache
def login(request, template_name='registration/login.html',
          redirect_field_name=REDIRECT_FIELD_NAME,
          authentication_form=AuthenticationForm,
          current_app=None, extra_context=None,
          form_name='form'):
    """
    Displays the login form and handles the login action.
    """
    redirect_to = request.REQUEST.get(redirect_field_name, '')

    if request.method == "POST":
        form = authentication_form(data=request.POST)
        if form.is_valid():
            netloc = urlparse.urlparse(redirect_to)[1]

            # Use default setting if redirect_to is empty
            if not redirect_to:
                redirect_to = settings.LOGIN_REDIRECT_URL

            # Heavier security check -- don't allow redirection to a different
            # host.
            elif netloc and netloc != request.get_host():
                redirect_to = settings.LOGIN_REDIRECT_URL

            # Okay, security checks complete. Log the user in.
            auth_login(request, form.get_user())

            if request.session.test_cookie_worked():
                request.session.delete_test_cookie()

            messages.add_message(request, messages.SUCCESS, _("Welcome <strong>%s</strong>.") % [request.user.get_full_name() if request.user.get_full_name() is not u"" else request.user.username].pop())

            return HttpResponseRedirect(redirect_to)
        else:
            if extra_context is None:
                extra_context = {}
            extra_context.update({'login_form_errors': True})
            try:
                attempt = AccessAttempt.objects.get(ip_address=request.META.get('REMOTE_ADDR', ''))
                if attempt.failures_since_start < 2:
                    messages.add_message(request, messages.ERROR, _(u"Invalid credentials, last chance."))
                if attempt.failures_since_start == 2:
                    messages.add_message(request, messages.ERROR, _(u"Authentication has been blocked for a 24h cooldown period."))
            except AccessAttempt.DoesNotExist:
                messages.add_message(request, messages.ERROR, _(u"Invalid credentials, please try again."))
    else:
        form = authentication_form(request)

    request.session.set_test_cookie()

    current_site = get_current_site(request)

    context = {
        form_name: form,
        redirect_field_name: redirect_to,
        'site': current_site,
        'site_name': current_site.name,
        }
    if extra_context is not None:
        context.update(extra_context)
    return TemplateResponse(request, template_name, context,
        current_app=current_app) 
```

笔记：

*   这个例子使用 django-axes
*   出于明显的安全原因，向用户提供有关错误凭据的特定错误是一种不好的做法

# javascript - 为什么我在 Form Select 元素上的 jQuery 隐藏和显示功能只能在 firefox 中使用？

> ID：11480054
> 
> 赞同：1
> 
> 时间：2012-07-14T00:47:09.150
> 
> 标签：javascript, jquery, html

我用几个选择菜单和几个 jQuery 隐藏和显示功能创建了这个表单。该表单的工作方式是，当您单击主选择菜单中的选项时，它会自动向您显示相应的选择子菜单。 **这是我的代码：**

**jQuery：**

```
 $("#mankleding").bind("click",menclothes);
    $("#manschoen").bind("click",menshoes);
    $("#manaccessoires").bind("click",menaccessoires);

    function menclothes(evt){

    $("#subkledingheren").show("fast");
    $("#subschoenenheren").hide("fast");
    $("#subsaccessoiresheren").hide("fast");
    }

    function menshoes(evt){

    $("#subkledingheren").hide("fast");
    $("#subschoenenheren").show("fast");
    $("#subsaccessoiresheren").hide("fast");
    }

    function menaccessoires(evt){

    $("#subkledingheren").hide("fast");
    $("#subschoenenheren").hide("fast");
    $("#subsaccessoiresheren").show("fast");

    } 
```

**HTML：**

```
 <tr>
        <td> Artikel hoofd-categorie:   </td> <td> <select id="manhoofd">
                                <option>HEREN</option>
                                <option id="mankleding">KLEDING</option>
                                <option id="manschoen">SCHOENEN</option>
                                <option id="manaccessoires">ACCESSOIRES</option>
                               </select>
                              </td>
    </tr>
    <tr>
        <td> Artikel sub-categorie:     </td> <td id="subcategorie"> <select id="subkledingheren">
                                <option>HEREN-KLEDING</option>
                                <option>Broeken & Jeans</option>
                                <option>Jassen</option>
                                <option>Sweaters & Hoodies</option>
                                <option>Zwemkleding</option>
                               </select>

                               <select id="subschoenenheren">
                                <option>HEREN-SCHOENEN</option>
                                <option>Sneakers / Casual</option>
                                <option>Slippers & Sandalen</option>
                                <option>Instappers</option>
                               </select>

                               <select id="subsaccessoiresheren">
                                <option>HEREN-ACCESSOIRES</option>
                                <option>Horloges</option>
                                <option>Brillen & Zonnebrillen</option>
                                <option>Stropdassen</option>
                               </select>

                              </td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:03:03.163

尝试使用`change`事件：

```
$('#manhoofd').change(function(){
    var i = $('option:selected', this).text();
    $('select(:not(:first))').hide();
    $('select:contains('+i+')').show()          
}) 
```

[演示](http://jsfiddle.net/2a2S2/)

# winapi - 向交互式命令行应用程序提供输入

> ID：11480056
> 
> 赞同：15
> 
> 时间：2012-07-14T00:47:22.243
> 
> 标签：winapi, shell, powershell, scripting, automation

我想将输入提供给 Cisco AnyConnect `vpncli.exe`(v2.3) 的命令行界面，以自动化其（重新）连接。它不接受用户名和密码作为命令行参数，而是通过命令行界面从用户交互读取这些参数。

问题是管道输入`vpncli.exe`似乎不适用于密码。它适用于除密码之外的所有内容。所以做这样的事情是行不通的：

```
vpncli.exe < input.txt
type input.txt | vpncli.exe 
```

该应用程序只是卡在它要求输入密码的地方。

以下是用户输入参数的正常（工作）执行示例：

![示例 vpncli.exe 运行](../Images/3437bbba2d3293fa58f79f109fa23eb3.png)

请注意密码字符如何转换为`*`.

使用 AutoIt 或 AutoHotKey 之类的工具将输入发送到命令提示符窗口是可行的，但笨拙且脆弱（如果工具由于某种原因无法进入命令提示符窗口，则不起作用）。

有没有办法使用 PowerShell 将输入发送到此类交互式 CLI 应用程序？

（或者使用任何其他脚本语言或其他方式？）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-20T14:55:28.500

你需要创建一个普通的文本文件，比如

连接 myvpnhost
myloginname
mypassword

将其保存为 myfile.dat （例如），然后调用

"%ProgramFiles%\Cisco\Cisco AnyConnect 安全移动客户端\vpncli.exe" -s < myfile.dat

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T07:20:35.130

至少有两种方法可以读取 Windows 控制台应用程序中的输入。

*   `ReadConsole`：从键盘或重定向（[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684958%28v=vs.85%29.aspx)）读取输入。
*   `ReadConsoleInput`: 只读取原始击键（[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684961%28v=vs.85%29.aspx)）。

该`vpncli.exe`应用程序用于`ReadConsoleInput`读取密码，这种重定向密码的方式不起作用。不过，您可以使用`WriteConsoleInput`. 我有一个小的 Python 脚本可以做到这一点：

```
import subprocess
import win32console

ANYCONNECT_BIN = 'c:\\Program Files\\Cisco\\Cisco AnyConnect Secure Mobility Client\\vpncli.exe'

def write_console_input(text):
  stdin = win32console.GetStdHandle(win32console.STD_INPUT_HANDLE)
  ir = win32console.PyINPUT_RECORDType(win32console.KEY_EVENT)
  ir.KeyDown = True
  for ch in text:
    ir.Char = unicode(ch)
    stdin.WriteConsoleInput([ir])

def main():
  proc = subprocess.Popen([ANYCONNECT_BIN,'connect','VPN'],stdin=subprocess.PIPE)
  proc.stdin.write('%s\n%s\n' % ('GROUP', 'USERNAME'))
  write_console_input('%s\n' % 'PASSWORD')
  ret = proc.wait()
  print ret

if __name__ == '__main__':
  main() 
```

# transparency - (D3D11) 透明纹理部分显示以前的纹理而不是渲染场景

> ID：11480058
> 
> 赞同：3
> 
> 时间：2012-07-14T00:47:37.513
> 
> 标签：transparency, shader, textures, d3dx

我有一个应用程序可以在本质上是 2D 上下文中渲染多个纹理四边形（图像），效果很好。然而，在修改它以使某些纹理的部分透明之后，我停下来试图让它以一种看似标准的、理论上简单的方式表现：我只是希望它按顺序绘制纹理（就像它一直在做的那样)，并且当纹理具有透明像素时，显示之前在这些点中绘制的任何内容。

但它所做的是在透明部分后面显示每个先前绘制的纹理的缩放版本，而不是渲染目标的先前渲染部分。因此，例如，如果我尝试绘制一个不透明的背景纹理，然后绘制一个较小的完全透明的纹理，那么背景会绘制得很好，但是透明图像会显示整个背景缩放到新透明图像的大小/位置。

随后的渲染纹理以这种方式继续，显示之前渲染的纹理最终结果（包括*它*之前的纹理中的元素）。

我显然遗漏了一些关于 DirectX 中的纹理/像素着色器如何工作的基本知识（这并不奇怪，因为我对它比较陌生），但是在阅读了所有在线内容之后，我可以搜索并以无数种方式进行实验，我仍然无法弄清楚我需要做什么。

我在像素着色器中使用了一个纹理，这可能是问题的一部分，也可能不是问题的一部分。每次渲染场景时，我都会循环遍历所有要渲染的纹理，调用 PSSetShaderResources() 将不同的纹理绑定到该像素着色器纹理，每次循环，并在每次更改后调用 DrawIndexed()。这似乎是一种有效的方法，因为当像素着色器似乎无法使用任意一个着色器时，拥有大量着色器纹理似乎没有意义（它需要预编译，不？）。

无论如何，我希望这些症状足以让比我更有知识的人立即意识到我所犯的错误。这些领域的代码非常简单，但我不妨包括几个部分：

曾经的场景，对于每个着色器RV：

```
 m_pd3d11ImmDevContext->PSSetShaderResources(0, 1, &shaderRV);
        m_pd3d11ImmDevContext->DrawIndexed( ... ) 
```

着色器：

```
Texture2D aTexture : register(t0);

SamplerState samLinear : register(s0);

struct VS_INPUT
{
    float3 position  : POSITION;
    float3 texcoord0 : TEXCOORD0;
};

struct VS_OUTPUT
{
    float4 hposition : SV_POSITION;
    float3 texcoord0 : TEXCOORD0;
};

struct PS_OUTPUT
{
    float4 color : COLOR;
};

// vertex shader
VS_OUTPUT CompositeVS( VS_INPUT IN )
{
    VS_OUTPUT OUT;

    float4 v = float4( IN.position.x,
                       IN.position.y,
                       0.1f,
                       1.0f );

    OUT.hposition = v; 
    OUT.texcoord0 = IN.texcoord0;
    OUT.texcoord0.z = IN.position.z ;

    return OUT;
}

// pixel shader
PS_OUTPUT CompositePS( VS_OUTPUT IN ) : SV_Target
{
    PS_OUTPUT ps;

ps.color = aTexture.Sample(samLinear, IN.texcoord0);

return ps;
} 
```

混合描述设置（不要认为问题出在此处）： blendDesc.RenderTarget[0].BlendEnable = true;

```
 blendDesc.RenderTarget[0].SrcBlend      =  D3D11_BLEND_SRC_ALPHA;
    blendDesc.RenderTarget[0].DestBlend     =  D3D11_BLEND_INV_SRC_ALPHA;
    blendDesc.RenderTarget[0].BlendOp       =  D3D11_BLEND_OP_ADD;
    blendDesc.RenderTarget[0].SrcBlendAlpha =  D3D11_BLEND_ZERO;
    blendDesc.RenderTarget[0].DestBlendAlpha=  D3D11_BLEND_ZERO;
    blendDesc.RenderTarget[0].BlendOpAlpha  =  D3D11_BLEND_OP_ADD; 
```

请让我知道是否有任何其他代码段有用！

# java - 递归方法以相反的顺序返回一个字符串需要String和Index位置作为参数

> ID：11480060
> 
> 赞同：1
> 
> 时间：2012-07-14T00:47:43.030
> 
> 标签：java

我正在尝试使用递归来反转字符串，但特殊的转折是我必须从指定的索引开始返回包含在索引中的字符，然后反转该索引之后的剩余字符串并将两者组合成一个输出。我试图这样做，有时它会给出一个数组越界异常，有时会得到比它应该有的更多的字母，比如这个 helloooo 的测试以 lloooooo 的形式出现。任何有关调整此代码的帮助将不胜感激，因为当我知道需要第二个参数时，我真的迷路了。

```
 public class ReverseTest
    {
        public static void main(String[] argv) 
        {
            System.out.println(reverse("a", 0));
            System.out.println(reverse("hi", 0));
            System.out.println(reverse("helloooo", 2));
        }

        public final static String reverse(String s, int ind)
        {
            int length = s.length(); //get string length

            if (length <= 1) //if length is 1 or lower just repeat the string nothing to do
                return s; //return string
            else //if we have something to work with...
                return s.substring(ind) + reverse(s.substring(ind + 1, length - 1), ind); //return substring of necessary index + reverse the rest and display in one string
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:06:04.660

不确定您的版本有什么问题，但我根据我发现的直观实现构建了自己的版本：

```
private static String reversePartially(String initial, int target) {
    return reversePartially(initial, target, target);
}

private static String reversePartially(String initial, int index, int target) {
    // if we are at the target index put the character at the front
    if(index == target) return initial.charAt(target) + reversePartially(initial, index + 1, target);
    // if we are in the second part return the characters reversed
    if(index > target) return reversePartially(initial, index + 1, target) + initial.charAt(index);
    // base condition
    if(index == initial.length()) return "";
    return "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:52:42.113

由于这可能是硬件，因此这里有一个提示。我认为你混淆了问题的两个部分

1.  将子字符串从索引 i 反转到结尾
2.  追加从 0 到 i-1 的子串到 i 的反转到 end

尝试将这两个分解为一个看起来像的函数

```
String reverse(String s);
String reversePart(String s, index i); 
```

第二个函数将调用第一个函数。您可以编写一个递归函数来反转字符串，而无需使用索引参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:46:35.957

这是上述问题的实际解决方案..此代码已测试..所有最好的..问候：Amit Sinha。

```
import java.io.*;
import java.lang.*;
import java.util.*;
public class RevString
{
    public String reverse(String s, int index )
        {
            if( index>0 )
            {
                return s.charAt( --index) + reverse( s, index);
            }
            return "";
        }
        public static void main(String[] args)throws IOException
        {
            DataInputStream in=new DataInputStream(System.in);
            String a;// the given string
            System.out.println("Enter a String");
            a=in.readLine();
            RevString obj=new RevString();
            int l=a.length();  // calculates Length of String
            System.out.println(obj.reverse(a,l));  // Pass Parameter as String, Length.
        }
} 
```

# vim - 如何防止 VIM 中某个特定文件的交换/备份文件？

> ID：11480063
> 
> 赞同：3
> 
> 时间：2012-07-14T00:47:49.420
> 
> 标签：vim

我有这个密码文件，在 vim 中编辑它时，我想确保 vim 不会创建交换/备份文件。这个怎么设置？

我已经看到了： [如何防止 vim 创建（和留下）临时文件？](https://stackoverflow.com/questions/743150/how-to-prevent-vim-from-creating-and-leaving-temporary-files)

但我不希望所有文件都使用这个，只需要一个特定的文件。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T00:58:42.703

如果您的文件可以包含注释，您可以通过在文件的开头或结尾添加模式行来设置[nobackup](http://vim.wikia.com/wiki/Modeline_magic)和 noswapfile 。

像这样的东西：

```
# vim: set nobackup noswapfile: 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T00:52:32.723

您可以使用`autocmd`to`set nobackup`匹配特定模式/扩展名的文件名或文件名：

```
autocmd BufRead,BufNewFile passwordfilename set nobackup
autocmd BufRead,BufNewFile passwordfilename set noswapfile 
```

# php - 使用 php 将数据和验证码发布到网站

> ID：11480066
> 
> 赞同：0
> 
> 时间：2012-07-14T00:48:04.497
> 
> 标签：php, session, cookies, curl, captcha

我正在尝试从 php 将数据发布到 url。我已经从这个论坛检查了如下代码。

```
$url = 'http://www.someurl.com';  
$myvars = 'myvar1=' . $myvar1 . '&myvar2=' . $myvar2;  
$ch = curl_init( $url );  
curl_setopt( $ch, CURLOPT_POST, 1);  
curl_setopt( $ch, CURLOPT_POSTFIELDS, $myvars);  
curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, 1);  
curl_setopt( $ch, CURLOPT_HEADER, 0);  
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1);  
$response = curl_exec( $ch ); 
```

但我的目标网站也有验证码。如何在我的 php 上加载验证码并提交验证码答案？

我看了一下链接。虽然没有得到最终的解决方案。[如何使用 PHP cURL 检索验证码并保存会话？](https://stackoverflow.com/questions/2527729/how-to-retrieve-captcha-and-save-session-with-php-curl?rq=1)
还[如何使用 PHP cURL 检索验证码并保存会话？](https://stackoverflow.com/questions/2527729/how-to-retrieve-captcha-and-save-session-with-php-curl?rq=1)和[http://hungrycoder.xenexbd.com/general/how-to-submit-a-form-using-php-curl-fsockopen.html](http://hungrycoder.xenexbd.com/general/how-to-submit-a-form-using-php-curl-fsockopen.html)

我的目标网站有如下代码

```
<form method="post" action="action_form.php" name="frm_sms" id="frm_sms"> < input     type="hidden" name="nav" value="sms" /> 
```

我不需要绕过验证码，但我只想加载一个整洁的表单和验证码 img 但没有其他垃圾并提交带有验证码答案的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T01:34:12.983

您必须首先使用 cURL 获取验证码图像并保存它设置的任何会话 cookie 的内容，或记下验证码标识符（取决于其验证码的工作方式），然后将图像的副本保存到您的服务器。

然后在您的表单中向您的访问者显示验证码的副本。为他们添加一个输入字段，输入验证码解决方案，将他们的输入添加到您的`$myvars`字符串中，并将随图像设置的 cookie 或验证码 ID 与表单帖子一起发送。

这是您可以将他们的验证码转发给您的用户的一种方式。或者他们有一个你可以注册的 API。

# sql - VS2010 SQL数据库datagridview数据库查询显示结果

> ID：11480067
> 
> 赞同：1
> 
> 时间：2012-07-14T00:48:08.527
> 
> 标签：sql, database

我没有足够的声誉来发布图片。所以这是场景。

CostPrice（数据库表）中的 PartsID 依赖于 PartsInfo（数据库表）中的 PartsID。假设当 PartsInfo.PartsID = 1 时，In CostPrice 将只显示 1 的所有相关信息。

我正在使用 VS2010，我尝试在 datagridview 中构建查询，

```
SELECT costprice.costid, 
       costprice.suppliername, 
       costprice.costprice 
FROM   costprice 
       INNER JOIN partsinfo 
               ON costprice.partsid = partsinfo.partsid 
```

这是我现在的查询，它仍然显示保存在数据库表中的所有数据。我想知道我的情况的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:54:05.677

```
SELECT CostPrice.CostID, CostPrice.SupplierName, CostPrice.CostPrice 
FROM CostPrice 
INNER JOIN PartsInfo ON CostPrice.PartsID = PartsInfo.PartsID
WHERE CostPrice = 1 
```

或者

```
SELECT CostPrice.CostID, CostPrice.SupplierName, CostPrice.CostPrice 
FROM CostPrice 
INNER JOIN PartsInfo ON CostPrice.PartsID = PartsInfo.PartsID
WHERE PartsInfo.PartsID = 1 
```

不确定你想要哪个。

# c# - MongoDB、序列号和 C# 驱动程序

> ID：11480069
> 
> 赞同：0
> 
> 时间：2012-07-14T00:48:28.933
> 
> 标签：c#, mongodb, mongodb-.net-driver

这是 MongoDB 文档中描述如何进行序列号的条目的链接：[http ://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-SequenceNumbers](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-SequenceNumbers)

我的问题是在 C# 驱动程序中实现该解决方案的最佳方法是什么。您可以将其作为一个两步操作来完成，您首先进入 counters 集合，然后更新您的主集合。我很好奇您将如何像文档中的 C# 驱动程序那样一步完成它？

更新：

2 Step 可能是使用错误的术语。在我看来，他们存储了 JavaScript 函数，然后从插入中调用 JavaScript 函数。这就是我所说的 1 step 的意思，如何在 insert 中调用 JavaScript 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:33:10.183

该链接上的文档绝对不是一步操作。每个插入语句中都有一个方法调用来分配 _id 字段。每次插入都会两次访问数据库。

如果您想让它成为一个更简单的项目并且您正在使用 POCO，您可以实现一个自定义 IIdGenerator，如下所示：[http](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial) ://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial 。它仍然需要两个步骤，但它会对你隐藏（可以说不一定是一件好事）。

# c# - 可以制作一个可以重定向到动作的属性吗？

> ID：11480072
> 
> 赞同：0
> 
> 时间：2012-07-14T00:49:16.733
> 
> 标签：c#, asp.net-mvc

我有一个带有前端和后端的 MVC3 Web 应用程序。在后端，如果用户未登录（它检查会话），每个操作都受到 if..then..else 重定向到另一个操作的保护。它在没有 Windows 角色的情况下执行此操作。

我想知道是否可以创建一个属性来执行检查并将用户重定向到登录页面，而不必在每个操作中一遍又一遍地插入相同的代码？

**编辑#1**

我创建了一个基本控制器，我的管理控制器从该控制器派生，并根据 Virus 所说的添加了以下成员：

```
 protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        try
        {
            if (Session["loggedIn"] == null || (bool)Session["loggedIn"] != true)
            {
                TempData["targetAction"] = ControllerContext.ParentActionViewContext.RouteData.Values["action"] + "/" + ControllerContext.ParentActionViewContext.RouteData.Values["controller"];
                RedirectToRoute("Admin/Login");
            }
        }
        catch (NullReferenceException)
        {
            RedirectToRoute("Admin/Login");
        }
    } 
```

但是这段代码不起作用。有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T03:51:14.510

你可以很容易地做到这一点。

无需使用属性

只需创建一个从 Controller 类继承的通用 BaseController，并从 BaseController 继承所有控制器

覆盖 BaseController 中的 OnActionExecuting 事件并将授权逻辑放在上面。

每次调用操作时都会执行 OnActionExecuting 事件。

如果您需要重定向到操作，此代码将有所帮助

```
filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary { { "action", "Index" }, { "controller", "Account" } }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:04:36.440

这就是内置[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)过滤器的作用。

您可以`AuthorizeAttribute`在全局级别、控制器级别甚至操作级别使用过滤器。如果内置的 Authorize 过滤器不足以满足您的需求，您可以通过继承它来轻松创建自定义过滤器，如本文所述[。](http://prideparrot.com/blog/archive/2012/6/customizing_authorize_attribute)

# android - SQLite异常

> ID：11480078
> 
> 赞同：1
> 
> 时间：2012-07-14T00:50:40.540
> 
> 标签：android, database

```
public static final String GTABLE_CREATE = "create table grades (id integer primary key autoincrement, " + 
"coursegrade text not null, c_id text not null, type text not null);"; 
```

在这段代码中，我得到一个运行时错误，它说`SQLiteException`存在一个语法错误，我不知道是什么导致了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:04:52.750

尝试使用其他列名而不是 id（在您的第一个列名中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:13:07.177

试试这个代码..对我来说很好..

```
private static final String TABLE_CREATE =   
        "create table if not exists registration(_id integer primary key autoincrement,"
                +"name varchar(50), address varchar(50) not null, apt_no varchar(50), city varchar(50) not null,"
                +"state varchar(50),  county  varchar(50),  zipcode  varchar(50)  ,"  
                +"property_value  varchar(50) not null, property_type varchar(50) );"; 
```

希望这会帮助你..

# java - 我将如何将 DebugDraw 与纯 JBox2D 一起使用？

> ID：11480082
> 
> 赞同：0
> 
> 时间：2012-07-14T00:51:48.697
> 
> 标签：java, jbox2d

好的，这是我的代码（这只是使用 DebugDraw 的测试）：

```
package test;
import org.jbox2d.callbacks.*;
import org.jbox2d.collision.shapes.*;
import org.jbox2d.common.*;
import org.jbox2d.dynamics.*;

public class Main {
private static DebugDraw debugDraw;

public static DebugDraw getDebugDraw() {
    return debugDraw;
}
public static void main(String[] args) {
    Vec2  gravity = new Vec2(0,-10);
boolean doSleep = true;
World world = new World(gravity,doSleep);
BodyDef groundBodyDef = new BodyDef();
groundBodyDef.position.set(0, -10);
Body groundBody = world.createBody(groundBodyDef);
PolygonShape groundBox = new PolygonShape();
groundBox.setAsBox(50,10);
groundBody.createFixture(groundBox, 0);

// Dynamic Body
BodyDef bodyDef = new BodyDef();
bodyDef.type = BodyType.DYNAMIC;
bodyDef.position.set(0, 4);
Body body = world.createBody(bodyDef);
PolygonShape dynamicBox = new PolygonShape();
dynamicBox.setAsBox(1, 1);
FixtureDef fixtureDef = new FixtureDef();
fixtureDef.shape = dynamicBox;
fixtureDef.density=1;
fixtureDef.friction=0.3f;
body.createFixture(fixtureDef);

// Setup world
float timeStep = 1.0f/60.0f;
int velocityIterations = 6;
int positionIterations = 2;

// Run loop
for (int i = 0; i < 60; ++i)
{
    world.step(timeStep, velocityIterations, positionIterations);
    Vec2 position = body.getPosition();
    float angle = body.getAngle();
    debugDraw.setFlags(debugDraw.e_shapeBit);
    world.setDebugDraw(debugDraw);
    System.out.println(i+": X: "+position.x+" Y: "+position.y+" ANGLE: "+angle);
}

}
} 
```

当我运行此代码时，我得到：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
Exception in thread "main" java.lang.NullPointerException
at test.Main.main(Main.java:49)
Java Result: 1 
```

有谁知道是什么原因造成的，我应该怎么做？我尝试过谷歌搜索，但我只能找到 Slick2D，我不想植入整个库来测试一个简单的测试应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:09:52.023

仅供参考，slf4j 依赖已在最新版本中删除，太多人遇到了麻烦。

空指针异常看起来您正在做一些不太正确的事情。也许你应该做一个 DebugDraw 实现？否则它将为空。

如果你想玩，最好只做一个 Testbed 测试。[在此处](https://code.google.com/p/jbox2d/wiki/Testbed)关注 wiki

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T18:55:08.630

“debugDraw”为空，导致“debugDraw.setFlags(debugDraw.e_shapeBit)”因 NPE 而失败。

创建一个扩展 DebugDraw 的类并将其分配给您的静态变量。您需要使用您正在使用的任何图形库（例如 Swing）来实现自己的绘制回调。但是对于初学者，您也可以只写出日志语句。

此外，您应该将“debugDraw.setFlags(debugDraw.e_shapeBit)”和“world.setDebugDraw(debugDraw)”语句移到游戏循环之前，而是在世界步骤之后的游戏循环中放置“world.drawDebugData()”语句.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:16:17.943

我对 jbox2d 也有同样的问题。它依赖于 slf4j。解决它的最简单方法是在 jbox2d 根目录中进行 maven 全新安装。然后，您将在 .m2 目录中找到 slf4j 库（它本身应该在您的主目录中）。

然后，您需要将 slf4j 库添加到您的项目构建路径中，并将其 jar 文件与目标项目一起导出。

这就是理论。实际上 slf4j 本身对 log4j 有依赖关系，maven 没有解决这个依赖关系。所以最后我注释掉了 jbox2d 中的所有日志引用，并进行了另一个 maven 全新安装。这为我解决了这个问题。

# entity-framework - EF 4.1 Code First ModelBuilder HasForeignKey 用于一对一关系

> ID：11480083
> 
> 赞同：5
> 
> 时间：2012-07-14T00:52:09.480
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first, code-first, one-to-one

很简单，我首先使用 Entity Framework 4.1 代码，我想用对 modelBuilder 的流畅调用替换我的 [ForeignKey(..)] 属性。类似于 WithRequired(..) 和 HasForeignKey(..) 的东西将显式外键属性 (CreatedBySessionId) 与关联的导航属性 (CreatedBySession) 联系在一起。但我想为一对一的关系而不是一对多的关系这样做：

```
modelBuilder.Entity<..>().HasMany(..).WithRequired(x => x.CreatedBySession).HasForeignKey(x => x.CreatedBySessionId) 
```

下面是一个更具体的例子。这与 [ForeignKey(..)] 属性一起工作非常愉快，但我想取消它并纯粹在模型构建器上配置它。

```
public class VendorApplication
{
    public int VendorApplicationId { get; set; }

    public int CreatedBySessionId { get; set; }
    public virtual Session CreatedBySession { get; set; }
}

public class Session
{
    public int SessionId { get; set; }

    [ForeignKey("CurrentApplication")]
    public int? CurrentApplicationId { get; set; }
    public virtual VendorApplication CurrentApplication { get; set; }

    public virtual ICollection<VendorApplication> Applications { get; set; }
}

public class MyDataContext: DbContext
{
    public IDbSet<VendorApplication> Applications { get; set; }
    public IDbSet<Session> Sessions { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Session>().HasMany(x => x.Applications).WithRequired(x => x.CreatedBySession).HasForeignKey(x => x.CreatedBySessionId).WillCascadeOnDelete(false); 
        // Note: We have to  turn off Cascade delete on Session <-> VendorApplication relationship so that SQL doesn't complain about cyclic cascading deletes
    }
} 
```

这里一个 Session 可以负责创建许多 VendorApplications (Session.Applications)，但是一个 Session 一次最多在一个 VendorApplication 上工作 (Session.CurrentApplication)。我想将 CurrentApplicationId 属性与 modelBuilder 中的 CurrentApplication 导航属性绑定，而不是通过 [ForeignKey(..)] 属性。

**我尝试过的事情**

当您删除 [ForeignKey(..)] 属性时，CurrentApplication 属性会在数据库中生成一个 CurrentApplication_VendorApplicationId 列，该列未绑定到 CurrentApplicationId 列。

我已经尝试使用 CurrentApplicationId 列名显式映射关系，如下所示，但显然这会产生错误，因为属性 Session.CurrentApplicationId 已经在使用数据库列名“CurrentApplicationId”：

```
modelBuilder.Entity<Session>().HasOptional(x => x.CurrentApplication).WithOptionalDependent().Map(config => config.MapKey("CurrentApplicationId")); 
```

感觉就像我在这里遗漏了一些非常明显的东西，因为我想做的只是在模型构建器中执行与 [ForeignKey(..)] 相同的操作。还是这是一种不好的做法并且被明确排除在外的情况？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T01:10:20.543

您需要将关系映射为一对多并省略关系中的集合属性。

```
modelBuilder.Entity<Session>()
   .HasOptional(x => x.CurrentApplication)
   .WithMany()
   .HasForeignKey(x => x.CurrentApplicationId) 
```

# drupal - 清除缓存 Drupal 7 后，正文和页脚出现在主页上并出现错误消息

> ID：11480089
> 
> 赞同：0
> 
> 时间：2012-07-14T00:53:24.097
> 
> 标签：drupal, drupal-7

我最近在我的网站上工作并决定清除所有缓存，现在主页只显示标题，没有其他内容。所有其他页面都可以正常工作，但我确实收到此错误：

> 警告：include（page-front.php）[function.include]：无法打开流：include（）中没有这样的文件或目录（/home/anthonyd/public_html/graphicimpress/sites/all/themes/gi_0612的第14行/page.tpl.php)。警告：include（page-front.php）[function.include]：无法打开流：include（）中没有这样的文件或目录（/home/anthonyd/public_html/graphicimpress/sites/all/themes/gi_0612的第14行/page.tpl.php)。警告：include() [function.include]：在 include() 中打开 'page-front.php' 以包含 (include_path='.:/usr/lib/php:/usr/local/lib/php') 失败（ /home/anthonyd/public_html/graphicimpress/sites/all/themes/gi_0612/page.tpl.php 的第 14 行）。

我确实看到了其他人发布的一个非常相似的问题，但它是针对 drupal 6 的，修复是通过访问 admin/build/modules 来重建模块并通过访问 admin/build/themes 来重建主题。不幸的是，D7 没有相同的菜单选项。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:49:21.010

在第 14 行的文件`/home/anthonyd/public_html/graphicimpress/sites/all/themes/gi_0612/page.tpl.php`中，函数`include('page-front.php')`试图将文件包含`page-front.php`到您`page.tpl.php`的`page-front.php`.

确保此文件 ( `page-front.php`) 存在，或`include('page-front.php')`从`page.tpl.php`.

# c# - C#中的日期格式

> ID：11480090
> 
> 赞同：0
> 
> 时间：2012-07-14T00:53:29.337
> 
> 标签：c#, datetime

我从这种格式的 XML 文件中得到了一个日期时间：

```
<LastFetchTime>2011-03-25T00:09:09+08:00</LastFetchTime> 
```

当我使用以下代码解析并将其转换为 C# 日期时间时：

```
lastAppliedDate = DateTime.Parse(xmlInput.Descendants("LastFetchTime").First().Value); 
```

我明白了

{2011 年 3 月 24 日下午 12:09:09}

我认为这很奇怪，因为 +8 应该让你前进，而不是后退。

谁能看到我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T00:57:59.000

似乎 +8 是与时间相关的时区，而您得到的是 GMT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T00:58:02.183

+8 指的是与 GMT 的偏移量，因此您必须为 -1，因此您可以在您的时区得到它。

# c# - 在最大化代码重用的同时使用 C# 接口

> ID：11480094
> 
> 赞同：3
> 
> 时间：2012-07-14T00:53:41.617
> 
> 标签：c#, inheritance, interface, solid-principles

所以说我有一个 C# 类，

```
class Foo : Bar, IBar, IBar2
{

} 
```

... 其中 Bar 是一个类，而 IWhatever 和 Ifine 是接口。我计划在多个类中使用 IWhatever 和 IFine 的类似实现——我能看到封装此代码并在所有类中重用它的唯一明智的方法是创建一个继承自 IWhatever 和 Fine 的类继承自 IFine 和使它们成为实现这些接口的类的成员，然后在从接口实现的成员中调用它们的成员，如下所示：

```
class Foo : Bar, IWhatever, IFine
{
   IWhatever mWhatever;
   IFine mFine;
   Foo()
   {
      mWhatever = new Whatever();
      mFine = new Fine();
   }
   // from IWhatever
   void Kick()
   {
      mWhatever.Kick();
   }
   // from IFine
   void Punch()
   {
      mFine.Punch();
   }
} 
```

我做对了吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T01:13:18.537

当您尝试通过继承在许多类中实现相同的多个实现时，这是一种设计气味。C# 缺乏多重（类）继承在这方面实际上是一种资产，而不是一种责任，因为它**强制执行单一责任原则。**

可以这样想：C# 中可用的两种抽象类型有两种互补的形式来表示现实生活中的实体。

*   抽象类：“Is a”
*   界面：“做某事”或“有这样那样的品质/行为”

这意味着接口应该几乎总是“空心的”，因为我们假设即使不同的类可能实现相同的接口，但很可能每个类都会以不同的方式实现。

小心使用继承。记住 GOF 的睿智智慧：

> 优先考虑对象组合而不是继承。

因此，回到您要解决的问题，这样做可能会更好：

```
public class Foo : Bar
{
   public IWhatever Whatever
   {
      get;
      private set;
   }

   public IFine Fine
   {
      get;
      private set;
   }

   public Foo(IWhatever whatever, IFine fine)
   {
      Whatever = whatever;
      Fine = fine;
   }
} 
```

现在使用 IOC 容器来注入这些接口的具体实现。这是我谦虚的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T01:03:34.740

您可以使其更通用：

```
class Foo<TWhat, TFine> : Bar, IWhatever, IFine
    where TWhat : IWhatever, new()
    where TFine : IFine, new()
{
   IWhatever mWhatever;
   IFine mFine;
   Foo()
   {
      mWhatever = new TWhat();
      mFine = new TFine();
   }
   // from IWhatever
   public void Kick()
   {
      mWhatever.Kick();
   }
   // from IFine
   public void Punch()
   {
      mFine.Punch();
   }
} 
```

这样，`Foo`可以使用任何实现`IWhatever`and的类`IFine`，而不仅仅是`Whatever`and `Fine`。

但是你是否愿意这样做取决于你。在对您的代码的正确结构有什么看法之前，我需要更多具体信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T01:17:49.963

您可以将接口更改[为类似于 mixin](http://codecrafter.blogspot.ca/2011/03/c-mixins-with-state.html)，将成员作为扩展方法公开给接口：

```
interface MBar {} static class BarMethods {
  public static void M(this MBar self) { ... }
}

class Foo : MBar { ... } 
```

整个结构`interface MBar {} static class BarMethods { ... }`可以看作是一个单一的“模块”，比如`module MBar { ... }`. 这就是为什么我保持这样的格式。

# php - 将 MySQL 日期结果转换为月份名称并创建变量

> ID：11480095
> 
> 赞同：0
> 
> 时间：2012-07-14T00:53:47.657
> 
> 标签：php, mysql, date

我有一个带有日期列的 MySQL 数据库。

我在 PHP 中创建一个值的变量，如下所示：

```
$query = mysql_query ("SELECT customer_date FROM customers WHERE customer_id = {$_SESSION['session_id']}");

while ($result = mysql_fetch_object($query)) {
    $date = $result->customer_date;
} 
```

我需要将`$date`YYYY-MM-DD 转换为三个变量

*   `$yearvalue`（例如**2012 年**）
*   `$monthname`（例如**八月**）
*   `$dayvalue`（例如**10**）

而且我需要能够在我的代码中的任何地方回显......我将如何以一种奇特的方式做到这一点？我对编码很陌生...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:57:34.797

这里：

```
while ($result = mysql_fetch_object($query)) {
  $date = $result->customer_date;
  $yearvalue = date("Y", strtotime($date) );
  $monthname = date("F", strtotime($date) );
  $dayvalue = date("d", strtotime($date) );
} 
```

它只会为从`$result`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:02:34.540

这个怎么样？

```
while ($result = mysql_fetch_object($query)) {
    $date = $result->customer_date;
    list($year,$month,$day,$hour,$minute,$second)=
    explode('-',date('Y-F-d-h-i-s',strtotime($date)));
} 
```

***也读[这个](http://php.net/manual/en/function.date.php)。您将需要根据您的要求玩`Y-F-d-h-i-s`。***

# javascript - 你能为流程图的小地图组件推荐库吗？

> ID：11480098
> 
> 赞同：3
> 
> 时间：2012-07-14T00:54:27.417
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jsplumb

我正在使用[**jsPlumb**](http://jsplumb.org/jquery/demo.html)创建流程图编辑器，并且我正在寻找实现类似于此[**Screenshot**](https://dl.dropbox.com/u/107176/example-shot1.png)的小地图功能。

你能建议如何使用或使用什么插件吗？此外，我没有使用画布，而是使用 jsPlumb 定义的 jquery+SVG+css。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-12T05:10:38.953

试试这个插件，他们甚至有一个 JsPlump 的例子

插件： http: [//www.magnoliyan.com/mini-map/](http://www.magnoliyan.com/mini-map/)

示例： http: [//www.magnoliyan.com/mini-map/demos/window.html](http://www.magnoliyan.com/mini-map/demos/window.html)

```
//init jsPlumb toolkit
jsPlumb.bind("ready", function() {
    jsPlumb.setRenderMode(jsPlumb.SVG);
    jsPlumbDemo.init();
    // make all the element divs draggable
    jsPlumb.draggable(jsPlumb.getSelector(".element"), {
        stop: function( event, ui ) {
            //update MiniMap after an element is moved
            $(window).mgMiniMap('update');
        }
    });
});
$(window).load(function(){
    //init MiniMap
    $(window).mgMiniMap({elements: '.element',draggable: true});
}); 
```

# google-app-engine - 请求所有版本的 Google App Engine 应用程序的日志

> ID：11480101
> 
> 赞同：6
> 
> 时间：2012-07-14T00:54:42.117
> 
> 标签：google-app-engine, logging, logfiles

有谁知道如何请求 Google App Engine 应用程序的所有日志？所有日志，我的意思是所有应用程序版本日志。

我们每次部署都会增加应用程序的版本。我有一个脚本，它每 30 分钟提取一次日志文件以进行一些离线分析。

这有点像我的脚本现在正在调用的内容。appcfg.py --append --num_days=0 --include_all request_logs /opt/gae/appname/ /var/log/gae/appname.log

这不会获取所有应用程序版本日志文件，而只会获取 /opt/gae/appname/app.yaml 文件中指定的版本。问题是 app.yaml 文件中的任何内容都可能不是实时的，而是仍在开发中。

如果我们有 --version=0 标志来提取所有版本的日志，那就太好了，就像它为 --num_days=0 所做的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:50:57.003

您可以使用[LogService Api](https://developers.google.com/appengine/docs/python/logservice/functions)获取日志，请参阅参数`version_ids`。我确定您可以修改 appcfg.py，以下载所有版本日志。

[您可以在http://code.google.com/p/googleappengine/issues/list](http://code.google.com/p/googleappengine/issues/list)添加一个要求此功能的问题。

# javascript - 为什么这个带有对象调用函数的 Javascript setInterval 在传入回调时不评估内部参数？

> ID：11480104
> 
> 赞同：2
> 
> 时间：2012-07-14T00:56:48.757
> 
> 标签：javascript, setinterval, scoping

以下脚本输出 1 2 3 4 5 6 7.. 我假设它会输出 0 1 2 3 4 5 ...

事实上，在我的实际代码中，我相信 print(lostCnt) 总是连接到最新的（像全局一样的）最后一次计数更新。为什么是这样？我该怎么做才能让它保持实际的 cnt 与我无法修改 obj1 中的任何代码的约束。

```
<!DOCTYPE html>

<html>
<head>
<script type="text/javascript">
function obj1(parameter, callback){
    setTimeout(callback, parameter);
}
function caller(){
    function miscFunction(cnt){
        document.getElementById("main").appendChild(document.createTextNode(cnt));
    }
    var lostCnt = 0;
    setInterval(
        function(){
            new obj1(5, 
                function(){
                    miscFunction(lostCnt);
                });
           lostCnt++;
        },5000
    );
}   
</script>

</head>
<body onload="caller();">
<div id="main">
</div>
</body>

</html> 
```

谢谢，这是我的第一篇文章

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:01:55.870

在第`lostCnt++`一次调用之前执行`miscFunction()`。

构造函数在`obj1`构造完成 5 毫秒后才会显示该数字。只有在此时调用回调，并且回调直接引用- 而不是创建实例`lostCnt`时的保存副本。`obj1`

所以你的假设是正确的，我认为这很明显——传递给`obj1`构造函数的回调**是**直接引用的`lostCnt`。

如果你想以不同的方式做，你可以这样做：

```
setInterval(
    function(){
        new obj1(5, 
          function(savedLostCnt) {
            return function(){
                miscFunction(savedLostCnt);
            };
          }(lostCnt));
        lostCnt++;
    },5000
); 
```

# python - python将对象作为参数传递

> ID：11480106
> 
> 赞同：12
> 
> 时间：2012-07-14T00:57:21.673
> 
> 标签：python, oop, object

如何将对象作为参数传递给类方法并在调用类方法时调用传递对象的方法？

说我有：

```
class myclass:
    def __init__(self):
        pass
    def myfunc(self, something):
        something.do()

anobject = blah.xyz()

another_obj = myclass()
another_obj.myfunc(anobject) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T01:00:40.397

只要`something`有一个`.do`方法，它就应该按照给定的方式工作（一旦你修复了你的缩进和声明顺序）。你试过运行它吗？

这（或多或少）是许多标准函数的工作方式 - 例如，内置`len`函数几乎

```
def len(obj):
    return obj.__len__() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:01:38.067

你想调用过去对象的哪个方法？

顺便说一下，`myfunc`是一个实例方法。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2017-07-16T19:22:55.883

```
class student :
 ID=0
 name=""

def fun(s=student()):
  print (s.id)
  print (s.name)

st=student()
fun(st) 
```

# python - DrawingPanel.py 绘制一个魔方

> ID：11480110
> 
> 赞同：0
> 
> 时间：2012-07-14T00:58:01.303
> 
> 标签：python, rubiks-cube

使用 python 我想根据这张图片画一个魔方[http://vixra.files.wordpress.com/2010/0](http://vixra.files.wordpress.com/2010/0) ... s-cube.jpg

这是我当前的代码 [http://pastebin.com/MfF07ze4](http://pastebin.com/MfF07ze4)

但我希望代码至少有 5 个 for 循环和 5 个有助于创建多维数据集的函数。在为魔方的 1x1 立方体创建 3 个点时，我还需要算法方面的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:48:00.813

我没有`drawingpanel`模块，所以这是未经测试的：

```
from drawingpanel import *
panel = DrawingPanel(600, 600)
from math import *
import numpy as np

class Projection(object):
    def __init__(self, origin, dx, dy, dz):
        self.o = np.matrix([origin[0], origin[1], 0.])
        self.p = np.matrix([
                    [dx[0], dx[1], 0.],
                    [dy[0], dy[1], 0.],
                    [dz[0], dz[1], 0.]
                ])

    def proj(self, x, y, z):
        res = self.o + np.matrix([x, y, z]) * self.p
        return (res[0,0], res[0,1]) 
```

这是一个简单的等距 3d 到 2d 投影 - 它采用 3d 坐标并返回相应的 2d 屏幕坐标。

```
proj = Projection((175,130), ( 50, -24), (-50, -24), (  0,  70)).proj 
```

我创建了一个特定的投影 - 根据您的图像，我将立方体的前角设为 (175,130) 的原点。+X 跑到立方体的右上角，我把那个角点设为(3,0,0)，方便细分立方体，也就是说(1,0,0)的屏幕投影是( 215, 106), 使 dx (50, -24); 然后类似地 +Y 到左上角和 +Z 到前下角。

```
def make_poly_pts(*args):
    return [coord for pt in args for coord in proj(*pt)] 
```

这是一个实用函数 - 它接受一个 3d 点列表并返回一个 [x1, y1, x2, y2, ... xN, yN] 坐标列表以提供给 create_polygon。

```
# allow for a gap between stickers
offs = 0.05
ooffs = 1\. - offs

# draw top face (XY)
panel.canvas.create_polygon(*make_poly_pts((0,0,0), (3,0,0), (3,3,0), (0,3,0)), outline='black', fill='black')
for i in xrange(3):
    for j in xrange(3):
        panel.canvas.create_polygon(*make_poly_pts((i+offs,j+offs,0), (i+ooffs,j+offs,0), (i+ooffs,j+ooffs,0), (i+offs,j+ooffs,0)), outline='black', fill='yellow') 
```

...然后可以通过交换轴类似地创建其他两个面。

# c++ - std::async 未使用 std::launch::async 策略启动新线程

> ID：11480118
> 
> 赞同：4
> 
> 时间：2012-07-14T00:59:41.110
> 
> 标签：c++, multithreading, asynchronous, c++11, threadpool

如果我使用 std::launch::async 策略启动 std::async ，它不应该在新线程中启动每个异步任务吗？目前看起来新的异步任务移动到刚刚完成它的工作的线程。我使用 VC11 作为我的编译器。正如您从输出中看到的，当使用 std::async 启动一个新的工作线程（例如，一个工作线程多次获取 ID 为 34500 的线程）时，它从一个先前完成的线程开始。我对 std::async 的理解是错误的，还是有潜在的工作窃取队列或类似的东西？

```
Worker (ID=24072) starting.
Worker (ID=34500) starting.
Worker (ID=32292) starting.
Worker (ID=31392) starting.
Worker (ID=17976) starting.
Worker (ID=31580) starting.
Worker (ID=33512) starting.
Worker (ID=33804) starting.
Worker 32292 finished.
Worker (ID=32292) starting.
Worker 17976 finished.
Worker (ID=17976) starting.
Worker 31580 finished.
Worker (ID=31580) starting.
Worker 34500 finished.
Worker (ID=34500) starting.
Worker 34500 finished.
Worker (ID=34500) starting.
Worker 32292 finished.
Worker (ID=32292) starting.
Worker 17976 finished.
Worker (ID=17976) starting.
Worker 34500 finished.
Worker 17976 finished. 
Worker 31580 finished.
Worker 32292 finished.
Worker 33804 finished.
Worker 31392 finished.
Worker 33512 finished.
Worker 24072 finished. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T01:34:13.060

> 如果我`std::async`使用`std::launch::async`策略启动，它不应该在新线程中启动每个异步任务吗？

规范要求异步操作“就像在新的执行线程中一样”执行（C++11 §30.6.8/11）。这里的重要词是： *好像*。

当且仅当行为与创建新线程相同时，才能重用已经运行的工作线程。这意味着，例如，`thread_local`必须在单个线程上执行的异步操作之间重置具有存储类的变量。

不必重置线程标识符，因为线程标识符仅在线程运行时唯一标识线程。如果一个线程终止，则可以使用第一个线程的标识符启动另一个线程。

> 是否有潜在的工作窃取队列或类似的东西？

这是特定于实现的。C++11 线程支持库的 Visual C++ 2012 实现构建在[并发运行时 (ConcRT)](http://msdn.microsoft.com/en-us/library/dd504870.aspx)之上，其中包括一个工作窃取任务调度程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T17:38:28.800

James 是对的，但有一个更正：Microsoft 的 launch::async 实现不正确。[Redmond 的 C++ 并发工作组](http://bartoszmilewski.com/2012/05/11/the-future-of-c-concurrency-and-parallelism/)详细讨论了这一点。Visual C++ 2012 仍处于测试阶段，因此他们可能会将实现更改为符合标准。

# android-fragments - FragmentDialog 对活动的松散引用

> ID：11480122
> 
> 赞同：2
> 
> 时间：2012-07-14T01:00:10.793
> 
> 标签：android-fragments, fragment, android-fragmentactivity

我正在使用支持库来创建使用片段的对话框。

我有以下代码来显示和关闭对话框：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    Log.d("Create", "Create");
    setContentView(R.layout.activity_report);
    init();
    addListeners();
    addhandlerListener();
    super.onCreate(savedInstanceState);
}

private void showDialog(final Class<?> classs) {
    if (classs.equals(AddressValidateProgress.class)) {
        addressValidateProgress = AddressValidateProgress.newInstance();
        addressValidateProgress.show(getSupportFragmentManager(), null);
        Log.d("counter", "+1");
    }
    if (classs.equals(GPSSearchProgress.class)) {
        showDialog(gpsSearchloadId);
    }
}

private void dismissDialog(final Class<?> classs) {
    if (classs.equals(AddressValidateProgress.class)) {
        FragmentTransaction ft = getSupportFragmentManager()
                .beginTransaction();
        ft.remove(addressValidateProgress).commitAllowingStateLoss();
        addressValidateProgress = null;
        Log.d("super", addressValidateProgressId + ":dismissed");
    }
    if (classs.equals(AddressChooseDialog.class)) {
        FragmentTransaction ft = getSupportFragmentManager()
                .beginTransaction();
        ft.remove(addressChooseDialog).commitAllowingStateLoss();
        addressChooseDialog = null;
    }
    if (classs.equals(GPSSearchProgress.class)) {
        dismissDialog(gpsSearchloadId);
        Log.d("super", gpsSearchloadId + ":dismissed");
    }
} 
```

如果我以纵向模式启动应用程序，我可以正常使用对话框，我什至可以旋转屏幕并重建对话框。
问题是，如果我启动应用程序旋转屏幕并单击打开对话框的按钮，我会得到一个异常：

```
java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:33:40.067

找到解决方案。

这是由声明的静态处理程序引起的

# magento - 从子 SKU 获取父 SKU（可配置或捆绑）

> ID：11480126
> 
> 赞同：3
> 
> 时间：2012-07-14T01:00:56.287
> 
> 标签：magento

在购物车页面上，我需要能够使用子 SKU 获取父 SKU。

我已经尝试了从 Magento 论坛和 StackOverflow 上的类似问题中截取的几个代码，但没有成功。

我可以通过使用 getTypeId() 来确定产品是否只是没有父级的简单产品，但之后我尝试的所有操作都无法获取父级 SKU。

Magento 版本：1.4.2.0

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T04:46:29.540

查看 Mage_Catalog_Model_Product_Type_Configurable 和 Mage_Bundle_Model_Product_Type 类。他们有获取父子产品的有用方法。你想要getParentIdsByChild()：

对于可配置产品：

```
$parent_ids = Mage::getModel('catalog/product_type_configurable')->getParentIdsByChild($childId); 
```

对于捆绑产品：

```
$parent_ids = Mage::getModel('bundle/product_type')->getParentIdsByChild($childId); 
```

这些仅适用于 id。您需要将子 SKU 转换为 id，然后将父 ID 转换回 SKU。从 SKU 获取 id 的简单方法是：

```
Mage::getModel('catalog/product')->getIdBySku($sku); 
```

此外，您可以有多个父 ID，因此您必须注意这一点。这是一个例子：

```
$child_id = Mage::getModel('catalog/product')->getIdBySku($child_sku);
$parent_ids = Mage::getModel('catalog/product_type_configurable')->getParentIdsByChild($child_id);
$parent_collection = Mage::getResourceModel('catalog/product_collection')
    ->addFieldToFilter('entity_id', array('in'=>$parent_ids))
    ->addAttributeToSelect('sku');
$parent_skus = $parent_collection->getColumnValues('sku'); 
```

# mysql - mysql_fetch_row() vs mysql_fetch_assoc() vs mysql_fetch_array()

> ID：11480129
> 
> 赞同：25
> 
> 时间：2012-07-14T01:01:11.013
> 
> 标签：mysql

> **可能重复：**
> [mysql_fetch_array、mysql_fetch_assoc、mysql_fetch_object](https://stackoverflow.com/questions/1536813/mysql-fetch-array-mysql-fetch-assoc-mysql-fetch-object)

我想要一个函数，它可以将结果集中当前行中的字段返回到关联数组中，并将结果指针移动到下一行。

迷茫之间

```
mysql_fetch_row()
mysql_fetch_assoc()
mysql_fetch_array() 
```

我应该使用哪一个？任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-14T01:04:58.317

> ^(**注意**：这些`mysql_*`函数的使用被认为*已弃用*，您应该改用提供更好安全性和更多功能的东西，例如[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/book.pdo.php)。)

### 它是什么？

您正在寻找[`mysql_fetch_assoc`，](http://php.net/manual/en/function.mysql-fetch-assoc.php)顾名思义，它将返回一个关联数组（列名作为键，值作为行值）。

* * *

### 不同的函数会返回什么？

所有提到的函数都将返回一个数组，它们之间的区别在于返回对象中用作键的值。

*   **[`mysql_fetch_row`](http://php.net/manual/en/function.mysql-fetch-row.php)**

    此函数将返回一行，其中值将按照 SQL 查询中定义的顺序出现，并且键的范围`0`将比所选列数少一。

*   **[`mysql_fetch_assoc`](http://php.net/manual/en/function.mysql-fetch-assoc.php)**

    此函数将返回一行作为关联数组，其中列名将是存储相应值的键。

*   **[`mysql_fetch_array`](http://php.net/manual/en/function.mysql-fetch-array.php)**

    这个函数实际上将返回一个数组，其中包含`mysql_fetch_row`并`mysql_fetch_assoc`合并为一个。它同时具有*数字*键和*字符串*键，可让您以最简单的方式访问数据。

    It is recommended to use either `_assoc` or `_row` though.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-14T01:27:32.207

`mysql_fetch_assoc` when you are manually referring to the fields.

`mysql_fetch_row` when you are using it as part of a `list($a,$b,$c...) = ...`

Never `mysql_fetch_array`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T01:08:09.353

mysql_fetch_assoc()

Say your table has two columns id and name. You can use the following snippet -

```
while ($row = mysql_fetch_assoc($result)) {
    echo $row["id"];
    echo $row["name"];
} 
```

# css - CSS3 投影

> ID：11480130
> 
> 赞同：2
> 
> 时间：2012-07-14T01:01:22.363
> 
> 标签：css, dropshadow

我正在尝试创建一个带有阴影的对象。我相信你需要 CSS3 来做到这一点，到目前为止我有类似的东西。

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css"> 
div
{
width:300px;
height:100px;
background-color:yellow;

}
</style>
</head>
<body>

<div></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T01:04:23.977

添加盒子阴影：

```
#thediv 
{
    width:300px;
    height:100px;
    -moz-box-shadow: 10px 10px 5px #888; /* firefox shadows*/
    -webkit-box-shadow: 10px 10px 5px #888; /* chrome / safari shadows */
    box-shadow: 10px 10px 5px #888; /* general browser support */
}​ 
```

[这个小提琴](http://jsfiddle.net/lyubent/BzMey/)上的例子，但作为一个注释，因为这是 CSS3 和 IE6/7 是旧的，它不会与它们一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:02:31.583

将此样式添加到您的 div 标签中

```
-moz-box-shadow: 10px 10px 5px #888888; 
/* Firefox 3.6 and earlier */
box-shadow: 20px 20px 55px #888888; 
```

# css - 使用 CSS 裁剪和平铺背景图像

> ID：11480133
> 
> 赞同：3
> 
> 时间：2012-07-14T01:01:38.900
> 
> 标签：css, css-sprites

我有一个 CSS 精灵图像，`footer1.png`. 我想使用 CSS 裁剪图像的一部分，然后将图像平铺作为我`.headimg3`元素的背景。

我正在尝试使用`clip`and`background`属性来实现这一点，但图像没有被裁剪。

```
.headimg3 {
  background: url(footer1.png) bottom;
  background-position: -35px -358px;
  background-repeat: repeat;
  height:34px;
  overflow: hidden; 
  clip: rect(0px, 200px, 0px, 400px); 
}
.headimgp {
  padding: 8px 0px 0px 10px;
  text-shadow: 2px 1px #fff;
} 
```

```
<div class="headimg3">
  <div class="headimgp">
    &nbsp; LATEST Updates
  </div>
</div> 
```

如何仅使用 CSS 裁剪和平铺背景图像？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T01:56:37.683

CSS`clip`属性需要有一个`position`of`absolute`才能正常工作。

```
.headimg3{
  background:url(footer1.png) bottom;
  background-position: -35px -358px;
  background-repeat: repeat;
  height: 34px;
  overflow: hidden; 
  position: absolute;
  clip: rect(0px, 200px, 0px, 400px); 
} 
```

**参考：** [**CSS Clip 属性和演示**](http://webdesignerwall.com/tutorials/5-simple-but-useful-css-properties)

**注意：**
您不能使用任何精灵图像的一部分并重复该部分，因为
`background-repeat`它适用***于整个图像***。

在这种情况下，使用[**图像编辑器**](http://pixlr.com/editor/)并裁剪出您需要的精灵并将其保存为单独的图像文件。

# use-case - 用例图：如何使用< > 但只是为了某个角色？

> ID：11480140
> 
> 赞同：0
> 
> 时间：2012-07-14T01:02:56.507
> 
> 标签：use-case

在下图中，有我绘制的使用图的一部分。

*   管理员和教授角色都可以访问以“查看”开头的案例，但**只有管理员**可以访问以“删除”开头的案例。

我怎么能指定这个？

![在此处输入图像描述](../Images/e37d52a82a3ddf120cec63c9cda3a8cd.png)

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:58:46.693

**您可以在<>**之间使用 if 条件（菱形块）来删除用例，以便您可以分离管理员和教授的访问权限。或者，如果您愿意，您可以添加文本，但这会对您的 UML 图产生负面影响。

# javascript - iOS WebApp 不允许定位服务？

> ID：11480151
> 
> 赞同：5
> 
> 时间：2012-07-14T01:05:44.590
> 
> 标签：javascript, jquery, iphone, ios, iphone-standalone-web-app

我有以下 JS 获取用户的当前位置并显示他们的邮政编码......

```
(function ($, geolocation) {
    if (geolocation) {
        geolocation.getCurrentPosition(function (position) {
            $.getJSON(
                "http://ws.geonames.org/findNearestAddressJSON?callback=?",
                {
                    lat : position.coords.latitude,
                    lng : position.coords.longitude
                },
                function (data) {
                    $(function () {
                        $('#zip').text(data.address.postalcode);
                    });
                }
            );
        });
    }
}(jQuery, navigator.geolocation)); 
```

[请帮助 CodeReview，因为我的原始代码非常糟糕，[https://codereview.stackexchange.com/questions/13481/to-use-or-not-to-use-public-variables-in-javascript/13483#comment21844_13483](https://codereview.stackexchange.com/questions/13481/to-use-or-not-to-use-public-variables-in-javascript/13483#comment21844_13483)]

HTML：

```
<div id="zip"></div> 
```

...然后在 div 中显示邮政编码。

这在 Mobile Safari 和桌面 Safari 中都可以正常工作，但是一旦我添加了`apple-mobile-web-app-capable`元标记，代码就会中断。

在每一步之后，我都会将代码记录到控制台，并且在常规 Safari 和 Mobile Safari 中都可以顺利运行。不过，只要我将它添加到我的主屏幕（头部带有元标记），该应用程序甚至都不会运行 JS 代码。它也没有麻烦登录到控制台，这让我想知道 WebApps 中是否允许位置服务。

如果在从主屏幕运行时重新加载页面，也会出现此问题。

有没有什么办法解决这一问题？这是个常见的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:39:46.097

是的，iOS 网络应用程序使用`apple-mobile-web-app-capable`元标记允许通过`navigator.geolocation`. 你没有错误回调，这可能会给你一个问题的提示。发布您的 HTML 以供进一步分析。

试着把它放在一个页面上（带`apple-mobile-web-app-capable`集合）：

```
navigator.geolocation.getCurrentPosition( function ( position ) {
    alert( 'yay!' );    
},
function ( error ) {
    alert( 'boo! error: ' + error.message );
} ); 
```

根据您的评论，这是可行的，因此它不是位置服务。尝试更改最后一行括号的顺序。

```
} )( jQuery, window.navigator.geolocation ); 
```

此外，这看起来有点奇怪，因为调用`.text()`会立即发生，而不是何时`.getJSON()`完成：

```
function (data) {
    $(function () {
        $('#zip').text(data.address.postalcode);
    });
} 
```

尝试：

```
function (data) {
    $('#zip').text(data.address.postalcode);
} 
```

所以你的最终代码应该是这样的：

```
( function ( $, geolocation ) {
    if (geolocation) {
        geolocation.getCurrentPosition( function ( position ) {
            $.getJSON(
                "http://ws.geonames.org/findNearestAddressJSON?callback=?",
                {
                    lat : position.coords.latitude,
                    lng : position.coords.longitude
                },
                function (data) {
                    $('#zip').text(data.address.postalcode);
                }
            );
        });
    }
} )( jQuery, window.navigator.geolocation ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:10:59.887

Apple 有自己的方式来获取 webApps 的本地化。如果您在 iOS 开发人员计划中，您绝对应该查看官方文档。

看看这个：http: [//developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/GettingGeographicalLocations/GettingGeographicalLocations.html#//apple_ref/doc/uid/TP40002051-CH5-SW2](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/GettingGeographicalLocations/GettingGeographicalLocations.html#//apple_ref/doc/uid/TP40002051-CH5-SW2)

# python - 如何将不同的课程附加到每个教室？

> ID：11480158
> 
> 赞同：-2
> 
> 时间：2012-07-14T01:06:48.583
> 
> 标签：python

我想将不同的课程附加到两个不同的教室中，但是它不断将相同的课程添加到两个教室中。这是我的 AddCourse 功能

# 已编辑

我根据您的建议修改了我的代码。

```
class Classroom:
    """I omitted part of the class for brevity"""
    def __init__(self, Seed = None, ClassroomId = None, FirstCourseStartTime = None, LastCourseEndTime = None, CourseList = [], ProfessorList = []):
        self.setFirstCourseStartTime(FirstCourseStartTime)
        self.setLastCourseEndTime(LastCourseEndTime)
        self.setCourseList(CourseList)
        self.setProfessorList(ProfessorList)
        self.setSeed(Seed)
        self.setClassroomId(ClassroomId)
    def addCourse(self, Course):
        self.CourseList.append(Course)
    def setCourseList(self, List):
        self.CourseList = List
#the statements below are from a different file to run the code/class above    
Classroom1 = Classroom(Seed = os.urandom(1024/8), FirstCourseStartTime = 8, LastCourseEndTime = 19.75)
Classroom2 = Classroom(Seed = os.urandom(1024/8), FirstCourseStartTime = 8, LastCourseEndTime = 19.75)
# Adding the courses to the classrooms
Classroom1.addCourse(Course0)
Classroom1.addCourse(Course1)
Classroom1.addCourse(Course2)
Classroom1.addCourse(Course3)
Classroom1.addCourse(Course4)
Classroom1.addCourse(Course5)
Classroom1.addCourse(Course6)
Classroom1.addCourse(Course7)
Classroom2.addCourse(Course8)
Classroom2.addCourse(Course9)
Classroom2.addCourse(Course10)
Classroom2.addCourse(Course11)
Classroom2.addCourse(Course12)
Classroom2.addCourse(Course13)
Classroom2.addCourse(Course14)
Classroom2.addCourse(Course15) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:08:51.560

如果你给出你的类定义，那真的很有帮助。

猜测一下，您已将 .CourseList 定义为类变量而不是对象变量。

另外，请查看[PEP 8](http://www.python.org/dev/peps/pep-0008/)格式指南；方法应该`.like_this`，不是`.LikeThis`！

```
class Classroom(object):
    courses = []     # class variable - all instances share the same list

    def __init__(self):
        self.courses = []    # object variable - each instance has its own 
```

**编辑：**好的；现在让我们看看你对`.setCourseList()`...的定义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:52:00.113

看起来你的问题是你的类的所有实例都在处理同一个列表，因为你只声明了一次。

这是您的问题的一个示例，没有所有无关紧要的额外内容：

```
class Classroom(object):

    def __init__(self, course_list=[]):
        self.course_list = course_list

    def add_course(self, course):
        self.course_list.append(course) 
```

当我们使用它时，我们会看到您描述的行为：

```
c1 = Classroom()
c2 = Classroom()

c1.add_course('ENG 101')
c2.add_course('MATH 101')

print c1.course_list
print c2.course_list 
```

印刷：

```
['ENG 101', 'MATH 101']
['ENG 101', 'MATH 101'] 
```

为了证明这是同一个列表，我们可以打印`id`每个实例的列表：

```
print id(c1.course_list)
print id(c2.course_list) 
```

对我来说，这会输出这个（尽管每次都可能不同）：

```
4299912760
4299912760 
```

**您的问题行在`course_list=[]`的`__init__`参数列表中。** 您正在那里定义列表，然后可能不会将其复制到其他任何地方。这意味着每当您附加到列表时，它始终是您要附加到的同一个列表。重要的是要了解，在 python 中，方法`def`行（显然不是主体）只运行一次，而不是每次创建新实例（或运行函数，就此而言）。

这是一个更正的版本。而不是默认为`[]`，您最应该始终默认为`None`然后将其设置为没有给出任何内容的列表。

```
class Classroom2(object):

    def __init__(self, course_list=None):
        self.course_list = course_list or []

    def add_course(self, course):
        self.course_list.append(course)

c1 = Classroom2()
c2 = Classroom2()

c1.add_course('ENG 101')
c2.add_course('MATH 101')

print c1.course_list
print c2.course_list 
```

现在按预期打印：

```
['ENG 101']
['MATH 101'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T01:16:54.023

您在寻找`extend`方法吗？（而不是`append`）

您可以将多个值添加到列表中，如下所示：

```
a = [1,2,3]
a.extend([4,5,6])
print a // [1,2,3,4,5,6] 
```

（虽然我不确定我是否理解你想要做什么......）

# android - 尝试将 OnClickListener 添加到按钮时出现 NullPointerException

> ID：11480162
> 
> 赞同：1
> 
> 时间：2012-07-14T01:07:08.987
> 
> 标签：android

我在 Java 类中执行以下操作，而不是在 Activity 中。

```
LinearLayout buttonLayout = (LinearLayout) parentContext.getLayoutInflater().inflate(R.layout.app_dialog, null);
Button btnSignIn = (Button) parentContext.findViewById(R.id.BTN_ID_SIGN_IN);
Button btnCancel = (Button) parentContext.findViewById(R.id.BTN_ID_CANCEL);
btnSignIn.setOnClickListener(new OnClickListener(){
    public void onClick(View v) { ... }}); 
```

布局xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/footer" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:orientation="horizontal"
    android:layout_alignParentBottom="true" style="@android:style/ButtonBar" >

    <Button android:id="@+id/BTN_ID_SIGN_IN" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_weight="1"
        android:text="@string/em_btn_signin" />

    <Button android:id="@+id/BTN_ID_CANCEL" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_weight="1"
        android:text="@string/em_btn_cancel" />
</LinearLayout> 
```

最后一行是抛出一个 NPE。当我在没有 onClickListener 的情况下尝试我的代码时，按钮会完美显示（尽管当我点击它们时没有任何反应）。为什么它不让我为按钮设置任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T01:19:10.900

试试这个：

```
Button btnSignIn = (Button) buttonLayout.findViewById(R.id.BTN_ID_SIGN_IN);
Button btnCancel = (Button) buttonLayout.findViewById(R.id.BTN_ID_CANCEL);
btnSignIn.setOnClickListener(new OnClickListener(){
    public void onClick(View v) { ... }}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:17:04.240

你怎么 `btnSignIn.setOnClickListener(this)`没有错过它？

xml中的ID不应该只是小写吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T01:23:56.033

如果您的按钮在 R.layout.app_dialog 中，请调用：

```
Button btnSignIn = (Button) buttonLayout.findViewById(R.id.BTN_ID_SIGN_IN);
Button btnCancel = (Button) buttonLayout.findViewById(R.id.BTN_ID_CANCEL); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T06:07:34.577

试试这样

```
public class className extends Activity implements OnClickListener {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_layout); 

            Button btnSignIn = (Button) buttonLayout.findViewById(R.id.BTN_ID_SIGN_IN);
            Button btnCancel = (Button) buttonLayout.findViewById(R.id.BTN_ID_CANCEL);
}

public void onClick(View v) {
    switch (v.getId()) {
    case R.id.BTN_ID_SIGN_IN:
        Intent reg = new Intent(this, Your_Next_Activity.class);
        startActivity(reg);
        finish();
        break;

    case R.id.BTN_ID_CANCEL:
        finish();
        break;

           default:break;
}
} 
```

希望你能通过这个得到解决。

# jquery - 将 qtip(jQuery 插件) 应用于页面上新加载的项目

> ID：11480164
> 
> 赞同：0
> 
> 时间：2012-07-14T01:07:22.293
> 
> 标签：jquery, mysql, ajax, plugins, qtip

首先，这是 qtip，一个 jQuery 插件： http: [//craigsworks.com/projects/qtip2/](http://craigsworks.com/projects/qtip2/)基本上它可以制作漂亮的工具提示。

我在 mysql 数据库结果页面上使用 qtip，当我第一次加载页面时，qtip 工作得很好。但是，我的页面上有排序链接，导致 div 内的信息完全改变（使用 AJAX 将新信息放入 div，方法是创建一个新的 mysql 查询来处理数据并将其放入表中以替换表这页纸）。当我单击排序按钮时，除了 qtips 消失之外，一切正常。我在图像标题（“标题”）上使用 qtips，所以当我翻转排序表上的图像时，它会回到正常的工具提示。

我认为错误在于 $(document).ready 意味着 qtip 内容只会在第一页加载时加载，因此当我更改表格时，所有 qtip 都会消失。我在 qtip 论坛上发现了一个似乎与我的问题有关的主题（[http://craigsworks.com/projects/forums/thread-solved-reload-qtip-with-new-items](http://craigsworks.com/projects/forums/thread-solved-reload-qtip-with-new-items)），我尝试了该主题中的所有内容，并且我使用的是最新版本的 qtip，所以我使用 on() 而不是 live() 因为 live() 已被弃用。它仍然没有解决它。这是代码：

```
<script type="text/javascript">
jQuery(document).ready(function() {
    $('img[title]').on('mouseover', function() { 
        if( typeof( $(this).data('qtip') ) == 'object' ){ return; }
        $(this).qtip({
            content: {
                text: false
            },
            style: 'cream',
            position: {
                viewport: $(window)
            }
        });
        $(this).qtip('show');
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:46:26.090

通过存储 qTip 设置，在加载新内容后可以很容易地（重新）使用相同的设置初始化 qTip。

如果没有完全了解您的 javascript，我无法具体说明，但应该这样做：

```
jQuery(document).ready(function() {
    var qtipOptions = {
        content: { text: false },
        style: 'cream',
        position: { viewport: $(window) }
    };

    $('img[title]').qTip(qtipOptions);

    $("#myButton").on('click', function(){
        $.ajax({
            //...
            //...
            //...
            success(function(html){
                $("#mySelector").html(html);
                $('img[title]').qtip('destroy').qtip(qtipOptions);
            })
        });
    });
}); 
```

# java - 多态/动态绑定，超类还是接口？

> ID：11480166
> 
> 赞同：1
> 
> 时间：2012-07-14T01:07:27.607
> 
> 标签：java, oop, polymorphism

如果我有几个子类型，每个子类型都继承一个抽象超类，并且这个超类实现一个接口——在实现动态绑定/多态性时，将对象声明为超类类型与接口类型有什么区别？

所以 A,B,C,D 从 S 扩展而来，S 实现了 I。

我可以：

```
S a = new A();
S b = new B(); 
```

或者

```
I a = new A();
I b = new B(); 
```

我倾向于使用接口，但我突然想知道使用超类是否更好，以防你将接口分成两个接口......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T01:16:00.167

从打字的角度来看，没有区别。（除非您通过使用反射在运行时内省类型来专门“寻找”......）

从运行时性能的角度来看，没有区别。（除了加载类的时间可能存在一些非常小的差异......在所有实际用例中都可以忽略。）

从代码实现的角度来看，这两种方法各有利弊：

如果您只使用超类（没有接口），您可能可以编写更少的代码。但另一方面是您的代码不太灵活：

*   您正在以限制您编写新实现的能力的方式尝试实现的外部 API。这个`java.io.OutputStream`类就是一个典型的例子。因为它是一个类，你必须创建一个子类来实现一个新的流类型，你可能会发现你必须编写子类来覆盖你“继承”的所有基础设施。

*   一个类只能有一个超类这一事实进一步限制了您使用树形 API 层次结构。

*   客户端*必须在*更大程度上针对实现类 API 进行编码......因为这就是全部。而这限制了程序员改变他/她的想法的能力。

* * *

底线：如果特定用例不需要您能够做这些事情（现在**或将来**），那么使用接口没有任何好处。但很少有真正的用例是这样的。而且使用接口的增量实现工作量很小。

* * *

> 我应该补充一点，我不是在问是否使用接口。我猜接口可以用来强迫某人实现方法（并且从不声明为类型）？

嗯，是的。但是抽象方法也可以。这不是使用接口的真正意义。真正的重点是接口：

*   允许使用类可能的更丰富的类型层次结构，并且
*   允许独立于实现类编写客户端代码。

> 我只是问使用接口作为对象类型为多态性带来什么好处？

从打字和性能水平：无 - 见上文。

我想，您可能会争辩说，如果您以*跨越实现层次结构*的方式使用接口，那么您在客户端级别具有更大的灵活性。我想你可以称之为*“多态性的好处”*。（相比之下，如果您的接口层次结构完全反映了您的实现类层次结构，那么您可能什么都没有实现……至少就编写的代码而言。）

然而，多态性是达到目的的一种手段，而不是其本身的目标，所以我认为从抽象意义上询问*“多态性*的好处”是没有意义的。真正的重点是以有意义的方式设计和实现程序，并产生可维护的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:15:34.073

这完全取决于上下文。

实例化代码将只能访问您将变量声明为的接口或类可用的成员。通常目标是限制实例化代码导入的内容。如果它只需要知道 a `List`，则将其声明为 a `List`。如果它需要 in 中的方法`ArrayList`，则将其声明为`ArrayList`. 不要让实例化代码知道的比它需要的更多。

# python - Matplotlib ion() 和子进程

> ID：11480167
> 
> 赞同：7
> 
> 时间：2012-07-14T01:07:37.367
> 
> 标签：python, matplotlib, subprocess, interactive-mode

我正在尝试弹出一个情节，以便用户可以确认配件是否有效，但不要挂断整个过程。然而，当窗口出现时，里面从来没有任何东西，它是“无响应”。我怀疑与子进程功能的交互不好，因为这段代码是前端和数据处理，用于在 C++ 中运行的模拟。

```
import subprocess
import numpy as np
from matplotlib import pyplot as mpl
...
mpl.ion()
fig = mpl.figure()
ax = fig.add_subplot(1,1,1)
ax.grid(True)
ax.plot(x, y, 'g')
ax.scatter(X, Y, c='b')
ax.scatter(min_tilt, min_energy, c='r')
mpl.draw()
...
subprocess.call(prog) 
```

以下子流程确实打开了。如果我删除`ion()`call 并 use `mpl.show()`，那么情节可以正常工作，但整个过程会一直持续到窗口关闭。我需要在用户查看图表时继续该过程。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T12:28:13.490

代替 mpl.draw()，尝试：

```
mpl.pause(0.001) 
```

当使用 matplotlib 交互模式 ion() 时。请注意，这只适用于 matplotlib 1.1.1 RC 或更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:54:23.590

这可能是矫枉过正，但由于没有人有更好的解决方案，我去了线程模块并且它起作用了。如果有人有更简单的方法来做到这一点，请告诉我。

```
import subprocess
import threading
from matplotlib import pyplot as mpl
...
class Graph(threading.Thread):
   def __init__(self,X,Y,min_tilt, min_energy):
       self.X = X
       self.Y = Y
       self.min_tilt = min_tilt
       self.min_energy = min_energy
       threading.Thread.__init__(self)

   def run(self):
       X = self.X
       Y = self.Y
       dx = (X.max()-X.min())/30.0
       x = np.arange(X.min(),X.max()+dx,dx)
       y = quad(x,fit)
       fig = mpl.figure()
       ax = fig.add_subplot(1,1,1)
       ax.grid(True)
       ax.plot(x, y, 'g')
       ax.scatter(X, Y, c='b')
       ax.scatter(self.min_tilt, self.min_energy, c='r')
       mpl.show()
thread = Graph(X,Y,min_tilt,min_energy)
thread.start() 
```

# javascript - Sencha Touch 和 PhoneGap

> ID：11480169
> 
> 赞同：0
> 
> 时间：2012-07-14T01:07:45.520
> 
> 标签：javascript, android, objective-c, cordova, sencha-touch

您在 Sencha Touch 中构建了您的应用程序，并将其加载到 PhoneGAP 中的 Web 视图包装器中。现在，您的 Sencha Touch Web 应用程序将如何从 PhoneGAP 访问数据？因为它在网络视图中？

例如，您使用 PhoneGAP 获取 UDID 或设备联系人列表等，您打算如何将其发送到 sencha？因为它在网络视图中？可能的？如果不是，你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:22:48.777

意图？Android 中没有什么比 Intent 更通用的了。

所以 Sencha Touch 部分发出一个意图。您的 PhoneGap HTML5 WebView 捕捉到了这个 Intent。WebView 仍在 Activity 中。我相信它只是一种不同类型的活动。因此，活动 webview 可以处理数据/生成基于数据的输入或其他任何内容，并在 Intent 的捆绑中发送出去。任何一方也可以存储在 SQLite 或 SharedPreferences 中，并仅使用意图通知数据更改或请求。还要考虑 startActivityForResult(intent) 来取回数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T02:38:19.277

首先，Sencha Touch 只是您用来构建应用程序的框架。它不控制您的应用程序。

如果您使用 Phonegap 作为您的 Webview 包装器。顺便说一句，Sencha 现在还提供“Native Wrapper”。

您将调用 Phonegap 将映射到其本地对应物的各种 javascript api。根据您调用的 api 以及是否返回了任何数据，您可以在回调中处理此问题。

就是这样，正如你所描述的那样，需要向 Sencha 发送任何东西。它更像是一个以 javascript 为中心的回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:08:26.620

以下链接可能会对您有所帮助。

[http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/) http://robertdougan.com/posts/packaging-sencha-touch-2-with-phonegap-cordova

# javascript - 为什么这个扩展不起作用？

> ID：11480170
> 
> 赞同：2
> 
> 时间：2012-07-14T01:07:54.863
> 
> 标签：javascript, function, prototype

我想有一种方法可以为预先存在的功能添加功能，所以我做了这个：

```
Function.prototype.attachFunction = function(toAttach)
{
    var func = this; //This is the original function, which I want to attack toAttach function to.

    //Can I do this without wrapping it in a self-executing function? What's the difference?
    func = (function()
    {
        return function()
        {
            func();
            toAttach();
        }
    })();

    return func; //Return the newly made function, not really important.    
} 
```

我将它粘贴到 Google Chrome 控制台中，没有错误，但是，它根本没有（或者看起来）改变原始功能。

```
f = function() {console.log("g");};
f.attachFunction(function(){console.log("New function!");});
f(); //Prints out just "g". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:39:29.533

`attachFunction`您在原型上设置的方法`Function`是一个高阶函数或组合器，它接受一个函数并返回一个新函数。正如预期的那样，它被之后创建的任何函数继承。但是，当它被调用时，它不会`f`以任何方式改变 的状态，它只是生成一个调用 的新函数`f`，或者更确切地说是调用函数。

因此，如果您想查看两条`console.log`消息，您只需调用它返回的函数，如下所示：

`f.attachFunction(function(){console.log("hi")})();`
或更简单地说：
`f.attachFunction(f)();`

请注意，虽然函数是对象，但其执行上下文（代码）`f`并不是`f`可以直接操作的属性，而是保存在内部属性中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:42:36.057

执行时`attachFunction`，它返回一个执行`func()`和的函数`toAttach`。但是，如果您将代码更改为以下内容，它将尝试执行这两个函数，而当前旧的 f 仍然在最后被调用。

```
f = function() {console.log("g");};
f = f.attachFunction(function(){console.log("New function!");});
f(); //Causes an infinite loop since calling func() is the same as calling this() 
```

要合并两个函数，我们需要以相同的方式包装它们，但不是在扩展 Function 时

```
var func1 = function(){
    console.log('g');
};
var func2 = function(){
    console.log('New function!');
};

func1 = (function(f1,f2){
    return function(){            
        f1();
        f2();
    }
}(func1, func2));

func1(); //Writes out both g and New function!​​​​​​​​​​​​​​​​​​​​ 
```

我传入 func1 和 func2 作为参数的原因是为了防止同样的问题进入无限循环。我想在那个时间点保持对这些函数的引用。

辅助函数将如下所示

```
function combineFunctions(f1, f2){
    return function(){
        f1();
        f2();
    }
} 
```

并且会像这样使用

```
var f = function() {console.log("g");};
f = combineFunctions(f,function(){console.log("New function!");});
f(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T03:31:41.680

我刚刚发现了两个问题。

### 问题1。

```
f = function() {console.log("g");};
f.attachFunction(function(){console.log("New function!");});
f(); 
```

它绝对不起作用，因为`attachFunction`只是环绕你的原始函数并返回包裹，它不会改变原始函数，这意味着你的`f`函数仍然`f = function() {console.log("g");}`

### 问题 2。

如果您`f`使用 的结果重新分配，则会发生`attachFunction`an 。`Maximum call stack size exceeded`在 的定义中`attachFunction`：

```
func = (function()
{
    return function()
    {
        func();
        toAttach();
    }
})();

return func; 
```

该`func`函数递归地调用自己。

## 更新

我更喜欢这种方法。

```
Function.prototype.attachFunction = function(toAttach)
{
    var that = this; 

    func = (function()
    {
        return function()
        {
            that();
            toAttach();
        }
    })();

    return func; //Return the newly made function, not really important.    
}
f = function() {console.log("g");};
f = f.attachFunction(function(){console.log("New function!");});
f(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T01:55:08.853

Underscore.js 的[wrap() 函数](http://documentcloud.github.com/underscore/docs/underscore.html#section-60)应该非常接近你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T02:01:13.343

目前，您正在尝试调用一个变量，就好像它是一个函数一样（`toAttach`是一个变量，并且您在它的另一边打了一些括号）。考虑一下： `toAttach`可能包含一个函数，但这并不能使它成为一个函数（就像杂货店不是苹果一样）。相反，您需要调用变量中包含的函数。

有几种方法可以做到这一点（尽管这里只有一种或两种适用），但没有一种[正确]方法涉及`eval()`（生活课程）。

考虑[这个](https://stackoverflow.com/questions/1723287/calling-a-javascript-function-named-in-a-variable)线程。将函数名作为字符串传递，然后使用

```
window[toAttach](); 
```

调用函数。它有点hacky，并且缺乏将函数作为对象传递的技巧，但它确实有效。

或者（完全取决于您的需要）您可以将函数绑定到事件。如果你特别狡猾（为什么不呢？）你可以使用

```
setTimeout(toAttach, 0); 
```

where`toAttach`是对实际函数的引用（再次）。

最后，也是最好的，我相信，是 Function.call() 方法。使用它，您可以调用填充在变量中的函数，甚至将其传递给`this`.

```
toAttach.call([Context]); 
```

函数的上下文在哪里`[Context]`（即在`this`函数内部时指的是什么，在大多数情况下，可以将其留空以获得所需的范围）。我不能说我已经在您的特定情况下对其进行了测试（这就是为什么我最后将其包括在内），但我相信它应该可以为您提供您正在寻找的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-14T02:28:38.980

这是我实现这一目标的尝试，它并不干净，就像它完全在原型中一样，但它可以工作。可能有比我更好的方法。

```
var bindings={};

function execBindings(func_name) {
    if (bindings[func_name] != undefined) {
        for (var i=0;i<bindings[func_name].length;i++) {
            bindings[func_name][i]();
        }
    }
}

Function.prototype.bind=function(action){
    if (bindings[this.name] == undefined) {
        bindings[this.name]=[];
    }
    bindings[this.name].push(action);
} 
```

然后，使用绑定：

```
function f() {
    alert("foo");
    execBindings("f");
}

f.bind(function(){
    alert("bar");
});

f.bind(function(){
    alert("test");
});

f(); 
```

这导致 3 个警报，按照绑定到函数的顺序。

# java - 从android中的SQLite获取单个值

> ID：11480171
> 
> 赞同：6
> 
> 时间：2012-07-14T01:08:04.463
> 
> 标签：java, android, sqlite, multiple-tables

我现在正在为 android 开发我的第一个应用程序，我正在使用多个表来获取和插入数据。在开发过程中，发现自己从只有两列的表中获取数据`STATS(_id, stat_name)`。我的问题是什么？我有一个包含 10 个按钮的活动，每个按钮都与一个`stat_name`. 当用户按下其中一个按钮时，应用程序正在“进入”`STATS`表格以获取正确信息`_id`，然后将其输入`_id`到另一个表格`GAME_STATS(_id, PlayerId (fk), GameId(fk), StatsId(fk)(andmore))`中`STATS._id = GAME_STATS.StatsId`，我基本上必须为`PlayerId`.

现在，我正在这样做：

```
public String getStatId(String statName){
    String statId = "Error";
    Cursor c = mDb.query(STAT_TABLE, new String[] {AbstractDbAdapter.STAT_ID, AbstractDbAdapter.STAT_NAME}, AbstractDbAdapter.STAT_NAME+ " = " +statName, null, null, null, null);
    int count = c.getCount();
    if(count == 1){
        c.moveToFirst();
        statId = c.getString(c.getColumnIndex(AbstractDbAdapter.STAT_ID));
    }
    c.close();
    mDb.close();
    Log.d("FootballApp","StatId =" +statId);
    return statId;      
} 
```

我的问题是，我知道应该只返回一个值，而且我仍然必须使用 Cursor 才能这样做。此外，在我看来，编写所有代码只是为了从一张表中获取一个 id，这看起来既复杂又耗时。我的应用程序中有 9 个表，每次我需要来自不同表的 _id 时，我都必须编写类似的方法，例如，只有名称。

有人可以告诉我是否有更简单的方法可以做到这一点？请:)谢谢！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T01:31:14.937

我认为没有比这更简单的了。但是，您可以使该方法更通用，以便您可以重用代码：

```
public String getFromDb(String tableName, String select, String selectBy, String selectName){
    String selection = "Error";
    Cursor c = mDb.query(tableName, new String[] {select}, selectBy + "=" + selectName, null, null, null, null);
    if(c.getCount() == 1){
        c.moveToFirst();
        selection = c.getString(c.getColumnIndex(select));
    }
    c.close();
    mDb.close();
    Log.d("FootballApp", select + "=" + selection);
    return id;      
} 
```

示例用法：

```
int statID = getFromDb(STAT_TABLE, AbstractDbAdapter.STAT_ID, AbstractDbAdapter.STAT_NAME, statName); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-14T01:33:10.097

这就像它得到的一样简单，但是`Cursor.moveToFirst()`如果光标为空则返回 false，因此您可以取消`c.getCount()`调用并直接说出来`if(c.moveToFirst())`。这将为您节省一点打字时间：）

# c# - 通过网络提高 mysql 性能

> ID：11480173
> 
> 赞同：0
> 
> 时间：2012-07-14T01:08:15.007
> 
> 标签：c#, mysql, winforms, networking

我有一个带有 Centos 和 mysql 的服务器以及另一个带有 Windows 7 的客户端，它更新了网络上的服务器。

有什么办法可以提高性能吗？例如，要在本地更新 100,000k 条记录，大约需要 1 分钟，而通过网络更新则需要 15 分钟！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:52:15.360

`mysql`客户端需要一个`--compress`交换机来压缩网络上的流量。听起来这可能对您有所帮助。有关 C# 驱动程序版本的信息记录在[UseCompression](https://dev.mysql.com/doc/connector-net/en/connector-net-connection-options.html)下。

# jquery - 试图让一些 div 淡出然后被移除

> ID：11480177
> 
> 赞同：2
> 
> 时间：2012-07-14T01:08:51.740
> 
> 标签：jquery, fadeout

我正在尝试使一些 div 淡出然后被删除。

```
$("article.articles .thumb a").click(function() {
    $(this).parent().parent().addClass("selected");
    $("article.post").not(".selected").fadeOut(500).delay(1500).remove();
    $('#stream').isotope('reLayout');
}); 
```

但是 div 会立即被删除而不会褪色。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:12:01.743

您可以使用`fadeOut()`在淡入淡出效果完成后执行的回调函数。

> .fadeOut( [持续时间] [, 回调] )

```
$("article.post").not(".selected").fadeOut(500, function(){
   $(this).remove();
}) 
```

或者：

```
$("article.post").not(".selected").fadeOut(500).delay(2000).queue(function(){
   $(this).remove()
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:12:22.700

```
$("article.articles .thumb a").click(function() {
    $(this).parent().parent().addClass("selected");
    $("article.post").not(".selected").fadeOut(500, function(){
    setTimeout(function(item){ 
      jQuery(item).remove(); }, 1500, $(this));
});
    $('#stream').isotope('reLayout');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T01:14:46.010

在删除它之前，您不会等待 div 淡出。您需要创建一个回调函数并在其中调用 remove 。

使用这个片段-

```
 $("article.post").not(".selected").fadeOut(500, function(){
                            $("article.post").not(".selected").remove();
                        }); 
```

# java - opengl java glTexCoord 问题。我做得不对吗？

> ID：11480178
> 
> 赞同：0
> 
> 时间：2012-07-14T01:09:09.517
> 
> 标签：java, opengl, sprite-sheet

好的，我是一个自学成才的程序员，我正在尝试使用 lwjgl 和 slik-utils 来制作一个库来提供制作游戏的工具。我一直在尝试制作一个精灵表，并且我正在使用 glTexCoord() 来尝试仅获取图像的一部分。但尽我最大的努力，我没有工作。这是绘制代码。

```
public SpriteSheet draw(int x, int y, Point2D p)
    {
    GL11.glPushMatrix();
    float x1 = p.posX * size + (size / 2F);
    float y1 = p.posY * size + (size / 2F);
    float d = 1F / texture.getImageHeight();
    int i = size / 2;
    //Texture centers for coords
    float x2 = x1 * d;
    float y2 = y1 * d;
    float d1 = i * d;

    GL11.glBindTexture(GL11.GL_TEXTURE_2D, texture.getTextureID());
    GL11.glBegin(GL11.GL_QUADS);
    GL11.glTexCoord2f(x2 - d1, y2 - d1);
    //GL11.glTexCoord2f(0, 0);
    GL2D.vertex(x - i, y - i);
    GL11.glTexCoord2f(x2 - d1, y2 + d1);
    //GL11.glTexCoord2f(0, 1);
    GL2D.vertex(x - i, y + i);
    GL11.glTexCoord2f(x2 + d1, y2 + d1);
    //GL11.glTexCoord2f(1, 1);
    GL2D.vertex(x + i, x + i);
    GL11.glTexCoord2f(x2 + d1, y2 - d1);
    //GL11.glTexCoord2f(1, 0);
    GL2D.vertex(x - i, y + i);
    GL11.glEnd();
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, 0);
    GL11.glPopMatrix();
    //TexturedQuad2D t = new TexturedQuad2D(32, 32, Color.black, texture);
    //t.draw(x, y);
    return this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:00:29.467

是的，你做错了:)
你的 x 和 y 是你的世界空间坐标而不是你的纹理坐标空间，想象你的 x 和 y 在坐标 700、800 上，你的纹理大小是 512。700 / 512 = 1.4，纹理坐标从 0 到 1。
所以第一步尝试使用 0 和 1 设置纹理坐标。

```
 GL11.glTexCoord2f(0, 0);
 GL11.glTexCoord2f(0, 1);
 GL11.glTexCoord2f(1, 1);
 GL11.glTexCoord2f(1, 0); 
```

现在作为第二步开始弄清楚如何计算你的纹理坐标的一部分，
所以如果我们有一个有 2 帧的精灵，我们将第一帧从 0 到 0.5，第二帧从 0.5 到 1

```
//first frame would be
 GL11.glTexCoord2f(0, 0);
 GL11.glTexCoord2f(0, 1);
 GL11.glTexCoord2f(0.5, 1);
 GL11.glTexCoord2f(0.5, 0);
//second frame would be
 GL11.glTexCoord2f(0.5, 0);
 GL11.glTexCoord2f(0.5, 1);
 GL11.glTexCoord2f(1, 1);
 GL11.glTexCoord2f(1, 0); 
```

现在作为第三步，编写一个精灵类来为你计算这个坐标！

附言。第二次通知您是否在任何地方为 OpenGL 启用纹理*GL11.glEnable(GL11.GL_TEXTURE_2D);* 得到任何纹理？

# java - 使用私有环境变量对类进行单元测试

> ID：11480181
> 
> 赞同：1
> 
> 时间：2012-07-14T01:10:10.897
> 
> 标签：java, junit, glassfish, environment-variables

我有一个 EJB，我想对它的公共方法进行单元测试。我正在测试 EJB 作为 pojo。所以我只是实例化了它并调用了公共方法。

问题是公共方法设置了一些 glassfish 环境属性，环境变量是私有的。所以我无法在类之外设置它，当我只是为环境对象调用该公共方法时，它会抛出 nullPointerException。

我想测试的课程有，

```
@Resource(name="NameServiceEnvironment")
private Properties nameServiceEnvironment;

    public void setup() {

        // Set the environment.
        Properties environment = new Properties(); 
        environment.setProperty("name.host", this.nameServiceEnvironment.getProperty(NAME_HOST));
        environment.setProperty("name.port", this.nameServiceEnvironment.getProperty(NAME_PORT));

...} 
```

所以现在对于 nameServiceEnvironment 它抛出空指针异常。

现在，我刚刚从测试类实例化了上面的类并调用了 setup 方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T01:18:56.080

您始终可以访问，甚至可以访问私有方法。在您的测试中使用反射来访问私有属性 - 设置它们并继续使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T01:23:52.237

在单元测试时添加一个 setter`nameServiceEnvironment`并注入你自己的。`nameServiceEnvironment`

**根据评论更新**

或者，您可以将 setup 中的属性位提取到另一个方法中，并在测试中覆盖它以伪造。

```
public void setup() { 
    setupEnvironment();            
    ...
}

void setupEnvironment(){ //you would override this in your unit test
   Properties environment = new Properties(); 
   environment.setProperty("name.host", this.nameServiceEnvironment.getProperty(NAME_HOST));
   environment.setProperty("name.port", this.nameServiceEnvironment.getProperty(NAME_PORT));
} 
```

嗯，不完全是假的。您只需在测试中绕过这一位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T01:23:32.373

您的 nameServiceEnvironment 使用设置

```
@Resource(name="NameServiceEnvironment") 
```

所以您只需要确保您的测试环境配置了该资源（就像在 Glassfish 环境中一样）。例如，您可以使用 Spring。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T01:26:03.003

是因为没有注入nameServiceEnvironment吗？这也是 Arquillian 受欢迎的原因之一。我用它几个月来对容器中的 ejb 进行单元测试，但它并不容易使用（至少对我来说）。使用 arquillian，您可以完成所有依赖注入，然后执行测试方法。我还按照另一个建议使用了反射。并且根据您使用的 DI 框架，您可能也可以将其配置为测试以注入它。

如果你想这样做，反射代码：

```
public class ATest {

@Test
public void testEjb() throws Exception {
    MyEJB myEjb = new MyEJB();
    Class<? extends MyEJB> cls = myEjb.getClass();
    Field field = cls.getDeclaredField("props");
    field.setAccessible(true);
    field.set(myEjb, new Properties());
    myEjb.somePublicMethod();
}   
class MyEJB {
    private Properties props;
    public void somePublicMethod() {
        System.out.println("props has: " + props);
    }
} 
```

}

# iphone - 网络视图中的 YouTube - iPhone

> ID：11480182
> 
> 赞同：2
> 
> 时间：2012-07-14T01:10:13.760
> 
> 标签：iphone, objective-c, ios, cocoa-touch, youtube

这对我来说很奇怪......

我有一个简单的 WebView，它可以像 safari mobile (iPhone) 一样加载并与用户交互。现在，当您在 safari 中访问 m.youtube.com 时，当您单击指向此类内容的链接时，网址会发生变化......

```
http://m.youtube.com/watch?gl=US&hl=en&client=mv-google&v=HX6SyoZ5kw8 
```

问题是我认为我的 webview 中没有使用该 url ......我是什么意思？以下代码用于每次用户尝试单击链接时加载一个 url，它可以工作，但我对 Youtube 有问题...

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
NSURL *url = request.URL;
NSString *urlString = url.absoluteString;
NSLog(@"%@",urlString);
VideoURLTextBox.text = urlString;
return YES;
} 
```

当我第一次启动 webview 时，它会将 m.youtube.com 和 NSLogs() 加载到我的控制台中，但是当我决定单击视频时，它无法 NSLog() 因此我认为没有加载新的 url ，但是当你在 safari 中加载 m.youtube.com 并点击一个视频时，你会加载一个类似上面的 url，那么为什么这不是我的 iPhone 应用程序中的 NSLog() 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:01:04.683

您可能看到的是 youtube 视频正在运行 javascript 来播放视频，您必须拦截 javascript 回调才能看到。这是 youtube 视频播放器 api 的链接，详细说明了回调，[https://developers.google.com/youtube/js_api_reference#SubscribingEvents](https://developers.google.com/youtube/js_api_reference#SubscribingEvents)

如果您只想在 iOS 应用程序中嵌入 youtube 视频，请使用它。

使用移动 YouTube 网站不是很好，过去我遇到了很多问题，最终制作了一个 UIWebView 类别。我遇到了你的问题，决定把它扔到 github 上 :-)

[https://github.com/enigmaticflare/UIWebView-YouTube--iOS-Category--ARC-compliant-code](https://github.com/enigmaticflare/UIWebView-YouTube--iOS-Category--ARC-compliant-code)

UIWebView+YouTube iOS 类别来简化加载 youtube 视频。

指示

1）将这些文件添加到您的项目中

```
UIWebView+YouTube.h
UIWebView+YouTube.m 
```

2）例如启动 UIWebView

```
@property (strong, nonatomic) UIWebView *webView;
@synthesize webView = _webView

_webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,212,172];
//set the X,Y origin of CGRect to where you want the webView to appear.

_webView.delegate = self;
[_webView loadYouTubeVideoID:@"gR8dO7Cln6M"];
[self.view addSubView:_webView]; 
```

祝你好运，希望这是你要找的:)

亚当

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T00:45:04.200

m.youtube.com 是一个巨大的 java web 应用程序，不会调用委托方法，大概是因为任何加载都直接写入 UIWebView 中的 DOM。在工作中遇到这个问题，不确定修复，但可能有一种方法可以使用 JS 点击处理程序注入源代码。

# php - 使用 PHP exec() 的 Apache 文件执行模型

> ID：11480184
> 
> 赞同：0
> 
> 时间：2012-07-14T01:10:57.923
> 
> 标签：php, apache, exec

潜伏许久的新注册用户！

我有一个 Apache 2.2 Web 服务器在本地（目前）作为服务在 Windows 上运行，并安装了 PHP 5。我正在使用 PHP 的 exec() 来运行托管在服务器上的命令行客户端 (.exe)，该客户端将用户验证到数据库并代表用户进行预定义的 SQL 查询。

我的问题是：Apache 如何通过（相同的）PHP exec() 命令运行多个用户请求的程序？在这种情况下，Apache 会为所有将访问它的用户使用同一个客户端实例，还是 Apache 会为每个用户创建一个新的客户端实例？

由于客户端是为单个用户设计的，如果 Apache 确实重用客户端的相同实例，它将遇到很多并发问题。

我很感激我能得到的任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:11:21.260

PHP 每次调用 PHP 时都会启动该进程`exec()`，并且只要完成，它就会一直运行。因此，如果多个用户同时访问触发它的网站脚本，您最终将同时运行多个进程副本。

除非您使用某种非常奇怪的数据库，否则可能有比启动命令行工具更好的查询方法。例如，如果您的数据库有可用的 ODBC 驱动程序，您可以通过 PHP [ODBC](http://php.net/odbc)扩展直接使用它。

# javascript - 在 JavaScript 中使用对象字面量实现继承

> ID：11480186
> 
> 赞同：2
> 
> 时间：2012-07-14T01:11:31.113
> 
> 标签：javascript, inheritance, object-literal

我如何做到这一点：

```
function Vehicle(){
    this.mobility = true;
};
function Car(){};
Car.prototype = new Vehicle();
var myCar = new Car();
console.log(myCar.mobility); 
```

使用用对象字面量创建的对象？

我知道 Object.create() 但有什么办法像

```
Car.prototype = new Vehicle(); 
```

实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T02:06:46.793

这是你如何使用它`__proto__`：

```
var propertiesToInherit = { 'horsepower': 201, 'make': 'Acura' }
var myCar = {};
myCar.__proto__ = propertiesToInherit;

console.log(myCar.horsepower); // 201
console.log(myCar.make); // Acura 
```

话虽如此，我会避免这样做。看起来它已被[弃用](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/Proto)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:45:15.677

一种可能是[Prototype.js](http://www.prototypejs.org/)；除其他外，它允许您使用更简洁的语法创建和扩展 JS 类：

```
// properties are directly passed to `create` method
var Person = Class.create({
  initialize: function(name) {
    this.name = name;
  },
  say: function(message) {
    return this.name + ': ' + message;
  }
});

// when subclassing, specify the class you want to inherit from
var Pirate = Class.create(Person, {
  // redefine the speak method
  say: function($super, message) {
    return $super(message) + ', yarr!';
  }
});

var john = new Pirate('Long John');
john.say('ahoy matey');
// -> "Long John: ahoy matey, yarr!" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T01:46:55.627

我不知道我是否正确理解了你的问题，但也许你可以试试这个：

```
var literal = { mobility: true };
function Car(){};
Car.prototype = literal;
var myCar = new Car();
console.log(myCar.mobility); 
```

请注意，如果您更改文字，则会更改`Car`已创建的所有实例。

# python - 有没有办法在 ListProperty 中存储带有值的标志？

> ID：11480187
> 
> 赞同：-1
> 
> 时间：2012-07-14T01:11:56.053
> 
> 标签：python, google-app-engine, google-cloud-datastore

我需要存储一个带有标志的电子邮件列表，说明给定的电子邮件是启用还是禁用。

据我所知，没有办法保存这个标志，因为`item_type`a`ListProperty`不能是类或字典。

我将使用两个列表来实现这一点，一个用于启用的电子邮件，另一个用于禁用的电子邮件。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:45:57.223

使用直接 db.Model 并没有太多选择。

另一种方法是将 dict 存储在`BlobProperty`. 但我认为你现有的选择更好。您可以提出自己的属性类型，它可以很好地打包和解包 a`dict`或。`tuple`有关自定义属性的一些示例，请参阅[https://github.com/Arachnid/aetycoon/](https://github.com/Arachnid/aetycoon/)。

或者，如果您对项目不太了解，可以将 NDB 视为替代数据模型，并使用几乎正是您想要的 StructuredProperty。

阅读[https://developers.google.com/appengine/docs/python/ndb/properties#structured](https://developers.google.com/appengine/docs/python/ndb/properties#structured)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:56:47.803

两个列表是 DB API 的最佳选择。如果这样更方便，您还可以存储电子邮件列表和“启用”布尔值列表。

# javascript - 如何告诉 D3 使树状图垂直（自上而下）而不是从左到右？

> ID：11480191
> 
> 赞同：9
> 
> 时间：2012-07-14T01:12:48.987
> 
> 标签：javascript, d3.js

我正在查看[这个](http://mbostock.github.com/d3/ex/cluster.html)使用集群布局将 X 和 Y 坐标分配给树状图上的节点的示例。如何告诉[集群](https://github.com/mbostock/d3/wiki/Cluster-Layout#wiki-cluster)垂直布局，自上而下，而不是默认的从左到右？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T13:49:33.390

对于您链接的[示例](http://mbostock.github.com/d3/ex/cluster.html)，只需翻转 X 和 Y 坐标的使用。这可以通过改变来完成

```
var diagonal = d3.svg.diagonal()
  .projection(function(d) { return [d.y, d.x]; }); 
```

和

```
var node = vis.selectAll("g.node")
  .data(nodes)
 .enter().append("g")
   .attr("class", "node")
   .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; }) 
```

到

```
var diagonal = d3.svg.diagonal()
  // Flip the values here.
  .projection(function(d) { return [d.x, d.y]; }); 
```

和

```
var node = vis.selectAll("g.node")
   .data(nodes)
 .enter().append("g")
  .attr("class", "node")
  // Flip the values here.
  .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; }) 
```

这是一个[JSFiddle](http://jsfiddle.net/brantolsen/Ld6Uz/)，显示了上述操作中的变化。

# c++ - 使用 C++ 的文件 I/O 同时打开两个文件

> ID：11480195
> 
> 赞同：4
> 
> 时间：2012-07-14T01:13:06.517
> 
> 标签：c++, file-io, ifstream

是不是可以使用不同的ofstreams同时打开两个文件？我正在尝试写入两个 ofstreams，一个有一个变量文件名，每次循环迭代时都会更改，另一个有一个固定的文件名，我正在写入的数据将在循环的每次迭代中附加。展示：

```
ofstream file_variable_name;
ofstream file_to_be_appended;

{  //THIS IS A LOOP, variable_name changes at every iteration

file_variable_name.open(variable_name.c_str(), ios::out);
file_to_be_appended.open("fixed name", ios::out | ios::app);

//Do lots of things here, make data ready to be written to file

file_variable_name << "write something" << endl;
file_to_be_appended << "write same as above, but this is to be appended" << endl;

file_variable_name.close();
file_to_be_appended.close();
} 
```

不知何故，我什至无法创建第二个文件，更不用说打开和附加了。我也可以发送完整的代码（大约 1000 行左右，需要截断），但我认为以上内容可以解释我正在尝试做什么，并且任何逻辑缺陷对专业人士来说都是显而易见的。

提前感谢所有建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T15:48:39.220

你让它变得比现在更难。通常不需要使用 .open() 和 .close() 方法，也不需要不断地重新打开同一个文件：

```
#include <fstream>

int main(int argc, char *argv[])
{
    std::ofstream file_to_be_appended("fixed name");

    char const *list[] = {"a", "b", "c"};
    for (auto s : list) { // My compiler doesn't have generalized initializer lists yet
        std::ofstream file_variable_name(s);

        file_variable_name << "write something\n";
        file_to_be_appended << "write same as above, but this is to be appended\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T15:39:29.130

我会将您发布的代码变成一个简单的程序：

```
#include <iostream>
#include <fstream>

int main() {
  ofstream file_variable_name;
  ofstream file_to_be_appended;

  file_variable_name.open("variable_name.txt", ios::out);
  file_to_be_appended.open("fixed_name.txt", ios::out | ios::app);

  file_variable_name << "write something" << endl;
  file_to_be_appended << "write same as above, but this is to be appended" << endl;

  file_variable_name.close();
  file_to_be_appended.close();

  return 0;
} 
```

现在编辑它并添加一个带有一些虚拟文件名的循环。如果您在此过程中遇到任何问题，此代码非常简单，可以帮助您缩小问题范围。

# objective-c - 嵌套 NSManagedObjects 是否正确/安全？

> ID：11480200
> 
> 赞同：0
> 
> 时间：2012-07-14T01:13:56.550
> 
> 标签：objective-c, database, database-design, core-data, nsmanagedobject

我很好奇 NSManagedObjects 的结构，特别是它们的嵌套。这是我第一次设计数据模型，所以让我在我的问题之前解释一下。假设我有一个供用户使用的 NSManagedObject。用户有许多不同的属性：

*   名字：NSString
*   姓氏：NSString
*   生物：NSString
*   照片：NSData
*   电子邮件：NSString
*   注册时间戳：NSDate
*   密码：NSString
*   用户名：NSString
*   追随者：用户（多关系）
*   他们关注的人：用户（许多关系）

该对象中有很多属性，而且可能还有更多。所以我的问题本质上是，**嵌套 NSManagedObjects 是否安全，甚至适当**？因此，我拥有的不是所有这些属性：

*   信息：用户信息
*   注册：用户注册
*   追随者：用户
*   以下：用户

其中 UserInformation 和 UserRegistration 将是单独的 NSManagedObjects，它们包含一些原始属性。我知道这可能不是嵌套对象的最佳情况，但如果我有更复杂的对象，如果它们是嵌套的，会更容易理解。

提前感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:28:13.793

正确的做法是绘制您的 ER 模型并定义实体。如果这样做，您为 UserInformation 和 UserRegistration 定义一个与用户一对一关系的实体，那么这样做没有问题。对于追随者和以下情况，您必须定义自我关系（一对多自我实体[https://stackoverflow.com/a/4504770/474740](https://stackoverflow.com/a/4504770/474740)）。

使用关系定义模型并用特定类型（一对一、一对多）标记它们。

请记住，在保存和获取数据时如何更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:28:38.507

这是正确且安全的，但如果您不打算使它们成为原子的、可重用的或有其他一些可以从中受益的设计，则建议不要这样做。这就是为什么...您将不得不编写更长的语句来访问您的属性，获取的数据库操作必须包含连接以获取关系属性，并且您并没有真正建模正确的对象...但是如果您出于某种原因需要，而不仅仅是不喜欢具有大量属性的模型，那么请继续。

# objective-c - 如何阻止 UIScrollView 吞下触摸

> ID：11480201
> 
> 赞同：1
> 
> 时间：2012-07-14T01:13:58.810
> 
> 标签：objective-c, ios, uiview, uiscrollview, touch

我有`UIScrollView`很多子视图。当我滚动时，我想点击要拖动的子视图。有没有可能的方法来`UIScrollView`阻止吞咽触摸？或者当您取消滚动时是否可以开始新的触摸（就像它滚动并且我点击它一样，子视图也会被点击，所以我可以将它拖出来）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:43:11.650

子类 UIScrollView 并覆盖该`- (BOOL)touchesShouldCancelInContentView:(UIView *)view`方法。这是一个允许 uibutton 触摸通过的示例：

```
#import "scrollViewWithButtons.h"

@implementation scrollViewWithButtons

- (BOOL)touchesShouldCancelInContentView:(UIView *)view
{
    return ![view isKindOfClass:[UISlider class]];
}

@end 
```

# python - Python 正则表达式匹配 unicode 表情符号

> ID：11480202
> 
> 赞同：2
> 
> 时间：2012-07-14T01:14:02.463
> 
> 标签：python, regex, unicode

我正在尝试构建一个正则表达式来匹配负 unicode 表情符号的不同可能组合。我在匹配下面列表 test_2 中包含的表情符号类型时遇到问题。尽管我相信符合表情符号的非字母数字符号已正确放置在正则表达式中，但表情符号和左眼（名称为 eye1 的捕获组）均不匹配……我该如何解决？谢谢

```
neg_emoticon_regular = ur"""
  [\(（]?     #optional left parenthesis
  \s*         #optional space   
  [\`\#\ ́]?   #optional symbols between left parenthesis and left eye
  (?P<eye1>[\ｰ\; \́\`\・\>Tt\ー\ ̄\−\-\゚~\_\.\>\*\/]) #left eye
  \s*         #optional space                     
  [\｡\。\Δ\-\人\O\0\.\Д\д\o\−\＿\ω\ヘ\^\_]? #mouth
  \s*         #optional space  
  [(?P=eye1)\`\<\’]   #right eye, usually will match left eye                
  [\A\#\;]?   #optional symbols between right eye and right parenthesis
  \s*         #optional space
  [\)\）]?    #optional right parenthesis   
"""

neg_emoticon_re = re.compile(neg_emoticon_regular, re.VERBOSE  | re.UNICODE)
test_2 = ["(−_−＃)","(-｡-;","(-_-)"] #negative emoticons to match
for e in test_2:
    e_uc_norm = unicodedata.normalize('NFKC', e.decode("utf-8"))
    m = neg_emoticon_re.search(e_uc_norm) 
    if m: print "eye1:",m.group("eye1") #print the symbol that is supposed to be the left eye
    print len(neg_emoticon_re.findall(e_uc_norm)), e_uc_norm 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:19:59.510

在正则表达式中，`[...]`是一组字符，因此`[\(（]`将匹配其中一个并打开括号或空格（可以缩短为`[( ]`），`[\s+]?`并将匹配可选的空白字符或加号。

# c# - C# Oracle 过程调用的问题

> ID：11480203
> 
> 赞同：0
> 
> 时间：2012-07-14T01:14:04.727
> 
> 标签：c#, oracle, .net-4.0

从下面的给定信息中寻找一些帮助来识别调用 Oracle 过程调用的正确方法。我将 .NET 4 与 Oracle.DataAccess.Client 一起使用。以下是 Oracle 程序的详细信息：

```
CREATE OR REPLACE PACKAGE APPS.syk_serial_num_details
AS
TYPE account_rec_type IS RECORD(
  inv_item_id                   NUMBER
 ,item_num                      VARCHAR2(40)
 ,item_desc                     VARCHAR2(240)
 ,acc_num                       VARCHAR2(30)
 ,ship_to                       VARCHAR2(1000)
 ,bill_to                       VARCHAR2(1000)
);

TYPE account_set IS TABLE OF account_rec_type; 

 PROCEDURE get_prod_details(
  p_serial_num               IN       VARCHAR2
 ,p_acc_nums                 IN       VARCHAR2
 ,p_ship_tos                 IN       VARCHAR2
 ,p_acc_set                  OUT      syk_serial_num_details.account_set
 ,p_status                   OUT      VARCHAR2
 );

END syk_serial_num_details 
```

以下是显示参数类型和大小的更多详细信息……下面是从 Toad 接口调用过程的示例：

```
DECLARE
l_serial_num                  csi_item_instances.serial_number%type;
l_acc_nums                    VARCHAR2(100);
l_ship_tos                    VARCHAR2(100);
l_acc_set  syk_serial_num_details.account_set;
l_status                      VARCHAR2(80);

BEGIN

   l_serial_num               :=  '1025200453';
   l_acc_nums                 := '8165';
   l_ship_tos                 := '10332';
   l_acc_set := syk_serial_num_details.account_set();
   syk_serial_num_details.get_prod_details(p_serial_num                  => l_serial_num
                                          ,p_acc_nums                    => l_acc_nums
                                          ,p_ship_tos                    => l_ship_tos
                                          ,p_acc_set                     => l_acc_set
                                          ,p_status                      => l_status
                                          );

   Dbms_output.put_line('Status ::' || l_status);
   IF(l_acc_set.count >0) then
   FOR i IN 1 .. l_acc_set.count
   LOOP
   l_acc_set.extend;
      DBMS_OUTPUT.put_line(   'Item_Number:'
                           || l_acc_set(i).item_num||'|'
                           || '   Desc:'
                           || l_acc_set(i).item_desc||'|'
                           || '   Accunt Number:'
                           || l_acc_set(i).acc_num||'|'
                           || '   Ship To:'
                           || l_acc_set(i).ship_to||'|'
                           || '   Bill To:'
                           || l_acc_set(i).bill_to||'|'
                          );
   END LOOP;
   end if;

END; 
```

所以...我在尝试确定 p_acc_set 输出的正确类型时遇到了很多麻烦。以下是我当前的 C# 代码：

```
 OracleConnection conn = getOracleConnection();
        List<AccountSearchResultsDto> ProductInfoList = new List<AccountSearchResultsDto>();
        using (conn)
        {
            conn.Open();

            using (OracleCommand cmd = new OracleCommand("syk_serial_num_details.get_prod_details", conn))
            {

                cmd.CommandType = CommandType.StoredProcedure;

                //ASSIGN PARAMETERS TO BE PASSED 
                OracleParameter param1 = new OracleParameter("p_serial_num", OracleDbType.Varchar2);
                param1.Direction = ParameterDirection.Input;
                param1.Size = 100;
                param1.Value = "1025200453";
                cmd.Parameters.Add(param1);

                OracleParameter param2 = new OracleParameter("p_acc_nums", OracleDbType.Varchar2);
                param2.Direction = ParameterDirection.Input;
                param2.Size = 100;
                param2.Value = "8165";
                cmd.Parameters.Add(param2);

                OracleParameter param3 = new OracleParameter("p_ship_tos", OracleDbType.Varchar2);
                param3.Direction = ParameterDirection.Input;
                param3.Size = 100;
                param3.Value = "10332";
                cmd.Parameters.Add(param3); 

                //PARAMETERS USED TO RETURN RESULT OF PROCEDURE CALL 
                OracleParameter param4 = new OracleParameter("p_acc_set", OracleDbType.Object);
                param4.Direction = ParameterDirection.Output;
                param4.Size = 1;
                cmd.Parameters.Add(param4);

                OracleParameter param5 = new OracleParameter("p_status", OracleDbType.Varchar2);
                param5.Direction = ParameterDirection.Output;
                param5.Size = 300;
                cmd.Parameters.Add(param5); 

                cmd.ExecuteNonQuery();

                if (cmd.Parameters["p_status"].Value.ToString().Equals("SUCCESS"))
                {
                       //Get results from p_acct_set and put values in list
                }

            }
        } 
```

截至目前 - 尝试上述我收到以下错误：

> 无效的参数绑定参数名称：p_acc_set

我应该为 p_acc_set 使用 OracleParameter UdtTypeName 参考吗？

我对 Oracle 过程调用很陌生，所以请原谅我的经验不足。任何帮助表示赞赏！提前致谢！！

-R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:03:21.153

OracleCommand 类的属性[BindByName](http://docs.oracle.com/cd/E11882_01/win.112/e23174/OracleCommandClass.htm#i997666)（**默认为 false**）来处理这个问题。

**您应该在执行命令之前**将其设置为 true以避免该错误！****

 **欲了解更多信息，请阅读[此](http://docs.oracle.com/cd/E11882_01/win.112/e23174/toc.htm)内容！！

编辑

抱歉，我没有注意到有一个 PL/SQL 嵌套表！！我不认为 Oracle 支持绑定（特别是如果它包含记录而不是简单值）。

关联数组、PL/SQL 嵌套表和 PL/SQL Vararrays 是非常相似的数据类型，所以[在这里](http://docs.oracle.com/cd/E11882_01/win.112/e23174/featOraCommand.htm#BABBDHBB)他们可能打算使用名称关联数组来表示所有这三个东西。

使用用户定义类型的嵌套表代替它应该可以解决您的问题，但是对于新手来说处理起来将变得非常简单......如果是这样，您应该重新定义过程以使用新的数据类型并在 C# 中设置 UdtTypeName 参数代码不是唯一要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:42:11.867

我发现参数“p_acc_set”和“p_status”与其他参数的不同之处在于他们没有为它们分配大小，请尝试为它们分配大小，应该可以解决您的问题

我没有找到[MSDN](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracleparameter.size.aspx)对 OracleParamter.Size 属性的解释非常清楚。但我确实注意到评论中有一句话说

> **该行取自 MSDN 备注：**
> 
> 对于双向和输出参数以及返回值，您必须设置 Size 的值。**

# php - PHP mysql error_log 并立即返回一个值

> ID：11480206
> 
> 赞同：2
> 
> 时间：2012-07-14T01:14:50.700
> 
> 标签：php, mysql, error-handling

我正在编写一个查询我的数据库的函数，如果 mysql 查询由于某种原因出错，我希望我的函数返回一个指示查询失败的值（在本例中为 -1），而不是从整体中消失脚本。

通常我只使用这个结构：

`$result = mysql_query($sql) or die( [some error information] );`

但在这种情况下，我不想死，但我确实需要跳出函数并有一些方法告诉调用函数出了问题，同时仍然能够手动检查日志的来源错误。有没有办法做到这一点？半伪代码看起来像：

```
$result = mysql_query($sql) or {
    error_log( [some error information] );
    return -1;
} 
```

但是我已经尝试了几种变体，并且（正如人们所预料的那样）它们不起作用。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T01:16:37.327

尝试这个：

```
if(!($result = mysql_query($sql))) {
    error_log(...);
    return -1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:25:28.183

in该`or`语句是 PHP 的[逻辑运算符](http://www.php.net/manual/en/language.operators.logical.php)之一，当这样使用时，如果第一个语句由于[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)而失败，它将执行第二个语句。您将无法使用`return`该语句，因为您正在执行赋值，并且如果您执行两个语句，您将无法为`$result`变量返回正确的值。

你可以做类似的事情

```
$result = false or (error_log('message') && ($result = -1));
if ($result === -1) return $result; 
```

但这并不比你能做的任何事情都要短。

使用类似@Kolink 提供的表达式来做你想做的事。

# objective-c - 应用程序包中 VersionInfo.plist 的路径

> ID：11480212
> 
> 赞同：0
> 
> 时间：2012-07-14T01:16:38.730
> 
> 标签：objective-c, ios, xcode

我目前正在研究 CoreData，但我遇到了一些错误。我已经尝试了 StackOverflow 上所述的所有解决方案，除了一个：

确保 NSManagedObjectModel_CurrentVersionName 是正确的。

有人建议去 app bundle -> coreData.momd -> VersionInfo.plist 进行检查。

但是，我什至找不到我的应用程序包在哪里。我可以找到包含中间体和产品的构建文件夹。但是，这些文件夹中的任何内容都没有将我引导到应用程序包。

非常感谢任何帮助或建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:26:30.063

您可以通过在屏幕左侧的 Project Navigator 窗格中选择 .cxdatamodeld 文件来找到当前选择的版本。然后，在屏幕右侧的 Utilities 窗格中选择 File Inspector，在 Versioned Core Data Model 下选择“Current”。这应该显示您当前的数据模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T21:13:18.037

打开终端并输入以下命令：

> 查找/-名称“版本信息.plist”

我的位于“./Users/blossomwoo/Library/Application Support/iPhone Simulator/6.1/Applications/DB103D5D-9FFA-4E95-9715-944E8E339FCB/.app/DataModel.momd/”

# sql - SQL Select where value = 'X' or min value

> ID：11480216
> 
> 赞同：3
> 
> 时间：2012-07-14T01:17:18.880
> 
> 标签：sql, sql-server-2008

我有一个大型客户数据库，其中客户表包含人员及其与组织的关系。人们可能属于多个组织（*这允许组织内的划分*）。拥有多个组织的人必须有一个默认组织，这通常由 where 确定`isDefault = T`，但是前端应用程序也可以`isDefault = F`通过选择`MIN(RowID)`.

所以在下表中，我们知道`PersonId` `3`有一个默认值`OrgID`( `11`IsDefault = T) 但是，我需要弄清楚查找 PersonID 12 的默认值的查询。IE

```
Select orgId as default from myTable
where personID = 12
and isDefault = 'T' 
```

如果返回 0 行，则执行如下查询：

```
Select orgId as default from myTable
where personID = 12
and 
RowId in (select Min(rowId) 
from myTable 
where PersonId = 12)

RowID | PersonID  | OrgId  |  isDefault
1     |    12     |   14   |     F
2     |    12     |   17   |     F
3     |    3      |   11   |     T
4     |    3      |   14   |     F 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T01:39:35.477

我认为您可以通过订购两次来获得您想要的东西，首先是 IsDefault 是 T 还是 F，然后是 RowId，然后获得最高结果：

```
SELECT TOP 1 OrgId as [Default]
FROM MyTable
WHERE PersonId = 12
ORDER BY
    CASE WHEN IsDefault = 'T' THEN 0 ELSE 1 END,
    RowId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:02:40.327

没有尝试执行此操作，但希望这应该有效。IsDefault 将使子查询短路。

```
 Select orgId as default from myTable o
   where personID = 12 
       and  
       ( IsDefault = 'T' OR
                   RowId = (select Min(rowId)  
                               from myTable i
                             where i.PersonId = o.PersonId
                           )  
        ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T01:37:39.293

在 MySql 服务器中，您可以使用限制 1 进行联合：

```
SELECT OrgId AS `default`
FROM (
    SELECT OrgId FROM MyTable
    WHERE PersonID = 12
    and isDefault = 'T'

    UNION

    SELECT OrgId FROM MyTable
    WHERE PersonId = 12
    AND RowId in (
        SELECT MIN(RowId)
        FROM MyTable
        WHERE PersonId = 12
    )
) SomeName LIMIT 1; 
```

对于 SQL Server：

```
SELECT TOP 1 OrgId AS [default]
FROM (
    SELECT OrgId FROM MyTable
    WHERE PersonID = 12
    and isDefault = 'T'

    UNION

    SELECT OrgId FROM MyTable
    WHERE PersonId = 12
    AND RowId in (
        SELECT MIN(RowId)
        FROM MyTable
        WHERE PersonId = 12
    )
) SomeName; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T01:34:20.050

将此逻辑放入一个查询中是相当复杂的。您必须将所有结果合并在一起，跟踪结果的来源。然后你必须计算有多少行来自第一部分，并且只保留相应结果集中的行。

```
select orgid, mytable
from (select t.*, sum(which) over (partition by null) as whichcnt
      from ((Select 1 as which, orgId as default
             from myTable
             where personID = 12 and
                   isDefault = 'T'
            )
            union all
           (Select 0 as which, orgId as default
            from myTable
            where personID = 12 and 
                  RowId in (select Min(rowId) from myTable where PersonId = 12)
           )
          ) t
     ) t
where whichcnt > 0 and which = 1 or whichcnt = 0 
```

如果您可以使用 TSQL 而不是单个查询，那么您可以只运行第一个版本，检查结果中的行数，然后决定采用哪个结果集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T07:02:38.507

这取决于表的大小是什么索引。如果说 rowid 有唯一的聚集索引和 personid 并且 isdefault 有一个 nc 索引，我将使用两个 statemnts。

```
 declare @orgid int = null
 select @orgid =orgid from table where personid = 12 and isdefault = 'T'
 if (orgid  is null)
 begin
 select @orgid = orgid 
 from mytable
 where rowid = (
 select min(rowid)from table where personid = 12 and isdefault = 'F'
 )
 end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-14T03:56:54.647

请试试这个

```
select PersonID ,OrgID from mytable where isDefault='T'
union all

select personID,min(OrgID) [default]
from myTable P
where  not exists 
(select * from mytable C where P.PersonID=C.PersonID and C.isDefault='T')
group by personID 
```

# wordpress - wordpress 的本地化：日期和时间

> ID：11480218
> 
> 赞同：3
> 
> 时间：2012-07-14T01:17:40.243
> 
> 标签：wordpress, localization

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T14:55:40.077

preg 替换是否不适用于此？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T15:02:14.870

I recommend using the Wordpress APIs where possible, so try using the [date_i18n](http://codex.wordpress.org/Function_Reference/date_i18n) function.

# iphone - iPhone SDK 使用触摸从屏幕上擦除 UIImageView？

> ID：11480223
> 
> 赞同：10
> 
> 时间：2012-07-14T01:17:57.707
> 
> 标签：iphone, ios, core-graphics, quartz-graphics, uitouch

我正在寻找一种能够从屏幕上擦除 UIImageView 的方法。当我说擦除我的意思不是`[imageView removeFromSuperview];`，我的意思是通过在屏幕上涂写你的手指来擦除部分图像。无论你的手指在哪里，那都是图像中被擦除的部分。我只是找不到任何帮助。

我想图像与石英有关吗？如果是这样，那我真的不擅长。:(

我想最好的例子是彩票。一旦你刮开票的一部分，它下面的那个区域就会显露出来。有谁知道如何做到这一点？

谢谢！

## 更新：

下面的代码就是诀窍。谢谢！

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    lastTouch = [touch locationInView:canvasView];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    currentTouch = [touch locationInView:canvasView];

    CGFloat brushSize = 35;
    CGColorRef strokeColor = [UIColor whiteColor].CGColor;

    UIGraphicsBeginImageContext(scratchView.frame.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [canvasView.image drawInRect:CGRectMake(0, 0, canvasView.frame.size.width, canvasView.frame.size.height)];
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, brushSize);
    CGContextSetStrokeColorWithColor(context, strokeColor);
    CGContextSetBlendMode(context, kCGBlendModeClear);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, lastTouch.x, lastTouch.y);
    CGContextAddLineToPoint(context, currentTouch.x, currentTouch.y);
    CGContextStrokePath(context);
    canvasView.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    lastTouch = [touch locationInView:canvasView];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T03:51:50.820

您绝对可以使用`UIImageView`不需要自定义 Quartz 层来做到这一点。你熟悉 iOS 中的任何绘图形式吗？`touchesBegan:`基本上，您只需要使用、`touchesMoved:`和来跟踪当前和之前的触摸位置`touchesEnded`。

然后，您需要使用以下内容在当前触摸位置和先前触摸位置之间绘制一条“线”（在这种情况下会擦除其下方的内容），该线直接取自我开发的实际应用程序，该应用程序做了一些类似的事情：

```
UIGraphicsBeginImageContext(canvasView.frame.size);
CGContextRef context = UIGraphicsGetCurrentContext();
[canvasView.image drawInRect:CGRectMake(0, 0, canvasView.frame.size.width, canvasView.frame.size.height)];
CGContextSetLineCap(context, lineCapType);
CGContextSetLineWidth(context, brushSize);
CGContextSetStrokeColorWithColor(context, strokeColor);
CGContextSetBlendMode(context, kCGBlendModeClear);
CGContextBeginPath(context);
CGContextMoveToPoint(context, lastTouch.x, lastTouch.y);
CGContextAddLineToPoint(context, currentTouch.x, currentTouch.y);
CGContextStrokePath(context);
canvasView.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

在这段代码`canvasView`中是一个`UIImageView`. 这种绘图有很多教程。您想要的重要是将混合模式设置为 kCGBlendModeClear。就是这一行：

```
CGContextSetBlendMode(context, kCGBlendModeClear); 
```

# php - 访问来自 PHP 的 JSON 数组元素

> ID：11480230
> 
> 赞同：-1
> 
> 时间：2012-07-14T01:19:18.023
> 
> 标签：php, javascript, arrays, json, parsing

我有

> {"user_id":"2790","freelancer_name":"","order_id":"8895","orderamount":"33638.00","payment_method":"","payment_desc":"","order_st": "newlink","total_comission":"3046.08","auto_increment_id":"2","po_box":"","country":"","order_add":"","shipping_co":"","weight ":"0","fname":"","lastname":"","shippingcost":"0.00","paymentst":""}
> 
> {"user_id":"2790","freelancer_name":"","order_id":"9121","orderamount":"0.00","payment_method":"","payment_desc":"","order_st": "newlink","total_comission":"0.00","auto_increment_id":"1","po_box":"","country":"","order_add":"","shipping_co":"","weight ":"0","fname":"","lastname":"","shippingcost":"0.00","paymentst":""}

来自这个 PHP 代码

```
$result = mysql_query ("SELECT * FROM order_list");
$myjsons = array();
$i = 0;
while ($row = mysql_fetch_assoc($result)) {
    $myjsons[$i] = json_encode(array($row));
$myjsons[$i] = substr($myjsons[$i], 1, -1);

    $i++;
}

echo json_encode($myjsons); 
```

我试图访问每个元素，但似乎该数组只是一个字符串，没有像 user_id - order_id 这样的元素

这是读取 JSON 的 javascript

```
$("#txtfld").val(data[0]);
$("#resultTXT").val(data[1]); 
```

我想让他们喜欢

txtfld = data[0].user_id 和 resultTXT = data[0].order_id ...

所以问题是获取用户ID订单ID等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:35:08.960

如果您`echo`在将结果返回给用户之前再次使用 json_encode （如在您的语句中），则对于此行...

```
$myjsons[$i] = json_encode(array($row)); 
```

...不要在循环内进行 json_encode。你是双重编码。看来您也不想在`array()`这里使用。所以就这样做：

```
$myjsons[$i] = $row; 
```

实际上，您可以这样做：

```
$myjsons[] = $row; 
```

并摆脱：

```
$myjsons[$i] = substr($myjsons[$i], 1, -1); 
```

此外，正如有人在评论中指出的那样，您将希望`var obj = JSON.parse(data);`在客户端使用，尽管您可能希望有条件地添加一个`JSON`不支持它的库版本（例如，[这个](https://github.com/douglascrockford/JSON-js)），因为它不是在较旧的浏览器中支持。

# logging - 在 log4net 中，我如何使用相同的附加程序，只是使用不同的文件名？

> ID：11480232
> 
> 赞同：3
> 
> 时间：2012-07-14T01:19:25.247
> 
> 标签：logging, log4net

我有一个 log4net 文件附加程序配置为我的所有日​​志文件都应该使用：

```
<appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
    <file type="log4net.Util.PatternString" value="..\Logs\"/>
    <appendToFile value="true"/>
    <datePattern type="log4net.Util.PatternString" value="yyyyMMdd'.Log'"/>
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="[%date][%-5level][%logger] %message%newline"/>
    </layout>
</appender> 
```

目录和日期模式是硬编码的。我有不同的记录器，它们应该使用完全相同的配置，但只是使用不同的文件夹名称。

现在，我最终将每个块复制并粘贴到一个新的附加程序中，但是有没有办法将 log4net 配置为“共享”一个通用附加程序的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:05:18.437

除非您以编程方式配置 log4net，否则这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T18:02:28.803

至少部分配置确实需要以编程方式完成：

在 Configure() 之前调用它：

```
 log4net.GlobalContext.Properties["SysLogFileName"] = syslogFileName; 
```

使用它来更新：

```
 public static void ChangeSyslogFile(string syslogFileName)
    {
        var hier = log4net.LogManager.GetRepository() as Hierarchy;
        if (hier == null)
        {
            Console.WriteLine("Unable to change Syslog filename, null hierarchy");
            return;
        }
        var sysLogAppender =
            (RollingFileAppender) hier.GetAppenders().
                                      First(appender => appender.Name.Equals("SimulatedSysLogFile", 
                                          StringComparison.InvariantCultureIgnoreCase));

        if (null == sysLogAppender)
        {
            Console.WriteLine("Unable to change Syslog filename, appender not found");
            return;
        }
        sysLogAppender.File = syslogFileName;
        sysLogAppender.ActivateOptions(); 
    } 
```

这是我的配置：

```
 <appender name="SimulatedSysLogFile" type="log4net.Appender.RollingFileAppender">                 
    <file type="log4net.Util.PatternString" value="%property{SysLogFileName}" />
    <appendToFile value="true" />
    <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
    <maximumFileSize value="10MB" />
    <maxSizeRollBackups value="10" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date{M/dd/yyyy h:mm:ss tt} %message %newline" />
    </layout>
</appender> 
```

# facebook-graph-api - 弃用offline_access - 处理非人工访问

> ID：11480233
> 
> 赞同：1
> 
> 时间：2012-07-14T01:19:30.810
> 
> 标签：facebook-graph-api, permissions

我已经用这个在网上搜索了很长时间，我不确定是否有解决方案，但我想我会发帖看看是否有回应......提前谢谢！

我们的一些客户（我们为其建立网站）将他们的 Facebook 提要引入他们的网站（以及他们的 Twitter 提要）。在取消offline_access 权限之前，这是没有问题的。我们会设置我们的应用程序，验证帐户，获取访问令牌，然后我们可以将实时提要永久引入他们的网站。然而，现在有了新系统，似乎没有办法在没有人工干预的情况下做到这一点。

从本质上讲，我们让这些网站从相关 Facebook 帐户中引入提要，并带有长 access_token（60 天令牌）。但是，当达到此限制时，没有“用户”可以重新验证应用程序，因为它只是发出这些请求的服务器。是否必须为所有这些帐户设置提醒，然后每两个月我们（作为网络代理）必须登录所有帐户并获取新的访问令牌以提供给脚本，以便它们可以继续工作? 或者有没有我没有看到的替代方案？

再次感谢！

尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:30:10.193

据我所知，没有其他选择。一旦令牌在 60 天后过期，用户必须重新进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:08:51.547

没有其他方法，用户必须登录才能为您提供新的访问令牌

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

# python - 日期时间和时间增量

> ID：11480234
> 
> 赞同：9
> 
> 时间：2012-07-14T01:19:36.750
> 
> 标签：python, datetime

我的时区是 UTC+5。

所以当我做 datetime.datetime.now() 它给出：

```
2012-07-14 06:11:47.318000
#note its 6AM 
```

我想从中减去`5`几个小时，使它等于`datetime.datetime.utcnow()`我做了：

```
import time
from datetime import datetime, timedelta
dt = datetime.now() - timedelta(hours=time.timezone/60/60)
print dt
#gives 2012-07-14 11:11:47.319000

"""
Here 11 is not the PM its AM i double check it by doing
print dt.strftime('%H:%M:%S %p')
#gives 11:11:47 AM
""" 
```

您看到不是减去 5 小时而是在日期时间中增加了 5 小时？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T01:32:18.117

您正在创建一个负时间增量。的值为`time.timezone`负：

```
>>> import time
>>> time.timezone
-36000 
```

在这里，我在 UTC + 10，所以你的代码变成：

```
>>> from datetime import timedelta
>>> print timedelta(hours=time.timezone/60/60)
-1 day, 14:00:00 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T01:33:31.227

[文档](http://docs.python.org/library/time.html#time.timezone)很清楚：

> **time.timezone**本地（非 DST）时区的偏移量，以 UTC 以西的秒数为单位（在西欧大部分地区为负，在美国为正，在英国为零）。

因此，正 UTC 值具有负时区。

# java - Maven：将资源复制到动态目录

> ID：11480237
> 
> 赞同：2
> 
> 时间：2012-07-14T01:20:08.750
> 
> 标签：java, maven, jbehave

我是一个 Maven 新手，我的项目终于可以正确编译和运行了。

在每次运行时，我的项目都会在运行时创建的动态位置 ( ) 上编写报告，`username_timestamp`并使用该位置设置一个`System.property`调用`REPORTS_LOCATION`。执行后，我想使用 maven 目标将一些静态资源（样式、图像、js 等）复制到这个动态文件夹中。

我想不通的是如何让 Maven 知道这个动态位置或访问这个 System.property

我准备让我的项目将这些资源复制到目录中，但我想我会再试一次，以防有一种简单的/Maven 方式来执行此操作。

我已经将资源复制到硬编码位置。这是 POM 的一个片段。我正在使用 Jbehave 的 Maven 目标，它们确实按顺序执行

```
<plugins>
  <plugin>
    <groupId>org.jbehave</groupId>
    <artifactId>jbehave-maven-plugin</artifactId>
    <version>${jbehave.core.version}</version>
    <executions>
      <execution>
        <id>embeddable-stories</id>
        <phase>integration-test</phase>
        <configuration>
          <includes>
            <include>**/Stories.java</include>
          </includes>
          <excludes />
          <metaFilters>
            <metaFilter>${meta.filter}</metaFilter>
          </metaFilters>
        </configuration>
        <goals>
          <goal>run-stories-as-embeddables</goal>
        </goals>
      </execution>
      <!-- Copy the resources AFTER the execution is done -->
      <execution>
        <id>unpack-view-resources</id>
        <phase>integration-test</phase>
        <configuration>
            <viewDirectory>${basedir}/src/main/java/project/reports/{NEED TO FEED DIRECTORY HERE}</viewDirectory>
        </configuration>
        <goals>
          <goal>unpack-view-resources</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T06:54:52.127

听起来您有一段 Java 代码计算 {username_timestamp}，然后您希望该代码能够将计算出的 {username_timestamp} 传送回 Maven，以便在其生命周期的后续步骤中使用。我不确定这是可能的。相反，如何反转过程，以便 Maven 生成时间戳，然后您从代码中使用它？您可以结合使用 build-helper-maven-plugin、Maven 资源过滤和 Java 代码来加载属性文件来实现此目的。

## pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>junk</groupId>
    <artifactId>junk</artifactId>
    <packaging>jar</packaging>
    <version>0.0.1-SNAPSHOT</version>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <build>
        <plugins>
            <!--
            Use build-helper-maven-plugin to generate a timestamp during the
            initialize phase and store it as a property named "timestamp".
            -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <id>timestamp-property</id>
                        <phase>initialize</phase>
                        <goals>
                            <goal>timestamp-property</goal>
                        </goals>
                        <configuration>
                            <locale>en_US</locale>
                            <name>timestamp</name>
                            <pattern>yyyyMMDDHHmmssSSS</pattern>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>

                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>Main</mainClass>
                        </manifest>
                    </archive>

                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>

                    <finalName>${pom.artifactId}</finalName>
                    <appendAssemblyId>false</appendAssemblyId>
                </configuration>

                <executions>
                    <execution>
                        <id>make-assembly</id>
                        <phase>package</phase>

                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>

        <!--
        Turn on resource filtering so that references to ${timestamp} in a
        properties file get replaced with the value of the timestamp property.
        -->
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
    </build>
</project> 
```

## src/main/resources/junk.properties

```
timestamp=${timestamp} 
```

## src/main/java/Main.java

```
import java.util.Properties;

public final class Main {

    public static void main(String[] args) throws Exception {
        Properties props = new Properties();
        props.load(Main.class.getResourceAsStream("/junk.properties"));
        System.out.println(props.getProperty("timestamp"));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T17:35:11.927

非常感谢 cnauroth，这就像一个魅力。这是我工作更新的 POM，以防它帮助其他人

```
<resources>
  <resource>
    <directory>${basedir}/src/main/java/resources</directory>
    <excludes><exclude>**/locale/**</exclude></excludes>
    <filtering>true</filtering>
  </resource>
</resources>
<plugins>

<!-- Use build-helper-maven-plugin to generate a timestamp during the initialize 
    phase and store it as a property named "mavenTimestamp". -->
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <id>timestamp-property</id>
            <phase>initialize</phase>
            <goals>
                <goal>timestamp-property</goal>
            </goals>
            <configuration>
                <locale>en_US</locale>
                <name>mavenTimestamp</name>
                <pattern>yyyyMMDDHHmmssSSS</pattern>
            </configuration>
        </execution>
    </executions>
</plugin>

  <plugin>
    <groupId>org.jbehave</groupId>
    <artifactId>jbehave-maven-plugin</artifactId>
    <version>${jbehave.core.version}</version>
    <executions>
      <execution>
        <id>embeddable-stories</id>
        <phase>integration-test</phase>
        <configuration>
          <includes>
            <include>**/Stories.java</include>
          </includes>
          <excludes />
          <ignoreFailureInStories>true</ignoreFailureInStories>
          <verboseFailures>true</verboseFailures>
          <threads>5</threads>
          <metaFilters>
            <metaFilter>${meta.filter}</metaFilter>
          </metaFilters>
        </configuration>
        <goals>
          <goal>run-stories-as-embeddables</goal>
        </goals>
      </execution>
      <!-- THIS WORKS :) Copy the resources AFTER the execution is done -->
       <execution>
        <id>unpack-view-resources</id>
        <phase>integration-test</phase>
        <configuration>
            <viewDirectory>${basedir}/src/main/java/project/reports/${mavenTimestamp}</viewDirectory>
        </configuration>
        <goals>
          <goal>unpack-view-resources</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T17:20:34.357

如果在运行时将文件夹设置为环境变量，则可以执行以下操作：

只需使用

```
 <properties>
        <REPORTS_LOCATION><${env.REPORTS_LOCATION}></REPORTS_LOCATION>
    </properties> 
```

然后您可以通过 pom 中的 ${REPORTS_LOCATION} 引用该属性

# jquery - 如何删除下拉菜单上的文本突出显示 ul li 和 jquery

> ID：11480241
> 
> 赞同：0
> 
> 时间：2012-07-14T01:21:57.937
> 
> 标签：jquery, css

嗨，当您第一次单击菜单（灰色条）时，是否有删除突出显示的方法。Firefox 似乎想突出显示所有文本

[http://www.jsfiddle.net/bLmwm/8](http://www.jsfiddle.net/bLmwm/8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T02:27:17.463

如果您从以下内容中删除`height`和行，则问题似乎已解决：`width`

```
#menu li.sub {
    width: 200px;
    height: 16px;
    padding: 1px 0px 0px 0px;
} 
```

这似乎也不会对 Firefox 或 Chrome 产生任何负面影响，因此删除它应该是安全的。

[更新了 jsFiddle](http://jsfiddle.net/bLmwm/9/)

作为旁注，看起来您应用的样式比您需要的要多得多（某些部分是不必要的或冲突的）。我建议再次检查您的 CSS，并确保一切看起来都符合您的要求。例如，如果你应用`background: red`到上面，你可以看到上面的`#menu li.sub`部分当你悬停在它上面时似乎改变了尺寸，这有点出乎意料。

# regex - 关于这个正则表达式的解释

> ID：11480250
> 
> 赞同：-1
> 
> 时间：2012-07-14T01:24:21.720
> 
> 标签：regex

谁能解释这个正则表达式**^[\x21-\x3b\x3d\x3f-\x7e]***试图做什么？非常感谢您在这里的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T01:26:52.647

它匹配字符串开头的零个或多个可打印的非空白[ASCII 字符](http://www.asciitable.com/)（从 0x21-0x7E；不包括`<`and ）。`>`

# c# - 将 FlowDocument 中的模板绑定到列表 ?

> ID：11480251
> 
> 赞同：1
> 
> 时间：2012-07-14T01:24:26.300
> 
> 标签：c#, wpf, xaml, flowdocument, attachedbehaviors

我有一个 FlowDocument，其中包含像这样绑定到我的 ViewModel 的内容（我从互联网上获得的）：

```
public class Foo
{
    public string Text { get; set; }
}

public MainWindow()
{
    InitializeComponent();

    List<Foo> foos = new List<Foo>();
    for (int i = 0; i < 20; i++) {
        foos.Add(new Foo() { Text = i.ToString() });
    }

    this.DataContext = foos;
} 
```

我正在尝试在 FlowDocument 中绑定我的列表 foos。

```
<FlowDocumentReader>
    <FlowDocument> 
        <Paragraph behaviors:ParagraphInlineBehavior.ParagraphInlineSource="{Binding}" 
                   behaviors:ParagraphInlineBehavior.TemplateResourceName="inlineTemplate"> 
            <Paragraph.Resources> 
                <DataTemplate x:Key="inlineTempalte">
                    <TextBlock Text="{Binding Text}" />
                </DataTemplate>
            </Paragraph.Resources> 
        </Paragraph> 
    </FlowDocument> 
</FlowDocumentReader> 
```

还有这个课程，我从互联网上获得的**ParagraphInlineBehavior**，但我还没有完成我的目标。（在流文档中显示数据模板）。

**OnParagraphInlineChanged**方法有问题。

```
public class ParagraphInlineBehavior : DependencyObject 
{ 
    public static readonly DependencyProperty TemplateResourceNameProperty = 
        DependencyProperty.RegisterAttached("TemplateResourceName", 
                                            typeof(string), 
                                            typeof(ParagraphInlineBehavior), 
                                            new UIPropertyMetadata(null, OnParagraphInlineChanged)); 
    public static string GetTemplateResourceName(DependencyObject obj) 
    { 
        return (string)obj.GetValue(TemplateResourceNameProperty); 
    } 
    public static void SetTemplateResourceName(DependencyObject obj, string value) 
    { 
        obj.SetValue(TemplateResourceNameProperty, value); 
    } 

    public static readonly DependencyProperty ParagraphInlineSourceProperty = 
        DependencyProperty.RegisterAttached("ParagraphInlineSource", 
                                            typeof(IEnumerable), 
                                            typeof(ParagraphInlineBehavior), 
                                            new UIPropertyMetadata(null, OnParagraphInlineChanged)); 
    public static IEnumerable GetParagraphInlineSource(DependencyObject obj) 
    { 
        return (IEnumerable)obj.GetValue(ParagraphInlineSourceProperty); 
    } 
    public static void SetParagraphInlineSource(DependencyObject obj, IEnumerable value) 
    { 
        obj.SetValue(ParagraphInlineSourceProperty, value); 
    } 

    private static void OnParagraphInlineChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) 
    { 
        Paragraph paragraph = d as Paragraph; 
        IEnumerable inlines = ParagraphInlineBehavior.GetParagraphInlineSource(paragraph); 
        string templateName = ParagraphInlineBehavior.GetTemplateResourceName(paragraph); 
        if (inlines != null && templateName != null) 
        { 
            paragraph.Inlines.Clear(); 
            foreach (var inline in inlines) 
            { 
                ArrayList templateList = paragraph.FindResource(templateName) as ArrayList; 
                Span span = new Span(); 
                span.DataContext = inline; 
                foreach (var templateInline in templateList) 
                { 
                    span.Inlines.Add(templateInline as Inline); 
                } 
                paragraph.Inlines.Add(span); 
            } 
        } 
    } 
} 
```

# ember.js - Ember.js 数据关联不保存

> ID：11480252
> 
> 赞同：7
> 
> 时间：2012-07-14T01:24:26.670
> 
> 标签：ember.js, ember-data

假设我有 2 个模型：

```
App.Address = DS.Model.extend({
   street: DS.attr('string'),
   person: DS.belongsTo('App.Person')
})

App.Person = DS.Model.extend({
  name: DS.attr('string'),
  addresses: DS.hasMany('App.Address')
}) 
```

现在我创建一个人

```
App.person = App.Person.createRecord({name: 'Bill'});
App.store.commit(); 
```

如果我尝试向这样的人添加地址

```
address = App.Address.createRecord({street: '123 Fake Street'});
App.person.get('addresses').pushObject(address); 
```

并提交交易

```
App.store.commit(); 
```

新地址将被保存，但人员对象不会被识别为已更改；即使 id 列表已经从

```
{
  ...
  "addresses": []
} 
```

至

```
{
  ...
  "addresses": [3]
} 
```

有没有办法让 ember-data 知道我的 person 对象已更改并且需要保存？

编辑： [这](http://jsfiddle.net/CamShaft/HBm4j/)是一个说明问题的jsfiddle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:02:56.963

截至目前（ember-data 修订版 4）没有办法做到这一点。该对象仅保留在 belongsTo 一侧，因为它具有外键，因此如果您在关系的属于一侧设置值，它应该保留。下一个版本的 ember 数据应该会解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T17:22:34.940

如何为此编写自己的序列化程序，请参阅[http://ember-website.thomasboyt.com/api/data/modules/data-serializer.html](http://ember-website.thomasboyt.com/api/data/modules/data-serializer.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T12:28:07.393

我为此找到的解决方法是手动添加 id，例如：

```
App.Address = DS.Model.extend({
   street: DS.attr('string'),
   personID: DS.attr('string'),
   person: DS.belongsTo('App.Person')
}) 
```

然后当您发送数据时，设置 personId 字段，它会模仿 person 字段看起来应该发送的内容。

# eclipse - Eclipse PyDev 自动完成问题

> ID：11480260
> 
> 赞同：1
> 
> 时间：2012-07-14T01:26:18.243
> 
> 标签：eclipse, autocomplete, pydev, errno

我在 Mac 上的 Eclipse 中安装了 PyDev。每当我写代码时，它只有一些建议，而且似乎不完整。例如，每当我输入“r”时，它只会提示“raise()”和“return()”。但是，我希望它建议的所有其他功能仍然在运行时执行。

这是错误：

连接到 python 进程时出错。- NOT ALIVE 中的进程（输出 = 0） - ProcessInfo：

*   执行：/usr/bin/python -u /Users//Downloads/eclipse 2/plugins/org.python.pydev_2.6.0.2012062818 /pysrc/pycompletionserver.py 52958 52957

*   环境：APP_ICON_2099=../Resources/Eclipse.icns Apple_PubSub_Socket_Render=/tmp/launch-4HHiSZ/Render COMMAND_MODE=unix2003 DISPLAY=/tmp/launch-hu6CLm/org.x:0 HOME=/Users/JAVA_STARTED_ON_FIRST_THREAD_2099=1 LOGNAME= PATH =/usr/bin:/bin:/usr/sbin:/sbin PYTHONPATH=/Users//Downloads/ecli pse 2/plugins/org.python.pydev_2.6.0.2012062818 /pysrc/pydev_sitecustomize:/System/Library/Frameworks /Python。框架/版本/2.6/lib/python26.zip：/System/Library/Frameworks/Python。框架/版本/2.6/lib/python2.6：/System/Library/Frameworks/Python。框架/版本/2.6/lib/python2.6/plat-darwin：/System/Library/Frameworks/Python。框架/版本/2.6/lib/python2.6/plat-mac：/System/Library/Frameworks/Python。framework/Versions/2.6/lib/python2.6/plat-mac/lib-scriptpackages:/System/Library/Frameworks/Python。框架/版本/2.6/Extras/lib/python：/系统/库/框架/Python。框架/版本/2.6/lib/python2.6/lib-tk：/System/Library/Frameworks/Python。框架/版本/2.6/lib/python2.6/lib-old：/System/Library/Frameworks/Python。框架/版本/2.6/lib/python2.6/lib-dynload：/System/Library/Frameworks/Python。框架/版本/2.6/Extras/lib/python/PyObjC：/System/Library/Frameworks/Python. framework/Versions/2.6/Extras/lib/python/wx-2.8- mac-unicode SHELL=/bin/bash SSH_AUTH_SOCK=/tmp/launch-phfnZP/Listeners TMPDIR=/var/folders/Kr/Krv2afoAFMa79AvxnI73IE++ +TI/-Tmp -/ 用户= __CF_USER_TEXT_ENCODING=0x1F5:0:0 com.apple.java.jvmTask=JNI /系统/库/框架/Python。框架/版本/2.6/Extras/lib/python/PyObjC：/System/Library/Frameworks/Python. framework/Versions/2.6/Extras/lib/python/wx-2.8- mac-unicode SHELL=/bin/bash SSH_AUTH_SOCK=/tmp/launch-phfnZP/Listeners TMPDIR=/var/folders/Kr/Krv2afoAFMa79AvxnI73IE++ +TI/-Tmp -/ 用户= __CF_USER_TEXT_ENCODING=0x1F5:0:0 com.apple.java.jvmTask=JNI /系统/库/框架/Python。框架/版本/2.6/Extras/lib/python/PyObjC：/System/Library/Frameworks/Python. framework/Versions/2.6/Extras/lib/python/wx-2.8- mac-unicode SHELL=/bin/bash SSH_AUTH_SOCK=/tmp/launch-phfnZP/Listeners TMPDIR=/var/folders/Kr/Krv2afoAFMa79AvxnI73IE++ +TI/-Tmp -/ 用户= __CF_USER_TEXT_ENCODING=0x1F5:0:0 com.apple.java.jvmTask=JNI

*   工作目录：/Users//Downloads/eclipse 2/plugins/org.python.pydev_2.6.0.2012062818/pysrc

*   操作系统：Mac OS X

*   标准输出：pycompletionserver 将启动 pycompletionserver 创建套接字 pycompletionserver 收到错误：Traceback（最近一次调用最后）：文件“/Users//Downloads/eclipse 2/plugins/org.python.pydev_2.6.0.2012062818 /pysrc/pycompletionserver.py” ，第 261 行，在运行 s.bind((HOST, self.thisPort)) 文件“”，第 1 行，在 bind gaierror: [Errno 8] nodename nor servname provided, or not known

*   错误输出：使用参数连接时出错：主机：本地主机端口：52957 线程 Thread-1 中的异常：回溯（最近一次调用）：文件“/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2\. 6/threading.py”，第 522 行，在 __bootstrap_inner self.run() 文件中“/Users//Downloads/eclipse 2/plugins/org.python.pydev_2.6.0.2012062818 /pysrc/pycompletionserver.py”，第 261 行，在运行 s.bind((HOST, self.thisPort)) 文件“”中，第 1 行，在 bind gaierror: [Errno 8] nodename nor servname provided, or not known

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:20:19.240

我解决了我的问题（几乎相同）：

我有

127.0.0.1 本地主机

::1 本地主机

写在我的“主机”文件中：

怎么解决：

1.  打开终端
2.  须藤纳米 /etc/hosts
3.  输入密码
4.  找到这两个条目并用“#”将它们注释掉，例如： ``#127.0.0.1 localhost` `#::1 localhost``
5.  CTRL+X
6.  Y（在欧洲键盘上 Z=Y）
7.  进入

=> 解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:53:27.193

似乎由于某种原因无法连接到“localhost”，这通常意味着您的机器配置存在问题。

看一眼：

[https://superuser.com/questions/207244/os-x-cant-resolve-localhost-suddenly](https://superuser.com/questions/207244/os-x-cant-resolve-localhost-suddenly)

[https://superuser.com/questions/142736/cant-resolve-localhost-on-mac-os-x-server](https://superuser.com/questions/142736/cant-resolve-localhost-on-mac-os-x-server)

看看这是否是你的情况......你也可以尝试编辑：

/Users/tywhitehouse10/Downloads/eclipse 2/plugins/org.python.pydev_2.6.0.2012062818/pysrc/pydev_localhost.py

并使函数 'get_localhost' 直接返回 '127.0.0.1' （但这不是真正的解决方案，只是一种检查是否直接绑定到地址而不是 localhost 的方法，因为您的 localhost 肯定应该正确解析）。

# ruby-on-rails - 哪个 Web 开发框架适合我？

> ID：11480261
> 
> 赞同：-1
> 
> 时间：2012-07-14T01:26:22.080
> 
> 标签：ruby-on-rails, codeigniter, web-frameworks

我是一名试图与朋友建立网络社区的大学生。尽管我们不是经验丰富的开发人员，但我们已经学习了 JAVA 和一些 Web 编程语言（PHP、JAVASCRIPT、CSS、HTML）的课程。

此时，我们需要决定一个 Web 框架并开始学习。我已经将我的列表缩小到 Ruby on Rails 和 Codeigniter，但我真的不确定为什么我应该选择其中一个。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:35:08.007

选择一个你想学的，然后去学。

我个人会推荐 Rails，因为：

*   如果您使用 Rails Way™ 做事，它会教您很多最佳实践</li>
*   Ruby 是一门有趣、易于学习、富有表现力的语言
*   社区真的很大，很热情，也很有帮助
*   互联网上到处都有很棒的书籍和教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:35:58.647

没有什么比得上*好的框架了*。它高度依赖于，没有特定的顺序：

*   你的技能
*   你的口味（是的，这很重要）
*   你的学习意愿
*   技术限制。您的托管公司可能只支持 Ruby 或只支持 PHP
*   ...

我个人有机会使用 CodeIgniter 进行开发，我非常喜欢它。它很轻，有据可查，给你很大的自由。我还有一个好朋友，Ruby On Rails 是唯一一个配得上“框架”之名的框架。

如果您的项目雄心勃勃，那么说明您的观点的一个好主意可能是制作一个包含两个框架的 TODO 列表之类的琐碎应用程序，然后选择适合您需要的一个。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:33:29.003

如果没有时间限制（因为您需要同时学习 ruby​​ lang 和 rails 框架）并且想了解最佳实践，我会推荐 RubyonRails。

如果您有时间限制，请继续使用 Codeigniter。它易于学习并且有据可查。

# c++ - 递归在链表c ++中添加结构

> ID：11480264
> 
> 赞同：1
> 
> 时间：2012-07-14T01:27:09.710
> 
> 标签：c++, linked-list, add

我无法按数字顺序将结构插入到链表中。每个结构都有一个“数字”，如下面的代码所示。我试图让编号最小的结构成为列表的头部（即：成为“人”指向的结构）。我整天都在盯着这段代码，我不知道它有什么问题。任何帮助深表感谢。谢谢

```
Person *addPerson(Person *people, Person *addition, int &numList)
{
if (people == NULL && numList == 0)
{
    people = addition;
    numList++;
    return people;
}
if (people->number >= addition->number)
{
    addition->nextPerson = people;
    people = addition;
    return people;
}
else if (people->number < addition->number && people->nextPerson != NULL)
{
    addPerson(people->nextPerson, addition, numList);
}
else if (people->number < addition->number && people->nextPerson == NULL)
{
    people->nextPerson = addition;
    numList++;
    return people;
}
} 
```

编辑**

```
int main()
{
Person *blake = new Person;
Person *kyra = new Person;
Person *elon = new Person;
Person *bill = new Person;
Person *people = NULL;

blake->number = 1;
blake->name = "blake";
blake->lastName = "madden";
blake->nextPerson = NULL;

kyra->number = 2;
kyra->name = "kyra";
kyra->lastName = "madden";
kyra->nextPerson = NULL;

elon->number = 3;
elon->name = "elon";
elon->lastName = "musk";
elon->nextPerson = NULL;

bill->number = 4;
bill->name = "bill";
bill->lastName = "gates";
bill->nextPerson = NULL;

int num = 0;
int &numList = num;

people = addPerson(people, blake, numList);

people = addPerson(people, kyra, numList);
people = addPerson(people, elon, numList);
people = addPerson(people, bill, numList);

cout << people->name << '\n' << people->lastName;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T01:33:09.163

您没有使用`addPerson()`第三个`if`块中的返回值。尝试：

```
people->nextPerson = addPerson(people->nextPerson, addition, numList);
return people; 
```

您还需要`return people;`在其中，否则您将在函数结束时运行并且不会返回任何明智的内容（我的编译器警告我，您应该更改警告设置，以便您的也这样做）。

通过上述更改，您的代码似乎可以正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:35:26.400

您永远不会分配返回的头部。它应该是

```
people->nextPerson = addPerson(people->nextPerson, addition, numList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T01:33:21.273

你的问题是函数的参数。您希望以递归调用顺序修改前一个调用者的节点中的指针，但您只是传递下一个节点的指针值。这不允许您实际修改前一个节点的指针成员。

更改您的功能，使其看起来像这样：

```
void addPerson(Person** people, Person *addition, int &numList) 
```

然后当你调用`addPerson`第三个块时，这样做：

```
addPerson(&(*(people)->nextPerson), addition, numList); 
```

最后，当您访问`people`参数时，请确保执行额外的取消引用，例如：

```
*people = addition; 
```

或者

```
if ((*people)->number >= addition->number) 
```

# ruby - 我怎样才能让我的爬虫网站设计更改容错？

> ID：11480266
> 
> 赞同：3
> 
> 时间：2012-07-14T01:27:29.367
> 
> 标签：ruby, web-crawler, scraper

我用 ruby​​ 写了一个网络爬虫。但是我正在抓取的网站已经改变了他们的设计。因此我的抓取器失败了。有没有一种聪明而简单的解决方案来解决这种刮板固有的问题？（例如……使用某种模式匹配、xpaths、比较 DOM 树……等等）

```
EM.run {
 http_request = EM::HttpRequest.new(url, opts).get
 http_request.callback { |body|
 doc = Nokogiri.parse(body.response)
 doc = Nokogiri::HTML(body.response)
 puts doc.css(".poster_information")
 puts doc.css(".date")
 puts doc.css(".comment_block")
} 
```

在上面的示例代码片段中，我在一个网页的 css 选择器的帮助下抓取上述网站以获取海报信息、发布日期和发布的评论。现在假设如果网站管理员更改了论坛的布局。css 选择器将失败，因此我的整个刮板将失败。我不想在每次网站布局更改时更新我的​​爬虫。那么有什么方法可以让我的刮板检测到网站布局的变化，并且能够正确找到到达所需目的地的路径吗？因为我无法知道网站什么时候会发生变化。我只是想让我的刮板自动化和容错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:38:35.603

您可以编写定期运行的集成测试，以便在页面更改时通知您。如果页面结构经常变化，我还会将选择器模式提取到配置中，并可以构建一个 UI 来轻松编辑我想要实际抓取的选择器。作为旁注，您可能也有兴趣查看[capybara](https://github.com/jnicklas/capybara/)以在更高级别控制刮板。如果您还需要 JS 功能，可以使用[capybara-webkit 。](https://github.com/thoughtbot/capybara-webkit)

# iphone - 在后台线程上准备视图元素

> ID：11480272
> 
> 赞同：0
> 
> 时间：2012-07-14T01:30:37.603
> 
> 标签：iphone, ios, multithreading, grand-central-dispatch

好的，所以我知道您不应该直接与主线程以外的任何线程中的视图元素进行交互。

但是你能在一个视图使用的后台线程中做一些事情吗？

特别是，我有一个相当充实的算法，最终会吐出一个字符串。如果我希望该字符串成为 UITextView 的文本，是否需要在主线程上运行整个算法？还是可以在后台完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:38:46.817

您当然可以在后台运行它，就像图形应用程序可能在后台渲染图像一样。一旦你准备好字符串，GCD 就是你的朋友：

```
- (void)backgroundStringGenerator
{
    NSString *expensiveString = ... // do string generation algorithm

    dispatch_async(dispatch_get_main_queue(), ^{
        theLabel.text = expensiveString;
    });
} 
```

# .net - 在 windows ce 环境中使用 3rd 方 dotnet windows 窗体控件？

> ID：11480277
> 
> 赞同：1
> 
> 时间：2012-07-14T01:31:05.933
> 
> 标签：.net, windows-ce

我刚刚继承了一个新的 windows ce 6 C# 项目。我想使用标准内置按钮/标签控件以外的东西。我找到了一些 3rd 方库，但它们似乎都不适合我想要的工业外观。

我的问题是：是否可以在带有 CF 框架的 windows CE 中使用标准的 windows 窗体 .NET 控件？如果这些控件只使用没有从 CF 中剥离出来的类，那么这些控件是否可以移植到这个平台上？或者我是否坚持使用专门说它们支持 CE 的控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:34:04.257

除非您拥有这些 3rd 方控件的源代码并且它们不使用 .NetCF 中不可用的任何类或方法，否则我会说您无法使用明确表示它们支持 CE 的控件。

我可以给你两个原因（可能还有更多）：

- 如果您没有源代码，那您就不走运了，因为为完整框架生成的 .net 程序集将无法在 .NetCF 上运行。顺便说一下，另一个方向确实有效，如果所有依赖项都可用并且不使用 p/invoke，为 .netcf 生成的程序集将在完整框架中工作。

-据我所知，WinCE 的大多数 GUI 控件的许多功能都依赖于 P/Invoke，而 WinCE 中每个函数所在的库几乎与桌面版 Windows 中的库不同。

此外，我建议您查看[Resco MobileForms Toolkit](http://www.resco.net/developer/mobileformstoolkit/)。我过去使用过它们，效果很好。

# php - 使用 PHP 函数使用数组创建动态下拉菜单：不填充下拉菜单

> ID：11480281
> 
> 赞同：0
> 
> 时间：2012-07-14T01:31:38.217
> 
> 标签：php, arrays, function, drop-down-menu

我正在尝试使用 PHP 动态构建一个下拉菜单。这个想法是：元素是由一个调用和数组的循环形成的。如果数组元素与会话中保存的数据匹配，则它将“选定”属性添加到标记，这意味着页面显示先前选择的选项。

我试图在这里包含一套完整的代码，从定义会话数据中的变量到回显表单元素的 HTML。

**它目前不起作用 - 下拉菜单出现，但为空白，并且没有选项。**我用 ideone 调试过它，它似乎运行成功，我看不出哪里出错了，但是这是我的第一个 PHP 函数！所以我确定我以某种方式搞砸了:)

非常感谢任何帮助。

```
 <?php
    session_start();
    //if the session data has been set, then the variable $sv_02 is defined 
    //as the data held in the session under that name, otherwise it is blank
    if (isset($_SESSION['sv_02'])) {$sv_02=$_SESSION['sv_02'];} else {$sv_02="";}

    //define the array
    $dm_sv_02 = array('-Year','-2012','-2011','-2010','-2009');

    //create the function 
    function dropdown($dropdownoptions, $session_data) 
    { 
    foreach($dropdownoptions as $dropdownoption){
           if($session_data == $dropdownoption){
            echo '<option value="' . $dropdownoption . '" selected>' . $dropdownoption . '</option>';
           } else {
            echo '<option value="' . $dropdownoption . '">' . $dropdownoption . '</option>';
           }
          }

    }
    //echo the HTML needed to create a drop down, and populate it with 
    //the function which should create the <option> elements
    echo '<select name="sv_02">';
    dropdown($dm_sv_02, $sv_02);
    echo '</select>';
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:43:49.853

尝试这个：

```
foreach ($dropdownoptions as $dropdownoption) {
  echo ($dropdownoption == $sv_02) ? "<option selected=\"selected\" value=\"$dropdownoption\">$dropdownoption</option>" : "<option value=\"$dropdownoption\">$dropdownoption</option>";} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T21:50:16.010

事实证明，这是因为我使用 {smarty} 标签来构建我的 php，代码是按原样编写的，但只有当它全部包含在一个 smarty 标签中时才有效，我不确定我是否理解为什么应该这样做是这样，但无论如何它都是通过将它全部包含在一个标签中来解决的。

# python - 用python提取网页的一部分

> ID：11480284
> 
> 赞同：0
> 
> 时间：2012-07-14T01:31:58.943
> 
> 标签：python

所以我有一个数据检索/输入项目，我想提取网页的某个部分并将其存储在文本文件中。我有一个 url 的文本文件，程序应该为每个 url 提取页面的相同部分。

[具体来说，该](http://www.reginfo.gov/public/do/eAgendaViewRule?pubId=200904&RIN=0648-AW10)程序会在诸如此类的页面上复制遵循“法律授权：”的法律法规。如您所见，仅列出了一项法规。但是，一些 url 也看起来像[这样](http://www.reginfo.gov/public/do/eAgendaViewRule?pubId=200210&RIN=1205-AB16)，这意味着有多个单独的法规。

我的代码适用于第一类页面：

```
from sys import argv
from urllib2 import urlopen

script, urlfile, legalfile = argv
input = open(urlfile, "r")
output = open(legalfile, "w")

def get_legal(page):
    # this is where Legal Authority: starts in the code
    start_link = page.find('Legal Authority:')
    start_legal = page.find('">', start_link+1)
    end_link = page.find('<', start_legal+1)
    legal = page[start_legal+2: end_link]
    return legal

for line in input:
  pg = urlopen(line).read()
  statute = get_legal(pg)
  output.write(get_legal(pg)) 
```

在“法律文件”输出 .txt 中给我所需的法规名称。但是，它不能复制多个法规名称。我试过这样的事情：

```
def get_legal(page):
# this is where Legal Authority: starts in the code
    end_link = ""
    legal = ""
    start_link = page.find('Legal Authority:')
    while (end_link != '</a>&nbsp;'):
        start_legal = page.find('">', start_link+1)

        end_link = page.find('<', start_legal+1)
        end2 = page.find('</a>&nbsp;', end_link+1)
        legal += page[start_legal+2: end_link] 
        if 
        break
    return legal 
```

由于每个法规列表都以`'</a>&nbsp;'`（检查两个链接中的任何一个的来源）结尾，我想我可以使用该事实（将其作为索引的结尾）循环遍历并在一个字符串中收集所有法规。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:18:22.947

我建议使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)来解析和搜索您的 html。这比进行基本的字符串搜索要容易得多。

这是一个提取包含> 标签的标签中的所有`<a>`标签的示例。（请注意，我在这里使用[requests](http://docs.python-requests.org/en/latest/index.html)库来获取页面内容 - 这只是推荐且非常易于使用的替代方法。） `<td>``<b>Legal Authority:</b``urlopen`

```
import requests
from BeautifulSoup import BeautifulSoup

# fetch the content of the page with requests library
url = "http://www.reginfo.gov/public/do/eAgendaViewRule?pubId=200210&RIN=1205-AB16"
response = requests.get(url)

# parse the html
html = BeautifulSoup(response.content)

# find all the <a> tags
a_tags = html.findAll('a', attrs={'class': 'pageSubNavTxt'})

def fetch_parent_tag(tags):
    # fetch the parent <td> tag of the first <a> tag
    # whose "previous sibling" is the <b>Legal Authority:</b> tag.
    for tag in tags:
        sibling = tag.findPreviousSibling()
        if not sibling:
            continue
        if sibling.getText() == 'Legal Authority:':
            return tag.findParent()

# now, just find all the child <a> tags of the parent.
# i.e. finding the parent of one child, find all the children
parent_tag = fetch_parent_tag(a_tags)
tags_you_want = parent_tag.findAll('a')

for tag in tags_you_want:
    print 'statute: ' + tag.getText() 
```

如果这不是您真正需要做的，[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)仍然是您可能想要用于筛选 html 的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:15:34.733

他们在那里提供 XML 数据，请参阅[我的评论](https://stackoverflow.com/questions/11480284/#comment-15160507)。如果您认为您无法下载那么多文件（或者另一端可能不喜欢这么多 HTTP GET 请求），我建议您询问他们的管理员是否愿意为您提供访问数据的不同方式。

我过去做过两次（使用科学数据库）。在一种情况下，数据集的庞大规模禁止下载；他们运行了我的 SQL 查询并将结果通过电子邮件发送（但之前曾提出邮寄 DVD 或硬盘）。在另一种情况下，我可以向 Web 服务发出数百万个 HTTP 请求（并且它们没问题），每个请求获取大约 1k 字节。这将花费很长时间，并且会非常不方便（需要一些错误处理，因为其中一些请求总是会超时）（并且由于[paging](https://stackoverflow.com/questions/501013/)而不是原子的）。我收到了一张DVD。

我想管理和预算办公室可能会提供类似的便利。

# mysql - 数据库设计——实体-属性-值模型查询

> ID：11480286
> 
> 赞同：0
> 
> 时间：2012-07-14T01:32:18.943
> 
> 标签：mysql, database

我终于偶然发现了一个我已经找不到答案的问题...

我正在开发一个数据库，该数据库将存储随时间记录的采样数据。最初，客户建立了一个非常特定于他们当前记录的数据的表，但是，他们担心随着它们的扩展，收集的数据可能会开始变化，并且可能会出现更多或至少不同的列需要。

当前型号：

```
+------------------+     +------------------+
|    FACILITIES    |     |   DATA_RECORD    |  
+------------------+     +------------------+  
| ID               |     | ID               |
| NAME             |     | FACILITY_ID      |
| DESC             |     | TIMESTAMP        |
| etc.             |     | TEMP_WATER       |
+------------------+     | TEMP_AIR         |
                         | pH_WATER         |
                         | etc...           |
                         +------------------+ 
```

我认为数据库应该设计如下：

```
+------------------+     +------------------+     +------------------+
|    FACILITIES    |     |   DATA_RECORD    |     |   COLUMNS        |  
+------------------+     +------------------+     +------------------+  
| ID               |     | ID               |     | ID               |
| NAME             |     | FACILITY_ID      |     | NAME             |
| DESC             |     | details etc..    |     | DESC             |
| etc.             |     +------------------+     | UNITS, etc...    |
+------------------+                              +------------------+

+------------------+ 
|    DATA_POINT    | 
+------------------+ 
| ID               | 
| DATA_RECORD_ID   | 
| COLUMN_ID        | 
| VALUE            | 
+------------------+ 
```

我的问题是：

1.  这是设计数据库的最佳方式，还是有我不熟悉的更好方式。
2.  如何形成查询语句以返回每个数据记录及其每个关联列？
3.  是否有普遍接受的良好数据类型可用作 DATA_POINT.VALUE？例如浮点数、十进制数...？

非常感谢你的帮助。

真挚地，

内特·K。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:44:07.363

看看您的要求，我认为您会更倾向于实体属性值类型的设计，这种设计通常很难查询（尽管设置起来相当简单）并且可扩展性不强。

您可以在此站点或谷歌上搜索 EAV 模型以查看有关此的讨论。

[http://www.simple-talk.com/content/print.aspx?article=843](http://www.simple-talk.com/content/print.aspx?article=843)

[实体属性值数据库与严格的关系模型电子商务](https://stackoverflow.com/questions/870808/entity-attribute-value-database-vs-strict-relational-model-ecommerce-question)

[http://tkyte.blogspot.com/2009/01/this-should-be-fun-to-watch.html](http://tkyte.blogspot.com/2009/01/this-should-be-fun-to-watch.html)

对于您的情况，您能否发布您需要收集的不同类型的设施和数据点？可能您可以使用类型和子类型对此进行建模吗？

# c++ - 作业要求解读，涉及客户端/服务器通信

> ID：11480287
> 
> 赞同：0
> 
> 时间：2012-07-14T01:32:29.413
> 
> 标签：c++

我一直在做一个任务，要求我们实现一些提供给我们的代码，允许创建可以通信的服务器和客户端。我打算在 main 中分叉一个进程，然后测试各种可用的请求选项，然后通过子进程或本地使用函数测量执行此操作所需的时间差异。我不确定我是否正确解释了这些要求。最重要的是，所有计时函数都返回 0 秒。不确定这是否正确。我将发布一小部分代码。

作业陈述（仅一小部分）：

> 测量请求的调用延迟（即从调用请求到响应返回之间的时间。）将其与向接受请求并返回回复的函数提交相同请求字符串的时间进行比较（与一个单独的过程做同样的事情）。提交一份比较两者的报告。

main之前声明的函数：

```
string myfunc(string request){
  //string myreq = request;
  RequestChannel my_func_channel("control", RequestChannel::CLIENT_SIDE);
  string reply1 = my_func_channel.send_request(request);
  return reply1;
} 
```

以及我如何解释代码中的方向：

```
int main(int argc, char * argv[]) {

  //time variables
  time_t start, end;
  double time_req_1, time_req_func;

  cout << "client.C  Starting...\n" << flush;
  cout << "Forking new process...\n " << flush;      
  pid_t childpid = fork();

  if(childpid == -1)
    cout << "Failed to fork.\n" << flush;
  else if(childpid == 0){
    cout << "***Loading Dataserver...\n" << flush;
    //Load dataserver   
    RequestChannel my_channel("control", RequestChannel::CLIENT_SIDE);
    cout << "***Dataserver Loaded.\n" << flush;

    time(&start);
    string reply1 = my_channel.send_request("hello");
    cout << "***Reply to request 'hello' is '" << reply1 << "'\n" << flush;
    time(&end);
    time_req_1 = difftime(end,start);  

    cout <<"\n\nRequest 1 took     :  "<< time_req_1 << flush;

  }
  else{//parent
    time(&start);
    string s = myfunc("hello");
    time(&end);
    time_req_func = difftime(end,start);
    cout <<"\nmyfunc Request took:  "<< time_req_func << "\n" << flush;

  }
  usleep(1000000);
} 
```

这是我的代码的缩写版本，但包含了你需要弄清楚发生了什么的一切。我做了指示说明的事情吗？另外，我的 0 秒结果可能是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:39:51.903

做一次所花费的时间可能（可能）太小而无法衡量，所以要计算多次执行所需的时间，然后计算出每次花费的时间。

# javascript - onMessage 事件永远不会被调用

> ID：11480301
> 
> 赞同：1
> 
> 时间：2012-07-14T01:34:36.110
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

因此，我正在为 Firefox 开发下一个附加组件，但是，在阅读 ContextMenus 的文档时，似乎从未调用过 onMessage 事件，这是我的代码：

```
exports.main = function(){
    var addonTab = require('addon-page');
    var data = require('self').data;
    var tabs = require('tabs');
    var cm = require("context-menu");

    cm.Item({
        label: "Tag This Image",
        context: cm.URLContext("*"),
        contextSelector: "img",
        contentScript: 
            'self.on("click", function(node, data){' +
            '   self.postMessage(node);' +
            '});',

        // nothing works...
        onMessage: function(node){
            openImageEditor(node.src);
            alert("Message? It worked? No way!"); 
            onTagImage(node);
        }
    });

    var onTagImage = function(node){
        alert("Image tagged!"); 
    };

    tabs.open({url: data.url('index.html'), isPinned:true});
}; 
```

所以我看了一下错误控制台，但这可能是我见过的最糟糕的错误格式......

> 时间戳：14/07/2012 3:21:44 错误：发生异常。Traceback（最近一次通话最后一次）：文件“resource://jid0-dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/addon-kit/lib/context-menu.js”，第 1310 行，在 CMP_handleEvent 中。*处理点击（事件。目标）；文件“资源：//jid0-dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/addon-kit/lib/context-menu.js”，第 1339 行，在 CMP*_handleClick this.browserWin.fireClick(topLevelItem, popupNode, item.data); BW_fireClick worker.fireClick(popupNode, clickedItemData) 中的文件“resource://jid0-dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/addon-kit/lib/context-menu.js”，第 1162 行；文件“resource://jid0-dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/addon-kit/lib/context-menu.js”，第 663 行，在 CMW_fireClick this._contentWorker.emitSync("click", popupNode, clickedItemData); 文件“resource://jid0-dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/api-utils/lib/content/worker.js”，第 71 行，在 emitSync return this._emitToContent(Array.slice(arguments)); 文件“resource://jid0-dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/api-utils/lib/content/content-worker.js”，第 96 行，onChromeEvent 返回 emit.apply(null, args); 文件“resource://jid0-dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/api-utils/lib/content/content-worker.js”，第 45 行，onEvent results.push(callback.apply(null, args)); 文件 "javascript:self.on("click", function(node, data){
> self.postMessage(node);});”，第 1 行，在空文件“resource://jid0-dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/api-utils/lib/content/content-worker.js”，第 81 行，在onEvent let str = JSON.stringify(args, replacer); [异常...“组件返回失败代码：0x80040111 (NS_ERROR_NOT_AVAILABLE) [nsIImageLoadingContent.loadingEnabled]”nsresult:“0x80040111 (NS_ERROR_NOT_AVAILABLE)”位置：“JS 框架 :: 资源://jid0-dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/api-utils/lib/cuddlefish.js -> 资源：//jid0-dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/api-utils/lib/sandbox.js -> 资源：//jid0 -dxglsws2k0cubycbcn7cw5tcyqk-at-jetpack/api-utils/lib/content/content-worker.js :: onEvent :: line 81" data: no]

这是实际的线路，但这对我来说没有任何意义：

> 文件 "javascript:self.on("click", function(node, data){self.postMessage(node);});"，第 1 行，为空

问题：这个错误是什么意思，或者说这行到底有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:28:39.313

您的上下文菜单实现在某些方面有点棘手，请参阅这个固定示例：

[https://builder.addons.mozilla.org/addon/1065630/latest/](https://builder.addons.mozilla.org/addon/1065630/latest/)

1.  来自内容脚本的 postMessage 调用无法发送 html 节点，它只能发送 JSON 数据。

2.  不要在 main.js 或从 ./lib/ 加载的其他模块中使用警报 - 此处未定义警报。请改用 console.log。

3.  您需要的上下文是上下文： cm.SelectorContext('img')

# android - ActionBar 上的溢出操作未显示

> ID：11480302
> 
> 赞同：6
> 
> 时间：2012-07-14T01:34:36.663
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个使用 ActionBar Sherlock 的 ActionBar，我需要它来显示溢出，因为我有比空间更多的操作。但是，它不显示溢出图标。这是我的配置：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_search"
      android:icon="@drawable/action_search"
      android:title="@string/menu_search"
      android:showAsAction="ifRoom|withText"/>
<item android:id="@+id/menu_library"
      android:icon="@drawable/hardware_headphones"
      android:title="@string/my_music"
      android:showAsAction="ifRoom|withText"/>
<item android:id="@+id/menu_downloads"
      android:icon="@drawable/av_download"
      android:title="@string/downloads"
      android:showAsAction="ifRoom|withText"/>
</menu> 
```

这是设置它的代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getSupportMenuInflater();
    menuInflater.inflate(R.menu.shopping_menu, menu);
    MenuItem searchMenuItem = menu.findItem(R.id.menu_search);
    searchMenuItem.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
            startActivity(new Intent(ShopActivity.this, SearchDialog.class));
            return false;
        }
    });
    MenuItem downloadMenuItem = menu.findItem(R.id.menu_downloads);
    downloadMenuItem.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
            startActivity( new Intent(ShopActivity.this, DownloadQueueActivity.class) );
            return false;
        }
    });
    MenuItem myMusicItem = menu.findItem(R.id.menu_library);
    myMusicItem.setOnMenuItemClickListener( new MenuItem.OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
            startActivity(new Intent(ShopActivity.this, MyMusicActivity.class));
            return false;
        }
    });

    return true;
} 
```

我已经查看了 ActionBar Sherlock 中的演示，但我无法说出他们在获取溢出方面的不同之处与我正在做的事情。那么这里发生了什么，为什么它没有显示？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-14T14:37:54.600

如果您有物理菜单键，则不会显示溢出指示器。这是一种设计行为。有关另一个问题的更多详细信息，请参见[此处。](https://stackoverflow.com/questions/8758263/how-to-force-overflow-menu-on-android-actionbar-compat?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:06:02.030

嗯，我认为这里有两个问题。首先，如 t0mm13b 所述，如果设备具有物理菜单键，则不会显示溢出指示器。这是设计使然。虽然根据我的经验，它并不适用于所有设备（不幸的是......）

第二个问题是，如果要强制某个项目溢出，则需要将 showAsAction 设置为“从不”。否则，溢出中出现的唯一元素是那些在操作栏中“不适合”的元素。鉴于您有 3 个项目要与文本一起显示.. 您几乎可以保证至少有一个溢出项目，因此溢出图标（带有第一段的警告）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-23T07:18:53.247

尝试根据文件中的Android指南将`android:showAsAction`标签更改为，如下所示`app:showAsAction``menu_main.xml`

如果不存在则添加此行

```
menu xmlns:app="http://schemas.android.com/apk/res-auto" 
```

 **```
 <item android:id="@+id/action_search"
        android:icon="@drawable/search_icon"
        android:title="@string/action_search"
        app:showAsAction="always"/> <!--change here android: to app:-->

    <item android:id="@+id/action_location"
        android:icon="@drawable/location_icon"
        android:title="@string/action_locate"
        app:showAsAction="always"/>
</menu> 
```**

# php - 简单选择语句的where子句中的MySQL未知列

> ID：11480308
> 
> 赞同：3
> 
> 时间：2012-07-14T01:35:32.147
> 
> 标签：php, mysql, where, collation

我有一个非常基本的选择语句导致列未知错误。当我尝试在变量中使用字符而不是数字时，就会出现查询问题。想知道它是否与排序规则有关。

这是我到目前为止所拥有的：

```
$titleno=$_REQUEST['title_no'];
$titleno=mysql_real_escape_string($titleno);
$titleno = utf8_decode($titleno); //tried without this before but didn't work
$query="SELECT * FROM `Titles` WHERE `title-no` = '".$titleno."'"; 
//tried various versions of this query - left it as single quotes as that seems to be the correct way. This only fails when a character is entered. Numbers work fine.  

echo "query - <br> $query <br>";    
$get_title_result=mysql_query($query) or die(mysql_error());
//here I get the unknown column name error - MySQL treats the titleno as the column name 
```

回声输出：

```
SELECT * FROM `Titles` WHERE `title-no` = '1234566d' 
Unknown column '1234566d' in 'where clause' 
```

如果我没有在 title-no 中使用“d”，它可以正常工作....此外，我尝试了一个没有连字符的不同列名，但仍然得到相同的行为。DB 将 title-no 的排序规则定义为 latin1_swedish_ci。（当我将查询粘贴到 mysqladmin 时不会出现此问题）

这是表定义：

```
CREATE TABLE `Titles` (  
 `id` int(11) NOT NULL auto_increment,  
 `title-no` varchar(15) NOT NULL,  
  UNIQUE KEY `title-no` (`title-no`),  
  KEY `id` (`id`)  
  ) ENGINE=MyISAM  
  AUTO_INCREMENT=9090949 DEFAULT CHARSET=latin1 AUTO_INCREMENT=9090949 ; 
```

**已解决：**问题不在于此查询。这是随后的查询。我很困惑，因为我只是在回应这个查询。我的错。谢谢大家的支持！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:43:25.767

尝试：

```
$query = "SELECT * FROM Titles WHERE `Titles`.`title-no` = '" . $titleno . "'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T02:31:25.127

这是对基于语句的查询的快速转换（使用 MySQLi，根据需要调整您的代码或此示例）。假设基础准备好的语句引擎*知道*您不能在准备好的语句中指定带有占位符的列名，因此它应该正确传递它（希望:-)

```
$titleno=$_REQUEST['title_no'];
$statement=mysqli_prepare($your_mysqli_link, "SELECT `id` FROM `Titles` WHERE `title-no` = ?"); 
mysqli_stmt_bind_param($statement, 's', $titleno);
mysqli_stmt_execute($statement);
mysqli_stmt_bind_result($statement, $found_id);
mysqli_stmt_fetch($statement);
echo "found id: $found_id"; 
```

# c# - 无法使用 Image 和 Name 正确填充 ListPicker 控件

> ID：11480315
> 
> 赞同：1
> 
> 时间：2012-07-14T01:36:46.320
> 
> 标签：c#, windows-phone-7, xaml

我为用户创建了一个 ListPicker 控件以更改其背景，但并非所有信息都正确填充到 ListPicker 控件中。当用户导航到我的 SettingsPage 时出现问题，所有 ListPicker 项目的文本都正确显示，但仅显示当前所选背景的图像。所有其他图像背景都是空白的。此外，奇怪的是，当我更改图像背景并在 MainPage 和 SettingsPage 之间来回导航时，选择的每个新图像背景都会显示在 ListPicker（以及所有其他先前选择的背景）中，而背景没有被选中的没有在 ListPicker 中显示的图像。到目前为止，我所拥有的如下：

设置页面.xaml

```
<toolkit:ListPicker x:Name="ThemeListPicker" Header="Theme" Grid.Row="2" Grid.ColumnSpan="2"
                                        SelectedIndex="{Binding}"
                                        SelectionChanged="ThemeListPicker_SelectionChanged">
                        <toolkit:ListPicker.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="{Binding Image}" Width="50" Height="37.59" Margin="0,0,12,0"/>
                                    <TextBlock Text="{Binding Name}" TextWrapping="Wrap"/>
                                </StackPanel>
                            </DataTemplate>
                        </toolkit:ListPicker.ItemTemplate>
                    </toolkit:ListPicker> 
```

SettingsPage.xaml.cs

```
List<ThemeItem> themeList;

public SettingsPage()
    {
        InitializeComponent();

        themeList = new List<ThemeItem>()
        {
            new ThemeItem { Image = new BitmapImage(new Uri("Resources/Themes/PanoramaBackground.png", UriKind.Relative)), Name = "Default" },

            new ThemeItem { Image = new BitmapImage(new Uri("Resources/Themes/Abstract Pattern.jpg", UriKind.Relative)), Name = "Abstract Pattern" },
            new ThemeItem { Image = new BitmapImage(new Uri("Resources/Themes/Asian Beauty.jpg", UriKind.Relative)), Name = "Asian Beauty" },
            new ThemeItem { Image = new BitmapImage(new Uri("Resources/Themes/Autumn Leaf.jpg", UriKind.Relative)), Name = "Autumn Leaf" },                
            new ThemeItem { Image = new BitmapImage(new Uri("Resources/Themes/Old Barn.png", UriKind.Relative)), Name = "Old Barn" }
        };

        ThemeListPicker.ItemsSource = themeList;
        ThemeListPicker.DataContext = ThemeListPicker.SelectedIndex;

    }

protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        //Respect the saved Theme index setting
        this.ThemeListPicker.SelectedIndex = Settings.ThemeIndex.Value;
    }

private void ThemeListPicker_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (e.AddedItems.Count <= 0) //to eliminate IndexOutOfRangeException
        {
            return;
        }

        //string selectedItem = e.AddedItems[0] as string;
        ThemeItem selectedItem = e.AddedItems[0] as ThemeItem;

        if (selectedItem != null)
        {
            Settings.Theme.Value = selectedItem.Image.UriSource.ToString();
            Settings.ThemeIndex.Value = ThemeListPicker.SelectedIndex;
        }
    } 
```

其中 ThemeItem 是一个小的自定义类

```
public class ThemeItem
{
    public BitmapImage Image { get; set; }
    public string Name { get; set; }
} 
```

当 SettingsPage 导航到时，我如何能够正确加载 ListPicker 控件中的所有图像背景和相应的文本名称？

编辑：添加设置类信息

```
public class Settings
{        
    //Theme settings
    public static readonly Setting<int> ThemeIndex = new Setting<int>("ThemeIndex", 0);

    //Theme Background
    public static readonly Setting<string> Theme = new Setting<string>("Theme", "Resources/Themes/PanoramaBackground.png");
    //public static readonly Setting<BitmapImage> Theme = new Setting<BitmapImage>("Theme", new Uri("/Resources/Themes/PanoramaBackground.png", UriKind.Relative));
}

//Encapsulates a key/value pair stored in Isolated Storage ApplicationSettings
public class Setting<T>
{
    string name;
    T value;
    T defaultValue;
    bool hasValue;

    public Setting(string name, T defaultValue)
    {
        this.name = name;
        this.defaultValue = defaultValue;
    }

    public T Value
    {
        get
        {
            //Check for the cached value
            if (!this.hasValue)
            {
                //Try to get the value from Isolated Storage
                if (!IsolatedStorageSettings.ApplicationSettings.TryGetValue(
                    this.name, out this.value))
                {
                    //It has not been set yet
                    this.value = this.defaultValue;
                    IsolatedStorageSettings.ApplicationSettings[this.name] = this.value;
                }
                this.hasValue = true;
            }
            return this.value;
        }
        set
        {
            //Save the value to Isolated Storage
            IsolatedStorageSettings.ApplicationSettings[this.name] = value;
            this.value = value;
            this.hasValue = true;
        }
    }

    public T DefaultValue
    {
        get { return this.defaultValue; }
    }

    //"Clear" cached value
    public void ForceRefresh()
    {
        this.hasValue = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:39:15.000

由于您在 ListPicker 中获得了大量项目，因此您也需要为它创建一个模板。您目前只有 ItemTemplate。该属性称为**FullModeItemTemplate**，此处显示了如何执行此操作的示例：

[http://windowsphonegeek.com/articles/listpicker-for-wp7-in-depth](http://windowsphonegeek.com/articles/listpicker-for-wp7-in-depth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:14:59.607

我最终使用了 FullModeItemTemplate，以便 ListPicker 可以正确填充到另一个页面中。

设置页面.xaml

```
<Grid.Resources>

                        <DataTemplate x:Name="PickerItemTemplate">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="{Binding Image}" Width="50" Height="37.59" Margin="0,0,12,0"/>
                                <TextBlock Text="{Binding Name}" TextWrapping="Wrap"/>
                            </StackPanel>
                        </DataTemplate>

                        <DataTemplate x:Name="PickerFullModeItemTemplate">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="{Binding Image}" Width="50" Height="37.59" Margin="0,0,12,0"/>
                                <TextBlock Text="{Binding Name}" TextWrapping="Wrap"/>
                            </StackPanel>
                        </DataTemplate>

                    </Grid.Resources>

<toolkit:ListPicker x:Name="ThemeListPicker" Header="Theme" Grid.Row="2" Grid.ColumnSpan="2"
                                        FullModeItemTemplate="{StaticResource PickerFullModeItemTemplate}"
                                        ItemTemplate="{StaticResource PickerItemTemplate}"
                                        SelectedIndex="{Binding}"
                                        SelectionChanged="ThemeListPicker_SelectionChanged"/> 
```

# tcp - 如何从内核中检索当前 TCP 拥塞窗口大小？任何命令或简单的脚本？

> ID：11480317
> 
> 赞同：1
> 
> 时间：2012-07-14T01:37:11.383
> 
> 标签：tcp, congestion-control

是否有任何命令或脚本来检索 tcp 连接的当前 TCP 拥塞窗口。所以假设一些通信正在通过网络接口（例如 eth0）通过 tcp 进行，现在有没有办法动态（定期）检索 tcp 拥塞窗口？（在 Linux 平台中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T00:50:06.763

> 是否有任何命令或脚本来检索网络接口的当前 TCP 拥塞窗口？

不，因为没有这样的东西。网络接口没有拥塞窗口。连接可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T14:36:46.857

我建议你试试 tcpprobe。通过动态加载tcpprobe，可以得到拥塞窗口大小。 [http://www.linuxfoundation.org/collaborate/workgroups/networking/tcpprobe](http://www.linuxfoundation.org/collaborate/workgroups/networking/tcpprobe)

# jquery - 无休止的滚动不起作用

> ID：11480320
> 
> 赞同：0
> 
> 时间：2012-07-14T01:37:50.313
> 
> 标签：jquery, ruby-on-rails-3, railscasts

我正在关注 Ryan Bates 的[http://railscasts.com/episodes/114-endless-page-revised](http://railscasts.com/episodes/114-endless-page-revised)。他证明，滚动到底部后出现的初始警报框工作正常，但在那之后我无法让任何东西正常工作。

我们来看一下：

照片/index.html.haml

```
 #photos
    = render @photos
  = will_paginate @photos 
```

照片控制器.rb

```
def index
  @photos = Photo.order('created_at DESC').paginate(:per_page => 20, :page => params[:page]) 
```

照片.js.coffee

```
jQuery ->
  $(window).scroll ->
if $(window).scrollTop() > $(document).height() - $(window).height() - 50
  $.getScript($('.pagination .next_page').attr('href')) 
```

照片/index.js.erb

```
$('#photos').append('<%= j render(@photos) %>');
<% if @photos.next_page %>
  $('.pagination').replaceWith('<%= j will_paginate(@photos) %>');
<% else %>
  $('.pagination').remove();
<% end %> 
```

据我所知，我已经正确设置了所有内容，但是当我滚动到页面底部时，什么都没有加载。我刚刚注意到它确实在我的日志中发出了 GET 请求，但浏览器中实际上没有出现任何内容......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:09:25.977

哇，终于想通了。`respond_to`我的索引操作中有一个块，需要`format.js`向该块添加一个。现在完美运行。

# hadoop - 使用 Hadoop/Mapreduce 计算数字的平均值

> ID：11480321
> 
> 赞同：2
> 
> 时间：2012-07-14T01:37:57.180
> 
> 标签：hadoop, numbers, mapreduce, average

我正在使用具有结构的 Hadoop/Mapreduce 计算数字的平均值

**引导禁止计数视图**

g1 b1 1

g1 b2 1

g1 b1 2

g1 b1 1

g2 b1 1

g2 b2 1

g2 b1 1

g2 b3 1

g3 b1 1

我想计算每个 guid 的平均**countview**吗？（我的想法是平均 = 5/2 与 guid g1 （2 是总数另一个banid：b1，b2））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:14:23.317

所以如果我明白你在问什么，你正在寻找的答案可能看起来像：

> g1 b1 1
> g1 b2 1
> g1 b1 2
> g1 b1 1
> 
> "g1" 的平均值 = 5/2（总计数 / 唯一 banid 计数）

首先，您需要将问题分解为 Map 和 Reduce 阶段。目标是对减速器中每个“guid”的所有计数和禁止项进行分组。

**映射器：**

输出键/值类型：文本/文本

输出键可能是包含 guid 的 Text Writable。该值将包含banid 和计数（即b1:1）。这将对每个 guid 的所有 banid 和计数进行分组。

**减速器：**

输出键/值类型：Text / FloatWritable

您现在将获得 Key 中每个 guid 的 Text 对象列表。遍历每个 Value 对象，将 banid 和 count 分开。创建一组 banids 并在迭代时对计数求和。完成此操作后，您应该能够计算平均值。将平均值写为 FloatWritable（或 Text.. 由您决定）。Key 将与 reduce 的输入键相同。

这是处理需要包含多条信息的值的简单方法。更高级的方法是创建您自己的 Writable 对象，该对象包装 Text 和 VIntWritable 对象。

# networking - wireshark 网络拓扑

> ID：11480322
> 
> 赞同：5
> 
> 时间：2012-07-14T01:38:14.447
> 
> 标签：networking, trace, wireshark, pcap, topology

有谁知道可以获取wireshark（pcap）跟踪并将其转换为可视网络拓扑的程序？

我有 3 个带有“很多”数据的 pcap 文件，我真的很想看看我是否能理解一些事情。

我玩过网络矿工之类的东西，但没有任何东西可以为数据提供视觉提示。例如![在此处输入图像描述](../Images/a316389b82e4854492591706621d3242.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T01:49:48.267

你实际上是在问两个问题：

1.  如何从网络跟踪中发现网络拓扑
2.  如何可视化发现的拓扑

### 拓扑发现

这是困难的部分。社区还没有开发出可靠的工具，因为网络流量表现出非常难以处理的垃圾。在这个领域想到的最有用的工具是[Bro](http://www.bro-ids.org)，它可以创建高质量的[连接日志](https://stackoverflow.com/questions/10190834/selecting-major-flows-at-once-in-a-huge-pcap-in-wireshark)。

提取通信图是直接的，即显示谁与谁通信的图。通过使用一些度量（数据包/字节/连接数）衡量边缘，您可以了解给定节点的相对贡献。

对于更复杂的分析，您将不得不开发一些启发式方法。例如，检测路由器可能涉及查看数据包转发行为或从 DHCP ACK 消息中提取默认网关。Bro（“网络的 Python”）允许您以非常自然的形式编写此类分析。

### 图形可视化

低调的方法涉及生成[GraphViz](http://www.graphviz.org)输出。 [Afterglow](http://afterglow.sourceforge.net/)提供了一些包装，使输出更易于消化。如需灵感，请查看[http://secviz.org/](http://secviz.org/)，您可以在其中找到许多此类图表的示例。它们中的大多数是用余辉创造的。

还有[Gephi](http://www.gephi.org)，一个比较花哨的图形可视化引擎，支持[多种图形输入格式](http://gephi.org/users/supported-graph-formats/)。生成的图表看起来很漂亮，也可以[交互式地探索](http://vimeo.com/9726202)。

# delphi - 如何更改虚拟树视图中根节点的状态索引？

> ID：11480323
> 
> 赞同：2
> 
> 时间：2012-07-14T01:38:23.890
> 
> 标签：delphi, delphi-7, virtualtreeview, tvirtualstringtree

我在虚拟树视图的 Stateimages 中分配了一个 ImageList。如何更改根节点的 stateindex？我什么也找不到。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T04:41:14.113

您需要实施该`OnGetImageIndex`事件。在那里，您可以将 设置`var ImageIndex`为图像的索引`ImageList`。

如果您只需要应用于根节点，您可以检查节点是否`parent = nil`.

从帮助：

> 10.1.2.104 TBaseVirtualTree.OnGetImageIndex 事件
> 
> 属性 OnGetImageIndex：TVTGetImageEvent；描述
> 
> 每当树需要图像的索引时触发此事件，无论是普通图像、选定图像还是状态图像。该事件应该尽可能快，因为有时在必须确定节点布局时经常调用它，例如在使用鼠标进行绘制选择或绘制树时。种类确定需要哪个图像，列确定需要图像的节点的哪一列。该值可以是 -1 以指示没有使用列。参数 Ghosted 可以设置为 true 以将图像与树背景混合 50%，并且可以用于例如在资源管理器树中标记隐藏的文件系统对象。此外，如果在挂起的剪切到剪贴板操作期间，节点是剪切集的一部分，则节点也将绘制有幻影图标。在这种情况下，更改幻影参数无效。注意 可以使用 TreeOptions.PaintOptions 中的 toUseBlendImages 切换混合节点。班级

# python - python中的正则表达式，匹配空格还是什么都不匹配？

> ID：11480330
> 
> 赞同：-3
> 
> 时间：2012-07-14T01:39:52.930
> 
> 标签：python, regex

基本上，我希望它匹配“asdf 78”和“78”，但不匹配“asdf78”。所以基本上，它只匹配 78，但如果有任何其他没有附加空格的字符，则不匹配。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:49:11.323

我想这是 ...

```
(?:^|\s)78 
```

`(?: exp )`可以省略。虽然，它告诉 Python 你不想知道它捕捉到了什么（你只想知道它是否捕捉到它，不管它是什么）（所以我们不会捕捉到我们不需要的东西；这是一个好习惯）

\s 是任何空白（如果您愿意，可以使用简单的空格）

如果您稍微了解正则表达式，其余的应该没问题。

# google-maps - 围绕一组标记居中和缩放Android MapView？

> ID：11480333
> 
> 赞同：1
> 
> 时间：2012-07-14T01:40:36.223
> 
> 标签：google-maps, android-mapview

我有一个 mapView，其中有几个点用标记绘制，每个点都有不同的纬度和经度，它们可能在附近也可能不在附近。有没有办法让 MapView 打开到最深的缩放级别，将屏幕上的所有点集中在一起？

我知道 mapController 有一个 setZoom 和 setCenter 属性，但是如何确定这些方法的值？还是有另一种更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T21:17:21.740

在您的 MapView 中，在您的 ImtemizedOverlay 中添加叠加项后，如下所示：

```
GeoPoint aGeoPoint = new GeoPoint((int)(latitude * 1E6), (int)(longitude * 1E6));
OverlayItem aOverlayItem = new OverlayItem(aGeoPoint, "Auto", "Auto");
locationsItemizedOverlay.addOverlay(aOverlayItem); 
```

尝试这个：

```
 // Center map in geopoints
    GeoPoint point = locationsItemizedOverlay.getCenterPoint();

    int latSpan = locationsItemizedOverlay.getLatSpanE6();
    int longSpan = locationsItemizedOverlay.getLonSpanE6();

    mapView.getController().setCenter(point);
    mapView.getController().zoomToSpan((int)(latSpan * Constants.MAP_ZOOM_FACTOR), (int)(longSpan * Constants.MAP_ZOOM_FACTOR)); 
```

在您覆盖的 ItemizedOverlay 中：

```
public GeoPoint getCenterPoint() {
    if(center == null) {
        int northEdge = -90000000; // i.e., -90E6 microdegrees
        int southEdge = 90000000;
        int eastEdge = -180000000;
        int westEdge = 180000000;

        Iterator<OverlayItem> iterator = overlayItemsArrayList.iterator();
        while(iterator.hasNext()) {
            GeoPoint geoPoint = iterator.next().getPoint();

            if(geoPoint.getLatitudeE6() > northEdge)
                northEdge = geoPoint.getLatitudeE6();

            if(geoPoint.getLatitudeE6() < southEdge)
                southEdge = geoPoint.getLatitudeE6();

            if(geoPoint.getLongitudeE6() > eastEdge)
                eastEdge = geoPoint.getLongitudeE6();

            if(geoPoint.getLongitudeE6() < westEdge)
                westEdge = geoPoint.getLongitudeE6();
        }

        center = new GeoPoint((int)((northEdge + southEdge) / 2), (int)((westEdge + eastEdge) / 2));
    }

    return center;
} 
```

我希望它有所帮助。

# android - android - phonegap 文件上传插件，状态栏中有进度条

> ID：11480335
> 
> 赞同：0
> 
> 时间：2012-07-14T01:40:55.973
> 
> 标签：android, cordova, phonegap-plugins

任何人都知道状态栏中带有进度条的 phonegap 文件上传器插件。我在这里找到了一个[https://github.com/phonegap/phonegap-plugins/tree/master/Android/FileUploader](https://github.com/phonegap/phonegap-plugins/tree/master/Android/FileUploader)但没有进度条而且可能已经过时（2 年前）。有人帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:58:40.383

好吧，据我所知，这是唯一的一个。我刚试了一下，效果不是很好。

该文件被上传，但由于某种原因，您首先会得到一个快速增加的进度指示。一旦达到 100%，文件实际上就开始上传，您仍然需要等待很多时间，而没有任何进展迹象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-06T09:19:17.013

我回复晚了，但我希望它对未来的人有所帮助！干杯

```
 function salvarARQUIVOS(superFILE) {
    var tipoArquivo = $( "input[name=tipoArquivo]:checked" ).val();
    var dataArquivo = $('#dataArquivo').val();
    var arquivoFile = superFILE;
    $('#btnARQUIVO').html('ENVIANDO');

if (dataArquivo === "") {
    $('#btnARQUIVO').html('SALVAR');
    aviso('Informe a data do arquivo');
    return true;
}

var extensao = arquivoFile.substr(arquivoFile.lastIndexOf('.') + 1);
if (extensao != "pdf") {
    aviso('Somente arquivos em pdf');
    return true;
}
myApp.showIndicator();
var arq = arquivoFile.substr(arquivoFile.lastIndexOf('/') + 1);
arq = arq.replace(/[\W_]/g, "-");
var uri = encodeURI(serv + "uploadPDF.php");
var nome_arquivo = arq.replace('-pdf', '.pdf');
console.log('nome_arquivo = > ' + nome_arquivo);
var options = new FileUploadOptions();
options.fileKey = "file";
options.fileName = nome_arquivo;
options.mimeType = "application/pdf";
options.chunkedMode = false;
var headers = {
    'headerParam': 'headerValue'
};
     options.headers = headers;
     var ft = new FileTransfer();
     ft.upload(arquivoFile, uri, onSuccessoArquivo, onErrorArquivo, options);

     function onSuccessoArquivo(r) {
         myApp.hideIndicator();
         linkArquivo = 'arquivosExames/' + nome_arquivo;
         idPaciente = $('#idPaciente').val();
         String = 'idPaciente=' + idPaciente + '&tipoArquivo=' + tipoArquivo + '&dataArquivo=' + dataArquivo + '&linkArquivo=' + linkArquivo;
         console.log(String);
         $.ajax({
           url: serv + "saveServ.php",
           type: "GET",
           data: String,
           dataType: "json",
           cache: false,
           success: function (data) {
              $('#btnARQUIVO').html('SALVAR');
              myApp.hideIndicator();
              changePage('pagelistaarquivos');
              aviso('Enviado');
           }
        });
    }

    function onErrorArquivo(error) {
       myApp.hideIndicator();
       $('#btnARQUIVO').html('SALVAR');
       aviso('Erro ao enviar o arquivo ' + error.code);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-03T13:38:32.437

答案可能为时已晚，但是通过插件对话框附加的插件文件，您将能够显示本机进度。代码示例如下。

干杯

```
function onSuccess(r) {
    navigator.notification.progressStop();
    console.log('success');
}

function onError(error) {
    navigator.notification.progressStop();      
}

var upload = function (imageURI) {
  navigator.notification.progressStart('', 'Uploading image...');
  var fileURL = imageURI;
  var uri = encodeURI(server + "uploadPacientes.php");
  var codigo = Math.floor(Math.random() * 655365456342524252);
  var paciente = document.getElementById('paciente_nome');
  var options = new FileUploadOptions();
  options.fileKey = "file";
  options.fileName = paciente + codigo + ".jpg"; 
  options.mimeType = "image/jpg";
  var headers = {
    'headerParam': 'headerValue'
  }
  options.headers = headers;
  var ft = new FileTransfer();

  ft.onprogress = function (progressEvent) {
    if (progressEvent.lengthComputable) {
        var percentual = Math.floor(progressEvent.loaded / progressEvent.total * 
  100);
        navigator.notification.progressValue(percentual);

    } else {
        navigator.notification.progressValue('0');
    }
  }
  ft.upload(fileURL, uri, onSuccess, onError, options);
} 
```

# python - 通过 POS 打印机和图像打印计费外星人

> ID：11480340
> 
> 赞同：14
> 
> 时间：2012-07-14T01:41:32.090
> 
> 标签：python, point-of-sale, epson, thermal-printer

我正在尝试创建一个原型，以将文本文件的位图数据打印到启用 LAN 的 epson pos 打印机 TM-T88V。

虽然我发送文本和文本格式说明没有问题，但我不明白我必须做什么才能让我的打印机打印[Arecibo 消息](https://en.wikipedia.org/wiki/Arecibo_message)的数据。

前几行：

```
00000010101010000000000
00101000001010000000100
10001000100010010110010
10101010101010100100100
00000000000000000000000
00000000000011000000000
00000000001101000000000
00000000001101000000000
00000000010101000000000
00000000011111000000000
00000000000000000000000
11000011100011000011000
10000000000000110010000
11010001100011000011010
11111011111011111011111
00000000000000000000000
00010000000000000000010
00000000000000000000000
00001000000000000000001 
```

该消息有 73 行和 23 列，产生 1679 个图片元素。这些元素中的每一个都由黑色的 1 或白色的 0 定义，并且应打印为 8x8（或 16x16）点的正方形。结果将导致

[![阿雷西博留言](../Images/94c45eac76f71a7aab6c4ade99f48944.png)](https://i.stack.imgur.com/FWQ4h.gif)
[（来源：[satsig.net](http://www.satsig.net/seti/message-to-gliese-581.gif)）]

从打印机的规格：

[![在此处输入图像描述](../Images/1982889b1c5eee01b51a3641889afa7e.png)](https://i.stack.imgur.com/AvZUp.jpg)

虽然 - 正如我所说 - 连接和发送到打印机没有问题，但我只是不明白这条指令想告诉我什么。在 Arecibo 消息的情况下会是什么

**我必须将哪些号码发送到打印机？我需要发送每个点吗？是什么`nL, nH specify the number of dots of the image data in the horizontal direction as (nL + nH × 256).`意思？**

这是我用于原型设计的简单 Python 程序：

```
# -*- coding: utf-8 -*-
import struct
import socket

def sendInstructions(mySocket,l):
    for x in l:
        mySocket.send(struct.pack('h', *[x]),1)

def emphasizeOn(mySocket):
    sendInstructions(mySocket,[27,33,48])

def emphasizeOff(mySocket):
    sendInstructions(mySocket,[27,33,0])

def lineFeed(mySocket,number):
    for i in range(number):
        sendInstructions(mySocket,[0x0a,])

def paperCut(mySocket):
    sendInstructions(mySocket,[29,86,0])

def sendText(mySocket,string):
    mySocket.send(string.encode('UTF-8'))

def main():
    mySocket = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
    mySocket.connect(('192.168.1.15',9100))    

    lines = ["Hello,","World!"]
    emphasizeOff(mySocket)
    lineFeed(mySocket,2)
    for l in lines: 
        if lines.index(l) == 0:
            emphasizeOn(mySocket)
        else:
            emphasizeOff(mySocket)

        sendText(mySocket,l)
        lineFeed(mySocket,2)

    lineFeed(mySocket,4)
    paperCut(mySocket)

    mySocket.close()

if __name__=="__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T03:15:18.987

此命令一次生成一个图像的水平条。条带的高度为 8 或 24 点，具体取决于 m 的值。

nL 和 nH 是整数的低字节和高字节，指定图像水平条带的宽度（以点为单位）。该宽度计算为 nL + nH * 256，因此如果您希望图像为 550 点宽，则 nH=2 且 nL=38。

参数 d 是位图数据；如果图像条高 8 点，则每个字节代表条中的一列。如果条带高 24 点，则三个字节代表一列。

因此，假设您在整数的 WxH numpy 数组中有 arecibo，1 或 0。您将：

```
data = np.zeros((W, H), dtype=np.ubyte)
## (fill in data here)

## Use m=33 since this is apparently the only mode with 
## square pixels and also the highest resolution 
## (unless it prints too slowly for your liking)
m = 33

nH = W // 256  ## note this is integer division, but SO's 
               ## syntax hilighting thinks it looks like a comment.
nL = W % 256

## Divide the array into sections with shape Wx24:
for n in range(data.shape[1] // 24):
    ## Note that if the image height is not a multiple of 24, 
    ## you'll have to pad it with zeros somehow.

    strip = data[:, n*24:(n+1)*24]

    ## Convert each strip into a string of bytes:

    strip = strip.reshape(W, 3, 8)
    bytes = (strip * (2**np.arange(8)[np.newaxis, np.newaxis, :])).sum(axis=2) # magic
    byteString = bytes.astype(np.ubyte).tostring()

    ## Send the command to POS 
```

# objective-c - setNeedsDisplay 未按预期在子视图中触发 drawRect

> ID：11480341
> 
> 赞同：7
> 
> 时间：2012-07-14T01:41:53.770
> 
> 标签：objective-c, subview, drawrect, setneedsdisplay

我正在苦苦挣扎`setNeedsDisplay`。我认为它应该触发对它被调用`drawRect:`的视图的调用，如果它在视图的范围内，那么它下面的层次结构，但我发现情况并非如此。这是我的设置：

从应用程序委托中，我创建了一个大小为正方形的视图，基本上覆盖了整个屏幕空间。这种观点称为`TrollCalendarView`。`TrollCalendarView`除了由指南针触发的旋转之外，没有什么事情发生。

有 7 个`TrollCalendarView`被调用的子视图，`PlatformView`旨在包含 2D 绘图对象，这些对象`TrollCalendarView`以 7 面排列的中心排列。因此，当 iPad 旋转时，这 7 个视图会旋转，因此它们始终与基本方向一致。

每个`PlatformView`子视图包含 3 个子视图，称为`Tower`. 每个塔都包含在`drawRect:`.

所以，总而言之，我有`TrollCalendarView`empty `drawRect:`、 subviews`PlatformView`和`Platformview`-> Tower ，每个都有 drawRect 实现。此外，Tower 位于 Platform 的范围内，Platform 位于 TrollCalendarView 的范围内。

在`TrollCalendarView`我添加了一个滑动识别器。当我刷卡时，属性会更新，我打电话`[self setNeedsDisplay]`但似乎什么也没发生。我将 NSLog 条目添加到`drawRect:`每个视图中的方法中，并且仅`TrollCalendarView` `drawRect:`调用该方法。具有讽刺意味的是，这是一个其`drawRect`方法将为空的视图。

没有xib文件。

我需要做什么来确保`drawRect`调用其他子视图中的方法？是否有文档描述了可能影响这一点的所有细微差别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T04:26:02.510

> 我正在为 setNeedsDisplay 苦苦挣扎。我认为它应该为调用它的视图触发 drawRect 调用，如果它在视图的范围内，则它下面的层次结构

不，事实并非如此。你从哪里得到这个想法的？

`-setNeedsDisplay:`仅适用于它被发送到的视图。如果您需要使其他视图无效，您还需要添加一些代码以发送`-setNeedsDisplay:`给它们。这里的所有都是它的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T04:31:14.897

我认为这是框架中的优化；如果您的子视图*不需要*再次绘制，那么这是一个重大的性能改进。意识到几乎任何可动画的东西都不需要drawrect（移动、缩放等）。

如果您*知道*应该重绘所有子视图（而不是简单地移动），则在主视图中覆盖 setNeedsDisplay 并执行以下操作：

```
-(void) setNeedsDisplay {
    [self.subviews makeObjectsPerformSelector:@selector(setNeedsDisplay)];
    [super setNeedsDisplay];
} 
```

我已经对此进行了测试，它也会导致所有子视图都被重绘。请注意，如果您以某种方式过滤子视图并确保仅将其发送到*实际需要重绘*的子视图，您将获得效率业力点......如果您能弄清楚如何不需要重绘它们，甚至*更多*。:-)

# android - 如何在另一个视图下添加动态按钮？

> ID：11480342
> 
> 赞同：5
> 
> 时间：2012-07-14T01:41:57.840
> 
> 标签：android

在android中，我有一段代码：

```
// RelativeLayout with id is "root": main.xml
<EditText 
    android:id="@+id/pref_edit_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:hint="Text to share in preference"
/>
// This is the button I want to add to main.xml
 <Button 
    android:id="@+id/save_button"
    android:layout_below="@id/pref_edit_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Save"
/> 
```

在我的活动中，`RelativeLayout.LayoutParam`我可以在视图的位置添加，`button`但我不能添加或等...另一个视图！那么，任何人都可以提出建议以动态添加与另一个相关的内容吗？`left, right, top, bottom``root``below``view``view``RelativeLayout`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T05:59:46.770

干得好。这将完成您想要做的事情：

```
public class ExampleActivity extends Activity {
private RelativeLayout rl;
private EditText editText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_example);

    rl = (RelativeLayout) findViewById(R.id.main_rl);
    editText = (EditText) findViewById(R.id.pref_edit_text);

    Button button = new Button(this);
    button.setText("Save");

    // create the layout params that will be used to define how your
    // button will be displayed
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    // add the rule that places your button below your EditText object
    params.addRule(RelativeLayout.BELOW, editText.getId());

    // set the layoutParams on the button
    button.setLayoutParams(params);

    // add button to your RelativeLayout
    rl.addView(button);
}
} 
```

# javascript - .js 和 .css 文件在我的 JSP 页面中作为 text/html 加载。

> ID：11480347
> 
> 赞同：4
> 
> 时间：2012-07-14T01:42:59.743
> 
> 标签：javascript, jsp, mime-types, tomcat7, vaadin

当我加载我的 jsp 页面时，附加的 css 和 js 文件被呈现为 text/html 格式。我从 chrome 浏览器中注意到它，我可以在其中看到此错误消息

“资源解释为脚本，但使用 MIME 类型 text/html 传输”

我在 web.xml 中指定了 mime 类型，如下所示，

```
 <mime-mapping>    
        <extension>js</extension>        
        <mime-type>application/javascript</mime-type>        
    </mime-mapping>

    <mime-mapping>    
        <extension>css</extension>        
        <mime-type>text/css</mime-type>        
    </mime-mapping>
    <mime-mapping>    
        <extension>jpg</extension>        
        <mime-type>image/jpeg</mime-type>        
    </mime-mapping> 
```

我运行应用程序的服务器是 Apache Tomcat 7。我在 Vaadin 项目中创建了这个 JSP 文件。

我的问题是，我是否需要在 Tomcat 配置的其他地方更改 Mime 类型？在 JSP 页面中包含 CSS 和 JS 文件是否有任何限制？
还是因为 Vaadin 框架？

我只是一个尝试学习 JSP 和 vaadin 框架的初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T05:52:18.397

我终于找到了这个问题的原因。我只是通过更改默认 url 映射来修复 web.xml

例如。从默认值如下

```
<servlet-mapping>
    <servlet-name>My Application</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

到

```
<servlet-mapping>
    <servlet-name>My Application</servlet-name>
    <url-pattern>/home/*</url-pattern>
</servlet-mapping> 
```

更改后，我仍然遇到一个错误，我通过添加来修复

```
<servlet-mapping>
<servlet-name>My Application</servlet-name>
<url-pattern>/VAADIN/*</url-pattern>
</servlet-mapping> 
```

这在 Vaadin 之书第 4.8 节中有所介绍 [https://vaadin.com/book/-/page/application.environment.html](https://vaadin.com/book/-/page/application.environment.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T16:54:16.160

就我而言，我有一个过滤器，`web.xml`可以过滤所有内容。（它会根据 IP 地址重定向到某个页面。）

```
<filter-mapping>
    <filter-name>RedirectFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

使用此过滤器映射，所有请求（包括图像、样式表、脚本等）都会通过过滤器。`filter-mapping`您可以通过从您的中删除`web.xml`或检查中的逻辑`filter-class`以允许或忽略资源来修复它。

# ruby-on-rails - 创建帐户后如何防止用户更改用户名

> ID：11480351
> 
> 赞同：-1
> 
> 时间：2012-07-14T01:43:37.903
> 
> 标签：ruby-on-rails, authentication

我对 Rails 很陌生，我正在开发一个涉及用户帐户的小型应用程序。目前，用户可以更改/更新他们的姓名、电子邮件和密码。用户也有一个唯一的用户名，但我想阻止用户更改它。我将如何防止这种情况发生？

我已将用户名包含在 attr_accessible 中，以便在注册时创建它，但是一旦用户名出现，我想以某种方式将其删除。到目前为止，我唯一的限制是缺少用户名编辑表单，但我知道这不会阻止有创意的用户发出 PUT 请求来更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:04:00.467

最简单的方法是在控制器的更新操作中删除参数，然后再将它们传递给`update_attributes`函数，如下所示：

```
#UsersController
def update
  params[:user].delete(:username)
  @user = user.find(params[:id])
  if @user.update_attributes(params[:user])
    flash[:notice] = "Successfully updated user."
    redirect_to @user
  else
    render :action => 'edit'
  end
end 
```

[或者，您可以使用RailsCast](http://railscasts.com/episodes/237-dynamic-attr-accessible)中所示的动态批量分配安全性，此要点是您覆盖`mass_assignment_authorizer`模型中的函数以添加您希望可访问批量分配的任何额外属性。使用这个想法，您可以执行以下操作：

```
class User < ActiveRecord::Base
  attr_accessible #what ever other stuff you wan't to accessable

  private
  def mass_assignment_authorizer
    new_record? ? super + [:username] : super
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T02:14:35.023

只需反转任何尝试的更改...

```
class User
  before_update :revert_username_if_changed, :if => Proc.new { |u| u.username_changed? }

  def revert_username_if_changed
    self.username = self.username_was
  end
end 
```

# jquery - 迭代具有相同 ID 的 div 并添加数字

> ID：11480365
> 
> 赞同：4
> 
> 时间：2012-07-14T01:48:08.203
> 
> 标签：jquery, loops

我正在尝试使用 id 'slide' 遍历每个 div 并在末尾添加一个数字（例如 slide1、slide2 等）

我已经能够为每个 div 添加一系列类，但我只能获得相同的代码来重命名第一张幻灯片，而不是其余的。

```
$(document).ready(function() {
 $("#slide").each(function(i) {
    $(this).attr('id', "slide" + (i + 1));
 });
});​ 
```

和这里的 jsfiddle [http://jsfiddle.net/YsvCe/1/](http://jsfiddle.net/YsvCe/1/)

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-14T01:52:59.357

您应该对多个元素使用类而不是 id。

```
<div class="slide">hello</div>

...

$(document).ready(function() {
    $(".slide").each(function(i) {
        $(this).attr('id', "slide" + (i + 1));
    });
});​ 
```

示例：http: [//jsfiddle.net/QaB76/](http://jsfiddle.net/QaB76/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-14T01:50:44.533

ID 属性必须是唯一的，`id`选择器应该只返回第一个匹配的元素：

```
$(document).ready(function() { 
    $("div[id^='slid']").attr('id', function(i) {
       return "slide" + ++i;
    });
}); 
```

[演示](http://jsfiddle.net/YsvCe/2/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T01:51:00.103

元素必须具有唯一 ID。该`each`函数没有迭代其他 div。所以想办法在不违反该规则的情况下选择它们。以下作品：

```
$("div").each(function(i) 
```

# javascript - JS/AJAX：输入后不刷新或单击按钮不触发提交

> ID：11480367
> 
> 赞同：3
> 
> 时间：2012-07-14T01:48:25.513
> 
> 标签：javascript, jquery, ajax

js 函数在我的[站点](http://webprolearner2346.zxq.net/registration-form/)中不起作用，但是当我在[JSFIDDLE](http://jsfiddle.net/earlonrails/pXA6U/2/)中尝试它时，它显示工作正常。我已经`DOM`准备好了，但它不会触发任何东西。我用firefox检查过，输入值根本没有发布。用户停止输入后，如何让 JS 功能正常启动？

**JS**

```
<script>
$(document).ready(function() {
 var timer = null; 
 var dataString;   
 function submitForm(){
   alert("success");
   $.ajax({ type: "POST",
            url: "index.php",
            data: dataString,
            success: function(result){
              alert("success");
               /*$('#special').append('<p>' +  $('#resultval', result).html() + '</p>');*/

            }

   });
   return false;
 }
 $('#submit').on('keyup', function() {
    clearTimeout(timer);
    timer = setTimeout(submitForm, 2000);
    var name = $("#name").val();
    dataString = 'name='+ name;
 });
 }); 
</script> 
```

**HTML**

```
 <input id="name" name="name" type="text" class="field text medium" value="<? $url ?>" maxlength="255" tabindex="1"     /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T02:21:10.460

问题是在上面的 HTML 中你有`id="name"`但绑定到`"#submit"`.

您`id="submit"`在 jsfiddle 示例中有，这就是它起作用的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:25:18.513

在您的网站上，我找不到 ID 为“提交”的元素，因此`$('#submit')`返回空。

# iphone - connectionDidFinishLoading 不调用 didReceiveData？

> ID：11480368
> 
> 赞同：0
> 
> 时间：2012-07-14T01:48:31.020
> 
> 标签：iphone, ios, xcode

我正在做一个简单的 WISPr 客户端。当我使用`BTOpenZone`热点测试它时，我发现它`willSendRequest`被调用了，它会将我重定向到热点登录页面。我返回 nil 是`willSendRequest`因为我希望获得 WISPr xml 标签，但我发现它`connectionDidFinishLoading`被调用，并且我检查没有收到数据。

```
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse
{
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)redirectResponse;
    int statusCode = [httpResponse statusCode];
    NSLog(@"redirect status code : %d", statusCode);

    NSDictionary *dict = [httpResponse allHeaderFields];
    NSLog(@"redirect dict : %@", [dict description]);

    if (statusCode >= 300 && statusCode < 400)
    {
    NSLog(@"redirect requested:  %@", request);
        return NULL;
    }
    return request;
} 
```

即使我使用 tcpdump 嗅探数据包，我也找不到任何 WISPr 标签。

任何想法为什么没有 WISPr xml 标签？

我真的很感谢你们的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:17:22.987

你不应该从

`webView:resource:willSendRequest:redirectResponse:fromDataSource:`

您需要的标签应该包含在该方法的 NSURLResponse 参数中（实际上是一个 NSHTTPURLResponse），然后您应该使用登录凭据将 HTTP POST 请求返回到适当的 URL。

# php - 上传前调整图片大小

> ID：11480373
> 
> 赞同：-3
> 
> 时间：2012-07-14T01:49:28.590
> 
> 标签：php, image, image-resizing

```
$filename=$_FILES["photo"]["tmp_name"];

$extension=end(explode(".", $filename));
$newfilename="1.".$extension;
$target = "image_files/". $newfilename;
if(move_uploaded_file($_FILES['photo']['tmp_name'], $target))
{
    echo "Ok";
} 
```

我已经创建了上面的代码，但是如何上传调整大小的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:56:13.130

由于 PHP 在服务器端运行，因此 PHP 将无法在将图像上传到服务器之前调整其大小。

使用[imagecopyresized](http://php.net/manual/en/function.imagecopyresized.php)或[imagecopyresampled](http://php.net/manual/en/function.imagecopyresampled.php)通过 PHP 调整图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:05:53.370

在将图像上传到您的服务器之前调整图像大小是不可能的，因为 PHP 只在那里工作，您要做的只是尝试使用服务器端不存在的图像，所以您必须上传处理之前的图像。

如果您担心上传图像的大小和消耗的时间，则将用户限制为特定的图像格式和特定​​大小，例如，如果您允许用户上传他的个人留言板头像，仅允许非常小的图像或者可能只允许 gif( *.gif) 图像，而不是获取巨大的 (2MB+) png(* .png) 图像并将其调整为所需的大小（例如 52x52）。

但是我相信它可以通过使用一些客户端代码来实现，这些代码将获取您要上传的图像并即时调整其大小。

# scala - 要求一个例子来说明不变性如何促进 Scala 的并发机制

> ID：11480374
> 
> 赞同：2
> 
> 时间：2012-07-14T01:49:40.963
> 
> 标签：scala, concurrency

以下示例显示可以使用可变变量作为发送给**Actor**的消息。Scala Actor 处理可变消息和不可变消息的方式不同吗？如果不是，为什么人们说不变性是 Scala 擅长并发的原因？

```
import scala.io._
import scala.actors._
import Actor._

def getPageSize(url : String) = Source.fromURL(url).mkString.length

var abc = "http://www.verycd.com"

def getPageSizeConcurrently() = {
  abc = "http://www.twitter.com"  // changing value

  val caller = self
  actor { caller ! (abc, getPageSize(abc)) }
  receive {
    case (url, size) =>
      println("Size for " + url + ": " + size)            
  }
}

getPageSizeConcurrently 
```

**更新：我在**[这里](http://scala-forum.org/read.php?3,941,942#msg-942)得到了很好的答复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:17:49.230

正如其他人指出的那样，您提出问题的方式使回答有点困难。可能是因为你关注的是Actor，你做的例子有点奇怪。

底线是 Scala 连同它的 Actor 实现，以及 Actor 的 Akka 实现，将很高兴地让你用可变性打自己的脑袋。这似乎是您要问的核心问题，所以如果这就是您想要的，您现在可以停止阅读:)

然而，不变性*确实*以多种方式提高了并发程序的质量，Scala 的可变性与不变性与 OO 和函数式编程的结合为您提供了很多实现事物的灵活性。

人们似乎没有说的是，一成不变的编程概念需要*一种不同于*大多数命令式程序员所习惯的编程风格（当我开始学习它时，我当然不习惯它）。许多人似乎认为他们可以像往常一样编写代码，用不可变对象替换可变对象，然后从中获利。不是这样。

如果我们`List`举个例子（实际上是看似无处不在的例子），我们可以看到如何编写一些代码来使用它。

我将使用 Akka 的 Future 实现，并用`List`Ints 做一些非常愚蠢的事情。算法并不是那么重要。重要的是要认识到*不*存在的东西——并发保护。我什至不需要*考虑*并发访问的问题，因为它是完全不可变的。我在下面添加了类型注释，以便清楚地知道发生了什么——Scala 实际上会推断出这一切。

```
import akka.dispatch.{ExecutionContext, Future, Await}
import akka.util.duration._
import java.util.concurrent.Executors

object Main {
  val execService = Executors.newCachedThreadPool()
  implicit val execContext = ExecutionContext.fromExecutorService(execService)

  def main(args: Array[String]) {
    // A Future list of 1's
    val flist: Future[List[Int]] = Future { (1 to 5) map { _: Int => 1 } toList }

    // The goal is to create a new list of Ints in 25 "iterations" across
    // multiple threads
    val result: Future[List[Int]] = (1 to 5).foldLeft(flist) { (acc, _) =>

      // "Loop" 5 times, creating 5 new lists of Ints, but these 'new' lists
      // share most of their content with the previous list
      val fs: IndexedSeq[Future[List[Int]]] = (1 to 5) map { i =>
        acc map { numlist =>
          (i * numlist.sum) :: numlist
        }
      }

      // Reduce the 5 lists we just created back down to one list again, by 
      // performing a pairwise sum across them all... in the Future
      Future.reduce(fs) { (a, l) =>
        (a zip l) map { case (i, j) => i + j }
      }
    }

    // Wait for the concurrency to complete and print out the final list
    println(Await.result(result, 1 second))

    // Shut down the execution system that was running our stuff concurrently
    execContext.shutdown()
  }
}
// Prints: List(12000000, 3000000, 750000, 187500, 46875, 3125, 3125, 3125, 3125, 3125) 
```

`(i * numlist.sum) :: numlist`使用来自 的所有使用位创建的中间列表`numlist`。从该循环中出来的 5 个新列表实际上是作为 5 个新值创建的，它们具有指向 的指针`numlist`，而不是 5 个全新的列表。即`list1 = "newvalue" + oldlist`和`list2 = "another new value" + oldlist`等...

编程一成不变地意味着转换模型。获取一个数据结构，将其提供给某物，然后对其进行转换并将其传递给其他人，依此类推。可变编程可以更快、更可靠，也*可以*更慢，这取决于你在做什么，但最重要的是，正如@mhs 所说，在安全性方面更容易推理。

这如何映射到您通常的命令式编程模式并不明显，因为通常情况下它不会。这也是为什么它对您没有直接意义的原因。就像编码中的其他任何事情一样 - 需要时间才能真正理解新范式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T00:16:53.567

我认为您的问题有点奇怪，也许您想知道为什么 Scala 仍然具有可变变量/数据结构，如果不可变的结构更适合并发性？

是的，不变性有利于并发性，并且就像其他人回答的那样更容易推理您的代码。

但这并不意味着 mutable 是无用的或本质上是坏的，有时使用 mutable`var`或数据结构的实现更容易，或者在某些特定情况下运行得更快。

Scala**不会**像 Haskell 那样强迫您做所有不可变的事情，而是**提供并鼓励**您使用不可变`val`和数据结构。

但它**也为你提供了可变的**，如果你真的需要它，请确保它在那里。

所以，是的。Scala/Akka actor 将像处理不可变消息一样处理可变消息，但如果没有充分的理由，您不应该这样做。

如果你使用`var`，你也应该有充分的理由，并且应该限制他们的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T09:31:58.300

不变性有助于推理并发程序的正确性。假设您在参与者之间共享的所有对象都是不可变的，您可以安全地保留对它们的假设，而无需了解其他参与者（可能由第三方实施）实际上做了什么。例如，如果您知道您已经实例化了一个包含十个`f`字段都包含正值的对象的不可变列表，那么即使您与其他人共享该列表，您也可以安全地继续使用此假设，并且您不会遇到您的代码依赖于假设列表中仍有十个带有正`f`字段的元素的情况，但实际上是另一个参与者修改了列表，使其仅包含一个带有负`f`字段的元素。

一般来说，不变性使得对程序的推理更容易，也就是说，在顺序情况下也是如此。这就是为什么证明 Haskell 程序的正确性比证明 Java 或 C# 的正确性容易得多的原因之一。对于后者，需要专门的逻辑，例如[分离逻辑](http://en.wikipedia.org/wiki/Separation_logic)或[隐式动态框架](http://people.cs.kuleuven.be/~jan.smans/ecoop09.pdf)，它们使您能够推理共享可变状态。如果您有兴趣，请查看[VeriFast](http://people.cs.kuleuven.be/~bart.jacobs/verifast/)（用于 SL）和 Chalice（[项目页面](http://research.microsoft.com/en-us/projects/chalice/)和[Web 界面](http://rise4fun.com/Chalice)，对于 IDF），它们都是涉及可变数据结构和别名的程序的实验验证器。但请注意，这是一个正在进行的研究领域，这些验证器通常无法处理现实世界的程序。

底线是：如果您知道您的数据是不可变的，那么您将其提供给谁都没关系，他们将永远无法修改它并打破您的工作假设。

# css - CSS居中：在小窗口上看不到块的顶部和左侧

> ID：11480376
> 
> 赞同：0
> 
> 时间：2012-07-14T01:49:42.557
> 
> 标签：css

```
<!DOCTYPE html>
<html><head><style>
html, body{
    width: 99%; /* to prevent scroll bar when unnessery */
    height: 100%;
}
div#main_container{
    position: absolute; 
    top: 50%; margin-top: -200px;
    left: 50%;  margin-left: -400px;
    width: 800px; height: 400px;    
    border: 1px solid black;
}
</style></head><body>
<div id='main_container'>
     Some content
</div>
</body></html> 
```

问题：如果我让浏览器的窗口比我的内容块小，我看不到块的顶部和左侧 - 滚动条看起来像我在内容的顶部\左侧的最大值，但没有顶部和右侧我的街区被看到了。

为什么会发生以及如何解决？

我在 3 个浏览器中进行了测试，所以这不是浏览器问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T02:51:35.833

它发生是因为它注定要发生。让我们计算一下高度为 200 像素的浏览器。

那么，200px 的 50% 是多少？*datarara* .. 它是 100 像素。这使得 y 轴的顶部为`#main_container`100px。给它一个 -200px 的边距，它会上升 200px。如果它位于 100px 并且向上移动 200px，则`#main_container`顶部将放置在 -100px 处。难怪它的一部分是隐藏的。

**解决方案**

一个解决方案是使`position: absolute`on`#main_container`相对于`body`元素而不是浏览器窗口（即： set `position:relative`on `body`）。然后，通过设置 a`min-height`和`min-width`on`body`等于`#main_container`'s`height`和`width`（分别），无论窗口变得多短，主体的尺寸永远不会小于`#main_container`- 不可能“溢出”。

然而，将这些样式应用于`body`元素，假设您在页面上只有一个绝对定位的框。如果不是这种情况，那么`#main_container`用它自己的包装`div`可能是最兼容的解决方案。这是解决方案：

**的HTML**

```
<div class="wrap">
    <div class="box"></div>
</div> 
```

**CSS**

```
.wrap {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    min-width: 800px; min-height: 400px;
}

.box{
    position: absolute;
    top: 50%; margin-top: -200px;
    left: 50%;  margin-left: -400px;
    width: 800px; height: 400px;    
    border: 1px solid black;
} 
```

# objective-c - 如何检查子视图是否在 UIScrollView 中被点击

> ID：11480377
> 
> 赞同：1
> 
> 时间：2012-07-14T01:49:42.227
> 
> 标签：objective-c, ios, uiview, uiscrollview, subview

是否有可能知道我在命中测试方法期间是否成功点击了 a`UIView`内的 SubView？`UIScrollView`

`UIScrollView->UIView->SubView`

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    // Do something
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T02:22:04.427

多一点上下文会很好。

您的子视图将是处理触摸的视图，只要它`userInteractionEnabled`设置为`YES`且可见，即不隐藏且 alpha 大于或等于`0.01`。

我不确定您为什么要覆盖`hitTest:withEvent:`，但如果您确定这是您想要做的，那么您应该能够解决您的问题`pointInside:withEvent:`。

# objective-c - 当磁盘上的图像更改时，如何让 NSImageView 刷新？

> ID：11480391
> 
> 赞同：2
> 
> 时间：2012-07-14T01:52:08.763
> 
> 标签：objective-c, macos, cocoa, cocoa-bindings, nsimage

我通过`NSImageView`绑定绑定到磁盘上的文件`valuePath`。当我向该位置写出新图像时，我希望`NSImageView`显示新图像。我怎样才能做到这一点？

我已经尝试在视图绑定的对象上调用`-didChangeValueForKey:`和，并`-willChangeValueForKey:`在对象上声明一个`+keyPathsForValuesAffecting___`方法，但我觉得这些基于 KVO 的方法没有影响，因为图像的路径没有改变，只是它的内容。

更改发生后，我还尝试在图像视图上调用`-setNeedsDisplay`和`-updateCell:`，但这也不起作用。

**更新**

我在写入新图像之前立即将`-imagePath`绑定对象上的属性（计算属性）更改为`@""`，然后立即返回正确的路径。这确实达到了预期的效果，但我希望 API 中存在更正确的方法。感觉就像一个黑客。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T18:48:40.523

Set a different value (empty string `@""`) and then restore the original value.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-10T02:29:26.420

很确定这`needsDisplay = true`是执行此操作的正确方法，但是您还必须在主线程上运行，否则不会发生更改。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-02T12:19:33.980

转到界面生成器中的文件检查器，然后取消选中“使用自动布局”。

# android - jquery移动Web应用程序屏幕底部的空白？

> ID：11480394
> 
> 赞同：0
> 
> 时间：2012-07-14T01:52:25.847
> 
> 标签：android, css, ios, jquery-mobile, cordova

我正在使用 JQM 1.1 和 Phonegap 1.8 开发一个应用程序，我使用 JavaScript 来呈现 HTML。有时，页面底部会随机出现一个空白。我已经尝试了许多 CSS 修复，但似乎没有任何帮助。

iPad截图： [https ://dl.dropbox.com/u/7068306/photo.PNG](https://dl.dropbox.com/u/7068306/photo.PNG)

这发生在 Android 和 iOS 上。

# c# - 取消已上传的 WebClient FTP 上传

> ID：11480396
> 
> 赞同：1
> 
> 时间：2012-07-14T01:52:58.693
> 
> 标签：c#, ftp, webclient

是否有可能做到这一点？...

```
WebClient client;
using (WebClient client = new WebClient())
{
  client.UploadProgressChanged += new UploadProgressChangedEventHandler(client_UploadProgressChanged);
  client.UploadFileCompleted += new UploadFileCompletedEventHandler(client_UploadFileCompleted);

  //Start the upload
  client.UploadFileAsync(new Uri("/targetfile.jpg"), @"c:\sourcefile.jpg");
}

private void client_UploadFileCompleted(object sender, UploadFileCompletedEventArgs e)
{
  //upload finished
}

private void client_UploadProgressChanged(object sender, UploadProgressChangedEventArgs e)
{
  if (e.ProgressPercentage == 60)
  {
    //Cancel the upload
    client.CancelAsync();
  }

  //update progressbar
} 
```

一旦我尝试使用 CancelAsync() 取消上传，我发现我的应用程序终止（没有异常或错误......当我从 IDE 运行它时关闭。）但文件继续上传到 FTP 站点（我可以看到它监控 FTP 站点）。

旁注...当我将它作为已编译的应用程序运行时，它也会崩溃，没有任何类型的错误，但检查应用程序下的系统日志我得到一个 .Net 运行时错误...

```
Application: MyUploader.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Net.WebException
Stack:
   at System.Net.FtpDataStream.System.Net.ICloseEx.CloseEx(System.Net.CloseExState)
   at System.Net.FtpDataStream.Dispose(Boolean)
   at System.IO.Stream.Close()
   at System.Net.WebClient+UploadBitsState.Close()
   at System.Net.WebClient.UploadBitsWriteCallback(System.IAsyncResult)
   at System.Net.LazyAsyncResult.Complete(IntPtr)
   at System.Net.ContextAwareResult.CompleteCallback(System.Object)
   at System.Threading.ExecutionContext.runTryCode(System.Object)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object)
   at System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Net.ContextAwareResult.Complete(IntPtr)
   at System.Net.LazyAsyncResult.ProtectedInvokeCallback(System.Object, IntPtr)
   at System.Net.Sockets.BaseOverlappedAsyncResult.CompletionPortCallback(UInt32, UInt32, System.Threading.NativeOverlapped*)
   at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32, UInt32, System.Threading.NativeOverlapped*) 
```

想法？

# ruby-on-rails - 这行代码是什么意思？！在哈希 [] 内

> ID：11480397
> 
> 赞同：1
> 
> 时间：2012-07-14T01:52:58.403
> 
> 标签：ruby-on-rails, ruby

这是代码行：

```
options[:selectors] = [[1, "Spain"], [2, "Italy"]]
v = "Monthly"

value = Hash[options[:selectors]][!!(v =~ /^[0-9]+$/) ? v.to_i : v] 
```

我不确定的主要部分是最后一行的这一部分：

```
[!!(v =~ /^[0-9]+$/) ? v.to_i : v] 
```

是什么`[!!`意思，又是什么`=~`意思？最后，整体线是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T02:01:58.010

`!!`是一个成语，意思是“将此值更改为布尔值”。第一个`!`进行类型转换，第二个`!`在保持布尔值的同时恢复语义。

不过，这在 ruby​​ 中并不合适。我相信这是一个PHPism。

`=~`是一个正则表达式匹配。

最后，整件事的意思是“如果 v 是一个 int 字符串，则将 v 设为整数类型并从哈希中获取，否则使用字符串作为键。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:10:07.363

The`!!`是一个双重否定，一种用于将任何对象转换为`true`或`false`值的习语。

它之所以有效，是因为除此之外的任何对象`false`并`nil`评估为`true`. 否定对象产生`false`，否定结果返回`true`：

```
object = Object.new

not object
# => false

not not object
# => true 
```

如果我们试图否定`nil`，我们得到`true`，如果我们试图否定那个结果，我们得到`false`：

```
object = nil

not object
# => true

not not object
# => false 
```

编码：

```
!!(v =~ /^[0-9]+$/) ? v.to_i : v 
```

将`v =~ /^[0-9]+$/`表达式返回的值（可以是任何对象）转换为`true`或`false`。然后将布尔值用作[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)的参数。

这意味着：如果字符串包含一个整数，则将其转换为 1，否则只返回该字符串。

# delphi - 在 Delphi 中使用消息内的一些变量更改 MessageBox 的标题

> ID：11480401
> 
> 赞同：3
> 
> 时间：2012-07-14T01:53:47.627
> 
> 标签：delphi, messagebox

如何使用消息中的一些变量更改消息对话框的标题。我试过了

```
Application.MessageBox('x * y = ' + result, 'this is title', MBICONINFORMATION); 
```

但它显示错误说不兼容的类型：'String' 和'PAnsiChar'，我知道这是因为'result' 变量是不允许的。有什么解决办法吗？之前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T14:13:49.727

我建议您使用格式功能如下：

`Application.MessageBox(PChar(Format('x * y = %s', [result])), 'this is title', MB_ICONINFORMATION);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T02:21:43.390

好的，我知道刚刚放

```
Application.MessageBox(**PChar**('x * y = ' + result), 'this is title', MB_ICONINFORMATION); 
```

也许可以作为其他人的参考。

# python - Python：连接包含特定字符串的行

> ID：11480404
> 
> 赞同：1
> 
> 时间：2012-07-14T01:54:04.723
> 
> 标签：python, join

我想加入文件中的两行，取决于它们是否以相同的元素开头。
我可以将每一行的第一个元素变成一个列表，并使用这个列表中的元素来搜索每一行，但这似乎不是最有效的方法？

我有以下文件

```
1,AF534061.1,T,A  
1,K02718.1,T,A  
16,AF534061.1,G,-  
16,K02718.1,G,-  
17,AF534061.1,T,-  
17,K02718.1,T,-  
18,AF534061.1,A,-  
18,K02718.1,A,-  
19,AF534061.1,T,-  
19,K02718.1,T,-  
20,AF534061.1,A,-  
20,K02718.1,A,-  
21,AF534061.1,A,-   
21,K02718.1,A,-  
24,AF534061.1,C,T 
```

如果第一项在行之间共享，我想加入行。所以我想得到以下输出

```
1,AF534061.1,T,A,1,K02718.1,T,A
16,AF534061.1,G,-,16,K02718.1,G,-
17,AF534061.1,T,-,17,K02718.1,T,-
18,AF534061.1,A,-,18,K02718.1,A,-
19,AF534061.1,T,-,19,K02718.1,T,-
20,AF534061.1,A,-,20,K02718.1,A,-
21,AF534061.1,A,-,21,K02718.1,A,-
24,AF534061.1,C,T 
```

在这个例子中，看起来我可以加入每隔一行，但我希望（需要）使代码更通用！

我不认为这很难，但我似乎无法弄清楚！谢谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T02:14:43.623

Python 标准库充满了工具。对于这项工作，请使用[itertools.groupby](http://docs.python.org/library/itertools.html#itertools.groupby)。

```
import itertools

lines = '''1,AF534061.1,T,A
1,K02718.1,T,A
16,AF534061.1,G,-
16,K02718.1,G,-
17,AF534061.1,T,-
17,K02718.1,T,-
18,AF534061.1,A,-
18,K02718.1,A,-
19,AF534061.1,T,-
19,K02718.1,T,-
20,AF534061.1,A,-
20,K02718.1,A,-
21,AF534061.1,A,-
21,K02718.1,A,-
24,AF534061.1,C,T'''.split('\n')

for key, group in itertools.groupby(lines, lambda line: line.partition(',')[0]):
    print ','.join(group) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:09:43.020

您可以使用正则表达式和反向引用。

```
print re.sub(r'(([^,]+).*)\n(\2.*\n)', r'\1\3', data) 
```

这是解释的表达式：

```
(             # Start of first line
 (            # Start of first part of line, refered to as \2
  [^,]+       # Everything before the first comma
 )
 .*           # Remainder of first line
)             # This new line isn't in any capture groups, so it'll be 
\n            #  removed from any matched results
(             # Start of second line
  \2          # This takes the first part of the first line and requires 
              #  it to match again
  .*          # Remainder of second line
  \n          # We include this newline to make the next search start at 
              #  the start of the following line.  It's reinserted because
              #  it's in the second line's capture group.
) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-14T02:13:21.470

我没有测试过这段代码，但这样的东西应该可以工作：

```
 common = {}
 for line in file.readLines():
   prefix = line.split(",")[0]
   if prefix in common:
     common[prefix].append(line)
   else:
     common[prefix] = [line]

 for key, values in common:
   print values.join(",") 
```

# ios - 向 UIButton 添加笔画

> ID：11480405
> 
> 赞同：0
> 
> 时间：2012-07-14T01:54:27.623
> 
> 标签：ios, uibutton

如何在界面构建器中或以编程方式向 UIButton 添加笔画？我想创建与向形状添加笔触时在 Photoshop 中获得的相同效果（如轮廓）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:01:24.347

使用按钮的 layer.width 属性，您可以在浮点值中给出宽度。按钮有一个名为 layer 的属性。

# java - 复制图节点以对节点网络进行全新复制

> ID：11480412
> 
> 赞同：0
> 
> 时间：2012-07-14T01:56:42.800
> 
> 标签：java, algorithm, data-structures, graph

一个函数，它获取一个节点并复制该节点和所有相邻节点以创建一个与该节点完全相同的新结构。

A
/ \
B CE
\ /
D

应该使用新节点创建类似的网络

一个 Node 对象定义为

节点{

Arraylist 邻居；// 返回数组列表中的所有相邻节点

}

这段代码会起作用吗？

```
public Node copyGraph(Node A){
    HashTable<Node, Node> hash = new HashTable<Node, Node> ();

    return copyGraphWithHash(A, hash);

}

public Node copyGraphWithHash(Node A, HashTable<Node, Node> hash){

  if (A.neighbours.size() == 0)
    return null;

  Node newfirst = null;

  if(!hash.hasKey(A))
    newfirst = new Node();
    hash.add(A,newfirst);
  }

  for ( Node n : A.neighbours()){

   if (copyGraphWithHash(n, hash))
         newfirst.neightbours.add(copyGraphWithHash(n, hash));
  }
  return newfirst;
 } 
```

请建议我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:46:01.410

此代码将以抛出堆栈溢出异常结束。

问题 ：

*   错误的基本情况：只要你有一个至少包含 2 个节点的图，你就会有一个无限递归，因为在每种情况下你总是会为每个孩子调用递归函数。
*   错误的递归情况：在某些情况下，递归函数在循环中被调用了两次
*   图形只有一个节点时的错误行为：它不会被复制

解决方案：

*   删除对邻居的测试
*   如果哈希表中包含处理节点，则直接返回重复节点
*   如果没有，新建一个节点，在表中添加对应关系，别忘了初始化neighbors变量
*   在循环中，删除测试并始终填充邻居变量

其他潜在问题：

*   递归函数是公开的。如果我们不需要提供预填充的哈希表，则不应公开
*   在非多线程上下文中使用哈希表而不是哈希图
*   如果 A 为空，则无错误管理

# c++ - 将指针作为参数传递给函数

> ID：11480413
> 
> 赞同：0
> 
> 时间：2012-07-14T01:56:50.153
> 
> 标签：c++, pointers

考虑以下示例

```
class Foo{
  public:
    Foo(int i):x(i){}
    int x;
};

void
bar(Foo *p2)
{
  delete p2; 
  p2 = new Foo(2); 
}  

int
main()
{
  Foo *p1 = new Foo(1);
  cout<<p1->x;
  bar(p1);
  cout<<p1->x;
} 
```

据我了解，指针变量存储在堆栈中，并包含指向它“指向”的堆上动态分配的内存的地址。现在，当我将指针传递给函数时，会在堆栈上创建第二个指针，指向与第一个指针相同的内存地址。当我在 bar() 中删除 p2 并分配新内存时， p1 和 p2 应该指向不同的地址，对吗？

但是，如果我编译这段代码，我会得到 1 和 2 作为输出。这是因为 p2 设法分配 p1 已经指向的相同内存单元，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:01:03.973

> 这是因为 p2 设法分配 p1 已经指向的相同内存单元，还是我错过了什么？

你什么都没错过。您已正确确定该程序的行为是*undefined*。根据定义，它可以打印任何东西，包括`2`.

在您的运行中，只有巧合（并且很可能是您确定的巧合）导致它打印`2`。`new int(47)`您可能会通过在现有的之后`delete`和之前添加来破坏该巧合链`new`。

如果您希望程序按照它的方式运行，但通过定义的行为，您可以对`bar`'s 的定义进行以下小的更改：

```
void
bar(Foo*& p2) 
```

这通过*引用*而不是*通过值*传递参数。通过这样做，对`p2`内部变量的更改将`bar`反映在`p1`内部`main.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:31:32.167

除了在您的示例中，指针变量不一定在堆栈上，并且它们引用的地址不一定在堆上，（但 new 和 malloc 都返回堆上的地址）。指针变量及其引用的地址都可以在堆栈、堆、全局/静态变量区域甚至 ROM 上。您的其余解释是正确的，但您观察到的行为是不确定的，期望它是可重现的确实非常危险。任何更改、不同的运行时版本、多线程情况、不同架构上的编译或使用另一个编译器都可能完全改变结果：随机值或崩溃。

# html - 按特定元素与按 id 设置样式

> ID：11480415
> 
> 赞同：0
> 
> 时间：2012-07-14T01:57:48.340
> 
> 标签：html, css, xhtml

我一直在处理一些示例，一直想知道通过一个特定元素设置您的样式或将一个 id 附加到它并通过它设置它有什么好处（如果有的话）？例如，如果我们有这张表：

```
<table>
    <tbody>
        <tr class="cat1">
            <th scope='row'><span id='s'>Table Data</span></th>
            <td class='tdh'>Table Data</td> 
        </tr>
        <tr class="cat2">
            <th scope='row'><span id='s2'>Table Data</span></th>
            <td class='tdh'>Table Data</td> 
        </tr>
    </tbody>
</table> 
```

并且想要设置 span 元素的样式，我们可以通过它与表格的位置来抓取该元素：

```
table tr.cat1 span {
  some css;
} 
```

或通过 id：

```
#s {
  some css;
} 
```

这些实际工作的方式有什么大的不同吗？我发现使用 id 更简单，错误余地更小，尽管我发现很多人使用前者的例子。这有什么具体原因吗？还是真的只是个人喜好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:30:08.557

更多的是使用它们定义为使用的 HTML 属性。

ID 是文档/页面上元素的唯一标识符。所以 ID 通常是“main-navigation”、“footer-wrapper”和“left-sidebar”之类的东西。

类是用来描述元素的属性，它们也可以组合使用。例子是这个文本是双倍行距和灰色和居中的

简单地说，使用 id 来识别和类来描述和相应地制作样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T02:17:05.693

IMO 认为您希望不惜一切代价避免使用 ID 进行样式设置，但我也赞同 Nicole Sullivan 倡导的[OOCSS 做事](https://github.com/stubbornella/oocss/wiki)方法。基本上它归结为ID所针对的样式不可重用，这通常会开始失控并导致在多个地方完全相同的样式声明，除了在需要重写时劫持特异性链某些情况。[这篇文章](http://coding.smashingmagazine.com/2011/12/12/an-introduction-to-object-oriented-css-oocss/)和[那个 wiki 页面](https://github.com/stubbornella/oocss/wiki)以比我愿意在这里概述的方式更好的方式描述它。

# php - 如何更新进行 SELECT 查询的表？（错误 #1093）

> ID：11480416
> 
> 赞同：0
> 
> 时间：2012-07-14T01:58:10.693
> 
> 标签：php, mysql

我正在尝试运行这个：

```
$stmt=$cxn->prepare("UPDATE table1 SET used='1' WHERE prim_id != 
     (SELECT MAX(prim_id) FROM table1 WHERE email='email12345@gmail.com')");
$stmt->execute(array()); 
```

但它会导致 MySQL 错误：`#1093 - You can't specify target table 'table1' for update in FROM clause`.

搜索此错误后，似乎`In MySQL, you can't modify the same table which you use in the SELECT part.`.

如何更改该查询以使其正常工作？

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:02:12.580

您的查询只是缺少一些逻辑。将其更改为：

```
UPDATE table1
SET used='1'
WHERE `email` = 'email12345@gmail.com'
  AND prim_id != (
    SELECT MAX(prim_id) 
    FROM table1
    WHERE email='email12345@gmail.com') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:28:14.183

试试这个：

```
UPDATE table1 t1, (SELECT MAX(prim_id) AS max_prim_id
                     FROM table1 WHERE email='email12345@gmail.com') tmp
SET t1.used='1'
WHERE t1.prim_id != tmp.max_prim_id
AND t1.`email` = 'email12345@gmail.com' 
```

它删除子查询并使用常规临时表来存储表“tmp”的结果。该查询需要 2 个表进行更新：

*   table1（别名为 t1）
*   一个临时表（别名为 tmp）

WHERE 子句：

*   指示两个表是如何连接的
*   限制表 t1 中要考虑的记录

SET 子句说只有 t1.used 会被更新。

[更新语句](http://dev.mysql.com/doc/refman/5.5/en/update.html)

# php - 检查字符串是否为 URL 的最简单方法

> ID：11480417
> 
> 赞同：2
> 
> 时间：2012-07-14T01:59:03.000
> 
> 标签：php, codeigniter, url

目标是检查字符串是否为 URL，不需要正则表达式。

我有一个表单，可让用户上传图像或从 URL 添加图像。

我得到：

`van_gogh_shoes.jpg`

或者

`http://t2.gstatic.com/images?q=tbn:ANd9GcR2YNtlcmDDBpseEqUkMhe7-netq7RL2u_bw3_34VwB-Tsv2V-B`

用户只能添加 1 张图片，上传或 URL。因此，在 mysql 中，我正在更新以`entry_image`上述值之一命名的同一列。

`entry_image`显示图像时，如果列中的值是 URL ，我需要以最简单的方式检查。如果是这样，请显示完整的 URL，否则我自己的上传图像的路径。

```
<img src="<?php (filter_var($row->entry_image, FILTER_VALIDATE_URL)) ? $row->entry_image : "uploads/entries/{$row->user_id}/{$row->entry_image} ?>"> 
```

我正在使用`FILTER_VALIDATE_URL`似乎可行的方法，但与大多数我没有使用过的东西一样，我不确定它是否是最好的解决方案。你有什么想法？

我试图在显示图像时避免正则表达式或其他繁重的验证代码，因为我已经在向 mysql 输入数据时验证了这些值。如果存在，请分享一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T02:04:14.703

`filter_var()`是最好的解决方案。为不想要正则表达式作为解决方案而竖起大拇指。

除此之外，我只想指出，将图像文件从外部 URL 传输到您的服务器是一种更好的方法（在我看来）。它将使您免受诸如已删除的外部图像以及与外部服务器的连接问题之类的问题。您也不必担心验证 URL。这只是一个建议。

# vba - 使用 Content.Find 对象搜索文本并恢复找到的文本

> ID：11480421
> 
> 赞同：2
> 
> 时间：2012-07-14T02:00:14.803
> 
> 标签：vba, ms-word, find

我想在整个 MSWord 文档中搜索带有通配符的文本并恢复找到的字符串。

类似的东西：

```
Sub Macro1()
    Dim c As Range
    Set c = ActiveDocument.Contentsdf
    c.Find.ClearFormatting
    c.Find.Replacement.ClearFormatting
    With c.Find
        .Text = "start[abcde]end"
        .Replacement.Text = ""
        .Forward = True
        .wrap = wdFindStop
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = True
        .MatchSoundsLike = False
        .MatchAllWordForms = False '
    End With

    c.Find.Execute
    While c.Find.Found
        Debug.Print c.Find.TextFound
        c.Find.Execute
    Wend
End Sub 
```

但该方法`c.Find.TextFound`不存在。有没有办法恢复文本而不重复`Selection.Text`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:53:18.020

尝试这个。

```
Sub Sample()
    Dim c As Range
    Dim StartWord As String, EndWord As String

    StartWord = "Start": EndWord = "End"

    Set c = ActiveDocument.Content
    c.Find.ClearFormatting
    c.Find.Replacement.ClearFormatting
    With c.Find
        .Text = StartWord & "*" & EndWord
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindStop
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = True
        .MatchSoundsLike = False
        .MatchAllWordForms = False '
    End With

    c.Find.Execute
    While c.Find.Found
        Debug.Print c.Text
        '~~> I am assuming that the start word and the end word will only
        '~~> be in the start and end respectively and not in the middle
        Debug.Print Replace(Replace(c.Text, StartWord, ""), EndWord, "")
        c.Find.Execute
    Wend
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-26T16:44:21.423

我一直在寻找一种方法来打印一定数量的页面，只要它有一个特定的单词。

基本上我有 3 个文件，我必须打印它们并按班次组织它们。它们中的每一个都作为 Shift 1 2 和 3 放在它们上面。我设法一次将它们全部打印，但我想从第一个文件打印 Shift 1，从第二个文件打印 2，依此类推，直到文件 5 的 shift 3。我只需要一个宏代码来搜索单词“ shift 1" 并仅打印包含该单词的页面。然后基本上将相同的代码应用于所有文件，将 1 更改为 2 和 3。

如我错了请纠正我。

# algorithm - 程序员如何确保编译器创建正确的代码？

> ID：11480422
> 
> 赞同：6
> 
> 时间：2012-07-14T02:00:15.117
> 
> 标签：algorithm, assembly, compiler-construction

在 SO 上阅读这个引人入胜的（也是投票率最高的问题），[为什么处理排序数组比处理未排序数组更快？](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)让我想知道编译器代码的正确性。

例如，答案指出：

> Intel Compiler 11 做了一些神奇的事情。它[交换了两个循环](http://en.wikipedia.org/wiki/Loop_interchange)......

编译器程序员如何知道何时可以交换循环？

而且，一般来说，他们是否使用数学证明来证明结论？

编译器程序员如何知道他们的编译器会生成正确的代码？他们如何检验他们的结论？他们是否必须编写一个运行编译器的测试套件，并检查***生成的代码***是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T02:08:33.227

> 编译器程序员如何知道何时可以交换循环？

编译器对代码运行一系列检查以确定交换循环是否安全。例如，如果代码没有完全内联，它可能无法交换循环。如果代码修改了 volatile 变量，它不会交换循环。如果代码存储在先前循环迭代中计算的值，编译器将不会交换循环。如果他们可以确定它是安全的，因为这些条件都没有被触发，编译器可以交换循环。

> 而且，一般来说，他们是否使用数学证明来证明结论？

不，他们只是制定优化和一组保守的测试来确保优化是安全的。随着时间的推移，他们开发了更多优化和更复杂的算法，以检测优化何时安全，即使在不太明显的情况下也是如此。

> 编译器程序员如何知道他们的编译器会生成正确的代码？

他们尽其所能。偶尔他们会犯错误。人们提交错误报告，然后他们修复它。

> 他们如何检验他们的结论？他们是否必须编写一个运行编译器的测试套件，并检查生成的代码是否正确？

他们绝对确实使用测试套件。当在 GCC 中检测到错误时，会专门将测试添加到测试套件中，以确保错误已修复且不会重新引入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T02:11:37.693

> 编译器程序员如何知道何时可以交换循环？

当修改不会根据语言标准改变程序的行为时，当更改不违背标准本身时。

例如，C 和 C++ 标准在一些地方说函数参数和子表达式的求值顺序是未指定的。这使编译器可以自由地生成代码，以它认为合适的任何顺序评估它们。如果您的程序依赖于特定的顺序，则它不符合标准，您无权责怪编译器“破坏”它。

编译器可能并且经常使用代码分析、逻辑和数学以及所有这些定理来优化代码。

在实践中，测试表明编译器是否做了正确的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T02:24:00.980

编译是一个复杂的过程。该程序被构造为一个图，编译器会根据开发人员提出的规则尽力“优化”这个图。

但是，不能保证生成的代码接近“最佳”。已经对所谓的“超级优化器”进行了研究，它们试图使用自动证明引擎生成真正优化的代码......即他们可以回答诸如“有没有办法编译这个算法使得它花费少于 X循环”。[Denali](http://www.hpl.hp.com/techreports/Compaq-DEC/SRC-RR-171.pdf)就是我读过的这样一位超级优化者。对于某些架构，该技术比其他架构更容易。不利的一面是，这些超级优化器可能需要数小时甚至数天来编译一个简单的例程，这对大多数人来说是不可接受的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T22:04:41.377

任何用自己的语言编写的编译器的主要健全性测试之一是让它自己编译，然后使用生成的新编译器再次编译自己。生成的两个编译器应该是相同的模时间戳。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-15T20:38:11.930

**概括**

好的，所以我同意一些答案，但我认为人们低估了编译器在转换和优化中的严格和保守程度。长话短说 - 尽管*优化*代码生成确实是一种魔法，并且 99% 的时间都使用启发式而不是证明（有人谈到了[Denali](http://www.hpl.hp.com/techreports/Compaq-DEC/SRC-RR-171.pdf)超级优化器），但正确的代码生成实际上在*数学*上是合理的，而且它是经过设计的是这样。存在错误的事实是由于编译器代码库的巨大复杂性。作为一个侧节点，自动定理证明器可能有错误，即使它的每个部分在数学上都是*合理*的，所以编译器有错误的事实并不意味着它们是重写规则的随机集合。

**现在，依次回答您的问题：**

> 编译器程序员如何知道何时可以交换循环？

编译器理论的一个子领域称为*依赖分析*，它处理这样的问题。关于该主题有整[本书](http://www.amazon.co.uk/Optimizing-Compilers-Modern-Architectures-Dependence-based/dp/1558602860/ref=sr_1_1?s=books&ie=UTF8&qid=1429129193&sr=1-1&keywords=kennedy%20compilers)，但对于您的特定问题：编译器将*自动*计算循环的迭代空间（如果边界是可计算的，请参阅底部的**NB**），它将计算出指令之间的依赖关系循环（有不同类型的依赖关系），它将计算循环的*距离*和*方向*向量，然后确定进行交换是否合法。维基[百科](https://en.wikipedia.org/wiki/Dependence_analysis)关于此的文章只是给出了不同类型的依赖关系，但有指向其他子主题的链接，并且还引用了我提到的书。

> 而且，一般来说，他们是否使用数学证明来证明结论？

**不**，一般不会。还取决于我们所说的证明的含义-您是说使用定理证明器吗？例如，[Denali](http://www.hpl.hp.com/techreports/Compaq-DEC/SRC-RR-171.pdf)论文使用 SAT 求解器。由 Microsoft Research @ Cambridge 开发的[Dafny](http://rise4fun.com/dafny)编译器和语言通过源级语言注释来验证您的代码。编译器会验证您的代码的正确性，尽管使用注释非常困难（我在大学的一个项目中与 Dafny 一起摆弄过，我根据经验发言）。另外，“一般不”是指不在`gcc`，`llvm`我和家人怀疑（但我没有检查）英特尔的`icc`. 再一次，我们在这里谈论的是类似 C 的源代码到机器级编译，没有什么比这更有趣的了。

> 编译器程序员如何知道他们的编译器会生成正确的代码？他们如何检验他们的结论？他们是否必须编写一个运行编译器的测试套件，并检查生成的代码是否正确？

其他答案广泛涵盖了这一点，因此无需多说。我想我可以补充一点，因为编译器在复杂性方面确实是**野兽**，所以对它们进行广泛的测试至关重要。另外，我想重申，即使在一段数学上合理的代码中（如果我们假设我们已经正式定义了这样的概念），处理该代码的基础设施中也可能存在错误，因此测试总是很重要的。

**判决**

编译器非常复杂。它们需要快速以启用无缝的编辑-编译-调试开发人员循环，并且还需要**正确**的 . 编译器对他们生成的代码的正确性是一种“本地数学上合理的”——编译器所做的每个转换都必须保留原始程序的语义。速度的提高是由启发式算法驱动的，这些算法是*黑艺术*技术的好例子，因为它们不能证明生成的代码会更快。他们也没有正式证明它是**正确**的，但是每个转换都旨在产生正确的语义保留代码。最后，编译器最热门的趋势（我猜现在计算机科学中的其他地方一样）是使用`machine learning`进行优化，所以我们将有更多的旋钮来调整 :) 耶

**注意**

编译器“后端”中的几乎所有东西，即代码生成器，要么是 NP 完全的，要么是不可判定的。特别是，无法确定循环交换是否合法，因为循环边界可以是任意表达式（比如函数调用）。但是，如果边界是可计算的（比如整数或简单的东西），那么这就是依赖分析开始的地方。

# java - JVM的方法区可以被垃圾回收吗？

> ID：11480423
> 
> 赞同：3
> 
> 时间：2012-07-14T02:00:44.087
> 
> 标签：java, jvm

所以我正在阅读JVM规范，并遇到以下部分：

> 尽管方法区在逻辑上是堆的一部分，但简单的实现可能会选择不进行垃圾收集或压缩它。

我不确定我明白了，这是说 JVM 中的文本段可以被垃圾收集吗？我应该怎么理解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T06:15:49.907

> 我不确定我明白了，这是说 JVM 中的文本段可以被垃圾收集吗？

这通常不是指“文本”（单词）或 Unix/Linux 意义上的“文本段”。它指的是动态分配的内存区域，其中包含方法的字节码和/或 JIT 编译的本机代码。据说*这些*内存段*可以*被垃圾收集......取决于JVM实现等等......但这不是JVM规范的要求。

* * *

在 Java 字节码被编译为本机代码并*提前*链接到可执行映像的 JVM 实现中，您将拥有“文本段”，并且这些文本段*不会*受到垃圾回收的影响。（它们不能，因为它们是只读的，并且可能与同时执行的应用程序的其他实例共享。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T02:04:05.203

当一个方法执行时，局部变量存在于堆栈中。

可以想象，JVM 可能会选择不收集局部变量，而将相同的内存重新用于方法的下一次执行。这样的选择只有在单线程运行时环境中才是明智的。

# android - 按钮上的动画

> ID：11480427
> 
> 赞同：0
> 
> 时间：2012-07-14T02:01:28.083
> 
> 标签：android, animation, button

在我的应用程序中有九个按钮。当一个按钮被触摸时，它应该移动到一个目标位置。如果使用图像而不是按钮，这可以很容易地完成`surfaceview`。如何用按钮做到这一点？

**编辑**

```
package com.amit.wozzle;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TableLayout;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {
private Button b1;
private Button b2;
private Button b3;
private Button b4;
private Button b5;
private Button b6;
private Button b7;
private Button b8;
private Button b9;
private int xb=3;
private int yb=3;
private int xbl;
private int ybt;
private int x=3;
private int y=3;
private TextView tv55; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b1 = (Button) findViewById(R.id.tv1);
    b2 = (Button) findViewById(R.id.tv2);
    b3 = (Button) findViewById(R.id.tv3);
    b4 = (Button) findViewById(R.id.tv4);
    b5 = (Button) findViewById(R.id.tv5);
    b6 = (Button) findViewById(R.id.tv6);
    b7 = (Button) findViewById(R.id.tv7);
    b8 = (Button) findViewById(R.id.tv8);
    b9 = (Button) findViewById(R.id.tv9);

    b2.setOnClickListener(new Glide());
    b3.setOnClickListener(new Glide());
    b4.setOnClickListener(new Glide());
    b5.setOnClickListener(new Glide());
    b6.setOnClickListener(new Glide());
    b7.setOnClickListener(new Glide());
    b8.setOnClickListener(new Glide());
    b9.setOnClickListener(new Glide());

}

class Glide implements View.OnClickListener {
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        int[] loc ={0,0};
        b1.getLocationOnScreen(loc);
        int xw = b1.getWidth();

        int[] loc1={0,0};
        v.getLocationOnScreen(loc1);

        TableLayout.LayoutParams lp = (TableLayout.LayoutParams) v.getLayoutParams();
        lp.leftMargin = loc[0];
        lp.topMargin = loc[1];
        v.setLayoutParams(lp);
        v.invalidate();

    }

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

这导致强制关闭。Logcat 说

```
07-14 02:04:32.564: D/AndroidRuntime(310): Shutting down VM
07-14 02:04:32.564: W/dalvikvm(310): threadid=1: thread exiting with uncaught exception  (group=0x4001d800)
07-14 02:04:32.574: E/AndroidRuntime(310): FATAL EXCEPTION: main
07-14 02:04:32.574: E/AndroidRuntime(310): java.lang.ClassCastException:     android.widget.TableRow$LayoutParams
07-14 02:04:32.574: E/AndroidRuntime(310):  at com.amit.wozzle.MainActivity$Glide.onClick(MainActivity.java:81)
07-14 02:04:32.574: E/AndroidRuntime(310):  at android.view.View.performClick(View.java:2408)
07-14 02:04:32.574: E/AndroidRuntime(310):  at android.view.View$PerformClick.run(View.java:8816)
07-14 02:04:32.574: E/AndroidRuntime(310):  at android.os.Handler.handleCallback(Handler.java:587)
07-14 02:04:32.574: E/AndroidRuntime(310):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-14 02:04:32.574: E/AndroidRuntime(310):  at android.os.Looper.loop(Looper.java:123)
07-14 02:04:32.574: E/AndroidRuntime(310):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-14 02:04:32.574: E/AndroidRuntime(310):  at java.lang.reflect.Method.invokeNative(Native Method)
07-14 02:04:32.574: E/AndroidRuntime(310):  at java.lang.reflect.Method.invoke(Method.java:521)
07-14 02:04:32.574: E/AndroidRuntime(310):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-14 02:04:32.574: E/AndroidRuntime(310):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-14 02:04:32.574: E/AndroidRuntime(310):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T02:20:52.760

我认为您缺少的只是将参数设置在您希望按钮出现的位置。以下是示例：

```
public class MyAppActivity extends Activity {    

TableLayout mLayout;
Button b1;  

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);       

    b1 = (Button) findViewById(R.id.viewMatched_btn);        
    b1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            TableLayout.LayoutParams layoutParams = (TableLayout.LayoutParams) b1.getLayoutParams();
            layoutParams.topMargin = 200;
            layoutParams.leftMargin = 200;              
            b1.setLayoutParams(layoutParams);

            if(mLayout == null) {
                mLayout = (TableLayout) b1.getParent();
            }

            mLayout.invalidate();
        }
    });        

  }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/temps_holder"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<Button
    android:id="@+id/viewMatched_btn"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"               
    android:text="Button"
    android:textColor="#ffffffff" />

</TableLayout> 
```

希望有帮助。此外，如果您想要创建自定义动画，您可以看看[这个](http://android-er.blogspot.com/2012/02/apply-animation-on-button.html)。

# c - 如何在 Windows 上编译 Ruby C 扩展并链接 libcurl

> ID：11480430
> 
> 赞同：3
> 
> 时间：2012-07-14T02:01:58.333
> 
> 标签：c, ruby, windows, nmake, ruby-c-extension

我正在尝试构建一个使用 libcurl 的 Ruby C 扩展。到目前为止，我已经在 Os X 上成功构建了它。但是我在 Windows 中开发的经验要少得多，并且不完全确定如何去做。

到目前为止，我可以按照这些说明或多或少地使用 Visual Studio 命令提示符中的 extconf.rb 和 nmake 编译 Ruby C 扩展

[http://blogs.law.harvard.edu/hoanga/2006/12/14/getting-a-ruby-c-extension-to-compile-on-windows/](http://blogs.law.harvard.edu/hoanga/2006/12/14/getting-a-ruby-c-extension-to-compile-on-windows/)

但是我的扩展链接 libcurl，在 extconf.rb 中有一行来检查这个

```
# Make sure the cURL library is installed.
have_library("curl") 
```

创建makefile时，我得到

```
checking for main() in curl.lib... no
creating Makefile 
```

在运行 nmake 时，我得到

```
fatal error C1083: Cannot open include file: 'curl/curl.h': No such file or directory 
```

这都是意料之中的，因为它没有安装。我已经下载了 curl-7.26.0-devel-mingw64 （我认为这适用于 Windows 7）

我只是不知道在 Windows 环境中我应该把 /bin 或 /include 放在哪里，以便我的编译器可以找到它们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T13:54:05.700

在 Windows 上，您可以使用不同的编译器，包括 Microsoft 提供的 Visual Studio、MinGW 项目的 GCC 或 Intel 编译器。

RubyInstaller（我认为是您正在使用的 Ruby 版本）使用 GCC（这就是它生成名称中带有 mingw 的文件的原因）

由于 Ruby 的工作方式，您不能混合和匹配编译器。如果 Ruby 是使用 GCC 构建的，则需要 GCC 来编译。

现在推荐的方法是：RubyInstaller + DevKit。DevKit 是一个方便的包，它提供了编译 Ruby C 扩展所需的所有工具。

[您可以在RubyInstaller 下载页面](http://rubyinstaller.org/downloads)找到所有这些以及安装说明

一旦你安装了 Ruby 和 DevKit，你就可以编译大部分不依赖于外部库的扩展。

现在，在您的特定情况下，libcurl、RubyInstaller 提供了一些预编译的二进制文件，它们可以完美地安装基于 curl 的工具。

libcurl 包在[RubyInstaller 组](https://groups.google.com/d/topic/rubyinstaller/4ulo3o1bQOM/discussion)中与其他包一起发布。

您将需要下载 x86-windows 软件包（组页面中的链接），有关如何提取和放置它的说明可以在同一链接中找到。请注意 libcurl 还需要 c-ares、zlib 和 openssl 包。

例如，要安装[遏制 gem](http://rubygems.org/gems/curb)，在我提取了我刚刚做的包之后：

```
gem install curb -- --with-curl-dir=C:/Knapsack/x86-windows 
```

`C:/Knapsack/x86-windows`我之前提到的所有二进制包解压出来的目录在哪里。我还将该`bin`目录添加到我的目录中，`PATH`以便可以找到和使用 libcurl DLL。

请注意，虽然 Windows 使用`\`指定目录分隔符，但您需要`/`在向 RubyGems 提供选项时使用。

注意 2：在您的帖子中，您提到下载的 mingw64，很可能是 64 位二进制文​​件。Ruby 是 32 位可执行文件，所以我推荐的包是 32 位 (x86)。目前 RubyInstaller 不提供 64 位 (x64) 二进制文件。

希望这可以帮助。如果您对在 Windows 上安装和使用 Ruby 有任何疑问，请加入[RubyInstaller 组](https://groups.google.com/forum/?fromgroups#!forum/rubyinstaller)

# c# - 按下按钮时如何调用静态方法？

> ID：11480431
> 
> 赞同：-1
> 
> 时间：2012-07-14T02:02:11.270
> 
> 标签：c#, string, static

目前，我已经把这一切都安排好了：

```
public static string Encrypt<T>(string anything)
{
 //Stuff can go here
} 
```

当我按下一个按钮时，我希望能够运行 Encrypt 中的所有代码。是否有可能做到这一点，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T03:45:25.213

假设您的 aspx 按钮是

```
<asp:Button runat="server" text="Encrypt" id="btnencrypt" onclick="btnencrypt_Click" /> 
```

您的服务器端事件将是这样的：

```
protected void btnencrypt_Click(object sender,EventArgs e)
{
    // Supposing that the Encrypt method is not in the current class.
    OtherClass.Encrypt(anystring);
} 
```

如果 Encrypt 方法在同一个类中，那么您可以直接编写方法名称，如：

```
Encrypt(anystring); 
```

你不需要 . 因此，您的 Encrypt 方法将如下所示：

```
public static string Encrypt(string inputstring)
{
    //Encryption code.
} 
```

希望你能从这里得到你的答案...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:10:22.910

假设您的 ASPX 中的按钮可以这样编写：

```
<asp:Button runat="server" text="Encrypt" onclick="encrypt_click" /> 
```

假设您的 ASPX 页面（代码隐藏）后面的 cs 页面可以这样写

```
protected void encrypt_click(object sender, EventArgs e)
{
    Encrypt(text);
} 
```

这是你想要的？

# android - Android，当文本对于 TextView 来说太大时，如何添加滑动手势以显示剩余文本

> ID：11480436
> 
> 赞同：2
> 
> 时间：2012-07-14T02:02:33.333
> 
> 标签：android

我正在寻找一个 android 图书阅读器（我看过 PageTurner、FBReaderj 和cool reader，但这些不适合我的需要，因为它们都是成熟的应用程序，有很多我不想包含在我的应用程序中的功能. 基本上我只需要一个阅读器，而不是一个图书馆。

因此，我正在考虑将 epublib 与 page turner 中的 html spanner util 结合使用来实现我自己的阅读器。除了大多数时候文本视图中的文本大于文本视图本身这一事实之外，这种组合可以很好地将来自 epubs 的文本放入文本视图中。所以我正在研究如何实现滑动选项以将下一位文本显示为页面。

我将不胜感激有关此最佳方法的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:24:59.063

[此处的此链接](https://github.com/psiegman/epublib/issues/18)可能就是您要查找的内容。它展示了如何将大量文本拆分为多个页面。

然后，您可以使用任何代码在页面之间进行转换。

# php - php函数中的动态参数

> ID：11480437
> 
> 赞同：9
> 
> 时间：2012-07-14T02:02:36.887
> 
> 标签：php, function, dynamic, arguments

> **可能重复：**
> [PHP 将所有参数作为数组获取？](https://stackoverflow.com/questions/828709/php-get-all-arguments-as-array)

好，

在java中我可以做到这一点（伪代码）：

```
public hello( String..args ){
    value1 = args[0] 
    value2 = args[1] 
    ...
    valueN = arg[n];
} 
```

进而：

```
hello('first', 'second', 'no', 'matter', 'the', 'size'); 
```

php中有这样的东西吗？

编辑

我现在可以传递一个类似的数组`hello(array(bla, bla))`，但可能会以上面提到的方式存在，对吧？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-14T02:04:29.367

见[`func_get_args`](http://php.net/manual/en/function.func-get-args.php)：

```
function foo()
{
    $numArgs = func_num_args();

    echo 'Number of arguments:' . $numArgs . "\n";

    if ($numArgs >= 2) {
        echo 'Second argument is: ' . func_get_arg(1) . "\n";
    }

    $args = func_get_args();
    foreach ($args as $index => $arg) {
        echo 'Argument' . $index . ' is ' . $arg . "\n";

        unset($args[$index]);
    }
}

foo(1, 2, 3); 
```

**编辑 1**

例如，当您调用`foo(17, 20, 31)` `func_get_args()`不知道第一个参数代表`$first`变量时。当您知道每个数字索引代表什么时，您可以执行此操作（或类似操作）：

```
function bar()
{
    list($first, $second, $third) = func_get_args();

    return $first + $second + $third;
}

echo bar(10, 21, 37); // Output: 68 
```

如果我想要一个特定的变量，我可以省略其他变量：

```
function bar()
{
    list($first, , $third) = func_get_args();

    return $first + $third;
} 

echo bar(10, 21, 37); // Output: 47 
```

# python - 如何维护一套套？

> ID：11480453
> 
> 赞同：3
> 
> 时间：2012-07-14T02:05:05.170
> 
> 标签：python, set

我已经看到[了相关的问题](https://stackoverflow.com/questions/5931291/how-can-i-create-a-set-of-sets-in-python)，但我不能将 a`frozenset`用于我的内部集。我希望一切都是可变的。

据我了解，Python 给所有东西一个[ID](http://docs.python.org/library/functions.html#id)，那么它为什么不能用它[作为它的 hash](https://stackoverflow.com/questions/1396668/python-get-object-by-id)呢？我需要维护一个对所有内部集的引用列表，即使它们发生了变化。

**编辑：**好的，我明白为什么，但在这种情况下它会更好，因为我只关心引用相等，而不关心值相等。

我怎样才能做到这一点？

* * *

你会问“为什么”，所以我会给你一些代码：

```
def remove_captured(self):
    all_chains = set()
    chains = Grid(self.rows, self.cols)
    for m, n, stone in self.enumerate():
        if stone == self[m - 1, n]:
            chains[m, n] = chains[m - 1, n]
            if stone == self[m, n - 1]:
                all_chains.discard(chains[m, n - 1])
                chains[m, n].update(chains[m, n - 1])
                for s in chains[m, n - 1]:
                    chains[s] = chains[m, n]
        elif stone == self[m, n - 1]:
            chains[m, n] = chains[m, n - 1]
        else:
            chains[m, n] = set()
            all_chains.add(chains[m, n])
        chains[m, n].add((m,n))
    chains._print()
    print all_chains 
```

我基本上有一个游戏板，我想将板上的棋子分成组（或“链”）。上面的代码在我添加之前运行良好`all_chains`——它创建了所有集合，但是如果不再次遍历整个板，我就无法访问它创建的每个集合。

那么如何维护它创建的所有集合的列表呢？请记住，我也需要删除集合（这就是为什么我想为外部集合使用另一个集合）。

* * *

包装参考`weakref.ref()`也不起作用：

```
all_chains.add(weakref.ref(chains[m, n])) # TypeError: unhashable type: 'set' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:20:00.607

决定改用集合字典。

```
def remove_captured(self):
    cdict = {}
    cid = 0
    chains = Grid(self.rows, self.cols)
    for m, n, stone in self.enumerate():
        if stone == self[m - 1, n]:
            chains[m, n] = chains[m - 1, n]
            if stone == self[m, n - 1] and chains[m, n] != chains[m, n - 1]:
                del_id = chains[m, n - 1]
                cdict[chains[m, n]].update(cdict[del_id])
                for c in cdict[del_id]:
                    chains[c] = chains[m, n]
                del cdict[del_id]
        elif stone == self[m, n - 1]:
            chains[m, n] = chains[m, n - 1]
        else:
            cdict[cid] = set()
            chains[m, n] = cid
            cid += 1
        cdict[chains[m, n]].add((m, n))
    chains._print()
    pprint(cdict) 
```

它不是很漂亮，因为我总是必须在字典中查找该集合才能使用它，但它似乎有效。

输入：

```
0  .  W  W  W  W
1  W  B  B  B  .
2  .  .  .  W  .
3  .  B  B  W  W
4  .  .  B  W  .
   0  1  2  3  4 
```

输出：

```
0 0 1 1 1 1
1 2 3 3 3 4
2 5 5 5 6 4
3 5 7 7 6 6
4 5 5 7 6 8
  0 1 2 3 4
{0: set([(0, 0)]),
 1: set([(0, 1), (0, 2), (0, 3), (0, 4)]),
 2: set([(1, 0)]),
 3: set([(1, 1), (1, 2), (1, 3)]),
 4: set([(1, 4), (2, 4)]),
 5: set([(2, 0), (2, 1), (2, 2), (3, 0), (4, 0), (4, 1)]),
 6: set([(2, 3), (3, 3), (3, 4), (4, 3)]),
 7: set([(3, 1), (3, 2), (4, 2)]),
 8: set([(4, 4)])} 
```

# ruby - 为什么 proc 可能比块运行得更快？

> ID：11480456
> 
> 赞同：13
> 
> 时间：2012-07-14T02:06:51.753
> 
> 标签：ruby, internals

[This answer](https://stackoverflow.com/a/2211760/4376) on another question说

```
array.map(&:to_s) 
```

比

```
array.map { |n| n.to_s } 
```

在第一个例子中，`&`变成`:to_s`了一个 Proc。第二个示例使用块。

为什么 Proc 可能比该基准测试中的块更快？这种技术是否允许解释器进行一些优化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T06:22:30.450

这并不是真正的“proc vs block”。

这是一个简单的实验（随意复制和运行）：

```
require 'benchmark'

many = 500
array = (1..10000).to_a

proc = proc { |a| a.to_s }

Benchmark.bm do |x|
  x.report('Symbol#to_proc') { many.times { array.map(&:to_s) } }
  x.report('proc') { many.times { array.map(&proc) }  }
  x.report('block') { many.times { array.map { |a| a.to_s } }  }
end 
```

**Ruby 1.9.3p194 结果：**

```
 user     system      total        real
Symbol#to_proc  1.170000   0.000000   1.170000 (  1.169055)
proc            1.450000   0.000000   1.450000 (  1.454216)
block           1.450000   0.000000   1.450000 (  1.448094) 
```

如您所见，`block`两者`proc`占用的 CPU 时间几乎相同。魔力就在它的内部`Symbol#to_proc`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T10:29:47.950

正如其他人所说，这是专门针对`Symbol#to_proc`而不是一般的procs，并且几乎可以肯定它依赖于ruby实现。之前`Symbol#to_proc`是 ruby​​ 本身，它的纯 ruby​​ 实现肯定比等效块慢。

要获得真正的答案，您需要在执行此类基准测试时分析 ruby​​。

我对 ruby​​ 源代码的阅读是，当你调用`Symbol#to_proc`proc 时，你得到的有点特别：proc 的主体只是一个 C api 调用（`rb_funcall_passing_block`），而在其他情况下，它是实际的 ruby​​ 代码，需要更长的时间才能执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T05:43:00.307

只是一个猜测，但可能是因为 Proc 不需要像块一样保持调用的上下文。该块需要知道在其外部声明的变量，Proc 不需要。

# ruby-on-rails - 设备注册后重定向，但用户未登录

> ID：11480457
> 
> 赞同：1
> 
> 时间：2012-07-14T02:06:55.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, devise, warden

我正在将用户设置为在注册后根据嵌套表单参数重定向到子域。但是，当我进行重定向时，用户没有登录。我可以返回并手动登录用户，我可以验证用户是否已创建，只是看起来会话在注册后没有立即创建。

这是我用来重定向用户的方法（在 registrations_controller.rb 中）：

```
 def after_sign_up_path_for(resource_or_scope)
    root_url(subdomain: params[:user][:organizations_attributes]["0"][:subdomain])
  end 
```

顺便说一句，到子域的路由工作正常。

我认为这是跨子域共享会话的问题，因为当我从 url 中删除子域并刷新时我已登录。

我已经尝试将此添加到我的 app/config/initializers/session_store.rb 文件中：

```
Vocalem::Application.config.session_store :cookie_store, key: '_vocalem_session', :domain => :all 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T02:19:35.050

原来我只需要重新启动我的服务器！

# c# - Multiview.ActiveViewIndex only changes once(or if autopostback is false)

> ID：11480460
> 
> 赞同：2
> 
> 时间：2012-07-14T02:07:29.680
> 
> 标签：c#, asp.net, visual-studio-2010

I have a MultiView, that I'm changing the index of. The first time the page loads, and the application runs through `themultiview.ActiveViewIndex = 0;` The view changes to the first view. ALTHOUGH when I click a linkbutton that changes it to a viewindex of 1\. While the autopostback is true, it doesn't work.

I'm not sure what the problem is, but I definitely know that the activeViewIndex only works when the autopostback value is false.

What might the problem be?

Here is my testing code. And what happens is, the view index remains at 1, even if I click it 2-10 times:

```
int temp = 0;

protected void HyperLink1_Click(object sender, EventArgs e)
{
    if (!(bool)ViewState["IsSigned"])
    {
        Panel11.Visible = true;
        Wizard1.Visible = true;
        Selector.Visible = true;
    }
    else
    {
        //detach cookie
    }
    if (temp == 0)
    {
        LoginView.ActiveViewIndex = 1;
        temp = 1;
    }
    else
    {
        LoginView.ActiveViewIndex = -1;
        temp = 0;
    }
} 
```

How do I fix this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:12:43.970

Change

```
int temp = 0; 
```

Into:

```
private int Temp
{
    get
    {
        if(this.ViewState["temp"] == null)
            return 0;

        return int.Parse(this.ViewState["temp"].ToString());
    }
    set
    {
        this.ViewState["temp"] = value;
    }
} 
```

# c++ - 这是在我的程序中嵌入调试消息的好方法吗？（宏）

> ID：11480463
> 
> 赞同：2
> 
> 时间：2012-07-14T02:07:47.257
> 
> 标签：c++, debugging, macros

在 Debug.h 文件中，我有以下内容：

```
#ifdef DEBUG_FLAG
    #define DEBUG(msg) std::cerr << #msg << std::endl
#else
    #define DEBUG(msg) for(;true==false;)
#endif 
```

在其他地方，我可能会写类似

```
void process (Data data)
{
    DEBUG("Function 'process' starts");
    // Blah blah
    // More blah blah...
    DEBUG("Function 'process' returns");
} 
```

编译器会优化掉 for(;true==false;); ?

还有，这样的练习可以吗？如果没有，有什么更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:16:21.620

你不需要：

`#define DEBUG(msg) for(;;)`

一点也不。如果你只是有它：

`#define DEBUG(msg)`

那么表达式将完全是空白的，根本不需要分号。

编辑：实际上，只有分号不会导致崩溃或编译器错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T02:39:04.003

这是一个替代方案，它使用编译器的死代码删除：

```
#define DEBUG(msg) if (!DEBUG_ENABLED) {} \
                   else dbglog() << __FILE__ << ":" << __LINE__ << " " << msg
#ifdef DEBUG_FLAG
#define DEBUG_ENABLED 1
#else
#define DEBUG_ENABLED 0
#endif 
```

该`dbglog`实例是一个`ostream`包装器，用于检测日志行是否以换行符结尾。如果没有，它会增加一个。

```
struct dbglog {
    std::ostream &os_;
    mutable bool has_endl_;
    dbglog (std::ostream &os = std::cerr) : os_(os), has_endl_(false) {}
    ~dbglog () { if (!has_endl_) os_ << std::endl; }
    template <typename T> static bool has_endl (const T &) { return false; }
    static bool has_endl (char c) { return (c == '\n'); }
    static bool has_endl (std::string s) { return has_endl(*s.rbegin()); }
    static bool has_endl (const char *s) { return has_endl(std::string(s)); }
    template <typename T>
    static bool same_manip (T & (*m)(T &), T & (*e)(T &)) { return (m == e); }
    const dbglog & operator << (std::ostream & (*m)(std::ostream &)) const {
        has_endl_ = same_manip(m, std::endl);
        os_ << m;
        return *this;
    }
    template <typename T>
    const dbglog & operator << (const T &v) const {
        has_endl_ = has_endl(v);
        os_ << v;
        return *this;
    }
}; 
```

现在，您可以像这样添加一条简单的消息（注意，换行符是可选的）：

```
DEBUG("A simple message");
DEBUG("A simple message with newline\n");
DEBUG("A simple message with endl") << std::endl; 
```

或者，如果您想添加更多调试信息：

```
DEBUG("Entering: ") << __func__ << ", argc=" << argc << ", argv=" << argv;
//...
DEBUG("Leaving: ") << __func__ << std::endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T02:24:39.227

您还需要`while (0)`调试宏。如果没有它，调试 if/else 情况会非常痛苦（如果幸运的话，会出现编译器错误）。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/923822/whats-the-use-of-do-while0-when-we-define-a-macro)。

# javascript - jquery没有按预期计算总和

> ID：11480464
> 
> 赞同：1
> 
> 时间：2012-07-14T02:08:26.447
> 
> 标签：javascript, jquery

我开始使用这个解决方案，但我似乎无法让它工作

[jQuery计算所有文本字段中的值的总和](https://stackoverflow.com/questions/2417553/jquery-calculate-sum-of-values-in-all-text-fields)

这是我的html示例

```
<table>
  <tbody>
    <tr id="tr_affiliation_15159">
      <td class="right col_aff_amount">15.00</td>
    </tr>
    <tr id="tr_affiliation_15189">
      <td class="right col_aff_amount">15.00</td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td class="total"></td>
    </tr>
  </tfoot>
</table> 
```

这是我的javascript函数

```
function removeRow(id) {
  $("#tr_affiliation_" + id).fadeOut("slow", function() {
    $("#tr_affiliation_" + id).remove();

    // recalc total
    var total = 0;

    $('.col_aff_amount').each(function() {
      // i have tried .text(), and .html() as well as .val() but it doesn't seem to make any difference
      var val = parseFloat($(this).val());
      console.log(val);
      total += val;
  });

  $("td.total").html(parseFloat(total).toFixed(2));

} 
```

我的控制台日志只显示了一长串 NaN，为什么不能提取数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:11:00.833

您应该使用`text()`输入和文本区域等表单元素以外的元素，同时在进行计算时，`val`在计算之前用整数值定义变量：

```
$(document).ready(function(){
   // ...
   var val = 0;
   val = parseInt($(this).text(), 10);
  // ...
}) 
```

[演示](http://jsfiddle.net/CFqX7/)

# android - Android 清单文件错误

> ID：11480468
> 
> 赞同：2
> 
> 时间：2012-07-14T02:08:56.413
> 
> 标签：android, xml, eclipse, manifest

我正在关注谷歌上的开发指南：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

Eclipse 在我的清单文件中给了我这个错误

```
[2012-07-13 21:59:47 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for C:\Users\Rishub\workspace\Rishubs app\AndroidManifest.xml: Attribute "name" bound to namespace "http://schemas.android.com/apk/res/android" was already specified for element "activity". 
```

这是我的清单文件

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.rishubs.app"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:name=".DisplayMessageActivity"

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

感谢所有的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:21:05.400

您不能像这样组合两个活动声明。试试这样：

```
<activity android:name=".MainActivity" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity android:name=".DisplayMessageActivity" /> 
```

# iphone - 如何从横向到纵向视图 iOS SDK 进行转场

> ID：11480476
> 
> 赞同：2
> 
> 时间：2012-07-14T02:10:27.573
> 
> 标签：iphone, storyboard, landscape, segue, portrait

在导航控制器中，一个屏幕可以播放视频，可以纵向和横向查看，然后在导航控制器中推送一个新的视图控制器，但我只想纵向显示。

我试过使用

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait]; 
```

在segue之前和之后，但这对我不起作用。状态栏在那里，但视图以横向格式绘制。

任何想法如何解决这一问题？

谢谢！

[更新] 没有一个变通办法最终奏效，所以我最终只是以模态方式展示它，直到找到更好的解决方案。

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:13:22.000

我对你的问题有点困惑，但如果我理解正确，你想阻止视图以横向显示。将此方法添加到视图控制器的实现文件中：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

然后，该特定视图控制器将仅以纵向运行。那是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:46:03.643

我对这个问题做了一些研究，因为我记得两年前我在一个项目中遇到过同样的问题。那时我们通过让所有控制器都支持两个方向来解决这个问题，因为让它们支持横向比强制纵向更容易。

不幸的是，从那以后似乎并没有太大变化。它似乎仍然是一个悬而未决的问题，没有记录的方法来解决它。但是，我确实找到了一些我认为对您有用的解决方法：

1.  呈现和关闭模态视图控制器：

    ```
    UIViewController *c = [[UIViewController alloc] init];
    [self presentModalViewController:c animated:NO];
    [self dismissModalViewControllerAnimated:NO];
    [c release]; 
    ```

2.  手动旋转视图。

3.  在推送真正的视图控制器之前推送和弹出视图控制器。

据报道所有方法都有效，但我还没有测试过它们。您可以在此处找到代码和更多方法：[Is there a documented way to set the iPhoneorientation?](https://stackoverflow.com/questions/181780/is-there-a-documented-way-to-set-the-iphone-orientation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:34:21.440

所有的变通方法都没有奏效，所以我最终只是以模态方式展示它，直到找到更好的解决方案。

感谢您的回答！

（也添加到原帖）

# jquery - jqchart正确格式化日期

> ID：11480485
> 
> 赞同：0
> 
> 时间：2012-07-14T02:13:36.463
> 
> 标签：jquery, jqchart

我的线路数据是这样的：

```
var line1 = [[2012-07-06, 4], [2012-07-05, 10], [2012-07-04, 3]]; 
var line2 = [[2012-07-06, 15], [2012-07-05, 0], [2012-07-04, 9]]; 
```

我很难让日期显示在 xaxis 中。虽然我的日期都是 yyyy-mm-dd，但它一直只显示年份，甚至不显示正确的年份。它显示 1991、1992、1993 等。

我的轴看起来像：

> 轴：{ xaxis：{类型：'dateTime'，标签：{ stringFormat：'yyyy-mm-dd'}}}

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:34:52.303

我认为你必须使用`Date()`数据类型。

请参阅此处的文档[http://www.jqchart.com/samples/ChartAxes/DateTimeAxis](http://www.jqchart.com/samples/ChartAxes/DateTimeAxis)。

他们网站上的例子：

```
$('#jqChart').jqChart({
    title: { text: 'DateTime Axis' },
    axes: [
             {
                 type: 'dateTime',
                 location: 'bottom',
                 minimum: new Date(2011, 1, 4),
                 maximum: new Date(2011, 1, 18),
                 interval: 1,
                 intervalType: 'days'
             }
          ],
    series: [
                {
                    type: 'line',
                    data: [[new Date(2011, 1, 6), 70], [new Date(2011, 1, 8), 82],
                           [new Date(2011, 1, 10), 85], [new Date(2011, 1, 12), 70],
                           [new Date(2011, 1, 14), 65], [new Date(2011, 1, 16), 68]]
                }
            ]
}); 
```

# bash - Bash检查启动时文件是否存在

> ID：11480487
> 
> 赞同：1
> 
> 时间：2012-07-13T19:52:41.700
> 
> 标签：bash

> **可能重复：**
> [Bash 检查文件是否在启动时存在](https://stackoverflow.com/questions/11476563/bash-check-if-file-exists-on-startup)

我正在尝试在 Debian 机器上运行 BASH 脚本。如果我之前复制到隐藏文件的mac地址与机器的实际MAC地址匹配，或者如果文件存在机器可以启动，则脚本应该在每次启动时运行（所以我将`.sh`文件放入）。如果任一条件不成立，则机器应关闭。`/etc/init.d``.mac.txt``.mac.txt`

这是我的脚本：

```
#!/bin/bash
output="'cat /root/.mac.txt'";
mac="'/sbin/ifconfig | grep 'eth0' | tr -s ' ' | cut -d ' ' -f5'"
if ["$mac" = "$output" ] || [ -f /root/.mac.txt]
then
echo "Server will start"
else
shutdown -h now
fi 
```

如果 mac 地址不正确，机器会关闭，但如果我删除`.mac.txt`文件，它不会。我是否犯了一些逻辑或语法错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:45:58.277

您正在执行逻辑或 ( `||`)，将其更改为 and ( `&&`)，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T02:21:24.723

问题在于你的间距。Bash 在空白处非常特别。我刚刚在我的服务器上进行了测试，它是这样工作的：

```
if [ "$mac" = "$output" ] || [ -f /root/.mac.txt ]
... 
```

你需要一个额外的空间`[`和`"$mac"`和另一个`.txt`之间`]`

# ruby-on-rails-3 - heroku上的自定义域不起作用

> ID：11480489
> 
> 赞同：0
> 
> 时间：2012-07-14T02:14:02.153
> 
> 标签：ruby-on-rails-3, heroku

我添加了 heroku 自定义域：

> heroku 域：添加 *.phuhao.com

但它只适用于 www.phuhao.com 不适用于 phuhao.com。请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:35:11.837

您必须单独映射 phuhao.com。它不会映射 *.phuhao.com。

[https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)有信息；检查裸域部分。

# symfony - 具有相同路由的 Symfony2 捆绑包

> ID：11480490
> 
> 赞同：4
> 
> 时间：2012-07-14T02:14:12.793
> 
> 标签：symfony, routing, bundle

我在 sf2 中有两个包，每个包都有相同的路由。示例：/博客

捆绑包 A

```
user_blog:
    pattern:  /blog
    defaults: { _controller: UserBlogBundle:Default:blog } 
```

捆绑 B

```
team_blog:
    pattern:  /blog
    defaults: { _controller: TeamBlogBundle:Default:blog } 
```

并且使用会话参数我会知道哪个捆绑包将运行请求

对不起，

我想根据会话参数运行正确的包

例子

```
{{
if($Parameter ='A')
 run user_blog
else
 run team_blog
}} 
```

我做这个：

```
//src/project/TestBundle
use Symfony\Component\Routing\RouteCollection;

$collection = new RouteCollection();
$req = $this->getRequest();
if($req->server->get('SERVER_NAME') == 'www.domainA.com')
$collection->addCollection($loader->import("@BundleABundle/Resources/config/routing.php"));
else
$collection->addCollection($loader->import("@BundleBBundle/Resources/config/routing.php"));
return $collection; 
```

这是平常的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:18:45.233

在我看来，每条路线都必须是独一无二的。您应该牢记这一点来构建您的应用程序。否则，我认为您在访问这些路线时可能会出现一些随机行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:34:38.633

这在 2.2 版本参数主机上已解决

[http://symfony.com/doc/master/components/routing/hostname_pattern.html](http://symfony.com/doc/master/components/routing/hostname_pattern.html)

```
Bundle A

user_blog:
    pattern:  /blog
    host: a.example.com
    defaults: { _controller: UserBlogBundle:Default:blog }

Bundle B

team_blog:
    pattern:  /blog
    host: b.example.com
    defaults: { _controller: TeamBlogBundle:Default:blog } 
```

# javascript - 页面未居中

> ID：11480492
> 
> 赞同：0
> 
> 时间：2012-07-14T02:14:31.030
> 
> 标签：javascript, jquery, html, css, google-chrome

我可以加载页面，它将一直到左按刷新，然后加载居中！我用铬！ [http://www.soldbybillcox.com/index.html](http://www.soldbybillcox.com/index.html)

同样在[http://www.soldbybillcox.com/listings.html](http://www.soldbybillcox.com/listings.html)我似乎无法让页面居中！

最重要的是如何删除 www。从 url 确定滚动条是否会出现在 iframe 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:31:25.343

将整个页面包装在一个 DIV 标记中，如下所示：

```
<div style="margin: 0 auto; width: 912px;">
    /*You page and stuff*/
</div> 
```

请注意，“912”可以更改，只需使其与页面宽度完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T12:50:44.153

用

```
<div id="container" style="margin:0 auto width:960px">
All the content here...
</div> 
```

# javascript - IE7 按“回车”键不会阻止默认操作

> ID：11480497
> 
> 赞同：3
> 
> 时间：2012-07-14T02:16:40.670
> 
> 标签：javascript, jquery, javascript-events

我有一个表格，其中包含

```
<button class="submit">Submit</button> 
```

和 jQuery 代码

```
$(".submit").click(function(e){
   var evt = e || window.event; // IE compatibility
   if(evt.preventDefault){  
     evt.preventDefault();  
   }else{  
      evt.returnValue = false;  
    evt.cancelBubble=true;  
  }
 //....ajax call 
}); 
```

所以，我想知道我在 IE7 中做错了什么，当我输入搜索词并按 Enter 键时，它会转到我的主页（表单中的操作 =“/”）。为什么它不会阻止 IE7 进入默认操作。

*   是不是因为我使用的是按钮标签
*   我也尝试过在表单 onsubmit 中调用一些函数的旧方法，但它失败了
*   还是因为ajax调用？

附加说明：

*   我有身体，在身体内部我有 iframe，在那个 iframe 中我有形式。所以，我想知道是不是因为 iframe。

谢谢病毒

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T02:29:42.437

您正在阻止按钮标签的默认操作，这不会影响输入触发事件，还要注意 jQuery Event 对象`preventDefault()`方法是跨浏览器的，试试这个：

```
$('input').on('keyup', function(e){
  if (e.which == 13) {
     e.preventDefault();
  }
}) 
```

# cordova - 如何在 Phonegap 中的 Android 上添加自定义应用程序图标？

> ID：11480503
> 
> 赞同：4
> 
> 时间：2012-07-14T02:18:35.683
> 
> 标签：cordova

你知道如何在 Android 上的 Phonegap 中添加一个自定义的 .png 图标吗？我将 AndroidManifest.xml "android:icon="@drawable/ic_launcher" 更改为自定义名称，但它不起作用。此外，我的图标都在 www/res/drawable 文件夹中，每个 png 应具有正确的大小。我不知道这笔交易是什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-03T19:23:16.893

请注意，如果您正在进行**本地构建**，`config.xml`则会忽略该图标，并且使用的图标位于`platforms/android/res/drawable`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T19:17:48.847

您可以使用[PhoneGap Builder](https://build.phonegap.com/)在[config.xml](https://build.phonegap.com/docs/config-xml/)中轻松描述应用程序图标。

但是，如果您不想使用构建器，这个线程也许可以帮助您：

[Phonegap 中适用于 Android 的应用程序图标](https://stackoverflow.com/questions/8230810/app-icon-for-android-in-phonegap)

[使用 Android 版 Phonegap 的应用程序图标](https://stackoverflow.com/questions/9699352/icon-for-app-using-phonegap-for-android)

# php - 使用 PHP getimagesize 函数有什么危险吗？

> ID：11480504
> 
> 赞同：0
> 
> 时间：2012-07-14T02:18:56.923
> 
> 标签：php

我有这个主机禁用了allow_url_fopen，因为他们说这是一个安全风险，这反过来又阻止了我使用getimagesize函数，因为我传入了一个http。

我的网站在 Wordpress 上，我正在使用 getimagesize 将图像拉入 Wordpress 网站的上传文件夹中，该文件夹显然包含 http://。

所以我的问题是这是否不安全？如果不安全，如何在 Wordpress 环境中完成？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:10:50.090

您的主机可能考虑的安全风险是人们将尝试`include()`从远程主机执行脚本。当您为 HTTP 启用 fopen 包装器时，通常会启用此功能。（当然可以禁用该行为，但大多数主机都不会打扰，只是出于谨慎而阻止这些请求。其他问题也存在。）

就安全性`getimagesize()`而言，您如何获得源图像并不重要。cURL 或 fopen 包装器...没有区别。在任意内容上使用它大多是安全的`getimagesize()`，但要注意过去发现了各种图像库中的漏洞。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T02:46:39.737

好的，解决方案是使用 CURL。所以这样的事情会起作用。

```
$filename = "http://www.example.com/example.jpg";

$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL, $filename);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

$contents = curl_exec($ch);
curl_close($ch);

$new_image = ImageCreateFromString($contents);
imagejpeg($new_image, "temp.jpg",100);

$size = getimagesize("temp.jpg");

// width and height

$width = $size[0];
$height = $size[1]; 
```

# c# - SQL Anywhere 版本 10 是否适用于实体框架？

> ID：11480505
> 
> 赞同：0
> 
> 时间：2012-07-14T02:19:03.303
> 
> 标签：c#, .net, entity-framework, sqlanywhere

我看到 Sybase SQL Anywhere 具有版本 11 和 12 的实体框架提供程序，但我想让它与 SQL Anywhere 10 一起使用。这可能吗？在我们的环境中升级到版本 11 或 12 是不可能的，所以我们必须坚持版本 10。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:55:14.367

让 EF 与 SQL Anywhere 10 一起工作的一种方法是在任何地方安装 sybase sql 开发人员版本 11 或 12，并使用**客户端**（支持 EF）访问 Sql Anywhere 10 数据库。此解决方法有效，因为客户端具有向后兼容性。但在您执行任何操作之前，请检查重新分发客户端的许可协议。

# opengl - Libgdx FrameBuffer 不足？

> ID：11480512
> 
> 赞同：1
> 
> 时间：2012-07-14T02:21:04.827
> 
> 标签：opengl, glsl, libgdx, framebuffer

简单地说，我想创造一个涟漪效应。如何实现连锁反应不是我的问题。我的问题本质上是技术性的。

我目前有一种涟漪效果，我如何实现这一点是通过使用 FrameBuffer，将我需要的所有内容写入其中，然后打开我创建的涟漪着色器和中提琴。

然而，这是有问题的，当我只需要一部分时，我正在捕获整个屏幕。我查看了 API，似乎没有简单的方法可以使用 FrameBuffers 做到这一点。

现在怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T18:49:10.000

您将要使用[`ScreenUtils`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/utils/ScreenUtils.html)而不是`FrameBuffer`.

> 这些方法可用于获取整个屏幕内容或其一部分。

# cuda - CUDA 中哪个更快：常量内存或纹理内存？

> ID：11480521
> 
> 赞同：8
> 
> 时间：2012-07-14T02:23:13.750
> 
> 标签：cuda

我知道两者都在片外 DRAM 上并缓存。

但是哪个访问速度更快？或者在什么情况下一个比另一个快？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T02:53:25.923

纹理内存针对 2D 空间局部性（它得名的地方）进行了优化。您可以将恒定记忆视为利用临时性的局部性。

纹理内存相对于常量内存的好处可以总结如下：

*   空间局部性
*   寻址计算可以在硬件内核之外计算
*   数据可以在单个操作中被不同的变量访问
*   8位和16位数据可以自动转换为0到1.0之间的浮点数

有关更多详细信息，请参阅[文档](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-14T16:53:46.110

常量内存针对广播进行了优化，即当 warp 中的线程都读取相同的内存位置时。如果他们正在读取不同的位置，它会起作用，但是经线引用的每个不同位置都会花费更多时间。当向线程广播读取时，常量内存比纹理内存快得多。

纹理内存具有很高的延迟，即使是缓存命中也是如此。你可以把它想象成一个带宽聚合器——如果有可以从纹理缓存中得到服务的重用，GPU就不必为了这些读取而去外部存储器。对于 2D 和 3D 纹理，寻址具有 2D 和 3D 局部性，因此高速缓存行填充会拉入 2D 和 3D 内存块而不是行。

最后，纹理管道可以执行“奖励”计算：处理边界条件（“纹理寻址”）以及将 8 位和 16 位值转换为统一浮点数是可以“免费”完成的操作示例。（它们是纹理读取具有高延迟的部分原因）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T02:56:11.713

根据我的经验，访问纹理内存与访问常量内存一样快。但是纹理内存比常量内存大得多，所以如果你需要存储大量数据，我建议多次使用纹理内存而不是'memcpy'到常量内存中。此外，如果您需要进行插值，纹理内存是最佳选择。

另一方面，常量内存针对warp的所有线程读取相同位置的情况进行了硬件优化。如果线程从多个位置读取，则访问是序列化的。

# javascript - 如何在我自己的网站模板中使用 StackExchange QA 编辑器？

> ID：11480524
> 
> 赞同：1
> 
> 时间：2012-07-14T02:23:20.310
> 
> 标签：javascript, html, css, text-editor

我一直在使用 elrte js 库来编辑我为艺术家数据库制作的网站中的用户个人资料，但我有点不喜欢它，因为用户抱怨它的复杂性和稳定性。

我非常喜欢 StackOverflow 的这个问题/答案编辑器，我想知道我是否可以借用代码在这个网站上使用或者它是受版权保护的。如果没问题，我在哪里可以下载正确的源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:40:19.197

我不确定这些链接是否对您有帮助，我认为您想要的是 MarkDown

*   [http://daringfireball.net/projects/markdown/](http://daringfireball.net/projects/markdown/)

*   [http://michelf.com/projects/php-markdown/](http://michelf.com/projects/php-markdown/)

*   [http://www.toptensoftware.com/markdowndeep/](http://www.toptensoftware.com/markdowndeep/)

您可以在多种语言中找到它：PHP、Perl、C#

希望这可以帮助

# android - 使用游戏引擎开发 Monkey Islandish 移动/Web 应用程序？

> ID：11480525
> 
> 赞同：-1
> 
> 时间：2012-07-14T02:23:49.030
> 
> 标签：android, ios, cocos2d-x, marmalade

我正在尝试制作一个图形化的点击式冒险应用程序，它可以作为移动应用程序下载，也可以在浏览器中本地运行。这将是我的交互设计学位的顶峰项目，我有大约两年的时间来完成它。我计划在此过程中学到很多东西，但我不知道从哪里开始。

我一直在研究 Cocos2dx 和 Marmalade SDK 之类的东西，但我试图找出适合我想做的事情。归根结底，这个项目将是一个半交互式的故事，其主要目标是展示我的艺术作品和界面设计。那么我需要一个游戏引擎，还是更简单的东西会更好？

我一直在阅读一些人使用 HTML5 和 Javascript 进行应用程序开发，这将使我具有跨平台兼容性，但是我在使用它的一些网站上看到的性能问题让我担心用户体验会出现故障。去年左右我也一直在学习 C++，所以如果有办法让我的代码在线托管并在浏览器中运行，我可以使用它。

我已经尝试在这里进行研究，并且发现了很多很好的信息，但是我的项目有一些特定的需求。任何想法或建议将不胜感激。

编辑：有一个名为 DisneyLand Explorer 的迪士尼应用程序，它与我想做的事情有类似的互动感觉。 [http://itunes.apple.com/us/app/disneyland-explorer/id496004846?mt=8](http://itunes.apple.com/us/app/disneyland-explorer/id496004846?mt=8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:30:02.253

如果您不知道从哪里开始，请列出强制性要求与仅满足要求的要求。比如：需要3D渲染，还是2D分层渲染就够了？您是否需要跨平台（即它会帮助您获得更好的成绩）还是仅仅是一个不错的选择？

如果你不知道从哪里开始并且有很多东西要学，我个人的建议是只关注一个平台。跨平台开发是一种时间消耗（特别是对于初学者），只是为了使相同的游戏在不同的设备或浏览器中具有相同的外观和感觉。这也是一种拖累，因为如果你不能使用其他激励因素来激励自己去做这件事，那就不好玩了，比如“好吧，如果我把这个游戏移植到 X 平台，我会再赚一笔可笑的钱”。

哦，是的，你会想要使用游戏引擎。尽管您不应该排除[Adventure Game Studio 之](http://www.adventuregamestudio.co.uk/)类的替代方案。这可能非常适合您的设计目标，特别是因为您的学位是关于交互性的，您可能希望花费大量时间使事物具有交互性，而不是努力应对更多的技术挑战。

从 Disney 的游戏来看，你应该坚持使用 cocos2d、Sparrow Framework 或 Corona SDK 之类的 2D 游戏引擎。Unity 是严重的矫枉过正，它是为知道自己在做什么的专业团队而设计的。如此多的初学者蜂拥而至，部分原因在于他们出色的营销和“照顾一切，只需点击鼠标即可跨平台”的承诺。并非如此，尽管这些工具有很大帮助，但仍然需要大量艰苦的工作，但是如果您需要以不同的方式完成某些事情（这就是他们向上销售昂贵的 Pro 许可证的方式），它们可能同样具有限制性。

一定要查看可用于各种游戏引擎的工具。在您的情况下，我怀疑[ArtPig](http://artpigsoft.com/)（基于时间线的动画工具）可能会有很大帮助。检查一下，如果你喜欢它，请确保选择支持它的引擎。

至于在不加载的情况下启动动画：只有两种方法。设备/平台的速度足以在播放动画时将纹理数据流入和流出内存。我不会打赌。或者您为每个场景预加载每个动画，这会增加加载时间并且需要相当多的内存，具体取决于动画的复杂性。这可能并非在所有平台上都可行。预计必须在该领域做出妥协。

并了解什么平台通常可以使用多少内存，以及纹理消耗了多少内存（纹理内存不等于图像文件大小）。我看到很多问题，当人们正在做的只是从大约 200 KB 的文件中加载二十个 2048x2048 纹理时，iOS 崩溃了。算算一下，您会惊讶地发现这会消耗大约 200 MB（32 位未压缩）纹理内存。这比大多数 iOS 设备作为可用内存提供给用户的要多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:14:07.523

我不太了解`Cocos2Dx`，因为我仍在努力找时间学习它。但是如果你想要`Cross-Platform stuff`，你真的应该考虑`Marmalade`SDK。虽然正如`LearnCocos2D's answer`所说的那样，做跨平台的东西并不容易，但是用一个代码工作并改变几行代码比用不同的语言编写整个代码更容易。
Marmalade 也有 Cocos2Dx 的扩展，因此您也可以在 Marmalade 中使用 Cocos2Dx 功能。我们也在 marmalade 中创建了 3D 游戏，虽然在某些地方似乎有些限制，但您总是可以设法`openGL`直接调用函数进行渲染。
就我个人的看法而言，marmalade 是一个非常好的构建游戏的引擎，它的 6.0 版本还支持`HTML5`应用程序和`phonegap`api，虽然我从来没有用过。
然而 Cocos2D 是免费的，而 Marmalade 不是，所以如果预算是你的限制，这个信息会让你决定你的引擎要工作。

# php - MySQL - 选择当前月/年的最少一天，不一定是当月的第一天

> ID：11480527
> 
> 赞同：2
> 
> 时间：2012-07-14T02:24:03.287
> 
> 标签：php, mysql, database

使用 PHP/MySQL

我正在尝试创建一个选择语句，该语句从当前月份和年份的最少一天获取数据（我正在使用它来显示来自某个玩家“本月”的数据）。第一个月份的数据可能并不总是存在，因此如果没有找到第一个，那么它将使用第二个或第三个等，以最小的月份为准。

查询需要类似于：

```
SELECT * FROM table_name WHERE name = '$username' AND
[...theDate = the least day of data in the current month/year] 
```

它将返回单行数据。

这是我用于获取“本周”数据的查询：

```
SELECT name, data, theDate
FROM table_name
WHERE name = '$username'
AND YEARWEEK(theDate) = YEARWEEK(CURRENT_DATE)
ORDER BY theDate; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:48:47.927

这是一个简单的解决方案：

```
SELECT a.*
FROM table_name a
INNER JOIN
(
    SELECT name, MIN(theDate) AS mindate
    FROM table_name
    WHERE MONTH(theDate) = MONTH(CURDATE()) AND
          YEAR(theDate) = YEAR(CURDATE()) AND
          name = '$username'
    GROUP BY name
) b ON a.name = b.name AND a.theDate = b.mindate
ORDER BY theDate 
```

内部子选择首先选择当前月份和当前年份的最小日期。这应该只返回一个结果。

然后外部查询加入这个结果，因此您可以获得当前月份和年份的最早记录日期的行。

假设每个玩家每天只生成一行，我们可以进一步简化：

```
SELECT *
FROM table_name
WHERE MONTH(theDate) = MONTH(CURDATE()) AND
      YEAR(theDate) = YEAR(CURDATE()) AND
      name = '$username'
ORDER BY theDate
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:42:51.547

如果您只想返回一行，最简单的方法是：

```
SELECT t.*
  FROM table_name t
 WHERE t.name = '$username'
   AND t.theDate >= CAST(DATE_FORMAT(NOW(),'%Y-%m-01') AS DATE)
   AND t.theDate < DATE_ADD(DATE_FORMAT(NOW(),'%Y-%m-01'), INTERVAL 1 MONTH)
 ORDER BY s.name DESC, s.theDate DESC
 LIMIT 1 
```

ORDER BY 是基于您在（或具有前导列）上有索引的假设`(name,theDate)`。那将是谓词的最合适的索引（即 WHERE 子句中的条件。我们确实不需要对`name`列进行排序，因为我们知道它将等于某物……但是以这种方式指定 ORDER BY使 MySQL 更有可能对索引执行反向扫描操作，以正确的顺序返回行，避免文件排序操作。

注意：我`theDate`在 WHERE 子句的条件中指定了裸列，而不是将其包装在任何函数中……通过指定裸列和有界范围，我们使 MySQL 能够使用索引范围扫描操作。还有其他可能的方法可以将此条件包含在 WHERE 子句中，例如...

```
DATE_FORMAT(t.theDate,'%Y-%m') = DATE_FORMAT(NOW(),'%Y-%m') 
```

这将返回一个等效的结果，但这样的谓词是不可分割的。也就是说，MySQL 不能/不会对索引进行范围扫描来满足这一点。

如果您打算为给定用户获取一个月内“最少”日期的所有行（您的问题似乎并不表明您只需要一行），这是获得该结果的一种方法：

```
SELECT t.* 
  FROM table_name t
  JOIN ( SELECT s.name
              , s.theDate
           FROM table_name s 
          WHERE s.name = '$username'
            AND s.theDate >= CAST(DATE_FORMAT(NOW(),'%Y-%m-01') AS DATE)
            AND s.theDate < DATE_ADD(DATE_FORMAT(NOW(),'%Y-%m-01'), INTERVAL 1 MONTH)
          ORDER BY s.name DESC, s.theDate DESC
          LIMIT 1
       ) r
    ON r.name = t.name
   AND r.theDate = t.theDate 
```

同样，MySQL 可以使用具有前导列 (name,theDate) 的索引（如果可用）来满足谓词，并执行反向扫描操作（避免排序）和执行 JOIN 操作。

注意：我们在这里假设“theDate”是数据类型 DATE（没有时间组件）。如果它是 DATETIME 或 TIMESTAMP，则可能存在时间分量，并且如果具有相同“日期”的行的时间分量不同，则该查询可能不会返回给定“日期”值的所有行。（例如，'2012-07-13 17:30' 和 '2012-07-13 19:55' 是不同的日期时间值。）如果我们想返回这两行（因为两者都是“7 月 13 日”的日期） ，我们需要进行范围扫描而不是相等测试。

```
SELECT t.* 
  FROM table_name t
  JOIN ( SELECT s.name
              , s.theDate
           FROM table_name s 
          WHERE s.name = '$username'
            AND s.theDate >= CAST(DATE_FORMAT(NOW(),'%Y-%m-01') AS DATE)
            AND s.theDate < DATE_ADD(DATE_FORMAT(NOW(),'%Y-%m-01'), INTERVAL 1 MONTH)
          ORDER BY s.name DESC, s.theDate DESC
          LIMIT 1
       ) r
    ON t.name = r.name 
   AND t.theDate >= r.theDate
   AND t.theDate < DATE_FORMAT(DATE_ADD(r.theDate,INTERVAL 1 DAY),'%Y-%m-%d') 
```

请注意最后两行......我们正在寻找任何`theDate`值大于或等于当前月份找到的“最小”值并且也小于第二天午夜的行。

# actionscript-3 - 如果闪存程序员可以在 .fla 文件中设置分辨率，为什么还要使用 SWF 元标记？

> ID：11480531
> 
> 赞同：2
> 
> 时间：2012-07-14T02:24:54.740
> 
> 标签：actionscript-3, flash

我有一个闪存应用程序。.fla 文件中的分辨率是 800 x 600。我的一个朋友说我必须使用 swf 元标记：

```
[SWF(width='800', height='600', backgroundColor='0x000000')] 
```

它对我没有任何作用。我不明白为什么这是必要的。请告诉我为什么程序员将这个命令放在他们的源代码中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:28:42.410

这取决于用于开发基于 Flash 的应用程序的 IDE 和创作工具。

### 闪存生成器

对于使用 Flash Builder 或同等 IDE 而没有用于创作的 Flash Professional 艺术板和文档属性的开发人员，需要 SWF 元标记来定义 SWF 的属性。

```
package
{
    [SWF(percentWidth=100, percentHeight=100, backgroundColor=0x313131, frameRate=30)]
    public final class example extends Sprite
    {
        /* ... */
    }
} 
```

### 闪光专业

在 Flash Professional 中，这些是从文档属性中定义的。

![闪存属性](../Images/a6399a16f75520cb2b95896bbcca5177.png)

# php - Uncaught SyntaxError: Unexpected token }

> ID：11480535
> 
> 赞同：0
> 
> 时间：2012-07-14T02:26:11.020
> 
> 标签：php, javascript

我不知道发生了什么，我一遍又一遍地检查了我在 PHP 和 Javascript 中的代码，但找不到任何额外的 }，它没有对应的 {，谁能帮我看看代码?

这是PHP文件，加载函数可以成功加载，但是，当我单击“查看日志”按钮时，出现上述消息。

```
function load($DB){
    $dbConnection = mysql_connect($DB['server'], $DB['loginName'], $DB['password']);
    if(!$dbConnection){
        die('Error! ' . mysql_error());
        }
    mysql_select_db($DB['database'], $dbConnection);
    $result = mysql_query("SELECT ClientName FROM Client");

    print "Sort by";
    print "<select id='option'>";
    print "<option value='3'>Tech</option>";
    print "<option value='4'>Client</option>";
    print "</select>";
    print "<input type='button' value='View the log' onclick='viewlog(document.getElementById('option').value)'/>";
    print "<br>";

    print "Tech Name checked in/out from";
    print "<select id='client'>";
    while($row = mysql_fetch_array($result)){
        print "<option value='".$row['ClientName']."'>".$row['ClientName']."</option>";
    }
    print "</select>";
    print "<input type='button' value='Display' onclick='display(document.getElementById('client').value)'/>";
    print "<br>";
    print "<button type='button' onclick='back.php?function=5'>Export the log to .csv</button>";
    print "<br>";
}

function viewlog($DB, $sort){
    print "<h1>repeat</h1>";
    $dbConnection = mysql_connect($DB['server'], $DB['loginName'], $DB['password']);
    if(!$dbConnection){
        die('Error! ' . mysql_error());
        }
    mysql_select_db($DB['database'], $dbConnection);
    $query = "SELECT * 
                FROM Tech AS T, Client AS C, Site AS S, Log AS L 
                WHERE T.TechID=L.TechID AND C.ClientID=L.ClientID AND S.SiteID=L.SiteID ";
    if($sort=="Tech")
        $query .= "ORDER BY T.TechName ASC, L.Time DESC";
    else if($sort=="Client")
        $query .= "ORDER BY C.ClientName ASC, L.Time DESC";
    $result = mysql_query($query) or die('Error! ' . mysql_error());; 
    print "Real-Time check in/check out<br>";
    print "<table><th><td>Tech</td><td>Client</td><td>Site</td>";
    print "<td>Date and Time</td><td>Type</td></th>";
    while($row = mysql_fetch_array($result)){
        print "<tr><td>".$row['TechName']."</td>";
        print "<td>".$row['ClientName']."</td>";
        print "<td>".$row['SiteName']."</td>";
        print "<td>".$row['Time']."</td>";
        print "<td>".$row['Type']."</td></tr>";
        }
    print "</table>";
}

function export($DB){
    $dbConnection = mysql_connect($DB['server'], $DB['loginName'], $DB['password']);
    if(!$dbConnection){
        die('Error! ' . mysql_error());
        }
    mysql_select_db($DB['database'], $dbConnection);
    $result = mysql_query("SELECT TechName, ClientName, SiteName, Time, Type
                            INTO OUTFILE 'result.csv'
                            FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED by '\"'
                            LINES TERMINATED BY '\n'
                            FROM Tech AS T, Client AS C, Site AS S, Log AS L
                            WHERE T.TechID=L.TechID AND C.ClientID=L.ClientID AND S.SiteID=L.SiteID
                            ORDER BY L.Time DESC");
    $Time = date('Y_m_d_H_i');
    $fileName = "Report_" + $Time;
    header('Content-type: text/csv'); 
    header('Content-Disposition: attachment; filename="'.$fileName.'.csv"'); 
    readfile('result.csv');
}

$function = $_GET['function'];
if($function==0)
    load($DB);
elseif($function==3)
    viewlog($DB, "Tech");
elseif($function==4)
    viewlog($DB, "Client");
elseif($function==5)
    export($DB); 
```

下面是 Javascript 代码：

```
function load(){
var xmlhttp;
if (window.XMLHttpRequest){ // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
}else{ // code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}               

xmlhttp.onreadystatechange = function(){
    //document.getElementById("action").innerHTML=xmlhttp.status;
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
        document.getElementById("action").innerHTML=xmlhttp.responseText;       
    }
}
var num = 0;
xmlhttp.open("GET","back.php?function="+num, true);
xmlhttp.send();
}

function viewlog(num){
var xmlhttp;
if (window.XMLHttpRequest){ // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
}else{ // code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}               

xmlhttp.onreadystatechange = function(){
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
        document.getElementById("View").innerHTML=xmlhttp.responseText;         
    }
}
xmlhttp.open("GET","back.php?function="+num, true);
xmlhttp.send();
} 
```

我试图隐藏 js 文件中的 viewlog 函数，也隐藏 PHP 文件的 viewlog 函数中的内容，但是两个动作仍然发出相同的消息，我真的不知道如何调试它。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:33:01.720

我认为浏览器会在你使用与 javascript 字符串相同的属性引号时遇到问题（你在两者中都这样做，但我只举一个例子）：

```
onclick='viewlog(document.getElementById('option').value)' 
```

进入

```
onclick='viewlog(document.getElementById(&quot;option&quot;).value)' 
```

# wpf - 如何在 WPF 功能区选项卡中使用相同的工具栏？

> ID：11480538
> 
> 赞同：0
> 
> 时间：2012-07-14T02:27:51.660
> 
> 标签：wpf, xaml, ribbon

我是 WPF 的新手，我正在玩功能区控件。我有三个不同的功能区选项卡，如下面的代码所示。我正在使用相同的收费栏按钮。如下所示，我编写的方式似乎不是内存最佳方法。任何人都可以帮助修改代码，以便我可以在所有功能区选项卡中使用相同的工具栏而不重复？

```
 <ribbon:RibbonTab x:Name="HomeTab" 
                          Header="Home">
            <ribbon:RibbonGroup x:Name="Group1" 
                                Header="">
                <ribbon:RibbonButton x:Name="Update1"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Update" />
                <ribbon:RibbonButton x:Name="Register1"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Register" />
                <ribbon:RibbonButton x:Name="Uninstall1"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Uninstall"  />
                <ribbon:RibbonButton x:Name="Invisible1"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Go invisible" Click="Invisible_Click"/>
                <ribbon:RibbonButton x:Name="Help1"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Help" />
                <ribbon:RibbonButton x:Name="Quit1"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Quit" Click="Quit_Click"/>
            </ribbon:RibbonGroup>

        </ribbon:RibbonTab>
        <ribbon:RibbonTab x:Name="LogTab" 
                          Header="Log History">
            <ribbon:RibbonGroup x:Name="Group11" 
                                Header="">
                <ribbon:RibbonButton x:Name="Update2"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Update" />

                <ribbon:RibbonButton x:Name="Regiter2"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Register" />
                <ribbon:RibbonButton x:Name="Uninstall2"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Uninstall" />
                <ribbon:RibbonButton x:Name="Invisible2"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Go invisible" Click="Invisible_Click"/>
                <ribbon:RibbonButton x:Name="Help2"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Help" />
                <ribbon:RibbonButton x:Name="Quit2"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Quit" Click="Quit_Click" />
            </ribbon:RibbonGroup>

        </ribbon:RibbonTab>
        <ribbon:RibbonTab x:Name="SettingsTab" 
                          Header="Settings">
            <ribbon:RibbonGroup x:Name="Group21" 
                                Header="">
                <ribbon:RibbonButton x:Name="Update3"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Update" />

                <ribbon:RibbonButton x:Name="Register3"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Register" />
                <ribbon:RibbonButton x:Name="Uninstall3"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Uninstall" />
                <ribbon:RibbonButton x:Name="Invisible3"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Go invisible" Click="Invisible_Click" />
                <ribbon:RibbonButton x:Name="Help3"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Help" />
                <ribbon:RibbonButton x:Name="Quit3"
                                     LargeImageSource="/T-Spy;component/Resources/favicon.ico"
                                     Label="Quit"  Click="Quit_Click"/>
            </ribbon:RibbonGroup>

        </ribbon:RibbonTab> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:08:19.583

为什么不创建一个基本类型为**Ribbon:RibbonGroup**的 UserControl ，然后根据需要将其放入每个部分？然后你有每个控件的唯一上下文，所以没有冲突。

任何属性操作都需要使用依赖属性进行管理。

# java - 判断字符串是否为有效日期的最快方法

> ID：11480542
> 
> 赞同：32
> 
> 时间：2012-07-14T02:28:57.840
> 
> 标签：java

我在工作中支持一个通用库，它对给定字符串执行许多检查以查看它是否是有效日期。Java API、commons-lang 库和 JodaTime 都有可以解析字符串并将其转换为日期的方法，让您知道它是否实际上是有效日期，但我希望有一种方法在不实际创建日期对象（或 JodaTime 库的情况下的 DateTime ）的情况下进行验证。例如，这里是一段简单的示例代码：

```
public boolean isValidDate(String dateString) {
    SimpleDateFormat df = new SimpleDateFormat("yyyyMMdd");
    try {
        df.parse(dateString);
        return true;
    } catch (ParseException e) {
        return false;
    }
} 
```

这对我来说似乎很浪费，我们正在丢弃生成的对象。根据我的基准测试，我们在这个公共库中大约 5% 的时间用于验证日期。我希望我只是缺少一个明显的 API。任何建议都会很棒！

**更新**

假设我们始终可以始终使用相同的日期格式（可能是 yyyyMMdd）。我确实也考虑过使用正则表达式，但是它需要知道每个月的天数、闰年等等......

* * *

**结果**

解析日期 1000 万次

```
Using Java's SimpleDateFormat: ~32 seconds 
Using commons-lang DateUtils.parseDate: ~32 seconds
Using JodaTime's DateTimeFormatter: ~3.5 seconds 
Using the pure code/math solution by Slanec: ~0.8 seconds 
Using precomputed results by Slanec and dfb (minus filling cache): ~0.2 seconds 
```

有一些非常有创意的答案，我很感激！我想现在我只需要决定我需要多少灵活性，我希望代码看起来像什么。我要说 dfb 的答案是正确的，因为它纯粹是我最初的问题中最快的。谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-14T02:44:15.170

如果您真的关心性能并且您的日期格式真的那么简单，只需预先计算所有有效字符串并将它们散列在内存中。你上面的格式只有大约 800 万个有效组合，直到 2050 年

* * *

**由 Slanec 编辑**- 参考实现

此实现取决于您的特定日期格式。它可以适应任何特定的日期格式（就像我的第一个答案一样，但更好一点）。

它制作了`dates`从 1900 到 2050 的所有日期（存储为字符串 - 其中有 54787 个），然后将给定的日期与存储的日期进行比较。

一旦`dates`创建了集合，它就快得要命了。一个快速的微基准测试显示，比我的第一个解决方案提高了 10 倍。

```
private static Set<String> dates = new HashSet<String>();
static {
    for (int year = 1900; year < 2050; year++) {
        for (int month = 1; month <= 12; month++) {
            for (int day = 1; day <= daysInMonth(year, month); day++) {
                StringBuilder date = new StringBuilder();
                date.append(String.format("%04d", year));
                date.append(String.format("%02d", month));
                date.append(String.format("%02d", day));
                dates.add(date.toString());
            }
        }
    }
}

public static boolean isValidDate2(String dateString) {
    return dates.contains(dateString);
} 
```

PS 它可以修改为使用`Set<Integer>`甚至是[Trove](http://trove.starlight-systems.com/)的`TIntHashSet`，这可以大大减少内存使用量（因此允许使用更大的时间跨度），然后性能下降到略低于[我原来的解决方案](https://stackoverflow.com/a/11480602/1273080)的水平。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-14T02:44:36.040

*您可以恢复您的想法 - 当 String绝对*没有日期时尝试尽快失败：

*   它是`null`
*   它`length`不是 8（基于您的示例日期格式！）
*   它[包含除数字以外的任何内容](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#isNumeric%28java.lang.CharSequence%29)（如果您的日期格式仅用于数字日期）

如果这些都不适用，那么尝试解析它 - 最好使用预制的静态`Format`对象，不要在每个方法运行时都创建一个。

* * *

*评论后编辑*

基于[这个巧妙的技巧](https://stackoverflow.com/questions/10013998/fastest-way-to-parse-a-yyyymmdd-date-in-java/10014172#10014172)，我编写了一个快速验证方法。它看起来很丑，但比通常的库方法（应该在任何标准情况下使用！）快得多，因为*它依赖于您的特定日期格式*并且不创建`Date`对象。它将日期处理为 an`int`并继续。

`daysInMonth()`我稍微测试了这个方法（[闰年条件取自 Peter Lawrey](https://stackoverflow.com/a/1021332/1273080)），所以我希望没有明显的错误。

快速（估计！）微基准表明加速了 30 倍。

```
public static boolean isValidDate(String dateString) {
    if (dateString == null || dateString.length() != "yyyyMMdd".length()) {
        return false;
    }

    int date;
    try {
        date = Integer.parseInt(dateString);
    } catch (NumberFormatException e) {
        return false;
    }

    int year = date / 10000;
    int month = (date % 10000) / 100;
    int day = date % 100;

    // leap years calculation not valid before 1581
    boolean yearOk = (year >= 1581) && (year <= 2500);
    boolean monthOk = (month >= 1) && (month <= 12);
    boolean dayOk = (day >= 1) && (day <= daysInMonth(year, month));

    return (yearOk && monthOk && dayOk);
}

private static int daysInMonth(int year, int month) {
    int daysInMonth;
    switch (month) {
        case 1: // fall through
        case 3: // fall through
        case 5: // fall through
        case 7: // fall through
        case 8: // fall through
        case 10: // fall through
        case 12:
            daysInMonth = 31;
            break;
        case 2:
            if (((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0)) {
                daysInMonth = 29;
            } else {
                daysInMonth = 28;
            }
            break;
        default:
            // returns 30 even for nonexistant months 
            daysInMonth = 30;
    }
    return daysInMonth;
} 
```

PS您上面的示例方法将返回`true`“99999999”。我的只会在现有日期返回 true :)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-01T16:21:01.557

我认为了解某个日期是否有效的更好方法是定义如下方法：

```
public static boolean isValidDate(String input, String format) {
    boolean valid = false;

    try {
        SimpleDateFormat dateFormat = new SimpleDateFormat(format);
        String output = dateFormat.parse(input).format(format);
        valid = input.equals(output); 
    } catch (Exception ignore) {}

    return valid;
} 
```

该方法一方面检查日期的格式是否正确，另一方面检查日期是否对应于有效日期。比如日期“2015/02/29”会被解析为“2015/03/01”，所以输入输出会不一样，方法会返回false。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-24T06:28:43.290

这是我检查日期是否格式正确并且实际上是有效日期的方法。假设我们不需要 SimpleDateFormat 将不正确的日期转换为正确的日期，而是一个方法只返回 false。输出到控制台仅用于检查该方法在每个步骤中的工作方式。

```
public class DateFormat {

public static boolean validateDateFormat(String stringToValidate){
    String sdf = "yyyy-MM-dd HH:mm:ss";
    SimpleDateFormat format=new SimpleDateFormat(sdf);   
    String dateFormat = "[12]{1,1}[0-9]{3,3}-(([0]{0,1}[1-9]{1,1})|([1]{0,1}[0-2]{1,1}))-(([0-2]{0,1}[1-9]{1,1})|([3]{0,1}[01]{1,1}))[ ](([01]{0,1}[0-9]{1,1})|([2]{0,1}[0-3]{1,1}))((([:][0-5]{0,1}[0-9]{0,1})|([:][0-5]{0,1}[0-9]{0,1}))){0,2}";
    boolean isPassed = false;

    isPassed = (stringToValidate.matches(dateFormat)) ? true : false;

    if (isPassed){
        // digits are correct. Now, check that the date itself is correct
        // correct the date format to the full date format
        String correctDate = correctDateFormat(stringToValidate);
        try
        {
            Date d = format.parse(correctDate);
            isPassed = (correctDate.equals(new SimpleDateFormat(sdf).format(d))) ? true : false;
            System.out.println("In = " + correctDate + "; Out = " 
                    + new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(d) + " equals = " 
                    + (correctDate.equals(new SimpleDateFormat(sdf).format(d))));
            // check that are date is less than current
            if (!isPassed || d.after(new Date())) {
                System.out.println(new SimpleDateFormat(sdf).format(d) + " is after current day " 
                        + new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(new Date()));
                isPassed = false;
            } else {
                isPassed = true;
            }
        } catch (ParseException e) {
            System.out.println(correctDate + " Exception! " + e.getMessage());
            isPassed = false;
        }
    } else {
        return false;
    }
    return isPassed;
}

/**
 *  method to fill up the values that are not full, like 2 hours -> 02 hours
 *  to avoid undesirable difference when we will compare original date with parsed date with SimpleDateFormat
 */
private static String correctDateFormat(String stringToValidate) {
    String correctDate = "";
    StringTokenizer stringTokens = new StringTokenizer(stringToValidate, "-" + " " + ":", false);
    List<String> tokens = new ArrayList<>();
    System.out.println("Inside of recognizer");
    while (stringTokens.hasMoreTokens()) {
        String token = stringTokens.nextToken();
        tokens.add(token);
        // for debug
        System.out.print(token + "|");
    }
    for (int i=0; i<tokens.size(); i++){
        if (tokens.get(i).length() % 2 != 0){
            String element = tokens.get(i);
            element = "0" + element;
            tokens.set(i, element);
        }
    }
    // build a correct final string
    // 6 elements in the date: yyyy-MM-dd hh:mm:ss
    // come through and add mandatory 2 elements
    for (int i=0; i<2; i++){
        correctDate = correctDate + tokens.get(i) + "-";
    }
    // add mandatory 3rd (dd) and 4th elements (hh)
    correctDate = correctDate + tokens.get(2) + " " + tokens.get(3);
    if (tokens.size() == 4){
        correctDate = correctDate + ":00:00";
    } else if (tokens.size() == 5){
        correctDate = correctDate + ":" + tokens.get(4) + ":00";
    } else if (tokens.size() == 6){
        correctDate = correctDate + ":" + tokens.get(4) + ":" + tokens.get(5);
    }  

    System.out.println("The full correct date format is " + correctDate);
    return correctDate;
} 
```

}

一个 JUnit 测试：

```
import static org.junit.Assert.*;
import junitparams.JUnitParamsRunner;
import junitparams.Parameters;
import org.junit.Test;
import org.junit.runner.RunWith;

@RunWith(JUnitParamsRunner.class)
public class DateFormatTest {

    @Parameters
    private static final Object[] getCorrectDate() {
        return new Object[] {
                new Object[]{"2014-12-13 12:12:12"},
                new Object[]{"2014-12-13 12:12:1"},
                new Object[]{"2014-12-13 12:12:01"},
                new Object[]{"2014-12-13 12:1"},
                new Object[]{"2014-12-13 12:01"},
                new Object[]{"2014-12-13 12"},
                new Object[]{"2014-12-13 1"},
                new Object[]{"2014-12-31 12:12:01"},
                new Object[]{"2014-12-30 23:59:59"},
        };
    }
    @Parameters
    private static final Object[] getWrongDate() {
        return new Object[] {
                new Object[]{"201-12-13 12:12:12"},
                new Object[]{"2014-12- 12:12:12"},
                new Object[]{"2014- 12:12:12"},
                new Object[]{"3014-12-12 12:12:12"},
                new Object[]{"2014-22-12 12:12:12"},
                new Object[]{"2014-12-42 12:12:12"},
                new Object[]{"2014-12-32 12:12:12"},
                new Object[]{"2014-13-31 12:12:12"},
                new Object[]{"2014-12-31 32:12:12"},
                new Object[]{"2014-12-31 24:12:12"},
                new Object[]{"2014-12-31 23:60:12"},
                new Object[]{"2014-12-31 23:59:60"},
                new Object[]{"2014-12-31 23:59:50."},
                new Object[]{"2014-12-31 "},
                new Object[]{"2014-12 23:59:50"},
                new Object[]{"2014 23:59:50"}
        };
    }

    @Test
    @Parameters(method="getCorrectDate")
    public void testMethodHasReturnTrueForCorrectDate(String dateToValidate) {
        assertTrue(DateFormat.validateDateFormatSimple(dateToValidate));
    }

    @Test
    @Parameters(method="getWrongDate")
    public void testMethodHasReturnFalseForWrongDate(String dateToValidate) {
        assertFalse(DateFormat.validateDateFormat(dateToValidate));
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-27T13:51:29.940

> 如果以下行引发异常，则日期无效，否则将返回有效日期。请确保在以下语句中使用适当的 DateTimeFormatter。

LocalDate.parse(uncheckedStringDate, DateTimeFormatter.BASIC_ISO_DATE)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-08T08:39:23.040

```
 public static int checkIfDateIsExists(String d, String m, String y) {
        Integer[] array30 = new Integer[]{4, 6, 9, 11};
        Integer[] array31 = new Integer[]{1, 3, 5, 7, 8, 10, 12};

        int i = 0;
        int day = Integer.parseInt(d);
        int month = Integer.parseInt(m);
        int year = Integer.parseInt(y);

        if (month == 2) {
            if (isLeapYear(year)) {
                if (day > 29) {
                    i = 2; // false
                } else {
                    i = 1; // true
                }
            } else {
                if (day > 28) {
                    i = 2;// false
                } else {
                    i = 1;// true
                }
            }
        } else if (month == 4 || month == 6 || month == 9 || month == 11) {
            if (day > 30) {
                i = 2;// false
            } else {
                i = 1;// true
            }
        } else {
            i = 1;// true
        }

        return i;
    } 
```

如果返回 i = 2 表示日期无效，如果日期有效则返回 1

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-18T19:07:40.807

可以结合使用正则表达式和手动闰年检查。因此：

```
if (matches ^\d\d\d\d((01|03|05|07|08|10|12)(30|31|[012]\d)|(04|06|09|11)(30|[012]\d)|02[012]\d)$)
    if (endsWith "0229")
         return true or false depending on the year being a leap year
    return true
return false 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-14T04:31:44.870

基于 dfb 的答案，您可以进行两步散列。

1.  创建一个表示日期的简单对象（日、月、年）。计算接下来 50 年的每个日历日，这应该少于 20k 个不同的日期。
2.  制作一个正则表达式，确认您的输入字符串是否与 yyyyMMdd 匹配，但不检查该值是否为有效日期（例如 99999999 将通过）
3.  检查函数将首先执行一个正则表达式，如果成功 - 将其传递给哈希函数检查。假设您的日期对象是 8 位 + 8 位 + 8 位（1900 年后的年份），然后是 24 位 * 20k，那么整个哈希表应该非常小......当然低于 500 KB，如果序列化和压缩。

# c++ - 显式复制构造函数

> ID：11480545
> 
> 赞同：18
> 
> 时间：2012-07-14T02:29:19.910
> 
> 标签：c++, copy-constructor, assignment-operator, stdstring, explicit

我已经扩展了 std::string 以满足我必须将自定义函数构建到名为**CustomString的字符串类中的需要**

我已经定义了构造函数：

```
 class CustomString : public std::string {
    public:
        explicit CustomString(void);
        explicit CustomString(const std::string& str);
        explicit CustomString(const CustomString& customString);
        //assignment operator
        CustomString& operator=(const CustomString& customString);
    ... }; 
```

在第三个构造函数（拷贝构造函数）和赋值运算符中，其定义为：

```
CustomString::CustomString(const CustomString& customString):
    std::string(static_cast<std::string>(customString)) 
{}
CustomString& CustomString::operator=(const CustomString& customString){
    this->assign(static_cast<std::string>(customString));
    return *this;
} 
```

首先，因为这是一个“明确的”；意味着需要显式转换才能分配给另一个 CustomString 对象；它在抱怨这项任务。

```
CustomString s = CustomString("test"); 
```

我不确定在哪里明确需要强制转换。

如果复制构造函数不是显式的，则代码可以正常工作，但我想知道并实现显式定义而不是“猜测正确的强制转换”。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-14T02:57:52.917

显式复制构造函数意味着不会隐式调用复制构造函数，这就是表达式中发生的情况：

```
CustomString s = CustomString("test"); 
```

这个表达式的字面意思是：`CustomString`使用带有`const char*`. 隐式调用 的复制构造函数`CustomString`以从该临时复制到`s`.

现在，如果代码是正确的（即如果复制构造函数不是显式的），编译器将避免创建临时代码并通过`s`直接使用字符串字面量构造来省略复制。但是编译器仍然必须检查构造是否可以完成并且在那里失败。

您可以显式调用复制构造函数：

```
CustomString s( CustomString("test") ); 
```

但我建议您完全避免临时使用，只需`s`使用以下命令创建`const char*`：

```
CustomString s( "test" ); 
```

这就是编译器无论如何都会做的事情......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T02:32:31.470

从 std::string 派生是不安全的，因为 std::string 没有虚拟析构函数。至于您的问题-您的复制构造函数不应该是明确的，以允许以下用法：

```
CustomString s = "test"; 
```

此外，我不知道您为什么要将复制构造函数声明为显式，因为它不是必需的。仅当您将 CustomString 对象声明为：

```
CustomString s(CustomString("test")); 
```

# objective-c - 第二个 NSLog 消息不会打印

> ID：11480548
> 
> 赞同：0
> 
> 时间：2012-07-14T02:29:42.147
> 
> 标签：objective-c

出于某种原因，我无法将第二条 NSLog 消息输出到控制台。一直在寻找问题，但找不到。提前致谢。

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

  @autoreleasepool {

     // Create the array of strings to devowelize and a container for new ones
    NSArray *oldStrings = [NSArray arrayWithObjects:@"Sauerkraut", @"Raygun", @"Big Nerd Ranch", @"Mississippi", nil];
    NSLog(@"old strings: %@", oldStrings);
    NSMutableArray *newStrings = [NSMutableArray array];

    // Create a list of characters that we'll remove from the string
    NSArray *vowels = [NSArray arrayWithObjects:@"a", @"e", @"i", @"o", @"u", nil];

    // Declare the block variable
    void(^devowelizer)(id, NSUInteger, BOOL *);

    // Assign a block to the variable
    devowelizer = ^(id string, NSUInteger i, BOOL *stop)
    {
      NSMutableString *newString = [NSMutableString stringWithString:string];
      // Iterate over the array of vowels, replacing occurences of each with 
      // an empty string
      for (NSString *s in vowels) {
        NSRange fullRange = NSMakeRange(0, [newString length]);
                             [newString replaceOccurrencesOfString:s 
                                                        withString:@"" 
                                                           options:NSCaseInsensitiveSearch 
                                                             range:fullRange];
                             [newStrings addObject:newString];
                             }; //End of block assignment

      // Iterate over the array with our block
      [oldStrings enumerateObjectsUsingBlock:devowelizer];
      NSLog(@"new strings: %@", newStrings);

  };
    return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:40:04.957

您永远不会调用 devowelizer 块。因此，第二个 NSLog 永远无法执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:40:34.523

您创建了一个块并将其分配给`devowelizer`. 看起来您已将调用放在块*内*的该块上，但这是行不通的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T06:46:32.973

```
NSLog(@"new strings: %@", newStrings); 
```

这条线也在块内工作。您没有调用块*devowelizer* ，这就是它不起作用的原因。

# iphone - 使用 XCode 4 在视图中添加更多委托协议

> ID：11480554
> 
> 赞同：0
> 
> 时间：2012-07-14T02:32:22.240
> 
> 标签：iphone, xcode, view, delegates, protocols

```
@interface WinesViewController : UITableViewController <UIActionSheetDelegate> {
    NSMutableArray *sortedObjects;
} 
```

在上面的代码中，添加了 UIActionSheetDelegate 协议，因为我使用 UIActionSheet 对 TableView 进行排序并且它需要一个委托。现在我在 DetailViewController 中添加一个 SwipeGestureRecognizer 以从 Detail View 访问 TableView 中的下一个单元格。我正在使用的教程告诉我在 TableViewController 中为 DetailViewController 添加一个委托协议。它告诉我以与我已经添加 UIActionSheetDelegate 完全相同的方式添加它，那么现在如何为 DetailViewController 添加委托呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T02:35:13.143

您只需将其添加到与 相同的位置`UIActionSheetDelegate`，用逗号分隔：

```
@interface WinesViewController : UITableViewController <UIActionSheetDelegate, DetailViewControllerDelegate> {
NSMutableArray *sortedObjects;
} 
```

（替换`DetailViewControllerDelegate`为您需要添加的代理名称。

希望这可以帮助！

# directx - DirectX9 的 LPDIRECT3DDEVICE8 等价物是什么？

> ID：11480561
> 
> 赞同：0
> 
> 时间：2012-07-14T02:33:40.577
> 
> 标签：directx, porting

我有一个为 DirectX8 编写的游戏，我正在尝试更新它以在 DirectX9 下构建。我听说 MS 不支持 DirectX8，DirectX9 应该允许我做 DirectX8 中所做的事情。所以我首先将所有东西 8 更改为 9，但 LPDIRECT3DDEVICE9 似乎不存在。那么 DirectX9 中是否存在（以及什么是）与 LPDIRECT3DDEVICE8 等效的东西？

我还看到 D3DCAPS8 没有 D3DCAPS9 等效项。（编辑：哦等等，它只是在一个新的头文件 D3D9Caps.h 中。）

而且我也没有定义 LPD3DXSPRITE，尽管我在 DirectX9 的讨论中看到了它。唔。

也许我真正需要的是头文件 d3dx9.h 和 D3DX8Math.h 的等价物。

需要明确的是，我不想尝试使用任何 DirectX9 功能，除了希望存在的 DirectX8 反向兼容性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:14:47.357

一个`LPDIRECT3DDEVICE8`只是一个`struct IDirect3DDevice8*`。这些`LP*`宏定义似乎在 9 中已被弃用，因此请使用`I*`等价物。

`D3dx9core.h`包括您正在寻找的精灵类。

这些也可能有用：

*   [转换为 Direct3D 9](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204851%28v=vs.85%29.aspx)
*   [D3DX(9)参考](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172965%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T21:33:00.987

好的，我的问题的主要答案似乎是：

安装 DirectX9 SDK 会导致 Visual Studio 2010 中的默认或移植项目文件能够找到一些 DirectX 头文件，但不能找到其他头文件。此外，虽然 DirectX9 中的大多数或所有 DirectX8 结构都有等效的结构，但它们所在的头文件以及这些头文件的名称可能已经改变。主要是，正如 Preet Kukreti 所写，有些人已经转移到 D3dx9core.h，这是如果不编辑项目配置可能无法找到的头文件之一。在 VS 2010 中，从 Project 选项卡的 Properties 下转到项目的 Property Pages，然后选择 VC++ Directories，然后在 Include Directories 下，添加到现有字符串 ;path，其中 path 是 SDK 中包含文件夹的路径。

（顺便说一句，不要使用 Windows 7 搜索来查找路径，因为它几乎没用。如果您想实际搜索计算机中的文件，请下载并使用 Agent Ransack，它会在大约 1 秒内找到它，而不是潜在的几个小时与 Windows 搜索作斗争的挫败感。）

我在：C:\Program Files (x86)\Microsoft DirectX SDK (June 2010)\Include\d3dx9math.h

# tomcat - 使用 Tomcat 和 Intellij 社区版进行调试

> ID：11480563
> 
> 赞同：1
> 
> 时间：2012-07-14T02:34:27.080
> 
> 标签：tomcat, intellij-idea

我按照此处的说明启动了 Tomcat：[http](http://wiki.apache.org/tomcat/FAQ/Developing) ://wiki.apache.org/tomcat/FAQ/Developing using this command

> 卡特琳娜 jpda 开始

我如下图所示设置了 Intellij

![在此处输入图像描述](../Images/467aa274d1411d4dcf3498f1f3ac46db.png)

它成功连接到调试器

但是当我单击每一行旁边时，我会得到一个红色的 x，如下所示。我知道这一行包含可执行代码。无论哪种方式，每一行都说同样的事情。

![在此处输入图像描述](../Images/92faf489ee68dc66f678ef2a3be12602.png)

**我可能做错了什么或有什么不同？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T23:51:23.433

您必须确保在编译的代码中包含调试符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:54:26.470

当所做的更改需要重新启动服务器时，有时会发生这种情况。服务器可能无法在不重新启动的情况下获取新更改，并且该行之前没有任何可执行代码。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-29T08:54:29.143

如果你使用 Gradle，你可以试试我的脚本：[https](https://github.com/Adrninistrator/IDEA-IC-Tomcat) ://github.com/Adrninistrator/IDEA-IC-Tomcat 。这个脚本将为 Web 应用程序构建文件，创建一个 Tomcat 实例，启动 Tomcat 并加载 Web 应用程序。我在 README.md 中写了如何使用 IDEA Community Edition 调试 Tomcat。

# java - 为什么我在 slick2D Java 中移动角色时动画会模糊？

> ID：11480564
> 
> 赞同：-1
> 
> 时间：2012-07-14T02:34:41.740
> 
> 标签：java, lwjgl, slick2d

![模糊角色动画](../Images/d20643a9c23491ec6a41e30882f2bc20.png)

好的，所以^^是两个并排的精灵的图片。

左边的精灵是完成动画后的角色。

右边的精灵是作为静态图像的角色。

如您所见，由于某种原因，动画精灵的左侧是模糊的？有没有人可以解决这个问题？我试图设置过滤器，使用单个精灵而不是精灵表..等等等等......

请帮忙

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:25:24.567

最可能的问题是模糊字符处于非整数位置。如果您提到的动画将角色移动到 500.5,500.5 而不是 500,500 或 501,501，那么 slick 可能会执行某种插值以将图像移动小于一个像素，这可能会导致您看到的模糊。如果这是问题所在，您可以通过将绘图调用的参数转换为整数来解决它，如下所示：

```
image.draw((int)x,(int)y); //this may solve your problem 
```

# python - 使用 imshow 校正轴

> ID：11480568
> 
> 赞同：3
> 
> 时间：2012-07-14T02:35:11.550
> 
> 标签：python, numpy, matplotlib, scipy

我试图使用 numpy.meshgrid 和 pylab.imshow(); 起初使用我在stackoverflow上找到的一些技巧，这非常有效（谢谢！：D）

```
f = scipy.linspace(1e5,1e6,100)
A = scipy.linspace(1e3,1e5,100)
ff,AA = numpy.meshgrid(f,A)
SLP = calc_SLP2D(ff,AA)
maxAmps = maxA(f)
print maxAmps
brezovich = calc_SLP2D(f,maxAmps)
print brezovich
pylab.imshow(SLP,origin='lower')
pylab.plot(f,maxA(f))
pylab.colorbar()
pylab.xlabel('Frequency [kHz]',{'fontsize':20})
pylab.ylabel('Field Amplitude [A/m]',{'fontsize':20})
pylab.title('Brezovich Criterion',{'fontsize':20})
pylab.grid()
pylab.show() 
```

[轴不正确的轮廓图像 http://web.mit.edu/scottnla/Public/SLP_contour.pdf](http://web.mit.edu/scottnla/Public/SLP_contour.pdf)

但是，您会注意到轴是按两个输入矩阵的大小而不是实际值编号的。横坐标应该从 100,000 到 1,000,000，纵坐标从 1000 到 5000。我在 stackoverflow 上读到，解决方案是使用“extent”选项，如下所示：

```
pylab.imshow(SLP,origin='lower',extent=(ff.min(),ff.max(),AA.min(),AA.max())) 
```

这确实修复了轴，但缩放图像是一种非常奇怪的方式：

[具有正确轴但图形不正确的等高线图 http://web.mit.edu/scottnla/Public/SLP_contour2.pdf](http://web.mit.edu/scottnla/Public/SLP_contour2.pdf)

而且我不确定是什么原因造成的。

关于如何在不使图像看起来如此奇怪的情况下重新缩放轴的任何想法？

谢谢！！

内森·拉肯迈尔

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T04:45:58.523

尝试将参数添加`aspect='auto'`到`imshow`. 像这样：

```
pylab.imshow(SLP,aspect='auto',origin='lower',extent=(ff.min(),ff.max(),AA.min(),AA.max())) 
```

# c++ - htmlcxx API 使用

> ID：11480570
> 
> 赞同：5
> 
> 时间：2012-07-14T02:35:22.010
> 
> 标签：c++, html

我正在使用[htmlcxx 库](http://htmlcxx.sourceforge.net/)来读取 HTML 文件并生成具有附加内容的相同 HTML 文件。

我可以毫无问题地读取文件，但简单地发出原始 HTML 文件并不能正确包含结束标记。也就是说，当我简单地迭代并输出整个 DOM 时，不会发出结束标记。

我知道有`closingText()`一个节点接口（请参阅 参考资料`Node.h`），但我似乎无法找到一种方法来使用它来让我做我需要的事情。

以下是我转储 DOM 的方式：

```
it = dom.begin();
end = dom.end();
for (; it != end; ++it)
{
    cout << it->text();
} 
```

以上给了我：

```
<div>
    <li>
       <div>
(blank)
(blank)
(blank)
<div>
(blank) 
```

对于以下 html：

```
<div>
    <li>
        <div>
        </div>
    </li>
</div>
<div>
</div> 
```

除了修改代码我还能做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T05:23:37.327

这个库几乎没有提供任何文档，只有一*小*部分示例代码。树的操作是从[http://tree.phi-sci.com](http://tree.phi-sci.com)提取的，该站点有更多的文档，但没有太多的附加示例代码。

我看到的每个示例都使用基本的“深度优先”迭代器，它允许您使用简单的 for 循环遍历树。这似乎不是很有用，因为要序列化 ​​HTML 树，您确实需要使用递归。

我一直在研究，直到我得到了一个递归算法。这可能不是使用该库的最佳方式，但它似乎有效。

```
void walk_tree( tree<HTML::Node> const & dom )
{
    tree<HTML::Node>::iterator it = dom.begin();
    cout << it->text();
    for ( unsigned i = 0; i < dom.number_of_children(it); i++ )
    {
        walk_tree( dom.child(it, i) );
    }
    cout << it->closingText();
} 
```

正如您从我的代码中看到的那样，`text()`and`closingText()`函数将递归处理的子树中包含的任何内容括起来。

# playframework - Play 框架中的嵌套模型表单

> ID：11480575
> 
> 赞同：2
> 
> 时间：2012-07-14T02:37:59.350
> 
> 标签：playframework

我有一个模式事件 - 有一个 - > 位置，我想创建一个表单，允许我创建一个事件，同时从下拉列表中选择一个位置，或者如果该位置没有创建一个新位置存在于下拉框中。

我知道这在 Rails 中可以使用 fields_for 助手，但是在 Play 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-07-14T12:29:18.760

您应该通过[文档](http://www.playframework.org/documentation/2.0.2/Home)和包含的示例（即计算机数据库）来了解基本的可能性。Play 只是编程语言的助手，所以是的，一切皆有可能。

检查提到的文档和示例以了解使用表单、模型等的基础知识。

# google-drive-api - 将文件插入 Google Drive 时出现 IOException

> ID：11480578
> 
> 赞同：2
> 
> 时间：2012-07-14T02:38:40.643
> 
> 标签：google-drive-api

将图像发布到谷歌驱动器时遇到以下问题：

```
java.io.IOException: insufficient data written
at sun.net.www.protocol.http.HttpURLConnection$StreamingOutputStream.close(HttpURLConnection.java:2822)
at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:83)
at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:895)
at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:280)
at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:309)
at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331) 
```

我相信它与此有关：[http ://code.google.com/p/google-api-java-client/issues/detail?id=521](http://code.google.com/p/google-api-java-client/issues/detail?id=521)

有没有办法绕过这个？我想知道是否可以在不使用谷歌驱动器 sdk 的可恢复上传 api 的情况下插入文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:48:04.820

我相信我回答了我自己关于如何直接上传的问题：

```
Insert insert = this.driveClient.files().insert(body, mediaContent);
insert.getMediaHttpUploader().setDirectUploadEnabled(true);
File result = insert.execute(); 
```

但是，仍然不确定数据写入不足错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T05:50:59.417

使用 setDirectUploadEnabled(false) 选项，insert.execute() 立即开始上传第一个块，我的意思是在获得最小块大小之前。您必须完成 request.getPart("fleInputName") 然后开始驱动器上传过程。

我用这样的阻塞线程解决了这个问题：

```
public class GetPartThread  extends Thread {

        private HttpServletRequest request;
        private String inputAttr;

        private Part part;

        public GetPartThread(HttpServletRequest request, String inputAttr) {
            super();
            this.request = request;
            this.inputAttr = inputAttr;
        }

        @Override
        public void run(){
                synchronized(this){
                    try {
                        part = request.getPart(inputAttr);
                        notify();

                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
        }

        public Part getPart() {
            return part;
        }

        public void setPart(Part part) {
            this.part = part;
        } 
```

然后将它与您的驱动器上传方法一起使用：

```
GetPartThread getPart = new GetPartThread(request, "templatefile");
getPart.start();
synchronized(getPart){
try{
    System.out.println("Waiting for Part upload to complete...");
    getPart.wait();
}catch(InterruptedException e){
    e.printStackTrace();
}
System.out.println("Part upload Finished...");

Part part = getPart.getPart();

//Here continue with processing your "part" and upload it to drive with the method you set for uploading to drive ... } 
```

这应该有效。

注意：在使用 Drive Resumable Media Uploads 时不要使用 setConvert(true) 这将引发异常，因为转换开始于上传到驱动器的第一个块，而不是在上传完成后。

# java - 如何使用整数调用方法

> ID：11480584
> 
> 赞同：0
> 
> 时间：2012-07-14T02:40:13.850
> 
> 标签：java, eclipse

```
public static int displayResult(int num1, int num2){
        return num1 * num2;
    }
public static void main(String args[]){
        displayResult(int num1, int num2);
    } 
```

当我尝试运行我的 Eclipse 时，它​​显示一个错误，即“类型方法中的方法 displayResult(int,int) 不适用于参数”。任何人都可以向我解释它是如何工作的？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T02:43:57.930

您需要先定义`num1`and`num2`才能使用它们。

```
public static void main(String args[]){
    int num1 = 3;
    int num2 = -4;
    displayResult(num1, num2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:44:44.683

当您调用`displayResult`时`main`，您需要实际传递它的*值*，而不是重复参数的类型和名称。例如：

```
public static void main(String[] args){
    displayResult(2, 3);
} 
```

这应该可以，但它仍然不会做任何事情；`displayResult`返回结果，但它不打印它或用它做任何其他事情。您可能想要打印它，可能使用`System.out.println`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T02:45:31.610

您需要在 main 的 displayResult() 中传递实际数值。所以把它改成类似 displayResult(1, 5); 它是说它不喜欢参数 (int num1, and int num2) 因为它期望 (int, int) 像 (1, 5) 一样传入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T02:45:50.933

你想用这个来完成什么？您需要将整数值传递给参数，您的调用不会这样做。整数未初始化。以下示例将编译：

```
public static int displayResult(int num1, int num2){
    return num1 * num2;
}
public static void main(String args[]){
    displayResult(1, 1);
} 
```

或者...

```
public static int displayResult(int num1, int num2){
    return num1 * num2;
}
public static void main(String args[]){
    int num1 = 1;
    int num2 = 1;
    displayResult(num1, num2);
} 
```

ETC...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T02:45:51.593

当您编写以下内容时

```
public static int displayResult(int num1, int num2){
    return num1 * num2;
} 
```

您基本上是在定义方法并指定参数类型。

但是，调用该方法的过程如下

```
displayResult(4,5); 
```

请注意，我也可以传递变量。重要的一点是我们没有给出参数的类型

# python - python或bash代码将子文件夹内容清空到主文件夹并删除空子文件夹

> ID：11480589
> 
> 赞同：0
> 
> 时间：2012-07-14T02:41:11.470
> 
> 标签：python, bash, shell

在我的音乐目录中，我有每个艺术家和专辑的子文件夹。我想制作一个自动化脚本，进入每个子文件夹并将所有内容剪切并粘贴到我的主音乐目录中。脚本移动音乐后，我希望它删除空的子文件夹。python 或 shell 脚本中的某些东西会很棒。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T02:44:07.303

该`find`命令将列出指定目录的子目录中的所有文件。所以：

```
find . -type f 
```

这将产生一个文件名列表。要将所有这些文件移动到当前目录，

```
mv `find . -type f` . 
```

最后，递归删除任何空子目录，

```
find . -type d | xargs rmdir 
```

如果您的任何文件或目录名称中包含空格，那么事情会变得更加……有趣。但如果是这种情况，您可以将上述内容作为起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T11:48:27.163

```
#!/bin/bash
cd ~/music    # wherever your music directory is
mv */* .
rmdir * 2>/dev/null 
```

# arrays - 在任一侧重新排列阵列正负

> ID：11480592
> 
> 赞同：0
> 
> 时间：2012-07-14T02:42:06.713
> 
> 标签：arrays, algorithm

给定一组正整数和负整数，将一侧的所有正整数和一侧的负整数分组。这些数字应该与它们出现的顺序相同。

例子：

数组 = {1, -3, -5, 9, -8}

O/P = {-3, -5, -8, 1, 9}

我不认为使用额外空间对这个问题具有挑战性，因为您可以简单地循环并填充新数组。挑战是在不使用额外空间的情况下做到这一点。这个问题是我朋友问的。

（我正在考虑用 2 个指针解决它并交换正负等，但很快元素的相对顺序似乎就搞砸了）

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:48:36.093

这感觉像是作业，所以我会给你一个提示。

应用[稳定排序](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)。

> 稳定的排序算法保持具有相同键的记录的相对顺序。

作为你的平等测试，不要使用数字的实际值。相反，考虑任何正数等于任何其他正数，任何负数等于任何其他负数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-12-26T11:09:36.927

这可以是 O(n)。下面是python中的示例代码。在快速排序中使用 Pivot 可以解决问题。解决方案看起来像这样 -

```
def one_side_arrange(self, arr):
    i = -1
    for j in range(len(arr)):
        if (arr[j] < 0):
            i += 1
            arr[i], arr[j] = arr[j], arr[i]
    return arr 
```

输入 Arr = [1,2,3,-1,2,-3,3,4,-3,-5] 输出 = [-1, -3, -3, -5, 2, 2, 3, 4 , 3, 1]

# php - 获取 Facebook 好友的性别

> ID：11480593
> 
> 赞同：0
> 
> 时间：2012-07-14T02:42:25.183
> 
> 标签：php, facebook, facebook-fql

以下代码为我提供了朋友的 ID。我想做的是得到朋友的性别，但没有任何成功。我可以使用生成的 ID 运行另一个循环，但效率不会那么高。是否有一个查询会给出朋友的姓名和性别。该应用程序的权限是friends_about_me。这个权限是否足以获得朋友的性别？

```
 <?php
      $app_id = '******';
      $app_secret = '*****';
      $my_url = 'http://apps.facebook.com/****/';

      $code = $_REQUEST["code"];

     //auth user
     if(empty($code)) {
        $dialog_url = 'https://www.facebook.com/dialog/oauth?client_id=' 
        . $app_id . '&redirect_uri=' . urlencode($my_url) ;
        echo("<script>top.location.href='" . $dialog_url . "'</script>");
      }

      //get user access_token
      $token_url = 'https://graph.facebook.com/oauth/access_token?client_id='
        . $app_id . '&redirect_uri=' . urlencode($my_url) 
        . '&client_secret=' . $app_secret 
        . '&code=' . $code;
      $access_token = file_get_contents($token_url);

      // Run fql query
      $fql_query_url = 'https://graph.facebook.com/'
        . '/fql?q=SELECT+uid2+FROM+friend+WHERE+uid1=me()'
        . '&' . $access_token;
      $fql_query_result = file_get_contents($fql_query_url);
      $fql_query_obj = json_decode($fql_query_result, true);

    echo $fql_query_result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:00:19.477

您只需要一个 FQL 查询即可获取用户朋友的性别信息：

```
SELECT uid, name, sex FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

这改编自[Facebook Developers FQL 主页](http://developers.facebook.com/docs/reference/fql/)上的示例。

请注意，并非所有用户都会公布性别，因此在编写代码时应考虑到这一点。

# ruby - bundle install 为 # 提供了未定义的方法 `ruby'

> ID：11480598
> 
> 赞同：10
> 
> 时间：2012-07-14T02:43:37.633
> 
> 标签：ruby, bundler

`bundle install`正在给：

```
> undefined method `ruby' for #<Bundler::Dsl:0x00000001c4e1f8> 
```

知道如何解决吗？我正在使用 Ruby 1.9.3-p125。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-15T02:27:36.367

[Gembundler](http://gembundler.com/) 1.2 版向 dsl引入了一种[`ruby`方法](http://gembundler.com/v1.2/gemfile_ruby.html)，允许您指定应用程序应使用的 Ruby 版本。

您使用的似乎`Gemfile`是为这个新版本编写的，但您拥有的捆绑器版本不支持该`ruby`方法。您需要安装最新的捆绑程序（`gem install bundler`应该这样做）或从`Gemfile`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-21T10:04:10.843

运行这些命令问题将解决

步骤 1：安装捆绑器 **gem install bundler**
步骤 2：**捆绑安装**

它将解决问题..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T04:30:41.533

您正在调用`ruby 'something or other'`您的 Gemfile。

这个单行应该为您找到有问题的行（注意，您需要与 Gemfile 位于同一目录中，并且 ca$h 表示提示 - 在您的系统上这可能是`>`）

```
$ ruby -ne 'print "(line #$.) #$_" if /^\s*ruby/' Gemfile 
```

在不理解您为什么这样做的情况下，我无法告诉您应该做什么，但是没有任何`ruby`方法可以作为 bundler 的 DSL 的一部分。

[您可以在此处](https://github.com/carlhuda/bundler/blob/fa28ae9f3c1b8364547ac9b5dc76937923e202fb/lib/bundler/dsl.rb)查看 DSL 代码。

[您可以在此处](http://gembundler.com/)查看 Bundler 的文档，并在[此处](http://gembundler.com/man/gemfile.5.html)查看 Gemfiles 的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T03:09:44.317

您可能使用的是过时版本的捆绑程序

您可以检查您正在使用的捆绑程序的版本

```
bundle --version 
```

如果它早于 1.2 版，则根据[matt 的回答](https://stackoverflow.com/a/11488907/38765)，它可能已经过时了。

就我而言，我已经完成了`gem install bundler`，但忘记了`rbenv rehash`（我使用 rbenv），因此它不是使用我刚刚安装的捆绑程序，而是使用旧的、过时的版本。

# python - Tkinter 连续检查文本

> ID：11480610
> 
> 赞同：0
> 
> 时间：2012-07-14T02:45:44.823
> 
> 标签：python, loops, tkinter

我有一个使用 Tkinter 设置的简单界面。我有一个无关紧要的下拉框。我还有两个条目小部件框。我想要发生的是第二个初始化为禁用，但只要在第一个框中输入任何文本，我希望第二个变为活动状态。出于某种原因，在第一个框中输入文本时，我的第二个框没有激活。任何帮助都会很棒。谢谢！

```
from Tkinter import *
import tkMessageBox
import os

if __name__ == "__main__":

    root = Tk()
    root.title("ShotBot")
    root["padx"] = 40
    root["pady"] = 20
    root.geometry('500x200-400+200')
    root.resizable(FALSE,FALSE)

    textFrame = Frame(root)

    #Create and place Option List

    var=StringVar()
    choices = ['a','b','c']    
    var.set(choices[0])
    entryWidget = OptionMenu(root, var, *choices)
    entryWidget["width"] = 30
    entryWidget.pack(side="top")

    #Create and Place Text Field

    entryWidget2= Entry(textFrame)
    entryWidget2["width"] = 30
    entryWidget2.pack(side="top")

    #Create and Place Text Field

    entryWidget3 = Entry(textFrame)
    entryWidget3["width"] = 30
    entryWidget3.pack(side="top")

    textFrame.pack()

    button = Button(root, text="Submit")
    button.pack()

    if entryWidget2.get().strip()=="":
        entryWidget3["state"]=DISABLED
    else:
        entryWidget3["state"]=NORMAL

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:20:23.270

最简单的做法是为第一个条目小部件的选项分配一个值，`textvariable`在变量上放置一个跟踪，然后根据变量的当前值启用或禁用另一个小部件。像这样的东西：

```
#Create and Place Text Field

def on_variable_trace(*args):
    if entryVariable2.get() == "":
        entryWidget3.configure(state="disable")
    else:
        entryWidget3.configure(state="normal")

entryVariable2 = StringVar()
entryWidget2= Entry(textFrame, textvariable=entryVariable2)
entryWidget2["width"] = 30
entryWidget2.pack(side="top")
entryVariable2.trace("w", on_variable_trace) 
```

# perl - 调试 Perl 程序：哈希、写入和访问文件句柄

> ID：11480615
> 
> 赞同：1
> 
> 时间：2012-07-14T02:46:40.000
> 
> 标签：perl, debugging, hash, bioinformatics, filehandle

我正在从事一个生物信息学项目，该项目涉及将不同的脚本和输入参数连接在一起，以分析下一代测序 Illumina 数据。我需要帮助调试第一个脚本。它的任务是解析 qseq 文件，将“好”样本转换为 fastq 格式，并将输出保存到临时 txt 文件（到磁盘）。

出于调试目的，管道方案如下所示：

```
# the input parameters are "fed" into the script and the output is written
# to tmp.txt
script01.pl [input parameters] > tmp.txt 
```

我在终端中键入此命令，然后查看 tmp.txt 文件以检查脚本是否输出预期结果。但是对于整个项目，我有一个称为包装脚本的东西，它将所有脚本连接在一起。Script01 会将 end1 和 end2 数据的输出保存到 tmp 文件中，因为它们需要分别由脚本 02-06 处理。

这是代码。我添加了描述性评论，以便您了解发生了什么。另外，我没有 qseq 文件向您展示，只是假设我正在正确解析字段：

```
#!/usr/bin/perl
use strict; use warnings;

my $end1_temp=shift; # this variable is the location of the temporary file
my $end2_temp=shift; # this variable is the location of the temporary file
my $qseq_file=shift;
my $barcode=shift;

# declare and initialize variables
my $overhang= 'C[AT]GC';
my $end1_trim_offset= length($barcode)+4;
my $end2_trim_offset= 4; 

my %to_keep=(); # an empty hash
my @line=();    # an empty array

# open the qseq file, or exit
open (QSEQ_1_FILE, $qseq_file) or die "couldn't open $qseq_file for read\n";

# also, open (for output) the end1 temp file, so we can write to it while
# we process the end1 input file above
(open END_1_FILEOUT,">$end1_temp") or die "couldn't open $end1_temp for write\n";

# reads each line of the qseq data file one at a time. 
# assume each sample is kept on a separate line
while(<QSEQ_1_FILE>){
chomp; @line=split; # index and formats the qseq fields for parsing

# skip samples those that didn't pass QC
$line[10]>0 or next;

# process the samples here. look at only the samples that pass the quality 
# control and whose sequences contain the barcode+overhang at the beginning
# of the string, otherwise skip to the next sample in the data file 
# (i.e start the next iteration of the loop)

# trim the barcode+overhang from seq and qual
$line[8]= substr($line[8], $end1_trim_offset); #sequence
$line[9]= substr($line[9], $end1_trim_offset); #quality

# unique sequence identifier. don't worry about what $line[1-6] represent
# just know that $identifier is unique for each of the 'good' samples
my $identifier = $line[0].'-'.$line[1].'-'.$line[2].'_'.$line[3].'-'.$line[4].'-'.$line[5].'_#'.$line[6];

# store the identifiers of the 'good' samples in a hash.
# the hash should contain the identifier as the key and numbers (1,2,3,etc.)
# as the values. the following increments the hash values for each identifier.
$to_keep{$identifier}++;

# the following below is suppose to write information to the filehandle in fastq format:
# @[the identifier]/1
# sequence [ATGCAGTAAT...]
# +[the identifier]/1
# quality [ASCII characters]

print END_1_FILEOUT '@' . "$identifier/1\n$line[8]\n" . '+' . identifier/1\n$line[9]\n";

}
print "Found " . int(keys %to_keep) . " reads from end1\n";
# close the filehandles
close QSEQ_FILE; close END_1_FILEOUT; 
```

此时，我有一个仅包含“好”序列标识符的哈希，并将 fastq 数据写入存储位置。Script01 假设将 fastq 输出保存到磁盘上的临时文件中。

`$end1_temp = '~/tmp/sampleD1_end1.fq'`和`end2_temp = '~/tmp/sampleD1_end2.fq'`

问题：`print END_1_FILE`上面的行是将 fastq 数据写入文件句柄还是写入 $end1_temp 变量？我问是因为我需要将 $end1_temp 和 $end2_temp 变量传递给 script02。另外，为了调试，我如何查看 script01 的 fastq 输出？

这是我需要帮助的其余代码。它在同一个脚本上，直接遵循上面的代码：

```
# if the sequence is paired (has both end1 and end2 data), then the qseq_2 file exists and the conditions evaluates to true
if ($end2_temp) {
# changes the qseq filename from file name from end1 to end2 data
# don't worry about why it works
$qseq_file=~ s/'_1_'/'_2_'/;

open (QSEQ_2_FILE, $qseq_file) or die "could not open $qseq_file for read\n";

# open (for output) the end2 temp file, so we can write to it while we process
# the end2 input file above
open (END_2_FILEOUT, ">$end2_temp") or die "could not open $end2_temp for write\n";

# reads each line of the end2 file one at a time
while(<QSEQ_2_FILE>){
# skip comments
/^\#/ and next;

chomp; #keep the qseq fields on one line.
my @line= split; #indexes the qseq fields.

# unique sequence identifier that preserves the sequencing information
# in other words, samples from end1 and end2 will have the same unique
# identifier because they contain the exact same fields in columns 0-6 
# or $line[0-6]. also end1 and end2 have the same number of samples
my $identifier = $line[0] .'-'.$line[1].'-'.$line[2].'_'.$line[3].'-'.$line[4].'-'.$line[5].'_#'.$line[6];

# recall the %to_keep hash which stored the identifiers of the 'good' samples; 
# it was inside the QSEQ_1_FILE loop
# here I only want the end2 samples whose identifiers match the identifiers
# from the end1 samples
# skip sample where end1 didn't pass; does this work??
# the condition is suppose to evaluate to false if the identifiers don't match
$to_keep{$identifier} or next;

# trim the barcode+overhang from seq and qual
$line[8]=substr($line[8], $end2_trim_offset);  # sequence
$line[9]=substr($line[9], $end2_trim_offset);  # quality

print END_2_FILEOUT '@' . "$identifier/2\n$line[8]\n" . '+' . "$identifier/2\n$line[9]\n";

}

close QSEQ_2_FILE; close END_2_FILEOUT;

} 
```

脚本01到此结束。此时，我应该已经将 end1 和 end2 的“好”样本的 fastq 数据写入单独的存储位置。Script01 假设将 fastq 输出保存到磁盘上的两个临时文件中。我想我的问题是出于调试目的，如何查看 script01 创建的 tmp 文件？

最后，当我`script01.pl [input parameters] > tmp.txt`在 Linux 终端中输入命令时，它会将 script01 的输出保存到 tmp.txt。“Found X reads from end1”是脚本在处理 end1 读取后打印的内容，其中 X 是 %to_keep 哈希中的读取次数。

当我查看 tmp.txt 时，它显示`Found 0 reads from end1.`因为它打印 0，这意味着哈希中没有存储任何内容。假设从 end1 存储大约 630 万条读数。有人可以帮我弄清楚为什么没有读取存储在哈希中吗？

我认为问题在于没有一个读取通过了我用来决定它们是否应该存储在哈希中的标准。另一个问题可能与我存储标识符的方式有关。

你们可以看看它，看看有没有我可能错过的东西？

谢谢。非常感谢对我的问题的任何建议或答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:20:39.880

> 问题：上面的 print END_1_FILE 行是将 fastq 数据写入文件句柄还是写入 $end1_temp 变量？

我假设你的意思是`END_1_FILEOUT`。这是一个文件的可写文件句柄，其名称存储在`$end1_temp`. 数据将被发送到文件中。

> 另外，为了调试，我如何查看 script01 的 fastq 输出？

你查看文件。根据您的问题，我认为该文件称为`~/tmp/sampleD1_end1.fq`. 你应该进去看看。

> Script01 假设将 fastq 输出保存到磁盘上的两个临时文件中。我想我的问题是出于调试目的，如何查看 script01 创建的 tmp 文件？

和以前一样，输出应该在名称为`$end1_temp`and的文件中`$end2_temp`，大概是`~/tmp/sampleD1_end1.fq`and `~/tmp/sampleD1_end2.fq`。用您的编辑器打开它们并查看。

> 最后，当我在 Linux 终端中输入命令 script01.pl [输入参数] > tmp.txt 时，它将 script01 的输出保存到 tmp.txt。当我查看 tmp.txt 时，它显示“Found 0 reads from end1”。由于它打印 0，这意味着哈希中没有存储任何内容。假设从 end1 存储大约 630 万条读数。有人可以帮我弄清楚为什么没有读取存储在哈希中吗？

这是基本调试。从您的代码中可以清楚地看出，您正在读取的 QSeq 文件是空的，或者您的测试`$line[10] > 0 or next`正在丢弃每条记录。`print`通过在 之后直接添加诊断语句`split`来显示 的值，这两种方法都很容易检查`$line[10]`。我敢打赌，您正在寻找错误的领域。

除此之外，你真的应该缩进你的代码。这将有助于我们比广泛的评论更好地理解它。还，

```
$line[10] > 0 or next 
```

最好写成

```
next unless $line[10] > 0 
```

`open`你应该使用词法文件句柄的三参数形式。

这是您的代码的整理版本，其中包含这些改进以及其他一些改进

```
use strict;
use warnings;

die qq(Insufficient arguments "@ARGV") unless @ARGV >= 4;

my ($end1_temp, $end2_temp, $qseq1_file, $barcode) = @ARGV;

my $overhang         = 'C[AT]GC';
my $end1_trim_offset = length($barcode) + 4;
my $end2_trim_offset = 4;

my $idformat = '%s-%s-%s_%s-%s-%s_#%s';

my %to_keep;

open my $qsec1, '<', $qseq1_file
    or die "couldn't open $qseq1_file for read\n";

open my $end1, '>', $end1_temp
    or die "couldn't open $end1_temp for write\n";

while (<$qsec1>) {

  my @line = split;
  next unless $line[10] > 0;

  $_ = substr($_, $end1_trim_offset) for @line[8,9];

  my $identifier = sprintf $idformat, @line;
  $to_keep{$identifier}++;

  print $end1
      '@' . "$identifier/1\n" .
      "$line[8]\n" .
      '+' . "$identifier/1\n" .
      "$line[9]\n";
}

close $qsec1;
close $end1;

printf "Found %d reads from end1\n", int keys %to_keep;

exit unless $end2_temp;

$qseq1_file =~ s/'_1_'/'_2_'/;

open my $qseq2, '<', $qseq1_file
    or die "could not open $qseq1_file for read\n";

open my $end2, '>', $end2_temp
    or die "could not open $end2_temp for write\n";

while (<$qseq2>) {

  next if /^#/;
  my @line = split;

  my $identifier = sprintf $idformat, @line;
  next unless $to_keep{$identifier};

  $_ = substr($_, $end2_trim_offset) for @line[8,9];

  print $end2
      '@' . "$identifier/2\n" .
      "$line[8]\n" .
      '+' . "$identifier/2\n" .
      "$line[9]\n";
}

close $qseq2;
close $end2; 
```

# php - 正则表达式删除部分字符串

> ID：11480616
> 
> 赞同：0
> 
> 时间：2012-07-14T02:47:14.137
> 
> 标签：php, regex

我正在尝试将整数插入表单。要求用户输入格式为 12.2-9999 的促销编号。我只想将 9999 插入数据库的列中，但我在列中得到 -9999。我不确定我是否应该在这里使用 preg_replace 或其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T02:52:19.250

只需使用[`explode()`](http://php.net/explode)，就像这样：

```
list( , $promo) = explode( '-', '12.2-9999'); 
```

现在`$promo`将包含`9999`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T02:52:17.657

以下正则表达式将检查最后一个`-`并捕获最后的数字（根据示例是`9999`）：

```
/-(\d+)$/ 
```

# python - 在 Python 中，如何在给定日期设置提醒？

> ID：11480622
> 
> 赞同：0
> 
> 时间：2012-07-14T02:49:28.210
> 
> 标签：python, date, time

我正在用 Python 编写一个用于启动其他程序的程序，但我想添加一个功能，例如，如果该程序在星期三使用，它可能会说“接孩子”或类似的提醒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:52:27.563

您可以使用[内置`time`模块](http://docs.python.org/library/time.html)来获取一周中的当前日期。

```
>>> import time
>>> time.localtime().tm_wday
5 
```

5 表示这里是星期六。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:39:42.867

请参阅[datetime.date](http://docs.python.org/library/datetime.html#datetime.date)以了解时间和时区无关紧要的日期。

为了可读性，我会使用：

```
import datetime

if datetime.date.today().strftime('%A') == 'Wednesday':
    print("Pick up the kids!") 
```

# android - Android 数据库操作的执行时间变化

> ID：11480625
> 
> 赞同：3
> 
> 时间：2012-07-13T23:21:40.787
> 
> 标签：android, database, execution-time

我正在测量打开和关闭数据库以及在其上执行查询和插入的方法的执行时间。对于这四个操作中的每一个，我基本上都会得到执行相关语句之前和之后的时间，如下所示：

```
for(int i = 0; i < 500; i++) {
    startTime = System.nanoTime();
    long insertResult = db.insert(tableName, null, contentValues);
    endTime = System.nanoTime();
    if(insertResult > -1) {
        generateNoteOnSD(fileName, (endTime - startTime));
    }
} 
```

在插入的情况下：

*   示例中的最短执行时间为 13 ms（毫秒）
*   示例中的最大执行时间为 537 ms
*   超过 50% 的结果集（来自 500 的 259 次“插入”执行）在 15 到 20 毫秒之间。
*   高于 20 ms 的值具有非常低的频率（1、2 或 3）。

有人可以给我一个关于系统如何执行此类操作的想法/方向吗？我真的不知道持久存储的写入操作是如何完成的，以及它取决于哪些因素。我想知道这一点以试图解释上述测量（为什么同一操作的执行时间会发生变化）。

非常感谢任何帮助。

奥克塔维奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T22:34:33.790

我将假设这是一个常规表，而不是临时表。

让我们从这里最大的性能猪开始。

默认情况下，每个这样的插入都会开始和结束一个新事务。如果您想大大加快速度，请申请

```
db.beginTransaction(); 
```

在你的循环之前，和

```
db.setTransactionSuccessful();
db.endTransaction; 
```

循环之后。这会将所有插入放在同一个事务中。一定要测量`db.endTransaction`一些总花费的时间将移动的时间。当您没有手动调用这些操作时，每个操作`db.insert`都隐含地包含在这些操作中，这称为*隐式事务*。

虽然交易协议本身很复杂，并且会造成一些性能差异，但细粒度的交易会导致硬件速度的差异。事务需要是持久的，因此它们需要*写入*闪存（写入甚至比读取还要慢，并且每个事务需要多次写入）。相比之下，“一个长事务”写入易失性内存，即使在提交期间数据也需要进入闪存，您只需要写入的一小部分。如果您的行很窄，这种效果会更明显，因为更多的行将适合闪存块并一次写入。

就读取而言，事务在这里的作用较小。这很容易。如果您的应用程序在易失性 RAM 中很热，则所有数据都从那里传输。如果不是，则数据来自闪存。

您的数据激增很可能是由于与数据库竞争的无关后台进程。只有当这些应用程序进行密集计算时才会发生这种情况。如果其中一些进程访问同一个数据库，您也可能会遇到锁争用；即使这些进程正在等待其他东西，这也是可能的。这也可以解释为什么它们的分布如此不规则。这不是唯一的可能性。

[对于 SQLite 中使用的算法的一般概述，查看这](http://library.developer.nokia.com/index.jsp?topic=/S60_5th_Edition_Cpp_Developers_Library/GUID-35228542-8C95-4849-A73F-2B4F082F0C44/sdk/doc_source/guide/System-Libraries-subsystem-guide/SQL/SQlHowToMakeEfficientUseOf.guide.html)本书可能很有用，尽管它是为竞争操作系统编写的。

# c++ - 访问嵌套类中变量的值

> ID：11480627
> 
> 赞同：1
> 
> 时间：2012-07-14T02:50:49.567
> 
> 标签：c++, class, nested

头文件：

```
class A
{
public:        
    void setNumber(unsigned );
    void changeNumber();  
    unsigned result;

    class B
    {
    public:
        void setResult();
        unsigned valorB;
    };

private:                           
    static unsigned number; 
}; 
```

实现文件：

```
void A::setNumber(unsigned value)
{
    number = value;
}

void A::changeNumber()
{
    result = number * 5 + 10;
}

void A::B::setResult()
{
    valorB = number + 5;
} 
```

如何访问内部类中的变量？我知道如何访问 A 的变量，但我不知道如何访问 B 的变量。

我想访问“valorB”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:00:45.600

*声明*一个类是不够的，你需要一个类的*实例*`B`来访问它的变量。例如，您可以向 class 添加成员变量的声明`A`，如下所示：

```
class B
{
public:
    void setResult();
    unsigned valorB;
};
B memberB; 
```

现在您可以`valorB`像这样访问：

```
A a;
a.memberB.valorB = 3; 
```

您的代码中的另一个问题是缺少声明的静态变量的*定义*`number`。您需要将此添加到您的 CPP：

```
unsigned A::number; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T03:02:32.117

根据您收到的错误消息，

```
undefined reference to A::number 
```

问题与`valorB`. 问题是您没有提供`A::number`. 添加到您的`.cpp`文件中：

```
unsigned A::number; 
```

# c# - 将文本框中的用户输入显示到标签中

> ID：11480628
> 
> 赞同：0
> 
> 时间：2012-07-14T02:51:07.797
> 
> 标签：c#, textbox, labels

我在这里有一个大项目，我正在非常缓慢地进行。

这个项目在 C# 中的主要目标是通过 Visual Studio 2010 用于 Windows 主窗体程序，它允许用户在文本框中输入一年。当用户按下回车键时，电影列表将出现在两个单独的列表框中；这些电影按用户输入的年份排序。第一个列表框将显示低于用户输入年份的电影列表，第二个列表框将显示等于或大于用户输入年份的电影列表。列表框上方还将有两个标签，用于显示用户输入的年份（以及其他字词）。

这是我现在遇到的第一个问题；如何让用户在文本框中输入的数据出现在两个单独的标签中？对此的任何和所有回应将不胜感激。

现在我只有从表单上的控件编写的编码的基本外壳；到目前为止，这是我要开始的：

```
namespace MovieFinders2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void label1_Click(object sender, EventArgs e)
        {
            //Named "Enter a Year"
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }

        private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void label2_Click(object sender, EventArgs e)
        {

        }

        private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void label3_Click(object sender, EventArgs e)
        {

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:57:39.783

由于这是家庭作业，因此我将提供轻推而不是解决方案。

大概您的代码中没有显示两个标签。我将指定它们`label1`和`label2`.

当文本框中的文本发生更改时，将触发您在代码中显示的事件处理程序

```
textBox1_TextChanged 
```

您可以使用两个标签中的每一个的 Text 属性来设置标签的文本，具体取决于`textBox1`触发 TextChanged 事件时的内容。一般形式是

```
labelSome = "Some Text Here"; 
```

请注意，尽管以相同的方式填充列表框会导致令人困惑的行为。如果我想输入 2001，TextChanged 事件将触发四次，每个`2` `0` `0` `1`. 实际文本将分别为, `2`, `20`, 。如果您开始更新每个事件的列表框，第一个事件将让您将电影划分为第 2 年之前和之后的电影。依此类推。`200``2001`

更好的用户界面是提供一个搜索按钮，该按钮既填充列表框又更新标签文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T02:59:40.423

您应该能够访问后面代码中的控件。Intellisense 通常会在您键入控件时列出它们并使任务变得非常简单：

```
 private void textBox1_TextChanged(object sender, EventArgs e)
 {
     Label1.Text = textBox1.Text;
     Label2.Text = textBox1.Text;
 } 
```

注意：这可能不应该是您的最终代码。从阅读您的要求来看，似乎标签不应在文本框更改时更新，而应在*另一个*事件期间更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T03:27:49.560

根据您对 DanT 的评论。您可以尝试将 String.Format 与[复合格式一起使用](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)

来自链接：

> 复合格式字符串和对象列表用作支持复合格式功能的方法的参数。复合格式字符串由零个或多个固定文本与一个或多个格式项混合而成。固定文本是您选择的任何字符串，每个格式项对应于列表中的一个对象或盒装结构。复合格式化功能返回一个新的结果字符串，其中每个格式项都替换为列表中相应对象的字符串表示形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T04:34:36.840

尝试这个：

```
textBox.TextChanged += (sender, e) =>
    {
        label2.Text = label1.Text = ((TextBox)sender).Text;
    }; 
```

# php - 从 Windows 32 位移动到 Linux 64 位，base_convert() 问题

> ID：11480635
> 
> 赞同：0
> 
> 时间：2012-07-14T02:52:37.970
> 
> 标签：php, centos, lamp

我正在使用 32 位 php 在 Windows 64 位上工作。使用 base_convert 在我使用 64 位 php 迁移到 Centos 64 位后，会返回不同的结果。例如：

```
<?php
    $input = 'f00706ff';
    $result  = (int)base_convert($input,16,10);
    echo $result;
?> 
```

在 Win64 PHP32 -> 2147483647 上；

在 CentOS64 PHP64 -> 4026992383；

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:55:26.460

您的 Windows 值是错误的，因为您的十六进制值超出了 32 位整数的范围（2147483647 是有符号整数以 10 为底的最大值）并且您正在运行 PHP 的 32 位版本。Linux结果是正确的:)

另请注意，如果您想在 Windows 上正确执行操作，您可以像这样使用 GNU 多精度库：`$result = gmp_strval( gmp_init('f00706ff', 16), 10 );`尽管在 PHP 中使用您在 32 位平台上的大小的整数似乎是至少可以说是不愉快的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:10:24.407

找到了解决方案。

```
<?php
    $input = 'f00706ff';
    $result  = (int)base_convert($input,16,10);
    if($result > 2147483647) $result = 2147483647;
    echo $result;
?> 
```

其中 2147483647 = PHP_INT_MAX in 32 BIT

# php - PHP 中的 CSS 帧生成器

> ID：11480638
> 
> 赞同：4
> 
> 时间：2012-07-14T02:53:57.237
> 
> 标签：php, html, css, generator

我想构建类似于[CSS Generator](http://lab.xms.pl/css-generator/)的东西。这是我到目前为止所做的工作：

```
<?php
header('Content-type: text/plain');
$source = '<body class="theme">
    <div class="header">
        <h1><a href="#">Welcome</a></h1>
    </div>
    <div class="content">
        <div class="sidebar">
            <ul>
                <li><a href="#">Link 1</a></li>
                <li><a href="#">Link 2</a></li>
                <li><a href="#">Link 3</a></li>
                <li><a href="#">Link 4</a></li>
                <li><a href="#">Link 5</a></li>
            </ul>
        </div>
        <div class="main">
            <h2>Main Heading</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
        </div>
    </div>
    <div class="footer">
        <p>Copyright &copy; 2012 Me!</p>
    </div>
</body>';
$html = new DOMDocument;
$html->loadHTML($source);
$nodes = $html->getElementsByTagName("*");
$css = "";
for ($i = 0; $i < $nodes->length; $i++) {
    $node = $nodes->item($i);
    if(!$node->hasAttribute("class") && !$node->hasAttribute("id"))
        $css = $css . str_replace(array("/"), array(" "), $node->getNodePath()) . " {}\n";
    if ($node->hasAttribute("class")) {
        $css = $css . $node->nodeName . "." . $node->getAttribute("class") . " {}\n";
    } elseif ($node->hasAttribute("id")) {
        $css = $css . "#" . $node->getAttribute("id") . " {}\n";
    }
}
echo $css;
?> 
```

我得到的输出不是正确的。所需的输出是：

```
body.theme div.header {}
body.theme div.header h1 {}
body.theme div.header h1 a {}
body.theme div.content {}
body.theme div.content div.sidebar {}
body.theme div.content div.sidebar ul {}
body.theme div.content div.sidebar ul li {}
body.theme div.content div.sidebar ul li a {}
body.theme div.content div.main {}
body.theme div.content div.main h2 {}
body.theme div.content div.main p {}
body.theme div.footer {}
body.theme div.footer p {} 
```

但现在我得到的是：

```
 html {}
body.theme {}
div.header {}
 html body div[1] h1 {}
 html body div[1] h1 a {}
div.content {}
div.sidebar {}
 html body div[2] div[1] ul {}
 html body div[2] div[1] ul li[1] {}
 html body div[2] div[1] ul li[1] a {}
 html body div[2] div[1] ul li[2] {}
 html body div[2] div[1] ul li[2] a {}
 html body div[2] div[1] ul li[3] {}
 html body div[2] div[1] ul li[3] a {}
 html body div[2] div[1] ul li[4] {}
 html body div[2] div[1] ul li[4] a {}
 html body div[2] div[1] ul li[5] {}
 html body div[2] div[1] ul li[5] a {}
div.main {}
 html body div[2] div[2] h2 {}
 html body div[2] div[2] p {}
div.footer {}
 html body div[3] p {} 
```

我试图尽可能多地操纵，但无法变得更好。你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:06:49.353

我正在尝试通过回答问题来学习 php。下面的代码似乎可以生成您正在寻找的输出。我希望对我所犯的任何错误给予反馈和批评。谢谢！

```
<?php

    function print_css($parent_node, $prefix, &$dup_checker){
      if($parent_node->nodeName == '#text'){
        return;
      }
      if ($parent_node->hasAttribute("id")) {
        $my_css = $prefix . $parent_node->nodeName . "#" . $parent_node->getAttribute("id");
      } elseif ($parent_node->hasAttribute("class")) {
          $my_css = $prefix . $parent_node->nodeName . "." . $parent_node->getAttribute("class");
      } else {
          $my_css = $prefix . $parent_node->nodeName;
      }

      if(!isset($dup_checker[$my_css])){
        echo $my_css . " {}\n";
        if($parent_node->nodeName =='a'){
          echo $my_css . ':link' . " {}\n";
          echo $my_css . ':visited' . " {}\n";
          echo $my_css . ':hover' . " {}\n";
          echo $my_css . ':active' . " {}\n";
          echo $my_css . ':focus' . " {}\n";
        }
        $dup_checker[$my_css] = 1;
      }

      $nodes = $parent_node->childNodes;
      for ($i = 0; $i < $nodes->length; $i++) {
        $node = $nodes->item($i);
        print_css($node, $my_css . ' ', $dup_checker);
      }
    }

    header('Content-type: text/plain');
    $source = '<body class="theme">
        <div class="header">
            <h1><a href="#">Welcome</a></h1>
        </div>
        <div class="content">
            <div class="sidebar">
                <ul>
                    <li><a href="#">Link 1</a></li>
                    <li><a href="#">Link 2</a></li>
                    <li><a href="#">Link 3</a></li>
                    <li id="fourth_id"><a href="#">Link 4</a></li>
                    <li id="fifth_id"><a href="#">Link 5</a></li>
                </ul>
            </div>
            <div class="main">
                <h2>Main Heading</h2>
                <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
            </div>
        </div>
        <div class="footer">
            <p>Copyright &copy; 2012 Me!</p>
        </div>
    </body>';
    $html = new DOMDocument;
    $html->loadHTML($source);
    $nodes = $html->getElementsByTagName("body");
    $css = "";
    $dup_checker = array();
    for ($i = 0; $i < $nodes->length; $i++) {
      $node = $nodes->item($i);
      print_css($node, '', $dup_checker);
    }

    ?>

Output:
body.theme {}
body.theme div.header {}
body.theme div.header h1 {}
body.theme div.header h1 a {}
body.theme div.header h1 a:link {}
body.theme div.header h1 a:visited {}
body.theme div.header h1 a:hover {}
body.theme div.header h1 a:active {}
body.theme div.header h1 a:focus {}
body.theme div.content {}
body.theme div.content div.sidebar {}
body.theme div.content div.sidebar ul {}
body.theme div.content div.sidebar ul li {}
body.theme div.content div.sidebar ul li a {}
body.theme div.content div.sidebar ul li a:link {}
body.theme div.content div.sidebar ul li a:visited {}
body.theme div.content div.sidebar ul li a:hover {}
body.theme div.content div.sidebar ul li a:active {}
body.theme div.content div.sidebar ul li a:focus {}
body.theme div.content div.sidebar ul li#fourth_id {}
body.theme div.content div.sidebar ul li#fourth_id a {}
body.theme div.content div.sidebar ul li#fourth_id a:link {}
body.theme div.content div.sidebar ul li#fourth_id a:visited {}
body.theme div.content div.sidebar ul li#fourth_id a:hover {}
body.theme div.content div.sidebar ul li#fourth_id a:active {}
body.theme div.content div.sidebar ul li#fourth_id a:focus {}
body.theme div.content div.sidebar ul li#fifth_id {}
body.theme div.content div.sidebar ul li#fifth_id a {}
body.theme div.content div.sidebar ul li#fifth_id a:link {}
body.theme div.content div.sidebar ul li#fifth_id a:visited {}
body.theme div.content div.sidebar ul li#fifth_id a:hover {}
body.theme div.content div.sidebar ul li#fifth_id a:active {}
body.theme div.content div.sidebar ul li#fifth_id a:focus {}
body.theme div.content div.main {}
body.theme div.content div.main h2 {}
body.theme div.content div.main p {}
body.theme div.footer {}
body.theme div.footer p {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T04:31:45.080

### 从[Perry Tew](https://stackoverflow.com/users/364754/perry-tew)的代码中分叉。尽力了！:)

从[Perry Tew 拿](https://stackoverflow.com/users/364754/perry-tew)叉子，我做了类似的事情，其中​​：

1.  适用于`Class`和`ID`。
2.  使用连接`.`的 s 给出的类。
3.  给出`ID`第一个偏好，然后`Class`.
4.  前加空格`{`。`minor`

### PHP代码：

```
<?php

function print_css($parentTag, $prefix, &$dup_checker) {
    if ($parentTag->nodeName == '#text') {
        return;
    }
    if ($parentTag->hasAttribute("class") || $parentTag->hasAttribute("id")) {
        $idpart = ($parentTag->hasAttribute("id")) ? "#" . $parentTag->getAttribute("id") : "";
        $classpart = ($parentTag->hasAttribute("class")) ? "." . str_replace(" ", ".", $parentTag->getAttribute("class")) : "";
        $my_css = $prefix . $parentTag->nodeName . $idpart . $classpart;
    } else {
        $my_css = $prefix . $parentTag->nodeName;
    }

    if (!isset($dup_checker[$my_css])) {
        echo $my_css . " {}\n";
        if ($parentTag->nodeName == 'a') {
            foreach (array("link", "visited", "hover", "active", "focus") as $pseudo)
                echo $my_css . ':' . $pseudo . " {}\n";
        }
        $dup_checker[$my_css] = 1;
    }

    $nodes = $parentTag->childNodes;
    for ($i = 0; $i < $nodes->length; $i++) {
        $node = $nodes->item($i);
        print_css($node, $my_css . ' ', $dup_checker);
    }
}

header('Content-type: text/plain');
$source = '<body class="theme">
    <div class="header class2">
        <h1><a href="#">Welcome</a></h1>
    </div>
    <div class="content">
        <div class="sidebar">
            <ul>
                <li><a href="#">Link 1</a></li>
                <li id="hellos" class="meow wuff"><a href="#"><span>Link 2</span></a></li>
                <li><a href="#">Link 3</a></li>
                <li><a href="#">Link 4</a></li>
                <li><a href="#">Link 5</a></li>
            </ul>
        </div>
        <div class="main">
            <h2>Main Heading</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
        </div>
    </div>
    <div class="footer">
        <p id="hello">Copyright &copy; 2012 Me!</p>
    </div>
</body>';
$html = new DOMDocument;
$html->loadHTML($source);
$nodes = $html->getElementsByTagName("body");
$css = "";
$dup_checker = array();
for ($i = 0; $i < $nodes->length; $i++) {
    $node = $nodes->item($i);
    print_css($node, '', $dup_checker);
}
?> 
```

### 输出：

```
body.theme {}
body.theme div.header.class2 {}
body.theme div.header.class2 h1 {}
body.theme div.header.class2 h1 a {}
body.theme div.header.class2 h1 a:link {}
body.theme div.header.class2 h1 a:visited {}
body.theme div.header.class2 h1 a:hover {}
body.theme div.header.class2 h1 a:active {}
body.theme div.header.class2 h1 a:focus {}
body.theme div.content {}
body.theme div.content div.sidebar {}
body.theme div.content div.sidebar ul {}
body.theme div.content div.sidebar ul li {}
body.theme div.content div.sidebar ul li a {}
body.theme div.content div.sidebar ul li a:link {}
body.theme div.content div.sidebar ul li a:visited {}
body.theme div.content div.sidebar ul li a:hover {}
body.theme div.content div.sidebar ul li a:active {}
body.theme div.content div.sidebar ul li a:focus {}
body.theme div.content div.sidebar ul li#hellos.meow.wuff {}
body.theme div.content div.sidebar ul li#hellos.meow.wuff a {}
body.theme div.content div.sidebar ul li#hellos.meow.wuff a:link {}
body.theme div.content div.sidebar ul li#hellos.meow.wuff a:visited {}
body.theme div.content div.sidebar ul li#hellos.meow.wuff a:hover {}
body.theme div.content div.sidebar ul li#hellos.meow.wuff a:active {}
body.theme div.content div.sidebar ul li#hellos.meow.wuff a:focus {}
body.theme div.content div.sidebar ul li#hellos.meow.wuff a span {}
body.theme div.content div.main {}
body.theme div.content div.main h2 {}
body.theme div.content div.main p {}
body.theme div.footer {}
body.theme div.footer p#hello {} 
```

### 笔记：

当`a`标签是`span`标签或其他标签的父标签时，它不会打印出`pseudo`类。谁能帮我修改代码？

### 演示：[http](http://codepad.viper-7.com/UbBil2) ://codepad.viper-7.com/UbBil2 （旧版）

### 最初的学分应该归[Perry Tew](https://stackoverflow.com/users/364754/perry-tew)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T04:22:31.680

这个怎么样？它支持 ID 并消除重复，并且可以将某些元素仅显示一次而不是 li[1] li[2]

```
<?php
header('Content-type: text/plain');
$source = '<body class="theme">
    <div class="header">
        <h1><a href="#">Welcome</a></h1>
    </div>
    <div class="content">
        <div id="ff">
        </div>
        <div class="sidebar">
            <ul>
                <li id="hh"><a href="#">Link 1</a></li>
                <li><a href="#">Link 2</a></li>
                <li><a href="#">Link 3</a></li>
                <li><a href="#">Link 4</a></li>
                <li><a href="#">Link 5</a></li>
            </ul>
        </div>
        <div class="main">
            <h2>Main Heading</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
        </div>
    </div>
    <div class="footer">
        <p>Copyright &copy; 2012 Me!</p>
    </div>
</body>';
$html = new DOMDocument;
$html->loadHTML($source);
$nodes = $html->getElementsByTagName("*");
$css = array();
$paths=array();

for ($i = 0; $i < $nodes->length; $i++) {
    $node = $nodes->item($i);
    $key=$node->getNodePath();

    if(!$node->hasAttribute("class") && !$node->hasAttribute("id"))

        $paths=addPath($paths,$key,"",$node->nodeName);
        $path=process($paths,$key);
        if (!$path)continue;
        $css[$key]=str_replace(array("/"), array(" "), $path) . " {}\n";
    if ($node->hasAttribute("class")) {
        $class=$node->nodeName . "." . $node->getAttribute("class");

        $paths=addPath($paths,$key,$class,$node->nodeName);
        $path=process($paths,$key);

        $css[$key]=str_replace(array("/"), array(" "), $path) . " {}\n";
    } elseif ($node->hasAttribute("id")) {
        $id="#" . $node->getAttribute("id");
        $paths=addPath($paths,$key,$id,$node->nodeName);
        $path=process($paths,$key);

        $css[$key]=str_replace(array("/"), array(" "), $path) . " {}\n";
    }
}

$css=implode("",array_unique($css));
echo $css;

function addPath($paths,$path,$class,$name){

    $once_elems=array(
        'li','a'
    );

    $sourcePath=explode("/",$path);
    if ($sourcePath[1]=="html"){
        unset($sourcePath[1]);
    }
    $path=implode("/",$sourcePath);

    if (!$class && isset($paths[$path])){
        return $paths;
    }

    if ((in_array($name,$once_elems) && !$class) || !$class){
        $class=$name;
    }

    $paths[$path]=$class;
    return $paths;
}

function process($paths,$path){
    $sourcePath=explode("/",$path);
    if ($sourcePath[1]=="html"){
        unset($sourcePath[1]);
    }
    $sourcePath=array_values($sourcePath);
    $path=implode("/",$sourcePath);
    foreach ($paths as $k=>$v){
        if (!$k)continue;
        $ex=explode("/",$k);

        if (strpos($path,$k,0)!==false){
            $sourcePath[count($ex)-1]=$v;
        }
    }
    $path=implode("/",$sourcePath);

    return $path;
}

?> 
```

输出：

```
 body.theme {}
 body.theme div.header {}
 body.theme div.header h1 {}
 body.theme div.header h1 a {}
 body.theme div.content {}
 body.theme div.content #ff {}
 body.theme div.content div.sidebar {}
 body.theme div.content div.sidebar ul {}
 body.theme div.content div.sidebar ul #hh {}
 body.theme div.content div.sidebar ul #hh a {}
 body.theme div.content div.sidebar ul li {}
 body.theme div.content div.sidebar ul li a {}
 body.theme div.content div.main {}
 body.theme div.content div.main h2 {}
 body.theme div.content div.main p {}
 body.theme div.footer {}
 body.theme div.footer p {} 
```

# php - 使用 ajax 或 php

> ID：11480639
> 
> 赞同：0
> 
> 时间：2012-07-14T02:54:03.927
> 
> 标签：php, jquery

我正在制作一个照片库网站。因为我需要将新添加的照片列在顶部，并且页面中的照片数量应该是有限的。如果照片超过每页的限制，则最后一张应自动移至第二页。我该怎么做。如果您无法理解我的问题，您可以以 youtube 评论为例。因为最后一条评论将首先显示，其他评论将自动移至第二页，或者您可以查看[http://www.1channel.ch/](http://www.1channel.ch/)例如在刚刚添加的部分中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:48:11.610

那就是所谓的*分页*。

您可以通过发送带有您要访问的页面的 GET 变量来实现，如下所示：

```
mysite.com/index.php?page=1 
```

在您的代码中，您执行以下操作：

```
// Set page 1 if it isn't specified
$page = isset($_GET['page']) ? $_GET['page'] : 1

mysql_connect( .. );
mysql_select_db( .. )

// SQL Query
$limit = 20;
$start = ($page - 1) * $limit;
$sql = "select * from my_table order by date desc limit $start, $limit";

// Get results
$result = mysql_query($sql);

// ... 
```

您可以搜索 PHP 分页以找到几个示例和教程。

# android - android 2.3.4 中非常奇怪的“无法解析的日期”问题（不在 2.2 中）

> ID：11480641
> 
> 赞同：0
> 
> 时间：2012-07-14T02:54:10.233
> 
> 标签：android, android-activity, simpledateformat

我有一个应用程序，它在模拟器 2.2 和真实设备 2.2.2 上完美运行。我决定从 2.2.2 到 2.3.4 更新我在手机上的 android 版本。一切顺利，但我的应用程序突然无缘无故停止工作。好吧，这让我`Unparseable date`例外：

```
String timeOld12Hour = "11:50pm";// for example
Date time = new SimpleDateFormat("hh:mma").parse(timeOld12Hour); 
```

这真的很有趣，因为我在这条线上看不到任何错误。SIMpledateformatter 与我的日期格式完全相同。最奇怪的是：

*   它工作正常模拟器2.2
*   它工作正常模拟器 2.3.3
*   我今天试过的每台带有java的电脑都可以正常工作
*   它在设备 2.2.2 上运行良好
*   它不适用于设备 2.3.4

哪里可能有问题？我尝试了几次手机重启，卸载应用程序，重新安装应用程序，我只是无法让它工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:58:01.090

好吧，我发现了问题所在。如果添加`Locale.US`到`SimpleDateFormatconstructor`，像这样：

```
String timeOld12Hour = "11:50pm";// for example
Date time = new SimpleDateFormat("hh:mma", Locale.US).parse(timeOld12Hour); 
```

一切顺利。这真的很有趣，我从来没有听说过这样的事情；）我必须阅读更多关于语言环境的内容，因为它看起来非常重要。也仍然无法理解为什么我的手机的语言环境在 Android 升级后发生了变化......

# c++ - libc++ 中的 std::function 回调

> ID：11480642
> 
> 赞同：0
> 
> 时间：2012-07-14T02:54:22.230
> 
> 标签：c++, c++11, clang, libc++, std-function

> **可能重复：**
> [std::function 的复制构造函数是否要求模板类型的参数类型是完整类型？](https://stackoverflow.com/questions/10730682/does-stdfunctions-copy-constructor-require-the-template-types-argument-types)

我有一个简单的类，它在 std::function 上构建了一个回调，但它不是用 C++11/libc++ 构建的。我想我看到了错误，但我不知道解决方案。

```
#include <functional>

struct Base {
    typedef std::function<void( Base baseInstance )> Callback;

    Base() {}
    virtual ~Base() {}

    void setCallBack( Callback callback ) { mCallback = callback; }

private:
    Callback mCallback; // <--- Error, "Ivalid application of 'sizeof' to an incomplete type of 'Base'"
}; 
```

完整的错误日志：

```
In file included from /Volumes/ssd/code/sandbox/test_touchtracker_libcpp/test_touchtracker_libcpp/main.cpp:9:
In file included from /Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/iostream:38:
In file included from /Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/ios:216:
In file included from /Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/__locale:15:
In file included from /Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/string:434:
In file included from /Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/algorithm:591:
/Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/type_traits:2825:19: error: invalid application of 'sizeof' to an incomplete type 'Base'
    static_assert(sizeof(_Tp) > 0, "Type must be complete.");
                  ^~~~~~~~~~~
/Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/type_traits:2812:15: note: in instantiation of template class 'std::__1::__check_complete<Base>' requested here
      private __check_complete<_T0, _Tp...>
              ^
/Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/type_traits:2978:15: note: in instantiation of template class 'std::__1::__check_complete<std::__1::function<void (Base)> &, Base>' requested here
    : private __check_complete<_Fp, _Args...>
              ^
/Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/type_traits:2989:11: note: in instantiation of template class 'std::__1::__invokable_imp<std::__1::function<void (Base)> &, Base>' requested here
          __invokable_imp<_Fp, _Args...>::value>
          ^
/Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/functional:1115:33: note: in instantiation of template class 'std::__1::__invokable<std::__1::function<void (Base)> &, Base>' requested here
    template <class _Fp, bool = __invokable<_Fp&, _ArgTypes...>::value>
                                ^
/Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/functional:1163:9: note: in instantiation of default argument for '__callable<std::__1::function<void (Base)> >' required here
        __callable<typename decay<_Fp>::type>::value,
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Applications/Xcode45-DP2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/c++/v1/functional:1166:7: note: while substituting deduced template arguments into function template 'operator=' [with _Fp = const std::__1::function<void (Base)> &]
      operator=(_Fp&&);
      ^
/Volumes/ssd/code/sandbox/test_touchtracker_libcpp/TouchTracker.h:5:8: note: definition of 'Base' is not complete until the closing '}'
struct Base {
       ^
1 error generated. 
```

因此， std::function 并不完整。但我希望这个类能够引用一个回调，这个类。所以我有点苦恼。有人知道如何用 C++11 处理这个问题吗？

注意：此代码在使用时编译没有问题`<tr1/functional>`

# c++ - 如何解决两个同名的命名空间冲突

> ID：11480647
> 
> 赞同：4
> 
> 时间：2012-07-14T02:55:27.460
> 
> 标签：c++, namespaces

我在自己的代码中有一个命名空间*核心*，它与我正在使用的动态库的命名空间*核心*冲突。出现问题是因为我无法修改任何一个。第一个*核心*因为是我们团队项目的一部分，第二个因为是库的一部分。有没有办法解决这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T03:14:57.910

尝试将您的核心命名空间变成子命名空间。

**编辑：清理答案并添加代码。（在手机上很难做到！）**

这样您就可以访问每个“核心”命名空间。这也明确显示了所指的是哪个“核心”。即使外部库具有相同的函数名称，您也将是安全的。

但是，您提到您实际上无法更改原始代码中的任何内容，因此您唯一的选择是使用不同的库并希望它没有“核心”命名空间。在我看来，说服您的团队更改他们的代码可能要容易得多。

```
// Your 'core' namespace, inside your own namespace.
namespace Mygame
{
  namespace core
  {
    void Foo();
  }
}

// Access both namespaces safely.
Mygame::core::Foo();
core::Foo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:59:36.077

您将需要更改您有权访问的命名空间的名称。像这样的情况就是为什么给你创建的东西（类、库、命名空间......）一个前缀，将它们与可能使用相似名称的其他项目区分开来是个好主意。

例如，如果我有一个游戏经理，我不会只调用类`Manager`。我将其称为`MygameGameManager`或类似名称，以将其与其他类区分开来——即。如果有人稍后出现并添加`SoundManager`到项目中。重要的是要在命名约定中找到使事物清晰和独特与命名过于冗长之间的平衡。平衡就在那里，你只需要找到它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T09:29:27.493

改变

```
namespace core {
    // define namespace members
} 
```

到

```
namespace myproject_core {} // namespace "declaration"
using namespace core = myproject_core; // "namespace alias"

// core:: refers only to your code now

namespace myproject_core {
    // define namespace members
} 
```

现在链接器将看不到冲突，并且您的代码不会看到名称更改。

* * *

> 出现问题是因为我无法修改任何一个。

好吧，如果您无法修改*任何内容*，那么就没有解决方案。我在这个答案中做了一个假设，但也许你可以澄清什么样的改变是可以接受的？

# sql - 将两个表中的计数合并为一个

> ID：11480648
> 
> 赞同：1
> 
> 时间：2012-07-14T02:56:02.340
> 
> 标签：sql, join, group-by

这是表2中的数据

```
ID2        |    Count2
-----------+-----------
1345653         5
534140349       5
682527813       4
687612723       3
704318001       5 
```

这是我在表1中的以下数据

```
ID1        |    Count1
-----------+-----------
1345653         4
704318001       4 
```

如果您看到上面的表格`1345653`，Table2 中有这个，`5 count`但在 Table1 中有，同样，Table2 中有`4 count`这个 ID ，但在 Table1 中有。所以我需要在输出中这样显示。`704318001``5 count``4 count`

```
ID              Count2   Count1
-----------------------------------
1345653         5        4
534140349       5        0
682527813       4        0
687612723       3        0
704318001       5        4 
```

这在sql中可能吗？如果是，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:03:51.187

SQL 101

```
select id2, count2, coalesce(count1, 0) as count1
  from table2
  left outer join table1
    on id1=id2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T03:09:10.903

给你看看下面的链接 [http://sqlfiddle.com/#!3/69056/1](http://sqlfiddle.com/#!3/69056/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T03:00:55.790

```
select isnull(ID1, ID2) ID,  isnull(Table2.count2, 0) count2, isnull(Table1.count1, 0) count1
 from Table2 full outer join Table1 
 on Table2.ID2 = Table1.ID1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T03:03:29.337

试试这个

```
Select T1.ID,T1.Count1 As Count2,(Case When T2.ID1 IS NULL THEN 0 ELSE T2.Count1) 
As Count1 From 
Tabl1 AS T1 LEFT OUTER JOIN Table2 AS T2 ON 
T1.ID1=T2.ID1 
```

# android - OpenGL 动态壁纸 Android 中的单个 ImageView

> ID：11480651
> 
> 赞同：0
> 
> 时间：2012-07-14T02:56:15.113
> 
> 标签：android, opengl-es, textview, imageview, live-wallpaper

我想知道是否有办法为 Android 的 OpenGL 动态壁纸的背景图像设置 ImageView。我知道不能使用表面视图，但什么是等价的？因为我还想添加一个TextView。

例如; 您可以在常规应用程序以及 TextView 中设置特定的背景图像，但它不会让您在动态壁纸中。它说 LinearLayout 未定义类墙纸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T07:09:23.257

openGL 没有任何小部件。在 2D 图形的动态壁纸中使用 SurfaceView，而对于 3D，则使用 GLSurfaceview。

对于 2D 图形，您必须在画布上绘制，而对于 3D 图形，有一个具有不同版本的 GL 对象。

# php - 在 php 中的服务器之间传输适当大小的数据流的最佳方法

> ID：11480652
> 
> 赞同：1
> 
> 时间：2012-07-14T02:56:22.380
> 
> 标签：php, zip, hosting, data-transfer

我有一个“离线处理”服务器，它对我的​​ CPU 周期收费很少，还有一个“媒体服务”服务器，它对我的​​带宽收费很少。我有一个 ~1.3Mb 的 zip 文件，离线处理服务器会生成该文件，然后将其发送到媒体服务服务器以实际托管以供下载。我一直这样做的方法是让离线处理服务器自己制作文件并将其通过 ftp 传输到另一个，但我不得不移动主机，现在离线处理服务器无法将文件保存到本身。

我的第一个想法是我可以在媒体服务服务器上制作一个监听 php 脚本，然后将内容发布到该脚本中，该脚本会将其保存到一个 zip 文件中。解压后它约为 4.1Mb，所以发布这么多数据是个好主意吗？我想到的第二件事是 php 中的流......但我不知道什么是最好的。

当我无法将其保存为生成数据的服务器中的文件时，将这 4.1Mb 数据从一台服务器移动到另一台服务器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:07:42.700

如果您的主机支持它，我可能会尝试类似：

```
$fp = fopen('php://memory', 'w+');
fwrite($fp, "Hello, World!"); // create your file
fseek($fp, 0, SEEK_SET);

// connect to ftp
ftp_fput($ftp, '/foo', $fp, FTP_BINARY);   

fclose($fp); 
```

# xcode - 如何在 xcode 4.3 中从命令行开始调试？

> ID：11480656
> 
> 赞同：0
> 
> 时间：2012-07-14T02:58:33.037
> 
> 标签：xcode, xcode4, xcode4.3

我有一个 xcode 项目，我在 Visual Studio 中编辑源文件，通过从 SSH调用*xcodebuild命令构建它。*但是当构建成功时，我需要移动到 Mac 并单击 xcode 的**RUN**按钮开始调试，但是有没有办法在我的构建完成后像*xcodebuild这样的命令行自动运行调试？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:18:15.290

取决于你到底需要什么。xcodebuild 没有任何方法可以执行相当于按下运行按钮的操作（尽管您可能会编写一个脚本来执行此操作）。但最简单的方法可能是启动 lldb 并通过它运行程序，就像在任何命令行调试会话中一样。

# jsf-2 - getOutputStream() 错误后无法调用 getWriter()

> ID：11480665
> 
> 赞同：0
> 
> 时间：2012-07-14T03:00:05.930
> 
> 标签：jsf-2, weblogic11g

我正在使用 my-faces 2.1.5 primefaces 3.2 和 WebLogic Server 版本：10.3.2.0

当我生成文件并尝试通过 p:fileDownload 下载它们时，我收到以下错误消息：

```
java.lang.IllegalStateException: strict servlet API: cannot call getWriter() after getOutputStream()
at weblogic.servlet.internal.ServletResponseImpl.getWriter(ServletResponseImpl.java:309)
at org.apache.myfaces.context.servlet.ServletExternalContextImpl.getResponseOutputWriter(ServletExternalContextImpl.java:185)
at org.apache.myfaces.renderkit.ErrorPageWriter.handle(ErrorPageWriter.java:469)
at org.apache.myfaces.context.MyFacesExceptionHandlerWrapperImpl.handle(MyFacesExceptionHandlerWrapperImpl.java:301)
at javax.faces.context.ExceptionHandlerWrapper.handle(ExceptionHandlerWrapper.java:64)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:191)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:197)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)
at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3592)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2202)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2108)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1432)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

我不知道这是 weblogic 中的错误还是我的代码中的错误？

此消息是我得到的唯一参考，我不知道如何解决此问题

.jsf 文件：

```
<p:commandButton id="genButton" value="Generate Files" disabled="#{bean.disableButton}" actionListener="#{bean.generate}" onclick="PrimeFaces.monitorDownload(showStatus, hideStatus)" ajax="false" style="width:200px" icon="ui-icon-shuffle">
        <p:fileDownload value="#{bean.zipfile}"/>  
        </p:commandButton> 
```

豆子：

```
 File zip = File.createTempFile(selectedCode, "zip");  

            ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(zip.getPath()));  
            for (File file : adapter.listFiles) {  
                addFileToZip(file, zos);  
            }  

            InputStream in = new FileInputStream(zip);  
            file = new DefaultStreamedContent(in, "zip", selectedCode + ".zip");  
            adapter.listFiles.clear();  
            zos.flush();  
            zos.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:15:01.710

stacktrace 告诉 MyFaces 异常处理程序试图处理它。

```
at org.apache.myfaces.context.MyFacesExceptionHandlerWrapperImpl.handle(MyFacesExceptionHandlerWrapperImpl.java:301)
at javax.faces.context.ExceptionHandlerWrapper.handle(ExceptionHandlerWrapper.java:64) 
```

这只会在抛出异常时*发生。**但是该*异常的异常细节又明显地被抑制了，因为 MyFaces 异常处理程序未能处理该异常，因为无法获得响应编写器。

关闭 MyFaces 异常处理程序，您将获得真正的异常详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:23:09.443

看起来我找到了解决方案:)

如果列表为空，则...

```
 else {
            if (streamedContent != null) {
                streamedContent.getStream().close();
                streamedContent = null;
            }
        } 
```

谢谢您的帮助。

# jquery - 如何自动将下拉列表中选定选项的值复制到文本中。使用 jQuery

> ID：11480674
> 
> 赞同：-1
> 
> 时间：2012-07-14T03:01:54.627
> 
> 标签：jquery, jsp

> **可能重复：**
> [基于所选选项值的表单输入值](https://stackoverflow.com/questions/7802235/form-input-value-based-on-option-value-selected)

我有一个下拉列表。我希望每当我从下拉列表中选择一个值时，所选值都会自动复制到相同形式的文本框中。我想使用 jQuery 而不仅仅是其他简单的 Javascript 方法。

表格的代码是：

```
<s:form action="okadddqs" method="post" cssClass="text">
    <s:select label="Correct Option :" 
        id="opc"
        name="opc"       
        list="#@java.util.LinkedHashMap@{'One':'One', 'Two':'Two','Three':'Three','Four':'Four','Five':'Five'}"/>
    <s:textfield label="Choosed Option" id="cname" name="cname"/>
    <s:submit value="Submit now"/> 
```

我`cname`想用 的选定值自动填充`opc`。我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T03:04:38.950

我不确定元素的名称或其他选择器，因此这是实现您正在寻找的通用方法：

```
$('select').change(function () {
  var el = $(this);

  el.closest('form').find('input[type=text]').val( el.val() );

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T14:05:17.960

```
$(document).ready(function(){
    $("#opc").change(function(){
        $("#cname").val($(this).find("option:selected").text());
    });

}); 
```

[演示](http://jsfiddle.net/XVDH2/1/)

# scheme - 如何使用 DrRacket 5.2.1 在 Emacs 中编辑和运行 PLAI 代码

> ID：11480681
> 
> 赞同：2
> 
> 时间：2012-07-14T03:03:22.130
> 
> 标签：scheme, racket, plai

我正在学习[PLAI](http://www.cs.brown.edu/~sk/Publications/Books/ProgLangs/)，现在我已经在 DrRacket 中运行了第 3 章的代码（带有`#lang plai`），但我是 DrRacket 的新手。我可以只在 Emacs 中编辑和运行代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T04:25:58.733

该`#lang plai`指令将在 DrRacket 之外的普通 Racket 文件中工作。在你的 Racket 安装中应该有一个`racket`可执行文件，你可以使用它来运行它们。如果您想要一个更容易运行 Racket 程序的 emacs 包，请尝试[使用 geiser 。](http://www.nongnu.org/geiser/)[嘎嘎](http://www.neilvandyke.org/quack/)也很有帮助。

更一般地，请参阅使用 emacs 和 Racket 的[指南条目](http://docs.racket-lang.org/guide/Emacs.html)。您可能还想通过解释如何运行 Racket来从头[开始阅读该指南。](http://docs.racket-lang.org/guide/intro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T18:55:15.987

Geiser 遇到的一个问题是，当代码中有指令时，“Cx Cb”( `geiser-eval-buffer`) 将不起作用。`#lang`

[这个问题](https://stackoverflow.com/questions/21008623/setting-language-with-lang-in-the-repl)有几个 Geiser 的解决方法。或者，您可以使用[球拍模式](https://github.com/greghendershott/racket-mode)，它旨在在 Emacs 中复制 DrRacket 体验，其中重点是（重新）运行代码或测试，而不是在 REPL 中增量。（有关这背后的理念，请参阅 Matthias Felleisen 的[博](http://blog.racket-lang.org/2009/03/the-drscheme-repl-isnt-the-one-in-emacs.html)文。）

（注意：racket-mode 仍然包含将当前缓冲区的 region 或 sexps 发送到 REPL 的绑定，只是没有对切换模块和命名空间的特殊支持。尤其是在开头结尾，无论如何很多人都不会错过.)

# xpath - dom4j 中的可插入 XPath 计划发生了什么？

> ID：11480694
> 
> 赞同：1
> 
> 时间：2012-07-14T03:05:58.213
> 
> 标签：xpath, dom4j

我在 2010 年看到 SourceForge 上关于 dom4j 2.0 计划的讨论，其中包括可插入的 XPath 实现，允许替换 Jaxen。现在是 2012 年。有什么结果吗？或者，就此而言，dom4j 是否正在积极开发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:30:35.940

dom4j 2.0 的最终版本还没有出现。最后一个预发布版本[dom4j 2.0 Alpha 2](http://sourceforge.net/projects/dom4j/files/dom4j-2.0.0-ALPHA-2/)于 2010 年 4 月 5 日发布。最后一个稳定版本[dom4j 1.6.1](http://sourceforge.net/projects/dom4j/files/dom4j/1.6.1/)于 2005 年 5 月 20 日发布。SourceForge 上的[dom4j 新闻页面](http://sourceforge.net/news/?group_id=16035)第二天报道了这一点. 从那以后没有任何消息发布。该网站承诺即将发布 1.6.2“maitance *(sic)*版本”，但我不会屏住呼吸。

根据[dom4j-commits](http://sourceforge.net/mailarchive/forum.php?forum_name=dom4j-commits)邮件列表，最后一次签入是在 2004 年 5 月 12 日（大概是后续代码更改没有进入 SourceForge 存储库）。[dom4j-dev](http://sourceforge.net/mailarchive/forum.php?forum_name=dom4j-dev)邮件列表在整个 2012 年的档案中只有两条消息，都是由错误跟踪器中的活动生成的自动电子邮件。[dom4j-user](http://sourceforge.net/mailarchive/forum.php?forum_name=dom4j-user)邮件列表的最后一篇文章是在 2011 年 12 月。

dom4j.org网站似乎在 2009 年的某个时候落入了抢注者的手中[。](http://www.dom4j.org/)

从这里看起来很死。

# actionscript-3 - 将加载的 swf 与使用父级隔离

> ID：11480695
> 
> 赞同：2
> 
> 时间：2012-07-14T03:06:15.670
> 
> 标签：actionscript-3, flash

我有一个完整的浏览器窗口 AS3 Flash CS4 父 swf，它加载第三方子 swf，高度/宽度更小并且定位适当（即居中）。无论我尝试使用哪种加载技术，我都会在子 swf 中遇到位置和方向问题，这会破坏子级。

在一个示例情况下，孩子将加载辅助显示对象（可能是影片剪辑），但尝试将其附加到舞台上。如果我允许它在加载过程中通过 SecurityDomain 访问舞台，它会将其定向到父 swf 的 0,0 而不是子 swf 的 0,0（已经适当地定位/居中）。

在另一种情况下，加载过程中的子定位是合适的，但放置在子内部似乎参考舞台的 X、Y 位置会被子 swf 居中的量所抵消（即，如果子 swf 的加载器居中这样它的 X 是 200，而子 swf 内的一个对象应该是 100,50，它实际上是 300,50）。

常见的线程似乎是子 swfs，无论是否允许访问舞台，都使用父级的舞台或播放器属性，而不是加载器中它们自己的属性。

如何隔离子 swf，使其仅使用自己的子环境进行定位和定向，而不使用父环境？

我尝试过内置的 Loader 和 UILoader、Greensock 的 SWFLoader、Flex 的 SWFLoader，甚至通过 TextField 中的文本加载它。

似乎 AIR 的 HTMLLoader 可以工作（因为 HTMLLoader 中的 SWF 对象显然使用它们自己的舞台对象），但是这个应用程序已经在浏览器中可用。

理想情况下，我仍然希望能够与孩子交流，但此时确保孩子成功运行更为重要。

这似乎是一种常见的方法，但遇到左右阻塞问题让我觉得我以错误的方式处理这个问题。

我最后的手段是用 JS 框架替换父 swf，但前提是绝对必要。

在此过程的任何部分提出解决方案的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:58:00.680

希望没有一个“规则”反对回答我自己的问题......

正如评论中提到的 weltraumpirat，似乎没有办法限制加载的 swf 访问阶段变量，例如定位/方向（mouseX 和 mouseY）。最好的解决方案是限制对舞台的访问，以便加载的 swfs 无法添加到它。这是通过在 Loader.load 调用中包含一个 LoaderContext 对象来完成的，该调用定义了一个单独的 ApplicationDomain。

```
var url:URLRequest = new URLRequest(/*...SWF URL...*/); 
var context:LoaderContext = new LoaderContext(false,new ApplicationDomain());
var ldr:Loader = new Loader();
ldr.load(url,context); 
```

这将在加载的 swf 中维护一个单独的根目录。

如果 Loader 对象的位置远离父/主 swf 中的 (0,0)，则您可能需要与加载的 swf 作者协调以使用 DisplayObject.globalToLocal 包装 stage.mouseX 和 stage.mouseY 以反映未知偏移量（从加载的 swf 中）。

```
var localMousePt:Point = this.globalToLocal(new Point(stage.mouseX,stage.mouseY)); 
```

这很糟糕，但从安全的角度来看是有道理的。我发现对于 Flash 开发人员来说，通常的做法是不考虑可能加载其 SWF 的上下文，因此认为使用舞台（而不是根）没有任何问题。最佳实践应该是始终使用根来添加和定位对象，因为您永远不知道根可能放置在显示列表中的什么位置，以及在它和舞台之间可能有多少父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:03:35.423

这是一个丑陋的黑客，但你总是可以为舞台添加一个监听器`Event.ADDED`，检查需要调整的显示对象（当然，如果它们被命名，这效果最好，但你可能还有其他标准可以使用)，然后手动更改它们的坐标。

```
private function onAdded( ev:Event ) : void {
     if ( ev.target.name == "whatever") 
         modifyCoordinates( ev.target as DisplayObject );
}

private function modifyCoordinates( target:DisplayObject ) : void {
    // displace to match parent clip
}

//...

stage.addEventListener( Event.ADDED, onAdded ); 
```

如果无法区分加载的剪辑生成的显示对象，您可以过滤掉您自己添加到舞台的那些：如果只有应用程序的根 MovieClip 在舞台上，然后所有内容都添加为孩子到那，这应该不是问题。

我也会尝试联系作者，或者反编译第三方文件——如果其中任何一个可行，你至少可以了解事情是如何完成的，这样你就不必猜测在哪里应用你的更改。或者你甚至可以修改和重新编译它们。

# php - 操作数应包含 1 列 UPDATE

> ID：11480698
> 
> 赞同：0
> 
> 时间：2012-07-14T03:07:41.453
> 
> 标签：php, mysql, mysql-error-1241

我应该用什么 sql 语句来做这样的事情？

```
UPDATE 
`table1`
SET
`media` = 'url'
WHERE
`media` = '3' AND `forum_post_id` = ('109918','109949','109882','109819','109822') 
```

现在我得到的操作数应该包含 1 列错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:09:56.003

用于”：

```
UPDATE `table1`
SET `media` = 'url'
WHERE`media` = '3' AND `forum_post_id` IN ('109918','109949','109882','109819','109822') 
```

[“IN”的文档](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_in)

# java - 按返回按钮完成一系列活动

> ID：11480700
> 
> 赞同：3
> 
> 时间：2012-07-14T03:07:47.550
> 
> 标签：java, android, android-intent

假设我的活动主页上有一个按钮。

当我按下这个按钮时，它会进入活动 A

在 Activity A 中，它使用 Intents 和 startActivityForResult() 自动转到 Activity B；

在 Activity B 中，它使用 Intents 和 startActivityForResul() 自动转到 Activity C；

在 Activity B 中，它会自动启动 Intent 去 BarCode 扫描器活动并获取结果。

我的问题是当我按一个按钮返回我的主页时，它需要按4次才能返回我的主页

如果我想一次按回我的主页，如何完成这样的一系列活动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T07:36:15.670

不要在程序中的任何地方使用/覆盖 onBackPressed()

只需在Activity A和B等父Activity中添加如下方法

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
} 
```

使用 onClick 方法启动 Activity

```
 startActivityForResult(intentName, 0); 
```

在子活动中，您使用/覆盖 onStop() 方法

```
 @Override
protected void onStop()
{
    super.onStop();

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T04:22:28.137

您可以覆盖以下方法返回首页

```
 @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        super.onBackPressed();
    } 
```

在该方法中，使用以下标签创建家庭活动的意图

```
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

文件说

> 如果设置，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在顶部）作为新意图的旧活动。

但我想知道的是，为什么你要开始活动以获得结果，因为你不会回到以前的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T04:27:45.250

```
finishActivity(requestCode) 
```

在最后一个活动中使用上面的代码，以便在按下后退按钮后它将关闭所有启动的活动

requestcode 是您在第一个活动中用于启动活动 B 的代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T04:31:19.327

```
 you may try this
    Intent intent = new Intent(currentActivity.this, otherActivity.class); // instead of otherActivity use your  activity
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intent.putExtra("EXIT", true);
    startActivity(intent);

And, in your other onCreate() use below code -

if (getIntent().getBooleanExtra("EXIT", false)) {
    finish();
} 
```

# iphone - 转换其容器时显示子视图

> ID：11480701
> 
> 赞同：1
> 
> 时间：2012-07-14T03:08:11.410
> 
> 标签：iphone, objective-c, ios, subview, superview

从一个视图控制器转换到另一个视图控制器时，是否可以为当前容器中的子视图设置动画，使其在顶部停留片刻，然后在转换完成后将其放置到新容器上。

要理解我的意思，请尝试从 iOS <5 中的照片应用通过电子邮件发送照片。照片在顶部停留片刻，然后放置在邮件编辑器中。就我而言，从一个容器过渡到另一个容器时，我想要相同的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:32:16.233

这在一定程度上取决于您如何转换，但如果您使用情节提要，这可能可以使用自定义转场来完成。

# android - 使用意图 ACTION_SET_ALARM 允许应用程序设置唯一警报

> ID：11480708
> 
> 赞同：0
> 
> 时间：2012-07-14T03:09:38.673
> 
> 标签：android, android-intent

我正在尝试编写一个应用程序，该应用程序根据由替代算法确定的一些预设值自动设置 Android 默认警报。

使用 ACTION_SET_ALARM 意图的警报设置工作正常，但是每次我运行应用程序时，它都会设置一个新的警报。我想知道是否有任何方法可以在每次活动设置警报时更新一个独特的警报设置（这样Android警报应用程序中就不会出现数百个新警报）。

如有必要，我将提供代码摘录，但是似乎可以在没有具体示例的情况下回答这个问题。注意：我没有使用旨在通知其他活动某些事件的 Android 警报系统，而是用户将用于在早上醒来的实际 Android 警报。

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:00:31.613

事实证明，考虑到我的问题范围，这实际上是不可能的。相反，我必须使用制造商特定的闹钟列表（[此处](https://stackoverflow.com/questions/4115649/listing-of-manufacturers-clock-alarm-package-and-class-name-please-add)）并具体处理每种情况。

在用户仍要使用开源警报的情况下，我不得不删除 ACTION_SET_ALARM 意图，因为目前没有解决冗余警报问题的方法。用户必须手动删除每个警报。

# database - 在 Matlab 中访问键：值对

> ID：11480709
> 
> 赞同：3
> 
> 时间：2012-07-14T03:09:44.573
> 
> 标签：database, matlab, key, query-builder

我已经使用 Visual Query builder（数据库工具箱）在 Matlab 中成功创建了一个数据库。我熟悉 SQL 并使用 php 和其他语言访问键：值对，但是我在任何地方都找不到 Matlab 的语法。我到目前为止的代码是：

```
conn = database('antoine_db','','');
c = catalogs(conn);
T = tables(conn);
cols = columns(conn);

sql_query = 'SELECT Formula,"Compound Name",A,B,C,TMIN,TMAX FROM antoine_data WHERE ID = 1'; 

result = fetch(conn,sql_query); 
```

如果此处的“结果”是包含多列的单行数据，我怎样才能最轻松地访问特定列中的数据？我已经可以通过使用列索引来做到这一点，例如 result(1,1)。Matlab 中的语法是什么，所以我可以通过列的名称来访问它，例如 result['Name']？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:00:21.487

尝试将返回格式设置为结构：

```
setdbprefs('datareturnformat','structure');
result = fetch(conn,sql_query);
result.(name)

ans =
   ... 
```

# c++ - 如果 gdb 帧/bt 显示 "??" 会发生什么 但没有 readalbe 函数名？

> ID：11480712
> 
> 赞同：0
> 
> 时间：2012-07-14T03:12:19.757
> 
> 标签：c++, c, gdb

我遇到了一个coredump，使用gdb xxx core.1234，然后是“bt”，得到那些消息：“0x6f636d6f in ??()”，其中函数名不可读。我想学习：1.在什么情况下gdb bt 节目“？？” 作为函数名？2.如何避免这些“？？” 并获得可读的函数名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:05:15.003

地址 0x6f636d6f 几乎可以肯定是无效的（即，位于进程的内存空间之外），并且可能是堆栈损坏的结果——它对应于 ASCII 字符`ocmo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:20:01.543

1 案例：堆栈已损坏。
2 案例：代码通过优化编译（不确定）。
3 案例：你启动 gdb 错误（例如 gdb ./app --core core_name）。

# arduino - MF522-AN RFID 读写器和 Arduino 问题

> ID：11480713
> 
> 赞同：0
> 
> 时间：2012-07-14T03:12:36.100
> 
> 标签：arduino, rfid

好吧，所以我对 Arduino 很陌生，不久前从 eBay 上买了一个 Mega2560 入门套件以及其他一些配件，我有一个“仿冒”板，但到目前为止它似乎对其他所有东西都很好用。无论如何，我购买了一个 MF522-AN RFID 阅读器，但无法让它工作。我已经尝试了在此页面上找到的代码：

[http://www.grantgibson.co.uk/blog/2012/04/how-to-get-started-with-the-mifare-mf522-an-and-arduino/](http://www.grantgibson.co.uk/blog/2012/04/how-to-get-started-with-the-mifare-mf522-an-and-arduino/)

当我把所有东西都连接起来时，它只会给我一个空白的串行页面，并且 TX 和 RX 灯保持不亮。我已经尝试根据此页面建议的两个引脚来连接它：

[http://www.b2cqshop.com/products/203-arduino-rfid-module-kit-1356-mhz-with-tags-spi-w-and-r-by-cooqrobot.aspx](http://www.b2cqshop.com/products/203-arduino-rfid-module-kit-1356-mhz-with-tags-spi-w-and-r-by-cooqrobot.aspx)

没事了。我已经尝试了它附带的 RFID 标签和我的钥匙扣进入我的宿舍，但没有任何效果，Arduino 软件上的串行窗口仍然是空白的。这是我试图运行的代码：

http://pastie.org/4235666

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:07:37.383

尝试取消注释第 186-196 行：

```
// Serial.println("The card's number is  : ");
// etc 
```

每当标签进入范围时，这应该会提供一些详细的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:56:30.020

首先确保所有连接都正确。如果您的 MF522-AN 有引脚标记，请按此顺序进行。如果没有，请从左下角的引脚开始。

您使用的代码是检查第一对卡号是否与格兰特使用的相同（第 200-204 行）：

```
if(serNum[0] == 88) { // Is the first pair equal to 88?
   Serial.println("Hello Grant");
   } 
else if(serNum[0] == 173) { // Is the first pair equal to 173?
   Serial.println("Hello David");
   } 
```

可能您的卡片与这两个示例中的任何一个都不匹配。如果要逐对打印卡号，请注释这些行 (200-204) 和取消注释行 (186-196)：

```
 Serial.println("The card's number is  : ");
  Serial.print(serNum[0]);
  Serial.print(" , ");
  Serial.print(serNum[1],BIN);
  Serial.print(" , ");
  Serial.print(serNum[2],BIN);
  Serial.print(" , ");
  Serial.print(serNum[3],BIN);
  Serial.print(" , ");
  Serial.print(serNum[4],BIN);
  Serial.println(" "); 
```

如果要打印检测到卡的确认信息，还可以取消注释行 (173-177)：

```
 Serial.println("Card detected");
  Serial.print(str[0],BIN);
  Serial.print(" , ");
  Serial.print(str[1],BIN);
  Serial.println(" "); 
```

如果您发现 Dr.Leong 的原始代码令人困惑，请[试试这个](https://github.com/haoji/rfid)。我还在那里包含了引脚和 SPI 信息。在示例代码中，所有卡号对也都转换为十进制数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:15:03.753

我不知道您是否已经尝试过，但是您可能需要稍微更改从 Arduino 到 RFID 阅读器的连接，因为您拥有的 mega 2560 的 SPI 引脚与演示原本用于的 UNO 不同. 我相信 51\. 52 和 53 负责.. 你应该查看 Arduino 网站上的 Mega 2560 页面。

-本

# windows - 安装 numpy 时，我的 virtualenv pip 没有读取正确的 distutils.cfg

> ID：11480714
> 
> 赞同：4
> 
> 时间：2012-07-14T03:13:09.450
> 
> 标签：windows, numpy, virtualenv, pip, distutils

我在使用 Python 2.7 的 Windows 7 机器上。
我创建了一个名为“测试”的虚拟环境。在 test/lib/distutils/distutils.cfg 我设置：

```
[build]
compiler = mingw32 
```

现在在我的壳里我说：

```
...\test\Scripts>.\pip install numpy 
```

除其他外，输出显示：

```
No module named msvccompiler in numpy.distutils; trying from distutils
Running from numpy source  
directory. ...\test\build\numpy\numpy\distutils\system_info.py 
```

这里发生了什么？！numpy 是否正在尝试制作自己的 distutils？最后：

```
error: Unable to find vcvarsall.bat

----------------------------------------
Command python setup.py egg_info failed with error code 1 in C:\Users\Mark\test\build\numpy 
```

我了解 vcvarsall.bat 问题与缺少 Visual Studio 编译器有关。但是我已经指示 pip 使用 mingw32，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:59:29.430

有一个我不知道的概念叫做“激活”。Virtualenv 为你创建了一个 python 解释器。为了使用这个特殊的解释器，你必须在脚本目录中运行“激活”脚本。

# android - 应用程序图标未在平板电脑中显示？

> ID：11480727
> 
> 赞同：0
> 
> 时间：2012-07-14T03:15:25.180
> 
> 标签：android

`ic_launcher`我在项目的所有 res 文件夹中用我的应用程序图标更改了默认图标。当我在我的 GNexus 上测试它时，我的图标就在那里。但是，当我在 GTab10.1 上运行它时，会显示默认图标（绿色机器人）！我确定我从整个项目中删除了这个图标。

这是缓存问题吗？我该如何解决？

* * *

更新：

在我的选项卡中，当我转到 时`Manage Application > Application Info`，我会在那里看到我的图标，而不是默认图标！这真的很奇怪！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:07:51.750

`Project > Clean...`足以让我的偶像回来！谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:02:30.327

请确保在清单文件图标中使用您设置的新名称并使项目干净

# c# - c#，如何重用SqlCommand和OleDbCommand

> ID：11480728
> 
> 赞同：-1
> 
> 时间：2012-07-14T03:15:41.310
> 
> 标签：c#, sqlcommand, oledbcommand

这是我参考的网址：http: [//support.microsoft.com/kb/317559](http://support.microsoft.com/kb/317559)

我研究了他们的方法并应用了它们，一切都很好，直到我包含 2_2，错误消息：数据阅读器中没有当前查询。

我已经在 2_1 if 语句下关闭了我的 drSelect1_1。我需要关闭它，否则我无法创建一个新的。所以问题是，如何再次打开 drSelect1_1 以便我可以用于我的 2_2？我试图创建 drSelect1_1a 而不是使用 back drSelect1_1，出现错误：在调用 Read() 之前访问字段的尝试无效。有什么建议吗？代码如下：

```
cmdSelect.CommandText = "SELECT * FROM member WHERE username = @username";

connSelect.Open();

MySqlDataReader drSelect1_1 = cmdSelect.ExecuteReader();

if (drSelect1_1.Read())
{
     //1_1
     this.lbl1_1.Text = drSelect1_1["username"].ToString();

     //2_1
     if (drSelect1_1["direct1"].ToString() != "")
     {
        //this.ib2_1.Visible = true;
        this.lbl2_1.Text = drSelect1_1["direct1"].ToString();
        drSelect1_1.Close();

        cmdSelect.CommandText = "SELECT * FROM member WHERE username = '" + this.lbl2_1.Text + "'";
        MySqlDataReader drSelect2_1 = cmdSelect.ExecuteReader();

        if (drSelect2_1.Read())
        {                  
             drSelect2_1.Close();
        }
    }

    //2_2            
    if (drSelect1_1["direct2"].ToString() != "")
    {

    }
}
connSelect.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:26:29.090

**编辑#2**

好吧，如果是这样的话。在关闭阅读器之前，将值分配给块开头的变量。它会让你免于这么多麻烦。:)

```
if (drSelect1_1.Read())
{
     string username = drSelect1_1["username"].ToString();
     string direct1 = drSelect1_1["direct1"].ToString();
     string direct2 = drSelect1_1["direct2"].ToString();

     drSelect1_1.Close();

     //1_1
     this.lbl1_1.Text = username;

     //2_1
     if (direct1 != "")
     {
        //this.ib2_1.Visible = true;
        this.lbl2_1.Text = direct1;

        cmdSelect.CommandText = "SELECT * FROM member WHERE username = '" + this.lbl2_1.Text + "'";
        MySqlDataReader drSelect2_1 = cmdSelect.ExecuteReader();

        if (drSelect2_1.Read())
        {                  
             drSelect2_1.Close();
        }
    }

    //2_2            
    if (direct2 != "")
    {

    }
} 
```

* * *

您已关闭数据阅读器`drSelect1_1.Close();`并尝试再次访问它

```
if (drSelect1_1["direct2"].ToString() != "") 
```

删除此行

```
drSelect1_1.Close(); 
```

`}`或者只是在你的`Read()`街区之前移动它。

**编辑**：

只需创建另一个实例`MySqlCommand`，像这样：

```
MySqlCommand cmdSelect2 = new MySqlCommand("SELECT * FROM member WHERE username = '" + this.lbl2_1.Text + "'", connSelect);
MySqlDataReader drSelect2_1 = cmdSelect2.ExecuteReader(); 
```

因此，您可以安全地删除上述行。

# android - Android列表视图按钮拨打电话

> ID：11480736
> 
> 赞同：1
> 
> 时间：2012-07-14T03:19:06.840
> 
> 标签：android, android-intent

我正在尝试在我的 listView 项目上放置一个按钮并拨打电话...但到目前为止，我无法弄清楚如何将该数据分配给该按钮操作，这是我的代码...列表项本身是不可点击，只有按钮。我使用适配器从数组中获取数据

```
public View getView(int position, View convertView, ViewGroup parent)
{
    ViewHolder holder;
    //Get the current location object
    info lm = (info) getItem(position);

    //Inflate the view
    if(convertView==null)
    {
        convertView = dInflater.inflate(R.layout.dealbranch_layout, null);
        holder = new ViewHolder();
        holder.name = (TextView) convertView.findViewById(R.id.address);
        holder.call = (Button) convertView.findViewById(R.id.call);
        convertView.setTag(holder);
    }
    else
    {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.name.setText(lm.getName());

    holder.call.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {

        Intent call = new Intent (Itent.ACTION_CALL);

            ///  No clue.. >,<  ///  /// lm.getPhone() should get the phone# for this row.
            /// this action does not work   /////

        startActivity(call);
    }
    });

    return convertView;
} 
```

如果有人能给我指路，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T04:36:07.590

我们不知道您如何定义“信息”类，所以这是我的猜测：

首先，换行：

```
info lm = (info) getItem(position); 
```

到

```
final info lm = (info) getItem(position); 
```

那么这里是如何使用电话号码调用 ACTION_DIAL ：

```
holder.call.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View arg0) {

    Intent call = new Intent (Intent.ACTION_DIAL, Uri.parse("tel:" + lm.getPhone()));

        ///  No clue.. >,<  ///  /// lm.getPhone() should get the phone# for this row.
        /// this action does not work   /////

    startActivity(call);
} 
```

这是假设 lm.getPhone() 方法以字符串形式返回电话号码。

# asp.net - 以编程方式将用户登录到第三方网站的最佳方式（当 OAuth 不可用时）？

> ID：11480737
> 
> 赞同：2
> 
> 时间：2012-07-14T03:19:34.077
> 
> 标签：asp.net, encryption

我正在开发一个 asp.net 网站，该网站需要存储另一个网站的用户密码，以便我可以定期检索数据而无需用户继续登录。我无法想象在这种情况下单向哈希将如何工作因为用户不会每次都重新输入密码。我假设我需要加密密码以存储在 SQL Server 数据库中，并在需要时对其进行解密。但这就是我遇到困难的地方。基本基础架构是一个 C#/Asp.Net MVC3 网站，该网站在负载平衡的 Azure 计算实例上运行并将数据存储在 SQL Azure 中。我不是一个加密人，我不想犯一个菜鸟错误。那里似乎有很多信息，但对我来说似乎没有什么清楚的。即使我连接的数据不敏感，我希望像对待我的个人数据一样谨慎对待我的用户信息。任何有关如何进行的建议将不胜感激。

编辑：我当然明白存储密码不是最佳做法，但在某些情况下，这简直是不可避免的。我遇到过这个项目，但还没有尝试过： http: [//securentity.codeplex.com/](http://securentity.codeplex.com/)。它使用 Web 服务器上的数字证书。

第 3 方网站的用户可以将他们的数据设置为“公开”，在这种情况下我不需要存储他们的密码。所以我可以让用户选择这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:32:37.513

您应该看看[OAuth](http://oauth.net/)和[Single Sign-On](http://en.wikipedia.org/wiki/Single_sign-on)。
简单来说：不同系统之间只发送一个身份验证令牌。

您（站点）**永远不**应该知道用户密码。最多您应该知道**您**网站的密码的**哈希值。**

 **阅读上面的两个主题，您将知道如何正确保护您和“邻居”站点。

**编辑**

简而言之：
另一个*站点*（站点 B）实现 OAuth 服务器进程。您的站点（站点 A）实施 OAuth 客户端身份验证。从站点 B 请求用户信息时，您将用户重定向到站点 B 身份验证，以允许站点 A 从站点 B 读取有关用户的信息。站点 B 创建站点 A 可用于访问信息的令牌。这个令牌可以是有时间限制的（或没有时间限制的）。**

# android - 无法从视图投射到复选框

> ID：11480738
> 
> 赞同：2
> 
> 时间：2012-07-14T03:19:38.187
> 
> 标签：android

我一直在尝试在 Eclipse 工作台中构建我的应用程序，但是我偶然发现了一条错误消息，上面写着“无法从视图投射到复选框”。我尝试了不同的方法来解决问题无济于事，想知道是否有人可以帮助我

```
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.view.View;
import android.widget.Checkbox;
import android.widget.TextView;

@SuppressLint("ParserError")
public class MainActivity extends Activity {
TextView textView;
CheckBox pepBox, cheeseBox;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    pepBox = 
            (CheckBox) findViewById(R.id.checkBox1);
    cheeseBox =
            (CheckBox) findViewById(R.id.checkBox2);
    textView =
            (TextView) findViewById(R.id.textView2);
} 
```

那是我使用的编码

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="57dp"
    android:text="@string/pepperoni" />

<CheckBox
    android:id="@+id/checkBox2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/checkBox1"
    android:layout_marginTop="33dp"
    android:text="@string/extra_cheese" />

<Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/checkBox1"
    android:layout_below="@+id/textView1"
    android:onClick="onButton1Click"
    android:text="@string/show" /> 
```

那是我的xml文件谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T04:23:54.963

这让我有点摸不着头脑。我必须将您的代码加载到 eclipse 中才能找到它。更改`import android.widget.Checkbox;`为`import android.widget.CheckBox;`。（注意复选框中的大写 B。）当我进行更改时，您发布的代码可以正常工作。

eclipse 没有突出显示有问题的导入吗？将鼠标光标悬停在突出显示上将为您提供一些如何修复它的线索。（如果我听起来很傲慢，请原谅我。很难判断代表低的人是网站新手还是平台新手）

# c# - Dns.BeginGetHost... 方法阻塞

> ID：11480742
> 
> 赞同：14
> 
> 时间：2012-07-14T03:20:22.440
> 
> 标签：c#, asynchronous, dns, blocking

所以我想做**很多**DNS查询。

我从`Begin/EndGetHostEntry`异步对创建（数千个）任务：

```
var lookupTask = Task.Factory.FromAsync
   ( Dns.BeginGetHostEntry,
     (Func<IAsyncResult, IPHostEntry>) Dns.EndGetHostEntry,
     "google.com", 
     null
   ) 
```

然后`Task.WaitAll`为一切完成。我看到`ThreadPool`响应我的请求的线程数急剧增加。如果我强制设置`ThreadPool` `minThreads`为 500，则工作负载的消耗速度要快得多。所有这些都指向`Dns`异步实现中的阻塞。

如果我`Dns`用[托管的 Dns 客户端](http://arsofttoolsnet.codeplex.com/)`ThreadPool`替换，我可以在cpu 几乎处于空闲状态的情况下仅使用 1 或 2 个线程来消耗相同的工作负载。

问题是，`Dns`实现绝对是许多网络 API（、、、）的核心`HttpWebRequest`，`WebClient`而且`HttpClient`它们似乎都受到这个问题的影响。如果我使用 3rd 方库解析 DNS，并使用 IP 地址作为 uri 中的主机发出 HTTP 请求，然后更改`Host`标头以修复请求，与任何涉及`System.Net.Dns`.

这里发生了什么？我错过了什么还是`System.Net.Dns`实施真的那么糟糕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:01:53.117

System.Net.Dns 使用 windows`gethostbyname`函数进行 DNS 查询，并且根本没有异步函数。BeginGetHostEntry 函数基本上只是线程池上同步 GetHostEntry 调用的包装器。

上次我遇到同样的慢速/同步 DNS 查找问题时，我最终只使用了一个大的 ThreadPool 来完成工作，因为没有一个内置的 windows 或 .net DNS 相关函数支持正确的（并行）异步执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:45:38.030

这可能不是一个完整的答案，但是：

.net 中的 DNS 解析，打开与 dns 的连接，提出问题并关闭。您链接的托管 dns 客户端的示例清楚地表明，该库建立了连接，然后在保持打开状态的同时，您可以提出许多问题，就像做

```
nslookup -

>hostname1
>hostname2
... 
```

在dos/unix下

通常打开它可能需要一段时间，通过对已经打开的连接进行多次调用，您不必对自己和自身进行反向查找，以及与 dns 服务器的连接在第一次连接时所做的所有其他垃圾。例如：如果我列表中的第一个 DNS 服务器很忙，我的机器通常需要时间来解析到另一个可用的服务器，因此，如果您每次在 .net 下查找时都遇到这种情况库，你会看到很长的等待，需要很多线程，当然会增加 CPU 负载，而实际上并没有很多。

该实现并不“糟糕”，它只是不是为多个批处理作业而设计的。除非有电话我也错过了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T16:04:53.197

我没有 1000 个 URL 的数据集来测试您的代码，并且重复请求相同的 URL 应该会导致命中缓存（不是我网络的 DNS 服务器）。因此，请在测试后评论成功/失败。

我对测试这个（或任何其他假设）的建议是创建一个包含 1000 个要解析的 URL 的测试数据集，并对它们进行编号。然后设置一些日志记录（即：log4net 或类似的）并在每个 DNS 解析任务完成时写出一条语句，包括已完成任务的索引。我相信你会看到这 1000 个任务是同步完成的。或者至少一次以 2-8 个异步结果为一组，其中所有 2-8 个组都是同步的。

原因是连接管理。在内部，.Net 将只允许到同一端点的这么多并发连接。如果你打开 1000 个到你的 dns 服务器的连接，一次只有几个会成功。其余的需要等到一些较早的连接关闭，然后才能与同一端点（您的 DNS 服务器）建立另一个连接。

这种限制通常有充分的理由。但是对于像 DNS 这样的数据量相对较少且服务请求成本相对较低的东西，我可以将这个限制开放到最多 100-200 个同时 DNS 请求。

您可以使用此配置打开此限制：

```
<configuration>
  <system.net>
    <connectionManagement>
      <add address="*" maxconnection="100"/>
    </connectionManagement>
  </system.net>
</configuration> 
```

[System.Net.ConnectionManagement 的 MSDN](http://msdn.microsoft.com/en-us/library/fb6y0fyc.aspx)

您可以指定特定端点地址（URL 或 IP）以及到该地址的最大连接数。一些负载测试应用程序将只使用通配符`*`和 65535 来为所有内容打开它。

我怀疑托管 DNS 实现要么重用与 DNS 服务器的相同连接，要么具有类似上述的一些内部配置。

您可能在问题中包含的更多详细信息是，您是在查询同一物理网络上的本地 DNS 服务器还是来自本地 ISP 的 DNS 服务器，还是像[OpenDNS](http://www.opendns.com/)这样的公共 DNS 服务器。这些特定 DNS 服务器的配置可能会施加自己的限制（ISP 可能会限制速率，我不知道）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:20:49.747

当 dns 查找是异步的时，正常使用通常不会有更好的性能，因为代码需要答案才能继续工作。平行发展一无所获。只有当您只想查找多个 DNS 时，这才是真正的问题。

为什么它有点慢，并提高性能检查这个 SO Question and answer(s) [GetHostEntry is very slow](https://stackoverflow.com/questions/997046/gethostentry-is-very-slow)

# javascript - 在类/原型继承后获取当前的“类名”

> ID：11480745
> 
> 赞同：8
> 
> 时间：2012-07-14T03:20:58.553
> 
> 标签：javascript, inheritance, constructor

我在玩类/函数/原型继承，并获得了不错的设置。我理解的一些简单的事情。

[http://jsfiddle.net/rudiedirkx/rwPeD/6/](http://jsfiddle.net/rudiedirkx/rwPeD/6/)

出于调试目的，我想在每个构造函数中打印调用该构造函数的对象类型。例如，Ronin 构造函数调用 Ninja 构造函数，而后者又调用 Person 构造函数。为此，我做了一个`get_class`函数：

```
function get_class(obj) {
    var C = String(obj.__proto__.constructor);
    return C.match(/function (\w+)\(/, C)[1];
} 
```

那是行不通的。它总是返回“人”。为什么？每个“类”都有自己的构造函数，不是吗？如果我`console.log(this)`在每个构造函数中执行一个，Chrome Devtools 就会知道该对象是哪种类型。我如何到达那里（使用香草 JS）？

PS。我的 Chrome 中的完整输出：

![Chrome 开发工具输出](../Images/387a7f448933eee016684d3887c183fd.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:03:29.663

或者你可以做一些真正有效的事情......

```
function getClass(obj) {
    return obj.__proto__.constructor.name;
} 
```

obj.attr("class") 仅在方法 attr 存在时才有效，并且它不会在本机环境中。

你的建议在它的设计上还是很好的。

请注意，如果类不是原生类，例如 Array、String、RegExp、Error 等， **proto** .constructor.name 将始终返回“Object”...如果有人知道如何说服“name”属性返回真名，就算要加码，我也会给他买根香蕉给他/她的麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T09:01:28.883

我认为问题出在以下行。this.prototype.constructor 指向 Person.prototype 指向的内容。

```
this.prototype = Object.create(sup.prototype); 
```

您可能需要明确更改其引用。

```
this.prototype.constructor = this; 
```

类似的问题可以在[Get name of derived constructor in Javascript 中找到](https://stackoverflow.com/questions/20865249/get-name-of-derived-constructor-in-javascript/20865456#20865456)

# python - python将2个相似的对象与鸭子类型进行比较

> ID：11480746
> 
> 赞同：1
> 
> 时间：2012-07-14T03:21:13.393
> 
> 标签：python, comparison, duck-typing

也许我的设计完全不合时宜，但如果我有 2 个可比较的派生类对象，但 D1 类基本上总是 > D2 类。（例如将 Ivy Bridge 与 286 进行比较）。如果不使用 isinstance(D2)，我将如何实现 D1 类的比较以反映这一点？

我看到了这个： [比较两个对象](https://stackoverflow.com/questions/3550336/comparing-two-objects) 和 [如果在 Python 中进行鸭子类型，你应该测试 isinstance 吗？](https://stackoverflow.com/questions/9843569/if-duck-typing-in-python-should-you-test-isinstance)

我可以添加一个“类型”属性，然后比较类型，但我还不如使用 isinstance。最简单的方法是使用 isinstance... 有更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:57:47.750

我会问自己“是什么让 D2 总是大于 D1？” 换句话说，它们是否有一些共同的属性，作为比较的基础是有意义的。如果这个问题没有好的答案，那么可能值得询问为这两个对象创建比较是否真的有意义。

如果，在考虑了这些事情之后，您仍然认为进行比较是一个好主意，那么只需使用`isinstance`. 它仍然存在于语言中是有原因的——python 一直在反对那些被认为是不好的做法的东西，这意味着这`isinstance`并不总是一件坏事。

问题是当使用 isinstance 进行不必要的类型检查时。换句话说，用户经常在完全没有必要的“先看一下”上下文中使用它。

```
if not isinstance(arg,Foo): 
   raise ValueError("I want a Foo") 
```

在这种情况下，如果用户没有将看起来足够像 Foo 的东西放入函数中，它无论如何都会引发异常。为什么将其限制为仅 Foo 对象？但是，在您的情况下，从概念的角度来看，对象的类型似乎实际上很重要。这就是`isinstance`存在的原因（在我看来）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T03:57:40.577

我会做这样的事情：

```
class D1(object):
   def __val_cmp(self, other):
      # compare by attributes here
      if self.attr < other.attr:
         return -1
      elif self.attr > other.attr:
         return 1
      return 0

   def __cmp__(self, other):
      greater = isinstance(other, type(self))
      lesser = isinstance(self, type(other))
      if greater and lesser:
         # same type so compare by attributes
         return self.__val_cmp(other)
      elif greater:
         return 1
      elif lesser:
         return -1
      else:
         # other type is not a parent or child type, so just compare by attributes
         return self.__val_cmp(other) 
```

*   如果 D2 是 D1 的子类型，则 D2 的实例将始终比 D1 的实例比较少。
*   如果 D0 是 D1 的父类型，则 D0 的实例将始终比较大于 D1 的实例。
*   如果将 D1 的一个实例与 D1 的另一个实例进行比较，则将根据类的属性进行比较。
*   如果将 D1 的实例与未知类的实例进行比较，则比较将按类的属性进行

# android - android GCM 示例，从服务器发送消息时出错

> ID：11480748
> 
> 赞同：0
> 
> 时间：2012-07-14T03:22:44.273
> 
> 标签：android, google-cloud-messaging

我正在学习[http://developer.android.com/guide/google/gcm/demo.html#server-setup](http://developer.android.com/guide/google/gcm/demo.html#server-setup)上的教程。我使用网络服务器（它是网络上的免费 jsp 服务器，而不是本地主机）。一切都很好，我的设备已成功注册到服务器，在页面上它说 1 个设备已注册。但是，当我单击发送消息时，会弹出以下错误。我想知道是我使用的服务器阻止了某些方法（以便我切换服务器），还是谷歌提供的示例代码有漏洞？tks。

抱歉异常报告很长（但不知道需要什么）

```
Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.security.AccessControlException: access denied (java.net.SocketPermission android.googleapis.com:443 connect,resolve)
    java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
    java.security.AccessController.checkPermission(AccessController.java:546)
    java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    java.lang.SecurityManager.checkConnect(SecurityManager.java:1034)
    sun.net.www.http.HttpClient.openServer(HttpClient.java:527)
    sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:271)
    sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:328)
    sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:172)
    sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:793)
    sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:158)
    sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:896)
    sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)
    com.google.android.gcm.server.Sender.post(Sender.java:468)
    com.google.android.gcm.server.Sender.post(Sender.java:447)
    com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:170)
    com.google.android.gcm.server.Sender.send(Sender.java:121)
    com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:76)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    sun.reflect.GeneratedMethodAccessor47.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:244)
    java.security.AccessController.doPrivileged(Native Method)
    javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:276)
    org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:162)
note The full stack trace of the root cause is available in the Apache Tomcat/5.5.23 logs. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:27:37.377

确保您已将正确的 API 密钥粘贴到应用程序中。尝试使用“浏览器”API 密钥而不是“服务器”API 密钥。

# iphone - 如何将ios更新到特定版本

> ID：11480750
> 
> 赞同：9
> 
> 时间：2012-07-14T03:22:55.567
> 
> 标签：iphone, ios, xcode4

在我们的 App 测试期间，我们需要确保我们的 App 在大多数 iOS 版本上都能正常运行。有没有办法将 iPhone 的 iOS 版本更新到特定版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:42:40.287

您可以将 iPhone 升级到较新版本，但请注意，您不能再改回较低版本的 iOS。即，一旦手机运行 iOS 5.1，您就不能再将其更改回 iOS 5.0。

要进行升级，您可以使用 XCode 中的 Organizer 窗口。选择“设备”选项卡，您将看到更改该设备 iOS 版本的选项。

Apple 建议（和我一样）为要测试的每个 iOS 版本配备单独的设备。因此，每个版本一个 iPhone。然后，您可以轻松地在所有不同版本的 iOS 上测试您的代码。

[请参阅此处](http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/install_ios.html)的文档

特别是这个注释：

> 重要您安装的 iOS 版本必须与设备上当前安装的版本相同或更新。尝试安装较旧的软件映像将失败。安装尝试失败后，您必须重新安装上次成功安装的版本或更新版本的 iOS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T03:36:32.690

我相信在 iTunes 中，您可以上传已下载的固件。我曾经使用[http://www.felixbruns.de/iPod/firmware/](http://www.felixbruns.de/iPod/firmware/)来获取我越狱时想要的苹果托管固件的链接。当您插入设备时，您应该会看到一个允许您检查或安装更新的屏幕，如果您按住 Shift 键单击它，您可以选择一个文件。

注意：我从大约一年前的记忆中这样做，但如果我不完全正确，我相信我仍然有正确的想法和前进的道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T03:39:11.927

在我有限的知识范围内，除非您拥有要测试的 iOS 版本的 iphone/ipad，否则您无法做到这一点。

我应该强调它似乎没有办法以合法的方式做到这一点，这将使手机完好无损以测试 IAP 等。

希望有人证明我错了。

# asp.net-mvc-4 - 无点@import

> ID：11480751
> 
> 赞同：4
> 
> 时间：2012-07-14T03:23:10.603
> 
> 标签：asp.net-mvc-4, less, dotless

我正在尝试通过将变量+混合组件移动到新的 CSS 文件来分离我的 CSS 文件。如果这是一个问题，我也在使用托管在 Azure 中的 MVC 4 站点。

在使用混入的 CSS 文件的最顶部，我有：

```
@import "theme.less.css"; 
```

但是，它不会加载它。我得到的错误是：

```
variable @defaultColour is undefined on line 166 in file 'styles.less.css' 
```

很明显，`theme.less.css`没有被引用。dotless 的文档没有提到该`@import`声明。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T08:26:12.837

有一个选项可以将所有导入视为较少的文件 - 否则它假定因为它以 .css 结尾，所以它是直接导入的，例如不解析，只是推入。

当您运行不带参数的编译器 exe 时，这会提供所有选项

```
-a --import-all-less - treats every import as less even if ending in .css 
```

并在网络配置中

```
<dotless importAllFilesAsLess="true"> 
```

或者，如果您使用自己的处理程序，请在配置对象上设置选项。

将 .less.css 文件处理为 .less 而不是 .css 是一项功能请求，我已经推迟了一段时间，以防有人将 less 编译为 .less.css，但我认为我们应该添加一些内容

# xcode - 找不到 UITableViewController 的 .m 文件

> ID：11480755
> 
> 赞同：-1
> 
> 时间：2012-07-14T03:24:25.630
> 
> 标签：xcode, uitableview, ios5, storyboard

我意识到这可能是一个愚蠢的问题，但这里有：

我想通过代码（使用故事板创建）设置 uitableview 的背景，但是......我能找到的唯一 .h 文件位于 frameworks 文件夹中的 uitableviewcontroller.h 中。我可以看到的任何地方都没有 .m 文件，我需要将代码放在该特定表的“viewdidload”中。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:28:53.007

您需要创建自己的扩展类`UITableViewController`。在那里你可以覆盖`viewDidLoad`并将你的代码放在那里。然后，在您的故事板中，将表视图控制器的自定义类设置为您创建的类。您可以在右侧窗格内的第三个选项卡中执行此操作。

即使源代码`UITableViewController`可用（但它不是，因为 Cocoa 是一个封闭源代码框架），你的更改将适用于使用该类的任何地方，这绝不是一个好主意:)

# variables - txt 文件中的 wmic 变量

> ID：11480760
> 
> 赞同：0
> 
> 时间：2012-07-14T03:26:08.890
> 
> 标签：variables, assign, wmic

我正在尝试获取 WMIC 命令的输出以将变量分配给每一行。

我试图让输出看起来像这样：

1 个安装的第一个程序

安装了 2 秒的程序

3 第三个程序安装

4第四个程序安装

5 ...等

```
@Echo off

wmic /output:file.txt product get name /format:csv

rem wmic product get name

@Echo Off
SetLocal EnableDelayedExpansion
Set n=

Set _InputFile=c:\users\jorge\desktop\file.txt
For /F "tokens=*" %%I IN (%_InputFile%) DO (
Set /a n+=1
Set _var!n!=%%I
)
:: This line will display the variables just assigned
:: For testing only, delete when not needed
Set _
EndLocal

pause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:43:44.513

这是行不通的，因为 wmic 会为您提供 /f 无法读取的 Unicode 文件（请参阅[此处](http://ss64.com/nt/for_f.html)）。解决方法是使用 ('type file') 代替：

```
@Echo off

:: not really need a csv here...
wmic /output:file.txt product get name /format:table

Set n=0
:: Suggest to use internal call :label rather than delayed expansion
For /F "tokens=* skip=1 delims=" %%I IN ('type file.txt') DO @call :Assign %%I
Set _
pause
goto :EOF

    :Assign
    Set /a n+=1
    Set _var%n% = %*
    goto :EOF 
```

# php - 如何从 URL 字符串中获取参数？

> ID：11480763
> 
> 赞同：239
> 
> 时间：2012-07-14T03:27:25.893
> 
> 标签：php, url-parsing

我有一个 HTML 表单字段`$_POST["url"]`，有一些 URL 字符串作为值。

示例值为：

```
https://example.com/test/1234?email=xyz@test.com
https://example.com/test/1234?basic=2&email=xyz2@test.com
https://example.com/test/1234?email=xyz3@test.com
https://example.com/test/1234?email=xyz4@test.com&testin=123
https://example.com/test/the-page-here/1234?someurl=key&email=xyz5@test.com

```

等等

如何`email`仅从这些 URL/值中获取参数？

请注意，我没有从浏览器地址栏中获取这些字符串。

* * *

## 回答 #1

> 赞同：485
> 
> 时间：2012-07-14T03:47:17.973

你可以使用[`parse_url()`](http://php.net/manual/en/function.parse-url.php)and [`parse_str()`](http://php.net/manual/en/function.parse-str.php)。

```
$parts = parse_url($url);
parse_str($parts['query'], $query);
echo $query['email']; 
```

如果你想`$url`用 PHP 动态获取，看看这个问题：

[获取 PHP 中的完整 URL](https://stackoverflow.com/questions/6768793/get-the-full-url-in-php)

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2012-07-14T03:29:15.770

之后的所有参数`?`都可以使用`$_GET`数组访问。所以，

```
echo $_GET['email']; 
```

将从 url 中提取电子邮件。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2012-07-14T04:01:07.080

使用[parse_url()](http://php.net/manual/en/function.parse-url.php)和[parse_str()](http://php.net/manual/en/function.parse-str.php)方法。`parse_url()`将一个 URL 字符串解析为它的部分的关联数组。由于您只需要 URL 的单个部分，因此您可以使用快捷方式返回包含所需部分的字符串值。接下来，`parse_str()`将为查询字符串中的每个参数创建变量。我不喜欢污染当前上下文，因此提供第二个参数会将所有变量放入关联数组中。

```
$url = "https://mysite.com/test/1234?email=xyz4@test.com&testin=123";
$query_str = parse_url($url, PHP_URL_QUERY);
parse_str($query_str, $query_params);
print_r($query_params);

//Output: Array ( [email] => xyz4@test.com [testin] => 123 ) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-11-11T09:49:58.687

正如另一个答案中提到的，最好的解决方案是使用[`parse_url()`](http://php.net/manual/en/function.parse-url.php).

您需要使用`parse_url()`和的组合[`parse_str()`](http://php.net/manual/en/function.parse-str.php)。

解析 URL 并返回其`parse_url()`组件，您可以使用该`query`键获取查询字符串。然后你应该使用`parse_str()`它来解析查询字符串并将值返回到变量中。

```
$url = "https://example.com/test/1234?basic=2&email=xyz2@test.com";
parse_str(parse_url($url)['query'], $params);
echo $params['email']; // xyz2@test.com 
```

* * *

您也可以使用**regex**完成这项工作：[`preg_match()`](http://php.net/manual/en/function.preg-match.php)

您可以使用`preg_match()`从 URL 获取查询字符串的特定值。

```
preg_match("/&?email=([^&]+)/", $url, $matches);
echo $matches[1]; // xyz2@test.com 
```

### [`preg_replace()`](http://php.net/manual/en/function.preg-replace.php)

您也可以用**一行**`preg_replace()`来完成这项工作！

 **```
$email = preg_replace("/^https?:\/\/.*\?.*email=([^&]+).*$/", "$1", $url);
// xyz2@test.com 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-07-14T03:56:42.560

用于`$_GET['email']`URL 中的参数。用于`$_POST['email']`将数据发布到脚本。或`_$REQUEST`两者兼用。此外，如前所述，您可以使用`parse_url()`返回 URL 的所有部分的函数。使用名为“查询”的部分 - 在那里您可以找到您的电子邮件参数。更多信息： http: [//php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-02-08T10:18:16.123

您可以使用以下代码在 URL 之后获取电子邮件地址`?`：

```
<?php
if (isset($_GET['email'])) {
    echo $_GET['email'];
}
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-14T12:53:52.820

[我从 Ruel 的回答](https://stackoverflow.com/a/11480852/1307387)中创建了一个函数。

你可以使用这个：

```
function get_valueFromStringUrl($url , $parameter_name)
{
    $parts = parse_url($url);
    if(isset($parts['query']))
    {
        parse_str($parts['query'], $query);
        if(isset($query[$parameter_name]))
        {
            return $query[$parameter_name];
        }
        else
        {
            return null;
        }
    }
    else
    {
        return null;
    }
} 
```

例子：

```
$url = "https://example.com/test/the-page-here/1234?someurl=key&email=xyz5@test.com";
echo get_valueFromStringUrl($url , "email"); 
```

感谢@Ruel。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-27T10:20:47.627

```
$uri = $_SERVER["REQUEST_URI"];
$uriArray = explode('/', $uri);
$page_url = $uriArray[1];
$page_url2 = $uriArray[2];
echo $page_url; <- See the value 
```

这对我使用 PHP 非常有用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-02-18T17:39:32.067

这里还没有提到一个令我惊讶的更安全的答案：

[`filter_input`](https://www.php.net/manual/en/function.filter-input.php)

因此，在问题的情况下，您可以使用它从 URL 获取参数中获取电子邮件值：

`$email = filter_input( INPUT_GET, 'email', FILTER_SANITIZE_EMAIL );`

对于其他类型的变量，您可能需要[选择不同/适当的过滤器](https://www.php.net/manual/en/filter.filters.sanitize.php)，例如`FILTER_SANITIZE_STRING`.

我想这个答案不仅仅是问题所要求的——从 URL 参数中获取原始数据。但这是一个与以下结果相同的单行快捷方式：

```
$email = $_GET['email'];
$email = filter_var( $email, FILTER_SANITIZE_EMAIL ); 
```

不妨养成以这种方式抓取变量的习惯。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-12T15:46:27.370

```
$web_url = 'http://www.writephponline.com?name=shubham&email=singh@gmail.com';
$query = parse_url($web_url, PHP_URL_QUERY);
parse_str($query, $queryArray);

echo "Name: " . $queryArray['name'];  // Result: shubham
echo "EMail: " . $queryArray['email']; // Result:singh@gmail.com 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-12T17:14:18.553

在[Laravel](https://en.wikipedia.org/wiki/Laravel)中，我正在使用：

```
private function getValueFromString(string $string, string $key)
{
    parse_str(parse_url($string, PHP_URL_QUERY), $result);

    return isset($result[$key]) ? $result[$key] : null;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-09T10:14:32.623

解析字符串 URL 并获取 URL 中传递的查询参数的值的动态函数：

```
function getParamFromUrl($url, $paramName){
  parse_str(parse_url($url, PHP_URL_QUERY), $op); // Fetch query parameters from a string and convert to an associative array
  return array_key_exists($paramName, $op) ? $op[$paramName] : "Not Found"; // Check if the key exists in this array
} 
```

调用函数得到结果：

```
echo getParamFromUrl('https://google.co.in?name=james&surname=bond', 'surname'); // "bond" will be output here 
```

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2018-10-09T06:42:42.723

为了从 URL 字符串中获取参数，我使用了以下函数。

```
var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};
var email = getUrlParameter('email'); 
```

如果有很多 URL 字符串，那么您可以使用循环从所有这些 URL 字符串中获取参数“电子邮件”并将它们存储在数组中。**

# javascript - JavaScript：访问数组值

> ID：11480764
> 
> 赞同：0
> 
> 时间：2012-07-14T03:27:28.670
> 
> 标签：javascript, jquery, arrays, multidimensional-array

我是 java 脚本的新手，我需要一些关于以下代码示例的帮助。

基本上我想知道如何访问以下数组中的值

```
$('#sheet').sheet({
                   title: "${title}",
                   buildSheet: true,
                   workbook: "${sheet}"
               }); 
```

此工作簿：“${sheet}”包含二维数组。

实际上我有forloop来打印`workbook : ${sheet}` 内容

```
<c:forEach var="sheet" items="${workbook}">
                       <table>
                     <c:forEach var="row" items="${sheet}">
                             <tr>
                             <c:forEach var="cell" items="${row}">
                         <td>test test</td>
                       </c:forEach>
                       </tr>
                     </c:forEach>
                   </table>
           </c:forEach> 
```

基本上我想遍历`workbook`变量 内的值

我真的很感激任何帮助。感谢您查看这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:32:27.000

看看 jquery.each()

```
$.each(your2darray, function(key, value) {
   alert('key : ' + key + 'value:' + value);
} 
```

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:32:49.807

二维数组实际上是一个 JavaScript 对象，其功能类似于其他编程语言中的字典或地图。您可以通过将键传递给对象来获取值。

例子：

```
myObject = { 'key' : 'value' }
//get the value 
var myValue = myObject['key'];
alert(myValue); 
```

# javascript - 如何检查 NodeJS 中的 JSON 是否为空？

> ID：11480769
> 
> 赞同：58
> 
> 时间：2012-07-14T03:28:18.400
> 
> 标签：javascript, json, node.js, v8

我有一个函数可以检查请求是否有任何查询，并根据它执行不同的操作。目前，我已经`if(query)`做了别的事情。但是，似乎当没有查询数据时，我最终得到了一个`{}`JSON 对象。因此，我需要替换`if(query)`为`if(query.isEmpty())`或类似的东西。谁能解释我如何在 NodeJS 中做到这一点？V8 JSON 对象有这种功能吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-07-14T03:41:32.337

您可以使用以下任一功能：

```
// This should work in node.js and other ES5 compliant implementations.
function isEmptyObject(obj) {
  return !Object.keys(obj).length;
}

// This should work both there and elsewhere.
function isEmptyObject(obj) {
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      return false;
    }
  }
  return true;
} 
```

示例用法：

```
if (isEmptyObject(query)) {
  // There are no queries.
} else {
  // There is at least one query,
  // or at least the query object is not empty.
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-14T03:43:35.107

你可以使用这个：

```
var isEmpty = function(obj) {
  return Object.keys(obj).length === 0;
} 
```

或这个：

```
function isEmpty(obj) {
  return !Object.keys(obj).length > 0;
} 
```

你也可以使用这个：

```
function isEmpty(obj) {
  for(var prop in obj) {
    if(obj.hasOwnProperty(prop))
      return false;
  }

  return true;
} 
```

如果使用[下划线](http://underscorejs.org/)或[jQuery](http://api.jquery.com/)，您可以使用它们的`isEmpty`or`isEmptyObject`调用。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-09-12T08:55:03.640

```
Object.keys(myObj).length === 0; 
```

由于只需要检查 Object 是否为空，因此最好直接调用本机方法 Object.keys(myObj).length 通过内部迭代 for..in 循环返回键数组。As`Object.hasOwnProperty`返回布尔结果基于对象中存在的属性，该对象本身使用 for..in 循环进行迭代，并且时间复杂度为 O(N2)。

另一方面，调用本身具有以上两个实现或其他实现的 UDF 将适用于小对象，但如果对象大小很大，则会阻塞将对整体性能产生严重影响的代码，除非事件循环中没有其他东西在等待。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-12T21:23:21.507

如果您与 兼容`Object.keys`，并且 node 确实具有兼容性，那么您应该确定使用它。

但是，如果您没有兼容性，并且出于任何原因使用循环函数是不可能的 - 像我一样，我使用了以下解决方案：

```
JSON.stringify(obj) === '{}' 
```

仅在必须时才将此解决方案视为“最后的手段”。

请参阅评论“此解决方案在许多方面并不理想”。

我有一个不得已的方案，而且效果很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-12T08:52:10.307

我的解决方案：

```
let isEmpty = (val) => {
    let typeOfVal = typeof val;
    switch(typeOfVal){
        case 'object':
            return (val.length == 0) || !Object.keys(val).length;
            break;
        case 'string':
            let str = val.trim();
            return str == '' || str == undefined;
            break;
        case 'number':
            return val == '';
            break;
        default:
            return val == '' || val == undefined;
    }
};
console.log(isEmpty([1,2,4,5])); // false
console.log(isEmpty({id: 1, name: "Trung",age: 29})); // false
console.log(isEmpty('TrunvNV')); // false
console.log(isEmpty(8)); // false
console.log(isEmpty('')); // true
console.log(isEmpty('   ')); // true
console.log(isEmpty([])); // true
console.log(isEmpty({})); // true 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-14T11:42:56.627

```
const isEmpty = (value) => (
    value === undefined ||
    value === null ||
    (typeof value === 'object' && Object.keys(value).length === 0) ||
    (typeof value === 'string' && value.trim().length === 0)
  )

module.exports = isEmpty; 
```

# c++ - 是否可以从较晚的模板参数推断或默认较早的模板参数？

> ID：11480771
> 
> 赞同：2
> 
> 时间：2012-07-14T03:28:29.447
> 
> 标签：c++, templates, c++11

我的目标是 c++11（使用 g++ 4.7 版）和 c++0x（使用 icpc 12.something，intel c++ 编译器）。有一天我可能会使用clang。

我有以下数据结构：

```
template<typename mydata_t>
struct mystruct {
    template<typename mycmp_t,
             int (*cmp)(const mydata_t &, const mycmp_t &)
             >
    void insert(const mydata_t &value, const mycmp_t &key) {
        // use key to search for where to put value, by calling
        // cmp(item_already_in_mystruct, key);
    }
}; 
```

这个想法是客户可以做

```
int double_double_compare_fun(const double &d1, const double &d2) { ...; }
int double_int_compare_fun(const double &d, const int &i) { ...; }
int main(void) {
    struct mystruct<double> s;
    s.insert<double, double_double_compare_fun>(4.2, 4.2);
    s.insert<int, double_int_compare_fun>(6.2, 6);
} 
```

或者不那么傻的东西。

我目前有这个工作，它不是太疯狂。但我希望我能做得更好。

`double_double_compare_fun`并且`double_int_compare_fun`已经命名了第二个参数的类型。所以在我的脑海中，我想有一些方法可以让编译器将第一个模板参数推断为`insert`. 我很想能够说

```
s.insert<double_double_compare_fun>(4.2, 4.2);
s.insert<double_int_compare_fun>(6.2, 6); 
```

并`mycmp_t`从 的签名`cmp`或 的类型推断`key`。或者，如果`mycmp_t`可以将第二个参数的类型默认为`cmp`.

我尝试了这个主题的变体，但它们没有用，但希望它能给你一些直觉：

```
template<template<typename mycmp_t>
         int (*cmp)(const mydata_t &, const mycmp_t &)
         >
void insert(const mydata_t &value, const mycmp_t &key); 
```

（给我`expected 'class' before '(' token, expected identifier before '(' token, expected '>' before '(' token`）。我也想象过使用类似的模板，`template<int (*cmp)(const mydata_t &, const mycmp_t &), typename mycmp_t>`但它说`mycmp_t`签名中的现在还没有定义（还）等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:40:14.357

通常，您在惯用的 C++ 中以另一种方式传递回调：不绑定到特定类型或参数并作为普通参数：

```
template<class K, class F>
void insert(T const& v, K const& k, F f); 
```

但是，要回答您的实际问题，不，您不能那样做。

# php - 如果在三元运算符中其他，如何做到这一点

> ID：11480776
> 
> 赞同：0
> 
> 时间：2012-07-14T03:30:24.007
> 
> 标签：php

我正在查看页面中查找电子邮件。电子邮件可以通过两种方式到达那里。通过 POST 或 SESSION。如果它是 $_POST 那么我想使用 $_POST 电子邮件，否则我想使用会话中保存的电子邮件。目前我的代码如下

```
$email = (isset($_POST['email']) ? $_POST['email'] : ''); 
```

用最少的代码行最好的方法是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T03:33:20.527

我猜你只是在寻找这个（假设电子邮件地址存储在`$_SESSION`key 下的数组中`email`）：

```
$email = (isset($_POST['email']) ? $_POST['email'] : $_SESSION['email']); 
```

还是我误解了你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:41:21.073

尝试这个：

```
$email = (isset($_POST['email']) ? $_POST['email'] : (isset($_SESSION['email'])) ? $_SESSION['email'] : ''); 
```

这与以下内容相同：

```
if(isset($_POST['email'])) {
    $email = $_POST['email'];
} else {
    if(isset($_SESSION['email'])) {
        $email = $_SESSION['email'];
    } else {
        $email = '';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:20:55.197

一个有趣的替代@Gabriel Santos 的正确答案

```
$input = function($param, $default = '') {
    static $input;

    if (null === $input) {
        $input = array_merge($_SESSION, $_POST);
    }

    return isset($input[$param]) ? $input[$param] : $default;
};

// get input
$email = $input('asd'); 
```

# assembly - AT&T 汇编代码中的分段错误（核心转储）错误

> ID：11480777
> 
> 赞同：2
> 
> 时间：2012-07-14T03:30:35.160
> 
> 标签：assembly

我用汇编语言编写了一个简单的程序，试图在我的 64 位 Ubuntu 操作系统上运行它。但是，它因“分段错误（核心转储）错误”而失败。

这是我的代码：

```
 .section .data
    values :
        .int 10, 15, 20, 25, 30 ,35, 40, 45, 50, 55, 60
    output :
        .asciz "The value is %d\n"
   .section .text
   .globl main
   main :
        nop
        movl $0, %edi
   loop :
        movl values( , %edi, 4), %eax
        pushq %rax
        pushq $output
        call printf
        addl $8, %esp
        inc %edi
        cmpl $11, %edi
        jne loop
        movl $0, %ebx
        movl $1, %eax
        int $0x80 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T05:03:18.770

您的代码中有多个问题。

从我推断您正在尝试制作 64 位可执行文件`64bit Ubuntu`。`pushq %rax`

如果是这样的话，那么...

这里：

```
pushq %rax
pushq $output
call printf
addl $8, %esp 
```

函数调用后您没有正确平衡堆栈。你还记得这是 64 位代码吗？您需要添加到`rsp`，而不是`esp`。此外，如果您推送 2 个 8 字节参数，则必须准确删除 2 个 8 字节参数，这意味着您必须添加 16 个，而不是 8 个。

但它甚至比这更糟糕。在 64 位模式下，参数的传递方式不同。第一个参数位于寄存器`rdi`、`rsi`、`rdx`、`rcx`和`r8`中`r9`。所以，这给了我们：

```
movq %rax, %rsi
movq $output, %rdi
movq $0, %rax ; number of vector registers used for var-arg-function printf()
call printf 
```

这里：

```
inc %edi 
```

您刚刚通过调用破坏了 的值，`rdi`并使用此寄存器进行参数传递。您需要`rdi`在调用之前手动推送，然后将其弹回。或者您可以将其保存在全局变量中。如果您选择压入和弹出，请确保堆栈指针在任何指令`rsp`之前始终是 16 字节对齐的。`call`

这里：

```
movl $0, %ebx
movl $1, %eax
int $0x80 
```

您正在使用 32 位系统调用接口。在 64 位程序中，您必须使用 64 位系统调用接口：

```
movq $60, %rax ; sys_exit
movq $0, rdi ; return 0 (success)
syscall 
```

现在，我认为这个也可能有问题：

```
movl $0, %edi
loop :
movl values( , %edi, 4), %eax 
```

一般来说，您不应该在 64 位代码中的地址计算中使用 32 位寄存器和 32 位指令。我将其更改为：

```
movl $0, %rdi
loop :
movl values( , %rdi, 4), %eax 
```

如果这两个都不起作用，因为地址的`values`距离超过 2GB `rip`（事实：在 64 位模式下的大多数指令中，位移仅限于内存操作数中的 32 位有符号整数，并且它们中的大多数没有仅位移的内存操作数也可以在 64 位模式下编码，它们在那里使用`rip`-relative 寻址），您需要手动将 64 位地址`values`和索引添加到数组中乘以 4。确保执行 64 位加法，没有任何截断一路上。

必读：

*   System V 应用二进制接口 AMD64 架构处理器补充草案版本 0.99.6

*   不同 C++ 编译器和操作系统的调用约定 作者：Agner Fog

# netbeans - NetBeans 用另一个方法替换所有出现的方法？

> ID：11480781
> 
> 赞同：3
> 
> 时间：2012-07-14T03:32:03.650
> 
> 标签：netbeans, refactoring

我正在寻找一种方法来重构一个方法的所有用法。我正在对一个类进行去单例化，并且我正在尝试`getInstance()`用另一种方法替换所有方法。

就我而言，我想更改`OldClass.getInstance()`to be的所有用法`NewClass.getInstance().getOldClass(0)`。这可以通过 NetBeans 的重构工具实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:07:49.833

在 Netbeans 中，您可以折射方法的名称，但不能使用折射工具将 Cm() 更改为 Cm().m2()。

所以最好的解决方案是使用`Edit`->`Replace`或`Replace in project`.

然后全部替换`.getInstance()`为 `.getInstance().getOldClass(0)`. （注意范围）。不用担心它不会直接替换所有出现，它会找到匹配然后显示带有复选框的树，您可以单击`Replace`以替换选定的出现。

# rest - 通过 Web Api 在 POST 中返回对象是一种不好的做法吗？

> ID：11480791
> 
> 赞同：1
> 
> 时间：2012-07-14T03:34:27.560
> 
> 标签：rest, asp.net-web-api, solid-principles

我正在使用 Web Api 并且有一个场景，客户端每隔*n*秒发送一次心跳通知。有一个心跳对象是在 POST 而不是 PUT 中发送的，因为在我看来，它们正在创建一个新的心跳而不是更新现有的心跳。

此外，客户端有一个要求，要求他们检索所有其他当前在线的客户端以及单个客户端拥有的未读消息的数量。在我看来，我有两个选择：

1.  执行 POST，然后执行 GET，从纯 REST 的角度来看，这对我来说似乎更干净。我正在创建和检索，我认为 SOLID 原则更愿意相应地拆分它们。但是，这种方法意味着两次往返。
2.  让 POST 返回一个对象，该对象包含与 GET 否则会完成的相同信息。这会将所有内容合并到一个请求中，但我担心这种方法会被认为是不明智的。这不是一个纯粹的 POST。

删除的选项 #2 如下所示：

```
public HeartbeatEcho Post(Heartbeat heartbeat)
    {
    } 
```

HeartbeatEcho 是一个包含其他在线客户端的属性和未读消息数的类。

Web Api 当然支持选项#2，但仅仅因为我可以做某事并不意味着我应该这样做。选项#2 是可憎的、过早的优化还是实用主义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T03:50:21.313

选项2根本不是可憎的。POST 请求创建一个新资源，但资源本身返回给调用者是很常见的。例如，如果您的资源是数据库中的项目（例如，Person），则 POST 请求将发送 INSERT 操作所需的成员（例如，姓名、年龄、地址），并且响应将包含 Person 对象，该对象在除了作为输入传递的参数之外，它还有一个标识符（数据库主键），可用于唯一标识对象。

请注意，对于 POST 请求仅返回新创建资源的 id 也是完全有效的，但这是您可以选择的，具体取决于客户端的要求。

```
public HttpResponseMessage Post(Person p)
{
    var id = InsertPersonInDBAndReturnId(p);
    p.Id = id;
    var result = this.Request.CreateResponse(HttpStatusCode.Created, p);
    result.Headers.Location = new Uri("the location for the newly created resource");
    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T03:46:28.283

无论哪种方式解决您的业务问题都会奏效。您是正确的 POST 新记录与 PUT 更新现有记录。

**建议：** 您可能要考虑的一件事是将 Redis 添加到您的堆栈中，并且应用程序可以非常快速地发布，然后您可以将 Pub/Sub 功能用于 echo 部分或 Blpop（阻塞直到记录匹配标准）。它超级快，可以帮助您扩展并为您尝试做的事情完美设计。

见：[http ://redis.io/topics/pubsub/](http://redis.io/topics/pubsub/)

见：[http ://redis.io/commands/blpop](http://redis.io/commands/blpop)

我已经将 Redis 用于类似的用途，但也使用了 RabbitMQ 和 RabbitMQ，我们添加了 socket.io 连接来实时“流式传输”心跳，而无需长时间轮询。

# django - DJANGO RESTAPI--找不到模块错误

> ID：11480799
> 
> 赞同：0
> 
> 时间：2012-07-14T03:35:52.910
> 
> 标签：django

我从以下链接下载了代码并将其存储在下面的位置，

[http://django-rest-interface.googlecode.com/svn/trunk/django-rest-interface](http://django-rest-interface.googlecode.com/svn/trunk/) _

地点

c:/Python27/Djangoprojects/django_restapi

项目地点

c:/Python27/Djangoprojects/mysite/polls

URLS.py

```
from django.conf.urls.defaults import *
from polls.views import *

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
     (r'^polls/$',index),
     (r'^polls/(?P<poll_id>\d+)/$',detail),
     (r'^polls/(?P<poll_id>\d+)/results/$',results),
     (r'^polls/(?P<poll_id>\d+)/vote/$',vote),
     (r'^admin/', include(admin.site.urls)),
     (r'^xml/polls/(.*?)/?$',xml_poll_resource),
) 
```

视图.py

```
from django_restapi.model_resource import Collection
from django_restapi.responder import XMLResponder
from django_restapi.responder import *
from django_restapi_tests.polls.models import Poll, Choice

xml_poll_resource = Collection(    
 queryset = Poll.objects.all(),    
 permitted_methods = ('GET', 'POST', 'PUT', 'DELETE'),    
 responder = XMLResponder(paginate_by = 10)
) 
```

当我尝试下面指定的 URL 时出现以下错误，

错误：

/xml/polls/ 处的 ImportError 没有名为 django_restapi.model_resource 的模块

请求方法：

获取请求网址：

```
http://127.0.0.1:8000/xml/polls/ 
```

Django 版本：

1.3.1 异常类型：

导入错误

异常值：

没有名为 django_restapi.model_resource 的模块

异常位置：

C:\Python27\Djangoprojects\mysite..\mysite\polls\views.py 在第 1 行

Python可执行文件：

C:\Python27\python.exe

蟒蛇版本：

2.7.2

蟒蛇路径：

['C:\Python27\Djangoprojects\mysite', 'C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg', 'C:\Python27\lib\site-packages\django_db_log- 2.2.1-py2.7.egg'、'C:\Python27'、'c:\Python27\lib\site-packages\django\bin\django-admin.py'、'c:\mysql'、'c :\pythonpath\djangoprojects\django_restapi', 'C:\Windows\system32\python27.zip', 'C:\Python27\DLLs', 'C:\Python27\lib', 'C:\Python27\lib\plat-赢', 'C:\Python27\lib\lib-tk', 'C:\Python27\lib\site-packages', 'C:\Python27\lib\site-packages\wx-2.8-msw-unicode']

服务器时间：

2012 年 7 月 12 日星期四 22:31:04 -0400

如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:38:04.527

从你的代码来看，`Polls`目录应该在里面`django_restapi`，你应该把父级`django_restapi`放在 python 路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-11T00:46:03.067

你检查了setting.py文件吗？

# c++ - 如何从 ofxKinect 视频中删除像素噪声？

> ID：11480800
> 
> 赞同：0
> 
> 时间：2012-07-14T03:35:55.317
> 
> 标签：c++, video, imaging, openframeworks, ofxkinect

我正在寻找一些帮助，以了解如何从视频中删除一些低质量的像素噪声，这些是我通过开放框架从 xbox kinect 获得的。我正在针对图像的“移动”部分运行逻辑，以确定哪种颜色移动得最多，并使用这些区域来检测这些像素移动的深度。我附上了一张照片，试图更好地解释我的问题。

[http://imago.bryanmoyles.com/xxw80](http://imago.bryanmoyles.com/xxw80)

当然我知道代码会被要求，所以我会发布我目前所拥有的，但我正在寻找的最重要的是使用 C++ 平滑照片中像素化区域的好算法

```
for(int y = 0; y < kinect.height; y += grid_size) {
    for(int x = 0; x < kinect.width * 3; x += 3 * grid_size) {
        unsigned int total_r = 0, total_b = 0, total_g = 0;

        for(int r = 0; r < grid_size; r++) { 
            for(int c = 0; c < grid_size; c++) {
                total_r += color_pixels[(y * kinect.width * 3 + r * kinect.width * 3) + (c * 3 + x + 0)];
                total_b += color_pixels[(y * kinect.width * 3 + r * kinect.width * 3) + (c * 3 + x + 1)];
                total_g += color_pixels[(y * kinect.width * 3 + r * kinect.width * 3) + (c * 3 + x + 2)];
            }
        }

        unsigned char average_r = total_r / (grid_size * grid_size), 
            average_b = total_b / (grid_size * grid_size), 
            average_g = total_g / (grid_size * grid_size);

        for(int r = 0; r < grid_size; r++) { 
            for(int c = 0; c < grid_size; c++) {
                color_pixels[(y * kinect.width * 3 + r * kinect.width * 3) + (c * 3 + x + 0)] = average_r;
                color_pixels[(y * kinect.width * 3 + r * kinect.width * 3) + (c * 3 + x + 1)] = average_b;
                color_pixels[(y * kinect.width * 3 + r * kinect.width * 3) + (c * 3 + x + 2)] = average_g;
            }
        }
    }
}

for(int y = 0; y < kinect.height; y++) {
    for (int x = 0; x < kinect.width * 3; x += 3) {
        int total_difference = abs(color_pixels[y * kinect.width * 3 + x + 0] - rgb[0])
            + abs(color_pixels[y * kinect.width * 3 + x + 1] - rgb[1])
            + abs(color_pixels[y * kinect.width * 3 + x + 2] - rgb[2]);

        unsigned char defined_color;

        if(total_difference < 40) {
            defined_color = (unsigned char) 255;
        } else {
            defined_color = (unsigned char) 0;
        }

        color_pixels[y * kinect.width * 3 + x + 0] = defined_color;
        color_pixels[y * kinect.width * 3 + x + 1] = defined_color;
        color_pixels[y * kinect.width * 3 + x + 2] = defined_color;
    }
} 
```

再次，我想重申我的代码不是问题，我只是在这里发布它，以便您了解我不只是盲目地询问。我真正需要的是一些关于如何平滑像素化图像的方向，这样我的平均值就不会因为质量差而逐帧混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:49:40.810

您可以使用 ofxOpenCV 插件中的一些方法处理来自相机的图像。在那里你会有模糊、不扭曲、腐蚀等方法。它很容易设置，因为它已经是一个插件。看一下 openCvExample，它应该包含在你的 openFrameworks 中。有关上述方法的更多信息，请查看[此处](http://www.openframeworks.cc/documentation/ofxOpenCv/ofxCvImage.html)。如果我正确理解您的问题，那么图像上的一点模糊可能已经解决了您的问题。

# rspec - 当在一个 RSpec 套件中调用多个 with_api() 测试时，Goliath 会破坏 em-synchrony/em-hiredis

> ID：11480805
> 
> 赞同：1
> 
> 时间：2012-07-14T03:37:14.723
> 
> 标签：rspec, redis, eventmachine, fibers, goliath

我只是在使用 RSpec 测试 Goliath API 时遇到了奇怪的行为。我的一项测试如下所示：

```
require 'helper'

describe Scales::Dispatch do

  it "should return a 404 if resource was not found" do
    with_api(Scales::Server) do
      get_request(:path => '/') do |client|
        client.response_header.http_status.should == 404
      end
    end
  end

  it "should return a resource" do
    Scales::Storage::Sync.set "/existing", "some content"

    with_api(Scales::Server) do
      get_request(:path => '/existing') do |client|
        client.response_header.http_status.should == 200
        client.response.should == "some content"
      end
    end

    Scales::Storage::Sync.del "/existing"
  end

end 
```

API 基本上只是借助以下方式在 redis 中查找密钥`em-synchrony/em-hiredis`：

```
module Scales
  module Lookup
    class << self

      def request(env)
        response = Storage::Async.get(path(env))
        response.nil? ? render_not_found : render(response)
      end

      private

      def path(env)
        env["REQUEST_URI"]
      end

      def render_not_found
        [404, {}, ""]
      end

      def render(response)
        [200, {}, response]
      end

    end
  end
end 
```

两个测试单独运行，但不能一起运行。第一个执行后，整个系统会停顿大约 10 秒。然后调用第二个 with_api 但从未执行 get_request - 我认为它正在以某种超时运行。

我在另一个非常相似的测试中发现了相同的行为，该测试正在推送和弹出这样的队列：

```
describe Scales::Queue::Async do

  [Scales::Queue::Async::Request, Scales::Queue::Async::Response].each do |queue|
    context queue.name.split("::").last do

      it "should place a few jobs" do
        async do
          queue.add "job 1"
          queue.add "job 2"
          queue.add "job 3"
        end
      end

      it "should take them out blocking" do
        async do
          queue.pop.should == "job 1"
          queue.pop.should == "job 2"
          queue.pop.should == "job 3"
        end
      end

    end
  end

end 
```

second 的内容`async do ..`也根本不执行。在没有加载 goliath 的情况下，一个非常相似的测试可以完美运行：

```
require 'eventmachine'
require 'em-synchrony'
require 'em-synchrony/em-hiredis'

module Helpers

  def async
    if EM.reactor_running?
      yield
    else
      out = nil
      EM.synchrony do
        out = yield
        EM.stop
      end
      out
    end
  end

end

RSpec.configure do |config|
  config.include Helpers
  config.treat_symbols_as_metadata_keys_with_true_values = true
end

describe "em-synchrony/em-hiredis" do

  it "should lpush a job" do
    async do
      redis = EM::Hiredis.connect
      redis.lpush("a_queue", "job1")
    end
  end

  it "should block pop a job" do
    async do
      redis = EM::Hiredis.connect
      redis.brpop("a_queue", 0).last.should == "job1"
    end
  end

end 
```

前面`async do ..`的任务是相同的 RSpec 助手。

我整天都在疯狂地寻找，但对我来说这没有任何意义。因为最后一个测试运行得很好，我想它既不是`em-synchrony`也不是`em-synchrony/em-hiredis`。

也许歌利亚并没有停止，占领新兴市场的时间有点太长了？

感谢您的帮助，这让我发疯了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:34:24.257

好的，我找到了解决方案。

我在每个请求之前检查了连接，如果它在那里，我没有重新建立它。但它似乎每次停止事件机器都会关闭连接，所以基本上对于每个新请求都有一个连接超时，它会默默地失败。

谢谢你的时间！

# c++ - Effective C++ Item 43 知道如何访问模板化基类中的名称

> ID：11480807
> 
> 赞同：1
> 
> 时间：2012-07-14T03:38:02.003
> 
> 标签：c++, templates, template-specialization

在本书的第 43 条中，据说下面的代码不会编译。我的理解是，实例化该方法时会发生编译错误`LoggingMsgSender::sendClearMsg`。

但是，对于三个编译器（VC 2005、gcc 4.4.1 和一个用于嵌入式设备），我已经尝试过了。它们都没有显示任何编译错误。

是否有任何编译器可以显示书中提到的错误？欢迎任何建议。谢谢您的帮助。

（我在 VC 2005 的源代码中发现了一个与这种模板基类函数调用相关的潜在编译器错误，这就是我想要编译错误的原因。说来话长……）

```
class CompanyX
{
public:
    void sendClearText(){};
};

typedef int MsgInfo;

template<typename Company>
class MsgSender {
public:
    void sendClear(const MsgInfo&)
    {
        Company c;
        c.sendClearText();
    }
};

template<typename Company>
class LoggingMsgSender : public MsgSender<Company> {
public:
    void sendClearMsg(const MsgInfo& info)
    {
        sendClear( info );   // ERROR : will not compile despite clearly being in base class.
    }
};

int main()
{
    LoggingMsgSender<CompanyX> sender;
    sender.sendClearMsg(1); // specialization of the method!!!
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:42:16.270

例如[http://liveworkspace.org/code/273c71cd53111dd8c6aaa54e64c53548 。](http://liveworkspace.org/code/273c71cd53111dd8c6aaa54e64c53548)得到一个错误。在这种情况下，在函数 sendClearMsg 中我们应该使用`this->sendClear(info);`编译器是 gcc 4.7.1。所以，现在是 2012 年，为什么你使用旧的编译器？

# cordova - Phonegap/Cordova 我的相机插件停止升级 :(

> ID：11480810
> 
> 赞同：0
> 
> 时间：2012-07-14T03:38:36.143
> 
> 标签：cordova

我一直在 Phonegap 1.2.0 上运行我的应用程序，并决定是时候跳到 Cordova 1.9.0

我有一个扩展相机的插件（所以我可以在拍照时裁剪等）并且它似乎已经随着升级而中断（我更改了对 Cordova 的所有引用，即用于 PG 的 CDV 和用于 phonegap 的cordova 在需要的地方）。似乎通过扩展

```
Camera.prototype.MYFUNCTION 
```

只是没有通过访问“MYFUNCTION”的效果

```
navigator.camera.MYFUNCTION 
```

在用于显示我的功能的位置显示为未定义

我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:43:15.310

不确定它是否相关，但这可能与它有关。 [http://simonmacdonald.blogspot.ca/2012/07/phonegap-android-plugins-sometimes-we.html](http://simonmacdonald.blogspot.ca/2012/07/phonegap-android-plugins-sometimes-we.html)

Cordova 2.0.0rc1 的部分现在正在标记，目标是在星期一发货。2.0.0 计划于周五在 PhoneGap 日发布。我说今天试试 1.7.1，星期一试试 2.0.0rc1，然后星期五试试 2.0.0。

# mysql - 数据库设计 - 问题、答案、标签

> ID：11480811
> 
> 赞同：0
> 
> 时间：2012-07-14T03:38:41.370
> 
> 标签：mysql, sql, database-design, tags

我一直在这里查看问题和答案：[为标签或标签推荐的 SQL 数据库设计](https://stackoverflow.com/questions/20856/how-do-you-recommend-implementing-tags-or-tagging)，我了解数据库的一般设计，但它是如何工作的？例如，假设我有这样的设计设置：

`Table:Questions
Columns: QuestionID, Title, Content`

 ````
Table: Tags
Columns: TagID, Title 
```` 

`Table: QuestionTag
Columns: QuestionID, TagID`

现在，当用户创建一个新问题时，我会将该问题插入 Questions 表中，并将 QuestionID 设置为自动递增吗？然后对标签做同样的事情？

但是，如果我不一定知道插入时的 ID 是什么，如何将 QuestionID 与 QuestionTag 表中的 TagID 匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:41:49.460

如果是mysql，则可以使用跟踪最后一个ID[`MYSQL_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/mysql-insert-id.html)

# python - 在 Python 中读取目录的安全方法

> ID：11480812
> 
> 赞同：5
> 
> 时间：2012-07-14T03:38:52.877
> 
> 标签：python, directory, system-calls

```
try:
    directoryListing = os.listdir(inputDirectory)
    #other code goes here, it iterates through the list of files in the directory

except WindowsError as winErr:
    print("Directory error: " + str((winErr))) 
```

这很好用，我已经测试过当目录不存在时它不会阻塞和死亡，但是我正在阅读一本 Python 书籍，我应该在打开文件时使用“with”。有没有首选的方法来做我正在做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T03:43:44.743

你很好。该`os.listdir`功能不打开文件，所以最终你没事。您将`with`在阅读文本文件或类似文件时使用该语句。

with 语句的示例：

```
with open('yourtextfile.txt') as file: #this is like file=open('yourtextfile.txt')
    lines=file.readlines()                   #read all the lines in the file
                                       #when the code executed in the with statement is done, the file is automatically closed, which is why most people use this (no need for .close()). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T03:41:58.553

你在做什么很好。With 确实是打开文件的首选方式，但 listdir 仅用于读取目录是完全可以接受的。

# preg-match-all - 抓取网址直到特定单词

> ID：11480816
> 
> 赞同：0
> 
> 时间：2012-07-14T03:39:44.823
> 
> 标签：preg-match-all

我使用 CSV 导入工具并进行了一些研究以从导入结果中获取 url，因为它具有特定的导入语法。

这是导入文本的示例。

... img src="MULTIFEED_START_7_http://www.suppliertestcase.com/423_1.jpgMULTIFEED_END_7_"

所以我想获取文本 MULTIFEED_START_7_ （可能是 6 或 5，...）和文本 MULTIFEED_END_7 （也可能是 6 或 5，...）之间的图像 URL

经过一些测试后发现它可以正常工作：

preg_match_all('#(http://(.*).(gif|png|jpg))#i' , $post[0]->post_content , $matches);

如果以 .jpg、.gif 或 .png 结尾，则正确获取所有 url

输出是[http://www.suppliertestcase.com/423_1.jpg](http://www.suppliertestcase.com/423_1.jpg)

但是......是的，现在我的问题。

一些供应商在其导入时提供了产品照片 url，没有 .jpg 或 .gif 扩展名。他们只是给 fe 这个 url（只是没有文件扩展名的目录 url）：

img src="MULTIFEED_START_7_http://www.suppliertestcase.com/productphoto/MULTIFEED_END_7_"

所以 grep 的输出应该是[http://www.suppliertestcase.com/productphoto/](http://www.suppliertestcase.com/productphoto/) 我怎样才能获取以 http:// 开头的 url 以及 MULTIFEED_END 文本之前的所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:26:35.643

```
preg_match_all('~(?<=(MULTIFEED_START_\d_))(.+)(?=(MULTIFEED_END_\d_))~',$src,$matches); 
```

尝试这个。

# php - 如何使用 php 根据值的开头过滤值？

> ID：11480820
> 
> 赞同：-2
> 
> 时间：2012-07-14T03:40:41.107
> 
> 标签：php

如何使用 php 只接受以“09”开头的值？例如，仅`value 1`且`value 3`应在此列表中接受：

```
 value 1 ="09888111222";
 value 2 ="02999111222";
 value 3 ="09999111111"; 
```

我做完了...

```
$cno="09888111222";
$countc=strlen($cno);
$countc1=-$countc+2;
$rest = substr($cno, 0, $countc1); 
if($rest==07){
echo $rest;
}else{
echo "Value not starts with 07";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:47:25.787

```
if (substr($value, 0, 2) === '09') {
    // Do something here... your string in $value starts with "09"
} 
```

[http://php.net/substr](http://php.net/substr)

# logging - 公共交通中的消息跟踪

> ID：11480833
> 
> 赞同：1
> 
> 时间：2012-07-14T03:43:11.403
> 
> 标签：logging, esb, publish-subscribe, masstransit

我使用 masstransit 作为服务总线，并为我的应用程序使用 pub/sub 模式。

我想知道我是否可以跟踪从公共汽车到订阅者的消息。

我使用 json 序列化程序。

MT 是否有一些“入口点”，我可以在其中获取原始消息正文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:08:40.403

嗯，当你调用 Publish 时，有一个回调可以为每个订阅者调用。我不确定它是否可以让您访问序列化的消息正文，但序列化程序可能与 IPublishContext 相关联，如果您想序列化到内存流或文件流，这可能是可用的。

# mysql - mysql查询不返回结果

> ID：11480834
> 
> 赞同：0
> 
> 时间：2012-07-14T03:43:29.193
> 
> 标签：mysql

我正在执行这个查询

```
SELECT *
FROM temp
WHERE DATE_FORMAT(startTime,'%m/%d/%Y') = '7/15/2012' 
```

并且`startTime`列具有此值**'2012-07-15 12:00:00'**

但这不会返回任何结果。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T03:50:15.850

在这里更改：

```
7/15/2012 
```

至：

```
07/15/2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T03:50:01.873

根据[函数](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)[的文档`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)，`%m`是“月份，数字（`00`.. `12`）”。注意零填充。所以你需要写`'07/15/2012'`而不是`'7/15/2012'`.

（如果您想知道 - 我不知道 #0 是几月。据我所知，月份的范围从`01`到`12`。也许某些地区确实有 #0 月？）

# vba - 在使用 VBA 的 Word 文档上访问 Excel 对象而不使用 Shape.Activate()

> ID：11480835
> 
> 赞同：1
> 
> 时间：2012-07-14T03:43:30.800
> 
> 标签：vba, excel, ms-word

我尝试在 word 文档中阅读嵌入的 excel 文档。我遵循了这篇博客文章中指定的代码：

[http://vbadud.blogspot.com/2010/08/how-to-read-excel-sheet-embedded-in.html](http://vbadud.blogspot.com/2010/08/how-to-read-excel-sheet-embedded-in.html)

```
Dim oWB As Excel.Workbook
Dim oIShape As InlineShape

For Each oIShape In ActiveDocument.InlineShapes
    If InStr(1, oIShape.OLEFormat.ProgID, "Excel") Then
        oIShape.OLEFormat.Activate
        Set oWB = oIShape.OLEFormat.Object
        oWB.Sheets(1).Range("A1").Value = "ProdID"
    End If
Next oIShape 
```

它工作正常，但激活行会导致文档在我阅读的每个 excel 文档上闪烁。我试图删除 oIShape.OLEFormat.Activate 代码，但它会导致下一行抛出“运行时错误'430'（类不支持自动化或不支持期望）。

问题是有没有其他方法可以在不调用激活方法的情况下访问嵌入式 excel？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T06:20:38.993

这很棘手！最简洁的答案是不。不使用嵌入式 Excel。

我做了一些实验和一些研究。因为我找不到任何专门解释这种行为的来源。这是我的猜测。看来，当您将 Excel 电子表格嵌入到 Word 文档中时，Word 本质上存储了电子表格的链接，该链接仅显示外观，因为它需要使用 Excel 程序进行解释。在您真正激活该形状之前，您无法与它进行交互，因为这不能直接使用 Word 完成。[这篇文章](http://office.microsoft.com/en-us/word-help/edit-a-linked-object-or-an-embedded-object-HP005189977.aspx)暗示了这种行为，但没有解释它。这是一个报价：

> ```
> If you edit the object in Word, click anywhere outside the object to return 
> to the destination file.
> If you edit the object in the source program in a separate window, 
> click Exit on the File menu of the source program to return to the
> destination file. 
> ```

即使您使用，您可能已经注意到了。`Application.ScreenUpdating = false`它仍然会闪烁你提到的。这是因为您在访问形状时使用的是不同的应用程序！每次激活形状时，都会加载对象特定的菜单等。

一种可能的解决方法：如果不是通过插入菜单嵌入 Excel 电子表格，您可以添加一个控件。在我使用 Office 2003 的机器上，可比较的是：`Microsoft Office Spreadsheet 11.0`从技术上讲，这是一个 Web 控件，但其方法和行为与 Excel 工作簿非常相似。

使用控件而不是方便的插入对象，通过稍微修改您的代码，我能够注释掉您的激活命令，并且代码按预期运行。具体来说，我不得不改变这些行：

*   `Dim oWB As Spreadsheet`代替`Excel.Workbook.`
*   `If InStr(1, oIShape.OLEFormat.ProgID, "OWC11.Spreadsheet.11") Then`代替`"Excel"`

基本上你可以决定...激活需要 Excel 解释的嵌入对象，或使用不需要激活的不同控件。

# c++ - C++ 命名空间和语法头文件错误

> ID：11480837
> 
> 赞同：0
> 
> 时间：2012-07-14T03:43:41.980
> 
> 标签：c++, header, namespaces, include

我在头文件中遇到了常见的错误，如下所示。

```
Error   54  error C3083: 'Resources': the symbol to the left of a '::' must be a type   e:\users\nkosi\documents\visual studio 2010\projects\directx games\direct2d\dx2dhelper\dx2dhelper\sprite.h  28  1   DX2DHelper
Error   55  error C2039: 'DX2DImage' : is not a member of 'DX2DHelper'  e:\users\nkosi\documents\visual studio 2010\projects\directx games\direct2d\dx2dhelper\dx2dhelper\sprite.h  28  1   DX2DHelper
Error   56  error C2061: syntax error : identifier 'DX2DImage'  e:\users\nkosi\documents\visual studio 2010\projects\directx games\direct2d\dx2dhelper\dx2dhelper\sprite.h  28  1   DX2DHelper
Error   57  error C3083: 'Resources': the symbol to the left of a '::' must be a type   e:\users\nkosi\documents\visual studio 2010\projects\directx games\direct2d\dx2dhelper\dx2dhelper\sprite.h  32  1   DX2DHelper
Error   58  error C2039: 'DX2DImage' : is not a member of 'DX2DHelper'  e:\users\nkosi\documents\visual studio 2010\projects\directx games\direct2d\dx2dhelper\dx2dhelper\sprite.h  32  1   DX2DHelper
Error   59  error C2143: syntax error : missing ';' before '*'  e:\users\nkosi\documents\visual studio 2010\projects\directx games\direct2d\dx2dhelper\dx2dhelper\sprite.h  32  1   DX2DHelper
Error   60  error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   e:\users\nkosi\documents\visual studio 2010\projects\directx games\direct2d\dx2dhelper\dx2dhelper\sprite.h  32  1   DX2DHelper
Error   61  error C2061: syntax error : identifier 'GameBase'   e:\users\nkosi\documents\visual studio 2010\projects\directx games\direct2d\dx2dhelper\dx2dhelper\systemclass.h 30  1   DX2DHelper 
```

但是，对于我的一生，我无法弄清楚我做错了什么。我知道我可能错过了一个分号或其他东西，但我真的想不通。所有头文件都在下面。

DX2DHelper.h

```
#include "targetver.h"

#define WIN32_LEAN_AND_MEANheaders
// Windows Header Files:
#include <windows.h>

#include <iostream>

#include <D2D1.h>
#include <D2D1Helper.h>
#include <wincodec.h>
#include <D2DBaseTypes.h>
#include <D2Derr.h>

#define DLEX __declspec(dllexport)

#include "GameBase.h"
#include "SystemClass.h"
#include "DX2DImage.h"
#include "Sprite.h" 
```

系统类.h

```
#ifndef SYSTEMCLASS_H
#define SYSTEMCLASS_H

#include "DX2DHelper.h"

namespace DX2DHelper
{
    namespace Core
    {
        class SystemClass;
        struct WindowOptions;

        struct DLEX WindowOptions {};

        class DLEX SystemClass
        {
        public:
            bool Initialize(WindowOptions options, HINSTANCE hInst);
            void Run(GameBase* game, DX2DInitOptions options);
        private:
            WindowOptions options;    
        };
    }
}
#endif 
```

DX2DImage.h

```
#ifndef DX2DIMAGE_H
#define DX2DIMAGE_H

#include "DX2DHelper.h"

namespace DX2DHelper
{
    namespace Resources
    {
        class DX2DImage;
        class DX2DImageLoader;

        class DLEX DX2DImageLoader
        {
        public:
            HRESULT LoadFromFile(char* filePath, DX2DImage* image);
        };

        class DLEX DX2DImage
        {
        public:
            friend class DX2DImageLoader;
        };
    }
}

#endif 
```

精灵.h

```
#ifndef SPRITE_H
#define SPRITE_H

#include "DX2DHelper.h"

namespace DX2DHelper
{
    namespace GameComponents
    {
        class DLEX Sprite
        {
        public:
            void SetImage(DX2DHelper::Resources::DX2DImage* image);

        private:
            DX2DHelper::Resources::DX2DImage* image;
        };
    }
}
#endif 
```

游戏基础.h

```
#ifndef GAMEBASE_H
#define GAMEBASE_H

#include "DX2DHelper.h"

namespace DX2DHelper
{
    namespace Core
    {
        class DLEX GameBase
        {
        public:
            friend class SystemClass;

            HRESULT Initialize(HINSTANCE hInst, HWND winHandle, struct DX2DInitOptions options);
        };

        struct DLEX DX2DInitOptions {};
    }
}
#endif 
```

如果有人能找出错误，我将不胜感激。我一直在查看相同的文件可能将近一个小时，一个半小时，但我无法修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T04:05:13.770

您的标题有（很多）包含循环。例如，`DX2DHelper.h`包括`Sprite.h`包括`DX2DHelper.h`。这可能是导致您的错误的原因。这段代码不是Java，也不是导入语句：`#include`循环完全杀死编译，即使你没有得到一个特别说明的编译错误。为您的头文件选择一个非循环顺序。

我建议`DX2DHelper.h`不要在底部包含任何内容。 `Sprite.h`可以包括`DX2DImage.h`.

如果您的对象具有循环依赖关系（例如`SystemClass`and的情况`GameBase`），您将需要另一种解决方案。前向声明依赖类而不给出其完整声明，例如，`SystemClass.h`您可能会提前添加某处：

```
namespace DX2DHelper { namespace Core { class DLEX GameBase; } } 
```

同样在`GameBase.h`：

```
namespace DX2DHelper { namespace Core { class DLEX SystemClass;} } 
```

当不涉及循环对象依赖项时，这甚至可能是一个好主意——它通常是解决您在这里遇到的标题地狱类型的简单方法。当然，要编译所有内容，您可能需要`#include`相应实现文件中的相应标头。但是，假设您没有`#include`任何`.cpp`/`.cc`文件，这应该允许所有内容都可以编译，而无需`#include`您陷入困境。

# php - 通过 php 将 mysql 数据导出到 .csv 的问题

> ID：11480839
> 
> 赞同：0
> 
> 时间：2012-07-14T03:43:46.753
> 
> 标签：php, export-to-csv

我使用以下方式尝试将数据导出到 csv 文件，我使用的方法来自以下链接[Problem in Export csv file in php](https://stackoverflow.com/questions/7513990/problem-in-export-csv-file-in-php)，但是当我尝试导出文件时，系统回复我 no such file can被阅读，所以我想问在执行代码之前我必须先打开一个result.csv吗？或者文件result.csv已经生成，但是在错误的目录下，如果是这个原因，请问如何定义文件应该创建的目录。

```
$result = mysql_query("SELECT TechName, ClientName, SiteName, Time, Type
                            INTO OUTFILE 'result.csv'
                            FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED by '\"'
                            LINES TERMINATED BY '\n'
                            FROM Tech AS T, Client AS C, Site AS S, Log AS L
                            WHERE T.TechID=L.TechID AND C.ClientID=L.ClientID AND S.SiteID=L.SiteID
                            ORDER BY L.Time DESC");
    $Time = date('Y_m_d_H_i');
    $fileName = "Report_".$Time.".csv";
    header('Content-type: text/csv'); 
    header('Content-Disposition: attachment; filename="'.$fileName.'"'); 
    readfile('result.csv'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:48:48.083

试试这段代码可能。在这里找到它：http: [//salman-w.blogspot.in/2009/07/export-mysql-data-to-csv-using-php.html](http://salman-w.blogspot.in/2009/07/export-mysql-data-to-csv-using-php.html)

```
<?php
/*
 * PHP code to export MySQL data to CSV
 * http://salman-w.blogspot.com/2009/07/export-mysql-data-to-csv-using-php.html
 *
 * Sends the result of a MySQL query as a CSV file for download
 */

/*
 * establish database connection
 */

$conn = mysql_connect('MYSQL_HOST', 'MYSQL_USERNAME', 'MYSQL_PASSWORD') or die(mysql_error());
mysql_select_db('MYSQL_DATABASE', $conn) or die(mysql_error($conn));

/*
 * execute sql query
 */

$query = sprintf('SELECT * FROM MYSQL_TABLE');
$result = mysql_query($query, $conn) or die(mysql_error($conn));

/*
 * send response headers to the browser
 * following headers instruct the browser to treat the data as a csv file called export.csv
 */

header('Content-Type: text/csv');
header('Content-Disposition: attachment;filename=export.csv');

/*
 * output header row (if atleast one row exists)
 */

$row = mysql_fetch_assoc($result);
if ($row) {
    echocsv(array_keys($row));
}

/*
 * output data rows (if atleast one row exists)
 */

while ($row) {
    echocsv($row);
    $row = mysql_fetch_assoc($result);
}

/*
 * echo the input array as csv data maintaining consistency with most CSV implementations
 * - uses double-quotes as enclosure when necessary
 * - uses double double-quotes to escape double-quotes 
 * - uses CRLF as a line separator
 */

function echocsv($fields)
{
    $separator = '';
    foreach ($fields as $field) {
        if (preg_match('/\\r|\\n|,|"/', $field)) {
            $field = '"' . str_replace('"', '""', $field) . '"';
        }
        echo $separator . $field;
        $separator = ',';
    }
    echo "\r\n";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:45:56.597

如果您尝试输出查询结果，只需这样做。`readfile()`根本不需要。您只需要已有的标题，以及输出 CSV 数据的东西。

另请注意，您可以简单地`fputcsv()`将数组格式化为 CSV 行。 [http://php.net/manual/en/function.fputcsv.php](http://php.net/manual/en/function.fputcsv.php)

# mysql - 从 mysql 数据库中获取 year_1 和 year_2 之间的值

> ID：11480841
> 
> 赞同：0
> 
> 时间：2012-07-14T03:44:17.190
> 
> 标签：mysql, select, fetch

实际上我希望用户选择两年，然后我想从 mysql 数据库中获取这些选定年份之间的行。例如用户选择 year_1= 2006 和 year_2= 2009 那么我想显示 2006 年到 2009 年之间的所有记录我猜代码会更容易理解

```
$year_1='2006';
$year_2='2009';    
$sql= "Select names FROM persons WHERE year_1 >= $year_1 and year_1 <= $year_2; 
```

此查询仅选择 $year_1 和 $year_2 中的名称（2006 年和 2009 年），但不选择 2007 年和 2008 年的名称；我也想选择 2007 年和 2008 年的名字。告诉我如何修改这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:45:54.030

你想要这样的东西：

```
$sql= "SELECT *
  FROM names
  WHERE year_1 BETWEEN $year_1 AND $year_2"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:53:05.880

```
SELECT *
  FROM names
 WHERE (year_1 BETWEEN $year_1 AND $year_2) AND
       (year_2 BETWEEN $year_1 AND $year_2) 
```

* * *

假设这是您想要过滤它的方式，假设 $year_1 = 2006 和 $year_2 = 2009，过滤器将如下所示：

```
-- 2006 <-----y1-------------------------y2--> 2009     >> Row returned
-- 2006/y1 <---------------------------------> 2009/y2  >> Row returned
-- <----y1-------2006-------------------y2---> 2009     >> Row filtered out
-- 2006 <---------------y1------2009-----y2-->          >> Row filtered out
-- <-----y1-----------y2------2006-----2009-->          >> Row filtered out
-- <--2006-----2009--------y1-----------y2--->          >> Row filtered out 
```

因此，仅当to的***范围***介于输入年份***之间***或***之上时***，才会返回该行。`year_1``year_2`

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T04:21:50.343

最简单的解释是您的表中只有一个“年份”列。（我们可能错误地暗示（从您的问题中对“year_1”和“year_2”的引用）您的表有两个您想要检查的单独的“year”列。）

如果您只检查一个“年份”列，那么这是非常简单的查询：

```
SELECT p.*
  FROM persons p
 WHERE p.year >= $year_1 AND p.year <= $year_2 
```

但是您的问题似乎引用了两个单独的列：year_1 和 year_2，以及您的两个变量 $year_1 和 $year_2。

因此，规范的另一种可能解释是 year_1 和 year_2 列是连续范围的下限和上限，并且您希望找到满足整个给定年份范围的行。

例如，year_1 可能是“出生年份”，而 year_2 可能是“死亡年份”，我想从给定范围内每年“活着”的 people 表中查找所有行：

```
SELECT p.*
  FROM persons p
 WHERE p.year_1 <= $year_1 
   AND p.year_2 >= $year_2 
```

（我认为这不是您要问的，但我不确定。）

另一种可能的解释是，我想在给定范围内的任何（但不一定是所有）年份中找到“活着”的任何人。我会通过如下查询得到：

```
 SELECT p.*
   FROM persons p
  WHERE p.year_1 <= $year_2
     OR p.year_2 >= $year_1 
```

或者，我可能会问一个根本不同的问题，寻找特定年份范围内的事件年份。

就像我想找到在给定年份范围内“出生”或“死亡”的任何人......

```
 SELECT p.*
    FROM persons p
   WHERE p.year_1 >= $year_1 AND p.year_1 <= $year_2
      OR p.year_2 >= $year_1 AND p.year_2 <= $year_2 
```

但同样，您的问题并不清楚您实际上想要返回哪些结果集（如果有的话）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T04:24:48.323

尝试

```
$year_1 = '2006';
$year_2 = '2009';
$sql = "SELECT names FROM persons WHERE year_1 >= $year_1 AND year_2 <= $year_2"; 
```**

# coding-style - 将 ASCII 字符串转换为数字

> ID：11480849
> 
> 赞同：1
> 
> 时间：2012-07-14T03:46:26.303
> 
> 标签：coding-style, ascii, decoding, ambiguity

对于我编写的任意精度整数类，我有一个构造函数，它接受一个包含整数值的字符串和一个 uint16_t 来说明字符串的基数。

```
integer("123", 10) -> 0x7b   -> 123   base 10
integer("ab", 256) -> 0x6162 -> 24930 base 10 
```

由于我的类也可以接受负数，因此构造函数读取`-`的意思是该值为负数，带有`-`as is first 字符的 base 256 字符串 (ASCII) 会使事情变得混乱。我应该如何更改我的代码以使`-`ASCII 字符串前面的 a 不模棱两可？我如何区分输入字符串`------`（以 10 为底的正 49672054713645）和`------`（以 10 为底的负 194031463725）？

目前，我认为所有 ASCII 值都是正数。

我希望构造函数只接受 2 个参数，但如果显而易见：更改/拆分/添加构造函数`integer(positive/negative, string, base)`是唯一的好主意，我可能会考虑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:57:47.767

我见过的大多数此类字符串到整数的例程只允许从 2 到 36 的基数，基数 36 使用字符集`[0..9, a..z]`. 如果您决定支持“base 256”，我建议您只支持正值。（如果他们碰巧知道结果是否定的，调用者可以直接否定结果。）

顺便提一下，您可能想问自己的另一个问题是，您是否需要支持 2 到 256 之间的所有中间碱基。您需要支持一些重要的不连续性；例如，在 base 16 中，大写和小写字母的处理方式相同（“base 256”不能这样），并且在 9 (0x39) 和 A (0x41) 之间存在间隙，并且在所有普通基础中， '0' (0x30) 为零，而不是 NUL (0x00)。

# android - 在 iphone 中给来电者录制的语音

> ID：11480851
> 
> 赞同：0
> 
> 时间：2012-07-14T03:46:32.793
> 
> 标签：android, iphone

如果假设我在他接听电话后立即拨打朋友号码，我的 iPhone 中有一个语音记录，他应该能够听到我已经录制的语音。iphone和android都可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T03:56:01.673

答案是**`NO`**

就目前而言，这是不可能的`iPhone`。当任何呼叫来或去时，我们会失去对应用程序的控制权，并且控制权会交给调用应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T05:06:51.320

作为一名 Java ME、Android 开发人员，我对 iPhone 一无所知，但我猜你从 Jennis 的回答中得到了 iPhone 的答案。

来到Android，让我给你一些指导，

是的，您可以在 Android 技术中实现此要求。您需要使用[Telephony Manager](http://developer.android.com/reference/android/telephony/TelephonyManager.html) API。有一种状态叫做`CALL_STATE_OFFHOOK`这会帮助你实现你的目标。

# bash - 删除模式后的所有内容 (.com)

> ID：11480855
> 
> 赞同：1
> 
> 时间：2012-07-14T03:47:46.100
> 
> 标签：bash, sed, awk

把自己逼疯了。我试图从 access.log 中获取域名 (http://www.example.com)。日志的样子：

```
tail access.log 

Fri, 13 Jul 2012 20:32:03 -0700,INFO,6fgmd8fk,params,http://www.example.com/images/CIV-260.jpg| 
```

我已经尝试过这种单线的许多变体（[使用 sed 和 awk](http://www.unix.com/shell-programming-scripting/141885-awk-removing-data-before-after-pattern.html)）：

```
tail -4 access.log |grep http |awk {'print $6'} |cut -c28- |awk '$1>".com"' |sort |uniq

http://www.example.com/2713-7807.jpg|
http://www.example.com/2713-7808.jpg|
http://barfoo.com/img/14616_20120711182527.jpg|
http://foobar.com/css/14616_20120713142151.css| 
```

我被困住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T03:57:04.863

也许只是

```
awk -F/ '{print $3}' 
```

如果您没有比示例显示的更多的“/”。请注意，正如您的问题所要求的那样，这只是域名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T03:58:18.077

使用`grep`：

```
grep -Po '(?<=http://)[^/]+' access.log | sort -u 
```

如果你想拥有`http://`作为域名的一部分，

```
grep -Po 'http://[^/]+' access.log | sort -u 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T05:58:52.587

使用`sed`：

```
sed -n 's|.*\(http://[^/]*\)/.*|\1|p' access.log | sort -u 
```

# c - 如何在必须只定义一次的函数或宏函数中创建变量？

> ID：11480856
> 
> 赞同：4
> 
> 时间：2012-07-14T03:48:04.367
> 
> 标签：c, optimization, gcc, static-variables

`CURRENT_DIR`我在我的程序中多次调用（见下文）。就像程序运行时可执行文件路径不会改变一样，每次我调用这个函数时都重新定义它是没有意义的。

所以，我正在寻找一个解决方案，一旦设置了这个值，就不应该再次设置它。

我目前的解决方案是：创建一个所有值都设置为 0 的静态变量，并在 if 语句测试中检查第一个字符是否非空，如果为真，则设置它。但它看起来不优雅..也许有更好的解决方案..通过使用包括宏在内的一些模型，我不知道。

见代码：

```
#define CURRENT_DIR ({                                          \
  static char buffer[MAX_PATH + 1] = { 0 };         \
      if(buffer[0] != '\0')                     \
    getcurrentdir(buffer, MAX_PATH);            \
      buffer;                           \
}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T05:49:57.460

而不是 gcc 特定的表达式语句，我会使用一个函数（`inline`如果需要，可能是 d ）：

```
const char* currentDir(void)
{
    static char buffer[MAX_PATH + 1] = { 0 };
    if (buffer[0] == '\0')
    {
        getcurrentdir(buffer, MAX_PATH);
    }
    return buffer;
} 
```

这有几个优点：

*   它更便携。（当然，`MAX_PATH`并且`getcurrentdir`会依赖于平台。）
*   它具有更好的类型安全性。如果字符串是常量，您不希望允许客户端意外修改它。

（无论如何 gcc 表达式语句的实现都被破坏了。该`static`变量不会`CURRENT_DIR`在同一范围内的多个站点中重复使用，并且`if`测试是向后的，因此`buffer`永远不会被初始化为非空字符串。）

# hadoop - 将输出写入不同的文件夹 hadoop

> ID：11480858
> 
> 赞同：4
> 
> 时间：2012-07-14T03:48:19.670
> 
> 标签：hadoop, mapreduce

1.  我想将来自同一个减速器的两种不同类型的输出写入两个不同的目录。

我可以使用 hadoop 中的多个输出功能来写入不同的文件，但它们都进入同一个输出文件夹。

我想将同一个reduce中的每个文件写入不同的文件夹。

有没有办法做到这一点？

如果我尝试将例如“hello/testfile”作为第二个参数，它会显示无效参数。所以我无法写入不同的文件夹。

1.  如果上述情况不可能，映射器是否可以从输入文件夹中仅读取特定文件？

请帮我。

提前致谢！

* * *

谢谢回复。我能够使用上述方法成功读取文件。但在分布式模式下，我无法这样做。在减速器中，我设置了：

`mos.getCollector("data", reporter).collect(new Text(str_key), new Text(str_val));`

（使用多个输出，并在 Job Conf：我尝试使用

`FileInputFormat.setInputPaths(conf2, "/home/users/mlakshm/opchk285/data-r-00000*");`

也

`FileInputFormat.setInputPaths(conf2, "/home/users/mlakshm/opchk285/data*");`

但是，它给出了以下错误：

```
cause:org.apache.hadoop.mapred.InvalidInputException: Input Pattern hdfs://mentat.cluster:54310/home/users/mlakshm/opchk295/data-r-00000* matches 0 files 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-20T17:11:07.517

***问题 1：将输出文件写入不同的目录 - 您可以使用以下方法进行操作：***

**1\. 使用 MultipleOutputs 类：**

您能够使用 MultipleOutputs 创建多个命名输出文件，这真是太好了。如您所知，我们需要在您的驱动程序代码中添加它。

```
MultipleOutputs.addNamedOutput(job, "OutputFileName", OutputFormatClass, keyClass, valueClass); 
```

API 提供了两种重载的*写入*方法来实现这一点。

```
multipleOutputs.write("OutputFileName", new Text(Key), new Text(Value)); 
```

现在，要将输出文件写入单独的输出目录，您需要使用带有额外参数的重载写入方法作为基本输出路径。

```
multipleOutputs.write("OutputFileName", new Text(key), new Text(value), baseOutputPath); 
```

请记住在您的每个实现中更改您的 baseOutputPath。

**2\. 重命名/移动驱动类中的文件：**

这可能是将输出写入多个目录的最简单的方法。使用多个输出并将所有输出文件写入单个输出目录。但是每个类别的文件名需要不同。

假设您要创建 3 组不同的输出文件，第一步是在驱动程序中注册命名的输出文件：

```
MultipleOutputs.addNamedOutput(job, "set1", OutputFormatClass, keyClass, valueClass);
MultipleOutputs.addNamedOutput(job, "set2", OutputFormatClass, keyClass, valueClass);
MultipleOutputs.addNamedOutput(job, "set3", OutputFormatClass, keyClass, valueClass); 
```

此外，在驱动程序代码中创建不同的输出目录或所需的目录结构，以及实际的输出目录：

```
Path set1Path = new Path("/hdfsRoot/outputs/set1");
Path set2Path = new Path("/hdfsRoot/outputs/set2");
Path set3Path = new Path("/hdfsRoot/outputs/set3"); 
```

最后一个重要步骤是根据名称重命名输出文件。如果工作成功；

```
FileSystem fileSystem = FileSystem.get(new Configuration);
if (jobStatus == 0) {

        // Get the output files from the actual output path 
        FileStatus outputfs[] = fileSystem.listStatus(outputPath);

        // Iterate over all the files in the output path
        for (int fileCounter = 0; fileCounter < outputfs.length; fileCounter++) {

            // Based on each fileName rename the path.
            if (outputfs[fileCounter].getPath().getName().contains("set1")) {
                fileSystem.rename(outputfs[fileCounter].getPath(), new Path(set1Path+"/"+anyNewFileName));
            } else if (outputfs[fileCounter].getPath().getName().contains("set2")) {
                fileSystem.rename(outputfs[fileCounter].getPath(), new Path(set2Path+"/"+anyNewFileName));
            } else if (outputfs[fileCounter].getPath().getName().contains("set3")) {
                fileSystem.rename(outputfs[fileCounter].getPath(), new Path(set3Path+"/"+anyNewFileName));
            }
        }
    } 
```

注意：这不会给作业增加任何重大开销，因为我们只是将文件从一个目录移动到另一个目录。选择任何特定的方法取决于您的实施的性质。

总而言之，这种方法基本上将所有使用不同名称的输出文件写入同一个输出目录，当作业成功完成时，我们重命名基本输出路径并将文件移动到不同的输出目录。

***问题 2：从输入文件夹中读取特定文件：***

您绝对可以使用**MultipleInputs**类从目录中读取特定的输入文件。

根据您的输入路径/文件名，您可以将输入文件传递给相应的 Mapper 实现。

**情况 1：如果所有输入文件都在一个目录中：**

```
FileStatus inputfs[] = fileSystem.listStatus(inputPath);
for (int fileCounter = 0; fileCounter < inputfs.length; fileCounter++) {
    if (inputfs[fileCounter].getPath().getName().contains("set1")) {
        MultipleInputs.addInputPath(job, inputfs[fileCounter].getPath(), TextInputFormat.class, Set1Mapper.class);
    } else if (inputfs[fileCounter].getPath().getName().contains("set2")) {
        MultipleInputs.addInputPath(job, inputfs[fileCounter].getPath(), TextInputFormat.class, Set2Mapper.class);
    } else if (inputfs[fileCounter].getPath().getName().contains("set3")) {
        MultipleInputs.addInputPath(job, inputfs[fileCounter].getPath(), TextInputFormat.class, Set3Mapper.class);
    }   
} 
```

**情况 2：如果所有输入文件都不在一个目录中：**

即使输入文件位于不同的目录中，我们基本上也可以使用上述相同的方法。遍历基本输入路径并检查文件路径名是否匹配标准。

或者，如果文件位于完全不同的位置，最简单的方法是单独添加到多个输入。

```
MultipleInputs.addInputPath(job, Set1_Path, TextInputFormat.class, Set1Mapper.class);
MultipleInputs.addInputPath(job, Set2_Path, TextInputFormat.class, Set2Mapper.class);
MultipleInputs.addInputPath(job, Set3_Path, TextInputFormat.class, Set3Mapper.class); 
```

希望这可以帮助！谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T04:07:33.273

将 MultipleOutputs 代码复制到您的代码库中并放宽对允许字符的限制。无论如何，我看不出任何有效的限制理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T11:38:48.887

是的，您可以指定输入格式仅处理某些文件：

```
FileInputFormat.setInputPaths(job, "/path/to/folder/testfile*"); 
```

如果您确实修改了代码，请记住 _SUCCESS 文件应在作业成功完成后写入两个文件夹 - 虽然这不是必需的，但它是一种机制，人们可以通过它来确定该文件夹中的输出是否完整，而不是由于错误而“截断”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T18:24:17.283

是的，你可以这样做。您需要做的就是为来自 reducer 的特定键/值对生成文件名。

如果你覆盖一个方法，你可以根据你得到的键/值对返回文件名，等等。这是向您展示如何执行此操作的链接。

[https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFMQFjAA&url=https%3A%2F%2Fsites.google.com%2Fsite%2Fhadoopandhive%2Fhome%2Fhow- to-write-output-to-multiple-named-files-in-hadoop-using-multipletextoutputformat&ei=y7YBULarN8iIrAf4iPSOBg&usg=AFQjCNHbd8sRwlY1-My2gNYI0yqw4254YQ](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFMQFjAA&url=https%3A%2F%2Fsites.google.com%2Fsite%2Fhadoopandhive%2Fhome%2Fhow-to-write-output-to-multiple-named-files-in-hadoop-using-multipletextoutputformat&ei=y7YBULarN8iIrAf4iPSOBg&usg=AFQjCNHbd8sRwlY1-My2gNYI0yqw4254YQ)

# java - 关于企业 Java 会话 Bean

> ID：11480863
> 
> 赞同：2
> 
> 时间：2012-07-14T03:48:50.403
> 
> 标签：java, servlets, netbeans, ejb-3.0

作为企业 Java 开发的新手，在阅读了[以下](http://wiki.netbeans.org/CreatingEJB3UsingNetbeansAndGlassfish)教程之后。我设法开发了我的第一个会话 bean。在阅读了一些关于会话 bean 的内容后，我确实有一些关于它（会话 bean）的问题，我希望这里的专家可以帮助我。

通常在不使用 EJB 的 servlet 场景中，我们会执行以下操作来完成某个任务

```
 StudentList stud = businesslayer.businessMethod_GetStudentsFromDb(); 
```

现在，业务层将调用服务层，该服务层将从数据库中获取详细信息并返回。

现在我的问题如下：

1-如果我要使用无状态 EJB 来实现此机制，我是否必须将包含域对象*StudentList*的域包复制到我的企业项目的“-ejb”文件夹中（我正在使用 netbeans）。同样我会有将其他业务方法从我的“-war”文件夹的源文件夹复制到 ejb 文件夹，以便“-ejb”文件夹中的无状态 bean 可以使用这些方法。“-ejb”文件夹内的 Cant 类使用“-war”文件夹的源文件夹内的类。

2-这是迄今为止我无法理解的问题。如果我使用 EJB 而不是我当前的机制，我会得到什么好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T16:03:28.010

**1**

如果您正在构建单个应用程序，则无需复制任何内容。如果你想在业务代码和 web/view 代码之间有一个非常严格的分离，你可以创建一个`ear`, with an`ejb module`和 a `web module`。web 模块中的所有类都可以访问ejb 模块中的所有类，但反之则不然。这有效地在您的应用程序中施加了分层。

*但你*不必为了这种分离而去。您也可以将您的 EJB bean 与您的 Servlet 以及您拥有的东西放在一起。你把豆子放在哪里没有限制。它可以位于单独的包中，也可以与 Servlet 位于同一包中。

你可能想看看我做的这个例子：http: [//arjan-tijms.omnifaces.org/2011/08/minimal-3-tier-java-ee-app-without-any.html](http://arjan-tijms.omnifaces.org/2011/08/minimal-3-tier-java-ee-app-without-any.html)。在那里，`BusinessBean`有一个 EJB 与单个 war 中的 JSF 支持 bean 驻留在相同的（默认）包中。

在单一战争设置中，一切都可以访问一切。请注意，即使在这种情况下，您也可能希望保持您的业务代码“干净”，并将诸如此类`HttpRequest`的事情排除在外。

**2**

EJB bean，尤其是 EJB light，提供了大多数 Web 应用程序需要的东西：事务、池、线程安全、安全性和注入。与 JPA 结合使用时，您将充分利用 EJB bean。优点是您的代码将不那么冗长，同时避免使用纯 JDBC 时遇到的竞争条件和不一致。

例如

```
@Stateless 
public class CustomerService { 

  @PersistenceContext 
  private EntityManager entityManager; 

  public void addCustomer(Customer customer) { 
    entityManager.persist(customer); 
  } 
} 
```

如果没有 EJB，您将需要一堆 try/finally 块来打开和关闭连接、启动和提交事务等。如果没有 JPA，您将有一大块乏味的代码插入`Customer`实体的各个字段，如将示例放入准备好的语句中。

如果您（稍后）拥有调用一个或多个其他服务的服务，并且所有内容都需要保存到数据库中，或者什么都不保存（而不是两者之间未定义的内容），那么在纯 JDBC 中完成这是一个相当大的挑战。除了可以在中间阶段使用的方法之外，您还必须传递打开的连接，并且需要打开/关闭连接和启动/提交事务的每个服务方法的特殊变体。用不了多久，这将变得非常复杂和一大团泥巴。

使用 EJB，您从另一个 EJB bean 中调用的 EJB bean 中的每个方法都会自动加入正在进行的事务，或者如果没有事务在进行中，则启动它自己的方法。仅此一项就极大地简化了典型 Web 应用程序执行的许多常见业务任务。

不要让任何人告诉你只有“企业应用程序”需要事务，而 Web 应用程序不需要这个。这是不正确的。在进行数据库操作时，事务是非常基本的事情，与主键或外键的基本要求相同。在为订单（在网上商店）执行业务逻辑时，您绝对不希望减少库存，但不发送实际订单，或者发送订单但不从客户帐户中扣除任何款项等。最简单的业务逻辑通常涉及写入至少两个表，并且每次发生这种情况时，您最好使用事务。

请确保您使用的是 EJB 3。远离所有与 EJB 2 相关的事物。甚至不要触摸 Home 接口或实体 Bean 之类的东西，它们已经被弃用了大约 6 年。*（不要将 EJB 实体 Bean 与 JPA 实体混淆，尽管不幸的名称相似，但它们完全不同。JPA 实体非常理智和有用）*

# objective-c - Xcode BOOL 类型：从输入 YES，我想得到值 NO

> ID：11480864
> 
> 赞同：0
> 
> 时间：2012-07-14T03:48:51.153
> 
> 标签：objective-c, xcode, boolean

我有一个非常简单的方法，但它不起作用。最终，从输入 YES，我想得到 NO 并反转。

```
-(void)myMethod:(BOOL)ys{
    if (ys==YES) {
        myLabel.hidden=NO;
        myButton.hidden=NO;
    }{
        myLabel.hidden=YES;
        myButton.hidden=YES;
    }
} 
```

你们能帮我纠正和缩短代码吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T04:12:36.903

也许这更容易：

```
-(void)myMethod:(BOOL)ys{
    myLabel.hidden = !ys;
    myButton.hidden = !ys;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T04:01:41.803

```
-(void)myMethod:(BOOL)visible
{ 
    [myLabel setHidden:!visible]; 
    [myButton setHidden:!visible]; 
} 
```

代码应该可以工作。但是，您的代码不起作用可能是因为您没有为标签和按钮设置引用出口（如果您使用界面生成器创建它们）。 ![设置成这样](../Images/7c6579c0b266a7376fc3ff1583f2cbff.png)

参考网点应该这样设置。否则，编译器将不知道您要隐藏的按钮是否是界面上的按钮。

如果您使用代码创建了按钮/标签，请在尝试将它们设置为可见之前检查它们是否已释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T15:03:24.243

如果我们试图让它变短......`

```
-(void)myMethod:(BOOL)ys{
    myLabel.hidden = myButton.hidden = !ys;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T03:51:49.033

```
-(void)myMethod:(BOOL)ys{
    if (ys) {
        myLabel.hidden=NO;
        myButton.hidden=NO;
    } else {
        myLabel.hidden=YES;
        myButton.hidden=YES;
    }
} 
```

# java - SharedPreferences 在强制关闭后被重置

> ID：11480871
> 
> 赞同：3
> 
> 时间：2012-07-14T03:51:07.257
> 
> 标签：java, android, save, android-sharedpreferences

我已经能够在我的应用程序中成功实现共享首选项，但是如果我通过任务管理器终止应用程序，我会遇到数据被重置/删除的问题。

我正在使用静态方法进行保存，这样我只需要该方法一次，并且可以在我的应用程序中的任何地方调用它。

```
protected static synchronized void save(Context cntx){
    SharedPreferences preferences2 = cntx.getSharedPreferences("BluRealms", 0);
    SharedPreferences.Editor editor = preferences2.edit();
    editor.putBoolean("level", Stats.level);
    editor.commit();
} 
```

一旦我杀死我的应用程序，我的所有数据都会在我的 SharedPreferences 保存方法中设置回默认设置。

我也做了一些搜索，发现一些帖子说在清单文件中添加 android:persistent="true" 可以解决问题，但即使这样，数据仍然会重置。

* * *

**编辑：**嗯，我想我找到了一些关于我的问题的信息。此问题突出了三星 Galaxy S 手机无法正确保存 SharedPreferences 的问题，这是我正在测试的设备。[http://code.google.com/p/android/issues/detail?id=14359](http://code.google.com/p/android/issues/detail?id=14359) - 特别是**评论 6**

任何更多关于这方面的信息都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:11:49.293

好的，我可以通过从我的保存方法中删除“受保护的静态”来解决这个问题。

我没有调用全局保存方法，而是简单地将保存方法放在需要保存的每个类中，然后只在 onPause() 和 onDestroy() 方法中调用保存方法。

我注意到，如果我在一个类中调用 save() 太多次，当我关闭应用程序时，这似乎也会删除我的 SharedPreferences。

**小费：**

> 不要使用静态方法获取或设置共享首选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-01T16:35:12.820

在我的情况下，从我的清单中删除标签 android:allowBackup = "true" ，这解决了我的问题

# html - Internet Explorer 中不显示音频控件

> ID：11480876
> 
> 赞同：-3
> 
> 时间：2012-07-14T03:51:45.070
> 
> 标签：html, html5-audio

此页面上音频元素中的 HTML5 音频控件在除 IE 之外的所有浏览器中都能正常显示和播放。谁能告诉我为什么他们不在IE中显示？
[http://spartantheatre.org/radio.html](http://spartantheatre.org/radio.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:14:13.243

答案是，IE 显然需要将预加载设置为“自动”。自从我在此页面上工作并忘记了这一点以来已经有一段时间了。现代浏览器不需要它，将其设置为自动会导致每个文件下载部分音频文件。在我可以重写页面之前我不想发生的事情。

IE 是这个星球上最糟糕的浏览器。

# visual-c++ - setTimer() 只生成一次 WM_TIMER 消息

> ID：11480882
> 
> 赞同：0
> 
> 时间：2012-07-14T03:52:15.550
> 
> 标签：visual-c++, mfc

我正在使用添加了资源 ID 并基于 WM_TIMER 消息的计时器。我想调用一个例程，例如`DrunkenDragon()`on，`OnTimer()`但只`SetTimer(id,10sec,NULL)`调用一次。我们知道调用`KillTimer()`内部`DrunkenDragon()`例程可以解决问题。可以这样做吗，还是我错过了一些很棒的计时器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:54:55.133

```
int CYourDialog::OnInitDialog()
{
   __super::OnInitDialog();

   SetTimer(0x10, 10000, NULL);

   return true;
}

void CYourDialog::OnTimer(UINT_PTR ignore)
{
   DrunkenDragon();
} 
```

并确保您有`ON_WM_TIMER`消息映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:50:57.030

您没有遗漏任何东西，您必须使用 KillTimer 让系统停止生成 WM_TIMER 消息。

您还可以使用 CreateTimerQueueTimer 并以仅调用一次回调的方式设置参数。

[有关更多详细信息，请参阅此内容。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682485%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:42:44.053

（只有在其他人像我一样遇到它并且对可用的答案不满意时才回答这个问题）

因此，在 WindowClass.h 中，您可以做的是枚举您想要使用的计时器标识符。虽然您当然可以使用原始数值，但从长远来看，使用符号可能更容易使用。

```
class WindowClass : CWnd
{
    // other parts of the interface...

protected:

    enum
    {
        TIMER_MAIN_UPDATE = 1,
        TIMER_PLASTERED_DRAGON
    };
}; 
```

同时，回到 WindowClass.cpp，

```
int WindowClass::OnCreate(LPCREATESTRUCT lpCreateStruct)
{
    // { ... other initialization code }

    // In case you want to do other types of updates at regular intervals.
    SetTimer(TIMER_MAIN_UPDATE, 1000, NULL);

    // Note the symbolic identifiers.
    SetTimer(TIMER_PLASTERED_DRAGON, 10000, NULL);

    return 0;
} 
```

但是，如果您想在创建窗口 10 秒后执行此操作，那只会有好处。您也可以随时在其他事件处理程序中调用 SetTimer()：

```
void WindowClass::OnJustGotPaid()
{
    // { ... other handling }

    // Since our dragon is a real lightweight, it apparently only takes
    // 10 seconds to get him puking up flaming vomit.
    SetTimer(TIMER_PLASTERED_DRAGON, 10000, NULL);
} 
```

当需要处理实际事件时，通常在 Windows OnTimer() 回调中处理。如果需要，可以通过在 SetTimer() 的第三个参数中指定有效的函数指针而不是 NULL，将计时器事件定向到不同的（自定义）回调。

```
void WindowClass::OnTimer(UINT_PTR p_timer_id)
{
    switch(p_timer_id)
    {

    default:
        break;

    case TIMER_MAIN_UPDATE:

        // { ... main update code }
        break;

    case TIMER_PLASTERED_DRAGON:

        // Killing the timer first in case DrunkenDragon() takes a good
        // long while for whatever reason.
        KillTimer(TIMER_PLASTERED_DRAGON);

        DrunkenDragon();

        break;
    }
} 
```

# php - 使用 PHP 或 Apache 重定向清理 URL

> ID：11480883
> 
> 赞同：0
> 
> 时间：2012-07-14T03:52:39.120
> 
> 标签：php

> **可能重复：**
> [重定向 *.php 以清除 URL](https://stackoverflow.com/questions/2267488/redirect-php-to-clean-url)

我敢肯定这已经在这里问过，但出于某种原因，无论我尝试什么似乎都不起作用。

我所拥有的是： [http ://example.com/share/edit.php?id=59](http://example.com/share/edit.php?id=59)

我想要的是： [http ://example.com/share/59](http://example.com/share/59)

我`.htaccess`的是：

```
RewriteEngine on
RewriteRule ^share/([0-9]+)$ share/edit.php?id=$1 
```

有什么我做错了吗？该`.htaccess`文件在`example.com/share`目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:56:50.730

尝试把你`.htaccess`的`example.com`目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:57:58.897

尝试以这种方式提供：

```
RewriteEngine On
RewriteRule ^share/([^/]*)$ /share/edit.php?id=$1 [L] 
```

并且您的`.htaccess`文件应该驻留在根目录，即`example.com`'s 目录中。`share`文件夹在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T03:58:36.377

如果 .htaccess 位于共享目录中，则无需指定 URL 路径。尝试这样的事情：

```
重写引擎开启
RewriteRule ^(.*)$ edit.php?id=$1 [QSA,L]

```

不用说，如果您使用 apache，您将需要启用 mod_rewrite。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-14T04:01:24.653

> “.htaccess”文件位于“example.com/share”目录中。

将其移至上层目录（public_html 或 www）。

# .net - 按钮单击时暂停线程单击按钮时恢复

> ID：11480893
> 
> 赞同：1
> 
> 时间：2012-07-14T03:56:45.707
> 
> 标签：.net, vb.net, multithreading

我有一个从某些网站获取数据的循环，该循环大约需要一个小时才能获取数据并将其填充到数据库中，这个循环在一个线程中，我想添加一个暂停线程的按钮，直到再次单击按钮，它会从停止的地方恢复。我怎样才能以安全的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:59:56.120

这是一个简单的 Windows 控制台应用程序；它使用布尔标志来指示线程是否应该处理。我希望这能为您指明正确的方向。

```
Module Module1

    Private _ThreadControl_Run As Boolean = False

    Sub Main()
        Dim thread As New System.Threading.Thread(AddressOf ThreadWorker)
        thread.IsBackground = True
        thread.Start()

        _ThreadControl_Run = True
        Console.WriteLine("Main() _ThreadControl_Run = " & _ThreadControl_Run.ToString())
        System.Threading.Thread.Sleep(1000)

        _ThreadControl_Run = False
        Console.WriteLine("Main() _ThreadControl_Run = " & _ThreadControl_Run.ToString())
        System.Threading.Thread.Sleep(1000)

        _ThreadControl_Run = True
        Console.WriteLine("Main() _ThreadControl_Run = " & _ThreadControl_Run.ToString())
        System.Threading.Thread.Sleep(1000)

        _ThreadControl_Run = False
        Console.WriteLine("Main() _ThreadControl_Run = " & _ThreadControl_Run.ToString())
        System.Threading.Thread.Sleep(1000)
    End Sub

    Private Sub ThreadWorker()
        Do While True
            If (_ThreadControl_Run) Then
                Console.WriteLine("     ThreadWorker()")
                System.Threading.Thread.Sleep(100)
            End If
        Loop
    End Sub

End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:14:54.270

试试这个：

```
Public Sub PauseThreadButton_Click(sender As System.Object, e As System.EventArgs) Handles PauseThreadButton.Click
    'REM: Next line puts your thread in a suspended state
    TheThread.Suspend()
End Sub 
```

恢复：

```
Public Sub ResumeThreadButton_Click(sender As System.Object, e As System.EventArgs) Handles ResumeThreadButton.Click
    'REM: Next line resumes your thread
    TheThread.Resume()
End Sub 
```

# sbt - sbt - 将托管库复制到 lib

> ID：11480895
> 
> 赞同：2
> 
> 时间：2012-07-14T03:56:52.853
> 
> 标签：sbt

如何使用 Scala Build Tool 将托管库复制到特定文件夹？

例如：

这个托管库中的所有 jar 都将放在“项目/库”中

```
libraryDependencies += "com.miglayout" % "miglayout-swt" % "4.2" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T04:12:42.477

我找到了解决方案。其实很简单。

将以下内容添加到 build.sbt

这会将 jar 复制到 project/lib_managed/jars//*.jar

```
retrieveManaged := true 
```

我不确定如何指定一个特定的文件夹，但这足以让项目文件夹下的 jars 了。

# iphone - 不同版本软件的UIActivityIndi catorView的大小

> ID：11480904
> 
> 赞同：0
> 
> 时间：2012-07-14T03:58:01.120
> 
> 标签：iphone, ios, ipad

当我在 iphone 上测试我的应用程序时，我发现微调器（UIActivityIndi​​catorView）的大小在不同版本的 iphone 软件上显示不同。

默认样式是“UIActivityIndi​​catorViewStyleWhite”，大小在 5.1 上是合适的，但在 4.2.1 上真的很小。所以我想我必须通过以下方式设置大小：

```
[spinner.layer setValue:[NSNumber numberWithFloat:1.0f] forKeyPath:@"transform.scale"]; 
```

根据不同的版本。我想问的问题是我应该把5.0以下的版本当作我测试过的4.2.1的条件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:53:07.290

这完全取决于你。如果您想支持 iOS 4.2 及更高版本的应用程序，请使用 4.2 的算法，否则请使用 5.0。

# django - 使用 Facepy 请求 Facebook 数据

> ID：11480905
> 
> 赞同：0
> 
> 时间：2012-07-14T03:58:10.197
> 
> 标签：django, facebook-graph-api, python-2.7

这可能是一个愚蠢的问题，但我已经为这个问题挠头太久了。

我正在尝试在 django 中使用 Facepy/social-auth 从 facebook GraphAPI 请求照片信息。

我的视图有以下代码，但是如何将生成的 json 转换为 python 对象？

```
instance = UserSocialAuth.objects.filter(user=request.user).filter(provider='facebook')
graph = GraphAPI(instance[0].extra_data['access_token'])
p=graph.get('me/photos') 
```

Facepy 看起来非常好，但文档充其量是很差的，有没有更好的 python facebook sdk 与 social-auth 配合得很好？

感谢所有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:08:57.950

Facepy 返回本机 Python 对象，而不是 JSON。

```
response = graph.get('me/photos')

for photo in response['data']:
    print photo['source'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:13:15.407

您可以使用 simplejson 的加载功能

```
from django.utils import simplejson
simplejson.loads(args) 
```

> 将（包含 JSON 文档的`s`一个`str`或实例）反序列化为Python 对象。`unicode`
> 
> ```
> If ``s`` is a ``str`` instance and is encoded with an ASCII based encoding
> other than utf-8 (e.g. latin-1) then an appropriate ``encoding`` name
> must be specified. Encodings that are not ASCII based (such as UCS-2)
> are not allowed and should be decoded to ``unicode`` first.
> 
> ``object_hook`` is an optional function that will be called with the
> result of any object literal decode (a ``dict``). The return value of
> ``object_hook`` will be used instead of the ``dict``. This feature
> can be used to implement custom decoders (e.g. JSON-RPC class hinting).
> 
> ``parse_float``, if specified, will be called with the string
> of every JSON float to be decoded. By default this is equivalent to
> float(num_str). This can be used to use another datatype or parser
> for JSON floats (e.g. decimal.Decimal).
> 
> ``parse_int``, if specified, will be called with the string
> of every JSON int to be decoded. By default this is equivalent to
> int(num_str). This can be used to use another datatype or parser
> for JSON integers (e.g. float).
> 
> ``parse_constant``, if specified, will be called with one of the
> following strings: -Infinity, Infinity, NaN, null, true, false.
> This can be used to raise an exception if invalid JSON numbers
> are encountered.
> 
> To use a custom ``JSONDecoder`` subclass, specify it with the ``cls``
> kwarg. 
> ```

# apache2 - 多个 Jenkins CI 和 Nexus Maven 存储库的 Apache 反向代理

> ID：11480907
> 
> 赞同：1
> 
> 时间：2012-07-14T03:58:21.587
> 
> 标签：apache2, jenkins, apache, reverse-proxy, nexus

我正在尝试使用 Apache httpd 为多个 Nexus 和 Jenkins CI 服务器设置前端（反向代理），需要一些帮助。我们有类似的网址 -

> abc.internal.net:8080/
> 
> def.internal.net:9000/jenkins/
> 
> ghi.internal.net:8080/jenkins/
> 
> jkl.internal.net:8081/nexus/
> 
> foo.internal.net/nexus/

我希望这些中的每一个都设置在 FE 反向代理后面，以便拥有类似的东西 -

> scm.internal.net/abc-jenkins/
> 
> scm.internal.net/def-jenkins/
> 
> scm.internal.net/ghi-jenkins/
> 
> scm.internal.net/jkl-nexus/
> 
> scm.internal.net/foo-nexus/

一些服务使用根上下文。这些可以被强制进入任意的网络环境吗？

我对 Apache httpd 的了解非常有限，所以一些真实的配置会很有帮助。这些服务中的大多数都需要在响应中修复 URL、内容和 CSS。如果可以在不更改这些服务正在运行的服务器上的现有 Web 上下文的情况下做到这一点，那就太棒了。

此外，我需要软着陆这些更改，以便随着开发人员和自动化过渡到新方案，旧 URL 继续工作几周。这是要求太多了吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:39:52.713

使用`ProxyPassMatch`，您可以尝试：

```
ProxyPassMatch /([^-]+)-(.*)$ http://$1.internal.net:9000/$2 
```

但这仅说明不是以 root 身份运行且在端口 9000 上运行的那些。由于 root 和端口似乎完全是任意的，您可能只需要枚举每个：

```
ProxyPass /abc-jenkins/ http://abc.internal.net:8080/
ProxyPassReverse /abc-jenkins/ http://abc.internal.net:8080/

ProxyPass /def-jenkins/ http://def.internal.net:9000/jenkins/
ProxyPassReverse /def-jenkins/ http://def.internal.net:9000/jenkins/

ProxyPass /ghi-jenkins/ http://ghi.internal.net:8080/jenkins/
ProxyPassReverse /ghi-jenkins/ http://ghi.internal.net:8080/jenkins/

ProxyPass /jkl-nexus/ http://jkl.internal.net:8081/nexus/
ProxyPassReverse /jkl-nexus/ http://jkl.internal.net:8081/nexus/ 
```

等等

# svn - svn merge 从不同的转速开始

> ID：11480908
> 
> 赞同：2
> 
> 时间：2012-07-14T03:58:29.963
> 
> 标签：svn, merge

我有一个需要从主干更新的项目（Foo）和一个分支（Bar）。如果 svn merge 在顶层运行，它会从 197894 开始合并，但在该子目录中的合并从 204284 开始，这是首选。

IE：

```
$> svn merge URL:/trunk . 
```

---->同时到达巴兹时会发生很多冲突：

```
$> cd Baz
$> svn merge URL:/branch/Bar/Baz . 
```

---> 不错！

有没有办法修复或告诉 mergeinfo 道具它的当前版本是从哪里开始合并（特别是当它从顶级目录开始时）。

请注意，为了让它工作，子目录是通过 svn delete/svn copy 从主干重新创建的。也许某些合并信息丢失/令人困惑？然而，当时的想法是，这将使它成为最新的 wrt 主干。

这是svn告诉我的：

# 树干 ...

```
svn info https://corp.com/svn/Foo/trunk/Baz
Last Changed Rev: 204286
svn propget svn:mergeinfo https://corp.com/svn/Foo/trunk/Baz
/Foo/trunk/Baz:197626-197892 
```

# 分支 ...

```
svn info https://corp.com/svn/Foo/branch/Bar/Baz
Last Changed Rev: 204284      # 2 behind trunk
svn propget svn:mergeinfo https://corp.com/svn/Foo/branch/Bar
/Foo/trunk:197297-204098
svn propget svn:mergeinfo https://corp.com/svn/Foo/branch/Bar/Baz
/Foo/trunk/Baz:197626-197892   # this looks suspicious !? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:08:30.953

```
svn info https://corp.com/svn/Foo/branch/Bar/Baz
Last Changed Rev: 204284      # 2 behind trunk 
```

我怀疑`svn info`正在报告包含对 Baz 分支进行更改的最新修订。请记住，修订号是存储库范围内的，而不是每个分支。其他分支机构可能正在发生类似的事情。

# c# - Thread.Sleep 或 Thread.Yield

> ID：11480912
> 
> 赞同：32
> 
> 时间：2012-07-14T03:59:24.573
> 
> 标签：c#, multithreading, sleep, yield

我有一种方法，它使用后台工作人员轮询 DLL 以获取看起来像这样的状态：

```
var timeout = DateTime.Now.AddSeconds(3);
while (System.Status != Status.Complete  // our status is not complete
       && DateTime.Now < timeout         // have not timed out
       && !_Worker.CancellationPending)  // backgroundworker has not been canceled
{
    //Thread.Yield();
    //Thread.SpinWait(1);
    //Thread.Sleep(1);
} 
```

查看我的 CPU 百分比时，`yield()`我`spinwait()`的应用程序在我的 PC 上运行高达 50%。我的 CPU 百分比保持在`Sleep(1)`6%。有人告诉我应该选择`Thread.Yield()`，但是 CPU % 的峰值困扰着我。这样的事情的最佳做法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-14T04:12:34.227

[Thread.Yield](http://msdn.microsoft.com/en-us/library/system.threading.thread.yield.aspx)将中断当前线程以允许其他线程工作。但是，如果他们没有任何工作要做，您的线程将很快重新调度并继续轮询，从而 100% 使用 1 个核心。

> 使调用线程让步给准备好在当前处理器上运行的另一个线程。操作系统选择要屈服的线程。

[Thread.Sleep](http://msdn.microsoft.com/en-us/library/system.threading.thread.sleep)将安排您的线程在睡眠时间到期后再次运行，从而大大降低 CPU 利用率。

> 阻塞当前线程指定的毫秒数。

鉴于两者之间的选择，`Thread.Sleep`更适合您的任务。但是，我同意@Bryan 的评论，即 a`Threading.Timer`可以提供更优雅的解决方案。

# google-app-engine - 发件人类 - GCM 示例 - Java App 引擎

> ID：11480916
> 
> 赞同：5
> 
> 时间：2012-07-14T04:01:01.710
> 
> 标签：google-app-engine, google-cloud-messaging

我使用谷歌示例（gcm-demo-appengine - [Google Demo](http://developer.android.com/guide/google/gcm/demo.html)）

但我认为谷歌源代码可能存在一些问题，当我运行它时，它会抛出

> java.lang.NoClassDefFoundError: com/google/android/gcm/server/Sender
> at cloud.spam.filter.server.SendMessageServlet.newSender(SendMessageServlet.java:63)
> at cloud.spam.filter.server.SendMessageServlet.init(SendMessageServlet .java:54)

发送者类有一些问题（严重吗？）
我们可以用其他东西替换发送者类吗？这是我第一次使用 GCM，因此我不知道发件人类的重要性以及它的用途。
非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T08:38:49.060

确保您的 gcm-server.jar 位于项目的 war/WEB-INF/lib 文件夹中。没有其他事情会做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T13:33:44.003

只需清理项目，确保您也包含 json-simple-1.1.1.jar。如果它不起作用，请将 jar 文件添加到 java 构建路径中的库并清理项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T21:03:53.023

发件人需要用于 JSON 操作的库。就我而言，只需将 json-simple-1.1.1.jar 文件放在 war/WEB-INF/lib 中，并将 jar 路径设置为参考。最后解决了 NoClassDefFoundError 问题。

# objective-c - Xcode 有问题！预期的 ”;” 方法原型之后

> ID：11480920
> 
> 赞同：1
> 
> 时间：2012-07-14T04:02:13.140
> 
> 标签：objective-c, xcode

我刚开始使用 Xcode，我正在和一些朋友一起制作一个简单的音板应用程序。

我在第一行遇到问题。我已经编写了代码，我很确定它是正确的，但我不明白为什么会在这里！我得到一个“预期的';' 在方法原型之后”并尝试了一切来修复它，只需插入分号就会给我带来 3 个更多错误。这是我的代码

```
'#import "ViewController.h"'

@interface ViewController ()

// Sound for Ben
- (IBAction)playsound1 { // this is where the error is. It is not on any other line

NSString *path = [[NSBundle mainBundle] pathForResource:@"Ben" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
}
// Sound for Bruno
- (IBAction)playsound2 {

NSString *path = [[NSBundle mainBundle] pathForResource:@"Bruno" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL    fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
}
// Sound for Homer
- (IBAction)playsound3 {

NSString *path = [[NSBundle mainBundle] pathForResource:@"Homer" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
}
// Sound for Jon
- (IBAction)playsound4 {

NSString *path = [[NSBundle mainBundle] pathForResource:@"Jon" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
}
// Sound for Mark
- (IBAction)playsound5 {

NSString *path = [[NSBundle mainBundle] pathForResource:@"Mark" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
}
// Sound for Mikey
- (IBAction)playsound6 {

NSString *path = [[NSBundle mainBundle] pathForResource:@"Mikey" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL     fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
}
// Sound for Omar
- (IBAction)playsound7 {

NSString *path = [[NSBundle mainBundle] pathForResource:@"Omar" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
}
// Sound for Tom
- (IBAction)playsound8 {

NSString *path = [[NSBundle mainBundle] pathForResource:@"Tom" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
}
// Sound for Victor
- (IBAction)playsound9 {

NSString *path = [[NSBundle mainBundle] pathForResource:@"Victor" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
}
@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

嘿，现在所有错误都消失了，但是当它运行时，当我单击一个按钮时，它会关闭并带我到这里

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

 int main(int argc, char *argv[])
  {
      @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

它以绿色突出显示“main.m”中的“return”行并带有 SIGABRT 错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T04:06:44.263

> 我在第一行遇到问题

你当然是——你的界面部分有完整的功能。接口应该只包含方法原型。方法定义在实现部分。你有：

```
@interface ViewController ()

- (IBAction)playsound1 { // this is where the error is. It is not on any other line

NSString *path = [[NSBundle mainBundle] pathForResource:@"Ben" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play];
} 
```

那应该是：

```
@interface ViewController ()

- (IBAction)playsound1;

// ...
@end 
```

其次是：

```
@implementation ViewController

- (IBAction)playsound1 { // this is where the error is. It is not on any other line
    NSString *path = [[NSBundle mainBundle] pathForResource:@"Ben" ofType:@"mp3"];
    AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

    theAudio.delegate=self;
    [theAudio play];
}

// ...
@end 
```

（为了便于阅读，我添加了一些缩进。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T04:17:22.413

您不应该在`@interface ... @end`. 您只能声明方法。将方法的定义写入`@implementation ....@end`并在`@interfaece...@end`.

我想这会对你有所帮助。

# objective-c - 如果 OCUnit 测试包含名为“name”的方法，则它们总是通过

> ID：11480922
> 
> 赞同：1
> 
> 时间：2012-07-14T04:02:57.640
> 
> 标签：objective-c, unit-testing, ocunit

尊敬的 OCUnit 测试人员，

如果 OCUnit 测试包含名为“name”的方法，则它们总是通过，例如：

```
#import <SenTestingKit/SenTestingKit.h>

@interface Tests : SenTestCase

@end

@implementation Tests

- (NSString *)name
{
    return @"Howard";
}

- (void)testSomeTest
{
    STFail(@"Unit tests are not implemented yet in Tests");
}

@end 
```

通过！我在 XCode 4 下运行。

如果我将“名称”更改为其他名称，那很好，即它失败了。知道为什么“名称”是 OCUnit 中的保留名称吗？无论如何要解决这个问题？这是我正在尝试测试的协议的一部分。

提前感谢您的任何建议，--霍华德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:17:46.750

SenTestCase.m 已经有一个名为的内部方法`-name`：

[https://github.com/jy/SenTestingKit/blob/master/SenTestCase.m](https://github.com/jy/SenTestingKit/blob/master/SenTestCase.m)

我假设您正在尝试测试委托协议的结果。尝试将提供委托的测试代码拉到测试夹具之外的单独对象中。

# c++ - 在 OpenGL 中将 3 个图层与背景混合

> ID：11480923
> 
> 赞同：2
> 
> 时间：2012-07-14T04:03:12.533
> 
> 标签：c++, opengl, blending

实现以下效果的 glBlendfunc() 参数是什么：

0) 背景，不透明。

1）first_layer，只有一种颜色。

2）半透明球体，与first_layer混合但不与背景混合......

**编辑**

以下是我希望展示我想要实现的效果的效果图。

![这是原始的 - 背景上的球体](../Images/d3f80a413cd78434c8031a68a11e7259.png)

![这是所需的效果 - 球体和背景之间的绿色，球体与颜色混合但不与背景混合](../Images/eb1a3bf54a92653dbfb7b72a4cf87edb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:57:26.320

根据简要描述，听起来您可以将第 2 层（球体）混合到第 1 层（first_layer）上，然后在第 0 层（背景）上进行 blit。应该可以使用通常的 alpha 混合参数进行第一次混合：

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

但是，`glBlendFunc`已经相当过时了。如今，桌面和移动设备上的 OpenGL 都支持着色器，这可以更轻松地实现您想要的。

# activerecord - Rails 通过 activerecord-sqlserver-adapter 连接到 SQL Server 2008

> ID：11480925
> 
> 赞同：2
> 
> 时间：2012-07-14T04:04:16.340
> 
> 标签：activerecord, jruby

我下载了 BitNami 的 Jruby。一切正常，但是当我想连接到 SQL Server 2008 时，出现了问题。

database.yml 如下

```
development:
       adapter: sqlserver
      host: 127.0.0.1
      instanceName: SQLServer2008
      database: truetemp
      username: sa
      password: 7354500 
```

我使用命令“Jruby -S rails generate scaffold Product title:string ....”，ROR 效果很好；但命令“rake db:migrate --trace”失败。

> f:\tmp\RubyMine201207>rake db:migrate --trace ** 调用 db:migrate (first_time) ** 调用环境 (first_time) ** 执行环境 ** 调用 db:load_config (first_time) ** 调用 rails_env (first_time) ** 执行 rails_env ** 执行 db:load_config rake 中止！请安装 sqlserver 适配器：（`gem install activerecord-sqlserver-adapte r`没有要加载的文件 -- active_record/connection_adapters/sqlserver_adapter）
> 
> org/jruby/RubyKernel.java:1033:in`require' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activesupport-3 .2.1/lib/active_support/dependencies.rb:251:in`需要'F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activesupport-3 .2.1/lib/active_support/dependencies.rb:236:在`load_dependency' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activesupport-3 .2.1/lib/active_support/dependencies.rb:251:in`需要'F：/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activerecord-3。2.1/lib/active_record/connection_adapters/abstract/connection_specification.rb:4 8:in `resolve_hash_connection' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activerecord-3. 2.1/lib/active_record/connection_adapters/abstract/connection_specification.rb:3 9:in`resolve_string_connection' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activerecord-3。2.1/lib/active_record/connection_adapters/abstract/connection_specification.rb:2 3:在`spec' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activerecord-3. 2.1/lib/active_record/connection_adapters/abstract/connection_specification.rb:1 27:in`建立连接'F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activerecord-3。2.1/lib/active_record/railtie.rb:76:in`Railtie' org/jruby/RubyKernel.java:2045:in`instance_eval' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activesupport-3 .2.1/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activesupport-3 .2.1/lib/active_support/lazy_load_hooks.rb:43:in`run_load_hooks' org/jruby/RubyArray.java: 1615：在`each' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activesupport-3 .2.1/lib/active_support/lazy_load_hooks.rb:42:in`run_load_hooks 的 F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activerecord-3 中。2.1/lib/active_record/base.rb:716:in `(root)' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/activerecord-3. 2.1/lib/active_record/base.rb:6:in`(root)' org/jruby/RubyProc.java:270:in `call' org/jruby/RubyProc.java:220:in` call' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems /rake-0.9.2.2/lib/rake/task.rb:205:in `execute' org/jruby/RubyArray.java:1615:in` each' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib /rake/task.rb:200:in `execute' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/li b/rake/task.rb:158:in`invoke_with_call_chain' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/1.8/monitor.rb:191:in`mon_sy nchronize' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/li b/rake/task.rb:151:in`invoke_with_call_chain' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `invoke_prerequisites' org/jruby/RubyArray.java:1615:in`each' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/li b/rake/task.rb:157:in`invoke_with_call_chain' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/1.8 /monitor.rb:191:in `mon_sy nchronize' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/li b/rake/task.rb:151:in`invoke_with_call_chain' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/li b/rake/application.rb:116:in`invoke_task ' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level' org/jruby/RubyArray.java:1615:in`each' F:/Program Files/BitNami JRubyStack /jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in`top_level' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/li b/rake/application.rb:133:in`standard_exception_handling' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/li b/rake/application.rb:66:in`run' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gems/rake-0.9.2.2/li b/rake/application.rb:63:in`run' F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems /1.8/gems/rake-0.9.2.2/bi n/rake:33:in `(root)' org/jruby/RubyKernel.java:1058:in`load' F:/Program Files/BitNami JRubyStack/jruby/bin/rake:23:in `(root)' 任务：TOP => db :migrate => db:load_config

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:29:39.277

确保将以下行添加到您的`Gemfile`

`gem 'activerecord-sqlserver-adapter'`

# python - process.call 和 cmd.exe

> ID：11480927
> 
> 赞同：1
> 
> 时间：2012-07-14T04:04:45.067
> 
> 标签：python, subprocess, cmd

我正在尝试从我的 python 代码对 windows 命令行进行重复调用。对于目录中的每个罚款，我需要运行一个命令，并等待它完成。

```
try:
    directoryListing = os.listdir(inputDirectory)
    for infile in directoryListing:
        meshlabString = #string to pass to command line
        os.system(meshlabString)

except WindowsError as winErr:
    print("Directory error: " + str((winErr))) 
```

我一直在网上阅读，似乎首选的方法是使用 subprocess.call()，但我不知道如何通过 subprocess.call() 运行 cmd.exe。它现在使用 os.system() 可以正常工作，但它会因为试图同时运行一堆进程而陷入困境，然后死掉。如果有人可以为我提供几行关于如何在 Windows 命令行上运行命令的代码，以及 subprocess.wait() 是否是最好的等待方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:11:09.617

使用子流程，您有几个选择。最简单的是[调用](http://docs.python.org/library/subprocess.html#subprocess.call)：

```
import shlex
return_code=subprocess.call(shlex.split(meshlabString)) 
```

shlex 获取字符串并将其拆分为一个列表，就像 shell 拆分它的方式一样。换句话说：

```
shlex.split("this 'is a string' with 5 parts") # ['this', 'is a string', 'with', '5', 'parts] 
```

你也可以这样做：

```
return_code=subprocess.call(meshlabString,shell=True) 
```

但如果 meshlabString 不受信任，这种方式会带来安全风险。最终，`subprocess.call`它只是`subprocess.Popen`类的一个包装器，为方便起见而提供，但它具有您想要的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T05:09:44.110

你有两个选择，[`subprocess.Popen`](http://docs.python.org/library/subprocess.html#subprocess.Popen)和[`subprocess.call`](http://docs.python.org/library/subprocess.html#subprocess.call)。主要区别在于默认情况下`Popen`是非阻塞的，而默认是`call`阻塞的。这意味着您可以`Popen`在其运行时与之交互，但不能与`call`. 您必须等待该过程完成`call`，您可以修改该过程以`Popen`使用相同的方式运行`wait()`。

`call`本身只是一个包装器，`Popen`如[源代码](http://hg.python.org/cpython/file/e0df7db13d55/Lib/subprocess.py#l459)所示：

```
def call(*popenargs, timeout=None, **kwargs):
    """Run command with arguments.  Wait for command to complete or
    timeout, then return the returncode attribute.

    The arguments are the same as for the Popen constructor.  Example:

    retcode = call(["ls", "-l"])
    """
    with Popen(*popenargs, **kwargs) as p:
        try:
            return p.wait(timeout=timeout)
        except:
            p.kill()
            p.wait()
            raise 
```

使用`call`：

```
import os
from subprocess import call
from shlex import split

try:
    directoryListing = os.listdir(inputDirectory)
    for infile in directoryListing:
        meshlabString = #string to pass to command line
        call(split(meshlabString)) # use split(str) to split string into args

except WindowsError as winErr:
    print("Directory error: " + str((winErr))) 
```

# vba - 最好的搜索工作表的内容.. EXCEL VBA 用户表单

> ID：11480934
> 
> 赞同：1
> 
> 时间：2012-07-14T04:05:45.207
> 
> 标签：vba, excel, userform

> **可能重复：**
> [根据值查找单元格位置然后做一些事情-用户表单 VBA Excel](https://stackoverflow.com/questions/11337413/find-cell-location-based-on-value-then-do-something-user-forms-vba-excel)

我正在构建一个用户表单并试图弄清楚如何编写一段代码：

* 从用户那里获取组合框的值。*在特定工作表上的特定列中搜索此值 *获取此值的单元格位置 *返回地址的一个办公室集行，城市的下一个偏移行"

我之前问过同样的问题，但是，过了一段时间，答案无济于事。

这是我想出的代码：

```
For Each cLoc In ORISheetList.Range("ORI_LIST")
'compare the input string from list- considering using Match function for this
If StrComp(cLoc, ORIValue,  vbTextCompare) Then TextBAgencyName.Value = "test"
Else: Next cLoc
End If 
```

for Each 循环和 if 条件不能很好地协同工作。

我读过vba excel上有一个查找功能。有没有办法利用它来获取单元格的位置？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:38:36.477

采用

```
Set cLoc = ORISheetList.Range("ORI_LIST").find ORIValue
If not cLoc is nothing then
    ' you found it! 
```

# javascript - 获取大数的最后 13 位数字

> ID：11480935
> 
> 赞同：0
> 
> 时间：2012-07-14T04:06:04.703
> 
> 标签：javascript, math

我正在编写一个应该执行权力的函数，但只显示指定的最后 n 位。它工作得很好……主要是。出于某种原因，当我指定我想要的最后几个数字时，它一直运行良好，一直到并包括数字 12。任何超过 12 的数字量似乎给了我一个非常奇怪的数字。我知道我一定遗漏了一些明显的东西，但我真的没有看到。

这是代码：

```
function power(base, exponent, digits) {
total = base;
for(i = 1; i < exponent; i++) {
    total =  total * base;

    if(total.toString().length > digits)  {
        total = total.toString().substr(total.toString().length - digits, digits);
        }
    }

return total;
} 
```

因此，对于一些示例（显示 12 位及更低的数字可以正常工作）：

如果我做 power(999, 999, 1) 我最终得到 => 9

如果我做 power(999, 999, 5) 我最终得到 => 98999

如果我做 power(999, 999, 12) 我最终得到 => 000499998999

这是它开始搞砸的地方：

如果我做 power(999, 999, 13) 我最终得到 => 5710054009000

如果我做 power(999, 999, 14) 我最终得到 => '79077027006000'

起初我以为我达到了某种整数限制，而科学记数法把事情搞砸了，但我不认为是这种情况，因为它应该可以达到 20 位数字。

我怀疑我在 if 语句中减少字符串的方式有问题。但我不确定为什么它不会在 13 位以下的计算中搞砸。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:59:46.860

您需要一个函数来计算 b^e (mod m)。一个好的算法被称为[*平方和乘法*](http://en.wikipedia.org/wiki/Modular_exponentiation)：

```
Algorithm PowerMod: Compute b^e (mod m) with b, e and m all positive integers.
1\. [Initialize] Set r := 1.
2\. [Terminate when finished] If e == 0, return r and stop.
3\. [Multiply if odd] If e is odd, set r := r * b (mod n).
4\. [Square and iterate] Set e := floor(e / 2). Set b := b * b (mod n). Go to Step 2. 
```

然后进行计算，例如 PowerMod(999, 999, 10^14); 你应该得到 17000499998999。

# jquery - 用于验证的开箱即用文本

> ID：11480936
> 
> 赞同：0
> 
> 时间：2012-07-14T04:06:05.723
> 
> 标签：jquery, css, validation, jquery-tools

我在[这里](http://www.jquerytools.org/demos/validator/index.html)按照本教程使用 Jquery-Tools 的验证器。

但是为什么验证文本会出现在黄色框中？，我尝试过使用 CSS，但它没有用：

![在此处输入图像描述](../Images/7dadd6b82a71c8df7347a581b6a43777.png)

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:28:56.340

好的...通过添加 .error p { margin:0; 修复 }

# ruby-on-rails - 多对多：has_many：通过关联表单与分配给链接模型的数据创建表单视图

> ID：11480939
> 
> 赞同：2
> 
> 时间：2012-07-14T04:06:30.590
> 
> 标签：ruby-on-rails, many-to-many, nested-forms, has-many-through

我正在使用 Rails Guides 中的一个示例：

[http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

此示例具有以下模型设置：

```
class Physician < ActiveRecord::Base
  has_many :appointments
  has_many :patients, :through => :appointments
end

class Appointment < ActiveRecord::Base
  belongs_to :physician
  belongs_to :patient
end

class Patient < ActiveRecord::Base
  has_many :appointments
  has_many :physicians, :through => :appointments
end 
```

我试图了解如何做以下两件事：

1.  如何设置视图以创建新患者并与现有医师和预约时间为他们分配预约
2.  如何为现有患者分配与新医师的预约和预约时间

我浏览了处理嵌套表单的 RailsCasts 196 和 197，但我不明白它如何适用于这种情况。

有人可以提供一个例子或指点我这方面的指南吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T05:48:00.723

首先，您必须将医师 ID 传递给您的`PatientsController#new`操作。如果用户通过以下链接到达那里，这将类似于

```
<%= link_to 'Create an appointment', new_patient_path(:physician_id => @physician.id) %> 
```

或者，如果用户必须提交表单，您可以使用它提交一个隐藏字段：

```
<%= f.hidden_field :physician_id, @physician.id %> 
```

然后，在`PatientsController#new`：

```
def new
  @patient = Patient.new
  @physician = Physician.find(params[:physician_id])
  @patient.appointments.build(:physician_id => @physician.id)
end 
```

在`new.html.erb`：

```
<%= form_for @patient do |f| %>
  ...
  <%= f.fields_for :appointments do |ff |%>
    <%= ff.hidden_field :physician_id %>
    ...
  <% end %>
<% end %> 
```

# android - Android 在 Activity 之间切换

> ID：11480946
> 
> 赞同：0
> 
> 时间：2012-07-14T04:07:41.767
> 
> 标签：android

我目前在我的应用程序中有一个名为 RaceActivity 的活动，它执行 setContentView() 来显示表面视图。在我的表面视图中，我正在检查用户是否赢得了我的游戏，当他/她赢得游戏时，我想切换到另一个显示简单游戏完成消息的视图。我试过使用：

```
Intent intent = new Intent();         
intent.setClass(getContext(), RaceActivity.class); 
intent.putExtra("code", 3);
((Activity)getContext()).startActivityForResult(intent, 5); 
```

但这对我不起作用。它显示新视图一秒钟，然后屏幕变黑，并继续执行前一个表面视图上的代码（我有一个日志语句，以便我可以看到它在做什么）。

如何切换到完成视图并使其停止上一个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:26:29.033

试试这样

```
 Intent intent=new Intent(this,newclassname.class);
            intent.putExtra("code", 3);
            startActivityForResult(intent,0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T04:14:13.950

要开始另一个活动并留在该活动中，您想使用 startActivity （意图意图）

试试这个

```
Intent intent = new Intent();         
intent.setClass(getContext(), RaceActivity.class); 
intent.putExtra("code", 3);
((Activity)getContext()).startActivity(intent); 
```

# php - 如果 ($condition_string) 不能正常工作

> ID：11480949
> 
> 赞同：0
> 
> 时间：2012-07-14T04:09:20.337
> 
> 标签：php

在下面的代码中

```
$condition_string= "empty($_SESSION['group_by_Name']) && empty($_SESSION['group_by_Email']) && empty($_SESSION['group_by_Address']) && empty($_SESSION['group_by_Age']) && empty($_SESSION['group_by_Contact'])"; 
```

此代码始终执行 if 语句而不是 else。谁能告诉我代码中的错误在哪里。

```
 $observation_column_name_fetch = mysql_query("SELECT column_name
 FROM  observation_column where observation_id='$observation_id'")
     or die(mysql_error());

     while($observation_column_name_res = mysql_fetch_array( $observation_column_name_fetch ))
     {
      $observation_column_name[]=$observation_column_name_res[column_name];
     }   
     for ($i=0; $i<$observation_column_num; $i++)
     { 
      $group_by=$_POST[group_by_.$observation_column_name[$i]];
      $_SESSION[group_by_.$observation_column_name[$i]]=$group_by;
     }
     $j=1;
     $condition_string="";
     for($i=0; $i<$observation_column_num; $i++)
     {
     $condition_string.= 'empty($_SESSION[\'group_by_'.$observation_column_name[$i].'\'])';
     if($j<$observation_column_num)
      { $condition_string.=" && ";    $j++;    }
     }
     if($condition_string)
      {
      for ($i=0; $i<$observation_column_num; $i++)
        { echo "if statement executed ".$i." times<br/>";   }
      }
        else
        {
       for ($i=0; $i<$observation_column_num; $i++)
          { echo "else statement executed ".$i." times<br/>";        }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:32:24.723

您可以使变量名动态化：

```
if( empty( $_SESSION['group_by_' . $observation_column_name[$i] ] ){
    // ..code..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T04:12:51.207

您不能将字符串表示形式的条件传递给 if 语句。在您当前的代码中，您只是检查字符串`$condition_string` **是否为 false**。

您必须将条件以字符串形式传递给[eval](http://php.net/manual/en/function.eval.php)函数以将其作为代码进行评估。

# regex - 如何 grep 向量并返回单个 TRUE 或 FALSE？

> ID：11480950
> 
> 赞同：16
> 
> 时间：2012-07-14T04:09:47.463
> 
> 标签：regex, r

如果在给定字符向量中的任何地方找到模式，R 中是否有一个`grep`函数返回，否则返回？`TRUE``FALSE`

我看到的所有函数都返回找到的每个元素的当前位置的*向量*。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-14T04:48:13.377

可能是`grepl()`和的组合`any()`？

像

```
> foo = c("hello", "world", "youve", "got", "mail")
> any(grepl("world", foo))
[1] TRUE
> any(grepl("hi", foo))
[1] FALSE  
> any(grepl("hel", foo))
[1] TRUE 
```

你的问题有点不清楚你是否希望最后一个例子返回真

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-14T04:19:01.453

也许您正在寻找`grepl()`？

```
> grepl("is", c("This", "is", "a", "test", "isn't", "it?"))
[1]  TRUE  TRUE FALSE FALSE  TRUE FALSE 
```

第一个参数是您要查找的模式，第二个参数是您要匹配的向量，返回值是一个相同长度的布尔向量，描述该模式是否与每个元素匹配。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-14T04:12:42.783

您在寻找“任何”吗？

```
> x<-c(1,2,3,4,5)
> x==5
[1] FALSE FALSE FALSE FALSE  TRUE
> any(x==5)
[1] TRUE 
```

请注意，您也可以对字符串执行此操作

```
> x<-c("a","b","c","d")
> any(x=="b")
[1] TRUE
> any(x=="e")
[1] FALSE 
```

与 apply 结合使用会很方便：

```
> sapply(c(2,4,6,8,10), function(x){ x%%2==0 }  )
[1] TRUE TRUE TRUE TRUE TRUE
> any(sapply(c(2,4,6,8,10), function(x){ x%%2!=0 }  ))
[1] FALSE 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-20T19:00:22.953

grepl 是你要找的

```
grepl("is", "This is grepl test")
[1] TRUE
grepl("is not", "This is grepl test")
[1] FALSE 
```

# graphite - 石墨：总结所有匹配模式的统计数据？

> ID：11480952
> 
> 赞同：9
> 
> 时间：2012-07-14T04:10:08.603
> 
> 标签：graphite, statsd

我正在通过`statsd`. 我的统计数据相当精细，开发人员可以轻松添加。我想汇总与特定模式匹配的所有统计信息（`stats.timers.api.*.200.count`例如）。这在 Graphite 中可能吗？

如果没有，是否还有其他我应该研究的系统可以从中生成那种类型的汇总数据`statsd`？`statsd`或者这是我应该直接在我的配置中做的事情？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-15T04:45:31.813

如果您对所有匹配的数据进行了总和，那么您可以使用[1](http://graphite.readthedocs.org/en/1.0/functions.html#graphite.render.functions.sumSeries) sumSeries。

一个例子：

```
 sumSeries(stats.timers.api.*.200.count) 
```

将为您提供与 stats.timers.api.*.200.count 匹配的所有内容的总数

您可以通过[2](http://graphite.readthedocs.org/en/1.0/functions.html#graphite.render.functions.groupByNode) **groupByNode**将指标组合在一起。

一个例子

```
 groupByNode(stats.timers.api.*.*.count,4,"sumSeries") 
```

会给你一个匹配 stats.timers.api.* 的所有计时器的总和，在第 4 列（在这种情况下返回代码？）

所有功能都记录在[http://graphite.readthedocs.org/en/1.0/functions.html](http://graphite.readthedocs.org/en/1.0/functions.html)

# assembly - 为汇编语言程序中的每个语句生成解释

> ID：11480953
> 
> 赞同：1
> 
> 时间：2012-07-14T04:10:18.603
> 
> 标签：assembly, documentation, x86

我想编写一个脚本，将 x86 汇编语言代码作为输入并生成注释来解释程序中每个语句的作用。这样的工具是否已经存在？另外，这是否是一个相对简单的程序编写（因为每个汇编语言语句的语法都相对简单？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T05:11:55.933

我从来没有听说过一个。我认为这是有充分理由的。

如果您查看CPU 文档中的`int`or指令的描述，您将看到大量文本和伪代码。`iret`

大多数常规指令也`mov`有一些技巧。首先，他们可能有一些重要的行为细节。其次，它们可能导致异常，并且完全记录异常发生后发生的情况是不切实际的，因为这在很大程度上取决于操作系统和程序的其他部分。

因此，这样的工具的应用确实非常有限。

在任何情况下，了解每条指令的作用的最佳方法是将阅读 CPU 文档与使用调试器结合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T03:38:29.167

创建一个程序来执行此操作可能是学习汇编语言的好方法。如果您有一些现有的汇编代码，但您不知道它的作用，那么坐下来阅读相关的汇编参考手册，以及使用您喜欢的语言编写的一些相对简单的字符串解析代码，对学习汇编指令集会有很大帮助。

您可能会发现只有少数指令类型构成了大多数汇编代码的主体。在组装级别，计算机所做的大部分工作是：复制数据、算术、重复和比较。

# php - 从 php 中的 json_decode() 获取值时出错？

> ID：11480954
> 
> 赞同：3
> 
> 时间：2012-07-14T04:10:20.757
> 
> 标签：php, json, object, space

我有一个示例代码：

```
$description = '{"2G Network":"GSM 850 / 900 / 1800 / 1900 ","3G Network":"HSDPA 850 / 900 / 1700 / 1900 / 2100 "}';
$data = json_decode($description);
echo $data->2G Network;

 // OR echo $data['2G Network']; 
```

结果是错误，如何解决它！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T04:12:29.310

尝试这个：

```
echo $data->{'2G Network'}; 
```

问题不在于 JSON，而是您尝试访问的对象属性中有一个空格。如果您使用花括号`{` `}`，那么您可以使用字符串来命名您想要获取/设置的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T04:21:22.527

布拉德解决方案是完美的，如果你想从一个数组中得到类似的，你可以这样做：

```
$description = '{"2G Network":"GSM 850 / 900 / 1800 / 1900 ","3G Network":"HSDPA 850 / 900 / 1700 / 1900 / 2100 "}';
$data = json_decode($description, true);
echo $data['2G Network']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T04:13:44.830

您可以删除 2G 和网络之间的空间，也可以使用将 json 解码为数组`json_decode($description, true)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T04:14:32.347

您可以调用函数来删除 JSON 中的空格

见下文 [http://www.pukkared.com/2010/02/removing-extra-white-space-before-returning-json-data/](http://www.pukkared.com/2010/02/removing-extra-white-space-before-returning-json-data/)

# c# - 如何使用代理服务器发送 Web 请求以获取 C# 的特定连接？

> ID：11480968
> 
> 赞同：2
> 
> 时间：2012-07-14T04:12:53.237
> 
> 标签：c#, winforms, proxy, httpwebrequest

我想使用从搜索中找到并应用在代码下面但不起作用的代理服务器发送 Web 请求。

`HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlid);`

```
 WebProxy myproxy = new WebProxy("186.192.17.138", 8080);
                myproxy.BypassProxyOnLocal = true;
                request.Proxy = myproxy;
            request.CookieContainer = cookieContainer; 
```

`request.Method = "POST";`

上面的代码给出了一个错误“**底层连接已关闭：接收时发生意外错误。** ”

当我设置系统代理设置并尝试使用我的应用程序请求而不通过代理请求时，它也会给出与上述相同的错误。

我无法理解实际问题是什么？

# php - php在php中对长字符串进行排序

> ID：11480969
> 
> 赞同：0
> 
> 时间：2012-07-14T04:12:55.263
> 
> 标签：php, arrays, sorting, decimal

我有一个需要排序的目录列表。到目前为止，natsort 运行良好，除非引入小数。009 出现在 009.1 之后我正在尝试从目录名称中获取所有特殊字符，并且到目前为止还没有遇到问题。“http://10.1.1.1/manual/product/v02/secton 3/part 3.1 leveling/002.jpg”有些会长到 150 个左右的字符。由于这些是偶尔带有小数的长字符串，因此很难对它们进行正确排序。我不相信。用于除小数和文件扩展名之外的任何地方

到目前为止，我读过的每一篇文章都忽略了小数。在这种情况下，0200 在 100 之前，我希望特价商品会出现在 # 和字母之后，但显然不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:20:10.407

鉴于您有任何现有 PHP 函数都无法满足的排序要求，最好的办法是调用[usort()](http://www.php.net/usort)并编写自己的比较函数。

样本

```
function cmp($a, $b)
{
    return strcmp($a, $b); # replace with your own comparison logic
}
usort($array, 'cmp'); 
```

# asp.net - 如何从数据库中绑定网格视图中的下拉列表以及编辑和更新它

> ID：11480970
> 
> 赞同：1
> 
> 时间：2012-07-14T04:13:01.050
> 
> 标签：asp.net, sql, gridview

我想用来自数据库的datasiursce在gridview中绑定下拉列表，如果需要，我还想编辑和更新它。

数据源包含我要获取的数据，它不绑定

```
 if (gvItem.Rows.Count > 0)
            {
                for (int i = 0; i < gvItem.Rows.Count; i++)
                {

                    DropDownList sup = (DropDownList)gvItem.Rows[i].FindControl("ddlsup");

                    baplan.Condition = "sup";
                    DataSet dss = new DataSet();
                    dss = baplan.getpro();

                    sup.DataSource = dss;
                    sup.DataBind();
                    sup.DataTextField = "Name";
                    sup.DataValueField = "Id";
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:01:01.200

```
if (gvItem.Rows.Count > 0)
    {
        for (int i = 0; i < gvItem.Rows.Count; i++)
        {

            DropDownList sup = (DropDownList)gvItem.Rows[i].FindControl("ddlsup");

            baplan.Condition = "sup";
            DataSet dss = new DataSet();
            dss = baplan.getpro();

            sup.DataSource = dss;

            sup.DataTextField = "Name";
            sup.DataValueField = "Id";
            sup.DataBind();

            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T05:48:44.953

如果您仍在寻找答案，这是一个详细的示例：

## 输出

![在此处输入图像描述](../Images/6c1eebc360e0feda20f950304b22fad8.png)

## ASPX

```
 <asp:GridView runat="server" ID="gridView" AutoGenerateColumns="False" 
        onrowdatabound="gridView_RowDataBound" 
        onrowcancelingedit="gridView_RowCancelingEdit" 
        onrowediting="gridView_RowEditing" onrowupdating="gridView_RowUpdating">
        <Columns>
            <asp:CommandField ShowEditButton="True" />
            <asp:BoundField HeaderText="First Name" DataField="FirstName" />
            <asp:BoundField HeaderText="Last Name" DataField="LastName" />
            <asp:TemplateField HeaderText="Country">
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("Country.Name") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList runat="server" ID="ddlCountries" DataTextField="Name" DataValueField="ID">
                    </asp:DropDownList>
                </EditItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

## 背后的代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            this.BindGrid();
        }
    }
    protected void gridView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        var t = e.Row.RowType;

        if (t == DataControlRowType.DataRow)
        {
            if (this.gridView.EditIndex >= 0 && e.Row.RowIndex == this.gridView.EditIndex)
            {
                var d = e.Row.FindControl("ddlCountries") as DropDownList;
                var em = e.Row.DataItem as Employee;

                d.DataSource = this.GetCountries();
                d.DataBind();

                d.SelectedValue = em.Country.ID.ToString();
            }
        }
    }
    protected void gridView_RowEditing(object sender, GridViewEditEventArgs e)
    {
        this.gridView.EditIndex = e.NewEditIndex;
        this.BindGrid();
    }

    protected void gridView_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        this.gridView.EditIndex = -1;
        this.BindGrid();
    }

    protected void gridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        var row = this.gridView.Rows[e.RowIndex];
        var c = (DropDownList)row.FindControl("ddlCountries");
        var newValue = c.SelectedValue;

        // save the changes

        this.gridView.EditIndex = -1;
        this.BindGrid();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-05T11:43:12.540

```
 protected void grdAt_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {

            DropDownList ddl_GrdDtype = (DropDownList)e.Row.FindControl("ddlGrdDtype");
            Label lbl_grdStatus = (Label)e.Row.FindControl("lblgrdStatus");

            DataTable dt = attBL.DutyTypeMasterDDLBindForAttendance_L();
            if (dt.Rows.Count > 0)
            {
                ddl_GrdDtype.DataSource = dt;
                ddl_GrdDtype.DataValueField = "DutyCode";
                ddl_GrdDtype.DataTextField = "DutyTypeNick";
                ddl_GrdDtype.DataBind();
                ddl_GrdDtype.Items.Insert(0, "Select");

            }
            ddl_GrdDtype.SelectedItem.Text = lbl_grdStatus.Text;
        }

    } 
```

# ruby-on-rails - 提交表单时无法让黄瓜显示nested_attributes

> ID：11480972
> 
> 赞同：0
> 
> 时间：2012-07-14T04:14:04.123
> 
> 标签：ruby-on-rails, cucumber, capybara, nested-attributes

我正在测试上传带有黄瓜和嵌套属性的文档。目前，当我在 rails 服务器上运行时，它上传正常，但是当我尝试使用 capybaras should 方法测试结果时，它失败了。这是我的相关代码

错误信息

```
Then I should see the job posted and both files attached         # features/step_definitions/job_steps.rb:40
  expected there to be content "test_doc" 
```

特征

```
Background:
Given I am logged in
And I am on the post a new job page

Scenario: User can post a job with a document and picture attached
  When I post a job with a picture and document attached
  Then I should see the job posted and both files attached 
```

步骤定义

```
When /^I post a job with a picture and document attached$/ do
  fill_in 'Title', with: "Title"
  fill_in 'Description', with: "Description"
  fill_in 'Value', with: '199.99'
  fill_in 'job_job_documents_attributes_0_name', :with => "test_doc" 
  attach_file('job_job_documents_attributes_0_document', File.join(Rails.root, 'features', 'upload_files', 'test.pdf'))
  fill_in 'job_job_documents_attributes_0_name', with: "test_pic" 
  attach_file('job_job_pictures_attributes_0_picture', File.join(Rails.root, 'features', 'upload_files', 'test.jpg'))
  click_button 'Create Job'

Then /^I should see the job posted and both files attached$/ do
  page.should have_content 'Job Created!'   
  page.should have_content 'test_doc'       <------ FAILING LINE
end 
```

形式

```
<%= form_for @job, :html => {name: 'job_form'} do |f| %>
  <%= f.label :title %> <br />
  <%= f.text_field :title %>

  <%= f.label :description %> <br /><br />
  <%= f.text_area :description %>

  <%= f.label :value %><br />
  <%= f.text_field :value %>

  <%= f.fields_for :job_documents do |document| %>
    <%= document.label :document %>
    <%= document.file_field :document %>

    <%= document.label :name %>
    <%= document.text_field :name %>
  <% end %>

  <%= f.fields_for :job_pictures do |picture| %>
    <%= picture.label :picture %>
    <%= picture.file_field :picture %>
    <%= picture.label :name %>
    <%= picture.text_field :name %>
  <% end %>
<%= f.submit %>

<% end %> 
```

页面来源

```
<p>
    <label for="job_job_documents_attributes_0_document">Document</label>
    <input id="job_job_documents_attributes_0_document" name="job[job_documents_attributes][0][document]" type="file" />
  </p>
  <p>
    <label for="job_job_documents_attributes_0_name">Name</label>
    <input id="job_job_documents_attributes_0_name" name="job[job_documents_attributes][0][name]" size="30" type="text" />
  </p>
</p> 
```

所以我所有的非嵌套属性都没有抛出任何错误，但我似乎无法让水豚看到我的嵌套属性。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:40:01.623

在新方法的控制器中，您需要构建job_documents，如下所示

```
@job = Job.new
@job.job_documents.build 
```

也不要忘记在您的模型中将 job_documents_attributes 添加到 attr_accessible

# rabbitmq - 监控待处理的 Celery 任务

> ID：11480976
> 
> 赞同：3
> 
> 时间：2012-07-14T04:14:41.243
> 
> 标签：rabbitmq, celery, djcelery

我正在使用带有 RabbitMQ 后端的 Celery。如何监控和获取待处理任务的数量？“celery events”和 djcelery 显示正在运行和已完成的任务。我应该监控 RabbitMQ 吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T13:10:05.720

如果您使用 RabbitMq 作为代理，我建议使用 rabbitmqctl（通常是 /usr/sbin/rabbitmqctl ）。所以命令：

```
rabbitmqctl list_queues 
```

显示队列中的任务数。其他解决方案是安装 rabbitmq-plugins：管理插件。你可以这样做：

```
rabbitmq-plugins list
rabbitmq-plugins enable rabbitmq_management
service rabbitmq-server restart 
```

您的 rabbitmq-server 将提供 webagent，您可以在其中轻松管理您的 rabbit-server。

# php - 使用 jQuery 调用自身的 php 函数

> ID：11480978
> 
> 赞同：0
> 
> 时间：2012-07-14T04:15:11.133
> 
> 标签：php, jquery, socialengine

我目前正在社交引擎中开发一个小部件。我现在要做的是使用 jQuery（jQuery 文件是外部文件）在加载的页面中调用 php 函数，但我能找到的只是使用 .get 、 .post 或 .ajax in。有没有调用函数的方法？

由于它是内置在 socialengine 中的，因此我只允许为 php 文件加载 Controller.php 和 index.tpl。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:27:01.867

您不能从 JavaScript 调用 php 函数，但您可以调用当前页面并在请求中传递参数。这将需要重新加载页面，但您的 PHP 应用程序可以检查参数并执行函数。

```
<?php

$action = $_GET['action'];

switch ($action) {
    case 0:
        someFunction();
        break;
    case 1:
        anotherFunction();
        break;
    default:
        // do nothing
        break;
}

function someFunction() {

}

function anotherFunction() {

}
?> 
```

...做一些事情并调用 jQuery GET 到页面传递 ?action=0 例如在请求中。

您有可能使用带有回调的 JSONP 使用 ajax 构建一些东西，因此您的 PHP 应用程序执行回调，但可能比您需要的更复杂。

# iphone - Xcode 从通讯录中获取联系人电子邮件地址

> ID：11480980
> 
> 赞同：4
> 
> 时间：2012-07-14T04:15:59.753
> 
> 标签：iphone, addressbook

如何在 iPhone 通讯录中获取联系人的电子邮件地址？我有一个应用程序，我想从通讯录中导入任何联系人以及他的所有信息，如姓名、号码、电子邮件。姓名，号码工作正常我也想获取地址。请帮助代码功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T04:28:10.890

您应该添加框架`AddressBook.framework`并添加`#import <AddressBook/AddressBook.h>`.m 文件。

从通讯录中获取联系人电子邮件地址：

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);
NSMutableArray *allEmails = [[NSMutableArray alloc] initWithCapacity:CFArrayGetCount(people)];
for (CFIndex i = 0; i < CFArrayGetCount(people); i++) {
    ABRecordRef person = CFArrayGetValueAtIndex(people, i);
    ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty);
    for (CFIndex j=0; j < ABMultiValueGetCount(emails); j++) {
        NSString* email = (NSString*)ABMultiValueCopyValueAtIndex(emails, j);
        [allEmails addObject:email];
        [email release];
    }
    CFRelease(emails);
}
NSLog(@"All Mails:%@",allEmails);
CFRelease(addressBook);
CFRelease(people); 
```

我想这会对你有所帮助。

编辑：：

您应该使用委托`- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person`方法。当您选择联系人列表中的任何人时，此方法将调用。试试这个...

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{

ABMultiValueRef  emails = ABRecordCopyValue(person, kABPersonEmailProperty);
NSString *emailId = (NSString *)ABMultiValueCopyValueAtIndex(emails, 0);//0 for "Home Email" and 1 for "Work Email".
NSLog(@"Email:: %@",emailId);

    return YES;
} 
```

# php - PHP 会话变量不保留

> ID：11480981
> 
> 赞同：0
> 
> 时间：2012-07-14T04:17:07.977
> 
> 标签：php, session, save

所以，我有这个 RPG 游戏，我一直在努力使用 PHP 来完成它。很长一段时间以来，我一直试图让一些会话工作，以将我的变量保存在各个页面上，这显然是它们的目的。这是我页面中与我的问题相关的代码：

第 1 行：`<?php session_start(); ?>`

这部分只是从用户填写的表格中确定结果以“创建他们的角色”

```
if ($_GET["race"]=="Human"){
$_SESSION["race"] = "Human";
$_SESSION["raceadj"] = "Human";
$_SESSION['racestrengthbonus'] = 0;
$_SESSION['raceendurancebonus'] = 0;
$_SESSION['raceintellectbonus'] = 0;
$_SESSION['racewillpowerbonus'] = 0;
$_SESSION['raceluckbonus'] = 0; 
```

和班级

```
if ($_GET["career"]=="Knight"){
$_SESSION["career"] = "Knight";
$_SESSION['classstrengthbonus'] = 10;
$_SESSION['classendurancebonus'] = 10;
$_SESSION['classintellectbonus'] = 0;
$_SESSION['classwillpowerbonus'] = 0;
$_SESSION['classluckbonus'] = 0;
$_SESSION['RightHand'] = "Iron Sword";
$_SESSION['LeftHand'] = "Wooden Shield";
$_SESSION['Armor'] = "Iron Armor"; 
```

现在这是使用所有这些的代码。

```
<?PHP
echo "<div class=\"playerstats\" align=\"center\"><span class=\"playername\">".$_GET["name"]."</span><br><span class=\"redtext\">".$_SESSION["race"]." - ".$_SESSION['career']." - ".$_SESSION["health"]." HP - ".$_SESSION["gold"]." Gold</div>
<div style=\"float:left\"><span class=\"redtext\">Strength: </span>".$_SESSION["strength"]."<br>
<span class=\"redtext\">Endurance: </span>".$_SESSION["endurance"]."<br>
<span class=\"redtext\">Intellect: </span>".$_SESSION["intellect"]."<br>
<span class=\"redtext\">Willpower: </span>".$_SESSION["willpower"]."<br>
<span class=\"redtext\">Luck: </span>".$_SESSION["luck"]."<br></div>";

echo "<div class=\"equipment\"><span class=\"hover right\">".$_SESSION["RightHand"]."</span><span class=\"redtext\"> - Right Hand</span><br>
<span class=\"hover left\">".$_SESSION['LeftHand']."</span><span class=\"redtext\"> - Left Hand</span><br>
<span class=\"hover\">".$_SESSION['Armor']."</span><span class=\"redtext\"> - Armor</span><br></div>"; ?> 
```

当我第一次加载这个页面时，一切都正确显示。姓名、种族等都显示了用户在他们的表单中输入的内容，但如果用户使用页面上的任何操作（这些只是在同一页面上显示结果的表单），那么它不会保存变量并直接进入种族和班级的“其他”结果，没有保存名称。我不确定我做错了什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:27:44.477

确保`session_start`在开始时以及在每个页面中都使用会话变量。如果您忘记在开始时声明 session_start，则会话将被遗忘。

编辑：

page1.php

```
<?php session_start(); $_SESSION['bar'] = "SAVED SESSION"; ?> 
```

page2.php

```
<?php session_start(); echo $_SESSION['bar']; ?> // outputs 'SAVED SESSION' 
```

page3.php

```
<?php echo $_SESSION['bar']; ?> // outputs ''; session is forgotten 
```

编辑：我在这里重新创建了您的测试游戏的一部分：[http](http://www.huinda.com/test/) ://www.huinda.com/test/会话确实有效，您只是处理不正确，因此它们要么被意外删除，要么被意外设置为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T04:49:27.607

也许对于 form method=POST 等 $_GET[var] 将找不到变量。尽管您说第一个视图它显示正确，但似乎已检索到值。

我怀疑您需要在 php.ini 文件中配置会话存储并重新启动您的 Web 服务器。

session.save_path

*   参见： http: [//support.qualityunit.com/021373-How-To-Enable-Session-Support-for-PHP](http://support.qualityunit.com/021373-How-To-Enable-Session-Support-for-PHP)

确保它是 Web 服务器的可写目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T04:20:01.210

提交表单后，您确定在 $_GET 中有“种族”和“职业”吗？

# c# - C# 和 Objective-C 之间的等效文件大小方法

> ID：11480983
> 
> 赞同：0
> 
> 时间：2012-07-14T04:17:26.460
> 
> 标签：c#, iphone, objective-c

我正在查看我同事的 C# 代码（我是个菜鸟），看到他正在向我传输他的 JSON 对象的文件大小，以便我在 iPad 端检查。他通过以下方式做到这一点：

```
long fileSize = new System.IO.FileInfo(fileName).Length; 
```

我想知道在objective-c中对此进行测试的等效方法是什么。我使用 NSURLConnection 使用数据，但不知道如何检查文件大小是否相等。我稍后解析 JSON 对象，但我想通过文件大小检查传输是否成功。

我试过了：

```
 NSString *responseString = [[NSString alloc] initWithData:self.ReceivedData encoding:NSUTF8StringEncoding];
    NSLog(@"fileSize: %i, %i", [responseString length], [responseString lengthOfBytesUsingEncoding:NSUTF8StringEncoding]); 
```

但这两个数字都是错误的。我不确定这样做的正确方法是什么。

由于我将它作为 NSMutableData 接收，因此我没有看到检查大小的简单方法。我唯一能想到的就是将 NSData 写入临时或文档目录并使用 NSFileManager 的 fileSizeAtPath: 方法来查找文件大小。有没有更好的方法不将文件写入可用目录之一？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:20:53.193

`NSMutableData`继承自`NSData`。您可以使用它的[`length`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/instm/NSData/length)方法来获取数据对象包含的字节数。您提供的相应 C# 方法[在此处](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.length)记录，它还指定大小以字节为单位。

# google-apps-script - 关于脚本授权的说明

> ID：11480984
> 
> 赞同：0
> 
> 时间：2012-07-14T04:17:36.907
> 
> 标签：google-apps-script

我意识到当脚本源自电子表格中时，它需要用户运行一次脚本（从电子表格中）以授权然后再次执行。

1）因此，如果需要授权并且您以用户身份执行它，则永远不应部署独立的 UI 应用程序（源自电子表格），对吗？

2) 这是启动 script.google.com 的重点吗？这样当独立 UI 应用首先需要授权时，您可以以用户身份运行脚本？

3）如果第二个问题是真的，那么我假设将在 chrome 商店中列出的所有独立 UI 应用程序都需要来自 script.google.com？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:14:55.013

不管脚本驻留在哪里——电子表格或独立的，“有效用户”（脚本最终在其权限下运行的用户）都需要对其进行授权。

现在的区别（在 IO 2012 之后）是独立应用程序可以在活动用户的凭据下运行（活动用户 = 有效用户）。

活动用户仍然必须授权脚本才能这样做。我建议你从 Chrome 网上应用店安装 Drive Eye，你会亲眼看到我在说什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:29:58.177

您的第一点的答案是否定的......因此接下来的两个问题（不是真正的问题，而是意见）变得毫无意义。.. 更准确地说，独立应用程序只需要在用户第一次通过 URL 调用时获得用户授权，就是这样......

# google-chrome - 可以将油脂猴类型的用户脚本打包为 Chrome 扩展程序吗？

> ID：11480985
> 
> 赞同：26
> 
> 时间：2012-07-14T04:17:39.837
> 
> 标签：google-chrome, google-chrome-extension, userscripts

今天谷歌[改变了用户脚本在 Chrome 中的安装方式](http://support.google.com/chrome_webstore/bin/answer.py?hl=en&answer=2664769&p=crx_warning)。您不再可以只单击包含一个链接，确认几个对话框并安装它。现在您必须使用 Save As... 下载脚本，打开包含它的 Finder/Explorer 窗口，在 Chrome 中打开 Extensions 窗口，然后将脚本拖到扩展程序窗口。IOW，一个大皮塔饼。

据推测，另一种选择是将其打包为 Chrome 扩展程序并在 Chrome 网上商店中获取。但是，我在任何地方都找不到任何信息表明您可以将用户脚本打包为扩展。 **这可能吗？** 如果是，是否有任何新限制、文档链接或其他提示？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-14T06:03:34.883

先说两点：

1.  Chrome 的这种新行为对于用户脚本来说似乎过于严格和苛刻。如果您同意，请向 Google 表达您的不满。（用户脚本不像成熟的扩展那样危险或强大。）

2.  Chrome 并没有尝试打包扩展（这似乎是一种低收益的麻烦活动），而是提供了两种机制来（有选择地）禁用这种新的烦恼：

    1.  配置 Chrome 以使用[参数`--enable-easy-off-store-extension-install`启动](http://www.ghacks.net/2012/06/12/chrome-fix-extensions-apps-and-user-scripts-cannot-be-installed-from-this-web-site/)。

    2.  添加[配置键以允许从特定站点进行安装](http://www.chromium.org/administrators/policy-list-3#ExtensionInstallSources)：
        例如，将此条目添加到 Windows 注册表：

        ```
        Software\Policies\Google\Chrome\ExtensionInstallSources\1 = "http://userscripts.org/*" 
        ```

        允许从那个有用的脚本交换所轻松安装。

* * *

**将用户脚本打包为扩展**（已在最新*版本*、版本 20.0.1132.57 上验证，可能会发生变化）：

1.  为您的用户脚本创建一个脚本文件夹和一个清单，如[本答案的](https://stackoverflow.com/a/5259212/331508)*“控制脚本和名称”*部分所示。

2.  从 Chrome*扩展*页面，激活***开发者模式***： ![开发模式](../Images/77be976972b63283345525396252f224.png)

3.  单击***包扩展***。 ![包扩展](../Images/3795d1630e857b5832e401ad45a7a66e.png)

4.  输入在步骤 1 中创建的***文件夹***路径，然后单击***Pack Extension***： ![打包分机，输入字段](../Images/06b76553998a5411c459d49a218f9425.png)

5.  请注意，新的扩展文件 ( `HelloWorld.crx`) 和密钥文件 ( `HelloWorld.pem`) 是在父目录 ( ) 中创建的`C:\MyChromeScripts\`。 ![打包结果](../Images/54a39a8570a458b4fff97c98dd9a22da.png)

6.  现在，可以像安装任何其他扩展程序一样安装扩展程序，也可以将其[上传到 Chrome 网上应用店](https://developers.google.com/chrome/web-store/docs/get_started_simple)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-14T04:35:26.810

您可以使用像[Tampermonkey](https://chrome.google.com/webstore/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo)这样的 Chrome 扩展程序来运行/管理您的用户脚本，而无需将它们作为扩展程序本身安装。

（我从来没有用过，所以我不能说它是否有任何好处，但它的评论很好）

# google-maps - 使用航点时，通过 DirectionsRenderer “zig-zags” 渲染的路线返回上一个航点

> ID：11480987
> 
> 赞同：2
> 
> 时间：2012-07-14T04:17:53.933
> 
> 标签：google-maps, google-maps-api-3

最近，当在我们的应用程序的起点和终点位置之间使用带有“航路点”的 DirectionsService 时，我们一直在返回这些在视觉上没有意义的“之字形”路线。

看起来，一切都很好，但在第 7 个航路点之后的某个地方，该路线会以戏剧性的锯齿形返回更早的航路点，然后似乎试图将自己纠正回正确的路径。

我附上了一张图片来展示我想说的内容，并指出了事情出错的地方。此外，我在下面包含了示例代码，并在此处发布了该问题的工作演示：

[http://dev.anytraq.com:8080/test.html](http://dev.anytraq.com:8080/test.html)（工作版）

![问题，用箭头标记](../Images/3d92e50b45984e975b1c13f300e826fb.png)

我想知道这里是否有人遇到过这样的问题，或者可以阐明可能发生的事情？正如您在下面看到的，代码非常简单......基本上我们只定义了一个起点和终点 LatLng 对象，以及它们之间的 8 个航路点，然后将其发送到 DirectionsService。

我会很感激任何可能想到的建议，我完全被难住了。

```
<!DOCTYPE html> 
<html> 
  <head> 
    <title>ZigZagged Directions Example</title> 

    <meta charset="UTF-8"> 
    <style type="text/css"> 
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style> 
    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?sensor=false"></script> 
    <script type="text/javascript"> 
      var map;
      function initialize() {

        // map options
        var myOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // the map
        map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

        // directions service
        directionsService = new google.maps.DirectionsService();

        // Define our origin position, the start of our trip.
        originPosition = new google.maps.LatLng('37.66258', '-121.87058');

        // Define 8 waypoints to place between the origin and the destination
        waypoint1 = new google.maps.LatLng('37.65638', '-121.87750');
        waypoint2 = new google.maps.LatLng('37.64333', '-121.88174');
        waypoint3 = new google.maps.LatLng('37.63676', '-121.88447');
        waypoint4 = new google.maps.LatLng('37.60746', '-121.87343');
        waypoint5 = new google.maps.LatLng('37.57868', '-121.87702');
        waypoint6 = new google.maps.LatLng('37.56368', '-121.90382');
        waypoint7 = new google.maps.LatLng('37.54175', '-121.92334');
        waypoint8 = new google.maps.LatLng('37.51806', '-121.94201');

        // push the waypoints defined above into an array
        wayPointArray = new Array();
    wayPointArray.push({location: waypoint1, stopover: false});
    wayPointArray.push({location: waypoint2, stopover: false});
    wayPointArray.push({location: waypoint3, stopover: false});
    wayPointArray.push({location: waypoint4, stopover: false});
    wayPointArray.push({location: waypoint5, stopover: false});
    wayPointArray.push({location: waypoint6, stopover: false});
    wayPointArray.push({location: waypoint7, stopover: false});
    wayPointArray.push({location: waypoint8 , stopover: false});

    // define our definition position, the last stop of our trip
        destinationPosition = new google.maps.LatLng('37.50162', '-121.93034');

         var request = {
      origin: originPosition,
      destination: destinationPosition,
      waypoints: wayPointArray,
      travelMode: google.maps.DirectionsTravelMode.DRIVING,
      unitSystem: google.maps.DirectionsUnitSystem.METRIC,
      optimizeWaypoints: false
    };

        directionsService.route(request, function(response, status) {

          if (status == google.maps.DirectionsStatus.OK) {

            var polyOpts = {
                strokeOpacity: 1.0,
                strokeColor: '#0000FF',
                strokeWeight: 2
            }

            var directionsDisplayOptions = { 
                suppressMarkers: false, 
                suppressInfoWindows: false, 
                preserveViewport: false,
                polylineOptions: polyOpts
            };

            directionsRenderer = new google.maps.DirectionsRenderer(directionsDisplayOptions);
            directionsRenderer.setMap(map);
            directionsRenderer.setDirections(response);

          } else {

            console.info('could not get route');
            console.info(response);

          }
    });

      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
  </head> 
  <body> 
    <div id="map_canvas"></div> 
  </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T08:58:24.140

这是渲染中的错误。

地图上“Merge on to I-680”之后的线由该编码字符串给出，该字符串出现在 Directions Service 的 JSON 响应中：

```
ylvdFjw|fVMJw@x@[Ha@FUGYOKSEYCYB[F[HOTUXMf@QRGxDoAlBIrBDpBDt@@@?p@?nAArCQlDW`BWjCy@`CwArKyHxGcDpA_@vA[rAWtAOxAKpAEdABhBGpEAvAAfCKnGQzDm@lGkCfGiC~CoAhb@mPrDuA~`@oLn@Q~EgBr@Up@MpAKnBGb@?nBLnAX`AVx@Xt@Z?@z@\\HDfBz@rChAtCj@jDHpCU~Cw@~As@jAw@x@m@bDcCbDeCh@a@fAg@FEf@SBA`Bs@jAM`@Cn@CfB?hBPbB\\`CdA`@NJD^NlAb@bM`GlW~JfHzC|D`CpD~DlAxAl@t@bFvGbApAl@hAVj@Pf@d@rAn@hCjFnUh@|ANd@rCfFxEtIvA|BrNd[zZpr@xAhCfEdFlHxJRVhA`B`@~@t@hBh@`BjAlF`BbIpA~EnA~CpA|B~@lA|A~ArDvCzDzCfClBDB`DtBx@h@fHnDzB|@~B`AjH`DzEnBdAb@jB`@dCRrDJtADnBLpCr@dAd@l@Vz@d@vA`A`@\\d@b@vDlErHzIj@p@LPRRf@n@lB`CjBfCzApCVb@jCdGtClHjCjGjCpGjAxCBFtJbUFNDLx@zBnArC~CtHnCpF`@t@P\\LTP^|@~A\\j@hChElB|CrAxBb@h@t@x@h@j@lA|@~@d@vBt@rCh@lBHxAAdEc@nAa@jAo@~@k@pA}@vFuFvDqDdF}DrFcDlB_AhJeEbEyBVMlAo@rJsEhAm@~EiCtD{AlHeD~GkDxBwAVOZSz@i@TShCwBpJiKfHqI 
```

北卡罗来纳大学的 Mark McClure 教授在[http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/decode.html](http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/decode.html)有一个解码器，它可以生成线代表的点列表。他还有一个实用程序，它将获取点列表，生成编码字符串并在地图上显示。解码该字符串，然后绘制生成的地图会产生以下结果：

![谷歌地图视图](../Images/2e8d4bc569d8539c52b84ffc2bb3f188.png)

这没有显示偏差。因此，路线服务*提供*的要绘制的线（由其数据定义）是正确的，但渲染不正确。可能与 McClure 的页面使用 API 的第 2 版而不是第 3 版有关，因此可以正确呈现数据。

应在此处报告错误：[http](http://code.google.com/p/gmaps-api-issues/issues) ://code.google.com/p/gmaps-api-issues/issues 。我建议您参考这个问题，并在报告中提供尽可能多的细节。

# iphone - 使用 NSXMLParser 和 UITableView 重新加载内容会使应用暂停几秒钟

> ID：11480989
> 
> 赞同：0
> 
> 时间：2012-07-14T04:18:25.500
> 
> 标签：iphone, objective-c, uitableview, nsxmlparser

我正在开发我的第一个应用程序，它从网络获取 XML 提要。

第一次将 XML 加载到 中`TableView`，一切正常，但是当我想通过点击按钮重新加载数据时，它会在重新加载 XML 和表格视图之前暂停几秒钟。我怎样才能避免这个停止时间？

当我点击表格单元格以转到下一个`TableViewController`时，它也会在加载 XML 提要以显示列表时暂停几秒钟。

我的应用程序就像 iPhone 的原生博客应用程序，有类别和子类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:36:09.217

参考以下流程。

* * *

```
@interface YourViewController : UITableViewController<NSURLConnectionDelegate,NSXMLParserDelegate>
//some declartion property...
@end 
```

* * *

```
@implementation YourViewController

- (void)viewDidLoad
  {
    [super viewDidLoad];

    isParsingStart = NO;
    webData = [[NSMutableData alloc] init];
    connection = [[NSURLConnection alloc] initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:YOUR_XML_URL] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:20] delegate:self];
  }

 - (void)tappingButton:(UIButton *)sender
  {   
    if(isParsingStart)
    {
      //show a alert view... or other do stuff 
      return;
    }
     webData = [[NSMutableData alloc] init];
     connection = [[[NSURLConnection alloc] initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:YOUR_XML_URL] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:20] delegate:self] autorelease];
  }

  - (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
  {
     [webData appendData:data];
  }

 - (void) connectionDidFinishLoading:(NSURLConnection *)connection
  {

     parser = [[NSXMLParser alloc] initWithData:webData];
     parser.delegate = self;
     if([parser parse])
     {
       isParsingStart = NO;
       NSLog(@"The XML is Parsed.");
       [[self tableView] reloadData];
     }
     else 
     {
        isParsingStart = NO;
        NSLog(@"Failed to parse the XML");
     }

       [webData setData:nil];
  }

- (void)parserDidStartDocument:(NSXMLParser *)parser
  {
      isParsingStart = YES;
  }

  - (void)parserDidEndDocument:(NSXMLParser *)parser
  {
      //do stuff
  }

  - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
  {
     // do stuff
  }

  - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
  {
     // do stuff
  }

           .
           .
           . 
```

# android - JQueryMobile：在运行时将 html-input-type 更改为“数字”？

> ID：11480991
> 
> 赞同：0
> 
> 时间：2012-07-14T04:18:33.203
> 
> 标签：android, jquery, html, jquery-mobile, android-webview

我正在尝试使用 WebView 制作 JQuery-mobil 应用程序 + Android。

该应用程序`html-input`默认设置为`type="text"` 如果最终用户按下输入然后标准 Android 键盘弹出窗口。

像这样：

[![](../Images/3dbf08fc7b59b84630b3b695de3e4f9c.png)](https://i.stack.imgur.com/mgYx2.jpg)

**还行吧**

**但是**我需要一个按钮来改变`type`，`type="number"`所以按下键盘只显示数字。

像这样：

[![](../Images/28959b43ee41b9f94bed65c039c878e6.png)](https://i.stack.imgur.com/WrRLz.jpg)

这是我为此使用的 HTML：

```
/*html-input*/
<input type="text" name="regnr" value=""/>

/*Open keybord as number-keybord: </label>
<a href="#" data-role="button" data-mini="true" id="keybord-as-numbers">Number</a> 
```

此 JQuery 脚本`replaceWith`用于在单击按钮时替换输入标记，因此类型设置为数字

```
<script>
$(function(){
    //onClick: keybord-as-numbers
    $("#keybord-as-numbers").click(function(){
        $("#regnr").replaceWith("");
        $("#div-searchnumber").html('<input type="number" class="searchnumber" data-icon="search" name="regnr" maxlength="4" id="regnr" value="" data-inline="true" autofocus /\>');
    });
});
</script> 
```

问题是它删除了 css 样式，并且在函数执行后我不能`.get`从 , 中获取值。`html-input``replaceWith`

我试过了，`$('#regnr').attr('type', 'number');`但这看起来不像这样有效:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:32:18.110

查看[http://www.texotela.co.uk/code/jquery/numeric/](http://www.texotela.co.uk/code/jquery/numeric/)

您可以简单地更改您的班级 ID 并在您的页面上使用此代码：

```
$(document).ready(function(){
    $(".numeric").numeric();
}); 
```

如果您不想使用 jQuery，您可以编写自己的函数并将其称为 onkeyup 事件

请参阅：[http ://www.htmlcodetutorial.com/forms/index_famsupp_158.html](http://www.htmlcodetutorial.com/forms/index_famsupp_158.html)

另一种选择是使用 step 属性：

[http://www.w3.org/TR/html-markup/input.number.html#input.number.attrs.step.float](http://www.w3.org/TR/html-markup/input.number.html#input.number.attrs.step.float)

```
<input type="number" step="0.01" min="0" > 
```

# c#-4.0 - C# 文件系统观察器和 FIleStream 编写器

> ID：11480993
> 
> 赞同：3
> 
> 时间：2012-07-14T04:19:36.850
> 
> 标签：c#-4.0

我创建了一个 FileSystem 观察者并注册了 2 个事件。一个是为了创造，另一个是为了改变。

```
FileSystemWatcher fswInbound = new FileSystemWatcher();
fswInbound.Path = "path to directory";
fswInbound.EnableRaisingEvents = true;
fswInbound.InternalBufferSize = 12288;
fswInbound.Created += new FileSystemEventHandler(program.FileSystemWatcher_Created);
fswInbound.Changed += new FileSystemEventHandler(program.FileSystemWatcher_Created); 
```

比在同一个程序中，我动态创建文件并尝试写入 FileSystem Watcher 正在侦听的文件夹。

```
using (StreamWriter outfile = new StreamWriter(filename))
{
      outfile.Write("Some really long string");
} 
```

创建新文件后。2 个事件被触发。一个是为了改变，另一个是为了创造。我只希望触发文件创建事件。第一次创建文件时如何避免文件更改事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:41:21.257

这是根据[MSDN](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.onchanged.aspx)设计的要解决它，我将有一个看起来像你有的通用事件处理程序，然后我会检查[FileSystemEventArgs](http://msdn.microsoft.com/en-us/library/system.io.filesystemeventargs.aspx)以检查文件创建或更改的[ChangeType](http://msdn.microsoft.com/en-us/library/t6xf43e0.aspx)。

从上面的链接：

> 创建文件后立即引发 OnCreated 事件。如果文件被复制或传输到监视目录，将立即引发 OnCreated 事件，然后是一个或多个 OnChanged 事件。

# asp.net-mvc - 记录 mvc 管道

> ID：11480998
> 
> 赞同：2
> 
> 时间：2012-07-14T04:20:13.737
> 
> 标签：asp.net-mvc, logging, pipeline

我正在使用 asp.net MVC3，我需要将用户在我的应用程序中所做的所有事情都保存在数据库中（每次点击、IP、日期、请求、客户端信息在哪里）。在此处理过程中，我可以在哪里替换默认行为或注入我自己的逻辑？

我注意到有 ASP.NET MVC 扩展点，我不知道我需要保存在数据库中的所有数据在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T04:35:31.647

您可以使用 MVC 操作过滤器类型。[http://msdn.microsoft.com/en-us/library/dd410209(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/dd410209(v=vs.90).aspx)中的参考资料