# StackOverflow 问答 11458000-11458999

# javascript - 如何在新选项卡中打开弹出窗口但将用户保留在呼叫者选项卡上？

> ID：11458000
> 
> 赞同：0
> 
> 时间：2012-07-12T18:11:44.397
> 
> 标签：javascript, navigation, popup

我需要在新标签页中打开一个页面。该页面有一个 XAML 应用程序，可以打印我们在 Web 应用程序中使用的特殊条形码。我们设法通过一个简单的 window.open 来做到这一点。问题在于，除了打开页面之外，IE 还会移动到该选项卡而不是停留在当前选项卡中。我试过了

```
//open the printing window
win2 = window.open('printingPage.aspx');
//set focus back to opener page
win2.blur();
window.focus();
window.document.focus(); 
```

但这些都不起作用。有没有办法避免这种情况？我需要它与 IE 9+ 一起使用，我们不关心其他浏览器或版本（至少现在）。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:21:29.170

您无法控制浏览器如何切换选项卡的显示。

如果您可以通知您的用户，他们可以`CTRL`在单击链接之前按下或单击中键（大多数鼠标上的滚轮）以“在后台”打开选项卡，但这就是您所能做的。

# android - 使用 PaperClip 将图像从 Android 上传到 Rails 服务器时遇到问题

> ID：11458004
> 
> 赞同：6
> 
> 时间：2012-07-12T18:12:10.497
> 
> 标签：android, ruby

我正在尝试将图像从 Android 上传到我的 rails 服务器。我所有其他数据都上传了，但我收到“错误无效的正文大小”错误。它与图像有关。下面是我的代码。帮助？！

```
 public void post(String url) {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            HttpPost httpPost = new HttpPost(url);
            httpPost.addHeader("content_type","image/jpeg");
            try {
                MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
                entity.addPart("picture_file_name", new StringBody("damage.jpg"));
                File file = new File((imageUri.toString()));
                entity.addPart("picture", new FileBody(file, "image/jpeg"));
                httpPost.setEntity(entity);         
                HttpResponse response = httpClient.execute(httpPost, localContext);
            } catch (IOException e) {
                e.printStackTrace();
            }
        } 
```

我试过删除浏览器兼容参数，但没有帮助。我的图像被存储为一个名为 imageUri 的 URI。我正在使用回形针宝石。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T08:57:38.930

我就是这样解决的。

```
MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
    for (NameValuePair nameValuePair : nameValuePairs) {
        if (nameValuePair.getName().equalsIgnoreCase("picture")) {
                File imgFile = new File(nameValuePair.getValue());
                FileBody fileBody = new FileBody(imgFile, "image/jpeg");
                multipartEntity.addPart("post[picture]", fileBody);
        } else {
                multipartEntity.addPart("post[" + nameValuePair.getName() + "]", new StringBody(nameValuePair.getValue()));
        }                   
    }
httpPost.setEntity(multipartEntity);
HttpResponse response = httpClient.execute(httpPost, httpContext); 
```

这将产生一个像这样的 POST：

```
{"post"=>{"description"=>"fhgg", "picture"=>#<ActionDispatch::Http::UploadedFile:0x00000004a6de08 @original_filename="IMG_20121211_174721.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"post[picture]\"; filename=\"IMG_20121211_174721.jpg\"\r\nContent-Type: image/jpeg\r\nContent-Transfer-Encoding: binary\r\n", @tempfile=#<File:/tmp/RackMultipart20121211-7101-3vq9wh>>}} 
```

在 rails 应用程序中，您的模型属性必须与您在请求中使用的名称相同，所以在我的情况下

```
class Post < ActiveRecord::Base
  attr_accessible :description, :user_id, :picture

  has_attached_file :picture # Paperclip stuff
...
end 
```

我还从 rails 应用程序中禁用了 CSRF 令牌。

# xcode - 为 Jenkins 用户将 Xcode 开发人员配置文件导入 login.keychain 以构建 iOS 应用程序

> ID：11458005
> 
> 赞同：3
> 
> 时间：2012-07-12T18:12:11.507
> 
> 标签：xcode, macos, jenkins

伙计们，

我已经对这个主题进行了大量研究，但到目前为止还没有找到任何答案。我正在努力实现与@delaney05 在[Jenkins on OS X 的帖子中所展示的相同的目标：xcodebuild 给出了代码签名错误](https://stackoverflow.com/questions/9245149/jenkins-on-os-x-xcodebuild-gives-code-sign-error)，但我似乎遇到了一些他没有的问题（或者，至少他没有）不提）。

具体来说，我可以通过 XCode（使用标准 GUI 方法）导出开发人员配置文件，但该`security`工具似乎不允许我通过 CLI 将这些配置文件导入`login.keychain`Jenkins 用户。当然，Jenkins 用户不是“真正的”用户，因此您不能使用 GUI 方法登录并执行此操作。

我尝试在@edelaney05 的关于此主题的文章中发布更新，但显然版主希望我提出一个单独的问题。

在这一点上，我正在认真考虑创建一个真正的 Jenkins 用户，然后安装由@sti aka, [Sami Tikka](https://github.com/stisti)提供的 Jenkins 应用程序版本。至少这样我就可以使用所有 Mac 标准的 GUI 方法来导出和导入开发人员配置文件、`.mobileprovision`文件和其他密钥、证书等......当然，这样做会使构建变得更加困难我们未来需要的 Jenkins 服务器集群，但我想知道这是否真的是目前最好的解决方案。

我做了什么傻事吗？我错过了什么吗？您是否希望看到任何其他文档来显示我已完成的所有步骤？谢谢！

顺便说一句，我确实尝试发布一个版本，该版本完全引用了具有正确链接的所有页面，但作为“新用户”，我显然没有足够高的声誉得分来发布包含两个以上链接的问题。;-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:45:45.143

建议您尝试通过命令行构建您的 Xcode 项目，一旦成功，您可以尝试在 Jenkins 中设置相同的环境。

请注意，Jenkins 用于运行其命令的用户与 Jenkins-Login 无关，而是启动 Jenkins**应用程序的****OS-X 用户**。这个用户可能是“守护进程”，这与您在 Xcode 中的常规工作所使用的用户不同。

 **（可以通过在 Jenkins Job 中运行“ **id** ”作为命令来确认）

祝你好运！**

# sql - 在不存在的地方插入 foreach x

> ID：11458006
> 
> 赞同：3
> 
> 时间：2012-07-12T18:12:12.913
> 
> 标签：sql, sql-server, sql-server-2005, stored-procedures

我有一个相当简单的数据库，由三个（相关）表组成：用户、权限和用户权限。基本前提很简单：创建用户时，权限表中的所有记录都会自动添加到 user_permissions 表中，并具有默认值。这一切都很好。

但是，由于我目前处于开发阶段，我会继续添加新权限，现有用户当然不会拥有这些权限，因为这些新权限在创建时不存在于权限表中。因此，我有一个绝妙的主意，即创建一个小存储过程来自动更新 user_permissions 表，其中包含 user_permissions 表中当前不存在的所有权限。

所以，简而言之，我想做的是（伪代码）

```
For each user without x permission in user_permissions, insert into user_permissions user_id and permission_id 
```

我不太确定如何从 SQL POV 执行此操作。我玩了连接并且“不存在”，但还没有真正得到任何地方。

您可以在这里使用我的架构：[http](http://sqlfiddle.com/#!3/b0761/3) ://sqlfiddle.com/#!3/ b0761/3 提前感谢您的帮助！

编辑：架构：

```
CREATE TABLE users (
  user_id      int IDENTITY(1, 1) NOT NULL,
  user_name    varchar(255),
  PRIMARY KEY (user_id));

CREATE TABLE permissions (
  permission_id          int IDENTITY(1, 1) NOT NULL, 
  permission_name        varchar(255) NOT NULL, 
  PRIMARY KEY (permission_id));

CREATE TABLE user_permissions (
  user_id       int NOT NULL, 
  permission_id int NOT NULL, 
  value         tinyint DEFAULT 0 NOT NULL,  
  PRIMARY KEY (user_id, 
  permission_id));

ALTER TABLE user_permissions ADD CONSTRAINT FK_user_pe338140 
FOREIGN KEY (permission_id)
REFERENCES permissions (permission_id);

ALTER TABLE user_permissions ADD CONSTRAINT FK_user_pe405324 
FOREIGN KEY (user_id) REFERENCES users (user_id);

INSERT INTO users(user_name) values('test_username');
INSERT INTO users(user_name) values('test_username2');

INSERT INTO permissions(permission_name) VALUES('permission_1')
INSERT INTO permissions(permission_name) VALUES('permission_2')

INSERT INTO user_permissions(user_id, permission_id, value)
VALUES(1, 1, 1)

INSERT INTO user_permissions(user_id, permission_id, value)
VALUES(2, 1, 1) 
```

编辑：到目前为止查询

```
SELECT a.user_id, b.permission_id, 1 as 'value'
FROM USER_PERMISSIONS a right outer join 
PERMISSIONS b on a.permission_id = b.permission_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:25:02.107

```
insert into user_permissions (user_id, permission_id)
select
  u.user_id,
  p.permission_id
from
  users u
  cross join permissions p
where
  not exists (select 0 from user_permissions with (updlock, holdlock)
              where user_id = u.user_id and permission_id = p.permission_id) 
```

参考：[只有在行不存在时才插入行](https://stackoverflow.com/questions/3407857/only-inserting-a-row-if-its-not-already-there)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:25:00.157

```
INSERT dbo.user_permissions([user_id], permission_id, [value])
SELECT u.[user_id], p.permission_id, 1
FROM dbo.user_permissions AS u 
CROSS JOIN dbo.[permissions] AS p
WHERE NOT EXISTS (SELECT 1 FROM dbo.user_permissions 
  WHERE [user_id] = u.[user_id]
  AND permission_id = p.permission_id
)
GROUP BY [user_id], p.permission_id; 
```

顺便说一句，您应该避免使用往往需要分隔符的名称，例如`user_id`关键字`permissions`/保留字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:47:40.900

Mansfield，如果我对您的理解正确，您希望在添加新权限时为 user_permissions 表添加一个值。

我还假设您希望它默认为 0。插入新权限后，运行此代码将为所有用户播种 user_permissions 表，对于当前未使用的任何权限，默认值为 0。

```
--insert into permissions(permission_name) values('newperm');
--select * from permissions
insert into user_permissions(user_id, permission_id, value)
select
  u.user_id, p.permission_id, 0
from
             users u
  cross join permissions p
where
      p.permission_id not in(select permission_id from user_permissions)
;
--select * from user_permissions; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:20:16.263

以下查询将为您提供要插入的缺少的用户权限行：

```
select a.USER_ID,b.permission_id from users a,permissions b,user_permissions c
   where c.user_id <>a.user_id and c.permission_id <> b.permission_id 
```

# django - 用于存储 django 应用程序范围选项的单一模型

> ID：11458009
> 
> 赞同：1
> 
> 时间：2012-07-12T18:12:20.867
> 
> 标签：django, django-admin

我有一组顶级配置数据字段，我希望能够在 django admin 中为我的 django 应用程序的每个部署设置这些字段。我只想要一套。

示例字段：site_logo、contact_person、address、facebook_url、twitter_url

问题是 Django Admin 面向模型的表（列表），因此它不适合这种类型的单一配置模型。我真的只希望整个站点都存在这些模型之一，并且能够从管理员中单击它并编辑各个字段。

看来我过去曾遇到过第 3 方应用程序来完成此操作，但在任何地方都找不到。部分问题是我发现很难找到合适的词来谷歌。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:25:03.177

看起来[django-values](http://code.google.com/p/django-values/)会做你想要的。

其他可能的竞争者：

*   [http://github.com/sciyoshi/django-dbsettings](http://github.com/sciyoshi/django-dbsettings)（看起来没有维护）
*   [http://github.com/jqb/django-settings](http://github.com/jqb/django-settings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:51:41.917

看看[django-livesettings](https://bitbucket.org/bkroeze/django-livesettings/src)听起来它可能适合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:22:58.523

不是我用过它，而是我听说过关于[django-constance 的](https://github.com/comoga/django-constance/)好消息。

Django 包的[配置网格](http://www.djangopackages.com/grids/g/configuration/)中还列出了更多选项。

# file - VBScript - 今天未创建文件时的通知

> ID：11458011
> 
> 赞同：1
> 
> 时间：2012-07-12T18:12:29.857
> 
> 标签：file, if-statement, vbscript, exists, last-modified

目标：运行一个每天检查文件夹的 VBScript，并报告当天是否没有文件保存到该文件夹​​。忽略前几天存在的文件。

场景：每天凌晨 3 点在 C:\Temp 中创建一个日志文件。这就是告诉我们系统执行了一项任务的原因。如果未生成日志文件，则任务崩溃。我写这篇文章是为了检查 Temp 文件夹中是否有今天创建的文件，如果它不存在就给我发电子邮件。

到目前为止的解决方案：

```
option explicit 
dim fileSystem, folder, file 
dim path  
path = "C:\Temp" 

Set fileSystem = CreateObject("Scripting.FileSystemObject") 
Set folder = fileSystem.GetFolder(path) 

for each file in folder.Files     
  if file.DateLastModified > dateadd("h", -24, Now) then 
'WScript.Echo file.Name & " last modified at " & file.DateLastModified 
else 
SendEmail
'WScript.Echo "this should have sent an email."
  end if 
next 

Function SendEmail() 
 'Send Email notification function here (this part works already)
End Function 
```

我遇到的问题：

我似乎无法想办法让脚本忽略文件夹中前几天的文件。

在我的测试中，我在 C:\Temp 中填充了今天修改的文件，以及 2012 年 7 月 10 日修改的文件。因为这个场景同时匹配 'then' 和 'else' 语句，所以它两者都做。

我想我只需要对循环稍作修改即可告诉它 - 忽略不是“今天”日期的文件 - 如果今天不存在文件，请发送电子邮件。

任何帮助都是极好的。我似乎无法“看到”答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:22:10.397

你很近。问题是您正在循环并检查每个文件。您只需要检查一个文件是否不存在。我对 vbscript 不太熟悉，所以您可能需要稍微调整一下，但我所做的是添加一个变量`found`并将其初始化为`false`. 如果您发现过去 24 小时内创建的文件，请将其设置为`true`. 一旦你完成循环，如果它仍然`false`是，过去 24 小时内没有文件被修改

```
option explicit 
dim fileSystem, folder, file 
dim path  
Dim found
found = false
path = "C:\Temp" 

Set fileSystem = CreateObject("Scripting.FileSystemObject") 
Set folder = fileSystem.GetFolder(path) 

for each file in folder.Files     
  if file.DateLastModified > dateadd("h", -24, Now) then 
    found = true
  end if 
next 
if (found = false) then
  SendEmail
End If

Function SendEmail() 
 'Send Email notification function here (this part works already)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:03:32.167

这个脚本：

```
 Option Explicit

  ' config data, fixed
  Const csPATH = "..\data"

  ' config data, computed, show use of DateValue() to cut off time
  Dim dtCheck : dtCheck = DateValue(DateAdd("d", 0, Now))
  WScript.Echo "dtCheck:", dtCheck

  Dim oFS : Set oFS = CreateObject("Scripting.FileSystemObject")

  Dim bFound : bFound = False ' assume no up-to-date file found
  Dim oFile
  For Each oFile In oFS.GetFolder(csPATH).Files
      WScript.Echo "Check:", DateValue(oFile.DateLastModified), oFile.Name
      If DateValue(oFile.DateLastModified) = dtCheck Then
         WScript.Echo "Found:", DateValue(oFile.DateLastModified), oFile.Name
         WScript.Echo "no need for further loopings"
         bFound = True
         Exit For
      End If
  Next
  If Not bFound Then
     WScript.Echo "Sending email ..."
  End If 
```

输出 1：

```
dtCheck: 12.07.2012
Check: 11.07.2012 11434579.kpf
Check: 11.07.2012 11434579.notes
Check: 11.07.2012 11434579-UE15.prj
Sending email ... 
```

输出 2：

```
dtCheck: 12.07.2012
Check: 11.07.2012 11434579.kpf
Check: 11.07.2012 11434579.notes
Check: 11.07.2012 11434579-UE15.prj
Check: 12.07.2012 11458011.notes
Found: 12.07.2012 11458011.notes
no need for further loopings 
```

通过在找到/最新文件后立即中断/退出循环来扩展 Ghost 的方法，避免在循环中重新计算检查日期（基于 volatile Now！），并展示代码的重要性你不写（例如：Set folder = ..., If (found = false) ..）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:41:58.810

我建议首先从日期检查中删除时间

第二，既然你说文件是每晚创建的，我会检查 DateCreated 而不是 DateModified。

我在下面修改了您的代码以添加变量 Dim myDate 然后将其设置为前一天

```
Dim myDate
myDate =  dateadd("d", -1, FormatDateTime(Now, 2)) 
```

然后我改变了线路

```
if file.DateCreated > myDate then 
```

查看新变量。
使用 echo 命令运行它就像您描述的那样工作，并且只通知我今天创建的文件。

```
option explicit
dim fileSystem, folder, file  
dim path   
path = "C:\Temp"   
Set fileSystem = CreateObject("Scripting.FileSystemObject")  
Dim myDate
myDate =  dateadd("d", -1, FormatDateTime(Now, 2))
Set folder = fileSystem.GetFolder(path)   
for each file in folder.Files
    if file.DateCreated > myDate then  
        'WScript.Echo file.Name & " last modified at " & file.DateCreated   
        SendEmail 
    'WScript.Echo "this should have sent an email."   
    end if  
next

Function SendEmail()   
'Send Email notification function here (this part works already) 
End Function 
```

# iphone - 多个 UIImageViews 不响应触摸。

> ID：11458017
> 
> 赞同：2
> 
> 时间：2012-07-12T18:13:04.807
> 
> 标签：iphone, objective-c, ios, ios4

我正在开发一个需要添加多个 UIImageViews 的应用程序。模态视图控制器显示有不同的按钮。当关闭模态视图控制器时，它会发送按钮标签，帮助我们决定添加哪个 UIImageView。

现在，当我添加第一个 UIImageView 时，所有手势都在它上面工作。但是在添加第二个之后，第一个失去对触摸的响应。

添加 UIImageView (Body:UIImageView) 的代码是：

```
-(void) addBodyToStage:(int)index {
NSString * imageString = [NSString stringWithFormat:@"Body%i.png",index];
UIImage * image = [UIImage imageNamed:imageString];
Body * body = [[Body alloc] initWithImage:image];

//For Pan Gestures
[body setUserInteractionEnabled:YES];
[body addGestureRecognizer:panGesture];
[panGesture addTarget:body action:@selector(handlePan:)];

//For Pinch Gestures
[pinchGesture addTarget:body action:@selector(handlePinch:)];
[body addGestureRecognizer:pinchGesture];

//Adding to the view
[self.view addSubview:body];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:23:23.723

相同的 panGestureRecognizer 和 pinchGestureRecognizer（实例变量）已添加到所有 imageViews。这本身没有问题，但我认为您需要为每个 imageView 使用不同的平移/捏合手势识别器。该视图将保留手势手势识别器，因此您可以在此方法本身中添加代码。

去

```
 -(void) addBodyToStage:(int)index {
     NSString * imageString = [NSString stringWithFormat:@"Body%i.png",index];
    UIImage * image = [UIImage imageNamed:imageString];
    Body * body = [[Body alloc] initWithImage:image];

   //Alloc the pan/pinch gesture recognizers here
   //remember to alloc/init/autorelease (if not using ARC) 
   //else just alloc init
   //Remove the instantiation of those gesture recognizers in any other 
   //part of the  code.

   //For Pan Gestures
   [body setUserInteractionEnabled:YES];
   [body addGestureRecognizer:panGesture];
   [panGesture addTarget:body action:@selector(handlePan:)];

   //For Pinch Gestures
   [pinchGesture addTarget:body action:@selector(handlePinch:)];
   [body addGestureRecognizer:pinchGesture];

   //Adding to the view
   [self.view addSubview:body];

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:23:47.463

手势识别器一次只能分配给一个视图。如果您将它们分配给另一个视图，它们会从第一个视图中隐式取消分配。您将需要为每个视图初始化手势识别器，或者将手势识别器放置在层次结构中较低的视图上，并使用`view`手势识别器的属性来判断哪个视图被触摸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:16:20.653

你在任何地方初始化手势识别器吗？看起来您可能会将相同的手势识别器重新用于不同的 imageView。尝试为每个 imageView 实例化新的手势识别器

# windows - 使用 Powershell 脚本在任务计划程序中启用/禁用任务

> ID：11458029
> 
> 赞同：0
> 
> 时间：2012-07-12T18:14:00.947
> 
> 标签：windows, powershell

我正在尝试使用 PowerShell 禁用 Windows 任务计划程序中的任务。我怎样才能做到这一点？

```
$tasks = & SCHTASKS /Query /V /FO CSV | ConvertFrom-Csv
$task = $tasks | ? { $_.TaskName -eq "E:\MyDir\test.bat" }  
& SCHTASKS /Change /DISABLE /TN "$Task.TaskName" 
```

这个错误是结果：

> 错误：系统中不存在指定的任务名称“.TaskName”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:32:55.467

"$($task.Taskname)" 应该可以工作。

# iphone - iPhone如何使进度条像按钮一样可点击？

> ID：11458031
> 
> 赞同：0
> 
> 时间：2012-07-12T18:14:05.397
> 
> 标签：iphone, button, progress-bar

我目前正在构建一个 iphone 游戏，当进度条已满时（即角色全功率时），用户可以单击进度条并触发一些动作。

如何使进度条像 uibutton 一样可点击？我看到了按钮选项的可访问性，但我不知道你是如何实现它的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:18:07.103

您可以添加 a`UITapGestureRecognizer`或将其放入`UIButton`with 类型`UIButtonTypeCustom`

# python - 在 Python 和 IronPython 之间传递 pickle

> ID：11458033
> 
> 赞同：9
> 
> 时间：2012-07-12T18:14:26.623
> 
> 标签：python, clr, ironpython, pickle, importerror

我很难在 Python 中加载一个在 IronPython 中转储的泡菜。

当我在 IronPython 中腌制诸如“[1,2,3]”之类的基本内容时，腌菜在 Python 中加载得很好。但是，当我在 IronPython 中从下面的 DB 查询中提取结果时，尝试在 Python 中加载 pickle 时出现错误“No module named clr”。

可能出了什么问题？（有没有更好的方法在 Python 和 IronPython 之间共享数据？）

```
def GetData(id):
    TheConnection = SqlClient.SqlConnection("server=MyServer;database=MyDB;Trusted_Connection=yes")
    TheConnection.Open()
    sqlcommand = "MyStoredProcedure#GetMyData '%s'" %id

    MyAction = SqlClient.SqlCommand(sqlcommand, TheConnection)
    MyReader = MyAction.ExecuteReader()

    results = list()

    while MyReader.Read():
        row = {
               'Type':'LolCat',
               'Date':datetime.datetime(MyReader[1]),
               'Location':str(MyReader[3]),
               'Weight':float(MyReader[6])/float(MyReader[7]),
               }
        results.append(row)

    TheConnection.Close()
    MyReader.Close()

    return results

results1 = GetData(1234)
results2 = GetData(2345)

...
picklefile= open("testpickle","w")
cPickle.dump((results1,results2),picklefile)

...
picklefile = open("testpickle","r")
p = cPickle.load(file)  # this is the line that gives the error "ImportError: No module named clr" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:21:13.390

Pickling 确实是在 python 之间共享数据的一种很好的通用方式（当您可以信任数据并且知道它没有被篡改时）。但它只适用于简单的内置类型。当您有特殊类型的对象（例如任何结果`GetData()`）时，pickling 将嵌入类的完全限定名称，并希望另一端的 python 知道如何找到该类并重新实例化它。不用说，如果你不小心，这会变得非常混乱。

尝试将您的`results1`,`results2`值转换为简单类型，例如（可能是嵌套的）元组、字典、列表等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:22:27.523

您正在酸洗的数据不是由通用 Python 对象组成，而是有一些依赖于实现的对象。`clr`是 IronPython 特定的模块，因为它的名字暗示了与 .NET 的连接。查看您的数据，我猜这与您的日期时间对象有关。

尝试为您的序列化数据使用日期时间以外的格式，例如 UNIX 纪元时间：

```
import time
results['Date'] = time.mktime(datetime.datetime(MyReader[1]).timetuple()) 
```

# ruby - 如何使用 RSpec 和 Capybara 验证完整的表单？

> ID：11458040
> 
> 赞同：0
> 
> 时间：2012-07-12T18:14:53.167
> 
> 标签：ruby, rspec, capybara

我正在用 RSpec 和 Capybara 编写请求测试。我有一个将表单字段名称映射到预期值的哈希。

如何轻松检查每个表单字段是否具有预期值？

到目前为止，我正在这样做，但它很复杂且无法维护。在这种情况下，我也只考虑两种输入控件（选择框和其余部分）：

```
expected_data = { 
  "address" => "Fake st 123",
  "city" => "Somewhere",
  "email" => "whoknows@example.com",
  "gender" => "Male",
  "state" => "FL",
}

select_boxes = ["gender", "state"]
# check for the select boxes
expected_data.select {|k,v| select_boxes.include?(k)}.each do |name, expected_value|
  page.has_select?(name, :selected_value => expected_value).should == true
end 
# check for the input fields
expected_data.reject {|k,v| select_boxes.include?(k)}.values.each do |expected_value|
  page.should have_css("input[value=\"#{expected_value}\"]")
end 
```

一行中是否有宝石或其他东西可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T23:50:27.033

我发现以下内容更易于维护：

```
describe "form" do
  subject {page}

  before { visit "/path/to/form" }

  it { should have_field("address", :with => "Fake st 123") }
  it { should have_select("gender", :selected => "Male") }
  # And so on ...
end 
```

# php - 是否有用于从 MAC 地址查找供应商的 PHP 库？

> ID：11458041
> 
> 赞同：3
> 
> 时间：2012-07-12T18:15:02.277
> 
> 标签：php, mac-address, vendor-prefix

我有一个来自数据库的 MAC 地址列表。我想查找每个 MAC 地址的供应商，然后最终按供应商计算网络上的设备数量。

我相信我可以做到这一点，即从[http://standards.ieee.org/develop/regauth/oui/oui.txt](http://standards.ieee.org/develop/regauth/oui/oui.txt)提供的文件中解析供应商前缀。

但我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:25:51.470

Pear 中有一个库，但它确实涉及大量开销，因为供应商查找需要一个已加载供应商数据的关系数据库。但是，考虑到替代方案，这可能值得探索。

[http://pear.php.net/manual/en/package.networking.net-mac.php](http://pear.php.net/manual/en/package.networking.net-mac.php)

该包为wireshark维护的列表提供了一个加载器：[https ://code.wireshark.org/review/gitweb?p=wireshark.git;a=blob_plain;f=manuf](https://code.wireshark.org/review/gitweb?p=wireshark.git;a=blob_plain;f=manuf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-07T05:03:24.383

如果您只关心根据 mac 地址获取设备制造商，那么您只需在此处复制并粘贴此网站上的列表（一次最多 200 个）。它非常快：

www.admin-toolkit.com/mac-address-lookup-manufacturer.html

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-07T03:03:35.197

> 但我想知道是否有更好的方法？

如果您可以使用其他语言，例如 ruby​​，则有一个名为[macvendors的 gem](https://rubygems.org/gems/macvendors)

无需使用外部 api 或因速率限制而停止。

您可以从命令行使用它：

`gem install macvendors macvendors find 98:e0:d9:a5:61:eb Apple, Inc.`

您可以在 ruby​​ 代码中使用它：

`require 'macvendors' MacVendors.setup #for the first time puts MacVendors.find("98:e0:d9:a5:61:eb")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T02:53:20.613

我从 Wireshark manuf 源制作了一个 SQlite ( [Macvendors.db )。](https://docs.google.com/open?id=0B1KAz9LI2hxfMF9aZjRQbnlWQUE)我通过 PDO 用一个简单的查询来使用它。

这是我编写的一种方法，旨在向您展示如何使用它：

```
public function getAllCompaniesFromMacs($macs)
{
    try {
        // connect to the SQLite file
        $conn = new \PDO("sqlite:/path/to/sqlite/Macvendors.db");
        $conn ->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION);

        // aux vars
        $macsParaBuscar = array();
        $macsIN = "";

        // output vars
        $salida = array();

        // Clean repeated MACs and remove the ":" chars
        foreach ($macs as $unaMac) {
            $unaMac = str_replace(":", "", $unaMac);
            $firstChars = substr($unaMac, 0, 6);
            $macsParaBuscar[$firstChars] = $firstChars;
        }

        // Create a IN statment for the WHERE
        $macsIN = "( 'HOLA'";
        foreach ($macsParaBuscar as $unaMacBuscar) {
            $macsIN .= ", '" . $unaMacBuscar . "'";
        }
        $macsIN .= ")"; 

        // Prepare and execute the query
        $stm = $conn->prepare("SELECT mac, vendor FROM macvendor WHERE mac IN " . $macsIN);
        $stm->execute();

        // Put results in output var
        while( $row = $stm->fetch() ) {
            $auxMac = $row["mac"];
            $salida[$auxMac] = $row["vendor"];
        }

        return $salida;

    } catch (\Exception $e) {

        throw new \Exception("Ha ocurrido un error", 1);

    }

} 
```

对不起，不漂亮的示例代码。

玩得开心！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-06T18:42:01.690

# 更新

还有另一个库不依赖于任何 API，而是 XML 文件数据库，即[Cisco vendorMacs.xml](https://devtools360.com/en/macaddress/vendorMacs.xml)

包托管[在这里](https://github.com/samymassoud/devtools360-macaddress-lookup)

* * *

是的，这是我写的，它取决于[Mac地址供应商网站的在线API](http://macvendors.co)

[这](https://github.com/samymassoud/macvendors-api)是带有示例的存储库

# java - 观察者模式

> ID：11458050
> 
> 赞同：0
> 
> 时间：2012-07-12T18:15:47.377
> 
> 标签：java, swing, observable

我想实现一个应用程序，其中我有两个类（一个图形类和一个控制器类）。我的目标是在图形中准确地反映控制器类中发生的变化。我需要通过使用观察者模式来做到这一点，但我不知道如何得到它......

假装的工作如下： - 在图形类中，我有三个要着色的 JPanel，每个 Panle 着色之间的间隔为 2 秒。

现在我有以下代码：

----------------------可观察类-------------- ------------------

```
public class ImagenControl extends Observable{
private String panel1,panel2,panel3;
private int counter;
private Timer colorTimer;
private ActionListener colorListener=new ActionListener() {

    public void actionPerformed(ActionEvent ae) {
        if (counter==0){
            panel1="yellow";
            setChanged();
        }
        else if (counter==1){
            panel2="blue";
            setChanged();
        }
        else if (counter==2){
            panel3="green";
            setChanged();
        }
        if (counter==2)
            colorTimer.stop();
        else counter++;
    }
};
public void giveColor(){
    counter=0;
    colorTimer=new Timer(2000,colorListener);
    colorTimer.start();
} 
```

---------------------------------------观察者类---------- ------------------

```
public class Imagen extends javax.swing.JFrame implements Observer{

public Imagen() {
    initComponents();
}
private void jButton1MouseClicked(java.awt.event.MouseEvent evt) {                                      
    ImagenControl ctr=new ImagenControl();
    ctr.giveColor();
}                                     

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new Imagen().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
private javax.swing.JPanel jPanel2;
private javax.swing.JPanel jPanel3;
private javax.swing.JPanel jPanel4;
// End of variables declaration                   

@Override
public void update(Observable o, Object o1) {

} 
```

你会怎么做？

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:30:17.927

您将希望将您的观察者链接到您的可观察对象。为此，在您的主包（您正在创建 Observer 和 Observable 对象的地方）中，您将拥有如下代码：

```
ImageController ic = new ImageController()
Imagen obs = new Imagen()

ic.addObserver(obs) 
```

现在在 Observer 的 Update 方法中，你实现了当 Observable 通知它的 Observers 时你想要发生的事情。

最后，您可以使用 Observable 的`setChanged()`方法来指示 Observable 中的某件事发生了变化。下一次`notifyObservers()`被 Observable 调用时，所有注册的 Observer 都会被告知发生了变化。

请注意，如果`setChanged()`之前`notifyObservers()`没有被调用，则不会通知观察者（因为没有什么可以通知他们）

# jasper-reports - jasper ireport 基本功能

> ID：11458054
> 
> 赞同：0
> 
> 时间：2012-07-12T18:16:03.473
> 
> 标签：jasper-reports, ireport

我是 JasperReports 和 iReport 的新手，我正在努力让最基本的示例启动并运行。我正在尝试从 .xls 文件中读取输入并使用 iReport 将其放入表中。最终，我想从数据库中读取数据，并以有意义的方式转换数据，但现在我只想查看我正在阅读的内容，但我无法做到这一点。首先，如果我只是将我的字段拖放到模板 $F{Account} 中，我希望看到该字段名称的值列表（就像我在预览“查询”时所做的那样）。但是，如果这就是我所做的全部然后预览，我会在我的输入 xls 中看到第一个帐号，然后是 50 页空白区域。为什么会这样？

接下来，如果我创建一个基本表，我会收到一个错误

`Error filling print... null java.lang.NullPointerException      at net.sf.jasperreports.components.table.util.TableUtil.isSortableAndFilterable(TableUtil.java:344)   ... Print not filled. Try to use an EmptyDataSource...`

任何帮助是极大的赞赏！另外，我应该注意，我确实下载了 JasperReports，但我想知道是否需要以某种方式将 iReport 连接到这些类。我在 Netbeans 插件中看到了一种方法，但我只是想使用 iReport GUI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:24:10.823

表格组件很棒。但它比它应该更难使用。看看这个[表组件教程](http://www.jaspersoft.com/scorm_data/EnablingReportInteractivitywiththeTableComponent_3496/data/execute)以了解如何使用它。

对于您问题的第一部分，您没有提供足够的信息让任何人知道。我的猜测是您将该字段放入 Title 带而不是 Detail 带。

# php - 通过 Facebook 图表发布照片不再有效

> ID：11458055
> 
> 赞同：2
> 
> 时间：2012-07-12T18:16:13.877
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在尝试使用 php-sdk 发布照片 - 一切都成功地工作了几个月，但突然之间没有骰子。

其他功能仍在使用相同的代码库（即：将消息发布到墙上） - 它只是发布在我身边坏掉的照片。

```
try {
        $data = $facebook->api('/me/photos', 'post', $args);
      } catch (FacebookApiException $e) {
print_r($e);} 
```

正在倾倒：

> FacebookApiException Object ([result:protected] => Array ([error_code] => 3 [error] => Array ([message] => 没有设置 URL！[type] => CurlException)) [message:protected] => 否URL 设置！[string:private] => [code:protected] => 3 [file:protected] => /locationofmy/base_facebook.php [line:protected] => 818 [trace:private] => Array ([0 ] => 数组 [.......]

从 FB php-sdk 第 818 行：

```
 if ($result === false) {
      $e = new FacebookApiException(array(
        'error_code' => curl_errno($ch),
        'error' => array(
        'message' => curl_error($ch),
        'type' => 'CurlException',
        ),
      ));
      curl_close($ch);
      throw $e;
    }
    curl_close($ch);
    return $result;
  } 
```

这已经工作了很长时间 - Facebook 方面有什么变化吗？

编辑：php-sdk 版本：3.1.1

编辑2：

```
$tag = array(
                'tag_uid' => 'acct_num',
                'x' => 0,
                'y' => 0
            );

        $tags[] = $tag;

        $args = array(
            'message' => $item_description,
            'image'   => '@' . realpath($temp_path . $tempFile),
            'tags'    => $tags,
            ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:23:00.327

尝试将 更改`image`为`source`。我相信这应该可以解决您的问题。

Facebook API 需要一个`source`字段，但我没有看到任何有关`image`字段的信息。

您可能还必须传递实际文件内容而不是 real_path（基于示例）。或者，或者，传递一个外部 URL（基于我对文档的理解）。

来源：[https ://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)

示例：[https ://developers.facebook.com/blog/post/498/](https://developers.facebook.com/blog/post/498/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:59:27.457

可能该文件不存在，或者文件系统无法再提供它。您能否确认“$temp_path . $tempFile” - 错误是没有 URL，通常这意味着没有图像的真实路径。我怀疑图像丢失和/或您的服务器已满，并且没有保存本地图像。（是的，我以前也遇到过这种情况！）

# wpf - 绑定到 XElement

> ID：11458059
> 
> 赞同：1
> 
> 时间：2012-07-12T18:16:22.940
> 
> 标签：wpf

我需要帮助绑定到 XElement。基本上，我正在为 web.config 中的某些元素创建一个编辑器，并将它们提取为 XElements，我的视图绑定到 DataItems 集合，该集合具有包含我的 XElement 的属性。

当我这样做时，`Text="{Binding Path=Data, Mode=OneWay, NotifyOnSourceUpdated=True}"/>`我会得到元素的所有文本，但是如果我尝试`Text="{Binding Path=Data.Elements[], Mode=OneWay, NotifyOnSourceUpdated=True}"/>`它不起作用，则 TextBox 是空的。我试图找到一种动态模板不同部分的方法，以使它们更易于编辑而不是编辑原始 XMl。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:04:58.293

如果您只想显示一个元素，请尝试使用：

```
Text="{Binding XPath=@xxx"/> 
```

换成`xxx`你自己的。

# c# - CS，__LINE__ 不可用，我们可以写一个替代方案吗？

> ID：11458062
> 
> 赞同：1
> 
> 时间：2012-07-12T18:16:30.827
> 
> 标签：c#, visual-c++, compilation, c-preprocessor, visual-studio-extensions

我是一名 Visual C++.net 程序员，大约一年前转换为 C#，我真的很怀念`__FILE__`, 和`__LINE__`. 为了替换`__FILE__`，我编写了一个很好的函数来返回 class.method，这很棒，但是没有合适的替代方法`__LINE__`（如果我错了，请纠正我！）。

我了解语言差异和技术限制，以及推理，以及所有这些东西。

我要问的是：

编写一些 Visual Studio 扩展（我们所有的开发人员都会安装）是否可行，甚至可能，这将允许我们定义某种类型的令牌（~~LINE~~ 或其他东西），我们可以拥有当编译成可执行文件时，文本替换或将该符号切换到实际的 VS 行号？

我的扩展编程知识很少，我不知道分机。系统限制。

编辑澄清：

在 C++ 中`__FILE__`，一旦编译，将返回您在其中编写代码的当前文件，以及`__LINE__`您的当前行。这很重要，因为我们所有的日志记录系统（10 多年前）都需要一个 char* 用于文件，一个 int 用于我们正在记录的行。

C# 不能像 C++ 那样产生这两个“令牌”。

举个例子：

```
LoggingService.LogException(e, "file.cs", 1234); 
```

是我想要编译到我的可执行文件中的内容，并且

```
LoggingService.LogException(e, ~~MYFILE~~, ~~MYLINE~~); 
```

是我希望我的代码看起来的样子，并保存在磁盘上。我有一个合适的替代方法来获取文件，但我没有一个来获取文件。

编辑2：

这些我们的版本构建，没有调试符号。为了适应这个修复，我们的产品安装必须大几百兆，这是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:37:03.997

来电者信息将出现在 .NET 4.5 中。这将被编译，与手动检查堆栈跟踪相比有了很大的改进：

[http://msdn.microsoft.com/en-us/library/hh534540(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh534540(v=vs.110).aspx)

```
public void LogException(Exception ex,
        [CallerFilePath] string filePath = "",
        [CallerLineNumber] int lineNumber = 0)
{
    // Log it!
} 
```

由于编译器的魔法，这将被称为：

```
LoggingService.LogException(e); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:26:20.383

您可以先通过 C 预处理器简单地运行所有 C# 代码，然后再编译结果。您需要更改 CS 文件的构建规则才能做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:26:12.567

注意：如果您正在处理异常，堆栈帧在异常中，因此不需要。我曾经用它来存储日志系统的行和文件信息，这是我能想到的唯一用例——但它“没那么快”。

**警告**：如果您的发行版本中没有符号，则某些信息将不可用。

```
using System;
using System.Diagnostics ;

StackTrace st=new StackTrace (0,true);

StackFrame sf=new StackFrame ();
sf=st.GetFrame (0);
Console.WriteLine ("FileName: {0}",sf.GetFileName ());
Console.WriteLine ("Line Number: {0}",sf.GetFileLineNumber ());
Console.WriteLine ("Function Name: {0}",sf.GetMethod ()); 
```

那里还有列和类型以及其他一些东西......在这里寻找更多。

[http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:31:40.440

该行位于异常的堆栈跟踪中。但我认为您应该记录整个堆栈跟踪，而不是提取它，因为它还有其他有用的调试信息（加上行号有时会偏离几行，因为我相信预处理器语句）

如果您在 Web 窗体或 MVC 中使用 ASP.Net Web 应用程序，我强烈推荐[ELMAH 。](http://code.google.com/p/elmah/)它负责所有的日志记录

# python - 结合 numpy 数组和掩码

> ID：11458063
> 
> 赞同：1
> 
> 时间：2012-07-12T18:16:37.590
> 
> 标签：python, arrays, numpy

我有以下问题。知道使用 numpy 我可以使用 genfromtext 读取数据文件。然后我可以使用掩码（从字典中）从中选择记录。

```
>>> gln = a[a['AA2'] == 'GLN']
>>> gln['mean'].mean()
62.805000305175781 
```

我如何使用数组组合而不是从磁盘读取这些数组来做到这一点？

```
x=[]
y=[]
ov=[]
aa=[]

a = numpy.array(x,y,ov,aa)         <== does not actually work
gln = a[a[3] == 'GLN']
gln['mean'].mean() 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:04:34.577

请记住，在 Python 中，由 生成的对象`[]`通常称为 a `list`，而不是`array`。因此，考虑到这一点，我假设您真正的问题是“如何将 4 个独立`list`的 python 转换为二维`numpy`数组？”

答案取决于您希望如何`list`在数组中布置 s。假设每个列表代表一行，您可以这样做：

```
>>> x = range(0, 4)
>>> y = range(4, 8)
>>> ov = range(8, 12)
>>> aa = range(12, 16)
>>> numpy.array([x, y, ov, aa])
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15]]) 
```

或者，如果每个列表代表一列，您可以这样做：

```
>>> numpy.array(zip(x, y, ov, aa))
array([[ 0,  4,  8, 12],
       [ 1,  5,  9, 13],
       [ 2,  6, 10, 14],
       [ 3,  7, 11, 15]]) 
```

然后，您可以像使用 producer 一样使用布尔`array`索引`genfromtxt`：

```
>>> a = numpy.array(zip(x, y, ov, aa))
>>> a[a == 1]
array([ 1,  5,  9, 13,  3,  7, 11, 15]) 
```

您可能正在寻找将`x`、`y`、`ov`和组合`aa`成数组的其他方式。在这种情况下，您将不得不指定列表中的内容以及所需输出的形状。

# joomla - Joomla 中远程数据库服务器访问的配置设置

> ID：11458065
> 
> 赞同：0
> 
> 时间：2012-07-12T18:16:50.990
> 
> 标签：joomla, joomla2.5

我有 Web 服务器（10.1.1.3）和数据库服务器（10.1.1.5） 我正在尝试更改 Web 服务器中的 configuration.php

我变了

```
 public host="10.1.1.5:3306"
    public $user = 'root';
    public $password = 'xxxxxx';
    public $db = 'jomsocial'; 
```

结果，它给了我这个错误。

数据库连接错误（2）：无法连接到 MySQL。

我相信这是远程访问的一些问题。有什么解决办法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:35:18.117

```
public host="localhost"
public $user = 'root';
public $password = 'root';
public $db = 'jomsocial'; 
```

使用此变量。

如果它不起作用，请使用控制面板用户名和密码。它会起作用的。

# javascript - 当滚动条碰到另一个 div 的底部时淡出一个 div

> ID：11458066
> 
> 赞同：1
> 
> 时间：2012-07-12T18:16:58.643
> 
> 标签：javascript, jquery, scroll, fadein, fadeout

这个问题有点与这个有关：[Append div to body when URL hash # changes](https://stackoverflow.com/questions/11454820/append-div-to-body-when-url-hash-changes)

我正在使用 Curtain.js，目前我有一个固定的 div，当哈希更改时会弹出。IE 当用户向下滚动页面到不同的面板时，div 淡入。我不希望这个 div 在第一个面板上可见。

我现在遇到的问题是，当访问者将页面向上滚动到顶部时，固定的 div 仍然可见。即出现在第一个面板的顶部。我想在它到达第一个面板的底部时立即淡出该 div。另一个问题是面板的高度调整到浏览器窗口的高度（流体/响应式布局）排除了任何固定像素 JS 解决方案，这是我的代码所基于的：

```
 // fade in/fade out banner titles
$(window).trigger('scroll');

var divs = $('.nav-wrap'); 
$(window).scroll(function(){
   if($(window).scrollTop() < 550){
         divs.fadeOut("slow");
   } else {
         divs.fadeIn("slow");
   }
}); 
```

有人有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:35:07.930

您可以使用`window.height()`它返回浏览器视口的高度：

```
var vp = $(window).height(); // height of the browser's viewport
var divs = $('.nav-wrap'); 
$(window).scroll(function(){
   if($(window).scrollTop() < vp){
         divs.fadeOut("slow");
   } else {
         divs.fadeIn("slow");
   }
}); 
```

# asp.net - 我可以在 ASP.NET WEB 表单中使用实体框架的验证功能吗

> ID：11458068
> 
> 赞同：2
> 
> 时间：2012-07-12T18:17:00.147
> 
> 标签：asp.net, entity-framework, validation, webforms, ef-code-first

我可以在 ASP.NET Web 窗体中使用实体框架 DbContext、代码优先方法、数据注释验证和自定义验证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:22:29.580

您可以在 ASP.NET WebForms 中使用数据注释，[`System.ComponentModel.DataAnnotations`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx)但只能在新的 ASP.NET 4.5 中使用。

查看这个很棒的教程以获取完整的详细信息：

[ASP.NET 4.5 中 Web 窗体的新增功能](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetwebforms45.aspx)

[练习 2：数据验证](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetwebforms45_topic3)

还有一个 NugGet 包似乎可以满足您的需求：

[ASP.NET Web 窗体的数据注释验证器控件](http://nuget.org/packages/DAValidation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:12:01.543

我相信这将在 ASP.NET 4 中得到支持。但与此同时，您可以将[xVal 用于 WebForms](http://xvalwebforms.codeplex.com/)。在线提供示例[和](http://xvalwebforms.codeplex.com/wikipage?title=Usage&referringTitle=Documentation)演示[。](http://xvalwebforms.apphb.com/)

（免责声明：这是我的开源项目之一）

# javascript - 用 javascript 交换 url 后刷新 facebook like 按钮不起作用

> ID：11458076
> 
> 赞同：0
> 
> 时间：2012-07-12T18:17:34.067
> 
> 标签：javascript, ajax, fbml

我有一个问题，我使用 javascript 更改 facebook like 按钮的 href 以根据用户可以在网页上加载的新 ajax 视频内容将 url 更改为新链接。我想这样做，这样他们就可以根据他们正在观看的当前视频来喜欢每个视频。href 换掉很漂亮，我声明了一个 FB.XFBML.parse(document.getElementById("fbyoutubelike")); 刷新点赞按钮。但是什么也没发生，我不知道该怎么办了。有没有人知道如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:21:15.120

如果 FB.XFBML.parse 看到 iframe 已经存在，它可能不会重新渲染标签……</p>

不只是操作 href 属性内容，而是从 DOM 中*删除*现有的 like 按钮标签（`<fb:like>`或），*插入*一个新标签 -*然后*调用 FB.XFBML.parse。`<div class="fb-like">`

# ruby-on-rails - rails (3.2) 中的关联和（多个）外键：如何在模型中描述它们，并编写迁移

> ID：11458079
> 
> 赞同：1
> 
> 时间：2012-07-12T18:17:50.310
> 
> 标签：ruby-on-rails, migration, associations

我有 3 个模型：问题、选项、规则

问题 has_many 选项；选项需要 question_id 的外键

规则表由 3 个外键组成：

*   2 列/对 question_ids 的引用-> 名为“assumption_question_id”和“consequent_question_id”的外键
*   1 列/对 option_id 的引用 -> 名为 option_id 或 condition_id 的外键

规则关联：问题 has_many 规则；和选项 has_one 规则

我想了解如何为此编写迁移，以及它如何与我在模型中编写的 'has_many'/'belongs_to' 语句以及我可以在模型中包含的 ':foreign_key' 选项相关联。

我有这个用于我的选项迁移，但我不确定“add_index”语句在外键方面是如何工作的，以及我如何将它用于我的规则迁移：（我的问题和选项模型有适当的 has_many 和 belongs_to 语句- 并且工作正常）

```
class CreateOptions < ActiveRecord::Migration
  def change
    create_table :options do |t|
      t.integer :question_id
      t.string :name
      t.integer :order

      t.timestamps
    end
    add_index :options, :question_id
  end
end 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:55:04.427

[`add_index`](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_index)为指定的列添加索引，仅此而已。

Rails[不](http://guides.rubyonrails.org/migrations.html#active-record-and-referential-integrity)为管理外键的迁移提供本地支持。此类功能包含在诸如[foreigner](https://github.com/matthuhiggins/foreigner)之类的 gem 中。阅读 gem 的文档以了解它的使用方式。

至于关联，只需将您在问题中提到的列添加到每个表中*（您提供的迁移看起来不错；也许它缺少一个`:rule_id`？）*

然后在模型中指定关联。让你开始

```
class Question < ActiveRecord::Base
  has_many :options
  has_many :assumption_rules, class_name: "Rule"
  has_many :consequent_rules, class_name: "Rule"
end

class Rule < ActiveRecord::Base
  belongs_to :option
  belongs_to :assumption_question, class_name: "Question", foreign_key: :assumption_question_id, inverse_of: :assumption_rules
  belongs_to :consequent_question, class_name: "Question", foreign_key: :consequent_question_id, inverse_of: :consequent_rules
end

class Option < ActiveRecord::Base
  belongs_to :question
  has_one    :rule
end 
```

**注意**这只是一个*（未经测试的）*开始；选项可能会丢失。

我强烈建议你阅读

*   [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)
*   [http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

**编辑：**回答您评论中的问题

```
class Option < ActiveRecord::Base
  belongs_to :question
  # ... 
```

`belongs_to`告诉 rails 表中的列`question_id`存储`options`表`id`中记录的值`questions`。Rails 猜测列的名称是`question_id`基于`:question`符号的。`options`您可以通过指定一个选项来指示 rails 查看表中的不同列，例如`foreign_key: :question_reference_identifier`该列的名称。*（请注意`Rule`，我上面代码中的类以`foreign_key`这种方式使用该选项）*。

您的迁移只不过是 Rails 将根据这些指令读取并在您的数据库上执行命令的指令。您的模型关联*（`has_many`、`belongs_to`等...）*会告知 Rails 您希望 Active Record 如何处理您的数据，从而为您提供与数据交互的清晰简单的方式。模型和迁移从不相互交互；它们都独立地与您的数据库交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-04T15:58:27.633

**注意：**我找到了解决问题的方法。来自中国的好意。

如果您有 RailsAdmin，您可能会注意到，只要两个问题字段（assumption_question_id，consequent_question_id）的一个字段等于问题的 id，您就可以看到一个问题的所有规则。

我对此进行了详细测试，发现 Rails 总是生成一个条件“question_id = [current_id]”，它使 to_sql 输出

```
SELECT `rules`.* FROM `rules` WHERE `rules`.`question_id` = 170 
```

以及以下型号的原因

```
class Question < ActiveRecord::Base
  has_many :options
  # Notice ↓
  has_many :rules, ->(question) { where("assumption_question_id = ? OR consequent_question_id = ?", question.id, question.id) }, class_name: 'Rule'
  # Notice ↑
end 
```

使 Question.take.rules.to_sql 变成这样

```
SELECT `rules`.* FROM `rules` WHERE `rules`.`question_id` = 170 AND (assumption_question_id = 170 OR consequent_question_id = 170) 
```

是我们还没有摆脱烦恼`question_id`，所以无论我们如何正确描述或条件，我们的条件都遵循“与”。

然后，我们需要搭上它。如何？

[点击这里你就知道了，找到8.1扇区](http://guides.rubyonrails.org/active_record_querying.html)，你就可以看到

```
Article.where(id: 10, trashed: false).unscope(where: :id)
# SELECT "articles".* FROM "articles" WHERE trashed = 0 
```

然后让我们这样做：

```
class Question < ActiveRecord::Base
  has_many :options
  # Notice ↓
  has_many :rules, ->(question) { unscope(where: :question_id).where("assumption_question_id = ? OR consequent_question_id = ?", question.id, question.id) }, class_name: 'Rule'
  # Notice ↑
end

class Rule < ActiveRecord::Base
  belongs_to :option
  belongs_to :assumption_question, class_name: "Question", foreign_key: :assumption_question_id, inverse_of: :assumption_rules
  belongs_to :consequent_question, class_name: "Question", foreign_key: :consequent_question_id, inverse_of: :consequent_rules
end

class Option < ActiveRecord::Base
  belongs_to :question
  has_one    :rule
end 
```

全部完成。

# 最后

这是我在 stackoverflow 上的第一个答案，这种方法在其他任何地方都找不到。

谢谢阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:32:27.960

您可以像这样在模型中设置外键：

```
class Leaf < ActiveRecord::Base
belongs_to :tree, :foreign_key => "leaf_code"
end 
```

您不需要在迁移中指定这一点，rails 将从模型类定义中提取外键。

# python - Python套接字连接无法正常工作

> ID：11458088
> 
> 赞同：2
> 
> 时间：2012-07-12T18:18:09.083
> 
> 标签：python, sockets, tcp

下面是我目前使用的代码：

```
soc1 = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
ADDR = (HOST,PORT)
soc1.connect(ADDR)
soc1.send('WILL SEND') 
```

运行上述代码时收到的错误消息是：

```
Traceback (most recent call last):
  File "C:\workspace\wx_python_test\chat_server.py", line 25, in <module>
    soc1.connect(ADDR)
  File "C:\Python27\lib\socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
socket.error: [Errno 10061] 
```

谁能解释一下我遇到的问题以及如何纠正它？

完整源代码： http: [//pastie.org/4245314](http://pastie.org/4245314)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:21:43.027

`socket.error: [Errno 10061]` 表示您尝试连接的端口未打开。您需要确保端口已打开，并且正在侦听您的连接。

您似乎正在尝试测试聊天服务器。为了让聊天服务器正常工作，您需要确保它当前正在侦听指定端口。

如果您以前没有检查过[Twisted ，它提供了一个很好的框架。](http://twistedmatrix.com/documents/current/core/examples/)

```
from twisted.internet.protocol import Factory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor

class Chat(LineReceiver):

    def __init__(self, users):
        self.users = users
        self.name = None
        self.state = "GETNAME"

    def connectionMade(self):
        self.sendLine("What's your name?")

    def connectionLost(self, reason):
        if self.users.has_key(self.name):
            del self.users[self.name]

    def lineReceived(self, line):
        if self.state == "GETNAME":
            self.handle_GETNAME(line)
        else:
            self.handle_CHAT(line)

    def handle_GETNAME(self, name):
        if self.users.has_key(name):
            self.sendLine("Name taken, please choose another.")
            return
        self.sendLine("Welcome, %s!" % (name,))
        self.name = name
        self.users[name] = self
        self.state = "CHAT"

    def handle_CHAT(self, message):
        message = "<%s> %s" % (self.name, message)
        for name, protocol in self.users.iteritems():
            if ':' in message:
                self.exc(message.split(':')[0])
            if protocol != self:
                protocol.sendLine(message)

    def exc(self, cmd):
        print cmd
        if cmd == 'who':
            for i in self.users:
                print i

class ChatFactory(Factory):

    def __init__(self):
        self.users = {} # maps user names to Chat instances

    def buildProtocol(self, addr):
        return Chat(self.users)

reactor.listenTCP(8123, ChatFactory())
reactor.run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:21:53.063

你的 python 很好 - 检查你的网络配置，你实际上可以连接到指定的主机/端口。您收到 Windows 套接字错误 10061 - 这定义如下：。

> WSAECONNREFUSED 10061 连接被拒绝。由于目标计算机主动拒绝，无法建立连接。这通常是由于尝试连接到在外部主机上处于非活动状态的服务（即没有服务器应用程序运行的服务）造成的。

尝试`telnet host port`从您的终端窗口执行 - 看看您是否可以连接。如果不是，请先解决网络问题。

# java - Webview 为空白或为不同的 url 加载相同的页面

> ID：11458089
> 
> 赞同：0
> 
> 时间：2012-07-12T18:18:12.220
> 
> 标签：java, android

搜索 api 正在向我返回一些元数据，即 url “eventURL”和 trackbackurl，即“trackBack”。我将数据放在列表视图中，每一行都包含一些数据和一个唯一的 url 和引用 url。当用户点击列表视图中的行时，会显示一个警报对话框，显示用户 2 选项。单击选项 1 应在 webview 中启动 trackback url，而单击第二个选项应在 webview 中启动 eventURL。我为它创建了一个 WebViewActivity，问题是我的 webview 始终为空白。

**主要活动**

```
package my.stayactive.plan;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

import my.stayactive.plan.ActiveHelper.ApiException;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.view.inputmethod.InputMethodManager;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class StayActiveActivity extends Activity implements OnItemClickListener {

    //private EditText m_search_text;
    protected EditText m_zip;
    private ListView m_search_results;
    private Button m_search_btn;
    private JSONArray m_results; 
    private LayoutInflater m_inflater;
    private InputMethodManager m_ctrl;
    private Spinner m_radius;
    private Spinner m_activity_selector;
    public static int radius = 0;
    public static String activities;
    public String url;
    public String trackBack;
    public static String assetId;

    static final private int EXIT_ID = Menu.FIRST;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
       // m_search_text = (EditText) findViewById(R.id.search_text);
        m_zip = (EditText) findViewById(R.id.zip);
        m_search_btn = (Button) findViewById(R.id.search_button);
       // m_searchm_results = (ListView) findViewById(R.id.lview);
        m_search_btn .setOnClickListener(go_handler);

        m_ctrl = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        m_inflater = LayoutInflater.from(this);
        addListenerOnSpinnerItemSelection();
        addListenerOnSpinner1ItemSelection();

      m_search_results = (ListView)findViewById(R.id.lview);
      m_search_results.setOnItemClickListener(this);

    }

    public void addListenerOnSpinnerItemSelection() {
        m_radius = (Spinner) findViewById(R.id.spinner);
        m_radius.setOnItemSelectedListener(new CustomOnItemSelectedListener());
      }

    public void addListenerOnSpinner1ItemSelection(){
        m_activity_selector = (Spinner) findViewById(R.id.spinner1);
        m_activity_selector.setOnItemSelectedListener(new ActivitySelectedListener());
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu){
        super.onCreateOptionsMenu(menu);

        menu.add(0, EXIT_ID, 0, R.string.exit);
        return true;
        }
    @Override
    public boolean onOptionsItemSelected (MenuItem item){

        switch (item.getItemId()){
        case EXIT_ID:
            finish();
            return true;

        }

        return super.onOptionsItemSelected(item);

    }

    OnClickListener go_handler = new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //m_ctrl.hideSoftInputFromWindow(m_search_text.getWindowToken(), 0);
            m_ctrl.hideSoftInputFromWindow(m_zip.getWindowToken(), 0);

            //String searchText = Uri.encode(m_search_text.getText().toString());
            String zip = Uri.encode(m_zip.getText().toString());

            new SearchTask().execute("?k=Fall+Classic" + "&m=meta:channel=" + activities + "&l="+ zip + "&r=" + radius);
            // Show a toast showing the search text
            Toast.makeText(getApplicationContext(),
                    getString(R.string.search_msg) + " " + 
                    activities, Toast.LENGTH_LONG).show();
        }
    };

    private class SearchTask extends AsyncTask<String, Integer, String>
    {

        ProgressDialog dialog;

            @Override
            protected void onPreExecute() {

                dialog = ProgressDialog.show(StayActiveActivity.this,"","Please Wait...");

                super.onPreExecute();
            }

            @Override
            protected String doInBackground(String... params) {
                try {
                    String result = ActiveHelper.download(params [0]);
                    return result;
                } catch (ApiException e) {
                    e.printStackTrace();
                    Log.e("alatta", "Problem making search request");
                }
                return "";
            }
            @Override
            protected void onPostExecute(String result) {
                dialog.hide();
                try {
                    JSONObject obj = new JSONObject(result);
                    m_results = obj.getJSONArray("_results");
                    if (m_results == null || m_results.length() == 0)
                    {
                        Toast.makeText(getApplicationContext(),
                                "No Results found for " + activities, 
                                Toast.LENGTH_LONG).show();

                    }
                    else
                        m_search_results.setAdapter(new JSONAdapter(getApplicationContext()));
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        }

    private class JSONAdapter extends BaseAdapter
    {
        public JSONAdapter(Context c){

        }

        public int getCount() 
        {
        return  m_results.length();
            }

        public Object getItem(int arg0){
            return null;
        }

        public long getItemId(int pos){
            return pos;

        }

        public View getView(int pos, View convertView, ViewGroup parent) {
            View tv;
            TextView t;

            if (convertView == null)
                tv = m_inflater.inflate (R.layout.item, parent, false);
            else
                tv = convertView;
            try {
                /* For each entry in the ListView, we need to populate 
                 * its text and timestamp */
                t = (TextView) tv.findViewById(R.id.text);
                JSONObject obj = m_results.getJSONObject(pos);

                t.setText (obj.getString("title").replaceAll("</?(?i:<|>|...|&quot|&amp|;|)(.|\n)*?>", ""));
                        //("\\<.*?\\>", ""))

                t = (TextView) tv.findViewById(R.id.created_at);
                JSONObject meta = obj.getJSONObject("meta");
              //  url = meta.getString("eventURL");
                trackBack = obj.getString("url");
                assetId = meta.getString("assetTypeId");
                //String eventDate = meta.getString("startDate");
                Calendar currentDate = Calendar.getInstance();
                long dateNow = currentDate.getTimeInMillis();

               String eventDate = meta.getString("startDate");
               String endDate = meta.getString("endDate");
               SimpleDateFormat formatter  = new SimpleDateFormat("yyyy-MM-dd");
               Date date = null;
               Date date2 = null;
            try {
                date = formatter.parse(eventDate);
                date2 = formatter.parse(endDate);
            } catch (java.text.ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
               long modifiedDate= date.getTime();
               long modifiedEndDate = date2.getTime();

                if ( Long.valueOf(dateNow).compareTo(Long.valueOf(modifiedDate)) > 0 || Long.valueOf(dateNow).compareTo(Long.valueOf(modifiedEndDate)) > 0)

                {

                    t.setText ("Was:" + "\t"+eventDate+"\n"+"Location:" +"\t" +meta.getString("location")+"\n" + meta.getString("eventURL") +"\n"+ obj.getString("url"));

                }
                    else {
                    t.setText ("When:" + "\t"+eventDate+"\n"+"Location:" +"\t" +meta.getString("location")+"\n"+ meta.getString("eventURL") +"\n"+ obj.getString("url"));
                }

            } catch (JSONException e) {

                Log.e("alatta", e.getMessage());
            }
            return tv;
        }
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        /*try {
        JSONObject obj = m_results.getJSONObject(position);
        JSONObject meta = obj.getJSONObject("meta");
        url = meta.getString("eventURL"); 

        //Intent intent = new Intent (StayActiveActivity.this, WebViewActivity.class);
        //StayActiveActivity.this.startActivity(intent);

        } catch (JSONException e) {

            Log.e("alatta",e.getMessage());
        }*/

        // TODO Auto-generated method stub
        final CharSequence[] items = {"Register", "Additional Information"};
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Please Select an Option");
        builder.setItems(items, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                if (which == 0){

                    Intent intent1 = new Intent (StayActiveActivity.this, ReviewActivity.class);
                    StayActiveActivity.this.startActivity(intent1);

                }

                else if ( which == 1){
                Intent intent = new Intent (StayActiveActivity.this, WebViewActivity.class);
                StayActiveActivity.this.startActivity(intent);

                }

            }
        });
    AlertDialog alert = builder.create();
    alert.show();

    }} 
```

**WebViewActivity**

```
package my.stayactive.plan;

import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

    public class WebViewActivity extends StayActiveActivity {

            private WebView webView;

            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.webview);

                webView = (WebView) findViewById(R.id.webView);
                WebSettings setting = webView.getSettings();
                setting.setJavaScriptEnabled(true);
                if (url != null && url.length()>0) {
                webView.loadUrl(url);

            }
              } 

            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:28:51.103

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:26:52.310

我的猜测是您的 URL 正在重定向并且您没有处理重定向，因此没有显示任何内容。

尝试将此添加到您的 webview 活动中：

```
mWebView.setWebViewClient(new WebViewClient() {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);
            return false;
        }
}); 
```

这也是一个好主意，因为您的 WebView 活动中有一个 if 语句来记录 url，这样您就可以确定它实际上正确地进入了活动。如果不是，Web 视图将永远不会加载任何内容。

**编辑：**实际上仔细观察，您似乎没有在任何地方设置“url”变量，因此它将为空，因此由于 if 语句而不会调用您的 loadUrl 方法。

# java - 监控来自不同应用程序的 MySQL 插入

> ID：11458091
> 
> 赞同：10
> 
> 时间：2012-07-12T18:18:22.177
> 
> 标签：java, mysql, hibernate

我目前有一个网络服务，它使用 Hibernate 在 mysql 数据库中插入信息。其中一些信息需要由另一个“导入”应用程序处理。我不想从 web 服务触发这个应用程序。所以网络服务不依赖网络服务，反之亦然。

有没有办法从“导入”应用程序“监听”数据库中的更改（特别是：插入），然后开始执行操作。我已经查看了触发器，但这些似乎只适用于应用程序的 Hibernate 会话中的更改，而不适用于“外部”更改。

**编辑***

简而言之，我想要的答案；是否可以从不更改数据库/表本身的 java 应用程序监视对 mysql 数据库/表（来自任何来源）的更改

**赏金更新***

我将把赏金奖励给可以向我解释如何使用 Java 应用程序监视对 MySQL 表/数据库所做的更改的人。监视更改的 Java 应用程序不是应用任何更改的应用程序。改变的来源可以是任何东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T19:25:25.697

我认为你可以很容易地实现这样的事情，假设你不介意在你的数据库上创建一些额外的表和触发器，并且监控 java 应用程序必须轮询数据库而不是专门接收触发器。

假设您要监控的表是这样的：

```
CREATE TABLE ToMonitor ( id INTEGER PRIMARY KEY, value TEXT ); 
```

然后创建一个表来跟踪更改，并创建一个填充该表的触发器：

```
CREATE TABLE InsertedRecords( value TEXT );
CREATE TRIGGER trig AFTER INSERT ON account
FOR EACH ROW INSERT INTO InsertedRecords( value ) VALUES ( NEW.value ); 
```

这将导致在 ToMonitor 中发生的每个插入都填充 InsertedRecords 表。

然后您只需将您的监控应用程序设置为定期`SELECT * from InsertedRecords`，采取适当的措施，然后清除其中的记录`InsertedRecords`

编辑：如果您不介意一点 C/C++ 编码，一个小替代方案是[按照此处的说明](http://dev.mysql.com/doc/refman/5.1/en/adding-udf.html)创建一个自定义 SQL 函数，该函数触发您的监控应用程序开始运行，然后从内部调用该 SQL 函数您创建的触发器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T19:03:51.910

您可以阅读[mysql 二进制日志](http://dev.mysql.com/doc/refman/5.0/en/binary-log.html)。在这里你可以找到[一些信息](http://www.mydigitallife.info/how-to-read-mysql-binary-log-files-binlog-with-mysqlbinlog/)。有一个[java 解析器](http://code.google.com/p/open-replicator/feeds)和[另一个](https://github.com/tangfl/jbinlog)- 但它被标记为未完成）您也可以使用其他语言（例如[perl](http://search.cpan.org/~dnichter/MySQL-Log-ParseFilter-1.00/lib/MySQL/Log/ParseFilter.pm#Parsing_Binary_Logs)）查找类似的解析器并用 Java 重写它们。
也看看[mysql-proxy](https://launchpad.net/mysql-proxy)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T08:12:03.980

我知道这不是您所要求的（因此，这不是一个正确的答案），但是如果您考虑放弃“让数据库通知应用程序”的想法，您将获得使用 JMS 进行应用程序之间通信的完美案例。

发起更改的应用程序可以将消息发布到 JMS 主题，该主题由第二个应用程序订阅。一旦第一个更改数据库，它就会在主题上放置一条消息。然后第二个看到这个新事件并采取相应的行动。您甚至可以在消息中发布增量，这样第二个应用程序就不需要访问数据库。

我有点反对通过“破解”数据库来做更多的事情而不仅仅是存储数据来处理这个问题，因为它在未来不可避免地会遇到麻烦（就像一切最终都会发生的那样），并且调试它会很困难。想象一下在生态系统中添加第三个应用程序，您现在必须复制您为第二个应用程序所做的任何事情，但现在要复制第三个应用程序。如果您没有记录您的步骤，您可能会迷路。

如果您只是在这两个应用程序之间使用 JMS 服务器，那么您当然可以在未来添加第三个应用程序，它只监听这个主题（并发布一条新消息，以防它对数据库具有写访问权），另一个应用程序甚至不必知道还有一个应用程序。也不是数据库。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-17T14:33:32.710

假设我们要监视表 'table1' 中的变化

```
CREATE TABLE `table1` (
    `id` INT(10) NOT NULL AUTO_INCREMENT,
    `value` VARCHAR(50) NULL DEFAULT NULL,
    PRIMARY KEY (`id`)
)
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB
AUTO_INCREMENT=10; 
```

上面是创建“table1”的查询，它包含一个“id”列，它是自动递增的

创建另一个表来存储更改。查询如下

```
CREATE TABLE `changes` (
    `id` INT(10) NOT NULL AUTO_INCREMENT,
    `changes` VARCHAR(200) NULL DEFAULT '0',
    `change_time` TIMESTAMP NULL DEFAULT NULL,
    `tablename` VARCHAR(50) NULL DEFAULT NULL,
    `changed_id` VARCHAR(10) NULL DEFAULT NULL,
    PRIMARY KEY (`id`)
)
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB
AUTO_INCREMENT=21; 
```

现在在第一个表中创建一个触发器，即.. 'table1' 查询如下所示

```
delimiter |
create trigger trg_table1 AFTER INSERT ON table1
FOR EACH ROW BEGIN
DECLARE lastid INT DEFAULT 0;
SELECT max(id) INTO lastid from table1;
insert into changes values(null,'insert',now(),'table1',lastid);
end;
|
delimiter ; 
```

现在，如果您尝试在“table1”中插入任何内容，其详细信息将自动插入到更改表中。在更改表中更改表示更改的类型，即插入、更新等 change_time 表示发生更改的时间 tablename 表示发生更改的表 changed_id 表示“table1”中新插入行的 id

现在创建一个不断从“更改”表中读取的 java 程序。“更改”表中的新条目意味着数据库发生了某些事情。从“更改”表中的每条记录中，您可以了解插入操作发生在哪个表中。基于此，您可以执行适当的操作。执行适当的操作后，从“更改”表中删除该行。

您可以为数据库中的每个表创建触发器（就像我上面所做的那样）...从“更改”表的“表名”列中，您可以了解插入发生在哪个表中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-14T19:37:23.083

您可以使用 Q4M 之类的排队解决方案，但在您的情况下它可能有点过分了。但你可以：

在 MySQL 数据库中，将时间戳列添加到要插入的表中。在“导入”应用程序中，要么使用 java.util.timer，要么使用外部调度程序，如 cron。使用其中之一触发读取时间戳列为空的插入表的任务。对这些行采取适当的操作，然后为时间戳列设置一个值。如果没有带有空时间戳的行，则您没有新的插入。很简单，但它有效。

出于性能原因，您可能希望向时间戳列添加索引。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-26T21:23:51.583

我想这个答案已经很晚了，但正如@dbf 指出的那样，阅读**binlog**可能是要走的路。我建议查看[Debezium 的 MySQL Connector](https://debezium.io/documentation/reference/1.2/connectors/mysql.html)。

* * *

> Debezium MySQL 连接器读取 binlog 并为行级 INSERT、UPDATE 和 DELETE 操作生成更改事件，并将更改事件记录在 Kafka 主题中。

然后，您的“另一个”应用程序可以读取这些 Kafka 主题。

# makefile - 单一目标的多个规则——没有按预期工作

> ID：11458092
> 
> 赞同：0
> 
> 时间：2012-07-12T18:18:27.980
> 
> 标签：makefile, gnu-make

这是我在 Linux 系统上使用的 Makefile 的缩短版本：

```
VPATH=altsrc:src:obj

OBJECTS=\
     nondepcode1.o \
     nondepcode2.o \
     nondepcode3.o \
     depcode1.o    \
     depcode2.o    \
     depcode3.o

DEP_OBJS= depcode1.o depcode2.o depcode3.o

# Targets

execute: $(OBJECTS)
gfortran -o $@ $^ $(LFLAGS)

$(DEP_OBJS): npts.h

obj/%.o: %.f
$(FORTRAN) $(FFLAGS) $< -o $@
obj/%.o: %.f90
$(FORTRAN) $(FFLAGS) $< -o $@

# Rules

.f.o:
$(FORTRAN) $(FFLAGS) -o obj/$@ $<

%.o: %.f90
$(FORTRAN) $(FFLAGS) -o obj/$@ $< 
```

如果 npts.h 比任何对象更新，我期待依赖于“npts.h”的三个对象将在运行 make（或 gmake）时自动更新。这不会发生。Make（和 gmake）认为对象是最新的。AFAICT，我正在按照[GNU make manual](http://www.gnu.org/software/make/manual/html_node/Multiple-Rules.html)中描述的方式做事。任何人都知道为什么 make/gmake 没有达到我的预期？谢谢。顺便说一句，实际 Makefile 中所有配方行的开头都有标签。他们离开了这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:06:35.177

我脸上的主要鸡蛋。正如我所说，这是 Makefile 的缩短版本。我在真正的 Makefile 中发现了这个错误。有一些错误命名的宏。对这些东西的细节没有太多经验。过失。很抱歉。感谢您的检查。

# delphi - 使用 TIdTCPServer 进行多播（Indy 9 + Delphi 7）

> ID：11458095
> 
> 赞同：1
> 
> 时间：2012-07-12T18:18:31.467
> 
> 标签：delphi, indy

我知道我在下面描述的不是技术上的多播，但我缺乏对我正在尝试做的事情的更好描述。

我目前有一个带有 OnExecute 的 TIdTCPServer，它读取传入的消息，将响应消息生成到线程安全队列中，然后调用一个函数来单步执行队列并将消息发送回客户端。这部分代码正在工作，并允许客户端请求数据集。

当客户端更改服务器上的对象时，我希望所有客户端都通知此更改。该代码当前将通知消息添加到每个连接的每个队列中。我的问题是 OnExecute 没有循环，因此在服务器收到来自客户端的消息之前，不会调用在队列上发送消息的调用。

有没有办法让 OnExecute 循环？或者一种为我知道我已经为消息排队的连接触发 OnExecute 的方法？

我的过程 TWinSocketSession 对象具有对连接的引用，并包含传出消息队列的代码。它还有一个称为 SendMessages 的过程，它逐步遍历队列并调用 Connection.Write。下面是我的 OnExecute 过程。

```
procedure TWinServerSession.IdTCPServer1Execute(AThread: TIdPeerThread);
  Var
    i:           Integer;
    strMessage:  String;
  begin
    //find the Socket Session for connection
    for i := 0 to m_usClientCount do
      begin
        if m_mWinSocketSession[i]<>Nil then
          if ( m_mWinSocketSession[i].Connection = Athread.Connection ) then break;
      end;

    //read the message
    strMessage := m_mWinSocketSession[i].Connection.ReadLn(#0,25,-1);

    //parse the message and populate the Queue with outgoing messages
    m_mWinSocketSession[i].ParseInString(strMessage);

    //send all of the outgoing messages
    m_mWinSocketSession[i].SendMessages;
  end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:09:17.420

是的，该`TIdTCPServer.OnExecute`事件**是**一个循环事件。**入站消息到达时不会**触发它。无论连接实际在做什么，它都会在连接的生命周期内连续循环触发。事件处理程序有责任根据需要实现阻塞行为。您的代码`ReadLn()`使用指定的 25 毫秒超时调用，因此它不会阻止事件处理程序及时退出，因此它可以立即重新进入。如果您的事件处理程序被阻止及时退出，那么您的代码中的其他地方就会出现死锁问题。

但是，我建议进行以下更改：

```
procedure TWinServerSession.IdTCPServer1Connect(AThread: TIdPeerThread); 
var
  i: Integer;
begin 
  for i := 0 to m_usClientCount do  
  begin  
    if (m_mWinSocketSession[i] = nil) then
    begin
      m_mWinSocketSession[i] := TWinSocketSession.Create;
      m_mWinSocketSession[i].Connection := AThread.Connection;

      // for easier access in the other events...
      AThread.Data := m_mWinSocketSession[i];  

      Exit;
    end;
  end;

  // cannot start a new session
  AThread.Connection.Disconnect;
end; 

procedure TWinServerSession.IdTCPServer1Disconnect(AThread: TIdPeerThread); 
var
  session: TWinSocketSession;
  i: Integer;
begin 
  session := TWinSocketSession(AThread.Data);
  AThread.Data := nil;

  if session <> nil then
  begin      
    for i := 0 to m_usClientCount do  
    begin  
      if m_mWinSocketSession[i] = session then
      begin
        m_mWinSocketSession[i] := nil;
        Break;
      end;
    end;
    session.Free;
  end;
end; 

procedure TWinServerSession.IdTCPServer1Execute(AThread: TIdPeerThread); 
var 
  session: TWinSocketSession;
  strMessage:  String; 
begin 
  session := TWinSocketSession(AThread.Data);

  //read a message  
  strMessage := AThread.Connection.ReadLn(#0, 25, -1);  
  if not AThread.Connection.ReadLnTimedOut then
  begin
    //parse the message and populate the Queue with outgoing messages  
    session.ParseInString(strMessage);  
  end;

  //send all of the outgoing messages  
  session.SendMessages;  
end; 
```

`OnConnect`如果您可以完全消除 m_mWinSocketSession 列表并在事件中直接为 Connection 分配一个新队列，这会更好。当客户端断开连接时，该`OnDisconnect`事件可以释放队列。

```
procedure TWinServerSession.IdTCPServer1Connect(AThread: TIdPeerThread); 
begin
  AThread.Data := TWinSocketSession.Create;
  TWinSocketSession(AThread.Data).Connection := AThread.Connection;
end;

procedure TWinServerSession.IdTCPServer1Disconnect(AThread: TIdPeerThread); 
begin
  session := TWinSocketSession(AThread.Data);
  AThread.Data := nil;
  session.Free;
end; 
```

# javascript - 如何为特定的 javascript 对象扩展数组或对象原型？

> ID：11458099
> 
> 赞同：0
> 
> 时间：2012-07-12T18:18:41.830
> 
> 标签：javascript

说我有以下内容：

```
function Myobj = {
   name: "Julia",
   birthdate: "xxxx",
   genres: [],
   movies: [{title: "movie1", rating: 5, genre: "Horror"}, {title: "movie2", rating 3, genre: "Comedy"},{title: "movie3", rating 3, genre: "Comedy"}, {title: "movie4", rating 3, genre: "Comedy"}, {title: "movie5", rating 3, genre: "Horror"}]
} 
```

我想要做的是有一些功能，比如：

```
Myobj.prototype.pushMovie(somejson) {
   // code to add somejson to "movies", and add the "genre" to the "genres" array
} 
```

这样我就可以走了：

```
obj1 = new Myobj();
obj1.pushMovie({title: "movie1", rating: 5, genre: "Horror"}); 
```

还是重写数组原型是更好的做法？如果是这样，是否可以为原型提供一个特定的数组，而不是所有数组，例如：

```
Myobj.Array.prototype.pushMovie() {
// code to inherit from regular push, and do some operation to add to "genres"
} 
```

我不知道语法正确或最好的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:21:54.293

为什么不是这个？

```
Myobj.prototype.addMovie(somejson) {
   this.movies.push( somejson );
}
Myobj.prototype.addGenre(somejson) {
   this.genres.push( somejson );
}
Myobj.prototype.pushMovie = Myobj.prototype.addMovie; 
```

# php - 使用 MYSQL 数据库的 AJAX 搜索栏

> ID：11458102
> 
> 赞同：0
> 
> 时间：2012-07-12T18:18:49.203
> 
> 标签：php, javascript, html, ajax

我正在尝试使用 ajax 在我的网页上创建一个用户搜索栏。我想直接从我的 mysql 数据库返回值，而不是使用 xml 文件。这是因为我不想每次在网站上注册新用户时都必须不断更新我的 xml 文件。我是 AJAX 的新手，遇到了障碍。现在，如果我将值硬编码到查询中，我的代码就可以工作。但是如何从搜索栏中获取值到查询中，并使代码仅在搜索栏中输入值时运行。这就是我所拥有的。

我有两个文件，索引（搜索栏和 php 代码所在的位置），然后是 ajax 代码的 javascript 文件。

搜索条码：

```
 <form method="post" name="searchForm">
                <input type="text" size="40" placeholder="Search for people" onkeyup="getResults(this.value)" />
                <div id="search">
                    <?php
                        $searchString = $_POST['str'];  
                        $sql = "SELECT name FROM User WHERE name LIKE '?%'";
                        $query = $conn->prepare($sql);
                        $query->execute(array($searchString));
                        $row = $query->fetchAll();
                        echo "<ul>";
                        foreach ($row as $rs) 
                        {
                            echo "<li><a href='#'>" . $rs['name'] . "</a></li>";
                        }
                        echo "</ul>";
                    ?>
                </div>
            </form> 
```

Javascript/AJAX 代码：

```
function getResults(str)
{
    if (str.length == 0)
    { 
        document.getElementById("search").innerHTML="";
        document.getElementById("search").style.border="0px";
        return;
    }
    if (window.XMLHttpRequest)
    {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {   
        // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("search").innerHTML = xmlhttp.responseText;
            document.getElementById("search").style.border="1px solid #A5ACB2";
        }
    }
    xmlhttp.open("POST","index.php?str="+str,true);
    xmlhttp.send();
} 
```

我在这里做错了什么？除了使用提交按钮之外，还有什么方法可以让我只在用户开始在搜索栏中输入时运行 php 代码。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:23:41.200

首先，将实际页面（呈现 HTML 的 PHP 脚本）和返回实际搜索结果的代码分开。目前，您`<input>`在页面呈现时执行的 PHP 代码永远不会知道用户在您的搜索框中输入了什么。

您的搜索脚本应返回 JSON 或 XML。目前，它使用完整的 HTML 加载为用户设计的页面。这只是对资源和带宽的浪费。

为了修正您的 SQL 语句，该`?`字符必须代表您的`LIKE`表达式的整个术语。
例子：

```
$searchString = $_POST['str'] . '%';
$sql = "SELECT name FROM User WHERE name LIKE ?";
$query = $conn->prepare($sql);
$query->execute(array($searchString)); 
```

还有更多的东西需要修复，但这应该可以帮助你从哪里开始......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:30:56.123

您需要检查是否确实发生了 POST - 有人第一次点击您的页面时很可能是通过 GET，但无论如何您的搜索代码都会运行。所以...

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
   if (isset($_POST['str']) && ($_POST['str'] != '')) {
       ... run the search
   }
} 
```

# python - Python 输出 CR CR LF？

> ID：11458104
> 
> 赞同：2
> 
> 时间：2012-07-12T18:19:03.827
> 
> 标签：python, python-3.x, mingw, eol

我正在编写一个测试脚本，它将简单地运行一个带有几个参数的 *.EXE 文件，然后将结果输出到一个文件中。我有一个 *.sh 测试脚本可以正确运行测试（但需要手动更新以进行更多测试）。此脚本中的行如下所示：

```
blah.exe arg1 arg2 arg3 > ../test/arg4/arg4.out 
```

我已经编写了一个 python 脚本来根据一些简单的 python 模块自动生成参数（现在很粗糙）：

```
import os
import subprocess

for test_dir in os.listdir():
    if not os.path.isdir(test_dir):
        continue
    # load a few variables from the ./test_dir/test_dir.py module
    test_module = getattr(__import__(test_dir, fromlist=[test_dir]), test_dir)

    # These arguments are relative paths, fix the paths
    arg1 = os.path.join(test_dir, test_module.ARG1)
    arg2 = os.path.join(test_dir, test_module.ARG2)
    arg3 = os.path.join(test_dir, test_module.ARG3)

    proc = subprocess.Popen(["../bin/blah.exe", arg1, arg2, arg3], stdout=subprocess.PIPE)

    stdout_txt = proc.stdout.read().decode("utf-8")

    with open(os.path.join(test_dir, test_dir + '.out'), 'w') as f:
        f.write(stdout_txt) 
```

我打开了文件进行比较，当脚本运行时，我遇到了一个问题。第一个（shell）解决方案输出正确的行尾。第二个（python）解决方案输出以 CR CR LF 结尾的行。这在记事本中看起来是正确的，但在记事本++中，每隔一行似乎都是空白的：

![这些行之间不应有空行](../Images/9f8db6b4eb8ee2e98b86d0a151c5328c.png)

**为什么 python 的输出给出了不正确的行尾？**

**如何更正行尾？**（将 CR CR LF 更改为 CR LF 而无需编写另一个脚本）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:21:19.190

尝试使用`universal_newlines=True`参数`Popen`（参见[http://docs.python.org/library/subprocess.html#popen-constructor](http://docs.python.org/library/subprocess.html#popen-constructor)）。

# objective-c - NSURLErrorDomain：无法解码原始数据

> ID：11458107
> 
> 赞同：3
> 
> 时间：2012-07-12T18:19:12.357
> 
> 标签：objective-c, ios, ios5, nsurlconnection, ipod-touch

我正在用我自己的下载管理器下载一些文件。它运行了将近半年（甚至在将其发布到 App Store 之后）
但昨天我得到了一些有趣的东西：

```
Error Domain=NSURLErrorDomain Code=-1015 "cannot decode raw data"
UserInfo=0x4c12e0
{
    NSErrorFailingURLStringKey=http://***/file.json.gz,
    NSErrorFailingURLKey=http://***/file.json.gz,
    NSLocalizedDescription=cannot decode raw data
    NSUnderlyingError=0x4dcec0 "cannot decode raw data"
} 
```

一点背景知识：我有一个 Web 服务器，它为我提供 JSON 和 gzip 压缩的 JSON。

因此，当我尝试下载压缩文件并且仅在 iPod Touch 4G (5.1.1) 上时，问题就出现了！

怎么了？我该如何处理？是网络服务器的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:53:49.050

接下来是问题。
当 iPhone 接收到 gzip 压缩的数据时，它会自动将其解压缩。在`Content-Length`这种情况下 等于`-1`。因此，如果您想继续下载 gzipped 数据，则制作`Range`标头不是一个好主意：您不知道 gzipped 数据的大小。
在我们的例子中，我们将开始`Range`等于已经下载的数据，并且在某些情况下它超过了 gzip 压缩数据的大小（我什至没有说这是错误的，文件已损坏！）。所以 web 服务器返回`416 Requested Range not satisfiable`了，这就是为什么`NSURLConnection`委托的`didFailWithError`方法被调用时`NSURLErrorCannotDecodeRawData`出错。

## 详细解释和我们的解决方案

在下载管理器中，我们有代码

```
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
[req setRange:NSMakeRange(progress, NSNotFound)]; 
```

`progress`下载的数据量在哪里。它存储在数据库中以允许暂停和继续下载单个文件（例如，应用程序重新启动之间的大文件）。当我们想继续时，我们`Range`用 [progress; ∞) 间隔（从我们已经下载的偏移量接收数据）。

服务器（Apache、nginx 等）即时将 gzip 编码应用于流。这有利于减小输出文件的大小，但结果是您不知道整个 gzip 文件的大小。所以它基本上意味着你不能暂停并继续下载 gzipped 流。此外，下载的 gzip 压缩块正在接收（`NSURLConnection`委托方法`connection:didReceiveData:`）时解压缩，因此您不会知道传递了多少 gzip 压缩数据。因此，您不会创建正确的偏移量，服务器将从您不想要的偏移量返回数据，并且您的结果文件首先会被损坏，其次，一旦您超过内容长度并接收`416`。

因此，没有一个浏览器或其他任何东西可以让您继续下载动态（根据请求生成）或 gzip 压缩的内容。如果您想暂停并继续大型压缩文件（在我们的例子中为 20 Mb JSON），请将它们设为静态并存档或继续 gzip 压缩它们并希望用户等到文件下载。

所以我们选择了第二条路径，如果`Content-Lenght`未知（`-1`），现在不要设置范围。

```
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

if (urlResponse.expectedContentLength != NSURLResponseUnknownLength) {
    [req setRange:NSMakeRange(progress, NSNotFound)];
} 
```

# c# - 在 .NET Compact Framework 上将位图转换为单色后的纯黑色图像

> ID：11458109
> 
> 赞同：0
> 
> 时间：2012-07-12T18:19:31.510
> 
> 标签：c#, bitmap, windows-mobile, compact-framework

我的目标是使用 Windows Mobile 设备上的相机拍照并将该图像转换为单色位图，以便可以使用 .NET Compact Framework 在蓝牙打印机上打印。我在这里找到了我正在寻找的答案：

[在 .net 紧凑框架中将图像转换为 1 bpp 位图](https://stackoverflow.com/questions/1836632/convert-image-to-1-bpp-bitmap-in-net-compact-framework)

当我添加此代码并使用我用相机拍摄的图像（大小约为 300K 的 .jpg 文件）进行测试时，我将该图像从上述 stackoverflow 解决方案中的代码传递到代码中，并且它没有错误地完成。查看位图时，它是纯黑色图像。

传入代码的原始位图需要一定的分辨率还是有其他限制？用相机拍摄的原始图像一开始是黑白的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:07:32.607

这是一个棘手的问题。要获得合理的结果，您真正需要做的是实施一种抖动算法，该算法允许打印机根据原始像素的“黑色”程度按比例分配白色和黑色点。如果您将算法限制为将每个像素仅转换为白色或黑色，则输出将不能很好地代表您拍摄的原始照片。通过抖动，您可以分析输入中的每个像素，并根据输入像素的暗度调整输出上的周围像素。

一个常见的抖动实现是 Floyd-Steinberg 算法，这里以它的基本形式描述：

[弗洛伊德-斯坦伯格抖动](http://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering)

如果你用谷歌搜索的话，会有更多的信息。

由于它不是一个简单的算法来实现，但要准备好花一个多下午的时间来让它恰到好处。

# extjs - Extjs4，文件上传

> ID：11458110
> 
> 赞同：1
> 
> 时间：2012-07-12T18:19:32.703
> 
> 标签：extjs, extjs4, filefield

我正在尝试使用 Extjs4.1 文件字段将文件发布到服务器。

但是发生错误，它说结果未定义。:(

![在此处输入图像描述](../Images/7e4c3f9c7d58c67838e72b470b951117.png)

通知，

没有文件字段，它工作正常。

这是表格。它加载正常。尝试提交时发生错误。

```
var myform = Ext.create('Ext.form.Panel', {
    bodyStyle: 'padding: 15px 50px',
    defaults: {
        xtype: 'textfield',
        anchor: '100%',
        style : 'margin-top:10px'
    },
    items: [
    {
        xtype: 'fieldcontainer',
        layout: 'hbox',
        anchor: '50%',
        items: [
            {
                xtype: 'textfield',
                fieldLabel: '<b>Order Number </b>',
                name: 'orderNo',
                maxLength: 9,
                flex: 1,
                allowBlank: false
            }, {
                xtype: 'button',
                text: 'Get Info',
                name : 'getOrderInfo_btn',
                tooltip: 'Get Order Information',
                style: 'margin-left:5px',
                flex: 0
            }
        ]
    }, {
        fieldLabel: '<b>Refundable Tax Amount </b>',
        name: 'refundAmount',
        readOnly: true,
        labelWidth: 160,
        anchor: '45%',
        allowBlank: false
    }, {
        fieldLabel: '<b>Certificate File</b>',  //without this, it's OK
        xtype : 'filefield',  
        name: 'certificate',
        labelWidth: 160,
        anchor: '90%',
        allowBlank: false
    }
    .
    .
    . 
```

这是我的控制器（提交表单），

```
refundTaxAmount: function (obj) {
        var form = obj.up('panel').down('form').getForm();
        console.log('Hi'); // it prints, but after that it stop with an error msg.
        if (form.isValid()) {
            form.submit({
                waitMsg: 'Please wait, now processing...',
                url: '/Order/CreditForTax/',
                method: 'POST',
                success: function (form, action) {
                    Ext.MessageBox.show({
                        title: 'Notice',
                        msg: 'The tax credit has been refunded!',
                        buttons: Ext.MessageBox.OK,
                        icon: Ext.MessageBox.INFO,
                        width: 300
                    });
                    form.reset();
                },
                failure: function (form, action) {
                    Ext.MessageBox.show({
                        title: 'Error',
                        msg: action.result.message,
                        buttons: Ext.MessageBox.OK,
                        icon: Ext.MessageBox.ERROR,
                        width: 300
                    });
                }
            });
        }
    } 
```

有谁知道，我的问题是什么？请指教~！

谢谢

[编辑]

当 submit() 时，5-10 秒后，出现错误消息。

![在此处输入图像描述](../Images/ccc295d62b20c5a6f6bbf28e83a8889a.png)

![在此处输入图像描述](../Images/3d4c118e01be906d2424976575991bf6.png)

[编辑2]

ASP.NET (c#) 代码，

```
[HttpPost]
public JsonResult CreditForTax(RefundModel info, HttpPostedFileBase certificate)
{
    object result;
    try
    {
    //do something

    result = new {success = true};
    }
    catch (Exception e)
    {
    log.Error(e.Message +"\n"+e.StackTrace);
    result = new { success = false, message = e.Message };
    }

    return Json(result);
} 
```

是的，我认为 asp.net 代码是错误的......有人知道该代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:16:37.573

如果服务器`JSON`用于发送返回对象，则`Content-Type`必须将标头设置为`"text/html"`以告诉浏览器将未更改的文本插入到文档正文中。

**C# (MVC3) 代码：**

```
var jsonResponse = Json( new
                        {
                            success = false,
                            message = "Oops. There was an unexpected error.\n" + ex.ToString()
                        });
jsonResponse.ContentType = "text/html"; // <-- Set content type explicitly.
return jsonResponse; 
```

这是[文档](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Basic-method-hasUpload)的链接。

# java - 浏览器中的 Java 小程序：找不到插件

> ID：11458115
> 
> 赞同：0
> 
> 时间：2012-07-12T18:19:54.307
> 
> 标签：java, html, browser

我有一个旧网站，上面有一个 Java 小程序，我正在将其切换到更 HTML5 的模型。所以我`<applet>`用新标签替换了我的旧标签（无论如何它在 Firefox 中停止工作）`<object>`，比如：

```
<object id="IFApplet" name="IFApplet" type="application/x-java-applet" height="250" width="800">
    <param name="code" value="IFApplet" /> <!-- not sure if I'm doing this correctly... -->
    <param name="archive" value="com.mywebsite.IFApplet />
    ...
</object> 
```

现在，当我尝试将我的小程序与 Firefox、Chrome 或 Opera 一起使用时，我收到一条错误消息，说我缺少一个插件来显示我的内容。然后它问我是否要自动下载合适的插件，当我说是时，浏览器告诉我找不到任何插件。即使我手动安装 Java（或重新安装），我仍然会遇到相同的浏览器错误。它在 IE9 中运行良好。

有谁知道如何让它在其他浏览器中工作？或者如何让它跨浏览器工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:53:16.930

我已经很久没有这样做了，但是我曾经也遇到过问题，当我开始使用 oracle 提供的部署脚本时它们就消失了（当时我认为它仍然是 sun）。

这是他们提供的一个示例：http: [//docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html)

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
    var attributes = {codebase:'http://path/to/applet',
                      code:'your.main.class',
                      archive:'some-file.jar',
                      width:710, height:540} ;
    var parameters = {fontSize:16} ;
    var version = '1.6' ;
    deployJava.runApplet(attributes, parameters, version);
</script> 
```

另一种方法是简单地将旧标签放在较新的对象标签中。

# cocoa-touch - NSDictionary 中的键有什么要求？

> ID：11458119
> 
> 赞同：1
> 
> 时间：2012-07-12T18:20:17.700
> 
> 标签：cocoa-touch, nsdictionary

我需要使用我编写的自定义类作为`NSMutableDictionary`（在这种情况下为 A`Socket`类）中的键。

在 Java 中，当我使用`HashMap`or时`TreeMap`，该对象分别需要一个哈希函数或比较器函数来操作字典。一般来说，字典需要知道一些比较键的方法。

根据我在文档中阅读的内容，看起来我不必这样做才能使用`NSMutableDictionary`。那是对的吗？如果是，有谁知道他们是如何实现密钥比较的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:34:49.673

-hash 的默认实现基于对象的实例地址，因此在 NSDictionary 中用作键可能是一个不好的选择。因此，默认情况下，您的类的两个逻辑相等的实例将映射到字典中的两个不同条目，直到您正确覆盖**-isEqual**和 -hash 以反映您的逻辑。

除此之外，您绝对**需要**正确覆盖 -copyWithZone: 以反映您的相等逻辑，因为 NSDictionary 复制它的键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T18:29:34.887

只要密钥符合`NSCopying`（`NSObject`不符合，但很多事情符合），它就可以用作密钥。将使用 复制密钥`copyWithZone:`。

关于它是如何工作的，它就像你在 Java 中提到的那样工作。“该对象分别需要哈希函数或比较器函数才能使字典运行。” 每个都`NSObject`实现`hash`和`isEqual:`。

# php - 将多维数组与强制值进行比较

> ID：11458123
> 
> 赞同：1
> 
> 时间：2012-07-12T18:20:34.753
> 
> 标签：php, arrays, json

我有一个多维数组，需要验证该数组是否包含正确图层上的必填字段。

有没有很好的方法来实现这一目标？输入可以是数组或 JSON。

到目前为止我的方法：

假设输入数组如下：

```
 Array (
    [key] => key string
    [sub] => Array (
        [0] => Array (
            [id] => 123456
            [src] => source string
            [src_ids] => Array (
                [0] => 1
                [1] => 2
                [2] => 3
                [3] => 4
            )
            [data] => Array (
                [a_data] => a string
                [b_data] => b string
                [c_data] => c string
            )
        )
        [1] => Array (
            [id] => 557799
            [src] => source string
            [src_ids] => Array (
                [0] => 1
                [1] => 2
            )
            [data] => Array (
                [a_data] => a string
                [b_data] => b string
                [c_data] => c string
            )
        )
    )
) 
```

强制值是：

```
sub, id, src, src_ids, data, a_data 
```

可选值是其他所有内容，例如：

```
key, 0 (of sub), 0-3 (of src_ids), b_data, c_data 
```

我想要一个函数来检查任何输入数组与必填字段。我的想法是将强制值创建为基于层的数组，例如：

```
$mandatory = array( 
    1 => array( 'sub' ),
    3 => array( 'id', 'src', 'src_id', 'data' ),
    4 => array( 'a_data' )
); 
```

键是层的深度，数组值是该层允许的键名。

现在我尝试爬取输入数组并根据深度检查键是否在必填字段中：

```
/**
 * 
 * @param array $i input
 * @param array $m mandatory
 * @param integer $d depth
 * @return boolean
 */
function validate( $i, $m, $d=1 ) {
    foreach( $i as $k => $v ) {
        if( isset($m[$d]) ) {
            if( !in_array($k, $m[$d]) ) {
                return false;
            } else {
                if( is_array($v) ) {
                    $d++;
                    validate($v, $m, $d );
                }
            }
        } else {
            if( is_array($v) ) {
                $d++;
                validate($v, $m, $d );
            }
        }
    }
    return true;
} 
```

但这会导致两个主要问题：

1.  第 4 层包含 src_ids 和数据的数组，但只有在数据中才有必填字段 a_data。所以它将为第 4 层返回 false
2.  但主要问题是这个函数的逻辑问题。现在它不检查是否设置了必填字段，它只检查深度的输入值是否在必填字段中。这种行为是错误的。

我也尝试使用比较数组，但由于有多个条目，我无法将所有条目与强制数组进行比较。

非常感谢任何帮助、建议或解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:31:09.500

这是否满足您的要求？

*必填字段结构：*

```
$required = array(
    'sub' => array(
        array(
            'id' => '',
            'src' => '',
            'src_ids' => '',
            'data' => array(
                'a_data' => '',
            ),
        ),
    ),
); 
```

基本上只是模仿输入数组的结构。字段名是键；必需的子字段是后代。`sub[0]`如果它是一个与and一样的列表，则保留数字键/未命名键`sub[1]`，它将检查列表中每个项目的结构。

*递归验证函数：*

```
function checkRequired($data, $req)
{
    // no more required fields
    if (empty($req))
        return true;

    // no more data fields; obviously lacks required field(s)
    if (empty($data))
        return false;

    foreach ($req as $name => $subtree) {
        // unnamed; it's a list
        if (is_numeric($name)) {
            foreach ($data as $dataitem) {
                if (checkRequired($dataitem, $subtree) == false)
                    return false;
            }
        } else {
            // required field doesn't exist
            if (!isset($data[$name]))
                return false;

            // fine so far; down we go
            if (!empty($subtree)
                && checkRequired($data[$name], $subtree) == false
            ) {
                return false;
            }
        }
    }

    return true;
} 
```

我可能在某个地方搞砸了，但希望你能把它改编成有用的东西。这是一个您可以尝试的[工作示例。](http://codepad.org/y9m4BvBz)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:54:31.620

如果你定义`$input`和`$mandatory`描述的那样，剩下的代码看起来像这样：

```
$values[1] = $input;
$layer = 1;
$found_layer = true;

while($found_layer)
{
        $found_layer = false;
        foreach($values[$layer] as $li=>$le)
        {
                if(is_array($le))
                {
                        $found_layer = true;
                        if(!isset($values[$layer+1])) $values[$layer+1] = array();
                        $values[$layer+1] = array_merge($le, $values[$layer+1]);
                        $values[$layer][$li] = 'array';
                }
        }
        $layer++;
}

$not_found = $mandatory;

foreach($not_found as $layer=>$keys_to_match)
{
        foreach($values[$layer] as $key=>$value)
        {
                foreach($keys_to_match as $ktmi=>$ktm)
                {
                        if($ktm==$key) unset($not_found[$layer][$ktmi]);
                }
        }
        if(!count($not_found[$layer])) unset($not_found[$layer]);
        else $not_found[$layer] = array_values($not_found[$layer]);
} 
```

那么代码将产生`$not_found`如下：

```
Array
(
    [3] => Array
        (
            [0] => src_id
        )

) 
```

这意味着，根据`$mandatory`. 如果找到所有必需元素，`$not_found`则将为空。注意，你有`'src_id'`in`$mandatory`但`$input`显然只有一个 key `'src_ids'`。

我避免使用递归来提高性能。

# jsp - Struts 2：如何从 JSP 页面访问在 Action 类中声明的模型对象的属性？

> ID：11458124
> 
> 赞同：1
> 
> 时间：2012-07-12T18:20:38.120
> 
> 标签：jsp, model, struts2, attributes

例如，当我尝试从 JSP 页面更改 Action 类的属性时，我可以通过表单来完成，但是当我尝试更改在 Action 类中声明的对象的属性时，我无法做到。

模型类：

```
public class User { 
  private String name;  
  public User(){
    this.setName("Unknown");
  } 
  public String getName() {
    return name;
  }
  public void setName(String name) {
    this.name = name;
  }
} 
```

动作类：

```
public class UserAction{
  private User user;
  public String execute(){
    user = new User();
  }
  public User getUser(){
    return user;
  }
  public void setUser( User user ){
    this.user = user;
  }
} 
```

User 类在构造函数中为属性设置一个默认值，我可以访问它：

```
<s:property value="user.name" /> 
```

但是当我尝试通过表单更改它然后在表单之后的目标页面中打印它的值时，我仍然得到默认值：

```
<s:form action="welcomeAction" >
  <s:textfield name="user.name" label="User name " />
</s:form> 
```

先感谢您 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:45:20.247

您的方法中的以下行`execute()`可能是罪魁祸首：

```
user = new User(); 
```

设置参数后调用动作方法，因此框架将构造您的用户对象，设置参数，然后调用动作方法（在本例中`execute()`），该方法会立即将用户变量重新分配给一个全新的用户对象，默认完成设置。

这也解释了为什么更改 struts.xml 以调用与执行不同的方法来解决问题（请注意，您的原始 struts.xml 配置很好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:31:12.563

我在 struts.xml 中：

```
<action name="welcomeAction" class="helloworld.action.UserAction">
<result>/welcome.jsp</result>
</action> 
```

所以，我在 Action 类中创建了一个方法 setUserFields，它返回 "done" ：

```
<action name="welcomeAction" class="helloworld.action.UserAction" method="setUserFields">
<result name="done">/welcome.jsp</result>
</action> 
```

# javascript - Chrome 扩展失败...怎么了？

> ID：11458126
> 
> 赞同：1
> 
> 时间：2012-07-12T18:21:00.533
> 
> 标签：javascript, json, google-chrome-extension

我正在尝试制作一个 Chrome 扩展程序，它可以使用 XHR 解析网站上的 json 页面，这样每当页面上的数字发生变化时，我就可以制作一个徽章。我以为我有它，但是当我将它添加到 chrome 时，图标出现但它不会做任何事情......有什么问题？

background.js：（已编辑）

```
chrome.browserAction.onClicked.addListener(function(tab) {
chrome.tabs.create({'url': "http://www.bukkit.org/account/alerts"}, function(tab) {
  });
});
var xhr = new XMLHttpRequest();
xhr.open( 'GET', 'http://www.bukkit.org/.json', true );
xhr.onload = function () {
    var unread = window.JSON.parse( xhr.responseText )._visitor_alertsUnread;
};
xhr.onerror = function () {
};
xhr.send();

if (unread>0){
chrome.browserAction.setBadgeText({text: unread});
chrome.browserAction.setBadgeBackgroundColor({color: "#FF0000"})
} 
```

和我的 manifest.json：

```
{
   "browser_action": {
      "default_icon": "icon.png"
   },
   "description": "Get Bukkit Alerts",
   "icons": {
      "128": "128.png",
      "16": "16.png",
      "48": "48.png"
   },

   "name": "BukkitAlert",
   "permissions": [ 
      "tabs", 
      "http://www.bukkit.org/*"
   ],
 "background": {
    "scripts": ["background.js"]
  },   "version": "1.0"
} 
```

谢谢！
编辑：现在单击图标打开新选项卡有效，但它表示变量“未读”未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:29:09.153

颜色必须是字符串。

你写了。

```
chrome.browserAction.setBadgeBackgroundColor({color: #FF0000}) 
```

应该

```
chrome.browserAction.setBadgeBackgroundColor({color: "#FF0000"}) 
```

**更新**

运行此代码显示 url 中的 JSON 格式存在错误。

```
var xhr = new XMLHttpRequest();
xhr.open('GET', 'http://www.bukkit.org/.json', true);
xhr.onload = function () {
    var unread = window.JSON.parse(xhr.responseText)._visitor_alertsUnread;
    console.log( unread );
};
xhr.onerror = function () {
    console.log( "An error occurred" );
    console.dir(arguments);
};
xhr.send(); 
```

始终定义`onerror`函数，以便您可以通知某人服务器出现错误。

# python - 当 LANG=C 时如何在 Python 2 中打印 Unicode

> ID：11458134
> 
> 赞同：1
> 
> 时间：2012-07-12T18:21:27.267
> 
> 标签：python, unicode

很愚蠢的问题，我知道。当然，通常 LANG=C 表示不能显示 Unicode 字符的 ASCII 终端。但我仍然想打印出 UTF-8 字节。我使用 Python 2（实际上是 2.6.5）

```
print '\xc3\xa4', u'\xe4' 
```

这会在 Unicode 终端上打印 'ä ä'，但第二个字符串在使用 LANG=C 执行时会导致错误。我不希望 Python 变得聪明，而只是将 u'\xe4' 转换为 UTF-8，所以它只是 '\xc3\xa4' 在内存中。

我尝试了所有可以想象的 decode()、encode() 和 unicode() 组合，但似乎我错过了正确的组合。

我真正想要的是通过vi的`system()`函数读取Unicode字符，比如

```
:echo system('python foo.py') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:31:21.927

要将 a 编码`unicode`为 utf-8，请调用`.encode('utf-8')`它。：

```
>>> u'\xe4'.encode('utf-8')
'\xc3\xa4' 
```

# php - 解析“字节（偏移十六进制文本）”

> ID：11458135
> 
> 赞同：1
> 
> 时间：2012-07-12T18:21:28.973
> 
> 标签：php, regex, hex

您可以使用 wireshark 从 udp 数据包中复制字节数据。 ![线鲨](../Images/c93df0c0b4d211dbdf765a19549f6029.png)

它会产生这样的数据

```
00f00:   21 00 d2 0c 17 ca d9 2f fe 40 be 01 00 37 fa 83  !....../.@...7..
00f09:   21 00 d2 0c 17 ca d9 2f fe 40 be 01 00 37 fa 83  !....../.@...7..
00f10:   2c b3 bd a2                                      ,... 
```

如何使用**php regex**`21 00 d2 0c 17 ca d9 2f fe 40 be 01 00 37 fa 83 2c b3 bd a2`从该文本表中获取数组 ()中的所有字节？（从每一行到单个 php 字节数组，甚至更好地到**string**）

 ****我不仅需要解析wireshark数据（所以关于Bytes（Offset Hex）的建议不起作用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:14:19.747

我认为一个简单的解决方案是将字符串操作与简单的正则表达式结合起来，如下所示：

```
$output = '';
foreach( explode( "\n", $input) as $line) {
    if( preg_match( '/(?:[a-f0-9]{2}\s){1,16}/i', $line, $matches)) {
        $output .= ' ' . $matches[0];
    }
}

$output = trim( $output);
var_dump( $output); 
```

这[输出](http://viper-7.com/ltGccb)：

```
string(109) "21 00 d2 0c 17 ca d9 2f fe 40 be 01 00 37 fa 83 21 00 d2 0c 17 ca d9 2f fe 40 be 01 00 37 fa 83 2c b3 bd a2" 
```****

# java - 我有一个非常奇怪的问题，url 在查询字符串中被 / 附加

> ID：11458136
> 
> 赞同：0
> 
> 时间：2012-07-12T18:21:33.740
> 
> 标签：java, url

以下是我的代码中使用的网址

```
URL url = new URL("https://8.7.177.4/ns-api?object=answerrule&action=read&domain=amj.nms.mixnetworks.net&user=9001"); 
```

但我得到了例外

```
java.io.FileNotFoundException: https://8.7.177.4/ns-api/?object=answerrule&action=read&domain=amj.nms.mixnetworks.net&user=9001
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
    at AuthenticateCurl.authenticatenewPostUrl(AuthenticateCurl.java:311)
    at AuthenticateCurl.main(AuthenticateCurl.java:341) 
```

在异常中，我们可以`/?object=answerrule`在开始查询字符串之前找到附加的 url。

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:28:42.983

当您访问没有额外“/”的 url 时，Web 服务器会将您转发到具有额外“/”的版本。`curl`尝试在命令行中访问 URL时可以看到这一点：

```
$ curl --insecure -v 'https://8.7.177.4/ns-api?object=answerrule&action=read&domain=amj.nms.mixnetworks.net&user=9001'
> GET /ns-api?object=answerrule&action=read&domain=amj.nms.mixnetworks.net&user=9001 HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: 8.7.177.4
> Accept: */*
> 
< HTTP/1.1 301 Moved Permanently
< Date: Thu, 12 Jul 2012 18:45:28 GMT
< Server: Apache/2.2.11 (Fedora)
< Location: https://8.7.177.4/ns-api/?object=answerrule&action=read&domain=amj.nms.mixnetworks.net&user=9001
< Content-Length: 392
< Connection: close
< Content-Type: text/html; charset=iso-8859-1
< 
```

这很好，HttpURLConnection 会自动跟随重定向到新的 URL。这是正常行为。

在新的 URL 之后，我们得到了不同的结果：

```
$ curl --insecure -v 'https://8.7.177.4/ns-api/?object=answerrule&action=read&domain=amj.nms.mixnetworks.net&user=9001'
> GET /ns-api/?object=answerrule&action=read&domain=amj.nms.mixnetworks.net&user=9001 HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: 8.7.177.4
> Accept: */*
> 
< HTTP/1.1 404 Not Found
< Date: Thu, 12 Jul 2012 18:46:46 GMT
< Server: Apache/2.2.11 (Fedora)
< X-Powered-By: PHP/5.2.9
< Content-Length: 0
< Connection: close
< Content-Type: text/html; charset=UTF-8
< 
```

...我们得到一个 404，这就是你得到 FileNotFoundException 的原因！

如果您不期望重定向并且您也在运行服务器，那么服务器上可能存在配置问题。

# soa - 具有准确 TPS 的性能测试报告

> ID：11458137
> 
> 赞同：0
> 
> 时间：2012-07-12T18:21:35.513
> 
> 标签：soa, soapui, performance-testing, loadui

我需要在带有侧缓存的 SOA 设备上完成一些性能测试。我开发了一个简单的应用程序来生成 SOAP/HTTP 流量，但现在我需要某种方式来监控 E2E 应用程序的性能。

我需要的一个重要指标是每秒事务数以及 e2e 响应时间的准确数字。

我使用了soapUI 和Loadui，但只是不相信报告的TPS 数据，因为它们看起来非常高，例如> 1300 TPS。

任何人都可以推荐一种“万无一失”的测量 TPS 的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:08:50.860

我建议根据您服务器的日志交叉检查 SoapUI 的数字（计算同一秒的行数），或者以这种方式交叉检查：

自己安排测试时间。
验证 SoapUI 引用的事务数是否准确（日志或服务器本身的其他度量）。将反式计数除以秒。

过去我做过这个，发现 SoapUI 非常可靠。

关于您的数字是否尽可能好，要记住的一件事是您是否可能需要同时从多台机器上运行soapui。我建议监控 SoapUI 机器上的 CPU、内存、带宽等。如果其中任何一个变得相当高，请同时在两台机器上以非常接近相同的开始和停止时间运行测试，然后您可以安全地添加两个 TPS 数字。

# javascript - 如何通过 facebook api 获得我自己网页的活跃用户

> ID：11458139
> 
> 赞同：3
> 
> 时间：2012-07-12T18:21:44.883
> 
> 标签：javascript, facebook

我知道我们可以获取在线用户，但是这个在线不是我想要的，我想知道当前在我的网页上的在线用户，而不是 facebook。我想在使用他们的 facebook 帐户登录后获取现在正在使用我的网页的用户列表，然后我不在乎他们是否仍然在他们的 facebook 上活跃。
有什么方法可以获取这些信息吗？请帮忙！
我正在使用Javascript！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:39:08.363

API 中没有任何内容可以让您知道某个用户是否在您的应用上处于活动状态/在线状态。

您需要自己记录连接。但是您使用的是 Javascript，它是一种客户端语言。这意味着它是在客户端的浏览器上执行的，您将无法管理传入的连接。

您是否在后台使用 PHP（服务器端）？这样您就可以在最后 5 分钟内显示已连接的人员！

# c# - 是否可以在 PropertyGrid 中查看公共属性以外的成员？

> ID：11458145
> 
> 赞同：4
> 
> 时间：2012-07-12T18:21:59.167
> 
> 标签：c#, winforms, f#

是否可以在 PropertyGrid 中查看公共属性以外的成员？[文档说“](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.aspx)*默认情况下*，SelectedObject的所有公共属性都将显示在 PropertyGrid中”。“默认情况下”似乎暗示在某些配置之后可以查看例如字段或非公共属性。

请注意，我实际上不想显示公共属性以外的任何内容，我只需要知道它支持什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:48:14.970

所以基本上你想要控制属性网格中显示的内容。是的，这是可能的。

一个对象可以通过实现一个接口来提供关于它自己的自定义信息`ICustomTypeDescriptor`。如果未实现，`TypeDescriptor`则属性网格将使用静态。

所以我们需要实现[ICustomTypeDescriptor](http://msdn.microsoft.com/en-us/library/system.componentmodel.icustomtypedescriptor%28v=vs.100%29.aspx)。

属性信息将由接口方法[GetProperties()](http://msdn.microsoft.com/en-us/library/13s3dz2h.aspx)返回。此方法返回一个 PropertyDescriptorCollection 类型的对象。

**编辑：**您应该查看 PropertyGrid.BrowsableAttributes 以获得更简单的解决方案。[以编程方式隐藏 PropertyGrid 中的字段](https://stackoverflow.com/questions/626803/programatically-hide-field-in-propertygrid)

一些有用的链接 -

[.NET 很重要：ICustomTypeDescriptor，第 1 部分](http://msdn.microsoft.com/en-us/magazine/cc163816.aspx)

[http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert](http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert)

# python - Matplotlib + Latex Rendering / twinx（）：辅助y轴上的字体错误？

> ID：11458146
> 
> 赞同：1
> 
> 时间：2012-07-12T18:22:02.957
> 
> 标签：python, matplotlib

我正在使用 matplotlib 生成带有乳胶渲染文本的图表。现在有这个棘手的问题，我似乎无法自己解决..

使用 twinx() 生成的辅助 y 轴显示错误的刻度标签和 ylabel 字体！我究竟做错了什么？这就是我所做的。

```
 from matplotlib import pyplot as plt
    from matplotlib import rc
    from matplotlib.figure import Figure               
    from matplotlib.axes import Axes    
    from matplotlib.lines import Line2D

    rc('font',**{'family':'serif','sans-serif':['Computer Modern Roman']})
    rc('text', usetex=True)

    fig = plt.figure(figsize = (4,4) )                                
    ax = Axes(fig, [.1,.1,.8,.8])  
    ax_ = ax.twinx()                            
    fig.add_axes(ax)

    fig.add_axes(ax_)       

    l = Line2D([0, 1],[0, 1], color='r')

    ax.set_ylabel(r'Label')
    ax_.set_ylabel(r'Label')

    ax.add_line( l )

    plt.show() 
```

正在使用的版本：matplotlib 0.99.1.1 tex.. 不知道；全部在 linux 上

ps：这样渲染文本、标题等效果很好，只是次要的y轴表现得相当糟糕！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:33:24.087

如果可能的话，最好的答案可能是更新您的 matplotlib 版本。如果随后您仍然遇到问题，至少这意味着您可以在 matplotlib github 站点 (https://github.com/matplotlib/matplotlib/issues/new) 上打开错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-08T14:41:09.733

我可能有点晚了，但还没有人写出一个好的答案。我遇到了同样的问题并通过在乳胶中编写刻度标签来解决它：

```
import matplotlib.pyplot as plt
labels = [r"$1.$", r"$1.5$", r"$2.$"]
ticks = [1., 1.5, 2.]
plt.set_xticks(ticks)
plt.set_xticklabels(labels) 
```

# mef - Windows Phone 8 的可移植类库是否支持 MEF？

> ID：11458147
> 
> 赞同：0
> 
> 时间：2012-07-12T18:22:03.640
> 
> 标签：mef, portable-class-library, windows-phone-8

到目前为止，[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391%28v=vs.110%29.aspx)不支持[MEF](http://mef.codeplex.com/)。由于 Windows Phone 8 使用与 Windows 8 相同的内核，这种情况会改变吗？有没有关于这个的官方信息我还没有找到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:36:38.533

我们在此处生成的 MEF 库可用于针对当前和未来平台（4.5、Metro、+Future）的便携式库：http: [//blogs.msdn.com/b/bclteam/archive/2012/05/30/mef-和-tpl-dataflow-nuget-packages-for-net-framework-4-5-rc.aspx](http://blogs.msdn.com/b/bclteam/archive/2012/05/30/mef-and-tpl-dataflow-nuget-packages-for-net-framework-4-5-rc.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T14:16:16.500

目前唯一能给出的答案是“关于Windows Phone 8上的MEF，官方还没有公布任何消息”。

或许，当适用于 Windows Phone 8 设备的 SDK 发布，或者新闻稿发表声明时，可以给出明确的答案。

# java - 切换选项卡 onNewIntent 导致 IllegalStateException

> ID：11458149
> 
> 赞同：7
> 
> 时间：2012-07-12T18:22:12.830
> 
> 标签：java, android, fragment, actionbarsherlock

如果我尝试在 onNewIntent 方法中切换导航选项卡，我的 FragmentActivity(singleTop) 会给我 IllegalStateException。

更具体地说，我的应用程序使用带有三个选项卡的 SherlockActionBar，当收到推送通知（并调用意图）时更新一个选项卡，如果应用程序暂停在另一个选项卡上，当我收到意图时（在 onNewIntent 中）我更改使用 bar.setSelectedNavigationItem() 将选项卡（以及片段）移到第三个选项卡，这导致了我的问题。如果应用程序在第三个选项卡上暂停，则不会发生异常。

代码：

```
@Override
    public void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        Bundle bundle = intent.getExtras();
        if (bundle != null) {
            bar.setSelectedNavigationItem(Utils.ORDER_STATUS_TAB_ID);
        } else {
        }
    } 
```

推送通知意图：

```
 Intent notificationIntent = new Intent(context,
            MainActivity.class);
    notificationIntent.putExtra("orderUpdate",
            new Gson().toJson(orderUpdate));
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
            | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
            notificationIntent, 0);

    notification.contentIntent = contentIntent; 
```

TabListener 方法（在堆栈跟踪中的第 56 行带有注释）

```
@Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft = activity.getSupportFragmentManager().beginTransaction();
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
        if (mFragment == null) {
            mFragment = Fragment
                    .instantiate(activity, mClass.getName(), mArgs);
            ft.add(android.R.id.content, mFragment, tag);
            ft.commit();
        } else {
            ft.attach(mFragment);
            ft.commit(); // line 56
        } 
```

详细异常：

```
07-12 20:06:40.959: E/AndroidRuntime(8639): java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
07-12 20:06:40.959: E/AndroidRuntime(8639):     at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1299)
07-12 20:06:40.959: E/AndroidRuntime(8639):     at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1310)
07-12 20:06:40.959: E/AndroidRuntime(8639):     at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:541)
07-12 20:06:40.959: E/AndroidRuntime(8639):     at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:525)
07-12 20:06:40.959: E/AndroidRuntime(8639):     at com.wizche.ui.MyTabListener.onTabSelected(MyTabListener.java:56)
07-12 20:06:40.959: E/AndroidRuntime(8639):     at com.actionbarsherlock.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:526)
07-12 20:06:40.959: E/AndroidRuntime(8639):     at com.actionbarsherlock.internal.app.ActionBarImpl.setSelectedNavigationItem(ActionBarImpl.java:317)
07-12 20:06:40.959: E/AndroidRuntime(8639):     at com.wizche.MainActivity.onNewIntent(MainActivity.java:205) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T19:04:29.767

我找到了解决这个问题的方法，反正有点难看。我只是在 onResume 而不是 onNewIntent 中切换选项卡：

```
 @Override
    public void onResume() {
        super.onResume();
        if(switchToTab){
            bar.setSelectedNavigationItem(Utils.ORDER_STATUS_TAB_ID);
            switchToTab = false;
        }
     } 
```

在 onNewIntent() 中，我只设置了 switchToTab = true。我希望有人会提出更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:25:34.233

我认为你不应该在 onTabSelected 方法中调用 commit。它已经由框架完成。

哦，使用你收到的交易，不要创建一个新的。

```
 public void onTabSelected(Tab tab, FragmentTransaction ft) {
    //remove the first line
    //ft = activity.getSupportFragmentManager().beginTransaction();
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    if (mFragment == null) {
        mFragment = Fragment
                .instantiate(activity, mClass.getName(), mArgs);
        ft.add(android.R.id.content, mFragment, tag);
        //not sure about this one
        ft.commit();
    } else {
        ft.attach(mFragment);
        //not sure about this one neither
        ft.commit(); // line 56
    } 
```

# extjs - extjs dom.value

> ID：11458150
> 
> 赞同：1
> 
> 时间：2012-07-12T18:22:15.970
> 
> 标签：extjs

```
setValue : function(text) {
    Ext.get('id').dom.value = text;
    console.log(Ext.get('id').dom.value);
} 
```

这段代码有时会停止工作。我的输入是 UI 交互的结果。设置文本几次后，值不会在视觉上更新。console.log() 总是返回正确的结果。

任何想法如何在视觉上刷新元素或可能导致问题的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-13T11:32:30.670

ext.get('id').setValue('text');

[注释] Ext.get() 返回一个 Ext.Element，它有一个 set 方法来设置 HTMLElement 的各种属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T12:46:04.587

DOM操作不是一个好方法，总是尝试在框架级别解决问题。尝试如下

`Ext.getComponet('id').setValue(text);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:11:37.420

如果您的表单很大，则不建议使用 Ext.get，因为它必须通过所有对象来查找您的 ID。

相反，您可以使用如下代码

```
nameTextBox= new Ext.form.TextField({
                xtype: "textfield",
                fieldLabel: 'Name ',
                id: 'txtName',
                name: Name',
                allowBlank: false
            }) 
```

然后使用你的 set 功能

```
setValue : function(text) { 
    nameTextBox.value = text; 
    console.log(nameTextBox.value); 
} 
```

# mysql - MySQL - 限制（强制）为任何查询返回的行数

> ID：11458157
> 
> 赞同：1
> 
> 时间：2012-07-12T18:22:30.670
> 
> 标签：mysql

我对 mysql 有特殊的安全需求。我需要强制限制查询返回的行数，如果返回的行将结束，例如一百万行，则会发出错误。这是设置 -

**需要**- 数据有数以百万计的行，我们不希望客户端运行服务器或进行完整提取（他们永远不需要所有行，只是聚合）这个想法是，如果他们需要它，他们遇到了错误或障碍，并来找我们解释为什么他们需要通过查询拉出这么多行的原因。

**系统**- 客户可以使用任何查询工具，因此我们无法控制生成什么查询。因此，我们不能使用 Limit x，这似乎是到处建议的解决方案。

我曾尝试寻找解决方案，目前看来唯一的方法是在应用程序级别（我们不拥有）。

有什么办法可以做到这一点？

环境

1-我们需要启用 SSL。

2- MySQL 5.5

谢谢！

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:38:54.993

似乎您可以接近 MySQL Proxy。

[https://launchpad.net/mysql-proxy](https://launchpad.net/mysql-proxy)

有关操作结果，请参阅此页面。不确定它是否进行缓冲或非缓冲读取，或者您是否可以取消读取结果...

[http://dev.mysql.com/doc/refman/5.1/en/mysql-proxy-scripting-read-query-result.html](http://dev.mysql.com/doc/refman/5.1/en/mysql-proxy-scripting-read-query-result.html)

它是开源的，因此如果需要，您也可以聘请某人对其进行调整。

可能还有其他方法可以限制数据库服务器的过载。查看此链接以获取更多信息：

[MySQL - 我可以限制查询运行的最长时间吗？](https://stackoverflow.com/questions/4794747/mysql-can-i-limit-the-maximum-time-allowed-for-a-query-to-run)

# .net - 如果安装了 .Net 4.5，如何保持 .Net 4.0 的行为？

> ID：11458159
> 
> 赞同：25
> 
> 时间：2012-07-12T18:22:40.033
> 
> 标签：.net, .net-4.5

我们有一个面向 .Net Framework 4.0 的 Windows 窗体应用程序。安装 .Net Framework 4.5 后，应用程序开始崩溃。我们将不得不调查崩溃，我们很可能不得不在我们这边解决问题。但是，在我们准备好使用 .Net 4.5 之前，我们可以打开一个设置来保持旧的行为吗？

* * *

**2012 年 7 月 12 日更新：** 我们发现导致应用程序崩溃的重大更改：给定 System.Threading.Timer，当使用已关闭的句柄调用 Dispose(WaitHandle) 时，计时器会尝试向 WaitHandle 发出信号引发异常。Timer 的 .Net 4.0 实现可以容忍这种情况，但 4.5 不能。

我们这边有一个错误；我们没有任何充分的理由给它一个封闭的句柄，所以我们会修复它......直到我们发现另一个错误......

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-12T18:26:11.580

> 但是，在我们准备好使用 .Net 4.5 之前，我们可以打开一个设置来保持旧的行为吗？

不。.NET 4.5 是 .NET 4 的就地替代品。安装它时，您实际上是在新框架上运行。

一般来说，它应该是完全向后兼容的，但有[一些重大变化](http://msdn.microsoft.com/en-us/library/hh367887%28v=vs.110%29.aspx)。

不幸的是，这意味着如果您想支持在安装了 4.5 和未安装 4.5 的机器上运行，您（和其他所有人）将需要测试和修复两个框架上的问题。幸运的是，重大更改通常都是不寻常的边缘情况，因此在大多数情况下不太可能影响大多数用户。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T00:40:56.010

我通过电子邮件与原始问题海报-“Sly”进行了讨论。感谢 Sly 帮助调查。事实证明，.NET4 和 .NET4.5 对于 Dispose(waithandle) API 的行为方式相同。所以这个问题可能与 .NET4.5 无关。

```
 static void Main(string[] args)
    {
        System.Threading.Timer timer = new System.Threading.Timer(new System.Threading.TimerCallback(blah));
        System.Threading.EventWaitHandle eventWaitHandle = new System.Threading.EventWaitHandle(true, System.Threading.EventResetMode.ManualReset);

        eventWaitHandle.Dispose();
        System.Threading.Thread.Sleep(2000);
        timer.Dispose(eventWaitHandle);
    } 

    private static void blah(object state)
    {
        Console.WriteLine(40);
    } 
```

# ms-access - Access 2010 允许多个用户/实施组安全性

> ID：11458160
> 
> 赞同：5
> 
> 时间：2012-07-12T18:22:46.193
> 
> 标签：ms-access, ms-access-2010, database-security

我正在创建一个 Access 2010 数据库，并希望在并发性和安全性方面得到一些澄清。我想要的是在启动应用程序时只显示一个菜单表单，其中包含几个按钮，包括登录按钮。大多数按钮将被禁用，直到用户根据他们的权限组登录之后；查看者（默认）、工作者、编辑者、管理员。

此外，管理员应该是唯一能够看到访问数据库的人，而其他人只能看到表单。

我只是在测试默认的并发实现，但将我的数据库保存到共享网络并让我自己和同事尝试访问它。发现如果一个人访问了数据库，它就会将它与其他人锁定，如果我们俩同时尝试，它就会变成只读的。

所以我只是在寻找有关如何开始的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:24:51.473

对于 Access 数据库，所有用户必须至少具有数据库所在文件夹的读取、写入和修改权限。这是因为 MS Access 创建了一个锁定文件，如果第二个用户没有修改锁定文件的权限，则无法访问数据库。删除权限也可能很有用，当他们是最后一个人时删除锁定文件。

# winapi - 如何使用 C++ 获取 Windows 用户配置文件路径的父文件夹

> ID：11458162
> 
> 赞同：0
> 
> 时间：2012-07-12T18:23:19.277
> 
> 标签：winapi, visual-c++

我正在尝试获取 Windows 用户配置文件路径的父文件夹。但是我找不到任何“参数”来使用它`SHGetSpecialFolderPath`，到目前为止我正在使用`CSIDL_PROFILE`.

预期路径：

Win7 - “C:\用户”

Windows XP - “C:\文档和设置”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:28:10.937

除了向用户显示路径之外的大多数目的，它应该可以附加`"\\.."`（或者`"..\\"`如果它以反斜杠结尾）到有问题的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:32:28.463

~~使用 shell 库 6.0 版，您可以获得`CSIDL_PROFILES`（不要与 混淆`CSIDL_PROFILE`），它可以满足您的需求。~~此值已被删除（请参见[此处](http://msdn.microsoft.com/en-us/library/bb762494.aspx)），您必须使用自己的解决方法。

在任何先前的版本中，您都必须实现自己的解决方法，例如寻找可能的路径分隔符，即在 Windows 上，`\`并`/`在最后一个处终止字符串。一个简单的版本可以使用`strrchr`(or `wcsrchr`) 来定位反斜杠，然后假设字符串是可写的，在该位置终止字符串。

例子：

```
char* path;
// Retrieve the path at this point, e.g. "C:\\Users\\username"
char* lastSlash = strrchr(path, '\\');
if(!lastSlash)
  lastSlash = strrchr(path, '/');
if(lastSlash)
  *lastSlash = 0; 
```

* * *

`GetProfilesDirectory`或者您在对此答案的评论中指出的当然（这让我无法理解）。

# c++ - 带有来自源文件的变量的头文件中的 Typedef

> ID：11458166
> 
> 赞同：0
> 
> 时间：2012-07-12T18:23:29.693
> 
> 标签：c++

我有一个头文件，其中存储了各种 typedef。问题是我需要将源文件中的变量传递给这些类型定义之一。

我试过这个：

```
extern const unsigned int number;
typedef Storage<double,number> store; 
```

在头文件中。

然后在源文件中，*number*变量在执行时被实例化：

```
const unsigned int number( conf->ReadNumber() ); 
```

但是，它不起作用。

这件事可能吗？任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:33:10.733

`Storage<double,number>`等待`number`成为一个常量表达式：它的值必须在编译时是可计算的。

# mongodb - yiimongodb 套件。修改嵌入文档

> ID：11458170
> 
> 赞同：0
> 
> 时间：2012-07-12T18:23:41.617
> 
> 标签：mongodb, yii, yii-extensions

我正在使用 yiimongodbsuite 扩展，并且我的模型中有一个嵌入式文档用户，我在其中保存了一些关于用户的信息 - userId、userName、isAdmin 等。现在我想修改我的用户嵌入式文档中的一些字段。我尝试按照此处编写的方式进行操作-http: [//canni.github.com/YiiMongoDbSuite/xhtml/advanced.partial-batch-update.html](http://canni.github.com/YiiMongoDbSuite/xhtml/advanced.partial-batch-update.html)但它只能修改模型字段，而不能修改嵌入式文档中的字段。如何修改嵌入文档中的字段？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:44:14.667

您引用的说明是针对多个文档的部分更新。

您真正需要做的只是更新一个[简单的嵌入文档](http://canni.github.com/YiiMongoDbSuite/xhtml/basic.simple-embedded-document.html)。

`mydoc`嵌入式示例`user`：

```
$mydoc = new Mydoc();

// Updated embedded User document
$mydoc->user->userName = 'Fred';
$mydoc->user->isAdmin = 1;

$mydoc->save(); 
```

# php - Codeigniter 不传递 URI 段

> ID：11458171
> 
> 赞同：1
> 
> 时间：2012-07-12T18:23:44.627
> 
> 标签：php, codeigniter

我正在为一个项目使用codeigniter。

URL 分段如下：

example.com/admin/events

example.com/admin/events/add

我有一个名为 Admin 的类，它有一个名为 events 的函数

```
function events($data)
{
  echo $data;
} 
```

这将为事件/添加页面回显“添加”，但是当我尝试单独访问事件页面时出现错误

```
Missing argument 1 for Admin::events() 
```

我认为我可以创建两个函数，一个传递一个变量，一个没有传递，但显然 php 不允许这样做。

```
Fatal error: Cannot redeclare Admin::events() 
```

我怎样才能使这项工作？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:25:11.347

试试看

```
function events($data = NULL)
{
  echo $data;
} 
```

# python - python中的递归函数

> ID：11458172
> 
> 赞同：-3
> 
> 时间：2012-07-12T18:23:45.450
> 
> 标签：python, function

我有一个文件

```
A      1  N   MET P   1      27.340  24.430   2.614  
A      2  HT1 MET P   1      26.953  23.623   2.168  
A      3  CB  MET P   1      27.740  24.175   3.494  
A      4  H   MET P   1      28.039  24.841   2.028  
A      5  CA  MET P   1      26.266  25.413   2.842  
A      6  HA  MET P   1      25.880  25.742   1.885  
A      7  C   MET P   1      25.112  24.880   3.649  
A      8  HB1 MET P   1      24.236  25.536   3.434 
...   ... ... ... .  ...     .....    .....   ..... 
```

作为代码的一部分，我将获取文件第二列的值并取该值，我需要减小它的值，直到第三列字符串应该是元素之一`list=['C','N','O']`并附加 6、7、8 的值一旦条件得到满足，列表和循环的列值就会中断（因为第三列中的字符串是递归的）我已经尝试过这种方式：注意：`atom_no`是第二列值和 rl1-readlines

```
dec=int(atom_no)-1
for i in range(0,1231):
       dec=dec-1
       list_coor1=[]
       line1=rl1[i]
       line1=line1.split()
       if len(list_coor1)==0:
          if line1[1]==str(dec):
             for atom in list:
                  if line1[2]==str(atom):
                     for p in range(6,9):
                        list_coor1.append(line1[p])
                        print list_coor1 
```

我无法成功我确实认为减小值是有问题的，即，`dec=dec-1` 因为我打算通过增加 的值来做同样的事情`atom_no`，所以我试图定义递归函数但无法做到。

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:56:26.977

如果我正确理解您的问题，您将尝试在文件中找到第三列中包含 C、N 或 O 的最后一行，并返回该行中第 7 列到第 9 列的值。

如果您使用 Python 内置的功能，例如迭代和成员检查，这很简单。您的代码使用额外的 if 语句和循环使其变得比必要的复杂得多。

```
def findLastMatch(lines, startNum, elements):
    for i in range(startNum-1, -1, -1): # iterate backwards from startNum-1
        values = lines[i].split(); # split up the line into columns
        if values[2] in elements:  # does column 3 matches one of the elements?
            return values[-3:]     # if so, return the last three columns
    return None # if we got here, there was no match 
```

如果您需要进行错误检查（因为您的数据文件可能有错误的行），它可能会变得更复杂一些，但可能不会太多。只有一个循环，因此给定行的任何问题都可以通过调用`continue`转到下一行来传递。如果元素列表的格式不正确（包含字符串），您可以在调用代码中或在此函数的顶部（例如`elements = [str(e) for e in elements]`）对其进行预处理。

# asp.net-mvc-3 - EditorTemplate + 模型未在 POST 上返回

> ID：11458176
> 
> 赞同：0
> 
> 时间：2012-07-12T18:23:58.403
> 
> 标签：asp.net-mvc-3

我似乎无法弄清楚这一点，这让我发疯！

本质上，我有一个需要显示的行列表，每行一个下拉列表。

我有一个视图模型：

```
public class UserMembershipViewModel:BaseViewModel
{
    public List<ProgramMembership> ProgramMembership { get; set; }
} 
```

在我的父视图中，您可以看到我正在使用位于“/Views/Shared/EditorTemplates/ProgramMembership.cshtml”中的编辑器模板：

```
@using AcnCS.Model
@model AcnCS.Model.ViewModels.User.UserMembershipViewModel 
@{
    ViewBag.PageHeader = "Membership for " + Model.User.FullName;
    ViewBag.PageTitle = "Membership for " + @Model.User.FullName;
    ViewBag.HideNav = true;
}

    @if (Model.ProgramMembership != null)
    {
        <div class="row-fluid">
            <div class="span12">
                <div id="permissions">
                    @using (Html.BeginForm())
                    {
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <td>Program</td>
                                    <td>Effective Membership?</td>
                                    <td>Permission Type</td>
                                </tr>
                            </thead>
                             @Html.EditorFor(m => Model.ProgramMembership, "ProgramMembership")

                        </table>
                        <input type="submit" class="btn btn-primary" value="Save Changes"/>
                    }

                </div>

            </div>
        </div>
    } 
```

我的编辑器模板 (ProgramMembership.cshtml) 是：

```
@using AcnCS.Model
@model List<AcnCS.Model.ProgramMembership>

@foreach(ProgramMembership membership in Model)
{
    <tr>
        <td>@membership.ProgramName</td>
        <td>
            @if (membership.IsMember)
            {
                <span class="label label-success">@membership.IsMember</span>
            }
            else
            {
                @membership.IsMember
            }
        </td>
        <td>@Html.DropDownListFor(x => membership.PermissionType, membership.PermissionTypes)</td>
    </tr>
} 
```

一切都正常显示，但是当我提交时，我的模型对象为空，甚至模型中的 ProgramMembership 属性也为空：

```
 [HttpPost]
    public ActionResult Membership(UserMembershipViewModel model)
    {

        // model IS NULL!!

        return View(model);
    } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:30:37.897

我会将属性名称复数，因为它是一个集合，以提高可读性

```
public class UserMembershipViewModel:BaseViewModel
{
    public List<ProgramMembership> ProgramMemberships { get; set; }
} 
```

并且您的 EditorTemplate 文件中不需要循环

```
@model AcnCS.Model.ProgramMembership
<tr>
    <td>@membership.ProgramName</td>
    <td>
      @if (membership.IsMember)
      {
         <span class="label label-success">@membership.IsMember</span>
      }
      else
      {
         @membership.IsMember
      }
    </td>
    <td>@Html.DropDownListFor(x => membership.PermissionType, membership.PermissionTypes)</td>
</tr> 
```

在您的主视图中，像这样调用您的 EditorTemplate

```
@Html.EditorFor(m=>m.ProgramMemberships) 
```

# django - 类型错误：字符映射必须返回整数、无或 unicode

> ID：11458179
> 
> 赞同：2
> 
> 时间：2012-07-12T18:24:12.237
> 
> 标签：django, oauth-2.0

我正在尝试从linkedin 获取信息，但我不断收到以下错误？

我已经四处搜索，但我看到的修复仅适用于那些在使用 djangopiston 时遇到错误的人。谁能帮我解决这个问题？

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/jobs/1/match/

Django Version: 1.3.1
Python Version: 2.7.2
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.flatpages',
 'django.contrib.admin',
 'django.contrib.staticfiles',
 'compress',
 'south',
 'filer',
 'easy_thumbnails',
 'registration',
 'socialregistration',
 'socialregistration.contrib.facebook',
 'socialregistration.contrib.twitter',
 'socialregistration.contrib.linkedin',
 'socialregistration.contrib.openid',
 'privatebeta',
 'api',
 'profiles',
 'jobs',
 'misc']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.middleware.csrf.CsrfResponseMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'socialregistration.contrib.facebook.middleware.FacebookMiddleware',
 'socialregistration.contrib.linkedin.middleware.LinkedInMiddleware',
 'misc.middleware.SubdomainMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware')

    Traceback:
    File "/home/arlus/jobmatch/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
    File "/home/arlus/jobmatch/local/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  93\.                     response = view_func(request, *args, **kwargs)
    File "/home/arlus/jobmatch/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py" in _wrapped_view
  23\.                 return view_func(request, *args, **kwargs)
    File "jobs/views.py" in match
  60\.         matches = linkedin_api.get_connections(fields=['headline', 'summary',]).encode('utf-8')
    File "../lib/linkedin/linkedin.py" in get_connections
  291\.             response = self._do_normal_query(raw_url)
    File "../lib/linkedin/linkedin.py" in _do_normal_query
  757\.                                     signature_dict, self._access_token_secret, method, update=False)
    File "../lib/linkedin/linkedin.py" in _calc_signature
  789\.         hashed = hmac.new(self._calc_key(token_secret), signature_base_string, sha)
File "/usr/lib/python2.7/hmac.py" in new
  133\.     return HMAC(key, msg, digestmod)
File "/usr/lib/python2.7/hmac.py" in __init__
  72\.         self.outer.update(key.translate(trans_5C))

    Exception Type: TypeError at /jobs/1/match/
    Exception Value: character mapping must return integer, None or unicode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:36:09.370

很难说，但是在某个地方，无论是在 urls.py 和 views.py 中，你都应该检查传递的对象的类型。它可能没有预期值。

例如 /jobs/1/match，1 可能预期为 int，但结果为 str。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-28T12:31:55.223

可能是因为文本是作为 unicode 输入的，试试`key.encode.('UTF-8')`

# java - 创建和读取一次性创建的文件

> ID：11458181
> 
> 赞同：0
> 
> 时间：2012-07-12T18:24:17.667
> 
> 标签：java, android

我想将字符串列表存储在文件中。

我只需要创建一次，然后我将以编程方式对其进行读写。

我的问题是我应该在文件系统的哪个位置（手动）创建文件，以便它最适合读写？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:30:02.000

您可以在应用程序的目录中创建文件，这样除了您的应用程序之外没有人可以访问它

```
getApplicationContext().getFilesDir().getAbsolutePath(); 
```

或在 SD 卡上

```
File externalStorage = Environment.getExternalStorageDirectory(); 
```

如果您希望其他人访问它，或者如果您的文件非常大

如果您打算*手动*创建文件，那么我认为 SD 卡是唯一的选择，除非您有根手机或使用模拟器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:40:26.757

```
if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) 
    {
         //SDcard is there
         File f=new File("/sdcard/YOURFILE.txt");
         if (!f.exists())
         {
             //File created only for first time
             f.createNewFile();
           //create inputstream and write it to your file
           OutputStream out=new FileOutputStream(f);
           byte buf[]=new byte[1024];
           int len;
           while((len=inputStream.read(buf))>0)
           out.write(buf,0,len);
           out.close();
           inputStream.close();
           System.out.println("\nData Written");
         }
         else {  //  read/ write SECOND TIME  }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:31:21.843

这真的取决于。

在 SDCard 上创建文件的问题是需要特殊权限才能访问它。如果该应用程序仅供您自己使用，那就太好了。如果您想通过 Google ~~Market~~ Play（或现在所谓的任何名称）分发它，请知道有些人（包括我自己）倾向于查看权限并问“为什么执行 X 的应用需要获得执行 Y 的权限？ "，有时会因此而无法安装该应用程序。

如果手动部分由应用程序的用户完成，请务必将其存储在 sdcard 上。这是标准的非 root 用户甚至可以访问的唯一地方。

然而，一般来说，存储数据更好的地方是 /data/data/packagename。有关详细信息，请参阅 Android 的[数据存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)。

沙查尔

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T18:30:50.487

在assets文件夹中添加文件，然后重新安装后就清楚了

# internet-explorer - 在 ie9 中没有圆角，但在其他浏览器中有效

> ID：11458182
> 
> 赞同：0
> 
> 时间：2012-07-12T18:24:28.727
> 
> 标签：internet-explorer, css

下面是我使用 css 将标题的顶部两个角圆角的代码。IE 快把我逼疯了。我的页面在所有其他浏览器上看起来都很好。我以为IE9支持弯角

```
<style type="text/css">
#header {
    height: 70px;
    font-size: 2em;
    color: #fff;
    padding: 40px 0 0 40px;
    background: #0B3A68 no-repeat 15px 11px;
    position: relative;
    font-style: italic;
    font-family: Arial;

    border-top-left-radius: 40px;
    border-top-right-radius: 40px;
}
</style>

<div id ="header">
    test
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:29:08.867

尝试使用边界生成器，它可能会有所帮助：

[http://border-radius.com/](http://border-radius.com/)

# wordpress - WordPress主题主页上的URL重定向

> ID：11458186
> 
> 赞同：1
> 
> 时间：2012-07-12T18:24:40.987
> 
> 标签：wordpress, url-redirection

我正在使用特定的 wordpress 主题（冥王星）来制作网站。当我访问我的域 - [www.tastersclubwhiskeyofthemonth.com](http://www.tastersclubwhiskeyofthemonth.com)时，主页不会显示任何内容，直到您点击其中一个菜单项。

如何让我的主页默认为特定菜单项@www.tastersclubwhiskeyofthemonth.com/ **#whiskey-of-the-month**

我尝试使用典型的 HTML 重定向，但它不适用于我的网站 - 可能是因为我所有的 url 在 .com 之后都有 #，或者可能是因为它是一个 wordpress 网站？： `<meta http-equiv="REFRESH" content="0;url=http://www.tastersclubwhiskeyofthemonth.com/#whiskey-of-the-month">`但它不起作用。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T05:28:36.550

Create a htaccess mod rewrite rule. Add this to your htaccess file

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^something\.com
RewriteRule (.*) http://.something.com/#something2 [R=301,L] 
```

# binding - JBoss 新手无法将应用程序加载到自定义端口

> ID：11458187
> 
> 赞同：0
> 
> 时间：2012-07-12T18:24:41.740
> 
> 标签：binding, jboss, ports

提前感谢您的耐心等待。我是最近“转换”到 JBoss 的人，我需要维护一个应用程序，只要我们不碰它，它就可以正常工作。然而，使用 4.2.3GA 版本将应用程序从 Solaris 移植到 Linux Fedora 的任务已经下来。

我正在使用 jboss-port-bindings.xml 来指定我想要使用的端口，但是当我启动 JBoss 时，它会加载到标准端口 8080 而不是我在文件中指定的 40029。我已经对配置进行了三重检查，它在 Linux 机器上的设置与在 Solaris 机器上的设置方式完全相同——所有必需的文件都在它们应该在的位置，等等。

有人知道为什么我不能使用指定的端口吗？如果您需要比我提供的更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:56:55.013

我们发现了问题。我们在 server/default/conf 文件夹中的 jboss-service.xml 文件是正确的，但是我们还需要将相同的文件添加到 server/ *appname* /config 文件中，其中 appname 是我们的应用程序的名称。这告诉应用程序去哪里寻找 jboss-port-bindings.xml 文件，现在每个人都很高兴。

不知道为什么我们不必在 Solaris 下进行该配置，但无论如何，这解决了问题。感谢那些看过这个问题的人。粉笔这个经验。

# java - 静态声明和非静态声明的区别

> ID：11458189
> 
> 赞同：0
> 
> 时间：2012-07-12T18:24:48.400
> 
> 标签：java

静态变量：是类变量，它们不是为类的每个对象单独创建的。
实例变量：也是类变量，但分别为每个对象创建。
以上定义仅供参考。

请解释为什么我在这个类声明中出错。我知道这只是因为我没有初始化 x。

```
class non_static{
public static void main(String args[])
{
int x;
System.out.println(x);

}
} 
```

但是这个类声明完全没问题。

```
class static_example{
static int x;
public static void main(String args[])
{
System.out.println(x);
}

} 
```

这个程序的输出是0。

请解释一下为什么静态成员使用默认值初始化，而局部变量则没有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:26:34.683

它与静态声明与实例声明无关。是局部声明，没有默认值，未初始化使用时会报错。

```
public class Example {
    private static int stattic;
    private int instancee;

    public void someMethod() {
        System.out.println("I am static and 0: " + stattic);
        System.out.println("I am not static and 0: " + instancee);

        int locall;

        System.out.println("I am causing an error because I have not been initialized: " + locall);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:35:47.503

如果你想知道为什么 Java 会这样指定它的背景，它必须与静态代码分析的限制有关。从堆栈分配的内存（这是本地变量所在的位置）可以由编译器肯定地确认，以便在使用前进行初始化。堆分配存储（静态变量、实例变量）并非如此。这就是为什么 JLS 要求实现在公开指向它的指针之前始终将任何堆存储清零的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:30:53.187

局部变量必须始终使用一个值进行初始化。对于非局部变量（即实例或静态变量），默认值定义为相应类型的空值（`null`、零或`false`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:31:24.060

在java中，**实例变量**（即类变量）被**初始化为它们的默认值。** 但是**局部变量**（即方法变量）**不能在没有初始化的情况下使用......**

```
class static_example{
static int x;
public static void main(String args[])
{
System.out.println(x);
}

} 
```

在你上面的例子中，x 是在 Class 范围内声明的......所以它已经被初始化为其默认值 0，所以它没有给出任何错误..

# java - Java - 将参数设置为既扩展一个对象又实现接口的对象

> ID：11458190
> 
> 赞同：3
> 
> 时间：2012-07-12T18:24:51.147
> 
> 标签：java, function, parameters, extend, implements

我想知道是否可以将方法的参数设置为对象，它必须是扩展一个类并实现另一个类。这是一个示例：假设我有一个名为 ClassA 的类和一个名为 MyInterface 的接口。

```
public class ClassA {
    /* code */
}    

public interface MyInterface {
    /* code */
} 
```

假设在其他地方有一个名为 ClassB 的类，它既扩展了 ClassA 又实现了 MyInterface。

```
public class ClassB extends ClassA implements MyInterface {
    /* code */
} 
```

我也可以有一个 ClassC，它也扩展了 ClassA 并实现了 MyInterface：

```
public class ClassC extends ClassA implements MyInterface {
    /* code */
} 
```

我的问题是这样的：

假设我有一个名为 method1 的方法，并且在 method1 中我想要一个接受 Object 的参数。假设我希望这个 Object 是 ClassA 的子类，或者实际上是 ClassA 本身。这很容易做到：

```
 public void method1(ClassA parameter) {

 } 
```

假设我还想要一个method2，并且在method2中我想要一个接受任何实现MyInterface的参数。同样，这很容易：

```
 public void method2(MyInterface parameter) {

 } 
```

但是，如果我想要一个方法 3，并且我想要一个参数，它只接受 ClassA 的子类或 ClassA 本身的对象，并且实现 MyInterface，因此将接受 ClassB 和 ClassC，但不接受任何只扩展 ClassA 的类，或者只实现 MyInterface，或者都不实现。喜欢：

```
public void method3 ([Something that extends ClassA implements MyInterface] parameter) {
  /* code */
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-12T18:31:09.893

您可以执行以下操作：

```
public <A extends ClassA & MyInterface> void method3(A parameter) { ... } 
```

但我认为这不是一个好主意——如果你有一个可以扩展`ClassA`和实现的对象的概念`MyInterface`，那么最好创建一个单独的类或接口来表示该概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:29:44.987

根据您的描述，您似乎需要另一种类型的对象。一个既扩展 ClassA*又*实现 MyInterface 的接口。也许，甚至，这是一个抽象类。

然后我将使用这个新对象作为方法 3 的参数类型。

# ios - 模拟器上的 iOS SQLite Mach-O 错误，而不是 iPhone (4)

> ID：11458192
> 
> 赞同：1
> 
> 时间：2012-07-12T18:24:56.920
> 
> 标签：ios, compiler-errors

尝试在模拟器中编译我的应用程序时遇到一堆链接器错误，但在将其编译到我的手机时却没有。有人可以看看他们并猜测发生了什么吗？

我的应用程序中有 libsqlite3.dylib。

ld：警告：忽略文件/Users/monkeyButt/Desktop/Development/XCodeApps/knowInk Publishing - Medicare Providers Locator/libsqlite3.dylib，文件中缺少所需的架构 i386 架构 i386 的未定义符号：“_sqlite3_open”，引用自：-[SQLiteController initSQLiteDB] in SQLiteController.o -[SQLiteController getData] in SQLiteController.o "_sqlite3_exec"，引用自： -[SQLiteController initSQLiteDB] in SQLiteController.o -[SQLiteController insertData:::] in SQLiteController.o "_sqlite3_close"，引用自： -SQLiteController.o 中的[SQLiteController initSQLiteDB] -SQLiteController.o 中的[SQLiteController getData]“_sqlite3_last_insert_rowid”，引用自：-SQLiteController.o 中的 [SQLiteController insertData:::]_sqlite3_errmsg"，引用自：-[SQLiteController insertData:::] in SQLiteController.o "_sqlite3_prepare_v2"，引用自：-[SQLiteController getData] in SQLiteController.o "_sqlite3_step"，引用自：-[SQLiteController getData] in SQLiteController.o “_sqlite3_column_int”，引用自：SQLiteController.o 中的-[SQLiteController getData] “_sqlite3_column_text”，引用自：SQLiteController.o 中的-[SQLiteController getData] ld：未找到体系结构 i386 clang 的符号：错误：链接器命令失败退出代码 1（使用 -v 查看调用）o "_sqlite3_step"，引用自：-[SQLiteController getData] in SQLiteController.o "_sqlite3_column_int"，引用自：-[SQLiteController getData] in SQLiteController.o "_sqlite3_column_text"，引用自：-[SQLiteController getData] in SQLiteController.o ld ：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）o "_sqlite3_step"，引用自：-[SQLiteController getData] in SQLiteController.o "_sqlite3_column_int"，引用自：-[SQLiteController getData] in SQLiteController.o "_sqlite3_column_text"，引用自：-[SQLiteController getData] in SQLiteController.o ld ：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）链接器命令失败，退出代码为 1（使用 -v 查看调用）链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T22:38:21.747

我有一个类似的错误（虽然没有在 iOS 设备上尝试过），我添加了 libsqlite3.0.dylib 并让它在模拟器上工作。希望这可以帮助！

# java - android编程在退出时停止媒体播放器流？

> ID：11458193
> 
> 赞同：1
> 
> 时间：2012-07-12T18:24:56.823
> 
> 标签：java, android, c++, eclipse

所以我有这段代码来流式传输 mp3，现在我想知道当有人使用后退按钮/主页按钮退出应用程序时如何让音乐停止。即使我退出应用程序并关闭它，音乐仍在后台播放，我无法让它停止。

```
package com.hrupin.streamingmedia;

import android.app.Activity;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnBufferingUpdateListener;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.os.Handler;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.SeekBar;

import com.hrupin.media.R;

public class StreamingMp3Player extends Activity implements OnClickListener, OnTouchListener, OnCompletionListener, OnBufferingUpdateListener{

    private ImageButton buttonPlayPause;
    private SeekBar seekBarProgress;
    public EditText editTextSongURL;

    private MediaPlayer mediaPlayer;
    private int mediaFileLengthInMilliseconds; // this value contains the song duration in milliseconds. Look at getDuration() method in MediaPlayer class

    private final Handler handler = new Handler();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        initView();
    }

    /** This method initialise all the views in project*/
    private void initView() {
        buttonPlayPause = (ImageButton)findViewById(R.id.ButtonTestPlayPause);
        buttonPlayPause.setOnClickListener(this);

        seekBarProgress = (SeekBar)findViewById(R.id.SeekBarTestPlay);  
        seekBarProgress.setMax(99); // It means 100% .0-99
        seekBarProgress.setOnTouchListener(this);
        //editTextSongURL = (EditText)findViewById(R.id.EditTextSongURL);
        //editTextSongURL.setText(R.string.testsong_20_sec);

        mediaPlayer = new MediaPlayer();
        mediaPlayer.setOnBufferingUpdateListener(this);
        mediaPlayer.setOnCompletionListener(this);
    }

    /** Method which updates the SeekBar primary progress by current song playing position*/
    private void primarySeekBarProgressUpdater() {
        seekBarProgress.setProgress((int)(((float)mediaPlayer.getCurrentPosition()/mediaFileLengthInMilliseconds)*100)); // This math construction give a percentage of "was playing"/"song length"
        if (mediaPlayer.isPlaying()) {
            Runnable notification = new Runnable() {
                public void run() {
                    primarySeekBarProgressUpdater();
                }
            };
            handler.postDelayed(notification,1000);
        }
    }

    @Override
    public void onClick(View v) {
        if(v.getId() == R.id.ButtonTestPlayPause){
             /** ImageButton onClick event handler. Method which start/pause mediaplayer playing */
            try {
                mediaPlayer.setDataSource("http://www.metalgeardroid.com/music/OST.mp3"); // setup song from http://www.hrupin.com/wp-content/uploads/mp3/testsong_20_sec.mp3 URL to mediaplayer data source
                mediaPlayer.prepare(); // you must call this method after setup the datasource in setDataSource method. After calling prepare() the instance of MediaPlayer starts load data from URL to internal buffer. 
            } catch (Exception e) {
                e.printStackTrace();
            }

            mediaFileLengthInMilliseconds = mediaPlayer.getDuration(); // gets the song length in milliseconds from URL

            if(!mediaPlayer.isPlaying()){
                mediaPlayer.start();
                buttonPlayPause.setImageResource(R.drawable.button_pause);
            }else {
                mediaPlayer.pause();
                buttonPlayPause.setImageResource(R.drawable.button_play);
            }

            primarySeekBarProgressUpdater();
        }
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(v.getId() == R.id.SeekBarTestPlay){
            /** Seekbar onTouch event handler. Method which seeks MediaPlayer to seekBar primary progress position*/
            if(mediaPlayer.isPlaying()){
                SeekBar sb = (SeekBar)v;
                int playPositionInMillisecconds = (mediaFileLengthInMilliseconds / 100) * sb.getProgress();
                mediaPlayer.seekTo(playPositionInMillisecconds);
            }
        }
        return false;
    }

    @Override
    public void onCompletion(MediaPlayer mp) {
         /** MediaPlayer onCompletion event handler. Method which calls then song playing is complete*/
        buttonPlayPause.setImageResource(R.drawable.button_play);
    }

    @Override
    public void onBufferingUpdate(MediaPlayer mp, int percent) {
        /** Method which updates the SeekBar secondary progress by current song loading from URL position*/
        seekBarProgress.setSecondaryProgress(percent);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T05:23:47.487

覆盖 onPause() 方法

```
@Override
public void onPause() {
    if( mediaPlayer.isPlaying() ) {
        mediaPlayer.stop();
    }
    super.onPause();
} 
```

当用户通过返回按钮、主页按钮或启动另一个应用程序（通过通知等）离开您的应用程序时，将调用此方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:28:35.060

覆盖该`onBackPressed`方法并停止播放器。

```
@Override
public void onBackPressed() {
   if( mediaPlayer.isPlaying() ) {
      mediaPlayer.stop();
   }
   super.onBackPressed();
} 
```

# c# - 从 silverlight 中的文件夹中获取所有图像

> ID：11458199
> 
> 赞同：0
> 
> 时间：2012-07-12T18:25:26.557
> 
> 标签：c#, silverlight, c#-4.0, silverlight-5.0

我在我的 silver-light 项目中添加了一个文件夹并在其中添加了一些图像现在我想要一个该文件夹中所有图像的列表

我知道 silverlight 无法访问本地文件，但这些文件在我的项目本身中

我可以得到所有的名单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:32:54.687

您可以使用反射来执行此操作。

我认为这个链接完全回答了你的问题：[list files in a silverlight project](https://stackoverflow.com/questions/4711590/list-files-in-a-silverlight-project)

# android - 如何在相机中启动视频图标

> ID：11458209
> 
> 赞同：1
> 
> 时间：2012-07-12T18:26:07.197
> 
> 标签：android, shell, c#-2.0, xamarin.android

我正在尝试通过`adb`我的 android 手机启动一个应用程序。我试过了`adb getevent`。

但它转储了这么多事件。我怎样才能确定我需要哪一个？有没有其他方法可以启动应用程序？我正在寻找启动相机的视频部分。我能够通过 adb 启动相机：

`am start -a android.intent.action.MAIN -n com.android.camera/.CameraEntry`.

摄像机图标位于相机中的快照图标旁边。我能够通过`input keyevent 23 控制快照图标。但无法弄清楚如何启动快照图标旁边的视频。

# android - C & Android 内核模块：这里的 f_flags 发生了什么？

> ID：11458211
> 
> 赞同：0
> 
> 时间：2012-07-12T18:26:10.960
> 
> 标签：android, c, kernel-module, flags

我在 Android 中有一个自编码内核模块，我用`O_RDONLY|O_NONBLOCK`.

`O_NONBLOCK`在`2048`用户程序和内核模块中。

我用

```
print..("O_NONBLOCK is %d", O_NONBLOCK) 
```

在用户和内核空间。

但是现在，当我尝试检查是否`O_NONBLOCK`已设置时，我遇到了一个非常奇怪的问题：

```
static int my_open(struct inode *inode, struct file *filp) {

    if (filp->f_flags & O_NONBLOCK) {
        printk("O_NONBLOCK");
    } else {
        printk("NOT O_NONBLOCK");
        printk("O_NONBLOCK in my_open is: %d", O_NONBLOCK); // -> prints 2048
        printk("filp->f_flags in my_open is: %d", filp->f_flags); // -> prints 1, not 2048 or larger
    }
..
} 
```

我尝试了别的东西：

```
cat my_device 
```

但同样，`filp->f_flags`是`1`。

我会假设可能`0`是因为`O_RDONLY`但不是`1`这意味着`O_WRONLY`。

任何人的想法或解释？

编辑：

我**也不**指望`cat`beeing `O_NONBLOCK`，但这`O_WRONLY`是完全错误的。

我这样打开它：

```
pcm->dfd=open(fname, O_RDONLY|O_NONBLOCK); 
```

并且没有`fcntl`以后（这根本不应该影响。但当然我也尝试过`my_open`“重新设置”但没有运气。`O_NONBLOCK``fcntl`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:04:59.440

您需要确保用户空间确实通过了您认为它必须通过的内容。例如，我很难相信“cat”会通过“NONBLOCK”。它没有理由这样做。

在用户空间端使用 strace 来测试实际传入的内容。

另外，有点离题，你确定你关心是否在打开期间设置了 O_NONBLOCK 吗？请记住，稍后也可以使用 fcntl 设置它。

沙查尔

# java - 如何在 ExpandableListView for Android 中为不同的父列表添加不同的子列表？

> ID：11458214
> 
> 赞同：1
> 
> 时间：2012-07-12T18:26:17.333
> 
> 标签：java, android, parent-child, expandablelistview

我正在使用 ExpandableListView 来获取可扩展列表。我有 3 个可扩展的“父”列表：价格、详细信息、注释。我希望能够为每个父列表添加唯一的子列表。但是现在的设置方式是为每个父列表添加相同的子列表。如何制作它以便我可以为价格、详细信息和注释添加唯一的、单独的子列表？

这是我的代码：

```
public class Assignment extends ExpandableListActivity {

int listFlag = 0;

@SuppressWarnings("unchecked")
public void onCreate(Bundle savedInstanceState) {
    try{
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_assignment);

    SimpleExpandableListAdapter expListAdapter =
        new SimpleExpandableListAdapter(
                this,
                createGroupList(),              // Creating group List.
                R.layout.group_row,             // Group item layout XML.
                new String[] { "Group Item" },  // the key of group item.
                new int[] { R.id.row_name },    // ID of each group item.-Data under the key goes into this TextView.
                createChildList(),              // childData describes second-level entries.
                R.layout.child_row,             // Layout for sub-level entries(second level).
                new String[] {"Sub Item"},      // Keys in childData maps to display.
                new int[] { R.id.grp_child}     // Data under the keys above go into these TextViews.
            );
        setListAdapter( expListAdapter );       // setting the adapter in the list.

    }catch(Exception e){
        System.out.println("Errrr +++ " + e.getMessage());
    }
}

//Create Headings of Assignment attributes
private List createGroupList() {
    ArrayList result = new ArrayList();

    //Create string array for Topic headings
    String[] topics = {"Price", "Details", "Notes"};

    //Iterate through array of names to lay them out correctly
    for( int i = 0 ; i < 3 ; ++i ) { 
        listFlag = i;
      HashMap m = new HashMap();
      m.put( "Group Item", topics[i] ); // the key and it's value. 
      result.add( m );
    }
    return (List)result; 
```

}

```
@SuppressWarnings("unchecked")
private List createChildList() {

    ArrayList result = new ArrayList();
    for( int i = 0 ; i < 3 ; ++i ) { // this -15 is the number of groups(Here it's fifteen)
      /* each group need each HashMap-Here for each group we have 3 subgroups */
      ArrayList secList = new ArrayList();
      for( int n = 0 ; n < 1 ; n++ ) {
        HashMap child = new HashMap();
        child.put( "Sub Item", " "test"));
        secList.add( child );
      }
     result.add( secList );
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:47:21.260

Android 不支持嵌套列表视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:58:18.007

您`createChildList`需要返回一个`List<ArrayList<HashMap<String, String>>>`.

你`createChildList`应该看起来像这样：

```
private List<ArrayList<HashMap<String, String>>> createChildList(int maxValue) {

                ArrayList<ArrayList<HashMap<String, String>>> groupList = 
                                new ArrayList<ArrayList<HashMap<String, String>>>();

                for (int i = 0; i <= maxValue; i++) {
                        ArrayList<HashMap<String, String>> childList = 
                                        new ArrayList<HashMap<String, String>>();

                        for (int j = 0; j <= maxValue; j++) {
                                HashMap<String, String> map = new HashMap<String, String>();

                                map.put("Sub Item", "test: " + String.valueOf(j));
                                childList.add(map);
                        }

                        groupList.add(childList);
                }

                return groupList;
        } 
```

让我知道这是否有效。

# text - 在没有 OCR 的情况下定位和识别矢量图（DXF、SVG、WMF 等）中的文本？

> ID：11458218
> 
> 赞同：1
> 
> 时间：2012-07-12T18:26:26.437
> 
> 标签：text, graph-algorithm, vector-graphics

OCR 在我的内容上效果不佳，因为 a) 它是**矢量格式**，需要从中生成光栅图像，并且在所需的 DPI 下会非常非常大；b) 文本稀疏（分布在大区域），不出现在文本行中，并且经常旋转或镜像。从好的方面来说，文本几乎总是使用一致大小（或少数几个大小）的中心线来描边。

看起来这应该是与手写识别类似的问题，除了它在大坐标空间（即一次不是单个字母或单词）上操作，并且绘图中也有大量非字符数据。

我发现关于这类问题的研究工作很少，甚至更少的代码。是否有我应该查看的代码库或算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T22:06:15.187

我会将 CadLib 用于 DXF 和 DWG ( [woutware.com](http://www.woutware.com) )

# javascript - 在多个 (html) 元素属性更改上循环遍历相同的 JavaScript 函数

> ID：11458219
> 
> 赞同：1
> 
> 时间：2012-07-12T18:26:32.223
> 
> 标签：javascript, html, jquery

有没有办法为多个字段循环 JavaScript 函数？

例如，我有 5 个文本框，例如：

```
text1
text2
text3
text4
text5 
```

现在，他们每个人都在“focusout”上做同样的事情，因此我不想为他们每个人编写五个不同的 JS 函数：

```
$('#text1').focusout( {
.............
    });

$('#text2').focusout( {
.............
    });

$('#text3').focusout( {
.............
    });

$('#text4').focusout( {
.............
    });

$('#text5').focusout( {
.............
    }); 
```

我怎样才能避免在这里写五个不同的函数？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:28:34.183

使用通用类：

```
<input type="text" class="focusClass" />
<input type="text" class="focusClass" /> 
```

这个JS：

```
$('.focusClass').focusout(function() {
    // ...
}); 
```

其他选择是将它们连接在一起，但这种方式更难维护：

```
$('#text1, #text2, #text3, #text4, #text5 ').focusout(function() {
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:38:33.340

您可以将文本框的 ID 传递给 jQuery 函数来执行您的任务。

尝试这个：

```
function myFunction(IDofObject)
{
    $( "#"  + IDofObject  ).doSomething();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:28:48.413

在您的选择器中，选择您要使用的所有元素：

```
$('#text1, #text2, #text3, #text4, #text5') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:30:25.153

如果在所有元素上放置同一个类没有意义，您可以将选择器与逗号组合：

```
$('#text1, #text2, etc...., #text5').focusout( {
.............
}); 
```

或者，您可以声明该函数，然后通过 focusout 调用将其作为参数传递给每个选择器：

```
var onFocusOut = function() {
 do something
};

$('#text1').focusout(onFocusOut);
$('#text2').focusout(onFocusOut);
$('#text3').focusout(onFocusOut);
$('#text4').focusout(onFocusOut);
$('#text5').focusout(onFocusOut); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T18:33:28.113

好吧，这是一个简短的方法......

```
$("#text" + [1,2,3,4,5].join(", #text")).focusout(function () {...}); 
```

但我想知道您是否不能向元素添加一个类，以便您可以一次选择它们。

例如...

```
<input type='text' id="text1' class='textfield' />
<input type='text' id="text2' class='textfield' />
<input type='text' id="text3' class='textfield' /> 
```

然后使用以下选择器...

```
$(".textfield").focusout(function () {...}); 
```

其他选项是您有一个带有 id 的父容器，它为您提供以下选项...

```
<div id="formfields">
    <input type='text' id="text1' class='textfield' />
    <input type='text' id="text2' class='textfield' />
    <input type='text' id="text3' class='textfield' />
</div> 
```

然后选择器看起来像这样......

```
$("#formfields input[type=text]").focusout(function () {...}); 
```

**更新**添加了另外两个选项来选择您的字段

# c++ - 在没有朋友的情况下在 C++ 中测试私有类成员

> ID：11458223
> 
> 赞同：17
> 
> 时间：2012-07-12T18:26:36.457
> 
> 标签：c++, unit-testing, private, protected, members

今天我和一位同事讨论了在课堂上是否测试私有成员或私有状态。他几乎说服了我为什么这样做是有道理的。这个问题的目的不是重复已经存在的关于测试私有成员的性质和原因的 StackOverflow 问题，例如：[让单元测试成为它正在测试的类的朋友有什么问题？](https://stackoverflow.com/questions/4171310/what-is-wrong-with-making-a-unit-test-a-friend-of-the-class-it-is-testing)

同事的建议在我看来有点脆弱，将朋友声明引入单元测试实现类。在我看来这是不行的，因为我们在测试代码中引入了一些测试代码的依赖，而测试代码已经依赖于测试代码 => 循环依赖。即使是像重命名测试类这样无辜的事情也会导致破坏单元测试并在测试代码中强制执行代码更改。

我想请 C++ 大师来判断另一个建议，它依赖于我们被允许专门化模板函数的事实。想象一下这个类：

```
// tested_class.h

struct tested_class 
{
  tested_class(int i) : i_(i) {}

  //some function which do complex things with i
  // and sometimes return a result

private:
  int i_;
}; 
```

我不喜欢为 i_ 设置吸气剂只是为了使其可测试的想法。所以我的建议是类中的'test_backdoor'函数模板声明：

```
// tested_class.h

struct tested_class 
{
  explicit
  tested_class(int i=0) : i_(i) {}

  template<class Ctx>
  static void test_backdoor(Ctx& ctx);

  //some function which do complex things with i
  // and sometimes return a result

private:
  int i_;
}; 
```

通过添加这个函数，我们可以使类的私有成员可测试。请注意，不依赖于单元测试类，也不依赖于模板函数实现。在此示例中，单元测试实现使用 Boost Test 框架。

```
// tested_class_test.cpp

namespace
{
  struct ctor_test_context
  {
    tested_class& tc_;
    int expected_i;
  };
}

// specialize the template member to do the rest of the test
template<>
void tested_class::test_backdoor<ctor_test_context>(ctor_test_context& ctx)
{
  BOOST_REQUIRE_EQUAL(ctx.expected_i, tc_.i_);
}

BOOST_AUTO_TEST_CASE(tested_class_default_ctor)
{
  tested_class tc;
  ctor_test_context ctx = { tc, 0 };
  tested_class::test_backdoor(ctx);
}

BOOST_AUTO_TEST_CASE(tested_class_value_init_ctor)
{
  tested_class tc(-5);
  ctor_test_context ctx = { tc, -5 };
  tested_class::test_backdoor(ctx);
} 
```

通过只引入一个完全不可调用的模板声明，我们为测试实现者提供了将测试逻辑转发到函数中的可能性。由于测试上下文的匿名类型性质，该函数作用于类型安全上下文并且仅在特定测试编译单元内部可见。最好的事情是，我们可以定义任意数量的匿名测试上下文并对它们进行专门测试，而无需接触被测试的类。

当然，用户必须知道模板专业化是什么，但这段代码真的很糟糕、奇怪或不可读吗？或者我是否可以期望 C++ 开发人员了解 C++ 模板专业化是什么以及它是如何工作的？

详细说明使用朋友声明单元测试类我不认为这是健壮的。想象一下 boost 框架（或者可能是其他测试框架）。它为每个测试用例生成一个单独的类型。但我为什么要关心，只要我能写：

```
BOOST_AUTO_TEST_CASE(tested_class_value_init_ctor)
{
  ...
} 
```

如果使用朋友，我必须将每个测试用例声明为朋友......或者最终以某种常见类型（如夹具）引入一些测试功能，将其声明为朋友，并将所有测试调用转发到该类型...... . 这不是很奇怪吗？

我想看看你练习这种方法的利弊。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-17T01:28:36.583

我认为单元测试是关于测试被测类的*可观察*行为。因此没有必要测试私处，因为它们本身是不可观察的。您测试它的方式是测试对象是否按照您期望的方式运行（这隐含地暗示所有私有内部状态都是有序的）。

不关心私有部分的原因是这样您可以更改实现（例如重构），而无需重写您的测试。

所以我的回答是不要这样做（即使技术上可行），因为它违背了单元测试的理念。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T04:39:30.807

**优点**

*   您可以访问私有成员来测试它们
*   它的数量相当少`hack`

**缺点**

*   封装破损
*   更复杂、更易碎的封装破损`friend`
*   `test_backdoor`通过在生产端混合测试与生产代码
*   维护问题（就像对测试代码加好友一样，您已经与测试代码建立了*极其*紧密的耦合）

* * *

除了所有的优点/缺点之外，我认为你最好进行一些架构更改，以便更好地测试正在发生的任何复杂事情。

**可能的解决方案**

*   使用 Pimpl 习语，将`complex`代码与私有成员一起放入 pimpl 中，并为 Pimpl 编写测试。Pimpl 可以前向声明为公共成员，允许在单元测试中进行外部实例化。Pimpl 只能由公共成员组成，使其更易于测试
    *   缺点：代码多
    *   缺点：不透明的类型，调试时很难看到里面
*   只需测试类的公共/受保护接口。测试您的界面布局的合同。
    *   缺点：单元测试很难/不可能以孤立的方式编写。
*   类似于 Pimpl 解决方案，但创建一个包含`complex`代码的自由函数。将声明放在私有标头中（不是库公共接口的一部分），然后对其进行测试。
*   通过朋友打破封装测试方法/夹具
    *   对此的可能变化：声明`friend struct test_context;`，将您的测试代码放在实现的方法中`struct test_context`。这样，您就不必为每个测试用例、方法或夹具添加好友。这应该会降低某人破坏好友关系的可能性。
*   通过模板特化打破封装

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T00:05:12.547

接下来的内容从技术上讲并不是对您问题的直接回答，因为它仍然会使用“朋友”功能，但它不需要修改测试实体本身，我认为它增加了破坏某些中提到的封装的担忧其他答案；它确实需要编写一些样板代码。

它背后的想法不是我的，实现 [完全基于 litb 在他的博客上提出和解释的一个技巧](http://bloglitb.blogspot.be/2011/12/access-to-private-members-safer.html)（加上这个[Sutter 的 gotw](http://www.gotw.ca/publications/mill02.htm)只是为了更多的上下文，至少对我来说） - 简而言之，CRTP，朋友们， ADL 和指向成员的指针（我必须承认，令我沮丧的是，我仍然没有完全理解 ADL 部分，但我一直在努力解决 100% 的问题）。

我用 gcc 4.6、clang 3.1 和 VS2010 编译器对其进行了测试，它运行良好。

```
/* test_tag.h */
#ifndef TEST_TAG_H_INCLUDED_
#define TEST_TAG_H_INCLUDED_

template <typename Tag, typename Tag::type M>
struct Rob
{
    friend typename Tag::type get(Tag)
    {
        return M;
    }
};

template <typename Tag, typename Member> 
struct TagBase
{
    typedef Member type;
    friend type get(Tag);
};

#endif /* TEST_TAG_H_INCLUDED_ */

/* tested_class.h */
#ifndef TESTED_CLASS_H_INCLUDED_
#define TESTED_CLASS_H_INCLUDED_

#include <string>

struct tested_class
{
    tested_class(int i, const char* descr) : i_(i), descr_(descr) { }

private:
    int i_;
    std::string descr_;
};

/* with or without the macros or even in a different file */
#   ifdef TESTING_ENABLED
#   include "test_tag.h"

    struct tested_class_i : TagBase<tested_class_i, int tested_class::*> { };
    struct tested_class_descr : TagBase<tested_class_descr, const std::string tested_class::*> { };

    template struct Rob<tested_class_i, &tested_class::i_>;
    template struct Rob<tested_class_descr, &tested_class::descr_>;

#   endif

#endif /* TESTED_CLASS_H_INCLUDED_ */

/* test_access.cpp */
#include "tested_class.h"

#include <cstdlib>
#include <iostream>
#include <sstream>

#define STRINGIZE0(text) #text
#define STRINGIZE(text) STRINGIZE0(text)

int assert_handler(const char* expr, const char* theFile, int theLine)
{
    std::stringstream message;
    message << "Assertion " << expr << " failed in " << theFile << " at line " << theLine;
    message << "." << std::endl;
    std::cerr << message.str();

    return 1;
}

#define ASSERT_HALT() exit(__LINE__)

#define ASSERT_EQUALS(lhs, rhs) ((void)(!((lhs) == (rhs)) && assert_handler(STRINGIZE((lhs == rhs)), __FILE__, __LINE__) && (ASSERT_HALT(), 1)))

int main()
{
    tested_class foo(35, "Some foo!");

    // the bind pointer to member by object reference could
    // be further wrapped in some "nice" macros
    std::cout << " Class guts: " << foo.*get(tested_class_i()) << " - " << foo.*get(tested_class_descr()) << std::endl;
    ASSERT_EQUALS(35, foo.*get(tested_class_i()));
    ASSERT_EQUALS("Some foo!", foo.*get(tested_class_descr()));

    ASSERT_EQUALS(80, foo.*get(tested_class_i()));

    return 0; 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-22T17:59:48.107

我很抱歉提出这个建议，但是当这些答案中的大多数方法在没有强重构的情况下无法实现时，它对我很有帮助：在文件的标题之前添加您希望访问其私有成员的类，

```
#define private public 
```

这是邪恶的，但是

*   不干扰生产代码

*   不会像朋友/更改访问级别那样破坏封装

*   避免使用 PIMPL 惯用语进行大量重构

所以你可以去...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T18:31:06.760

我通常不觉得需要对私有成员和函数进行单元测试。我可能更喜欢引入一个公共函数来验证正确的内部状态。

但是，如果我决定深入了解细节，我会在单元测试程序中使用一个**令人讨厌的快速破解：**

```
#include <system-header>
#include <system-header>
// Include ALL system headers that test-class-header might include.
// Since this is an invasive unit test that is fiddling with internal detail
// that it probably should not, this is not a hardship.

#define private public
#include "test-class-header.hpp"
... 
```

至少在 Linux 上这是可行的，因为 C++ 名称修饰不包括私有/公共状态。我被告知在其他系统上这可能不是真的，它不会链接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T18:50:40.627

测试私有成员并不总是通过检查它是否等于某些预期值来验证状态。为了适应其他更复杂的测试场景，我有时会使用以下方法（此处简化以传达主要思想）：

```
// Public header
struct IFoo
{
public:
    virtual ~IFoo() { }
    virtual void DoSomething() = 0;
};
std::shared_ptr<IFoo> CreateFoo();

// Private test header
struct IFooInternal : public IFoo
{
public:
    virtual ~IFooInternal() { }
    virtual void DoSomethingPrivate() = 0;
};

// Implementation header
class Foo : public IFooInternal
{
public:
    virtual DoSomething();
    virtual void DoSomethingPrivate();
};

// Test code
std::shared_ptr<IFooInternal> p =
    std::dynamic_pointer_cast<IFooInternal>(CreateFoo());
p->DoSomethingPrivate(); 
```

这种方法具有促进良好设计和不与朋友声明混乱的明显优势。当然，大多数时候你不必经历这些麻烦，因为能够测试私人成员是一个非常不标准的要求。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-20T15:12:22.727

我使用了一个函数来测试私有类成员，它刚刚被称为 TestInvariant()。

它是类的私有成员，在调试模式下，在每个函数的开头和结尾处调用（除了 ctor 的开头和 dctor 的结尾）。

它是虚拟的，任何基类在它拥有之前都称为父版本。

这让我可以一直验证类的内部状态，而不会将类的内部暴露给任何人。我进行了非常简单的测试，但没有理由不能进行复杂的测试，甚至可以使用标志等设置打开或关闭。

您还可以拥有公共测试函数，这些函数可以由调用您的 TestInvariant() 函数的其他类调用。因此，当您需要更改内部类的工作方式时，您不需要更改任何用户代码。

这会有帮助吗？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-21T09:08:09.470

我想首先要问的是：为什么朋友被认为是必须谨慎使用的东西？

因为它破坏了封装。它为另一个类或函数提供了访问对象内部的权限，从而扩展了私有成员的可见范围。如果你有很多朋友，就很难推断出你的对象的状态。

在我看来，模板解决方案在这方面甚至比朋友更糟糕。您声明的模板的主要好处是您不再需要明确地与班级的测试建立朋友关系。我认为，相反，这是有害的。有两个原因。

1.  该测试与您的班级内部耦合。任何更改类的人都应该知道，通过更改对象的私有信息，他们可能会破坏测试。朋友确切地告诉他们哪些对象可能与您的类的内部状态耦合，但模板解决方案没有。

2.  朋友限制了您的私人范围扩展。如果您将某个班级加为好友，您就会知道只有该班级可以访问您的内部信息。因此，如果您对测试加为好友，您就会知道只有测试可以读取或写入私有成员变量。但是，您的模板后门可以在任何地方使用。

模板解决方案是无效的，因为它隐藏了问题而不是修复它。循环依赖的潜在问题仍然存在：更改类的人必须知道后门的每次使用，而更改测试的人必须知道类。基本上，只有通过将所有私有数据以迂回的方式变为公共数据，才能从类中删除对测试的引用。

如果您必须从测试中访问私有成员，只需将测试夹具加为好友并完成它。它简单易懂。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-20T17:50:16.420

有一种理论认为，如果它是私有的，则不应单独对其进行测试，如果需要，则应对其进行重新设计。

**对我来说，这就是什叶派。**

在某些项目中，人们为私有方法创建一个宏，就像：

```
class Something{
   PRIVATE:
       int m_attr;
}; 
```

编译测试时 PRIVATE 被定义为公共，否则它被定义为私有。就这么简单。

# window - 如何在 Titanium 中弹出到特定的上一个窗口？

> ID：11458226
> 
> 赞同：-1
> 
> 时间：2012-07-12T18:26:51.600
> 
> 标签：window, titanium, appcelerator

我已经从

> **A->B->C->D**

从那里 D 是最终窗口，我必须回到窗口**A**。我将如何在钛中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:04:00.577

你可以像这样使用fireEvent

只需将此代码添加到您的 B 窗口中

```
 Ti.App.addEventListener('closeWinB',function(e){
    B.close();
}); 
```

并在您想重定向到窗口 A 时编写以下代码

```
Ti.App.fireEvent('closeWinB'); 
```

希望它对你有用....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T06:15:03.937

使用视图而不是窗口。

像这样创建一个窗口：

```
var PAC = Titanium.UI.createWindow({  
    title:'PAC',
    backgroundColor:'#fff'
}); 
```

将您的视图创建为“其他屏幕”或新窗口。您可以使用全屏像素大小或相对单位为 100% 来实现此目的

```
var viewInputData = Ti.UI.createView({
    backgroundColor:'#fff',
    top:0,
    left:0,
    width:'800px',
    height:'600px',
    zIndex:1
});

var viewOutputData = Ti.UI.createView({
    backgroundColor:'#fff',
    top:0,
    left:0,
    width:'100%',
    height:'100%',
    zIndex:0

}); 
```

请注意 zIndex 值，zIndex 值是视图应如何放置在“顶部”。在这种情况下，viwOutputData 低于 viewInputData。

创建一个按钮来触发事件。此窗口将切换 zIndex 值，该值将显示文本字段的值：

```
var  viewInputDataButton = Titanium.UI.createButton({
    width:120,
    height:111,
    top:10,
    backgroundImage: 'bp/images/square_button_1010.jpg',
    backgroundSelectedImage : 'bp/images/square_button_1001.jpg'
});

// declare a input view where your data will live
var viewInputNombre=Ti.UI.createTextField({
    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
    backgroudColor: 'white',
    top: 250,
    font: {fontsize: 80, fontWeight: 'arial'},
    textAlign: 'center',
    borderWidth:5,
    borderColor: 'black',
    borderRadius:3,
    height:50,
    width: 170

});

// add input to view 
viewInputData.add(viewInputNombre); 
```

现在创建并添加下一个视图的按钮

```
var  viewOutputDataButton = Titanium.UI.createButton({
    width:120,
    height:111,
    top:10,
    backgroundImage: 'bp/images/square_button_1001.jpg',
    backgroundSelectedImage : 'bp/images/square_button_1010.jpg'
});

// Create a simple label
var label2 = Titanium.UI.createLabel({
    color:'#999',
    text:'I am View 2',
    font:{fontSize:20,fontFamily:'Helvetica Neue'},
    textAlign:'center',
    width:'auto'
});

// add label to view 
viewOutputData.add(label2); 
```

这是使用 zIndex 属性切换两个视图的方法。为 view1 上的按钮创建事件侦听器，负责处理此开关：

```
viewInputDataButton.addEventListener('click', function(e){
    label2.setText(viewInputNombre.getValue());
    viewOutputData.setZIndex(viewInputData.zIndex+1); // zIndex change
}); 
```

秘诀是，您知道按钮 1 处的视图“在顶部”并且具有“最大 zindex”，因此..您将 zIndex 添加到焦点视图的当前 zIndex 之上，然后将视图弹出到顶部...

```
viewOutputDataButton.addEventListener('click', function(e){
    viewInputData.setZIndex(viewOutputData.zIndex+1);
}); 
```

同样在这里，按钮只是返回到原始窗口......

```
// add buttons
viewInputData.add(viewInputDataButton);
viewOutputData.add(viewOutputDataButton);

// add the views to the window
PAC.add(viewInputData);
PAC.add(viewOutputData);

// open it... 
PAC.open(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T00:05:58.243

根据您构建应用程序的方式，您通常可以执行以下类似的操作：

```
button.addEventListener('click', function(){
    A.open({
        animated: true
    )}
}) 
```

# java - 一般编程 - 类的使用

> ID：11458230
> 
> 赞同：1
> 
> 时间：2012-07-12T18:27:04.043
> 
> 标签：java, class

好的，最近我用 Java 编写了一个“绘画应用程序”。类似于 MS Windows Paint 的小程序，显然（根据一些评估我的源代码的人）我没有在我的应用程序中正确使用类。不幸的是，我不知道可能出了什么问题，但没有人愿意告诉我什么是不正确的。

我有使用继承思想的“正确”类：

```
PaintObject  
-ClosedObject  
--RectangleShape  
--OvalShape  
-OpenObject  
--PointShape  
--LineShape 
```

但我仍然不知道代码中可能有什么问题，什么可能导致认为类没有正确使用......

唯一（在我看来）可能是错误的事实是，我通过创建新对象进行绘制，例如：`new RectagleObject(...)`而`new OvalShape(...)`不是创建一个字段`objectToBeDrawn`变量（可能是一种`PaintObject`类型），然后在调用该方法时为其分配适当的形状`executeOperation`（显然连同那个特定形状的绘图）

这是代码示例：

```
public void executeOperation(Graphics2D gr, int oper, boolean drawingMode){
    if(oper==1){
        new RectangleShape(startLocation, endLocation, borderColor, fillColor).draw(gr);
    }
    else if(oper==2){
        new OvalShape(startLocation, endLocation, borderColor, fillColor).draw(gr);
    }
    ....//more operations
} 
```

任何人都知道一般编程习惯可能有什么问题（除非我的“猜测”是正确的？ - 如果是，请确认我的疑问）。或者也许还有别的东西？（跳过部分，`oper==1`因为我知道这些值应该定义为常量）

非常感谢任何帮助，我自己学习，并且很难猜测专业程序是如何设计的（并遵循他们的模式），因为我的经验是“有限的”（实际上没有）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:32:55.293

如果您正在绘制光栅图像，您是否需要跟踪用户正在绘制的内容？也许您的意思是`PenTool`,`RectangleTool`等对象？

现在，似乎您创建的对象会持续存在并被重绘以绘制特定的形状。您可以在适当的时候简单地让工具对象绘制`Image`一次（只是永远不要清除图形上下文）。选择工具后，只需将特定工具分配给某个`activeTool`字段。

```
class DrawingTool {
     public void draw(Graphics g) { }
}

class PenTool extends DrawingTool {
     public void draw(Graphics g) {
         // some drawing logic
     }
}

class RectangleTool extends DrawingTool {
     public void draw(Graphics g) {
         // some other drawing logic
     }
} 
```

所以而不是

```
oper = 1; 
```

你会写

```
activeTool = new PenTool(); // or activeTool = PenTool.GetInstance(); 
```

或类似的东西。现在，当您想绘制某些东西时，只需调用 draw 方法即可。正如我之前所说，你可以简单地通过传入一个`Image`你永远不会清除的来做到这一点：

```
class DrawingCanvas {
     Image image = createImage(GetWidth(), GetHeight());
     DrawingTool activeTool;

     // this is what gets invoked on every frame
     public void paint(Graphics g){
          g.drawImage(image, 0, 0, null);
     }
}

// when you need to draw something
// (not on every frame, but something new)
activeTool.draw(image.getGraphics()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T18:36:38.080

```
if(oper==1){
    //...
}
else if(oper==2){
    //...
} 
```

这是正确使用面向对象编程应该能够在 99% 的时间内避免的那种代码。调查*为什么*你需要一个`oper`整数。您可能可以修改一种模式以消除对它的需求。例如，如果您当前正在为工具栏中的每个按钮分配一个整数值，您可以改为让按钮处理程序将当前设置为`OperationFactory`生成与该按钮关联的类型的对象的处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:43:13.170

您的每种类型（特别是 OvalShape 和 RectangleShape）都应该实现“executeOperation”方法。此方法应覆盖基类（封闭对象）中的“executeOperation”方法。

这将摆脱对 if(oper == 2)... else (oper == 2) 的需要。它只会调用与对象类型相关的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:33:36.490

从小片段中，您可能可以更多地使用多态性。就像有一个父抽象类/接口，它定义了 executeOperation(Graphics2D gr, boolean drawingMode) 方法，然后为您支持的每个操作扩展/实现它（也许也可以删除绘图模式，但我看不到它的作用。）可以也可能将 graphics2D 放入构造函数中。

# android - 如果 Tomcat7 服务器已压缩 GZIP，Android 客户端将如何？

> ID：11458234
> 
> 赞同：0
> 
> 时间：2012-07-12T18:27:21.137
> 
> 标签：android, tomcat, compression, gzip, tomcat7

这是来自[关于 SO 的答案](https://stackoverflow.com/questions/9433790/cannot-compress-java-server-response-sent-to-jsp)

至于 GZIP 压缩，你不应该自己做。让**服务器**自己做。

修复您的代码以删除所有压缩响应的手动尝试，它最终应该基本上如下所示：

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String json = createItSomehow();
    response.setContentType("application/json");
    response.setCharacterEncoding("UTF-8");
    response.getWriter().write(json);
} 
```

现在来自HTTP 连接器的[Apache Tomcat 7 配置页面的以下内容](http://pages.citebite.com/k3o1i4y5qbkh)

**压缩**

> 连接器可能会使用 HTTP/1.1 GZIP 压缩来尝试节省服务器带宽。参数的可接受值为“off”（禁用压缩）、“on”（允许压缩，这会导致文本数据被压缩）、“force”（在所有情况下强制压缩）或数字整数值（即等价于“on”，但指定输出压缩前的最小数据量）。如果内容长度未知并且压缩设置为“开”或更激进，则输出也将被压缩。如果未指定，则此属性设置为“off”。

**压缩最小尺寸**

> 如果将压缩设置为“on”，则此属性可用于指定压缩输出之前的最小数据量。如果未指定，此属性默认为“2048”

这意味着当压缩设置为打开时。只有大于 2084 的数据才会被压缩。

在我的 Android 客户端中，我使用以下代码来查找数据是否经过 gzip 压缩

```
if ( entity.getContentEncoding() != null && "gzip".equalsIgnoreCase(entity.getContentEncoding().getValue()) 
```

**我的问题**

服务器是否还设置了`entity.getContentEncoding().getValue()`压缩数据时的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:41:33.077

`entity`服务器对您的 android 应用程序中的任何内容一无所知。`Content-Encoding`如果 gzip 正在使用，Tomcat 的连接器将适当地设置响应标头。

此外，您的代码比它需要的更复杂。你可以这样做：

```
if ( "gzip".equalsIgnoreCase(entity.getContentEncoding().getValue()) 
```

...因为没有 NPE 的机会。

# c# - 无法从传输连接读取数据：已建立的连接被主机中的软件中止

> ID：11458236
> 
> 赞同：1
> 
> 时间：2012-07-12T18:27:28.457
> 
> 标签：c#, .net

我正在使用 Webclient 类下载网站 HTML。代码非常简单：

```
WebClient client = new WebClient();

            client.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");

            string web = client.DownloadString(url); 
```

但有时我会收到无法重现的错误消息。它似乎随机发生：

```
System.IO.IOException: Unable to read data from the transport connection: An established connection was aborted by the software in your host machine. ---> System.Net.Sockets.SocketException: An established connection was aborted by the software in your host machine 
```

我不知道该错误是什么意思，也不知道如何解决。有什么猜测吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T21:58:46.447

首先转换为 NetException（或类似的东西）以跟踪异常消息。发生这种情况可能有多种原因（例如不受支持的方法:)）。如果网络异常没有什么特别之处，请检查防火墙或代理。如果您使用的是代理，请尝试通过代码或配置进行设置。

# sql - SQL 搜索问题

> ID：11458237
> 
> 赞同：2
> 
> 时间：2012-07-12T18:27:35.900
> 
> 标签：sql, sql-server

我知道这是一个简单的问题，但它就在这里。我使用 SQL 语句在 Visual Studio 中创建了一个搜索按钮。它适用于名字和姓氏，但我也希望它搜索这样的员工 ID。这是代码：

```
SELECT ID, fName, lName, Discription, Box 
FROM tb1 
WHERE (fName LIKE '%' + @fName + '%') OR (lName LIKE '%' + @lName + '%') OR (ID LIKE '%' + @ID + '%') 
```

当我测试它时，我得到了错误：

```
"Conversion failed when converting the varchar value '%' to data type int. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:32:42.887

```
ID LIKE '%' + @ID + '%' 
```

`ID`是整数，`'%' + @ID + '%'`是字符串。实在没法比。整数要么是值，要么不是。`%`通配符对整数没有任何意义。

我*假设*您想要做的是将整数转换为字符串，以便您可以匹配它的子字符串。因此，例如，搜索“1”将匹配任何*包含*“1”的整数（10、11、12、451 等）。为此，您只需[将整数值转换为](http://msdn.microsoft.com/en-us/library/ms187928.aspx)`WHERE`子句中的字符串值：

```
(CAST(ID AS varchar(10)) LIKE '%' + @ID + '%' 
```

（这假设您的整数长度永远不会超过 10 个字符。根据需要调整该值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:30:43.293

您不能`LIKE`与整数一起使用，因此您必须`ID`将`varchar`.

要转换，您可以使用`CAST`或：http `CONVERT`: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

前任： `CAST(ID as varchar)`

您的查询：

```
SELECT ID, fName, lName, Discription, Box 
FROM tb1 
WHERE (fName LIKE '%' + @fName + '%') OR (lName LIKE '%' + @lName + '%') OR (CAST(ID as varchar) LIKE '%' + @ID + '%') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:31:22.013

该`LIKE`语法仅与字符相关的数据类型兼容。`INT`类型不属于此类别。

**参考**：http: [//msdn.microsoft.com/en-us/library/ms179859.aspx](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

# python - 如何更改元组中的值？

> ID：11458239
> 
> 赞同：157
> 
> 时间：2012-07-12T18:27:42.937
> 
> 标签：python, tuples

我有一个名为的元组`values`，其中包含以下内容：

```
('275', '54000', '0.0', '5000.0', '0.0') 
```

我想更改`275`此元组中的第一个值（即 ），但我知道元组是不可变的，因此`values[0] = 200`不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-07-12T18:29:29.503

可以通过：

```
t = ('275', '54000', '0.0', '5000.0', '0.0')
lst = list(t)
lst[0] = '300'
t = tuple(lst) 
```

但是如果你需要改变一些东西，你最好把它保留为`list`

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2014-03-27T00:53:59.953

根据您的问题，切片可能是一个非常巧妙的解决方案：

```
>>> b = (1, 2, 3, 4, 5)
>>> b[:2] + (8,9) + b[3:]
(1, 2, 8, 9, 4, 5)
>>> b[:2] + (8,) + b[3:]
(1, 2, 8, 4, 5) 
```

这允许您添加多个元素或替换一些元素（特别是如果它们是“邻居”。在上述情况下，转换为列表可能更合适和可读（即使切片符号要短得多）。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-11-23T10:14:10.897

好吧，正如 Trufa 已经展示的那样，基本上有两种方法可以在给定索引处替换元组的元素。要么将元组转换为列表，替换元素并转换回来，要么通过连接构造一个新的元组。

```
In [1]: def replace_at_index1(tup, ix, val):
   ...:     lst = list(tup)
   ...:     lst[ix] = val
   ...:     return tuple(lst)
   ...:

In [2]: def replace_at_index2(tup, ix, val):
   ...:     return tup[:ix] + (val,) + tup[ix+1:]
   ...: 
```

那么，哪种方法更好，也就是更快呢？

事实证明，对于短元组（在 Python 3.3 上），连接实际上更快！

```
In [3]: d = tuple(range(10))

In [4]: %timeit replace_at_index1(d, 5, 99)
1000000 loops, best of 3: 872 ns per loop

In [5]: %timeit replace_at_index2(d, 5, 99)
1000000 loops, best of 3: 642 ns per loop 
```

然而，如果我们查看更长的元组，列表转换是可行的方法：

```
In [6]: k = tuple(range(1000))

In [7]: %timeit replace_at_index1(k, 500, 99)
100000 loops, best of 3: 9.08 µs per loop

In [8]: %timeit replace_at_index2(k, 500, 99)
100000 loops, best of 3: 10.1 µs per loop 
```

对于非常长的元组，列表转换要好得多！

```
In [9]: m = tuple(range(1000000))

In [10]: %timeit replace_at_index1(m, 500000, 99)
10 loops, best of 3: 26.6 ms per loop

In [11]: %timeit replace_at_index2(m, 500000, 99)
10 loops, best of 3: 35.9 ms per loop 
```

此外，连接方法的性能取决于我们替换元素的索引。对于列表方法，索引无关紧要。

```
In [12]: %timeit replace_at_index1(m, 900000, 99)
10 loops, best of 3: 26.6 ms per loop

In [13]: %timeit replace_at_index2(m, 900000, 99)
10 loops, best of 3: 49.2 ms per loop 
```

**所以：如果你的元组很短，切片和连接。如果它很长，请进行列表转换！**

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-10-05T03:21:34.263

一个衬里是可能的：

```
values = ('275', '54000', '0.0', '5000.0', '0.0')
values = ('300', *values[1:]) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-06-13T08:36:35.827

正如 Hunter McMillen 所提到的，元组是不可变的，您需要创建一个新元组才能实现这一点。例如：

```
>>> tpl = ('275', '54000', '0.0', '5000.0', '0.0')
>>> change_value = 200
>>> tpl = (change_value,) + tpl[1:]
>>> tpl
(200, '54000', '0.0', '5000.0', '0.0') 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-11-11T19:28:42.140

并不是说这是优越的，但如果有人好奇，可以通过以下方式完成：

```
tuple = tuple([200 if i == 0 else _ for i, _ in enumerate(tuple)]) 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-08-15T17:33:42.803

我相信这在技术上回答了这个问题，但不要在家里这样做。目前，所有答案都涉及创建一个新元组，但您可以使用它`ctypes`来修改内存中的元组。依靠 CPython 在 64 位系统上的各种实现细节，一种方法如下：

```
def modify_tuple(t, idx, new_value):
    # `id` happens to give the memory address in CPython; you may
    # want to use `ctypes.addressof` instead.
    element_ptr = (ctypes.c_longlong).from_address(id(t) + (3 + idx)*8)
    element_ptr.value = id(new_value)
    # Manually increment the reference count to `new_value` to pretend that
    # this is not a terrible idea.
    ref_count = (ctypes.c_longlong).from_address(id(new_value))
    ref_count.value += 1

t = (10, 20, 30)
modify_tuple(t, 1, 50)   # t is now (10, 50, 30)
modify_tuple(t, -1, 50)  # Will probably crash your Python runtime 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-07-12T07:31:54.837

您不能修改元组中的项目，但可以修改元组中可变对象的属性（例如，如果这些对象是列表或实际的类对象）

例如

```
my_list = [1,2]
tuple_of_lists = (my_list,'hello')
print(tuple_of_lists) # ([1, 2], 'hello')
my_list[0] = 0
print(tuple_of_lists) # ([0, 2], 'hello') 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-07-12T18:58:33.677

编辑：这不适用于具有重复条目的元组！

基于[Pooya 的想法](https://stackoverflow.com/a/11458412/463065)：

如果你打算经常这样做（你不应该这样做，因为元组是不可变的）你应该这样做：

```
def modTupByIndex(tup, index, ins):
    return tuple(tup[0:index]) + (ins,) + tuple(tup[index+1:])

print modTupByIndex((1,2,3),2,"a") 
```

或基于[乔恩的想法](https://stackoverflow.com/a/11458274/463065)：

```
def modTupByIndex(tup, index, ins):
    lst = list(tup)
    lst[index] = ins
    return tuple(lst)

print modTupByIndex((1,2,3),1,"a") 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-08-15T18:54:10.610

首先，问问自己为什么要改变你的`tuple`. **[字符串和元组在 Ptyhon 中是不可变的](https://stackoverflow.com/questions/1538663/why-are-python-strings-and-tuples-are-made-immutable)****是有原因**的，如果你想改变你的，`tuple`那么它可能应该是 a `list`。

其次，如果您仍然希望改变您的元组，那么您可以将您的元组转换`tuple`为 a`list`然后将其转换回来，并将新元组重新分配给同一个变量。**如果你只打算改变你的元组一次，那就**太好了。否则，我个人认为这是违反直觉的。因为它本质上是在创建一个新的元组，每次如果你想改变元组，你都必须执行转换。此外，如果您阅读了代码，会令人困惑地认为为什么不创建一个`list`? 但这很好，因为它不需要任何库。

我建议使用`mutabletuple(typename, field_names, default=MtNoDefault)`from [mutabletuple 0.2](https://pypi.python.org/pypi/mutabletuple/0.2)。我个人认为这种方式更加**直观****易读。**阅读代码的人会知道作者打算在未来改变这个元组。与上面的转换方法相比，缺点`list`是这需要您导入额外的 py 文件。

```
from mutabletuple import mutabletuple

myTuple = mutabletuple('myTuple', 'v w x y z')
p = myTuple('275', '54000', '0.0', '5000.0', '0.0')
print(p.v) #print 275
p.v = '200' #mutate myTuple
print(p.v) #print 200 
```

**TL;DR**：不要试图变异`tuple`。如果你这样做并且它是一次性操作转换`tuple`为列表，对其进行变异，`list`变成一个新的`tuple`，然后重新分配回持有旧的变量`tuple`。如果欲望`tuple`并且以某种方式想要避免`list`并且想要不止一次地变异然后创建`mutabletuple`。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-07-12T18:37:22.873

基于[Jon](https://stackoverflow.com/users/1252759/jon-clements)的想法和亲爱的[Trufa](https://stackoverflow.com/users/463065/trufa)

```
def modifyTuple(tup, oldval, newval):
    lst=list(tup)
    for i in range(tup.count(oldval)):
        index = lst.index(oldval)
        lst[index]=newval

    return tuple(lst)

print modTupByIndex((1, 1, 3), 1, "a") 
```

它改变了你所有的旧值出现

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-07-12T18:29:58.263

你不能。如果要更改它，则需要使用列表而不是元组。

请注意，您可以改为创建一个新元组，将新值作为其第一个元素。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-03-18T03:48:17.030

我发现编辑元组的最佳方法是使用以前的版本作为基础重新创建元组。

这是我用来制作颜色较浅版本的示例（当时我已经打开了它）：

```
colour = tuple([c+50 for c in colour]) 
```

它的作用是遍历元组“颜色”并读取每个项目，对其进行处理，最后将其添加到新元组中。

所以你想要的是这样的：

```
values = ('275', '54000', '0.0', '5000.0', '0.0')

values  = (tuple(for i in values: if i = 0: i = 200 else i = values[i]) 
```

那个特定的不起作用，但这个概念是你需要的。

```
tuple = (0, 1, 2) 
```

> tuple = 遍历元组，根据需要更改每个项目

这就是概念。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-09-01T12:49:34.293

我迟到了，但我认为*最简单*、资源最友好和最快的方法*（取决于情况）*是覆盖元组本身。因为这将消除创建列表和变量的需要，并存档在一行中。

```
new = 24
t = (1, 2, 3)
t = (t[0],t[1],new)

>>> (1, 2, 24) 
```

但是：这仅对相当小的元组很方便，并且还会将您限制为固定的元组值，但是，无论如何，大多数情况下元组都是这种情况。

所以在这种特殊情况下，它看起来像这样：

```
new = '200'
t = ('275', '54000', '0.0', '5000.0', '0.0')
t = (new, t[1], t[2], t[3], t[4])

>>> ('200', '54000', '0.0', '5000.0', '0.0') 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-02-11T05:01:05.150

tldr; “解决方法”是创建一个新的元组对象，而不是实际修改原始对象

虽然这是一个非常古老的问题，但有人告诉我这个 Python 变异元组的疯狂。我非常惊讶/好奇，做了一些谷歌搜索，我登陆了这里（以及其他类似的在线样本）

我进行了一些测试来证明我的理论

注意`==`值相等而`is`引用相等（obj a 与 obj b 是否相同）

```
a = ("apple", "canana", "cherry")
b = tuple(["apple", "canana", "cherry"])
c = a

print("a: " + str(a))
print("b: " + str(b))
print("c: " + str(c))
print("a == b :: %s" % (a==b))
print("b == c :: %s" % (b==c))
print("a == c :: %s" % (a==c))
print("a is b :: %s" % (a is b))
print("b is c :: %s" % (b is c))
print("a is c :: %s" % (a is c))

d = list(a)
d[1] = "kiwi"
a = tuple(d)

print("a: " + str(a))
print("b: " + str(b))
print("c: " + str(c))
print("a == b :: %s" % (a==b))
print("b == c :: %s" % (b==c))
print("a == c :: %s" % (a==c))
print("a is b :: %s" % (a is b))
print("b is c :: %s" % (b is c))
print("a is c :: %s" % (a is c)) 
```

产量：

```
a: ('apple', 'canana', 'cherry')
b: ('apple', 'canana', 'cherry')
c: ('apple', 'canana', 'cherry')
a == b :: True
b == c :: True
a == c :: True
a is b :: False
b is c :: False
a is c :: True
a: ('apple', 'kiwi', 'cherry')
b: ('apple', 'canana', 'cherry')
c: ('apple', 'canana', 'cherry')
a == b :: False
b == c :: True
a == c :: False
a is b :: False
b is c :: False
a is c :: False 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2014-11-01T21:11:33.917

我这样做了：

```
list = [1,2,3,4,5]
tuple = (list) 
```

并改变，只是做

```
list[0]=6 
```

你可以改变一个元组：D

这是从 IDLE 完全复制的吗

```
>>> list=[1,2,3,4,5,6,7,8,9]

>>> tuple=(list)

>>> print(tuple)

[1, 2, 3, 4, 5, 6, 7, 8, 9]

>>> list[0]=6

>>> print(tuple)

[6, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #17

> 赞同：-5
> 
> 时间：2018-10-02T14:54:52.480

您可以使用通过引用复制来更改元组的值

```
>>> tuple1=[20,30,40]

>>> tuple2=tuple1

>>> tuple2
    [20, 30, 40]

>>> tuple2[1]=10

>>> print(tuple2)
    [20, 10, 40]

>>> print(tuple1)
    [20, 10, 40] 
```

# objective-c - Objective-C 中猜数字游戏的问题

> ID：11458246
> 
> 赞同：1
> 
> 时间：2012-07-12T18:28:04.827
> 
> 标签：objective-c

我是 Objective-C 的新手，目前我正在为 Iphone 编写一个 Guess the Number 单视图应用程序。“新游戏”按钮当前运行此代码。

```
- (IBAction)newGame:(id)sender {

NSString *guessANumber = @"Guess a number between 1 and 25!";
[output setText:guessANumber];
} 
```

并且随机方法目前看起来像这样

```
-(int)Random {
int num;

num=(arc4random() % ((unsigned)25 + 1));
while (num == 0) {
    if (num == 0)
    {
    num=(arc4random() % ((unsigned)25 + 1));
    }
}    

return num;
} 
```

目前玩家提交猜测的方法是

```
- (IBAction)submitGuess:(id)sender {

int num = [self num];

for (int x = 1; x<=3;x++)
{

    if([textField.text intValue] > num)
        output.text=@"Too high.";
    else if([textField.text intValue] < num)
        output.text=@"Too low.";
    else if ([textField.text intValue] == num)
        output.text=@"You got it!";
    else 
        output.text= @"You lose. The number was %i.", num;

} 
```

转弯系统目前尚未实施。

我是 Objective-C 的新手，我不确定如何将随机数用于按下提交按钮时发生的操作。

对不起新手问题。

编辑：感谢您的帮助，它现在正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:34:06.667

您可以使 num 成为视图控制器的实例变量。就像是：

```
@interface MyViewController : UIViewController
{
   int num;
} 
```

然后您的提交方法将如下所示

```
- (IBAction)submitGuess:(id)sender {
    // access your random value here and do something with it.
    [self num];
} 
```

这是关于学习objective-c的一个很好的pdf。 [https://developer.apple.com/library/mac/documentation/cocoa/conceptual/objectivec/objc.pdf](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/objectivec/objc.pdf)

此外，您可能希望更改生成随机数的方式。看看这个：[在 Objective-C 中生成随机数](https://stackoverflow.com/questions/160890/generating-random-numbers-in-objective-c)

# php - 使用 preg_match 解析模板

> ID：11458254
> 
> 赞同：-1
> 
> 时间：2012-07-12T18:28:37.417
> 
> 标签：php, regex

我有这个模板文件：

```
<!-- BEGIN TEST -->
<!-- BEGIN TEST2 -->
<!-- BEGIN TEST3 -->

<!-- END TEST3 -->
<!-- END TEST2 -->
<!-- END TEST --> 
```

而这个正则表达式来解析它：

```
 preg_match("@<!-- BEGIN (.*?) -->(.*?)<!-- END (.*?) -->@siu", $this->code, $matches); 
```

**这将返回（var_dump）：**

```
array(3) {
  [0]=>
  string(85) "<!-- BEGIN TEST -->
<!-- BEGIN TEST2 -->
<!-- BEGIN TEST3 -->

<!-- END TEST3 -->"
  [1]=>
  string(4) "TEST"
  [2]=>
  string(5) "TEST3"
} 
```

如何使它像这样工作：（`@<!-- BEGIN (.*?) -->(.*?)<!-- END %1 -->@siu`当然这不起作用；这只是我展示问题的例子）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:39:04.277

我不知道你究竟想要什么，也许是这样的：

```
$s = '<!-- BEGIN TEST --><!-- BEGIN TEST2 --><!-- BEGIN TEST3 --><!-- END TEST3 --><!-- END TEST2 --><!-- END TEST -->';

preg_match("@<!-- BEGIN (.*?) -->(.*?)<!-- END \\1 -->@siu", $s, $matches);

print_r($matches); 
```

# android - 二维码扫描并发送到网页

> ID：11458258
> 
> 赞同：-1
> 
> 时间：2012-07-12T18:28:45.730
> 
> 标签：android, zxing, qr-code

> **可能重复：**
> [Android，二维码库不是 ZXING](https://stackoverflow.com/questions/10782354/android-qr-code-library-not-zxing)

我想创建一个扫描预定二维码并发送到网页的应用程序。我不想要一个完整的图书馆（所以没有 ZXing），只是一个预先确定的 QR 码，如果扫描它，就会发送给用户到预先确定的网页......所以基本上在代码中的某个地方我会同时提供 qr 码链接和网页链接。

示例：如果用户扫描此链接[http://qr.kaywa.com/img.php?s=8&d=http%3A%2F%2Fyoutube.com](http://qr.kaywa.com/img.php?s=8&d=http%3A%2F%2Fyoutube.com)提供的二维码，他们将被发送到 youtube.com/关注xyz

是否有任何现有的框架或指南可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:36:46.987

推荐使用 ZXing，但您可以试试[ZBar 条码阅读器](http://sourceforge.net/news/?group_id=189236)。检查一下，看看它是否适合你。

# asp.net-mvc - 使用 PartialViews 实现 UpdatePanel 功能 - 需要帮助入门

> ID：11458271
> 
> 赞同：1
> 
> 时间：2012-07-12T18:29:13.923
> 
> 标签：asp.net-mvc, razor, updatepanel

我对 MVC 相当陌生，需要帮助理解类似于 UpdatePanel 功能的部分更新实现。

我在页面的 LHS 上有某些过滤器，在 RHS 上有一个表（DataTable）。当用户选择过滤器时，我希望表格数据根据过滤器进行更改。我试图只加载包含表格的 PartialView 而不是加载整个页面。但是，我一开始就遇到了困难。

问题 -

使用 Html.BeginForm 可以实现这样的事情吗？[就像这里显示的那样。](https://stackoverflow.com/questions/611620/mvc-ajax-updatepanel) 我真的找不到关于 Html.BeginForm 的详细文档，MSDN 网站解释了技术细节，但我真的不确定是否有必要始终使用它，以及在哪里绝对需要它。

## 我试过的 -

我尝试使用[此处显示的 jQuery.load()。](https://stackoverflow.com/questions/5210548/jquery-load-with-asp-net-mvc-partial-view)但是，当我尝试像这样加载我的局部视图时，我遇到了 400 Bad Request 错误。

我在这里所做的只是——

### 在视图中 -

我试过这个 -

```
$('#contentDiv').load('<%= @Url.Action("Index", "Grid") %>'); 
```

还有这个 -

```
$.post('<%= @Url.Action("Index", "Grid")%>', function (data) {
        $('#contentDiv').html(data);   } 
```

我也尝试过使用#get，但这也不起作用。

### 在控制器中 -

```
 public ActionResult Index()
    {
        List<Models.GridData> tableData= new List<GridData>();
        try
        {                
            tableData= hvUtil.FillGrid();
            return PartialView(notes);               
        } 
```

任何人都可以建议如何让事情正常进行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:32:24.620

看起来您正在使用 Razor 和 ASCX 语法的奇怪组合。你看过生成的javascript吗？

这可能会让你更接近你想要的：

```
$('#contentDiv').load('@Url.Action("Index", "Grid")'); 
```

# mysql - 如何使用 ASP.NET 登录/注册功能在 MySQL Membership DB 中插入 UserId 的 Guid？

> ID：11458273
> 
> 赞同：0
> 
> 时间：2012-07-12T18:29:17.117
> 
> 标签：mysql, asp.net-membership, membership-provider

有什么方法可以实现在 MYSQL Membership DB 的 Membership Table 中的 UserID 中插入 GUID。我尝试将默认 USERID 从 INT(11) 更改为 CHAR(16)。但无法成功在该特定列中插入 GUID。是否有任何解决方法。

**编辑：** 以前我使用 MSSQL 成员资格提供程序。由于数据库大小限制，我转向了 MYSQL。

```
ad.UserId = (Guid)Membership.GetUser().ProviderUserKey; 
```

是由于将当前的 int 类型转换为 guid 而导致错误的代码段，但是这可以通过删除 (Guid) 转换并将其替换为 (Id) 来解决，但是我的 DTO 属性 ad.UserId 只接受 GUID .

# django - 循环遍历多对多字段并返回模板标签

> ID：11458275
> 
> 赞同：0
> 
> 时间：2012-07-12T18:29:33.467
> 
> 标签：django, many-to-many, django-templates

尝试遍历演示者字段以获取事件。然后在模板中将他们标记为演示者`is_presenter`。

我想我的问题是：如何正确循环遍历 manytomanyfield 以返回模板标签？

模型

```
class Event(model.Model):
    title = models.CharField(max_length=200)
    presenters = models.ManyToManyField(Profile, null=True, blank=True)
    ... 
```

看法

```
for presenter in event.presenters_set.all():
    is_presenter = True 
```

感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T21:54:01.607

它不太清楚你想要完成什么。如果你在模板中做这个检查你可以做类似的事情

```
{% for presenter in event.presenters.all %}
   {% if presenter.is_presenter %}
     {% # format or do whatever it is you want to do to the presenter here %}
   {% else %}
     {% # this is not a presenter leave alone %}
   {% endif %}
{% endfor %} 
```

如果您的检查演示者更复杂，那么将其保留在您的视图中而不是模板中会很好。您可以计算出哪些 pressenter 正在实际呈现，在 Presenter 对象上放置一个标志并将其传递给您的模板。

# sql - 检索具有重复外键的连接表的两个不同字段

> ID：11458276
> 
> 赞同：0
> 
> 时间：2012-07-12T18:29:34.263
> 
> 标签：sql, join, oracle10g, foreign-keys

我有一个重用外键的表，我想为每种情况加入不同的值。第一个表描述了药物给药活动。它具有指向药物、路线、车辆等的 ID。令人困惑的是，它重用了 Unit ID，它是单个描述表中的外键。

组（简体）

```
GROUP_NO    DRUG      DRUG_AMOUNT     DRUG_UNIT     CHECK_UNIT
   1        568           5               7              5
   2        689           1               7              5
   2        568           5               7              5
   3        19            0.5            10             
   4        984           10             10              5 
```

单位（简体）

```
UNIT_ID      UNIT_DESCR
   5         kg
   7         mg
   10        mL 
```

我想生成一个查询，为所有组的每个药物剂量返回一行。除了单位，我什么都能做。我想使用 CASE 语句来显示剂量单位。select 语句看起来像这样：

```
'DOSE UNITS' =
CASE
WHEN CHECK_UNIT IS NULL THEN DRUG_UNIT_DESCR
ELSE CONCAT(DRUG_UNIT_DESCR+'/'+CHECK_UNIT_DESCR)
END 
```

我试图让这个例子的结果看起来像这样：

结果

```
GROUP_NO      DRUG          DRUG_AMOUNT     'DOSE UNITS'
    1       HelpsAlot           5              mg/kg
    2       HelpsMore           1              mg/kg
    2       HelpsAlot           5              mg/kg
    3       DoesNothing         0.5            mL
    4       WhoKnows            10             mL/kg 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:37:43.500

您需要两个连接，每个键一个：

```
select g.*,
       'DOSE UNITS' = (CASE WHEN CHECK_UNIT IS NULL THEN du.UNIT_DESCR
                            ELSE CONCAT(du.UNIT_DESCR+'/'+cu.UNIT_DESCR)
                       END) 
from groups g left outer join
     units cu
     on g.check_unit_id = cu.unit_id left outer join
     units du
     on g.drug_unit_id = du.unit_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:41:30.050

假设 drug_unit 总是被填充

```
select group_no, drug, drug_amount, 
'dose units' =
case
when check_unit is null then u1.unit_descr
else concat(u1.unit_descr+'/'+ u2.unit_descr)
end
from groups g inner join units u1
on g.drug_unit = u1.unit_id
left join units u2 
on g.check_unit = u2.unit_id 
```

# iphone - NSUserDefaults，保存数据问题

> ID：11458281
> 
> 赞同：0
> 
> 时间：2012-07-12T18:29:41.610
> 
> 标签：iphone, ios, nsuserdefaults

所以我有一个应用程序，它可以让你在首页输入标题和作者，然后你按 Enter 键，它将进入应用程序的实际功能。我想用 NSUserDefaults 保存数据，这样当他们单击 enter 按钮时，它会保存它****并***进入下一个视图。我已经用storybord设置它进入下一个视图，但是当我使用这个代码时：

```
-(IBAction)enter:(id)sender {  
  titleString = [[NSString alloc] initWithFormat:[title text]];
  [title setText:titleString];

  NSUserDefaults *titleDefault = [NSUserDefaults standardUserDefaults];
  [titleDefault setObject:titleString forKey:@"stringkey"];
  authorString = [[NSString alloc] initWithFormat:[author text]];
  [title setText:authorString];

  NSUserDefaults *authorDefault = [NSUserDefaults standardUserDefaults];
  [authorDefault setObject:authorString forKey:@"stringkey2"];
} 
```

当您按下按钮时，它总是会崩溃。我已经定义了所有的 NSStrings 等等，所以我看不出问题是什么。我也有它加载：

```
title.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"stringkey"];
author.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"stringkey2"]; 
```

在 viewdidload 下，我可以就为什么这不起作用提供一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:21:37.910

只是为了*优化*您的`-enter:`方法：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:title.text forKey:@"stringkey"];
[defaults setObject:author.text forKey:@"stringkey2"];
[defaults synchronize]; // this will store them instantly! 
```

对于崩溃：您能否向我们提供确切的崩溃日志？也许你的按钮链接到一个未知的选择器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:18:44.400

首先，关于这个有几个问题：[这里](https://stackoverflow.com/questions/1418894/nsuserdefaults-not-saving-properly?rq=1)，[这里](https://stackoverflow.com/questions/2622754/why-is-nsuserdefaults-not-saving-my-values/2622940#2622940)。尝试先四处搜索，至少让人们知道为什么您发现的重复问题对您不起作用。

其次，我认为您可能会从添加`synchronize`. 用这个：

```
titleString = [[NSString alloc] initWithFormat:[title text]];
[title setText:titleString];

 NSUserDefaults *titleDefault = [NSUserDefaults standardUserDefaults];
[titleDefault setObject:titleString forKey:@"stringkey"];

[titleDefault synchronize];

authorString = [[NSString alloc] initWithFormat:[author text]];
[author setText:authorString];

NSUserDefaults *authorDefault = [NSUserDefaults standardUserDefaults];
[authorDefault setObject:authorString forKey:@"stringkey2"];

[authorDefault synchronize]; 
```

我也将`[title setText:authorString];`线路更改为`[author setText:authorString];`. 但是，我确实认为将`NSString`s 分配给文本字段的值然后将文本设置回您创建的字符串的值的方式有点多余。我不明白需要。无论如何，希望这会有所帮助。

# ruby-on-rails - 如何在 Rails 上实现无 cookie 的 flash 消息？

> ID：11458283
> 
> 赞同：3
> 
> 时间：2012-07-12T18:29:44.683
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, cookieless

我正在开发一个 facebook 应用程序，所以**由于 P3P（隐私偏好项目），我不能依赖 cookie**，是的，这是一个该死的痛苦（[有​​关 Rails 和 Facebook 应用程序](http://www.slideshare.net/cmercier/things-i-learned-writing-a-facebook-canvas-app)的图片，请参见幻灯片上的幻灯片 18 和 19） ...

在 Facebook 应用程序中，从浏览器的角度来看，每个 cookie 都是**第三方 cookie**。许多浏览器默认阻止它们。

所以我的问题是：*如何在不依赖 cookie 的情况下实现 flash 消息？*

**更新：**

我相应地修改`session_store.rb`了数据库。现在会话存储在数据库中，但闪存消息仍然依赖于 cookie ......请问有什么想法吗？

**更新#2：**

我终于找到了解决方法，请参阅下面的答案。最好的办法是*ajax 一切*（根据上面链接的幻灯片），但作为一个快速修复我的解决方案应该可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:33:41.830

我终于找到了一种**解决方法**来实现我自己的（简单）闪存消息并将它们通过参数从一个请求传递到另一个请求。

首先，我覆盖`default_url_options`了`application_controller.rb`每个请求附加一个 :my_flash 参数：

```
def default_url_options 
  { :my_flash => @my_flash }
end 
```

然后，总是在 中`application_controller.rb`，我写了一个`my_flash_from_params`before_filter 来设置`@my_flash`变量：

```
def my_flash_from_params
  @my_flash = params[:fb_flash]
end 
```

最后我渲染了以下`_my_flash.html.erb`部分`application.html.erb`

```
<div class="my_flash">
  <%= my_flash %>
</div> 
```

来电：

```
 <%= render :partial => "layouts/my_flash", :locals => {:my_flash => @my_flash} if @my_flash %> 
```

如果您想尝试此解决方案，另请参阅[有关 default_url_options rewriting 的答案](https://stackoverflow.com/a/11473600/869616)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:47:57.647

Flash 消息建立在会话之上。因此，如果您将会话存储更改为使用数据库，您仍然可以依赖闪存。这可以通过编辑`config/initializers/session_store.rb`并按照该文件上的说明轻松完成。

以下是有关该主题的更多信息：[Action Controller Overview -> Session](http://guides.rubyonrails.org/action_controller_overview.html#session)

# r - 将第二个数据变成数字

> ID：11458285
> 
> 赞同：1
> 
> 时间：2012-07-12T18:29:54.123
> 
> 标签：r, date, milliseconds

我有一个包含毫秒数据的数据集，我使用以下代码将其转换为日期/时间：

```
> cl1$date <- strptime(cl1[,1], "%Y-%m-%d %H:%M:%OS")
> head(cl1$date)

[1] "2012-06-06 10:30:00.4" "2012-06-06 10:30:00.5" "2012-06-06 10:30:00.6"
[4] "2012-06-06 10:30:00.7" "2012-06-06 10:30:00.8" "2012-06-06 10:30:00.9"
...    
[71935] "2012-06-27 10:59:55.28" "2012-06-27 10:59:55.38" "2012-06-27 10:59:55.48"
[71938] "2012-06-27 10:59:55.58" "2012-06-27 10:59:55.68" "2012-06-27 10:59:55.78" 
```

但现在我想将它们从转移`"2012-06-27 10:59:55.28"`到`"2012-06-27 10:59:55.3"`（即毫秒只有 1 位小数）。我应该怎么做才能修改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:06:53.393

```
ttt<-as.POSIXlt("2012-06-27 10:59:55.28")

options(digits.secs=1)
ttt
[1] "2012-06-27 10:59:55.2"

options(digits.secs=2)
ttt
[1] "2012-06-27 10:59:55.28"

ttt$sec<-round(ttt$sec,1)
ttt
[1] "2012-06-27 10:59:55.3"

as.character(ttt)
[1] "2012-06-27 10:59:55.3" 
```

# ios - ios 对强/弱引用感到困惑

> ID：11458286
> 
> 赞同：2
> 
> 时间：2012-07-12T18:29:55.530
> 
> 标签：ios, xcode, memory-management, weak-references, strong-typing

我查看了有关强/弱引用的问题，并了解使用弱（父子关系）的原因。但是，我对创建父子关系的特定场景感到困惑。

例如，是否将子视图添加到 UIView 对象..创建父/子关系的示例？什么是？

到目前为止，我在我的项目中所做的一切都是使用强的，我没有在任何地方使用弱，但我不确定我是否会遇到内存管理问题（或者如何检查我是否会遇到）。

谁能提供创建父子关系的具体情况或示例？

谢谢！

编辑：事实上，我在一个显示大量数据（地图视图、图像数量、文本、按钮）的 ViewController 中遇到了一些“收到内存警告”问题。Everything 属性有一个强指针。我需要解决此 ViewController 的内存管理问题

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T19:03:31.500

你的理解是倒退的。弱引用更常用于实现子父关系。他们很少对父母与孩子的关系有意义。一般来说，父母拥有孩子；这意味着强大。

绝大多数时候你想要一个强有力的参考。这就是为什么它是默认值。没有强引用的最常见原因是它是否会导致保留循环。例如，如果 A 对 B 有一个强引用，那么如果 B 对 A 有一个强引用，你就会有一个循环，并且两个对象都不会被释放。因此，您选择其中一个对象作为所有者，并且它具有强引用。另一个对象具有弱引用。

最常见的情况是委托。代表几乎总是拥有它所代表的东西。所以委托对象应该对委托有一个弱引用。作为 Objective-C 中的约定，一个名为的属性`delegate`应该是弱的。（如果这感觉倒退了，想想你是如何使用`UITableView`和`UITableViewDelegate`实践的，以及你想将哪一个视为“所有者”。）

弱委托指针并不是一成不变的规则。也有例外，例如`NSURLConnection`。如果委托对象的生命周期比委托短，那么它可以（并且通常更可取）保持强引用。

“收到内存警告”不一定与内存管理有关。这只是意味着你使用了太多的内存。如果您有保留循环，那么您可能会泄漏内存，这将导致此警告。但这也可能是因为您只是使用了太多内存。Instruments 中的“分配”工具是调查此问题的最佳方式。

虽然“强”和“弱”的实现是最近对 Objective-C 的补充，但它们只是形式化并为多年来正确编写的代码通过手动保留所做的工作提供更好的语言支持。今天的所有权模式与 ARC 之前的所有权模式相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T19:11:55.770

有些人整理了一个非常有用的图表来解释何时在“一起编码” Piazza 类中使用弱引用。它有一些很棒的图表来解释带有强/弱指针的基本内存管理。

[http://piazza-uploads.s3-website-us-east-1.amazonaws.com/attach/h3ex5vh7htrh9/h4777mrpwp17bg/h4777tczi147de/Views,%20Outlets,%20Weak%20References.pdf](http://piazza-uploads.s3-website-us-east-1.amazonaws.com/attach/h3ex5vh7htrh9/h4777mrpwp17bg/h4777tczi147de/Views,%20Outlets,%20Weak%20References.pdf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T19:02:35.880

当您将子视图添加到视图时，父视图将保留它的子视图。是的，这是父子关系。如果您正在创建自己的 UIView 子类，您也会这样做。

父母与孩子的关系很牢固，但孩子永远不应该与父母建立牢固的关系。这可能导致保留周期，其中任何一个都不能被释放，因为它们彼此之间都有很强的联系。

Strong 是默认设置，当您使用委托模式时，您将倾向于使用weak。

也许您应该发布有关收到的内存警告问题的更具体信息，因为这个问题对于内存语义非常笼统。

# java - Java Swing & Keybinding - 重新绘制我的光标

> ID：11458287
> 
> 赞同：2
> 
> 时间：2012-07-12T18:29:58.070
> 
> 标签：java, swing, key-bindings

我有一个 Jpanel (p)、一个 Jframe (f) 和这个标签 (cursorlbl)，我想通过箭头键四处移动。我已经在 goLeft() 方法中做了我认为合理的事情......但它不起作用。

我在这个类的顶部有一个名为 cursx 的静态文件，代码在 main.js 中。有一个名为 cursorlbl 的带有 ImagIcon 的 JLabel - 我将其声明为 final，因此我的键绑定函数可以看到它。

每当我按下左箭头键时，我希望 cursorlbl 消失并在我的 TableLayout 中出现一个空格（来自[http://java.sun.com/products/jfc/tsc/articles/tablelayout](http://java.sun.com/products/jfc/tsc/articles/tablelayout)）

现在，作为一大块我将在下面的节目中发布，我尝试通过以下方式：

```
 p.remove(cursorlbl);
            cursx++; //static var im using to keep track of the cursor
            p.revalidate();
            p.repaint();
            p.add(cursorlbl, Integer.toString(cursx) +" ," + Integer.toString(cursy));
            p.revalidate();
            p.repaint(); 
```

但这似乎并不适合我的小组。GUI 没有更新到正确的位置——我不知道为什么。

这是我的一大块代码，它要大得多。

```
 final ImageIcon cursor = new ImageIcon("cursor.gif");
    final JLabel cursorlbl = new JLabel("", cursor, JLabel.CENTER);
    p.add( cursorlbl, Integer.toString(cursx) +" ," + Integer.toString(cursy));
    p.revalidate();
    p.repaint();
    f.setVisible(true);

    Action goRight = new AbstractAction() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            System.out.println("right");
            //p.remove(cursorlbl);
            //p.revalidate();
            //p.repaint();

        }
    };
    Action goLeft = new AbstractAction() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            cursx++;
            p.remove(cursorlbl);
            p.revalidate();
            p.repaint();
            p.add(cursorlbl, Integer.toString(cursx) +" ," + Integer.toString(cursy));
            p.revalidate();
            p.repaint();

        }
    };

        p.setFocusable(true);
        p.getInputMap().put(KeyStroke.getKeyStroke("RIGHT"),
                "pressed right");
        p.getInputMap().put(KeyStroke.getKeyStroke("LEFT"),
                "pressed left");
        p.getInputMap().put(KeyStroke.getKeyStroke("UP"),
                "pressed up");
        p.getInputMap().put(KeyStroke.getKeyStroke("DOWN"),
                "pressed down");
        p.getActionMap().put("pressed right", goRight);
        p.getActionMap().put("pressed left", goLeft);
        p.getActionMap().put("pressed up", goUp);
        p.getActionMap().put("pressed down", goDown); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:12:27.540

我认为这是 TableLayout 管理器中的一个错误。

一种解决方法是每次要更新时创建一个新标签以添加到面板中（如下所示）：

```
Action goLeft = new AbstractAction() {
    @Override
    public void actionPerformed(ActionEvent arg0) {
        cursx--;
        contentArea.remove(cursorlbl);
        cursorlbl = new JLabel("",cursor, JLabel.CENTER);
        contentArea.add(cursorlbl, Integer.toString(cursx) +" ," + Integer.toString(cursy));
        contentArea.revalidate();
        contentArea.repaint();
    }
}; 
```

您可以重用`ImageIcon`它，这可以为您节省大量开销 - 但我不会将其归类为永久解决方案（因为它会创建比必要更多的对象）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:41:55.917

抱歉，我错过了阅读该内容并认为您正在尝试移动鼠标。

Java API 中有一个名为 Robot 的类。它有一个名为 mouseMove(int x, int y) 的方法。您可能想用它来移动鼠标。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html)

# active-directory - 如何构建此 LDAP 连接字符串？

> ID：11458291
> 
> 赞同：5
> 
> 时间：2012-07-12T18:30:05.527
> 
> 标签：active-directory, ldap

我正在尝试在 Active Directory 中检索用户信息，但我发现有些事情记录得很差。例如，我看到的 LDAP 连接字符串中包含一些我不知道其含义的关键字。这是一个示例：

```
LDAP://ofmdcoly302.ofm.wa.lcl/ou=employees,dc=ofm,dc=wa 
```

关键字“ou”和“dc”应该表示什么？在我们的例子中，“ou=employees”似乎标识了一个特定的 AD 节点。但是，当我尝试对上述目录条目执行 .FindAll() 时，我得到“从服务器返回了一个推荐”。我想这意味着它找不到我要找的东西，但它可能在其他地方可用？在一个地方我读到“推荐是 AD 的说法，'这个对象可能存在于另一个域中'”。

“ou”和“dc”应该是什么意思？如果我有这个 A/D 结构，我将如何编码 LDAP 连接字符串以检索“AR”节点中的信息：

![在此处输入图像描述](../Images/a381260d6e913c1be235b46919301be7.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T18:38:51.830

`ou`并且`dc`不是关键字，它们是属性，分别是“组织单元”和“域组件”。属性在目录服务器模式中定义。属性聚集到条目中，其中的专有名称是主键。

在此上下文中，`ou`和`dc`是“专有名称组件”，它们一起构成“专有名称”，它是上述 LDAP 条目的主键。`ou=employees,dc=ofm,dc=wa`是由各种相关的专有名称组件组成的专有名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T20:04:06.687

这个条目有两个错误：它没有使用root（dc = lcl），你也跳过了一个ou，应该是`ou=employees,ou=Users - OFMGOV,dc=ofm,dc=wa,dc=lcl`

TBH，如果您真的想*理解*这种表示法，我建议您使用 ADSI Edit 而不是您可能使用 ATM 的 ADUC - 它会以相同的方式向您显示路径，因此更容易翻译。它还可以防止您使用“CN=Users”和“CN=Computers”等特殊容器对自己进行攻击：

![查看 ADSI Edit 中的 LDAP 路径](../Images/9887d8bed916e862d57f115f816a1284.png)

对于您突出显示的 OU，它很可能是：

`ou=AR,ou=Citrix,ou=Users - OFMGOV,dc=ofm,dc=wa,dc=lcl`

# asp.net - 在 IIS 上发布 ASP.NET 网站后丢失会话信息

> ID：11458294
> 
> 赞同：1
> 
> 时间：2012-07-12T18:30:18.023
> 
> 标签：asp.net, .net, iis-6, publishing-site

我是 ASP.NET 2.0 的初学者。对于 ASP.NET 专家来说，这可能听起来太基本和愚蠢的问题。但这让我彻夜难眠。

基本上我已经开发了一个简单的多语言网站，其中包含一个母版页和内容页，这些页填充了母版页的内容占位符部分。该应用程序在配置为在**ASP.NET Development Server 2.0**上运行时运行良好。但是一旦我发布它以在 IIS Web 服务器上运行，它将不再起作用。:( 我可以从跟踪中看到，我使用的所有会话变量都没有存储并重定向到相关的内容页面。

尽管显示了内容，但我在重定向页面上做出某些决定的会话变量值丢失了，我遇到了异常。

请指导我在哪里出错以及发布应用程序的确切程序。

例如：我的主页有运行类似 **http://localhost/Onlineupdate/Home.aspx?vers=1.1&lang=fr-FR 的URL**

基于上面的 URL，我将**vers**和**lang**变量剥离并保存在 Session 变量中。但是，这些在 IIS 上托管时会丢失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:38:06.823

有十几件事可能导致会话数据丢失：

*   IIS 重新启动
*   应用程序池重新启动
    *   由于对 web.config 的更改
    *   由于更改了 \bin 目录中的任何内容
    *   达到内存限制，或导致应用程序池重置的错误。
    *   其他几个可能的原因
*   您的主机实际上是一个网络场，并且您使用的是进程内内存，这会在一台服务器故障转移到另一台服务器时导致问题，除非您使用的是 SQL Server 会话状态模式。

由于我们没有足够的信息来准确回答您在***具体***情况下发生的情况，我希望您从阅读开始，从这里开始：http: [//msdn.microsoft.com/en-us/library/ms178581。 aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

***编辑：***我确实找到了这篇博客文章，这可能会有所帮助：http: [//blogs.msdn.com/b/amenon/archive/2007/08/21/troubleshooting-session-loss.aspx](http://blogs.msdn.com/b/amenon/archive/2007/08/21/troubleshooting-session-loss.aspx)

* * *

*以下内容不一定是答案的一部分，但为了提供帮助而添加。*

如果可行的话，根据我个人的经验，我们已经通过使用 SqlServer 会话状态模式成功地消除了会话丢失问题。自从我们实施了这个，我们的会话问题几乎消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T21:05:40.963

我还发现您应该在使用之前初始化会话的主要问题，例如：

> 会话[“id”]=“”；

之后它工作得很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:51:06.050

为了防止这种情况发生，首先在 web.config 中将**restartOnExternalChanges**设置为 false。现在在 web.config 中必须手动传播更改（这意味着开发人员现在负责构建配置更改传播的机制）。

**提示：**您可以为此使用**文件观察**程序，它将监听**web.config**（或您在 web.app 中使用的**任何配置**）的更改并将其包装为可观察的**配置**，以便您可以在更改时重新加载配置。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-16T23:42:45.517

我在我的 ASP.NET MVC 网站中遇到了同样的问题。我已经通过以下步骤解决了它：

1.  打开 IIS 管理器
2.  转到应用程序池
3.  右键单击与您的网站相关的应用程序池
4.  点击“高级设置”
5.  将“空闲超时（分钟）”设置为“20”
6.  将“最大工作进程”设置为“1”
7.  单击确定关闭窗口

这些步骤解决了我的问题。

# php - 嵌套包含与 PHP

> ID：11458296
> 
> 赞同：4
> 
> 时间：2012-07-12T18:30:20.080
> 
> 标签：php, include, nested, require

我在嵌套包含时遇到问题。虽然我看到有一些类似的问题，但它们似乎没有帮助。

一般来说，我对包含没有问题，但最近我一直在尝试一些新的东西，但我无法让嵌套包含工作。

一种解决方案：[php 嵌套包含行为](https://stackoverflow.com/questions/2860143/php-nested-include-behavior)

基本设置：

*   index.php 包括 '/include/header.php'
*   header.php 包括 '/resources/login/index_alt.php'
*   index_alt.php 包括 '/resources/login/index_auth.php'
*   index_auth.php 包括 '/class/Login.class.php' 和 '/class/Connection.class/php'

我实际上并没有写这样的路径（它是为了理解深度）。这就是它在页面上的外观。

**索引.php**：

*   include('include/header.php');

**header.php** : （除了 /resources/...，每个深度级别都包含标题）

*   包括（'../resources/login/index_alt.php'）；

**index_alt.php**：

*   包括（'index_auth.php'）；

**index_auth.php**：

*   包括（'../../class/Login.class.php'）;
*   包括（'../../class/Connection.class.php'）;

在某些深度级别，头文件被接受，但包含嵌套不会......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:40:02.383

假设文件系统看起来像这样..

```
/www
   include/header.php
   class/Login.class.php
   class/Connection.class.php
   resources/login/index_alt.php
   resources/login/index_auth.php
   index.php 
```

这意味着

```
index.php: include(__DIR__ . '/include/header.php');
header.php: include(__DIR__ . '/../resources/login/index_alt.php');
index_alt.php:  include(__DIR__ . '/index_auth.php'); 
```

ETC; 见[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:39:32.060

不要使用 ../ 遍历目录树，而是使用 dirname( `__FILE__`)。此外，您可能希望 include_once() 或 require_once() 避免其他潜在问题：

索引.php：

```
include('include/header.php'); 
```

header.php：

```
include(dirname(dirname(__FILE__)) . '/resources/login/index_alt.php'); 
```

（注意 dirname( `__FILE__`) 将返回当前目录，但 dirname(dirname( `__FILE__`)) 将返回父目录）

# jquery - .dialog() 中的 Jcrop

> ID：11458300
> 
> 赞同：0
> 
> 时间：2012-07-12T18:30:31.737
> 
> 标签：jquery

我在 .dialog() 函数中创建 Jcrop。运行良好，但我无法传递我的 X 和 Y 等值！

函数“updateCoords”有效，但我无法通过它来评估 Ajax！Fire Bug 说我想通过 POST 的变量没有定义，但是“HOW！” - 我在函数 updateCoords() 中定义变量！XD

```
function open_original(gallery_id, image_name){
    $("#image_crop_canves").dialog({
        modal:true,
        width:634,
        height:741,
        buttons:{
            "SAVE":function(){
                $.ajax({
                    url: "send.php",
                    type: "POST",
                    data: "a=crop&x="+cx+"&y="+cy+"&w="+cw+"&h="+ch+"&gid="+gallery_id+"&id="+image_name,

                    success: function(){
                        $("#image_crop_canves").dialog('close');
                        window.location();
                    }
                });
            },
            "CLOSE":function(){
                $("#image_crop_canves").dialog('close');
            }
        }
    });

    $("#image_crop").html("<div id=\"image_holder_crop\"><img id=\"cropbox\" src=\"../../pics/gallery/" + gallery_id + "/original/" + image_name + "\" /></div>");

    $("#image_crop_canves").dialog('open');

    function updateCoords(c) {
        var cx = c.x;
        var cy = c.y;
        var cx2 = c.x2;
        var cy2 = c.y2;
        var cw = c.w;
        var ch = c.h;
    }

    $('#cropbox').Jcrop({
        aspectRatio: 140/360,
        onSelect: updateCoords,
        setSelect: [0, 0, 140, 360],
        minSize: [140, 360]
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:11:38.680

我为这个问题做了一点“破解”——我只是给隐藏字段提供了 jacrop 坐标，然后我在“保存”时阅读它们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:02:23.280

问题是您在函数中声明变量`updateCoords(c)`，但试图在该函数之外访问它们。这是不可能的。您可以做的是在`open_original(gallery_id, image_name)`函数中声明这些变量（ before `$("#image_crop_canves").dialog({ ... })`），然后从`updateCoords(c)`函数中设置它们的值，这样变量就可以在指定的对象中访问。

# java - 单选按钮选择设计上的渲染列表

> ID：11458301
> 
> 赞同：0
> 
> 时间：2012-07-12T18:30:35.510
> 
> 标签：java, jquery, ajax, jsp, spring-mvc

我有一个列表，其中定义了另一个列表。因此，假设它们为反射对象。（列表内的列表内的列表......等等）。在我看来，我从一个是/否问题开始，基于是，我必须显示一组数据。当用户选中 YES 时再次显示该集合。

我可以通过在呈现给客户之前构建问题并隐藏它们来实现这一点，当用户选中“是”时，我启用了该集合。但是我正在工作的集合很大，所以我不想渲染集合并隐藏如果那是没有用的。我想知道是否有更好的方法来实现这一点。（Spring MVC 3，Java 6）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:06:36.690

要在您真正需要时加载“嵌套”问题，您可以使用 ajax。例如，在您的 Spring MVC 控制器中，您可以实现如下方法：

```
@RequestMapping("/nestedQuestions")
public @ResponseBody List<Question> getNestedQuestions(@RequestParam("parentQuestion") int id){
    return yourService.getChildrenQuestionsFor(id);
} 
```

`Question`可能是一个简单的对象：

```
public class Question {

    private int id;
    private String text;

    // ...

} 
```

然后在您的页面中，如果您使用的是 jQuery：

```
function getNestedQuestions(parentQuestionId) {
    $.ajax({
        type : "GET",
        url : '/nestedQuestions',
        data : {
            parentQuestion : parentQuestionId
        },
        success : function(data) {
            // for each question in data, show it...
        },
        error : function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.responseText);
        }
    });
} 
```

`getNestedQuestions`可以从您的单选按钮事件处理程序调用该函数`onChange`，并传递父问题 ID。

# jquery - 使用 jQuery 动画

> ID：11458305
> 
> 赞同：-1
> 
> 时间：2012-07-12T18:30:44.000
> 
> 标签：jquery, jquery-plugins

我正在开发一个放大插件，其工作方式如下：

1) 页面突出显示的部分显示在一个单独的框（一个 html 元素）中，显示其放大版本。

2) 有几种方法可以使用此框的配置，例如使用 .animate 函数将其向上、向下、向左、向右移动，例如：

按键盘上的向上箭头

```
$('#monitor').animate({'marginTop': '+=50px'}, 'fast' ); return false; break; 
```

当用户希望自定义#monitor 的大小时，问题就出现了。一种可能的方法是建议使用一些字母来增加盒子大小以及减小大小 对于这个问题有什么可能的解决方案？

请参考上面的jQuery代码段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:01:18.133

从您的最后一条评论“让我们说字母“L”的新闻框高度必须减少到 50%，它确实做到了，但文本材料是开箱即用的”

对于您制作动画的框，您也同时拥有动画字体大小

```
$( "#go1" ).click(function(){
  $( "#block1" ).animate( { width: "90%" }, { queue: false, duration: 3000 })
     .animate({ fontSize: "24px" }, 1500 )
     .animate({ borderRightWidth: "15px" }, 1500 );
}); 
```

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# javascript - d3 我可以就地重新计算数据吗？

> ID：11458309
> 
> 赞同：1
> 
> 时间：2012-07-12T18:30:50.020
> 
> 标签：javascript, svg, scale, d3.js

我有一个折线图，并且完整的数据数组附加到该线。我想从使用值列更改为数据中的 pct（百分比）列。有没有办法做到这一点，即。使用 DOM 中已有的值而不传递一组新数据？

据我所知-http: [//bl.ocks.org/3099307](http://bl.ocks.org/3099307)

```
var width = 700,   // width of svg
        height = 400,  // height of svg
        padding = 100; // space around the chart, not including labels

var data=[{"date":new Date(2012,0,1), "value": 3, 'pct': 55},
    {"date":new Date(2012,0,3), "value": 2, "pct": 30      },
    {"date":new Date(2012,0,12), "value": 33, "pct": 10},
    {"date":new Date(2012,0,21), "value": 13, "pct": 29},
    {"date":new Date(2012,0,30), "value": 23, "pct": 22}];

var x_domain = d3.extent(data, function(d) {
            return d.date; }),
        y_domain = d3.extent(data, function(d) { return d.value; });

// define the y scale  (vertical)
var yScale = d3.scale.linear()
        .domain(y_domain)
        .range([height - padding, padding]);   // map these top and bottom of the chart

var xScale =  d3.time.scale()
        .domain(x_domain)
        .range([padding, width - padding]);   // map these sides of the chart, in this case 100 and 600

// define the y axis
var yAxis = d3.svg.axis()
        .orient("left")
        .scale(yScale);

// define the x axis
var xAxis = d3.svg.axis()
        .orient("bottom")
        .scale(xScale);

// create the svg

var div = d3.select("body");

div.select("svg").remove();

var vis = div.append("svg")
        .attr("width", width)
        .attr("height", height)
        .attr("transform", "translate(" + padding + "," + padding + ")");

// draw y axis with labels and move in from the size by the amount of padding
vis.append("g")
        .attr("class", "axis yaxis")
        .attr("transform", "translate("+padding+",0)")
        .call(yAxis);

// draw x axis with labels and move to the bottom of the chart area
vis.append("g")
        .attr("class", "axis")
        .attr("transform", "translate(0," + (height - padding) + ")")
        .call(xAxis);

// DRAW LINES

var line = d3.svg.line()
        .x(function(d) {
            return xScale(d.date); })
        .y(function(d) {
            return yScale(d.value); })
        .interpolate("basis");

vis.selectAll(".lines")
        .data([data])
        .enter()
        .append("svg:path")
        .attr("d", line)
        .attr("class", "lines");

function rescale() {
    // change the y axis to show percentage

    yScale.domain([0,100])  // redraw as percentage outstanding
    vis.select(".yaxis")
            .transition().duration(1500).ease("sin-in-out")  // https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_ease
            .call(yAxis); 
```

这里会发生什么？

```
 // now redraw the line to use pct
    line.y(function(d) {
                return yScale(d.pct); });

     vis.selectAll("lines")
                .transition()
                .duration(500)
                .ease("linear");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:34:14.417

您的数据已加入，因此您只需更新您的选择：

```
var yPctScale = d3.scale.linear()
    .domain([0, 100])
    .range([height - padding, padding]);

var pct_line =  d3.svg.line()
    .x(function(d) {
        return xScale(d.date); })
    .y(function(d) {
        return yPctScale(d.pct); })
    .interpolate("basis");

vis.selectAll(".lines")
    .transition().duration(1500).ease("sin-in-out")
    .attr("d", pct_line); 
```

# android - 旧版 Android 的拖放不精确

> ID：11458316
> 
> 赞同：1
> 
> 时间：2012-07-12T18:31:05.353
> 
> 标签：android, button, view, drag-and-drop, gesturedetector

所以我正在尝试制作一个“磁性诗歌”类型的应用程序。用户将在屏幕上移动各种 Button 小部件。我正在使用 Button 小部件，因为它最接近磁铁的外观，尽管我对其他选项持开放态度！

我的手指无法正确移动物体。它们很接近，但与我的手指并不完全一致。我手机上的 X 坐标似乎很好，但 Y 坐标已关闭。这可能是由于标题栏吗？

```
private final static int DRAGGING_OFF = 0;
private final static int DRAGGING_ON = 1;

private int dragStatus;

private GestureDetector mGestureDetector; 
private int mOffsetX;
private int mOffsetY;
private LayoutParams mOldParams;
private RelativeLayout.LayoutParams lp;

@Override
public boolean onTouchEvent(MotionEvent event) {
    if(!mGestureDetector.onTouchEvent(event)) {
        if(event.getAction() == MotionEvent.ACTION_MOVE) {
            if(dragStatus == DRAGGING_ON) {
                Log.e(VIEW_LOG_TAG, "Dragging! RAW -- " + event.getRawX() + " : " + event.getRawY() + " NOT RAW -- " + event.getX() + " : " + event.getY());
                int rawX, rawY;
                int finalX, finalY;

                rawX = (int) event.getRawX();
                rawY = (int) event.getRawY();

                finalX = rawX - mOffsetX;
                finalY = rawY - mOffsetY;

                lp.setMargins(finalX, finalY, 0, 0);
                this.setLayoutParams(lp);
            }

            return true;
        } else if(event.getAction() == MotionEvent.ACTION_UP) {
            if(dragStatus == DRAGGING_ON) {
                dragStatus = DRAGGING_OFF;
                Log.e(VIEW_LOG_TAG, "Stopped dragging!");
            }

            return true;
        } else {
            return super.onTouchEvent(event);
        }
    } else {
        return true;
    }
}

private final GestureDetector.SimpleOnGestureListener mListener = new GestureDetector.SimpleOnGestureListener() {
    @Override
    public boolean onDown(MotionEvent e) {          
        int[] location = new int[2];
        Log.e(VIEW_LOG_TAG, "Down! RAW -- " + e.getRawX() + " : " + e.getRawY() + " NOT RAW -- " + e.getX() + " : " + e.getY());
        dragStatus = DRAGGING_ON;

        // Sets the current location of the View in the int[] passed to it; x then y.
        getLocationInWindow(location);
        Log.e(VIEW_LOG_TAG, "Down location: " + location[0] + " " + location[1]);

        mOffsetX = (int) e.getRawX() - location[0];
        mOffsetY = (int) e.getRawY() - location[1];
        mOldParams = getLayoutParams();

        return true;
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:38:52.090

我认为问题在于您没有获得当前接触点 Y 和缓存的最后一个接触点 y 的 DELTA。你需要这样的东西：

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final TextView textView = (TextView) findViewById(R.id.text);
        final ImageView image = (ImageView) findViewById(R.id.image);
        matrix.setTranslate(1f, 1f);
        image.setImageMatrix(matrix);
        image.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                matrix.getValues(m); //copy matrix values into array

                PointF currentXYTouchPoint = new PointF(event.getX(), event.getY());

                switch(event.getAction()) {
                    case MotionEvent.ACTION_DOWN: //start of pressed gesture
                        lastXYTouchPoint.set(event.getX(), event.getY()); //save the last touchpoint
                        mode = DRAG;
                        break;
                    case MotionEvent.ACTION_MOVE:
                        //calculate the change in finger position
                        float deltaX = currentXYTouchPoint.x - lastXYTouchPoint.x;
                        float deltaY = currentXYTouchPoint.y - lastXYTouchPoint.y;
                        matrix.postTranslate(deltaX, deltaY); //move the entire image by the deltas
                        image.setImageMatrix(matrix);

                        // save this last starting touchpoint
                        lastXYTouchPoint.set(currentXYTouchPoint.x, currentXYTouchPoint.y);
                        break;
                }

                textView.setText("TouchPoint started at " + currentXYTouchPoint.x + ", " + currentXYTouchPoint.y + " & the matrix is now " + Arrays.toString(m));
                return true;
            }
        });

    } 
```

使其适应您自己的目的，但基本思想就在那里。

# php - 如何在php中做+或-？

> ID：11458319
> 
> 赞同：1
> 
> 时间：2012-07-12T18:31:13.297
> 
> 标签：php

我想通过以下方式获得表格：

```
[-] [value] [+] 
```

我不知道如何编写逻辑脚本以使 PHP 中的值高 1 或低 1。

我假设以下内容会起作用：

```
<?php

$i = 0;

if($_SERVER['REQUEST_METHOD'] == 'POST')
{
    if(isset($_POST['plus']))
    {
        $i++;
    }

    if(isset($_POST['min']))
    {
        $i--;
    }
}

?> 
```

我的表格如下：

```
<form action="" method="post">
    <input type="submit" name="min" value="-"> <input type="text" value=<?php echo $i ?> >         <input type="submit" name="plus" value="+">
</form> 
```

但我只得到 1 或 -1。有人可以告诉我如何以一种好的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:32:52.293

PHP 将简单地在服务器端加载代码并在页面加载时运行。如果您希望在保持在同一页面上的同时动态增加/减少值，我建议您学习 Javascript 和 jQuery。

**参考**：[https ://developer.mozilla.org/en/JavaScript/](https://developer.mozilla.org/en/JavaScript/)

**参考**：http: [//jQuery.com/](http://jQuery.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:37:05.340

试试这个：

```
<?php

if($_SERVER['REQUEST_METHOD'] == 'POST')
{
    $i = $_POST['current_value'] || 1;
    if(isset($_POST['plus']))
    {
        $i++;
    }

    if(isset($_POST['min']))
    {
        $i--;
    }
}
?> 
```

还有这个：

```
<form action="" method="post">
    <input type="submit" name="min" value="-"> <input name="current_value" type="text" value=<?php echo $i ?> >         <input type="submit" name="plus" value="+">
</form> 
```

您需要一些方法来让当前值在请求之间保持不变 - 根据您的用例，您可能需要 Rocket 提到的数据库存储，或者这种简单的当前值传回可能就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:35:34.700

您的代码发生的情况是您正在递增一个在开始时设置为 0 的全局变量。这就是为什么您返回的唯一值或 1 或 -1。这可以通过传递每次递增的变量而不是使用全局变量来解决。这样，它会保持每个正负之间的值，并且不会一直重置它。

# webdriver - 在自定义扩展中使用 Selenium WebDriver

> ID：11458326
> 
> 赞同：0
> 
> 时间：2012-07-12T18:31:42.053
> 
> 标签：webdriver, firefox-addon, dom-events, selenium-firefoxdriver, xpi

我正在开发一个 Firefox 扩展并且需要生成合成事件。我希望将此事件视为“本地”事件。但是，Firefox 公开的 DOM API（createEvent、initEvent）并没有真正表现为原生事件。我意识到 Selenium 通过采用原生事件解决了这个问题。

我的问题是，我可以在我的扩展程序中独立使用 webdriver.xpi 吗？我的扩展是基于 JavaScript 的。如果是，如何？以前有人做过吗？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T23:12:06.033

硒是不必要的：

> 您可以使用[nsIDOMWindowUtils.sendMouseEventToWindow()](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIDOMWindowUtils#sendMouseEventToWindow%28%29)代替 document.createEvent()。此方法用于测试，也将生成本机事件。

**参考**

*   [Firefox 扩展生成的事件是否“可信”？](https://stackoverflow.com/questions/11456705/)

# html - 应该将这些数据组织成一个表格还是一系列 div？

> ID：11458330
> 
> 赞同：0
> 
> 时间：2012-07-12T18:32:02.937
> 
> 标签：html, django

最近在工作中有一些关于如何最好地呈现一些数据的讨论，并且在某些页面是否应该使用表格来显示信息与使用 Bootstrap 创建伪表格之间似乎存在一些内部冲突。

如果我们决定继续使用表格来显示信息，这就是来源的样子。一些有条件的胡言乱语已被删除。

```
 <table class="table well">
  <thead>
      <th> Name </th>
      <th> Detail #1 </th>
      <th> Detail #2 </th>
      <th> Detail #3 </th>
  </thead>
  <tbody class="sortable">
  {% for m in model_list %}
      <tr id="{{ m.id }}">

          <td><span class='number-style'> {{ forloop.counter }}.</td>
          <td>{{ m.name}}</td>
          <td>{% autoescape off %}{{ m.detail1 }}{% endautoescape %} </td>
          <td>{% autoescape off %}{{ m.detail2}}{% endautoescape %} </td>
          <td>{% autoescape off %}{{ m.detail3}}{% endautoescape %} </td>
        </tr>
    {% endfor %}
  </tbody> 
```

这就是使用引导 div

```
{% for m in model_list %}
<div class="row">
    <div class="span2">
    {{ m.name }}
    </div>

    <div class="span2" style="word-wrap: break-word">
        {% autoescape off %}{{ m.details1 }}{% endautoescape %}
    </div>

    <div class="span2" style="word-wrap: break-word">
        {% autoescape off %}{{ m.details2 }}{% endautoescape %}
    </div>

    <div class="span2" style="word-wrap: break-word">
        {% autoescape off %}{{ m.details3 }}{% endautoescape %}
    </div>

</div>
{% endfor %} 
```

请记住，这两者都包含在使用引导程序布局的页面中，并且它们可能是页面上每个“表”的多个实例。哪种方法更普遍？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:13:38.470

每一行对于细节 1 是否都有相同的数据类型？同样对于细节 2 和 3？如果行之间的关系是都有 3 个详细信息，但是这 3 个详细信息可以是各种类型，而不是具体的类型 1、类型 2 和类型 3，那么使用 table 不是正确的方法。

例如，如果我列出书籍并且它们的详细信息是固定的并且类型为 [作者、类别、成本]，那么我肯定会使用表格。

但是，如果我列出了一些书籍 [作者、类别、成本]，一些我列出了 [作者、出版商、版本]，而另一些书籍则列出了完全不同的集合，那么 table 不是正确的方式。表格不应用于视觉样式和排列。

看到您的代码，我有一种强烈的感觉，即细节是相同的数据类型，因此应该在表格中呈现。

# facebook-graph-api - FQL - 有多少朋友参加了一组特定的活动

> ID：11458333
> 
> 赞同：1
> 
> 时间：2012-07-12T18:32:15.993
> 
> 标签：facebook-graph-api, facebook-fql

有一组`event_id`s。我需要找出有多少朋友参加了每个活动。FB 在其建议的活动页面中做到了这一点。前任。**3 个朋友正在参加 xxx**。

[这里](https://stackoverflow.com/a/7224549/722948)解释了**一个**事件，但我想在单个查询中获取类似地图的响应。回复喜欢

```
{
 e1:{f2},
 e2:{f3,f1}, 
 e3:{f2,f3,f5,f8}
} 
```

可能吗？

# php - mime - php邮件不发送邮件

> ID：11458334
> 
> 赞同：0
> 
> 时间：2012-07-12T18:32:18.753
> 
> 标签：php, email, mime

```
$content = chunk_split(base64_encode(file_get_contents('test.dpa')));
$uid = md5(uniqid(time()));

$header = "From: mail@mail.com\r\nReply-To: mail@mail.com\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
$header .= "This is a multi-part message in MIME format.\r\n";
$header .= "--".$uid."\r\n";
$header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
$header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$header .= $msg."\r\n\r\n";

$header .= "--".$uid."\r\n";
$header .= "Content-Type: application/octet-stream; name=\"test.dpa\"\r\n";
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "Content-Disposition: attachment; filename=\"test.dpa\"\r\n\r\n";
$header .= $content."\r\n\r\n";

if( mail($_POST['email'], 'TESTING MAIL', "", $header ) )
    echo "SUCCESS !";
else
    echo "NOPE !"; 
```

我想发送带有附件的邮件。我正在`$msg`从已完成的表格中格式化。- test.dpa - 是一个文件。

我的问题在于声明。为什么声明是 FALSE ？如果我想发送邮件，我会得到“NOPE”结果。但为什么？问题出在哪里？我不明白。

# iphone - iPhone解析附件url标签？

> ID：11458339
> 
> 赞同：0
> 
> 时间：2012-07-12T18:32:49.800
> 
> 标签：iphone, rss, xml-parsing, gdata

我正在处理的博客有问题。我用来解析的方法是：

```
NSArray *channels = [rootElement elementsForName:@"channel"];
for (GDataXMLElement *channel in channels)
{
    NSString *blogTitle = [channel valueForChild:@"title"];
    NSArray *items = [channel elementsForName:@"item"];
    for (GDataXMLElement *item in items)
    {
        NSString *articleTitle = [item valueForChild:@"title"];
        NSString *articleUrl = [item valueForChild:@"link"];
        NSString *articleDateString = [item valueForChild:@"pubDate"];
    }
} 
```

编辑：XML 看起来像：

```
<item>
    <title>Your Direction Determines Your Destination</title>
    <link>http://treymorgan.podbean.com/2012/06/05/your-direction-determines-your-destination/</link>

    <comments>http://treymorgan.podbean.com/2012/06/05/your-direction-determines-your-destination/#comments</comments>
    <pubDate>Tue, 05 Jun 2012 17:57:07 +0000</pubDate>
    <dc:creator>treymorgan</dc:creator>

<category></category>
    <guid isPermaLink="false">http://treymorgan.podbean.com/2012/06/05/your-direction-determines-your-destination/</guid>
    <description><![CDATA[Part 1 of the series &#8230; Road Trip

]]></description>
        <content:encoded><![CDATA[<p>Part 1 of the series &#8230; Road Trip
</p>
]]></content:encoded>

        <wfw:commentRss>http://treymorgan.podbean.com/2012/06/05/your-direction-determines-your-destination/feed/</wfw:commentRss>
        <enclosure url="http://treymorgan.podbean.com/mf/feed/x52488/DirectionDeterminesyourDestination.mp3" length="32015229" type="audio/mpeg"/>
</item> 
```

这样我就可以从 XML 中的 Title 标签获取文章的标题。我解析的大多数 xml 都包含 mp3，无论是在“guid”还是“link”标签中。但是，我正在使用的当前提要如下所示：

```
<enclosure url="http://treymorgan.podbean.com/mf/feed/bf8mvq/Accommoditions.mp3" length="29865594" type="audio/mpeg"/> 
```

如何将附件中的 url 传递到 NSString 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:44:07.723

应该这样`[[item attributeForName: @"url"] stringValue]`做。根据`enclosure`元素在 XML 树中的实际位置，您当然可能需要使用另一个元素来代替`channel`。

答案是

```
[[[[item elementsForName: @"enclosure"] lastObject] attributeForName: @"url"] stringValue] 
```

# r - 将文本添加到 ggplot2 中的多面图，X 轴上带有日期

> ID：11458349
> 
> 赞同：11
> 
> 时间：2012-07-12T18:33:23.043
> 
> 标签：r, text, ggplot2, time-series

我是 ggplot2 的新手，它很棒，但我在一件事上遇到了困难。

我已经绘制了许多跨越一年的时间序列。X 轴是从 class 的变量派生的`Date`。我已经对情节进行了刻面，以便在具有独立 y 轴的列中有 7 个时间序列。该图的重点是比较每个刻面与顶部刻面的相关性。

我想做的最后一件事是将文本（每个方面与第一个方面之间的估计 pearson 相关性）添加到每个方面右上角的图中。

这被证明是非常困难的，因为`geom_text()`每一位文本都需要 x 和 y 坐标。当 X 轴是日期并且 Y 轴对于每个方面都不同时，如何指定坐标？这是我到目前为止的一些示例数据和代码，因此您可以重现我到目前为止的内容：

```
library(ggplot2)

date <- rep(as.Date(1:365,origin='2011-1-1'),7)
location <- factor(rep(1:7,365))
product <- rep(letters[1:7], each=365)
value <- c(sample(1:10, size=365, replace=T),sample(1:3, size=365, replace=T),
           sample(10:100, size=365, replace=T), sample(1:50, size=365, replace=T),
           sample(1:20, size=365, replace=T),sample(50:100, size=365, replace=T),
           sample(1:100, size=365, replace=T))
dat<-data.frame(date,location,product,value)

qplot(date, value, data=dat, geom="line", color=location, group=location, 
      main='Time Series Comparison', xlab='Month (2011)',ylab='Value') + 
        facet_grid(product ~ ., scale = "free_y") 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T07:52:17.997

这不是最整洁的代码，但我认为它有点像你所追求的：

```
library(plyr)

corr_dat<-ddply(dat, .(product), summarise, value=value)
corr.df<-unstack(corr_dat, value~product)

corr_plot <- data.frame(date=max(dat$date),
                        label=paste0("rho==",round(cor(corr.df)[,1], 2)), 
                        ddply(dat, .(product), summarise, 
                          value=(min(value)+max(value))/2))

ggplot(dat, aes(x=date, y=value, color=location, group=location)) + 
  geom_line()+
  facet_grid(product ~ ., scale = "free_y")+
  geom_text(data=corr_plot, aes(x=date, y=value, label=label), 
            colour="black", inherit.aes=FALSE, parse=TRUE) 
```

![用表达式绘图](../Images/4874e8c35f9b10aece7b5726cafd2113.png)

# python - 替代 tuntap

> ID：11458350
> 
> 赞同：3
> 
> 时间：2012-07-12T18:33:23.893
> 
> 标签：python, networking, tunnel, ioctl, gnuradio

我正在尝试通过连接到我的计算机（特别是 USRP）的无线电传输 TCP/IP。现在，使用 Tun/Tap 设置一个新的网络接口非常简单。这是代码：

```
 from gnuradio import gr, gru, modulation_utils
from gnuradio import usrp
from gnuradio import eng_notation
from gnuradio.eng_option import eng_option
from optparse import OptionParser

import random
import time
import struct
import sys
import os

# from current dir
from transmit_path import transmit_path
from receive_path import receive_path
import fusb_options

#print os.getpid()
#raw_input('Attach and press enter')

# Linux specific...
# TUNSETIFF ifr flags from <linux/tun_if.h>

IFF_TUN     = 0x0001   # tunnel IP packets
IFF_TAP     = 0x0002   # tunnel ethernet frames
IFF_NO_PI   = 0x1000   # don't pass extra packet info
IFF_ONE_QUEUE   = 0x2000   # beats me ;)

def open_tun_interface(tun_device_filename):
    from fcntl import ioctl

    mode = IFF_TAP | IFF_NO_PI
    TUNSETIFF = 0x400454ca

    tun = os.open(tun_device_filename, os.O_RDWR)
    ifs = ioctl(tun, TUNSETIFF, struct.pack("16sH", "gr%d", mode))
    ifname = ifs[:16].strip("\x00")
    return (tun, ifname)

# /////////////////////////////////////////////////////////////////////////////
#                             the flow graph
# /////////////////////////////////////////////////////////////////////////////

class my_top_block(gr.top_block):

    def __init__(self, mod_class, demod_class,
                 rx_callback, options):

        gr.top_block.__init__(self)
        self.txpath = transmit_path(mod_class, options)
        self.rxpath = receive_path(demod_class, rx_callback, options)
    self.connect(self.txpath);
    self.connect(self.rxpath);

    def send_pkt(self, payload='', eof=False):
        return self.txpath.send_pkt(payload, eof)

    def carrier_sensed(self):
        """
        Return True if the receive path thinks there's carrier
        """
        return self.rxpath.carrier_sensed()

# /////////////////////////////////////////////////////////////////////////////
#                           Carrier Sense MAC
# /////////////////////////////////////////////////////////////////////////////

class cs_mac(object):
    """
    Prototype carrier sense MAC

    Reads packets from the TUN/TAP interface, and sends them to the PHY.
    Receives packets from the PHY via phy_rx_callback, and sends them
    into the TUN/TAP interface.

    Of course, we're not restricted to getting packets via TUN/TAP, this
    is just an example.
    """
    def __init__(self, tun_fd, verbose=False):
        self.tun_fd = tun_fd       # file descriptor for TUN/TAP interface
        self.verbose = verbose
        self.tb = None             # top block (access to PHY)

    def set_top_block(self, tb):
        self.tb = tb

    def phy_rx_callback(self, ok, payload):
        """
        Invoked by thread associated with PHY to pass received packet up.

        @param ok: bool indicating whether payload CRC was OK
        @param payload: contents of the packet (string)
        """
        if self.verbose:
            print "Rx: ok = %r  len(payload) = %4d" % (ok, len(payload))
        if ok:
            os.write(self.tun_fd, payload)

    def main_loop(self):
        """
        Main loop for MAC.
        Only returns if we get an error reading from TUN.

        FIXME: may want to check for EINTR and EAGAIN and reissue read
        """
        min_delay = 0.001               # seconds

        while 1:
            payload = os.read(self.tun_fd, 10*1024)
            if not payload:
                self.tb.send_pkt(eof=True)
                break

            if self.verbose:
                print "Tx: len(payload) = %4d" % (len(payload),)

            delay = min_delay
            while self.tb.carrier_sensed():
                sys.stderr.write('B')
                time.sleep(delay)
                if delay < 0.050:
                    delay = delay * 2       # exponential back-off

            self.tb.send_pkt(payload)

# /////////////////////////////////////////////////////////////////////////////
#                                   main
# /////////////////////////////////////////////////////////////////////////////

def main():

    mods = modulation_utils.type_1_mods()
    demods = modulation_utils.type_1_demods()

    parser = OptionParser (option_class=eng_option, conflict_handler="resolve")
    expert_grp = parser.add_option_group("Expert")

    parser.add_option("-m", "--modulation", type="choice", choices=mods.keys(),
                      default='gmsk',
                      help="Select modulation from: %s [default=%%default]"
                            % (', '.join(mods.keys()),))

    parser.add_option("-v","--verbose", action="store_true", default=False)
    expert_grp.add_option("-c", "--carrier-threshold", type="eng_float", default=30,
                          help="set carrier detect threshold (dB) [default=%default]")
    expert_grp.add_option("","--tun-device-filename", default="/dev/net/tun",
                          help="path to tun device file [default=%default]")

    transmit_path.add_options(parser, expert_grp)
    receive_path.add_options(parser, expert_grp)

    for mod in mods.values():
        mod.add_options(expert_grp)

    for demod in demods.values():
        demod.add_options(expert_grp)

    fusb_options.add_options(expert_grp)

    (options, args) = parser.parse_args ()
    if len(args) != 0:
        parser.print_help(sys.stderr)
        sys.exit(1)

    if options.rx_freq is None or options.tx_freq is None:
        sys.stderr.write("You must specify -f FREQ or --freq FREQ\n")
        parser.print_help(sys.stderr)
        sys.exit(1)

    # open the TUN/TAP interface
    (tun_fd, tun_ifname) = open_tun_interface(options.tun_device_filename)

    # Attempt to enable realtime scheduling
    r = gr.enable_realtime_scheduling()
    if r == gr.RT_OK:
        realtime = True
    else:
        realtime = False
        print "Note: failed to enable realtime scheduling"

    # If the user hasn't set the fusb_* parameters on the command line,
    # pick some values that will reduce latency.

    if options.fusb_block_size == 0 and options.fusb_nblocks == 0:
        if realtime:                        # be more aggressive
            options.fusb_block_size = gr.prefs().get_long('fusb', 'rt_block_size', 1024)
            options.fusb_nblocks    = gr.prefs().get_long('fusb', 'rt_nblocks', 16)
        else:
            options.fusb_block_size = gr.prefs().get_long('fusb', 'block_size', 4096)
            options.fusb_nblocks    = gr.prefs().get_long('fusb', 'nblocks', 16)

    #print "fusb_block_size =", options.fusb_block_size
    #print "fusb_nblocks    =", options.fusb_nblocks

    # instantiate the MAC
    mac = cs_mac(tun_fd, verbose=True)

    # build the graph (PHY)
    tb = my_top_block(mods[options.modulation],
                      demods[options.modulation],
                      mac.phy_rx_callback,
                      options)

    mac.set_top_block(tb)    # give the MAC a handle for the PHY

    if tb.txpath.bitrate() != tb.rxpath.bitrate():
        print "WARNING: Transmit bitrate = %sb/sec, Receive bitrate = %sb/sec" % (
            eng_notation.num_to_str(tb.txpath.bitrate()),
            eng_notation.num_to_str(tb.rxpath.bitrate()))

    print "modulation:     %s"   % (options.modulation,)
    print "freq:           %s"      % (eng_notation.num_to_str(options.tx_freq))
    print "bitrate:        %sb/sec" % (eng_notation.num_to_str(tb.txpath.bitrate()),)
    print "samples/symbol: %3d" % (tb.txpath.samples_per_symbol(),)
    #print "interp:         %3d" % (tb.txpath.interp(),)
    #print "decim:          %3d" % (tb.rxpath.decim(),)

    tb.rxpath.set_carrier_threshold(options.carrier_threshold)
    print "Carrier sense threshold:", options.carrier_threshold, "dB"

    print
    print "Allocated virtual ethernet interface: %s" % (tun_ifname,)
    print "You must now use ifconfig to set its IP address. E.g.,"
    print
    print "  $ sudo ifconfig %s 192.168.200.1" % (tun_ifname,)
    print
    print "Be sure to use a different address in the same subnet for each machine."
    print

    tb.start()    # Start executing the flow graph (runs in separate threads)

    mac.main_loop()    # don't expect this to return...

    tb.stop()     # but if it does, tell flow graph to stop.
    tb.wait()     # wait for it to finish

if __name__ == '__main__':
    try:
        main()
    except KeyboardInterrupt:
        pass 
```

（任何熟悉 GNU Radio 的人都会认为这是 tunnel.py） 我的问题是，有没有比 tun/tap 更好的方法来将数据包移入和移出内核？我一直在研究 ipip 或者可能使用套接字，但我很确定这些不会很快。速度是我最关心的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:19:50.200

请记住，tunnel.py 是一个非常非常粗略的示例，并且已经有一段时间没有更新了。它并不是真的要成为其他代码的基础，所以要小心你对代码的依赖程度。

另外，请记住，不可靠无线电链路上的 TCP 存在重大问题： [http ://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_over_wireless_networks](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_over_wireless_networks)

# javascript - 如何使用 (JavaScript) for 循环遍历嵌套的 Json 数组并显示文本

> ID：11458355
> 
> 赞同：0
> 
> 时间：2012-07-12T18:33:46.490
> 
> 标签：javascript, json, loops, nested-loops

这可能是一个相当简单的问题，但无论我更改 for 循环多少次，它都对我不起作用。那么如何在 JavaScript 中使用 for 循环遍历这个数组呢？

```
var fielditems =[
     [["News Tips"],["Opinions"],["MedMinutes"]],
     [["Yes"],["No"],["Maybe"]],
     [["How"],["Why"],["When"]]
]; 
```

这就是我所拥有的，但它不起作用。我使用警报来测试结果，但它甚至没有返回任何东西。

```
for(itemSet in fielditems){
    var itemSetValues = fielditems[itemSet];
    for(set in itemSetValues){
        var itemValue = itemSetValues[set];
        for(value in itemvalue){
            alert(itemValue[value]);
        }
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:37:50.893

不要`for()`用于`in`数组。它用于对象属性。请改用标准格式。

**演示：http:** [//jsfiddle.net/ThinkingStiff/EVWch/](http://jsfiddle.net/ThinkingStiff/EVWch/)

### 脚本：

```
var fielditems =[
        [["News Tips"],["Opinions"],["MedMinutes"]],
        [["Yes"],["No"],["Maybe"]],
        [["How"],["Why"],["When"]]
    ];

for( var itemIndex = 0; itemIndex < fielditems.length; itemIndex++ ){
    var itemSetValues = fielditems[itemIndex];
    for(var setIndex = 0; setIndex < itemSetValues.length; setIndex++ ){
        var itemValue = itemSetValues[setIndex];
        for(var valueIndex = 0; valueIndex < itemValue.length; valueIndex++ ){
            alert(itemValue[valueIndex]);
        };
    };
}; 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:39:51.157

首先，控制台是你的朋友。您会收到错误`ReferenceError: itemvalue is not defined`，因为 javascript 区分大小写。`itemvalue`将最嵌套的循环更改为`itemValue`.

其次，如果你想遍历一个数组，你应该使用 for-loop 而不是 for-in-loop

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:39:55.213

*   不要`for-in`在数组上使用循环
*   不要使用（运行）变量而不将它们声明为本地变量

```
for (var i=0; i<fielditems.length; i++) {
    var itemSetValues = fielditems[i];
    for (var j=0; j<itemSetValues.length; j++) {
        var itemvalue = itemSetValues[j]; // notice the case
        for (var k=0; k<itemvalue.length; k++) {
            alert(itemvalue[k]);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:40:51.243

`for..in`适用于对象 ( `{}`)，不适用于数组 ( `[]`)。

您需要使用标准`for`循环。

```
for(var i = 0, iLen = fielditems.length; i < iLen; i++){
    var iItem = fielditems[i];
    for(var j = 0, jLen = iItem.length; j < jLen; j++){
        var jItem = iItem[j];
        alert(jItem[0]); // you can also add another loop here, if this will have more elements
    }
} 
```

笔记：

```
for(var i = 0, iLen = fielditems.length; i < iLen; i++) 
```

优于：

```
for(var i = 0; i < fielditems.length; i++) 
```

因为`fielditems.length`不是每个循环都请求，只是在开始时请求一次。

# objective-c - 如何以编程方式仅更改我的应用程序的语言和区域设置

> ID：11458358
> 
> 赞同：0
> 
> 时间：2012-07-12T18:34:02.297
> 
> 标签：objective-c, macos, locale

我想将我的应用程序的语言和区域设置单独更改为与系统上设置的用户默认语言不同的语言。假设我的应用程序应该使用法语资源，即使系统默认设置为英语。

我找到了一些 iOS 示例（[如何强制 NSLocalizedString 使用特定语言](https://stackoverflow.com/questions/1669645/how-to-force-nslocalizedstring-to-use-a-specific-language)），但即使这仅适用于语言，但对于 OSX 则没有。我的包中有法语资源。我只想覆盖我的应用程序的默认值。无需从系统首选项更改整个操作系统区域设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:27:25.853

有一些很好的应用程序可以解决这个问题：[语言切换器](http://www.tj-hd.co.uk/en-gb/languageswitcher/)和[应用程序语言](https://itunes.apple.com/us/app/app-language-chooser/id451732904)选择器等等。

要以编程方式执行此操作，您可以使用`defaults`命令将应用程序的`AppleLanguages`属性更改为`(fr)`或`(en, ko)`，如以下 shell 脚本：

```
bundleId=BUNDLE_ID_OF_YOUR_APP  # such as, com.apple.Finder
# change AppleLanguages
defaults write $bundleId AppleLanguages "(fr)"
# open your app
open -b $bundleId
# then restore the language
defaults delete $bundleId AppleLanguages 
```

有关更多详细信息，请参阅超级用户对这个类似问题的答案：[我可以更改 Snow Leopard 中应用程序/程序的默认语言吗？](https://superuser.com/a/46301/45702).

# asp.net - SMTP.SendMail 错误 - 现有连接被远程主机强行关闭

> ID：11458360
> 
> 赞同：1
> 
> 时间：2012-07-12T18:34:03.263
> 
> 标签：asp.net, email, smtp

我正在尝试使用以下代码发送电子邮件并收到上述错误。

发送了两封电子邮件，第一封似乎可以正常发送，下面的代码似乎不起作用。

有人可以帮忙吗？

```
 using (var mail = new MailMessage(fromEmail.Trim(), ToEmail.Trim()))
        {
            mail.IsBodyHtml = true;

            bodyText = bodyText.Replace("**Message**", Message);

            // populate the message
            mail.Subject = subject;
            mail.Body = bodyText;

            // send it
            var smtpClient = new SmtpClient();
            smtpClient.Send(mail);
        } 
```

配置：

```
 <system.net>
    <mailSettings>
      <smtp from="test@foo.com">
        <network defaultCredentials="true" port="25" host="127.0.0.1" password="" userName=""/>
      </smtp>
    </mailSettings>
  </system.net> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:36:44.963

而不是将其`MailMessage`作为`using`块的主题，而是尝试制作`SmtpClient`主题。

编辑：如果您的 .net 版本 < 4.0，您将需要进行一些检查以确保在尝试发送另一条消息之前处理 smtp 客户端。

假设`using`块也代表实例方法的主体，一个简单的测试可能是：

1.  创建包含类的实例

2.  通过调用上面引用的类方法发送第一条消息

~~*   ~~~~设置 reference = null （换句话说，确保 SmtpClient 实际已被标记/处置。您可能希望/需要手动处置实例作为进一步检查）~~

    Jeff Tucker 建议您将`SmtpClient.Timeout`值设置为`2`- 有关更多信息，请参阅他的评论。~~ ~~*   创建同一类的新实例

    *   发送第二条消息~~~~ 

 ~~~~之后（假设可行），您可以迭代这些步骤以优化和缩小逻辑，直到您对它感到满意。~~~~

# session - OAuth 2.0\. No session? (stateless)

> ID：11458364
> 
> 赞同：17
> 
> 时间：2012-07-12T18:34:22.813
> 
> 标签：session, rest, oauth, oauth-2.0, stateless

I'm going to implement **OAuth 2.0** and **REST API** with it

to grant different permissions per users and also to scale well.

To scale well, **stateless** is easier because there is

**NO** file, database, in-memory based session with it.

* * *

Below is how I understand OAuth 2.

1.  OAuth Server give an access token to a user.
2.  The user's access token is stored in cookie.
3.  When user access to REST API, user sends with the access token.
4.  Server receives request with access token.
5.  Server find out whether access token is valid and the user has permission to do request.
6.  Do or reject based on user's privilege.

* * *

So I do not have to worry about session storage. Right?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T20:07:32.457

What you are describing here, is the OAuth 2 [Implicit Grant flow](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-28#page-8). OAuth 2 also includes three other flows, but as it seems that your ressource owner (the user) is initiating requests using browser side Javascript (you were talking about cookies), this is the flow you should go for.

On client side, OAuth only requires you to store the `access_token` for accessing protected ressources (and a [`refresh_token`](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-28#page-10) if you're going for an expiring `access_token`).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-01T20:31:22.797

A more recent innovation is JWT - JSON Web Token.

Here is a link to the spec: [JWT - JSON Web Token](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html)

JWT is a method of using Hashed tokens using a Hashing method such as HMAC which stands for a Hash-based Message Authentication Code. Because the token is hashed using a secret key, the server can determine if the token has been tampered with.

Here is an example method to create a Hashed token for JWT:

```
 public String createTokenForUser(User user) {
        byte[] userBytes = toJSON(user);
        byte[] hash = createHmac(userBytes);
        final StringBuilder sb = new StringBuilder(170);
        sb.append(toBase64(userBytes));
        sb.append(SEPARATOR);
        sb.append(toBase64(hash));
        return sb.toString();
    } 
```

Here is an example of decoding a token to ensure it was not tampered with:

```
public User parseUserFromToken(String token) {
    final String[] parts = token.split(SEPARATOR_SPLITTER);
    if (parts.length == 2 && parts[0].length() > 0 && parts[1].length() > 0) {
        try {
            final byte[] userBytes = fromBase64(parts[0]);
            final byte[] hash = fromBase64(parts[1]);

            boolean validHash = Arrays.equals(createHmac(userBytes), hash);
            if (validHash) {
                final User user = fromJSON(userBytes);
                if (new Date().getTime() < user.getExpires()) {
                    return user;
                }
            }
        } catch (IllegalArgumentException e) {
            //log tampering attempt here
        }
    }
    return null;
} 
```

Here is an article with a more complete example: [Stateless Authentication](http://blog.jdriven.com/2014/10/stateless-spring-security-part-2-stateless-authentication/)

# python - C中的字符串列表：类似python的快捷方式？

> ID：11458368
> 
> 赞同：0
> 
> 时间：2012-07-12T18:34:39.173
> 
> 标签：python, c, arrays, string

在使用 Python 多年后，我将重返 C 语言编程。一件事我想知道在 C 中哪些工具最适合编写类似于 Python 的东西：

list1=["foo","bar"]

我想出的最接近的是：

```
char * list1[2];
list1[0]="foo";
list1[1]="bar"; 
```

这工作正常，但有点笨拙。我在网上看到了一些使用 {} 的 C++ 示例，我想知道是否有办法让这个成语（或类似的东西）在纯 C 中工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:36:12.527

这也应该适用于C。尝试，

```
const char * list1[] = { "foo", "bar" }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:37:38.977

您可以做一些非常相似的事情来初始化 C 中的*数组*（默认情况下不存在列表）

```
char * myStringArray[4] = { "This", "is", "my", "array" }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:10:23.477

有一个警告：当你从这样的字符串初始化时，你必须记住尾随的 nul 字节在那里。

此外，完全限定指针的 const 性也是一个好习惯：（`const char *const list1[]={"foo","bar"};`假设它确实是指向 const 数据的 const 指针数组）。

# javascript - 无法拦截上下文菜单项单击

> ID：11458373
> 
> 赞同：1
> 
> 时间：2012-07-12T18:35:18.813
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

谁能告诉我这段代码有什么问题？当用户选择一个单词并右键单击时，他可以选择“打开 Wiki-Link”——这很好。但是由于某种原因，点击没有任何反应，代码`onMessage`没有被执行。为什么？

```
exports.main = function() {

    var tabs = require('tabs');
    //var sel = require('selection');
    var cm = require('context-menu');

    var menuItem = cm.Item({
        label: 'Open Wiki-Link',
        context: cm.SelectionContext(),
        contextScript: 'self.on("click", function() {' +
            'var text = window.getSelection().toString();' +
            'self.postMessage(text);' +    
        '});',
        onMessage: function(text) {
            if (text.length === 0) {
                throw ('No text selected');
            }
            tabs.open('http://de.wikipedia.org/wiki/' + text);
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:36:22.303

您的代码似乎正确，并且与[文档](https://addons.mozilla.org/en-US/developers/docs/sdk/1.8/packages/addon-kit/context-menu.html)中的示例非常匹配。我认为唯一的问题是一个错字：应该是`contentScript`，不是`contextScript`。

# java - 在 Web 应用程序旁边运行一个单独的程序

> ID：11458375
> 
> 赞同：0
> 
> 时间：2012-07-12T18:35:20.030
> 
> 标签：java, jsp, tomcat, web-applications

我有一个用 Java 编写的 Web 应用程序，通过 Tomcat 部署。我有一个单独的 Java 程序，我希望在 webapp 处于“实时”状态时始终运行它。我只希望在任何给定时间运行该程序的一个实例。

实现这种效果的最佳方法是什么？如果需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:37:46.180

实施一个[`ServletContextListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html). 在初始化上下文时初始化您的独立应用程序，并在销毁 Web 应用程序时销毁它。[一个例子](http://www.javabeat.net/2009/02/servletcontextlistener-example/)。

# shell - 使用 Shell 从页面获取随机链接

> ID：11458377
> 
> 赞同：1
> 
> 时间：2012-07-12T18:35:23.390
> 
> 标签：shell, curl

我正在尝试编写一个非常基本的基准测试脚本，它将从网站加载随机页面，从主页开始。

我将使用 curl 来获取页面的内容，但是我也想从中加载一个随机的下一页。有人可以给我一些Shell代码，从curl命令的输出中的随机a href中获取URL吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:26:59.040

同时使用 lynx 和 bash 数组：

```
hrefs=($(lynx -dump http://www.google.com |
sed -e '0,/^References/{d;n};s/.* \(http\)/\1/'))
echo ${hrefs[$(( $RANDOM % ${#hrefs[@]} ))]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:55:37.057

这是我想出的：

```
curl <url> 2> /dev/null | egrep "a href=" | sed 's/.*<a href="//' | \
cut -d '"' -f 1-1 | while read i; do echo "`expr $RANDOM % 1000`:$i"; done | \
sort -n | sed 's/[0-9]*://' | head -1 
```

用您尝试从中获取链接的 URL 替换该位。

编辑：制作一个名为 getrandomurl.sh 的脚本可能更容易，其中包含：

```
#!/bin/sh

curl $1 2> /dev/null | egrep "a href=" | sed 's/.*<a href="//' | \
cut -d '"' -f 1-1 | while read i; do echo "`expr $RANDOM % 1000`:$i"; done | \
sort -n | sed 's/[0-9]*://' | head -1 
```

并像什么一样运行它`./getrandomurl.sh http://stackoverflow.com`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:35:48.273

不是`curl`解决方案，但我认为考虑到任务更有效。

我建议为此使用该`perl` `WWW::Mechanize`模块。例如，要转储页面中的所有链接，请使用以下内容：

```
use WWW::Mechanize;

$mech = WWW::Mechanize->new();
$mech->get("URL");
$mech->dump_links(undef, 'absolute' => 1); 
```

注意`URL`应替换为想要的页面。

然后继续在 内`perl`，以下跟随`URL`页面上的随机链接：

```
$number_of_links = "" . @{$mech->links()};
$mech->follow_link( n => int(rand($number_of_links)) ) 
```

或者使用`dump_links`上面的版本来获取 url 并在 shell 中进一步处理，例如获取随机 url（如果上面的脚本被调用`get_urls.pl`）：

```
./get_urls.pl | shuf | while read; do
  # Url is now in the $REPLY variable
  echo "$REPLY"
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-20T08:18:06.297

## 使用小狗

获取页面上所有链接的灵活解决方案是使用[pup](https://github.com/ericchiang/pup)指定[CSS 选择器](https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Selectors)。例如，我可以`<a>`使用以下方法从我的博客中获取所有链接（标签）：

```
curl https://jlericson.com/ 2>/dev/null \
| pup 'a attr{href}' 
```

最后`attr{href}`只输出`href`属性。如果您运行该命令，您会注意到几个链接不是指向我网站上的帖子，而是指向我的电子邮件地址和 Twitter 帐户。

如果我只想获取博客文章链接，我可以更挑剔一些：

```
curl https://jlericson.com/ 2> /dev/null \
| pup 'a.post-link attr{href}' 
```

那只抓取带有`class='post-link'`的链接，这是指向我的帖子的链接。

现在我们可以随机选择一行输出：

```
curl https://jlericson.com/ 2> /dev/null \
| pup 'a.post-link attr{href}' \
| shuf | head -1 
```

该`shuf`命令像一副纸牌一样混合线条并将`head -1`最上面的牌从牌堆中抽出。（或者第一行，如果你愿意的话。）

我的链接都是相对的，所以我想使用以下方式附加域`sed`：

```
curl https://jlericson.com/ 2> /dev/null \
| pup 'a.post-link attr{href}' \
| sed -e 's|/|https://jlericson.com/|' \
| shuf | head -1 
```

该`sed`命令将第一个替换`/`为 URL 的其余部分。

我可能还想包含链接的文本。这有点棘手，因为`pup`不支持两个输出函数。但它确实支持输出到 JSON，可以通过以下方式读取`jq`：

```
curl https://jlericson.com/ 2> /dev/null \
| pup 'a.post-link json{}' \
| jq -r '.[] | [.text,.href] | @tsv' \
| sed -e 's|/|https://jlericson.com/|' \
| shuf | head -1 
```

这是一个制表符分隔的值输出，可能是也可能不是您想要的。

# javascript - 单击链接时如何使图像沿div顶部移动位置

> ID：11458383
> 
> 赞同：0
> 
> 时间：2012-07-12T18:35:44.587
> 
> 标签：javascript

我对这一切都很陌生，我正试图获得像这个网站一样的图像移动效果：[http](http://www.heroku.com/) ://www.heroku.com/ 。单击导航链接时，如何使图像沿 div 移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:15:14.483

您是否指的是主页上的折纸舞台图像，箭头突出显示在单击起重机时会随之移动？在这个页面上，他们正在使用 jQuery animate 方法，您可以在 home.js 文件中看到整个代码。

如果你想尝试做类似的事情，我会去做类似的事情，比如（使用 jQuery）：

```
$(function () {
    var slider = $('#slider'),
        first = $('.list-item').first(),
        margin = (first.outerWidth() - first.innerWidth()) / 2,
        // compute the offset for the slider
        // you will have to tailor those to your specific implementation
        offset = (slider.outerWidth() / 2) +
                 ((first.outerWidth() - slider.outerWidth()) / 2);
    // attach click event to the menu elements
    $('.list-item').on('click', function () {
        var self = $(this),
            siblings = self.siblings(),
            x;
        // if not active, move the slider accordingly
        if (!self.hasClass('active')) {
            siblings.removeClass('active');
            self.addClass('active');
            x = offset + margin + self.position().left;
            // the magic happens here :)
            slider.animate({
                left: x
            }, 500);
        }
    });
    // trigger the click event for the first list element
    first.trigger('click');
}); 
```

当然，之前你必须正确准备 HTML 元素，添加一些样式，并使用边距、外/内宽度等。

你可以在这里找到我的 5 分钟教程/示例：http: [//jsfiddle.net/krwck/bjVdN/10/](http://jsfiddle.net/krwck/bjVdN/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:10:11.630

可能最好的选择是 JQuery。你可以定义

```
<a class='menu'>Option 1</a>
<a class='menu'>Option 2</a>
<a class='menu'>Option 3</a>

<div id='moveable'></div> 
```

比你像这样使用 JQuery ：

```
$(".menu").click(function(){
   $("#moveable").animate({

   right: '+=150',

   }, 500, function() {
   // Animation complete.
 });
}); 
```

你也需要一些 CSS 样式。希望这个对你有帮助。

此链接也可能有所帮助：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

# java - Java 正则表达式搜索和替换

> ID：11458384
> 
> 赞同：-4
> 
> 时间：2012-07-12T18:35:45.373
> 
> 标签：java, search, replace

这段代码有什么问题？

```
public int convert(String param){
    System.out.println(param); // OUTPUT1 
    if(param=="NUM1"){
      return 10;
    }else if(param=="NUM2"){
      return 20;
    }else
      return 0;
    }
    return param;
}

String Formula="[NUM1]+[NUM2]";
Formula = Formula.replaceAll("\\[(.*?)\\]", convert("$1") );
System.out.println(Formula); // OUTPUT2 

//OUTPUT1 - $1
//OUTPUT2 - 0+0 
```

我希望 OUTPUT1 为（NUM1 或 NUM2），而 OUTPUT2 为“10+20”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T18:43:56.993

在 Java 中，不能仅用于`"$1"`引用匹配表达式的部分，如脚本语言。而是使用捕获组。

您应该从阅读[Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)的 javadoc 开始。

不是最好的事情：

```
String line = "[NUM1]+[NUM2]";
Pattern p = Pattern.compile("\\[(.*?)\\]");
Matcher m = p.matcher(line);
while(m.find()) {
    String token = m.group(1);
    String newValue = convert(token);
    line = line.replaceAll(token, newValue);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:43:36.447

Java 不是一种函数式语言（然而，v8 可能会更改添加它们）。看起来您要做的是将回调函数传递给replaceAll，但这在Java中不起作用。

您需要做的不是使用replaceAll，而是使用匹配器并获取所有令牌，然后遍历它们并在每个令牌上调用convert()，将其添加回字符串中。它要麻烦得多，但如果您想自己构建它，这是唯一的方法。

# php - 使用 cron/cURL 自动登录 Facebook

> ID：11458390
> 
> 赞同：0
> 
> 时间：2012-07-12T18:35:58.413
> 
> 标签：php, facebook, facebook-graph-api, curl, cron

我已经看到了很多解决方案，但未能成功实施其中任何一个。我已经在 Facebook 中创建了一个 App，并且可以成功使用 FQL 来检索数据。我将从我参与的页面和组中提取事件信息。我只会解析那些在我的应用程序/网站上明确注册的人的事件信息。

我正在使用 Facebook PHP SDK。问题是我想创建一个 cron 任务来定期检索事件信息，但我不知道如何让 cron 任务自动登录。

我已经看到有实时更新，但据我所知，它们不显示事件。

我尝试使用 cURL，但它只是带来了一个空白屏幕。代码是：

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, 'https://login.facebook.com/login.php?');
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'facebook_cookies.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'facebook_cookies.txt');
curl_setopt($ch, CURLOPT_USERAGENT, 
   "Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

$email = 'xxxxxxxxxxx';
$pass = 'xxxxxxxxxxx';

curl_setopt($ch, CURLOPT_POSTFIELDS, 'email='.urlencode($email).'&     
     pass='.urlencode($pass).'&login=Login');

$result = curl_exec($ch);

echo $result;

curl_close($ch); 
```

这取自另一个 SO 问题：[Remote login to facebook account](https://stackoverflow.com/questions/3130449/remote-login-to-facebook-account)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:56:13.707

也许你不需要登录，app [access_token](http://developers.facebook.com/docs/opengraph/using-app-tokens)解决不了你的问题？

# android - 安卓测量角度

> ID：11458391
> 
> 赞同：0
> 
> 时间：2012-07-12T18:36:06.980
> 
> 标签：android, android-sensors

我知道大量的 java，但这是我第一次使用 android sdk 编程。我需要实时获取手机的旋转并将其显示在屏幕上。我想知道使用什么传感器方法，因为我听说 getOrientation 是处理器密集型的，可能无法实时工作。其次，我想知道该程序在哪个类中正确，我还不太了解 android 类层次结构。第三，如何让屏幕上的数字实时变化？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:59:44.547

> 我想知道使用什么传感器方法，因为我听说 getOrientation 是处理器密集型的，可能无法实时工作。

您需要查看[OrientationEventListener](http://developer.android.com/reference/android/view/OrientationEventListener.html)对象。

> 其次，我想知道该程序在哪个类中正确，我还不太了解 android 类层次结构。

为了让您开始，您可以将所有这些代码构建到`Activity`. 与传统的 Java 程序不同，它没有`main()`入口点方法，并且您不会使用应用程序组件类的构造函数来实例化它们。生命周期回调方法，例如`onCreate()`和`onDestroy()`是您想要对实例信息进行初始化和拆卸的地方。 [本指南](http://developer.android.com/guide/components/fundamentals.html)可以帮助您构建应用程序以使用单个`Activity`.

> 第三，如何让屏幕上的数字实时变化？谢谢您的帮助！

`OrientationEventListener`每次更改都包含一个回调方法，只需使用此回调来更新 UI 中的视图。

这是一个简单的例子：

```
public class OrientationActivity extends Activity {
    private OrientationEventListener mListener;
    private TextView mTextView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mTextView = new TextView(this);
        setContentView(mTextView);

        mListener = new OrientationEventListener(this, SensorManager.SENSOR_DELAY_UI) {
            @Override
            public void onOrientationChanged(int orientation) {
              mTextView.setText(String.valueOf(orientation);
            }
        };
    }

    @Override
    public void onResume() {
        super.onResume();
        mListener.enable();
    }

    @Override
    public void onPause() {
        super.onPause();
        mListener.disable();
    }
} 
```

# python - XML 解析 - ^H 字符/符号？

> ID：11458392
> 
> 赞同：1
> 
> 时间：2012-07-12T18:36:12.017
> 
> 标签：python, xml, string, parsing

我在尝试清理一些 XML 时遇到了非常糟糕的情况，所以我可以用 etree 在 Python 中解析它。基本上在我的 Python 脚本读取它之前，我试图转义每个字符串条目中给我的所有特殊字符

```
'xml.parsers.expat.ExpatError: not well-formed' 
```

因此，当我生成 XML 字符串条目时，我使用`sed`特殊字符替换它们的转义版本，或者只是`space`当我真的不在乎的时候。

但现在在我生成的 XML 中，我看到了一个`^H`字符，vim 将其突出显示为蓝色。

我试图逃避`^`但没有奏效，角色仍然存在，所以我认为它一定是某种复合特殊角色。

感叹为什么这很糟糕。无论如何，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:42:06.913

`^H`是表示嵌入文本中的退格字符（ASCII 字符 8）的常用方法；如果您已经在使用`sed`/`bash`进行过滤，您可以执行以下操作：

```
cat infile | sed s/$'\b'// > outfile 
```

不过，我认为您首先在输入文件中有一个 ^H 并不是一件好事……您是如何生成它的？

# ruby-on-rails-3 - 检查嵌套模型属性是否为真

> ID：11458394
> 
> 赞同：0
> 
> 时间：2012-07-12T18:36:19.623
> 
> 标签：ruby-on-rails-3

所以我有一个名为 Project 的模型，其中有一个名为 Proposal 的嵌套模型（因此每个项目都有多个提案，每个提案只属于一个项目）。

我有一个名为“获胜”的提案专栏，它只是检查是否有一个提案为该项目赢得了胜利。我想在项目的 Show 页面上引用它，但对代码有点困惑。

**我真正想做的是检查是否有任何提案具有“获胜”状态**

这是我正在为项目的显示视图尝试的，但它不起作用：

```
<% if @project.proposals.winning %>
   SUCCESSFUL
<% end %> 
```

我觉得这应该是非常基本的，但我很难弄清楚，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:20:59.957

改用它：

```
<% if @idea.proposals.count{|a| a.winning } > 0 %> 
```

或者甚至更好地在 Idea 模型中为它​​创建一个方法：

```
def has_winning?
  proposals.count{|a| a.winning } > 0
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:51:53.103

这是理想的候选人：

```
<% if @idea.proposals.any? {|proposal| proposal.winning? } %> 
```

[可枚举.any?](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-any-3F) 如果对于任何数组元素，块返回 true，则返回 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:14:10.403

好的，在另一篇文章中找到了这段代码，它似乎正在工作，但不确定这是否是最好的方法：

```
<% if @idea.proposals.map(&:winning).flatten %> 
```

# android - java/Android 文档中的@link 是什么意思？

> ID：11458398
> 
> 赞同：13
> 
> 时间：2012-07-12T18:36:37.083
> 
> 标签：android, javadoc

这是什么意思：

```
{@link KeyEvent#KEYCODE_ENTER} 
```

我已经看过几次了，我不太确定它代表什么。我正在使用 Robotium、JUnit 和 Android 编写一个测试程序。如果有人可以就这个主题提供一些澄清，更具体地说，{@link} 部分，那就太好了！

先感谢您。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T18:38:38.330

这是一个使用的注释，因此当您生成 Javadoc 时，您将获得指定项目的链接。在这种情况下，KeyEvent 类，具有 KEYCODE_ENTER 的锚点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T18:39:28.697

我还没有正式学习，所以也许有人可以扩展我所说的内容。

它是一种简写，告诉 java 文档在查看时插入指向所需位置的链接。例如，当您查看 IDE 中包含的任何方法的 javadoc 时，您将看到一个链接，单击该链接将带您到 KeyEvent.KEYCODE_ENTER javadoc。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T18:41:06.297

您可以链接到`@link`不同类或类成员的 Javadoc。另请参阅[Javadoc 文档`@link`](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javadoc.html#%7B@link%7D)

生成 Javadoc 时，会插入指向右侧页面 + 锚点的链接。这允许交叉引用 Javadoc 的其他部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-06T10:06:25.450

这是另一个类的链接。您应该能够在 IDE 中单击此链接，例如 Intellij IDEA 和 Eclipse。在评论中链接其他类非常有帮助

# php - PHP - 将时间戳 (2012-07-12 20:26:00) 转换为反映月份和日期值的两个单独变量？

> ID：11458399
> 
> 赞同：0
> 
> 时间：2012-07-12T18:36:37.850
> 
> 标签：php, regex, string, strip

我想从这个时间戳“2012-07-12 17:50:00”中分别删除日期和月份值。

所以基本上我可以有两个变量，比如：

```
$month = 7
$day = 12 
```

由于我对 php，特别是正则表达式编码不是很精通，我想我会发布这个问题来征求关于如何完成这样的事情的建议。

在这方面的任何帮助、见解或输入将不胜感激。谢谢！

注意：此外，我想将这两个变量转换为“7 月 12 日”之类的输出。这可以很容易地编码，所以我没有把它作为问题的一部分，但是如果有一个简单的函数可以处理这些信息，我也会非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:47:15.620

正如评论中所说， DateTime 将是一个不错的选择。

首先，如果您的 php 配置尚未为您设置，请通过以下方式设置您的默认时区：

```
date_default_timezone_set('XXXX'); 
```

XXXX 代表[支持的时区列表中的一个值](http://www.php.net/manual/en/timezones.php)

通过以下方式初始化您的日期：

```
$DateTime = new DateTime(); 
```

根据您获得时间戳的位置，假设您将使用 PHP 创建它：

```
$timestamp = $DateTime->getTimestamp(); 
```

现在格式化输出

```
echo $month = $DateTime->format( 'm' );
echo $day = $DateTime->format( 'd' ); 
```

或得到你想要的输出：

```
echo $output = $DateTime->format( 'dS F' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:39:40.083

```
<?php
list($month,$day) = explode(':',date('n:j',strtotime('2012-07-12 17:50:00')),2);
echo 'Month: '.$month.'<br />'."\n";//Month: 7
echo 'Day: '.$day.'<br />'."\n";//Day: 12
?> 
```

和...

```
<?php
echo date('jS F',strtotime('2012-07-12 17:50:00'));//Outputs: 12th July
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:44:23.063

假设时间戳是一个字符串，如果您正在寻找正则表达式解决方案，这样的事情应该可以工作......

```
<?php
$string = '2012-07-12 17:50:00';
preg_match_all('/\d{4}-(\d{2})-(\d{2})/', $string, $matches);
$month =$matches[1][0];
$day = $matches[2][0];
?> 
```

# javascript - Firefox 喜欢检查元素

> ID：11458403
> 
> 赞同：0
> 
> 时间：2012-07-12T18:36:48.507
> 
> 标签：javascript, css

我正在使用检查元素选项构建我的网站，以像萤火虫一样分别检查每个元素。我喜欢构建像较新版本的 Firefox 这样的样式，它将模糊除选定元素之外的所有元素。关于如何做到这一点的任何想法？下面给出了所需输出的示例。

**编辑：**请注意，这里我需要选择的元素可能比其他元素具有更低的 DOM 层次结构。例如。我可能需要将 body 容器变灰，如果我选择了一些不应该具有灰色效果的内部元素。

![在此处输入图像描述](../Images/8372ebc5eb2365f1d762f202ee66ff78.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:39:22.717

放置一个背景颜色为黑色、100% 宽度/高度、绝对定位和左侧/顶部为 0 以及不透明度介于 0 和 1 之间（例如 0.5）的 div。这给了你“灰色页面效果”。

然后，将您不想变灰的文本放在 DOM 层次结构中更高的单独 div 中（或在同一级别但具有更高的 z-index），这样它就不会被您的变灰覆盖-out div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:45:14.960

像这样的东西：

[http://jsfiddle.net/lollero/T7PyK/](http://jsfiddle.net/lollero/T7PyK/)

单击任何元素将显示覆盖并隔离该元素。单击覆盖将撤消该操作。

JS：

```
$('*').on("click", function( e ) {

    e.stopPropagation();

    var self = $(this),
        overlay = $('#overlay');

    if ( !self.hasClass('active') ) {

        if ( self.is(':not(#overlay)') ) {
            self.addClass('active');
        }
        overlay.fadeTo(400, 0.7);

    }
    if ( self.hasClass('active') ) {

        overlay.on("click", function() {
            overlay.fadeOut(400, function() {
                self.removeClass('active');
                });
        });

    }

});
​ 
```

CSS：

```
#overlay {
    display: none;
    background: #000;
    position: fixed;
    z-index: 100;
    top: 0px;
    right: 0px;
    bottom: 0px;
    left: 0px;
}

.active {
    position: relative !important;
    z-index: 101 !important;
    background: #fff;
    box-shadow: 0px 0px 50px #111;
}
​ 
```

HTML：

```
<div id="overlay"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:56:17.140

您可以使用 jQuery 叠加效果和一些 CSS ..

点击这个链接： [http ://tympanus.net/codrops/2009/12/03/css-and-jquery-tutorial-overlay-with-slide-out-box/](http://tympanus.net/codrops/2009/12/03/css-and-jquery-tutorial-overlay-with-slide-out-box/)

# java - Powermockito：高效地使用 thenReturn

> ID：11458409
> 
> 赞同：2
> 
> 时间：2012-07-12T18:37:11.220
> 
> 标签：java, mockito, powermock

我嘲笑了一个名为`methodA()`.
我有一个名为`linkedListA`. 现在，
我有一行代码来模拟`methodA`, as such 等
`when(methodA()).thenReturn(linkedListA.get(0)).thenReturn(linkedListA.get(1)).thenReturn(linkedListA.get(2))`的 返回

现在，是否有一种更有效/更清洁的方式来编写所有的`thenReturns`，例如，像循环一样？所以，我不必写很多`thenReturns`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:48:03.263

我认为第一个改进是使用这个：

```
when(methodA()).thenReturn(linkedListA.get(0), linkedListA.get(1), linkedListA.get(2)) and so on 
```

此外，您可以使用`thenAnswer`返回值的方法：

```
final AtomicInteger i = new AtomicInteger(0);
when(methodA()).thenAnswer(new Answer<YourType>() {

 @Override
 public YourType answer(InvocationOnMock invocation) {
     return linkedListA.get(i.getAndIncrement());
 }
}); 
```

例子：

```
import static org.powermock.api.mockito.PowerMockito.when;
import java.util.Arrays;
import java.util.List;
import java.util.concurrent.atomic.AtomicInteger;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mock;
import org.mockito.invocation.InvocationOnMock;
import org.mockito.stubbing.Answer;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest(Blub.class)
public class Mockexample {

@Test
public void test() {
    Blub blub = PowerMockito.mock(Blub.class);
    final List<Integer> counter = Arrays.asList(1, 2, 3);
    final AtomicInteger i = new AtomicInteger(0);

    // blub.size() is final, only reason to use PowerMockito here
    when(blub.size()).thenAnswer(new Answer<Integer>() {

        @Override
        public Integer answer(InvocationOnMock invocation) throws Throwable {
            return counter.get(i.getAndIncrement());
        }

    });
    System.out.println(blub.size());
    System.out.println(blub.size());
    System.out.println(blub.size());
}

} 
```

Blub 类：

```
public class Blub {
 public final int size() {
    return 0;
 }
} 
```

# objective-c - doxygen 待办事项列表正在丢失/缺少一些待办事项评论

> ID：11458423
> 
> 赞同：1
> 
> 时间：2012-07-12T18:37:58.210
> 
> 标签：objective-c, ios, doxygen

我在 Objective-C iOS 项目中使用 doxygen，它没有将所有`@todo`评论添加到 Todo List 页面。

所有评论的格式如下：

```
/** @todo Thing that needs to be done described here */ 
```

在项目中的大约 20 个中，只有 5 个出现在 Todo List 页面中。*除了确实*出现的所有模式都在“成员”部分中之外，我找不到任何明显的模式（一些没有出现的模式也在成员函数中，但我不知道为什么它们不出现' t 出现）。我希望所有`@todo`评论都会出现在待办事项列表中，无论它们在代码中的什么位置。

**更新：** 我一直在尝试一个最小的类......

`TodoTestClass.h`：

```
#import <UIKit/UIKit.h>

@interface TodoTestClass : UIViewController

- (void)someMethod;
- (void)otherMethod;

/** @todo add a method to do foo */

@end 
```

`TodoTestClass.m`：

```
#import "TodoTestClass.h"

@implementation TodoTestClass

- (void)viewDidLoad
{
    [super viewDidLoad];
    /** @todo do stuff here */
}

- (void)someMethod
{
    /** @todo document and implement someMethod */
}

/**
 This does some other stuff
 */
- (void)otherMethod
{
    /** @todo implement otherMethod */
}

@end 
```

`@todo`标题中的注释和其中的注释`viewDidLoad`不会出现在待办事项列表中，但其他两个会出现。如果我从标题中删除和声明`someMethod`，`otherMethod`它们都不会出现。因此`@todo`，未记录的方法（包括从未记录的框架覆盖的方法）中的注释、私有方法和`@todo`与特定记录实体无关的一般注释不会被添加到待办事项列表中——就像用户在注释中提到的“doxygen”一样（谢谢）。

然而，既然我明白*了为什么*没有出现一些`@todo`评论，我对完整待办事项列表的渴望和我的问题仍然存在......

有什么方法可以配置 doxygen 以便将所有`@todo`评论添加到待办事项列表中，而不管它们在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:41:40.710

尝试将您的评论放在您要针对您的评论定位的代码之前：

```
/** @todo add a method to do foo */ 
@interface TodoTestClass : UIViewController 
```

和

```
/** @todo do stuff here */
- (void)viewDidLoad`
{
    [super viewDidLoad];
} 
```

代码中的注释应该被忽略。

# python - Django 中的 DRY 视图

> ID：11458424
> 
> 赞同：1
> 
> 时间：2012-07-12T18:38:00.503
> 
> 标签：python, django, model-view-controller, dry

我已经构建了一个应用程序，它有很多相似的视图，应该能够使用相同的基本代码。然而，每种方法在方法内的不同拐点处都有某些独特的特征，因此我无法找到一种方法来构造它以实际重用任何代码。相反，我创建了一种剪切和粘贴方法，并单独调整了每种方法。应用程序的这一部分是我编写的第一个 Python 代码，我知道肯定有更好的方法来做到这一点，但我被锁定在这样做并且“它有效”，所以我看不到出路.

下面是基本视图模板的基本外观：

```
def view_entity(request, entity_id=None):
    if request.method == 'POST':
        return _post_entity(request, entity_id)
    else:
        return _get_entity(request, entity_id)

def _get_entity(request, entity_id):
    data = _process_entity(request, entity_id)
    if 'redirect' in data:
        return data['redirect']
    else:
        return _render_entity(request, data['form'])

def _post_entity(request, entity_id):
    data = _process_entity(request, entity_id)
    if 'redirect' in data:
        return data['redirect']
    elif data['form'].is_valid():
        # custom post processing here
        instance = data['form'].save()
        return HttpResponseRedirect(reverse('entity', args=[instance.id]))
    else:
        return _render_entity(request, data['form'])

def _process_entity(request, entity_id):
    data = {}

    if entity_id != 'new':  # READ/UPDATE
        # sometimes there's custom code to retrieve the entity
        e = entity_id and get_object_or_404(Entity.objects, pk=entity_id)
        # sometimes there's custom code here that deauthorizes e
        # sometimes extra values are added to data here (e.g. parent entity)
        if e:
            if request.method == 'POST':
                data['form'] = EntityForm(request.POST, instance=e)
                # sometimes there's a conditional here for CustomEntityForm
            else:
                data['form'] = EntityForm(instance=e)
        else:  # user not authorized for this entity
            return {'redirect': HttpResponseRedirect(reverse('home'))}
        # sometimes there's custom code here for certain entity types

    else:  # CREATE
        if request.method == 'POST':
            data['form'] = EntityForm(request.POST)
        else:
            data['form'] = EntityForm()

    # sometimes extra key/values are added to data here
    return data 
```

我什至没有包括所有可能的变体，但正如您所见，该`_process_entity`方法需要根据正在处理的实体类型进行大量个性化定制。这是我无法找到处理此问题的 DRY 方法的主要原因。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:06:05.933

使用基于类的视图。您可以使用类中的继承和其他功能来使您的视图更具可重用性。您还可以使用内置的通用视图来简化一些基本任务。

检查[基于类的视图文档](https://docs.djangoproject.com/en/dev/topics/class-based-views/)。你也可以阅读[这个](http://www.caktusgroup.com/blog/2011/12/29/class-based-views-django-13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:32:35.540

所以我最终将代码重构为一个我所有视图都继承自的基类。我最终并没有重构为多个视图（还），而是通过在处理方法中插入钩子来解决具有自定义处理方法的问题。

这是继承自的基类的要点`DetailView`：

```
class MyDetailView(DetailView):
    context = {}

    def get(self, request, *args, **kwargs):
        self._process(request, *args, **kwargs)

        if 'redirect' in self.context:
            return HttpResponseRedirect(self.context['redirect'])

        else:
            return self._render(request, *args, **kwargs)

    def post(self, request, *args, **kwargs):
        self._process(request, *args, **kwargs)

        if 'redirect' in self.context:
            return HttpResponseRedirect(self.context['redirect'])

        elif self.context['form'].is_valid():
            self._get_hook('_pre_save')(request, *args, **kwargs)
            return self._save(request, *args, **kwargs)

        else:
            return self._render(request, *args, **kwargs)

    def _process(self, request, *args, **kwargs):
        form = getattr(app.forms, '%sForm' % self.model.__name__)

        if kwargs['pk'] != 'new':  # READ/UPDATE
            self.object = self.get_object(request, *args, **kwargs)

            self._get_hook('_auth')(request, *args, **kwargs)

            if not self.object:  # user not authorized for this entity
                return {'redirect': reverse(
                    '%s_list' % self.model.__name__.lower())}

        self.context['form'] = form(
            data=request.POST if request.method == 'POST' else None,
            instance=self.object if hasattr(self, 'object') else None)

        self._get_hook('_post_process')(request, *args, **kwargs)

    def _get_hook(self, hook_name):
        try:
            return getattr(self, '%s_hook' % hook_name)
        except AttributeError, e:
            def noop(*args, **kwargs):
                pass
            return noop 
```

需要注意的关键部分是`_get_hook`方法和我使用它的其他方法中的位置。这样，在一些复杂的视图中，我可以像这样注入自定义代码：

```
class ComplexDetailView(MyDetailView):
    def _post_process_hook(self, request, *args, **kwargs):
        # here I can add stuff to self.context using 
        # self.model, self.object, request.POST or whatever 
```

这使我的自定义视图很小，因为它们继承了大部分功能，但我可以添加该特定视图所需的任何调整。

# ruby-on-rails - systemu - 执行已过期

> ID：11458429
> 
> 赞同：0
> 
> 时间：2012-07-12T18:38:10.753
> 
> 标签：ruby-on-rails, delayed-job, background-process

我正在从 delay_job 进程中运行 systemu。我有一个工作失败，并在我的delayed_jobs 表中发现了这个错误：

```
execution expired
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:76:in `close'
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:76:in `popen'
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:76:in `block (2 levels) in systemu'
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:168:in `quietly'
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:75:in `block in systemu'
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:236:in `call'
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:236:in `block in tmpdir'
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:221:in `loop'
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:221:in `tmpdir'
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:68:in `systemu'
/usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/systemu-2.5.0/lib/systemu.rb:10:in `systemu' 
```

它以前工作得很好，但这是我正在运行的一项更大的工作。我需要设置一些超时吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:19:07.953

好的，问题是delayed_job 超时。我不得不提高时间限制：

```
Delayed::Worker.max_run_time = 48.hours #2 days 
```

在 app/config/initializers/delayed_job_config.rb

# c# - Observable.Defer - 需要澄清一下它到底做了什么

> ID：11458430
> 
> 赞同：15
> 
> 时间：2012-07-12T18:38:11.390
> 
> 标签：c#, .net, system.reactive

假设我想生成一个异步随机数流，每 100 毫秒抽出一个新值。在尝试提出解决方案时，我的第一次尝试看起来像这样：

```
 var random = new Random();
        Observable.Start(() => random.Next())
                  .Delay(TimeSpan.FromMilliseconds(100))
                  .Repeat()
                  .Subscribe(Console.WriteLine); 
```

如果您尝试运行它，您会注意到它只是一遍又一遍地重复相同的值。好的，我想我误解了重复的工作原理。在玩了一会儿之后，我想出了这个并且它起作用了：

```
 var random = new Random();
        Observable.Defer(()=> Observable.Start(() => random.Next()))
                  .Delay(TimeSpan.FromMilliseconds(100))
                  .Repeat()
                  .Subscribe(Console.WriteLine); 
```

所以我去 MSDN 文档了解 Defer 实际在做什么，这就是它所说的：

> 返回一个可观察序列，每当有新观察者订阅时，该序列就会调用可观察工厂。

我想我的困惑是：在我的代码示例中，我只订阅了 Observable 一次，那么为什么它似乎`Observable.Start(...)`一遍又一遍地调用呢？还是我误会了`Repeat()`？任何澄清都会很棒。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T19:06:39.363

You are misunderstanding Repeat. Basically, Repeat will keep resubscribing to an observable every time it is completed.

Observable.Start apparently caches the value the first time you call Subscribe and is returning it each time you subscribe. This is what causes the same number over and over in the first example.

Defer works something like this:

```
IObservable<T> Defer(Func<IObservable<T>> factory)
{
    return Observable.Create<T>(obs => factory().Subscribe(obs));
} 
```

so every time you subscribe to the `Defer` observable, it must call the `factory` function. In this case, the factory creates a *new* observable, thus avoiding the caching behavior of `Start`.

An alternate way to get the sequence you described is to use `Interval` to get your timing and `Select` to get the random numbers.

```
Observable.Interval(TimeSpan.FromMilliseconds(100))
          .Select(i => random.Next())
          .Subscribe(Console.WriteLine); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T09:46:08.050

“生成”随机数的一种简单方法是使用`.Generate`. 尝试这个：

```
var rnd = new Random();

Observable
    .Generate(
        0,
        x => true,
        x => x,
        x => rnd.Next(),
        x => TimeSpan.FromMilliseconds(100.0))
    .Subscribe(n => { }); 
```

# qt - 在 QTabBar 中隐藏底线

> ID：11458431
> 
> 赞同：5
> 
> 时间：2012-07-12T18:38:18.797
> 
> 标签：qt, user-interface, tabs, qt4, qtabbar

似乎没有办法为`QTabBar`我想要删除的 a 的底线（如下图所示）设置样式表。

![显示的 `QTabBar 的底线](../Images/95f8d54eb04fc269a6b4875a7ed3f5a1.png)

我怎样才能删除它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T19:29:14.440

现在 6-7 个月没有使用 Qt，所以我不确定这是否可行，也不能测试它。试一试[`QTabBar::drawBase`](http://qt-project.org/doc/qt-4.8/qtabbar.html#drawBase-prop)。此外，Qt 库是非常好的文档，因此如果您仔细筛选它，您应该会找到解决问题的方法。

希望您使用的是[Qt SDK](http://qt-project.org/downloads)。

# python - 带有“{0:d}”的字符串格式不会转换为整数

> ID：11458440
> 
> 赞同：7
> 
> 时间：2012-07-12T18:38:40.933
> 
> 标签：python, string-formatting

这与[这个关于 floats](https://stackoverflow.com/questions/5627605/string-formatting-with-0d-format-gives-unknown-format-code-d-for-object-o)的问题大致相同。

当您有一个可以转换为整数的值时，旧的`%d`会转换它，但格式不会。

```
class MyIntegerTenClass:
    def __int__(self):
        return 10
    def __str__(self):
        return 'ten'
ten = MyIntegerTenClass()
print '%d, %02X, %s' % (ten, ten, ten) # ok
print  '{0}'.format(ten) # ok
print  '{0:d}, {0:02X}'.format(ten) # ValueError: Unknown format code 'd' for object of type 'str' 
```

有没有办法修改格式的行为，而不触及要格式化的值的类（不向`__format__`该类添加方法）？

编辑：我的目标是让格式取决于格式字符串，而不是值。因此，如果格式字符串显示“d”或“x”，则将值转换为 int，然后转换为十进制或十六进制表示。如果格式字符串为“s”，则直接将其转换为字符串。就像老人`%`那样。

实际上，我什`__format__`至可以在值的类中添加一个方法。但是，如果给定的格式规范是整数格式规范，我该如何检查呢？无需重新实现内置格式的格式规范解析器。

编辑：这是一个有`__format__`例外的解决方案。有更好的想法吗？

```
class MyIntegerTenClass:
    def __int__(self):
        return 10
    def __str__(self):
        return 'ten'
    def __format__(self, spec):
        fmt = '{0:%s}'%spec
        try:
            return fmt.format(str(self))
        except:
            return fmt.format(int(self))
ten = MyIntegerTenClass()
print '%d, %02X, %s' % (ten, ten, ten) # ok, prints "10, 0A, ten"
print  '{0:d}, {0:02X}, {0}'.format(ten) # ok, prints "10, 0A, ten" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:40:21.560

传递一个整数而不是一个字符串，它会正常工作。

```
>>> print  '{0:d}'.format(1)
1
>>> print  '{0:d}'.format('1')

Traceback (most recent call last):
  File "<pyshell#57>", line 1, in <module>
    print  '{0:d}'.format('1')
ValueError: Unknown format code 'd' for object of type 'str' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:25:00.767

解决这个问题的第一种方法可能很简单`try`：

```
class MyIntegerTenClass:
    def __int__(self):
        return 10
    def __str__(self):
        return 'ten'
    def __format__(self, format_spec):
        try:
            s = format(str(self), format_spec)
        except ValueError:
            s = format(int(self), format_spec)
        return s 
```

如果`MyIntegerTenClass` *可以*作为字符串插入到格式字符串中，那就是。如果不是，它将被转换为 int 并重新提交到`format`.

```
>>> print '{0}, {0:s}, {0:d}, {0:02X}, {0:f}'.format(ten)
ten, ten, 10, 0A, 10.000000 
```

如果您希望默认表示为`10`而不是`ten`，则只需交换转换行：

```
 def __format__(self, format_spec):
        try:
            s = format(int(self), format_spec)
        except ValueError:
            s = format(str(self), format_spec)
        return s 
```

测试输出：

```
>>> print '{0}, {0:s}, {0:d}, {0:02X}, {0:f}'.format(ten)
10, ten, 10, 0A, 10.000000 
```

作为附录，我不相信你能够在不定义的情况下获得你想要的行为`__format__`；但是，您可以使用对象开发更复杂的方法[`Formatter`](http://docs.python.org/library/string.html#string-formatting)。尽管如此，我认为基于异常的方法为您提供了许多免费的内置功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:43:35.217

它说十是一个字符串，您正在尝试将其格式化为数字。

尝试将其包装在演员表中：

```
>>> print  '{0:d}, {0:02X}'.format(int(ten))
10, 0A 
```

# telerik-mvc - 将 Telerik 下拉/自动完成控件添加到 Telerik asp.net mvc 网格

> ID：11458448
> 
> 赞同：0
> 
> 时间：2012-07-12T18:38:56.307
> 
> 标签：telerik-mvc

我有一个 Telerik MVC 网格，我想在其中添加一个数据绑定列。我希望此列显示 Telerik 下拉/自动完成控件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:31:48.420

如果您只想显示数据，这很容易 - 您可以在列的[Template](http://demos.telerik.com/aspnet-mvc/grid/templatesclientside)方法中定义 DropDownList。如果您希望您的更改影响模型并对其进行更改 - 您需要使用 EditorTemplate。使用 UIHint 属性或使用列的 TemplateName 方法来指定编辑器。您可以查看[此](http://demos.telerik.com/aspnet-mvc/grid/clientedittemplates)演示以了解此类实现。

# windows - 我可以在不安装 Cygwin 的情况下在 Windows 上运行 Emacs Mx ediff 吗？

> ID：11458450
> 
> 赞同：0
> 
> 时间：2012-07-12T18:38:59.530
> 
> 标签：windows, emacs, diff

是否有必要安装 Cygwin（包括 diff）或 MinGW（可能也这样做）来确定 foobar.txt 和 foobar.txt 之间的差异〜？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:14:14.277

只要你的 PATH 中有一个 diff.exe 程序，例如 GNUWin32 diff-utils 版本，你就不需要这些。Emacs 本身不包括执行差异的机制。

# java - UnknowHostException android客户端套接字

> ID：11458452
> 
> 赞同：1
> 
> 时间：2012-07-12T18:39:04.037
> 
> 标签：java, android, sockets, ip, host

我收到异常 java.net.UnknowHostException:http://arbitrary-hero.dyndns.org/。我正在尝试使用我制作的 android 客户端应用程序连接到该地址。

我有两台计算机，一台运行 ubuntu 10.10，另一台运行 windows 7。当我在 windows 7 计算机上访问 www.ipchicken.com 以检查我的 ip 时，当我从命令行执行 ifconfig 时，我得到 71.72.220.109我的 linux 机器我得到 71.67.105.9。71.72.220.109 转到我在 Windows 7 计算机上的服务器应用程序，71.67.105.9 和地址 absolute-hero.dyndns.org 转到我的 ubuntu 10.10 机器上的 apache 服务器。计算机在同一个房子里，使用同一个网络，我不明白为什么它们有这些不同的地址。我也试图让他们都使用 URL。

```
 String webserver = "71.67.105.9"; //does not work
        String everythingelseinthehouse = "71.72.220.109"; //works
        String weburl = "http://arbitrary-hero.dyndns.org/"; // does not work

        Socket sock = new Socket (weburl , 13267);
        //Socket sock = new Socket (address_everythingelse , 13267);
        //Socket sock = new Socket (address_room , 13267); 
```

这是我声明我的套接字的地方，对额外的代码感到抱歉，但我已经尝试了所有可能的组合来完成这项工作。

如果您希望我提供更多代码来帮助我解决此问题，请询问我很乐意解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:42:55.830

您需要将此前提添加到`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

此外，您需要使用`InetAddress`域名而不是 IP 地址：

```
Socket sock = new Socket(InetAddress.getByName(weburl) , 13267); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:22:39.847

URL 不是主机名，请`InetAddress.getByName("something.dyndns.org")`改用。

关于鸡的其他内容在问题中完全不清楚:)

### 编辑0：

> ...当我在我的 linux 机器上从命令行执行 ifconfig 时，我得到 71.67.105.9 ...

这告诉我你的 Linux 机器要么是静态配置了这个 IP，要么你的路由器设置为以不同的方式处理有线连接。

# php - 在分页 css html 后显示当前表头

> ID：11458455
> 
> 赞同：0
> 
> 时间：2012-07-12T18:39:11.753
> 
> 标签：php, jquery, html, css, print-preview

这是我的问题。它与我在这里看到的一些相似（即[CSS: Repeat Table Header after Page Break (Print View)](https://stackoverflow.com/questions/6844391/css-repeat-table-header-after-page-break-print-view)），但有一个区别：**多个标题**。

您如何显示当前表头在动态表中的中断后发生分页符（在打印预览模式下）的位置？

所以，如果这是我的表并且分页符发生在第二个标题之后......

```
<table>
    <tr><th>Head Cell 1a</th><th>Head Cell 2a</th><th>Head Cell 3a</th></tr>
    <tr><td>Cell 1a</td><td>Cell 2a</td><td>Cell 3a</td></tr>
    <tr><td>Cell 4a</td><td>Cell 5a</td><td>Cell 6a</td></tr>   

    <tr><th>Head Cell 1b</th><th>Head Cell 2b</th><th>Head Cell 3b</th></tr>
    <tr><td>Cell 1b</td><td>Cell 2b</td><td>Cell 3b</td></tr>

    <!--PAGE BREAK HERE ON PRINT PREVIEW-->
    <tr><td>Cell 4b</td><td>Cell 5b</td><td>Cell 6b</td></tr>
</table> 
```

...我希望能够在分页符后将第二个标题（Head Cells 1b、2b 和 3b）显示为标题。换句话说，我想在分页符发生后显示相应的标题，无论它发生在哪里。所以上表在分页后应该是这样的......

```
<table>
    <tr><th>Head Cell 1a</th><th>Head Cell 2a</th><th>Head Cell 3a</th></tr>
    <tr><td>Cell 1a</td><td>Cell 2a</td><td>Cell 3a</td></tr>
    <tr><td>Cell 4a</td><td>Cell 5a</td><td>Cell 6a</td></tr>   

    <tr><th>Head Cell 1b</th><th>Head Cell 2b</th><th>Head Cell 3b</th></tr>
    <tr><td>Cell 1b</td><td>Cell 2b</td><td>Cell 3b</td></tr>

    <!--PAGE BREAK HERE ON PRINT PREVIEW-->
    <tr><th>Head Cell 1b</th><th>Head Cell 2b</th><th>Head Cell 3b</th></tr>
    <tr><td>Cell 4b</td><td>Cell 5b</td><td>Cell 6b</td></tr>
</table> 
```

我尝试将标题包装在`<thead>`标签中，然后将我的 css 设置为：

```
table, tr{page-break-after:auto;} 
thead {display:table-header-group;} 
```

但第一个标题在每一页上不断重复，所以我看到的是：

```
<table>
    <thead><tr><th>Head Cell 1a</th><th>Head Cell 2a</th><th>Head Cell 3a</th></tr></thead>
    <tr><td>Cell 1a</td><td>Cell 2a</td><td>Cell 3a</td></tr>
    <tr><td>Cell 4a</td><td>Cell 5a</td><td>Cell 6a</td></tr>   

    <thead><tr><th>Head Cell 1b</th><th>Head Cell 2b</th><th>Head Cell 3b</th></tr></thead>
    <tr><td>Cell 1b</td><td>Cell 2b</td><td>Cell 3b</td></tr>

    <!--PAGE BREAK HERE ON PRINT PREVIEW-->
    <thead><tr><th>Head Cell 1a</th><th>Head Cell 2a</th><th>Head Cell 3a</th></tr></thead>
    <tr><td>Cell 4b</td><td>Cell 5b</td><td>Cell 6b</td></tr>
</table> 
```

如果有任何人可以帮助解决这个问题，请尽快让我知道。我真的很感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:25:10.130

首先，一个表中不能有多个`<thead>`标签。所以我必须做的是让每个部分都成为一个带有它自己的实际表`<thead>`。现在分页符后会显示正确的标题。

# html - 动态列表项上的 jQuery Mobile 点击事件

> ID：11458456
> 
> 赞同：4
> 
> 时间：2012-07-12T18:39:12.610
> 
> 标签：html, jquery-mobile

我无法从列表项中获取点击事件。在此页面中：

[http://bec-systems.com/list-click.html](http://bec-systems.com/list-click.html)

列表中的第一个条目触发点击事件。但是，如果我通过按下“刷新更新列表”按钮动态添加 3 个事件，则接下来的 3 个列表条目不会生成单击事件。

感谢有关我如何使这项工作或总体改进代码的任何建议。

谢谢，克里夫

代码也列在下面：

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Status</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
  <script type="text/javascript">
$(document).ready(function() {
  $("#refreshUpdateButton").on("click", function(event, ui) {
    console.log("refreshUpdateButton")

    versions = ["0.3", "0.4", "0.5"]

    for (var i=0; i < versions.length; i += 1) {
      $("#updateVersionsList").append('<li><a id="updateVersionItem-' + (i+3) + '">' + versions[i] + '</a></li>');
      if ($("#updateVersionsList").hasClass('ui-listview')) {
        $("#updateVersionsList").listview("refresh");
      } else {
        $("#updateVersionsList").trigger('create');
      }
    }

  })

  $('[id^=updateVersionItem]').on("click", function(event, ui) {
    console.log("updateVersion, selected = " + $(this).attr('id'));
  })

});

  </script>
</head> 
<body> 

<!-- Software update page -->
<div data-role="page" id="software-update-page">
    <div data-role="header">
        <h1>Software Update</h1>
    </div><!-- /header -->
    <div data-role="content">   
    <h1>Select Software version:</h1>
    <ul data-role="listview" id="updateVersionsList">
      <li><a id="updateVersionItem-0">0.0</a></li>
      <li><a id="updateVersionItem-1">0.1</a></li>
      <li><a id="updateVersionItem-2">0.2</a></li>
    </ul>
    <br>
    <a data-role="button" class="ui-btn-left" id="refreshUpdateButton">Refresh Update list</a>
    </div><!-- /content -->
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T18:48:07.330

使用这种形式`.on()`（根据下面的评论）。

```
 $(document).on("click", '[id^=updateVersionItem]', function(event, ui) {
    console.log("updateVersion, selected = " + $(this).attr('id'));
  }) 
```

示例：http: [//jsfiddle.net/saluce/YaAEJ/](http://jsfiddle.net/saluce/YaAEJ/)

否则，每当您动态添加新元素时，您都需要将点击事件附加到这些项目。

假设以下代码：

```
function doThisOnClick(event, ui) {
    console.log("updateVersion, selected = " + $(this).attr('id'));
}

$('[id^=updateVersionItem]').on("click", doThisOnClick); 
```

您可以取消绑定处理程序并重新附加到所有匹配项：

```
$('[id^=updateVersionItem]').off("click", doThisOnClick);
$('[id^=updateVersionItem]').on("click", doThisOnClick); 
```

或者只是在添加后将其动态添加到新项目中：

```
$("#updateVersionsList").append('<li><a id="updateVersionItem-' + (i+3) + '">' + versions[i] + '</a></li>').on("click", doThisOnClick); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T00:28:34.560

创建一个新函数并为默认和动态元素调用它

```
<a onclick="myfunction()"> 
```

# android - 如何防止其他应用程序定义相同的权限名称

> ID：11458458
> 
> 赞同：9
> 
> 时间：2012-07-12T18:39:18.360
> 
> 标签：android, permissions

我的应用程序使用 android:protectionLevel="signature" 定义了一个权限。

```
<permission android:name="my.app.permission.EXAMPLE" android:protectionLevel="signature" /> 
```

我的目的是制作只能由我签名的应用程序启动的应用程序模块。这些应用程序模块在其活动中具有 android:permission。这工作正常。但是...第三方应用可以使用相同的权限名称并将保护级别更改为正常，就像这样

```
<permission android:name="my.app.permission.EXAMPLE" android:protectionLevel="normal" /> 
```

如果我的应用程序先安装，我可以防止其他应用程序覆盖权限。但是，如果有人卸载我的应用程序然后安装他的应用程序，它会重新定义权限。

是否可以阻止其他应用程序使用相同的权限名称，例如，给权限一个唯一的 id，如应用程序包？

虽然 Manifest 是加密的，但任何人在尝试启动需要此权限的活动时都可以读取 log cat 中的权限名称（抛出具有所需权限名称的异常）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:49:49.727

没有强制执行，只有约定。与 Java 世界的其他部分一样，它松散地依赖于域名注册基础设施。这个想法是您在您的权限名称前加上您拥有的公共 Internet 域名（例如`com.myawesomecompany.myapp.MYPERMISSION`）。

域名的唯一性自然是由注册商社区强制执行的。

是的，该系统可以滥用。

编辑：如果您要保护基于广播的频道，如果您愿意，可以添加双向签名检查。使用权限名称作为第二个参数调用 Context.sendBroadcast()。

EDIT2：我觉得你在闭上眼睛看更大的 Android 应用程序安全图片时想多了。这并不令人印象深刻。滥用特权基础设施并不是入侵 Android 应用程序的方式。如果我开始拦截您的意图，我不会组装一个虚假的意图接收器（活动、服务）。相反，我会使用调试器将您的应用程序、签名和所有内容中的真正接收器连接起来。

使用公开可用的工具，只需几分钟就可以为给定的 APK 组合一个 Eclipse 项目。将其加载到 Eclipse 中，连接到正在运行的进程，在相关系统 API 中设置断点（Android 是开源的，记住），瞧。通过一些额外的努力，您可以获得 APK 的反编译 Java 源代码，并根据您的方法进行调试，而不是系统方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T20:01:54.883

如果您想阻止其他应用程序更改您的权限级别，您可以使用系统预定义的具有“签名”级别的权限。没有其他常规应用程序可以在系统之前定义权限。

使用系统权限保护您的资源并不意味着您的应用必须使用平台密钥进行签名。

例子：

```
<service
        android:name="xxx.xxx.xxx.exservice"
        android:permission="android.permission.BROADCAST_PACKAGE_REMOVED" > 
```

唯一的问题是如果以下代码显示在应用程序的 manifest.xml 中，AppStore 将显示您使用的权限

```
<uses-permission android:name="android.permission.BROADCAST_PACKAGE_REMOVED" /> 
```

在此示例中，您可以通过相同的签名密钥访问您的资源，但绝对不能广播包删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-14T02:01:58.407

复制自 Google Andorid Doc： 注意：系统不允许多个包声明同名的权限，除非所有包都使用相同的证书签名。如果一个包声明了权限，则系统不允许用户安装具有相同权限名称的其他包，除非这些包使用与第一个包相同的证书进行签名。为避免命名冲突，我们建议对自定义权限使用反向域样式命名，例如 com.example.myapp.ENGAGE_HYPERSPACE。

[https://developer.android.com/guide/topics/permissions/defining](https://developer.android.com/guide/topics/permissions/defining)

# tomcat - 动作类后Tomcat Struts 2 Ubuntu服务器非常慢

> ID：11458467
> 
> 赞同：0
> 
> 时间：2012-07-12T18:39:41.343
> 
> 标签：tomcat, ubuntu, struts2

我有一个网络应用程序。到目前为止，它在我测试过的所有环境中都运行良好。除了 Rackspace 云中的生产环境。

我使用`Tomcat 6`with`struts 2.1.8`和`mysql`作为数据库 在`Ubuntu 11.10 server`. 通常一个请求可能需要 1 秒才能在健康的环境中完成。从我的日志中，我确定该操作需要 1 秒才能完成。我正在使用 Action Timer 拦截器对此进行测试。action 方法执行后，页面显示大约需要 15 秒。所以我不认为问题与 DB 相关或 Action 类相关。

什么可能导致这种延迟？

```
java -version :

java version "1.6.0_23"
OpenJDK Runtime Environment (IcedTea6 1.11pre) (6b23~pre11-0ubuntu1.11.10.2)
OpenJDK 64-Bit Server VM (build 20.0-b11, mixed mode) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:26:51.320

它似乎与 OpenJDK JVM 无关。

PreResultListener可以帮助您计算从操作完成处理到浏览器收到响应所需的时间[。](http://struts.apache.org/2.3.4/xwork-core/apidocs/com/opensymphony/xwork2/interceptor/PreResultListener.html)

您还可以查看[PageSpeed](https://developers.google.com/speed/pagespeed/)以查看客户端渲染速度是否存在问题。

# ruby-on-rails - 黄瓜+ webrat中的选择框

> ID：11458468
> 
> 赞同：-1
> 
> 时间：2012-07-12T18:39:44.490
> 
> 标签：ruby-on-rails, cucumber

我使用此代码使用黄瓜提交表单

```
When I fill in "Email" with "example@example.com"
And I fill in "Name" with "user name" 
```

现在我想在选择框中填写值。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:15:02.030

那不是代码，那些是黄瓜特性语句。Cucumber 会将这些转换为步骤定义，而步骤定义又可以包含让您测试所描述事物的代码。

你可能有类似 web_steps.rb 的东西，它提供了一组这样的预构建语句，但你不应该使用它们。您应该描述正在构建的应用程序的业务行为，而不是低级 UI 细节。相反，你应该写这样的东西

```
Given I am on the registration page
When I sign up
Then I should be logged in automatically
And I should see a message stating "Thank you for signing up!" 
```

这为您提供了一个示例，说明当有人注册时您希望发生的事情（他们会自动登录并感谢他们的注册）。他们现在就拥有它，每当您想更改字段的名称时，您都必须更改规范以匹配 UI，并且除非您更改业务需求，否则规范永远不应更改。

因此，为了回答您的更多技术问题，步骤定义看起来像这样，基于 webrat 的文档

```
fill_in 'email', :with => '123@example.com'
fill_in 'name', :with => 'username'
select 'free account'
click_button 'Signup' 
```

# google-apps-script - 填写单元格时的自动时间戳

> ID：11458470
> 
> 赞同：14
> 
> 时间：2012-07-12T18:39:46.137
> 
> 标签：google-apps-script, google-sheets, timestamp

我有一个非常简单的 excel 公式，它可以工作，因为我可以限制递归迭代。我不是很精通脚本，但这就是它的本质并且它​​有效。

`=IF(D24="P",IF(E24="",DateStamp,E24),IF(D24="F",IF(E24="",DateStamp,E24),""))`

它是一个通过/失败测试表，它会在某人通过或失败测试时添加时间戳。我们又增加了几个人，我想将文档移动到谷歌应用程序，以允许超过 1 人同时处理它。

我遇到的唯一问题是这导致的循环引用。在excel中我可以限制选项中的迭代次数，我不再有这个能力了。任何帮助都会很棒。

编辑：我尝试过的。我试图找到一种方法来输入同事创建的对我有用的 VBA 脚本。我不擅长编写脚本，所以我无法将它变成谷歌应用脚​​本：

VBA 脚本：

```
 Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Column = 4 Then
If Cells(Target.Row, 5).Value = "" Then

Cells(Target.Row, 5).Value = Now
End If
Else
End If

End Sub 
```

从理论上讲，我尝试创建一个脚本，该脚本将复制一个带有时间戳的单元格，然后尝试“粘贴特殊”并将值粘贴到所需的单元格中。这会起作用，除非我无法找到一种使用谷歌应用脚​​本进行特殊粘贴的方法。

感谢您的帮助/编辑

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-13T04:13:02.060

Stackoverflow 是一个询问与编程相关的问题的地方，例如您实际正在研究的问题。并不是真的要求其他人为您开发它，即您甚至还没有开始尝试任何 Apps Script 代码。我建议您阅读它的[教程](https://developers.google.com/apps-script/articles)和[指南](https://developers.google.com/apps-script/your_first_script)。这真的很容易开始。

无论如何，只是为了帮助您入门，我将放弃您所说的一切并坚持问题标题：“填写单元格时的自动时间戳”

我建议您在应用程序脚本上完成所有操作，并完全放弃您的公式，例如

```
function onEdit() {
  var s = SpreadsheetApp.getActiveSheet();
  if( s.getName() == "Sheet1" ) { //checks that we're on the correct sheet
    var r = s.getActiveCell();
    if( r.getColumn() == 4 ) { //checks the column
      var nextCell = r.offset(0, 1);
      if( nextCell.getValue() === '' ) //is empty?
        nextCell.setValue(new Date());
    }
  }
} 
```

这段代码做了我从你那里了解到的，即：如果在 column 上编辑了某些内容`D`并且 column`E`为空，则将当前日期添加到`E`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-20T19:08:38.383

**只需在同一工作表中添加多列 AutoStamp 的**上述代码

 **```
function onEdit() {
  var s = SpreadsheetApp.getActiveSheet();
  if( s.getName() == "Sheet1" ) { //checks that we're on the correct sheet
    var r = s.getActiveCell();
    if( r.getColumn() == 5 ) { //checks the column
      var nextCell = r.offset(0, 1);
      //if( nextCell.getValue() !== '' ) //is empty?
      nextCell.setValue(new Date());
    }

    if( r.getColumn() == 7 ) { //checks the column
      var nextCell = r.offset(0, 1);
      //if( nextCell.getValue() !== '' ) //is empty?
      nextCell.setValue(new Date());
    }

    if( r.getColumn() == 9 ) { //checks the column
      var nextCell = r.offset(0, 1);
      //if( nextCell.getValue() !== '' ) //is empty?
      nextCell.setValue(new Date());
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-02T18:39:37.063

您只需要使用 Apps 脚本。我会用一个例子来解释：

```
function onEdit(e) {
var row = e.range.getRow();
if (row > 1 && e.source.getActiveSheet().getName() === "Sheet1") {
    e.source.getActiveSheet().getRange(row, 14).setValue(new Date());
} else {
    if ((row > 1 && e.source.getActiveSheet().getName() === "Sheet2") || (row > 1 && e.source.getActiveSheet().getName() === "Sheet3")) {
        e.source.getActiveSheet().getRange(row, 6).setValue(new Date());
    }}} 
```

这首先检查正在编辑的工作表。如果是 sheet1，那么它会占用该工作表中所有行的第 14 列（*getRange(row,14)*），并且无论何时编辑任何内容（*edit(e)* ），它都会在第 14 个中添加时间戳（*setValue(new Date())* ）柱子。同样，如果是不同的工作表，即Sheet2或Sheet3或任何其他名称，我们可以根据需要为时间戳选择不同的列。此外，添加了*if( (row > 1)*条件，以便在编辑时不会在第一行中添加时间戳，因为它通常是标题。

现在您选择获取一系列单元格并根据需要使用它们。有关 getRange() 的更好想法，请参阅[此问题](https://stackoverflow.com/questions/11947590/sheet-getrange1-1-1-12-what-does-the-numbers-in-bracket-specify)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-17T23:52:33.750

如果您希望它在单元格再次更改时更新，只需删除此行

```
if( nextCell.getValue() !== '' ) //is empty? 
```

顺便说一句，日期如何格式化为ie。dd/mm/yyyy 而不是默认的 dd/mm/yyyy hh:MM:ss 格式

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-05-09T17:23:50.457

实际上，在这种情况下，您不必编写任何脚本。谷歌（或某人）已经做到了。在您的 Google 电子表格中，转到“插入 -> 脚本”并搜索“时间”。有两个现成的脚本可以做你想做的事。我发现“单元格上次修改日期”效果很好。选择它并单击“安装”按钮。您可以重新格式化该列以显示日期、日期+时间等。您还可以在列中手动编码日期，或者如果您之前跟踪它，则将它们从另一列中移动，它们将在您设置时保留。但是更新行中的任何单元格都会更新时间戳。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2018-02-02T07:22:44.840

我将时间戳设置为包括 HH:MM:SS，但在一分钟内测试了 4 次邮票后，我得到：03、14、11、07 在我的时间戳中随着 MM 波动。

* * *

## 回答 #7

> 赞同：-9
> 
> 时间：2016-01-25T14:21:38.120

比这容易得多！=现在

或者;

=今天

取决于你需要什么**

# python - 了解 Python 中的异步/多处理

> ID：11458471
> 
> 赞同：1
> 
> 时间：2012-07-12T18:39:51.333
> 
> 标签：python, multithreading, asynchronous, multiprocessing

可以说我有一个功能：

```
from time import sleep

def doSomethingThatTakesALongTime(number):
  print number
  sleep(10) 
```

然后我在 for 循环中调用它

```
for number in range(10):
  doSomethingThatTakesALongTime(number) 
```

我怎样才能设置它，以便总共只需要 10 秒即可打印出来：

```
$ 0123456789 
```

而不是花 100 秒。如果有帮助，我将使用您提供的信息来进行异步网络抓取。即我有一个我想访问的站点列表，但我想同时访问它们，而不是等待每个站点完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:16:10.043

[asyncoro](http://asyncoro.sourceforge.net "异步")支持异步、并发编程。它包括异步（非阻塞）套接字实现。如果您的实现不需要 urllib/httplib 等（没有异步完成），它可能适合您的目的（并且易于使用，因为它与线程编程非常相似）。您对 asyncoro 的上述问题：

```
import asyncoro

def do_something(number, coro=None):
    print number
    yield coro.sleep(10)

for number in range(10):
    asyncoro.Coro(do_something, number) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:42:42.140

尝试使用**[Eventlet——](http://eventlet.net/)**文档的[第一个示例](http://eventlet.net/doc/)展示了如何实现同时获取 URL：

```
urls = ["http://www.google.com/intl/en_ALL/images/logo.gif",
     "https://wiki.secondlife.com/w/images/secondlife.jpg",
     "http://us.i1.yimg.com/us.yimg.com/i/ww/beta/y3.gif"]

import eventlet
from eventlet.green import urllib2

def fetch(url):
  return urllib2.urlopen(url).read()

pool = eventlet.GreenPool()
for body in pool.imap(fetch, urls):
  print "got body", len(body) 
```

我还可以**建议向[Celery](http://celeryproject.org/)**寻求更灵活的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:54:08.460

看一下scrapy框架。它专门用于网页抓取，非常好。它是异步的，建立在扭曲的框架上。

[http://scrapy.org/](http://scrapy.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-30T10:52:44.523

以防万一，这是将绿色线程应用于示例代码段的确切方法：

```
from eventlet.green.time import sleep
from eventlet.greenpool import GreenPool

def doSomethingThatTakesALongTime(number):
    print number
    sleep(10)

pool = GreenPool()

for number in range(100):
    pool.spawn_n(doSomethingThatTakesALongTime, number)

import timeit
print timeit.timeit("pool.waitall()", "from __main__ import pool")
# yields : 10.9335260363 
```

# java - 尝试解析从 ftp 下载的 xml 文件时出现 XMLStreamException

> ID：11458475
> 
> 赞同：1
> 
> 时间：2012-07-12T18:40:04.490
> 
> 标签：java, xml, ftp

我正在从 ftp 下载文件，将其保存到我的本地文件系统中，然后使用`createXMLStreamReader`. 当我尝试解析它时，我收到此错误：`javax.xml.stream.XMLStreamException: ParseError at [row,col]:[124,316]`. 当我手动将其复制并粘贴到另一个文件时，一切正常。我试过用[这个](http://www.roseindia.net/java/beginners/copyfile.shtml)复制文件，文件被复制了，但我仍然遇到同样的错误。我确实意识到这是由于`<xml`节点之前的二进制字符引起的，但我不确定如何摆脱它们。

我无法控制从 ftp 复制的内容，我正在使用`java 1.7`

我检索文件的代码：

```
client.connect("ftp.domain.com");
client.login("user", "password");

String filename = assetsPath + "/ftpExport.xml";
fos = new FileOutputStream(filename);
client.retrieveFile("/Export.xml", fos);
```

我创建 StreamReader 的代码：

```
inputFactory = XMLInputFactory.newInstance();
File f = new File(Parser.class.getProtectionDomain().getCodeSource().getLocation().getPath());
assetsPath = f.toString()+"/../assets";
xmlReader = inputFactory.createXMLStreamReader(
    new FileReader(assetsPath + "/Export.xml"));
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:16:32.233

不要使用 FileReader 读取 xml，因为这会损坏 xml。使用 FileInputStream。

# python - 使用python限制类实例的数量

> ID：11458477
> 
> 赞同：4
> 
> 时间：2012-07-12T18:40:05.913
> 
> 标签：python, class, pyqt, instance, py2exe

Μy Mainclass 创建一个`QmainWindows`像这样的简单对象：

```
class mcManageUiC(QtGui.QMainWindow):
    def __init__(self):
        super(mcManageUiC, self).__init__()

        self.initUI()

    def initUI(self):
        self.show() 
```

在我的文件末尾，我像这样启动它：

```
def main():
    app = QtGui.QApplication(sys.argv)
    renderManagerVar = mcManageUiC()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

我的问题是每次我获取它时，它都会启动一个新窗口。我想知道是否有一种方法可以检测我的脚本中是否存在先前的类实例（以便我关闭旧的或避免启动新的），或任何其他解决方案？

此外，在使用 py2exe 编译我的代码时，我的 .exe 文件在 Windows 上也存在同样的问题；它每次都会启动一个新窗口。我可以在 setup.py 中添加一些内容以使 Windows 不这样做吗？

有可能吗，如果是，那怎么办？

注意：我使用的是 Windows 7 64bit 与 eclipse 编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:52:46.853

有几种方法可以做到这一点，您可以使用 Class 属性来存储所有实例 - 如果您这样做，您可能希望通过weakref模块将它们存储为弱引用以防止垃圾收集问题：

```
class MyClass(object):
    _instances=[]
    def __init__(self):
        if(len(self._instances) > 2):
            self._instances.pop(0).kill() #kill the oldest instance
        self._instances.append(self)

    def kill(self):
        pass #Do something to kill the instance 
```

不过这有点难看。您可能还想考虑使用某种工厂（有条件地）创建一个新实例。这种方法更通用一些。

```
import weakref
class Factory(object):
     def __init__(self,cls,nallowed):
         self.product_class=cls  #What class this Factory produces
         self.nallowed=nallowed  #Number of instances allowed
         self.products=[]

     def __call__(self,*args,**kwargs):
         self.products=[x for x in self.products if x() is not None] #filter out dead objects
         if(len(self.products) <= self.nallowed):
             newproduct=self.product_class(*args,**kwargs)
             self.products.append(weakref.ref(newproduct))
             return newproduct
         else:
             return None

#This factory will create up to 2 instances of MyClass
#and refuse to create more until at least one of those 
#instances have died.
factory=Factory(MyClass,2)   
i1=factory("foo","bar")      #instance of MyClass
i2=factory("bar","baz")      #instance of MyClass
i3=factory("baz","chicken")  #None 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-29T07:33:10.353

您可以通过添加计数器来限制要在代码中创建的实例数量：

```
class A(object):
 ins = 0 # This is a static counter
 def __init__(self):
  if A.ins >= 1: # Check if the number of instances present are more than one. 
   del self
   print "Failed to create another instance" #if > 1, del self and return.
   return
  A.ins += 1
  print "Success",str(self) 
```

尝试通过以下方式运行：

```
lst = []
for i in range(1,101):
 a=A()
 lst.append(a) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:52:06.467

使用类变量：

```
class mcManageUiC(QtGui.QMainWindow):
    singleton = None
    def __init__(self):
        if not mcManageUiC.singleton: #if no instance yet
            super(mcManageUiC, self).__init__()

            self.initUI()
            ...
            mcManageUiC.singleton = self
        else: 
            ...

    def initUI(self):
        self.show() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:49:39.307

你可以独占一个套接字

```
import socket
try:    
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
except:
    "Network Error!"

s.settimeout(30)
try:
    s.connect(('localhost' , 123))
except:
    "could not open...already in use socket(program already running?)" 
```

不知道这是否是一个好方法，但我过去曾使用过它，它解决了这个问题

这旨在防止在程序已经运行时启动程序，而不是从生成多个窗口的单个脚本中启动新窗口...

# visual-studio - Doxygen 是否支持 C++/CX 语法？

> ID：11458480
> 
> 赞同：4
> 
> 时间：2012-07-12T18:40:20.407
> 
> 标签：visual-studio, doxygen, c++-cx

Doxygen 似乎对一些[C++/CX](http://msdn.microsoft.com/en-us/library/windows/apps/hh699871%28v=vs.110%29.aspx)语法结构（微软为 Windows 8 开发引入的新 C++ 扩展）感到困惑。这是一个已知的问题？有补丁可以让它工作吗？还是使用更好的文档系统？（请记住，有问题的代码库也可以在非 Microsoft 平台上运行。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:39:10.723

Doxygen 支持 C++/CLI。声明的 C++/CX 语法（几乎？）与 C++/CLI 语法相同，因此在 Doxygen 选项中启用 C++/CLI 支持应该可以正常工作。

# sql - 通过 VB.NET 将 DateTime 插入 SQL Server CE 数据库

> ID：11458481
> 
> 赞同：1
> 
> 时间：2012-07-12T18:40:20.973
> 
> 标签：sql, database, vb.net, sql-server-ce

我正在尝试使用下面的代码插入数据库，但是，每次出现错误时：

> 日期格式存在语法错误。[ 表达式 = @DOB ]

我已经尝试了几乎所有可用的日期格式，tolongdate、toshortdate 等，无论我使用什么显示此错误。

数据库列格式为`datetime`. 有什么想法我哪里出错了吗？

代码：

```
' Insert New User - Create Connection
Dim sqlConn As New SqlCeConnection(My.Settings.CompDbConnectionString)

' Open Connection
sqlConn.Open()

' Query DB
Dim sqlComm As New SqlCeCommand("INSERT INTO Profiles(Title, FirstName, LastName, DOB) VALUES(@Title, '@FirstName', '@LastName', '@DOB')", sqlConn)

' Add Parameters
sqlComm.Parameters.Add(New SqlCeParameter("@Title", SqlDbType.NVarChar)).Value = ComboTitle.SelectedItem.ToString()
sqlComm.Parameters.Add(New SqlCeParameter("@FirstName", SqlDbType.NVarChar)).Value = txtFirstName.Text
sqlComm.Parameters.Add(New SqlCeParameter("@LastName", SqlDbType.NVarChar)).Value = txtLastName.Text
sqlComm.Parameters.Add(New SqlCeParameter("@DOB", SqlDbType.DateTime)).Value = DteDOB.Value.ToUniversalTime

' Insert Into Database
Try
    sqlComm.ExecuteNonQuery()
Catch ex As Exception
    MessageBox.Show("Failed To Update Your Details:" & vbCrLf & ex.Message)
    Exit Sub
End Try

' Close Connection
sqlConn.Close() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:46:13.850

尝试杀死撇号：

> 插入个人资料（Title、FirstName、LastName、DOB）值（@Title、'@FirstName'、'@LastName'、'@DOB'）

应该只是：

> 插入个人资料（Title、FirstName、LastName、DOB）值（@Title、@FirstName、@LastName、@DOB）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:47:25.160

从 INSERT 语句中的@DOB 中取出单引号。他们不需要。

# linux - BASH 脚本：处理带有转义空格的路径

> ID：11458489
> 
> 赞同：3
> 
> 时间：2012-07-12T18:40:34.633
> 
> 标签：linux, bash

我有一个 bash 脚本，我想处理空格。我知道这里有很多关于此的问题，但我无法解决我的问题。

根据我所阅读的内容，以下内容应该有效。里面的空间 `../tool_profile/OS\ Firmware/updater`正在逃逸。在脚本中，`$2`变量在分配给`DEST`.

如果我将此路径传递给`ls`用引号括起来或在命令行上使用转义空格，它就可以工作。

**示例脚本命令：**

```
./make_initramfs.sh initramfs_root/ ../tool_profile/OS\ Firmware/updater/ initramfs 
```

**脚本中的 ls 错误：**

```
ls: cannot access ../tool_profile/OS Firmware/updater/: No such file or directory 
```

**make_initramfs.sh：**

```
#!/bin/bash

if [ $# -ne 3 ]; then
        echo "Usage: `basename $0` <root> <dest> <archive_name>"
        exit 1
fi

ROOT=$1
DEST="$2"
NAME=$3

echo "[$DEST]"

# cd and hide output
cd $ROOT 2&>/dev/null

if [ $? -eq 1 ]; then
        echo "invalid root: $ROOT"
        exit 1
fi

ls "$2" # doesn't work
ls "$DEST" # doesn't work

# check for 'ls' errors
#if [ $? -eq 1 ]; then
#        echo "invalid dest: $DEST"
#        exit 1
#fi

#sudo find . | sudo cpio -H newc -o | gzip --best > "$DEST"/"$NAME" 
```

* * *

感谢您提供有关我做错了什么的任何线索！^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:52:08.683

好的......所以当我提交这个时，我意识到我做错了什么。

在验证第二个之前，我传递了两个相对路径并更改为第一个。因此，一旦我更改了目录，第二个相对路径就不再有效。完成后，我将发布更新的脚本。

编辑：我完成了我的脚本。见下文。Edit2：我根据每个人的评论更新了这个。谢谢大家！

**make_initramfs.sh：**

```
#!/bin/bash

if (( $# != 2 )); then
    echo "Usage: `basename $0` <root> <dest>"
    exit 1
fi

root="$1"
archive="${2##*/}"
dest="$PWD/${2%/*}"

# cd and hide errors
cd "$root" &>/dev/null
if (( $? != 0 )); then
    echo "invalid path: $root"
    exit 1
fi

if [ ! -d "$dest" ]; then
    echo "invalid path: $dest"
    exit 1
fi

if [ "$archive" = "" ]; then
    echo "no archive file specified"
    exit 1
fi

if [ `whoami` != root ]; then
    echo "please run this script as root or using sudo"
    exit 1
fi

find . | cpio -H newc -o | gzip --best > "$dest"/"$archive" 
```

# c# - 用于创建 Lotus Notes 提醒的 SharePoint 事件接 收器

> ID：11458490
> 
> 赞同：0
> 
> 时间：2012-07-12T18:40:35.810
> 
> 标签：c#, sharepoint-2010, lotus-notes

我要做的是设置一个 SharePoint 事件接​​收器，以便在将项目添加到 SharePoint 日历时，在 Lotus Notes 中设置具有相同标题/日期/时间的提醒。

我能够创建一个创建 Lotus Notes 提醒的 Windows 窗体应用程序，但是当我将该代码放入 SharePoint 事件接​​收器时，它不会运行。我什至尝试将其他一些我知道有效的代码放入接收器中，但是其中的 Notes 代码根本没有运行。

是否因为 Lotus Notes 代码需要在带有 Notes 客户端的机器上运行而无法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:17:42.187

是的，如果您使用互操作类，则需要在机器上安装 Notes，否则公开 Notes COM API 的 DLL 不存在供您调用。如果您的 SharePoint 服务器是 64 位，这可能会出现问题，因为 IBM 不支持 Win64 上的 COM API。它可以大部分工作，但沿着这条路走并不是一个好主意。

但是，可能还有其他可能的方法来做你想做的事。Domino 可以配置为通过 HTTP 访问并支持 Web 服务，并且最新版本支持 REST API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:23:27.037

由于开箱即用的 Lotus Search 连接器需要在本地计算机上安装 Lotus，我想您是对的。你应该在本地盒子上有莲花。

这实际上是逻辑，因为 Lotus 代码需要有可用的 Lotus 库，除非有一些 http API 或类似的。

# javascript - JavaScript indexOf vs Array.prototype.indexOf IE 兼容性错误

> ID：11458491
> 
> 赞同：1
> 
> 时间：2012-07-12T18:40:36.087
> 
> 标签：javascript, jquery, internet-explorer

> **可能重复：**
> [为什么 indexOf 在数组 IE8 上不起作用？](https://stackoverflow.com/questions/3629183/why-doesnt-indexof-work-on-an-array-ie8)

我最近开发了一个使用原生 Javascript 和 jQuery 的脚本。我的大部分开发都是使用 IE 9、Chrome、Firefox。对于所有这些人来说，下面的行完美地工作：

```
if(data.cols.indexOf("footprint") < 0) 
```

然而，今天我将一些代码推送到了生产系统，一些客户回来说他们的页面坏了。我已将搜索范围缩小到`indexOf`，显然 IE 8 一点也不喜欢。所以我试图找到一个替代方案，我发现了这一点`Array.prototype.indexOf`，但我不确定如何将它与上面类似的 if-else 联系起来。

此外，如果有更好的选择，那么我会全力以赴。另外，这是我可能必须仅适用于 IE 8 浏览器的东西，如果找到 IE 8，使用它，如果不使用原始浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:58:31.150

这个问题已经出现很多次了，可以在这里找到另一个 Stackoverflow 线程：[How to fix Array indexOf() in JavaScript for Internet Explorer browsers](https://stackoverflow.com/questions/1744310/how-to-fix-array-indexof-in-javascript-for-ie-browsers/8813472#8813472)

不同线程上的几个人建议使用[MDC 中的此代码](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf#Compatibility "此代码来自 MDC")。这似乎是代码：

```
if (!Array.prototype.indexOf)
{
  Array.prototype.indexOf = function(elt /*, from*/)
  {
    var len = this.length >>> 0;

    var from = Number(arguments[1]) || 0;
    from = (from < 0)
         ? Math.ceil(from)
         : Math.floor(from);
    if (from < 0)
      from += len;

    for (; from < len; from++)
    {
      if (from in this &&
          this[from] === elt)
        return from;
    }
    return -1;
  };
} 
```

只需在调用 indexOf() 之前运行此代码

# php - 来自 PHP 递归的奇怪返回值逻辑错误

> ID：11458497
> 
> 赞同：0
> 
> 时间：2012-07-12T18:41:01.410
> 
> 标签：php, arrays, recursion, qcodo

我需要编写一个递归函数来搜索一组父子链接头，然后获取每个头的嵌入键值的名称。前任。服装->男士->鞋子。现在，每个类别都有未知数量的附加值。我有一个函数可以成功地通过父母递归地回显所有这些值。但是当我尝试从函数中获取返回值时，它丢失了一些，我不明白为什么：/.

代码如下

```
public function getFamilies($cat){
            $objCurrentCategory = Category::Load($cat); // creates a QCodo object of the passed category ID.

        $str_Query = "SELECT DISTINCT p.family
                      FROM xlsws_product p, xlsws_product_category_assn pc
                      WHERE p.rowid=pc.product_id
                      AND pc.category_id=".$cat; // sql query to retrieve all Families relating to this category.

        $objFamilyDb = Family::GetDatabase(); // retrieves the QCodo database object for Family to execute queries against.
        $objFamilies = Family::InstantiateDbResult($objFamilyDb->Query($str_Query)); // executes the query and saves the result.

        foreach($objFamilies as $family){ // for each family returned, get the family name and add it to the array of names.
            if ($family->Family !== ""){
                $families [] = $family->Family;
            }
        }

        if ($objCurrentCategory->ChildCount > 0){ // if current category has children, create a list of all children rowids.
            $str_Query = "SELECT rowid FROM xlsws_category
                          WHERE parent=".$objCurrentCategory->Rowid; // query to get all children of the category.
            $objChildCategoriesDb = Category::GetDatabase(); // retrieves the QCodo database object for Category to execute queries against.
            $objChildCategories = Category::InstantiateDbResult($objChildCategoriesDb->Query($str_Query)); // executes the query and saves the result.

            foreach($objChildCategories as $child){ // passes through the children to get their families.
                //$families [] = KG::getFamilies($child->Rowid);
                $childFam = KG::getFamilies($child->Rowid);
            }
        }

        $compiled = KG::compileFamilies($childFam); // helper function, not important.

        foreach($compiled as $compile){
            $families[] = $compile;
        }

        foreach($families as $familyt){ // this echo statement correctly displays all names.
            //echo ":".$familyt."<br />";
        }

        return $families;
    } 
```

因此，这会在函数运行期间通过回显到屏幕上显示所有名称，并且函数内的数组也可以回显到屏幕上。但是当我尝试在另一个页面中返回返回结果中的所有名称时，我错过了一堆名称。

**编辑**看起来 $families 变量并没有通过对 getFamilies 的每次递归调用持续存在，并且只在最后返回孩子，而不是孩子和他们所有的父母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:52:23.207

固定的。问题是我试图在同一个递归语句中清理数组，并且由于返回了清理“帮助方法”而不是完整的关联数组，所以它把所有东西都扔掉了。叹息@我的健忘。

# javascript - 一个输入类，只修改空类

> ID：11458499
> 
> 赞同：1
> 
> 时间：2012-07-12T18:41:07.023
> 
> 标签：javascript, jquery, if-statement, for-loop

我有这段代码，如果有一个空的，所有名为“inputix”的输入字段都有一个红色边框，我只想更改那些为空的：

html 部分[http://pastebin.com/4kyv8dLD](http://pastebin.com/4kyv8dLD)

```
for (i=0;i<required.length;i++) {
    var input = $('#'+required[i]);
    if ((input.attr('value') === "") || (input.val() === emptyerror)) {
        input.addClass("needsfilled");
    } else {
        input.removeClass("needsfilled");
    }
}

if (!/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())) {
    email.addClass("needsfilled");
    email.val(emailerror);
}

if ($(":input").hasClass("needsfilled")) {
    i=0;
    $('.inputix').css('border','solid 1px red');
    for (i=0; i<5; i++){
        $('.inputix'+[i]).css('border','solid 1px red');
    }
    return true;
} 
```

问题是只希望空的有红色边框......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:46:08.427

无需使用`for`循环，您可以使用[`start with`](http://api.jquery.com/attribute-starts-with-selector/)选择器：

> 选择具有指定属性且其值正好以给定字符串开头的元素。

```
$('input[class^="inputix"]').css('border','solid 1px red') 
```

作为替代方案，您可以使用`each`循环：

```
$('form').submit(function(){
    $('input').each(function(){
        if (this.value == '') {
           $(this).addClass('error')
        } else {
            $(this).removeClass('error')  
        }
    })

    if ($('input.error').length > 0) {
        return false
    }           
}) 
```

[演示](http://jsfiddle.net/yZgAg/)

# javascript - 单页网站链接颜色切换 Javascript

> ID：11458500
> 
> 赞同：0
> 
> 时间：2012-07-12T18:41:09.267
> 
> 标签：javascript

我正在构建一个单页微型网站，所有内容都在一个页面上。我正在使用锚标签跳转到网站的特定部分。我想要实现的是一个跨浏览器解决方案，它将使我的链接颜色与 :hover 相同并一直停留到另一个链接被点击，然后作为回报，之前点击的链接会恢复到正常状态。

请帮忙！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:45:59.090

这是关于[JSFiddle的解决方案](http://jsfiddle.net/5BR4W/1/)

HTML

```
<a href="#" class="selected">Test 1<a>
<a href="#" class="">Test 2<a>​ 
```

CSS

```
a.selected {
    color: pink;
}​ 
```

JavaScript（使用 jQuery）

```
$("a").on("click", function () {
    if ($(this).hasClass("selected")) { return; }

    $("a").removeClass("selected");        
    $(this).addClass("selected");
});​ 
```

在此示例中，我使用页面上的所有锚标记。使用类更具体地选择它们可能会更好。

在运行上面的代码之前添加下面的 html 行，但是 put 在你的页面中尽可能低。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

# domain-driven-design - 持久和瞬态对象 - 对术语感到困惑

> ID：11458501
> 
> 赞同：8
> 
> 时间：2012-07-12T18:41:11.657
> 
> 标签：domain-driven-design, persistence, transient

这是我对这两个术语的定义，但我不确定它是否完整：

> *持久对象*是领域模型中的一个类的实例，它表示从数据库中提取的一些信息。瞬态 *对象*是域模型中类的一个实例，它是在内存中创建的

a）我假设术语*持久性*和*瞬态*仅用于域模型中的对象，但不适用于位于域模型之外的业务层中的对象？

b) 我们是否也使用*Data-Transfer-Objects*这两个术语？

c) 这两个术语是否也用于*值对象*？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T23:56:47.913

持久表示对象已保存到数据库中，而瞬变表示尚未保存。因此，例如，当您从存储库中获取实体时，该实体是持久的。当您创建一个新实体时，它是暂时的，直到持久化。

a) 这些术语与 ORM 的关联性比与 DDD 的关联性更高，因此它们适用于任何非 DDD。在 DDD 中持久化/瞬态适用于实体和聚合根，因为这些是与存储库一起持久化的对象。

b) 不，DTO 旨在跨进程边界传输数据，并且没有您希望持久保存到数据库的对象的生命周期。

c) 否，因为值对象没有身份，只能作为实体或聚合根的一部分持久化。值对象只是一个值，就像 1 是一个整数值一样，谈论它是否持久化是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T07:45:55.887

瞬态是指未处理的对象或实例化或新创建的对象。一旦对象被提交以进行除对象状态之外的任何其他操作，则该对象状态已知为持久

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-24T23:34:41.687

一个对象通常有两个组成部分：状态（值）和行为（操作）。它可以具有复杂的数据结构以及程序员定义的特定操作。9 OOPL 中的对象仅在程序执行期间存在；因此，它们被称为瞬态对象。OO 数据库可以扩展对象的存在，以便将它们永久存储在数据库中，因此对象成为持久对象，在程序终止之后存在，并且可以稍后检索并由其他程序共享。换句话说，OO 数据库将持久对象永久存储在二级存储中，并允许在多个程序和应用程序之间共享这些对象。

# asp-classic - 任何网络分析工具都可以跟踪包含文件的页面点击吗

> ID：11458503
> 
> 赞同：0
> 
> 时间：2012-07-12T18:41:14.907
> 
> 标签：asp-classic, web-analytics, web-analytics-tools

我正在尝试跟踪对经典 asp 页面的点击，这些页面用作其他 asp 页面中的包含文件。我使用 LogLog 作为我的 Web 分析工具，因为我想要一些简单的东西并且在防火墙后面运行。我观察到的是 LogLog 不跟踪包含的文件。它只会跟踪我拥有所有包含文件的主 asp 页面。（注意：我已将脚本添加到我的所有 .asp 文件中）我们需要此信息，以便我们可以摆脱我们网站中所有未使用的 asp 页面，这些页面已经存在多年而没有任何人使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:44:06.317

[使用 Google Analytics](https://developers.google.com/analytics/devguides/collection/gajs/asyncTracking)，您可以准确跟踪您想要的内容，包括[特定事件](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)或 ajax 加载。

您可以决定何时将匹配添加到您选择的类别中，这样您就可以在加载包含的页面时轻松添加匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:17:53.337

如果您想摆脱未使用的页面，可以尝试以下解决方案：

将以下代码添加到每个 asp：

```
application.lock
aspname = "ASPTRACKER-" + "a.asp" '  Or "b.asp" etc...
if (clng(application(aspname)) = 0) then
    application(aspname) = 1
else
    application(aspname) = application(aspname) + 1
endif
application.unlock 
```

在您的 global.asa 中，确保应用程序结束事件将所有这些应用程序值（以 ASPTRACKER- 开头）写入文件......瞧，每个文件的使用计数器

代码未经测试，所以可能有错别字...

# c++ - C++ - 方法不兼容的声明

> ID：11458512
> 
> 赞同：-1
> 
> 时间：2012-07-12T18:42:12.140
> 
> 标签：c++, visual-c++

编辑：

*   我正在使用命名空间标准
*   我正在使用 VS10
*   房间是一个单独的班级
*   我已经在所有必要的文件中包含了内存头

最初的错误是我在构建之前遇到的 Intellisense 错误。构建后，我得到了更多的对接：

* * *

*   [构建前的原始 Intellisense 错误] 声明与 "std::tr1::shared_ptr<< error-type >> Option::getRoom() 不兼容
*   'std::tr1::shared_ptr<_Ty> Option::getRoom(void)' : 重载函数的不同之处仅在于返回类型与 'std::tr1::shared_ptr Option::getRoom(void)'
*   'Option::getRoom' : 重新定义；不同的基本类型
*   'Option::getRoom' 使用未定义的类 'std::tr1::shared_ptr'

这些与 Option.cpp 中的这段代码有关：

```
shared_ptr<Room> Option::getRoom(){
    shared_ptr<Room> room(new Room);
    return room;
} 
```

Option.hpp中对应的代码：

```
public:
  virtual shared_ptr<Room> getRoom(); 
```

* * *

*   错误“RoomOption::getRoom”：覆盖虚函数返回类型不同，并且与“Option::getRoom”不协变
*   [IntelliSense] 返回类型与被覆盖的虚函数函数“Option::getRoom”的返回类型“std::tr1::shared_ptr<< error-type >>”不相同也不协变

这与 RoomOption.hpp 中的这段代码有关，它是 Option 的子类：

```
public:
shared_ptr<Room> getRoom(); 
```

* * *

这是我遇到问题的两个类的所有代码：

选项.h：

```
#pragma once
#include "Room.h"
#include <memory>
using namespace std;

class Option
{
protected:
    int id;
    char* text;
public:
    Option(void);
    Option(int, char*);
    virtual ~Option(void);
    char* getText();
    int getID();
    virtual shared_ptr<Room> getRoom();
}; 
```

选项.cpp：

```
#include "Option.h"
#include "Room.h"
#include <memory>
using namespace std;

Option::Option(void)
{
}

Option::Option(int newID, char* newText){
    id = newID;
    text = newText;
}

Option::~Option(void)
{
}

char* Option::getText(){
    return text;
}

int Option::getID(){
    return id;
}

shared_ptr<Room> Option::getRoom(){
    shared_ptr<Room> room(new Room());
    return room;
    //note that this function will never be used. I'd prefer to
    //pass back a null pointer but I couldn't do that either.
} 
```

房间选项.h：

```
#pragma once
#include "Option.h"
#include "Room.h"
#include <memory>
using namespace std;

class RoomOption :
    public Option
{
private:
    shared_ptr<Room> room;
public:
    RoomOption(void);
    RoomOption(int, char*, shared_ptr<Room>);
    ~RoomOption(void);
    void setRoom(shared_ptr<Room>);
    shared_ptr<Room> getRoom();
}; 
```

房间选项.cpp：

```
#include "RoomOption.h"
#include "Room.h"
#include <memory>
using namespace std;

RoomOption::RoomOption(void)
{
}

RoomOption::RoomOption(int newID, char* newText, shared_ptr<Room> newRoom)
{
    id = newID;
    strcpy(text, newText);
    room = newRoom;
}

RoomOption::~RoomOption(void)
{
}

void RoomOption::setRoom(shared_ptr<Room> newRoom){
    room = newRoom;
}

shared_ptr<Room> RoomOption::getRoom(){
    return room;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:49:45.080

此代码使用 VS 2010 在 /W4 /WX 处编译没有错误：

```
#include <memory>

struct Room {};

class Option {
  public:
    std::shared_ptr<Room> getRoom();
};

std::shared_ptr<Room> Option::getRoom(){
    std::shared_ptr<Room> room(new Room());
    return room;
}

int main() {
  Option opt;
  std::shared_ptr<Room> room = opt.getRoom();
  return 0;
} 
```

你在做什么不同的事情？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T18:57:09.350

是在 Option.hpp`Room`的调用中使用它的地方声明的吗？`getRoom()`

您是否尝试过删除`()`from`new Room()`以防万一您被[最令人烦恼的 parse](http://en.wikipedia.org/wiki/Most_vexing_parse)击中，可能在我们看不到的其他代码中？

# entity-framework - 使用实体框架 v5.0RC 的带有空对象的 Where 子句

> ID：11458514
> 
> 赞同：0
> 
> 时间：2012-07-12T18:42:29.420
> 
> 标签：entity-framework, entity-framework-4, linq-to-entities, entity-framework-4.1

我试图做以下事情

```
 public IList<Category> GetMainCategories()
    {
         return _context.Category
                 .Where(x => x.ParentCategory == null)
                 .OrderBy(x => x.SortOrder)
                 .ToList();
    } 
```

但是，无论我尝试什么，即使我可以在集合中看到所有 ParentCategory 都为空，它也不会返回任何结果？我读过 EF 有这样的空值问题并且也尝试过

```
.Where(x => x.ParentCategory.Equals(null)) 
```

和

```
.Where(x => Equals(x.ParentCategory.Id, null))
.Where(x => Equals(x.ParentCategory, null)) 
```

但还是一样的结果？我迷路了？我怎么检查一个对象是否为空？当我在 VS2010 中检查它时，是否清楚地说明了它的空值？

**更新**

我可以让它工作，但它的效率非常低！！！必须能够在查询中执行此操作，否则我对 EF 感到非常震惊！任何帮助非常感谢？

```
 public IList<Category> GetMainCategories()
    {
        var cats = _context.Category
                 .OrderBy(x => x.SortOrder)
                 .ToList()
                 .Where(cat => cat.ParentCategory == null)
                 .ToList();
        return cats;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:27:54.997

如果查询...

```
_context.Category
        .Where(x => x.ParentCategory == null)
        .OrderBy(x => x.SortOrder)
        .ToList() 
```

...返回一个空集合，这意味着数据库中的所有类别都有一个`ParentCategory`或类别表为空。就这样。

事实上，在这个查询的结果集合中......

```
_context.Category
        .OrderBy(x => x.SortOrder)
        .ToList() 
```

...每个类别都没有`ParentCategory`并不能证明每个类别`ParentCategory`在数据库中都没有。

您知道使用 EF 加载或不加载相关实体的基础知识吗？我建议阅读 EF >= 4.1/ 的介绍：http `DbContext`: [//blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6 -loading-related-entities.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:50:15.560

它可能已经过时，但我想这是您正在寻找的答案：

```
public abstract class YourContext : DbContext
{
  public YourContext()
  {
    (this as IObjectContextAdapter).ObjectContext.ContextOptions.UseCSharpNullComparisonBehavior = true;
  }
} 
```

这应该可以解决您的问题，因为 Entity Framerwork 将使用“C#like”空比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:32:08.910

`null`在您的结果中，即使您`null`在返回的结果中看到，也不能保证引用实际上在数据库中。

使用此查询强制 EF 加载参考数据：

```
public IList<Category> GetMainCategories()
{
     return _context.Category
             .Include(x => x.ParentCategory) // for the new EF versions
             .Include("ParentCategory")      // for older EF versions
             // .Where(x => x.ParentCategory == null)
             .OrderBy(x => x.SortOrder)
             .ToList();
} 
```

请注意，该`Include()`方法不会影响`Where`工作方式，它只是确保当您`ParentCategory`在调试器窗口（或从代码访问）中查看属性时，您将在那里获得数据。

# c# - 请求执行失败：https://www.google.com/calendar/feeds/default/private/full

> ID：11458515
> 
> 赞同：0
> 
> 时间：2012-07-12T18:42:35.523
> 
> 标签：c#, .net, winforms, google-api, google-calendar-api

我正在尝试通过接受来自 winform 的事件详细信息来将事件添加到 Google 日历

在尝试添加事件时，我收到以下错误“请求执行失败：[https](https://www.google.com/calendar/feeds/default/private/full) ://www.google.com/calendar/feeds/default/private/full ”

代码如下：

```
 CalendarService myService = new CalendarService("exampleCo-exampleApp-1");
        myService.setUserCredentials("username@gmail.com", "password");

        EventEntry entry = new EventEntry();

        entry.Title.Text = textBox1.Text;
        entry.Content.Content = textBox2.Text;
        Where eventLocation = new Where();
        eventLocation.ValueString = textBox3.Text;
        entry.Locations.Add(eventLocation);

        When eventTime = new When();
        eventTime.StartTime =Convert.ToDateTime(textBox4.Text);
        entry.Times.Add(eventTime);

        Uri postUri = new Uri("http://www.google.com/calendar/feeds/default/private/full");

        AtomEntry insertedEntry = myService.Insert(postUri, entry); 
```

谁能帮我解决这个问题？我已经尝试了基本的和完整的，并且也删除了私有的，有什么我错过的吗？

我传递的日历凭据可以访问日历并且确实有多个日历。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:20:31.797

我知道所有 Google API 都需要 OAuth 2 身份验证。我不确定您的 CalendarService 类是否正在使用 Google API 库。看起来你自己在做身份验证？

我强烈建议使用 Google API .Net 客户端来简化所有这些。该库包含 Calendar API 方法，使其非常简单。

[https://code.google.com/p/google-api-dotnet-client/](https://code.google.com/p/google-api-dotnet-client/)

[https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

# hadoop - 如何杀死hadoop工作

> ID：11458519
> 
> 赞同：57
> 
> 时间：2012-07-12T18:42:49.057
> 
> 标签：hadoop, kill, jobs

当我的代码遇到未处理的异常时，我想自动终止我所有的 hadoop 作业。我想知道最好的做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2014-02-13T08:43:15.607

根据版本，执行：

*版本 <2.3.0*

杀死一个 hadoop 工作：

```
hadoop job -kill $jobId 
```

您可以获得所有 jobId 正在执行的操作的列表：

```
hadoop job -list 
```

* * *

*版本 >=2.3.0*

杀死一个 hadoop 工作：

```
yarn application -kill $ApplicationId 
```

您可以获得所有 ApplicationId 正在执行的操作的列表：

```
yarn application -list 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-07-15T22:09:22.037

使用以下命令已贬值

```
hadoop job -list
hadoop job -kill $jobId 
```

考虑使用

```
mapred job -list
mapred job -kill $jobId 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-10-14T09:16:05.383

运行`list`以显示所有作业，然后在适当的命令中使用 jobID/applicationID。

杀死映射的工作：

```
mapred job -list
mapred job -kill <jobId> 
```

杀死纱线工作：

```
yarn application -list
yarn application -kill <ApplicationId> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-12T20:44:34.703

未处理的异常（假设它像坏数据一样可重复，而不是从特定数据节点读取错误）最终会导致作业失败。

您可以通过以下属性配置特定 map 或 reduce 任务在整个作业失败之前可以失败的最大次数：

*   `mapred.map.max.attempts`-*每个地图任务的最大尝试次数。换句话说，框架会在放弃之前尝试多次执行地图任务。*
*   `mapred.reduce.max.attempts`- 同上，但用于减少任务

如果您想在第一次失败时让作业失败，请将此值从默认值 4 设置为 1。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-29T02:16:14.920

只要强行杀死进程ID，hadoop作业也会被自动杀死。使用这个命令：

```
kill -9 <process_id> 
```

> 例如：进程 ID 号：4040 名称节点

```
username@hostname:~$ kill -9 4040 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-03T17:16:33.410

使用以下命令终止在纱线上运行的所有作业。

对于接受的作业，请使用以下命令。

`for x in $(yarn application -list -appStates ACCEPTED | awk 'NR > 2 { print $1 }'); do yarn application -kill $x; done`

对于运行，作业使用以下命令。

`for x in $(yarn application -list -appStates RUNNING | awk 'NR > 2 { print $1 }'); do yarn application -kill $x; done`

# wordpress - 带有 SQL Server 后端存储的 Wordpress “????” 而不是西里尔字符

> ID：11458522
> 
> 赞同：1
> 
> 时间：2012-07-12T18:43:07.540
> 
> 标签：wordpress, sql-server-2008

我在 sql server 2008 r2 上安装了 wordpress。我自己不是 php 人，所以我不太确定如何攻击 php 端。

在 sql server 端，我可以看到存储的问号，所以这不仅仅是一个演示问题。

我在想也许插入本身`N`在字符串之前没有。

谁能指出我可以从哪里开始查看 php 文件，或者更好的是，是否有针对此问题的已知解决方案？

**编辑：**我已经检查过了，所有字段都是 nvarchar。

**编辑 2：**我只是手动将数据插入数据库并正确存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:41:08.780

检查你的`wp-includes/wp-db.php`文件。

Wpdb 是用于数据库操作的核心数据库对象。

# php - 了解多维数组的基础知识

> ID：11458524
> 
> 赞同：0
> 
> 时间：2012-07-12T18:43:09.767
> 
> 标签：php

我不熟悉在 php 中使用多维数组，我试图远离它们，因为它们让我感到困惑，但现在是时候好好利用它们了。我一直试图了解它们是如何工作的，但我就是不明白。

我要做的是根据字符串比较函数填充结果，一旦我找到与“项目名称”匹配的内容，我希望第一个插槽包含“项目名称”，然后我想增加优先级插槽 1。

所以当我完成填充我的数组时，它将有各种不同的公司名称，每个都有各自的优先级......

我无法理解如何声明和操作以下数组：

```
$matches = array(
    'name'=>array('somename'),
    'priority'=>array($priority_level++)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:49:02.217

多维数组很容易。它们只是一个数组，其中的元素是其他数组。

因此，您可以有 2 个单独的数组：

```
$name = array('somename');
$priority = array(1); 
```

或者您可以拥有一个包含这两个数组作为元素的数组：

```
$matches = array(
    'name' => array('somename'),
    'priority' => array(1)
); 
```

因此， using`$matches['name']`与 using 相同`$name`，它们都是数组，只是存储方式不同。

```
echo $name[0]; //'somename';
echo $matches['name'][0]; //'somename'; 
```

因此，要向`$matches`数组添加另一个名称，您可以这样做：

```
$matches['name'][] = 'Another Name';
$matches['priority'][] = 2; 
```

`print_r($matches);`会输出：

```
Array
(
    [name] => Array
        (
            [0] => somename
            [1] => Another Name
        )

    [priority] => Array
        (
            [0] => 1
            [1] => 2
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:49:20.970

因此，在您所拥有的中，您的变量 $matches 将指向一个键控数组，该数组的“名称”元素将是一个带有 1 个条目“somename”的索引数组，将有一个具有值的“优先级”条目是一个索引数组，其中一个条目 = $priority_level。

我认为，相反，您可能想要的是：

```
$matches[] = array(name => 'somename', $priority => $priority_level++); 
```

这样，$matches 是一个索引数组，其中每个索引都包含一个键控数组，因此您可以将它们寻址为：

`$matches[0]['name']` 和`$matches[0]['priority']`，这对大多数人来说更合乎逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:51:38.933

在我看来，一个更容易使用的结构更像是这样的：

```
$matches = array(
    array( 'name' => 'somename', 'priority' => $priority_level_for_this_match ),
    array( 'name' => 'someothername', 'priority' => $priority_level_for_that_match )
) 
```

要填充此数组，请先创建一个空数组：

```
$matches = array(); 
```

然后，找到所有匹配项。

```
$match = array( 'name' => 'somename', 'priority' => $some_priority ); 
```

要将该数组添加到您的匹配项中，只需将其放在末尾即可：

```
$matches[] = $match; 
```

填充后，您可以轻松地对其进行迭代：

```
foreach($matches as $k => $v) {
    // The value in this case is also an array, and can be indexed as such
    echo( $v['name'] . ': ' . $v['priority'] . '<br>' );
} 
```

您还可以根据优先级对匹配的数组进行排序：

```
function cmp($a, $b) {
    if($a['priority'] == $b['priority'])
        return 0;
    return ($a['priority'] < $b['priority']) ? -1 : 1;
}
usort($matches, 'cmp'); 
```

（来自[这个答案](https://stackoverflow.com/a/2426960/697370)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T18:54:31.197

在这种情况下，这也是一维数组的解决方案吗？

```
$matches    = array(
        'company_1' => 0,
        'company_2' => 0,
);

if (isset($matches['company_1'])) {
    ++$matches['company_1'];
} else {
    $matches['company_1'] = 1;
} 
```

它查找名称是否已经在列表中。如果不是，它会`array_key`为此值设置一个。如果它找到一个已经存在的值，它只会提高“优先级”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T18:47:20.353

```
$matches['name'][0]   --> 'somename'
$matches['priority'][0]  ---> the incremented $priority_level value 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T18:50:53.783

就像大卫在对该问题的评论中所说的那样，听起来您没有使用正确的工具来完成这项工作。尝试：

```
$priorities = array();
foreach($companies as $company) {
    if (!isset($priorities[$company])) { $priorities[$company] = 0; }
    $priorities[$company]++;
} 
```

然后您可以通过检查来访问优先级`$priorities['SomeCompanyName'];`。

# .net - .Net 正则表达式匹配模式“aebecea”/“aebeceb”/“aebecec”/“beceaec”

> ID：11458525
> 
> 赞同：1
> 
> 时间：2012-07-12T18:43:10.580
> 
> 标签：.net, regex

我有 .Net Regex ([abc][e])+([abc]) 但是当我尝试匹配时，它只匹配几个字符而不是组中的整个字符串。

这是我的输入和所需的输出组

*   aebeceaxyz - 第 1 组 (aebece)，第 2 组 (a)
*   aebecebxyz - 第 1 组 (aebece)，第 2 组 (b)
*   aebececxyz - 第 1 组 (aebece)，第 2 组 (c)
*   beceaecxyz - 第 1 组 (beceae)，第 2 组 (c)

在我的正则表达式中，我得到了 (ce)(a)/(ce)(b)/(ce)(c)/(ae)(/c) 的结果，这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:57:22.177

您在第一组中获得了 [abc][e] 的第一场比赛，但是您想在要捕获的整个组周围包裹一些括号。此外，您可以使用 ?: 使内部组不被捕获。这应该会给出您正在寻找的结果：

```
((?:[abc][e])+)([abc]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:52:37.590

尝试`([abce]{5}[e])+([abc])`

您正在尝试的正则表达式未指定第一组中的重复次数

你也可以只拥有`([abce]{6})+([abc])`，除非你真的想确保第一组以'e'结尾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:56:15.557

您可以使用 ([abc][e]).*([abc]) 吗？

# asp.net - 带 Asp 的 X 轴：图表

> ID：11458531
> 
> 赞同：1
> 
> 时间：2012-07-12T18:43:17.570
> 
> 标签：asp.net, visual-web-developer-2010, aspchart

我有`asp:chart`一个系列。该系列共有 13 分。(1 到 13)

当使用 Visual Web Designer 数据绑定工具将数据绑定到图表时，我什至想查看不接收任何数据的列。（x 列，其中 y = 0）。

现在我有这个（我的图表的 ASCII 表示）：

```
 4 |[]
        3 |[]      []
        2 |[]  []  [][]      
        1 |[][][][][][]
           ------------
           1 3 5 7 9 10 
```

带有 x 坐标的图表 where `y > 0`。我想要的是这个：

```
 4 |[]
       3 |[]              []
       2 |[]      []      [][]    
       1 |[]  []  []  []  [][]
          -----------------------------
          1 2 3 4 5 6 7 8 9 10 11 12 13 
```

知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:31:42.937

你能分享你的代码吗？使用下面的标记，我得到从 0 到 11 的 X 轴 12 个数字：

```
<asp:Chart ID="Chart1" runat="server">
                <Series>
                    <asp:Series Name="Series1" ChartType="Point">
                        <Points>
                            <asp:DataPoint XValue="1" YValues="2" />
                            <asp:DataPoint XValue="3" YValues="5" />
                            <asp:DataPoint XValue="5" YValues="3" />
                            <asp:DataPoint XValue="7" YValues="8" />
                            <asp:DataPoint XValue="9" YValues="1" />
                            <asp:DataPoint XValue="10" YValues="1" />
                        </Points>
                    </asp:Series>
                </Series>
                <ChartAreas>
                    <asp:ChartArea />
                </ChartAreas>
            </asp:Chart> 
```

# xml - 使用 Fluid 时如何获得有效的 XML？

> ID：11458537
> 
> 赞同：0
> 
> 时间：2012-07-12T18:43:48.527
> 
> 标签：xml, aptana, typo3, fluid

我正在使用 Aptana 来处理我的 TYPO3 项目。这变得非常令人沮丧：

![在此处输入图像描述](../Images/e9ee447f6bc5960b1f914737c1fa822c.png)

我该怎么做才能将标记识别为有效的 XML？

我还在 Aptana 中寻找完全禁用 XML 验证的选项，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:53:42.937

我猜 Aptana 试图验证 HTML，而不是 XML？尝试将文件重命名为 *.tpl / *.xml？

或者，Aptana 是否会因文档开头的错误而感到困惑？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:15:10.460

虽然这仍然不会产生有效的 XML，但禁用某些 HTML 验证器至少可以让您工作时不会分心。

![在此处输入图像描述](../Images/5a9e127858911148f87b5e8fb103b823.png)

## 结果

![在此处输入图像描述](../Images/9f288d95109dd57a83a4d644da6f7960.png)

# scheme - 球拍/基础命名空间

> ID：11458538
> 
> 赞同：5
> 
> 时间：2012-07-12T18:43:54.157
> 
> 标签：scheme, racket, r7rs

任何人都知道`racket/base`语言中包含什么。我希望将`racket/base`命名空间定义与 R7RS 草案进行比较，以第一手了解 Racket 与 Scheme 的不同之处。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T19:21:03.030

就像任何其他实际的 Scheme 实现一样，差异将是*巨大的。*给你一个粗略的想法，我看到 1300 多个标识符`racket/base`，并且`racket`上升到 2000 多个。另外，请注意，比较名称不会是全部 - 还有其他差异，例如 Racket 使用的事实默认情况下不可变对，就像您得到保证从左到右的评估顺序这一事实一样。

为前者自己获取列表的一种快速方法是确保安装了[XREPL](http://docs.racket-lang.org/xrepl/)（让你的`~/.racketrc`文件包含所有绑定的名称：`(require xrepl)``racket/base`[`,ap`](http://docs.racket-lang.org/xrepl/#%28xrepl._apropos%29)

```
$ racket -I racket/base
Welcome to Racket v5.2.1.
-> ,ap 
```

要了解名称，您可以使用[`,doc`](http://docs.racket-lang.org/xrepl/#%28xrepl._doc%29)命令，或者只使用文档中的[搜索框](http://docs.racket-lang.org/search/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:13:12.173

根据[球拍参考](http://docs.racket-lang.org/reference/index.html)：

> 除非另有说明，否则本手册中定义的绑定由球拍/底座和球拍语言导出。

不幸的是，这并不是很有帮助，因为它是一本大型参考手册。但是，由于您将 R7RS 与 Racket 进行比较，因此只需浏览整个参考资料以了解可用的内容可能会很有用。

# idl-programming-language - IDL：自动更改 .pro 中的变量？

> ID：11458542
> 
> 赞同：1
> 
> 时间：2012-07-12T18:44:21.707
> 
> 标签：idl-programming-language

我想知道是否有一种方法可以使用一堆包含值的 .txt 文件来更改已编译的 IDL .pro 文件中的变量值。

例如，我有 3 个 .txt 文件，每个文件中有 2 行。让我们称呼他们：

```
 1\. C:\input1.txt
 2\. C:\input2.txt
 3\. C:\input3.txt 
```

内容类似于：

```
hello
world 
```

我拥有的 .pro 看起来像这样：

```
pro tst1
common vars, a, b
infile = 'C:\input1.txt'
a =''
b =''
openr,lun, infile, /get_lun
readf,lun,a
readf,lun,b
end

pro tst2
common vars, a, b
tst1
print,a, b
end 
```

我想要做的是更改每次迭代的 infile 变量，直到所有 3 个 input.txt 文件都被读取。

不幸的是，我确实需要在第一个 pro 中拥有公共块和 infile。我正在尝试使我得到的一个大的讨厌的 .pro 自动化（就像我的简单示例一样），它让我有点发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:34:59.303

就像是：

```
pro tst1, infile
  common vars, a, b

  a = ''
  b = ''
  openr, lun, infile, /get_lun
  readf, lun, a
  readf, lun, b
  free_lun, lun
end

pro tst2
  common vars, a, b
  for i = 1, 3 do begin
    tst1, string(i, format='(%"C:\infile%d.txt")')
    print,a, b
  endfor
end 
```

# java - 我可以迭代多维枚举（java）吗？

> ID：11458544
> 
> 赞同：0
> 
> 时间：2012-07-12T18:44:23.073
> 
> 标签：java, data-structures, enums, multidimensional-array

我有一个枚举如下（实际的要大得多）：

```
public enum PricesType {

    SMALL("Small",
            new BigDecimal(     "9.69"      ),
            new BigDecimal(     "11.49"     ),
            new BigDecimal(     "13.39"     ),
            new BigDecimal(     "22.79"     ),
    MEDIUM("Medium",
            new BigDecimal(     "18.19"     ),
            new BigDecimal(     "27.99"     ),
            new BigDecimal(     "35.99"     ),
            new BigDecimal(     "44.89"     );
    String size;
    BigDecimal monthToMonth;
    BigDecimal sixMonth;
    BigDecimal twelveMonth;
    BigDecimal twentyFourMonth;
... constructors, methods...} 
```

我有没有一种简单的方法来迭代它的多维方面？我知道如何按大小进行迭代，但是如何迭代各个月份？

也就是说，我可以这样做：

```
for (PricesType o: PricesType.values()){
  System.out.println(o); // gives me the "SMALL" "MEDIUM" etc.
} 
```

但是我可以用一些索引/迭代器循环几个月，还是我必须**单独**调用每个？（我有很多这样的）。

也许更好的数据结构？它用于保存在内存中的价目表，直到某事触发更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:52:34.273

我会使用一个数组

```
 SMALL("Small",
        BigDecimal.valueOf(9.69),
        BigDecimal.valueOf(11.49),
        BigDecimal.valueOf(13.39),
        BigDecimal.valueOf(22.79));

 private final String size;
 private final BigDecimal[] values;

 PricesType(String size, BigDecimal... values) {
     this.size = size; this.values = values;
 } 
```

这样，您可以遍历循环中的每个条目。

`double`除非您需要超过 15 位的准确度，否则我会使用。

```
 SMALL("Small", 9.69, 11.49, 13.39, 22.79);

 private final String size;
 private final double[] values;

 PricesType(String size, double... values) {
     this.size = size; this.values = values;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:58:24.930

您可能会考虑改用 Collection API，它为您提供了很多迭代值的选项，在您的情况下，最好使用 Map。

```
Map<PriceType, Set<BigDecimal>> priceMap = new HashMap<PriceType, Set<BigDecimal>>();
    priceMap.put(PriceType.SMALL, Sets.newHashSet(
        new BigDecimal(     "9.69"      ),
        new BigDecimal(     "11.49"     ),
        new BigDecimal(     "13.39"     ),
        new BigDecimal(     "22.79"     )
    ));

public enum PriceType {
    SMALL, MEDIUM, LARGE;
} 
```

# java - JSTL fmt:message and resource bundle 导致 ???hello?

> ID：11458547
> 
> 赞同：3
> 
> 时间：2012-07-12T18:44:43.257
> 
> 标签：java, jsp, internationalization

我正在尝试使用 JSLT。我遵循了一些指示。

1.  我在 xamppp 上安装了一个 tomcat，用控制面板激活它，它在端口 8080 上工作正常。
2.  在 WEB-INF\lib 目录中，我添加了一个“jstl-1.2.jar”文件和一个 Messages_en_US.properties

这是我的 test.jsp：

```
<fmt:setLocale value="en_US" scope="application"/>
<fmt:setBundle basename="Messages"/>
<fmt:message key="welcome" />

<h1>test</h1>

<p>Counting to three:</p>
<% for (int i=1; i<4; i++) { %>
<p>This number is <%= i %>.</p>
<% } %>
<p>Done counting.</p> 
```

计数有效，所以我的 jsp 有效。但欢迎只是显示???欢迎???。

我究竟做错了什么？我是否将捆绑包放在正确的目录中？我尝试将消息包放在类和 WEB-INF 中 - 没有帮助。我也尝试重新启动服务器 - 它没有帮助。

我如何使用字符串包？如何使用多个捆绑包？

干杯，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T19:22:56.970

可能会发生很多事情。

当你说

```
<fmt:setLocale value="en_US" ... /> 
```

这意味着你应该有`Messages_en.properties`or `Messages_en-US.properties`。使用

```
<fmt:setBundle basename="Messages" var="msg" /> 
```

您应该将加载的消息分配到当前范围内的变量中。当您需要打印消息时，您应该使用

```
<fmt:message key="welcome" bundle="${msg}" /> 
```

显示消息。

# svn - svn diff 与分支的基础

> ID：11458550
> 
> 赞同：3
> 
> 时间：2012-07-12T18:44:57.253
> 
> 标签：svn

我觉得这很简单，但令人尴尬的是我找不到关于它的信息，而且我是 subversion 的新手。

我创建了一个带有 svn 副本的 fork 并检查了分支并从那里开始工作。我通过在我的工作副本中对该分支的一系列提交创建了一组变更集。

我现在想看看自分叉以来我做了哪些更改。我不想看到我的变更集和我分叉的最新分支之间的变化——我只想看到我的一组变化。换句话说，我不在乎其他人在我分叉后的分支上做了什么。

对我来说最简单的方法是什么？我是否必须通过 svn 日志筛选我的分支的基本修订版？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:54:16.233

在这种情况下，我对 SVN 也有同样的问题。最终发生的问题是，如果您已提交到存储库，则无法`svn diff`使用 base，因为这样会`BASE`生成您从工作副本提交的最后一个修订。当您执行`svn update`. 从存储库中实际记录签出的一种方法是在服务器端，我知道这并不理想，因为人们宁愿编写一些代码来自动为您找到它，但正如您所知...svn 对此没有命令。您最好的选择是创建一个服务器端脚本来跟踪它并从现在开始使用它。

# c++ - 循环 R、G、B 值作为 HUE？

> ID：11458552
> 
> 赞同：1
> 
> 时间：2012-07-12T18:45:04.623
> 
> 标签：c++, rgb, hsv

我正在使用 SFML，它有一个颜色函数，可以采用 RGB 值。例如.. (255,0,0)。我希望能够通过循环循环这些数字，以便显示的颜色通过色调循环...

因此，如果我使用 (76,204,63)，该函数将调整这 3 个数字。所以我需要将rgb转换为HSV然后返回rgb的函数。

有什么想法我会怎么做？

我希望使用的 sfml 代码是...

_sprite.setColor(76,204,63); 这会将精灵设置为一种颜色......我试图弄清楚一旦用这些数字完成了如何通过色调循环颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:51:05.813

将[RGB 转换为 HSL](http://www.easyrgb.com/index.php?X=MATH&H=18#text18)或[HSV](http://www.easyrgb.com/index.php?X=MATH&H=20#text20)，修改色调，然后将结果转换[回 RGB](http://www.easyrgb.com/index.php?X=MATH&H=19#text19)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T19:54:56.783

通过谷歌搜索，我找到[了这个](https://stackoverflow.com/a/8510751/1034248)答案，并将代码转换为 C++，并考虑到 SFML。我的选角很差，所以请随时改进。我想它甚至应该可以替换 3x3 阵列。

```
sf::Uint8 clampAndConvert(float v)
{
    if(v < 0)
        return 0;
    if( v > 255)
        return 255;
    return static_cast<sf::Uint8>(v);
}

sf::Color RGBRotate(sf::Color old, float degrees)
{
    float cosA = cos(degrees*3.14159265f/180);
    float sinA = sin(degrees*3.14159265f/180);
    float rot = 1.f/3.f * (1.0f - cosA) + sqrt(1.f/3.f) * sinA;

    float rx = old.r * (cosA + (1.0f - cosA) / 3.0f) + old.g * rot + old.b * rot;
    float gx = old.r * rot + old.g * (cosA + 1.f/3.f*(1.0f - cosA)) + old.b * rot;
    float bx = old.r * rot + old.g * rot + old.b * cosA + 1.f/3.f * (1.0f - cosA);

    return sf::Color(clampAndConvert(rx), clampAndConvert(gx), clampAndConvert(bx), old.a);
} 
```

**编辑：**删除了不必要的演员表。

**编辑：**摆脱了矩阵。

**编辑：**正如我注意到的那样，代码并没有真正按预期工作，但这是一个完美运行的硬编码解决方案，只是不是那么紧凑和漂亮。

```
#include <SFML/Graphics.hpp>

int main()
{
    sf::RenderWindow Screen (sf::VideoMode (800, 600, 32), "Game", sf::Style::Close);
    Screen.setFramerateLimit(60);

    sf::RectangleShape rect(sf::Vector2f(350.f, 350.f));
    rect.setPosition(150, 150);

    int dr = 0;
    int dg = 0;
    int db = 0;

    sf::Uint8 r = 255, g = 0,  b = 0;

    while (Screen.isOpen())
    {
        sf::Event Event;
        while (Screen.pollEvent (Event))
        {
            if (Event.type == sf::Event::Closed)
                Screen.close();
        }

        r += dr;
        g += dg;
        b += db;

        if(r == 255 && g == 0 && b == 0)
        {
            dr = 0; dg = 1; db = 0;
        }

        if(r == 255 && g == 255 && b == 0)
        {
            dr = -1; dg = 0; db = 0;
        }

        if(r == 0 && g == 255 && b == 0)
        {
            dr = 0; dg = 0; db = 1;
        }

        if(r == 0 && g == 255 && b == 255)
        {
            dr = 0; dg = -1; db = 0;
        }

        if(r == 0 && g == 0 && b == 255)
        {
            dr = 1; dg = 0; db = 0;
        }

        if(r == 255 && g == 0 && b == 255)
        {
            dr = 0; dg = 0; db = -1;
        }

        rect.setFillColor(sf::Color(r, g, b));

        Screen.clear();
        Screen.draw(rect);
        Screen.display();
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:08:36.647

上面杰里的回答是一种正确的方法。如果您不关心保留亮度（如果您这样做 - 也不要使用 HSV），您可以简单地沿 R=G=B 轴旋转 RGB 颜色。这只是一个矩阵乘法，可以节省与 HLS 或 HSV 空间之间的转换。

# silverlight - silverlight scrollviewer 高度和宽度设置

> ID：11458554
> 
> 赞同：0
> 
> 时间：2012-07-12T18:45:07.593
> 
> 标签：silverlight

我在理解 silverlight 网页中的滚动查看器时遇到问题。有用户控件和网格“layoutRoot”。我的滚动查看器设置在“Layoutroot”网格之前。它从来没有正常工作。即使页面底部有其他项目，我也无法滚动到它们，也看不到它们。我一直在玩 LayoutRoot 和 Scrollviwer 的 UserControl MinHeight、DesignHeight 和 minHeight。只是很难弄清楚设置它的最佳方法是什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:00:14.503

您需要从所有控件中删除最小高度和最大高度，因为 Silverlight 会处理所有这些事情。您需要将 VerticalScrollBarVisiblity 设置为自动。默认情况下它被禁用，您将能够实现您想要的。

干杯! 维诺德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:13:04.913

如果 MinHeight 属性设置得太大，那么它将无法在屏幕上看到并被截断。如果您同时删除 UserControl 和 ScrollViewer 上的 MinHeight 属性，那么它应该可以正常工作。

或者，如果这不起作用，请发布您的代码，以便我们看看。

# java - Java 类不在 OS X 上运行

> ID：11458556
> 
> 赞同：0
> 
> 时间：2012-07-12T18:45:18.430
> 
> 标签：java, macos

我有一个用 Java 编写的简单程序：

```
package edu.oakland.lecture;

public class Alfa {

    int a;

    public int getAttribute() {
        System.out.println("returning value of a");
        return a;
    }

    public static void main(String []args) {
        Alfa alfa = new Alfa();
        int number = alfa.getAttribute();
        System.out.println(number);
    }
} 
```

它在 windows (xp) 和 os x (lion) 上都用 javac 编译，但它只在 windows 上运行。

这是我用来编译程序的命令：

`javac -d bin source/edu/oakland/lecture/Alfa.java`

这是我用来执行它的命令：

`java -classpath bin; edu.oakland.lecture.Alfa`（我也试过`-cp`而不是`-classpath`在终端）

正如我所提到的，我在 Windows 端得到了预期的输出，但在 os x 端得到了这条消息：

`-bash: edu.oakland.lecture.Alfa: command not found`

我知道它必须是一些愚蠢的简单的东西；我在看什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:46:52.857

类 UNIX 系统（例如 OS X）上的类路径分隔符是 ':'，而不是 ';'。你的命令应该是

```
java -classpath bin edu.oakland.lecture.Alfa 
```

如果你的类路径确实有几个不同的组件，它看起来像：

```
java -classpath bin:foo edu.oakland.lecture.Alfa 
```

# asp.net-mvc - 从 Application_Start 中获取网站的 URL？

> ID：11458567
> 
> 赞同：8
> 
> 时间：2012-07-12T18:46:00.443
> 
> 标签：asp.net-mvc, url, routing

**你好，**

我需要为我的 APS.NET MVC 3 网站中的操作生成正确的 URL，这必须在 Gloabl.asax 的 Application_Start 中完成。

我试图设置一个 UrlHelper 但 HttpContext.Current 始终为空？

我寻找的地址是这样的：[http](http://www.mysite.se/MyController/MyAction) ://www.mysite.se/MyController/MyAction 。

我也尝试过 VirtualPathUtility.ToAbsolute("~/") 但这只会给我“/mysite/”

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T03:35:20.477

`HttpContext`当应用程序在IIS 集成模式下运行时，恐怕您无法访问`Application_Start`（您可以在经典模式下实现，但不推荐这样做）。

Mike 在[这里](http://mvolo.com/iis7-integrated-mode-request-is-not-available-in-this-context-exception-in-applicationstart)描述了一种解决方法，如何做到这一点，`Application_BeginRequest`这样您的代码仍然只针对第一个请求而不是以后的请求运行。

# regex - 使用正则表达式在 C# 中搜索阿拉伯语文本

> ID：11458571
> 
> 赞同：1
> 
> 时间：2012-07-12T18:46:19.180
> 
> 标签：regex, c#-4.0, search, arabic

我想通过正则表达式和 C# 在阿拉伯语文本中创建搜索模块。谁能帮我？我没有任何想法。在我的搜索模块中，当用户在没有字母 (ُ َ ِ ) 的情况下惰性“من”时，模块返回 مُن مِن مَن 等。如何创建这个模块？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T19:15:20.500

识别阿拉伯语单词的正则表达式是

**[ء-ي]+**

你可以在这里验证这个表达式[RegExr](http://gskinner.com/RegExr/)，它可能不是完美的答案，但至少会给你一个开始![输出](../Images/1141a86fbf588c02b790cb4ca6ac1295.png)

这是 C# 中的一个小代码

```
class Program
    {
        static void Main(string[] args)
        {
            bool results = checkArabicWords("مرحبا كيف حالك");
            Console.WriteLine(results);
            Console.ReadLine();
        }
       static bool checkArabicWords(string arabicText)
        {
            Regex regex = new Regex("[ء-ي]+");
            return regex.IsMatch(arabicText);

        }
  } 
```

上面的代码是
![在此处输入图像描述](../Images/c1b889948cfbe664c2d54dfec01387d5.png)
希望这有帮助

# c# - ComponentArt 中仪表的格式字符串

> ID：11458579
> 
> 赞同：0
> 
> 时间：2012-07-12T18:46:59.070
> 
> 标签：c#, wpf, componentart

有没有办法将某种格式放入量表的值中？这是我的代码（XAML）

```
 <ComponentArt:NumericGauge Height="80" 
        Name="Gauge1" 
        Width="300" 
        Grid.ColumnSpan="2" 
        Margin="0,8,0,8" 
        Grid.Row="1" 
        VerticalAlignment="Top" 
        Value="900000" 
     /> 
```

我想要这样的仪表值：$ 900.000

我的程序是用c#开发的

提前致谢

编辑：更多信息=我正在 Visual Studio 中使用 c# 开发 wpf 应用程序，我正在使用 ComponentArt 开发“Gauge”这是来自 componentart 网页的一些示例代码

[http://dv2011.componentart.com/#/Views/DemoViewPage.xaml](http://dv2011.componentart.com/#/Views/DemoViewPage.xaml) $control=Gauges&category=Numeric_Gauges&demo=Numeric_Gauge

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:06:44.753

At [http://www.componentart.com/community/forums/t/63716.aspx](http://www.componentart.com/community/forums/t/63716.aspx) there's someone using the NumericGauge - they've provided some example code Numeric_5F00_Gauge.zip.

Inside, they are using FormatString to provide the % symbol. I guess you could try doing FormatString="$ 0.#0" or something similar? (maybe more 0's for more significant decimal places), and change your Value to 900.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:31:17.453

我找到了解决方案，这是获得 90.000 美元的 FormatString

```
FormatString="$ #,#0" 
```

# java - 简单的java程序不工作——while循环

> ID：11458583
> 
> 赞同：0
> 
> 时间：2012-07-12T18:47:17.913
> 
> 标签：java, while-loop

所以我对编程还很陌生，我正在做一个简单的练习程序，可以在字母表中找到字母顺序。这应该很容易......但由于某种原因，当我添加一个 while 循环时，我得到了一个 StringIndexOutOfBoundsException 。所以程序确实第一次做它应该做的......但不允许我在不重新运行程序的情况下再次测试。我测试了 while 循环，里面只有一个简单的 print 语句，它起作用了，所以我很困惑为什么 while 循环不能与我的字母程序一起工作。

任何帮助将不胜感激谢谢！

```
import java.io.*;
public class test {

    public static void main(String[] args) throws IOException 
    {
        BufferedReader in;
        in = new BufferedReader (new InputStreamReader (System.in));
        boolean again=true;
        String response;

        while (again)
        {

            System.out.println("Enter a letter to find it's order in the alphabet");

            char theLetter = (char) in.read();

            System.out.println(theLetter + " is the " + convertLetter(theLetter) + "th letter of the alphabet");

            System.out.println("want to play again?");

            response = in.readLine();

            if (response.charAt(0)=='n')
            {
                again=false;
            }
        }

        System.out.println("end program");
    }

    public static int convertLetter(char TheLetter)
    {
        //number value 'a'=97
        //number value 'b'=98
        //number value 'c'=99

        //subtracting 'a' from any other number will reveal how many places away that number is from the start
        //thus finding it's chronological place in the alphabet

        int NumberValue= (int)TheLetter;
        int a = 'a';

        int CalulateOrder = (NumberValue - a) + 1; 

        return CalulateOrder;

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:50:52.147

```
 if (response.charAt(0)=='n') 
```

如果 String 为空`""`，则位置 0 将没有字符。在执行之前检查它`charAt()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T19:01:10.317

当您按回车键输入原始字符时，该换行符仍在缓冲区中，因为您只调用 read() 并且只获得 1 个字符，而缓冲区中的换行符不会按回车键。因此，当您调用 readLine 时，它​​只会点击该换行符并返回一个空字符串。

您可以通过在第一次询问您输入字符时键入具有多个字符的内容来测试这一点，并且它将进行第二次循环，因为 readLine 将返回一个非空字符串。

要解决此问题，请将您的原始 read() 更改为 readLine() 以便它获取您按 Enter 引起的换行符，然后只需从字符串中获取第一个字符。

这应该解决它：

```
 import java.io.*;

public class test {

    public static void main(String[] args) throws IOException {
        BufferedReader in;
        in = new BufferedReader (new InputStreamReader (System.in));
        boolean again=true;
        String response;

        while (again) {
            System.out.println("Enter a letter to find it's order in the alphabet");
            response = in.readLine();
            if (response.length() > 0) {
                char theLetter = response.charAt(0);

                System.out.println(theLetter + " is the " + convertLetter(theLetter) + "th letter of the alphabet");
                System.out.println("want to play again?");

                response = in.readLine();
                if (response.length() > 0 && response.charAt(0)=='n') {
                    again=false;
                }
            }
        }
        System.out.println("end program");
    }

    public static int convertLetter(char TheLetter) {
        return (TheLetter - 'a') + 1;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:51:28.247

是`response` `null`或的长度`""`？如果是，您将无法获得`char`at index 0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T18:53:48.660

您访问字符串索引的唯一位置是，`if (response.charAt(0) == 'n')`所以这很可能是您的问题区域。

```
if(response.length() > 0 && response.charAt(0) == 'n') 
```

应该做的伎俩。

编辑：正如@TreySchroeder 指出的那样，您的程序还有另一个问题，因为您一开始没有阅读整行。放在`in.readLine();`您的初始 之后`theLetter = (char) in.read();`，并将此修复用于其他问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T18:58:53.910

我敢打赌，罪魁祸首是你在`want to play again?`提示符下点击了“输入”。`in.readLine();`返回没有尾随换行符的行（请参阅javadocs [）](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#readLine%28%29)，这意味着如果您只按“输入”，它将返回一个空字符串，因此在检查第一个字符时会返回 StringOutOfBoundException。

在检查字符之前检查空字符串：

```
if(response.length() > 0 && response.charAt(0) == 'n') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T19:03:35.040

```
if (response.isEmpty() && response.charAt(0)=='n') 
```

将避免异常。

# android - Android 中神秘的 SQLiteBindOrColumnOutOfRangeException。

> ID：11458590
> 
> 赞同：1
> 
> 时间：2012-07-12T18:47:27.880
> 
> 标签：android, sqlite, exception

因此，我一直在努力设置一个 SQL 单词数据库，据我从调试日志中可以看出，它实际上确实可以正确加载和设置。但是，当我尝试查询它时，无论它是在设置过程中还是已经完成，我的程序都会因为异常而被强制关闭。对日志的调查揭示了这一点：

```
07-12 13:47:02.000: W/dalvikvm(5247): threadid=1: thread exiting with uncaught exception
(group=0x40a401f8)
...
07-12 13:47:02.010: E/AndroidRuntime(5247): Caused by:
android.database.sqlite.SQLiteBindOrColumnIndexOutOfRangeException: bind or column index out of
range: handle 0x14a6548
...
07-12 14:41:36.250: E/AndroidRuntime(6326):     at com.example.wordsearchandroid.WordListProvider.query(WordListProvider.java:70) 
```

在 Android API 上搜索 SQLiteBindOrColumnIndexOutOfRangeException 会发现一个相当简单的页面（http://developer.android.com/reference/android/database/sqlite/SQLiteBindOrColumnIndexOutOfRangeException.html），其中没有提及“句柄”所指的内容.

不幸的是，据我所知，我的查询中没有提到不存在的列。这是我在 ContentProvider 中的查询方法：

```
public class WordListProvider extends ContentProvider {
private WordListOpenHelper listOpenHelper;
....

public static final String ID = "_ID";
public static final String WORD = "WORD";
public static final String LENGTH = "LENGTH";
...

public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    SQLiteQueryBuilder qBuilder = new SQLiteQueryBuilder();
    qBuilder.setTables(DB_NAME);
    Cursor c;

    switch(matcher.match(uri)) {

        case SEARCH_WORD_LIST:

            Log.d("WORDLISTPROVIDER", "Entered Search");
            c = qBuilder.query(listOpenHelper.getReadableDatabase(), projection, null,
                    selectionArgs, null, null, null);
            Log.d("WORDLISTPROVIDER", "Query Completed");
            if (c == null)
                return null;
            c.setNotificationUri(getContext().getContentResolver(), uri);
            break;

            default:
                Log.d("WORDLISTPROVIDER", "Default Entered");
                throw new IllegalArgumentException("Unknown URI " + uri);

    }
    Log.d("WORDLISTPROVIDER", "Exited Search");
    return c;
} 
```

^异常发生在该行

```
c = qBuilder.query(listOpenHelper.getReadableDatabase(), projection, null,
                    selectionArgs, null, null, null); 
```

作为参考，这里是如何设置此特定调用的投影和 selectionArgs 字符串：

```
String[] proj = {
            WordListProvider.ID,
            WordListProvider.WORD
    };
String[] selectionArgs = {""}; 
```

这是我的数据库的构建器，它是 WordListProvider 中的一个内部类：

```
private static class WordListOpenHelper extends SQLiteOpenHelper {

    private SQLiteDatabase wordDb;
    private Context helperContext;

    private static final String WORD_LIST_CREATE = "CREATE TABLE "+ DB_NAME  +
            " ( " +
             ID +  " INTEGER PRIMARY KEY, " +
             WORD + " TEXT, " +
            LENGTH + " INTEGER " +
            ");";

    WordListOpenHelper(Context context) {
        super(context, "wordlist", null, 1);
        helperContext = context;
        Log.d("OPENHELPER", "Constructed");
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.d("OPENHELPER", "Creating");
        wordDb = db;
        Log.d("OPENHELPER", "DB set");
        wordDb.execSQL(WORD_LIST_CREATE);
        Log.d("OPENHELPER", "SQL Execed");
        loadWordList();
    }

    private void loadWordList() {
        new Thread(new Runnable() {
            public void run() {
                try {
                    loadWords();
                } catch (IOException e) {
                    Log.d("OPENHELPER", "Exception Caught");
                    throw new RuntimeException(e);
                }
            }
        }).start();
    }

    private void loadWords() throws IOException {
        ...
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        ...
    }

} 
```

loadWords 最终确实完成了，但是无论表格是否完成加载，我都会收到异常（有时表格没有完成加载，我会收到异常，程序将退出。然后表格将完成加载）。此外，我的列名是一致的，至少它们看起来是一致的——如果我将投影传递给查询的 null （也就是返回所有行），甚至会发生异常；任何人对可能导致异常的原因或句柄的含义有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:03:56.637

请在您的提供商中检查此行：

```
c = qBuilder.query(listOpenHelper.getReadableDatabase(), projection, null,
                    selectionArgs, null, null, null); 
```

您使用没有选择参数的 selectionArgs。如果您传递非空 selectionArgs 查询将失败，因为没有可以绑定选择参数的地方。

此行应如下所示：

```
 c = qBuilder.query(listOpenHelper.getReadableDatabase(), projection, selection,
                        selectionArgs, null, null, null); 
```

您不能在没有选择的情况下使用 selectionArgs，因此请尝试通过`null`而不是

```
String[] selectionArgs = {""}; 
```

# php - 使用 CURL 从 Facebook 删除图片

> ID：11458594
> 
> 赞同：1
> 
> 时间：2012-07-12T18:47:56.390
> 
> 标签：php, facebook, facebook-graph-api, curl

我有一个 Facebook 应用程序，我想在其中删除一些图片。我有pictureid和access_token，并尝试了我在这个网站上找到的所有方法，但每次都会出错。

如何用 CURL 删除它？我从这个开始：

```
$ch = curl_init();
$url = 'https://graph.facebook.com/'.$uid.'/photos?access_token='.$access_token;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "DELETE");
echo $data = curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:13:23.497

应用程序现在可以删除由该应用程序创建的照片。[我用上传到页面的照片进行了尝试，并通过Graph API Explorer](https://developers.facebook.com/tools/explorer/)删除了它的 id

卷曲网址将是：

```
https://graph.facebook.com/'.$imageId.'?method=DELETE&access_token='.$token 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T19:27:36.147

Facebook 根本不允许应用程序删除照片。

# javascript - 使用 Javascript 函数变量定义 DOM 元素

> ID：11458598
> 
> 赞同：0
> 
> 时间：2012-07-12T18:48:04.347
> 
> 标签：javascript, forms, function, variables

我正在使用是/否下拉框通过 CSS 隐藏条件表单元素。如果我手动定义表单名称和元素名称，它工作正常，但如果我尝试通过变量定义它们，它将不起作用。我已经进行了大约一个小时的故障排除和研究，但无济于事。这是我的 Javascript 函数。

```
function binaryHideShow(formName, elementName)
{
    if (document.forms["'" + formName + "'"].elementName.value == "yes")
    {
        document.getElementById("'" + elementName + "'").setAttribute("class","show");
    }
    else
    {
        document.getElementById("'" + elementName + "'").setAttribute("class","hide");
    }
} 
```

这里是 HTML 元素。

```
<select name="PrimaryFiledBankruptcyDropDownList" onchange="binaryHideShow(this.form.name, this.attributes['name'].value);">
<option value=""></option>
<option value="yes">Yes</option>
<option value="no">No</option>
</select>

<div id="PrimaryFiledBankruptcyDropDownList">
<label for="PrimaryBankruptcyTypeDropDownList">Bankruptcy Type:</label> 
<select name="PrimaryBankruptcyTypeDropDownList" onchange="">
<option value=""></option>
<option value="chapter-7">Chapter 7</option>
<option value="chapter-13">Chapter 13</option>
</select>
</div> 
```

我已经确保我在 html 端的 this 语句提取了正确的元素。

要清楚，如果我按照下面的示例手动输入变量名称，它将正常工作，并且 html this 语句返回我在下面使用的确切名称。

```
function binaryHideShow()
{
    if (document.forms["ProgramApplicationForm"].PrimaryFiledBankruptcyDropDownList.value == "yes")
    {
        document.getElementById("PrimaryFiledBankruptcyDropDownList").setAttribute("class","show");
    }
    else
    {
        document.getElementById("PrimaryFiledBankruptcyDropDownList").setAttribute("class","hide");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:09:12.320

访问表单中元素的函数有错误，请尝试：

```
function binaryHideShow(formName, elementName)
{
    if (document.forms[formName][elementName].value == "yes")
    {
        document.getElementById(elementName).setAttribute("class","show");
    }
    else
    {
        document.getElementById(elementName).setAttribute("class","hide");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:52:59.800

从改变

```
document.forms["'" + formName + "'"] 
```

到

```
document.forms[ formName ] 
```

否则，您将传入一个名称，就好像您执行了“'PrimaryBankruptcyTypeDropDownList'”（注意双引号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:03:29.077

这应该让你开始。

**HTML**

```
<form name="MyForm" id="MyForm">
    <select name="PrimaryFiledBankruptcyDropDownList"nchange="binaryHideShow(this,this.form);">
        <option value=""></option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
    </select>
</form> 
```

**JavaScript**

```
function binaryHideShow(element,form) {
    console.log("Element Name: " + element.name);
    console.log("Form Name: " + form.name);
    if(element.value == "yes") {
        console.log('sure does');
    } else {
        console.log('nope');
    }
} 
```

离题 - 但是，你可能会发现这很有用......

考虑将您的操作与您的视图分开 - 意思是：摆脱“onchange”事件，如果可能的话 - 考虑使用 jQuery。

给你一些好读物：

*   [http://coding.smashingmagazine.com/2008/09/16/jquery-examples-and-best-practices/](http://coding.smashingmagazine.com/2008/09/16/jquery-examples-and-best-practices/)
*   [https://developers.google.com/speed/docs/best-practices/rules_intro](https://developers.google.com/speed/docs/best-practices/rules_intro)
*   [要避免的 jQuery 陷阱](https://stackoverflow.com/questions/1229259/jquery-pitfalls-to-avoid)
*   [http://www.tvidesign.co.uk/blog/improve-your-jquery-25-excellent-tips.aspx#tip2](http://www.tvidesign.co.uk/blog/improve-your-jquery-25-excellent-tips.aspx#tip2)
*   [http://net.tutsplus.com/tutorials/javascript-ajax/14-helpful-jquery-tricks-notes-and-best-practices/](http://net.tutsplus.com/tutorials/javascript-ajax/14-helpful-jquery-tricks-notes-and-best-practices/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T14:42:36.260

我最终弄清楚了。为了使用 document.forms 的元素部分，您必须使用内部变量指定 elements[] ：

```
function binaryHideShow(formName, elementName)
{
    if (document.forms[formName].elements[elementName].value == "yes")
    {
        document.getElementById(elementName).setAttribute("class","show");
    }
    else
    {
        document.getElementById(elementName).setAttribute("class","hide");
    }
} 
```

# django - DJANGO Rest API 无效语法错误

> ID：11458599
> 
> 赞同：0
> 
> 时间：2012-07-12T18:48:05.510
> 
> 标签：django

我正在尝试使用[此链接](http://code.google.com/p/django-rest-interface/)创建 Django Rest API ，但出现无效语法错误。这是我的代码：

网址.py

```
from django.conf.urls.defaults import *
from polls.views import *

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
     (r'^polls/$',index),
     (r'^polls/(?P<poll_id>\d+)/$',detail),
     (r'^polls/(?P<poll_id>\d+)/results/$',results),
     (r'^polls/(?P<poll_id>\d+)/vote/$',vote),
     (r'^admin/', include(admin.site.urls)),
     (r'^xml/polls/(.*?)/?$',xml_poll_resource),
) 
```

视图.py

```
from django_restapi.model_resource import Collection
from django_restapi.responder import XMLResponder
from django_restapi.responder import *
from django_restapi_tests.polls.models import Poll, Choice

from django.http import HttpResponse, HttpResponseRedirect
from django.shortcuts import render_to_response, get_object_or_404
from polls.models import Poll, Choice
from django.http import Http404
from django.template import RequestContext
import pdb

def index(request):
    latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]
    return render_to_response('index.html',{'latest_poll_list': latest_poll_list})

def detail(request, poll_id):
    pdb.set_trace()
    p = get_object_or_404(Poll, pk=poll_id)
    return render_to_response('detail.html', {'poll': p},
        context_instance=RequestContext(request))

def results(request, poll_id):
    return HttpResponse("Hello, world.Youre at the poll index.")    

def vote(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    try:
        selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        # Redisplay the poll voting form.
        return render_to_response('polls/detail.html', {
            'poll': p,
            'error_message': "You didn't select a choice.",
        }, context_instance=RequestContext(request))
    else:
        selected_choice.votes += 1
        selected_choice.save()
        # Always return an HttpResponseRedirect after successfully dealing
        # with POST data. This prevents data from being posted twice if a
        # user hits the Back button.
        return HttpResponseRedirect(reverse('results', args=(p.id,)))

xml_poll_resource = Collection(    
    queryset = Poll.objects.all(),    
    permitted_methods = ('GET', 'POST', 'PUT', 'DELETE'),    
    responder = XMLResponder(paginate_by = 10))     
) 
```

模型.py

```
from django.db import models
class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    def __unicode__(self):
        return self.question    

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes  = models.IntegerField()
    def __unicode__(self):
    return self.choice 
```

此应用程序基于 Django 网站中提供的教程。它运行良好，但一旦我实现了其余 API 的逻辑，它就开始失败。

(r'^xml/polls/(.*?)/?$',xml_poll_resource),

我正在尝试的网址：`http://127.0.0.1:8000/xml/polls/`

/xml/polls/ 无效语法处的错误 SyntaxError（views.py，第 49 行）

```
Request Method: GET

Request URL: http://127.0.0.1:8000/xml/polls/

Django Version: 1.3.1

Exception Type: SyntaxError

Exception Value: invalid syntax (views.py, line 49) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:02:33.103

可能不是您正在寻找的答案，但是我建议您看看这个 Django REST 框架：[django-rest-framework.org](http://django-rest-framework.org)

# html - “内部” CSS 不覆盖“外部” CSS

> ID：11458602
> 
> 赞同：2
> 
> 时间：2012-07-12T18:48:15.443
> 
> 标签：html, css, html-table

我有一些嵌套表，其中有一个外部容器表，两个列表嵌套在外部表中，然后各种表在列中相互堆叠。这是相关的HTML：

```
<table class="outer">
    <tr>
        <td>
            <table class="column" id="left_column">
                <tr>
                    <td>
                        <table class="cell" id="t1">
                            <tr><td><asp:Literal runat="server" ID="t1r2c0" /></td><td><asp:Literal runat="server" ID="t1r2c1" /></td><td class="image"><span id="s1" runat="server"><asp:PlaceHolder ID="p1" runat="server"></asp:PlaceHolder></span></td><td><asp:Literal runat="server" ID="t1r2c3" /></td><td class="gray"><asp:Literal runat="server" ID="t1r2c4" /></td></tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table class="cell" id="t2">
                        </table>
                    </td>
                </tr>
            </table>
        </td>
        <td>
            <table class="column" id="rightColumn">
                <tr>
                    <td>
                        <table class="cell" id="t3">
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table class="cell" id="t4">
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table class="cell" id="t5">
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table class="cell" id="t6">
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table class="cell" id="t7">
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table class="cell" id="t8">
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table class="messages" id="t9">
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

这是相关的CSS：

```
.cell
{
border: none;
}
.cell td
{
border-collapse: collapse;
border: 2px solid black;
text-align: center;
vertical-align: middle;
padding: 2px;
}
.image
{
padding: 0;
margin: 0;
width: 65px;
} 
```

我的问题是图像 tds 有 2px 的填充。我的理解是 .image 的 CSS——更具体一点——应该覆盖“.cell td”的 CSS。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:57:57.360

特异性不是由元素的“深度”决定的，而是由选择器的明确程度决定的。

特异性评分基于

1.  ID 选择器的数量
2.  否则，类/属性选择器的数量
3.  否则，元素选择器的数量

    *   `.cell td`包含一个类选择器和一个元素选择器
    *   `.image`包含一个类选择器并且没有元素选择器

所以，第一条规则更具体。

# css - 我需要将其关闭的 CSS DIV 标记填充

> ID：11458603
> 
> 赞同：0
> 
> 时间：2012-07-12T18:48:17.840
> 
> 标签：css, html

我的博客的css有问题。div 或 p 标签有一个关闭填充或类似的东西，并且有 3 个部分的标题自己非常偏离，我需要靠近。

谁能帮我？

这是我的网站 -`http://www.7naj.com/hl/wordpress`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:07:58.643

看起来你的元素如此分散的原因是因为图像本身——你看到的负空间是图像的一部分。您可以使用 2 种方法来解决此问题：

**一：**

编辑图像以裁剪并删除多余的负空间（将事物推开的未使用的空白区域）

**二：**

`margin`相应地对必要元素`<div>`或元素应用负值`<p>`。例如：

```
p {
 margin-bottom: -40px;
} 
```

# ios - 显示带有径向动画的 UIImage

> ID：11458605
> 
> 赞同：2
> 
> 时间：2012-07-12T18:48:20.790
> 
> 标签：ios, uiimageview, uiimage

我有一个 UIImageView，我想以径向顺时针方式慢慢显示。

这是我想如何在 1 秒内显示图像的示例。我基本上是在尝试模拟一个标记在某物周围画一个圆圈。

![径向图像示例](../Images/2193660adf31bbd2a8b981870707dde6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T05:37:43.047

这是动画 a 的另一种变体`UIBezierPath`。最重要的是，想出一个 UIBezierPath ，然后使用以下动画对其绘图进行动画`CABasicAnimation`处理`strokeEnd`：

```
- (void)drawBezier
{
    CGPoint startPoint = CGPointMake(self.view.frame.size.width / 2.0, 50);

    UIBezierPath *path = [self strokePath:startPoint];

    CAShapeLayer *oval = [[CAShapeLayer alloc] init];
    oval.path = path.CGPath;
    oval.strokeColor = [UIColor redColor].CGColor;
    oval.fillColor = [UIColor clearColor].CGColor;
    oval.lineWidth = 5.0;
    oval.strokeStart = 0.0;
    oval.strokeEnd = 1.0;
    [self.view.layer addSublayer:oval];

    CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
    anim.duration = 1.0;
    anim.fromValue = [NSNumber numberWithFloat:0.0f];
    anim.toValue = [NSNumber numberWithFloat:1.0f];
    [oval addAnimation:anim forKey:@"strokeEndAnimation"];
} 
```

你显然必须创建你的贝塞尔曲线。这是我复杂的小算法（它是一个由五个点组成的数组，每个点的角度，以及每个点的锚点的权重），但我相信你可以想出一些更简单的东西：

```
- (UIBezierPath *)strokePath:(CGPoint)startPoint
{
    NSArray *points = [NSArray arrayWithObjects:
                       [NSValue valueWithCGPoint:CGPointMake(startPoint.x, startPoint.y)], 
                       [NSValue valueWithCGPoint:CGPointMake(startPoint.x + 100.0, startPoint.y + 70.0)], 
                       [NSValue valueWithCGPoint:CGPointMake(startPoint.x, startPoint.y + 140.0)], 
                       [NSValue valueWithCGPoint:CGPointMake(startPoint.x - 100.0, startPoint.y + 70.0)], 
                       [NSValue valueWithCGPoint:CGPointMake(startPoint.x + 10.0, startPoint.y + 10)], 
                       nil];
    NSArray *angles = [NSArray arrayWithObjects:
                       [NSNumber numberWithFloat:M_PI_2 * 0.05],
                       [NSNumber numberWithFloat:M_PI_2],
                       [NSNumber numberWithFloat:M_PI],
                       [NSNumber numberWithFloat:M_PI_2 * 3],
                       [NSNumber numberWithFloat:0],
                       nil];
    NSArray *weight = [NSArray arrayWithObjects:
                       [NSNumber numberWithFloat:100.0 / 1.7],
                       [NSNumber numberWithFloat: 70.0 / 1.7],
                       [NSNumber numberWithFloat:100.0 / 1.7],
                       [NSNumber numberWithFloat: 70.0 / 1.7],
                       [NSNumber numberWithFloat:100.0 / 1.7],
                       nil];

    UIBezierPath *path = [UIBezierPath bezierPath];
    [path moveToPoint:startPoint];

    for (NSInteger i = 1; i < 5; i++)
    {
        CGPoint pointPrevious  = [[points objectAtIndex:(i-1)] CGPointValue];
        CGPoint pointCurrent   = [[points objectAtIndex:i] CGPointValue];

        CGFloat anglePrevious  = [[angles objectAtIndex:(i-1)] floatValue];
        CGFloat angleCurrent   = [[angles objectAtIndex:i] floatValue];

        CGFloat weightPrevious = [[weight objectAtIndex:(i-1)] floatValue];
        CGFloat weightCurrent  = [[weight objectAtIndex:i] floatValue];

        [path addCurveToPoint:pointCurrent
                controlPoint1:CGPointMake(pointPrevious.x + cosf(anglePrevious) * weightPrevious, 
                                          pointPrevious.y + sinf(anglePrevious) * weightPrevious) 
                controlPoint2:CGPointMake(pointCurrent.x  - cosf(angleCurrent)  * weightCurrent,  
                                          pointCurrent.y  - sinf(angleCurrent)  * weightCurrent)];
    }

    return path;
} 
```

如果这是不可接受的（因为它是一条可靠的路径，而不是你的艺术渲染），这里有一个有效的技巧（但有点复杂，所以请耐心等待）。您可以将图像放在图层上，将 UIBezierPath 椭圆放在其顶部，而不是用红色动画贝塞尔路径的绘制，将其绘制为白色，使其模糊您的图像并融入背景，然后反转动画UIBezierPath 的绘图。这样，它从您的图像开始，在其顶部绘制一个白色的 UIBezierPath，完全遮盖您的图像，并且它动画 UIBezierPath 的取消绘制，在下面显示您的图像。但无论如何，这就是您将图像添加到图层以及“取消绘制”贝塞尔曲线的方式。

```
 CAShapeLayer *imagelayer = [[CAShapeLayer alloc] init];
    UIImage *image = [UIImage imageNamed:@"oval.png"];
    imagelayer.contents = (id)image.CGImage;
    imagelayer.frame = CGRectMake(startPoint.x - image.size.width / 2.0, startPoint.y, image.size.width, image.size.height);
    [self.view.layer addSublayer:imagelayer];

    CAShapeLayer *oval = [[CAShapeLayer alloc] init];
    oval.path = path.CGPath;
    oval.strokeColor = [UIColor whiteColor].CGColor;
    oval.fillColor = [UIColor clearColor].CGColor;
    oval.lineWidth = 80.0;
    oval.strokeStart = 0.0;
    oval.strokeEnd = 0.0;
    [self.view.layer addSublayer:oval];

    CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
    anim.duration = 1.0;
    anim.fromValue = [NSNumber numberWithFloat:1.0f];
    anim.toValue = [NSNumber numberWithFloat:0.0f];
    [oval addAnimation:anim forKey:@"strokeEndAnimation"]; 
```

显然，必须付出一些努力来设计一个直接覆盖您的图像等的 UIBezierPath，但这是可以做到的。（顺便说一下，如果您（a）绘制 UIBezier，（b）拍摄屏幕快照，（c）将其放入 Photoshop 中以赋予它您想要的外观，然后（d）使用用于底层图像。）无论如何，对于我下面的粗略尝试，我只是让贝塞尔曲线的厚度难以置信地厚，所以我可能会很草率，但你会想要更加小心（因为我假设你是围绕某物画你的圆圈，你不能让 UIBezierPath 覆盖遮住它）。

或者，如果你想使用 CodaFi 的第一个建议，但还没有创建单独的图像，你可以坚持这个超厚的贝塞尔路径，但你可以使用上面代码的排列来创建你的图像（例如 start为零时`strokeStart`，不要同时制作动画，而是拍摄屏幕快照，一次又一次地做，`strokeStart`每次增加 1/30（或其他），然后拍摄另一个屏幕快照等）。

希望有人能想出一个更优雅的解决方案！

# java - 使用 HttpURLConnection 的 Android 应用程序在 connect() 处崩溃

> ID：11458606
> 
> 赞同：1
> 
> 时间：2012-07-12T18:48:25.657
> 
> 标签：java, android, http, url

我有以下一段代码，基本上是从示例中复制粘贴的，因为我是 Java 和 Android 新手（不是编程）：

```
 URL vurl = new URL(voteurl); //vuteurl is a string containing a proper URL
      HttpURLConnection hc;
      hc=null;
      hc = (HttpURLConnection)vurl.openConnection();
      hc.setRequestMethod("GET");
      hc.setDoOutput(true);
      hc.setReadTimeout(10000);
      hc.connect(); 
```

在“hc.connect();”这一行 应用程序崩溃，Android 通知我它已停止。将 android.permission.INTERNET 添加到应用程序使用的权限并没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:53:42.053

```
URL vurl = null;
    try {
        vurl = new URL(voteurl);
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } //vuteurl is a string containing a proper URL
    HttpURLConnection hc;
    hc=null;
    try {
        hc = (HttpURLConnection)vurl.openConnection();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    try {
        hc.setRequestMethod("GET");
    } catch (ProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    hc.setDoOutput(true);
    hc.setReadTimeout(10000);
    try {
        hc.connect();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:31:58.737

好的，原来 Android 不喜欢主线程中的网络操作。在单独的线程中执行请求就可以了。谢谢大家帮助！

# jquery - 视频播放器启动时暂停音频播放器

> ID：11458607
> 
> 赞同：2
> 
> 时间：2012-07-12T18:48:36.967
> 
> 标签：jquery, html5-video, html5-audio

我在一个网站的主页上有一个 Jplayer 实例（jQuery 的 HTML5 音频播放器）和一个 JW Player 实例（HTML5 视频播放器）：[http://www.creativetuition.co。英国/cgt/index.php](http://www.creativetuition.co.uk/cgt/index.php)

我还不能（以我有限的 JavaScript 知识）在播放视频时成功地让音频播放器暂停，反之亦然。

我想我必须使用某种事件“听众”，但我真的很挣扎，非常感谢你们能提供的任何帮助。如果您希望我发布代码，只需说出哪些位，我会很乐意提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:35:55.977

这个

```
$(function(){ 
    $("video").prop('muted', true); 
  }); 
```

...

```
 <video class='0' autoplay="true" src="http://media.w3.org/2010/05/sintel/trailer.webm">
 </video> 
```

..还

```
$("video").prop('muted', false);  // Unmutes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:50:06.520

我使用 jplayer 和 jwplayer 文档来确定我需要做什么。这是我使用并放在相应页面底部的脚本。

```
<script>
$(document).ready(function () {
  jwplayer('mediaspace').onPlay(function () {

  $('#jquery_jplayer_2').jPlayer("pause");
  });
});
</script> 
```

# c# - 如何创建具有反射类型的委托闭包

> ID：11458608
> 
> 赞同：4
> 
> 时间：2012-07-12T18:48:38.697
> 
> 标签：c#, reflection

如何创建使用反射类型参数的闭包？针对 .net 3.5

如果没有反思，我会

```
void Main()
{
    int i = 0;
    Action<Foo> doSomething = (foo) => i += foo.GetNumber();
    var myFoo = new Foo();
    myFoo.UseFoo(doSomething);
    Console.WriteLine(i);
}

class Foo
{
    public int GetNumber() { return 4; }
    public void UseFoo(Action<Foo> doSomething)
    {
        doSomething(this);
    }
} 
```

什么时候`Foo`通过反射从另一个程序集获得类型，我将如何设置`doSomething`？

```
void Main()
{
    Type fooType = GetType("Foo");
    int i = 0;
    object doSomething = // ???;

    var myFoo = Activator.CreateInstance(fooType);
    fooType.GetMethod("UseFoo").Invoke(myFoo, new object[] { doSomething });
    Console.WriteLine(i);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:30:30.750

我使用了 DocXcz 和 Nikola Anusev 的答案来解决这个问题

```
static void Main()
{
    var fooType = typeof(Foo); // get type via any method
    int i = 0;

    Action<object> doSomething = (foo) => i += (int)foo.GetType().GetMethod("GetNumber").Invoke(foo, null);
    var typedDoSomething = (typeof(Program)).GetMethod("DelegateHelper").MakeGenericMethod(fooType).Invoke(null, new object[] { doSomething });

    var myFoo = Activator.CreateInstance(fooType);
    fooType.GetMethod("UseFoo").Invoke(myFoo, new object[] { typedDoSomething });
    Console.WriteLine(i);
}

public static Action<T> DelegateHelper<T>(Action<object> generic)
{
    return x => generic(x);
} 
```

基本上我需要使用一个通用的辅助方法来将 转换为`Action<object>`在`Action<T>`运行时确定的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:02:19.143

如果您在编译时没有静态链接包含 Foo 类的程序集，那么您确实不能在代码中使用 Foo 。

您还必须在闭包中使用反射：

```
Action<object> doSomething = 
(foo) => i+= (int)foo.GetType().GetMethod("GetNumber").Invoke(foo, null); 
```

这假设 Foo 的方法 UseFoo 是这样的，并且仅适用于 .NET 4。

```
public void UseFoo(Action<Foo> action)
{
    action(this);
} 
```

当然，您应该将 UseFoo 的整个调用包含在 try..catch 块中，因为不能保证反射中的任何内容。

**更新**：这仅适用于 .NET 4，其中 Action 可以作为 UseFoo 方法假定的 Action 传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:17:49.863

我确信在 .NET 3.5 上*完全按照*您的意愿去做是不可能的。

唯一*接近*的方法不使用 lambda，而是使用普通的旧方法。本质上，您将在类似于以下的类中定义您的操作：

```
public class FooActionMethods<TFoo>
{
    public static void DoSomething(TFoo foo)
    {
        int i = 0;
        int number = (int)typeof(TFoo).GetMethod("GetNumber").Invoke(foo, null);
        Console.WriteLine(i + number);
    }
} 
```

然后，您可以调用例如`DoSomething`方法：

```
Type fooType = // somehow, we get the type from other assembly
object fooInstance = Activator.CreateInstance(fooType);  

Type fooActionType = typeof(Action<>).MakeGenericType(fooType);
Type fooActionMethodsType = typeof(FooActionMethods<>).MakeGenericType(fooType);

Delegate action = Delegate.CreateDelegate(fooActionType, fooActionMethodsType, "DoSomething");

fooType.GetMethod("UseFoo").Invoke(fooInstance, new object[] { action }); 
```

由于整个`FooActionMethod`类是泛型的，我们可以利用反射 ( ) 并使用 的确切类型`MakeGenericType`创建闭包。由于我们在编译时没有任何信息，因此只能通过反射与其实例进行交互。为了简化这些交互，请查看处理一些库的[SO 问题，这些库将简化使用反射的工作。](https://stackoverflow.com/questions/1165203/c-sharp-library-for-easy-dynamic-reflection)`FooActionMethod``Foo``TFoo`

除此之外，我认为没有什么比你能做的更好了。谢谢你提出的好问题——这是一个很好的谜题！:)

顺便说一句，我还试图通过使用表达式树来动态创建 lambda 表达式来解决这个问题。我无法找到一种方法来包含表达式树的闭包。否则，该方法也可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T19:07:59.317

在 C# 中，闭包是编译器生成的东西。如果您想为反射类型生成相同的代码，则必须手动生成代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T19:09:19.190

如果 foo 实现了一个合适的接口，你可以`Action`在这个接口上工作。

如果没有，您需要在委托中使用反射（更简单）或在运行时使用表达式 API 编译委托（更多工作，最大性能）。

当 C# 编译器创建闭包时，`i`您需要继续这样做：

```
Action<int> incrementI = inc => i += inc; 
```

您现在可以`i`在已编译的委托中使用 increment 来增加`i`。

# python - python的基本多处理

> ID：11458610
> 
> 赞同：2
> 
> 时间：2012-07-12T18:48:54.747
> 
> 标签：python, multithreading, multiprocessing

我在 python 中找到了有关多处理和多线程的信息，但我不了解基本概念，并且我发现的所有示例都比我尝试做的更难。

我有需要运行的 X 个独立程序。我想启动第一个 Y 程序（其中 Y 是我的计算机的核心数和 X>>Y）。一旦其中一个独立程序完成，我希望下一个程序在下一个可用内核中运行。我认为这很简单，但我一直坚持下去。解决这个问题的任何帮助将不胜感激。

编辑：非常感谢您的回答。我还找到了另一个使用我想分享的 joblib 模块的解决方案。假设您有一个名为“program.py”的脚本，您希望使用不同的输入参数组合 (a0,b0,c0) 运行该脚本，并且您希望使用所有内核。这是一个解决方案。

```
import os
from joblib import Parallel, delayed
a0 = arange(0.1,1.1,0.1)
b0 = arange(-1.5,-0.4,0.1)
c0 = arange(1.,5.,0.1)
params = []
for i in range(len(a0)):
    for j in range(len(b0)):
        for k in range(len(c0)):
            params.append((a0[i],b0[j],c0[k]))

def func(parameters):
    s = 'python program.py %g %g %g' % parameters[0],parameters[1],parameters[2])
    command = os.system(s)
    return command

output = Parallel(n_jobs=-1,verbose=1000)(delayed(func)(i) for i in params) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:23:51.250

您想使用[`multiprocessing.Pool`](http://docs.python.org/library/multiprocessing.html#using-a-pool-of-workers)，它代表一个工作人员“池”（默认每个核心一个，尽管您可以指定另一个数字）来完成您的工作。然后，您将作业提交到池中，工作人员会在它们可用时处理它们。最容易使用的函数是[`Pool.map`](http://docs.python.org/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.map)，它为传递序列中的每个参数运行一个给定函数，并返回每个参数的结果。如果不需要返回值，也可以`apply_async`在循环中使用。

```
def do_work(arg):
    pass # do whatever you actually want to do

def run_battery(args):
    # args should be like [arg1, arg2, ...]
    pool = multiprocessing.Pool()
    ret_vals = pool.map(do_work, arg_tuples)
    pool.close()
    pool.join()
    return ret_vals 
```

如果您尝试调用外部程序而不仅仅是 Python 函数，请使用[`subprocess`](http://docs.python.org/library/subprocess.html). 例如，这将`cmd_name`使用传递的参数列表进行调用，如果返回码不为 0，则引发异常，并返回输出：

```
def do_work(subproc_args):
    return subprocess.check_output(['cmd_name'] + list(subproc_args)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:08:18.040

嗨，我正在使用来自 pyqt 的对象 QThread 据我了解，您的线程在运行时只能使用他自己的变量和 proc，他无法更改您的主对象变量所以在您运行之前，请先定义所有 qthread 变量你会需要

像这样的例子：

```
class worker(QThread)
def define(self, phase):
    print 'define'
    self.phase=phase

    self.start()#will run your thread
def continueJob(self):
    self.start()
def run(self):
   self.launchProgramme(self.phase)
   self.phase+=1
def launchProgramme(self):
   print self.phase 
```

我不太了解基本 python 线程是如何工作的，但是在 pyqt 中，您的线程向您的主对象发出信号，如下所示：

```
class mainObject(QtGui.QMainWindow)
    def __init__(self):
        super(mcMayaClient).__init__()
        self.numberProgramme=4
        self.thread = Worker()
    #create
        self.connect(self.thread , QtCore.SIGNAL("finished()"), self.threadStoped)
        self.connect(self.thread , QtCore.SIGNAL("terminated()"), self.threadStopped) 
```

像这样连接，当 thread.run 停止时，它将在您的主对象中启动您的 threadStopped proc，您可以在其中获取线程变量的值

```
def threadStopped(self):
    value=self.worker.phase
    if value<self.numberProgramme:
        self.worker.continueJob() 
```

之后，您只需要根据您获得的值启动另一个线程，这当然是用于 pyqt 线程，在 python 基本线程中，执行 def threadStopped 的方式可能会有所不同。

# azure - 受到 Azure 服务总线的限制

> ID：11458612
> 
> 赞同：8
> 
> 时间：2012-07-12T18:48:56.047
> 
> 标签：azure, azure-storage, azureservicebus

当我尝试从服务总线检索消息时，我在 Windows Azure 中遇到以下异常。

> Microsoft.ServiceBus.Messaging.ServerBusyException：请求因实体受到限制而终止。请等待 10 秒，然后重试

调用方法后出现异常`Receive`：

```
QueueClient queueClient = _messagingFactory.CreateQueueClient(queueName);
var brokeredMessage = queueClient.Receive(TimeSpan.Zero); 
```

这是可配置的还是我对消息总线的要求很高？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-01-16T17:04:03.927

在不知道您发布的内容的情况下，您似乎将服务总线实例征税到最大。但是，由于这个问题最初是在大约 7 年前提出的，因此需要注意的是，Azure 服务总线的可伸缩性目标在这段时间里已经增加了很多。

您可以参考此 Azure 文档文章，了解有关 Azure 服务总线的配额和限制阈值的更多信息：

[https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-quotas](https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-quotas)

# mysql - MYSQL 语法 - 有条件的分组

> ID：11458620
> 
> 赞同：0
> 
> 时间：2012-07-12T18:49:41.983
> 
> 标签：mysql

这是我当前的查询工作正常，但我需要它只返回 quantity_to_spawn > 0 当我添加一个 where 子句时，它通过消息给我一个无效的组。

如果需要，我很高兴提供更多信息，但我不确定此时是否有必要。它是我正在写的游戏。

```
SELECT spawns.*, (quantity - COUNT(game_moblist.spawn_id)) AS quantity_to_spawn,mobs.*     
FROM spawns LEFT JOIN mobs USING (mob_id) LEFT JOIN game_moblist USING (spawn_id) GROUP BY 
spawn_id ORDER BY quantity_to_spawn DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:53:01.257

尝试添加 a`having`而不是 a`where`

```
 SELECT spawns.*, (quantity - COUNT(game_moblist.spawn_id)) AS quantity_to_spawn,
  mobs.*     
  FROM spawns 
  LEFT JOIN mobs USING (mob_id) 
  LEFT JOIN game_moblist USING (spawn_id) 
  GROUP BY spawn_id 
  having quantity_to_spawn > 0
  ORDER BY quantity_to_spawn DESC 
```

# oracle - Weblogic 部署失败

> ID：11458626
> 
> 赞同：0
> 
> 时间：2012-07-12T18:49:56.513
> 
> 标签：oracle, weblogic, weblogic-10.x, weblogic11g, weblogic12c

我正在尝试将我的`.ear`文件部署到`weblogic`服务器，但部署文件时遇到问题...这是堆栈跟踪和错误 - 我正在使用管理控制台进行部署

```
Message icon - Error Unable to access the selected application.
Message icon - Error Exception in AppMerge flows' progression
Message icon - Error Exception in AppMerge flows' progression

Message icon - Error [J2EE:160161]Error while parsing the Application descriptors for jwds0002.ear: weblogic.descriptor.DescriptorException: Unmarshaller failed at weblogic.descriptor.internal.MarshallerFactory$1.createDescriptor(MarshallerFactory.java:152) at 
weblogic.descriptor.BasicDescriptorManager.createDescriptor(BasicDescriptorManager.java:306) at weblogic.application.descriptor.AbstractDescriptorLoader2.getDescriptorBeanFromReader(AbstractDescriptorLoader2.java:788) at weblogic.application.descriptor.AbstractDescriptorLoader2.createDescriptorBean(AbstractDescriptorLoader2.java:409) at weblogic.application.descriptor.AbstractDescriptorLoader2.loadDescriptorBeanWithoutPlan(AbstractDescriptorLoader2.java:759) at weblogic.application.descriptor.AbstractDescriptorLoader2.loadDescriptorBean(AbstractDescriptorLoader2.java:768) at weblogic.application.ApplicationDescriptor.getWeblogicApplicationDescriptor(ApplicationDescriptor.java:339) at weblogic.application.compiler.CompilerCtx.setApplicationDescriptor(CompilerCtx.java:139) at weblogic.application.compiler.AppcUtils.setDDs(AppcUtils.java:142) at weblogic.application.compiler.flow.DescriptorParsingFlow.compile(DescriptorParsingFlow.java:57) at weblogic.application.compiler.FlowDriver$FlowStateChange.next(FlowDriver.java:69) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37) at weblogic.application.compiler.FlowDriver.nextState(FlowDriver.java:36) at weblogic.application.compiler.FlowDriver$CompilerFlowDriver.compile(FlowDriver.java:96) at weblogic.application.compiler.ReadOnlyEarMerger.merge(ReadOnlyEarMerger.java:49) at weblogic.application.compiler.flow.AppMergerFlow.mergeInput(AppMergerFlow.java:94) at weblogic.application.compiler.flow.AppMergerFlow.compile(AppMergerFlow.java:47) at weblogic.application.compiler.FlowDriver$FlowStateChange.next(FlowDriver.java:69) at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37) at weblogic.application.compiler.FlowDriver.nextState(FlowDriver.java:36) at weblogic.application.compiler.FlowDriver$CompilerFlowDriver.compile(FlowDriver.java:96) at weblogic.application.compiler.AppMerge.runBody(AppMerge.java:157) at weblogic.utils.compiler.Tool.run(Tool.java:158) at weblogic.utils.compiler.Tool.run(Tool.java:115) at weblogic.application.compiler.AppMerge.merge(AppMerge.java:169) at weblogic.deploy.api.internal.utils.AppMerger.merge(AppMerger.java:88) at weblogic.deploy.api.internal.utils.AppMerger.getMergedApp(AppMerger.java:63) at weblogic.deploy.api.model.internal.WebLogicDeployableObjectFactoryImpl.createDeployableObject(WebLogicDeployableObjectFactoryImpl.java:181) at weblogic.deploy.api.model.internal.WebLogicDeployableObjectFactoryImpl.createLazyDeployableObject(WebLogicDeployableObjectFactoryImpl.java:156) at weblogic.deploy.api.tools.SessionHelper.inspect(SessionHelper.java:661) at com.bea.console.actions.app.install.Flow$2.execute(Flow.java:463) at com.bea.console.utils.DeploymentUtils.runDeploymentAction(DeploymentUtils.java:4700) at com.bea.console.actions.app.install.Flow.appSelected(Flow.java:461) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.beehive.netui.pageflow.FlowController.invokeActionMethod(FlowController.java:870) at org.apache.beehive.netui.pageflow.FlowController.getActionMethodForward(FlowController.java:809) at org.apache.beehive.netui.pageflow.FlowController.internalExecute(FlowController.java:478) at org.apache.beehive.netui.pageflow.PageFlowController.internalExecute(PageFlowController.java:306) at org.apache.beehive.netui.pageflow.FlowController.execute(FlowController.java:336) at org.apache.beehive.netui.pageflow.internal.FlowControllerAction.execute(FlowControllerAction.java:52) at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431) at org.apache.beehive.netui.pageflow.PageFlowRequestProcessor.access$201(PageFlowRequestProcessor.java:97) at org.apache.beehive.netui.pageflow.PageFlowRequestProcessor$ActionRunner.execute(PageFlowRequestProcessor.java:2044) at org.apache.beehive.netui.pageflow.interceptor.action.internal.ActionInterceptors$WrapActionInterceptorChain.continueChain(ActionInterceptors.java:64) at org.apache.beehive.netui.pageflow.interceptor.action.ActionInterceptor.wrapAction(ActionInterceptor.java:184) at org.apache.beehive.netui.pageflow.interceptor.action.internal.ActionInterceptors$WrapActionInterceptorChain.invoke(ActionInterceptors.java:50) at org.apache.beehive.netui.pageflow.interceptor.action.internal.ActionInterceptors$WrapActionInterceptorChain.continueChain(ActionInterceptors.java:58) at org.apache.beehive.netui.pageflow.interceptor.action.internal.ActionInterceptors.wrapAction(ActionInterceptors.java:87) at org.apache.beehive.netui.pageflow.PageFlowRequestProcessor.processActionPerform(PageFlowRequestProcessor.java:2116) at com.bea.console.internal.ConsolePageFlowRequestProcessor.processActionPerform(ConsolePageFlowRequestProcessor.java:255) at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236) at org.apache.beehive.netui.pageflow.PageFlowRequestProcessor.processInternal(PageFlowRequestProcessor.java:556) at org.apache.beehive.netui.pageflow.PageFlowRequestProcessor.process(PageFlowRequestProcessor.java:853) at org.apache.beehive.netui.pageflow.AutoRegisterActionServlet.process(AutoRegisterActionServlet.java:631) at org.apache.beehive.netui.pageflow.PageFlowActionServlet.process(PageFlowActionServlet.java:158) at com.bea.console.internal.ConsoleActionServlet.process(ConsoleActionServlet.java:256) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414) at com.bea.console.internal.ConsoleActionServlet.doGet(ConsoleActionServlet.java:133) at org.apache.beehive.netui.pageflow.PageFlowUtils.strutsLookup(PageFlowUtils.java:1199) at com.bea.portlet.adapter.scopedcontent.ScopedContentCommonSupport.executeAction(ScopedContentCommonSupport.java:686) at com.bea.portlet.adapter.scopedcontent.ScopedContentCommonSupport.processActionInternal(ScopedContentCommonSupport.java:142) at com.bea.portlet.adapter.scopedcontent.PageFlowStubImpl.processAction(PageFlowStubImpl.java:106) at com.bea.portlet.adapter.NetuiActionHandler.raiseScopedAction(NetuiActionHandler.java:111) at com.bea.netuix.servlets.controls.content.NetuiContent.raiseScopedAction(NetuiContent.java:181) at com.bea.netuix.servlets.controls.content.NetuiContent.raiseScopedAction(NetuiContent.java:167) at com.bea.netuix.servlets.controls.content.NetuiContent.handlePostbackData(NetuiContent.java:225) at com.bea.netuix.nf.ControlLifecycle$2.visit(ControlLifecycle.java:180) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:324) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walkRecursive(ControlTreeWalker.java:334) at com.bea.netuix.nf.ControlTreeWalker.walk(ControlTreeWalker.java:130) at com.bea.netuix.nf.Lifecycle.processLifecycles(Lifecycle.java:395) at com.bea.netuix.nf.Lifecycle.processLifecycles(Lifecycle.java:361) at com.bea.netuix.nf.Lifecycle.processLifecycles(Lifecycle.java:352) at com.bea.netuix.nf.Lifecycle.runInbound(Lifecycle.java:184) at com.bea.netuix.nf.Lifecycle.run(Lifecycle.java:159) at com.bea.netuix.servlets.manager.UIServlet.runLifecycle(UIServlet.java:388) at com.bea.netuix.servlets.manager.UIServlet.doPost(UIServlet.java:258) at com.bea.netuix.servlets.manager.UIServlet.service(UIServlet.java:199) at com.bea.netuix.servlets.manager.SingleFileServlet.service(SingleFileServlet.java:251) at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) at com.bea.console.utils.MBeanUtilsInitSingleFileServlet.service(MBeanUtilsInitSingleFileServlet.java:54) at weblogic.servlet.AsyncInitServlet.service(AsyncInitServlet.java:130) at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227) at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125) at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292) at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26) at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42) at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27) at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42) at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3496) at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) at weblogic.security.service.SecurityManager.runAs(Unknown Source) at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2180) at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2086) at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1406) at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201) at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) Caused by: com.bea.xml.XmlException: failed to load java type corresponding to e=weblogic-application@http://xmlns.oracle.com/weblogic/weblogic-application at com.bea.staxb.runtime.internal.UnmarshalResult.getPojoBindingType(UnmarshalResult.java:361) at com.bea.staxb.runtime.internal.UnmarshalResult.determineTypeForGlobalElement(UnmarshalResult.java:316) at com.bea.staxb.runtime.internal.UnmarshalResult.determineTypeForGlobalElement(UnmarshalResult.java:326) at com.bea.staxb.runtime.internal.UnmarshalResult.determineRootType(UnmarshalResult.java:307) at com.bea.staxb.runtime.internal.UnmarshalResult.unmarshalDocument(UnmarshalResult.java:158) at com.bea.staxb.runtime.internal.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:65) at weblogic.descriptor.internal.MarshallerFactory$1.createDescriptor(MarshallerFactory.java:141) ... 120 more . 
```

**应用程序 XML 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.4">
<display-name>jwds0002.ear</display-name>
<module>
    <web>
        <web-uri>jwds0002.war</web-uri>
        <context-root>jwds0002</context-root>
    </web>
</module>
</application> 
```

**还有另一个问题：**我在本地安装了一个运行 Oracle Weblogic 11g 的测试服务器，它部署得很好——但是，prod 环境在 10g 上——这有什么大不了的吗？我想知道 weblogic 版本是否真的是问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-23T09:39:47.653

发生此错误要么是因为您的项目结构不正确，要么是因为您的部署描述符不正确/weblogic 不兼容。检查您的 web.xml - 最可能的原因。

# sql - 仅从字符串中选择数字

> ID：11458628
> 
> 赞同：2
> 
> 时间：2012-07-12T18:50:02.103
> 
> 标签：sql

我们有一个程序可以从我们用于运输的数据库中提取信息。它的工作方式是使用 ODBC 驱动程序从我们的数据库中提取，因此当我们在运输程序中输入“订单号 5”时，它也会提取匹配的地址、电话号码等。

问题是数据库只包含订单编号，但是包含我们用于库存管理的数据库的程序会打印带有 TK123456 格式的订单编号的标签。我需要弄清楚如何让 SQL 在输入时将订单号解释为只是数字，所以基本上从一开始就切断 TK。

```
SELECT RXFILL.RXFILL_ID, RXMAIN.RX_NUMBER, PATIENT.FIRSTNAME, PATIENT.LASTNAME,
     SHIPADDRESS1, SHIPADDRESS2, SHIPCITY, SHIPSTATE, SHIPZIP, EMAIL
 FROM RXFILL 
 LEFT JOIN RXMAIN ON RXFILL.RXMAIN_ID = RXMAIN.RXMAIN_ID
 LEFT JOIN PATIENT ON RXMAIN.PATIENT_ID = PATIENT.PATIENT_ID
 WHERE RXFILL_ID=$ORDERNUMBER 
```

如果我理解正确，则需要调整 $ORDERNUMBER 以不包含字母。但是程序确实指定最后一行必须是 format `WHERE [field name]=$ORDERNUMBER`。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:55:50.057

如果您只希望在 SQL 中而不是在调用应用程序中解决此问题，并且您知道 $ORDERNUMBER 的前两个字符将始终为“TK”，那么您可以通过从 $ORDERNUMBER 开始的子字符串轻松解决它第三个字符...即

```
WHERE RXFILL_ID=SUBSTRING($ORDERNUMBER, 2). 
```

该语法可能不准确，因为您没有透露您的 DBMS 类型，并且每个 DBMS 都以他们想要的任何方式实现 SUBSTRING。

如果您分享有关设置 $ORDERNUMBER 的调用应用程序的更多信息，我相信在此处进行更改会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:48:57.173

我为此编写了一个函数。

```
CREATE Function SelectNumbersFromString(@str varchar(max))
Returns varchar(max) as 
BEGIN

Declare @cchk char(5);
Declare @len  int ;
Declare @aschr int;

SET @len = ( SElect len(@str) );
Declare @count int
SET @count = 1

DECLARE @ans varchar(max)
SET @ans = ''

While @count <= @len
BEGIN
    SET @cchk = ( select Substring(@str,@count,1) );    
    SET @aschr = ( select ASCII(@cchk) );
    IF  @aschr in ( 49,50,51,52,53,54,55,56,57,58 )
    BEGIN   
        SET @ans = @ans + CHAR(@aschr)          
    END 
    SET @count = @count + 1;
END

RETURN @ans;
END 
```

**经过测试** `SELECT SelectNumbersFromString('abc3deef5ff6') will return 356`

来自 [http://wfjanjua.blogspot.com/2012/07/add-numbers-from-stringvarchar-in-tsql.html](http://wfjanjua.blogspot.com/2012/07/add-numbers-from-stringvarchar-in-tsql.html)

# haskell - Libraries for sequential non-linear optimization in haskel?

> ID：11458636
> 
> 赞同：6
> 
> 时间：2012-07-12T18:51:04.520
> 
> 标签：haskell, nonlinear-optimization

Are there any libraries for sequential non-linear optimization with upper and lower bounds, as well as inequality constraints, that are written in or easily callable from Haskell?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T20:10:59.313

The [bindings-levmar](http://hackage.haskell.org/package/bindings-levmar) package provides bindings to a C Levenberg-Marquardt optimizer.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T19:05:12.170

A quick grep of [Hackage](http://hackage.haskell.org/packages/archive/pkg-list.html) suggests that [nonlinear-optimization](http://hackage.haskell.org/package/nonlinear-optimization) is the best (only) already-written thing; however, it doesn't seem to include anything for bounded optimization.

Your best bet seems to be one of these (in order of increasing attractiveness):

1.  Start your own project.
2.  Extend the above package.
3.  Find a decent C library and learn enough FFI to bind to it.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-05T10:30:22.443

I know the OP asked for a general optimization library, where my experience is:

*   The [levmar](https://hackage.haskell.org/package/levmar) package depends on the blas and lapack libraries and that makes things very complicated to install, [I didn't manage](https://gist.github.com/PHPirates/7c3d744a45956638676448d37fbebeb5) to install it such that ghci is still working on Windows.
*   The [nonlinear-optimization](http://hackage.haskell.org/package/nonlinear-optimization) package requires a gradient function
*   The [optimization](https://hackage.haskell.org/package/optimization) package seems also to require gradients, though I couldn't figure out how to actually use it.

Besides, all of the mentioned packages do not seem to have any real documentation.

Fortunately, for simple problems a simple solution can be enough. If you want to optimize a one-dimensional, smooth and convex function which has a single bracketed extremum but you do not know a gradient function (see below if you do¹) then a simple method like Golden Section Search will do.

Translated from the [Wikipedia page](https://en.wikipedia.org/wiki/Golden-section_search):

```
import Data.Maybe (fromMaybe)

-- 1 / phi
invphi = (sqrt 5 - 1) / 2
-- 1 / phi^2
invphi2 = (3 - sqrt 5) / 2

-- | Enable optional arguments syntax. Use with Maybe a as parameter type, then in the function write param // defaultValue
(//) :: Maybe a -> a -> a
(//) = flip fromMaybe

-- Just a wrapper function because of all the ugly Nothing's of the recursive function
goldenSectionSearch f a b tolerance = goldenSectionSearchRecursive f a b tolerance Nothing Nothing Nothing Nothing Nothing

-- | Golden section search, recursive.
-- Given a function f with a single local maximum in the interval [a, b], golden section search returns a subset interval [c, d] that contains the maximum with d-c <= tolerance
-- Taken from the python implementation at https://en.wikipedia.org/wiki/Golden-section_search
goldenSectionSearchRecursive ::
    (Double -> Double) -- ^ Function with a single maximum in [a, b]
    -> Double -- ^ One side of the interval
    -> Double -- ^ Other side of the interval
    -> Double -- ^ Tolerance
    -> Maybe Double -- ^ h, Current search interval
    -> Maybe Double -- ^ c, New left interval point. If Nothing, a new point is chosen.
    -> Maybe Double -- ^ d, New right interval point.
    -> Maybe Double -- ^ f(c), Function value at c
    -> Maybe Double -- ^ f(d), Function value at d
    -> (Double, Double) -- ^ The interval in which the maximum is

goldenSectionSearchRecursive f a' b' tolerance h' c' d' fc' fd'
    | h < tolerance = (a, b)
    | fc > fd = goldenSectionSearchRecursive f a d tolerance (Just (h * invphi)) Nothing (Just c) Nothing (Just fc)
    | otherwise = goldenSectionSearchRecursive f c b tolerance (Just (h * invphi)) (Just d) Nothing (Just fd) Nothing
    where
        a = min a' b'
        b = max a' b'
        h = h' // (b - a)
        c = c' // (a + invphi2 * h)
        d = d' // (a + invphi * h)
        fc = fc' // f c
        fd = fd' // f d 
```

and then you call with `goldenSectionSearch (\x -> -(x-2)^2) 1 5 1e-5` which returns `(1.9999959837979107,2.0000050911830893)`. This simple function of course would be much easier to solve by hand, but it's just an example.

PS Interesting about Golden Section Search is that the convergence rate is exactly known: on each iteration the length of the interval in which the optimum resides is divided by the golden ratio.

PPS I put it on [GitHub](https://github.com/PHPirates/golden-haskell)

[[1](https://hackage.haskell.org/package/levmar)] Note that if you know a gradient function, equating it to zero and applying a root finding method is often much faster. For example in one dimension, Will Ness pointed to [his answer](https://stackoverflow.com/questions/36163846/how-approximation-search-works/36368290#36368290) which has a simple method with a faster convergence rate than the Golden Section Search. You could also use one of the mentioned packages which require a gradient function, of course.

# .net - 如何通过 .NET 中的 Google Drive SDK 使用刷新令牌生成访问令牌？

> ID：11458644
> 
> 赞同：8
> 
> 时间：2012-07-12T18:51:35.977
> 
> 标签：.net, google-drive-api

我有一个使用 Google Drive 访问用户文件的 .NET 应用程序。我能够获得授权码，并且我已经能够通过 AccessToken 和 RefreshToken 交换授权码。问题是我无法刷新访问令牌，并且它会在一小时后过期。

类似于这个问题：[How to generate access token using refresh token through google drive API?](https://stackoverflow.com/questions/10631042/how-to-generate-access-token-using-refresh-token-through-google-drive-api) 除了我在 .NET 中工作（使用 Google.API... DLL）。

我知道这一点：[https](https://developers.google.com/accounts/docs/OAuth2InstalledApp#refresh) ://developers.google.com/accounts/docs/OAuth2InstalledApp#refresh但是，我期待 IAuthorizationState 或 OAuth2Authenticator 对象中提供某种方法来允许我刷新访问令牌。

请指教。谢谢。

请注意，使用此代码我可以获得访问令牌。只是我希望这段代码在 Google API 中。

```
 public class OAuth2AccessTokenReponse
    {
        public string access_token;
        public int expires_in;
        public string token_type; 
    }
    public static string refreshAccessToken()
    {
        using (System.Net.WebClient client = new System.Net.WebClient())
        {
            byte[] response = client.UploadValues("https://accounts.google.com/o/oauth2/token", new System.Collections.Specialized.NameValueCollection(){
                {"client_id", ClientID},
                {"client_secret", ClientSecret},
                {"refresh_token", "XXXXX"},
                {"grant_type", "refresh_token"}
            });
            string sresponse = System.Text.Encoding.Default.GetString(response);
            OAuth2AccessTokenReponse o = (OAuth2AccessTokenReponse) Newtonsoft.Json.JsonConvert.DeserializeObject(sresponse, typeof(OAuth2AccessTokenReponse));
            return o.access_token;        
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T20:58:59.650

我研究了一个更合适的示例：GoogleApisSample 的 Tasks.WinForms.NoteMgr ......并用它找到了解决方案。

解决方案在下面的代码中。它的关键部分是调用*arg.RefreshToken(state);*

谢谢。

```
 public static Authentication.IAuthenticator UseSavedAuthorization()
    {          

        var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description);
        provider.ClientIdentifier = ClientID;
        provider.ClientSecret = ClientSecret;

        OAuth2Authenticator<NativeApplicationClient> auth = new OAuth2Authenticator<NativeApplicationClient>(provider, getState);

        auth.LoadAccessToken();

        return auth;             
    }

public static IAuthorizationState getState(NativeApplicationClient arg)
    {
        IAuthorizationState state = new AuthorizationState(new[] { TasksService.Scopes.Tasks.GetStringValue(), 
                DriveService.Scopes.DriveFile.GetStringValue() , DriveService.Scopes.Drive.GetStringValue()
        });
        state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);

        state.RefreshToken = "<refresh token previously saved>";        
        arg.RefreshToken(state); 

        return state; 
    }` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:29:11.160

如果您使用的是 .NET 客户端库 (http://code.google.com/p/google-api-dotnet-client/)，则无需处理这些问题。该库将在需要时使用您第一次检索的刷新令牌自动为您请求一个新的访问令牌。

# ruby-on-rails - 是否有任何适用于 Ruby on Rails 的（本地）HTML 验证器？

> ID：11458647
> 
> 赞同：9
> 
> 时间：2012-07-12T18:51:43.177
> 
> 标签：ruby-on-rails, local, html-validation

昨天我一整天都在寻找一个可以工作的 HTML 验证器，我可以用它来检查我的 rails 应用程序生成的代码。到目前为止，我已经尝试了几种不同的策略，例如 RailsTidy，它在 Rails 1.9 中不再有效，tidy_ffi，在 Rails 控制台中运行时我很难“要求”，以及 FireFox 的 Total Validator，无论我检查什么，它总是给我同样的错误。

我的目标是检查我的代码，而不必将任何内容上传到互联网。能够从终端运行测试（我正在使用 RedHat Linux）或在正在运行的 localhost 服务器上运行测试将是最有帮助的。

为了节省自己一天（或更多）的挫败感，我在这里提出了这个问题，我想知道是否有其他人成功地使用了 Ruby on Rails 的验证器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T19:55:21.230

试试我的 gem，[html_acceptance](https://github.com/ericbeland/html_acceptance)。它使用 HTML Tidy 在后台进行验证。我前一阵子把它放出来了，但到目前为止，它几乎没有被注意到。它对我很有用，如果您报告问题/有功能请求，我会很乐意查看它们。

在示例中，我有一个自定义 RSpec 匹配器，因此如果您添加该自定义匹配器，在您的规范/请求的集成测试中，您可以执行以下操作：

```
page.should have_valid_html 
```

这个想法是您可以在集成测试中使用它，即使您收到您不关心的轻微警告/故障（例如，TIDY 抱怨某些 IE 特定的黑客攻击），您也可以进入并接受它们，并作为只要验证结果不变，测试就会通过。

此外，您需要在路径上保持整洁。所以在 OS X 上：port install htmltidy 或 Ubuntu sudo apt-get install tidy。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-19T20:45:19.113

我正在为 Ruby On Rails 应用程序开发一个一体化的 HTML/CSS 验证 gem。它的名字是[猎头](https://github.com/jmuheim/headhunter)。

从文档：

> Headhunter 是一个 HTML 和 CSS 验证工具，它可以将自己注入到 Rails 功能测试中，并自动检查所有生成的 HTML 和 CSS 的有效性。
> 
> 此外，它还会查找未使用的（因此是多余的）CSS 选择器。

您所要做的就是`gem 'headhunter'`在测试环境中添加到您的 Gemfile 中：

```
group :test do
  gem 'headhunter'
end 
```

其余的都是自动为您完成的，您将在测试结束时获得应用程序有效性的统计信息，如下所示：

```
Validated 42 HTML pages.
41 pages are valid.
1 page is invalid.
Open .validation/results.html to view full results.

Validated 1 stylesheets.
1 stylesheet is invalid.
  application.css:
  - Invalid css: line 1: Property bla doesn't exist

Found 23 CSS selectors.
20 selectors are in use.
3 selectors are not in use: a img, #flash.failure, input[type='file'] 
```

# android - 如何在 Android 中更新 AlarmManager？

> ID：11458659
> 
> 赞同：1
> 
> 时间：2012-07-12T18:52:38.563
> 
> 标签：android, android-intent, alarmmanager, android-alarms

我是 Android 开发的新手。目前我正在开发待办事项应用程序。

在这个应用程序中，我正在使用 Pending Intent 设置通知。在这我使用**AlarmManager**。设置警报后，通知会在准确的时间发生。

注意：在待定意图中，我使用了唯一 ID。（这里唯一 ID 表示从数据库中获取行记录 ID）。

我的问题是，当我更新**AlarmManager**时，通知没有及时到来。它在我更新**AlarmManager**之后出现。

我的更新代码是：

```
private void updateAlarm(int year,int month,int date,int hour,int minute,int second,String event_id,String e_desc) 
{
        AlarmManager alarmManager = (AlarmManager)               this.getSystemService(this.ALARM_SERVICE);
        Calendar calendar =  Calendar.getInstance();
        calendar.set(year, month-1, date, hour, minute, second);
        long when = calendar.getTimeInMillis();         // notification time

        String event_desc = e_desc;
        Intent intent = new Intent(this, ReminderContent.class);
        intent.putExtra("EventDesc", e_desc);
        int alarm_id = Integer.valueOf(event_id);

        //alarm_id is the Id of PendingIntent which is already created.

        PendingIntent pendingInt = PendingIntent.getBroadcast(this, alarm_id , intent, PendingIntent.FLAG_UPDATE_CURRENT);
        alarmManager.set(AlarmManager.RTC, when, pendingInt);
} 
```

我的更新**AlarmManager**的程序是否正确？

# android - 两个视图的交换位置

> ID：11458660
> 
> 赞同：1
> 
> 时间：2012-07-12T18:52:40.973
> 
> 标签：android

在我的活动中有两种观点。两者都在不同的父母。我有他们相对于屏幕的坐标。如何交换两个视图的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:14:09.717

您将需要`removeView()`为这两个视图调用父 ViewGroup 方法，然后`addView()`将它们添加回来但交换。

所以如果你的父视图被称为 mommy 和 daddy，一个有一个孩子叫 foo，另一个有一个孩子叫 bar：

```
ViewGroup daddy = (ViewGroup)findViewById(R.id.daddy);
ViewGroup mommy = (ViewGroup)findViewById(R.id.mommy);

View foo = findViewById(R.id.foo);
View bar = findViewById(R.id.bar);

//detach children

daddy.removeView(foo);
mommy.removeView(bar);

//re-attach children

daddy.addView(bar);
mommy.addView(foo); 
```

阅读[ViewGroup](http://developer.android.com/reference/android/view/ViewGroup.html)的参考以获取有关 removeView 和 addView 方法的更多信息，并查看其他可用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:07:03.887

试试这个：

```
int x1 = view1.getX();
int y1 = view1.getY();

view1.setX(view2.getX());
view1.setY(view2.getY());
view2.setX(x1);
view2.setY(y1); 
```

您还可以考虑使用动画效果使其看起来不错。

# java - JSONException：id 没有值

> ID：11458661
> 
> 赞同：4
> 
> 时间：2012-07-12T18:52:43.063
> 
> 标签：java, php, android, mysql

它可以从数据库中正常读取和写入，但会出现 JSONException 错误。任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T18:55:18.823

此错误发生在 a 的 getter 函数中`JSONObject`，这意味着您正在尝试使用 JSONObject 中不存在的 id 从 JSONObject 检索值。在检索一个值之前，请检查它是否确实存在于`JSONObject`by`has(String name)`方法或使用 opt 方法中。有关`JSONObject`该类的更多信息，请参见[此处](http://developer.android.com/reference/org/json/JSONObject.html)。

**编辑**从您的错误日志中，错误在您的named中的一个`getString`方法中触发。`OnClickListener``Button``btnRegister`

# macos - 递归批量重命名

> ID：11458663
> 
> 赞同：2
> 
> 时间：2012-07-12T18:52:54.510
> 
> 标签：macos, batch-file, rename

我有几个文件夹，其中包含一些我想从中重命名的文件

```
Foo'Bar - Title 
```

到

```
Title 
```

我正在使用 OS X 10.7。我看过其他解决方案，但没有一个能很好地解决递归问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T21:02:53.960

您的问题有两个部分：查找要递归操作的文件，然后重命名它们。

首先，如果所有内容都在当前目录的下一级，您可以只列出当前目录中每个目录的内容（如上面 Mattias Wadman 的回答），但更普遍（并且可能更容易理解，启动)，您可以只使用[find](http://content.hccfl.edu/pollock/unix/findcmd.htm)命令。

其次，您可以使用 sed 并计算出如何正确引用和管道（您肯定最终应该学习），但是使用[rename](http://plasmasturm.org/code/rename/)命令要简单得多。不幸的是，这不是 Mac 内置的，但您可以使用 Homebrew 等安装它，或者只需下载 perl 脚本和`sudo install -m755 rename /usr/local/bin/rename`.

所以，你可以这样做：

```
find . -exec rename 's|[^/]* - ||' {} + 
```

如果要进行“试运行”以确保正确，请添加“-n”标志以重命名：

```
find . -exec rename -n 's|[^/]* - ||' {} + 
```

要了解它是如何工作的，您真的应该阅读 find 的教程和 rename 的联机帮助页，但将其分解：

*   `find .`表示“递归查找当前目录下的所有文件”。
*   您可以添加额外的测试来过滤事物（例如，`-type f`如果您想跳过除常规文件之外的所有内容，或者如果您只想更改以 'Title' 结尾的文件，则使用 `-name '*Title'），但这不是必需的供您使用。
*   `-exec`...`+`表示对找到的文件进行批处理，并传递尽可能多的文件，以代替`{}`出现在“...”中的命令中的任何文件。
*   `rename 's|[^/]* - ||' {}`表示对于 {} 中的每个文件，将 perl 表达式`s|[^/]* - ||`应用于文件名，如果结果不同，则将其重命名为该结果。
*   `s|[^/]* - ||`表示匹配正则表达式' `[^/]* -`'并将匹配替换为''（空字符串）。
*   `[^/]* -`表示匹配任何以' - '结尾的非斜线字符字符串。因此，在 ' `./A/FooBar - Title`' 中，它将匹配 ' `FooBar -`'。

我应该提一下，当我有一些复杂的事情要做这样的事情时，如果几分钟后尝试使用 find/sed/awk/rename/etc. 把它弄好，我仍然没有得到它，我经常只需使用 Python 和 os.walk 进行命令式编码即可。如果您了解 Python，那么您可能会更容易理解（虽然更冗长且不那么简单），并且更容易修改为其他用例，所以如果您有兴趣，请询问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T19:11:29.423

试试这个：

```
ls -1 * | while read f ; do mv "$f" "`echo $f | sed 's/^.* - //'`" ; done 
```

我建议您在运行之前添加一个`echo`before`mv`以确保命令看起来没问题。正如 abarnert 在评论中指出的那样，此命令一次仅适用于一个目录。

各种命令的详细解释：

`ls -1 *`将为当前目录中的每个文件（和目录）输出一行（`.`-files 除外）。所以这将扩展为`ls -1 file1 file2 ...`,`-1`告诉`ls`它只列出文件名和每行一个文件。

然后将输出通过管道传送到`while read f ; ... ; done`which will loop while`read f`返回零，直到到达文件末尾。`read f`从标准输入（在本例中为 的输出）一次读取一行`ls -1 ...`并将其存储在指定的变量中，在本例中为`f`.

在 while 循环中，我们运行一个`mv`带有两个参数的命令，第一个`"$f"`作为源文件（注意引号以处理带有空格等的文件名），第二个是目标文件名，它使用 sed 和 `（反引号）来执行所谓的命令替换，这将在反引号内调用命令并将其替换为标准输出的输出。

`echo $f | sed 's/^.* - //'`将当前文件通过管道传输`$f`到 sed 中，该文件将匹配正则表达式并进行替换（`s`in `s/`）并将结果输出到标准输出。正则表达式`^.* -`将从字符串的开头匹配`^`（称为锚定），然后匹配`.*`后面的任何字符，`-`并将其替换为空字符串（之间的字符串`//`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T19:18:38.040

我知道您要求批量重命名，但我建议您[使用 Automator](http://zentraal.com/docs/recursive-file-rename-on-os-x-using-automator)。它运行良好，如果您将其创建为服务，您将可以在上下文菜单中选择:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-21T05:45:28.120

经过反复试验，我遇到了这个解决方案，它可以帮助我解决同样的问题。

```
find <dir> -name *.<oldExt> -exec rename -S .<oldExt> .<newExt> {} \; 
```

基本上，我利用了查找和重命名实用程序。这里的技巧是弄清楚rename的'{}'（表示需要通过rename处理的文件）放置在哪里。

PS rename 不是内置的 linux 实用程序。我使用 OS X 并使用自制软件安装重命名。

# mysql - MySQL日期相关查询

> ID：11458664
> 
> 赞同：0
> 
> 时间：2012-07-12T18:52:55.310
> 
> 标签：mysql

我在理解如何最好地解决此查询时遇到问题。

我有一个名为 user_files 的表。一个用户可以有很多文件。我想获取在过去一年内未修改任何文件的用户列表。如果用户在去年至少修改了一个文件，则应排除该用户。

```
 Table: user_files
  file_id | user_id | date_modified
  ----------------------------------
  1        100       2010-10-01
  2        100       2010-11-13
  3        100       2011-01-01
  4        101       2010-10-01
  5        101       2010-06-13
  6        101       2011-04-12
  7        101       2012-04-01 
```

预期结果将仅列出 user_id 100。

这是我一直在玩的一些糟糕的sql。这个想法是我找到所有最近修改过他们的文件的用户，然后找到没有包含在该列表中的用户。

```
 select user_id from users where user_id not in
    (
      select user_id from 
      (
        select user_id, story_id, max(date_modified) from user_files 
        where DATE_FORMAT(date_modified, '%Y-%m-%d') >= DATE_SUB(curdate(), INTERVAL 1 YEAR)
        group by user_id
      )x
    ) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:58:02.827

```
SELECT DISTINCT(f.user_id)
FROM user_files f
WHERE NOT EXISTS(SELECT 1
                 FROM user_files ff
                 WHERE ff.user_id = f.user_id
                 AND ff.date_modified >= DATE_SUB(curdate(), INTERVAL 1 YEAR)) 
```

[http://sqlfiddle.com/#!2/64e7f/1](http://sqlfiddle.com/#!2/64e7f/1)

或者，

```
SELECT user_id
FROM user_files
GROUP BY user_id
HAVING MAX(date_modified) < DATE_SUB(curdate(), INTERVAL 1 YEAR) 
```

[http://sqlfiddle.com/#!2/64e7f/4](http://sqlfiddle.com/#!2/64e7f/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:57:43.013

您可以使用这个简单的解决方案：

```
SELECT a.user_id
FROM users a
LEFT JOIN user_files b ON 
    a.user_id = b.user_id AND 
    b.date_modified >= CURDATE() - INTERVAL 1 YEAR
WHERE b.user_id IS NULL 
```

# objective-c - 淡入/淡出 NSView

> ID：11458670
> 
> 赞同：4
> 
> 时间：2012-07-12T18:53:16.500
> 
> 标签：objective-c, cocoa

当我使用 iPhone/iPad 制作应用程序时，我想为我的 UIView 创建褪色效果

所以我使用了下面的功能，它有效，但是当我为 Mac 制作程序并使用 NSView 而不是 UIView 代码不起作用时，有人可以帮我让它工作吗？请

```
-(void)fadeOut:(UIView*)viewToDissolve 
  withDuration:(NSTimeInterval)duration   
       andWait:(NSTimeInterval)wait
{
    [UIView beginAnimations: @"Fade Out" context:nil];

    // wait for time before begin
    [UIView setAnimationDelay:wait];

    // druation of animation
    [UIView setAnimationDuration:duration];
    viewToDissolve.alpha = 0.0;
    [UIView commitAnimations];
}

-(void)fadeIn:(UIView*)viewToFadeIn 
 withDuration:(NSTimeInterval)duration 
      andWait:(NSTimeInterval)wait
{
    [UIView beginAnimations: @"Fade In" context:nil];

    // wait for time before begin
    [UIView setAnimationDelay:wait];

    // druation of animation
    [UIView setAnimationDuration:duration];
    viewToFadeIn.alpha = 1;
    [UIView commitAnimations];

}

/**
 Fade in from fade out
 */
-(void) fadeInFromFadeOut:(UIView*)viewToFadeIn 
             withDuration:(NSTimeInterval)duration
{
    viewToFadeIn.hidden=NO;
    [self fadeOut:viewToFadeIn withDuration:1 andWait:0];
    [self fadeIn:viewToFadeIn withDuration:duration andWait:0];

} 
```

**我做了什么：**

```
-(void)fadeOut:(NSView*)viewToDissolve 
  withDuration:(NSTimeInterval)duration  
       andWait:(NSTimeInterval)wait
{   
    [NSAnimationContext beginGrouping];
    // Animate alpha fades with half-second duration

    // wait for time before begin
    // [NSAnimationContext setAnimationDelay:wait];

    [[NSAnimationContext currentContext] setDuration:duration];
    [[viewToDissolve animator] setAlphaValue:0.0];
    [NSAnimationContext endGrouping];

    }

-(void)fadeIn:(NSView*)viewToFadeIn 
 withDuration:(NSTimeInterval)duration         
      andWait:(NSTimeInterval)wait
{
    // wait for time before begin
    //[NSAnimationContext setAnimationDelay:wait];

    [NSAnimationContext beginGrouping];
    // Animate alpha fades with half-second duration
    [[NSAnimationContext currentContext] setDuration:duration];
    [[viewToFadeIn animator] setAlphaValue:1];
    [NSAnimationContext endGrouping];
}

-(void) fadeInFromFadeOut:(NSView*)viewToFadeIn 
             withDuration:(NSTimeInterval)duration
{
    viewToFadeIn.hidden=NO;
    [self fadeOut:viewToFadeIn withDuration:1 andWait:0];

    [self fadeIn:viewToFadeIn withDuration:duration andWait:0];
} 
```

# php - 未在 PHP MySQL 上选择数据库

> ID：11458672
> 
> 赞同：0
> 
> 时间：2012-07-12T18:53:33.150
> 
> 标签：php

> 错误：未选择数据库

我有一个由 ARVIXE（Windows 2008 服务器）托管的网站，目前由 IXWEBHOSTING（Windows 2003 服务器）托管。移动非常简单。只需下载/上传站点 PHP 文件并导出/导入 MySQL 数据库并更改配置 PHP 文件以指向新的数据库信息，瞧！

现在我正在尝试将站点移动到我自己的服务器。相信我，我在 DNS、服务器、网络方面没有任何问题。我已经这样做了 15 年（不是编程）。
这是我的实际服务器：Windows 2003 STD SP2、IIS6、PHP5.2.12、MySQL 5.0.96、FastCGI 1.5。和所有 MS 更新。

在您得出结论之前，请先告诉我是代码还是 MySQL 权限...我已阅读我认为 Internet 上的所有 No Database Selected 错误，包括这里，通常是一些代码修改或缺少代码或数据库权限问题。 ..但不是这个，请参阅下面的场景，您会明白为什么不这样做。

*   **场景 1** PHP 文件位于 IXWEBHOSTING 服务器中。配置 PHP 文件指向我自己的 MySQL 服务器，它工作正常。

*   **方案 2** PHP 文件位于 IXWEBHOSTING 服务器中。配置 PHP 文件指向 IXWEBHOSTING MySQL 服务器，它工作正常。

*   **场景 3** PHP 文件位于我的 Win2k3 服务器中。配置 PHP 文件指向 IXWEBHOSTING MySQL 服务器，我收到错误“未选择数据库”。

*   **场景 4** PHP 文件位于我的 Win2k3 服务器中。配置 PHP 文件指向我自己的 MySQL 服务器，我收到错误“未选择数据库”。

所以我知道它与我自己的 MySQL 服务器或 PHO 代码上的 MySQL 权限无关，因为场景 1 证明了这一点。我的服务器上的 PHP 似乎有问题。

在安装 OLD PHP 和 MySQ 之前，我拥有每个 PHP 5.3.13 和 MySQL 5.5.25 的最新版本以及相同的 FastCGI 版本。我有同样的问题！！！！我之所以安装旧版本是因为我想匹配IXWEBHOSTING服务器版本。

在上述安装之前，Windows 每次都是从头开始安装在 hyper-v 服务器上的。没有更新 第一次尝试在服务器上进行了 MS 更新，最后一次安装它具有所有 MS 更新，但我仍然遇到同样的问题。

我在使用 Windows 2008 STD、PHP 5.3.13 和 MySQL 5.5.25 时遇到了同样的问题。

PHP 正在加载所有适当的扩展来建立与 MySQL 的连接。我也让 PHPmyAdmin 运行没有问题。

我也在配置文件中尝试过，但没有运气

索引中有很多东西，但这是建立与数据库和查询的连接以及它失败的地方所需要的。

**配置文件**

```
<?
$usuarios_sesion="youth";
$host="localhost";
$user="usernamehere";
$pass="passwordhere";        
$db="databasehere";
$tabla="users";
?> 
```

**索引.php 文件**

```
<?
require ("enlaces_config.inc.php");

$menu=mysql_query("SELECT id_cat, name_cat FROM categories WHERE access=0 AND published=1") or die ("Can't select categorias MySQL says: ".mysql_error());

?> 
```

在这一点上，我不知道它还能是什么......权限，也许但不是 MySQL 权限，用户拥有数据库的完全权限。场景 1 和 2 也证明了这一点。

如果您需要检查 PHP 信息，请告诉我。我将发布 php 文件的名称以供执行

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:16:44.587

问题不在于您在服务器上编写的所有内容。
当您尝试从数据库中获取数据时，您必须基本上遵循以下步骤 -

1.  创建连接

    这涉及使用数据库、用户名和密码以及主机名进行连接。您可以使用`mysql_connect()`，尽管*已弃用*。

2.  您需要从该主机中选择数据库。

3.  您在步骤 2 中使用选定的数据库连接进行任何 mysql 查询。

我建议您首先掌握数据库概念，然后使用 php 实现。
最佳起点[http://w3schools.com](http://w3schools.com)

# python - 在Python中对单字字符串的字母进行排序？

> ID：11458676
> 
> 赞同：10
> 
> 时间：2012-07-12T18:53:46.583
> 
> 标签：python, string, sorting

```
x = 'yellow'
print(sorted(x)) 
```

返回

```
['e', 'l', 'l', 'o', 'w', 'y'] 
```

我希望它返回什么

埃洛维

`'ellowy'`如果字母不在列表中，我是如何让它返回的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T18:54:40.150

实际上`sorted()`，当用于字符串时，总是返回单个字符的列表。所以你应该使用`str.join()`从该列表中创建一个字符串。

```
>>> x = 'yellow'
>>> ''.join(sorted(x))
'ellowy' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-12T18:54:27.133

字符串的`join()`方法将其参数的每个元素与给定字符串对象的副本连接起来，作为每个项目之间的分隔符。许多人发现这是一种奇怪且违反直觉的做事方式，但是通过将元素与空字符串连接起来，您可以将字符串列表转换为单个字符串：

```
x = 'yellow' 
print(''.join(sorted(x))) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-12T18:54:24.573

```
x = 'yellow' 
print(''.join(sorted(x))) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-12T19:00:05.417

如果您想让 Guido[讨厌](http://www.artima.com/weblogs/viewpost.jsp?thread=98196)您，请尝试：

```
reduce(lambda l,r: l+r, sorted(x)) 
```

;-)

在 python 3 中，您需要从 functools 包中导入它

# c++ - 64位Linux机器上的“fftw_malloc”段错误

> ID：11458678
> 
> 赞同：2
> 
> 时间：2012-07-12T18:53:50.407
> 
> 标签：c++, segmentation-fault, fftw

我正在尝试重新编译一个使用 fftw3（版本 3.2.2）并且已经在 32 位 linux 机器上运行的程序。它可以在 64 位机器上正确编译——我链接到 64 位 fftw 库——但是程序在尝试`fftw_malloc`. 下面是使用的代码：

```
//the variables on the right side are already initialized to nonzero values
int olsLen = blockLen + tempLen - 1;
int num_chans = 23;

fftw_complex *gabor_filter, *block_signal, *ols_out;

gabor_filter = (fftw_complex *) fftw_malloc( olsLen
                                             * num_chans
                                             * sizeof(fftw_complex));

block_signal = (fftw_complex *) fftw_malloc( olsLen
                                             * num_chans
                                             * sizeof(fftw_complex));

ols_out = (fftw_complex *) fftw_malloc( olsLen
                                        * num_chans
                                        * sizeof(fftw_complex)); 
```

看起来问题应该很明显，但我现在太傻了，看不到我的错误。有任何想法吗？

编辑：它在第一个 fftw_malloc 上出现段错误。在这种情况下，它是 gabor_filter，但如果我重新排序变量，程序将在第一个 fftw_malloc 上出现段错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:45:33.350

看起来您需要升级到 3.3.3。我不确定为什么您的设置不起作用，但 fftw_alloc_complex() 直到 3.3-beta1 才添加：

> 新的便利函数 fftw_alloc_real 和 fftw_alloc_complex 将 fftw_malloc 用于没有类型转换或 sizeof 的实数和复数数组。

[FFTW 3 发行说明](http://www.fftw.org/release-notes.html)

升级后还会出现这种情况吗？（您的原始问题或对@ArjunShankar 评论的回复）

# javascript - 您如何或如何有效地使用 firebase 处理错误？

> ID：11458685
> 
> 赞同：7
> 
> 时间：2012-07-12T18:54:19.117
> 
> 标签：javascript, asynchronous, firebase

我一直在阅读 firebase 文档，它使用了非常多的异步代码。我想知道 firebase 是否在回调中抛出错误和/或传递错误数据。据我所知，文档没有提到它。提前感谢您的建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T00:37:03.417

Firebase 目前不会产生开发人员可使用的错误（由于输入错误而引发的异常除外）。目前 Firebase 操作保证要么成功要么永远不会触发事件。在网络连接问题的情况下，Firebase 根本不会触发事件。这是预期的行为，因为 Firebase 设计为在离线模式下工作，一旦重新建立连接，它会自动让您加快速度。

请注意，将来我们将针对安全违规和可能的其他错误类型抛出错误。用于捕获和处理这些错误的 API 尚未编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-02T21:38:57.617

您需要创建一个处理错误的身份验证函数。请参阅下面的 jsFiddle 以获得一个很好的示例。

```
function initAuth(ref) {
        return new FirebaseSimpleLogin(ref, function (err, user) {
            // if there is an error then display it 
            if (err) {
                displayError(err);
            } else if (user) {
                // we only want to log people in through the email/password provider
                if( user.provider !== 'password' ) {
                   auth.logout();   
                }
                else {
                    // logged in!
                    uid = user.uid;
                    // save the user to our firebase
                    ref.child(user.uid).set({
                        id: user.id,
                        uid: user.uid,
                        email: user.email
                    });  
                    // switch over the the user info screen
                    switchView('userInfo');
                }
            } else {
                // logged out!
                console.log('not logged in');
            }
        });
    } 
```

[http://jsfiddle.net/firebase/wPBj5/embedded/result,js/](http://jsfiddle.net/firebase/wPBj5/embedded/result,js/)

# cuda - 使用推力编译模板解析错误

> ID：11458689
> 
> 赞同：1
> 
> 时间：2012-07-12T18:54:25.843
> 
> 标签：cuda, thrust

我正在尝试编译一些代码，这些代码允许一些 CPU 例程调用使用 GPU 加速某些计算的函数。GPU 代码使用 Thrust，特别是 reduce 和 device_ptr。当我使用 nvcc 将 GPU 代码构建为独立的时，没有问题。但是，在编译最终“包装器”时，尝试将 GPU 代码与 CPU C++ 代码集成会导致以下编译器错误：

```
nvcc -O2 -c NLC_2D_TFIM.cpp -lcuda -lcudart -lcublas -lcusparse -L../CUDA/Lanczos/sort/sort/gnu/release -lmgpusort 
In file included from /usr/local/cuda/bin/../include/thrust/pair.h:265:0,
                 from /usr/local/cuda/bin/../include/thrust/tuple.h:35,
                 from /usr/local/cuda/bin/../include/thrust/detail/functional/actor.h:29,
                 from /usr/local/cuda/bin/../include/thrust/detail/functional/placeholder.h:20,
                 from /usr/local/cuda/bin/../include/thrust/functional.h:26,
                 from /usr/local/cuda/bin/../include/thrust/system/detail/error_category.inl:22,
                 from /usr/local/cuda/bin/../include/thrust/system/error_code.h:516,
                 from /usr/local/cuda/bin/../include/thrust/system/cuda_error.h:26,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/cuda/malloc.inl:26,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/cuda/malloc.h:50,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/dispatch/malloc.h:22,
                 from /usr/local/cuda/bin/../include/thrust/detail/device_malloc.inl:23,
                 from /usr/local/cuda/bin/../include/thrust/device_malloc.h:102,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/internal_allocator.h:22,
                 from /usr/local/cuda/bin/../include/thrust/detail/uninitialized_array.h:23,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/cuda/copy_cross_space.inl:20,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/cuda/copy_cross_space.h:57,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/cuda/dispatch/copy.h:23,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/cuda/copy.h:21,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/dispatch/copy.h:24,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/copy.inl:20,
                 from /usr/local/cuda/bin/../include/thrust/detail/backend/copy.h:44,
                 from /usr/local/cuda/bin/../include/thrust/detail/copy.inl:20,
                 from /usr/local/cuda/bin/../include/thrust/detail/copy.h:39,
                 from /usr/local/cuda/bin/../include/thrust/detail/reference_base.inl:18,
                 from /usr/local/cuda/bin/../include/thrust/detail/reference_base.h:138,
                 from /usr/local/cuda/bin/../include/thrust/device_reference.h:27,
                 from /usr/local/cuda/bin/../include/thrust/detail/device_ptr.inl:23,
                 from /usr/local/cuda/bin/../include/thrust/device_ptr.h:181,
                 from ../CUDA/Lanczos/hamiltonian.h:32,
                 from ../CUDA/Lanczos/lanczos.h:8,
                 from NLC_2D_TFIM.cpp:17:
/usr/local/cuda/bin/../include/thrust/detail/pair.inl: In function ‘bool thrust::operator<(const thrust::pair<T1, T2>&, const thrust::pair<T1, T2>&)’:
/usr/local/cuda/bin/../include/thrust/detail/pair.inl:72:22: error: ‘.’ cannot appear in a constant-expression
/usr/local/cuda/bin/../include/thrust/detail/pair.inl:72:46: error: ‘.’ cannot appear in a constant-expression
/usr/local/cuda/bin/../include/thrust/detail/pair.inl:72:36: error: parse error in template argument list
/usr/local/cuda/bin/../include/thrust/detail/pair.inl:72:36: error: ‘.’ cannot appear in a constant-expression
/usr/local/cuda/bin/../include/thrust/detail/pair.inl:72:58: error: ‘.’ cannot appear in a constant-expression
/usr/local/cuda/bin/../include/thrust/detail/pair.inl:72:69: error: ‘.’ cannot appear in a constant-expression
/usr/local/cuda/bin/../include/thrust/detail/pair.inl:72:12: error: parse error in template argument list
make: *** [NLC_2D_TFIM.o] Error 1 
```

`NLC_2D_TFIM`与另一个`Graphs`使用`std::pair`s 的模块 ( ) 一起工作，但这些都没有传递给与 GPU 对话的模块。每个标头都`std`用作其命名空间，而不是`thrust`. 我传递给 GPU 处理程序的所有参数都是常规 C 数组、`int`s 等。

上面引用的行是：

```
#include"lanczos.h" 
```

哪个用途：

```
#include"hamiltonian.h" 
```

然后从那里：

```
#include<thrust/device_ptr.h> 
```

在`NLC_2D_TFIM.cu`“包装器”中，代码​​为：

```
ReadGraphsFromFile(fileGraphs, "rectanglegraphs.dat", TypeFlag); //graphs the information generated by the Graphs module

    double J=1.;

    for(int hh=1; hh<10; hh++) {
        h = hh;

        //Create some storage for things to be used in GPU functions
        d_hamiltonian* HamilLancz = (d_hamiltonian*)malloc(HowMany*sizeof(d_hamiltonian));
        parameters* data = (parameters*)malloc(HowMany*sizeof(parameters));
        double** groundstates = (double**)malloc(HowMany*sizeof(double*));
        double** eigenvalues = (double**)malloc(HowMany*sizeof(double*));
        int* NumElem = (int*)malloc(HowMany*sizeof(int));
        int** Bonds = (int**)malloc(HowMany*sizeof(int*));

        //Go through each graph we read in earlier
        unsigned int i = 1;
        while ( i<fileGraphs.size() && fileGraphs.at(i)->Order < 14) { //skip the zeroth graph
            //CPU gets the energy for smaller graphs
            GENHAM HV(fileGraphs.at(i)->Order, J, h, fileGraphs.at(i)->AdjacencyList, TypeFlag);
            LANCZOS lancz(HV.Vdim);  //dimension of reduced Hilbert space (Sz sector)
            HV.SparseHamJQ();  //generates sparse matrix Hamiltonian for Lanczos
            energy = lancz.Diag(HV, 1, prm.valvec_, eVec);
            i++;
        }

        if( argv[0] == "--gpu" || argv[0] == "-g" )
        {
            while ( i < fileGraphs.size() )
            {
                i += 30;

                for( int j = 0; j < HowMany; j++)
                {

                    Bonds[ j ] = (int*)malloc(sizeof(int)*3*fileGraphs.at(i - j)->Order);
                    for(unsigned int k = 0; k < fileGraphs.at(i - j)->Order; k++)
                    {
                        Bonds[ j ][ k ] = k;
                        Bonds[ j ][ k + fileGraphs.at(i - j)->Order ] = fileGraphs.at(i - j)->AdjacencyList.at(2*k).second;
                        Bonds[ j ][ k + 2*fileGraphs.at(i - j)->Order ] = fileGraphs.at(i - j)->AdjacencyList.at(2*k + 1).second;
                    }

                    data[ j ].Sz = 0;
                    data[ j ].dimension = 2;
                    data[ j ].J1 = J;
                    data[ j ].J2 = h;
                    data[ j ].modelType = 2;
                    eigenvalues[ j ] = (double*)malloc(sizeof(double));

                }
                //Calls the CPU functions which will talk to the GPU, including Thrust
                ConstructSparseMatrix(HowMany, Bonds, HamilLancz, data, NumElem, 1);
                lanczos(HowMany, NumElem, HamilLancz, groundstates, eigenvalues, 200, 1, 1e-12); 
```

因此，没有任何东西`std::pair`可以传递给 GPU。以下是推力调用：

```
for(int i = 0; i < howMany; i++)
{
    thrust::device_ptr<int> red_ptr(d_H[i].set);
    numElem[i] = thrust::reduce(red_ptr, red_ptr + rawSize[i]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:40:52.393

我不确定这是正确的答案，但如果你的文件扩展名是 cpp 不 nvcc 只是将它传递给常规的 c++ 编译器？如果重命名文件 .cu 会发生什么？

（另外我不确定是否`-c`需要在同一个编译命令中拥有所有库 -`-c`通常表明没有完成链接。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:07:56.047

事实证明，问题在于我使用[Blitz](http://blitz.sourceforge.net/)链接代码。删除所有 Blitz 数据结构和它的包含语句清除了我的编译问题。Blitz 使用它自己的命名空间，因此其中的某些内容可能与推力冲突，或者某处缺少 } 或 >。

# android - 无法解析目标“Google Inc.:Google APIs:15”

> ID：11458696
> 
> 赞同：13
> 
> 时间：2012-07-12T18:54:42.427
> 
> 标签：android, google-api

我正在尝试安装一些 android 开发者插件。安装完成后，我在控制台中看到此警告 3 次。为什么会发生此错误，我该如何摆脱它？如果我忽略这个错误，以后会对我有什么影响？

[cloudnotes-preview-android-sample] 无法解析目标“Google Inc.:Google APIs:15”

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T19:04:33.570

确保您已下载该目标。您可以通过 Eclipse 执行此操作。

只需单击 SDK-Manager 工具。这是带有向下箭头的 Android 小家伙。然后确保您安装了正确的目标包。

# php - Android并将文件上传到php服务器

> ID：11458697
> 
> 赞同：0
> 
> 时间：2012-07-12T18:54:46.870
> 
> 标签：php, android, file-upload

我正在编写一个应该将文件发送到 PHP 服务器的应用程序。这是我的代码：

```
 InputStream is = new FileInputStream(file);
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost postRequest = new HttpPost("http://majkelsoftgames.cba.pl/ser/server.php");

    byte[] data = IOUtils.toByteArray(is);
    InputStreamBody isb= new InputStreamBody(new ByteArrayInputStream(data), "file");

    MultipartEntity multipartContent = new MultipartEntity();
    multipartContent.addPart("file", isb);

    postRequest.setEntity(multipartContent);
    HttpResponse response = httpClient.execute(postRequest); 
```

我的问题是我真的没有 PHP 方面的经验，而且我不知道如何在 PHP 端获取这个文件。我找到了一些代码：

```
<?php
    $target_path  = "./";
    $target_path = $target_path . basename( $_FILES['uploadedfile']['name']);

    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
        echo "The file ".  basename( $_FILES['uploadedfile']['name'])." has been uploaded";
    } 
    else {
        echo "There was an error uploading the file, please try again!";
    }
?> 
```

但它不起作用。有人可以解释一下我怎样才能在 PHP 方面简单地接受吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:17:29.640

我认为问题在这里：

```
InputStreamBody isb= new InputStreamBody(new ByteArrayInputStream(data), "file"); 
```

这是发送名为“文件”的数据，但随后

```
$_FILES['uploadedfile']['name'] 
```

正在尝试查找名为“uploadedfile”的文件。确保它们匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:12:35.080

```
iF YOU WANT TO UPLOAD .pdf FILE TO LOCAL SERVER THEN USE THIS SIMPLE METHOD, Lets we are doing code here under Button Click Event...

if (isset($_POST['submit']))
{

if ( ($_FILES["file"]["type"] =="application/pdf"))
 { 

 if (file_exists("C:/xampplite/htdocs/site/upload/" . $_FILES["file"]["name"]))

    echo " This File is already exists in folder";

else
{
  move_uploaded_file ($_FILES["file"]["tmp_name"],"C:/xampplite/htdocs/site/upload/" . $_FILES["file"]["name"]);      
  echo "File have been Stored in:-C:/xampplite/htdocs/site/upload/ "  . $_FILES["file"]["name"];

  }
}

}//end of click_event 
```

# javascript - 在数组中删除带有 javascript 的词缀

> ID：11458700
> 
> 赞同：1
> 
> 时间：2012-07-12T18:54:49.293
> 
> 标签：javascript

如果我们想从这句话中删除词缀，我们从哪里开始？**me** ang **an** **me** nang **kan** **di** menang **kan**

```
affix_list = [
'me-an',
'me-kan,
'di-kan
]

string = 'meangan menangkan dimenangkan' 
```

所以它会输出

```
output = [
'ang',
'nang'
'menang'
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:00:05.560

您可能希望对这些替换使用[正则表达式](http://www.regular-expressions.info/)。从您的 开始`affix_list`，这应该有效：

```
output = affix_list.reduce(function(str, affix) {
    var parts = affix.split("-");
    var regex = new RegExp("\\b"+parts[0]+"(\\S+)"+parts[1]+"\\b", "g");
    return str.replace(regex, "$1")
}, string).split(" "); 
```

您的`regex`es 将如下所示：

```
/\bme(\S+)an\b/g
/\bme(\S+)kan\b/g
/\bdi(\S+)kan\b/g 
```

但请注意，您当然需要替换`me-kan`before `me-an`，否则`"menangkan"`将`nangk`在`me-kan`表达式可以应用之前变为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:59:16.043

您需要从 Javascript 正则表达式开始并遍历值，相应地检索中间值。我会为你做第一个，你可以试试剩下的:)

```
var re = /me(\w+)an/;
var str = "meangan";  
var newstr = str.replace(re, "$1");  
console.log(newstr);
// outputs ang 
```

**参考**：[https ://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)

# hibernate - 对于大型应用程序，您推荐 JDBC 还是 JPA？

> ID：11458701
> 
> 赞同：1
> 
> 时间：2012-07-12T18:54:49.133
> 
> 标签：hibernate, jpa, orm, jdbc

提供一些背景，

1.  我们有相当大的模式，由数百个具有复杂关系的表组成。
2.  数据量也很大，数据的性质相对敏感（金融）
3.  当前架构是 - Java EE：会话 Bean、DAO (JDBC) 调用存储过程。
4.  在数据库级别，我们有一些复制机制来使数据与前端和后端数据库（托管在不同的机器上）保持同步。因此，应用程序将需要从前端数据库中查找（读取）数据，如果不可用，则在后端数据库中查找。因此，在 JPA 术语中，我们可能需要两个不同的 EntityManager 实例。

由于系统仍在增长，可扩展性和性能是最大的问题。

有了上述信息，是否有人对迁移应用程序以使用 JPA 等持久性框架的可行性有任何意见？在上述情况下，持久性框架面临哪些挑战？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T07:54:30.967

我同意@SJuan76 的观点，您应该让某人深入了解您的架构以提供更好的建议。但无论如何，这里有一些提示：

1）从映射开始。以“正确的 OOP 方式”映射您的实体，并尝试通过调整映射来达到您拥有的相同架构。如果关系那么复杂，您可能会遇到一些障碍，最好在映射阶段处理它（而不是仅映射一小部分，对于 PoC）。

2) 不要担心 Hibernate 的性能。Hibernate 可能会比任何内部 JDBC 框架更快。但是，如果您决定将业务逻辑从存储过程移至 Java 代码，请查看性能变化。在转换它们时，您可能必须转换您的思维方式，因为在 SP 中处理大量数据通常比将大量数据传输到应用层并在那里处理要快。

3) 一定要花一些时间阅读 Hibernate 书籍和文档。真的。大多数时候人们抱怨 Hibernate 是因为他们并不真正了解幕后发生的事情。

祝你好运 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:20:42.790

你提到你有存储过程，那么会有一个问题，你想重新实现你的大部分项目。

如果您不希望这样，那么请忘记 JPA 或 Hibernate，在这种情况下，我建议您使用 MyBatis（或 iBatis）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:01:55.837

我的经验是，一旦你浏览了几页，你就会得到某种框架。这可以像交换数据映射一样简单，但是对于 Java，使用类型安全的愿望可能会导致某种形式的映射框架。Hibernate，通过它的 JPA 注释，是迄今为止 Java 世界中最著名的，但当然还有其他实现。我对 Grails 也有过很好的体验，它实际上在底层使用了 Hibernate（默认情况下），但当然这是一个完整的堆栈。

我建议您的高级团队在做任何其他事情之前花一些时间从至少一些最有希望的替代方案中研究一些示例。

# python-2.7 - 在函数的第二范围级别内无法访问 Python 全局变量

> ID：11458703
> 
> 赞同：1
> 
> 时间：2012-07-12T18:54:59.203
> 
> 标签：python-2.7, scoping

> **可能重复：**
> [由外部模块分配的 Python 变量可用于打印，但不能用于在目标模块中分配](https://stackoverflow.com/questions/605399/python-variable-assigned-by-an-outside-module-is-accessible-for-printing-but-not)

通常考虑其他语言的作用域规则，我有点假设 Python 的作用域规则与全局变量相似，直到我在下面的代码中遇到变量**计数问题：**

```
count=1

def intPermute(fix,var):

    if len(var) ==2:
        #import pdb
        #pdb.set_trace()
        print ("%d: %s%c%c" % (count, str(fix),var[0],var[1]))
        count+=1
        print ("%d: %s%c%c" % (count, str(fix),var[1],var[0]))
        count+=1

    else:
        for i in range(len(var)):
            intPermute(fix+var[i],var[:i]+var[i+1:])

def permuteStr(string):
    # permute a string for nPn combinations basically n!
    if string =="" or len(string) <=0:
        return;
    if len(string) <2:
        print "%d: %s" % (count, str(string))

    intPermute("",string) 
```

我收到以下错误：文件“/Users/ns/permute2.py”，第 9 行， intPermute print ("%d: %s%c%c" % (count, str(fix),var[0], var[1])) UnboundLocalError：赋值前引用的局部变量“count”

为什么 python 范围规则定义为我无法访问函数 intPermute 内部范围（if 语句）内的全局变量计数？在函数的第一个语句范围级别可以访问相同的变量吗？这是为什么？我知道可以通过在函数中定义同名的局部变量来“覆盖”全局范围变量，但这里似乎并非如此。

我能够在 intPermute 函数的开头添加以下语句来解决这个问题： **全局计数**

```
def intPermute(fix,var):

    global count
    if len(var) ==2:
        #import pdb
        #pdb.set_trace()
        print ("%d: %s%c%c" % (count, str(fix),var[0],var[1]))
        count+=1
        print ("%d: %s%c%c" % (count, str(fix),var[1],var[0]))
        count+=1

    else:
        for i in range(len(var)):
            intPermute(fix+var[i],var[:i]+var[i+1:]) 
```

现在，global 的这个含义对我来说并不明显，我认为 global 关键字是在全局范围内“导出”一个局部变量。

所以 2 个问题：1）为什么 Python 不允许在函数 intPermute 的二级范围内查看全局变量计数？虽然它可以在函数的第一级范围内访问？2）为什么全局关键字解决了这个问题？它是否总是适用于解决 1 级全局变量？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:00:39.923

这是“设计使然”，参见：[http ://bugs.python.org/issue9049](http://bugs.python.org/issue9049)

# php - 单击 Facebook Page Like 并使用网站应用程序

> ID：11458706
> 
> 赞同：-1
> 
> 时间：2012-07-12T18:55:22.897
> 
> 标签：php, facebook, facebook-graph-api

[我读过一些关于这个的东西。我没有得到我要找的东西。有很多人搜索过/问过这种问题。]

我有一个 Facebook 粉丝页面。我有一个基于网站的 Facebook 应用程序。

FB 用户应该访问我的网站。如果他们是该页面的粉丝，他们可以使用该应用程序。否则他们不能使用它。

在没有得到用户任何许可的情况下，有没有办法做到这一点？我的页面上有一个类似 facebook 的插件，可以显示我是否喜欢该页面。

我可以使用它吗？提供一些线索来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:01:26.340

如果您的 Facebook 应用程序已添加到您的 Facebook 粉丝页面（作为选项卡或其他内容），那么您可以使用[它](https://stackoverflow.com/questions/5093398/check-if-user-liked-page/5100287#5100287)来确定用户是否喜欢您的粉丝页面，并根据此显示类似“喜欢此页面以访问应用程序”的内容" 或显示应用程序本身（这必须在基于网站的应用程序端完成）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T08:54:28.560

```
offcourse you can if you have a app id by adding following plugin...
<iframe src="http://www.facebook.com/plugins/like.php?
                app_id=**APP_ID**&amp;href=**siteurl**&amp;send=false
                &amp;layout=standard&amp;width=450&amp;show_faces=false&amp;
                action=like&amp;colorscheme=light&amp;font&amp;height=35"
                scrolling="no" frameborder="0" style="border:none;
                overflow:hidden;width:450px; height:35px;" allowTransparency=
                "true">
</iframe> 
```

# android - 在 Android 中使用 Content Provider 批量删除项目

> ID：11458707
> 
> 赞同：9
> 
> 时间：2012-07-12T18:55:23.000
> 
> 标签：android, android-contentprovider, android-contentresolver

我正在尝试批量删除表中的某些项目。

```
 String ids = { "1", "2", "3" };

    mContentResolver.delete(uri, MyTables._ID + "=?", ids); 
```

但是我不断收到以下错误

> java.lang.IllegalArgumentException：绑定参数过多。提供了 3 个参数，但该语句需要 1 个参数。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-04-02T21:36:55.163

您可以在一个事务中使用[ContentProviderOperation进行批量删除/插入/更新。](http://developer.android.com/reference/android/content/ContentProviderOperation.html)您不必连接字符串要好得多。它也应该非常有效。对于删除：

```
 ArrayList<ContentProviderOperation> operations = new ArrayList<ContentProviderOperation>();
    ContentProviderOperation operation;

    for (Item item : items) {

        operation = ContentProviderOperation
                .newDelete(ItemsColumns.CONTENT_URI)
                .withSelection(ItemsColumns.UID + " = ?", new String[]{item.getUid()})
                .build();

        operations.add(operation);
    }

    try {
        contentResolver.applyBatch(Contract.AUTHORITY, operations);
    } catch (RemoteException e) {

    } catch (OperationApplicationException e) {

    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-12T19:04:00.153

发生错误是因为您的 where 子句中有一个占位符 (?)，而您传递了三个参数。你应该做：

```
String ids = { "1", "2", "3" };

mContentResolver.delete(uri, MyTables._ID + "=? OR " + MyTables._ID + "=? OR " + MyTables._ID + "=?", ids); 
```

我不知道 SQLite 是否支持 IN 子句，如果是，你也可以这样做：

```
String ids = { "1, 2, 3" };

mContentResolver.delete(uri, MyTables._ID + " IN (?)", ids); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-02T15:06:58.597

```
String sqlCommand = String.format("DELETE FROM %s WHERE %s IN (%s);", TABLE_NAME, KEY_ID, 1,2,3);

db.execSQL(sqlCommand); 
```

# ruby-on-rails - Rails 3.2 - 自定义渲染方法返回数组中的部分源

> ID：11458708
> 
> 赞同：0
> 
> 时间：2012-07-12T18:55:23.560
> 
> 标签：ruby-on-rails

我有以下方法，`ApplicationController`以便我可以根据用户的权限加载独特的视图。当我在控制器中调用它时它工作正常，但是当我指定一个部分时，我得到了部分的源而不是渲染它。

```
class ApplicationController < ActionController::Base
  include ControllerAuthentication

  private

  def render(*args)
    options = args.extract_options!
    render_options = _normalize_render(*args)

    location = logged_in? && current_user.is_admin? ? "admin" : "client"

    options[:template] = "/#{location}/#{params[:controller]}/#{render_options[:action] || params[:action]}"

    if options[:partial]
      options[:partial] = "#{location}/#{params[:controller]}/#{options[:partial]}"
    end

    super(*(args << options))
  end
  helper_method :render

end 
```

`<%= render partial: "form" %>`在页面上输出类似的内容。

```
["<form ...>...</form>"] 
```

我一直在阅读[render 方法的源代码](https://github.com/rails/rails/blob/1eb6189404f53ae59e4cb47ef9d5ad3a9bec3064/actionpack/lib/abstract_controller/rendering.rb#L86)，但我还没有查明是什么原因造成的。我需要更改什么才能正确渲染部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:30:08.057

AbstractController::Rendering 中的 render 方法与 ActionView::Helpers 中定义的行为不同。你得到一个数组的事实是正常的，因为机架堆栈期望和可枚举的身体。

使用 helper_method :render 覆盖 ActionView::Helpers 中定义的渲染方法的实现。

我认为最好为您的控制器命名并提取模块或控制器中的通用功能（如果有），这些功能将用作每个角色的特定实现的基本控制器。

例如你可以有类似的东西：

```
namespace :admin do
  resources :posts
end

namespace :client do
  resources :posts
end 
```

用于此的控制器将位于 @

```
app/controllers/admin/posts_controller.rb
app/controllers/client/posts_controller.rb 
```

和意见

```
app/views/admin/posts/...
app/views/client/posts/... 
```

所以基本上你会达到同样的效果，但以一种更随意的方式，这也解决了视图问题。

# java - 如何在mac上找到正在运行的java进程的进程ID？

> ID：11458710
> 
> 赞同：12
> 
> 时间：2012-07-12T18:55:33.143
> 
> 标签：java, macos, web-applications, jetty, pid

我正在尝试在 Mac 上查找 java webapp 的 PID。更具体地说，我正在尝试查找在我的桌面上运行的 jetty webapp 的 PID。我尝试使用活动监视器并在线搜索均无济于事。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-12T18:57:57.773

您可以使用[jps](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jps.html)，Java 进程状态工具：

```
jps 
```

这将向您展示，例如：

```
13651 RemoteMavenServer 
```

在我的 Mac 上，jps 位于：

```
/usr/bin/jps 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-12T18:57:15.343

打开终端并输入`jps -v`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T18:57:22.997

尝试`ps aux | grep APP_NAME`在终端中使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T08:36:28.010

这对我有用

`pgrep -f jetty`

# javascript - 如何在不编码或保存数据的情况下将二进制数据从 javascript 传递到 actionscript（网页到 flash）？

> ID：11458717
> 
> 赞同：2
> 
> 时间：2012-07-12T18:55:49.340
> 
> 标签：javascript, xml, actionscript-3, sockets, externalinterface

情况：我正在尝试用 javascript 替换 Flash Socket 通信（字节范围），以避免 Flash 套接字安全策略文件限制。

详细信息：我有来自 javascript 的二进制数据，我可以通过 base64 编码/解码将其传递到闪存，但这太慢了。保存到磁盘并传递本地 url 不是一种选择（不仅是为了速度，而且客户端更喜欢内存中的所有内容，并且 swf 文件可能会被限制加载本地文件）。此外，不使用 base64 是行不通的，因为 flash 的 ExternalInterface 使用 XML（不是为承载二进制数据而设计的）将数据传递给 AS3。

问题：有没有什么方法可以在不写入磁盘而不是 bae64 编码的情况下从 JS 获取二进制数据到 AS3？

我知道动作消息格式（AMF），但它似乎增加了许多外部依赖项，并且可能仍然很慢？

注意：我的程序需要尽可能与浏览器兼容，并且它是由客户端下载的（因此需要很小），并且它还需要尽可能快地运行......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:34:45.043

我已经稍微修改了我对这个问题的想法：

没有**直接**的方法可以在 Flash 和 Javascript 之间发送二进制数据而不首先将其编组为基于文本的格式（即：base64 编码）。

正如 OP 所指出的，为了促进 Actionscript 和 Javascript 之间的通信，`ExternalInterface` [该类实际上将对象/数据编组为 XML 格式](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb2.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7caf)。因此，二进制数据需要通过这种转换为 XML。

**新想法**：当您使用`ExternalInterface`Flash 应用程序时，实际上会修改 DOM，添加将数据序列化/反序列化到 XML 的方法（需要参考，我已经阅读过但现在找不到）。从技术上讲，可以在 Javascript 中重新定义这些方法，并修复您在尝试传递二进制数据时看到的 XML 解析错误。您必须确定这些方法的名称（我记得它们以`__Flash__`或类似的开头）。

# apache-flex - 来自 iframe POST 的 Flex navigateToURL

> ID：11458722
> 
> 赞同：0
> 
> 时间：2012-07-12T18:56:01.097
> 
> 标签：apache-flex, internet-explorer, iframe, cross-domain

现在让我解释一下我当前的问题：

我有一个位于域 A 的 webapp。我们称之为 A-App。我从 A-App 打开一个 iframe，它指向域 B 上的 Flex 应用程序。我们将其称为 B-FlexApp。B-FlexApp 想要将一些数据发布到位于同一域中的另一个应用程序，我们将其称为 B-App。问题是在 IE 中，当 B-FlexApp 在 iframe 中打开时，B-FlexApp 和 B-App 之间的通信中断了。这只发生在 IE 中。

但是，在新窗口中打开 B-FlexApp 时，将数据发布到 B-App 就可以了。如何克服这一点？删除 iframe 是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:05:59.457

AS3 navigateToURL 和 IE 存在问题。您可以尝试调用 javascript 进行导航：我有一个小实用程序类来处理此问题：

```
//class URLUtil
package com 
{
    import flash.external.*;
    import flash.net.*;

    public class URLUtil extends Object
    {
        protected static const WINDOW_OPEN_FUNCTION:String="window.open";

        public function URLUtil()
        {
            super();
            return;
        }

        public static function openWindow(arg1:String = "", arg2:String="_blank", arg3:String=""):void
        {
            var browserName:String = getBrowserName();

            switch (browserName) 
            {
                case "Firefox":
                {
                    flash.external.ExternalInterface.call(WINDOW_OPEN_FUNCTION, arg1, arg2, arg3);
                    break;
                }
                case "IE":
                {
                    flash.external.ExternalInterface.call("function setWMWindow() {window.open(\'" + arg1 + "\');}");
                    break;
                }
                case "Safari":
                case "Opera":
                {
                    flash.net.navigateToURL(new URLRequest(arg1), arg2);
                    break;
                }
                default:
                {
                    flash.net.navigateToURL(new URLRequest(arg1), arg2);
                    break;
                }
            }
            return;
        }

        private static function getBrowserName():String
        {
            var str:String="";
            var browserName:String = ExternalInterface.call("function getBrowser(){return navigator.userAgent;}");
            if (!(browserName == null) && browserName.indexOf("Firefox") >= 0)
            {
                str = "Firefox";
            }
            else 
            {
                if (!(browserName == null) && browserName.indexOf("Safari") >= 0)
                {
                    str = "Safari";
                }
                else 
                {
                    if (!(browserName == null) && browserName.indexOf("MSIE") >= 0)
                    {
                        str = "IE";
                    }
                    else 
                    {
                        if (!(browserName == null) && browserName.indexOf("Opera") >= 0)
                        {
                            str = "Opera";
                        }
                        else 
                        {
                            str = "Undefined";
                        }
                    }
                }
            }
            trace("Browser: \t" + str);
            return str;
        }
    }
} 
```

你这样称呼它：

```
btn.addEventListener(MouseEvent.CLICK, onBTNClick);

function onBTNClick(evt:MouseEvent):void
{
    URLUtil.openWindow(YOUR_URL_STRING);
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:02:57.060

最好让浏览器实际执行“导航到 URL”功能，而不是 Flex。

例如，在包含 Flex 应用程序的页面中，该页面将包含一个 Javascript 函数调用 handleNavigationRequest(pageName, target)。在 Flex 应用程序中，您可以使用[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)并调用 handleNavigationRequest。

通过使用这种范例，Flex 应用程序将不必考虑外部实现（如框架设置等）的细节，并且您最终会获得更简洁且耦合更少的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T11:22:48.550

我发现我可以使用 swfObject 来嵌入 flash 对象，因此 iframe 实现完全没用。将 flash 组件嵌入覆盖中，而不是在 iframe 中打开它，可以使 IE 正常运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:50:34.327

我有同样的问题，我解决了它简单地将第二个参数（浏览器窗口）传递给函数： `navigateToUrl(url,"_blank");`，在我的例子中，我使用`"_blank"`.

它适用于 IE8 和 IE9。

戴维德

# c# - 如何等待合适的时机写作？

> ID：11458723
> 
> 赞同：4
> 
> 时间：2012-07-12T18:56:02.767
> 
> 标签：c#, serial-port, serial-communication

我正在尝试向我的 rs232 设备发送多个 SerialPort.Write 命令。但是，我认为它不能一次处理多个 WRITE 命令。

目前，我只是使用 Thread.Sleep(500) 来延迟 WRITE，但是有没有办法检测何时是发送的最佳时间？还是带缓冲？

示例代码

界面

```
private void btn_infuse_Click(object sender, RoutedEventArgs e) {
        cmd.SetTargetInfusionVolume(spmanager, double.Parse(tbox_targetvolume.Text));
        cmd.StartInfuse(spmanager);//cmd object of Command class
} 
```

命令类

```
public void StartInfuse(SPManager spm){
        spm.Write("RUN");//spm object of serialportmanager class
    }
    public void SetTargetInfusionVolume(SerialPortManager spm, double num) {
        spm.Write("MLT " + num.ToString());
    } 
```

SerialPortManager 类

```
 public void Write(string sData) {
        if (oSerialPort.IsOpen) {//oSerialPort object of SerialPort class
            try {
                oSerialPort.Write(sData + "\r");
            }
            catch { MessageBox.Show("error"); }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:37:26.053

如果您的串行端口设置（特别是如 Hans Passsant 提到的流量控制）是正确的，那么速度问题很可能是您的设备无法足够快地处理消息以跟上您发送的速度，或者它期望消息之间的“无声”间隙以描述它们。

在这种情况下，引入传输延迟的 Sleep() 是一种非常合理的方法。您需要找到一个合理的延迟，以保证设备成功处理您的消息，最好不要让您的应用程序停顿太久。

这通常涉及反复试验，但请查阅设备的文档，因为相当多的设备使用传输间隙来指示消息包的结束（例如，他们通常可能希望您在一个消息，例如，如果他们在 2400 bps 链路上指定 10 位的“静默时间”，这将对应于 10/2400 秒或刚刚超过 4 毫秒）。但是，这可能会受到 Windows 的影响，因为它倾向于缓冲数据（即它会在它上面挂起几毫秒，看看你是否要让它传输更多的东西）——因此你可能需要一个比让它工作严格要求的延迟要长得多——可能是 15-20 毫秒。当然，我可能找错了树，你可能会发现你需要 500 毫秒大的东西才能让它工作。

# python - 嵌套函数-Python

> ID：11458724
> 
> 赞同：-7
> 
> 时间：2012-07-12T18:56:02.957
> 
> 标签：python

我很难将 2 个函数嵌套到更大的函数中，以便这些函数将打开并读取文件并打印结果。没有错误，但结果显示为`None`。请让我知道如何改进代码。先感谢您！

```
import glob

#Read a result file and return a list
def read_results(filename):
    text_file=open(filename,"r")
    lines=text_file.readlines()
    return lines
    text_file.close()

#Give a list of results files in your directory    
def get_filename():
    filelist=glob.glob("./Data/*.*")
    return filelist

#Call above functions to get file names and read each file
def read_lines(filename):
    def get_filename()
        def read_results(): 
            print lines   

#main
function=read_results("./Data/GSM21203-GSM21215.csv")
print"\nHere's the lines of the text file:", function

#In order to use the strip method, it must be a str. Currently I am not using a         string.     Figure out how to do it

print"\n"

list_of_filenames=get_filename()
print"Here are the list of filenames:",list_of_filenames

read_each_file=read_lines("*.*")
print "Here are the contents of each file",read_each_file 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:59:07.380

你应该完全重新考虑你是如何做到这一点的。您的代码似乎表明您不了解函数在 Python 中的工作原理。例如，这个：

```
def read_lines(filename):
    def get_filename()
        def read_results(): 
            print lines 
```

. . . 创建三个函数，但不调用其中任何一个。

首先阅读[Python 教程](http://docs.python.org/tutorial/)。

# rspec - 使用占位符的 Rails/规范 fill_in

> ID：11458726
> 
> 赞同：9
> 
> 时间：2012-07-12T18:56:13.017
> 
> 标签：rspec

在我的 rspec 测试中，如何使用占位符填充文本字段。我不能使用 id 和 name，因为它们是为嵌套表单自动生成的。

```
<input class="input-medium inline" id="user_kids_attributes_new_1342116887461_first_name" name="user[kids_attributes][new_1342116887461][first_name]" placeholder="First Name" size="30" type="text"> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T16:34:24.447

还有另一种方式：

```
fill_in :placeholder => "Fill in some text", :with => "Text" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T23:41:52.953

占位符支持将在 Capybara 的下一版本中提供。现在，尝试：

```
find("input[placeholder='First Name']").set "value" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-09T14:41:25.823

`'Card number'`作为占位符

这应该可以工作，**除非**您尝试**在 iframe中填充输入**

在这种情况下：[https ://stackoverflow.com/a/53227758/1248725](https://stackoverflow.com/a/53227758/1248725)

```
fill_in('Card number', with: "#{arg1} #{arg2} #{arg3} #{arg4}") 
```

这

# aspectj - 如何为 Web 应用程序设置 AspectJ

> ID：11458733
> 
> 赞同：1
> 
> 时间：2012-07-12T18:56:58.893
> 
> 标签：aspectj

我是 AspectJ 的新手，想将 AspectJ 建议集成到运行在 weglogic 服务器上的现有 Web 应用程序中。

任何人都可以让我知道这样做需要什么。我正在查看文档，没有明确的说明。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T19:30:09.550

只需使用 waver 代理启动 weblogic：

-javaagent:/libs/aspectj-1.7.2/aspectjweaver.jar

不要忘记在类路径中包含 META-INF/aop.xml

同样重要的是，用于加载 aop.xml 文件的类加载器是 ear-class 加载器，因为除此之外，您必须在每个 WAR 或 EJB 模块中复制 aop.xml（每个模块都有自己的类加载器）来实现这一点将 aop.xml 文件放在：xxxEar/EarContent/APP-INF/classes/META-INF/aop.xml

# android - 如何打开.apk文件

> ID：11458734
> 
> 赞同：10
> 
> 时间：2012-07-12T18:56:58.893
> 
> 标签：android, apk, avd

是的，这似乎是一个菜鸟问题，但你如何打开 .apk 文件？我无法使用 AVD 管理器打开。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T19:00:18.900

APK 文件旨在供 Android 操作系统用于安装应用程序。如果您想在 android 手机/模拟器上使用一个，请从终端/命令行使用“adb install something.apk”。或者，您可以通过电子邮件将 apk 发送给自己，然后在设备上打开您的电子邮件并打开附件。

APK 文件基本上只是一个应用程序的包装，您也可以在 WinRAR 等程序或计算机上的其他解压缩/解压缩程序中打开一个以查看其内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-22T07:20:22.853

在 Windows 上，您必须将其重命名为 ZIP 并解压缩。

在 Linux 上，只需右键单击 APK 并将其解压缩。Linux 默认将其识别为存档文件。

在 Mac 上，我在重命名时遇到问题，因此我使用命令通过终端提取文件`unzip xyz.apk -d apkDir`（它将提取到 apkDir 目录中）

然后，您将看到无法打开（无需额外努力）的加密 Java 和 XML 文件。但是您将能够从`/assets`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-22T07:15:16.723

将您的 .apk 文件重命名为 .zip 文件.. 并尝试提取文件... 如果您使用的是 windows、mac、ubuntu，您可以按照此方法 **注意：提取 .apk 将帮助您找到它们中使用的图像应用程序。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T08:41:48.420

您可以使用 Bluestack 或 Geny 运动作为 APK 模拟器

# c++ - 通过 std::function 调用可变参数函数模板

> ID：11458737
> 
> 赞同：2
> 
> 时间：2012-07-12T18:57:12.803
> 
> 标签：c++, c++11, variadic-templates

我有一个可变参数模板函数声明如下：

```
template <typename ...Arguments>
double pricer(Arguments... params); 
```

具有针对不同参数类型的专业化。

通过单个`std::function`“包装器”调用模板特化的正确语法是什么？可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:28:29.947

您不能将模板函数与 to 绑定`std::function`，只能将模板函数的特定实例存储在那里。

# linux - Shell 脚本和字符串操作

> ID：11458741
> 
> 赞同：0
> 
> 时间：2012-07-12T18:57:24.940
> 
> 标签：linux, shell, tcsh

我正在尝试在 tcsh 上为 Linux 编写脚本。自 98 年以来，我还没有在 Unix 上编写过脚本，那是非常基本的东西。

我正在尝试获取一个字符串并在其中找到子字符串。例如，在一个很长的设备状态字符串中，我想找到一个子字符串“状态：”，如果找到所述子字符串，则读取该子字符串后面的下一个单词（字符串）。

基本上我有一个名为 INFO 的变量，它在发送命令后填充，我想搜索它。我当然可以遍历整个事情，但我知道有更短的方法可以这样做，我只是不记得如何了。

另外，如果有人知道对我有用的脚本编写信息的体面来源。

希望这是有道理的。PS如果这是我的选择，我会直接用代码编写并在昨天完成，但不是我的决定。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:47:57.513

这是一个很好的教程源，它有几个部分：[http ://www.dreamsyssoft.com/unix-shell-scripting/tutorial.php](http://www.dreamsyssoft.com/unix-shell-scripting/tutorial.php)

# python - Python中使用matplotlib的直方图

> ID：11458743
> 
> 赞同：0
> 
> 时间：2012-07-12T18:57:45.353
> 
> 标签：python, matplotlib, histogram

我正在尝试制作直方图，并且一直在进行一些搜索并尝试找到正确的代码，但是我尝试的所有方法最终都不起作用。这是我现在的代码，

```
import matplotlib.pyplot as plt
import numpy as np

with open('gaubg.csv') as f:
       v = np.loadtxt(f, delimiter= ',', dtype="float", skiprows=1, usecols='None')

plt.hist(v, bins=100)
plt.xlabel("G-r0")
plt.ylabel('# of stars')
plt.title("Bottom half g-r0")

plt.show() 
```

`gaubg.csv`是一个 csv 文件，包含大约 600,000 个（浮点数，而不是整数）数据点，这些数据点与星星的颜色有关。每次我通过 python 运行它时，这是显示的错误消息

> 回溯（最后一次调用）：文件“gaub.py”，第 5 行，在 v = np.loadtxt(f, delimiter= ',', dtype="float", skiprows=1, usecols='None') 文件中“/sdss/ups/prd/numpy/v1_6_1/Linux/lib/python2.7/sitepackages/numpy/lib/npyio.py”，第 794 行，在 loadtxt vals = [vals[i] for i in usecols] 类型错误：列表索引必须是整数，而不是 str

我不知道那是什么意思。我一直在尝试修复代码，但我不确定如何。如果您能指出明显的错误，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:58:52.957

```
usecols= 'None' 
```

应该

```
usecols= None 
```

或者您可以完全跳过添加`usecols`参数。当您指定一个字符串时，numpy 尝试遍历每个字符，并假设它是一个整数。

# excel - 根据行标题和单元格值返回列标题

> ID：11458744
> 
> 赞同：2
> 
> 时间：2012-07-12T18:57:49.410
> 
> 标签：excel, worksheet-function

我有以下数据网格：

```
 ---------Header 1   Header 2   Header 3   Header 4 

Row 1       x                    x          x
Row 2                  x         x
Row 3                            x          
Row 4       x          x         x          x 
```

然后我有第二张看起来像这样的表：

```
Row 1         Row 2        Row 3        Row 4 
```

我希望第二张纸最终看起来像这样：

```
 Row 1         Row 2        Row 3        Row 4
  Header 1      Header 2     Header 3     Header 1
  Header 3      Header 3                  Header 2
  Header 4                                Header 3
 .                                       Header 4 
```

忽略最后一段，我只是用它来正确格式化它。

我已经用 MATCH 和 INDEX 玩了几个小时，虽然我可以得到它的一部分，但我似乎无法让它们一起工作。

**编辑：**

我仅使用“Header 1”和“Row 1”作为示例。实际数据分别是 A 列和第 1 行中的文本。另外，由于源数据将被修改，我希望有一些可以自动更新第二张表的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:16:27.570

它必须使用工作表功能吗？创建一个宏来做会更简单（我做了一个例子）

编辑函数以使用 col a 中的行标题和第 1 行中的列标题，并将其更改为从“源”表读取并将结果写入“输出”表

```
Public Sub Example()
Dim Output As Worksheet
Dim Sheet As Worksheet
Dim Row As Integer
Dim Column As Integer
    Set Sheet = ThisWorkbook.Worksheets("Source")
    Set Output = ThisWorkbook.Worksheets("Output")
    Output.Cells.Clear ' Since were going to rebuild the whole thing, just nuke it.
    For Row = Sheet.UsedRange.Rows(Sheet.UsedRange.Rows.Count).Row To 2 Step -1
        Output.Cells(1, Row - 1).Value = Sheet.Cells(Row, 1).Value
        For Column = Sheet.UsedRange.Columns(Sheet.UsedRange.Columns.Count).Column To 1 Step -1
            If Not IsEmpty(Sheet.Cells(Row, Column)) Then
                Sheet.Cells(1, Column).Copy
                Output.Cells(2, Row - 1).Insert xlShiftDown
            End If
        Next Column
    Next Row
End Sub 
```

我看了看用工作表函数来做这件事，正如其他人所说，如果没有混合一些 vba，这样做会非常棘手。

如果将此添加到新模块，则可以将其作为工作簿功能进行访问。（并不是说这是最好的方法，只是想尝试一下）

```
'Return The Column Header of the Nth Non-Blank Cell on Specified Row
Public Function NonBlankByIndex(ByVal Row As Integer, ByVal Index As Integer) As Range
Dim Sheet As Worksheet
Dim Column As Integer
Dim Result As Range
    Set Sheet = ThisWorkbook.Worksheets("Source") ' Change to your source sheet's name
    Set Result = Nothing
    Column = 2 ' Skip 1 as its the header
    Do
        If Column > Sheet.UsedRange.Columns(Sheet.UsedRange.Columns.Count).Column Then
            Exit Do
        End If
        If Sheet.Cells(Row, Column) = "" Then
            Column = Column + 1
        Else
            If Index = 1 Then
                Set Result = Sheet.Cells(1, Column)
                Exit Do
            Else
                Column = Column + 1
                Index = Index - 1
            End If
        End If
    Loop
    Set NonBlankByIndex = Result
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:24:00.393

这是使用 VBA 函数的一种方法：

在开发人员选项卡（*）中单击 Visual Basic，然后单击那里的“插入”菜单并选择“模块”以插入新模块。然后粘贴以下代码：

```
Option Explicit

Public Function GetHeaderMatchingRow(RowText As String, _
                                    SearchRange As Range, _
                                    iHdrNo As Integer) As String
    Dim rng As Range
    Set rng = SearchRange

    Dim cel As Range

    'Get the Row to scan
    Dim i As Long, rowOff As Long
    For i = 2 To rng.Rows.Count
        Set cel = rng.Cells(i, 1)
        If cel.Value = RowText Then
            rowOff = i
            Exit For
        End If
    Next i

    'Now, scan horizontally for the iHdrNo'th non-blank cell
    Dim cnt As Integer
    For i = 2 To rng.Columns.Count
        Set cel = rng.Cells(rowOff, i)
        If Not CStr(cel.Value) = "" Then
            cnt = cnt + 1
            If cnt = iHdrNo Then
                GetHeaderMatchingRow = rng.Cells(1, i).Value
                Exit Function
            End If
        End If
    Next i

    GetHeaderMatchingRow = ""
End Function 
```

单击“调试”菜单并选择“编译 VBAProject”。

现在回到 Excel 并在您的第一个工作表中定义一个命名范围以覆盖网格中的所有数据。行名称应该是该范围的第一列，而标题文本应该是其中的第一行。

现在转到第二张表并在每个输出单元格中输入这样的公式：

```
=GetHeaderMatchingRow(A$1, RowHeaderRange, 1) 
```

其中第一个参数是它将尝试在范围的第一列中匹配的行文本。我在这里有“A$1”，因为在我的测试中，我的第二张表的列标题也是我第一张表中的行名，就像你的一样。

第二个参数是要搜索的范围（在这种情况下，我们之前定义的命名范围），第三个参数是它正在寻找的匹配的计数（第一个、第二个、第三个等）。

请注意，第一个和第三个参数应根据输出的列和行而改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T12:22:02.890

If you are happy with blanks in the listing try this in sheet2!A2:

=IF(INDEX(Sheet1!$B$2:$E$5,MATCH(A$1,Sheet1!$A$2:$A$5,0),ROW()-1)="x",INDEX(Sheet1!$B$1:$E$1,1,ROW()-1),"")

Just copy the formula over range A2:D5

# asp.net - 第二个循环运行一次并停止

> ID：11458747
> 
> 赞同：4
> 
> 时间：2012-07-12T18:57:56.733
> 
> 标签：asp.net, html, vb.net, asp-classic

这段代码背后的基本概念是，每当它运行时，来自一个元素的数量会减少，而来自同一元素但来自不同数组的数量会增加。无论出于何种原因，第二个 while 循环只运行一次并停止。例如，如果`total1 = 11`和`total2 = 0`，第一次执行代码时，`total1 = 10`和`total2 = 1`。然而在那之后，`total1 = 9`等等`total2 = 1`。谁能告诉我我的代码有什么问题？任何和所有的帮助将不胜感激。

```
<%
count = 0
do while NOT rs3.EOF
    if rs3("ITEM_NO") = itemnum then 
       qtyArray(count) = qtyArray(count) - qtyreq 
    end if
    if qtyArray(count) >= 0 and rs3("ITEM_NO") = itemnum then 
       total1 = total1 - qtyreq 
    end if
    count = count + 1
    rs3.MoveNext
loop
rs3.MoveFirst

pickcount = 0
do while NOT rs3.EOF
    if qtyPick(pickcount) >= 0 and rs3("ITEM_NO") = itemnum then 
        qtyPick(pickcount) = qtyPick(pickcount) + qtyreq
        total2 = total2 + qtyreq 
    end if
    rs3.MoveNext
    pickcount = pickcount + 1
loop
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:47:47.813

```
total2 = total2 + qtyreq 
```

请确保“qtyreq”变量不为 0，并且确实将 +1 添加到您的 total2 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T09:44:05.567

你的第二个循环上有一条线`pickcount = pickcount + 1`。只需将此行移到`rs3.MoveNext`第二个循环的行上方

# php - 按数组值排序

> ID：11458754
> 
> 赞同：0
> 
> 时间：2012-07-12T18:58:13.757
> 
> 标签：php, mysql, arrays

我有一个数组，我在 mysql fetch 数组循环中构造它。该数组包含以下值：

```
Array ( [0] => 1 Hour: 1.6
        [1] => 2 Hour: 2.3
        [2] => 3 Hour: 2.8
        [3] => 4 Hour: 3.7
        [4] => 8 Hour: 7.0 )

Array ( [0] => 2 Hour: 1.5
        [1] => 4 Hour: 2.9
        [2] => 8 Hour: 3.8
        [3] => 12 Hour: 5.0
        [4] => 24 Hour: 8.9 ) 
```

对给定持续时间的最便宜价格进行排序的最佳方法是什么，所以如果我选择一个小时，我仍然会得到第二个两个小时作为最便宜的返回。

更复杂的是，数组有时可能包含：

```
Array ( [0] => Free ) 
```

我正在考虑使用 getPrice(duration) 函数创建一个类，在我的循环中，我将声明一个新实例并添加一个指向全局数组的指针，然后最终循环遍历该全局数组中的每个项目以找到最便宜的。这个解决方案可行吗？还是有更好的选择？

```
while($row = mysql_fetch_array($results))
{
    $price = explode(';', $row['price']);
    print_r($price);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:10:39.470

您应该在这些值返回 PHP 之前对数据库进行排序，无需在 Web 服务器上做额外的工作。

对于“FREE”值，只需使用 MySQL 将它们变为 0，以便 ORDER BY 操作正常工作。

编辑：

虽然我觉得这里可能有一个更好的解决方案来讨论和调整 DB 范式，但我决定默认并提供 OP 以及他所追求的答案类型（提供的最少信息，我仍然认为这可能很接近） ：

```
$aData = array(
        array(
            '1 Hour: 1.6',
            '2 Hour: 2.3',
            '3 Hour: 2.8',
            '4 Hour: 3.7',
            '8 Hour: 7.0'),
        array(
            '2 Hour: 1.5',
            '4 Hour: 2.9',
            '8 Hour: 3.8',
            '12 Hour: 5.0',
            '24 Hour: 8.9'),
        array(
            '2 Hour: Free',
            '4 Hour: 5.9',
            '8 Hour: 3.5',
            '12 Hour: 6.0',
            '24 Hour: 7.9'),
        );

$aCheapest = array();

// iterate all rows
foreach($aData as $aInfo) {
    // iterate row items
    foreach($aInfo as $aRow) {
        // parse the duration and rate
        list($sRawDuration, $fRate) = explode(': ', $aRow);

        $iDuration = (int)str_replace(' Hour', '', $sRawDuration);
        if(strtolower($fRate) == 'free')
            $fRate = 0.0;
        else
            $fRate = (float)trim($fRate);

        // potentially update the cheapest rate for a duration
        if(!isset($aCheapest[$iDuration]))
            $aCheapest[$iDuration] = $fRate;
        else
            $aCheapest[$iDuration] = min($aCheapest[$iDuration], $fRate);
    }
}

var_dump($aCheapest); 
```

输出：

```
array(7) {
  [1]=>
  float(1.6)
  [2]=>
  float(0)
  [3]=>
  float(2.8)
  [4]=>
  float(2.9)
  [8]=>
  float(3.5)
  [12]=>
  float(5)
  [24]=>
  float(7.9)
} 
```

# build - 如何在 llvm 数据布局中抑制 128 位浮点数？

> ID：11458760
> 
> 赞同：1
> 
> 时间：2012-07-12T18:58:44.160
> 
> 标签：build, llvm

我将两个模块链接在一起（在 KLEE 中，但我认为这并不重要）并且 llvm 抱怨，因为它们似乎具有不同的数据布局：

> 警告：链接不同数据布局的两个模块！

我看了一下，结果发现第一个`libkleeRuntimeIntrinsic.bca`布局如下

```
e-p:64:64:64-i1:8:8-i8:8:8-i16:16:16-i32:32:32-i64:64:64-f32:32:32-f64:64:64-v64:64:64-v128:128:128-a0:0:64-s0:64:64-f80:128:128-n8:16:32:64 
```

而我自己`client.bc`的

```
e-p:64:64:64-i1:8:8-i8:8:8-i16:16:16-i32:32:32-i64:64:64-f32:32:32-f64:64:64-v64:64:64-v128:128:128-a0:0:64-s0:64:64-f80:128:128-f128:128:128-n8:16:32:64 
```

我比较了这些和后者有`f128:128:128`太多，根据[文档](http://llvm.org/docs/LangRef.html#datalayout)表明支持 128 位浮点数。

这些构建在具有相同版本并使用/`llvm-gcc`链接/归档的相同系统上。所有 llvm 版本 2.9（我的 llvm 配置为模式）。`llvm-ld``llvm-ar``Debug+Asserts`

这是什么原因，我怎样才能让第二个 ( `client.bc`) 具有相同的 daya 布局（即没有`f128:128:128`）？

# xml - 在coldfusion中难以解析xml

> ID：11458761
> 
> 赞同：1
> 
> 时间：2012-07-12T18:58:44.183
> 
> 标签：xml, coldfusion, coldfusion-8

我一直在尝试找出使用 Coldfusion 从 xml 文件中提取数据的最佳方法。xml文件比较简单，但是搞清楚这个问题。XML 数据如下所示：

```
<recordname>
<biols>Perennial </biols>
<biomd>
common </biomd>
<catcn>Tibetan Flora Images</catcn>
<catot>Photo</catot>
<darfm>Araliaceae</darfm>
<dargn>Aralia</dargn>
<darsn>Aralia apioides</darsn>
<comnm>qing ye long yan du he</comnm>
<mulmm0>
<mulmm>
<irn>10221626</irn>
</mulmm>
<mulmm>
<irn>10221629</irn>
</mulmm>
<mulmm>
<irn>10221631</irn>
</mulmm>
<mulmm>
<irn>10221633</irn>
</mulmm>
<mulmm>
<irn>10221636</irn>
</mulmm>
</mulmm0>
</record> 
```

* * *

我想将每个 mulmm irn 作为记录返回，并在该记录中包含相关的父信息，这样我就有 5 条带有 irn 的记录，并且每条记录中都是记录名称信息。最好的方法是什么？

我为这个简单的问题道歉 - 出于某种原因，这让我很困惑。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:18:44.597

不确定这是你想要的，但这是我的 2 美分：

```
<cfset myDoc ="<recordname>
<biols>Perennial </biols>
<biomd>
common </biomd>
<catcn>Tibetan Flora Images</catcn>
<catot>Photo</catot>
<darfm>Araliaceae</darfm>
<dargn>Aralia</dargn>
<darsn>Aralia apioides</darsn>
<comnm>qing ye long yan du he</comnm>
<mulmm0>
<mulmm>
<irn>10221626</irn>
</mulmm>
<mulmm>
<irn>10221629</irn>
</mulmm>
<mulmm>
<irn>10221631</irn>
</mulmm>
<mulmm>
<irn>10221633</irn>
</mulmm>
<mulmm>
<irn>10221636</irn>
</mulmm>
</mulmm0>
</recordname>">

<cfset myXML = XMLParse(myDoc)>

<cfset numRCItems = ArrayLen(myXML.recordname.XMLChildren)>
<cfset numMulmmItems = ArrayLen(myXML.recordname.mulmm0.XMLChildren)>

<cfset myQuery = QueryNew("irn, biols, biomd, catcn, catot, darfm, dargn, darsn, comnm") >
<cfset temp = QueryAddRow(myQuery, #numMulmmItems#)>

<cfloop index="i" from = "1" to = #numMulmmItems#>
    <cfset temp = QuerySetCell(myQuery, "irn", #myXML.recordname.mulmm0.mulmm[i].irn.XMLText#,#i#)>
        <cfloop index="j" from = "1" to = #numRCItems#>
            <cfif myXML.recordname.XMLChildren[j].XMLName IS NOT "mulmm0">
                <cfset temp = QuerySetCell(myQuery, myXML.recordname.XMLChildren[j].XMLName, #myXML.recordname.XMLChildren[j].XMLtext#,#i#)>    
            </cfif>
        </cfloop> 
</cfloop>

<cfdump var="#myQuery#" > 
```

# c++ - 得到钻石继承工作，但 Eclipse 仍然抱怨

> ID：11458762
> 
> 赞同：3
> 
> 时间：2012-07-12T18:58:45.170
> 
> 标签：c++, eclipse, diamond-problem

感谢您的关注。

我正在通过 C++ 中的软件模式来熟悉它，并且在基于接口的编程方面遇到了问题 - 即菱形问题。

情况如下：有一个`Widget`类派生一个`Button`类，每个类都有自己的接口类。类`Widget`有`foo`方法，`Button`类有`Widget`'`foo`方法和`bar`方法。

```
#include <iostream>
using namespace std;

class IWidget{
public:
    virtual void foo() = 0;
    virtual ~IWidget() {}
};

class IButton : virtual public IWidget{
public:
    virtual void bar() = 0;
    virtual ~IButton() {}
};

class CWidget : virtual public IWidget{
public:
    void foo(){ cout << "foo"; }
};

class CButton : public CWidget, public IButton{
public:
    void bar() { cout << "bar"; }
};

int main(){
    CButton button;
    button.foo();
    button.bar();
} 
```

所以问题是 CButton 不仅继承了`CWidget`'s `foo`，还继承了`IButton`'s （这是纯虚拟的）。`IButton`但是通过在and中使用虚拟继承`CWidget`，它可以编译并运行，将 'foobar' 打印到屏幕上。

但问题是 Eclipse 被标记`CButton button`为错误：

```
The type 'CButton' must implement the inherited pure virtual method 'IWidget::foo' 
```

这很奇怪，因为一切都按预期运行。这是 Eclipse 的语法检查器的问题吗？我知道这个问题还有其他解决方案，所以也许 Eclipse 试图告诉我我的方法不标准？

任何帮助将不胜感激。

编辑：我在 OSX Lion 上使用 gcc 4.2，以及最新版本的 Eclipse for c++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:34:48.767

对我来说它看起来很标准。我的参考资料是 Stroustrup 的“The C++ Programming Language”，第 3 版，15.2.5.1，关于菱形继承。他写道，“两个不同的类可能会覆盖来自虚拟基类的不同虚拟函数。这样，​​几个派生类可以为虚拟基类提供的接口贡献实现。” 他的示例与您的示例具有相同的结构。这是虚拟继承的重要组成部分。

# objective-c - Objective-C：如何将存储在数组中的所有数字相加？

> ID：11458763
> 
> 赞同：0
> 
> 时间：2012-07-12T18:58:47.747
> 
> 标签：objective-c

所以我正在制作一个程序，它将在 1000 下找到 3 和 5 的倍数。然后它将所有倍数存储到一个数组中。最终结果是将数组中的所有值相加并打印出来。到目前为止，这是我的代码。

```
NSMutableArray *sums = [NSMutableArray arrayWithCapacity:25];

int a,b,i;

for (i = 0; i <= 1000; i++){
    a = i%3;
    b = i%5;

    if (a==0 || b==0){

        [sums addObject:[NSNumber numberWithInteger:i]];

    }
}

NSLog(@"\nThe sum of all the multiples of 3 and 5 between 1 and 1000 is %i", ); 
```

我的问题是：如何将存储在数组“sums”中的所有值加在一起？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:03:39.607

```
NSNumber *sum = [sums valueForKeyPath:@"@sum.self"];
NSLog(@"\nThe sum of all the multiples of 3 and 5 between 1 and 1000 is %i", [sum intValue]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T19:02:02.780

**如何将存储在数组中的所有数字加在一起？**

您可以使用`enumerateObjectsUsingBlock:`例如：

```
int __block total = 0;

[myArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
    NSNumber *myNumber = (NSNumber*)obj;
    total += obj.intValue;
}];

NSLog(@"Total: %d", total); 
```

请注意您正在使用`NSNumbers`，如果您需要起诉，请`floats`进行相应调整。

# javascript - 提交并重定向到网页的带有两个变量的表单

> ID：11458767
> 
> 赞同：0
> 
> 时间：2012-07-12T18:58:56.233
> 
> 标签：javascript, forms, redirect, submit

我正在尝试创建一个带有两个下拉菜单的表单，用户需要从中进行选择，他们将提交它们，并且根据从两个下拉菜单中的选择，他们将被重定向到网页，我已经设法做了一些事情使用 if 语句，但我正在尝试使用更清洁的方式来做这件事。我尝试使用 case 语句，但无法使其正常工作。

请记住我对 JavaScript 还是很陌生

这是我到目前为止所做的：

```
 <form>
 <p> Type of Terrain: </p>

  <select id="type">
    <option value="0" id="Select">Select</option>
    <option value="1" id="Street_Park">Street/Park</option>
    <option value="2" id="Dirt">Dirt</option>
    <option value="3" id="Racing">Racing</option>
    </select>

    <p>Body Height</p>
    <select id="height">
    <option value="0" id="Select">Select</option>
    <option value="1" id="5ft">4ft</option>
    <option value="2" id="5.5ft">4.25ft</option>
    <option value="3" id="5.5ft">4.50ft</option>
    <option value="4" id="6ft">4.75ft</option>
    <option value="5" id="5ft">5ft</option>
    <option value="6" id="5.5ft">5.25ft</option>
    <option value="7" id="6ft">5.50ft</option>
    <option value="8" id="5ft">5.75ft</option>
    <option value="9" id="5.5ft">6ft</option>
    <option value="10" id="6ft">6.25ft</option>
    </select>

    <br /><br />

    <input  onclick="goToPage();"  type="button" value="Submit" />

    </form>

<script type="text/javascript">

function goToPage()
{
  var type = document.getElementById("type").value;
  var height = document.getElementById("height").value;

  switch ("type" && "height"){

    case type == 1 && height == 1 :

    window.location = "http://www.maltabmx.com/About.html"
    Break;

    case type == 1 && height == 2 :

    window.location = "http://www.maltabmx.com/Footage.html"
    Break;

  }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:20:30.773

您的 switch 语句语法有点偏离 - 用法如下：

```
switch (type){

  case "1":

    window.location = "http://www.maltabmx.com/About.html"
    break;

  case "2" :

    window.location = "http://www.maltabmx.com/Footage.html"
    break;
} 
```

您想在 switch() 语句中的表达式值之间做出选择。所以说我`switch(height)`每个“case”语句都需要是那个“height”变量的可能值，例如`case "20":`.

当您尝试使用多个条件做出合乎逻辑的决定时，请使用“if/else if”语句，因此我建议您这样做：

```
if(type == "1" && height == "1"){

   window.location = "http://www.maltabmx.com/About.html"
}
else if(type == "1" && height == "2"){

   window.location = "http://www.maltabmx.com/Footage.html"
} 
```

而不是开关。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:39:17.947

使用`switch`and时遇到一些问题`case`：

`switch`用于评估*单个*表达式，并且每个`case`考虑的都需要用于分析表达式的结果。

由于您正在查看两个变量，因此`if`/`else if`可能会更干净：

```
if (type==1 && height==1) { window.location = "http://www.maltabmx.com/About.html"; }
else if (type==1 && height==2) { window.location = "http://www.maltabmx.com/Footage.html"; } 
```

也就是说，如果您仍想使用`switch`，则可以，但您必须将一个嵌套在另一个中。我不建议这样做，因为它过于冗长，但在此处包含一个示例以帮助您了解您的选择。

```
switch (type) {
    case 1:
        switch (height) {
            case 1:
                window.location = "http://www.maltabmx.com/About.html";
            break;
            case 2:
                window.location = "http://www.maltabmx.com/Footage.html";
            break;
        }
    break;
    // other options...
    default:
        alert("You must select a type.");
    break;
} 
```

* * *

阅读回复评论后添加以下内容：

由于您有这么多组合，您可以使用`if`/ `else if`/`else`和`switch`语句的组合来组织它们。由于有大量的链接，它仍然会是一大段代码，但至少看起来会更干净一些。

```
var targetURL;
if (type==0) {
    switch (height) {
        case 1: targetURL = "http://www.maltabmx.com/About.html";
        case 2: targetURL = "http://www.maltabmx.com/Footage.html";
        /* and so on... */
    }
} else if (type==1) {
    switch (height) {
        case 1: targetURL = "...";
        case 2: targetURL = "...";
        /* etc... */
    }
} else if (type==2) {
    switch (height) {
        case 1: targetURL = "...";
        case 2: targetURL = "...";
        /* etc... */
    }
} else {
    switch (height) {
        case 1: targetURL = "...";
        case 2: targetURL = "...";
        /* etc... */
    }
}
targetURL ? window.location.href = targetURL : alert("Please choose a height."); 
```

既然您提到您仍然不熟悉 javascript，我将继续解释我添加的示例代码的其他几个部分。如果我重复您已经知道的事情，我深表歉意。

从您的 HTML 中，看起来 type 总是有一个值，所以我不使用 来结束`if`/`else if`块`else if (type==3)`，而是使用，`else`因为如果 type 不是 0、1 或 2，它必须是 3。通常使用`if`/是一种很好的做法`else (if)`声明在结尾有一个包罗万象，所以你的脚本总是做一些事情，即使结尾`else`只是说出了点问题。这样用户就不会坐在那里想知道是否应该发生某些事情。您可以通过在您的案例之后`switch`指定 a 在语句中执行相同的操作。`default`

我还使用了一个名为`targetURL`而不是在使用`window.location`的每一行上使用的变量`case`。当一个变量被初始化时没有像我一样的值（“ `var targetURL;`”），值变为`false`. 在脚本的最后，我有一些简洁的代码来评估 targetURL 是否为真。如果不是真的，它会显示选择高度的警报。在 javascript 中，只要变量的值不是`false`或，变量就会返回 true `0`。

（请注意，这是布尔假而不是字符串“假”；`var targetURL = "false";`带引号将返回真！）

我这样做是为了您不必键入`window.location`40 次，并且可以将错误处理（如果`height`不知何故没有值）放在一个地方而不是四个地方。

在那张纸条上，只是为了让您熟悉我刚刚讨论过的简洁语法：

```
targetURL ? window.location.href = targetURL : alert("Please choose a height."); 
```

...相当于：

```
if (targetURL) {
    window.location.href = targetURL;
} else {
    alert("Please choose a height.");
} 
```

您可以通过这种方式使简单`if`/`else`评估更加简洁。

希望这可以帮助！

# ios - 将 UILabel 的高度设置为 0

> ID：11458769
> 
> 赞同：1
> 
> 时间：2012-07-12T18:58:58.177
> 
> 标签：ios, animation, size, height, uilabel

我有一个 UILabel ，我想做的是将它的高度平滑地更改为 0。

```
CGRect newFrame = self.label1.frame;
newFrame.size.height = 0;

[UIView animateWithDuration:1.0 animations:^{

    self.label1.frame = newFrame;
}]; 
```

问题是动画干扰做了一些奇怪的事情。我猜这个标签正试图调整它的文本大小和重新定位它，这就是它不起作用的原因。我已经尝试过标签上所有可能的属性组合，但没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T19:10:28.797

您可以将您的封闭`UILabel`到另一个`UIView`中，将封闭`UIView` `autoresizesSubviews`的 ' 属性设置为`NO`and `clipToBounds`，`YES`然后为封闭的高度设置动画`UIView`......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T19:18:43.773

尝试转换。我为你挖出这段代码：

```
 //[self setAnchorPoint:CGPointMake(0.5, 1.0) forView:self.label];
    [UIView animateWithDuration:0.3 
                      delay:0
                    options:UIViewAnimationCurveEaseInOut 
                 animations:^{ 
                     //Scale the height to close to zero
                     //0.00001, because 0.0 behaves strange
                     self.label.transform = CGAffineTransformMakeScale(1, 0.00001);
                 } 
                 completion:^(BOOL finished) {
                     self.label.hidden = YES;
                 }]; 
```

这会将其缩小到中间。如果你想让它收缩到顶部或底部，你需要设置一个锚点。我也有一些代码：

```
- (void) setAnchorPoint:(CGPoint)anchorPoint forView:(UIView *)view {
CGPoint newPoint = CGPointMake(view.bounds.size.width * anchorPoint.x, view.bounds.size.height * anchorPoint.y);
CGPoint oldPoint = CGPointMake(view.bounds.size.width * view.layer.anchorPoint.x, view.bounds.size.height * view.layer.anchorPoint.y);

newPoint = CGPointApplyAffineTransform(newPoint, view.transform);
oldPoint = CGPointApplyAffineTransform(oldPoint, view.transform);

CGPoint position = view.layer.position;

position.x -= oldPoint.x;
position.x += newPoint.x;

position.y -= oldPoint.y;
position.y += newPoint.y;

view.layer.position = position;
view.layer.anchorPoint = anchorPoint;
} 
```

# regex - Perl - 在 csv 中搜索特定字符串并提取紧随其后的字符

> ID：11458771
> 
> 赞同：0
> 
> 时间：2012-07-12T18:59:05.987
> 
> 标签：regex, perl, parsing, csv

我有一个包含 2 列的 csv 文件：一个 ID 列和一个自由文本列。ID 列包含一个 16 个字符的字母数字 id，但它可能不是单元格中存在的唯一数据：它可能是一个空白单元格，或者一个仅包含 16 个字符 id 的单元格，或者包含一堆东西以及以下埋在其中 - “user_id=xxxxxxxxxxxxxxxxxx”

我想要的是以某种方式从具有它的单元格中提取 16 个字符的 id。所以我需要：（a）忽略空白单元格（b）提取整个单元格的内容，如果它只有一个连续的 16 个字符的字符串，中间没有空格（c）查找模式“user_id=”，然后提取紧随其后的 16 个字符

我看到很多用于模式匹配或查找/替换字符串等的 Perl 脚本，但我不确定如何在同一列上一个接一个地进行不同类型的解析/模式搜索和提取。您可能已经意识到，我对 Perl 还很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:44:52.353

我了解您希望 (1) 跳过不包含任何内容或不符合您的规范的行。(2) 如果它们是单元格的唯一内容，则捕获 16 个非空格字符。(3) 捕捉文字模式“user_id=”之后的 16 个非空格字符。

如果也可以捕获空格字符，如果它们遵循 " `user_id=`" 文字，您可以在适当的位置更改`\S`为。`.`

我的解决方案使用[Text::CSV](http://search.cpan.org/perldoc?Text%3a%3aCSV)来处理处理 CSV 文件的细节。您可以这样做：

```
use strict;
use warnings;
use autodie;
use open ':encoding(utf8)';
use utf8;
use feature 'unicode_strings';
use Text::CSV;
binmode STDOUT, ':utf8';

my $csv = Text::CSV->new( {binary => 1} ) 
    or die "Cannot use CSV: " . Text::CSV->error_diag;

while( my $row = $csv->getline( \*DATA ) ) {
    my $column = $row->[0];
    if( $column =~ m/^(\S{16})$/ || $column =~ m/user_id=(\S{16})/ ) {
        print $1, "\n";
    }
}

__DATA__
abcdefghijklmnop
user_id=abcdefghijklmnop
abcd fghij lmnop
randomdatAuser_id=abcdefghijklmnopMorerandomdata
user_id=abcd fghij lmnop
randomdatAuser_id=abcd fghij lmnopMorerandomdata 
```

在您自己的代码中，您不会使用`DATA`文件句柄，但我假设您已经知道如何[打开](http://perldoc.perl.org/functions/open.html)文件。

CSV 是一种看似简单的格式。不要将其高可读性与解析简单性混淆。处理 CSV 时，最好使用经过充分验证的模块来提取列。其他解决方案可能无法使用嵌入引号的逗号、转义逗号、不平衡引号以及我们的大脑在运行中为我们修复的其他异常情况，但这会使纯正则表达式解决方案变得脆弱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:14:11.810

好吧，我可以为您设置一个基本文件和正则表达式命令，这些命令可能会满足您的需求（对于不熟悉 perl 的人来说，这是一种基本格式）：

```
use strict;
use warnings;

open FILE "<:utf8", "myfile.csv";
#"slurp" the file into an array, each element is a line
my @lines = <FILE>;
my @idArray;
foreach my $line (@lines){
    #make two captures, the first we can ignore and both are optional
    $line =~ /^(user_id=|)([A-Za-z0-9]{16}|),/;
    #for display purposes, this is just the second captured group
    my $id = $2;
    #if the group actually has something in it, add it to your final array
    if($id){ push @idArray, $id; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:40:46.490

例如，在下一个示例中，只有第 2 行和第 3 行有效，因此在 cell1（column1）中是

*   字符串长度正好是 16 个字符，或者
*   有“user=16charshere”

任何其他都无效。

```
use 5.014;
use warnings;

while(<DATA>) {
    chomp;
    my($col1, @remainder) = split /\t/;
    say $2 if $col1 =~ m/^(|user=)(.{16})$/;
}
__DATA__
ToShort col2    not_valid
a123456789012345    col2    valid
user=b123456789012345   col2    valid
TooLongStringHereSoNotValidOne  col2    not_valid 
```

在此示例中，列是 TAB 分隔的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T19:12:57.287

请提供 (a) 一些可用于测试解决方案的示例数据，以及 (b) 请尝试提供您迄今为止为此问题编写的代码。

但是，您可能希望遍历表的所有行，然后`split`将其放入字段中，对某个字段执行所有操作，执行业务逻辑，然后将所有内容写回。

问题 (c) 由`$idField =~ /user_id=(.{16})/; my $id = $1;`

如果 user_id 总是出现在一行的开头，这可以解决问题：`for (<FILE>) {/^user_id=(.{16})/; ...}`

# php - 在文本输入的值属性中使用 htmlspecialchars

> ID：11458779
> 
> 赞同：2
> 
> 时间：2012-07-12T18:59:30.523
> 
> 标签：php, attributes, escaping, quotes, htmlspecialchars

我的问题与[这个](https://stackoverflow.com/questions/8369433/avoiding-double-encoding-in-input-while-using-htmlspecialchars)问题类似，但我没有使用代码点火器。我将从数据库获得的变量回显到文本输入的 value 属性中。变量可能包含 ' 或 " 或任何其他特殊字符。

我试过：

```
<input type="text" name="myTextInput" value="<?= htmlspecialchars($dbValue, ENT_QUOTES); ?>" /> 
```

但它将引号输出为`&quot;`或`&#039;`不是我想要的。我希望文本输入实际上包含用户键入的引号。

我应该使用 php 函数还是 javascript 函数来转义字符串？如果我不转义它，我会收到一个 javascript 错误，因为 $dbValue 字符串中的引号正在与值属性引号交互。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:05:16.767

然而，这正是你想要的。例如

如果您插入的数据是

```
Davy "Dead Pirate" Jones 
```

然后你将它插入到一个输入字段中，你最终会得到

```
<input type="text" name="..." value="Davy "Dead Pirate" Jones" /> 
```

这将被解释如下：

```
<input> field with attributes:
    text -> 'text'
    name -> '...'
    value -> ' '   (a single space)
    Dead -> 
    Pirate ->
    " ?   danging quote
    Jones ->
    " ? -> another dangling quote 
```

相比之下，在做了一个 html_entities 之后，你会有

```
 Davy &quot;Dead Pirate&quot; Jones 
```

`<input>`并且可以毫无问题地插入该字段。

如果输入字段的值包含`&quot;`对用户可见的文字，那么您将进行一些双重编码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T19:01:07.913

你会想要使用`html_entity_decode`. 这是文档的示例：

```
<?php
$orig = "I'll \"walk\" the <b>dog</b> now";

$a = htmlentities($orig);

$b = html_entity_decode($a);

echo $a; // I'll &quot;walk&quot; the &lt;b&gt;dog&lt;/b&gt; now

echo $b; // I'll "walk" the <b>dog</b> now
?> 
```

**参考**：[http ://www.php.net/manual/en/function.html-entity-decode.php](http://www.php.net/manual/en/function.html-entity-decode.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T19:02:22.893

您正在寻找 htmlspecialchars 的反面，请尝试使用 html_entity_decode。

这是您使用的代码`html_entity_decode`。

```
<input type="text" name="myTextInput" value="<?= html_entity_decode($dbValue, ENT_QUOTES); ?>" /> 
```

这是手册的链接-> [http://www.php.net/manual/en/function.html-entity-decode.php](http://www.php.net/manual/en/function.html-entity-decode.php)

如果您在使用它时遇到任何问题，您可能想查看这个问题，它有一个常见的编码问题-> [https://stackoverflow.com/a/4638621/1065786](https://stackoverflow.com/a/4638621/1065786)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-27T15:31:57.613

要将单引号、双引号和 html 标签显示为文本字段值，请尝试使用：

```
<?php
$formVal = htmlspecialchars($dbValue, ENT_COMPAT, 'utf-8');
// or this:
// $formVal = htmlspecialchars($dbValue);
?>

<!-- html -->
<form>
<input type="text" name="myTextInput" value="<?php echo $formVal; ?>" />
</form> 
```

[http://www.sitepoint.com/form-validation-with-php](http://www.sitepoint.com/form-validation-with-php)
[https://www.inanimatt.com/php-output-escaping.html](https://www.inanimatt.com/php-output-escaping.html)

# python - Python Glob.glob：根和目标之间的目录数的通配符

> ID：11458788
> 
> 赞同：6
> 
> 时间：2012-07-12T19:00:09.143
> 
> 标签：python, path, wildcard, glob

好的，我不仅在问题本身上遇到了麻烦，甚至在试图解释我的问题时也遇到了麻烦。我有一个由大约 7 次迭代组成的目录树，所以：`rootdir/a/b/c/d/e/f/destinationdir`

问题是有些可能有 5 个子目录级别，有些可能有多达 10 个，例如：

```
rootdir/a/b/c/d/destinationdir 
```

或者：

`rootdir/a/b/c/d/e/f/g/h/destinationdir`

他们唯一的共同点是目标目录总是被命名为相同的东西。我使用 glob 函数的方式如下：

`for path in glob.glob('/rootdir/*/*/*/*/*/*/destinationdir'):
--- os.system('cd {0}; do whatever'.format(path))`

但是，这仅适用于具有精确数量的中间子目录的目录。有什么办法让我不必指定那个数量`subdirectories(asterices)`; 换句话说，无论中间子目录的数量是多少，让函数到达destinationdir，并允许我遍历它们。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:41:04.787

我认为这可以通过以下方式更轻松地完成`os.walk`：

```
def find_files(root,filename):
    for directory,subdirs,files in os.walk(root):
        if filename in files:
            yield os.join(root,directory,filename) 
```

当然，这不允许您在文件名部分使用 glob 表达式，但您可以使用 regex 或 fnmatch 来检查这些内容。

**编辑**

或查找目录：

```
def find_files(root,d):
    for directory,subdirs,files in os.walk(root):
        if d in subdirs:
            yield os.join(root,directory,d) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T19:06:56.030

您可以为每个缩进级别创建一个模式（`10`如果需要增加）：

```
for i in xrange(10):
    pattern = '/rootdir/' + ('*/' * i) + 'destinationdir'
    for path in glob.glob(pattern):
        os.system('cd {0}; do whatever'.format(path)) 
```

这将迭代：

```
'/rootdir/destinationdir'
'/rootdir/*/destinationdir'
'/rootdir/*/*/destinationdir'
'/rootdir/*/*/*/destinationdir'
'/rootdir/*/*/*/*/destinationdir'
'/rootdir/*/*/*/*/*/destinationdir'
'/rootdir/*/*/*/*/*/*/destinationdir'
'/rootdir/*/*/*/*/*/*/*/destinationdir'
'/rootdir/*/*/*/*/*/*/*/*/destinationdir'
'/rootdir/*/*/*/*/*/*/*/*/*/destinationdir' 
```

如果您必须遍历任意深度的目录，那么我建议将算法分为两个步骤：一个阶段是调查所有“destinationdir”目录的位置，第二个阶段是执行操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T00:29:09.413

如果你正在寻找文件，你可以使用[Formic 包](http://pypi.python.org/pypi/formic)（披露：我写的）——它使用 '**' 通配符实现了 Apache Ant 的 FileSet Glob：

```
import formic
fileset = formic.FileSet(include="rootdir/**/destinationdir/*")

for file_name in fileset:
    # Do something with file_name 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-06T08:24:31.050

Python 3 [glob.glob](https://docs.python.org/3/library/glob.html)现在接受双通配符来指定任意数量的中间目录

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T19:34:03.130

这看起来更容易使用更通用的工具来完成，比如`find`命令（你的`os.system`调用表明你在一个类似 unix 的系统上，所以这会起作用）。

```
os.system('find /rootdir -mindepth 5 -maxdepth 10 -type d -name destinationdir | while read d; do ( cd $d && do whatever; ); done') 
```

..请注意，如果您要将任何用户提供的字符串放入该命令，这将变得非常不安全，您应该使用 subprocess.Popen 代替，执行 shell 并自己拆分参数。不过，如图所示，它是安全的。

# asp.net-mvc-3 - MVC 3 - 验证多行上的值

> ID：11458790
> 
> 赞同：1
> 
> 时间：2012-07-12T19:00:15.583
> 
> 标签：asp.net-mvc-3, validation

我有一个类似于此的 MVC 项目...

**模型**

```
Public Class ItemDetails

    Public Property SerialNo As Integer
    Public Property Description As String
    Public Property GroupNo As Integer
    Public Property Price As String
    Public Property Quantity As Integer

End Class 
```

**控制器**

```
Function ListItems() As ActionResult

    ' GetItems retrieves the items from the database
    Dim i As List(Of ItemDetails) = ItemsRepository.GetItems

    Return View(i)

End Function 
```

**看法**

```
@ModelType List(Of MyApp.ItemDetails)

@Using Html.BeginForm()
    Dim RowNo As Integer
    For i As Integer = 0 To Model.Count - 1
        RowNo = i

        @Html.HiddenFor(Function(model) model(RowNo).SerialNo)
        @Html.LabelFor(Function(model) model(RowNo).Description)
        @Html.HiddenFor(Function(model) model(RowNo).GroupNo)
        @Html.LabelFor(Function(model) model(RowNo).Price)
        @Html.TextBoxFor(Function(model) model(RowNo).Quantity)
    Next
End Using 
```

*注意：这是根据记忆完成的，因此可能不完全准确。*

如您所见，这显示了一个项目列表。从数据库中检索项目。每个项目都有一个描述和一个组号。用户可以输入他们想要订购的每个项目的数量。

两个或多个项目可以在同一个组中。例如，可能有：第 1 组中的第 1 项、第 1 组中的第 2 项、第 2 组中的第 3 项和第 3 组中的第 4 项。

当用户单击提交时，我想验证每个组号的组合数量不超过 10。因此，在上面的示例中，如果我为第 1 项输入的数量为 7，那么第 2 项的数量必须为 3 或更少。

我可以轻松地验证这个客户端。

验证此服务器端的最佳方法是什么（在哪里以及如何）？

*对于每个组号，我需要合计 Quantity 的组合值不超过 10，如果它确实显示错误。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:02:02.670

我个人使用[FluentValidation.NET](http://fluentvalidation.codeplex.com/)来完成这类任务。它允许您将给定视图模型的复杂验证规则定义到单独的层中，以流畅的方式表达它们，它[与 ASP.NET MVC 具有绝对奇妙的无缝集成，](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)并允许您对[验证逻辑](http://fluentvalidation.codeplex.com/wikipage?title=Testing&referringTitle=Documentation)进行独立的单元测试.

如果您不想使用第三方库，您可以随时编写自定义验证属性并用它装饰您的视图模型属性。您可以引入一个视图模型，该模型将包含`ItemDetails`作为属性的集合，然后使用您的自定义验证器装饰此属性。

```
public class ItemDetails
{
    public int SerialNo { get; set; }
    public string Description { get; set; }
    public int GroupNo { get; set; }

    // Please take a note that I have allowed myself
    // to use the decimal datatype for a property called
    // Price as I was a bit shocked to see String in your code
    public decimal Price { get; set; }

    public int Quantity { get; set; }
}

public class MyViewModel
{
    [EnsureMaxGroupItems(10, ErrorMessage = "You cannot have more than 10 items in each group")]
    public IList<ItemDetails> Items { get; set; }
} 
```

和验证属性本身：

```
[AttributeUsage(AttributeTargets.Property)]
public class EnsureMaxGroupItemsAttribute : ValidationAttribute
{
    public int MaxItems { get; private set; }

    public EnsureMaxGroupItemsAttribute(int maxItems)
    {
        MaxItems = maxItems;
    }

    public override bool IsValid(object value)
    {
        var items = value as IEnumerable<ItemDetails>;
        if (items == null)
        {
            return true;
        }

        return items
            .GroupBy(x => x.GroupNo)
            .Select(g => g.Sum(x => x.Quantity))
            .All(quantity => quantity <= MaxItems);
    }
} 
```

最后，您的控制器操作将与视图模型一起使用：

```
public ActionResult ListItems()
{
    var model = new MyViewModel
    {
        Items = ItemsRepository.GetItems()
    };
    return View(model);
}

[HttpPost]
public ActionResult ListItems(MyViewModel model)
{
    if (!ModelState.IsValid)
    {
        return View(model);
    }

    ...
} 
```

接下来是相应的强类型视图：

```
@model MyViewModel
@Html.ValidationSummary()
@using (Html.BeginForm())
{
    @Html.EditorFor(x => x.Items)
    <button type="submit">Go go go</button>
} 
```

最后一点是相应的编辑器模板，它将为 Items 集合的每个元素自动呈现，因此您甚至不需要编写 for 循环（`~/Views/Shared/EditorTemplates/ItemDetails.cshtml`）：

```
@model ItemDetails
@Html.HiddenFor(x => x.SerialNo)
@Html.LabelFor(x => x.Description)
@Html.HiddenFor(x => x.GroupNo)
@Html.LabelFor(x => x.Price)
@Html.TextBoxFor(x => x.Quantity) 
```

# tomcat - Apache Tomcat 为多个应用程序记录多个服务

> ID：11458792
> 
> 赞同：0
> 
> 时间：2012-07-12T19:00:48.240
> 
> 标签：tomcat, logging

我已将 Tomcat server.xml 配置为具有多个连接器：

```
 <Service name="Catalina">

<Connector port="8443" protocol="org.apache.coyote.http11.Http11NioProtocol" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           keystoreFile="C:\somekey.keystore" keystorePass="mykeypass"
           clientAuth="false" sslProtocol="TLSv1" />
<Engine name="Catalina" defaultHost="localhost">
  <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
         resourceName="UserDatabase"/>
  <Host name="localhost"  appBase="webapps"
        unpackWARs="true" autoDeploy="true"
        xmlValidation="false" xmlNamespaceAware="false">

    <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"  
           prefix="access_log." suffix=".txt" pattern='%h %l %u %t "%r" %s %b %p %D %S' resolveHosts="false"/>
  </Host>
</Engine> 
```

```
<Engine name="CatalinaA" defaultHost="localhost">

  <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
         resourceName="UserDatabase"/>

  <Host name="localhost"  appBase="webappsA"
        unpackWARs="true" autoDeploy="true"
        xmlValidation="false" xmlNamespaceAware="false">

    <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logsA"  
           prefix="access_log_A." suffix=".txt" pattern='%h %l %u %t "%r" %s %b %p %D %S' resolveHosts="false"/>

  </Host>
</Engine> 
```

我还部署了两个 Web 应用程序，一个在 webapps (APPP1) 中，另一个在 webappsA (APPP2) 中。
这是我的 logging.properties：

```
 handlers = 2APPP1.org.apache.juli.FileHandler, 3APPP2.org.apache.juli.FileHandler
    .handlers = 2APPP1.org.apache.juli.FileHandler, 3APPP2.org.apache.juli.FileHandler

    2APPP1.org.apache.juli.FileHandler.level = FINEST
    2APPP1.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
    2APPP1.org.apache.juli.FileHandler.prefix = APPP1.

    3APPP2.org.apache.juli.FileHandler.level = FINEST
    3APPP2.org.apache.juli.FileHandler.directory = ${catalina.base}/logsA
    3APPP2.org.apache.juli.FileHandler.prefix = APPP2.

    java.util.logging.ConsoleHandler.level = ALL
    java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

    ############################################################
    # Facility specific properties.
    # Provides extra control for each logger.
    ############################################################

    org.apache.catalina.core.ContainerBase.[Catalina].[/APPP1].level = INFO
    org.apache.catalina.core.ContainerBase.[CatalinaA].[/APPP2].level = INFO

    org.apache.catalina.core.ContainerBase.[Catalina].[/APPP1].handlers = 2APPP1.org.apache.juli.FileHandler
    org.apache.catalina.core.ContainerBase.[CatalinaA].[/APPP2].handlers = 3APPP2.org.apache.juli.FileHandler
            org.apache.catalina.level = WARNING 
```

日志被分开到不同的文件夹，两个应用程序的访问日志都可以，但是 Tomcat 日志将每个应用程序请求都记录到 APPP1.log 和 APPP2.log 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T21:16:41.987

通过包括以下行：

```
.handlers = 2APPP1.org.apache.juli.FileHandler, 3APPP2.org.apache.juli.FileHandler 
```

您正在将这两个文件处理程序分配给根记录器。与这些文件处理程序中的每一个关联的文件正在从默认记录器获取输出（即所有输出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:54:19.607

我将 logging.properties 放入每个应用程序的 WEB-INF/classes 中，并从 ApacheTomcat/conf/ 目录中删除了 logging.properties，一切都很顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:44:52.857

> 处理程序 = 2APPP1.org.apache.juli.FileHandler，3APPP2.org.apache.juli.FileHandler
> 
> .handlers = 2APPP1.org.apache.juli.FileHandler, 3APPP2.org.apache.juli.FileHandler

你的记录器注册了两次，所以他们被调用了两次。尝试只注册一次。

# android - PhoneGap + Android + jQuery Mobile - 连接到服务器不成功

> ID：11458793
> 
> 赞同：1
> 
> 时间：2012-07-12T19:00:55.680
> 
> 标签：android, jquery, json, jquery-mobile, cordova

我正在尝试使用 Phonegap（版本 1.9.0）和 jQuery Mobile（1.1.0）创建一个 Android（2.2）应用程序。具体来说，应用程序应该向现有 WCF REST 服务发送 GET 请求并检索 JSON 数据（文件夹列表）并将每个项目显示为选择下拉菜单中的选项。

现在，当我使用桌面浏览器时，所有这些都可以正常工作。WCF REST 服务发送正确的响应，浏览器正确呈现页面并将选项放入我想要的选择菜单中。但是，当我使用 Phonegap 在 Android 应用程序中使用以下代码时：

```
$.getJSON('http://xxx.xxx.xxx/MobileService.svc/GetFolders?callback=?', null, function (folders) {                  
    $.each( folders, function( i, folder ) {
        $("#folders").append("<option value='"+folder.Id+"'>"+folder.Name+"</option>");
    });
    $("#folders").selectmenu("refresh");
}); 
```

...当我启动 Android 应用程序（在物理设备上调试）时收到错误消息：

```
Connection to the server was unsuccessful. ("file:///android_asset/www/index.html") 
```

当我注释掉上面的 $.getJSON 代码时，应用程序加载正常，但选择菜单未填充。

我也注意到，显然因为Phonegap使用“file://”协议，它不受“http://”协议的“同源策略”的影响......我一直在使用JSONP我正在使用浏览器，这就是我有回调的原因。我不认为这应该是它失败的原因，但我不知道。任何帮助将不胜感激！

**我尝试过的事情：**

*   在 cordova.xml 中将访问源更改为“.*”

*   添加 'super.setIntegerProperty("loadUrlTimeoutValue", 60000);' 到活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:01:47.963

您可以尝试将您的 cordova.xml 设置为，`"*"`而不是在[入门指南](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)`".*"`中看到

甚至更好：

```
 http://xxx.xxx.xxx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:18:47.010

事实证明，在我的特殊情况下，问题归结为手机位于访客 wifi 网络上，该网络无法访问托管 REST 服务的网络，因此连接被阻止。

希望可以帮助某人

# c - 新手：将案例添加到 C 中的开关后，它会中断

> ID：11458794
> 
> 赞同：2
> 
> 时间：2012-07-12T19:00:58.893
> 
> 标签：c

```
switch(ch)
{
        //input a number
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
            if(check_original())
            {
                int y = g.y;
                int x = g.x;

                g.board[g.y][g.x] = ch - '0';
                draw_numbers();

                g.y = y;
                g.x = x;
                show_cursor();
             }

        // delete an input from the board
        case '0':
        case KEY_BACKSPACE:
        case KEY_DC:
            if(check_original())
            {
                    int y = g.y;
                    int x = g.x;

                    g.board[y][x] = 0;
                    draw_numbers();

                    g.y = y;
                    g.x = x;
                    show_cursor();
            }
} 
```

问题：案例 '1' 到案例 '9' 工作正常。然后我添加了 case '0'、case KEY_BACKSPACE 和 case KEY_DC。尽管它可以编译，但现在没有一个案例可以工作，包括案例 '1' - '9'。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T19:02:48.010

你所有的案子都失败了。我假设你应该有一个`break;`before `case 0:`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T19:03:03.977

您缺少一个`break;`. 在 C 中，`switch`具有贯穿语义。一旦满足一个案例，除非`break;`停止执行，否则所有后续案例都将被执行。

# c++ - 将二维数组的一行分配给一维矩阵

> ID：11458795
> 
> 赞同：0
> 
> 时间：2012-07-12T19:00:59.057
> 
> 标签：c++, gaussian

所以我有一个二维数组，我想将二维数组的第 'pth' 行分配给一个新的一维数组：我的代码如下所示：

```
float temp[] = { *aMatrix[p] }; // aMatrix is  a 10x10 array
                                // am trying to assign the pth row
                                // to temp. 

*aMatrix[p] = *aMatrix[max];

*aMatrix[max] = *temp;

float t = bMatrix[p];
bMatrix[p] = bMatrix[max]; 
```

在上面的声明之后， temp 的长度应该为 10，其中包含 aMatrix 的第 p 行的所有值，但它只包含一个值。我已经尝试了该语句的所有组合，但除了编译错误之外什么也没得到。

我的问题是完成这项任务的正确方法是什么？

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:12:39.607

看起来你有点混淆了指针。您不能使用简单的分配复制所有成员。C++ 不支持数组的成员分配。您应该像这样遍历元素：

```
float temp[10];

// copy the pth row elements into temp array.
for(int i=0; i<10; i++) {

   temp[i] = aMatrix[p][i]; 
} 
```

如果您的 aMatrix 可能在某些时候更改长度，您也可以使用第二种方式：

```
int aLength = sizeof(aMatrix[p]) / sizeof(float);

float temp[aLength];

// copy the pth row elements into temp array.
for(int i=0; i < aLength; i++) {

   temp[i] = aMatrix[p][i]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:26:54.697

为什么不使用`std::array`？与 C 风格的数组不同，它是可赋值的。

```
typedef std::array<float, 10> Row;

std::array<Row, 10> aMatrix;

Row temp = aMatrix[5]; 
```

# javascript - 使用回调强制同步函数执行

> ID：11458803
> 
> 赞同：0
> 
> 时间：2012-07-12T19:01:53.763
> 
> 标签：javascript, asynchronous

我有*一次*机会在页面的 DOM被设置样式、渲染和显示给用户*之前对其进行操作。*显然，我很乐意在这个窗口中做所有的动态有趣的事情，因为在页面呈现之后 DOM 操作非常昂贵。由于这主要针对移动设备，因此这种优化对我来说很有价值。

这是一个基本概述/时间表：

```
function CalledBeforePageRendered(){
    DoAsyncDataBaseWorkWithCallBack(AsyncDataBaseCallBack);
    DoLocalizationsAndOtherSYNCRONOUSActions();
}

function AsyncDataBaseCallBack(results){
    // code that processes the results element
    // code that manipulates the DOM *before* it's styled.
} 
```

问题是`DoAsyncDataBaseWorkWithCallBack`并`DoLocalizationsAndOtherSYNCRONOUSActions` 快速完成然后`CalledBeforePageRendered`返回并应用后续样式。

应用样式后，页面将显示给用户......然后`AsyncDataBaseCallBack`被调用，然后应用 div 标签和其他 DOM 修改。只是，我需要在风格化之前进行这些修改

有什么办法可以让' `CalledBeforePageRendered`'等待' `AsyncDataBaseCallBack`'完成后再返回？我知道闭包通常可以在这里工作，但我不知道如何使闭包与在`CalledBeforePageRendered`函数外部定义的回调一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:11:46.177

如果您尝试执行同步 JavaScript XmlHttpRequest (XHR) 调用 - 这是非常可能的，但假设您尝试在呈现页面之前在客户端操作 DOM - 为什么不在服务器端执行此操作（因为它首先生成 HTML）。如果不能，我强烈建议您不要在页面呈现之前执行同步 JavaScript XHR 来更新页面。这样做会在 XHR 运行时锁定浏览器窗口，这不仅会显着增加页面加载延迟 - 它还会让最终用户感到沮丧（因为他们遇到了看似硬“锁定”的情况）。在渲染之前操作 DOM 并没有*那么*昂贵。它'

再次 - 我只想强调 - 尝试在服务器端（而不是客户端）完成这项工作。如果您不能并且需要将其作为辅助调用执行 - 添加加载图像并让 XHR 像大多数 JavaScript 库一样异步运行，无论如何都会强制执行。如果我误解了你的目标，请告诉我。

# php - 除非被特定标签包围，否则替换字符

> ID：11458804
> 
> 赞同：0
> 
> 时间：2012-07-12T19:01:54.957
> 
> 标签：php, regex

首先，是的，我知道永远不应该使用正则表达式来解析 HTML，但是，在这种情况下，我正在获取一长串文本（实际上是 var_dump() 的输出）并使用几个正则表达式将其转换为 XHTML，所以我确切地知道我将要处理的标签。我序列中的最后两个正则表达式查找花括号并转换为 XHTML 片段。当花括号包含在字符串变量中时，它的效果很好，我`<var></var>`在之前的正则表达式的标签之间输出。

所以，目前，我正在使用：`/\s*{\s*/u`. `<var></var>`我需要做的是调整它以忽略标签中任何位置的任何花括号。

我试过使用：`/\s*{\s*(?!(?<!<var>)[^\{]*<\/var>)/u`但这不太正确。我还没有确定导致它无法正常工作的条件是什么。所以，我可能很接近这个正则表达式，或者我可能会走得很远。因此需要 SO 专业知识。谢谢你。

此外，如果这根本不可能，我可以做其他黑客攻击，即 base64_encode() 字符串，将其粘贴在`<var></var>`标签中，然后作为最后一个正则表达式，base64_decode() 任何被`<var></var>`标签包围的东西。我更愿意找到一个可用的正则表达式，更重要的是，只是好奇它是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:56:25.730

这*可能*有效：

```
\s*{\s*(?:(?!(?:.*?</var>))|(?=[^<]+<var>)) 
```

差不多，我改写了这个问题：`<var>`我只匹配可以证明在`<var>`. 因此，花括号在`<var>`if 之外：

1.  可以断言这是真的: `(?!(?:.*?</var>))`，它使用负前瞻来确保我们不会碰到结束`</var>`标签，**或者**
2.  可以断言这是真的: `(?=[^<]+<var>)`，它使用积极的前瞻来确保我们最终会在某个地方找到开始`<var>`标签。

嵌套标签肯定会失败`<var>`，但它似乎适用于我使用的测试用例。你可以在[RegExr](http://regexr.com?31h2a)上运行它并告诉我你的想法。

# php - PHP preg_replace_callback 正则表达式 (.*?) 匹配失败

> ID：11458810
> 
> 赞同：1
> 
> 时间：2012-07-12T19:02:13.173
> 
> 标签：php, regex, preg-replace-callback

我正在尝试用 PHP 中的正则表达式匹配/替换以下输入文本：

```
{#var1>var2}
  {#>empty}inside empty{#>empty}
  before rows
  {#>firstrow}inside firstrow{#>firstrow}
  {#>row}inside row{#>row}
  {#>lastrow}inside lastrow{#>lastrow}
  after rows
{#} 
```

其中 var1>var2 是一个数组：

```
$var1['var2'] = array('key1' => 'value1', 'key2' => 'value2', ...) 
```

我有以下类用正则表达式解析文本（使用 preg_replace_callback）：

```
class parse {

  public static function text($text) {
    $text = preg_replace_callback('/\{(#+)([a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*)((?:\>[a-zA-Z0-9_\x7f-\xff]*)*)\}\s*(\{\1\>empty\}\s*(.*?)\s*\{\1\>empty\})?\s*(.*?)\s*(\{\1\>firstrow\}\s*(.*?)\s*\{\1\>firstrow\})?\s*(\{\1\>row\}\s*(.*?)\s*\{\1\>row\})?\s*(\{\1\>lastrow\}\s*(.*?)\s*\{\1\>lastrow\})?\s*(.*?)\s*\{\1\}/s', array('parse', 'replace_array'), $text);
    return $text;
  }

  public static function replace_array($matches) {
    print_r($matches);
  }
} 
```

我得到（不正确的）输出：

```
Array (
  [0] => {#var1>var2>var3} {#>empty}inside empty{#>empty} before rows {#>firstrow}inside firstrow{#>firstrow} {#>row}inside row{#>row} {#>lastrow}inside lastrow{#>lastrow} after rows {#}
  [1] => #
  [2] => var1
  [3] => >var2
  [4] => {#>empty}inside empty{#>empty}
  [5] => inside empty
  [6] =>
  [7] =>
  [8] =>
  [9] =>
  [10] =>
  [11] =>
  [12] =>
  [13] => before rows {#>firstrow}inside firstrow{#>firstrow} {#>row}inside row{#>row} {#>lastrow}inside lastrow{#>lastrow} after rows
) 
```

当我从输入文本中删除“前行”时，我得到了正确的结果：

```
Array (
  [0] => {#var1>var2>var3} {#>empty}inside empty{#>empty} {#>firstrow}inside firstrow{#>firstrow} {#>row}inside row{#>row} {#>lastrow}inside lastrow{#>lastrow} after rows {#}
  [1] => #
  [2] => var1
  [3] => >var2
  [4] => {#>empty}inside empty{#>empty}
  [5] => inside empty
  [6] =>
  [7] => {#>firstrow}inside firstrow{#>firstrow}
  [8] => inside firstrow
  [9] => {#>row}inside row{#>row}
  [10] => inside row
  [11] => {#>lastrow}inside lastrow{#>lastrow}
  [12] => inside lastrow [13] => after rows
) 
```

我已经在寻找一天，我认为这将是一个有点愚蠢的问题，但我找不到它......有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T10:49:40.343

这对我有用：

```
\{(#+)([a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*)((?:\>[a-zA-Z0-9_\x7f-\xff]*)*)\}\s*(\{\1\>empty\}\s*(.*?)\s*\{\1\>empty\})?\s*([^\n]*)\s*(\{\1\>firstrow\}\s*(.*?)\s*\{\1\>firstrow\})?\s*(\{\1\>row\}\s*(.*?)\s*\{\1\>row\})?\s*(\{\1\>lastrow\}\s*(.*?)\s*\{\1\>lastrow\})?\s*(.*?)\s*\{\1\} 
```

据我所知（真的很难说）问题出在这部分

```
{\1\>empty\})?\s*(.*?)\s* 
```

特别是`(.*?)` 它不会匹配，`before rows`因为你正在使用`\s`标志。由于它是非贪婪的，所以`.`会在第一场比赛中停止，在这种情况下是换行符。

我所做的是将其替换为：

```
 {\1\>empty\})?\s*([^\n]*)\s* 
```

基本上告诉它给我除了换行符之外的所有东西，因为我在这里不能真正使用点运算符。

不确定我的推理是否 100% 正确，但我的模式应该如您在此处看到的那样有效。

[http://regex101.com/r/dS4fG9](http://regex101.com/r/dS4fG9)

# web-services - 是否有一个调试工具可以回显您的 HTTP 请求？

> ID：11458811
> 
> 赞同：1
> 
> 时间：2012-07-12T19:02:16.160
> 
> 标签：web-services, debugging, http

我发誓我看过一次：

一个仅回显所有传入请求的请求信息（标头、url、方法、参数等）的网站。

有点像[hurl.it的反面](http://hurl.it)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:56:08.513

找到它：[httpbin 是一个用于测试 http 客户端的 web 服务](http://httpbin.org)。

响应只是告诉您它收到的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:01:59.407

如果您想要一个桌面应用程序来执行此操作，您也可以尝试[Fiddler ！](http://www.fiddler2.com/fiddler2/)

# c++ - 跳出尝试块是否合法？

> ID：11458830
> 
> 赞同：6
> 
> 时间：2012-07-12T19:03:36.070
> 
> 标签：c++, standards

我有一些代码是从一个非常聪明的人那里继承而来的，他们喜欢使用 goto 离开 try 块，完全绕过 catch 块。

它确实有效，我怀疑这是合法的（我认为 C++ 标准说，在退出范围时，一切都会被正确清理，我认为这适用于编译器在我的平台上实现异常所必须做的任何事情） .

这真的合法吗？这不是我写过的东西（它太聪明了一半），但它显然有效，我只是想了解为什么这样可以。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T19:12:16.380

它可以是合法的，这取决于代码的作用。例如，我编写了从 catch 块中跳出的代码，它用于一种语言的运行时库（为简单起见，使用运行时库的代码没有实现安腾异常处理，而是使用 longjmp/setjmp 实现）。然而，运行时库通过 C++ 异常*确实*使用了它。并且需要一种机制来在它们之间干净地转移控制。

```
try {
  doSomethingThatMayFail();
} catch(DiagnosticException&) {
  goto unwind;
}

if(0) {
unwind:
  longjmp(&lastSafePoint, 0);
} 
```

我把它放在一个宏里，这样写起来很方便。这里`goto`有必要清理诊断异常的异常处理期间分配的资源。

与往常一样，不要说“永远不要使用此功能”。相反，每次使用都必须仔细考虑。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-12T19:08:21.703

标准说是的，它是合法且定义明确的：

## C++2003：6.6 跳转语句

> 在从范围退出时（无论如何完成），对于在该范围中声明的所有具有自动存储持续时间 (3.7.2) 的构造对象（命名对象或临时对象），按照其声明的相反顺序调用析构函数 (12.4)。转移出循环、转移出块或返回具有自动存储持续时间的初始化变量涉及销毁具有自动存储持续时间的变量，这些变量在转移点的范围内但不在转移点的范围内。（参见 6.7 中的转移到块）。[注意：但是，可以终止程序（例如，通过调用 exit() 或 abort()(18.3)）而不会破坏具有自动存储持续时间的类对象。]

我选择不首先评论使用的宗教含义`goto`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-12T19:12:35.490

甚至比 C++03 标准关于跳转语句的部分更具体，它在“异常处理”子句 (15/2) 中对 try-blocks 进行了说明：

> goto、break、return 或 continue 语句可用于将控制权转移到 try 块或处理程序之外。发生这种情况时，在 try 块中声明的每个变量都将在直接包含其声明的上下文中被销毁。

C++11 包含相同的措辞。

但是请注意，使用(or )跳转到 try 块是*不行*的：`goto``switch`

> 不应使用 goto 或 switch 语句将控制转移到 try 块或处理程序中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T19:07:13.653

这是合法的。这是糟糕的代码。不要这样做。不要使用`goto`.

# wordpress - 更改站点 URL 后无法访问 Wordpress wp-admin

> ID：11458833
> 
> 赞同：2
> 
> 时间：2012-07-12T19:03:42.953
> 
> 标签：wordpress

我已经在 Wordpress 管理面板 -> 设置 -> 常规中更改了站点 URL，`http://example.com/new_site`现在`http://example.com`每次尝试访问 wp-admin 页面时，`http://example.com/new_site/wp-admin`我`http://example.com/wp-admin`都会收到此错误：

> 致命错误：未捕获的 Kohana_Request_Exception [0]：无法找到匹配 URI 的路由：wp-login.php ~ SYSPATH/classes/kohana/request.php [674] 在 /system/classes/kohana/request.php 中抛出第 674 行

如何恢复以前的 URL？

恢复我的网站对我来说至关重要。

* * *

## **回答：**

[http://educhalk.org/blog/2008/12/changed-wordpress-blog-address-in-settings-locked-out-how-to-fix/](http://educhalk.org/blog/2008/12/changed-wordpress-blog-address-in-settings-locked-out-how-to-fix/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:17:38.200

Wordpress 默认情况下不这样做，所以我认为它必须是插件之一。尝试从 /wp-content/plugins/ 目录中删除一些最近安装的插件。Kohana 是一个完整的 php 框架，因此插件必须非常大。那是我要开始的。

# c# - 在 C# 中查找有关通过 USB 连接的所有串行设备的信息

> ID：11458835
> 
> 赞同：28
> 
> 时间：2012-07-12T19:03:51.063
> 
> 标签：c#, .net, serial-port, wmi

我的项目需要在连接到 USB 时检测特定设备。我可以识别此设备的唯一方法是通过它的描述/设备名称，而不是 com 端口。我发现执行正确功能的是使用 WMI 查询并检查 name 属性：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("Select * from WIN32_SerialPort");
            foreach (ManagementObject port in searcher.Get())
            {
                deviceName = (string)foundPort.GetPropertyValue("Name"); 
                ... 
```

我最初通过连接我的手机对此进行了测试，并且查询按预期返回了在 COM3 上找到的手机。然后，我连接了另一个设备（一个 USB 到串行转换器，它更类似于我需要这个项目的设备）并且查询根本没有找到它。它只会找到电话。但是，此设备确实显示在设备管理器中的端口 COM4 上。更让我恼火的是，SerialPort 类找到了两个设备，但它没有提供识别设备所需的信息：

```
 string[] tempPorts = SerialPort.GetPortNames(); 
```

我已经阅读了许多关于 SO 和其他地方的主题，但找不到令人满意的解决方案。有人可以澄清为什么 WIN32_SerialPort 查询找不到我的其他设备吗？由于某种原因，它不被认为是win32串口吗？而且，有人可以指出我解决这个问题的方向吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-14T10:24:41.537

## 如何列出所有串口：

有几个[系统定义的设备设置类](https://msdn.microsoft.com/en-us/library/windows/hardware/ff553426(v=vs.85).aspx)可供硬件供应商使用。正确编写的驱动程序`COM-Ports`应该使用`Ports (COM & LPT ports)`-class (guid: `4d36e978-e325-11ce-bfc1-08002be10318`)。可能这个类也被设备管理器使用。

因此，您可以使用以下查询列出您在设备管理器中看到的每个串行端口：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher(
    "root\\CIMV2",
    "SELECT * FROM Win32_PnPEntity WHERE ClassGuid=\"{4d36e978-e325-11ce-bfc1-08002be10318}\""
);
foreach (ManagementObject queryObj in searcher.Get())
{
    // do what you like with the Win32_PnpEntity
} 
```

[请参阅Win32_PnPEntity](http://msdn.microsoft.com/en-us/library/aa394353%28v=vs.85%29.aspx)类的详细说明。您应该拥有识别设备所需的一切。

为了确定端口号，我检查了 name 属性并提取它。到目前为止，这工作正常，但我不知道端口号是否保证包含在名称中。到目前为止，我还没有找到任何串行端口设备，它的名称中没有包含端口号。

上面的查询找到每一个串口设备，无论是蓝牙SPP、FTDI芯片、主板上的端口、扩展卡还是某些调制解调器驱动程序（即Globetrotter GTM66xxW）生成的虚拟串口。

要确定连接类型（蓝牙、USB 等），您可以检查 deviceid（查看 deviceid 的第一部分）。在那里您还可以提取 bt-mac 地址（请注意：设备 ID 至少在 Windows 7 和 Windows XP 上看起来不同）。

## 关于为什么某些设备没有与 Win32_SerialPort 一起列出：

我怀疑这取决于驱动程序的实现，因为我有一些 USB 设备列出了它们的端口，而另一些则没有。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T23:44:33.307

我想我知道你在做什么，看看这篇文章[http中使用 WMICodeCreator 制作的代码（链接到 WMICodeCreator](http://www.codeproject.com/Articles/32330/A-Useful-WMI-Tool-How-To-Find-USB-to-Serial-Adapto) [http://www.microsoft.com/en-us/download/details.aspx?id=8572 ）](http://www.microsoft.com/en-us/download/details.aspx?id=8572) [://www.codeproject.com/Articles/32330/A-Useful-WMI-Tool-How-To-Find-USB-to-Serial-Adapto](http://www.codeproject.com/Articles/32330/A-Useful-WMI-Tool-How-To-Find-USB-to-Serial-Adapto)

```
//Below is code pasted from WMICodeCreator
try
{
    ManagementObjectSearcher searcher =
        new ManagementObjectSearcher("root\\WMI",
        "SELECT * FROM MSSerial_PortName");

    foreach (ManagementObject queryObj in searcher.Get())
    {
        Console.WriteLine("-----------------------------------");
        Console.WriteLine("MSSerial_PortName instance");
        Console.WriteLine("-----------------------------------");
        Console.WriteLine("InstanceName: {0}", queryObj["InstanceName"]);

        Console.WriteLine("-----------------------------------");
        Console.WriteLine("MSSerial_PortName instance");
        Console.WriteLine("-----------------------------------");
        Console.WriteLine("PortName: {0}", queryObj["PortName"]);

        //If the serial port's instance name contains USB 
        //it must be a USB to serial device
        if (queryObj["InstanceName"].ToString().Contains("USB"))
        {
            Console.WriteLine(queryObj["PortName"] + " 
            is a USB to SERIAL adapter/converter");
        }
    }
}
catch (ManagementException e)
{
    MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-28T07:16:12.057

看到您要按“名称”搜索，我认为您需要遍历所有连接的设备并查询它们以获取产品名称。

下面是遍历 WinUSB 设备的代码：

[https://github.com/MelbourneDeveloper/Device.Net/blob/master/src/Device.Net/Windows/WindowsDeviceFactoryBase.cs](https://github.com/MelbourneDeveloper/Device.Net/blob/master/src/Device.Net/Windows/WindowsDeviceFactoryBase.cs)

```
 public async Task<IEnumerable<DeviceDefinition>> GetConnectedDeviceDefinitions(uint? vendorId, uint? productId)
    {
        return await Task.Run<IEnumerable<DeviceDefinition>>(() =>
        {
            var deviceDefinitions = new Collection<DeviceDefinition>();
            var spDeviceInterfaceData = new SpDeviceInterfaceData();
            var spDeviceInfoData = new SpDeviceInfoData();
            var spDeviceInterfaceDetailData = new SpDeviceInterfaceDetailData();
            spDeviceInterfaceData.CbSize = (uint)Marshal.SizeOf(spDeviceInterfaceData);
            spDeviceInfoData.CbSize = (uint)Marshal.SizeOf(spDeviceInfoData);

            var guidString = ClassGuid.ToString();
            var copyOfClassGuid = new Guid(guidString);

            var i = APICalls.SetupDiGetClassDevs(ref copyOfClassGuid, IntPtr.Zero, IntPtr.Zero, APICalls.DigcfDeviceinterface | APICalls.DigcfPresent);

            if (IntPtr.Size == 8)
            {
                spDeviceInterfaceDetailData.CbSize = 8;
            }
            else
            {
                spDeviceInterfaceDetailData.CbSize = 4 + Marshal.SystemDefaultCharSize;
            }

            var x = -1;

            while (true)
            {
                x++;

                var isSuccess = APICalls.SetupDiEnumDeviceInterfaces(i, IntPtr.Zero, ref copyOfClassGuid, (uint)x, ref spDeviceInterfaceData);
                if (!isSuccess)
                {
                    var errorCode = Marshal.GetLastWin32Error();
                    if (errorCode == APICalls.ERROR_NO_MORE_ITEMS)
                    {
                        break;
                    }

                    throw new Exception($"Could not enumerate devices. Error code: {errorCode}");
                }

                isSuccess = APICalls.SetupDiGetDeviceInterfaceDetail(i, ref spDeviceInterfaceData, ref spDeviceInterfaceDetailData, 256, out _, ref spDeviceInfoData);
                WindowsDeviceBase.HandleError(isSuccess, "Could not get device interface detail");

                //Note this is a bit nasty but we can filter Vid and Pid this way I think...
                var vendorHex = vendorId?.ToString("X").ToLower().PadLeft(4, '0');
                var productIdHex = productId?.ToString("X").ToLower().PadLeft(4, '0');
                if (vendorId.HasValue && !spDeviceInterfaceDetailData.DevicePath.ToLower().Contains(vendorHex)) continue;
                if (productId.HasValue && !spDeviceInterfaceDetailData.DevicePath.ToLower().Contains(productIdHex)) continue;

                var deviceDefinition = GetDeviceDefinition(spDeviceInterfaceDetailData.DevicePath);

                deviceDefinitions.Add(deviceDefinition);
            }

            APICalls.SetupDiDestroyDeviceInfoList(i);

            return deviceDefinitions;
        });
    } 
```

对于这些设备中的每一个，您都可以像这样查询设备：

[https://github.com/MelbourneDeveloper/Device.Net/blob/master/src/Usb.Net/Windows/WindowsUsbDevice.cs](https://github.com/MelbourneDeveloper/Device.Net/blob/master/src/Usb.Net/Windows/WindowsUsbDevice.cs)

```
 var isSuccess = WinUsbApiCalls.WinUsb_Initialize(_DeviceHandle, out var defaultInterfaceHandle);
        HandleError(isSuccess, "Couldn't initialize device");

        var bufferLength = (uint)Marshal.SizeOf(typeof(USB_DEVICE_DESCRIPTOR));
        isSuccess = WinUsbApiCalls.WinUsb_GetDescriptor(defaultInterfaceHandle, WinUsbApiCalls.DEFAULT_DESCRIPTOR_TYPE, 0, EnglishLanguageID, out _UsbDeviceDescriptor, bufferLength, out var lengthTransferred);
        HandleError(isSuccess, "Couldn't get device descriptor");

        if (_UsbDeviceDescriptor.iProduct > 0)
        {
            //Get the product name
            var buffer = new byte[256];
            isSuccess = WinUsbApiCalls.WinUsb_GetDescriptor(defaultInterfaceHandle, WinUsbApiCalls.USB_STRING_DESCRIPTOR_TYPE, _UsbDeviceDescriptor.iProduct, 1033, buffer, (uint)buffer.Length, out var transfered);
            HandleError(isSuccess, "Couldn't get product name");

            Product = new string(Encoding.Unicode.GetChars(buffer, 2, (int)transfered));
            Product = Product.Substring(0, Product.Length - 1);
        }

public static partial class WinUsbApiCalls
{
    public const uint DEVICE_SPEED = 1;
    public const byte USB_ENDPOINT_DIRECTION_MASK = 0X80;
    public const int WritePipeId = 0x80;

    /// <summary>
    /// Not sure where this constant is defined...
    /// </summary>
    public const int DEFAULT_DESCRIPTOR_TYPE = 0x01;
    public const int USB_STRING_DESCRIPTOR_TYPE = 0x03;

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_ControlTransfer(IntPtr InterfaceHandle, WINUSB_SETUP_PACKET SetupPacket, byte[] Buffer, uint BufferLength, ref uint LengthTransferred, IntPtr Overlapped);

    [DllImport("winusb.dll", SetLastError = true, CharSet = CharSet.Auto)]
    public static extern bool WinUsb_GetAssociatedInterface(SafeFileHandle InterfaceHandle, byte AssociatedInterfaceIndex, out SafeFileHandle AssociatedInterfaceHandle);

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_GetDescriptor(SafeFileHandle InterfaceHandle, byte DescriptorType, byte Index, ushort LanguageID, out USB_DEVICE_DESCRIPTOR deviceDesc, uint BufferLength, out uint LengthTransfered);

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_GetDescriptor(SafeFileHandle InterfaceHandle, byte DescriptorType, byte Index, UInt16 LanguageID, byte[] Buffer, UInt32 BufferLength, out UInt32 LengthTransfered);

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_Free(SafeFileHandle InterfaceHandle);

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_Initialize(SafeFileHandle DeviceHandle, out SafeFileHandle InterfaceHandle);

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_QueryDeviceInformation(IntPtr InterfaceHandle, uint InformationType, ref uint BufferLength, ref byte Buffer);

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_QueryInterfaceSettings(SafeFileHandle InterfaceHandle, byte AlternateInterfaceNumber, out USB_INTERFACE_DESCRIPTOR UsbAltInterfaceDescriptor);

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_QueryPipe(SafeFileHandle InterfaceHandle, byte AlternateInterfaceNumber, byte PipeIndex, out WINUSB_PIPE_INFORMATION PipeInformation);

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_ReadPipe(SafeFileHandle InterfaceHandle, byte PipeID, byte[] Buffer, uint BufferLength, out uint LengthTransferred, IntPtr Overlapped);

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_SetPipePolicy(IntPtr InterfaceHandle, byte PipeID, uint PolicyType, uint ValueLength, ref uint Value);

    [DllImport("winusb.dll", SetLastError = true)]
    public static extern bool WinUsb_WritePipe(SafeFileHandle InterfaceHandle, byte PipeID, byte[] Buffer, uint BufferLength, out uint LengthTransferred, IntPtr Overlapped);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-24T19:53:18.377

亚历克斯的回答真的帮助了我。但我不得不根据我的机器调整我的查询......

我必须查询“root\CIMV2”，但我必须从不同的表中选择所有行：“SELECT * FROM Win32_SerialPort”。

对于任何想弄清楚如何使用 WMI 或管理对象搜索器的人来说，Microsoft 的 WMI Code Creator 真的救了我。使用该应用程序，您可以查询 WMI 以获取不同的信息，以便确定要放入管理对象搜索器查询的内容。

链接可能会在未来到期，但它是在 2020 年：

[https://www.microsoft.com/en-us/download/details.aspx?id=8572](https://www.microsoft.com/en-us/download/details.aspx?id=8572)

# java - 映射到 json 对象

> ID：11458841
> 
> 赞同：0
> 
> 时间：2012-07-12T19:04:14.170
> 
> 标签：java, javascript, ajax, json

我正在尝试将通用类型的地图转换为 JSON 对象并将其发送到 UI，但我只得到父地图，其中的地图以字符串形式出现。

例子，

```
 JSONObject obj = new JSONObject();
      Map parent = new HashMap();
      parent.put("key1", "value1");
      Map child = new HashMap();
      child.put("childKey", "childValue");
      parent.put("map1", child);
      obj.put("result", parent);
      return obj.toString(); 
```

请忽略语法错误。上面的代码正确地给了我父地图

父 [key1] - value1

父 [map1] - 子

但是当我看到孩子像孩子一样像字符串一样出现时 - {childkey=childvalue}

我如何才能拥有子地图的数组或父地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:12:37.053

这里只是一个想法，但您可能想利用 Jackson JSON 库。他们的对象映射器和注释极大地简化了您处理 JSON 的方式，并且几乎将它与您的 POJO 分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:16:41.477

在 JSON 中，顶级对象没有被命名（因为它不是另一个对象的属性）。因此，您只需要添加另一个更高级别的对象（或数组）即可查看命名的父级（作为顶级对象的属性）。但是您生成的 JSON 已经是有效的，并且已经是我期望看到的 JavaScript 使用者。

# php - Xpath 查询包含

> ID：11458842
> 
> 赞同：1
> 
> 时间：2012-07-12T19:04:20.817
> 
> 标签：php, xml, xpath, simplexml

我有以下代码：

```
$xml = simplexml_load_file($url);

$query = '/root/parent[Model="Corolla"]';

//RUN QUERY ON XML
$xQuery = $xml->xpath($query); 
```

这是 XML 文件：

```
<root>
   <parent>
     <Model>Corolla A/C</Model>
   </parent>
</root> 
```

如果我正在搜索确切的字符串“Corolla”，则此代码效果很好。我遇到的问题是某些值类似于“卡罗拉 A/C 状况良好”

有没有一种方法可以查询包含单词 Corolla 而不是确切字符串 Corolla 的任何模型元素的 XML 文件？

编辑：我添加了我的 XML 帮助澄清的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:13:17.587

在这种特殊情况下，我建议使用`starts-with`函数而不是`contains`（假设您的所有模型都以“卡罗拉”一词开头）：

**编辑**

根据您的编辑，您必须将查询更改为：

```
/root/parent/Model[starts-with(., 'Corolla')] 
```

您还可以查看[Zvon XSLT 教程](http://www.zvon.org/xxl/XSLTutorial/Output/example46_ch12.html)。这是一本非常好的读物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:06:58.060

```
/root/parent[contains(@Model, 'Corolla')] 
```

请注意`@`Model... 上的...，这对于表明您正在使用`parent`标签的属性而不是某些 OTHER 标签是必要的，其名称恰好是`Model`.

# android - 如何在 Android 中通过 adb 启动应用程序

> ID：11458843
> 
> 赞同：0
> 
> 时间：2012-07-12T19:04:29.003
> 
> 标签：android, shell

> **可能重复：**
> [如何在相机中启动视频图标](https://stackoverflow.com/questions/11458209/how-to-launch-video-icon-in-camera)

我正在尝试通过我的 Android 手机中的 adb 启动应用程序。我试过了`adb getevent`。但它转储了这么多事件。

我怎样才能确定我需要哪一个？有没有其他方法可以启动应用程序？

我正在寻找发布视频。没有单独的视频 apk。它仅在相机 apk 中。我能够通过 adb 启动相机：

`am start -a android.intent.action.MAIN -n com.android.camera/.CameraEntry`

摄像机图标位于相机中的快照图标旁边。我能够通过输入 keyevent 23 控制快照图标。但无法弄清楚如何启动快照图标旁边的视频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:16:17.550

简短的回答，不，就你所能得到的，以这种方式启动一个活动，但不能从 adb 本身控制 UI。

长答案，Android 禁止将事件作为安全措施注入活动，这实际上是一件好事，否则由于注入事件并导致应用程序在手机在你不知情的情况下做事。

此外，注入事件的使用需要 ROM 的签名密钥来启用该功能。

***编辑：***

在与@MichaelHampton 对此发表评论后，理论上，可以使用 ROM 自己的猴子程序来发送击键等，毕竟猴子程序是用 ROM 的安全密钥签名的，这可能是一个知道什么的问题命令调用并传递给猴子程序，通过炮击并反过来将其引导到所述活动......？它的理论......没有尝试过，也没有考虑更多......

# graphics - 开罗的文字旋转

> ID：11458849
> 
> 赞同：3
> 
> 时间：2012-07-12T19:04:40.177
> 
> 标签：graphics, cairo

我想在开罗旋转文本，因为我正在使用函数 :`cairo_rotate(m_cr, angle)`来旋转角度弧度。现在要取消设置开始正常文本渲染的角度，我应该调用`cairo_rotate(m_cr, - angle) function or cairo_rotate(m_cr, 0.0)`，我的意思是 cairo 中的旋转是累积的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:05:07.770

旋转（和所有其他变换）是累积的。

但是，恕我直言，使用起来更好，`cairo_save(cr); cairo_rotate(cr, angle);`然后再`cairo_restore(cr);`撤消效果。这也适用于其他类型的转换，重置当前剪辑和当前源。事实上，`cairo_restore`恢复除了当前路径之外的所有内容。

# vb.net - 如何将串口通信读入缓冲区并解析出完整的消息

> ID：11458850
> 
> 赞同：6
> 
> 时间：2012-07-12T19:04:40.543
> 
> 标签：vb.net, serial-port

我正在使用以下代码从 com 端口读取值：

```
Private port As New SerialPort("COM13", 9600, Parity.None, 8, StopBits.One)

Private Sub port_DataReceived(ByVal sender As Object, ByVal e As SerialDataReceivedEventArgs)
    Debug.Print(port.ReadExisting())
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    AddHandler port.DataReceived, New SerialDataReceivedEventHandler(AddressOf port_DataReceived)
    port.Open()
End Sub 
```

这工作得很好，但时不时地它不会获取所有数据，并且返回结果是两个字符串而不是一个。

一个例子是，如果 com 端口通过单词“HELLO2YOU”发送它看起来像：

```
HEL
LO2YOU 
```

或者

```
HELLO2
YOU 
```

我如何在其中放置一个缓冲区，以确保在显示之前读取所有数据？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T19:13:26.990

您必须将串行端口通信视为流数据。每当您收到数据时，您都必须期望它可能是完整的消息、仅是部分消息或多条消息。这完全取决于数据进入的速度以及应用程序能够从队列中读取的速度。因此，您认为需要缓冲区是正确的。但是，您可能还没有意识到，严格来说，无法通过串行端口知道每条消息的开始和结束位置。这必须通过发送方和接收方之间商定的协议来处理。例如，许多人使用标准的文本开始 (STX) 和文本结束 (ETX) 字符来指示每条消息发送的开始和结束。这样，当您收到数据时，您就可以知道您何时收到了完整的消息。

例如，如果你使用 STX 和 ETX 字符，你可以创建一个这样的类：

```
Public Class DataBuffer
    Private ReadOnly _startOfText As String = ASCII.GetChars(New Byte() {2})
    Private ReadOnly _endOfText As String = ASCII.GetChars(New Byte() {4})

    Public Event MessageReceived(ByVal message As String)
    Public Event DataIgnored(ByVal text As String)

    Private _buffer As StringBuilder = New StringBuilder

    Public Sub AppendText(ByVal text As String)
        _buffer.Append(text)
        While processBuffer(_buffer)
        End While
    End Sub

    Private Function processBuffer(ByVal buffer As StringBuilder) As Boolean
        Dim foundSomethingToProcess As Boolean = False
        Dim current As String = buffer.ToString()
        Dim stxPosition As Integer = current.IndexOf(_startOfText)
        Dim etxPosition As Integer = current.IndexOf(_endOfText)
        If (stxPosition >= 0) And (etxPosition >= 0) And (etxPosition > stxPosition) Then
            Dim messageText As String = current.Substring(0, etxPosition + 1)
            buffer.Remove(0, messageText.Length)
            If stxPosition > 0 Then
                RaiseEvent DataIgnored(messageText.Substring(0, stxPosition))
                messageText = messageText.Substring(stxPosition)
            End If
            RaiseEvent MessageReceived(messageText)
            foundSomethingToProcess = True
        ElseIf (stxPosition = -1) And (current.Length <> 0) Then
            buffer.Remove(0, current.Length)
            RaiseEvent DataIgnored(current)
            foundSomethingToProcess = True
        End If
        Return foundSomethingToProcess
    End Function

    Public Sub Flush()
        If _buffer.Length <> 0 Then
            RaiseEvent DataIgnored(_buffer.ToString())
        End If
    End Sub
End Class 
```

我还应该提到，在通信协议中，通常有一个校验和字节，您可以通过该字节确定消息在发送方和接收方之间的传输过程中是否损坏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T19:14:50.323

这是很正常的，串口是非常慢的设备。使用像 9600 这样的波特率并且机器不会陷入太多困境，当您使用 ReadExisting() 时，您只会从端口获得一两个字节。Debug.Print() 输出一个行终止符，因此您会看到收到的任何内容都被分解成碎片。

修复它的最简单方法是改用 ReadLine()。这要求设备在行尾发送一个特殊字符，该字符与 SerialPort.NewLine 属性值匹配。这很常见，换行符是样板。

如果没有，那么您将需要某种其他类型的缓冲方案。

# asp.net - asp.net Web 表单和 Web API

> ID：11458852
> 
> 赞同：0
> 
> 时间：2012-07-12T19:04:45.387
> 
> 标签：asp.net, webforms, asp.net-web-api

我需要使用 .Net Web API 构建一个 Web 服务来处理 HTTP 表单帖子 (CRUD)

虽然我知道 API 可以在 WebForms 下运行，但我之前听说过这种类型的东西（参见“动态数据”），然后在现实中遇到了对功能变通、限制等的需求。

有没有人在 Web Forms 下使用 Web API for CRUD？有什么问题吗？

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:13:35.243

这工作得很好。[http://blogs.msdn.com/b/henrikn/archive/2012/02/23/using-asp-net-web-api-with-asp-net-web-forms.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/02/23/using-asp-net-web-api-with-asp-net-web-forms.aspx)上的帖子有一个步骤-有关如何使其工作的分步指南。正如您在其中一条评论中所说，ASP.NET Web API 可以在 MVC4 之外使用，最简单的方法是使用 NuGet 仅下载 Web API 包。[http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/12/creating-asp-net-web-apis-on-azure-web-sites.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/12/creating-asp-net-web-apis-on-azure-web-sites.aspx)上的帖子就是这样做的（它显示了 Web API 在空 Web 应用程序中使用，但同样适用于 Web 表单）。

# android - MonoDroid - StartService 中的线程异常

> ID：11458854
> 
> 赞同：0
> 
> 时间：2012-07-12T19:04:49.300
> 
> 标签：android, .net, multithreading, mono, xamarin.android

我要求这样做是为了更深入地了解 Mono for Android，并在支持我的移动应用程序时做好更好的准备......

我注意到，当从“主启动器”活动中启动的工作线程调用 StartService 时，服务的 OnStartCommand 中的线程 ID 与活动线程 ID（1）相同，而不是启动它的工作线程 ID（ 3）。

这是一个更抽象的表示：

```
myActivity : Activity
{
  OnCreate
  {
    print_thread_id()  // 1

    start(thread_func) 
  }

  thread_func() 
  {
    print_thread_id()  // 3 (not 2!, but anyway ...)

    StartService(myService)
  }
}

myService : Service
{
  OnStartCommand
  {
    print_thread_id()   // 1 also!!!
  }
} 
```

我还注意到在我的工作线程 thread_func 中，即使服务继续运行，StartService 也会返回。我认为对 StartService 的调用会阻塞，直到 myService 退出。

为什么 myService.OnStartCommand 中的线程 ID 与 thread_func 的不同，thread_func 的父级不是调用 StartService 的地方吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:34:23.673

我没有看到你描述的行为。新线程中的方法准确地报告了自己的 id。这是一个非常简单的类，可以帮助您解决环境中的差异：

```
namespace ThreadTest
{
    [Activity (Label = "ThreadTest", MainLauncher = true)]
    public class Activity1 : Activity
    {
        int count = 1;

        protected override void OnCreate (Bundle bundle)
        {
            base.OnCreate (bundle);

            SetContentView (Resource.Layout.Main);

            MyService service = new MyService();
            Console.WriteLine("First Thread id: " + Thread.CurrentThread.ManagedThreadId);
            Thread oThread = new Thread(new ThreadStart(service.StartCommand));
            oThread.Start();
        }
    }

    public class MyService : Android.App.Service
    {
        public override IBinder OnBind(Intent intent)
        {
            return null;
        }
        public void StartCommand()
        {
            Console.WriteLine("New Thread id: " + Thread.CurrentThread.ManagedThreadId);
        }
    }
} 
```

输出是：

第一个线程 ID：1

新线程 ID：4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:34:02.480

谢谢joates...我可能对正确使用服务有误解。这是我正在做的事情：

```
namespace ThreadTest  
{  
  [Activity (Label = "ThreadTest", MainLauncher = true)]  
  public class myActivity : Activity  
  {
    protected override void OnCreate(Bundle savedInstanceState)
    {
      base.OnCreate(savedInstanceState);
      SetContentView(Resource.Layout.Main);

      Console.WriteLine("Main Thread id: " + Thread.CurrentThread.ManagedThreadId); 

      Thread serviceWorker = new Thread(new ThreadStart(serviceThread));
      serviceWorker.Start();
    }

    private void serviceThread()
    {
      Console.WriteLine("Child Thread id: " + Thread.CurrentThread.ManagedThreadId); 

      StartService(new Intent(this, typeof(myService)));
    }
  }

  public class myService : Service
  {
    public override IBinder OnBind(Intent intent)
    {
      throw new NotImplementedException();
    }

    public override StartCommandResult OnStartCommand(Intent intent, StartCommandFlags flags, int startId)
    {
      Console.WriteLine("Service Thread id: " + Thread.CurrentThread.ManagedThreadId); 
    }
  }
} 
```

这是错误的，还是只是一种不同的方法？如果要使用 StartService 方法来启动服务，而不是在上面如何启动它，这会是正确的方法吗？

按照您建议的方式，您将服务对象的方法分配给主活动中的工作线程，然后通过 ThreadStart() 启动它。我的方法实际上是通过 StartService 启动服务本身（我从子线程中调用的唯一原因是 UI 不会被阻塞，而不是 b/c 是必需的）。

我提出的方式似乎是正确的，因为我让 adroid/mono 管理服务的加载和调用（StartService 最终将导致覆盖 OnStartCommand 被调用）。我不确定您的方式是否真的会导致显式创建服务（尽管我将对此进行测试），我知道用我的方法是有的。

您认为哪种方式更“正确”？

# wix - WIX 中非管理员用户的 Appdata 文件夹中未提供文件

> ID：11458856
> 
> 赞同：0
> 
> 时间：2012-07-12T19:04:57.427
> 
> 标签：wix

我已经在我的 wix 安装程序的 APPDATA 位置发送了一些文件。我正在使用下面的代码。在管理员模式下运行安装程序时，它会在该位置安装 txt 文件。但该文件不提供给非管理员用户。请帮我解决这个问题。</p>

```
<CustomAction Id="PropertySource" Property="APPPATH" Value="[LocalAppDataFolder]APP1\APP2" /><Directory Id="APPPATH">
<Directory Id="Application">
    <Component Id="comp_txt" Guid="{10E0A568-3E37-49BD-A70B-8D7F63A17011}">
        <File Id="file_234487642387111122391332" Source="..\..\..\App.txt" />
    </Component>
</Directory></Directory> 
```

在 InstallExecuteSequence 和 InstallUISequence 下

`<Custom Action="PropertySource" Sequence="1278" />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:20:53.957

LocalAppDataFolder 已经是一个有效的目录 ID。您不需要自定义操作或 APPDATA 属性。只需以常规方式将 app1 和 app2 定义为 LocalAppDataFolder 的子目录，即通过嵌套 Directory 元素。

```
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="LocalAppDataFolder">
        <Directory Id="app1folder" Name="App1">
            <Directory Id="app2folder" Name="App2" />
        </Directory>
    </Directory>
</Directory> 
```

然后将您的组件安装在所需的文件夹中：

```
<DirectoryRef="app2folder">
    <Component Id="App.txt">
        <File Source="..\..\..\App.txt" />
    </Component>
</DirectoryRef> 
```

另请注意`..\..\..\App.txt`，您可以`light.exe`使用如下`-b`选项传递基本路径，而不是使用笨拙的路径：

```
light.exe -o mysetup.msi -b path\to\my\files *.wixobj 
```

然后您可以使用相对于`Source`.

# css - 并排对齐控件

> ID：11458860
> 
> 赞同：2
> 
> 时间：2012-07-12T19:05:23.463
> 
> 标签：css, css-float, stylesheet

我必须在小时/分钟/上午的日期字段旁边显示三个下拉列表。如何将所有四个控件（包括日期）并排水平对齐？

我尝试将它们包装成一个 div 并使用 float:left 但它似乎不起作用。

这是小提琴：http: [//jsfiddle.net/ppTPE/](http://jsfiddle.net/ppTPE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:09:37.753

**JSFiddle**：http: [//jsfiddle.net/ppTPE/1/](http://jsfiddle.net/ppTPE/1/)

试试这个：

**HTML**：

```
 <div>
    <input type="text" class="align">
    <ol class="align">
        <li class="align">
            <select name="hour" class="text">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
            </select>
        </li>
        <li class="align">
            <select name="minute" class="text">
                <option value="0">00</option>
                <option value="5">05</option>
                <option value="10">10</option>
                <option value="15">15</option>
                <option value="20">20</option>
                <option value="25">25</option>
                <option value="30">30</option>
                <option value="35">35</option>
                <option value="40">40</option>
                <option value="45">45</option>
                <option value="50">50</option>
                <option value="55">55</option>
            </select>
        </li>
        <li class="align">
            <select name="ampm" class="text">
                <option value="0">AM</option>
                <option value="12">PM</option>
            </select>
        </li>
    </ol>
    <br />
    <div> 
```

**CSS**：

```
.align {
   display:inline-block;
   vertical-align:top; 
} 
```

# java - tree like data structure in java

> ID：11458861
> 
> 赞同：1
> 
> 时间：2012-07-12T19:05:26.057
> 
> 标签：java, data-structures, android-activity, tree, hierarchy

I want to implement a tree like data structure in java for activity objects, where nodes can be shared between two parents. I want to build a hierarchy of activities, where one activity can be contained by multiple activities. How can I do it? Or should I use some other data structure and how?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:09:42.107

像这样的东西应该工作：

```
public class Activity {

    private Activity parent1;
    private Activity parent2;
    private List<Activity> children;

    // other fields, getters, setters, methods, etc    

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:14:29.467

要决定设计，了解如何导航结构至关重要。如果只是自上而下，您所需要的只是让 Activity 包含其子项的列表。如何确保最多两个活动拥有某个活动是另一回事。如果您需要确保这一点，那么您可能需要在活动中使用父参考。

# jquery - Jquery Explanation >*

> ID：11458863
> 
> 赞同：3
> 
> 时间：2012-07-12T19:05:42.790
> 
> 标签：jquery

I was going through a p rewritten jQuery code . I'm not able to understand the following code .

```
$('body > *:not(#print-modal):not(script)').clone(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T19:07:50.737

This selector matches any tag that is:

*   A direct child of `<body>`
*   Does not have the ID `print-modal` and
*   Is not a `<script>` tag.

It then clones all these elements with `.clone()`, although nothing is done with the `clone()`d object, which is strange.

A more in-depth explanation:

`body > *` means "select all elements that are direct descendants of `<body>`", the wildcard `*` selecting every tag. Next, the two [`:not()`](http://api.jquery.com/not-selector/) pseudo-classes filter remove the element with the ID `print_modal`, as well as any `<script>` tags.

Reference:

*   [jQuery's `:not()` selector](http://api.jquery.com/not-selector/)
*   [Child and sibling CSS selectors](http://css-tricks.com/child-and-sibling-selectors/) (and another link on the [MDN](https://developer.mozilla.org/en/CSS/Child_selectors))
*   [Universal CSS selectors](https://developer.mozilla.org/en/CSS/Universal_selectors)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T19:07:43.167

If I am correct, in this case `>*` is a selector for all children of the `body` tag, with `:not(#print-modal)` and `:not(script)` providing two exclusions from the selector.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:08:12.373

`>` means "direct chidren of".

`*` means "any tag".

So, this is saying find any tags (that aren't `<script>` or have `id="print-modal"`) that are 1st level children of `<body>`.

Note: the `*` is not needed here as `:not` will assume the `*` if there is nothing before it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T19:08:02.950

It selects all elements that are direct children of the body that are not script tags and do not have the id `print-modal`.

`*` in a jQuery selector means all elements.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T19:09:07.440

```
$('body > *:not(#print-modal):not(script)').clone(); 
```

意味着，克隆 body 的所有直接子元素，但不克隆任何具有 id`print-modal`而不是`script`标签的元素。

**也可以写成**

```
$('body > *').not('#print-modal, script').clone(); 
```

**参考：** [**jQuery**](http://api.jquery.com/not/)。

# php - Permission issue with PHP file

> ID：11458864
> 
> 赞同：1
> 
> 时间：2012-07-12T19:05:45.773
> 
> 标签：php, javascript, ajax

I am using a CMS. when I put HTML code it works, when I put simple PHP code like "hello World" or when I try to connect to a database it works. But when I put more complex PHP code like " phpinfo()" or any SQL statements like `"$reponse = $bdd->query('SELECT * FROM insription_14juin');"` it doesn't work. The message that I get using fiddler is

```
 403 Forbidden
 You don't have permission to access /admin/modules/gestion_articles/updateContenu.php
on this server.
Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

After multiple tests I think that a JavaScript file is trying to load information into a PHP file and apparently when the PHP code is complex the JavaScript file doesn't have permission to access the PHP file.

This is the JavaScript file:

```
 $(function() {
$('#savemodif').click(function() {
    $('#formModif').append('<img src="images/ajax-loader.gif" alt="Enregistrement en cours..." id="loadingImg" />');

            var contenu ="";
    var type = $('#type').val();
    if(type == '0')
    {
                tinyMCE.triggerSave();
                contenu = $('#contenu').val();
                contenu = encodeURIComponent(contenu);
    }
    else
    {
                contenu = $('#contenu').val();
                contenu = encodeURIComponent(contenu);
    }

    /* Récupération d'infos nécessaires à la mise à jour */
    var id = $('#idcontenu').val();
    var oldtitre = $('#oldtitre').val();

    /* Récupération des mises à jours */
    var titre = $('#titre').val();
    var date = $('#date').val();
    var publie = 0; if($('#publie').is(':checked')) publie = 1;
            var diapo = '0'; if($('#diapo').is(':checked')) diapo = '1';
    var prive = 0; if($('#prive').is(':checked')) prive = 1;

    $.ajax({
        url: 'modules/gestion_articles/updateContenu_test.php',
        type: 'POST',
        data: 'id='+encodeURIComponent(id)
            + '&oldtitre='+encodeURIComponent(oldtitre)
            + '&titre='+encodeURIComponent(titre)
            + '&date='+encodeURIComponent(date)
            + '&contenu='+contenu
            + '&publie='+encodeURIComponent(publie)
            + '&diapo='+encodeURIComponent(diapo)
                            + '&prive='+encodeURIComponent(prive),

        success: function(result) {
            $('#result').html(result);
            $('#loadingImg').fadeOut(1000, function() {
                $(this).remove();
            });
        }
    });

    $('#oldtitre').attr('value',titre);

    return false;
});
  }); 
```

I already tried changing permissions in cpanel, it doesn't work. I renamed every htaccess file, it doesnt work.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:57:41.767

问题终于解决了，是关于modsecurity的。技术人员告诉我，modsecurity 存在限制。如果您遇到同样的问题，请咨询您的提供商。

我在上面发布的代码现在可以完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:18:17.187

您的问题是文件系统的权限。我假设您不是服务器管理员。

向您的服务器管理员发送一封电子邮件，说明正在发生的事情，他会查看并更改权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:40:18.863

这是在黑暗中拍摄的，但是每当页面的服务器文件夹中缺少占位符文件时，我都会在我的 cms 上遇到类似的消息。像 index.php 什么的。

另一件事可能是添加

```
async: false, 
```

到您的 ajax 调用，以确保它使用适当的数据运行。

# selenium - Selenium testing for EPIC IE-based application

> ID：11458867
> 
> 赞同：1
> 
> 时间：2012-07-12T19:05:58.777
> 
> 标签：selenium, epic

I want to use Selenium to test EPIC application. EPIC only runs on Internet Explorer, and in our environment, we launch EPIC thru Citrix.

Is it possible to use any tools in the Selenium suite to launch EPIC thru Citrix, record the test and then rerun the test?

If yes, please give me some leads on how to do this kind of test.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:14:56.713

我可以访问 CITRIX，但我无法登录 EPIC，因为它是一个 JAVA 应用程序。

# header - Birt Report第一页的不同标题

> ID：11458869
> 
> 赞同：7
> 
> 时间：2012-07-12T19:06:12.063
> 
> 标签：header, master-pages, birt, page-numbering

所以这里已经存在[这个线程，](http://www.eclipse.org/forums/index.php/t/234371/)它有一个示例，该示例创建了与其余页面不同的首页标题。我可以下载这个例子并运行它。

当我试图模仿这个例子时，我不能这样做（*澄清：将源更改为我自己的源数据库后，标题不会正确更改*）。最终，我开始将报告的各个部分复制到示例一中，以查看是什么触发了问题（*澄清：我一次删除了我的报告和示例之间的差异，以便确定导致的确切差异问题*）。它最终成为我的桌子。

由于某种原因，如果我添加自己的新数据集，使用示例数据库删除表并使用我的数据集添加表，我无法解释，它不会工作。当我说它不起作用时，我的意思是突然之间，每个页面上的标题都相同，并且不会按预期更改后续页面。

如果我运行调试器并在脚本上放置一个断点，该断点强制不同的第一页和其他页面内容（如下所示），而不是使用示例数据库表似乎发生的情况，onRender 事件在每个页面上都被调用......但是我的桌子只被调用一次。这导致母版页在开始时只检查一次 onRender 脚本，当 pageNumber 变量 = 1 时。我已经在这个网站上待了好几个小时，真的希望有人知道为什么会这样，请帮助我.

这是代码：

```
if( pageNumber > 1 ){
    this.getStyle().display = "none";
} 
```

非常感谢您的帮助和知识，

-阿萨夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:28:25.043

你表示

> 我试图模仿这个例子我不能这样做

所以大概你在某个地方错过了一步。DevShare [BIRT: Multiple Master Pages](http://www.birt-exchange.org/org/devshare/designing-birt-reports/321-birt-multiple-master-pages/)和支持博客条目[BIRT: Multiple Master Pages without scripting](http://www.birt-exchange.org/org/forum/index.php/blog/10/entry-20-birt-multiple-master-pages-with-no-scripting/)应该引导您完成整个过程。

**编辑** *基于澄清*。

使用“布局”编辑器修改 BIRT 中的现有报告（尤其是免费软件版本）可能并不总是在 XML 中正确更新。XML 是报告的实际基础。从头开始重新创建报告并仅使用示例作为指南应该可以解决您指出的问题。

当您（或您的客户）不完全确定报告最终会是什么时，版本控制为“撤消”提供了一种安全的方法，因为在该版本中它从未真正完成。在尝试新的东西之前，我总是保存一个版本（和报告描述中的文档）。

![版本](../Images/3c3d47897ab41a7a339b22376e27e7f7.png)

# perl - Metatrader TCP via perl

> ID：11458870
> 
> 赞同：1
> 
> 时间：2012-07-12T19:06:26.240
> 
> 标签：perl, forex, metatrader4

Looking for the simplest possible example of how to communicate with Metatrader client via its TCP stack using perl.

```
{perl} --[client_TCP_api]--> {MT_client} --[server_API]--> metatrader_server 
```

[Here](https://stackoverflow.com/q/7753069/632407) is an question looking for a [server_API]. I'm looking for a [client_API] that is completely different and it is publicly available.

Only my experiments don't work. Unfortunately, this question is answerable only by person who know metatrader and perl together.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:14:15.437

没有客户端 api 这样的东西。您不能扩展实际的客户端应用程序。

您可以做的是编写 mql 脚本，一旦附加到图表上，就可以在自动交易方面提供一定程度的可编程性。

就客户端的驱动功能而言，您完全受 mql 为您提供的功能的支配，如果您只想交易，这已经足够安静了。

就从外部与 mql 交谈而言，有一种方法可以将 dll 导入并加载到进程空间中，网上都有关于如何做到这一点的示例。

所以事情的顺序是：

*   Metatrader 客户端启动并加载附加到图表的 mql 脚本。

*   mql 脚本加载包含 tcp 服务器功能的 dll 以及启动它和轮询请求的方法。

*   Mql 脚本使用其中一种引导方法来调用 dll 中的 tcp 服务器 start() 方法。

*   Perl 连接并发送 tcp 到 dll。

*   Mql 轮询 dll 以获取请求并将其转换为 mql 交易行为。

最好的部分是这一切都是完全合法的，不违反元引用 ula 和更新兼容。

# c# - 如何检查数据库中是否存在记录 - 最快的方法

> ID：11458871
> 
> 赞同：4
> 
> 时间：2012-07-12T19:06:33.913
> 
> 标签：c#, database, string, performance, postgresql

我有一个存储唯一文本字符串的表，然后通过执行 select 检查该字符串是否存在于数据库中

```
String checkIfAlreadyScanned = "SELECT id FROM \"STRINGS_DB\"  where STR ='" + mystring + "'"; 
```

然后我检查值是否存在。我的数据库有大约 500 万条记录；我可以改进我的方法吗？

例如，也许有一种方法可以创建一个新属性（hashedSTR）并将字符串转换为一些唯一的数字值，然后获取这些数字，而不是字符串？这会更快吗？（这会起作用吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:15:59.997

为确保最快的处理速度，请确保：

*   您正在搜索的字段已编入索引（您告诉过一个“唯一”字符串，所以我想已经是这种情况了。因此，“限制 1”不是必需的。否则，应该添加它）
*   您正在使用`ExecuteScalar()`Command 对象的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T23:07:15.977

测试没有意义，只需在 where 子句中包含“测试”即可：

```
INSERT INTO silly_table(the_text)
 'literal_text'
WHERE NOT EXISTS (
    SELECT *
    FROM silly_table
    WHERE the_text = 'literal_text'
    ); 
```

现在，您将仅**在需要时**进行测试：在语句的末尾，该行将存在。没有*尝试*这样的东西。

对于那些不了解*测试没有意义的*人：如果测试后的情况不允许在测试后改变，那么测试是有意义的*。*那将需要一个测试和锁定方案。或者，更糟糕的是：交易中的测试。

更新：有效的版本（基本相同）：

```
DROP TABLE exitsnot CASCADE;
CREATE TABLE exitsnot
        ( id SERIAL NOT NULL PRIMARY KEY
        , val INTEGER -- REFERENCES something
        , str varchar -- REFERENCES something
        );

INSERT INTO exitsnot (val)
SELECT 42
WHERE NOT EXISTS (
        SELECT * FROM exitsnot
        WHERE val = 42
        );
INSERT INTO exitsnot (str)
SELECT 'silly text'
WHERE NOT EXISTS (
        SELECT * FROM exitsnot
        WHERE str = 'silly text'
        );
SELECT version(); 
```

输出：

```
DROP TABLE
NOTICE:  CREATE TABLE will create implicit sequence "exitsnot_id_seq" for serial column "exitsnot.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "exitsnot_pkey" for table "exitsnot"
CREATE TABLE
INSERT 0 1
INSERT 0 1
                                           version                                            
----------------------------------------------------------------------------------------------
 PostgreSQL 9.1.2 on i686-pc-linux-gnu, compiled by gcc (Ubuntu 4.4.3-4ubuntu5) 4.4.3, 32-bit
(1 row) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:09:23.540

```
String checkIfAlreadyScanned = "SELECT 1 FROM \"STRINGS_DB\"  where STR ='" + mystring + "'"; 
```

如果您的结果集包含一行，那么您有一条记录

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T19:12:03.993

将结果集限制为 1：

```
String checkIfAlreadyScanned = @"
    SELECT id 
    FROM ""STRINGS_DB""  
    where STR ='" + mystring + @"'
    limit 1"; 
```

这，该列上的索引以及@Laurent 的建议`ExecuteScalar()`将产生最佳结果。

此外，如果`mystring`有任何机会被用户触摸，则对查询进行参数化以避免 sql 注入。

更清洁的版本：

```
String checkIfAlreadyScanned = @"
    SELECT id 
    FROM ""STRINGS_DB""  
    where STR = '@mystring'
    limit 1
    ".replace("@mystring", mystring); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T19:14:23.650

这些文本字符串有多长？如果它们很长，您可以通过存储字符串的散列（连同原始字符串）来提高性能。

```
CREATE TABLE strings_db (
    id       PRIMARY KEY INT,
    text     TEXT,
    hash     TEXT
); 
```

您的哈希列可以存储 MD5 和、CRC32 或您选择的任何其他哈希算法。它应该被索引。

然后将您的查询修改为：

```
SELECT id FROM strings_db WHERE hash=calculate_hash(?) 
```

如果您的文本字段的平均大小比散列的大小足够大，那么在较短的字段上进行搜索将有助于磁盘 I/O。这也意味着在插入和选择、计算散列时需要额外的 CPU 开销，以及用于存储散列的额外磁盘空间。因此，所有这些因素都必须考虑在内。

PS 始终使用准备好的语句来避免 SQL 注入攻击！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T19:40:54.750

实际上，**正是**您所要求的。但它有一些限制。PostgreSQL 支持一种`hash`索引类型：

```
CREATE INDEX strings_hash_idx ON "STRINGS_DB" USING hash (str); 
```

适用于使用 的简单相等搜索`=`，就像您拥有它一样。我[引用了](http://www.postgresql.org/docs/current/interactive/indexes-types.html)有关限制的手册：

> 哈希索引操作目前没有 WAL 记录，因此在数据库崩溃后可能需要使用 REINDEX 重建哈希索引。它们也不会通过流式复制或基于文件的复制进行复制。由于这些原因，目前不鼓励使用散列索引。

* * *

对现实生活表的快速测试，433k 行，总共 59 MB：

```
SELECT * FROM tbl WHERE email = 'some.user@some.domain.com' 
```

```
-- No index, sequnence scan: Total runtime: 188 ms  
-- B-tree index (default):   Total runtime:   0.046 ms  
-- Hash index:               Total runtime:   0.032 ms 
```

这不是很大，但有些东西。与我测试中的电子邮件地址相比，使用*更长的字符串*时差异会更大。创建索引只需 1 或 2 秒。与任一索引。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T19:12:28.173

[编辑] 限制返回的结果返回它遇到的第一个满足条件的记录：对于 SqlServer：选择 TOP 1 ...；对于 mysql/postgres：选择 ... 限制 1；

如果可以有多个，也许在您的选择语句中添加“TOP 1”可能会更快返回。

```
String checkIfAlreadyScanned = "SELECT TOP 1 id FROM \"STRINGS_DB\"  where STR ='" + mystring + "'"; 
```

这样，它只需要找到字符串的第一个实例。

但是，如果您没有倍数，您可能不会看到这种方法有太多好处。

就像其他人所说的那样，在上面放一个索引可能会有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-12T19:13:50.450

假设您实际上不需要该`id`列，我认为这为编译器提供了最大的优化机会：

```
select 1
where exists(
    select 1 
    from STRINGS_DB
    where STR = 'MyString'
) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-12T19:15:35.627

尽管这里的所有答案都有其优点，但我想提另一个方面。

以这种方式构建您的查询并传递一个字符串不会帮助数据库引擎优化您的查询。相反，您应该编写一个存储过程，通过一个参数调用它，让数据库引擎构建一个查询计划并重用您的命令。

当然该字段应该被索引

# objective-c - 使用 isEqualToString 时访问错误

> ID：11458877
> 
> 赞同：0
> 
> 时间：2012-07-12T19:06:50.847
> 
> 标签：objective-c, ios, cocoa-touch, sdk, uiwebview

好的，这让我很烦。我有以下代码：

```
weatherAddress = [NSString stringWithFormat:@"http://google.com"];
    weatherUrl = [NSURL URLWithString:weatherAddress];
    weatherContents = [NSString stringWithContentsOfURL:weatherUrl encoding:NSASCIIStringEncoding error:nil];

if ([viewer.request.URL.relativeString isEqualToString:weatherContents]) {
   //do stuff
} 
```

但是当它运行时，它有时会引发错误的访问。当我说有时我的意思是通常 50% 的时间。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:58:40.103

这个怎么样，假设weatherContents在类中定义：

```
weatherAddress = [NSString stringWithFormat:@"http://google.com"];
weatherUrl = [NSURL URLWithString:weatherAddress];
weatherContents = [NSString stringWithContentsOfURL:weatherUrl encoding:NSASCIIStringEncoding error:nil];

[NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(checkIfWeatherReceived) userInfo:nil repeats:NO]; 
```

然后创建一个像这样调用的方法`checkIfWeatherReceived`：

```
-(void) checkIfWeatherReceived
{
    if(weatherContents)
    {
        if ([viewer.request.URL.relativeString isEqualToString:weatherContents]) {
            //do stuff
        }
    } else {
        [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(checkIfWeatherReceived) userInfo:nil repeats:NO];
    }
} 
```

我真的不喜欢使用会在您的连接中断时锁定您的界面的东西，所以我会避免只是“让它等待”之类的。如果天气数据已被抓取，这将每半秒检查一次。如果您希望它检查得更快，只需更改 TimeInterval。如果您在数据中没有发现太多延迟，您可能希望它非常快，例如 .01 或其他东西。您还应该考虑如果连接丢失并且您永远无法获取数据会发生什么，除非您已经考虑到这一点。我没有对此进行测试，但我认为它应该可以解决，假设您的所有部分都是类的一部分而不是方法的本地部分。我也可能会将实际工作从`checkIfWeatherReceived`另一种方法中分离出来，而不是仅仅将它放在`if(weatherContents)`真实区域中。

# iphone - XCode 中的自动更正

> ID：11458884
> 
> 赞同：0
> 
> 时间：2012-07-12T19:07:20.633
> 
> 标签：iphone, xcode

我是 XCode 环境的新手。拥有 Eclipse 和 Visual Studio 的开发经验后，我一直在寻找 Xcode 中的自动更正工具。不幸的是，我找不到一个。知道它是否存在或如何提出来？

**例子**

myObject.newField = 2;

Xcode 抱怨 newField 不存在。在visual studio（使用resharper）中，我可以点击一个快捷方式，它会为我创建新领域。或者，创建一个不存在的方法。

谢谢

**编辑** 为了澄清这个问题，我试图使用自动更正工具作为创建新变量和方法的一种手段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:22:40.347

Xcode 没有您描述的功能。当您使用未声明的变量或方法时，它不会提供创建声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:17:11.060

输入`myObject.`然后按键盘上的“esc”，您将看到与该对象相关的属性列表

# java - 使用 XSLT 将 XHTML 转换为另一个 XHTML

> ID：11458888
> 
> 赞同：0
> 
> 时间：2012-07-12T19:07:33.440
> 
> 标签：java, xml, xslt, xhtml

我有两个 XHTML 文件，我的任务是使用 XSLT（或 Java 程序的任何其他方法）将一个文件转换为另一个文件。我进行了搜索，但没有得到任何示例，所有这些都与使用 XSLT 将一个 XML 转换为另一个有关，或者将一个 XHMTL 的一点信息转换为另一个。因此，任何人都可以使用我的 XHTML 文件或任何其他文件，通过一个包含源文件、所需文件和 XSLT 文件的示例来解释该过程。我会非常感谢的。

源文件 [1]-

```
<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
<meta http-equiv="Content-type" content="text/html;  charset=utf-8" />  
<title>eXe</title>  
<style type="text/css">  
@import url(base.css);  
@import url(content.css);  
</style>  
<script type="text/javascript" src="common.js"></script>  
</head>  
<body>  
<div id="outer">  
<div id="main">  
<div id="nodeDecoration">  
<p id="nodeTitle">  
Part 1</p>  
</div>  
<div class="TrueFalseIdevice" id="id12">  
<script type="text/javascript" src="common.js"></script>  
<!--THIS JAVASCRIPT HAS TO BE ELIMINATED-->  
<script type="text/javascript" src="libot_drag.js"></script>  
<div class="iDevice emphasis1">  
<img alt="" class="iDevice_icon" src="icon_question.gif" />  
<span class="iDeviceTitle">True-False Question</span><br/>  
<div class="iDevice_inner">  
<div id="ta12_16" class="block" style="display:block">  

</div><div class="question">  
<br/><br/><div id="taquestion0b12" class="block" style="display:block">1><span style="color: #000000; font-family: Verdana,Arial,Helvetica,sans-serif; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; display: inline ! important; float: none"> SQL Stands for Structure Query Language?</span>   

<!--THIS ONCLICK EVENT HAS TO BE REMOVED-->  
</div><br/>True <input type="radio" name="option0b12" id="true0b12" onclick="getFeedback(0,2,'0b12','truefalse')"/>   
False <input type="radio" name="option0b12" id="false0b12" onclick="getFeedback(1,2,'0b12','truefalse')"/>  
<div id="s0b0b12" style="color: rgb(0, 51, 204);display: none;" even_steven="18">Correct! </div>  
<div id="s1b0b12" style="color: rgb(0, 51, 204);display: none;" even_steven="19">Incorrect! </div>  
<div id="sfbk0b12" style="color: rgb(0, 51, 204);display: none;"><div id="tafeedback0b12" class="block" style="display:block">  

</div></div>  
</div>  
</div>  
</div>  
</body></html> 
```

所需文件 [1]：

```
<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
<title>eXe</title>  
<meta http-equiv="Content-Type" content="text/html;  charset=utf-8" />  
<!-- Created using eXe: http://exelearning.org -->  
<style type="text/css">  
@import url(base.css);  
@import url(content.css);  
</style>  
<script type="text/javascript" src="common.js"></script>  
</head>  
<!--THESE TWO JAVASCRIPT HAVE TO BE INCLUDED-->  
<script type="text/javascript" src="APIWrapper.js"></script>  
<script type="text/javascript" src="SCOFunctions.js"></script>  
<body onload="loadPage()" onunload="unloadPage()"><div id="outer">  
<div id="main">  
<div id="nodeDecoration">  
<p id="nodeTitle">  
Part 1</p></div>  
<div class="QuizTestIdevice" id="id8">  
<!--THIS JAVASCRIPT AND FORM HAVE TO BE INCLUDED-->  
<script type="text/javascript" src="calculate.js"></script>  
<form name="quizForm8" id="quizForm8" action="javascript:calcScore2();">  
<div class="iDevice emphasis1">  
<img alt="" class="iDevice_icon" src="icon_question.gif" />  
<span class="iDeviceTitle">SCORM Quiz</span>  
<div class="iDevice_inner">  
<div class="passrate" value="50"></div>  
<div class="question">  
<div id="taquestion0b8" class="block" style="display:block">1> SQL Stands for Structure Query Language?  

</div><br/>  
<table><tr><td><input type="radio" name="key0b8" value="0" />  
</td><td>  
<div id="taoptionAnswer0q0b8" class="block" style="display:block">True  

</div></td></tr>  
<tr><td><input type="radio" name="key0b8" value="1" />  
</td><td>  
<div id="taoptionAnswer1q0b8" class="block" style="display:block">False  

</div></td></tr>  
</table></div>  
<!--THIS SUBMIT BUTTON HAS TO BE INCLUDED-->  
<br/><input type="submit" name="submitB" value="SUBMIT ANSWERS"/>  
</div></div>  
</form>  
</div>  
</div>  
</div>  
</body></html> 
```

完整的源文件 [2]-

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
<title>eXe</title>
<style type="text/css">
@import url(base.css);
@import url(content.css);
</style>
<script type="text/javascript" src="common.js"></script>
</head>
<body>
<div id="outer">
<div id="main">
<div id="nodeDecoration">
<p id="nodeTitle">
Part 2</p>
</div>
<div class="TrueFalseIdevice" id="id13">

<script type="text/javascript" src="common.js"></script>
<script type="text/javascript" src="libot_drag.js"></script>

<div class="iDevice emphasis1">
<img alt="" class="iDevice_icon" src="icon_question.gif" />
<span class="iDeviceTitle">True-False Question</span><br/>
<div class="iDevice_inner">
<div id="ta13_16" class="block" style="display:block">
</div>

<div class="question">
<br/><br/><div id="taquestion0b13" class="block" style="display:block">1: Can a table have more than one primary key?

</div><br/>True <input type="radio" name="option0b13" id="true0b13" onclick="getFeedback(0,2,'0b13','truefalse')"/> 
False <input type="radio" name="option0b13" id="false0b13" onclick="getFeedback(1,2,'0b13','truefalse')"/>
<div id="s0b0b13" style="color: rgb(0, 51, 204);display: none;" even_steven="18">Correct! </div>
<div id="s1b0b13" style="color: rgb(0, 51, 204);display: none;" even_steven="19">Incorrect! </div>
<div id="sfbk0b13" style="color: rgb(0, 51, 204);display: none;"><div id="tafeedback0b13" class="block" style="display:block">
</div></div></div>

<div class="question">

<br/><br/><div id="taquestion1b13" class="block" style="display:block"><span style="color: #000000; font-family: Verdana,Arial,Helvetica,sans-serif; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; display: inline ! important; float: none">2: A row in a database can also be called a domain.</span>

</div><br/>True <input type="radio" name="option1b13" id="true1b13" onclick="getFeedback(0,2,'1b13','truefalse')"/> 

False <input type="radio" name="option1b13" id="false1b13" onclick="getFeedback(1,2,'1b13','truefalse')"/>

<div id="s0b1b13" style="color: rgb(0, 51, 204);display: none;" even_steven="19">Incorrect! </div>
<div id="s1b1b13" style="color: rgb(0, 51, 204);display: none;" even_steven="18">Correct! </div>
<div id="sfbk1b13" style="color: rgb(0, 51, 204);display: none;"><div id="tafeedback1b13" class="block" style="display:block">
</div></div>
</div>

<div class="question">

<br/><br/><div id="taquestion2b13" class="block" style="display:block"><span style="color: #000000; font-family: Verdana,Arial,Helvetica,sans-serif; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; display: inline ! important; float: none">3: In an OO database objects may inherit some or all of the characteristics of other objects.</span>

</div><br/>True <input type="radio" name="option2b13" id="true2b13" onclick="getFeedback(0,2,'2b13','truefalse')"/> 
False <input type="radio" name="option2b13" id="false2b13" onclick="getFeedback(1,2,'2b13','truefalse')"/>
<div id="s0b2b13" style="color: rgb(0, 51, 204);display: none;" even_steven="18">Correct! </div>
<div id="s1b2b13" style="color: rgb(0, 51, 204);display: none;" even_steven="19">Incorrect!</div>
<div id="sfbk2b13" style="color: rgb(0, 51, 204);display: none;"><div id="tafeedback2b13" class="block" style="display:block">
</div></div>
</div>

<div class="question">

<br/><br/><div id="taquestion3b13" class="block" style="display:block"><span style="color: #000000; font-family: Verdana,Arial,Helvetica,sans-serif; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; background-color: #ffffff; display: inline ! important; float: none">4: In entity attribute modelling a many to many relationship is represented by M:M.</span>

</div><br/>True <input type="radio" name="option3b13" id="true3b13" onclick="getFeedback(0,2,'3b13','truefalse')"/> 

False <input type="radio" name="option3b13" id="false3b13" onclick="getFeedback(1,2,'3b13','truefalse')"/>

<div id="s0b3b13" style="color: rgb(0, 51, 204);display: none;" even_steven="19">Incorrect! </div>
<div id="s1b3b13" style="color: rgb(0, 51, 204);display: none;" even_steven="18">Correct! </div>
<div id="sfbk3b13" style="color: rgb(0, 51, 204);display: none;"><div id="tafeedback3b13" class="block" style="display:block">

</div></div></div></div></div></div></div></div>
</body></html> 
```

我的 XSLT-

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <!-- Import the identity transformation. -->
      <xsl:import href="identity.xsl"/>

      <xsl:template match="@onclick">

      </xsl:template>
      <xsl:template match="@style"/>

      <xsl:template match="input">
        <xsl:element name="input">
          <xsl:attribute name="type">submit</xsl:attribute>
          <xsl:attribute name="name">submitB</xsl:attribute>
          <xsl:attribute name="value">Submit</xsl:attribute>
          <xsl:apply-templates />
        </xsl:element>
      </xsl:template>

    </xsl:stylesheet> 
```

完成所需文件 [2]-

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>eXe</title>
<meta http-equiv="Content-Type" content="text/html;  charset=utf-8" />
<style type="text/css">
@import url(base.css);
@import url(content.css);
</style>
<script type="text/javascript" src="common.js"></script>
</head>

<script type="text/javascript" src="APIWrapper.js"></script>
<script type="text/javascript" src="SCOFunctions.js"></script>

<body onload="loadPage()" onunload="unloadPage()"><div id="outer">
<div id="main">

<div id="nodeDecoration">
<p id="nodeTitle">
Part 2</p></div>
<div class="QuizTestIdevice" id="id10">

<script type="text/javascript" src="calculate.js"></script>

<form name="quizForm10" id="quizForm10" action="javascript:calcScore2();">
<div class="iDevice emphasis1">
<img alt="" class="iDevice_icon" src="icon_question.gif" />
<span class="iDeviceTitle">SCORM Quiz</span>
<div class="iDevice_inner">
<div class="passrate" value="50"></div>

<div class="question">
<div id="taquestion0b10" class="block" style="display:block">1: Can a table have more than one primary key?
</div><br/>

<table><tr><td><input type="radio" name="key0b10" value="0" />
</td><td>
<div id="taoptionAnswer0q0b10" class="block" style="display:block">True
</div></td></tr>
<tr><td><input type="radio" name="key0b10" value="1" />
</td><td>
<div id="taoptionAnswer1q0b10" class="block" style="display:block">False
</div></td></tr>
</table></div>

<br/><div class="question">
<div id="taquestion1b10" class="block" style="display:block"><span class="Ques">2: A row in a database can also be called a domain.
</span>
</div><br/>
<table><tr><td><input type="radio" name="key1b10" value="0" />
</td><td>
<div id="taoptionAnswer0q1b10" class="block" style="display:block">True
</div></td></tr>
<tr><td><input type="radio" name="key1b10" value="1" />
</td><td>
<div id="taoptionAnswer1q1b10" class="block" style="display:block">False
</div></td></tr>
</table></div>

<br/><div class="question">
<div id="taquestion2b10" class="block" style="display:block"><span class="Ques">3: In an OO database objects may inherit some or all of the characteristics of other objects.
</span>
</div><br/>
<table><tr><td><input type="radio" name="key2b10" value="0" />
</td><td>
<div id="taoptionAnswer0q2b10" class="block" style="display:block">True
</div></td></tr>
<tr><td><input type="radio" name="key2b10" value="1" />
</td><td>
<div id="taoptionAnswer1q2b10" class="block" style="display:block">False
</div></td></tr>
</table></div>

<br/><div class="question">
<div id="taquestion3b10" class="block" style="display:block"><span class="Ques">4: In entity attribute modelling a many to many relationship is represented by M:M.</span>
</div><br/>
<table><tr><td><input type="radio" name="key3b10" value="0" />
</td><td>
<div id="taoptionAnswer0q3b10" class="block" style="display:block">True
</div></td></tr>
<tr><td><input type="radio" name="key3b10" value="1" />
</td><td>
<div id="taoptionAnswer1q3b10" class="block" style="display:block">False
</div></td></tr>
</table></div>

<br/><input type="submit" name="submitB" value="SUBMIT ANSWERS"/>
</div></div>
</form>
</div></div></div>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:21:24.767

您读到的关于使用 XSLT 转换 XML 的所有内容都适用于转换 XHTML，因为 XHTML 是 XML。很难看出你的问题有什么困难，除了弄清楚解决方案需要多通用：这是唯一需要转换的文档（如果是，为什么不使用文本编辑器？）或者是否还有其他需要转换的文档？相似，如果是，它们有何不同？

编写复制大部分内容但删除少数内容的转换的一般方法是编写两个模板规则：一个复制您要复制的内容的通用标识模板，以及一个匹配您要删除的内容的特殊规则。

有关主题的变体，请参见此处：

[http://www.dpawson.co.uk/xsl/sect2/identity.html](http://www.dpawson.co.uk/xsl/sect2/identity.html)

# proxy - How to set socks proxy username/password in java mail

> ID：11458890
> 
> 赞同：0
> 
> 时间：2012-07-12T19:07:36.030
> 
> 标签：proxy, jakarta-mail, socks

I am using javamail for sending mail (SMTP protocol) as follows

```
String host = "smtp.gmail.com";
:
props.put("mail.smtp.auth", "true");

props.put("mail.smtp.socks.host","sock_proxy_host");
props.put("mail.smtp.socks.port","sock_proxy_port");

Session session = Session.getInstance(props,new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("..", "..");
        }
}); 
```

But the socks proxy i am using requires a basic authentication. I am trying to setting the credential as

```
System.setProperty("java.net.socks.username", "socks_username");             
System.setProperty("java.net.socks.password", "socks_passwd"); 
```

Is there any other way to set the socks proxy username/password (using javamail API)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:38:30.563

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html#Proxies)，只有在没有设置 java.net.Authenticator 时才会查​​询 java.net.socks.username 属性。也许您的 JVM 中的一些其他代码设置了默认身份验证器？如果您有适当的权限，请尝试[设置您自己的默认 java.net.Authenticator](http://docs.oracle.com/javase/7/docs/api/java/net/Authenticator.html#setDefault%28java.net.Authenticator%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T23:25:03.210

您应该从 java.net.Authenticator 定义一个类实现：

```
java.net.Authenticator authenticator = new java.net.Authenticator() {

 protected java.net.PasswordAuthentication getPasswordAuthentication() {
      return new java.net.PasswordAuthentication(username, password.toCharArray());
      }
 };

System.setProperty("java.net.socks.username", username); 
System.setProperty("java.net.socks.password", password); 
java.net.Authenticator.setDefault(authenticator); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T19:40:31.387

JavaMail 不支持代理认证，只支持匿名 SOCKS 代理。我不知道除了[Simple Java Mail](http://www.simplejavamail.org)之外的任何 java 库，它是开源的。

[Simple Java Mail 使用一个技巧](http://www.simplejavamail.org/#/features)添加了对经过身份验证的代理的支持：它运行一个临时匿名 SOCKS 服务器供 JavaMail 连接到同一主机上，然后通过手动验证到 JavaMail 之外的外部 SOCKS 代理来中继连接。

这是您的代码，但这次使用的是 Simple Java Mail：

```
Mailer mailer = new Mailer(
        new ServerConfig("smtp.gmail.com", thePort, "..", ".."),
        TransportStrategy.SMTP_TLS,
        new ProxyConfig("sock_proxy_host", "sock_proxy_port", socks_username, socks_passwd)
);

mailer.sendMail(email); 
```

您无需设置任何属性或其他配置，一切都已处理完毕。

# java - URLConnection setRequestProperty vs addRequestProperty

> ID：11458891
> 
> 赞同：17
> 
> 时间：2012-07-12T19:07:38.347
> 
> 标签：java, http, http-headers, urlconnection

Lets say I'm talking HTTP to a web server, and I will Accept html or text, but prefer html. In other words, the header should say (I think!)

Accept: text/html, text/*

I'm using Java, so I have a URLConnection. Should I use:

```
myUrlConnction.setRequestProperty("Accept", "text/html");
myUrlConnction.addRequestProperty("Accept", "text/*"); 
```

or

```
myUrlConnction.setRequestProperty("Accept", "text/html, text/*"); 
```

or are they equivalent???

In general, most of the third party code I see doesn't seem to worry much about ordering or multiple values of these headers, so I'm wondering how it ends up working.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-07-28T09:54:02.870

**setRequestProperty 和 addRequestProperty 之间的基本区别是：-**

1.  **setRequestProperty>>**设置一般请求属性。如果具有键的属性已存在，则用新值***覆盖***其值。

2.  **addRequestProperty >>**添加由键值对指定的通用请求属性。此方法***不会覆盖***与同一键关联的现有值。

有关更多信息，请浏览[api 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html#addRequestProperty(java.lang.String,%20java.lang.String))

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T19:32:00.893

第一个代码片段将产生两个接受标头，而第二个代码片段将提供一个带有两个选择器的接受标头。

它们实际上是等价的。

该规范还指出，更具体的媒体范围具有优先权，因此两者都会产生您预期的行为。

如果您必须指定多个媒体范围，并且它们同样具体，您可以添加 q 参数。

来源：http 1.1 规范（[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)）：

# c# - Reading single chars from a .NET SecureString in C#?

> ID：11458894
> 
> 赞同：2
> 
> 时间：2012-07-12T19:07:53.013
> 
> 标签：c#, bstr, securestring

WPF's PasswordBox returns a SecureString, which hides the password from snoopers.

The problem is that you eventually have to get the value of the password, and the suggestions I've found on the net all involve copying the value into a string, which gets you back to the problem of snoopers.

```
IntPtr bstr = Marshal.SecureStringToBSTR(secureString);
string password = Marshal.PtrToStringBSTR(bstr);
Marshal.FreeBSTR(bstr); 
```

But if you really think about it, you don't really need the value, as a string. I mean, what do you do with a password? You hash it and then compare the result to a saved hash, and see if they are the same.

In other words, you don't need to convert the SecureString into a string, you just need to be able to iterate over the individual characters in the string.

But how?

How do I loop over the individual characters in a BSTR, in C#, without converting it to a managed string?

EDITING: the solution, in case the link disappears:

The Marshall class provides methods that can extract individual bytes or ints from an IntPtr, at given offsets. A BSTR object contains an array of 16-bit characters, terminated by two null bytes. So you can access them by looping:

```
byte b = 1;
int i = 0;
while ((char)b != '\0')
{
    b = Marshal.ReadByte(bstr, i);
    // ...
    i += 2;
} 
```

(I don't care for that flow control. I'd have used a do...while, rather than prepopulate b with a dummy value, or I'd have used a for(;;) loop, with internal breaks, or I'd have looped on the length, which I explain how to get, below.)

Also, I'd probably use:

```
short b = Marshal.ReadInt16(bstr, i); 
```

Reading the entire unicode chars, instead of just the low bytes of each.

You can get the length of the BSTR with:

```
int len = Marshal.ReadInt32(bstr, -4); 
```

This is the number of bytes, not including the nulls, not the number of chars.

Also - use:

```
Marshal.ZeroFreeBSTR(bstr); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:15:25.113

[http://weblogs.asp.net/pglavich/archive/2005/08/15/422525.aspx](http://weblogs.asp.net/pglavich/archive/2005/08/15/422525.aspx)

此链接显示如何使用 Marshal.SecureStringToBSTR(secretString) 并将其分配给指针并更新指针以循环字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T01:29:37.347

这对我有用：

```
 static char GetChar(SecureString value, int idx)
    {
        IntPtr bstr = Marshal.SecureStringToBSTR(value);
        try
        {
            // Index in 2-byte (char) chunks
            //TODO: Some range validation might be good.
            return (char)Marshal.ReadByte(bstr, idx * 2);
        }
        finally
        {
            Marshal.FreeBSTR(bstr);
        }
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T19:15:47.117

尝试这样的事情我将lc在链接中的VB代码示例转换为C#，希望这有助于您入门

```
Char[] input = "Super Secret String".ToCharArray();
SecureString secret = new SecureString();

for (int idx = 0; idx <= input.Length - 1; idx++) {
    secret.AppendChar(FileSystem.input(idx));
}
SecurePassword.MakeReadOnly();

IntPtr pBStr = Marshal.SecureStringToBSTR(secret);

string output = Marshal.PtrToStringBSTR(pBStr);
Marshal.FreeBSTR(pBStr);

SHA512 sha = new SHA512Managed();
byte[] result = sha.ComputeHash(Encoding.UTF8.GetBytes(output)); 
```

# php - Drupal Commons vs Wordpress+BuddyPress for a social network

> ID：11458900
> 
> 赞同：0
> 
> 时间：2012-07-12T19:08:18.267
> 
> 标签：php, wordpress, drupal, buddypress, drupal-commons

I lead a team of 4 PHP developers and we have been tasked with developing a custom social network site/portal. By social I mean Facebook-like social - activity streams, comments, popularity, various kinds of content, etc. We don't have years to develop it from scratch so I'm thinking about building on top of the existing CMS - either Wordpress with BuddyPress or Drupal. The choice between the two is a tough one for me. My team is very proficient in PHP but has no significant experience with neither of the CMSes. Both platforms provide similar end-user features but I wonder how easy it is to hack BuddyPress (if we need to, which is very likely) vs something (likely Commons modules) on Drupal.

The problem with Drupal is that D7 is there but Commons modules haven't been portedto it yet. Developing on D6 doesn't make a lot of sense to me as I've read it will be problematic to migrate to D7 in the future.

The social network site we have to develop is not really centered around a blog. What would you recommend?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:26:09.987

WordPress 有丰富的插件架构来扩展系统，您也可以类似地扩展 BuddyPress。您还可以扩展 Drupal Commons。

Drupal Commons 拥有 BuddyPress 没有的主要内容是商业支持。

（顺便说一句，WordPress 也不一定以博客为中心。在其设置中选择的一个单选按钮将其默认视图更改为 CMS（静态首页），如果需要，可以完全隐藏“博客”功能。）

该决定将由您尚未指定的要求驱动。例如，如果您希望用户生成大量内容，那么使用 BuddyPress 可能会更容易。但是，如果您需要商业支持，那么尽管有任何潜在的缺点，您都必须使用 Drupal Commons。

如果您可以更具体地了解新站点的功能/要求，则更容易确定其中一个软件包是否满足这些要求以及在何种程度上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:59:26.797

我认为这完全取决于您可能使用哪些功能。如果您喜欢 Drupal Commons 的功能集并且除此之外不需要太多，那么我会推荐 Commons，因为它得到专业支持并且做得很好。但是，如果您需要一个高度定制的社区，您可能需要选择 BuddyPress，它目前有 412 个可用于该平台的插件，并且每天都会添加更多插件。这些扩展的质量范围从优秀到非常差。一些开发人员没有时间在初始版本之后支持他们的插件，而另一些开发人员则以他们的插件为生，并确保它始终为最新版本的 WordPress 和 BuddyPress 做好准备。我写了一个您可能会发现有用的两个平台之间的基本比较：

[开源社交网络对决：BuddyPress 与 Drupal Commons](http://wpmu.org/open-source-social-networking-matchup-buddypress-vs-drupal-commons/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:15:03.913

您永远不想“破解” CMS。更改 CMS 的代码会引入安全漏洞。我建议不要使用任何类型的 CMS，而是使用框架（如果必须），例如[symfony](http://www.symfony-project.org/)。

# python - Not able to parse html using lxml Xpath parser

> ID：11458902
> 
> 赞同：5
> 
> 时间：2012-07-12T19:08:35.710
> 
> 标签：python, xpath, lxml

I am trying to parse review from this page: [http://www.amazon.co.uk/product-reviews/B00143ZBHY](http://www.amazon.co.uk/product-reviews/B00143ZBHY)

Using following approach:

**Code**

```
html # a variable which contains exact html as given at the above page.
from lxml import etree
tree = etree.HTML(html)
r = tree.xpath(".//*[@id='productReviews']/tbody/tr/td[1]/div[9]/text()[4]")
print len(r)
print r[0].tag 
```

**Output**

```
0
Traceback (most recent call last):
  File "c.py", line 37, in <module>
    print r[0].tag
IndexError: list index out of range 
```

p,s,: While using the same xpath on xpath checker addon of firefox I am able todo it easily. But no result here, please help!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T19:14:24.307

尝试删除`/tbody`表单 XPath — `<tbody>`.`#productReviews`

```
import urllib2
html = urllib2.urlopen("http://www.amazon.co.uk/product-reviews/B00143ZBHY").read()
from lxml import etree
tree = etree.HTML(html)
r = tree.xpath(".//*[@id='productReviews']/tr/td[1]/div[9]/text()[4]")
print r[0] 
```

输出：

```
bought this as replacement for the original cover which came with my greenhouse and which ripped in the wind.  so far this seems a good replacement although for some reason it seems slightly too small for my greenhouse so that i cant zip both sides of the front at the same time.  seems sturdier and thicker than the cover i had before so hoping it lasts a bit longer! 
```

# c# - 如何从 WP7 中的另一个页面更新背景图像

> ID：11458914
> 
> 赞同：0
> 
> 时间：2012-07-12T19:09:35.587
> 
> 标签：c#, windows-phone-7, xaml

我的 MainPage.xaml 中有一个全景控件，我希望用户能够通过使用 listpicker 控件来更改另一个页面（我的 SettingsPage.xaml）中的背景 png 图像。我已经成功地用几个测试图像名称填充了列表选择器，并且可以使用它来更改选择，但是我不确定如何从我的 SettingsPage.xaml 访问 MainPage.xaml 以在 Listpicker selectedIndex 时更改实际图像被改变。到目前为止，我所拥有的如下：

主页.xaml

```
<controls:Panorama x:Name="panorama" Title="Application Title">
        <controls:Panorama.Background>
            <ImageBrush ImageSource="PanoramaBackground.png"/>  //the default background
        </controls:Panorama.Background>

        ...

</controls:Panorama> 
```

设置页面.xaml

```
<toolkit:ListPicker x:Name="ThemeListPicker" Header="Theme" Grid.Row="2" Grid.ColumnSpan="2"
                                        ItemTemplate="{Binding ThemeItemTemplate}" SelectedIndex="{Binding}"
                                        SelectionChanged="ThemeListPicker_SelectionChanged"/> 
```

SettingsPage.xaml.cs

```
String[] Theme = 
    {
        "Default",
        "Bubbles",
        //...
    };

public SettingsPage()
    {
        InitializeComponent();

        //Theme list picker
        this.ThemeListPicker.ItemsSource = Theme;
        this.ThemeListPicker.DataContext = ThemeListPicker.SelectedIndex;
    }

private void ThemeListPicker_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (e.AddedItems.Count <= 0) //to eliminate IndexOutOfRangeException
        {
            return;
        }

        string selectedItem = e.AddedItems[0] as string;

        switch(selectedItem)
        {
            case "Default":
                //change panorama background here (PanoramaBackground.png)
                this.ThemeListPicker.SelectedIndex = 0;
                break;
            case "Bubbles":
                //change panorama background here (PanoramaBackground_Bubbles.png)
                this.ThemeListPicker.SelectedIndex = 1;
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:36:20.983

您可以创建一个 Settings.cs 类，该类可用于在隔离存储中保存设置条目，其中一个设置可以是背景图像。

有关实施示例，请参见此处：

[http://msdn.microsoft.com/en-us/library/ff769510%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/ff769510%28v=vs.92%29.aspx)

如果您在应用程序运行时需要设置，完成您想要的最简单的方法是在 App.xaml.cs 中使用公共字符串对象（例如称为 YourString）

然后你可以从 Settings.xaml 页面设置它，实际上是后面的代码，当你的列表选择器选择改变如下：

```
private void ThemeListPicker_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (e.AddedItems.Count <= 0) //to eliminate IndexOutOfRangeException
    {
        return;
    }

    string selectedItem = e.AddedItems[0] as string;

    switch(selectedItem)
    {
        case "Default":
            //change panorama background here (PanoramaBackground.png)
            (Application.Current as App).YourString = "PanoramaBackground.png";
            break;
        case "Bubbles":
            //change panorama background here (PanoramaBackground_Bubbles.png)
            (Application.Current as App).YourString = "PanoramaBackground_Bubbles.png";
            break;
    }
} 
```

然后，当您导航到 MainPage.xaml 页面时，检查 YourString 字符串是否不为空。如果不是，则从它创建一个 URI 并将全景背景设置为该图像 URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:24:56.073

为了解决这个问题，我只需在 MainPage.xaml 中设置一个原始默认 ImageSource 路径，然后在 MainPage.xaml.cs OnNavigatedTo 事件中，我相应地更新了在 SettingsPage 中设置的全景背景图像。

主页.xaml

```
<controls:Panorama x:Name="panorama" Title="Application Title"> 
    <controls:Panorama.Background> 
        <ImageBrush ImageSource="PanoramaBackground.png"/>  //the default background 
    </controls:Panorama.Background> 

    ... 

</controls:Panorama> 
```

MainPage.xaml.cs

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        Uri themeUri = new Uri(Settings.Theme.Value, UriKind.Relative);  //holds the uri string of the selected background from SettingsPage

        BitmapImage image = new BitmapImage(themeUri);
        ImageBrush brush = new ImageBrush();
        brush.ImageSource = image;
        panorama.Background = brush;
    } 
```

# iphone - 在选项卡式视图应用程序中滑动手势

> ID：11458918
> 
> 赞同：0
> 
> 时间：2012-07-12T19:10:08.693
> 
> 标签：iphone, objective-c, ios

所以这非常非常奇怪。我已将右舷的滑动手势识别器添加到 6 选项卡选项卡栏中的第一个选项卡的视图中。我将其设置为向左方向并将其作为 Action 连接到 firstTabViewController.h。而且效果很好。

现在，如果我尝试以相同的方式将“正确方向”滑动手势识别器添加到第一个选项卡，则该操作甚至不会注册。

此外，如果我尝试在另一个选项卡（不是索引 0 的选项卡）中执行相同的操作，或者将工作选项卡移动到选项卡栏中的不同位置，当我滑动时应用程序会因访问错误而崩溃.

firstTabViewController.h

```
- (IBAction)swipeLeft:(id)sender;   // Works fine
- (IBAction)swipeRight:(id)sender;  // Doesn't even register 
```

firstTabViewController.m

```
- (IBAction)swipeLeft:(id)sender {
    int nextIndex = CURRENT_INDEX + 1;  // I did modify this accordingly when the tab was moved

    [self.tabBarController setSelectedIndex:nextIndex];
    NSLog(@"Swipe left");

}

- (IBAction)swipeRight:(id)sender {
    NSLog(@"Swiped Right");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:28:19.203

刚刚测试过它并且它有效：

```
UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeLeft:)];
swipeLeft.direction = UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:swipeLeft];
swipeLeft.delegate = self;
[swipeLeft release];

UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeRight:)];
swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
[self.view addGestureRecognizer:swipeRight];
swipeRight.delegate = self;
[swipeRight release];

-(void) swipeRight:(UISwipeGestureRecognizer *) recognizer {
    if (recognizer.direction == UISwipeGestureRecognizerDirectionRight)
        NSLog(@"swipe right");
}

-(void) swipeLeft:(UISwipeGestureRecognizer *) recognizer {
    if (recognizer.direction == UISwipeGestureRecognizerDirectionLeft)
        NSLog(@"swipe left");

} 
```

# javascript - Twitter Bootstrap 下拉菜单——奇怪的点击行为

> ID：11458923
> 
> 赞同：1
> 
> 时间：2012-07-12T19:10:26.550
> 
> 标签：javascript, jquery, twitter-bootstrap

当用户单击按钮时，我正在显示引导下拉菜单。菜单有一些可点击的元素。我正在捕获下拉列表中的所有点击并取消冒泡以保持下拉列表打开，然后在完成后手动关闭。这一切都有效。

我遇到的问题是，当用户单击下拉列表中的任何元素时，导致下拉列表显示的原始按钮看起来像是被单击了。有没有办法关闭它？

截图和代码如下。

![在此处输入图像描述](../Images/192ca3e4241f4c84a98620ea1dbe2c3a.png)

**jQuery保持菜单打开**

```
$(".page-header").on("click", ".cr-dropdown-labels", function() { return false; });
$('.cr-dropdown-labels').on("click", "span.state", function() { 
       labelMenuCheckMulti.call(this); return false; 
}); 
```

**标记**

```
<span class="btn dropdown">
    <div data-toggle="dropdown" class="dropdown-toggle" rel="tooltip" title="Label selected contacts">
        <i class="icon-tag"></i> <b class="caret"></b>
    </div>
    <ul class="dropdown-menu cr-dropdown-labels">
        <li>
            <input type="text" placeholder="Find a label" />
        </li>
        <li class="scrollable">
            <ul class="unstyled labels" data-bind="foreach: allLabels">
                <li><span class="off state"></span> <a style="display: inline;" data-bind="text: name().truncate(30)"></a></li>
            </ul>
        </li>
        <li>
            <a class="apply-label-selections">Apply</a>
        </li>
    </ul>
</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:46:48.570

您是否尝试过将`.btn`类应用于`.dropdown-toggle`而不是整个`<span>`容器？我认为您不需要将菜单放在`.btn`.

供将来参考：单击菜单会触发`:active`整个层次结构的伪状态，从而在`.btn`下拉列表的顶层启用活动样式。

您的代码示例与`.btn`类在正确的位置。

```
<div class="dropdown">
    <div class="dropdown-toggle btn">
        <!-- ... -->
    </div>
    <!-- ... -->
</div> 
```

此外，你不应该`<div>`在里面嵌套元素`<span>`：[相关问题](https://stackoverflow.com/a/6062035/1478467)。更喜欢使用`display: inline-block;`.

# macos - git结帐—— 不丢弃更改？

> ID：11458926
> 
> 赞同：24
> 
> 时间：2012-07-12T19:10:32.013
> 
> 标签：macos, git, git-checkout

我的工作目录中有一些我试图丢弃的更改（重置为文件的当前索引版本），但是`git checkout -- <file>`不会丢弃这些更改。我尝试手动删除文件 ( `rm -r files`) 然后运行`git checkout -- .`，这会再次显示文件已修改。

```
$ git checkout -- .
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   files/Hulk.png
#   modified:   files/Hulk_2.png
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

运行`git diff`显示文件已修改...

```
diff --git a/files/Hulk.png b/files/Hulk.png
index 1c256cb..1d37fe0 100644
Binary files a/files/Hulk.png and b/files/Hulk.png differ
diff --git a/files/Hulk_2.png b/files/Hulk_2.png
index 1c256cb..0717199 100644
Binary files a/files/Hulk_2.png and b/files/Hulk_2.png differ 
```

注意：有些人说要运行`git checkout .`，但是这将达到与`git checkout -- .`. 这`--`只是 git checkout 命令中用于区分树状/提交点与文件/路径的符号。

操作系统：OSX 10.6 Git：1.7.10.2

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-12T21:36:31.460

造成这种情况的原因是由于多个文件具有相同的名称但不同的情况。在不区分大小写的 OSX 中，不喜欢具有相同名称但大小写不同的多个文件。它将它们视为同一个文件。为了解决这个问题，我运行`git mv`（或只是`mv`）到一个临时文件名，添加了临时文件，这允许 git 删除旧的/错误命名的版本，然后再次提交以将它们重新命名。这也可以在允许具有相同名称的不同文件是不同情况的文件系统上更正。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-24T09:27:06.557

你试过了吗

```
git config --global core.autocrlf false 
```

或者

```
git config --global core.filemode false 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-13T12:43:04.213

根据您的评论，您必须将存储库配置为区分大小写：

```
git config core.ignorecase false 
```

这允许 git 跟踪两个文件（尽管文件系统只显示一个，这非常令人困惑）。当 git 正确跟踪区分大小写时，以下是演示正在发生的事情的复制步骤：

```
git init /tmp/test && cd /tmp/test
git config core.ignorecase false
echo test>test && git add test && git commit -m "lowercase t"
mv test Test 
```

现在`git status`显示与以下没有区别`test`：

```
git status -s
 ?? Test 
```

提交`Test`并使用`git ls-files`以查看我们现在正在跟踪的内容：

```
git add Test && git commit -m "uppercase T"
git ls-files
 Test
 test 
```

报告什么`ls`？为什么，只是“测试”，自然：

```
ls
 Test 
```

最后，当我们修改Test时会发生什么？

```
echo garbage>Test
git status -s
 M Test
 M test 
```

真是一团糟。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T19:13:48.763

采用 。代替 -

```
git checkout . 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-16T17:31:29.187

由于某种原因，同样的事情发生在我身上，但这不是区分大小写的问题。删除文件，然后更改分支解决了这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-17T14:26:14.273

对我有什么帮助：（也改进了vinboxx的答案）

我已经通过`.gitattributes`以下方式进行了配置：

```
* text eol=crlf 
```

（我希望 -X renormalize 在合并后自动使用正确的格式）

在临时评论该行以及设置之后`git config core.autocrlf false`。一切都恢复了正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T19:13:50.920

如果要放弃所做的所有更改，只需使用

```
git checkout . 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-24T17:14:18.540

我遇到了同样的问题。我发现这两个有问题的文件有 DOS 行结束字符。我这样做是为了解决问题。

1-使用不同的克隆将行结尾更改为 UNIX 2-吹掉出现问题的克隆并重新克隆它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-03T22:44:10.067

为了避免下次出现这个问题，我决定将我的文件系统转换为区分大小写的。

我很惊喜地发现它在 Mac OS (10.13.4) 上非常简单。

可以快速创建具有不同文件系统的新磁盘卷：

*   运行磁盘工具
*   点击容器
*   点击音量 (+)

我将新卷命名为“项目”并将格式设置为 APFS（区分大小写）。

之后，我将所有项目移至新卷。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-07-12T21:05:21.160

我使用了 git checkout -- 。

还有 git checkout 。

== 与操作员所说的相同，Mac OSX 10.7 和 Linux 都适用，两者都适用

使用 git 版本 1.7.7.5 (Apple Git-26) 和 git 1.7.1 编译

尝试不同的 repo，看看是否得到相同的结果。也许是 git 版本中的命令错误？

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-07-12T19:20:38.610

当您使用“rm -r file”从文件系统中删除文件时，您不会从存储库中删除它。你需要在 git 中使用“git rm”做同样的事情

# dojo - 如何在 dojox.mobile.EdgeToEdgeList 中创建等高的 ListItems？

> ID：11458929
> 
> 赞同：0
> 
> 时间：2012-07-12T19:10:50.873
> 
> 标签：dojo, dojox.mobile

我有一个标准`dojox.mobile.EdgeToEdge`列表，里面有一组`dojox.mobile.ListItem`s。我需要确保每个列表项的高度相同。请参阅下面绘制不佳的表示：

`EdgeToEdgeList`带s 的标准`ListItem`：

```
+-------------------+
| Standard ListItem |
|-------------------|
| Standard ListItem |
|-------------------|
| Standard ListItem |
|-------------------|
| Standard ListItem |
+-------------------+ 
```

`EdgeToEdgeList`具有**可变高度**列表项的标准；通过`variableHeight`在列表项上设置属性来实现：

```
+-------------------+
| Standard ListItem |
|-------------------|
| Standard ListItem |
|-------------------|
| Standard ListItem |
| with some long    |
| text and variable |
| height that wraps |
| to next line      |
|-------------------|
| Standard ListItem |
+-------------------+ 
```

`EdgeToEdgeList`具有相等高度的列表项（较小的列表项“占据”最大高度）：

```
+-------------------+
|                   |
|                   |
| Standard ListItem |
|                   |
|                   |
|-------------------|
|                   |
|                   |
| Standard ListItem |
|                   |
|                   |
|-------------------|
| Standard ListItem |
| with some long    |
| text and variable |
| height that wraps |
| to next line      |
|-------------------|
|                   |
|                   |
| Standard ListItem |
|                   |
|                   |
+-------------------+ 
```

我正在尝试复制第三种解决方案。有没有标准的方法来做到这一点？

**编辑：**我没有提到我正在以编程方式构建列表，所以我事先不知道最大项目的高度。像这样的东西可以吗？

```
var largest = 0;
array.forEach(list.getChildren(), function(child) {
    var childHeight = domStyle.get(child.domNode, 'height');

    largest = (childHeight > largest) ? childHeight : largest;
});

array.forEach(list.getChildren(), function(child) {
    domStyle.set(child.domNode, 'height', largest + 'px');
}); 
```

这似乎有点“hack-y”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:39:14.727

覆盖`.mblListItem`CSS 类中的 height 属性。

我相信默认情况下高度是 43px。

**编辑：**我认为您的代码可以工作，但是您需要将`ListItem`'s 设置为 variableHeight 以便 Dojo 计算给每个高度的高度，然后取最大值并将其应用于每个高度。与您编写的类似，但添加了 variableHeight，然后在应用最大高度时将其删除。

```
var largestHeight = 0;
var list = dijit.byId("list");
dojo.forEach(data, function(record) {
    var listItem = new dojox.mobile.ListItem({
        label: data.label
        variableHeight: true,
    }); 
    list.addChild(listItem); 
    var currentHeight = (dojo.style(listItem.domNode, 'height');
    largestHeight = (currentHeight > largestHeight ? currentHeight : largestHeight);
});

dojo.query('.mblListItem', dojo.byId('list')).forEach(function(node) {
    dojo.removeClass(node, 'mblVariableHeight');
    dojo.style(node, 'height', largestHeight + 'px');
}); 
```

# html - 移动按钮下方的输入字段

> ID：11458932
> 
> 赞同：0
> 
> 时间：2012-07-12T19:11:04.400
> 
> 标签：html, css

我有一个问题如何设置。这是示例：http: [//jsfiddle.net/VBS4E/25/](http://jsfiddle.net/VBS4E/25/)

将输入字段移动到按钮正下方的好方法是什么？像这样：

```
 ________   __________   __________
|  Btn#1 |  |  Btn#2 |  |   Btn#3  |
 ________    _________   __________ 
```

当点击 Btn#2 时，

```
 ________   __________   __________
|  Btn#1 |  |  Btn#2 |  |   Btn#3  |
 ________    _________   __________
                 _____________
         Label: |_____________| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:15:10.717

您可以获取按钮的位置，然后使用 CSS 将字段绝对定位在其下方。我在顶部添加了 20，所以它在按钮下方 20px。

```
$(function(){
    $('div#Adv').hide();    
    $('.toggle-link').click(function(e){
        var pos = $(this).position();
        e.preventDefault();
        $('#Adv').css({
            position: "absolute",
            top: pos.top + 20 + "px",
            left: pos.left + "px"}).toggle('show');
    });
}); 
```

[**演示**](http://jsfiddle.net/VBS4E/27/)

# c++ - C++ 中的免费地理数据类库（Lat / Lng / distance / 转换）

> ID：11458933
> 
> 赞同：5
> 
> 时间：2012-07-12T19:11:08.750
> 
> 标签：c++, geolocation, geocoding, geospatial, class-library

我正在寻找一个免费的地理数据类库。我需要转换不同格式的纬度/经度值（例如[这里](http://www.rcn.montana.edu/resources/tools/coordinates.aspx/)），获取纬度/经度值之间的距离，范围内的坐标等。

谷歌向我展示了 C++ 中的几个单一方法/函数，这不是问题。例子

1.  [计算保存在文本文件中的 2 个纬度和经度之间的距离？](https://stackoverflow.com/questions/10198985/calculating-the-distance-between-2-latitudes-and-longitudes-that-are-saved-in-a)
2.  经纬度：http: [//www.codecogs.com/code/maths/geometry/spherical/latlong.php](http://www.codecogs.com/code/maths/geometry/spherical/latlong.php)

我正在寻找的是一个更完整/更复杂的类库，其中包含一些文档和示例。有什么提示吗？

- 编辑 -

LatLong 在 Javascript 中就是这样一个库：[http](http://www.movable-type.co.uk/scripts/latlong.html)
://www.movable-type.co.uk/scripts/latlong.html 还会检查（C++）： http: [//geographiclib.sourceforge.net/html/annotated.html](http://geographiclib.sourceforge.net/html/annotated.html)

-- 编辑 2 --

下面的转换方法是一个很好的开始，但是，如果有其他很棒的库，请告诉我。感谢所有做出贡献的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T21:01:05.253

[proj4](http://trac.osgeo.org/proj/)是您正在寻找的。它是一个严肃的绘图工具，成熟且备受推崇的投影 api。它主要用于在地理坐标 (lat/lng) 和平面 (x,y) 之间进行前向和后向转换。平面坐标的坐标几何比地理坐标简单得多。

文档不是最好的。因为它也可以用作独立程序，所以我会开始阅读[手册页](http://trac.osgeo.org/proj/wiki/man_proj)以获得介绍。命令行开关与使用 api 时用于初始化结构的参数相同。然后阅读[api 文档](http://trac.osgeo.org/proj/wiki/ProjAPI)——基本 API 函数下列出的函数调用很可能就是您所需要的。

**编辑**开始时对 OP 的评论：投影到平面坐标很有吸引力，原因有很多：坐标比较是线性单位而不是角度。距离变成了一个微不足道的斜边计算。轴对齐的矩形使用起来很直观。基本直角三角函数可用于计算新点，例如中点、偏移量等。这一切都是在该区域的范围不是很大的情况下，例如大陆规模 - 如果您的数据集在一个平方度范围内（那仍然是大）你会很好地使用这种方法。

# c# - 在 xml 注释中，我可以标记方法名称以便它们可重构吗？

> ID：11458936
> 
> 赞同：1
> 
> 时间：2012-07-12T19:11:15.140
> 
> 标签：c#, .net, visual-studio, xml-documentation

对于methodA()，我想使用/// xml 文档系统。我想记录应该在 methodA() 之前调用 methodB()。

假设有人将methodB（）重命名为renamedMethodB（），我希望将注释中的旧methodB（）引用更新为renamedMethodB（）。假设有人删除了methodB()（并且假设没有使用methodB()），我希望程序不编译，或者至少由于methodB()注释而产生警告，然后引用一个不再存在的方法.

我确定我在某个地方看到过这个例子，所以我认为它是可能的。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T07:29:27.967

如果用户使用 Visual Studio 的重构菜单，他将可以选择在字符串中搜索并对方法进行注释。如果他不这样做，则无法自动执行此操作。

为了降低丢失重命名的风险，请始终`<see cref="OtherMethod"/>`在您的评论中使用该结构。如果无法解析方法名称，则会产生警告。

例子 ：

```
/// <summary>
/// This method will call <see cref="MethodB"/>
/// </summary>
public void MethodA()
{
    MethodBNew();
}

/// <summary>
/// Some method
/// </summary>
public void MethodBNew() // Formerly MethodB
{
} 
```

此代码将产生警告。

PS：我假设在项目属性中激活了 Build Xml 文档选项，但我相信如果你问过这样的问题。

# caching - 将数据缓存到服务器上的文件中，而不是执行 SQL 调用。更快，更慢？

> ID：11458940
> 
> 赞同：0
> 
> 时间：2012-07-12T19:11:29.173
> 
> 标签：caching, data-storage

我知道这会带来安全风险，但我只是在想不通；将一些非敏感的、经常访问的数据存储在文件中（在同一台服务器上）是否比每次从数据库中提取这些信息更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:32:25.230

答案取决于各种不同的方面。命名视图：

*   从数据库中获取的数据是否*易于*访问？也就是说，生成答案所需的查询是否已优化（索引、查询缓存可能）？
*   您是否在从数据库中提取数据后对其进行后处理？如果是这样，由于某种动态属性（例如需要以实时汇率转换为另一种货币的货币价值），是否可以缓存结果或不可能？
*   假设您要将数据缓存在文件中，是否可以将其写入内存文件系统而不是不断地访问磁盘。
*   这些数据多久更改一次？经常？经常这样吗？

您必须考虑所有这些（以及更多，一旦你开始思考）方面。

# excel - 从两个不同的 VB (excel) 模块调用子函数/模块

> ID：11458941
> 
> 赞同：5
> 
> 时间：2012-07-12T19:11:39.297
> 
> 标签：excel, vba

我有一个要从各种模块调用的函数。在 VB (excel) 中执行此操作的最佳方法是什么。

模块“SheetExists”

```
Function Name(SheetName As String) As Boolean
' returns TRUE if the sheet exists in the active workbook
    SheetExists = False
    On Error GoTo NoSuchSheet
    If Len(Sheets(SheetName).Name) > 0 Then
        SheetExists = True
        Exit Function
    End If
NoSuchSheet:
End Function 
```

模块“主要”

```
If Not SheetExists.Name("mySheet") Then
    'do this
Else
    ' else do this
End If 
```

我*不想*这样做，还是我这样做？

```
Call SheetExists.Name("mySheet") 
```

这是从另一个模块调用函数的唯一方法吗？我是否必须将其声明为公共函数或其他内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T20:11:45.580

不，您不必这样做，您可以从任何地方调用您的函数。

尝试这个：

将此代码放在 Module1 中：

```
Sub TestSheetExists()
    If SheetExists("Sheet1") Then
        MsgBox "I exist!"
    End If
End Sub 
```

这在 Module2 中：

```
Function SheetExists(shtName As String, Optional wb As Workbook) As Boolean
    Dim sht As Worksheet

     If wb Is Nothing Then Set wb = ThisWorkbook
     On Error Resume Next
     Set sht = wb.Sheets(shtName)
     On Error GoTo 0
     SheetExists = Not sht Is Nothing
 End Function 
```

显然，您可以为您想要的模块使用任何名称。

* * *

**编辑：**我看到从不同模块调用仍然不适合你。完全按照这些步骤设置可以帮助您理解问题的测试工作簿。

1.  创建一个新的 Excel 工作簿
2.  打开 VBA 编辑器 (Alt-F11)
3.  右键单击项目并选择插入模块。重复此 4 次以获得 4 个模块。
4.  按 F4 打开属性窗口（如果尚未打开）
5.  将您的模块名称更改为以下内容：CallMe、CallMeAgain、CallMeBack、Validation ![重命名模块](../Images/053c7ede64bcda24392d531a55a2d219.png)
6.  在验证模块中，粘贴以下函数：

    ```
    Function SheetExists(shtName As String, Optional wb As Workbook) As Boolean
        Dim sht As Worksheet

         If wb Is Nothing Then Set wb = ThisWorkbook
         On Error Resume Next
         Set sht = wb.Sheets(shtName)
         On Error GoTo 0
         SheetExists = Not sht Is Nothing
    End Function 
    ```

7.  将此子粘贴到 CallMe 中：

    ```
    Sub TestSheetExistsFromCallMe()
        If SheetExists("Sheet1") Then
            MsgBox "I exist, and I was called from CallMe!"
        End If
    End Sub 
    ```

8.  将此粘贴到 CallMeBack 中：

    ```
    Sub TestSheetExistsFromCallMeBack()
        If SheetExists("Sheet1") Then
            MsgBox "I exist, and I was called from CallMeBack!"
        End If
    End Sub 
    ```

9.  将此粘贴到 CallMeAgain 中：

    ```
    Sub TestSheetExistsFromCallMeAgain()
        If SheetExists("Sheet1") Then
            MsgBox "I exist, and I was called from CallMeAgain!"
        End If
    End Sub 
    ```

10.  按 F5 从 CallMe 中运行代码。您应该看到以下消息框： ![在此处输入图像描述](../Images/d653e14efe92f5840ddbe98850f2e1dd.png)

11.  从 3 个“调用”模块中的任何一个运行代码，您应该会看到相应的消息框。

我从 Tim Williams ( [https://stackoverflow.com/a/6688482/138938](https://stackoverflow.com/a/6688482/138938) ) 那里得到了 SheetExists 函数并一直使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:35:39.470

在类模块中声明的函数必须以类名开头，例如class.function。在普通模块中声明的函数具有一般范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T17:07:36.800

另外，如果你碰巧用下划线命名你的子，VBA 不喜欢它。

“Subroutine_Name”不起作用，但是

“子程序名称”将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:27:55.890

问题是excel没有明确说明函数具有全局范围。

AND 模块名称不能与函数名称相同（显然）。

看来，只要模块名称与任何其他函数名称不相似，excel VB 将允许您从任何其他模块调用函数，从而有效地为所有函数提供全局范围......？！？这与大多数编程语言非常不同，因为通常您调用模块（或类）.function() 而不仅仅是 function()。excel中的所有函数都具有全局范围真的是真的吗？那有点不一样...

模块“SheetChecker”（名称不能与函数名相同）

```
Function SheetExists(SheetName As String) As Boolean
' returns TRUE if the sheet exists in the active workbook
    SheetExists = False
    On Error GoTo NoSuchSheet
    If Len(Sheets(SheetName).Name) > 0 Then
        SheetExists = True
        Exit Function
    End If
NoSuchSheet:
End Function 
```

模块“任何其他模块”

```
SheetExists("mysheet") 
```

*注意*在模块（子块之外）中声明的函数在 VB Excel 中具有全局范围（似乎）。

# javascript - 从 iframe 中选择具有相同类名的两个 DIV 中的第二个

> ID：11458943
> 
> 赞同：1
> 
> 时间：2012-07-12T19:11:41.797
> 
> 标签：javascript, jquery, ajax

我有一个带有多个`div`标签的 iframe。我无法控制 div 类名。

为此，我有 2 个具有相同类名的 DIV，我想选择第二个 DIV，其内容包含在此 DIV 中。直到现在我什么都做不了，我只能使用下面的代码检索整个 iframe。

```
var myIFrame = document.getElementById("iframe");
var content = myIFrame.contentWindow.document.body.innerHTML;
alert(content);   
$("#comment").val(content); 
```

如何检索第二个 DIV 的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:16:31.903

这将为您提供第二个 div 的内容`.className`

```
$("div.className:eq(1)", content).html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:16:39.357

尝试这个：

```
$('#iframe').contents().find('div.myClass').eq(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:20:09.377

如果 iframe 是同一个域，则可以轻松访问元素

```
$("#iframe").contents().find(".somediv").eq(1); 
```

参考：[http ://simple.procoding.net/2008/03/21/how-to-access-iframe-in-jquery/](http://simple.procoding.net/2008/03/21/how-to-access-iframe-in-jquery/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T19:17:20.027

尝试导航到第二个 div 而不是停在 body 上。

```
var content = myIFrame.contentWindow.document.body.childNodes[1].innerHTML; 
```

或者

```
var content = myIFrame.contentWindow.document.getElementsByTagName("div")[1].innerHTML; 
```

# r - R中的网页抓取

> ID：11458948
> 
> 赞同：0
> 
> 时间：2012-07-12T19:12:08.393
> 
> 标签：r, web-scraping

我正在尝试获取 'Dated Posted' 和 'Date Updated' 的值[，如图所示](https://imgur.com/sfgtz)。网址为：[http ://sulit.com.ph/3991016](http://sulit.com.ph/3991016)

我觉得我应该使用 xpathSApply，正如这个线程[Web Scraping (in R?) 中](https://stackoverflow.com/questions/5830705/web-scraping-in-r)所建议的那样，但我就是无法让它工作。

```
url = "http://sulit.com.ph/3991016"
doc = htmlTreeParse(url, useInternalNodes = T)

date_posted = xpathSApply(doc, "??????????", xmlValue) 
```

还有人知道在网站上也列出“P27M”这个短语的快速方法吗？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T06:07:09.553

这是另一种方法。

```
> require(XML)
> 
> url = "http://www.sulit.com.ph/index.php/view+classifieds/id/3991016/BEAUTIFUL+AYALA+HEIGHTS+QC+HOUSE+FOR+SALE"
> doc = htmlParse(url)
> 
> dates = getNodeSet(doc, "//span[contains(string(.), 'Date Posted') or contains(string(.), 'Date Updated')]")
> dates = lapply(dates, function(x){
+         temp = xmlValue(xmlParent(x)["span"][[2]])
+         strptime(gsub("^[[:space:]]+|[[:space:]]+$", "", temp), format = "%B %d, %Y")
+ 
+ })
> dates
[[1]]
[1] "2012-07-05"

[[2]]
[1] "2011-08-11" 
```

无需使用 RCurl，因为 htmlParse 将解析 url。getNodeSet 将返回一个列表，其中包含具有“发布日期”或“更新日期”作为值的节点。lapply 在这两个节点上循环，首先找到父节点，然后找到第二个“span”节点的值。如果网站更改了不同页面的格式（在查看该网站的 html 之后似乎很有可能），这部分可能不是很健壮。SlowLearner 的 gsub 会清理这两个日期。我添加了 strptime 以将日期作为日期类返回，但该步骤是可选的，取决于您计划在未来如何使用这些信息。高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:26:32.773

这不是优雅的，可能不是很健壮，但它应该适用于这种情况。

调用后的前 4 行`require`检索 URL 并提取文本。`grep`返回一个`TRUE`或`FALSE`取决于我们正在寻找的字符串是否已找到，将`which`其转换为列表中的索引。我们将其加 1，因为如果您查看，`cleantext`您会发现更新日期是列表中字符串“更新日期”之后的下一个元素。所以`+1`我们得到了“更新日期”之后的元素。`gsub`线条只是清理字符串。

“P27M”的问题在于它没有锚定在任何东西上——它只是漂浮在任意位置的自由文本。如果您确定价格始终是“P”后跟 1 到 3 位数字，然后是“M”并且页面中只有一个这样的字符串，那么 grep 或 regex 将起作用，否则很难得到。

```
require(XML)
require(RCurl)

myurl <- 'http://www.sulit.com.ph/index.php/view+classifieds/id/3991016/BEAUTIFUL+AYALA+HEIGHTS+QC+HOUSE+FOR+SALE'
mytext <- getURL(myurl)
myhtml <- htmlTreeParse(mytext, useInternal = TRUE)
cleantext <- xpathApply(myhtml, "//body//text()[not(ancestor::script)][not(ancestor::style)][not(ancestor::noscript)]", xmlValue)

cleantext <- cleantext[!cleantext %in% " "]
cleantext <- gsub("  "," ", cleantext)

date_updated <- cleantext[[which(grepl("Date Updated",cleantext))+1]]
date_posted <- cleantext[[which(grepl("Date Posted",cleantext))+1]]
date_posted <- gsub("^[[:space:]]+|[[:space:]]+$","",date_posted)
date_updated <- gsub("^[[:space:]]+|[[:space:]]+$","",date_updated)

print(date_updated)
print(date_posted) 
```

# wix - Wix - 如何在卸载期间仅删除应用程序根目录

> ID：11458950
> 
> 赞同：0
> 
> 时间：2012-07-12T19:12:13.153
> 
> 标签：wix

使用 Wix 3.5，有没有办法限制卸载期间删除的目录？以下是我正在使用的结构：

```
<Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="CommonAppDataFolder" Name="CommonAppDataFolder">
        <Directory Id="CommonAppDataSubFolder1" Name="SubFolder1">
          <Directory Id="CommonAppDataSubFolder2" Name="SubFolder2">
            <Directory Id="CommonAppDataSubFolder3" Name="SubFolder3">
              <Directory Id="APPLICATIONROOTDIRECTORY" Name="My_App">
              </Directory>
            </Directory>
          </Directory>
        </Directory>
      </Directory>
</Directory> 
```

在这种情况下，我只想在卸载期间删除“APPLICATIONROOTDIRECTORY”。我的应用程序是另一个供应商的父应用程序的插件。插件开发人员应该安装到特定目录，但在卸载期间不删除整个文件夹结构。我想保留子文件夹 1 到 3。

谢谢你，

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:26:10.720

如果这些目录不为空，WiX 将不会删除它们。

更新：在你的情况下，如果目录是空的并且你想让它们卸载，我建议从你的安装程序中删除目录结构。相反，使用自定义操作设置包含安装目录的属性，然后安装到该目录。我认为这可能有效（但尚未测试）。

# svn - cherrypick svn 将分支合并到主干，然后与--reintegrate 合并？

> ID：11458951
> 
> 赞同：3
> 
> 时间：2012-07-12T19:12:14.153
> 
> 标签：svn, branching-and-merging

所以我有这个项目，在 2 个版本中同时进行工作，主干和分支 1。在某些时候，我被告知“不要再为 rel1 进行构建，在 rel2 中修复这些错误。” 因此，我在 branch1 中进行了错误修复，这些错误修复也适用于主干。后来我被告知“如果我们发布带有那些已知错误的 rel1，那将是一个很大的 PITA。请在 rel1 中也修复它们。”

所以，我的问题是（~/rel1 是主干的当前、未修改的工作副本。RevM、RevN 是分支 1 中的修订号，用于我想要合并回主干的一系列修订）：

如果我做一个

```
cd ~/rel1
svn merge -r RevM:RevN ^/branch1 
```

它将如何影响以后`svn merge --reintegrate`从分支到主干？请记住，branch1 之前有修订，之后`RevM`会有更多修订`RevN`。特别是，当我最终重新集成时，是否会像我最初在 rel1 中完成修复并将它们合并到 rel2 一样，就像一开始就应该做的那样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T23:01:41.077

从树枝到树干的樱桃采摘变化也总是让我心烦意乱。这是一个应该适用于您的情况的解决方案，诀窍是阻止精心挑选的更改再次合并到分支中。

```
cd ~/rel1
svn merge -r RevM:RevN ^/branch1
svn commit -m "cherry pick RevM:RevN from branch1 into rel1" 
```

现在假设这个提交创建了 RevX。进入您的分支并使用该`--record-only`选项阻止此修订版将来进行合并操作。

```
cd ../branch1
svn merge -c RevX --record-only ^/rel1
svn commit -m "mark RevX as already merged to block it from future merge actions" 
```

现在您应该能够像往常一样将进一步的更改从`rel1`to`branch1`再次合并，并且在您完成后将您的分支重新集成到 rel1 中。

# jquery - Caroufredsel 问题：双方都不能正常工作，只能“向左”工作

> ID：11458952
> 
> 赞同：0
> 
> 时间：2012-07-12T19:12:16.133
> 
> 标签：jquery, caroufredsel

除了 Jquery 和 Caroufredsel，我没有使用任何东西。我正在使用 Wordpress 生成的条目。

当它向左移动时它工作得很好，但是当它自动滚动到右边或者当我点击右边的分页时它完全疯了。

现场示例在这里： [http ://apolinariopassos.com.br/nutricao/](http://apolinariopassos.com.br/nutricao/)

代码是：header.php

```
<script src="<?php echo get_template_directory_uri(); ?>/js/jquery-1.7.2.min.js"></script>
<script src="<?php echo get_template_directory_uri(); ?>/js/carouFredSel.js"></script>
<script type="text/javascript">
$(document).ready(function($) {
    $('#carrossel_home_pg').carouFredSel({
    prev: {
        key: "left"
    },
    next: {
        key: "right"
    },
    pagination: "#texto-slider-paginacao"
    });
});
</script> 
```

索引.php

```
<div id="carrossel_home_pg">
                    <?php $the_query = new WP_Query( array('post_type' => 'post', 'cat' => '8', 'posts_per_page' => '3', 'category_name' => 'slider-home')); 
                          while ( $the_query->have_posts() ) : $the_query->the_post(); 
                    ?>
                            <?php the_post_thumbnail(); ?>   

                    <?php endwhile; ?>
                </div>
                <div id="texto-slider-paginacao" class="pagination"></div> 
```

生成的代码在实时示例中。

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T02:00:13.833

我在我的 javascript 中遇到了类似的错误，但是我使用的是 node.js 而不是 php ......

当 carouFredSel 函数被调用而不是让它在 $(document).Ready 上运行时，我不得不添加一个超时。您可以在 $(document).ready 函数中尝试以下内容：

```
function spec(){
    $('#carrossel_home_pg').carouFredSel({
    prev: {
        key: "left"
    },
    next: {
        key: "right"
    },
    pagination: "#texto-slider-paginacao"
    });
}
$(window).load(function() {
    setTimeout(spec(), 100);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T13:00:25.897

我发现这个错误的原因可能是**display:none** of carousel container。所以这可以通过在 wrapper 变成**display:block**之后初始化插件来解决。

# c++ - 初始化 std::map 迭代器类成员

> ID：11458957
> 
> 赞同：3
> 
> 时间：2012-07-12T19:12:32.440
> 
> 标签：c++, iterator, initialization, decltype

我正在尝试这样做：

```
typedef std::map<std::string, time_t> my_map;
const mymap& some_function();

class bla
{
private:
  my_map::iterator current
  bla(const mymap& m) : current(m.begin())
  {   }
} 
```

它不工作。更复杂的实际错误消息是：

> 错误：没有匹配函数调用'std::_Rb_tree_iterator, long int> >::_Rb_tree_iterator(std::map, long int>::const_iterator)'

我尝试将初始化/分配移动到构造函数主体：

```
{ current = m.begin(); } 
```

这也不起作用。所以我想，的类型`current`是错误的，所以我只是让编译器推断：

```
...
   decltype(my_map::begin()) current;
... 
```

这也不起作用。

我只需要一个在`bla`构造时设置的迭代器成员，因此我不必在一些愚蠢的额外函数中显式设置它，并且可以通过以下方式在外部迭代地图：

```
bool bla::do_stuff(...output...)
{ 
    if(current = m.end())
        return false;
    balblabla(current);
    ++current;
    return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T19:17:08.030

您正在尝试分配`const_iterator`给`iterator`. 有两种解决方案：

1.  通过非常量引用 ( `bla(my_map& m) : current(m.begin()) {}`) 获取地图。
2.  将成员类型更改为`const_iterator`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T19:15:51.593

在 const 上下文中，您只能获得`const_iterator`：

```
my_map::const_iterator current;
bla(const my_map & m) : current(m.begin()) { } 
```

`bla`如果你想要一个非常量迭代器，你必须从一个非常量引用构造你的对象。

# java - Mockito - 预期 0 个匹配器，记录 1 个（InvalidUseOfMatchersException）

> ID：11458963
> 
> 赞同：15
> 
> 时间：2012-07-12T19:12:52.527
> 
> 标签：java, exception, mocking, mockito

我正在尝试模拟一些 mongo 类，这样我就不需要连接（相当标准的东西），但是下面的代码给我带来了问题：

```
when(dbCollection.find(isA(DBObject.class))).thenReturn(dbCursor); 
```

运行这个得到我：

> org.mockito.exceptions.misusing.InvalidUseOfMatchersException：
> 参数匹配器的使用无效！
> 预期 0 个匹配器，记录 1 个：
> 在 ...GridFileManagerTest.beforeClass(GridFileManagerTest.java:67)
> 
> 如果匹配器与原始值组合，则可能发生此异常：
> //incorrect: someMethod(anyObject(), "raw String");
> 
> 使用匹配器时，所有参数都必须由匹配器提供。
> 例如：
> //正确：
> someMethod(anyObject(), eq("String by matcher"));
> 
> 有关更多信息，请参阅 Matchers 类的 javadoc。

如果我要这样做：

```
when(dbCollection.find(mock(DBObject.class))).thenReturn(dbCursor); 
```

它不再有这个问题。这似乎并没有完成我想要的 - 我想在使用 DBObject 类型的对象调用该方法时返回该值。

想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-12T23:00:33.780

`dbCollection`我认为您的结果与如果不是 Mockito-mock （或者您的方法是静态或最终方法）会发生的结果兼容。这意味着在无法使用匹配器的地方使用匹配器；因此“预期 0 个匹配器，记录 1 个”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-12-03T00:20:00.567

如果你有默认参数，同样的问题可以在 Scala 中重现。看起来您为每个参数都提供了 any()，但您应该验证方法定义没有任何可能会搞砸的默认参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-10T11:02:44.413

可能不相关，但是当我发现包私有方法时遇到了同样的错误。将其更改为 public 为我解决了这个问题。

# zend-framework - 对 zend 模型使用级联删除时运行函数

> ID：11458968
> 
> 赞同：0
> 
> 时间：2012-07-12T19:13:05.160
> 
> 标签：zend-framework, models

大家下午好，我直接进入正题。我的模型中有这段代码：

```
protected $_referenceMap = Array (
    "Imagens" => Array(
        "columns"       => Array (
            'paiId'
        ),
        "refTableClass" => "ModeloImagem",
        "refColumns"    => Array(
            "id"
        ),
        "onDelete" => self::CASCADE
    )
); 
```

我必须删除要在级联上调用的桌子上的图像，所以我想知道是否有类似的东西：

```
protected $_referenceMap = Array (
    "Imagens" => Array(
        "columns"       => Array (
            'paiId'
        ),
        "refTableClass" => "ModeloImagem",
        "refColumns"    => Array(
            "id"
        ),
        "onDelete" => function() {
            foreach($image as $i) {
                unlink($i);
            }
            return self::CASCADE
        }
    )
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:16:55.323

哪有这回事。您可以做的是扩展 Zend_Db_Table 的方法`_cascadeDelete($parentTableClassname, array $primaryKey)`来执行该功能。

这是*一种*方法，尽管它是大量的代码重复；您可能必须指定要传递给回调的自己的数据，或者根据回调或查询是否失败来修改行为：

```
class My_Db_Table extends Zend_Db_Table
{
    const ON_DELETE_CALLBACK = 'onDeleteCallback';

    /**
     * Called by parent table's class during delete() method.
     *
     * @param  string $parentTableClassname
     * @param  array  $primaryKey
     * @return int    Number of affected rows
     */
    public function _cascadeDelete($parentTableClassname, array $primaryKey)
    {
        $rowsAffected = 0;
        foreach ($this->_getReferenceMapNormalized() as $map) {
            if ($map[self::REF_TABLE_CLASS] == $parentTableClassname && isset($map[self::ON_DELETE])) {
                switch ($map[self::ON_DELETE]) {
                    case self::CASCADE:
                        for ($i = 0; $i < count($map[self::COLUMNS]); ++$i) {
                            $col = $this->_db->foldCase($map[self::COLUMNS][$i]);
                            $refCol = $this->_db->foldCase($map[self::REF_COLUMNS][$i]);
                            $type = $this->_metadata[$col]['DATA_TYPE'];
                            $where[] = $this->_db->quoteInto(
                                $this->_db->quoteIdentifier($col, true) . ' = ?',
                                $primaryKey[$refCol], $type);
                        }
                        $this->_executeCallback($map, $where);
                        $rowsAffected += $this->delete($where);
                        break;
                    default:
                        // no action
                        break;
                }
            }
        }
        return $rowsAffected;
    }

    private function _executeCallback($map, $where) {
        if (isset($map[self::ON_DELETE_CALLBACK]) && is_callable($map[self::ON_DELETE_CALLBACK])) {
            call_user_func($map[self::ON_DELETE_CALLBACK], $where);
        }
    }
} 
```

然后，您可以使用它来定义回调函数。但是，您不能在回调函数中定义级联；否则每次 Zend_Db_Table 试图确定是否从图像表中删除条目时，所有图像都会被删除。

```
protected $_referenceMap = Array (
    "Images" => Array(
        "columns"       => Array (
            'paiId'
        ),
        "refTableClass" => "ModeloImagem",
        "refColumns"    => Array(
            "id"
        ),
        "onDelete" => self::CASCADE,
        "onDeleteCallback" => function($where) {
            // Determine which image to unlink
            unlink($image);
        }
    )
); 
```

# python - Google App Engine - 选择正确的方向

> ID：11458969
> 
> 赞同：0
> 
> 时间：2012-07-12T19:13:05.497
> 
> 标签：python, django, google-app-engine, webapp2

两周前我开始使用 GAE、WebApp2、Jinja2 和 WTForms 进行 Web 开发。

我阅读了几篇文章、讨论、观看了有关使用 gae (udacity) 进行 Web 开发的课程，并开始了一个小项目。

现在我在网络开发方面非常缺乏经验，我不知道我应该选择哪条路。

.

.

最近几天我在 GAE 和 webapp2 上闲逛。它非常易于使用。但我不得不说我只使用了 webapp2 有一个请求处理程序。（发布/获取）

对于模板，我采用了 Jinja2，这也是不言自明的。

.

.

现在来自 Reddit 的 Steve 说，使用轻量级框架总是比使用非常大的框架更好，因为您拥有更多控制权并且可以更轻松地扩展。

但我仍然想调查 Django-nonrel。我知道 Django 在 GAE 中受到限制。

但老实说，我什至不知道 Django 为我做了什么，（与带有 Jinja2 的 WebApp2 相比）

现在我的问题：

你会推荐一个初学者来看看 Django 吗？如果我更有经验 => 替换一些 Django 代码。

坚持使用 WebApp2 +“一些模板引擎”？

.

.

PS：我不问哪个框架最好，只是想提几点考虑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T00:55:52.893

如果您对 webapp2（python 2.7 的轻量级官方谷歌应用引擎框架）感兴趣，我建议您从样板文件或示例项目开始。我个人推荐[https://github.com/coto/gae-boilerplate](https://github.com/coto/gae-boilerplate)。我环顾四周，我认为它是目前最全面、积极维护和最新的 webapp2 样板。

样板项目有助于启动更多传统的网站和 web 应用程序，但我认为即使你想从事一些不那么传统的事情，比如 web 服务或在线 api，它也值得一看。

如果缺少一两个功能，您可以随时将它们添加到问题列表中，或者像我一样自己贡献它们。上面提到的 Flask Engine 是烧瓶路线的一个很好的替代方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T20:44:59.013

简短的回答是，您可能会选择任何一种方式，都会有一些优点/一些缺点，但我认为这两种方式都不是纯粹的胜利。

以下是使用 Django-nonrel 作为新手的一些优点：

*   django 文档通常都很好。因此，它可以帮助您快速掌握一些最佳实践
*   CSRF 保护
*   表单验证
*   会话
*   授权
*   i8n 工具
*   你花更少的时间把各种基本的部分放在一起，django 有很多适合你的。
*   您可以在 FB/Twitter auth 之类的东西上节省时间，因为有第三方 django 包。
*   Tastypie 是一个很好的 rest api 包，虽然你可能不需要它与新的 Endpoints
*   django 测试框架很棒，尽管 Django 1.4 实时测试框架（甚至更好）不适用于 App Engine。我昨天才发现，并且正在尝试（到目前为止没有结果）破解它来工作。
*   django 有一个简单的工具用于将数据库转储到 json。这对于测试目的非常有用，用于加载/保存夹具。否则，您必须自己想办法做到这一点。

缺点：

*   Django-nonrel 不是最新最好的。一方面，你不会有 ndb 的好处。
*   虽然 django 文档很棒，但 django-nonrel 文档不是，所以你必须弄清楚设置部分。一直想写一篇文章，但是一直没有时间。
*   花在学习 django 上的时间也可以花在学习其他东西上，但我认为 django 的学习时间可能比学习几个不同的部分要少。
*   有人说 django 超重，加载时间更长。django-nonrel 包括所有 django-contrib 插件。我已经删除了其中的许多并且没有加载时间问题。（手指交叉）
*   可能有更多的人在使用 webapp2+jinja，我没有看到太多独立的人在 django-nonrel 特定问题上发表意见，尽管那些确实很有帮助。另一方面，如果你遇到一个通用的 django 问题，那么会有很多 django 用户。

不过我可以说的一件事是，如果你为 django 写过东西，那么你就很难从它零碎地摆脱它。您必须先更换您正在使用的所有部件，然后才能摆脱它，否则，您仍然必须包含大部分包。

我知道的使用 django 的替代方法是 gae-boilerplate。它试图做同样的事情，但有各种不同的部分。尽管 imo 仍然需要一个好的测试框架。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T15:36:34.570

我将解决您的第二个问题/部分，关于是否使用 webapp2 或其他模板框架。我处于类似的位置，在编写个人项目的同时学习 Python 和 GAE，并寻找一个易于学习、推断和高效使用 GAE 环境的代码库。我没有尝试过 webapp2，但发现了另一个可能值得一看的框架。当然，您的里程会有所不同。

具体来说，我在 GitHub 上找到了 Flask-Engine 作为框架，PyCharm 作为我的编辑器。Flask-Engine 可以在这里找到：

[https://github.com/zachwill/flask-engine](https://github.com/zachwill/flask-engine)

PyCharm 可以在这里找到：

[http://www.jetbrains.com/pycharm/](http://www.jetbrains.com/pycharm/)

Flask-Engine 包括 Flask、HTML5Boilerplate 和许多其他有用的工具，它们都集成了。以及一个简单的待办事项应用程序和电子邮件页面。进入代码以了解在何处添加代码相当容易。它还包括使 Flask 和其他工具工作的所有 GAE 配置文件。我发现它是交钥匙的：我将文件上传到一个空文件夹，在 PyCharm 中添加了一个项目，然后调用了一个 Web 浏览器。

我在 Flask-Engine 中发现的唯一难以理解的问题是，至少在 Mac OSX (Lion) 上，设置代码并不完全准确：您将模板代码下载到一个空的项目文件夹中。设置代码说您将文件下载到项目中；在我将空项目文件夹路径添加到命令行之前，这种方法对我不起作用。然后，您在 PyCharm（和 GAE App Launcher）中添加一个项目，该项目指向您现在填充的项目文件夹。

对于 Python，PyCharm 非常有用，因为它为 GAE 项目以及 Django 提供了工具，以及一整套调试工具。我发现 99 美元的个人许可证没问题。有 15 或 30 天的免费试用期。我尝试了 Eclipse，但发现它太复杂了。当然还有其他很棒的 IDE。

# javascript - 在jquery上禁用缓存

> ID：11458970
> 
> 赞同：1
> 
> 时间：2012-07-12T19:13:09.687
> 
> 标签：javascript, jquery, caching, jstree

单击 jstree 节点时，我正在使用 jquery 和 jstree 插件加载一些图像。看起来当我单击 jstree 节点时，它首先检查缓存，如果不在缓存中，则会发生错误。我必须再次单击该节点才能从服务器加载它。（如果缓存中的图像，第一次单击节点有效。）

因此，最终用户的行为并不一致。第一次单击 jstree 节点，我应该去服务器检索图像并将其放入 div 中。我已经研究了一段时间了，我想不出任何解决方案。

我正在接触这个社区，也许有人以前见过这个并且可以提供帮助。

```
$(document).ready(function() {
    $("#div_tree").jstree({
        "xml_data": {
            "ajax": {
                "url": "tree.xml"
            },
            "xsl": "nest"
        },
        "plugins": ["themes", "xml_data", "ui", "types"]
    }).bind("select_node.jstree", function(event, data) {
        var node_id = data.rslt.obj.attr("id");
        if (node_id = "tree_a") {
            $("#mydiv").html(myPic1);
        } 
```

是否有一种快速禁用 jquery 缓存的方法，以便每次单击 jstree 节点时，我都应该从服务器获取图像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T19:22:09.527

是的，您可以使用[ajaxSetup。](http://api.jquery.com/jQuery.ajaxSetup/)

```
$.ajaxSetup({
    cache: false
});
$(document).ready(... 
```

# django - 如何访问 Django-CMS 插件中的请求对象？

> ID：11458974
> 
> 赞同：15
> 
> 时间：2012-07-12T19:13:17.847
> 
> 标签：django, plugins, request, django-cms, paginator

我有一个 Django-CMS 插件，用于显示对象列表。该插件所需的功能是列表是分页的，并且可以根据列表中对象的属性重新排序。

在这种特殊情况下，用 ajax 处理这个功能并不是一个理想的解决方案，所以我计划使用 django Paginator，它需要一个“page”查询字符串参数，并传递一个“order”查询字符串参数，然后我将使用它来定义顺序查询集。

问题是我无论如何都看不到从插件渲染函数中访问请求对象。

有谁知道是否可以从渲染函数中访问请求对象，或者可以提出解决方法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-12T20:28:12.867

CMSPluginBase 的 render 方法接受一个上下文对象。如果您的视图使用 RequestContext 实例，您应该能够通过该对象访问请求。

```
class MyCoolPlugin(CMSPluginBase):

    def render(self, context, instance, placeholder):

         #Do something with the request, like access the user
         current_user = context['request'].get('user', None)
         ... 
```

# android - sencha touch 2 无法在我的安卓手机中启动

> ID：11458977
> 
> 赞同：1
> 
> 时间：2012-07-12T19:13:22.590
> 
> 标签：android, sencha-touch-2

我完全按照本教程[http://docs.sencha.com/touch/2-0/#!/guide/getting_started](http://docs.sencha.com/touch/2-0/#!/guide/getting_started) 我的应用程序正在我的网络浏览器（在我的笔记本电脑中）上运行，它是为 Android 生成的。但是当我安装并启动它时，蓝屏上仍然有加载图标。有什么想法吗？

谢谢

```
Ext.define("GS.view.Main", {
    extend: 'Ext.tab.Panel',
    requires: [
        'Ext.TitleBar'
    ],
    config: {
        tabBarPosition: 'bottom',

        items: [{
                xtype : 'homePanel'
            }
        ]
    }
});

Ext.define('GS.view.Home', {
    extend : Ext.Panel,
    xtype : 'homePanel',

    config : {
        title : 'Home',
        iconCls : 'home',
        scrollable : true,
        styleHtmlContent : true,

        html: [
            '<img src="http://staging.sencha.com/img/sencha.png" />',
            '<h1>Welcome to Sencha Touch</h1>',
            "<p>You're creating the Getting Started app. This demonstrates how ",
            "to use tabs, lists and forms to create a simple app</p>",
            '<h2>Sencha Touch (2.0.0)</h2>'
        ].join("")
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:41:08.733

您的代码有小错误，请尝试以下操作：

```
Ext.define('GS.view.Main' , {
     extend: 'Ext.TabPanel',

     config: {
        fullscreen: true,
        styleHtmlContent: true,
        tabBarPosition: 'bottom',

        items: [{
                 xtype : 'homePanel'
                }
       ]
    }
}); 
```

**我希望这有帮助。:)**

![在此处输入图像描述](../Images/5ecd096499fb6c2c9d9c3d34719b9394.png)

# c++ - 如何清除 std::ostringstream 实例以便可以重用？

> ID：11458980
> 
> 赞同：6
> 
> 时间：2012-07-12T19:13:28.553
> 
> 标签：c++, string, std, stringstream

> **可能重复：**
> [如何重用 ostringstream？](https://stackoverflow.com/questions/624260/how-to-reuse-an-ostringstream)

我一直在使用`std::ostringstream`将值转换为字符串`float`，`int`但无论如何我都找不到重用实例。为了说明我的意思，以下是我尝试用来清除流的方法

```
 #include <iostream>
 #include <sstream>
 using namespace std;

 int main() {
   ostringstream stream;
   stream << "Test";
   cout << stream.str() << endl;  
   stream.flush();                
   stream << "----";
   cout << stream.str() << endl; 
   stream.clear();
   stream << "****";
   cout << stream.str() << endl;
   return 0;
 } 
```

生成输出

```
 Test
 Test----
 Test----**** 
```

这给了我一个问题，因为我必须创建许多实例，`ostringstream`这些实例是浪费的。显然`clear()`，`flush()`不要做我需要的事情，所以有没有办法做到这一点？我检查了[http://www.cplusplus.com/reference/iostream/ostringstream/](http://www.cplusplus.com/reference/iostream/ostringstream/)上的文档，但那里似乎没有任何东西可以满足我的需求。有没有办法重置或清除流？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-12T19:17:21.687

用于`stream.str("");`使基础字符串为空。更好的是，不要重用对象。在 C++ 中，哲学是在需要时创建对象并在完成时处理它：

```
{
    std::ostringstream oss;
    oss << 10;
    std::cout << oss.str();
}

{
    std::ostringstream oss;
    oss << 20.5;
    std::cout << oss.str();
} 
```

或者更好：

```
std::cout << static_cast<std::ostringstream&>(std::ostringstream() << 10).str(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-12T19:16:59.313

`clear()`只清除错误标志。这是一个常见的错误。你想调用`str()`，并传递一个空字符串来清除缓冲区：

```
stream.str(""); 
```

会做你想做的。

# html - 如何设置我的 HTML 表格布局

> ID：11458982
> 
> 赞同：0
> 
> 时间：2012-07-12T19:13:33.573
> 
> 标签：html, css

我需要有关 HTML 布局的帮助。

我需要为每个表格行显示 3 列

Column#1 里面只有一些文字

Column#2 有一个内表，有 1 行或 2 行，具体取决于 Column#3 的内容

Column#3 有 x 行，行中的每个单词都有一个食物的名称。首先列出健康物品，然后列出不健康物品（如果有）。如果只有健康项目，则第 2 列将有 1 行，其中包含“健康”一词。否则，它将显示 HEALTHY，并且第 2 行将显示 UNHEALTHY（它必须与第 3 列对齐）

所以它看起来像：

```
Column#2        Column#3
HEATHLY         Apple
                Pear 
```

或者它可能看起来像：

```
Column#2        Column#3
HEATHLY         Apple
                Pear
UNHEALTHY       Coffee crispt
                Chocolate milk 
```

并且第 2 列和第 3 列中的每一行都应该有每行的网格（边框顶部/底部）。

我怎样才能做到这一点？

注意：第 2 列中的行边框应与第 3 列中的行边框对齐。

我希望我解释得足够清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:38:17.293

我不确定你特别要求什么，所以这里是：

```
<table cellspacing="0">
    <tr>
        <td>Col 1</td>
        <td>Col 2</td>
        <td>Col 3</td>
    </tr>
    <tr>
        <td rowspan="4">Col 1 text goes here</td>
        <td rowspan="2">HEALTHY</td>
        <td>Apple</td>
    </tr>
    <tr>
        <td>Pear</td>
    </tr>
    <tr>
        <td rowspan="2">UNHEALTHY</td>
        <td>Toffee crisp</td>
    </tr>
    <tr>
        <td>Chocolate milk</td>
    </tr>
</table> 
```

还有一些伪代码来生成它：

```
foreach c2 in col-2-items
{
    foreach c3 in c2.col-3-items
    {
        <tr>
            if c3 is first in c2.col-3-items
            {
                if c2 is first in col-2-items
                {
                    <td rowspan="all-items.count">Col 1 text goes here</td>
                }
                <td rowspan="c2.col-3-items.count">c2.text</td>
            }
            <td>c3.text</td>
        </tr>
    }
} 
```

使用 css 应用顶部和底部边框。还要注意表格上的 cellspacing="0"。

```
<style>
table
{
    border-collapse: collapse;
}
td
{
    border-top: solid 1px black;
    border-bottom: solid 1px black;
}
</style> 
```

# javascript - 登录后如何更改按钮的标签

> ID：11458985
> 
> 赞同：0
> 
> 时间：2012-07-12T19:13:40.453
> 
> 标签：javascript, java, button

我正在用 Java 做一个学校项目。我能够成功登录已注册的用户。但是当他/她登录时，我如何隐藏登录和注册页面链接并将其替换为 MyAlumni。注销后如何再次显示。这是我在 MasterPage 上的链接的编码

```
 <td id="menucontainer" align="center">
                    <br>
<button id="homeBtn" onclick="window.location.href='Main.do'"></button>
<br>
<button id="loginBtn" onclick="window.location.href='ForwardGeneralAction.do?page=Login'"></button>
<br>
<button id="signupBtn" onclick="window.location.href='ForwardGeneralAction.do?page=SignUp'"></button>
<br>
<button id="helpBtn" onclick="window.location.href='ForwardGeneralAction.do?page=Help'"></button>
<br>
<button id="contactBtn" onclick="window.location.href='ForwardGeneralAction.do?page=Contact'"></button>
<br> 
```

请逐步解释我必须做什么。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:25:06.933

大多数时候，站点将有一个`login.master`来处理登录的东西，并且像一个`site.master`或`default.master`来处理它的其余部分。在你的情况下，我也建议这样做。您只需将登录/注册菜单放在 login.master 中，然后将另一个菜单放在 site.master 中。

作为对您的评论的回应，无论您当前的母版页在哪里，添加另一个（右键单击、添加、新项目、母版页）并从您的其他母版页复制标题类型的内容（对不起，我没有做过任何网络开发在java中所以我不知道确切的语法）

然后您的登录主页面（至少是其中的菜单部分）将如下所示：

```
<td id="menucontainer" align="center">
                    <br>
<button id="homeBtn" onclick="window.location.href='Main.do'"></button>
<br>
<button id="loginBtn" onclick="window.location.href='ForwardGeneralAction.do?page=Login'"></button>
<br>
<button id="signupBtn" onclick="window.location.href='ForwardGeneralAction.do?page=SignUp'"></button> 
```

然后您的其他母版页（菜单部分）将如下所示：

```
<td id="menucontainer" align="center">
                    <br>
<button id="homeBtn" onclick="window.location.href='Main.do'"></button>
<br>
<button id="alumniBtn" onclick="window.location.href='MyAlumni.do'"></button>
<button id="helpBtn" onclick="window.location.href='ForwardGeneralAction.do?page=Help'"></button>
<br>
<button id="contactBtn" onclick="window.location.href='ForwardGeneralAction.do?page=Contact'"></button> 
```

母版页的其余部分由您决定！

# python - 记录 subprocess.Popen 调用

> ID：11458999
> 
> 赞同：1
> 
> 时间：2012-07-12T19:14:27.040
> 
> 标签：python, logging, python-3.x, subprocess

我想记录对 subprocess.Popen 的所有调用，以便我可以创建一个等效的批处理/shell 文件。

**python如何将参数列表变成命令？**

**是否相当于`' '.join([args])`？**

例如：

```
args=['ls', '-A']
subprocess.Popen(args)
# ... 
```

我想获得所有调用的等效文件：

```
ls -A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:20:59.390

不，它不等同于（因为某些参数中可能包含空格或其他 shell 元字符）。事实上，除非你使用 shell=True，否则 Python 根本不需要将所有参数组合成一个字符串。它使用类似 exec*() 的调用（参见 man execve）并在数组中传递参数。

如果您只想输出足够的信息以稍后重新创建参数列表，那么您可能只想输出`repr(args)`.

由于您的目标是制作等效的批处理/shell 文件，因此您可能需要采取特殊步骤来引用参数，以便其中的任何特殊元字符不会影响 shell 如何拆分参数。一种方法是通过一个函数传递每个参数，就像我在[https://gist.github.com/790722](https://gist.github.com/790722)中提出的那样（尽管它不知道如何对批处理文件进行安全引用）。