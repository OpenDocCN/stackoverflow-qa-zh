# StackOverflow 问答 12054000-12054999

# regex - Nginx - 在 uwsgi_pass 之前重写 request_uri

> ID：12054001
> 
> 赞同：27
> 
> 时间：2012-08-21T11:37:51.767
> 
> 标签：regex, nginx, uwsgi, bottle

我有一个 Nginx 虚拟主机，而不是这样配置的：

```
...
location /one {
  include uwsgi_params;
  uwsgi_pass unix:///.../one.sock;
}
location /two {
  include uwsgi_params;
  uwsgi_pass unix:///.../two.sock
}
... 
```

*这当然是一个简化的配置*

当我请求时，`/one/something`我希望我的 Python 脚本`/something`以`request_uri`.

我正在使用 BottlePy，但希望这由 Nginx 处理，而不是在我的 Python 代码中。

我可以做类似的事情`uwsgi_param REQUEST_URI replace($request_uri, '^/one', '')`吗？

**编辑**

这是来自我的 Python 代码的请求： [pid: 30052|app: 0|req: 1/1] () {42 vars in 844 bytes} [Tue Aug 21 14:22:07 2012] GET /one/something = > 在 4 毫秒内生成 0 个字节 (HTTP/1.1 200) 在 85 个字节中生成 2 个标头（0 核心 0 上的开关）

所以 Python 可以，但 uWSGI 不行。

如何解决？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-21T11:52:05.253

```
location /one {
  rewrite /one/(.+) /$1 break;
  include uwsgi_params;
  uwsgi_pass unix:///.../one.sock;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-21T17:36:19.317

我知道这个线程很旧，但是如果你使用 uWSGI 来运行你的 python 应用程序，还有另一种方法可以解决这个问题。

```
[uwsgi]
route-uri = ^/one/(.*) rewrite:/$1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-04T10:08:13.397

我刚遇到同样的问题，这里有一个解决方案

```
location /one {
    include uwsgi_params;
    uwsgi_pass unix:///.../one.sock;
    uwsgi_param SCRIPT_NAME /one;
    uwsgi_modifier1 30;
} 
```

您可以在这里找到更多信息：http `uwsgi_modifier1`: [//uwsgi-docs.readthedocs.org/en/latest/Nginx.html#hosting-multiple-apps-in-the-same-process-aka-managing-script-name-and -路径信息](http://uwsgi-docs.readthedocs.org/en/latest/Nginx.html#hosting-multiple-apps-in-the-same-process-aka-managing-script-name-and-path-info)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-19T08:07:57.443

我用另一种方式解决了这个问题：

```
[uwsgi]
module = wsgi:application
master = true
processes = 10
socket = 127.0.0.1:9090
mount = /one=customscript.py
manage-script-name = true 
```

nginx

```
location /one {
  include uwsgi_params;
  uwsgi_pass 127.0.0.1:9090;
} 
```

# java - Java中的 toPrecision() 是否有等价物？

> ID：12054006
> 
> 赞同：4
> 
> 时间：2012-08-21T11:38:27.850
> 
> 标签：java

在将算法从 JavaScript 移植到 Java 时，我遇到了需要替换 JavaScript 的 toPrecision() 的问题。问题是我不知道数字有多大或多小，所以我不能使用具有正确格式的简单 NumberFormat 。

是否有提供类似功能的标准类？

编辑这是我想出的：

```
 double toPrecision(double n, double p) {
        if (n==0) return 0;

        double e = Math.floor(Math.log10(Math.abs(n)));
        double f = Math.exp((e-p+1)*Math.log(10));

        return Math.round(n/f)*f;
    } 
```

原则上，它做正确的事，但舍入错误完全毁了它。例如， `toPrecision(12.34567, 3)`返回`12.299999999999997`

编辑 2 这个版本非常适用于 12 个测试用例中的 11 个......

```
 double toPrecision(double n, double p) {
        if (n==0) return 0;

        double e = Math.floor(Math.log10(Math.abs(n)));
        double f = Math.round(Math.exp((Math.abs(e-p+1))*Math.log(10)));
        if (e-p+1<0) {
            f = 1/f;
        }

        return Math.round(n/f)*f;
    } 
```

但`toPrecision(0.00001234567, 3)`仍然返回`1.2299999999999999E-5`而不是`1.23E-5`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T11:41:12.670

设置精度的用途[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)和[`setScale()`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#setScale%28int,%20java.math.RoundingMode%29)方法

```
BigDecimal bd = new BigDecimal("1.23456789");
System.out.println(bd.setScale(3,BigDecimal.ROUND_HALF_UP)); 
```

**输出**

```
1.235 
```

看

*   [IDEone 演示](http://ideone.com/dMIiW)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T17:11:59.767

我为此想出的最简单的解决方案是使用`java.math.BigDecimal`和`java.math.MathContext`类似的组合。

```
String toPrecision(double number, int precision) {
    return new BigDecimal(number, new MathContext(precision)).toString();
} 
```

我在 Number.prototype.toPrecision 的[dynjs](https://github.com/dynjs/dynjs) [实现](https://github.com/dynjs/dynjs/blob/master/src/main/java/org/dynjs/runtime/builtins/types/number/prototype/ToPrecision.java#L32)中使用[它](http://es5.github.com/#x15.7.4.7)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T18:14:28.840

这是一个使用 String.format 的 java 解决方案。

```
public static String toPrecision(double d, int digits) {
    s = String.format("%."+((digits>0)?digits:16)+"g",d).replace("e+0","e+").replace("e-0","e-");
    return s;
} 
```

.replace 仅在您想模仿指数没有前导零的 javascript 时才需要。如果您只是将其用于舍入，则将值返回为

```
return Double.parseDouble(s); 
```

这是一些单元测试代码：

```
public void testToPrecision() {
    String s = NumberFormat.toPrecision(1234567.0,5);
    assertEquals("1.2346e+6",s);
    s = NumberFormat.toPrecision(12.34567,5);
    assertEquals("12.346",s);
    s = NumberFormat.toPrecision(0.1234567,5);
    assertEquals("0.12346",s);
    s = NumberFormat.toPrecision(0.1234567e20,5);
    assertEquals("1.2346e+19",s);
    s = NumberFormat.toPrecision(-0.1234567e-8,5);
    assertEquals("-1.2346e-9",s);
    s = NumberFormat.toPrecision(1.0/3.0,5);
    assertEquals("0.33333",s);
    s = NumberFormat.toPrecision(1.0/3.0,0);
    assertEquals("0.3333333333333333",s);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T11:51:07.003

你可以`double`使用

```
double d = 1.23456789;
System.out.println(Math.round(d * 1e3) / 1e3); 
```

印刷

```
1.235 
```

或者

```
System.out.printf("%.3f%n", d); 
```

做同样的事情。

* * *

```
public static void main(String... args) {
    System.out.println(round3significant(12345678.9));
    System.out.println(round3significant(0.0000012345));
}

public static double round3significant(double d) {
    if (d < 100) {
        double divide = 1;
        while(d < 100) {
            d *= 10;
            divide *= 10;
        }
        return Math.round(d) / divide;
    } else {
        double multi = 1;
        while(d > 1000) {
            d /= 10;
            multi *= 10;
        }
        return Math.round(d) * multi;
    }
} 
```

印刷

```
1.23E7
1.23E-6 
```

您可以使用 NumberFormat 仅显示为小数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T12:44:41.110

这终于奏效了...

```
double toPrecision(double n, double p) {
    if (n==0) return 0;

    double e = Math.floor(Math.log10(Math.abs(n)));
    double f = Math.round(Math.exp((Math.abs(e-p+1))*Math.log(10)));

    if (e-p+1<0) {
        return Math.round(n*f)/f;
    }

    return Math.round(n/f)*f;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T12:09:27.673

```
 import java.text.*;  
Class Decimals
{  
    public static void main(String[] args)
    {  
        float f = 125.069f;  
        DecimalFormat form = new DecimalFormat("#.##");  
        System.out.println(form.format(f));  
    }
} 
```

.## 代表您想要的小数位数我希望这符合您的要求。

# jquery-mobile - 为什么内置的 jquery 移动图标不显示在移动设备上？

> ID：12054009
> 
> 赞同：0
> 
> 时间：2012-08-21T11:38:45.010
> 
> 标签：jquery-mobile

我有一个奇怪的问题，如果我在台式计算机上查看我的网站，主题滚轮 zip 文件附带的图标显示得很好，但是当在移动设备上查看网站时（到目前为止，我只测试过使用 chrome 和内置浏览器以及 ipod touch 的 android 设备）图标拒绝显示。我只是在图标应该在的地方得到一个空圆圈。图标图像文件位于一个名为“images”的文件夹中，该文件夹与 css 文件位于同一目录中，因此我认为这不是路径问题。为了清楚起见，jquery mobile 应该显示图标的任何地方都会发生，而不仅仅是在一两个地方。例如，对于可折叠列表，jquery mobile 应该在部分折叠时显示加号图标，在展开时显示减号图标等。

请帮忙！

谢谢

**编辑：** 所以我自己在移动设备上的 Chrome 中设置远程调试，看来问题是由于某种原因，仅在移动设备上，css 或 js 告诉浏览器使用白色图标集与黑色图标集相反。白色图标似乎没有出现，因为它们位于白色背景上。任何人都知道为什么在桌面浏览器上它会使用一种颜色的图标而在移动浏览器上它会使用另一种颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:45:00.860

在CSS中，只需更改

```
background-image: url(./images/icons-36-white.png); 
```

经过

```
background-image: url(./images/icons-36-black.png); 
```

在高清/“视网膜”精灵部分（在 lmy 主题中的第 485 行左右，不确定每个人都一样）。

# android - 将 .NET dll 移植到不同的平台

> ID：12054016
> 
> 赞同：1
> 
> 时间：2012-08-21T11:39:15.447
> 
> 标签：android, .net, ios, macos, dll

我有一个基于 .NET 2.0 的 dll，具有完整的源代码访问权限。所以我可以在VS2010中构建它。

我需要将此移植到 Android/iOS/MacOS。因此，我希望每个平台都有一些等效的 dll。因此，另一位程序员可以在某个目标平台上将其与他自己的项目等价地链接（不管如何）。

例如，我在 Mac 上运行 MonoDevelop，但看不到如何构建我的 .NET 项目并接收等价的 dll。

所以我需要帮助来找到解决方案并了解如何获得所需的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:16:30.020

有 CLI 实现，主要是 Mono，适用于 iOS 和 droid。这里最简单的工具是 MonoTouch 和 Mono for Android，两者都可从 Xamarin 获得。使用这些工具，您可以构建和测试针对相关框架的 dll。另一个程序员，再次使用 MonoTouch 或 Mono for Android 工具，可以引用这些 dll，并构建他们的应用程序，以及使用该库打包和部署（侧面加载或通过设备的商店）应用程序所需的所有工具. 此部署通常还包括应用程序所需的所有运行时/框架部分。

MonoTouch 使用 MonoDevelop IDE，因此作为 MonoDevelop 用户您会很熟悉。Mono for Android*可以*做到这一点（即托管在 MonoDevelop 中），但也可以在 Visual Studio 中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:46:25.677

如果您遵循最佳实践，您可能会成功移植您的库，例如

[http://sharpsnmplib.codeplex.com/discussions/390251](http://sharpsnmplib.codeplex.com/discussions/390251)

但是，它完全取决于您的库的特性，您尚未提及。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:21:18.690

运行 .NET 代码需要安装 .NET 运行时。Android 和 iOS 设备都没有预装这样的运行时。

理论上，您可以在 Android 设备或越狱的 iPhone/iPad 上安装[Mono](http://www.mono-project.com/) Runtime（一种开源 .NET 替代方案）。但是，据我了解，您正在寻找一种创建库以提供给开发人员的方法，因此这不是一个好的解决方案。

但是，*可以*使用[MonoTouch](http://xamarin.com/monotouch/)创建一个库。MonoTouch 将您的 .NET 代码编译为 iOS 设备可以使用的二进制文件——无论它们是否越狱，无需安装运行时。

# android - Camera.open() 返回 null

> ID：12054022
> 
> 赞同：22
> 
> 时间：2012-08-21T11:39:36.883
> 
> 标签：android, android-camera

当我调用`mCamera = Camera.open()`它返回 null 时，可能是什么原因造成的？我的设备是 Nexus 7。

我已经在我的`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.CAMERA" /> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-21T11:53:45.163

弄清楚了，

你需要打电话`Camera.open(0)`。

这仅在 NEXUS 7 设备上有效且有效，因为它只有一个摄像头，因此仅在仅针对该设备时才有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-26T15:31:33.507

对于在 Android 6.0+ 上测试应用程序的用户，请确保您已实施[Runtime Permission](https://developer.android.com/training/permissions/requesting.html)。因为您的 AndroidManifest 文件中的简单权限是不够的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T18:38:51.647

我按照以下步骤解决了这个问题。

1.  打开“AVD Manager”并选择您正在使用的虚拟设备

2.  点击“编辑”按钮 ![点击编辑按钮](../Images/4d04902ce60ec83b589db2a9d15576eb.png)

3.  在“硬件”部分，选择“新建”并添加“配置后置摄像头”，然后单击“确定”。

4.  在条目旁边的下拉列表中，选择“webcam0”或与您要使用的摄像头对应的那个 ![选择您要使用的相机](../Images/6083b7730b7fb8dce9f000e6cfc3a79d.png)

5.  停止 AVD 并重新启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T02:34:35.787

如果您在 API 22 之上构建应用程序，也许您应该请求许可。

# html - 基本 Html5 套接字问题

> ID：12054024
> 
> 赞同：0
> 
> 时间：2012-08-21T11:39:42.270
> 
> 标签：html, websocket

只是想知道是否有人可以帮助我解决这个问题，下面是我的 Web 套接字 Helloserver 代码和 client.htm 代码。启动 Helloserver 后，我们运行客户端并注意到它没有连接到服务器，如果有人可以提供帮助，我们将不胜感激。

这是client.htm：

```
<!doctype html>
<html>
<head>
    <title>Web Sockets: Connecting to the Server</title>
    <link rel="Stylesheet" href="/global.css" type="text/css" />
</head>
<body>
    <div id="container">
        <h1>Connecting to Web Socket Server</h1>
        <ul id="log"></ul>
    </div>
</body>
<script src="../scripts/jquery-1.7.2.js" type="text/javascript"></script>
<script>
    $(function () {
        function logMsg(message) {
            $("#log").append("<li>" + message + "</li>");
        }

        logMsg("Attempting to connect to socket server");

        var server = null;
        try {
            server = new WebSocket("ws://localhost:8181/server");
            server.addEventListener("message", messageHandler, false);
            server.addEventListener("open", openHandler, false);
            server.addEventListener("close", closeHandler, false);
        }
        catch (e) {

        }

        function openHandler(e) {

            logMsg("Connection opened");
        }

        function closeHandler(e) {

            logMsg("Connection closed");
        }

        function messageHandler(e) {

            logMsg("Server says: " + e.data);
        }
    });
</script>
</html> 
```

这是服务器代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using SocketServer.Models;

using Nugget;

namespace SocketServer
{
    class HelloServer : ISocketServer
    {
        private string _serverPath = string.Empty;
        private WebSocketServer _server = null;

        private string _input = string.Empty;

        public string Input
        {
            set { this._input = value; }
        }

        public void Initialize(string serverPath, string originServerAndPort)
        {
            this._server = new WebSocketServer(8181, originServerAndPort, "ws://localhost:8181");
            this._server.RegisterHandler<Socket>(serverPath);

            Nugget.Log.Level = LogLevel.None;
        }

        public void Start()
        {
            this._server.Start();
        }

        public void Send()
        {
            this._server.SendToAll(this._input);
        }
    }
} 
```

这是启动服务器的控制台代码：

```
using System;
using Nugget;

namespace SocketServer
{
    class Server
    {
        static void Main(string[] args)
        {
            ISocketServer server = null;

            Console.WriteLine();
            Console.WriteLine("Welcome to the socket server.");
            Console.WriteLine();
            Console.WriteLine("Which server type would you like to create?");
            Console.WriteLine("   1) Hello World Server");
            Console.WriteLine("   2) Stocks Server");
            Console.WriteLine();

            string input = Console.ReadLine();

            if (input == "1")
            {
                server = new HelloServer();
                server.Initialize("/server", "http://localhost:2709");

                Console.WriteLine("");
                Console.WriteLine("The Hello World Server is now available under ws://localhost:8181/server.");
                Console.WriteLine("");
            }
            else if (input == "2")
            {
                server = new StockServer();
                server.Initialize("/stocks", "http://localhost:2709");

                Console.WriteLine("");
                Console.WriteLine("The Stocks Server is now available under ws://localhost:8181/stocks.");
                Console.WriteLine("");
            }
            else
            {
                Console.WriteLine("");
                Console.WriteLine(string.Format("Sorry, {0} is not a valid option.", input));
                Console.WriteLine("");
            }

            if (server != null)
            {
                server.Start();

                input = string.Empty;
                while (input != "exit")
                {
                    server.Input = input;
                    server.Send();
                    input = Console.ReadLine();
                }
            }

            Console.WriteLine("");
            Console.WriteLine("Closing socket server.");
            Console.WriteLine("");
        }
    }
} 
```

我们遇到的问题是，客户端运行后它会给出此消息并且不连接到服务器：

```
尝试连接到套接字服务器
连接关闭

```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:17:19.037

确保在您使用的浏览器中启用了 websocket。另一方面，您可能想在 client.html 中修改这一行

```
server = new WebSocket("ws://localhost:8181/server"); 
```

“/服务器”部分是必要的吗？

# c++ - 指向方法的指针

> ID：12054026
> 
> 赞同：1
> 
> 时间：2012-08-21T11:39:43.730
> 
> 标签：c++, visual-studio-2010

任何人都知道如何在 msvc2010 下编译此示例代码？（据说在 GCC 下编译）

```
class cmdLine;

struct cmdList 
{
   const char *c;
   const char *s;
   const char *h;
   void (cmdLine::*cmdFuncPtr)();
};

class cmdLine
{
   public:
     cmdLine();
     static cmdList myCmdList[];
     void test();
};

cmdLine::cmdLine()
{
}

void cmdLine::test()
{
}

cmdList cmdLine::myCmdList[] =
{
   {"xxx", "yyy", "zzzzz", &cmdLine::test},
   {"aaa", "bbb", "ccc", 0}
};

int _tmain(int argc, _TCHAR* argv[])
{
   cmdLine c;
   (c.myCmdList[0].*cmdFuncPtr) (); //error (why?)
} 
```

我收到错误 C2065: 'cmdFuncPtr' : undeclared identifier 并且不知道出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:51:45.050

使用此语法

```
 (c.*c.myCmdList[0].cmdFuncPtr) (); 
```

作为`cmdFuncPtr`指向 的方法的指针`cmdLine`，它需要一个要调用的类的实例，即`c`. 同时，`cmdFuncPtr`是 的成员`cmdList`，所以它需要一个存储它的类的实例，即`c.myCmdList[0]`. 这就是为什么`c`应该在表达式中使用两次。

`c.myCmdList[0]`OP 提供的表达式解析为：“通过存储在独立变量中的方法指针调用类实例上的方法`cmdFuncPtr`”。这样的变量不存在，这就是编译器所抱怨的。

# asp.net - 无法针对 Null 评估 viewState

> ID：12054027
> 
> 赞同：2
> 
> 时间：2012-08-21T11:39:44.357
> 
> 标签：asp.net, c#-4.0, object-initializers

我使用此方法填充网格视图的数据源，但对于 when `getnew`is `false`，它不会返回任何值，只会返回一个包含单个空值的列表。

```
 private List<T> GetAll_T(bool getNew)
        {
            if (getNew)
                return (ViewState["T"] = Get_T()) as List<T>;
               //Get_T() returns a CustomList 
            return new List<T>
                {
                    ViewState["T"] != null ?
                    ViewState["T"] as T: 
                    (T)(ViewState["T"] = Get_T()) Collection
                };
        } 
```

它给了我第二行的警告[当视图状态为空时]。**表达式总是假的**

为什么有警告，当它在逻辑上是正确的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:14:14.643

从您的代码片段中不清楚`CustomerService.GetAllCustomer()`返回的内容。

您可以使用它，就像它在函数的第 (2) 行返回一个列表一样，又像它在第 (8) 行返回一个对象一样。

我建议这样写

```
private List<CustomerMaster> GetAllCustomer(bool getNew)
{
    if (getNew || null == ViewState["CustomerDataset"])
        ViewState["CustomerDataset"] = CustomerService.GetAllCustomer();
    return ViewState["CustomerDataset"] as List<CustomerMaster>;
} 
```

# wordpress - 来自父级的 Wordpress 列表页面

> ID：12054030
> 
> 赞同：0
> 
> 时间：2012-08-21T11:39:55.423
> 
> 标签：wordpress, list, parent

在第三级（孙子）页面上时，我需要列出所有页面的帮助。

例如，我有第 1 页（祖父母） 第 2 页（父母） 第 3 页（孩子）

我需要在所有三个页面上显示相同列出的所有这些页面，例如：

第 1 页 第 2 页 第 3 页

我已经成功地在第 1 页和第 2 页显示了正确的页面列表。（见下文）

谁能帮忙

```
function widget($args, $instance) { 

    global $post;
    extract( $args );

    if($post->post_parent == 0) {
        $title = '<a href="'.get_permalink($post->ID).'" title="'.$post->post_title.'">'.$post->post_title.'</a>';
        $id_to_query = $post->ID;
    }
    elseif($post->ancestors) {
        $page = get_page($post->ancestors[0]);
        $title = '<a href="'.get_permalink($page->ID).'" title="'.$page->post_title.'">'.$page->post_title.'</a>';          
        $id_to_query = $post->ancestors[0];
    } else {
        $page = get_page($post->post_parent);
        $title = '<a href="'.get_permalink($page->ID).'" title="'.$page->post_title.'">'.$page->post_title.'</a>';
        $id_to_query = $page->ID;
    }       

    $children = get_pages('post_type='.get_post_type().'&child_of='.$id_to_query);
    if(empty($children) || is_page( array(17,125) ) ) return; // excludes contact us etc...     

    wp_reset_query();

    $widget_title = $title;

    echo $before_widget;
    echo $before_title . $widget_title . $after_title; ?>
    <ul>
        <?php wp_list_pages('title_li=&post_type='.get_post_type().'&child_of='.$id_to_query); ?>
    </ul>           
    <?php
    echo $after_widget;
    wp_reset_postdata(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:44:31.080

尝试获取最高祖先 id，`$topid = get_top_ancestor($postid);`然后使用争论`'child_of' => $topid`并注意你的`depth`

完整示例：

```
 <?php 

    $postid = get_the_ID();
    $topid = get_top_ancestor($postid); 

    $args = array(
            'depth'        => 2,
            'show_date'    => '',
            'date_format'  => get_option('date_format'),
            'child_of'     => $topid,
            'exclude'      => '',
            'include'      => '',
            'echo'         => 1,
            'authors'      => '',
            'sort_order'   => 'ASC',
            'link_before'  => '',
            'link_after'   => '',
            'walker'       => '',
            'post_type'    => 'page',
            'post_status'  => 'publish' 
    ); ?>

    <ul><?php wp_list_pages( $args ); ?></ul> 
```

你需要做的事情[未经测试]：

```
function widget($args, $instance) { 

global $post; 

$postid = get_the_ID();
$topid = get_top_ancestor($postid); 

$args = array(
        'depth'        => 2,
        'show_date'    => '',
        'date_format'  => get_option('date_format'),
        'child_of'     => $topid,
        'exclude'      => '',
        'include'      => '',
        'echo'         => 1,
        'authors'      => '',
        'sort_order'   => 'ASC',
        'link_before'  => '',
        'link_after'   => '',
        'walker'       => '',
        'post_type'    => 'page',
        'post_status'  => 'publish' 
);

// if(empty($children) || is_page( array(17,125) ) ) return; // excludes contact us etc...     

// wp_reset_query();

$widget_title = $title;

echo $before_widget;
echo $before_title . $widget_title . $after_title; ?>
<ul>
    <?php wp_list_pages( $args ); ?>
</ul>           
<?php
echo $after_widget;
wp_reset_postdata();

 } 
```

# javascript - 仅在一个元素上显示微调器 ($.mobile.showPageLoadingMsg())？

> ID：12054037
> 
> 赞同：0
> 
> 时间：2012-08-21T11:40:40.850
> 
> 标签：javascript, jquery, html, css, jquery-mobile

有没有一种简单的方法可以`$.mobile.showPageLoadingMsg()`在一个元素/区域上显示微调器（）？

我正在通过 加载这个元素的内容`AJAX`，所以在它完成之前我必须阻止它并显示这个微调器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:18:33.033

您可以将加载微调器的 CSS 位置设置为显示在某个区域上。这是一个代码示例，它显示和隐藏元素上的加载微调器：

```
//this is an IIFE, it creates an enclosure around the code that separates it from global code
(function ($) {

    //a flag so we know what state the loading spinner is in
    var isShowing = false;

    //this example is binding to all link elements
    $('a').on('click', function () {

        //check if the loading spinner is already showing
        if (isShowing === false) {

            //the loader is not showing, so create an overlay in the container element
            var $con = $('#container').append('<div class="container-overlay"></div>');

            //now position the loader over the container
            $('.ui-loader').css({
                position : 'absolute',
                top      : ($con.offset().top + ($con.height() / 2)),
                left     : ($con.offset().left + ($con.width() / 2))
            });

            //fade-in the overlay and show the loading spinner
            $con.children('.container-overlay').fadeIn(500);
            $.mobile.showPageLoadingMsg();

            //set the flag so next time around we hide the spinner
            isShowing = true;
        } else {

            //fade-out the overlay
            $('#container').children('.container-overlay').fadeOut(500, function () {

                //remove the overlay from the DOM
                $(this).remove();

                //hide the loader
                $.mobile.hidePageLoadingMsg();

                //reset the CSS of the loader element
                $el.css({
                    position : 'fixed',
                    top      : '50%',
                    left     : '50%'
                });
            });

            //set the flag so next time around we show the loading spinner
            isShowing = false;
        }
    });​
})(jQuery); 
```

这是一个演示：http: [//jsfiddle.net/CkUZf/](http://jsfiddle.net/CkUZf/)

对于上面的演示（链接），我将这个 CSS 用于覆盖元素：

```
#container .container-overlay {
    display    : none;
    height     : 100%;
    background : #000;
    background : rgba(0, 0, 0, 0.75);
}​ 
```

也可以将 loader 元素附加到您要“加载”的任何容器，但`$.mobile.showPageLoadingMsg()`会自动重置 loader 元素，因此您必须在 jQuery Mobile 包含中禁用该代码（这就是为什么我选择了更轻的 CSS 版本多于）。

**更新**

这可能更像你的想法：

```
$.fn.customMobileSpinner = function (options) {

    var defaults = {
            url             : null,
            fadeDuration    : 500,
            bgColor         : 'rgba(0, 0, 0, 0.75)',
            bgColorFallback : '#000'
        };

    //merge the defaults and options objects
    options = $.extend({}, defaults, options);

    //make sure the URL is specified
    if (options.url !== null) {

        //only work with the first element passed-in
        var $element = this.eq(0);
        $element.append(
            $('<div class="container-overlay" />').css({
                display    : 'none',
                height     : '100%',
                width      : '100%',
                background : options.bgColorFallback,
                background : options.bgColor
            })
        ).children('.container-overlay').fadeIn(options.fadeDuration);

        //update loader CSS
        $('.ui-loader').css({
            position : 'absolute',
            top      : ($element.offset().top + ($element.height() / 2)),
            left     : ($element.offset().left + ($element.width() / 2))
        });

        //show spinner
        $.mobile.showPageLoadingMsg();

        //create AJAX call
        $.ajax({
            url : options.url,
            success : function (response) {
                $element.fadeOut(options.fadeDuration, function () {
                    $element.html(response).fadeIn(options.fadeDuration);
                    $.mobile.hidePageLoadingMsg();

                    //reset loader CSS
                    $(".ui-loader").css({
                        position : 'fixed',
                        top      : '50%',
                        left     : '50%'
                    });
                });
            }
        });
    }
}; 
```

然后你只需在一个 jQuery 对象上调用这个方法：

```
$('#some-container').customMobileSpinner({
    url : 'some-url'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:50:48.327

恐怕你不能。查看[文档](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)，您可以自定义消息或隐藏微调器，但不能使其适合元素。如果您只想在某些元素加载时显示微调器，请使用该方法的`beforeSend`and`complete`选项`ajax`来隐藏/显示它

# bash - 删除第一行文本

> ID：12054039
> 
> 赞同：0
> 
> 时间：2012-08-21T11:40:44.330
> 
> 标签：bash

为什么此脚本适用于旧版本的文件？

如果该行包含文本，我想删除 csv 的第一行如果我在一切正常`KP_TITEL` 后使用退出测试脚本。`sed`但是只要我想用`while loop`文件测试它仍然包含第一行。

任何的想法？

```
sed -i '/KP_TITEL/d' "$1"

# read data
input=$1

while IFS=';' read -r f1 f2 f3 f4 f5 f6 f7 f8 f9 f10 f11 f12 f13
do

  other things

done < "$input" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:50:19.310

如果您只想处理除第一行之外的所有内容（例如通过管道），您可以通过以下方式实现`tail`：

```
tail -n +2 $file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:49:50.230

我不确定该选项的`-i`作用，`sed`但通常`sed`是一个流编辑器，它处理输入并将结果写入标准输出。在您的情况下，输出会丢失，然后在 while 中再次读取旧文件。试试这个：

```
sed '/KP_TITEL/d' "$1" | \
while ...
done 
```

管道符号将更改`stdin`while 循环（以及`read`命令）。

我继续这一行，`\`因为我发现这比以下更具可读性：

```
sed '/KP_TITEL/d' "$1" | while ... 
```

要删除第一行，您应该使用

```
sed 1d "$1" 
```

或（更便宜）

```
tail --lines=+2 "$1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:31:58.903

你可以使用计数器

```
g=0;

while ...

((g++))
        if [ "$g" != "1" ]; then
                do something
        fi
done 
```

# android - 如何停止这个正在运行的线程？

> ID：12054040
> 
> 赞同：0
> 
> 时间：2012-08-21T11:40:44.433
> 
> 标签：android, multithreading

```
public class MainActivity extends Activity implements Runnable{

    private int progressBarStatus = 0;
    private Handler progressBarHandler = new Handler();
    ProgressBar linProgressBar;
    private long fileSize = 0;
    Thread t1;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button b1 = (Button)findViewById(R.id.button1);
       Button b2 = (Button)findViewById(R.id.button2);

        b2.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View arg0) 
            {

                linProgressBar.setProgress(0);
                t1.interrupt();
            }

         });

    b1.setOnClickListener(new OnClickListener()
     {

        @Override
        public void onClick(View arg0) 
        {

            basicInitializations();

        }

     });

    }

    public void basicInitializations(){

        linProgressBar = (ProgressBar) findViewById(R.id.progressBar1);
        linProgressBar.setProgress(0);
        linProgressBar.setMax(100);

        try{
            t1 = new Thread() 
            {
                public void run() {
                    while (progressBarStatus < 100) {

                        // process some tasks
                        progressBarStatus = doSomeTasks();

                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        // Update the progress bar
                        progressBarHandler.post(new Runnable() {
                            public void run() {
                                linProgressBar.setProgress(progressBarStatus);
                            }
                        });
                    }

                    if (progressBarStatus >= 100) {

                        try {
                            Thread.sleep(2000);
                        } catch (InterruptedException e) 
                        {
                            e.printStackTrace();
                        }

                    }
                }
            };

            t1.start();

        }catch (Exception e) {

        }

    }
    public int doSomeTasks() {

        while (fileSize <= 1000000) {

            fileSize++;

            if (fileSize == 100000) {
                return 10;
            } else if (fileSize == 200000) {
                return 20;
            } else if (fileSize == 300000) {
                return 30;
            }else if (fileSize == 400000) {
                return 40;
            }else if (fileSize == 500000) {
                return 50;
            }

        }

        return 100;

    }

    @Override
    public void run() {
        // TODO Auto-generated method stub

    }
} 
```

这是我的主要代码，我无法停止这个线程。当我单击按钮 b2（比如取消按钮）时，我想停止它。上面的代码不是原始代码，是一个模型，所以请告诉我如何停止那个线程。

先感谢您 。. . .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:46:34.847

您的线程大部分时间都花在 中`Thread.sleep()`，这很有帮助。线程指针`t1`是一个类成员，这也很有帮助。从您的按钮处理程序中，您可以检查是否`t1`还活着，如果是，请调用`t1.interrupt();`. 这将导致线程当前的睡眠和未来的睡眠抛出`InterruptedException`... 现在您只需要修改您的异常处理程序以在这种情况下退出线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:59:44.197

我有一个替代答案可以尝试相同的方法，在您的可运行循环中始终将标志检查为 run_flag，将其创建为成员变量并在您盯着循环后将其设置为 true，您可以将 run_flag 设置为 false，只要您完成并且同时，您也可以将 null 设置为您的线程......通过可运行循环和线程出来的更安全的方法。

```
try{
        t1 = new Thread() 
        {
            public void run() {
                while (progressBarStatus < 100 && run_flag == true) { // added run_flag here

                    // process some tasks
                    progressBarStatus = doSomeTasks();

                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }

                    // Update the progress bar
                    progressBarHandler.post(new Runnable() {
                        public void run() {
                            linProgressBar.setProgress(progressBarStatus);
                        }
                    });
                }

                if (progressBarStatus >= 100) {

                    try {
                        Thread.sleep(2000);
                    } catch (InterruptedException e) 
                    {
                        e.printStackTrace();
                    }

                }
            }
        };

        t1.start();

    }catch (Exception e) {

    } 
```

# wpf - 在 wpf 中没有为 stackpanel 触发 Drop 事件

> ID：12054043
> 
> 赞同：2
> 
> 时间：2012-08-21T11:40:47.200
> 
> 标签：wpf, stackpanel

我有一个网格，其中包含同一级别的 Canvas 和 StackPanel。我的意思是放置在画布顶部的 StackPanel。画布包含多个应该可以拖动的元素。我必须处理 StackPanel 的 Drop 事件。如果 stackpanel 不包含任何子元素，即使我设置了 stackpanel 的高度，drop 事件也不起作用。如果我为 StackPanel 设置 Background 属性，它将起作用，但在这种情况下，画布子元素（在堆栈面板下方）的 mousemove 事件不起作用。

这是 XAML

```
<Grid>
        <jas:DragCanvas 
            x:Name="dragCanvas"
            Grid.Row="1" 
            AllowDragging="{Binding ElementName=btnAllowDragging, Path=IsChecked}"
            AllowDragOutOfView="{Binding ElementName=btnAllowDragOutOfView, Path=IsChecked}"
            >
            <Ellipse
                Canvas.Left="100" Canvas.Bottom="100"
                Width="65" Height="70">
                <Ellipse.Fill>
                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                        <LinearGradientBrush.GradientStops>
                            <GradientStop Color="LightGray" Offset="0" />
                            <GradientStop Color="Black" Offset="0.75" />
                        </LinearGradientBrush.GradientStops>
                    </LinearGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
        </jas:DragCanvas>
        <DockPanel LastChildFill="False">
            <Border DockPanel.Dock="Left" BorderBrush="Black" BorderThickness="2">
                <StackPanel x:Name="stackPanel" Drop="StackPanel_Drop" AllowDrop="True">
                    <Border Height="100" Width="100" Background="Red"></Border>
                </StackPanel>
            </Border>
        </DockPanel>
    </Grid> 
```

# c++ - 指针数据交换的向量和队列：深拷贝和浅拷贝

> ID：12054044
> 
> 赞同：0
> 
> 时间：2012-08-21T11:40:48.240
> 
> 标签：c++, stl

在我的代码中，我有一个指向对象的指针向量`SomeClass`和一个（自定义比较）基于向量的优先级队列，其中包含指向对象的指针`SomeClass`：

```
std::vector<SomeClass*> my_vector;
std::priority_queue<SomeClass*, vector<SomeClass*>, CustomCompare> my_queue; 
```

最初`my_vector`是空的并且`my_queue`是满的。逐渐`my_queue`被清空成`my_vector`这样：

```
my_vector.push_back(my_queue.top());
my_queue.pop(); 
```

我的问题是：是否会`my_queue.pop()`删除分配给`SomeClass`被推回的对象的内存，`my_vector`从而导致元素`my_vector`成为悬空指针？或者，该向量是对返回的指针指向的对象进行深拷贝还是浅拷贝`my_queue.top()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:44:08.860

不会进行任何删除。唯一被复制/删除/pushed_back 的是指针。这些指向保持活动状态的对象，*前提是它们已被动态分配*。在这种情况下，您将不得不自己进行清理。

根据所需的行为，您可能希望使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)来避免手动内存管理，存储`SomeClass`对象而不是指针，或者保持原样并确保在最后进行清理。请记住，很难保证您的程序将安全地到达释放内存的位置，这也是智能指针优于原始指针的原因之一。动态分配的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:45:06.160

`my_queue.pop()`只会删除存储在队列中的对象；在这种情况下，指针本身，而不是指针指向的对象。所以你在这里很好。

强制说明：考虑使用智能指针而不是原始指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:43:31.617

队列和向量都只包含指针。除非您使用智能指针或共享指针，否则队列的析构函数和向量的析构函数都不会释放内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:45:01.217

不，因为它们存储指针，它们将复制和销毁指针（这是一个无操作）。没有魔法。`unique_ptr`如果它们从不同时存储指向同一个对象的指针，那么如果你希望它们最终销毁对象，你可能想要 make then store s 。或者，您可以将实际对象存储在第三个向量 ( `vector<SomeClass>`) 中，并分别维护向量和指针队列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T11:47:29.980

您在任何地方都存储指向 SomeClass 对象的指针，因此没有 my_queue.pop() 只是从队列中删除指针并且您的对象没问题，并且您将存储指向向量的指针的副本，而不是深层副本。

# c# - 未知错误：[来源] ASP.NET 4.0.30319.0

> ID：12054045
> 
> 赞同：-3
> 
> 时间：2012-08-21T11:40:49.510
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, iis, web

有人看到这样的错误吗？

```
[Type] Warning | [Source] ASP.NET 4.0.30319.0 | [Category] Web Event | [Event] 1309 | [User] | [Computer] VM2014.conduit.local | [Description] Event code: 3005
Event message: An unhandled exception has occurred.
Event time: 8/21/2012 1:13:11 PM
Event time (UTC): 8/21/2012 10:13:11 AM
Event ID: 46772f5ad385469094b7e30018a6ee18
Event sequence: 949848
Event occurrence: 1589
Event detail code: 0

Application information:
Application domain: /LM/W3SVC/2/ROOT-3-129888848053228988
Trust level: Full
Application Virtual Path: /
Application Path: D:\Products\Web\AccountsServices\
Machine name: VM2014

Process information:
Process ID: 9568
Process name: w3wp.exe
Account name: CA-C-DMN\olapUser

Exception information:
Exception type: HttpException
Exception message: A potentially dangerous Request.Path value was detected from the client (:).
at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

Request information:
Request URL: http://accounts.conduit.com/https:/accounts.conduit.com/
Request path: /https:/accounts.conduit.com/
User host address: 94.127.73.24
User: 
Is authenticated: False
Authentication Type: 
Thread account name: CA-C-DMN\olapUser

Thread information:
Thread ID: 72
Thread account name: CA-C-DMN\olapUser
Is impersonating: False
Stack trace: at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:55:37.330

线索在“从客户端检测到潜在危险的 Request.Path 值”

这通常是在通过表单或在 url 中提交 html 或 javascript 时触发的，尽管无法从您发布的内容中准确判断。

希望这可以为您的调查指明正确的方向。

# sql - 从sql中删除重复记录

> ID：12054046
> 
> 赞同：1
> 
> 时间：2012-08-21T11:40:53.947
> 
> 标签：sql, sql-server

在我的表中，我有很多重复的记录

```
SELECT ENROLMENT_NO_DATE,  COUNT(ENROLMENT_NO_DATE) AS NumOccurrences
FROM Import_Master GROUP BY ENROLMENT_NO_DATE HAVING ( COUNT(ENROLMENT_NO_DATE) > 1 ) 
```

如果第二次发生重复记录，我需要删除它......需要保留第一个或任何一个记录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:55:15.570

您可以使用 CTE 执行此任务：

```
;with cte as
(
  select ENROLMENT_NO_DATE, 
    row_number() over(partition by ENROLMENT_NO_DATE order by ENROLMENT_NO_DATE) rn
  from Import_Master
) 
delete from cte where rn > 1 
```

请参阅[带有演示的 SQL Fddle](http://sqlfiddle.com/#!3/0aec6/10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:54:48.577

一种方法是创建一个辅助临时表

```
CREATE TABLE Import_Master_Deduped AS SELECT * FROM Import_Master WHERE FALSE; 
```

这将创建一个与 Import_Master 具有相同结构的空表。现在使用索引对新表施加唯一性：

```
CREATE UNIQUE INDEX Import_Master_Ndx ON Import_Master_Deduped(ENROLMENT_NO_DATE); 
```

最后用 INSERT IGNORE 复制包含重复记录的表，这样重复记录就不会被插入：

```
INSERT IGNORE INTO Import_Master_Deduped SELECT * FROM Import_Master; 
```

此时，在检查一切正常后，您可以重命名这两个表交换它们的名称（这将丢失任何旧索引），或者 TRUNCATE Import_Master 表并将删除的重复记录从新表复制回旧表。

在第二种情况下，在旧表上重新创建 UNIQUE 约束以避免进一步重复；首先，在新表上重新创建任何旧索引。

最后，您删除不再需要的表。

# android - Android 在 HTC one X 上使用摄像机录制视频

> ID：12054052
> 
> 赞同：1
> 
> 时间：2012-08-21T11:41:02.013
> 
> 标签：android, htc-android

我在我的代码中实现了一个录像机，它几乎可以在除 HTC One X 之外的所有设备上完美运行。视频记录卡住了（第一个图像没有改变），当我试图打开文件时，我m 收到弹窗“无法播放视频，抱歉无法播放此视频”

这是我的设置

mMediaRecorder.setPreviewDisplay(mSurfaceHolder.getSurface());

```
 // Use the same frame rate for both, since internally
    // if the frame rate is too large, it can cause camera to become
    // unstable. We need to fix the MediaRecorder to disable the support
    // of setting frame rate for now.
    mMediaRecorder.setVideoFrameRate(mProfile.videoFrameRate);

    //mMediaRecorder.setVideoSize(mVideoWidth, mVideoHeight);
    mMediaRecorder.setVideoSize(640,480); // Works On Note(not on HTC One X)

    mMediaRecorder.setVideoEncodingBitRate(MAXIMAL_PERMITTED_VIDEO_ENCODING_BITRATE);
    // mMediaRecorder.setVideoEncoder(mProfile.videoCodec);
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
    // mMediaRecorder.setAudioEncoder(mProfile.audioCodec);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T02:33:22.453

我从这个问题中改编了一些代码[How can I capture a video recording on Android?](https://stackoverflow.com/questions/1817742/how-can-i-capture-a-video-recording-on-android) 要录制视频，请将其设置为 640x480，它在我的 AT&T One X 上运行良好： [https ://raw.github.com/lnanek/Misc/master/HtcOneXVideoRecord/src/com/htc/sample/videorecord/RecordVideo.java](https://raw.github.com/lnanek/Misc/master/HtcOneXVideoRecord/src/com/htc/sample/videorecord/RecordVideo.java)

所以不是 640x480 本身不起作用。您设置的比特率的值是多少？您是否考虑过改用配置文件，这些配置文件是在支持的组合中构建的？例如，您将设置：

mRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH)

这会将分辨率、比特率等设置为有效的值。高品质录音、低品质录音等有各种常数。

# python - scipy 用于 python 插值的 splrep/splev 返回 nan

> ID：12054060
> 
> 赞同：4
> 
> 时间：2012-08-21T11:41:23.673
> 
> 标签：python, scipy, nan

我有一个[数据集](http://users-phys.au.dk/daniel89/test.txt)，第一列是`x`数据（波长），第二列是`y`数据（相对强度）。

我希望将其插入到另一个`x_new`-data 但我的问题是`splrep`返回`nan`-values：

```
>>import numpy as np
>>from scipy.interpolate import splrep, splev
>>d = np.loadtxt("test.txt")
>>x,y = d[:,0],d[:,1]
>>
>>f = splrep( x,y,k=5 )
>>print f
>>(array([ 4501.19,  4501.19,  4501.19, ...,  7091.74,  7091.74,  7091.74]), array([ nan,  nan,  nan, ...,   0.,   0.,   0.]), 5) 
```

当我不指定时也会发生这种情况`k`。任何建议如何克服这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T11:58:15.850

您的`x`值可能包含重复项，请使用`s=...`splrep 的关键字参数来设置平滑因子，因为如果未设置，则样条线应该*准确地*通过每个点，这对于重复项是不可能的。

可能它们不是重复的，但也非常接近。

# android - Android - 片段 onActivityResult 避免重新加载

> ID：12054062
> 
> 赞同：0
> 
> 时间：2012-08-21T11:41:26.453
> 
> 标签：android, android-fragments, android-activity

我正在使用`Fragment`将图像加载到`ImageView`.

我想更改该图像，`startActivityForResult()`但是当我完成`Activity`并返回时`Fragment`，会`Fragment`再次重新加载第一张图像。

可能是因为`onStart()`方法。

我怎样才能避免`Fragment`重新加载之后`onActivityResult()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:39:57.877

我发现了问题所在。

该片段在 onStart() 方法中加载信息。我查看了片段生命周期，发现我必须在 onActivityCreated() 方法中加载信息。

这样视图就已经创建好了，我可以参考我的 xml 对象。查看这张解释片段生命周期的图片：http: [//developer.android.com/images/activity_fragment_lifecycle.png](http://developer.android.com/images/activity_fragment_lifecycle.png)

# visual-c++ - 致命错误 LNK1179：无效或损坏的文件：重复的 COMDAT '_IID_IXMLDOMImplementation'

> ID：12054064
> 
> 赞同：15
> 
> 时间：2012-08-21T11:41:27.200
> 
> 标签：visual-c++, visual-studio-2005

当我链接我的项目时，我收到了这个错误，

> COMMUNICATION.obj：致命错误 LNK1179：文件无效或损坏：重复 COMDAT '_IID_IXMLDOMImplementation'

问题的根源是什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-21T14:16:08.480

这是一个棘手的问题。

问题是生成的符号太长，并且存在歧义：

```
 //...
  void MyVeryLongFunctionNameUnique_0(void);
  void MyVeryLongFunctionNameUnique_1(void);
  //   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  //   (example max-symbol-length-seen-by-linker) 
```

在这种情况下，链接器将这两个函数“视为”“相同”，因为使它们“唯一”的部分比最大符号长度长。

*至少在*三种情况下会发生这种情况：

*   您的符号名称“太长”而不能被认为是链接器独有的，但对于编译器来说可能没问题（例如当您从许多嵌套模板中展开时）
*   你做了一些无效 C++ 的“诡计”，它通过了编译器，但你现在有一个 invalid `*.obj`，它阻塞了链接器。
*   您指定了重复的“未命名”类/结构，链接器无法解析它们。
*   **===[UPDATE]===**，这不是你的错，这是编译器和/或链接器的内部问题（有关可能的解决方法，请参见下文）。

根据问题（以上），您可以“增加”符号长度（通过限制符号长度的减少），或修复代码以使其有效（明确）C++。

此错误（最低限度）由 Microsoft 在以下位置描述：

*   [http://msdn.microsoft.com/en-us/library/cddbs9aw(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/cddbs9aw(v=vs.90).aspx)

**注意：**此最大符号长度可以使用`/H`选项设置，请参阅：http: [//msdn.microsoft.com/en-us/library/bc2y4ddf (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bc2y4ddf(v=vs.90).aspx)

*   **建议：** 检查是否`/H`在您的命令行上使用 。如果是，则删除它（不指定max-symbol-length，默认为`2,047`，`/H`只能*减少*这个长度，不能*增加*它）。

但是，您可能通过`/Gy`选项（函数级链接）触发了它，这可能是通过 、 或 之一暗示的`/Z7`：`/Zi`http `/ZI`: [//msdn.microsoft.com/en-us/library/958x11bc(v=vs. 90).aspx](http://msdn.microsoft.com/en-us/library/958x11bc(v=vs.90).aspx)

一个讨论此问题的 MSDN 线程是：

*   [http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/57e3207e-9fab-4b83-b264-79a8a717a8a7](http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/57e3207e-9fab-4b83-b264-79a8a717a8a7)

该线程表明可以使用“invalid-C++-code-that-c `*.obj`​​ompiles”（你得到你的）触发这个问题，但是这会`*.obj`导致链接器无效（这个例子试图`main`同时用作函数和模板） ：

*   [http://www.cplusplus.com/forum/lounge/46361/](http://www.cplusplus.com/forum/lounge/46361/)

**===[更新]===**

我之前应该这么说，因为我怀疑，但我现在有更多信息：这可能不是你的错，编译器和/或链接器中似乎存在触发此错误的问题。尽管事实上你所有失败的关系中唯一的共同点是你。

回想一下“上面的列表”适用（这可能是你的错）。但是，在“这不是你的错”的情况下，这里是当前运行列表（我相信这个列表不完整）。

*   `*.ilk`您的文件（中间链接文件）中存在内部错误/损坏。删除它并重建。
*   您已`/INCREMENTAL`打开链接，但不知何故增量链接不适用于您的项目，因此您应该将其关闭并重建（`Project-Properties=>Configuration Properties=>Linker=>General=>Enable Incremental Linking`[设置为“否”（`/INCREMENTAL:NO`）]
*   您使用的“COMDAT 折叠”的“优化”有问题。您可以通过转到“删除冗余 COMDATs” `Project Proerties=>Configuration Properties=>Linker=>Optimization=>Enable COMDAT Folding`，设置为“删除冗余 COMDATs ( `/OPT:ICF`)

这是一个有趣的线程，他*有时*可以链接，有时不能，通过注释/注释几行代码。问题不是代码——他只是无法一致地链接，而且看起来编译器和/或链接器在一些晦涩的用例下存在内部问题：

*   [http://www.pcreview.co.uk/forums/fatal-error-lnk1179-t1430593.html](http://www.pcreview.co.uk/forums/fatal-error-lnk1179-t1430593.html)

来自非平凡网络搜索的其他观察结果：

*   这个问题似乎并不罕见
*   它似乎与某种形式的`template<>`使用有关
*   当“调试”构建没有这个问题时，其他人似乎在“发布”构建中看到了这个问题（但在许多情况下，它也出现在“调试”构建中）
*   如果链接在一台机器上“失败”，它可能在另一台构建机器上“成功”（不知道为什么，“干净构建”似乎没有效果）
*   如果您注释/注释掉特别重要的几行代码，并完成构建，并继续这样做，直到所有代码再次取消注释，您的链接可能会成功（这似乎是可重复的）
*   如果您在使用 MSVC2008 时遇到此错误，并且将代码移植到 MSVC2010，您仍然会收到此错误

**===[给世界好人的请愿书]===**

如果您对此错误有其他意见，请在下面列出（作为其他答案，或作为此答案下方的评论）。我有一个类似的问题，这不是我的错，而且这些变通方法都不适合我（尽管在某些情况下它们似乎确实适用于他们的项目中的其他人）。

我正在增加赏金，因为这让我发疯。

**===[更新+2]===**

*（叹气）*，这里有更多要尝试的东西（显然对其他人有用，但对我不起作用）：

*   这家伙改变了他的编译设置，它工作了（来自[http://forums.codeguru.com/showthread.php?249603.html](http://forums.codeguru.com/showthread.php?249603.html)的线程）：

    `Project->Settings->C++ tab, Debug cathegory: Inline function expansion`: 从 ' `None`' 更改为 ' `Only _inline`'。

*   上面的线程引用了另一个必须重新安装 MSVC 的线程

*   它可能与在可能不兼容的编译器和/或链接开关中链接具有“细微差异”的模块有关。检查所有“贡献库”是否使用完全相同的开关构建

以下是有关此错误/错误的更多症状/观察结果：

*   上述问题的清单仍然适用
*   该问题似乎在 MSVC2005 中“开始出现”，并且在 MSVC2008 和 MSVC2010 中继续出现相同的行为（将代码移植到较新的编译器后仍然会出现错误）
*   重新启动IDE，重新启动机器似乎对任何人都不起作用
*   一个人说明确的“清理”然后重新编译对他有用，但许多其他人说这对他们不起作用
*   通常与“增量链接”有关（例如，将其关闭）

状态：不开心。

**===[更新+3：链接成功]===**

*超级古怪的无意义**修复***成功发现链接！

这是（上图）的一个变体，您可以在其中“摆弄代码直到编译器和/或链接器行为”。不好的是可能需要这样做。

特定的单个链接器错误 ( `LNK1179`) 用于`MyMainBody<>()`：

```
#include "MyClassA.hpp"
#include "MyClassB.hpp"
#include "MyClassC.hpp"
#include "MyClassD.hpp"
#include "MyMainBody.hpp"

int main(int argc, char* argv[])
{
  // Use a function template for the "main-body", 
  // implementation is "mostly-simple", instantiates 
  // some local "MyClass" instances, they reference 
  // each other, and do some initialization,
  // (~50 lines of code)
  //
  // !!! LNK1179 for `MyMainBody<>()`, mangled name is ~236 chars
  //
  return MyMainBody<MyClassA,MyClassB,MyClassC,MyClassD>(argc,argv);
} 
```

**修复：**

*   `MyMainBody<>()`从 " `template<>`"转换为**显式函数 LINK SUCCESS**。

**这个 FIX SUX**，因为我需要 EXACT-SAME-CODE 用于其他实用程序中的其他类型，并且`MyMainBody<>()`实现是非平凡的（但大多是简单的）实例化和设置，必须以特定的方式以特定的顺序完成.

但是，嘿，现在这是一个临时解决方法：在 MSVC2008 和 MSVC2010 编译器上确认（`LNK1179`每个错误相同，在应用解决方法后每个都成功链接）。

**这是编译器和/或链接器错误**，因为代码是“简单/正确的 C++”（甚至不是 C++11）。

所以，我很高兴*（我在全职工作 2 周后得到了一个链接）*。但是，很失望*（编译器和/或链接器有一个愚蠢的问题，在这个用例中链接一个简单的模板<>，我无法弄清楚如何解决）*。

**进一步，“赏金结束”**，但没有其他人愿意接受这个*（没有其他答案？）*，所以看起来“ **+100** ”不给任何人。*（沉重的叹息）*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-22T18:45:51.163

这个问题有很多答案，但没有一个能完全捕捉到我的代码库中发生的事情，以及我怀疑 OP 在 2012 年被问到这个问题时看到的内容。

# 问题

使用带有和属性的[指令](https://docs.microsoft.com/en-us/cpp/preprocessor/hash-import-directive-cpp)`IID_*`很容易意外重现类型上的 COMDAT 错误。[`#import`](https://docs.microsoft.com/en-us/cpp/preprocessor/hash-import-directive-cpp)[`rename_namespace`](https://docs.microsoft.com/en-us/cpp/preprocessor/rename-namespace)[`named_guids`](https://docs.microsoft.com/en-us/cpp/preprocessor/named-guids)

如果两个`#import`ed 类型库包含相同的接口，就像 OP 的情况一样`IXMLDOMImplementation`，那么生成的`.tlh`文件将`IID_IXMLDOMImplementation`在两个命名空间中声明，从而导致重复。

例如，生成的代码：

```
#import <foo.tlb> rename_namespace("FOO") named_guids;
#import <bar.tlb> rename_namespace("BAR") named_guids; 
```

...可以简化成这样的：

```
namespace FOO {
    extern "C" __declspec(selectany) const GUID IID_IFOOBAR = {0};
}

namespace BAR {
    extern "C" __declspec(selectany) const GUID IID_IFOOBAR = {0};
} 
```

这是问题的简单 RexTester 重现：[https ://rextester.com/OLAC10112](https://rextester.com/OLAC10112)

该`named_guids`属性导致`IID_*`生成 并且该`rename_namespace`属性将其包装在名称空间中。

不幸的是，在这种情况下，`extern "C"`当它出现在 C++ 命名空间中时，它似乎没有按预期工作。`IID_FOOBAR`这会导致编译器在同一个`.obj`文件 中生成多个定义。[`DUMPBIN /SYMBOLS`](https://docs.microsoft.com/en-us/cpp/build/reference/symbols)或十六进制编辑器确认重复的符号。

链接器看到这些多个定义并发出`duplicate COMDAT`诊断。

# 一个解法

知道这`rename_namespace`不能很好地与 一起使用`named_guids`，显而易见的解决方案是根本不将它们一起使用。删除该`named_guids`属性并改用[`_uuidof()`operator](https://docs.microsoft.com/en-us/cpp/cpp/uuidof-operator)可能是最简单的。

在`named_guids`从`#import`指令中删除并修改代码，替换所有使用`FOO::IID_IFooBar`with`_uuidof(FOO::IFooBar)`之后，我的 COM 重代码库又重新开始构建了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-19T04:37:43.970

此问题在 Visual Studio 2017 的某些特定版本中报告为错误。尝试修补 15.9.1 或更高版本以修复此问题

*   [VS 15.8 Preview 4 中报告的问题](https://developercommunity.visualstudio.com/content/problem/296073/lnk1179-duplicate-comdat-in-visual-studio-158-prev.html)

*   [VS 15.9 Preview 2 中已解决的补丁](https://developercommunity.visualstudio.com/topics/fixed+in%3A+visual+studio+2017+version+15.9+preview+2.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T08:21:57.027

我在将一些代码（1）从 MSVC 移植到 GCC 时遇到了这个问题。为了让构建链接到 GCC，我必须为一些专门的模板函数 (2) 提供空实现，这导致了 MSVC 上的 LNK1179。我能够通过内联函数（3）来解决，即

1.  `template<> template<> void LongName1<LongName2>::FunctionName(boost::library::type1 & a, const unsigned int b);`
2.  `template<> template<> void LongName1<LongName2>::FunctionName(boost::library::type1 & a, const unsigned int b) {};`
3.  `template<> template<> inline void LongName1<LongName2>::FunctionName(boost::library::type1 & a, const unsigned int b) {};`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-15T07:00:48.897

我收到了这个错误，对此感到非常困惑。结束注释掉引用的 cpp 中的所有内容并小批量重新引入内容，直到文件恢复到与我开始时相同的状态。而且我不再收到错误消息。对我来说，这在我的情况下表明这是编译器中的一个错误，但由于我无法再重现它，所以我无法获得更多帮助。

我在：Microsoft Visual Studio Professional 2019 版本 16.11.3

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-16T02:16:44.723

希望我蹩脚的解决方法可以帮助某人：我确保手动删除所有 .obj 和中间构建文件（至少包括 .pch、.pdb、.tlog、.lastbuildstate 和其他任何看起来可疑的东西）并从头开始重建。

我建议在没有证据的情况下，从以前的构建中遗留一些文件往往会导致问题更频繁地发生。在我的特定构建系统中，我也从头开始删除并重新创建 .vcxproj 和 .sln 文件。

我个人的怀疑是，在读取中间文件的时间和在大型项目中写入它们的时间之间，构建/链接过程中存在某种竞争条件。同样，我没有证据证明这是真的，但这是我唯一的猜测，似乎符合该错误的所有已知事实。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-01T01:59:10.403

I wrote Outlook addins years ago and I was asked to write another. Right off the bat, I ran into this problem and through a little process of elimination, I fixed mine.

It turns out that when you choose an extensibity project(I hand coded mine back in the day), it creates and save 2 objects that I was unaware of: DTE and DTE80\. To create the interfaces that manipulate these objects, they import directly from the DLLs in stdafx.h. Being that I'm working on Outlook, I also needed to import a couple of interfaces: Office and Outlook.

So, seeing as this error popped up almost immediately after writing my first tidbits of code, I started over, and added one thing at a time. The project blew chunks in the described way right after I added:

```
//Added mvc 
//The following #import imports MSO based on it's LIBID
#import "libid:2DF8D04C-5BFA-101B-BDE5-00AA0044DE52" version("2.2") lcid("0") rename_namespace("Office") raw_interfaces_only named_guids
using namespace Office;

//The following #import imports Outoloks Object lib based on it's LIBID
#import "libid:00062FFF-0000-0000-C000-000000000046" rename_namespace("Outlook") raw_interfaces_only named_guids 
using namespace Outlook; 
```

So, seeing as I had no intention of figuring out the DTE stuff, I just commented out them and anything having to do with them:

```
//The following #import imports VS Command Bars based on it's LIBID
//  #import "libid:1CBA492E-7263-47BB-87FE-639000619B15" version("8.0") lcid("0") raw_interfaces_only named_guids

//The following #import imports DTE based on it's LIBID
//  #import "libid:80cc9f66-e7d8-4ddd-85b6-d9e6cd0e93e2" version("8.0") lcid("0") raw_interfaces_only named_guids

//The following #import imports DTE80 based on it's LIBID
//  #import "libid:1A31287A-4D7D-413e-8E32-3B374931BD89" version("8.0") lcid("0") raw_interfaces_only named_guids 
```

After wandering around fixing the compile errors, it compiled and linked just fine. I'm not suggesting this will work for everybody, but it worked for me. Good luck to any who pass by here....

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-27T10:33:21.833

我必须做 c++ -> 代码生成 -> 启用功能 - 级别链接 -> 否

# file-sharing - 文件共享技术

> ID：12054068
> 
> 赞同：1
> 
> 时间：2012-08-21T11:41:38.440
> 
> 标签：file-sharing, file-storage, cloud-storage

我们目前有一个社交网络平台。我们接下来正在开发文件共享功能，其中用户应该能够与朋友和群组上传和共享文件（pdf、ppt、docs、图像、zip）。

我们应该注意哪些具体技术？我们不是在寻找像 Dropbox、Amazon s3 这样的存储提供商作为答案。我们需要一些关于高效存储技术的建议。我们必须存储文件的属性，如作者、文件共享对象、编辑权限、下载权限等。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:37:24.603

答案取决于您的具体要求。一般来说，您应该寻找提供高可用性（例如，没有单点故障）、高持久性（一旦写入，它就会保持写入）和高性能（低延迟、高吞吐量）的提供程序。此外，您可能需要某些安全功能，但具体细节再次取决于您的需求。您注意到了指定共享属性的能力，因此您需要一个在指定访问权限方面具有高度灵活性和控制力的提供者。要存储相关数据，例如作者身份，您需要能够存储和检索与存储对象关联的任意元数据。最后，虽然您说您不想要特定的提供商推荐，

# php - PHP 在函数中使用一个中心变量文件

> ID：12054069
> 
> 赞同：0
> 
> 时间：2012-08-21T11:41:39.757
> 
> 标签：php

在 PHP 中，以下情况的正确方法是什么：

我有一个“中央”vars.php，其中包含一些参数，如 MySQL 主机名、用户、pass、一个指示代码是否在测试环境中运行的 $Test 变量，以及我在整个站点中使用的一些其他变量。

然后我有一个functions.php，其中包含我可以在整个站点中使用的所有功能。

在其中一些函数中，我可能需要 vars.php 文件中的一些变量。

什么是使 vars.php 在 PHP 中“无处不在”的正确方法？现在我这样做：

```
vars.php:
   <?php
   if(strstr($_SERVER['HTTP_HOST'],"localhost"))
   {
       $Test = true;
   }
   ?>

functions.php:
   <?php
   function DoSomething()
   {
      include "vars.php";
      if($Test)
      {
         $String = "Test is true!";
      }
         else
         {
            $String = "Test is false!";
         }
      return $String;
   }
   ?>

index.php:
   <?php
   include "vars.php";
   include "functions.php;
   $DoSomething = DoSomething();
   echo $DoSomething;
   ?> 
```

虽然这确实有效，但我必须在我定义的每个函数中包含 vars.php，这对我来说似乎不是一个“好”的解决方案。难道没有办法直接在全局范围内定义 vars.php 中的变量，并且能够直接在函数内部使用它们而不必担心包含它们吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:44:07.297

正确的方法是使用常量而不是变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:46:13.683

您正在寻找全局变量。如果您在页面顶部包含该文件，然后在您的函数中将每个文件声明为全局文件，如下所示：

```
include('vars.php');

function whatHost()
{
  global $host;
  echo $host;
} 
```

它会起作用的。这是非常糟糕的做法，因为全局状态在 95% 的情况下都非常糟糕。PHP 具有强大的面向对象特性，允许您将功能和状态封装在对象中。我建议您阅读并了解更正确的存储应用程序配置的方法。请注意，对于这种特殊情况，您可以只使用常量（：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:50:05.957

使用常量。一起定义并始终在类/文件之上。

常量是唯一的，我们将它们用作配置信息或静态/常量数据。

如果您要起诉 DEFINE，请记住使用 const 作为字符串而不是 var，例如：

定义（“BASE_PATH”，“C：//base/”）；

$dir = BASE_PATH 。“图像/dropbox.txt”；

[http://php.net/manual/en/language.constants.php](http://php.net/manual/en/language.constants.php)

# java - 在 JUnit 测试中更改 Spring 实现对象的最佳实践

> ID：12054072
> 
> 赞同：7
> 
> 时间：2012-08-21T11:41:48.067
> 
> 标签：java, spring, junit

我有一个启用 Spring 的 JUnit 测试。它加载我的默认应用程序上下文。现在我想为我的测试替换一个bean，即用testEntityManager 替换entityManager。

我可以想象三种可能的方式，看起来不太优雅：

1.  拆分上下文（defaultContext，emContext）并通过测试上下文文件覆盖上下文文件（测试资源中的emContext）
2.  使用工厂并选择 testEntityManager （在生产代码中）
3.  不使用 Spring，而是自己构建对象层次结构（最不可行的解决方案）

是否有最佳实践如何正确地做到这*一点*？

这个问题的背景是：我真的只想替换靠近边界的对象（DB，Webservices等）

此致

**编辑：我现在已经通过这种方式解决了：我在类路径和测试类路径中添加了一个属性文件，并将 Spring 别名与属性占位符结合使用。通过这种方式，我能够将我的 bean 连接到测试中的不同实现。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T12:34:05.750

当您从多个位置加载上下文时，Spring 允许您覆盖 bean 定义。

所以你不一定需要拆分上下文“/applicationContext.xml”。而是为测试“/applicationContext-test.xml”提供额外的应用程序上下文，您可以在其中覆盖所需的 bean。然后拉入两个配置并让测试配置中的 bean 覆盖生产配置中的 bean。

```
@ContextConfiguration({"/applicationContext.xml", "/applicationContext-test.xml"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:00:01.907

恕我直言，最佳实践是使用 spring [bean 定义配置文件](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html#new-in-3.1-bean-definition-profiles)。我的文档链接将引导您访问其他可读资源。Google 还将提供有用的链接，例如[Gordon Dickens: Spring 3.1 Environment Profiles](http://java.dzone.com/articles/spring-31-environment-profiles)。

# jquery - 使用 jQuery 选择时将文本添加到列表项中

> ID：12054074
> 
> 赞同：0
> 
> 时间：2012-08-21T11:41:53.400
> 
> 标签：jquery, jquery-ui, list, text

我正在使用可拖动和可排序的 jQuery UI，当我单击要移动的项目时，我希望能够在 li 中添加文本，它显示了放置项目的位置，我已经设置了以下内容来演示：' -

[http://jsfiddle.net/uJcB7/191/](http://jsfiddle.net/uJcB7/191/)

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:45:09.537

绑定 sortable 的[`start`](http://jqueryui.com/demos/sortable/#event-start)事件：

```
$(function() {
    $( "#sortable" ).sortable({
        placeholder: "ui-state-highlight",
        start: function(event, ui) { 
          $("li.ui-state-highlight").text("your text");
        }
    });
    $( "#sortable" ).disableSelection();
}); 
```

[小提琴](http://jsfiddle.net/uJcB7/191/)。​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:46:54.727

```
 $("li").click(function(){
            $(this).text("PLACE ON :" + place);
    }); 
```

# ios - [UIView(CALayer Delegate) drawLayer:inContext: crash

> ID：12054083
> 
> 赞同：0
> 
> 时间：2012-08-21T11:42:49.523
> 
> 标签：ios, crash

我的应用程序在 [UIView(CALayer Delegate) drawLayer:inContext: 中崩溃，最困难的是崩溃日志中没有我的应用程序的任何代码，我无法重现它。这个问题花了我几天时间，我仍然不知道。你们提供的任何想法，我都会尝试。谢谢您的帮助。

```
 crash log:
    0  libobjc.A.dylib     objc_msgSend_stret (in libobjc.A.dylib) + 18
    1  UIKit             -[UIView(CALayerDelegate) drawLayer:inContext:]
    2  QuartzCore         -[CALayer drawInContext:] (in QuartzCore) + 116
    3  QuartzCore          CABackingStoreUpdate_ (in QuartzCore) + 1782
    4  QuartzCore          CA::Layer::display_() (in QuartzCore) + 972
    5  QuartzCore        CA::Layer::display() (in QuartzCore) + 128
    6  QuartzCore      CA::Layer::display_if_needed(CA::Transaction*) (in QuartzCore)
    7  QuartzCore     CA::Context::commit_transaction(CA::Transaction*)
    8  QuartzCore      CA::Transaction::commit() (in QuartzCore) + 314
    9  QuartzCore      CA::Transaction::pop() (in QuartzCore) + 126
    10 QuartzCore     +[CATransaction commit] (in QuartzCore) + 34
    11 UIKit          _UIWindowUpdateVisibleContextOrder (in UIKit) + 188
    12 UIKit           +[UIWindow _prepareWindowsForAppResume] (in UIKit) + 10
    13 UIKit          -[UIApplication _handleApplicationResumeEvent:] (in UIKit) + 74
    14 UIKit              -[UIApplication handleEvent:withNewEvent:] (in UIKit) + 1080
    15 UIKit              -[UIApplication sendEvent:] (in UIKit) + 54
    16 UIKit               _UIApplicationHandleEvent (in UIKit) + 5808 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:50:20.973

解决方案是尝试将问题细分。假设您有一个导致此问题的视图，那么最可能的解释是视图中的某些内容已损坏或已被释放。

1）你有没有尝试打开僵尸，看看是否有一些dealloc'd项目正在收到消息？

2）在崩溃开始时正在显示（或即将显示）的视图中，一次删除一个项目，或者将它们全部从视图中删除，然后开始一一添加。完成这种杂乱工作的一个好方法是复制你的项目文件夹，保存旧文件夹，然后剪掉代码块，这样你就可以开始工作了。

我的猜测是某些东西在它应该被释放之前就被释放了。

# ruby-on-rails - rails action_controller 用法

> ID：12054084
> 
> 赞同：0
> 
> 时间：2012-08-21T11:42:54.607
> 
> 标签：ruby-on-rails, actioncontroller

我深入研究了一些具有悠久开发历史的项目

也许这是新问题：

对于特定的控制器，我发现它是从**ActionController**继承的， 就像这样

```
class GraphController < ActionController
end 
```

并且似乎它用于 API 原因，当我在那里添加一些没有布局的操作时，任何人都可以向我指出一些关于 ActionController 用法的好文章。我检查了文档，但找不到关于 tats 的任何好的解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:07:56.587

[http://guides.rubyonrails.org/action_controller_overview.html](http://guides.rubyonrails.org/action_controller_overview.html)包含对 ActionController 基础知识的良好描述。

# model - MVC WebApi 不适用于通用模型

> ID：12054087
> 
> 赞同：1
> 
> 时间：2012-08-21T11:43:27.250
> 
> 标签：model, asp.net-mvc-4, asp.net-web-api, model-binding, customvalidator

我将 mij WCF WebApi 项目转换为 MVC WebApi 项目。我有一个具有如下属性的模型：

```
public class ObjectWaarde<T> 
{

    public ObjectWaarde(T objectType)
    {
        ObjectType = objectType;
    }

    /// <summary>
    /// Gets the term to search for.
    /// </summary>
    public T ObjectType { get; set; }

    public object Waardes
    {
        get
        {

            return ObjectType;
        }
        set { ObjectType = (T) value; }
    }
} 
```

当我将此模型发布到我的 ApiController 时，会出现此错误（HTTP 500）：

对象“System.RuntimeType”上的属性访问器“DeclaringMethod”引发了以下异常：“只能在 Type.IsGenericParameter 为 true 的类型上调用方法。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:43:27.250

该问题是由 defaultbodymodelvalidator 引起的。

这是一个已知问题： [http ://aspnetwebstack.codeplex.com/workitem/225](http://aspnetwebstack.codeplex.com/workitem/225)

我找到的唯一解决方案是禁用模型验证器。

GlobalConfiguration.Configuration.Services.Clear(typeof(IBodyModelValidator));

# android - 如何执行长作业，然后从小部件 onclick 方法更新小部件？

> ID：12054091
> 
> 赞同：1
> 
> 时间：2012-08-21T11:43:34.367
> 
> 标签：android, android-intent, widget, android-asynctask

我正在登录银行帐户并获取帐户余额。我从小部件中的 onUpdate 调用此函数并在 AsyncTask 中运行

```
package com.example.oobe.widget.widgetexample;
public class ExampleAppWidgetProvider extends AppWidgetProvider 
{
    (...)

    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[]  appWidgetIds) 
    {
        (...)
        if (notFromAsyncTask)
            new MyAsyncTask().execute(context);
        (...)
    }
    (...)
} 
```

在 onPostExecute 方法中，我想调用 onUpdate 小部件和 putExtra 字符串。我怎样才能做到这一点？

```
package com.example.oobe.widget.widgetexample;
public class MyAsyncTask extends AsyncTask<Object, Void, BGZ> 
{
    Context context;

    @Override
    protected BGZ doInBackground(Object... params) 
    {
        this.context = (Context)params[0];
        return GetSomething();
    }

    protected void onPostExecute(BGZ page)
    {
        Intent intent = new Intent(context, ExampleAppWidgetProvider.class);
        intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
        intent.putExtra("result", result);
        intent.putExtra("webpage", webPage);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intent);
    }
    (...)
} 
```

如果我像上面那样做，我会收到错误：..无法找到明确的活动类..

我可以从 AsyncTask 执行此操作吗？我可以使用参数调用 widget_update (onUpdate) 来识别来自我的 AsyncTask 吗？请给我一些示例代码（如果必须是广播接收器等要添加到清单中的内容）。

我在 onPostExecute 中更新了小部件，但我认为更好的方法是在 ExampleAppWidgetProvider 类中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:47:25.920

如果您收到此错误

> 找不到明确的活动类..

可能是因为这条线

```
Intent intent = new Intent(context, ExampleAppWidgetProvider.class); 
```

确保 ExampleAppWidgetProvider.class 存在并且

```
Context context = Activity.this; 
```

或者

```
Intent intent = new Intent(Activity.this, ExampleAppWidgetProvider.class); 
```

**更新**

```
public class ExampleAppWidgetProvider extends AppWidgetProvider 
{

   //your code .......
//asynctask as an inner class
   public class MyAsyncTask extends AsyncTask<Object, Void, BGZ> 
{
  doInBackground(){}
onPreExecute(){}
onPostExecute(){

//save result 
// or call your methods you need to run after your async call
}
}

} 
```

# java - Java Mail - 在附件中读取为字符串

> ID：12054093
> 
> 赞同：3
> 
> 时间：2012-08-21T11:43:46.127
> 
> 标签：java, email, jakarta-mail

我开始使用 Java Mail，我有一些关于处理附件的问题：

1.  如果我们的内容是一个`Multipart`ie有一个附件，那么实际附件在哪个索引处，我们可以在哪个索引处找到消息内容？我只想处理附件。

2.  这会是一个正确的方法。如果我想将给定的附件转换为字符串，只需读取附件部分的流（使用`getStream()`）并将其附加到字符串生成器，然后返回字符串？

非常感谢任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:29:38.917

1.）这是来自我的一个应用程序（也基于其他人的代码，但我找不到给予信用）。

如您所见，我正在递归处理一个 Part 对象（首先它实际上是一个消息）。

我删除了一些不相关的代码。

```
private BodyPartDOM collectBodyParts(Part part) throws IOException, MessagingException {

        BodyPartDOM dom = new BodyPartDOM();

        Object content = part.getContent();

        if (content instanceof String) {

            // process as string

        } else if (content instanceof Multipart) {

            Multipart innerMultiPart = (Multipart) content;
            int count = innerMultiPart.getCount();

            for (int i = 0; i < count; i++) {

                BodyPart innerBodyPart = innerMultiPart.getBodyPart(i);
                BodyPartDOM subDom = collectBodyParts(innerBodyPart);
                // further recursive processing

            }

        } else if (content instanceof InputStream) {

            // process inputStream

        }

        return dom;

    } 
```

2.) 如果您将其转换为字符串，请继续。但请注意例如文件流。

您可以检查内容类型的 MIME 类型。以下是来自维基百科的一些有用信息（http://en.wikipedia.org/wiki/MIME#Content-Type）：

> Content-Type 该头指示消息内容的互联网媒体类型，由类型和子类型组成，例如
> 
> Content-Type: text/plain 通过使用 multipart 类型，MIME 允许消息具有以树结构排列的部分，其中叶节点是任何非多部分内容类型，非叶节点是各种多部分中的任何一个类型。该机制支持：
> 
> 使用 text/plain（“Content-Type:”的默认值）文本和附件（多部分/与 text/plain 部分和其他非文本部分混合）的简单文本消息。包含附加文件的 MIME 消息通常使用“Content-disposition:”标头指示文件的原始名称，因此文件类型由 MIME 内容类型和（通常是特定于操作系统的）文件扩展名回复与原始附加（多部分/与文本/纯文本部分混合，原始消息作为消息/rfc822 部分）替代内容，例如以纯文本和另一种格式（如 HTML）发送的消息（多部分/替代文本中的相同内容） /plain 和 text/html 形式）图像、音频、视频和应用程序（例如，image/jpeg、audio/mp3、video/mp4、

如何将其付诸实践可以在这里找到： [http ://www.oracle.com/technetwork/java/faq-135477.html](http://www.oracle.com/technetwork/java/faq-135477.html)

快乐编码！

# authentication - hadoop Hdfs中的用户身份验证

> ID：12054099
> 
> 赞同：0
> 
> 时间：2012-08-21T11:44:07.393
> 
> 标签：authentication, webdav, kerberos, hdfs

我已将 milton webdav 与 hadoop hdfs 集成，并且能够将文件读/写到 hdfs 集群。

我还使用 linux 文件权限添加了授权部分，因此只有授权用户才能访问 hdfs 服务器，但是，我被困在了身份验证部分。

似乎 hadoop 没有提供任何内置身份验证，并且用户只能通过 unix 'whoami' 识别，这意味着我无法为特定用户启用密码。参考：[http](http://hadoop.apache.org/common/docs/r1.0.3/hdfs_permissions_guide.html) ://hadoop.apache.org/common/docs/r1.0.3/hdfs_permissions_guide.html 所以即使我创建一个新用户并为其设置权限，也无法识别用户是否经过身份验证. 具有相同用户名和不同密码的两个用户可以访问该用户名的所有资源。

我想知道是否有任何方法可以在 hdfs 中启用用户身份验证（任何新的 hadoop 版本中的固有或使用 kerbores 等第三方工具）

编辑：

好的，我已经检查过了，似乎 kerberos 可能是一个选项，但我只想知道是否还有其他可用于身份验证的替代方法。

谢谢，-chhavi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:38:16.583

目前，kerberos 是唯一受支持的“真实”身份验证协议。“简单”协议完全信任客户端的 whois 信息。

要设置 kerberos 身份验证，我建议使用此指南：[https ://ccp.cloudera.com/display/CDH4DOC/Configuring+Hadoop+Security+in+CDH4](https://ccp.cloudera.com/display/CDH4DOC/Configuring+Hadoop+Security+in+CDH4)

**msktutil**是在 linux 中创建 kerberos 密钥表的好工具：[https ://fuhm.net/software/msktutil/](https://fuhm.net/software/msktutil/)

创建服务主体时，请确保您有正确的 DNS 设置，即如果您有一个名为“host1.yourdomain.com”的服务器，并且它解析为 IP 1.2.3.4，那么该 IP 应该反过来解析回 host1.yourdomain。 com。

另请注意，kerberos 协商身份验证标头可能大于 Jetty 的内置标头大小限制，在这种情况下您需要修改并`org.apache.hadoop.http.HttpServer`添加`ret.setHeaderBufferSize(16*1024);`. `createDefaultChannelConnector()`我不得不。

# java - JSF 请求的组件来源是什么？

> ID：12054102
> 
> 赞同：0
> 
> 时间：2012-08-21T11:44:26.707
> 
> 标签：java, jsf, trinidad

我正在使用特立尼达图书馆。

我有`commandButton`那个有`partialSubmit=true`属性的面板和一个`partialTriggers`指向那个的面板`commandButton`。

我如何在服务器端知道请求的来源是什么，我的意思是哪个组件触发了部分触发器？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:38:03.517

你有一个这样的命令按钮：

```
<tr:commandButton styleClass="formbutton"
    id="yourId"
    partialSubmit="true" 
    textAndAccessKey="&YourText" 
    actionListener="#{yourBean.yourAction}">
</tr:commandButton> 
```

和一个具有这样一个功能的托管 bean：

```
public void yourAction(ActionEvent event)
   {
       event.getComponent().getId();
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:17:03.370

该信息在请求参数映射中。

我将 requestParameterMap 从 ExternaContext 中取出，地图中的属性之一是请求的来源。这可以为您提供提交此请求的表格。

# objective-c - 如果 textField 为空，请不要将我的数组过滤为空

> ID：12054105
> 
> 赞同：1
> 
> 时间：2012-08-21T11:44:34.893
> 
> 标签：objective-c

如果`textField`包含任何文本，这可以正常工作。但如果`textField`为空，则不添加任何对象。

如何告诉这段代码如果`textField`为空，则应将*所有*`resultObjectsArray`对象添加到？

```
resultObjectsArray = [NSMutableArray array];
for(NSDictionary *object in allObjectsArray)
{

    NSString *nameString = [NSString stringWithFormat:@"%@", [textField text]];
    NSString *wineName = [wine objectForKey:@"Name"];
    NSRange range = [wineName rangeOfString:nameString options:NSCaseInsensitiveSearch];

    if ((range.location != NSNotFound))
        [resultObjectsArray addObject:object];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:48:22.480

```
resultObjectsArray = [NSMutableArray array];
NSString *nameString = [textField text];
for(NSDictionary *object in allObjectsArray)
{
    if ([nameString length] > 0)
    {
        NSString *wineName = [wine objectForKey:@"Name"];
        NSRange range = [wineName rangeOfString:nameString options:NSCaseInsensitiveSearch];
        if ((range.location != NSNotFound))
            [resultObjectsArray addObject:object];
    }
    else
    {
        [resultObjectsArray addObject:object];
    }
} 
```

请注意，您不需要：

```
NSString *nameString = [NSString stringWithFormat:@"%@", [textField text]]; 
```

作为

```
NSString *nameString = [textField text]; 
```

足够了。它也不会在`for`循环内改变，因此可以在循环外初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:35:38.840

这就是代码最终使用@trojanfoe 的答案的样子。（我已经排除了我的其他搜索条件）。

```
-(IBAction)searchButtonPressed:(id)sender{  

BOOL textFieldIsEdited = NO;
if ([[textField text] length] > 0)
{
textFieldIsEdited = YES;
}

resultObjectsArray = [NSMutableArray array];
for(NSDictionary *wine in allObjectsArray)
{

    BOOL nameMatch = YES;
    if (textFieldIsEdited) {
        NSString *wineName = [wine objectForKey:@"Name"];
        NSString *nameString = [textField text];
        NSRange range = [wineName rangeOfString:nameString options:NSCaseInsensitiveSearch];
        if (range.location == NSNotFound) {
            nameMatch = NO;
        }
    }

    if ((nameMatch != NO))
        [resultObjectsArray addObject:wine];
} 
```

# html - 如何使用 html 中的 css 更改列表中已访问行的颜色

> ID：12054106
> 
> 赞同：0
> 
> 时间：2012-08-21T11:44:35.253
> 
> 标签：html, css, list

我已经动态地获取了列表中的链接。当我点击链接时，在其他容器中打开它的页面。我想更改访问的链接颜色。基本上是块背景颜色。我可以在点击时改变颜色。但我需要它保持原样直到 n 除非我刷新页面。我用了

```
ul
{
    list-style-type: none;
    margin:0;
    padding:0;
    text-decoration:none;
    display: block;
}

a {
    text-decoration: none;
    display: block;
}

ul li{
    padding-bottom: 10px;
    text-decoration: none;
}

li:hover {
    background-color:#7EA5E4;
}

li a:visited, a:active{
    background-color: #09F;
} 
```

请建议我必须在哪里进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:48:48.953

您可以尝试更改颜色/字体系列以适合您

```
.Link  A:visited {
    text-decoration: none;
    font-family: arial,sans-serif ;
    color: #fff;
} 
```

这`.link`是一个自定义类

希望这可以帮助，

谢谢，

杰克。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:49:11.027

也就是说，做什么`:visited`。但是您“阻止”的是列表项，无法访问，因为它不是链接。通过将适当的样式从列表项移动到锚点，将您锚定为块的样式。这样你也可以设置背景样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:50:02.433

我希望你看起来像这样：- [http://tinkerbin.com/VsbhpxGi](http://tinkerbin.com/VsbhpxGi)

你只需要`.active`上课并定义`li`

像这样 ：-

```
li.active {
    background-color:#7EA5E4;
} 
```

**更新的答案**

如果您单击任何链接以使该链接处于活动状态，我希望您看起来像这样……请参阅更新的答案……

[http://tinkerbin.com/Fm0lRO8Z](http://tinkerbin.com/Fm0lRO8Z)

# c# - XNA Sprite.bounds.contain(x,y) 不会返回答案

> ID：12054109
> 
> 赞同：0
> 
> 时间：2012-08-21T11:44:47.297
> 
> 标签：c#, xna, sprite

我只是在玩 XNA，当我想点击一个精灵并发生一些事情时，我输入了以下代码：

```
if(Mouse.GetState().LeftButton == ButtonState.Pressed)

{

        if (sprite.Bounds.Contains(Mouse.GetState().X, Mouse.GetState().Y))
          {
              this.Exit();
          }
} 
```

当我将鼠标悬停在精灵上并单击时，什么也没发生，为什么？

我该如何解决这个问题？

如果这有帮助，我将我的 2D 精灵写在一个矩形中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:44:08.620

请确认 Bounds 是这样计算的：

```
public Rectangle Bounds
{
    get
    {
        return new Rectangle(position.X - width / 2, position.Y - height / 2, width, height);
    }
} 
```

我还建议每次更新时获取一次对 Mouse.GetState() 的引用，而不是根据需要调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:38:27.713

`Texture.Bounds`没有将矩形放在纹理的位置，X 和 Y 的值都等于 0。

`.Contains()`您将根据输入创建自己的矩形`SpriteBatch.Draw()`。

![在此处输入图像描述](../Images/4c4f6a8ab601f59e8f6ec7c79d5800f4.png)

纹理“logoTexture”位于屏幕左下角附近。

# android - 在 Android 设备上启动 .apk 文件

> ID：12054110
> 
> 赞同：0
> 
> 时间：2012-08-21T11:44:51.600
> 
> 标签：android, shell

“标题”可能看起来很夸张，但我写它是为了强调这个问题。我有一个使用 2.2 Froyo 库在 Android 设备上运行的应用程序。应用程序必须 (1) 安装 - 如果尚未安装 - 然后 (2) 启动已存在于 data/data/myapp/files/ 文件夹中的 .apk 文件。了解 Java 我会使用 shell 执行上述操作。但 Android 也是一个单独的命名空间，因此我想知道如何执行 .apk 文件的顺序安装 + 启动。需要注意的是，虽然我现在使用的是 Eclipse/Ubuntu，但实现应该只考虑 Android OS API，而不是我的开发环境可用的工具。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:50:09.543

您不启动 apk 文件。一个 apk 文件可以被认为是一个容器，其中包含一些活动、服务、接收器以及其他构造。很可能您的意思是您想要启动一个活动（使用类中的`startActivity()`方法`Context`或其众多子类之一执行），但这绝不是确定的。

从您的问题看来，您需要对 Android 有很多了解，然后再继续您的问题建议的路径，因为您发布的问题确实太模糊，无法以合理的方式回答 stackoverflow。

# android - 将 JBLAS 与 Android NDK 一起使用

> ID：12054117
> 
> 赞同：2
> 
> 时间：2012-08-21T11:45:08.893
> 
> 标签：android, android-ndk

请帮助我了解如何在已设置 NDK 的 Eclipse 上设置 JBLAS。如果可用，请提供任何分步教程的链接。我需要有关如何构建要在 Android 项目中使用的本机代码的详细信息，以及一个显示如何从 Android 代码调用本机方法/类之一的示例。

提前致谢。

# heroku - 在 Heroku 上部署 play 应用程序时未拾取 lib 文件夹中的 jar

> ID：12054118
> 
> 赞同：0
> 
> 时间：2012-08-21T11:45:16.437
> 
> 标签：heroku, playframework-2.0, dependency-management

我已经构建了一个基于播放框架 2.0.3 的应用程序。我已经在我的应用程序中使用的 lib 文件夹（非托管依赖项）中放置了一些 jar，如[如何将 JAR 文件放入 Play 2 项目并使用它？](https://stackoverflow.com/questions/9287880/how-to-put-a-jar-in-a-play2-project-and-use-it)

当我从我的本地机器上运行它时一切都很好`play run`

但是当这个应用程序部署到 Heroku 时，这些 jars 并没有被拾取。我在使用这些 jar 时遇到编译错误。

我什至尝试使用以下内容添加 dependencies.yml

```
require:
    - play 2.0.3
    - provided -> myjar 1.0

repositories:
  - provided:
      type:       local
      artifact:   "${application.path}/lib/[module]-[revision].jar"
      contains:
        - provided -> * 
```

但它仍然没有奏效。

我的开始脚本（Procfile）是：

```
web: target/start -Dhttp.port=${PORT} ${JAVA_OPTS} -DapplyEvolutions.default=true -Ddb.default.driver=org.postgresql.Driver -Ddb.default.url=${DATABASE_URL} 
```

有人可以对这个问题有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:31:32.180

由于 heroku 使用 git，请确保您的`lib`文件夹和所有包含的 jar 都由 git 正确管理，即它们不在您的`.gitignore`文件中。

# security - CakePHP 2.1：对元素使用 CSRF 保护

> ID：12054120
> 
> 赞同：0
> 
> 时间：2012-08-21T11:45:22.443
> 
> 标签：security, cakephp, csrf, cakephp-2.1

我的 CommentsController 操作之一，即“添加”操作有一些特殊情况。因为我在 PostsController 的“视图”视图上有一个“添加评论”表单，所以我有一个“add_comment”元素而不是评论的“添加”视图。这就是我可以在帖子的“视图”视图中插入带有表单的元素。我希望这听起来不会太复杂。

现在，在“add_comment”元素中，表单被提交给 CommentsController 的实际“add”动作。如果表单必须再次呈现，因为例如无效的用户输入，表单会再次呈现——这一次——调用“添加”评论视图。此“添加”视图仅再次包含“add_comment”元素，如上文所述，该元素包含实际表单。

现在问题是，我将 Security 组件添加到我的 CommentsController 以获得 CSRF 保护。我的 CommentsController 的所有管理操作都得到了保护，即 e 令牌在表单内呈现并在提交表单时进行检查。

尽管如此， add_comments Element 表单仍然没有获得令牌。可能是因为它是一个元素而不是对应的视图。

如何手动将令牌插入到元素的表单中，或者如何更好地解决这个问题？

谢谢

**编辑：**还有[我关于设置的其他问题 - 它应该解释一下](https://stackoverflow.com/questions/11347098/cakephp-2-1-validating-forms-coming-from-elements-in-a-smooth-way?rq=1)

**EDIT2：** [这](http://pastebin.com/GNESQF9U)是我的 add_comment 元素里面的内容

**EDIT3：** [这](http://pastebin.com/wgnn5jKz)是 add_comment 元素的 HTML 输出。随机数应该在`<div style="display:none;">`零件中。

**EDIT4：**我放入`Debugger::log($this->Form->request->params);`元素（add_comment.ctp）和视图（add.ctp），[这](http://pastebin.com/bXPESsMX)显示了输出。

我还上传了整个 CommentsController（[这里](http://pastebin.com/4HPcHu6a)）。请注意，我指定了一个黑洞函数来捕获“auth”类型的错误。这是因为，每次我在 add_comments.ctp 元素中输入无效数据并且 - 通过提交表单 - 调用 CommentsController 的实际添加操作（以及因此添加评论视图）时，我都会收到类型为 'auth 的黑洞错误'，我无法解释，所以我用这种方式抓住了它——这甚至可能与我的问题有关。

# umbraco - Umbraco 仪表板模块 - 如何使选项卡在内容节点中可见？

> ID：12054122
> 
> 赞同：1
> 
> 时间：2012-08-21T11:45:23.410
> 
> 标签：umbraco

我在内容区域为我的用户仪表板创建了一个新模块。它完全按预期工作。但是，我有一些用户被锁定在树下方的内容节点中，因此看不到主要内容根。当他们第一次登录时，新仪表板加载正常，但一旦他们深入节点，它就会消失，无法返回。

我有哪些选项可以使它在它们可见的内容的根节点中显示为选项卡？我尝试了用户控件包装器，但遇到了一堆错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:52:22.957

不幸的是，我发现实现这一点的唯一方法是使用“umbraco usercontrol wrapper”。通过继承以下内容，我能够让我的代码开箱即用：

```
System.Web.UI.UserControl, umbraco.editorControls.userControlGrapper.IUsercontrolDataEditor 
```

我还根据我找到的一个示例将以下内容添加到我的主类中：

```
public string umbracoValue;

public object value
{
    get
    {    
        return umbracoValue;
    }
    set
    {
        umbracoValue = value.ToString();
    }
} 
```

这些是我必须做的唯一修改，它开始按预期运行。

# assembly - 如何从 4 位十六进制转换为 7 位 ASCII？

> ID：12054127
> 
> 赞同：5
> 
> 时间：2012-08-21T11:45:41.793
> 
> 标签：assembly, hex, mips, nios

任务是通过编写一个可以在 4 位十六进制和 7 位 ASCII 之间转换的子程序来学习汇编编程。起初我不知道，但经过一些研究，我可以做出努力并绘制流程图并制作程序，但这并不完全正确，所以我请求您的指导来帮助我解决这个问题。

实际的作业文本是这样的：

> 哈 3.1。绘制一个子程序的流程图，以将 4 位十六进制值转换为相应的 7 位 ASCII 码。请参阅下面的 hexasc 的完整规范。示例：二进制 0010（十六进制数字 2）转换为 011 0010（“2”的 ASCII 码）。另一个例子：二进制 1011（十六进制数字 B）转换为 100 0010（'B' 的 ASCII 码） 确保根据我们的要求记录您的子程序。
> 
> 哈 3.2。使用 Nios II IDE 中的 labwork 项目，创建一个名为 hexasc.s 的新文件
> 
> 哈 3.3。在文件 hexasc.s 中，编写一个名为 hexasc 的子程序，将 4 位十六进制值转换为相应的 7 位 ASCII 码。

我为程序画了一个流程图： ![在此处输入图像描述](../Images/a507111a03fa015a7420399baf3b2824.png)

我尝试过的程序是这样的，但我怀疑它不符合规范：

```
 .global main 

        .text
        .align 2

main:   movi r8, 0x09
        movi r9, 0x0f

        andi r4, r4, 0x0f

        bgt r8, r4, L1  

        movi r2, 0x1e
        add r2, r2, r4  
        andi r2, r2, 0xff

        movia   r2,putchar
        br  L2  

L1:     movi r2, 0x29   
        add r2, r2, r4
        andi r2, r2, 0xff

        movia   r2,putchar

L2:  .end 
```

你能帮我开发和解决这个任务吗？时间很充裕，一个月后才到期。

## 更新

在此处看到流程图不正确的评论后，我进行了必要的调整： ![在此处输入图像描述](../Images/07854cabf3828c8fb8e868793b67d7bc.png)

我还想讨论在十六进制和 ASCII 之间转换的算法是如何正确的。

## 更新/编辑

这是完整的程序。

```
.global hexasc 

        .text
        .align 2

hexasc: movi r8, 0x09
        movi r9, 0x0f
        andi r4, r4, 0x0f #keep only 4 bits
        bgt r4, r8, L1  #is x>9?
        movi r2, 0x30
        add r2, r2, r4  
        andi r2, r2, 0xff
        ret  

L1:     movi r2, 0x37
        add r2, r2, r4
        andi r2, r2, 0xff
        ret 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T17:12:30.903

当你屏蔽低四位时，你有可能最终得到 0x0 到 0xF 的值。期望结果表是：

```
0x0 -> '0' = 0x30
0x1 -> '1' = 0x31
0x2 -> '2' = 0x32
0x3 -> '3' = 0x33
0x4 -> '4' = 0x34
0x5 -> '5' = 0x35
0x6 -> '6' = 0x36
0x7 -> '7' = 0x37
0x8 -> '8' = 0x38
0x9 -> '9' = 0x39
0xA -> 'A' = 0x41
0xB -> 'B' = 0x42
0xC -> 'C' = 0x43
0xD -> 'D' = 0x44
0xE -> 'E' = 0x45
0xF -> 'F' = 0x46 
```

从所需结果表中，我们可以看到有两个线性部分，从 0x0 到 0x9 和从 0xA 到 0xF。对于 0x0 到 0x9 的情况，0x30 - 0x0 = 0x30 所以我们添加 0x30。对于 0xA 到 0xF 部分 0x41 - 0xA = 0x37。

那会奏效吗？

```
0x0 + 0x30 = 0x30
0x1 + 0x30 = 0x31
0x2 + 0x30 = 0x32
0x3 + 0x30 = 0x33
0x4 + 0x30 = 0x34
0x5 + 0x30 = 0x35
0x6 + 0x30 = 0x36
0x7 + 0x30 = 0x37
0x8 + 0x30 = 0x38
0x9 + 0x30 = 0x39

0xA + 0x37 = 0x41
0xB + 0x37 = 0x42
0xC + 0x37 = 0x43
0xD + 0x37 = 0x44
0xE + 0x37 = 0x45
0xF + 0x37 = 0x46 
```

看起来挺好的。

稍有不同的方法是始终添加 0x30，然后再进行调整。

```
0x0 + 0x30 = 0x30
0x1 + 0x30 = 0x31
0x2 + 0x30 = 0x32
0x3 + 0x30 = 0x33
0x4 + 0x30 = 0x34
0x5 + 0x30 = 0x35
0x6 + 0x30 = 0x36
0x7 + 0x30 = 0x37
0x8 + 0x30 = 0x38
0x9 + 0x30 = 0x39
0xA + 0x30 + 7 = 0x41
0xB + 0x30 + 7 = 0x42
0xC + 0x30 + 7 = 0x43
0xD + 0x30 + 7 = 0x44
0xE + 0x30 + 7 = 0x45
0xF + 0x30 + 7 = 0x46 
```

在创建所需的结果表时，您应该知道左侧与 0xF 相加的内容为您提供 0x0 到 0xF，看来您已经知道了。所需表格的右侧来自 ASCII 图表。我想如果你制作了那个图表并拿出了一个计算器（是的那个带有老年人使用的按钮的小东西，虽然是一个十六进制的，你的手机应该有一个应用程序）。从那里直观地从该表中提出算法。

您还应该问自己，如果我希望 A 到 F 是小写而不是大写 (a,b,c,d,e,f)，该怎么办？如何更改算法？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-28T16:28:40.407

流程图中的一些错误

1.屏蔽并只保留最后四个字节 -->**位**
2.Decision `0<x<9` --> 3.Decision --> （也是多余的！）**`0<=x<=9`**
`9<x<15`**`9<x<=15`**

该程序

```
.global hexasc 

    .text
    .align 2

hexasc: movi r8, 0x09
        andi r4, r4, 0x0f #keep only 4 bits
        movi r2, 0x37
        bgt r4, r8, L1  #is x>9?
        movi r2, 0x30
L1:     add r2, r2, r4  
        ret 
```

# core-data - 核心数据 - 多久获取一次对象？

> ID：12054128
> 
> 赞同：0
> 
> 时间：2012-08-21T11:45:51.793
> 
> 标签：core-data, nsfetchrequest

所以我做了很多获取我的对象。例如，在启动时，我为选项卡上的徽章设置了未读计数。为了获得这个未读计数，我需要获取我的数据模型对象以查看哪些对象具有未读标志。所以我们有一个提取。然后在该方法之后，我再次获取所有数据模型对象以执行其他操作。然后在视图控制器上，我需要显示我的数据模型对象，所以我在那里再进行一次提取，依此类推。

所以有很多这样的电话：`NSArray *dataModelObjects = [moc executeFetchRequest:request error:&error];`

这对我来说似乎有点多余？由于我将使用我的数据模型对象进行大量工作，我是否可以在应用程序中获取它们一次并在需要访问它们时通过实例变量访问它们？但我总是想拥有最新的数据。因此可以添加和/或删除数据模型对象。

我对我想在这里实现的目标有任何意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:59:56.583

Core Data 的一个概念和好处是，您不需要每次需要对象时都访问数据库——这就是`NSManagedObjectContext`创建对象的原因——它存储从数据库中检索到的那些对象，所以如果你尝试获取您已经从数据库中获取的对象，它会非常快。

并且这些对象中的每一个变化都会`NSManagedObjectContext`自动带给你。

但是，如果您在数据库中进行了一些更改，它们可能不会反映在 中`NSManagedObjectContext`，因此您必须刷新它们。[您可以在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOs.html#//apple_ref/doc/uid/TP40001803-208900)阅读有关保持对象最新的信息。

# c# - 将整个 Container.DataItem 行传递给后面的代码

> ID：12054130
> 
> 赞同：2
> 
> 时间：2012-08-21T11:46:00.540
> 
> 标签：c#, exception, .net-3.5, itemtemplate, datarowview

这个问题与 ASP.Net 3.5 和 C# 有关

我正在从包含很多列的数据库中构建一个 RSS 提要。

我需要在特定节点中格式化数据，并且内联执行会非常混乱。

我知道我可以将所有参数单独传递给子例程

```
 <%# formatAddress(Container.DataItem["propertyName"],
        Container.DataItem["propertyNumber"], ... ) %> 
```

由于这些列最多有 20 个，我宁愿传递整行。

```
 <%# formatAddress(Container.DataItem) %> 
```

这将是理想的，然后我可以在后面的代码中挑选出我想要的列：

```
 protected string FormattedAddress(object row)
        {

        DataRowView data = (DataRowView)row;

        StringBuilder Address = new StringBuilder();
        string Postcode = data["propertyPostcode"];
        ...
        return Address.ToString();
    } 
```

我收到错误无法将“System.Data.Common.DataRecordInternal”类型的对象转换为“System.Data.DataRowView”。

以前，我使用受保护的字符串 FormattedAddress(DataRowView row) 但这也不起作用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:24:09.233

最终找到了几个例子，这些例子让我意识到我应该投射到 DbDataRecord。

我仍在传递 <%# formattedAddress(Container.DataItem) %> 但我的函数现在如下：

```
 protected string FormattedAddress(object dataItem)
    {
        DbDataRecord data = (DbDataRecord)dataItem;

        string Postcode = data.GetValue(
                          data.GetOrdinal("propertyPostcode")).ToString();
        ...    
        return NicelyFormattedAddress;
    } 
```

这是处理数据的最佳方式吗？

# mongodb - 使用spring data mongodb删除对象中的数组条目

> ID：12054133
> 
> 赞同：5
> 
> 时间：2012-08-21T11:46:08.437
> 
> 标签：mongodb, spring-data

我最近花了一些时间尝试`$pull`通过 Spring 的 Data MongoOperations 界面使用该运算符，所以我认为如果有人遇到类似问题，分享我的发现会很好。

所以这里...

我有 2 个类似的 java POJO：

```
@Document
public class OutterObject{

    private String id;
    private String name;
    private List<InnerDocument> innerDocs;

    //SETTERS - GETTERS Ommited

public class InnerDocument{

    private String id;
    private String name;

         //SETTERS - GETTERS Ommited 
```

这存储在 Mongo 集合中，如下所示：

```
 "_id" : "doc2",
 "_class" : "OutterObject",
 "name" : "doc2",
 "innerDocs" : [{
      "_id" : "innerDoc21",
      "name" : "innerDoc21"
  }, {
      "_id" : "innerDoc22",
      "name" : "innerDoc22"
  }] 
```

我正在尝试使用 $pull 运算符来删除 innerDoc 集合中具有名称值 =“innerDoc22”的所有对象。

我知道如何使用 mongo 驱动程序来完成此任务，如下所示：

```
 List<String> ids = 
         Arrays.asList("innerDoc22");

 BasicDBObject find = new BasicDBObject();

 match.put("innerDocs.name", 
           BasicDBObjectBuilder.start("$in", ids).get());

    BasicDBObject update = new BasicDBObject();
        update.put(
                "$pull",
                BasicDBObjectBuilder.start("innerDocs",
                        BasicDBObjectBuilder.start("name", "innerDoc22").get()).get());

  DBCollection col= mongoOperations.getDb().getCollection("outterObject");

  col.update(find , update); 
```

我正在尝试使用 Spring 的 MongoOperations 接口来完成同样的事情。这是我使用 MongoOperations 接口的代码：

```
List<String> ids = Arrays.asList("innerDoc22");

Query removeQuery = Query.query(Criteria.where("innerDocs.name").in(ids));

WriteResult wc = mongoOperations.upsert(
                    removeQuery, 
                    new Update().pull("innerDocs.name", "innerDoc22"), 
                    OutterObject.class);
System.out.println(wc.getLastError()); 
```

调用更新时我没有收到任何错误，`getLastError()`根本没有在数据库中完成。

[我知道这里](https://stackoverflow.com/questions/10097621/remove-an-entry-from-array-using-mongodb-java-driver)已经提出了类似的问题，但给出的答案不使用 MongoOperations 界面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:46:08.437

经过一番搜索并查看源代码后，我意识到我需要将 InnerDocument 对象作为第二个参数传递给 pull 方法，以便 spring 类能够正确地进行映射。

事实证明，我可以在选择对象时导航对象（我在 removeQuery 中使用“innerDocs.name”），但在更新文档时我不能（或没有找到方法）做同样的事情。

下面是我如何使用 MongoOperations 实现查询：

```
List<String> ids = Arrays.asList("innerDoc22", "innerDoc21");

Query removeQuery = Query.query(Criteria.where("innerDocs.name").in(ids));

WriteResult wc = 
       mongoOperations.upsert(removeQuery, 
           new Update().pull("innerDocs", 
           new InnerDocument("innerDoc22", null)), 
           OutterObject.class);

System.out.println(wc.getLastError()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-20T11:40:12.270

您也可以使用 BasicDBObject 而不是我偶然发现的 InnerDocument。通过打印更新对象，可以看到实际的mongo shell查询json，对调试非常有帮助。：

```
Update updateObj = new Update()
         .pull("innerDocs", new BasicDBObject("innerDocs.name","innerDoc22"));

System.out.println("UPDATE OBJ: " + updateObj.toString()); 
```

结果是：

`UPDATE OBJ: { "$pull" : { "innerDocs" : { "innerDocs.name" : "innerDoc22"}}}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-30T07:51:42.740

我尝试了 med116 给出的解决方案，我不得不修改它才能工作：

```
Update updateObj = new Update().pull("innerDocs", new BasicDBObject("name","innerDoc22")); 
```

因为否则我的数组中没有匹配的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-27T18:25:39.660

如果您只是想从没有任何其他属性（如名称）的数组中删除一个元素，请编写您希望的查询并

```
Update update = new Update();
update.pull("Yourarrayname","valueyouwishtodelete");  
mongoTemplate.upsert(query,update,"collectionname"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-30T09:13:44.063

在 spring data mongo 中，就像这样：

```
 //remove array's one elem
UpdateResult wc = mongoTemplate.upsert(removeQuery,new Update().pull("tags",Query.query(Criteria.where("tag").is("java"))),TestPull.class);
//remove array's multi-elem
UpdateResult wc1 = mongoTemplate.upsert(removeQuery,new Update().pull("tags",Query.query(Criteria.where("tag").in(Arrays.asList("mongo", "netty")))),TestPull.class); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-02T18:23:29.863

这对我有用！

```
UpdateResult updateResult = mongoTemplate.updateMulti(new Query(where("id").is(activity.getId())), new Update().pull("comments", new Query(where("id").is(commentId))), Activity.class); 
```

它将生成：

```
Calling update using query: { "_id" : { "$oid" : "61f900e7c7b79442eb3855ea"}} and update: { "$pull" : { "comments" : { "_id" : "61fac32e3f9ab5646e016bc8"}}} in collection: activity 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-23T21:12:30.160

这就是我的解决方案 - 感谢@ufasoli：

```
 public Mono<ProjectChild> DeleteCritTemplChild(String id, String idch) {
    Query query = new Query();
    query.addCriteria(Criteria
                           .where("_id")
                           .is(id)
                           .and("tasks._id")
                           .is(idch)
                     );

    Update update = new Update();
    update.set("tasks.$", null);

    return template
         // findAndModify:
         // Find/modify/get the "new object" from a single operation.
         .findAndModify(
              query, update,
              new FindAndModifyOptions().returnNew(true), ProjectChild.class
                       );
  } 
```

# html - 为 Internet Explorer 和 Firefox 选择菜单箭头样式

> ID：12054134
> 
> 赞同：0
> 
> 时间：2012-08-21T11:46:09.703
> 
> 标签：html, internet-explorer, firefox, css, select

这是用于对选择列表使用自定义箭头的样式，但它在 IE 和 Mozilla Firefox 中不起作用。是否有任何黑客/解决方案？

```
select{
    -webkit-appearance:none; -moz-appearance:none !important;
    border-radius:4px ; border:#cccccc solid 1px ;
    height:26px; width:210px; padding-left:8px;
    font:normal 14px Myriad Pro, Verdana, Geneva, sans-serif; color:#7f7f7f;
    background-image:url(../images/list_arrow.jpg); background-position:185px;  background-repeat:no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:57:03.167

我不知道 IE 的纯 CSS 解决方案，但是您可以为 Firefox 做的事情是`select`用另一个元素覆盖（只是箭头！）的箭头，其背景是您的自定义箭头并`pointer-events: none`在该元素上使用（这也适用于 Chrome 和 Safari）。

[**演示**](http://dabblet.com/gist/3414966)

HTML：

```
<select>
    <option>item 1</option>
    <option>item 2</option>
    <option>item 3</option>
</select>
<div class='arrow'></div> 
```

CSS：

```
select, .arrow { display: inline-block; vertical-align: middle; }
option { padding: 0 1em; }
.arrow {
    width: 26px;
    height: 26px;
    margin-left: -28px;
    display: inline-block;
    background: url(arrow.png);
    background-size: 100% 100%;
    pointer-events: none;
} 
```

* * *

对于 IE，您还可以覆盖 select 的箭头，在覆盖箭头的元素上添加单击侦听器，并在单击箭头时打开 select。这实际上适用于任何浏览器，但它涉及 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T08:37:26.183

```
appearance: none;
-webkit-appearance: none;
-moz-appearance:none;
-o-appearance: none; 
```

你应该为所有的浏览器使用这整个代码...webkit 只支持 chrome 和 safari...moz 是用于 firefox...。

或者您可以在选择框上为 div 使用“pointer-events:none”，但这在 IE 中不起作用...

# android - 在android中调用restful Soap Web服务

> ID：12054137
> 
> 赞同：-1
> 
> 时间：2012-08-21T11:46:11.903
> 
> 标签：android, web-services, sap, restful-url

我正在尝试调用`SOAP Web Service`in android in`Restful`方法。

```
DefaultHttpClient client=new DefaultHttpClient();
HttpHost targetHost=new HttpHost("87.11.9.26", 8000, "http");
client.getCredentialsProvider()  
.setCredentials(new AuthScope(targetHost.getHostName(),  
                targetHost.getPort()),  
                new UsernamePasswordCredentials("abcdefg","*******"));
BasicScheme basicAuth=new BasicScheme();
BasicHttpContext localcontex=new BasicHttpContext();
localcontex.setAttribute(ClientContext.AUTH_SCHEME_PREF, basicAuth);
HttpGet request=new HttpGet("http://87.11.9.26:8000/sap/bc/srt/rfc/  
sap/zmaterials_group_list/800/zmaterials_group_list/zmaterials_group_list_bind/");

ResponseHandler<String> handler=new BasicResponseHandler();
try {
     System.out.println("**********target host is****************"+targetHost);
     System.out.println("**********request is****************"+request);
     result=client.execute(targetHost, request, handler);
     System.out.println("**************************"+result);
     // client.getConnectionManager().shutdown();
} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
} 
```

然后它给出了例外

```
org.apache.http.client.HttpResponseException: SRT: Unexpected failure in SOAP  
processing occurred: ("No Web service configuration for this  
 access path: "/sap/bc/srt/rfc/sap/zmaterials_group_list/800/zmat"") 
```

请帮助我在哪里做错了。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:29:18.937

SOAP 和 REST 是完全不同的原则。`/sap/bc/srt/rfc`是 RFC 的 SOAP 运行时前缀，它要求您提供格式正确的 SOAP 请求，遵守 WSDL/模式等。我可能错了，但我怀疑您是否能够使用此适配器提供 RESTful 服务。`zmaterials_group_list`如果您想使用 RESTful 服务，您（或编写该功能模块的人）将必须实现自己的 ICF HTTP 处理程序。

话虽如此，请检查配置 ( `SICF`) 中的服务路径，并确保您尝试调用的服务存在并启用。还要检查是否正确配置了[WS 运行时。](http://help.sap.com/saphelp_nw70ehp2/helpdata/en/46/abbc05ba0c2a7fe10000000a1553f6/frameset.htm)

# c# - 如何在 Approvaltests 中添加对 xunit 的 Theory 属性的支持

> ID：12054138
> 
> 赞同：6
> 
> 时间：2012-08-21T11:46:12.217
> 
> 标签：c#, unit-testing, xunit.net, approval-tests

当我尝试使用带有`[Theory]`属性装饰的单元测试的批准时，它会说：

```
System.Exception: System.Exception : Approvals is not set up to use your test framework.
It currently supports [NUnit, MsTest, MbUnit, xUnit.net]
To add one use ApprovalTests.StackTraceParsers.StackTraceParser.AddParser() method to add implementation of ApprovalTests.StackTraceParsers.IStackTraceParser with support for your testing framework.
To learn how to implement one see http://blog.approvaltests.com/2012/01/creating-namers.html
   at ApprovalTests.StackTraceParsers.StackTraceParser.Parse(StackTrace stackTrace)
   at ApprovalTests.Namers.UnitTestFrameworkNamer..ctor()
   at ApprovalTests.Approvals.GetDefaultNamer()
   at ApprovalTests.Approvals.Verify(IApprovalWriter writer)
   at ApprovalTests.Approvals.Verify(Object text) 
```

似乎它只识别`[Fact]`属性。我试图跟踪[来自 stacktrace 的链接，](http://blog.approvaltests.com/2012/01/creating-namers.html) 但没有任何关于如何将您自己的命名器/解析器插入到批准中的信息。

有没有可以添加自己的命名器/解析器的入口点？它本身似乎微不足道，唯一的问题是如何使用它：

```
 public class TheoryNamer : AttributeStackTraceParser
    {
        protected override string GetAttributeType()
        {
            return typeof(TheoryAttribute).FullName;
        }

        public override string ForTestingFramework
        {
            get { return "xUnit Extensions"; }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T12:56:32.227

这个答案和问题有几个部分。

1.  如何添加
2.  命名者
3.  在批准测试中处理数据驱动测试

**1) 如何添加**

添加很简单（如果有点粗糙） 提到的方法应该是静态的，但它仍然有效。

> 要添加一个使用 ApprovalTests.StackTraceParsers.StackTraceParser.AddParser() 方法来添加 ApprovalTests.StackTraceParsers.IStackTraceParser 的实现，并支持您的测试框架。

所以你需要做一个

```
new StackTraceParser().AddParser(new TheoryNamer()); 
```

对此我深表歉意，在下一个版本（v.21）中它将是静态的

**2) 命名者**

Namer 应该为每个批准/接收的文件生成一个唯一的名称。这通常在方法的名称上完成，但是这里的名称不会是唯一的，因为基于理论的测试将是数据驱动的，因此对同一方法有多次调用。

```
Naming:  classname.methodname(optional: .additionalInformation).received.extension 
```

因此，您可能必须在其自身的方法中包含其他信息

```
public class StringTests1
{
    [Theory,
    InlineData("goodnight moon"),
    InlineData("hello world")]
    public void Contains(string input)
    {
        NamerFactory.AdditionalInformation = input;  // <- important
        Approvals.Verify(transform(input));
    }
} 
```

**3）在approvaltests中处理数据驱动测试**

老实说，在大多数情况下，Approval Tests 中的数据驱动方法不是通过 Method Decorators 中的参数。它通常通过带有 lambda 变换的 VerifyAll。例如，上面可能看起来像

```
[Fact]
public void UpperCase()
{
    var inputs = new[]{"goodnight moon","hello world"};
    Approvals.VerifyAll(inputs, i => "{0} => {1}".FormatWith(i, i.ToUpperInvariant()));
} 
```

这将创建接收到的文件：

```
goodnight moon => GOODNIGHT MOON
hello world => HELLO WORLD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:40:09.280

最好从**XUnitStackTraceParser**继承 TheoryNamer 类。
它完美无缺！
我认为将这样的类添加到 ApprovalTests.StackTraceParsers 命名空间会很酷:)

```
public class XUnitTheoryStackTraceParser : XUnitStackTraceParser
{
    public const string TheoryAttribute = "Xunit.Extensions.TheoryAttribute";

    protected override string GetAttributeType()
    {
        return TheoryAttribute;
    }
}

public class ApproveTheoryTest
{
    static ApproveTheoryTest()
    {
        StackTraceParser.AddParser(new XUnitTheoryStackTraceParser());
    }

    [Theory]
    [UseReporter(typeof(DiffReporter))]
    [InlineData("file1.txt")]
    [InlineData("file2.txt")]
    public void approve_file(string fileName)
    {
        NamerFactory.AdditionalInformation = fileName;
        Approvals.Verify("sample text");
    }
} 
```

# html - html5 地理位置

> ID：12054141
> 
> 赞同：1
> 
> 时间：2012-08-21T11:46:26.157
> 
> 标签：html, geolocation

我注意到这个电话：

navigator.geolocation.getCurrentPosition(...)

我想知道什么时候调用这个函数/方法浏览器通过什么通信来获取纬度和经度值。

请告诉我。谢谢 N

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:50:26.287

地理位置是 HTML5 的一部分。详细信息可以在[这里找到](http://dev.w3.org/geo/api/spec-source.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:15:43.747

所有浏览器（在设备上和桌面上）都使用几种不同的方式来确定您的位置，其中一些方式比其他方式更准确。浏览器可以根据你的IP地址、GPS、手机三角测量、wifi定位来获取位置信息。

当您调用 getCurrentPosition 或 watchPosition 时，您不知道使用哪种方式。

您可以使用第三个参数：

```
var positionOptions = {
    enableHighAccuracy: false,
    timeout: Infinity,
    maximumAge: 0
} 
```

告诉浏览器应该使用高精度方法。

# php - 比较 php 中的 SVN 修订文件

> ID：12054153
> 
> 赞同：2
> 
> 时间：2012-08-21T11:47:10.353
> 
> 标签：php, arrays, svn

我仍在研究在线 SVN 工具，`diff`这次又卡在了计算上。

我制作了一个测试文件`test.txt`，在 diff 上给出了这个结果：

```
Index: C:/data/aaxc/test.txt
===================================================================
--- C:/data/aaxc/test.txt   (revision 8)
+++ C:/data/aaxc/test.txt   (working copy)
@@ -1,3 +1,5 @@
-Fully new line
+Fully new line 1
{2nd modified line}
Specia$ čhar līne
+
+Nice one!
\ No newline at end of file 
```

之后，我正在创建一个数组：

```
$data = explode( "\n", $svn_result );

$result = array();
for ( $k=2; $k<sizeof($data); $k++ ) {

    # checks for filename
    if ( substr( $data[$k], 0, 3 ) == '---' ) $result['left'] = substr( $data[$k], 4 );
    else if ( substr( $data[$k], 0, 3 ) == '+++' ) $result['right'] = substr( $data[$k], 4 );

    # check for changes
    else if ( substr( $data[$k], 0, 1 ) == '-' ) $result['-'][] = substr( $data[$k], 1 );
    else if ( substr( $data[$k], 0, 1 ) == '+' ) $result['+'][] = substr( $data[$k], 1 );

} 
```

和输出：

```
Array
(
[left] => C:/data/aaxc/test.txt (revision 8)
[right] => C:/data/aaxc/test.txt    (working copy)
[-] => Array
    (
        [0] => Fully new line
    )

[+] => Array
    (
        [0] => Fully new line 1
        [1] => 
        [2] => Nice one!
    )

) 
```

到目前为止一切顺利，**但我现在如何确保女巫路线已更改以及更改为什么？**因为目前，当我尝试突出显示更改时，我无法确定它会正确突出显示它。

也许有一个脚本已经这样做了？

![在此处输入图像描述](../Images/dc0263f5c9ce20e3513dcc3d715a96e1.png)

目前它在小的变化上运行良好，但在大的变化上肯定会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:59:19.830

您需要存储在[diff 的第 5 行给出](http://en.wikipedia.org/wiki/Diff#Unified_format)的行位置，即以 .开头的行位置`@@`。

所以你可以这样做：

```
$data = explode( "\n", $svn_result );

$result = array();
for ( $k=2; $k<sizeof($data); $k++ ) {

    # checks for filename
    if ( substr( $data[$k], 0, 3 ) == '---' ) {
        $result['left'] = substr( $data[$k], 4 );
    } else if ( substr( $data[$k], 0, 3 ) == '+++' ) {
        $result['right'] = substr( $data[$k], 4 );

    # stores line starting positions
    } else if ( substr( $data[$k], 0, 2 ) == '@@') {
        // Remove @ symbols and trim whitespace
        $diff_line_nums = explode( ' ', trim( str_replace( '@@', '', $data[$k] ) ) );
        // Split by the comma
        $left_nums = explode( ',', $diff_line_nums[0] );
        $left_diff = array('line' => abs( $left_nums[0] ) ,
                                'length' => $left_nums[1] );
        // Set the counter for this specific part of the diff back to 0
        $left_line_count = 0;

        // Split by the comma
        $right_nums = explode( ',', $diff_line_nums[1] );
        $right_diff = array('line' => abs( $right_nums[0] ) ,
                                 'length' => $right_nums[1] );
        // Set the counter for this specific part of the diff back to 0
        $right_line_count = 0;

    # check for changes
    } else if ( substr( $data[$k], 0, 1 ) == '-' ) {
        $result['-'][ $left_diff['line'] + $left_line_count ] = substr( $data[$k], 1 );
        $left_line_count++;
    } else if ( substr( $data[$k], 0, 1 ) == '+' ) {
        $result['+'][ $right_diff['line'] + $right_line_count ] = substr( $data[$k], 1 );
        $right_line_count++;

    // Otherwise assume there is no difference, so increment both left 
    // and right line counters
    } else {
        $right_line_count++;
        $left_line_count++;
    }
} 
```

这将为您提供如下输出：

```
array (
    'left' => 'C:/data/aaxc/test.txt   (revision 8)',
    'right' => 'C:/data/aaxc/test.txt   (working copy)',
    '-' => array (
            1 => 'Fully new line'
           ),
    '+' => array (
            1 => 'Fully new line 1',
            4 => '', 
            5 => 'Nice one!'
           )
) 
```

然后，当您遍历`$result`数组时，您将知道索引键已对哪些行进行了更改：

```
foreach ($result['-'] as $line_number => $change) {
    // display removal changes
}
foreach ($result['+'] as $line_number => $change) {
    // display insert changes
} 
```

# c# - 引用缓存对象

> ID：12054159
> 
> 赞同：0
> 
> 时间：2012-08-21T11:47:25.537
> 
> 标签：c#, .net, caching

我正在为一个项目使用 .NET C#。

我有一个产品列表，我想缓存它们，因为它们在公司范围内使用。如果产品从缓存中退出，我已经知道如何根据各种权威/博客网站上的模式锁定缓存并重建它。

在我的页面/用户控件等中，我可能会获取对缓存的引用，如下所示：

```
var myCacheInstance = cachedProducts 
```

但是，我可能还想做这样的事情：

```
myCacheInstance.Add(new product(...)); 
```

这也将更新缓存，因为它是同一个对象。

我有 2 个查询。

1.  如果我有对缓存对象的引用，它是否保证在我的变量的生命周期内保持在缓存中？
2.  在上面概述的扫描中，我如何确保完整性？我只打算在这种情况下添加，但假设我也在更新和删除对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:50:46.020

> 1）如果我有对缓存对象的引用，它是否保证在我的变量的生命周期内保持在缓存中？

如果我正确解释这个问题：responce is **no**。

```
cache.Add("key", new object()); // ADD KEY
var obj = cache["key"];         // GET REFERENCE TO CACHED OBJECT
cache.Remove("key");            // REMOVE OBJECT FROM CACHE

obj.DoSomething(..);            //PERFECTLY VALID, STILL WORK .. 
```

> 2）在上面概述的scanario中，我如何确保完整性？我只打算在这种情况下添加，但假设我也在更新和删除对象？

可以添加`bool`属性，例如：

```
public bool IsValid
{
    get; private set;
} 
```

当对象被移除时，这个属性从类中设置为`false`. 举个例子，如果它真的符合您的需要，只能告诉我们您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:54:53.213

不要传递对缓存的引用！

使用对象作为缓存，如果客户端希望缓存项返回缓存项的新列表或只读集合。如果要将项目添加到缓存中，请使用缓存对象上的方法并在该方法中锁定缓存并添加项目。与删除相同。

问题 1：如果您传递参考资料，您无法保证任何事情。问题 2：如上所述，使用一个对象来缓存您的所有项目。

```
public class Cache
{
  private List<Item> cachedItems = new List<Item>();

  public void Add(Item item)
  {
   lock(cachedItems)
   {
    cachedItems.Add(item);
   }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:54:38.113

你好为了保证完整性，必须加key

```
Cache.Add("YourKey", yourValue) 
```

在这里你可以找到所有操作的助手

[http://johnnycoder.com/blog/2008/12/10/c-cache-helper-class/](http://johnnycoder.com/blog/2008/12/10/c-cache-helper-class/)

对于持续时间或超时，您有这种格式，您可以在其中指定 absoluteExpiration

```
public Object Add (string key, Object value, CacheDependency dependencies, 
DateTime absoluteExpiration, TimeSpan slidingExpiration, CacheItemPriority
priority, CacheItemRemovedCallback onRemoveCallback) 
```

# linux - 通过在命令提示符下输入密码来传输 linux fedora 12 中的文件

> ID：12054163
> 
> 赞同：0
> 
> 时间：2012-08-21T11:47:31.747
> 
> 标签：linux, rsync

我完全知道这个问题已经被问过很多次，但我无法找到任何满足我要求的解决方案。

**任务 ->**我需要将文件从机器 A 传输到机器 B 并在机器 B 上远程执行脚本。由于我的限制，我**无法**使用 keygen、expect 实用程序或任何其他需要安装软件包的实用程序。要传输文件，我需要提供密码**，并且我想在 Url 中提供密码**。因为这将在 bash 脚本中运行并且不需要用户干预。

**我的调查**- 我想使用 scp 但意识到，它不可能在命令提示符下提供密码。所以我想知道，rsync 是否还有其他选择。

下面是小尝试

```
#!/bin/bash
PATH=/usr/bin:/usr/sbin:/bin:/sbin
USER="bob"
RSYNC_PASSWORD="blue"
MACHINE_B="192.168.200.2"
if ping -c 1 -W 1 $MACHINE_B
then
 echo "There is machine b as well"
 echo " cheking to transfer file to machine b"
    rsync lol.sh  192.168.200.2:/home/bob/
fi 
```

谢谢和问候，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:49:40.530

我已经尝试过上面提到的各种选项，但不幸的是，它们都不适用于我的情况。但我要感谢大家对我的帮助，而且我确实学到了一些新东西，特别是 rsync。就我而言，我必须依靠 ssh 密钥才能使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:56:06.160

从 rsync 手册页：

```
 Some modules on the remote daemon may require authentication. If so, you will receive a password prompt when you connect. You can avoid the  password
   prompt  by  setting  the  environment variable RSYNC_PASSWORD to the password you want to use or using the --password-file option. This may be useful
   when scripting rsync. 
```

# magento - Magento：如何检索（即）分组产品的最低价格？

> ID：12054165
> 
> 赞同：5
> 
> 时间：2012-08-21T11:47:33.490
> 
> 标签：magento

我正在尝试在 Magento 1.7.0.2 的产品视图页面上显示分组产品的价格，就像它显示在类别产品列表中一样（“起始于：xx.xx”）。我以为我可以使用

```
$this->getPriceHtml($_product, true); 
```

这样做是因为它在类别产品列表中的工作方式相同，但正如我在 Magento 中尝试做的所有事情一样，这并不容易，因为该方法不会在产品视图页面上返回任何内容。

我深入研究了 Magento 的代码，发现这个问题的原因是产品的最低价格数据没有在产品视图页面上设置（$_product->getMinimalPrice() 返回 null）。

因此，我对如何加载产品的最低价格进行了一些研究，从而提出了类似的想法

```
$_product->getPriceModel()->getMinimalPrice($_product); 
```

这不起作用，因为显然该方法已在最后一次更新中被弃用和删除，或者

```
$priceModel = Mage::getResourceModel('catalogindex/price');
$priceModel->setStoreId(Mage::app()->getStore()->getId());
$priceModel->setCustomerGroupId(Mage::getSingleton('customer/session')->getCustomerGroupId());

$minimalPrices = $priceModel->getMinimalPrices(array($_product->getId()));
$minimalPrice = $minimalPrices[0];
$_product->setData('minimal_price', $minimalPrice['value']);
$_product->setData('minimal_tax_class_id', $minimalPrice['tax_class_id']); 
```

这也不起作用，因为表 'catalogindex_minimal_price' 是空的。

所以我的问题是，Magento 如何在类别产品列表中加载最低价格？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T08:42:06.057

我对 Magento 的代码进行了更深入的研究，并追踪了 Magento 是如何加载产品列表中的产品的。查看产品列表时，产品集合由模型 Mage_Catalog_Model_Layer 加载，该模型通过向集合的 SQL 添加连接来将最低价格和其他东西添加到集合中的产品中，但我尚未找到执行相同操作的模型单一产品而不是集合的东西。

因为我不想使用直接 SQL 查询，所以我检查了 CatalogIndex 模块，但该模块似乎根本不起作用，因为它的所有索引表都是空的，甚至已损坏。

```
$data_grouped = Mage::getModel("catalogindex/data_grouped");
$minimal = $data_grouped->getMinimalPrice(array($_product->getId()), Mage::app()->getStore()); 
```

起初看起来不错，但它给了我以下错误：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'catalog_product_index_price.value' in 'field list' 
```

CatalogIndex 模块要么已弃用，要么我太愚蠢而无法启用它。

但是，我现在在我的 price.phtml 模板中创建了一个解决方法，它使用与产品列表相同的方法来检索最低价格和税收百分比： 在模板的开头，我添加了以下内容：

```
$this->setProduct(
    Mage::getModel("catalog/product")->getCollection()
        ->addAttributeToSelect(Mage::getSingleton("catalog/config")->getProductAttributes())
        ->addAttributeToFilter("entity_id", $this->getProduct()->getId())
        ->setPage(1, 1)
        ->addMinimalPrice()
        ->addFinalPrice()
        ->addTaxPercents()
        ->load()
        ->getFirstItem()
); 
```

这可能不是完美的解决方案，但它完成了这项工作，而且它比迭代所有子产品并以这种方式找到最低价格要干净一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T04:49:26.280

这不像是对 Subsurf 答案的大型 HTML 评论那样的答案。如果您正在阅读本文，您可能正在实现自己的自定义模块来显示产品列表。在我的例子中，它是一个专供批发商使用的页面。我的目标是获得我自己公司产品的列表，并给他们一个列表，就像它是另一个类别一样。我将模板复制`list.phtml`到新的`content.phtml`. 但是`getMinimalPrice()`正在返回`NULL`，这意味着当此代码调用 时`getPriceHtml()`，`price.phtml`没有显示批发价格。

我用索引控制器和 content.phtml 做了一个简单的模块。使用我在网上看到的样板文件，在`indexController.php`文件中更改：

```
$block = $this->getLayout()->createBlock(
    'Mage_Core_Block_Template',
    'b2b',
    array('template' => 'b2b/content.phtml')
); 
```

到：

```
$block = $this->getLayout()->createBlock(
    'Mage_Catalog_Block_Product_List',
    'b2b',
    array('template' => 'b2b/content.phtml')
); 
```

这为您正确显示产品列表做了很多繁重的工作。

* * *

现在，在模板文件上，在我的例子`content.phtml`中，你得到你的产品集合，然后在`foreach()`重复的顶部使用 Subsurf 的代码。

```
 $_productCollection = Mage::getModel('catalog/product')
        ->getCollection()
//          ->addAttributeToSelect('*')
// doesn't work     ->addAttributeToSelect('special_price')
        ->addAttributeToSelect('sku')
        ->addAttributeToFilter('status', 1)
        ->addAttributeToFilter('visibility', 4)
        // http://stackoverflow.com/questions/1332742/magento-retrieve-products-with-a-specific-attribute-value
        ->addFieldToFilter( array(
                array('attribute'=>'manufacturer','eq'=>'143')
                , array('attribute'=>'manufacturer','eq'=>'139')
            ))
        ;

echo "<p>There are ".count($_productCollection)." products: </p>";
echo '<div class="category-products">';
// List mode 
if($this->getMode()!='grid') { 
    $_iterator = 0;
    echo'<ol class="products-list" id="products-list">';
    foreach ($_productCollection as $_product) {
        ?>          <li class="item<?php if( ++$_iterator == sizeof($_productCollection) ): ?> last<?php endif; ?>">
        <?php 
        $_product=Mage::getModel("catalog/product")->getCollection()
            ->addAttributeToSelect(Mage::getSingleton("catalog/config")->getProductAttributes())
            ->addAttributeToFilter("entity_id", $_product->getId())
            ->setPage(1, 1)
            ->addMinimalPrice()
            ->addFinalPrice()
            ->addTaxPercents()
            ->load()
            ->getFirstItem()
            );
        echo "Minimal price: ".$_product->getMinimalPrice()."<br>\n"; 
```

由于这不是单个产品的页面，而且我正在使用其他模板代码，`$this->setProduct()`因此没有为我做任何事情。我猜如果有一套，可能会有一个得到，所以`$_product=$this->getProduct()`我的模板需要的魔法`price.phtml`才能正常工作。然后我注意到我可以直接将`Mage::`in分配`setProduct()`给`$_product`.

谢谢，子冲浪！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T02:24:15.390

还有另一种方法仍然允许您`$this->getPriceHtml($_product, true);`在模板中使用，然后处理所有复杂的价格显示规则并将“起始于”放在分组产品价格之前。

我将其用于自定义特色产品块。在一个块类中，我有这个功能：

```
class MyCompany_Catalog_Block_Product_Featured extends Mage_Catalog_Block_Product_Abstract {
  public function setGroupedProductPrice($group_product) {
   $prices = array();
   foreach ($group_product->getTypeInstance()->getChildrenIds($group_product->getId()) as $ids) {
     foreach ($ids as $id) {
       $product = Mage::getModel('catalog/product')->load($id);
       $prices[] = $product->getPriceModel()->getPrice($product);
     }
   }
   ksort($prices);
   $group_product->setPrice(array_pop($prices));
  }
} 
```

然后在模板中：

```
<?php 
  if ($_product->getTypeId() == 'grouped')
    $this->prepareGroupedProduct($_product);
  echo $this->getPriceHtml($_product, true);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-01T00:21:07.963

以下不使用产品集合的技巧：

```
$priceResource = Mage::getResourceSingleton('catalogindex/price');

$select = $priceResource->getReadConnection()->select();
$select->from(
    array('price_table' => $priceResource->getMainTable())
)
    ->where('price_table.entity_id = ?', $_product->getId())
    ->where('price_table.website_id = ?', Mage::app()->getStore()->getWebsiteId())
    ->where('price_table.customer_group_id = ?', Mage::getSingleton('customer/session')->getCustomerGroupId());

$result = $priceResource->getReadConnection()->fetchRow($select); 
```

此代码改编自`\Mage_CatalogIndex_Model_Resource_Price::getMinimalPrices`并适用于单个产品。

# winforms - 安装工程动态连接串

> ID：12054166
> 
> 赞同：1
> 
> 时间：2012-08-21T11:47:36.033
> 
> 标签：winforms, visual-studio-2010, connection-string, setup-project

我有一个 Windows 窗体应用程序，我想使用 Visual Studio 2010 将其部署为安装项目。

我正在使用 SQLite 数据库，我想在安装到安装目录时创建一个连接字符串。

另一方面，我不知道应该将我的空数据库附加到安装项目还是必须在安装时创建它？

我找到了很多网站，但没有一个有帮助。

预先感谢您的所有帮助，请参阅本主题中的帮助链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:14:29.543

这是一个可以帮助您入门的教程：http: [//support.microsoft.com/kb/307353](http://support.microsoft.com/kb/307353)

Visual Studio 在设置项目功能方面非常有限。它不支持 SQL 连接，因此您只能通过[自定义操作](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372409%28v=vs.85%29.aspx)来完成。

如果您需要高级功能（如 SQL 连接），我建议您使用不同的设置工具： [http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

# image - 在画布 HTML5 上拖动图像

> ID：12054167
> 
> 赞同：0
> 
> 时间：2012-08-21T11:47:38.580
> 
> 标签：image, html, drag-and-drop, draggable, html5-canvas

我有一个画布并在其上加载图像。我想让这个图像可拖动。到目前为止，我的代码是：

```
$(document).ready(function() {
    loadImagetoEdit();
});

function loadImagetoEdit() {

   canvas = document.getElementById("myCanvas");
   ctx = canvas.getContext("2d");

   imageObj = new Image();      
   imageObj.onload  = function(){
       ctx.drawImage(this, 0, 0, 100, 100);        
   };
   imageObj.src = 'myImage.png';

 } 
```

我找到了这个教程[http://html5.litten.com/how-to-drag-and-drop-on-an-html5-canvas/](http://html5.litten.com/how-to-drag-and-drop-on-an-html5-canvas/) 还有这个[http://www.html5canvastutorials.com/labs/html5- canvas-drag-and-drop-an-image-tutorial/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-an-image-tutorial/)但我无法在我的案例中成功应用它们。你有人为我提供最简单的解决方案吗？

谢谢是提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-28T06:55:38.757

使用重新缩放、鼠标事件处理程序和偏移量。例如：

```
var canvas;
var ctx;
var status;

var isMouseDown = false;

// Canvas Dimensions
var cw = 0;
var ch = 0;

// Puck Dimensions (and Half thereof)
var pw = 30;
var ph = 30;
var pw2 = 0;
var ph2 = 0;

// Puck Position
var px = 50;
var py = 100;

// cursor offset relative to the puck
var cx = 0;
var cy = 0;

// Attr:Actual dimensions Scale
var sx = 1.0;
var sy = 1.0;

function Init()
{
    canvas = document.getElementById("canvas");
    ctx = canvas.getContext("2d");
    status = document.getElementById("status");

    cw = canvas.width;
    ch = canvas.height;

    // get the scale based on actual width;
    sx = cw / canvas.offsetWidth;
    sy = ch / canvas.offsetHeight;

    // Rescale the puck
    pw = pw * sx;
    ph = ph * sy;
    pw2 = pw/2;
    ph2 = ph/2;

    // Rescale the puck position
    px = px * sx;
    py = py * sy;

    status.innerHTML = "Attr:" + canvas.width + "," + canvas.height
                     + "; Actual:" + canvas.offsetWidth + "," + canvas.offsetHeight
                     + "; Scale:" + sx + "," + sy
                     + "; Puck:" + pw + "," + ph;

    canvas.onmouseup = MouseUp;
    canvas.onmousedown = MouseDown;
    canvas.onmousemove = MouseMoved;

    return setInterval(Repaint, 10); // repaint the canvas at intervals
}

function Repaint()
{
    // Clear the canvas
    ctx.clearRect(0, 0, cw, ch);

    // Draw the background
    DrawRect(0, 0, cw, ch, "rgb(220,220,190)");

    // Draw the puck
    DrawRect(px, py, pw, ph, "blue");
}

function DrawRect(x, y, w, h, colour)
{    
    ctx.fillStyle = colour;
    ctx.beginPath();
    ctx.rect(x, y, w, h);
    ctx.closePath();
    ctx.fill();
}

function MouseMoved(e)
{
    status.innerHTML = "Cursor[" + e.pageX + ", " + e.pageY + "], Offset["
        + (e.pageX - canvas.offsetLeft) + ", " + (e.pageY - canvas.offsetTop) + "]";

    if ( IsCursorOverPuck(e.pageX, e.pageY) )
    {
        document.body.style.cursor = 'pointer';
    }
    else
    {
        document.body.style.cursor = 'default';
    }

    if (isMouseDown)
    {
        px = (e.pageX - canvas.offsetLeft)*sx - cx*sx;
        py = (e.pageY - canvas.offsetTop)*sy - cy*sy;

        status.innerHTML = "mouse down. Offset[" + cx + ", " + cy + "], Puck[" + px + ", " + py + "]";
    }

}

function MouseUp()
{
    isMouseDown = false;
}
function MouseDown(e)
{
    if ( IsCursorOverPuck(e.pageX, e.pageY) )
    {
        cx = (e.pageX - canvas.offsetLeft)*sx - px;
        cy = (e.pageY - canvas.offsetTop)*sy - py;
        isMouseDown = true;
    }
}

function IsCursorOverPuck(x, y)
{
    status.innerHTML = "Cursor[" + x + ", " + y + "], CanvasOffset["
        + (x - canvas.offsetLeft) + ", " + (y - canvas.offsetTop) + "], Puck["
        + px + ", " + py + "]";

    return (x - canvas.offsetLeft) * sx > px  &&  (x - canvas.offsetLeft) * sx < px + pw
        && (y - canvas.offsetTop) * sy > py   &&  (y - canvas.offsetTop) * sy < py + ph;
}

Init();
```

```
<canvas id="canvas" width="400" height="300"></canvas>
<div id="status"></div>
```

**参考**

*   [使用 HTML 画布进行拖放 - GkSpk](http://www.gkspk.com/view/programming/drag-n-drop-with-html-canvas/)

# wix - 2个合并模块在wix中具有相同的文件名

> ID：12054168
> 
> 赞同：2
> 
> 时间：2012-08-21T11:47:39.887
> 
> 标签：wix, wix3.5, wix3.6

我有几个现有的合并模块和一个由我创建的。让我们将我的模块称为“A”。我的合并模块和一个现有的合并模块（比如 B）包含一个具有相同名称（customUI.resources）但内容不同的文件。

我正在制作一个同时使用模块 A 和 B 的安装程序。我想使用模块“A”中的 customUI.resources 文件。当我编译installer.wix文件时，它给我的错误是：

> light.exe : error LGHT0204 : ICE30: The target file 'va2q4hvb.res|CustomUI.resources' is installed in '[ProgramFilesFolder]\abc\' by two different components on an LFN system: '_5AD14D2401C1408A8B1117B8B85F53E3.7C263653_7A00_4D9C_B52A_39AF1892BC49' and 'Adapter_Config_ja. BABCE01A_0CB9_4A62_B877_5E520A53D609'。

这会破坏组件引用计数。我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:12:28.107

您是否可以控制创作模块 a 和 b？

如果是这样，将文件创作为 2 个不同的文件名，并使用 CopyFile 元素（DuplicateFile 表）将特定名称复制为常用的所需名称。还要对组件设置互斥条件，以确保只安装一个或另一个。

然后在您的主安装程序中设置一个属性来决定安装哪个。结果将通过所有 ICE 验证测试并为您提供所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:52:08.243

您可以使用[Dark](http://wix.sourceforge.net/manual-wix3/dark.htm)反编译合并模块，然后将它们组合成单个模块或重新创建合并模块 B 而不产生冲突文件。

# javascript - 调用函数时Firefox冻结（jquery）

> ID：12054177
> 
> 赞同：0
> 
> 时间：2012-08-21T11:48:08.857
> 
> 标签：javascript, jquery, firefox, grid

调用函数时`removeCell()`，Firefox 冻结。

我使用此功能隐藏一些网格单元格，具体取决于窗口宽度。
在网格准备好并且每次调整窗口大小后，函数都会被调用。
在 Chrome 和 Opera 中工作得很好，但在 Firefox 中它在第一次调用后就卡住了。

```
function removeCell(){
    headerResize();
    if (($('.section .header .cell:last-child').position().left + $('.section .header .cell:last-child').width()) > 
        $('.section .header').position().left + $('.section .header').width())
    {
        var priority = $body_grid_header[0].priority;
        var index    = 0;

        for(var i in $body_grid_header){
            if(bool($body_grid_header[i].visible) && $body_grid_header[i].priority > priority){
                priority = $body_grid_header[i].priority;
                index    = i;
            }
        }
        $body_grid_header[index].visible = 0;
        $('.grid .header .cell:nth-child('+ (parseInt(index)+2) +')').addClass('hidden');

        $hiddenArray.unshift(index);
        headerResize();
        removeCell();
    }
    else
    {
        //console.log($body_grid_header);
        var firstCell   = $('.grid .header .cell:first-child').width();
        var lastCell    = $('.grid .header .cell:last-child').width();
        var headerWidth = $('.grid .header').width();
        var cellCount   = $('.grid .header .cell').not(':first').not(':last').not('.hidden').length;

        if ((cellCount*100 + 100+firstCell+lastCell < headerWidth) && (cellCount < $body_grid_header.length))
        {
            var index = $hiddenArray[0];
            $hiddenArray.splice(0,1);

            $body_grid_header[index].visible = 1;
            $('.grid .header .cell:nth-child('+ (parseInt(index)+2) +')').removeClass('hidden');
            headerResize();
            removeCell(); //I GUESS IT STUCKS HERE!
        }
    }
}

function headerResize(){
  var firstColl = $('.grid .header .coll:first-child').width();
  var lastColl  = $('.grid .header .coll:last-child').width();
  var headerWidth   = $('.grid .header').width() - firstColl - lastColl;
  var collCount = $('.grid .header .coll').not(':first').not(':last').not('.hidden').length;
  var collWidth     = headerWidth / collCount - 1; //-1 = border-left

  if(collWidth < 100) collWidth = 100;

  $('.section .header .coll').not(':first').not(':last').width(collWidth);
  $('.section .content .coll:not(:first-child)').width(collWidth); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:13:02.360

很难理解，很难在本地测试:-)

试一试，改变

```
if ((cellCount*100 + 100+firstCell+lastCell < headerWidth) && (cellCount < $body_grid_header.length)) 
```

至

```
if ((cellCount*100 + 100+firstCell+lastCell < headerWidth) && $hiddenArray.length) 
```

希望它有效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:58:44.563

该代码可能会导致任何浏览器出现死锁，因为它归结为：

```
removeCell() {
     removeCell();
} 
```

唯一可以阻止的是`if()`在`else`分支中：

```
if ((cellCount*100 + 100+firstCell+lastCell < headerWidth) && (cellCount < $body_grid_header.length)) 
```

如果这个条件是错误的，你有一个无限循环。

而不是递归调用，您应该真正使用循环并在删除所有单元格时退出它。

# php - 用于提取微数据值的 Yii PHP 命令行应用程序不起作用

> ID：12054192
> 
> 赞同：0
> 
> 时间：2012-08-21T11:49:14.870
> 
> 标签：php, xpath, microdata

我想提取微数据值。

我使用从命令行运行的 Yii 应用程序，使用 Putty。

以下代码不会产生任何输出；

在 $this->input->html 我存储了整个 html 文档源；

我认为某处有`$content = new DOMXPath($dom);`裂缝；不知道为什么

如果有人知道，请帮忙；

```
$dom = new DOMDocument();

$html = $this->input->html;

$html = <<<HTML
echo $html;
HTML;

        @$dom->loadHTML($html);

        echo $html;

        $content = new DOMXPath($dom);

        print_r($content);

        // find price
        try {
            echo '1'.$this->getMicrodataAttribute($content, 'http://data-vocabulary.org/Offer', 'price');
            $this->output->productPrice = $this->getMicrodataAttribute($content, 'http://data-vocabulary.org/Offer', 'price');
            //echo 'result output product price: '.$this->output->productPrice.PHP_EOL;
        } catch (Exception $e) {

        }
        // find title
        try {

            $this->output->productTitle = $this->getMicrodataAttribute($content, 'http://data-vocabulary.org/Product', 'name');
            if (!$this->output->productTitle)
                if (preg_match("#<title>(.+)<\/title>#iU", $this->input->html, $t)) {
                    $this->output->productTitle = trim($t[1]);
                }
        } catch (Exception $e) {

        } 
```

这是应该提取微数据值的函数：

```
public function getMicrodataAttribute($content, $itemtype, $itemprop) {
    $tags = $content->query("//*[@itemtype=\"$itemtype\"]//*[@itemprop=\"$itemprop\"]");
    //print_r($tags);
    if ($tags) {
        foreach ($tags as $tag) {
            //die('dd');
            if (!$tag->getAttribute('content')) {
                return $tag->nodeValue;
            }
            return $tag->getAttribute('content');
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:22:41.973

我认为将`html`文本放入 a的代码`DOMDocument`有点复杂。也许那里隐藏着一个错误。试试这个：

```
$dom = new DOMDocument();
$dom->loadHTML( $this->input->html );
$content = new DOMXPath($dom);
print_r($content); 
```

请注意，我`@`从`loadHTML`方法中删除了 。有了这个，您可以查看它是否会引发任何错误。

# php - 获取给定字符串的唯一 8 位数字

> ID：12054200
> 
> 赞同：1
> 
> 时间：2012-08-21T11:49:41.547
> 
> 标签：php, algorithm, unique-key

有人知道任何算法可以为给定的字符串生成唯一的 8 位或 9 位数字吗？如果没有的话，最好有一个php示例，那么至少是算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:55:53.383

您可以使用[crc32()](http://php.net/manual/en/function.crc32.php)并返回 len。

```
<?php 
function crc_string($str, $len){
    return substr(sprintf("%u", crc32($str)),0,$len);
}
echo crc_string('some_string', 8);//65585849
?> 
```

## 编辑

在对我的答案进行碰撞/可靠性测试后，您很可能会遇到长度为 8 的碰撞，对于 9 可能会稍微少一些，然后对于 10 等来说甚至更少。在我的测试中，我测试了一个从 0 到 100k 的递增值，并且发生了 26 次碰撞，第一次发生了 36k。

```
<?php 
set_time_limit(0);
header('Content-type: text/html; charset=utf-8');
$time_start = microtime(true);

function crc_string($str, $len){
    return substr(sprintf("%u", crc32($str)),0,$len);
}

echo 'Started, please wait...<br />';
$record = array();
$collisions = 0;
for($i=0; $i<100000;$i++){

    $new = crc_string($i, 8);
    if(in_array($new,$record)){
        $match = array_search($new,$record);
        $took_time = microtime(true) - $time_start;
        echo($new.' has collided for iteration '.$i.' matching against a previous iteration ('.$match.') '.$record[$match]).' (Process time: '.round($took_time,2).'seconds)<br />';
        $collisions++;
    }else{
        $record[]=$new;
    }

    ob_flush();
    flush();
}
echo 'Successfully iterated 100k incrementing values and '.$collisions.' collisions occurred; total processing time: '.round((microtime(true) - $time_start),2).'seconds.';
?> 
```

测试结果：

```
Started, please wait...
38862356 has collided for iteration 36084 matching against a previous iteration (8961) 38862356 (Process time: 165.47seconds)
18911887 has collided for iteration 36887 matching against a previous iteration (8162) 18911887 (Process time: 172.79seconds)
37462269 has collided for iteration 38245 matching against a previous iteration (33214) 37462269 (Process time: 185.81seconds)
20153794 has collided for iteration 38966 matching against a previous iteration (6083) 20153794 (Process time: 192.87seconds)
41429622 has collided for iteration 40329 matching against a previous iteration (24999) 41429622 (Process time: 206.41seconds)
20784356 has collided for iteration 48908 matching against a previous iteration (27095) 20784356 (Process time: 302.75seconds)
39932561 has collided for iteration 51926 matching against a previous iteration (12367) 39932561 (Process time: 340.88seconds)
14372225 has collided for iteration 53032 matching against a previous iteration (13211) 14372225 (Process time: 355.46seconds)
16636457 has collided for iteration 55490 matching against a previous iteration (39250) 16636457 (Process time: 389.44seconds)
23059743 has collided for iteration 63126 matching against a previous iteration (39808) 23059743 (Process time: 504.1seconds)
13627299 has collided for iteration 63877 matching against a previous iteration (21973) 13627299 (Process time: 516.08seconds)
24647738 has collided for iteration 63973 matching against a previous iteration (47328) 24647738 (Process time: 517.62seconds)
14471815 has collided for iteration 71118 matching against a previous iteration (37805) 14471815 (Process time: 641.93seconds)
13253269 has collided for iteration 73602 matching against a previous iteration (33064) 13253269 (Process time: 687.53seconds)
10732050 has collided for iteration 73706 matching against a previous iteration (9197) 10732050 (Process time: 689.44seconds)
18919349 has collided for iteration 80358 matching against a previous iteration (73190) 18919349 (Process time: 819.89seconds)
40795042 has collided for iteration 81875 matching against a previous iteration (31127) 40795042 (Process time: 851.3seconds)
14609922 has collided for iteration 82498 matching against a previous iteration (17366) 14609922 (Process time: 864.29seconds)
20425272 has collided for iteration 83914 matching against a previous iteration (9858) 20425272 (Process time: 894.32seconds)
24790147 has collided for iteration 84519 matching against a previous iteration (9754) 24790147 (Process time: 907.34seconds)
35605337 has collided for iteration 91434 matching against a previous iteration (36127) 35605337 (Process time: 1060.5seconds)
30935494 has collided for iteration 91857 matching against a previous iteration (91704) 30935494 (Process time: 1070.17seconds)
28520037 has collided for iteration 92929 matching against a previous iteration (28847) 28520037 (Process time: 1095.53seconds)
31109474 has collided for iteration 95584 matching against a previous iteration (30349) 31109474 (Process time: 1159.36seconds)
40842617 has collided for iteration 97330 matching against a previous iteration (13609) 40842617 (Process time: 1203.19seconds)
20309913 has collided for iteration 99224 matching against a previous iteration (94210) 20309913 (Process time: 1250.54seconds)
Successfully iterated 100k incrementing values and 26 collisions occurred; total processing time: 1269.98seconds. 
```

结论是，除非您对自动递增值进行 1 比 1 递增，否则在填充用户表时，您总是会遇到相同字节长度的冲突，甚至更多：

```
echo sprintf("%08d",'1');//00000001
echo sprintf("%08d",'2');//00000002
...                      //99999999 
```

您可以通过向碰撞值添加另一个字节或包含 az 范围（如 md5()/sha() 哈希函数）来解决此问题，但这会破坏对象；p

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:55:25.630

是的，会发生碰撞，但是由于您没有说明为什么需要它，因此假设碰撞无关紧要。

您可以获取字符串的 md5 哈希（以十六进制表示）并将其转换为我们的数字系统并将其截断为所需的数字。

这可能对您有帮助： [php: number only hash?](https://stackoverflow.com/questions/3379471/php-number-only-hash)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:52:04.963

有`10^9`唯一的 9 位数字，而每个长度都有`256^length`字符串（假设为 ascii 字符串）。

因此，根据[鸽笼原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)- 对于长度为 4+ 的字符串，您无法获得*唯一*编号。（必须发生碰撞）

作为替代方案 - 您可能正在寻找传统的[哈希函数](http://en.wikipedia.org/wiki/Hash_function)（它们会发生冲突）或使用无界数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:00:42.960

正如已经指出的，如果数字的位数少于您要关联的字符串，则“唯一性”是不可能的。

您正在寻找的是一个好的散列函数。

查看[MD6 算法](http://en.wikipedia.org/wiki/MD6)。它具有高达 512 位的可自定义摘要长度，因此您可以创建具有 8 - 9 位十进制数字的摘要。我不知道任何 PHP 实现，原始实现语言是 C。

# c# - 自动异步套接字测试

> ID：12054201
> 
> 赞同：2
> 
> 时间：2012-08-21T11:49:42.697
> 
> 标签：c#, sockets, nunit

我想做一些自动化测试，以确保我的传输层正常工作。问题是我使用异步 UDP 套接字并且测试在调用回调之前完成。我想测试基本场景，例如发送几个字节并测试它们在另一端是否正确接收。

问题是：使用异步套接字自动化测试的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:10:57.570

异步套接字是什么意思？使用异步编程模型？
如果你想测试传输层，那么我会关注这个而不是异步套接字。
为了测试传输层，您可以使用来自两个线程的两个套接字进行测试。一字读，一字写。我假设您的协议确实已经支持 ping 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:37:02.697

由于数据传递发生在不同的线程上，您需要阻止测试等待来自接收回调的通知，可能会超时。

# c# - 多个应用程序能够同时访问 SQL Server 中的同一个数据库？

> ID：12054203
> 
> 赞同：2
> 
> 时间：2012-08-21T11:49:44.317
> 
> 标签：c#, sql-server

我对 .NET、C# 和 SQL Server 非常陌生。

我需要使用 C# 开发一个套接字应用程序。该应用程序应针对某些请求，、、、等数据库中的`insert`数据`delete`。`update`

我需要使用 C# 开发另一个 Windows 服务应用程序，通过 http 将数据库中的数据发送到 Web 应用程序。

这两个应用程序在同一系统中运行。数据库是 SQL Server。两个应用程序都使用相同的数据库。

我不确定当一个应用程序在数据库中删除或插入数据时，另一个应用程序是否仍然能够同时访问数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:53:27.893

Sql Server 可以很好地处理多个请求。每个连接的客户端都有一个不同的[spid](http://sqlserverplanet.com/dba/spid-what-is-it)。

但是，由您的 sql server 代码（批处理或存储过程）通过隔离级别和事务处理数据并发问题。因此，为了控制一个用户在其他用户更新、删除等时读取数据，您需要使用隔离级别和锁。

隔离级别：

[http://msdn.microsoft.com/en-us/library/aa213034(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa213034(v=sql.80).aspx)

另外：[http ://dbalink.wordpress.com/2008/05/27/isolation-levels-and-locks-in-sql-server-2005/](http://dbalink.wordpress.com/2008/05/27/isolation-levels-and-locks-in-sql-server-2005/)

关于交易的好文章：

[http://aspnet.4guysfromrolla.com/articles/072705-1.aspx](http://aspnet.4guysfromrolla.com/articles/072705-1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:53:29.403

我认为简单的答案是肯定的——多个应用程序/人可以同时访问一个数据库。

您可能需要阅读数据库中的事务和并发：

[http://en.wikipedia.org/wiki/Atomicity_(database_systems](http://en.wikipedia.org/wiki/Atomicity_(database_systems) )

[http://msdn.microsoft.com/en-us/library/cs6hb8k4(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/cs6hb8k4(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:54:57.330

可以通过任意数量的应用程序访问同一个 sql server 数据库。如果您担心一个应用程序会尝试同时读取另一个应用程序正在更改的数据，请阅读有关事务和隔离的信息。但简而言之，如果你做了一个只需要一行 sql 代码的小原子更改，你现在可能不应该关心这个。

# c# - 如何在WPF窗口中禁用除一个以外的所有按钮

> ID：12054209
> 
> 赞同：0
> 
> 时间：2012-08-21T11:50:02.743
> 
> 标签：c#, wpf, button

在我的 xaml 文件中，我有 5 个按钮我想禁用除一个以外的所有按钮

我该怎么做

注意：我的三个 StackPanel 中的按钮，所以我不能使用这个答案[问题](https://stackoverflow.com/questions/273809/disabling-all-but-one-child-control-in-a-wpf-window)

这段代码给了我编译错误

```
foreach (Control ctrl in this.Controls)
    ctrl.Enabled = false;

CancelButton.Enabled = true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:56:19.530

也许更多信息？一种方法是将要控制的所有按钮的 IsEnabled 属性绑定到“代码隐藏”中的公共属性，然后在需要时设置其值。

```
IsEnabled={Binding Path=IsEnabledProperty} 
```

类似的东西，我现在不能更具体，因为我不在我的工作电脑上，但我相信有人会想出一个合适的例子；）

# linq-to-xml - 使用 LINQ to XML 时选择正确的节点

> ID：12054211
> 
> 赞同：0
> 
> 时间：2012-08-21T11:50:08.640
> 
> 标签：linq-to-xml

我有另一个程序正在使用的 xml 文件。它指向几个ini文件的路径，我有兴趣提取它们。它们是在-tag 下`<add>`带有`key="config1"`（或 cofig2 等）的 -tags `<appSettings>`。这是我要阅读的示例文件。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <!-- Comment -->
    <add key="config1" value="\\server1\software\pgrTool\Standard.ini.xml" />
    <!--<add key="config2" value="C:\HeadQuarter\PgrTool.xml" />-->
    <add key="config2" value="\\server1\software\pgrTool\Standard.xml" />
    <add key="hide-REM" value="no" />
  </appSettings>
</configuration> 
```

我想要节点

```
<add key="config1" value="\\server1\software\pgrTool\Standard.ini.xml" />
<add key="config2" value="\\server1\software\pgrTool\Standard.xml" /> 
```

我尝试了以下 Linq 查询：

```
var iniman = from c in XElement.Load(@"C:\Program Files\pgrTool\pgrTool.exe.config").Elements("add")
                         where c.Attribute("key").Value.StartsWith("config")
                         select c.Attribute("value"); 
```

但它没有返回任何节点。如何使用 LINQ to XML 专门选择这些行和任何其他配置？-行？

**编辑**：我试过这个

```
var configs = var iniman2 = from c in XElement.Load(@"C:\Program Files\pgrTool\pgrTool.exe.config").Elements("configuration").Elements("appSettings")
                          where c.Attribute("key").Value.StartsWith("config")
                          select c.Attribute("value"); 
```

这也没有返回任何节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T20:50:08.457

首先，你为什么使用`XElement.Load`而不是`XDocument.Load`？您的 XML 文件显然是一个 XML 文档，因此您应该将它加载到`XDocument`实例中。

```
var doc = XDocument.Load(@"C:\Program Files\pgrTool\pgrTool.exe.config"); 
```

现在回到查询。你的第一个没有返回任何值，因为`Elements`方法只查看当前元素的直接子元素。第二个也不起作用，因为您试图获取`<appSettings>`元素而不是`<add>`.

您的查询应该是：

```
var paths = from add in doc.Root.Element("appSettings").Elements("add")
            where ((string)add.Attribute("key")).StartsWith("config")
            select (string)add.Attribute("value"); 
```

# ruby-on-rails - Rails 3：控制器返回类方法 nil

> ID：12054216
> 
> 赞同：0
> 
> 时间：2012-08-21T11:50:20.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, mongoid

所以我得到了这个类方法：

```
 def self.auth(id, key_code_in)
    post = Post.where(:id => id).first   
    if post.key_code == key_code_in
      post
    else
      nil
    end   
  end 
```

它喜欢控制台：

```
1.9.3p194 :001 > authtest = Post.auth('5032f3254ff9fcf10100001b', 42745590875)
=> #<Post _id: 5032f3254ff9fcf10100001b, _type: nil, created_at: 2012-08... 
```

但讨厌控制器：

```
 #GET posts/:id/remove_form
  def remove_form
  end

  #POST posts/:id
  def code
    @id = params[:id]
    @key = params[:destroy_code]    
    @post = Post.auth(@id, @key)

    render :text => params[@post].inspect
  end 
```

每次都让我零。我确保参数是从视图 form_tag 传递的，它们是。所以排除这一点......到底发生了什么？大量赞成票将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:54:30.090

参数不是字符串（您的比较需要一个整数）。

您可以使用 to_i 方法对其进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:24:06.597

我想我明白了！

你为什么访问`params[@post]`？这种方法的结果应该只是在`@post`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:26:41.723

试试这个，如果你正确使用 id。

def 代码 @id = params[:id].to_i @key = params[:destroy_code]
@post = Post.auth(@id, @key)

```
render :text => @post.inspect 
```

结尾

# uiview - IBOutlet 未发布

> ID：12054220
> 
> 赞同：0
> 
> 时间：2012-08-21T11:50:28.893
> 
> 标签：uiview, release, retain, iboutlet

我有这个问题。我有两个 IBOutlets 和属性，我保留它们。

```
@interface MCNavigationController : UIViewController 

@property (retain, nonatomic) IBOutlet UIView *contentView;
@property (retain, nonatomic) IBOutlet MCNavBar *navBar;

@end 
```

问题是在dealloc中，在我完成所有发布之后，contentView和navBar仍然没有被释放。

```
- (void)dealloc
{
    [contentView release];
    NSLog(@"%@",contentView.superview);
    [navBar release];
    NSLog(@"%@",navBar.superview);
    NSLog(@"%@",self.view);

    [super dealloc];
    NSLog(@"%@",navBar.superview);
    NSLog(@"%@",contentView.superview);
    NSLog(@"%@",self.view); 
```

}

在日志中，这就是我得到的：

```
2012-08-21 14:48:05.646 ShopRite[4250:12503] <UIView: 0x66b77d0; frame = (0 0; 320 416); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x66b7800>>
2012-08-21 14:48:05.649 ShopRite[4250:12503] <UIView: 0x66b77d0; frame = (0 0; 320 416); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x66b7800>>
2012-08-21 14:48:05.650 ShopRite[4250:12503] <UIView: 0x66b77d0; frame = (0 0; 320 416); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x66b7800>>
2012-08-21 14:48:05.650 ShopRite[4250:12503] <UIView: 0x66b77d0; frame = (0 0; 320 416); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x66b7800>>
2012-08-21 14:48:05.651 ShopRite[4250:12503] <UIView: 0x66b77d0; frame = (0 0; 320 416); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x66b7800>>
2012-08-21 14:48:13.726 ShopRite[4250:12503] *** -[MCNavigationController view]: message sent to deallocated instance 0x66b5f20 
```

但我应该得到一个“发送到导航栏和内容视图的释放实例的消息，就像我为 self.view 设置的一样。我很确定我不会将它们保留在其他任何地方或将它们添加到其他视图。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:23:08.230

> 在我完成所有发布之后，contentView 和 navBar 仍然没有被释放。

可以通过多种方式保留这些观点：

1.  这些视图可能是控制器视图的子视图（因此由控制器视图保留）。并且控制器的视图只会在`UIViewController`'s中发布`dealloc`，这发生在你的*末尾*`dealloc`，所以它没有发生在你记录它的地方。
2.  由于您正在使用 xib 加载视图控制器，因此视图控制器在加载时会保留 xib 及其所有对象。同样，这将在`UIViewController`'s中发布`dealloc`，这发生在*您*的`dealloc`.
3.  如果有人保留然后自动释放它们，它们仍然可以被自动释放池保留。（许多代码保留然后自动释放对象，因为这样做永远不会出错。）因此，对象被释放的确切时间并不总是可以预测的。只需担心最终正确地进行内存管理，而不必担心。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T12:09:50.127

我假设您将它与 xib 一起使用。

如果您使用的是 xib，那么它将在从 superview 中删除或从窗口中删除时被释放。

当我们使用 IBOutlet 时，我们不需要发布。

# c++ - 实现宏 for while 循环

> ID：12054221
> 
> 赞同：-5
> 
> 时间：2012-08-21T11:50:32.883
> 
> 标签：c++, c

下面的while循环可以在宏中实现吗？

```
while (x < 0.5)
 {
 count++;
 x = x *2;
 } 
```

x 是一个非常小的数字。分数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T11:51:55.113

干得好：

```
#define MYMACRO \
while (x < 0.5)\
\
 {\
 count++;\
\
 x = x *2;\
\
 } 
```

我什至保留了你的格式；）

# c# - 具有泛型类型的 Caliburn Microphonecontainer 注入服务，始终为空

> ID：12054222
> 
> 赞同：3
> 
> 时间：2012-08-21T11:50:34.570
> 
> 标签：c#, windows-phone-7, caliburn.micro

我正在尝试在使用泛型的电话容器上注册服务。

```
public class JsonWebClient<TResult> : IJsonWebClient<TResult> 
```

我是这样注册的：

```
protected override void Configure()
{
    _container = new PhoneContainer(RootFrame);

    _container.RegisterPhoneServices();
    _container.Singleton<MainPageViewModel>();
    _container.PerRequest<LoginViewModel>();

    _container.RegisterPerRequest(typeof(IJsonWebClient<>), "jsonwebclient", typeof(JsonWebClient<>));
} 
```

然后我有一个服务（注册服务），我`JsonWebClient`在构造函数中注入

```
public SignupService(IJsonWebClient<UserDto> webClient)
{
    _webClient = webClient;
} 
```

我的问题是它`webClient`始终为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:08:30.790

似乎`SimpleContainer`Caliburn.Micro 内部不支持开放泛型注册。

所以你需要`IJonWebClient<T>`为每个`T`

```
_container.RegisterPerRequest(
    typeof(IJsonWebClient<UserDto>),
    "jsonwebclientuser", 
    typeof(JsonWebClient<UserDto>));
_container.RegisterPerRequest(
    typeof(IJsonWebClient<OtherDto>), 
    "jsonwebclientother", 
    typeof(JsonWebClient<OtherDto>)); 
```

注意：如果您不按键解析，`key`则`null`调用`RegisterPerRequest`. 所以它应该是这样的：

```
_container.RegisterPerRequest(
    typeof(IJsonWebClient<UserDto>),
    null, 
    typeof(JsonWebClient<UserDto>)); 
```

或者您可以使用其他一些支持开放泛型的 IoC 容器，例如 Ninject 或 Autofac。

# git - git - 新用户尝试拉动并收到一些令人困惑的消息

> ID：12054223
> 
> 赞同：76
> 
> 时间：2012-08-21T11:50:36.283
> 
> 标签：git

我对 git 很陌生。我主要是将内容签入存储库，但现在我想从另一个开发人员那里获得最新的更改。

我试图简单地执行一个类似`git pull`运行的命令，但它返回了这样的消息：

```
There is no tracking information for the current branch.
Please specify which branch you want to merge with.
See git-pull(1) for details

    git pull <remote> <branch>

If you wish to set tracking information for this branch you can do so with:

    git branch --set-upstream develop origin/<branch> 
```

所以我做了`git pull my_branch_name`

它回来了：

```
fatal: 'develop' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

但在那之前我已经做过`git checkout my_branch`了。

有人可以让我知道我做错了什么以及如何简单地获取已签入的最新文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-21T11:53:28.827

我认为您在拉动时错过了遥控器的名称：

```
git pull <remote> my_branch_name 
```

运行此命令：

```
git remote -v 
```

并检查您要从中提取的遥控器的名称是什么

编辑：

如果你是 Git 新手，我会向你推荐[这本书](http://git-scm.com/book)。它涵盖了从基础到高级的主题，易于理解和阅读

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-08-21T11:55:43.400

如第一条错误消息所示，您需要告诉 git 在为该分支拉取时在哪里查看：

在 Git 1.8 及更高版本中，确保您已签出开发并运行：

`git branch --set-upstream-to origin/develop`

或更短的：-

`git branch -u origin/develop`

在 1.8 版之前的 Git 中：

`git branch --set-upstream develop origin/develop`

完成后，您`git pull`无需指定远程或分支即可。

如果尚未设置远程源，请先运行：

`git remote add origin url`

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-03-27T07:08:14.480

试试这个命令：

```
git pull origin master
git push -u origin master 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-11-23T11:04:43.537

您可以指定要提取的分支：

```
git pull origin master 
```

或者您可以设置它，以便您的本地主分支跟踪 github 主分支作为上游：

```
git branch --set-upstream-to=origin/master master
git pull 
```

当您克隆存储库（仅适用于默认分支）时，会自动为您设置此分支跟踪，但如果您将远程添加到现有存储库，则必须自己设置跟踪。值得庆幸的是，git 给出的建议让你很容易记住如何去做。

--set-upstream 显然在 git 1.9.x 中已被弃用。展望未来，你会想要使用类似的东西

```
git branch -u origin/master 
```

假设您已经签出了 master 。如果没有， `git branch -u origin/master master`将工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-26T01:17:10.073

我喜欢做的是...

```
$ git checkout master
$ git pull
$ git checkout <remotebranch>
$ git rebase master 
```

# gwt - 包含要添加动态列的复选框的 GWT EXT 网格？

> ID：12054224
> 
> 赞同：1
> 
> 时间：2012-08-21T11:50:36.690
> 
> 标签：gwt, gwt-rpc, gwt2, gxt

![我想要类似于这张图片的网格](../Images/4f99360b580bdf47fd9b177904b9051d.png)

我对 GWT 很陌生，我必须像显示的图像那样制作 GWT Grid。

我不知道如何使用针对每一行的相应更新和删除操作来执行此操作。

在这里，列数，即创建、更新、删除等是动态的并且来自数据库。此外，行数，即查看者、管理员、创建者来自数据库。

我想要更新和删除每行的按钮以及相应的操作。

框是授予查看者、管理员等权限的复选框。

我正在使用 EXT GWT，我知道 BaseModel，但不知道如何使用它。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:30:02.540

对于每个可编辑的列，创建一个编辑器：

```
//YOUR COLUMN:      
colSubTotalD = new ColumnConfig("subTotal", "Subtotal", 80);
...
//AN EDITOR
NumberField txtSubTotal = new NumberField();
...
colSubTotalD.setEditor(new CellEditor(txtSubTotal)); 
```

然后，创建并分配一个 RowEditor：

```
re = new RowEditor<ModelData>();
re.setClicksToEdit(ClicksToEdit.TWO);
re.addListener(Events.AfterEdit, new Listener<RowEditorEvent>() {
    public void handleEvent(RowEditorEvent e) {
        //{DO WHATEVER YOU NEED};
    }
});
yourGrid.addPlugin(re); 
```

这样，您的网格将在双击后进入编辑模式。您可以处理 roweditor 事件的更改。

# php - symfony2 翻译的继承

> ID：12054236
> 
> 赞同：0
> 
> 时间：2012-08-21T11:51:35.113
> 
> 标签：php, fosuserbundle, symfony-2.1, symfony-sonata

我正在使用 SonataUserBundle 来扩展用户管理功能。我也使用这个捆绑模型文件作为前端注册表单的基础。另一方面，我想向 FOSUserBundle.pl.yml 添加一些其他翻译 - 例如名字和姓氏。

新表单定义在 src/Application/Sonata/UserBundle/Form/Type/RegistrationFormType.php

那么我应该如何以及在哪里创建翻译文件来扩展已经定义的翻译？

我试图把它放在 Application/Sonata/UserBundle/Resources/translations/Application/Sonata/UserBundle/Resources/translations/ApplicationSonataUserBundle.pl.yml 但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:12:35.277

您可以将修改后`FOSUserBundle.pl.yml`的`app/Resources/translations`文件夹。见[这里](http://symfony.com/doc/current/book/translation.html#translation-locations-and-naming-conventions)。

# ios - 在改变屏幕方向时，我想在旋转之前先拉伸图像

> ID：12054237
> 
> 赞同：0
> 
> 时间：2012-08-21T11:51:36.143
> 
> 标签：ios, uiimageview

我正在开发一个应用程序，我们可以在其中看到横向和纵向视图的图像。现在我希望当屏幕方向更改为横向模式时，图像的大小拉伸到全尺寸然后旋转。如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:06:26.590

尝试按以下方法进行拉伸...

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
     // Stretch Here
} 
```

# c++ - 在成员调用中实例化类

> ID：12054238
> 
> 赞同：1
> 
> 时间：2012-08-21T11:51:36.753
> 
> 标签：c++, oop

我有一个成员函数定义为：

```
void printSomeData(std::ostream& str) const; 
```

当我尝试以这种方式从另一个类中调用该成员时：

`myclass.printSomeData(std::ofstream("foo.txt"));`

我收到以下错误：

> 错误：没有匹配函数调用'myclass::printSomeData(std::ofstream)'</p>
> 
> 注意：没有已知的参数 1 从 'std::ofstream {aka std::basic_ofstream}' 到 'std::ostream& {aka std::basic_ostream&}' 的转换</p>

但是，如果我首先调用函数来实例化 ofstream，如下所示，我不会收到任何错误，我不太明白：

```
std::ofstream foo("foo.txt");
myclass.printSomeData(foo); 
```

任何人都可以给我一个线索？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:54:22.210

您不能将临时对象绑定到非常量引用，您在此处执行的操作是：

```
myclass.printSomeData(std::ofstream("foo.txt"));
                            ^ temporary std::ostream object 
```

什么时候可以这样做：

```
std::ofstream os("foo.txt");
myclass.printSomeData(os); 
```

您正在传递对现有`std::ofstream`对象的引用，而不是临时对象。

您也可以`printSomeData`参考`const`，但大概您想更改函数中的流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:53:11.993

```
void printSomeData(const std::ostream& str) const;
//                   |
//              notice const 
```

临时对象不能绑定到非`const`引用，并`std::ofstream("foo.txt")`创建一个临时对象。

或者您可以为该函数提供一个非临时变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:55:00.327

```
void printSomeData(std::ostream& str) const;

myclass.printSomeData(std::ofstream("foo.txt")); 
```

您尝试传递给引用临时对象的函数（即尝试绑定`rvalue`到`lvalue-reference`）。这是不正确的。可以用`const std::ostream&`，但不好用，`std::ostream&&`能用C++11也可以用。

```
void printSomeData(std::ostream&& str) const;
myclass.printSomeData(std::ofstream("foo.txt")); 
```

但在这种情况下，您不能传递 ostream 类型的对象。

# php - 在 php 中创建文件时删除空格

> ID：12054244
> 
> 赞同：-1
> 
> 时间：2012-08-21T11:51:47.080
> 
> 标签：php

请问我有事要问你

我需要删除此代码生成的文件的空格。现在原始代码如下！

```
$small_file = $image->createFile(' '.$filename); 
```

关键是我需要那个''因为否则它将无法工作..我的意思是代码！现在，我需要的是类似下面的内容，这将允许我在提交之前删除从代码生成的空格。

```
$small_file = $image->REMOVE_SPACES[createFile(' '.$filename)];

function createFile($output_filename = null) {
if($this->ext == "JPG" OR $this->ext == "JPEG") {
imageJPEG($this->dst_r, $this->uploaddir.$output_filename, $this->quality);
} elseif($this->ext == "PNG") {
imagePNG($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
} elseif($this->ext == "GIF") {
imageGIF($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
}
return $output_filename;
}
$filename = $_FILES['Filedata']['name']; 
```

所有代码：

```
function createFile($output_filename = null) {
if($this->ext == "JPG" OR $this->ext == "JPEG") {
imageJPEG($this->dst_r, $this->uploaddir.$output_filename, $this->quality);
} elseif($this->ext == "PNG") {
imagePNG($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
} elseif($this->ext == "GIF") {
imageGIF($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
}
return $output_filename;
}

function setUploadDir($dirname) {
$this->uploaddir = $dirname;
}

function flush() {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetFile = str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];
$filename = $_FILES['Filedata']['name']; 

imagedestroy($this->dst_r);
unlink($targetFile);
imagedestroy($this->img_r);

}

}

$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetFile = str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];
$filename = $_FILES['Filedata']['name']; 
$thumbnail = basename($filename,'.' .$ext) . $ext;
$thumbnail1 = basename($filename);      

move_uploaded_file ($tempFile, $targetFile);

 $image = new Image();
            $image->setFile($targetFile);
            $image->setUploadDir($targetPath);
            $image->resize(640);
$large_file = $image->createFile(' '.$thumbnail1);
            $image->resize(120);
$small_file = $image->createFile('s_'.$thumbnail);
            $image->flush();
} 
```

谢谢您的支持！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:00:50.547

它很简单：

```
$small_file = str_replace(' ', '', $image->createFile(' '.$filename)); 
```

删除所有空格。

或者，仅删除前导空格：

```
$small_file = ltrim($image->createFile(' '.$filename)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:12:30.893

```
You can remove space from image name or replacing them with underscore "_"  

 $small_file = $image->createFile(' '.$filename);
 $small_file = str_replace(" ","_",$small_file);

It will change all space witn _ in your $small_file string. 
```

# c# - 驱动器的 C# 循环挂起

> ID：12054245
> 
> 赞同：2
> 
> 时间：2012-08-21T11:51:48.953
> 
> 标签：c#, loops, freeze, drive

我正在尝试查找驱动器的驱动器号（例如“C:\”）。我知道驱动器的名称（例如“KINGSTON”），并将其存储在字符串中`drivename`。 `sDir`是保存结果的字符串。

```
DriveInfo[] drives = DriveInfo.GetDrives();

foreach (DriveInfo d in drives)
{
   MessageBox.Show(d.Name);
   if (d.VolumeLabel.Contains(drivename))
   {
      MessageBox.Show("Got Ya");
      sDir = d.Name;
      break;
   }
} 
```

这段代码在我看来应该可以工作，尽管我有 6 个驱动器（drives.Lengt 也显示 6 个），但它只循环其中 3 个，而没有进入 if（从不显示“得到你” msgbox)，然后就直接跳出if语句，这段代码被包裹进去了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:05:43.130

`DriveInfo.VolumeLabel`可能会抛出异常，您必须正确处理它。[http://msdn.microsoft.com/library/system.io.driveinfo.volumelabel](http://msdn.microsoft.com/library/system.io.driveinfo.volumelabel)

```
DriveInfo[] drives = DriveInfo.GetDrives(); 

foreach (DriveInfo d in drives) 
{ 
   MessageBox.Show(d.Name);
   string volumeLabel = null;
   try
   {
     volumeLabel = d.VolumeLabel;
   }
   catch (Exception ex)
   {
     if (ex is IOException || ex is UnauthorizedAccessException || ex is SecurityException)
       MessageBox.Show(ex.Message);
     else
       throw;
   }
   if (volumeLabel != null && volumeLabel.Contains(drivename)) 
   { 
      MessageBox.Show("Got Ya"); 
      sDir = d.Name; 
      break; 
   } 
} 
```

你也可以检查一下[`DriveInfo.IsReady`](http://msdn.microsoft.com/library/system.io.driveinfo.isready)。

# c# - 在 wpf 中显示用户控件的替代方法

> ID：12054249
> 
> 赞同：2
> 
> 时间：2012-08-21T11:52:05.533
> 
> 标签：c#, wpf, visual-studio-2010, user-controls

我想知道在 WPF 应用程序中是否有另一种显示`usercontrols`方式`mainwindow`。目前，我利用 的可见性属性`usercontrols`在单击按钮时一次显示一个用户控件。我将用户控件的可见性设置为`Hidden`单击按钮并更改可见性。它完美地工作。但这是正确的方法吗？

编辑：

我尝试过这样的事情，但它不起作用。

```
mainwindow.xaml:

<Window x:Class="WpfApplication4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication4"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="54*" />
        <RowDefinition Height="257*" />
    </Grid.RowDefinitions>
    <Grid Grid.Row="1">
        <ContentControl Content="{Binding CurrentView}"/>
    </Grid>
    <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="25,12,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    <Button Content="Button" Height="23" HorizontalAlignment="Right" Margin="0,12,251,0" Name="button2" VerticalAlignment="Top" Width="75" />
</Grid>

</Window> 
```

有两个用户控件，即-UserControl1 和UserControl2。在后面的代码中：

```
 private UserControl currentview;

    private UserControl CurrentView
    {
        get
        {
            return this.currentview;
        }
        set
        {
            this.currentview = value;
            //RaisePropertyChanged("CurrentView");
        }
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        UserControl1 uc1 = new UserControl1();
        CurrentView = uc1;
    } 
```

这没用。正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:58:22.213

您可以拥有一个`ContentControl`（在 MainWindow xaml 中），并将其内容绑定到一个视图，以便您可以在代码中切换它。像这样：

```
<Window x:Class="WpfApplication4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication4"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="54*" />
        <RowDefinition Height="257*" />
    </Grid.RowDefinitions>

    <ContentControl Grid.Row="0" Content="{Binding CurrentView}"/>

    <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="25,12,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    <Button Content="Button" Height="23" HorizontalAlignment="Right" Margin="0,12,251,0" Name="button2" VerticalAlignment="Top" Width="75" />
</Grid>

</Window> 
```

在后面的代码中：

```
 private UserControl currentView;

    public UserControl CurrentView
    {
        get
        {
            return this.currentView;
        }

        set
        {
            if (this.currentView == value)
            {
                return;
            }

            this.currentView = value;
            RaisePropertyChanged("CurrentView");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:03:49.923

我认为这并没有什么问题，如果您对控件在窗口的生命周期内保留在内存中感到满意的话。另外，Amadeus Hein 的回答。

# cpanel - 在 Windows 服务器/Plesk 上运行计划任务

> ID：12054250
> 
> 赞同：0
> 
> 时间：2012-08-21T11:52:09.903
> 
> 标签：cpanel

尝试将远程 php 文件作为计划任务运行，但出现 PHP 错误。

> 错误是“无法打开输入文件： [http](http://www.example.com/example.php) ://www.example.com/example.php ”</p>

尝试以各种格式编写它：

```
"C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP5\php.exe" -f http://www.example.com/example.php
"C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP5\php.exe" -f http://www.example.com/example.php 
```

也尝试不使用 -f 参数，但都导致相同的错误消息

它在运行本地域 php 文件时确实有效：

```
"C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP5\php.exe" -f "C:\inetpub\vhosts\example.com\httpdocs\example.php" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T06:04:26.853

如何在 plesk 控制面板中创建删除计划任务

[http://www.motherhost.in/members/knowledgebase/4/creating-or-removing-scheduled-tasks-in-plesk.html](http://www.motherhost.in/members/knowledgebase/4/creating-or-removing-scheduled-tasks-in-plesk.html)

在 Plesk 中创建或删除计划任务

在[Windows 服务器上](https://www.motherhost.in/windows-dedicated-server.html)，您可以通过创建计划任务将它们设置为在特定时间运行（这类似于在 Linux 服务器上运行 cron 作业的方式）。在 Plesk 10 中创建计划任务：

您可以通过执行以下操作在 Plesk 中设置计划任务：

```
Log into Plesk*
Click on the Websites & Domains tab.
Click on Show Advanced Operations (a small grey link in the middle of the page), if the advanced options are not already shown.
Click on Scheduled Tasks.
Select the appropriate system user.
Click on Schedule New Task.
Fill out the form as follows:
    Switched On:  Check the box to turn on the scheduled task.
    Description:  A short description to remind you what this scheduled task does.
    Scheduler Notification:  If you want an email every time this runs, select the appropriate option, otherwise select Do Not Send.  You may provide an email address where you want the notifications sent to.
    Path to executable file:  Specify the path to the file you wish to execute.  For Windows servers, it would be something like this:
    C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP5\php-cgi.exe
    Arguments: D:\Inetpub\vhosts\mydomain.tld\httpdocs\myscript.php
    For Linux servers with Plesk, ir would be something like this:
    /var/www/vhosts/domain.tld/httpdocs/myscript.php
    Replace domain.tld with your domain name, and myscript.php with the appropriate subfolder(s) (if any) and filename.
    Task Priority:  Select Low, Normal or High.
    Specify when to run your command by selecting the appropriate checkboxes in the Hours, Days of month, Months or Days of week fields.
    Click OK to schedule the task or click Run Now to schedule the task and immediately run it.
You will be taken back to the Scheduled Tasks screen and you should see your new scheduled task listed at the bottom. 
```

在 Plesk 10 中删除计划任务

```
Logging into Plesk*
Click on the Websites & Domains tab.
Click on Show Advanced Operations (a small grey link in the middle of the page), if the advanced options are not already shown.
Click on Scheduled Tasks.
Select the appropriate system user.
Check the box next to the Scheduled Task you want to remove.
Click on the Remove button.
It will load a new page and ask if you really want to deleted it.  Check the Confirm Removal box and click on the OK button.
You will be taken back to the Scheduled Tasks screen and it should say: "Information: Scheduled tasks were removed." 
```

[印度网络托管](https://www.motherhost.in/web-hosting.html)和[经销商托管印度](https://www.motherhost.in/reseller-hosting.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:05:31.183

PHP 命令行执行只支持本地文件。如果要获取远程 PHP 脚本输出，则可以使用 wget。

注意：确保 wget.exe 安装在您的 Windows 服务器上。请与您的托管服务提供商联系以获取路径。

```
c:\....path to wget...\wget.exe http://www.example.com/example.php 
```

# c# - Membership.GetUser 与配置文件属性？

> ID：12054253
> 
> 赞同：0
> 
> 时间：2012-08-21T11:52:36.923
> 
> 标签：c#, asp.net-membership, asp.net-profiles

我试图让所有用户使用我搜索属性的用户名。

```
MembershipUserCollection users = Membership.FindUsersByName(txtSearchName.Text + "%");
datalist1.DataSource = users;
datalist1.DataBind();

//In the datalist
<asp:Label ID="UserName" runat="server" Text='<%# Eval("Username") %>'></asp:Label> 
```

上面的代码有效，我可以从数据库中输入任何用户名，它会显示出来。但我还需要我在 webconfig 中指定的所有配置文件属性，例如名字、姓氏等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:08:20.497

我一直在业务逻辑层处理这个问题。您需要创建一个自定义类型来扩展您的配置文件属性并添加一个`UserAccount`属性：

```
 public static Profile GetProfile() {
        Profile profile = null;
        if (HttpContext.Current.User.Identity.IsAuthenticated) {
            var user = Membership.Provider.GetUser(HttpContext.Current.User.Identity.Name, false);
            if (user != null) {
                // an AD user who is already authed
                profile = ReferralsData.GetProfilesByProviderKey(user.UserName) ?? new Profile();
                profile.UserAccount = user;
            }
        }
        return profile;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:59:57.893

```
var profiles = ProfileManager.GetAllProfiles(ProfileAuthenticationOption.Authenticated)
datalist1.DataSource = profiles;
datalist1.DataBind();

<asp:Label ID="UserName" runat="server" Text='<%# Eval("UserName") %>'></asp:Label>
<asp:Label ID="FirstName" runat="server" Text='<%# Eval("FirstName") %>'></asp:Label>
<asp:Label ID="LastName" runat="server" Text='<%# Eval("LastName") %>'></asp:Label> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:00:29.867

您可以通过配置文件提供程序类访问配置文件属性

```
var profile = ProfileBase.Create(userName);
var firstName = profile["FirstName"] as string;
var lastName = profile["LastName"] as string; 
```

# servlets - servlet 项目中的堆空间内存

> ID：12054255
> 
> 赞同：1
> 
> 时间：2012-08-21T11:52:51.297
> 
> 标签：servlets, heap-memory

我正在创建一个可以进行 67,108,864 次计算的程序。但是当我运行它时，有一个错误信息：java.lang.OutOfMemoryError: Java heap space。我在这里找到了解决此问题的建议：[java.lang.OutOfMemoryError: Java heap space with NetBeans](https://stackoverflow.com/questions/717550/java-lang-outofmemoryerror-java-heap-space-with-netbeans/12051713#12051713)。虽然我已经做了建议，但问题仍然存在。

首先，我尝试了 Michael Myers 的建议，即设置项目属性的 VM 选项，但没有得到任何运气。我什至将 VM 选项设置为 -Xmx1024m。我对 James Schek 的声明很感兴趣，该声明指出此设置不适用于 Servlet 项目，而仅适用于桌面项目。

我也尝试过 Alok 的建议，即增加 Tomcat 服务器的虚拟内存。在这里，我还将 VM 选项设置为 -Xmx1024m。但再次没有得到任何运气。

我已经尝试过 Will Hartung 建议禁用 HTTP 监视器，但同样没有任何变化。

但我没有尝试过 Rakesh 的建议，因为我的电脑不允许我更改文件。

所以，我的问题是：

1.  如何解决 servlet 项目中的此类问题？

2.  Xmx 的最大值是多少？是RAM的容量吗？

3.  如何更改 netbeans.conf 文件的内容？

**环境**：

8 GB 内存

# jakarta-mail - Javamail：处理重新连接到邮件服务器的最佳方法是什么

> ID：12054256
> 
> 赞同：0
> 
> 时间：2012-08-21T11:52:53.683
> 
> 标签：jakarta-mail

我想检查带有其服务的邮件服务器是否准备好/可用。如果邮件服务器没有准备好，程序应该等待大约 5 分钟，然后应该再次尝试连接 Javamail-API 中缺少的功能是检查邮件服务器是否准备好（或者不是？）

当然，我可以使用一些 ping 机制来检查服务器是否处于活动状态，但是如果服务器处于活动状态但邮件服务器应用程序还没有准备好怎么办？

任何好的想法如何实现这种重新连接机制？

```
 try {

        store = session.getStore("imaps");

        //If that fails, the programm should try it again in 5 Minutes
        store.connect(imapHost, username, password);

    } catch (MessagingException e) {

        logger.warn("Cant connect to Mailserver: " + e.getMessage());

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:07:39.030

您想要的方法称为“连接”。

您可以设置连接超时的属性。请参阅各种邮件协议提供程序的 javadocs。

# jsf-2 - 富树jsf2.0中的叶子节点甚至都有+图标

> ID：12054261
> 
> 赞同：1
> 
> 时间：2012-08-21T11:53:04.897
> 
> 标签：jsf-2, tree, richfaces

即使对于下面没有子节点的节点，我也会在richTree 中获得默认的加号（+）图标。一旦你点击加号图标就会消失。我需要那个加号图标不要出现在叶节点上，即没有子节点的节点。

```
<a4j:outputPanel id="productComponentTree">
                <rich:tree id="pcTree" var="pcTreeNode" >
                    <rich:treeModelRecursiveAdaptor id="recTreeAdaptorID" 
                        roots="#{productComponentBean.productComponentList}"
                        nodes="#{pcTreeNode.financialServicesAgreementComponent}">
                        <rich:treeNode  id="treeNodeID" expanded="true"  icon="#{item.toShow?item.icon:'null'}">
                            <h:selectBooleanCheckbox id="treeNodeCheckBox"
                                disabled="#{productComponentBean.disabledCheckBox}"
                                value="#{pcTreeNode.selectedFlag}"
                                onclick="checkUncheckNodes(this);">
                            </h:selectBooleanCheckbox>
                            <h:outputText value="#{pcTreeNode.name}"></h:outputText>
                        </rich:treeNode>
                    </rich:treeModelRecursiveAdaptor>
                </rich:tree>
            </a4j:outputPanel> 
```

以上是树的代码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:46:00.423

解决方案非常简单。

只需将标签添加到 treeModelRecursiveAdaptor 即可`leaf`。

```
<rich:treeModelRecursiveAdaptor id="recTreeAdaptorID" 
                    roots="#{productComponentBean.productComponentList}"
                    nodes="#{pcTreeNode.financialServicesAgreementComponent}"
                    leaf="#{isLeaf(pcTreeNode)}"> 
```

和：

```
public Boolean isLeaf(Node node){
    return (node!=null && (node.children==null || node.children.size()==0));
} 
```

# symfony - 修改控制器内的请求

> ID：12054265
> 
> 赞同：2
> 
> 时间：2012-08-21T11:53:18.907
> 
> 标签：symfony, symfony-forms

在 Symfony 中，很容易在控制器中获取请求：

```
$request = $this->container->get('request'); 
```

现在，我认为这是一种不好的做法......但是是否可以修改该请求，例如在绑定之前修改隐藏表单字段的值：

```
$requestModifiedWithNewValueForHiddenFormField = $request;
// modify the request
// ....
$this->bind($requestModifiedWithNewValueForHiddenFormField); 
```

我想我应该使用 dataTransformer 但在这种情况下，我想听听您对修改请求的意见......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T12:59:03.230

对于快速请求字段修改，您可以这样做，

```
$request = $this->getRequest()->request;
$requestArray = $request->all();
$requestArray['nested']['modifying_field'] = "Modified value";
$request->replace($requestArray); 
```

如果该字段没有嵌套，那么您可以按照以下方式进行操作，

```
$this->getRequest()->request->set("modifying_field", "Modified value"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:01:37.667

这取决于您想要实现的目标。

当这种逻辑（修改隐藏文件）对于多个控制器来说很常见时，您绝对应该使用一些枯燥的方法，例如 dataTransformer 或事件订阅者：

[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

您还可以向表单注入请求并创建表单方法来处理此问题。

# jquery - 页脚下的空白

> ID：12054266
> 
> 赞同：0
> 
> 时间：2012-08-21T11:53:22.960
> 
> 标签：jquery, html

不管我怎么努力，我的项目的页脚下仍然是一片空白。“像胶水一样粘住。”:(

这是代码：http: [//jsfiddle.net/XxB6Y/13/](http://jsfiddle.net/XxB6Y/13/)

我知道肯定有问题，但我不知道在哪里。请帮我。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:07:27.647

您`height:100%;`在许多元素上使用。把它们拿掉，页脚空间就会消失。

在这种情况下，如果需要设置高度，请尽量使用像素单位，而不是百分比。

# perl - Perl 服务器客户端问题（缓冲区未刷新）

> ID：12054267
> 
> 赞同：0
> 
> 时间：2012-08-21T11:53:24.160
> 
> 标签：perl

我确实有以下用 perl 编写的客户端和服务器。问题是客户端永远不会正确地从服务器发送和接收消息。要求是向服务器发送消息并从服务器获取响应并基于此做出决定。我已经用 STDOUT 和 STDIN 编写了一个服务器客户端测试类，并且工作正常。我认为这是因为我在每次发送命令后按 ENTER 键。

客户

```
#!/usr/bin/perl

my $rhostname='192.168.0.181';
my $hostname="support";
my $port='7071';
my $script_log_dir="/var/sdplog/support";

use IO::Socket; 
use strict;

$| = 1;  
my $host_ip='0.0.0.0';
my $host_port='7088';
my $sock = new IO::Socket::INET ( 
    PeerAddr => $rhostname, 
    PeerPort => $port,
    Proto => 'tcp', 
   ); 
   die "Could not create socket: $!\n" unless $sock; 
   $sock->autoflush(1);

   my $query = "START:192.168.0.20:3:1:1:".$host_ip.":".$host_port;

   my $count=0;

   print "sending $query\n";
   print $sock "$query";

   my $data = <$sock>;
   print $data;
   close($sock); 
```

服务器 - 代码

```
while ($q != -999){
    $logger->debug('waiting for socket....');
    my $new_sock = $sock->accept();
#       sleep(5);
    $i++;   
    $logger->debug($i.' accept');
    while(<$new_sock>) {

    #       print $_;
            $logger->debug("received command - ".$_);
            my $ip_status = 2;

            @input_command = split(':', $_);

            $command = @input_command[0];
            $server_ip = @input_command[1];
            $retry_count= @input_command[2];
            $wait_time = @input_command[3];
            $next_ping_wait = @input_command[4];
            $client_ip = @input_command[5];
            $client_port = @input_command[6];

            @ping_array=($server_ip,$retry_count,$wait_time,$next_ping_wait);
            $logger->debug("received request ".@input_command);
            $logger->debug($command);
            if ($command eq "START"){
                    $logger->debug($command." received. checking server status");
                    $ip_status = network->ping_ip(@ping_array);
                    $logger->debug("ping status - ".$ip_status);
#                       $logger->debug($client_ip.$client_port);
    #               send_message($client_ip,$client_port,$ip_status); # do some 
                    sleep(2);
                    print $new_sock "$ip_status\n";

            }else{

                    $logger->debug($command." received");          }
            }
}

close($sock);
exit 0; 
```

服务器处于监听状态。当我运行客户端时，下面是输出。

```
>perl client.pl 
sending START:192.168.0.20:3:1:1:0.0.0.0:7088 
```

在服务器上

```
2012/08/21 18:49:04 DEBUG> server.pl:89 main:: - waiting for socket....
2012/08/21 18:49:08 DEBUG> server.pl:93 main:: - 1 accept 
```

但仅此而已。一旦我单击 CTRL+C 客户端终止并按预期打印服务器上的其余日志。似乎没有刷新从服务器读取。

```
2012/08/21 18:56:05 DEBUG> server.pl:97 main:: - received command -   START:192.168.0.20:3:1:1:0.0.0.0:7088
2012/08/21 18:56:05 DEBUG> server.pl:113 main:: - received request 7
2012/08/21 18:56:05 DEBUG> server.pl:114 main:: - START
2012/08/21 18:56:05 DEBUG> server.pl:116 main:: - START received. checking server  status
2012/08/21 18:56:05 DEBUG> network.pm:31 network::ping_ip - 192.168.0.20 is alive
2012/08/21 18:56:05 DEBUG> server.pl:118 main:: - ping status - 1
2012/08/21 18:56:07 DEBUG> server.pl:89 main:: - waiting for socket.... 
```

但是没能找到解决办法。请说明一下，因为我现在被困了几个小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:16:44.853

您的服务器正在等待 EOF 或换行符，但在客户端不发送它。当您终止客户端时，服务器收到 EOF，服务器停止读取`$new_sock`以及所有其他代码按预期工作。

`$query`您应该在 in 中添加换行符`client`

```
-print $sock "$query";
+print $sock $query."\n"; 
```

对于`chomp`接收到的数据`server`

```
while(<$new_sock>) {
+    chomp; 
```

# c# - Metro App 如何禁用 Gridview 滚动

> ID：12054273
> 
> 赞同：3
> 
> 时间：2012-08-21T11:53:33.087
> 
> 标签：c#, windows-phone-7, windows-8, windows-runtime, windows-store-apps

是否可以在 GridView 中禁用滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:26:15.623

在 GridView 中试试这个

```
<GridView
    ScrollViewer.HorizontalScrollBarVisibility="Disabled"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T10:14:07.113

As an alternative you could use

```
<GridView ScrollViewer.HorizontalScrollMode="Disabled" /> 
```

If you're setting this property dynamically, the Scrolling will be disabled but the ScrollPosition stays (on *ScrollBarVisibilty=Disabled the ScrollPosition gets set to 0)

Dynamic Example:

```
ScrollViewer.SetHorizontalScrollMode(YourGridView, ScrollMode.Disabled); 
```

# iphone - 如何在 iphone 运行时创建 NSMutableArrays

> ID：12054275
> 
> 赞同：0
> 
> 时间：2012-08-21T11:53:38.593
> 
> 标签：iphone, for-loop, nsarray

在我的一个应用程序中，我必须在需要时在运行时创建数组。如下：

```
for(int i=0;i<10;i++)
{
   NSMutableArray *array1 = [[NSMutableArray alloc] init];
} 
```

意味着我想根据 i 值创建数组，而不是创建像 array1 这样的单个数组。就像在 for 循环中满足条件一样。

新数组就像 array0,array1,array2,array3,array4....等

如果有人知道，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:56:20.590

如何创建一个数组数组？喜欢：

```
NSMutableArray *array = [NSMutableArray arrayWithCapacity:10];
for (int i = 0; i < 10; i++) {
     [array addObject:[NSMutableArray array]];
}

//get array 0
NSMutableArray *array0 = [array objectAtIndex:0];

//get array 1
NSMutableArray *array1 = [array objectAtIndex:1];

//get array i

NSMutableArray *arrayI = [array objectAtIndex:i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:01:14.283

听起来您想根据命名约定访问一堆不同的数组：数组“i”。您不能真正创建这样的动态变量，但您可以创建字符串并将这些数组存储在 a`NSMutableDictionary`中以便于检索。

```
NSUInteger count = 10;
NSMutableDictionary *arrays = [NSMutableDictionary dictionaryWithCapacity:count];
for (int i = 0; i < count; i++){
    [arrays setObject:[[NSMutableArray alloc] init] forKey:[NSString stringWithFormat: @"array%i", i];
} 
```

现在，当您要访问特定数组时，可以使用：

```
NSMutableArray *array1 = [arrays objectForKey:@"array1"]; 
```

# c# - 如何在EF中将多对多关系更改为多对多关系

> ID：12054276
> 
> 赞同：0
> 
> 时间：2012-08-21T11:53:39.623
> 
> 标签：c#, .net, entity-framework

我在网上有一个公司的简单目录。它由包含项目的类别组成。他们现在有一些适合两个类别的项目，并希望在两个类别中显示一个项目。

目前模型看起来像这样

```
public class Category {
    public virtual ICollection<Item> Items { get; set; }
}

public class Item {
    /* No reference to no category */
} 
```

很久以前生成的数据库将项目表中的类别链接起来。所以现在如果我在最后一个类别中添加一个项目，我添加了“计数”。

我想在不丢失任何数据的情况下更改它。我该怎么做？请注意，我可以更改我喜欢的数据库结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:21:57.673

您需要创建一个新表

```
ItemCategories 
   ItemID,
   CategoryID 
```

并将关系添加到 Item 和 Category 表

然后使用每个项目的 categoryID 填充此表

即（在 SQL 中）

```
Insert ItemCategories (ItemID, CategoryID)
select itemid, categoryid from items 
```

然后从 Items 表中删除 CategoryID，并重新生成模型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:50:40.983

我最终创建了数据库的备份并强制使用 dataloss 更新数据库并使用

```
 modelBuilder
            .Entity<Category>()
            .HasMany(c => c.Items)
            .WithMany()
            ; 
```

然后创建一个 sql-script 将数据丢失插入到正确的表中

# html - 如何为 div 中的所有粗体文本指定字体大小？

> ID：12054278
> 
> 赞同：1
> 
> 时间：2012-08-21T11:53:41.310
> 
> 标签：html, css

我有 div，包含一些 html 格式的文本，例如`normal, <b>bold</b>, <i>italic</i>`. 而且我只需要更改该 div 中所有粗体文本的字体大小。

所以问题是如何在 html/css 或者 js 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T11:55:33.443

```
div.foo b, div.foo strong {
  font-size: 1.2em
} 
```

如果您使用的是内联样式，例如`<i style="font-weight:bold">`case 会更复杂。

然后你必须使用 jQuery+CSS

```
$('div.foo *[style=font-weight:bold]').addClass('myFontSize');

div.foo .myFontSize {
  font-size: 1.2em;
} 
```

但请注意，这不是一个好习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:56:38.513

```
div#divid b { font-size: 18px; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:00:29.803

您可以将元素选择器用作：

```
#divId b
{
font-size:1.1em;
//what ever you want also  
} 
```

# sql - 需要帮助破译此 SQL 代码

> ID：12054280
> 
> 赞同：0
> 
> 时间：2012-08-21T11:53:46.490
> 
> 标签：sql

有人可以简单地解释一下下面的代码吗结果？

谢谢这里....

```
drop table selection_all_journey  purge;   
create table selection_all_journey  as        

select  distinct
    ca.activity_id,
    ca.campaign_code,
    --ca.agent_activity_description,

    case when sl.filter3 = 'DB' then 'RES'
         when sl.filter3 = 'SB' then 'EON'
         when ca.agent_activity_description = 'Additional DM' then 'Trial 6 - DM'
            else ca.agent_activity_description end as agent_activity_description,

    case when ca.channel_id = 'DM' then 'Direct Mail'
         when ca.channel_id = 'EM' then 'Email'
         when ca.channel_id = 'TS' then 'Outbound_Calling'
            else ca.channel_id end as channel_id,

    sl.ice_customer_id,
    sl.account_reference,
    sl.load_date,
    sl.mail_date,
    sl.filter1

from    cam.campaign_activity ca 

join  cam.selection_log sl
    on  ca .activity_id = sl.activity_id  [ OK ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:01:04.203

用 SQL 做的最好的事情是查看底层表；通常，JOIN 条件或 WHERE 子句会让您深入了解过程的作者如何理解表之间的关系。

所以，从：

```
from    cam.campaign_activity ca 

join  cam.selection_log sl on  ca .activity_id = sl.activity_id 
```

这就是所谓的[INNER JOIN](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)。

作者的意图是从中获取所有行的列表，`campaign_activity`其中包含匹配的行`selection_log`因此此查询将根据具有匹配的活动 ID 获取选择日志中具有匹配行的所有行。

Jeff Atwood 在[此处对 SQL JOIN](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)进行了很好的介绍。

下一部分是考虑 SELECT 列表。

这里有两件事应该让你停下来思考；首先是使用[DISTINCT](http://www.techonthenet.com/sql/distinct.php)。这将过滤掉重复的记录。如此有效，如果基础数据中有两行具有完全相同的值，则输出将仅包含其中一行。

二是[CASE](http://www.tizag.com/sqlTutorial/sqlcase.php)语句的使用。作者在这里为数据添加了额外的含义；他们的意思是，例如：

> 当 filter3 字段为字符串“SB”时，查询应返回“EON”。

频道 ID 也是如此。

当人们想要将数据库字段转换为对查看查询结果的人来说有意义的值时，他们通常会这样做。他们还经常使用它来将结果值组合在一起。

目前的查询相当简单。如果我不得不猜测的话，我会说它带回了一个列表，其中列出了在许多客户的营销活动中发生的不同活动。

一旦您了解了架构和意图，剩下的就是 SQL。

我投票结束，因为这个问题太本地化了，但我希望这能帮助你理解架构和查询！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:04:15.643

基本上，您正在从两个表中选择记录`cam.campaign_activity`，`cam.selection_log`并且您正在对`activity_id`. An`INNER JOIN`仅生成与两个表都匹配的记录集。（参见[JOIN 的视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)）

`CASE`声明解释说：

首先`CASE`：

```
case when sl.filter3 = 'DB' then 'RES'
     when sl.filter3 = 'SB' then 'EON'
     when ca.agent_activity_description = 'Additional DM' then 'Trial 6 - DM'
        else ca.agent_activity_description end as agent_activity_description 
```

这告诉你要为`agent_activity_description`.

*   如果`sl.filter3 = 'DB'`那么值是`'RES'`
*   如果`sl.filter3 = 'SB'`那么值是`'EOS'`
*   如果`ca.agent_activity_description = 'Additional DM'`那么该值为“试用 6 - DM”
*   如果它不符合任何这些标准，那么您将使用`ca.agent_activity_description`

第二`CASE`：

```
case when ca.channel_id = 'DM' then 'Direct Mail'
     when ca.channel_id = 'EM' then 'Email'
     when ca.channel_id = 'TS' then 'Outbound_Calling'
        else ca.channel_id end as channel_id, 
```

这告诉你要为`channel_id`.

*   如果`ca.channel_id = 'DM'`那么值是`'Direct Mail'`
*   如果`ca.channel_id = 'EM'`那么值是`'Email'`
*   如果`ca.channel_id = 'TS'`那么该值为“Outbound_Calling”
*   如果它不符合任何这些标准，那么您将使用`ca.channel_id`

# blackberry - Eclipse 无法检测到黑莓设备

> ID：12054281
> 
> 赞同：0
> 
> 时间：2012-08-21T11:53:50.280
> 
> 标签：blackberry, blackberry-eclipse-plugin

Eclipse 插件：BlackBerry_JDE_PluginFull_1.5.2_indigo

设备：黑莓曲线 9315 / 9320，软件版本 - 7.1 Bundle 1319。我还安装了 9320 的模拟器

打包、签名过程没有显示任何错误。

当我执行“在设备上加载项目”或 Debug 时，插件显示 - 未检测到设备。

桌面软件检测到设备。

我已经阅读了一些关于 SO 的解决方案，但似乎都没有解决这个问题。在此[链接](http://us.blackberry.com/sites/developers/resources/simulators.html)上，“选择您的智能手机”和“选择您的操作系统”下拉菜单是空的，我在哪里可以获得通用模拟器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:44:53.273

可以再试试模拟器下载[链接](http://us.blackberry.com/sites/developers/resources/simulators.html)吗？它似乎对我有用。

# windows - recvfrom 返回 -1 但是 WSAGetLastError() 返回 0

> ID：12054282
> 
> 赞同：-2
> 
> 时间：2012-08-21T11:53:52.930
> 
> 标签：windows, sockets, udp

在远程套接字关闭时从 UDP 套接字接收数据期间，理想情况下它应该返回“ICMP 目标主机不可达”数据。

我在 Windows 7 操作系统和基于 VC2010 构建的应用程序上进行了相同的测试。

每当设置 FD_READ 事件并调用 recvfrom() 函数时，它就会返回 SOCKET_ERROR 并且 WSAGetLastError() 返回错误代码为 0，这意味着“操作已成功完成”，但是它应该返回错误代码为“WSAECONNRESET”或应该成功读取 ICMP 数据。

请建议如何摆脱它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:12:17.023

你错了（可能是从 TCP 的角度思考）——远程端没有传达它的 UDP 套接字以任何方式关闭。仅当您向没有特定端口绑定的远程端*发送*某些内容时，才会生成 ICMP 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:10:26.483

这里有几个错误。

1.  从对等方已关闭的 UDP 套接字读取应该无限期阻塞或超时。

2.  UDP 中没有 RST 数据包或 ECONNRESET：这是 TCP 现象。

3.  尝试接收时不会出现“无法到达的目标”，仅在发送时才会出现。UDP 是一种无连接协议：读取时不存在对等端被关闭的固有意识。

# java - scala/akka 性能与 java 7 fork/join

> ID：12054283
> 
> 赞同：5
> 
> 时间：2012-08-21T11:53:56.460
> 
> 标签：java, performance, parallel-processing, akka, fork-join

我是 Scala/Akka 的新手，虽然我非常熟悉基于角色的建模的概念。我正在尝试并行化现有代码以获得更好的性能，我有两个版本：一个在 Scala/Akka 中，一个在 Java 7 的 ForkJoinPool 中。

我原以为基于actor的方法应该更快，但结果恰恰相反。Scala/Akka 大约需要 20 秒，而 Java fork/join 大约需要 17 秒。

我想知道akka本质上是否较慢？或者可能是因为我在两个实现中都使用了用普通 Java 编写的现有代码中的类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T12:04:46.697

Akka 在其 Actors 框架的一些实现中使用了 ForkJoinPool（请参阅[Java 7 ForkJoinTask 和 Akka 2.0](https://stackoverflow.com/questions/9020526/java-7-forkjointask-and-akka-2-0)），因此运行时预计会更慢。相反，它在开发人员方面更容易使用，您可以选择您喜欢的方面：开发速度或运行速度！

对于第二个问题，您可能希望将其拆分为另一个 SO 问题。

# android - 如何模拟这种半过渡效果？（安卓）

> ID：12054284
> 
> 赞同：0
> 
> 时间：2012-08-21T11:53:56.163
> 
> 标签：android, transition

所以我想到了一个更新我的应用程序的想法，但我不知道如何在代码中实现这个功能。

它实际上不是一个新的。你可以在印象笔记和海豚浏览器中看到它。当用户滑动视图时，当前视图将被部分覆盖，新的选项视图将成为活动视图。这是一段视频：[http](http://www.youtube.com/watch?v=Ag_IGEgAa9M) ://www.youtube.com/watch?v= Ag_IGEgAa9M 刚开始。

你不需要给我具体的代码，只要大致的想法和使用哪些类就可以了。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:29:53.803

检查他的代码，我认为这至少会对您有所帮助

Boolean bol=false;// 检查视图是否可见//在此处设置要设置动画的视图我已将其设置为 vv

## 根据您的意愿在鼠标移动时启动它

如果（bol）{

```
 vv.setAnimation(inFromLeftAnimation());
                          vv.setVisibility(vv.VISIBLE);
                    } else {
                        vv.setAnimation(outToLeftAnimation());

                        vv.setVisibility(vv.GONE);
                    }
                bol = !bol;

                } 
```

* * *

这是动画部分

```
 public static Animation inFromLeftAnimation() {
     Animation inFromLeft = new TranslateAnimation(
     Animation.RELATIVE_TO_PARENT,  -1.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
     Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
     );
     inFromLeft.setDuration(350);
     inFromLeft.setInterpolator(new AccelerateInterpolator());
     return inFromLeft;
     }
public static Animation outToLeftAnimation() {
    Animation outtoLeft = new TranslateAnimation(
     Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  -1.0f,
     Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
    );
    outtoLeft.setDuration(350);
    outtoLeft.setInterpolator(new AccelerateInterpolator());
    return outtoLeft;
    } 
```

这不是最好的方法，或者您可以尝试编辑滑动抽屉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:44:32.680

这是一个类似的[问题](https://stackoverflow.com/questions/11434457/android-fly-in-menu-shadow)。[Cyril Mottier 在飞入式菜单上的博客](http://android.cyrilmottier.com/?p=658)也详细介绍了实现。

# iphone - UIImageView animationDuration 缓存延迟

> ID：12054286
> 
> 赞同：0
> 
> 时间：2012-08-21T11:54:07.300
> 
> 标签：iphone, objective-c, ios, caching, uiimageview

我希望在动画停止播放`UILabel`的确切时刻更新 a 。`UIImageView`

我在这方面的尝试是使用 -

```
[self performSelector:@selector(updateLabels) withObject:nil afterDelay:imageView.animationDuration]; 
```

`updateLabels`更新标签的方法在哪里。

这不适用于前几个动画。但是，它在前 3 或 4 次播放后确实有效。

我`imageNamed`用来填充`NSArray`保存动画图像的那个。根据我的研究，我注意到`imageNamed`缓存对象。所以我假设前 3 或 4 次运行的滞后是由于缓存的滞后。

有没有办法克服这个？（最好不要改变 using `imageNamed`，正如我所说的，它在前 3 或 4 个之后的所有其他动画周期上都可以正常工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:39:37.703

你试过这个吗：（不是更好的实现，但是）//作为例子

在 h.file 中：

```
UIImageView *im; 
```

im .m - 文件：

```
 -(void) viewDidLoad
 {
    [super viewDidLoad];

    im = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
   UIImage *firstIm = [UIImage imageNamed:@"foo.png"];  // example pictures
   UIImage *secondIm = [UIImage imageNamed:@"bar.png"];
   im.animationImages = [NSArray arrayWithObject:firstIm, secondIm, nil];
   im.animationDuration = 1.0;
   im.animationRepeatCount = 4;
   [im startAnimating];
   [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateLabels) userInfo:nil repeats:YES];

}

-(void) updateLabels
{
   if (![im isAnimating]])
   {
      //Update your label
   }
} 
```

它使用 -imageNamed 图片，但在这种情况下，不能更好地检查结束动画。无论如何，它可能对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:02:24.103

添加`animationDidStop:`在动画停止时执行操作的方法。

```
 - (void)animationDidStop:(CAAnimation*)animation finished:(BOOL)finished 
 {
    //Update your label
 } 
```

注意不要忘记添加`setDelegate`到`self``uiimageview.animation`

# java - 对任何类型的对象进行排序，java

> ID：12054287
> 
> 赞同：1
> 
> 时间：2012-08-21T11:54:09.857
> 
> 标签：java, arrays, sorting

我试图更改以下代码中的排序方法以对任何类型的对象进行排序，而不仅仅是字符串，但有点难过，欢迎所有建议。

```
class SortNames {

static void sort(String[] s) {
    for (int i = 0; i<s.length; i++) {
        for (int j = i+1; j < s.length; j++) {
            if (s[i].compareTo(s[j])>0) {
                String t;
                t = s[i]; s[i] = s[j]; s[j] = t;
            }
        }
    }
}

public static void main(String[] args) {
    String[] names = {"Pete","Jill","May","Anne","Tim"};             
    sort(names);
    for (int i=0; i<names.length; i++) 
        System.out.println(names[i]);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:56:57.520

变成，然后变成`SortNames`，这是如何工作的：`SortNames<T extends Comparable<? super T>>``String[]``T[]`[`Collections.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)

```
public class SortNames<T extends Comparable<? super T>> {
    public void sort(T[] s) {
        for (int i = 0; i<s.length; i++) {
            for (int j = i+1; j < s.length; j++) {
                if (s[i].compareTo(s[j])>0) {
                    T t = s[i]; s[i] = s[j]; s[j] = t;
                }
            }
        }
    }
    // or static <T extends Comparable<? super T>> void, for static methods
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T12:02:53.730

如果要对数组进行排序，可以使用`Arrays.sort(yourArray);`.

如果你真的想用你的算法重新实现它（假设它有效），你只需要改变一些事情：

```
static <T extends Comparable<? super T>> void sort(T[] s) {
    for (int i = 0; i < s.length; i++) {
        for (int j = i + 1; j < s.length; j++) {
            if (s[i].compareTo(s[j]) > 0) {
                T t;
                t = s[i];
                s[i] = s[j];
                s[j] = t;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T07:35:10.693

```
class City {
   public static void main (String args[])
   { 
     int i,j;
     String temp;
     String s[] = new String[6];
     for(i=0; i<6; i++)
       s[i]=args[i];
     for(i=0;i<6;i++) {
       for(j=0;j<6-i-1;j++) {
         if(s[j].compareTo(s[j+1])>0)
         {
           temp=s[j];
           s[j]=s[j+1];
           s[j+1]=temp;
         } 
       }
     }
     for(i=0; i<6; i++) {
       System.out.println(s[i]);
     }
   }
} 
```

这个概念可以用于对任意 6 个字符串进行排序（字符串的数量可以由程序员增加）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:00:27.090

您正在接受 String[] 排序方法，那么它将永远不会是通用的。

```
 static void sort(String[] s) 
```

您是否看到集合的排序方法有任何优势。

```
public static <T extends Comparable<? super T>> void sort(List<T> list) {
    Object[] a = list.toArray();
    Arrays.sort(a);
    ListIterator<T> i = list.listIterator();
    for (int j=0; j<a.length; j++) {
        i.next();
        i.set((T)a[j]);
    }
  } 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-21T11:58:58.593

您只需要为需要排序的对象实现可比较的接口，并对上面的代码进行一些更改，以使该代码可用于任何其他对象。

```
class SortNames {

static void sort(Comparable[] s) {
    for (int i = 0; i<s.length; i++) {
        for (int j = i+1; j < s.length; j++) {
            if (s[i].compareTo(s[j])>0) {
                Comparable t;
                t = s[i]; s[i] = s[j]; s[j] = t;
            }
        }
    }
}

public static void main(String[] args) {
    String[] names = {"Pete","Jill","May","Anne","Tim"};             
    sort(names);
    for (int i=0; i<names.length; i++) 
        System.out.println(names[i]);
}
} 
```

# iphone - DatePicker 值即使更改后也不会更改

> ID：12054294
> 
> 赞同：3
> 
> 时间：2012-08-21T11:54:51.463
> 
> 标签：iphone, datepicker, xcode4.2

```
-(IBAction)showDate:(id)sender
{
datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 220, 325, 300)];
datePicker.datePickerMode = UIDatePickerModeDate;
datePicker.hidden = NO;
datePicker.date = [NSDate date];
[datePicker setDate:datePicker.date animated:YES];
[self.view addSubview:datePicker];
}

- (void)setDate:(NSDate *)date animated:(BOOL)animated
{
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"dd/MM/yyyy"];
NSString *str = [df stringFromDate:date];
NSLog(@"String is------:%@",str);
[dateBtn setTitle:str forState:UIControlStateNormal];
} 
```

我已经通过了 Apple 文档中的 UIDatePicker 类参考。基于此，我已经实现了上述代码。当外部方法代码以按钮操作写入时，我只获得按钮上的当前日期，如果我更改 DatePicker，则不会更改日期.

如果我编写如上所述的代码，我什至无法在按钮上获得任何标题。我想，我犯了一个错误的错误，谁能告诉我错误在哪里并详细解释我。

非常感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:02:55.623

我认为您对子类化感到困惑，这是您在这里没有做的事情（也不需要）。您需要设置日期选择器以在日期更改时调用您选择的方法；像这样的东西：

```
[datePicker addTarget:self
               action:@selector(dateChanged:)
     forControlEvents:UIControlEventValueChanged]; 
```

（见[参考](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/instm/UIControl/addTarget:action:forControlEvents:)）。

然后实现方法：

```
- (void)dateChanged:(UIDatePicker*)datePicker {
    NSLog("Date changed: %@", datePicker.date);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T05:44:53.457

试试这个代码：

```
-(void)timepicker:(UIGestureRecognizer *)date{

    CGRect pickerFrame = CGRectMake(0,200,0,0);

    myPicker = [[UIDatePicker alloc] initWithFrame:pickerFrame];
    [myPicker setBackgroundColor:[UIColor groupTableViewBackgroundColor]];
    [myPicker addTarget:self action:@selector(pickerChanged:)               forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:myPicker];

}
- (void)pickerChanged:(id)sender{

    NSLog(@"value: %@",[sender date]);

    NSDateFormatter *df = [[NSDateFormatter alloc] init];

    df.dateStyle = NSDateFormatterMediumStyle;

    NSString *date=[NSString stringWithFormat:@"%@",[sender date]];

    NSLog(@"value1: %@",date);

   } 
```

# asp.net - 如何将 kendo Ui 下拉选择值的 ID 传递到控制器上？

> ID：12054298
> 
> 赞同：4
> 
> 时间：2012-08-21T11:54:56.283
> 
> 标签：asp.net, asp.net-mvc, kendo-ui

我正在尝试创建一个使用 KENDO UI Dropdown 的应用程序。问题是我想将视图中的值更新到数据库中。在下拉列表中选择任何值时，与其关联的 ID 应传递到控制器以进行所需的数据库更新。但是在这里，下拉列表中任何选择的 ID 都会将“null”作为值传递给控制器​​。

我的观点

```
@using Kendo.Mvc.UI
@model ExamplekendoDropdown.Models.FacilityGroup

@{
    ViewBag.Title = "FacilityGroup";
}

<h2>FacilityGroup</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>FacilityGroup</legend>

        <div id="RegionName"  class="editor-label">
            @Html.LabelFor(model => model.RegionId)
        </div>
        <div class="editor-field">
           @* @Html.EditorFor(model => model.RegionName)*@
           @(Html.Kendo().DropDownList()
          .Name("Region")
          .DataTextField("RegionName")
          .DataValueField("RegionId")
          .DataSource(source =>
          {
              source.Read(read =>
              {
                  read.Action("GetRegion", "Fill");
              });

          })
    )
            @Html.ValidationMessageFor(model => model.RegionId)
        </div>
     <div id="Rest">
@*<form method="post" action='@Url.Action("Submit")' style="width:45%">
    <div>
        @(Html.Kendo().Upload()
            .Name("files")
        )
        <p>
            <input type="submit" value="Submit" class="k-button" />
        </p>
    </div>
</form>*@

        <div class="editor-label">
            @Html.LabelFor(model => model.FaclityGroupName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FaclityGroupName)
            @Html.ValidationMessageFor(model => model.FaclityGroupName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.status)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.status)
            @Html.ValidationMessageFor(model => model.status)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.CreationDate)
        </div>
        <div class="editor-field">
          @*  @Html.EditorFor(model => model.CreationDate)*@
          @(Html.Kendo().DatePicker()
              .Name("datepicker")
              .Value("17/08/2011")
              .HtmlAttributes(new { style = "width:150px" })
        )
            @Html.ValidationMessageFor(model => model.CreationDate)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
        </div>

    </fieldset>
}
        <div>
        @Html.ActionLink("See the List", "List")
        </div>
<div>
    @Html.ActionLink("Back to List", "About")
</div>
<script type="text/javascript">
    $(document).ready(function () {

        $("#RegionName").click(function () {
            $("#Rest").show();
        });
    });
</script>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

控制器 ：-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using ExamplekendoDropdown.Models;

namespace ExamplekendoDropdown.Controllers
{
    public class FacilityGroupController : Controller
    {
        //
        // GET: /FacilityGroup/

        public ActionResult FacilityGroup()
        {
            return View();
        }
        [HttpPost]
        public ActionResult FacilityGroup(FacilityGroup objadd)
        {
            AMIEntities1 obj1 = new AMIEntities1();
            Facility objtbl = new Facility();

                objtbl.RegionId = Convert.ToInt16(objadd.RegionId);
                objtbl.FaclityGroupName = objadd.FaclityGroupName.ToString();
                objtbl.Status = objadd.status;
                objtbl.CreationDate = objadd.CreationDate;

                obj1.AddToFacilities(objtbl);
                obj1.SaveChanges();
                obj1.AcceptAllChanges();

            return View();
        }
    }
} 
```

请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:49:49.360

我建议您使用 DropDownListFor() ，然后确保 .Name 与属性名称匹配。在你的情况下：

```
 @(Html.Kendo().DropDownListFor(model => model.RegionId)
      .Name("RegionId")
      .DataTextField("RegionName")
      .DataValueField("RegionId")
      .DataSource(source =>
      {
          source.Read(read =>
          {
              read.Action("GetRegion", "Fill");
          });
      })
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:44:19.910

晚上好，

使用下拉列表填充的变量类型可能存在问题（从这里开始，称为支持变量）。

我以前遇到过你的问题，问题是我的支持变量是一个可为空的 int（例如 int？）。当您拥有数据类型“int”的属性时？作为您的支持变量，该值将始终为 HttpPost 控制器操作方法的 null - 少做一件事：在将属性传递给视图之前为其分配一个值。例如，我的 ID 通常从 1 开始并增加，因此我通常将可为空的支持变量分配给 0，然后再将其发送到视图。这样，当页面提交时，模型包含下拉列表的选定值，而不是 null，或者 0。

如果在视图中属性为空，那么 Kendo 下拉菜单似乎会提交一个空值。

我刚刚注意到你没有像上面的海报推荐的那样使用“DropDownListFor”..所以我认为这对你没有多大帮助，不幸的是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T04:08:24.233

我首先将下拉名称重命名为“RegionId”，正如 Nick Pearce 的回答中所建议的那样。

然后，您可能需要在下拉列表中添加如下内容：

```
.Events(events =>
{
    events.Save("dropdown_Save");
}) 
```

然后这个 JavaScript 函数：

```
<script type="text/Javascript">
    function dropdown_Save(e) {
        var regionId = $("#RegionId").data().kendoDropDownList.value();
        e.model.set("RegionId", regionId);
    }
</script> 
```

这样做对我有用，可以在剑道网格中创建一个新行。据我了解，如果不更改它们的值，如果它们用于可空值，显然有一个已知的 Kendo 错误。请参阅此站点上“您已完成”的上方： [http ://www.sitereq.com/post/kendo-mvc-dropdown-lists-inside-inline-kendo-mvc-grids](http://www.sitereq.com/post/kendo-mvc-dropdown-lists-inside-inline-kendo-mvc-grids)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T12:29:30.687

有两种获取值的方法：

Way1 : 在 kendo 下拉菜单中添加 .Value(model => model.FieldName) ，该值会自动绑定。

方式2：转到控制器：

```
public ActionResult Create(FromCollection collection)
{
    var id = collection["ComboName"]; // Here you can get the selected value

    return View();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T18:27:57.980

我遇到了同样的问题，因为我使用的是 ViewModel，所以我无法转到 DropDownListFor。要获取选定的值，您将不得不进入 ModelState。所以你的代码看起来像这样：

```
[HttpPost]
    public ActionResult FacilityGroup(FacilityGroup objadd, string Region)
    {
        AMIEntities1 obj1 = new AMIEntities1();
        Facility objtbl = new Facility();

            objtbl.RegionId = int.Parse(Region);
            objtbl.FaclityGroupName = objadd.FaclityGroupName.ToString();
            objtbl.Status = objadd.status;
            objtbl.CreationDate = objadd.CreationDate;

            obj1.AddToFacilities(objtbl);
            obj1.SaveChanges();
            obj1.AcceptAllChanges();

        return View(); 
```

由于在 HttpPost 期间视图将完整的表单发送回控制器，并且由于 Html.Kendo().DropDownList 作为输入呈现，因此字符串“YourControlName”值将是从下拉列表中选择的值。

我意识到这个问题已经超过 8 个月了，但我希望这能帮助像我这样在任何地方都找不到答案的人。

# sql - 查询 1-Many 表

> ID：12054299
> 
> 赞同：0
> 
> 时间：2012-08-21T11:54:59.807
> 
> 标签：sql, sql-server

我有两张表，为简单起见，我将用一个简单的问题来说明。

Product 表包含具有两列的产品定义

```
Product ID -- Product Name 
```

产品详细信息表包含存储为垂直或扩展属性的产品详细信息

```
Product Detail ID -- Product Number -- Key ID -- Value ID 
```

假设我有另外两个参考表，其中一个用于键，另一个用于值。

键表

```
1 -- Price
2 -- Color 
```

值表

```
1 -- Red
2 -- Blue
3 -- 10 $
4 -- 20$ 
```

我将 Product Details 表用作垂直表来为产品添加任意数量的属性。

现在来搜索记录！

例如，我需要获取“所有”产品详细信息列匹配的所有产品。

我有以下数据

产品表数据

```
Prod#1   XXX
Prod#2   YYY 
```

产品详情表数据

```
1  Prod#1  1  4
2  Prod#1  2  1 
```

第 1 行：产品 1 具有值为 20$ 的价格键 第 2 行：产品 1 具有值为红色的颜色键

现在需要执行以下查询：

```
1- Get Products with Key "Price" having a price > 10$
2- Get Products with a Key "Price" > 10 AND "Color" is Red 
```

这在 TSQL 中的单个查询中可行吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:11:05.080

您只需 1 个查询即可完成这项工作，如下所示：

```
SELECT Products.ProductId, Products.ProductName FROM Products
INNER JOIN ProductDetails ON Products.ProductId = ProductDetails.ProductId
INNER JOIN Keys ON ProductDetails.KeyId = Keys.Id
INNER JOIN Values ON ProductDetails.ValueId = Values.Id
WHERE Keys.Name = 'Price' AND Values.Value > @Value 
```

问题是 Values 表的数据类型，必须定义 Value 字段。如果您选择字符串，那么如果要将其与整数值进行比较，则必须将其转换为整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:09:28.320

像这样的东西：

```
select
  distinct p.product_id
from
  products p
  inner join product_details pd_price on p.product_id = pd_price.product_id
  inner join keys as k_price on pd_price.key_id = k_price.key_id
  inner join values as v_price on pd_price.value_id = v_price.value_id
  inner join product_details pd_color on p.product_id = pd_color.product_id
  inner join keys as k_color on pd_color.key_id = k_color.key_id
  inner join values as v_color on pd_color.value_id = v_color.value_id
where
  k_price.name = 'Price' and v_price.value > 10 and
  k_color.name = 'Color' and v_color.value = 'Red' 
```

# ios - NSMutableArray 使应用程序崩溃

> ID：12054302
> 
> 赞同：0
> 
> 时间：2012-08-21T11:55:05.627
> 
> 标签：ios, xcode

在我的应用程序中，我有许多可变数组，我用 int i 填充了一个 for 循环；我 = 0; 我++；该应用程序工作正常，但现在它开始崩溃，出现以下错误：

> *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]' *** First throw call stack: (0x32bb888f 0x34b5d259 0x32b019db 0xb1f07 0x372a160d 0x32b8ca33 0x32b8c699 0x32b8b26f 0x32b0e4a5 0x32b0e36d 0x32c5b439 0x350edcd5 0xa8e45 0xa8de0）终止称为抛出异常（lldb）

问题是我不知道是哪个数组导致了问题，而且我有超过 12 个数组。所以我不知道如何解决它。我尝试使用 Zombie objects 功能，但它并没有告诉我哪个数组引起了麻烦。

我也无法理解，因为在代码中我首先这样做：

```
[messagename removeAllObjects];
[messageframe removeAllObjects];
[messagetext removeAllObjects];
[MapViewArray removeAllObjects];
[DeleteButtonArray removeAllObjects];
[DeleteButtonArray removeAllObjects];
[DeleteButtonArray removeAllObjects];

MapViewArray = [[NSMutableArray alloc]init];
messagename = [[NSMutableArray alloc]init];
messageframe = [[NSMutableArray alloc]init];
messagetext = [[NSMutableArray alloc]init];
DeleteButtonArray = [[NSMutableArray alloc]init];
imageArray = [[NSMutableArray alloc]init];
messageframe = [[NSMutableArray alloc]init]; 
```

然后我只以这种方式添加对象：

```
 [messagename addObject: textname]; 
```

我什至不访问某个索引！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:12:10.603

@Robin van Dijke 说得好，您可以转到 XCode 中的断点导航器面板并设置一个异常断点，该断点将在异常即将上升时中断您的程序。

在删除元素之前还要检查数组是否为零。IE。

如果（消息名！= 无）{

[消息名称 removeAllObjects];

} 别的 {

messagename = [[NSMutableArray alloc]init];

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:03:38.820

您正在尝试从不存在的数组中获取索引。“超出范围 [0,0]”。可能在您将项目插入数组的循环中，而不是在您发布的代码中。

# python - 如何从 Python 中的 2 个字典创建一个字典？

> ID：12054307
> 
> 赞同：5
> 
> 时间：2012-08-21T11:55:27.847
> 
> 标签：python, dictionary

我现在正在处理 Python 字典。我写了一段代码：

```
import random

categories = {1 : "Antics", 2 : "Tickets", 3: "Moviez",
              4 : "Music", 5 : "Photography", 6 : "Gamez", 7 : "Bookz",
              8 : "Jewelry", 9 : "Computers", 10 : "Clothes"}

items = {"Picture" : 1, "Clock" : 1, "Ticket for Mettalica concert" : 2,
         "Ticket for Iron Maiden concert" : 2, "Ticket for Placebo concert" : 2,
         "The pianist" : 3, "Batman" : 3, "Spider-Man" : 3,
         "WoW" : 6, "Cabal" : 6, "Diablo 3" : 6, "Diablo 2" : 6,
         "Thinking in Java" : 7, "Thinking in C++" : 7, "Golden ring" : 8,
         "Asus" : 10, "HP" : 10, "Shoes" : 11}

for key, val in categories :
    for k, v in items :
        if key == v :
            print(val, k) 
```

我想创建一个第三个字典，在那里我会喜欢：

```
dictThe3rd = {"Antics" : "Picture", "Antics" : "Clock", "Tickets" : "Ticket for Mettalica concert", "Ticket" : "Ticket for Iron Maiden concert", "Ticket" : "Ticket for Placebo concert", ...} 
```

等等。

这该怎么做？我的代码显示：

> ```
> test.py, line 14, in <module>
>     for key, val in categories :
> TypeError: 'int' object is not iterable 
> ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T12:01:07.293

如果你使用 dict 作为迭代器，它只会产生它的键，而不是键和值的元组。您必须使用`categories.items()`（或者`categories.iteritems()`如果您只使用 Python 2.x）来获取这些元组：

```
for key, val in categories.items() :
    for k, v in items.items() :
        if key == v :
            print(val, k) 
```

您可以使用 dict 理解来获取一个以类别名称为键、该类别中的所有项目作为值的 dict：

```
>>> dict3 = { catname : [ item for item, itemcat in items.items() if itemcat == cat  ] for cat, catname in categories.items()  }
>>> dict3
{'Antics': ['Picture', 'Clock'],
'Bookz': ['Thinking in C++', 'Thinking in Java'],
'Clothes': ['Asus', 'HP'],
'Computers': [],
'Gamez': ['Diablo 3', 'Diablo 2', 'Cabal', 'WoW'],
'Jewelry': ['Golden ring'],
'Moviez': ['The pianist', 'Batman', 'Spider-Man'],
'Music': [],
'Photography': [],
'Tickets': ['Ticket for Mettalica concert',
'Ticket for Placebo concert',
'Ticket for Iron Maiden concert']} 
```

解释：

方括号中的内部理解将列出所有类别为`cat`. 外部理解将遍历所有类别键和名称，将类别名称设置为新的 dict 键，将内部理解设置为值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:01:40.073

将您的代码更改为：

```
for key, val in categories.iteritems():
    for k, v in items.iteritems():
        if key == v:
            print(val, k) 
```

通过这种方式，您可以使用 itemiterator 迭代键/值对，这会产生比`items()`大型字典更好的性能。

你想要的可能是这样的：

```
import collections
dictThe3rd=collections.defaultdict(set)
for key, val in categories.iteritems():
    for k, v in items.iteritems():
        if key == v:
            dictThe3rd[val].add(k)
print dictThe3rd 
```

产生

```
{'Tickets': set(['Ticket for Mettalica concert', 'Ticket for Placebo concert',
    'Ticket for Iron Maiden concert']),
'Jewelry': set(['Golden ring']),
'Antics': set(['Picture', 'Clock']),
'Moviez': set(['Batman', 'Spider-Man', 'The pianist']),
'Bookz': set(['Thinking in Java', 'Thinking in C++']),
'Gamez': set(['Diablo 3', 'Diablo 2', 'WoW', 'Cabal']),
'Clothes': set(['Asus', 'HP'])} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:07:20.173

您应该`items()`在 Stefan 解决方案中使用 as ，但如果您想构建新字典而不是打印创建列表或附加到它：

```
dictThe3rd = {}
for key, val in categories.items():
    for k, v in items.items():
        if key == v :
            #print(val, k)
            try:
                dictThe3rd[val].append(k)
            except KeyError:
                dictThe3rd[val] = [k]

print(dictThe3rd) 
```

# ruby - 使用厨师食谱更新 .bashrc

> ID：12054312
> 
> 赞同：5
> 
> 时间：2012-08-21T11:55:49.903
> 
> 标签：ruby, chef-infra

我正在编写使用 chef-solo 安装 jsk 的练习配方，我需要更新 .bashrc 文件以设置`JAVA_HOME`和`PATH`变量。我不知道该怎么做。谁能告诉我该怎么做。我的一些代码是..

```
file "/home/user/.bashrc" do
    owner   "root"
    #something goes here.... i don't know what. but i write
    #%{bash -i -c "source /etc/bash/bashrc && bashrc update"}

    content "JAVA_HOME=/usr/java/jdk1.1.0.05"
    content "PATH=$PATH:JAVA_HOME/bin"

  end 
```

我不明白`command`%{bash -i -c "source /etc/bash/bashrc && bashrc update"} 是什么意思。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T16:02:10.300

首先，`/etc/skel/`是创建新用户时复制的目录。更改 bashrc 不会影响您已经存在的用户，所以您可能想更改其他文件？

其次，注释掉的命令会启动一个新的 bash shell，并在该 shell 源中`/etc/bash/bashrc`（重新加载它），然后执行`bashrc update`. 我不知道那是做什么的，它可能是你机器上的一个 shell 脚本？
你为什么要这么称呼它？它甚至不引用您更改的文件。

第三，您调用`content`了两次，这意味着该文件中只有第二行。

您可能想要做的是：

创建一个文件`files/default/bashrc`并将整个 bashrc（包括 Java 行）复制到其中。
将上面的代码替换为：

```
file "/home/whateveruseryouwant/.bashrc" do
  owner "whateveruseryouwant"
  group "whateveruseryouwant"
  source "bashrc"
end 
```

# mysql - 从朋友生日的varchar存储日期格式中获取日期

> ID：12054315
> 
> 赞同：0
> 
> 时间：2012-08-21T11:56:02.243
> 
> 标签：mysql

我想从`varchar`存储的日期（例如`12-21-1990`）中获取日期。我可以使用 php`explode`获取当前日期，但我想通过 mysql 获取它。我正在使用这样的查询：

```
$count=mysql_query("SELECT u.fname, u.lname, u.profile_pic, u.uid, u.bday, f.uid, f.friend_id, f.status FROM friend_list f, users_profile u WHERE f.uid = '$id' AND f.status = '1' AND u.uid = f.friend_id "); 
```

上面的查询为我获取了所有详细信息的用户朋友，但我只想获取今天生日的朋友详细信息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:04:21.660

您可以使用 php date function 获取今天的日期，将其分配给变量并检查 u.bday 。像这样：

```
$count=$today = date("m-d-Y");

mysql_query("SELECT u.fname, u.lname, u.profile_pic, u.uid, u.bday, f.uid, f.friend_id, f.status FROM friend_list f, users_profile u WHERE f.uid = '$id' AND f.status = '1' AND u.uid = f.friend_id AND u.bday = $today"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:17:00.253

很简单，您只需要使用 STR_TO_DATE MySQL 函数将您的 varchar 转换为日期：

```
$count=mysql_query("SELECT u.fname, u.lname, u.profile_pic, u.uid, u.bday, f.uid, f.friend_id, f.status FROM friend_list f, users_profile u WHERE f.uid = '$id' AND f.status = '1' AND u.uid = f.friend_id AND STR_TO_DATE(u.bday, '%m-%d-%Y')=DATE_FORMAT(CURDATE().'%m-%d-%Y') "); 
```

但我强烈建议您将 bday 列更改为日期类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:19:26.660

尝试这个 ：

```
date_format(your_friend_birthdate,'%Y-%m-%d')=date_format(now(),'%Y-%m-%d') 
```

完整查询：-

```
 SELECT u.fname, u.lname, u.profile_pic, u.uid, u.bday, f.uid, f.friend_id, f.status FROM 
friend_list f, users_profile u WHERE f.uid = '$id' AND f.status = '1' AND u.uid = f.friend_id 
and month(u.bday)=month(now()) and date(u.bday)=date(now()); 
```

或者

```
SELECT u.fname, u.lname, u.profile_pic, u.uid, u.bday, f.uid, f.friend_id, f.status FROM 
    friend_list f, users_profile u WHERE f.uid = '$id' AND f.status = '1' AND u.uid = f.friend_id 
    and month(u.bday)=month(now()) and day(u.bday)=day(now()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:59:03.203

你好刚刚找到解决方案并想分享它，以便它可以帮助某人。

```
SELECT u.fname, u.lname, u.profile_pic, u.uid, u.bday, f.uid, f.friend_id, f.status FROM 
    friend_list f, users_profile u WHERE f.uid = '3' AND f.status = '1' AND u.uid = f.friend_id 
      and    DAY(STR_TO_DATE(u.bday, '%m-%d-%y')) = DAY(CURDATE()) AND
    MONTH(STR_TO_DATE(u.bday, '%m-%d-%y')) = MONTH(CURDATE()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T12:07:28.803

我会将 bday 列数据类型更改为`DATE`并使用`CUREDATE()`函数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T12:29:31.303

```
SELECT u.fname, u.lname, u.profile_pic, u.uid, u.bday, f.uid, f.friend_id, f.status FROM 
friend_list f, users_profile u WHERE f.uid = '$id' AND f.status = '1' AND u.uid = f.friend_id 
and CAST(CONCAT(SUBSTRING(u.bday,7,11),'/',SUBSTRING( u.bday,1,2 ),'/',SUBSTRING(u.bday,4,2 )) AS DATE) = date_format(now(),'%Y-%m-%d'); 
```

# jquery - 不删除活动标签的 Jquery 文本限制

> ID：12054319
> 
> 赞同：0
> 
> 时间：2012-08-21T11:56:10.263
> 
> 标签：jquery

我目前正在尝试通过使用以下 Jquery 来限制项目中某些动态标题的长度。

**通过@Utkanos 进行编辑改进**

```
$(document).ready(function() {

$(function(){
  $(".newsTitle").each(function(i){
    var len=$(this).text().length;
    if(len>40) // If more than 35 characters then..
    {
      $(this).text($(this).text().substr(0,40)+'...'); // then add ...
      }
    });       
  });
}); 
```

我需要能够限制标题长度，但不要损坏标题周围的链接标签。这可能吗？这是我必须使用的 HTML。

```
<h2 class="newsTitle">
    <a href="/blog/new-story">Lorem Ipsum ameh dolor sit loremip ipsum</a>
</h2> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:57:50.000

改变：

```
$(".newsTitle") 
```

至：

```
$(".newsTitle a") 
```

这样，您就可以正确操作包含文本的节点，而不是也包含锚元素的父节点。

# r - 更改绘图geom_polygon，ggplot的顺序

> ID：12054321
> 
> 赞同：3
> 
> 时间：2012-08-21T11:56:12.730
> 
> 标签：r, ggplot2, data-visualization

我正在使用 R / ggplot 创建一个包含世界地震带的全球地图。我在这里使用修改后的 shapefile：http: [//gmo.gfz-potsdam.de/](http://gmo.gfz-potsdam.de/)。

该地块共有 9 层，4400 多个组。但是，某些层应该有孔，但似乎没有。所以为了解决这个问题，我需要先渲染这些多边形，使它们出现在后面。使用 geom_polygon 时如何更改多边形的渲染顺序？

```
require("rgdal") # requires sp, will use proj.4 if installed
require("maptools")
require("ggplot2")
gpclibPermit() # required for fortify method
require("plyr")

fill_colours <- c("#dddddd", "#8FC463FF", "#46A742FF", "#FFFC00FF", "#F2B212FF", "#E9726AFF", "#D92C50FF", "#FF1B23FF", "#B1681FFF")

eq.shp = readOGR(dsn=".", "PGA_PolygonsPY v2_region")

# Create a discrete scale, there are probably more efficient ways of doing this
eq.shp$MAXVALUE[eq.shp$MAXVALUE==10.0] = 9
eq.shp$MAXVALUE[eq.shp$MAXVALUE== 4.8] = 8
eq.shp$MAXVALUE[eq.shp$MAXVALUE== 4.0] = 7
eq.shp$MAXVALUE[eq.shp$MAXVALUE== 3.2] = 6
eq.shp$MAXVALUE[eq.shp$MAXVALUE== 2.4] = 5
eq.shp$MAXVALUE[eq.shp$MAXVALUE== 1.6] = 4
eq.shp$MAXVALUE[eq.shp$MAXVALUE== 0.8] = 3
eq.shp$MAXVALUE[eq.shp$MAXVALUE== 0.4] = 2
eq.shp$MAXVALUE[eq.shp$MAXVALUE== 0.2] = 1
eq.shp$MAXVALUE  <- sprintf("%d", eq.shp$MAXVALUE)

eq.shp@data$id = rownames(eq.shp@data)
eq.points = fortify(eq.shp, region='id')

# Join the data frames back together
eq.df = join(eq.points, eq.shp@data, by='id')

p <- ggplot()
p <- p + geom_polygon(data = eq.df, aes(long, lat, group=group, fill=MAXVALUE))
p <- p + scale_fill_manual(values=fill_colours) 
p <- p + coord_equal(ratio = 1, xlim=c(65, 85), ylim=c(35, 45))
p 
```

此代码生成以下图。
![ggplot 输出](../Images/1a10881b45233a20c919d155579b91f5.png)

如果将上面的图与原始数据数据（使用 GIS 软件绘制）进行比较，您可以看到以下伪影： - 原始图中的点（Long=77，Lat=42）周围的区域不存在。这是因为棕色多边形最后渲染。- 同样对于周围的大绿色区域（Long=80，Lat=38），它都是黄色的。这是因为黄色多边形是在绿色多边形之后渲染的。- 我不太担心缺少的洞，例如附近的区域（Long=74，Lat=39）。

![来自 GIS 软件的原始数据](../Images/753281e614fb580d2422cfb6cc79a7ba.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:40:03.110

好的，我已经能够解决这个问题了。虽然这是一种解决方法并且渲染时间增加了，但它确实符合我的要求。

我没有尝试使用 ggplot 对多边形的渲染进行排序/重新排序，而是通过使用 for 循环来强制执行此操作，并根据需要渲染图层。

**解决方案：**

替换以下代码：

```
p <- p + geom_polygon(data = eq.df, aes(long, lat, group=group, fill=MAXVALUE)) 
```

具有以下内容：

```
for (i in seq(9, 1, -1)) {
    p <- p + geom_polygon(data = eq.df[eq.df$MAXVALUE==sprintf("%d", i),], aes(long, lat, group=group, fill=MAXVALUE))
} 
```

这会导致多边形按照我希望的顺序呈现。然后我得到与原版非常相似的东西：

![在此处输入图像描述](../Images/530cd910b434aae1246f0d34e241a87e.png)

但是，我可以看到我引入了新问题，有些多边形没有孔，因此渲染它们会导致它们覆盖其他一些层。所以我需要在多边形中创建孔以正确渲染它们。

感谢所有留下评论的人。

**更新：** 上面的解决方案可以重新排序多边形的渲染，但它并不能完全解决根本问题。看来您需要更复杂的算法才能做到这一点。我还尝试按多边形的面积排序，然后按多边形的加权面积排序，但都没有达到理想的解决方案。最终的解决方案将需要一些人工干预。

# objective-c - 实现一堆可以改变大小的视图

> ID：12054322
> 
> 赞同：1
> 
> 时间：2012-08-21T11:56:13.383
> 
> 标签：objective-c, ios, uiview, uiviewcontroller

我想制作一个类似于 Apple 的 Mail App 电子邮件详细信息控制器的 ViewController。有“发件人”、“收件人”等。当我添加新电子邮件时，第一个视图会改变它的大小，堆栈中的所有其他视图也应该改变它们的原点，整个容器视图应该改变它的大小。这个问题有什么漂亮的解决方案吗？请不要将我发送到 Three20 Mail Composer。我已经看过了。我想实现我自己的类似控制器。需要一些代码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:12:28.713

已经公开宣布 iOS6 将有 AutoLayout - 这基本上是为了解决这种事情而设计的。

对于早期版本，这完全取决于您想要它做什么。在简单的情况下，将所有需要下移的视图一起放到一个空白容器 UIView 中。然后，您可以更改该容器视图并为其设置动画，而不必单独移动每个视图。

如果你有很多移动部件，那么这种方法就不能很好地扩展。在这些情况下，我现在倾向于使屏幕的主容器视图成为自定义子类（与默认的普通 UIView 和在视图*控制器*中具有布局逻辑相反）。这个视图子类负责根据要显示的内容，以集中的方法在该屏幕上计算出必要的大小和位置。然后可以`- layoutSubviews`在任何 UIView 动画块中调用该方法。调用它`- layoutSubviews`意味着它也适用于自转。

至于位置的计算：基本上，从顶部向下工作。对于每个视图，计算它需要多高，到它的下邻居的差距是多少，并`y`通过这些数字增加运行值。将`y`下一个视图原点的坐标设置为该运行`y`值，然后添加*其*高度和边距等。完成后，您应该能够使用最终的 y 值作为滚动视图`height`的`contentSize`包含所有这些视图。

# amazon-route53 - AWS Route 53（将 CNAME 更改为 A 记录类型并在 400 个子域中分配 IP 地址）

> ID：12054326
> 
> 赞同：1
> 
> 时间：2012-08-21T11:56:20.950
> 
> 标签：amazon-route53

我有 400 个子域映射到单个 CNAME 记录，现在我想将所有这些记录类型更改为 A 记录并分配 IP 地址，我该如何一次性完成。

Reagrds Jyotir

# eclipse - 无处不在的eclipse键绑定

> ID：12054331
> 
> 赞同：14
> 
> 时间：2012-08-21T11:56:42.200
> 
> 标签：eclipse, keyboard-shortcuts

我想分配一个 Eclipse 快捷键。比如说，`Ctrl`++ `Shift`= `F`“文件搜索”。

我可以在 Window -> Preferences -> General -> Keys -> File Search -> Binding 中分配它：`Ctrl`++`Shift``F`

我还需要选择“何时”。我可以选择“编辑 Java 源”、“编辑 Java 脚本源”等之一。

是否可以指定此快捷键在任何地方都有效？我的意思是我可以在 Eclipse 中做任何事情——编辑 Java、js、xml 等，或者我可以在控制台窗口中查看日志。我将突出显示我要搜索的单词并按`Ctrl`++ ，eclipse 只需要调出“文件搜索”对话框`Shift`。`F`

我们怎样才能做到这一点，而不必将绑定分配给“时间”下拉列表中的每个项目？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T12:02:28.510

尝试将“时间”设置为“在 Windows 中”。我刚刚检查过，密钥绑定在我测试的任何地方都有效......

# android - classcastexception edittext 无法转换为 android.view.viewgroup

> ID：12054332
> 
> 赞同：0
> 
> 时间：2012-08-21T11:56:46.660
> 
> 标签：android, xml

以下是我的 xml 文件的代码

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/editview_scrollview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:filterTouchesWhenObscured="true"
    android:orientation="vertical"
    android:scrollbarAlwaysDrawVerticalTrack="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/userid"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="USER ID"
            android:textSize="8pt" />

        <EditText
            android:id="@+id/edituserid"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@android:drawable/editbox_background"
            android:scrollHorizontally="true"
            android:textColor="#333399" />

        <TextView
            android:id="@+id/usertype"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="USER TYPE"
            android:textSize="8pt" />

        <Spinner
            android:id="@+id/spinner"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:drawSelectorOnTop="true"
            android:entries="@array/spinner" />

        <TextView
            android:id="@+id/company"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="COMPANY"
            android:textSize="8pt" />

        <EditText
            android:id="@+id/editcompany"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:drawable/editbox_background"
            android:textColor="#333399" />

        <TextView
            android:id="@+id/firstname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="FIRST NAME"
            android:textSize="8pt" />

        <EditText
            android:id="@+id/editfirstname"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:drawable/editbox_background"
            android:textColor="#333399" />

        <TextView
            android:id="@+id/lastname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="LAST  NAME"
            android:textSize="8pt" />

        <EditText
            android:id="@+id/editlastname"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:drawable/editbox_background"
            android:textColor="#333399"
             />

        <TextView
            android:id="@+id/encryptionkey"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ENCRYPTION KEY"
            android:textSize="8pt" />

        <EditText
            android:id="@+id/editencryption"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:drawable/editbox_background" >

            <TextView
                android:id="@+id/lasttagupdate"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="LAST TAG UPDATE"
                android:textSize="8pt" />

            <DatePicker
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_marginLeft="10dip"
                android:layout_weight="1"
                android:endYear="2100"
                android:startYear="1900" />

            <Button
                android:id="@+id/ok"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_weight="1"
                android:text="SAVE" />
        </EditText>
    </LinearLayout>

</ScrollView> 
```

和我使用这个布局的文件

```
public class writeRFIDTag extends Activity {
    EditText userId, company, firstName, lastName, encryptionKey;
    Button save;
    Spinner spin;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.rfid_write);
        userId = (EditText) findViewById(R.id.edituserid);
        company = (EditText) findViewById(R.id.editcompany);
        firstName = (EditText) findViewById(R.id.editfirstname);
        lastName = (EditText) findViewById(R.id.editlastname);

    }

} 
```

和我的日志猫

```
08-21 17:14:51.410: E/AndroidRuntime(20353): FATAL EXCEPTION: main
08-21 17:14:51.410: E/AndroidRuntime(20353): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.securityapp/com.example.securityapp.writeRFIDTag}: java.lang.ClassCastException: android.widget.EditText cannot be cast to android.view.ViewGroup
08-21 17:14:51.410: E/AndroidRuntime(20353):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-21 17:14:51.410: E/AndroidRuntime(20353):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-21 17:14:51.410: E/AndroidRuntime(20353):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-21 17:14:51.410: E/AndroidRuntime(20353):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-21 17:14:51.410: E/AndroidRuntime(20353):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 17:14:51.410: E/AndroidRuntime(20353):    at android.os.Looper.loop(Looper.java:137)
08-21 17:14:51.410: E/AndroidRuntime(20353):    at android.app.ActivityThread.main(ActivityThread.java:4424) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:13:39.237

EditText 不是 ViewGroup。您可以使用不同的布局（如RelativeLayout）重叠放置其他组件。

```
<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
<EditText
        android:id="@+id/editencryption"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@android:drawable/editbox_background" />

<TextView
            android:id="@+id/lasttagupdate"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="LAST TAG UPDATE"
            android:textSize="8pt" />

        <DatePicker
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_marginLeft="10dip"
            android:layout_weight="1"
            android:endYear="2100"
            android:startYear="1900" />

        <Button
            android:id="@+id/ok"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1"
            android:text="SAVE" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:03:31.357

看，你忘了在 EditText 之后结束。

**[1]**放置 / 签名以结束它，正如我所展示的 **[2]**并在最后从 XML 中删除。

```
 ......
    ......
    ......
        <TextView
            android:id="@+id/encryptionkey"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ENCRYPTION KEY"
            android:textSize="8pt" />

        <EditText
            android:id="@+id/editencryption"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:drawable/editbox_background" />
                                                                      ^  Add this ENDING sign here
                                                                      ^

            <TextView
                android:id="@+id/lasttagupdate"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="LAST TAG UPDATE"
                android:textSize="8pt" />

            <DatePicker
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_marginLeft="10dip"
                android:layout_weight="1"
                android:endYear="2100"
                android:startYear="1900" />

            <Button
                android:id="@+id/ok"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_weight="1"
                android:text="SAVE" />

     //     </EditText>    <--  REMOVE THIS FROM YOUR XML

    </LinearLayout>

</ScrollView> 
```

# objective-c - 在 Restkit iOS 中解析没有对象映射的 JSON

> ID：12054334
> 
> 赞同：4
> 
> 时间：2012-08-21T11:56:58.347
> 
> 标签：objective-c, ios, json, restkit

我创建了一个登录页面，它使用 Restkit`RKClient`发送登录详细信息，并取回 JSON 数据（用户或错误）。我希望能够在没有对象映射的情况下解析 JSON 数据，只需 JSON 到字典。原因是它只是一个发送用户名和密码的简单登录，如果我设置对象映射，我必须将登录详细信息设置为登录对象，然后设置路由等......有点啰嗦。

这是我的代码

```
- (IBAction)login:(id)sender
{
    [self.activityIndicator startAnimating];
    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObject:self.username.text forKey:@"username"];
    [params setObject:self.password.text forKey:@"password"];
    [params setObject:@"login" forKey:@"type"];
    [[RKClient sharedClient] post:@"/login" params:params delegate:self];

}

- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response {
    if ([request isPOST]) {
        if ([response isJSON]) {
            NSLog(@"Got a JSON response back from our POST: %@", response.bodyAsString);
        }
    }

    [self.activityIndicator stopAnimating];

} 
```

如何将 JSON 数据获取到可读对象？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T12:34:49.463

您可以简单地在您的 RKResponse 对象上调用 parsedBody:nil 并将返回的对象分配给 NSDictionary：

```
responseDict = [response parsedBody:nil]; 
```

作为一个额外的检查，我使用了一些方便的方法来检查一个成功的响应：

```
- (bool) wasRequestSuccessfulWithResponse:(RKResponse*)response {

    bool isSuccessfulResponse = NO; 

    id parsedResponse;

    NSDictionary *responseDict;

    if(response != nil) {

        parsedResponse = [response parsedBody:nil];

        if ([parsedResponse isKindOfClass:[NSDictionary class]]) {

            responseDict = [response parsedBody:nil];

            if([[responseDict objectForKey:@"success"] boolValue]) {

                isSuccessfulResponse = YES;
            }
        }

    } 

    return isSuccessfulResponse;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:27:32.877

在 iOS 5.1+ 中有 NSJSONSerialization。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-23T17:18:50.120

下面是一个使用 RestKit 0.2 和 NSJSONSerialization 的例子：

```
[[RKObjectManager sharedManager] getObjectsAtPath:kLoginURL
                                       parameters:params
                                          success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                                              NSError *error;
                                              NSDictionary* json = [NSJSONSerialization JSONObjectWithData:operation.HTTPRequestOperation.responseData options:NSJSONReadingMutableLeaves error:&error];
                                              NSLog(@"msg: %@", [json objectForKey:@"msg"]);
                                          }
                                          failure:^(RKObjectRequestOperation *operation, NSError *error) {
                                          }]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T12:00:30.727

[您可以为此使用像JSONKit](https://github.com/johnezang/JSONKit)这样的开源库。它能够将 JSON 响应解析为 NSDictionary 或 NSArray。

# c# - 列表模式下 ListView 的动态列宽，如 Windows 7 中的资源管理器

> ID：12054337
> 
> 赞同：2
> 
> 时间：2012-08-21T11:57:07.690
> 
> 标签：c#, winforms, listview

当您在 Windows 7 资源管理器中选择“列表”模式时，它将显示具有不同宽度列的项目列表，这就是我所说的：

![Windows 7 资源管理器](../Images/4f190fae7d2bbcb85363d0c63396d822.png)

谁能告诉我如何在 .NET 4 中使用 ListView 实现相同的功能？

当我尝试“ListView.View = List”时，它使所有列的大小与任何列中最长的项目相同，如果所有元素都很短但只有少数元素很长，这看起来很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:04:48.437

将listview的列宽设置为-1或-2，-1将列自动调整为列中最长的项目，-2将列自动调整为列标题的长度

# php - 使用 mPDF 将 PDF 文件保存到目录

> ID：12054343
> 
> 赞同：5
> 
> 时间：2012-08-21T11:57:25.693
> 
> 标签：php, mpdf

我有一个关于 PDF 文件的问题。我编写了代码以打开 PDF，我设法在浏览器中输出上下文，但我也希望将此 PDF 文件保存在目录中。

有谁知道我会怎么做？

如果您认为这对您有帮助，我可以发布代码。

提前谢谢你，萨钦

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T11:02:01.027

[来自stackoverflow](https://stackoverflow.com/questions/12574193/php-mpdf-save-file-as-pdf)的引用：

> 文档指出 Output() 的第一个参数是文件路径，第二个是保存模式 - 您需要将其设置为“F”。

```
$mpdf->Output('filename.pdf','F'); 
```

# wpf - 将其 LayoutTransform 设置为 TranslateTransform 或 MatrixTransform 时，Canvas 子项的翻译不起作用

> ID：12054349
> 
> 赞同：8
> 
> 时间：2012-08-21T11:57:51.090
> 
> 标签：wpf, layouttransform

我有一个简单的应用程序，它由一个包含画布（rootCanvas）的窗口组成。我正在尝试为此添加另一个画布（测试）并将不同的变换应用于子画布的 LayoutTransform。这一切都是以编程方式完成的，而不是使用 XAML。

一些转换正在工作，而另一些则不如下：

*   当 LayoutTranform 设置为 RotateTransform 时，它会按预期工作。
*   当它设置为 TranslateTransform 时，似乎没有应用翻译，并且测试 Canvas 仍然位于 rootCanvas 的顶角
*   当它设置为通过应用旋转和平移构建的 MatrixTransform 时，似乎只应用了旋转。

代码如下：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Canvas rootCanvas = (Canvas)Application.Current.Windows[0].FindName("canvas1");

        Canvas test = new Canvas();
        test.Width = 10;
        test.Height = 10;
        test.Background = Brushes.Aqua;

        // this works 
        //test.LayoutTransform = new RotateTransform(45);

        // this doesn't
        //test.LayoutTransform = new TranslateTransform(40, 40);

        // only the rotate part of this works
        Matrix matrix = new Matrix();
        matrix.Rotate(45);
        matrix.Translate(40, 40);
        test.LayoutTransform = new MatrixTransform(matrix);

        rootCanvas.Children.Add(test);
    }
} 
```

如果有人能解释我在这里做错了什么，我将非常感激，因为我不明白为什么翻译似乎没有像我预期的那样工作。

提前致谢，

威布斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T12:16:45.700

[请阅读FrameworkElement.LayoutTransform 属性](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layouttransform.aspx)中的备注。

> 但是，LayoutTransform 会忽略 TranslateTransform 操作。

使用[UIElement.RenderTransform 属性](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransform.aspx)来应用`TranslateTransform`.

# java - 在 Java 中，为什么我不能将超过 94 个字符的调用字符串传递给 Runtime.getRuntime().exec()？

> ID：12054350
> 
> 赞同：1
> 
> 时间：2012-08-21T11:58:06.173
> 
> 标签：java, batch-file, runtime.exec

我正在尝试从 java 应用程序调用 .bat 文件。看起来很简单，但我有两个问题，非常感谢一些建议：

1.  下面的代码无法执行 bat 文件，因为参数字符串超过 94 个字符。如果我正好使用 94 个字符（通过从`clientArgs`字符串末尾删除尾随的“x”），bat 文件执行正常。
    （如果我使用替代调用并将 args 传递为同样的问题`String[]`）
    无论如何，我需要能够传递更长的命令字符串（~150 个字符）

2.  如果我修改`clientArgs`为不包括完整的文件名，而只包括短名称（因为我指定了工作目录），我得到：

    `java.io.IOException: Cannot run program "client.bat" (in directory "C:\2\code\FlaFl\flafl-0.7-RC2"): CreateProcess error=2, The system cannot find the file specified`

这是代码：

```
public static void main(String[] args) {  
    String CMD_FILE_NAME = "client.bat"; //cmd or bat - still limit'n is 94 chars
    String cmdFileFolder= "C:/2/code/FlaFl/flafl-0.7-RC2/"; 
    File workingDir = new File(cmdFileFolder);
    String clientArgs = cmdFileFolder + 
         CMD_FILE_NAME + " -host name12.mycompanyname3.com -app hive"
         + "123456789 34x";  //95 chars fails. remove the x to get it to work
    System.out.println("length of invoc str is "+clientArgs.length());
    Process process=null;
    try {
         process = Runtime.getRuntime().exec(clientArgs,null,workingDir);
    } catch (IOException e) {
         System.out.println("exception "+e);
    }
    //sleep(2000);
    //if (process!=null)
    //    process.destroy();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:04:18.820

来自[http://en.wikipedia.org/wiki/COMMAND.COM](http://en.wikipedia.org/wiki/COMMAND.COM)

> 交互模式下的命令行长度限制为 126 个字符。

这可能是您的问题的原因。

您可以创建一个`.bat`文件并运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:04:38.417

Exec 的 Java Doc 建议

> ProcessBuilder.start() 现在是使用修改后的环境启动进程的首选方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:08:32.303

尝试使用以下代码：

```
public static void main(String[] args) {
    String CMD_FILE_NAME = "client.bat"; // cmd or bat - still limit'n is 94
                                            // chars
    String cmdFileFolder = "C:/2/code/FlaFl/flafl-0.7-RC2/";
    File workingDir = new File(cmdFileFolder);
    String clientArgs = CMD_FILE_NAME
            + " -host name12.mycompanyname3.com -app hive"
            + "123456789 34x"; // 95 chars fails. remove the x to get it to
                                // work
    System.out.println("length of invoc str is " + clientArgs.length());
    Process process = null;
    try {
        process = Runtime.getRuntime().exec(clientArgs, null, workingDir);
    } catch (IOException e) {
        System.out.println("exception " + e);
    }
    // sleep(2000);
    // if (process!=null)
    // process.destroy();
} 
```

`cmdFileFolder`当您传递`workingDir`给`Runtime.exec()`方法时，您正在给出命令，即代码中的工作目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T20:23:28.670

试图复制您的问题，我成功地运行了具有更长得多的参数行的命令。
尝试插入

```
 try {
        p.waitFor();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

在你执行你的命令（代替那些被评论的`sleep() ...`）以确保你允许它完成之后。

这种方法实际上还有另一个问题（我最初认为这可能是您的问题） - 如果您的进程写入足够的数据来填充它的控制台缓冲区，它可能会阻塞，如此处所述（用于进程的 javadoc）：

> 由于部分原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。

所以你应该先阅读它：

```
InputStream is=process.getInputStream();
BufferedReader br= new BufferedReader(new InputStreamReader(is));

String line=new String();
while ((line=br.readLine())!=null) System.out.println (line);  //do something real here 
```

如果您不想阅读您的 bat 输出（而且我看不到您这样做），您可以跳过所有这些并在其单独的窗口中运行您的命令：
`cmd /c start \"my command\" c:/temp/startup.bat args`

（注意关于工作目录的第二种形式，用于`cmd /c startup.bat arguments`摆脱“未找到”异常）

# jquery - 延迟后关闭 Colorbox

> ID：12054353
> 
> 赞同：0
> 
> 时间：2012-08-21T11:58:17.670
> 
> 标签：jquery, colorbox, delay

我想在延迟后关闭提交后打开的（iframe）颜色框。以下 js 行不起作用：

```
 parent.$.colorbox.delay(500).close(); 
```

有谁知道延迟后如何关闭彩盒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:03:52.003

尝试阅读前 3 个答案 :D :D

（对不起，无法抗拒）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:01:27.457

如何设置[超时](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)？

```
setTimeout(parent.$.colorbox.close, 500); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:01:44.063

尝试使用：

```
setTimeout(function() {
    // close colorbox
}, 500); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:01:51.233

尝试使用 setTimeout：

```
var box = parent.$.colorbox;
setTimeout(function(){
    box.close();
}, 500); 
```

# c++ - public double members vs. double& Accessors

> ID：12054356
> 
> 赞同：0
> 
> 时间：2012-08-21T11:58:41.230
> 
> 标签：c++, reference, private-members

我有一些我想修改的遗留代码。在类 AI 中想要添加一些成员（比如说 10 个）并允许访问类似于以前的成员。

```
 class A
 {
 protected:
      double m_dmember1;
      double m_dmember2;
      double m_dmember3;

 public:
      double& Member1() { return m_dmember1; }
      double& Member2() { return m_dmember2; }
      double& Member3() { return m_dmember3; }

      A();
 } 
```

这样就多了 10 个成员和 10 个访问者。这在我看来是多余的。

我不知道为什么以前的开发人员使用 double 作为它的访问器的引用。看起来他想要一种方法来访问仅具有简单名称的成员（我猜与 C# 属性类似的行为）。

那么，我应该将 A 类简化为此还是一个坏主意？

```
 class A
 {
 public:
      double Member1;
      double Member2;
      double Member3;

      A();
 } 
```

然后在数组中使用 A 类的实例，所以也许引用是用来节省内存的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:59:40.700

从设计的角度来看，这是同一件事——它们都打破了封装。

拥有访问器使调试变得更容易，但我会保留代码原样。

> 我不知道为什么以前的开发人员使用 double 作为它的访问器的引用。

因为引用会让你改变成员的值。他避免使用两种方法 (`get`和`set`)，而是使用一种方法。

> 然后在数组中使用 A 类的实例，所以也许引用是用来节省内存的？

不，因为引用是返回类型。它们根本不影响内存占用。

# url-rewriting - Nginx如何匹配这个位置

> ID：12054361
> 
> 赞同：1
> 
> 时间：2012-08-21T11:59:06.660
> 
> 标签：url-rewriting, nginx

所以我有这样的位置：`someplacecat.com` 哪里`someplace`是动态的，哪里是不同的。我想将其重写为`someplace.ourdomain.com`

所以我写了这个位置块：

`location ~ (.*)cat(.*) { rewrite ^ $scheme://$1.ourdomain$2$request_uri; }`

但是我无法匹配，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T17:29:53.080

您的位置块问题

```
location ~ (.*)cat(.*) { rewrite ^ $scheme://$1.ourdomain$2$request_uri; } 
```

是重写指令将反向引用重置为其第一个参数的反向引用，因此您需要在重写之前保存它们，如下所示：

```
location ~ (.*)cat(.*) { 
  set $subdomain $1; 
  set $tld $2;
  rewrite ^ $scheme://$subdomain.ourdomain.$tld$request_uri; 
} 
```

这几乎就是您在下面的 anwser 中使用 if-block 所做的（否则它会遇到同样的问题 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:14:52.437

设法使用 if 块解决它，但如果有人知道我在 location 块上做错了什么，请告诉我。

```
if ($host ~* (.*)cat\.(.*)) {
    set $subdomain $1;
    set $tld $2;
    rewrite ^ $scheme://$subdomain.ourdomain.$tld$request_uri;
} 
```

# wpf - 如何延迟加载控件，直到 RadioButton 选择完成更改？

> ID：12054363
> 
> 赞同：5
> 
> 时间：2012-08-21T11:59:10.107
> 
> 标签：wpf, xaml, dispatcher

我有一个`ListBox`可以使用的样式`RadioButtons`，并且更改它`SelectedItem`也会更改其下方`UserControl`显示的`ContentControl`内容。该应用程序如下所示：

![应用程序样机](../Images/175daeb110972b4b38512fefeb5a1e2b.png)

```
<ListBox ItemsSource="{Binding AvailableViewModels}"
         SelectedItem="{Binding SelectedViewModel}"
         Style="{StaticResource RadioButtonListBoxStyle}" />

<ContentControl Content="{Binding SelectedViewModel}" /> 
```

我的问题是`UserControls`每个都包含一个自定义的 Grid 控件（Telerik's `RadGridView`），由于它包含的数据量，它在加载时有明显的延迟。

我在 Grid 加载后`ItemsSource`的事件中设置绑定，`Loaded`以防止 UI 在 Grid 加载时锁定，但是无论我如何尝试运行它，RadioButtons 仍然反映加载时的延迟，这给人一种冻结的错觉用户界面

![加载时单选按钮的屏幕截图](../Images/4b136d930510cc7a8124a74d747a3826.png)

我尝试使用尽可能低的[DispatcherPriority](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)来设置绑定，但似乎没有什么不同。

XAML：

```
<telerik:RadGridView x:Name="MyGrid" Loaded="MyGrid_Loaded" Unloaded="MyGrid_Unloaded">
     <!--....-->
</telerik:RadGridView> 
```

C＃：

```
private void MyGrid_Loaded(object sender, RoutedEventArgs e)
{
    this.Dispatcher.BeginInvoke(DispatcherPriority.SystemIdle,
        new Action(delegate()
    {
        BindingOperations.SetBinding(
            MyGrid,
            RadGridView.ItemsSourceProperty,
            new Binding("ViewModelProperty")
        );
    }));
}

private void MyGrid_Unloaded(object sender, RoutedEventArgs e)
{
    MyGrid.ItemsSource = null;
} 
```

应该注意的是，第一次`UserControl`加载时，它加载得很好，`RadioButton`选择立即改变，几秒钟后加载网格。它只是从 a 切换`UserControl`并再次返回会导致`RadioButtons`在被选中时暂停。

有没有人知道是什么导致 UI 在切换视图时出现冻结，或者如何解决？

**编辑**

我创建了一个小问题的复制品，发现它只在我`RadioButtons`用于我的`ListBox`物品时才会发生。使用常规`ListBox`不会导致选择行为的相同延迟。

XAML：

```
<Window.Resources>

    <!-- Need two separate DataTemplates -->
    <DataTemplate DataType="{x:Type local:Test}">
        <StackPanel>
            <TextBlock Text="Test" />
            <TextBlock Margin="10" Loaded="TextBlock_Loaded" />
            <TextBlock Text="Test" />
        </StackPanel>
    </DataTemplate>

    <DataTemplate DataType="{x:Type local:Test2}">
        <StackPanel>
            <TextBlock Text="Abc" />
            <TextBlock  Margin="10" Loaded="TextBlock_Loaded" />
            <TextBlock Text="Abc" />
        </StackPanel>
    </DataTemplate>

    <Style x:Key="RadioButtonListBoxStyle" TargetType="{x:Type ListBox}">
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="KeyboardNavigation.DirectionalNavigation" Value="Cycle" />
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemContainerStyle">
            <Setter.Value>
                <Style TargetType="{x:Type ListBoxItem}" >
                    <Setter Property="Margin" Value="2, 2, 12, 2" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate>
                                <Border Background="Transparent">
                                    <RadioButton
                                            Content="{TemplateBinding ContentPresenter.Content}" VerticalAlignment="Center"
                                            ContentTemplate="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListBox}}, Path=ItemTemplate}"
                                            IsChecked="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent},Mode=TwoWay}"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
    </Style>

</Window.Resources>

<StackPanel>
    <ListBox x:Name="TestListBox"
             ItemsSource="{Binding Test}"
             Style="{StaticResource RadioButtonListBoxStyle}">

        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="Option" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>

    <ContentControl Content="{Binding ElementName=TestListBox, Path=SelectedItem}" />
</StackPanel> 
```

C＃：

```
private void TextBlock_Loaded(object sender, RoutedEventArgs e)
{
    this.Dispatcher.BeginInvoke(DispatcherPriority.ContextIdle,
        new Action(delegate()
        {
            System.Threading.Thread.Sleep(1000);
            ((TextBlock)sender).Text = "Delay Loaded Test";
        }));
} 
```

`Test`只是一个`ObservableCollection<ITest>`，它同时包含`Test`和`Test2`对象。延迟仅在两个不同对象之间切换时发生，因为`DataTemplate`绘制了新对象而不是重新使用现有对象`DataTemplate`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:54:06.930

使用调度程序和一些低优先级的问题是无法真正保证您的代码何时执行。您希望确保在 UI 更新后执行运行缓慢的代码。A 可以想出一个非常黑客的方法来做到这一点......

```
DispatcherTimer timer = new DispatcherTimer();
timer.Interval = Timespan.FromMilliseconds(100);
timer.Tick += (s, e2) =>
{
  // update your binding
  BindingOperations.SetBinding(
        MyGrid,
        RadGridView.ItemsSourceProperty,
        new Binding("ViewModelProperty")
    );

  timer.Stop();
};
timer.Start(); 
```

上面创建了一个在 100 毫秒后执行的单个“滴答”计时器。

# c# - 处理 C# 服务中的死锁

> ID：12054367
> 
> 赞同：1
> 
> 时间：2012-08-21T11:59:26.327
> 
> 标签：c#, service

我在 C# 中有一项服务，它从 oracle DB 中获取记录并插入到 MySql DB 中，在成功插入 MySql DB 中的所有记录后，我的 Oracle DB 的一列得到更新，即插入了这么多记录。

由于是一项服务，它每 5 秒就会被调用一次。

我的问题是我应该如何处理这种情况下的死锁情况。就像我的服务从 oracle DB 获取大约 20,000 条记录并尝试插入到 MySql DB 大约需要 7-8 秒，这意味着我的服务将被调用，并且由于之前会话的所有记录都没有被插入，所以不会在 Oracle DB 中更新，下次它会再次获取我不想要的全部记录。

如果可能的话，也提供一些相同的代码。这是纯粹的 Window 基础服务，而不是 WCF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:06:47.307

我不知道你的功能要求是什么，但听起来你真的不想在你的服务中开始处理，直到之前的任何运行完成之后。即，您需要某种系统来判断退出运行是否正在进行，然后在开始后续进程之前检查这一点。另一种选择是将请求排队，然后将它们作为一个批处理，有效地删除重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:07:10.000

听起来您需要等待插入 Oracle 完成，因此在 c# 中对您的请求进行排队，即同步执行。研究使用 Mutex 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:08:55.353

我想你在这里有几个选择。

1.  不要频繁地运行该服务，特别是如果它不是真的必要的话。你说你有一项服务每 5 秒收集 20,000 条记录——这对于任何规模的东西来说似乎都很频繁。
2.  在更新完成之前对 Oracle 表发出锁定，以便所有读取操作都必须等待。
3.  不要在计时器上启动服务委托，而是在事件上启动。因此，当您第一次启动服务时，您将手动触发事件，但此后每个引发的事件都会在更新完成后发生。

我个人更喜欢选项#3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:50:37.627

如果您仅在此服务中需要“协调”，请使用*AutoResetEvent*类。

1.  *使用AutoResetEvent*实例创建静态字段。
2.  计时器调用的方法应在启动时通过*AutoResetEvent.WaitOne(TimeSpan timeout)*调用检查此实例。
3.  在您的方法结束时（由计时器调用）**始终**调用*AutoResetEvent.Set()*。*try{} finally{}*构造通常可以用于此调用。
4.  在您的服务启动期间，为创建的实例调用*AutoResetEvent.Set()*以允许方法（由计时器调用）开始工作。

使用带有小超时的*WaitOne(TimeSpan timeout)*允许在前一个尚未完成的情况下快速完成计时器“调用”。因此，您仍然可以每 5 秒调用一次方法。

在调用它的方法之前肯定需要检查 AutoResetEvent 的处理，也许还有一些额外的检查......

# c# - 从 MM/dd/yyyy 到 dd/MM/yyyy 的日期时间转换

> ID：12054368
> 
> 赞同：-3
> 
> 时间：2012-08-21T11:59:27.283
> 
> 标签：c#, datetime

我试着转换这个

```
DateTime Todate = DateTime.ParseExact("22/08/2012", "dd/MM/yyyy", null); 
```

得到输出：

```
8/21/2012 12:00:00 AM 
```

如何在 dd/MM/yyyy 中获取日期输出

**编辑：** 我从日历文本框中获取文本作为字符串“22/08/2012”，现在我需要将其转换为 dateTime 数据类型以通过 DateTime DataType 中的 DAL 类变量插入到 DB

```
string[] f1 = datepicker1.Text.Split(' ');
string[] t1 = datepicker2.Text.Split(' ');
DateTime Fromdate1 = DateTime.ParseExact(f1[0], "dd/MM/yyyy", CultureInfo.InvariantCulture);
//Convert.ToDateTime(datepicker1.Text);
DateTime Todate1 = DateTime.ParseExact(t1[0], "dd/MM/yyyy", null);
ObjSeasonPrice.SeasonPriceName = txtSeasonPriceName.Text.Trim();
ObjSeasonPrice.PropertyId = Convert.ToInt32(propId.ToString());
ObjSeasonPrice.RoomId = Convert.ToInt32(roomId.ToString());
ObjSeasonPrice.RatePerNight = Convert.ToDecimal(txtRatePerNight.Text);
ObjSeasonPrice.Days = getAllDaysWithComma();
ObjSeasonPrice.AdditionalBenefits = txtAdditionalBenifits.Text.Trim();
ObjSeasonPrice.Status = ddlStatus.SelectedItem.ToString();
ObjSeasonPrice.IsDeleted = Convert.ToBoolean("False");
ObjSeasonPrice.FromDate = Fromdate1;
ObjSeasonPrice.ToDate = Todate1; 
```

抱歉信息太少，但为什么你们一直在投票而没有花时间完全理解这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:03:50.823

尝试这个：

```
DateTime Todate = DateTime.ParseExact("22/08/2012", "dd/MM/yyyy", null);
Todate.ToString("dd/MM/yyyy"); // output in your chosen format. 
```

关键是 Todate 是一个 DateTime 对象，因此它实际上在内部将日期和时间存储为一个大数字。如果要以某种格式显示它，则将其转换为字符串。见这里：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

**编辑：**如果您想更改默认显示格式，`DateTime`请参见此处：[设置默认日期时间格式 c#](https://stackoverflow.com/questions/1389187/set-default-datetime-format-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:02:56.537

```
Todate.ToString("dd/MM/yyyy") 
```

将以您指定的格式输出日期

# asp.net - 可以在 ajax 工具包日历扩展器中添加“无”选项吗？

> ID：12054369
> 
> 赞同：4
> 
> 时间：2012-08-21T11:59:28.300
> 
> 标签：asp.net, calendarextender

我的页面中有一个`<ajaxToolkit:CalendarExtender>`对象。它将所选日期置于禁用状态`TextBox`（以今天日期开始填充）。我希望该日历中有一个“无”选项，系统将为此执行默认操作（就像它具有“今天”选项一样）。这可能吗？我在互联网上搜索了有关此的信息，但找不到任何相关信息。我想知道我是否错过了什么。或者我是否必须实现一个单独的逻辑（比如启用`TextBox`并且用户可以将其留空作为“无”选择）？

是否有任何日历对象，不同于 ajax 工具包日历扩展器，可以与提供“无”选项的 asp.net 一起使用？

我仍然愿意回答，即使它只是一个“不”（至少有一点记录）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:26:48.573

有两个选项可用：第一个是在文本框旁边添加一些 html 元素并在 javascript 中处理它的单击事件。在此事件处理程序中清除日历扩展程序。这是一个代码：

```
 <script type="text/javascript">
      function clearDate(extenderId) {
           $find(extenderId).set_selectedDate(null);
      }
 </script>

<asp:TextBox runat="server" ID="Date1" autocomplete="off" />
<input type="button" value="x" onclick="clearDate('<%= defaultCalendarExtender.ClientID %>')" /> 
<br />
<ajaxToolkit:CalendarExtender ID="defaultCalendarExtender" runat="server" 
    TargetControlID="Date1" /> 
```

第二个解决方案 - 调整 AjaxControlToolkit 项目的源代码。实际上，您只需要更改`Client/MicrosoftAjax.Extended/Calendar/CalendarBehavior.pre.js`文件。用下面的代码替换它。实际上有很多代码，因为我懒得逐步解释每个更改；）简而言之，我已将新元素添加到日历弹出页脚以将选定日期重置为默认选定值（如果已指定）或 null . 您还可以调整CalendarBehavior.pre.js旁边的**Calendar.css文件**

由于对大量答案的限制，我在 [pastebin Pastebin 链接上发布了 javascript 代码](http://pastebin.com/zaDytz0Y)

# android - Xml 到 Json 转换

> ID：12054370
> 
> 赞同：0
> 
> 时间：2012-08-21T11:59:30.233
> 
> 标签：android, iphone, xml, json, xml-parsing

是否有任何 API 可以直接为 Android 和 iPhone 项目将 XML 转换为 JSON。

我想要一个完美而直接的解决方案/API，我可以在我的 android 和 iPhone 应用程序中使用它。这样xml格式的数据就可以直接转换成JSON格式了。

任何帮助，将不胜感激。如果有，请提供指向 API 的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-10T21:52:26.593

仅适用于 Android，我刚刚为 Android Studio 发布了一个“XML to JSON”库。易于与 gradle 集成，使用简单，可配置。

**XmlToJson**在 GitHub 上可用：

[https://github.com/smart-fun/XmlToJson](https://github.com/smart-fun/XmlToJson)

请享用！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T12:04:45.837

由于 Android 是 Java 而 Xcode 是对象 ci 认为您需要为每个使用不同的库。这是 android/java 的一个很好的例子：

[如何在 Java 中将 XML 转换为 JSON](http://answers.oreilly.com/topic/278-how-to-convert-xml-to-json-in-java/)

我没有在 xcode 中解析 XML 的经验，但这里有另一个问题（而且似乎是一个很好的答案）：

[在 iPhone 中将 xml 解析为 json](https://stackoverflow.com/questions/6408758/parsing-xml-to-json-in-iphone)

# nant - 使用 MSDeploy 创建包时设置文件夹的写入权限

> ID：12054384
> 
> 赞同：0
> 
> 时间：2012-08-21T12:00:27.130
> 
> 标签：nant, msdeploy

我正在使用 MSDeploy 创建一个人工制品作为 NAnt 中的构建步骤。这个特定的构建步骤在成功编译时被调用。然后将工件用于部署。

这是我的构建文件中指定的步骤。

```
 <target name="BuildMsDeployPackage" depends="StageForMsDeployPackaging">
    <exec program="${msdeploy.exe}"
          workingdir="${buildDirectory}"
          verbose="true"
          commandline="-verb:sync 
                      -source:iisapp=${packagingDirectory} 
                      -dest:package=${publishDirectory}\${webapp.artifact.zip}"/> 
```

这`source`是我的网络项目。

我希望能够为创建的包中的几个文件夹设置指定写访问权限。这可能吗？我知道有一个`setAcl`用于此特定目的的提供程序，但是可以在创建包时使用它吗？

**编辑**

我现在能够获得`archive.xml`与包一起生成的文件的 acl 权限。我正在使用`auto`提供程序将我的包的内容与目的地同步。同步时是否`auto`复制acl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:07:23.643

您可以通过 NAnt 的[`<attrib>`](http://nant.sourceforge.net/release/latest/help/tasks/attrib.html)任务设置文件和目录属性。在这种情况下，您将设置`readonly`为`false`.

# android - Android如何解析这个自定义的xml文件？

> ID：12054391
> 
> 赞同：0
> 
> 时间：2012-08-21T12:00:47.267
> 
> 标签：android, xml, xmlpullparser

我已经为存储在 xml 文件夹中的本地 XML 文件实现了 XML Pull Parser。我需要在某些目标 URL 中为 XML 实现相同的功能，如何将 URL 传递给 XML Pull 解析器？

我在下面的代码中尝试了这样的操作，但出现错误。

```
parser.setInput(new InputStreamReader(getUrlData(url))); 
```

xml 文件看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<resource-lists xmlns="urn:ietf:params:xml:ns:resource-lists">
   <list name="friends">
     <entry uri="sip:bob@example.com">
        <display-name>subbu</display-name>
     </entry>
     <entry uri="sip:maa@example.com">
        <display-name>raja</display-name>
     </entry>
  </list>
</resource-lists> 
```

如何阅读此信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:28:38.290

在 xmlpullparser 中有这个方法从 URL 中获取数据调用这个函数像这样

```
XmlPullParserFactory factory = XmlPullParserFactory.newInstance();       
factory.setNamespaceAware(true);
XmlPullParser parser = factory.newPullParser();
parser.setInput(new InputStreamReader(getUrlData("url as string"))); 
```

从 url 获取数据的函数。

```
public InputStream getUrlData(String url) throws URISyntaxException, 
                                          ClientProtocolException, IOException {

    DefaultHttpClient client = new DefaultHttpClient();
    HttpGet method = new HttpGet(new URI(url));
    HttpResponse res = client.execute(method);
    return res.getEntity().getContent();
} 
```

# iphone - 视频方向 iPhone

> ID：12054397
> 
> 赞同：0
> 
> 时间：2012-08-21T12:01:10.000
> 
> 标签：iphone, video, xamarin.ios, orientation, video-capture

我有一个 iPhone 应用程序，女巫可以录制视频。问题是方向，它总是纵向的。我需要它来检测设备方向，然后以正确的方向保存视频。

```
// setup video recording
mRecordingDelegate = new RecordingDelegate();

// setup the input Video part
mCaptureVideoInput = new AVCaptureDeviceInput(AVCaptureDevice.DefaultDeviceWithMediaType(AVMediaType.Video), out mVideoError);

//Audio part
mCaptureAudioInput = new AVCaptureDeviceInput(AVCaptureDevice.DefaultDeviceWithMediaType(AVMediaType.Audio), out mAudioError);

// setup the capture session
mCaptureSession = new AVCaptureSession();
mCaptureSession.SessionPreset = AVCaptureSession.PresetMedium;
mCaptureSession.AddInput(mCaptureVideoInput);
mCaptureSession.AddInput(mCaptureAudioInput);

// setup the output
mCaptureOutput = new AVCaptureMovieFileOutput();
mCaptureOutput.MaxRecordedDuration = MonoTouch.CoreMedia.CMTime.FromSeconds(VideoLength, 1);

//add Output to session
mCaptureSession.AddOutput(mCaptureOutput);

// add preview layer 
mPrevLayer = new AVCaptureVideoPreviewLayer(mCaptureSession);
mPrevLayer.Frame = new RectangleF(0, 0, 320, 480);
mPrevLayer.BackgroundColor = UIColor.Clear.CGColor;
mPrevLayer.VideoGravity = "AVLayerVideoGravityResize";

// Show video output
mCaptureSession.CommitConfiguration();
mCaptureSession.StartRunning();

RecordingDelegate.Stopped += delegate {
    if(recording)
        OnBtnStopRecordingVideo();
};

// add subviews
this.InvokeOnMainThread (delegate
{
    this.View.Layer.AddSublayer (mPrevLayer);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:11:30.767

**1\. 基础**

在深入了解细节之前，让我们先回顾一下界面方向更改的工作原理以及您应该如何响应它们。首先，如果您希望您的视图自动旋转，您需要覆盖方法 shouldAutorotateToInterfaceOrientation: 并返回 YES。如果您只想在特定条件下允许自动旋转，您也可以在此方法中对该条件进行测试。

这几乎是允许自动旋转所需做的最基本的事情，但是您可以覆盖其他非常有用的方法。这些方法是

> • **willRotateToInterfaceOrientation**
> 
> • **didRotateFromInterfaceOrientation**
> 
> • **willAnimateFirstHalfOfRotationToInterfaceOrientation**
> 
> • **willAnimateSecondHalfOfRotationFromInterfaceOrientation**

前两种方法对于进行旋转的预处理和后处理非常有用。您也许可以在 willRotateToInterfaceOrientation 中初始化视图控制器或将一些视图添加到当前视图。第二个2几乎是不言自明的。如果您想在旋转的特定阶段执行其他操作，您也可以实现它们。

在使用视图控制器方向时，另一个非常有用的代码示例是：

```
if(UIInterfaceOrientationIsLandscape(interfaceOrientation)){

    //do some processing…

}else if(UIInterfaceOrientationIsPortrait(interfaceOrientation)){

    //do different processing…
}
else if(UIDeviceOrientationIsValidInterfaceOrientation(interfaceOrientation)){

    //do something
} 
```

注意：从**[这里](http://www.bytesizecreations.com/2009/05/working-with-orientation-changes-on/)****粘贴的描述请查看帖子以获取更多详细信息**

**2.这篇[文章](https://stackoverflow.com/questions/11232297/how-to-change-video-orientation)将帮助您改变视频方向**

# xslt - 如何使用 xslt 删除所有属性值中的空格？

> ID：12054399
> 
> 赞同：3
> 
> 时间：2012-08-21T12:01:21.560
> 
> 标签：xslt, attributes, xslt-1.0, removing-whitespace

我想使用 xslt 从我的 xmls 中的所有属性中删除空格。我用过`strip-space`，但这会从节点中删除空格。我的输入xml是：

```
<OrderList>
<Order OrderDate="26-July" OrderNo="ORDER 12345"
 CustomertName="JOHN DOE" OrderKey="ORDKEY12345">
<ShipAddress AddressLine="ABC Colony" FirstName="John" LastName="Doe "/>
</Order>
</OrderList> 
```

我用来摆脱属性中空格的xsl`CustomertName="JOHN DOE"`是：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
<xsl:output method="xml" indent="yes"/> 
<xsl:strip-space elements="*" />
<xsl:template match="/">
<xsl:apply-templates/>
<OrderList>
    <xsl:for-each select="OrderList/Order">
        <xsl:element name="Order">
            <xsl:copy-of select="@OrderDate"/>
            <xsl:copy-of select="@OrderNo"/>
            <xsl:copy-of select="@CustomertName"/>

            <!-- ShipAddress begins -->
            <xsl:element name="ShipAddress">                                           
                <xsl:copy-of select="ShipAddress/@AddressLine"/>
                <xsl:copy-of select="ShipAddress/@FirstName"/>
                <xsl:copy-of select="ShipAddress/@LastName"/>                       
            </xsl:element>
        </xsl:element>
    </xsl:for-each>             
</OrderList>
</xsl:template>
</xsl:stylesheet> 
```

但这会使输入 xml 保持原样。我想从所有级别的属性值中删除空格。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T12:12:27.477

您可以像这样使用 translate 函数，尽管使用调用模板重构它是有意义的：

```
<xsl:attribute name="OrderDate">
    <xsl:value-of select="translate(@OrderDate, ' ','')"/>
</xsl:attribute>
<xsl:attribute name="OrderNo">
    <xsl:value-of select="translate(@CustomertName, ' ','')"/>
</xsl:attribute>
<xsl:attribute name="CustomertName">
    <xsl:value-of select="translate(@CustomertName, ' ','')"/>
</xsl:attribute> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T12:13:20.983

如果您只想从属性值中删除空格，您可以创建一个模板来匹配任何属性，然后使用 translate 函数。

```
<xsl:template match="@*">
   <xsl:attribute name="{name()}">
      <xsl:value-of select="translate(., ' ', '')" />
   </xsl:attribute>
</xsl:template> 
```

如果你想过滤掉一些属性，你可以创建模板来匹配，然后忽略它们。（XSLT 将首先匹配更具体的模板）

```
<xsl:template match="Order/@OrderKey" /> 
```

您还可以通过使用恒等变换来处理现有节点，从而在一定程度上简化您的代码。这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="@*">
      <xsl:attribute name="{name()}">
         <xsl:value-of select="translate(., ' ', '')" />
      </xsl:attribute>
   </xsl:template>

   <xsl:template match="Order/@OrderKey" />

   <xsl:template match="node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，以下是输出

```
<OrderList>
  <Order OrderDate="26-July" OrderNo="ORDER12345" CustomertName="JOHNDOE">
    <ShipAddress AddressLine="ABCColony" FirstName="John" LastName="Doe"></ShipAddress>
  </Order>
</OrderList> 
```

这种方法的优点是它适用于任何 XML 文档。

如果您只想对特定元素执行此操作，请尝试使用此 XSLT 来显式匹配您想要的属性（并丢弃所有其他属性）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="Order/@OrderDate|Order/@OrderNo|Order/@CustomertName|ShipAddress/@AddressLine|ShipAddress/@FirstName|ShipAddress/@LastName">
      <xsl:attribute name="{name()}">
         <xsl:value-of select="translate(., ' ', '')"/>
      </xsl:attribute>
   </xsl:template>

   <xsl:template match="@*"/>

   <xsl:template match="node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

**编辑：**如果您只想删除前导和尾随空格，那么“规范化空间”是您的朋友。

```
<xsl:value-of select="normalize-space(.)" /> 
```

请注意，这将删除属性中多余的空格（也就是说，双空格变成单词之间的单空格）。

# checkbox - 用 d3 附加复选框时添加标签时遇到问题

> ID：12054403
> 
> 赞同：3
> 
> 时间：2012-08-21T12:01:37.137
> 
> 标签：checkbox, d3.js

好的，我一直在尝试根据数据集中的列数动态地将一些复选框附加到 div 中。所以我认为 d3 将是要走的路，只需将输入附加适当的属性和一些文本作为从数据确定的标签。我试过下面的代码；

```
d3.select("body").selectAll("input")
.data([11, 22, 33, 44])
.enter().append("input")
.attr("checked", true)
.attr("type", "checkbox")
.attr("id", function(d,i) { return i; })
.attr("onClick", "change(this)")
.attr("for", function(d,i) { return i; })
.text(function(d) { return d; }); 
```

这导致页面上有 4 个复选框，但没有标签。

真正奇怪的是，当我检查元素时，生成的 html 似乎就是我所追求的，如下所示。

```
<input checked="true" type="checkbox" id="0" onclick="change(this)" for="0">11</input>
<input checked="true" type="checkbox" id="1" onclick="change(this)" for="1">22</input>
<input checked="true" type="checkbox" id="2" onclick="change(this)" for="2">33</input>
<input checked="true" type="checkbox" id="3" onclick="change(this)" for="3">44</input> 
```

当我在页面上使用它时，我得到的正是我所追求的。

我确定我错过了一些非常简单的东西，但是对于我的生活，我看不到它是什么。任何帮助感激地接受！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:55:01.203

您的主要问题是您不能在`<input>`这样的标签之间放置文本。它们像`<input />`. 您应该使用该`<label>`文本的元素。

另一个问题是 ID*必须*以字母开头（至少在 HTML5 之前），所以`id="1"`不起作用，但`id=a1"`可以。

也就是说，这段代码解决了这两个问题

```
d3.select("body").selectAll("input")
.data([11, 22, 33, 44])
.enter()
.append('label')
    .attr('for',function(d,i){ return 'a'+i; })
    .text(function(d) { return d; })
.append("input")
    .attr("checked", true)
    .attr("type", "checkbox")
    .attr("id", function(d,i) { return 'a'+i; })
    .attr("onClick", "change(this)"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:44:09.303

如果您使用 - 它会起作用`<label>`-

```
d3.select("body").selectAll("input")
  .data([11, 22, 33, 44])
  .enter().append("label")
  .text(function(d) { return d; })
  .append("input")
  .attr("checked", true)
  .attr("type", "checkbox")
  .attr("id", function(d,i) { return i; })
  .attr("onClick", "change(this)")
  .attr("for", function(d,i) { return i; }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-27T12:10:41.557

我知道这是一个很老的问题，但我想给出一个简单的解决方案，因为其他人不适合我......

您最初可以将标签附加到复选框，然后在完成之后您可以将文本添加到标签，然后将文本附加到复选框之后而不是之前：

```
d3.select("body").selectAll("input")
.data([11, 22, 33, 44])
.enter()
.append("label")
.append("input")
.attr("checked", true)
.attr("type", "checkbox")
.attr("id", function(d,i) { return i; })
.attr("onClick", "change(this)")
.attr("for", function(d,i) { return i; });

d3.selectAll("label").text(function(d) { return d; }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-03T20:10:57.933

如前所述，您不能将文本添加到`<input>`标签中。我的解决方案是在 .html() 调用中添加复选框。像这样：

```
d3.select('body').selectAll('label')
  .data([11, 22, 33, 44])
  .enter().append('label')
  .html(function(d, i) {
    return '<input type="checkbox" checked=true id="' + i + '" onClick="change(this) for="' + i + '">' + d;
  }) 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-29T19:06:58.750

另一种解决方案是使用`span`element 来容纳要显示在每个复选框右侧的文本。在这里，我们假设您有一个`id=some_div`要附加复选框的 div

```
var filter_controls_div_name="some_div";
var filter_controls__div=d3.selectAll("#"+filter_controls_div_name);
var date=null;
var field_value=null;
var field_value__list=[11,22,33,44];
for(var i=0;i<field_value__list.length;i++)
{
    field_value=field_value__list[i];
    var field__checkbox__div=filter_controls__div
        .append("div")
        .attr("class","checkbox")
    ;
    var field__checkbox__div__label=field__checkbox__div
        .append("label")
        .attr("class","field__label")
    ;
    var field__checkbox__div__label__input=field__checkbox__div__label
        .append("input")
        .attr("type","checkbox")
        .attr("checked","true")
        .attr("for",""+i)
        .attr("field_value",field_value)
        .attr("value",field_value)
    ;
    field__checkbox__div__label
        .append("span")
        .text(field_value)
    ;
    field__checkbox__div__label__input
        .on(
            "change"
            ,function(d)
            {
                var checkbox__element=d3.select(this);
                console.log((date=new Date()).toISOString()
                    +", checkbox__element.property(\"checked\") is:"+(checkbox__element.property("checked"))
                );
                if(checkbox__element.property("checked"))
                {
                    //do something when this checkbox is checked.
                }
                else
                {
                    //do something when this checkbox is unchecked.
                }
            }
        )
    ;
} 
```

# javascript - javascript 中不接受早于 13 个月的 From Date

> ID：12054405
> 
> 赞同：0
> 
> 时间：2012-08-21T12:01:42.723
> 
> 标签：javascript

在这里，我有“从日期”和“截止日期”和提交按钮。我正在为这个项目使用telerik radate control。所以，我无法添加那个 Telerik 控件。

这里一切都很好满足我的要求，并且有一个增强功能。

[http://jsfiddle.net/ssthil/4tyJ4/](http://jsfiddle.net/ssthil/4tyJ4/)

**附加信息：** 与“截止日期”相比，“开始日期”不会早于 13 个月前。

如何为此添加验证？寻求您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:33:29.570

```
var toDate= urToDate;
var fromDate= urFromDate;
fromDate.setMonth(toDate.getMonth()+13);

if(fromDate>toDate)
{
//Do your work
}
else
{
//from date is older
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:11:36.493

您可以[将月份设置](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setMonth)为过去的日期并与之进行比较：

```
var today = new Date(), // you can use only one Date, this is only for clarity
    back = new Date();
back.setMonth( today.getMonth() - 13);
return fromDate > back; 
```

* * *

按照@mplungjan 的建议修复这一天：

```
var months = 13;
if (back.getMonth() == (today.getMonth() - months % 12 + 12 + 1) % 12)
   back.setDate(-1); 
```

* * *

[更新小提琴](http://jsfiddle.net/DUJGz/7/)：使用克隆`endDate`代替`today`init `back`，然后比较`startDate`：

```
var back = new Date(endDate);
…
return startDate > back; 
```

# validation - 应为 Web 应用程序安全过滤的特殊字符列表

> ID：12054407
> 
> 赞同：0
> 
> 时间：2012-08-21T12:01:48.020
> 
> 标签：validation, struts2, security

为了使 Web 应用程序安全，要在 validation.xml 中过滤哪些特殊字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:13:44.420

如果您主要关心的是 SQL 注入之类的事情，那么最好的防御就是使用参数化查询。

不幸的是，我唯一用作参考的文章是针对 iOS 和 Objective-c 的，但[这里是](http://en.wikipedia.org/wiki/Parametrized_query#Parameterized_statements)Wikipedia entry on parametrized statements 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:36:07.143

从输入数据中过滤字符的原因是为了防止输入数据与不同编程或脚本环境中的控制语句“混合”的各种情况。

最典型的例子是 SQL 注入和跨站脚本。SQL 注入的一个示例是，如果您像这样创建 sql 语句：

```
sql = "select username where username = '" + username + "' and password = '" + password + "'" 
```

并且用户提交用户名admin'（注意'）

跨站点脚本的一个示例是一个论坛，其中有人使用此内容创建评论：

```
"Hi. This is a comment! <script> .. malicious javascript .. </script>" 
```

还有其他几种变体。如果您使用用户生成的输入发送电子邮件，那么某人可能会在您的代码中插入电子邮件标题。如果您在操作系统命令行中使用用户生成的输入（即更改密码），那么其他人也可能会插入其他命令。

处理此问题的唯一安全方法是在创建 sql 语句、创建网页、发送电子邮件等时永远不要信任用户生成的输入。

但是，作为一种第一道防线，您可以过滤掉您知道用户在验证输入时不需要的常用字符。一个典型的列表将包含像 <>\;"&#^'`?% 这样的字符。注意！这不是一个详尽的列表，只是我脑海中的几个典型字符。

# nservicebus - 启动 NServicebus 端点时的对象引用异常

> ID：12054411
> 
> 赞同：1
> 
> 时间：2012-08-21T12:02:15.497
> 
> 标签：nservicebus

我有一个从 2.6 升级到 3.2.7 后无法启动的 NServicebus 项目，端点如下所示：

```
namespace Customer.Project.SchemaImportService
{
    public class SchemaImportEndpoint : IConfigureThisEndpoint, AsA_Server, IWantCustomInitialization
    {
    private IContainer _container;

    public void Init()
    {
        log4net.Config.XmlConfigurator.Configure();
        SetupStructureMap();

        Configure.With()
            .Log4Net()
            .StructureMapBuilder(_container)
            .DisableTimeoutManager()
            .XmlSerializer()
            .CreateBus();
    }

    private void SetupStructureMap()
    {
        // implementation omitted
    }
} 
```

此外，app.config 看起来像这样：

```
<configuration>
<configSections>
<section name="MsmqTransportConfig" type="NServiceBus.Config.MsmqTransportConfig, NServiceBus.Core" />
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" requirePermission="false" />
<section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
<section name="Logging" type="NServiceBus.Config.Logging, NServiceBus.Core" />
</configSections>
<MsmqTransportConfig NumberOfWorkerThreads="1" MaxRetries="5" />
<Logging Threshold="DEBUG" /> 
<log4net debug="true"> <!-- logging details omitted -->  </log4net>
<MessageForwardingInCaseOfFaultConfig ErrorQueue="Customer.Project.SchemaImportService.Error" /> 
```

当我调试项目时，我启动了 NServicebus.Host.exe 文件，我尝试切换配置文件（生产、集成和 Lite），结果相同。

给出的异常（离开 init 语句后）如下所示：

```
Message: "Exception when starting endpoint, error has been logged. Reason: Object reference not set to an instance of an object."
Source: NserviceBus.Host

StackTrace: at NServiceBus.Hosting.GenericHost.Start() in     c:\TeamCity\buildAgent\work\nsb.master_7\src\hosting\NServiceBus.Hosting\GenericHost.cs:line 45
at NServiceBus.Hosting.Windows.WindowsHost.Start() in     c:\TeamCity\buildAgent\work\nsb.master_7\src\hosting\NServiceBus.Hosting.Windows\WindowsHost.cs:line 56
   at NServiceBus.Hosting.Windows.Program.<>c__DisplayClass8.<Main>b__4(WindowsHost service) in     c:\TeamCity\buildAgent\work\nsb.master_7\src\hosting\NServiceBus.Hosting.Windows\Program.cs:line 97
   at Topshelf.Internal.ControllerDelegates`1.StartActionObject(Object obj) in     c:\Projects\TopShelfForNSB\src\Topshelf\Internal\ControllerDelegates.cs:line 18
   at Topshelf.Internal.IsolatedServiceControllerWrapper`1.<>c__DisplayClass2\.    <set_StartAction>b__1(TService service) in    c:\Projects\TopShelfForNSB\src\Topshelf\Internal\IsolatedServiceControllerWrapper.cs:line 65
   at Topshelf.Internal.ServiceController`1.<.cctor>b__1(ServiceController`1 sc) in c:\Projects\TopShelfForNSB\src\Topshelf\Internal\ServiceController.cs:line 35
   at Magnum.StateMachine.LambdaAction`1.Execute(T instance, Event event, Object parameter) in :line 0
   at Magnum.StateMachine.EventActionList`1.Execute(T stateMachine, Event event, Object     parameter) in :line 0 
```

以下行记录在我的日志文件中：

```
INFO  2012-08-21 13:25:24,881 18494ms RoleManager            gureBusForEndpoint - Role NServiceBus.AsA_Server configured
DEBUG 2012-08-21 13:25:25,124 18738ms TransactionalTransport DebugFormat        - Setting throttling to: [1] message/s per second, sleep between receiving message: [800]
FATAL 2012-08-21 13:25:25,158 18772ms GenericHost            Start              - System.NullReferenceException: Object reference not set to an instance of an object.
   at NServiceBus.Unicast.Transport.Transactional.TransactionalTransport.NServiceBus.Unicast.Transport.ITransport.Start(Address address)
   at NServiceBus.Unicast.UnicastBus.NServiceBus.IStartableBus.Start(Action startupAction)
   at NServiceBus.Unicast.UnicastBus.NServiceBus.IStartableBus.Start()
   at NServiceBus.Hosting.GenericHost.Start() in  c:\TeamCity\buildAgent\work\nsb.master_7\src\hosting\NServiceBus.Hosting\GenericHost.cs:line 32 
```

我可以提供的最后一点信息（但也许是最重要的一个）是，如果我删除所有消息队列，则不会自动重新创建主队列。

这些私有队列被创建：

```
customer.project.schemaimportservice.error
customer.project.schemaimportservice.retries 
```

但是

```
customer.project.schemaimportservice 
```

队列丢失，即使它与我的命名空间匹配（请参阅帖子顶部）。

我究竟做错了什么？我必须在版本 3.2.7 中手动配置消息队列名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:11:25.183

我必须在 Init 类的 Configure.With() 部分下包含 .MsMqTransport() 。

# java - Websockets 是否适用于非常长的连接？

> ID：12054412
> 
> 赞同：17
> 
> 时间：2012-08-21T12:02:20.953
> 
> 标签：java, websocket, netty

我正在考虑将 Web 套接字`Netty`用于客户端连接到服务器以首先获取一些信息的应用程序。然后，它们由服务器注册，特定客户端信息的任何更改都会触发包含更新信息的客户端通知。在这种情况下，通信首先由客户端发起，然后由服务器发起。因此，Web 套接字似乎适用于这种情况。

但是，在它启动之后，我希望我的客户端能够随时得到服务器的通知。可能是几天后，也可能是几周后。所以，我的问题是使用网络套接字可以实现非常长的连接吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T14:58:19.223

绝对可以，但有几点需要注意。

如果您希望您的连接长时间连续保持活动状态，那么我建议向您的客户端添加一些逻辑，以便在 onclose 事件发生时重新连接（您将需要某种回退以防止在某些情况下出现紧密的重新连接循环）。

您可能还希望每 5 分钟左右发送一条 ping 消息（一条被忽略的简单消息），以防止空闲超时（这可能发生在网络连接的多个位置）。TCP 网络堆栈通常设置为终止已空闲 2 小时的连接，而 ping 消息将使它们保持活动状态。允许浏览器实现对应用程序不可见的 ping 消息，但这是可选的，因此如果您想保证这种行为，您应该在应用程序级别实现您自己的消息。

*注意：[Ping/Pong 帧](http://www.whatwg.org/specs/web-apps/current-work/multipage/network.html#ping-and-pong-frames)是 WebSocket 规范的一部分，但还不能通过 API 获得*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T13:40:02.227

长寿命连接是 WebSocket 的设计目的。根据您的客户端连接方式，这些连接的生命周期可能仍然受到限制，即在零售 DSL 连接上，通常至少每 24 小时强制重新连接一次。

然后，您似乎想要的是在原始 WebSocket（仅提供双向消息传递）之上发布和订阅消息传递模式。看看：[http](http://wamp.ws) ://wamp.ws （和[http://autobahn.ws](http://autobahn.ws)）。

免责声明：我是 WAMP 和 Autobahn 的原作者，为 Tavendo 工作。

# java - 从队列中获取 O(1) 时间内的最小值/最大值？

> ID：12054415
> 
> 赞同：14
> 
> 时间：2012-08-21T12:02:33.010
> 
> 标签：java, data-structures

如何以 0(1) 的时间复杂度随时从队列中检索最大和最小元素？早些时候我使用 Collections.max 和 min 来查找元素，但那将是 0(n)。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-02T22:26:21.310

存在这样一种结构，其行为类似于队列，但允许您在恒定时间内检索最小/最大值，实际上不是严格恒定的，它是摊销的恒定时间（您可以猜到命名为最小/最大队列）。有两种实现方式 - 使用两个堆栈或使用队列和双端队列。

双端队列的实现看起来不像这样（语言不可知）：

所以我们有一个最大元素的双端队列，前面的那个是所需的最大值，还有一个标准队列。

推送操作

1.  如果队列为空，只需将元素推送到队列和双端队列。
2.  如果队列不为空，则推入队列中的元素，从双端队列的后面删除所有严格小于我们现在推入的元素（它们肯定不是最大值，因为推入的元素更大并且将在队列中持续更长时间）并将当前元素推到双端队列的后面

删除操作

1.  如果双端队列的前端等于队列的前端，则两者都弹出（从前端的双端队列）
2.  如果双端队列的前端不等于队列的前端，则仅弹出队列，弹出的元素肯定不是最大的元素。

获得最大值

1.  它只是双端队列的第一个元素。

（应该添加很多论据以明确其工作原理，但下面介绍的第二个版本可能是这种必要性的答案）

Stack 的实现非常相似，我认为实现可能会更长一些，但可能更容易掌握。首先要注意的是，将最大元素存储在堆栈中很容易 - 容易练习（对于懒惰的人 -[堆栈与 find-min/find-max 比 O(n) 更有效？](https://stackoverflow.com/questions/7134129/stack-with-find-min-find-max-more-efficient-than-on)）。第二部分，如果第一次看到可能有点棘手，是使用两个堆栈实现队列非常容易，可以在这里找到 -[如何使用两个堆栈实现队列？](https://stackoverflow.com/questions/69192/how-to-implement-a-queue-using-two-stacks). 基本上就是这样 - 如果我们可以获得两个堆栈的最大元素，我们可以获得整个队列的最大元素（如果你想要一个更正式的论点，取最大值是关联的或类似的东西，但我打赌你不't，这真的很明显）。

最小版本是类比完成的。

一切也可以在 O(nlogn) 时间内使用一个集合（或类似的东西）来完成，但这毫无意义，因为 O(n) 中的常数非常小，它应该更快，但易于实现。

第一个版本中不感兴趣的部分：

希望我能有所帮助。并希望这没有说错什么。如果需要，可以在 C++/C 中给出一个简单的实现。非常感谢您对表格的任何反馈，因为这是我在任何地方的第一篇此类帖子:)（而且英语不是我的母语）。对正确性的一些确认也会很棒。

编辑：由于这个答案让我得到了一些分数，我觉得有必要对其进行一些清理，同时也对其进行一些扩展。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-21T12:05:51.937

对于最小/最大操作，您只有 2 种方法可以获得 O(1)：

*   如果结构已排序并且您知道最大值/最小值的位置
*   如果结构未排序且仅允许插入：您可以在每次插入项目时重新计算最小值/最大值并单独存储该值
*   如果结构未排序并允许插入和删除：我认为你不能比 O(n) 做得更好，[除非你使用多个集合](https://stackoverflow.com/a/12054481/829571)（但该解决方案不支持删除任何元素，只支持头/尾元素，队列应该是这种情况）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-29T22:31:51.250

[实现一个队列，其中 push_rear()、pop_front() 和 get_min() 都是常数时间操作](https://stackoverflow.com/questions/4802038/implement-a-queue-in-which-push-rear-pop-front-and-get-min-are-all-consta)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:06:30.083

我怀疑您正在尝试实现 PriorityQueue 的功能。这是一个排序队列，O(log N) 得到最低值。我不知道为什么你会想要最大值，因为队列只有一端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T22:57:06.613

这不是真正的队列，但您可以实现 Min-Max Heap。

[http://en.wikipedia.org/wiki/Min-max_heap](http://en.wikipedia.org/wiki/Min-max_heap)

基本上，它是一个堆，它的最大堆属性在偶数级别，最小堆属性在奇数级别。

它同时具有 O(1) MIN() 和 O(1) MAX() 操作。然而，迭代相当棘手，但它可以工作并满足您的要求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-25T06:07:48.467

我在这里发布了完整的代码，以便在恒定时间内在队列中找到 MIN 和 MAX。如果您有任何疑问，请随时与我联系。

队列

```
// Queue Interface
package com.java.util.collection.advance.datastructure.queue;
public interface Queue<E>{
    boolean addR(E e);
    E removeL();
    E element();
    E elementR();
    boolean isFull();
    boolean isEmpty();
    void trim();
} 
```

双端队列

```
package com.java.util.collection.advance.datastructure.queue;
/**
* A deque is a double-ended queue. You can insert items at either end and delete them
* from either end. The methods might be called insertLeft() and insertRight(), and 
* removeLeft() and removeRight().
* @author vsinha
*
* @param <E>
*/
public interface DeQueue<E> extends Queue<E>{

    boolean addL(E element);

    E removeR();

} 
```

查找最小最大队列

```
package com.java.util.collection.advance.datastructure.queue;

@SuppressWarnings("hiding")
public interface FindMinMaxQueue<Integer> extends Queue<Integer>{

    public Integer min();

    public Integer max();
} 
```

我的队列

```
package com.java.util.collection.advance.datastructure.queue;

import java.util.Arrays;

public class MyQueue<E> implements Queue<E>,DeQueue<E>{

    protected int front = 0;
    protected int rear =-1;
    protected E[] elements =null;
    private static final int DEFAULT_INTIAL_CAPACITY =100; 
    private int size =0;

    public MyQueue(){
        this(DEFAULT_INTIAL_CAPACITY);
    }
    @SuppressWarnings("unchecked")
    public MyQueue(int intialCapacity){
        if(intialCapacity < 0){
            throw new IllegalArgumentException("intial capacity can't be null");
        }
        elements =(E[]) new Object[intialCapacity];
    }
    @Override
    public boolean addR(E e) {
        if(! isFull()) {
            elements[++rear] = e;
            size++;
            return true;
        }
        return false;
    }

    @Override
    public E removeL() {
        E element =null;
        if(!isEmpty()){
            element=elements[front];
            // Nullify the reference
            elements[front] =null;
            ++front;
            --size;
        }
        return element;
    }

    @Override
    public E element() {
        E element =null;
        if(!isEmpty()){
            element=elements[front];
        }
        return element;
    }

    @Override
    public E elementR() {
        E element =null;
        if(!isEmpty()){
            element=elements[rear];
        }
        return element;
    }

    public boolean isFull() {
        return rear == elements.length;
    }

    public boolean isEmpty() {
        return size == 0;
    }
    Override
    public String toString() {
        return "MyQueue [front=" + front + ", rear=" + rear + ", elements="
                + Arrays.toString(elements) + ", size=" + size + "]";
    }
    @Override
    public void trim() {
        @SuppressWarnings("unchecked")
        E[] dest =(E[]) new Object[size];
        System.arraycopy(elements, front, dest, 0, size);
        elements = dest;
        front =0;
        rear=size-1;
    }
    @Override
    public boolean addL(E element) {
        if(front != 0) {
            elements[--front] = element;
            size++;
            return true;
        }
        return false;
    }

    @Override
    public E removeR() {
        E element =null;
        if(size > 0) {
            element=elements[rear];
            // Nullify the reference
            elements[rear] =null;
            --rear;
            --size;
        }
        return element;
    }

} 
```

MinAndMaxFinder 队列

```
package com.java.util.collection.advance.datastructure.queue;

public class MinAndMaxFinderQueue extends MyQueue<Integer> implements FindMinMaxQueue<Integer> {

    private Queue<Integer> maxValuesQueue =null;

    private Queue<Integer> minValuesQueue =null;

    public MinAndMaxFinderQueue (int intialCapacity){
        super(intialCapacity);
        maxValuesQueue =new MyQueue<Integer>(intialCapacity);
        minValuesQueue =new MyQueue<Integer>(intialCapacity);

    }
    @Override
    public boolean addR(Integer e) {
        if(super.addR(e)){
            if(max() == null || max() <= e){
                maxValuesQueue.addR(e);
            }

            if(min() == null || min() >= e){
                minValuesQueue.addR(e);
            }
            return true;
        }
        return false;
    }

    @Override
    public Integer removeL() {
        Integer element =super.removeL();
        if(element !=null){
            if(maxValuesQueue.element() == element){
                maxValuesQueue.removeL();
            }

            if(minValuesQueue.element() == element){
                minValuesQueue.removeL();
            }
        }
        //Need to re-generate MIN and MAX queue when the main queue is not empty and min/max queue is empty
        regenerateMin();
        regenerateMax();

        return element;
    }

    private void regenerateMin(){
        Integer current =null;
        if(!super.isEmpty() && min() ==null){
            for(int front = super.front; front<= super.rear;front++){
                current = (Integer)elements[front];
                if(min() == null || min() >= current){
                    minValuesQueue.addR(current);
                }

            }
        }
    }

    private void regenerateMax(){
        Integer current =null;
        if(!super.isEmpty() && max() ==null){
            for(int front = super.front; front<= super.rear;front++){
                current = (Integer)elements[front];
                if(max() == null || max() <= current){
                    maxValuesQueue.addR(current);
                }
            }
        }
    }
    public Integer min() {
        return minValuesQueue.elementR();
    }

    public Integer max() {
        return maxValuesQueue.elementR();
    }
    @Override
    public String toString() {
        return super.toString()+"\nMinAndMaxFinderQueue [maxValuesQueue=" + maxValuesQueue
                + ", minValuesQueue=" + minValuesQueue + "]";
    }

} 
```

测试

```
//Test class 
package com.java.util.collection.advance.datastructure.queue;

import java.util.Random;

public class MinMaxQueueFinderApp {

    public static void main(String[] args) {
        FindMinMaxQueue<Integer> queue =new MinAndMaxFinderQueue(10);
        Random random =new Random();
        for(int i =0; i< 10; i++){
            queue.addR(random.nextInt(100));
            System.out.println(queue);
            System.out.println("MAX :"+queue.max());
            System.out.println("MIN :"+queue.min());
        }
        System.out.println(queue);
        System.out.println("MAX :"+queue.max());
        System.out.println("MIN :"+queue.min());

        queue.removeL();
        System.out.println(queue);
        System.out.println("MAX :"+queue.max());
        System.out.println("MIN :"+queue.min());
        queue.removeL();
        System.out.println(queue);
        System.out.println("MAX :"+queue.max());
        System.out.println("MIN :"+queue.min());
        queue.removeL();
        System.out.println(queue);
        System.out.println("MAX :"+queue.max());
        System.out.println("MIN :"+queue.min());
        queue.removeL();
        System.out.println(queue);
        System.out.println("MAX :"+queue.max());
        System.out.println("MIN :"+queue.min());
        queue.removeL();
        System.out.println(queue);
        System.out.println("MAX :"+queue.max());
        System.out.println("MIN :"+queue.min());

        System.out.println(queue);
        System.out.println("MAX :"+queue.max());
        System.out.println("MIN :"+queue.min());
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-21T12:11:43.200

我将存储两个字段*minIndex*和*maxIndex*，它们将分别在数据结构中存储索引位置的最小值和最大值。

当新元素添加到队列中时，检查两件事：

1.  该元素小于*minIndex*位置的当前最小元素；如果是这样，则在插入后更新*minIndex的值。*
2.  该元素大于*maxIndex*位置的当前最大元素，并相应地更新引用。

这将为您提供当前最小值和最大值的 O(1) 渐近线。

# jquery - div高度动态增加

> ID：12054416
> 
> 赞同：0
> 
> 时间：2012-08-21T12:02:47.487
> 
> 标签：jquery, html

我正在使用此代码进行固定位置`<div>`

```
var div = $('.PropertyContainer');
var start = $(div).offset().top;

$.event.add(window, "scroll", function() {
    var p = $(window).scrollTop();
    $(div).css('position', ((p) > start) ? 'fixed' : 'static');
    $(div).css('top', ((p) > start) ? '0px' : '');
});​ 
```

但它增加了`<div>`滚动的高度，我不知道为什么。

[现场演示](http://jsfiddle.net/BJ4U3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:21:18.367

Somewhy`min-height`不适用于带有`position: static;`. 也许这个[jsfiddle](http://jsfiddle.net/BJ4U3/5/)会起作用。

实际上，您可以完全排除 javascript。只需设置`position: fixed;`为`.PropertyContainer`（[jsfiddle](http://jsfiddle.net/BJ4U3/7/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:15:14.170

因为您添加的事件是滚动。将“加载”替换为“滚动”并进行测试。

我编辑了你的现场演示：http: [//jsfiddle.net/BJ4U3/1/](http://jsfiddle.net/BJ4U3/1/)

# networking - 使用已注册的 IP 端口不好吗？

> ID：12054421
> 
> 赞同：1
> 
> 时间：2012-08-21T12:03:02.030
> 
> 标签：networking, ip, ports

使用在 IANA 注册的 IP 端口是非常糟糕的形式还是非常不可取的？

[他们的网站说](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt)：

> 在 IANA 注册之前或之前，不应使用分配的系统端口和用户端口。

人们倾向于遵循这个规则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:11:45.713

假设您在程序 (my_prog.bin) 上使用端口号 21，那么 FTP 服务将受到影响，因为端口号 21 已绑定到您的应用程序 (my_prog.bin)。

为了解决这个问题，最好使用端口号而不是保留端口。

更多的预留端口只能由以 root 身份运行的进程/守护进程绑定。

对于内部产品，您可以使用保留端口（您不好），但如果您打算公开您的应用程序，那么除了遵循 IANA 注册之外您别无选择。

# java - 不成功：在 Hibernate/JPA/HSQLDB 独立中更改表 XXX 删除约束 YYY

> ID：12054422
> 
> 赞同：41
> 
> 时间：2012-08-21T12:03:07.567
> 
> 标签：java, hibernate, jpa, hsqldb, in-memory

我正在尝试使用内存中的 HSQL DB 运行一些 Hibernate/JPA 示例。我收到的错误消息如下：

```
13:54:21,427 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table ReferringItem_map drop constraint FK5D4A98E0361647B8
13:54:21,427 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.REFERRINGITEM_MAP
13:54:21,427 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table ReferringItem_myCollection drop constraint FK75BA3266361647B8
13:54:21,427 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.REFERRINGITEM_MYCOLLECTION
13:54:21,428 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table ReferringItem_myList drop constraint FK6D37AA66361647B8
13:54:21,428 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.REFERRINGITEM_MYLIST
13:54:21,428 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table ReferringItem_mySet drop constraint FK3512699A361647B8
13:54:21,429 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.REFERRINGITEM_MYSET 
```

对应的类是：

```
@Entity
public class ReferringItem implements Serializable {

    @Id
    private long id;

    @ElementCollection
    private Collection<AnEmbeddable> myCollection
        = new ArrayList<AnEmbeddable>();

    @ElementCollection(fetch=FetchType.EAGER)
    private Set<Long> mySet = new HashSet<Long>();

    @ElementCollection(targetClass=String.class)
    private List myList = new ArrayList();

    @ElementCollection
    private Map<String,AnEmbeddable> map
        = new HashMap<String,AnEmbeddable>();

    public ReferringItem() { }

    // Setters & Getters

} 
```

可嵌入的是：

```
@Embeddable
public class AnEmbeddable implements Serializable {

    private String s;

    public AnEmbeddable() { }

    public String getS() {
        return s;
    }

    public void setS(String s) {
        this.s = s;
    }

} 
```

我的`persistence.xml`：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">

    <persistence-unit name="JPA" transaction-type="RESOURCE_LOCAL">

        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <class>com.jverstry.jpa.AuthorizedTypes.AuthorizedTypes</class>
        <class>com.jverstry.jpa.AuthorizedTypes.OtherEntity</class>
        <class>com.jverstry.jpa.AuthorizedTypes.SomeEmbeddable</class>

        <properties>
            <property name="javax.persistence.jdbc.driver" value="org.hsqldb.jdbcDriver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:hsqldb:mem:testdb"/>
            <property name="javax.persistence.jdbc.user" value="sa"/>
            <property name="javax.persistence.jdbc.password" value=""/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
        </properties>

    </persistence-unit>

</persistence> 
```

我在休眠`4.1.5.Final`和`HSQLDB 2.2.8`.

有谁知道是什么导致了这个问题以及如何解决它？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-21T13:08:10.520

您可以忽略这些错误。组合`create-drop`和空（内存中的情况总是如此）数据库为它尝试删除的每个数据库对象生成这些。原因是没有要删除的任何数据库对象 - DROP 语句是针对空数据库执行的。

Also with normal permanent database such a errors do come, because Hibernate does not figure out before executing DROP statements does added object exist in database or is it new.

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-12-20T07:21:28.303

This solution worked for me, as opposed to the other solution that's given. Apparently mileages vary.

This was my exact error:

```
HHH000389: Unsuccessful: alter table ... drop constraint FK_g1uebn6mqk9qiaw45vnacmyo2 if exists
Table "..." not found; SQL statement: ... 
```

This is my solution, overriding the H2 dialect:

```
package com.totaalsoftware.incidentmanager;

import org.hibernate.dialect.H2Dialect;

/**
 * Workaround.
 * 
 * @see https://hibernate.atlassian.net/browse/hhh-7002
 * 
 */
public class ImprovedH2Dialect extends H2Dialect {
    @Override
    public String getDropSequenceString(String sequenceName) {
        // Adding the "if exists" clause to avoid warnings
        return "drop sequence if exists " + sequenceName;
    }

    @Override
    public boolean dropConstraints() {
        // We don't need to drop constraints before dropping tables, that just
        // leads to error messages about missing tables when we don't have a
        // schema in the database
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-10-14T22:44:08.510

The Solution @Sander provided above works for MYSQL too. Just extend MySQL5InnoDBDialect instead like below:

```
import org.hibernate.dialect.MySQL5InnoDBDialect;

public class ImprovedMySQLDialect extends MySQL5InnoDBDialect {
    @Override
    public String getDropSequenceString(String sequenceName) {
        // Adding the "if exists" clause to avoid warnings
        return "drop sequence if exists " + sequenceName;
    }

    @Override
    public boolean dropConstraints() {
        // We don't need to drop constraints before dropping tables, that just leads to error
        // messages about missing tables when we don't have a schema in the database
        return false;
    }
} 
```

Then in your datasource file change the following line:

```
dialect = org.hibernate.dialect.MySQL5InnoDBDialect 
```

to

```
dialect = my.package.name.ImprovedMySQLDialect 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-07-06T23:47:43.510

Just set `dbCreate="update"`, and the errors go away immediately.

See: [https://stackoverflow.com/a/31257468/715608](https://stackoverflow.com/a/31257468/715608)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-12T15:43:51.090

The annoying error messages became more obnoxious stack traces at the start of every test using an in-memory database with HSQLDB and hbm2ddl.auto=create-drop.

The response to an [HSQLDB bug report](https://sourceforge.net/p/hsqldb/feature-requests/299/) suggested the use of DROP TABLE ... CASCADE rather than DROP CONSTRAINT IF EXISTS. Unfortunately the HSQLDB syntax for drop table is `DROP TABLE <table> [IF EXISTS] [RESTRICT | CASCADE];` Hibernate Dialect does not provide an easy mechanism for a Dialect to specify CASCADE following the final IF EXISTS clause. I wrote [a bug](https://hibernate.atlassian.net/browse/HHH-10951) for this limitation.

However, I was able to overcome the issue by creating a custom Dialect as follows:

```
public class HsqlDialectReplacement extends HSQLDialect {

  @Override
  public String getDropTableString( String tableName ) {
    // Append CASCADE to formatted DROP TABLE string
    final String superDrop = super.getDropTableString( tableName );
    return superDrop + " cascade";
  }

  @Override
  public boolean dropConstraints() {
      // Do not explicitly drop constraints, use DROP TABLE ... CASCADE
      return false;
  }

  @Override
  public Exporter<Table> getTableExporter() {
    // Must override TableExporter because it also formulates DROP TABLE strings
    synchronized( this ) {
      if( null == overrideExporter ) {
        overrideExporter = new HsqlExporter( super.getTableExporter() );
      }
    }

    return overrideExporter;
  }

  private Exporter<Table> overrideExporter = null;

  private static class HsqlExporter implements Exporter<Table> {
    HsqlExporter( Exporter<Table> impl ) {
      this.impl = impl;
    }

    @Override
    public String[] getSqlCreateStrings( Table exportable, Metadata metadata ) {
      return impl.getSqlCreateStrings( exportable, metadata );
    }

    @Override
    public String[] getSqlDropStrings( Table exportable, Metadata metadata ) {
      final String[] implDrop = impl.getSqlDropStrings( exportable, metadata );
      final String[] dropStrings = new String[implDrop.length];
      for( int i=0; i<implDrop.length; ++i ) {
        dropStrings[i] = implDrop[i] + " cascade";
      }
      return dropStrings;
    }

    private final Exporter<Table> impl;
  };
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-03T07:21:46.680

We faced same issue while trying to create a simple login window in `Spring`. There were two tables `user` and `role` both with primary key `id` type of `BIGINT`. These we mapped (`Many-to-Many`) into another table `user_roles` with two columns `user_id` and `role_id` as foreign keys.

The problem was the `role_id` column in `user_roles` table, it was of `int` type and not compatible for the foreign key to `role`. When the type was modified to `BIGINT` errors were rectified.

# c# - 加快大容量网络复制操作

> ID：12054423
> 
> 赞同：0
> 
> 时间：2012-08-21T12:03:09.750
> 
> 标签：c#, network-programming

我有一个系统，文件将从一个网络共享复制到另一个网络共享。文件本身不是很大，但要复制的文件数量为 20000。启动复制操作的 .NET 服务应用程序将在多台机器上运行，但源文件夹和目标文件夹是相同的。这个过程似乎慢得令人无法接受：

我们假设这是因为高网络 I/O 和磁盘 I/O。

隔离瓶颈的故障排除步骤应该是什么？就软件设计或硬件容量而言，有哪些解决方案可以加快流程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:27:28.607

首先，确定是磁盘还是网络。从您正在*写入*的磁盘开始。我编写了一个快速应用程序来启动几个线程并将随机数据写入几个固定大小的不同文件。测量需要多长时间。测量写入 1 个大文件，许多小文件。如果是磁盘，则很可能是由于许多单独的写入操作和慢速 RPM 驱动器造成的。或者您可能正在写入配置不当的磁盘阵列。

其次，检查您的网络。您的路由器性能不佳还是工作过度？确保您的所有机器和路由器就速度和协商达成一致。路由器上的 100Mbit-FullDuplex 和服务器上的 100Mbit-AutoNegotiate*不是*一回事。（对我们来说就是这种情况，并且帮助很大）

正如 Ben[评论](https://stackoverflow.com/questions/12054423/speed-up-high-volume-network-copy-operations#comment16096315_12054423)的那样，压缩文件并传输一个大文件会有所帮助。我遇到了这个问题，实际上我对文件进行了 TAR。它甚至比没有压缩的压缩还要快。我将[SharpZipLib](http://wiki.sharpdevelop.net/GZip-and-Tar-Samples.ashx)用于 zip 和 tar。

您还可以尝试在单独的线程中缓冲您的读取和写入。*对我们来说*， System.File.Copy在网络上甚至都不可靠。手动缓冲我们的文件传输显示*了一些*改进，但不足以证明复杂性是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:33:33.080

处理大量小文件总是比处理一个大文件中的相同数量的数据慢，因为所有额外的处理分配表、检查文件名引用等。当您在请求中添加网络延迟时，情况会更糟。

并不总是有用，但即使在千兆 LAN 上使用 Windows 文件共享压缩文件（不压缩压缩以使其快速）并在目的地再次提取可能会快得多

不过，Hometoasts 的答案很好，我投了一个赞成票，因为它涵盖了磁盘和网络 IO 瓶颈的可能性。我真的只提供了一种解决方法而不是答案。

很高兴我能够帮助一些实用且容易做的事情。:)

# facebook - facebook android 应用程序和 SDK 的问题

> ID：12054426
> 
> 赞同：0
> 
> 时间：2012-08-21T12:03:26.400
> 
> 标签：facebook, facebook-graph-api, facebook-android-sdk, facebook-app-requests

我正在为安卓开发一个应用程序。我正在使用长期访问令牌。我使用以下代码向 facebook 发送应用请求：

//显示相关部分的代码。

```
private WeakReference<FragmentActivity> mActivity;
mActivity = new WeakReference<FragmentActivity>(activity);
private Facebook mFacebook; //mFacebook is Facebook object and contains session info
mActivity.get() //Gets the current context
Bundle params = new Bundle();
params.putString("message","App request message");

mFacebook.dialog(mActivity.get(), "apprequests", params, new AppRequestsListener()); 
```

现在，如果手机上安装了 facebook 应用程序，此请求将失败并出现 API 错误 10。如果我从手机中删除 facebook 应用程序，此请求将开始工作。

android 上基于 facebook 的应用程序是否存在已知问题？

问候阿杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:02:13.897

对于登录调用，我们现在强制使用 Web 对话框（忽略已安装的应用程序）。一旦我们这样做了，即使对于应用程序请求，我们也会得到网络对话框（而不是原生应用程序对话框）

# c# - 在 C# 中停止 keydown 事件

> ID：12054431
> 
> 赞同：0
> 
> 时间：2012-08-21T12:03:44.217
> 
> 标签：c#, winforms, event-handling

在我目前的情况下如何停止 keydown 事件？

```
private void button1_Click(object sender, EventArgs e)
{
    textBox1.Focus();
    textBox1.KeyDown += new KeyEventHandler(MyKeyPress);
}

public void MyKeyPress(object sender, KeyEventArgs e)
{
    e.SuppressKeyPress = true;
    string first = e.Modifiers.ToString();

    if (first != "None")
    {
        if ((e.KeyCode != Keys.ShiftKey) && (e.KeyCode != Keys.Alt) && (e.KeyCode != Keys.ControlKey))
        {
            textBox1.Text = e.Modifiers.ToString() + " & " + e.KeyCode.ToString();
        }
    }
    else
    {
        textBox1.Text = e.KeyCode.ToString();
    }
    e.Handled = true;
} 
```

![在此处输入图像描述](../Images/a76c55754eb0c9e59abbfed29d327644.png)

如您所见-当用户单击按钮时触发事件..但是如何在第一次输出后停止它？

```
e.Handled = true; 
```

根本没有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:08:05.883

如果我说对了，并且您只想在单击按钮后处理一次 KeyPress 事件，那么您需要在`MyKeyPress`. 像这样：

```
public void MyKeyPress(object sender, KeyEventArgs e)
{
  textBox1.KeyDown -= new KeyEventHandler(MyKeyPress);
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:14:43.033

只需使用 PreviewKeyDown 事件而不是 KeyDown。;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:19:38.740

根据您对“*第一个输出*”的说明以及您的应用程序的性质，您需要解开事件处理程序，否则每次单击`Capture`按钮时，您都会分配*另一个*委托。

```
public void MyKeyPress(object sender, KeyEventArgs e) 
{ 
    e.SuppressKeyPress = true; 
    string first = e.Modifiers.ToString(); 

    if (first != "None") 
    { 
        if ((e.KeyCode != Keys.ShiftKey) && (e.KeyCode != Keys.Alt) && (e.KeyCode != Keys.ControlKey)) 
        { 
            textBox1.Text = e.Modifiers.ToString() + " & " + e.KeyCode.ToString();
            textBox1.KeyDown -= MyKeyPress; 
        } 
    } 
    else 
    { 
        textBox1.Text = e.KeyCode.ToString();
        textBox1.KeyDown -= MyKeyPress;
    } 
    e.Handled = true; 
} 
```

# c++ - C++：ostream 和 ostringstream 有什么区别？

> ID：12054438
> 
> 赞同：18
> 
> 时间：2012-08-21T12:03:56.083
> 
> 标签：c++, ostream, ostringstream

ostream 和 ostringstream 有什么区别？您什么时候会使用其中一种？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-21T14:16:47.633

简而言之：`ostringstream`提供一个`streambuf`，`ostream` 要求用户提供一个。

要了解其中的含义，有必要了解一点流的工作原理，我不确定 Web 上是否对此有很好的解释。的基本抽象`ostream`是格式化文本输出。你给它一个`int`or a `double`（或一个用户定义的类型——稍后会详细介绍），它会将它转换成一个字符流，类型为`char`。它对该流的作用取决于`streambuf`附加到它的哪个；这是策略模式的一个示例，其中`streambuf`是策略的抽象基类[1]。该标准提供了和的两种实现`streambuf`；在实践中，除了最琐碎的应用程序之外，您可能会拥有一些您自己实现的应用程序。`filebuf``stringbuf`

输出时，您总是使用`ostream`; 它 `<<`是定义运算符的类。您正在将数据格式化为字符流，而您并不真正关心流的最终位置。

创建实例时：如果创建`ostream`，则必须`streambuf`自己提供。更多时候，您会创建一个 `ofstream`或一个`ostringstream`. 这些都是“便利”类，它们派生自`ostream`，并`streambuf`为它提供了一个（`filebuf` 并且`stringbuf`，碰巧）。实际上，*他们*所做的只是提供必要的`streambuf`东西（这会影响构造函数和析构函数，而不是太多）；在 的情况下`ofstream`，还有一些额外的功能转发到`filebuf`界面中的附加功能。

`streambuf`当您定义自己的以提供`ostream`（和 `istream`，如果相关）的便利重载时，通常（但绝不要求） 与`ofstream`or 相同`ostringstream`。

同理，在创建实例时，通常使用“方便”派生类之一，而不是`ostream`直接使用并提供自己的 streambuf。

如果这一切看起来很复杂：iostream 类几乎使用了 C++ 的所有功能（虚拟函数、模板和函数重载都起着重要作用）。如果您只是在学习 C++，请不要太担心：只需在构造实例时使用`ofstream`or `ostringstream`，但将引用传递给`ostream`. 当您了解虚拟函数、模板和运算符重载等技术时，请返回 iostream 以了解它们在使代码更灵活方面所起的作用。

* * *

[1] 由于种种原因，`std::streambuf`实际上并不抽象。但是其中的虚函数的实现是没有用的；提取总是返回 EOF，插入总是失败。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T12:19:26.567

这是 C++ 流类的继承层次结构的好视图：) 该部分的[这篇](http://www.dyn-lab.com/articles/c-streams.html)文章 `3.1 ofstream and ostringstream`有你需要的东西。

本质上：`ofstream`类使之成为可能，`write data to files using stream operations`而`ostringstream`类使之成为可能`write to strings`。

![在此处输入图像描述](../Images/e90419dbaba897db5d1e719bf20efdfb.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-21T12:05:36.693

`ostream`更通用（子类支持写到不同的地方），`ostringstream`是一个特定的写到一个`string`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T12:05:41.997

`ostream`它背后没有`rdbuf`实现，而`ostringstream`使用 stringbuf。尝试过文档？

# ajax - Symfony CSRF 和 Ajax

> ID：12054449
> 
> 赞同：28
> 
> 时间：2012-08-21T12:04:46.773
> 
> 标签：ajax, symfony, csrf

我正在尝试在我的 Symfony 2 项目中实现一些 ajax 功能。使用 jquery 的 $.post 我想将一些数据发送回我的控制器。然而，当我只是 POST 数据时，没有 CSRF 保护，因为 symfony 的 csrf 保护似乎只适用于表单。

实现这一点的一种非常简单的方法是什么？

使用表单时，我只需执行 $form->isValid() 即可确定 CSRF 令牌是否通过。我目前正在将我想要发布的所有内容放在一个表格中，然后发布。这基本上意味着我只使用该表单来实现 CSRF 保护，这看起来很 hacky。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-21T12:20:46.073

在 Symfony2 中，CSRF 令牌默认基于会话。如果你想生成它，你只需要获取这个服务并调用生成方法：

```
//Symfony\Component\Form\Extension\Csrf\CsrfProvider\SessionCsrfProvider by default
$csrf = $this->get('form.csrf_provider');
//Intention should be empty string, if you did not define it in parameters
$token = $csrf->generateCsrfToken($intention); 

return new Response($token); 
```

[这个问题](https://stackoverflow.com/q/11466837/970721)可能对你有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T21:03:43.960

我有这个问题，间歇性的。原来这不是因为我的 ajax，而是因为 Silex 给了你一个弃用的`DefaultCsrfProvider`，它使用会话 ID 本身作为令牌的一部分，为了安全起见，我随机更改了 ID。相反，明确告诉它使用新的`CsrfTokenManager`修复它，因为它会生成一个令牌并将其存储**在**会话中，这样会话 ID 可以更改而不会影响令牌的有效性。

```
/** Use a CSRF provider that does not depend on the session ID being constant. We change the session ID randomly */
$app['form.csrf_provider'] = $app->share(function ($app) {
    $storage = new Symfony\Component\Security\Csrf\TokenStorage\SessionTokenStorage($app['session']);
    return new Symfony\Component\Security\Csrf\CsrfTokenManager(null, $storage);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:12:41.173

你应该试试这个片段。Symfony 表单应该生成特殊的 _csrf_token 应该与 post 请求一起发送。如果没有此值，将引发安全警报。

当然#targetForm应该被form id和/endpoint替换为目标ajax url

```
$('#targetForm').bind('submit', function(e) {

    e.preventDefault();
    var data = $(this).serialize();

    $.post('/endpoint', data, function(data) {
        // some logic here
    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-10T16:23:17.250

在 Symfony 4+ 中，您可以在控制器或操作或任何地方使用依赖注入，例如，如果您正在提交表单并希望刷新同一表单的令牌，则`$tokenId`它是表单类型类的 FQDN：

```
namespace App\Controller;

use App\Form\MyFormType;
use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\Security\Csrf\CsrfTokenManagerInterface;

class MyController extends AbstractController
{
    public function submit(CsrfTokenManagerInterface $tokenManager): JsonResponse
    {
        // ...
        $token = $tokenManager->refreshToken(MyFormType::class);
        return new JsonResponse(['token' => $token->getValue()]);
    }
} 
```

在您的 JavaScript 中，您可以更新现有的 token `<input>`。

```
const token = document.getElementById('_token');
fetch(url, opts)
    .then(resp => resp.json())
    .then(response => {
        if (response.token) {
            token.value = response.token;
        }
    }); 
```

# ember.js - Ember.js 助手和 Handlebars.js（仅运行时构建）

> ID：12054452
> 
> 赞同：5
> 
> 时间：2012-08-21T12:05:01.523
> 
> 标签：ember.js, handlebars.js

有什么方法可以预编译 Handlebars 模板，以便它了解 Ember.js 助手，如“action”、“view”等？

我问的原因是因为我需要将 Ember.js 与 Handlebars 的仅运行时版本一起使用（由于 Google Chrome 中的 CSP），而且 Ember.js 似乎目前并不完全支持这种情况： [https： //github.com/emberjs/ember.js/issues/1303](https://github.com/emberjs/ember.js/issues/1303)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T03:17:26.203

`Ember.Handlebars.precompile`您可以使用( [ember-handlebars/lib/ext.js#L104](https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/ext.js#L104) )预编译 Ember Handlebars 模板。

用于在浏览器外部（例如在节点中）进行预编译的基本策略是：

*   加载handlebars.js
*   加载 ember.js
*   填充一些 Ember 期望的浏览器 API（这在 1.0 中不应该是必需的，但现在是必需的）。
*   `template = Ember.Handlebars.precompile(string)`
*   `Ember.TEMPLATES[name] = Ember.Handlebars.template(template)`

如果您拥有带有扩展名的资产，Rails的`ember-rails`gem 会为您执行此操作`.handlebars`。

`ember-rails`gem 还维护一个 shim文件，您可以使用该`.js`文件在其他非浏览器环境中进行预编译（[ember-precompiler.js](https://github.com/emberjs/ember-rails/blob/master/lib/ember/handlebars/assets/ember-precompiler.js)）。

# session - Tomcat Session 数据混杂

> ID：12054456
> 
> 赞同：0
> 
> 时间：2012-08-21T12:05:15.073
> 
> 标签：session, iis-7, struts2, tomcat6

我们在 Windows 2008 RC2 服务器上的 IIS7 后面运行 Tomcat。

我们在会话中为用户存储了一些变量，有时一个用户的会话数据会被另一个不使用同一浏览器的用户获取。这怎么可能。

问候， 阿比吉特

# actionscript-3 - AS3/AIR - 将超大图像保存为 PNG

> ID：12054463
> 
> 赞同：1
> 
> 时间：2012-08-21T12:05:58.893
> 
> 标签：actionscript-3, air, png, sprite, bitmapdata

我正在为自己制作一个程序，它可以打开未排列的精灵表，根据 XML 文件排列它们，然后将它们保存为 PNG。它的作用是加载未排列的工作表并将其放入 a 中`BitmapData`，然后根据特定的 XML 文件抓取工作表上的每一帧（使用`BitmapData.copypixels()`），并将结果`Bitmap`按顺序添加到数组中。然后它通过将这些`Bitmap`s 添加到`Sprite`对象来排列它们，相应地创建新行。本质上，我最终得到的是一个按我想要的方式排列的`Sprite`容器。`Bitmaps`

现在我通常从这里做的是将它绘制`Sprite`到一个`BitmapData`using上`BitmapData.draw()`，它可以工作，然后我继续将它编码为 PNG 并保存它。这一切都有效，除了一种情况。有时我会从多个无组织的 spritesheet 中制作一个排列好的 spritesheet，这会导致一张相当大的表格。在一种情况下，生成的表格非常大，出于某种原因`BitmapData`，我想绘制的表格不会接受那么大。也就是说，我创建了一个新的`BitmapData`，其尺寸等于`Sprite`，但是当我尝试这样做时，我得到了这个错误：

```
ArgumentError: Error #2015: Invalid BitmapData. 
```

据我所知，只有当我制作`BitmapData`宽度和/或高度为 0 的 a 或超出最大尺寸时才会发生这种情况。如果不是因为 Flash 11 和 AIR 3 没有限制，我认为是后者。

无论如何，我还没有找到解决方法，所以基本上这是我的问题：有没有办法以不同的方式做到这一点？例如，我可以在`Sprite`不制作 a的情况下获取 a 的像素数据`BitmapData`吗？或者，我可以以某种方式将数据存储在 a`BitmapData`中，而不必为其提供与图像相同的尺寸吗？还是有一些不同的方法可以完全做到这一点？

我意识到我可以将图像分成 2 个单独`BitmapData`的 s，但我想知道在诉诸此方法之前是否有其他选择。

顺便说一句，如果重要的话，它是一个使用 FlashDevelop 和 Flex 4 SDK 制作的 Adob​​e AIR 应用程序。我正在使用[PNGEncoder2](https://github.com/cameron314/PNGEncoder2)对我保存的最终精灵表进行编码。

编辑：我发现问题似乎是我的电脑根本无法处理`BitmapData`所需大小的 a。我尝试将其拆分为两个单独`BitmapData`的 s，但不幸的是，在创建第二个时`BitmapData`我收到了相同的错误。因此，我的 PC 内存中似乎无法同时包含大量数据`BitmapData`。不幸的是，这意味着我什至不能使用 g10 的解决方案，即`BitmapDatas`使用他链接到的 PNG 编码器将两个合并为一个 PNG。到目前为止，我的解决方案是将图像的一半存储到 a`BitmapData`中，对其进行编码，然后`dispose()`将`BitmapData`另一半存储在其中并对其进行编码。然后我保存`ByteArrays`（这是编码的结果）作为单独的图像，我可以使用外部程序将其重建为一个。

所以现在，我的问题更多是“我可以以某种方式将其保存为单个 PNG”，而不是“我可以将其作为单个 PNG 保存`BitmapData`”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:45:44.023

我也遇到了这个问题，发现 19,000 x 19,000 像素之间存在限制。那是在带有 Flash Player 11.3 的 Windows 7 上，当然 Flash Player 10 的限制要低得多，请查看此[页面了解详细信息](http://helpx.adobe.com/flash-player/kb/size-limits-swf-bitmap-files.html)。

这是我用于测试的代码：

```
package
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Sprite;
    import flash.display.StageAlign;

    public class PNGTest extends Sprite
    {

        static var IMAGE_DIM = 18000;
        public function PNGTest()
        {
            this.stage.align = StageAlign.TOP_LEFT;
            var bmData = new BitmapData(IMAGE_DIM, IMAGE_DIM, false, 0xFF0000);
            var image:Bitmap = new Bitmap(bmData);
            this.addChild(image);
        }
    }
} 
```

如果您需要的图像大于您所定位的 Flash Player 版本所支持的图像，只需拆分图像即可。您也可以将图像数据复制到 ByteArray 中，不知道最大大小是多少。请参阅[如何将字节数组转换为图像或图像到字节数组？](https://stackoverflow.com/questions/906791/how-to-convert-bytearray-to-image-or-image-to-bytearray)对于一些示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:51:11.347

从 inspirit.ru 检查异步 PNGencoder：[http](http://blog.inspirit.ru/?p=378)
://blog.inspirit.ru/?p=378 提供了 PNGencoder.swc 和使用示例。
图像大小没有限制，只需要一些时间来编码（可能显示进度条）。

编辑：
BitmapData 对象的尺寸（像素数量）有上限，但 PNG 没有，请查看[http://code.google.com/p/in-spirit/wiki/PNGEncoder](http://code.google.com/p/in-spirit/wiki/PNGEncoder)上的使用信息，尤其是 getNextBitmapsRow 回调

专门针对您的情况，而不是在 1 个大的 BitmapData 对象中绘制您的 Sprite，此 PNGEncoder 允许您将您的大 Sprite 拆分为几个小的 BitmapData 对象（例如，从 35,000 x 60,000 像素的 Sprite 中，您可以制作 35 列 x 60 行 = 2100 个 1000x1000 像素的 BitmapData 对象），它通过回调机制实现：创建并传递第一个 BitmapData 对象，lib 对其进行编码，并在完成时调用回调，此时您创建并传递下一个 BitmapData 进行编码。

# javascript - 如何从 web 服务中的数据表中获取值到 HTML ajax 调用

> ID：12054464
> 
> 赞同：0
> 
> 时间：2012-08-21T12:06:01.127
> 
> 标签：javascript, jquery, asp.net, web-services, html

我的网络服务中有一个数据表，它是这样的

```
 [WebMethod]
        [ScriptMethod]
        public DataTable mydbCon()
            {
SqlConnection SqlCon = new SqlConnection(@"Data Source=myds;Initial Catalog=name;Persist Security Info=True;User ID=sa;Password=pwd");
                SqlCon.Open();
                SqlCommand SqlComm = new SqlCommand();
                SqlComm.Connection = SqlCon;
                SqlComm.CommandType = CommandType.Text;
                SqlComm.CommandText = "select password from tbl_login where username='aby';";
                DataTable EmployeeDt = new DataTable("tbl_login");
                SqlDataAdapter SqlDa = new SqlDataAdapter(SqlComm);
                SqlDa.Fill(EmployeeDt);
                return EmployeeDt;
            } 
```

我在我的 HTML 页面中有一个 Ajax 调用，它是这样的，我没有得到一个显示错误消息的值

```
<script type="text/javascript">
       function GetAge() {
           jQuery.support.cors = true;
           $.ajax({
               type: "POST",
               contentType: "application/json; charset=utf-8",
               dataType: "json",
               jsonp: 'jsonp_callback',
               async: false,
               url: "http://localhost:50113/Service1.asmx/mydbCon",
               data: "{}",
               success: function (msg) {
                    $('#divToBeWorkedOn').html(msg.d);
                },
               error: function (e) {
                   $('#divToBeWorkedOn').html("unavailable");
               }
           });
       }
      </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:40:28.257

[从jQuery 文档](http://api.jquery.com/jQuery.ajax/)中提取：“json”：将响应评估为 JSON 并返回一个 JavaScript 对象。在 jQuery 1.4 中，JSON 数据以严格的方式解析；任何格式错误的 JSON 都会被拒绝并引发解析错误。（有关正确的 JSON 格式的更多信息，请参阅 json.org。）

因此，如果您的 web 服务没有以正确的 JSON 格式响应，则会执行错误案例。

所以这里有两个解决方案：

1.  正如[sQve](https://stackoverflow.com/users/1606912/sqve)所建议的，只需尝试将 [ScriptMethod(ResponseFormat = ResponseFormat.Json)] 添加到 JSON 格式的响应中。

2.  更改您的 javascript 代码以接受直接数据并仅从您的网络服务返回“msg.d”数据：

    ```
    <script type="text/javascript">
        function GetAge() {
            jQuery.support.cors = true;
            $.ajax({
                type: "POST",
                async: false,
                url: "http://localhost:50113/Service1.asmx/mydbCon",
                success: function (msg) {
                    $('#divToBeWorkedOn').html(msg);
                },
                error: function (e) {
                    $('#divToBeWorkedOn').html("unavailable");
                }
          });
      }
      </script> 
    ```

如果您只使用一个属性，为什么要发布包含许多数据的完整 JSON 对象（序列化和反序列化）？让它简单:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T05:48:45.970

最后我找到了你需要在'msg'行之后添加'.text'的答案 $('#divToBeWorkedOn').html(msg.text);

```
<script type="text/javascript">
     function GetAge() {
         jQuery.support.cors = true;
         $.ajax({
             type: "POST",
             async: false,
             url: 'http://localhost:50113/Service1.asmx/mydbCon?wsdl',
             success: function (msg) {
                   $('#divToBeWorkedOn').html(msg.text); 

             },
             error: function (e) {
                 $('#divToBeWorkedOn').html("unavailable");
             }
         });
     } 
  </script> 
```

感谢 palmpalm、Yuriy 和其他所有人的支持

# ruby-on-rails - rails中正确的日期时间格式

> ID：12054471
> 
> 赞同：0
> 
> 时间：2012-08-21T12:06:33.573
> 
> 标签：ruby-on-rails

在我的应用程序中，我想以这种格式显示日期：2012 年 8 月 21 日晚上 7:30。我已经像这样使用 strftime 完成了它：

```
<%= @project.planned_start_date.strftime("%d %B %Y") if @project.planned_start_date-%> 
```

它显示如下：2012 年 8 月 2 日有人可以帮我解决如何获取上述日期和时间格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:12:34.767

检查[strftime 方法](http://ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)，它包含所有可能的转换字符及其代表的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:41:25.447

您是否尝试过使用以下 strftime 选项格式化您的时间值？：

```
<%= @project.planned_start_date.strftime("%d %b, %Y %I:%M %p") unless @project.planned_start_date.blank? %> 
```

**编辑：**这就是你所需要的

```
<%= ActiveSupport::Inflector.ordinalize(@project.planned_start_date.strftime("%d").to_i) + @project.planned_start_date.strftime(" %b, %Y %I:%M %p") unless @project.planned_start_date.blank? %> 
```

**输出：** “2012 年 8 月 23 日上午 9:19”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:52:02.703

你可以试试这个。

```
 <%= @project.planned_start_date.strftime("%d %b, %Y %I:%M %p") if @project.planned_start_date.present? -%> 
```

输出：2012-08-21 07:30 PM

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T12:59:09.967

```
>> t = Time.now
=> Tue Aug 21 08:59:54 -0400 2012
>> t.strftime("#{t.day.ordinalize} %B, %Y %I:%M %p")
=> 21st August, 2012 08:59 AM 
```

# java - 与连接到 Java 服务器的 Firefox/Linux 上的 Flash 应用程序的 SSL 握手失败

> ID：12054477
> 
> 赞同：1
> 
> 时间：2012-08-21T12:06:46.900
> 
> 标签：java, linux, flash, firefox, ssl

我在奇怪的特定条件下收到“unknown_ca”错误：Flash 应用程序必须在 Linux 上并通过 Firefox 运行。

从 Windows (Chrome/Firefox/IE) 或 Linux 上的 Chrome 运行时，它连接良好。

起初我认为这是一个密码问题，因为每个成功的连接都使用 TLS 密码，而 Linux-Fox 尝试使用 SSL。但是，如果我强制服务器只接受 Linux-Fox 使用的特定密码，其他一切仍然可以连接。

Linux-Fox 连接上的调试信息仅在服务器握手后显示：

```
[Raw read]: length = 5
0000: 15 03 01 00 02                                     .....
[Raw read]: length = 2
0000: 02 30                                              .0
Thread-11, READ: TLSv1 Alert, length = 2
Thread-11, RECV TLSv1 ALERT:  fatal, unknown_ca
%% Invalidated:  [Session-3, SSL_RSA_WITH_RC4_128_MD5]
Thread-11, called closeSocket()
Thread-11, handling exception: javax.net.ssl.SSLHandshakeException: Received fatal alert: unknown_ca 
```

而 Windows-Fox 显示：

```
[Raw read]: length = 5
0000: 16 03 01 01 06                                     .....
[Raw read]: length = 262
0000: 10 00 01 02 01 00 70 BD   39 2A 63 5D 09 9D D8 67  ......p.9*c]...g
0010: 76 15 02 F6 D6 BD B6 68   95 65 C5 39 D8 C8 A2 86  v......h.e.9....
0020: 5B 0C FA 54 66 65 8C 20   EA 5C DE 49 3C CE 25 0C  [..Tfe. .\.I<.%.
0030: DC 39 9A 18 0E 9F C0 E4   38 1D 1B FA 96 CF B0 70  .9......8......p
0040: 1F E0 ED 01 B7 92 93 0C   F0 0B A9 25 0B 92 83 7E  ...........%....
0050: 2C 3F 47 4E 65 C9 60 11   C6 A2 54 68 A4 68 A5 24  ,?GNe.`...Th.h.$
0060: 99 6B 69 09 25 7F 09 E1   4E 1D 5E C0 34 4C 6C C6  .ki.%...N.^.4Ll.
0070: 4A 16 E5 6C 4E 56 57 92   97 ED B5 25 C1 9B F0 10  J..lNVW....%....
0080: 8B D3 5B CD C1 58 CD 1C   F9 E7 85 D8 42 89 53 E6  ..[..X......B.S.
0090: 39 D2 AD A8 C3 C0 17 B9   A1 2E 5C F0 50 80 EB 8C  9.........\.P...
00A0: 31 83 A4 87 14 D3 F8 61   01 92 67 B9 6F B2 3E 7D  1......a..g.o.>.
00B0: DA BE EC 87 9B 2C 19 A5   31 E2 76 5E B8 2D 9B 66  .....,..1.v^.-.f
00C0: 9E E1 12 6F CC A7 B9 3B   E1 5D B0 75 A2 47 64 92  ...o...;.].u.Gd.
00D0: 56 4D C4 CD F5 A3 79 F4   89 58 6F 61 5E 74 89 F5  VM....y..Xoa^t..
00E0: FE 9B 79 D4 E2 3D 02 2E   FD A8 8D 7C 25 D4 A4 41  ..y..=......%..A
00F0: 87 7D B3 96 AA C4 B6 00   7F 3A 99 64 C6 A1 FD F6  .........:.d....
0100: 8C 66 E5 D1 F3 5C                                  .f...\ 
```

那个“.0”是一个错误代码，表明 Flash 方面有问题吗？有什么方法可以从 Flash 中获取详细的调试信息吗？

# zooming - 是否有任何解决方法可以禁用 Google 地球插件的“缩放时自动倾斜”功能？

> ID：12054480
> 
> 赞同：3
> 
> 时间：2012-08-21T12:06:55.773
> 
> 标签：zooming, google-earth-plugin, tilt

最新版本的 Google 地球附带了一项名为“缩放时自动倾斜”的功能。如果启用，当您靠近地面时，Google 地球会自动将相机向地平线倾斜。可以从 GUI 中禁用此功能（首选项 -> 导航选项卡）。不幸的是，到目前为止，我还没有找到禁用 Google 地球插件的方法。

似乎客户端设置对应于注册表项 (HKCU\Software\Google\Google Earth Plus\SwoopEnabled)。在 Google 地球插件注册表分支 (HKCU\Software\Google\GoogleEarthPlugin\SwoopEnabled) 中存在一个同名键，但是，将值“false”分配给它根本没有任何效果。与客户端不同，插件似乎不评估设置。

有一个 API 方法可以禁用地面自动转换 (void GEOptions.setAutoGroundLevelViewEnabled(bool))，但是这不会禁用自动倾斜行为。没有像“GEOptions.setSwoopEnabled(bool)”这样的方法，尽管在我看来拥有一个会很有意义。

Google Earth API 问题跟踪器将此问题列为问题：

[http://code.google.com/p/earth-api-samples/issues/detail?id=23](http://code.google.com/p/earth-api-samples/issues/detail?id=23)

但是，该条目是从 2008 年 8 月开始的，在我看来，Google 不太可能很快修复它。因此，我的问题是：是否有任何解决方法/hack/tweak.. 强制插件禁用烦人的自动倾斜功能？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:25:49.057

不，AFAIK 无法禁用此行为。

...也就是说，如果视图高度低于某个高度，您可能会使用一些事件和条件逻辑以编程方式设置倾斜度*。*但是，这可能会引入其他问题，例如无法将视图完全倾斜到某个高度以下。虽然这对于您的实施来说可能是可以接受的......

无论如何，以下内容可能对您有用，尽管它是写在这里并且未经测试的。

```
google.earth.addEventListener(ge, 'frameend', setView);

var setView = function() {
  var camera = ge.getView().copyAsCamera(ge.ALTITUDE_RELATIVE_TO_GROUND);
  if(camera.getAltitude() < BASE_ALTITUDE && camera.getTilt() >= AUTO_TILT_AMMOUNT) {
     var speed = ge.getOptions().getFlyToSpeed();
     ge.getOptions().setFlyToSpeed(ge.SPEED_TELEPORT);
     camera.setTilt(0);
     ge.getView().setAbstractView(camera);
     ge.getOptions().setFlyToSpeed(speed);
  }
} 
```

`BASE_ALTITUDE`“猛扑”开始的高度在哪里，`AUTO_TILT_AMMOUNT`一旦“猛扑”，错误，猛扑，倾斜值在哪里。

# sql-server - 在 FTP 推送上重命名文件 | SQL

> ID：12054482
> 
> 赞同：0
> 
> 时间：2012-08-21T12:07:04.713
> 
> 标签：sql-server, tsql, ftp

下面是我将带有 SQL 的文件推送到另一台服务器的代码。

```
 EXEC [ftpPushRegisteredSSIS] '12345', '54321', 'C:\TCC\Manufacturer Integration\100_110 – DiaryBelle','Daily_Dairybelle.txt', '111.111.111.11', 1, 1 
```

* * *

```
 CREATE PROCEDURE [dbo].[FtpPushRegisterSSIS]
    @User VARCHAR(50),
    @Password VARCHAR(50),
    @sourceDir VARCHAR(250),
    @SourceFiles VARCHAR(50),
    @DestinationFTPServer VARCHAR(50),
    @DestinationFTPPath VARCHAR(250),
    @Overwrite BIT,
    @isASCII BIT

AS
BEGIN
    DECLARE @overwriteTF VARCHAR(5)
    DECLARE @isASCIITF VARCHAR(5)

    SET @overwriteTF = 'true'
    SET @isASCIITF = 'true'

    IF @Overwrite = 0
    BEGIN
        SET @overwriteTF = 'false'
    END

    IF @isASCII = 0
    BEGIN
        SET @isASCIITF = 'false'
    END

--  DECLARE @FtpPackage VARCHAR(150)
--  SET @FtpPackage = 'E:\ftpProcTesting\ftpPush.dtsx'
    DECLARE @cmd VARCHAR(1000)
    DECLARE @params VARCHAR(MAX)
    SET @params =   ' /set \package.variables[ftpUser].Value;"' +           @User + '"'+
                    ' /set \package.variables[ftpServer].Value;"' +         @DestinationFTPServer + '"'+
                    ' /set \package.Variables[sourceDir].Value;"' +         @sourceDir + '"' +
                    ' /set \package.variables[sourceFiles].Value;"' +       @SourceFiles + '"'+
                    ' /set \package.variables[destiPath].Value;"/' +        @DestinationFTPPath + '"' +
                    ' /set \package.variables[ftpPass].Value;"' +           @Password + '"' +
                    ' /set \package.variables[overwrite].Value;"' +         @overwriteTF + '"' +
                    ' /set \package.variables[isASCII].Value;"' +           @isASCIITF + '"'

    -- FOR Filesystem package SET @cmd = 'dtexec /f "'+@FtpPackage+'" /Rep N' --set N to V for verbose logging
    SET @cmd = 'dtexec /sq ' + 'ftpPush' + ' /ser DBNAME '
    SET @cmd = @cmd + @params

    CREATE TABLE #output ([output] VARCHAR(500))
    INSERT INTO #output
    EXEC master.dbo.xp_cmdshell @cmd -- ,NO_OUTPUT

    IF  (
            SELECT COUNT(*)
            FROM #output
            WHERE [output] LIKE '%fail%'
            OR [output] LIKE '%error%'
            OR [output] LIKE '%not valid%'
        ) > 0
    BEGIN
        SELECT * FROM #output
        RAISERROR('***|||FTP Operation FAILED|||***',15,1)
    END

    SELECT * FROM #output

END

GO 
```

当文件`Dairybelle.txt`到达服务器时，我希望它在文件名前面包含 getDate()。

像这样的东西：`2012-08-01_Dairybelle.txt`

我可以对我的代码进行哪些更改来执行此操作？

我不想更改当前位置的文件名，我只想在发送时更改它。因此，该名称仍将始终`Dairybelle.txt`在我的服务器上，但是当它到达它们时，它将具有重命名的文件。

我知道我可以编写代码来更改文件名，然后在发送后将其更改回来，但我确定有更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:19:29.257

我最终使用了 SSIS，它更容易！

[请参阅此处的链接！](http://beyondrelational.com/modules/2/blogs/43/posts/10203/ssis-file-operations-copy-file-move-file-rename-file-and-delete-file.aspx)

# jquery - 在 mvc3 中处理会话超时

> ID：12054483
> 
> 赞同：0
> 
> 时间：2012-08-21T12:07:09.510
> 
> 标签：jquery, asp.net-mvc-3, session, razor, global-asax

在我的 mvc3 (razor) 应用程序中，我想通过显示一个`popup`for来处理会话超时`re entering User id and password`

我怎样才能把它写成常见 `Session_End()` 的`Global.asax`

是否可以`display a jquery model popup`从这里

有什么方法可以在不丢失数据的情况下实现这一点，请分享..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:46:26.117

您可以将 session_end 与操作过滤器和 jquery 结合使用。

1.  设置`HttpContext.Current.Items['sessionEnded']`为真`Session_End()`
2.  创建一个检查该项目并设置`ViewBag.SessionEnded`为 true的操作过滤器
3.  `ViewBag.SessionEnded`如果为真，则在您的布局中触发 javascript 。

# java - 如何在java标签框中输入摄氏度？

> ID：12054485
> 
> 赞同：1
> 
> 时间：2012-08-21T12:07:09.283
> 
> 标签：java, netbeans, label, hex

我在 java 标签框中输入摄氏度的符号时遇到麻烦。

![摄氏度](../Images/0e7caf09dc264c813534e8bb23bdfcc5.png)

我参考了一本书，得到了以下输入学位符号的说明：

> 1.  确保 numlock 已打开
>     
>     
> 2.  然后按 Alt 输入 0186

但问题是，当我在笔记本电脑上按下 numlock（它也是我的 F11 键）时，它会打开构建主项目的窗口。

其次，当我按 Alt 并键入 0186 时出现在标签中。

你能描述一下这个数字（0186）是什么，以及为什么我们不能简单地使用 186 而不是 0186。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:21:15.660

首先，一些背景知识：每种字体都有大约 26 到 20'000 个不同的“字形”（“a”是“小写 A”的字形，即您认为有意义的形状）。[Unicode 标准](http://unicode.org/charts/)列出了所有这些。

由于字形比键盘上的键多得多，因此必须找到解决方案。该解决方案是`Alt`+字符代码。请参阅此处获取列表：[Windows Alt 键代码](http://tlt.its.psu.edu/suggestions/international/accents/codealt.html)。它还包含如何输入代码的[详细说明。](http://tlt.its.psu.edu/suggestions/international/accents/codealt.html#using)

顺便说一下，代码`°`不是0186。`0176`

要在您的笔记本电脑上启用数字锁定（它的键比标准的 105 键键盘更少），您需要按“功能”键（通常在左下角某处的蓝色 F）加上`F11`

最后，为什么`0176`而不是`176`. 实际上，它`0`告诉 Windows 您将要输入 Alt 代码。这是必要的，因为 Alt 通常控制 UI（通过快捷方式激活控件和菜单）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:13:40.687

只需从[Wikipedia 文章](http://en.wikipedia.org/wiki/Degree_symbol)中复制并粘贴它。

或者，如果您在 HTML 上下文中使用 HTML 字符代码`&deg;`，例如在 Web 开发中，则可以使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:17:48.177

你用的是什么IDE？如果它支持其他可能更容易输入符号的方法，例如从某处复制和粘贴符号（也许是[维基百科](http://en.wikipedia.org/wiki/Degree_symbol)？）。

您的键盘是否有一个`function`或`fn`键，您可以按下该键以使您的`F11`键作为`Num Lock`键工作？应该有某种状态 LED 显示`Num Lock`已成功启用。当您键入`Alt`+0176 时，您将不得不使用小键盘（在某些笔记本电脑上，这些小键盘可能会与键盘的主要 QWERTY 区域重叠，通常在右侧，从`u``i``o`此处或附近开始）。该号码必须包含所有 4 位数字，因为它是一个 Unicode 代码点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T12:36:10.807

据我所知，Java 中没有任何内容可以阻止将特殊字符输入到文本字段中。我可以在我的 PC 和笔记本电脑上的 JTextField 中输入度数符号 º。我不确定您的错误是否与 Java 有关 - 这听起来像是您的笔记本电脑上的密钥冲突，您的 numlock 键也是 F11。您不需要为此操作按住 numlock。**尝试在netbeans之外**打开num lock ，然后尝试输入数字。

同样，如果您在 netbeans 之外运行程序（您可以双击 dist 文件夹中的 jar 文件），那么这个 F11/numlock 冲突问题应该会消失。

**为什么0186是度数符号？**

字符 186 是扩展[ASCII 图表](http://www.ascii-code.com/)的一部分。它是几乎所有字体都支持的字符之一，但您不能在键盘上键入它，因为它没有键。Windows 为我们提供了一种输入扩展 ASCII 字符的便捷方法：按住 alt，在数字键盘中键入 ASCII 代码，然后字符出现。

很少有普通用户知道这个技巧。当他们想输入度数符号时。当一个典型的用户想要输入一个度数符号时，用户会寻找一个特殊的字符菜单功能，就像我们在 MS Word 或 Open Office Writer 中找到的那样。熟悉 HTML 的人都知道，您可以通过转义代码在网页中输入特殊字符： º 因此，如果您的字符需要用户输入此符号，您可以给用户一个按钮，将其附加到文本字段中。

当我编写输出以度为单位的程序时，我从未要求用户输入符号。我只是在输出中附加了正确的符号，所以它会很好地显示。例如：

```
String degree = "" + (char)186;

String answer = celsiusToFaren(userInputC) + degree; 
```

# url - 带有单词的 Drupal url 通配符

> ID：12054487
> 
> 赞同：0
> 
> 时间：2012-08-21T12:07:20.443
> 
> 标签：url, drupal, wildcard

是否可以在菜单中使用这样的通配符？

```
$items['foo/bar-%xxx']
...
'page arguments' => array(1), 
```

这样我就可以争论吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:31:55.687

不要让这个令人反感的回复，但不要做 danielson317 建议的事情。原因是，通过这种方式，您将拥有几个不必要的菜单路由器项目，这些项目会破坏您的站点性能。其次，这不是我们通常的做法。

您可以通过将主回调注册到您的函数来做到这一点。

```
$items['foo/%']
...
'page arguments' => array(1), 
```

在您的回调函数中，您可以检查给定的参数是否有效。

```
function MYMODULE_foo_bar($value){
if (substr($value, 0, 4) != 'bar-'){
drupal_not_found();
return; // not necessary though.
}
$value = substr($value, 5);
// $value is now the the desired value.
//do what you want and return the output.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:21:25.033

根据 hook_menu [http://api.drupal.org/api/drupal/developer%21hooks%21core.php/function/hook_menu/6上的文档](http://api.drupal.org/api/drupal/developer%21hooks%21core.php/function/hook_menu/6)

% 必须是条目的第一个字符。它可以是单独的，也可以是前置加载运算符的字符串。

所以不，你不能以这种方式提出论点。

但是，您可以使用循环在 hook_menu 中创建多个条目。

```
$results = some_query_function();
foreach ($results as $result) {
  $items['foo/bor-' . $result] = array();
} 
```

您可以将两者混合使用：

```
$results = some_query_function();
foreach ($results as $result) {
  $items['foo/' . $result] = array();
  $itesm['foo/bar-' . result . '/%/edit'] = array(
  ...
  'page arguments' => array(2),
  );
} 
```

# iphone - NKAssetDownload 返回 nil 实例

> ID：12054491
> 
> 赞同：0
> 
> 时间：2012-08-21T12:07:47.477
> 
> 标签：iphone, ios

我正在尝试创建一个报亭应用程序，但是在尝试下载选定的 pdf 时，资产下载返回 nil。问题是什么？

```
 -(void)downloadIssueAtIndex:(NSInteger)index
    {
      NKLibrary *nkLib = [NKLibrary sharedLibrary];
      NKIssue *nkIssue = [nkLib issueWithName:[publisher nameOfIssueAtIndex:index]];                 

     if (nkIssue == nil)
     {
    nkIssue = [nkLib addIssueWithName:[publisher nameOfIssueAtIndex:index] date:[NSDate date]];  

    }
if ([nkIssue status] != NKIssueContentStatusNone)
    return;
NSLog(@"%@",nkIssue);
NSURL *downloadURL = [publisher contentURLForIssueWithName:nkIssue.name];
NSLog(@"%@",downloadURL);
if(!downloadURL) return;
NSURLRequest *req = [NSURLRequest requestWithURL:downloadURL];
NSLog(@"%@",req);
//req shows the correct url request

NKAssetDownload *assetDownload = [nkIssue addAssetWithRequest:req];
//assetDownload is nil

NSLog(@"%@",assetDownload);
 [assetDownload setUserInfo:[NSDictionary dictionaryWithObjectsAndKeys:
                            [NSNumber numberWithInt:index],@"Index",
                            nil]];
[assetDownload downloadWithDelegate:self];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:01:40.687

我这个它返回 nil 因为`[NKLibrary sharedLibrary];`它也是。

也许您应该尝试将您的应用添加到报亭，方法是将 添加`UINewsstandApp`到您的 Info.plist 中，然后将其设置为`YES`.

# objective-c - 目标c获取数组元素？

> ID：12054495
> 
> 赞同：1
> 
> 时间：2012-08-21T12:08:04.127
> 
> 标签：objective-c, ios, arrays

这行代码给出了答案。2（这是正确的）

```
int def = arc4random() % 2;
NSLog(@"%@",[uniqueNumbers objectAtIndex:def]); 
```

但是当我使用

```
int def = arc4random() % 2;
//NSLog(@"%@",[uniqueNumbers objectAtIndex:def]);
c1 = (int)[uniqueNumbers objectAtIndex:def];
NSLog(@"%d", c1); 
```

它给出 115669616。其中 c1 是一个整数。问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:10:46.493

你得到一个 NSNumber 实例。你需要通过调用`intValue`它来拆箱，然后你就可以开始了。

约翰内斯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:12:40.860

试试`c1 = [[uniqueNumbers objectAtIndex:def] intValue];`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:11:02.687

`NSArray`保存*对象*，而不是整数。强制转换为 int 无效。

# c# - 没有参数的asp.net页面不起作用

> ID：12054499
> 
> 赞同：-1
> 
> 时间：2012-08-21T12:08:09.800
> 
> 标签：c#, asp.net, visual-studio, master-pages

当我在没有参数的情况下调用页面 localhost:29773/folder/simple.aspx 时，我会重定向到 index.html。但是当我调用它时：localhost:29773/folder/simple.aspx？（带 ? ）它有效。（代码中没有重定向到索引页）

你知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:23:29.397

谢谢，我找到了解决方案。那是因为 Firefox 为重定向工作缓存。

# excel - Excel：如何连接不同格式的单元格？

> ID：12054500
> 
> 赞同：1
> 
> 时间：2012-08-21T12:08:10.070
> 
> 标签：excel

Excel：如何连接不同格式的单元格？我需要

```
A1 = Text
B1 = 1,1
C1 = A1 & " " & B1 
```

我需要结果：文本 1,10 我需要两位小数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:15:36.947

尝试

`=A1 & " " & TEXT(B1,"0,00")`

或者

`=A1 & " " & TEXT(B1,"0.00")`

如果使用 . 而不是 , 用于小数点

# php - Codeigniter 表单验证库

> ID：12054501
> 
> 赞同：1
> 
> 时间：2012-08-21T12:08:14.950
> 
> 标签：php, codeigniter, function, validation

我正在使用表单验证库，但是我遇到了一些我无法解决的问题。

我有几个领域，

我有：

*   page_title => 必需
*   menu_title => 不需要
*   parent_id => null 或必需

现在，如果没有设置 menu_title，那么它应该采用 page_title 的值。
然后，我需要检查以确保在给定级别 menu_title 是唯一的。

所以，

```
if($menu_title == '')
    $menu_title = $page_title;

return $this->db->
select('menu_title')->
from('cart_categories')->
where(array('menu_title' => $menu_title,
            'parent_id' => $category_parent))->
get()->num_rows() == 0; 
```

但我不知道如何在表单验证库中实际使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:34:23.973

为此，您需要使用回调函数。只需定义一个（稍微更改代码以适应格式）。请注意，这不在我的脑海中（和文档）：

```
public function check_title($string) {
    $this->db->select('menu_title')->from('cart_categories');
    $this->db->where(array('menu_title' => $string,'parent_id' => $this->input->post('category_parent')));
    if ($this->db->get()->num_rows() != 0 {
        $this->form_validation->set_message('check_title', '%s must be unique');
        return FALSE;
    }
    return TRUE;
} 
```

然后设置该特定字段的输入以使用回调：

```
$this->form_validation->set_rules('menu_title', 'Menu Title', 'callback_check_title'); 
```

我*认为*您可以在回调函数名称的左侧添加一个额外的下划线，以确保 CI 不会路由它（因为它是公共的），并且只是反映您在规则中输入回调名称的位置。不过，我对此并不乐观。

至于将附加字段作为回调传递只接受字符串，您可以设置一个类变量。

您也可以自己处理验证，这在您的情况下可能更干净。

# oracle - 将 Oracle 游标行转换为流水线函数的用户定义记录类型

> ID：12054505
> 
> 赞同：2
> 
> 时间：2012-08-21T12:08:21.253
> 
> 标签：oracle, types, casting, plsql, cursor

在我的包中，我定义了一个`record`类型和一个对应的`table`类型。然后我有一个流水线函数，它打开一个游标并尝试将每个结果输出。问题是它给了我类型不匹配的错误。我试图将光标投射到我的记录类型，但无济于事：我做错了什么？

```
create or replace package myTest as
  type myRec is record(
    id  integer,
    foo varchar2(10)
  );
  type myTable is table of myRec;

  function output() return myTable pipelined;
end myTest;
/

create or replace package body myTest as
  function output() return myTable pipelined
  as
  begin
    for myCur in (
      select id, foo from someTable
    )
    loop
      pipe row(cast(myCur as myRec));
    end loop;

    return;
  end output;
end myTest;
/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:21:58.827

```
create or replace package body myTest as
  function output return myTable pipelined
  as
    --   Add a "record" variable":
    xyz  myRec;
  begin
    for myCur in (
      select id, foo from someTable
    )
    loop
      -- Fill the record variable with the
      -- values from the cursor ...
      xyz.id  := myCur.id;
      xyz.foo := myCur.foo;
      -- ... and pipe it:
      pipe row(xyz);
    end loop;

    return;
  end output;
end myTest; 
```

# c# - 访问路径被拒绝

> ID：12054506
> 
> 赞同：1
> 
> 时间：2012-08-21T12:08:25.777
> 
> 标签：c#, environment-variables, streamwriter, path-combine

出于某种原因，当我创建将用于我的 StreamWriter 的路径时，它会创建一个名为 test.doc 的文件夹，而不是一个名为 test.doc 的文件

这是我的代码：

```
fileLocation = Path.Combine(Environment.GetFolderPath(System.Environment.SpecialFolder.MyDocuments), "QuickNote\\");
fileLocation = fileLocation + "test.doc"; 
```

谁能告诉我我的文件路径做错了什么？

更新：

```
class WordDocExport
{
    string fileLocation;
    public void exportDoc(StringBuilder sb)
    {
        fileLocation = Path.Combine(Environment.GetFolderPath(System.Environment.SpecialFolder.MyDocuments), "QuickNote\\");
        fileLocation = fileLocation + "test.doc";

        if (!Directory.Exists(fileLocation))
        {
            Directory.CreateDirectory(fileLocation);
            using (StreamWriter sw = new StreamWriter(fileLocation, true))
            {
                sw.Write(sb.ToString());
            }
        }

        else
        {
            using (StreamWriter sw = new StreamWriter(fileLocation, true))
            {
                sw.Write(sb.ToString());
            }
        }
    }
} 
```

抱歉耽搁了。今天早上我在上班前发布了这个问题，当时我什至没有想过要发布我的其余代码。所以，就在这里。我也尝试在第二行 test.doc 上做一个 Path.Combine 但它给出了同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T17:48:07.067

OK，看到完整代码后：

```
 fileLocation = fileLocation + "test.doc";

    if (!Directory.Exists(fileLocation))
    {
        Directory.CreateDirectory(fileLocation);     // this is the _complete_ path
        using (StreamWriter sw = new StreamWriter(fileLocation, true))
        {
            sw.Write(sb.ToString());
        }
    } 
```

您实际上是使用以“test.doc”结尾的字符串调用 CreateDirectory。路径是否以结尾都没有关系`\`，并且`"<something>\QuickNote\test.doc"` *是*有效的文件夹路径。

您可以将代码替换为：

```
string rootFolderPath = Environment.GetFolderPath(
    System.Environment.SpecialFolder.MyDocuments);

string folderPath = Path.Combine(rootFolderPath, "QuickNote");

if (!Directory.Exists(folderPath))
{
    Directory.CreateDirectory(folderPath);
}

fileLocation = Path.Combine(folderPath, "test.doc");

using (StreamWriter sw = new StreamWriter(fileLocation, true))
{
    sw.Write(sb.ToString());
} 
```

无需两次创建作家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:11:13.577

试试这个：

```
var fileLocation = Path.Combine(Environment.GetFolderPath(System.Environment.SpecialFolder.MyDocuments), "QuickNote");
fileLocation = Path.Combine(fileLocation, "test.doc"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:11:56.267

如果你有 C# 4.0 版本可以直接测试

```
Path.Combine(Environment.GetFolderPath(System.Environment.SpecialFolder.MyDocuments), "QuickNote", "test.doc"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:10:41.110

`Path.Combine`将从字符串末尾删除“\”。

您应该在“+”的第二行使用相同的方法。

# ios - 删除联系人后如何刷新 PeoplePicker？iOS

> ID：12054507
> 
> 赞同：1
> 
> 时间：2012-08-21T12:08:25.713
> 
> 标签：ios, abpeoplepickerview, abpersonviewcontroller, addressbookui

我实现了 ABPeoplePickerNavigationController 和 ABPersonViewController。但是，我确实将 peoplepicker 添加到 tabbarcontroller，它不再以模态方式呈现。tabbarController 保持对控制器的引用。我在 ABPersonViewController 中添加了一个大的红色“删除”按钮，以进一步模仿默认的联系人应用程序行为。我曾经`[personViewController setValue:[NSNumber numberWithBool:YES] forKey:@"allowsDeletion"];`这样做过。

单击按钮实际上会从地址簿中删除指定的人，但是当弹出回到 PeoplePicker 控制器的视图时，已删除的联系人仍然存在。只有在重新加载我的应用程序后，地址簿引用才会更新并且联系人不再存在。在不重新启动的情况下单击所述联系人将使应用程序崩溃或显示空联系人。

我能想到的最简单的解决方案是让 ABPeoplePickerNavigationController 重新加载其联系人项目。但是我该怎么做呢？我已经尝试了无数的“解决方案”（例如 setNeedsDisplay），但似乎我错过了一些东西。如果有任何其他解决方案，我会很高兴听到他们的消息。

我正在模拟器中进行测试，如果这可能有什么不同的话。

# android - 如何在任何事件上清除 TextView？

> ID：12054511
> 
> 赞同：-2
> 
> 时间：2012-08-21T12:08:40.420
> 
> 标签：android, xamarin.android, textview

我正在制作一个在 TextView 中显示结果的应用程序，我想在按下微调器、按钮、分段控件（不包括我的计算按钮）时清除此 TextView。有没有办法实现这一点，而不必在布局中的每个 Click 事件中放置 TextView 清除代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:17:20.097

只需使用：

```
TextView textView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    textView = (TextView)findViewById(R.id.textView1);

    BUTTON.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            // MAKE YOUR TEXT EMPTY
            textView.setText(""); // NOW TEXT WILL BE EMPTY
        }
    });
} 
```

希望对你有效。它很简单...在您的按钮上单击只需使用**txt.setText(""); 将 textview 文本设置为空；**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:17:44.780

这可能会对您有所帮助。

```
public void onClick(View v)
{
if(v!= calculateButton)
{
textView.setText("");
}
} 
```

您可以像这样处理所有 onClick 事件，但对于微调器事件或任何其他布局事件，您必须这样做

```
 textView.setText(""); 
```

希望这有帮助..

# php - Glicko-2 评级系统：漏洞还是漏洞？

> ID：12054514
> 
> 赞同：3
> 
> 时间：2012-08-21T12:08:51.193
> 
> 标签：php, javascript, statistics, rating, chess

Glicko-2 是国际象棋中使用的评分系统，但也可用于许多其他情况。Glicko-2 是对 Glicko-1 的改进，它解决了旧 ELO 评级的问题。

与版本 1 相比，Glicko-2 的特别之处在于，它包含的评级偏差 (RD) 越高，某人不活动的时间越长。它使用与时间/评级周期相关的系统常数的概念来做到这一点。

在这里可以找到作者撰写的示例：[http](http://www.glicko.net/glicko/glicko2.pdf) ://www.glicko.net/glicko/glicko2.pdf 。
在这份文件中，他解释说：

> Glicko-2 系统在评级期中的游戏数量中等到大量时效果最佳，例如在评级期中平均每位玩家至少 10-15 场比赛。评级期的时间长度由管理员自行决定。

假设一组活跃的棋手在 1 个月的时间段内平均下 10-15 场比赛，那么管理员将在每个月底更新评分。

* * *

我需要一个 Glicko-2 评级系统的 PHP 实现，并且遇到了以下问题：

**[Glicko-2 JavaScript 实现](https://github.com/RobKohr/glicko)** 

*   JavaScript 有一个小错误，它与技术编写的示例不匹配，作者发现它足够接近，并没有费心去调试。

**[Glicko-2 PHP 实现](http://sourceforge.net/projects/glicko2phplib/)** 

*   PHP 实现存在许多错误，但这并不明显，除非您进行了超过一个评级期（技术文章从未显示预期值）

**[Excel 中的 Glicko-2 计算器](http://www.bjcox.com/?page_id=20&did=11)** 

*   最后，Excel 计算器似乎没有错误并且是最专业的，由国际象棋界的某个人完成。解决 JavaScript 错误后，JavaScript 和 Excel 计算器彼此非常匹配（虽然不完美，但可能在舍入误差内）

我已经修复了错误（并向作者提交了问题/补丁），我可以在 PHP 和 JavaScript 版本中找到与 Excel Calculator 非常匹配的版本

* * *

现在我有 99% 的信心认为我有一个准确的 Glicko-2 实现（在它们三个之间）进行分析，这就是我遇到一些奇怪的事情的时候，也是本次讨论的主题。

给定 Glicko-2 为新玩家推荐的默认值：

```
Rating:      1500
RD:           350
Volatility:  0.06 
```

[如果您在接下来的 12 个周期（1 年）的每个评级周期（1 个月）内只面对评级为 1378 和 RD 99（来源](http://www.chess.com/echess/players)）的平均对手一次，您将累积假定的**[国家 A 级](http://www.chess.com/article/view/about-chess-ratings)**（1800-1999）评级 1852实际上，您在 12 个月内只击败了 12 名平均评分的球员。

```
Month   Rating      RD      Volatility      Class
1       1625        259     0.059999        National Class B
2       1682        225     0.059998        〃
3       1718        205     0.059997        〃
6       1784        174     0.059994        〃
12      1852        148     0.059988        National Class A
24      1922        127     0.059976        〃 
```

如果你每个评级周期面对2个平均对手，你可以在4-5个月左右到达国家A级，面对8-10个平均对手。

```
Month   Rating      RD      Volatility      Class
1       1672        215     0.059999        National Class B
2       1733        183     0.059997        〃
3       1770        166     0.059995        〃
4       1797        154     0.059993        〃
5       1819        146     0.059992        National Class A
6       1836        140     0.059991        〃 
```

* * *

这些假设准确吗？我的计算器有错误吗？

如果它不是一个错误，那么还有什么方法可以解决这个问题：

*   将“真实评级”视为偏差的下限（评级 - RD）
*   不显示非活动用户的评分
*   不显示游戏少于 N 的用户

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-04T23:14:33.030

这可能看起来违反直觉，但这实际上是一个正确的结果。如果你一直在玩普通玩家，但你总是赢，无论时间段如何，你都在证明你的排名很高（不是平均排名，即使你的对手是平均水平）。一个平均水平（具有“真实”平均等级）的玩家，与完全相同的“真实”等级（平均水平）的对手应该在大约 50% 的时间里获胜和失败。一个“真实”排名非常高的玩家，在玩普通玩家时将赢得更大比例的时间，这取决于他们的排名相差多远，但可以说这是一个足够高的排名，他们应该赢得 90%的时间。这意味着每与普通玩家进行 10 场比赛，这位排名靠前的玩家应该输掉其中 1 场。

您有效地建模的是一个排名足够高的玩家，可以在与普通玩家的每一场比赛中获胜（超过 12 或 24 场比赛没有输球），这意味着如果他们继续获胜，他们的得分将继续无限上升，因为他们从来没有输过。他们展示了一种能力（直到发生损失）应该有足够大的排名分离以接近 100% 的预期胜率。

# c++ - 多线程 - 在一个线程中增加整数并在另一个线程中减少

> ID：12054515
> 
> 赞同：1
> 
> 时间：2012-08-21T12:08:51.657
> 
> 标签：c++, linux, multithreading, locking, multicore

在一个多线程程序中，其中 2 个线程 - 线程 1 - 将运行一个将整数变量增加 1000 次然后退出的循环 线程 2 - 将运行一个将整数变量减少 1000 次然后退出的循环

两个线程都在一个信号量上等待并大致同时启动，并被安排在大致相同的时间在不同的内核上运行。

两个线程都退出后，整数变量的值会为零吗？注意：不使用锁定（互斥锁等）

让我们假设 linux 和 x86 架构以及多核硬件。

如果将相同的整数声明为 volatile (C++) 会发生什么情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T12:11:59.853

不稳定与否，您不能期望任何特定的输出（范围 [-1000,1000] 除外）——即使是单个并发写入也可能破坏增量/减量的结果（即使在 CPU 级别也不是原子的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T12:14:35.477

如果多个线程同时修改相同的内存位置，则程序会发生数据竞争，并且效果未定义。结果几乎可以是任何东西，假设你得到了一个结果。对于像整数类型这样的简单变量，原子将消除数据竞争并提供适当的同步。使用`atomic_int`（也称为`atomic<int>`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T12:12:35.960

您将需要使用适当的原子，并可能使用完整的内存屏障。

`volatile`在这种情况下不会为您做任何事情（足够好，您可以使用）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T12:12:59.457

整数读/写可能是原子的，也可能不是原子的。所以答案是否定的，结果不一定是 0。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-21T12:31:11.037

递增和递减需要三个操作：从内存中取值，修改，写回内存。在大多数平台上，不能保证这三个操作都以原子方式执行，除非您使用 C++11 原子类型、编译器特定（或程序集）原子内在函数或锁特别请求它。

`volatile`与线程同步无关；它只是确保内存访问实际发生并且相对于同一线程中的其他副作用正确排序。

# php - 匹配 HTML 注释内容的正则表达式

> ID：12054519
> 
> 赞同：1
> 
> 时间：2012-08-21T12:09:09.363
> 
> 标签：php, regex

例如，如果我有以下代码：

```
<!--start-here-->
<div>My Cool Content!!!</div>
<h1>Headerrr</h1>
<!--end-here-->
<div>Other Content</div> 
```

如何使用正则表达式来获取 <--start-here--> 和 <--end-here--> 之间的内容？

所以我的输出是：

```
<div>My Cool Content!!!</div>
<h1>Headerrr</h1> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T12:15:33.530

```
/<!--start-here-->(.*?)<!--end-here--->/ims 
```

这应该工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T12:13:36.917

你不需要正则表达式

```
$str = '<!--start-here-->
        <div>My Cool Content!!!</div>
        <h1>Headerrr</h1>
        <!--end-here-->
        <div>Other Content</div>';

$return = explode('<!--start-here-->', $str);
$return = explode('<!--end-here-->', $return[1]);
$return = $return[0]; 
```

或使用正则表达式

```
$str = preg_match('/<!--start-here-->[\s\S]*<!--end-here-->/', $str, $return);
$return = $return[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:15:07.040

试试这个，

```
<!--start-here-->(.|\n)*<!--end-here--> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T12:15:15.247

这应该可以解决问题：`/<!--start-here-->.*<!--end-here-->/m`.
像这样使用它：`/<!--start-here-->.*<!--end-here-->/m.exec(htmlCode)`

# sqlite - SQLite 回滚健壮性

> ID：12054526
> 
> 赞同：1
> 
> 时间：2012-08-21T12:09:38.887
> 
> 标签：sqlite

Oracle、SQL Server、DB2 和所有主要的商业数据库在许多不同用户的多级重做下都能正常工作。

SQLite 是否足够健壮，也可以做到这一点，还是对事务处理有限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:21:53.010

SQLite 数据库位于磁盘上的文件中。如果你想做你必须做多个数据库写入，把它们放在一个事务中。由于每次写入都会锁定文件（db）。SQLite 在处理大型事务时表现良好。我没有可靠的数据将其与您提到的其他数据库进行比较，但 SQLite 可以很好地处理大型事务。

# c# - jQuery UI 自动完成组合框远程数据源

> ID：12054534
> 
> 赞同：2
> 
> 时间：2012-08-21T12:10:00.253
> 
> 标签：c#, jquery, asp.net, jquery-ui, jquery-ui-autocomplete

我正在尝试实现 jQuery UI 自动完成组合框，以便它可以在 ASP.NET/C# 中重用。

我只使用基本的自动完成功能没有问题，但是在尝试使用组合框时我感到困惑。

在 JSON 中返回键/值对时，我有一个处理程序。

然后我想要多个组合框来检索不同的数据。我只想要一个处理程序，所以我正在考虑通过**源**方法在我正在使用的控件的查询字符串中传递一个引用。

我真正远程找到的唯一示例是[this](http://jsfiddle.net/and7ey/TFerw/3/)，但它对我来说似乎不正确，而且它不可重用并且似乎有一些重复的代码。

jQuery 站点上的示例如下，但是当更改源以使用远程源时，组合框永远不会填充。

```
 (function( $ ) {
    $.widget( "ui.combobox", {
        _create: function() {
            var input,
                self = this,
                select = this.element.hide(),
                selected = select.children( ":selected" ),
                value = selected.val() ? selected.text() : "",
                wrapper = this.wrapper = $( "<span>" )
                    .addClass( "ui-combobox" )
                    .insertAfter( select );

            input = $( "<input>" )
                .appendTo( wrapper )
                .val( value )
                .addClass( "ui-state-default ui-combobox-input" )
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    source: function( request, response ) {
                        var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
                        response( select.children( "option" ).map(function() {
                            var text = $( this ).text();
                            if ( this.value && ( !request.term || matcher.test(text) ) )
                                return {
                                    label: text.replace(
                                        new RegExp(
                                            "(?![^&;]+;)(?!<[^<>]*)(" +
                                            $.ui.autocomplete.escapeRegex(request.term) +
                                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                        ), "<strong>$1</strong>" ),
                                    value: text,
                                    option: this
                                };
                        }) );
                    },
                    select: function( event, ui ) {
                        ui.item.option.selected = true;
                        self._trigger( "selected", event, {
                            item: ui.item.option
                        });
                    },
                    change: function( event, ui ) {
                        if ( !ui.item ) {
                            var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( $(this).val() ) + "$", "i" ),
                                valid = false;
                            select.children( "option" ).each(function() {
                                if ( $( this ).text().match( matcher ) ) {
                                    this.selected = valid = true;
                                    return false;
                                }
                            });
                            if ( !valid ) {
                                // remove invalid value, as it didn't match anything
                                $( this ).val( "" );
                                select.val( "" );
                                input.data( "autocomplete" ).term = "";
                                return false;
                            }
                        }
                    }
                })
                .addClass( "ui-widget ui-widget-content ui-corner-left" );

            input.data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append( "<a>" + item.label + "</a>" )
                    .appendTo( ul );
            };

            $( "<a>" )
                .attr( "tabIndex", -1 )
                .attr( "title", "Show All Items" )
                .appendTo( wrapper )
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass( "ui-corner-all" )
                .addClass( "ui-corner-right ui-combobox-toggle" )
                .click(function() {
                    // close if already visible
                    if ( input.autocomplete( "widget" ).is( ":visible" ) ) {
                        input.autocomplete( "close" );
                        return;
                    }

                    // work around a bug (likely same cause as #5265)
                    $( this ).blur();

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete( "search", "" );
                    input.focus();
                });
        },

        destroy: function() {
            this.wrapper.remove();
            this.element.show();
            $.Widget.prototype.destroy.call( this );
        }
    });
})( jQuery );

$(function() {
    $( "#combobox" ).combobox();
    $( "#toggle" ).click(function() {
        $( "#combobox" ).toggle();
    });
}); 
```

理想情况下，在这个阶段：`$( "#combobox" ).combobox();`我想指定我的远程数据源，但是在尝试时，即`$( "#combobox" ).combobox( { source: "handler.ashx" } );`组合框永远不会填充。只有当我编辑`autocomplete`上面的部分并删除所有`regex`代码才能让它工作，但是我如何引用我所在的当前组合框来获得它的价值？我真的很困惑，这一定很简单，而且我把事情复杂化了......有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:09:58.123

组合框演示基本上是为了增强`<select>`页面上的现有元素。因此，它并不真正适合远程数据源。如果您想要的只是带有按钮的样式输入，则可以删掉很多示例代码：

```
(function ($) {
    $.widget("ui.combobox", {
        _create: function() {
            var wrapper = this.wrapper = $("<span />").addClass("ui-combobox")
                , self = this;

            this.element.wrap(wrapper);

            this.element
                .addClass("ui-state-default ui-combobox-input ui-widget ui-widget-content ui-corner-left")
                .autocomplete($.extend({
                    minLength: 0
                }, this.options));

            $("<a />")
                .insertAfter(this.element)
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass("ui-corner-all")
                .addClass("ui-corner-right ui-combobox-toggle")
                .click(function () {
                    if (self.element.autocomplete("widget" ).is(":visible")) {
                        self.element.autocomplete("close");
                        return;
                    }

                    $(this).blur();

                    self.element.autocomplete("search", "");
                    self.element.focus();
                });
        },

        destroy: function() {
            this.wrapper.remove();
            $.Widget.prototype.destroy.call(this);
        }
    });
})(jQuery); 
```

**用法：**

```
$(function() {
    $("#combo").combobox({
        source: 'my_source'
    });
});​ 
```

**示例：http:** [//jsfiddle.net/4extL/45/](http://jsfiddle.net/4extL/45/)

您可以采用的另一条路线是创建一个包含生成的 HTML 的局部视图，然后`autocomplete`正常应用小部件。这样做的缺点是它不会像 jQuery 插件那样优雅地降级。

# git - 将一个更改合并到多个分支

> ID：12054540
> 
> 赞同：6
> 
> 时间：2012-08-21T12:10:32.423
> 
> 标签：git, merge

我正在使用 git，并且我有一个带有一堆分支的仓库。

如果我在分支 master（或另一个分支）上做一个修补程序，我怎样才能轻松地将这个修补程序合并到所有这些分支中。我是否必须一个一个地合并每个分支（例如：[Merging a change to multiple branches in Git](https://stackoverflow.com/questions/7908597/merging-one-change-to-multiple-branches-in-git)）还是有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:42:19.647

我建议你看看[git flow](http://nvie.com/posts/a-successful-git-branching-model/)和它的[工具支持](https://github.com/nvie/gitflow/)。

git flow 的修补程序支持是创建一个错误修复分支，它可以合并到您的生产分支（可能`master`）和您的开发分支（在 git flow 中`develop`）。修补程序分支从`master`. 由于 master 的所有更改`develop`在每个版本之后都被合并到，您也可以将 hotfix 分支合并到`develop`，而不必合并您不打算合并的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:32:18.980

每次合并都需要进行冲突裁决，有时还需要解决冲突，因此如果不检查要合并到的分支，就无法进行合并。那写的，你需要把它合并到你所有的分支中吗？

例如，我在本地有几十个分支，但其中绝大多数是孤立的功能或修复。这些实际上并不需要大多数修补程序维护提交，而且我不会费心让它们保持最新，直到它们准备好生产或准备好与合作者共享。当它们被更新时，无论是否`master`进行了热修复，它们都应该被更新以使生产集成更容易。

换句话说，我的工作流程允许我将把修补程序合并到功能分支中的麻烦分配到真正重要的时间。如果你有一堆小的特性分支，你可能还不需要那个修补程序代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:16:45.257

我认为没有任何方法可以使用一个命令将其合并到多个分支中。您可以做的是您开始处理的任何一个分支，只需将其重新设置在 master 上即可。

# web-services - 国家/地区的 YQL

> ID：12054544
> 
> 赞同：0
> 
> 时间：2012-08-21T12:10:45.243
> 
> 标签：web-services, geolocation, yql, country

如何使用 YQL 查询使用纬度和经度位置来获取国家/地区名称？或者更好地指出我可以找出表格的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:24:30.347

上面的查询确实有效，但让我带您完成所有步骤。

构建对 yahoo 的 url 查询并创建请求。

```
string url = string.Format("http://query.yahooapis.com/v1/public/yql?q={0}", HttpUtility.UrlEncode("SELECT * FROM geo.placefinder WHERE text=\"-27,28\" and gflags=\"r\""));
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Method = "GET"; 
```

获取响应数据：

```
using (WebResponse response = request.GetResponse())
{
    XmlDocument doc = new XmlDocument();
    doc.Load(response.GetResponseStream());

    geo.CountryName = doc.SelectSingleNode("./query/results/Result/country").InnerText;
    geo.AlphaCode = doc.SelectSingleNode("./query/results/Result/countrycode").InnerText;
    geo.City = doc.SelectSingleNode("./query/results/Result/city").InnerText;
    geo.State = doc.SelectSingleNode("./query/results/Result/state").InnerText;        

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T07:11:36.450

我正在寻找的答案是：

```
SELECT * FROM geo.placefinder WHERE text=\"{0}\" and gflags=\"r 
```

文本是纬度和经度，例如 -27,28

这将返回一个包含国家信息的 xml。

# security - 如果从 Windows 8 RTM 中设置的提升进程和非默认浏览器运行 ShellExecute 将失败

> ID：12054548
> 
> 赞同：9
> 
> 时间：2012-08-21T12:11:06.967
> 
> 标签：security, winapi, windows-8, shellexecute

在 Windows 8 RTM（Chrome、Firefox）中设置非默认浏览器并尝试运行如下代码：

`ShellExecute(NULL, "open", "http://stackoverflow.com", NULL, NULL, SW_SHOWNORMAL);`

没关系。但是然后将清单更改为需要管理权限或仅“以管理员身份运行”。

代码不起作用。

好的，然后尝试使用“以管理员身份运行”运行**任何**应用程序。

您将看到相同的结果，链接不起作用。

将默认浏览器更改回 IE -> 一切正常。

在 Windows 8 以前的版本中没有这样的行为。

***到底是怎么回事？***

PS。微软似乎在他们自己的软件中遇到了同样的问题 :) [Visual Studio 2012 Web Publish on Windows 8 RTM Fails Browser Launch](https://stackoverflow.com/questions/12029733/visual-studio-2012-web-publish-on-windows-8-rtm-fails-browser-launch)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T06:24:52.813

直到今天，我一直在使用 Chrome 看到相同的行为。花了一些时间试图弄清楚发生了什么，并且在很长一段时间内都无法让 Chrome 在提升的权限下提出 ShellExecute()。提升权限（即 UAC 对话框或以管理员身份运行）或什至完全关闭 UAC 时失败。

我最终卸载并重新安装了 Chrome，这实际上修复了它。

也看到了其他浏览器的行为，但是在使用 FireFox 进行了几次尝试后，我进入了 FireFox 的“设置默认程序”设置，并明确（即在 Windows 中）设置了 .htm 文件和 HTTP 协议的关联。那也行得通。

所以看起来这是某种注册问题，而不是 Windows 中的实际问题。我要尝试的第一件事是在 Windows 中显式设置关联（而不是在浏览器中设置默认浏览器）。如果失败，请尝试重新安装浏览器...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T16:20:21.487

@里克斯特拉尔

你不正确。这不仅仅是注册。我使用 Photoshop CC 和 Windows 8 进行了测试。我为 Photoshop 创建了一个启动器以使其可移植： - 使用管理权限，shell 集成不起作用。- 当以普通用户身份运行时，shell 集成按预期工作。

在 Windows 7 上测试。 - 使用或不使用管理权限。

我可以确认 OP 是正确的。

# jquery - 根据复选框将空值设置为文本区域

> ID：12054551
> 
> 赞同：0
> 
> 时间：2012-08-21T12:11:09.933
> 
> 标签：jquery

我对一些 jQuery 代码有一点问题。

在我的页面中，我有以下布局：

```
[X] "Some text"   [textarea]
[X] "Some text 2" [textarea]
[X] "Some text 3" [textarea] 
```

所以基本上，它只是一些复选框和一些文本区域（实际上是一个日期选择器），代码如下（用 PHP 生成）：

```
<input type="checkbox" class="pack_check" disabled="disabled" name="id_pack[]" value="0 />     
Some text
<input name="date-pack[]" id="date-pack[]" class="date-picker">
<input type="checkbox" class="pack_check" disabled="disabled" name="id_pack[]" value="1 />     
Some text 2
<input name="date-pack[]" id="date-pack[]" class="date-picker"> 
```

问题是，我希望当用户取消选中复选框时，关联的日期（在 textarea 输入中）得到一个空值......

我通过这样做来实现这一点：

```
$('input.pack_check').change(function () {
        $("input[name='date-pack[]']").val("");
}); 
```

但是当我这样做时，所有的文本区域都被删除了。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:16:29.190

一旦您在文档中使用过一次 ID，您就无法重新声明它 - 如果这样做，您将看到一些非常非标准的行为，就像您正在经历的那样

这就是我要做的：

```
$('input.pack_check').click(function() {
    if (!this.checked) {
        $(this).nextAll('input:first').val('');
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T12:15:46.787

试试这个

```
$('input.pack_check').change(function () {
        $(this).next(".date-picker").val("");
}); 
```

# android - OpenGL ES 1.0 glDepthRange 视觉外观？减少距离对象的深度

> ID：12054554
> 
> 赞同：0
> 
> 时间：2012-08-21T12:11:14.543
> 
> 标签：android, opengl-es, range, perspective, depth

我目前将对象定位在“真实”世界位置（单位=米）。问题是我想要一个在几公里外可以看到的物体。当 OpenGL 缩放这个对象时，它太小了，几乎无法察觉。我也有几米外的物体，如果我只是缩放物体，那将太大了。

所以我一直在寻找一种方法来绘制几公里外的物体以便更近，而那些太近而不能更远的物体。我找到了 glDepthRange，这似乎是我想要的，但我知道这与排序深度有关，而不是视觉表示。我也知道 offsetPolygon，但我怀疑这会给我想要的结果。我可以使用极坐标手动转换对象的坐标，并在视图移动时更新它们，但这似乎是一种非常繁重的方法。

有没有办法实现它。当我使用 OpenGL ES 1.0 时，着色器是不可能的。顺便说一句，它用于增强现实。

谢谢

# javascript - 执行 elem.click(); 在 javascript 循环中并不总是有效 - 时间？

> ID：12054556
> 
> 赞同：2
> 
> 时间：2012-08-21T12:11:25.790
> 
> 标签：javascript

您好，我一直在研究 Javascript 8 滑块拼图（包括事件侦听器在内），并且有代码生成移动数组（用户将点击哪个方块/div id）来解决拼图。

我的目标是让用户能够单击求解按钮，触发一个函数，该函数将播放谜题中的解决方案移动数组。

出于某种原因，我真正难过的地方是，在下面的代码中，点击不适用于循环的每次迭代——这一切都搞砸了。如果有人可以提供任何帮助或建议，我将不胜感激。

```
while(k < moves.length)
{ 
   var move = "vp" + moves[k];
   var el = document.getElementById(move);
   el.click();  // simulate a users click on div
   populate(); // update array
   k++;
} 
```

编辑 - 对于那些在下面询问的人是事件函数和更多代码......

```
function addEvent(elem, event, fn) {
// avoid memory overhead of new anonymous functions for every event handler that's installed
// by using local functions
function listenHandler(e) {
    var ret = fn.apply(this, arguments);
    if (ret === false) {
        e.stopPropagation();
        e.preventDefault();
    }
    return(ret);
}

function attachHandler() {
    // set the this pointer same as addEventListener when fn is called
    // and make sure the event is passed to the fn also so that works the same too
    var ret = fn.call(elem, window.event);   
    if (ret === false) {
        window.event.returnValue = false;
        window.event.cancelBubble = true;
    }
    return(ret);
}

if (elem.addEventListener) {
    elem.addEventListener(event, listenHandler, false);
} else {
    elem.attachEvent("on" + event, attachHandler);
}
}

window.onload = function() {
var height = (newImg.height*0.33);
var width = (newImg.width*0.33333);

addEvent(document.getElementById('shuffle'),'click',initGame);
addEvent(document.getElementById('vp1'),'click',move);
addEvent(document.getElementById('vp2'),'click',move);
addEvent(document.getElementById('vp3'),'click',move); // ... 
```

这是 el.click(); 函数的第一部分。打电话...

```
 function move() {

var e = this;
var id = e.id.charAt(2);

var temp = 0;
//var images = e.getElementsByTagName('img'); 
//alert(images[0].className);
if (id == 1) {
  if (document.getElementById("vp2").innerHTML.indexOf("selected") != -1)
    {    temp = e.innerHTML;
        e.innerHTML = document.getElementById("vp2").innerHTML;    
        document.getElementById("vp2").innerHTML = temp;
        numMoves++;
}else if (document.getElementById("vp4").innerHTML.indexOf("selected") != -1)
    {   temp = e.innerHTML;
        e.innerHTML = document.getElementById("vp4").innerHTML;    
        document.getElementById("vp4").innerHTML = temp;
        numMoves++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:26:58.840

jQuery：

```
$(el).click(); 
```

Javascript：

```
var etype = 'click';
if (el.fireEvent) {
  (el.fireEvent('on' + etype));
}else{
  var evObj = document.createEvent('Events');
  evObj.initEvent(etype, true, false);
  el.dispatchEvent(evObj);
} 
```

# php - 如何在 smarty 中检查类的有效对象？

> ID：12054557
> 
> 赞同：4
> 
> 时间：2012-08-21T12:11:26.213
> 
> 标签：php, smarty

smarty 中是否有任何功能可以检查 smarty 中类的有效对象？

假设`$obj`是否有一些价值。

如何`$obj`在 smarty 中检查是否是“TestClass”的对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T12:18:05.197

这是在 Smarty 中检查变量是否为特定类的对象的方法。

```
if( true eq isset($obj) && true eq is_object($obj) && $obj instanceof 'TestClass' ){
//do something
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T13:18:31.753

这适用于 Smarty2 和 Smarty3：

```
{if $obj instanceof TestClass}
  …
{/if} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T12:14:27.587

试试这个

```
if($obj instanceof TestClass )
{
    echo 'yes';
}
else
{
    echo 'no';
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-04T05:21:50.530

这是一个很好的例子。

```
{if is_object($obj)}
  {*=== your code ===*}
{else}
  {*=== your code ===*}
{/if} 
```

我们可以使用 is_object 来知道这是否是一个对象。

希望它会帮助某人..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T13:21:27.910

您可以在 smarty 代码中调用 php 函数。试试这个：

```
{if $customer instanceof Customer}
    YES, instance of Customer
{else}
    NO, Not an instance
{/if} 
```

此外，如果控制器代码有很多路径，那么在使用它之前检查变量是否实际设置可能是个好主意：

```
{if isset($customer) && $customer instanceof Customer}
    YES, instance of Customer
{else}
    NO, Not an instance
{/if} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-11T05:44:16.533

函数[`is_a`](http://php.net/is_a)可以用于此。

```
{if is_a($customer, 'Customer')}
    YES, instance of Customer
{else}
    NO, Not an instance
{/if} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-20T17:36:35.627

如果需要，您也可以获取对象的特定类`$obj|get_class`

例子：

```
{if $animal instanceof Horse}
    <span>Yup, it's a horse class.</span>
{else}
    <span>It is actually a {{$animal|get_class}}</span>
{/if} 
```

# c# - 在单个服务中同时使用 DataContractSerializer 和 XmlSerializer

> ID：12054567
> 
> 赞同：3
> 
> 时间：2012-08-21T12:11:57.507
> 
> 标签：c#, wcf, datacontractserializer, xmlserializer

我有一个 WCF 服务，例如：

```
[ServiceContract]
ServiceInterface
{
    [OperationContract]
    FirstResponse FirstOperation(){}

    [OperationContract]
    SecondResponse SecondOperation(){}
} 
```

我想要客户端的 XML 响应。据我所知，它使用`DataContractSerializer`. 但是在 FirstReponse 中，我有一个数据成员，我希望它作为 XML 中的属性。我读过虽然`DataContractSerializer`不支持。解决方案是使用`XmlSerializer`，但这会影响效率。所以我想知道是否可以`XmlSerializer`仅用于一项操作和`DataContractSerializer`其余服务。如果是怎么办？将 FirstResponse 类视为：

```
[DataContract]
public class FirstResponse
{
    [DataMember]
    public int id;

    [DataMember]
    public string type1;
} 
```

我想要 id 作为属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:10:09.290

[您可以通过使用XmlSerializerFormat](http://msdn.microsoft.com/en-us/library/system.servicemodel.xmlserializerformatattribute.aspx)属性装饰您的方法来指定`XmlSerializer`应该用于序列化：

```
[ServiceContract]
ServiceInterface
{
    [OperationContract]
    [XmlSerializerFormat]
    FirstResponse FirstOperation(){}

    [OperationContract]
    SecondResponse SecondOperation(){}
} 
```

编辑：我忘了提到，如果你想`FirstResponse`用 XmlSerializer 进行序列化，那么就不需要该类型的`DataContract`/`DataMember`属性。您可以为 XmlSerializer 设置它，如下所示：

```
public class FirstResponse
{
    [XmlAttribute]
    public int id;

    [XmlElement]
    public string type1;
} 
```

您可以根据您希望类型序列化的方式来改变[序列化属性。](http://msdn.microsoft.com/en-us/library/83y7df3e%28v=vs.71%29.aspx)如果您有根本不想序列化的成员，那么您需要指定`[XmlIgnore]`这些成员，因为`XmlSerializer`opt-out 与`DataContractSerializer`.

# ms-access - 如何在 MS-Access 上的表格单元格中添加 10%？

> ID：12054572
> 
> 赞同：1
> 
> 时间：2012-08-21T12:12:15.047
> 
> 标签：ms-access, ms-access-2010, percentage

所以，我需要将代码 1、2、3、4 的值增加/减少 10%。但我不知道该怎么做，你们能帮我吗？**我需要使用 SQL 模式来完成它。**

.

**注意：由于无法将表格粘贴到帖子上，因此我对其进行了 PrintScreen。**

.

![这是我的桌子](../Images/fe70e543389fa48ea0f1ba80d057a75d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:03:00.687

只是为了不让这个问题没有答案，我在这里添加了[@Scotch](https://stackoverflow.com/users/1415802/scotch)在他的评论中发布的正确答案。还要感谢[@Remou](https://stackoverflow.com/users/2548/remou)的帮助。

```
UPDATE TabProd
SET PrecProd = (PrecProd * 1.1)
WHERE Código IN (1,2,3,4) 
```

# zebra-printers - 在哪里可以找到 Zebra 的 CpclCrcHeader 类

> ID：12054573
> 
> 赞同：0
> 
> 时间：2012-08-21T12:12:16.390
> 
> 标签：zebra-printers

在哪里可以找到 Zebra 的 CpclCrcHeader 类？我说您已设法将文件发送到 Zebra 打印机。但我无法做到这一点。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:12:01.127

`CpclCrcHeader`是 Zebra SDK 中的一个内部类。你不应该直接使用它，因为它可以在没有任何警告的情况下改变或消失。

# powershell - 即使未使用 -confirm 开关，set-spphrase 也会要求确认

> ID：12054574
> 
> 赞同：2
> 
> 时间：2012-08-21T12:12:22.497
> 
> 标签：powershell, sharepoint-2010, powershell-2.0

我们试图通过 powershell cmdlet 在 sharepoint 中设置密码。

当我们在下一行中提到开关 -confirm 时，它要求确认

```
Set-SPPassPhrase -PassPhrase $passphrase 
```

然后我们删除了 -confirm 开关，因为我们在脚本本身中传递了密码 [虽然这是安全风险，但对于测试环境，他们需要它]，但它仍然要求确认。是否默认确认？

```
Add-PSSnapin microsoft.sharepoint.powershell -ErrorAction SilentlyContinue

$passphrase = ConvertTo-SecureString "MyPass#$#@" -asPlainText –Force 

Set-SPPassPhrase -PassPhrase $passphrase 
```

如何绕过确认？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:19:43.510

Try this (can't test it...)

```
Set-SPPassPhrase -PassPhrase $passphrase -confirm:$false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:27:21.943

Cmdlet 开发人员可以声明其 cmdlet 的影响是低、中还是高。在您的会话中，有一个自动变量`$ConfirmPreference`，它设置您将被自动提示确认的级别，即使您没有通过`-Confirm`

大多数 cmdlet 都提供了一个`-Force`可以跳过所有确认的开关，但似乎没有`Set-SPPassPhrase`。您可以尝试显式设置`-Confirm:$false`

您也可以尝试设置`$ConfirmPreference = 'None'`

请参阅[http://blogs.msdn.com/b/powershell/archive/2006/12/15/confirmpreference.aspx](http://blogs.msdn.com/b/powershell/archive/2006/12/15/confirmpreference.aspx)和[http://msdn.microsoft.com/en-us/library/windows/desktop/bb204629(v =vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204629(v=vs.85).aspx)

# unit-testing - 模拟文件编写器的最佳方法

> ID：12054575
> 
> 赞同：1
> 
> 时间：2012-08-21T12:12:23.533
> 
> 标签：unit-testing, groovy, metaprogramming

我想测试以下方法，特别是调用了 write 和 close 方法（在写检查的情况下，所写的是我所期望的）。真正的源代码是 Java，我正在用 Groovy 编写测试。我不能使用地图强制，因为没有默认构造函数。我尝试了 mockFor 和 metaClass，但只有当我将源代码更改为 groovy 并在 groovy 中进行单元测试时，我才能让它们工作。我有任何常规选项来测试此代码吗？下面的代码是 groovy，但 java 方法源非常相似。生成一个真正的标头，执行一些日期逻辑，然后写入结果。

```
class TestWriter {
    protected void writeResultToXMLFile(String response,FileWriter fw, Date today){
        String header = "header";
        try{
            fw.write(header);
            fw.close();
        } catch (IOException ioe){
            String errorMessage = "Unable to write to file";
            try{
                fw.close();
            }catch (IOException ioException){
                errorMessage += ", Error attempting to close the file";
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:12:09.820

将您的代码类 FileWriter 替换为 Writer 接口，然后您将能够为 writer 创建一个模拟实现并测试它是否接收所有需要的调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:44:19.443

另一种可能性是使用像[Mockito](https://code.google.com/p/mockito/)这样的框架来模拟`FileWriter`，然后`verify`传递正确的值。

它看起来像这样：

```
// create the mock
FileWriter mock = mock(FileWriter.class);

// call the method under test and pass in the mock 

// verify the intended behaviour
verify(mock).write("the expected text");
verify(mock).close(); 
```

希望这可以帮助。

# java - 从另一个 UI 获取信息

> ID：12054585
> 
> 赞同：1
> 
> 时间：2012-08-21T12:12:42.437
> 
> 标签：java, jsf, jsf-1.2

有一个 UI 应用程序提供了多种功能，其中一个是下载客户信息。只有经过身份验证的用户才能访问应用程序功能。

我正在使用 JSF 构建一个 UI，它需要从我上面提到的 UI 中提取客户信息。我的 UI 中将出现一个按钮下载客户。单击下载客户时，我的 UI 必须调用另一个 UI，输入用户 ID 和密码（在我的 UI 的属性文件中配置），然后发送适当的请求以下载客户信息，最后将该信息显示给用户。

用户界面应用程序 1 -

(1) 点击获取客户信息菜单链接 - 在后台触发以下列出的活动

UI 应用程序 2 - (a) 登录 (b) 单击客户信息菜单链接 (c) 单击客户信息屏幕中的下载客户数据按钮 (2) 向用户显示客户信息。

活动 (a) 、 (b) 和 (c) 必须在对用户透明的背景中完成，并且必须向用户显示 (c) 中的信息。

这可能吗？是否有任何框架/工具可以使从另一个 UI 中提取信息的任务更容易。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:03:35.487

不要将它们视为两个不同的“UI”。它们是两个不同的系统。您要实现的是系统级集成。大多数系统都支持某种“程序化”服务层。首先探索它是否有一个。如果没有，请探索是否可以构建和使用。如果这不可能，请检查您是否可以将两个系统置于同一登录名下，即单点登录应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:00:52.857

如果您将用户名和密码保存在属性文件中：

您可以轻松地执行以下操作：

您只需通过分配操作来调用 servlet，`onsubmit` `url`并向该 servlet`URL`添加用户名和密码以及任何其他属性。当得到响应时，您只需将其整齐地呈现给您的`UI`.

# c# - 字符串操作性能和速度

> ID：12054587
> 
> 赞同：0
> 
> 时间：2012-08-21T12:12:44.667
> 
> 标签：c#, string, optimization, richtextbox

下面是我为`RichTextBox`派生类编写的三个方法，它是一个语法高亮。Richtextbox 的当前行有一个共享副本，`lcpy_strLine`全部大写。这些方法的作用是；

*   **ColorInsideTwoChars**将两个指定字符之间的字符着色为指定颜色。前任。`ColorInsideTwoChar("(", ")", Color.Green)`将为当前行中的所有括号集将两个括号之间的所有字符着色为绿色

*   **ColorTilNoNumFromChar**颜色，从指定字符开始，所有为数字的字符，例如。`ColorTilNoNumFromChar("G", Color.Red)`遇到 G 后会将所有数字着色为红色（包括 G）

*   **如果指定字符后面没有字母，则ColorCharIfNotFollowedByLetter**为指定字符着色。前任。`ColorCharIfNotFollowedByLetter("x", Color.Orange)`会将所有 X 后面没有字母的橙色着色

我的问题是，是否有更快的方法来执行这些方法。它们看起来很丑，我认为这些方法肯定有更简单、更美观的方法。有什么建议么？我问是因为这些方法在几千行文件的每一行上运行并且非常慢。我需要加快他们的速度。我可以尝试以不同的方式重写它们中的每一个，或者我可以让一些聪明人尝试引导我朝着正确的方向前进。

```
 private void ColorInsideTwoChars(String car1, String car2, Color clr)
    {
        int indx1 = 0;
        int indx2 = 0;
        while ((indx1 = lcpy_strLine.IndexOf(car1, indx1)) != -1
                && (indx2 = lcpy_strLine.IndexOf(car2, indx2)) != -1
                && indx1 < indx2)
        {
            SelectionStart = m_nLineStart + indx1;
            SelectionLength = (indx2 - indx1) + 1;
            SelectionColor = clr;
            indx1 = ++indx2;
        }
    }
    private void ColorTilNoNumFromChar(String car, Color clr)
    {
        int indx1 = 0;
        while ((indx1 = lcpy_strLine.IndexOf(car, indx1)) != -1)
        {
            int j = 0;
            for (j = indx1 + 1; j < m_nLineLength; j++)
            {
                if (!Char.IsDigit(lcpy_strLine[j]))
                    break;
            }
            SelectionStart = m_nLineStart + indx1;
            SelectionLength = j - indx1;
            SelectionColor = clr;
            indx1 = j;
        }
    }
    private void ColorCharIfNotFollowedByLetter(String car, Color clr)
    {
        int indx1 = 0;
        while ((indx1 = lcpy_strLine.IndexOf(car, indx1)) != -1 &&
            indx1 + 1 < m_nLineLength)
        {
            SelectionStart = m_nLineStart + indx1;
            SelectionLength = 1;
            if (!Char.IsLetter(lcpy_strLine[lcpy_strLine.IndexOf(car) + 1]))
                SelectionColor = clr;
            else
                SelectionColor = Color.Black;
            ++indx1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:38:32.067

至于`ColorInsideTwoChar()`，请注意，即使它们是嵌套的，您也会对括号之间的内容进行着色，从而导致执行更多次。如果括号（或一般的这些字符）没有正确匹配怎么办？也许找到开头的字符，然后计算它关闭字符并为两者之间的所有内容着色？然后从你有关闭字符的位置开始搜索，并寻找下一个打开的字符。另外，我只会在换行时调用它，不知道你的想法是什么；）也许只在 RichBox 的可见部分首先，然后在背景中为其余部分着色？

```
for (j = indx1 + 1; j < m_nLineLength; j++)
        {
            if (!Char.IsDigit(lcpy_strLine[j]))
                break;
        } 
```

我会换

```
while (Char.IsDigit(lcpy_strLine[++j])) ; 
```

虽然它可能或多或少相同......

但我认为你应该等待一些更专业的答案，可能有一些更优雅的方式来做到这一点。

另外，也许在方法的开头找到*所有*出现的想要的字符，并将它们放入一个数组中，会比一次又一次地查找它们更快吗？

对于更大的文件块，这样做也可能比单行更快......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:53:03.887

1]`ColorInsideTwoChars` `ColorInsideTwoChars`将两个指定字符之间的字符指定颜色。前任。`ColorInsideTwoChar("(", ")", Color.Green)`将为当前行中的所有括号集将两个括号之间的所有字符着色为绿色

这个函数的坏处是`IndexOf`函数。如果不是更糟，您的表现将是 O(n^2)。你基本上应该做的是：

只读取一次，并将大括号的所有位置存储到一个新列表中。像这样：

```
var leftList = new List<int>();
var rightList = new List<int>();
for(var i = 0; i < str.Length; i++)
{
   if(str[i] == car1) leftList.Add(i);
   if(str[i] == car2) rightList.Add(i);
}

if(leftList.Length != rightList.Length) { /*possible error or no?!*/ }
//now start going like this:
int index1 = leftList.Length - 1;
int index2 = 0;
while(index1 >= 0 && index2 < rightList.Length)
{
  //do your coloring here.
  index1--;
  index2++;
} 
```

这将比你现在的要快得多。虽然你会交易一点记忆，但没关系。我建议您将这些列表作为类的变量而不是方法。还要确保默认情况下它们通常足够大，因此不会发生分配。在下一次迭代中，使用`Clear()`.

2]`ColorTilNoNumFromChar`颜色，从指定字符开始，所有字符为数字，例如。`ColorTilNoNumFromChar("G", Color.Red)`遇到 G 后会将所有数字着色为红色（包括 G）

我不会这样写，但更长的是：

```
for(var i = 0; i < str.Length; i++)
{
   if(str[i] == "G")
   {
      int selectionStart = i + 1;
      int selectionLength = -1;
      for(var k = i + 1; k < str.Length; k++)
      {
         if(IsDigit(str[i]))
         {
            if(selectionLength == -1) selectionLength = 0;
            selectionLength++;
         } else break;
      }
      //look if selectionLength is not -1
      i = k;//advance.
   }
} 
```

从你的最后一个开始，你也有`IndexOf`可能被淘汰，从而产生更多的性能。

而且，如果您分别运行这些方法（每个方法），那么它就是一个诺诺。你应该一次做所有事情（会更难，但要快得多）。

# c++ - C 和 C++ 构建过程之间的区别

> ID：12054590
> 
> 赞同：2
> 
> 时间：2012-08-21T12:12:52.453
> 
> 标签：c++, c, compilation, linker, c-preprocessor

据我了解，C 语言由 4 个阶段的编译过程组成：

在我的 Windows 操作系统上 -

1.  预处理器

2.  组装

3.  汇编

4.  链接

我想知道 C 编译器和 C++ 编译器在上述步骤方面是否有任何区别。我相信 C++ 也可以由上述 4 个阶段组成。

从大局的角度来看，有没有我不知道的差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:19:33.993

预处理和链接阶段基本相同（C 和 C++ 共享预处理器，链接是在不考虑源语言的情况下完成的）。编译/组装阶段仍然存在，但它必须有所不同——毕竟，我们在这里处理的是不同的语言。

编辑：C 与 C++ 编译的细节太多了，无法在这里回答；）

# php - 使用 WAMP 和本地主机： $user = $facebook->getUser(); 返回 0

> ID：12054591
> 
> 赞同：1
> 
> 时间：2012-08-21T12:12:53.690
> 
> 标签：php, facebook, wamp

在这个网站上搜索了一个答案后，我正用这个来拉扯我的头发。

我已经从我的服务器中获取了应用程序代码，并将其在本地下载到 WAMP 以供某些本地开发人员使用。我似乎无法让我的基本 fb 登录工作。我在 fb 中创建了一个指向 hxxp://localhost/ 的新应用程序。将我的代码更新为新的 appid 和密码。在 WAMP 中启用 CURL。

此代码显示到 facebook 对话框的链接，或者不显示。我能够登录并返回我的网站，但是 $user = $facebook->getUser(); 总是返回零：

```
function getLoginURL()
{
if (DEBUG=='true')
{
    error_log("running getLoginURL", 0);
}

$facebook = new Facebook(array(
    'appId'  => APP_ID,
    'secret' => SECRET,
    'fileUpload' => true
));
$user = $facebook->getUser();
echo "User:" . $user ;
if($user && userHasPermissions())
{
    //user has permissions and is logged in

    $me= $facebook->api('/me'); 
    $con = getConn();   
    $query="select * from users where fb_id='".$user."';";
    $result=mysql_query($query);     
    $result=mysql_query($query);     
    while ($row = mysql_fetch_assoc($result)) 
    {
      $userid =  $row['id'];
    }                                       

  if (mysql_num_rows($result) == 0)
    {
        if (DEBUG=='true')
    {
        error_log("Got Newb", 0);
    }
        // Got a newbie, now we need to add him into our db                 
        $query2= "INSERT INTO users (fb_id ,name ,email) VALUES ('".$user."','". $me['name']."','". $me['email']."')";
        $result2=mysql_query($query2);                          
        $facebook->api("/me/feed", "post", array(
        message => NEWUSERWALLPOSTMESSAGE,
        picture => BASEURL . NEWUSERWALLPOSTIMAGE,
        link => BASEURL,
        name => SITENAME . SITEMOTTO,
        caption => SITENAME . " welcomes you!"
        ));
        echo "<script language='javascript'> window.location='". BASEURL. "';</script>" ;
    }
    else
    {       
        if (DEBUG=='true')
    {
        error_log("Updating user data", 0);
    }                   
        $query3 = "UPDATE  users SET  email='". $me['email']. "',access_token='". $facebook->getAccessToken() ."',name='". $me['name'] ."' WHERE  id=". $userid .".;";                                                              
        $result3=mysql_query($query3);                                                                                                  
    }
  return null;
} 
else 
{
    //echo "getting URL";
    if (DEBUG=='true')
    {
        error_log("Returning LoginURL", 0);
    }
    $loginUrl = $facebook->getLoginUrl(
    array('scope' => 'publish_stream,user_photos,offline_access,email'));   

}
if($user)
{
    if (DEBUG=='true')
    {
        error_log("Updating AccessToken", 0);
    }
    $access_token = $facebook->getAccessToken();
    $query3 = "UPDATE  users SET  email='". $me['email']. "',access_token='". $facebook->getAccessToken() ."',name='". $me['name'] ."' WHERE  id=". $userid .";";                                                               
    $result3=mysql_query($query3);  
}
else
{

    }
    return $loginUrl;
} 
```

更新：

经过几个小时的调查，我运行本地主机的网络似乎已经阻止了 API 调用 home 所需的端口。这可以解释为什么 CURL 有效但没有数据返回。

# windows-8 - DirectSound 会在 Windows 8 上运行吗？

> ID：12054595
> 
> 赞同：0
> 
> 时间：2012-08-21T12:13:16.820
> 
> 标签：windows-8, directx-9, directsound

我指的是 DirectSound，它是 DirectX 9.0c 的一个组件。

我知道 MediaElement 是首选音频类，但它不提供我的应用程序需要的一些 DirectSound 音频功能，特别是指定音频输出设备目标的能力。MediaElement 只会播放到当前默认的音频播放设备——除非它正在升级到 Win8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:31:52.553

[在 Metro 应用程序和桌面应用程序中鼓励使用 DirectX。](http://blogs.msdn.com/b/chuckw/archive/2012/04/02/xaudio2-and-windows-8-consumer-preview.aspx) 不使用 DirectSound 是因为它的继任者[XAudio2](http://msdn.microsoft.com/en-us/library/windows/apps/hh441485.aspx#intro)是推荐的。

> XAudio2 是一个专门支持游戏音频的 Windows 低级音频库。它为游戏提供数字信号处理 (DSP) 和音频图形引擎。**XAudio2**通过支持 SIMD 浮点架构和高清音频等计算趋势，扩展了其前身 DirectSound 和 XAudio。它还支持当今游戏更复杂的声音处理需求。

# video - 根据 WCAG 2.0 的成功标准 1.2.5，我如何处理无声视频？

> ID：12054597
> 
> 赞同：2
> 
> 时间：2012-08-21T12:13:29.643
> 
> 标签：video, wai-aria, wcag2.0

我不确定如何处理 WCAG 2.0 的[成功标准 1.2.5](http://www.w3.org/TR/WCAG20/#media-equiv-audio-desc-only)。它说：

> 为同步媒体中所有预先录制的视频内容提供音频描述

我是否必须为**无声视频**提供音频描述，展示如何制作纸飞机以满足 AA？[不幸的是，同步媒体](http://www.w3.org/TR/UNDERSTANDING-WCAG20/media-equiv-audio-desc-only.html#synchronizedmediadef)的定义似乎不是很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T23:53:41.543

在您的情况下，1.2.1 是相关的，而不是 1.2.5，因为您有一个没有声音的视频。请参阅“[仅限视频](http://www.w3.org/TR/WCAG20/#video-onlydef)”：

> 仅包含视频的基于时间的演示文稿（无音频且无交互）

**[1.2.1 纯音频和纯视频（预录）](http://www.w3.org/TR/WCAG20/#media-equiv-av-only-alt)**说：

> 对于预先录制的纯音频和预先录制的纯视频媒体，以下情况是正确的，除非音频或视频是文本的替代媒体并明确标记为：（A 级）
> 
> *   […]
> *   **仅**预录视频：提供基于时间的媒体的替代方案或提供为预录纯视频内容提供等效信息的音轨。

因此，您必须提供视频的替代方案，例如解释如何制作纸飞机的文本或该解释的口头记录。

/edit：啊，对不起，我读到你想获得AA。所以是的，据我了解，您*必须*为纯视频提供音轨。

* * *

我认为明确声明根本没有音频也会很有帮助。但这不是公平的要求。

# css - 在 CSS 'padding-left-bottom' 中，存在类似的东西吗？

> ID：12054605
> 
> 赞同：0
> 
> 时间：2012-08-21T12:13:51.270
> 
> 标签：css

我有标题导航器标签，如

![图像](../Images/f62db264077f4659a1bf657abdadbdd6.png)

样式如下

```
.navigation {
    border: 1px solid red;
    border-bottom: 0 none;
    border-radius: 8px 8px 0 0;
    color: #264B9B;
    padding-bottom: 1px;
} 
```

如果我放弃`padding-bottom: 1px;`, 那么图像

![图像](../Images/23d2342eb635985d2da5de78a9a170c6.png)

填充左下侧看起来不错，但填充右下侧不正确。

如何纠正这种样式？

[编辑： jsfiddle](http://jsfiddle.net/HENjp/)中的 html 源代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:35:21.130

尝试这个：

**HTML**

```
<div class="navigation">
    <div class="left"></div>
    <div class="right"></div>
</div> 
```

**CSS**

```
.navigation {
    border: 1px solid red;
    border-bottom: 0 none;
    border-radius: 8px 8px 0 0;
    color: #264B9B;
    width:100px;
    height:80px;
    position:relative;
}
.navigation div{
    border-left: 1px solid red;
    width:100px;
    height:8px;
    bottom:-8px;
    position:absolute;
}
.left{
    border-radius:0;
    right:0px;
}
.right{
    border-radius:0 0 0 8px;
    right:-101px;
} 
```

​ 示例：http: [//jsfiddle.net/ujC95/](http://jsfiddle.net/ujC95/)

# twitter-bootstrap - 引导程序：表格超出边界

> ID：12054608
> 
> 赞同：4
> 
> 时间：2012-08-21T12:13:57.587
> 
> 标签：twitter-bootstrap

我正在尝试在模态中的井内制作表格。这是一段代码：

```
<div class="modal-body">
<form class="form-horizontal">
    <form class="well form-inline">
        <label><h5>rtu</h5></label>
        <table class="table table-bordered">
            <tr>
                <th>mid</th>
                <th>type</th>
                <th>inverce</th>
                <th>mbaddr</th>
                <th>din_reg_offset</th>
                <th>din_type</th>
                <th>dout_reg_offset</th>
                <th>dout_type</th>
                <th>ain_reg_offset</th>
                <th>ain_type</th>
                <th>aout_reg_offset</th>
                <th>aout_type</th>
                <th>float_type</th>
            </tr>
            <tr>
                <td><input type="text" id="mid"></td>
                <td><input type="text" id="type"></td>
                <td><input type="text" id="inverce"></td>
                <td><input type="text" id="mbaddr"></td>
                <td><input type="text" id="din_reg_offset"></td>
                <td><input type="text" id="din_type"></td>
                <td><input type="text" id="dout_reg_offset"></td>
                <td><input type="text" id="dout_type"></td>
                <td><input type="text" id="ain_reg_offset"></td>
                <td><input type="text" id="ain_type"></td>
                <td><input type="text" id="aout_reg_offset"></td>
                <td><input type="text" id="aout_type"></td>
                <td><input type="text" id="float_type"></td>
            </tr> 
        </table>
    </form>
</form> 
```

但是桌子不适合井的边界。像这样： ![在此处输入图像描述](../Images/f2d861fd2f824322d2cdc408c0892019.png)

但我想要这样的东西： ![在此处输入图像描述](../Images/17a9d153ebc2b9d65e545b875c9d0dbf.png) 我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:25:55.890

您的表格标记不正确。它应该遵循这种格式。

```
<table>
 <tr>
  <th>Month</th>
  <th>Savings</th>
 </tr>
 <tr>
  <td>January</td>
  <td>$100</td>
 </tr>
</table> 
```

（来自[http://www.w3schools.com/tags/tag_table.asp](http://www.w3schools.com/tags/tag_table.asp)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:49:32.947

您可以使用`class="input-mini"`或`class="input-small"`在您的输入上使它们更小。但是您的表格将始终具有固定的最小宽度，其中包含您的输入，并且`well`将根据其周围的内容调整大小。您可能仍然会在小浏览器窗口中遇到问题。

# yui-compressor - 为什么 YUI Compressor 不使用这些函数名称？

> ID：12054609
> 
> 赞同：2
> 
> 时间：2012-08-21T12:13:57.480
> 
> 标签：yui-compressor, minify

这是输入：

```
function local2functionA()
{
    local2functionB('hello');
}

function local2functionB(text)
{
    alert(text);
} 
```

这是输出：

```
function local2functionA(){local2functionB("hello")}function local2functionB(a){alert(a)}; 
```

它没有修改函数名称的任何想法？

[http://www.shrinker.ch/](http://www.shrinker.ch/)的结果相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:32:04.477

我认为这是因为这些函数是在顶层声明的，因此对“外部”可见，因此您不能只更改它们的名称。

如果将 local2functionB 的定义放在 local2functionA 中，它会很好地缩小：

```
function local2functionA()
{
    function local2functionB(text)
    {
      alert(text);
    }

    local2functionB('hello');
}

// becomes 

function local2functionA(){alert("hello")}; 
```

请注意，剩余的顶级函数也不会被重命名（而“私有”函数被完全内联）。

# python - 根据纬度和日出时间计算经度？

> ID：12054613
> 
> 赞同：4
> 
> 时间：2012-08-21T12:14:05.790
> 
> 标签：python, math, astronomy, xephem

我正在计算当前太阳高度当前为 ~0.0 的位置的经度。这是通过迭代一系列纬度来完成的，计算日出时间`(0.0, latitude)`，然后通过将时间差（小数小时）乘以 15（太阳在地球表面“移动”的度数）来计算经度。

从计算出的坐标元组计算日出时间时，最低纬度与最高纬度有几分钟的时间差。如何解释这种差异？

在：

```
points=walk_the_earth() 
```

出去：

```
[-66.53673944994807, -65.0] 2012-08-21 12:07:04.748893
[-67.13184367865324, -64.5] 2012-08-21 12:07:05.666852
[-67.70314011722803, -64.0] 2012-08-21 12:07:06.541521
...
[-119.24775995314121, 64.0] 2012-08-21 12:08:45.536679
[-119.93103107437491, 64.5] 2012-08-21 12:08:47.770382
[-120.64480075612664, 65.0] 2012-08-21 12:08:50.152224 
```

（时间以 UTC 为单位）。代码在〜秒下运行。

**造成这种差异的原因是什么？**

*代码*

```
import math
import xephem

def longitude_from_latitude(lat):
    """
    Calculate the longitude at which Sun altitude is ~0.0.

    Args:
        lat: A float indicating the latitude to calculate longitude
            for.

    Returns:
        float
    """
    now = xephem.julianday.now()
    meridian = xephem.Observer(now.midnight.dublin, 0.0, lat)
    sun = xephem.Sun.fromobserver(meridian)
    transit = sun.transit(-1)
    # Calculate time difference between sun position and local time.
    delta_t = ((now - transit['rs_risetm']) * 24.0) * 15.0
    return delta_t

def walk_the_earth(resolution=0.5, minlat=-65.0, maxlat=65.0):
    """
    Calculate the coordinate at which Sun altitude is ~0.0 for
    a given range of latitudes.

    Args:
        resolution: A float indicating the number of points to
            return for the specified range of latitudes. 1.0 means
            that 1 longitude will be calculated for each real
            latitude, 0.5 means 2, etc.
        minlat: A float indicating the lowest latitude to start
            calculating.
        maxlat: A float indicating the highest latitude to 
            calculate up to.

    Returns:   
        list of longitude, latitude, xephem.Sun tuples.
    """
    now = xephem.julianday.now()
    lat = minlat
    points = []
    while True:
        if lat > maxlat:
            break
        lng = longitude_from_latitude(lat)
        # Create an Observer for longitude and latitude
        obs = xephem.Observer(now.dublin, lng, lat)
        sun = xephem.Sun.fromobserver(obs)
        points.append([lng, lat, sun])
        # sun.transit() calculates the rising, transit and setting times
        # of the sun at Observers location. The -1 argument specifies
        # that we consider sunrise to occur when the upper limb touches
        # the horizon (0 indicates center, 1 indicates lower limb).
        print points[-1], sun.transit(-1)['rs_risetm'].datetime()
        lat += resolution
    return points 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:12:45.203

[我在NOAA 的太阳能计算器](http://www.esrl.noaa.gov/gmd/grad/solcalc/)上检查了您列表中极端 N 和 S 点的日出时间。输入纬度/经度和今天的日期给出的日出时间与您发布的表格中的相同，但条件是计算器仅将日出时间提供到最接近的分钟。

不过，如果您的问题是*我的代码有什么问题？*答案很可能是，*什么都没有*。

但是，如果您的问题真的*是关于日出时间位置和日期的变化，我有什么不明白的？*那么你的问题对于SO来说是严重的题外话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:42:49.493

我认为更直接的方法对您有用，可以避免每小时 15 度的校正。毕竟，你有一个星历，所以你可以利用它。

1.  选择纬度和时间
2.  选择两个经度，a 和 b，使得太阳在地平线之上（高度 > 0，例如 a），而在地平线下方（高度 < 0，b）
3.  进行二分搜索：在 a 和 b 之间选择一个经度 c，然后计算那里的太阳高度。
4.  如果该高度足够接近零，请停止：c 是答案
5.  如果海拔小于0，设置b=c；否则设置 a=c。
6.  前往 3

为您想要的每个纬度执行此操作。

要检查事情是否正常，请在春分点进行计算，并且您计算的经度应该几乎完全相等（确保您了解原因）。在任何一个至日再做一次，经度应该变化很大，当你到达北纬 67 度或南纬 67 度时，算法将失败（你明白为什么吗？）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-20T18:42:50.990

太阳在天空中的位置是不均匀的。12 月的当地明显正午可能比当地平均正午早几分钟，而 6 月的当地明显正午可能会“晚”几分钟。这种“摆动”是通过时间等式预测的，如果我理解正确的话，它会在远离赤道的地方产生更明显的影响。

# c# - 来自 ExpandoObject 的 MethodInfo

> ID：12054614
> 
> 赞同：0
> 
> 时间：2012-08-21T12:14:11.520
> 
> 标签：c#, dynamic, reflection, expandoobject, methodinfo

我知道以前在[这里](https://stackoverflow.com/questions/3004965/reflect-on-an-expandoobject)要求对 ExpandoObjects 进行反射。

我的问题有点不同。我有静态和动态函数，应该从类似于`object ExecuteFunction(string name, params object[] parameters)`.

我通过反射执行静态函数。所以问题是，我是否可以重用 MethodInfo 调用并从 ExpandoObject 中获取 MethodInfo 对象？还是我必须实现 2 个功能（一个 with`Action`和一个 with `MethodInfo`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:28:08.967

`MethodInfo`对于 ExpandoObject 上的动态定义方法，您不会得到任何信息。
动态定义的方法与动态定义的属性相同，只是碰巧属于委托类型。

但是，此委托类型包含一个名为`Method`type的属性`MethodInfo`，您可以使用它：

```
object ExecuteFunction(IDictionary<string, object> obj, string name,
                       params object[] parameters)
{
    object property;
    if(!obj.TryGetValue(name, out property))
        return null;

    var del = property as Delegate;
    if(del == null)
        return null;

    var methodInfo = del.Method;

    // do with methodInfo what you need to do to invoke it.
    // This should be in its own method so you can call it from both versions of your
    // ExecuteFunction method.
} 
```

请注意，第一个参数的类型是`IDictionary<string, object>`。`ExpandoObject`实现了这个接口，我们不需要其他的特性`ExpandoObject`，所以参数只是我们需要功能的实现接口的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:23:21.913

开源框架 ImpromptuInterface（可从 nuget 获得）提供对 DLR 调用的轻松访问，让您可以通过字符串名称调用方法。唯一的问题是如果方法返回 void 你必须使用[InvokeMemberAction](http://code.google.com/p/impromptu-interface/wiki/UsageReallyLateBinding#dynamic_Impromptu.InvokeMemberAction%28object_target,_String_Or_In)并且如果它返回一个值你可以使用[InvokeMember](http://code.google.com/p/impromptu-interface/wiki/UsageReallyLateBinding#dynamic_Impromptu.InvokeMember%28object_target,_String_Or_InvokeMe)。这允许您调用动态定义的方法，并且调用静态定义的方法比反射更快。

# linux - centos中的tmp目录清理

> ID：12054619
> 
> 赞同：0
> 
> 时间：2012-08-21T12:14:31.660
> 
> 标签：linux, tmp

嗨，我的（坏）脚本在 /tmp 文件夹中填充了很多文件。现在，当我在 tmp 文件夹中执行 ls 时，它不会返回任何内容（我等了一个多小时）。因此我无法清理目录。我也试过重启。我可以看到 tmpwatch 正在运行，但它要么太慢要么根本不工作。

有什么（快速）方法可以清理 /tmp 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:25:12.763

怎么样：

```
find /tmp !-user root -delete 
```

您可以根据需要添加`-mtime <gracedays>`开关`cron`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:20:17.847

如果您对文件名结构有所了解，则可以执行以下操作：

寻找 。-name "stuff*" -exec rm {} \;

为了清理我的 tmp 目录中的旧 php 会话，我找到了 . -name "sess_*" -atime +1h -exec rm {} \; 在 cron 工作中。

如果您使用 rm，您可能会收到文件太多的错误，这就是为什么

# javascript - 连续或无限滚动，接近页面底部时加载更多内容

> ID：12054621
> 
> 赞同：0
> 
> 时间：2012-08-21T12:14:39.843
> 
> 标签：javascript, ajax, dynamic, scroll

我被要求设计一个随着用户不断滚动而不断扩展的网站。我在 JavaScript 方面经验丰富，但我从来没有遇到过任何可以管理这个的东西。使用这种技术的流行网站是 Twitter 和 Facebook。我知道我将需要 AJAX 来加载更多内容，但我不确定浏览器如何知道用户接近页面底部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T20:59:23.313

您可以使用三个 JavaScript 函数来执行此操作。第一个是 `window.scrollY`。此功能将为您提供网页上的高度位置（即，如果您在顶部，则为 0，向下滚动时它会增加）。

第二个是`document.body.scrollHeight`这给你窗口的总高度，包括滚动。

最后的功能是`window.innerHeight`。这为您提供了用户可以看到的窗口高度（可见部分的高度）。

使用这三个函数可以获得浏览器窗口的顶部和底部位置以及整个页面的大小。从中您可以确定用户在页面上的位置并确定页面是否应该展开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:52:36.133

这是一个基于 Patrick548 的回答（得到我的赞成）的假 AJAX 调用的独立示例。在 Chrome 中测试。

这不考虑用户滚动回页面顶部，但支持应该很容易添加。

```
<!doctype html>
<html lang="en">
    <head>
        <title>Infinite Scroll Test</title>
        <style>
#articles {
    width: 200px;
}

.article {
    display: block;
    border: 1px solid #000;
    border-radius: 4px;
    background-color: #eee;
    margin-bottom: 1em;
}
        </style>

        <script>
var articleCounter = 0;

function fakeAjaxCall(cb) {
    var createNewArticle = function() {
            return {
                id: ++articleCounter
              , author: 'Foo Bar'
              , text: 'Lorem ipsum and all that jazz.'
            };
        }
      , articles = []
    ;

    for (var i=0; i<10; i++) {
        var fakeArticle = createNewArticle();
        articles.push(fakeArticle);
    }

    // call the fake success handler with the fake data
    if (cb && typeof(cb == 'function')) cb({ articles: articles });
}

function appendFakeData(data) {
    if (! data && data.articles) return;

    for (var i=0; i<data.articles.length; i++) {
        var article = data.articles[i]
        document.querySelector('#articles').innerHTML +=
            '<div class="article">[' + article.id + '] ' + article.author + ' sez:<br>' + article.text + '</div>';
   }

    var articleCount = document.querySelectorAll('.article').length;
    console.log('article count is now: ' + articleCount);

    if (articleCount > 50) removeFirstTenArticles();
}

function removeFirstTenArticles() {
    var articlesEl    = document.querySelector('#articles')
      , firstChild    = articlesEl.firstChild
      , articleStyle  = window.getComputedStyle(document.querySelector('.article'))
      , articleHeight = parseInt(articleStyle.height) + parseInt(articleStyle.marginBottom);
    ;

    // remove the first 10 articles in the container
    for (var i=0; i<10; i++) {
        articlesEl.removeChild(firstChild);
        firstChild = articlesEl.firstChild;
    }

    // scroll back to where the new articles were inserted
    document.body.scrollTop -= (10 * articleHeight);
}

window.addEventListener('load', function() {
    document.body.scrollTop = 0; // start at the top
    fakeAjaxCall(appendFakeData);
});

document.addEventListener('scroll', function(evt) {
    // if distance from bottom of page is zero, grab and append more articles
    if (document.body.scrollHeight - (window.innerHeight+window.scrollY) == 0) {
        console.log('getting more data...');
        fakeAjaxCall(appendFakeData);
    }
});
        </script>
    </head>

    <body>
        <section id="articles"></section>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T17:57:46.750

[http://www.youtube.com/watch?v=eziREnZPml4](http://www.youtube.com/watch?v=eziREnZPml4)

```
<script type="text/javascript">
function yHandler();
var wrap = document.getElementById('wrap');
    var contentHeight = wrap.offsetHeight;
var yOffset = window.pageYOffset; 
var y = yOffset + window.innerHeight;
if(y >= contentHeight){
    // Ajax call to get more dynamic data goes here
    wrap.innerHTML += '<div class="newData"></div>';
}
var status = document.getElementById('status');
status.innerHTML = contentHeight+" | "+y;
}

window.onscroll = yHandler;
</script> 
```

# c++ - 错误 ID 到错误字符串的映射 - C++ 中的实现

> ID：12054626
> 
> 赞同：1
> 
> 时间：2012-08-21T12:15:12.877
> 
> 标签：c++

我正在实现一个将为我的应用程序处理错误消息的类。这个类的主要要求是

1.  将错误 ID 存储到字符串映射（在编译期间）

    0，“无错误”

    147, "无效输入"

    . . .

    2500, “未知错误”

2.  `const std::string& getErrorString(int errorId)`从映射中检索字符串的方法

errorIds 不是连续的，因为我要为模块分配范围。我正在考虑使用映射来存储映射，但这意味着我必须在运行时将错误字符串插入到映射中 - 我不确定这是否有效，因为在编译过程中所有错误都可用。

实现错误 id 到字符串映射以实现高效检索和优化运行时间的最佳方法是什么？我没有提升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:17:04.043

程序启动的动态初始化阶段是实现此目的的理想场所：

```
std::map<int, std::string> const Errors {
  { 0, "No Error" },
  { 1, "Bad mojo" },
  /* ... */
  { 2500, "Unknown error" },
};

std::string const & getErrorString(int errorId)
{
    auto it = Errors.find(errorId);
    return it != Errors.end() ? it->second : Errors.find(2500)->second;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:17:15.167

根据您拥有的数量以及调用函数的频率，仅拥有一个带有`int`s 和`const char *`s 的结构数组并扫描它可能会更容易。或者，您可以将此数组拆分为多个范围，但是否值得维护工作的性能增益由您决定。

# tridion - 由 UGC 功能在 tridion 中发表的评论：它从 cookie 中选择用户名，而不是从用户名文本框字段中选择

> ID：12054640
> 
> 赞同：0
> 
> 时间：2012-08-21T12:15:47.643
> 
> 标签：tridion, ugc

我正在研究 Tridion 2011 中的用户生成内容功能，我为用户提供了一个选项，可以在页面/组件上发表评论。

实施此操作后，用户可以成功提交他对页面/组件的评论。但我在这个功能中面临一个问题，

假设，如果用户在页面上以 XXX 作为用户名和 XXX@XX.com 电子邮件地址在页面上发表评论，并且在一段时间后，如果任何其他用户从同一浏览器打开该页面并给出不同名称的评论，则其提交成功，

但是当我在Trdion页面中看到这些评论详细信息时，两条评论都显示相同的用户名，如果任何其他用户从同一浏览器在页面上提交评论，它不会更改用户名，

经过更多调查后，我发现 Tridion 中的用户生成内容从 cookie 中选择用户名。但是，一旦我从浏览器中删除了该页面的 cookie，然后它会选择用户在“用户名文本”字段中传递的当前用户名。

任何人都可以帮助我，我们在 UGC 的管理注释中有任何属性或设置可以选择当前用户名吗？

```
<ugc:ManageComments runat="server" ItemURI="@PhysicalUri" PostParameter="addComment@{ @PhysicalUri}" UsernameParameter="one@{ @ItemID }" EmailParameter="email@{ @PhysicalUri}" EditParameter="editComment@{ @PhysicalUri}" CommentIdParameter="commentId@{ @PhysicalUri}" RemoveParameter="removeComment@{ @PhysicalUri}">
        <ugc:Comments runat="server" ItemURI="@PhysicalUri" Submitted="@Package.showunmoderatedcomments" FlaggedForModeration="true" Posted="true" Resubmitted="false">             
.....
....
<div class="grey_form">
<form method="post" id="comments@{ @ItemID }" class="grey_form">
    <fieldset>
        <div class="legend">Comment on this story</div>
        <label for="one@{ @ItemID }">Enter your name</label>
        <input type="text" id="one@{ @ItemID }" name="one@{ @ItemID }" value ="<% =MemberName@{ @ItemID } %>" ><br/>

        <label for="two@{ @ItemID }">Enter your email address</label>
        <input type="text" id="two@{ @ItemID }" name="email@{ @PhysicalUri}" value ="<% =MemberEmailAddress@{ @ItemID } %>" ><br/>

        <label for="three@{ @ItemID }">Type your comment</label>
        <textarea id="three@{ @ItemID }" name="addComment@{ @PhysicalUri}"></textarea><br/>
        <input type="submit" name="B1@{ @ItemID }" class = "button grey" value ="SUBMIT"/>
    </fieldset>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:47:08.187

匿名用户将通过 cookie 进行识别，如果您允许匿名用户发表评论，这是一种行为，因为您可以允许访问者编辑或删除他们自己提交的评论。

在实际情况下，您的访问者永远不会使用相同的浏览器。您可以通过 Audience Manager 禁用匿名访问并设置访问者帐户，这样您就可以从 Audience Manager 中获取用户帐户。

如果您仍然想要匿名并拥有不同的用户名，解决方法就像在提交点击您的评论时实现 javascript cookie 删除功能一样简单。

如果您打算集成受众管理器，请查看[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_BD0C04660E7A449DB692B91E44A3015D](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_BD0C04660E7A449DB692B91E44A3015D)

# django - 让 Django 触发返回自身的请求的最简单方法是什么？

> ID：12054645
> 
> 赞同：3
> 
> 时间：2012-08-21T12:16:08.180
> 
> 标签：django

我有一个 Django 函数，它拍摄应用程序提供的页面之一的快照。它通过从应用程序打开到应用程序的 HTTP 连接来实现此目的。

这目前作为管理命令运行，并且运行良好。但是，我想在保存模型时触发它，因为我正在对与模型连接的数据进行快照。如果我从模型的`save`方法中触发该函数，那么我会遇到视图代码在请求-响应 Django 循环的中途触发请求并`urllib2`抱怨的情况。

我认为这可能是因为我的 django 开发服务器上只有一个线程。即使这是原因，我也不希望我的应用程序依赖于在模型保存期间有两个可用线程。我不想将我的代码耦合到服务器的线程。

我认为我需要异步执行此操作，以便在保存模型并且请求/响应周期结束时，一些代理会启动并说“您需要运行此功能”。

可能的解决方案包括创建一个线程（我认为这不是一个特别好的主意）或使用 Celery（这可能是过度杀戮，因为我只做少量的工作）。

我想过使用信号处理程序，但是信号处理程序在模型的方法`model`期间都同步执行，并且信号不包含视图中更改的模型。`save``request_finished`

我可以使用运行管理命令的 cron 作业，但这会引入其他复杂性。如果之前的工作还没有完成怎么办？如何表示以及在什么上下文中存储该信号量？

音量将非常低，因为它是通过管理界面完成的。不过，我无法连接到管理界面，因为这也将在请求/响应期间执行。

假设我的问题是我需要异步触发此功能，那么最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:28:25.873

我肯定会推荐芹菜——真的没有更好的选择。将[django-celery](http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html)与[django 数据库代理](http://docs.celeryproject.org/en/latest/getting-started/brokers/django.html)一起使用是非常轻量级的，并且不需要设置任何 AMQP 服务器——它使用与 django 相同的数据库。

我已经将此设置用于具有轻量级异步需求的多个 django 项目，它非常简单可靠。

如果您碰巧使用的是 upstart，我在[这里](https://stackoverflow.com/a/10251072/473232)发布了一个 upstart 脚本的示例来自动启动您的 django-celery 代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:40:34.887

我不知道您是否可以接受，但一种简单的方法是将其编写为脚本并从 django 应用程序在后台运行。

# .net - .NET Web 服务对象需要处理

> ID：12054646
> 
> 赞同：0
> 
> 时间：2012-08-21T12:16:17.977
> 
> 标签：.net

我已经开发了 .net Web 服务应用程序，在此我是否需要在离开方法之前处理所有对象，或者它会自动由垃圾收集处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:18:04.530

任何实现`IDisposable`你需要处理的东西。任何其他对象将被自动收集。

最好的处理方式：

```
using (var item = new ADisposableClass())
{
   // Use the item here
}
// item will be disposed even if there was an error since it is inside "using" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:21:06.887

实现的对象`IDisposable`告诉您在完成后显式调用其`Dispose`方法。这是因为它消耗的资源应该只保留尽可能短的时间。

该`Dispose`调用释放对象使用的所有资源。在该`Dispose`方法的典型实现中，垃圾收集器在完成对象时将调用此方法的重载，这将处理任何非托管资源，例如文件句柄。但是此时通常不会释放托管资源；相反，他们也会等待垃圾收集器清理它们。

因此，您应该始终（不仅仅是在 Web 服务方法中）在完成处理此类对象时对其进行处理。`using`块是最简单的方法。

# c# - 如何在没有自定义类类型的情况下获取一个类的属性

> ID：12054655
> 
> 赞同：5
> 
> 时间：2012-08-21T12:16:54.200
> 
> 标签：c#, c#-4.0, reflection, properties, getproperties

我有一个 Person 类：

```
public class Person 
{
    virtual public long Code { get; set; }
    virtual public string Title { get; set; }       
    virtual public Employee Employee { get; set; }
} 
```

我需要一个通用的解决方案来通过自定义类类型获取没有属性的 Person 类的所有属性。表示选择`Code`、`Title`属性。

```
typeof(Person).GetProperties();           //Title , Code , Employee
typeof(Person).GetProperties().Where(x => !x.PropertyType.IsClass); // Code 
```

如何选择没有自定义类类型的所有属性？( `Code`, `Title`)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:21:09.863

一种方法是检查[`ScopeName`](http://msdn.microsoft.com/en-us/library/system.reflection.module.scopename)的[`Module`](http://msdn.microsoft.com/en-us/library/system.type.module)：[`Type`](http://msdn.microsoft.com/en-us/library/system.type.aspx)

```
typeof(Person).GetProperties().Where(x => x.PropertyType.Module.ScopeName == "CommonLanguageRuntimeLibrary") 
```

因为没有直接的方法来判断一个类型是否是内置的。

要获得其他想法，请参阅[此处](https://stackoverflow.com/questions/1114799/is-there-a-function-to-check-if-an-object-is-a-builtin-data-type)、[此处](https://stackoverflow.com/questions/5932580/how-to-determine-if-a-object-type-is-a-built-in-system-type)和[此处](https://stackoverflow.com/questions/2713900/how-to-determine-if-a-net-type-is-a-custom-struct)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:28:50.550

我建议使用一个属性：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public class SimplePropertyAttribute : Attribute
{
}

public class Employee { }

public class Person
{
    [SimpleProperty]
    virtual public long Code { get; set; }

    [SimpleProperty]
    virtual public string Title { get; set; }

    virtual public Employee Employee { get; set; }
}

internal class Program
{
    private static void Main(string[] args)
    {
        foreach (var prop in typeof(Person)
            .GetProperties()
            .Where(z => z.GetCustomAttributes(typeof(SimplePropertyAttribute), true).Any()))
        {
            Console.WriteLine(prop.Name);
        }

        Console.ReadLine();
    }
} 
```

# linux - 多线程写入磁盘与使用互斥锁写入内存

> ID：12054656
> 
> 赞同：1
> 
> 时间：2012-08-21T12:16:55.807
> 
> 标签：linux, mutex, hard-drive

我有一个多线程代码，需要从不同的线程写入日志。为了提高效率，我为线程设置了一个内存块，以便通过互斥锁同步写入它。但是我做了一个简单的测试，似乎写入硬盘的速度也很快。我正在使用Linux。不确定写入硬盘驱动器是否实际上更快或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:21:11.283

您可能有系统缓冲区缓存效应，隐藏了磁盘 ios 的实际成本，因此 2 个测试之间没有差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:26:17.840

它还取决于您现在使用的文件系统的类型。例如，ext4 fs 支持所谓的“懒惰”写入。您可以通过传递给您的挂载选项来切换此选项。

```
data=writeback. 
```

这意味着文件的元数据可以在文件写入后延迟写入。这不会导致文件系统损坏，但可能会导致最近的更改在发生崩溃时丢失（因此您可能会跳回到过去）。结果，将推迟*真正写入磁盘。*而且您的测试可能不那么正确。

# ios - KVO 崩溃 App

> ID：12054661
> 
> 赞同：1
> 
> 时间：2012-08-21T12:17:13.497
> 
> 标签：ios, key-value-observing

我在 iOS 应用程序中遇到了 KVO 问题。我似乎无法正确处理。我正在尝试做的事情：

我有一个观察（并显示）全局值的 MenuViewController（可在左侧显示，如 facebook 应用程序）。我尝试了一些不同的方法，但我的应用程序总是崩溃（在不同的点和出于不同的原因）。我将在下面描述这些。

注意：我`[object addObserver:self forKeyPath:@"name" options:NSKeyValueObservingOptionNew context:nil]`用于将 MenuViewController 注册为观察者并`[object removeObserver:self forKeyPath:@"name" context:nil]`取消注册。

场景 1：

o 我将注册为观察者的`-viewWillAppear`方法和 removeObserver 代码放在`-viewWillDisappear`. o 当值更改并且我完全更改了 rootViewController 时，我收到错误消息“发送到已释放实例的消息”。所以我猜 MenuViewController 仍然注册为观察者。

场景 2：

o 结果，我将`removeObserver`代码放入 dealloc 函数中（后来也将`addObserver`部分移到 viewDidLoad 中）作为观察者。

所以也许有人可以给我一个关于我的问题以及如何以正确的方式做 KVO 的提示。不幸的是，到目前为止，文档无法帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:09:56.057

您的视图控制器在解除分配之前并不总是获得 viewWillDisappear 。你的技术接近你应该做的。您可以获得多个 viewDidLoad 消息（如果系统卸载您的视图）和 viewWillAppear，但只有一个 dealloc。

你现在应该做的是使用 BOOL ivar，didObserve。在viewDidLoad中，如果didObserve == NO，观察对象，设置标志didObserve=YES，然后添加日志

```
NSLog(@"DID observe %@", object); 
```

在 dealloc （或您想要的任何其他地方）中，添加

```
if(didObserve) {
  unobserve
  NSLog(@"UNDID observe %@", object);
} 
```

现在运行您的应用程序，验证您收到两条消息，验证对象每次都是同一个对象（而不是 nil）。这应该可以帮助您解决问题。您甚至可以在“observeValueForKeyPath:”中添加一个日志，记录对该变量的任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:26:29.773

您的示例中的“对象”是什么？这很可能是您的麻烦的根源（例如已被释放）的对象。

# sql - Oracle sp 的列表 - 最新更新？

> ID：12054667
> 
> 赞同：1
> 
> 时间：2012-08-21T12:17:22.217
> 
> 标签：sql, oracle

我想在 Oracle pl SQL 中运行一个查询，它会告诉我最近更新了哪些 SP。在 SQL Server 中是这样的：

```
select name, modify_date 
from sys.procedures 
order by modify_date desc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:20:32.797

查询[`dba_objects`](http://ss64.com/orad/DBA_OBJECTS.html)表：

```
SELECT object_name, last_ddl_time
FROM dba_objects
WHERE object_type = 'PROCEDURE'
ORDER BY last_ddl_time DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:22:22.163

您是否尝试过此查询：

```
select *  from user_objects 
where object_type = 'PROCEDURE'
ORDER BY LAST_DDL_TIME DESC 
```

您可能还想使用此表查看所有程序：`all_objects`

# hadoop - 为什么地图任务的数量被覆盖？

> ID：12054670
> 
> 赞同：-1
> 
> 时间：2012-08-21T12:17:36.693
> 
> 标签：hadoop

我在 Hadoop 中配置了一个作业，并在我的代码中将 map 任务的数量设置为 8。但是当我运行该作业时，将启动 152 个 map 任务。

我不明白为什么我的配置被覆盖以及数字 152 的来源。

供您参考：在我的 mapred-site.xml 中，“mapred.map.tasks”的值为 24。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:23:35.673

Hadoop 在拆分数据时设置了最小映射任务数。您不能将最大值设置为低于最小值。

来自 Hadoop 维基：

> 地图任务的数量也可以使用 JobConf 的 conf.setNumMapTasks(int num) 手动增加。这可用于增加 map 任务的数量，但不会设置低于 Hadoop 通过拆分输入数据确定的数量。

来源：[http ://wiki.apache.org/hadoop/HowManyMapsAndReduces](http://wiki.apache.org/hadoop/HowManyMapsAndReduces)

# windows-phone-7 - 在 wp7 中滑动图像

> ID：12054674
> 
> 赞同：1
> 
> 时间：2012-08-21T12:17:46.073
> 
> 标签：windows-phone-7

我创建水平滑动会在下一个和上一个项目之间移动。我有三个图像，但问题是当我轻弹一次时它直接转到第三个图像，所以剩下第二个图像。

参考我的 C# 代码如下：

```
<toolkit:GestureService.GestureListener>
            <toolkit:GestureListener Flick="OnFlick"/>
        </toolkit:GestureService.GestureListener>

 private void OnFlick(object sender, FlickGestureEventArgs e)
        {
            try
            {

                    double ScreenWidth = ScrollGrid.Width;
                    // User flicked towards left
                    if (e.HorizontalVelocity < 0)
                    {

                        //Load Next Page                
                        double nextPage = (ScrollActivePage + 1) * ScreenWidth;
                        if (nextPage - ScrollGrid.ScrollableWidth <= ScreenWidth)
                        {
                            ScrollGrid.ScrollToHorizontalOffset(nextPage);
                            ScrollActivePage++;
                        }
                        else
                        {
                        ScrollGrid.ScrollToHorizontalOffset(ScrollGrid.ScrollableWidth);

                         }     
                    }

                    // User flicked towards right
                    if (e.HorizontalVelocity > 0)
                    {
                        //Load Previous Page;                
                        ScrollActivePage = (ScrollActivePage > 0) ? ScrollActivePage - 1 : 0;
                        ScrollGrid.ScrollToHorizontalOffset(ScrollActivePage * ScrollGrid.Width);

                    }

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:20:08.923

我假设您显示的图像都是相同的宽度，我会建议您使用一种相当简单但不同的方法来解决您的问题。

首先像这样定义你的网格

```
<Grid x:Name="ScrollGrid" Width="1500">
    <Grid.RenderTransform>
        <TranslateTransform x:Name="gridTransform"/>
    </Grid.RenderTransform>
    <!-- grid components or images -->
</Grid> 
```

然后在 C# 代码中的 OnFlick() 方法中使用以下两个方法：

```
private void OnFlick(object sender, FlickGestureEventArgs e)
{
        try
        {
            // User flicked towards left
            if (e.HorizontalVelocity < 0)
            {
                //Load Next Page
                swipeLeft();
            }

            // User flicked towards right
            if (e.HorizontalVelocity > 0)
            {
                //Load Previous Page;                
                swipeRight();
            }
}

private void swipeLeft()
    {
        //Animate the Grid to the left side
        DoubleAnimation da = new DoubleAnimation();
        da.From = gridTransform.X;
        da.To = gridTransform.X - 360; //You can customize this 360 to your image width by passing it as an argument to swipeLeft method
        da.Duration = new Duration(TimeSpan.FromSeconds(0.5));
        Storyboard.SetTarget(da, gridTransform);
        Storyboard.SetTargetProperty(da, new PropertyPath(TranslateTransform.XProperty));

        Storyboard sb1 = new Storyboard();
        sb1.Children.Add(da);
        sb1.Begin();
    }

    private void swipeRight()
    {
        //Animate the Grid to the right side
        DoubleAnimation da = new DoubleAnimation();
        da.From = gridTransform.X;
        da.To = gridTransform.X + 360;
        da.Duration = new Duration(TimeSpan.FromSeconds(0.5));
        Storyboard.SetTarget(da, gridTransform);
        Storyboard.SetTargetProperty(da, new PropertyPath(TranslateTransform.XProperty));

        Storyboard sb1 = new Storyboard();
        sb1.Children.Add(da);
        sb1.Begin();
    } 
```

我为我的项目编写了这些方法，可能需要根据您的要求进行一些自定义。但值得一试且易于修改的代码。

//还要确保 ScrollGrid 的任何父级没有覆盖或限制 ScrollGrid 的宽度

# php - 如何在 PHP 中获取我的服务器的当前上传速率？

> ID：12054678
> 
> 赞同：1
> 
> 时间：2012-08-21T12:17:55.747
> 
> 标签：php, linux

我想在 PHP 中获取我的根服务器的当前上传和下载速率。命令行工具**ifstat**显示我想使用的值：

![在此处输入图像描述](../Images/d622ae8f5a83cdf618041a30164f4323.png)

有什么办法我也可以在 PHP 中获取这些值吗？我所有的服务器都是 Debian/Linux 服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:25:40.927

当然，只需解析`/proc/net/dev`.

# azure-storage - Azure 表分区和行键

> ID：12054684
> 
> 赞同：2
> 
> 时间：2012-08-21T12:18:21.470
> 
> 标签：azure-storage

我有一个具有以下架构的天蓝色表：

```
public class Village : TableServiceEntity
{
    public Village(string districtName, string villageName)
    {
        PartitionKey = districtName.ToLower().Trim();
        RowKey = villageName.ToLower().Trim();

        DistrictName = districtName;
        VillageName = villageName;
    }
    public string DistrictName {get;set;}
    public string VillageName {get;set;}
} 
```

区名和村名分别是分区键和行键。我希望此密钥不区分大小写。也就是说，如果用户给出以下值，那么两者都应该代表同一个实体：

那是

区名 = "TVM"; VillageName = "陈";

和

DistrictName = "电视"; VillageName = "陈";

上述两个值代表同一个实体。我需要以不区分大小写的方式存储分区和行键。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:31:01.907

是的，这似乎是正确的方法。

您可能想要使用`ToUpperInvariant`而不是`ToLower`. 我认为大写的边缘情况较少，使用不变的文化可能会使您免于更多的边缘情况。（我对此知之甚少，所以请查一下而不是相信我。）

# directx - 确实有办法将 DirectX 9 的框架从 .NET 2 更改为 .NET 4

> ID：12054690
> 
> 赞同：0
> 
> 时间：2012-08-21T12:18:50.610
> 
> 标签：directx, nvidia

我是 DirectX 的初学者。我在 DirectX 9 中找到了激活 NVIDIA 3d Stereo 的源代码，但 DirectX9 不支持 .NET 4 以及我在 .NET 4 C# 中编写的所有项目和 dll 文件。有没有办法改变 DirectX 9 的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:35:26.740

3D 立体声源使用托管 DirectX (MDX) 对吗？可惜现在不支持MDX，只能在.Net 1.1 ~ 2.0 中使用。由于它是微软的封闭源，它无法更改为与.Net 4.0 兼容。

但是也有像 SharpDX 这样的替代 MDX 的项目。SharpDX 最近提供了 .Net 4.0 绑定。[http://sharpdx.org/news/sharpdx-july2012-status](http://sharpdx.org/news/sharpdx-july2012-status)它具有 MDX 的所有功能。如果您将 3D 立体声源的接口更改为与 SharpDX 而不是 MDX 连接，它将起作用。

# regex - Bash 问题（正则表达式）

> ID：12054691
> 
> 赞同：1
> 
> 时间：2012-08-21T12:18:57.600
> 
> 标签：regex, bash

为什么第一个和第二个变体不起作用，但第三个起作用

```
 #!/bin/sh
    #---------------------------------------------

    text="my:?text=this:one"
    if (echo $text | grep '^my\:\?text=this\:one') then
        echo "1"
    elif (echo $text | grep '^my:\?text=this:one') then
        echo "2"
    elif (echo $text | grep 'text=this:one') then
        echo "3"
    fi 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T12:23:39.777

grep 默认不使用正则表达式，添加`-E`标志以启用扩展正则表达式。

编辑： grep 默认情况下不使用*扩展*正则表达式，并且`grep -E`通常使用别名来`egrep`更快地使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T12:25:17.463

使用[Egrep](http://ss64.com/bash/egrep.html)扩展 grep 功能：

```
echo $text | egrep '^my\:\?text=this\:one' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:23:12.180

因为`:`不是正则表达式中的特殊符号，不需要转义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T12:24:49.220

去掉问号前的反斜杠。它不被视为特殊字符`grep`。相反，添加反斜杠会为其添加特殊含义。

# system - 螳螂虫追踪系统

> ID：12054692
> 
> 赞同：0
> 
> 时间：2012-08-21T12:19:06.490
> 
> 标签：system, bug-tracking, mantis

我知道这是一个愚蠢的问题，但我不知道错误跟踪系统是如何工作的，但我知道它们的用途。研究表明，mantis 比 Bugzilla 更易于使用，所以我决定使用 mantis，但不知道如何安装它。谁能告诉我，在小型系统中安装 mantis 错误跟踪系统需要采取哪些步骤公司跟踪网站、移动门户的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:29:40.137

听起来你真的是好意，所以我会尽力提供帮助

我假设您正在与开发人员合作？要求他们设置错误跟踪器，您可能会找到某种更轻松的解决方案，例如具有某些条件格式的共享谷歌文档，您可以制作非常有效的错误报告/跟踪解决方案

另一个简单且实际上非常好的选择是使用像 Bugherd 这样的在线服务。我实际上强烈推荐 Bugherd，你可以花很少的钱在网站上用笔记做标记。开发人员可以看到报告列表并使用问题标记转到您正在查看的屏幕，非常好的软件。可以安装到站点，不需要，我更喜欢将它与书签选项一起使用，以便在需要时加载。

如果您打算自己托管，则需要让一台机器充当它的主机，安装某种网络服务器，如 apache 或 IIS（适用于 windows）

一旦你有了它，你应该能够按照相关说明安装你选择的错误跟踪器，如果不聘请顾问或类似的人吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:22:44.443

阅读[管理指南](http://www.mantisbt.org/docs/master-1.2.x/en/administration_guide.html)

我认为这个解释和它一样好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:22:42.143

选择 Mantis 而不是 Bugzilla 是明智之举。

要在本地机器上安装 Mantis，您需要安装 wamp 服务器。

**Wamp服务器安装链接-http** : [//sourceforge.net/projects/wampserver/files/WampServer%202/WampServer%202.2/wampserver2.2e/wampserver2.2e-php5.4.3-httpd2.2.22-mysql5.5.24-32b.exe /下载](http://sourceforge.net/projects/wampserver/files/WampServer%202/WampServer%202.2/wampserver2.2e/wampserver2.2e-php5.4.3-httpd2.2.22-mysql5.5.24-32b.exe/download)

在此之后，打开您的 wamp 文件夹，您将在 Var 中找到一个 www 文件夹。

现在你需要将你的 mantis 文件夹粘贴到这个 www 文件夹中。

**寻找螳螂**- [http://sourceforge.net/projects/mantisbt/files/mantis-stable/](http://sourceforge.net/projects/mantisbt/files/mantis-stable/)

*   下载并解压缩 zip 文件。
*   将提取的文件粘贴到您的 www 文件夹中

**在此之后进行安装**

*   启动你的 wamp 服务器。
*   打开浏览器并在 URL 中输入**localhost/mantis 文件夹的名称/index.php**

如果您还有其他问题，请告诉我。

# ios - 在 MonoTouch 中为 ToolbarItems.UIBarButtonItem 设置 BadgeValue

> ID：12054702
> 
> 赞同：5
> 
> 时间：2012-08-21T12:20:11.823
> 
> 标签：ios, xamarin.ios, uibarbuttonitem, uitabbaritem, badge

我对 MonoTouch 开发还很陌生，但我一直在使用方便的`ToolbarItems`属性`UIViewController`来显示一些工具栏按钮，现在我正在寻找一种方法来设置其中`BadgeValue`一些按钮。

似乎`UIBarButtonItem`该类缺少`BadgeValue`您在其上看到的属性`UITabBarItem`，所以问题是 - 如何在集合中设置 a 的标记`UIBarButtonItem`值`ToolbarItems`？

```
UIBarButtonItem item1 = new UIBarButtonItem() { Title = "test" };
//item1.BadgeValue = "3"; //this doesn't work
ToolbarItems = new UIBarButtonItem[] { item1 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:34:15.890

[`UIBarButtonItem`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html)和[UITabBarItem](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarItem_Class/Reference/Reference.html)都继承自`UIBarItem`. 遗憾`BadgeValue`的是，它仅适用于[UITabBarItem](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIBarItem_Class/Reference/Reference.html#//apple_ref/occ/cl/UIBarItem)，因此您需要自己**重新实现**此功能。

这个问题（和答案）应该对您有所帮助：[如何在 UIBarbutton 项目上添加徽章？](https://stackoverflow.com/questions/5684636/how-to-add-badges-on-uibarbutton-item)

但请注意，它现在可能看起来和真正的徽章一样好。

# magento - 将商店视图代码作为语言代码的多个 Magento 网站

> ID：12054703
> 
> 赞同：4
> 
> 时间：2012-08-21T12:20:16.120
> 
> 标签：magento

我很乐意使用商店视图处理多语言设置，将每个商店视图的代码设置为其各自的语言简码（de、fr、en、...）。然后启用“将商店代码添加到 URLS”，每个人都很高兴，它只是工作。

这次有点复杂。我有一个带有多个网站的 Magento 安装，每个国家都有一个，其中一些有共同的语言代码。

例如，假设我有一个针对加拿大和比利时的网站。第一个将支持法语和英语作为导航语言，后一个将支持法语、荷兰语和德语。

由于两个站点都有共同的导航语言（法语），我不能使用语言简码作为商店视图代码，因为这些代码必须是唯一的。我可以将网站名称作为商店视图代码 site1_fr、site2_fr 的前缀，但由于商店代码要显示在 url 上，这将导致难看且有些多余的 url：site1.ca/site1_fr 而不仅仅是 site1.ca /fr。

是否有某种解决方法来隐藏这些丑陋的商店代码？

也许一些 mod_rewrite 魔术和 Magento 配置更改可以解决问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T09:29:03.717

这是使用相同语言代码制作商店的解决方案，例如 shirts.com/en 和 shoes.com/en - [https://gist.github.com/arosenhagen/5256617](https://gist.github.com/arosenhagen/5256617)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:25:30.277

看看下面的链接： [http ://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/](http://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-09T14:36:39.763

我想支持为不同的语言存储视图使用不同的域或子域的想法。否则，您将拥有相同 url 但内容不同的页面；可能不是您网站 SEO 的最佳选择，或者被迫使用“将商店代码添加到 url”配置，根据我的经验，这似乎从未完全正确。

# iphone - 应用程序在点击 iPhone 中的后退按钮时崩溃

> ID：12054704
> 
> 赞同：0
> 
> 时间：2012-08-21T12:20:17.317
> 
> 标签：iphone, ipad, uiwebview, nsurlconnection, back-button

我是 iPhone 新手，

我目前正在开发一个 iPhone 应用程序，并且我已经实现了从 url 下载文件的能力。我已经创建了 UIWebView，当用户点击下载链接时`webview`，下载将开始，我将该文件保存到文档目录中的指定文件夹中，这一切都在我的`Second View`..

但是在此之后，当我按下后退按钮导航到 my`First view`时，我的应用程序崩溃了......显示`EXC_BAD_ACCESS`

```
-(void)viewWillAppear:(BOOL)animated{
        //Doing some operation and it works fine...
           NSLog(@"viewWillAppear in First View.......");
    }

-(void)viewDidAppear:(BOOL)animated{
    NSLog(@"viewDidAppear in First View.......");
} 
```

`Log`当我点击返回按钮但我的应用程序在 1 秒或半秒后崩溃时，我可以看到上面。

这是我的代码`Second View`，

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data1
{
    [receivedData appendData:data1];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);

    DirPath=[self applicationDocumentsDirectory];

     NSLog(@"DirPath=%@",DirPath);
    [receivedData writeToFile:DirPath atomically:YES];

    UIAlertView* Alert = [[UIAlertView alloc] initWithTitle:@"Download Complete !"
                                                         message:nil delegate:nil 
                                               cancelButtonTitle:@"OK"
                                               otherButtonTitles:nil];
    [Alert show];
    [Alert release];

    // release the connection, and the data object
    [connection release];
    [receivedData release];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error1
{
    [connection release];
    [receivedData release];

    // inform the user
    NSLog(@"Connection failed! Error - %@ %@",
          [error1 localizedDescription],
          [[error1 userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    url = [request URL];

    //CAPTURE USER LINK-CLICK.

            DirPath=[self applicationDocumentsDirectory];

            Durl=[[url absoluteString]copy];

            //Checking for Duplicate .FILE at downloaded path....

            BOOL success =[[NSFileManager defaultManager] fileExistsAtPath:path];
            lastPath=[[url lastPathComponent] copy];

            if (success) //if duplicate file found...
            {
                UIAlertView* Alert = [[UIAlertView alloc] initWithTitle:@"This FILE is already present in Library."
                                                                     message:@"Do you want to Downlaod again ?" delegate:self 
                                                           cancelButtonTitle:nil
                                                           otherButtonTitles:@"Yes",@"No",nil];
                [Alert show];
                [Alert release];

            }
            else  //if duplicate file not found directly start download...
            {
                // Create the request.
                NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:Durl]
                                                          cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                      timeoutInterval:60.0];

                // create the connection with the request and start loading the data
                NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
                if (theConnection) {
                    // Create the NSMutableData to hold the received data.
                    receivedData = [[NSMutableData data] retain];
                } else {
                    NSLog(@"Inform the user that the connection failed."); 
                }

    return YES;   
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{ 
    if (buttonIndex == 0) 
    {        
        // Create the request.
        NSURLRequest *theRequest1=[NSURLRequest requestWithURL:[NSURL URLWithString:Durl]
                                                  cachePolicy:NSURLRequestUseProtocolCachePolicy
                                              timeoutInterval:60.0];

        // create the connection with the request and start loading the data
        NSURLConnection *theConnection1=[[NSURLConnection alloc] initWithRequest:theRequest1 delegate:self];
        if (theConnection1) {
            // Create the NSMutableData to hold the received data.
            receivedData = [[NSMutableData data] retain];
        } else {
            NSLog(@"Inform the user that the connection failed."); 
        }

    }
    else
    {[alertView dismissWithClickedButtonIndex:1 animated:TRUE];}
}

- (void)webView:(UIWebView *)webview didFailLoadWithError:(NSError *)error1 {

    NSLog(@"didFailLoadWithError: %@; stillLoading:%@", error1,(webview.loading?@"NO":@"YES"));
} 
```

我的日志显示：`didFailLoadWithError: Error Domain=WebKitErrorDomain Code=102 "Frame load interrupted" UserInfo=0x6b34910 {NSErrorFailingURLKey=MY_URL, NSErrorFailingURLStringKey=MY_URL, NSLocalizedDescription=Frame load interrupted}; stillLoading:YES`

`DirPath=/Users/krunal/Library/Application Support/iPhone Simulator/5.0/Applications/FCDDDE83-A9B3-4C14-A56C-E8C5FCE7F5C4/Documents/DownloadedFile.epub`

**任何帮助都会得到帮助。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:52:04.397

首先，你在这里试图做的事情，你不应该从一个角度去做。与网络服务通信的代码最好在模型类中，而不是在视图中：

[http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html)

现在，您可能会遇到连接正在调用您在视图中实现的委托方法的情况，但是当您单击后退按钮时，您的视图已经被释放。

此外，您无需维护指向您在 webView:shouldStartLoadWithRequest: 方法中创建的 NSURLConnection 实例的指针。相反，您依赖于调用 connectionDidFinishLoading: 方法来再次释放连接对象。这样，您永远无法确定您是否正在释放它，或者您是否可能过度释放它，如果该方法被多次调用。

在你的视图类中使用一个实例变量来保存一个指向连接对象的指针，这样你就可以在必要时释放它（当你不再使用它时，或者当视图消失时）。确保在删除视图之前取消查询（[连接取消]）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T16:15:22.300

我认为你发布了错误的东西......考虑一下，

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error1 
```

无需释放连接，receivedData

在 dealloc 块，添加此代码

```
- (void) dealloc
  {
      if (theConnection)
      { 
           [theConnection release], theConnection = nil;
      }

      if (receivedData)
      { 
           [receivedData release], receivedData = nil;
      }
  } 
```

如果您使用相同的 webView 创建多个连接，请添加，然后添加

```
if (theConnection)
{ 
      [theConnection release], theConnection = nil;
}

if (receivedData)
{ 
     receivedData release], receivedData = nil;
} 
```

在分配 URLConnection 和 NsMutableData 之前，这是阻止内存泄漏的措施。最好有一个活动微调器，直到事件完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T18:34:35.177

尝试在 secondView Controller 类中添加它

```
- (void)viewWillDisappear
{
    if ([webView isLoading])
        [webView stopLoading];

    [webView setDelegate:nil];
} 
```

或者在 secondView 的后退按钮操作中添加这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T13:05:34.967

做两件事：

1.  无论您在哪里释放连接和数据（receivedData），都将其设置为 nil。
2.  在您的 dealloc 方法中，在释放 webView 之前 [webView stopLoading]。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T17:36:34.217

在添加 WebView 的第一个视图的 dealloc 方法中，设置 webView = nil 的委托。有时这可能是崩溃的原因。

# iphone - UITabBar的自定义

> ID：12054707
> 
> 赞同：1
> 
> 时间：2012-08-21T12:20:27.300
> 
> 标签：iphone, objective-c, ios5, uitabbar

我正在使用`UITabBar`3 个标签栏项目。我想自定义中心选项卡项目。像凸起的标签栏按钮。

我知道如何添加`UITabBarController`和自定义它。但我想自定义`UITabBar`.

我想将自定义按钮添加到标签栏作为中心标签栏项目，如下所示：

![在此处输入图像描述](../Images/fb0d51a1c222c959c1ad7154b064a19b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:12:56.043

检查这个[http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/](http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/)

```
UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(0.0, 0.0, buttonImage.size.width, buttonImage.size.height);
    [button setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [button setBackgroundImage:highlightImage forState:UIControlStateHighlighted];

    CGFloat heightDifference = buttonImage.size.height - self.tabBar.frame.size.height;
    if (heightDifference < 0)
      button.center = self.tabBar.center;
    else
    {
      CGPoint center = self.tabBar.center;
      center.y = center.y - heightDifference/2.0;
      button.center = center;
    }

    [self.view addSubview:button]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:29:39.127

你可以改变

```
 backgroundImage  property
  selectedImageTintColor  property
  selectionIndicatorImage  property
  tintColor  property 
```

一个 uitabbar 的

也许您可以使用背景图像来实现。如果没有，那么您必须编写自己的标签栏。

# zend-framework - ZF 前端和后端路由

> ID：12054724
> 
> 赞同：0
> 
> 时间：2012-08-21T12:21:39.693
> 
> 标签：zend-framework, routing, routes

我想要一些对我来说听起来相当简单但似乎不是的东西。

我的问题是我的应用程序需要 2 条路线：

每当模块是管理员时，应用以下路由：

```
$router->addRoute(
            'backend',
            new Zend_Controller_Router_Route('/:module/:controller/:action/:id/:value', array('module' => 'admin', 'controller' => 'dashboard', 'action' => 'index', 'id' => ':id', 'value' => ':value'))
        ); 
```

效果很好。一个示例 url 可以是：`http://localhost/server/domains/demo/admin/images/album/3`其中 admin 是模块，图像是控制器等等。

我想要的是，当用户访问时，`http://localhost/server/domains/demo`他会被重定向到`default module`,`index controller`和`index action`. 之后的所有`demo/`内容都应被视为单个参数（`/`可能未知）。

我尝试了几件事，从使用`Route_Regex`，尝试`(.*)`或`(\d+)`，我在网上找到的东西。尝试切换值，使它们成为静态，打开/关闭`removeDefaultRouter`，但没有任何效果。下面你可以看到我当前的引导程序。有任何想法吗？

```
$router = $this->frontController->getRouter();
    $router->removeDefaultRoutes();
    $router->addRoute(
        'backend',
        new Zend_Controller_Router_Route('/admin/:controller/:action/:id/:value', array('module' => 'admin', 'controller' => 'dashboard', 'action' => 'index', 'id' => ':id', 'value' => ':value'))
    );

    $router->addRoute(
        'frontend',
        new Zend_Controller_Router_Route('/default/:controller/:action/(.*)', array('module' => 'default', 'controller' => 'index', 'action' => 'index'))
    ); 
```

后端工作正常，但是当`http://localhost/server/domains/demo/`我收到以下错误时：`No route matched the request`

当给出答案时，请解释原因，因为 Zend_Route 对我来说总是有点模糊。提前致谢！

**临时修复**

在我使用的临时修复程序下方。它完全按照我的意愿工作，但我仍然相信 Zend_Route 可以实现同样的效果，而无需检查模块是否为管理员。

```
$router = $this->frontController->getRouter();
    $uri = explode('demo/', $_SERVER['REQUEST_URI']);
    $uri = (isset($uri[1])) ? explode('/', $uri[1]) : $uri[0];
    if($uri[0] == 'admin')
    {
        $route = new Zend_Controller_Router_Route('/:module/:controller/:action/:id/:value', array('module' => 'admin', 'controller' => 'dashboard', 'action' => 'index', 'id' => null, 'value' => null));
        $router->addRoute('router', $route);
    }
    else
    {
        $route = new Zend_Controller_Router_Route('/*', array('module' => 'default', 'controller' => 'index', 'action' => 'index'));
        $router->addRoute('router', $route);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:21:36.263

如果你真的必须使用这条路线，那是值得的。对于正常使用，您可以通过以下方式生成链接

```
Zend_Layout::getMvcInstance()->getView()->Url(array('module' => 'admin'));
Zend_Layout::getMvcInstance()->getView()->Url(array('module' => 'default')); 
```

等等。

如果您对此不满意，请尝试路由链接：

```
 $router = Zend_Controller_Front::getInstance()->getRouter();

    $dispatcher = Zend_Controller_Front::getInstance()->getDispatcher();
    $request = Zend_Controller_Front::getInstance()->getRequest();
    $frontRoute = new Zend_Controller_Router_Route_Module(array(), $dispatcher, $request);
    $backRoute = new Zend_Controller_Router_Route_Module(array('module' => 'admin'), $dispatcher, $request);

    $route = new Zend_Controller_Router_Route('admin');
    $router->addRoute('backend', $route->chain($backRoute));

    $route = new Zend_Controller_Router_Route('default');
    $router->addRoute('frontend', $route->chain($frontRoute)); 
```

说明：
`Zend_Controller_Router_Route_Module`用于定义应用程序的模块路由。通过将其链接到正常路由，就像`new Zend_Controller_Router_Route('admin')`您创建 /admin/[your_module_route] 之类的链接，其中 [your_module_route] 定义了默认值`array('module' => 'admin')`并且也可以采用其他参数。

`new Zend_Controller_Router_Route_Module(array(), $dispatcher, $request);`被定义为标准路由器上的默认路由。

# python - Django：如何更改内联表单集中的字段小部件

> ID：12054726
> 
> 赞同：15
> 
> 时间：2012-08-21T12:21:41.043
> 
> 标签：python, django, forms, inline-formset

我是 Django 的新手，我想我在文档中错过了这个。
问题是在 inline-formset 我没有声明一个表单，只是传递两个模型来构造它。
我想知道如何使用内联表单集更改单个字段的小部件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-05-12T13:14:46.870

[从 Django 1.6 开始](https://docs.djangoproject.com/en/1.6/topics/forms/modelforms/#specifying-widgets-to-use-in-the-form-with-widgets)，您可以使用`widgets`参数 of`modelformset_factory`来自定义特定字段的小部件：

```
AuthorFormSet = modelformset_factory(Author, widgets={
    'name': Textarea(attrs={'cols': 80, 'rows': 20})
}) 
```

因此（使用[）](https://docs.djangoproject.com/en/1.6/topics/forms/modelforms/#specifying-widgets-to-use-in-the-inline-form)的相同参数：`inlineformset_factory``modelformset_factory`

```
AuthorInlineFormSet = inlineformset_factory(Author, Book, fields=['name'], widgets={
    'name': Textarea(attrs={'cols': 80, 'rows': 20})
}) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T12:58:18.810

这是使用 formfield_callback 自定义一个字段的示例：

```
def formfield_callback(field):
    if isinstance(field, models.ChoiceField) and field.name == 'target_field_name':
        return fields.ChoiceField(choices = SAMPLE_CHOICES_LIST, label='Sample Label')
    return field.formfield()

FormSet = inlineformset_factory(ModelA, ModelB, extra=1, formfield_callback = formfield_callback) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T12:25:43.473

您需要在`Meta`类中定义一个表单和更新小部件。查看[覆盖默认字段类型或小部件](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-27T20:31:41.283

您可以子类化表单集并覆盖 add_fields 方法。这对我有用，我正在使用 Django 1.5 :( 。

```
AuthorInlineFormSet = inlineformset_factory(Author, Book)
class AuthorFormSet(AuthorInlineFormSet):
        def add_fields(self, form, index):
            super(ReferenceForm,self).add_fields(form,index)
            form.fields["name"] = forms.CharField(widget=forms.TextInput()) 
```

# database - 自上而下与自下而上的数据库设计：真实世界的示例

> ID：12054727
> 
> 赞同：0
> 
> 时间：2012-08-21T12:21:49.047
> 
> 标签：database, database-design, data-modeling

好的，我可以在互联网上找到数百个关于自上而下的数据库设计与自下而上的数据库设计方法之间的区别的参考资料，但是，我似乎找不到任何现实世界的例子，或者任何关于哪种设计真正更多的信息适合什么情况。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T13:35:40.277

我将此答案基于此[Data Modeling](http://en.wikipedia.org/wiki/Data_modeling) Wikipedia 文章。

在维基百科页面的大约一半处，有一个名为“建模方法”的部分。

自上而下的方法用于创建新数据库。您在逻辑级别对对象进行建模，然后将对象应用于物理数据库设计。例如，关系数据库需要将对象映射到表。

举一个现实世界的例子，工资系统必须有人员对象，以及其他持有工资规则的对象（每周加班超过 40 小时，每天加班超过 10 小时，等等）。将有一个支付周期对象，其中包含支付周期和支付日的日期。这个描述不是一个完整的设计。当您更多地考虑应用程序时，您会想出需要存在的其他对象，以及需要成为现有对象一部分的其他实体。

自下而上的方法用于将数据库从一个物理数据库迁移到另一个。从 Oracle 迁移到 IBM 的 DB2 通常需要一些更改，因为列数据类型不完全兼容。您将根据现有表创建表。有时，您会尝试制作近乎精确的副本，以尽量减少应用程序编码更改。其他时候，您更改表结构，通常是为了进一步规范化或以更合乎逻辑的方式将列组合在一起。是的，应用程序代码必须更改以适应新的数据库模式。但有时，痛苦是值得的。

我见过很多数据库迁移。他们很难在帖子中描述。他们工作起来很痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T20:30:11.107

为了理解这些方法之间的区别，让我们考虑一些本质上是自下而上的工作。在统计分析中，分析师被教导从一小部分人群中抽取样本，然后将结果推断到整体人群中。医生也接受了自下而上方法的培训。医生检查特定症状，然后推断导致症状的一般疾病。

需要自上而下方法的工作示例包括项目管理和工程任务，其中必须先指定总体要求，然后才能理解细节。例如，汽车制造商必须遵循自上而下的方法来满足汽​​车的整体规格。如果一辆汽车的要求是它的成本低于 15,000 美元，每加仑行驶 25 英里，并能坐 5 人。为了满足这些要求，设计人员必须从创建规范文档开始，然后深入研究以满足这些要求。

取自[http://www.dba-oracle.com/t_object_top_down_bottom_up.htm](http://www.dba-oracle.com/t_object_top_down_bottom_up.htm)

# xpages - 将笔记文档中的 jss 文件包含为资源

> ID：12054733
> 
> 赞同：1
> 
> 时间：2012-08-21T12:21:57.360
> 
> 标签：xpages

我正在处理的应用程序需要对文档的 querySaveDocument 执行一些 SSJS。它应该执行的代码需要在没有 Designer 客户端的情况下可维护（不要问我为什么，但这是客户的先决条件）。

.jss 文件作为文件附件存储在中，我正在尝试使用带有 $file url 的 XPage 资源来访问它。我尝试了 http: 和 notes: 副本 id 和 db 路径，但 XPages 引擎似乎无法引用该文件。

如果资源，“src”属性的格式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:16:20.377

查看 Stephan 的这篇文章 [http://www.wissel.net/blog/d6plinks/SHWL-86QKNM](http://www.wissel.net/blog/d6plinks/SHWL-86QKNM)

我认为这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T05:53:47.577

我不确定这是否可行。但是您可以使用您的 SSJS 或 Java 方法加载库/代码，然后使用从外部资源加载的文本执行*eval() * 或值绑定。*然后 SSJS 代码可供解释器使用，并可在事件中执行。

*: *eval()*是邪恶的！你被警告了！

# java - 在某些条件下对字符串进行不同的排序

> ID：12054735
> 
> 赞同：4
> 
> 时间：2012-08-21T12:22:02.003
> 
> 标签：java

我想知道如何仅在某些条件下更改订购方向。在我的情况下，以“BB”开头的字符串应该按另一个方向排序，其他所有内容都应该像往常一样排序。

我的测试班：

```
public class StringTest {

    public static void main(String[] args) {
        SomeClass someClass1= new SomeClass("AA");
        SomeClass someClass2= new SomeClass("AB");
        SomeClass someClass3= new SomeClass("CB4");
        SomeClass someClass4= new SomeClass("BB7");
        SomeClass someClass5= new SomeClass("BB9");
        SomeClass someClass6= new SomeClass("BB3");
        SomeClass someClass7= new SomeClass("CB3");

        List<SomeClass> list = new ArrayList<SomeClass>();
        list.add(someClass1);
        list.add(someClass2);
        list.add(someClass3);
        list.add(someClass4);
        list.add(someClass5);
        list.add(someClass6);
        list.add(someClass7);

        Collections.sort(list);

        for (SomeClass someClass : list) {
            System.out.println(someClass.getSomeField());
        }
    }

} 
```

我的比较器：

```
public class SomeClass implements Comparable<SomeClass>
{
  private String someField;

  public int compareTo(final SomeClass o)
  {
    int res = 0;

    if (someField.startsWith("BB"))
    {
      res = o.someField.compareTo(someField);
    }
    else
    {
      res = someField.compareTo(o.someField);
    }
    return res;
  }

} 
```

我想要的输出：
AA
AB
BB9
BB7
BB3
CB3
CB4

到目前为止的实际结果：
AA AB
CB3
BB9
BB7
BB3
CB4

强尼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T12:24:01.667

您需要确保 Comparator 仅在两个元素都以“BB”开头时应用不同的排序。现在，即使您将“BB9”与“CB3”进行比较，您的 Comparator 也会应用不同的排序，因此后者在 BB9 之前进行排序。

```
public class SomeClass implements Comparable<SomeClass>
{
   private String someField;

   public int compareTo(final SomeClass o)
   {
     int res = 0;

     if (someField.startsWith("BB") && o.someField.startsWith("BB"))
     {
       res = o.someField.compareTo(someField);
     }
     else
     {
       res = someField.compareTo(o.someField);
     }
     return res;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:26:45.403

```
if(someField.startsWith("BB") && o.someField.startsWith("BB"))) 
```

Try this change in your `compareTo` method which may solve your problem.

# jquery - 单击时更改 DIV 样式

> ID：12054737
> 
> 赞同：0
> 
> 时间：2012-08-21T12:22:17.173
> 
> 标签：jquery, css

两个问题...

我有一组 DIVS，其中包含一些代码，旨在更改单击的 DIV 的颜色并将其他的重置为默认值。[这很好](http://jsfiddle.net/AndyMP/HNXjQ/)用……但背景颜色是在 javascript 代码中指定的。当我尝试使用 CSS 类时，[事情并没有按应有的方式工作](http://jsfiddle.net/AndyMP/HNXjQ/1/)。我怎样才能让第二个版本工作，以便它使用 css 类来指定颜色而不是 javascript。

我的第二个问题与

```
.parent() 
```

代码的一部分以及在这种情况下实际做了什么？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:26:03.500

试试这个：

```
$('#container').on('click', 'div.button', function(){
    $(this).addClass('on').siblings('.button').removeClass('on');
});
​ 
```

[更新了小提琴。](http://jsfiddle.net/HNXjQ/2/)

几点：

1) 任何时候您将同一个事件回调绑定到多个事件时，最好委托该事件。所以我将它委托给父容器，而不是将事件重复附加到每个元素。如果这对您来说是新的，请查看事件委托。

2）在您的原始代码中，`parent()`调用是一种上树然后返回的方法，基本上影响兄弟姐妹。我已将其更改为简单地使用`siblings()`。

3）我没有明确的“关闭”状态，而是将关闭状态设为默认值。然后，我们只需打开/关闭 on 状态 ( `.on`)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T12:25:47.220

试试这个：

[http://jsfiddle.net/HNXjQ/4/](http://jsfiddle.net/HNXjQ/4/)

HTML：

```
<div id="container">
    <div class="button on">1</div>
    <div class="button off">1</div>
    <div class="button off">1</div>
    <div class="button off">1</div>
</div> 
```

CSS：

```
#container {
    position: absolute;
    top: 0;
    left: 0;
}
.button {
    position: relative;
    width: 100px;
    height: 100px;
    margin: 10px;
    border: 1px solid #333;
    background: green;
}
.on {
    background: red;
} 
```

JS：

```
$('.button').click(function(){
    $(this).siblings().removeClass('on');
    $(this).addClass('on');
}); 
```

1.  您不需要“关闭”类来获得这种效果。
2.  此外，在这种情况下，最好使用“.siblings()”来查找它的兄弟姐妹，而不是“.parent().find()”。（它基本上更快/更精确）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T12:52:27.440

.parent 选择您正在引用的 jQuery 对象的父元素。在这种情况下，它将是“#container”。

因此，“$(this).parent().find('.button')” 将返回“#container”元素内的所有“.button”元素，即所有按钮。

因此，您的 JavaScript 不会像您预期的那样工作。尝试以下操作：

```
$('.button').click(function(e){
    $('.on').addClass('off'); // add '.off' to the one element that is '.on' 
    $('.on').removeClass('on'); // remove '.on' from this same element
    $(e.target).addClass('on'); // add '.on' to the element clicked
    $(e.target).removeClass('off'); //remove '.off' from that element clicked
    currentSelected = this;
}); 
```

在这里，我将“e”作为参数添加到“click”函数中。然后我使用“e.target”来获取被点击的元素。我还确保 n 元素不会同时连接“.on”和“.off”，确保没有样式相互覆盖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T12:24:50.413

您可以将您的 javascript 代码更改为：

```
$('.button').click(function(){
    $(this).parent().find('.button').addClass('off');
    $(this).removeClass('off').addClass('on');
});
​ 
```

这又快又脏，但它有效

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T12:25:24.493

```
$('.button').click(function(){
    $(this).parent().find('.button.on').removeClass('on').addClass('off');
    $(this).removeClass('off').addClass('on');
});
​ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T12:26:18.887

您可以设置一个新类并使用 jQuery`.toggleClass`在它们之间切换。

[http://jsfiddle.net/Kyle_Sevenoaks/HNXjQ/5/](http://jsfiddle.net/Kyle_Sevenoaks/HNXjQ/5/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-21T12:29:05.483

上班，没时间解释，看看这个；

[http://jsfiddle.net/HNXjQ/12/](http://jsfiddle.net/HNXjQ/12/)

如果你愿意，稍后会解释！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-21T12:45:01.750

或者很简单：

[http://jsfiddle.net/HNXjQ/14/](http://jsfiddle.net/HNXjQ/14/)

```
$('.button').click(function(){
    $(this).addClass('on').siblings().removeClass('on');
}); 
```

​</p>

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-21T12:27:13.447

由于 CSS 的特殊性，off 类被覆盖，所以就像其他人说的那样，您需要先删除 on 类。另外，你的意思是在你的css中使用`background`而不是和类？`background-color``off``on`

# wpf - 将 RTF 转换为 FlowDocument 的最快方法

> ID：12054744
> 
> 赞同：3
> 
> 时间：2012-08-21T12:22:36.533
> 
> 标签：wpf, flowdocument

将 RTF 转换为 FlowDocument 的最快方法是什么？我将 RTF 存储为纯字符串，然后重新加载它，我使用以下方法，

```
FlowDocument document = new FlowDocument();
document.SetValue(FlowDocument.TextAlignmentProperty, TextAlignment.Left);

TextRange content = new TextRange(document.ContentStart, document.ContentEnd);

if (content.CanLoad(DataFormats.Rtf) && string.IsNullOrEmpty(rtf) == false)
{
     // If so then load it with RTF
     byte[] valueArray = Encoding.ASCII.GetBytes(rtf);
     using (MemoryStream stream = new MemoryStream(valueArray))
     {
         content.Load(stream, DataFormats.Rtf);
     }
} 
```

但是这种方法很慢。我需要加载许多 RTF（大约 1000 个）。加快这个过程的诀窍是什么？有没有其他方法可以加载 Flowdocument？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:56:26.843

你真的需要定义你真正需要的东西。TextBlock 一点也不弱。它提供了一些东西;)。

*   颜色（背景/前景+您甚至可以为 TextBlock 的特定部分着色）
*   对齐方式（您可以根据需要对齐文本块，甚至可以对齐其中的一部分？！不确定最后一个。
*   它有TextDecorations，这意味着它支持粗体/斜体/下划线/删除线等。
*   字体（是的，它支持自定义字体和你想要的任何字体）

但足够公平。我认为您应该存储 FlowDocument XAML 而不是实际的 RTF。这样就不会发生转换，并且应该快几倍。（请参阅 DataFormats.xaml）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:31:51.467

你好 Vibhore 当需要有限的文本支持时应该使用 TextBlock 元素，当需要最少的文本支持时可以使用 Label。

FlowDocument 元素是支持内容丰富表示的可重排文档的容器，因此比使用 TextBlock 或 Label 控件具有更大的性能影响。

# amazon-web-services - Railo 会话存储在 AWS 上使用 DynamoDB

> ID：12054752
> 
> 赞同：2
> 
> 时间：2012-08-21T12:22:52.337
> 
> 标签：amazon-web-services, railo, amazon-elastic-beanstalk

我们在 AWS Elastic Beanstalk 上托管 Tomcat / Railo，似乎数据库会话存储是处理由于负载平衡而可能在多个服务器之间传递请求的最佳选择。

Amazon 有一些[专门的模块可以在 PHP 中执行此](http://aws.typepad.com/aws/2012/04/scalable-session-handling-in-php-using-amazon-dynamodb.html)操作，我想知道 Railo 是否存在类似的模块？

顺便说一句，我知道启用“粘性会话”是另一种选择，但在我看来，如果机器脱机（即由负载平衡器旋转），会话将会丢失，这对用户来说会很烦人.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:13:59.457

我不知道 DynamoDB 缓存提供程序，但是如果您启用它进行存储，然后在 Application.cfc 中指定它， Railo 可以将会话存储在它当前支持的任何缓存或数据源中（请参阅[文档）](http://wiki.getrailo.org/wiki/3-3%3aSession_storage)

在 railo web admin 创建一个用于存储会话的数据源，在页面的一半处勾选“存储：允许将此数据源用作客户端/会话存储”。

在您 Application.cfc 中添加以下内容

```
this.sessionStorage = "my_sessions_dsn";
this.sessionCluster = true; 
```

# java - 按数值递增字母字符

> ID：12054756
> 
> 赞同：0
> 
> 时间：2012-08-21T12:23:01.540
> 
> 标签：java

我需要一个 java 方法，它接受一个整数，然后递增它并给你相应的字母字符。像这样的东西：

```
public String getAlpha(Integer number) {
   ...
} 
```

因此，如果我传递的`number`值 equal`0`那么它应该递增并返回 letter `a`。如果我通过它，`25`那么它应该返回这封信`z`。如果我将数字传递给它，`26`那么它应该返回`aa`。如果我将数字传递给它，`27`那么它应该返回`ab`等等。

alpha 几乎模拟了 excel 工作表列的表示方式，我需要做的就是通过传递一个数字从方法中获取 alpha 值。除了返回的字符串`getAlpha`必须是最大`15`字符和最小字符外，没有设置限制`1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:56:43.590

我相信这会做你想要的，我不知道它是否可以更有效地完成：

```
static void printCode(int code) {
  final StringBuilder buffer = new StringBuilder();
  do {
    final int digit = (code - 1) % 26;
    buffer.insert(0, (char)(digit + 'a'));
    code = (code - digit - 1) / 26;
  } while (code > 0);
  System.out.println(buffer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:32:13.370

这是在 Java 中从 0 到 25 之间的数字生成 a - z 的方式：

```
protected static String getLetter(int code) {
    if (code >= 0 && code <= 25)
        return "" + (char) (code  + 'a');
    else
        throw new IllegalArgumentException("char code is out of bound: " + code);
} 
```

其余的只是模数学。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T09:45:15.473

它与 Excel 列命名相同：

```
public class Calculator {

    private static String[] letters = new String[]{
        "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"
    };

    public static void main(String[] args) {
        System.out.println(calculate(731));
    }

    public static String calculate(int row) {
        return calculateRecursive(row - 1, "");
    }

    private static String calculateRecursive(int row, String res) {
        String val = letters[row % letters.length] + res;
        int i = row / letters.length;
        if(row >= letters.length) {
            return calculateRecursive(i - 1, val);
        }
        return val;

    }
} 
```

# javascript - 发送带有 action="mailto:" 的表单时，正文的大小是否存在某种限制？

> ID：12054769
> 
> 赞同：1
> 
> 时间：2012-08-21T12:24:06.840
> 
> 标签：javascript, post, browser, mailto

发送带有 action="mailto:" 的表单时，主体的大小是否存在某种限制？无法发送大于特定长度的正文，在我的情况下为 2107 字符。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:29:03.347

实际上，根本没有长度。使用`mailto:`操作需要电子邮件客户端和 Web 浏览器的特定组合，这些组合没有足够的市场饱和度，无法`mailto:`在 WWW 上使用带有表单的 URI。

改用服务器端程序（例如用 Perl/PSGI 或 PHP/mod_php 编写）。

另请参阅：[神话般的 Mailto：](http://isolani.co.uk/articles/mailto.html)

# python - Python：保存 csv 文件

> ID：12054772
> 
> 赞同：0
> 
> 时间：2012-08-21T12:24:12.633
> 
> 标签：python, csv

我是 python 新手（仅学习 2 周），有些东西我真的无法尝试（我已经用谷歌搜索了一个小时，但找不到任何东西）。

`file1`并且`file2`都是 CSV 文件。

我有一个看起来像这样的函数：

```
def save(file1, file2): 
```

它是为了`file2`具有与 相同的内容`file1`。例如，当我这样做时：

```
save(file1, file2) 
```

`file2`应该有相同的内容`file1`。

在此先感谢并抱歉空代码。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:25:36.700

Python 有一个标准模块[`shutil`](https://docs.python.org/2/library/shutil.html)，对这类事情很有用。

如果您需要自己编写代码，只需打开两个文件（输入和输出）。循环文件对象，从输入文件中读取行并将它们写入输出文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:39:06.797

如果你只是想复制一个文件，你可以这样做：

```
def save(file1, file2):
    with open(file1, 'rb') as infile:
        with open(file2, 'wb') as outfile:
            outfile.write(infile.read()) 
```

这会将带有名称的文件复制到带有名称`file1`的文件中`file2`。这些文件的内容是什么并不重要。

# java - Java PrintWriter 打印字符不显示最后一个字符

> ID：12054778
> 
> 赞同：0
> 
> 时间：2012-08-21T12:24:36.370
> 
> 标签：java, servlets

我真的不明白问题出在哪里。我想将字符打印到文本文件中，并且我想使用 printWriter 来做同样的事情。如果文件有“；”，我想用新行替换它，这就是我正在做的事情，

```
public static void downloadFile_txt(String sourceFilePathName, String contentType, String destFileName, HttpServletResponse response) throws IOException, ServletException
 {
     File file = new File(sourceFilePathName);
     //FileInputStream fileIn = new FileInputStream(file);
     FileReader fileIn = new FileReader(file); 
     long fileLen = file.length();
     response.setContentType(contentType);
     response.setContentLength((int)fileLen);

     response.setHeader("Content-Disposition", String.valueOf((new  StringBuffer("attachment;")).append("filename=").append(destFileName)));

     PrintWriter pw =  response.getWriter();

     // Loop to read and write bytes.
     int c=-1;      
     while ((c = fileIn.read()) != -1)
     {

         if(c!=59)
         {
              pw.print((char)c);
         }
         else
         {
              pw.println();
         }
     }
     pw.flush();
     pw=null;        
     fileIn.close();        
} 
```

但是我的文件正在打印除最后一个字符之外的所有内容。例如输入=

```
:00004000,FFAD,2 Byte Ch;
:0000FFBD,FFBE,2 Byte Ch;
:0000FFBF,FFFF,2 Byte Ch; 
```

我得到的输出

```
:00004000,FFAD,2 Byte Ch
:0000FFBD,FFBE,2 Byte Ch
:0000FFBF,FFFF,2 Byte C 
```

最后一个“h”没有被打印出来。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:28:34.767

A`pw.flush();`可能会帮助你。

```
public class FlushPrintWriter {

    public static void main(String[] args) throws IOException  {
        FileReader fileIn = new FileReader("in.txt");
        FileWriter out = new FileWriter("out.txt");
        PrintWriter pw = new PrintWriter(out);
        int c;        
        while ((c = fileIn.read()) != -1) {
            if(c!=59) {
               pw.print((char)c);
            } else {
               pw.println();
            }
        }
        pw.flush();
    }
} 
```

输出

```
:00004000,FFAD,2 字节通道

:0000FFBD,FFBE,2 字节通道

:0000FFBF,FFFF,2 字节通道

```

正如预期的那样。

（不要这样处理你`IOException`的 s - 并关闭你的读者和作者 - 这只是为了演示！）

* * *

**编辑：**现在您的代码甚至无法编译（两个变量称为`fileIn`？）！

即使运行您现在提到的 servlet 代码，我也无法重现您的问题，并且输出与您预期的一样。所以这是我放弃了。我开始怀疑最终`;`文件不在您的源文件中，或者您的应用程序正在执行更多处理而您没有向我们展示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:30:14.690

试试flush() 或close() 你的打印作者。

可能最好逐行阅读，使用 String.replace() 替换字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:34:30.370

运行while循环直到文件大小

```
 int fileSize=file.length();
 while(fileSize>0)
 {
    //do your task of reading charcter and printing it or whatever you want
    fileSize--;
 } 
```

# ios - Unity iOS 游戏因 NSInternalInconsistencyException 而崩溃

> ID：12054781
> 
> 赞同：2
> 
> 时间：2012-08-21T12:24:42.470
> 
> 标签：ios, unity3d, game-center

我在我的游戏中使用 Prime31 的 GameCenter Turn Based 插件来处理在线比赛。
当我在显示 Game Center 的媒人时（使用插件 => 调用`GameCenterTurnBasedBinding.findMatch(2,2,false);`）收到来自 Game Center 的“游戏邀请”通知时出现问题。

应用程序崩溃，Xcode 中显示以下输出：

```
2012-08-20 08:39:27.050 Cabrais[1808:707] *** Assertion failure in -[NSIndexPath row], /SourceCache/UIKit/UIKit-1914.85/UITableViewSupport.m:2606
2012-08-20 08:39:27.052 Cabrais[1808:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid index path for use with UITableView. Index paths passed to table view must contain exactly two indices specifying the section and row. Please use the category on NSIndexPath in UITableView.h if possible.'
*** First throw call stack:
(0x355ec88f 0x33210259 0x355ec789 0x349e03a3 0x32d4d673 0x35dba49d 0x35dd90e5 0x35dd9379 0x32d4cefb 0x32d4bfd9 0x32d4b763 0x35da7657 0x32ceff37 0x3554b1fb 0x32716aa5 0x327166bd 0x327165c9 0x35dd8179 0x35da936b 0x35dbce65 0x35dbb6b3 0x33979c59 0x33984e91 0x355bf2ad 0x355424a5 0x3554236d 0x332dd439 0x32d1acd5 0x6954 0x3388)
terminate called throwing an exception(lldb) 
```

我已经尝试通过我的应用程序和 GameCenter 的 Ipad/Iphone 设置以及通过删除所有通知相关代码的代码来禁用通知，但这根本没有任何效果。

我通过调试知道我的函数中附加到 GameCenterTurnBasedManager.handleTurnEventEvent 的代码在崩溃发生之前没有被调用，也没有注册到 EtceteraManager.remoteNotificationReceived 的代码。（否则，这两个功能都可以正常工作。）

我问过 Prime31，他们告诉我例外是表格数据源处理不当，并向 Apple 提交错误报告。

有没有人在使用 Unity 时遇到过类似的崩溃/错误？有什么方法可以尝试在通知到达之前捕获通知并删除媒人或能够处理统一的错误？

任何见解/帮助/意见将不胜感激，

谢谢。

# javascript - 刷新页面而不会丢失 cakephp 中的复选框信息

> ID：12054785
> 
> 赞同：0
> 
> 时间：2012-08-21T12:24:51.940
> 
> 标签：javascript, jquery, cakephp, checkbox

我正在用 CakePhp 开发一个网站。我有一个视图可以通过表单中的复选框选择列表中的某些项目，并且每个项目都有一个“更多信息”链接，该链接使用该项目的其他信息刷新页面。

问题是，如果我单击任何“更多信息”链接，我显然会丢失有关之前选择了哪些复选框的数据。我唯一想到的是每次更改复选框时都更新 $this->Session ，但是当发生这种情况时，我需要在控制器中触发一个函数。

还有其他解决方案吗？

我一直在到处搜索，发现了一些关于 Javascript 和 JQuery 的东西，但我也不知道如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:35:38.790

如果您不介意发送所有文本，这很容易：

```
<div class='article'>
    <div>short text<a href="#" class="morebtn">more info</a></div>
    <div class="more hidden">long text</div>
</div> 
```

jQuery部分

```
$(".article").on('click', '.morebtn', function(){
  $(this).parents('.article').find('.more').removeClass('hidden');
}); 
```

css

```
.hidden { display: none } 
```

这是一个[小提琴](http://jsfiddle.net/Z8Ggw/)

更好的解决方案是使用 ajax 请求。实施起来也不难。

这是一个显示非常基本的请求的[小提琴。](http://jsfiddle.net/Z8Ggw/1/)如果您需要执行更高级的请求，您也可以使用完整的[$ajax请求。](http://api.jquery.com/jQuery.ajax/)

*请注意，由于 url 无效，ajax 请求的示例不起作用。url 需要来自与当前页面相同的来源（相同的协议、域和端口）才能使其正常工作。有解决方法，但这是一个不同的问题*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:42:27.600

阅读 AJAX，这是一项非常酷的技术，它可以让您轻松完成所需的工作。大纲：

*   单击该按钮时，浏览器会向服务器发送 AJAX 请求，以使文本显示在页面的某处。
*   当浏览器收到响应（来自服务器的一些 HTML 片段）时，会调用一个函数，如下所示：

    函数（数据）{$（'#description'）.html（数据）；}

执行 AJAX 请求需要 5-10 行代码（主要是配置 + 构建 URL）。

主要工作是在服务器端，您需要编写一个提供文本的控制器。

由于页面从不重新加载，因此无需保留表单值。

要学习 AJAX，请[从本教程开始](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)。

# c# - 将 mvc3 模型对象映射到 select2 插件数据

> ID：12054796
> 
> 赞同：0
> 
> 时间：2012-08-21T12:25:33.647
> 
> 标签：c#, asp.net-mvc-3, razor

我正在尝试将 Model.property 映射到 Select2 插件的数据，但没有成功，在控制台中不断收到“TypeError：invalid 'in'operand result”。

```
public class Items{
    public int id;
    public string text;
};
public class Model{
    ...
    public Items[] arr { get; set; }
    ...
} 
```

模型被传递给 Razor 局部视图，我的 jsScript 在那里发挥了一些作用

```
<script>
    $(document).ready(function(){
        $('#sel').select2({
            data: '@Model.arr',
            ...
    });
</script> 
```

一切看起来都很好，直到我在选择框内单击以查看其中的项目。然后我得到了我之前提到的控制台错误。

**解决我的问题：**

```
// Changed the property of Model class to string.
public class Model{
    ...
    public string arr { get; set; }
    ...
} 
```

1.  在控制器-> 创建 IList 对象并用项目填充它。
2.  在控制器-> 序列化列表对象并将其放入模型类的“arr”属性中。
3.  在视图中 select2({ ... data: { results: eval('(@Html.Raw(Model.arr))') } ... })

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:30:29.010

尝试将您的列表声明为 IList，我遇到了类似的问题并且它有效：

```
public IList<Items> arr { get; set; } 
```

而且您有一个明显的错误，因为您没有指定要在框中显示的 id 和文本，例如：

```
.select2({
data:[
{id:0,text:'item1'},
{id:1,text:'item2'},
{id:2,text:'item3'},
{id:3,text:'item4'},
{id:4,text:'item5'}
]}); 
```

因此，您应该能够解决：

```
<script>
    $(document).ready(function(){
        $('#sel').select2({
             data:{ results: '@Model.arr', text: 'text' }, // 'text' is the name of you model property with your text
             formatSelection: format,
             formatResult: format
    });
function format(item) { return item.text; };
</script> 
```

如果它不起作用，我建议您通过像[官方文档一样声明一个测试数组来开始调试](http://ivaynberg.github.com/select2/#data_array)

```
var data=[{id:0,tag:'enhancement'},{id:1,tag:'bug'},{id:2,tag:'duplicate'},{id:3,tag:'invalid'},{id:4,tag:'wontfix'}];
function format(item) { return item.tag; };

$("#e10_2").select2({
data:{ results: data, text: 'tag' },
formatSelection: format,
formatResult: format
}); 
```

如果此代码不起作用，您将知道错误来自 Jquery 而不是您的代码

# c# - 通过 COM (P/invoke) 在 C# 中使用 FORTRAN DLL

> ID：12054806
> 
> 赞同：1
> 
> 时间：2012-08-21T12:25:59.320
> 
> 标签：c#, com, pinvoke, fortran

我目前正在尝试使用第三方提供的 FORTRAN DLL。现在，它已经被其他供应商使用过（不确定他们是否使用 C# 来使用它），但是当我尝试使用它时，我遇到了一些参考错误。

我基本上是想让它在一个小型测试应用程序中工作。

这是我用来导入的 C# 代码（实际上是基本的 COM）：

```
[DllImport("foo.dll")]
public static extern void foo(ref int IS, ref double[] BETA, ref int K, out double TH, out double SETH, out int IER);

static void Main(string[] args)
{
    double[] betas = new double[3];
    betas[0] = 25.6;
    betas[1] = 30.8;
    betas[2] = 35.8;

    int score = 5;
    int numberOfItems = 3;
    double latentVariable;
    double standardErrorOfEstimate;
    int errorCode;

    foo(ref score, ref betas, ref numberOfItems, out latentVariable, out standardErrorOfEstimate, out errorCode);

        Console.ReadLine();
} 
```

注意：DLL 方法签名与我所拥有的匹配。

尝试运行应用程序时，出现以下异常：

> 无法加载 DLL 'foo.dll'：应用程序无法启动，因为它的并排配置不正确。请查看应用程序事件日志或使用命令行 sxstrace.exe 工具了解更多详细信息。（来自 HRESULT 的异常：0x800736B1）

查看事件日志，错误中显示了以下详细信息：

> “C:\dllpath\foo.dll”的激活上下文生成失败。相关程序集 Microsoft.VC90.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="9.0.21022.8" 找不到。请使用 sxstrace.exe 进行详细诊断。

此外，运行 sxstrace，显示相同的信息和错误：

> 错误：无法解析引用 Microsoft.VC90.DebugCRT、processorArchitecture="x86"、publicKeyToken="1fc8b3b9a1e18e3b"、type="win32"、version="9.0.21022.8"。错误：激活上下文生成失败。结束激活上下文生成。

现在，在做了一些谷歌搜索和环顾这里之后，有些人建议安装 C++ 的可再发行包。我在 2008 年和 2010 年都在 x86 和 x64 平台上做到了这一点，但仍然没有乐趣。

有人有什么想法吗？我正在使用 Visual Studio 2010 和 Windows 7（如果有帮助？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:57:07.250

问题是**DebugCRT**。您已经获得了该 DLL 的调试版本，并且它依赖于 CRT 的调试版本。这需要适当版本的 Visual Studio，这是在您的计算机上获取 CRT 调试版本的唯一方法。即 Visual Studio 2008，由 9.0 版本号表示。如果您还没有此 DLL 的源代码，则无法使用调试版本。您也无法在客户的机器上部署并运行此 DLL。

通过联系所有者并要求发布版本来取得成功，以便可再分发的包可以工作。

# grails - 使用 grails 从 XML 读取并将值存储在数据库中

> ID：12054808
> 
> 赞同：1
> 
> 时间：2012-08-21T12:26:02.207
> 
> 标签：grails

> **可能重复：**
> [将 XML 导入 Grails 域类](https://stackoverflow.com/questions/1519395/import-xml-into-a-grails-domain-class)

说我有像下面这样的 xml 文件，现在我想使用 grails 将这些名字、部门名和 empid 插入到数据库中，任何人都可以提出一个想法。

`<employees>`
`<employee>`
`<firstname>Marios</firstname>`
`<deptname>ITdepartment</deptname>`
`<empid>123</empid>`
`</employee>`
`<employee>`
`<firstname>Ben</firstname>`
`<deptname>Management</deptname>`
`<empid>124</empid>`
`</employee>`
`</employees>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T04:35:03.660

谢谢大家，我得到了答案，如果需要更改，我会在这里为其他人发布信息

`def Employee = new XmlParser().parse("Your Xml file path")`
`def set1 = sql.dataSet("Your field name in Xml")`
`Employee.employee.each {`
`def firstname = it.firstname.text()`
`def deptname = it.deptname.text()`
`def empid = it.empid.text()`
`set1.add(first_name:firstname,dept_name:deptname,emp_id:empid)`
}

# layout - ExtJs 布局 + 窗口

> ID：12054813
> 
> 赞同：0
> 
> 时间：2012-08-21T12:26:22.163
> 
> 标签：layout, extjs, window, hbox

动态添加组件时，萤火虫中显示“this.container is null”。

我有一个窗口，里面有一些组合框，比如combo1、combo2、combo3 和一个标签。根据 combo3 的选择值，“标签”字段被删除并替换为组合框或文本字段。我这样做是我的使用

```
form.items.removeAt(4);
form.items.insert(4, newItem); #here newItem can be combox/textfield
form.doLayout(); 
```

表单位于面板内。

执行上述行时。显示“this.container is null”并且组件无法在适当的位置插入/添加。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:13:30.490

您不应该修改基础项目集合。在容器上使用删除/插入方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:08:17.557

尝试逐行注释这些行以查看哪一行会产生错误，例如

```
form.items.removeAt(4);
//form.items.insert(4, newItem); #here newItem can be combox/textfield
//form.doLayout();

form.items.removeAt(4);
form.items.insert(4, newItem); #here newItem can be combox/textfield
//form.doLayout();

form.items.removeAt(4);
form.items.insert(4, newItem); #here newItem can be combox/textfield
form.doLayout(); 
```

您的问题可能是因为在您尝试插入时尚未准备好插入/替换的对象。给我们您的 newItem 初始化代码。

**更新**

`card` [或者，您可以使用layout](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.layout.CardLayout)将更改的组件（标签、组合框、文本字段）包装在面板中。在更改combo3 时，只需`card`在该面板中选择exact。

# php - 在另一个选择的基础上更新一个选择

> ID：12054814
> 
> 赞同：0
> 
> 时间：2012-08-21T12:26:23.053
> 
> 标签：php, ajax, jquery, symfony

> **可能重复：**
> [如何在第一个下拉列表更改后从数据库加载第二个下拉列表](https://stackoverflow.com/questions/10566114/how-to-load-second-dropdown-list-from-database-after-first-dropdown-list-is-chan)

嘿，我有一个表格，里面有两个选择下拉菜单。

第一个选择填充了用户的投资组合，第二个选择需要填充投资组合组。我得到登录用户的所有投资组合并用这些投资组合填充第一个选择现在我想在第一个选择的基础上用组填充第二个选择，例如，如果用户选择投资组合_1，投资组合_1 中的所有组应该在第二个选择框中加载。

投资组合的第一个选择是：

```
<select id="portfolios" name="portfolio" style="width: 200px; height:25px;">
    <option selected="selected" value="default">Select Portfolio</option>
    {% for portfolio in portfolios %}
        <option value={{ portfolio.id }}>{{ portfolio.portfolioName }}</option>
    {% endfor %}
</select> 
```

我的理解是我需要在该 ajax 中调用第一个选择的 ajax 函数 onchange 我需要发送选定的投资组合 id 并找到具有该 id 的所有组，然后返回所有这些组并只更新第二个选择框团体，

我不知道如何用我将得到的组填充第二个选择

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:40:48.397

```
<select id="portfolios" name="portfolio" style="width: 200px; height:25px;" onchange="getgropus(this.value)">
<option selected="selected" value="default">Select Portfolio</option>
{% for portfolio in portfolios %}
    <option value={{ portfolio.id }}>{{ portfolio.portfolioName }}</option>
{% endfor %}
</select>
<select id="secondselectBox" name="secondselectBox"  ></select>

call the ajax function on the onchange event of your 1st selectbox
// here is JS code

<script type="text/javascript">
function getgropus(id){
        $.ajax({
            type: 'post',
            url: "your php file path to get groups ",
            data: "&id="+id,
            complete: function(data) {
                $('#secondselectBox').html(data.responseText)
            }
        });
}

</script>

on your php file make options for selectbox of group portfolio and adjust according to your requirnments

<option value="default">Portfolio groups</option>
 ....... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:40:52.907

好吧，我只会以 JSON 格式返回它们，然后将它们注入 DOM：

```
$('#portfolios').on('change', function(){
   $.getJSON('url/for/groups', function(pgroups) {
       var html = '';

       $.each(pgroups, function(value, name) {
           html += '<option value="'+value+'">'+name+'</option>';
       });

       $('#portfolio-groups').html(html);
   });
}); 
```

# r - R在一列中查找重复项并在第二列中折叠

> ID：12054816
> 
> 赞同：2
> 
> 时间：2012-08-21T12:26:29.663
> 
> 标签：r, duplicates, aggregate

我有一个数据框，其中有两列联系字符串。在一列（名为`probes`）中，我有重复的案例（即具有相同字符串的多个案例）。对于探测中的每个案例，我想找到包含相同字符串的所有案例，然后将第二列（名为`genes`）中所有相应案例的值合并为一个案例。例如，如果我有这个结构：

```
 probes  genes
1   cg00050873  TSPY4
2   cg00061679  DAZ1
3   cg00061679  DAZ4
4   cg00061679  DAZ4 
```

我想把它改成这样的结构：

```
 probes  genes
1   cg00050873  TSPY4
2   cg00061679  DAZ1 DAZ4 DAZ4 
```

显然对于使用 which 的单个探针执行此操作没有问题，然后粘贴和折叠

```
ind<-which(olap$probes=="cg00061679")
genename<-(olap[ind,2])
genecomb<-paste(genename[1:length(genename)], collapse=" ") 
```

但我不确定如何在整个数据帧中提取探针列中重复项的索引。有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:33:25.513

您可以`tapply`在基础 R中使用

```
data.frame(probes=unique(olap$probes), 
           genes=tapply(olap$genes, olap$probes, paste, collapse=" ")) 
```

或使用 plyr：

```
library(plyr)
ddply(olap, "probes", summarize, genes = paste(genes, collapse=" ")) 
```

**更新**

在第一个版本中这样做可能更安全：

```
tmp <- tapply(olap$genes, olap$probes, paste, collapse=" ")
data.frame(probes=names(tmp), genes=tmp) 
```

以防万一 unique 以不同的顺序给探针`tapply`。就我个人而言，我会一直使用`ddply`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T13:09:00.140

Base R`aggregate()`应该可以正常工作：

```
aggregate(genes ~ probes, data = olap, as.vector)
#       probes            genes
# 1 cg00050873            TSPY4
# 2 cg00061679 DAZ1, DAZ4, DAZ4 
```

`as.vector`如果我需要对数据做任何进一步的工作，我更喜欢（这会将`genes`列存储为，但如果您更喜欢它是字符串`list`，也可以尝试。`aggregate(genes ~ probes, data=test, paste, collapse=" ")`

# ios - iOS wifi扫描，信号强度

> ID：12054818
> 
> 赞同：9
> 
> 时间：2012-08-21T12:26:38.197
> 
> 标签：ios, ios5, wifi

据我所知，不可能扫描范围内的热点并读取它们的 bssid 和信号强度。这在 iOS 4 上可以通过使用私有 API 而在没有越狱的 iOS 5 上不再可能。即使有可能，该应用程序也会在 App Store 上被拒绝。是对的吗？

一家拥有室内定位系统的公司声称他们可以在 iOS 中开发该系统。我知道他们正在扫描热点和信号强度，然后在他们当前的 Android 应用程序上对信号进行三角测量。

有没有我想念的替代品？他们的要求对我来说听起来不可能，但我很想听听这里的人的意见。我想在他们演示时做好准备（尽管我期待越狱或某种模拟）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:32:10.540

据我所知，这仍然可以通过[MobileApple80211 框架](http://code.google.com/p/iphone-wireless/wiki/Apple80211Functions)完成（当然，使用私有 API） 。

[Stumbler](http://code.google.com/p/iphone-wireless/wiki/Stumbler)代码是关于如何使用这个框架的一个很好的信息来源。

对于 iOS 5，您需要越狱的 iPhone。[Guvener Gokce](https://stackoverflow.com/users/80973/guvener-gokce)有一篇非常有教育意义的博客文章：[iPhone Wireless Scanner iOS5](http://blog.guvenergokce.com/iphone-wireless-scanner-ios5/170/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-11T16:19:36.070

只是为了更新答案： MobileApple80211 框架已被[MobileWifi.framework](http://iphonedevwiki.net/index.php/MobileWiFi.framework)取代。您将需要一个越狱设备（假设它不能仅使用私有 API 来完成，因此在开发/企业非越狱设备上）。

# xpages - 获取所选文档的 unid 并保存到作用域变量

> ID：12054820
> 
> 赞同：0
> 
> 时间：2012-08-21T12:26:43.890
> 
> 标签：xpages

我有一个带有复选框的 viewPanel1。通过单击按钮，我想将所选项目的univ id（逗号分隔）保存到作用域变量中。我试过这个：

`var viewPanel=getComponent("viewPanel1"); var docIDArray=viewPanel.getSelectedIds(); for(i=0;i < docIDArray.length;i++){ var docId=docIDArray[i]; sessionScope.put("test",+docId); }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:11:10.510

另外，不要忘记作用域变量可以保存一个数组，因此您实际上不需要对数组进行装箱/拆箱：

sessionScope.put("SelectedIds", getComponent("viewPanel1").getSelectedIds());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:49:26.383

你可以做的是以下

```
var vPanel = getComponent("viewPanel");
docIdArray = viewPanel.getSelectedIds();
sessionScope.put("SelectedIds",@Implode(docIdArray,",")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:40:33.677

```
var viewPanel=getComponent("viewPanel1");
var docIDArray=viewPanel.getSelectedIds();
var unidArray = new Array();
for(i=0; i < docIDArray.length; i++) {
   var unid=database.getDocumentByID(docIDArray[i]).getUniversalID();
   unidArray.push(unid);
}
sessionScope.put("test", @Implode(unidArray, ",")); 
```

这可能会做到。

# jquery - Jquery，如何取消选择单选组中的所有单选按钮

> ID：12054825
> 
> 赞同：53
> 
> 时间：2012-08-21T12:26:52.143
> 
> 标签：jquery, html, jquery-mobile, jquery-selectors

任何人都知道如何取消选择单选组中的所有单选按钮？

**HTML：**

```
<div id="emptimfields">
              <label id="lbl_emptim">How regulary do you employ people to help cultivate your land? </label><br/><br/>

             <fieldset data-role="controlgroup" data-type="vertical" id="emptim">

              <input name="emptim" id="radio1" value="fromtimetotime" type="radio" openmrs-valuecoded="" />
              <label for="radio1"> From time to time </label>

              <input name="emptim" id="radio2" value="allthetime" type="radio" openmrs-valuecoded="" />
              <label for="radio2">All the time</label>

              <input name="emptim" id="radio3" value="dontknow" type="radio" openmrs-valuecoded="" />
              <label for="radio3"> Don't know </label> 
            </fieldset>
        </div> 
```

**jQuery端：**

```
$('input:radio[name=emptim]:checked').prop('checked', false); // doesn't work 
```

我当然缺少一些基本的东西，但我不知道是什么问题。

首先，我检查是，然后检查第二个无线电组的值：

![在此处输入图像描述](../Images/481555c3e858a6b72dc163ffed6ac62a.png)

然后，我选中否以隐藏第二个无线电组：

![在此处输入图像描述](../Images/8ca67fe40b6af9b231d259d2dc3f5dd0.png)

然后，如果我点击下一步，我会得到我检查过的值（但我之前没有检查过，所以在这里我不想要警报，我希望取消选中单选按钮“不时”）：

![在此处输入图像描述](../Images/ecb6e01004741be366927cc220799757.png)

最后，如果我回来，什么也没发生：

![在此处输入图像描述](../Images/51bc638009b7baf35809a0e686e12338.png)

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-21T12:31:10.027

您可以给他们一个类名并尝试：

```
$('.classname').prop('checked', false); 
```

当您使用比 1.6 更旧的 jQuery 版本时，它必须是：

```
 $('<selector>').attr('checked', false); 
```

**编辑 ：**

调用该方法`.checkboxradio("refresh");`也对我有用。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-11-13T11:57:46.217

```
$('input:radio[name=indicatorType]').each(function () { $(this).prop('checked', false); }); 
```

使单选组的“未选中”整个单选按钮的替代解决方案（上述代码示例的“indicatorType”）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-16T10:37:12.363

这应该这样做。请注意最后的刷新选项以强制更新控制组。

此方法的另一个好处是它按名称定位特定的无线电组，而不是页面上的所有无线电控件。

```
$('input:radio[name=emptim]:checked').prop('checked', false).checkboxradio("refresh"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-16T10:25:21.613

我制作了一个非显示单选按钮并通过我的 PHP 调用它。您可以使用 jquery 来选择隐藏按钮。我无法让解决方案在这里工作，所以我使用了一些 PHP，因为我必须从数据库中调用值。为了帮助任何人，我使用的解决方案是：

```
<input type="radio" id="test" value="" class = "timescale" name="timescale_radio_buttons" style="display: none" <?php $x = ((empty($gigObject->getTimescale())) || ($gigObject->getTimescale() == 'Blank')) ? 'checked="checked"' : ''; echo $x; ?>> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-03-29T09:22:11.043

该道具对我不起作用，但这非常有效：

```
('input:radio[name="RadioName"]').each(function () { $(this).attr('checked', false); }); 
```

# iphone - 如何在不使用静态库的情况下将 xcode 项目中的资源共享到工作区中的其他 xcode 项目中？

> ID：12054827
> 
> 赞同：1
> 
> 时间：2012-08-21T12:26:57.297
> 
> 标签：iphone, ios, ipad

我目前正在使用工作区，我在一个工作区中有多个项目，首先，我想将一个 xcode 项目中存在的文件/任何资源/框架添加到工作区中的其他项目。有没有其他方法可以在不使用静态库的情况下将资源共享给其他项目？

其次，我想知道如何在工作区的目标中运行多个方案？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:30:41.200

要在两个不同的工作区之间共享文件或资源，您可以将其添加到您的项目中并取消选中“将资源复制到项目”选项。通过这种方式，文件不会从文件系统中的原始位置移动，并且可以添加到 2 个不同的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:44:02.843

好吧，您可以尝试使用“源树”：在 Xcode 中，转到菜单 Xcode -> 首选项 -> 位置 > 源树！请参阅[源代码树首选项帮助](https://developer.apple.com/library/ios/#recipes/xcode_help-source_trees_preferences/About.html)。

运行多个方案也很容易！复制并重命名现有的并根据需要重新配置它！然后在您的目标构建设置中，您可以在适当的情况下为不同的方案指定不同的设置！

# c# - 如何实现多个 ViewModel 类型以使用相同的操作获取和发布？

> ID：12054829
> 
> 赞同：0
> 
> 时间：2012-08-21T12:27:10.760
> 
> 标签：c#, asp.net-mvc-3

我正在构建一个 cms，在一个部分的编辑屏幕上，您可以编辑多种类型的页面，网址需要保持自然，如下所示：

foob
​​ar.com/edit/section/my-content-page-name foobar.com/edit/section/my-gallery-page-name
foobar.com/edit/section/my-blog-page-name

在这种情况下，索引操作用于获取和发布。

目前我有一个庞大的 ViewModel，它包含所有页面类型所需的所有数据。

我觉得这是非常错误的，并且为决定帖子上的页面更新类型提供了一个丑陋的解决方案。

如何保持 Action 不变，但将其与不同的强类型 ViewModel 一起使用？

这甚至可能吗？

```
public ActionResult Index(string page)
    {
        var model = _pageManager.GetSection(page, SelectedSite);
        return View(model.PageType, model);

        // renders appropriate View based on page type.

    }

    [Transaction]
    [HttpPost]
    [ValidateInput(false)]
    public ActionResult Index(SectionIndexViewModel model)
    {
        // all page types post back to same action to update content etc.
        // at this point SectionIndexViewModel is getting bloated with properties because it must cater for ALL page types data.

        var action = Request["action"] ?? "";

        // currently use this to determine what event has been triggered 
        switch (action.ToLower())
        {
         // then goes to update the appropriate page, blog or gallery
         // etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:41:04.857

> 所有页面类型都发回相同的操作以更新内容等。

有你的问题。相同的操作不应该处理所有的回传。为每个功能（内容、图库、博客）创建一个控制器。这就是 MVC 的用途。

单一责任原则也适用于控制者。

您甚至可以将控制器移动到类库中，为您的 CMS 获取类似架构的插件。我在这里描述了如何：http: [//blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/](http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:54:43.107

我设法通过一些我忘记的 MVC 基础知识来实现​​这一点。

路由保持默认设置。

对于每种 ViewModel 类型，我在表单中提供了一个额外的隐藏字段，其中包含页面/内容/ViewModel 的类型，例如：内容页面或博客页面等。

在 Post 操作中，我从这个隐藏字段中检查页面的类型。

然后使用`TryUpdateModel`该页面类型的预期 ViewModel 类型。

其余的都是直截了当的。

真的很基本的东西。

# java - Eclipse 调试视图中未显示 Java 源代码

> ID：12054838
> 
> 赞同：8
> 
> 时间：2012-08-21T12:28:05.560
> 
> 标签：java, eclipse, debugging, remote-debugging

我正在对 Java 应用程序进行远程调试并使用 Eclipse 的调试视图。基本调试过程运行良好，我可以在调试视图中的相关断点处看到方法堆栈跟踪。但是，我在下面的选项卡中没有看到相应的源代码，它说：

> 找不到来源

源文件已经在我的 Eclipse 项目中，我可以在 Java 视图中看到它们。我已经编辑了源查找路径并将 *.java 文件添加到其中。但即便如此，我也没有在执行停止的调试视图中看到源代码。任何有关此的线索将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T12:42:27.767

对于您一直用于远程调试的运行/调试配置，您是否遵循了以下步骤：

1.  “运行 -> 调试配置……”
2.  从左侧的树中选择远程配置
3.  点击“来源”标签
4.  单击“添加...”按钮
5.  按照向导（添加包含正在调试的源的项目）。

如果是这样，你能发布一个快照`Run Configuration`吗？

我通常对运行配置所做的`Remote Debug`是关于运行/调试配置上的`Add Source`选项卡。因此，要添加一个名为 的项目，我将按如下方式进行：`Java Projects``Source``so`

![在此处输入图像描述](../Images/f50e2d684671ad73780ec75aadc42942.png)

在选择项目时，选择两个复选框：

![在此处输入图像描述](../Images/9693bc40e7c876859bbd7bae9d69bb17.png)

最后以这个结束：

![在此处输入图像描述](../Images/8ddb233b07c3ba202ff48137a8d43aa9.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-13T09:38:55.207

我已经完成了以下步骤，它对我有用：

1.  运行 > 运行配置
2.  Java 应用程序 > 单击源选项卡
3.  通过选择*“文件系统目录”选项来包含项目*
4.  调试开始显示源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:41:34.893

您可能正在使用 JRebel，它会自动重新编译和重新加载类。不幸的是，Eclipse Debugger 不适用于以这种方式重新加载的类。为了确保 Eclipse 在更改后可以正常使用该类，您必须重新启动 Web 应用程序容器。

# c++ - FFMpeg-原始压缩数据到视频

> ID：12054844
> 
> 赞同：0
> 
> 时间：2012-08-21T12:28:20.573
> 
> 标签：c++, video, ffmpeg, compression

我正在尝试使用 FFMpeg 创建视频。到目前为止，我一直在玩多路复用示例： http: [//ffmpeg.org/doxygen/trunk/muxing_8c-source.html](http://ffmpeg.org/doxygen/trunk/muxing_8c-source.html)，并且我能够从已经存在的视频创建压缩视频。

因为我的程序将在嵌入式平台上运行，所以我想使用一些自定义代码（由同事生成）来压缩视频数据并将其放入视频文件中。因此，我正在寻找一种使用 ffmpeg 在 c/c++ 中创建视频文件的方法，其中我可以完全控制压缩部分（基本上避免 ffmpeg 为我进行压缩并插入我自己的代码）。

为了澄清我打算用它来将智能相机中的胶片保存到压缩的 h264 mpeg-4 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:36:01.570

您可以将输出通过管道`-vcodec rawvideo`传输到您的自定义程序，或者将其编写为编解码器并进行`ffmpeg`处理。

顺便说一句，ffmpeg 被`avconv`. ffmpeg 现在只是为了向后兼容而存在。

编辑：[显然](https://stackoverflow.com/a/9477756/506962)avconv 是 ffmpeg 的一个较新的分支，并且似乎有更多的支持。无论哪种方式，选项几乎相同。

# excel - 暴露 jpeg 文件的 XL 宏 - jpeg 文件存储在哪里

> ID：12054845
> 
> 赞同：0
> 
> 时间：2012-08-21T12:28:21.087
> 
> 标签：excel, excel-2003, vba

这是 Sheet1 模块中的宏：

```
Private Sub Worksheet_Calculate()
    Dim oPic As Picture
    Me.Pictures.Visible = False
    With Range("F1")
        For Each oPic In Me.Pictures
            If oPic.Name = .Text Then
                oPic.Visible = True
                oPic.Top = .Top
                oPic.Left = .Left
                Exit For
            End If
        Next oPic
    End With
End Sub 
```

在工作簿中是这样的：

![在此处输入图像描述](../Images/dd63a063d7328a102db2624099383f57.png)

我如何获得访问权限`Me.Pictures`？我们想添加图片并删除一些现有的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:12:33.563

尝试运行它，它只使用现有代码中的第三行

```
Private Sub MakeAllPicsVisible()
    Me.Pictures.Visible = True
End Sub 
```

`Me`指代码所在的工作表对象。每张图片似乎都以列表中的项目命名

要更改图片名称，请通过名称框（公式栏左侧）输入新名称。

# objective-c - 嵌入式 NSArray 中第一个元素的键路径

> ID：12054846
> 
> 赞同：11
> 
> 时间：2012-08-21T12:28:25.163
> 
> 标签：objective-c, key-value-coding

这个例子是人为的，但它表明了我的观点。

所以，如果我有一个如下的对象图：

```
{
sex = male;
uid = 637650940;
work = ({
    employer = {
        id = 116420715044499;
        name = "Software Engineer";
    };
    "end_date" = "0000-00";
    "start_date" = "0000-00";
}, {
    employer = {
        id = 188733137832278;
        name = "Apple";
    };
});
},
//Some more objects 
```

（这是一个包含 NSDictionarys 的 NSArray，它有一个 NSArray 类型的对象）。

关键字段是`work`。我想要一个键路径，它将采用`work`数组中的第一个对象。

如果我这样做：

```
NSArray* work = [outerArrayObject objectForKey: @"work"];
id name = [work valueForKeyPath: @"employer.name"]; 
```

我得到一个包含每个名称的数组（在上述情况下，软件工程师和苹果）。是否有集合运算符或返回第一个对象的东西？如果您可以开发一个关键路径来按 start_date 对每件作品进行排序，则可以加分:)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-05-06T02:10:30.640

@PauldeLange - 您的回答和链接很有帮助。
以下更简单的版本也可以（至少从 Xcode 6 开始）

```
id name = [work valueForKeyPath: @"employer.name.@firstObject”]; 
```

上面的'firstObject'指的是NSArray上的预定义方法。如果需要第二个对象，您可以定义以下内容：

```
@implementation NSArray (CustomKVOOperators)

- (id) secondObject {
    return [self count] >=2 ? self[1] : nil;
}
@end 
```

并使用：

```
 id name = [work valueForKeyPath: @"employer.name.@secondObject”]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-21T12:42:16.763

好吧，回答我自己的问题，一种方法是：

1）定义以下类别

```
@implementation NSArray (CustomKVOOperators)

- (id) _firstForKeyPath: (NSString*) keyPath {
    NSArray* array = [self valueForKeyPath: keyPath];
    if( [array respondsToSelector: @selector(objectAtIndex:)] &&
        [array respondsToSelector: @selector(count)]) {
        if( [array count] )
            return [array objectAtIndex: 0];
        else
            return nil;
    }
    else {
        return nil;
    }
}

@end 
```

2) 使用这个 KeyPath 语法

```
NSArray* work = [outerArrayObject objectForKey: @"work"];
id name = [work valueForKeyPath: @"@first.employer.name"]; 
```

感谢[这个聪明的人](http://funwithobjc.tumblr.com/post/1527111790/defining-custom-key-path-operators)。

# ios - NSDateFormatter 的时间间隔不正确

> ID：12054853
> 
> 赞同：1
> 
> 时间：2012-08-21T12:28:48.903
> 
> 标签：ios, nsdate, nsdateformatter, nscalendar, nstimeinterval

我有以下方法将持续时间（以秒为单位）格式化为格式为@“mm：ss”的字符串。每当输入特定值 60 时，此方法的行为都出乎意料：

*   持续时间 = 59 -> @"00:59"
*   持续时间 = 60 -> @"59:59"（预期为 @"01:00"）
*   持续时间 = 61 -> @"01:01"

方法：

```
+ (NSString *)formatDuration:(NSTimeInterval)duration
{    
    NSDateFormatter *durationFormatter = [[NSDateFormatter alloc] init];
    [durationFormatter setDateFormat:@"mm:ss"];

    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *zeroComponents = [[NSDateComponents alloc] init];
    zeroComponents.hour = 0;
    zeroComponents.minute = 0;
    zeroComponents.second = 0;

    NSDate *zeroDate = [calendar dateFromComponents:zeroComponents];
    [zeroComponents release];
    NSDate *endDate = [NSDate dateWithTimeInterval:duration sinceDate:zeroDate];

    return [[durationFormatter autorelease] stringFromDate:endDate];
} 
```

# objective-c - iOS中的线条绘制

> ID：12054856
> 
> 赞同：0
> 
> 时间：2012-08-21T12:28:57.967
> 
> 标签：objective-c, core-graphics, line-drawing

无论用户如何绘制它，如何在 iOS 中绘制一条直线。

我希望这条线是用户拖动手指的像素数的长度。

但它需要是垂直的还是水平的，这取决于用户是从屏幕的左到右还是从屏幕的上到下滑动手指。

线条不应倾斜或任何其他形状。它需要是直的。

我浏览过文章说“Open GL”是唯一的方法。

我自己尝试过编码，但是当我将方向从垂直更改为水平或反之亦然时，我会在水平线的结束位置和垂直线的开始位置之间出现一些额外的线条或间隙：

**在头文件中：**

```
@interface ViewController : UIViewController
{
    BOOL mouseSwiped;
    CGPoint lastPoint;
    CGPoint previousPoint;
    UIBezierPath *currentPath;
    CGFloat lastPointY;
    CGFloat lastPointX;
    BOOL xchanging;
    BOOL ychanging;
    NSMutableArray *arrayTouch;
}
@property (weak, nonatomic) IBOutlet UIImageView *drawImage;
@property UIBezierPath *currentPath;
@end 
```

**在实现文件中：**

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    mouseSwiped = NO;
    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 2) {
        drawImage.image = nil;
        [arrayTouch removeAllObjects];
        return;
    }

    lastPoint = [touch locationInView:self.view];
    [arrayTouch addObject:touch];
    lastPointY  = lastPoint.y;
    lastPointX = lastPoint.x;
    lastPoint.y -= 1;
} 

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    mouseSwiped = YES;

    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];
    currentPoint.y -= 1;
    int currentPointXVal = currentPoint.x;
    int currentPointYVal = currentPoint.y;

    int lastPointXVal = lastPoint.x;
    int lastPointYVal = lastPoint.y;

    int diffX = abs(currentPointXVal - lastPointXVal);
    int diffY = abs(currentPointYVal - lastPointYVal);

    if(currentPoint.x > lastPoint.x && diffX > diffY)
    {
        if(ychanging == YES)
        {
            lastPointY  = currentPoint.y;
            lastPointX = currentPoint.x;
            ychanging = NO;
        }
        xchanging = YES;
        NSLog(@"x increasing");
        NSLog(@"currentPoint: %@",NSStringFromCGPoint(currentPoint));
        NSLog(@"lastPoint: %@",NSStringFromCGPoint(lastPoint));

        UIGraphicsBeginImageContext(self.view.frame.size);
        [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
        CGContextBeginPath(UIGraphicsGetCurrentContext());
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPointY);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, lastPointY);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }

    if(currentPoint.y > lastPoint.y && diffY > diffX)
    {
        if(xchanging == YES)
        {
            lastPointY  = currentPoint.y;
            lastPointX = currentPoint.x;
            xchanging = NO;
        }
        ychanging = YES;
        NSLog(@"y increasing");
        NSLog(@"currentPoint: %@",NSStringFromCGPoint(currentPoint));
        NSLog(@"lastPoint: %@",NSStringFromCGPoint(lastPoint));

        UIGraphicsBeginImageContext(self.view.frame.size);
        [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
        CGContextBeginPath(UIGraphicsGetCurrentContext());
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPointX, lastPoint.y);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPointX, currentPoint.y);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }

    if(currentPoint.x < lastPoint.x && diffX > diffY)
    {
        if(ychanging == YES)
        {
            lastPointY  = currentPoint.y;
            lastPointX = currentPoint.x;
            ychanging = NO;
        }
        xchanging = YES;
        NSLog(@"x decreasing");
        NSLog(@"currentPoint: %@",NSStringFromCGPoint(currentPoint));
        NSLog(@"lastPoint: %@",NSStringFromCGPoint(lastPoint));

        UIGraphicsBeginImageContext(self.view.frame.size);
        [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
        CGContextBeginPath(UIGraphicsGetCurrentContext());
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPointY);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, lastPointY);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }

    if(currentPoint.y < lastPoint.y && diffY > diffX)
    {
        if(xchanging == YES)
        {
            lastPointY  = currentPoint.y;
            lastPointX = currentPoint.x;
            xchanging = NO;
        }

        ychanging = YES;
        NSLog(@"y decreasing");
        NSLog(@"currentPoint: %@",NSStringFromCGPoint(currentPoint));
        NSLog(@"lastPoint: %@",NSStringFromCGPoint(lastPoint));

        UIGraphicsBeginImageContext(self.view.frame.size);
        [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
        CGContextBeginPath(UIGraphicsGetCurrentContext());
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPointX, lastPoint.y);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPointX, currentPoint.y);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

    }

    lastPoint = currentPoint;

} 
```

如果没有 Open GL，我有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:53:30.797

当然-您可以这样做，只需从直线上移开坡度即可：

```
@implementation LineDrawingView
{
    CGPoint touchStart;
    CGPoint touchCurrent;
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        touchStart   = (CGPoint) { -1, -1 };
        touchCurrent = (CGPoint) { -1, -1 };
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
    if (touchStart.x != -1)
    {
        // calculate the line rotation
        enum { horizontal, vertical } lineRot = horizontal;

        if (touchStart.y == touchCurrent.y)
        {
            // straight line
            lineRot = horizontal;
        }
        else
        {
            // calculate the slope
            double slope = fabs((touchCurrent.y - touchStart.y) / (touchCurrent.x - touchStart.x));

            if (slope > 1)
                lineRot = vertical;
        }

        // draw the actual line
        CGPoint lineEndPoint = { };

        if (lineRot == horizontal)
            lineEndPoint = (CGPoint) { touchCurrent.x, touchStart.y }; // horizontal line
        else
            lineEndPoint = (CGPoint) { touchStart.x, touchCurrent.y }; // vertical line

        // actually draw the line
        [[UIColor redColor] setStroke];

        UIBezierPath *path = [UIBezierPath bezierPath];
        [path moveToPoint:touchStart];
        [path addLineToPoint:lineEndPoint];

        [path stroke];
    }
}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    touchStart = [[touches anyObject] locationInView:self];
    touchCurrent = touchStart;
    [self setNeedsDisplay];
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    touchCurrent = [[touches anyObject] locationInView:self];
    [self setNeedsDisplay];
}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    touchStart = touchCurrent = (CGPoint) { -1, -1 };
    [self setNeedsDisplay];
}

@end 
```

如果您愿意，您可以将其扩展为使用行数组，这只是一个简单的解释。

# c++ - 将 .so 和 .a 库添加到 Makefile

> ID：12054858
> 
> 赞同：16
> 
> 时间：2012-08-21T12:29:04.347
> 
> 标签：c++, makefile, static-libraries

我有一个看起来像这样的makefile。

```
DEFINES=-std=c++0x
INCS_GTK=-I/usr/include/gtk-2.0 -I/usr/include/glib-2.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/gtk-2.0/gdk -I/usr/include/pango-1.0 -I/usr/lib/gtk-2.0/include -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include
INCS=-I/usr/include/freetype2 -I/usr/include/mysql -Iframeworks ${INCS_GTK}
LDLIBS=-lconfig++ -lcxcore -lcv -lGL -lGLU -lglut -lhighgui -lSDL -lftgl -lueye_api -lboost_filesystem -lboost_system -lann -lpthread -lflycapture -lglog -lmysqlpp -lmysqlclient -lunittest++
DEBUG=-g -pg
WARNINGS=-Wall -Wextra -pedantic -Wno-long-long #-O3 -Weffc++
BUILDDIR=build
BINDIR=dist

MAINCXX=${shell find -name '*.cxx'}
TARGETS=${MAINCXX:%.cxx=%}
CXXFLAGS=${DEBUG} ${WARNINGS} ${DEFINES} ${INCS}
LDFLAGS=${DEBUG} ${WARNINGS} ${DEFINES}
include IDEconfigs/Makefile/generic.mk 
```

我想将静态库的以下路径添加到 makefile 。

```
/usr/local/lib/libYARP_OS.a  /usr/local/lib/libYARP_sig.a  /usr/local/lib/libYARP_math.a  /usr/local/lib/libYARP_dev.a  /usr/local/lib/libYARP_name.a  /usr/local/lib/libYARP_init.a 
```

我该怎么做呢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-21T12:39:19.130

让我们考虑一下您的`/usr/local/lib/libYARP_OS.a`.

您可以做的是，`-L/usr/local/lib/`在您的 makefile 中作为变量之一。然后您可以`-lYARP_OS`附加到 LDLIBS。

-L 是 lib 的路径，-l 是这里的 lib 名称，`libYARP_OS.a`将作为`-lYARP_OS`.

在命令行上，您可以执行以下操作：`gcc -o main main.c -L/usr/local/lib/ -lYARP_OS`. 这应该给你一个想法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-21T12:45:20.787

您可以使用`-L<path>`标志告诉 GCC 任何库的位置，然后将其包含在`-l<libname>`. 例如，这将是

```
$ gcc -o main main.c -L/usr/local/lib/ -lYARP_SO 
```

正如 sair 所指出的。

或者，您也可以提供静态库的完整路径并直接编译，例如

```
$ gcc -o main main.c /usr/local/lib/libYARP_OS.a 
```

有关详细信息，请参阅[“共享库和静态库”](http://www.network-theory.co.uk/docs/gccintro/gccintro_25.html)。

在您的特定情况下，我会将它们添加到`LDLIBS=`行中。

注意：链接顺序要小心，这在将程序链接在一起时是相关的。有关详细信息，请参阅[“库的链接顺序”](http://www.network-theory.co.uk/docs/gccintro/gccintro_18.html)。例如：

```
$ gcc -Wall calc.c -lm -o calc   (correct order) 
```

作品

```
$ cc -Wall -lm calc.c -o calc    (incorrect order)
main.o: In function `main':
main.o(.text+0xf): undefined reference to `sqrt' 
```

另请参阅这个类似的问题：[如何链接到 C 中的静态库？](https://stackoverflow.com/questions/1705961/how-to-link-to-static-library-in-c)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-21T12:54:49.080

附加`-lYARP_OS -lYARP_sig -lYARP_math -lYARP_dev -lYARP_name -lYARP_init`到`LDLIBS`.

警告：链接顺序可能很重要。

此外，请确保链接器知道这`/usr/local/lib`是查找库的地方，否则会使用`-L/usr/local/lib`（您可以添加另一个 makefile 变量，例如`LIBPATHS`或类似的东西来包含库路径）来指示它。

作为一般概要，如果您`libMyLib.a`在文件夹中有一个库`/my/path`，则可以使用以下参数调用`gcc`（或）：`g++`

```
gcc -L/my/path -lMyLib [...] 
```

*   `-L`用于包含链接器查找库的路径
*   `-l`用于链接库，必须不带`lib`前缀和扩展名传递

[这个问题可能有助于大致了解 C 和 C++ 中的库使用：[如何使用库](https://stackoverflow.com/questions/10358745/how-to-use-libraries)]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-05T11:18:39.737

在 Makefile 中，像这样添加

`USER_LIBS = -lYARP_OS -lYARP_sig -lYARP_math -lYARP_dev -lYARP_name -lYARP_init`

这将链接您需要的库

# objective-c - 在另一个代码上方绘制一个图像不起作用

> ID：12054861
> 
> 赞同：1
> 
> 时间：2012-08-21T12:29:06.547
> 
> 标签：objective-c, uiimage, cgcontext

我有 2 个相同大小的图像，我需要制作 3d 图片，其中 2nd 高于 1st 我有 UIImage 类扩展，方法如下

```
+(UIImage*)imageFrom2Images:(UIImage *)img1 with:(UIImage *)img2 {

UIGraphicsBeginImageContext(img1.size);
CGContextRef context = UIGraphicsGetCurrentContext();
UIGraphicsPushContext(context);      
[img1 drawAtPoint:CGPointMake(0, 0)];
[img2 drawAtPoint:CGPointMake(0, 0)];
UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsPopContext();
UIGraphicsEndImageContext();
return resultingImage;

} 
```

我试图将生成的图像保存在相册中，但它调用错误并且不起作用..似乎这种方法是错误的。

```
 UIImage*t1=[self.mw.imageFIFO lastObject];
   UIImage* test=[UIImage imageFrom2Images:self.imageView.image with:t1];
   UIImageWriteToSavedPhotosAlbum(test, self,
          @selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

我收到的错误消息是：

```
 Error Domain=ALAssetsLibraryErrorDomain Code=-3304 "Failed to encode image for saved photos." 
 UserInfo=0x9398960 {NSUnderlyingError=0x935e760 "Failed to encode image for saved photos.", 
 NSLocalizedDescription=Failed to encode image for saved photos.} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:54:02.367

您永远不需要获取当前图形上下文然后推送它 - 您只是在复制上下文堆栈的顶部。如果它仍然有效，那就太好了，但它没有。`UIGraphicsPushContext`删除对and的调用`UIGraphicsPopContext`，它按预期工作。

```
+(UIImage*)imageFrom2Images:(UIImage *)img1 with:(UIImage *)img2 {
    UIGraphicsBeginImageContext(img1.size);
    [img1 drawAtPoint:CGPointMake(0, 0)];
    [img2 drawAtPoint:CGPointMake(0, 0)];
    UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return resultingImage;
} 
```

要在将来检测这些问题，请检查`imageFrom2Images`. 正如最初实现`nil`的那样，它返回 ，因此以下调用不知道该做什么也就不足为奇了。（如果它返回了一个图像对象，下一步就是在 UIImageView 中显示它，以确保它是*正确*的图像。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T13:35:15.713

**这个方法应该这样做：**

```
-(UIImage *)drawFirstImage:(UIImage*)firstImage afterSecondImage:(UIImage *)secondImage
{

    float finalWidth=MAX(firstImage.size.width,secondImage.size.width);
    float finalHeight=firstImage.size.height +  secondImage.size.height;

    CGSize finalSize=CGSizeMake(finalWidth, finalHeight);
    UIGraphicsBeginImageContext(finalSize);

    [firstImage drawInRect:CGRectMake(0, 0, firstImage.size.width, firstImage.size.height)];
    [secondImage drawInRect:CGRectMake(0, firstImage.size.height, secondImage.size.width, secondImage.size.height)];
    UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
    return resultImage;
} 
```

**您可以将其用作：**

```
 UIImage *resultImage= [self drawFirstImage:image1 afterSecondImage:image2]; 
```

**这是一个类别实现：**

*UIImage+MyExtensions.h*

```
#import <UIKit/UIKit.h>

@interface UIImage (MyExtensions)
-(UIImage *)attachImageBelow:(UIImage *)secondImage;
@end 
```

*UIImage+MyExtensions.m*

```
#import "UIImage+MyExtensions.h"

@implementation UIImage (MyExtensions)

-(UIImage *)attachImageBelow:(UIImage *)secondImage{
    float finalWidth=MAX(self.size.width,secondImage.size.width);
    float finalHeight=self.size.height +  secondImage.size.height;

    CGSize finalSize=CGSizeMake(finalWidth, finalHeight);
    UIGraphicsBeginImageContext(finalSize);

    [self drawInRect:CGRectMake(0, 0, self.size.width, self.size.height)];
    [secondImage drawInRect:CGRectMake(0, self.size.height, secondImage.size.width, secondImage.size.height)];
    UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return resultImage;
} 
```

**你可以像这样使用它：**

```
#import "UIImage+MyExtensions.h"
UIImage *resultImage= [image1 attachImageBelow:image2]; 
```

# php - 过滤字符串，只允许数字、逗号、括号和空格通过

> ID：12054863
> 
> 赞同：-2
> 
> 时间：2012-08-21T12:29:23.660
> 
> 标签：php, regex, string

我需要执行一个 if 语句来过滤一些字符串。

如果字符串包含`0-9, whitespace, commas or brackets`我想让它们通过。所以这个字符串应该通过 -

```
[[1,1],[2,3]] 
```

但是，如果字符串是，或者说，或者`Hello World`因为它们包含的字符不是`[Hello World]``[1, $]``0-9, whitespace, commas or brackets`

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:31:00.633

```
if (preg_match("/[^\d\s,\[\]]/", $string)) {
    //Invalid
} 
```

# c# - 如何判断 IOException 是否是由另一个进程使用该文件的事实引起的？

> ID：12054864
> 
> 赞同：5
> 
> 时间：2012-08-21T12:29:27.063
> 
> 标签：c#, .net, process, io, ioexception

让我们看一下这个代码示例：

```
using System;
using System.IO;

namespace ConsoleApplication25
{
    class Program
    {
        static void Main()
        {
            var bytes = new byte[] { 1, 2, 3 };
            var trimChars = new[] { '"' };
            var path = Environment.CommandLine.Trim().Trim(trimChars);
            File.WriteAllBytes(path, bytes);
        }
    }
} 
```

运行这个（程序试图覆盖自己）会导致抛出异常：

```
System.IO.IOException was unhandled
Message=The process cannot access the file 'F:\TEMP\ConsoleApplication25\ConsoleApplication25\bin\Debug\ConsoleApplication25.vshost.exe' because it is being used by another process.
Source=mscorlib
StackTrace:
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.WriteAllBytes(String path, Byte[] bytes)
   at ConsoleApplication25.Program.Main() in F:\TEMP\ConsoleApplication25\ConsoleApplication25\Program.cs:line 13
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

..这是意料之中且显而易见的。**但是**， IOException 的实例并没有为我提供任何**可靠的**信息，我可以使用这些信息以**编程**方式检测文件是否正在被另一个进程使用。只是`Message`物业告诉你，但这取决于当地文化，所以我不能依赖它。

知道如何处理吗？如果文件正在被另一个进程使用，我需要采取特殊措施，但我找不到将这种情况与其他（异常）情况分开的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T12:45:38.267

这个问题可能是这个问题的重复[，](https://stackoverflow.com/q/9293227/21567)所以这里的答案非常接近[接受](https://stackoverflow.com/a/9294382/21567)的问题。但是，要检查的错误代码存在一些显着差异。最终，您可能会考虑支持另一个问题的答案。

您可以按照[此](https://stackoverflow.com/a/9294382/21567)答案进行操作，但请检查`ERROR_SHARING_VIOLATION`(0x20)

```
const long ERROR_SHARING_VIOLATION = 0x20;
const long ERROR_LOCK_VIOLATION = 0x21;

//Only for .NET <4.5: long win32ErrorCode = Marshal.GetHRForException(ex) & 0xFFFF;
long win32ErrorCode = ex.HResult & 0xFFFF; // .NET 4.5+
if (win32ErrorCode == ERROR_SHARING_VIOLATION || win32ErrorCode == ERROR_LOCK_VIOLATION )
{
    // file in use.
} 
```

但是，请注意，使用`GetHRForException`具有您可能不希望有的[副作用。](https://stackoverflow.com/a/9294382/21567)

**更新**正如评论者@jmn2 指出的那样，从.NET 4.5 开始，该[`Exception.HResult`](https://msdn.microsoft.com/library/system.exception.hresult(v=vs.110).aspx)属性现在是公开的。所以没有必要使用`GetHRForException`- 当然，除非你需要支持 4.5 之前的代码。

要编写一个运行时向后兼容的“包装器”，您应该`HResult`通过反射调用，因为（如果您使用`GetProperties`and `BindingFlags.Public` *）* `BindingFlags.NonPublic`它将适用于所有版本的 .NET 框架（参见[这个非常相关的答案](https://stackoverflow.com/a/9294422/21567)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:38:54.910

这是[类似的问题](https://stackoverflow.com/questions/9293227/how-to-check-if-ioexception-is-not-enough-disk-space-exception-type)

您将需要检查异常的 HResult。然后检查它的值：

```
int hr = Marshal.GetHRForException( ex ); 
```

这是[共享](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx#ERROR_SHARING_VIOLATION)锁违规的代码

# mysql - SQL 查询，Rails 视图，去除小数位

> ID：12054866
> 
> 赞同：0
> 
> 时间：2012-08-21T12:29:38.277
> 
> 标签：mysql, sql, ruby-on-rails, format

我目前在我的控制器中有这个：

```
@softwares = Software.find_by_sql
(
"SELECT s.id, s.vendor, s.title, s.edition, SUM(l.amount) AS amount FROM softwares s
 LEFT JOIN licenses l ON s.id=l.software_id GROUP BY s.vendor, s.title, s.edition"
) 
```

哪个是它应该做的，但数字出现为 7.0 或 6.0 而不是 7 或 6 .. 我如何删除小数点？在我看来，我真的只有`<%= l.amount %>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:54:29.470

我宁愿控制要查看的演示文稿。代替

```
<%= l.amount %> 
```

放：

```
<%= number_to_currency l.amount, :precision => 0 %> 
```

[这里](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html)描述了这个辅助方法

附带说明一下，将 SQL 放入模型中可能是更好的设计。控制器然后做类似的事情`@softwares = Software.all_with_licenses_amounts`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:30:59.603

它以小数形式出现，因为 l.amount 是小数

尝试

```
 "SELECT s.id, s.vendor, s.title, s.edition, CAST(SUM(l.amount) as UNSIGNED) AS amount 
  FROM softwares s 
  LEFT JOIN licenses l ON s.id=l.software_id GROUP BY s.vendor, s.title, s.edition" 
```

# javascript - 不安全的 javascript 尝试未被 try 块捕获

> ID：12054868
> 
> 赞同：4
> 
> 时间：2012-08-21T12:29:38.823
> 
> 标签：javascript, try-catch

我的主页中嵌套了一个 iframe。iframe 包含以下脚本：

```
var adfoxPlaceholderId = 'placeholder';
var adfoxWindow = window;
var adfoxDocument = window.document;
var adfoxPlaceholder = adfoxDocument.getElementById(adfoxPlaceholderId);

try {
    while((adfoxPlaceholder == null) && (adfoxWindow != window.top)) {
        adfoxWindow = adfoxWindow.parent;
        adfoxDocument = adfoxWindow.document;
        adfoxPlaceholder = adfoxDocument.getElementById(adfoxPlaceholderId);
    }
} catch(ex) {
    console.log('catch-block');
} 
```

`adfoxDocument = adfoxWindow.document;`由于安全策略（iframe 和主页来自不同的 url），该脚本在线中断。我的问题是为什么这个错误没有被 catch 块捕获，就好像它没有被放入 try-catch 块一样？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:48:22.950

发生这种情况是因为它不是一个`javascript`例外。这是一个浏览器安全功能。发生这种情况是因为您的 iframe 和您的网站没有相同的 URL。

可以在[此处](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)找到同源策略的来源。

话虽如此，有办法通过第三方工具或`javascript`技巧“规避”此政策

这里有几个选项”

[易XDM](http://easyxdm.net/wp/)

[规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:01:04.150

这在我的测试中不会发生。在 IE、FF、Chrome 和 Safari 上进行测试。该错误不在您在问题中发布的代码中。

[http://jsfiddle.net/hg2cs/1/](http://jsfiddle.net/hg2cs/1/)

# mercurial - 如何处理未使用的存储库克隆

> ID：12054869
> 
> 赞同：0
> 
> 时间：2012-08-21T12:29:39.103
> 
> 标签：mercurial

这主要是一个基于 Mercurial 的问题。特别是 Eclipse Mercurial。

克隆中央存储库，进行更改（分支，新功能，合并......）后，桌面上的克隆是空闲的并且没有必要（它可能不会再次使用）。应该怎么做？右键，删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:46:11.860

如果更改已被推回中央存储库，并且您不会很快再次使用它，那么是的，没有理由保留它。

# performance - 如何衡量数据流任务中不同任务的持续时间？

> ID：12054873
> 
> 赞同：6
> 
> 时间：2012-08-21T12:29:46.717
> 
> 标签：performance, ssis, dft

我正在优化 a `data flow task`，我想我会看到哪个组件需要多少时间。我得到了这些任务：

![在此处输入图像描述](../Images/e3db21484e42a80193c1614096469111.png)

我应该如何知道每个人花了多少时间？除了时间，如果我能找到其他资源，如内存、CPU 等，那就太好了。

主要我正在查看每个组件所花费的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:33:41.357

如需快速查看已用时间，请参阅执行结果选项卡。当任务/组件启动和完成时，它将显示经过的时间。

还

[监控数据流引擎的性能](http://msdn.microsoft.com/en-us/library/ms137622%28v=sql.90%29.aspx) 这涉及更多一点，并且在执行此操作时会降低我的 PC 速度。YMMV。

如果您需要排除故障，SSIS 还包含一个非常好的错误、信息和无数其他事件的日志记录机制：

从您的菜单中选择 SSIS，记录...

您需要指定提供者。为了保持简单，直到你掌握它，我建议 SSIS 日志提供程序用于文本文件。它是 CSV 格式，您可以自定义返回的信息。

要监视包中的所有组件：单击 Details 选项卡并按照 billinkc 的建议选择 OnInformation 和 OnPipelineRowsSent。请注意，日志记录对于故障排除很有用，但 OnPipelineRowsSent 很冗长，因此您可能希望在部署到生产环境时从日志中删除该事件，以减少写入时间和日志大小。

![SSIS 日志 - 对于整个包](../Images/b0516d729f1079cdabe358d3e246a440.png)

仅监控特定任务：取消选中包，然后从包树视图中选中您要监控的数据流任务/组件。选择它之后，然后选择要记录的事件，从 OnInformation 开始（以及 billinkc 建议的 OnPipelineRowsSent）。

![SSIS 日志 - 针对特定组件](../Images/bae6798e5e1d55a6480c590f2ae55354.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:54:35.453

如果我想确定数据流上组件之间的时间，我会使用本机日志记录并捕获`OnPipelineRowsSent`事件。这表示在转换之间移动了多少行。[James 在sqlteam](http://weblogs.sqlteam.com/jamesn/archive/2008/02/11/60504.aspx)上有一个很好的查询和记录

需要注意的一点是，在包中存在数据流之前，您无法记录 OnPipelineRowsSent 事件。从创建模板包的角度来看，我一直觉得这是一种耻辱。

# jquery - 对 MVC Web API 的 API 请求得到 400 Bad Request 响应

> ID：12054874
> 
> 赞同：0
> 
> 时间：2012-08-21T12:29:53.447
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-web-api

谁能看到我对我的 API 的这个 GET 请求做错了什么（来自 Fiddler）：

```
http://localhost:51488/api/searchapi/Demo&Dte=2012-08-25&Nts=1 
```

它返回 400 Bad Request HTTP 响应。

我的路线是：

```
routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

我的**SearchAPIController.cs**是：

```
 // GET api/searchapi
    public IEnumerable<RatesViewModel> Get(string id, DateTime Dte, int Nts)
    { 
```

所以我希望：

```
id = "Demo"
Dte = 2012-08-25
Nts = 1 
```

但它似乎并没有达到控制器的程度。

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T12:36:24.800

```
http://localhost:41645/api/searchapi/Demo&Dte=2012-08-25&Nts=1 
```

应该：

```
http://localhost:41645/api/searchapi/Demo?Dte=2012-08-25&Nts=1 
```

请注意，查询字符串参数以问号 ( `?`) 开头。

# c# - c# webforms 测试策略

> ID：12054877
> 
> 赞同：2
> 
> 时间：2012-08-21T12:29:57.183
> 
> 标签：c#, testing, webforms

我想知道是否有人对测试 Web 表单应用程序的策略有链接或评论，我特指自动化测试实践和单元测试。

我目前的策略是将业务逻辑分离到一个单独的 DLL 中，该 DLL 可以逐个类地进行单元测试。但是，在使用代码 UI 测试来测试 Web 表单本身时，我似乎应该运行两个 Visual Studio 2010 实例，一个用于应用程序，另一个用于运行创建的 UI 测试。

我找到了这个链接：
[Testing ASP.NET webforms applications](https://stackoverflow.com/questions/2301659/testing-asp-net-webforms-applications)
然而，虽然这个链接很有趣，但它并没有回答我关于绿地项目策略的问题。

尽管 MVC3 可以解决其中的一些问题，但我坚持使用 Web 表单的部分原因是我正在慢慢迁移遗留系统的各个方面，并且从头开始一切，当我可以迁移战略部分时没有意义。

欢迎任何链接评论或意见。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:35:34.520

1 如果您只想测试您的接口，您可以尝试使用 Selenium

[http://seleniumhq.org/](http://seleniumhq.org/)

2 关于功能主题（后面的代码）当我与 MVC 进行比较时，测试非常困难，因为您必须模拟您的管道。

因此，例如，您可以模拟 HttpContextBase

```
var mock = new Mock<HttpContextBase>(); 
```

# android - Android中的部分屏幕刷新

> ID：12054879
> 
> 赞同：0
> 
> 时间：2012-08-21T12:30:08.083
> 
> 标签：android, textview, imageview, refresh, partial

我有一个包含 2 个组件的活动

1.  图像视图
2.  文本视图

在这里，图像视图中的图像使用计时器进行更改。这工作正常。文本滚动文本是选取框。单独这些工作正常。

我的问题是当图像被更改时，它也会重置选取框字符串。

有没有办法避免这种情况？

有什么方法可以在 android.xml 中部分刷新显示。

编辑

```
File imgFolder = new File(config.AppDataDir+config.MainImagesDir); 
if(imgFolder.isDirectory()) { 
     File[] imageList = imgFolder.listFiles(); 
     if(imageList!=null) { 
         if(imageList.length>0) { 
            if(imageList[currentImageNum].exists()){ 
                Bitmap myBitmap = BitmapFactory.decodeFile(imageList[currentImageNum++].getAbsolutePath()); 
                ImageHolder.setImageBitmap(myBitmap); 
            } 
            if(currentImageNum>=imageList.length) 
                currentImageNum =0; 
         } 
     }
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:37:43.990

通常，更改 an 的来源不`ImageView`应该对其他视图产生任何影响。很可能在更改图像时，您正在做的事情也反映在图像上`TextView`。

# javascript - jquery 数据表插件：我想自定义 jquery 数据表

> ID：12054883
> 
> 赞同：1
> 
> 时间：2012-08-21T12:30:30.133
> 
> 标签：javascript, jquery

我正在使用 jquery 数据表（[示例](http://datatables.net/release-datatables/examples/basic_init/alt_pagination.html)）。我想要这些改变：

1.  我想更改显示条目下拉列表的选项。
2.  我想在一些不同的 div 中使用显示条目、搜索和分页页脚（除了我的表格所在的 div 之外）。想让它们分开，因为它们总是粘在桌子上。
3.  当我使用分页时，表不应该移动。它应该固定在边界上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:56:00.400

> 我想更改显示条目下拉列表的选项。

使用[`aLengthMenu`](http://datatables.net/ref#aLengthMenu)参数：

```
"aLengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]] 
```

> 我想在一些不同的 div 中使用显示条目、搜索和分页页脚（除了我的表格所在的 div 之外）。想让它们分开，因为它们总是粘在桌子上。

使用[`sDom`](http://datatables.net/ref#sDom)参数。您可以注入`div`s 并使用自定义类自定义现有的。

> 当我使用分页时，表不应该移动。它应该固定在边界上。

将固定宽度和高度添加到您的`table`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:56:35.857

如果您查看[示例](http://www.datatables.net/examples/)和[选项参考](http://www.datatables.net/ref)，您一定会找到答案。[this](http://www.datatables.net/release-datatables/examples/advanced_init/dom_multiple_elements.html) , [this](http://www.datatables.net/release-datatables/examples/advanced_init/dom_toolbar.html)和[this](http://www.datatables.net/release-datatables/examples/api/show_hide.html)可以帮助您解决第 2 点。

# asp.net - 添加未在 request.form 上返回的母版页表单值

> ID：12054884
> 
> 赞同：0
> 
> 时间：2012-08-21T12:30:36.483
> 
> 标签：asp.net, master-pages

更新的问题：

我将一些页面转换为使用母版页，它们运行良好。

在子页面上执行 request.form 时（表单声明在母版页中）我得到一个空值（只是做 Request.Form("field") 返回 NULL 但在母版页之前它工作

注意：在实现母版页之前，所有代码都运行良好！！

按钮代码为：

```
<asp:Button ID="btnPACheck" runat="server"  Text="<%$Resources:share,btnPACheck %>" onclick="btnPACheck_Click" /> 
```

该按钮的 html 页面上的视图来源是：

```
<input type="submit" name="ctl00$ContentPlaceHolder1$btnPACheck" value="Continue" id="ctl00_ContentPlaceHolder1_btnPACheck" /> 
```

onclick 代码很长，但它是这样声明的（第一行有调试行，但它没有到达它）：

```
protected void btnPACheck_Click(object sender, EventArgs e)
    {
        bool validPA = false; 
```

母版页如下：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPageSiteWide.master.cs" Inherits="MasterPageSiteWide" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<%@ Register src="~/ucBanner.ascx" TagName="Banner" TagPrefix="ucBanner"  %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <style type="text/css">
        body {
            background: url(page-bg.gif) repeat-x top left #5997C8;  
            CLIP: rect(19px 65px 50px 10px);
            margin-top: 10px;
            margin-bottom:30px;
            margin-right: 40px;
            margin-left: 60px;
            width:80%;
        }

        TD.bluerow {
            height: .10pc;
            background-color: #000066;
        }

        TD.medbluerow {
            height: .0005pc;
            background-color: #6699CC;
        }   

        .panel_with_padding {
             padding-top:10px;
             padding-left:10px;
             padding-right:10px;
             padding-bottom:10px; 
         }

    </style>

    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
</head>

<body>

    <form id="form1" runat="server" method="post">

        <asp:ScriptManager ID="ScriptManager1" EnableScriptGlobalization="true" EnableScriptLocalization="true" runat="server"></asp:ScriptManager>

        <asp:RoundedCornersExtender Corners="All" TargetControlID="MainPanel" BorderColor="Black" ID="RoundedCornersExtender1" runat="server"></asp:RoundedCornersExtender>

        <asp:Panel BackColor="White" runat="server" ID="MainPanel" CssClass="panel_with_padding">

            <div>            
                <br />
                <div>
                    <asp:Label ID="lblTopHeading" runat="server" Font-Bold="true" Font-Size="X-Large" Text=""></asp:Label>
                </div>

                <br />
                <ucBanner:Banner ID="bannerStrip" runat="server"></ucBanner:Banner>
                <br />

                <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">        
                </asp:ContentPlaceHolder>

            </div>

            <br /><br />
            <hr />    
            <div>
                © Copyright 20xx-2012, Ford Motor Company. All rights reserved.
            </div>

        </asp:Panel>

    </form>

</body>
</html> 
```

内容页面（部分不能太长发布整个内容），其中按钮为：

```
<%@ Page Language="C#" MasterPageFile="~/MasterPageSiteWide.master" AutoEventWireup="true" CodeFile="initial.aspx.cs" ValidateRequest="false" Inherits="initial"  UICulture="auto"%>
<%@ MasterType  virtualPath="~/MasterPageSiteWide.master"%>

<%@ Register src="~/ucBanner.ascx" TagName="Banner" TagPrefix="ucBanner"  %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
    <title>Hotline - Dealer Prior Approval - Begin</title>   
    <link href="Styles/dpaStyles.css" rel="stylesheet" type="text/css"/>
     <script type="text/javascript">

         function OpenPopUp() {
             window.open("collectvin.aspx", "List", "scrollbars=no,resizable=no,width=400,height=350");

         }

         function InvokePop(vin) {
             val = document.getElementById(vin).value;
             // to handle in IE 7.0           
             if (window.showModalDialog) {
                 retVal = window.showModalDialog("collectvin.aspx?Control1=" + vin + "&ControlVal=" + val, 'Show Popup Window', "dialogHeight:90px,dialogWidth:250px,resizable:yes,center:yes,");
                 document.getElementById(vin).value = retVal;
             }

         }

         function checkChoice() {
             var hasFound = false
             for (i = 0; i < document.secpaform.SecPACode.length; i++) {
                 if (document.secpaform.SecPACode[i].checked == true) {
                     hasFound = true
                     break;
                 }
             }

             if (!hasFound) {
                 alert("Please select one...")
                 document.secpaform.SecPACode[0].focus();
                 return false
             }
             else
                 return true
         }

         function checkOldVin() {
             //alert('inside checkOldVin');
             if (frmInitial.txtOldVin.value == '') {
                 alert('Please enter the VIN for an older vehicle!!!');
                 frmInitial.txtOldVin.focus();
                 return false;

             }
             var alphanumeric = /^[0-9a-zA-Z]+$/;
             if (!frmInitial.txtOldVin.value.match(alphanumeric)) {
                 alert('VIN must be numbers and letters only!');
                 frmInitial.txtOldVin.focus();
                 return false;
             }
             return true;
         }

         function checkPartChoice() {
             //alert('in checkPartsChoice');
         }

     </script> 
      <style type="text/css">
        body {
        background: url(page-bg.gif) repeat-x top left #5997C8;  
        CLIP: rect(19px 65px 50px 10px);
        margin-top: 10px;
        margin-bottom:30px;
        margin-right: 40px;
        margin-left: 60px;
        width:80%;
        }

        TD.bluerow {
        height: .10pc;
        background-color: #000066;
        }

        TD.medbluerow {
        height: .0005pc;
        background-color: #6699CC;
        }   

    p.MsoNormal
    {margin-top:0in;
    margin-right:0in;
    margin-bottom:10.0pt;
    margin-left:0in;
    line-height:115%;
    font-size:11.0pt;
    font-family:"Calibri","sans-serif";
    }

    </style>  

</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

        <!-- -------------------------->
        <!-- start outer table, rounded corners --> 
        <!-- -------------------------->
        <table style="width: 95%;" align="center" cellpadding="0" cellspacing="0" border="0">
        <tr>
            <td width="8" height="11" bgcolor="#ffffff"><img src="images/ccbackground/HLEFT.jpg" alt=""/></td>
            <td bgcolor="#ffffff" background="images/ccbackground/TOPbg.jpg"><img src="images/ccbackground/TOPbg.jpg" alt=""/></td>
            <td width="8" height="11" bgcolor="#ffffff"><img src="images/ccbackground/HRIGHT.jpg" alt=""/></td>
        </tr>
        <tr>
            <td width="8" background="images/ccbackground/LEFTbg.jpg"><img src="images/ccbackground/LEFTbg.jpg" alt=""/></td>        
            <td align="center" height="800" valign="top" bgcolor="white" >
            <div>
                <asp:Label ID="lblTopHeading" runat="server" Font-Bold="true"  Font-Size="X-Large" Text="<%$Resources:share,lblTopHeading %>" EnableViewState="false"></asp:Label>
            </div>
            <!-- -------------------------->
            <!-- begin main page content --> 
            <!-- -------------------------->
            <asp:UpdatePanel ID="tryUP" runat="server">
                <ContentTemplate>
                    <table width="100%" align="center" style="font-size:14px; font-family:Verdana,Arial;">
                        <tr align="center">
                            <td align="center" >
                                <br />
                                <ucBanner:Banner ID="bannerStrip" runat="server"></ucBanner:Banner>
                                <asp:LinkButton ID="LinkButton1" Text="English" Visible="false" runat="server" onclick="LinkButton1_Click"></asp:LinkButton><br />
                                <asp:Label ID="Label22" runat="server" Font-Size="Small" Text="<%$Resources:share,lblpartstatement %>" EnableViewState="false"></asp:Label>
                                <br />           
                                <asp:LinkButton ID="LinkButton2" Text="<%$Resources:share,lblPartsList %>" Visible="true" runat="server" ></asp:LinkButton>  
                                <br />
                            </td>
                        </tr>
                        <tr>
                            <td style="font-size:10px; padding-left:130px;">
                                <asp:Label ID="lblInitialHeading" runat="server" Font-Bold="true" Text="" EnableViewState="false"></asp:Label>
                            </td>
                            <td align="center" valign="top">
                                <asp:Label ID="Label1" runat="server" Font-Bold="true" Font-Size="Large" Text=""></asp:Label>
                            </td>
                        </tr>

                        <tr align="center">
                            <td align="center">
                                <div id="Div1" class="example1" runat="server" visible="true" >
                                    <a href="javascript:window.close();" style="color:Red; float:right">
                                        <span>
                                            <asp:Label ID="lblClose" Font-Names="Verdana" Font-Size="Medium" runat="server" Text="<%$ Resources:share,lblClose %>"></asp:Label>
                                        </span>
                                    </a>
                                </div>
                            </td>
                         </tr>

                        <tr align="center">
                            <td align="center" valign="top" style="font-size:16px; font-family:Verdana,Tahoma; font-weight:bold">
                                <div id="divButtons" runat="server" visible="true" >
                                    <asp:Label ID="lblPAtypeheading" runat="server"  Font-Names="Verdana" Text="<%$ Resources:share,lblPAtypeheading %>"></asp:Label>&nbsp;<asp:Label ID="lblPAtype" Font-Names="Verdana"  runat="server" Font-Underline="true" Text=""></asp:Label>
                                </div>
                            </td>
                        </tr>                    
                    </table>

                   <br />
                   <div id="divPAnotrequired" runat="server" visible="false">
                        <asp:Label ID="lblNotRequired" runat="server" Font-Names="Verdana" Text="<%$Resources:share,lblPANotRequired %>" EnableViewState="false"></asp:Label>
                        <br />
                   </div>

                <div id="divRADnotrequired" runat="server" visible="false">
                    <asp:Label ID="Label5" runat="server" Font-Names="Verdana" Text="<%$Resources:share,lblRADNotRequired %>" EnableViewState="false"></asp:Label>
                    <br />
                </div>

                <div id="divCHMSLnotrequired" runat="server" visible="false">
                    <asp:Label ID="Label7" runat="server" Font-Names="Verdana" Text="<%$Resources:share,lblCHMSLNotRequired %>" EnableViewState="false"></asp:Label>
                    <br />
                </div>

                <div id="divTaurusRearLampNotRequired" runat="server" visible="false">
                    <asp:Label ID="Label11" runat="server" Font-Names="Verdana" Text="<%$Resources:share,lblTaurusRearLampNotRequired %>" EnableViewState="false"></asp:Label>
                    <br />
                </div>

                <div id="divRangerChatterNotRequired" runat="server" visible="false">
                    <asp:Label ID="Label15" runat="server" Font-Names="Verdana" Text="<%$Resources:share,lblRangerChatterNotRequired %>" EnableViewState="false"></asp:Label>
                    <br />
                </div>

           <div id="divFlexSqueakNotRequired" runat="server" visible="false">
                <asp:Label ID="Label16" runat="server" Font-Names="Verdana" Text="<%$Resources:share,lblFlexSqueakNotRequired %>" EnableViewState="false"></asp:Label>
                <br />
           </div>
           <div id="divEscapeNoiseNotRequired" runat="server" visible="false">
                <asp:Label ID="Label17" runat="server" Font-Names="Verdana" Text="<%$Resources:share,lblEscapeNoiseNotRequired %>" EnableViewState="false"></asp:Label>
                <br />
            </div>
           <div id="divFiestaGlassNotRequired" runat="server" visible="false">
                <asp:Label ID="Label18" runat="server" Font-Names="Verdana" Text="<%$Resources:share,lblFiestaGlassNotRequired %>" EnableViewState="false"></asp:Label>
                <br />
           </div>
            <div id="divScratchesNotRequired" runat="server" visible="false">
                <asp:Label ID="Label20" runat="server" Font-Names="Verdana" Text="<%$Resources:share,lblScratchesNotRequired %>" EnableViewState="false"></asp:Label>
                <br />
           </div>
           <div id="divCostCap" runat="server" visible="false">
                <asp:Label ID="lblCostCap" runat="server" Font-Size="Medium" Font-Names="Verdana"  ForeColor="IndianRed" Font-Bold="true" Text="<%$Resources:share,lblCostCap %>" EnableViewState="false"></asp:Label>

                 <div id="closeButtonDiv" class="closeButton" runat="server" visible="true" >
                 </div>
           </div>

            <div id="divRadMileage" runat="server" visible="false">

                <div class="medBlueRow" style="width:700px; height:2px;"></div>

                <table width="90%" align="center" style="font-size:14px; font-family:Verdana,Arial;">
                    <tr>
                        <td style="font-size:16px; font-family:Verdana,Tahoma; font-weight:bold">
                            <asp:Label ID="Label4" runat="server" Font-Names="Verdana"  Text="<%$Resources:share,lblRadMileage %>" EnableViewState="false"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td align="center" style="font-size:12px; font-family:Verdana,Tahoma; font-weight:bold" height="125" valign="middle">                        
                            <asp:RadioButtonList ID="RadioButtonList1" runat="server" OnSelectedIndexChanged="btnIndexchange_Click" AutoPostBack="True">
                                <asp:ListItem Text="<%$Resources:share,lblYes %>" Value="yes"></asp:ListItem>
                                <asp:ListItem Text="<%$Resources:share,lblNo %>" Value="no"></asp:ListItem>
                            </asp:RadioButtonList>             
                            <br />                       
                            &nbsp;<asp:Button ID="Button1" runat="server" Visible="false" Text="<%$Resources:share,btnDslParts %>" />
                            <br /><br />
                        </td>
                    </tr>
                </table>

            </div>

            <div id="divCHMSL" runat="server" visible="false">

                <table width="90%" align="center" style="font-size:14px; font-family:Verdana,Arial;">
                    <tr>
                        <td style="font-size:16px; font-family:Verdana,Tahoma; font-weight:bold">
                            <asp:Label ID="Label6" runat="server" Font-Names="Verdana"  Text="<%$Resources:share,lblCHMSL %>" EnableViewState="false"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td align="center" style="font-size:12px; font-family:Verdana,Tahoma; font-weight:bold" valign="middle">

                            <asp:RadioButtonList ID="RadioButtonList2" runat="server"  OnSelectedIndexChanged="btnIndexchangeCHMSL_Click" AutoPostBack="True">
                                <asp:ListItem Text="<%$Resources:share,lblCHMSLYes %>" Value="yes"></asp:ListItem>
                                <asp:ListItem Text="<%$Resources:share,lblCHMSLNo %>" Value="no"></asp:ListItem>
                            </asp:RadioButtonList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:32:40.787

找到解决方案：找到问题。

表单正在执行请求。表单，并且所有值都返回 NULL。

我只是把它改成`formfield.value`了`request.form("FormField")`

这解决了这个问题。

对于最初的问题是什么，我们很抱歉。

# matlab - 更新输入数据 MatLAB

> ID：12054886
> 
> 赞同：0
> 
> 时间：2012-08-21T12:30:41.583
> 
> 标签：matlab, loops, import-from-excel

我有一个 GUI，它从 *.xls 文件中导入数据并绘制图形。我不能做的最后一件事是数据刷新，因为我的 xls 文件每 15 秒更新一次。我希望我的 GUI 每 20 秒更新一次输入数据。我怎样才能做到这一点？而且我还想要一个能够暂停/运行数据更新的按钮。

```
 function viewSTUEP
global hPlot hChoice raw
  handles.F = figure('Name','viewSTUEP', 'Position',[100 20 900 550], ...
    'Color',[0.8 0.8 0.8], 'NumberTitle','off', 'Resize','off');
   uicontrol('Style','pushbutton', 'Position',[690 510 94 30], ...
    'FontSize',12, 'String','Load', 'Callback',@LoadData);
   uicontrol('Style','pushbutton', 'Position',[790 510 94 30], ...
    'FontSize',12, 'String','Save plot', 'Callback',@SaveAs);
  uicontrol('Style', 'pushbutton', 'Position', [690 475 94 30], ...
    'FontSize',12, 'String','Update', 'Callback',@UpdatePlot);
  uicontrol('Style','pushbutton', 'Position',[790 475 94 30], ...
    'FontSize',12, 'String','Close', 'Callback',{@Close,handles});
  set(handles.F, 'CloseRequestFcn', {@Close,handles})
  set(gcf, 'Toolbar', 'figure');
  clear raw, raw(1,:) = {''};
  hPlot = axes('Position',[0.06 0.08 0.68 0.9], 'Visible','on');
  uicontrol('Style','text', 'Position',[690 432 130 35], ...
    'BackgroundColor',[0.8 0.8 0.8], 'FontSize',12, ...
    'HorizontalAlignment','left', 'String','Columns for plot:');
  hChoice = uicontrol('Style','listbox', 'Position',[690 420 204 22], ...
    'FontSize',12, 'String',raw(1,:), 'Min',1, 'Max',1);

function Close(hObject, eventdata, handles)
delete(handles.F);

function LoadData(hObject, eventdata)
global hChoice raw xdat
  [fname, pname] = uigetfile('*.xls','Select a data file');
  if fname ~= 0
    filename = strcat(pname, fname);
    [numeric,text,raw] = xlsread(filename);
    num = length(raw(1,:));
    if (num > 21) num = 21; end
    posY = 442 - (20*num);
    set(hChoice, 'String',raw(1,:));
    set(hChoice, 'Max',num);
    set(hChoice, 'Position',[690 posY 204 (20*num)]);
    xdat = datenum(0,0,0,0,0,cell2mat(raw(2:end,6)));
  end

function UpdatePlot(hObject, eventdata)
global hPlot hChoice raw xdat
  if ~isempty(raw)
    cols = get(hChoice,'Value'); 
    plot(hPlot, xdat,cell2mat(raw(2:end,cols(1))), 'LineWidth',2), datetick('x','HH:MM')
    grid on
    if (length(cols) > 1)
      colors = 'brgcmyk'; c = 2;
      hold(hPlot, 'on')
      for k = cols(2:end)
        plot(hPlot, xdat,cell2mat(raw(2:end,k)),colors(c),'LineWidth',2)
        c = c+1; if (c > 7) c = 1; end
      end
      hold(hPlot, 'off')
    end
    legend(hPlot, raw(1,cols), 'Interpreter','none','Location','SouthEast')
    xlabel(hPlot, 'Time in minutes:');
    ylabel(hPlot, 'Temperature in C:');
  end 

 function SaveAs(hObject, eventdata, handles)
         [Save,savename] = uiputfile('*.eps','Save plot as: ')
         fname=fullfile(savename,Save);
         print('-depsc','-r300','-noui',fname) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:43:11.427

我认为您应该使用计时器对象-[请参见此处](http://www.mathworks.de/help/techdoc/matlab_prog/f9-38055.html)

# excel - Excel 2007 - 工作表之间的宏复制和粘贴，到新行

> ID：12054891
> 
> 赞同：2
> 
> 时间：2012-08-21T12:31:08.527
> 
> 标签：excel, copy, excel-2007, vba

我正在使用 Excel 2007，我正在尝试在 2 个不同的工作表之间创建一个宏。

我正在尝试复制单元格并将它们粘贴到工作表 2 中。我意识到这很简单，但这是我的问题 - 我希望每次运行宏时，它都可以将值复制到工作表 2 的新行中。

*例如：*
数据示例： 行标题：(a1) Month, (b1) 1, (c1) 2, (d2) 3\. Data :(a1) July-12, (b2) 2, (c2) 5, ( d2) 1 数据：(a1) Aug-12，(b2) 1，(c2) 4，(d2) 2。

要复制的位置。行标题：(a1) 月份，(b1) 值 1，(c1) 值 2，(d2) 值 3。

我以前从未使用过 VB，我习惯于在 Excel 上使用论坛。
我尝试了以下方法： Range("A1:A2").Select Selection.Copy Range("C4").Select ActiveSheet.Paste

我正在尝试自动化我的电子表格，而不必从一个工作表中记下一个数字，然后将其写入另一个工作表。

我不确定我是否在自己的脑海中过度复杂化了事情，或者这是否更复杂..

非常感谢所有回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:04:05.327

我可能很晚了，但在这里你可以找到 Sheet2 的最后一行

```
Lrow=ThisWorkbook.Sheets("Sheet2").Cells(65536,).end(Xlup).Row 
```

找到最后一行后，您可以将范围粘贴到最后一行之后的下一行，方法是将其增加 1，如下所示。

```
Range("A1:A2").Select 
Selection.Copy Range("C" & Lrow+1).Select ActiveSheet.Paste 
```

希望这可以帮助！

# javascript - 如何使用javascript获取两个变量的最大值

> ID：12054897
> 
> 赞同：1
> 
> 时间：2012-08-21T12:31:18.567
> 
> 标签：javascript

我有两个变量名称`var h1`，`var h2` 每个变量都有一些数字。我想为另一个变量获得最高值

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-21T12:33:29.010

试试这个以获得最大值：

```
var result = Math.max(h1,h2) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-21T12:33:18.697

```
var highestNum = h1 > h2 ? h1: h2; 
```

或者如果你不喜欢三级语句：

```
var highestNum;
if (h1 > h2) { 
    highestNum = h1;
} else {
    highestNum = h2;
} 
```

编辑：有趣的是，if-else 语句的运行速度似乎比 Math.max 快得多（在 Chrome 21 上）

[http://jsperf.com/jbabey-math-max](http://jsperf.com/jbabey-math-max)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-21T12:32:31.100

```
h1>h2?h1:h2 
```

为什么需要 jQuery？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-21T12:35:01.710

~~花哨的方式~~ **应该这样做的唯一方法**：

```
var otherVar = Math.max(h1,h2); 
```

很长的路要走 ：

```
var otherVar=0;
if(h1 >= h2)
{
    otherVar = h1;
}
else
{
    otherVar = h2;
} 
```

只有 Javascript，没有 jQuery。

# servlets - Guice、Peaberry 和 ServletModule

> ID：12054898
> 
> 赞同：1
> 
> 时间：2012-08-21T12:31:21.520
> 
> 标签：servlets, osgi, guice, guice-servlet, peaberry

我在让 Peaberry/Guice/OSGi/Servlets 放置好时遇到问题。首先，我一直在将基于 Jetty、WAR 部署的 webapp 迁移到 OSGi 以利用插件架构。我原来的应用程序到处都在使用 guice。

我已将所有内容分解为模块并使用 Maven 进行构建。除了 ServletModule 的烦人安装之外，一切似乎都在工作。

当我尝试安装 ServletModule 时收到以下异常：

```
java.lang.NoClassDefFoundError: com/google/inject/internal/util/$Preconditions
    at com.google.inject.servlet.ServletModule.configure(ServletModule.java:44)
at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
at com.google.inject.AbstractModule.install(AbstractModule.java:118)
at com.payplum.CoreActivator$CoreImportModule.configure(CoreActivator.java:145)
at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
at com.google.inject.spi.Elements.getElements(Elements.java:101)
at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:133)
at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:103)
at com.google.inject.Guice.createInjector(Guice.java:95)
at com.google.inject.Guice.createInjector(Guice.java:72)
at com.google.inject.Guice.createInjector(Guice.java:62)
at com.payplum.CoreActivator.start(CoreActivator.java:53)
at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:645) 
```

所以我不太清楚为什么找不到这些捆绑包。我已经添加了 guice-servlet 依赖项，并验证了它是否正在我部署的包中。

我想另一个重要的部分是注册 GuiceFilter。我使用 ServiceTracker 来获取 ExtHttpService，因为我使用的是 Jetty。当该 Tracker 返回时，我使用典型调用添加注册它

```
service.registerFilter( this.guiceFilter, "/*", null, 0, null ); 
```

这似乎工作正常。我真的很难让这些东西正常工作，而且我有点夹在 Guice/OSGi/Peaberry 部分之间。任何帮助深表感谢。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:53:08.247

异常意味着您在类路径中缺少一个类，因此您要么缺少一个 jar，要么其中一个 jar（令人惊讶）不包含其所需的类。检查包含在最终战争文件中的 JAR，例如使用 ' `jar -tf thejar.jar`' 检查它们是否包含 $Preconditions 类。

# android - Android .apk 文件可以安装在普通的 Linux PC 上吗？

> ID：12054900
> 
> 赞同：1
> 
> 时间：2012-08-21T12:31:27.543
> 
> 标签：android, linux, linux-kernel, dalvik

`.apk`是否可以在 linux PC中安装文件？不在模拟器中

我问这个问题是因为 Android 操作系统以 linux 内核为基础。如果您想查看 Android 架构，请[单击此处](http://www.android-app-market.com/android-architecture.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:34:56.360

> apk 文件中包含的元素经过专门设计并指定用于 Android 手机，而不是运行 Linux 的台式电脑。尽管 Android 使用的是 Linux 内核，但您绝对不能在 Linux 机器上运行 apk 文件，就像运行 rpm 或 deb 文件一样。
> 
> 如果您真的想从计算机上运行 Android 操作系统，请在您的 PC 上安装它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:17:10.720

不。

Android 手机确实有 linux 内核，但那是非常非常底层的内核。Android 有许多其他实用程序可以打开和使用 .apk 文件。

这是Android“构建”的有用图片。这是谷歌制作的。链接：http: [//upload.wikimedia.org/wikipedia/commons/a/af/Android-System-Architecture.svg](http://upload.wikimedia.org/wikipedia/commons/a/af/Android-System-Architecture.svg)

这可以更详细地说明您的要求以及更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:38:59.820

不。.apk 文件只是源文件和资源文件的集合，无论在哪个平台上，它们都不能单独执行。Android 操作系统将它们放在一起，以便您最终可以运行它们。话虽如此，当然有一种方法可以在 Linux 上运行 apk。它被称为 AVD（Android 虚拟设备）。这是一个模拟器，可通过 SDK 获得。

# c# - 在 Word 文档中搜索关键字并将其编入索引

> ID：12054902
> 
> 赞同：1
> 
> 时间：2012-08-21T12:31:36.013
> 
> 标签：c#, search, indexing, ms-word

我正在寻找一种在 Word 文档中搜索并显示与搜索条件匹配的文档结果的方法。我将尝试在此处更详细地描述该场景。

在 Windows 系统上，我有一堆文件夹。每个文件夹都有很多 Word 文档。现在我需要一个应用程序，它可以在特定文件夹中搜索可能出现在这些 word 文档中的关键字。类似于 MySQL 的**FULLTEXT**搜索。

因此，如果我搜索以下关键字：`microsoft, windows XP`那么我希望它列出包含一个或多个这些关键字的每个 Word 文档。

当然，这些关键字出现的文档越多，它在结果列表中的排名就应该越高。

现在我的问题是，是否有这样的工具可以做到这一点？还是我自己在 C#.NET 中编写这样的工具更好？如果是这样，我必须查看哪些 API？

PS。它们是`.doc`和`.docx`文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:35:47.593

看起来你需要一个成熟的搜索引擎，包括解析、索引、排名、搜索等。自己实现它可能不是很愉快……你可以看看[Apache Lucene](http://lucene.apache.org/core/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:38:10.727

在你的鼻子下面有一个工具。它是 Windows Search [，它有一个 API](http://msdn.microsoft.com/en-us/library/aa965362%28v=vs.85%29.aspx)可以完美地满足您的需求。

如果您没有安装 Office ，您可能必须安装[过滤器包](http://www.microsoft.com/en-us/download/details.aspx?id=17062)以提供特定于 Office 的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:39:26.483

索引在 Windows 中可用，并且可以处理 Word 文档：

*   [http://windows.microsoft.com/en-US/windows7/Improve-Windows-searches-using-the-index-frequently-asked-questions](http://windows.microsoft.com/en-US/windows7/Improve-Windows-searches-using-the-index-frequently-asked-questions)
*   [在 C# 中进行 Windows 高亮搜索](https://stackoverflow.com/questions/808779/make-a-windows-highlight-search-in-c-sharp)

如果要建立自己的索引，可以使用 IFilters 从文档中提取文本：[How to extract text from MS office documents in C#](https://stackoverflow.com/questions/1011234/how-to-extract-text-from-ms-office-documents-in-c-sharp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-26T08:50:11.367

您可以尝试*Microsoft Store上提供的***SmartFinder** APP 。

 *它是使用 Java 和**Apache Lucene**库开发的。

您可以搜索文本并立即获取文档**摘录，并在结果中****突出显示搜索的单词**。您可以使用**元数据（作者、关键字、出版商等）****优化**搜索，也可以使用**通配符**进行搜索（例如使用 * 或 ? 特殊字符）。

 ****这是下载 APP 的 Microsoft Store 链接：[https ://www.microsoft.com/store/apps/9PD0BCV3WKD1](https://www.microsoft.com/store/apps/9PD0BCV3WKD1)

[![在此处输入图像描述](../Images/4cde3203c93106c361c8a74866699978.png)](https://i.stack.imgur.com/URDCk.jpg)*****

# android - 在 android 中查看 facebook 时间线

> ID：12054903
> 
> 赞同：0
> 
> 时间：2012-08-21T12:31:36.747
> 
> 标签：android, android-view

我是安卓新手。我正在创建一个应用程序，其中笔记应出现在时间轴中，就像 facebook 一样。请帮助我如何创建这样的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:33:26.793

使用带有自定义适配器的[列表视图。](http://developer.android.com/reference/android/widget/ListView.html)

自定义适配器应该扩展[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)，并在[getView](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)方法中为每个列表项[膨胀一个视图。](https://stackoverflow.com/a/3477643/492561)请务必检查此[技术](https://stackoverflow.com/a/11840582/492561)以防止内存不足错误

在适配器中有允许您添加更多数据的方法。然后在更新数据时调用[notifyDataSetChanged](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)来更新视图。

# javascript - 使用参数列表调用表单提交上的方法

> ID：12054905
> 
> 赞同：-2
> 
> 时间：2012-08-21T12:31:47.677
> 
> 标签：javascript, jquery, html

我正在捕获表单提交事件并将 div 添加到 DOM，代码[http://jsfiddle.net/testtracker/7rkX4/7/](http://jsfiddle.net/testtracker/7rkX4/7/) 现在我想将一些参数传递给函数，如评论者的姓名、添加时间评论等.我希望它是这样的。

**html**

```
<form onsubmit="addComment('john deo','post_id')">
    <input ......>
    <input ......>
</form> 
```

**javascript**

```
function addComment(commenter_name,post_id){
  perform operation....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:40:49.427

您发布的代码工作正常。它在 jsfiddle 中不起作用的原因是因为`document.ready`默认情况下您的函数是在一种块中声明的（请参阅`onLoad`左侧下拉列表中的？）

绑定事件处理程序的正确方法是在 javascript 中绑定它们。这将避免范围问题。

如果您需要让内联事件处理程序正常工作，您可以将您的函数显式定义为全局：

```
window.addComment = function (commenter_name,post_id){
    perform operation....
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:53:09.453

例如，您可以将评论者的姓名存储在 html 中。

试试这个（见演示：http: [//jsfiddle.net/7rkX4/8/](http://jsfiddle.net/7rkX4/8/)）。

**HTML**

```
<div class="post">
  <ul class="comments"></ul>

  <div class="comment_entry">
    <form method="post" action="#">
      <input type="hidden" name="name" value="Neha" />
      <input type="text" name="comment" placeholder="Leave comment" />
      <input type="submit" value="submit" />
    </form>
  </div>
</div>

<div class="post">
  <ul class="comments"></ul>

  <div class="comment_entry">
    <form method="post" action="#">
      <input type="hidden" name="name" value="Danil" />
      <input type="text"  name="comment" placeholder="Leave comment" />
      <input type="submit" value="submit" />
    </form>
  </div>
</div>​ 
```

**JavaScript**

```
$(document).ready(function () {
  $('.comment_entry form').submit(function (e) {
    e.preventDefault();

    var name = $('input[name="name"]', this).val();
    var comment = $('input[name="comment"]', this).val();

    $(this).parent().prev().append('<li><a class="commenter_name" href="/">' + name + '</a><br />' + comment + '</li>');
  });
});​ 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-21T12:34:43.383

如果我理解正确，您想在提交时向表单添加一些变量值对。为什么不使用 向表单添加一些输入字段`type="hidden"`，然后您可以根据需要在 javascript 代码中修改它们的值。

# opencv - OpenCV VideoWriter won't write anything, although cvWriteToAVI does

> ID：12054907
> 
> 赞同：5
> 
> 时间：2012-08-21T12:31:50.777
> 
> 标签：opencv, video-capture

I'm been trying to capture video from a cam and write it into an AVI file. I'm using Qt 4.8.2 with MSVC 2010 (x86) on Windows 7\. I have 2 versions of the code: one using cv::Mat and the other using IplImage*. However, only the IplImage* version is working. Here's my code using cv::Mat:

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;

int main() {
    VideoCapture* capture2 = new VideoCapture( CV_CAP_DSHOW );
    Size size2 = Size(640,480);
    int codec = CV_FOURCC('M', 'J', 'P', 'G');
    VideoWriter* writer2 = new VideoWriter("video.avi",codec,15,size2);

    int a = 100;
    Mat frame2;
    while ( a > 0 ) {
        capture2->read(frame2);
        writer2->write(frame2);
        a--;
    }

    writer2->release();
    capture2->release();
    return 0;
} 
```

And here's the code using IplImage*:

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

int main() {
    CvCapture* capture = cvCaptureFromCAM( CV_CAP_DSHOW );
    CvSize size = cvSize(640,480);
    int codec = CV_FOURCC('M', 'J', 'P', 'G');
    CvVideoWriter* writer = cvCreateVideoWriter("video.avi",codec,15,size);

    int a = 100;
    while ( a > 0 ) {
        IplImage* frame = cvQueryFrame( capture );
        cvWriteToAVI(writer,frame);
        a--;
    }

    cvReleaseVideoWriter(&writer);
    cvReleaseCapture( &capture );
    return 0;
} 
```

It's basically the same, or at least it looks like the same thing to me. It reads 100 frames and should write them into "video.avi". It compiles and runs without errors, but the cv::Mat version doesn't write anything, and the IplImage* version works perfectly.

Does someone have any idea on what's going on?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T17:23:24.190

The syntax in Opencv C++ reference is bit different, and here is a working code in C++. I Just added imshow and waitkey, for checking you can remove them if you want.

```
int main()
{
    VideoCapture* capture2 = new VideoCapture(CV_CAP_DSHOW);
    Size size2 = Size(640, 480);
    int codec = CV_FOURCC('M', 'J', 'P', 'G');
    // Unlike in C, here we use an object of the class VideoWriter//
    VideoWriter writer2("video_.avi", codec, 15.0, size2, true);

    writer2.open("video_.avi", codec, 15.0, size2, true);
    if (writer2.isOpened())
    {
        int a = 100;
        Mat frame2;
        while (a > 0)
        {
            capture2->read(frame2);
            imshow("live", frame2);
            waitKey(100);
            writer2.write(frame2);
            a--;
        }
    }
    else
    {
        cout << "ERROR while opening" << endl;
    }

    // No Need to release the Writer as the distructor will called automatically
    capture2->release();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T16:01:05.513

I had the same problem over and over again, and none of the solutions I found online helped.

Strange enough, the problem (identified purely with a trial and error method) was with the write permission. Everything worked after I `sudo chmod u+rwx` the python script.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-18T09:33:08.727

I have the same problem and after a few time i realize that the input video isn't the same size with the output. Resize the input video may help u.

```
 capture2->read(frame2);
 cv::resize(frame2,frame2,cv::Size(640,480);
 writer2->write(frame2); 
```

# c# - 如何在 PictureBox 内平移图像

> ID：12054918
> 
> 赞同：7
> 
> 时间：2012-08-21T12:32:32.380
> 
> 标签：c#, winforms, mouseevent, picturebox, pan

我有一个`PictureBox`可以使用`MouseWheel`事件放大的自定义。现在我想为它添加一个平移功能。我的意思是当 PictureBox 处于缩放状态时，如果用户左键单击并按住单击然后移动鼠标，则图像将在图片框内平移。

这是我的代码，但不幸的是它不起作用！我已经不知道去哪里找了...

```
private Point _panStartingPoint = Point.Empty;
private bool _panIsActive;

private void CurveBox_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        Focus();
        _panIsActive = true;
        _panStartingPoint = e.Location;
    }
}

private void CurveBox_MouseUp(object sender, MouseEventArgs e)
{
    _panIsActive = false;
}

private void CurveBox_MouseLeave(object sender, EventArgs e)
{
    _panIsActive = false;

}

private void CurveBox_MouseMove(object sender, MouseEventArgs e)
{
    if(_panIsActive && IsZoomed)
    {
        var g = CreateGraphics(); //Create graphics from PictureBox

        var nx = _panStartingPoint.X + e.X;
        var ny = _panStartingPoint.Y + e.Y;
        var sourceRectangle = new Rectangle(nx, ny, Image.Width, Image.Height);
        g.DrawImage(Image, nx, ny, sourceRectangle, GraphicsUnit.Pixel);
    }
} 
```

我怀疑该`MouseMove`事件...我不确定此事件中是否发生任何事情和/或`nx`是否`ny`包含正确的点。

任何帮助/提示都非常有用！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T16:16:32.913

我认为数学是倒退的。试试这样：

```
private Point startingPoint = Point.Empty;
private Point movingPoint = Point.Empty;
private bool panning = false;

void pictureBox1_MouseDown(object sender, MouseEventArgs e) {
  panning = true;
  startingPoint = new Point(e.Location.X - movingPoint.X,
                            e.Location.Y - movingPoint.Y);
}

void pictureBox1_MouseUp(object sender, MouseEventArgs e) {
  panning = false;
}

void pictureBox1_MouseMove(object sender, MouseEventArgs e) {
  if (panning) {
    movingPoint = new Point(e.Location.X - startingPoint.X, 
                            e.Location.Y - startingPoint.Y);
    pictureBox1.Invalidate();
  }
}

void pictureBox1_Paint(object sender, PaintEventArgs e) {
  e.Graphics.Clear(Color.White);
  e.Graphics.DrawImage(Image, movingPoint);
} 
```

您没有处理您的图形对象，并且 CreateGraphics 无论如何只是一个临时绘图（最小化会删除它）所以我将绘图代码移动到 Paint 事件并且只是在用户平移时失效。

# c++ - 非侵入性多态性

> ID：12054920
> 
> 赞同：4
> 
> 时间：2012-08-21T12:32:45.580
> 
> 标签：c++, polymorphism

一个简单的 C++ 问题：是否可以根据指针的运行时类型调用一个函数或另一个函数？

例如，我有一个 A 类，B 类是 A 的孩子。

我想写一个函数 f 这样

```
f(A* a)
{//do something
}
f(B* b)
{//do something else
}

//call f()
A* a = new A();
A* b = new B();
f(a);//do something
f(b);//do something, but I'd like it to "do something else" 
```

附加精度：A 和 B 是在我的代码中定义和实例化的，所以我不能在 A 和 B 上使用带有虚函数的常规多态性......

我知道你可以使用一些 RTTI，但有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T12:34:06.547

有了这些约束（不能修改类），并且不使用 RTTI，不。

您可以使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)、包装`A`和`B`在其他一些类中并将`f`它们作为参数，但这似乎有点过头了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T12:39:02.570

您可以使用以下方法实现`dynamic_cast`：

```
f(A* a)
{
B* b = dynamic_cast<B*>(a);
if (b == nullptr)
//do something
else
//do something else
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:36:56.547

这与多态无关。`f(A*)`并且`f(B*)`不是相同的功能，它们只是碰巧具有相同的标识符。编译器将选择使用哪一个。如果没有某种 RTTI，您将无法在 C++ 中执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:51:10.653

如果我正确理解了您的问题，那么您正在寻找[multimethods](http://en.wikipedia.org/wiki/Multiple_dispatch)。尽管有一个由 Bjarne Stroustrup 编写的实验性扩展，但 C++ 不提供多方法作为语言特性。您可以使用访客模式作为解决方法。关于 C++ 中的多方法的一篇非常详细的文章：[C++ 中的多方法：找到完整的解决方案](http://www.codeproject.com/Articles/7360/MultiMethods-in-C-Finding-a-complete-solution)

# node.js - nodejs-模块中的回调不起作用

> ID：12054921
> 
> 赞同：3
> 
> 时间：2012-08-21T12:32:51.840
> 
> 标签：node.js

我正在 nodejs 模块中执行数据库连接。但是它的回调没有被调用。

这是我的模块-

*getChapterList.js

```
var mysql=require('mysql');
var client=mysql.createClient({
    user:'mysql',
    password:''
});
client.useDatabase('test');
module.exports.get_chapter_list = function(subject_id){

    client.query("select distinct chapter_id from course_associations where subject_id="+subject_id+" and status_id=1",
            function(err,results,fields){
                    return results;
    });
  return "hello";
}; 
```

现在我将此模块称为-

```
rs=require('./getChapterList');

rs.get_chapter_list(1);

// Output: hello 
```

但预期的 o/p 是结果数组。

google了很多..但没有结果..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:01:04.260

查询完成后将调用回调，并将结果的返回值传递回创建回调的方法，然后将其丢弃。

输出是“hello”的原因是因为这就是`get_chapter_list`函数返回的内容。

会发生什么：

1.  你调用`get_chapter_list`函数
2.  `client.query`触发对数据库的请求
3.  `client.query`函数返回。
4.  该`get_chapter_list`函数返回“你好”。
5.  SQL 查询完成并调用回调
6.  您的回调方法被调用并且什么都不做（它只是返回结果，但是该返回值被传回给回调的调用者（在某个地方`client.query`）丢弃它）。

为了得到你想要的，你可能需要异步思考。

将方法定义为

```
module.exports.get_chapter_list = function(subject_id, callback){
  client.query("select distinct chapter_id from course_associations where subject_id="+subject_id+" and status_id=1",
    function(err,results,fields){
      // doesn't contain any error handling
      callback(results);
  });
}; 
```

然后调用方法：

```
rs.get_chapter_list(1, function(results) {
   console.log(results); // or whatever you need to do with the results
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T12:57:22.513

您需要异步返回结果：

```
exports.get_chapter_list = function(subject_id, callback) {
    client.query("select ...", callback);
};

...

var rs = require('./getChapterList');

rs.get_chapter_list(1, function(err, results) {
    if (err) {
        // handle error
    } else {
        // do something with results
        console.log(results);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:13:01.333

scttnlsn 的答案是正确的，因为我遇到了这个问题并通过将回调函数作为参数传递来解决。

试试看：

```
var mysql=require('mysql');
var client=mysql.createClient({
  user:'mysql',
  password:''
});
client.useDatabase('test');
module.exports.get_chapter_list = function(subject_id, callback){
  client.query("select distinct chapter_id from course_associations where subject_id="+subject_id+" and status_id=1",
        function(err,results,fields){
                callback( results );
});
return "hello";
}; 
```

接着

```
var rs = require('./getChapterList');

rs.get_chapter_list(1, function(results) {
  console.log(results);
}
}); 
```

这将打印出期望的输出。

# sql-server - 在 Entity Framework Code-First Initializer 中设置数据库排序规则

> ID：12054930
> 
> 赞同：23
> 
> 时间：2012-08-21T12:33:30.663
> 
> 标签：sql-server, entity-framework-4.1, ef-code-first

当 Entity Framework Code First 创建数据库时，我想为数据库设置默认排序规则。

我尝试了以下方法：

```
public class TestInitializer<T> : DropCreateDatabaseAlways<T> where T: DbContext
{
    protected override void Seed(T context)
    {
        context.Database.ExecuteSqlCommand("ALTER DATABASE [Test] SET SINGLE_USER WITH ROLLBACK IMMEDIATE");
        context.Database.ExecuteSqlCommand("ALTER DATABASE [Test] COLLATE Latin1_General_CI_AS");
        context.Database.ExecuteSqlCommand("ALTER DATABASE [Test] SET MULTI_USER");
    }
} 
```

*当 SQL Server已*设置为相同的默认排序规则 Latin1_General_CI_AS时，这似乎运行正常。

但是，如果我指定*不同*的排序规则，比如 SQL_Latin1_General_CP1_CI_AS 这将失败并出现错误，

```
System.Data.SqlClient.SqlException: Resetting the connection results in a different 
state than the initial login. The login fails. 
```

谁能告诉我如何设置排序规则？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-03-03T10:41:27.460

## 使用命令拦截器的解决方案

这绝对是可能的，尽管它有点小技巧。您可以使用命令拦截器更改 CREATE DATABASE 命令。Il 将拦截发送到数据库的所有命令，根据正则表达式识别数据库创建命令，并使用您的排序规则更改命令文本。

### 创建数据库之前

```
DbInterception.Add(new CreateDatabaseCollationInterceptor("SQL_Romanian_Cp1250_CI_AS_KI_WI")); 
```

### 拦截器

```
public class CreateDatabaseCollationInterceptor : IDbCommandInterceptor
{
    private readonly string _collation;

    public CreateDatabaseCollationInterceptor(string collation)
    {
        _collation = collation;
    }

    public void NonQueryExecuted(DbCommand command, DbCommandInterceptionContext<int> interceptionContext) { }
    public void NonQueryExecuting(DbCommand command, DbCommandInterceptionContext<int> interceptionContext)
    {
        // Works for SQL Server
        if (Regex.IsMatch(command.CommandText, @"^create database \[.*]$"))
        {
            command.CommandText += " COLLATE " + _collation;
        }
    }
    public void ReaderExecuted(DbCommand command, DbCommandInterceptionContext<DbDataReader> interceptionContext) { }
    public void ReaderExecuting(DbCommand command, DbCommandInterceptionContext<DbDataReader> interceptionContext) { }
    public void ScalarExecuted(DbCommand command, DbCommandInterceptionContext<object> interceptionContext) { }
    public void ScalarExecuting(DbCommand command, DbCommandInterceptionContext<object> interceptionContext) { }
} 
```

### 评论

由于从一开始就使用正确的排序规则创建数据库，因此所有列将自动继承该排序规则，之后您不必更改它们。

请注意，它将影响应用程序域内发生的任何以后的数据库创建。因此，您可能希望在创建数据库后删除拦截器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-29T15:15:54.760

我能够通过自定义迁移 (EF6) 更改排序规则。我启用了自动迁移。您需要先删除您的数据库。

1.  `Add-Migration [YourCustomMigration]`通过在包管理器控制台中键入来创建迁移代码。（[代码优先迁移](https://msdn.microsoft.com/en-us/data/jj591621.aspx#sql)）
2.  第一步应该使用 Up() 覆盖中的当前模型创建代码创建您的迁移类。`ALTER DATABASE`在表创建代码之前添加您的代码，以便使用您想要的数据库排序规则创建它们。另外，请注意`suppressTransaction`标志：

`public override void Up() { Sql("ALTER DATABASE [YourDB] COLLATE [YourCollation]", suppressTransaction: true); [...Your DB Objects Creation codes here...] }`

`update-database`从那时起发出的每个命令都会创建一个新的迁移类。所有迁移代码都按顺序执行。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-21T10:04:05.723

我使用**EFCore** **2.1**的解决方案是从 SqlServerMigrationsSqlGenerator 派生并覆盖 Generate(SqlServerCreateDatabaseOperation, IModel, MigrationCommandListBuilder)

```
 internal class CustomSqlServerMigrationsSqlGenerator : SqlServerMigrationsSqlGenerator
    {
        internal const string DatabaseCollationName = "SQL_Latin1_General_CP1_CI_AI";

        public CustomSqlServerMigrationsSqlGenerator(
            MigrationsSqlGeneratorDependencies dependencies,
            IMigrationsAnnotationProvider migrationsAnnotations)
        : base(dependencies, migrationsAnnotations)
        {
        }

        protected override void Generate(
            SqlServerCreateDatabaseOperation operation,
            IModel model,
            MigrationCommandListBuilder builder)
        {
            base.Generate(operation, model, builder);

            if (DatabaseCollationName != null)
            {
                builder
                    .Append("ALTER DATABASE ")
                    .Append(Dependencies.SqlGenerationHelper.DelimitIdentifier(operation.Name))
                    .Append(" COLLATE ")
                    .Append(DatabaseCollationName)
                    .AppendLine(Dependencies.SqlGenerationHelper.StatementTerminator)
                    .EndCommand(suppressTransaction: true);
            }
        }
    }

    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
        base.OnConfiguring(optionsBuilder);
        optionsBuilder.ReplaceService<IMigrationsSqlGenerator, CustomSqlServerMigrationsSqlGenerator>();
    } 
```

然后通过替换 IMigrationsSqlGenerator 服务在 DbContext 中使用它

```
public class MyDbContext : DbContext
{
    //...

    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
        base.OnConfiguring(optionsBuilder);
        optionsBuilder.ReplaceService<IMigrationsSqlGenerator, CustomSqlServerMigrationsSqlGenerator>();
    }

    //...
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-06T15:00:30.903

前段时间我也遇到过同样的问题。可能的解决方案：

1.  似乎 EF 使用服务器默认排序规则创建数据库，因此您可以做的一件事就是更改它。
2.  您不能在`Seed()`方法中更改数据库排序规则，但可以更改表的各个列的排序规则（注意：没有表排序规则之类的东西，它确实与表中的列有关）。您必须分别更改每列的排序规则。
3.  如果您正在使用迁移，则可以在方法中更改表列排序规则`Up()`。

当您使用该`Seed()`方法时，我会在该方法中建议以下内容（根据需要进行修改）`Seed()`：

```
context.Database.ExecuteSqlCommand(
@"ALTER TABLE MyTable ALTER COLUMN MyColumn NVARCHAR(max) COLLATE MyCollation NOT NULL"); 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-05-18T09:58:48.117

我想解释一下为什么你不应该为此使用种子方法。如果在添加任何列后更改数据库排序规则，则存在`collation conflicts`如下风险

> 无法解决等于操作中“SQL_Latin1_General_CP1_CI_AS”和“Latin1_General_100_CI_AS”之间的排序规则冲突。

这是因为如果您更改数据库，`ALTER DATABASE [YourDb] COLLATE [YourCollation]`您只会更改数据库排序规则，而不是以前创建的列。

T-SQL 中的示例：

```
DECLARE @DBName nvarchar(50), @SQLString nvarchar(200)
SET @DBName = db_name();
SET @SQLString = 'ALTER DATABASE [' + @DBName + '] COLLATE Latin1_General_100_CI_AS'
EXEC(@SQLString)

/* Find Collation of SQL Server Database */
SELECT DATABASEPROPERTYEX(@DBName, 'Collation')
/* Find Collation of SQL Server Database Table Column */

SELECT name, collation_name
FROM sys.columns
WHERE OBJECT_ID IN (SELECT OBJECT_ID
FROM sys.objects
WHERE type = 'U'
AND name = 'AspNetUsers')
AND name = 'FirstName' 
```

[![在此处输入图像描述](../Images/fa798705ff77fe2b5e1f628166ebb7e3.png)](https://i.stack.imgur.com/gfVyw.png)

因此，您需要在添加任何列之前更改数据库排序规则或单独更改每一列。可能的解决方案：

1.  @MathieuRenda [https://stackoverflow.com/a/42576705/3850405](https://stackoverflow.com/a/42576705/3850405)

我会按照文档中的建议将其放入`DbInterception.Add`派生自`DbConfiguration`或 in`Application_Start`的类中。`Global.asax`笔记：`Wherever you put this code, be careful not to execute DbInterception.Add for the same interceptor more than once, or you'll get additional interceptor instances.`

```
public class ApplicationDbConfiguration: DbConfiguration
{
    public ApplicationDbConfiguration()
    {
        DbInterception.Add(new CreateDatabaseCollationInterceptor("Latin1_General_100_CI_AS"));
    }
} 
```

我也不会从接口继承，而是使用`DbCommandInterceptor`Microsoft 在他们的示例中所做的实现。

```
using System.Data.Common;
using System.Data.Entity.Infrastructure.Interception;
using System.Text.RegularExpressions;

namespace Application.Repositories.EntityFramework
{
    public class CreateDatabaseCollationInterceptor : DbCommandInterceptor
    {
        private readonly string _collation;

        public CreateDatabaseCollationInterceptor(string collation)
        {
            _collation = collation;
        }

        public override void NonQueryExecuting(DbCommand command, DbCommandInterceptionContext<int> interceptionContext)
        {
            // Works for SQL Server
            if (Regex.IsMatch(command.CommandText, @"^create database \[.*]$"))
            {
                command.CommandText += " COLLATE " + _collation;
            }
        }
    }
} 
```

更多信息在这里：[https ://docs.microsoft.com/en-us/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-与-the-entity-framework-in-an-asp-net-mvc-application](https://docs.microsoft.com/en-us/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application)

2.  @steliosalex：[https](https://stackoverflow.com/a/22895703/3850405) ://stackoverflow.com/a/22895703/3850405 。请注意，更改每一列也可能不够。您还需要处理存储过程的元数据和参数，并且类似地获取数据库在创建这些时所具有的排序规则。**完全更改排序规则需要具有正确排序规则的 create database 命令**。

3.  @RahmiAksu [https://stackoverflow.com/a/31119371/3850405](https://stackoverflow.com/a/31119371/3850405)注意：我认为这不是一个好的解决方案，但如果您使用它，请编辑第一个迁移。如果数据库已经在生产中，则不能使用。如果您有种子方法，`Resetting the connection results in a different state than the initial login`则会引发异常。

您的 Seed SqlException 可以通过使用普通的 ADO.Net 连接来解决，因此不会重置上下文的连接。但是，如上所述，这可能会在以后导致很多错误。

```
using (var conn = new SqlConnection(context.Database.Connection.ConnectionString))
{
    using (var cmd = conn.CreateCommand())
    {
        cmd.CommandText = 
            string.Format("ALTER DATABASE [{0}] COLLATE Latin1_General_100_CI_AS",
                context.Database.Connection.Database));
        conn.Open();
        cmd.ExecuteNonQuery();
    }
} 
```

> SqlException：重置连接会导致与初始登录不同的状态。登录失败。用户 '' 登录失败。无法继续执行，因为会话处于终止状态。

资源：

[https://stackoverflow.com/a/50400609/3850405](https://stackoverflow.com/a/50400609/3850405)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-06T15:26:54.333

使用当前版本的 EF (EF6) 根本不可能。但是，至少 EF6+ 现在可以使用已经存在的数据库。我们更改了部署方案，以便我们的部署脚本（包括默认排序规则）已经创建了数据库，并让 EF6 使用现有数据库（使用正确的默认排序规则）。

如果您绝对必须在代码中创建数据库并且不能使用除 EF 之外的任何其他东西（例如，您无法使用 ADO.NET 创建数据库），那么您必须选择 seliosalex 答案。这是我们提出的唯一解决方案，但是，请参阅我的评论，要做到这一点需要做很多工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T11:17:47.827

EF 5 现在支持使用 Code First 在现有数据库中创建缺失表，因此您可以创建一个空数据库并正确设置排序规则，然后再在其上运行 CF。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-11T12:06:18.337

```
1):
    public class DataBaseContext : System.Data.Entity.DbContext
    {
        public DataBaseContext() : base("MyDB") { }
        static DataBaseContext()
        {
            System.Data.Entity.Database.SetInitializer(new MyInitializer());
        }
     ....
    }

2):
    public class MyInitializer : DropCreateDatabaseIfModelChanges<DataBaseContext>
    {
        public MyInitializer() { }

        protected override void Seed(DataBaseContext context)
        {
            base.Seed(context);
            using (var conn = new SqlConnection(context.Database.Connection.ConnectionString))
            {
                using (var cmd = conn.CreateCommand())
                {
                    cmd.CommandText =
                        string.Format("ALTER DATABASE [{0}] COLLATE Persian_100_CI_AS",
                            context.Database.Connection.Database);
                    conn.Open();
                    cmd.ExecuteNonQuery();
                    conn.Close();
                }
                context.Database.Connection.Close();
            }            
        }
    } 
```

# telerik - Telerik 网格根据使用服务器绑定的条件显示数据

> ID：12054932
> 
> 赞同：0
> 
> 时间：2012-08-21T12:33:38.780
> 
> 标签：telerik, telerik-grid, telerik-mvc

我有一个 Telerik 网格，我想显示如下数据

```
ProductName Count
Letters     5
Phone   
Pens        3 
```

我想做类似 if count>0 然后只显示 count 列的值，即不显示值 0。

```
<% Html.Telerik().Grid(Model.Orders)
             .Name("Grid")
            .Columns(columns =>
            {
                columns.Bound(o => o.ProductName);
   if(Count>0)
       {
                columns.Bound(o => o.Count);
       }    
              })
            .Groupable(settings => settings.Groups(groups => groups.Add(o => o.KeyID)).Visible(false))
            .Scrollable(s => s.Enabled(true))
            .Scrollable(scrolling => scrolling.Height(300))
            .Reorderable(reorder => reorder.Columns(true))
            .Footer(true)
            .Render();
        %> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:06:19.037

您可以使用 CellAction 呈现条件结果。

```
<%
Html.Telerik().Grid(Model.Orders)
.Name("Grid")
.CellAction(cell => 
  {
    if (cell.Column.Title.Equals("Count"))
    {
      if (cell.DataItem.Count == 0)
      {
        cell.Text = "&nbsp;";
      }
    }
  })
 .Columns(columns =>
  {
      columns.Bound(o => o.ProductName);
      columns.Bound(o => o.Count);
  })
.Groupable(settings => settings.Groups(groups => groups.Add(o => o.KeyID)).Visible(false))
.Scrollable(s => s.Enabled(true))
.Scrollable(scrolling => scrolling.Height(300))
.Reorderable(reorder => reorder.Columns(true))
.Footer(true)
%> 
```

# c# - 查找用户管理的所有组

> ID：12054933
> 
> 赞同：10
> 
> 时间：2012-08-21T12:33:39.947
> 
> 标签：c#, active-directory, ldap

我们得到了一个特殊的多值属性。我们称它为`ourOwnManagedBy`可以包含管理当前组的用户或组（他们的 DN）。

如何检索特定用户管理的所有组的列表（在 和 的帮助下`managedBy`）`ourOwnManagedBy`？

例如。假设用户是组 GlobalAdministrators 的成员，并且组 ApplicationAdministrators 的成员是 GlobalAdministrations。`ourOwnManagedBy`最后是属性中具有 ApplicationAdministrators 的组 MyApplication 。

*   `User`是成员`GlobalAdministrators`
*   `GlobalAdministrators`是成员`ApplicationAdministrators`
*   `MyApplication`进来`ApplicationAdministrators`了`ourOwnManagedBy`

如何使用该信息来查找特定用户管理的所有组？是否可以在自定义属性（包含用户和组的 DN）中进行某种递归检查？

**更新**

我尝试使用这样的目录搜索过滤器：

```
string.Format("(ourOwnManagedBy:1.2.840.113556.1.4.1941:={0})", dn); 
```

但我可能误解了什么`1.2.840.113556.1.4.1941`？（[MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746475%28v=vs.85%29.aspx)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:45:54.897

恐怕，仅使用一个 LDAP 查询是不可能完成的。您必须将其拆分为子查询并分别运行每个子查询，如果有很多要迭代的内容，这反过来会阻塞域控制器。

我尝试按照我描述的方式进行操作，但性能非常糟糕，至少是使用 .NET 的可用模块来完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:11:04.480

以下页面显示[3.1.1.3.4.4 LDAP 匹配规则 (extensibleMatch)](http://msdn.microsoft.com/en-us/library/cc223367%28v=prot.13%29.aspx)表明您使用的 LDAP_MATCHING_RULE_TRANSITIVE_EVAL 在 Windows 2008 及更高版本中有效。如果您使用的是 2003，它可能无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:51:00.167

没有递归，不知道它将如何提高性能，可能有错误。

```
 string user = "username";
        //get domain
        DirectoryEntry de = System.DirectoryServices.ActiveDirectory.Domain.GetCurrentDomain().GetDirectoryEntry();
        //get users dn first
        string userDN;
        using (var searcher = new DirectorySearcher(de))
        {
            searcher.Filter = String.Format("(&(objectCategory=person)(objectClass=user)(sAMAccountName={0}))", user);
            searcher.PropertiesToLoad.Add("distinguishedName");
            userDN = searcher.FindOne().Properties["distinguishedName"][0].ToString();
        }

        //get list of all users groups
        List<string> groups;
        //see http://stackoverflow.com/questions/6252819/find-recursive-group-membership-active-directory-using-c-sharp
        using (var searcher2 = new DirectorySearcher(de))
        {
            searcher2.Filter = String.Format("(member:1.2.840.113556.1.4.1941:={0})", userDN);
            searcher2.SearchScope = SearchScope.Subtree;
            searcher2.PropertiesToLoad.Add("distinguishedName");

            SearchResultCollection src = searcher2.FindAll();

            groups = (from SearchResult c in src
                      select c.Properties["distinguishedName"][0].ToString()).ToList();
        }

        //build giant search query
        SearchResultCollection srcGroups;
        using (var searcher = new DirectorySearcher(de))
        {
            string baseString = "(|{0})";
            string managedbybase = "(managedBy={0})";
            //I've read that you can search multivalued lists using a standard ='s.
            string ourOwnManagedByBase = "(ourOwnManagedBy={0})";

            StringBuilder sb = new StringBuilder();

            //add user DN to list of group dn's
            groups.Add(userDN);

            foreach (string g in groups)
            {
                sb.AppendFormat(managedbybase, g);
                sb.AppendFormat(ourOwnManagedByBase, g);
            }

            searcher.Filter = string.Format(baseString, sb.ToString());
            srcGroups = searcher.FindAll();
        } 
```

I'll be honest and say that this doesn't actually work for me :) But I think it's because of the way our domain is configured. If nothing else maybe it will push you in the right direciton.

# django - Django将文件路径发送到views.py

> ID：12054941
> 
> 赞同：0
> 
> 时间：2012-08-21T12:34:14.547
> 
> 标签：django, django-templates, django-views, django-urls

在 django urls 中，如何发送文件路径并从视图中访问相同的路径。我尝试了以下内容，但出现错误，这段代码有什么问题。

javascript

```
 window.location="/tagging/send_file"+data.filename;
  //which is nothing but /tagging/send_file/media/tmp/sssss.txt 
```

网址.py =`url(r'^send_file/(?P<path>.*)$', 'send_file'),`

视图.py：

```
def send_file(request):
 logging.debug("========================== Got file request") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:36:44.327

尝试将参数添加到您的视图中

`def send_file(request, path):`

# xml - 通过带有“|”字符的 DTD 进行 XML 验证。独占还是怎么用？

> ID：12054945
> 
> 赞同：1
> 
> 时间：2012-08-21T12:34:23.460
> 
> 标签：xml, dtd

我很难理解 | DTD 中用于定义哪些元素可以包含在另一个元素中的字符。我尝试了 google 很长一段时间，但没有一个主要结果以我能理解的方式解决该主题 - 可能只是我坐在墙前生动地凝视。

想象一下下面的例子。我有一个名为“response”的元素，它可以包含无序和未定义数量的标签“character”和“player”，或者恰好包含一个标签“base”和未定义数量的“option”标签。如：

```
<response>
    <character>text</character>
    <player>text</player>
    <character>text</character>
</response> 
```

已验证。还：

```
<response>
    <base>text</base>
    <option>other elements</option>
    <option>other elements</option>
    <option>other elements</option>
</response> 
```

也是有效的。但是，角色/玩家和基础/选项标签的混合是无效的。我在我的 DTD 中尝试了以下内容：

```
<!ELEMENT response ((character*, player*)
                   |(base, option*))> 
```

然而，这并没有导致任何适当的验证。一些

```
<!ELEMENT response (character*, player*, 
                    base*, option*)> 
```

不完全是我想要的，如果我在我的层次结构中执行角色->玩家->角色，我的编辑也会哭。w3schools 和其他一些页面告诉我，比如

```
<!ELEMENT response (character | player | base 
                   | option)*> 
```

将是混合内容，我可以随心所欲地在我的标签中添加东西（或者至少，这就是我所相信的），但这既不是我想要的，我的编辑似乎也不满意.

所以，如果有人能告诉我正确使用 | 在 DTD 中定义元素时的字符。提前致谢。

编辑：从声明中编辑了 - 当然是错误的 - #REQUIRED 标签。没有在我的代码中使用它们，只是搞砸了。

[编辑：删除了问题标题中对“混合内容”的错误引用。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:51:54.980

你离得太近了！试试这个：

```
<!ELEMENT response ((character|player)*|(base,option*))> 
```

另请注意，`#REQUIRED`已从声明中删除。您只希望在属性声明 ( `ATTLIST`) 中使用它。如果您将其删除，那么您的最后一次尝试也会奏效：

```
<!ELEMENT response (character | player | base | option)*> 
```

# c++ - 在运行时确定 std::map/std::set 的内存使用情况

> ID：12054947
> 
> 赞同：0
> 
> 时间：2012-08-21T12:34:33.383
> 
> 标签：c++, memory-management, stl

是否可以在运行时确定 std::map/std::set （内在数据类型）的实际内存使用情况？我做了一些内存研究，似乎这在很大程度上取决于 STL 实现和所使用的系统（由于底层结构的内存填充）。我想在运行时监控这些数据类型的内存使用情况，而不运行调试器/内存分析器。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T12:35:40.010

实现一个自定义分配器，它将计算使用的内存，并将其提供给地图/集的构造函数。

# php - 搜索带有标签的图像

> ID：12054954
> 
> 赞同：1
> 
> 时间：2012-08-21T12:34:50.757
> 
> 标签：php, mysql

我有一个包含大约 700 张图片的数据库，但我想创建一个搜索栏，以便通过标签找到它们。

我将如何开始这样做。

我相信您会向 mysql 数据库添加标签...我该怎么做，以及如何做多个标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:37:23.643

有一个额外的 table `tags`，其列是:`id`和`name`，它将包含所有可能的标签，另一个 table`image_tags`将有一个`image_id`和 a `tag_id`。

```
|   tags   |
+---+------+
| 1 | cats |
| 2 | dogs |
| 3 | foo  |

|         image_tags        |
+---------------------------+
| 1 (cat image)         | 1 |
| 1                     | 3 |
| 2 (dog image)         | 2 |
| 3 (cat and dog image) | 1 |
| 3                     | 2 | 
```

这样，同一张图片可以有多个标签，同一个标签可以出现在多个表格上。

这称为**多对多关系**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:42:31.290

这是经典的“多对多”关系。

要创建基于标签的系统，您应该在 DB 中创建 2 个新故事（假设“tags”和“tags_images”表）。

在“标签”表中，您将有 2 个字段：“id”和“tag”。

在“tags_images”表中，您将有 3 个字段：“id”、“tag_id”和“image_id”。

因此，要向 iamge 添加标签，只需将新记录添加到“tags_images”表连接标签（通过“tag_id”）和图像（bt“image_id”）。

此外，您还必须在“标签”表中添加一个新标签，因为没有这样的标签。

要获取所有带有标签“dog”的图像，您应该进行简单的 sql JOIN 查询，例如：

```
SELECT `tags`.*, `images`.*
FROM `tags` t
INNER JOIN `tags_images` ti ON t.`id` = ti.`tag_id`
INNER JOIN `images` i ON i.`id` = ti.`image_id` 
```

# bit-manipulation - 实施逻辑转变

> ID：12054956
> 
> 赞同：0
> 
> 时间：2012-08-21T12:34:53.783
> 
> 标签：bit-manipulation, shift

我需要在 OpenInsight 8 上实现按位移位（逻辑，而不是算术）。

在系统中，几乎所有内容都是字符串，但有 4 个函数将数字视为 32 位整数。可用的按位函数有 AND、OR、NOT 和 XOR。任何算术运算符都将数字视为带符号的。

我目前在实现左右移位时遇到问题，我需要实现 SHA-1。

任何人都可以建议一种可以帮助我实现这一目标的算法吗？伪代码已经足够好了，我只需要一个大致的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:42:23.733

您可以使用整数乘法和除法实现移位：

左移 = *2

右移 = /2

也许您需要首先屏蔽数字以使最重要的位为零以防止整数溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T12:32:43.053

如果没有逻辑右移，您可以通过算术右移 n 位轻松实现，然后清除前 n 位

例如：右移 2 位：

```
x >= 2;
x &= 0x3fffffff; 
```

右移 n 位

```
x >= n;
x &= ~(0xffffffff << (32 - n));
// or
x >= n;
x &= (1 << (32 - n)) - 1; 
```

对于左移，没有逻辑/数学差异，因为它们都是相同的，只需将 0 移入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T08:18:43.120

使用有符号算术和按位运算逻辑下移一位

```
如果 v < 0 那么
   v = v & 0x7fffffff //清除最高位
   v = v / 2 // 将其余部分向下移动
   v = v + 0x40000000 //设置倒数第二位
别的
   v = v / 2
菲

```

# python - Scrapy：如何打印请求推荐人

> ID：12054958
> 
> 赞同：19
> 
> 时间：2012-08-21T12:34:58.977
> 
> 标签：python, scrapy

是否可以从解析函数中的响应对象中获取请求引用者？

10倍

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-21T12:40:45.200

HTTP`Referer`字段由 HTTP 客户端在请求标头中设置，**而不是在响应标头中**设置，因为此标头告诉服务器客户端从哪里到当前页面。

`Referer`收到 http标头作为响应会很奇怪。

但是当谈到 时，在响应的字段中有一个对生成 的对象`scrapy`的引用，所以下一个调用结果：`Request``Response``request`

```
response.request.headers.get('Referer', None) 
```

`Referer`如果在发出请求时设置了标头，则可以包含标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-11T08:45:42.300

上面的问题很久以前就问过了，已经很好回答了。

但是，如果 Rostyslav Dzinko 的答案不适用于您的情况，我想我会添加一个不同的答案。

假设您有 2 种不同的解析器方法：

1.  一个解析器（我们称之为 parser_A）简单地解析文章列表（列表页面）以提取链接信息和其他信息。
2.  另一个解析器（我们称之为 parser_B）从目标文章（文章页面）中提取文章信息。

如果在 parser_B 中无法获取文章列表（列表页）的 url（referer url），您可以在 parser_A 中设置 headers 字段，然后将其发送到 parser_B，如下例所示：

```
yield scrapy.Request(url=article_page_url, callback=self.parser_B, dont_filter=True, headers={'referer_url': list_page_url}) 
```

并且，在 parser_B 方法中，您可以执行以下操作来获取列表页面的 url：

```
print(response.request.headers.get('referer_url')) 
```

希望这对需要帮助的人有所帮助。

# android - Jackson 将 JSON 反序列化为多个 POJO

> ID：12054966
> 
> 赞同：0
> 
> 时间：2012-08-21T12:35:26.200
> 
> 标签：android, json, spring, jackson

嗨，我有以下 JSON

```
{
 "code": 0,
 "response": {
  "userObject": {
   "User": {
    "id": "355660",
    "first_name": "Dummy",
    "last_name": "dummy",
    "email": "dumb@email.com",
    "birthday": "2012-05-07",
    "created": "2012-08-21 06:41:05",
    "modified": "2012-08-21 06:41:05",
    "image_url": null,
   },
   "Location": {
    "id": "273550",
    "name": "New York City",
    "asciiName": "New York City",
    "lat": "40.714272",
    "lon": "-74.005966",
    "geoname_modified": "2011-11-08 00:00:00",
    "timeZone": "America/New_York",
    "countryName": "United States",
    "state": "New York",
    "created": "2012-07-12 12:11:01",
    "modified": "2012-08-20 14:27:24"
   }
  }
 }
} 
```

我有两门课，一门用于 `Location` 和 `User`

我知道如果我创建嵌套类，我可以获得对象

```
 response
     ->UserObject
         *User
         *Location 
```

但我不想创建两个额外的类来 `UserObject` 包装 `response`两个 POJO。有没有更简单的方法呢？？

我正在`Jackson Parser` 使用`Spring for android`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:54:27.543

如果您真的想避免一次性课程，您也可以分两步完成，例如：

```
JsonNode tree = mapper.readTree(...);
User user = mapper.treeToValue(tree.path("response").path("userObject").get("User"), User.class);
Location loc = mapper.convertValue(tree.path("response").path("userObject").get("Location"), Location.class); 
```

但是是的，我可能会选择愚蠢的结构类：

```
static class Response {
  public UserObject userObject;
}
static class UserObject {
  public Location Location;
  public User User;
} 
```

因为它真的没有更多的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:41:44.607

`classes`您可以创建或`arrays`使用`hashmap`. 就个人而言，我只会创建`classes`. 我认为这为您的应用程序提供了更大的灵活性，并使您可以更轻松地处理对象。我知道设置它们需要时间，但是一旦你这样做了，你就可以使用`ArrayList`并且你可以更容易地解析它们`JSON`。

# iphone - 我是否可以选择访问在我的应用程序中运行的所有线程？

> ID：12054974
> 
> 赞同：1
> 
> 时间：2012-08-21T12:35:55.300
> 
> 标签：iphone, ios, multithreading, ipad, nsthread

我已经使用`detachNewThreadSelector`方法在我的应用程序中创建线程。在某个时间点，当用户从应用程序中注销时，我应该杀死应用程序中所有正在运行的线程。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:43:22.093

如果你和你一起创建一个线程，`detachNewThreadSelector`你几乎必须让它自己完成:(

如果您希望能够控制后台任务，一个更好的选择是`NSOperationQueue`- 使用它您可以将取消消息传递给操作。

（[苹果文档在这里](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)）

* * *

编辑：如果您不想使用 NSNotificationCenter，您可以设置一个标志，让您的后台线程定期检查，如果设置了，它们将自行退出。但是，您必须小心那里的线程安全:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:50:40.133

1.  使用“普通” NSThread 构造函数 - (id)initWithTarget:... 并保存您的线程对象。
2.  或者在线程启动后将线程对象保存在某处。
3.  根本不保存线程对象，只需使用一些单独的标志，您将检查您的线程并退出它们。

# vim - 在 tmux 中使用 vim 时按 esc 后按 pageup/pagedown

> ID：12054981
> 
> 赞同：4
> 
> 时间：2012-08-21T12:36:15.423
> 
> 标签：vim, tmux

当我在 tmux 中使用 vim 后按 esc 后按 pageup/pagedown 时，它会将当前光标后的三个字符小写/大写，有什么办法解决吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:40:01.657

这有点没有答案，但不要！

通常不鼓励使用箭头键和特殊键（如`Home`,等）。`End`除了将手从本垒移开会降低速度之外，还经常会出现像您现在看到的那样的副作用。

相反，使用`Ctrl``f`and`Ctrl``b`来前进和后退页面（与`Page Down`/效果相同`PageUp`）。

或者，您可以使用`Ctrl``u`and`Ctrl``d`进行较小的跳跃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:08:01.547

具体来说，向上翻页键将向输入流发送一系列字符，而不是单个字符，然后必须对其进行交互。该序列可能类似于 "^[[5~" (escape [ 5 ~)，这意味着 vim 看到 ~ 并执行它的大小写更改行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-12T01:02:14.177

您可以重新映射大小写更改键或仅禁用它：

```
if &term =~ '^screen'
  " disable case-changing command to fix esc-esc-pagedown misbehavior.
  map ~ <Nop>
endif 
```

# ruby-on-rails - 仅在存在时插入电子邮件

> ID：12054982
> 
> 赞同：0
> 
> 时间：2012-08-21T12:36:16.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, omniauth

我正在使用 twitter 和 facebook 连接到一个网站。当提供者是 Facebook 时，我想将用户电子邮件添加到数据库字段，而它的 twitter 应该没有电子邮件。下面的代码使我的服务器超时。

```
 def self.from_omniauth(auth)
    where(provider: auth['provider'], uid: auth['uid']).first_or_create do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.profile_data = auth.info
      user.email = auth.info.email unless user.email.nil?

      user.token = auth['credentials']['token'] unless auth['credentials'].nil?
      user.secret = auth['credentials']['secret'] unless auth['credentials'].nil?
    end
  end 
```

我也试过

```
def self.from_omniauth(auth)
    where(provider: auth['provider'], uid: auth['uid']).first_or_create do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.profile_data = auth.info
      user.email = auth.info.email unless auth.info.email?

      user.token = auth['credentials']['token'] unless auth['credentials'].nil?
      user.secret = auth['credentials']['secret'] unless auth['credentials'].nil?
    end
  end 
```

Heroku 上的错误：

```
2012-08-21T23:30:07+00:00 heroku[router]: Error H12 (Request timeout) -> GET www.myapp.com/ dyno=web.1 queue= wait= service=30000ms status=503 bytes=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:20:26.617

试试这个：

```
user.email = auth.info.email unless auth.info.email.blank? 
```

这将检查 nil 和空值的 auth 哈希。

# devise - 设计/OmniAuth - LinkedIn：电子邮件在回调中为空白

> ID：12054987
> 
> 赞同：1
> 
> 时间：2012-08-21T12:36:38.200
> 
> 标签：devise, ruby-on-rails-3.2, omniauth, linkedin

我将 Devise 2.1.2 与多个 OmniAuth 提供程序一起使用。我的 devise.rb 文件包含这一行：

```
config.omniauth :linkedin, API_KEY, SECRET_KEY, :scope => 'r_emailaddress', :fields => ["email-address"] 
```

它目前被精简为电子邮件地址，因为这是唯一表现奇怪的东西。进去一看`request.env['omniauth.auth'].info`，`email`钥匙是空白的。

怎么会？我不想绕过验证，我不想使用来自用户 LinkedIn 帐户的电子邮件地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:11:35.133

感谢 Remus Rusanu 的回答中的线程链接，我注意到了 LinkedIn 员工的[这篇文章](https://developer.linkedin.com/comment/17231#comment-17231)：

> 大家好，我们正在制定现有应用程序的迁移计划。新成员权限仅适用于新注册的应用程序。
> 
> 谢谢！卡米尔

由于没有耐心，创建一个新的 LinkedIn 应用程序允许我检索用户电子邮件地址。他们终于改变了主意，真是太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:39:48.850

鉴于 LinkedIn 作为政策[问题不会通过 oauth 共享电子邮件](https://developer.linkedin.com/thread/3265)，我一点也不感到惊讶。

# python - 为 wxPython 事件分配优先级

> ID：12054994
> 
> 赞同：2
> 
> 时间：2012-08-21T12:37:21.803
> 
> 标签：python, wxpython, wxwidgets

有没有为特定的 wxPython 事件分配优先级？

启动 GUI 后，我会定期使用计时器调用方法。但是我希望用户一按下按钮就能够摆脱这种方法。如果没有工作线程，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:49:27.397

不是我知道的。事件按接收顺序添加到事件队列中。您可能可以使用进程在线程中运行的线程执行此操作，然后将其杀死。不过，您可以尝试在 wxPython 邮件列表中询问其他想法。那里有几个核心开发人员，他们可能会为您提供一些见解。

# css - CSS固定背景左侧有白线

> ID：12054995
> 
> 赞同：3
> 
> 时间：2012-08-21T12:37:22.553
> 
> 标签：css, background, webkit

我试图在我的整个页面上放置一个背景

```
html {
    background: url(images/panda.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

这通常工作得很好，但我发现了一个问题：屏幕左侧有一条白色条纹。有可能解决这个问题吗？

PS：只是提前：不，那条条纹不在图片上。您可以对它的外观有一个印象：

![在此处输入图像描述](../Images/70328fc3f8644aeb346b03d99aba46d8.png)

编辑： http: [//jsfiddle.net/uhwcW/](http://jsfiddle.net/uhwcW/) 当放大/缩小白色条纹有时会消失或切换侧面......令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:39:18.603

尝试;

```
margin: 0;
padding: 0 
```

在你的 CSS 中`html`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:39:25.263

你试过让你的身体恢复原状吗？也可以对其他容器试试这个，也许它只是你看到的一些边距或填充......

```
body { 
   margin: 0;
   padding:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T04:43:29.030

这对我有用..

```
html{
    background: url(..//index3.jpg) no-repeat 0 0 fixed; 
    -webkit-background-size: cover;
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: cover;
    -moz-background-size: cover;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-04T14:57:20.203

只需在网址后添加一个中心即可为我完成

像这样：

```
background: url(images/panda.jpg) center; 
```

# freetype2 - FreeType2 FT_Request_Size 实际设置的大小是多少？

> ID：12054998
> 
> 赞同：2
> 
> 时间：2012-08-21T12:37:36.573
> 
> 标签：freetype2

我不清楚我打电话`FT_Request_Size`（或 `FT_Set_Pixel_Sizes`）时实际指定的内容。这似乎是字形的某种最大尺寸。也就是说，取决于比例大小、升序等。生成的字形实际上可以并且将会小于这个大小。

我的解释正确吗？我在 API 文档中找不到任何准确说明其功能的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T10:53:03.667

根据 FreeType 维护者的回答，我更新了文档以添加一些说明。基本上字体本身决定了结果的大小。

对于 RT_Request_Size

> 请求的大小和生成的字形大小之间的关系完全取决于在源面中定义大小的方式。字体设计者选择每个字形相对于这个大小的最终大小。有关详细信息，请参阅 '<a href="http://www.freetype.org/freetype2/docs/glyphs/glyphs-2.html" rel="nofollow">http://www.freetype.org/freetype2 /docs/glyphs/glyphs-2.html'</p>

对于 FT_Set_Pixel_Sizes

> 您不应依赖生成的字形匹配或限制到此像素大小。请参阅 FT_Request_Size 以了解请求的大小与实际大小的关系。