# StackOverflow 问答 12134000-12134999

# jquery - ReferenceError：找不到变量：组合演示插件中的 jQuery

> ID：12134011
> 
> 赞同：2
> 
> 时间：2012-08-26T21:21:26.487
> 
> 标签：jquery

我试图让一个演示文稿与[reveal.js](http://lab.hakim.se/reveal-js/#/3)结合使用这个[flipin插件](http://demo.tutorialzine.com/2010/03/sponsor-wall-flip-jquery-css/demo.php)的功能，但我失去了作为所需功能的翻转效果并得到

ReferenceError：找不到变量：jQuery

如果我更改某些内容，请参考第 1 行或只是错误消息 - 我已经尝试了变量上所有流行的和不那么流行的差异。这很常见，除非代码本身可以很好地工作，所以我很困惑。

问题代码：

```
$(document).ready(function(){
    /* The following code is executed once the DOM is loaded */ 
    $('.sponsorFlip').bind("click",function(){      
        // $(this) point to the clicked .sponsorFlip element (caching it in elem for speed):        
        var elem = $(this);     
        // data('flipped') is a flag we set when we flip the element:       
        if(elem.data('flipped'))
        {
            // If the element has already been flipped, use the revertFlip method
            // defined by the plug-in to revert to the default state automatically:             
            elem.revertFlip();          
            // Unsetting the flag:
            elem.data('flipped',false)
        }
        else
        {
            // Using the flip method defined by the plugin:             
            elem.flip({
                direction:'lr',
                speed: 350,
                onBefore: function(){
                    // Insert the contents of the .sponsorData div (hidden from view with display:none)
                    // into the clicked .sponsorFlip div before the flipping animation starts:                      
                    elem.html(elem.siblings('.sponsorData').html());
                }
            });         
            // Setting the flag:
            elem.data('flipped',true);
        }
    }); 
}); 
```

有任何想法吗？

我在想也许我错过了 html 中的某些内容：

```
<head>
    <meta charset="utf-8">

    <title>HUE2</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/print.css" type="text/css" media="print">
    <link rel="stylesheet" href="lib/zenburn.css">
    <link rel="stylesheet" href="css/styles.css">

</head>

<body>

    <div id="reveal">

        <!-- Used to fade in a background when a specific slide state is reached -->
        <div class="state-background"></div>

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <section>

    <div id="main">
                <div class="sponsorListHolder">

            <div class="sponsor" title="Click to flip">
                <div class="sponsorFlip">

                </div>

                <div class="sponsorData">
                    <div class="sponsorDescription">

                    </div>
                    <div class="sponsorURL">

                    </div>
                </div>
            </div>

            <div class="sponsor" title="Click to flip">
                <div class="sponsorFlip">

                </div>

                <div class="sponsorData">
                    <div class="sponsorDescription">

                    </div>
                    <div class="sponsorURL">

                    </div>
                </div>
            </div>

            <div class="sponsor" title="Click to flip">
                <div class="sponsorFlip">

                </div>

                <div class="sponsorData">
                    <div class="sponsorDescription">

                    </div>
                    <div class="sponsorURL">

                    </div>
                </div>
            </div>

            <div class="sponsor" title="Click to flip">
                <div class="sponsorFlip">

                </div>

                <div class="sponsorData">
                    <div class="sponsorDescription">

                    </div>
                    <div class="sponsorURL">

                    </div>
                </div>
            </div>

            <div class="sponsor" title="Click to flip">
                <div class="sponsorFlip">

                </div>

                <div class="sponsorData">
                    <div class="sponsorDescription">

                    </div>
                    <div class="sponsorURL">

            </div>
                </div>
            </div>

    <div class="clear"></div>
</div> 
```

```
 <!-- The navigational controls UI -->
        <aside class="controls">
            <a class="left" href="#">&#x25C4;</a>
            <a class="right" href="#">&#x25BA;</a>
            <a class="up" href="#">&#x25B2;</a>
            <a class="down" href="#">&#x25BC;</a>

        </aside>

        <!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
        <div class="progress"><span></span></div>

    </div>

    <!-- Optional libraries for code syntax highlighting and classList support in IE9 -->
    <script src="lib/highlight.js"></script>
    <script src="lib/classList.js"></script>    
    <script src="js/reveal.js"></script>
            <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.flip.min.js"></script>
            <script src="js/jquery.min.js"></script>
            <script src="js/script.js"></script>

    <script>

        // Parse the query string into a key/value object
        var query = {};
        location.search.replace( /[A-Z0-9]+?=(\w*)/gi, function(a) {
            query[ a.split( '=' ).shift() ] = a.split( '=' ).pop();
        } );

        // Fires when a slide with data-state=customevent is activated
        Reveal.addEventListener( 'customevent', function() {
            alert( '"customevent" has fired' );
        } );

        // Fires each time a new slide is activated
        Reveal.addEventListener( 'slidechanged', function( event ) {
            // event.indexh & event.indexv
        } );

        Reveal.initialize({
            // Display controls in the bottom right corner
            controls: true,

            // Display a presentation progress bar
            progress: true,

            // If true; each slide will be pushed to the browser history
            history: true,

            // Loops the presentation, defaults to false
            loop: false,

            // Flags if mouse wheel navigation should be enabled
            mouseWheel: true,

            // Apply a 3D roll to links on hover
            rollingLinks: true,

            // UI style
            theme: query.theme || 'neon', // default/neon

            // Transition style
            transition: query.transition || 'default' // default/cube/page/concave/linear(2d)
        });

        hljs.initHighlightingOnLoad(); 
```

```
</body> 
```

有人看到我看不到的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:06:22.657

看起来[Flip 插件](http://lab.smashup.it/flip/)需要 jQueryUI。

您还需要首先包含 jQuery，如下所示：

```
<script src="js/jquery.min.js"></script>
<script src="lib/highlight.js"></script>
<script src="lib/classList.js"></script>    
<script src="js/reveal.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/jquery.flip.min.js"></script>
<script src="js/script.js"></script> 
```

# javascript - 如何使用 JavaScript 以编程方式打开文件选择器？

> ID：12134014
> 
> 赞同：9
> 
> 时间：2012-08-26T21:21:31.207
> 
> 标签：javascript, google-chrome

> **可能重复：**
> [在 JavaScript 中，我可以通过编程方式为文件输入元素触发“点击”事件吗？](https://stackoverflow.com/questions/210643/in-javascript-can-i-make-a-click-event-fire-programmatically-for-a-file-input)

我天真地尝试了以下方法以使用 JavaScript 以编程方式打开文件选择器（请参见 fiddle [here](http://jsfiddle.net/fEBFp/)）：

```
<input type='file'>​

<script>
    $(function () {
        $('input').click();
    });
</script> 
```

以上不起作用。如何`input type='file'`使用 JavaScript 打开文件选择器？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-26T21:29:25.543

出于安全原因，您不能触发对话框，除非它是对某些用户触发事件的响应。例如，您可以通过单击其他元素来触发对话框：

```
$(function () {
    $(".someElement").click(function () {
        $('#f').click();
    });
}); 
```

[工作示例](http://jsfiddle.net/fEBFp/1/)。

​</p>

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T21:28:19.337

作为一项安全措施，您只能在用户输入时打开此类对话框，例如单击事件（在任何元素上）。您不能随意打开它，例如在页面加载时。

[http://jsfiddle.net/fEBFp/2/](http://jsfiddle.net/fEBFp/2/)

# .net - 如何将参数传递给 Windward DocGen？

> ID：12134019
> 
> 赞同：0
> 
> 时间：2012-08-26T21:22:48.857
> 
> 标签：.net, documentation-generation, windward

运行报表时，我需要将参数（变量）传递给我的文档模板。我该怎么做呢？我正在使用 Windward 的 .NET 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:22:48.857

您通过将参数附加到每个数据源来传递参数。您可以为每个数据源设置一组不同的参数和值。

为此，您可以创建一个包含参数的 WindwardInterfaces.net.windward.api.csharp.KeyPairDictionary。键是带有变量名的字符串。该值可以是字符串、数字或日期时间。如果变量将用作选择中的参数，则值类型应与数据库列类型匹配。

这些是通过分配给 IReportDataSource.Map 属性在数据源中设置的。AdoDataSourceImpl 和 XmlDataSourceImpl 都实现了 IReportDataSource。

```
IReportDataSource datasource = new XmlDataSourceImpl("data.xml");
KeyPairDictionary map = new KeyPairDictionary();
map.Add("now", DateTime.Now);
datasource.Map = map; 
```

请注意，如果将多个数据源应用于模板，则变量将跨数据源进行传输。如果在第一个数据源中设置了变量，而在第二个数据源中没有设置，它将保留第一个数据源的值。如果它是在第二个中设置的，那将覆盖保存的值。

# android - 显示上一个字符串的按钮

> ID：12134026
> 
> 赞同：-2
> 
> 时间：2012-08-26T21:25:12.470
> 
> 标签：android, string, button

我正在开发一个具有下一个/上一个和复制按钮的报价应用程序。

这是代码：

```
 Button btn1;
     String countires[];
     int i=0;
        /** Called when the activity is first created. */
     @Override
      public void onCreate(Bundle savedInstanceState)
     {
     super.onCreate(savedInstanceState);
         setContentView(R.layout.prob2);

btn1 = (Button) findViewById(R.id.prob2_btn1);

countires = getResources().getStringArray(R.array.country);

for (String string : countires)
{
    Log.i("--: VALUE :--","string = "+string);
}

btn1.setOnClickListener(new OnClickListener()
{
    @Override
    public void onClick(View arg0)
    {
        // TODO Auto-generated method stub
        String  country  = countires[i];
        btn1.setText(country);
        i++;
        if(i==countires.length)
            i=0;
    }
});
} 
```

我需要“上一个”按钮的 onClick 代码才能在 textView 中显示上一个字符串？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T21:32:50.567

为您的活动创建一个新成员，例如：

```
int actual = 0; 
```

然后创建一个“下一步”按钮：

```
nextButton = (Button) findViewById(...);

nextButton.setOnClickListener(new OnClickListener()
{
    @Override
    public void onClick(View arg0)
    {
        actual = actual < countires.length - 1 ? actual + 1 : actual;
        String  country  = countires[actual];
        btn1.setText(country);
    }
}); 
```

上一个按钮也是如此：

```
prevButton = (Button) findViewById(...);

prevButton.setOnClickListener(new OnClickListener()
{
    @Override
    public void onClick(View arg0)
    {
        actual = actual > 0 ? actual - 1 : actual;
        String  country  = countires[actual];
        btn1.setText(country);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T21:30:03.810

那将是：

```
// Prev
if ( i > 0 ) {
    i--;
} else {
    i = countires.length - 1;
}
String  country  = countires[i];
btn1.setText(country); 
```

编辑：最有意义的是也更改下一个按钮。因为在下一个方法中，您现在在设置文本后增加 i 。这有点搞砸了逻辑。

```
// Next
if ( i < countires.length - 1 ) {
    i++;
} else {
    i = 0;
}
String  country  = countires[i];
btn1.setText(country); 
```

# php - 在 PHP 中将新值添加到数组的开头

> ID：12134031
> 
> 赞同：0
> 
> 时间：2012-08-26T21:26:04.993
> 
> 标签：php, arrays, push

我尝试使用 array_push()，但出现致命错误。

```
function get_data($table, $id = '', $condition){

   if($id != '')
     array_push( " WHERE `id` = '".$id."' ", $condition );

   ...
} 
```

问题是，如何在数组的开头添加一个值（在我的例子中是一个字符串）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T21:27:43.510

[`array_unshift()`](http://php.net/manual/en/function.array-unshift.php)是你要找的功能！

> **array_unshift** — 将一个或多个元素添加到数组的开头

```
$arr = array(1,2,3);
print_r($arr);

/*
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
)   
*/
array_unshift($arr,0);
print_r($arr);

/*
Array
(
    [0] => 0
    [1] => 1
    [2] => 2
    [3] => 3
)   
*/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T21:28:16.757

致命错误是因为您的参数顺序相反：

```
function get_data($table, $id = '', $condition){

   if($id != '')
     array_push($condition, " WHERE `id` = '".$id."' " );

   ...
} 
```

*如果*$condition 是一个数组，这不会给出致命错误，但它会将项目放在数组的*末尾*。如其他答案中所述， array_unshift 是添加项目的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T21:28:33.480

[array_unshift](http://php.net/manual/en/function.array-unshift.php)应该可以解决问题

# git - Gitolite 通配符不起作用

> ID：12134033
> 
> 赞同：0
> 
> 时间：2012-08-26T21:26:14.570
> 
> 标签：git, gitolite

我试图在我的 Gitolite v3 安装中使用通配符，但它不起作用。当我使用通配符定义推送 gitolite.conf 文件时，它实际上创建了名为“CREATOR”的文件夹，而不是将其用作通配符。如果我尝试以用户身份创建存储库，则会收到该存储库不存在的错误。好吧，当然不是，我正在尝试创建它！

这是 gitolite.conf 中的相关定义：

# 个人作业脚本库

```
repo  f12/csci442/CREATOR/scripts
  C   = @f12_csci442
  RW+ = CREATOR @s12_csci442_wheel 
```

当我尝试以@f12_csci442 组中的用户身份创建存储库时，有人告诉我

```
FATAL: R any f12/csci442/twhitney/scripts twhitney DENIED by fallthru
(or you mis-spelled the reponame) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:41:21.793

您是否将变量设置`GL_WILDREPOS`为 1（in `~/gitolite.rc`）？

# ruby-on-rails - Rails 3 中的选择性排序

> ID：12134034
> 
> 赞同：1
> 
> 时间：2012-08-26T21:26:18.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

大多数关于高级排序的问题都涉及一些优先领域，但这里有一个不同的问题。

我有一系列按标题排序的项目，这些项目分配给公司的个人。我希望能够让每个人的项目**浮动到那个人的顶部**。

这不是到`assigned_individual`那时订购的请求`job_title`（因为这会弄乱所有不属于我的项目的订购）。这是一个请求，要求记录仍然主要按顺序排序，`job_title`但要进行覆盖，以便`assigned_individual_id = 3`首先显示具有的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:18:24.383

不难，您只需将 CASE 滑入 ORDER BY 即可手动将感兴趣的行推到顶部，如下所示：

```
id = M.send(:sanitize_sql, ['?', id])
M.order("case when assigned_individual = #{id} then 0 else 1 end, job_title") 
```

当然，`id`您想要的用户在哪里。如果这是在 M 的一种方法中完成的，那么您将不需要使用`send`来绕过`sanitize_sql`.

如果需要，可以轻松扩展此技术以将多个​​用户推到顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:11:14.503

分两遍构建它：

```
@projects = current_user.projects
@projects += Project.all
@projects.uniq! 
```

注意：我假设您已使用默认范围按名称对项目进行排序。

# ruby-on-rails - Favicon.ico 不工作

> ID：12134035
> 
> 赞同：0
> 
> 时间：2012-08-26T21:26:20.660
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, amazon-s3

这是我的 favicon.ico 代码：

```
<%= favicon_link_tag 'https://s3.amazonaws.com/...../favicon.ico', :rel => 'shortcut icon' %> 
```

它在本地工作，但是当我将它上传到服务器时 - 不显示图标。我可以访问图像，并且图像存储在亚马逊服务器上 - s3服务帮助，好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T21:28:26.243

清除浏览器的缓存。`Ctrl``Shift``Del`应该适用于大多数浏览器。

# javascript - 通过 Web 应用程序管理服务器端文件系统

> ID：12134036
> 
> 赞同：0
> 
> 时间：2012-08-26T21:26:31.037
> 
> 标签：javascript, web-services, web-applications, file-upload, filesystems

我正在开发一个 Web 应用程序，它将通过其 Web 界面管理目录和文件。

开发 Web 界面是其中的一部分，并且正在推进中。但是，我开始思考，我应该如何开发服务器应用程序，它将根据用户输入来管理文件和目录。

客户端将使用标准工具创建：

1.  HTML5
2.  CSS3
3.  JavaScript
4.  PHP - 尽管它是服务器端应用程序，但它主要负责动态网站
5.  MySQL - 尽管它是服务器端应用程序，但它主要负责保存有关用户、他们的设置等的信息。

请您告诉我，**管理服务器端文件系统的服务器端编程语言是什么？**是否有**任何可用的 API 可以**让我完全按照我的意愿去做？是否可以**在服务器端 JavaScript 中管理服务器端文件系统**，还是应该选择其他工具？我认为服务器端 JavaScript 是一个逻辑选择，因为我也将它用于客户端。

这是我希望达到的目标：

*   创建新目录和文件
*   删除目录和文件
*   跟踪目录和文件大小
*   在目录之间移动文件
*   提供目录和子目录的内容

理想情况下，该解决方案应该是独立于平台的，并且应该在 Linux Ubuntu 和 Windows Server OS 上都能运行。

我知道我的问题有点宽泛。我会很感激，**如果你指出我正确的方向**，开始学习哪些技术，能够完成上面提到的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:04:24.660

您的列表中已经有了非常强大的服务器端语言。php。

PHP 可以完成你上面列出的所有事情......还有一些你没有列出的事情:)

> 创建新目录和文件

可以使用该[`touch()`](http://php.net/manual/en/function.touch.php)函数创建新文件，并使用 [ `mkdir()`]( [http://php.net/manual/en/function.mkdir.php](http://php.net/manual/en/function.mkdir.php)函数创建新目录。

> 删除目录和文件

删除是用[`rmdir()`](http://php.net/manual/en/function.rmdir.php)和完成的[`unlink()`](http://php.net/manual/en/function.unlink.php)。

> 跟踪目录和文件大小

可以使用该[`filesize()`](http://php.net/manual/en/function.filesize.php)功能监控文件大小。找不到本机文件夹大小功能，但此 Stack Overflow 帖子可能有用 - [https://stackoverflow.com/a/478161/558021](https://stackoverflow.com/a/478161/558021)

> 在目录之间移动文件

`rename()`使用该功能可以完成文件和目录的移动。

> 提供目录和子目录的内容

PHP 为我们提供的用于扫描文件夹的功能之一称为[`glob()`](http://php.net/manual/en/function.glob.php)glob - 它允许您查找与模式匹配的路径名，因此如果您给它一个通配符`*`，它​​将在特定位置查找所有文件。

# objective-c - 设置班级的区别？

> ID：12134038
> 
> 赞同：0
> 
> 时间：2012-08-26T21:26:50.563
> 
> 标签：objective-c, ios, class, implementation

我可能没有正确地表达这个问题，但我不确定我所问的是否 100% 所以这里是:-)

在 Xcode 中，您可以在头文件中的 @interface 上方设置 @class（类名）。这与更改类名称中的 UIViewController 相同吗？请参见下面的代码：

这也是一样吗——

```
@class CoreDataClass;

@interface FlipsideViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
{

}

//This file declares the UITableView
@property (nonatomic, retain) IBOutlet UITableView *mainTableView;

@property (nonatomic, retain) CoreDataClass *cdc; 
```

像这样：

```
@interface FlipsideViewController : CoreDataClass <UITableViewDataSource, UITableViewDelegate>
{

}

//This file declares the UITableView
@property (nonatomic, retain) IBOutlet UITableView *mainTableView;

@property (nonatomic, retain) NSManagedObjectContext *managedObjectContext;

@end 
```

??

如果这不一样，它有什么不同，不同的实现有什么优势？

差异只是真正询问它们是否相似:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T21:33:00.853

@class 不是用来创建一个类，而是转发声明另一个类。请参阅[此问题](https://stackoverflow.com/a/5191507/952818)以获得很好的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T21:33:10.293

他们甚至没有关系。不同之处在于您的视图控制器的超类（“父”类）会有所不同（这可能会导致很好的无法识别的选择器错误......）。`@class`当不想为了引用一个类而导入整个框架头层次结构时，使用关键字前向声明一个类只是一种引用类的便捷方式。即，如果你不需要知道关于一个类的任何信息，只要它存在，你可以使用这个关键字。但是要小心，如果您大量使用该类 - 在这些情况下，类前向声明​​不被认为是一个好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T21:33:12.403

它们根本不一样。第一种情况是“前向声明”——您告诉编译器存在 CoreDataClass 类，这样您就可以在头文件中引用它，而无需实际导入定义它的文件。

第二种情况，您声明 FlipsideViewController 是 CoreDataClass 的子类，并继承其所有方法和实例变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T21:33:01.690

在第一种情况下，当您使用 @class 时，它会通知 XCode 您将在某处使用 CoreDataClass，并且您将在 .m 文件中使用 #import 标头，在第二种情况下，您将从 CoreDataClass 继承（您将可以访问所有公共和受保护的特性）

# css - 在导航链接之后定位内联块“三角形”

> ID：12134040
> 
> 赞同：0
> 
> 时间：2012-08-26T21:26:56.630
> 
> 标签：css, position, geometry, inline

所以我试图让它像列表项目符号一样工作，但在导航按钮的末尾。

我遇到了黑三角定位太高的问题。它比我拥有的文字（带黑色背景）更高。

下面是我的问题的一个例子。

[http://dabblet.com/gist/3483670](http://dabblet.com/gist/3483670)

我尝试了很多不同的东西，但我完全被难住了。可能我忽略了一些愚蠢的事情，但它可能需要我不知道的大量工作。

感谢所有的帮助。

以防链接不适合您。见下文。

CSS

```
 a {font: 19px/26px 'Exo',Arial,sans-serif;
    list-style: none outside none;
    margin: 0 0 0 -10px;
    padding: 0 0 58px;
    font-weight:100;
    text-transform: uppercase;
    width: 100%;
    text-decoration:none;}

    a[rel="catagory"] { background:#000000; padding:0 5px 0 5px; color:#BAFF32;}

.triangle { width: 0;
    height: 0; 
    background:no-repeat right center;
    border-top: 0px solid transparent;
    border-bottom: 25px solid transparent;
    border-left: 15px solid black;
    display:inline-block;} 
```

HTML

```
<a href="index.html" rel="catagory"><span class="plus">+</span> <span>HOME</span></a><span class="triangle"></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T21:37:29.663

你可以加

```
a[rel="catagory"] {
    vertical-align:middle;
    display:inline-block;
    width:auto;
    line-height:25px;
}
.triangle {
    vertical-align:middle
} 
```

**解释：**

对齐它们的部分是

```
a[rel="catagory"] {vertical-align:middle;}
.triangle {vertical-align:middle} 
```

但是anchor的高度是22px，所以我们需要

```
a[rel="catagory"] {
    display:inline-block;
    line-height:25px;
} 
```

为了使高度为25px。

但是你有另一个规则（我想知道为什么）：

```
a{width:100%} 
```

在设置`display:inline-block`锚之前 has `display:inline`，所以该规则什么都不做。

但现在它可以工作了，我们想禁用它，所以我们需要

```
a[rel="catagory"] {
    width:auto;
} 
```

# debugging - utrace 项目死了吗？

> ID：12134041
> 
> 赞同：8
> 
> 时间：2012-08-26T21:26:58.057
> 
> 标签：debugging, linux-kernel, ptrace

我试图使用 stap 来跟踪用户空间可执行文件，正如这个答案所建议的： [https ://stackoverflow.com/a/324709/368507](https://stackoverflow.com/a/324709/368507)

为此，内核必须有 utrace 补丁，但我找不到最新内核的任何 utrace 补丁。

邮件列表已关闭，官方网站上的许多链接都已损坏。

有人知道这个项目的去向吗？它死了吗？这是否意味着我们不能再使用 stap 来跟踪最近内核上的可执行文件？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T13:48:25.890

utrace 上游的道路上遇到了很多困难。然而，正如这篇精美的[LWN 文章](https://lwn.net/Articles/499190/)所描述的那样，它的一部分仍然存在。

您可能会发现通过“perf”工具套件更容易访问此功能。添加探测事件后，您可以使用常用的性能工具功能来分解结果。有关更多信息，请参阅[提交消息](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=654443e20dfc0617231f28a07c96a979ee1a0239)和[精美文档](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=Documentation/trace/uprobetracer.txt;h=24ce6823a09ea6c4442b5390bd327c9df99431b3;hb=HEAD)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-26T18:14:37.430

Utrace 确实已经死了，不再处于开发阶段，它无法进入内核。请参阅“uprobes”，而不是自 3.5+ 起可用。

# mysql - 如何将我的 Rails 应用程序添加到 Heroku？

> ID：12134049
> 
> 赞同：1
> 
> 时间：2012-08-26T21:27:26.460
> 
> 标签：mysql, ruby-on-rails, heroku

我用 Aptana Studio 制作了一个 Rails 3 应用程序。此应用程序已在 Github 中。我尝试了引擎场来部署我的应用程序。您应该指定引擎 yard 是您在 github 中的代码的地址，然后他会自动在您的服务器实例中制作一个副本。

这是我的问题....客户要求使用heroku部署应用程序。我想使用我在 github 中的代码并将其部署在 heroku 中。

使用我在 github 中的代码制作 heroku 应用程序的最快方法是什么？Heroku 可以从 github 获取代码吗？要遵循的流程是什么？

我用 rails 阅读了 heroku 的快速入门，但他们建议制作一个新应用程序并在新的 heroku 应用程序中逐个文件复制文件。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:44:36.757

Heroku 文档非常详细地介绍了这个主题：

[https://devcenter.heroku.com/articles/rails3](https://devcenter.heroku.com/articles/rails3)

回复：MySQL，虽然你在 Heroku 中没有 MySQL，但只要你不使用 MySQL 的特定功能（很可能如果你使用 ActiveRecord 你没有使用），那么将应用程序部署到 heroku 应该没有任何问题。

至于部署，Heroku 部署就像将更改推送到 GitHub，将您的应用程序部署到您`push`的代码库。

```
git push heroku master 
```

将您的主分支部署到 Heroku。

当然，要使其正常工作，您需要：

*   Heroku 上的帐户
*   已安装 Heroku gem ( `gem install heroku`)
*   在 heroku 上创建了一个应用程序（请参阅 Heroku 文档）

从 Heroku 开发中心链接，您可以跳过创建应用程序步骤并专注于其他细节，如数据库适配器、组等。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:39:34.917

这是 Heroku 本身的教程：[https ://devcenter.heroku.com/articles/git](https://devcenter.heroku.com/articles/git)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-26T21:52:32.630

既然您要求最快的最短方式，我认为是：

1.  安装 heroku gem (gem install heroku)

2.  在 heroku 上创建一个新应用程序。 `heroku create`
    -# 记下输出和应用名称，例如“ `sharp-rock-2853`”

3.  在您现有的本地应用程序中，`$ heroku git:remote -a sharp-rock-2853`
    -# 将Sharp-rock-2853 替换为您在步骤1 中的heroku 应用程序名称

4.  `git push heroku master`

# php - Pdftohtml 在在线服务器上不起作用

> ID：12134063
> 
> 赞同：0
> 
> 时间：2012-08-26T21:29:30.390
> 
> 标签：php, shell, shell-exec, pdf-to-html

我正在使用[pdftohtml](http://pdftohtml.sourceforge.net)将 pdf 文件动态转换为 html 文件，我通过 linux 服务器上的 PHP 执行此操作。

我使用以下代码来测试 pdf 到 html 的转换：

```
$output = shell_exec("cd pdftohtml_linux; pdftohtml test.pdf"); 
```

它不起作用，`echo $output`也不会输出任何东西，尽管任何其他 linux 命令（例如`ls`and ）`make`都可以正常工作并显示相应的输出。

奇怪的是，完全相同的代码在 ubuntu 12.04 上的 localhost 上运行起来就像一个魅力，生成了 html 文件，并且`shell_exec()`记录了页数和其他一些东西的一些输出。根据`phpinfo()`web服务器的系统是：Linux infong 2.4 #1 SMP

关于如何让它工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T20:54:01.757

无论这个答案是值得的......

您需要先找到 pdftohtml 的安装位置。它通常在`/usr/bin/`

然后运行`shell_exec("/usr/bin/pdftohtml test.pdf");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T05:57:18.440

我也遇到了同样的问题。我通过添加'2>&1'来修复它

```
exec("pdftohtml test.pdf 2>&1"); 
```

看看这是否适合你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T23:21:02.857

在您的服务器上，如果您的 PHP < 5.4.0，您可能[`safe_mode`在](http://www.php.net/manual/en/features.safe-mode.php). 这将由`phpinfo()`（`safe_mode`在页面上查找）输出。

如果是这种情况并且您可以访问服务器的配置，请更改`safe_mode`为`"0"`in`php.ini`或`httpd.conf`。

# azure - 错误 500：ManagedPipelineHandler，在 azure 上部署 web api mvc 4

> ID：12134068
> 
> 赞同：4
> 
> 时间：2012-08-26T21:30:34.833
> 
> 标签：azure, web, asp.net-mvc-4, asp.net-web-api, azure-sql-database

我正在尝试将 WebAPI 项目部署到天蓝色。

当我有一个没有 SQL 访问权限的方法时，它会在我的浏览器中正确地将结果显示为 JSON。

但是，当我使用实体框架做任何事情并从数据库中获取一个测试字段时，整个事情都会出错：

```
 Module ManagedPipelineHandler 
 Notification ExecuteRequestHandler 
 Handler System.Web.Http.WebHost.HttpControllerHandler 
 Error Code 0x00000000 
```

我尝试过的事情：

*   在“Azure 计算模拟器”中运行时，一切运行良好
*   在调试中使用完全相同的 sql azure 连接字符串时，它运行得很好
*   当使用 RDP 连接到 webrole 并远程登录到端口 1443 到 SQL azure 服务器时，它连接得很好。（所以没有防火墙问题）。

接下来我可以尝试什么来找出导致这种情况的原因？

更新：当我将连接字符串指向本地 SQLEXPRESS 数据库时，它给出了同样的错误。在本地 azure 模拟器上它仍然有效

更新：在本地浏览器上显示的错误截图（通过 rdp） [http://www.proofofconcept.nl/azure_error_screenshot.png](http://www.proofofconcept.nl/azure_error_screenshot.png)

更新：应大众要求。使用的 web.config

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <connectionStrings>

    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />  
    <add name="Entities" connectionString="metadata=res://*/DAL.Coalition.csdl|res://*/DAL.Coalition.ssdl|res://*/DAL.Coalition.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ASPNETDB.MDF;Integrated Security=True;User Instance=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />

    <!--
    <add name="ApplicationServices" connectionString="data source=acbdefgh12.database.windows.net;Initial Catalog=MyCatalog;User ID=database_user@acbdefgh12;Password=MyPassword;Encrypt=true;Trusted_Connection=false;MultipleActiveResultSets=True" providerName="System.Data.SqlClient"/>
    <add name="Entities" connectionString="metadata=res://*/DAL.Coalition.csdl|res://*/DAL.Coalition.ssdl|res://*/DAL.Coalition.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=acbdefgh12.database.windows.net;Initial Catalog=MyCatalog;User ID=database_user@acbdefgh12;Password=MyPassword;Encrypt=true;Trusted_Connection=false;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
-->

  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <customErrors mode="Off" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <membership>
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <profile>
      <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>
    <roleManager enabled="false">
      <providers>
        <clear />
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T05:44:38.430

你在使用 EF CodeFitst 吗？如果有是哪个版本？（4.3 之前的版本确实存在 SQL Azure 问题）？然后观察以下条件：

*   您的主 DbContext 是否命名为“实体”，或者您是否使用指向“实体”连接的构造函数重载显式创建它？
*   您的 my_dbuser@acbdefgh12 用户是否有权访问 MASTER DB？
*   MyCatalog 在您部署包之前是否存在？
*   您的 SQL Azure 防火墙是否规定“允许来自其他 Windows Azure 服务的连接”（请看下面的屏幕截图）（我知道您提到过，但无论如何）？

![在此处输入图像描述](../Images/dd33cec44830e60904caf6a599c9ca28.png)

当任一为真时，我一直看到完全相同的错误：

*   my_dbuser@acbdefgh12 无权访问主数据库来创建 MyCatalaog 数据库（以防它不存在）
*   MyCatalog DB 存在但与 DbContext 模型不同
*   主 DbContext 的命名与实体不同，并使用默认的无参数构造函数创建（在这种情况下使用默认的 EF 连接字符串）
*   SQL Azure 服务器未配置为接受来自其他 Windows Azure 服务的连接

不幸的是，实际错误没有显示任何有用的信息。正如我所说，当我未能遵守上述陈述时，我看到了完全相同的错误。

我可以建议跟踪错误的是挂钩/编辑您自动生成的 DbContext 文件，并在连接打开之前明确抛出一个异常，以确保正在使用连接字符串。

**忽略 Web.Config 后更新**

不确定这是否相关，但我注意到在您的 web.config 中，如果版本较低，则程序集绑定会强制使用 MVC 3.0：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

而我的 MVC 4 的 web.config 与 Web API 项目类型（.NET FX 4.0 / MVC 4）略有不同：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T15:03:35.040

非常老的问题，但我的问题很快就把我带到了这个页面。在 Azure webapp、Entity Framework 应用程序中，我遇到了 500 错误，并且在从日志和跟踪中获取任何其他信息时遇到了很多麻烦。

原来我的连接字符串丢失了

```
MultipleActiveResultSets=true; 
```

属性。一些页面正在工作，而另一些则没有。一旦我添加了这个，所有页面都在工作。

# python - 在 PyQt 中删除 QTreeWidgetItem？

> ID：12134069
> 
> 赞同：12
> 
> 时间：2012-08-26T21:30:35.060
> 
> 标签：python, pyqt, qtreewidget

我发现很难找到一种简单的方法来删除我选择的`QTreeWidgetItem`.

我的拼凑方法涉及将树的当前选择设置为`current`然后：

```
if current.parent() is not None:
   current.parent().removeChild(current)
else:
   self.viewer.takeTopLevelItem(self.viewer.indexOfTopLevelItem(current)) 
```

这并不可怕，但是没有直接删除该项目的命令吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-26T23:13:15.627

该类`QTreeWidget`有一个[`invisibleRootItem()`](http://doc-snapshot.qt-project.org/4.8/qtreewidget.html#invisibleRootItem)函数，它允许一种更简洁的方法：

```
root = tree.invisibleRootItem()
for item in tree.selectedItems():
    (item.parent() or root).removeChild(item) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-27T01:36:54.703

PyQt4 使用 sip 为 Qt 类生成 python 绑定，因此您可以通过[sip python API](http://www.riverbankcomputing.co.uk/static/Docs/sip4/python_api.html#module-sip)显式删除 C++ 对象：

```
import sip
...
sip.delete(current) 
```

PySide 的绑定生成器 shiboken 有[一个类似的模块](http://www.pyside.org/docs/shiboken/shibokenmodule.html)。

# php - 在将对象传递给模型之前，是否值得在控制器中创建一个对象？

> ID：12134071
> 
> 赞同：0
> 
> 时间：2012-08-26T21:30:38.627
> 
> 标签：php, oop, codeigniter

我正在 Codeigniter 中创建一个投资组合页面，并且我还为该站点配备了一个简单的 CMS。

我有一个创建投资组合项目的控制器，如下所示：

```
public function create_portfolio()
{
    $this->load->model('portfolio_model');
    $this->portfolio_model->insert(
        $this->input->post('title'),
        $this->input->post('short_description'),
        $this->input->post('complete_description'),
        $this->input->post('github'),
        $this->input->post('url')
    );
} 
```

面向对象的方法是这样的：

```
public function create_portfolio()
{
    $this->confirm_login();

    $this->load->model('portfolio_model');
    $portfolio = new Portfolio(
        $this->input->post('title'),
        $this->input->post('short_description'),
        $this->input->post('complete_description'),
        $this->input->post('github'),
        $this->input->post('url')
    );

    $this->portfolio_model->insert($portfolio);
} 
```

随着雇主越来越多地寻找具有 OOP 技能的人，我正在尝试评估后一种方法是否有效。最后，我拥有的模型最终将访问 Portfolio 对象中的所有实例变量，以便插入数据库（我没有使用 ORM）。

在将所有输入字段传递到模型之前将其实际分组到一个对象中是否有任何意义？我可能以错误的方式表达了这个问题，但我希望您能提供意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:58:05.190

由于您将值传递给构造函数，因此构造函数可能会对输入进行验证以确保其有效或执行某种其他处理，其中

`$portfolio->title`可能不相等`$this->input->post('title');`

所以选项2会更好。

# jquery - jQuery 使用字符串作为 jQuery 对象进行 DOM 操作

> ID：12134072
> 
> 赞同：0
> 
> 时间：2012-08-26T21:30:40.670
> 
> 标签：jquery, string, object, dom

`myVariable`是一个包含 HTML 的字符串。

为了操纵它，我正在做以下事情：

```
$(myVariable).find('div.grid-12-12').each(function() {
            $(this).attr('class','grid-2-12');
                        alert($(this).attr('class'));
        }); 
```

我在警报中看到的始终是`grid-12-12`. 是否找到了正确的 div，但似乎更改未保存在`myVariable`.

你能帮我么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:33:46.000

当您调用`$(myVariable)`它时，它会创建一个具有 内容的 DOM 元素`myVariable`，然后您的`attr`调用会修改该元素。的原始内容`myVariable`不会受到任何影响，因为它只是文本。

如果您想取回操作将产生的文本表示，您可以将其附加到一个空元素，然后检索其 html 内容：

```
var newElement = $(myVariable)... // your code
myVariable = $("<p/>").append(newElement).html(); 
```

或者简单地说（如果支持）：

```
myVariable = newElement[0].outerHTML; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:43:35.333

尝试清理浏览器缓存。在这里工作。看：

```
<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <title>Index JQuery Mobile</title>
        <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $('#busca').find('div.grid-12-12').each(function() {
                    $(this).attr('class', 'grid-2-12');
                    alert($(this).attr('class'));
                });
            });
        </script>
    </head>
    <body>
        <div id="busca">
        <div class="grid-12-12"></div>
        <div class="grid-12-12"></div>
        <div class="grid-12-12"></div>
        <div class="grid-12-12"></div>
        <div class="grid-12-12"></div>
        </div>
    </body>
</html> 
```

# macos - Mac OS X 10.8.1 - 文件不再被观看

> ID：12134075
> 
> 赞同：1
> 
> 时间：2012-08-26T21:31:25.090
> 
> 标签：macos, inotify

刚刚更新到 OS X 10.8.1。我不确定这是否是原因，但基本上紧随其后，程序无法检查文件更改。

在我的 makefile 中，以下命令不起作用（它不会在文件更改时触发）

```
watchr -e "watch('scripts/.*\.js') {system 'make scripts'}" 
```

在 Sublime Text 上，当我在文件夹中创建一个新文件时，该新文件不会显示在侧栏中，但它会直接正确创建。

但是，此命令有效（我相信基于 Node 的 watch 命令）：

```
stylus -w -u nib styles/ie8.styl -o public/styles 
```

任何人都知道发生了什么或如何调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:10:07.520

这不会提供非常丰富的信息，但也许会有所帮助......

Sublime Text 论坛中有一个帖子[讨论这个问题](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=4667&start=20)，它似乎并没有被 OS X 10.8.1 所隔离。

似乎还有一个关于[watchr not always working](https://github.com/mynyml/watchr/issues/38)的线程，而且这个问题似乎也与平台无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:23:40.760

**编辑：**再次重新启动后，这现在不起作用。我讨厌这个！：/

我在使用 Sublime Text 2 和 Guard（它开始使用轮询后备）时也遇到了这个问题。

我相信我找到了解决方法：

1.  下载[Onyx](http://www.macupdate.com/app/mac/11582/onyx)并在选中自动化选项卡下的所有选项的情况下运行它
2.  完成后关闭机器并重新打开

此时，我突然能够在 Sublime Text 2 文件浏览器中看到在终端中使用 mkdir 创建的新目录。Guard 也在没有投票后备的情况下工作。

我希望这会有所帮助，这真的开始让我紧张了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T02:49:48.633

我敢打赌，你已经成为“Mac OSX”环境变量变化的不知情的受害者......

请查看以下内容以确定您的环境变量是否在 Mountain Lion 上正确设置，因为 environment.plist 现在已弃用...

[Env Plist 已弃用](https://stackoverflow.com/questions/6770411/mac-os-x-lion-no-longer-recognizes-environment-plist)
[Mac OSX - Sublime](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=8892)

# java - Android - 检查某些值不会

> ID：12134079
> 
> 赞同：0
> 
> 时间：2012-08-26T21:31:47.947
> 
> 标签：java, android

我正在处理 Android 计费并尝试正确设置 onPurchaseStateChange 方法，但它似乎不起作用。

```
 @Override
    public void onPurchaseStateChange(PurchaseState purchaseState, String itemId,
            int quantity, long purchaseTime, String developerPayload) 
    {
        if (purchaseState == PurchaseState.PURCHASED) 
        {
            mOwnedItems.add(itemId);

            if ( itemId != null && itemId.trim().equals("3") )
            {
                  Intent myIntent = new Intent(ExtraHelpActivity.this, PsychologyActivity.class);
                  ExtraHelpActivity.this.startActivity(myIntent);
            }
            if ( itemId != null && itemId.trim().equals("4") )
            {
                  Intent myIntent = new Intent(ExtraHelpActivity.this, NumberOfBusinessesActivity.class);
                  ExtraHelpActivity.this.startActivity(myIntent);   
            }                
        }
        else 
        if (purchaseState == PurchaseState.CANCELED) 
        {  
            // purchase canceled
        } 
        else 
        if (purchaseState == PurchaseState.REFUNDED) 
        {
            // user ask for a refund
        }
        else
        {   
            if ( itemId != null && itemId.equals("3") )
            {
                  Intent myIntent = new Intent(ExtraHelpActivity.this, PsychologyActivity.class);
                  ExtraHelpActivity.this.startActivity(myIntent);
            }
            if ( itemId != null && itemId.equals("4") )
            {
                  Intent myIntent = new Intent(ExtraHelpActivity.this, NumberOfBusinessesActivity.class);
                  ExtraHelpActivity.this.startActivity(myIntent);   
            }                   
        } 
```

因此，当 purchaseId 为“4”或“3”并且 purchaseState == PurchaseState.PURCHASED ....由于某种原因，它似乎没有进入该 if 语句，并且没有执行转到下一页的意图?

有人知道为什么会这样吗？这似乎很奇怪。它可能是Java的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:28:35.877

PurchaseState 不是原始数据类型，如`int`, `long`,`float`等，因此您应该使用：

```
purchaseState.equals(PurchaseState.PURCHASED) 
```

而不是`==`，就像您使用字符串一样：

```
string1.equals(string2) // Results you expect 
```

不一样

```
string1 == string2 // Don't do this... 
```

# powershell-2.0 - Powershell为什么弹出窗口，如何停止它

> ID：12134082
> 
> 赞同：1
> 
> 时间：2012-08-26T21:32:26.480
> 
> 标签：powershell-2.0

`pip`不知道为什么当我在 powershell 之类或内部执行 Python 工具时`nosetests`，会显示一个单独的弹出命令行窗口，执行我的命令，然后消失。这很烦人，因为我几乎看不到可执行输出，尤其是弹出窗口关闭前的最后几行。

我假设我可以更改一些设置来停止弹出窗口？

我在 Windows 7 中使用 Powershell 2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:26:14.957

Powershell 不是 cmd.exe，它有不同的控制台界面。很可能，您的 py 工具正在写入一个不存在的 shell 窗口。您可以使用以下语法解决此问题：

`cmd /c script.py`

当您直接从 PS 提示符执行 python 脚本时，您所做的是在命令完成所需的时间段内触发 DOS shell。由于没有实现“暂停”，因此当命令完成时，shell 窗口将关闭。

一个测试脚本

```
# tester.py, just a test
print "This is a test script, that is all." 
```

PS中的输出：

```
C:\src\python
{powem} [36] --> .\tester.py
C:\src\python
{powem} [37] --> cmd /c .\tester.py
This is a test script, that is all. 
```

mp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T21:42:24.303

对于有类似问题的人，请看一下这个[答案](https://serverfault.com/questions/402083/why-powershell-runs-executables-in-separate-window)，我认为这个解决方案最终解决了我的问题。就我而言，我必须重新启动计算机才能使其正常工作。

# jquery - 如何确保“索引页面”正在调用 load() 以加载其他页面的内容？

> ID：12134086
> 
> 赞同：0
> 
> 时间：2012-08-26T21:33:07.250
> 
> 标签：jquery, html

如果有人能指出我正确的方向，我将不胜感激。我有一个网站的五个页面：

*   索引.html
*   汽车.html
*   飞机.html
*   玩具.html
*   联系人.html

'index.html' 进行`load()`调用并仅加载单击的导航链接的内容。假设用户键入 URL：

“http://www.abc.com/cars.html”

用户被带到“cars.html”页面而不是“index.html”。现在，如果“cars.html”页面导航中的用户点击飞机，我想调用“index.html”，然后`load()`调用以加载“planes.html”的内容。

所以几乎我正在检查“index.html”页面，如果它不是加载其他页面内容的页面，那么我想调用“index.html”，然后在其中加载请求的页面内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:35:51.037

用 javascript 检查当前页面，`window.location`然后在需要的地方重定向

# sockets - socket.readLine() 读取两次

> ID：12134090
> 
> 赞同：0
> 
> 时间：2012-08-26T21:33:29.800
> 
> 标签：sockets, readline

我制作了一个客户端服务器聊天程序，但是由于某种原因，当我向服务器发送某些东西时，反之亦然，我收到了一个额外的空行

例如，如果客户端说“你好”，服务器就会收到 .... { client : hello client : } 这些是发送和接收函数

```
public static void send(){
    out.println(message_out);

    }

public void read(){      

    try {
        while(true)
        {

        message_in = in.readLine();

            ConversationBox.append("Client :"+message_in+"\n");

        }
    } catch (IOException e) {

   System.out.println("Client disconnected!");
   e.printStackTrace();

    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:39:37.850

第二次阅读似乎是 null 值，这会导致异常和 while 循环结束。相反，您应该使用以下 while 循环：

```
while ((message_in = in.readLine()) != null)
    ConversationBox.append("Client :"+message_in+"\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:47:56.847

您的协议无法唯一标识消息的结尾。如果消息是“foo\nbar”，则将其发送为“foo\nbar\n”。由于接收方将换行符解释为消息分隔符，因此接收方将显示为两条消息，“foo”和“bar”。

如果要使用换行符作为消息分隔符，则必须执行以下两项操作之一：

1.  确保没有消息包含换行符。

2.  如果消息包含换行符，请以某种方式对其进行转义并在接收器中检测到它。

否则，消息“Hello\n”将作为“Hello\n\n”传输并作为“Hello”接收，后跟一个空消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:10:11.857

好吧，谢谢大卫施瓦茨，我用过

```
if(message_in.isEmpty()){}
else
 ConversationBox.append("Server :"+message_in+"\n"); 
```

它工作正常

# android - 暂时关闭铃声

> ID：12134094
> 
> 赞同：1
> 
> 时间：2012-08-26T21:34:13.110
> 
> 标签：android, ringtone

当有人来电时，我的应用程序会关闭铃声，以免分散用户的注意力。那么你能告诉我如何关闭Android中的铃声吗？

**编辑：**

看来我需要使用这个：http://developer.android.com/reference/android/media/Ringtone.html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:00:53.180

我想我已经找到了解决方案。如果其他人需要它，我在这里复制我的解决方案：

```
AudioManager manager = (AudioManager) getApplicationContext().getSystemService(Context.AUDIO_SERVICE);
manager.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
```

有一个管理器类被称为[`AudioManager`](http://developer.android.com/reference/android/media/AudioManager.html)控制音频等。[`setRingerMode(int mode)`](http://developer.android.com/reference/android/media/AudioManager.html#setRingerMode%28int%29)它有一个接受整数标志的实例方法。

完成静音后，您可以通过传入此标志来更改铃声的状态[`RINGER_MODE_NORMAL`](http://developer.android.com/reference/android/media/AudioManager.html#RINGER_MODE_NORMAL)

# haskell - Haskell 中的游戏服务器

> ID：12134097
> 
> 赞同：14
> 
> 时间：2012-08-26T21:34:59.603
> 
> 标签：haskell, network-programming, lazy-evaluation

我在 Haskell 中使用`Network`and`Gloss`作为游戏服务器。它工作正常，除了客户端必须关闭服务器才能接收它发送的数据。我敢打赌，这是一个懒惰的例子......

极简服务器：

```
import Network
import System.IO

main = do
    sock <- listenOn (PortNumber (fromIntegral 12345))
    loop sock

loop sock = do
    (hIn, _, _) <- accept sock
    str <- hGetContents hIn
    print str
    loop sock 
```

极简客户：

```
import Network
import System.IO
import Graphics.Gloss.Interface.IO.Game

main = playIO
    (InWindow "Test Multi" (500, 500) (500, 500))
    white
    60
    Nothing
    draw
    (\_ x -> return x)
    advance

draw Nothing = return blank
draw (Just x) = return (Text (show x))

advance _ Nothing = do
    hOut <- connectTo "000.000.0.0" (PortNumber (fromIntegral 12345))
    hSetBuffering hOut NoBuffering
    hPutStr hOut "Hello!"
    return (Just hOut)
advance _ x = return x 
```

我启动服务器，等待 10 秒，然后启动客户端，等待 15 秒，看到服务器上没有任何反应，关闭客户端，看到“你好！” 突然出现在服务器上。我想要“你好！” 在客户端运行时出现在`advance`通话中，否则我无法制作多人游戏（呜咽）！

* * *

但是，如果我将客户的代码更改为

```
main = loop Nothing
loop x = do
    x' <- advance 0 x
    getLine 
```

服务器立即显示“你好！” 当客户在等待我的输入时。

* * *

正如另一个问题中所建议的那样，我尝试使用爆炸模式和`hClose`：

```
-- ...
!str <- hGetContents hIn
hClose hIn
-- ... 
```

这使得输出立即出现，而无需关闭客户端。那太棒了。但是，我打算使用字节串，因为我发送到服务器的数据是序列化的，所以我`import qualified Data.ByteString as B`更改`hGetContents`为`B.hGetContents`，这使得问题再次出现。

* * *

这个问题确实是一个懒惰的例子。`hGetContents`懒惰地读取 的所有内容`Handle`，因此它仅在关闭时完成，当客户端中止连接时。相反，我使用`hGetLine`它在每次遇到 a 时返回内容`\n`，我将其用作`end-of-message`标记。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T23:40:52.757

我可能完全错了，但问题不是 hGetContents 吗？当然，这应该等到通过您的套接字发送的*全部*内容到达下一行（打印...）之前。hGetContents*旨在*为您提供在套接字关闭之前发送的所有内容。hGetLine 之类的东西可以立即终止，您可以让套接字保持打开状态，以便稍后发送更多数据。然后，您的客户端可以使用 hPutStrLn 而不是 hPutStr。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T21:38:54.610

它默认为行缓冲输出，这就是为什么`hPutStr`（不提供行结尾）在刷新缓冲区之前不输出任何内容的原因。有两种方法可以解决这个问题：

`hFlush stdout`a)在您想要刷新输出的任何时候手动调用。

b) 用于`hSetBuffering`将缓冲设置为`NoBuffering`

所有这些功能都可以在`System.IO`模块中找到。

编辑：没关系，我刚刚看到你在客户端做了什么。我带着歉意收回我的回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T04:59:33.483

可能，您需要禁用[算法 Nagle](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)。试试这个代码：

```
import Network.Socket

setSocketOption sock NoDelay 1 
```

# java - 如何解析 Java 中的基本离散数学语句？

> ID：12134099
> 
> 赞同：2
> 
> 时间：2012-08-26T21:35:10.883
> 
> 标签：java, regex, algorithm, parsing, discrete-mathematics

我想制作一个Java程序来帮助人们学习基本的离散数学（也就是说，检查语句的真值）。为此，我需要能够检测用户输入了多少变量、有哪些运算符以及有哪些量词（如果有的话）（∃ 和 ∀）。**有没有一个很好的算法可以做所有这些事情？**

只是让你知道，我不只是想要一个结果；我想完全控制他们的输入，这样我就可以向他们展示合乎逻辑的证据。（所以像将它传递给 JavaScript 这样的事情是行不通的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:57:28.077

我使用的技术是使用上下文无关语法解析输入字符串。有很多框架可以帮助您做到这一点，我过去曾亲自使用[ANTLR](http://www.antlr.org/)将输入字符串解析为离散逻辑树。ANTLR 允许您定义一个可以映射到 Java 类型的 CFG。这允许您映射到数据结构以存储和评估表达式的真值。当然，您也可以提取数据结构中包含的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:20:28.477

好的，所以，你的问题有点含糊，但我想我理解你想要做什么：一个处理一阶逻辑公式的教育辅助工具，逐步向用户展示如何使用这些公式，对吧？我认为这个想法很有价值，而且完全可行，即使是一个人的项目，但这并不容易，你必须学习很多新东西——但它们都是非常有趣的东西，所以即使没有任何结果，您也肯定会获得一些有价值的知识。

我建议你从小处着手。我首先构建一个[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)来*识别*零阶逻辑公式（一台机器将决定一个公式是否有效，即它会接受“A ^ B”但它会拒绝“^ A ^”） . 接下来，您必须设计[一种存储公式的方法](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，然后您才能实际处理它。`TRUE AND NOT (TRUE AND FALSE)`话又说回来，从小做起：一台接受有效零阶逻辑公式（如 如果您喜欢冒险，请添加变量并制作方程式：`A AND TRUE = TRUE`-使用归约和真值表很容易解决这些问题。

绑定变量的量词会变得很棘手，这就是[自动化定理证明](http://en.wikipedia.org/wiki/Automatic_theorem_proving)可能发挥作用的地方；但是，这完全取决于您想要做什么：将转换实现为各种范式，并逐步向学生展示该过程将相当容易，而且相当有用。

无论如何，我认为这是一个不错的个人项目，你可以从中学到很多东西。如果你在大学里，你甚至可以最终获得一些学分。

# jquery - jQuery .get 和 .css 设置背景图片

> ID：12134105
> 
> 赞同：1
> 
> 时间：2012-08-26T21:36:13.187
> 
> 标签：jquery, css, jquery-hover, jquery-get

我有几个 div 在菜单上组成一个按钮。使用 jQuery，我试图将 div 更新为悬停背景图像，而不使用单独的选择器。

```
$(document).ready(function () {
   $(".menuitem div").on('hover', function () {
      $("div").get(1).css('background-image', 'url("img/header/leftHov.png");');
   });
}); 
```

当我运行这段代码时，我得到“Object div has no method 'css'”。如果您想知道，我的 HTML 看起来像这样：

```
<div style="width:100px;" class="menuitem">
    <div style="background: url('img/header/leftReg.png');">
    <div style="background:url('img/header/midReg.png');background-repeat:repeat-x;">
    <a href="./about.php" class="menu">About </a>
    <div style="background:url('img/header/rightReg.png');">
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T21:38:40.987

[`.get()`](http://api.jquery.com/get/)会给你 DOM 元素，而不是 jQuery 对象。你应该[`.eq()`](http://api.jquery.com/eq/)改用。但是，由于您已经将事件绑定到`div`您想要的，只需使用`$(this)`：

```
$(this).css('background-image', 'url("img/header/leftHov.png")'); 
```

# objective-c - 加载资源后立即在 AVPlayer 中查找某个位置

> ID：12134109
> 
> 赞同：21
> 
> 时间：2012-08-26T21:36:58.440
> 
> 标签：objective-c, ios, cocoa-touch, video, avplayer

**这有效：**我有一个`AVPlayer`在加载视频后立即播放的视频。这很好用。

**这不会**：

我不想从头开始播放视频，而是想在给定位置播放它。所以我等到资产准备好使用 KVO 进行播放：

```
BOOL isReadyToSeek = (self.playerItem.status == AVPlayerStatusReadyToPlay) 
```

然后寻找给定的时间

```
[playerItem seekToTime:timeInTheMiddleOfTheVideo completionHandler:myHandler]; 
```

但是播放器将始终在初始搜索时从视频的开头开始。

**更新** 我在几秒钟内尝试了 dispatch_after ，但这也不起作用。它在播放后有效，但最初从不。

当我观察时，`self.player.currentItem.duration`我不断`0`得到`value`and `timescale`。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-27T02:23:04.950

几件事可能对您有所帮助：

1.  在检查播放器是否准备好播放时，我会检查播放器本身以及播放器的当前项目。

    ```
    if(self.player.status == AVPlayerStatusReadyToPlay &&
       self.player.currentItem.status == AVPlayerItemStatusReadyToPlay) {
        [self.player play];
    } 
    ```

2.  如果您寻求例如 15 秒，它可能会从视频的开头开始，而不是如果那是最近关键帧的位置。要强制玩家寻找确切的位置（注意：这将需要几秒钟的时间），请执行以下操作：

    ```
    Float64 seconds = 500.0f;
    CMTime targetTime = CMTimeMakeWithSeconds(seconds, NSEC_PER_SEC);
    [self.player seekToTime:targetTime
     toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero]; 
    ```

    或者，您可以通过将参数之一指定为无穷大来显式地在指定点之前/之后寻找关键帧：

    ```
    [self.player seekToTime:targetTime
     toleranceBefore:kCMTimePositiveInfinity toleranceAfter:kCMTimeZero]; 
    ```

# php - Datamapper ORM / Codeigniter - - - 验证关系

> ID：12134116
> 
> 赞同：1
> 
> 时间：2012-08-26T21:37:38.750
> 
> 标签：php, codeigniter, codeigniter-datamapper

我有以下数据库：

* * *

```
CREATE TABLE users
(
id BIGINT NOT NULL AUTO_INCREMENT,
PRIMARY KEY (id)
);

CREATE TABLE likes
(
id BIGINT NOT NULL AUTO_INCREMENT,
user_id BIGINT,
idea_id BIGINT,
PRIMARY KEY (id)
);

CREATE TABLE ideas
(
id BIGINT NOT NULL AUTO_INCREMENT,
PRIMARY KEY (id)
); 
```

* * *

用户模型：

```
// --------------------------------------------------------------------
// Relationships
// --------------------------------------------------------------------

public $has_many = array( 'like' , 'idea' , 'comment' );

// --------------------------------------------------------------------
// Validation
// --------------------------------------------------------------------

var $validation = array(
    'username' => array(
        'label' => 'Username',
        'rules' => array('required', 'trim', 'unique', 'min_length' => 3 )
    ),
    'password' => array(
        'label' => 'Password',
        'rules' => array('required', 'trim', 'min_length' => 3 ,'encrypt' )
    )
); 
```

* * *

理念模型：

```
public $has_one = array('user');

public $has_many = array('like');

// --------------------------------------------------------------------
// Validation
// --------------------------------------------------------------------

public $validation = array(
    'user' => array(
        'rules' => array('required')
    )
); 
```

* * *

喜欢模型：

```
// Relationships
// --------------------------------------------------------------------

public $has_one = array( 'user' , 'idea' );

// --------------------------------------------------------------------
// Validation
// --------------------------------------------------------------------

var $validation = array(
    'user' => array(
        'rules' => array('required', 'unique_pair' => 'idea' )
    ),
    'idea' => array(
        'rules' => array('required')
    )
); 
```

* * *

像控制器

```
 $idea = new Idea(1);

    $user = new User(1);

    $like = new Like(); 

    if( !$like->save( array( $idea , $user ) ) )
    {
          echo $like->error->all;
    }
    else
    {
      echo "ok";    
    } 
```

* * *

问题是我总是没问题，喜欢保存在数据库中并且没有得到验证。

我想要的是让两个字段（ user_id ， idea_id ）唯一

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:07:26.680

在模型中添加`$model`和`$table`属性，这支持关系。之后，验证您的`foreign keys`. 记住模型名称的单数和表名的复数。

```
public $model = 'user';
public $table = 'users';

....
public function __construct($id = NULL) {
    parent::__construct($id);
} 
```

# c# - 创建全局方法以显示表单

> ID：12134120
> 
> 赞同：0
> 
> 时间：2012-08-26T21:38:32.403
> 
> 标签：c#, winforms

```
Form1 frm = new Form1();
frm.mdiParent=this;
frm.show(); 
```

我想创建一个全局方法`showFrm(Form formToShow)`，我可以从项目中的任何地方访问它。

我试过了。

```
public void showFrm(Form formToShow)
{
    formToShow f=new formToShow();//getting error here
    f.mdiParent= mdiForm;
    f.show();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T21:59:29.637

将此方法放在您的“唯一父表单”类中：

```
public void ShowMdiChild<T>() where T: Form, new()
{
    var form = new T();
    form.MdiParent = this;
    form.Show();
} 
```

用法：

```
yourOnlyParentForm.ShowMdiChild<SomeForm>(); 
```

我还要提醒您，C# 区分大小写。

# objective-c - NSNumber 有 unsignedIntValue 和 unsignedLongValue。我以为他们是一样的？

> ID：12134121
> 
> 赞同：0
> 
> 时间：2012-08-26T21:38:38.883
> 
> 标签：objective-c, types, nsnumber

我认为默认情况下`unsigned int`是`unsigned long int`（32位）。同样，我认为`unsigned long`默认`unsigned long int`情况下（32位）。为什么 NSNumber (`unsignedIntValue`和`unsignedLongValue`) 上有两个选择器，或者我应该担心数据类型位长度？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T21:47:31.057

在 LP64（Mac OS 64 位）上，long 是 64 位宽，而 int 只有 32 位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T02:52:10.493

我了解 OSX 和 iOS 的架构有限，但总的来说，除了标准中保证的基本相对顺序之外，您不应该对整数大小做出任何假设。

如果您确实需要特定大小的整数值，请使用 uint8_t、uint16_t、uint32_t 和 uint64_t 类型。

# php - 如何以 OOP 方式处理文件？

> ID：12134125
> 
> 赞同：2
> 
> 时间：2012-08-26T21:38:53.970
> 
> 标签：php, oop, symfony, symfony-2.1

我需要复制、移动和删除文件。

是否有任何组件或类？

我发现了这个，但它只会移动：[http ://api.symfony.com/master/Symfony/Component/HttpFoundation/File/File.html](http://api.symfony.com/master/Symfony/Component/HttpFoundation/File/File.html)

或者我应该坚持使用本机功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:02:07.983

关于 Symfony 框架，您可以查看[Symfony\Component\Filesystem\Filesystem](http://api.symfony.com/master/Symfony/Component/Filesystem/Filesystem.html)

您发布的链接是 HttpFoundation 中的一个类，仅用于上传文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:41:39.297

PHP 有很多函数来处理文件系统。

*   该[`copy()`功能](http://php.net/manual/en/function.copy.php)顾名思义 - 复制文件
*   该[`rename()`函数](http://php.net/manual/en/function.rename.php)实际上重命名和/或移动文件。linux 用户将熟悉此行为作为`mv`命令。
*   该[`unlink()`函数](http://php.net/manual/en/function.unlink.php)用于删除文件。

[PHP 的文档](http://www.php.net/manual/en/ref.filesystem.php)有一整节专门用于文件系统操作的特性。

* * *

面向对象的方法将在何时以及如何在代码中实现这些功能时发挥作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T22:38:16.203

您可以启动自己的帮助程序类来包装程序命令吗？或者，您可以查看一些流行的文件系统帮助程序类或类似框架。

```
class File {

    public static function exists($file) {
        return file_exists($file);
    }

    public static function copy($file, $destination) {
        // checks
        return copy($file, $destination);
        // error handling
    }

    public static function move($file, $destination) {
        return rename($file, $destination);
    }

    public static function delete($file) {
        return unlink($file);
    }
}

File::copy( 'test.txt', 'copy.txt' ); 
```

# java - 让 android 应用程序使用搜索查询打开谷歌地图

> ID：12134127
> 
> 赞同：-2
> 
> 时间：2012-08-26T21:39:14.403
> 
> 标签：java, android, eclipse, maps

所以我正在尝试制作一个应用程序，我的下一步是当用户单击特定按钮时，它将打开带有预定义搜索查询的谷歌地图。这是我的第一个应用程序。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:42:17.503

```
 mButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(final View v) {
    String uri = String.format("geo:%f,%f", latitude, longitude); // for example pass geo:75.333000,30.003030 to search for latitude = 75.333000 and longitude = 30.003030 as your default search query
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
    startActivity(intent);
        }
    }); 
```

# testing - 将二进制数据转换为机载数据包？

> ID：12134128
> 
> 赞同：6
> 
> 时间：2012-08-26T21:39:25.600
> 
> 标签：testing, wireless, wireshark, wifi

是否有任何软件库和/或无线驱动程序可以将二进制数据序列转换为空中无线数据包？例如，如果有人使用**Airpcap** / **Wireshark**捕获了一系列有趣的数据包，是否有一些库可以提供该二进制数据以便将其转换回 802.11 无线数据包以进行测试？如果是这样，我们是否也可以对数据包的值进行微小的更改，以生成各种各样的测试场景？有人知道启用或协助这种情况的工具/库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:22:28.890

虽然周围有许多工具可用于重放和发送数据，但最先进和最灵活的工具之一是：

## TCP重放

[http://tcpreplay.synfin.net/](http://tcpreplay.synfin.net/)

您可以编辑不同级别的数据包，然后发送它们。

摘自他们的网站：

> ...您可以...将流量分类为客户端或服务器，重写第 2、3 和 4 层标头，最后重播...

有一些替代品，例如[bitTwist](http://bittwist.sourceforge.net/)和[WinPcap](http://www.winpcap.org)库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T01:44:36.217

大多数 Wi-fi 工具都是为破解网络或窃取数据而设置的，因此您可能能够将现有攻击者的工具或库（如[ettercap](http://ettercap.sourceforge.net/ "ettercap 页面")或[aircrack-ng](http://www.aircrack-ng.org/)）重新用于测试目的。我遇到的大多数工具都集中在以太网、tcp 和 http 上。

以下软件列表可能值得进一步调查：

1.  [TCP重放](http://tcpreplay.synfin.net/ "TCPReplay 网站")
2.  [位扭](http://bittwist.sourceforge.net/ "位扭")
3.  [aircrack-ng 套件](http://www.aircrack-ng.org/)
4.  [克星](http://nemesis.sourceforge.net/ "克星")
5.  [数据包编辑器](http://www.packeteditor.com/ "数据包编辑器")

如果您愿意为协议栈中更高的东西妥协，Bit-Twist 和 TCPReplay 是您最好的选择。

# css - 在 ASP.NET MVC 中，为 包含来自服务器端代码的链接按钮？

> ID：12134134
> 
> 赞同：0
> 
> 时间：2012-08-26T21:40:12.900
> 
> 标签：css, asp.net-mvc

> **可能重复：**
> [在菜单中标记“当前”导航项的最佳方式](https://stackoverflow.com/questions/7970660/best-way-of-mark-the-current-navigation-item-in-a-menu)

现在我们没有为我们的菜单按钮设置任何 css 类，但是当一个按钮通过 jQuery 悬停时我们会这样做。我想在服务器端代码中设置 css 类**处于活动状态**，因此如果用户直接导航不同的部分，则相应的菜单按钮将已经具有正确的 css 样式。唯一的问题是我不确定如何在 MVC 中最好地做到这一点。按钮位于这样的共享局部视图中（当然功能不完整，但应该足够让您了解这个想法）：

```
@if (User.Identity.IsAuthenticated)
{
    <ul id="mainMenu">
        <li>@Html.ActionLink("Accounts", "List", "Accounts", new { userId = 2 }, null)</li>
        <li><a href="?">Config</a></li>
        <li><a href="?">Reports</a></li>
    </ul>
} 
```

当用户单击“帐户”按钮时，我想为`<li>`元素设置一个 css 类为**active**。这样做是`AccountsController`最好的（或唯一的）地方吗？即使是共享的部分视图？

以下是用户单击 Accounts 链接时调用的方法：

```
[HttpGet]
public ViewResult List(Int64 userId)
{
    var serviceAccounts = _accountManager.GetAccounts(userId);
    var accounts = Mapper.Map<IEnumerable<ServiceModels.Account>, List<AccountModel>>(serviceAccounts);

    return View("List", accounts);
} 
```

先感谢您！

# java - 将按钮添加到 JPanel

> ID：12134135
> 
> 赞同：0
> 
> 时间：2012-08-26T21:40:31.260
> 
> 标签：java, swing, jpanel, layout-manager

我有这段代码可以创建从 A 到 Z 的按钮，然后当单击按钮时会`JOption`出现一条消息，说明单击了哪个按钮（我还没有添加那部分代码）

但我的问题是我不知道如何将按钮代码添加到面板然后显示它。因为我想为刽子手游戏的每个部分创建 4 个面板

*   面板 1 = 流布局中的按钮
*   面板 2 = 刽子手的图像
*   面板 3 = 隐藏词
*   面板 4 = 控制按钮

有人可以帮忙吗？

到目前为止，这是我的代码：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class Hangman extends JFrame{

    public Hangman(){

        setLayout(new FlowLayout());

        for(char i = 'A'; i <= 'Z'; i++){
            String buttonText = new Character(i).toString();
            JButton button = getButton(buttonText);
            add(button);
        }
    }
    public JButton getButton(final String text){
    final JButton button = new JButton(text);
        button.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){

            }
        });
        return button;
    }
    public static void main (String [] args){
        JFrame frame = new JFrame();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-21T17:02:22.983

我想你忘记了调用 setSize 方法

```
public static void main (String [] args){
   JFrame frame = new JFrame();
   frame.setSize(200,300);
   frame.setVisible(true);
   } 
```

# php - 一种动态添加到表中的方法，可以删除值

> ID：12134138
> 
> 赞同：0
> 
> 时间：2012-08-26T21:41:49.150
> 
> 标签：php, jquery, ajax, html

> **可能重复：**
> [使用 jquery 在表中动态添加删除行](https://stackoverflow.com/questions/2228772/dynamically-add-remove-rows-in-table-using-jquery)

我一直在尝试 google 演示，但不知道如何措辞。

我希望能够拥有需要信息的文本框。当您单击添加（在文本框旁边）时，它会填充下面存储信息的表格。添加的越多，表格就越长。您还可以删除表中的值。

我需要做什么？有什么例子可以说明这叫什么吗？

谢谢

# image-processing - cvMatchShapes 函数返回奇怪的结果

> ID：12134139
> 
> 赞同：1
> 
> 时间：2012-08-26T21:41:52.767
> 
> 标签：image-processing, opencv, computer-vision, emgucv

我在 cvMatchShapes() 函数的帮助下比较了两个相似的形状。

```
 result  =  CvInvoke.cvMatchShapes(shapeA, shapeB, Emgu.CV.CvEnum.CONTOURS_MATCH_TYPE.CV_CONTOURS_MATCH_I3, 0); 
```

但我得到的结果比较大， 2.3 。

当我比较两个**相同**的形状时：

```
result  =  CvInvoke.cvMatchShapes(shapeA, shapeB, Emgu.CV.CvEnum.CONTOURS_MATCH_TYPE.CV_CONTOURS_MATCH_I3, 0); 
```

我得到结果 1.25。（据我所知，在这种情况下我必须得到结果〜0）

知道为什么函数会返回如此意外的结果吗？

先感谢您。

# c# - 使用回车键覆盖 datagridview 的导航不起作用

> ID：12134143
> 
> 赞同：1
> 
> 时间：2012-08-26T21:42:39.063
> 
> 标签：c#, winforms, datagridview, keydown, onkeydown

我想修改与输入键导航相关的 datagridview 的当前行为。当前的行为是跳到下一行和同一列，我想跳到下一列和同一行，所以我实现了以下 keyDown 事件：

```
 private void dataGridView1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        int numCols = this.dataGridView1.ColumnCount;
        int numRows = this.dataGridView1.RowCount;
        DataGridViewCell currCell = this.dataGridView1.CurrentCell;
        if (currCell.ColumnIndex == numCols - 1)
        {
            if (currCell.RowIndex < numRows - 1)
            {
                this.dataGridView1.CurrentCell = this.dataGridView1[0, currCell.RowIndex + 1];
            }
        }
        else
        {
            this.dataGridView1.CurrentCell = this.dataGridView1[currCell.ColumnIndex + 1, currCell.RowIndex];
        }
        e.Handled = true;
    }
} 
```

问题是，尽管我已通过以下操作正确订阅了 datagridview keydown 事件，但在按下 enter 键时并未引发上述事件：

```
this.dataGridView1.KeyDown += new KeyEventHandler(dataGridView1_KeyDown); 
```

因此，按下回车键时的当前行为仍然是默认行为：下一行和同一列。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:50:00.840

你试过KeyUp吗？我猜想移动到另一行的默认行为会发生在 KeyUp 上，给它一个测试，按下回车键并按住它，看看它是否向下移动一列，或者它是否等待你键入。也可能是按键，可能会测试其中的每一个以查看，因为您的事件可能在默认事件行为之前触发。

另外，您*确定*正在执行具有事件订阅的代码吗？如果它在标准位置，我会假设是这样，但我只是在抛出您将该行放置在一个不会执行以防万一的方法中的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:06:25.410

```
 private void dataGridView2_KeyDown(object sender, KeyEventArgs e)
 {
    if (e.KeyCode == Keys.Enter)
    {
        e.SuppressKeyPress = true;
        e.Handled = true;
        SendKeys.Send("{tab}");
    }
 } 
```

# python - 在 Python IDE 的嵌入式控制台中访问某个项目的令牌

> ID：12134157
> 
> 赞同：2
> 
> 时间：2012-08-26T21:44:13.770
> 
> 标签：python, ide, console

我目前正在使用 Python 的[NINJA-IDE](http://ninja-ide.org/)，但我希望得到一个不特定于 NINJA-IDE 的通用答案（尽管不要给我一个特定于 Eclipse、Wing、NetBeans、PyCharm 或任何其他的答案-than-NINJA Python IDE。如果答案是特定的，那就是特定于 NINJA）。

我想使用我的 IDE 附带的嵌入式交互式控制台，以便我可以快速检查一些对象、函数和类。但是，当尝试在交互式控制台中导入我的项目模块时，我收到一个`ImportError`. 该列表`sys.path`包括模块所在的目录。我尝试使用 将当前工作目录更改为模块的目录`os.chdir()`，但我仍然得到`ImportError`. 我也尝试过（在 NINJA-IDE 中）右键单击我的项目并选择“将此项目添加到 Python 控制台”，如下面的屏幕截图所示。还是越来越`ImportError`。

![将此项目添加到 Python 控制台](../Images/f963b49930c484519d13e1d571b729ab.png)

如何在嵌入式控制台中访问我的项目的函数/方法/对象/类？

**编辑：** *具体细节：*

*   该项目已命名`movie_recommendations`，所有文件都位于`C:\...\ninja projects\movie_recommendations`. 我正在谈论的模块文件是`recommendations.py`. 该文件位于`C:\...\ninja projects\movie_recommendations`所有其他文件中。

*   `sys.path`在嵌入式控制台中键入时的值是`['C:\\Program Files\\Ninja\\Ninja.exe', 'C:\\...\ninja projects\\movie_recommendations']`。

*   `import recommendations`我在嵌入式控制台中得到的错误消息是`No module named recommendations`.

    ![进口建议](../Images/a80c70bc4a5bb72f30a3af89d3ae3d0b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:54:24.313

通过 os.chdir 的当前目录不是您需要的。口译员此时已经开始了。如果有的话，您将导入 sys 模块并将路径添加到 sys.path

但总的来说，您必须告诉 IDE 的项目 PYTHONPATH 应该是什么。我不知道那个 IDE，但我认为它会在项目设置中。

例如，Eclipse 在常规设置和项目特定设置中都有一个部分，用于添加路径。

# objective-c - 当 UIView 被 UILongPressGestureRecognizer 触发时，如何防止它“跳跃”？

> ID：12134158
> 
> 赞同：1
> 
> 时间：2012-08-26T21:44:14.833
> 
> 标签：objective-c, ios, ios5, uigesturerecognizer

预期功能：

长按按钮后，可以在屏幕上拖动它。

跳虫：

当我最初开始拖动按钮时，它的中心“跳”到注册我的初始单击以触发长按的 CGPoint。例如，我长按点击右上角的按钮，一旦我开始拖动光标并按住它，按钮就会跳转到“右上角”位置。

在那次跳跃之后 - 所有拖动都很好。

代码：

```
- (void)longPress:(UILongPressGestureRecognizer*)receivedGesture
{
   if (receivedGesture.state == UIGestureRecognizerStateChanged)
   {
       CGPoint translation = [receivedGesture locationInView:self.scrollView];
       pannedBadge.center = translation;
   }
} 
```

终极问题：

这里有什么解决方案？如何使初始拖动将按钮从其原始中心移动？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:54:33.143

我通常为使视图可拖动所做的是检测触摸的起点，然后获取它（触摸）移动的差异，然后将视图的中心设置如下：我没有将其设置为绝对触摸，但我使用刚刚检测到的触摸移动相对设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:50:35.017

原因是您的翻译点是询问手势在视图中的位置，而不是它结束的视图的中心。如果您开始 pannedBadge.center 作为按钮的中心，我应该可以。希望这可以帮助！

# ruby-on-rails - 用户团队 rails app

> ID：12134159
> 
> 赞同：1
> 
> 时间：2012-08-26T21:44:26.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

我需要创建用户团队。一个用户属于一个团队（只有一个团队）一个团队有很多用户。我不知道如何让用户能够创建、加入和离开团队。以下是我到目前为止所拥有的，但我确信我做的很糟糕（而且“newby”错了）。

用户模型：

```
belongs_to :teams, dependent: :destroy

def team_member?(team)
    team_relationships.find_by_team_id(team.id)
end

def join!(team)
    team_relationships.create!(team_id: team.id)
end  

def unjoin!(team)
    team_relationships.find_by_team_id(team.id).destroy
end 
```

团队模式

```
has_many :users, through: :team_relationships, dependent: :destroy

attr_accessible :team_name, :team_id

validates :user_id, presence: true
validates :team_name, presence: true, length: { maximum: 140 }

default_scope order: 'teams.created_at DESC' 
```

团队关系模型

```
attr_accessible :team_id

belongs_to :team
belongs_to :user

validates :team_id, presence: true 
```

路线：

```
 resources :teams do
    member do
      get 'join'
      get 'leave'
    end
  end 
```

团队控制器：

```
def join
  @team = Team.find params[:team_id]
  current_user.update_attribute(:team_id, @team.id)
  redirect_to @user
end

def leave
  @team = Team.find params[:id]
  current_user.update_attribute(:team_id, nil)
  redirect_to @user
end 
```

_join_team.html.erb

```
<%= form_for(current_user.team_relationships.build(team_id: @team_id),
             remote: true) do |f| %>
  <div><%= f.hidden_field :team_id %></div>
  <%= f.submit "Join", class: "btn btn-large btn-primary" %>
<% end %> 
```

_unjoin_team.html.erb

```
<%= form_for(current_user.team_relationships.find_by_team_id(@team_id),
         html: { method: :delete }) do |f| %>
  <%= f.submit "Leave Team", class: "btn btn-large" %>
<% end %> 
```

如果你不知道我正试图为此目的调整 Hartl 教程中的一些内容。我究竟做错了什么？

我相信我已经弄清楚了模型，但现在我不确定如何让用户创建团队、摧毁团队、加入团队或离开团队。我必须在模型、控制器和视图中做什么才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T15:02:26.040

我想到了。构建方法不起作用。团队已经建立，用户也已经建立。我只需要建立连接。这是我所拥有的：

团队控制器：

```
def show
  @team =  Team.find(params[:id])
  @team_members = @team.users
  @user = User.find(params[:id]) if signed_in?
end 
```

加入按钮部分：

```
<%= form_for(@user) do |f| %>
  <%= f.hidden_field :team_id, :value => @team.id %>
  <%= f.submit "Join Team", class: "btn btn-large btn-primary" %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:33:07.107

当你只有一个关系时你不需要`has_many`，`through` 因为`belongs_to`只有用户`one`团队和团队有`many`用户它的`has_many`->`belongs_to`关系

用户模型：

```
belongs_to :team

validates :user_id, presence: true

def team_member?
    team.present?
end

def join!(team)
  return false if team_member?
  team.create!(team_id: team.id)
end  

def unjoin!
  return if team_member?
  team.destroy
end 
```

团队模型

```
has_many :users

attr_accessible :team_name, :team_id

validates :team_name, presence: true, length: { maximum: 140 }

default_scope order: 'teams.created_at DESC' 
```

TeamRelationship 模型#NOT NEEDED

_join_team.html.erb

```
<%= button_to "Join", join_teams_path(current_user.team_build(team_id: @team_id),  class: "btn btn-large btn-primary", remote: true %> 
```

_unjoin_team.html.erb

```
<%= button_to "Leave Team", leave_teams_path(current_user.team) , class: "btn btn-large btn-primary" , remote: true  %> 
```

团队控制器

```
 def join
   @team = Team.find params[:id]
   if current_user.join!(@team.id)
     redirect_to @user #NOTE dont use redirect when you perform actions with ajax.
   else
     #render some error
   end
 end

def leave
  if current_user.unjoin!
     redirect_to @user #NOTE dont use redirect when you perform actions with ajax.
   else
     #render some error
   end
end 
```

我建议您阅读一些定义明确的 rails 文档

[http://guides.rubyonrails.org/ajax_on_rails.html](http://guides.rubyonrails.org/ajax_on_rails.html)

[http://railscasts.com/episodes/205-unobtrusive-javascript](http://railscasts.com/episodes/205-unobtrusive-javascript)

[http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html)

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T22:21:54.723

不确定这是否是您的问题，但

```
belongs_to :teams 
```

应该

```
belongs_to :team 
```

属于总是单数。

编辑：看起来你要建立多对多的关系。尝试这个：

```
class User
  has_many :team_relationships, dependent: :destroy
  has_many :teams, through: :team_relationships
end

class Team
  has_many :team_relationships, dependent: :destroy
  has_many :users, through: :team_relationships
end

class TeamRelationship
  belongs_to :user
  belongs_to :team
end 
```

我认为应该这样做。

# html - Rails JSON API - 域问题？

> ID：12134161
> 
> 赞同：2
> 
> 时间：2012-08-26T21:44:41.637
> 
> 标签：html, ruby, ruby-on-rails-3, json, api

我完成了使用 rails-api gem 创建 JSON API 的 Ryan Bates #348 视频。我让它像示例中一样工作。但是，在他的示例中，他有在同一个项目中调用 API 的页面。我的目标是将客户端应用程序与 API 应用程序分开。

我创建了第二个 Rails 应用程序，它只包含对 API 数据执行 JSON 请求的页面和提交表单时的帖子。我有在 localhost:3000 上运行的客户端应用程序和在 localhost:4000 上运行的 API。

下面是客户端代码。它成功提交了新的交易记录，但 GET 没有加载交易列表。在查看日志时，它似乎正在以 HTML 格式请求它。当页面属于同一个 API 项目时，相同的代码在日志中以 JSON 形式进行调用。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8">
  $(function() {
    function addDeal(deal) {
      $('#deals').append('<li>' + deal.name + '</ul>');
    }

    $('#new_deal').submit(function(e) {
      $.post('http://localhost:4000/deals', $(this).serialize(), addDeal);
      this.reset();
      e.preventDefault();
    });

    $.getJSON('http://localhost:4000/deals', function(deals) {
      $.each(deals, function() { addDeal(this); });
    });
  });
</script>

<div id="container">
  <h1>My Deals</h1>
  <form id="new_deal">
    <input type="text" name="deal[name]" id="deal_name">
    <input type="submit" value="Add">
  </form>
  <ul id="deals"></ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:03:47.667

由于跨域策略，您有以下选项：

1.  使用 jsonp （不要这样做，因为你有你的服务器 :) 检查下面）
2.  在服务器上管理跨域资源共享，最近我在[这里](https://stackoverflow.com/questions/10304198/crud-jsonp-sencha-touch-2/12047315#12047315)写了答案如何实现这一点
3.  您可以使用 rails [ActiveResource::Base](http://api.rubyonrails.org/classes/ActiveResource/Base.html)连接到您的 api，但它可能会很慢，并且您会重复自己，除非您在后端需要一些演示逻辑。顺便说一句，检查[Nibbler](https://github.com/mislav/nibbler) gem 它可能会更好......这真的取决于你需要在后端做什么。

无论如何。我会避免方法 1，它有点开销，特别是如果你想 POST、PUT 或 DELETE，如果你有纯 JavaScript 应用程序作为 UI 运行，你可以允许使用选项 2。但是，即使您正在构建与 JS 无关的应用程序，您也总是需要一些后端处理，因此选项 3 可能是您更喜欢的。

# php - Array_unique 在应用于 array_merge() 时会出现 php 错误

> ID：12134164
> 
> 赞同：-1
> 
> 时间：2012-08-26T21:45:14.213
> 
> 标签：php

我有两个数组，我使用它们合并：

$query = array_merge($query1, $query2);

合并后我想应用数组唯一：

$query = array_unique($query);

出于某种原因，它给了我一个 php 错误，一个黑色的页面。

**我怀疑这是因为数组的结构需要合并。**

vardump 说明了 query1 和 query 2 的结构：

```
array(73) { 
    [0]=> object(stdClass)#32 (6) { 
        ["pic0"]=> string(78) "the picture1 link" 
        ["bio"]=> string(22)  "the bio1" 
    } 
    [1]=> object(stdClass)#96 (6) { 
        ["pic0"]=> string(70) "the picture2 link" 
        ["bio"]=> string(225) "the bio2" 
    } 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:49:53.927

`array_unique`通过将元素作为字符串进行比较来工作。对象通常无法转换为字符串，因此您会收到错误消息。

尝试使用数组而不是`stdClass`es，并确保设置了`SORT_REGULAR`标志。

# ruby-on-rails - 为什么rails在创建期间不插入数据，只有nil？（新脚手架）

> ID：12134166
> 
> 赞同：0
> 
> 时间：2012-08-26T21:45:21.527
> 
> 标签：ruby-on-rails, commit, null, scaffold

我对新生成的脚手架有一个烦人的问题。一切都会很好地运行，但是虽然我可以输入数据，但每次我尝试保存时，他都会成功提交 nil。适用于所有领域。

看起来像这样：

```
Started POST "/spraches" for 127.0.0.1 at 2012-08-26 23:34:03 +0200
Processing by SprachesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"nMf1+rBegI9BKoSAekzq8iLPQPAHpiiPk2DlmhEQxsQ=", "sprache"=>{"name"=>"23", "level"=>"23", "zertifikat"=>"124", "zertifikat_anders"=>"213", "zertifikat_note"=>"f23"}, "commit"=>"Create Sprache"}
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (29.0ms)[0m  INSERT INTO "spraches" ("created_at", "level", "name", "updated_at", "zertifikat", "zertifikat_anders", "zertifikat_note") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["created_at", Sun, 26 Aug 2012 21:34:03 UTC +00:00], ["level", nil], ["name", nil], ["updated_at", Sun, 26 Aug 2012 21:34:03 UTC +00:00], ["zertifikat", nil], ["zertifikat_anders", nil], ["zertifikat_note", nil]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/spraches/1
Completed 302 Found in 35ms (ActiveRecord: 31.0ms) 
```

在详细查看代码后，原因对我来说变得显而易见：我用德语（Sprache -> Language）命名我的表，Rails 试图将其设置为复数。但是，控制器只有单数形式。

```
@sprach = Sprache.new(params[:sprach]) 
```

我在参数中添加了一个“e”以匹配传入的代码。作品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:45:21.527

在详细查看代码后，原因对我来说变得显而易见：我将表命名为 in`German (Sprache -> Language)`并且 Rails 尝试将其设置为`plural`. 但是，控制器仅在`singular`表单中具有它。

```
@sprach = Sprache.new(params[:sprach]) 
```

我`"e"`在参数中添加了一个以匹配传入的代码。作品。

# c# - 会话超时重定向到取决于查询字符串的两个不同登录屏幕之一

> ID：12134174
> 
> 赞同：0
> 
> 时间：2012-08-26T21:47:13.597
> 
> 标签：c#, asp.net, .net

我有这个被惰性破坏并正在被替换的历史遗址。在更换站点准备好之前，我必须维护这个站点。

问题是我有一个需要知道登录用户组代码的站点。例如，我有两个组 Group1 和 Group2。

默认情况下，在登录页面上只是 .../login.aspx，它将存储在会话中（组 = Group1），如果用户使用 .../login.aspx?group= 进入登录页面Group2 然后他们将 Group2 存储在会话中。

这样做的原因是在我之前，它是一个非常复杂的身份验证登录屏幕，需要为多个会话变量设置站点。这么说意味着在这个阶段替换登录页面不是一个选项。

我需要一种方法，当会话超时时，用户被引导回登录页面的正确变体，并记住他们所在的页面，以便他们可以返回到该页面。

最低限度的解决方案是将他们重定向回正确的登录版本，辞职后返回他们所在的页面只是“想要”的功能。

谁能指出我如何做到这一点的正确方向，会话结束事件似乎不起作用，因为那时会话已经消失，所以没有什么可比较的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:52:24.263

如果您可以编辑登录页面，请在登录成功后将其存储在 cookie group1 或 group2 中。当登录页面加载时，检查您的组 cookie 是否存在。如果有，您可以重定向到相应的登录 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:43:52.520

我不认为你能做到这一点。

正如您所说，在 Session_End 事件中（大概您正在使用 InProc 会话来触发此事件） - 没有会话来确定用户所在的组。即使您可以获得会话变量，也没有 HttpContext在 Session_End 事件中，因为它发生在服务器上，没有 Http 请求 - 所以你将无法重定向。

此事件可能会在站点位于屏幕上时触发，此时表单身份验证将重定向回登录屏幕，或者可能在用户关闭浏览器后很久才发生。

**编辑 - 需要更多信息**

您是否为应用程序使用 InProc 会话和表单身份验证？

如果是这样，一种可能的解决方案是创建一个 HttpModule，它可以在 FormsAuthentication 识别出请求中的 Session/Auth Cookie 已过期并重定向回登录之前运行。

正如 Blam 所说 - 如果您将信息存储在另一个数据存储中 - 您可以从 HttpModule 获取此信息，并从那里进行自定义重定向。

请注意，HttpModule 将为每个请求运行，因此任何 Db 调用等都可能会消耗性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T01:22:30.153

但是你确实有 SessionID。在数据库或其他存储中，将 SessionID 与组关联。

[HttpSessionState.SessionID 属性](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.sessionid%28v=vs.100%29.aspx)

# javascript - 使用 JavaScript 检测输入的字符

> ID：12134179
> 
> 赞同：7
> 
> 时间：2012-08-26T21:47:41.143
> 
> 标签：javascript, jquery, events, keyboard, multilingual

我想在用户输入“@”时开始一个动作（启用自动完成）。我有可用的 jQuery。

通常在 QWERTY 键盘上是这样的：

```
$('textarea').live('keydown', function(e) {
  if (e.which === 50) {
    console.log('@ has been entered.');
  }
}); 
```

但是它不能在 AZERTY 键盘上正常工作。keyCode = 50 对应于`é``~``/``2`密钥。要在 AZERTY 键盘中键入“@”，它是`AltGr`+`à``@``/``0`键。

编辑：自动完成在输入 @ 时开始，并且仅在此之后。例如，当有人输入“Hello @”然后它开始，但是当他输入“Hello @nothing else”时，完整不会做任何事情。示例： http: [//mrkipling.github.com/jQuery-at-username/](http://mrkipling.github.com/jQuery-at-username/)（仅适用于 QWERTY 键盘）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:07:04.507

使用`keypress`而不是`keydown`. 虽然`keydown`与每次按下键`keypress`相关，但与翻译的字符相关，因此例如`a`可以与按下键`a`时不同`shift`，组合字符起作用，死键起作用，以及处理键盘映射中的其他差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T21:55:19.577

如何检查是否`@`作为字段值中的最后一个字符输入？

```
$("body").on("keyup", "textarea", function(e) {
    if (this.value.indexOf("@") == this.value.length - 1) {
        console.log("Starting autocomplete");
    }
});​ 
```

**演示：http:** [//jsfiddle.net/FKhPW/2/](http://jsfiddle.net/FKhPW/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-18T19:38:31.513

# 使用`event.key`和现代JS，`@`直接检查！

*没有数字代码*了。您可以直接检查密钥。

```
const input = document.getElementById("textarea");
input.addEventListener("keydown", function (event) {
    if (event.key === "@") {
        // Do something
    }
}); 
```

[Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)

[支持的浏览器](http://caniuse.com/#feat=keyboardevent-key)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T21:51:39.763

想到的唯一其他选项是检查文本输入内容的计时器。

```
var patt=new RegExp(/^@/);
var charCheck = setInterval(function(){
  if (patt.test($("#textInput").val())){
    // initiate autocomplete
  }
},100); 
```

此代码将检查元素的内容并查看它是否与字符串开头的符号`#textInput`的正则表达式匹配。`@`如果是这样，该`test()`函数将评估为 true，您可以启动自动完成代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T22:05:15.643

在这里你去**工作演示：http:** [//jsfiddle.net/LxpQQ/](http://jsfiddle.net/LxpQQ/)

从我在这里的旧回复中：

[jquery自动完成使用'@'](https://stackoverflow.com/questions/10060931/jquery-autocomplete-using)

希望它适合你，因为`:)`

**代码**

```
source: function(request, response) {
            if (request.term.indexOf("@") >= 0) {
                $("#loading").show();
                getTags(extractLast(request.term), function(data) {
                    response($.map(data.tags, function(el) {
                        return {
                            value: el.name,
                            count: el.count
                        }
                    }));
                    $("#loading").hide();                    
                });
            }
        }, 
```

# android - 从android画廊获取图像并放入gridview

> ID：12134182
> 
> 赞同：2
> 
> 时间：2012-08-26T21:48:28.487
> 
> 标签：android, gridview, image-gallery

我正在寻找一些关于如何做到这一点的建议。

我想要一个用户从 android 库中选择的活动，然后图像将被添加到活动的网格视图中。我已经成功地分别实现了两者，但是当我必须将它们结合起来时，我不知所措。网格视图教程在[这里](http://developer.android.com/guide/topics/ui/layout/gridview.html)。问题是网格视图教程使用来自 res/drawable 的图像，所以我从画廊获得的 uri 并不完全有效。

我应该如何在 ImageAdapter 类中设置图像？我一直在尝试使用手机中一张图像的 uri 地址来执行 imageView.setImageBitmap(bitmap)，但它没有用。

我正在考虑创建一个 String 的 ArrayList，其中包含从画廊获得的图像的 uri。这样我就可以轻松地添加、删除和存储图像。

与此相关的其他问题是，如果我显示图像，如果我再次调用 setAdapter，它会刷新吗？如果我从源 ArrayList 中删除，会自动删除工作吗？

谢谢

以下是我编辑的网格视图 tut 的代码：

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return imageId.size();
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        Uri targetUri = Uri.parse(tests.get(0));
        //tests contains the uri of the photo i'm trying to import from my phone gallery in string form
        Bitmap bitmap;
        bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(targetUri));
        imageView.setImageBitmap(bitmap);

        return imageView;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:07:11.877

**回答第一部分：**如果您的*测试*包含您选择的图像的 Uri，只需使用`imageView.setImageURI(targetUri)`.

**对第二部分的回答：**要刷新 GridView，只需调用`mGridView.invalidateViews()`，您的整个 GridView 将被重绘，因此您的源代码中发生的任何更改都将反映在此处。无需再次调用 setAdapter()。当您第一次绘制网格时，setAdapter() 最初只会被调用一次。之后，只需 invalidateViews() 即可刷新它。

# wordpress - 如何向 WordPress 主题添加评论

> ID：12134183
> 
> 赞同：16
> 
> 时间：2012-08-26T21:48:29.170
> 
> 标签：wordpress, wordpress-theming

如何向我的 WordPress 主题添加评论。我试过`<?php comment_form(); ?>`了，但它没有给出任何输出。我错过了什么吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-26T23:25:37.210

只需添加以下行

```
<?php comments_template(); ?> 
```

在`single.php`您要添加/显示评论模板的地方。这将在模板中添加/包含该`comments.php`文件，`single`并确保该`comments.php`文件在您的主题文件夹中也可用。

你也可以使用[Disqus](http://wordpress.org/extend/plugins/disqus-comment-system/) wordpress 插件，它是一个非常好的插件。

**参考资料：** [Codex](http://codex.wordpress.org/Function_Reference/comments_template)和[教程](http://net.tutsplus.com/tutorials/wordpress/unraveling-the-secrets-of-wordpress-commentsphp-file/)。

# email - 使用 msmtp 通过终端发送邮件工作正常，但不适用于 php mail()

> ID：12134184
> 
> 赞同：5
> 
> 时间：2012-08-26T21:48:29.543
> 
> 标签：email, smtp, gmail, php

最近我在运行 kubuntu 桌面的 ubuntu 12.04 服务器上安装了 msmtp。msmtp 的安装运行良好，我什至可以使用 gmail 的 smtp 服务器通过终端发送邮件。

我的问题是，虽然通过终端发送邮件，但它仍然不适用于 php 邮件。我曾尝试使用 php`mail()`函数，但从未收到任何电子邮件。

我检查了 apache 错误日志 (/var/log/apache2/error.log)，但它们是空的。
有谁知道如何解决这一问题？如果需要任何进一步的信息，请直说:)

同样在执行 php 脚本时，也不会出现错误。

下面的代码与 Mail Sent 相呼应，但我从未收到过电子邮件：

```
<?
if(mail( 'noreply.njmedia@gmail.com', 'Test mail from localhost', 'Working Fine.'))
{
    echo 'Mail sent';
}
else
{
    echo 'Error. Please check error log.';
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-01-24T05:00:06.090

对我来说，原因是 msmtp 配置文件的文件所有权和权限不正确。

当我尝试从 CLI as 运行 PHP 邮件发送脚本时`root`，它起作用了。但是，切换用户`www-data`并尝试再次运行脚本（也在 CLI 上）失败并显示以下消息：

```
msmtp: /etc/msmtprc: contains secrets and therefore must be owned by you
msmtp: /etc/msmtprc: contains secrets and therefore must have no more than user read/write permissions 
```

通过对 Apache（或 Nginx 等）的 HTTP 请求触发 PHP 脚本将具有相同的结果（因为 msmtp 将由`www-data`用户调用）。

假设您的 msmtp 配置文件位于`/etc/msmtprc`，这些命令将解决这些问题：

```
chown www-data:www-data /etc/msmtprc
chmod 600 /etc/msmtprc 
```

在进行这些更改之前，请考虑这些新权限是否适合您的情况（例如，是否存在安全隐患？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:19:08.763

php 邮件模块调用一个名为 sendmail 的系统命令来发送电子邮件。sendmail 由各种邮件服务器实现，例如 postfix 或 exim。如我所见， msmtp 不提供 sendmail 二进制文件。请检查是否可以通过命令行执行 sendmail。如果没有，请尝试安装 postfix。

更新：我明白了，msmtp-mta 也确实提供了 sendmail 二进制文件。如果你不想要后缀，你可以试试这个。

# php - K2_content 模块评分

> ID：12134185
> 
> 赞同：3
> 
> 时间：2012-08-26T21:48:38.810
> 
> 标签：php, joomla, module, rating, joomla-k2

我一直在重建 category_item.php 中的标准 K2 评级，以查看评级从显示为星星到显示为数字。

我所做的是，我替换了这段代码：

```
<?php if($this->item->params->get('catItemRating')): ?>
<div id="catItemRatingBlock">
 <div class="itemRatingForm">
  <ul class="itemRatingList">
    <li class="itemCurrentRating" id="itemCurrentRating<?php echo $this->item->id; ?>" style="width:<?php echo $this->item->votingPercentage; ?>%;"></li>
    <li><a href="#" rel="<?php echo $this->item->id;  ?>" class="one-star">1</a></li>
    <li><a href="#" rel="<?php echo $this->item->id;  ?>" class="two-stars">2</a></li>
    <li><a href="#" rel="<?php echo $this->item->id;  ?>" class="three-stars">3</a></li>
    <li><a href="#" rel="<?php echo $this->item->id;  ?>" class="four-stars">4</a></li>
    <li><a href="#" rel="<?php echo $this->item->id;  ?>" class="five-stars">5</a></li>
   </ul>
  </div>
  </div>
 <?php endif; ?> 
```

使用此代码：

```
<?php if($this->item->params->get('catItemRating')): ?>
<div id="catItemRatingBlock">
<div class="itemRatingForm">
   <?php
   $rating_sum=0;
   $rating_cont=0;
   $db        =& JFactory::getDBO();
   $query='SELECT * FROM #__k2_rating WHERE itemID='. $this->item->id;
   $db->setQuery($query);
   $votes=$db->loadObject();

   $rating_sum = intval($votes->rating_sum);
   $rating_count = intval($votes->rating_count);
   $evaluate = ($rating_count==0) ? "0" : number_format($rating_sum/$rating_count,1);

   $evaluate = str_replace('.0', '', $evaluate);

   $output=" Rating: ". $evaluate."/5";
   echo $output;
   ?>
   </div>
   </div>
   <?php endif; ?> 
```

我想要的是它也可以在 K2 模块上工作。我尝试使用我在上面编写的相同代码在 k2 内容模块中实现它，但这根本不起作用。

有谁知道怎么拉下来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T15:54:19.070

代替

```
<?php if($this->item->params->get('catItemRating')): ?> 
```

和：

```
<?php if($params->get('catItemRating')): ?> 
```

# iphone - 有一条跟随另一条的路径

> ID：12134186
> 
> 赞同：4
> 
> 时间：2012-08-26T21:48:48.203
> 
> 标签：iphone, c++, objective-c, c, shapes

我有一个坐标数组（地理坐标，但这不重要），我需要有一条“遵循”我们已经拥有的路径的路径。

我们需要类似下图的东西。您可以看到路径并不完全相同（不是简单的偏移），我们也不希望它缩放。

是否有一些我们可以使用的库或一些关于如何实现它的指针？

![路径](../Images/49d9de74c9773ea91ba5d46c3c670e71.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T11:58:07.180

在花了太多时间试图找到一个可行的解决方案之后，我最终编写了自己的代码：

```
CGContextBeginPath(context);
CGMutablePathRef path = CGPathCreateMutable();

MKMapPoint *mapPoints = itineraryPath.points;
CGPoint previousEdgeNormal = CGPointZero;
CGPoint previousDrawnPoint = CGPointZero;
float offsetDistance = self.pathWidth*2.5;

for(int i = 0; i < itineraryPath.pointCount; i++) {
    if(i < itineraryPath.pointCount-1) {
        MKMapPoint mapPoint = mapPoints[i];
        CGPoint point = [self pointForMapPoint:mapPoint];
        MKMapPoint secondMapPoint = mapPoints[i+1];
        CGPoint secondPoint = [self pointForMapPoint:secondMapPoint];

        float xDelta = point.x-secondPoint.x;
        float yDelta = point.y-secondPoint.y;
        float factor = xDelta > 0 ? -1 : 1;

        float segmentLength = sqrt(pow(xDelta, 2.0)+pow(yDelta, 2.0));

        float yDeltaAngle = asin(sin(M_PI/2*factor)*yDelta/segmentLength);
        float opposedAngle = M_PI/2-yDeltaAngle;
        float remainingAngle = M_PI/2-opposedAngle;
        float yOffset = sin(opposedAngle)*offsetDistance/sin(M_PI/2)*factor;
        float xOffset = sin(remainingAngle)*offsetDistance/sin(M_PI/2)*factor;

        CGPoint offsetFirstPoint = CGPointMake(point.x+xOffset, point.y+yOffset);
        CGPoint offsetSecondPoint = CGPointMake(secondPoint.x+xOffset, secondPoint.y+yOffset);

        if(i == mapPointIndex) {
            CGPathMoveToPoint(path, NULL, offsetFirstPoint.x, offsetFirstPoint.y);
            previousDrawnPoint = offsetFirstPoint;
        }
        else {
            float xNormalDifference = previousEdgeNormal.x-offsetFirstPoint.x;
            float yNormalDifference = previousEdgeNormal.y-offsetFirstPoint.y;

            float xAverage = (xNormalDifference)/2;
            float yAverage = (yNormalDifference)/2;
            CGPoint normalAveragePoint = CGPointMake(offsetFirstPoint.x+xAverage, offsetFirstPoint.y+yAverage);

            CGPathAddLineToPoint(path, NULL, normalAveragePoint.x, normalAveragePoint.y);
            previousDrawnPoint = normalAveragePoint;
        }

        previousEdgeNormal = offsetSecondPoint;
    }
    else
        CGPathAddLineToPoint(path, NULL, previousEdgeNormal.x, previousEdgeNormal.y);
} 
```

唯一需要注意的是，它还不能很好地处理锐角。

但否则会给出一些非常整洁的东西（右边是原始路径，左边是偏移）

[![地图](../Images/23359fc6d54d8c585824c77038dbbd6b.png)](https://i.stack.imgur.com/ChC3c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:15:15.533

你想要的叫做平行曲线：[http ://en.wikipedia.org/wiki/Parallel_curve](http://en.wikipedia.org/wiki/Parallel_curve)

一种生成方法是在每个点计算原始曲线的法线，然后使用该法线偏移这些点。如果您只有直线段，这非常简单。对于圆弧和贝塞尔曲线，您还需要弄清楚如何修改控制点。

# html-parsing - HTML解析和提取文本

> ID：12134187
> 
> 赞同：2
> 
> 时间：2012-08-26T21:48:55.153
> 
> 标签：html-parsing, jsoup, text-extraction

有许多资源可以解析 HTML 页面和提取文本内容。Jsoup 就是一个例子。就我而言，我想提取带有每个句子出现的 html 标记的文本内容。例如，拿这个页面

```
<html>
<head><title>Test Page</title>
<body>
<h1>This is a test page</h1>
<p> The goal is to extract <b>textual content <em> with html tags</em> </b> from html pages.
</body>
</html> 
```

我期望输出是这样的：

```
<h1>This is a test page</h1>
<p> The goal is to extract <b>textual content <em> with html tags</em> </b> from html pages. 
```

换句话说，我想在页面的文本内容中包含特定的 html 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:54:56.067

您分两步完成。首先，正如您所描述的，使用 JSoup 创建一个 DOM 树。然后使用 XSL 过滤器对其进行处理。在 XSL 过滤器中，您可以只提取您感兴趣的那些标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:44:25.097

为了得到你的结果，你可以使用这个：

```
final String html = "<html>"
        + "<head><title>Test Page</title>"
        + "<body>"
        + "<h1>This is a test page</h1>"
        + "<p> The goal is to extract <b>textual content <em> with html tags</em> </b> from html pages."
        + "</body>"
        + "</html>";

// Parse the String into a Jsoup Document
Document doc = Jsoup.parse(html);
Elements body = doc.body().children();

// Do further things here ...
System.out.println(body); 
```

*除了字符串之外`html`，您也可以加载文件或网站 - jsoup 提供了这一切。*

在此示例`body`中包含您作为结果发布的 html。

或者您是否需要选择“h1 后跟 p 标签”之类的内容？

但是你可以看看[Jsoup Selector API](http://jsoup.org/cookbook/extracting-data/selector-syntax)

# django - Django 表单选择小部件的标签

> ID：12134188
> 
> 赞同：0
> 
> 时间：2012-08-26T21:48:56.073
> 
> 标签：django, django-forms

现在，每当我创建一个具有 FK 字段的模型表单时，都会显示一个选择菜单，并且第一项是 --------- 这意味着没有选择任何内容。我怎样才能将 -------- 更改为“选择某些东西”或我想要的任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:38:24.877

这是 ModelChoiceField 的空标签。你可以设置它`ModelChoiceField(empty_label=u'your text here')`。

# c# - 如何在 C# 应用程序中集成 d3.js 图表？

> ID：12134200
> 
> 赞同：35
> 
> 时间：2012-08-26T21:51:10.307
> 
> 标签：c#, .net, d3.js

我是 Mike Bostock 的 d3.js 图表库的忠实粉丝：d3js.org。

我想用它在 C# .Net 应用程序中显示图表，但我不知道是否可行。

可以通过生成 HTM+JS 代码并在 webbrowser 窗口中呈现它来实现。但是，我知道 d3.js 库不能在没有网络服务器的情况下在本地使用（但是我不明白没有网络服务器的情况以及需要网络服务器的情况），因此简单的解决方案不起作用。

有没有人尝试开发这种 d3.js 图表的部署？您是否知道从哪里开始以获得最简单的解决方案？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T12:39:45.313

Web 服务器绝对不需要使用像 d3.js 这样的客户端 JavaScript 库。

对于 C#，您需要嵌入 Web 浏览器控件（在 WindowsForms 或 WPF 中）。

您需要确保浏览器在 IE9 标准模式下工作，如此处[所示](http://www.wiredprairie.us/blog/index.php/archives/1720)。

像往常一样创建您的网页。使用 webbrowser.navigate 导航到它们（就像文件系统上的文件一样。）

这应该有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-01-08T15:12:07.597

死灵术。

您可以在所有使用 nodeJS 的操作系统上使用 C# 和 .NET-Core 执行此操作。
绝对不需要浏览器控制。
只需使用 nuget 安装[JavaScript-Services](https://github.com/aspnet/JavaScriptServices)，然后在 nodejs 中安装 d3、jsdom 和 svg2png：

```
npm install –save svg2png
npm install –save jsdom
npm install –save d3 
```

然后在 Startup.cs 中，在 ConfigureServices 中添加 NodeServices

```
using Microsoft.AspNetCore.NodeServices;

public void ConfigureServices(IServiceCollection services)
{
      // services.AddMvc();

      // https://geeks.ms/clanderas/2016/10/18/asp-net-core-node-services-to-execute-your-nodejs-scripts/
      // https://blogs.msdn.microsoft.com/webdev/2017/02/14/building-single-page-applications-on-asp-net-core-with-javascriptservices/
      services.AddNodeServices( options => {
      // options.DebuggingPort 
      });
} 
```

添加一个输出处理程序：

```
public class AgeInfo
{

    public string age;
    public int population;

    public AgeInfo(string prmAge, int prmPop)
    {
        this.age = prmAge;
        this.population = prmPop;
    }

}

// http://gunnarpeipman.com/2017/10/aspnet-core-node-d3js/
public async Task<IActionResult> Chart([FromServices] INodeServices nodeServices)
{
    var options = new { width = 400, height = 200 };

    var data = new[] {
        new { label = "Abulia", count = 10 },
        new { label = "Betelgeuse", count = 20 },
        new { label = "Cantaloupe", count = 30 },
        new { label = "Dijkstra", count = 40 }
    };

    List<AgeInfo> ls = new List<AgeInfo>();
    ls.Add( new AgeInfo("<5", 2704659));
    ls.Add( new AgeInfo("5-13", 4499890));
    ls.Add( new AgeInfo("14-17", 2159981));
    ls.Add( new AgeInfo("18-24", 3853788));
    ls.Add( new AgeInfo("25-44", 14106543));
    ls.Add( new AgeInfo("45-64", 8819342));
    ls.Add( new AgeInfo("≥65", 612463));

    // string markup = await nodeServices.InvokeAsync<string>("Node/d3Pie.js", options, data);

    string markup = await nodeServices.InvokeAsync<string>("Node/d3chart.js", options, ls);

    string html = @"<!DOCTYPE html>
<html>
<head><meta charset=""utf-8"" />
<style type=""text/css"">
.arc text 
{
  font: 10px sans-serif;
  text-anchor: middle;
}
.arc path 
{
  stroke: #fff;
}
</style>
</head>
<body>
    <img src=""" + markup + @""" />
</body>
</html>";

    return Content(html, "text/html");
} 
```

然后添加 JavaScript

```
// Include all modules we need
const svg2png = require("svg2png");
const { JSDOM } = require("jsdom");
const d3 = require('d3');

// https://bl.ocks.org/mbostock/3887235
module.exports = function (callback, options, data) {

    var dom = new JSDOM('<!DOCTYPE html><html><head><meta charset="utf-8" /></head><body><svg width="960" height="500"></svg></body></html>');
    var document = dom.window.document;
    dom.window.d3 = d3.select(dom.window.document);

    // callback(null, dom.window.document.body.innerHTML);

    var svg = dom.window.d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height"),
    radius = Math.min(width, height) / 2,
    g = svg.append("g").attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

    var color = d3.scaleOrdinal(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

    var pie = d3.pie()
        .sort(null)
        .value(function (d) {
            return d.population;
        });

    var path = d3.arc()
        .outerRadius(radius - 10)
        .innerRadius(0);

    var label = d3.arc()
        .outerRadius(radius - 40)
        .innerRadius(radius - 40);

    /*
    var dataaa =
        [
            {
                age: "<5",
                population: 2704659
            },
            {
                age: "5-13",
                population: 4499890
            },
            {
                age: "14-17",
                population: 2159981
            },
            {
                age: "18-24",
                population: 3853788
            },
            {
                age: "25-44",
                population: 14106543
            }
            ,
            {
                age: "45-64",
                population: 8819342
            }
            ,
            {
                age: "≥65",
                population: 612463
            }
        ];
    */

        var arc = g.selectAll(".arc")
        .data(pie(data))
        .enter().append("g")
        .attr("class", "arc");

    arc.append("path")
        .attr("d", path)
        .attr("fill", function (d) {
            return color(d.data.age);
        });

    arc.append("text")
        .attr("transform", function (d) {
            return "translate(" + label.centroid(d) + ")";
        })
        .attr("dy", "0.35em")
        .text(function (d) {
            return d.data.age;
        });
    //});

    // var svgText = dom.window.document.body.outerHTML;
    // var svgText = dom.window.document.body.innerHTML;
    var svgText = dom.window.document.body.querySelector("svg").outerHTML
    // callback(null, svgText);

    // var svgText = dom.window.d3.select("svg").html();
    // svgText=process.version; // v8.6.0
    // svgText= JSON.stringify(process.versions); //
    // var pjson = require('./package.json'); svgText = pjson.version;
    // callback(null, svgText);
    // callback(null, JSON.stringify(  { width: width, height: height } ));

    // var buf = Buffer.from(svgText);
    // callback(null, JSON.stringify( buf ));
    // var output = svg2png.sync(buf, { width: width, height: height } );
    // callback(null, JSON.stringify( output ));
    //callback(null,  svgText);
    // callback(null,  'data:image/svg+xml;base64,' + Buffer.from(svgText).toString('base64'));

    svg2png(Buffer.from(svgText), { width: width, height: height })
        .then(buffer => 'data:image/png;base64,' + buffer.toString('base64') )
        .then(buffer => callback(null, buffer));

} 
```

这应该为您提供所需的 d3 图表，而无需兼容 svg 的浏览器。

您可能需要先更新 npm，然后才能（成功）安装任何 nodeJS 模块。

```
npm install -g npm 
```

您也可以在命令行应用程序中执行此操作，只是需要设置自己的 DI 约束器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-01T12:35:43.453

正在寻找相同的解决方案并偶然发现了[edge.js](https://github.com/tjanczuk/edge#scripting-nodejs-from-clr)。它可以从任何 .NET 4.5 应用程序运行并通过 Nuget 安装。它不需要安装 node.js，但你需要 node 来使用 NPM 安装 D3。确保`package-lock.json`该`node_modules`文件夹与运行时的文件位于同一目录中`edge.js`，或全局安装。我只是`npm i d3-array`从`\edge`文件夹内部运行，然后包含 *.json 和 *.js 文件，将它们设置为内容并复制到输出目录。然后它很简单：

```
class Program {
    public static async Task Start(int[] someArray) {
        var func = Edge.Func(@"
            var d3 = require('d3-array')
            return function (data, callback) {
                callback(null, 'D3 says: ' + d3.min(data));
            }
        ");
        Console.WriteLine(await func(someArray));
    }

    static void Main(string[] args) {
        Start(new int[] { 1, 2, 3, 4 }).Wait();
    }
} 
```

输出：`D3 says: 1`

注意：在 .Net7.2 中，我必须安装`Edge.Js.Binaries`NuGet 包才能在项目根目录中安装 edge 文件夹。`Edge.Js`软件包没有这样做，在 4.5 中它做到了。

# iphone - 将核心数据传递给非视图控制器类

> ID：12134204
> 
> 赞同：0
> 
> 时间：2012-08-26T21:51:37.217
> 
> 标签：iphone, core-data, nsmanagedobjectcontext

我有一个大脑类，我想获得 Rest 服务并将信息放入核心数据中。（我已经查看了 RestKit 对象映射，但还没有完全理解它并希望让它更简单）。我想在`engine`课堂上掌握核心数据知识，但为了涵盖我的基础，我将 ManagedObjectContext 添加到选项卡栏控制器中的所有 VC 中，如下所示（在应用程序委托中）：

```
UITabBarController *tabBar = (UITabBarController *)self.window.rootViewController;

NSArray *viewControllers = [tabBar viewControllers];

NSManagedObjectContext *context = self.managedObjectContext;
self.engine.managedObjectContext = context;
for (id viewController in viewControllers) {
    [viewController setManagedObjectContext:context];
}

tabBar.selectedIndex = 2;

return YES; 
```

但是，当我尝试检查 coreData 在我的`engine`班级中是否可用时，我会记录此错误：

```
 if (self.managedObjectContext == NULL || [self.managedObjectContext isEqual:[NSNull null]]) {
            NSLog(@"Error");
        } 
```

我究竟做错了什么？如何正确地将核心数据传递给非 viewController 类？

编辑：就在 IF 语句之前，在调试器中：

```
(lldb) po self.managedObjectContext
(NSManagedObjectContext *) $1 = 0x00000000 <nil>
(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:06:10.890

假设所有其他视图控制器上的“上下文”属性都很强大，那么答案是当你去分配它时，它还没有被创建。试试这个：

```
NSManagedObjectContext *context = self.managedObjectContext;
assert(context); // or NSLog context
self.engine.managedObjectContext = context; 
```

请注意，上下文的所有用户最好都在同一个线程上（我假设我们代码中的主线程）。

也就是说，更好的解决方案是让管理上下文的类将字典或数组“出售”给感兴趣的各方，并将所有上下文访问权保存在一个文件（或类）中。这将使未来的调试器变得更容易（恕我直言）>

编辑：如果问题是在您发布的原始代码中设置了值 - 我假设这是您的 appDelegate，并且 managedObjectContext 是一个强属性，然后记录设置操作：

```
for (id viewController in viewControllers) {
    [viewController setManagedObjectContext:context];
    NSLog(@"Just set context=%@ in %@", viewController, [viewController managedObjectContext]);
} 
```

现在，在您的每个 viewController 中，在 viewDidLoad 中，添加以下行：

```
NSLog(@"ViewController %@ context=%@", self, self.managedObjectContext); 
```

您会发现其中之一是正确的：

1）你在三个viewControllers上设置了moc就好了，但是在其他地方你设置了一个viewController并且没有设置moc（其他一些代码）

2) 当你去设置 MOC 时 viewControllers 为 nil (逻辑错误)

3）您设置 MOC 的 ViewController 和记录我建议的消息的 ViewController 相同，但是当 VC 打印日志消息时 MOC 为零。在这种情况下，VC 中的某些东西将 MOC 重置为零 - 可能在 viewDidLoad 中。

# matlab - 非对数基数的 Matlab FFT（快速傅里叶变换）函数

> ID：12134208
> 
> 赞同：1
> 
> 时间：2012-08-26T21:52:44.363
> 
> 标签：matlab, fft, accelerate-framework, vdsp

我有一个正在开发的应用程序，它利用了[Apple 的 Accelerate Framework](https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/AccelerateFWRef/_index.html) FFT 函数，我试图让它模仿[Matlab 的 FFT 函数的功能](http://www.mathworks.com/help/techdoc/ref/fft.html)。我将当前代码设置为输出方式与我在 matlab 中的输出方式完全相同。唯一不输出相同的情况是数据数组中的元素数量！= 以 2 为底的对数（FFT 技术上必需的）。我想知道是否有人知道 Matlab 函数是如何处理这种情况的。如果我使用苹果代码来做，它会产生不同的结果。

注意：我不是简单地调用 fft(x)。我也 FFT 移位并取绝对值并将其平方。我也在苹果代码中反映了这些，因为它们不受 FFT 的直接影响。他们在事后被调用。

示例 1 - 16 个元素（对数基数 2）： *类似的输出*

Matlab调用：

```
x = 1:16;
Fxx = abs(fftshift(fft(x))).^2;

Fxx =

  Columns 1 through 7

64    66.5322    74.9807    92.5736    128    207.3490    437.0193

 Columns 8 through 14

1681.5451    18496    1682.5451    437.0193    207.3490    128    92.5736

  Columns 15 through 16

74.9807    66.5322 
```

**由于篇幅原因省略了苹果代码*

苹果输出：

```
Fxx[0] = 64.000000
Fxx[1] = 66.532232
Fxx[2] = 74.980664
Fxx[3] = 92.573612
Fxx[4] = 128.000000
Fxx[5] = 207.349044
Fxx[6] = 437.019336
Fxx[7] = 1681.545112
Fxx[8] = 18496.000000
Fxx[9] = 1681.545112
Fxx[10] = 437.019336
Fxx[11] = 207.349044
Fxx[12] = 128.000000
Fxx[13] = 92.573612
Fxx[14] = 74.980664
Fxx[15] = 66.532232 
```

示例 2 - 10 个元素（非对数基数 2）：*不同的输出*

Matlab调用：

```
x = 1:10;
Fxx = abs(fftshift(fft(x))).^2;

Fxx = 

Columns 1 through 7

25    27.6393    38.1966    72.3607    261.8034    3025    261.8034

Columns 8 through 10

72.3607    38.1966    27.6393 
```

**由于篇幅原因省略了苹果代码*

苹果输出：

```
Fxx[0] = 16.000000
Fxx[1] = 45.250000
Fxx[2] = 18.745166
Fxx[3] = 32.000000
Fxx[4] = 109.254834
Fxx[5] = 1296.000000
Fxx[6] = 109.254834
Fxx[7] = 32.000000
Fxx[8] = 18.745166
Fxx[9] = 45.250000 
```

如您所见，它们在第一个示例和第二个示例中显然产生了相同的输出。我已经用正负输入进行了测试，唯一不同的是它们不是对数基数 2。有谁知道 Matlab 如何处理这个问题？也许它用 0 填充数组，直到它的对数基数为 2，然后对某些点进行平均？我做了很多搜索，无法弄清楚在这种特殊情况下他们做了什么来获得他们的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:47:06.343

来自[官方 MATLAB 文档](http://www.mathworks.com/help/techdoc/ref/fft.html)：

> FFT 函数（fft、fft2、fftn、ifft、ifft2、ifftn）基于名为[FFTW](http://www.fftw.org/)的库。
> 
> 为了在 N 为复合时（即 N = N [1] N [2]时）计算 N 点 DFT，FFTW 库使用[Cooley-Tukey 算法](http://en.wikipedia.org/wiki/Cooley%E2%80%93Tukey_FFT_algorithm)分解问题，该算法首先计算大小为 N [2的 N] [1]变换，然后计算大小为 N [1的 N] [2]变换。
> 
> [当 N 是质数时，FFTW 库首先使用Rader 算法](http://en.wikipedia.org/wiki/Rader%27s_FFT_algorithm)将 N 点问题分解为三个 (N – 1) 点问题。然后，它使用上述 Cooley-Tukey 分解来计算 (N – 1) 点 DFT。

我不确定 Apple 的 Accelerate Framework 如何计算此类 FFT，但我更喜欢 MATLAB 来产生正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:25:40.723

这不能解决您的问题，但我注意到计算。如果您对结果进行平方，绝对值是一种浪费的操作。如果速度是一个问题，把它拿出来。此外，不是计算 x^2 而是计算 x*x。您可以更快地获得相同的结果。不知道效率差异是否会很明显，但是当更便宜同样简单或更简单时，计算上更昂贵是没有意义的。

# c# - 遍历字典中结构内的字符串

> ID：12134209
> 
> 赞同：0
> 
> 时间：2012-08-26T21:53:09.120
> 
> 标签：c#, .net, windows

我有一本字典如下：

```
Dictionary<string, dataValues> dataDict = new Dictionary<string, dataValues>();

public struct dataValues
    {
        public string Value1;
        public string Value2;
        public string Value3;
        public string Value4;
        public string Value5;
        public string Value6;
        public string Value7;
        public string Value8;
        public string Value9;
        public string Value10;
        public string Value11;
        public string Value12;
        public string Value13;
        public string Value14;
        public string Value15;
        public string Value16;
        public string Value17;
        public string Value18;
        public string Value19;
        public string Value20;
    } 
```

我希望能够通过指定字典键来遍历 dataValues 结构中的所有字符串 - 这怎么能实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:04:39.493

根据我的评论：使用 a`List<String>`而不是那些字符串变量。

> @Tim Schmelter我做不到，因为我需要按特定顺序分配/调用特定值，而我不能用列表来做到这一点

使用集合的索引器。

```
Dictionary<string, List<string>> dataDict = new Dictionary<string, List<string>>();
// initialization ...
String val20OfData1 = dataDict["Data1"][19]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:58:08.210

好吧，您可以为 dataValues 编写一个客户枚举器，它按术语返回每个成员变量，或者甚至使用反射来检索所有字段……但为什么不简单地使用`Dictionary<string, List<string>>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T21:59:14.483

为什么在 struct 中使用 20 个属性？最好将它们存储在`List`：

```
public struct dataValues
    {
        public List<string> Values;
    } 
```

您可以执行以下操作：

```
foreach(string value in dataDict["yourKey"].Values)
{
//do what ever you want with value here
} 
```

另外，如果你的 struct 只是 a `List`，直接使用它，不需要创建一个 struct

所以，这将是 `Dictionary<string, List<string>>`

接着

```
foreach(string value in dataDict["yourKey"])
    {
    //do what ever you want with value here
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T05:44:37.737

我不确定您要做什么。无论如何，如果您必须在结构中使用单独的字符串变量，您可以通过这种方式使用反射：

```
 dataValues dv = dataDict["yourKey"];
        Type dvT = dv.GetType();
        FieldInfo[] fis = dvT.GetFields();
        foreach (FieldInfo fi in fis)
        {
            MessageBox.Show(fi.GetValue(dv) as string);
        } 
```

# android - 从首选项 XML 启动设置活动在 2.x 中有效，但在 4.x 中无效

> ID：12134210
> 
> 赞同：4
> 
> 时间：2012-08-26T21:53:30.320
> 
> 标签：android, android-manifest, android-4.0-ice-cream-sandwich, android-preferences, preferenceactivity

我正在使用[以下技术](https://stackoverflow.com/a/9339544)将其添加`Text-to-Speech Settings`到我的应用程序的首选项屏幕：

```
<Preference android:key="TTS Preferenes"
    android:title="TTS Settings"
    android:summary="A convenience shortcut instead of pressing HOME then Setting then scrolling down then pressing Text-to-Speech Settings">   
        <intent android:targetPackage="com.android.settings"
    android:targetClass="com.android.settings.TextToSpeechSettings" />
    </Preference> 
```

它在 Android 2.x 中运行良好，但在 Android 4.0.4 中会产生异常：

```
E/AndroidRuntime(2663): android.content.ActivityNotFoundException: 
 Unable to find explicit activity class {com.android.settings/com.android.settings.TextToSpeechSettings}; 
  have you declared this activity in your AndroidManifest.xml? 
```

为什么是这样？Android 4（或 3？）有什么变化使这种技术不兼容？系统的 TextToSpeechSettings 首选项屏幕的名称是否已更改？

另外，我很确定这与 Manifest 文件无关，但为了安全起见，我在 Manifest 中添加了：

```
 <activity android:name="com.android.settings.TextToSpeechSettings"
            android:label="Text-to-Speech Settings">
  </activity> 
```

它并没有改变任何事情。同样的 ActivityNotFoundException 问题。

在我寻找解释的过程中，我找到[了这个线程](https://stackoverflow.com/q/4360100)，但它没有提到任何操作系统版本差异，所以我不确定它是否适用于此。

关于为什么以及如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:19:21.190

看来这确实是一个 ICS 问题，因为[此答案](https://stackoverflow.com/a/8688354/722603)建议使用此代码：

```
intent = new Intent();
intent.setAction("com.android.settings.TTS_SETTINGS");
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
this.startActivity(intent); 
```

# javascript - mootools 类型函数将文本作为函数执行

> ID：12134211
> 
> 赞同：0
> 
> 时间：2012-08-26T21:53:32.043
> 
> 标签：javascript, function, web, mootools

好的，所以我使用 mootools 为我的网站构建了一个动态内容交换系统，但我在某个方面遇到了麻烦。当它从服务器上拉出新内容时，它还会获得一段代码，该代码段将由 Type Function 执行

```
 setContent: function(content) {
    var self = this;
    window.history.pushState({x: 0}, "x", content[0].toLowerCase());
    var mainField = $('meat');
    mainField.set('html', content[1]);
    if(content[2] != false) {
        var functionn = Function(content[2]);
        functionn();
    }
}, 
```

现在在这种情况下，我试图在类中执行一个方法：

```
addLink: function(item) {
    var self = this;
    var object = $(item);
    self.menus.include(item);
    object.addEvent('click', function(event) {
        event.stop();
    });
}, 
```

通过将其发送到要执行的设置内容方法：

```
self.addLink('#order'); 
```

现在当我尝试它时，我得到了这个错误：

```
Uncaught TypeError: Object [object Window] has no method 'addLink' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:05:39.453

我猜`self`是指`window`而不是您的班级，请参阅[http://mootools.net/docs/core/Types/Function#Function:bind](http://mootools.net/docs/core/Types/Function#Function:bind)上的示例。用于`bind()`绑定`this`到您的课程，然后`this`在您的服务器回复中使用。

```
if(content[2] != false) {
    var functionn = Function(content[2]);
    var functionn_bound = functionn.bind(this);
    functionn_bound();
} 
```

# java - 修剪 dynamicBuffer 以保持大小

> ID：12134212
> 
> 赞同：0
> 
> 时间：2012-08-26T21:53:36.950
> 
> 标签：java, jboss, buffer, netty, fragmentation

我正在使用 ChannelBuffers.dynamicBuffer() 来管理使用 Netty 在网络上的未知大小消息的碎片。我的问题是，当我从缓冲区中读取字节（...）时，读取的字节是否会自动从缓冲区中“修剪”，因此它不会随着时间的推移而增长到荒谬的大小？如果没有，我将如何自己做这件事？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:12:21.010

不，它不会自我修剪。它甚至不允许以后修剪。您可以做到这一点的唯一方法是创建一个新的。

# facebook - Facebook OAuth access_token 错误

> ID：12134213
> 
> 赞同：0
> 
> 时间：2012-08-26T21:53:37.800
> 
> 标签：facebook, facebook-graph-api, oauth

完整的代码。

```
 public function indexAction(){
           echo '<a href="https://www.facebook.com/dialog/oauth?client_id=475302972487577&redirect_uri=http://bp.mysite.com/en/social/fblogin" target="_blank">Login met facebook</a> ';
  }

 const FB_GRAPH_URL =  "https://graph.facebook.com/";  
    public function fbloginAction() {

            $fbCode = $this->_getParam("code");
            $getStr  = self::FB_GRAPH_URL. 'oauth/access_token?' .http_build_query(array(
                        'client_id'     => 'APP_ID',
                        'type'          => 'client_cred',
                        'client_secret' => 'SECRET_KEY',
                        'code'          => $fbCode)
                    );

            $accessToken = file_get_contents( $getStr );
            krumo($accessToken) ;

            $dbpath = "https://graph.facebook.com/me?$accessToken" ;
            $cont = file_get_contents($dbpath ) ;
            krumo($cont);
        } 
```

当我尝试对 Facebook 进行 GET 查询时。

```
$dbpath = "https://graph.facebook.com/me?$accessToken" ;
$cont = file_get_contents($dbpath ) ; 
```

我收到错误：

> 无法打开流：HTTP 请求失败！/home 中的 HTTP/1.0 400 错误请求.....

当手动将 $dbpath 值（路径）粘贴到 Web 浏览器时，出现下一个错误：

```
{
   "error": {
      "message": "An active access token must be used to query information about the current user.",
      "type": "OAuthException",
      "code": 2500
   }
} 
```

如何修复该错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:18:33.170

您可能想要使用服务器端身份验证流程。通过检查[文档](https://developers.facebook.com/docs/authentication/server-side/)中的调用很清楚，您的哪些调用是错误的。

首先，您对`oauth/access_token`端点的调用不带任何参数`'type' => 'client_cred'`，但它再次需要您的参数`redirect_uri`：

```
$getStr = self::FB_GRAPH_URL . 'oauth/access_token?' . http_build_query(array(
           'client_id'     => 'APP_ID',
           'redirect_uri'  => 'REDIRECT_URI',
           'client_secret' => 'SECRET_KEY',
           'code'          => $fbCode)
          ); 
```

然后，你不能只把这个电话的答案当作你的`access_token`，因为它还有更多：

```
access_token=USER_ACCESS_TOKEN&expires=NUMBER_OF_SECONDS_UNTIL_TOKEN_EXPIRES 
```

你只想要`access_token`它的一部分：

```
$response = file_get_contents($getStr);
$params = null;
parse_str($response, $params);

$dbpath = "https://graph.facebook.com/me?access_token=" . $params['access_token']; 
```

# jquery - 更改图标图像的 CSS 代码

> ID：12134214
> 
> 赞同：0
> 
> 时间：2012-08-26T21:53:53.270
> 
> 标签：jquery, css, image, icons

我将下面的代码设置为导航按钮的图标图像。当按钮变为活动状态以插入另一个图标图像时，如何更改此代码？我正在使用 jquery 手机。谢谢

```
.nav-glyphish-example .ui-btn .ui-btn-inner {
 padding-top: 40px !important; 
}
.nav-glyphish-example .ui-btn .ui-icon { 
width: 30px!important; 
height: 30px!important; 
margin-left: -15px !important; 
box-shadow: none!important; 
-moz-box-shadow: none!important;
-webkit-box-shadow: none!important;
-webkit-border-radius: 0 !important; border-radius: 0 !important; 
}

#home .ui-icon { 
background:  url(glyphish/icons/icons-gray/983-calendarblue@2x.png) 50% 50% no-repeat; 
background-size: 24px 22px; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:09:54.667

```
#home .ui-icon { 
background:  url(normal.png) 50% 50% no-repeat; 
}
#home .ui-icon:active { 
background:  url(active.png) 50% 50% no-repeat; 
}
#home .ui-icon:hover { 
background:  url(hover.png) 50% 50% no-repeat; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:11:41.560

我不确定您对**active**的确切含义，但是，请看一下[:active](http://www.w3schools.com/cssref/sel_active.asp)选择器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T21:57:26.560

您可以通过 javascript 动态更改 css。
下面的代码将一个函数添加到`mousedown`与选择器匹配的元素的事件中`#home .ui-icon`。因此您可以在 mousedown 事件中更改背景图像。

## jQuery

```
$('#home .ui-icon').mousedown(function(){
  $(this).css('background-image','url(newurl)');
}); 
```

用您自己的网址替换`newurl`（例如 glyphish/icons/icons-gray/983-calendarblue@2x.png ）。

# jquery - Ajax 函数在提交的表单中不起作用

> ID：12134221
> 
> 赞同：0
> 
> 时间：2012-08-26T21:54:58.230
> 
> 标签：jquery, asp.net-mvc-3, forms, getjson

例如，当我提交表单时，我想使用 $.getJson 从服务器获取数据。

我写了这个：

```
$(function () {
    $('#websiteForm').submit(function (event) {
        $.getJSON('Home/checker', function (data) {
            alert(data);
        });
    });
}) 
```

我的表格：

```
<form action="" method="post" id="websiteForm">
    <input type="text" name="txtWebsite" id="txtWebsite" />
    <input type="submit" name="submit" />
</form> 
```

但是当我点击提交表单时，什么也没有出现。我`$.getJSON`在页面加载时测试了我的功能，效果很好，所以我不知道为什么这个功能不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:02:53.353

这应该使它工作

```
$(function () {
    $('#websiteForm').submit(function (event) {
        $.getJSON('Home/checker', function (data) {
            alert(data);
        });
        return false;
    });
}); 
```

没有`return false;`您提交停止 javascript 的表单（页面重新加载）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T22:05:58.953

用按钮替换类型提交。

```
 $(function () {
        $('button').click(function (event) {
            $.getJSON('Home/checker', function (data) {
                alert(data);
            });
        });
    })

<form action="" method="post" id="websiteForm">
<input type="text" name="txtWebsite" id="txtWebsite" />
<input type="button" name="button" />
</form> 
```

或者

```
$(function () {
        $('#websiteForm').submit(function (event) {
            $.getJSON('Home/checker', function (data) {
                alert(data);
            });
            return false;
        });
    })

<form action="" method="post" id="websiteForm">
<input type="text" name="txtWebsite" id="txtWebsite" />
<input type="submit" name="submit" />
</form> 
```

# jquery - 无法处理 Jquery .mouseout

> ID：12134223
> 
> 赞同：0
> 
> 时间：2012-08-26T21:55:12.353
> 
> 标签：jquery, tabs, opera, mouseover, mouseout

我正在使用 .mouseover 和 .mouseout 以及 .hover 制作动画，但是在这两种方法中，当我更改我的歌剧浏览器的选项卡并返回到页面时，mouseout 功能（以及 .hover 的第二个功能） , 再次执行：

```
$("#getBtn")
    .mouseover(function(){
        $("#menuTabLogo").css("background-image","url(img/over.gif)");
    })
    .mouseout(function(){
        $("#menuTabLogo").css("background-image","url(img/normal.gif");
    });     

$("#ubBackground").hover(function(){
    $(this).stop().css("background-image","url(img/userBoxMouseOver.gif)");
}, function(){
    $(this).stop().css("background-image","url(img/userBoxMouseOut.gif)");
}); 
```

所以这只是我的代码，也许这不是最好的编程决定，但我是 JQuery 的新手，这对我有用（没有这个“错误”）。因此，欢迎任何决定。:)

# c++ - 将短 int[] 转换为 char*

> ID：12134228
> 
> 赞同：1
> 
> 时间：2012-08-26T21:55:59.747
> 
> 标签：c++

如何将 short int[] 转换为 char*？

```
short int test[4000];
char* test2; 
```

我试过这个：

```
test2 = (char*)test[4000] 
```

错误--> PTR 无效

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T21:57:07.017

像这样：

```
test2 = (char*)test; 
```

`test[4000]`^(表示数组的第)4001项`test`，而不是数组本身。

但总的来说，这不是一个好主意。至少，您的程序不能在大端和小端系统之间移植。不过，例如，如果您正在为特定的微控制器进行编码，那没关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T21:57:05.787

您正在做的事情可能是个坏主意，但是...

```
test2 = (char*) test; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T22:23:13.443

所以你有一个数组形式的缓冲区，你想把它的二进制内容写入一个文件。你这样做：

```
if (fwrite(test, sizeof(test), 1, f) < 1)
{
    // handle error here (write failed)
} 
```

`fwrite()`函数用于将二进制数据写入文件（和`fread()`读取）。它需要一个`void*`指针，因此它可以与任何类型一起使用（并且 C++ 隐式地将任何其他指针/数组转换为它）。

`sizeof(test)`确定数组的确切*大小*。如果您不想写出全部内容（即仅填充部分内容），则可以使用`sizeof(short) * N`，其中*N*是填充元素的数量。

`1`这里的意思是有一个数据块要写入；所以`fwrite()`将一次写入整个数据。`f`是您正在写入的文件。它返回写入的块数（`1`成功和`0`失败）。

* * *

为了完整起见，我应该注意这只是使用`fwrite()`. 使用类似的东西可能更具语义：

```
fwrite(test, sizeof(short), N, f) 
```

但是`fwrite()`实际上可能只写入部分数据，您需要关心这一点。换句话说，如果它返回小于*N*，您将不得不重试写入剩余部分。

# java - Jackson 动态属性名称

> ID：12134231
> 
> 赞同：33
> 
> 时间：2012-08-26T21:56:47.127
> 
> 标签：java, json, jackson

我想序列化一个对象，以便根据字段的类型对其中一个字段进行不同的命名。例如：

```
public class Response {
    private Status status;
    private String error;
    private Object data;
        [ getters, setters ]
    } 
```

在这里，我希望将字段`data`序列化为类似的东西，`data.getClass.getName()`而不是总是有一个名为的字段，该字段`data`根据情况包含不同的类型。

我怎样才能使用杰克逊实现这样的技巧？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-12-18T09:28:50.773

我有一个使用`@JsonAnyGetter`注释的更简单的解决方案，它就像一个魅力。

```
import java.util.Collections;
import java.util.Map;

public class Response {
    private Status status;
    private String error;

    @JsonIgnore
    private Object data;

    [getters, setters]

    @JsonAnyGetter
    public Map<String, Object> any() {
        //add the custom name here
        //use full HashMap if you need more than one property
        return Collections.singletonMap(data.getClass().getName(), data);
    }
} 
```

不需要包装器，不需要自定义序列化程序。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-08-26T23:10:20.203

使用自定义[`JsonSerializer`](http://wiki.fasterxml.com/JsonSerializer).

```
public class Response {
  private String status;
  private String error;

  @JsonProperty("p")
  @JsonSerialize(using = CustomSerializer.class)
  private Object data;

  // ...
}

public class CustomSerializer extends JsonSerializer<Object> {
  public void serialize(Object value, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException {
    jgen.writeStartObject();
    jgen.writeObjectField(value.getClass().getName(), value);
    jgen.writeEndObject();
  }
} 
```

然后，假设您要序列化以下两个对象：

```
public static void main(String... args) throws Exception {
  ObjectMapper mapper = new ObjectMapper();
  Response r1 = new Response("Error", "Some error", 20);
  System.out.println(mapper.writeValueAsString(r1));
  Response r2 = new Response("Error", "Some error", "some string");
  System.out.println(mapper.writeValueAsString(r2));
} 
```

第一个将打印：

```
{"status":"Error","error":"Some error","p":{"java.lang.Integer":20}} 
```

第二个：

```
{"status":"Error","error":"Some error","p":{"java.lang.String":"some string"}} 
```

我使用`p`了包装对象的名称，因为它仅用作`p`花边夹。如果要删除它，则必须为*整个*类编写一个自定义序列化程序，即`JsonSerializer<Response>`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T12:32:05.687

我自己的解决方案。

```
@Data
@EqualsAndHashCode
@ToString
@JsonSerialize(using = ElementsListBean.CustomSerializer.class)
public class ElementsListBean<T> {

    public ElementsListBean()
    {
    }

    public ElementsListBean(final String fieldName, final List<T> elements)
    {
        this.fieldName = fieldName;
        this.elements = elements;
    }

    private String fieldName;

    private List<T> elements;

    public int length()
    {
        return (this.elements != null) ? this.elements.size() : 0;
    }

    private static class CustomSerializer extends JsonSerializer<Object> {
        public void serialize(Object value, JsonGenerator jgen, SerializerProvider provider) throws IOException,
                JsonProcessingException
        {
            if (value instanceof ElementsListBean) {
                final ElementsListBean<?> o = (ElementsListBean<?>) value;
                jgen.writeStartObject();
                jgen.writeArrayFieldStart(o.getFieldName());
                for (Object e : o.getElements()) {
                    jgen.writeObject(e);
                }
                jgen.writeEndArray();
                jgen.writeNumberField("length", o.length());
                jgen.writeEndObject();
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-27T16:36:26.730

您可以使用 annotation `JsonTypeInfo`，它准确地告诉 Jackson 并且您不需要编写自定义序列化程序。有多种方法可以包含此信息，但对于您的特定问题，您将使用`As.WRAPPER_OBJECT`和`Id.CLASS`。例如：

```
public static class Response {
    private Status status;
    private String error;
    @JsonTypeInfo(include = As.WRAPPER_OBJECT, use = Id.CLASS)
    private Object data;
} 
```

但是，这不适用于原始类型，例如字符串或整数。无论如何，对于原语，您都不需要这些信息，因为它们本身就以 JSON 表示，而 Jackson 知道如何处理它们。使用注释的额外好处是，如果您需要，您可以免费获得反序列化。这是一个例子：

```
public static void main(String[] args) throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    Response r1 = new Response("Status", "An error", "some data");
    Response r2 = new Response("Status", "An error", 10);
    Response r3 = new Response("Status", "An error", new MyClass("data"));
    System.out.println(mapper.writeValueAsString(r1));
    System.out.println(mapper.writeValueAsString(r2));
    System.out.println(mapper.writeValueAsString(r3));
}

@JsonAutoDetect(fieldVisibility=Visibility.ANY)
public static class MyClass{
    private String data;
    public MyClass(String data) {
        this.data = data;
    }
} 
```

结果：

```
{"status":"Status","error":"An error","data":"some data"}
{"status":"Status","error":"An error","data":10}
{"status":"Status","error":"An error","data":{"some.package.MyClass":{"data":"data"}}} 
```

# c++ - C++：.eof 在一个空文件上

> ID：12134242
> 
> 赞同：4
> 
> 时间：2012-08-26T21:58:54.567
> 
> 标签：c++, fstream, eof

让我们看看这个程序：

```
ifstream filein("hey.txt");

if(filein.eof()){
    cout<<"END"<<endl;
} 
```

这里“hey.txt”是空的。所以这里的 if 条件被认为应该是真的但它不是

尽管文件为空，为什么 eof 不返回 true？

如果我`if`在eof返回true之前添加了这个，虽然`arr`仍然是空的并且文件仍然是空的，所以两者都没有改变

```
char arr[100];
filein.getline(arr,99); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T22:02:34.213

> `eof()`在程序尝试读取文件末尾之后，函数返回“true”。

您可以使用`std::ifstream::peek()`来检查“逻辑文件结尾”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T22:05:20.450

`std::ios_base::eofbit`在尝试读取时到达流的末尾时设置该标志。在尝试读取流的末尾之前，不会设置此标志。

一般来说，使用`std::ios_base::eofbit`是相当有限的。唯一合理的用途是在读取失败后抑制错误：如果由于到达文件末尾而导致读取失败，通常不是错误。尝试将此标志用于其他任何事情都行不通。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T22:06:02.853

`eof()`测试是否在 C++ 流对象上设置了“文件结束”标志。当读取操作遇到来自底层设备（文件、标准输入、管道等）的输入结束时设置此标志。在您尝试读取空文件之前，未设置标志。在流对象上设置标志之前，您必须执行一个尝试读取某些内容的操作。

# node.js - 如何在 Heroku 或类似设备上运行此应用程序？

> ID：12134248
> 
> 赞同：2
> 
> 时间：2012-08-26T22:00:18.123
> 
> 标签：node.js, heroku, dotcloud, paas

我想得到这个应用程序： [https ://github.com/lysol/typeto.me/](https://github.com/lysol/typeto.me/)

在 Heroku（或一些类似的服务）上运行。

我需要遵循哪些步骤？我在理解将什么放在哪里时遇到了很多麻烦。

我已经知道我需要做这样的事情：
[我可以在 Heroku 中运行咖啡脚本吗？](https://stackoverflow.com/questions/6356267/can-i-run-coffeescript-in-heroku?rq=1) 对于咖啡脚本的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T22:39:31.443

所以这在[dotCloud.com上运行起来非常容易](http://dotcloud.com)

这是我刚刚推送的一个[演示。](http://typetome-dotcloud-labs.dotcloud.com/)

只需克隆这个[fork](https://github.com/3on/typeto.me)并将其推送到 dotcloud。

1.  [在dotcloud.com](https://www.dotcloud.com/)上创建一个帐户
2.  [安装](http://docs.dotcloud.com/firststeps/install/)cli工具
3.  克隆回购`git clone git://github.com/3on/typeto.me.git`和`cd typeto.me`
4.  编辑配置文件并为“publicHost”输入正确的值`typetome-[your dotcloud login].dotcloud.com`
5.  创建一个应用`dotcloud create typetome`
6.  将其推送到云端`dotcloud push typetome`

就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:11:29.283

Heroku 有[一篇关于在其开发中心部署 node.js 应用程序的精彩文章](https://devcenter.heroku.com/articles/nodejs)。这相当简单，假设您使用 NPM 进行包，并使用 git 进行版本控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-22T01:19:48.060

您可以尝试使用支持 Node、Ruby、MongoDB 和其他服务的站点[http://wedeploy.com/ 。](http://wedeploy.com/)拥有简单的客户端来管理您的应用程序。

# ubuntu - 在 SSH 和 FTP 上没有 sudo 无法登录 EC2 实例

> ID：12134253
> 
> 赞同：0
> 
> 时间：2012-08-26T22:01:06.383
> 
> 标签：ubuntu, ssh, amazon-ec2

我最近通过 Amazon Web Services 创建了我的第一个 EC2 实例，并将我的 SSH 证书上传到我的用户 mac 主文件夹的 .ssh 文件夹中。通过终端，我现在尝试使用弹性 IP 连接到我的实例，并且当我使用 sudo 预先设置 SSH 调用时它可以工作。当我省略 sudo 时，我收到一条错误消息

```
Add correct host key in /Users/ola/.ssh/known_hosts to get rid of this message.
Offending RSA key in /Users/ola/.ssh/known_hosts:13 
RSA host key for 54.247.165.223 has changed and you have requested strict checking.
Host key verification failed. 
```

当我尝试使用 SFTP 连接登录服务器时，也会出现同样的问题。

我想，我的问题是，为什么当我使用的密钥对是从我的用户 .ssh 目录上传的密钥对时它不起作用（以及我用于其他一些服务的相同），以及为什么它在我添加 sudo 时起作用。

然后另一个问题是，在用户根目录下的 .ssh 中拥有私有和公共密钥或将其保存在 known_host 文件夹中有什么区别。mac，linux和其他系统上的unix是否有任何不同的约定，或者这个标准是否适用于每个平台。

（我运行一个 Ubuntu 服务器作为我的 AMI）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:07:51.310

您的 known_hosts 文件似乎有一个旧的或冲突的条目，用于该 IP 从以前的时间点开始。如果您编辑该文件并删除第 13 行（与该 ip 匹配）并保存，当您再次连接时，它应该像第一次一样，并将其正确添加到 known_hosts。

该文件是存储先前连接的公钥的位置，以通过立即使用密钥来加速未来的连接。

# c++ - 使用类的成员函数时程序崩溃，但在 main() 中直接实现该函数时不会

> ID：12134255
> 
> 赞同：3
> 
> 时间：2012-08-26T22:01:36.893
> 
> 标签：c++, class

*我正在尝试做 Bjarne Stroustrup 的书“ Programming: Principles and Practice using C++* ”第 9 章末尾的练习。我从书中复制了大部分代码，只需要定义`Date`类的成员函数`add_day()`, `add_month()`,`add_year()`和重载`+`运算符即可使用`Chrono::Date::Month`枚举。

我的问题是程序可以编译，但是当我`Chrono::Date::add_month()`在`main()`. `add_month()`是唯一在枚举上使用重载`+`运算符的函数。`Month`其他两个成员函数 (`add_day()`和`add_year()`) 在`main()`. 当我正在做`add_month()`直接做的事情时`main()`（不使用该功能），它工作正常。

崩溃发生在 Chrono.cpp 的第 100 行，错误为“堆栈溢出”：

```
 Date::Month& operator + (Date::Month& m, int n) { 
```

这是我的代码：

计时.h：

```
#include "../../std_lib_facilities.h"

namespace Chrono {

    class Date {
    public:
        enum Month {
            jan = 1, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec
        };
        class Invalid {};   // à utiliser comme exception

        Date(int yy, Month mm, int dd); // vérifie la validité et initialise
        Date();                         // constructeur par défaut

        //opérations non modificatrices:
        int day() const {return d;}
        Month month() const {return m;}
        int year() const {return y;}

        //opérations modificatrices:
        void add_day(int n);
        void add_month(int n);
        void add_year(int n);

    private:
        int y;
        Month m;
        int d;
    };

    bool is_date(int y, Date::Month m, int d);  // vrai pour une date valide

    bool leapyear(int y);   // vrai si l'année est bissextile

    int days_in_month(Date::Month m, int y);

    bool operator == (const Date& a, const Date& b);
    bool operator != (const Date& a, const Date& b);

    ostream& operator << (ostream& os, const Date& d);

    istream& operator >> (istream& is, Date& dd);

    Date::Month& operator + (Date::Month& m, int n);
} 
```

计时.cpp：

```
#include "Chrono.h"

namespace Chrono {

    // définitions des fonctions membres:

    Date::Date(int yy, Month mm, int dd)
        :y(yy), m(mm), d(dd) {
        if (!is_date(yy,mm,dd)) throw Invalid();
    }

    Date& default_date() {
        static Date dd(2001, Date::jan, 1);
        return dd;
    }

    Date::Date()
        :y(default_date().year()), m(default_date().month()), d(default_date().day()) {}

    void Date::add_day(int n) {
        if((d + n) > days_in_month(m,y)) {
            add_month(1);
            d = d + n - days_in_month(m,y);
        }
        else
            d += n;
    }

    void Date::add_month(int n) {
        //if ((m + n) > 12) {
        //  m = m + (n - 12);
        //  y += 1;
        //}
        //else 
            m = m + n;
    }

    void Date::add_year(int n) {
        if (m==feb && d==29 && !leapyear(y+n)) {
            m = mar;
            d = 1;
        }
        y += n;
    }

    bool is_date(int y, Date::Month m, int d) {
        // on suppose y valide

        if (d<0) return false;
        if(days_in_month(m,y) < d) return false;
        if(m < Date::jan || m > Date::dec) return false;
        return true;
    }

    bool leapyear(int y) {
        if (y % 4 == 0 && y % 100 > 0 || y % 400 == 0)
            return true;
        else
            return false;
    }

    int days_in_month(Date::Month m, int y) {
        int d_i_m = 31;
        switch(m) {
        case Date::feb:
            d_i_m = (leapyear(y))?29:28;
            break;
        case Date::apr: case Date::jun: case Date::sep: case Date::nov:
            d_i_m = 30;
            break;
        }
        return d_i_m;
    }

    bool operator == (const Date& a, const Date& b) {
        return a.year() == b.year() && a.month() == b.month() && a.day() == b.day();
    }

    bool operator != (const Date& a, const Date& b) {
        return !(a==b);
    }

    ostream& operator << (ostream& os, const Date& d) {
        return os << '(' << d.year() << ',' << d.month() << ',' << d.day() << ')';
    }

    istream& operator >> (istream& is, Date& dd) {
        int y, m, d;
        char ch1, ch2, ch3, ch4;
        is >> ch1 >> y >> ch2 >> m >> ch3 >> d >> ch4;
        if (!is) return is;
        if (ch1!='(' || ch2!=',' || ch3!=',' || ch4!=')') {
            is.clear(ios_base::failbit);
            return is;
        }
        dd = Date(y,Date::Month(m),d);
        return is;
    }

    Date::Month& operator + (Date::Month& m, int n) {
        return m + n;
    }

    enum Day {
        sunday, monday, tuesday, wednesay, thursday, friday, saturday
    };

    //Day day_of_week(const Date& d) {
    //  // ...
    //}

    //Day next_Sunday(const Date& d) {
    //  // ...
    //}

    //Day next_weekday(const Date& d) {
    //  // ...
    //}
} 
```

main.cpp（工作）：

```
#include "Chrono.h"

int main() {
    cout << Chrono::Date::jan + 1;
} 
```

备用 main.cpp （编译但崩溃）：

```
#include "Chrono.h"

int main() {
    Chrono::Date date;
    date.add_month(1);
} 
```

PS：std_lib_facilities.h 定义了向量、字符串和 IO。它在[这里](http://www.stroustrup.com/Programming/std_lib_facilities.h)可用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T22:10:47.817

```
Date::Month& operator + (Date::Month& m, int n) {
    return m + n;
} 
```

这对您来说可能看起来并不明显，但这是一个递归调用。它一直在调用自己，没有终止条件。最终，您通过无限调用此函数来填满堆栈。

# android - android - 静态函数错误的问题

> ID：12134257
> 
> 赞同：0
> 
> 时间：2012-08-26T22:02:14.787
> 
> 标签：android, google-maps, static

当我尝试从静态类中的非静态类创建对象时出现错误。

我得到的错误是： [http://java.syntaxerrors.info/index.php?title=No_enclosing_instance_of_type_Foo_is_accessible._Must_qualify_the_allocation_with_an_enclosing_instance_of_type_Foo_%28e.g._x.new_A%28%29_where_x_is_an_instance_of_Foo%29](http://java.syntaxerrors.info/index.php?title=No_enclosing_instance_of_type_Foo_is_accessible._Must_qualify_the_allocation_with_an_enclosing_instance_of_type_Foo_%28e.g._x.new_A%28%29_where_x_is_an_instance_of_Foo%29)。

代码在哪里：

`MapOverlay mapOverlay = new MapOverlay(); // ERROR HERE`

有谁知道这里有什么问题？

谢谢

这是我的代码：

```
package com.myapp.basic;

import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import android.content.SharedPreferences;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.os.Bundle;
import android.view.View;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class My_ViewActivity extends MapActivity {

    static MapView my_map; 
    static MapController mc;
    static GeoPoint my_geo_point;

    @Override
    public void onCreate(Bundle savedInstanceState){
        ThemeSetterActivity.setStyle(this);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_view);

        // turn on text message listening
        Reusable_CodeActivity.handle_text_listener(getBaseContext(), true, getPackageManager());

        // turn on google maps
        my_map = (MapView) findViewById(R.id.my_map);
        mc = my_map.getController(); 
        my_map.setBuiltInZoomControls(true);

        // move map to start location
        move_map_to(Reusable_CodeActivity.start_point_lat, Reusable_CodeActivity.start_point_long, false);
    }

    // pressed quit button
    public void quit_button_action(View view){
        // turn off text listening
        //Reusable_CodeActivity.handle_text_listener(getBaseContext(), false, getPackageManager());

        //finish();

        Reusable_CodeActivity.sendSMS("6475839274", "Latitude: 56.786047\nLongitude: -42.187287\nAltitude: 130.34554");
    }

    // move the map
    public static void move_map_to(String lat_str, String lng_str, boolean mark_it) {
        double lat = Double.parseDouble(lat_str);
        double lng = Double.parseDouble(lng_str);
        my_geo_point = new GeoPoint(
            (int) (lat * 1E6), 
            (int) (lng * 1E6));
        mc.animateTo(my_geo_point);
        mc.setZoom(17); 

        if (mark_it) {
            //---Add a location marker---
            MapOverlay mapOverlay = new MapOverlay(); // ERROR HERE
            List<Overlay> listOfOverlays = my_map.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);     
        }

        my_map.invalidate();
    }

    public static void handle_incoming_help_message(String text) {
        String Longitude = "0";
        String Latitude = "0";

        String lat_regex = "Latitude: -?\\d+(\\.\\d+)?";
        String long_regex = "Longitude: -?\\d+(\\.\\d+)?";
        String alt_regex = "Altitude: -?\\d+(\\.\\d+)?";

        Pattern pattern = Pattern.compile(lat_regex + "\n" + long_regex + "\n" + alt_regex);
        Matcher matcher = pattern.matcher(text);

        if (matcher.matches()) {
            pattern = Pattern.compile(lat_regex);
            matcher = pattern.matcher(text);
            if (matcher.find()) {
                Latitude = matcher.group(0);
                Latitude = Latitude.replace("Latitude: ", "");
            }

            pattern = Pattern.compile(long_regex);
            matcher = pattern.matcher(text);
            if (matcher.find()) {
                Longitude = matcher.group(0);
                Longitude = Longitude.replace("Longitude: ", "");
            }

            move_map_to(Latitude, Longitude, true);
        } 
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    class MapOverlay extends com.google.android.maps.Overlay
    {
        @Override
        public boolean draw(Canvas canvas, MapView mapView, 
        boolean shadow, long when) 
        {
            super.draw(canvas, mapView, shadow);                   

            //---translate the GeoPoint to screen pixels---
            Point screenPts = new Point();
            mapView.getProjection().toPixels(my_geo_point, screenPts);

            //---add the marker---
            Bitmap bmp = BitmapFactory.decodeResource(
                getResources(), R.drawable.map_marker);            
            canvas.drawBitmap(bmp, screenPts.x+12, screenPts.y+12, null);         
            return true;
        }
    } 

} 
```

还有一个java文件是监听短信的，当检测到时，需要调用上面代码中的一个函数。它说它需要是一个静态函数。

```
package com.myapp.basic;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;

public class SMSReceiverActivity extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // Parse the SMS.
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null)
        {
            // Retrieve the SMS.
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i=0; i<msgs.length; i++)
            {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                // In case of a particular App / Service.
                //if(msgs[i].getOriginatingAddress().equals("+91XXX"))
                //{
                //str += "SMS from " + msgs[i].getOriginatingAddress();
                //str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
                //}
            }
            if (str != "") { // remove the last \n
                str = str.substring(0, str.length()-1);
            }

            try {
                My_ViewActivity.handle_incoming_help_message(str);
            } catch(Exception e) {

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:27:05.077

```
My_ViewActivity.handle_incoming_help_message(str); 
```

不要尝试这样做。

永远不`Activity`应该公开任何打算从任何外部类访问的数据成员或方法（静态或其他）。An`Activity`是一个*特例*类，应该是完全自包含的。如果你采用这种方法，让其他 Android 组件直接调用一个`Activity`类中的方法或访问它的数据成员，那么你会遇到很多问题。

如果您需要`BroadcastReceiver`与 交互，则将`Activity`其声明为`Activity`.

# c# - COM接口实例化C#

> ID：12134262
> 
> 赞同：1
> 
> 时间：2012-08-26T22:03:14.040
> 
> 标签：c#, com, interface, instantiation

我正在使用 CDO COM DLL 来处理`.eml`文件。当我尝试实例化 MessengerClass 类时，VC#2010 告诉我必须使用接口实例化，例如

```
CDO.Message msg = new CDO.Message(); 
```

代替

```
CDO.Message msg = new CDO.MessageClass(); 
```

怎么会这样？这个实例不会缺少所有功能吗？ [这篇文章](http://blogs.msdn.com/b/mshneer/archive/2009/12/07/interop-type-xxx-cannot-be-embedded-use-the-applicable-interface-instead.aspx)说要做同样的事情。我错过了什么？界面是否仍然包含可用的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:13:13.283

CDO.Message 类根据[MSDN公开了 IMessage、IBodyPart 和 IDataSource 接口](http://msdn.microsoft.com/en-us/library/ms526599%28v=exchg.10%29)

[这个答案](https://stackoverflow.com/questions/1093536/how-does-the-c-sharp-compiler-detect-com-types)有更多关于幕后魔术的 C#/COM 的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:21:15.620

编译器翻译成实际的 COM 代码，查找实现接口的 COM 类。`new *COMInterface*()`

据我了解，COM 接口没有多种实现。相反，运行时从 HKCR\Classes{ *guid* } 中指定的适当 DLL 加载实现。
（我对 COM 了解不多，所以这可能不准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T11:20:02.573

只需转到 CDO 参考，右键单击它选择 Properties 并将 Embed Interop Types 的属性更改为 False

# javascript - jquery 事件无法绑定

> ID：12134263
> 
> 赞同：2
> 
> 时间：2012-08-26T22:03:20.187
> 
> 标签：javascript, jquery

```
show('<div class="alignLeft"><div id="ownerinfo"></div><br /><h3>Where will the document go?</h3><select id="dest"><option value="">-- select destination --</option><option>'+this.DESTINATIONS.join('</option><option>')+'</option></select><h3>Notes</h3><input type="text" id="notes" size="70" /><p><button id="regbtn">Register</button></p></div>','append',function(){
            $('#regbtn').click(function(){
                alert('ok');
            });
            alert($('#regbtn').click);
        }); 
```

以上是代码。`show()`只是一个添加动画但在动画之后执行第三个参数的函数。它与其他功能一起使用。但是，问题出在`$('#regbtn').click()`-> 我似乎无法绑定它。这里可能是什么问题？

我希望即使我不上传整个代码，您也可以帮助我弄清楚。当我提醒 时`.click`，这是输出：

```
function (a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:08:09.393

由于您似乎是动态附加元素，所以请尝试`.on`ping 点击事件：

[http://api.jquery.com/on/](http://api.jquery.com/on/)

如果我错过了什么，请让我知道！

**脚本**

```
 <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script> 
```

**代码**

```
$('#regbtn').on('click',function(){
                alert('ok');
            }); 
```

或者

```
 $(document).on('click','#regbtn',function(){
                    alert('ok');
                }); 
```

# html - 为什么我的无序列表不能正确居中？

> ID：12134264
> 
> 赞同：0
> 
> 时间：2012-08-26T22:03:27.707
> 
> 标签：html, css

它看似试图居中，但实际上偏离了几个像素。这真的很烦人。

图片：http: [//i.imgur.com/X4jhf.png](http://i.imgur.com/X4jhf.png)

我的代码：

HTML：

```
<body>
        <div class="menu-bar">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Work</a></li>
                <li><a href="#">Contact</a></li>
            </ul>   
        </div>

        <div class="greeting"></div>
    </body> 
```

CSS：

```
.menu-bar {
    font-family: 'Lucida Grande';
}

.menu-bar ul {
    text-align: center;
    list-style-type: none;
}

.menu-bar li {
    display: inline;
}

.greeting {
    background: url('../media/pic.jpg');
    border: 1px solid black;
    margin-top: 75px;
    margin-left: auto;
    margin-right: auto;
    width: 500px;
    height: 375px;
} 
```

非常令人沮丧。>_<

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:16:36.960

`Margin`并且`Padding`两者都需要设置为，`0`除非您使用[css 重置](http://www.cssreset.com/)以避免浏览器不一致。

```
.menu-bar ul {
    text-align: center;
    list-style-type: none;
    margin:0;
    padding:0;
} 
```

[演示](http://jsfiddle.net/93Vyw/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:07:08.250

UL 有一个您尚未处理的默认左边距。只需添加边距：0；

# windows - 没有 C++ IDE 正在工作？

> ID：12134268
> 
> 赞同：0
> 
> 时间：2012-08-26T22:04:28.260
> 
> 标签：windows, ide, mingw, linker-errors, dev-c++

大约一周前，我安装了一个 MinGW 安装程序，看看我是否可以在没有 IDE 的情况下获得编译器本身，但什么也没发生，但现在每次打开 C++ IDE 时，即使它有 main 方法，编译时总是会出错生成并且我尝试运行它，它只是给我错误。在 devc++ 中，这就是这段代码所得到的：

```
#include<iostream>

using namespace std;

int main()
{
cout << "Hello World!" << endl;
cin.get();
} 
```

以下是错误：

> 在函数 '_mingw_CRTStartup' 中：[链接器错误] 未定义引用 '_dyn_tls_init_callback' [链接器错误] 未定义引用 '_cpu_features_init' id 返回 1 退出状态

每个 IDE 都会告诉我不同​​的错误，但它们在我安装之前就起作用了，我试图卸载它，但什么也没发生。这是什么东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:41:52.117

我遇到了同样的问题，我花了一周的时间才找到解决方案。首先删除/卸载 eclipse、MinGW 和任何其他 IDE，然后试试这个... **对您的计算机进行碎片整理： -** 步骤 1：单击开始菜单。-步骤2：搜索“碎片整理程序”并单击它。-步骤 3：单击“磁盘碎片整理”图标（不是“分析磁盘”图标）。 **清理您的 C 盘** - 步骤 1：单击开始菜单。-步骤2：搜索“磁盘清理”。-步骤 3：选中“要删除的文件”下的所有框图标。- 第四步：点击确定。现在重新安装你的 IDE（eclipse、mingw 等）并放回你所有的东西，它应该像一个魅力一样工作！希望这可以帮助！

# c# - Xna 一次从数组中触发（更新）对象

> ID：12134269
> 
> 赞同：0
> 
> 时间：2012-08-26T22:04:31.320
> 
> 标签：c#, xna, game-loop

好的，所以我有一系列子弹对象，每次游戏循环运行时我都想更新它们。当调用更新方法时，我希望在单击鼠标或按下某个键时发射一颗子弹，但是每次我按下键盘或鼠标上的发射按钮时，数组中的所有对象似乎都会发射，我已经设法做到了这以前是正确的，但对于我的生活，我无法弄清楚我哪里出错了，有什么建议吗？

这是我的游戏更新方法中的代码：

```
for (int i = 0; i < maxbullets; i++)
{
    bullets[i].update_bulets(gametime, Position, velocity,
                             rotation, viewport, keystate,
                             gamepadstate, bulletsound);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:48:57.737

好吧，在浏览了我所有的旧文件之后，我非常坦率地（“坦克”双关语）能够使用一个小标记来跟踪我按下开火按钮的次数来解决它。我不只是发布问题并回答他们顺便说一句自己设法找到了答案，希望有人发现它和我一样有用，我为错误的格式道歉。是时候回到我的项目了：）

```
 if ((previousgamepadstate.IsButtonUp(Buttons.RightTrigger) && gamepadstate.IsButtonDown(Buttons.RightTrigger))
            || (previouskeyboardstate.IsKeyUp(Keys.F) && keystate.IsKeyDown(Keys.F)))
        {

            bullets[currentbullet].alive = true;

            if (currentbullet < maxbullets - 1)
            {
                currentbullet++;
                bulletsound.Play();
            }
            else
            {
                currentbullet = 0;
            }
        }

        foreach (Bullets bullet in bullets)
        {
            bullet.update_bulets(gametime, Position, velocity, rotation, viewport, bulletsound);
        } 
```

# email - 为什么验证 smime 签名失败？

> ID：12134271
> 
> 赞同：2
> 
> 时间：2012-08-26T22:05:08.297
> 
> 标签：email, openssl, digital-signature, smime

我收到一封带有我正在尝试验证的签名的电子邮件。

我正在使用 openssl `openssl smime -inform SMIME -CAfile all.pem -verify -in signed.eml` 进行检查，它给出了错误：

```
4144:error:0D07209B:asn1 encoding routines:ASN1_get_object:too long:asn1_lib.c:142:
4144:error:0D068066:asn1 encoding routines:ASN1_CHECK_TLEN:bad object header:tasn_dec.c:1302:
4144:error:0D07803A:asn1 encoding routines:ASN1_ITEM_EX_D2I:nested asn1 error:tasn_dec.c:379:Type=X509_SIG
4144:error:21071069:PKCS7 routines:PKCS7_signatureVerify:signature failure:pk7_doit.c:978:
4144:error:21075069:PKCS7 routines:PKCS7_verify:signature failure:pk7_smime.c:312: 
```

在谷歌搜索了一段时间后，这首先似乎是 asn.1 结构的错误。但是运行`openssl asn1parse -i -in sig.txt`（sig.txt 只是之前 signed.eml 的签名）没有错误，并且很好地显示了 ASN.1 树（恕我直言）。

作为旁注：电子邮件在 MS Outlook 2010 中显示为成功验证。

任何想法签名可能有什么问题或我在这里遇到的openssl的哪些特点？除了 openssl 之外的任何其他工具来检查签名（以排除 openssl 问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:38:34.940

好的，在 openssl[邮件列表](http://www.mail-archive.com/openssl-users@openssl.org/msg68432.html)的帮助下：

这*是*asn.1 结构的错误。签名格式不正确。这不会导致 asn1parse 出现问题，但是当 OpenSSL 尝试验证它时会出现问题。
它没有正确的 DigestInfo 结构，只有原始 SHA1 哈希，这违反了 PKCS#1 规范中提到的 RSA 方案。

Outlook（和其他客户端）似乎可以容忍原始格式，而 openssl（以及 Thunderbird 和其他客户端）则不能。

# ios - 为什么我的 UITableViewCell 文本与 UITableView 单元格图像重叠？

> ID：12134279
> 
> 赞同：0
> 
> 时间：2012-08-26T22:05:41.467
> 
> 标签：ios, uitableview

我有一个 UITableView，它有各种单元格，可以拉入更大尺寸的 jpeg 图像。手头的问题是，当有人点击实际单元格时，这些图像看起来很奇怪。例如，当单击时，单元格文本的边缘似乎与图像重叠。我在其他一些单元格上也有一些 40x40 PNGS，它们看起来很好。我附上了 2 张显示该问题的图片。JPG图片看起来很乱。但是 40x40 PNG 看起来不错。我该如何流线呢？

普通的： ![在此处输入图像描述](../Images/30cbae9fbb97e1ee8a14eb9c8492a622.png)

不正常：

![在此处输入图像描述](../Images/5bc7567fab8f5a66da878ca51000330a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:28:54.910

Ahhhh自己找到了解决方案。由于远程图像尺寸不正确，我得到了这种行为。

以下建议对我有所帮助。

[http://iosdeveloperforums.com/f9/fixed-width-cell-images-afnetworking-96.html](http://iosdeveloperforums.com/f9/fixed-width-cell-images-afnetworking-96.html)

谢谢大家

# cakephp - 严格标准：在第 54 行的 path\cake\libs\object.php 中为类 Object 重新定义已定义的构造函数

> ID：12134285
> 
> 赞同：7
> 
> 时间：2012-08-26T22:06:41.997
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1

我正在尝试在 cakephp（不是 mysql）上配置 MS-MSQL 数据库。

我的 Wampserver 在我的笔记本电脑上是 2.2e-php5.4.3-httpd2.2.22-mysql5.5.24-32b（Windows x64 位。

我已经邀请这两个 dll 运行 sql server
extension=php_sqlsrv_54_ts.dll
extension=php_pdo_sqlsrv_54_ts.dll

我在运行 cakephp 1.3 时遇到了这两个错误

```
Strict standards: Redefining already defined constructor for class Object in C:\wamp\www\project\cake\libs\object.php on line 54<br/>
Strict standards: Non-static method Configure::getInstance() should not be called statically in C:\wamp\www\project\cake\bootstrap.php on line 38 
```

我还安装了 WampServer2.1e-x32 它没有工作:(

任何帮助请

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-26T11:40:13.640

您正在使用较新的 php 版本。在 php 5.4 中，E_STRICT 是 E_ALL 的一部分

在 cake 1.3 中，打开文件 /cake/bootstrap.php 并像这样更改 error_reporting

> 错误报告（E_ALL & ~E_STRICT & ~E_DEPRECATED）；

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T04:33:30.273

您的 cakephp 版本太旧，最新版本的 PHP 存在问题。

您可以尝试更新您的 CakePhp 版本。看来您使用的是1.3版本，所以更新到最新版本。你可以找到它

[https://github.com/cakephp/cakephp/archives/1.3](https://github.com/cakephp/cakephp/archives/1.3)

只需将**cake/**文件夹替换为新文件夹，即可解决此问题。

如果您是 CakePHP 新手，那么最好学习最新的框架 2.2.1。您将使用 Wamp 轻松安装此框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:02:45.493

进入您的 Config/core.php 并查找错误处理程序配置：

```
Configure::write('Error', array(
    'handler' => 'ErrorHandler::handleError',
    'level' => E_ALL & ~E_DEPRECATED,
    'trace' => true
)); 
```

并将“级别”替换为：

```
...
'level' => E_ALL & ~E_STRICT & ~E_DEPRECATED,
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-04T08:50:53.637

解决方案是将 cake 1.3 版本更新到当前的最新版本 1.3.21 。

单击此处下载最新版本：

[https://github.com/cakephp/cakephp/tags](https://github.com/cakephp/cakephp/tags)

# r - 优化（简单）循环以在列表内重命名

> ID：12134287
> 
> 赞同：0
> 
> 时间：2012-08-26T22:07:05.020
> 
> 标签：r, list, loops, indexing

我正在尝试了解循环，我目前有一长串数据框，我需要进入一堆这些数据框并重命名一些变量。我有一个函数，但我正在努力构建一种智能的方式来遍历我的列表（实际列表比下面的示例长得多），同时在重命名时应用不同的~~后缀~~前缀。

希望我下面的工作示例将说明这种情况。我想我可以将最后一部分构建成两个循环，但我似乎无法弄清楚如何在循环内写入列表中的数据框。

任何帮助，将不胜感激！

```
data(mtcars)

mtcarsList <- list(mtcars1 = mtcars, mtcars2 = mtcars,
                   mtcarsA = mtcars, mtcars = mtcars  )

# function I use to renames a specific number of variables
baRadd <- function(df, vector, suffix){
               names(df) <- ifelse(names(df) %in% vector,names(df), 
                                  paste(suffix, names(df), sep = ".")) 
               return(df)}

foo <- c("mpg", "cyl", "disp")
suffix1 <- "bar"
suffix2 <- "barBAR"
suffix3 <- "barBARbar"

mtcarsList$mtcars1 <- baRadd(mtcarsList$mtcars1, foo, suffix1)
mtcarsList$mtcars2 <- baRadd(mtcarsList$mtcars2, foo, suffix2)
mtcarsList$mtcarsA <- baRadd(mtcarsList$mtcarsA, foo, suffix3) 

 names(mtcarsList$mtcars1)
 # [1] "mpg"      "cyl"      "disp"     "bar.hp"   "bar.drat" "bar.wt"  
 # [7] "bar.qsec" "bar.vs"   "bar.am"   "bar.gear" "bar.carb"
 names(mtcarsList$mtcars2)
 # [1] "mpg"         "cyl"         "disp"        "barBAR.hp"   "barBAR.drat"
 # [6] "barBAR.wt"   "barBAR.qsec" "barBAR.vs"   "barBAR.am"   "barBAR.gear"
 # [11] "barBAR.carb"
 names(mtcarsList$mtcarsA)
 # [1] "mpg"            "cyl"            "disp"           "barBARbar.hp"  
 # [5] "barBARbar.drat" "barBARbar.wt"   "barBARbar.qsec" "barBARbar.vs"  
 # [9] "barBARbar.am"   "barBARbar.gear" "barBARbar.carb"
 names(mtcarsList$mtcars)
 # [1] "mpg"  "cyl"  "disp" "hp"   "drat" "wt"   "qsec" "vs"   "am"   "gear"
 # [11] "carb" 
```

## 更新，

根据下面 DWin 的回复，我编写了解决我的问题的脚本，

```
# rm(list = ls(all = TRUE)) ## Clear workspace

data(mtcars)

mtcarsList <- list(mtcars1 = mtcars, mtcars2 = mtcars, 
                    mtcarsA = mtcars, mtcars = mtcars)

## function I use to renames a specific number of variables
baRadd <- function(df, vector, suffix){
               names(df) <- ifelse(names(df) %in% vector,names(df), 
                                  paste(suffix, names(df), sep = ".")) 
               return(df)}

suffixes <- c('A', 'B', 'C') # suffixes to be added to the three dfTO
whatNOTtoRename <- c("mpg", "cyl", "disp") 
# variables within the data frame I do not     want to renames
dfTO <- c('mtcars1','mtcars2','mtcarsA') 
# the specific data frames I need to rename

# str(mtcarsList)
mtcarsList[ names( mtcarsList[dfTO]) ] <- 
     mapply(baRadd, df=mtcarsList[dfTO], 
                    suffix= suffixes, 
                    MoreArgs=list(vector=whatNOTtoRename) , SIMPLIFY=FALSE)

str(mtcarsList) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:53:34.037

看起来好像`mapply`可以完成这个任务：

```
> newList <- mapply(baRadd, df=mtcarsList[1:3], suffix= c(suffix1, suffix2, suffix3), MoreArgs=list(vector=foo) , SIMPLIFY=FALSE)
> str(newList)
List of 3
 $ mtcars1:'data.frame':    32 obs. of  11 variables:
  ..$ mpg     : num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
  ..$ cyl     : num [1:32] 6 6 4 6 8 6 8 4 4 6 ...
  ..$ disp    : num [1:32] 160 160 108 258 360 ...
  ..$ bar.hp  : num [1:32] 110 110 93 110 175 105 245 62 95 123 ...
  ..$ bar.drat: num [1:32] 3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
  ..$ bar.wt  : num [1:32] 2.62 2.88 2.32 3.21 3.44 ...
  ..$ bar.qsec: num [1:32] 16.5 17 18.6 19.4 17 ...
  ..$ bar.vs  : num [1:32] 0 0 1 1 0 1 0 1 1 1 ...
  ..$ bar.am  : num [1:32] 1 1 1 0 0 0 0 0 0 0 ...
  ..$ bar.gear: num [1:32] 4 4 4 3 3 3 3 4 4 4 ...
  ..$ bar.carb: num [1:32] 4 4 1 1 2 1 4 2 2 4 ...
 $ mtcars2:'data.frame':    32 obs. of  11 variables:
  ..$ mpg        : num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
  ..$ cyl        : num [1:32] 6 6 4 6 8 6 8 4 4 6 ...
  ..$ disp       : num [1:32] 160 160 108 258 360 ...
  ..$ barBAR.hp  : num [1:32] 110 110 93 110 175 105 245 62 95 123 ...
  ..$ barBAR.drat: num [1:32] 3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
  ..$ barBAR.wt  : num [1:32] 2.62 2.88 2.32 3.21 3.44 ...
  ..$ barBAR.qsec: num [1:32] 16.5 17 18.6 19.4 17 ...
  ..$ barBAR.vs  : num [1:32] 0 0 1 1 0 1 0 1 1 1 ...
  ..$ barBAR.am  : num [1:32] 1 1 1 0 0 0 0 0 0 0 ...
  ..$ barBAR.gear: num [1:32] 4 4 4 3 3 3 3 4 4 4 ...
  ..$ barBAR.carb: num [1:32] 4 4 1 1 2 1 4 2 2 4 ...
 $ mtcarsA:'data.frame':    32 obs. of  11 variables:
  ..$ mpg           : num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
  ..$ cyl           : num [1:32] 6 6 4 6 8 6 8 4 4 6 ...
  ..$ disp          : num [1:32] 160 160 108 258 360 ...
  ..$ barBARbar.hp  : num [1:32] 110 110 93 110 175 105 245 62 95 123 ...
  ..$ barBARbar.drat: num [1:32] 3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
  ..$ barBARbar.wt  : num [1:32] 2.62 2.88 2.32 3.21 3.44 ...
  ..$ barBARbar.qsec: num [1:32] 16.5 17 18.6 19.4 17 ...
  ..$ barBARbar.vs  : num [1:32] 0 0 1 1 0 1 0 1 1 1 ...
  ..$ barBARbar.am  : num [1:32] 1 1 1 0 0 0 0 0 0 0 ...
  ..$ barBARbar.gear: num [1:32] 4 4 4 3 3 3 3 4 4 4 ...
  ..$ barBARbar.carb: num [1:32] 4 4 1 1 2 1 4 2 2 4 ... 
```

如果您想将该结果分配给 mtcarsList[1:3]，那也应该是可能的。

对您的评论：这成功了....

```
mtcarsList[ names( mtcarsList[1:3]) ] <- 
         mapply(baRadd, df=mtcarsList[1:3], 
                        suffix= c(suffix1, suffix2, suffix3), 
                        MoreArgs=list(vector=foo) , SIMPLIFY=FALSE)

 # omitted output of str(mtcarsList)  .... 
```

# javascript - Javascript window.open 大小无法正常工作。高度还行，宽度搞砸了

> ID：12134299
> 
> 赞同：0
> 
> 时间：2012-08-26T22:08:28.560
> 
> 标签：javascript, variables, methods, size, window.open

我遇到了一些 JavaScript 和 window.open 方法的问题。

我正在尝试根据当前时间控制弹出窗口的大小。小时控制高度，分钟（四舍五入到最接近的五位）控制宽度。

高度控制工作正常，并且对应于正确的值......但是宽度始终是我屏幕的 100%，我不知道为什么。

我已经放置了一个测试警报，向我显示它应该放入 window.open 方法的文本，这看起来很好 - 事实上，如果我将警报中的文本复制并粘贴到代码中并重新加载页面，那么高度和宽度都可以完美地工作。看起来很奇怪。

这是我的代码...

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Untitled</title>
    <meta name="generator" content="BBEdit 10.1" />

<script type="text/javascript">

var d = new Date();
var h = 10*(d.getHours())+300
var m = d.getMinutes();

m = 10*(Math.round(parseInt(m)/5)*5)+300;

var a = "width=";
var b = ", height=";

var size = "'"+a+m+b+h+"'";

var openWin = function(){window.open('','',size)};

function test() {alert(h); alert(m); alert(size);}

</script>
</head>

<body onload="test()">

<input type="button" value="Open Window" onclick="openWin()" />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T22:18:17.430

你有关于大小的引号。

你想要什么：

```
var size = a+m+b+h;
window.open('','',size) 
```

或者

```
window.open('','', 'width=' + m + ', height=' + h) 
```

你目前拥有的（在用 size 代替它的实际情况之后）：

```
window.open('','','"width=' + m + ', height=' + h +'"') 
```

评估为：

```
window.open('','','"width=500, height=450"') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:27:02.507

您的代码中有几个错误。

1.  你不需要 parseInt(m)。m 已经*是*型号。但是，如果您仍想在此处使用 parseInt，请指定一个基数！否则 parseInt 将猜测，这使得前导零的数字被解析为八进制数而不是十进制数。

2.  不要在这里使用“'”：`"'"+a+m+b+h+"'";`. 这不会使您的字符串成为“更多”字符串，它只会使 ' 成为您的字符串的一部分。如果你想在添加一些变量时强制输入字符串，那么只需先添加一个空字符串：`var myString = '' + a + b + c`.

这个可以解决你的问题。

# url - PHP 包含外部 url

> ID：12134302
> 
> 赞同：-1
> 
> 时间：2012-08-26T22:10:03.323
> 
> 标签：url, include, mediawiki

当试图将一个 php 文件包含到另一个文件中时，它要么什么都不做（没有错误）。如果我需要它会给出一个无用的信息

```
"Failed opening required 'http://example.org.com/xxx.php' (include_path='.:/usr/local/php5/lib/php')

<div id="menu"> <?php include("http://www.sitename.com/menu.php") ?> </div> 
```

我试图包含的文件位于同一站点和主机上。我包括的页面是：

```
root/wiki/skin/index.php (mediawiki) 
```

menu.php 位于：

```
root/menu.php 
```

由于 mediawiki 将 /wiki/ 路径视为根目录，因此我无法使用 ../../ 等退出。

我在这里做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-06T10:41:34.233

要在您的 PHP 项目中包含 URL，您必须启用 (true) 此选项：

**allow_url_include**

在您的**php.ini**配置中。您可以在此处找到更多信息：http: [//php.net/manual/en/filesystem.configuration.php#ini.allow-url-include](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-include)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:14:55.660

先生，试试这个：

```
<div id="menu"> <?php include("../../menu.php") ?> </div> 
```

# sql - 在 SQL 中将多行合二为一

> ID：12134305
> 
> 赞同：4
> 
> 时间：2012-08-26T22:10:50.730
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在 sql server 2008 中，我有一个包含 [a]、[b]、[c]、[sort] 列的表，它有 4 条记录：

```
1,      NULL,  NULL    0
NULL,   2,     NULL    1
NULL,   NULL,  3       2
10,     NULL,  NULL    3 
```

我需要以一种我得到一行的方式组合所有行，并且对于每一列我得到第一个（按排序列排序）非空值。所以我的结果应该是：

```
1,      2,     3 
```

谁能建议如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T22:22:23.460

单程

```
SELECT (SELECT TOP 1 [a]
        FROM   @T
        WHERE  [a] IS NOT NULL
        ORDER  BY [sort]) AS [a],
       (SELECT TOP 1 [b]
        FROM   @T
        WHERE  [b] IS NOT NULL
        ORDER  BY [sort]) AS [b],
       (SELECT TOP 1 [c]
        FROM   @T
        WHERE  [c] IS NOT NULL
        ORDER  BY [sort]) AS [c] 
```

或其他

```
;WITH R
     AS (SELECT [a],
                [b],
                [c],
                [sort]
         FROM   @T
         WHERE  [sort] = 0
         UNION ALL
         SELECT Isnull(R.[a], T.[a]),
                Isnull(R.[b], T.[b]),
                Isnull(R.[c], T.[c]),
                T.[sort]
         FROM   @T T
                JOIN R
                  ON T.sort = R.sort + 1
                     AND ( R.[a] IS NULL
                            OR R.[b] IS NULL
                            OR R.[c] IS NULL ))
SELECT TOP 1 [a],
             [b],
             [c]
FROM   R
ORDER  BY [sort] DESC 
```

# php - 在 Magento 中两次将捆绑产品添加到购物车时，侧边栏购物车显示不正确的价格

> ID：12134307
> 
> 赞同：2
> 
> 时间：2012-08-26T22:11:00.823
> 
> 标签：php, magento

我在安装 Magento (1.7.0.2) 时遇到了一个奇怪的行为。

当我两次将具有相同配置（捆绑选项）的捆绑产品添加到购物车时，侧边栏中的购物车显示错误的价格。错误的价格在我看来完全奇怪，毫无意义。

例如：当我添加一个成本为 6.25 美元的产品并再次添加时，购物车中的价格为 23.36 美元，尽管它应该是 12.50 美元。

然后当我浏览到普通购物车时，价格会正确显示，当我浏览回显示​​侧边栏购物车的产品页面时，它也会显示正确的价格。

奇怪的行为只发生在具有完全相同配置的捆绑产品中。我没有测试所有的产品类型，但是简单的产品不会导致这个错误。

此外，第二次添加产品并不重要。当我将不同的产品添加到中间的购物车时也会发生错误。

当我通过将数量设置为 2 一次添加两个产品时，该错误不会出现，那么一切正常。对我来说，当 Magento 尝试将这两种产品与购物车中的相同配置合并时，似乎出了点问题。

有什么建议可能导致这个问题吗？

# php - Zend Studio 中没有 PHP 标记的 PHP 文件的语法高亮显示

> ID：12134308
> 
> 赞同：2
> 
> 时间：2012-08-26T22:11:09.413
> 
> 标签：php, syntax-highlighting, zend-studio

我正在开发一个 PHP 框架，它不需要包含的文件以打开的 PHP 标记 ( `<?php`) 开头，事实上，如果文件确实包含这些标记之一，它将失败。有没有办法告诉 Zend Studio 将任何 PHP 文件视为默认位于 PHP 块中，以便我可以进行语法突出显示和代码完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:23:14.107

这听起来可能很愚蠢，为什么不在编辑过程中添加开始标签，然后将它们删除/注释掉以进行生产？要么，要么你可能不得不手动更改语法识别包，这将是一个真正的痛苦......

# c - 在 NULL 值（或未定义）指针上重新分配

> ID：12134315
> 
> 赞同：41
> 
> 时间：2012-08-26T22:12:29.883
> 
> 标签：c, undefined-behavior, realloc

我正在阅读[`realloc`](http://en.cppreference.com/w/c/memory/realloc)并且对那里提到的一点感到困惑。考虑下面的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main () {

    int* ptr = NULL;
    ptr = realloc(ptr, 10*sizeof(int));
    return 0;
} 
```

`realloc`使用初始`NULL`值分配内存有什么危险`ptr`吗？如果不是：

```
int* ptr = NULL; 
```

我有这个：

```
int* ptr; // no value given to ptr 
```

`realloc`调用using会有问题`ptr`吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-26T22:14:23.557

> 使用最初为 NULL 值的 ptr 使用 realloc 分配内存是否有任何危险

没有任何

> 7.22.3.5
> 
> 如果 ptr 是空指针，则 realloc 函数的行为类似于指定大小的 malloc 函数。

对于第二部分：

> ```
> int* ptr; // no value given to ptr 
> ```
> 
> 使用 ptr 调用 realloc 会不会有问题？

如果您使用的是未初始化的指针，那么这确实是一个非常严重的问题，因为您无法预测它们的值是什么。该函数`realloc`仅适用于`NULL`或从`malloc`/获得的值`realloc`。

> 否则，如果 ptr 与内存管理函数先前返回的指针不匹配 [...]，则行为未定义

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-26T22:56:22.607

通过显示的特定代码，最初使用空指针没有问题。

如果变量`ptr`未初始化——没有设置为 0 或 NULL——那么任何`realloc()`使用它的调用都是危险的；行为是未定义的，如果你很幸运，程序会崩溃，但如果你不走运，它似乎会工作一段时间，直到程序稍后出现问题，很难发现问题出在哪里在很久以前执行的代码中。

有些人认为最好`malloc()`在初始分配和`realloc()`之后使用。这个建议是有道理的，尤其是因为你可能不会使用`ptr = realloc(ptr, 0);`来释放内存，即使你可以这样做（所以你并不真正需要`malloc()`或者`free()`因为`realloc()`可以执行所有三个操作）。但是 C90 标准要求`realloc(0, new_size)`与 等效地工作`malloc(new_size)`，而且我知道没有表现不同的 C 库（但可能有一些；我只使用了几个 C 库，尽管大多数是使用最广泛的库）。

* * *

但是，在更一般的情况下，例如以下代码，则代码存在一个微妙的问题（但与初始空指针无关）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void)
{
    char    *ptr = NULL;
    size_t   len = 0;
    char     buffer[256];

    while (fgets(buffer, sizeof(buffer), stdin))
    {
        size_t buflen = strlen(buffer) + 1;
        if (buflen > len)
        {
            if ((ptr = realloc(ptr, buflen)) == 0)  // Danger!
                // ... handle memory allocation failure ...
            len = buflen;
        }
        strcpy(ptr, buffer);
        // ... do something with ptr
    }
    free(ptr);
    return 0;
} 
```

有什么危险？危险在于，如果第二次或随后的内存分配失败并且`ptr`是指向已分配内存的唯一指针，您只需用 null 覆盖其先前的值。这意味着您不能再释放分配的内存`ptr`——您已经泄漏了内存。（对于第一次分配，初始值为 0，被覆盖的值为 0，什么都没有改变；没有内存泄漏。这就是为什么在代码中添加了循环。）

### 经验法则

*   不要写`ptr = realloc(ptr, newsize);`

将新值保存到单独的变量中，直到您对其进行测试。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void)
{
    char    *ptr = NULL;
    size_t   len = 0;
    char     buffer[256];

    while (fgets(buffer, sizeof(buffer), stdin))
    {
        size_t buflen = strlen(buffer) + 1;
        if (buflen > len)
        {
            char *new_ptr = realloc(ptr, buflen);
            if (new_ptr == 0)
                // ... handle memory allocation failure ...
            ptr = new_ptr;
            len = buflen;
        }
        strcpy(ptr, buffer);
        // ... do something with ptr
    }
    free(ptr);
    return 0;
} 
```

此代码不会在分配失败时泄漏内存。

辅助建议：不要使用名为`new`;的变量。这将使使用 C++ 编译器编译变得困难。即使您现在不打算转换为 C++（即使您最终可能会重写内存管理），使用 C++ 关键字`new`作为 C 变量名也没有任何好处……除非您明确想要防止使用 C++ 编译器进行编译。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-26T22:15:31.670

> 使用最初为 NULL 值的 ptr 使用 realloc 分配内存有什么危险吗？

不，那将完全像一个`malloc`.

> 如果不是：
> 
> ```
> int* ptr = NULL; 
> ```
> 
> 我有这个：
> 
> ```
> int* ptr; // no value given to ptr 
> ```
> 
> 使用 ptr 调用 realloc 会不会有问题？

是的，会有问题。如果`realloc`没有得到 a `NULL`，它将尝试从该位置开始扩展内存，或者*可能会*尝试`free`和`malloc`另一部分内存。由于*未初始化的变量可以具有任何值*，因此机会非常高，它们不是`realloc`喜欢的值。如果幸运的话，您的程序会立即崩溃。

# html - 使用 HTML5/CSS3 的可编辑笔画文本

> ID：12134322
> 
> 赞同：0
> 
> 时间：2012-08-26T22:13:39.670
> 
> 标签：html, css

我需要制作一个具有两种不同颜色的填充和笔触的可编辑文本，以放置在图片背景上，例如电影字幕，黄色填充和黑色笔触。我只找到了带有画布的教程和示例，但我认为不可能使其可编辑，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:32:48.940

最好使用 CSS3 `text-shadow`：

```
#container {
    color: yellow;
    text-shadow: #000 1px 1px 0px, #000 -1px -1px 0px;
}​ 
```

这是[小提琴](http://jsfiddle.net/gMsTq/1/)

# java - 类型 [classname] 必须实现继承的抽象方法 KeyListener.keyTyped(KeyEvent)

> ID：12134323
> 
> 赞同：-4
> 
> 时间：2012-08-26T22:13:43.643
> 
> 标签：java, keylistener

java：我卡在错误当我使用keyListener时**，类型Pong.Move1必须实现继承的抽象方法KeyListener.keyTyped(KeyEvent) 。**没看懂是什么意思？帮助？

这是我遇到问题的线程...

```
private class Move1 extends Thread implements KeyListener{
  public void run(){
    addKeyListener(this);
    while(true){
      //hitRight makes you lose.
      //point is how many times it ricochets.
      if(ball.intersects(borderRight)){
        hitRight = true;
      }
      if(ball.intersects(borderLeft)){
        point++;
      }
  }

}
public void keyPressed(KeyEvent event){
while(event.getKeyCode()==40||event.getKeyCode()=='s'){
direction = DOWN;
Thread.sleep(500);
}
}
public void KeyReleased(KeyEvent event){

}
public void KeyTyped(KeyEvent event){

}

} 
```

我也被困在`Thread.sleep(500);`我的线上。它说**Unhandled 异常类型 InterruptedException**。有什么帮助吗？谢谢。

哦，我忘记了什么。
1：当我尝试运行它时，我得到的**唯一**错误是：
`Exception in thread "main" java.lang.Error: Unresolved compilation problem: at Pong.main(Pong.java:50)`. 就是这样`public static void main(String[] args)`。我的完整代码在最后，所以你可以看看它（plz）
2：我正在使用eclipse。
3：我基本上是一个初学者（不是真的）

我的完整代码：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;
import java.awt.event.*;

import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.event.EventListenerList;
public class Pong extends JFrame{
    public final int WIDTH = 1000, HEIGHT = 1000;
    final int UP = 1, DOWN = 2;
    boolean hitRight;
    int point = 0;
    int direction;
    Rectangle bg = new Rectangle(0,0,WIDTH,HEIGHT);
    Rectangle borderLeft = new Rectangle(0,0,WIDTH/320,HEIGHT);
    Rectangle borderRight = new Rectangle(WIDTH-WIDTH/320,0,WIDTH/320,HEIGHT);
    Rectangle borderTop = new Rectangle(borderLeft.x,borderLeft.y,WIDTH,HEIGHT/35);
    Rectangle borderBottom = new Rectangle(0,HEIGHT-HEIGHT/320,WIDTH,HEIGHT/320);
    Rectangle ball = new Rectangle(WIDTH/2,HEIGHT/2,WIDTH/64,HEIGHT/64);
    Rectangle board = new Rectangle(WIDTH-WIDTH/160,0,WIDTH/128,HEIGHT/10);
public void paint(Graphics graphics){
super.paint(graphics);
graphics.setColor(Color.BLACK);
graphics.fillRect(bg.x,bg.y,bg.width,bg.height);
graphics.setColor(Color.RED);
graphics.fillRect(borderLeft.x, borderLeft.y, borderLeft.width, borderLeft.height);
graphics.fillRect(borderRight.x, borderRight.y, borderRight.width, borderRight.height);
graphics.fillRect(borderTop.x, borderTop.y, borderTop.width, borderTop.height);
graphics.fillRect(borderBottom.x, borderBottom.y, borderBottom.width, borderBottom.height);
graphics.setColor(Color.WHITE);
graphics.fillRect(ball.x,ball.y,ball.width,ball.height);
graphics.fillRect(board.x,board.y,board.width,board.height);
}
    /**
     * This Pong game made by me.
     * This has no copied code.
     * Any similarities are coincidences.
     * @param args
     */
    /*
     * The constructor.
     */
    public Pong(){
    super("Pong");
    setSize(WIDTH, HEIGHT);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Pong p = new Pong();
    }
    /*
     * The move thread.
     */
private class Move1 extends Thread implements KeyListener{
    public void run(){
        addKeyListener(this);
            while(true){
        //hitRight makes you lose.
        //point is how many times it ricochets.
    if(ball.intersects(borderRight)){
        hitRight = true;
    }
    if(ball.intersects(borderLeft)){
        point++;
    }
                    }

        }
    public void keyPressed(KeyEvent event){
    while(event.getKeyCode()==40||event.getKeyCode()=='s'){
    direction = DOWN;
    Thread.sleep(500);
    }
    }
    public void KeyReleased(KeyEvent event){

    }
    public void KeyTyped(KeyEvent event){

    }

    }
}
/*
 * End of move thread...
 */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:27:22.023

您的第一个错误，与 KeyListener 相关，只是一个案例错误。在 Java 中，方法和变量以[camelCase](http://en.wikipedia.org/wiki/CamelCase)命名，并且语言区分大小写，因此您必须将方法定义为`keyTyped`而不是`KeyTyped`. 这同样适用于`keyReleased`。

至于您的第二个错误，您必须进行必要的更改以处理`InterruptedException`Thread#sleep 抛出的声明。您可以将该方法调用包含在[try](http://docs.oracle.com/javase/tutorial/essential/exceptions/try.html) - [catch](http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)块中。（但是，请注意，KeyEvent 的键码永远不会改变，所以你有一个潜在的无限 while 循环。）

我建议阅读一两个关于实现关键侦听器[的教程。](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:32:35.390

为了实现 KeyListener，您需要实现该单个接口包含的所有方法。这些都是：

```
keyPressed
keyDown
keyTyped 
```

为了使用接口，您必须实现它们的所有方法。

此外， Thread.sleep(500) 可能会产生异常。Java 基本上要求您处理错误，以防万一出现问题。为此，您需要尝试...捕获，如下所示：

```
try
{
    Thread.sleep(500);
}
catch(InterruptedException e)
{
    System.out.println("Error!");
} 
```

# sdk - Windows 8 SDK 重命名了所有标题，我不知道现在要包括什么？

> ID：12134325
> 
> 赞同：6
> 
> 时间：2012-08-26T22:14:10.060
> 
> 标签：sdk, windows-8, winapi, directx-11

这些是我更新到新 SDK 之前的标题：

```
#pragma once

#ifndef _EXTERNAL_DEPENDENCIES_H_
#define _EXTERNAL_DEPENDENCIES_H_

#if defined(DEBUG) || defined(_DEBUG)
#define _CRTDBG_MAP_ALLOC
#include <crtdbg.h>
#endif

#include <windows.h>
#include <time.h>
#include <mmsystem.h>
#include <cassert>
#include <ctime>
#include <algorithm>
#include <string>
#include <sstream>
#include <fstream>
#include <vector>
#include <assert.h>
#include <fcntl.h>
#include <pdh.h>
#include <stack>
#include <map>
#include <memory>
#include <random>
#include <xaudio2.h>
#include <x3daudio.h>
#include <xaudio2fx.h>
#include <ogg\ogg.h>
#include <ogg\os_types.h>
#include <vorbis\codec.h>
#include <vorbis\vorbisenc.h>
#include <vorbis\vorbisfile.h>

#include "d3dx11Effect.h"
#include <d3dx11.h>
#include <xnamath.h>
#include <dxerr.h>
#include <dinput.h>
#include <d3dcommon.h>
#include <dxgi.h>
#include <d3d11.h>
#include <d3dcompiler.h>
#include <d3dx10math.h>
#include <d3dx11async.h>
#include <D3DX11tex.h>
#include <gdiplus.h>

#pragma comment (lib, "gdiplus.lib")
#pragma comment (lib, "winmm.lib")
#pragma comment (lib, "dxguid.lib")  
#pragma comment (lib, "d3dx9d.lib")  
#pragma comment (lib, "d3dx10d.lib")  
#pragma comment (lib, "d3d11.lib")  
#pragma comment (lib, "d3dx11.lib")        
#pragma comment (lib, "dxgi.lib")
#pragma comment (lib, "dxgi.lib")
#pragma comment (lib, "dxerr.lib")
#pragma comment (lib, "d3dx10.lib")
#pragma comment (lib, "wsock32.lib")
#pragma comment (lib, "dinput8.lib")
#pragma comment (lib, "dxguid.lib")
#pragma comment (lib, "pdh.lib")
#pragma comment (lib, "comctl32.lib")
#pragma comment (lib, "xaudio2.lib")
#pragma comment (lib, "x3daudio.lib")
#pragma comment (lib, "libogg.lib")
#pragma comment (lib, "libogg_static.lib")
#pragma comment (lib, "libvorbis.lib")
#pragma comment (lib, "libvorbisfile.lib")

#pragma warning (disable : 4482)

#endif 
```

至少有一半在新的 SDK 中丢失了……

大多数核心 DirectX 标头都已重命名，我解决了这个问题，但其中一半只是丢失了，例如 Dxerr.h 和 d3dx11async.h 甚至 d3dx10math.h/xnamath.h（哦，当我包含 DirectXMath.h 时它仍然表示 XMFLOAT3 未定义）。我现在不知道该怎么办，它是否说明了如何从 2010 年 6 月的 DirectX SDK 迁移到 Windows SDK 8.0？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T09:57:52.707

DirectXMath.h 中的 XMFLOAT3 位于命名空间 DirectX 中。

尝试在头文件中添加以下内容：

```
using namespace DirectX; 
```

您还可以包含`<xnamath.h>`而不是直接包含`<DirectXMath.h>`或`<D3DX10Math.h>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T13:13:57.313

您是否尝试过[http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275(v=vs.85).aspx#sdk_vs11](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275(v=vs.85).aspx#sdk_vs11)中的注释？尤其是第 5 点和第 7、8、9、10 点很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T22:25:53.613

`grep`通过您从现在缺少的标头中使用的功能的新标头。否则，函数的 MSDN 文档可能会告诉您需要什么头文件。

# php - 使用相同登录名和数据库的两个脚本

> ID：12134331
> 
> 赞同：0
> 
> 时间：2012-08-26T22:14:56.927
> 
> 标签：php, authentication, login

我有两个“由同一个人制作”的 php 脚本，我让它们都调用同一个 mysql 数据库并合并所有表。现在它使用同一个表进行登录。所以我可以使用相同的用户名和密码登录，但是当我登录到主站点然后转到另一个脚本/客户端时。它要我重新登录。

我知道我必须包括一些东西或举行一个会议或一些东西（我不擅长 php）。所以我希望能够登录到主站点并转到 /client 并且仍然可以登录。有什么想法吗？

更新：他们都有一个 /lib/class_user.php 我相信会话开始的地方，这里是顶部的一些代码：

从主站点：

```
 /**
   * Users::startSession()
   * 
   * @return
   */
  private function startSession()
  {
    if (strlen(session_id()) < 1)
        session_start();

    $this->logged_in = $this->loginCheck();

    if (!$this->logged_in) {
        $this->username = $_SESSION['username'] = "Guest";
        $this->sesid = sha1(session_id());
        $this->userlevel = 0;
    }
  }

/**
   * Users::loginCheck()
   * 
   * @return
   */
  private function loginCheck()
  {
      if (isset($_SESSION['username']) && $_SESSION['username'] != "Guest") {

          $row = $this->getUserInfo($_SESSION['username']);
          $this->uid = $row['id'];
          $this->username = $row['username'];
          $this->email = $row['email'];
          $this->name = $row['fname'].' '.$row['lname'];
          $this->userlevel = $row['userlevel'];
          $this->sesid = sha1(session_id());
          $this->membership_id = $row['membership_id'];
          $this->access = $row['access'];
          return true;
      } else {
          return false;
      }  
  }

  /**
   * Users::is_Admin()
   * 
   * @return
   */
  public function is_Admin()
  {
      return($this->userlevel == 9 or $this->userlevel == 8);

  } 
```

从 /client/lib/class_user.php：

```
 /**
   * Users::startSession()
   * 
   * @return
   */
  private function startSession()
  {
      session_start();
      $this->logged_in = $this->loginCheck();

      if (!$this->logged_in) {
          $this->username = $_SESSION['username'] = "Guest";
          $this->sesid = sha1(session_id());
          $this->userlevel = 0;
      }
  }

  /**
   * Users::loginCheck()
   * 
   * @return
   */
  private function loginCheck()
  {
      if (isset($_SESSION['username']) && $_SESSION['username'] != "Guest") {

          $row = $this->getUserInfo($_SESSION['username']);
          $this->uid = $row->id;
          $this->username = $row->username;
          $this->email = $row->email;
          $this->name = $row->fname . ' ' . $row->lname;
          $this->userlevel = $row->userlevel;
          $this->sesid = sha1(session_id());
      $this->currency = $row->currency;
          return true;
      } else {
          return false;
      }
  }

  /**
   * Users::is_Admin()
   * 
   * @return
   */
  public function is_Admin()
  {
      return ($this->userlevel == 9 or $this->userlevel == 5);

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:23:26.027

我的猜测是这两个脚本设置了不同的 $_SESSION 变量。如果您将其放在页面模板底部（或者如果您不使用模板系统，则为每个页面），这将向您显示正在设置的内容：

```
echo "<pre>";
print_r($_SESSION);
echo "</pre>"; 
```

# erlang - 读取元组键和值

> ID：12134338
> 
> 赞同：2
> 
> 时间：2012-08-26T22:15:50.260
> 
> 标签：erlang, tuples, data-retrieval

如何在 Erlang 中读取元组键和值？

我有这个变量：

```
Params = [<<"TPUIBrowser">>,0,18,
 {[{<<"End">>,<<"location-1Ã¿">>},{<<"Start">>,<<"location-1">>}]},
 null] 
```

我想获得 和 的`<<"End">>`值`<<"Start">>`。

我怎么能在 Erlang 中做到这一点？

我可以这样做：

```
[_,_,_,A,_] = Params.
{[{_,B},{_,C}]} = A. 
```

但这感觉非常冗长且容易出错（即当我收到更多参数时）。最好的*二郎*方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:20:19.607

[列表](http://www.erlang.org/doc/man/lists.html)库中有这方面的功能。查看[列表：keyfind](http://www.erlang.org/doc/man/lists.html#keyfind-3)：

```
[_,_,_,{A},_] = Params,
{Key, Value} = lists:keyfind(<<"End">>, 1, A). 
```

（我假设你知道你在`Params`哪里`A`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:36:04.090

或者，如果您计划添加更多字段， 您可以使用特别适合的[记录。](http://learnyousomeerlang.com/a-short-visit-to-common-data-structures#records)

由于您在这里使用列表，`{[{_,B},{_,C}]} = A.`我假设可能有更多元素；在这种情况下，创建一个递归函数来解包它可能会更好。

# azure - Azure 发布包内容

> ID：12134339
> 
> 赞同：0
> 
> 时间：2012-08-26T22:15:52.327
> 
> 标签：azure

当我“发布”或“打包”我拥有的 Azure“云服务”WCF 时，发布或打包是否实际上包含我的应用程序的源代码，或者只是正在发布的二进制文件。Microsoft 有没有办法查看我的应用程序的代码？假设实际的 C# 代码没有发布或在 Microsoft 服务器中显示是否安全？如果正在发布二进制文件，则无法将二进制文件恢复为源代码，对吗？我只是想保护我的知识产权。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:10:08.490

二进制文件被部署。

任何 .NET 库都可以非常简单地进行反编译，尽管有一些混淆工具会使反编译的代码更难阅读（有关开源反编译器的讨论，请参阅[Open Source Alternatives to Reflector？ ）。](https://stackoverflow.com/questions/2425973/open-source-alternatives-to-reflector)

就我个人而言，我不会担心 Microsoft 反编译和窃取您的 IP。无论如何，任何托管服务提供商都可以访问您的部署。

# python - SQLAlchemy Core：连接意外关闭

> ID：12134341
> 
> 赞同：1
> 
> 时间：2012-08-26T22:16:14.623
> 
> 标签：python, python-3.x, sqlalchemy, database-connection

我使用 Cherrypy 在 Python 3.2 之上构建了一个小的自定义 Web 框架来构建 WSGI 应用程序和 SQLAlchemy Core（仅用于连接池和执行文本 SQL 语句）。

我正在使用的版本：

*   蟒蛇：3.2.3
*   樱桃派：3.2.2
*   SQL 炼金术：0.7.5
*   Psycopg2：2.4.5

对于每个请求，使用`sqlalchemy.engine.base.Engine`´s`connect`方法从池中检索数据库连接。请求处理程序完成后，使用`close`方法关闭连接。伪代码例如：

```
with db.connect() as db:
    handler(db) 
```

上下文管理器在哪里`db.connect()` 定义如下：

```
@contextmanager
def connect(self):
    conn = self.engine.connect()
    try: 
        yield conn
    finally:
        conn.close() 
```

我希望这是完成这项任务的正确做法。它一直有效，直到页面处理程序中的事情变得更加复杂。

我的行为很奇怪。由于未知原因，连接有时会在处理程序完成工作之前关闭。但不是每次！

通过观察，这仅在连续快速发出请求时才会发生。如果我在请求之间稍作停顿，则连接不会关闭并且请求成功完成。但无论如何，这种情况并非每次都会发生。我没有在请求的失败/成功中找到更具体的模式。

我观察到我的上下文管理器没有关闭连接。那时它已经关闭了。

**我的问题：** 如何确定我的连接何时、为什么以及通过什么代码关闭？

我尝试调试。我在`sqlalchemy.engine.base.Connection`´s`close`方法上设置了断点，但连接在到达此代码之前已关闭。这很奇怪。

我将不胜感激任何提示或帮助。

**编辑 ** zzzeek 要求的信息：

“连接被关闭”的症状：很抱歉之前没有澄清这一点。它`sqlalchemy.engine.Connection`是封闭的。

在处理程序中，我调用`sqlalchemy.engine.base.Connection`´s`execute`方法从数据库中获取数据（选择语句）。我可以说它`sqlalchemy.engine.Connection`是关闭的，因为我`closed`在调用执行之前检查它的属性。

我可以在此处发布回溯，但您可能会在其中看到的唯一一件事是在我的 DB 包装器库中执行之前引发了异常（因为连接已关闭）。

如果我删除此检查（并让`execute`方法执行），SQLAlchemy 会引发此异常： http: [//pastebin.com/H6052yca](http://pastebin.com/H6052yca)

关于 zzzeek 提到的并发问题。我必须道歉。经过更多观察，情况略有不同。

这是如何调用错误的确切过程：

```
Request for HandlerA. Everything ok. 
Wait moment (about 10-20s).
Request for HandlerB. Everything ok.

Request for HandlerA. Everything ok.
Immediate request for HandlerB. Error!
Immediate request for HandlerB. Error!
Immediate request for HandlerB. Error!
Wait moment (about 10-20s).
Request for HandlerB. Everything ok. 
```

我正在使用 pool_size = 5 的默认 SQLAlchemy 池类。

我知道当你没有实际代码时，你无法创造奇迹。但不幸的是，我不能分享它。是否有调试此类错误的最佳实践？还是唯一的选择是一步一步地更深入地调试并尝试弄清楚？

**另一个观察：**

当我在调试器（WingIDE）中启动服务器时，我无法显示错误。可能是因为调试器在解释代码时太慢了，以至于在处理第二个请求（RequestB）之前，连接以某种方式“修复”了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:27:30.873

经过一天的调试。我发现了问题。

不幸的是，它与 SQLAlchemy 没有直接关系。所以这个问题应该被删除。但是你们试图帮助我，所以我会回答我自己的问题。也许有一天，有人会发现这很有帮助。

基本上，错误是由我的自定义发布/订阅方法引起的，这些方法在多线程环境中表现不佳。

我尝试逐行步进代码......这是行不通的（正如我在问题中描述的那样）。所以我开始生成非常详细的日志记录正在发生的事情。

即便如此，一切看起来都很正常，直到我注意到崩溃前的几行，模型中引用的 Connection 对象的地址发生了变化。这实际上意味着将另一个 Connection 对象分配给模型，并且该连接对象已经关闭。

所以教训是。当一切看起来正确时，打印/记录有问题的对象的 repr()。

感谢评论者的时间。

# php - PDO MYSQL 更新不起作用

> ID：12134344
> 
> 赞同：1
> 
> 时间：2012-08-26T22:16:21.187
> 
> 标签：php, mysql, pdo

我在获取正确的 sql 查询以更新用户配置文件时遇到问题。我使用（基本上）相同的查询来插入数据并且它工作正常（只是没有 WHERE id=clientid 并且在执行数组中没有 clientid。下面的查询不会更新数据库中的任何数据。

我测试并确保所有变量都被发布并且它们是。作为旁注，这个查询对sql注入安全吗？

```
$conn = new PDO("mysql:host=$DB_HOST;dbname=$DB_DATABASE",$DB_USER,$DB_PASSWORD);

// Deal with the POST variables here...(excluded)

$sql = "UPDATE clients (firstname, lastname, origincountry, dob, gender, email, phone, address, postal, city, province, referred, notes)
        VALUES (:firstname, :lastname, :origincountry, :dob, :gender, :email, :phone, :address, :postal, :city, :province, :referred, :notes)
        WHERE id = :clientid" ;

$q = $conn->prepare($sql);

$q->execute(array(':firstname'=>$firstname,
                  ':lastname'=>$lastname,
                  ':origincountry'=>$origincountry,
                  ':dob'=>$dob,
                  ':gender'=>$gender,
                  ':email'=>$email,
                  ':phone'=>$phone,
                  ':address'=>$address,
                  ':postal'=>$postal,
                  ':city'=>$city,
                  ':province'=>$province,
                  ':referred'=>$referred,
                  ':notes'=>$notes,
                  ':clientid'=>$clientid)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:39:55.720

您的 SQL 无效。请参阅[更新](http://dev.mysql.com/doc/en/update.html)。（感谢@rambocoder 指出这一点）。

使用这个 SQL：

```
UPDATE clients SET firstname = :firstname, lastname = :lastname, origincountry = :origincountry, dob = :dob, gender = :gender, email = :email, phone = :phone, address = :address, postal = :postal, city = :city, province = :province, referred = :referred, notes = :notes
WHERE id = :clientid 
```

# c++ - 1e-9 或 -1e9，哪一个是正确的？

> ID：12134345
> 
> 赞同：19
> 
> 时间：2012-08-26T22:16:25.973
> 
> 标签：c++, math, floating-point, notation, exponential

我被分配了一些旧代码，当我阅读它时，我注意到它具有以下形式：

```
float low = 1e-9;
float high = 1e9;

float lowB = 1e-9;
float highB = 1e9;

float lowL = 1e-9;
float highL = 1e9; 
```

所以我看到它正在尝试使用 e 表示法定义一些范围，对吗？但不`1e-9`应该是`-1e9`吗？

那么值将介于`-1000000000`和之间`1000000000`，对吗？

我不确定这`1e-9`是什么意思？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-26T22:18:46.627

两者都不比另一个更正确。它们只是代表不同的值。

`1e-9`是`0.000000001`；减号适用于指数。

`-1e9`是`-1000000000.0`；减号适用于数字本身。

(`e`或`E`) 的意思是“10 次方”，`1e9`“1 次 10 的 9 次方”，`1e-9`意思是“1 次 10 的负 9 次方”。在数学科学记数法中，这通常由上标表示：1 × 10 ^(-9)或 -1 × 10 ⁹。编程语言采用`e`or`E`表示法，因为它比上标更容易输入和打印（就此而言仍然如此）。（我认为这可能是 Fortran 在 1950 年代引入的，但我不确定确切的历史。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T22:19:40.767

“低”和“高”是指绝对值。绝对值低的数字小，高的数字大。否定并不重要，因为您已经了解如何使用它们。浮点数的重要之处在于它们的可变*比例*（即指数），因此习惯上提供比例的下限和上限而不是值。

# php - PHP 电子邮件内容作为附件到达

> ID：12134352
> 
> 赞同：0
> 
> 时间：2012-08-26T22:17:06.230
> 
> 标签：php

我有这段 PHP 代码，虽然它可以工作，但问题是电子邮件内容与预期的附件一起作为附件发送，这意味着当电子邮件到达时，正文是空白的，但有两个附件。一个是预期的附件，另一个是应该在电子邮件中显示的电子邮件内容。有什么我做错了吗？

这是完整的源代码：

```
<?php
require('fpdf/fpdf.php');
include('./config.php');

$pdf = new FPDF('P', 'pt', 'Letter');
$pdf->SetAutoPageBreak(true, $margin);

$pdf->AddPage();
$pdf->SetFont('arial','',12);

   if(isset($_POST['accept'])){
    $id = $_POST['id'];
    $to = 'me@somewhere.com';
    $subject = urldecode($_POST['subject']);
    $message = urldecode($_POST['message']);

    $data = '';

    $result = mysql_query("select * from applications where id = $id");
    $row = $data_array = mysql_fetch_assoc($result);

    $data .= "Name: " . $row['name'] . " \n\n";
    $data .= "Surname: " . $row['surname'] . "\n\n";    
    $data .= "Age: ". $row['age'] . "\n\n";
    $data .= "Dob: ". $row['dob'] . "\n\n"; 
    $data .= "Height: ". $row['height'] . "\n\n";
    $data .= "Add1 : ".$row['address1'] . "\n\n";   
    $data .= "Add2:  ".$row['address2'] . "\n\n";   
    $data .= "Add3: ".$row['address3'] . "\n\n";
    $data .= "Postcode: ".$row['postcode'] . "\n\n";            
    $data .= "Town:  ".$row['town'] . "\n\n";   
    $data .= "County: ". $row['county']. "\n\n";    
    $pdf->SetX(140);

    $pdf->Ln(2);

    $pdf->MultiCell(0, 15, $data);

    $from     = "me@mydomain.com"; 

    $separator = md5(time());

    $eol = PHP_EOL;

    // attachment name
    $filename = "form.pdf";

    // encode data (puts attachment in proper format)
    $pdfdoc = $pdf->Output("", "S");
    $attachment = chunk_split(base64_encode($pdfdoc));

    // main header
    $headers  = "From: ".$from.$eol;
    $headers .= "MIME-Version: 1.0".$eol; 
    $headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";

    $body = "--".$separator.$eol;
    $body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;

    // message
    $body .= "--".$separator.$eol;
    $body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
    $body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
    $body .= $message.$eol;

    // attachment
    $body .= "--".$separator.$eol;
    $body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
    $body .= "Content-Transfer-Encoding: base64".$eol;
    $body .= "Content-Disposition: attachment".$eol.$eol;
    $body .= $attachment.$eol;
    $body .= "--".$separator."--";

    // send message
    if(mail($to, $subject, $body, $headers)){

                echo "<b>Email successfully sent</b>";
        }
    else{
         echo "Your message could not be sent.";
      }
}

?> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:40:50.687

我实际上有一些从头开始写这种东西的经验。经过多年维护自制的 PHP 电子邮件生成器，我的建议是您不应该这样做。**与**编写自己的解决方案（并用您的时间和/或资源支付所有固有的错误）相比，研究和找到当今（无论何时）最受支持的主流解决方案肯定需要更少的时间和资源。

# java - 将二进制数据插入二维数组

> ID：12134357
> 
> 赞同：0
> 
> 时间：2012-08-26T22:17:46.823
> 
> 标签：java, arrays, multidimensional-array

我正在尝试读取二进制文件（.dat）并将所有这些内容保存在二维数组中。行数定义为二进制文件中的行数，列数定义为9。所以，我希望能够在二进制文件的行中检测到-1，并填充二维数组跳过这些值。我目前正在使用以下代码，但它只会删除一行，即使二进制文件中有不止一行带有负数。

```
RandomAccessFile Archivocopiadora = new RandomAccessFile("Archivos/CopiadorasAgregadas.dat", "rw");
cantRegistros = Archivocopiadora.length()/tamRegistro;
matrizcopiadorascargadas = new String[(int)cantRegistros][9];
contadorespaciosvacios = 0;
int registroenceros = 0;
String lecturacopiadoraa = "";

for(int registro = 0; registro < cantRegistros; registro++) {
    Archivocopiadora.seek(registro * tamRegistro + 88);
    int prueba = Archivocopiadora.readInt();

    if (prueba == -1) {
        contadorespaciosvacios++;
        stdOut.println(contadorespaciosvacios);
        List<String[]> l = new ArrayList<String[]>(Arrays.asList(matrizcopiadorascargadas));
        l.remove(registro);
        array2 = l.toArray(new String[l.size()][9]);
    } else {
        Archivocopiadora.seek(registro * tamRegistro);
        for (int ex = 0; ex < 40; ex++)
            lecturacopiadoraa = lecturacopiadoraa + Archivocopiadora.readChar();

        lecturacopiadoraa.trim();
        matrizcopiadorascargadas[registro][0] = lecturacopiadoraa;
        matrizcopiadorascargadas[registro][1] = Double.toString(Archivocopiadora.readDouble());
        matrizcopiadorascargadas[registro][2] = Integer.toString(Archivocopiadora.readInt());
        matrizcopiadorascargadas[registro][3] = Integer.toString(Archivocopiadora.readInt());
        matrizcopiadorascargadas[registro][4] = Integer.toString(Archivocopiadora.readInt());
        matrizcopiadorascargadas[registro][5] = Double.toString(Archivocopiadora.readDouble());
        matrizcopiadorascargadas[registro][6] = Double.toString(Archivocopiadora.readDouble());
        matrizcopiadorascargadas[registro][7] = Double.toString(Archivocopiadora.readDouble());
        matrizcopiadorascargadas[registro][8] = Double.toString(Archivocopiadora.readDouble());
        lecturacopiadoraa = "";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:04:21.660

当您决定“删除”一行时，您将创建一个新的字符串数组列表，从中删除所需的行，然后将其转换为一个数组，该数组被分配给 array2——我没有看到任何地方声明过。特别是，您似乎没有对 matrizcopiadorascargadas 做任何事情。

# ios - UITableView 可滚动内容大小

> ID：12134361
> 
> 赞同：0
> 
> 时间：2012-08-26T22:18:43.230
> 
> 标签：ios, xcode, uitableview, uiscrollview

我正在尝试通过滚动和重复背景来实现类似报刊亭的效果。如果我可以设置它的内容大小（一种似乎被 UITableView 代码中的其他内容覆盖的继承方法），我可以使用 UITableView 来执行此操作，以便用不可滚动的单元格填充视图。

目前我正计划制作一个自定义的uiscrollview。这将更复杂，并且不会重复使用单元格。

那么，有没有办法设置 UITableView 的内容大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T01:11:09.230

您可以通过简单地设置您拥有的单元格数量（假设您有一个 1 节表视图并且不使用“分组”样式表）来半破解 UITableView 的“contentSize”类型的控制：

您想要的高度 contentSize 每个单元格的高度/高度（默认为 44）

现在，您的问题是，如果您只有三行数据要显示，那么如何处理其余的单元格？好吧，只需将它们设置`backgroundColor`为与表格的背景颜色相同，并将它们的`selectionStyle`属性设置为`UITableViewCellSelectionStyleNone`. 哇，现在你有了不可见的单元格，并且可以设置表格的'contentSize'。

请注意，您的 contentSize 将仅具有单元格高度的分辨率，如果您将单元格高度保留为默认值 44，那么您只能将 contentSize 设置为 44 的倍数。

# flash - wowza / red5 性能

> ID：12134370
> 
> 赞同：3
> 
> 时间：2012-08-26T22:19:56.033
> 
> 标签：flash, streaming, video-streaming, red5, wowza

我需要为视频流服务构建基础设施，它能够处理超过 100 个直播流，平均有 50 个观众，其中顶级流可以有多达 5000 个观众。所有流将作为多播服务，不需要额外的转码（输入和输出将是 h.264），不会进行录制。我很好奇有多少流可以处理简单、非专业的服务器（客户托管在 OVH 中）——假设在具有 32gig 内存的四核服务器上？

PS我试过问wowza，但他们的回答并不让我满意（营销的东西，没什么用处）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T08:34:24.717

通常，最大用户数取决于可用的最大硬件。问题还在于您使用的是 RTMP 还是 RTMPT（通过 HTTP 隧道）。HTTP 隧道似乎更需要资源。Red5 和 Wowza 都在内部使用 Apache Mina，因此差异可能不会那么大。

我们在单个会议室中使用 Red5 进行了一些负载测试，大约有 150 人和 250 人。没有任何问题，但是所需的内存将随着需要处理的每 100 个新流而不断增长。

您应该确保以打开文件的最大数量足够大的方式配置服务器。如果太小，您可能会在此处找到有关可能影响的更多信息：http: [//blog.thecodingmachine.com/content/solving-too-many-open-files-exception-red5-or-any-other-application](http://blog.thecodingmachine.com/content/solving-too-many-open-files-exception-red5-or-any-other-application)

Red5 还提供了某种集群构建。我不知道它的当前状态，但是我认为如果您简单地管理对可用节点的重定向，您也可以轻松地构建具有多个节点的集群。您只需要确保想要连接到同一个流的人应该访问同一个服务器节点。

# c# - 通过传递名称来分配字段值

> ID：12134371
> 
> 赞同：0
> 
> 时间：2012-08-26T22:20:01.390
> 
> 标签：c#, .net, reflection, field

我一直在阅读其他示例，并且似乎可以通过传入字段的名称来分配字段的值。

```
private string fieldName;  //contains the name of the field I want to edit

void IObserver.Update(object data)
{       
    FieldInfo field = this.GetType().GetField(fieldName);

    if(field != null)
    {
        field.SetValue(this, data);         
    }   
} 
```

字段总是以 null 结尾，我不知道为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:23:11.750

.Net 反射中的`Get*`方法默认只搜索公共成员。
要获得私有字段，请通过`BindingFlags.NonPublic | BindingFlags.Instance`.

# pdf - ColdFusion CFPDFFORM 不填充 PDF 表单域

> ID：12134374
> 
> 赞同：3
> 
> 时间：2012-08-26T22:20:39.730
> 
> 标签：pdf, coldfusion, cfpdfform

我创建了一个包含两个表单字段的快速 PDF 文件，名字和姓氏（或名字和姓氏），带有提交按钮，并使用以下代码尝试在新的 PDF 文件中填充这些字段：

```
<cfpdfform action="populate" source="#variables.AbsPath#\test.pdf">
    <cfpdfformparam name="FirstName" value="foo" />
    <cfpdfformparam name="LastName" value="bar" />
</cfpdfform> 
```

但是，我收到此错误：

```
The system has attempted to use an undefined value, which usually indicates a programming error, either in your code or some system code.
Null Pointers are another name for undefined values.
Platform, Locale, and Platform Name must not be null 
```

我尝试阅读 PDF 文件以确保使用此表单字段是正确的，它们是：

```
<cfpdfform action="read" source="#variables.AbsPath#\test.pdf" result="fields" />

<cfdump var="#fields#"> 
```

结构转储：

```
FirstName:  [empty string]
LastName:   [empty string]
Submit:     [empty string] 
```

我尝试搜索 Adob​​e 文档和其他一些站点，但找不到此错误的解决方案。我还尝试在 cfpdfform 标记中添加一个“destination”参数以防万一，但得到了相同的结果。PDF 文件确实存在。有任何想法吗？提前致谢。

更新：这是堆栈跟踪：

```
java.lang.NullPointerException: Platform, Locale, and Platform Name must not be null
at com.adobe.fontengine.fontmanagement.platform.PlatformFontDescription.<init>(Unknown Source)
at com.adobe.fontengine.font.opentype.OpenTypeFont.getPlatformFontDescription(Unknown Source)
at com.adobe.fontengine.font.FontImpl.getPlatformFontDescription(Unknown Source)
at com.adobe.fontengine.font.FontImpl.getPlatformFontDescription(Unknown Source)
at com.adobe.fontengine.fontmanagement.platform.PlatformFontResolverImpl.addFont(Unknown Source)
at com.adobe.internal.pdftoolkit.core.fontset.impl.PDFFontSetImpl.addFont(Unknown Source)
at com.adobe.internal.pdfm.util.FontSetBuilder.loadFontsPath(FontSetBuilder.java:418)
at com.adobe.internal.pdfm.util.FontSetBuilder.loadSystemFonts(FontSetBuilder.java:346)
at com.adobe.internal.pdfm.util.FontSetBuilder.makePDFFontSet(FontSetBuilder.java:239)
at com.adobe.internal.pdfm.util.FontSetBuilder.getPdfFontSet(FontSetBuilder.java:93)
at com.adobe.internal.pdfm.PDFM7Factory.getPdfFontSet(PDFM7Factory.java:97)
at coldfusion.document.DocumentServiceImpl.getAssemblerFontSet(DocumentServiceImpl.java:512)
at coldfusion.pdf.PDFForm.populateFields(PDFForm.java:292)
at coldfusion.tagext.lang.PDFFormTag.doEndTag(PDFFormTag.java:347)
at cfsubmit2ecfm1224790315.runPage(C:\ColdFusion\wwwroot\nVision\projects\test\pdfform\submit.cfm:9)
at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:231)
at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:416)
at coldfusion.filter.CfincludeFilter.invoke(CfincludeFilter.java:65)
at coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:381)
at coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48)
at coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40)
at coldfusion.filter.PathFilter.invoke(PathFilter.java:94)
at coldfusion.filter.LicenseFilter.invoke(LicenseFilter.java:27)
at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
at coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62)
at coldfusion.filter.RequestThrottleFilter.invoke(RequestThrottleFilter.java:126)
at coldfusion.CfmServlet.service(CfmServlet.java:200)
at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
at jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
at jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
at jrun.servlet.FilterChain.service(FilterChain.java:101)
at jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
at jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
at jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
at jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
at jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T21:07:03.057

我相信这是正在使用的特定服务器的字体问题。这就是为什么相同的代码将在生产服务器而不是测试服务器上工作的原因。我遇到了同样的问题，虽然我没有很好的解决方案，但这是我学到的。

1.  堆栈跟踪显示获取**OpenType**字体的**getPlatformFontDescription**时出错。
***   我们的 Windows 服务器将一些**TrueType**字体列为**OpenType**。是你的？*   使用以下代码更正了该问题，但这只是一种解决方法。

    ```
    <cfpdf name="local.pdffile" action="read" source="some path" >
    <cfscript>
    local.pdfReader = createObject("java", "com.lowagie.text.pdf.PdfReader").init(tobinary(local.pdffile));
    local.outputStream = createObject("java", "java.io.ByteArrayOutputStream").init();
    local.pdfStamper = createObject("java", "com.lowagie.text.pdf.PdfStamper").init(local.pdfReader,local.outputStream);
    local.Acroform = local.pdfStamper.getAcroFields();
    //Populating Form Fields     
     local.Acroform.setField("Field1",Arguments.Value1);
     local.Acroform.setField("Field2",Arguments.Value2);
     // etc.
     local.pdfStamper.setFormFlattening(true); //optional
      local.pdfStamper.close();
      local.pdfReader.close();
      local.pdffile = local.outputStream.toByteArray();
     </cfscript>
     <!--- flatten="no" must be set or you will get the error again  --->
     <cfpdf action="write" source="local.pdffile" destination="#variables.OutputPath##local.UUID#.pdf" overwrite="yes" flatten="no"  /> 
    ```

    *   **更多诊断：**使用 Java 子系统简单地列出服务器可用的所有字体也会失败。尝试这个。

    ```
     <cfset list=createobject("java","com.adobe.internal.pdfm.util.FontSetBuilder")>
     <cfdump var="#list#">
     <cfset dummy = list.getPdfFontSet()>
     <cfdump var="#dummy.toString()#">
     <!--- this should fail ---> 
    ```

    *   目前，我们已经通过从 Windows\Fonts 文件夹中删除所有字体并隔离损坏的字体来“修复”我们的问题。这很辛苦，但似乎有效。** 

 **祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:36:01.203

您没有提及您是如何创建 PDF 文件的。根据您创建 PDF 文件的方式，表单域可能包含在子表单中。从 LiveCycle 中的模板生成的 PDF 将执行此操作。默认情况下，LiveCycle 会将子表单命名为“form1”。为了填充这些表单字段，您需要包含 cfpdfsubform 标记。请参阅此处的文档： [cfpdfsubform 文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-76e8.html)

所以你的代码看起来像这样：

```
<cfpdfform action="populate" source="#variables.AbsPath#\test.pdf">
    <cfpdfsubform name="form1">
        <cfpdfformparam name="FirstName" value="foo" />
        <cfpdfformparam name="LastName" value="bar" />
    </cfpdfsubform>
</cfpdfform> 
```

您包含的用于阅读 PDF 文件的代码应该会显示这些字段是否包含在子表单中。转储将显示您的表单字段包含在另一个结构中。这将是您在 cfpdfsubform 标记的 name 属性中使用的名称。

HTH。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-05T19:22:11.420

我刚刚写了一个脚本来解决这个问题：[https ://stackoverflow.com/a/20408559/1223555](https://stackoverflow.com/a/20408559/1223555)

这是字体文件没有设置语言环境或平台名称的问题。Coldfusion 中的 PDF 函数称之为

```
<cfset list=createobject("java","com.adobe.internal.pdfm.util.FontSetBuilder")>
<cfset dummy = list.getPdfFontSet()> 
```

这会枚举每种字体，如果一种字体不好，它会引发异常并终止您的进程。

我的代码列举了 c:\windows\fonts 中的所有字体，然后告诉你那些不好的字体。

以下是我们遇到的问题：

```
AdobeNaskh-Medium.otf
Mechanical.TTF
msgothic.ttf
MyriadArabic-Bold.otf
MyriadArabic-BoldIt.otf
MyriadArabic-It.otf
MyriadArabic-Regular.otf 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T14:45:38.160

在重新阅读您的问题后，我才意识到我走错了路。我在想您在填充 pdf 中的字段时遇到问题。但你真正的问题是空指针。嗬！很抱歉造成混乱。

通常，该错误告诉您未定义您正在使用的变量。我在您的示例中看到的唯一变量是#variables.AbsPath#。您正在指定变量范围。那是对的吗？变量范围仅在创建它的页面（以及包含的页面）上可用。

您没有包括如何定义该变量。你能分享一下吗？

错误是随机发生还是一直发生？

您确定错误发生在 cfpdfform 行而不是其他地方吗？我会在您的代码周围放置一个 cftry/cfcatch 块并转储 cfcatch 结构以获得更具体的错误。你可以试试然后回帖吗？**

# c# - Web API 中长寿命对象的依赖注入？

> ID：12134379
> 
> 赞同：1
> 
> 时间：2012-08-26T22:21:40.197
> 
> 标签：c#, asp.net-mvc, ninject, asp.net-web-api

我正在使用 ASP.NET Web API 和 Ninject 组合一个 REST 服务，尽管我怀疑这可能是一个比任何特定于我的 IoC 框架的更普遍的 IoC 问题。我有许多对象需要访问用户实体的简单缓存：

```
public class UserCache
{
    private IList<User> users;
    private IUserRepositoryFactory factory;

    [Inject]
    public UserCache(IUserRepositoryFactory factory)
    {
        this.factory = factory;
        this.users = new List<User>();
    }

    public void Add(int id)
    {
        IUserRepository repo = factory.Create(new TestContext());

        this.users.Add(repo.Get(id));
    }

    public int Count { get { return this.users.Count; } }
} 
```

实际上，缓存是通读的，并且会使用 UserRepository（和关联的 IUserRepository 接口）填充用户实体：

```
public class UserRepository : IUserRepository
{
    private readonly TestContext context;

    public UserRepository(TestContext context)
    {
        this.context = context;
    }

    public User Get(int id)
    {
        return new User() { Name = "Test User" };
    }
} 
```

缓存是长期存在的，并在整个应用程序中共享。我的问题是：我想使用我的 UserRepository 从我的数据库中提取用户实体。这个存储库需要以某种方式注入缓存，或者使用工厂实例化。

The trick is, the only way I've been able to both a) create the cache such that Ninject will inject its dependencies and b) have access to the cache throughout the same is to bind the cache in singleton scope and inject it into objects that need access to it:

```
kernel.Bind<TestContext>().ToSelf();
kernel.Bind<UserCache>().ToSelf().InSingletonScope(); 
```

...and then in a controller (for example):

```
[Inject]
public UserCache Cache { get; set; } 
```

My question is, is this the best way to treat long-lived objects that require injection? Or is there some better way that I'm missing? I don't want to give the cache (or any other objects like it) direct access to the Ninject kernel.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T00:41:28.187

Isn't this supposed to be the other way around? You should use IUserRepository in your controllers and the repository under the hood should fetch the data from cache (better if done using an interceptor) if it is already cached, otherwise should hit the database.

That way you don't have to worry about lifecycle of the long living cached objects. Remember that at the end of the day the whole WebAPI (so far) runs on the web stack, this means the application can be recycled unexpectedly based on different factors.

# php - htaccess 仅在未提供参数的情况下才将一个域重定向到另一个域？

> ID：12134384
> 
> 赞同：0
> 
> 时间：2012-08-26T22:22:17.443
> 
> 标签：php, linux, apache, .htaccess

我有一个域 oldexample.com，并且我想仅在未提供参数时将访问该域的用户重定向到 newexample.com。在域提供参数的情况下，它应该重定向到其他地方 - 所以，oldexample.com/?id=5 不应该重定向到 newexample.com，而是我想将它重定向到 newexample.com 中的某个内部目录，比如说到 newexample.com/dir/5。

以下是我希望重定向如何工作的摘要：

```
oldexample.com -> newexample.com
oldexample.com/?id=3 -> newexample.com/dir/3
oldexample.com/index.php?id=6 -> newexample.com/dir/6 
```

那么我将如何在 htaccess 中编写 RewriteRules 来完成这项工作呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:28:28.710

尝试：

```
RewriteEngine On

# for /
RewriteCond %{HTTP_HOST} ^oldexample.com$ [NC]
RewriteCond %{QUERY_STRING} !id=
RewriteRule ^$ http://newexample.com/ [L,R=301]

# for /?id=###
RewriteCond %{HTTP_HOST} ^oldexample.com$ [NC]
RewriteCond %{QUERY_STRING} ^id=([0-9]+)
RewriteRule ^(index.php)?$ http://newexample.com/dir/%1? [L,R=301] 
```

最后一条规则与`/`和匹配`/index.php`。这些规则需要位于`oldexampl.com`文档根目录的 htaccess 文件中。

# php - 贝宝，支付流专业版

> ID：12134386
> 
> 赞同：1
> 
> 时间：2012-08-26T22:22:30.220
> 
> 标签：php, paypal, express-checkout, payflowpro

这是完整的情况：

*   使用 PayPal 的快速结帐和正常结帐运行的站点

现在，如果客户以正常方式使用 PayPal 订购。意味着首先登录（如果没有）提供您运输等的完整信息，然后去 PayPal 网站支付并完成您的订单。

是否可以使用[Payflow Pro](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/home)对该订单进行参考交易（请记住我使用 PayPal 完成订单）？还是我们必须使用其他方式？

# mysql - 这是在 MySQL 中搜索的正确方法吗

> ID：12134392
> 
> 赞同：0
> 
> 时间：2012-08-26T22:24:04.160
> 
> 标签：mysql

我有两张桌子。t1 和 t2。我想选择来自 t1 并发生在 t2 中的值。我写的是以下内容：

```
select col1 from t1, t2
where t1.col1y=t2.col2; 
```

这是搜索价值的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:28:29.283

是的，这行得通，但它是编写连接的旧形式。使用新表格：

```
select t1.col1
from t1
inner join t2 on t1.col1 = t2.col2 
```

# jquery - jQuery 1.7.2。spservices 语法错误，无法识别的表达式：[nodeName=z:row]

> ID：12134393
> 
> 赞同：1
> 
> 时间：2012-08-26T22:24:08.577
> 
> 标签：jquery, xml, sharepoint-2007, row, nodename

出现语法错误，无法识别的表达式：此代码上的 [nodeName=z:row]。

```
<script type="text/javascript" src="https://.../jquery.js"></script> 
<script type="text/javascript" src="https://..//spservices.js"></script> 
<script>
$(document).ready(function(){
 var queryStringValues = $().SPServices.SPGetQueryString();
 var t = queryStringValues["Title"];
 var query = "<Query><Where><Eq><FieldRef Name='Title'/><Value Type='Text'>" + t + "</Value></Eq></Where></Query>";
 var url = window.location;
 $().SPServices({
            operation: "GetListItems",
            listName: "ApprovalCustom",
            async: false,
            CAMLQuery: query,
            completefunc: function (xData, Status) {
                $(xData.responseXML).find("[nodeName=z:row]").each(function(){
                    id = $(this).attr("ows_ID");
                    url = $().SPServices.SPGetCurrentSite() + "/Lists/ApprovalCustom/DispForm.aspx?ID=" + id;
                    window.location = url;
                });
                }
        });
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:30:10.400

您需要引用属性的值：`.find('[nodeName="z:row"]')` 始终引用属性值。

并且不要`$()`用于 XML 数据。使用`$.parseXML()`. [http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:19:14.627

如果您使用的是 jquery 1.7 及更高版本，则语法无法再使用，请参阅[jQuery Library for SharePoint Web Services (SPServices) v0.7.0 Beta 1](http://sympmarc.com/2011/11/23/jquery-library-for-sharepoint-web-services-spservices-v0-7-0-beta-1-available/)。请使用 $(xData.responseXML).SPFilterNode("z:row").each(function() { }); 反而。

# tableview - 访问 JavaFX TableView ObservableArrayList 中的子类属性

> ID：12134394
> 
> 赞同：0
> 
> 时间：2012-08-26T22:24:39.323
> 
> 标签：tableview, observablecollection, javafx, javafx-2, tablecolumn

我正在尝试使用 JavaFX 中的 TableView 访问子类中的 getter 属性。我有以下课程：

```
public class PersonType implements Serializable {

private static final long serialVersionUID = 1L;

Person person;
short count;

public PersonType() {
}

public PersonType(Person person, short count) {
    super();
    this.person = person;
    this.count = count;
}
public Person getPerson() {
    return person;
}
public void setPerson(Person person) {
    this.person = person;
}
public short getCount() {
    return count;
}
public void setCount(short count) {
    this.count = count;
} 
```

Person 是这样的： public class Person implements Serializable {

```
private static final long serialVersionUID = 1L;

String firstName;
String lastName;

public Person() {
}

public String getFirstName() {
    return firstName;
}
public void setFirstName(String firstName) {
    this.firstName = firstName;
}
public String getLastName() {
    return lastName;
}
public void setLastName(String lastName) {
    this.lastName = lastName;
}
} 
```

好的 - 最后我们有以下内容：

```
@FXML
private TableColumn tcFirstName;
@FXML
private TableColumn tcLastName;

@FXML
private TableView tblPersonTypes;

ArrayList<PersonType> pType = new ArrayList<PersonType>();
//Can assume that pType here has say 5 entries, the point of this
//is I'm trying to get to the firstName, lastName properties of the
//PersonType in the TableView below like the following:

tcFirstName.setCellValueFactory(new PropertyValueFactory<String,String>("firstName"));
tcLastName.setCellValueFactory(new PropertyValueFactory<String,String>("lastName"));

//Populate Table with Card Records
ObservableList<PersonType> data = FXCollections.observableArrayList(pType);
tblPersonTypes.setItems(data); 
```

而且我不确定如何使用 PersonTypes 列表告诉表格列我想要其中包含的 Person 对象的 firstName 和 lastName 属性。我知道我可以创建一个新对象，并从 PersonTypes 中获得“计数”，然后是“firstName”、“lastName”等的其他属性，而无需 Person 的对象属性。任何帮助将不胜感激。

- 编辑 -

我认为执行此操作的另一种方法是使用 CellFactories - 我将在其中将 Person 对象传递给 CellValueFactories，然后将 CellFactory 设置为返回一个字符串值（名字列的 firstName 等）。它看起来像这样：

```
tcFirstName.setCellValueFactory(new PropertyValueFactory<Person,String>("person"));

tcFirstName.setCellFactory(new Callback<TableColumn<Person,String>,TableCell<Person,String>>(){        
    @Override
    public TableCell<Person,String> call(TableColumn<Person,String> param) {                
            TableCell<Person,String> cell = new TableCell<Person,String>(){
                    @Override
                    public void updateItem(String item, boolean empty) {
                            if(item!=null){
                                setGraphic(new Label(item.getFirstName()));
                            } 
                    }
            };                           
            return cell;
    }   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:35:47.470

尝试这个：

```
tcFirstName.setCellValueFactory(new Callback<CellDataFeatures<PersonType, String>, ObservableValue<String>>() {
     public ObservableValue<String> call(CellDataFeatures<PersonType, String> p) {
         // p.getValue() returns the PersonType instance for a particular TableView row
         if (p.getValue() != null && p.getValue().getPerson() != null) {
              return new SimpleStringProperty(p.getValue().getPerson().getFirstName());
         } else {
             return new SimpleStringProperty("<No TC firstname>");
         }
     }
  });
 } 
```

# javascript - 使用 Ajax 获取数据（放置在 div 中）

> ID：12134402
> 
> 赞同：0
> 
> 时间：2012-08-26T22:25:43.190
> 
> 标签：javascript, jquery, ajax, json

我正在尝试将我的数据添加到 div 中，但它不起作用。php 很好，但我需要细心看看他们是否能发现任何错误或建议任何变通方法来帮助找出它为什么不起作用。

在过去 5 个小时左右的时间里，我一直试图修复它，这让我绞尽脑汁。

用户评论状态，如帖子，并假设将其添加到 div。就像我的主要状态一样。主要状态的 ajax 几乎与下面的评论 ajax 相同..但是评论 ahax 玩得不好，根本没有插入任何数据。

```
<script>
$(document).ready(function(){
    $("form#mycommentform").submit(function() {
        var streamidcontent = $('#streamidcontent').val();
        var contents = $(this).children('#contents').val();

        $.ajax({
            type: "POST",
            url: "comment_add.php",
            cache: false,
            dataType: "json",
            data: { streamidcontent: streamidcontent, contents: contents}, 
            success: function(data){  
                $('#containerid').html('<div class="stream_comment_holder" style="display:none;"
                id="comment_holder_'+data['comment_streamitem']+'"><div
                id="comment_list_'+data['comment_streamitem']+'"><div
                id="tgy"></div><div class="stream_comment"
                id="comment_'+data['comment_id']+'" style="margin-top:0px;"><table
                width=100%><tr><td valign=top width=30px><img
                class="stream_profileimage"
                style="border:none;padding:0px;display:inline;" border=\"0\"
                src=\"imgs/cropped'+data['id']+'.jpg\"
                onerror="this.src=\"img/no_profile_img.jpeg\"" width=\"40\"
                height=\"40\" ></a><td valign=top align=left><a
                href="/profile.php?username='+data['username']+'">'+data['first']+'</a><div
                class="commentholder">'+data['first']+'</div><br/><div
                id="commentactivitycontainer"></div></div></table></div></div><div
                class="form"><form id="mycommentform" method="POST" 
                class="form_statusinput"><input type="hidden"  name="streamidcontent"
                id="streamidcontent" value="'+data['comment_streamitem']+'"><input
                type="text" name"contents" id="contents" placeholder="Say something"
                autocomplete="off"><input type="submit" id="button"
                value="Feed"></form></div><div class="stream_comment_holder"
                style="display:;"><div class="like_name"><b><a
                href="profile.php?username='+data['username']+'">You Like
                This</a></b></div></div>');
            }
        });
        return false
    });
});
</script> 
```

发现错误

```
success: function (data) {
    alert("SUCCESS!!!");
},
error: function (xhr, ajaxOptions, thrownError) {
    alert(xhr.statusText);
    alert(xhr.status);
    alert(thrownError);
}

OK
200
SyntaxError.JSONparse:Unexpectedcharacter 
```

JSON

```
$json = array();
$check = "SELECT comment_id, comment_datetime, comment_streamitem FROM streamdata_comments WHERE comment_streamitem=".$_POST['streamidcontent']."";
$check1 = mysqli_query($mysqli,$check);
$resultArr = mysqli_fetch_array($check1);
$json['comment_id'] = $resultArr['comment_id'];
$json['comment_streamitem'] = $resultArr['comment_streamitem'];
mysqli_free_result($check1);

$check = "SELECT * FROM users WHERE id=".$_SESSION['id']."";
$check1 = mysqli_query($mysqli,$check);
$resultArr = mysqli_fetch_array($check1);
$json['username'] = $resultArr['username'];
$json['id'] = $resultArr['id'];
$json['first'] = $resultArr['first'];
$json['middle'] = $resultArr['middle'];
$json['last'] = $resultArr['last'];
mysqli_free_result($check1);

echo json_encode($json); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:50:23.797

我建议使用某种模板系统来完成所有艰苦的工作来组装您的内容。

查看[创建临时 Javascript 模板](http://net.tutsplus.com/tutorials/javascript-ajax/create-a-makeshift-javascript-templating-solution/)或[John Resig 的](http://ejohn.org/blog/javascript-micro-templating/)解决方案。

在内部构建那串标记`html()`有点粗糙。

您还有一个 display:none 的内联样式在 first 上`div`，所以您不会看到它。

您是否尝试过剥离该功能只是为了查看是否填充了任何内容

```
success: function(data){  
   $('#containerid').html('blurb');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:48:41.883

我不知道这是否是唯一的问题，但是您尝试在您正在创建的 html 属性中嵌入引号，例如：

```
'onerror="this.src=\"img/no_profile_img.jpeg\""' 
```

它将产生这个无效的字符串：

```
onerror="this.src="img/no_profile_img.jpeg"" 
```

您应该嵌入单引号，如下所示：

```
'onerror="this.src=\'img/no_profile_img.jpeg\'"' 
```

这会产生：

```
onerror="this.src='img/no_profile_img.jpeg'" 
```

此外，大约在倒数第六行，您有一个缺少`=`符号的属性：

```
name"contents" 
```

你插入的最外层 div 有`style="display:none;"`.

# matlab - 1个循环中的几个图，每次迭代在每个图上添加一条线

> ID：12134406
> 
> 赞同：4
> 
> 时间：2012-08-26T22:26:05.700
> 
> 标签：matlab, plot, legend, figure, axes

尝试在 Matlab 中设计以下内容：

```
** loop start;
   y(:,i) = function of x;
   z(:,i) = function of x;
   plot(x,y(:,i))   on figure 1, hold all;
   plot(x,z(:,i))   on figure 2, hold all;
** loop end;
   add title, legend, etc for figure 1 (NB: we have multiple lines);
   add title, legend, ets for figure 2 (NB: same, have multiple lines for the legend);` 
```

尝试了多种组合，但运气不佳。设法获得 2 个数字，但只有 2-nd 显示多行，而不是第一行。并且无法弄清楚如何正确地为这两个添加图例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T22:31:14.800

为每个图形和每个轴对象保存一个句柄：

```
fh1 = figure;
hold all;
ah1 = gca;

fh2 = figure;
hold all;
ah2 = gca;

for i=1:N
    y(:,i) = function of x;
    z(:,i) = function of x;
    plot(ah1, x, y(:,i)); %# tell it which axis to use (ah1)
    plot(ah2, x, z(:,i)); %# (ah2)
end

legend(ah1, ...) %# legend options here
legend(ah2, ...) %# and the other legend

%# note: you can set figure properties for each using fh1, fh2 handles. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:30:58.013

你可以这样做：

```
figHandle1 = figure(1);
figHandle2 = figure(2); 
```

然后，当您想在该图上绘图时，请执行以下操作：

```
figure(figHandle1) %Plot on figure 1
%ie plot(someStuff)
figure(figHandle2) %Plot on figure 2 
```

标题和内容也一样，您只需要通过以下方式确定哪个数字：

```
figure(handle); 
```

希望这可以帮助。

# php - 是否有可能让一个 cronjob 继续运行一个 SQL 查询，其中多行在同一个表中匹配？

> ID：12134409
> 
> 赞同：0
> 
> 时间：2012-08-26T22:26:37.713
> 
> 标签：php, cron, match, matching

我有两个表格，'pendingresults' 和 'confirmedresults' 对于一个足球网站，我正在尝试创建一个报告分数页面，该页面允许两个用户和一个团队在他们比赛后互相报告分数，例如我会使用team1和team2 ..

假设球队 1 击败球队 2，3 比 1（3-1）球队 1 的经理将进入他的报告得分页面并插入比分并选择他参加过球队 2，对此的查询会将结果放入“待定结果”表，其中包含：

```
 id, TeamA, TeamAScore, TeamBScore, TeamB 
```

所以 team1 添加分数并且查询成功，所以现在 pendingresults 表看起来有点像这样：

```
 id  TeamA     TeamAScore  TeamBScore  TeamB
         1   team1        3           1        team2 
```

我有上面的编码和工作..

我需要帮助的是，一旦 team2 将比分报告为 3-1 失败，pendingresults 表将有两个完全相同的行（除了 id），我将如何使它每隔几个小时像一个 cronjob运行以检查两行是否匹配，然后进行查询以将团队和分数插入到“confirmedresults”表中，该表与“pendingresults”具有完全相同的列，然后从pendingresults 表中删除这两行。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:31:04.797

我建议另一种方法：

如果团队经理 A 想要输入结果，您的脚本首先会检查其他团队的经理 B 是否已经输入了结果。如果是这种情况，A 只需确认或更正 B 输入的结果。

使用您的方法和 A 或 B 的分数拼写错误，您根本不会得到匹配的（记录）。

只是为了进一步改进这个想法，您只需使用一个`results`带有附加列的表来调用`confirmed`。如果 A 输入结果，则将“A”设置为`confirmed`。如果 B 他们不同意并更新分数，您将“B”设置为`confirmed`。A 然后检查并同意，因此您将“AB”设置为`confirmed`。

所有`results`设置`confirmed`为“AB”的都是已确认的匹配结果，所有其他都是待定/未确认的匹配结果。

# java - 无法将 org.hibernate.search.hcore.impl.HibernateSearchIntegrator 转换为 org.hibernate.integrator.spi.Integrator

> ID：12134410
> 
> 赞同：2
> 
> 时间：2012-08-26T22:26:45.817
> 
> 标签：java, hibernate, hibernate-search

我收到以下错误：

```
Cannot cast org.hibernate.search.hcore.impl.HibernateSearchIntegrator to 
org.hibernate.integrator.spi.Integrator 
```

堆栈跟踪：

```
 [WARN] Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'XXX threw an unexpected exception: java.util.ServiceConfigurationError: org.hibernate.integrator.spi.Integrator: Provider org.hibernate.search.hcore.impl.HibernateSearchIntegrator could not be instantiated: java.lang.ClassCastException: Cannot cast org.hibernate.search.hcore.impl.HibernateSearchIntegrator to org.hibernate.integrator.spi.Integrator
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: java.util.ServiceConfigurationError: org.hibernate.integrator.spi.Integrator: Provider org.hibernate.search.hcore.impl.HibernateSearchIntegrator could not be instantiated: java.lang.ClassCastException: Cannot cast org.hibernate.search.hcore.impl.HibernateSearchIntegrator to org.hibernate.integrator.spi.Integrator
    at java.util.ServiceLoader.fail(ServiceLoader.java:224)
    at java.util.ServiceLoader.access$100(ServiceLoader.java:181)
    at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:370)
    at java.util.ServiceLoader$1.next(ServiceLoader.java:438)
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.loadJavaServices(ClassLoaderServiceImpl.java:251)
    at org.hibernate.integrator.internal.IntegratorServiceImpl.(IntegratorServiceImpl.java:53)
    at org.hibernate.service.internal.BootstrapServiceRegistryImpl.(BootstrapServiceRegistryImpl.java:80)
    at org.hibernate.service.internal.BootstrapServiceRegistryImpl.(BootstrapServiceRegistryImpl.java:57)
    at org.hibernate.service.ServiceRegistryBuilder.(ServiceRegistryBuilder.java:76)
    at com.orangeraft.hms.server.module.login.service.LoginServiceImpl.login(LoginServiceImpl.java:46)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    ... 22 more
Caused by: java.lang.ClassCastException: Cannot cast org.hibernate.search.hcore.impl.HibernateSearchIntegrator to org.hibernate.integrator.spi.Integrator
    at java.lang.Class.cast(Class.java:3007)
    at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:362)
    ... 34 more 
```

这是我的代码：

```
Configuration configuration = new Configuration();
configuration.configure();
ServiceRegistry serviceRegistry = new ServiceRegistryBuilder()
        .applySettings(configuration.getProperties())
        .buildServiceRegistry();
SessionFactory sf = configuration.buildSessionFactory(serviceRegistry);
Session hibernateSession = sf.getCurrentSession();
FullTextSession fullTextSession = Search.getFullTextSession(hibernateSession);
    fullTextSession.createIndexer().startAndWait(); 
```

我只是想在 GWT 应用程序中创建索引，如休眠搜索教程中[所示。](http://docs.jboss.org/hibernate/search/3.2/reference/en/html_single/#d0e350)任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:22:18.603

我认为您在 WEB-INF/lib 和启动类路径中都处于休眠状态。这可能会将类加载器混淆为实现，并且接口可能不会由同一个类加载器加载，从而产生意外的 ClassCastException。

# jquery - 仅考虑 jquery 中更改的复选框

> ID：12134411
> 
> 赞同：2
> 
> 时间：2012-08-26T22:26:58.380
> 
> 标签：jquery, checkbox, each

我在一个页面和一个提交按钮上有几个复选框（一些已经通过 html checked 属性进行了检查）。我想使用 jquery 来使用 $.each() 循环运行一个函数，以便它在复选框被选中时执行该函数，但前提是它尚未被选中。另外，我想为每个未选中的复选框执行一个功能，但前提是它已经被选中。

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T22:31:35.480

这样做的一种方法是使用`.data()`来存储复选框的原始值。

```
$(document).ready(function(){
     $("input[type='checkbox']").each(function(){
        $(this).data("originalValue", $(this).is(":checked"));
    })
});;

$("#ok").click(function(){
    $("input[type='checkbox']").each(function(){
       var edited = $(this).data("originalValue") !== $(this).is(":checked");
       if (edited)
       {
           var checkboxLabel = $(this).next("label");
           alert("edited: " + checkboxLabel.text());
       }
    });
}); 
```

[​http://jsfiddle.net/8g3uz/3/](http://jsfiddle.net/8g3uz/3/)

检查用户交互而不是更改的原始解决方案：http: [//jsfiddle.net/8g3uz/1/](http://jsfiddle.net/8g3uz/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:39:15.483

为了仅对那些*最初未选中*的复选框做出反应，我建议：

```
$('#check').click(
    function(e){
        e.preventDefault();
        var checkboxes = $('input:checkbox:checked');
        checkboxes.each(
            function(i){
                if (this.defaultChecked == false) {
                    // do something, it wasn't checked on page-load, eg:
                    alert("This is a checkbox that wasn't originally checked.");
                }
            });
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qcXM3/)。

如果状态已从默认值更改，则执行某些操作，这似乎是您提出问题的基础：

```
$('#check').click(
    function(e){
        e.preventDefault();
        var checkboxes = $('input:checkbox');
        checkboxes.each(
            function(){
                if (this.defaultChecked !== this.checked) {
                    $(this).prev('label').addClass('changedFromDefault');
                }
            });
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qcXM3/1/)。

使用以下 HTML：

```
<span>
    <label for="one">one</label><input id="one" type="checkbox" checked />
</span>
<span>
    <label for="two">two</label><input id="two" type="checkbox" />
</span>
<span>
    <label for="three">three</label><input id="three" type="checkbox" />
</span>
<button id="check">Check</button>​ 
```

这个 jQuery 应该展示如何更容易地识别那些更改或未更改的元素：

```
$('#check').click(
    function(e){
        e.preventDefault();
        var checkboxes = $('input:checkbox');
        checkboxes.each(
            function(){
                if (this.defaultChecked !== this.checked) {
                    $(this)
                        .closest('span')
                        .removeClass('unchanged')
                        .addClass('changedFromDefault');
                }
                else {
                    $(this)
                        .closest('span')
                        .removeClass('changedFromDefault')
                        .addClass('unchanged');
                }
            });
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qcXM3/2/)。

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`:checkbox`选择器](http://api.jquery.com/checkbox-selector/)。
*   [`:checked`选择器](http://api.jquery.com/checked-selector/)。
*   [`click()`](http://api.jquery.com/click/).
*   [`each()`](http://api.jquery.com/each/).
*   [`HTMLInputElement`（对于`defaultChecked`财产）在 MDN](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)。
*   [`prev()`](http://api.jquery.com/prev/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T22:35:51.133

这是第一种情况的选择器：

```
$("input[type='checkbox']:not([checked]):checked"); 
```

这是第二种情况的选择器：

```
$("input[type='checkbox'][checked]:not(:checked)"); 
```

**演示：http:** [//jsfiddle.net/fascw/](http://jsfiddle.net/fascw/)

# objective-c - 核心数据 NSTableView

> ID：12134417
> 
> 赞同：0
> 
> 时间：2012-08-26T22:27:37.047
> 
> 标签：objective-c, macos, core-data, tableview

我正在开发一个 OSX 应用程序，我在其中打开一个目录并从中获取文件列表并将其放在桌子上。这工作正常，它们绑定到一个数组控制器。在我想更新表格行之前，一切看起来都很好。我将它添加到一个数组（不是数组控制器）并执行 [tableView reloadData]; 什么也没有发生！

在我将 CoreData 添加到这种情况之前，这一直很好。

当我从目录中获取文件时，我会这样做：

```
 for (NSString *file in filelist){

    NSManagedObject *fileEntity = [NSEntityDescription insertNewObjectForEntityForName:@"File" inManagedObjectContext:[self managedObjectContext]];
    [fileEntity setValue:file forKey:@"filename"];

    NSImage *Image = [NSImage imageNamed:@"tag_white.png"];
    [fileEntity setValue:Image forKey:@"taggedImage"];

} 
```

我似乎无法通过

```
-(id) tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row 
```

没有了。。

# javascript - 正确绑定事件处理程序 jquery

> ID：12134419
> 
> 赞同：0
> 
> 时间：2012-08-26T22:27:48.310
> 
> 标签：javascript, javascript-events, jquery

我正在尝试巧妙地打包一些将编辑控件添加到表格单元格的功能。下面是我想要实现的一个例子。

我想知道的是这是否是正确的方法。当我清空单元格时，我最终不得不重新绑定事件处理程序。我认为 jquery 删除了它们，但我不确定。我希望它们会保留下来，因为我已将 dom 元素保存在 ScoreManager 对象中。

```
<div id="main">
 <table id="points-table">
    <thead>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Points</th>
    </thead>
    <tr>
        <td>Joe</td>
        <td>Bloggs</td>
        <td class="points">
            <span>100</span>
            <button>edit</button>
        </td>
    </tr>
    <tr>
        <td>Jiminy</td>
        <td>Cricket</td>
        <td class="points">
            <span>77</span>
            <button>edit</button>
        </td>
    </tr>
 </table>
 </div>

 <script type="text/javascript" src="js/jquery.js"></script>
 <script type="text/javascript">
window.onload = init;

var ScoreManagers = [];

function init() {
    $('#points-table .points').each(function(){
        ScoreManagers.push( new ScoreManager(this) );
    });
}

var ScoreManager = function(cell) {
    this.cell = $(cell);
    this.edit = $('button', this.cell);
    this.points = $('span', this.cell);
    this.scoreInput = $('<input>');
    this.submit = $('<button>Submit</button>');
    this.cancel = $('<button>Cancel</button>');

    this.init();
};

ScoreManager.prototype.init = function() {
    this.edit.bind('click', $.proxy(this.showEditControls, this));
};

ScoreManager.prototype.showEditControls = function(e) {
    this.cell.empty();
    this.cell.append(this.scoreInput, this.submit, this.cancel);
    this.submit.bind('click', $.proxy(this.savePoints, this));
    this.cancel.bind('click', $.proxy(this.cancelEdit, this));
};

ScoreManager.prototype.cancelEdit = function() {
    this.cell.empty();
    this.cell.append(this.points, this.edit);
    this.edit.bind('click', $.proxy(this.showEditControls, this));
}

ScoreManager.prototype.savePoints = function() {
    this.cell.empty();
    this.points.text(this.scoreInput.val());
    this.cell.append(this.points, this.edit);
    this.edit.bind('click', $.proxy(this.showEditControls, this));
}

 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:29:30.557

您应该看看浏览器中的事件委托和事件冒泡，[PPK 博客](http://www.quirksmode.org/js/introevents.html)是一个好地方。

然后看一下[jQuery on](http://api.jquery.com/on/)方法，它以一种优雅的方式实现委托。

现在将事件绑定到考虑中的顶部元素，该元素不会被添加到 DOM，它也可以是 body，并委托给您想要的元素。

```
$('#points-table').on('click', '.points', function(){
  //what should be done when you click a point element
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:48:09.290

`bind`删除元素后将不起作用。它会将一个事件附加到所有已经可用的元素，但如果你删除该元素 - binidng 将丢失。新添加的元素也没有绑定。您可能会发现有用的[jQuery.live](http://api.jquery.com/live/)允许将事件绑定到具有指定选择器的元素，无论它是否已经存在或稍后将被添加。但是如果您使用的是最新的 jQuery，您可能需要使用替代品，因为它已被贬低。此外，您可能会发现使用它`.detach()`而不是`.empty()`因为 detach 保留事件处理程序绑定很有用。但是您将需要修改您的代码，因为这`this.cell.detach();`将删除整个单元格）而不是仅删除其子单元格。

# variables - 将变量传递给main方法java

> ID：12134420
> 
> 赞同：1
> 
> 时间：2012-08-26T22:28:01.253
> 
> 标签：variables, object, methods, main

我正在尝试编写一个具有两个类的简单程序。我希望一个类（使用 main 方法）处理所有输入和输出，另一个类处理所有数学，然后将计算返回给 main 方法。我可以成功地将变量从 main 方法传递给数学类中的对象，并使用 println 测试了该方法中的结果，但似乎无法将完成的计算传递回我的 main 方法。这是我的代码，请帮助我理解。非常感谢这是带有主要方法的类

```
import java.util.Scanner;

public class io {
    public static void main (String[] args){
        Scanner chargeTankStartGaugeFeetInput = new Scanner(System.in);
        Scanner chargeTankStartGaugeInchesInput = new Scanner(System.in);
        System.out.println("What is the charge tank's start gauge feet: ");

        String chargeTankStartGaugeFeet = chargeTankStartGaugeFeetInput.nextLine();
        System.out.println("What is the charge tank's start gauge inches: ");

        String chargeTankStartGaugeInches = chargeTankStartGaugeInchesInput.nextLine();

        math mathObject = new math();
        mathObject.changeGaugesToInches(chargeTankStartGaugeFeet, 
                                        chargeTankStartGaugeInches);
        System.out.println(mathObject.totalInches(totalInches) 
                           + " is total inches in io");     
    }
} 
```

我收到一条错误消息，主方法中的“totalInches”无法解析为变量。我的想法是否甚至接近这应该如何工作？

这是数学课

```
public class math {
    public void changeGaugesToInches(String arg1, String arg2) {
        double arg1Double = Double.valueOf(arg1).doubleValue();
        double arg2Double = Double.valueOf(arg2).doubleValue();

        double totalInches = arg1Double * 12 + arg2Double;

        System.out.println(totalInches + " is the total inches");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:51:08.170

首先，按照惯例，java 中的所有类和枚举名称都应以大写字母开头。其次，你可能想为你的数学课使用一个更具描述性的名字，`UnitsConverter`如果这就是它所做的一切的话。

在`changeGaugesToInches`中，您应该将`arg1`and重命名`arg2`为`feet`and `inches`。

最重要的是，您需要更改方法以返回结果，并将其分配给 main 方法中的变量：

```
double totalInches = mathObject.changeGaugesToInches(chargeTankStartGaugeFeet, chargeTankStartGaugeInches);

public double changeGaugesToInches(String arg1, String arg2){
    //...
    return totalInches;  
} 
```

因为此方法不使用任何实例变量，除非您认为您可能会在子类中覆盖此方法（例如添加公制单位），否则如果您将其声明为静态代码会更有效。此外，除非您需要更高的准确性，否则您可能可以使用整数。

```
double totalInches = UnitsConverter.changeGaugesToInches(chargeTankStartGaugeFeet, chargeTankStartGaugeInches);

public static int changeGaugesToInches(String feet, String inches){
    return changeGaugesToInches( Integer.parseInt(feet), Integer.parseInt(inches) );
}

// this method can be used more efficiently from parts of your app that already have the units as integers.
public static int changeGaugesToInches(int feet, int in
    //...
    return totalInches;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:51:18.700

您可以从方法返回值...

```
public double changeGaugesToInches(...)
{
  ....
  return totalIncehs;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T07:29:42.963

任何 void 方法都不能有返回值。由于 **public void changeGaugesToInches(String arg1, String arg2)**是一个 void 方法，因此它没有返回类型。

如果将其设为静态，则不能使用**math mathObject = new math();**

# actionscript-3 - AS3 Socket 读取 SocketsBytes 作为 BytesArray

> ID：12134422
> 
> 赞同：0
> 
> 时间：2012-08-26T22:28:14.987
> 
> 标签：actionscript-3, sockets, bytearray

我从 swf 发送到服务器套接字一个数组，（使用 writeObject）和服务器重新发送到所有客户端（它不是字节上的任何进程）。但在 swf 方面，我没有读过这个数组。我能做些什么来解决这个问题。

我的代码：

```
fl_socket.addEventListener(ProgressEvent.SOCKET_DATA, veri_geldi);

function veri_geldi(e:ProgressEvent):void
    {
        if (fl_socket.bytesAvailable > 0)
        {

            GELEN_VERI = fl_socket.readUTFBytes(fl_socket.bytesAvailable);
            veri_tipi = GELEN_VERI.split(';');
            switch (veri_tipi[0])
            {
                case "DURUM_BILGISI" :
                    durum_bilgisi.text = GELEN_VERI;
                    break;
//Other Cases
                default :
                //it's not work after this line...
                GELEN_BYTES = e.target.data; // "GELEN_BYTES" as a ByteArray

                    Dsteps2 = GELEN_BYTES.readObject(); // Dsteps2 as an Array

                    durum_bilgisi.text = Dsteps2[0].toString() + "|" + Dsteps2[1].toString();
                    break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:03:01.627

e.target.data 不是 ByteArray 而是 Socket 并且您在 line 读取所有接收到的字节：

```
GELEN_VERI = fl_socket.readUTFBytes(fl_socket.bytesAvailable); 
```

不要期望任何数据在行：

```
Dsteps2 = GELEN_BYTES.readObject(); 
```

...因为您已经阅读了最新的可用数据。

# javascript - 左轮手枪.js IE 9

> ID：12134434
> 
> 赞同：3
> 
> 时间：2012-08-26T22:30:18.170
> 
> 标签：javascript, jquery, internet-explorer-9

IE9 抛出“对象不支持属性或方法'revolver'”错误——其他浏览器工作正常——我认为 javascript 输入的顺序很好——而且我也不使用原型或更多 jquery 版本。

我的代码：

```
<!-- latest jQuery  -->
<script type="text/javascript" src="js/jquery/jquery.js" />
</script>
<script type="text/javascript" src="js/ajaxhelper.js"></script>
<!-- JScrollPane mousewheel plugin -->
<script type="text/javascript" src="js/jscrollpane/jquery.mousewheel.js"></script>
<!-- JScrollPane script -->
<script type="text/javascript" src="js/jscrollpane/jquery.jscrollpane.min.js">                         
</script>
<!-- Revolver.js -->
<script type="text/javascript "src="js/revolver/jquery.revolver.min.js"></script> 
```

还有我的 ajaxhelper 类：

```
function getProject(id){
$.ajax(
{
    type    : "POST",
    url     : "projects.php",
    data    : {
        "project-id" : id,
        "action" : "image"
    },
    success : function(response)
    {                      

        $(".imagesection").empty();

        $(".imagesection").append(response);

        var revolver = $('#my-slider').revolver({ ... }).data('revolver');

} 
```

我正在附加“我的滑块”，并在其上调用左轮手枪功能 - IE9 停止的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:15:01.067

我找到了这个

[https://github.com/johnnyfreeman/revolver/issues/7](https://github.com/johnnyfreeman/revolver/issues/7)

看起来像是 ie9 的一个已知问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:00:16.420

在您的 HTML HEAD 块中，更改

```
<script type="text/javascript "src="js/revolver/jquery.revolver.min.js"></script> 
```

到

```
<script type="text/javascript" src="js/revolver/jquery.revolver.min.js"></script> 
```

注意双引号在`text/javascript`哪里？:P

# python - 如何为快速应用程序设置图标？

> ID：12134436
> 
> 赞同：0
> 
> 时间：2012-08-26T22:30:19.507
> 
> 标签：python, ubuntu, glade, canonical-quickly

如何在我的规范快速项目中设置应用程序图像（图标）？即使我在 UI 设计师 Glade 中设置了图标路径，我的图标也不会出现。

在我桌面的应用程序栏中，我只看到一个齿轮。

我在 Glade 中使用了以下相对路径：

```
../media/projectname.svg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:17:33.780

已经有一段时间了，但无论如何......你应该把它放在这里：

```
YOUR_QUICKLY_PROJECT_FOLDER/data/media/YOU_PROJECT_NAME.svg 
```

（.png/.jpg 可能也可以，我不确定）

而且你不需要在程序的任何地方设置它。

# matlab - matlab中反斜杠运算符的问题

> ID：12134438
> 
> 赞同：3
> 
> 时间：2012-08-26T22:30:39.627
> 
> 标签：matlab, linear-algebra, sparse-matrix

我有这个尺寸为 900000x900000 的巨大矩阵 A。我必须求解这个线性方程 Ax=b，其中 b 是大小为 900000x1 的列矩阵。

我使用 matlab 的反斜杠运算符（如 A\b）来尝试获取 x。但是，它冻结了，我无法获得 x。大多数情况下我会出现内存不足的问题。即使我在具有更高内存的计算机上运行它，它也会使系统非常慢，我必须等待才能得到答案。

我怎样才能解出这个方程。我的矩阵非常稀疏。然而，它的波段更宽，但大多数元素为零。b 是一个完整的矩阵。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:18:12.793

我做了一个项目，我们也在其中使用如此大但幸运的是非常稀疏的矩阵。使用如此大的矩阵，您会迷失在直接方法中：您永远无法计算逆矩阵，因为它将是一个密集矩阵，您永远无法存储它。此外，诸如 LU 或 Cholesky 因式分解等方法非常昂贵，因为它们再次创建了重要的填充，即它们破坏了零。

一种可行的替代方法是使用迭代方法。如果您知道您的矩阵是对称且正定的，请尝试[共轭梯度法](http://en.wikipedia.org/wiki/Conjugate_gradient_method)：

```
x = pcg(A, b);  %# Computes a solution to Ax = b, with A symm. pos-def. 
```

如果方法收敛，我会试一试并看看。恐怕证明正定假设并不容易。

如果你没有得到解决方案，还有更多的迭代方法。例如：

```
bicg     - BiConjugate Gradient Method
bicgstab - BiConjugate Gradient Method (stabilized)
lsqr     - Least Squares QR Method
gmres    - Generalized Minimum Residual Method (I like this a lot) 
```

# django - 在 Apache 上使用 Django 和 mod_wsgi 的多个站点

> ID：12134441
> 
> 赞同：12
> 
> 时间：2012-08-26T22:31:00.007
> 
> 标签：django, apache, mod-wsgi

我目前正在使用通过 Apache 托管在同一域（但在不同端口上提供服务）的两个 Django 应用程序（比如`A`& ）。`B`我相信我的设置是正确的，但是我在两个站点上随机获得了 500 个。500 on `A`（例如）主要发生在请求被服务之后`B`（反之亦然）。

在检查错误日志（例如）时，我`A`看到wsgi`A`模块正在尝试访问其他方式也是，B 的 wsgi 引发了一个异常，抱怨缺少 A 的 settings.py 文件]。我不确定他们为什么要寻找其他设置文件，所有视图上的导入（用于 settings.py）都特定于各自的项目。`B``settings.py`

这是我的设置：

`A`正在港口上送达`8080`，`B`正在港口上送达`80`。

虚拟主机：

```
<VirtualHost *:8080>

  ServerAdmin x@x.net
  ServerName  string1

  Alias /static/ /home/PATH_TO_PROJECT_A/static/

  <Directory /home/PATH_TO_PROJECT_A/static>
  Order deny,allow
  Allow from all
  </Directory>

  WSGIScriptAlias / /home/PATH_TO_PROJECT_A/wsgi.py

  <Directory /home/PATH_TO_PROJECT_A>
  <Files wsgi.py>
  Order deny,allow
  Allow from all
  </Files>
  </Directory>

  LogLevel warn
  ErrorLog  /SOME_PATH/errorA.log
  CustomLog /SOME_PATH/accessA.log combined
</VirtualHost>

<VirtualHost *:80>
  ServerName string1
  ServerAdmin x@x.net

  Alias /APP_B/static/ /home/PATH_TO_PROJECT_B/static/

  <Directory /home/PATH_TO_PROJECT_B/static>
  Order deny,allow
  Allow from all
  </Directory>

  WSGIScriptAlias /APP_B /home/PATH_TO_PROJECT_B/wsgi.py/

  <Directory /home/PATH_TO_PROJECT_B>
  <Files wsgi.py>
  Order deny,allow
  Allow from all
  </Files>
  </Directory>

  ErrorLog /home/SOME_PATH/error2.log
  CustomLog /home/SOME_PATH/access2.log combined

  # All other files on B:80 (other than /APP_B are served normally
  DocumentRoot /home/foo/public_html/xyz/public

</VirtualHost> 
```

端口.conf：

```
NameVirtualHost *:8080
Listen 8080
Listen 80

<IfModule mod_ssl.c>
 Listen 443
</IfModule>

<IfModule mod_gnutls.c>
 Listen 443
</IfModule> 
```

'A' 上的 wsgi.py：

```
import os, sys

sys.path.append('home/PATH_TO_PROJECT_A') #1

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "PROJECT_A.settings") #2

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

在 B 上完全相同，只是对第 1 行和第 2 行进行了更改。

例如，我从`error.log`说中得到的错误来自`A`：

```
 [Sun Aug 26 17:01:49 2012] [error] [client x] Traceback (most recent call last):
 [Sun Aug 26 17:01:49 2012] [error] [client x]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 219, in __call__
 [Sun Aug 26 17:01:49 2012] [error] [client x]     self.load_middleware()
 [Sun Aug 26 17:01:49 2012] [error] [client x]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 39, in load_middleware
 [Sun Aug 26 17:01:49 2012] [error] [client x]     for middleware_path in settings.MIDDLEWARE_CLASSES:
 [Sun Aug 26 17:01:49 2012] [error] [client x]   File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 184, in inner
 [Sun Aug 26 17:01:49 2012] [error] [client x]     self._setup()
 [Sun Aug 26 17:01:49 2012] [error] [client x]   File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 42, in _setup
 [Sun Aug 26 17:01:49 2012] [error] [client x]     self._wrapped = Settings(settings_module)
 [Sun Aug 26 17:01:49 2012] [error] [client x]   File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 95, in __init__
 [Sun Aug 26 17:01:49 2012] [error] [client x]     raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
 [Sun Aug 26 17:01:49 2012] [error] [client x] ImportError: Could not import settings 'PROJECT_B.settings' (Is it on sys.path?): No module named PROJECT_B.settings 
```

如您所见`A`，错误日志抱怨缺少`B`' 。`settings.py`求大神指点，不知道怎么回事。我不明白为什么一个应用程序会寻找另一个应用程序的 settings.py 文件来导入？

这两个应用程序都按预期工作和执行，但它们确实会在服务于 500 的随机请求时中断（如果我再次刷新，它们会被清除）。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-26T22:45:36.067

Django 破坏了生成的 wsgi.py 以在不同的子解释器中在同一进程中运行多个 Django 实例。要么使用 mod_wsgi 守护进程模式并将每个进程委托给一个单独的守护进程组，要么更好，要么更改：

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "PROJECT_A.settings") 
```

到：

```
os.environ["DJANGO_SETTINGS_MODULE"] = "PROJECT_A.settings" 
```

对于其他 wsgi.py 文件也是如此。

# c# - 在标签中未检测到图片框上的鼠标单击位置

> ID：12134447
> 
> 赞同：0
> 
> 时间：2012-08-26T22:31:59.127
> 
> 标签：c#, location, label, mouseevent

我有一个仅包含 2 个东西的 Form ，一个*PictureBox*和一个*Label*。

我在图片框中添加了一个鼠标单击事件处理程序。

```
this.pictureBox1.MouseClick += picture_MouseClick; 
```

在处理程序内部，我需要检查鼠标单击的位置是否在标签的范围内。为此，我使用鼠标事件位置并检查该位置是否在标签范围内。

```
private void picture_MouseClick(object sender, MouseEventArgs e)
{
    if (label1.Bounds.Contains(e.Location))
    {
        MessageBox.Show("FOUND YOU!");
    }
} 
```

我希望这会起作用，因为它看起来很容易，但是导致显示 MessageBox 的单击位置（图像中的橙色框）向下偏移并位于标签的右侧。

![带标签的表格](../Images/258d9db2a61218c7de3f654acf053bba.png)

这是因为鼠标事件是相对于 PictureBox 而标签边界是相对于 Form 的吗？或相反亦然？

顺便说一句，您在图像中看到的标签在运行时是隐藏的。我只是将标签用作了解用户是否单击某个位置的“黑客”方式。

```
public Form1()
{
    InitializeComponent();
    this.label1.Visible = false;
    this.pictureBox1.MouseClick += picture_MouseClick;
} 
```

（我尝试从 eX 中减去标签的宽度，从 eY 中减去标签的高度，但这似乎不起作用。）

谢谢，

简

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:46:30.993

这`e.Location`是相对于图片框左上角的鼠标位置（一个点）。
该`Bounds`属性相对于控件的容器。
（在这种情况下，容器就是形式，正如您和 Slack 正确指出的那样）

要检查正确的位置，我将尝试使用此代码（现已测试）

```
Point p = e.Location;
p.X += pictureBox1.Left;
p.Y += pictureBox1.Top;
if(label1.Bounds.Contains(p))
   ..... 
```

# mono - Simple.Data 今天可以在单声道中安全使用吗？

> ID：12134448
> 
> 赞同：1
> 
> 时间：2012-08-26T22:32:06.597
> 
> 标签：mono, simple.data

关于 Simple.Data 和 Mono 的一些问题：

我现在可以为使用 Mono 的新项目安全地选择 Simple.Data 吗？
是否打算在未来的版本中保持 Mono 兼容性？
功能是否与 Windows 版本相同？
已经在 Mono 中使用过的人的一些证词？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:09:40.433

作为 RC 流程的一部分，很快就会有一个新的官方 Mono 版本。现在您应该能够克隆 GitHub 存储库 (http://github.com/markrendle/Simple.Data) 并构建最新版本。

Mono 支持是项目的要求，并将在所有未来版本中继续。

在 Windows 和 MS.NET 上工作的一切都应该在 OSX 和 Linux 上的 Mono 上工作。如果您发现某些东西不起作用，那是一个错误，应该在[http://github.com/markrendle/Simple.Data/Issues](http://github.com/markrendle/Simple.Data/Issues)报告。

我个人没有在 Mono 上使用 Simple.Data 的任何项目，所以我无法提供真实的见证，但有大约 700 个测试都通过了 Mac OSX 上的 Mono 2.10 针对 SQL Server DB 的测试。

# email - 自动打开新收到的电子邮件中的链接

> ID：12134455
> 
> 赞同：0
> 
> 时间：2012-08-26T22:33:15.590
> 
> 标签：email, hyperlink, gmail

是否有程序或脚本或任何东西可以使我的电子邮件客户端/网络邮件自动打开新收到的电子邮件中的网页链接？

如果有人知道或可以为雷鸟制作插件或使其工作，我不介意付费。只是我需要在默认 Internet 浏览器选项卡中自动打开收到的电子邮件中的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:46:55.253

我只能说我非常非常怀疑它。如果曾经创建过一个，它很可能会被大多数下载源提供商删除，因为那里存在相当大的安全风险。

此外，除了安全因素之外，您还需要考虑一个简单的负载因素。我经常为客户制作时事通讯，每一个都带有文本版本、在线版本、徽标链接等的链接……所以如果你确实有这样的插件，你也会打开这些链接，这很疯狂。此外，请记住电子邮件的取消订阅链接，在某些电子邮件上，您会被要求确认您单击（/打开）的其他电子邮件，然后您就被取消了。这将是非常不受欢迎的。

我确实了解您可能有 X 这样做的原因，例如因为它是一个内部电子邮件系统，它创建报告并且它这样做和那样做等等。我认为这里的大多数人都明白有时会有非常奇怪的用例，但我认为没有人可以在这里为您提供帮助，对不起！

# java - 如何正确使用带有 2 个不同传入数组源的 String.format？

> ID：12134456
> 
> 赞同：0
> 
> 时间：2012-08-26T22:33:44.147
> 
> 标签：java, arrays, string

我想知道在这种情况下使用 String.format 的最佳方法......

```
String names[] = new String[10];
int idNumber[] = new int[10];
String list = "";

for( byte pos = 0; pos < idNumber.length; pos++){
names[pos] = JOptionPane.showInputDialog("Enter the name...");
idNumber[pos] = Integer.parseInt(JOptionPane.showInputDialog("Enther the ID number..."));
list += ("Name: " + names[pos] + "ID: " + idNumber + "\n");
}
JOptionPane.showMessagedialog(null, list); 
```

我希望使用 String.format 来更改“list”的输出

从：

```
 Name: John Wilson ID: 56
 Name: Edward Sinclair ID: 60
 Name: Bob Stuart ID: 77 
```

至：

```
 Name: John Wilson     ID: 56
 Name: Edward Sinclair ID: 60
 Name: Bob Stuart      ID: 77 
```

在这种情况下，我如何正确使用 %-10s... %-5s...？我在这里有点迷路......提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:45:09.870

我真的不明白你在使用 string.format 时遇到了什么问题。你真的试过了吗？

```
list += ("Name: %20s ID: %02d\n").format(names[pos], idNumber[pos]); 
```

如前所述，拥有以下内容会更有效率：

```
StringBuilder list = new StringBuilder(); 
```

然后替换`list += ...`为`list.append(...)`

# assembly - 测量延迟 8051

> ID：12134458
> 
> 赞同：1
> 
> 时间：2012-08-26T22:34:01.990
> 
> 标签：assembly, microcontroller, 8051

我需要为 8051 编写延迟代码。我可以这样做，但我不知道如何计算延迟的频率。例如，这是我做的延迟：

```
DELAY: MOV R2, 0FFH
D2:    NOP
       NOP
       DJNZ R2, DELAY
       RET 
```

但我不知道这个延迟会产生多少赫兹的频率。有什么方法可以计算吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:39:47.320

您需要知道每条指令需要多少个周期，以及处理器的速度。

一般来说，如果你的处理器是 1MHz，NOP 需要 2 个周期，DJNZ 需要 3 个周期（所有这些都起来了，不知道这些在 8051 上需要多少个周期），然后第一次通过循环，从 D2：为 7 个周期 (2 + 2 + 3 = 7)，使用 1MHz 处理器，每个周期为 1 微秒，因此需要 7 µs，冲洗并重复，直到达到所需的延迟。

请注意，您可能不希望 DJNZ 跳到 DELAY，而是跳到 D2。真的不熟悉8051，但这只是一个猜测。

也不要忘记添加 MOV 和 RET 指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:59:25.620

一个简单的延迟例程，带有用于理解的注释

```
delay_1_ms:       ;calling this routine take 2 mc ;tmc=2
    MOV R7,#250   ;mov rn,#data take 1 mc(machine cycle);tmc=2+1
    DJNZ R7,$     ;djnz take 2mc for each time exicuted;tmc=3+(2*250)
    MOV R7,#247   ;mov rn,#data take 1 mc              ;tmc=503+1
    DJNZ R7,$     ;djnz take 2mc for each time exicuted.;tmc=504+(247*2)
    RET           ;ret takes 2mc so total machine cycle=998+2=1000mc 
```

如果 12mhz 晶体的一个机器周期是 1 微秒，那么这个程序需要 1000*1 微秒=1 毫秒延迟。

# java - 在文本字段旁边添加文本以描述用户希望输入的数据

> ID：12134459
> 
> 赞同：4
> 
> 时间：2012-08-26T22:34:03.610
> 
> 标签：java, swing, tooltip, layout-manager

我正在尝试创建一个模拟唱片店的简单 GUI。我还处于起步阶段。

当我尝试添加文本来描述用户在文本字段中输入的内容时遇到了麻烦。

此外，我也无法将每个文本字段定位在自己的行中。换句话说，如果一行中有两个文本字段的空间，那么它会显示在一行中，我试图将每个文本字段都显示在自己的行中。

这是我到目前为止所尝试的：

```
item2 = new JTextField("sample text"); 
```

但是上面的代码只是在文本字段中添加了默认文本，这不是我需要的：/

我提前感谢所有帮助。

```
public class MyClass extends JFrame{
        private JTextField item1;
        private JTextField item2;

        public MyClass(){
            super("Matt's World of Music");
            setLayout(new FlowLayout());

            item1 = new JTextField();
            item2 = new JTextField();

            add(item1);
            add(item2);

            thehandler handler = new thehandler();

            item1.addActionListener(handler);
            item2.addActionListener(handler);   

        }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T22:37:06.497

对于您的第一个问题，您需要使用 JLabel 来显示您的文本。构造函数是这样的：

```
JLabel label = new JLabel("Your text here"); 
```

在 GUI 中工作得非常好。

至于自己做事，我推荐一个 GridLayout。便于使用。

在您的构造函数中，在添加任何内容之前，请执行以下操作：

```
setLayout(new GridLayout(rows,columns,x_spacing,y_spacing)); 
```

`x_spacing`和`y_spacing`都是确定元素水平和垂直间距的整数。

然后像你做的那样添加。摆弄它，你会得到它的工作。

所以你的决赛看起来像：

```
setLayout(new GridLayout(2,2,10,10));
add(new JLabel("Text 1"));
add(text1);
add(new JLabel("text 2"));
add(text2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T22:55:06.813

您可以只使用[JLabel](http://docs.oracle.com/javase/6/docs/api/javax/swing/JLabel.html)来标记您的文本字段。

```
 JLabel label1 = new JLabel("Item 1: ");
    add(label1);
    add(item1); 
```

如果您真的想要字段内的文本，您可以使用构造函数设置字段中的文本，然后添加一个 MouseListener 以在单击时清除文本：

```
 item1 = new JTextField("Text");
    item1.addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent e) {
            if (item1.getText().equals("Text")) // User has not entered text yet
                item1.setText("");
        }
    }); 
```

或者，（可能更好）使用 FocusListener：

```
 item1 = new JTextField("Text");
    item1.addFocusListener(new FocusListener() {
        public void focusGained(FocusEvent e) {
            if (item1.getText().equals("Text")) // User has not entered text yet
                item1.setText("");
        }
        public void focusLost(FocusEvent e) {
            if (item1.getText().equals("")) // User did not enter text
                item1.setText("Text");
        }
    }); 
```

至于布局，要强制使用单独的行，请使用[Box](http://docs.oracle.com/javase/6/docs/api/javax/swing/Box.html)。

```
 Box itemBox = Box.createVerticalBox();
    itemBox.add(item1);
    itemBox.add(item2);
    add(itemBox); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T22:39:04.453

制作：

```
item1 = new JTextField(10);
item2 = new JTextField(10); 
```

这应该解决 JTextField 的宽度问题。开始使用 GridLayout 在一行中显示 JTextField。之后，我强烈推荐使用 MIG Layout [http://www.migcalendar.com/miglayout/whitepaper.html](http://www.migcalendar.com/miglayout/whitepaper.html)。

将 JLabel 放在 JTextField 旁边，以描述用户希望在文本字段中输入的内容。

```
JLabel lbl = new JLabel("Description"); 
```

或者您也可以考虑使用 toolTipText：

```
item1.setToolTipText("This is description"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:27:50.833

For making a form in Java Swing, I always recommend the [`FormLayout`](http://www.jgoodies.com/freeware/libraries/forms/) of JGoodies, which is designed to ... create forms. The links contains an example code snippet, which I just copy-pasted here to illustrate how easy it is:

```
public JComponent buildContent() {
    FormLayout layout = new FormLayout(
            "$label, $label-component-gap, [100dlu, pref]",
            "p, $lg, p, $lg, p");

    PanelBuilder builder = new PanelBuilder(layout);
    builder.addLabel("&Title:",  CC.xy(1, 1));
    builder.add(titleField,      CC.xy(3, 1));
    builder.addLabel("&Author:", CC.xy(1, 3));
    builder.add(auhtorField,     CC.xy(3, 3));
    builder.addLabel("&Price:",  CC.xy(1, 5));
    builder.add(priceField,      CC.xy(3, 5));
    return builder.getPanel();
} 
```

Now for the description:

*   Use a label in front of the textfield to give a very short description
*   You can put a longer description in the textfield as suggested by @Alden. However, if the textfield is for short input, nobody will be able to read the description
*   You can use a tooltip ([`JComponent#setTooltipText`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setToolTipText%28java.lang.String%29)) to put a longer description. Those tooltips also accept basic html which allows some formatting. Drawback of the tooltips is that the user of your application has to 'discover' that feature as there is no clear indication those are available
*   You can put a "help-icon" (like e.g. a question mark) after each text field (use a `JButton` with only an icon) where on click you show a dialog with a description (e.g. by using the `JOptionPane` class)
*   You can put one "help-icon" on each form which shows a dialog with a description for all fields.

Note for the dialog suggestion: I wouldn't make it a model one, allowing users to open the dialog and leave it open until they are finished filling in the form

# mysql - 无法启动 phpMyAdmin。不断收到 #2002 套接字错误

> ID：12134460
> 
> 赞同：15
> 
> 时间：2012-08-26T22:34:08.593
> 
> 标签：mysql, macos, sockets, phpmyadmin

在过去的 12 小时里，我一直在尝试设置 mysql 和 phpMyAdmin，但没有任何成功。是的，经过数小时的谷歌搜索后，我知道这是一个常见问题，我已经阅读了有关 stackoverflow 的类似查询，但仍然无法提供解决方案.....

我已经尝试了一切 - 从改变

```
$cfg['Servers'][$i]['port'] 
```

在`config.inc.php`文件中`3306`，`127.0.0.1`...

`config.inc.php`在文件 中键入套接字路径-`tmp/mysql.php`和`/var/mysql/mysql.sock`.

我尝试更改 my.cnf 文件和 php.ini 中的套接字路径 ....但我不断收到相同的错误：

```
#2002 - No such file or directory
The server is not responding (or the local server's socket is not correctly configured). 
```

我正在使用 MySQL (5.1.65)、PhpMyAdmin (3.5.2.2) 和 PHP (5.3.8)。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-01-23T11:41:38.900

我最近在 Mac OS Sierra 上也遇到了这个问题。Apache 服务器正在工作，但 mysql 没有。在寻找解决方案后，阅读了很多帖子，我找到了这个解决方案。它奏效了！

解决方案是导航到 mysql 文件夹，在我的情况下，

`/Applications/MAMP/db/mysql56/`

并删除除文件夹外的所有文件。然后再次重新启动 MAMP。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-07T06:02:31.970

1.  退出 MAMP
2.  打开终端
3.  类型：killall -9 mysqld 重启 MAMP

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T05:05:41.907

我遇到的问题是因为 PHP 试图通过 UNIX 套接字而不是 TCP 进行连接。这类似于此错误：[使用 PHP/PDO 连接到 MySQL 时出错](https://stackoverflow.com/questions/1819592/error-when-connecting-to-mysql-using-php-pdo/1819767#1819767)

首先，确保你有一个 mysql 的 my.cnf 配置，然后添加你的默认套接字位置：

```
[mysqld_safe] socket = /tmp/mysql.sock 
```

接下来在你的 php.ini 中，让 PHP 知道它在哪里：

```
mysql.default_socket = /tmp/mysql.sock 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-13T09:16:42.043

由于您没有提到 MAMP，我假设您没有使用它，所以这是手动安装，但它可能也适用于 MAMP。

根据我的经验，这是由 mysql 的套接字变量引起的。默认情况下，MySQL 使用 /tmp/mysql.sock。

您可以通过登录到您的 MySQL 并执行

```
show variables like '%socket%' 
```

这将向您显示套接字文件的位置。

现在，创建一个 php phpinfo() 文件并在 mysql 或 mysqli 部分下查找 mysql.default_socket。我的是/var/mysql/mysql.sock。这表明 PHP 正在与 mysql 使用的位置不同的位置查找文件。

假设您有相同的值，打开新终端并输入

```
cd /var
mkdir mysql
cd mysql
ln -s /tmp/mysql.sock mysql.sock 
```

这将创建一个指向 PHP 正在检查的位置内的 mysql 套接字文件的链接。

PHPMyAdmin 现在应该可以工作了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-26T16:23:40.863

检查配置文件：

```
/* $cfg['Servers'][$i]['host'] = 'localhost'; */
$cfg['Servers'][$i]['host'] = '127.0.0.1';
$cfg['Servers'][$i]['compress'] = false; 
```

重启 MySQL：OSx：`sudo /usr/local/mysql/support-files/mysql.server restart`

Linux：（`sudo service mysql start` 旧的 linux `sudo /etc/init.d/mysql start`：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-11T10:27:59.973

如果您使用的是自制软件，请重新启动 mariadb。我也遇到了同样的问题，在停止并启动 mariadb 后，它又开始工作了。

`brew services restart mariadb`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-08T11:16:21.830

在 Windows 7 Ultimate、AppServ 上遇到了这个问题。只需重新加载 SQL 和 Apache（但您需要重新加载它们，仅重新加载 Apache 不起作用）。

```
PHPMyAdmin 4.6.6
服务器：Apache/2.4.25 (Win32) OpenSSL/1.0.2j PHP/5.6.30
服务器版本：5.7.17-log - MySQL 社区服务器 (GPL)
PHP: 5.6.30

```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-31T14:26:59.447

我在运行 High Sierra 的 macbook pro 上使用 MAMP，就我而言，我尝试了以上所有方法，但它仍然对我不起作用，所以我做了以下操作：

1.  查找安装 MAMP 的位置，更具体地说，查找位于“/Applications/MAMP/bin/phpMyAdmin”中的“config.inc.php”文件。

[![在此处输入图像描述](../Images/04a498aab5a6e1b27395f63e69a3a1df.png)](https://i.stack.imgur.com/pMofR.png)

2.  在我们触摸之前备份（即在 Mac 上，右键单击并复制）“config.inc.php”文件。您可以调用或重命名它“config_old.inc.php”

3.  在您喜欢的 IDE 或文本编辑器中打开文件。

[![在此处输入图像描述](../Images/0acaaa3b025288be15c2f563234c6e63.png)](https://i.stack.imgur.com/5xLUq.png)

4.  寻找以下几行；

i) $cfg['Servers'][$i]['host']

ii) $cfg['Servers'][$i]['port']

iii) $cfg['Servers'][$i]['socket']

从更改：

```
$cfg['Servers'][$i]['host'] = 'localhost'; 
```

至 ：

```
$cfg['Servers'][$i]['host'] = '127.0.0.1'; 
```

从更改：

```
$cfg['Servers'][$i]['port'] = '3306'; 
```

/*这可能是您的默认设置。只需从您的 MAMP 安装首选项中查看，按 CMD + 并确认您指定的端口号。就我而言，我已将其更改为*8889。/

[![在此处输入图像描述](../Images/4e764009605cc90482924a4e56f60710.png)](https://i.stack.imgur.com/CtRUy.png)

至 ：

```
$cfg['Servers'][$i]['port'] = '8889'; 
```

再次取决于您安装 MAMP 的位置或更具体的是您的 mysql。

从更改：

```
$cfg['Servers'][$i]['socket'] = 'some_folder_path or EMPTY'; 
```

至 ：

```
$cfg['Servers'][$i]['socket'] = '/Applications/MAMP/Library/bin/mysql/mysql.sock'; 
```

完成此修改后，在您的 Web 浏览器中保存并刷新。

为我工作。希望这可以帮助。干杯。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-08-02T02:51:14.210

检查是否`mysql-server`已经安装，如果没有 `sudo apt-get install mysql-server`

# ruby-on-rails - RVM 加载了错误的 ruby 版本？

> ID：12134469
> 
> 赞同：1
> 
> 时间：2012-08-26T22:37:04.823
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, bash, rvm

当我打开终端时，我看到：

```
Last login: Sun Aug 26 15:33:57 on ttys001
Using /Users/me/.rvm/gems/ruby-1.9.3-p125
Running /Users/me/.rvm/hooks/after_use
Using /Users/me/.rvm/gems/ruby-1.9.3-p194
ruRunning /Users/me/.rvm/hooks/after_use
me-MacBook:site me$ ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0] 
```

我想要 ruby​​ 1.9.3 的地方。如果我然后输入：

```
rvm use 1.9.3 --default 
```

我得到以下信息：

```
$ rvm use 1.9.3 --default
Using /Users/me/.rvm/gems/ruby-1.9.3-p194
Running /Users/me/.rvm/hooks/after_use 
```

这允许我使用rails，但是当我重新打开终端时，我必须每次都这样做。有没有办法让它成为默认设置？我将它添加到我的 bash_profile 中，但这似乎不起作用。这是我的 bash 个人资料：

```
# Required for Ruby upgrade to 1.9.3
export RUBYOPT=-r openssl

export PATH=${PATH}:/opt/local/bin

[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function

# Sets the RVM profile on terminal load
rvm use ruby-1.9.3-p125
rvm use 1.9.3 --default

# RVM Requirements
export CC="/usr/local/bin/gcc-4.2"
export CFLAGS="-O2 -arch x86_64"
export LDFLAGS="-L/opt/local/lib"
export CPPFLAGS="-I/opt/local/include"
export ARCHFLAGS="-arch i386"

# Postgresql
export PATH=/usr/bin:$PATH 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T23:13:56.773

当您`ruby -v`在命令提示符下运行时，您实际上是在运行，`/usr/bin/ruby`因为您设置`/usr/bin`了第一个`$PATH`env 变量。您应该将以下 rvm initialize 命令移动到 bash 配置文件的末尾。

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

它应该工作。一旦通过标志`rvm use`设置默认 ruby​​，就不需要在 bash 配置文件中运行命令。`--default`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:41:47.587

您可能应该从 bashrc 中删除这些行：

```
# Sets the RVM profile on terminal load
rvm use ruby-1.9.3-p125
rvm use 1.9.3 --default 
```

当您打开终端时，rvm 应该会自动加载它的默认配置文件，因此无需在 bashrc 中设置（并出于某种原因重新设置）版本。

该`--default`选项只需要一次，以指示所选版本从此成为默认版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T23:09:00.687

试试`rvm alias create default 1.9.3`。

# php - preg_match_all 删除拉丁字母

> ID：12134471
> 
> 赞同：0
> 
> 时间：2012-08-26T22:37:41.397
> 
> 标签：php, preg-replace, preg-match-all, latin

我对拉丁字符有疑问，这里是代码：

```
$stopWords = array('i','a','about','an','and','are','as','at','be','by','com','de','en','for','from','how','in','is','it','la','of','on','or','that','the','this','to','was','what','when','where','who','will','with','und','the','www', 'on', 'ona', 'ja');

$string = preg_replace('/\s\s+/i', '', $string); // replace whitespace
$string = trim($string); // trim the string

$string = preg_replace('/[^a-zA-Z0-9žšđčćŽŠĐČĆ -]/', '', $string); // only take alphanumerical characters, but keep the spaces and dashes too…

$string = mb_strtolower($string); // make it lowercase

preg_match_all('/\b.*?\b/i', $string, $matchWords);

$matchWords = $matchWords[0];

foreach ( $matchWords as $key=>$item ) {
    if ( $item == '' || in_array(strtolower($item), $stopWords) || strlen($item) <= 3 ) {
        unset($matchWords[$key]);
    }
}

$wordCountArr = array();
if ( is_array($matchWords) ) {
    foreach ( $matchWords as $key => $val ) {
        $val = strtolower($val);
        if ( isset($wordCountArr[$val]) ) {
            $wordCountArr[$val]++;
        } else {
            $wordCountArr[$val] = 1;
        }
    }
}
arsort($wordCountArr);
$wordCountArr = array_slice($wordCountArr, 0, 10);
return $wordCountArr; 
```

当我`$matchWords[0]`从这段代码返回时：

```
preg_match_all('/\b.*?\b/i', $string, $matchWords); 
```

我得到这个字符串，数组上有内爆空间：

> ti si mi znaj na srcu kvar znaj znaj znaj srcu ž urka

有空间`ž urka`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:43:51.220

来自文档： *单词边界是主题字符串中当前字符和前一个字符不匹配 \w 或 \W 的位置（即一个匹配 \w 而另一个匹配 \W），或者开始或结束如果第一个或最后一个字符分别与 \w 匹配，则为字符串。*

ž（包括它之前的空格）匹配**\W**但 u 匹配**\w**，因此你会得到 `ž`和`urka`

最后的这些字符将与模式不匹配：

```
 žšđčć ŽŠĐČĆ :) 
```

...它们都是**\W** -characters，需要后跟**\w** -character 以匹配模式（第二个**\b**）

我猜你正在寻找 u 修饰符。尝试

```
preg_match_all('/\b.*?\b/iu', $string, $matchWords); 
```

# ruby-on-rails - attr_accessible 究竟如何保护数据库？

> ID：12134481
> 
> 赞同：0
> 
> 时间：2012-08-26T22:38:55.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

在过去的 4 个小时里，我一直在尝试为 rails 学习 attr_accessible（我是一个正在尝试学习 rails 的新手）。每一个文档/文章都关注 attr_accessible 如何防止某些属性被批量分配修改。很好，但没有人费心解释它在其他情况下如何保护数据库。

例如，我假设在提交表单以创建模型时发生批量分配。所以在本书的这个例子中，通过在 routes.rb 中声明

```
resources :users 
```

我使使用 REST 轻松创建/检索/更新/删除成为可能。我假设批量分配发生在创建中。并且使某些属性不可访问是有道理的。但是更新呢？attr_accessible 没有说任何关于单一分配的事情。因此，任何用户都可以发起 POST 调用来更新任何特定字段。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:42:29.477

[http://guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)

> 因此，任何用户都可以发起 POST 调用来更新任何特定字段。我错过了什么？

你错过了 CSRF 保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:45:24.283

似乎没有遗漏任何东西。最常见的例子是这样的：

如果您有一个“类型”或“访问”列来控制谁是管理员，谁不是管理员，并且您不保护它，我可以使用 CURL 将自己创建为具有完全权限的管理员。

# php - 从图像文件名 php 中删除扩展名

> ID：12134485
> 
> 赞同：0
> 
> 时间：2012-08-26T22:39:27.527
> 
> 标签：php

我正在使用以下 php 代码将图像文件夹加载到 html 页面中。

我遇到的问题是，为了用作图像标题而引入的文件名显示了文件扩展名。

正在提取名称的代码部分是 title='$img'

如何让它删除文件扩展名？

```
<?php
$string =array();
$filePath='images/schools/';  
$dir = opendir($filePath);
while ($file = readdir($dir)) { 
    if (eregi("\.png",$file) || eregi("\.jpeg",$file) || eregi("\.gif",$file) || eregi("\.jpg",$file) ) { 
        $string[] = $file;
    }
}
while (sizeof($string) != 0) {
    $img = array_pop($string);
    echo "<img src='$filePath$img' title='$img' />";
} 
```

?>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:43:21.893

[您可以使用pathinfo](http://www.php.net/pathinfo)获取不带扩展名的文件名，因此对于 title='' 您可以使用`pathinfo($file, PATHINFO_FILENAME);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:42:04.233

```
$file_without_ext = substr($file, 0, strrpos(".", $file)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T23:00:56.737

对于“最先进的”OO 代码，我建议如下：

```
$files = array();
foreach (new FilesystemIterator('images/schools/') as $file) {
    switch (strtolower($file->getExtension())) {
        case 'gif':
        case 'jpg':
        case 'jpeg':
        case 'png':
            $files[] = $file;
            break;
    }
}

foreach ($files as $file) {
    echo '<img src="' . htmlentities($file->getPathname()) . '" ' .
         'title="' . htmlentities($file->getBasename('.' . $file->getExtension())) . '" />';
} 
```

好处：

*   您不再使用已弃用的`ereg()`功能。
*   您可以使用 . 转义可能的特殊 HTML 字符`htmlentities()`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-12-15T03:31:46.650

您可以使用 substr 摆脱文件扩展，如下所示：

```
$fileName =  $request->file->getClientOriginalName();
$file_without_ext = substr($fileName, 0, strrpos($fileName,".")); 
```

# php - 文件导入导出模块的单元测试

> ID：12134489
> 
> 赞同：3
> 
> 时间：2012-08-26T22:40:34.800
> 
> 标签：php, unit-testing, phpunit

我正在尝试为文件导入导出模块编写单元测试。

我的一种方法检查传递的文件名是否存在。

这将如何被嘲笑并编写测试以检查文件是否存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T22:58:01.390

单元测试应该证明代码单元在*完全隔离*的情况下正确运行。如果您的测试依赖于文件系统正常运行才能通过，那么您的测试不是最理想的，并且可能在任何给定的测试运行中对您撒谎。

像任何实验一样，当你有多个变量在起作用时，你不能确定你的结果。对于与文件系统交互的 PHP 代码，最好使用自定义流包装器模拟文件系统（通常是[vfsStream](https://github.com/mikey179/vfsStream)，但如果您真的愿意，可以轻松编写自己的流包装器）。

`$noTest < $testWithFileSystemDependency < $testThatMocksFileSystem`

通常，这是通过将文件路径传递给直接使用它们的方法来完成的：

```
<?php
function myFunction($someFilePath) {
    // do stuff
} 
```

通过这种方式，您可以模拟文件系统并传入一个可测试的虚拟路径，该路径将按照您模拟它的方式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:42:29.327

你写了两个测试。一个创建文件并期望您的方法成功，另一个确保文件不存在并期望您的方法失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T22:43:08.767

就我个人而言，我只是`_files`在测试目录中创建目录并在那里创建文件。或在`/tmp`.

有一种模拟 fs 的方法：[http](http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.mocking-the-filesystem) ://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.mocking-the-filesystem但根据我的经验 - 我更喜欢真正的 FS 操作（在这种情况下）。

# java - Java 中的数学方程式是如何工作的？

> ID：12134493
> 
> 赞同：6
> 
> 时间：2012-08-26T22:40:59.097
> 
> 标签：java, math, operators

当我做这样的事情

```
int test = 5 + 3 * (4 - 1) / 2; 
```

我得到 9。我怀疑这是因为 int 向下舍入。但是，当我这样做时

```
float test = 5 + 3 * (4 - 1) / 2; 
```

我也得到 9。但是，当我这样做时

```
float test1 = 5;
float test2 = 4.5;
float test = test1 + test2; 
```

测试最终输出 9.5。有人可以解释这背后的逻辑吗？为什么我在第二个例子中没有得到 9.5？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-26T22:43:06.340

在您的第二个示例中，尽管您将结果*分配给*type 的变量`float`，但计算本身的执行方式仍与第一个示例完全相同。Java 不会查看目标变量类型来确定如何计算右手边。特别是，子表达式`3 * (4 - 1) / 2`导致`4`.

要解决此问题，您可以使用浮点文字而不是所有整数：

```
float test = 5 + 3 * (4 - 1) / 2.0f; 
```

使用`2.0f`触发算术表达式的浮点计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T22:44:46.623

尽管您`5 + 3 * (4 - 1) / 2`用浮点数表示结果，但实际计算是使用整数精度完成的，这意味着除法`9 / 2`返回 4 而不是如果将它们作为浮点数计算时您将收到的 4.5。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T23:20:50.420

表达式有自己的类型。所以开始：

```
5 + 3 * (4 - 1) / 2 
```

每个值都有自己的类型。这种类型恰好是`int`，所以这与：

```
((int)5) + ((int)3) * (((int)4) - ((int)1)) / ((int)2) 
```

更清楚地表明我们正在处理整数。只有在对其进行评估后，`9`才会将其分配给浮点数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T01:21:58.420

简短的回答是整数类型在模算术上进行运算，模数为 1，并丢弃余数。

由于您将其转换`test`为整数，因此模数运算采用模数 1（例如 9.5 mod 1），int test = 5 + 3 * (4 - 1) / 2;

对于 32 位或 64 位浮点数，这将给出 9.5；但是，由于您已转换`test`为`int`，余数将被丢弃，并且引用的`test`值为 9。

# php - 使用 PHP 将 facebook 个人资料图片添加到高分表

> ID：12134494
> 
> 赞同：1
> 
> 时间：2012-08-26T22:41:41.017
> 
> 标签：php, database, facebook

在 Stackoverflow 获得很多帮助后，我能够制作一个小型 Flash 游戏，我能够将分数变量发布到一个 php 文件，然后到数据库，现在我想做一个小的高分列表，我知道我需要使用之前保存到数据库表中的 FB 用户和分数，我的问题是如何在每个用户的分数之外添加个人资料图片缩略图？当我在 html 文件中打印数据库信息时，我应该将另一个参数保存到数据库中还是应该使用以下行？

```
<img src="https://graph.facebook.com/<USER_ID>/picture"/> 
```

如果这是一个愚蠢的问题，我真的很抱歉，我对 Facebook 的东西真的没有经验。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:47:27.387

这确实是显示您的用户（或任何用户）的个人资料照片的最佳方式。无需存储 URL，甚至无需将图像下载到您的服务器。您所需要的只是用户的 Facebook ID。

如果图片是用户朋友的图片，那么他们很可能已经在浏览器中缓存了这些图片，因此利用这一点是个好主意。

您还可以向该调用添加一些参数以获取其他尺寸的个人资料图片 -

```
https://graph.facebook.com/UID/picture?type=large 
```

接受的值是 -

*   小的
*   普通的
*   大的
*   正方形

# objective-c - UIGestureRecognizer 连接到 UIVIew

> ID：12134501
> 
> 赞同：0
> 
> 时间：2012-08-26T22:42:29.957
> 
> 标签：objective-c, ios, cocoa-touch, uigesturerecognizer

我是 iOS 开发的菜鸟（所以请多多包涵），我正在尝试用 Xcode 从头开始​​创建一个简单的触摸应用程序。我已经花了一个星期的时间，但我似乎无法找出我错过了什么，所以我在这里，寻求一些指导:)

首先，我创建了一个空应用程序，然后创建了一个 xib 文件 (MainWindow.xib) 并向其中添加了一个窗口对象 (Main_Window)。然后，我在这个 Main_Window 中创建了一个 View 对象 (Main_View)，并在这个视图中添加了一个标签对象 (lblTitle)。Main_View 对象几乎覆盖了整个 Main_Window 屏幕。

所以，简而言之，我的 MainWindow.xib 的层次结构是这样的：Main_Window --> Main_View --> lblTitle。

最后，我创建了一个 ViewController 对象 (Main_View_Controller)，其“view”设置为 Main_View，“rootViewController”设置为“Main_Window”。

在项目中，

我使用“TouchEvent_View”将 UIView 子类化，连接到 xib 文件中的“Main_View”。

我使用“TouchEvent_ViewController”将 UIViewController 子类化，连接到 xib 文件中的“Main_View_Controller”。

在我的 AppDelegate.h 中，

我创建了一个“IBOutlet UIWindow *window”，连接到 xib 文件中的“Main_Window”。

我为我的 viewController 和视图类创建了一个对象。

```
 @property (strong, nonatomic) IBOutlet UIWindow *window; 
 @property (strong, nonatomic) TouchEvent_ViewController * myViewController;
 @property (strong, nonatomic) TouchEvent_View *myView; 
```

在 AppDelegate.m 中，我将“MainWindow.xib”与 myViewController 连接起来：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{ 
    self.window.backgroundColor = [UIColor whiteColor];

    self.myViewController = [[[TouchEvent_ViewController alloc]
                          initWithNibName:@"MainWindow" bundle:nil] autorelease];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

在“Touch_Event_ViewController.m”中，我将 viewDidLoad 消息编码如下：

```
- (void)viewDidLoad
{
 [super viewDidLoad];
  NSLog(@"Hi! ViewController's viewDidLoad msg sent!");

  TouchEvent_View * mView = [[TouchEvent_View alloc] initWithFrame:CGRectMake(0, 0, 300, 300)];
  mView.backgroundColor = [UIColor blueColor];
  [self.view addSubview:mView];
  [mView release];

} 
```

在“TouchEvent_View.m”中，我实例化了一个 UITapGestureRecognizer 对象并将其连接到一个处理程序方法，如下所示：

```
- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {

    NSLog(@"[TouchEvent_View initWithFrame] sent!");

    // Initialization code

    //-----------------------
    //Touch event declaration

    //Single tap
    UITapGestureRecognizer * singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(SingleTap_Handler)];

    singleTap.numberOfTapsRequired = 1;
    singleTap.numberOfTouchesRequired = 1;
    //singleTap.delegate = self;

    [self addGestureRecognizer:singleTap];

}
return self;
}

-(void) SingleTap_Handler :(UITapGestureRecognizer *)GR
{
    NSLog(@"Hi! You just touched the screen!");

} 
```

当我将项目编译并部署到我的 iPad3 中时，一切都按计划进行，直到 Touch 事件不起作用。

我将以下消息打印到控制台窗口：

```
2012-08-26 14:03:59.589 Ex_TouchEvents_01[806:707] Hi! ViewController's viewDidLoad msg sent!
2012-08-26 14:03:59.593 Ex_TouchEvents_01[806:707] [TouchEvent_View initWithFram] sent! 
```

但我没有看到“嗨，你刚刚触摸了屏幕！” 触摸屏幕后的消息。另外，我也没有看到视图区域的背景设置为蓝色。所以，我一定错过了一些非常简单的东西。我一直在网上搜索，但我无法弄清楚我错过了什么。有人会指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:03:51.163

我无法访问我的 Mac 来测试这个，但我相信你在这一行中缺少一个冒号。

```
UITapGestureRecognizer * singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(SingleTap_Handler)]; 
```

它需要是：

```
UITapGestureRecognizer * singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(SingleTap_Handler:)]; 
```

如果方法接受任何参数，则冒号是选择器的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T01:30:08.550

呃，你能试试把：

```
self.userinteractionEnabled = YES; 
```

在你的初始化方法中？

默认情况下，UIViews 设置为不响应触摸事件，因此您必须先启用它们，然后才能使用点击手势。

# exception - Microsoft Jet 数据库引擎找不到对象

> ID：12134502
> 
> 赞同：2
> 
> 时间：2012-08-26T22:42:31.483
> 
> 标签：exception, ssis, jet

我正在从文件位置读取 shapefile，读取它们的元数据并将它们写入 SSIS 包中的数据库中。

SSIS 包在我的本地机器上成功运行。我在服务器盒上部署了相同的 SQL 作业，当我在服务器盒上运行作业（在 SSIS Executor 代理下运行）时，它会抛出一个 OLEDB 异常：

> Microsoft Jet 数据库引擎找不到对象“tmp5330”。确保对象存在并且正确拼写其名称和路径名。

它肯定发生在我从文件位置读取 shapefile 并处理元数据的脚本组件上。我已经仔细检查了 SSIS 帐户是否具有文件位置（文件所在的最后一个文件夹）的权限，并且它肯定具有读取权限。

如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T23:45:16.040

问题出在 Jet Engine 的配置中，看起来它不接受长度超过八个字符的文件：

解决这个问题：'重命名文件，使其与 MS-DOS 8.3 文件名格式匹配。也就是说，文件名的长度不得超过八个字符，并且必须在句点后有正确的扩展名，例如 .dbf 用于 dBASE 文件。

有关详细信息，请参阅[http://support.microsoft.com/kb/209685 。](http://support.microsoft.com/kb/209685)

# java - 布局和定位

> ID：12134505
> 
> 赞同：0
> 
> 时间：2012-08-26T22:42:58.923
> 
> 标签：java, layout, jpanel, jlabel, layout-manager

我有一个带有 BoxLayout.PAGE_AXIS 的 JPanel，但是当我向其中添加两个 JLabel 时，第一个会填充整个 JPanel。JPanel 的 PreferredSize 高度为 10。两个 JLabel 的首选高度为 5，并且所有三个的宽度都相同。

我究竟做错了什么？

PS这就是为什么我更喜欢该死的空布局...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:02:01.790

试试这段代码，它应该可以正常工作：

```
import java.awt.Dimension;

import javax.swing.*;

public class Test extends JFrame{
    JPanel panel = new JPanel();
    JLabel lbl1 = new JLabel("First");
    JLabel lbl2 = new JLabel("Second");

    public Test(){
        super("BoxLayout Test");
        panel.setLayout(new BoxLayout(panel, BoxLayout.PAGE_AXIS));
        panel.setPreferredSize(new Dimension(300,200));
        panel.add(lbl1);
        panel.add(lbl2);
        add(panel);

    }
    public static void main(String [] args){
        SwingUtilities.invokeLater(new Runnable(){
            public void run() {
                Test t = new Test();
                t.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                t.pack();
                t.setVisible(true);
        }});
    }
} 
```

# hibernate - 渴望在 grails 中获取整个对象树

> ID：12134509
> 
> 赞同：4
> 
> 时间：2012-08-26T22:43:15.570
> 
> 标签：hibernate, grails, grails-orm

所以我在域中有一些对象，它们彼此之间存在 hasMany 关系，如下所示

```
Class Car {
    String name
    SortedSet tires = [] as SortedSet
    static hasMany = [tires: Tire]
}

Class Tire {
    String type
    SortedSet screws = [] as SortedSet
    static hasMany = [screws: Screw]
}

Class Screws {
     String type
} 
```

现在，我想通过 findByName 为某种汽车脱机整个对象树。我知道我们可以在 finder 上做一个 fetch Eager，但这只会下降一个级别。如示例中所示，我有 2 个或更多级别。

所以我的问题是这个。是否有一种优雅的解决方案可以急切地获取整个对象树，然后在没有 grails/Hibernate 触发另一个查询来获取详细信息的情况下使用它。

我尝试了以下似乎有类似结果但并不优雅的方法。

withCriteria 解决方案

```
def cars = Car.withCriteria {
    tires {
        screws {
            join 'screws'
        }
    } 
```

我还尝试将整个树转换为 JSON 并重新解析它，但这似乎是一种矫枉过正。我想基本上我正试图让整个对象树脱机。如果这可以很容易地完成或根本没有，有什么想法吗？

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T23:36:57.807

使用映射闭包：

```
Class Car {
    String name
    SortedSet tires = [] as SortedSet
    static hasMany = [tires: Tire]
    static mapping = {
        tires lazy: false
    }
}

Class Tire {
    String type
    SortedSet screws = [] as SortedSet
    static hasMany = [screws: Screw]
    static mapping = {
        screws lazy: false
    }
}

Class Screws {
     String type
} 
```

也许您应该像规则一样接受异常，我的意思是，您可以将域类配置为`lazy: false`并使用 fetch lazy 调用您的查找器：

```
def cars = Car.findAllByType(type: "Alfa", [fetch: [tires: 'lazy']]) 
```

我不知道这是否是一个有效的选择，但你可以试试。

# django - django 更新用户配置文件表单

> ID：12134511
> 
> 赞同：0
> 
> 时间：2012-08-26T22:43:21.663
> 
> 标签：django, django-models, django-forms

# 表格.py

```
class UserProfileForm(forms.ModelForm):
    phone = forms.CharField(max_length = 15,widget = forms.TextInput(attrs = {'placeholder':'Enter mobile no. ','class':''}))
    profession = forms.CharField(max_length= 50,widget = forms.Select(choices = PROFESSION_CHOICES,attrs = {'class':''}))
    #email = forms.EmailField(label='Email address',max_length = 75,widget = forms.TextInput(attrs={'placeholder':'Email address.','class':''}))
    sex = forms.CharField(max_length = 20,label="I am :",widget=forms.Select(choices=SEX_CHOICES,attrs = {'class':''}))
    first_name = forms.CharField(max_length = 50,widget = forms.TextInput(attrs={'placeholder':'Please enter your real name.','class':''}))
    last_name = forms.CharField(max_length = 50,widget = forms.TextInput(attrs={'placeholder':'Enter last name.','class':''}))
    location = forms.CharField(max_length = 50,widget = forms.TextInput(attrs={'placeholder':'Enter your current location','class':''}))
    def clean_first_name(self):
        first_name = self.cleaned_data['first_name']
        if first_name == '':
            raise forms.ValidationError("This field is required.")
        return first_name

        def save(self,*args,**kw):
                    self.instance.first_name = self.cleaned_data.get("first_name")
                    self.instance.last_name = self.cleaned_data.get("last_name")
                    self.instance.sex = self.cleaned_data.get("sex")
                    self.instance.location = self.cleaned_data.get("location")
                    self.instance.profession = self.cleaned_data.get("profession")
                    self.instance.phone = self.cleaned_data.get("phone")
                    self.instance.save()
                    return self.instance

    class Meta:
        model = User
        fields = ('username','first_name','last_name','phone','sex','profession','location') 
```

# 视图.py

```
def profile(request,nav="profile",template="profile.html",context = {},extra_context = None):
    if request.POST:
        if 'profileFormSubmit' in request.POST:
            pform = UserProfileForm(request.POST,instance = request.user)
            if pform.is_valid():
                try:
                    user = pform.save()
                    return redirect(profile,nav="profile")
                    except RuntimeError as e:
                    return HttpResponse(e) 
```

# 错误

```
The User could not be changed because the data didn't validate. 
```

# 线

```
 user = super(UserProfileForm,self).save(*args,**kw) 
```

# 怀疑

我应该做些什么改变来摆脱这个错误我应该如何改变，我已经尝试删除所有 clean_field 表单方法，但仍然得到同样的错误，请帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:56:06.297

在清理之前，您在表单上调用 save 。你打电话 save 两次。在表单开始时保存一次。最后一次。

pform.is_valid() 返回一个您从不检查的布尔值。

[modelforms 上的文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T00:28:06.527

表单没有验证，因为我在我的 UserProfileForm 元类中使用了“用户名”，而它不应该存在。

# android - Android 布局帮助 - 屏幕的一半应该倒置

> ID：12134516
> 
> 赞同：1
> 
> 时间：2012-08-26T22:44:28.933
> 
> 标签：android, android-layout

对于我正在尝试的这个开始应用程序，我对 java 没问题。但是 XML 仍然让我有些困惑。我已经包含了我想要实现的目标的图片： ![在此处输入图像描述](../Images/a0a18111b3c4a0226d49c29aa13b3814.png)

这是我到目前为止的代码。我对它的出现方式很满意，我只需要知道如何扭转上半场：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical">

    <LinearLayout
        android:id="@+id/opponent"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="bottom"
        android:layout_weight="1"
        android:clickable="false" >

        <RelativeLayout
            android:id="@+id/opPlus"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_weight="0.5"
            android:clickable="true" >

        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/opMinus"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_weight="0.5"
            android:clickable="true" >

        </RelativeLayout>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/player"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="bottom"
        android:layout_weight="1"
        android:clickable="false" >

        <RelativeLayout
            android:id="@+id/plPlus"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_weight="0.5"
            android:clickable="true" >

        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/plMinus"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_weight="0.5"
            android:clickable="true" >

        </RelativeLayout>

    </LinearLayout> 
```

提前感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T23:23:24.863

只需添加：

```
android:rotation="180" 
```

到要旋转的视图或视图组。在这种情况下，`LinearLayout`具有 id 的`@+id/opponent`

编辑：示例：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical"
  >
  <RelativeLayout
    android:id="@+id/opponent"
    android:rotation="180"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:background="#FF8833"
    >
    <View
      android:id="@+id/emptyview"
      android:layout_width="0dp"
      android:layout_height="match_parent"
      android:layout_centerInParent="true"
      />
    <Button
      android:layout_height="50dp"
      android:layout_width="match_parent"
      android:layout_toLeftOf="@id/emptyview"
      android:layout_alignParentBottom="true"
      android:background="#999999"
      android:text="Button 1"
      />
    <Button
        android:layout_height="50dp"
        android:layout_width="match_parent"
        android:layout_toRightOf="@id/emptyview"
        android:layout_alignParentBottom="true"
        android:background="#888888"
        android:text="Button 2"
        />
  </RelativeLayout>
  <RelativeLayout
      android:id="@+id/opponent"
      android:layout_width="match_parent"
      android:layout_height="0dp"
      android:layout_weight="1"
      android:background="#33FF33"
      >
    <View
        android:id="@+id/emptyview"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_centerInParent="true"
        />
    <Button
        android:layout_height="50dp"
        android:layout_width="match_parent"
        android:layout_toLeftOf="@id/emptyview"
        android:layout_alignParentBottom="true"
        android:background="#999999"
        android:text="Button 1"
        />
    <Button
        android:layout_height="50dp"
        android:layout_width="match_parent"
        android:layout_toRightOf="@id/emptyview"
        android:layout_alignParentBottom="true"
        android:background="#888888"
        android:text="Button 2"
        />
  </RelativeLayout>
</LinearLayout> 
```

结果：

![在此处输入图像描述](../Images/a8c8843983e7d11f70459a7e7e4b4254.png)

# ajax - JSF2/Ajax：如何命名应该使用 Ajax 呈现的组件

> ID：12134522
> 
> 赞同：0
> 
> 时间：2012-08-26T22:45:19.170
> 
> 标签：ajax, jsf-2

我在“更新”属性中设置正确的 ID 时遇到问题

```
 <p:outputPanel>
            <h:panelGrid columns="2">
                <h:outputText value="#{msg.uploadNewProcessLabel}" />
                <h:form id="fileupload">
                    <p:fileUpload id="fileuploadButton" auto="true"
                        customUI="true" fileUploadListener="#{processImporter.processFile}"
                        update=":processes" label="Upload" />
                </h:form>
            </h:panelGrid>
        </p:outputPanel>

        <p:outputPanel>

          <h:form id="processList">

            <p:dataTable id="processes" var="process"
                value="#{processDefinitionList}" 
                paginator="true" rows="10" paginatorAlwaysVisible="false"> 
```

我收到以下错误消息：

```
javax.faces.FacesException: Cannot find component with identifier ":processes" referenced from "fileupload:fileuploadButton".
    at org.primefaces.util.ComponentUtils.findClientIds(ComponentUtils.java:251)
    at org.primefaces.component.fileupload.FileUploadRenderer.encodeScript(FileUploadRenderer.java:113)
    at org.primefaces.component.fileupload.FileUploadRenderer.encodeEnd(FileUploadRenderer.java:90)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168) 
```

在另一个已回答的问题上，我得到了提示：在组件 id 前面，这应该导致从“上层”进行扫描。

这到底是什么意思？我阅读了 UIComponents.findComponent JavaDoc，但不明白...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:03:08.250

嗯..我想我明白了：

和`:processList:processes`它一起工作......

# c - unix tcp 客户端/服务器奇怪的行为

> ID：12134531
> 
> 赞同：0
> 
> 时间：2012-08-26T22:47:01.107
> 
> 标签：c, unix, tcp

我一直在尝试学习 unix 网络编程，所以我尝试编写一个客户端/服务器程序，其中客户端发送消息，服务器返回转换为大写字母的消息。

当我运行服务器并将客户端连接到我自己的机器并发送一些测试字符串时，它工作正常，直到我之前输入的内容被写入屏幕。

我怀疑它与缓冲区有关。这是我启动服务器后运行的示例：

可以@ubuntu:~$ cd 桌面

可以@ubuntu:~/Desktop$ ./tcpuppcli 127.0.0.1

输入要回显的字符串：test

回声响应​​：测试

输入要回显的字符串：string2

回声响应​​：STRING2

输入要回显的字符串：string3

回声响应​​：STRING3

输入要回显的字符串：aaaaaaaaafsfagd

回声响应​​：AAAAAAAAAFSFAGD

输入要回显的字符串：gdsgsg

回声响应​​：GDSGSG

AAFSFAGD ----------->！这是带有来自先前输入的字符的奇怪行！

输入要回显的字符串：^C

可以@ubuntu:~/桌面$

服务端和客户端的代码如下：

```
// methods with prefix w_ are just error checking wrappers from UNP by Stevens    
// server
#include "socketwrap.h" // headers necessary and constants like MAXLINE
#include <ctype.h>

void sigchld_handler( int sig);
void str_upper( int connfd);
void toUpperCase( char buffer[], int length);

int main( int argc, char** argv)
{
  int listenfd;
  int connfd;
  pid_t childpid;
  struct sockaddr_in serverAddress;
  struct sockaddr_in clientAddress;
  socklen_t length;
  struct sigaction sa;

  // Create the socket
  listenfd = w_socket( AF_INET, SOCK_STREAM, 0);

  // Clear the serverAddress structure
  bzero( &serverAddress, sizeof( serverAddress));
  // Set up the serverAddress structure
  serverAddress.sin_family = AF_INET;
  serverAddress.sin_addr.s_addr = htonl( INADDR_ANY);
  serverAddress.sin_port = htons( 11979);

  // Bind the socket to a well-defined port
  w_bind( listenfd, (struct sockaddr*) &serverAddress, sizeof( serverAddress));

  // Start listening for connections
  w_listen( listenfd, BACKLOG);

  // Handle any zombie children by using a signal handler
  sa.sa_handler = sigchld_handler;
  sigemptyset( &sa.sa_mask);
  sa.sa_flags = SA_RESTART;
  if( sigaction( SIGCHLD, &sa, NULL) == -1)
  {
    perror( "signal error");
    exit( 1);
  }

  printf( "Waiting for connections...\n");

  while( 1)
  {
      length = sizeof( clientAddress);
      connfd = w_accept( listenfd, ( struct sockaddr*) &clientAddress, &length);
      if( connfd < 0)
      {
          if( errno == EINTR)
          {
            continue; // back to while
          }
          else
          {
            perror( "accept error");
            exit( 1);
          }
      }

      printf( "Obtained connection...\n");
      childpid = fork();
      if ( childpid == 0) /* child process */
      {
        w_close( listenfd); /* close listening socket */
        str_upper( connfd); // process the request
        exit( 0);
      }

    w_close( connfd); /* parent closes connected socket */
  }

}

void sigchld_handler( int sig)
{
  while( waitpid( -1, NULL, WNOHANG) > 0);
}

void str_upper( int connfd)
{
  char buffer[MAXLINE];
  while( read( connfd, buffer, MAXLINE - 1) > 0)
  {
    toUpperCase( buffer, strlen( buffer));
    write( connfd, buffer, strlen( buffer));
  }
}

void toUpperCase( char buffer[], int length)
{
  int i;
  for( i = 0; i < length - 1; i++)
  {
      buffer[i] = toupper( buffer[i]);
  }
}

// client
#include "socketwrap.h"

void str_cli( int connfd);

int main( int argc, char** argv)
{
  int sockfd;
  struct sockaddr_in serverAddress;

  if( argc != 2)
  {
      printf( "Invalid argument count\n");
      printf( "Correct usage: tcpcli4 <IPaddress>\n");
      exit( 1);
  }

  sockfd = w_socket( AF_INET, SOCK_STREAM, 0);
  bzero( &serverAddress, sizeof( serverAddress));
  serverAddress.sin_family = AF_INET;
  serverAddress.sin_port = htons( 11979);
  if( inet_pton( AF_INET, argv[1], &serverAddress.sin_addr) <= 0)
  {
      perror( "inet_pton error");
      exit( 1);
  }

  w_connect( sockfd, ( struct sockaddr*) &serverAddress, sizeof( serverAddress));

  str_cli( sockfd);
  exit( 0);
}

void str_cli( int connfd)
{
  char buffer[MAXLINE];

  printf( "Enter the string to echo: ");
  while( fgets( buffer, MAXLINE, stdin) > 0)
  {

    // Send string to echo server, and retrieve response
    write( connfd, buffer, strlen( buffer));
    read( connfd, buffer, MAXLINE - 1);

    // Output echoed string
    printf( "Echo response: %s\n", buffer);
    printf( "Enter the string to echo: ");
  }
} 
```

如果您需要更多信息或有任何不清楚的地方，请告诉我

感谢所有回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:11:30.440

`read()`不会`'\0'`向字符串添加终止符，因此您的`strlen()`调用结果没有明确定义。您需要使用`read()`（将其存储在变量中，不要只是对其进行测试`> 0`然后将其丢弃）的返回值来了解字符串的长度。

`'\0'`它似乎在一段时间内正常工作，但这只是未初始化时缓冲区中的 s 的运气。在读取循环之前尝试它，`memset(buffer, 'X', sizeof buffer)`你会得到更早的失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:20:26.430

和`\0`Alan Curry 指出的问题一样，不要忘记 TCP**不是**面向消息的传输，它是面向*流*的。

绝对*不能*保证`write`一端的单身会导致另一端的单身`read`。事实上，在某些情况下，可以保证*不会*发生这种情况。

您应该在数据包中加入某种形式的结构或分界线，以指示下一个数据块的长度。在这种情况下，一个好的方法是包含字符串长度的 32 位整数，打包为四个字节。网络协议*通常*以“大端”格式（又名“网络顺序”）发送这样的东西，因此您可以`htonl()`在发送和`ntohl()`接收时转换值。

在发送端，您可以使用`writev()`将长度值和数据本身写入一个系统调用。在接收端，只需使用`read()`获取长度，然后再`read()`读取那么多数据。

另外，不要忘记*任何* `read()`or`write()`调用可以发送比实际指定的更少的数据。每个这样的操作都应该包装在一个循环中，该循环重复调用该函数，直到处理了适当数量的字节。

# javascript - 为什么这个函数打印“undefined undefined”作为联系人姓名，加上“new Object”？

> ID：12134532
> 
> 赞同：0
> 
> 时间：2012-08-26T22:47:12.100
> 
> 标签：javascript, javascript-objects

我正在[Codecademy](http://codecademy.com)学习 JavaScript 课程。在这个练习中，我们应该创建一个函数`add`来将一个人添加到`contacts`数组中，然后使用提示从用户那里获取信息，然后我们调用该函数`list`将数组中的所有人打印`contacts`到控制台.

当我运行下面的代码时，它会列出`contacts`数组中的两个现有人员，然后打印`"undefined undefined"`出我尝试使用提示添加的人员。但是，当我打印 的长度时`contacts`，它会显示`3`，因此添加了一个人。

任何帮助将不胜感激。

```
var bob = {
  firstName: "Bob",
  lastName: "Jones",

  phoneNumber: "(650) 777 - 7777",
  email: "bob.jones@example.com"
};

var mary = {
  firstName: "Mary",
  lastName: "Johnson",

  phoneNumber: "(650) 888 - 8888",
  email: "mary.johnson@example.com"
};

var contacts = new Array(bob, mary);

function printPerson(person) {
  console.log(person.firstName + " " + person.lastName);
}

function list() {
  var length = contacts.length;
  var i;
  for (i = 0; i < length; i++) {
    printPerson(contacts[i]);
  }
}

/*Create a search function
then call it passing "Jones"*/

var search = function(lastName) {
  var number = contacts.length;
  for (i = 0; i < number; i++) {
    if (contacts[i].lastName === lastName) {
      printPerson(contacts[i]);
    }
  }
};

var add = function(firstName, lastName, email, telephone) {
  contacts[contacts.length] = new Object(firstName, lastName, email, telephone);
};

var firstName = prompt("What is your first name");
var lastName = prompt("What is your last name");
var email = prompt("What is your email");
var telephone = prompt("What is your phone number");
add(firstName, lastName, email, telephone);
list();
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:50:03.020

要创建具有属性的新对象，您必须为其提供每个属性的属性名称和属性值。您只是将一个值列表传递给`new Object()`构造函数，它不会生成您想要的对象类型。

有几种方法可以创建具有属性的新对象，但在这种情况下，使用文字对象声明格式可能是最简单的`{name1: val1, name2: val2}`。为此，请更改以下代码：

```
var add = function(firstName, lastName, email, telephone){
    contacts[contacts.length] = new Object(firstName, lastName, email, telephone);
}; 
```

对此：

```
var add = function(firstName, lastName, email, telephone){
    contacts[contacts.length] = {firstName: firstName, lastName: lastName, email: email, phoneNumber: telephone};
}; 
```

它在这里工作：http: [//jsfiddle.net/jfriend00/Ea7B5/](http://jsfiddle.net/jfriend00/Ea7B5/)

# android - 将图像保存在图库中

> ID：12134535
> 
> 赞同：7
> 
> 时间：2012-08-26T22:47:37.550
> 
> 标签：android, image, save, gallery

这是我的代码，我希望保存图像按钮只是将图像保存到画廊。

```
package com.nk_apps.hip.hop.lyric.wallpapers;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class Wallpapers extends Activity implements OnClickListener {
}
    ImageView display;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.wallpapers);

        display = (ImageView) findViewById(R.id.IVDisplay);
        ImageView image1 = (ImageView) findViewById(R.id.IVimage1);
        ImageView image2 = (ImageView) findViewById(R.id.IVimage2);
        ImageView image3 = (ImageView) findViewById(R.id.IVimage3);
        ImageView image4 = (ImageView) findViewById(R.id.IVimage4);
        ImageView image5 = (ImageView) findViewById(R.id.IVimage5);
        ImageView image6 = (ImageView) findViewById(R.id.IVimage6);
        ImageView image7 = (ImageView) findViewById(R.id.IVimage7);
        ImageView image8 = (ImageView) findViewById(R.id.IVimage8);
        ImageView image9 = (ImageView) findViewById(R.id.IVimage9);
        Button saveImage = (Button) findViewById(R.id.bSaveImage);

        image1.setOnClickListener(this);
        image2.setOnClickListener(this);
        image3.setOnClickListener(this);
        image4.setOnClickListener(this);
        image5.setOnClickListener(this);
        image6.setOnClickListener(this);
        image7.setOnClickListener(this);
        image8.setOnClickListener(this);
        image9.setOnClickListener(this);
        saveImage.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch (v.getId()) {

        case R.id.IVimage1:
            display.setImageResource(R.drawable.aotl);
            break;
        case R.id.IVimage2:
            display.setImageResource(R.drawable.ball_so_hard);
            break;
        case R.id.IVimage3:
            display.setImageResource(R.drawable.eye);
            break;
        case R.id.IVimage4:
            display.setImageResource(R.drawable.faded);
            break;
        case R.id.IVimage5:
            display.setImageResource(R.drawable.hiii_power);
            break;
        case R.id.IVimage6:
            display.setImageResource(R.drawable.i_invented_swag);
            break;
        case R.id.IVimage7:
            display.setImageResource(R.drawable.lifes_a_bitch);
            break;
        case R.id.IVimage8:
            display.setImageResource(R.drawable.mack_truck);
            break;
        case R.id.IVimage9:
            display.setImageResource(R.drawable.opposite);
            break;
        case R.id.bSaveImage:

            break;
        }

    } } 
```

我想知道在最后一个案例下应该放什么。如果我不应该把它放在那里，我能被告知到底是什么吗？

感谢您的帮助，真的很难接受一切。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-26T22:52:01.363

在图库中保存任何图像可以通过以下方式完成：

```
MediaStore.Images.Media.insertImage(getContentResolver(), yourBitmap, yourTitle , yourDescription); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:51:35.363

在 onClick 侦听器中，您可以使用它来将图像保存到图库，

```
FrameLayout mainLayout = (FrameLayout) findViewById(R.id.frame);
                    Random fCount = new Random();
                    int roll = fCount.nextInt(600) + 1;
                    File file = new File(Environment
                            .getExternalStorageDirectory()
                            + File.separator
                            + "/your_folder_name/" + String.valueOf(roll) + ".png");

                    Bitmap b = Bitmap.createBitmap(mainLayout.getWidth(),
                            mainLayout.getHeight(), Bitmap.Config.ARGB_8888);
                    Canvas c = new Canvas(b);
                    mainLayout.draw(c);
                    FileOutputStream fos = null;
                    try {
                        fos = new FileOutputStream(file);
                        if (fos != null) {
                            b.compress(Bitmap.CompressFormat.PNG, 90, fos);
                            fos.close();
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T09:46:37.500

简单地说，您需要一个将图像传递给它的函数。查看完整代码[**如何以编程方式将图像保存到 android 中的画廊**](http://whats-online.info/science-and-tutorials/135/how-to-save-an-image-to-gallery-in-android-programmatically/)

```
private void saveImageToExternalStorage(Bitmap finalBitmap) {
        String root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).toString();
        File myDir = new File(root + "/saved_images_1");
        myDir.mkdirs();
        Random generator = new Random();
        int n = 10000;
        n = generator.nextInt(n);
        String fname = "Image-" + n + ".jpg";
        File file = new File(myDir, fname);
        if (file.exists())
            file.delete();
        try {
            FileOutputStream out = new FileOutputStream(file);
            finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
            out.flush();
            out.close();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
} 
```

在您的 onClick 事件中调用您的函数并将您的图像作为位图传递给函数。

```
switch (v.getId()) {

        case R.id.IVimage1:
           saveImageToExternalStorage(img1);
       break;

       case R.id.IVimage2:
           saveImageToExternalStorage(img2);
       break;

       case R.id.IVimage3:
           saveImageToExternalStorage(img3);
       break;
} 
```

# mysql - 为我的项目经理布局 mySQL 数据库的最佳方式

> ID：12134536
> 
> 赞同：0
> 
> 时间：2012-08-26T22:47:40.447
> 
> 标签：mysql

我正在制作一个供我个人使用的项目经理站点，并且我有一个问题，即为该站点构建数据库的最佳方法是什么。

它将涉及`Client`列表、`Projects`和`Tasks`、`Invoicing`和`Payments`。我正在尝试找出确保可以将所有内容链接到`Client`. 这是我放在记事本中的内容，只是为了了解我的数据库应该是什么样子。

```
Clients: id, name
Projects: id, client, project_name, due_date
Tasks: id, client, project_name, task, due_date, complete
Invoices: invoice_id, client, project_name, date, due, balance, payment, pay_date
Invoice_item: id, item, amount 
```

如果有人对我应该如何做到这一点有更好的想法，请随时告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:57:24.477

@GuberX - 为什么每张桌子都只有`id`？

执行以下操作看起来更具描述性：

```
[Client]: cliID, name
[Project]: projID, client, project_name, due_date
[Task]: taskID, client, project_name, task, due_date, complete
[Invoice]: invID, client, project_name, date, due, balance, payment, pay_date
[Invoice_item]: InvItemID, item, amount 
```

使用您指定的外键的示例（在评论中）：

```
multiple tasks, single invoice but accept multiple payments

Task [taskID, client, project_name, task, due_date, complete, *projID] 
```

注意上面的 *projID。[在这里](http://www2.cs.uregina.ca/~bernatja/crowsfoot.html)为您进一步阅读

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:57:50.583

```
Clients: id, name
Projects: id, client_id, name, due_on
Tasks: id, client_id, project_id, name, due_on, completed_at
Invoices: id, project_id, issued_on, due_on, balance, payment, paid_on
Invoice_item: id, invoice_id, item, amount 
```

在通过项目查找时，客户名称/ID 未存储在发票表中。还要考虑是否要跟踪发票的部分付款或多个 project_milestones（截止日期） - 如果是这样，那么这些都需要一个表格。

哦，是的，不要忘记项目状态及其影响：引用、赢得、丢失、完成等。

# web-services - 是否可以在 web 服务中有多个 xsd 映射？

> ID：12134538
> 
> 赞同：1
> 
> 时间：2012-08-26T22:48:36.607
> 
> 标签：web-services, rest, soap, xsd, wsdl

我是 web 服务的新手，我面临一个设计问题，我们想要创建一个 web 服务（最好是基于 SOAP），它将接收 2 个参数：

*   字符串变量（客户端名称）；
*   XML 数据。

目前此 Web 服务有 2 个不同的消费者，但他们的数量将会增加。所有消费者都有将要发送的单独 XSD 数据，例如：

**消费者1：**

```
<ConData>
    <Customer>
        <FirstName>FirName</FirstName>
        <LastName>LasName</LastName>
    </Customer>
    <Acocunt>
        <Number>112971</Number>
    </Account>
    <Order>
        <OrderNum>0092123</OrderNum>
    </Order>
<ConData> 
```

**消费者2：**

```
<ConData>
    <SysData>
        <CustomerFirstName>Name</CustomerFirstName>
        <CustomerLastName>Name</CustomerLastName>
        <AccountNumber>Au1o2n</AccountNumber>
        <OrderNum>koo912</OrderNum>
    </SysData>
<ConData> 
```

该 Web 服务应该从这些客户端获取 XML 数据，并根据消费者名称将其存储到数据库中。我们不需要进行任何处理来验证 XML，我们只需将其存储在数据库中即可。

不过，作为一个好的设计，我想用显式参数定义我的 Web 服务。问题是，由于它们的 XML 数据格式不同，我无法在我的 WSDL 中使用单个 XSD 模式作为参数。我可以想到 2 个选项来解决这个问题：

**1\. 让他们在我的 Web 服务中将 XML 数据作为字符串而不是 XSD 映射参数传递。**虽然这是一种有效的方法，但根据我目前在论坛上所读到的内容，这似乎是一个糟糕的设计，因为它使验证无效，并且需要大量的手动编组和解组以及其他问题。另外，我的 WSDL 将无法向我的客户定义预期的格式等。

**2\. 创建 2 个单独的 Web 服务，它们将使用自己的 XSD 处理不同的个人消费者**。这似乎不太可行，因为将来如果我们添加更多消费者，我们将不得不为相同的操作添加具有重复代码的新 Web 服务等。

我正在寻找是否有一种方法可以在单个 Web 服务 WSDL 中定义多个 XSD，或者可能是解决此问题的更好方法。

附带说明一下，我更喜欢使用基于 SOAP 的 Web 服务，但如果使用 RESTful Web 服务以更好的方式解决了这个问题，那么我也可以考虑这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:12:06.990

**您不需要为每个客户端提供不同的 Web 服务或框架，您只需要不同的 WSDL 即可**。

忘记将这个 XML 参数作为字符串发送，它有一些缺点，我不会在这里重复，因为您也已经阅读过它。因此，您需要将其作为 XML 发送。

要将其保留在一个 Web 服务中，您需要创建 Web 服务，以便它接受任何 XML 作为输入（`<xsd:any>`参数的类型）。类型`<xsd:any>`将意味着任何类型的 XML，但对于初学者来说，至少是可以验证结构的 XML。

这简化了 Web 服务的版本控制，因为您在添加另一种 XML 类型的输入时不需要更改代码，但不幸的是，您的 Web 服务失去了强类型，并且为 Web 服务生成的 WSDL 不会说明任何有关结构的信息它所期望的 XML（任何 XML 都太模糊了）。您的 Web 服务框架将在您的代码中使用 、`Object`或其他类型创建。您的所有客户端存根也会发生同样的情况。`XmlElement``XmlDocument`

但是对于您的客户，这可以通过为每个客户提供不同的 WSDL 来从 WSDL 中解决。

为此，您创建一个 Web 服务的 WSDL，其中包含除该`<types>`部分之外的所有客户端的公共内容，然后将每个客户端的这个公共 WSDL 与它们自己的 XML Schema 合并。然后，您将在每个客户端的不同 URL 上公开每个 WSDL。

现在，客户将能够基于他们自己的特定 WSDL 生成强类型存根。

当客户端调用您的 Web 服务时，您可以识别客户端 XML Schema 并使用它来验证 XML 参数并查看它是否是预期的内容。

如果以上内容看起来很多，那么您总是可以选择松散类型的 RESTful Web 服务。不管您选择什么解决方案，只要确保您使用发送它的客户端的模式来验证传入的 XML。

# android - setBackgroundColor() 和 setBackground() 在android中是互斥的

> ID：12134542
> 
> 赞同：2
> 
> 时间：2012-08-26T22:48:51.920
> 
> 标签：android

我正在尝试在另一种颜色的背景上制作一种颜色的圆圈。

```
background = new ShapeDrawable(new OvalShape());
background.getPaint().setColor(main.getResources().getColor(R.color.XXX));
view.SetBackground(background); 
```

将适用于彩色圆圈，并且

```
view.setBackgroundColor(getResources().getColor(R.color.XXX)); 
```

将适用于背景，但它们是互斥的。它只是以我上次所做的结束。有没有办法在另一个重叠视图或类似的东西上制作圆圈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:46:04.057

`setBackgroundColor()`基本上是将视图的背景更改为可绘制颜色的捷径。

做你想做的事，你可以尝试下面描述的两件事之一：

1.  **在FrameLayout**中放置一个视图，在**FrameLayout**中设置背景颜色，并将形状放在视图中。

***   您也可以尝试使用**ImageView**，它可以有一个背景和另一个可绘制的 `setImageDrawable()`方法。**

# apache - Apache 和 Tomcat 在同一台服务器上运行

> ID：12134543
> 
> 赞同：0
> 
> 时间：2012-08-26T22:49:19.983
> 
> 标签：apache, tomcat

我目前在端口 80 上运行 Apache，它有很多域设置。我需要安装 Tomcat 7 并在端口 80 上运行它。我知道如何配置它，但是如何让我的旧 Apache 和 Tomcat 在同一个端口 80 上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:02:36.123

您可以通过为网卡分配辅助 IP 地址来进行设置。谷歌程序或与您的系统管理员（Windows 或 Unix）联系以寻求帮助。配置辅助 IP 地址后，您可以设置 apache 的第二个实例以在端口 80 上监听它。为方便起见，您还可以为该 IP 地址设置 DNS 条目，以便您可以使用名称访问它与IP地址。

# python - 如何消除 Python 中 subprocess.Popen 的标准输出？

> ID：12134544
> 
> 赞同：2
> 
> 时间：2012-08-26T22:49:42.323
> 
> 标签：python, python-2.7, ping

当我在 Python 中执行以下操作时：

```
ping = subprocess.Popen("ping -n 1 %s" %ip, stdout=subprocess.PIPE) 
```

它总是打印到屏幕上：

```
(subprocess.Popen object at 0x.... ) 
```

这对我来说有点烦人。你知道如何避免标准输出吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:15:35.883

看起来您正试图通过`ping`在示例中打印变量来从过程中获取标准输出。那是`subprocess.Popen`对象的不正确使用。为了正确使用`subprocess.Popen`这是你要写的：

```
ping_process = subprocess.Popen(['ping', '-c', '1', ip], stdout=subprocess.PIPE)

# This will block until ping exits
stdout = ping_process.stdout.read()
print stdout 
```

我还更改了您用于 ping 的参数，因为`-n`在我的机器实现中这是一个无效参数。

# javascript - Adobe Air - 内存问题

> ID：12134545
> 
> 赞同：0
> 
> 时间：2012-08-26T22:49:56.997
> 
> 标签：javascript, caching, air, adobe

每次我在 Adob​​e Air 中发出 Ajax 请求 (jQuery) 并从外部 url 加载图像时，私有内存使用量都会增加。有什么方法可以禁用图像缓存或清除缓存文件？

例子：

```
$.ajax({
type: 'get',
url: someurl,
success: function(res){
    $('#mydiv').attr('src', res);
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:44:43.147

通常，垃圾收集器会释放分配给未使用变量的内存，或者在其作用域结束时释放变量。在这里，`res`在回调函数结束时被清除。

无论如何，这就是在最常见的浏览器中发生的事情。我真的不知道 Adob​​e Air 中会发生什么，但 IIRC 它使用 WebKit，所以它的行为*应该*像 Chrome 和 Safari ......

如果没有，请尝试显式触发垃圾收集器分配`null`给未使用的变量：

```
...
success: function(res){
    $('#mydiv').attr('src', res);
    res = null;
} 
```

无论如何，请记住您仍然复制了图像属性中的值`res`，`src`因此内存使用量*仍然*会增加。无论如何，这应该是显而易见的。

# php - 带有 s 模式修饰符的 Preg_match_all 无法正常工作

> ID：12134546
> 
> 赞同：1
> 
> 时间：2012-08-26T22:49:57.670
> 
> 标签：php

我正在尝试匹配之间的所有内容`<!-- and -->`

我的PHP代码：

```
<?php
$html = <<< HTML
<!-- content
content content
content -->
<!-- dd  dsd  sdsd  s -->
<!-- dsajda2i -->
HTML;
preg_match_all('#<!-- (.*) -->#si',$html,$out,PREG_SET_ORDER);
print_r($out);
?> 
```

但它与它不匹配。

**OBS：**我可以在里面有任何字符`<!-- here any characters -->`。

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:57:08.910

您应该使用`(.*?)`而不仅仅是`(.*)`. 正则表达式引擎的默认“贪婪”行为会产生意想不到的结果。

# node.js - Node.js - 外部 JS 和 CSS 文件（仅使用 node.js 不表达）

> ID：12134554
> 
> 赞同：21
> 
> 时间：2012-08-26T22:51:07.720
> 
> 标签：node.js

我正在尝试学习 node.js 并且遇到了一些障碍。

我的问题是我似乎无法将外部 css 和 js 文件加载到 html 文件中。

```
GET http://localhost:8080/css/style.css 404 (Not Found) 
GET http://localhost:8080/js/script.css 404 (Not Found) 
```

（当时所有文件都在应用程序的根目录中）

我被告知在某种程度上模仿以下应用程序结构，为公共目录添加一个路由，以允许网络服务器提供外部文件。

我的应用程序结构是这样的

```
domain.com
  app/
    webserver.js

  public/
    chatclient.html

    js/
      script.js

    css/
      style.css 
```

所以我的 webserver.js 脚本位于应用程序的根目录中，我想要访问的所有内容都在“公共”中。

我还看到了[这个例子](http://www.thecodinghumanist.com/blog/archives/2011/5/6/serving-static-files-from-node-js)，它使用 path.extname() 来获取位于路径中的任何文件扩展名。（见最后一个代码块）。

所以我尝试将新的站点结构和这个 path.extname() 示例结合起来，让网络服务器允许访问我的公共目录中的任何文件，这样我就可以渲染引用外部 js 和 css 文件的 html 文件.

我的 webserver.js 看起来像这样。

```
var http = require('http')
, url = require('url')
, fs = require('fs')
, path = require('path')
, server;

server = http.createServer(function(req,res){

  var myPath = url.parse(req.url).pathname;

    switch(myPath){

      case '/public':

        // get the extensions of the files inside this dir (.html, .js, .css)
        var extname = mypath.extname(path);

          switch (extname) {

            // get the html
            case '.html':
              fs.readFile(__dirname + '/public/chatclient.html', function (err, data) {
                if (err) return send404(res);
                res.writeHead(200, {'Content-Type': 'text/html'});
                res.write(data, 'utf8');
                res.end();
              });
            break;

            // get the script that /public/chatclient.html references
            case '.js':
              fs.readFile(__dirname + '/public/js/script.js', function (err, data) {
                if (err) return send404(res);
                res.writeHead(200, { 'Content-Type': 'text/javascript' });
                res.end(content, 'utf-8');
                res.end();
              });
            break;

            // get the styles that /public/chatclient.html references
            case '.css':
              fs.readFile(__dirname + '/public/css/style.css', function (err, data) {
                if (err) return send404(res);
                res.writeHead(200, { 'Content-Type': 'text/javascript' });
                res.end(content, 'utf-8');
                res.end();
              });
          }
          break;

          default: send404(res);
        }
    }); 
```

在公共情况下，我试图通过 var extname = mypath.extname(path); 获取此目录中的任何文件夹/文件 类似于我提供的链接。

但是当我控制台记录它时，'extname' 是空的。

谁能建议我可能需要在这里添加或添加什么？我知道这可以在 Express 中轻松完成，但我想知道如何仅依靠 Node.js 来实现相同的目标。

我很感激这方面的任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-27T00:42:05.653

您的代码有几个问题。

1.  您的服务器不会运行，因为您没有指定要监听的端口。
2.  正如 Eric 指出的那样，您的案例条件将失败，因为 url 中没有出现“public”。
3.  您在 js 和 css 响应中引用了一个不存在的变量“内容”，应该是“数据”。
4.  您的 css 内容类型标头应该是 text/css 而不是 text/javascript
5.  在正文中指定“utf8”是不必要的。

我已经重写了你的代码。注意我不使用 case/switch。我更喜欢简单得多的 if 和 else，如果这是你的偏好，你可以把它们放回去。在我的重写中不需要 url 和 path 模块，所以我已经删除了它们。

```
var http = require('http'),
    fs = require('fs');

http.createServer(function (req, res) {

    if(req.url.indexOf('.html') != -1){ //req.url has the pathname, check if it conatins '.html'

      fs.readFile(__dirname + '/public/chatclient.html', function (err, data) {
        if (err) console.log(err);
        res.writeHead(200, {'Content-Type': 'text/html'});
        res.write(data);
        res.end();
      });

    }

    if(req.url.indexOf('.js') != -1){ //req.url has the pathname, check if it conatins '.js'

      fs.readFile(__dirname + '/public/js/script.js', function (err, data) {
        if (err) console.log(err);
        res.writeHead(200, {'Content-Type': 'text/javascript'});
        res.write(data);
        res.end();
      });

    }

    if(req.url.indexOf('.css') != -1){ //req.url has the pathname, check if it conatins '.css'

      fs.readFile(__dirname + '/public/css/style.css', function (err, data) {
        if (err) console.log(err);
        res.writeHead(200, {'Content-Type': 'text/css'});
        res.write(data);
        res.end();
      });

    }

}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-26T23:16:42.500

您可能想研究使用像[express](http://expressjs.com/)这样的服务器框架，它允许您设置一个“公共”目录来自动路由静态文件

```
var express = require('express'),app = express();
app.use(express.static(path.join(__dirname, 'public'))); 
```

这样一个框架的廉价开销确实值得有效地“重新发明轮子”的努力

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T23:07:11.333

`public`没有出现在客户端请求的 URL 中，所以 myPath 上的开关总是会失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T00:36:21.563

您可以考虑查看 Connect 中提供的[静态](http://www.senchalabs.org/connect/static.html)中间件。查看 Static 的源代码可能会给您一些关于如何使用 node.js 代码执行此操作的想法（如果您想了解如何在不使用现有库的情况下执行此操作）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-20T05:13:55.453

更改时自动更新文件，更新延迟 1 秒。格式：app.js | 索引.htm | 样式.css

```
// packages
const http = require('http');
const fs = require('fs');
// server properties
const hostname = '127.0.0.1';
const port = 3000;
const timer = 300;

//should trigger atualize function every timer parameter
let htmlfile = '';
let cssfile = '';
let jsfile = '';

uptodate();

// should read file from the disk for html
function uptodate()
{
  console.log(1);
   fs.readFile('./index.html', function (err, html) {
    if (err) {
      throw err; 
    }       
    htmlfile = html;
  });
  // should read css from the disk for css
   fs.readFile('./style.css', function (err, html) {
    if (err) {
      throw err; 
    }       
    cssfile = html;
  });

  // should read js file from the disk
  fs.readFile('./app.js', function (err, html) {
    if (err) {
      throw err; 
    }       
    jsfile = html;
  });
  setTimeout(function(){ uptodate(); }, 1000);
}
const server = http.createServer((req, res) => {
  res.statusCode = 200;

  // should send css and js
  if(req.url.indexOf('.css') != -1){ //req.url has the pathname, check if it conatins '.js'
   res.writeHead(200, {'Content-Type': 'text/css'});
   res.write(cssfile);
   res.end();
   return;
  }
  if(req.url.indexOf('.js') != -1){ //req.url has the pathname, check if it conatins '.js'
   res.writeHead(200, {'Content-Type': 'text/javascript'});
   res.write(jsfile);
   res.end();
   return;
  }
  // should send html file via request
  res.writeHeader(200, {"Content-Type": "text/html"});  
  res.write(htmlfile);
  res.end();
});

// should send css and js 

server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-22T19:59:49.117

```
 // get the extensions of the files inside this dir (.html, .js, .css)
    var extname = **mypath**.extname(path); 
```

这些是相反的。应该：

```
 var extension = path.extname(mypath); 
```

当我可以避免时，我也不使用函数名作为变量名。

# php - 在另一页的表格中回显过滤数据？

> ID：12134560
> 
> 赞同：0
> 
> 时间：2012-08-26T22:52:03.223
> 
> 标签：php, mysql, database, date

在 php 中仍然是绿色的，但我喜欢它。无论如何...

我有一个从我的数据库中检索信息的表，它从日期搜索中获取其数据，所以我希望在过滤后在另一个表中检索它。

我尝试了几件事，包括将用于过滤它的变量（日期）传递到另一个窗口，以便表格在那里检索此信息，其中 id 作为上一页的日期。

在我的搜索页面上，我有这个：

```
<?php
$tester = $_POST['Date'];
mysql_select_db($database_dbconnkk, $dbconnkk);
$query_equ = "SELECT * FROM daily_reports WHERE Date = '$tester' ORDER BY id ASC";
?> 
```

和一个重复相同的工作表。我有一个链接可以打开此页面的窗口，并尝试从以前的测试中检索数据。

```
<?php
$tester2 = $_Get['Date']; 
```

还尝试将日期作为 id 传递：

```
(id=<?php echo $row_equ['Date']; ?>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:09:57.480

假设问题在这里：

```
$tester2 = $_Get['Date']; 
```

PHP 中的变量名区分大小写，所以这一行应该如下所示：

```
$tester2 = $_GET['Date']; 
```

反而。其他一切看起来应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:43:05.017

我知道了。在我用来过滤记录的同一变量中传递了我在过滤器上使用的日期

```
?Date=<?php echo $tester; ?> 
```

然后在我的新窗口中，我将相同的内容放入另一个变量（tester2）

```
$tester2 = $_GET['Date']; 
```

选择然后在列中回显

```
$query_equ = "SELECT * FROM daily_reports WHERE Date = '$tester2' ORDER BY id ASC"; 
```

# javascript - Moment.js unix 时间戳总是以分钟为单位显示时间

> ID：12134568
> 
> 赞同：8
> 
> 时间：2012-08-26T22:53:43.770
> 
> 标签：javascript, time, momentjs

我正在使用 Moment.js 并希望将 unix 时间戳转换为（始终）显示从当前时间开始的几分钟前。例如）4 分钟前、30 分钟前、94 分钟前等。

现在我正在使用：

```
moment.unix(d).fromNow() 
```

但这并不总是以分钟为单位显示，例如）一小时前、一天前等。我尝试过使用 .asMinutes()，但我相信这只是带有 moment.duration() 的词。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T23:31:53.107

不确定这是否可以使用本机 Moment 方法，但您可以轻松地制作自己的 Moment 扩展：

```
moment.fn.minutesFromNow = function() {
    return Math.floor((+new Date() - (+this))/60000) + ' mins ago';
}
//then call:
moment.unix(d).minutesFromNow(); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/GF4Mr/3/)

`minutesFromNow()`请注意，在我的扩展返回一个字符串之后，其他时刻方法将无法链接。

**编辑：**

固定复数扩展（0 min **s** , 1 min, 2 min **s**）：

```
moment.fn.minutesFromNow = function() {
    var r = Math.floor((+new Date() - (+this))/60000);
    return r + ' min' + ((r===1) ? '' : 's') + ' ago';
} 
```

如果您喜欢长格式，也可以将“min”替换为“minute”。

[**小提琴**](http://jsfiddle.net/ult_combo/GF4Mr/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T23:41:07.733

只需修改 moment.js 代码中的“find”函数，使其返回分钟：

```
from : function (time, withoutSuffix) {

  return moment.duration(this.diff(time)).asMinutes();

} 
```

这是一个[例子](http://jsfiddle.net/FTnNk/)。

...或者，甚至更好。只需将其添加为一个名为“fromNowInMinutes”的新函数。

# asp.net - Servertag 格式不正确，看不出有什么问题？

> ID：12134572
> 
> 赞同：1
> 
> 时间：2012-08-26T22:54:40.417
> 
> 标签：asp.net

好吧，我几乎要退出这个 ASP.NET SHYTE.. ;( 我通常编写客户端代码，一切都非常简单.. 但是这个！？！

我不知道我要解决多少问题......无论如何我得到一个解析器错误，服务器标签没有很好地形成。

我已经在网上搜索了几个小时，我发现的提示范围从告诉我也使用单引号到退休作为程序员......

我试图显示一组单选按钮，并从我的数据库中获取数据。

代码隐藏看起来像这样..

```
protected void fillRepeater()
    {
        MySqlConnection con = new MySqlConnection(@"Server=hide.my.url;Database=no_database;Uid=topsecretuser;Pwd=topsecret");
        con.Open();
       //ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('" + con.State + "');", true);

        string sqlQ = "Select * from t_domains";

        MySqlCommand myCommand = new MySqlCommand(sqlQ, con);

        MySqlDataReader dataReader = myCommand.ExecuteReader();
        Repeater1.DataSource = dataReader;
        Repeater1.DataBind();
        con.Close();

    } 
```

这是我的 HTML。我还没有实现我的表格行/单元格..（所以不要提醒我）；）

```
 Repeater data!<br />
    <asp:Repeater ID="Repeater1" runat="server">
    <HeaderTemplate>  
    <table>  
    </HeaderTemplate>
    <ItemTemplate>
     <asp:RadioButton id="RadioButton1" runat="server" GroupName="<%#DataBinder.Eval(Container.DataItem, "idtag_domain") %>" value="50" Text="Free access" onclick="calculatePrice();disableTB(this.name);"  />
     <br />
    <asp:RadioButton id="RadioButton2"  GroupName="<%#DataBinder.Eval(Container.DataItem, "idtag_domain") %>" 
        Text="Once a day(30/month)" value="25" onclick="calculatePrice();disableTB(this.name);" />
         <br />
    <asp:RadioButton id="RadioButton3" GroupName="<%#DataBinder.Eval(Container.DataItem, "idtag_domain") %>"  value="0"
        Text="Enter number of articles" onclick="enableTB(this.name, this.checked)" />
         <br />
    <asp:TextBox ID="textbox" name="<%#DataBinder.Eval(Container.DataItem, "idtag_domain") %>" Enabled="false" Width="106px" 
        onkeyup="calculatePrice()" style="background-color:#eeeeee" ></asp:TextBox>

    </ItemTemplate>
    <FooterTemplate>
    </table>
    </FooterTemplate>
    </asp:Repeater> 
```

错误它给我解析器错误消息：服务器标签格式不正确。

源错误：

```
 Line 36:   <asp:RadioButton id="RadioButton1" runat="server" GroupName="         <%#DataBinder.Eval(Container.DataItem, "idtag_domain") %>" value="50" Text="Free access" onclick="calculatePrice();disableTB(this.name);"  /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:57:37.940

您应该将 <%# 之前的 " 替换为 '。这将防止 Eval 部分中的 " 不正确地结束您的字符串。

```
<asp:RadioButton id="RadioButton1" runat="server" GroupName='<%#DataBinder.Eval(Container.DataItem, "idtag_domain") %>' value="50" Text="Free access" onclick="calculatePrice();disableTB(this.name);"  />
 <br />
<asp:RadioButton id="RadioButton2"  GroupName='<%#DataBinder.Eval(Container.DataItem, "idtag_domain") %>' 
    Text="Once a day(30/month)" value="25" onclick="calculatePrice();disableTB(this.name);" />
     <br />
<asp:RadioButton id="RadioButton3" GroupName='<%#DataBinder.Eval(Container.DataItem, "idtag_domain") %>'  value="0"
    Text="Enter number of articles" onclick="enableTB(this.name, this.checked)" />
     <br />
<asp:TextBox ID="textbox" name='<%#DataBinder.Eval(Container.DataItem, "idtag_domain") %>' Enabled="false" Width="106px" 
    onkeyup="calculatePrice()" style="background-color:#eeeeee" ></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:57:39.797

删除 和 之间的`GroupName="`空格`<%`。

# javascript - 如何使用 Javascript 和 Razor 编写干净的代码

> ID：12134582
> 
> 赞同：4
> 
> 时间：2012-08-26T22:56:15.513
> 
> 标签：javascript, asp.net-mvc, razor

我正在编写一个 ASP.Net MVC 页面，并且我正在使用来自服务器的数据来创建一个 Google 图表。x 轴是日期。y 轴是值。绘制了 2 行数据进行比较。以下是相关代码：

```
@model IEnumerable<Tuple<DateTime,int,int>>

<div id="chart_div_2" style="width: 900px; height: 500px;"></div>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawChart);
    function drawChart() {

        var arr = [['Year', 'Sales', 'Expenses']];

        //Using the Razor Model to create a Javascript array.
        var arr2 = [
            @foreach(var row in Model)
            {
                @:["@row.Item1.ToString("MMM d")", @row.Item2, @row.Item3],
            }
        ];

        for (var i = 0; i < arr2.length; i++)
        {
            arr.push(arr2[i]);
        }

      var data = google.visualization.arrayToDataTable(arr);
      var chart = new google.visualization.LineChart(document.getElementById('chart_div_2'));
      chart.draw(data);

    }
</script> 
```

首先，这段代码确实有效。以这种方式创建 arr2 确实会将 Razor 模型变成我可以使用的东西。但是，我的鼻子说代码气味。它说，将两种语言 razor 和 Javascript 放在一起，它们具有一些类似的基于 C 的编程流语法，可能会让下一个出现并尝试阅读它的人感到困惑。

有没有更好的方法来写这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:16:03.580

> 但是，我的鼻子说代码气味。

哦，是的，它很臭，我能感觉到。

> 有没有更好的方法来写这个？

当然。永远不要像混合两种语言并编写循环和东西那样手动构建 JSON。使用 JSON 序列化器：

```
@model IEnumerable<Tuple<DateTime,int,int>>

<div id="chart_div_2" style="width: 900px; height: 500px;"></div>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawChart);
    function drawChart() {
        var arr = @Html.Raw(
            Json.Encode(
                new object[] { new[] { "Year", "Sales", "Expenses" } }
                .Concat(
                    Model.Select(x => new object[] 
                    { 
                        x.Item1.ToString("MMM d"), 
                        x.Item2, 
                        x.Item3
                    })
                )
            )
        );

        var data = google.visualization.arrayToDataTable(arr);
        var chart = new google.visualization.LineChart(document.getElementById('chart_div_2'));
        chart.draw(data);
    }
</script> 
```

这将生成与您相​​同的代码标记，但整个模型操作和编码是在服务器上完成的。您还可以编写自定义 HTML 帮助程序以将代码简化为：

```
public static class ChartExtensions
{
    public static IHtmlString ToChartData(
        this IEnumerable<Tuple<DateTime, int, int>> model, 
        params string[] titles
    )
    {
        return new HtmlString(
            Json.Encode(
                new object[] { titles }
                .Concat(
                    model.Select(x => new object[] 
                    { 
                        x.Item1.ToString("MMM d"), 
                        x.Item2, 
                        x.Item3 
                    })
                )
            )
        );
    }
} 
```

然后在你看来：

```
@model IEnumerable<Tuple<DateTime,int,int>>

<div id="chart_div_2" style="width: 900px; height: 500px;"></div>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawChart);
    function drawChart() {
        var arr = @Model.ToChartData("Year", "Sales", "Expenses");
        var data = google.visualization.arrayToDataTable(arr);
        var chart = new google.visualization.LineChart(document.getElementById('chart_div_2'));
        chart.draw(data);
    }
</script> 
```

# php - PHP/MS SQL Server 显示 sql server 日期时间

> ID：12134585
> 
> 赞同：2
> 
> 时间：2012-08-26T22:57:10.243
> 
> 标签：php, sql, sql-server

我试图使用 PHP 从**MSSQL Server**日期时间表中显示日期和时间，来自 SQL Server 的值是 datetime EX。`2012-08-20 06:23:28:214`. 现在我想显示它的确切结果，但它 php 像这个 EX 一样显示它。`Aug 20 2012 6:23AM`. 我曾尝试使用 strtotime 但毫秒不显示或显示 : `000`。

非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:08:49.063

使用 PHP 的 strtotime() 将 sql 日期转换为 unix 时间，然后使用 date() 根据需要重新格式化它。`=strtotime("2012-08-20 06:23:28.214")`有效，因此只需使用字符串操作将最后的冒号更改为小数点。

或者，[这篇博](http://www.stev.org/post/2011/02/01/MS-SQL-Convert-to-unix-timestamp.aspx)文有代码，您可以使用这些代码让 MS SQL Server 直接返回 unix 时间。关键功能是`SELECT DATEDIFF(second, '1970/01/01 00:00:00', @date)`。

如果您实际上使用的是 MySQL 而不是 SQL Server，则可以使用该函数`UNIX_TIMESTAMP()`返回当前的 unix 时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:21:29.657

试试这个，

```
SELECT CONVERT(VARCHAR(50), CAST('2012-08-20 06:23:28:214' as DateTime), 100) 
          AS [OutPut]

-- expected output
--     Aug 20 2012 6:23AM 
```

从上面的示例中，我使用`CAST`了为了转换`string date`为原始`DateTime`数据类型。但是在原始查询中，*您可以省略*该`CAST`函数，因为您已经提到该列已经在`DateTime`数据类型上。

```
SELECT CONVERT(VARCHAR(50), columnDateTime, 100) 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!6/6861a/7 "点击这里重定向")

# [*如何在 MSSQL Server 中格式化日期和日期时间*](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T23:19:02.173

[DateTime](http://php.net/manual/en/datetime.createfromformat.php)对象的输入字符串类型`u`表示微秒（最多六个）。

[然而， DateTime::format确实使用与标准](http://www.php.net/manual/en/datetime.format.php)[日期](http://www.php.net/manual/en/function.date.php)相同的字符串但以下内容来自有关`u`输出数据的文档：

*微秒（在 PHP 5.2.2 中添加）。请注意， date() 将始终生成 000000，因为它需要一个整数参数，而 DateTime::format() 确实支持微秒。*

# c# - 在 ServiceStack 上找不到给定的密钥错误

> ID：12134588
> 
> 赞同：0
> 
> 时间：2012-08-26T22:57:33.283
> 
> 标签：c#, asp.net-mvc, servicestack

突然，我的 ServiceStack MVC 服务应用程序开始出现错误，如下所示：

```
{"The given key was not present in the dictionary."}    
System.Exception {System.Collections.Generic.KeyNotFoundException} 
```

和堆栈跟踪：

```
 at System.ThrowHelper.ThrowKeyNotFoundException()
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at ServiceStack.WebHost.Endpoints.Utils.FilterAttributeCache.GetRequestFilterAttributes(Type requestDtoType) in C:\src\ServiceStack\src\ServiceStack\WebHost.Endpoints\Utils\FilterAttributeCache.cs:line 44
   at ServiceStack.WebHost.Endpoints.EndpointHost.ApplyRequestFilters(IHttpRequest httpReq, IHttpResponse httpRes, Object requestDto) in C:\src\ServiceStack\src\ServiceStack\WebHost.Endpoints\EndpointHost.cs:line 201
   at ServiceStack.WebHost.Endpoints.RestHandler.ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, String operationName) in C:\src\ServiceStack\src\ServiceStack\WebHost.Endpoints\RestHandler.cs:line 79
   at ServiceStack.WebHost.Endpoints.Support.EndpointHandlerBase.ProcessRequest(HttpContext context) in C:\src\ServiceStack\src\ServiceStack\WebHost.Endpoints\Support\EndpointHandlerBase.cs:line 150
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我不知道错误或错误是什么。我的应用程序正在运行，但现在无法运行。

知道如何解决这个问题吗？

编辑 1：当我在我的网络浏览器中导航服务 url 时，调试器永远不会到达我的服务类和`Run`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:09:10.173

嗯，很奇怪！以下是我采取但没有奏效的行动。

*   重新启动 IIS 和 VS 2010。
*   在 VS 2010 上编译代码并调试。
*   编译代码并替换为 IIS 上的内容，然后重新启动 IIS。

这是我采取的行动，该项目再次开始工作。

*   创建一个新的 MVC 项目。
*   通过 NuGet 安装 ServiceStack MVC。
*   将现有代码复制到新项目。
*   在新项目的现有代码中重命名命名空间。
*   **在 VS2010 上调试，项目开始像魅力一样工作。**

当我将项目发布到 IIS 上的现有网站时，出现以下错误：

```
AppHost instance has been already set 
```

但是，为了传递错误，我删除了现有网站并创建了一个新网站。比，我在新网站上复制了新项目的输出。

一切又像魅力一样开始工作。

但我仍然不知道为什么会出现错误。

我希望这对可能有同样问题的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:09:39.400

我因在路线中使用错误的模型而收到此错误。

所以：

```
Routes.Add<ModelA>("/path/to/service"); 
```

应该

```
Routes.Add<ModelB>("/path/to/service"); 
```

# objective-c - UIViewTransitionfromView：永远不会工作，只显示第二张图片

> ID：12134590
> 
> 赞同：0
> 
> 时间：2012-08-26T22:57:36.633
> 
> 标签：objective-c, ios

我不理解 UIViewTransitionfromView 的奇怪行为而发疯：第二个视图首先显示，没有动画。这是代码：

```
UIImageView *backstar=[[UIImageView alloc]initWithFrame:CGRectMake(50, 50, 205, 205)];
    backstar.image=[UIImage imageNamed:@"backstar.png"];

UIImageView *star=[[UIImageView alloc]initWithFrame:CGRectMake(50, 50, 205, 205)];
star.image=[UIImage imageNamed:@"star.png"];

UIView *containerView=[[UIView alloc]initWithFrame:CGRectMake(50, 50, 205, 205)];
containerView.backgroundColor=[UIColor blackColor];
[self.view addSubview:containerView];
[containerView addSubview:backstar]; // if I don't do this nothing happens, container view stays f*** deep black
[containerView addSubview:star];

//if i remove the animation line, star is displayed of course, on top of backstar

[UIView transitionFromView:star toView:backstar  duration:2.0 options:UIViewAnimationOptionShowHideTransitionViews | UIViewAnimationOptionTransitionFlipFromLeft completion:^(BOOL finished){} ]; 
```

我到底错在哪里？正如Apple doc中所说，应该可以不删除imageViews而是显示/隐藏它们！

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:55:59.010

从您的帖子中不清楚您在哪里拥有此代码。我发现如果你把它全部放在 viewDiLoad 或 viewWillAppear 中，它就不起作用。您需要让第一个视图可见（在 viewDidLoad 或 viewWillAppear 中），然后添加第二个视图并在另一个方法中进行转换（可以使用按钮或 performSelector:withObject:afterDelay: 调用）。此外，如果您想从明星转到后援，则应首先将明星添加到视图中，并且仅在您想要进行过渡时才添加后援。这对我有用：

```
@implementation TransitionTestViewController
@synthesize star,backstar;

-(void)viewDidLoad {
    self.backstar=[[UIImageView alloc]initWithFrame:CGRectMake(50, 50, 205, 205)];
    backstar.image=[UIImage imageNamed:@"backstar.png"];
    self.star=[[UIImageView alloc]initWithFrame:CGRectMake(50, 50, 205, 205)];
    star.image=[UIImage imageNamed:@"star.png"];
    [self.view addSubview:star];
    //[self performSelector:@selector(flipViews:) withObject:nil afterDelay:.01];
}

-(IBAction)flipViews:(UIButton *) sender {
    [self.view addSubview:backstar];
    [UIView transitionFromView:self.star toView:self.backstar  duration:2.0 options: UIViewAnimationOptionShowHideTransitionViews |UIViewAnimationOptionTransitionFlipFromLeft completion:^(BOOL finished){}];
} 
```

# c# - 很多 CSV 文件的 NoSql 解决方案

> ID：12134595
> 
> 赞同：-1
> 
> 时间：2012-08-26T22:58:20.347
> 
> 标签：c#, nosql

哪种 NoSql 解决方案最适合以下要求？这个问题与这个[问题有关](https://stackoverflow.com/questions/12131443/database-within-a-database-table-design)。列的数量和名称是未知的，范围可以从 1 到数百万条记录。我选择的语言是 C#，我可能需要一个客户端来访问数据存储。数据存储需要高效的数据分页，因此如果 CSV 文件有 200 万行，我需要一种有效的方式来导航到第 2500 页，并且需要支持排序和高级过滤。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:04:30.510

我建议你使用文档存储，可以是 mongodb、couchdb。

如果您将一行作为一个文档，则列可能会有所不同，这非常适合您。

没有严格的模式，因此列可能会有所不同。

MongoDb 有 c# 支持，它有一个很好的客户端来处理池、分片等。

它是开源的。

它提供了您想要的所有功能，易于查询等。

# ruby - 如何使用 Sequel 连接到 postgres 数据库？

> ID：12134596
> 
> 赞同：4
> 
> 时间：2012-08-26T22:58:28.667
> 
> 标签：ruby, sqlite, postgresql, heroku, sequel

当我意识到他们支持的唯一数据库类型是 PostgreSQL 时，我正在制作一个使用 Heroku.com 部署的 Web 应用程序。到目前为止，我的应用程序（由 Ruby gem Sinatra 提供支持）通过 Sequel gem 的 .Sqlite 方法访问数据库。

这是我使用 Sequel 通过 SQLite 访问 .db 文件时的 Ruby 脚本：

```
DB = Sequel.sqlite('mydatabase.db')
DB.create_table :mytable do
  primary_key :id
  String :column_name
end 
```

在得知 Heroku 只使用了 PostgreSQL 之后，我安装了 PostgreSQL。这是通过 postgres 编写的脚本（我的用户名实际上是“postgress”，尽管我显然不会在这个问题中透露我的密码）：

```
DB = Sequel.postgres('mydatabase.db',:user=>'postgres',:password=>'my_password_here',:host=>'localhost',:port=>5432,:max_connections=>10)
DB.create_table :mytable do
  primary_key :id
  String :column_name 
end 
```

但是，当我运行此代码时，出现以下错误：

`C:/Ruby193/lib/ruby/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:208:in 'initialize': PG::Error: FATAL: database "mydatabase.db" does not exist (Sequel::DatabaseConnectionError)`

我已经尝试搜索 Google、StackOverflow、Sequel 文档和 Heroku 帮助文档以获取任何帮助，但我没有找到解决此问题的方法。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T23:19:08.123

根据 Pg 的错误消息，数据库`mydatabase.db`不存在。可能的原因：

*   您可能的意思是`mydatabase`没有特定于 SQLite 的`.db`文件名后缀
*   您可能创建了不同大小写的数据库，例如`"Mydatabase.db"`；
*   您可能正在连接到与您想象的不同的 Pg 服务器
*   您从未[创建过数据库](http://www.postgresql.org/docs/current/static/sql-createdatabase.html)。与 SQLite 的默认行为不同，当您尝试连接到尚不存在的数据库时，Pg 不会创建数据库。

如果有疑问，连接到 Pg`psql`并运行`\l`以列出数据库，或通过 PgAdmin-III 连接。

强烈推荐PostgreSQL[文档](http://www.postgresql.org/docs/9.1/static/index.html)和[教程。](http://www.postgresql.org/docs/9.1/static/tutorial.html)它们写得很好，会教你很多关于一般 SQL 以及特别是 Pg 的知识。

顺便说一句，`postgres`用户是超级用户。您不应该将它用于您的应用程序；这就像以 root 身份运行您的服务器，即一个非常糟糕的主意。创建一个没有超级用户、createdb 或 createuser 权限的新 PostgreSQL 用户，并将其用于您的应用程序。您可以`CREATE DATABASE somedb WITH OWNER myappuser`- 或者最好为您的 webapp 用户创建由不同用户拥有的数据库，然后明确`GRANT`地为 webapp 用户创建所需的最低权限。请参阅[用户管理](http://www.postgresql.org/docs/current/static/user-manag.html)和[GRANT](http://www.postgresql.org/docs/current/static/sql-grant.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:54:05.497

在 heroku 上，您需要做的就是告诉`Sequel`连接到 DATABASE_URL 环境变量的内容（这是 Sequel 理解的正确格式的 url）：

```
DB = Sequel.connect(ENV['DATABASE_URL']) 
```

# cakephp - 如何在 CakePHP 的自定义组件中访问 PHP_AUTH_* 变量？

> ID：12134598
> 
> 赞同：0
> 
> 时间：2012-08-26T22:58:44.143
> 
> 标签：cakephp, authentication

非常简单的测试用例：

将 lib/Cake/Controller/Component/Auth/BasicAuthenticate.php 复制到 myapp/Controller/Component/Auth/MyAppAuthAuthenticate.php

把它放在我的 Controller/AppController.php 的 beforeFilter() 中

this->Auth->authenticate = array(

```
 'MyAppAuth' => array(

                  'fields' => array('username' => 'email')

              ), 
```

伟大的。到目前为止一切正常（在调试日志中跟踪它们表明它们被正确调用。）但是，当我记录这些时：

$username = env('PHP_AUTH_USER'); $pass = env('PHP_AUTH_PW');

他们是空的。在原始的 BasicAuthenticate.php 中，它们被填充。是否有特殊需要才能在自定义组件中看到这些环境变量？其余的环境变量（如 SERVER_NAME 等）都存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:11:07.757

没有任何变化，它开始工作。

# iphone - 在不同的核心数据实体中包含 NSData 会使原始实体的检索更快吗？

> ID：12134603
> 
> 赞同：0
> 
> 时间：2012-08-26T22:59:49.607
> 
> 标签：iphone, objective-c, ios, core-data

所以这是我的例子。我有一个名为 Photo 的实体。它具有“宽度”和“高度”的属性，便于检索，以及拍摄时间的 NSDate。它也有照片本身的 NSData。如果我将此 NSData 移动到与 Photo 具有一对一关系的属性，如果我更改 Photo 中的另一个属性，是否会提高保存速度，或者如果我在 Photo 中获取另一个属性，是否会提高速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:28:56.623

我建议将其作为外部数据参考。在 WWDC 的一个谈话中，有一个确切的例子[https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/) ，他们在其中了解了不同类型模式的速度及其获取时间。该演讲被称为核心数据最佳实践，是一个大约 35 分钟的长演示。标记他们谈论外部数据参考的地方。整个谈话非常非常好，但这是相关的部分。

您的想法是正确的，他们创建了一个带有外部数据参考的 1-1 独立实体。它加快了很多事情。

这是幻灯片的链接：http: [//adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_214__core_data_best_practices.pdf](http://adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_214__core_data_best_practices.pdf)

# jquery - 在 jQuery 选择器中连接

> ID：12134605
> 
> 赞同：30
> 
> 时间：2012-08-26T23:00:19.200
> 
> 标签：jquery, concatenation

简单的问题。我有一个 js 变量，我也想在 jQuery 选择器中连接。但是它不起作用。也没有弹出错误。怎么了？如何正确地将变量连接到 jQuery 选择器中的某些文本。

```
<div id="part2"></div>

<script type="text/javascript" >

$('#button').click(function () 
{
var text = $('#text').val();    
var number = 2;
$.post('ajaxskeleton.php', {
red: text       
}, 
    function(){
    $('#part' + number).html(text);
    }); 
});

</script> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-26T23:11:00.500

的语法没有错

```
$('#part' + number).html(text); 
```

jQuery 接受一个字符串（*通常是一个 CSS 选择器*）或一个[DOM 节点](http://javascript.info/tutorial/dom-nodes)作为参数来创建一个[jQuery 对象](https://stackoverflow.com/questions/6445180/what-is-a-jquery-object)。

在您的情况下，您应该将 String 传递`$()`给

```
$(<a string>) 
```

确保您可以访问变量`number`和`text`.

测试做：

```
function(){
    alert(number + ":" + text);//or use console.log(number + ":" + text)
    $('#part' + number).html(text);
}); 
```

如果您看到您无权访问，请将它们作为参数传递给函数，您必须包含 $.get 的 uual 参数并在它们之后传递自定义参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T23:11:59.240

您的连接语法是正确的。

很可能甚至没有调用回调函数。您可以通过在该函数中放置`alert()`,`console.log()`或行来测试它。`debugger`

如果它没有被调用，很可能是 AJAX 错误。查看链接`.fail()`处理程序`$.post()`以找出错误是什么，例如：

```
$.post('ajaxskeleton.php', {
    red: text       
}, function(){
    $('#part' + number).html(text);
}).fail(function(jqXHR, textStatus, errorThrown) {
    console.log(arguments);
}); 
```

# c - 浮动到双重转换：为什么有这么多指令？

> ID：12134606
> 
> 赞同：19
> 
> 时间：2012-08-26T23:00:39.983
> 
> 标签：c, assembly, compiler-optimization

我很好奇是否有人可以为我阐明这一点。我正在研究一些数字数据转换的东西，并且我有几个进行数据转换的函数，我使用两个宏定义它们：

```
#define CONV_VIA_CAST(name, dtype, vtype)                               \
    static inline void name(void *data, void *view, size_t len) {       \
        vtype *vptr = (vtype*)view;                                     \
        dtype *dptr = (dtype*)data;                                     \
        for (size_t ii=0; ii < len/sizeof(vtype); ii++) {               \
            *vptr++ = (vtype)*dptr++;                                   \
        }                                                               \
    } 

#define CONV_VIA_FUNC(name, dtype, vtype, via)                          \
    static inline void name(void *data, void *view, size_t len) {       \
        vtype *vptr = (vtype*)view;                                     \
        dtype *dptr = (dtype*)data;                                     \
        for (size_t ii=0; ii < len/sizeof(vtype); ii++) {               \
            *vptr++ = (vtype)via(*dptr++);                              \
        }                                                               \
    } 
```

当我定义一个 float 到 int 的转换时：

```
 CONV_VIA_FUNC(f_to_i, float, int16_t, lrintf); 
```

我得到了一个很好的简洁的小块组装 -O3 ：

```
 0x0000000000401fb0 <+0>:     shr    %rdx
   0x0000000000401fb3 <+3>:     je     0x401fd3 <f_to_i+35>
   0x0000000000401fb5 <+5>:     xor    %eax,%eax
   0x0000000000401fb7 <+7>:     nopw   0x0(%rax,%rax,1)
   0x0000000000401fc0 <+16>:    cvtss2si (%rdi,%rax,4),%rcx
   0x0000000000401fc6 <+22>:    mov    %cx,(%rsi,%rax,2)
   0x0000000000401fca <+26>:    add    $0x1,%rax
   0x0000000000401fce <+30>:    cmp    %rdx,%rax
   0x0000000000401fd1 <+33>:    jne    0x401fc0 <f_to_i+16>
   0x0000000000401fd3 <+35>:    repz retq 
```

但是，当我定义一个 float->double（或 double->float）函数时：

```
CONV_VIA_CAST(f_to_d, float,   double); 
```

我得到了这个怪物：

```
 0x0000000000402040 <+0>:     mov    %rdx,%r8
   0x0000000000402043 <+3>:     shr    $0x3,%r8
   0x0000000000402047 <+7>:     test   %r8,%r8
   0x000000000040204a <+10>:    je     0x402106 <f_to_d+198>
   0x0000000000402050 <+16>:    shr    $0x5,%rdx
   0x0000000000402054 <+20>:    lea    0x0(,%rdx,4),%r9
   0x000000000040205c <+28>:    test   %r9,%r9
   0x000000000040205f <+31>:    je     0x402108 <f_to_d+200>
   0x0000000000402065 <+37>:    lea    (%rdi,%r8,4),%rax
   0x0000000000402069 <+41>:    cmp    $0xb,%r8
   0x000000000040206d <+45>:    lea    (%rsi,%r8,8),%r10
   0x0000000000402071 <+49>:    seta   %cl
   0x0000000000402074 <+52>:    cmp    %rax,%rsi
   0x0000000000402077 <+55>:    seta   %al
   0x000000000040207a <+58>:    cmp    %r10,%rdi
   0x000000000040207d <+61>:    seta   %r10b
   0x0000000000402081 <+65>:    or     %r10d,%eax
   0x0000000000402084 <+68>:    test   %al,%cl
   0x0000000000402086 <+70>:    je     0x402108 <f_to_d+200>
   0x000000000040208c <+76>:    xorps  %xmm3,%xmm3
   0x000000000040208f <+79>:    xor    %eax,%eax
   0x0000000000402091 <+81>:    xor    %ecx,%ecx
   0x0000000000402093 <+83>:    nopl   0x0(%rax,%rax,1)
   0x0000000000402098 <+88>:    movaps %xmm3,%xmm0
   0x000000000040209b <+91>:    add    $0x1,%rcx
   0x000000000040209f <+95>:    movlps (%rdi,%rax,1),%xmm0
   0x00000000004020a3 <+99>:    movhps 0x8(%rdi,%rax,1),%xmm0
   0x00000000004020a8 <+104>:   movhlps %xmm0,%xmm1
   0x00000000004020ab <+107>:   cvtps2pd %xmm0,%xmm2
   0x00000000004020ae <+110>:   cvtps2pd %xmm1,%xmm0
   0x00000000004020b1 <+113>:   movlpd %xmm2,(%rsi,%rax,2)
   0x00000000004020b6 <+118>:   movhpd %xmm2,0x8(%rsi,%rax,2)
   0x00000000004020bc <+124>:   movlpd %xmm0,0x10(%rsi,%rax,2)
   0x00000000004020c2 <+130>:   movhpd %xmm0,0x18(%rsi,%rax,2)
   0x00000000004020c8 <+136>:   add    $0x10,%rax
   0x00000000004020cc <+140>:   cmp    %rcx,%rdx
   0x00000000004020cf <+143>:   ja     0x402098 <f_to_d+88>
   0x00000000004020d1 <+145>:   cmp    %r9,%r8
   0x00000000004020d4 <+148>:   lea    (%rsi,%r9,8),%rsi
   0x00000000004020d8 <+152>:   lea    (%rdi,%r9,4),%rdi
   0x00000000004020dc <+156>:   je     0x40210d <f_to_d+205>
   0x00000000004020de <+158>:   mov    %r9,%rdx
   0x00000000004020e1 <+161>:   mov    %r9,%rax
   0x00000000004020e4 <+164>:   neg    %rdx
   0x00000000004020e7 <+167>:   lea    (%rsi,%rdx,8),%rcx
   0x00000000004020eb <+171>:   lea    (%rdi,%rdx,4),%rdx
   0x00000000004020ef <+175>:   nop
   0x00000000004020f0 <+176>:   movss  (%rdx,%rax,4),%xmm0
   0x00000000004020f5 <+181>:   cvtps2pd %xmm0,%xmm0
   0x00000000004020f8 <+184>:   movsd  %xmm0,(%rcx,%rax,8)
   0x00000000004020fd <+189>:   add    $0x1,%rax
   0x0000000000402101 <+193>:   cmp    %rax,%r8
   0x0000000000402104 <+196>:   ja     0x4020f0 <f_to_d+176>
   0x0000000000402106 <+198>:   repz retq 
   0x0000000000402108 <+200>:   xor    %r9d,%r9d
   0x000000000040210b <+203>:   jmp    0x4020de <f_to_d+158>
   0x000000000040210d <+205>:   nopl   (%rax)
   0x0000000000402110 <+208>:   retq 
```

任何人都可以阐明浮动->双转换的幕后情况吗？也许如何编写它来获得更有效的组装？如果这很重要，我正在使用 gcc 4.6.3。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T23:36:02.603

你所说的“怪物”实际上看起来像[自动矢量化代码](http://en.wikipedia.org/wiki/Vectorization_%28parallel_computing%29)。在这种技术开始运作良好并在通用编译器中有用之前，已经进行了 20 年的研究。

它可能不漂亮，但 GCC 实现者认为长数组会更快。如果您的数组实际上并不长，或者如果您无法忍受编译后的代码看起来像这样的想法，请禁用该特定优化。编译`-O2`应该这样做（未尝试）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-26T23:35:21.293

这里有几件事我可以很快看到（代码有点长，时间有点晚，而且我不是 AT&T 语法的粉丝）。

首先，第二个循环被矢量化（但很糟糕，见下文）。这本质上会导致一些代码膨胀——它现在必须处理比向量短的“尾端”等。

其次，float to double 是一种扩大的转换。这对标量无关紧要，但是对于向量，这意味着您不能只读取一些数据，对其进行转换并将其写回 - 在某些地方，您最终会得到双倍的字节数，并且必须处理它们和。（因此`movhlps %xmm0,%xmm1`）

实际的循环仅从 402098h 跨越到 4020cfh，下面是“尾部处理”，上面是一个怪物，测试它是否完全跳过主循环以及一些我还没有完全弄清楚的东西 - 它会让感觉它是否是为了对齐，但我看不到任何`test rdi, 15`' 在那里，也没有任何明显的东西可以摆脱不对齐的开始。

第三，海湾合作委员会是跛脚的。这并不罕见。似乎认为 xmm3 以某种方式参与其中，但事实并非如此，而且似乎忘记了向量可以从内存中一次性加载*到*测试对齐，这是它对未对齐指针的防御。无论如何，GCC 在这里做得不好。

# iphone - CAShapeLayer cornerRadius 不适用于 UIBezierPath

> ID：12134608
> 
> 赞同：0
> 
> 时间：2012-08-26T23:00:58.550
> 
> 标签：iphone, objective-c, ios

大家好，下面的代码制作了一个带有深色边框的灰色小矩形。角落收音机不工作，我不知道为什么，我尝试应用 maskToBounds = true，但这只是隐藏了整个对象......

我怎样才能做到这一点？谢谢

```
CGRect r = CGRectMake(conX, conY, 220, 50);
    UIBezierPath* conPath = [UIBezierPath bezierPathWithRect:r];
    CAShapeLayer* conLayer = [CAShapeLayer layer];
    conLayer.path = conPath.CGPath;
    conLayer.cornerRadius = 5.0;
    UIColor *bg = [UIColor colorWithWhite:1 alpha:0.7];
    [conLayer setFillColor:bg.CGColor];
    [conLayer setStrokeColor:[UIColor grayColor].CGColor];
    [[self layer] addSublayer:conLayer]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T23:25:16.307

更新：

您可以简单地使用`UIBezierPath( roundedRect: CGRect, cornerRadius: CGFloat).CGPath`来创建您的圆形矩形路径

* * *

我建议改用圆形矩形路径：

```
CGRect r = { .size = { 220.0f, 50.0f } } ;

CAShapeLayer * layer = [ CAShapeLayer layer ] ;
layer.path = CGPathCreateRoundRect( r, 5.0f ) ; 
```

`CGPathCreateRoundRect()`在哪里

```
CGPathRef CGPathCreateRoundRect( const CGRect r, const CGFloat cornerRadius )
{
    CGMutablePathRef p = CGPathCreateMutable() ;

    CGPathMoveToPoint( p, NULL, r.origin.x + cornerRadius, r.origin.y ) ;

    CGFloat maxX = CGRectGetMaxX( r ) ;
    CGFloat maxY = CGRectGetMaxY( r ) ;

    CGPathAddArcToPoint( p, NULL, maxX, r.origin.y, maxX, r.origin.y + cornerRadius, cornerRadius ) ;
    CGPathAddArcToPoint( p, NULL, maxX, maxY, maxX - cornerRadius, maxY, cornerRadius ) ;

    CGPathAddArcToPoint( p, NULL, r.origin.x, maxY, r.origin.x, maxY - cornerRadius, cornerRadius ) ;
    CGPathAddArcToPoint( p, NULL, r.origin.x, r.origin.y, r.origin.x + cornerRadius, r.origin.y, cornerRadius ) ;

    return p ;
} 
```

# c++ - 类对象未使用 fsream 从文本文件中读取

> ID：12134609
> 
> 赞同：1
> 
> 时间：2012-08-26T23:01:15.093
> 
> 标签：c++, class, fstream

嗨，我遇到了 fstream 变量的问题。我的电影课无法从文本文件中读取信息：

这是输出：

```
-858993460 Ì -858993460 -858993460 -9.25596e+061 -858993460 -858993460
-858993460 Ì -858993460 -858993460 -9.25596e+061 -858993460 -858993460
-858993460 Ì -858993460 -858993460 -9.25596e+061 -858993460 -858993460
-858993460 Ì -858993460 -858993460 -9.25596e+061 -858993460 -858993460
-858993460 Ì -858993460 -858993460 -9.25596e+061 -858993460 -858993460
-858993460 Ì -858993460 -858993460 -9.25596e+061 -858993460 -858993460
-858993460 Ì -858993460 -858993460 -9.25596e+061 -858993460 -858993460
-858993460 Ì -858993460 -858993460 -9.25596e+061 -858993460 -858993460 
```

它应该产生：

```
 110 8.3 2005 275523 A 140 Batman begins
 123 8.2 1965 45515 W 132 For a Few Dollars More
 181 8.1 1946 17648 R 172 The Best Years of Our Lives
 30 8.6 1946 103101 D 130 it's a Wonderful Life
 77 8.3 1952 56368 C 103 Singin' in the Rain
 88 8.3 1995 245089 A 177 Braveheart
 45 8.5 2001 185124 C 122 Amelie
 48 8.5 1962 80746 V 216 Lawrence of Arabia 
```

输入文本是：

```
 110 8.3 2005 275523 A 140 Batman begins
 123 8.2 1965 45515 W 132 For a Few Dollars More
 181 8.1 1946 17648 R 172 The Best Years of Our Lives
 30 8.6 1946 103101 D 130 it's a Wonderful Life
 77 8.3 1952 56368 C 103 Singin' in the Rain
 88 8.3 1995 245089 A 177 Braveheart
 45 8.5 2001 185124 C 122 Amelie
 48 8.5 1962 80746 V 216 Lawrence of Arabia
 -1 
```

在这一点上，我很难理解它为什么会这样做。我正在使用 MS VS2008。

这是代码：

```
#include "movieType.h"
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
movieType movie[9];
ifstream inFile("movie1.txt");

int i =0;

bool notDone=true;
while (notDone) 
{ 
    if (movie[i++].readMovieInfo(inFile)== false)
        notDone=false;    
}

for (int i=0;i<8;++i)
{
    movie[i].printMovieInfo("printList.txt");
}

return 0;
} 
```

和类规范

```
#include <string>
//include preprocessor directive to give access to string operations

class movieType
{
public:
    movieType();
    //Function: Class constructor
    //Precondition: none
    //Postcondition: instance variable initialized

    ~movieType();
    //Function: class destructor
    //Precondition: object has been initialized
    //Postcondition: memory allocated to class object freed up

    bool readMovieInfo(std::ifstream&);
    //Function: reads one movie at one time from a file
    //Precondition: object has been initialized
    //Postcondition: return false if the rank is <1 else return true

    void printMovieInfo(char*);
    //Function:prints one movie at a time to a file
    //Precondition: object has been initialized
    //Postcondition: none

    char getGenre();
    //Function: returns the movie genre
    //Precondition:object has been initialized
    //Postcondition: none

    int getRank();
    //Function: returns the movie rank
    //Precondition: object has been initialized
    //Postcondition: none

    bool operator>=(movieType) const;
    //Function: overload operator for '<=' for use in heap
    //Precondition: object has been initialized
    //Postcondition:none

    bool operator>(movieType) const;
    //Function: overload operator for '<' for use in heap
    //Precondition: object has been initialized
    //Postcondition:none

private:
    int rank; //movie ranking
    double weight; //calculated wieght for ranking
    int year; //year the movie was released
    int votes; //number of votes 
    char genre; //movie genre
    int length; //movie length in minute
    std::string name; //the name of the movie

}; 
```

和类实现：

```
#include "movieType.h"
//preprocessor directive gives access to movieType class
#include <fstream>
//preprocessor directive gives access fstream operations
#include <string>
//preprocessor directive gives access string operations

using namespace std;
// make fstream and string operations available without calling class std

movieType::movieType()
{
}

movieType::~movieType()
{
}

bool movieType::readMovieInfo(ifstream& inFile)
{
    inFile>>rank>>weight>>year>>votes>>genre>>length;
    getline(inFile,name);

    if (rank < 1)
        return false;
    else
        return true;
}

void movieType::printMovieInfo(char* outFileName)
{
std::ofstream outFile;
if(!outFile.is_open()) 
    outFile.open(outFileName, std::ios::app);
outFile<<name<<" "<<year<<" "<<genre<<" "<<length<<" "<<rank;
outFile<<" "<<weight<<" "<<year<<" "<<votes<<std::endl;

}
int movieType::getRank()
{
return rank;
}

char movieType::getGenre()
{
return genre;
}

bool movieType::operator >=(movieType other) const
{
if (rank >= other.rank)
    return true;
else
    return false;
}

bool movieType::operator >(movieType other) const
{
if (rank > other.rank)
    return true;
else
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:26:40.823

您的代码中的问题是以下行：

```
ifstream inFile("movie1.txt"); 
```

基本上，您从未检查过文件是否已成功打开。

尝试以下，并告诉我它输出什么：

```
if (!inFile)
{
    std::cout << "Could not open file" << std::endl;
    return 1;
} 
```

我敢打赌，它会告诉您文件无法打开。

此外，要检查读取是否成功，请执行以下操作：

```
if(!(inFile>>rank>>weight>>year>>votes>>genre>>length))
{
     // Something went wrong
} 
```

但是，最好将其分解一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:16:04.533

最可能的情况是流读取失败，在这种情况下，所有`movieType`实例都将未初始化。您应该检查流中的错误并适当地处理它们，即`if (inFile.fail()) { ... }`或只是`if (!inFile)`.

所以基本上你正在打印未初始化（即随机）的内存。

**C++ 中的 IOStream 操作符通常不会抛出异常，进行手动错误检查绝对至关重要。**

[请参阅此回复](https://stackoverflow.com/questions/8488937/istream-extraction-operator-how-to-detect-parse-failure)以获取有关该主题的良好文章。

# mercurial - 如何让 hg log 在我的时区显示提交时间戳

> ID：12134624
> 
> 赞同：3
> 
> 时间：2012-08-26T23:04:54.420
> 
> 标签：mercurial

`hg log`默认情况下显示提交时区的提交时间戳。是否可以让它显示特定时区的时间戳？

理想情况下，解决方案不需要任何外部工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T23:12:52.647

```
hg log --template "{date|localdate|rfc822date}\n" 
```

所以你取日期，将其转换为本地并根据 rfc822 格式化

# php - 使用 Tumblr API PHP 发布 Photoset

> ID：12134626
> 
> 赞同：0
> 
> 时间：2012-08-26T23:05:17.920
> 
> 标签：php, api, set, tumblr, photos

我正在尝试将多张照片上传到 Tumblr 的照片集帖子中。我正在使用 PHP 连接到 Tumblr 并进行身份验证。我可以发布个人照片和视频，但似乎无法找出照片集。Stack 上还有其他帖子可以帮助除 PHP 之外的其他语言。

我有一个照片目录。我获取这些文件的内容并使用 scandir 将它们放入一个数组中。但是当我尝试将该数组发布到 Tumblr 时，它不起作用。

```
$scanned_directory = array_diff(scandir($directory), array('..', '.')); 
```

> $connection->post("blog/$hostname/post", array('type' => 'photo', 'state' => $dest, 'link' => $sourceurl, 'source' => $sourceurl, 'caption' => $caption, 'tags' => $tags, 'data' => $scanned_directory));

我究竟做错了什么？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:28:47.850

我认为您应该迭代 $scanned_directory 变量并确保您不只将路径和文件名提交给 Tumblr API，而是使用 file_get_contents() 提交图像文件的实际内容，一个工作示例可能看起来像这样：

```
foreach($scanned_directory as $filename){
    $data[] = file_get_contents($directory.'/'.$filename);
}
$connection->post("blog/$hostname/post", array('type' => 'photo', 'state' => $dest, 'link' => $sourceurl, 'source' => $sourceurl, 'caption' => $caption, 'tags' => $tags , 'data' => $data)); 
```

这应该可以解决问题，只需确保 $directory 变量实际上是图像目录的绝对路径（例如'/var/www/myhost.tld/public/images/photoset'）

# objective-c - 将图像导出到 Instagram - iPhone

> ID：12134630
> 
> 赞同：4
> 
> 时间：2012-08-26T23:06:24.860
> 
> 标签：objective-c, ios, cocoa-touch, instagram

我有一张图片，我想将其导出到 Instagram，以便发布。

我正在使用的代码是：

```
NSURL *instagramURL = [NSURL URLWithString:@"instagram://location?id=1"];
if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) {
    NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"Image.igo"];

    UIImage *image = [UIImage imageNamed:@"01.png"];

    NSData *imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:YES];        
    NSURL *imageUrl = [NSURL fileURLWithPath:savedImagePath];
    NSLog(@"%@",imageUrl);
    UIDocumentInteractionController *docController = [[UIDocumentInteractionController alloc] init];        
    docController.delegate = self;
    docController.UTI = @"com.instagram.exclusivegram";
    docController.URL = imageUrl;
    //[docController setURL:imageUrl];
    [docController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES]; 
} 
```

当我运行该应用程序时，该应用程序显示写有“Instagram”图标的按钮，但是当我触摸它时，该按钮消失了，没有任何反应。该应用程序没有崩溃，但什么也没发生。

我在代码中遗漏了什么？

问候布鲁诺

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:42:39.937

我猜问题是你没有保留`UIDocumentInteractionController`. 在你的课堂上为它制作一个 ivar。

确保`documentInteractionController:didEndSendingToApplication:`在委托上调用该方法。

另请查看 Instagram 文档：http: [//instagram.com/developer/iphone-hooks/](http://instagram.com/developer/iphone-hooks/)

> 触发后，Instagram 将立即向用户展示我们的过滤屏幕。该图像已为 Instagram 预加载和调整大小。除了使用上述适当的图像格式外，我们唯一的要求是图像至少为 612 像素高和/或宽。为获得最佳效果，Instagram 更喜欢打开 612 像素 x 612 像素正方形的 JPEG。如果图像较大，它将动态调整大小。

要验证是否安装了 Instagram，请检查 URL `instagram://app`。该 URL`instagram://location?id=LOCATION_ID`仅用于位置供稿！

# ruby-on-rails - Rails：根据条件更改表单方法

> ID：12134631
> 
> 赞同：0
> 
> 时间：2012-08-26T23:06:42.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个 Rails 应用程序，我有一个表单，我想根据条件更改方法（:put vs :post）`params[id].to_s.present?`：. 这是我的尝试，但无论我做什么，我都会遇到各种错误：

```
<%= form_tag( country_pend_create_path(), "#{params[:id].to_s.present? ? ':method => :put' : ':method => :post'}", :class => 'form-horizontal') do %> 
```

知道我知道`form_for()`自动执行此目的，但我不能也不想`form_for()`用于此表格。关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:33:45.220

你可以简单地写成：

```
<%= form_tag( country_pend_create_path(), :method => params[:id].present? ? :put : :post, :class => 'form-horizontal') do %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:53:53.370

尝试使用[lambda](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-lambda)：

```
<%= form_tag( country_pend_create_path(), :method => lambda { params[:id].present? ? :put : :post }, :class => 'form-horizontal') do %> 
```

（我删除了，`to_s`因为我认为它不会改变任何东西，如果它很重要，请将其添加回来。）

# php - 获取先前 Codeigniter AR 查询的行数

> ID：12134639
> 
> 赞同：0
> 
> 时间：2012-08-26T23:07:47.950
> 
> 标签：php, mysql, codeigniter, pagination

我正在使用 Codeigniter 编写一个 Web 应用程序，它允许用户输入查询参数，然后吐出结果。

对于分页，我传递了一个限制和偏移量（非常标准的东西），并且可以基于它返回结果，但是，我无法传回在不使用 LIMIT 和 OFFSET 参数的情况下将返回的总数或记录.

我的问题：是否可以使用 Codeigniters AR 语法传递先前查询返回的总行数？

我尝试了以下几种变体，但（充其量）能够返回项目表中所有记录的计数（使用 count_all_results）。我觉得我在这里遗漏了一些东西。

```
if (isset($brand)) {$this->db->where('brand', $brand);}
if (isset($color)) {$this->db->where('color', $color);}
$items = $this->db->get('items', $page, $offset)->result_array();
$rowcount = $this->db->count_all_results('items);    
return array('items' => $items, 'row_count' => $rowcount); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:15:27.160

是的，

```
if (isset($brand)) {$this->db->where('brand', $brand);}
if (isset($color)) {$this->db->where('color', $color);}

$query = $this->db->get('items', $page, $offset);
$items = $query->result_array();
$rowcount = $query->num_rows();

return array('items' => $items, 'row_count' => $rowcount); 
```

# php - 在返回函数中添加 php 短代码

> ID：12134645
> 
> 赞同：1
> 
> 时间：2012-08-26T23:09:41.390
> 
> 标签：php, wordpress, function, shortcode

我有这部分代码：

```
return '<img class="myimage '.$text_color.' '.$horizontal.$slide_fitscreen.'" src="'.$image.'" alt="" '.$slide_desc.' />'; 
```

我想要做的是还返回一个 php 短代码，但不在内部`<img>`，因为我的短代码生成一个元素，所以我需要在**img**`<a>`之后返回它

 **这是我的简码：

```
<?php echo do_shortcode('[gallery]'); ?> 
```

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:15:13.113

你的意思是这样的：

```
return '<img class="myimage '.$text_color.' '.$horizontal.$slide_fitscreen.'" src="'.$image.'" alt="" '.$slide_desc.' />'.do_shortcode('[gallery]'); 
```**

# c# - 使用单例模式时如何处理未分配的属性

> ID：12134647
> 
> 赞同：1
> 
> 时间：2012-08-26T23:10:02.420
> 
> 标签：c#

我基于单例模式创建了以下类：

```
public sealed class UTrans
{
    private static volatile UTrans _instance;
    private static readonly object syncRoot = new Object();
    private UTrans(){}

    private static UTrans Instance
    {
        get
        {
            if (_instance == null)
            {
                lock (syncRoot)
                {
                    if (_instance == null)
                        _instance = new UTrans();
                }
            }
            return _instance;
        }
    }
} 
```

在这个类中，我创建了一个枚举属性和字符串属性

```
 private static MethodType _method; // Alphabectic 1 - 50
    public static MethodType Method
    {
        get {  return _method; }
        set { _method = value; }
    }
    private static string _uName;
    public static string UserName
    {
        get { return _uName; }
        set { _uName = value; }
    } 
```

我也有一些方法在这个类中有一些参数。当我在代码中调用类实例时，如果用户为属性赋值；将使用这些值。否则，将使用作为参数传递的值。

通过检查属性上的空值，这在 UserName 属性的情况下可以正常工作：

```
var un = UserName ?? user; 
```

但是，我无法对枚举属性执行相同的检查，因为如果未分配一个值，该属性似乎会自动假定枚举的第一个值。

我试图通过将枚举的第一个值分配为“未指定”来规避这个问题。然后我可以继续编写这样的代码：

```
var processMethod = TranslateMethodType(Method) == "Unspecified" ? method : Method; 
```

其中 TranslateMethodType 是将选定的枚举转换为等效字符串值的私有方法。

我不相信这是解决这个问题的最优雅的方法，并且希望得到一些关于这个问题的可能替代方案的反馈。

有没有办法检查类的用户是否没有为 MethodType 属性设置值，而不必添加“未指定”值作为第一个值，因为该值仅作为指示没有值的方式存在放？

显然，如果用户决定使用该值，则情况可能并非如此，并且以这种方式构造代码会产生不良结果。

可以将枚举方法标记为可空吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:17:10.177

> 可以将枚举方法标记为可空吗？？？

是的。

```
public Nullable<MyEnum> Bob(){
    //stuff
}

var bob = Bob() ?? MyEnum.Default; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T23:21:08.410

是的，您可以使`Method`字段/属性为空。

```
private static MethodType? _method; // Alphabectic 1 - 50
public static MethodType? Method
{ 
    get {  return _method; } 
    set { _method = value; }
} 
```

然后你可以做

```
var processMethod = Method == null ? method : Method.Value; 
```

或者

```
var processMethod = Method.HasValue ? Method.Value: method; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T23:19:26.463

您可以将其标记为可为空，但是您遇到的是预期行为。

作为引用类型成员的值类型被初始化为 0。这就是为什么您应该始终为枚举提供值 0。如果您不这样做，那么您班级的用户将永远不会知道该班级的状态无效。

# scala - Scala：路径相关类型的等价性

> ID：12134650
> 
> 赞同：5
> 
> 时间：2012-08-26T23:10:27.460
> 
> 标签：scala, path-dependent-type, scala-macros

我如何解决两个我知道是相同但编译器不一样的路径相关类型的等价？

使用 Scala 2.10.0 M7 我正在尝试将 AST 从一个宇宙转换为另一个。

```
case class MacroBridge(context: Context) {
  def toMacroTree(tree: treehugger.forest.Tree): context.universe.Tree = ???
  def fromMacroTree(tree: context.universe.Tree): treehugger.forest.Tree = ???
} 
```

在宏实现中，我可以将其用作：

```
val bridge = treehugger.MacroBridge(c)
def fromMacroTree(tree: c.universe.Tree): Tree = bridge.fromMacroTree(tree) 
```

但是，这会导致编译器错误：

```
[error] /scalamacros-getting-started/library/Macros.scala:21: type mismatch;
[error]  found   : c.universe.Tree
[error]  required: bridge.context.universe.Tree
[error]  possible cause: missing arguments for method or constructor
[error]     def fromMacroTree(tree: c.universe.Tree): Tree = bridge.fromMacroTree(tree) 
```

上面代码`c`中的值显然与 相同`bridge.context`，但可能是因为它是一个值类型检查器，无法检查它。放置广义类型约束没有帮助：

```
def fromMacroTree[A](tree: A)(implicit ev: A =:= context.universe.Tree): Tree = 
```

在宏中，这仍然导致错误：

```
[error] /scalamacros-getting-started/library/Macros.scala:21: Cannot prove that c.universe.Tree =:= bridge.context.universe.Tree.
[error]     def fromMacroTree(tree: c.universe.Tree): Tree = bridge.fromMacroTree(tree) 
```

我需要访问权限，`context.universe`以便可以访问其他依赖类型，例如`TermName`. 除了铸造之外还有更好的解决方法吗？

```
def fromMacroTree(tree: c.universe.Tree): Tree =
  bridge.fromMacroTree(tree.asInstanceOf[bridge.context.universe.Tree]) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T23:48:37.933

我可以使以下工作：

```
case class MacroBridge[C <: Context](context: C) {
  def fromMacroTree(tree: context.universe.Tree): context.universe.Tree = ???
}

trait MB {
  def meth(c: Context) {
    val bridge = MacroBridge[c.type](c)
    def fromMacroTree(tree: c.universe.Tree): c.universe.Tree =
      bridge.fromMacroTree(tree)
  }
} 
```

前段时间我遇到了几乎[同样的问题。](https://stackoverflow.com/questions/11612198/macros-path-dependent-type-inference-confusion)

# php - 使用 PHP 和 JavaScript 读取 blob 数据

> ID：12134658
> 
> 赞同：1
> 
> 时间：2012-08-26T23:11:58.687
> 
> 标签：php, javascript, mysql, blob

我有一个应用程序，允许用户通过 Web 界面将一些文本数据保存到 MYSQL 数据库中。此外，他们还可以将文件附加到此文本，我将其保存到 blob 字段中。附加的文件类型是简单的 .txt 文件。

我能够将这些数据保存到数据库中，但我无法检索它。这就是我现在正在做的检索它：

```
//Events that take place when trying to retreive an attached file
function getFile(rowid){

    //Make an AJAX Request to fetch the file
    $.ajax({
        type: 'get',
        url: 'point-of-contact.php',
        data: 'page=attachment&row='+rowid,
        dataType: 'text',
        success: function(data) {
                console.log (data);
        }
    });
} 
```

上面的 AJAX 请求会导致以下 PHP 代码：

```
$attachments = $poc -> getPOC($_GET['row']);
header('Content-type: text/plain');
echo $attachments; 
```

我面临的问题是，当我控制台记录从 AJAX 请求接收到的数据时，我得到以下信息：

![在此处输入图像描述](../Images/79861965530580d68c0984ce9ead18a5.png)

如何以简单文本格式获取数据？

难道是我将文件上传到数据库的方式不正确？这是文件上传到数据库的方式：

```
 //File upload code
    var fileInput = document.getElementById('upload');
    var file = fileInput.files[0];

    //Hide the save button
    $("#save-button-1").hide(); 

    //Make the AJAX request
    $.ajax({
        type: 'post',
        url: 'point-of-contact.php?page=add',
        data: 'point_of_contact=' + $("#textarea1").val() + '&point_of_contact_attachment=' + file,
        success: function(data) {
            $('#done-1').show();
            setTimeout(function() {
                $('#done-1').fadeOut();
            }, 2500);
                $('.loader').fadeOut();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:31:56.420

您的上传部分有问题。线

```
var file = fileInput.files[0]; 
```

将文件对象分配给`file`变量。稍后，当您将其添加到

```
"point_of_contact_attachment=" 
```

它被转换为字符串。所以你会有

“point_of_contact_attachment=[目标文件]”

就是这样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-26T23:32:17.323

尝试将浏览器直接指向文件而不是使用 ajax。像这样

```
document.location = point-of-contact.php?page=attachment&row='+rowid; 
```

由于它不是浏览器可以读取的文件，它只会下载它。

但是，您仍然需要通过 ajax 获取 TXT，因为 document.location 会将用户重定向到纯文本页面。

# jquery - 如何删除谷歌地图api 3的折线

> ID：12134661
> 
> 赞同：2
> 
> 时间：2012-08-26T23:13:02.037
> 
> 标签：jquery, google-maps-api-3

有人能告诉我为什么我不能用这段代码删除我的折线：

```
 $("#chkRouteLines").click(function () {

    var polyline = new google.maps.Polyline({
        path: positions,
        strokeColor: "#FF0000",
        strokeOpacity: 1.0,
        strokeWeight: 2,
        visible: true
    }); ;

    if ($(this).is(':checked')) {
        polyline.setMap(map);
    } else {
        polyline.setMap(null);
    }
}) 
```

我在 google maps api 3 的文档中发现了我需要做的：setMap(null).. 但这不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T00:00:13.963

您没有保留对折线的引用，它是 "$("#chkRouteLines").click" 函数的本地引用。如果您有*一条*折线，请对其进行全局引用。

```
var polyline = null; // in the global scope

$("#chkRouteLines").click(function () {
    if (!polyline || !polyline.setMap) {
      polyline = new google.maps.Polyline({
        path: positions,
        strokeColor: "#FF0000",
        strokeOpacity: 1.0,
        strokeWeight: 2,
        visible: true
      }); 
    }

if ($(this).is(':checked')) {
    polyline.setMap(map);
} else {
    polyline.setMap(null);
} 
```

[工作小提琴](http://jsfiddle.net/jk1bdth3/)

如果您需要添加和删除多条不同的折线，通常可以使用数组。

代码片段：

```
var geocoder;
var map;
var polyline;

positions = [new google.maps.LatLng(37.441883,-122.143019),
             new google.maps.LatLng(37.45296,-122.181725)];
function initialize() {
    var map = new google.maps.Map(
    document.getElementById("map_canvas"), {
        center: new google.maps.LatLng(37.4419, -122.1419),
        zoom: 13,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    $("#chkRouteLines").click(function () {
        if (!polyline || !polyline.setMap) {
          polyline = new google.maps.Polyline({
            path: positions,
            strokeColor: "#FF0000",
            strokeOpacity: 1.0,
            strokeWeight: 2,
            visible: true
          }); 
        }

    if ($(this).is(':checked')) {
        polyline.setMap(map);
    } else {
        polyline.setMap(null);
    }
})

}
google.maps.event.addDomListener(window, "load", initialize);
```

```
html, body, #map_canvas {
    height: 90%;
    width: 100%;
    margin: 0px;
    padding: 0px
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js"></script>
<div id="map_canvas" style="border: 2px solid #3872ac;"></div>
<input id="chkRouteLines" value="click" type="checkbox" />
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T07:03:09.743

polyline 只是一个 LatLng 对象的数组，而不是单独的 Polylines。我认为您可能需要一个单独的折线数组，然后您可以循环删除它们。创建一个全局数组线。

```
 var line = [];
 polyline = new google.maps.Polyline({
        path: positions,
        strokeColor: "#FF0000",
        strokeOpacity: 1.0,
        strokeWeight: 2,
        map: map
    });
 line.push(flightPath); 
```

现在您将所有折线对象推入阵列线。您可以通过像这样循环使其不可见或将其从地图中删除：

```
for (i=0; i<line.length; i++) 
{                           
  line[i].setMap(null); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-21T15:52:29.630

在示例[Remove a Polyline Google Example](https://developers.google.com/maps/documentation/javascript/examples/polyline-remove)中，看到他们创建了全局变量并在函数中使用对象`flightPath`初始化它。`Polyline`这样我们就不会在单击按钮时丢失它的引用。因此，通过使用代码 `flightPath.setMap(null);`隐藏`Polyline`from `map`。

`polyline`在您的示例中，您正在对事件进行初始化`click`，因此您覆盖了以前的`Polyline`对象引用，这就是为什么当您调用`polyline.setMap(null);`按照给定示例使其正确时它没有隐藏的原因。

# excel - 如何将 excel 中的结构化引用转换为范围？

> ID：12134663
> 
> 赞同：1
> 
> 时间：2012-08-26T23:13:24.130
> 
> 标签：excel

我有一个包含标题列的表。我希望能够将结构化引用转换`[Column 2]`为 range`B1:B1000`和`Table1[[#Data],[Column2]]`range `B2:B1000`。

编辑上下文：

这是在公式编辑器中，因此结构化引用引用当前工作表中的表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:50:22.790

这将为您提供地址：

```
Activesheet.Range("Table1[[#Data],[Column2]]").Address() 
```

这将为您提供范围本身的参考

```
Dim rng As Range
Set rng = Activesheet.Range("Table1[[#Data],[Column2]]") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:19:50.767

在表格选项中，您可以选择*转换为范围*选项，这会将公式中的结构化引用更改为范围引用，然后您可以选择插入表格来恢复表格。为了简化公式，您可以使用查找和替换，例如`Sheet1!`和`$`空白。

# c# - .NET 签名字符串使用 openssl_public_decrypt 验证 RSA 签名失败

> ID：12134664
> 
> 赞同：0
> 
> 时间：2012-08-26T23:13:25.690
> 
> 标签：c#, php, openssl, rsa, rsacryptoserviceprovider

我正在尝试将 X509Certificate2 和 RSACryptoServiceProvider 与 PHP OpenSSL 命令一起使用来实现双向相互安全。

从 PHP 向 C# 发送消息似乎一切都很好，.NET 服务器上的 RSACryptoServiceProvider 可以使用它自己的私钥解密消息并使用 PHP 服务器的公钥验证签名。

但反过来说，.NET 到 PHP，使用“openssl_public_decrypt”来验证 .NET 服务器的签名会造成麻烦。它只是返回假。'openssl_private_decrypt' 可以很好地使用 PHP 服务器的私钥解密加密数据。

我使用 openssl（.key 和 .crt）为两台服务器创建了 RSA（2048）自签名证书，然后创建了一个 .pfx 以用作 .NET 代码中的私钥。

我想知道这里有什么问题。我在 .NET 和 PHP 服务器上都使用默认设置进行加密/解密。当您使用 .pfx 加密某些内容时，加密/解密机制是否不同？或者 openssl_public_decrypt 是否期望与 RSACryptoServiceProvider 给你的加密不同？

任何帮助都会很棒，因为我不确定问题出在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:34:15.297

openssl_public_decrypt 对公钥的格式非常了解，并且不支持与 openssl_private_decrypt 一样多的填充方案。

我的建议：使用[phpseclib，一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)。一个例子：

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->loadKey('...'); // public key

$plaintext = '...';

$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);
$ciphertext = $rsa->encrypt($plaintext);

$rsa->loadKey('...'); // private key
echo $rsa->decrypt($ciphertext);
?> 
```

它支持比 OpenSSL 更多的密钥格式，从 XML 签名格式的密钥到 PuTTY 密钥等。

# jquery-chosen - jQuery Chosen.js - 如何在多选中搜索？

> ID：12134665
> 
> 赞同：7
> 
> 时间：2012-08-26T23:13:39.350
> 
> 标签：jquery-chosen

我正在使用一个名为 Chosen 的 jquery 插件。我看到它有一个可用于单选的搜索选项，有人知道在使用多选的情况下如何启用它吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-26T23:23:53.093

选择的搜索适用于多项选择。检查他们网站上的示例 [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

如果您要问，如何使用它，这里是示例： Html 代码：

```
<select multiple class="chzn-select"> 
```

Javascript代码：

```
$('.chzn-select').chosen(); 
```

它已经完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T18:57:15.537

For others who may be looking for a live demo there is a great fiddle: [http://jsfiddle.net/RVH8D/](http://jsfiddle.net/RVH8D/) which shows a simple implementation of chosen and includes images in the results list.

If you want a multiple change

```
<select...> 
```

to

```
<select... multiple="true"> 
```

# c - 我在哪里可以了解如何编程串行/终端接口？

> ID：12134669
> 
> 赞同：0
> 
> 时间：2012-08-26T23:14:02.827
> 
> 标签：c, terminal, serial-port, microcontroller, gnu-screen

我有一个项目要在微控制器上进行。我计划让它通过 USB 串行连接与我的计算机连接。我尝试进行类似的基本测试`putc(getc())`，但我无法让它按预期运行。

有了这个简单的硬件回声，很多事情都行不通。当我按下回车时，我只是得到一个回车。退格键什么都不做。用于中断的 CTRL-C 也不起作用。

我使用 GNU Screen 作为我的终端模拟器。我如何学习如何处理所有这些（以及 stty 设置），以便我可以在我的微控制器上创建一个有用的命令界面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:49:02.480

您将需要知道您`Screen terminal`正在模拟的终端类型，以便您知道发送串行端口的代码。例如，如果您将终端设置为 VT100，您可以[查看此链接，该链接提供了一些 VT100 代码](http://wiki.bash-hackers.org/scripting/terminalcodes)

并且`gnu-screen`您可能想[检查一下，](http://www.gnu.org/software/screen/manual/screen.html#Virtual-Terminal)因为它包含您可以使用的 ESC 和控制字符串/命令的详尽列表。

# html - 交错网格系统

> ID：12134674
> 
> 赞同：0
> 
> 时间：2012-08-26T23:15:51.793
> 
> 标签：html, css, grid, 960.gs

我想在我的网站（4 列）上使用 960.gs 进行帖子布局。我喜欢它的易用性，但网格框的顶部和底部排列起来看起来很单调。代替正常的网格设计，有没有办法让它像这个网站一样更加交错？[http://bygonebureau.com](http://bygonebureau.com/)

请注意帖子的底部边距如何不对齐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:20:21.203

该特定站点使用[jQuery masonry](http://masonry.desandro.com/)来安排类似的文章。像 960 这样的网格系统不允许这样做，因为它们依赖于设置的“行”，每个行都应用了 clearfix，因此它们永远不会重叠。

我可能会建议您使用网格系统构建站点的基本布局，并简单地按照砌体中的代码示例来了解如何获得交错框效果。

# c# - 我使用 backgroundworker 调用搜索文件功能，但有时为什么会卡住？

> ID：12134675
> 
> 赞同：0
> 
> 时间：2012-08-26T23:15:57.653
> 
> 标签：c#

在顶部`Form1`我有：

```
int searchTime;
        public TimeSpan ts_timeElapsed;
        DirectoryInfo dirinf = new DirectoryInfo(@"C:\");
        List<FileSystemInfo> fsi = new List<FileSystemInfo>();
        List<string> texts = new List<string>();

        public Form1()
        {
            InitializeComponent();

            label6.Visible = false;
            searchTime = 0;
            label4.Visible = false;
        } 
```

然后我有一个按钮单击它启动`backgroundWorker`：

```
private void button1_Click(object sender, EventArgs e)
        {
            backgroundWorker1.RunWorkerAsync();
            button1.Enabled = false;
            timer1.Enabled = true;
        } 
```

然后`backgroundWorker1_DoWork`事件：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            Search(".xml", dirinf, fsi);
            backgroundWorker1.ReportProgress(100);

        } 
```

然后是`Search`功能代码：

```
public void Search(string strExtension,
                            DirectoryInfo di,
                            List<FileSystemInfo> pResult)
        {
            try
            {

                foreach (FileInfo fi in di.GetFiles())
                {
                    if (InvokeRequired)
                    {
                        BeginInvoke(new Action(() => label2.Text = fi.Name));
                    }
                    if (fi.Name == "MessageLog.xsl")
                    {
                        foreach (FileInfo fii in di.GetFiles())
                        {
                        if (fii.Extension == strExtension)
                            pResult.Add(fii);
                        }
                        if (InvokeRequired)
                        {
                            BeginInvoke(new Action(() => label4.Text = pResult.Count.ToString() + Environment.NewLine));
                        }

                    }
                }

                    foreach (DirectoryInfo diChild in di.GetDirectories())
                        Search(strExtension, diChild, pResult);

            }
            catch (Exception e)
            {
            }
        } 
```

搜索从 开始`c:\`。程序在搜索大约 5 个文件后暂停几秒钟，然后继续搜索更多文件几秒钟，然后最终冻结。即使它与后台工作人员一起工作，我也无法点击任何内容。

然后几次后，它搜索快速流畅，没有暂停或冻结。

为什么前几次搜索暂停并冻结，但后续搜索顺利进行？

# java - Java：前缀字符串的棘手排序（ArrayLists）

> ID：12134681
> 
> 赞同：5
> 
> 时间：2012-08-26T23:17:39.343
> 
> 标签：java, string, sorting, arraylist, split

（不需要任何网络知识。这纯粹是字符串和列表）。

假设我有一个函数，它接受字符串 IPv4 点分地址列表，并按升序对它们进行排序。（不按字母顺序，真正的 ip 长格式排序）。让我们称之为：

```
public static ArrayList<String> sortListOfIpv4s(ArrayList<String> unsortedIPv4s); 
```

此功能已经正常工作。给定一个输入：

```
192.168.1.1, 8.8.8.8, 4.5.6.7, 244.244.244.244, 146.144.111.6 
```

它将输出列表：

```
4.5.6.7, 8.8.8.8, 146.144.111.6, 192.168.1.1, 244.244.244.244 
```

（我们不要争论是应该修改列表还是返回一个新列表。它只是返回一个新列表。**另外，由于多种原因，无法修改函数。**）

但是，我的输入列表如下所示：

```
e192.168.1.1, f8.8.8.8, e4.5.6.7, f244.244.244.244, e146.144.111.6 
```

当我删除前缀（仅 e 或 f 之一，不必交替）并创建一个干净的数组以传递给排序函数时，我会丢失前缀信息。我想要的是以下类型的输出：

```
e4.5.6.7, f8.8.8.8, e146.144.111.6, e192.168.1.1, f244.244.244.244 
```

基本上，在排序之前，无论未排序列表中的每个元素存在什么前缀，都需要将相同的前缀添加回已排序列表中的元素。

注意事项：

*   一个 IP 地址可以在原始列表中重复，最多重复两次
*   重复两次时，两个元素中的每一个都将具有相同的前缀，保证
*   排序算法不会删除重复项。

请提供一点算法帮助？（请记住，我们已经有一个可以对干净的 IPv4 字符串数组列表进行排序的函数）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:22:33.447

在将前缀传递给排序函数之前不要删除前缀。相反，在该`sortListOfIpv4s`方法中，始终使用 比较字符串`s.substring(1)`，这将为您提供不带前缀的整个字符串，并添加`s`到生成的排序数组中。

如果`sortListOfIpv4s`是一个*黑盒*并且您需要传递无前缀字符串，那么您可以预先将前缀缓存在`Map`from 中`prefix-free IP -> prefix`：

```
Map<String, String> prefixMap = new HashMap<String, String>();
for (String ip : unsortedIPv4s) {
  prefixMap.put(ip.substring(1), ip.substring(0, 1));
} 
```

然后排序和恢复前缀`Map`：

```
List<String> sortedIPV4s = sortListOfIpv4s(unsortedIPv4s);
for (String ip : sortedIPV4s) {
  String prefix = prefixMap.get(ip);
  String originalIp = prefix + ip;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:20:43.903

您的方法可以将任何前缀移动到字符串的末尾，对列表进行排序，然后再次遍历字符串并将前缀从末尾移回开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T23:37:39.777

您可以实现比较器：

```
public class IpComparator implements Comparator<String> {
    @Override
    public int compare(String ipA, String ipB) {
        return doComparison( ipA.substring(1), ipB.substring(1) );
    }
} 
```

然后你可以使用它：

```
return Collections.sort(unsortedIPv4s, new IpComparator()); 
```

# javascript - 对多个选择框上的 selectedOptions 使用一个选项列表进行淘汰赛

> ID：12134682
> 
> 赞同：2
> 
> 时间：2012-08-26T23:17:50.160
> 
> 标签：javascript, knockout.js, knockout-2.0

[http://jsfiddle.net/E2AMX/](http://jsfiddle.net/E2AMX/)有问题的确切演示，即：我在同一页面上有多个选择框。选择框的所有选项都采用给定的形式：

```
<option value="#id_num">StringVal</option> 
```

我有一个 id_nums 的 observableArray（比如 idlist），没有关于选择框的分隔。例如，

```
idlist = ko.observableArray([1,2,3,4]); 
```

和选择框是

```
<select name="first" data-bind="selectedOptions: idlist">
    ...
    <option value="2">Blah</option>
    <option value="3">Blah</option>
    ...
</select>

<select name="second" data-bind="selectedOptions: idlist">
    ...
    <option value="1">Blah</option>
    ...
</select>

<select name="third" data-bind="selectedOptions: idlist">
    ...
    <option value="4">Blah</option>
    ...
</select> 
```

我的问题是：当我从选择框中选择一个选项时，其他选择框返回到它们的初始状态。这与 selectedOptions 直接相关，因为如果我删除 selectedOptions 指令，则不会出现此问题。

任何建议都将受到欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:34:24.890

该[`selectedOptions`](http://knockoutjs.com/documentation/selectedOptions-binding.html)绑定旨在用于`<select>`启用多选的单个标签。它将在选定的选项框中保留每个项目的数组。

您看到行为的原因是，当您从下拉列表之一中选择单个值时， selectedOptions 绑定会立即触发。逻辑是这样的：

1.  更新目标`<select>`火灾。
2.  `<option>`绑定从底层的可观察数组中提取值并更新。
3.  可观察数组触发更新，因为值已更改。
4.  辅助下拉菜单响应更新，并根据数组中的内容更新其选择的值。
5.  `<option>`由于该组标签中不存在任何值，因此该值被清除。

这就是您看到这种行为的原因。如果您想从所有选定的选项中收集一个组合，那么您将需要编写一个新的自定义绑定，或者为每个`<select>`要绑定的单独创建一个数组。

# java - 如何将元素添加到 HashMap 中的 ArrayList

> ID：12134687
> 
> 赞同：26
> 
> 时间：2012-08-26T23:20:07.833
> 
> 标签：java, data-structures

如何将元素添加到 HashMap 中的 ArrayList 中？

```
 HashMap<String, ArrayList<Item>> Items = new HashMap<String, ArrayList<Item>>(); 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2018-06-27T12:11:03.313

我知道，这是一个老问题。但只是为了完整起见，lambda 版本。

```
Map<String, List<Item>> items = new HashMap<>();
items.computeIfAbsent(key, k -> new ArrayList<>()).add(item); 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-08-27T00:02:00.793

```
HashMap<String, ArrayList<Item>> items = new HashMap<String, ArrayList<Item>>();

public synchronized void addToList(String mapKey, Item myItem) {
    List<Item> itemsList = items.get(mapKey);

    // if list does not exist create it
    if(itemsList == null) {
         itemsList = new ArrayList<Item>();
         itemsList.add(myItem);
         items.put(mapKey, itemsList);
    } else {
        // add if item is not already in list
        if(!itemsList.contains(myItem)) itemsList.add(myItem);
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-26T23:44:05.837

首先，您必须将 ArrayList 添加到 Map

```
ArrayList<Item> al = new ArrayList<Item>();

Items.add("theKey", al); 
```

然后您可以将一个项目添加到 Map 内部的 ArrayLIst 中，如下所示：

```
Items.get("theKey").add(item);  // item is an object of type Item 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-26T23:51:06.447

典型的代码是创建一个显式方法来添加到列表中，并在添加时动态创建 ArrayList。注意同步，所以列表只创建一次！

```
@Override
public synchronized boolean addToList(String key, Item item) {
   Collection<Item> list = theMap.get(key);
   if (list == null)  {
      list = new ArrayList<Item>();  // or, if you prefer, some other List, a Set, etc...
      theMap.put(key, list );
   }

   return list.add(item);
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-05-27T06:32:59.623

```
#i'm also maintaining insertion order here
Map<Integer,ArrayList> d=new LinkedHashMap<>();
for( int i=0; i<2; i++)
{
int id=s.nextInt();
ArrayList al=new ArrayList<>();
al.add(s.next());  //name
al.add(s.next());  //category
al.add(s.nextInt()); //fee
d.put(id, al);
 } 
```

# google-chrome-extension - 如何在 chrome 扩展中实现日志记录功能

> ID：12134696
> 
> 赞同：5
> 
> 时间：2012-08-26T23:21:09.390
> 
> 标签：google-chrome-extension

我正在开发一个扩展并且需要记录——不像基于控制台的记录，而是传统意义上的日志文件（扩展监视某些事件并将它们记录到文件系统）。

首先，我尝试了文件系统 API 调用。一般来说，这似乎是正确的 API，但问题是我需要向我的扩展程序的用户提供生成的日志文件的操作系统级路径，而我看不到这样做的方法。我可以找到物理沙盒文件（在 中`~/Library/Application Support/Google/Chrome/Default/File System/003/p/00/00000000`），但我不确定如何以编程方式获取该值（也不知道是否应该）。

我还尝试了`FileSaver.js`Eli Gray 的实现（使用 Blob 和`saveAs()`）。这确实让我可以将文件保存到文件系统（并指定文件名），但是每次都需要写入整个文件，对于日志文件显然不是一个好主意。

有没有更好的方法来完成我的要求？我知道 NPAPI 还有其他答案，但我没有使用它的技能和构建基础设施。

谢谢！

# java - GWT - 在 RPC 服务调用期间获取会话

> ID：12134698
> 
> 赞同：3
> 
> 时间：2012-08-26T23:21:28.893
> 
> 标签：java, google-app-engine, session, gwt, servlets

我尝试在第一次调用 RPC 服务期间获取会话信息。

```
public class MyServiceImpl extends RemoteServiceServlet implements
MyService {

    public MyServiceImpl() {
        HttpServletRequest req = getThreadLocalRequest();
        // req = null here
    }
} 
```

客户端，我打了一个简单的电话：

```
MyServiceAsync service = GWT.create(MyService.class); 
```

在第一次 RPC 调用期间获取 HttpServletRequest 是否有替代解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:27:59.167

您正在调用`getThreadLocalRequest()`servlet 的构造函数，该构造函数仅在 servlet 初始化时调用一次。当时该请求不可用。

您需要覆盖`processCall(String)`在每次 RPC 调用时调用的方法。

```
public class MyServiceImpl extends RemoteServiceServlet implements MyService {

    @Override
    public String processCall( String payload ) {
        HttpServletRequest req = getThreadLocalRequest();
        HttpSession session = req.getSession();
    }
} 
```

# php - 转换查询以处理键值列

> ID：12134702
> 
> 赞同：0
> 
> 时间：2012-08-26T23:22:02.420
> 
> 标签：php, mysql, sql

我需要帮助更新此查询：

```
$query = sprintf(
   "SELECT 
        lat, 
        lng, 
        ( 
            3959 * acos( cos( radians('%s') ) * 
                         cos( radians( lat ) ) * 
                         cos( radians( lng ) - radians('%s') ) + 
                         sin( radians('%s') ) * 
                         sin( radians( lat ) ) 
                       ) 
        ) AS distance 
    FROM 
        markers 
    HAVING 
        distance < '%s' 
    ORDER BY 
        distance LIMIT 0 , 20" 
```

具有如下表结构：

```
lat        | lng
23.0324234 | -103.0324234 
```

对于我可以从表中的键、值列结构中获取的查询，如下所示`shipping_lat`：`shipping_long`

```
meta_key      | meta_value
shipping_lat  | 23.0324234
shipping_long | -103.0324234 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:30:50.860

将以下内容用作您加入主查询（或类似查询）的子查询？

```
SELECT t1.meta_value AS lat, t2.meta_value AS lng
FROM   meta_table t1 JOIN meta_table t2
WHERE  t1.meta_key = 'shipping_lat'
   AND t2.meta_key = 'shipping_long' 
```

那是：

```
SELECT 
    lat, 
    lng, 
    ( 
        3959 * acos( cos( radians('%s') ) * 
                     cos( radians( lat ) ) * 
                     cos( radians( lng ) - radians('%s') ) + 
                     sin( radians('%s') ) * 
                     sin( radians( lat ) ) 
                   ) 
    ) AS distance 
FROM 
    markers JOIN (
      SELECT t1.meta_value AS lat, t2.meta_value AS lng
      FROM   meta_table t1 JOIN meta_table t2
      WHERE  t1.meta_key = 'shipping_lat'
         AND t2.meta_key = 'shipping_long'
    ) AS t
HAVING 
    distance < '%s' 
ORDER BY 
    distance LIMIT 0 , 20 
```

可以通过直接加入两次（在相关 s 上）然后直接引用 s 而不是 and 来避免子查询`meta_table`，`markers`但`meta_key`我`meta_value`认为`lat`上面`lng`的内容更具可读性和更容易理解。但是，为了完整性：

```
SELECT 
    lat.meta_value, 
    lng.meta_value, 
    ( 
        3959 * acos( cos( radians('%s') ) * 
                     cos( radians( lat.meta_value ) ) * 
                     cos( radians( lng.meta_value ) - radians('%s') ) + 
                     sin( radians('%s') ) * 
                     sin( radians( lat.meta_value ) ) 
                   ) 
    ) AS distance 
FROM 
    markers
      JOIN meta_table lat ON lat.meta_key = 'shipping_lat'
      JOIN meta_table lng ON lng.meta_key = 'shipping_long'
HAVING 
    distance < '%s' 
ORDER BY 
    distance LIMIT 0 , 20 
```

# html5-canvas - 如何摆脱 HTML5 画布中的默认不透明度？

> ID：12134704
> 
> 赞同：0
> 
> 时间：2012-08-26T23:22:41.863
> 
> 标签：html5-canvas

我正在尝试在 HTML5 画布中绘制 2 条黑线：

JSFiddle： http: [//jsfiddle.net/KFNt5/](http://jsfiddle.net/KFNt5/) Javascript：

```
var canvas = document.createElement('canvas');
canvas.height = 150;
canvas.width = 150;
var canvasContext = canvas.getContext('2d');
canvasContext.beginPath();

// Draw the red line.
canvasContext.strokeStyle = '#000';
canvasContext.moveTo(10, 0);
canvasContext.lineTo(10, 100);
canvasContext.stroke();

// Draw the green line.
canvasContext.moveTo(50, 0);
canvasContext.lineTo(50, 100);
canvasContext.stroke();

document.body.appendChild(canvas);​ 
```

但是，右边的线是灰色的，这意味着它是半透明的。如何确保默认不透明度为 100（根本不透明）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:19:26.810

由于抗锯齿，第二行更轻。您可以包括以下行以确保您渲染每行一次并避免抗锯齿效果。

```
canvasContext.translate(0.5, 0.5); 
```

[http://jsfiddle.net/bagWQ/](http://jsfiddle.net/bagWQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:12:55.823

您的第一行较暗，因为您画了两次，每次调用`stroke()`. 第二次调用`stroke()`绘制两条线，因为您没有开始新路径。

# performance - 当预期输入大小很小时，Big Theta Notation 是算法效率的有效度量吗？

> ID：12134707
> 
> 赞同：1
> 
> 时间：2012-08-26T23:23:34.290
> 
> 标签：performance, algorithm, computation-theory, big-theta

我四处寻找有关 Big-Theta 的信息，我想我已经对它有了一个不错的理解。然而，问题仍然存在：当预期输入大小较小时，Big Theta Notation 是否是算法效率的有效衡量标准？

我认为当预期输入大小很小时，Big Theta Notation 不是算法效率的有效度量。首先是我对 Big Theta 的部分理解：如果函数 f(n) 是 O(n) 和 Big Omega(n)，那么它就是 Big Theta(n)。所有这些值的数学定义要求 n>n0。因此，根据我的推理，小输入大小有可能（并且很可能）小于 n0。因此，我的推理是，对于 n< n0 的值，Big Theta Notation 不是算法效率的有效度量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:27:35.073

那是对的。对于小的输入大小，运行时间可以是任何东西。例如，当对一小部分数字列表（大约 10 个元素）进行排序时，尽管运行时间是二次渐近的，但插入排序实际上是最快的算法之一。

# c# - 在任意日期和纪元时间之间经过毫秒

> ID：12134711
> 
> 赞同：1
> 
> 时间：2012-08-26T23:24:41.467
> 
> 标签：c#, datetime, date-math

如果我编写一个简单的方法来返回纪元时间和 之间的毫秒数`DateTime.UtcNow`，我会得到一个正确的答案。但是，如果我编写一个方法来返回某个任意日期和纪元时间之间的毫秒数，则最后三位数字始终为零。“某个任意日期”意味着我将 DateTime.Parse("arbitrary date string") 的输出传递给该方法。据我所知，.Parse 返回的 DateTime 对象并未返回所有有效数字。

测试方法：

```
 static void GetMillis()
        {
            DateTime dUtc = DateTime.UtcNow;
            DateTime epoch = new DateTime(1970,1,1,0,0,0,DateTimeKind.Utc);
            double utcmillis = (dUtc - epoch).TotalMilliseconds;
            String timestamp = dUtc.ToString();
            DateTime arbitrary = (DateTime.Parse(timestamp));
            Console.WriteLine("Milliseconds between DateTime.UtcNow {0} \nand epoch time {1} are {2}", dUtc, epoch, utcmillis);
            Console.WriteLine("Milliseconds between arbitrary date {0} \nand epoch time {1} are {2}", arbitrary, epoch, (arbitrary - epoch).TotalMilliseconds);
        } 
```

输出：

```
C:\src\vs\epochConverter\epochConverter\bin\Debug
{powem} [54] --> .\epochConverter.exe -debug
Milliseconds between DateTime.UtcNow 8/26/2012 11:12:31 PM
and epoch time 1/1/1970 12:00:00 AM are 1346022751385.8
Milliseconds between arbitrary date 8/26/2012 11:12:31 PM
and epoch time 1/1/1970 12:00:00 AM are 1346022751000 
```

我不知道我是在做一些奇怪的错误还是不理解这里的数学。我在 MSDN 中进行了研究，但找不到与此差异相关的任何内容。我真的很希望能够按照描述计算毫秒——这可能吗？

谢谢。

mp

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T23:29:31.080

您要检查以下中间值：

```
String timestamp = dUtc.ToString(); 
```

它返回的内容将取决于您的本地设置，但它会类似于`8/26/2012 11:12:31`，仅精确到最接近的秒数。

解析它当然会给出一个 0 毫秒的日期时间。

因此，您的毫秒自纪元方法在该点处为零是正确的。

但是，如果您做了类似的事情：

```
arbitrary = new DateTime(2012, 8, 26, 11, 12, 31, 123); 
```

你会得到影响结果的 123 毫秒。您还可以使用包含几分之一秒的 a`ToString`和 a `ParseExact`，或一系列其他获取 DateTime 的方法。

总而言之，您的毫秒数自纪元运行良好，但您获取测试日期的方式存在缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T23:29:04.770

默认`DateTime.ToString()`格式*不包括*毫秒，这是数据丢失的地方；它发生*在*`Parse`. 要获取字符串表示中的毫秒数，请使用自定义格式：

```
DateTime.UtcNow.ToString()
// -> 8/26/2012 11:37:24 PM
DateTime.Parse("8/26/2012 11:37:24 PM").Millisecond
// -> 0

DateTime.UtcNow.ToString("yyyy-MM-ddTHH:mm:ss.fffffffK") 
// -> 2012-08-26T23:41:17.3085938Z
DateTime.Parse("2012-08-26T23:41:17.3085938Z").Millisecond
// -> 308 
```

请参阅[往返 ("O", "o") 格式说明符](http://msdn.microsoft.com/en-us/library/az4se3k1%28v=vs.90%29.aspx#Roundtrip) 以键入 less。或者，在这种情况下，考虑完全避免转换:-)

数学是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T23:30:56.860

这里的数学看起来很合理。不要忘记 1 秒中有 1000 毫秒，因此从不包括毫秒的任意时间与包括毫秒的几乎相同时间的任何日期计算都会有 +/- 1000 毫秒的误差。

# asp.net-mvc - Server 2012 IIS 8 MVC 应用程序显示默认 IIS 主页或 403 / 404 错误

> ID：12134713
> 
> 赞同：83
> 
> 时间：2012-08-26T23:25:21.260
> 
> 标签：asp.net-mvc, iis-8

使用 Oracle 的免费 VirtualBox 应用程序运行 Microsoft Server 2012 RC。在 VirtualBox 设置中使用了桥接网络适配器类型。安装AD和DNS，IIS。在 IIS 选项下的管理工具下，单击管理服务框。这让我可以使用 Visual Studio 2012 RC 中的“Web Deploy”功能。在来宾操作系统上，我运行 Windows 7 Ultimate。

我能够成功地将 MVC 4 应用程序部署到 IIS 默认网站，但它没有显示。相反，默认的 IIS 主页是。我禁用了默认主页并刷新页面显示 403 页面。我尝试输入其中一个视图并显示 404 页面。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-12-17T01:58:22.923

I spent 2 days trying to find a solution to this, and finally did. Wanted to share with the community in case it helps anyone else.

All the articles and forum messages I ran across on the Internet started to mirror each other in one form or another.

One solution talked about making sure you have the right Application Pool configuration, using 4.0 framework and integrated. [x] Confirmed already set correctly.

Another solution extended direction to use "aspnet_regiis -i" or "aspnet_regiis -ir" which doesn't work on Microsoft Server 2012.

Another solution talked about adding the following to the web.config:

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true" />
</system.webServer> 
```

However, IIS 8 serves up a response to this saying something to the effect those settings are locked from a higher configuration level and can't be used at the Application level. Meh, ok.

I ultimately tracked down an article that lead me to the following page: [http://learn.iis.net/page.aspx/1097/iis-80-using-aspnet-35-and-aspnet-45](http://learn.iis.net/page.aspx/1097/iis-80-using-aspnet-35-and-aspnet-45)

The solution was to go back to the Microsoft Server 2012 Dashboard and select the "Add Roles" feature. Scroll down to the root "Web Server (IIS)", expand "Web Server", expand "Application Development" and select "ASP.NET 3.5" and "ASP.NET 4.5" and "Install".

What confused me originally was I hadn't expanded "Application Development", but selected IIS and continued. On the next step, "Features", ".NET Framework 4.5 Features" was selected by default so I selected ".NET Framework 3.5 Features" and thought all would be fine.

After installing the selections under "Application Development", the MVC 4.5 Applications work just the way they were designed. I hope this helps anyone who may have become stuck, like I was.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-23T10:17:45.323

您只需在 web config 中将编译调试模式更改为 true 并保持其他属性相同。打开您的发布文件夹并打开 Web Config 文件。

`<configuration> <compilation debug="true"> </compilation> </configuration>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T19:47:35.283

我选择了“.NET Framework 3.5 Features”，并认为一切都会好起来的！！！没有其他行动没有帮助。当这个问题“突然”出现时。有一段时间一切正常。但在下一次发布后，该应用程序运行了几分钟，然后进入错误 403.14

# java - remove() 方法太慢

> ID：12134717
> 
> 赞同：3
> 
> 时间：2012-08-26T23:25:48.560
> 
> 标签：java, list, map

我在读取内存跟踪时遇到问题。我已阅读并在地图上保存了页面及其参考

地图结构：

```
 Map<Integer, List<Integer>> map = new HashMap<>(); 
```

然后我再次读取文件并从整数列表中删除引用

```
FileReader arq = new FileReader(new File(Path));
BufferedReader reader = new BufferedReader(arq, 41943040);
while ( (std = reader.readLine()) != null ) {
        requestedPage = Integer.parseInt(std, 16);
        //do something
        M.map.get(requestedPage).remove(0));
    } 
```

问题是删除这些引用需要很长时间，而对于大的痕迹，删除引用需要几个小时。有人有其他解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T23:47:54.417

我认为如果`remove(0)`是你要在这个列表上进行的唯一删除操作，LinkedList 是一个更好的数据结构：

尝试：

```
Map<Integer, LinkedList<Integer>> map = new HashMap<Integer, LinkedList<Integer>>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T23:53:04.953

如果列表非常大，问题可能是从索引 1 到 size - 1 的所有元素都必须移动：从逻辑上讲，索引 n 处的项目被移动到索引 n-1。[如果您查看source](http://www.docjar.com/html/api/java/util/ArrayList.java.html) [，`ArrayList`](http://www.docjar.com/html/api/java/util/ArrayList.java.html)您会看到有一个 System.arrayCopy 调用来执行此操作。您报告要执行的操作所花费的时间听起来像是存在更深层次的问题，但您可以尝试使用`LinkedList`或重新设计您的算法，以便从列表末尾而不是前面删除元素。使用 a `LinkedList`，头元素被删除，其他节点都不需要修改。如果您坚持`ArrayList`但每次都删除最后一个元素而不是第一个元素，则不需要 arrayCopy。

另外，看看[Guava 的`Multimap`](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html). 它在逻辑上是`Map`带有 a`Collection`的值，就像你在这里一样，但它是一个更好的界面。Guava 库中还有许多其他令人惊叹的类，如果你还没有使用它们，你也应该检查一下！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T01:14:54.947

谢谢，我恢复了 LinkedList 并从最后删除，现在只需 4 秒即可读取跟踪。

编辑：从最后恢复和删除并没有改变结果，我犯了一个错误。只是使用 LinkedList 而不是 ArrayList 解决了我的问题。

# c# - 为什么我无法覆盖 OnWindowCreated 并且看不到 ShowOnKeyBoardInput 属性？

> ID：12134727
> 
> 赞同：2
> 
> 时间：2012-08-26T23:28:54.460
> 
> 标签：c#, xaml, microsoft-metro

```
 protected override void OnWindowCreated(WindowCreatedEventArgs args)
    {
        // Register QuerySubmitted handler for the window at window creation time and only registered once
        // so that the app can receive user queries at any time.
        SearchPane.GetForCurrentView().QuerySubmitted += new TypedEventHandler<SearchPane, SearchPaneQuerySubmittedEventArgs>(OnQuerySubmitted);
    } 
```

似乎无法覆盖 onWindowCreated 我什至在 App.xaml.cs 的覆盖智能感知上都没有看到它。我在这里错过了什么吗？我下载了一个示例搜索合同应用程序。有人知道我错过了什么吗？

连这部分都不见了

```
 SearchPane.GetForCurrentView().ShowOnKeyboardInput = true;
        SearchPane.GetForCurrentView().ShowOnKeyboardInput = false; 
```

ShowOnKeyboardInput 不存在。

为什么我无法**覆盖 OnWindowCreated**并且看不到**ShowOnKeyBoardInput 属性**？

更新：[http ://code.msdn.microsoft.com/windowsapps/Search-app-contract-sample-118a92f5/view/Discussions](http://code.msdn.microsoft.com/windowsapps/Search-app-contract-sample-118a92f5/view/Discussions)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:58:31.820

App.xaml 不是窗口，并且不从 Window 继承。您需要将此代码放在窗口中才能正常工作。

编辑：实际上框架中的任何内容都没有我可以看到的 OnWindowCreated 覆盖。这是 C# 的示例吗？您可以发布示例的链接吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:19:45.277

我发现了问题所在。

OnWindowCreated 方法在 Windows 8 RTM 版本中实现。因此，如果您仍然遇到此问题，请升级您的 Windows。

# algorithm - 递归查找从 0 到 n 中的个数

> ID：12134731
> 
> 赞同：1
> 
> 时间：2012-08-26T23:29:13.373
> 
> 标签：algorithm, language-agnostic, recursion

我必须创建一个递归函数，以递归方式查找从 0 到 n 的个数。

所以 f(16) = 9

(1,10,11,12,13,14,15,16)

这显然是家庭作业，所以如果你没有发布任何代码，我将不胜感激，只是它背后的原因。

到目前为止，我的推理是，如果你对一个数字进行 %10，它会告诉你最低有效位是否为 1，如果你将整数除以 10，你就会失去那个数字。

所以我猜这个方法可以是检查`if number%10 == 1`然后用 f(n/10) 调用函数，但是我在实际的实现中迷失了方向。

如果您能评论您将使用哪种方法，我将不胜感激，它必须是递归的，因为它是家庭作业，程序方法是微不足道的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:42:18.667

对于这些类型的问题，我发现编写某种显示模式的图表很有帮助。例如，如果按十数，您知道第一组 (0-9) 包含一个 1。

(0-9) -- 1
(10-19) -- 11
(21-29) -- 1
| | -- 1
(100-109) -- 11
(110-119) -- 21
(120-129) -- 11
| | -- 11
(200-209) -- 1
(210-219) -- 11
(220-229) -- 1
| | -- 1
...
(1000-1009) 等...

这可能需要一段时间，但这将帮助您找到模式，以便您提出更系统的答案。我不想给你*太多*帮助，因为这是一个家庭作业问题，但这是我在解决创造性数学问题时采用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T23:39:10.580

你的方法是完全正确的。对于每个数字，您都需要一个以十进制表示形式返回“个数”的函数。对此的递归表示（请注意，您也可以迭代地执行此操作）。

像所有递归函数一样，您需要您的最终状态捕获，即，如果输入 = 0 返回 0。除此之外（不完全放弃）您只需将当前结果添加到子结果：

```
 if number==0
     return 0
 if number%10==1
     return myFunc(number/10) + 1
 else
     return myFunc(number/10) 
```

但是，正如我之前所说，没有必要使用递归。迭代解决方案在这里可能更好，因为该函数相对于位数是线性的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T23:45:08.900

你的问题有两个部分。

1.  在 number 中找到个数。
2.  在所有小于它（但大于零）的数字中找到一个数。

第一部分：

如果最右边的数字是 1，则`number % 10 == 1`. 如果数字 > 9，您需要检查其他数字，您可以通过对整数除以 10 后的数字进行相同的测试来做到这一点。如果数字 <= 9，那么这会给你零。

所以你的 OnesInNumber 函数有点像：

1.  如果数字 == 0，则返回 0。
2.  否则调用 OnesInNumber on `number / 10`。
3.  如果`number % 10 == 1`将该结果加 1。
4.  返回结果。

例如，当`1`被调用时给你，，，，，当被调用时给你`10`，等等。`1``12``303212``2``11`

你的 OnesInZeroUntil 函数就像：

1.  如果数字 <= 0，则返回 0。
2.  否则调用 OnesInZeroUntil on `number - 1`。
3.  添加`OnesInNumber(number)`到此。
4.  返回结果。

所以你有一个递归函数可以计算出一个数字`1`中的个数，另一个递归函数可以计算出`1`每个数字中的个数，直到那个数字，建立在第一个函数的基础上。

如果您没有要求我们不这样做，这足以编写一个快速的 2 个函数。

（提示：如果你的老师还没有要求它，看看你是否可以在没有递归的情况下解决这个问题。每个递归函数都可以重写为非递归形式，这是一项实用技能这样做有些人教递归似乎没有涵盖）。

# multithreading - DLL注入和创建线程错误

> ID：12134732
> 
> 赞同：0
> 
> 时间：2012-08-26T23:29:17.587
> 
> 标签：multithreading, dll, code-injection

我对 DLL 注入和创建线程有一些问题。所以我只是将我的 DLL 附加到某个进程，并且在 DLL 的主函数中我试图创建线程。我尝试了几种方法`boost::thread::join()`，`std::thread::join()`（加入目标应用程序后挂起）`CreateThread(...)`，`_beginthread()`-我的目标应用程序正在崩溃。请告诉我，为什么我在注入后无法启动线程？（DLL注入成功，启动线程后出现这个问题）请问有没有办法解决这个问题？

我应该去哪里寻找？

平台win32、MSVC++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:06:47.510

不要在你的机器上做任何可怕的事情，`DllMain`因为它在加载器锁被持有时运行。您可能会摆脱 call `CreateThread`，但线程甚至不会在`DllMain`返回之前启动。

# java - Java Classpath 让我发疯（找不到我的类）

> ID：12134735
> 
> 赞同：1
> 
> 时间：2012-08-26T23:30:38.777
> 
> 标签：java, classpath, classloader, manifest

好的，所以我有以下文件树：

```
<appfolder>
- MyApp.jar
- lib/
-    log.jar
-    someother.jar
-    someother.jar
-    someother2.jar
- config.properties
- otherfiles.extension 
```

我已经尝试了几十种方法来启动这个应用程序。MyApp 包含以下内容

```
MANIFEST.MF:
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.7.0_06-b24 (Oracle Corporation)
Main-Class: myapp.Main
Class-Path: MyApp.jar lib/* 
```

如果我调用**java -jar MyApp.jar**它总是说 lib/log.jar 中的所有类都无法加载。

这是我尝试过的组合的一部分：

```
- *.jar lib/*
- *.jar lib/*.jar
- *.jar ./lib/*.jar
- ./*.jar lib/*.jar
- *.jar ./lib/*.jar
- tbc 
```

没有任何效果。Java 总是告诉我它在 lib/log.jar 中找不到类

我的下一个尝试是通过命令行指定类路径。

`java -cp "MyApp.jar:lib/*" myapp.Main`

但即使这样也行不通。在这种情况下，Java 说它找不到 myapp.Main 类。

我想我做错了什么，因为我发现的方法都没有奏效。如果我将 lib/log.jar 中的类放入 myApp.jar 并启动它，它将起作用。但这不可能是解决方案。

有任何想法吗？

**编辑：** 我不想命名每一个 lib jar。我只想让 ClassLoader 在 ClassPath 中搜索所需的类。我已经看过很多次了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:38:23.580

对于 Linux，您应该能够执行以下操作：

`java -cp MyApp.jar:lib:someotherjar.jar myapp.Main`

您可以（可选！）对包含“main”的 .jar 使用“-jar”，或者可以将路径和 jar 文件（具有*限定路径名*的 .jar 文件）的任意组合添加到类路径中。

这是[Java文档](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/solaris/classpath.html)

这是一个[更好的解释](http://en.wikipedia.org/wiki/Classpath_%28Java%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-05T23:06:51.627

我有同样的问题。

> 默认的类路径是当前目录。设置 CLASSPATH 变量或使用 -classpath 命令行选项会覆盖该默认值，因此如果要将当前目录包含在搜索路径中，则必须在新设置中包含一个点 (.)。

[甲骨文文档](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/classpath.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T23:35:17.340

通过系统变量或通过将 lib 目录添加到您的类路径

```
SET CLASSPATH=%CLASSPATH%;MYAPP/LIB;. 
```

然后做一个`java -jar MyApp.jar`

# javascript - 设置 dataTransfer.dropEffect 对 IE9 没有影响

> ID：12134739
> 
> 赞同：5
> 
> 时间：2012-08-26T23:31:35.593
> 
> 标签：javascript, drag-and-drop, internet-explorer-9

在*dragEnter*和*dragOver*处理程序中设置*dataTransfer.dropEffect在***Internet Explorer 9**中似乎不起作用。无论值是什么，光标似乎仅由在*dragStart期间设置的**dataTransfer.effectAllowed*值决定。

 *****在下面的示例中，您将通过在 IE9 中的“MOVE”或“COPY”上选择并拖动“DRAG ME”来获得“复制”光标（带加号的箭头）。

[http://jsfiddle.net/aHDWL/](http://jsfiddle.net/aHDWL/)

```
function fnDragOnDefault()
{
  var oEvent = window.event;
  oEvent.returnValue = false;

  var oData = window.event.dataTransfer;
  oData.dropEffect = "move";
} 
```

如果您切换回**IE8 文档模式**（您可以为此使用 F12），则**dropEffect 设置将起作用**，并且两个框上的光标将不同。

有什么修复/解决方法吗？

谢谢 ！*****

# php - 如何在php中包含带有密码变量的随机盐

> ID：12134740
> 
> 赞同：0
> 
> 时间：2012-08-26T23:31:47.150
> 
> 标签：php, passwords, password-protection, salt

我有一个 pssword 变量，其中包含用户的密码，该密码在密码的开头和结尾包含一些搅拌，以便对密码进行加盐。下面是这个的代码：

```
$teacherpassword = md5(md5("j92".$teacherpassword."djS")); 
```

显然，为密码加盐的字符将是所有密码的相同字符。

我想要的是创建一个随机字符生成器，​​以便盐的前 3 个字符和最后 3 个字符都是随机的，因此每个密码都有一个随机盐。

下面是创建随机挑选盐的字符的 php 生成器：

```
$salt = ""; 
for ($i = 0; $i < 40; $i++) { 
   $salt .= substr(
     "./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", 
     mt_rand(0, 63), 
     1); 
} 
```

我的问题是，如何让生成器为盐挑选 6 个随机字符，然后将其中 3 个字符放在密码前面，将另外 3 个字符放在密码末尾？

例如：

密码 1 可以是：$teacherpassword = md5(md5("jfs".$teacherpassword."sfS"));
密码 2 可以是：$teacherpassword = md5(md5("4f3".$teacherpassword.pS"));
密码 3 可以是：$teacherpassword = md5(md5("wpw".$teacherpassword."qq2"));

正如您所看到的，所有密码都包含自己的盐，这要归功于盐的 php 随机生成器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:34:13.253

一个非常简单的解决方案是使用[`substr()`](http://php.net/manual/en/function.substr.php)

> **substr** — 返回字符串的一部分

```
$randomSalt = "abcdef";

$preSalt = substr($randomSalt, 0,3); // abc
$postSalt = substr($randomSalt, 3,3);  // def

$password = md5(md5($preSalt.$teacherpassword.$postSalt)); 
```

* * *

对您的另一项建议是使用 PHP 的[`uniqueid()`](http://php.net/manual/en/function.uniqid.php)函数为您的密码生成随机盐。

> **uniqid** — 生成唯一 ID

# asp.net - 水晶报表重用时抛出错误

> ID：12134743
> 
> 赞同：0
> 
> 时间：2012-08-26T23:33:33.980
> 
> 标签：asp.net, visual-studio-2010, c#-4.0, crystal-reports, crystal-reports-2010

我以编程方式绑定到我的水晶报表查看器，例如

```
DataTable orderDtSrc = GetDataFromdb(txtOrderNo.Text);     
rptViewer.ReportSource = new ReportDocument();
                if (orderDtSrc != null)
                {
                    ReportDocument report = new ReportDocument();
                    report.Load(Server.MapPath("Design/MyReport.rpt"));
                    report.SetDataSource(orderDtSrc);
                    report.SummaryInfo.ReportTitle = "Report No-" + orderDtSrc.Rows[0]["OrderNumber"].ToString();
                    rptViewer.ReportSource = report;
                    rptViewer.DataBind();
                } 
```

因此，它将获取`GetDataFromdb(txtOrderNo.Text);`数据，并通过用户提供的订单号获取数据。

第一次调用它将获取报告并毫无问题地绑定查看器然后如果我在文本框中输入一个新的订单号然后单击调用前一个函数的显示报告按钮我得到了这个异常。

```
Value cannot be null. Parameter name: inputString 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:58:09.713

检查这个

```
 if (orderDtSrc != null  && orderDtSrc.Rows.Count >0) 
```

# jquery - 制作一个简单的 jQuery 滑块

> ID：12134747
> 
> 赞同：7
> 
> 时间：2012-08-26T23:34:12.457
> 
> 标签：jquery

我正在尝试自学 javascript/jquery，所以我为自己设置了一个项目来为我的网站创建一个非常基本的滑块。使用 Codeacademy 和 jQuery API 库，我已经熟悉了代码，但很难掌握语法。因此，我来​​这里是通过拼写检查我的努力来寻求帮助。

这是代码：

CSS：

```
#wrapper { width: 500px; height:300px; display: block; overflow: hidden; }
#slider {width: 1500px; clear: both; margin-left:0;}
.content {float: left; width: 500px; height: 300px; display: block; background:grey;} 
```

HTML：

```
<div id="wrapper">
    <div id="slider">
        <div class="content"><p>blah</p></div>
        <div class="content"><p>blah</p></div>
        <div class="content"><p>blah</p></div>
    </div>
</div>

<button id="left">left</button>
<button id="right">right</button> 
```

最后：

```
$#left.click(function {
if ($('#slider').css('margin-left').between(0,-1500)) {
    $('#slider').animate({
        margin-left : "+=500"
    }, 500);
});

}
} 
```

当单击按钮时，这意味着将包含图像的 1500 像素宽的 div 移动 500 像素。滑块位于具有 500 像素宽度和隐藏溢出的容器 div 中。if 语句是为了确保 div 在到达容器 div 的末尾后不会继续向左移动

我非常感谢任何可以帮助解决这个相当自私的请求的人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:36:53.407

这是您的 js 代码，其中修复了上述语法错误以及其他一些阻止您的代码正常运行的错误。

```
$('#left').click(function(){
    if ($('#slider').css('margin-left') <= '0px' && $('#slider').css('margin-left') >= '-1500px') {       
    $('#slider').animate({
            "margin-left" : "+=500"
        }, 500);
    };
}); 
```

注意：我已经从您的代码中删除了 .between() 函数，因为我在任何地方都找不到关于此的任何文档。如果你有这个功能的参考，我很乐意看到它。目前，我已将其替换为简单的值比较。

这是您的代码工作的 jsfiddle：http: [//jsfiddle.net/ghCX6/2/](http://jsfiddle.net/ghCX6/2/)

# javascript - 为什么在这种情况下要添加两个指向 JQuery 的链接

> ID：12134749
> 
> 赞同：1
> 
> 时间：2012-08-26T23:34:35.093
> 
> 标签：javascript, jquery, jquery-plugins, css-transitions

我在 Javascript 和 JQuery 方面的经验为零，但我在本文档中都使用过。

第一个是为 IE 提供 CSS3 过渡的支持，取自[CSS3 Hover Transition](http://louisremi.github.com/jquery.transition.js/test/index.html)。使用的代码是

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.js"></script>
<script type="text/javascript" src="scripts/jquery.hoverTransition.js"></script> 
```

第二个用于幻灯片库，取自[幻灯片库](http://www.twospy.com/galleriffic/)，代码为

```
<script type="text/javascript" src="scripts/jquery-1.3.2.js"></script>
<script type="text/javascript" src="scripts/jquery.galleriffic.js"></script>
<script type="text/javascript" src="scripts/jquery.opacityrollover.js"></script> 
```

可以看出，前 CSS3 过渡链接到 jquery 1.6.1，而后来的幻灯片库链接到 jquery 1.3.2。我必须参考这两个文件吗？

我尝试删除一个链接和另一个链接，但是如果删除了其中一个链接，CSS3 Hover Transitions 和 Slideshow Glaeery 都不起作用。此外，如果我将上述内容放在我的 head 元素中，它们将不起作用。它们只有在我将它们放在页脚之后和正文元素之前的底部时才有效。

以下是我的头标签。（用于幻灯片库）

```
<!-- We only want the thunbnails to display when javascript is disabled -->
<script type="text/javascript">
document.write('<style>.noscript { display: none; }</style>');
</script> 
```

以下是底部。（用于幻灯片库）

```
 <script type="text/javascript">
        jQuery(document).ready(function($) {
            // We only want these styles applied when javascript is enabled
            $('div.navigation').css({'width' : '300px', 'float' : 'left'});
            $('div.content').css('display', 'block');

            // Initially set opacity on thumbs and add
            // additional styling for hover effect on thumbs
            var onMouseOutOpacity = 0.67;
            $('#thumbs ul.thumbs li').opacityrollover({
                mouseOutOpacity:   onMouseOutOpacity,
                mouseOverOpacity:  1.0,
                fadeSpeed:         'fast',
                exemptionSelector: '.selected'
            });

            // Initialize Advanced Galleriffic Gallery
            var gallery = $('#thumbs').galleriffic({
                delay:                     5500,
                numThumbs:                 15,
                preloadAhead:              10,
                enableTopPager:            true,
                enableBottomPager:         true,
                maxPagesToShow:            7,
                imageContainerSel:         '#slideshow',
                controlsContainerSel:      '#controls',
                captionContainerSel:       '#caption',
                loadingContainerSel:       '#loading',
                renderSSControls:          true,
                renderNavControls:         true,
                playLinkText:              'Play',
                pauseLinkText:             'Pause',
                prevLinkText:              'Previous',
                nextLinkText:              'Next',
                nextPageLinkText:          'Next &rsaquo;',
                prevPageLinkText:          '&lsaquo; Prev',
                enableHistory:             false,
                autoStart:                 true,
                syncTransitions:           true,
                defaultTransitionDuration: 900,
                onSlideChange:             function(prevIndex, nextIndex) {
                    // 'this' refers to the gallery, which is an extension of $('#thumbs')
                    this.find('ul.thumbs').children()
                        .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
                        .eq(nextIndex).fadeTo('fast', 1.0);
                },
                onPageTransitionOut:       function(callback) {
                    this.fadeTo('fast', 0.0, callback);
                },
                onPageTransitionIn:        function() {
                    this.fadeTo('fast', 1.0);
                }
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:58:52.553

将两个不同版本的 jQuery 放在同一个页面中是复杂且不可取的。您的第一个目标是完全避免这种情况——您宁愿在页面中只使用较新版本的 jQuery。

因此，您的首要任务是对您正在使用的 jQuery 插件进行一些研究，看看它们是否都适用于通用版本的 jQuery。

如果您确定它们都可以使用通用版本的 jQuery，那么只需将 jQuery 包含在您的页面中的插件之前，并将插件包含在使用它们的代码之前。jQuery 代码可以放在 HEAD 部分或 BODY 部分，只要它位于任何尝试使用它的东西之前。插件代码可能在 jQuery 代码之后的任何地方，但您必须查阅插件文档以确保。

如果您确定必须拥有两个不同版本的 jQuery，那么您需要弄清楚如何去做。这是一个有关如何完成的相关问题：[我可以在同一页面上使用多个版本的 jQuery 吗？](https://stackoverflow.com/questions/1566595/can-i-use-multiple-versions-of-jquery-on-the-same-page).

当使用 jQuery 的两个版本时，您最终必须使用`jQuery.noConflict()`(not`jQuery`和 not `$`) 定义一个表示特定 jQuery 版本的唯一符号，然后使用该插件的所有代码都必须使用该唯一符号。

# unit-testing - 使用 Mocha 测试主干视图

> ID：12134752
> 
> 赞同：0
> 
> 时间：2012-08-26T23:35:23.360
> 
> 标签：unit-testing, testing, backbone.js, mocha.js

我有一个简单的主干视图和一个用 Mocha 编写的简单单元测试。

查看代码：

```
var MyView = Backbone.View.extend({
el: '#myDiv',
initialize: function(options) {
  if(options.model)
    this.model = options.model;
  }
}); 
```

我的测试代码：

```
var view;
describe('myView Test', function(){
  before(function(done){
    view = new MyView();
  });
}); 
```

当我尝试创建新视图时，我收到；

```
Application View "before all" hook:
TypeError: Expecting a function in instanceof check, but got #myDiv
at backbone.js line 1203 
```

我不太确定这里缺少什么，有什么见解吗？

谢谢你，萨卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T01:42:08.637

我在这里看到了一些问题。

首先，正如@Aron-Woost 提到的，您让 before 钩子异步运行。如果这是你想要做的，你需要`done();`在钩子结束时调用，否则你会得到一个超时错误。如果要同步运行钩子，请不要将`done`参数传递给函数。

接下来，当您在`before all`钩子中初始化视图时，您不会传递选项对象参数。没有这个应该会导致您的主干视图出现错误。由于`options`没有被传入，因此您应该在`if`语句中遇到错误`Cannot read property 'model' of undefined`。很容易解决这个问题，作为空对象传递，`{}`所以你有这样的东西：`view = new MyView({});`.

不确定您是如何产生上面列出的确切错误的。您是否为这个问题提供了所有代码？

# antlr - antlr displayRecognitionError

> ID：12134755
> 
> 赞同：1
> 
> 时间：2012-08-26T23:35:46.963
> 
> 标签：antlr, antlr3

在 java 中使用 antlr 3

我无法在此处从令牌中打印文本：

```
@lexer::members {

    public void displayRecognitionError(String[] tokenNames, RecognitionException e) {
        System.err.println("Encountered an illegal char " + getText() + " on line "+getLine()+":"+getCharPositionInLine ());
    }

} 
```

我正在为词法分析器语法制作更详细的错误报告。

问题是当错误发生时（用户输入一个`:`未定义的令牌）它只显示`"Encountered an illegal char on line x:y"`，而不是它应该显示`:`char 和行 x:y 之间的无效字符。

如何显示无效字符、行和列？

# c - “C 编程语言”中的字符计数器未按预期工作

> ID：12134756
> 
> 赞同：9
> 
> 时间：2012-08-26T23:36:00.647
> 
> 标签：c, character

我正在阅读“The C Programming Language”，并使用 CodeBlocks 完成所有练习。但是我无法让我的角色计数器起作用，尽管它是直接从书中复制的。代码如下所示：

```
#include <stdio.h>

main(){
    long nc;

    nc = 0;

    while (getchar() != EOF)
        ++nc;
    printf("%ld\n", nc);
} 
```

当我运行程序时，它会打开一个我可以输入的窗口，但是当我按下 Enter 键时，它会跳过一行，我可以继续输入，但我认为它应该打印字符数。

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T23:43:20.733

这一行：

```
while (getchar() != EOF) 
```

意味着它会一直读取直到输入结束——*而不是*直到一行的结尾。（`EOF`是一个特殊的常量，意思是“文件结束”。）您需要结束输入（可能使用 Ctrl-D 或 Ctrl-Z）才能查看输入的字符总数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T23:46:08.230

如果要在 EOL（行尾）终止，请将 EOF 替换为 '\n'：

```
#include <stdio.h>

main(){
    long nc;

    nc = 0;

    while (getchar() != '\n')
        ++nc;
    printf("%ld\n", nc);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T23:43:40.410

输入不是EOF。根据您的操作系统，Ctrl-D 或 Ctrl-Z 应该在标准输入上充当 EOF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-15T14:39:17.530

我今晚也遇到了这个问题。最后发现Linux上的Ctrl-D有效。您使用 cc 构建源文件，然后启动程序并输入一个单词，然后在完成输入后按两次 Ctrl-D。程序计数的数字将打印在您刚刚键入的单词后面，程序立即终止。像这样：[![在此处输入图像描述](../Images/7655cf31a54d77ebdc15cbc0b70482d0.png)](https://i.stack.imgur.com/E8NbM.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-03T05:35:20.340

nujabse提供的上述答案是正确的。但是最近我自己遇到了这个问题并研究了答案，我想补充一下原因。

使用 Ctrl+C 告诉终端向当前前台进程发送一个 SIGINT，默认情况下这意味着终止应用程序。

Ctrl+D 告诉终端它应该在标准输入上注册一个 EOF，bash 将其解释为想要退出。

[^C 和 ^D 有什么区别](https://superuser.com/a/169055/471062)

# c++ - 为什么一个空的无限循环会占用我的整个 CPU？

> ID：12134757
> 
> 赞同：3
> 
> 时间：2012-08-26T23:36:01.317
> 
> 标签：c++, performance

我在 C++ 中运行一个简单的无限循环：

```
int main() {
  for (;;) {}
} 
```

当我编译并运行它时，程序消耗了我 100% 的 CPU。为什么会这样？我在 Macbook Pro 上使用 g++ 4.7。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T23:38:43.420

CPU 尽可能快地运行给定的代码。如果没有其他有趣的事情发生，操作系统将尽可能多地为需要它的进程提供 CPU 时间。如果您要同时运行*其中两个*进程，它们将分别获得大约 50% 的 CPU 时间。（请注意，如果您有多个内核，用于描述 CPU 使用率的术语会有点模糊，就像几乎所有现代 CPU 一样。如果您有一个四核系统，上述循环将占用一个内核的 100%，即 25 ％ 全面的。）

不执行 I/O（或以其他方式等待任何外部操作）的计算绑定程序都以相同的方式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:00:22.787

如果您快速浏览一下程序集，您会看到：

```
.L2:
    jmp     .L2
    .cfi_endproc 
```

所以编译器生成了一个跳转指令。CPU 只是按照它的指示去做：跳来跳去。您可能会问为什么编译器会生成此代码。

复制：

```
gcc -S test.c -o test.s; more test.s 
```

# wordpress - WordPress 中的错误代码：{"code":0,"url":""}

> ID：12134760
> 
> 赞同：1
> 
> 时间：2012-08-26T23:36:49.523
> 
> 标签：wordpress

我的 WordPress 网站停止在我的投资组合中显示图像。当 O 登录 CP 时，我在很多地方都看到了这个错误`{"code":0,"url":""}`，比如：加载官方 wp 提要时，尝试添加块时，尝试添加图像或编辑页面时。

你有什么建议吗？我在没有任何解决方案的情况下进行了谷歌搜索。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:01:26.967

您可能想尝试将其添加到`.htaccess`文件顶部，我遇到了同样的问题，这解决了它：

```
## 过期缓存##

过期活动在
ExpiresByType image/jpg "访问 1 年"
ExpiresByType image/jpeg "访问 1 年"
ExpiresByType image/gif "访问 1 年"
ExpiresByType image/png "访问 1 年"
ExpiresByType text/css "访问 1 个月"
ExpiresByType 申请/pdf “访问 1 个月”
ExpiresByType text/x-javascript "访问 1 个月"
ExpiresByType application/x-shockwave-flash "访问 1 个月"
ExpiresByType image/x-icon "访问 1 年"
ExpiresDefault "访问 2 天"

## 过期缓存##
```

这也应该有助于将来的页面加载！这些文件类型将被缓存，以提高未来更快的加载时间。

希望有帮助。此外，如果雅虎还可以，除非您开始遇到相同的错误，否则请不要这样做。

# magento - 如何在保存配置值后立即检索它们

> ID：12134761
> 
> 赞同：0
> 
> 时间：2012-08-26T23:36:51.007
> 
> 标签：magento, configuration, controller

我正在使用 system.xml 文件将新部分添加到我的 Magento 安装中`app/code/local/NameSpace/Module/etc/system.xml`。我已经读到您可以创建一个`IndexController`并覆盖`postAction()`，但是在我看到的所有示例中，使用的是自定义布局而不是 system.xml，是否有这样做的原因，或者可以让控制器同时为它们工作？

如果他们不能在用户单击“保存配置”后运行文件，那么我可以立即开始使用这些值`Mage::getStoreConfig()`吗？

# ruby-on-rails - 使用引导程序和简单表单时，Flash 消息被错误命名

> ID：12134762
> 
> 赞同：0
> 
> 时间：2012-08-26T23:36:56.450
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form

我不确定为什么会发生这种情况，但是当我在我的 rails 应用程序中成功提交表单时，它会在我成功的 flash 消息中添加一个错误的 div 类。我正在将此代码用于我的 Flash 消息：

```
<% flash.each do |name, msg| %>
   <div class="alert alert-<%= name == :notice ? "success" : "error" %>">
      <a class="close" data-dismiss="alert">&#215;</a>
      <%= content_tag :div, msg, :id => "flash_#{name}" if msg.is_a?(String) %>
   </div>
<% end %> 
```

这正是 Ryan Bates 在这个 rails cast 中建议的做法：

[http://railscasts.com/episodes/329-more-on-twitter-bootstrap?view=asciicast](http://railscasts.com/episodes/329-more-on-twitter-bootstrap?view=asciicast)

该代码有什么问题？如果我简单地这样做，它就可以正常工作：

```
<% flash.each do |name, msg| %>
  <div class="alert alert-<%= name %>">
    <a class="close" data-dismiss="alert">&#215;</a>
    <%= content_tag :div, msg, :id => "flash_#{name}" if msg.is_a?(String) %>
  </div>
<% end %> 
```

但这似乎不是正确的方法。我不明白为什么 railscast 中建议的代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:29:41.060

据我记得，`flash`有时包含空元素。`flash`在迭代之前检查你是否有东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:50:44.473

当您在控制器中创建闪存消息时，您可以使用字符串`'notice'`而不是符号。`:notice`尝试在您的中添加这些行，`application.html.haml`以查看您从 Flash 消息中得到什么

```
- if Rails.env.development?
  = debug(params) 
  = debug(flash) unless flash.empty? 
```

# python - Python - 如何将嵌套列表拆分为更多列表？

> ID：12134764
> 
> 赞同：1
> 
> 时间：2012-08-26T23:37:08.430
> 
> 标签：python, list, nested-lists

我有一个与此类似的嵌套列表，并按时间升序排序：

```
[[TIME, 'b', 0],
[TIME, 'b', 1],
[TIME, 'b', 1],
[TIME, 'b', 1],
[TIME, 'b', 10],
[TIME, 'b', 0],
[TIME, 'b', 1],
[TIME, 'b', 1],
[TIME, 'b', 10],
[TIME, 'b', 0],
[TIME, 'b', 1],
[TIME, 'b', 1],
[TIME, 'b', 1],
[TIME, 'b', 1],
[TIME, 'b', 10]] 
```

每个列表中的第三项是 0、1 或 10。0 代表开始，1 代表移动，10 代表结束。如何将其拆分为进一步的嵌套列表，以便最终得到与此类似的旅程列表：

```
[[[TIME, 'b', 0],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 10]],
[[TIME, 'b', 0],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 10]],
[[TIME, 'b', 0],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 10]]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T23:57:06.907

可能有一种更 Pythonic 的方式来做到这一点，但这是功能性的，直接的并且应该很容易理解。`biglist`保存初始数据。

```
newlist = []
sublist = []
for i in biglist:
    sublist.append(i)
    if i[2] == 10:
        newlist.append(sublist)
        sublist = [] 
```

给出：

```
[[[TIME, 'b', 0],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 10]],
[[TIME, 'b', 0],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 10]],
[[TIME, 'b', 0],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 1],[TIME, 'b', 10]]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T23:59:23.667

```
#x is your initial list
k, new_list = 0, []
for i,j in enumerate(x):
    if j[2] == 10:
        new_list.append(x[k:i+1])
        k = i+1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T00:04:26.667

与其他解决方案相反，我们在这里测试旅程是否开始（`d[2] == 0`）而不是何时结束：

```
output = []
for d in data:
    if d[2] == 0:
        # Starting a new journey: we add a new list
        output.append([d])
    else:
        # Continuing a journey: we extend the last list
        output[-1].extend([d]) 
```

当然，如果第一次旅程从未开始，这将失败（你会`IndexError`从`else`声明中得到一个）......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T23:56:55.237

如果我正确理解了这个问题，最明显的解决方案是：

```
def iter_journeys(lst):
    for e in lst:
        act = e[2]

        if act == 0:
            journey = []

        journey.append(e)

        if act == 10:
            yield journey 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T23:58:08.137

我确信有一种更有效的方法可以做到这一点，但这是一个基本的解决方案：

```
def create_journeys(paths):
  journeys = [[]]

  for path in paths:
    journeys[-1].append(path)

    if path[-1] == 10:
      journeys.append([])

  return journeys 
```

# android - 如何在 TTS OnUtteranceCompleted 回调中访问布局？

> ID：12134766
> 
> 赞同：2
> 
> 时间：2012-08-26T23:37:29.603
> 
> 标签：android, text-to-speech, class-hierarchy

我正在制作一个简单的 Android 程序，该程序运行助记符或数学练习以用于培训目的。我有一个“新练习”按钮，可以更改问题和答案。我想实现“文本到语音”模式，软件读取问题和答案。他们说完后，它应该计算一个新的问题并重新开始。

我正在使用 OnUtteranceCompleted 来确定演讲是否已经结束。我的问题是我无法从回调中访问我的“新练习”按钮。

我正在使用这个：

```
private TextToSpeech.OnUtteranceCompletedListener onUtteranceCompleted = new TextToSpeech.OnUtteranceCompletedListener()
{
        @Override
        public void onUtteranceCompleted(String utteranceId)
        {
                if(0 == utteranceId.compareToIgnoreCase(END_OF_SPEECH))
                {
                        Log.i("TTS","Completed");
                        if (TTSMode == TTS_MODE_ON) {
                            //Start new
                             Log.i("TTS","TTS mode is on: start new exercize");
                            NewExercize();
                             btnNewEx.performClick();

                        }
                }

        }
}; 
```

我收到以下错误：$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触及其视图。

我能够生成新的问题/答案，但我不能使用按钮来更改带有新问题或答案的字段，这些字段由 TTS 引擎使用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T23:42:18.417

您需要使用`runOnUiThread`：

```
context.runOnUiThread( new Runnable() {
    public void run() {
        btnNewEx.performClick();
    }
}); 
```

（如果“this”是 Activity 或 Service 子类，则可以省略“context”）

# objective-c - Objective-C：从“分发”/生产版本中删除 NSLog 调用？

> ID：12134769
> 
> 赞同：4
> 
> 时间：2012-08-26T23:38:20.147
> 
> 标签：objective-c, ios, ios5

**更新：**

更多信息在这里：

[真的不应该在生产代码上使用 NSLog() 吗？](https://stackoverflow.com/questions/300673/is-it-true-that-one-should-not-use-nslog-on-production-code)

~~~~~~~~~~~~~~~~~~~~~~~~

**情况**

我有一些非常漂亮的 NSLog 调用，用于调试应用程序中更复杂的部分。但是，我最近才知道这些会影响运行时性能！

**目标**

我想在我没有从 Xcode 中实际执行 Product > Run（又名 command-R）的任何运行期间删除我的 NSLog 调用 - 特别是在这个东西部署在 App Store 上的情况下，以及当我运行与 Xcode 断开连接时的应用程序（即在街上走时只需点击图标）。

**建议的解决方案？**

假设我已经创建了一个 VIEW_DEBUG 的预处理器宏，那么在我上面描述的情况下，以下实现是否会有效地从执行中删除 NSLog 调用？

```
 <bunch of code>

#ifdef VIEW_DEBUG
    NSLog(@"really complex logs entries");
#endif

    <even more code> 
```

这对我来说很难“测试”，所以我想我会吸引更有经验的人。:)

**Xcode 设置**（供参考）

![代码设置](../Images/428c32e4bd27bd8dd8e24eab869d6b1a.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-26T23:49:39.383

一个常见的解决方案是将以下代码放在您的 Prefix 文件中（或者您可以根据需要创建一个专用类`#include`）：

```
#ifdef DEBUG    
#define DebugLog(...) NSLog(__VA_ARGS__)
#else
#define DebugLog(...) while(0)
#endif 
```

Xcode 在执行调试构建时已经为您定义了 DEBUG（如屏幕截图所示）。**VA_ARGS**是一种创建[可变参数宏](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)的方法，它是在 C99 中引入的。确保 DebugLog 具有相同的`do/while`净句法效果，即使它不做任何事情——不要担心无意义的循环，优化器会为你删除它。

然后，您可以`DebugLog`完全按照您的使用方式使用`NSLog`. 这将完全按照您的建议进行，`VIEW_DEBUG`但您不必复制和粘贴`#ifdef`条件一千次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T01:17:05.857

我总是`DLog`在我的代码中使用它，它工作得很好。

```
// DLog is almost a drop-in replacement for NSLog
// DLog();
// DLog(@"here");
// DLog(@"value: %d", x);
// Unfortunately this doesn't work DLog(aStringVariable); you have to do this instead DLog(@"%@", aStringVariable);
#ifdef DEBUG
#   define DLog(fmt, ...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__);
#else
#   define DLog(...)
#endif

// ALog always displays output regardless of the DEBUG setting
#define ALog(fmt, ...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__); 
```

更多信息：[NSLog 替代品的演变](http://iphoneincubator.com/blog/debugging/the-evolution-of-a-replacement-for-nslog)

# aptana - ImportError：没有名为 haystack 的模块

> ID：12134776
> 
> 赞同：0
> 
> 时间：2012-08-26T23:39:11.897
> 
> 标签：aptana, aptana3, django-haystack

如果我用 安装最新的稳定版 1.2.7 `django-haystack`，`sudo pip install django-haystack`它可以正常工作。但是在卸载它并按照主页上的建议安装最新的开发版本 2.0.0 BETA 之后：

```
pip install -e git+https://github.com/toastdriven/django-haystack.git@master#egg=django-haystack 
```

尽管有以下成功消息，但似乎没有正确安装：

```
Obtaining django-haystack from git+https://github.com/toastdriven/django-haystack.git@master#egg=django-haystack
  Cloning https://github.com/toastdriven/django-haystack.git (to master) to ./src/django-haystack
  Running setup.py egg_info for package django-haystack

Installing collected packages: django-haystack
  Running setup.py develop for django-haystack
    Checking .pth file support in /usr/local/lib/python2.7/dist-packages/
    /usr/bin/python -E -c pass
    TEST PASSED: /usr/local/lib/python2.7/dist-packages/ appears to support .pth files

    Creating /usr/local/lib/python2.7/dist-packages/django-haystack.egg-link (link to .)
    Adding django-haystack 2.0.0-beta to easy-install.pth file

    Installed /home/kave/projects/cb/src/django-haystack
Successfully installed django-haystack
Cleaning up... 
```

因为当我进入 django shell 环境并做一个

```
>>> from haystack import indexes

Traceback (most recent call last):
  File "<console>", line 1, in <module>
ImportError: No module named haystack 
```

我已按照说明进行操作并 `INSTALLED_APPS = (... 'haystack',)`在其中

我以前遇到过这个问题，但永远无法解决。sudo pip install default 工作正常，但只要我得到最新的 Git 版本，我的 django 似乎看不到它。

我会错过什么？

非常感谢您的建议，

**更新**

抱歉，但似乎该错误仅在 Aptana Studio 3.0 中发生。毕竟，在 Django Shell 中，我可以进行导入。我仍然眼花缭乱，因为这应该是一样的。为什么 Aptana 在安装时可以看到库，`sudo pip install django-haystack`但如果使用最新的 Git 版本则看不到？请问那里有什么问题？

**更新 2**

满的`sys.path`

```
['/home/kaveh/projects/cb', '/usr/local/lib/python2.7/dist-packages/requests-0.13.9-py2.7.egg', '/home/kaveh/projects/cb/src/django-haystack', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PIL', '/usr/lib/python2.7/dist-packages/gst-0.10', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/python2.7/dist-packages/ubuntu-sso-client', '/usr/lib/python2.7/dist-packages/ubuntuone-client', '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel', '/usr/lib/python2.7/dist-packages/ubuntuone-couch', '/usr/lib/python2.7/dist-packages/ubuntuone-installer', '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:29:57.500

我终于让它工作了。

正如我所说，问题`pip install -e git+https://github.com/toastdriven/django-haystack.git@master#egg=django-haystack`显然不起作用。

我只是将其卸载并确保将其删除。

然后我只是将源代码下载为 zip 文件，将其解压缩并

```
python setup.py build
sudo python setup.py install 
```

这样它就可以保证正常工作。希望这可以帮助某人。

# python - virtualenv 在重新启动时删除库（flask / yolk）

> ID：12134782
> 
> 赞同：1
> 
> 时间：2012-08-26T23:41:09.477
> 
> 标签：python, flask, virtualenv, yolk

我刚开始学习 Flask（因此也开始学习`virtualenv`）。我按照 Flask 文档的教程创建了一个小型应用程序。我使用安装了 Flask 和 yolk `venv`，一切正常。

我重新启动计算机，当我`virtualenv`再次激活时，不再识别烧瓶和蛋黄。我不得不通过重新安装它们`easy_install`。`venv`重新启动计算机后是否删除任何已安装的软件包？

这里发生了什么？我有什么需要做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:05:07.653

只要您正确采购 virtualenv 并正确安装软件包，您的 virtualenv 就不会受到重新启动的影响。它完全独立于此。我能想到的三种可能性之一可以解释您的问题：

1.  来源不正确的 virtualenv
2.  您将烧瓶和蛋黄安装到系统 python 上
3.  您使用了某种临时存储

（第三种可能性最小）

# php - 使用 jquery 设置 php 变量值？

> ID：12134785
> 
> 赞同：1
> 
> 时间：2012-08-26T23:41:42.903
> 
> 标签：php, jquery, html

我目前有 2 页：

*   **Follow.php**：一个 PHP 页面，所有设置都使用 twitters api，并将使用您输入的特定参数关注 twitter 上的任何用户。

*   一个**index.php**页面，其中包含您可以关注的人员的链接列表。

我要做的是拥有它，因此当用户单击要关注 index.php 上的某个人时，follow.php 中的变量（用作参数并且是要访问的 twitter 帐户的用户名）跟随）被设置为所选链接的名称属性。

现在我不是最伟大的开发人员，所以我不确定最好的方法。可能有比我想的更好的方法。我正在考虑使用 jquery 说类似的话：

```
$('a').click(function(){
<?php $group=?>$(this).attr('name'); //trying to set a php variable to name attr
}) 
```

这将在它自己的新文件中，然后我将把这个脚本包含到 follow.php 脚本中并使用该变量。不出所料，这不起作用。我希望我解释了我想要做好的事情。

所以我有两个问题。

数字 1：实现我想要做的事情的最佳方式是什么？我可以在 php 中完成这一切吗？

2号：是否可以做我试图用jquery做的事情并将php var设置为名称attr？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T23:44:20.767

PHP 在*服务器*上运行。JavaScript (jQuery) 在*浏览器*上运行。PHP 可以用来写 JS，但是 JS 不能影响 PHP（除了通过 AJAX 或类似的方式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T23:47:47.407

您需要做的是在 Follow.php 页面上进行 POST 并接受用户名值。这是一个很好的资源：http: [//www.html.net/tutorials/php/lesson10.php](http://www.html.net/tutorials/php/lesson10.php)

您可以简单地为索引页面上的每个标签设置链接 href 以获取 Follow.php?user=twitterHandle（其中 twitterHandle 是一个人的 twitter 用户名）。这样，您根本不需要使用任何 javascript。

# buildbot - BuildBot 中是否可以有多个源结帐步骤？

> ID：12134796
> 
> 赞同：5
> 
> 时间：2012-08-26T23:43:31.013
> 
> 标签：buildbot

BuildBot 中是否可以有多个源结帐步骤？我找不到任何明确的文档，但似乎在 BuildBot 中进行源签出也会将当前工作目录更改为签出目录，这意味着不清楚从另一个存储库“去”签出然后运行一个同时使用两者的脚本。

考虑[http://buildbot.net/buildbot/docs/0.8.1/BuildFactory.html](http://buildbot.net/buildbot/docs/0.8.1/BuildFactory.html)中的示例：

从这些步骤来看，似乎执行了 CVS 签出，然后`make build`运行。即BuildBot中的两个步骤，很方便。

但是，如果您从命令行执行等效操作，则需要*三个*步骤：

```
cvs co $CVSROOT
cd directory_that_was_created
make build 
```

该`cd directory_that_was_created`步骤在 BuildBot 中发生在哪里？

但更重要的是，如果我想要两个`source.CVS`（嗯，真的`source.Git`）步骤怎么办？运行第二步后，我在哪个目录中？第二个 repo 是否最终在第一个 repo 的子目录中？

使用 Git，我似乎可以将一个作为另一个的子模块，以确保它们都可以在一个步骤中被检出，但如果可能的话，我不希望这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T05:38:27.787

好的，我想通了。我没有意识到每个步骤都有一个“workdir”的概念来指示“工作”发生的位置。所有步骤的默认值`workdir`是一个名为`build`.

在[http://buildbot.net/buildbot/docs/latest/manual/cfg-buildsteps.html](http://buildbot.net/buildbot/docs/latest/manual/cfg-buildsteps.html)在**Source Checkout** -> **Common Parameters** -> **workdir**下，它确实承认源步骤是特殊的“因为它们在工作目录（比如创建工作目录本身）。”

`cd`这解释了为什么在我上面的示例中没有对应于命令的显式步骤。为了解决我的问题，我创建了两个`Git`步骤，每个步骤都有自己的`workdir`价值。随后`ShellCommand`是调用适当目录的后续步骤，知道这两个`workdir`目录将是彼此的兄弟。

# javascript - 第一次触发后函数未定义

> ID：12134801
> 
> 赞同：2
> 
> 时间：2012-08-26T23:43:55.933
> 
> 标签：javascript, jquery, recursion, scope

我有一个这样的代码块：

```
function doSomething() {
    someVar.on("event_name", function() {
        $('#elementId').click(function(e) {
            doSomething();
        });
    });
}

// and on document ready
 $(function () {
    $('#anotherElemId').click(function () {
        doSomething();
    });
}); 
```

我遇到的问题是，当我`doSomething()`从`anotherElemId`单击事件（绑定在准备好的文档上）调用它时，它按预期工作，但从`elementId`单击递归调用它不起作用。

有任何想法吗？思考是我所缺少的微不足道的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:19:37.783

someVar 是对 dom 元素的实际 jQuery 引用吗？（例如 $('#someitem')）

第二个问题是您不能在稍后要实例化的函数中放置 .click 事件。如果您试图只允许 #elementId 在之前的某个事件之后发生单击事件，请尝试测试测试器变量是否为真：

```
var activated = false;

$(function () {
    $('#anotherElemId').click(function () {
        activated = true;
    });

    $('#secondElemId').on("event_name", function() {
        if (activated) {
            // code that happens only after #anotherElemId was clicked.
        }

    });
}); 
```

# asp.net - 使用 WePay.com OAuth 2.0 进行身份验证和授权

> ID：12134805
> 
> 赞同：1
> 
> 时间：2012-08-26T23:44:40.440
> 
> 标签：asp.net, asp.net-mvc-4, oauth-2.0, asp.net-web-api

我想使用 WePay.com 使用 OAuth 2.0 和 ASP.NET MVC 4 Web API 进行身份验证和授权。

[我在这里](https://www.wepay.com/developer/platform/authorization)在线阅读了他们的教程，并在想我是否只需完成这些步骤并将访问令牌与他们来自 WePay 的 user_id 一起存储在数据库中。

1.  我应该`FormsAuthentication.SetAuthCookie()`用来创建安全 cookie 吗？
2.  这安全吗？
3.  或者我是否可以通过其他方式（Facebook、Twitter、Basic 等）对用户进行身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:20:29.017

您实际上可以使用 WePay 作为您的身份验证机制。确保在此处签出 C# SDK：[https ://github.com/bradoyler/WePayASPNet](https://github.com/bradoyler/WePayASPNet)

是的，您只需在 wepay 登录回调之后调用 FormsAuthentication.SetAuthCookie('wepayusers email or auth token') 。祝你好运。

# python - python结构，不需要的额外字节

> ID：12134806
> 
> 赞同：2
> 
> 时间：2012-08-26T23:44:42.613
> 
> 标签：python, struct

我正在使用 python 编写一个位图文件。我创建位图标题的代码是：

```
pack('bblll', 66, 77, fileLength, 0, 122) 
```

除非我的数学是错误的，（不是）这应该创建一个 14 字节长的字节串。

b = char（1 字节） l = long（4 字节）

1 + 1 + 4 + 4 + 4 = 14

但是，问题是，我收到了 2 个额外的字节；假设我的文件长度为 142，我将收到以下内容（以十六进制表示）：

```
42 4D 00 00 8E 00 00 00 00 00 00 00 7A 00 00 00 
```

额外的 2 位是偏移量 0x2 和 0x3 处的空值。他们来自哪里？我该如何摆脱它们？它正在破坏我的图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T23:47:13.980

它填充到四字节（字）边界，因此`long`s 从自然偏移量（即四的倍数的偏移量）开始，使用`=`前缀（或任何其他可能的字节顺序前缀）来防止这种情况。

[有关此文档页面的更多信息。](http://docs.python.org/library/struct.html#struct-alignment)

# flash - AS2 函数可以有回调函数吗？

> ID：12134808
> 
> 赞同：0
> 
> 时间：2012-08-26T23:44:46.840
> 
> 标签：flash, adobe, actionscript-2

正如标题所示，我正在尝试在 Actionscript 2 中创建一个调用值和函数的函数，但我似乎无法让它使用该函数。这是我的代码。

```
function fadeOut(seconds, callBackFunction){
_root.fader.activated = true;
_root.fader.secs = seconds;
if(fader.box._alpha >= 100){
        callBackFunction();
        trace("This part of the code is being called");
    }
} 
```

然后这就是我调用函数的方式

```
function BlankFunction(){
        trace("working");
    }
_root.fadeOut(5, BlankFunction); 
```

所以我得到跟踪说“这部分代码正在被调用”，但我没有从用作回调的 BlankFunction 获得“工作”。有没有一种方法可以在 AS2 中创建一个调用回调函数的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:56:20.347

您可以使用`callBackfunction.call(null)`. `null`指定被`this`调用函数内的目标。另请参阅[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001074.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001074.html)

我建议在 fadeOut 的参数中也将其键入为 :Function ：`function fadeOut(seconds:Number, callBackFunction:Function)`

# c++ - 删除后保持链接列表项

> ID：12134817
> 
> 赞同：1
> 
> 时间：2012-08-26T23:46:27.403
> 
> 标签：c++, linked-list, delete-operator

我写了一个双向链表（在这种情况下存储素数），在使用列表后我试图删除其中的元素。我在列表的析构函数中编写了一个简单的循环。但是，我可以在删除每个元素后打印每个元素中保存的值。释放内存后，我预计会出现“错误访问”错误。此外，我使用 Activity Monitor 来显示在程序执行的各个点上使用的资源。创建链表时（显然）内存使用量大幅增加，但在调用析构函数后也有小幅增加。我认为有什么地方不对劲。

正在为列表的每个成员调用“删除”语句，但它似乎没有做任何事情。我在下面的析构函数中包含了相关代码。列表和元素是使用“new”语句创建的。“当前”、“头”和“尾”标签是指向列表元素（节点）的指针。

```
PrimeList::~PrimeList()
{
    // delete list elements
    do
    {
        current = tail;
        tail = tail->previous;
        delete current;
    }
    while( tail != NULL );

    // nullify the pointers
    head = NULL;
    tail = NULL;
    current = NULL;

    // reset size
    size = 0;
} 
```

有什么见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:55:11.307

删除一个对象不一定会改变该对象曾经占用的内存，更不用说使该内存不可用于后续访问。有多种方法可以确保您的程序不会访问已删除的内存，例如使用调试分配器以不寻常的位模式覆盖已删除的内存，或使用动态分析工具（如[valgrind](http://valgrind.org/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T23:55:03.180

您是否通过引用将列表的头部传递给删除方法？

否则，您只是在尝试删除列表的副本，因此当您尝试访问它时列表仍然存在。

我看不到你的整个代码，但是对于析构函数，你应该这样做：

```
PrimeList::~PrimeList()
{
  deleteList( &head); // pass the reference to the head pointer
}

void PrimeList::deleteList( struct node** headRef)
{
  struct node* head = *headRef;
  // now apply your deletion algorithm
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T23:55:35.100

`delete`所做的只是使对象使用的内存可供另一个对象重用（并调用析构函数，如果有的话）。它不会擦除内存或将其标记为不可用或其他任何内容（至少，它不能保证 - 如果感觉如此，它可能会）。在将来的某个时间，该内存可能会分配给另一个对象，届时它将被覆盖。

`delete`d 内存不会归还给系统，它由您的进程保留，以供将来`new`的 s（和`malloc`，...）重用。这就是为什么活动监视器仍然认为您正在使用该内存的原因。有更好的方法可以确定您是否已正确释放列表，搜索“c++ 内存泄漏检测器”或类似的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T23:56:43.903

很可能是您的编译器在“帮助您”。在链表中实现析构函数的一个好方法是递归。假设您的列表中的每个条目都有一个类节点，

```
class Node {
    public:
    ~Node() {delete this->next;}
};

PrimeList::~PrimeList() {
    delete head;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-26T23:50:14.963

在删除元素后访问它是一个错误。当然，其中包含错误的代码不会像您期望的那样工作。这就是我们试图避免此类代码的原因。

你的析构函数看起来不错。最有可能的是，您的析构函数在内部只是使内存可供重用。由于您没有更改其内容或分配任何新对象，因此它仍然“碰巧拥有”相同的内容。

# ios - 当 UIView 成为 UITableViewCell 的委托时，UIView 和 UITableViewCell 没有被释放

> ID：12134818
> 
> 赞同：0
> 
> 时间：2012-08-26T23:46:30.147
> 
> 标签：ios, ipad, memory-management, uitableview

我有一个使用自定义视图 (Horizo​​ntalMenuView) 的视图控制器 (EmbeddedMenuView)。Embedded 菜单视图使用多个 Horizo​​ntalMenuViews。Horizo​​ntalMenuView 包含一个 UITableView。表格视图中的每个单元格都使用相当多的内存（高质量图像）。

现在，每次触摸 Horizo​​ntalMenuView 中的一部分表格视图单元格时，我都需要执行一项任务。我通过在表格视图单元格中创建一个协议并为 Horizo​​ntalMenuView 分配其委托来做到这一点。然后我在 Horizo​​ntalMenuView 中创建了一个协议，并为 EmbeddedMenuView 分配了它的委托。所以我将触摸事件传递给 EmbeddedMenuView。

问题是，当我分配单元格的委托时，Horizo​​ntalMenuView 不会被释放。由于此视图每次出现时都会自行刷新，因此内存占用很快就会失控。

如果我注释掉单元格被分配代表的部分，一切正常。

我的问题是：如何正确释放 UITableViewCell 的委托？

这是 Horizo​​ntalMenuView 的代码片段：

```
-(UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

//Custom Logic

    HorizontalMenuItemTableViewCell *cell = (HorizontalMenuItemTableViewCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {

        cell = [[[NSClassFromString([[AMPUIManager sharedManager] classNameForName:cellIdentifier]) alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

        cell.shouldAlwaysTransform = shouldAlwaysTransform;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.colorsDict = colorsDict;

        if ([cell isKindOfClass:[ATCustomTableViewCell class]]) {
            ((ATCustomTableViewCell *)cell).delegate = self; //Commenting this out solves my problem.
        }

    }

//More Custom Logic 

    return cell;

} 
```

PS我正在使用手动引用计数。ARC 不是该项目的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:15:18.367

听起来您可能有循环引用。您几乎总是希望对代表使用“分配”约定。

请参阅：[为什么 Objective-C 委托通常赋予属性分配而不是保留？](https://stackoverflow.com/questions/918698/why-are-objective-c-delegates-usually-given-the-property-assign-instead-of-retai)

# maven-plugin - 使用 wro4j 的“sass --watch”的等价物是什么？

> ID：12134821
> 
> 赞同：1
> 
> 时间：2012-08-26T23:46:48.987
> 
> 标签：maven-plugin, sass, wro4j

[Wro4j](https://github.com/alexo/wro4j)（Java 的 Web 资源优化器）使 Java Web 开发人员更容易在他们的项目中使用 SCSS / LESS / CoffeeScript / UglifyJS 之类的东西，而无需直接使用 gems / npms。

我找不到如何将它用于观看一些 SCSS 文件的简单用例

最快的等价物是什么

`sass --watch /src:/css`

在 wro4j 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:11:43.000

我认为它与变化检测有关。如果为真，则有一个名为[“resourceWatcherUpdatePeriod”](http://code.google.com/p/wro4j/wiki/ConfigurationOptions)的配置属性用于定期检查资源的更改。下一个版本（1.4.9）将通过懒惰地观察变化来改进 resourceWatcher 的行为。

# java - 在 JList 中显示数据库中的数据

> ID：12134823
> 
> 赞同：0
> 
> 时间：2012-08-26T23:47:26.853
> 
> 标签：java, swing, jdbc, jlist

我正在使用以下代码从数据库中检索数据，但我不知道如何显示它`JList`

```
Class.forName("oracle.jdbc.driver.OracleDriver");
Statement stmt = null;
ResultSet rs;                                                                          
Connection conn=DriverManager.getConnection("jdbc:mysql://127.0.0.1/SPL","root","PWD");
stmt=(Statement) conn.createStatement();
rs=stmt.executeQuery(query);
while (rs.next()) 
{
    String stadium = rs.getString("Stadium");
    String city = rs.getString("City");
} 
```

但我想在`JList`. 你们能告诉我该怎么做吗？

* * *

我正在使用以下代码，但它没有在我的框架上显示任何内容，你能告诉我哪里错了吗？谢谢

```
 String query="SELECT * FROM Location";
 DefaultListModel model=new DefaultListModel();
 DefaultListModel model1=new DefaultListModel();
 try
 {                                              Class.forName("oracle.jdbc.driver.OracleDriver");
Statement stmt = null;
ResultSet rs;                                                                          
Connection conn=DriverManager.getConnection("jdbc:mysql://127.0.0.1/SPL","root","PWD");
stmt=(Statement) conn.createStatement();
rs=stmt.executeQuery(query);
while (rs.next()) 
{
String stadium = rs.getString("Stadium");
String city = rs.getString("City");
model.addElement(stadium);
model1.addElement(city);
}
JList list=new JList(model);
JList list1=new JList(model1);
f8.add(jpa1); //f8=frame name,jpa1=panel name
jpa1.add(list);                                 list.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);                        list.setLayoutOrientation(JList.HORIZONTAL_WRAP);
list.setVisibleRowCount(1);
JScrollPane listScroller = new JScrollPane(list);                                          
}
catch(SQLException e)
{
System.out.println("Message   : " + e.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T00:00:48.113

A`JList`可能基于 a `ListModel`，因此您需要制作`ListModel`包含您的数据的 a，然后使用它来制作您的`JList`. 我会做一个类`Stadium`或其他东西，有两个`String`字段，`name`并且`city`.

```
public class Stadium {
    private String name;
    private String city;

    public Stadium(String name, String city){...}
    //toString()-method to make it display in a meaningful way in the JList
    public String toString(){ return name + " - " + city; }
} 
```

然后你可以写类似

```
...
DefaultListModel listModel = new DefaultListModel();
while (rs.next()) {
    String name = rs.getString("Stadium");
    String city = rs.getString("City");
    Stadium stadium = new Stadium(name, city)
    listModel.addElement(stadium);
}
JList list = new JList(listModel); 
```

尚未尝试编译和测试此代码，但希望这一点有所帮助！

# php - 用于用户识别的单例模式的缺点？

> ID：12134827
> 
> 赞同：-1
> 
> 时间：2012-08-26T23:48:47.690
> 
> 标签：php, session, authentication, singleton

我正在 Zend 中构建一个模型来构建一个包含关键数据的对象，该对象将根据需要被延迟加载并存储在会话变量中。

我正在考虑单例模式，但发现一些材料不清楚的缺点。单例似乎持续存在并且表现得像一个全球性的。但是在 HTTP 环境中（除非它存储在会话或数据库中）可能只会持续与请求一样长。

我想对用户进行身份验证，将用户 ID 等存储在私有变量中，并在当前用户访问信息（即当前地址）时存储该信息以保存数据库调用。

我对单例只持续与会话一样长并且每个后续用户都可以为自己制作一个单例是对的吗？

对利弊的想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:53:29.297

你的问题不是很清楚，但是一个单例会在每个请求之间消失，它只是一种（模式）类，如果你在调用服务器之间不做任何保留它就会消失。

单例的缺点是它通常反映了一个糟糕的设计：单例带来了静态的东西。但是一个好的 OOP 设计应该是保持私有和模块化的，因此它应该在类之间有很少的耦合。如果到处都使用许多类，那么您可能有问题。

TMHO 如果您的应用程序中有一个或两个单例来维护全局请求上下文和用户上下文，那很好。如果您有十个，您可能需要重新设计应用程序的某些部分。

# c++ - 交换自身内部的对象

> ID：12134831
> 
> 赞同：4
> 
> 时间：2012-08-26T23:49:50.893
> 
> 标签：c++, oop, destructor, delete-operator, double-free

我正在尝试在其内部交换一个对象。它可以工作，但是当我添加一个析构函数时，它会给我一个双重免费错误。有没有办法防止这种情况？我说的方法是`void swap(SimpleArray &object)`。

（抱歉，如果您在我的帖子中有错误信息之前阅读了此内容...）

```
#include "TestType.h"
class SimpleArray {

    private: 
        TestType* pArray;
        //TestType* temp;
    public:
        SimpleArray(TestType *array)
        {
            this->pArray = array;
        }
        ~SimpleArray() { delete[] pArray; }
        SimpleArray() { pArray = 0;}
        SimpleArray(const SimpleArray& arg){ pArray = arg.pArray; }
        ~SimpleArray() { delete[] pArray; }
        TestType * get() const{ return pArray; }
        bool isNonNull() const { return pArray != 0; }
        //TestType* pArray;
        void reset(TestType*& p) {this->pArray = p; }
        void reset() { pArray = 0; }

        void swap(SimpleArray &object) { SimpleArray temp; temp = object; object = *this; *this = temp;}
        TestType * release() { pArray = 0; return pArray; }
        TestType& getReference(int a) { return *pArray; }

}; 
```

这可行，但是一旦我添加了析构函数，它就会给我一个“双重释放或损坏错误”。我该如何解决这个问题？这是 main 中的函数，它搞砸了。

```
bool testGetReleaseSwap() {
    SimpleArray array1;
    if (array1.get() != 0)
        return false;

    TestType* directArray1 = new TestType[100];
    array1.reset(directArray1);
    if (array1.get() != directArray1)
        return false;

    TestType* directArray2 = new TestType[50];
    SimpleArray array2(directArray2);

    array1.swap(array2);
    if (array1.get() != directArray2 || array2.get() != directArray1)
        return false;

    array2.swap(array1);
    if (array1.get() != directArray1 || array2.get() != directArray2)
        return false;

    array1.swap(array1);
    if (array1.get() != directArray1)
        return false;

    if (array1.release() != directArray1 || array2.release() != directArray2)
        return false;

    if (array1.get() != 0 || array2.get() != 0)
        return false;

    delete[] directArray1;
    delete[] directArray2;

    return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T23:55:14.390

**`temp.release()`如果您的`swap`方法防止双重删除，那么这里**最简单的方法**是在最后调用。**

 **不过，潜在的问题要深得多。在 C++ 中，始终保持对谁拥有某物的严格语义至关重要，例如需要删除的内存区域。

一种常见的模式是分配某物的对象也负责清理，*而没有其他人*负责。这很适合`SimpleArray`，但是复制构造函数会破坏它，因为它会乘以所有者的数量！

要实现共享数据语义，您必须投入更多工作（引用计数等），或者您必须禁止数组复制并使复制构造函数私有。

**`swap`在不复制对象的情况下修复工作**的一种干净方法是：****

 **```
 void swap(SimpleArray &object) { 
    TestType* temp = object.pArray;
    object.pArray = this->pArray;
    this->pArray = temp;
 } 
```

（`std::swap(object.pArray, pArray);`也可以）

因为交换数组的内存区域非常适合单所有者模式，所以这里出错的只是使用完整的对象副本。

您应该阅读 C++ 中的资源管理和所有权语义。*除非您绝对知道谁拥有什么，*否则您的代码总是容易出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T00:05:24.030

在我看来，您正在尝试实现一个具有浅复制语义（并且可能是写时复制）的类。要成功地做到这一点，您需要跟踪有多少其他共享数据的所有者仍然存在并且需要销毁拥有的对象，当该计数达到零时。您可以使用 a`std::shared_ptr`或自己实现引用计数。

至于该特定示例中的真正问题，请查看复制构造函数在做什么。它不是复制，而是简单地对其参数已经拥有的对象进行另一个引用（具体的指针）。这本身就足以获得双重免费，而您的`swap`测试用例只是暴露了这个问题。****

# java - 通过 Twitter4j 检查我在关注谁

> ID：12134833
> 
> 赞同：5
> 
> 时间：2012-08-26T23:49:55.407
> 
> 标签：java, android, twitter, twitter4j

除了获取我正在关注的人的整个列表然后开始比较 ID 之外，是否有任何方法可以检查我是否在 Twitter 上关注某个用户？

我所知道的是，我正在关注的人的整个列表是通过这种方法完成的：

```
getFriendsIDs(long cursor) 
      Returns an array of numeric IDs for every user the authenticating user is following. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T00:02:55.593

您可以使用该[`showFriendship`](http://twitter4j.org/en/javadoc/twitter4j/api/FriendshipMethods.html#showFriendship%28long,%20long%29)方法查看一个用户是否正在关注另一个用户。调用该方法，该方法返回一个[`Relationship`](http://twitter4j.org/en/javadoc/twitter4j/Relationship.html)对象，该对象具有查看指定的两个用户是否相互关注的方法。

# python - Python 的 virtualenv 和目录

> ID：12134834
> 
> 赞同：1
> 
> 时间：2012-08-26T23:49:59.997
> 
> 标签：python, flask, virtualenv

我启动了一个 virtualenv 会话，在一个目录`dir`中，我有以下目录层次结构：

```
| venv -- the virtual environment
| app_dir
  main.py
  | dir1
  | dir2
  | dir2 
```

我已经为 main.py 使用的这个环境安装了烧瓶。当我运行`$ python main.py`时，它将通过烧瓶运行。我的问题是 - 是否`app_dir`必须`venv`是兄弟目录？或者我可以`app_dir`去别的地方吗？如果是这样，如何`main.py`识别`flask`在`venv`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T23:56:12.430

为了更加彻底，这是您需要做的才能让您的 virtualenv 工作。安装 virtualenv 后，您只需要获取它，以便您当前的 shell 使用 virtualenv

为了获取virtualenv，您可以这样做：

```
$ source venv/bin/activate 
```

因此，只要您获取正确的 virtualenv。您的`app_dir`和`venv`目录可以在系统上的任何位置。

# ios - 如何为 iOS 应用程序自动创建捆绑包？

> ID：12134835
> 
> 赞同：1
> 
> 时间：2012-08-26T23:50:12.787
> 
> 标签：ios, xcode, bundle

我的 iOS 应用程序使用按主题打包到主题包中的数据。例如`theme_math.bundle`，`theme_history.bundle`等。主题包包含一个 .sqlite 文件和图像。这个想法是应用程序可以在必要时下载这些捆绑包（theme_x.bundle.zip）。数据库中存储了数百个主题，我想自动化为每个主题创建具有适当名称的包的过程。

*   这种方法可以很好地将应用程序内容传递到 iOS 应用程序吗？
*   如果使用捆绑包很好，我该如何自动化该过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:44:27.557

这似乎是个好主意。您可以通过创建 shell 程序文件或使用其他一些脚本语言（python、ruby 等）来自动执行此操作。

捆绑包实际上只是一个受到特殊处理的文件夹。在 Finder 等中查看时它可以有一个图标。因此，您的高级程序将创建一个包（mkdir Name.bundle），然后将您想要的任何资源复制到该目录 - Name.bundle。完成后，将捆绑包压缩，并将其放在可以下载的地方。

Bundles 里面通常有一个 plist 并设置了特殊的标志（就像 OSX 上的可执行文件一样），但不要认为你需要这个。

您可能需要在捆绑包上设置一些特殊位以供 iOS 识别它 - 我真的不确定。如果是这样，请参阅[此线程。](https://stackoverflow.com/q/2009687/96716)

# javascript - 仅调整垂直图像的大小

> ID：12134837
> 
> 赞同：2
> 
> 时间：2012-08-26T23:50:23.177
> 
> 标签：javascript, jquery, css, image, image-resizing

我有一个垂直滚动照片库的问题，我希望调整垂直图像的大小，但水平图像就可以了。水平图像的宽度为 900 像素，而垂直图像对于舒适的屏幕观看来说太高了，所以我想要两个 440 像素宽度的垂直图像和 20 像素的中心边距以适应一个水平图像。

该网站在 Cargocollective 上，所以我不能使用 PHP，只能使用 Jquery、Javascript 和 CSS 而且我只能添加 HTML。有人有解决方案吗？

一种检测图像比例然后仅在高度>宽度时调整大小的方法

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T23:55:10.030

```
$('img').each(function(i,obj){
    if($(obj).height() > $(obj).width()){
        //portrait, resize accordingly  
    }else{
        //landscape display; the default you want.
    }
}); 
```

在 jQuery 1.7 及更高版本中，我们可以在不使用 $.each 迭代器的情况下访问每个图像的属性。

```
$('img').prop('height', function(){
    if($(this).height() > $(this).width()){
        //portrait, resize accordingly  
    }else{
       //landscape display; the default you want.
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T00:02:26.707

OhGodwhy 答案的变体，确保在计算高度/宽度时加载图像。

```
$('#myElement img').load(function(){
    if($(this).height() > $(this).width()){
        //portrait, resize accordingly  
        var width = $(this).width();
        var height = $(this).height();
        var newWidth = 400;
        var newHeight = newWidth * (height / width);
        $(this).width(newWidth).height(newHeight);
    }else{
        //landscape display; the default you want.
    }
}); 
```

# postgresql - 安装了 Postgres.app 但它不起作用

> ID：12134839
> 
> 赞同：27
> 
> 时间：2012-08-26T23:51:25.067
> 
> 标签：postgresql, heroku, psql

我刚刚在我的 Mac 上安装了[Postgres.app](http://postgresapp.com/)，但它无法正常工作。我完成了安装，应用程序图标在菜单栏上，它说它正在侦听端口 5432，但是，如果我尝试从命令行运行它会发生这种情况：

```
~ $ psql
zsh: correct 'psql' to 'sl' [nyae]? n
zsh: command not found: psql 
```

我之前通过 Homebrew 安装了 PostgreSQL，但在安装 Postgres.app 之前将其删除。我正在运行 Mac OS X Lion。

感谢您的帮助，我真的很想让 PostgreSQL 在我的机器上运行。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-27T00:12:19.923

Postgres.app的`psql`二进制文件位于应用程序包中，您必须将适当的目录添加到您的`PATH`. 来自[精美手册](http://postgresapp.com/documentation/cli-tools.html)：

> **配置您的`$PATH`**
> 
> Postgres.app 包含许多命令行工具。如果要使用它们，则必须配置`$PATH`变量。
> 
> 如果您使用**bash**（OS X 上的默认 shell），请将以下行添加到`~/.bash_profile`：
> 
> ```
> export PATH=$PATH:/Applications/Postgres.app/Contents/Versions/latest/bin 
> ```
> 
> [...]

因此，调整您`PATH`的 zsh 配置文件中的设置以包含

```
Contents/Versions/latest/bin 
```

捆绑包中的目录`Postgres.app`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-04-07T09:24:59.153

我从 2014 年 4 月开始阅读这篇文章，就我的 Postgres 应用程序而言，您必须在路径中包含的目录略有不同。

我必须包括这个：

`PATH="/Applications/Postgres.app/Contents/Versions/9.3/bin:$PATH"`

我现在可以在终端中运行 psql。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-12T17:53:58.937

你应该做什么使用 /latest 而不是 version 所以你在更新 Postgres 时不需要再次更改它。

如何： http: [//postgresapp.com/documentation/cli-tools.html](http://postgresapp.com/documentation/cli-tools.html)

然后运行：

```
. ~/.bash_profile 
```

重新加载 .bash_profile 并更新您添加的任何功能。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-20T21:21:15.487

**在 zsh shell 上**你有修改`.zshrc`：

```
PSQL_PATH="/Applications/Postgres.app/Contents/Versions/latest/bin"
PATH="$PATH:$PSQL_PATH" 
```

**提示**：

```
exec $SHELL
which psql 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T03:11:58.327

这可能看起来很愚蠢，但我很好奇你在哪里安装了 Postgres.app？正如`mu is too short`'s answer 中所建议的那样，文档提到添加`/Applications/Postgres.app/Contents/MacOS/bin`到您的路径。但是，这需要您在`/Applications/`文件夹中安装 Postgres.app。

在尝试您可能在 Stack Overflow 上找到的任何更复杂的解决方案以及通过 Google 获得的其他资源之前，您应该确保已将 Postgres.app 安装到正确的位置。它可能就像将 Postgres.app 移动到一样简单，`/Applications/`因为`psql`它将`/Applications/Postgres.app`在任何其他地方之前找到。

或者，您可以使用任何您想要的 Postgres.app 路径。因此，如果您希望它在您的主目录中，那么您可以使用`export PATH="~/Postgres.app/Contents/MacOS/bin:$PATH"`.

高温高压

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-01T11:07:15.037

我是以前的 Ubuntu 用户，现在在 OSX 中尝试直接从我打开的终端运行“which sql”和“pg_restore”命令不起作用。我点击了大象图标并通过“Open psql”打开了一个终端。一旦我从 psql 控制台退出并在该终端中编写命令，它们都可以正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-15T10:56:12.130

在 ZSH 终端上，在尝试上述解决方案之前，您必须首先安装 Postgres。在使用`Hombrew` First, hit,

`brew install postgres`然后检查是否安装 `which psql`

# objective-c - 部分标题不换行

> ID：12134841
> 
> 赞同：0
> 
> 时间：2012-08-26T23:52:48.077
> 
> 标签：objective-c, xcode, ios5.1

我正在尝试包装我的部分标题并且`UILineBreakModeWordWrap`没有帮助。知道我做错了什么吗？

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{ 
    UIView *rOView = [[UIView alloc] initWithFrame:CGRectMake(10,0,300,60)] ;   
    UILabel *sectionLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    sectionLabel.backgroundColor = [UIColor clearColor];
    sectionLabel.font = [UIFont boldSystemFontOfSize:18];
    sectionLabel.frame = CGRectMake(70,18,200,20);
    sectionLabel.text =  @"A really really long text A really really long text A really really long text";
    sectionLabel.textColor = [UIColor blueColor];
    sectionLabel.numberOfLines = 0;
    sectionLabel.lineBreakMode = UILineBreakModeWordWrap;

    [roView addSubview:sectionLabel];
    return roView; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T01:30:26.640

你没有给标签一个有意义的框架——只有 CGRectZero。设置标签后，调用`-sizeToFit`它，如下所示：

```
UILabel *sectionLabel = [[UILabel alloc] initWithFrame:CGRectZero];
sectionLabel.backgroundColor = [UIColor clearColor];
sectionLabel.font = [UIFont boldSystemFontOfSize:18];
sectionLabel.frame = CGRectMake(70,18,200,20);
sectionLabel.text =  @"A really really long text A really really long text A really really long text";
sectionLabel.textColor = [UIColor blueColor];
sectionLabel.numberOfLines = 0;
sectionLabel.lineBreakMode = UILineBreakModeWordWrap;
[sectionLabel sizeToFit]; 
```

编辑：我现在看到您确实设置了标签框架。但是高度太短，无法显示所有文本。

# html - 如何在 CSS 中复制这种效果？

> ID：12134842
> 
> 赞同：3
> 
> 时间：2012-08-26T23:52:47.660
> 
> 标签：html, css

![在此处输入图像描述](../Images/6ef7cdb3546e0b4f997b17caa4fa82fb.png)

[http://i.imgur.com/Ta7cZ.png](https://i.imgur.com/Ta7cZ.png)

Who右边的部分带有----------

是李的背景吗？对于如何创建类似的东西，我真的是一片空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T00:11:04.260

在这里，您可以解决这个问题。

[http://jsfiddle.net/fjZfL/3/](http://jsfiddle.net/fjZfL/3/)

HTML：

```
<div id="box">
    <h2>who?</h2>
    <p>I am 22 Year old designer …&lt;/p>
</div> 
```

CSS：

```
#box {
    width: 200px;
    height: 150px;
    background: #eee;
    padding: 0 8px;
}
h2 {
    display: inline-block;
    padding: 18px 4px 0 10px;
    margin: 0;
    background: #eee;
}
p {
    border-top: 1px solid #ccc;
    border-bottom: 1px solid #ccc;
    padding: 20px 10px;
    margin-top: -10px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T00:05:55.857

或者 - 有人力资源解决方案

[http://jsfiddle.net/UYYh5/4/](http://jsfiddle.net/UYYh5/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T23:54:48.650

这不就是一条横线吗？又名`<hr />`？

好吧，刚刚搜索了图片中的文字，并找到了网站。我猜这种应用于 p 块的 CSS 样式是如何完成的。

```
border-top: 1px solid rgba(0, 0, 0, 0.1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T00:37:06.493

复制这种效果的一种简单方法是：

```
div.wrapper{ width:  300px;
             font-family: 'Times New Roman';
             font-size: 13px;
             color:  #3b3a3a;
}
div.wrapper div{
    margin: 0px 0px;
}
div.header span{
    font-size: 14px;
    font-family: Verdana;
    font-weight: 300;
    display: inline-block;
    margin: 0px;
    width:  60px;
    background-color: #fff;

}
div.content p
{
    margin: 3px;
}
div.content p span
{
    background:url('http://i.imgur.com/Ta7cZ.png') no-repeat -150px -140px;
    height: 7px;
    width: 30px;
    display: inline-block;
}
div.wrapper div.header{
    background:url('http://i.imgur.com/Ta7cZ.png') no-repeat 0px -10px;
}
div.wrapper div.footer{
    background:url('http://i.imgur.com/Ta7cZ.png') no-repeat -10px -170px;
    height: 18px;
}

    <div class="wrapper">
        <div class="header"><span>Who?</span></div>
        <div class="content"><p>I'm a 22 year old designer who spends more time on the internet than I should.  
            I am currently living in Upstate NY, but would love to someday move away from the cold.  I am a sucker 
            for Apple products and enjoy a well-brewed beer.<span></span></p>
        </div>
        <div class="footer"></div>
    </div> 
```

对我来说，对于那么薄的背景，图像总是看起来更干净。在我的示例中，您显然会削减图像，但您明白了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T00:03:28.017

给你：http: [//jsfiddle.net/x63x2/](http://jsfiddle.net/x63x2/)

CSS：

```
body { font-family:arial,helvetica,sans-serif ;
}

.block-item { width:350px ;
    height:300px ;
    padding:10px ;
    margin:auto ;
    background:#D4D4D4 ;
}

p { font-size:13px ;
    margin-top:14px ;
    margin-bottom:14px ;
    line-height:18px ;
}

.block-item h1 { display:block ;
    background:#D4D4D4 ;
    font-size:18px ;
    color:red ;
    padding:0px 5px 0px 0px ;
    position:absolute ;
    top:3px ;
} 
```

和 HTML：

```
<div class="block-item">
<hr>
<h1>Who?</h1>
<p>Nulla porttitor sodales quam, et molestie mi euismod vel. Nunc iaculis ligula ac dolor congue consequat. Cras tristique vulputate auctor. Pellentesque mattis massa vel arcu auctor tristique. Mauris rhoncus porta diam, sit amet euismod turpis viverra eu. Nulla in ligula sed nibh tristique laoreet. Nullam id magna erat. Sed porttitor mauris vel diam pharetra a volutpat tellus volutpat. Quisque placerat laoreet odio sit amet posuere. Duis id libero nisl.</p>
</div>​ 
```

如果你想打扮这条线，你可以用 CSS 来设计你的 HR。这只是一个基本的例子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T00:15:58.180

这是另一种选择。

[http://jsfiddle.net/PZxA7/](http://jsfiddle.net/PZxA7/)

```
.title{
 background-color:white;
    position:absolute;
    z-index:10;
}
.bar
{
    border-bottom:1px solid;
    position:absolute;
    display:inline-block;
    color:#b5b5b5;
    margin-top:-10px;
    width:350px;
}
.container
{
    width:350px;
}

<div class="container">

    <div class="title">W H O?</div>

    <div class="bar"/>&nbsp;</div>

<p><br/>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p> 
```

# nhibernate - Nhibernate 抛出错误没有持久性：

> ID：12134844
> 
> 赞同：0
> 
> 时间：2012-08-26T23:52:54.300
> 
> 标签：nhibernate

映射文件：

```
<?xml version="1.0"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"  auto-import="true">
    <class name="PlayHibernate.Employee, PlayHibernate" lazy="false">
        <id name="id" access="field">
            <generator class="native"/>  
        </id>  
        <property name="name" access="field" column="name"/>  
        <many-to-one access="field" name="manager" column="manager" cascade="all"/>  
    </class>
</hibernate-mapping> 
```

我尝试将映射文件设置为资源，但这只是将错误消息更改为“Unhandled Exception: NHibernate.MappingException: PlayHibernate.Employee.hbm.xml (5,31): XML validation error: The element 'id' in namespace “urn:nhibernate-mapping-2.2”不能包含文本。---> System.Xml.Schema.XmlSchemaValidationExceptio n：命名空间“urn:nhibernate-mapping-2.2”中的元素“id”不能包含文本。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:45:46.800

第一个错误*“No persister for...”*是未将映射文件设置为嵌入式资源的结果。

当前错误与您的`id`定义有关。看起来您的`<id>`定义中有一些文本。也许一些不允许的空格？试着把它写成：

```
<id name="id" access="field" column="uid" generator="native" /> 
```

此外，如果这没有帮助，请尝试使用 id 以外的其他名称作为字段名称。也许`Id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T19:40:51.263

在 Visual Studio 中，请记住将 .hbm.xml 文件的属性：“编译操作”更改为：“嵌入式资源”

# regex - 正则表达式（a？）*不是指数的？

> ID：12134852
> 
> 赞同：12
> 
> 时间：2012-08-26T23:53:50.007
> 
> 标签：regex, theory, pcre, backtracking, finite-automata

我目前正在研究正则表达式的问题，当与某个输入匹配时，它可能最终会在指数时间内运行，例如`(a*)*`，当与字符串 aaaaab 匹配时`(a|a)*`可能会出现“[灾难性回溯](http://www.regular-expressions.info/catastrophic.html)” - 对于每个额外的“a”在匹配的字符串，尝试匹配字符串所需的时间加倍。仅当引擎使用回溯/NFA 方法尝试在失败之前尝试树中所有可能的分支时才会出现这种情况，例如 PCRE 中使用的方法。

我的问题是，为什么不`(a?)*`脆弱？根据我对回溯的理解，字符串 "aaaab" 中应该发生的事情本质上是`(a|a)*`. 如果我们使用标准的 Thomspson NFA 构造来构造 NFA，那么对于发生的每个 epsilon 转换，引擎肯定必须继续采用它们并以与两个 a 的情况相同的方式回溯？例如（省略一些步骤以及 @ 替换 epsilon 的位置）：

"aaaa" 匹配，但不能匹配 'b'，失败（回溯）
"aaaa@" 匹配，'b' 失败（回溯）
"aaa@a" 匹配，'b' 失败（回溯）
"aaa@a@ " 匹配，'b' 失败（回溯）
...
"@a@a@a@a@" 匹配，'b' 失败（回溯）

尝试所有可能的 epsilons 和 a 组合，肯定会导致路由的指数级爆炸？

从 NFA 中删除 epsilon 转换是有意义的，但我相信这具有从`(a*)*`模式中删除所有非确定性的效果。不过，这绝对是脆弱的，所以我不完全确定发生了什么！

非常感谢您！

**编辑：** Qtax 已经指出，当使用传统回溯遍历 NFA 时，epsilons 不能仍然存在，否则`(@)*`将尝试永远匹配。那么，什么样的 NFA 实施可能会导致指数级增长，而`(a*)*`不是这样呢？这确实是问题的症结所在。`(a|a)*``(a?)*`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:58:47.003

好的，经过一番调查，我最终发现这是由于在 NFA 实现中使用了“障碍”。简而言之，障碍被放置在 NFA 中的战略点（例如在 NFA 构造 a* 中的“a”转换之后的节点上）。他们要求比赛从上一次击中障碍时开始。这可以防止 NFA 陷入与无限数量的 epsilon 匹配的情况并允许它终止。

换句话说，不可能从一个障碍到仅匹配电子移动的同一障碍 - 如果发生这种情况，路线将被丢弃并从前一点开始回溯。这还有一个副作用，即 (a?)* 不容易受到指数爆炸的影响，因为 a? 第二次无法匹配 null 。

# html - 如何让 dl dds 彼此对齐

> ID：12134855
> 
> 赞同：0
> 
> 时间：2012-08-26T23:54:12.003
> 
> 标签：html, css

我有以下html：

```
<html>
<head>
<style type="text/css">
dt
{
clear:left;
float:left;
padding-right:50px;
}
</style>
</head>
<body>
<dl>
<dt>First Answer</dt>
<dd>Dog</dd>
<dt>Second Answer</dt>
<dd>Cat</dd>
</dl>
</body>
</html> 
```

当你运行它时，狗和猫不排队。我真的很希望能把 Dog 和 Cat 的第一个字母排成一行。

有谁知道如何设计这个来实现这个？

而不是使用表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:01:24.383

您可以在 dt 元素上设置固定宽度。

```
dt
{
clear:left;
float:left;
width:200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:56:25.117

这是您更新的 HTML/CSS

```
<style type="text/css">
dt{
    clear:left;
    float:left;
    padding-right:50px;
    width:200px;
}
</style>
<body>
    <dl>
       <dt>First Answer</dt>
       <dd>Dog</dd>
       <dt>Second Answer</dt>
       <dd>Cat</dd>
       </dl>
</body> 
```

这是您更新的代码...

# google-apps-script - Google Apps 脚本 JDBC 连接错误 - Amazon RDS MySQL

> ID：12134858
> 
> 赞同：0
> 
> 时间：2012-08-26T23:54:59.850
> 
> 标签：google-apps-script

[我遵循了https://developers.google.com/apps-script/jdbc](https://developers.google.com/apps-script/jdbc)中显示的 Google Apps Script JDBC 示例，但未能成功连接到 Amazon 托管的 MySQL 数据库。我的连接字符串看起来像这样（擦洗）：

```
var conn = Jdbc.getConnection("jdbc:mysql://myAmazonhost:3306/", "myUser", "myPass"); 
```

我可以使用 MySQL Workbench 和 Navicat 从我的开发系统远程连接到 Amazon MySQL 数据库，并在 Google 脚本中检查/验证了主机名、用户名和密码。

[我将访问本地数据库](https://developers.google.com/apps-script/jdbc#accessing)下列出的 Google 服务器添加到了 Amazon 安全组，但没有运气。我不断收到错误：

> 无法建立数据库连接。检查连接字符串、用户名和密码。

我可能错过了一些简单的东西。还有其他人从 Google 脚本连接到 Amazon MySQL 数据库吗？我肯定会很感激任何建议。谢谢。

（编辑...）

抱歉，我在清理上面的示例时无意中删除了数据库名称。DB 名称在代码中指定。

```
var conn = Jdbc.getConnection("jdbc:mysql://myAmazonhost:3306/myDB", "myUser", "myPass"); 
```

在我发布这个问题十二小时后，脚本开始工作——没有数据库连接错误。我使用从 Amazon MySQL 数据库中检索到的信息构建了一个报告，该报告创建了一个电子表格。（看到所有这些都在云中运行真是太酷了。）

但是...我没有对 JDBC 连接字符串进行任何更改。亚马逊端的安全组配置也没有改变。它刚刚开始工作。

今天早上，我开始写剧本。我没走多远——弹出了又大又丑的红色数据库连接错误消息。代码没有变化。它刚刚停止工作。我确认 MySQL 数据库已启动并可从我的桌面管理程序访问。没有问题。

是否还有其他人遇到从 Google 脚本到外部数据库的不稳定连接？我希望这只是一个孤立的故障。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:20:19.920

原来这个问题与数据库引擎版本有关。我使用引擎版本 5.5.25a 创建了一个新实例，并且连接正常。我回到原来的数据库，将它从 5.5.8 修改为 5.5.25a，它运行良好。不确定 Google Apps Script 发生了什么，但将引擎版本更改为 5.5.25a 解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:51:25.980

您必须指定要连接到哪个数据库。尝试

```
var conn = Jdbc.getConnection("jdbc:mysql://myAmazonhost:3306/DB_NAME", "myUser", "myPass"); 
```

# python-2.7 - 使用 Python 单击 Selenium 2 webdriver 中的元素

> ID：12134867
> 
> 赞同：0
> 
> 时间：2012-08-26T23:56:24.720
> 
> 标签：python-2.7, selenium-webdriver

我查看了 Selenium 文档，但找不到单击元素的示例。我检查了一个名为附件的元素。

每次我尝试单击元素时，Python 都会给我一个错误，通常是以下之一：

> {'using': by, 'value': value})['value'] 文件 "C:\Python27\lib\site-packages\selenium-2.24.0-py2.7.egg\selenium\webdriver\remote\ webdriver.py”，第 155 行，在执行 self.error_handler.check_response(response) 文件“C:\Python27\lib\site-packages\selenium-2.24.0-py2.7.egg\selenium\webdriver\remote\errorhandler .py"，第 147 行，在 check_response raise exception_class(message, screen, stacktrace) NoSuchElementException: Message: u'Unable to locate element: {"method":"name","selector":"add individual"}'

这是我正在尝试的代码：

```
driver.find_element_by_name("attatchments")
elem.click() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:24:00.193

如果您知道元素 id，那么您可以将其作为

```
element = driver.find_element(by=By.ID, value="element_id") 
```

或者

```
element = driver.find_element_by_id("element_id") 
```

然后使用`element.click()`

您可以通过此链接了解 Webdriver 类中的方法：http: [//selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_remote/selenium.webdriver.remote.webdriver.html](http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_remote/selenium.webdriver.remote.webdriver.html)

# java - 如何找出字符的位置

> ID：12134872
> 
> 赞同：0
> 
> 时间：2012-08-26T23:57:11.640
> 
> 标签：java, indexof

我有一个字符串（“恐龙”），但我不完全知道如何，但是我如何获得字符“o”的位置，是否有可能获得两个位置，就像我的字符串是（“水池”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T00:06:08.400

至于您的第一个问题，您可以使用[String#indexOf(int)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)来获取字符串中每个 'o' 的索引。

```
int oPos = yourString.indexOf('o'); 
```

至于你的第二个问题，可以通过创建一个使用[String.indexOf(int, int)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int,%20int%29)的方法来获取给定字符的所有位置，跟踪前一个索引，这样你就不会重复搜索字符串的部分。您可以将位置存储在数组或列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:14:26.440

`indexOf`与循环一起使用：

```
String s = "Pool";
int idx = s.indexOf('o');
while (idx > -1) {
  System.out.println(idx);
  idx = s.indexOf('o', idx + 1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:53:35.573

尝试这个

```
 String s= "aloooha";
 char array[] = s.toCharArray();
 Stack stack = new Stack();

 for (int i = 0; i < array.length; i++) {
    if(array[i] == 'o'){
      stack.push(i);
    }
 }        
 for (int i = 0; i < stack.size(); i++) {
    System.out.println(stack.get(i));
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T01:00:37.477

您是否尝试过将 String 转换为 char 数组？

```
int counter = 0;
String input = "Pool";
for(char ch : input.toCharArray()) {
    if(ch == 'o') {
        System.out.println(counter);
    }
    counter += 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T00:21:00.980

简单地：

```
public static int[] getPositions(String word, char letter)
{
    List<Integer> positions = new ArrayList<Integer>();
    for(int i = 0; i < word.length(); i++) if(word.charAt(i) == letter) positions.add(i);

    int[] result = new int[positions.size()];
    for(int i = 0; i < positions.size(); i++) result[i] = positions.get(i);

    return result;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T00:21:47.383

这可能有点过火了，但是嘿;）

```
String master = "Pool";
String find = "o";

Pattern pattern = Pattern.compile(find);
Matcher matcher = pattern.matcher(master);

String match = null;

List<Integer[]> lstMatches = new ArrayList<Integer[]>(5);
while (matcher.find()) {

    int startIndex = matcher.start();
    int endIndex = matcher.end();

    lstMatches.add(new Integer[] {startIndex, endIndex});

}

for (Integer[] indicies : lstMatches) {

    System.out.println("Found " + find + " @ " + indicies[0]);

} 
```

给我

```
Found o @ 1
Found o @ 2 
```

很棒的是，你也可以找到“oo”

# javascript - 无法让 HTML5 Canvas 工作

> ID：12134876
> 
> 赞同：0
> 
> 时间：2012-08-26T23:57:52.477
> 
> 标签：javascript, html, canvas

我正在学习 HTML5，但无法在屏幕上显示任何内容。它只是完全白色。所有的代码都在下面。

HTML：

```
<head>
<script src="canvas.js"></script>

</head>
<body>
<section id="main">
    <canvas id="canvas" width="600" height="400">
        Get Chrome
    </canvas>
</section>
</body>
</html> 
```

JavaScript

```
 function doFirst(){
var x = document.getElementById('canvas');
canvas = x.getContext('2d');

canvas.shadowOffsetX = 4;
canvas.shadowOffsetY = 4;
canvas.shadowBlur = 6;
canvas.shadowColor = 'rgba(0,0,255,.5)';

canvas.font="36px Tahoma";
canvas.textAlign="end";
canvas.strokeText("omgjj", 300, 500);
 }
 window.addEventListener("load", doFirst, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:06:54.867

你的 Y 坐标不在画布上。改变这个：

```
canvas.strokeText("omgjj", 300, 500); 
```

对此：

```
canvas.strokeText("omgjj", 300, 200); 
```

您的文字将出现：
![画布的屏幕截图，显示文本“omgjj”，描边，带有蓝色阴影](../Images/6e25f3e53e28e871ec5a1b54d437a05c.png)

# xslt - XSLT 1.0 - 连接已知子节点，按未知父节点分组

> ID：12134880
> 
> 赞同：2
> 
> 时间：2012-08-26T23:58:07.973
> 
> 标签：xslt, xslt-grouping

我想变身

```
 <entry>
        <parent1>
            <object_id>1580</object_id>
        </parent1>
        <parent1>
            <object_id>1586</object_id>
        </parent1>
        <parent2>
            <object_id>1582</object_id>
        </parent2>
        <parent2>
            <object_id>1592</object_id>
        </parent2>
    </entry> 
```

进入

```
 <entry>
        <parent1>1580-1586</parent1>
        <parent2>1582-1592</parent2>
    </entry> 
```

顶级条目名称未知。父节点名称未知，同名父节点的数量可能会有所不同。子节点称为“object_id”。

所以，我想以抽象的方式对未知的父母进行分组，并连接子节点值，用“-”分隔。

[使用 XSLT 合并 XML 节点](https://stackoverflow.com/questions/6966392/merge-xml-nodes-using-xslt?rq=1)接近于回答这个问题，就像[Group/merge 中相同节点的子节点一样](https://stackoverflow.com/questions/11900006/group-merge-childs-of-same-nodes-in-xml-xslt?rq=1)，但它们并不是我所需要的。

到目前为止，我有：

```
 <xsl:key name="groupName" match="*[object_id]" use="."/>
    <xsl:template match="*[generate-id(.) = generate-id(key('groupName', .))]">
        <xsl:copy>
        <xsl:call-template name="join"> 
                <xsl:with-param name="list" select="object_id" /> 
                <xsl:with-param name="separator" select="'-'" />                                             
        </xsl:call-template>
        </xsl:copy> 
    </xsl:template>

    <xsl:template name="join"> 
    <xsl:param name="list" /> 
    <xsl:param name="separator"/>     
    <xsl:for-each select="$list"> 
      <xsl:value-of select="." /> 
      <xsl:if test="position() != last()"> 
        <xsl:value-of select="$separator" />         
      </xsl:if> 
    </xsl:for-each> 
    </xsl:template> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:08:15.217

这是一个稍微不同的解决方案，在我注意到 Dimitre 的帖子之前开发。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />  

<xsl:key name="kParents" match="*[object_id]" use="local-name()" />

<xsl:template match="@*|node()">
 <xsl:copy>
   <xsl:apply-templates select="@*|node()" />
 </xsl:copy>
</xsl:template>

<xsl:template match="*[*/object_id]">
  <xsl:variable name="grandparent-id" select="generate-id()" /> 
 <xsl:copy>
   <xsl:apply-templates select="@* | node()[not(object_id)] |
    *[generate-id()=
      generate-id(
        key('kParents',local-name())[generate-id(..)=$grandparent-id][1])]"
      mode="group-head" />
 </xsl:copy>
</xsl:template>

<xsl:template match="*[object_id]" mode="group-head">
 <xsl:variable name="grandparent-id" select="generate-id(..)" /> 
 <xsl:copy>
   <xsl:apply-templates select="@* | node()[not(self::object_id)]" />
   <xsl:for-each select="key('kParents',local-name())[generate-id(..)=$grandparent-id]/object_id">
     <xsl:value-of select="." />
     <xsl:if test="position() != last()"> - </xsl:if>  
   </xsl:for-each>  
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

## 更新

我更新了样式表以反映 OP 关于“-”作为分隔符的评论，而不是第一个值和最后一个值之间的分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T00:34:26.747

**这种转变：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kObjByValAndParent" match="object_id"
  use="name(..)"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*/*"/>

 <xsl:template priority="2" match=
 "/*/*[generate-id(object_id)
      =
       generate-id(key('kObjByValAndParent',name())[1])
      ]
 ">
   <xsl:copy>
     <xsl:value-of select=
     "concat(object_id, ' - ',
             key('kObjByValAndParent',name())[last()]
            )
     "/>
   </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<entry>
    <parent1>
        <object_id>1580</object_id>
    </parent1>
    <parent1>
        <object_id>1586</object_id>
    </parent1>
    <parent2>
        <object_id>1582</object_id>
    </parent2>
    <parent2>
        <object_id>1592</object_id>
    </parent2>
</entry> 
```

**产生想要的正确结果：**

```
<entry>
   <parent1>1580 - 1586</parent1>
   <parent2>1582 - 1592</parent2>
</entry> 
```

**说明**：

1.  正确使用和覆盖[**身份规则**](http://www.dpawson.co.uk/xsl/sect2/identity.html)。

2.  正确使用[**孟池分组法**](http://www.jenitennison.com/xslt/grouping/muenchian.html)。

* * *

**二、如果必须将所有值连接在一起，请使用此稍作修改的解决方案：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kObjByValAndParent" match="object_id"
  use="name(..)"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*/*"/>

 <xsl:template priority="2" match=
 "/*/*[generate-id(object_id)
      =
       generate-id(key('kObjByValAndParent',name())[1])
      ]
 ">
   <xsl:copy>
     <xsl:for-each select="key('kObjByValAndParent',name())">
      <xsl:if test="not(position()=1)"> - </xsl:if>
      <xsl:value-of select="."/>
     </xsl:for-each>
   </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

# java - 如何修复这个正则表达式？

> ID：12134881
> 
> 赞同：1
> 
> 时间：2012-08-26T23:58:14.157
> 
> 标签：java

```
(W[AY]|C[AO])(\\s+\\d{5}) 
```

所以这目前解析以 W 或 C 开头的状态，后跟邮政编码。但是，它将所有这些作为一组返回，如示例 WA 98121 CA 56679 将返回组 1 是 WA 98121，组 2 是 CA 56679。

如何解决此问题以在 group1 WA group2 98121 group3 CA group4 56679 中检索

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T00:35:03.937

通常，您希望在单个匹配中捕获搜索“短语”的所有部分，并通过使用组来分解短语的各个部分，处理匹配项，然后再次匹配下一个短语。因此，我将通过向您展示如何使用这种方法进行编码来回避您的问题。

下面是一些可运行的代码，演示了如何正确匹配和使用组：

```
// Regex to match a "state zip" sequence, and capture each part in its own group
String regex = "(W[AY]|C[AO])\\s+(\\d{5})";

// Some sample input
String input = "blah blah WA 98121 blah blah CA 56679 blah blah";

Matcher matcher = Pattern.compile(regex).getMatcher(input);
while (matcher.find()) { // move to next match, if one exists
    String state = matcher.group(1);
    String zip = matcher.group(2);
    // Work with state and zip values
    System.out.println("State = " + state + ", zip = " + zip);
} 
```

输出：

```
State = WA, zip = 98121
State = CA, zip = 56679 
```

请注意，捕获的正则表达式组的编号从`1`.
仅供参考，小组`0`是整个比赛。

# javascript - jQuery中的可暂停打字机效果

> ID：12134885
> 
> 赞同：1
> 
> 时间：2012-08-26T23:59:25.303
> 
> 标签：javascript, jquery, animation, text

我正在使用[Jason Frame 的 Grab Bag](http://onehackoranother.com/projects/jquery/jquery-grab-bag/text-effects.html)的打字机插件。

但是，我现在发现自己需要能够在运行过程中的任何时候暂停和恢复这台打字机。

理想情况下，我必须`.typewriter("pause")`暂停它，并`.typewriter("resume")`从停止的地方恢复动画。

我尝试`paused`在插件中设置一个变量，并在每次迭代时检查变量的间隔运行——如果为真，则什么也不做。

但是，由于我制作jQuery插件的技术欠缺，每次调用该函数暂停打字机，就又重新开始了。我怀疑`paused`变量被重置了。

我将如何使这个插件可以暂停？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:19:56.387

## *[jsBin 演示](http://jsbin.com/eguxev/1/edit)*

在此处添加这 2 行：

```
(function($) {      
    $.fn.typewriter = function() {
        this.each(function() {
            var $ele = $(this), str = $ele.text(), progress = 0;
            $ele.text('');
            timer = setInterval(function() {
              if(pause===false){    // ADD THIS LINE ////////////////////////
                  $ele.text(str.substring(0, progress++) + (progress & 1 ? '_' : ''));
                  if (progress >= str.length) clearInterval(timer);
              }                     // ADD THIS LINE ////////////////////////
            }, 100);
        });
        return this;
    };   
})(jQuery);

$("#typewriter").typewriter(); // run your plugin 
```

我创造了这个：

```
var pause = false;
$('#play_pause').click(function(){
  pause= !pause ? true : false;    // toggle true/false pause states
}); 
```

**编辑：**在下面的评论中找到更好*的类似插件的*解决方案！

# model-view-controller - 目录访问是否应该由模型或控制器来处理？

> ID：12134886
> 
> 赞同：1
> 
> 时间：2012-08-26T23:59:48.917
> 
> 标签：model-view-controller, directory

我有一个需要在简单界面中添加和删除图像文件的应用程序。控制器应该是直接删除这些文件的那个，还是应该删除文件在我的模型的域中？

我问是因为文件可以被视为一种“数据”。只想知道约定是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:34:51.180

这取决于您的模型是如何设计的，但总的来说，我认为这是模型的问题。

这是因为即使添加/删除现在只是一个普通的文件系统操作包装器，它也可能在未来涉及数据库操作/修订支持：这样控制器就不会知道实际发生了什么。

```
for f in filesToDelete:

    f.delete();

endfor; 
```

`delete`可能在哪里：

```
public function delete()
{

    unlink(this.path);

} 
```

或者

```
public function delete()
{

    db::remove(this.path);  // or whatever

    unlink(this.path);

} 
```

如果您需要批处理操作，您只需为`Folder`/`SmartFolder`类建模以执行它们。

# jquery - 选择列表选择更改另一个选择列表

> ID：12134889
> 
> 赞同：1
> 
> 时间：2012-08-27T00:00:01.340
> 
> 标签：jquery, select

我在列标题中有一个主选择列表，我需要更改它下方列中的选择列表。

这里是大师：

```
 <select class='names header-select flag_pass_ID nsp-select' name='g1_head_select_flag_pass_ID'  onchange='select_all_batch(1, 1, "flag_pass_ID");' >
                        <option selected='selected' value='' ></option>
                        <option value='3' >Flag</option>
                        <option value='4' >Pass</option>
</select> 
```

这是需要更改的一个：

```
<td class='data-edit widget data-select nsp-select flag_pass_ID' id='2503_r2_c8'>
                    <select class='names flag_pass_ID data-select nsp-select'  name='2503_select_table_nsp_status__flag_pass_ID'  onchange='make_input_changed(1);' size=1 >
                        <option selected='selected' value='' ></option>
                        <option value='3' >Flag</option>
                        <option value='4' >Pass</option>
                </select>
</td> 
```

这是调用的函数。

```
 function select_all_batch(grid_NM, current_page_NM, colclass) {
      if ( (typeof input_changed[grid_NM] != 'undefined') && 
               (input_changed[grid_NM] == true) ) {
        alert("Please Save or Cancel your other changes first." );
        return false;
      } else {
        //make_input_changed(grid_NM);
        var selection = $('.header-select.' + colclass + ' option:selected').val();
        $('.flag_pass_ID option[value=selection]').each(function() {
             (this).attr("selected", "selected");
        });
         //$('.flag_pass_ID').each(function() {
         //      (this).val(selection);
         //});
        //$("." + colclass + " option[value=selection]").each(function() {
        //     (this).val(selection);
        //     (this).attr("selected", "selected");
         //});
       return false;
       }
    } 
```

我已经确认 var 选择正在获得价值。

问题在于在下面的选择列表中设置选定的选项。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:19:41.797

```
function select_all_batch (grid_NM, current_page_NM, colclass) {
    var selection = $('.header-select.' + colclass + ' option:selected').val();
    $('.flag_pass_ID select option[value=' + selection + ']').attr('selected', 'selected');
} 
```

如果第二个选择的值与第一个选择对应，这应该可以工作，即使它们的顺序不同。

[http://jsfiddle.net/EBZG9/](http://jsfiddle.net/EBZG9/)

# java - 方法本地类？

> ID：12134891
> 
> 赞同：-4
> 
> 时间：2012-08-27T00:00:25.333
> 
> 标签：java

当我们在函数中声明一个类并创建该类的变量时，该类的对象是推入堆栈还是堆？在内部类的上下文中使用 final 关键字时，我有些困惑？如果变量和类对象都存在于堆栈中，为什么我们需要将变量命名为 final ？

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:16:52.217

> 当我们在函数中声明一个类并创建该类的变量时，该类的对象是压入堆栈还是堆？

您的术语不正确，这可能是您困惑的根源：

*   类的声明不会导致分配任何空间……除了在加载和初始化类时用于表示代码、静态等的空间的一次性分配。

*   Java 有方法，而不是函数。

*   当您在方法中声明变量（即局部变量）时，变量本身的空间会在堆栈上分配。（如果您声明一个静态或实例变量，该空间将成为堆节点的一部分。）

*   当您创建类的实例（即对象）时，该实例的空间在堆¹上分配。该实例的引用可以分配给堆栈（用于方法中的局部变量）或堆（用于静态或实例变量）上的*先前分配*的变量...但也可以立即丢弃。无论哪种方式，用于引用的空间分配都与实例的创建无关。

> 在内部类的上下文中使用 final 关键字时，我有些困惑？如果变量和类对象都存在于堆栈中，为什么我们需要将变量命名为 final ？

是必需的`final`，因为 Java 不支持正确的闭包。当内部类引用封闭范围内的*局部*变量时，会发生什么情况是变量的值被传递给内部类并存储在隐藏变量中。允许编译器有效地对`final`应用程序隐藏它。由于应用程序无法更改变量的内容，因此无法判断变量²有两个副本。

* * *

^(1 - 这有点过于简单化了。如果您有兴趣，请阅读“逃逸分析”。)

^(2 - 这是局部变量存储在堆栈上的规则的例外。在这种情况下，变量的副本*也*存储在内部类实例的堆节点中。然而，这是一个实现细节......就像所有堆栈与堆的东西一样。如果 JVM 架构被更改为支持闭包，事情可能会有所不同。)

# iphone - ios方法在字符串中插入空格

> ID：12134893
> 
> 赞同：1
> 
> 时间：2012-08-27T00:00:40.203
> 
> 标签：iphone, objective-c, ios, ipad, nsstring

在我的应用程序中，我从亚马逊的 s3 下载了一个文件，除非文件名中没有空格，否则该文件不起作用。例如，其中一个文件是“HoleByNature”。我想将其显示为“Hole By Nature”，即使文件名中仍然没有空格。

我正在考虑编写一种方法来搜索从第一个字符（不是第 0 个）开始的字符串，每次我找到一个大写字母时，我都会创建一个带有子字符串的新字符串，直到该索引带有空格和一个子字符串，直到其余部分.

所以我有两个问题。

1.  如果我使用 NSString 的 characterAtIndex，我怎么知道那个字符是否是大写的？
2.  有一个更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T00:11:19.597

适用于所有 unicode 大写和标题字母

```
- (NSString*) spaceUppercase:(NSString*) text {
    NSCharacterSet *set = [NSCharacterSet uppercaseLetterCharacterSet];
    NSMutableString *result = [NSMutableString new];
    for (int i = 0; i < [text length]; i++) {
        unichar c = [text characterAtIndex:i];
        if ([set characterIsMember:c] && i!=0){
            [result appendFormat:@" %C",c];
        } else {
            [result appendFormat:@"%C",c];
        }
    }   
    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T00:40:27.930

我不会采用这种方法，因为我知道您可以下载带空格的文件，请在构造 NSUrl 对象 @"my_web_site_url\sub_domain\sub_folder\My%20File.txt 时尝试这个

这将从提供​​的 URL 下载“My File.txt”。所以基本上你可以用 %20 替换 URL 中的所有空格

参考：

[http://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T01:32:01.237

得到它与 Jano 的答案一起使用，但使用 Richard J. Ross III 建议的 isupper 函数。

```
- (NSString*) spaceUppercase:(NSString*) text 
{
    NSMutableString *result = [NSMutableString new];
    [result appendFormat:@"%C",[text characterAtIndex:0]];
    for (int i = 1; i < [text length]; i++) 
    {
         unichar c = [text characterAtIndex:i];
         if (isupper(c))
         {  
             [result appendFormat:@" %C",c];
         } 
         else 
         {
             [result appendFormat:@"%C",c];
         }
    }
    return result;
} 
```

# c# - SQL 原子事务不是原子的

> ID：12134894
> 
> 赞同：2
> 
> 时间：2012-08-27T00:00:42.803
> 
> 标签：c#, sql, stored-procedures, atomic

下面是对我正在处理的两个存储过程的两次调用的代码。我以为我已经设置为执行全部或全部原子事务，但是如果在第二个存储过程调用中出现错误，第一个仍然会执行。我仍然是用 C# 编写这些的新手，所以任何帮助将不胜感激。谢谢！

我还应该提到其他我觉得奇怪的事情：如果抛出异常并且程序进入“catch”块，它仍然会运行“finally”块中的代码。我的理解是，如果抛出异常，“catch”块中的代码将被执行。

编辑感谢下面的回复，我已经修复了 catch/finally 混淆并添加了一个 ExecuteNonQuery() 调用，因此也调用了第一个存储过程。但是，第一个存储过程在被调用时，需要先被调用并执行，然后第二个存储过程才能完成它的工作。这是可以在原子事务中完成的，还是必须单独运行？

```
try
{
    cm = Dts.Connections["serverName"];
    sqlConn = (SqlConnection)cm.AcquireConnection(Dts.Transaction);
    sqlTrans = sqlConn.BeginTransaction("QueueUpdates");                                

    if (dummyIndicator.Equals("Y"))
    {
        string temp = retrievedMessage.Substring(203, 17);
        int newNumber = (int)(long.Parse(temp) / 777);

        SqlParameter newNum = new SqlParameter("@newNum", num.Value);
        SqlParameter oldNum = new SqlParameter("@oldNum", newNumber);

        sqlComm = new SqlCommand("DB.dbo.sp_UpdateNumber", sqlConn, sqlTrans);
        sqlComm.CommandType = CommandType.StoredProcedure;
        sqlComm.Parameters.Add(newNum);
        sqlComm.Parameters.Add(oldNum);
        sqlComm.Transaction = sqlTrans;
        sqlComm.ExecuteNonQuery();

    }

    //Update records according to queue messages
    sqlComm = new SqlCommand("DB.dbo.sp_AgentIdAprCheck", sqlConn, sqlTrans);
    sqlComm.CommandType = CommandType.StoredProcedure;
    sqlComm.Parameters.Add(num);
    sqlComm.Parameters.Add(addOrUpdate);
    sqlComm.Parameters.Add(companyCode);
    sqlComm.Parameters.Add(agentID);
    sqlComm.Parameters.Add(firstName);
    sqlComm.Parameters.Add(lastName);
    sqlComm.Parameters.Add(suffix);
    sqlComm.Parameters.Add(taxIdType);
    sqlComm.Parameters.Add(entityType);
    sqlComm.Parameters.Add(corporateName);
    sqlComm.Parameters.Add(outNewNumber);
    sqlComm.Parameters.Add(outCurrentNumber);
    sqlComm.Parameters.Add(outOperator);
    sqlComm.Parameters.Add(outDate);
    sqlComm.Parameters.Add(returnVal);
    sqlComm.ExecuteNonQuery();

    sqlTrans.Commit();

    if (addOrUpd.Equals("ADD")){recordsAdded++;}
    else{recordsUpdated++;}

}
catch (Exception ex)
{
    _sqlDataErrors++;
    swLog.WriteLine("Message not updated: " + retrievedMessage);
    swLog.WriteLine("Error: " + ex.ToString());
    sqlTrans.Rollback();
}
finally
{                                
    cm.ReleaseConnection(sqlConn);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:34:44.217

首先，你为什么强调`transaction`原子性？`Transaction`意味着始终是原子的，任何事务**都保证它的所有**块都被提交或**没有一个**块被提交。

考虑在您的情况下使用事务 - 这取决于您的域逻辑。选择相当简单：

*   如果可能只运行第一个 sp 而没有第二个 - 不要使用单个事务。
*   如果不可能 - 使用它。

因此，如果您想进一步解释您的域规则和逻辑，我们可以说出最适合您的场景。

**UPD** 好的，在您稍微解释一下之后，我认为没有问题 - 当然您可以以特定方式实现它并获得预期的行为，以便来自您的两个 sp 的命令将由单个事务处理并作为一个事务处理。我还想指出代码的可能改进。

1.  您可以使异常处理更加具体。现在，当出现任何问题时，您正在回滚。例如 - 如果`Dts.Connections["serverName"];`是`null`，你会在`sqlTrans`初始化之前得到 NullReferenceException，然后在`catch`块中你会得到另一个`NullReferenceException`，处理`sqlTrans`，它是 null

2.  您可以将代码拆分为特定于数据库的代码和其他所有代码，以确保该块中的异常始终是数据库层的异常。我的意思是做类似的事情

    `string temp = retrievedMessage.Substring(203, 17);`

    `int newNumber = (int)(long.Parse(temp) / 777);`

在其他地方，因为它具有潜在危险并且可能引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T00:13:36.357

1.  你似乎并没有真正执行第一个 SP，所以我猜第二个中的问题可能是因为这个？

2.  的目的`finally`是始终执行，无论代码块如何结束（正常退出、异常、返回语句等都最终执行`finally`）。因此，它应该用于清理资源，而不是`catch`. 将`Commit()`调用移动到块结束之前的最后一行，并从块`try`中删除，然后事情应该开始按预期工作。`ReleaseConnection``catch`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T00:14:02.753

无论发生什么（无论是否发生异常）[都将执行 finally 块，无论 try 块如何退出，控制总是传递给 finally 块。](http://msdn.microsoft.com/en-us/library/zwc8s4fz%28v=vs.71%29.aspx)

将事务提交调用从 finally 块移到 ExecuteQuery 调用之后。此外，您正在 if 块中为第一个存储过程创建一个 sql 命令对象并将其保存在其中，`sqlComm`但在 if 块之外您正在为第二个存储过程创建另一个 sql 命令对象并将其保存在同一个`sqlComm`对象中。似乎您的第一个存储过程从未执行过。您可能必须更改那里的逻辑。

# cocos2d-iphone - 如何在 cocos2d 中显示 CCNode 的边界框？

> ID：12134895
> 
> 赞同：11
> 
> 时间：2012-08-27T00:00:41.710
> 
> 标签：cocos2d-iphone, bounding-box

作为我之前关于[显示锚点的](https://stackoverflow.com/questions/12125796/how-can-i-display-the-anchorpoint-for-a-ccnode-in-cocos2d)问题的后续问题，我将 CCSprite 子类化并更改了它的绘制方法，如下所示：

```
[super draw];
ccDrawColor4F(0, 1, 0, 1);
ccDrawCircle(self.anchorPointInPoints, 20, 0, 8, YES); 
```

这很好用。为了获得额外的荣誉，我添加了以下内容以显示其边界框：

```
CGRect bb = self.boundingBox;
CGPoint vertices[4] = {
    [self convertToNodeSpace:ccp(bb.origin.x, bb.origin.y)],
    [self convertToNodeSpace:ccp(bb.origin.x + bb.size.width, bb.origin.y)],
    [self convertToNodeSpace:ccp(bb.origin.x + bb.size.width, bb.origin.y + bb.size.height)],
    [self convertToNodeSpace:ccp(bb.origin.x, bb.origin.y + bb.size.height)],
};
ccDrawPoly(vertices, 4, YES); 
```

这也很有效，直到我重新定义一个精灵：

```
CGPoint oldPosition = [sprite convertToWorldSpace:sprite.position];
[sprite removeFromParentAndCleanup:NO];
[parentSprite addChild:sprite];
sprite.position = [sprite convertToNodeSpace:oldPosition]; 
```

精灵现在处于正确的位置，并且它的锚点绘制在它应该绘制的位置，但边界框绘制在错误的位置。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-27T09:42:30.433

一个节点的边界框是*相对于它的父*节点的。在*draw*方法中完成的绘图是在*节点的本地空间*中。*convertToNodeSpace：*将坐标从*世界*空间转换到本地空间，而不是从父空间。

当您将节点重新设置为具有不同原点的父节点同时保持该节点的相同“世界”位置时，其边界框的原点会发生变化。

您的错误是您将精灵的边界框视为其坐标位于世界空间中。

其次，您不需要进行转换到 x 空间的舞蹈来绘制精灵的边界框。打开项目的 cocos2d 文件夹中的 ccConfig.h 文件并更改

```
#define CC_SPRITE_DEBUG_DRAW 0 
```

线到

```
#define CC_SPRITE_DEBUG_DRAW 1 
```

第三，`sprite.position`point 的坐标是相对于*它的 parent*的，而不是相对于 sprite 的。当您调用 时`[node convertToWorldSpace:aPoint]`，它会将其`aPoint`视为在节点的本地空间中。如果要获取节点位置的世界坐标，则应调用节点`convertToWorldSpace:`的*parent* : `[node.parent convertToWorldSpace:node.position]`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-27T23:44:00.847

我通常用以下方式绘制 AABB：

```
Rect aabb = someNode->getBoundingBox();
DrawNode* drawNode = DrawNode::create();
drawNode->drawRect(aabb.origin, aabb.origin + aabb.size, Color4F(1, 0, 0, 1));
parentNode->addChild(drawNode, 100); 
```

*注意：如果`Rect aabb`大小为 (0,0)，则不会绘制矩形。*

# ruby-on-rails - 查询self rails中的相关表

> ID：12134897
> 
> 赞同：0
> 
> 时间：2012-08-27T00:00:55.610
> 
> 标签：ruby-on-rails

我有以下关系：

```
class User 
  has_many :followed_users, :through => :relationships, source: :followed 
```

当我`User.last.followed_users`在控制台中说时，这是可行的。`User`但是，当我在使用它的类中创建方法时`self.followed_users`失败。我希望能够`followed_users`在实现它的模型中调用。有什么帮助吗？

错误消息说该方法`followed_users`不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:53:57.710

如何定义追随者/追随者关系集：

```
class User
  has_many :followings
  has_many :followers, :through => :followings
  has_many :inverse_followings, :class_name => "Following", :foreign_key => "follower_id"
  has_many :followed_users, :through => :inverse_followings, :source => :user
end 
```

确保您有一个以下类（或您的示例中的关系类），它有一个 user_id 和一个 follower_id 来表达这种关系。

调用`self.followed_users`或`self.followers`在用户类方法中应该可以正常工作。

# c - 使用 fscanf() 读取 unsigned long long

> ID：12134900
> 
> 赞同：2
> 
> 时间：2012-08-27T00:01:24.490
> 
> 标签：c, file, scanf

如何从文件中读取 64 位无符号整数？我将它存储为实际的二进制数据，而不是字符串表示形式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T00:05:21.710

它是如何编码的？二进制数的[字节序](https://en.wikipedia.org/wiki/Endianness)通常不同。如果你想假设它与当前主机的字节序相同，你可以`fread`直接使用。否则，您需要在阅读后对其进行字节交换。

对于奖励积分，假设您可以控制它的序列化方式，您可以使用一些标志或字节顺序标记来指示字节顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T00:10:40.873

像这样的东西：

```
FILE * fp = fopen("file.bin", "rb");

uint64_t value;
if (fread(&value, sizeof value, fp) != sizeof value) { /* error */ }

// ...

fclose(fp); 
```

如果是您编写数据，这应该是开箱即用的。如果数据来自其他地方，请检查二进制格式的文档以说明序列化格式和您的平台之间的表示差异（例如，可能需要字节交换）。

* * *

另一种在教学上更有用但效率较低的方法是将数据读入缓冲区并应用您自己的处理。这更灵活（例如，您可以处理像 3-2-1-4-7-8-6-5 这样的疯狂字节序），但可能要慢得多：

```
unsigned char buf[sizeof uint64_t];
if (fread(buf, sizeof buf, fp) != sizeof buf) { /* error */ }
uint64_t leval = buf[0] + (buf[1] << 8) + /* ... */;
uint64_t beval = buf[7] + (buf[6] << 8) + /* ... */;
uint64_t ceval = (buf[0] << 16) + (buf[1] << 8) + buf[2] + (buf[3] << 24) + /* ... */; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-18T07:29:43.823

```
#include <stdio.h>
#include <stdlib.h>
#include <inttypes.h>

//function to dump hex from file.
void hexdump(const char *const filename)
{
    FILE         *file;
    unsigned char byte;

    file = fopen(filename, "rb");
    if (file == NULL)
        return;
    fprintf(stdout, "hexdump of `%s': ", filename);
    while (fread(&byte, 1, 1, file) == 1)
        fprintf(stdout, "0x%02x ", byte);
    fprintf(stdout, "\n");
}

int main(void) {
    //x64
    //write text, write binary,
    //read text, read binary

    FILE *fout, *filein;
    char *filename_txt = "myfile.txt";  //text filename
    char *filename_bin = "myfile.bin";  //bin filename

    //unsigned long long my64 = 0x1234567887654321;
    //two x64 numbers
    uint64_t my64 = 258;                        //258 (dec) = 102(hex) =  0000 0000 0000 0102 -> 0201 0000 0000 0000 -> 2010000000000000 -> to file
    uint64_t my642 = 1234567891011121314;       //1234567891011121314(dec) = 112210F4B2D230A2 (hex) = 1122 10F4 B2D2 30A2 -> A230 D2B2 F410 2211 -> A230D2B2F4102211 -> to file

    // write as text
    fout = fopen(filename_txt, "wt");
    fprintf(fout, "%" PRIu64 "\n", my64);
    fprintf(fout, "%" PRIu64 "\n", my642);
    fclose(fout);    

    // write as bytes
    fout = fopen(filename_bin, "wb");
    fwrite(&my64, sizeof(my64), 1, fout);
    fwrite(&my642, sizeof(my64), 1, fout);
    fclose(fout);    

    // read as text
    filein = fopen(filename_txt, "rt");
    if(filein==NULL){printf("Cann't open file \"myfile.txt\" for reading...\n");}
    else{
        printf("Try to reading file as text\n");
        char buf[1000];
        while (fgets(buf,1000,filein)!=NULL)
            printf("%s",buf);
        fclose(filein);
    }

    // read as bytes
        /* check that the content of the file is not printable, i.e. not text */
        hexdump(filename_bin);

    filein = fopen(filename_bin, "rb");
    if (filein == NULL){
        printf("Cann't open file \"myfile.bin\" for reading...\n");
        return -1;
    }
    else{
        uint64_t value;
        printf("Try to reading file as bytes\n");
        value = 0;

        while(fread(&value, sizeof(value), 1, filein) == 1){
            fprintf(stdout, "The value read was %" PRIu64 "\n", value);
        }

        fclose(filein);
    }

    system("pause");
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-18T23:46:27.597

有人谈到了可移植性问题，所以我在这里发布了带有 (unsigned long long) 的修改版本。请参阅代码中的注释。

```
#include <stdio.h>
//#include <stdlib.h>   //this need to working system("pause"); only
                        //system("pause"); need only to don't close window
                        //if program running by double click on exe in windows.
//#include <inttypes.h> //this need to working with uint64_t    and no need to working with (unsigned long long)

//function to dump hex from file.
void hexdump(const char *const filename)
{
    FILE         *file;
    unsigned char byte;

    file = fopen(filename, "rb");
    if (file == NULL)
        return;
    fprintf(stdout, "hexdump of `%s': ", filename);
    while (fread(&byte, 1, 1, file) == 1)
        fprintf(stdout, "0x%02x ", byte);
    fprintf(stdout, "\n");
}

int main(void) {
    //x64
    //write text, write binary,
    //read text, read binary

    FILE *fout, *filein;
    char *filename_txt = "myfile.txt";  //text filename
    char *filename_bin = "myfile.bin";  //bin filename

    //two x64 numbers

    //uint64_t
    //uint64_t my64 = 258;                      //258 (dec) = 102(hex) =  0000 0000 0000 0102 -> 0201 0000 0000 0000 -> 2010000000000000 -> to file
    //uint64_t my642 = 1234567891011121314;    //1234567891011121314(dec) = 112210F4B2D230A2 (hex) = 1122 10F4 B2D2 30A2 -> A230 D2B2 F410 2211 -> A230D2B2F4102211 -> to file

    //unsigned long long x64
    unsigned long long my64 = 1234567887654321; //as 64 bit integer
    unsigned long long my642 = 0x462D53C650DB1; //the same number, as hex

    // write as text
    fout = fopen(filename_txt, "wt");

//uint64_t
//  fprintf(fout, "%" PRIu64 "\n", my64);
//  fprintf(fout, "%" PRIu64 "\n", my642);

//unsigned long long
    fprintf(fout, "%llu%llu\n", my64);
    fprintf(fout, "%llu%llu\n", my642);

    fclose(fout);   

    // write as bytes
    fout = fopen(filename_bin, "wb");
    fwrite(&my64, sizeof(my64), 1, fout);   //write first number
    fwrite(&my642, sizeof(my64), 1, fout);  //write second number
    fclose(fout);   

    // read as text
    filein = fopen(filename_txt, "rt");
    if(filein==NULL){printf("Cann't open file \"myfile.txt\" for reading...\n");}
    else{
        printf("Try to reading file as text\n");
        char buf[1000];
        while (fgets(buf,1000,filein)!=NULL)
            printf("%s",buf); //just print buf as string.
        fclose(filein);
    }

    // read as bytes
        /* check that the content of the file is not printable, i.e. not text */
        hexdump(filename_bin);

    filein = fopen(filename_bin, "rb");
    if (filein == NULL){
        printf("Cann't open file \"myfile.bin\" for reading...\n");
        return -1;
    }
    else{
        //uint64_t value;
        unsigned long long int value;
        printf("Try to reading file as bytes\n");
        value = 0;

        while(fread(&value, sizeof(value), 1, filein) == 1){
//          fprintf(stdout, "The value read was %" PRIu64 "\n", value);     //uint64_t
            fprintf(stdout, "The value read was %llu%llu\n", value);        //unsigned long long
        }

        fclose(filein);
    }

    //system("pause");
    return 0;
} 
```

如果变量的类型为无符号字符，则可以将 1 个字节整数写入二进制并从二进制中读取。

# quartz-scheduler - Quartz Scheduler 可以串行运行作业吗？

> ID：12134903
> 
> 赞同：5
> 
> 时间：2012-08-27T00:02:23.273
> 
> 标签：quartz-scheduler, job-scheduling

我正在研究使用 Quartz Scheduler，我想知道是否可以不按时间安排作业，而是在另一个作业完成时安排作业。因此，当作业 A 完成时，它会启动作业 B。完成后，它会启动作业 C，等等。

```
Job A -> Job B -> Job C -> Job A... continuously. 
```

这是适合这项工作的工具吗？还是我应该研究其他东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T16:21:14.637

签出[`JobChainingJobListener`](http://quartz-scheduler.org/api/2.1.5/org/quartz/listeners/JobChainingJobListener.html)，内置到 Quartz （粗体我的）：

> 保存给定作业完成后要触发的作业的映射集合。如果此侦听器被通知完成具有映射的作业，则它将尝试触发后续作业。这实现了**“工作链”**，或**“穷人的工作流程”**。

没错，您正在寻找流程或工作流引擎。看看[activiti](/questions/tagged/activiti "显示标记为“activiti”的问题")或[jbpm](/questions/tagged/jbpm "显示标记为“jbpm”的问题")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T13:46:04.410

您可能想查看我参与的[QuartzDesk项目。QuartzDesk 是基于 Quartz 的应用程序的管理和监控平台，在 2.0 版中，我们向该平台添加了一个新的](https://www.quartzdesk.com)[作业链引擎](https://www.quartzdesk.com/documentation/features#job-chaining)。

该引擎允许您编排作业的执行，无需以任何方式修改您的应用程序代码。作业链可以通过 QuartzDesk GUI 动态更新，而不会中断您的应用程序。

[![QuartzDesk 作业链目标编辑器](../Images/085e38657a91ca60ca4d18ccb9c57aae.png)](https://i.stack.imgur.com/JJImE.png)

# c# - 我应该在工厂模式类中处理异常还是让它们向上传播？

> ID：12134912
> 
> 赞同：3
> 
> 时间：2012-08-27T00:03:38.373
> 
> 标签：c#, .net, design-patterns, factory, fileinfo

我是 C# 开发人员，我想使用工厂模式来创建代表硬盘上的文件或目录的对象。FileInfo 和 DirectoryInfo 是 .NET 中用于此目的的类，但我希望拥有自己的 IFileInfo 和 IDirectoryInfo 接口来包装它们，而不是它们。使用自定义接口而不是内置类的原因是因为我想添加一些额外的属性，例如文件外壳图标等......

所以我想使用工厂模式为文件/目录路径的给定字符串创建 IFileInfo 和 IDirectoryInfo 的实例。

所以工厂类看起来像：

```
public class MyFileInfoFactory
{
    IFileInfo Create(string filePath)
    {
        System.IO.FileInfo file = new System.IO.FileInfo(filePath);

        // turn FileInfo to my IFileInfo etc...
    }
} 
```

现在查看 System.IO.FileInfo 文档（[FileInfo MSDN](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.fileinfo.aspx)）我看到有几个可能的异常可以抛出。我的问题是我应该在工厂 Create() 方法中处理所有这些异常吗？还是应该让它们向上传播到调用 MyFileInfoFactory.Create() 的任何代码？

如果第一个解决方案是可行的，那么下一步是什么？例如，我应该返回 null 还是可能抛出一些自定义异常，并将 InnerException 属性设置为从 new FileInfo() 构造函数抛出的实际异常？

只是想知道在这个具体场景案例中的最佳实践是什么......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T00:13:57.917

通常，您应该在两种情况下处理异常：

1.  您知道如何处理它并从错误中恢复。在没有任何外部干预的情况下，您希望以对调用代码透明的方式这样做。
2.  您想将异常包装在您自己的异常中。如果您需要向调用代码传达附加信息，或者特定异常对调用代码可能不是非常重要（尽管您应该始终将其作为`innerException`参数包含在异常的构造函数中），这将非常有用。

因此，对于任何可能抛出的异常（并且不要认为 MSDN 中的异常列表是详尽无遗的......不幸的是，很多这些东西都是样板文件），如果你不知道如何从中恢复默默地并且不想将其包装在您自己的异常中，然后不要处理它并让它冒泡。

# winapi - 向现有 MUI 页面添加窗口

> ID：12134917
> 
> 赞同：0
> 
> 时间：2012-08-27T00:05:08.837
> 
> 标签：winapi, installation, nsis

**是否可以将窗口（标签）添加到现有的 MUI 页面；像安装程序页面，欢迎页面？**

我想在安装程序页面添加一个新标签。我下面的代码向窗口添加了一个新的静态窗口，但它从未显示/位于其他窗口上方。*我知道该窗口存在，因为我可以使用 WinSpy++ 看到它，但它位于另一个窗口后面。*此外，新窗口具有有趣的样式“样式：50000000（隐藏，启用）”，而其他普通静态窗口具有样式“样式：5000008C（可见，启用）”。

**如何让我的标签（静态窗口）显示？**

```
!include nsdialogs.nsh
!include MUI2.nsh

!define MUI_PAGE_CUSTOMFUNCTION_SHOW instshow

!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_LANGUAGE "English"

OutFile "test.exe"

Function instshow
    FindWindow $0 "#32770" "" $HWNDPARENT
    GetDlgItem $2 $0 1016
    System::Call 'USER32::CreateWindowEx(i0,t "STATIC",t "Some option",i ${WS_CHILD}|${WS_VISIBLE},i100,i100,i100,i20,i$2,i666,i0,i0) $R2'
    System::Call `user32::SetWindowPos(i $R2, i ${HWND_TOP}, i 0, i 0, i 0, i 0, i ${SWP_NOSIZE}|${SWP_NOMOVE})` # attempt to push new label to front

    # Attempt to refresh new labels parent window
    GetDlgItem $R0 $HWNDPARENT 1016
    ShowWindow $R0 ${SW_HIDE}
    ShowWindow $R0 ${SW_SHOW}
    # Attempt to refresh new label 
    ShowWindow $R2 ${SW_HIDE}
    ShowWindow $R2 ${SW_SHOW}
FunctionEnd

Section "Dummy"

SectionEnd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:03:29.073

好的，这是如何做到的。感谢安德斯的建议

```
!include nsdialogs.nsh
!include MUI2.nsh

!define MUI_PAGE_CUSTOMFUNCTION_SHOW instshow

!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_LANGUAGE "English"

OutFile "test.exe"

Function instshow
    FindWindow $0 "#32770" "" $HWNDPARENT
    System::Call 'USER32::CreateWindowEx(i0,t "STATIC",t "Some text",i ${WS_CHILD}|${WS_VISIBLE},i100,i100,i100,i20,i $0,i222,i0,i0) $R2'

    GetDlgItem $1 $0 1027
    GetDlgItem $2 $0 222
    SendMessage $1 ${WM_GETFONT} 0 0 $3
    SendMessage $2 ${WM_SETFONT} $3 1
FunctionEnd

Section "Dummy"

SectionEnd 
```

# c - 奇怪的字符串行为

> ID：12134926
> 
> 赞同：0
> 
> 时间：2012-08-27T00:06:17.060
> 
> 标签：c, sockets, resolve

我正在尝试验证用户输入的 URL 是否符合要求的格式，在这种情况下，我试图删除`http://`它是否存在，但我遇到了一些非常奇怪的问题......

如果我输入函数“ `www.google.com`”或“ `http://www.google.com`”，一切都会按预期进行！但是，如果我给它提供一些不是有效 URL 的东西（例如土豆），它会返回位于内存中的乱码......

为什么这不是一个问题，它绝对不是预期的程序行为，我不知道为什么它会这样......

```
Enter URL: potato

Error! Could not resolve ip address for host: ╪☻ï*** Process returned 1 ***
Press any key to continue... 
```

这是有问题的功能：

```
char *bldurl(const char *url)
{
    char *nurl;
    int ch = 0, i = 0;

    if(chksbstr(url, "http://") < 0)
    {
        if(!(nurl = malloc(strln(url) + 8)))
        {
            printf("\nError! Memory allocation failed while appending URL!");
            return 0x00;
        }
        nurl[ch] = 'h';
        nurl[++ch] = 't';
        nurl[++ch] = 't';
        nurl[++ch] = 'p';
        nurl[++ch] = ':';
        nurl[++ch] = '/';
        nurl[++ch] = '/';
        for(++ch; i <= strln(url); ch++, i++) nurl[ch] = url[i];
        nurl[--ch] = 0x00; 
    }
    else
    {
        if(!(nurl = malloc(strln(url) + 1)))
        {
            printf("\nError! Memory allocation failed while appending URL!");
            return 0x00;
        }
        for(i = 0; i <= strln(url); i++) nurl[i] = url[i];
        nurl[i + 1] = 0x00;
    }
    return nurl;
} 
```

这是我的代码中返回该特定错误消息的部分：

```
 if(!(hostip = gethostbyname(hostname)))
    {
        free(hostname);
        free(url);
        printf("\nError! Could not resolve ip address for host: %s", hostname);
        WSACleanup();
        return 0x00;
    } 
```

`hostname`在上面的代码中是来自 for 提到的函数的返回值。

我真的不知道该怎么想。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T00:17:44.823

您在主机名上调用“免费”，然后尝试将其打印出来；当然，这将是一些不可读的东西！你真的应该打印它然后释放它，我猜。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T00:16:38.700

您不能释放主机名然后打印它。

# django - 无法解析剩余的 Django

> ID：12134927
> 
> 赞同：5
> 
> 时间：2012-08-27T00:06:24.237
> 
> 标签：django, django-templates

我一直在尝试编写一个自定义模板标签来缩短与 bitly 的链接，我附上了我在下面得到的代码和错误。我试图查看 Django 提供的文档，但看不到我做错了什么。

我已将我的模板标签放在以下布局中：

```
scribbler/
    models.py
    templatetags/
        __init__.py
        shortenlink.py
    views.py 
```

我编写的自定义标签文件：

# 缩短链接.py

```
from django import template
from django.conf import settings
from urllib import urlencode
from urllib2 import urlopen

register = template.Library()

@register.simple_tag
def bitlyshort(the_url):
    endpoint = 'https://api-ssl.bitly.com/v3/shorten?access_token={0}&longUrl={1}&format=txt'
    req = urlencode(endpoint.format(settings.ACCESS_KEY, the_url))
    return urlopen(req).read() 
```

使用模板标签的模板部分：

# 模板

```
{% load shortenlink %}
<p>{{ bitlyshort "http://www.google.com" }}</p> 
```

# 错误

```
TemplateSyntaxError at /user/sankaetp/
Could not parse the remainder: ' "http://www.google.com"' from 'bitlyshort "http://www.google.com"'
Request Method: GET
Request URL:    http://localhost:8000/user/sankaetp/
Django Version: 1.4.1
Exception Type: TemplateSyntaxError
Exception Value:    
Could not parse the remainder: ' "http://www.google.com"' from 'bitlyshort "http://www.google.com"'
Exception Location: /Users/sankaetp/virtualenvs/myproject/lib/python2.7/site-packages/django/template/base.py in __init__, line 563
Python Executable:  /Users/sankaetp/virtualenvs/myproject/bin/python
Python Version: 2.7.3
Python Path:    
['/Users/sankaetp/virtualenvs/myproject/bin/django_worksquid',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/site-packages/djangoembed-0.1.1-py2.7.egg',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/site-packages/httplib2-0.7.4-py2.7.egg',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/site-packages/BeautifulSoup-3.2.1-py2.7.egg',
 '/Users/sankaetp/virtualenvs/myproject/lib/python27.zip',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/plat-darwin',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/plat-mac',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/lib-tk',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/lib-old',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/lib-dynload',
 '/Users/sankaetp/.pythonbrew/pythons/Python-2.7.3/lib/python2.7',
 '/Users/sankaetp/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/plat-darwin',
 '/Users/sankaetp/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/lib-tk',
 '/Users/sankaetp/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/plat-mac',
 '/Users/sankaetp/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/site-packages',
 '/Users/sankaetp/virtualenvs/myproject/lib/python2.7/site-packages/PIL']
Server time:    Sun, 26 Aug 2012 18:54:26 -0500 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T00:11:26.480

错误在这一行：

```
<p>{{ bitlyshort "http://www.google.com" }}</p> 
```

模板*标签*使用`{% ... %}`（模板*过滤器*使用`{{ ... }}`）。尝试：

```
<p>{% bitlyshort "http://www.google.com" %}</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T04:16:23.647

### 有另一种方法可以导致此错误：

代替：

```
{{ data|filter }} 
```

如果您使用：

```
{{ data | filter }}  <!-- Note Spaces --> 
```

字符两侧的空格`|`会导致页面渲染时出现异常。

# debugging - FSTP DWORD PTR DS:[ESI+1224] 有什么作用？

> ID：12134934
> 
> 赞同：6
> 
> 时间：2012-08-27T00:08:30.333
> 
> 标签：debugging, assembly, cpu-registers, ollydbg

我正在尝试更多地了解组装和拆卸。我的目标是修改使用调试器（olly）编写特定地址的方式。最好通过将其增加一个数字（20、50 等）。我可以识别浮点数的地址（在这种情况下位于`33B7420C`）。

当我在内存访问写入上设置断点时，它会将我带到`00809B2E`具有以下程序集的位置：

`FSTP DWORD PTR DS:[ESI+1224]`

它到底在这个地址做什么？我知道 FPU 寄存器有我正在寻找的号码，但不确定所有这些地址在做什么。

我最接近谷歌搜索的是： [MOV EAX, DWORD PTR DS:[ESI] 是什么意思，它有什么作用？](https://stackoverflow.com/questions/3224524/what-does-mov-eax-dword-ptr-dsesi-mean-and-what-does-it-do)

寄存器的副本显示以下内容：

```
EAX 00000000
ECX 00A16E40 EZ.00A16E40
EDX FFFFFFFF
EBX 33B74578
ESP 0018FA90
EBP 00000000
ESI 33B72FE8
EDI 33B74578
EIP 00809B2E <EZ.Breakpoint for time>
C 0  ES 002B 32bit 0(FFFFFFFF)
P 0  CS 0023 32bit 0(FFFFFFFF)
A 0  SS 002B 32bit 0(FFFFFFFF)
Z 0  DS 002B 32bit 0(FFFFFFFF)
S 0  FS 0053 32bit 7EFDD000(FFF)
T 0  GS 002B 32bit 0(FFFFFFFF)
D 0
O 0  LastErr ERROR_SUCCESS (00000000)
EFL 00210202 (NO,NB,NE,A,NS,PO,GE,G)
ST0 valid 1150.0000000000000000
ST1 zero  0.0
ST2 zero  0.0
ST3 empty 64.951911926269531250
ST4 empty -13.250000000000000000
ST5 empty 64.951911926269531250
ST6 empty 64.951911926269531250
ST7 empty 0.0239995196461677551
           3 2 1 0      E S P U O Z D I
FST 2927  Cond 0 0 0 1  Err 0 0 1 0 0 1 1 1  (LT)
FCW 027F  Prec NEAR,53  Mask    1 1 1 1 1 1 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T00:22:54.063

`FSTP`将浮点数从浮点寄存器堆栈 ( `ST0`) 的顶部存储到指定的内存区域。使用`DWORD`修饰符意味着将写入 32 位浮点数。后缀表示运算后会`P`弹出浮点寄存器堆栈。

因此，实际上，该指令将`1150.0`（作为 32 位浮点数）放入`DS:[ESI+1224]`，然后弹出寄存器堆栈（这会导致`ST0 = 0.0`、`ST1 = 0.0`、`ST2 = <empty>`等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:22:39.943

它以单精度将 ST0 (1150.0) 存储到您的地址。并从 FPU 堆栈中弹出所述值。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-10-26T23:17:54.257

添加 50（0x32 是 50 的十六进制）：

```
mov eax, dword[ds:esi+0x1224]
add eax, 0x32
mov dword[ds:esi+0x1224], eax 
```

# c# - 在 ASP.NET MVC 4 中使用路由重定向

> ID：12134937
> 
> 赞同：2
> 
> 时间：2012-08-27T00:09:45.273
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-routing

我正在为使用 .Net Framework 4.5 编写的应用程序创建重定向。

在 RouteConfig 文件中，我创建了一个新的`routes.MapRoute()`并且它可以工作。它显示了我想要的控制器和操作。

但我不想保留用户的网址并从那里使用该应用程序。我只希望当用户编写 /Something 时它重定向到 /AnotherSomething，而不是在 /Something 中使用应用程序。

我应该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-27T00:16:56.450

如果正确理解你：

```
routes.RouteMap("RedirectExample", "Something", new { controller : "MyController", action : "AnotherSomething"}); 
```

# jquery - 滚动时对图像的jQuery效果

> ID：12134938
> 
> 赞同：0
> 
> 时间：2012-08-27T00:10:12.970
> 
> 标签：jquery

我想在 Filmatrografia 的页面上重新创建在[http://annasafroncik.it/](http://annasafroncik.it/)上显示的相同效果，您会在图片上看到气泡效果，在 Biografia 中也是如此......他们是怎么做到的？多谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:25:10.707

这不是 jQuery 效果，而是一个名为`scale`- [**DEMO的 CSS3 转换**](http://jsfiddle.net/buaDv/)

```
img {
    -webkit-border-radius: 100px;
            border-radius: 100px;

    -webkit-transition: all .5s ease-in-out;
    -webkit-transform: scale(0); 
}

p:hover + img {
     -webkit-transform: scale(1); 
}
​ 
```

# asp.net - SCRIPT5007：Internet Explorer 中预期的对象，并在登录页面上进行验证

> ID：12134939
> 
> 赞同：0
> 
> 时间：2012-08-27T00:10:17.213
> 
> 标签：asp.net, .net, internet-explorer, .net-4.5

将 .NET 4.5 安装到我的 Web 服务器后，尝试在 Internet Explorer 中访问我的 AbleCommerce 商店时遇到脚本错误。我已经尝试再次将站点设置为以 .NET 4.0 为目标，但它仍然无法在 IE 中运行，所以我不确定发生了什么。我不确定这是 Ajax Toolkit 问题还是在安装 .NET 4.5 后发生了变化。

我可以使用 Chrome 和 FireFox 登录，但如果您的 IE 设置显示脚本错误，则访问登录页面（单击我的帐户或右上角的登录）会显示脚本错误。

任何帮助将不胜感激。

> SCRIPT5007：对象预期 login.aspx?ReturnUrl=%2fMembers%2fMyAccount.aspx，第 539 行字符 1
> 
> document.getElementById('ctl00_wpm_Login_ctl03_LoginValidationSummary').dispose = function() { Array.remove(Page_ValidationSummaries, document.getElementById('ctl00_wpm_Login_ctl03_LoginValidationSummary')); }
> 
> (function(id) { var e = document.getElementById(id); if (e) { e.dispose = function() { Array.remove(Page_ValidationSummaries, document.getElementById(id)); } e = null; } } )('ctl00_wpm_Login_ctl04_RegisterValidationSummary');

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T01:12:42.793

Page_ValidationSummaries 会填充所有验证摘要，即使对于未呈现给浏览器的控件也是如此，这意味着它最终会出现空值。

或者在此示例中，您试图从数组中删除“null”，这是相反的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T20:48:24.837

I had to roll back to .NET 4.0 by uninstalling 4.5 from the server (and then reinstalling 4.0) to resolve this. Could not find a solution.

# sql - 需要有关使用 SQL Server 2005 进行索引的帮助

> ID：12134940
> 
> 赞同：1
> 
> 时间：2012-08-27T00:10:20.040
> 
> 标签：sql, sql-server, tsql, sql-server-2005, indexing

我有一个表，`paymentdetails`有一个列`paymentstatus`（有一个检查约束，将值限制为已付款或待处理）。此外，还有一个表格`patientdetails`，其中包含有耐心ID、地址......列

我想创建一个索引，以加快为每个初始付款待处理的患者提取患者详细信息的执行速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:17:47.640

先写下你的查询。看看查询关心什么。

您需要对连接中涉及的任何键、where 子句中的键以及可能对结果集影响最大的表的主键（可能`INCLUDE`用于使结果集中的其他列可用）的索引不打桌子）。

“过滤索引”（部分索引的 SQLServer 术语，出于某种未知原因）会很好，但 SQLServer 自 2008 年以来才拥有这些。

但前者是理论，而后者只是一个很好的知识，直到您开始使用 2008。实际检查如何执行查询是真实的。

还要考虑这样一个事实，即您的索引将加速其他 SELECT 以及 UPDATE 和 DELETE 的 WHERE 部分，但否则会稍微减慢 UPDATE、DELETE 和 INSERT。因此，您不想发疯地将索引绝对放在任何地方，但您确实希望特别热衷于那些最有可能在其他查询中使用的索引。

# sql - 在 sql server 中将 varchar 转换为 money 回 varchar 的问题

> ID：12134944
> 
> 赞同：1
> 
> 时间：2012-08-27T00:11:07.510
> 
> 标签：sql, sql-server, tsql

我的数据库中有一个包含价格的列，存储为`varchar(10)`. 我需要将其拉出的格式有逗号，但没有小数。因此，如果价格为`1500.00121`，则应显示为“1,500”，逗号完整。所以这是我到目前为止所拥有的：

```
CONVERT(varchar, CAST(p.Price1 AS money), 1) 
```

这仍然有小数位`".xx"`。如何在保留逗号的同时删除小数和尾随数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:40:14.857

为什么不将其存储在`Decimal(10,2)`数据类型中？它比存储它要好得多，`VARCHAR`因为您没有额外的转换为另一种数据类型。

您可以使用`CAST`和`ROUND`功能：

```
SELECT ROUND(CAST('1500.00121' AS DECIMAL(10,4)), 0, 1) 
```

就是这样。该`CAST`函数将数据类型转换为另一种数据类型。该`ROUND`函数返回一个数值，四舍五入到指定的长度或精度。

的原始语法`ROUND`是

```
ROUND ( numeric_expression , length [ ,function ] ) 
```

其中`Function`参数是要执行的操作类型。`Function`必须是*tinyint*、*smallint*或*int*。当***function 被省略***或值为**0（默认）时， numeric_expression 被舍入**。当**指定 0 以外的值时， numeric_expression 被截断**。

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/57b9d/8)

# [*圆形（MSDN）*](http://msdn.microsoft.com/en-us/library/ms175003%28SQL.90%29.aspx)

# [*十进制 (MSDN)*](http://msdn.microsoft.com/en-us/library/ms187746.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T00:19:09.317

我希望它会工作

```
declare @q money = 1500.123

select parsename(convert(varchar,convert(money,@q), 1),2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T00:40:12.813

手头没有 sql server 但类似

```
Declare @correctlyTyped Money

Set @correctlyTyped = Convert(Money, SomeBadlyTypedField)

Select 
  Substring(@correctlyTyped,0,DataLength(@correctlyTyped) - CharIndex('.',@correctlyTyped )) 
```

将其转换为货币，然后选择小数点之前的所有内容。

请注意，这取决于数据的区域设置/排序规则。例如，在欧洲大陆， , 是小数点分隔符， . 是千位分隔符。

# python - Python select.select，select.poll：损坏的双向链表

> ID：12134948
> 
> 赞同：0
> 
> 时间：2012-08-27T00:11:29.040
> 
> 标签：python, select, pygame, polling

我有一个相当大的客户端-服务器网络应用程序，用 Python 编写。我正在使用 select.poll 来提供异步功能。在过去的六个月里，一切都运行良好。但是，最近我更改了一些东西并允许客户端可靠地从服务器注销。乍一看，客户端似乎从来没有收到请求，而且它是阻塞的。当我用 终止进程时，我收到以下输出：

```
*** glibc detected *** /usr/bin/python: corrupted double-linked list: 0x0a9fea60 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x6cbe1)[0xd96be1]
/lib/i386-linux-gnu/libc.so.6(+0x6fc1c)[0xd99c1c]
/lib/i386-linux-gnu/libc.so.6(__libc_malloc+0x63)[0xd9b1d3]
/usr/lib/i386-linux-gnu/libxcb.so.1(+0x8ff6)[0xb30ff6]
/usr/lib/i386-linux-gnu/libxcb.so.1(+0x706d)[0xb2f06d]
/usr/lib/i386-linux-gnu/libxcb.so.1(+0x75b5)[0xb2f5b5]
/usr/lib/i386-linux-gnu/libxcb.so.1(xcb_writev+0x67)[0xb2f667]
/usr/lib/i386-linux-gnu/libX11.so.6(_XSend+0x14b)[0x59b42b]
/usr/lib/i386-linux-gnu/libX11.so.6(_XFlush+0x39)[0x59b889]
/usr/lib/i386-linux-gnu/libX11.so.6(XFlush+0x31)[0x57ba81]
/usr/lib/libSDL-1.2.so.0(+0x34dfe)[0x16adfe]
/usr/lib/libSDL-1.2.so.0(+0x37998)[0x16d998]
/usr/lib/libSDL-1.2.so.0(+0x393db)[0x16f3db]
/usr/lib/libSDL-1.2.so.0(SDL_PumpEvents+0x3d)[0x140d7d]
/usr/lib/libSDL-1.2.so.0(SDL_PollEvent+0x17)[0x140db7]
/usr/lib/libSDL-1.2.so.0(SDL_EventState+0x58)[0x140f78]
/usr/lib/libSDL-1.2.so.0(SDL_JoystickEventState+0x5b)[0x16810b]
/usr/lib/python2.7/dist-packages/pygame/joystick.so(+0x196d)[0x55896d]
/usr/lib/python2.7/dist-packages/pygame/base.so(+0x178a)[0x56078a]
/usr/lib/python2.7/dist-packages/pygame/base.so(+0x17c7)[0x5607c7]
/usr/bin/python(PyEval_EvalFrameEx+0x4332)[0x80de822]
/usr/bin/python(PyEval_EvalCodeEx+0x127)[0x80e11e7]
/usr/bin/python[0x8105a61]
/usr/bin/python(PyObject_Call+0x4a)[0x80a464a]
/usr/bin/python(PyEval_CallObjectWithKeywords+0x44)[0x80da034]
/usr/bin/python(Py_Finalize+0xc7)[0x8070ee1]
/usr/bin/python(Py_Main+0xc66)[0x805c109]
/usr/bin/python(main+0x1b)[0x805b25b]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0xd40e37]
/usr/bin/python[0x81074ad] 
```

接下来是内存映射，为简洁起见，我没有发布。我在 PDB 下运行代码，发现客户端阻塞*了对 的调用`pollingObject.poll(0)`*，这不应该阻塞。所以，我把那个电话改成了`select.select([socket], [], [], 0)`，仍然没有成功。我正在使用 PyGame，如果这有所作为，我知道它有时会这样做。我完全迷失在这里。我知道 Python 会覆盖`malloc`，这可能与此有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:24:12.400

我设法通过在 C 中实现网络代码并从 Python 调用它来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:30:53.533

在我看来，由于终结器，PyGame 正在关闭 X 连接后检查输入事件。`Display *`当然，使用已经传递给的a 调用 Xlib 中的任何内容`XCloseDisplay`意味着访问已经释放的内存，如果发生这种情况，glibc 的堆损坏也就不足为奇了。

如果我的诊断是正确的，您将无法在应用程序级别真正修复它，但生成一个最小的测试用例并将其提交给 PyGame 开发人员可能会很有成效。

# php - 食谱计算器

> ID：12134949
> 
> 赞同：-2
> 
> 时间：2012-08-27T00:11:30.077
> 
> 标签：php, scale, recipe

我正在创建一个存储食谱的网站。我想做一个食谱缩放器-您可以在其中输入所需的份量，脚本将转换食谱成分以匹配它。我可以很容易地更改数量，但我正在尝试弄清楚如何转换单位。现在我知道我可以输入 1500 个 if/then 语句，但我试图让它更简单一些。:)

我正在查看一个名为 Tasty Kitchen 的网站。他们通过 AJAX 将服务发布到此文件 (http://tastykitchen.com/recipes/wp-admin/admin-ajax.php)，然后该文件返回配料。然后他们将它们显示在页面上。例如，请访问[http://tastykitchen.com/recipes/breads/plain-bagels/ 。](http://tastykitchen.com/recipes/breads/plain-bagels/)

我***真的***很感激我能得到的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:17:16.810

我的建议是在你的数据库中存储一个服务，然后简单地乘以你想在页面上提供多少人。

因此，如果您的用户选择了他们想要为 4 人制作餐点，那么您保留一个变量（会话、cookie 等等）——让我们`$peeps`在这个例子中调用它——当你输出数据时，你会这样做：

```
Echo "This will make $peeps portions:";
Echo "Ingredients:<br>";
Echo ($peeps*Ingredient1Quantity)." - ".$ingredient1Name."<br>";
Echo ($peeps*Ingredient2Quantity)." - ".$ingredient2Name."<br>"; 
```

等等。

如果您希望您的网站也从英制转换为公制，您可以使用简单的功能轻松完成。

如果您将所有数据以公制存储在数据库中（或英制，但都是相同的类型），您可以通过根据用户偏好以类似方式将其转换为用户来轻松地输出它：

```
// Assumes a function that converts to Imperial from Metric called convertToImperial()
Echo "This will make $peeps portions:";v
Echo "Ingredients:<br>";
Echo convertToImperial($peeps*Ingredient1Quantity)." - ".$ingredient1Name."<br>";
Echo convertToImperial($peeps*Ingredient2Quantity)." - ".$ingredient2Name."<br>"; 
```

编辑：如果您将数据库中的所有内容都存储在公制中，那么您可以让一个函数以最佳英制测量值将数据返回给您。

```
// For example, input is passed as 
// $qty=30 (ml) 
// $serves is passed as 3 (ie, three people)
// $type is passed as liquid.

function convertToImperial($qty, $serves, $type)
{
    // Metric to Imperial will need a $type passed (Liquid, Weight, Other).
    // You can use a switch statement to pass between the different types.
    switch ($type)
    {
         case "Liquid":
             // Assumes 5ml is a teaspoon
             // Assumes 15ml is a tablespoon
             // Assumes 250ml is a cup.
             $CalMeasure=$qty*$serves; // Now at 90ml.
             // Here you can now choose to either pick the best match
             // ie, measurement with least remainder/exact measure
             // which in this case would be 6 tablespoons
             // or
             // switch measurement types after a certain quantity is reached.
             if ($CalMeasure>125) // Half a cup
             {
                 return (round($CalMeasure/250,2)." cups");
             }
             elseif ($CalMeasure>15) // tablespoons
             {
                 return (round($CalMeasure/15,2)." Tablespoons");
             }
             else
             {
                 return (round($CalMeasure/5,2)." Teaspoons");
             }
             break;
         case "Weight":
             // Similar approach to Weights, Convert Grams to Pounds and the like.
             return $WeightMeasured;
             break;
         default: // assumes Other (pinches, sprinkles etc
             // Similar approach again.
             break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T23:39:51.977

@Caleb - Fluffeh 的策略就在这里，他将所有内容存储在一种类型的测量中，然后使用一系列函数将它们转换为其他类型。我构建了一个 Web 应用程序[https://Gredio.com](https://Gredio.com)，它可以在其他方面进行配方缩放，并且能够以这种方式生成非常灵活的报告。另一个困难是关于液体量与重量的关系。大规模的粮食生产总是按重量进行，但小家伙有时会误解其中的区别。以编程方式进行液体重量转换可能很复杂，因为您需要知道液体重量变化很大（想想蜂蜜与水......）

# html - Ruby on Rails - 打印视图文件中的 Ruby 代码

> ID：12134950
> 
> 赞同：0
> 
> 时间：2012-08-27T00:11:56.367
> 
> 标签：html, ruby-on-rails, ruby, embedded-ruby

我在 Aptana Studio 3 中有一个 Rails 3 项目，其*html.erb*视图文件包含以下代码：

```
<% if @books.blank? %>
<p>
    There are not any books currently in the system.
</p>
<% else %>
<p>
    These are the current books in our system
</p>
<ul id="books">
    <% @books.each do |c| %>
    <li>
        <%= link_to c.title, {:action => 'show', :id => c.id} -%>
    </li>
    <% end %>
</ul>
<% end %>
<p>
    <%= link_to "Add new Book", {:action => 'new' }%>
</p> 
```

然后在嵌入式终端中，我运行`rails server`，单击 Aptana 中的“使用 Firefox Server 运行”按钮，该按钮使用 Firefox 打开应用程序，并将我定向到此链接：http: *//127.0.0.1 :8020/library/app/views/书/book.html.erb*

问题是我得到了这个输出：

```
<% if @books.blank? %>

There are not any books currently in the system.
<% else %>

These are the current books in our system

    <% @books.each do |c| %>
    <%= link_to c.title, {:action => 'show', :id => c.id} -%>
    <% end %> 

<% end %>

<%= link_to "Add new Book", {:action => 'new' }%> 
```

似乎 ruby​​ 代码没有被评估而是被打印出来，但是语法对我来说看起来不错......有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:20:34.903

Aptana 没有打开正确的页面。如果您只是使用默认服务器，那么您可能想要打开`localhost:3000`.

更多信息：查看 url，它只是文件的路径，而不是书籍索引的 url。

您的文件路径 ( `http://127.0.0.1:8020/library/app/views/book/book.html.erb`) 也似乎很奇怪...

首先，`book`文件夹名称应为复数 ( `app/views/books`)。其次，您的视图代码似乎是书籍索引页面，因此它可能应该在`app/views/books/index.html.erb`.

# ajax - 多个 AJAX 回调和创建列表

> ID：12134953
> 
> 赞同：1
> 
> 时间：2012-08-27T00:12:49.780
> 
> 标签：ajax, jquery

我确定这是一个常见问题，但我有一个输入字段和一个按钮。每当按下按钮时，都会执行一个 ajax 调用，返回一个字符串。我知道，如果您将其附加到原始文件中的 div，该 div 将删除其中的任何字符串或数字并替换为返回的字符串。允许每个回调实时显示在屏幕上的最有效方法是什么？我尝试过，但似乎动态更改分配 ajax 回调插入到哪个 div 标记的 javascript 变量不起作用。有谁知道这段代码有什么问题或更有效的方法来编写这段代码，即使用 php 等。

```
<div id="part1">

<input type="text" id="text"/>

<input type="button" value="button" id="button"/>

</div>

<div id="hidden" class="2"></div>
<div id="part2"></div>
<div id="part3"></div>
<div id="part4"></div>
<div id="part5"></div>

<script type="text/javascript" >

$('#button').click(function () {

    var text = $('#text').val();    

$.post('ajaxskeleton.php', {
                red: text                   
        }, function(){
        var number = $('#hidden').attr("class");
        $('#part' + number).html(text);
        var number = number+1;                      
        var class_name = $('#hidden').attr('class')
        $('#hidden').removeClass(class_name);       
        $('#hidden').addClass(number);
            $('#text').val('');
    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:35:37.680

我认为像下面这样的东西会起作用。

```
<div id="container">
  <input type="text" id="text"/>

  <input type="button" value="button" id="button"/>
</div>
<ol id="responses"></ol>
$("#button").click(function() {
  $.post('ajaxskeleton.php', {red:text}, function(data) {
    $("#responses").append("<li>" + data + "</li>");
  });
}); 
```

这只是建立了一个有序列表，其中包含从 Ajax 调用返回的响应，我认为这是您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:33:32.727

`.html()`您可以[将新结果附加](http://api.jquery.com/appendTo/)到现有的`div`. 例如，*假设*您想将结果附加到`div`带有 id的 a `results`：

```
$('#button').click(function () {
    var text = $('#text').val();    
    $.post('ajaxskeleton.php', { red: text }, function() {
        $("<li>" + text + "</li>").appendTo($("#results"));
    });
});​ 
```

这是一个**[演示](http://jsfiddle.net/KGjuD/)**。

# android - Android如何在标签之间切换时保存标签状态

> ID：12134957
> 
> 赞同：1
> 
> 时间：2012-08-27T00:13:47.927
> 
> 标签：android, android-tabhost

我有包含 4 个选项卡的 TabActivity。

像这样在 tabhost 活动中创建的选项卡

```
TabSpec firstTabSpec = tabHost.newTabSpec("tid1");
Intent send_names_intent1 = new Intent(this,tab1.class);

//here is some data I receive it from previous activity 
//and want to send them to the tab
send_names_intent1.putExtra("names", names);        
send_names_intent1.putExtra("check", test1);

firstTabSpec.setIndicator("Kingdom I").setContent(send_names_intent1);
tabHost.addTab(firstTabSpec); 
```

在每个选项卡中，用户做一些工作，结果将显示在选项卡中，
问题是当切换到第二个选项卡然后返回到第一个选项卡时，所有结果都将消失，并且将再次创建选项卡。

注意：我尝试使用 getsharedprefrences() 但即使应用程序关闭并再次打开它也会加载保存的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:58:43.750

您可以使用布尔值`boolean test;`和 int 值，`int last=0`然后使用此方法

```
tabHost.setOnTabChangedListener(new OnTabChangeListener(){
        @Override
        public void onTabChanged(String tabId) {
            int currenttab = tabHost.getCurrentTab();
            if (currenttab != last){
                test[last] = false;
                send_names_intent [last].putExtra("check", test[last]);
                last = currenttab;
            }

        }                                           
    }); 
```

当您使用此方法时，您将在您的`tab1.class`

```
Intent names_intent = getIntent();                  
prefcheck = names_intent.getBooleanExtra("check", false); 
```

然后检查保存 SharedPreferences的`prefcheck`值。`if (prefcheck == false)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:00:52.463

您是否尝试过 onSaveInstanceState？

```
protected void onSaveInstanceState(Bundle icicle) {
  super.onSaveInstanceState(outState);
  icicle.putString("names", names);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T02:03:17.063

你说你使用了共享偏好对吗？为什么不使用它，以便在打开选项卡时，它将共享首选项的值加一，然后 om destroy 减一，然后检查该值是否为 0，如果是，则删除您想要的所有保存首选项通过将它们设置为默认值或您想要的值。

# php - 如何摆脱 PHP 中的“注意：未定义索引”？

> ID：12134962
> 
> 赞同：-6
> 
> 时间：2012-08-27T00:14:56.650
> 
> 标签：php

如何摆脱*“注意：未定义的索引：C:\xampp\htdocs\cpages\cmain\userfooter.php 中的颜色在第 31 行错误”*？

```
$color = ($_POST['color']);

mysql_query("UPDATE `theme` SET color = '$color'  WHERE username='plmexico'"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T00:19:19.363

发出“未定义索引”通知，因为`color`. `$_POST`这是因为`color`没有从前一页传递过来。您可以在尝试访问之前检测密钥是否存在：

```
if(array_key_exists("color", $_POST)) {
    $color = $_POST["color"];
}else{
    $color = "red";  // no color given; default to red
} 
```

您还应该知道您的代码包含一个明显的[SQL 注入](https://en.wikipedia.org/wiki/SQL_injection)漏洞。您可以通过在将其插入查询之前转义来解决此`$color`问题：[`mysql_real_escape_string`](http://www.php.net/mysql_real_escape_string)

```
mysql_query("UPDATE theme SET color = '" . mysql_real_escape_string($color) . "' WHERE username='plmexico'"); 
```

您也可以使用准备好的语句来修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T00:19:56.277

首先，您应该始终确保在将数据插入 SQL 查询之前清理数据。您的代码目前很[容易受到攻击](http://xkcd.com/327/)。最简单的方法是使用[`mysql_real_escape_string`](http://www.php.net/mysql_real_escape_string). 另一种方法是发送您已经定义的颜色的 id。这样您就可以 100% 确定插入到 SQL 查询中的值是“安全的”。

发生错误是因为参数`color`未发送到服务器。

您可以在发送数据之前对其进行验证（例如使用 Javascript），也可以在服务器上对其进行验证。您可以使用该[`isset()`](http://php.net/manual/en/function.isset.php)函数来测试参数是否存在。所以在你的情况下 -

```
if (!isset($_POST['color'])){
  // return an error here!  The color paramter was not sent!
} 
```

参考 -

*   [`isset()`](http://php.net/manual/en/function.isset.php)
*   [SQL注入](https://en.wikipedia.org/wiki/SQL_injection)
*   [`mysql_real_escape_string`](http://www.php.net/mysql_real_escape_string)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T00:24:12.207

该“通知”是一个错误。它的消息“未定义索引”意味着您正在尝试在不存在的键处访问数组的值。您应该在访问它之前检查该值是否已设置（如果未设置，则可选择将其设置为默认值，例如黑色）。

```
$color = isset($_POST['color']) ? $_POST['color'] : "#000000"; 
```

另外，请注意 mysql 数据库功能正在弃用，不再更新。您应该改为使用 mysqli 或 PDO 进行数据库交互。

此外，您的代码在当前状态下极易受到 SQL 注入的攻击。您应该使用`mysql_real_escape_string`（如果您选择升级到其中一个 API，则使用它的 mysqli/PDO 等效项）来防止它们。

# entity-framework - SQL Server 2012 FK 在实体框架中不起作用

> ID：12134965
> 
> 赞同：0
> 
> 时间：2012-08-27T00:15:23.950
> 
> 标签：entity-framework, foreign-keys, sql-server-2012

在 SQL Server 2012 中使用 Entity Framework (4.x, 5) 时遇到了一个非常奇怪的问题。

为了说明我制作了两个非常简单的一对多关系的表

```
PK. [User].[UserId] 
FK. [Order].[UserId] 
```

但是 EF 根本没有为这两个表生成任何导航属性。在 EDMX 中，这两个表是完全分开的；它们之间根本没有联系。

然后，我在 SQL Server 2008 中使用相同的脚本创建了相同的表，突然之间，一切都像往常一样按预期工作了。

有没有人有同样的问题？有什么解决方案吗？

我正在使用 MSDN 的 SQL Server 2012 Developer Edition

```
CREATE TABLE [dbo].[Users](
    [UserId] [int] IDENTITY(1,1) NOT NULL,
    [UserName] [varchar](50) NOT NULL,
 CONSTRAINT [PK_Users] PRIMARY KEY CLUSTERED 
(
    [UserId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[Orders](
    [OrderId] [int] IDENTITY(1,1) NOT NULL,
    [UserId] [int] NOT NULL,
 CONSTRAINT [PK_Orders] PRIMARY KEY CLUSTERED 
(
    [OrderId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[Orders]  WITH CHECK ADD  CONSTRAINT [FK_Orders_Users] FOREIGN KEY([UserId])
REFERENCES [dbo].[Users] ([UserId])
GO

ALTER TABLE [dbo].[Orders] CHECK CONSTRAINT [FK_Orders_Users]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:18:10.617

您需要更具体地了解您的实际架构和约束创建脚本，但我可以告诉您，EF 不会映射通过唯一索引（而不是主键）创建的关系。虽然 SQL Server 允许这样做，但 EF 不允许。

# php - 为什么这些 FF 和 Chrome 不识别？

> ID：12134969
> 
> 赞同：-2
> 
> 时间：2012-08-27T00:16:00.483
> 
> 标签：php, html, forms, firefox, cross-browser

我有以下由一些 PHP 逻辑呈现的表单。表格渲染得很好；你可以看到文本输入和提交按钮等等。

**在 IE 中，表单按预期工作**。第一个表单转到“index.php?subscribe=go”，第二个表单转到“index.php?unsub=go”，但在 FF 和 Chrome 中，单击提交按钮会重新加载页面（不转到表单操作）。我没有检查其他浏览器。

我在 Firebug 中发现该标签甚至在 Firefox 的页面上`<form>`都不*存在。*这很奇怪；看看这个：

```
else
    {
        echo '<div class="subs_main">';
        if (isset($_GET['subscribe']))
        {
            if ($_GET['subscribe'] != 'go')
            {?>
                Subscribe to <b>Bella Blog</b> for specials, sales, news and more!
                <br />
                <form action="index.php?subscribe=go" method="post" name="subscribe_form" onsubmit="return checkForm();">
                Name: <input type="text" name="name" size="15" />
                <br />
                Email: <input type="email" name="email" size="20" />
                <br />
                <input type="submit" value="subscribe!" name="submit" />
                </form>
                <p class="unsub">You can <a href="index.php?unsub">unsubscribe</a> at any time</p>
            <?php
            } 
            else
            {
                // subscribe user

            }
        }
        elseif (isset($_GET['unsub']))
        {
            if ($_GET['unsub'] != 'go')
            {?>
                Sorry to see you go! You can <a href="index.php?subscribe">re-subscribe</a> at any time!
                <br />
                <form onsubmit="return checkForm2()" name="unsub_form" method="post" action="index.php?unsub=go">
                Email: <input type="email" name="email" size="20" />
                <br />
                <input type="submit" value="unsubscribe" name="submit" />
                </form>
            <?php 
            }
            else
            {
                // process unsubscription HERE

            }
        }
        echo '</div>';
    } 
```

这是用于表单验证的 JS（我认为可以忽略不计，因为它在 IE 中工作，并且在注释掉这个脚本时得到相同的结果）：

```
<script type="text/javascript" language="javascript">
function checkForm()
{
    var regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
    var form = document.forms.subscribe_form;
    var name = form.name.value;
    var email = form.email.value;

    if (name == '' || email == '')
    {
        alert('You must enter both your name and email address!');
        return false;
    }
    else if (!email.match(regex))
    {
        alert('You must enter a valid email!');
        return false;
    }
    return true;
}
function checkForm2()
{
    var form = document.forms.unsub_form;
    var email = form.email.value;

    if (email == '')
    {
        alert('You must enter an email address!');
        return false;
    }
    return true;
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:36:37.337

如果您在表单中使用 POST 方法，则所有参数都应通过 INPUT html 元素传递（即 action="index.php?subscribe=go" 和 action="index.php?unsub=go" 是错误的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T00:21:28.673

`<form>`标签不存在？除非您有将输出定制到 USER_AGENT 的代码，否则将给定的一组 GET/POST 输入传递到页面的任何浏览器都应该收到相同的输出。当然，他们可能会以（可能显着）不同的方式呈现页面并响应事件，但源代码应该是相同的。

发布页面源代码，我们可以查看问题可能是什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T00:44:21.750

这是一个古怪的 WAMP 问题。我在文件中有一些其他 PHP 代码生成了 WAMP 错误（但在实时站点上没有错误），我一直忽略它，因为它没有意义。'未定义的索引'是它的名称，当您使用 $_POST[example] 而不是 $_POST['example'] 调用 PHP 变量时会出现错误。最可笑的。

因此，WAMP 吐出了一堆`<table>`与我页面上的其他表单混在一起的 HTML（错误）。IE 可以处理混乱的表单，并且我的表单（显示有问题）正常工作，而 FF/Chrome 不能。

希望这可以帮助某人。

# c++ - 带智能指针的 N 叉树设计

> ID：12134970
> 
> 赞同：0
> 
> 时间：2012-08-27T00:16:08.010
> 
> 标签：c++, tree, smart-pointers

我正在尝试在 C++ 中设计一个树类，但在节点破坏方面遇到了一些麻烦。

如果我销毁一个节点，我不想销毁它的整个子树，因为可能有其他东西指向它。所以显而易见的解决方案是使用引用计数。我有一个指向父节点的弱指针，以及一个指向子节点的共享指针向量。这样，如果一个节点被销毁，它的子节点只有在没有指向它们的情况下才会被销毁。

但是我在这里遇到了另一个问题：向节点添加子节点。weak_ptr 仅在已经存在指向对象的 shared_ptr 时才有效。如果我将一个子节点添加到一个节点，我不知道在哪里可以找到指向它的 shared_ptr。那么我在这里做什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:34:02.773

为了扩展 David Rodriguez 的想法，骨架树可能如下所示：

```
struct node : std::enable_shared_from_this<node>
{
    std::vector<std::shared_ptr<node>> children;
    std::weak_ptr<node> parent;

    void add_child()
    {
        auto n = std::make_shared_node>();
        n->parent = std::weak_ptr<node>(shared_from_this());
        children.emplace_back(n);
    }
}

auto root = std::make_shared<node>();

root.add_child();
root.add_child();
root.add_child();

root.children[0].add_child(); 
```

（当然，现实世界`node`会有一个带有有效负载值的非平凡构造函数，并且`add_child`会采用类似的参数或作为模板......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T00:22:13.173

您可能想研究一下`enable_shared_from_this`，允许您`shared_ptr`直接从对象中获取。它仍然要求对象由 a 管理`shared_ptr`，但您不需要*找到*持有它的人。

# php - 是随机加盐导致登录不起作用吗？

> ID：12134972
> 
> 赞同：0
> 
> 时间：2012-08-27T00:16:27.400
> 
> 标签：php, mysqli, salt

我的登录页面出现问题，出于某种奇怪的原因，它只是不允许用户登录，即使我在文本字段中输入了正确的用户名和密码。它一直显示用户名或密码不正确的消息。有谁知道它为什么这样做？

假设用户的详细信息是这样的：

```
Username: j.lu
Password cricket 
```

在数据库中，它存储这些详细信息，如下所示：

```
Username      Password

j.lu          21dfc92f24a130b9259aa650378a3170 
```

它将这样的密码存储在数据库中，因为我包括盐。

但是有没有人看到我在登录页面中做错了什么，因为它根本没有登录用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:25:19.073

您需要存储用户注册时生成的盐，以便在用户尝试登录时确定正确的哈希值。

盐的目的是使彩虹表失效。它们不需要保密（至少比密码哈希更保密），因此将其存储在同一个表中。

# iphone - 在 Interface Builder 中看不到 480px 以下的 UIScrollView 内容

> ID：12134977
> 
> 赞同：0
> 
> 时间：2012-08-27T00:17:07.070
> 
> 标签：iphone, uiscrollview, xcode4.2

我的所有按钮/标签/文本都嵌入在 uiscrollview 中。一切正常。但是，如何在 IB 的 480px 标记下查看/编辑？它切断了底部的 uiscrollview。我在 xcode 4.2 ios5 中使用故事板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:35:14.640

以防万一您还没有找到答案并保存答案。解决方案很简单，但很难在网上找到答案。尝试这个：

1.  选择滚动视图对象
2.  选择尺寸检查器（option-cmd-4）
3.  在 View -> Y 下，输入一个负数（作为向上滚动）
4.  确保 View -> Height 对于滚动视图的内容足够大
5.  添加、定位和配置子视图
6.  （可选）将 View -> Y 设置回 0 以进行构建

前：

![前](../Images/e69de9d536d88257c03919b56505e180.png)

设置 Y 值后：

![在此处输入图像描述](../Images/acf9f29e960d3e484be3606bbf961e42.png)

# html - 重叠 1 px 边框使边框更厚

> ID：12134982
> 
> 赞同：8
> 
> 时间：2012-08-27T00:18:21.337
> 
> 标签：html, css, border, jquery-masonry

有没有办法，当我重叠（触摸）div 时，使 1px 边框不会变成 2 像素。而且我知道我可以在其中两条边上设置一个边框，但是 div 的一个边缘不会有边框。顺便说一句，我正在使用 jQuery Masonry。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T00:22:31.877

是的，右边的 div 看起来像这样

```
 border: 1px solid #fff;
     border-left: none; 
```

第二个border-left将覆盖刚刚放在那里的左边框

编辑：

好的，因为你正在使用 jQuery masonary - 这样做

```
 .container {
              width:50px;
              height:80px;
              border:1px solid black;
              margin-right: -1px;
              margin-bottom: -1px;
              } 
```

我提到的重叠方法会起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T01:07:44.343

结合边框和边距（即使使用边框框）很棘手，因为您的布局取决于容器宽度。最好将子元素添加到 Masonry 定位的元素和样式...

```
.container .post {
   float: left;
   width: 240px;
}

.container .text {
    outline: 1px solid #999;
    padding: 10px;
    margin: 0 1px 1px 0;
} 
```

`outline`允许边框出现在 div 的“外部”，这使得它们更容易重叠

[http://jsfiddle.net/4xmUY/](http://jsfiddle.net/4xmUY/)

（如果您碰巧使用此答案，请接受斯科特的答案，因为这应该是对他的答案的评论，但解释不适合那里）。

# c++ - 来自 C++ 的时间序列“预测”R 包

> ID：12134983
> 
> 赞同：1
> 
> 时间：2012-08-27T00:18:51.627
> 
> 标签：c++, r, time-series

我找不到任何关于如何使用 C++ 中的“预测”R 包的文档。有什么可以在线获取的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T00:39:43.567

我没有仔细看，但由于它取决于 CRAN 包[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)和[RcppArmadillo](http://dirk.eddelbuettel.com/code/rcpp.armadillo.html)（我参与其中，并且有助于从 R 中使用 C++），我会说是的。您可能可以在源代码中四处寻找并找到其他入口点。毕竟它是开源的。

但是，如果您要求一个定义明确的预先存在的预测 API，答案可​​能是否定的。

*编辑：*哦，还有一个明显的[RInside](http://dirk.eddelbuettel.com/code/rinside.html)插件，它允许您非常轻松地将 [单个实例] R 嵌入到 C++ 应用程序中。它通过将现有（但难以使用）的嵌入 API 包装在一个更易于使用的 C++ 类中来实现这一点，该类抽象了所有的手持设备。

# sip - SIP 拨号计划的星号入口点

> ID：12134988
> 
> 赞同：0
> 
> 时间：2012-08-27T00:19:32.297
> 
> 标签：sip, voip, asterisk, asteriskami

我知道这应该很容易，但我无法通过星号配置文件来执行此操作。

我需要什么`entry point`来`external SIP call`执行星号脚本。为了简单起见，假设我想执行这样的事情：

```
[my888app]
exten => 888,1,Answer()
exten => 888,2,SayDigits(1234)
exten => 888,3,Hangup 
```

用户将以下列形式拨打此特定的 888 SIP 分机：

```
sip:888@mydomain.com 
```

这不是一个`internal`呼叫，呼叫来自另一台服务器，为了测试我正在使用这个[Phono 示例](http://s.phono.com/releases/0.4/samples/kitchen-sink/www/index.html)并且呼叫正在进入星号服务器，问题是我不知道如何将它路由到`my888app`. 已经尝试过`/etc/asterisk/sip_general_custom.conf`没有运气，猜测问题是上下文 [my888app] 不正确。我前面已经有星号 CLI

所以，回顾一下：

*   没有 DID 有趣的事情，只是 SIP
*   `.conf`我将在哪个文件中`[my888appp]`
*   我不明白 888 是一个`entension`还是一个`channel`
*   [my888app] 会同时拨打多个电话，有问题吗？
*   现在当我从我得到的 Phono 应用程序拨号时`please enter the channel number follow by the # sign`，我不知道这是否有帮助

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:06:14.763

好吧，经过大量搜索，路由如下（默认安装FreePBX）：

*   SIP 呼叫进入一个名为`from-sip-external`
*   从那里，它进入上下文`from-trunk`
*   从那里到`from-pstn`
*   从那里到`ext-did-catchall`

在那里，在`ext-did-catchall`，是我可以放的地方`my888app`，它会执行得很好

我 100% 肯定这不是放置应用程序的正确位置，但由于我不是 Asterisk 专家，我会接受它。

希望这对其他人有帮助。谢谢。-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:08:30.717

您需要检查 sip.conf 中的上下文属性。您可以在一般部分有一个上下文，并且您可以在您的对等定义中拥有另一个，如果您没有在您的对等中定义任何特定上下文，则假定通用上下文属性。

为简单起见，我建议您在 sip.conf 的一般部分更改上下文并将您的 my888app 放入 extensions.conf。

sip.conf 常规部分的示例：

```
[general]
context=my888app
... 
```

关于888：它是一个分机，一个分机是您通话的终点。通道是在建立呼叫以保留会话信息并在两点之间交换数据（语音）时动态创建的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T21:03:42.297

答案很简单，任何外部调用首先登陆在 sip.conf 文件的一般部分下定义的上下文。您可以在那里定义自己的拨号计划。如果你想从那里重定向到你自己的上下文，那么你可以使用 GoSub。

# android - 使用 phonegap 将图像保存到图库中

> ID：12134997
> 
> 赞同：0
> 
> 时间：2012-08-27T00:20:43.673
> 
> 标签：android, cordova

如何使用 android phonegap 将图像保存到手机图库？

我试过这段代码：

```
 function save(){
document.addEventListener("deviceready", onDeviceReady, false);
}

// PhoneGap is ready
//
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
    fileSystem.root.getFile("pic.jpg", {create: true, exclusive: false}, gotFileEntry, fail);
}
function gotFileEntry(fileEntry) {
console.log(fileEntry.fullPath);
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    var photo = document.getElementById("dwnldImg");
    writer.write(photo.value);
} 
```

但它会将图像保存到我的项目目录中，即`file:///data/data/pack.name/pic.jpg`. 我怎样才能让它出现在移动图库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:54:48.417

尝试使用这个：

```
function capturePhoto() {
    // Take picture using device camera and retrieve image as base64-encoded string

    navigator.camera.getPicture(onPhotoDataSuccess, onFail,{
        quality : 25, 
        destinationType : Camera.DestinationType.FILE_URI, 
        sourceType : Camera.PictureSourceType.CAMERA, 
        allowEdit : true,
        encodingType: Camera.EncodingType.JPEG,
        popoverOptions: CameraPopoverOptions,
        saveToPhotoAlbum: true });         
} 
```

# magento - magento 使用 cms 指令将 global_messages 添加到 cms 页面

> ID：12134999
> 
> 赞同：0
> 
> 时间：2012-08-27T00:21:02.727
> 
> 标签：magento, content-management-system, block, messages

我在 cms 页面中尝试了以下操作：

```
{{block type="core/messages" template="core/messages.phtml"}}
{{block type="core/messages" as="global_messages"}}
{{block type="Mage_core_Block_Messages" template="core/messages.phtml"}} 
```

但没有一个工作。我想显示

```
Mage::getSingleton('core/session')->addSuccess('Your form has been sent'); 
```

在控制器重定向到的 cms 页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:46:42.807

不幸的是，消息必须从存储传递到消息块。这通常在控制器操作 (ref [`Mage_Core_Controller_Varien_Action::_initLayoutMessages()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php#L636)) 中完成。

`Mage_Cms_PageController`重写类以包含此方法调用（用于通用实用程序）或对个别情况使用观察者将非常简单。