# StackOverflow 问答 11541000-11541999

# plsql - 如何在plsql中传递运行时变量

> ID：11541000
> 
> 赞同：0
> 
> 时间：2012-07-18T12:06:49.147
> 
> 标签：plsql, oracle-apex

```
set serverout on
declare
first_num number(8):=&num;
second_num number(8):=&num1;
result number(8);
begin
result:=(first_num/second_num+second_num);
dbms_output.put_line('the resultant value is:'||result);
end; 
```

我想在运行时传递变量，当我在 oracle apex 4.1 中运行该程序时，我收到以下错误消息

```
ORA-06550: line 2, column 22:
PLS-00103: Encountered the symbol "&" when expecting one of the following:
( - + case mod new not null continue avg count current exists max min prior sql stddev
   sum variance execute forall merge time timestamp interval
date
pile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:50:37.853

`&`替换是 sqlplus 客户端的一个特性，而不是 PL/SQL 本身。因此，您的问题特定于您正在使用的“Oracle Apex”客户端（抱歉，从未听说过）。我的理解是其他一些 GUI 客户端也支持`&`替换。我只是自己使用 sqlplus。

`&num`不是有效的PL/SQL。但默认情况下，sqlplus 会在将代码传递给服务器进行解析/执行之前将其替换为相应的值。如果您实际上是在开发程序，那么您需要查看您的语言/框架的绑定变量。抱歉，我没有适合您的解决方案，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T05:50:23.287

而不是写

```
first_num number(8):=&num;
second_num number(8):=&num1; 
```

写

```
first_num number(8):=:num;
second_num number(8):=:num1; 
```

它在顶点工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:21:26.737

如果您正在谈论从 APEX 内启动 sqlplus 会话到后端服务器以执行，那么您的脚本看起来不错。但在这种情况下，我会将您的变量更改为 &1 和 &2 而不是 &num 和 &num1 并试一试。

但是，如果您尝试直接在 APEX 中执行此代码块，那么 Sodved 是正确的，您需要先分别将变量标记为 :num 和 :num1 ，然后调用模块必须在您之前将变量绑定到它可以执行。

希望这可以帮助。

# java - 从 eclipse 启动 Fuseki Server

> ID：11541002
> 
> 赞同：1
> 
> 时间：2012-07-18T12:06:55.677
> 
> 标签：java, eclipse, jetty, sparql

我最初使用带有 xstream 库的码头服务器来处理我的 xml 请求。现在我想使用 fuseki 服务器来创建一些 sparql 端点。我不想从命令行运行 fuseki 服务器

我下载了 fuseki libaray，并尝试在其中启动码头服务器，但它没有启动。我试图找到处理 sparql 的相关库，所以我将它们与我的旧码头库集成，但我找不到它们。有什么建议么？

谢谢

# xml - Oracle 上的 XML 解析失败

> ID：11541005
> 
> 赞同：1
> 
> 时间：2012-07-18T12:07:01.697
> 
> 标签：xml, oracle, parsing, xmltype

我在 oracle db 上使用查询，它使用 xmltype 函数和 xpath 从 clob 中提取值。不幸的是，查询失败并报告“XML Parsing failed”。我假设 clob 中的字符串之一不是有效的 XML。如何确定受影响的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:18:47.980

一种解决方案是对一小部分数据执行查询，并通过添加类似于以下的条件来慢慢减少记录数量：

```
AND id BETWEEN 20 AND 2000 
```

另一种方法是使用如下游标一个接一个地获取记录：

```
DECLARE
  CURSOR cur IS 
    /* Your SQL goes here */
    SELECT * FROM xx_invalid_row_t;

  table_row xx_invalid_row_t%ROWTYPE; /* change the table name*/
  row_count NUMBER :=0;
BEGIN
  OPEN cur;
  LOOP
    row_count := row_count + 1;
    FETCH cur INTO table_row;
    IF cur%NOTFOUND THEN
      EXIT;
    END IF;
  END LOOP;
  CLOSE cur;

  dbms_output.put_line('No errors here');
EXCEPTION
 WHEN OTHERS THEN
   dbms_output.put_line('Error on row '||row_count||' with message: '|| sqlerrm);
   dbms_output.put_line('Last successfully fetched row has the id:'||table_row.id);
END; 
```

如果您偶然发现更直接的方式，请告诉我。

# objective-c - 如何使用正则表达式查找多括号内容？

> ID：11541007
> 
> 赞同：0
> 
> 时间：2012-07-18T12:07:12.757
> 
> 标签：objective-c, regex, nsregularexpression

我想找到一个像下面这样带括号的甲酸盐。

它需要以“ **{id: ”开头，以“** **}** ”结尾，
并且id值为AZ。就这样。

我被内括号弄糊涂了...

下面是一个样品甲酸盐。

```
 {
            id: "A",
            cid: "6331411109881515776",
            latlng: {
                lat: 37.492488999999999,
                lng: 127.014357
            },
            image: "http://maps.gstatic.com/intl/ko_kr/mapfiles/markers2/markerA.png",
            sprite: {
                width: 20,
                height: 34,
                top: 0,
                image: "http://maps.gstatic.com/mapfiles/markers2/red_markers_A_J2.png"
            },
            icon_id: "A",
            drg: true,
            laddr: "강남대성학원, 서울특별시 서초구 서초1동 1657-7",
            geocode: "CQISkUJWkUyzFQkXPAId1RWSByEAD3Pz27DdVym31_joa6F8NTEAD3Pz27DdVw",
            sxti: "강남대성학원",
            sxst: "서초1동",
            sxsn: "1657-7",
            sxct: "서울특별시",
            sxpr: "",
            sxpo: "137-071",
            sxcn: "KR",
            sxph: "+8225817217",
            name: "강남대성학원",
            ss: {
                edit: true,
                detailseditable: true,
                deleted: false,
                rapenabled: true,
                mmenabled: true
            },
            elms: [
                4,
                1,
                6,
                1,
                10,
                2,
                12,
                1,
                9,
                1,
                5,
                2,
                11
            ]
        }, 
```

谢谢你的帮助~~

****** *** *** 2012/07/19 编辑***** ** *** *****

 **我的代码是

```
NSError *error = nil;

NSString *urlString = [NSString stringWithFormat:@"http://maps.google.co.kr?q=%@&output=json", 
                       [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
//#define NSKoreanEncoding  0x80000422
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString] options:kNilOptions error:&error];
NSString *dataString = [[NSString alloc] initWithData:data encoding:NSKoreanEncoding];

//remove the while(1); from data
dataString = [dataString substringFromIndex:9];

// Create SBJSON object to parse JSON
SBJsonParser *parser = [[SBJsonParser alloc] init];
NSMutableDictionary *dict = [parser objectWithString:dataString error:&error];

NSLog(@"ERROR: %@", error);
NSLog(@"dict: %@", dict);
NSLog(@"dataString: %@",dataString);

//Samples can get result
NSString *jsonStr  = @"{\"name\":\"jia\",\"age\":\"24\"}";  
NSString *jsonStr2 = @"[\"1\",\"2\"]";  

SBJsonParser *jsonParser = [[SBJsonParser alloc] init];  

dict = [jsonParser objectWithString:jsonStr];  
NSLog(@"%@",dict);  

NSMutableArray *arr = [jsonParser objectWithString:jsonStr2];  
NSLog(@"%@",arr); 
```

因为真正的JSON对象是一个“key”=“value”的格式，我不能用它们来做字典……此外，还有一种方法可以改变格式……

下面是几行与我的目标相同的 Java 代码。

```
//remove while(1);
String jsonString = sb.toString().substring(9);

Log.d(TAG_SERVER, jsonString);
JSONObject jj = new JSONObject(jsonString);
//get "overlays" object
JSONObject overlays = jj.getJSONObject("overlays");
//get "markers" object
JSONArray markers = overlays.getJSONArray("markers"); 
```

我的目标是获得标记。它们包含谷歌地图的完整搜索结果。

如果有人知道怎么做，请告诉我~~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:20:36.417

正则表达式本身无法匹配嵌套结构，递归正则表达式一团糟。

您可以做的最好的事情是使用适当的 JSON 解析器。有很多图书馆可供选择。[请参阅http://json.org/](http://json.org/)底部的 一些列表。

* * *

**示例：（**使用[TouchJSON](https://github.com/TouchCode/TouchJSON)）

```
NSData *theJSONData = /* load your JSON data */

// Look for the opening '{'
const unsigned char *buf = [theJSONData bytes];
NSUInteger len = [theJSONData length];
if (len > 32) len = 32;
NSUInteger start;
for (start = 0; start < len; start++) {
    if (buf[start] == '{') break;
}
if (start == len) {
    NSLog(@"Could not find '{'");
}

// Cut off any prefix javascript ("while(1);")
if (start > 0) {
    len = [theJSONData length];
    theJSONData = [theJSONData subdataWithRange:NSMakeRange(start,len-start)];
}

NSError *theError = nil;
NSDictionary *theObject = [[CJSONDeserializer deserializer]
        deserializeAsDictionary:theJSONData
        error:&theError];

// Print the cid
NSLog(@"cid = %@", [theObject objectForKey:@"cid"]); 
```

**输出：**

```
cid = 6331411109881515776 
```**

# logging - 如何使用 nlog 写入具有关键级别的事件日志？

> ID：11541010
> 
> 赞同：2
> 
> 时间：2012-07-18T12:07:18.703
> 
> 标签：logging, event-log, nlog

我正在尝试将日志从 nlog 写入窗口的事件日志。这是我的配置

```
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
    <targets>                
        <target name="eventLog" xsi:type="EventLog" layout="${longdate} [${level:upperCase=true}] : ${message} ${exception:format=ToString}" log="Application" source="mySource"/>
    </targets>
    <rules>
        <logger name="*" minlevel="Debug" writeTo="eventLog"/>
    </rules>
</nlog> 
```

我需要按级别区分事件日志中的日志，我需要有单独`Error`的`Critical`级别日志，但这些行：

```
logger.Error("error test do eventLogu");
logger.Fatal("fatal test do eventLogu"); 
```

两者都写入具有`Error`级别的事件日志。

是否可以使用 nlog 写入具有严重级别的日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:59:08.197

看起来不像。

如果我的理解是正确的，EventLogTarget 使用[EventLogEntryType Enumeration](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlogentrytype.aspx)来选择事件日志级别。此枚举没有关键值，用于较低级别（内核等）事件。

NLog[代码](https://github.com/jkowalski/NLog/blob/master/src/NLog/Targets/EventLogTarget.cs)本身说

```
else if (logEvent.Level >= LogLevel.Error)
{
    entryType = EventLogEntryType.Error;
} 
```

乔

# scala - 如何在Scala中进行模式匹配时将名称分配给中间人

> ID：11541013
> 
> 赞同：6
> 
> 时间：2012-07-18T12:07:31.243
> 
> 标签：scala

我正在对冒号分隔的字符串进行一些模式匹配，如下所示：

```
case s:String => s.split(":") match {
  case Array("foo","bar") => ...
  case Array("hello",_,_) => ...
  ...
} 
```

如何重新排列代码以将名称分配给返回的数组`s.split(":")`？

我尝试了以下方法无济于事：

```
case s:String => val x = s.split(":") match {
  case Array("foo","bar") => // try to use x here
  ...
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T12:10:08.833

```
case s:String => s.split(":") match {
  case x @ Array("foo","bar") => ...
  case x @ Array("hello",_,_) => ...
  ...
} 
```

或者

```
case s:String =>
  val x = s.split(":")
  x match {
    case Array("foo","bar") => ...
    case Array("hello",_,_) => ...
    case Array(aStr, "bar") => println(aStr.toUpperCase)
    ...
} 
```

# php - 页眉中找不到页面错误

> ID：11541018
> 
> 赞同：0
> 
> 时间：2012-07-18T12:08:18.953
> 
> 标签：php

以下基本代码按预期工作。

```
<?php
mysql_connect("localhost", "user", "user@123") or die(mysql_error());
echo "Connected to MySQL<br />";
?> 
```

我所需要的是应该返回 page not found 404 错误而不是 mysql_error。我正在寻找尽可能短的代码，因为这将用作负载均衡器检查。

以下似乎不起作用。我得到一个空白页。

```
mysql_connect("localhost", "user", "user@123") or die(header("HTTP/1.0 404 Not Found")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:10:28.110

[`mysql_connect`如果连接不成功，将返回 false 值。](http://php.net/manual/en/function.mysql-connect.php)

```
$connected = mysql_connect("localhost", "user", "user@123");
if (!$connected){
  header("HTTP/1.0 404 Not Found");
} 
```

不确定您使用此代码的确切用途 - 但无法连接到您的数据库并不一定意味着找不到请求的页面 - 这也可能是您的 sql 服务器的问题。

* * *

附带说明 - 避免使用过时的 mysql_* 函数。[强烈建议不要](http://php.net/mysql_query)将它们用于新代码 。更现代的替代品可用且维护得更好。考虑改为学习 [准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement) 并使用 [PDO 或 MySQLi](http://php.net/manual/en/mysqlinfo.api.choosing.php)。当严格使用时，它们避免了繁琐和手动逃逸的部分，因此变得更容易堆放，并且作为副产品使用更安全。请参阅[PDO 教程](http://goo.gl/vFWnC)以了解开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:12:56.827

使用 mysqli 或 PDO ， mysql_* 会贬值

```
$link =mysql_connect("localhost", "user", "user@123");
if (!$link) {
    header("error.php");
}
echo 'Connected successfully'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:13:22.123

我将执行以下操作：请记住，我使用的是 mysqli，强烈建议不要使用 mysql_*。

```
$mysqli = new mysqli('localhost', 'user', 'password', 'dbname');

if ($mysqli->connect_error) {
    header("HTTP/1.0 404 Not Found");
} else {

} 
```

您确定要返回 404，但由于已找到资源，这具有误导性，我将返回 500 错误作为更合适的服务器错误。

有关 HTTP 状态代码的列表，请参见[此处](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T12:13:43.707

我会简单地做一个 if 检查并返回一个 500 错误，因为如果谷歌在您无法连接时尝试查看索引页面并将其返回 404，它会认为您的网站已损坏并且您将失去排名和指向该页面的链接页。

500 至少会表明存在服务器问题，但它会被修复：

```
if(!mysql_connect('localhost', 'user', 'pass')){
    header('HTTP/1.1 500 Server error');
    exit();
} 
```

# c# - 将数据点转换为像素坐标以进行绘图

> ID：11541023
> 
> 赞同：2
> 
> 时间：2012-07-18T12:08:34.870
> 
> 标签：c#, winforms, math, drawing, pixel

我有一个`PictureBox`并且我想通过知道它的数据点（点的 X，Y）来绘制二极管曲线。目前我的图片框大小为 365*468 像素。我正在挠头将数据点转换为像素友好值，以便曲线在图片框上很好地绘制。

到目前为止，我尝试了各种公式，但没有成功！目前我被困在代码中，它至少显示了一点曲线！

```
 private PointF[] TranslatePoints(PointF[] points)
    {
        var count = points.Count();
        var p = new PointF[count];

        for(var i = 0; i < count; i++)
        {
            p[i].X = DrawingArea.Width * (1 + (points[i].X / _voltageRange));
            p[i].Y = DrawingArea.Height * (1 - (points[i].Y * (float)Math.Pow(_currentRange, -1)));
        }

        return p;
    } 
```

`_voltageRange`并且`_currentRange`是我希望曲线基于的比例...通常是+2，如果X轴上的平均值在-2和+2之间，则应该绘制它们，因为Y轴值的电流应该例如，如果它们在 -10 micro 和 +10 u 之间，则绘制

我希望这个方法尽可能独立，所以如果我调整图片框的大小，比例会正确更新。

例如，这是我拥有的实际值的第一个数据点： (-0.6375, -0.00000993375) 并且我的方法将其转换为 (24.515625, 932.899536) 超出大小的 Piturebox。

通常二极管曲线如下所示：

![在此处输入图像描述](../Images/2611aa2164218192d5c6bd6cabd559c6.png)

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:38:02.670

我发现问题了！！！在我使用的公式中，我必须将宽度和高度除以 2！像这样：

```
 p[i].X = (DrawingArea.Width/2F) * (1 + (points[i].X / _voltageRange)); 
   p[i].Y = (DrawingArea.Height/2F) * (1 - (points[i].Y * (float)Math.Pow(_currentRange, -1))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:24:42.797

缩放坐标后，您需要将形状向后移动，因为它会更大，但另一侧的起始位置会有所不同，因此在缩放后，您需要将形状拉回原始起始位置。所以你需要定义一个起始位置，它可以是最左边的底点。之后，您可以检查原始坐标和放大坐标的 X/Y 差异，并使用以下值校正其他点，例如：

```
var leftBottomPointOriginal = LeftBottom(points)
var leftBottomPointScaledUp= LeftBottom(scaledUpPoints)

var xCorrection = leftBottomPointScaledUp.X-leftBottomPointOriginal.X
var yCorrection = leftBottomPointScaledUp.Y-leftBottomPointOriginal.Y

 for(var i = 0; i < count; i++)
        {
            p[i].X = DrawingArea.Width * (1 + (points[i].X / _voltageRange))-xCorrection;
            p[i].Y = DrawingArea.Height * (1 - (points[i].Y * (float)Math.Pow(_currentRange, -1)))-yCorrection;
        } 
```

# iphone - dismissModalViewControllerAnimated 关闭我的背景音乐

> ID：11541024
> 
> 赞同：0
> 
> 时间：2012-07-18T12:08:38.400
> 
> 标签：iphone, ios5, xcode4.3

当视图打开时我有背景音乐，然后音乐开始完美播放，即使我将视图切换到其他视图并再次返回主视图，背景音乐仍然可以正常播放。但是当我在后退按钮中更改我的代码时

```
mainViewController *mainView =[[mainViewController alloc] initWithNibName:nil bundle:nil];
mainView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:mainView animated:YES]; // this will flip from right 
```

到

```
[self dismissModalViewControllerAnimated:YES]; // this will flip back from left 
```

什么时候翻回主菜单，我的背景音乐没有播放。只是好奇为什么？如何解决？出于某种原因，我将代码更改为 [self dismissModalViewControllerAnimated:YES]; 因为我希望我的观点从其他方式翻转回来。

当使用此代码显示 mainView 时，我的背景音乐正在播放

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];
        NSString *pathFile = [[NSBundle mainBundle] pathForResource:@"Start" ofType:@"mp3"];
        player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:pathFile] error:NULL];
        [player play];
    } 
```

如果视图发生变化则停止

```
- (void) viewDidDisappear:(BOOL)animated
{
    [player stop];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:15:43.017

在 ViewDidApper 方法中启动您的播放器。希望对你有帮助

```
-(void)viewDidAppear:(BOOL)animated
{
NSString *pathFile = [[NSBundle mainBundle] pathForResource:@"Start" ofType:@"mp3"];
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:pathFile] error:NULL];
    [player play];
[super viewDidAppear:YES];
} 
```

# android - SD卡不再是Eclipse中的目录

> ID：11541028
> 
> 赞同：-2
> 
> 时间：2012-07-18T12:08:45.353
> 
> 标签：android

我昨天将我的 ADT 更新为 rev 20，之后我遇到了这个奇怪的问题，我的 sdcard 不是目录，而是 Eclipse 文件资源管理器中的一个文件。

甚至在我更新 ADT 之前，我就已经创建了与之对应的模拟器。

谁能解释我，可能是什么问题？

注意：这是一个仅对应于我的一个模拟器（SDK 版本 10）的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T09:47:56.490

eclipse 中的文件资源管理器插件不会跟随符号链接。相反，它将大多数目录显示为空目录：

*   /SD卡
*   /mnt/sdcard
*   /mnt/sdcard/external（Galaxy Tab GT-P1000 的外部 micro SD）
*   /存储/SD卡0
*   /存储/模拟/旧版

在我的 Galaxy Nexus 上，到内置闪存/sdcard 的物理路径（挂载点）是：

*   /存储/外壳/0

因此，解决方案可能是浏览所有路径（无论是否可能），以找出设备制造商决定隐藏安装点的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:12:01.250

探索**mnt>sdcard**（mnt 是图像中的第 6 个目录）而不是 sbin 并查看它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T12:12:28.300

您可以在`sdcard`文件夹中找到该文件夹​​的内容`mnt/sdcard`。

# regex - 使用 nginx 将请求 url 的一部分重写为 php 脚本上的变量

> ID：11541029
> 
> 赞同：0
> 
> 时间：2012-07-18T12:08:45.660
> 
> 标签：regex, nginx, rewrite

我想要做的是：

```
domain.com/account/manage/somekey/  ->  domain.com/account/manage/?key=somekey
domain.com/account/manage/somekey/settings/  ->  domain.com/account/manage/settings/?key=somekey 
```

somekey 是一个包含 AF,af,0-9 长度为 24 个字符的字符串。

这是我的第一个，但我不确定如何做第二个。

```
location /account/manage/  {
     rewrite "^/account/manage/([A-Fa-f0-9]{24})/(.*)$" /account/manage/?key=$1;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:07:31.100

```
location /account/manage/ {
    rewrite "^/account/manage/([A-Fa-f0-9]{24})/(settings/)?" /account/manage/$2?key=$1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:14:10.033

我对 nginx 没有太多经验，但试试这个版本：

```
location /account/manage/$  {
  rewrite ^/account/manage/([A-Fa-f0-9]+)(/[^/]*)?/?$ /account/manage$2/?key=$1;
  try_files $uri $uri/;
} 
```

# c# - 使用 MongoDB 和 C# 序列化对象图

> ID：11541033
> 
> 赞同：0
> 
> 时间：2012-07-18T12:08:55.157
> 
> 标签：c#, mongodb, serialization, mongodb-.net-driver, bson

我有一个来自第 3 方开发人员的 Winforms 控件，并希望将其数据直接存储在 MongoDB 中。这是一个甘特图，其中包含资源列表和约会列表。约会还有一个资源列表，负责将约会映射到资源。

为了简化存储，我创建了一个名为“PlanningDocument”的类：

```
public class PlanningDocument
{
[BsonId]
public ObjectId Id { get; set; }
public string Name { get; set; }
public ResourceCollection Resources { get; set; }
public ItemCollection Schedule { get; set; }
} 
```

文档正确存储在数据库中（我正在使用 MongoVUE 检查数据库的内容）。但是“计划”集合中的项目不包含对资源的引用，因为它在程序运行时。

我必须做什么来存储对象之间的引用关系？

编辑：我将尝试用一个更具体的例子来解释我想做什么：

```
 public class Identity
    {
        public string Id;

        public Identity()
        {
            Id = Guid.NewGuid().ToString();
        }
    }

    public class Thing : Identity
    {
        public string Name = "";
    }

    public class Drawer : Identity
    {
        public List<Thing> SomeThings;
        public List<Thing> AdditionalThings;

        public Drawer()
        {
            SomeThings = new List<Thing>();
            AdditionalThings = new List<Thing>();
        }
    } 
```

我有这些类“东西”和“抽屉”。抽屉可以包含“SomeThings”和“AdditionalThings”中的东西。

```
var d = new Drawer();
d.AdditionalThings.Add(new Thing() { Name = "Thing 1"});
d.AdditionalThings.Add(new Thing() { Name = "Thing 2" });
d.AdditionalThings.Add(new Thing() { Name = "Thing 3" });

d.SomeThings.Add(new Thing() { Name ="Thing A"});
d.SomeThings.Add(d.AdditionalThings[0]); 
```

当我在两个列表中存储相同的事物时（就像这里的“事物 1”一样），MongoDB 存储事物 1 的副本 - 而不是引用。

我的问题是：是否存在使 MongoDB 和 C# 驱动程序在此处存储引用而不是副本的通用方法？

提前感谢阿奇姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:25:38.663

不，没有办法在 C# 驱动程序中自动存储引用。这是设计使然，因为自动存储引用意味着我们将在运行时自动解析这些引用，而我们不会这样做。

由于您的“事物”对象具有标识，因此当您更新其中一个对象时，通过在客户端执行此操作或通过使用位置 $ 运算符和编写适当的更新语句来使它们保持同步并不困难更新多标志。

# python - appengine python验证器使用self

> ID：11541039
> 
> 赞同：0
> 
> 时间：2012-07-18T12:09:14.543
> 
> 标签：python, google-app-engine

我有一个对象可以包含对同一类型的其他对象的引用。在我的验证器中，我想确保引用不是针对自身的。这可能吗？

```
class MyObject(db.Model):

  def not_self_validator(value):
    if self._my_entity == value: #something like this..
      logging.warn('attempted to set object to itself')
      raise ValueError('Unable to set an object to itself')

  _my_entity = db.ReferenceProperty(db._SELF_REFERENCE,required=False,default=None,validator=not_self_validator) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:32:34.617

属性验证器可以接收任何方法/函数，但不可能将该方法绑定到自身。但是，您可以将验证例程调整为以下内容：

```
def not_self_validator(value):
  #is checks for same address(pointer) whereas == will call the equality method
  if value._my_entity is value:
    logging.warn('attempted to set object to itself')
    raise ValueError('Unable to set an object to itself') 
```

# .net - Windows 上没有 CR 的 LF

> ID：11541042
> 
> 赞同：2
> 
> 时间：2012-07-18T12:09:32.427
> 
> 标签：.net, vb.net

如何在不添加回车的情况下创建带有换行符的字符串？在 Windows 机器上使用 Environment.NewLine 方法会返回一个 CR/LF 组合。我只需要LF。

我知道 Microsoft.VisualBasic 库中的 VBLF，但作为公司政策，我们不允许使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:45:14.473

我建议使用`ControlChars`类中的常量来获取单个 LF 字符。另外，我建议使用字符串生成器：

```
Dim builder As New StringBuilder()
builder.Append("first line")
builder.Append(ControlChars.Lf)
builder.Append("second line")
builder.Append(ControlChars.Lf)
builder.Append("third line") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:13:26.813

您可以单独添加回车/换行

```
Dim myString As String = "This is my string"

myString &= vbCr   'This will only add CarrigeReturn character 
```

或者，您可以使用 ASCII 代码作为回车符，即 13 而换行符是 10

```
myString &= Chr(10)    'This will add LF
myString &= Chr(13)    'This will add CR 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:39:10.407

如果你必须坚持这个限制，你可以把 LF 从 Environment.NewLine 中拉出来。

`Environment.NewLine.Substring(1,1)`

# ios - 应用内购买自动续订 - 如何获得首次或初始购买收据？

> ID：11541046
> 
> 赞同：0
> 
> 时间：2012-07-18T12:09:56.967
> 
> 标签：ios, subscription, in-app, renewal

我很难找到一个贯穿整个自动续订实施过程的好教程，所以我对如何从初始购买中获得收据感到困惑。我创建了一个服务器端应用程序来调用 iTunes 进行收据更新，但它需要传入收据和共享密钥。

其他要点：

1）我可以从我的应用程序中从 iTunes Connect 中提取我的应用程序内产品，所以我知道它是通过 productsRequest 正确设置的。我认为我什至不需要此代码，因为我没有创建店面（假设我不需要，因为它是自动更新的），但我只是想看看我是否可以提取产品信息并且我可以。

2）我在我的应用程序中添加了一个事务观察器，以及一个用于捕获交易的支付队列例程，但是当我第一次在我的 iPhone 上运行该应用程序时，这些例程没有任何反应。

3) 我的服务器端代码每天对过期和活动帐户调用一次 iTunes，以查看是否有更新的收据。不确定这是否有效，因为我不确定如何获得第一张收据。

任何帮助将不胜感激，任何关于自动更新订阅的良好链接也将非常棒。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:24:22.190

我花了一个月的时间与 Apple 来来回回才把这件事做好。第一次购买必须来自您的应用程序。它不是在 iTunes 上完成的。您在 iTunes 上免费或象征性地提供应用程序，然后要求用户从商店订阅或在他们第一次打开应用程序时查看您构建的内容。我对此感到非常困惑。我花了 2 周的时间试图解决这个问题，所以如果某个地方没有原始收据，应用程序就不会启动。我希望你能想出一些比我更简单的逻辑！

测试第一次购买会很痛苦，因为每次您想测试购买收据时都必须创建一个新的测试用户。

一旦有了原始事务，您就可以使用您构建的 RESTORE PURCHASE 方法测试流程，以便它可以在所有设备上运行，并在新设备上进行替换。

希望这可以帮助。

# visual-c++ - wxWidgets 带有透明位图的透明控件

> ID：11541052
> 
> 赞同：0
> 
> 时间：2012-07-18T12:10:23.020
> 
> 标签：visual-c++, wxwidgets

我在透明框架顶部有透明控件（带有绘制和擦除背景事件的自定义控件），我试图在没有任何运气的情况下将透明 png 绘制到控件的中心。

我得到的是一个以黑色矩形为背景的图像！请查看随附的屏幕截图并从链接[http://forums.wxwidgets.org/viewtopic.php?f=21&t=35465下载源代码 Test.zip](http://forums.wxwidgets.org/viewtopic.php?f=21&t=35465)

有什么方法可以绘制透明的png文件吗？

在此先感谢 Rajan.M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:22:13.627

将您的图像从 png 转换为位图，然后将所需的背景位设置为透明。

恕我直言，强制位图背景透明的最简单方法是使用您最喜欢的位图编辑器。我用的是Visual Studio自带的，看到这个答案[Give wx.StaticBitmap a transparent background? wxpython](https://stackoverflow.com/questions/9684388/give-wx-staticbitmap-a-transparent-background-wxpython/9684977#9684977)

# microsoft-metro - Metro8 SqlConnection

> ID：11541053
> 
> 赞同：2
> 
> 时间：2012-07-18T12:10:27.097
> 
> 标签：microsoft-metro, sqlconnection

有什么办法可以`SqlConnection`在 Metro 8 中使用吗？（在表单中`SqlConnection conn = new SqlConnection(...)`）如何连接在 SQL Server Management Studio 中创建的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:59:46.417

您不能在 Metro 应用程序中使用 System.Data。我见过的解决此问题的唯一方法是创建一个非 WinRt 服务，该服务与 DB 进行通信并与之对话。或者，不要使用 Metro。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T12:18:10.280

您是否使用“使用 System.Data.SqlClient;”引用了正确的 DLL？在那里/然后你可以找到所需的类SqlConnection。

您也可以尝试使用 SqlHelper.cs 来编写更少的代码并轻松连接到 sqldb。[SQL 助手](http://www.koders.com/csharp/fidD4121D6E4BCA2DAB656D770903FECBFF7427D242.aspx)

# macos - 如何将低级转义序列发送到 OS X 上的打印机？

> ID：11541055
> 
> 赞同：5
> 
> 时间：2012-07-18T12:10:32.163
> 
> 标签：macos, cocoa, printing, low-level, epson

我有一串打印机转义序列 (ESC/P)，需要发送到 Mac OS X 上的打印机（USB 或网络）。我该怎么做？直接使用 CUPS 是最好的方法吗？有没有“更高层次”的方式？

在你问之前：我确实需要发送转义序列并且不能简单地使用高级打印系统。

*编辑*：这些是在其他语言（如 Java）中提供类似功能的一些项目和资源：

*   [http://code.google.com/p/escprinter/](http://code.google.com/p/escprinter/)
*   [http://code.google.com/p/escprinter/source/browse/trunk/net/drayah/matrixprinter/ESCPrinter.java](http://code.google.com/p/escprinter/source/browse/trunk/net/drayah/matrixprinter/ESCPrinter.java)
*   [http://code.google.com/p/jzebra/](http://code.google.com/p/jzebra/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T03:30:15.980

我想最好的方法就是使用 CUPS/lp：

```
echo "ctrl_char" | cat file_to_print - | lp [...flags...] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T16:28:36.367

您可以使用 unix 系统调用在 C 中发送控制字符：

```
char escp_seq[BYTES_FOR_SEQUENCE];

// ...initialize the ESC/P sequence.

int printer_fd = open("/dev/lp0", O_WRONLY);
ssize_t bytes_written = write(printer_fd, escp_seq, sizeof(escp_seq));
close(printer_fd); 
```

至于可打印数据本身，您可以使用[Core Printing](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CorePrintRef/Reference/reference.html)。

使用这个库，您可以使用

```
OSStatus PMPrinterPrintWithProvider (
   PMPrinter printer,
   PMPrintSettings settings,
   PMPageFormat format,
   CFStringRef mimeType,
   CGDataProviderRef provider
); 
```

这将要求您使用您的数据构造一个 CGDataProviderRef。

或者，您可以使用文件：

```
OSStatus PMPrinterPrintWithFile (
   PMPrinter printer,
   PMPrintSettings settings,
   PMPageFormat format,
   CFStringRef mimeType,
   CFURLRef fileURL
); 
```

对于无法给出具体的代码示例，我深表歉意，但我真的不确定您打算如何构建您希望发送到打印机的数据。这至少应该为您开始破解提供了一个基础。我确信上面提供的 Apple 文档中有足够的东西来完成您的任务。

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-05T14:21:32.590

我们正在使用脚本从 Mac bash shell 打印（在专业的自动化终端产品测试仪中）。

非常简化的“Hello”标签打印如下：

```
data="\x1Bia\x00"
data="${data}\x1B@"
data="${data}\x1BX\x32"
data="${data}Hello"
data="${data}\x0C"

# Check your own binary for debugging:
echo -ne $data | hexdump -C

# print the actual label
echo -ne $data | lp -d Brother_PT_P900W 
```

请注意，您必须将打印机名称替换为您自己的打印机名称。

# objective-c - MGTwitterEngine 回复一条推文不起作用

> ID：11541059
> 
> 赞同：1
> 
> 时间：2012-07-18T12:10:46.093
> 
> 标签：objective-c, ios4, twitter, mgtwitterengine, reply

我在用`MGTwitterEngine`

使用此代码回复推文

`[[twitter sendUpdate:text inReplyTo:message_ID] retain];`

但它就像一条普通的推文。不是对任何特定推文的回复。

任何想法。

# javascript - 搜索算法

> ID：11541060
> 
> 赞同：0
> 
> 时间：2012-07-18T12:10:51.120
> 
> 标签：javascript, search

我有一个 JSON，里面有 10k 条记录。每条记录都有一个格式为**'2011-04-29'的****时间戳**。现在我有一个客户端数组（我们称它为我们的**日历**），其数组形式为 -

 ****```
['2011-04-26', '2011-05-02', 'Week 1', '2010 - 11']
... 
```

目标是为每条记录的时间戳分配一个星期数。我可以使用经典的线性搜索来完成此操作，但是由于 10k+ json 记录和日历中接近 300*周*，这很快就会变得乏味。

你会推荐什么？

PS - 我需要日历，因为这里的*周*不是一年中的实际周，而是在其他地方定义的。

如果我将字符串转换为 ，会有更有效的方法`Date.getTime()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:17:56.537

只有 300 周，我的方法是引入一个中间查找对象，将每个可能的时间戳匹配到适当的周。只需使用一个简单的循环即可生成：

```
{
    '2011-04-26': 1,
    '2011-04-27': 1,
    // ...
    '2011-05-02': 1,
    '2011-05-03': 2,
    '2011-05-04': 2,
    // ...
} 
```

这些值只是您`calendar`数组中的索引。

然后，您可以通过在此对象中进行简单查找，将 10K 记录分配给一个日历周。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:25:55.573

只要您的日历记录以某种方式排序，您就可以对其应用[二进制搜索算法](http://en.wikipedia.org/wiki/Binary_search_algorithm)。如果您将日期保存为时间戳而不是字符串，它可能会使比较更快（尽管对于您当前的格式，字符串比较也可以）。

按“周”索引您的日历可能更优雅。就像是

```
{
  "Week 1": ['2011-04-26', '2011-05-02', '2010 - 11'],
  "Week 2": ['2011-05-03', '2011-05-09', '2010 - 12'],
  ...
} 
```

请注意，从您的`calendar`数组创建此查找对象的复杂度为 O(n)，因此如果您只需要搜索一条记录，即使对原始数组进行线性搜索也会更快。

原始数组的示例算法：

```
var calendar = [
  ['2011-04-26', '2011-05-02', 'Week 1', '2010 - 11'],
  ['2011-05-03', '2011-05-09', 'Week 2', '2010 - 12'],
  ...
];
function getRecord(date) {
    var l = 0,
        r = calendar.length-1;
    while (l <= r) {
        var m = ~~(l + (r-l)/2);
        var comp = comparefn(this[m]);
        if (calendar[m][1] < date) // last day of week before date
            l = m+1;
        else if (calendar[m][0] > date) // first day of week after date
            r = m-1;
        else // week found
            return calendar[m];
    }
    // I'm not quite sure what happens when a date lies between two weeks in the calendar
    return null;
} 
```****

# linux - 无法使用 libcurl（为 arm 交叉编译）应用程序发送电子邮件

> ID：11541061
> 
> 赞同：0
> 
> 时间：2012-07-18T12:10:52.030
> 
> 标签：linux, arm, libcurl

我正在将[libcurl](http://curl.haxx.se/)用于运行 linux 的[am-1808](http://www.ti.com/product/am1808) [我需要使用我的 c 程序发送电子邮件]，我已经为 arm 成功编译了 libcurl，并且[示例应用程序](http://curl.haxx.se/libcurl/c/smtp-multi.html)被成功编译，但是当我在 arm-board 上运行这个应用程序时，我得到以下输出。

```
* About to connect() to smtp.gmail.com port 587 (#0)
*   Trying 74.125.127.108... * 0x12008 is at send pipe head!
* Connected to smtp.gmail.com (74.125.127.108) port 587 (#0)
< 220 mx.google.com ESMTP pf8sm6421301pbc.44
> EHLO am180x-evm
< 250-mx.google.com at your service, [115.186.161.64]
< 250-SIZE 35882577
< 250-8BITMIME
< 250-STARTTLS
< 250 ENHANCEDSTATUSCODES
> STARTTLS
< 220 2.0.0 Ready to start TLS
> QUIT 
```

然后它仍然卡在那里，我的电脑上相同程序的输出是，

```
* About to connect() to smtp.gmail.com port 587 (#0)
*   Trying 74.125.127.108...
* Connected to smtp.gmail.com (74.125.127.108) port 587 (#0)
* Connected to smtp.gmail.com (74.125.127.108) port 587 (#0)
< 220 mx.google.com ESMTP ns5sm15912240pbb.26
> EHLO ubuntu
< 250-mx.google.com at your service, [115.186.161.64]
< 250-SIZE 35882577
< 250-8BITMIME
< 250-STARTTLS
< 250 ENHANCEDSTATUSCODES
> STARTTLS
< 220 2.0.0 Ready to start TLS
* successfully set certificate verify locations:
*   CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: none
* SSL connection using ECDHE-RSA-RC4-SHA
* Server certificate:
*    subject: C=US; ST=California; L=Mountain View; O=Google Inc; CN=smtp.gmail.com
*    start date: 2011-11-18 01:57:17 GMT
*    expire date: 2012-11-18 02:07:17 GMT
*    issuer: C=US; O=Google Inc; CN=Google Internet Authority
*    SSL certificate verify ok.
> EHLO ubuntu
< 250-mx.google.com at your service, [115.186.161.64]
< 250-SIZE 35882577
< 250-8BITMIME
< 250-AUTH LOGIN PLAIN XOAUTH
< 250 ENHANCEDSTATUSCODES
> AUTH LOGIN dXNhbWF5YXNlZW45MEBnbWFpbC5jb20=
< 334 UGFzc3dvcmQ6
> dXNhenJwMjY=
< 235 2.7.0 Accepted
> MAIL FROM:<my_email@gmail.com>
< 250 2.1.0 OK ns5sm15912240pbb.26
> RCPT TO:<my_email@yahoo.com>
< 250 2.1.5 OK ns5sm15912240pbb.26
> DATA
< 354  Go ahead ns5sm15912240pbb.26
< 250 2.0.0 OK 1342605604 ns5sm15912240pbb.26
* Connection #0 to host smtp.gmail.com left intact
> QUIT
< 221 2.0.0 closing connection ns5sm15912240pbb.26
* Closing connection #0 
```

证书有一些问题，我尝试在配置 lib-curl 时设置 ca-bundle，但没有帮助。这是我配置 libcurl 的命令。

```
./configure --host=arm-none-linux-gnueabi --build=i686-linux CFLAGS='-Os' --with-ca-bundle=/etc/ssl/certs/ca-certificates.crt --with-ssl=/usr/bin/openssl --enable-smtp 
```

知道如何解决这个问题吗？

问候

乌萨马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:40:17.173

[lib-curl](http://curl.haxx.se/libcurl/)需要[openssl](http://curl.haxx.se/libcurl/)来启用 https、ssl 等，现在我在我的系统上安装了 openssl，但它是为 x64 处理器编译的，所以我为 arm 交叉编译了 open-ssl，然后我再次交叉编译了 lib-curl arm，现在[示例应用程序](http://curl.haxx.se/libcurl/c/smtp-multi.html)工作正常并发送电子邮件。

open-ssl 的配置参数是：

```
./config os/compiler:arm-none-linux-gnueabi-gcc 
```

lib-curl 的配置参数为：

```
./configure --host=arm-none-linux-gnueabi --build=i686-linux CFLAGS='-Os' --enable-smtp --with-ssl 
```

如果您仍然收到证书错误，请将其添加到配置参数中。

```
--with-ca-bundle=/etc/ssl/certs/ca-certificates.crt 
```

**PS：在 arm 上运行应用程序之前，不要忘记将 include 和 lib 文件从您的 pc 复制到 arm。**

# php - 如果超过 512 字节，TextArea 不会保存到 mySQL

> ID：11541063
> 
> 赞同：0
> 
> 时间：2012-07-18T12:11:10.260
> 
> 标签：php, mysql, forms, textarea, html-entities

我一直在寻找年龄，找不到这个精确的问题，但如果有的话，请随时为我指出正确的方向。

简单描述：有一个页面上有一个 TEXTAREA。此 TEXTAREA 接受 HTML，因为它用于编辑客户网站的主页。

目的是让这个 TEXTAREA 保存到一个非常简单的 mySQL 表中。

问题：问题是如果 TEXTAREA 超过 512 个字符，则不会将**任何**内容保存到数据库字段中。在此之下，它可以很好地存储它。

这是代码：

```
$homeTopLeft = addslashes(htmlentities($_GET['homeTopLeft'], ENT_QUOTES | ENT_IGNORE, "UTF-8"));
$homeNews    = addslashes(htmlentities($_GET['homeNews'], ENT_QUOTES | ENT_IGNORE, "UTF-8"));

mysql_login();

$query = "UPDATE cmsData SET homeTopLeft='$homeTopLeft', homeNews='$homeNews', lastUpdated=NOW() WHERE entry=1";
$result = mysql_query($query) or die(reportError('Unable to save new CMS data'));
if (mysql_affected_rows() > 0) {
    echo '<p class="ok">Pages Successfully Updated!</p>';
    echo '<p style="border:1px dashed #ccc;">homeTopLeft = ' . $homeTopLeft . '</p>';
} else {
    echo '<p class="err">Unable to update the home page</p>';
} 
```

我目前有 $_GET 方法，因为我实际上是通过 AJAX 调用该函数，它在 512 个字符下工作正常。

**它不是什么** - 它不是 mySQL 字段大小：它的数据类型是 TEXT，我已经通过 phpMyAdmin 手动增加了该字段而没有错误。- 它不是（据我所知）AJAX 调用，因为它在 TEXTAREA < 512 字节时有效 - 排序规则（我不认为：我已将其设置为`latin1_general_ci`并尝试过`latin1_bin`一些 UFT 的）

**最后说明**由于调用 ，该字段的实际数据库大小`homeTopLeft`必须大于 512 字节。`htmlentities`

我还应该补充一点，无论我是使用纯文本编辑器`TEXTAREA`还是`tinyMCE`富文本编辑器，都会发生这种情况。

您能提供的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:14:21.737

GET 请求有大小限制。对于诸如此类的大事，请使用 POST

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:14:46.553

如果您在 ajax 中使用 GET 方法，则无法将这么多数据传递给服务器，请将其更改为 POST，一切都会正常工作。

在这里你可以找到一个简短的概述：http: [//www.boutell.com/newfaq/misc/urllength.html](http://www.boutell.com/newfaq/misc/urllength.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:28:48.117

在 addlashes(htmlentities()) 上使用 mysql_real_escape_string。htmlentities 通常不应进入数据库。除此之外，您的数据库应使用 UTF8 作为表字符集，因此如果您使用外语字符，排序等将是正确的。

如果相应字段接受，则文本没有已知问题，即大于 512 字节（！）。

# struts2 - Struts2 令牌拦截器重定向

> ID：11541064
> 
> 赞同：1
> 
> 时间：2012-07-18T12:11:13.760
> 
> 标签：struts2, token

我正在使用 sturts2 令牌拦截器来停止多次提交，但问题是当触发两个请求时。我只得到第二个请求的响应，这是无效令牌错误我如何才能获得第一个请求的响应，即成功页面。例如。如果我触发第二个请求，我应该得到错误消息，而不是我想根据第一个请求重定向到成功页面。

# ms-access - JdbcOdbc 驱动程序在 MS Access 中找不到替换功能

> ID：11541066
> 
> 赞同：1
> 
> 时间：2012-07-18T12:11:16.857
> 
> 标签：ms-access

好人，

我正在尝试通过我的 Java 程序对 MS Access 数据库执行 SQL 查询。该程序使用 JdbcOdbc 驱动程序。查询中包含内置的 Replace 函数。它看起来像这样：

```
SELECT Replace(first_name, '-', ' ') AS f_name FROM patient WHERE.... 
```

程序失败并出现以下错误：“[Microsoft][ODBC Microsoft Access Driver] 表达式中未定义函数 'Replace'。”

怎么会这样？其他功能，如 LCase 和 Trim 工作得很好。此外，直接在后端执行时，替换功能也可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:43:14.830

`Replace()`除非从 Access 会话中运行，否则您的查询不能使用该函数。

这种情况就像您尝试使用用户定义的函数一样。db 引擎只能在 Access 表达式服务的帮助下使用那些，该服务只能在 Access 会话中使用。

# visual-studio-2010 - OpenCV hello world 程序的 Visual-C++ 中未处理的异常

> ID：11541070
> 
> 赞同：1
> 
> 时间：2012-07-18T12:11:25.983
> 
> 标签：visual-studio-2010, opencv

我最近在 Visual Studio 2010 中设置了 openCV 2.3.1。我使用 cmake 设置它并设法运行简单的“hello world”代码，如下所示：

```
 #include "stdafx.h"

            #include <opencv2/opencv.hpp>
            #include <cxcore.h>
            #include <highgui.h>

            int _tmain(int argc, _TCHAR* argv[])
            {
                 IplImage *img = cvLoadImage("funny-pictures-cat-goes-pew.jpg");
                 cvNamedWindow("Image:",1);
                 cvShowImage("Image:",img);

                 cvWaitKey();
                 cvDestroyWindow("Image:");
                 cvReleaseImage(&img);

                 return 0;
             } 
```

这段代码第一次能够运行，尽管它显示的是灰色图像而不是猫。当我试图查看错误时，它开始出现以下错误；**Unhandled Exception** at a certain memory location...:![enter image description here][1](can't upload image because of low credit points.但我希望你理解我的问题描述...

问候， 鲁扎尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:35:47.463

您能否重新检查 *img 是否正确填写？

我刚刚对此进行了测试，唯一的改变是我的图像路径是绝对的（`IplImage *img = cvLoadImage("D:\\Development\\TestProjects\\OpenCVTest\\funny-pictures-cat-goes-pew.jpg");`），除此之外它是相同的。它在这里在我的系统上运行良好。

使用 OpenCV 2.4.2，图片来自 [http://i288.photobucket.com/albums/ll169/critterclaw101/funny/funny-pictures-cat-goes-pew.jpg](http://i288.photobucket.com/albums/ll169/critterclaw101/funny/funny-pictures-cat-goes-pew.jpg)

编辑：使用错误设置的路径进行测试时，我得到一个灰色图像，因此我确信您的代码找不到该图像。

# macos - 如何使用 NSTextField 正确设置 NSTableCellView 的高度？

> ID：11541072
> 
> 赞同：1
> 
> 时间：2012-07-18T12:11:29.743
> 
> 标签：macos, cocoa, nstableview, nstablecolumn

问候！

我有一个基于视图的 NSTableView，其中自定义视图作为单元格（NSTableCellView 类）。自定义单元格中有 NSTextField 。

我需要在 NSTextField 内显示 3 行文本，单击单元格内容后必须长大以适合全文。所以，换句话说，我需要通过单击来增加 NSTextField 的高度和 NSCTableCellView 的高度。

算法是：

1.  处理点击 NSTableCellView
2.  计算 NSTextField 和 NSTableCellView 的新尺寸
3.  通过 IBOutlet 将帧大小设置为 NSTextField
4.  在类中存储新的 NSTableCellView 高度值并通过通知中心调用函数“RowHeightChanged”
5.  从类值设置新的行高

这是一个代码片段：（我删除了一些无用的东西）

TickCellTableView：

```
 @implementation TickCellTableView

    // Other Constants
    @synthesize textFieldInitHeight = _textFieldInitHeight;
    @synthesize rowHeight           = _rowHeight;
    @synthesize rowIndex            = _rowIndex;

    - (void)mouseDown:(NSEvent *)theEvent {

        if (![self.superview isKindOfClass:[NSTableCellView class]])
            [super mouseDown:theEvent];

        CGFloat TextFieldFitHeight = [self getHeightForStringDrawing: self.textField.stringValue
                                                          withFont:[self.textField font]
                                                      forTextWidth:[self.textField frame].size.width + 10.0];

        if ([self.textField frame].size.height < TextFieldFitHeight)
        {
            NSSize size = [self.textField frame].size;
            size.height = TextFieldFitHeight;

            [self.textField setFrameSize:size];        

            self.rowHeight = [self frame].size.height + (TextFieldFitHeight - _textFieldInitHeight);

            [[NSNotificationCenter defaultCenter] postNotificationName:@"RowHeightChanged"

                                                                   object:self.rowIndex];
            }
        }
@end 
```

NSTableView 委托：

```
@implementation DisplayTicksView

- (void)awakeFromNib
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(RowHeightChanged:)
                                                 name: @"RowHeightChanged"
                                               object:nil];    
 }

-(void)RowHeightChanged:(NSNotification *)notification
{        
    NSIndexSet *indexSet = [NSIndexSet indexSetWithIndex:[notification.object integerValue]];

    [tableView noteHeightOfRowsWithIndexesChanged:indexSet];
}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView
{
    return [ticksArray count];
}

@end 
```

问题是当我单击 NSTextField 时，它的框架只增长一秒钟并返回到初始大小，然后开始动画以设置单元格的属性高度。结果 - 单元格高度上升，但 NSTextField 没有。我试图禁用动画 - 没有结果。我该如何解决？

道歉我的英语:)

# wordpress - 如何使 wordpress 侧边栏有条件？

> ID：11541074
> 
> 赞同：0
> 
> 时间：2012-07-18T12:11:42.317
> 
> 标签：wordpress, conditional, categories, sidebar

我正在开发一个使用 Themeforest 中的 Reason 主题的 Wordpress 网站。我已经能够解决除了两个问题之外的所有问题，其中一个是这个问题的基础。

该主题带有一个侧边栏，但我想禁用它，除非用户位于两个类别页面之一或这两个类别之一的帖子上。

以下是 page.php 中调用侧边栏的代码：

```
<div class="four columns sidebar">          
    <?php dynamic_sidebar( 'default-widget-area' ); ?>  
</div> 
```

任何帮助将非常感激...

谢谢！

辛西娅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:21:37.663

您有一些功能可以帮助您：

1.  [in_category()](http://codex.wordpress.org/Function_Reference/in_category)应该在用户在该类别的帖子上时使用（single.php）
2.  [is_category()](http://codex.wordpress.org/Function_Reference/is_category)应在用户位于类别页面时使用（category.php）

来自[WordPress Codex](http://codex.wordpress.org/Conditional_Tags)，

```
in_category( array( 1,2,3 ) ) 
    Returns true if the current post is in either category 1, 2, or 3. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T13:48:31.007

结帐 WooSidebars - [http://wordpress.org/plugins/woosidebars/](http://wordpress.org/plugins/woosidebars/)

这是一个很棒的插件，具有适合您用例的各种逻辑。您可以在页面、页面模板等的侧边栏中创建多个小部件区域。

# c# - 如何使用 C# 查找行中每个元素的数量并将每行的平均值存储在另一个数组中？

> ID：11541076
> 
> 赞同：0
> 
> 时间：2012-07-18T12:11:47.630
> 
> 标签：c#, arrays, rows, textinput, datainputstream

我正在使用下面的代码逐行从文本文件中读取数据。我想将每一行分配到一个数组中。我必须能够找到数量或行/数组以及每个元素的数量。

我还想对部分或全部行进行一些操作并返回它们的值。

我得到了行数，但是有没有办法循环类似：

```
 *for ( i=1 to number of rows)
    do
    mean[i]<-row[i]
    done
    return mean*

var data = System.IO.File.ReadAllText("Data.txt");

var arrays = new List<float[]>();

var lines = data.Split(new[] {'\r', '\n'}, StringSplitOptions.RemoveEmptyEntries);

foreach (var line in lines)
{
    var lineArray = new List<float>();

    foreach (var s in line.Split(new[] {','}, StringSplitOptions.RemoveEmptyEntries))
    {
        lineArray.Add(Convert.ToSingle(s));
    }
    arrays.Add(lineArray.ToArray());

}

var numberOfRows = lines.Count();
var numberOfValues = arrays.Sum(s => s.Length); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:17:33.780

```
var arrays = new List<float[]>();
//....your filling the arrays
var averages = arrays.Select(floats => floats.Average()).ToArray(); //float[]
var counts = arrays.Select(floats => floats.Count()).ToArray(); //int[] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:17:34.123

不确定我是否理解了这个问题。你的意思是像

```
foreach (string line in File.ReadAllLines("fileName.txt")
{
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:25:10.770

你可以用`Linq`吗？您可能需要`using System.Linq;`在顶部添加。

```
float floatTester = 0;
List<float[]> result = File.ReadLines(@"Data.txt")
        .Where(l => !string.IsNullOrWhiteSpace(l))
        .Select(l => new {Line = l, Fields = l.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries) })
        .Select(x => x.Fields
                      .Where(f => Single.TryParse(f, out floatTester))
                      .Select(f => floatTester).ToArray())
        .ToList();

// now get your totals
int numberOfLinesWithData = result.Count;
int numberOfAllFloats = result.Sum(fa => fa.Length); 
```

解释：

1.  `File.ReadLines`读取文件的行（不是一次全部，而是 straming）
2.  `Where`仅返回给定谓词为真的元素（该行必须包含多于空文本）
3.  `new {`创建具有给定属性的匿名类型（以逗号分隔的字段）
4.  然后我尝试解析每个字段以浮动
5.  所有可以解析的都将添加到`float[]`with`ToArray()`
6.  所有一起将被添加到一个`List<float[]>`with`ToList()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:00:06.187

找到了一种有效的方法来做到这一点。谢谢大家的投入！

```
private void ReadFile()
    {
        var lines = File.ReadLines("Data.csv");
        var numbers = new List<List<double>>();
        var separators = new[] { ',', ' ' };
        /*System.Threading.Tasks.*/
        Parallel.ForEach(lines, line =>
        {
            var list = new List<double>();
            foreach (var s in line.Split(separators, StringSplitOptions.RemoveEmptyEntries))
            {
                double i;

                if (double.TryParse(s, out i))
                {
                    list.Add(i);
                }
            }

            lock (numbers)
            {
                numbers.Add(list);
            }
        });

        var rowTotal = new double[numbers.Count];
        var rowMean = new double[numbers.Count];
        var totalInRow = new int[numbers.Count()];

        for (var row = 0; row < numbers.Count; row++)
        {
            var values = numbers[row].ToArray();

            rowTotal[row] = values.Sum();
            rowMean[row] = rowTotal[row] / values.Length;
            totalInRow[row] += values.Length;
        } 
```

# c# - 类作为具有反射 C# 的另一个类的属性

> ID：11541078
> 
> 赞同：2
> 
> 时间：2012-07-18T12:11:49.910
> 
> 标签：c#, .net, reflection, properties

请参阅下面的代码，有人可以帮助我....

```
public class person
{ 
  Public string name  { get; set; };  
  Public personDetails Pdetails { get; };
}

public class personDetails
{
  Public bool hasChild  { get; set; }
  Public string ChildName  { get; set; }
}

static void Main(string[] args)
{
    Type type = asm.GetType(person);

    object classInstance = Activator.CreateInstance(type); 

    PropertyInfo prop = type.GetProperty("Pdetails ", BindingFlags.Public | BindingFlags.Instance);

    if (null != prop && prop.CanWrite)
    {
        prop.SetValue(classInstance, null , null);
    }
} 
```

找不到属性的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:15:06.920

类成员是`private`默认的。使您的属性`public`，它应该工作。此外，删除属性字符串上的多余空格：`"Pdetails"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T12:15:13.307

您的属性名称中有一个额外的空格字符。`"Pdetails "`不一样`"Pdetails"`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T12:15:18.977

财产`Pdetails`不是`public`，所以你`BindingFlags`应该是

```
BindingFlags.NonPublic | BindingFlags.Instance 
```

另外，请参阅 Joel Etherton 的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:31:48.220

```
Type type = asm.GetType("person"); 
```

您只能将字符串格式的对象类型传递给 asm.GetType 函数。另一个是你在哪里声明了 asm 对象。如果你没有，那么先定义它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T08:06:28.263

```
static object GetPropertyValue(object obj, string propertyName)
        {
            var objType = obj.GetType();
            var prop = objType.GetProperty(propertyName);

            return prop.GetValue(obj, null);
        }
        static void SetPropertyValue(object obj, string propertyName, int values)
        {
            var objType = obj.GetType();
            var prop = objType.GetProperty(propertyName);
            prop.SetValue(obj, values, null);
        } 
```

感谢您的支持，我已经使用上层代码解决了我的问题。

# .net - 数组列表是否有默认排序？

> ID：11541081
> 
> 赞同：0
> 
> 时间：2012-07-18T12:11:53.913
> 
> 标签：.net, .net-4.0, asna-visual-rpg

我有一个 WCF 服务来返回客户数据。通过添加对象的新实例来创建数组列表。代码如下所示：

```
objCust.CUSTNUM  = CustomerByNumber_CST#9A
objCust.CUSTNAME = CustomerByNumber_NAME9A
objCust.CUSTADR1 = CustomerByNumber_ADR19A
objCust.CUSTADR2 = CustomerByNumber_ADR29A
objCust.CUSTCITY = CustomerByNumber_CITY9A
objCust.CUSTSTAT = CustomerByNumber_STAT9A
objCust.CUSTZIP  = CustomerByNumber_ZIPC9A
objCust.CUSTPHON = CustomerByNumber_PHON9A

aryList.Add(objCust) 
```

然后我将数组列表作为数组返回 - aryList.ToArray(...

当我调用该服务时，数组元素按字母顺序返回 - 这是输出：

```
<b:CUSTADR1>3910 LAKEFIELD DR</b:CUSTADR1>
<b:CUSTADR2>JOHNS CREEK FACILITY</b:CUSTADR2>
<b:CUSTCITY>SUWANEE</b:CUSTCITY>
<b:CUSTNAME>JOHNSON CONTROLS</b:CUSTNAME>
<b:CUSTNUM>1688</b:CUSTNUM>
<b:CUSTPHON>770-495-9950</b:CUSTPHON>
<b:CUSTSTAT>GA</b:CUSTSTAT>
<b:CUSTZIP>30024</b:CUSTZIP> 
```

我没有做任何排序。为什么这样排序？我希望它按照我添加它们的顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:55:59.880

WCF 数据协定序列化程序对**对象**`DataMemberAttribute`属性进行排序，除非您在声明中提供特定的顺序数值。它与数组无关，即使您返回单个对象也会发生。

# c - 为什么我会收到关于初始化程序不是常量的错误？

> ID：11541088
> 
> 赞同：10
> 
> 时间：2012-07-18T12:12:06.507
> 
> 标签：c, constants, initializer

我正在使用以下代码。

```
const int X_ORIGIN = 1233086;             
const int Y_ORIGIN = -4728071;              
const int Z_ORIGIN = 4085704;
const int xyzOrigin[NUM_DIMENSIONS] = {X_ORIGIN, Y_ORIGIN, Z_ORIGIN}; 
```

当我编译它时，GCC 给了我以下错误。

> Transformations.h:16:1：错误：初始化元素不是常量

这意味着什么？如何修复我的代码？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-18T13:24:40.070

通常人们会被关键字的命名误导`const`，暗示一些不能改变的常数值。至少在 C 中，它意味着**readonly**。`const`文件范围内的合格对象没有适当的常量来充当数组初始值设定项。

作为非常量 constness 的一个例子，声明是完全可以的

```
 const volatile unsigned int milliseconds_since_boot; 
```

是一个从编译器控制之外更新的值（想想硬件寄存器），你不能分配给它，即它是只读的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-18T12:16:52.207

您不能在 C 中的全局范围内执行此操作，只能在本地范围内执行此操作，即在函数内：

```
#define NUM_DIMENSIONS 3

const int X_ORIGIN = 1233086;             
const int Y_ORIGIN = -4728071;              
const int Z_ORIGIN = 4085704;

const int xyzOrigin[NUM_DIMENSIONS] = {X_ORIGIN, Y_ORIGIN, Z_ORIGIN}; // FAIL

void foo(void)
{
    const int xyzOrigin[NUM_DIMENSIONS] = {X_ORIGIN, Y_ORIGIN, Z_ORIGIN}; // OK
} 
```

或者，您可以将代码编译为 C++ 而不是 C。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-18T12:17:59.127

我不是一个合适的程序员；）但我会这样做：

```
#define X_ORIGIN (1233086)
#define Y_ORIGIN (-4728071)
#define Z_ORIGIN (4085704)
const int xyzOrigin[NUM_DIMENSIONS] = {X_ORIGIN, Y_ORIGIN, Z_ORIGIN}; 
```

这样，它只是一个文本替换。如果编译器仍然吐出假人，至少你离知道问题出在哪里更近了一步。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-18T12:27:00.147

作为替代方案，这也适用于这种情况：

```
enum { X_ORIGIN = 1233086,
       Y_ORIGIN = -4728071,
       Z_ORIGIN = 4085704 };

const int xyzOrigin[] = { X_ORIGIN, Y_ORIGIN, Z_ORIGIN };

int main()
{
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-18T13:11:56.763

*在 C 语言中，具有静态存储持续时间的对象必须使用常量表达式或包含常量表达式的聚合初始值设定项进行初始化。[——AndreyT的](https://stackoverflow.com/a/3025106/1530410)回答*

看完之后，你一定知道`NUM_DIMENSIONS`，如果它有`const`-资格，那不是一个常数！然后你不能以这种方式初始化你的数组。

使用此代码：

`const int xyzOrigin[NUM_DIMENSIONS] = {X_ORIGIN, Y_ORIGIN, Z_ORIGIN};`

你应该使用：`#define NUM_DIMENSIONS 3`或者你可以在方括号内声明没有任何变量`const int xyzOrigin[] = {X_ORIGIN, Y_ORIGIN, Z_ORIGIN};`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T12:19:54.213

正如三氯生所说：

```
main()
{
    const int X_ORIGIN = 1233086;
    const int Y_ORIGIN = -4728071;
    const int Z_ORIGIN = 4085704;
    const int xyzOrigin[] = {X_ORIGIN, Y_ORIGIN, Z_ORIGIN};
} 
```

这工作正常...

或者，如果您事先知道尺寸，则：

```
#define DIM 3

main()
{
    const int X_ORIGIN = 1233086;
    const int Y_ORIGIN = -4728071;
    const int Z_ORIGIN = 4085704;
    const int xyzOrigin[DIM] = {X_ORIGIN, Y_ORIGIN, Z_ORIGIN};
} 
```

# java - Keystore 的密码管理

> ID：11541097
> 
> 赞同：0
> 
> 时间：2012-07-18T12:12:42.160
> 
> 标签：java, security, ssl, jsse

`load()`使用该方法创建后初始化密钥库（无论它是用于“密钥库”还是“信任库”） 。一个版本需要一个`InputStream`对应于密钥库文件的文件，以及解密文件的密码。以编程方式向该方法提供密码对我来说似乎很奇怪。

例如，服务器使用密钥库来存储其私钥和相关证书。密钥库中存在的信息是明智的，因此受密码保护。`load()`以编程方式将密码传递给方法有什么问题？最佳做法是什么？

另一个例子，但现在涉及信任库。客户端有一个信任库，用于存储受信任 CA 的证书。据我了解，信任库不包含服务器的证书，而只包含允许验证服务器证书的 CA 的证书。我看到的一个信任库示例是 JRE 中的一个（在`security`文件夹 -中`cacerts`）。通过查看配置，我可以看到它受默认密码保护`changeit`。我知道信任库是使用密钥库实现的，因此它（或者可能是可选的？）使用密码进行加密。但是，由于信任库通常将公共信息（受信任的 CA 的证书）存储在文件中，为什么建议更改密码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:58:55.740

> 以编程方式向该方法提供密码对我来说似乎很奇怪。

我不知道为什么这会很奇怪。应用程序需要能够在某一时刻获取密钥库的内容。密码需要以某种方式传递给它。将它传递给该`load()`方法并不比其他解决方案更有意义（当然要避免硬编码）。或者，您可以改用使用回调的方法。如果您认为这不合适，您可以使用 PKCS#11 提供程序和硬件令牌（尽管您仍然需要在某处输入密码/PIN）或使用 Apple KeychainStore 之类的东西（其中密码不是使用，但操作系统钥匙串服务负责）。

关于信任库，实际上有两个密码在使用。当使用 JKS 格式时，它们可能不同。一种保护密钥库本身，另一种保护对私有条目的访问（`getKey`）。在这种情况下，密钥库密码用于防止未经授权的各方更改信任库（并添加他们自己的 CA 或服务器证书）。

# windows-phone-7 - 超链接按钮网站

> ID：11541099
> 
> 赞同：0
> 
> 时间：2012-07-18T12:12:56.443
> 
> 标签：windows-phone-7, xaml

我需要放置按钮，点击后将用户移动到网站。有人能告诉我应该在 vb 和 xaml 中添加什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:21:43.280

```
<HyperlinkButton Content="Click here to learn about Silverlight" NavigateUri="http://www.silverlight.net" TargetName="_blank" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:17:40.833

您也可以在 C# 中执行此操作

```
private void HyperlinkButton_Click(object sender, System.Windows.RoutedEventArgs e)
        {
            var task = new Microsoft.Phone.Tasks.WebBrowserTask
            {
                URL = "http://siteaddress.com",

            };

            task.Show();
        } 
```

# entity - 另一个实体的显示规则的值规则中的 crm 2011 字段

> ID：11541100
> 
> 赞同：0
> 
> 时间：2012-07-18T12:13:05.710
> 
> 标签：entity, hide, dynamics-crm-2011, ribbon

我可以从另一个实体设置一些 DisplayRule 的 valueRule 字段吗？

假设我在帐户实体中，如果用户具有在 systemUser 实体中设置的一些自定义权限，我想显示一些按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:43:06.093

好吧，您最好使用角色并查看用户是否具有该角色。

# c++ - QTcpSocket重连方式

> ID：11541103
> 
> 赞同：1
> 
> 时间：2012-07-18T12:13:12.107
> 
> 标签：c++, qt, sockets, networking

我使用 QTcpSocket 从服务器获取信息。

在我这边，有必要连接并等待来自服务器的字节，然后获取它们。

我创建 QTcpSocket。将其连接到主机。开始获取数据，没关系。但是，例如，当我拔出以太网电缆时，与套接字对象没有区别。

我尝试连接诸如 QAbstractSocket::error() 和 QAbstractSocket::stateChange() 之类的信号，但在断开连接时没有任何信号给我任何信息。

我的任务是等待几秒钟并尝试重新连接，直到我再次获得连接。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:05:24.827

我在编写客户端和服务器项目时遇到了同样的问题。

我使用了 SIGNAL -> disconnected() ，它在客户端断开连接时立即发出。

连接（客户端，信号（断开连接（）），这个，插槽（断开连接消息（）））；

请尝试使用它。

# ruby-on-rails - handle_asynchronously :xxx 导致“没有路由匹配 [GET]”，在“nil:NilClass 的未定义方法 `each'”中重新加载后

> ID：11541111
> 
> 赞同：0
> 
> 时间：2012-07-18T12:13:45.837
> 
> 标签：ruby-on-rails, ruby, delayed-job

在观看[RailsCast 关于 delay_job](http://railscasts.com/episodes/171-delayed-job-revised)之后，我想像这样使用 handle_asynchronously 助手：

```
class EmailsController < ApplicationController
  handle_asynchronously :import_from_accounts
end 
```

然后，当我转到我的页面并点击重新加载时，我收到以下错误：

```
Routing Error
No route matches [GET] "/de/emails" 
```

再次重新加载后（不更改任何代码），我收到另一个错误（重新加载后继续显示此错误）：

```
NoMethodError in Emails#index

Showing /Users/josh/Documents/Work/Sientia/iq/app/views/shared/iqlist/init.html.haml where line #7 raised:

undefined method `each' for nil:NilClass
Extracted source (around line #7):

4:       %tr
5:         %th.icon
6:           = check_box_tag "iqlist_delete_all", "iqlist_delete_all", false, :id => "iqlist_delete_all"
7:         -fields.each do |field|
8:           -field_name = (field.is_a? String )? field : field[:name]
9:           %th
10:             -sort_name=(field_name.split('.').count()>1)? "#{field_name.split('.')[0].pluralize}.#{field_name.split('.')[1]}" : field_name 
```

当我将参数更改`handle_asynchronously`为其他任何内容时，同样会再次发生，首先是 GET 错误，然后是 undefined-method-error。

我不太确定第二个错误是什么意思，这不是我的代码。但是我觉得很奇怪，错误从第一次重新加载到第二次重新加载。这可能是什么？`delayed_job`到目前为止工作得很好，所以我怀疑这与`handle_asynchronously`方法有关......

知道问题是什么吗？感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:17:06.120

我会尝试先解决第一个问题。要查看您的路线是什么：

```
rake routes 
```

我希望发生第二个错误，因为第一个错误不返回任何内容。

# android - (Unit)ArrayAdapter的测试

> ID：11541114
> 
> 赞同：23
> 
> 时间：2012-07-18T12:13:54.790
> 
> 标签：android, unit-testing, android-arrayadapter

我在我的应用程序中广泛使用了[`ArrayAdapter`](http://developer.android.com/reference/android/widget/ArrayAdapter.html)，因为大多数活动都持有 a[`ListView`](http://developer.android.com/guide/topics/ui/layout/listview.html)并且我需要一些自定义的东西。

我查看了 android 开发人员文档中的测试类，但找不到一些示例或适当的测试类...

`ArrayAdapter`1）在Android中是否有（单元）测试的最佳实践？

2）我是否选择了错误的方法（使用适配器）并以这种方式杀死了可测试性？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-05T19:43:25.167

您可以编写扩展测试`AndroidTestCase`它看起来像这样：

```
public class ContactsAdapterTest extends AndroidTestCase {
    private ContactsAdapter mAdapter;

    private Contact mJohn;
    private Contact mJane;

    public ContactsAdapterTest() {
        super();
    }

    protected void setUp() throws Exception {
        super.setUp();
        ArrayList<Contact> data = new ArrayList<Contact>();

        mJohn = new Contact("John", "+34123456789", "uri");
        mJane = new Contact("Jane", "+34111222333", "uri");
        data.add(mJohn);
        data.add(mJane);
        mAdapter = new ContactsAdapter(getContext(), data);
    }

    public void testGetItem() {
        assertEquals("John was expected.", mJohn.getName(),
                ((Contact) mAdapter.getItem(0)).getName());
    }

    public void testGetItemId() {
        assertEquals("Wrong ID.", 0, mAdapter.getItemId(0));
    }

    public void testGetCount() {
        assertEquals("Contacts amount incorrect.", 2, mAdapter.getCount());
    }

    // I have 3 views on my adapter, name, number and photo
    public void testGetView() {
        View view = mAdapter.getView(0, null, null);

        TextView name = (TextView) view
                .findViewById(R.id.text_contact_name);

        TextView number = (TextView) view
                .findViewById(R.id.text_contact_number);

        ImageView photo = (ImageView) view
                .findViewById(R.id.image_contact_photo);

        //On this part you will have to test it with your own views/data
        assertNotNull("View is null. ", view);
        assertNotNull("Name TextView is null. ", name);
        assertNotNull("Number TextView is null. ", number);
        assertNotNull("Photo ImageView is null. ", photo);

        assertEquals("Names doesn't match.", mJohn.getName(), name.getText());
        assertEquals("Numbers doesn't match.", mJohn.getNumber(),
                number.getText());
    }
} 
```

可能您将不得不`getView`使用不同的参数进行多次测试，以测试所有场景。

# android - 如何通过 android 应用将视频上传到 vimeo？

> ID：11541116
> 
> 赞同：5
> 
> 时间：2012-07-18T12:14:03.323
> 
> 标签：android, vimeo

我是安卓新手。我正在做一个应用程序，我想在我的应用程序中使用 Vimeo API 将视频上传到 Vimeo。我尝试使用谷歌搜索，但找不到任何好的解释。在 Vimeo 开发者链接中，他们只提供了一些方法名称和参数，没有示例。

任何人都可以指导我学习一个好的教程或建议我一些示例代码来处理。我也找不到任何适用于 android 的 Vimeo 库。请推荐一些与 Android 兼容的库。在这种情况下，任何帮助都是可观的。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:15:02.227

只需查看下面的链接并按照 [https://developer.vimeo.com/apis/advanced/upload中的步骤操作](https://developer.vimeo.com/apis/advanced/upload)

[1] [HTTP PUT 在 Java 中上传文件](https://stackoverflow.com/questions/9773705/http-put-to-upload-a-file-in-java)

[2] [http://pastebin.com/79iSxzmR](http://pastebin.com/79iSxzmR)

[注意：- 我在https://github.com/fernandezpablo85/scribe-java](https://github.com/fernandezpablo85/scribe-java)使用了 scribe 库，它提供了上述链接 [1] 和 [2] 中使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-19T07:23:04.973

要将视频上传到 vimeo，需要有一个经过身份验证的访问令牌。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T12:47:45.063

请访问[http://developer.vimeo.com/apis/simple](http://developer.vimeo.com/apis/simple)并探索那里可用的 API，让您的任务变得轻松

# sql-server - Service Broker——如何发送带有收集到的数据的表？XML 消息与否？

> ID：11541117
> 
> 赞同：0
> 
> 时间：2012-07-18T12:14:04.573
> 
> 标签：sql-server, service-broker

一台技术机器使用 SQL Server Express 来收集温度等数据......数据库每隔几秒钟更新一次（即低流量）。机器及其 SQL Server 必须在任何事情上独立工作。有时，技术计算机（即 SQL Server）与机器一起关闭。

中央 SQL Server 标准版应该像上面那样从多台机器上收集数据。

你会推荐什么场景？

*   机器在创建表时发送每个新行（即每隔几秒发送一行）。
*   机器启动发送数据的过程，比如每小时发送一次，并发送所有包含新收集数据的行。
*   还有其他方法吗？

如果我很好地理解了 Service Broker 的想法，就会有请求消息类型的单一名称、回复消息类型的单一名称、合同的单一名称。SQL 机器上的相关数据库各有一个消息队列，以及相关的服务。

我对 Service Broker 很陌生。教程示例展示了如何将消息作为 XML 片段发送。这是发送表格行的真实世界方式吗？如何可靠地将`SELECT`命令的结果转换为 XML 片段并返回？

谢谢，彼得

**注意：**相关问题[Service Broker — 如何从 XML 消息中提取行？](https://stackoverflow.com/questions/11563452/service-broker-how-to-extract-the-rows-from-the-xml-message)被创建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:53:06.380

我还建议在更新数据库时发送，每行插入一条消息（每条语句一条消息，来自 JAnis 建议的触发器，如果​​您的 INSERT 语句没有在单个语句中插入大量行，则也可以正常工作）。

发送许多小消息而不是发送一条大消息更好的原因是，在 RECEIVE 上处理一个 XML 有效负载的效率低于处理许多小型 XML 有效负载。

我已经看到了与您尝试做的类似的部署，请参阅[High Volume Contigous Real Time Audit And ETL](http://rusanu.com/2010/06/11/high-volume-contiguos-real-time-audit/)。我还建议您阅读[重用对话](http://rusanu.com/2007/04/25/reusing-conversations/)。

Service Broker 将很好地处理 Express 实例的开关或长时间断开连接。它只会保留发送的消息并在连接恢复后传递它们。您只需确保Express[的 10GB 最大数据库大小限制](http://rusanu.com/2010/04/28/sql-server-2008-r2-express-database-size-limit-10gb/)足以在需要时保留消息，直到连接恢复。

Service Broker 处理不好的情况是，如果 Express 每次连接回来时都显示为不同的 DNS 名称（想想从家里、办公室和星巴克连接的笔记本电脑）。Service Broker 使用数据库路由将确认从中央服务器发送到您的 Express 实例，并且路由需要静态 DNS。同样重要的是 Express 实例可以从中央服务器访问（即不在网络地址转换之后）。对于移动实例（前面提到的笔记本电脑），动态名称和大部分时间从 NAT 后面连接的事实都会导致问题。使用 VPN 可以解决这些问题，但很麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T14:56:10.563

好吧，如果您在触发器中实现行发送，那么发送实际上会发生（而不是偶尔）。您始终可以通过偶尔激活过程（RECEIVE）来处理接收方收集的消息。

要将行作为 XML 发送，您可以在触发器中使用语句：

```
Declare @msg XML;
Set @msg =
    (
        Select  * from Inserted FOR XML RAW, Type
    ) 
```

然后只需发送一条消息。

# python - 如何使用 Matplotlib 制作简单的 3D 线？

> ID：11541123
> 
> 赞同：35
> 
> 时间：2012-07-18T12:14:22.280
> 
> 标签：python, matplotlib

我想生成从 3D 数组中获得的线条。

这是代码：

```
VecStart_x = [0,1,3,5]
VecStart_y = [2,2,5,5]
VecStart_z = [0,1,1,5]
VecEnd_x = [1,2,-1,6]
VecEnd_y = [3,1,-2,7]
VecEnd_z  =[1,0,4,9]

import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

ax.plot([VecStart_x ,VecEnd_x],[VecStart_y,VecEnd_y],[VecStart_z,VecEnd_z])
plt.show()
Axes3D.plot() 
```

我得到那个错误：

> ValueError：第三个参数必须是格式字符串

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-18T12:40:48.060

我想，你想绘制 4 行。那你可以试试

```
for i in range(4):
    ax.plot([VecStart_x[i], VecEnd_x[i]], [VecStart_y[i],VecEnd_y[i]],zs=[VecStart_z[i],VecEnd_z[i]]) 
```

正如@Nicolas 所建议的，请查看 matplotlib 库。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-18T12:36:55.233

画廊是查找示例的绝佳起点：

[http://matplotlib.org/gallery.html](http://matplotlib.org/gallery.html)

这里有一个 3d 线图的例子：

[http://matplotlib.org/examples/mplot3d/lines3d_demo.html](http://matplotlib.org/examples/mplot3d/lines3d_demo.html)

您会看到需要将 3 个向量传递给 ax.plot 函数。您实际上是在传递列表列表。我不知道您所说的 Start 和 End 子列表是什么意思，但以下行应该可以工作：

```
ax.plot(VecStart_x + VecEnd_x, VecStart_y + VecEnd_y, VecStart_z +VecEnd_z) 
```

在这里，我对子列表（连接）求和，以便按轴只有一个列表。

# javascript - 引导轮播未启动

> ID：11541124
> 
> 赞同：0
> 
> 时间：2012-07-18T12:14:24.750
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我无法让 Bootstrap Carousel 启动，嗯，carousel-ing。以下是与我正在尝试做的事情有关的所有代码。当它在浏览器中呈现时，我只看到两张图像，一张在另一张上方，一张小于和一张在它们下方。它只是呈现由 HTML 定义的 DIV，而不是在轮播中呈现。我验证了 jQuery.ready 函数正在被调用，并且正在调用代码来初始化轮播。我还在多个浏览器上尝试过这个——IE9、Chrome 和 Firefox。我的想法不多了。任何帮助，将不胜感激。谢谢！

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    <link type="text/css" href="styles/carousel.css" />

    <script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="Scripts/bootstrap-transition.js"></script>
    <script type="text/javascript" src="Scripts/bootstrap-carousel.js"></script>

</head>
<body>
    <script type="text/javascript">

        $(function () {
            $('#carousel').carousel();
        });

    </script>

    <div id="carousel" class="carousel">

      <div class="carousel-inner">

        <div class="item active">
           <img src="images/APM_icon_big.png" alt="Some Alt Text" />
           <div class="carousel-caption">
             Some caption
           </div>
         </div>

        <div class="item">
           <img src="images/appdev_icon_big.png" alt="Some Alt Text" />
           <div class="carousel-caption">
             Some caption
           </div>
         </div>

        …

      </div>

      <a class="carousel-control left" href="#carousel" data-slide="prev">&lsaquo;</a>
       <a class="carousel-control right" href="#carousel" data-slide="next">&rsaquo;</a>

    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:15:48.840

[在这个小提琴](http://jsfiddle.net/Sherbrow/MVGKP/)中似乎工作得很好

确保包含 bootstrap 为 carousel 定义的样式：fiddle 中包含的 css 来自[twitter-bootstrap 自定义下载页面](http://twitter.github.com/bootstrap/download.html)，仅选择*JS components* > *Carousel*。

`<script>`将您的内容放在页面内部`<head>`或页面末尾可能不会有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:50:02.530

我想到了。`rel="stylesheet"`我的`LINK`标签中缺少一个！

# lua - 支持的屏幕清单 android Corona SDK

> ID：11541125
> 
> 赞同：2
> 
> 时间：2012-07-18T12:14:30.547
> 
> 标签：lua, coronasdk

在 Corona SDK build 840 制作的 android 清单中，Google 播放不“查看”标签支持的屏幕。谷歌“说”该应用程序是为 small-xlarge 的屏幕设计的，尽管在 build.settings 中写入仅支持小型和正常尺寸。

build.settings 文件：

```
settings =
{
   android =
   {
      supportsScreens =
      {
         resizeable = false,
         smallScreens = true,
         normalScreens = true,
         largeScreens = false,
         xlargeScreens = false,
      }
   },

   iphone =
    {
        plist =
        {
            UIAppFonts = 
            {
                "Mail Ray Stuff.ttf"
            },
        CFBundleIconFile = "Icon.png",
        CFBundleIconFiles = {
               "Icon.png", 
               "Icon@2x.png", 
               "Icon-72.png", 
            },  
        },
    },  
} 
```

解码 AndroidManifest.xml

```
<supports-screens
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="false"
    android:resizeable="false"
    android:xlargeScreens="false"
    >
</supports-screens> 
```

但是当加载到谷歌播放时，它支持所有尺寸

[http://clip2net.com/s/281fT](http://clip2net.com/s/281fT)

我究竟做错了什么？

# c# - DevExpress Xpf 如何在代码中将 LookUpEdit 添加到 gridColumn

> ID：11541129
> 
> 赞同：0
> 
> 时间：2012-07-18T12:14:39.320
> 
> 标签：c#, wpf, devexpress, gridcontrol, repositorylookupedit

我在 WinForms 中有需要转换为 WPF DevExpress 的代码。

我需要在代码中创建 LookUpEdit 并将其添加到创建的 gridColumn。

winforms中的代码：

```
var editor = (RepositoryItemLookUpEdit) gridControl.RepositoryItems.Add("LookUpEdit");

editor.DataSource = CreateList(query);

for (int i = 0; i < ... < ....Count; i++)
                {
                    var columnInfo = new LookUpColumnInfo(parentTableColumns[i].Name)
                        {SortOrder = ColumnSortOrder.Ascending};
                    editor.Columns.Add(columnInfo);
                }

editor.BestFitMode = BestFitMode.BestFitResizePopup;

gridColumn.ColumnEdit = editor;
gridColumn.FilterMode = ColumnFilterMode.DisplayText; 
```

RepositoryItemLookUpEdit，Xpf 中不存在 LookUpColumnInfo 而不是 winforms，我如何在 DevExpress WPF 中做精确的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:10:01.180

我正在寻找几乎相同的东西，我发现这个链接提供了一些关于我的案例的信息。我添加了一个示例项目，Dev express 支持对其进行编辑，以帮助我在 grid Column 中实现 lookUpEdit。解决方案还不完美（对我来说），但也许你的情况更简单，这就是你的解决方案。

开发快递页面 [Grid 和 LookupEditSettings的链接](http://www.devexpress.com/Support/Center/p/Q435018.aspx)

# iphone - 移动以编程方式创建的 uiimageview

> ID：11541130
> 
> 赞同：1
> 
> 时间：2012-07-18T12:14:42.650
> 
> 标签：iphone, objective-c, xcode, ios5

我写了以下代码，但它不起作用。图片出现了，但我不能移动它

```
UIImageView *oneselement = [[UIImageView alloc] initWithFrame:self.view.frame];
oneselement = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1el.png"]];
oneselement.frame = CGRectMake(0, 0, 122, 122);
[self.view addSubview:oneselement];

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];

    if([touch view]==oneselement)
    {
        CGPoint location = [touch locationInView:self.view];
        oneselement.center=location;
    }} 
```

我添加了一张图片查看并写了以下代码

。H

```
@interface ViewController : UIViewController
{
    IBOutlet UIImageView *oneEl;
}
@property (nonatomic,retain) IBOutlet UIImageView *oneEl; 
```

.m

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [[event allTouches] anyObject];
    if([touch view]==oneEl)
    {
        CGPoint location = [touch locationInView:self.view];
        oneEl.center=location;
    }
} 
```

它有效！我怎样才能使由 uiimageview 以编程方式创建的可以移动？

**NSMUTABLE数组**

```
self.elements=[myElements getElements];

imagesElements = [[NSMutableArray alloc]init];
for(ElemetsList *item in self.elements)
{
        UIImageView *oneelement = [[UIImageView alloc] initWithImage:[UIImage imageNamed:item.imgElement]];
        oneelement.frame = CGRectMake(item.positionX, item.positionY, item.width, item.height);
        oneelement.userInteractionEnabled=YES;
        [imagesElements addObject:oneelement];
}

for(UIImageView *img in imagesElements) 
    [self.view addSubview:img];

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];

    for(UIImageView *img in imagesElements) 
    {  
        if([self view] == img)
        {
            CGPoint location = [touch locationInView:self.view];
            img.center=location;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:19:49.377

像下面的代码一样初始化你的 UIImageView ，然后它将像你的第二个例子一样工作：

视图控制器.h

```
@interface ViewController : UIViewController
{
    UIImageView *oneselement;
}
@property (nonatomic,retain) UIImageView *oneselement; 
```

视图控制器.m

```
//initialize your UIImageView
UIImageView *newOneselement = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1el.png"]];
self.oneselement = newOneselement;
self.oneselement.userInteractionEnabled = YES;
self.oneselement.frame = CGRectMake(0, 0, 122, 122);
[self.view addSubview:self.oneselement];
[newOneselement release];

//Handle touchesMoved
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    if([touch view]==self.oneselement)
    {
        CGPoint location = [touch locationInView:self.view];
        self.oneselement.center=location;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:25:39.303

请看[**这个**](http://mobiledevelopertips.com/user-interface/move-an-image-with-animation.html)链接。
您也可以尝试：

为了移动图像，您应该将要移动的代码包含在动画块中：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
tapImage.center = CGPointMake(156, 110);
[UIView commitAnimations]; 
```

您还可以使用 UIView setAnimationDidStopSelector: 方法创建一个在动画完成后执行的方法。

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(animateImages)];
tapImage.center = CGPointMake(156, 110);
[UIView commitAnimations];

//other stuff

-(void)animateImages{
     [tapImage startAnimating];
} 
```

# android - Android：如何在 R.java 中声明 Styleable？

> ID：11541132
> 
> 赞同：2
> 
> 时间：2012-07-18T12:14:47.090
> 
> 标签：android

我正在尝试使用此`ViewPager` [扩展程序](https://github.com/astuetz/ViewPagerExtensions)。这个插件帮助我使用`SwipeyTab`. 我成功地将示例作为单个应用程序运行。所以我想将扩展集成到我的应用程序中。然后我复制了 java 文件并更改了包名称，一切都很好。但我在这些方面有一些错误：

```
mTextColorCenter = a.getColor(R.styleable.ViewPagerExtensions_textColorSelected, mTextColorCenter);
mLineColorCenter = a.getColor(R.styleable.ViewPagerExtensions_lineColorSelected, mLineColorCenter);
mLineHeightSelected = a.getDimensionPixelSize(R.styleable.ViewPagerExtensions_lineHeightSelected, mLineHeightSelected); 
```

日食说：`Styleable cannot be resolved or is not a field`。其他包含 styleable 的行也给出了同样的错误。如果我尝试单击解决此问题，则没有任何变化。

当我查看扩展的 R.java 文件时，我看到了以下几行：

```
public static final class styleable {
    public static final int[] ViewPagerExtensions = {
        0x7f010000, 0x7f010001, 0x7f010002, 0x7f010003,
        0x7f010004, 0x7f010005, 0x7f010006, 0x7f010007,
        0x7f010008, 0x7f010009, 0x7f01000a
    };

    public static final int ViewPagerExtensions_dividerColor = 7;

    // there is more 
} 
```

我知道编辑 R.java 是不可能的。我如何在 R.java 中为这个扩展定义 styleable？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:45:48.140

您应该在单独的 xml 文件中定义您需要的属性。我的意思是创建一个 values.xml 并使用`<declare-styleable name="ViewPagerExtensions"></declare-styleable>`标签。

让我举个例子：

```
<declare-styleable name="ViewPagerExtensions">
    <attr format="integer" name="dividerColor" />
</declare-styleable> 
```

顺便说一句，项目中已经有 attrs.xml，[请查看](https://github.com/astuetz/ViewPagerExtensions/blob/master/res/values/attrs.xml)：

# c - 意外的浮点比较

> ID：11541133
> 
> 赞同：0
> 
> 时间：2012-07-18T12:14:50.017
> 
> 标签：c, floating-point, precision, floating-accuracy

考虑以下代码：

```
#include<stdio.h>
#define k 0.7
#define p 0.5
int main()
{
    float a=k,b=p;
    double aa=k;
    if(a<k)
    {
         if(b<p) printf("2 is right");    
         else      printf("1 is right");
    }
    else printf("0 is right");
    printf("\n");
    if(a>k)
    {
         if(b<p) printf("2 is right");    
         else      printf("1 is right");
    }
    else printf("0 is right");
    return 0;
} 
```

将此视为[该](https://stackoverflow.com/questions/7011184/floating-point-comparison)问题的第二部分，这里的理解是浮点常量的双精度值（表示为数字常量时的双精度值）在转换为相应的浮点值时丢失。异常值为 X.5 和 X.0。但我观察到以下结果：

```
Input           Output
K=0.1 to 0.4        0 is right
                    1 is right

K=0.5               0 is right
                    1 is right

K=0.6               0 is right
                    1 is right

K=0.7               1 is right
                    0 is right

K=0.8               0 is right
                    1 is right

K=0.9               1 is right
                    0 is right

K=8.4               1 is right
                    0 is right 
```

为什么会有这种奇怪的行为？为什么只有少数浮点值显示此属性？我们不能假设`float`精度值*总是小于*精度`double`值吗？我们如何解释这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:43:12.553

> 我们不能假设`float`精度值总是小于`double`精度值吗？

并非如此，它们可能都具有相同的精度。您可以假设 的范围和精度`double`不小于 的`float`。

但是，出于所有实际目的，这是一个有利可图的赌注，它`double`有 53 位精度和`float`24 位精度。它`double`有 11 位指数，`float`8 位。

因此，不考虑外来架构，`float`其精度和范围都小于`double`，每个`float`值都可以表示为`double`，但反之则不然。所以从`float`to 转换`double`是保值的，但是从`double`to 转换`float`会改变所有需要超过 24 位精度的值。

通常`float`通过将值的有效位按以下方式四舍五入`double`为 24 位精度来执行转换（对于范围内的值）：

*   如果有效数字的第 25^位最高有效位为 0，则有效数字被截断（该值向零四舍五入）
*   如果第 25^个最高有效位为 1，并且并非所有较低有效位都为 0，则从零开始舍入该值（截断有效位，然后添加最低有效位的值）
*   否则，有效位被四舍五入，因此第 24^个最高有效位为零，在一半的情况下从零四舍五入，在一半的情况下向零四舍五入。

您无法通过查看小数扩展来预测将 a 转换为`double`是`float`增加还是减少该值，除非在少数情况下您可以看到该值将保持不变。重要的是二进制扩展。

# javascript - JavaScript 语法 (0, fn)(args)

> ID：11541134
> 
> 赞同：27
> 
> 时间：2012-07-18T12:14:54.497
> 
> 标签：javascript

只是检查谷歌的 JavaScript 代码，我发现了这个语法：

```
var myVar = function...;
(0, myVar)(args); 
```

你知道这个语法的含义吗？我找不到 和 之间的 `(0, myVar)(args);` 区别 `myVar(args);`。

举一个确切的例子，我们有

```
_.x3 = function (a, b) {
    return new _.q3(20 * b.x + a.B.B.x, 20 * b.y + a.B.B.y)
}; 
```

然后

```
this.ta = new _.s3((0, _.x3)(this.fa, this.B.B), 0); 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2017-09-25T03:48:11.413

我有同样的问题，然后找到了答案，如下：

真的是为了

```
(0, foo.fn)(); 
```

请记住，在 JavaScript 中，when`foo.fn()`被调用，然后在 内部`fn`，`this`被绑定到`foo`。如果你使用

```
var g = foo.fn;
g(); 
```

然后当`g`上面调用时，`this`绑定到全局对象（`window`，在 Web 浏览器的上下文中）。

那么你需要`g`像上面那样定义吗？你能做一些诸如

```
(foo.fn)(); 
```

答案是不。JavaScript 会像对待可删除的冗余`foo.fn();`一样对待它。`foo.fn``()`

但是有一种方法可以绕过它，那就是使用[逗号运算符，Mozilla 将其表示为](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comma_Operator)

> 逗号运算符评估其每个操作数（从左到右）并返回最后一个操作数的值

所以使用

```
(0, foo.fn)(); 
```

将`(0, foo.fn)`被评估为对该函数的引用，`g`如上所示，然后调用该函数。然后，`this`不是绑定到全局对象，`foo`而是绑定到全局对象。

所以这样写的代码，就是“剪掉绑定”。

例子：

```
var foo = { 
              fullName: "Peter", 
              sayName:  function() { console.log("My name is", this.fullName); } 
          };

window.fullName = "Shiny";

foo.sayName();       // My name is Peter

(foo.sayName)();     // My name is Peter

(0, foo.sayName)();  // My name is Shiny
```

现在为什么有些代码要切断绑定？我在某些情况下读到，如果我们有一个函数：

```
function foo() {
  // using `this` here
} 
```

然后`this`将指向全局对象。但是如果`foo()`与其他函数和值一起，被打包成一个模块，那么在调用函数时使用

```
someModule.foo(); 
```

然后`this`是必然的`someModule`，并且它已经改变了 的行为`foo()`。所以为了保持`foo()`原来的样子，我们剪掉了绑定，这样在里面，`foo()`,`this`就像以前一样绑定到全局对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T12:25:02.063

此语法使用逗号运算符`,`. 它评估其所有操作数并返回最后一个操作数的值。在这种情况下， 0 只是用作占位符，因此`(0, function() {})`将返回`(function() {})`。评估后，该`(args)`部分将调用该函数并为其提供参数。

**评论后编辑：**

使用这种编码风格的原因是他们可以快速或在一行上执行代码。这是一个例子：

```
var a = 0,
    b = 1,
    c;

c = ( a++, b++, a + 2 ); // a is added, b is added, and a is added then returned

a; // 1
b; // 2
c; // 3 
```

# mysql - 为什么我的 (MySQL) INSERT 操作失败？

> ID：11541135
> 
> 赞同：0
> 
> 时间：2012-07-18T12:14:57.620
> 
> 标签：mysql, insert, syntax-error

我有一个具有以下结构的表：

```
--------------
SHOW COLUMNS FROM versions
--------------

+-----------------+--------------+------+-----+---------+----------------+
| Field           | Type         | Null | Key | Default | Extra          |
+-----------------+--------------+------+-----+---------+----------------+
| id              | int(11)      | NO   | PRI | NULL    | auto_increment |
| project_id      | int(11)      | NO   | MUL | 0       |                |
| name            | varchar(255) | NO   |     |         |                |
| description     | varchar(255) | YES  |     |         |                |
| effective_date  | date         | YES  |     | NULL    |                |
| created_on      | datetime     | YES  |     | NULL    |                |
| updated_on      | datetime     | YES  |     | NULL    |                |
| wiki_page_title | varchar(255) | YES  |     | NULL    |                |
| status          | varchar(255) | YES  |     | open    |                |
| sharing         | varchar(255) | NO   | MUL | none    |                |
+-----------------+--------------+------+-----+---------+----------------+ 
```

为什么以下查询失败？

```
INSERT INTO versions (10, 'Unplanned', ' ', null, null, null, null, 'open', 'none'); 
```

这是我收到的错误消息：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '10, 'Unplanned', ' ', null, null, null, null, 'open', 'none')' at line 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:17:29.003

如果您不指定列列表，则需要添加关键字`VALUES`：

```
INSERT INTO versions VALUES (10, 'Unplanned', ' ', null, null, null, null, 'open', 'none'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T12:35:37.840

无需插入您提供的默认值，例如 none、null 等。

只需使用以下查询插入数据： insert into versions(project_id,name,sharing)values(10,'unplanned','none');

我要插入共享字段，因为根据您的表格设计，它不能为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:24:39.413

您也可以使用这种格式

```
INSERT INTO    versions(id,project_id,name,description,effective_date,created_on,updated_on,wiki_page_title,status,sharing) VALUES (10, 'Unplanned', ' ', null, null, null, null, 'open', 'none'); 
```

# c# - Mono FormBorderStyle = 无

> ID：11541136
> 
> 赞同：0
> 
> 时间：2012-07-18T12:15:00.240
> 
> 标签：c#, mono

我有一些针对 .NET 2.0 编写的 C# 应用程序。

主窗体有属性`FormBorderStyle = None`。

现在我尝试使用 Mono 2.10.8 而不是 .NET 2.0，让我们看看这个（左 - Mono，右 - .NET）：

![在此处输入图像描述](../Images/a833249d4e188f5bf9dc7d4f97ef3001.png)

在 Mono 中，我仍然在表单周围有 smaaaaall 边框。据我所知 - 这是 Mono 的一个错误。但也许有人知道解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:16:38.647

像表格一样设置边框颜色白色。

# asp.net - 将事件添加到 Web 用户控件中以编程方式添加的控件

> ID：11541139
> 
> 赞同：0
> 
> 时间：2012-07-18T12:15:10.937
> 
> 标签：asp.net, events, webusercontrol

我正在尝试放置一个 - 看起来 - 非常简单的网络用户控件

基本上我希望它基于属性呈现为下拉列表/复选框列表或单选列表，但也希望能够计算出选择的内容

我正在尝试以下操作 - 但似乎无法弄清楚如何附加到 listcontrol 的 selectedindexchanged 以便我可以设置选定的值它无助于我的 VB 不是很多但被迫使用它这个实例甚至没有给我事件的智能感知..

```
 Public Options As List(Of Options)
    Public ControlRenderType As ControlRenderType
    Public IncludeFreeOption As Boolean
    Public SelectedOptions As List(Of Options)

    Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init

        Dim c As ListControl
        Select Case (ControlRenderType)
            Case STGLib.ControlRenderType.CheckBoxList
                c = New CheckBoxList()
            Case STGLib.ControlRenderType.DropdownList
                c = New DropDownList()
            Case STGLib.ControlRenderType.RadioButtonList
                c = New RadioButtonList()

            Case Else
                Throw New Exception("No Render Type Specified")
        End Select

        For Each opt In Options
            Dim li = New ListItem(opt.Description, opt.ID)
            c.Items.Add(li)
        Next

        c.SelectedIndexChanged += ..?? or something
        Page.Controls.Add(c)

    End Sub 
```

谁能解释一下-当然，我很有可能以完全错误的方式解决这个问题..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:23:41.983

首先创建一个 Sub 或一个 Function 来处理您动态创建的对象的 IndexChange 并确保 Sub 的签名是这样的

```
Sub myOwnSub(ByVal sender As Object, ByVal e As EventArgs)
...
...  Handle your event here
...
End Sub 
```

然后在创建对象后添加以下代码

```
Dim obj as ListBox
AddHandler obj.SelectedIndexChanged, AddressOf myOwnSub 
```

# objective-c - 右手势不起作用

> ID：11541142
> 
> 赞同：1
> 
> 时间：2012-07-18T12:15:17.160
> 
> 标签：objective-c, ipad

在我的项目中，我有两种观点。一个是 homeViewController，另一个是 searchViewController。我在 homeViewController 上完成了向右滑动手势以显示 searchViewController。但`UISwipeGestureRecognizerDirectionRight`对我不起作用。它给出了左动画而不是右动画。

我在 homeViewController.m 中添加了以下代码以添加手势属性并显示 SearchViewController：

```
UISwipeGestureRecognizer *swipeRecognizer=[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeDetected:)];
   [swipeRecognizer setDirection:UISwipeGestureRecognizerDirectionRight];
   [self.view addGestureRecognizer:swipeRecognizer];
   [swipeRecognizer release];

-(void)swipeDetected:(UIGestureRecognizer *)sender
{
   SearchViewController *searchView=[[SearchViewController alloc] initWithNibName:@"SearchViewController" bundle:nil];
   [self.navigationController pushViewController:searchView animated:YES];
   [searchView release];
} 
```

请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:20:19.223

这里的动画是作为导航控制器`pushViewController:animated:`方法的一部分出现的，它与手势识别器的方向无关（只确定用户需要滑动哪种方式才能识别滑动）

如果您希望能够在其他方向的视图控制器之间滑动，您可以查看[UIPageViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)

# android - Eclipse 工具可以有 Plist 文件吗？

> ID：11541151
> 
> 赞同：0
> 
> 时间：2012-07-18T12:15:42.520
> 
> 标签：android, eclipse

我是 Android 开发的新手。Eclipse 中是否有`plist file`适用于 Android 应用程序的编辑器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:47:56.640

在 Adnroid 中，首选项是使用 android.preference 包存储的。这些链接应该可以帮助您入门

[http://www.kaloer.com/android-preferences](http://www.kaloer.com/android-preferences)

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

它们建立在 XML 文件之上。Android 大量使用 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:41:20.430

不，除了 xml 资源，android 中没有默认的 plist 文件系统（不确定是否有库）。我以前做的是寻找一个 plist 到 json 转换器并使用 json 代替 android。

# image - 使用 OpenCV 检查图像的相似性

> ID：11541154
> 
> 赞同：172
> 
> 时间：2012-07-18T12:15:50.267
> 
> 标签：image, opencv, comparison, similarity

OpenCV 是否支持比较两个图像，返回一些值（可能是百分比）来指示这些图像的相似程度？例如，如果相同的图像通过两次，则返回 100%，如果图像完全不同，则返回 0%。

我已经在 StackOverflow 上阅读了很多类似的主题。我也做了一些谷歌搜索。遗憾的是，我无法给出令人满意的答案。

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2012-07-18T12:38:40.427

这是一个巨大的话题，从 3 行代码到整个研究杂志都有答案。

我将概述最常见的此类技术及其结果。

## 比较直方图

最简单和最快的方法之一。几十年前提出的一种寻找图片相似性的方法。这个想法是森林会有很多绿色，人脸会有很多粉红色，或者其他什么。因此，如果您将两张图片与森林进行比较，您会发现直方图之间有些相似之处，因为两者都有很多绿色。

> 缺点：太简单了。香蕉和海滩看起来一样，因为它们都是黄色的。
> 
> OpenCV 方法：compareHist()

## 模板匹配

这里有一个很好的例子[matchTemplate 找到了很好的匹配](https://stackoverflow.com/questions/8520882/matchtemplate-finding-good-match)。它将搜索图像与正在搜索的图像进行卷积。它通常用于在较大的图像中查找较小的图像部分。

> 缺点：它只返回具有相同图像、相同尺寸和方向的良好结果。
> 
> OpenCV 方法：matchTemplate()

## 特征匹配

被认为是进行图像搜索的最有效方法之一。从图像中提取许多特征，以确保即使在旋转、缩放或倾斜时也能再次识别相同的特征。以这种方式提取的特征可以与其他图像特征集进行匹配。另一张图像与第一张图像匹配的特征比例很高，则被认为描绘了相同的场景。

找到两组点之间的单应性还可以让您找到原始图片之间拍摄角度的相对差异或重叠量。

> 有很多关于这方面的 OpenCV 教程/示例，还有一个不错的[视频](http://www.youtube.com/watch?v=FirtmYcC0Vc)。一个完整的 OpenCV 模块（features2d）专用于它。
> 
> 缺点：可能会很慢。它并不完美。

* * *

在[OpenCV 问答](http://answers.opencv.org/question/877/how-to-match-2-hog-for-object-detection/#882)网站上，我正在讨论特征描述符之间的区别，这在比较整个图像和纹理描述符时非常有用，后者用于识别图像中的人脸或汽车等对象。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-10-31T14:17:57.367

如果用于匹配相同的图像（相同的尺寸/方向）

```
// Compare two images by getting the L2 error (square-root of sum of squared error).
double getSimilarity( const Mat A, const Mat B ) {
if ( A.rows > 0 && A.rows == B.rows && A.cols > 0 && A.cols == B.cols ) {
    // Calculate the L2 relative error between images.
    double errorL2 = norm( A, B, CV_L2 );
    // Convert to a reasonable scale, since L2 error is summed across all pixels of the image.
    double similarity = errorL2 / (double)( A.rows * A.cols );
    return similarity;
}
else {
    //Images have a different size
    return 100000000.0;  // Return a bad value
} 
```

[来源](https://github.com/MasteringOpenCV/code/blob/master/Chapter8_FaceRecognition/recognition.cpp)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-08-03T13:36:51.783

山姆的解决方案应该足够了。我使用了直方图差异和模板匹配的组合，因为没有一种方法能 100% 地为我工作。不过，我对直方图方法的重视程度较低。这是我在简单的 python 脚本中实现的方式。

```
import cv2

class CompareImage(object):

    def __init__(self, image_1_path, image_2_path):
        self.minimum_commutative_image_diff = 1
        self.image_1_path = image_1_path
        self.image_2_path = image_2_path

    def compare_image(self):
        image_1 = cv2.imread(self.image_1_path, 0)
        image_2 = cv2.imread(self.image_2_path, 0)
        commutative_image_diff = self.get_image_difference(image_1, image_2)

        if commutative_image_diff < self.minimum_commutative_image_diff:
            print "Matched"
            return commutative_image_diff
        return 10000 //random failure value

    @staticmethod
    def get_image_difference(image_1, image_2):
        first_image_hist = cv2.calcHist([image_1], [0], None, [256], [0, 256])
        second_image_hist = cv2.calcHist([image_2], [0], None, [256], [0, 256])

        img_hist_diff = cv2.compareHist(first_image_hist, second_image_hist, cv2.HISTCMP_BHATTACHARYYA)
        img_template_probability_match = cv2.matchTemplate(first_image_hist, second_image_hist, cv2.TM_CCOEFF_NORMED)[0][0]
        img_template_diff = 1 - img_template_probability_match

        # taking only 10% of histogram diff, since it's less accurate than template method
        commutative_image_diff = (img_hist_diff / 10) + img_template_diff
        return commutative_image_diff

    if __name__ == '__main__':
        compare_image = CompareImage('image1/path', 'image2/path')
        image_difference = compare_image.compare_image()
        print image_difference 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-09T13:37:41.543

有点离题但有用的是pythonic`numpy`方法。它强大且快速，但只是比较像素而不是图片包含的对象或数据（并且它需要相同大小和形状的图像）：

在没有 openCV 和任何计算机视觉库的情况下，一种非常简单且快速的方法是通过以下方式规范图片数组

```
import numpy as np
picture1 = np.random.rand(100,100)
picture2 = np.random.rand(100,100)
picture1_norm = picture1/np.sqrt(np.sum(picture1**2))
picture2_norm = picture2/np.sqrt(np.sum(picture2**2)) 
```

在定义了两个标准化图片（或矩阵）之后，您可以将您想要比较的图片的乘积相加：

1) 如果您比较相似的图片，总和将返回 1：

```
In[1]: np.sum(picture1_norm**2)
Out[1]: 1.0 
```

2) 如果它们不相似，您将得到一个介于 0 和 1 之间的值（乘以 100 时的百分比）：

```
In[2]: np.sum(picture2_norm*picture1_norm)
Out[2]: 0.75389941124629822 
```

请注意，如果您有彩色图片，则必须在所有 3 个维度上执行此操作，或者仅比较灰度版本。我经常需要将大量图片与任意内容进行比较，这是一种非常快速的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-15T11:09:43.257

可以在预训练的 ImageRes 数据上使用 VGG16 等架构使用自动编码器来完成此类任务；然后计算查询和其他图像之间的距离，以找到最接近的匹配。

# android - 如何在 Android 应用程序中实现这样的接口？

> ID：11541155
> 
> 赞同：0
> 
> 时间：2012-07-18T12:16:00.553
> 
> 标签：android

下午好

我怎么能在我的 android 应用程序中得到这样的设计？

[http://s2.subirimagenes.com/otros/previo/thump_7851660img20120718wa0000.jpg](http://s2.subirimagenes.com/otros/previo/thump_7851660img20120718wa0000.jpg)

即把背景活动分成三个不同背景颜色的区域。例如，在第一个区域中，没有这些选项，而是有一个 TextView 并在您输入内容的地方编辑文本。

如何制作这样的图像，什么样的布局更值得推荐使用？线性的，相对的...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:20:39.147

最好的方法是`PreferenceScreen`与三个`PreferenceSection`s 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:23:37.663

您可以使用片段布局并使用片段来获取该布局

# javascript - 文件阅读器在 chrome 和 IE 中不起作用

> ID：11541157
> 
> 赞同：0
> 
> 时间：2012-07-18T12:16:07.853
> 
> 标签：javascript, html, file-upload, filereader

我从我的 PC 上传了一个图像文件，然后将其作为 dataurl 读取。然后将其传递给 img 元素进行预览。它在 Firefox 中运行良好。但在 chrome 和 IE 中，它不会从文件阅读器中获取 src。

这就是我正在做的，

```
var image = document.createElement("img");
    var thumbnail = document.getElementById("thumbnail");
    image.file = file;
    thumbnail.appendChild(image);

    function handlefilereader(evt){
     image.src = evt.target.result; 
    }

    var reader = new FileReader()
    reader.onload = handlefilereader;
    reader.readAsDataURL(file);

    image.id = count;
    count++;
    image.draggable = true;
    image.ondragstart = dragIt;
    alert(image.src); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:20:03.870

您的浏览器版本可能不支持 Filereader。请参阅此兼容性图表。

[http://caniuse.com/filereader](http://caniuse.com/filereader)

此外， event.target 不完全兼容浏览器。考虑

```
var target = evt.target || evt.srcElement;
image.src = target.result; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T15:00:06.563

就像这里提到的人一样，IE 不支持 File API。但没有人提到可能的解决方案。这是一个--> [FileReader + flash](https://github.com/Jahdrien/FileReader)

所以你仍然可以在 IE 中使用 FileAPI。

# c# - 如何将字符串转换为 int 并计数？

> ID：11541159
> 
> 赞同：-6
> 
> 时间：2012-07-18T12:16:08.383
> 
> 标签：c#, string-conversion

```
public void Save(string path , string fileName , PictureBox pb)                
{
    int framesNumberX = 0;
    int framesNumberY = 0;
    string fn;
    string t = Path.GetFileNameWithoutExtension(this.name);
    if (File.Exists(path + "\\" + "DATABASE" + "\\" + fileName + "\\" + t + ".txt"))
    {
        try
        {
            string f = Path.Combine(path + "\\" + "DATABASE" + "\\" + t + "\\" + fileName);
            File.Delete(f);
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error: Could not delete file from disk. Original error: " + ex.Message);
        } 
        fn = path + "\\" + "DATABASE" + "\\" + t + "\\" + fileName;
    }
    else
    {
        fn = path + "\\" + "DATABASE" + "\\" + fileName + "\\" + this.name + ".txt";
    }
    OptionsFile setting_file = new OptionsFile(fn);
    setting_file.SetKey("File Name", fn);
    setting_file.SetKey("Object Name", fileName);
    setting_file.SetKey("Animation Name", this.name);
    setting_file.SetKey("picturebox.Width", pb.Width.ToString());
    setting_file.SetKey("picturebox.Height", pb.Height.ToString());
    string[] xFrames = new string[wocl.Count];
    string[] yFrames = new string[wocl.Count];
    string X="";
    string Y="";
    for (int i = 0; i < wocl.Count; i++)
    {
        X  = string.Format("Frame_X_{0} ", i + 1);
        Y  = string.Format("Frame_Y_{0} ", i + 1);
        int c = Convert.ToInt32(X);
        int d = Convert.ToInt32(Y);
        framesNumberX += c;
        framesNumberY += d;
        for (int j = 0; j < wocl[i].Point_X.Count; j++)
        {
            xFrames[i] += string.Format("{0},", wocl[i].Point_X[j]);
            yFrames[i] += string.Format("{0},", wocl[i].Point_Y[j]);   
        }    
        string tt = xFrames[i].Trim(",".ToCharArray());
        string yy =  yFrames[i].Trim(",".ToCharArray());
        setting_file.SetKey(X, tt);
        setting_file.SetKey(Y, yy);
    }    
    setting_file.SetKey("Number Of Frames X", framesNumberX.ToString());                
} 
```

例如，如果我在循环中做： FrameNumber +=; 它会计算我的帧数，例如 6。但我想计算 X 的帧出现了多少次，以及 Y 的帧出现了多少次。

我试过这样：

```
X  = string.Format("Frame_X_{0} ", i + 1);
Y  = string.Format("Frame_Y_{0} ", i + 1);
int c = Convert.ToInt32(X);
int d = Convert.ToInt32(Y);
framesNumberX += c;
framesNumberY += d; 
```

但这不是一个好方法。

也许我需要在变量 tt 和 yy 之后对 X 和 Y 进行计数？我想计算循环执行变量 tt 的次数以及执行变量 yy 的次数。只需输入 int 变量并 make ++ 即可为我提供将它们分隔为 X 和 Y 所需的整体帧。因此，如果我有例如 6 个帧，那么 X 将为 3，Y 将为 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:42:13.020

`Convert.Int32()`不是一种`Val()`方法，换句话说，它不会只取任何字符串中的数字。使用`Convert.Int32()`时，整个字符串必须是数字，例如：

```
// doesn't work
string x = "My string 123";
int y = Convert.Int32(x);

// does work
string x = "123";
int y = Convert.Int32(x); 
```

如果我理解正确，您正在尝试将某些内容转换为 int 并同时计数（此处）。

```
X  = string.Format("Frame_X_{0} ", i + 1); 
Y  = string.Format("Frame_Y_{0} ", i + 1); 
// blows up with an exception
int c = Convert.ToInt32(X); 
int d = Convert.ToInt32(Y); 
framesNumberX += c; 
framesNumberY += d; 
```

以上最好写成：

```
X  = string.Format("Frame_X_{0} ", i + 1); 
Y  = string.Format("Frame_Y_{0} ", i + 1); 

framesNumberX++; 
framesNumberY++;

// or (depending on what you need)
framesNumberX = i + 1;
framesNumberY = i + 1; 
```

或者——这会更清楚；先做数学运算，然后在`string.Format()`通话中使用结果；

```
framesNumberX = i + 1;
framesNumberY = i + 1;

X  = string.Format("Frame_X_{0} ", framesNumberX); 
Y  = string.Format("Frame_Y_{0} ", framesNumberY); 
```

但是， framesNumberX 和 framesNumberY 将彼此相等并且与迭代器相等`i + 1`。这是我开始失去变量目的的地方。如果您可以在伪代码中阐明您到底想要完成什么，这将有所帮助：

```
public void MyMethod()
{
   ... code here

   // trying to `your explanation`
   ... code here

    // and here, I'm trying to `your explanation`
    ... code here

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:19:08.100

**编辑**

让这段代码工作

```
 X  = string.Format("Frame_X_{0} ", i + 1);
  Y  = string.Format("Frame_Y_{0} ", i + 1);
  int c = Convert.ToInt32(ExtractNumbers(X));//modfied code line
  int d = Convert.ToInt32(ExtractNumbers(Y));//modfied code line
  framesNumberX += c;  framesNumberY += d; 
```

你需要提取这样的数字

```
static string ExtractNumbers( string expr )
{
 return string.Join( null,System.Text.RegularExpressions.Regex.Split( expr, "[^\\d]" ) );
} 
```

* * *

**上一页**

好办法是

```
static void Main()
    {
    // Convert string to number.
    string text = "123";
    int num = -1;
      if( int.TryParse (text,out num))
    Console.WriteLine(num);
    } 
```

检查字符串是否可转换

# .htaccess - 需要在 .htaccess 中指定完整的 URL？

> ID：11541160
> 
> 赞同：3
> 
> 时间：2012-07-18T12:16:12.870
> 
> 标签：.htaccess, wampserver, errordocument

我的 .htaccess 文件中有以下行，它可以工作。

```
ErrorDocument 404 http://localhost/error.php?code=404 
```

当我将其更改为其中任何一个时，它不再起作用（不知道哪个是正确的）：

```
ErrorDocument 404 error.php?code=404
ErrorDocument 404 /error.php?code=404 
```

.htaccess 文件和 error.php 位于同一目录中。为什么会这样？

注意：我在 Wampserver

完整的 .HTACCESS 文件

```
RewriteEngine on

RewriteRule ^([a-z]+)$ $1.php

ErrorDocument 404 http://localhost/error.php?code=404 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:30:45.197

这不起作用的原因是查询字符串。

当您没有为`ErrorDocument`指令提供完整的 URL 时，Apache 将 is 视为相对于`DocumentRoot`. 有点令人困惑的是，您确实需要使用前导`/`，即使它在技术上是相对路径。

现在，您想要做的实际上并不像表面上看起来那么简单。因为您现在处理的是本地路径，所以查询字符串部分不再具有特殊含义，并将被视为文件名的文字部分 - 显然该文件没有被调用`error.php?code=404`，它只是被调用`error.php`。不过值得庆幸的是，有一点点乱七八糟是可能的，因为`ErrorDocument`确实会生成一个通过标准路由引擎传递的内部请求。我们在这里需要的是一点`mod_rewrite`魔法。

尝试以下操作：

```
ErrorDocument 404 /error-404.php

RewriteEngine On
RewriteRule ^/?error-([0-9]+)\.php$ /error.php?code=$1 [L,QSA] 
```

这假设您的 .htaccess 和 error.php 文件都驻留在`DocumentRoot`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:27:32.750

在我看来，404（如 403、502，...）代码是 HTTP 代码，因此在您的情况下引用 HTTP 进程的指令 ErrorDocument 可能是逻辑需要 http:// 指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-04T09:26:08.460

使用 DaveRandom 的解决方案，我只需将**R**标志添加到 RwriteRule 即可。

试试这个配置：

```
ErrorDocument 404 /error-404.php

RewriteEngine On
RewriteRule ^/?error-([0-9]+)\.php$ /error.php?code=$1 [L,R,QSA] 
```

对我来说，它适用于 Apache 2.4.12

# eclipse - 每个 Eclipse 项目或一个 Git 存储库的多个 Git 存储库

> ID：11541162
> 
> 赞同：44
> 
> 时间：2012-07-18T12:16:22.793
> 
> 标签：eclipse, git, repository, repository-pattern, egit

我正在从 SVN 迁移到 Git。在 SVN 中，我在单个 SVN 存储库中有多个 Eclipse 项目，便于浏览项目。我打算让每个 Eclipse 项目都有一个 git 存储库，但 EGit 建议不这样做。

[EGit](http://wiki.eclipse.org/EGit/User_Guide/One_page#Considerations_for_Git_Repositories_to_be_used_in_Eclipse)指南建议将多个项目放入一个 Git 存储库。

查看[诸如此类](https://stackoverflow.com/questions/2732020/git-repository-layout-for-server-with-multiple-projects)的类似问题建议每个存储库一个项目。

哪种方法是最佳实践，人们会实施什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-18T15:08:05.373

这取决于这些项目的密切相关程度。问自己以下问题：

*   它们是否总是需要分支/标记在一起？
*   您是要提交所有项目，还是提交主要只涉及一个项目？
*   构建系统是否在所有这些上运行，或者它们在那里有边界？

如果你把它们都放在一起，上面的一些事情会更容易。您只需在一个存储库中进行分支/标记/存储/提交，而不是分别为每个存储库执行此操作。

但是，如果您需要为项目设置单独的发布周期，则有必要将每个项目放在一个独立的存储库中。

请注意，您以后可以随时拆分存储库，或者将多个存储库再次合并为一个而不会丢失历史记录。

合并比拆分要难一些，所以我会先选择一个存储库，看看它是如何进行的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-18T13:27:19.453

我每个项目使用 1 个 repo。

一些推理：

*   当您在多次提交后发现自己搞砸了某些东西时，如果它只是一个项目，则更容易修复。试想一下，您对另外两个项目进行了提交，现在您需要修复您在第三个项目中所做的提交。

*   正如 Fedir 所说，您的历史记录和日志要干净得多。它仅显示该项目的提交。

*   它与我拥有的开发工作流程配合得更好。我有一个用于生产的主分支，用于开发的分支，我创建分支来实现功能（您可以在此处阅读有关它的更多信息：http: [//blog.avirtualhome.com/development-workflow-using-git/](http://blog.avirtualhome.com/development-workflow-using-git/) )

*   当您在团队中工作并“共享” git 存储库时，团队成员是否真的需要所有其他项目？

只是一些想法，但归结为：做对你有用的事。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-05-15T21:01:31.263

我有多个项目（Eclipse 项目）并尝试了不同的方法来找出在实际日常开发方面最有效的方法。这是我发现的，我认为如果大多数人跟踪结果并客观地分析结果，他们会发现同样的事情。

简而言之，应用以下规则将产生最佳结果：

1.  为每个项目组创建一个单独的存储库。
2.  每个项目组由一组相互紧密联系的项目组成，这些项目应该一起管理，并且不能轻易地相互分离。
3.  一个项目组可以包含一个项目。
4.  应该检查一个包含多个项目的项目组，看看它的一些项目是否可以相互解耦，以便可以将其分成更小的项目组，这些项目组仍然包含彼此紧密连接的项目，应该一起管理并且不能轻易地相互分离。

以下指南更详细地解释了确定将哪些项目放入同一存储库中的过程：

1.  如果一个项目与任何其他项目没有紧密联系（例如，该项目可以在没有打开其他项目的情况下打开，并且没有其他项目在打开时依赖于正在打开的项目），那么您绝对应该将它放在自己的存储库中由于上述答案中解释的原因。

2.  如果一个项目依赖于其他项目或其他项目依赖于该项目，那么它归结为它们之间的确切连接程度，它们可以打包在一起的程度以及它们彼此分离的容易程度。

A）例如一个测试项目包含junit测试类来测试一个主项目的类，这是两个项目相互联系非常紧密的情况，可以很容易地打包在一起，不能很容易地相互解耦。出于下面 C 部分中解释的原因，这些项目应该放在同一个存储库中。

B）在一个项目依赖另一个项目来提供某种共享资源的情况下，这实际上归结为它们可以一起管理的程度以及它们彼此分离的容易程度。例如，如果具有共享资源的项目被许多项目依赖，那么应该将它放在自己的存储库中，因为其他不相关的项目会受到共享源代码项目更改的影响。在这种情况下，共享资源项目应该与依赖项目解耦，而不是直接连接到依赖项目。（例如，最好创建版本化的存档文件 [Jar 文件，其名称类似于“projectName”.1.0.1.0。

C）如果多个项目是相互联系的，可以很容易地一起管理，但不能很容易地相互解耦，那么这取决于它们之间的联系有多紧密。

I）如果项目被放入一个存储库，那么每次提交时项目将在存储库中保持彼此同步，如果项目紧密连接，这可以成为真正的救星。但是，这也会产生上述答案中提到的问题。

II）如果项目被放入单独的存储库中，那么您必须注意保持提交彼此同步，并确保包含某种机制来指示哪些提交属于跨项目的同一同步点（当跨项目完成一组提交时，可能类似于在每个项目的提交的注释中包含相同的同步点编号。）

III）因此，在这种情况下，最好将这些项目放在一个存储库中，以减少同步提交的人力开销，并避免在需要撤销提交时出现人为错误。将它们放在单独的存储库中可能更好的唯一情况是，只有一个项目定期更改，而其他连接的项目很少更改。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-18T15:13:33.530

我认为这个问题与我[在这里](https://stackoverflow.com/questions/8442269/java-flash-in-one-project-how-to-organize-it-in-eclipse-and-git/8442515#8442515/)回答的问题有关。基本上，当涉及到项目/存储库时，Git 本质上支持非常精细的粒度结构。我已经阅读并被告知每个项目 1 个存储库几乎总是最佳实践。正如其他人所描述的那样，通过将项目分开并获得很多收益，您几乎没有损失任何东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-18T12:28:26.067

如果您将创建多个 git 存储库，可能会更高效。

如果您将创建一个分支，则只会分支项目的文件，而不是所有项目。小项目分析、提交会更快。操作将花费更少的时间。

日志也会更清晰，如果您有多个 git 存储库，您可以进行更细化的配置。

# mysql - 如何用codeigniter锁定表？

> ID：11541171
> 
> 赞同：3
> 
> 时间：2012-07-18T12:17:13.280
> 
> 标签：mysql, codeigniter, locking

我必须在模型中运行这个 sql 例程：

```
$this->db->query('LOCK TABLE orders WRITE');
$this->db->query('TRUNCATE TABLE orders');
$this->db->query('INSERT INTO orders SELECT * FROM orders_tmp');
$this->db->query('UNLOCK TABLES'); 
```

但我收到此错误：

> 错误号：1192
> 无法执行请求的命令：表处于锁定状态或事务运行
> TRUNCATE TABLE 命令

我在这张桌子上使用 MyISAM 作为数据库引擎。

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-10T20:26:33.810

尝试这个

```
$this->db->query('TRUNCATE TABLE orders');
$this->db->query('LOCK TABLE orders WRITE');
$this->db->query('INSERT INTO orders SELECT * FROM orders_tmp');
$this->db->query('UNLOCK TABLES'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:19:47.527

要在无法进行并发插入时对表 real_table 执行许多 INSERT 和 SELECT 操作，您可以将行插入到临时表 temp_table 中，并使用临时表中的行定期更新实际表。这可以通过以下代码完成：

```
mysql> LOCK TABLES real_table WRITE, temp_table WRITE; 
```

请询问它是否不适合您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-28T22:11:51.307

您需要为查询中的*所有*表获取锁，而不仅仅是您正在写入的表。因此，在您的情况下，您还需要对`orders_tmp`.

从文档：

> 需要锁的会话必须在单个 LOCK TABLES 语句中获取它需要的所有锁。在持有如此获得的锁时，**会话只能访问锁定的表**。

此处的文档：[https ://dev.mysql.com/doc/refman/5.5/en/lock-tables.html](https://dev.mysql.com/doc/refman/5.5/en/lock-tables.html)

干杯

# java - 为什么会出现这些 Hazelcast 警告？

> ID：11541173
> 
> 赞同：4
> 
> 时间：2012-07-18T12:17:19.300
> 
> 标签：java, spring, tomcat, hazelcast

我正在使用 Hazelcast 来缓存 JMS 主题。

在某种程度上，一切都很好。运行大约 30-40 分钟后，我开始得到：

```
WARNING: [192.168.3.102]:5701 [devGroup] RedoLog{key=Data{partitionHash=-1465305045} size= 10, operation=CONCURRENT_MAP_PUT_IF_ABSENT, target=Address[192.168.3.102]:5701, targetConnected=false, redoCount=910, migrating=null
partition=Partition [186]{
0:Address[192.168.3.102]:5701
}
} 
```

据我从开发论坛中了解到，这些是重做警告，这意味着 Hazelcast 无法连接到指定的实例`target=Address[192.168.3.102]:5701`来分发缓存。

然而奇怪的是，我的配置只有一个节点，即当前服务器实例：

```
INFO: [192.168.3.102]:5701 [devGroup] 
Members [1] {
    Member [192.168.3.102]:5701 this
} 
```

我正在使用spring来配置它：

```
<hz:hazelcast id="hazelcastInstance">
    <hz:config>
        <hz:group
                name="devGroup"
                password="pass"/>
        <hz:properties>
            <hz:property name="hazelcast.merge.first.run.delay.seconds">5</hz:property>
            <hz:property name="hazelcast.merge.next.run.delay.seconds">5</hz:property>
        </hz:properties>
        <hz:network port="5701" port-auto-increment="true">
            <hz:join>
                <hz:multicast enabled="false" />    
                <hz:tcp-ip enabled="true">
                    <hz:members>192.168.3.102</hz:members>
                </hz:tcp-ip>
            </hz:join>
            <hz:symmetric-encryption enabled="true"
                                     algorithm="PBEWithMD5AndDES"
                                     salt="thesalt"
                                     password="thepass"
                                     iteration-count="19"/>
            <hz:asymmetric-encryption enabled="false"
                                      key-password="thekeypass"
                                      key-alias="local"
                                      store-type="JKS"
                                      store-password="thestorepass"
                                      store-path="keystore"/>
        </hz:network>
    </hz:config>
</hz:hazelcast> 
```

我正在使用 Hazelcast 2.1、Spring 3.1 和 Tomcat 7

那么有人知道我为什么会收到警告吗？

谢谢，

* * *

要回答评论：

我这样使用它：

```
final ConcurrentMap<K, V> cachedMap = getHazelcast().getMap(region);
cachedMap.putIfAbsent(key, value); 
```

该`getHazelcast()`方法通过spring返回注入`HazelcastInstance`的（上面配置中的那个，我检查了bean id，看起来没问题）。

* * *

更新 2。

以编程方式添加的地图上有一个最大尺寸：

```
final MapConfig mapConfig = hazelcast.getConfig().getMapConfig(region);

.... val is calculated here ....

mapConfig.getMaxSizeConfig().setSize(val); 
```

`val`不能低于 25000

但是，我尝试过没有大小配置，但仍然收到警告。

我也用来`map.values(SqlPredicate(""))`按日期获取值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:10:42.443

如果`max-size`为映射定义，`put`映射到达后的操作`max-size`将进入`redo`循环，直到映射大小减小到最大大小以下才能插入新条目。

您应该从地图中删除一些值，或者您应该为该地图定义某种驱逐。我的意思是您可以定义以下一项或多项；

*   设置一个`eviction-policy`和`eviction-percentage`
*   设置一个`time-to-live-seconds`
*   设置一个`max-idle-seconds`

有关更多信息，请参阅[Hazelcast 地图驱逐](http://hazelcast.com/docs/2.1/manual/single_html/#MapEviction)

# java - 在 CMIS 中创建文档

> ID：11541174
> 
> 赞同：0
> 
> 时间：2012-07-18T12:17:23.130
> 
> 标签：java, cmis

您能否告诉我是否有可能创建父文档是另一个文档。

```
ObjectId parentId = session.createObjectId(someDocumentStringId);
session.createDocument(properties, parentId, stream, VersioningState.None); 
```

现在我得到错误：**该对象的存储库不支持操作！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:26:30.783

文档不是 CMIS 中的容器。只有文件夹可以是文档的父级。

查看 CMIS 关系。他们可能会解决您的问题。

# vba - 复制当前工作表中的所有可见行并将其粘贴到另一个工作表

> ID：11541186
> 
> 赞同：0
> 
> 时间：2012-07-18T12:17:56.363
> 
> 标签：vba, excel

我有一张表，我在上面创建了一个带有过滤器集的列表。当我从该列表中选择一些值时，某些值会显示（可见），而其余的则被隐藏。我只想将该工作表中的所有可见数据（包括所有可见行）复制到另一个工作簿。我使用了一些代码，但它只选择工作表的第一个单元格，我需要将所有可见行复制到另一个工作簿。

```
Range("A1").Select
Do
ActiveCell.offset(1,0).Select
Loop While ActiveCell.EntireRow.Hidden = True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:55:20.363

试试这个

```
'~~> Remove any filters
ActiveSheet.AutoFilterMode = False

'~~> Filter, offset(to exclude headers)
With rRange
    .AutoFilter Field:=lCol, Criteria1:=strCriteria
    .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow.Copy
    '
    '~~> Do whatever you want to do witht he copied rows
    '
End With

'~~> Remove any filters
ActiveSheet.AutoFilterMode = False 
```

1.  `rRange`自动过滤器范围在哪里
2.  `lCol`相关列在哪里。
3.  `strCriteria`自动筛选条件在哪里

# openssl - 根据模数和指数创建 rsa 公钥

> ID：11541192
> 
> 赞同：13
> 
> 时间：2012-07-18T12:18:13.530
> 
> 标签：openssl, rsa

我想验证 RSA 签名。我有要验证的数据、签名和模数和指数形式的公钥。我想使用 openssl 进行验证。可能吗？我知道我可以使用`openssl rsautl -verify -in sig -inkey key.pem`，但我不知道如何（使用 openssl）创建一个只有模数和指数的公钥。

也许其他想法如何检查这个签名（除了编写一些程序）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-04-06T10:23:05.437

为了生成 PEM 格式的 RSA 公钥以用于`openssl`，您可以按照以下步骤操作。

***创建 ASN1 定义文件***

修改以下模板以包含您的模数和指数

```
# Start with a SEQUENCE
asn1=SEQUENCE:pubkeyinfo

# pubkeyinfo contains an algorithm identifier and the public key wrapped
# in a BIT STRING
[pubkeyinfo]
algorithm=SEQUENCE:rsa_alg
pubkey=BITWRAP,SEQUENCE:rsapubkey

# algorithm ID for RSA is just an OID and a NULL
[rsa_alg]
algorithm=OID:rsaEncryption
parameter=NULL

# Actual public key: modulus and exponent
[rsapubkey]
n=INTEGER:0x%%MODULUS%%

e=INTEGER:0x%%EXPONENT%% 
```

除了编辑，您可能还想使用 sed 编写脚本

```
sed -i "s/%%MODULUS%%/$(xxd -ps -c 256 mymodulus.bin)/" def.asn1 
```

请注意，`-c 256`应根据您的密钥长度（以字节为单位）进行选择。

您可以对指数使用类似的命令。

***生成您的 RSA 密钥***

使用以下 openssl 命令。这将为您提供一个 DER 编码的 RSA 密钥。

```
openssl asn1parse -genconf def.asn1 -out pubkey.der -noout 
```

然后将其转换为 PEM 密钥

```
openssl rsa -in pubkey.der -inform der -pubin -out pubkey.pem 
```

***使用您的密钥进行验证***

您可以使用`openssl dgst -verify`或`openssl rsautl -verify`

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-05-30T07:52:18.790

检查手册页应该给你下面

```
 # generate private key
 openssl genrsa > key.priv

 # use it to sign something
 echo "Dirk should be given $10" | openssl rsautl -inkey key.priv -sign > msg.sig

 # create a pub key (modules, exp) from the private key
 openssl rsa -pubout < key.priv > key.pub

 # use that to verify the signature.
 openssl rsautl -in msg.sig -verify -inkey key.pub -pubin 
```

所有这一切都假设你想要原始密钥。如果我理解您在下方的评论 - 您似乎没有正常格式的模块/exp。因此，您首先必须将其打包在 ASN.1 中，以便与常用工具一起使用。

您必须为此编写一些 c/java/etc 代码。一个简单的方法是使用 openssl 库；并填写 RSA * 结构。

# objective-c - 哪个 UIView 在顶部

> ID：11541199
> 
> 赞同：1
> 
> 时间：2012-07-18T12:19:19.247
> 
> 标签：objective-c, uiview

在我的程序中有一个`MainView`，并且在程序中用户可以添加一些`subView`. 为了处理它们，我想知道`subView`现在哪些显示在顶层。

`subView`注意：除非用户想要，否则我不会删除s。并且`subview`s 的大小不同，可能有重叠或没有重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:23:07.070

> 子视图
> 
> 接收者的直接子视图。（只读）
> 
> @property(nonatomic, readonly, copy) NSArray *subviews
> 
> 您可以使用此属性来检索与您的自定义视图层次结构关联的子视图。数组中子视图的顺序反映了它们在屏幕上的可见顺序，索引 0 处的视图是最后面的视图。

来自[UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:25:53.263

`UIView`声明一个包含其子视图的属性：

`@property(nonatomic, readonly, copy) NSArray *subviews`

当您添加子视图时，它们会添加到该数组中。具有最高索引的子视图显示在顶部。

[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)中有许多方法可用于操作子视图，而无需直接使用数组：

```
– addSubview:
– bringSubviewToFront:
– sendSubviewToBack:
– removeFromSuperview
– insertSubview:atIndex:
– insertSubview:aboveSubview:
– insertSubview:belowSubview:
– exchangeSubviewAtIndex:withSubviewAtIndex:
– isDescendantOfView: 
```

# javascript - JQuery 无法从单独的 javascript 文件中找到变量

> ID：11541205
> 
> 赞同：0
> 
> 时间：2012-07-18T12:19:43.387
> 
> 标签：javascript, jquery, variables, undefined

我正在使用 cakephp 框架，并创建了 2 个单独的 javascript 文件并将它们放入我的 webroot/js 文件夹中。第一个 javascript 文件包含模式对话框变量，其中包含对话框的设置。第二个 javascript 文件包含其他单击事件处理程序，它们将数据发布到操作，然后打开对话框。

我遇到的问题是第二个文件使用 $ *variablename*从第一个文件调用一个变量，并且我收到一条错误消息，指出未定义 varaibleName。

下面的一些代码向您展示了我的意思。从第一个文件：

```
var $editSel = $("#editSel_dialog").dialog(
{
    autoOpen: false,
    height: 530,
    width: 800,
    resizable: true,
    modal: true,
    buttons:
    {
        "Cancel": function()
        {
            $(this).dialog("close");
        }
    }
}); 
```

从第二个文件：

```
$('.neweditSel_dialog').live('click', function()
{
    $.ajaxSetup({ async: false });

    var selected = [];

    $("#[id*=LocalClocks]").each(function()
    {
        if(false != $(this).is(':checked'))
        {
            var string = $(this).attr('id').replace('LocalClocks', '');
            string = string.substring(10);
            selected.push(string);
        }
    });

    if(0 === selected.length)
    {
        $selError.dialog('open');
        $selError.text('No Local Clocks Were Selected')
    }
    else
    {
        $.post('/LocalClocks/editSelected', { "data[Session][selected]": selected }, function(data)
        {
        });
        $editSel.load($(this).attr('href'), function ()
        {
            $editSel.dialog('open');
        });
    }
    return false;
}); 
```

这在我使用 jquery-1.4.2.min.js 时有效，但我现在使用的是 jquery1.7。我还最终将包含所有变量的第一个文件放入其中，`$(document).ready(function(){});` 我尝试将第二个文件放入 document.ready() 函数中，但这没有任何区别。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:31:18.760

您正在处理范围内的问题。在 JavaScript 中：

```
function foo() {
    var greet = "hi";
}

function bar() {
    console.log(greet); // will throw error
} 
```

然而：

```
var greet;
function foo() {
    greet = "hi";
}

function bar() {
    console.log(greet); // will log "hi"
} 
```

您必须在需要访问它的两个函数的共同父级中定义您的变量。不幸的是，由于您没有使用任何建模约定或框架，那就是窗口对象（[为什么全局变量不好？](http://net.tutsplus.com/tutorials/javascript-ajax/the-10-javascript-mistakes-youre-making/)）。

因此，您必须在两个s`var $whateveryouneed` *之前*和*之外定义。*`$(document).ready`

另外，保持`declaration`和`definition`分开。您的定义实例化了一个 jQuery 对象，因此您必须将其封装在一个`$(document).ready()`（`$(function() {})`改为使用）中：

```
var $editSel;
$(function () {
    $editSel = $("#editSel_dialog").dialog(
    {
        autoOpen: false,
        height: 530,
        width: 800,
        resizable: true,
        modal: true,
        buttons:
        {
            "Cancel": function()
            {
                $(this).dialog("close");
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:23:24.137

我认为您不能保证触发处理程序的顺序，这意味着准备好的文档可能会以与您预期不同的顺序触发。您尝试在第二个文件中访问的变量是全局变量吗？尝试考虑您的变量范围，因为我认为这是问题所在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:45:38.340

您不能保证一个文件会在另一个文件之前加载。而且您不能保证一个文件中的 document.ready 会在另一个文件之前触发。

因此，我建议您将代码包装在函数中，并按照您需要的顺序在单个 document.ready 处理程序中调用它们。

例如：

```
function initVariables(){
    window.$editSel = ... // your code from the first file here
}

function initHandlers(){
    // your code from the second file here
} 
```

进而：

```
$(document).ready(function() {
    initVariables();
    initHandlers();
}); 
```

You'll notice that I used the global `window` object to expose your variable. It would be even better if you used a common namespace for them.

# android - Android Eclipse AsyncTask - 但结果为空 - 有人可以看看

> ID：11541209
> 
> 赞同：0
> 
> 时间：2012-07-18T12:19:53.277
> 
> 标签：android, eclipse, android-asynctask

很抱歉让我感到痛苦，但我已经用这个太久了，我相信这很容易，但我累了，看不到它。一切正常，但“字符串结果”为空

```
package com.example.me;

import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.widget.Button;
import android.widget.TextView;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;

public class MainActivity extends Activity {

    Button btnLoginButton;
    TextView tmpError, tmpUsername, tmpPassword;
    ArrayList<NameValuePair> postParameters;
    String response;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tmpError = (TextView) findViewById(R.id.lblMessage);
        tmpUsername = (TextView) findViewById(R.id.txtUsername);  
        tmpPassword = (TextView) findViewById(R.id.txtPassword);  

        addListenerOnButton();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void addListenerOnButton() {

        btnLoginButton = (Button) findViewById(R.id.btnLogin); 
        btnLoginButton.setOnClickListener(new OnClickListener() {
            public void onClick(View arg) {
                try{
                    triggerClick();
                }
                catch (Exception e) {         
                    tmpError.setText("[]" + e.toString());  
                }
            } 
        });
    }

    private void triggerClick() {  

        postParameters = new ArrayList<NameValuePair>();  
        postParameters.add(new BasicNameValuePair("username", tmpUsername.getText().toString()));  
        postParameters.add(new BasicNameValuePair("password", tmpPassword.getText().toString()));  

        final class HttpTask
                extends
                AsyncTask<String/* Param */, Boolean /* Progress */, String /* Result */> {

            @Override
            protected String doInBackground(String... params) {
                publishProgress(true);
                try {
                response = CustomHttpClient.executeHttpPost("http://some.url/thatiknoworks/check.php", postParameters);
                            return response;
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }    

            }

            @Override
            protected void onPostExecute(String result) {
                publishProgress(false);

                result = result.replaceAll("\\s+","");  

                if(result.equals("1")) { 
                    tmpError.setText("Correct");
                }
                else {  
                    tmpError.setText("Sorry!!("+result+")");
                }
            }

        }       

        new HttpTask().execute();
    }  
} 
```

一次又一次地返回一个空的“结果”字符串:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:21:07.273

因为在`doInBackground()`您返回空字符串时，您应该这样做：

```
protected String doInBackground(String... params) {
            publishProgress(true);
            try {
                 return CustomHttpClient.executeHttpPost("http://some.url/thatiknoworks/check.php", postParameters);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                return "";
            }    

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:21:29.173

字符串结果为空，因为您从`doInBackground()`.

```
return ""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:30:17.420

请声明`String response;`为全局变量。

```
protected String doInBackground(String... params) 
 {
   publishProgress(true);
   try 
   {
   response=CustomHttpClient.executeHttpPost("http://some.url/thatiknoworks/check.php", postParameters);
   return response;
   } 
   catch (Exception e) 
   {
      e.printStackTrace();
   }    
 } 
```

# xamarin.ios - 在不同视图上旋转 iPad 屏幕方向

> ID：11541211
> 
> 赞同：3
> 
> 时间：2012-07-18T12:19:56.570
> 
> 标签：xamarin.ios

我有一个以纵向模式打开的 iPad 应用程序，但是当我切换到另一个视图时，我需要将方向强制为横向，以便用户意识到他们需要将屏幕方向物理移动到横向，然后当他们离开这个视图时我需要强制方向回到纵向。

我可以看到 ShouldAutorotateToInterfaceOrientation(UIInterfaceOrientation toInterfaceOrientation) 如果相信正确，它只会限制视图可能的方向，但将其设置为一个方向（例如 UIInterfaceOrientation.LandscapeRight）不会强制改变方向。

我已经看到了一些关于使用 this.View.Transform.Rotate(...) 强制视图旋转的其他建议，但似乎对我不起作用。

只是想知道是否有人有任何建议或能够指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:42:38.860

首先，设置`ShouldAutorotateToInterfaceOrientation`为仅支持横向。然后使用这个技巧来强制改变方向：

```
var c = new UIViewController ();
PresentModalViewController (c, false);
DismissModalViewControllerAnimated (false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T16:21:19.663

您的视图是否都显示在单个 uinavigationcontroller 中？

如果是，那么恐怕答案是您无法实现您想要的 - 请参阅完整的解释，包括指向 Apple 开发人员文档的链接：[How to constrain autorotation to a single direction for some views, while允许对他人的所有方向？](https://stackoverflow.com/questions/5030315/how-to-constrain-autorotation-to-a-single-orientation-for-some-views-while-allo)

如果您确实想实现您正在寻找的效果，那么可能会切换到对所有子视图使用其他“父级” - 例如以模态方式显示它们？

# android - 网站不显示在 Android 模拟器上

> ID：11541213
> 
> 赞同：1
> 
> 时间：2012-07-18T12:20:00.520
> 
> 标签：android, android-emulator

我是 Android 开发新手，正在尝试创建一个 Web 应用程序。我想检查网页在我的网络应用程序中的外观，但它不会在模拟器上显示（无论是本地主机还是网络）。当我将手机连接到wifi并在我的工作场所检查时，网址（http://48.128 ...）在手机上工作。有任何想法吗 ？

这是我迄今为止尝试过的（[http://www.vtgroup.com/index.html#LocalBrowser](http://www.vtgroup.com/index.html#LocalBrowser)）

# iphone - 为什么加载 TableViewcontroller 时出现此错误

> ID：11541215
> 
> 赞同：0
> 
> 时间：2012-07-18T12:20:11.313
> 
> 标签：iphone, objective-c, ios, uitableview

我正在使用 ARC 和故事板为 iOS5 开发一个项目。

我有一个带有注释的地图视图，其中有一个显示按钮转到我的 DetailView（这是一个 TableViewController），但是当它应该被加载时，我收到以下错误：

```
2012-07-18 14:09:43.328 Zone-It-new[1966:707] Loadded the view for MapViewController
2012-07-18 14:11:40.467 Zone-It-new[1966:707] -[UILabel copyWithZone:]: unrecognized selector sent to instance 0x138470
2012-07-18 14:11:40.470 Zone-It-new[1966:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UILabel copyWithZone:]: unrecognized selector sent to instance 0x138470'
*** First throw call stack:
(0x3748488f 0x35189259 0x37487a9b 0x37486915 0x373e1650 0x311997ef 0x31195059 0x31194711 0x3119466b 0x311945e7 0x31284f63 0x311979bb 0x311973ad 0x31191b8b 0x311917d5 0x9386d 0x3120a93d 0x31284627 0x37cf5933 0x37458a33 0x37458699 0x3745726f 0x373da4a5 0x373da36d 0x33b99439 0x31186cd5 0x924b3 0x92458)
terminate called throwing an exception(lldb) 
```

这是我的 detailviewcontroller.h：

```
#import <UIKit/UIKit.h>
#import "Event.h"

@interface DetailViewController :  UITableViewController <UITableViewDelegate, UITableViewDataSource>{
     IBOutlet UILabel *title;
     IBOutlet UILabel *description;
     IBOutlet UILabel *zone;
     IBOutlet UILabel *gemeente;
     IBOutlet UILabel *plaats;
     IBOutlet UILabel *deelnemers;
     IBOutlet UILabel *start;
     IBOutlet UILabel *einde;
     IBOutlet UILabel *id_nr;
}

@property (nonatomic) Event *event;
@property (nonatomic) IBOutlet UILabel *title, *zone, *description, *gemeente, *deelnemers, *start, *einde, *plaats, *id_nr;
@end 
```

DetailViewController.m 的一部分

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [[self navigationController] setNavigationBarHidden:NO animated:YES];

    /*title.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin;*/
    [title lineBreakMode];
    [title setText:[event title]];
    [title sizeToFit];

    gemeente.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin;
    [title lineBreakMode];
    [gemeente setText:[event gemeente]];
} 
```

这是通过 ListView 创建视图的地方：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"detail"];
    SingletonManager *sharedManager = [SingletonManager sharedManager];

    [detail setEvent:[sharedManager.eventsManager objectAtIndex:indexPath.row]];

    [self.navigationController pushViewController:detail animated:YES];
} 
```

事件.h

```
#import <Foundation/Foundation.h>
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>

@interface Event : NSObject <MKAnnotation>

// required property from mkanotation
@property (nonatomic) CLLocationCoordinate2D coordinate;

// Optional
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *description;
@property (nonatomic, copy) NSString *zone;
@property (nonatomic, assign) NSString *gemeente;
@property (nonatomic, copy) NSString *straat;
@property (nonatomic, assign) int deelnemers;
@property (nonatomic, copy) NSDate *start;
@property (nonatomic, copy) NSDate *einde;
@property (nonatomic, copy) NSString *plaats;
@property (nonatomic, readonly) int id_nr;
@property (nonatomic, assign) int huisnummer;

@end 
```

----- 更多调试信息-----

使用异常断点时，它在此处停止：

```
[self.navigationController pushViewController:detail animated:YES]; 
```

安慰：

```
2012-07-18 15:53:46.691 Zone-It-new[179:707] Loadded the view for MapViewController 
2012-07-18 15:54:01.940 Zone-It-new[179:707] -[UILabel copyWithZone:]: unrecognized selector sent to instance 0x170bb0 
(lldb) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:27:56.567

您似乎在代码中的某个地方尝试复制 UILabel。UIView 子类不遵守`NSCopying`协议，因此尝试复制任何 UIView 都会导致异常（除非它是实现协议的子类）。我会搜索您的代码库以检查副本发生的位置。如果您找不到任何明确复制 UILabel 的地方，请检查集合类。一些集合类将复制值（NSDictionary 使用键执行此操作，因此如果您尝试使用 UILabel 作为 NSDictionary 的键，则会收到错误消息）。还要检查你的属性。您在显示的代码中显示的内容很好，但是如果您`copy`在协议中为 UILabel 指定 a ，也会出现错误。

您还应该尝试标准调试技术，例如为所有异常设置断点。（转到断点导航窗格，在底部单击加号）。这应该可以帮助您通过中断有问题的代码行来找到问题。请注意，如果复制发生在 Apple 的代码中（例如设置 NSDictionary 键），则断点可能不会在您的代码中中断。

**更新**

鉴于您的新代码，我建议尝试以下操作：

1.  尝试在代码中找到复制“任何内容”的任何位置。显然你没有明确地复制 UILabel 但也许你通过在某处传递错误的参数而意外地复制了它。例如：`copy`从您的事件属性中删除所有关键字并再次测试。无论如何，您可能不需要`copy`为 NSString 指定，但我们在这里所做的是确保您不会意外地将 UILabel 设置为这些属性之一。如果代码没有中断，您没有修复它，但现在您知道问题出在哪里（尝试将 UILabel 分配给错误的属性）。
2.  开始注释各种代码块，一次一个，以找出问题所在。例如，注释掉您的整个`viewDidLoad`方法并测试您的代码。如果它有效，您就知道问题出在那儿。所以取消注释部分方法并再次测试。不断重复，直到你缩小了问题的范围。如果它仍然中断`viewDidLoad`，请取消注释并尝试不同的代码块。从本质上讲，您是在扮演侦探的角色，试图找出有问题的代码行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:01:44.733

解决此问题的方法是重命名`title`. `UIViewController`这是因为`UIViewController`已经定义了`NSString *`一个名称为 的属性`title`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:27:27.570

这通常意味着您试图将对象分配给无法处理它的方法，而不是该对象的属性。例如，尝试将 UILabel 设置为对象而不是该对象的字符串属性。

我的猜测是这条线： `[gemeente setText:[event gemeente]];`

这里也可能存在问题：

```
@property (nonatomic) Event *event; 
```

您尚未设置`Event *event`为实例变量，但将其作为一个引用。尝试`self.event`访问上面的事件。

# android - 在 Sencha touch 2 中播放视频文件

> ID：11541216
> 
> 赞同：0
> 
> 时间：2012-07-18T12:20:14.900
> 
> 标签：android, extjs, sencha-touch-2

```
 Ext.define('Video.view.video', {
        extend: 'Ext.Container',

        requires: [
            'Ext.Video'
        ],
        config: {
            layout: 'fit',
            items: [{
                xtype: 'video',
                url: ['aa.mp4'],
                loop: true,
                posterUrl: 'resources/images/cover.jpg'
            }]
        }
    }); 
```

> 这是我的代码，但不显示视频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:06:29.690

请@Amit kumar 你能尝试这样的事情吗？

```
Ext.define('myapp.view.Video', {
   extend: 'Ext.Container',
   xtype: 'myvideo',

    requires: [
        'Ext.Video'
    ],

    config: {
        layout: 'fit',

        items: [
            {
                xtype: 'video',
                enableControls: false,
                x : 600,
                y : 300,
                width : 300,
                height   : 250,
                url: 'app/images/VID.3GP',
                loop: true,
                posterUrl: 'app/images/transfers.png'
            },
        ]
    }
}); 
```

**我希望这有帮助。:)**

![在此处输入图像描述](../Images/e9337b6600e57f4a7f5d5a58ba00cd29.png)

# java - .class 预期错误

> ID：11541217
> 
> 赞同：2
> 
> 时间：2012-07-18T12:20:17.570
> 
> 标签：java

我正在尝试编写一些代码来打印出由'*'组成的正方形。问题是我在变量“int stars”之后收到一条错误消息“.class expected”。我不确定这意味着什么。

```
class Main
{
public static void main( String args[] )
{

int sqaure = 5;
int line = 1;

while ( line <= sqaure )

int stars = 1;
while ( stars <= square )
{ 
System.out.print( "*" );
stars = stars + 1;
}
System.out.println();
line = line + 1;
}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T12:21:18.140

现在更好了

忘记了

```
{} 
```

后

```
while ( line <= sqaure ) 
```

而且你应该让星星声明更接近开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:22:01.953

虽然语法是

```
while(boolean)
{
//Your code
} 
```

`while ( line <= sqaure ) { //yourcode }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:33:01.537

您将问题更改为完全不同的问题。这并不是真正的 SO 工作方式，因为已经在这里的答案不再是您当前问题的答案。

`sqaure`现在您在变量名 ( vs `square`)中有错字。

请使用 IDE，因为它可以帮助您防止这些讨厌的小错误，并可以帮助您学习 Java 编程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T12:37:55.773

```
class Main
{
    public static void main( String args[] )
    {

        int square = 5;
        int line = 1;
        int stars = 1;
        while ( line <= square ){
            while ( stars <= square ){ 
                System.out.print( "*" );
                stars = stars + 1;
            }
            System.out.println();
            line = line + 1;
         }
    }

} 
```

download eclipse or NetBeans IDE from their sites.. If you are working on Windows even Notepad++ may be helpful (if you are a beginner)

# linux-kernel - 比大黄蜂更好的解决方案？

> ID：11541224
> 
> 赞同：-1
> 
> 时间：2012-07-18T12:20:38.080
> 
> 标签：linux-kernel, ubuntu-12.04, overheating

我正在使用 ubuntu 12.04 LTS 内核 3.2.x

我遇到了 nvidia 显卡过热问题。

我安装了 bumblebee 项目作为临时解决方案。因此，我必须使用 optirun 手动打开图形支持。

sudo add-apt-repository ppa:bumblebee/stable

sudo apt-get 更新

sudo apt-get install bumblebee bumblebee-nvidia

是否有一些调整可以避免发热并能够像我们在 Windows 中那样使用显卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:33:24.417

大黄蜂是调整。

NVIDIA 选择不支持它，所以很遗憾，这是你目前所能得到的最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T14:35:04.533

**从 BIOS 中关闭显卡**
我也在使用 ubutnu 14.04LTS。对于那些有两个图形（集成和专用，如 nvidia）的笔记本电脑，几乎所有 linux 操作系统都有发热问题。
因此，
**解决方案是从 BIOS 设置中关闭显卡。** 这对我有用，可以提供近 3.5 小时的备用电池，并且不再加热。

告诉我它是否适用于你。

# c - C中的运行时条件typedef

> ID：11541226
> 
> 赞同：2
> 
> 时间：2012-07-18T12:20:39.420
> 
> 标签：c, types, typedef

我知道这个问题有一个 C++ 版本，但是我使用的是标准类型定义而不是模板。

我编写了一个适用于 16 位 wav 文件的程序。它通过将每个样本加载到一个短片中来做到这一点。然后程序对短路进行算术运算。

我现在正在修改程序，以便它可以同时使用 16 位和 32 位 wav。我希望做一个有条件的typedef，即对16 位使用short，对32 位使用int。但后来我意识到，如果编译器事先不知道变量的类型是什么，它可能不会编译代码。

所以我尝试测试以下代码：

```
#include <stdio.h>

int
main()
{
  int i;
  scanf("%i", &i);

  typedef short test;

  if(i == 1)
    typedef short sample;
  else 
    typedef int sample;

  return 0;
} 
```

并得到以下编译器错误：

```
dt.c: In function ‘main’:
dt.c:12:5: error: expected expression before ‘typedef’
dt.c:14:5: error: expected expression before ‘typedef’ 
```

这是否意味着 C 中的运行时条件类型定义是不可能的？

[开放式问题：]如果没有，你们将如何处理这样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:25:12.623

`typedef`是一个编译器特性，你不能在运行时应用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T12:29:41.027

程序中的所有类型在编译时都必须是已知的。

在 C++ 中，您可以为模板编译代码`short`并`int`使用模板；在 C 中，您可以使用宏（特别是 X 宏）来执行此操作。

将您的计算代码放在一个名为 eg 的单独文件`dt.tmpl.c`中，然后`dt.c`写入：

```
#define sample int
#include "dt.tmpl.c"

#define sample short
#include "dt.tmpl.c" 
```

然后，您的`dt.tmpl.c`代码可以`sample`用作预处理器标记来命名类型并粘贴到函数名称中，例如：

```
#define PASTE(name, type) name ## _ ## type
#define FUNCTION_NAME(name, type) PASTE(name, type)

sample FUNCTION_NAME(my_calculation, sample)(sample i) {
    return i * 2;
} 
```

这将产生两个函数`int my_calculation_int(int i)`，`short my_calculation_short(short i)`然后您可以在其他地方使用它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T12:28:47.860

首先，typedef 不是一种新类型，它是一个别名或缩写形式，使事情更方便（尤其是在使用函数指针时）

C 是一种静态语言，不能在运行时创建类型，需要在编译/链接时解析类型。

好吧，如果可能的话，Windows API 会小得多:)

在 Windows 中，它们对于大多数每个 API 调用都有两个版本的函数和一个决定使用哪个版本的定义。

例如

```
#ifndef UNICODE
#define myfunction _myfunctionA(TCHAR* p);
#else
#define myfunction _myfunctionW(TCHAR* p);
#endif 
```

但同样，类型是在**编译**时决定的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T13:22:59.683

另一方面，您`typedef`只能在某些范围内使用。

```
int 
main(void) {
    if (1) {
        typedef short sample;
        sample n; // OK
    }
    sample u; // ERROR
    return 0;   
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T12:30:37.213

C（和 C++）中的类型在编译时是固定的；“运行时`typedef`”的概念在 C 中没有意义。

但是，您的问题可以小心解决。您将定义两组函数（和类型），一组处理 16 位`.wav`文件，一组处理 32 位`.wav`文件。这些将在编译时定义，类型的大小将在编译时固定，但是这两个代码都将在可执行文件中，您将能够根据运行选择要执行的函数集-时间信息（要求您处理或生成的文件类型）。

你的两组函数应该是对称的。您也许可以使用一些“类似模板”的机制，以便将同一个文件编译两次，一次用于 32 位代码，一次用于 16 位代码，以确保函数名称的更改一致。

# plugins - TortoiseSVN 插件帮助“无法启动问题跟踪器 COM 提供程序 %plugin%”

> ID：11541230
> 
> 赞同：0
> 
> 时间：2012-07-18T12:21:19.077
> 
> 标签：plugins, tortoisesvn

我有一个完整的 TortoiseSVN(x86) 插件。它做了我想做的一切，但我无法让它在 x64 机器上工作。当您单击按钮时，它会正确安装，注册，出现......但是当您点击提交时，这就是我得到的输出：

> 操作路径
> 命令提交已
> 修改 C:\Test2\README.txt
> 发送内容 C:\Test2\README.txt
> 完成时修订：17
> 错误无法启动问题跟踪器 COM 提供程序“SCRFixerPlugIn”。
> 错误 无效的指针
> 错误 对象引用未设置为对象的实例。

我找不到这些错误的具体参考。再次，它在 32 位上运行良好......但我无法让它在 64 位上正常工作。

感谢您的任何帮助！

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:23:36.417

我想通了……这是由于 OnCommitFinished 中的返回不当所致。以前的程序员留下了一个函数，它调用了一个在 32 位 dll 上工作的过时函数。哎呀！如果其他人有问题，希望这会有所帮助。

# html - 导航下拉菜单未使用简单的 CSS 和 HTML 显示

> ID：11541231
> 
> 赞同：0
> 
> 时间：2012-07-18T12:21:23.933
> 
> 标签：html, css

我有一个用 css 和普通 HTMl 制作的下拉菜单列表。它工作正常，但它在我的图像滑块下滚动，当我将鼠标悬停在我的任何菜单上时，我可以在菜单的一部分上看到。我认为 z-index 属性在某处丢失。但是我在我的 ul li 标签中使用了但没有用。

html

```
<ul id="menu">
                  <li><a href="">Home</a></li>
                  <li><a href="">About Us</a>
                    <ul>
                    <li><a href="">The Team</a></li>
                    <li><a href="">History</a></li>
                    <li><a href="">Vision</a></li>
                    </ul>
                  </li>
                  <li><a href="">Products</a>
                    <ul>
                    <li><a href="">Cozy Couch</a></li>
                    <li><a href="">Great Table</a></li>
                    <li><a href="">Small Chair</a></li>
                    <li><a href="">Shiny Shelf</a></li>
                    <li><a href="">Invisible Nothing</a></li>
                    </ul>
                  </li>
                  <li><a href="">Contact</a>
                    <ul>
                    <li><a href="">Online</a></li>
                    <li><a href="">Right Here</a></li>
                    <li><a href="">Somewhere Else</a></li>
                    </ul>
                  </li>
                </ul> 
```

css

```
ul {
  font-family: Arial, Verdana;
  font-size: 14px;
  margin: 0;
  padding: 0;
  list-style: none;
}
ul li {
  display: block;
  position: relative;
  float: left;
}
li ul { display: none; }
ul li a {
  display: block;
  text-decoration: none;
  color: #ffffff;
  border-top: 1px solid #ffffff;
  padding: 5px 15px 5px 15px;
  background: #2C5463;
  margin-left: 1px;
  white-space: nowrap;
}
ul li a:hover { background: #617F8A; }
li:hover ul {
  display: block;
  position: absolute;
}
li:hover li {
  float: none;
  font-size: 11px;
}
li:hover a { background: #617F8A; }
li:hover li a:hover { background: #95A9B1; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:33:10.817

图像滑块具有来自 java 脚本的 z-index 属性。所以它会优先考虑。您还需要为导航提供 z-index。

你的图像滑块有 jQuery 吗？比你必须把 z-index 放在 li ul`li{z-index:999px;}`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T18:10:49.557

如果将 z-index 添加到以下类。

```
li:hover ul {
  display: block;
  position: absolute;
    z-index:1000;
} 
```

还要确保菜单的 z-index 具有更高的属性。

# google-api - google-api-javascript-client：如何使用 Drive API 获取文件内容？

> ID：11541232
> 
> 赞同：4
> 
> 时间：2012-07-18T12:21:25.963
> 
> 标签：google-api, google-drive-api

首先，如果有一个问题/答案已经解决了我的问题，那么我真诚地为创建一个新问题而道歉。但是，我已经搜索了3天，还没有找到答案......

我的问题是，我一生都无法弄清楚如何提取文件（任何文件）的内容。通过阅读文档，我发现我返回的文件资源对象应该有一个名为“downloadUrl”的属性，并且我应该能够从中访问文件内容。

返回给我的所有文件资源对象（通过 gapi.client.request）都没有此字段/属性。下面是我用来获取文件的函数。有人可以帮我指出正确的方向吗？我必须在星期一之前完成这个演示，我已经坚持了 2 天......

这是我的 get 函数的代码：

```
Client.getFileContent = function getFileContent() {
     gapi.client.load('drive', 'v2', function() {
          var request = gapi.client.request({
               path : '/drive/v2/files/1QmaofXyVqnw6ODXHE5KWlUTcWbA9KkLyb-lBdh_FLUs',
               method : 'GET',
               params : {
                    projection: "FULL"
               }
          });
          request.execute(function(response) {
               console.log(response);   
          });
     });
}; 
```

返回给我的文件资源对象没有 downloadUrl 属性。

根据要求，这是我为文本文件返回的响应对象。请注意，我用“fileid”替换了一些 id，以便在此处发布。

```
"kind": "drive#file",
   "id": "fileID",
   "etag": "\"-tJAWr_lbRQU2o8gZ0X7BCBIlVk/MTM0MjYyODQ1MTQ2Nw\"",
   "selfLink": "https://www.googleapis.com/drive/v2/files/fileID",
   "alternateLink": "https://docs.google.com/document/d/fileID/edit",
   "embedLink": "https://docs.google.com/document/d/fileID/preview",
   "thumbnailLink": "https://docs.google.com/feeds/vt?gd=true&id=fileID&v=1&s=AMedNnoAAAAAUAfLhbYIDsNIn40k7DfRYBsrquijmCii&sz=s220",
   "permissionsLink": "https://www.googleapis.com/drive/v2/files/fileID/permissions",
   "title": "Copied filed.txt",
   "mimeType": "application/vnd.google-apps.document",
   "labels": {
    "starred": false,
    "hidden": false,
    "trashed": false,
    "restricted": false,
    "viewed": true
   },
   "createdDate": "2012-07-18T16:20:51.132Z",
   "modifiedDate": "2012-07-18T16:20:51.467Z",
   "modifiedByMeDate": "2012-07-18T16:20:51.467Z",
   "lastViewedByMeDate": "2012-07-18T16:20:51.467Z",
   "parents": [
    {
     "kind": "drive#parentReference",
     "id": "0AAAYYkwdgVqHUk9PVA",
     "selfLink": "https://www.googleapis.com/drive/v2/files/fileID/parents/0AAAYYkwdgVqHUk9PVA",
     "parentLink": "https://www.googleapis.com/drive/v2/files/0AAAYYkwdgVqHUk9PVA",
     "isRoot": true
    }
   ],
   "exportLinks": {
    "application/vnd.oasis.opendocument.text": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=odt",
    "application/msword": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=doc",
    "text/html": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=html",
    "application/rtf": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=rtf",
    "text/plain": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=txt",
    "application/pdf": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=pdf"
   },
   "userPermission": {
    "kind": "drive#permission",
    "etag": "\"-tJAWr_lbRQU2o8gZ0X7BCBIlVk/9STkNeCmz61YXorH3hoJimnEgfM\"",
    "id": "current",
    "role": "owner",
    "type": "user"
   },
   "quotaBytesUsed": "0",
   "ownerNames": [
    "Joshua.morine"
   ],
   "lastModifyingUserName": "Joshua.morine",
   "editable": true,
   "writersCanShare": true
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T13:48:41.247

对于原生 Google 文档（Google 电子表格、演示文稿等），我们不提供 downloadUrl，因为这些文档无法真正下载为原生格式的文件。相反，您必须使用**exportLinks**列表中的 URL 之一，它提供了以几种不同的导出格式下载 Google 文档的 URL。

在您的情况下，可以使用以下 Google 文档：

```
"exportLinks": {
    "application/vnd.oasis.opendocument.text": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=odt",
    "application/msword": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=doc",
    "text/html": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=html",
    "application/rtf": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=rtf",
    "text/plain": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=txt",
    "application/pdf": "https://docs.google.com/feeds/download/documents/export/Export?id=fileID&exportFormat=pdf"
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T19:13:40.247

您正在寻找的元数据功能实际上是：

```
request = gapi.client.drive.files.get({
    'fileId': fileId
}); 
```

这会使用您所指的 downloadUrl 产生结果。然后很容易使用任何 HTTP 请求来获取文件。

# c++ - 将 UI 控件输入的数据值发送到 C++ 函数

> ID：11541236
> 
> 赞同：-1
> 
> 时间：2012-07-18T12:21:40.363
> 
> 标签：c++, sqlite

任何人都可以帮助我如何将 UI 控件输入的数据值发送到 C# 中的 C++ 函数，

## 在 C# 中：

SaveData(txtUsername.value,txtAge.value){ }

我们如何将从 UI 输入的数据发送到 C++ 函数

感谢您，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:04:46.280

如果您调用 SaveData 并将 txtUsername.value 和 txtAge.value 作为 ui 文本框中的值传递，例如：

`SaveData(txtUsername.value,txtAge.value);`

您应该能够执行以下操作将这些值存储到预定义变量中：

```
SaveData(string username, int age)
{
    usernameVar.setValue(username);
    ageVar.setValue(age);
} 
```

# php - 保持两个 mySQL 数据库（在不同位置）同步的策略？

> ID：11541237
> 
> 赞同：4
> 
> 时间：2012-07-18T12:21:42.337
> 
> 标签：php, mysql, database, apache, synchronization

> **可能重复：**
> [哪个是使用mysql实时双向同步动态数据的最佳方法](https://stackoverflow.com/questions/325791/which-is-the-best-way-to-bi-directionally-synchronize-dynamic-data-in-real-time)

我需要建议：

**如何在 2 个位置保持 2 个 mySQL 数据库（相同结构）同步？**

*我在做什么：*
我正在为有两个位置的企业创建一个应用程序。他们需要在数据库中共享/更新信息，但所有者希望它是内部的而不是外部的，因为他担心在互联网中断的情况下能够运行。

*到目前为止我的策略：*
我设置了两台服务器（每个位置一台），每台运行本地 Apache + MySQL。webapp 不能通过互联网访问，只能在本地访问。mySQL 可通过 Internet 通过 SSL 访问（使用复杂的密码）。

本地 webapp 运行并与本地 mySQL 交互以进行读取。对于写入，它先在本地写入，然后再写入远程服务器（写入 2x）。

当记录 ID 可能重复/不同等时，我担心会创建重复/损坏的条目……这就是为什么我不依赖记录 ID，而是依赖我控制的单独唯一编号（不是自动增量） .

底线......这是我经过广泛研究后能想到的最好的。我对吗？或者有人可以提供建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:26:47.983

这称为**复制**，MySQL（与任何成熟的数据库管理系统一样）对其具有原生支持。见：[http ://dev.mysql.com/doc/refman/5.0/en/replication.html](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:52:42.390

您可能正在寻找分布式事务。MySQL 提供 XA 事务支持（有关更多信息，请参阅[他们的文档](http://dev.mysql.com/doc/refman/5.0/en/xa.html)）。

# svn - 如何只允许使用 VisualSVN Server 窃取特定 Active Directory 域组的锁？

> ID：11541239
> 
> 赞同：1
> 
> 时间：2012-07-18T12:21:46.057
> 
> 标签：svn, powershell, active-directory, hook, visualsvn-server

使用[Subversion 的锁定功能](http://www.visualsvn.com/support/svnbook/advanced/locking/)和带有 Active Directory 身份验证（[集成 Windows 身份验证](http://en.wikipedia.org/wiki/Integrated_windows_authentication)或[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)）的 VisualSVN 服务器的开发团队可能需要限制除管理员之外的任何人来[窃取锁](http://www.visualsvn.com/support/svnbook/advanced/locking/#svn.advanced.locking.break-steal)。

这样的任务可以通过[pre-lock hook](http://www.visualsvn.com/support/svnbook/ref/reposhooks/pre-lock/)来完成。但是，由于身份验证依赖于 Active Directory 用户和组，因此编写这样的脚本可能有点棘手。

此外，在某些情况下，某些 AD 用户的操作必须由挂钩脚本根据其 AD 域组成员身份进行不同的处理。

是否有任何示例显示如何使用 Subversion 挂钩检查 AD 域组成员资格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:21:46.057

您可以使用下面提供的示例 PowerShell 预锁定挂钩脚本检查 AD 组成员身份。

*pre-lock.ps1* PowerShell脚本检查用户是否是**管理员**Active Directory 组的成员，如果用户不是该组的成员，则拒绝窃取锁定。

将*pre-lock.bat*和*pre-lock.ps1*放入您的存储库“钩子”文件夹中，例如`C:\Repositories\repository\hooks\`.

***预锁.ps1***

```
# Function check if $user is a member of $group
function Check-GroupMembership
{
  param([string]$group, [string]$user)

  $server = get-content env:COMPUTERNAME
  $query = [ADSI]("WinNT://$server/$group,group")

  $ulist = $query.psbase.invoke("Members") |`
           %{$_.GetType().InvokeMember("Name", 'GetProperty', $null, $_, $null)}

  $ulist -contains $user
}

# Store hook arguments into variables with mnemonic names
$repos     = $args[0]
$path      = $args[1]
$user      = $args[2]
$comment   = $args[3]
$steallock = $args[4]

# Build path to svnlook.exe
$svnlook = "$env:VISUALSVN_SERVER\bin\svnlook.exe"

# Get the lock description
$lockdescr = (&"$svnlook" lock $repos $path)

# Find owner name
foreach ($str in $lockdescr)
{
  if ($str.StartsWith("Owner: "))
  {
    $owner = $str.Substring(7)

    # We find lock owner's name and it is not the user name
    if ($owner -ne "" -and $owner -ne $user)
    {
      # If the $user is a member of 'Administrators'
      # group allow to steal the lock
      if (-not (Check-GroupMembership "Administrators" $user))
      {
        [Console]::Error.WriteLine("Error: $path already locked by $owner.")
        exit 1
      }
    }

    exit 0
  }
}

exit 0 
```

***预锁.bat***

```
@echo off
set PWSH=%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe
%PWSH% %1\hooks\pre-lock.ps1 %1 %2 %3 %4 %5
if errorlevel 1 exit %errorlevel% 
```

# android - Android中的EditText验证

> ID：11541242
> 
> 赞同：-1
> 
> 时间：2012-07-18T12:21:54.293
> 
> 标签：android, android-edittext, ksoap

我通过 SOAP Web 服务使用 MySQL 数据库连接开发了一个登录表单。在这里，我验证了我的 EditText（用户名，密码）框。这是一个基本问题，但我无法为此开发代码。请帮帮我。

我的代码是：

```
Button login = (Button) findViewById(R.id.btn_login);
    login.setOnClickListener(new View.OnClickListener() {

 public void onClick(View arg0) {
loginAction();

  }
 });
}

private void loginAction(){
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    EditText userName = (EditText) findViewById(R.id.tf_userName);
    String user_Name = userName.getText().toString();
    EditText userPassword = (EditText) findViewById(R.id.tf_password);
    String user_Password = userPassword.getText().toString();

  //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for Password variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("password");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
           String status = response.toString();
           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());

           **if(status.equals("Success!"))
           {
               //   ADD  to save  and  read next time
                   String strUserName = userName.getText().toString().trim();
                   String strPassword = userPassword.getText().toString().trim();
                   if (null == strUserName || strUserName.length() == 0)
                               {
                       //  showToast("Enter Your Name");
                     userName.setError( "username is required!" );
                   } else if (null == strPassword || strPassword.length() == 0)
                               {
                           //      showToast("Enter Your Password");
                     userPassword.setError( "password is required!" );
                   } else
                               {
                       if (chkRememberMe.isChecked())
                                       {
                           SharedPreferences loginPreferences = getSharedPreferences(SPF_NAME, Context.MODE_PRIVATE);
                           loginPreferences.edit().putString(USERNAME, strUserName).putString(PASSWORD, strPassword).commit();
                       } else
                                       {
                           SharedPreferences loginPreferences = getSharedPreferences(SPF_NAME, Context.MODE_PRIVATE);
                           loginPreferences.edit().clear().commit();
                                       }
           Intent intent = new Intent(Login.this,HomePage.class);
              intent.putExtra("username",userName.getText().toString());
              startActivity(intent);
                               }
           }**
                   else
                      {
                       Intent i = new Intent(getApplicationContext(), Login.class);
                         startActivity(i);
                      }
                     }

              catch(Exception e){

              }
             }

      } 
```

我希望如果我单击该按钮，那么 EditText 将首先得到验证，然后仅移动到下一个 Activity。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:34:48.963

声明一个布尔变量**isValidated**。检查用户名或密码字段是否为空。如果其中任何一个为空，则将 isValidated 设置为**"false"**。否则，将 isValidated 设置为**"true"**。

现在，在开始下一个活动之前检查 isValidated 的值。***如果为“真”，则启动新的 Intent***；否则，如果未验证，则执行您想做的任何事情（在这种情况下， isValidated 的值将为 false）。

```
 private void loginAction(){

            boolean isUserValidated = true;
            boolean isPasswordValidated = true;

                 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

                    EditText userName = (EditText) findViewById(R.id.tf_userName);
                    String user_Name = userName.getText().toString();
                    EditText userPassword = (EditText) findViewById(R.id.tf_password);
                    String user_Password = userPassword.getText().toString();

                  //Pass value for userName variable of the web service
                    PropertyInfo unameProp =new PropertyInfo();
                    unameProp.setName("userName");//Define the variable name in the web service method
                    unameProp.setValue(user_Name);//set value for userName variable
                    unameProp.setType(String.class);//Define the type of the variable
                    request.addProperty(unameProp);//Pass properties to the variable

                  //Pass value for Password variable of the web service
                    PropertyInfo passwordProp =new PropertyInfo();
                    passwordProp.setName("password");
                    passwordProp.setValue(user_Password);
                    passwordProp.setType(String.class);
                    request.addProperty(passwordProp);

                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                    envelope.setOutputSoapObject(request);
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                    try{
                        androidHttpTransport.call(SOAP_ACTION, envelope);
                           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                           String status = response.toString();
                           TextView result = (TextView) findViewById(R.id.tv_status);
                           result.setText(response.toString());

                           if(status.equals("Success!"))
                           {
                               //   ADD  to save  and  read next time
                                   String strUserName = userName.getText().toString().trim();
                                   String strPassword = userPassword.getText().toString().trim();
                                   if (null == strUserName || strUserName.length() == 0)
                                               {
                                       //  showToast("Enter Your Name");
                                     userName.setError( "username is required!" );
            isUserValidated = false;
                                   }
if (null == strPassword || strPassword.length() == 0)
                                               {
                                           //      showToast("Enter Your Password");
            isPasswordValidated = false;
                                     userPassword.setError( "password is required!" );
                                   } 
if(isUserValidated = true && isPasswordValidated = true)
                                               {

                                       if (chkRememberMe.isChecked())
                                                       {
                                           SharedPreferences loginPreferences = getSharedPreferences(SPF_NAME, Context.MODE_PRIVATE);
                                           loginPreferences.edit().putString(USERNAME, strUserName).putString(PASSWORD, strPassword).commit();
                                       } else
                                                       {
                                           SharedPreferences loginPreferences = getSharedPreferences(SPF_NAME, Context.MODE_PRIVATE);
                                           loginPreferences.edit().clear().commit();
                                                       }
}

            if(isUserValidated && isPasswordValidated)
            {
                           Intent intent = new Intent(Login.this,HomePage.class);
                              intent.putExtra("username",userName.getText().toString());
                              startActivity(intent);
            }
            else
        {
        \\ what ever you want to do if the data in the EditText is not validated.
        \\ Maybe restart the same intent ?    
    \\ Intent i = new Intent(getApplicationContext(), Login.class);    startActivity(i);

        }

                                               }
                           }
                                   else
                                      {
                                       Intent i = new Intent(getApplicationContext(), Login.class);
                                         startActivity(i);
                                      }
                                     }

                              catch(Exception e){

                              }
                             }

                      } 
```

# c# - 在读取和写入文件 C# 时共享冲突 IOException

> ID：11541244
> 
> 赞同：22
> 
> 时间：2012-07-18T12:22:02.327
> 
> 标签：c#, file-io, textreader, textwriter

这是我的代码：

```
public static TextWriter twLog = null;
private int fileNo = 1;
private string line = null;

TextReader tr = new StreamReader("file_no.txt");
TextWriter tw = new StreamWriter("file_no.txt");
line = tr.ReadLine();
if(line != null){
    fileNo = int.Parse(line);
    twLog = new StreamWriter("log_" + line + ".txt");
}else{
    twLog = new StreamWriter("log_" + fileNo.toString() + ".txt");  
}
System.IO.File.WriteAllText("file_no.txt",string.Empty);
tw.WriteLine((fileNo++).ToString());
tr.Close();
tw.Close();
twLog.Close(); 
```

它抛出这个错误：

> IOException：路径 C:\Users\Water Simulation\file_no.txt 上的共享冲突

我要做的只是打开一个带有 log_x.txt 名称的文件并从 file_no.txt 文件中获取“x”。如果 file_no.txt 文件为空，则将日志文件的名称设为 log_1.txt 并写入“fileNo + 1”到file_no.txt。新程序启动后，新的日志文件名必须是log_2.txt。但我收到这个错误，我不明白我在做什么错。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-18T12:26:52.117

好吧，您正在尝试使用单独的流打开文件`file_no.txt`进行读取*和*写入。这可能不起作用，因为文件将被读取流锁定，因此无法创建写入流并且您会遇到异常。

一种解决方案是先读取文件，关闭流，然后在增加`fileNo`. 这样文件一次只打开一次。

另一种方法是为读写访问创建一个文件流，如下所示：

```
FileStream fileStream = new FileStream(@"file_no.txt", 
                                       FileMode.OpenOrCreate, 
                                       FileAccess.ReadWrite, 
                                       FileShare.None); 
```

[这个问题](https://stackoverflow.com/questions/3817477/simultaneous-read-write-a-file-in-c-sharp)的公认答案似乎也有一个很好的解决方案，即使我假设您不想允许共享读取。

**可能的替代解决方案**
我了解您希望在程序启动时创建唯一的日志文件。另一种方法是：

```
int logFileNo = 1;
string fileName = String.Format("log_{0}.txt", logFileNo);

while (File.Exists(fileName))
{
    logFileNo++;
    fileName = String.Format("log_{0}.txt", logFileNo);
} 
```

这会增加数字，直到找到日志文件不存在的文件号。缺点：如果你有`log_1.txt`and `log_5.txt`，下一个文件不会是`log_6.txt`but `log_2.txt`。

为了克服这个问题，您可以使用掩码枚举目录中的所有文件，`log_*.txt`并通过执行一些字符串操作来找到最大的数字。

可能性是无限的:-D

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-19T04:58:22.093

好吧，这可能很旧，但接受的答案对我不起作用。这是当您尝试读取或写入您刚刚从单独的流创建的文件时引起的。解决这个问题非常简单，只需将创建它时使用的文件流处理掉，然后您就可以自由访问该文件了。

```
if (!File.Exists(myfile))
{
    var fs = new FileStream(fav, FileMode.Create);
    fs.Dispose();
    string text = File.ReadAllText(myfile);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-17T08:27:14.183

[在此处输入图像描述](https://i.stack.imgur.com/R4bB6.png)

```
 var stream = new System.IO.FileStream(filePath, System.IO.FileMode.Create);

        resizedBitmap.Compress(Bitmap.CompressFormat.Png, 200, stream); //problem here
        stream.Close();
        return resizedBitmap; 
```

在 Compress 方法中，我将质量参数的值作为 200 传递，遗憾的是它不允许 0-100 范围之外的值。

我将质量值改回 100，问题得到解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-22T18:36:35.027

None of the proposed options helped me. But I found a solution: In my case, the problem was with Anti-Virus, with intensive writing to a file, Anti-Virus started scanning the file and at that moment there was a problem with writing to the file.

# .net - 带有嵌套操作问题的 .NET 操作

> ID：11541248
> 
> 赞同：0
> 
> 时间：2012-07-18T12:22:12.400
> 
> 标签：.net, lambda

我有下一个片段：

```
public Action<Action<bool>> GetAction()
{
    return m => MyMethod(123, "string", m);
}

private void MyMethod(int someInteger, string someString, Action<bool> boolAction)
{
    // some work with int and string was done
    boolAction(true);
} 
```

你能解释一下为什么会这样吗？我看到`Action<Action<bool>>`需要一些**只有一个**参数的void 方法`Action<bool>`。那么这两个第一个论点有什么问题呢？

我也不清楚我们为什么要`m`进入。如何在`boolAction(true)`. 那里会发生什么？

对此的任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:46:12.320

没有理由它不应该工作。在创建 lambda 的行中，C# 会根据`GetAction`返回值的类型自动推断您的 lambda 将接收哪些参数。要理解这段代码，重要的是你看到你没有返回`m`，但你正在返回

```
m => MyMethod(123, "string", m); 
```

因此，`m`is 是 type `Action<bool>`，上面的表达式是 type `Action<Action<bool>>`，其中内部 Action 实际上是`m`。

IE

```
m => MyMethod(123, "string", m); 
```

创建与此签名的方法相对应的 lambda 表达式：

```
void _no_name(Action<bool> m) {
  MyMethod(123, "string", <delegate_to_no_name>);
} 
```

从这部分我们看到那`m`是`Action<bool>`，并且`_no_name`是`Action<Action<bool>>`。

最后，您可能会以某种方式使用此代码：

```
Action<Action<bool>> action = GetAction();
action(x => MessageBox.Show("X of type bool is " + x.ToString())); 
```

实际上，我们的消息框调用委托成为`m`参数。

# joomla - joomla中的sql咨询

> ID：11541258
> 
> 赞同：0
> 
> 时间：2012-07-18T12:23:04.633
> 
> 标签：joomla, joomla2.5

我在 joomla 的个性化 HTML 模块中有一个表单

```
<form id="search-restaurant" class="form-a" action="find.php">
<div>
   ......
</div>
<div class="encuentra-tastepoint-submit"><input type="submit" value="Submit" /></div> 
```

当我单击提交按钮时，我想在我的数据库中执行一个 sql 查询并在其他页面中返回值。

我必须把 muy find.php 文件放在哪里。

在 joomla 2.5 中有一个手册或教程可以做到这一点

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:01:52.583

我假设`find.php`是包含 SQL 查询代码的文件，在这种情况下，您可以将其保存在模块文件夹的根目录中（与 module.xml 位于同一位置）。

您还需要添加`require_once( dirname(__FILE__).'/'.'find.php' );`到`your_module.php`.

# python - 关于 tkinter 中绑定标签的基本查询

> ID：11541262
> 
> 赞同：9
> 
> 时间：2012-07-18T12:23:22.203
> 
> 标签：python, tkinter

在[这篇文章](https://stackoverflow.com/q/3501849/2596334)的给定示例中，提到如果使用默认绑定标签，则事件值将在定义中不可见（会有一个滞后）。

关于类绑定有一些解释。
我是初学者，所以想了解详细原因。
有人可以解释为什么它在第一种情况下不起作用而在第二种情况下起作用（当绑定标签的顺序被修改时）。

```
import Tkinter

def OnKeyPress(event):
 value = event.widget.get()
 string="value of %s is '%s'" % (event.widget._name, value)
 status.configure(text=string)

root = Tkinter.Tk()

entry1 = Tkinter.Entry(root, name="entry1")
entry2 = Tkinter.Entry(root, name="entry2")
entry3 = Tkinter.Entry(root, name="entry3")

entry1.bindtags(('.entry1', 'Entry', '.', 'all'))
entry2.bindtags(('Entry', '.entry1', '.', 'all'))
entry3.bindtags(('.entry1','Entry','post-class-bindings', '.', 'all'))

btlabel1 = Tkinter.Label(text="bindtags: %s" % " ".join(entry1.bindtags()))
btlabel2 = Tkinter.Label(text="bindtags: %s" % " ".join(entry2.bindtags()))
btlabel3 = Tkinter.Label(text="bindtags: %s" % " ".join(entry3.bindtags()))
status = Tkinter.Label(anchor="w")

entry1.grid(row=0,column=0)
btlabel1.grid(row=0,column=1, padx=10, sticky="w")
entry2.grid(row=1,column=0)
btlabel2.grid(row=1,column=1, padx=10, sticky="w")
entry3.grid(row=2,column=0)
btlabel3.grid(row=2,column=1, padx=10)
status.grid(row=3, columnspan=2, sticky="w")
entry1.bind("<KeyPress>", OnKeyPress)
entry2.bind("<KeyPress>", OnKeyPress)
entry3.bind_class("post-class-bindings", "<KeyPress>", OnKeyPress)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-18T13:10:32.263

当您对小部件进行绑定时，您实际上并没有绑定到小部件本身。当您这样做时`mywidget.bind(...)`，实际发生的是绑定与与小部件同名的*绑定标记相关联。*

当检测到事件时，Tkinter 首先确定哪个小部件拦截了该事件。此小部件将具有与其关联的零个或多个（默认情况下：四个）绑定标签的列表。Tkinter 将检查每个标签以查看是否存在与事件匹配的绑定。如果找到，它将执行绑定，然后继续下一个标签，直到它用完标签或绑定的函数之一返回字符串`"break"`。

序列看起来像这样：

1.  你按下“x”键。*此时“x”尚未插入任何地方*
2.  Tkinter 获取具有键盘焦点的小部件的绑定标签。
3.  默认情况下，第一个绑定标签是小部件本身。该标签上有绑定吗？如果是，执行它。例如，您可以打印小部件的内容。因为尚未触发其他绑定，所以“x”不会成为内容的一部分。
4.  如果绑定函数返回`"break"`，则不再进行事件处理。“x”不会插入到小部件中。
5.  如果小部件没有返回`"break"`，tkinter 继续下一个绑定标签。
6.  默认情况下，下一个绑定标签是小部件类。类上是否有与此事件匹配的绑定（字母“x”的按键）？
7.  在这种情况下，该类确实具有此事件的绑定，即实际将“x”插入到小部件中。*直到此时，“x”仍未插入到小部件*中。但是，在此绑定之后，如果您打印了内容，您会看到“x”
8.  以这种方式继续处理，直到处理完所有绑定标签。

根据评论部分正在进行的讨论，这似乎仍不清楚。我会尽量简化：

它是类绑定，它将字符从内存中的事件对象复制到小部件，从而使其出现在屏幕上。在类绑定触发之前，角色不会出现在小部件中。在类绑定之后，它将在小部件中。

# c# - 读取 Excel 工作表中的大值

> ID：11541264
> 
> 赞同：0
> 
> 时间：2012-07-18T12:23:27.303
> 
> 标签：c#, excel

我有大约 5,00,000 条记录的大数据。我必须将其写入 Excel。是否可以在 Excel 表中读取如此大量的数据。有没有更好的方法可以做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:28:09.003

如果您的机器有可用内存，Excel 2007 及更高版本可以处理大约 100 万行。

但是，使用数据库可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:33:47.583

Excel 2010 可以有一个工作表大小 - 65,536 行 x 256 列，如此链接所示[http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx)

我建议您在运行时从结果中创建 .csv 文件在 C# 中，每个查询一批 10 万或如果可能的话 1/2 万，这样您将有 5 到 10 次调用，但它会加快您存储的返回的过程程序

这些 .csv 文件可以在 Excel 中打开，因此您最后仍然可以使用 excel 作为应用程序

另请参阅此链接，因此我不建议您使用 Office 自动化

> 段落摘自[http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757) Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET）的 Microsoft Office 应用程序自动化、DCOM 和 NT 服务），因为当 Office 在此环境中运行时，Office 可能会表现出不稳定的行为和/或死锁。

# java - 第一次从 Java 调用 MS Access 的 SQL 命令非常慢，而在后续运行中则快得多

> ID：11541269
> 
> 赞同：1
> 
> 时间：2012-07-18T12:23:42.640
> 
> 标签：java, sql, performance, connection

我正在使用 jdbc:odbc 网桥连接到 Access 数据库。然后我从数据库中选择大量数据（约 200 万行）。重启后我第一次运行代码非常慢，需要 6 多分钟才能检索数据。在随后的运行中，只需 1.5 分钟即可完成相同的操作。

这是我用来连接数据库的代码：

```
try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String url = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=" + databaseLocation + databaseName + ";selectMethod=cursor; READONLY=true; TYPE=FASTLOAD";

        con = DriverManager.getConnection(url);

        System.out.println("Connected to " + databaseName);

        } catch (SQLException e) {
        System.out.println("SQL Exception: " + e.toString());   
        } catch (ClassNotFoundException cE) {
        System.out.println("Class Not Found Exception: " + cE.toString());
    } 
```

经过大量谷歌搜索后，我尝试添加参数，例如

```
selectMethod=cursor
READONLY=true
TYPE=FASTLOAD 
```

据我所知，这些都没有影响。

然后我像这样选择数据：

```
String SQL = "SELECT ADDRESS_MODEL.ADDR_LINE_1, ADDRESS_MODEL.ADDR_LINE_2, LOCALITIES.NAME, ADDRESS_MODEL.SECONDARY_LOCALITY, TLANDS.NAME, ADDRESS_MODEL.POST_TOWN, ADDRESS_MODEL.COUNTY FROM ((ADDRESS_MODEL LEFT JOIN BUILDINGS ON ADDRESS_MODEL.BUILDING_ID = BUILDINGS.BUILDING_ID) LEFT JOIN LOCALITIES ON BUILDINGS.LOCALITY_ID = LOCALITIES.LOCALITY_ID) LEFT JOIN TLANDS ON BUILDINGS.TLAND_ID = TLANDS.TLAND_ID WHERE BUILDINGS.COUNTY_ID = " + county_ID;

    PreparedStatement prest = con.prepareStatement(SQL);

    ResultSet result = prest.executeQuery(); 
```

我尝试使用准备好的语句，但我不确定我做得对。

存储数据后，我关闭 ResultSet：

```
result.close(); 
```

稍后在程序中，我关闭连接如下：

```
try{
        stmt.close();
        con.close();
        System.out.println("Connection to " + databaseName + " closed");
    } catch (SQLException e) {
        System.out.println("SQL Exception: " + e.toString()); 
    } 
```

不幸的是，我现在致力于同时使用 Java 和 Access。

有谁知道为什么它第一次变慢（或者更多为什么它在后续运行中更快）？另外，有什么一般的事情我可以做得更好以使其更快吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:37:07.803

你说两百万行，但数据有多大？很有可能它是第一次从磁盘读取它，然后它在磁盘缓存中以供后续运行。即使整个数据集不能立即放入 RAM，关键数据结构很可能仍然存在。

# python - 元标记在scrapy python中不起作用

> ID：11541273
> 
> 赞同：0
> 
> 时间：2012-07-18T12:24:01.673
> 
> 标签：python, meta-tags, scrapy

我正在使用以下scrapy框架是我的spider.py代码

```
class Example(BaseSpider):
    name = "example"
    allowed_domains = {"http://www.example.com"}

start_urls = [
    "http://www.example.com/servlet/av/search&SiteName=page1" 
```

]

```
def parse(self, response):
    hxs = HtmlXPathSelector(response)
    hrefs = hxs.select('//table[@class="knxa"]/tr/td/a/@href').extract()
    # href consists of all href tags and i am copying in to forwarding_hrefs by making them as a string 
    forwarding_hrefs = []
    for i in hrefs:
        forwarding_hrefs.append(i.encode('utf-8'))
    return Request('http://www.example.com/servlet/av/search&SiteName=page2',
                    meta={'forwarding_hrefs': response.meta['forwarding_hrefs']},
                   callback=self.parseJob)    

def parseJob(self, response):
    print response,">>>>>>>>>>>" 
```

**结果：**

```
2012-07-18 17:29:15+0530 [example] DEBUG: Crawled (200) <GET http://www.example.com/servlet/av/search&SiteName=page1> (referer: None)
2012-07-18 17:29:15+0530 [MemorialReqionalHospital] ERROR: Spider error processing <GET http://www.example.com/servlet/av/search&SiteName=page2>
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/twisted/internet/base.py", line 1167, in mainLoop
        self.runUntilCurrent()
      File "/usr/lib64/python2.7/site-packages/twisted/internet/base.py", line 789, in runUntilCurrent
        call.func(*call.args, **call.kw)
      File "/usr/lib64/python2.7/site-packages/twisted/internet/defer.py", line 361, in callback
        self._startRunCallbacks(result)
      File "/usr/lib64/python2.7/site-packages/twisted/internet/defer.py", line 455, in _startRunCallbacks
        self._runCallbacks()
    --- <exception caught here> ---
      File "/usr/lib64/python2.7/site-packages/twisted/internet/defer.py", line 542, in _runCallbacks
        current.result = callback(current.result, *args, **kw)
      File "/home/local/user/project/example/example/spiders/example_spider.py", line 36, in parse
        meta={'forwarding_hrefs': response.meta['forwarding_hrefs']},
    exceptions.KeyError: 'forwarding_hrefs' 
```

我想做的是收集所有的href标签

```
http://www.example.com/servlet/av/search&SiteName=page1 
```

并在下一个请求中放入`forward_hrefs`并调用它`forward_hrefs`（想`forward_urls`在下一个方法中使用这个列表）

```
http://www.example.com/servlet/av/search&SiteName=page2 
```

我还想在 forward_urls 中添加 page2 中的 href 标记，并在其中循环`forward_hrefs`并生成每个 href 标记的请求，这是我的想法，但它显示错误如上，上面的代码有什么问题，实际上元标记是为了复制项目。任何人都可以让我知道如何从方法复制`forward_hrefs`列表。`parse``parseJob`

最后，我的意图是将`forward_hrefs`列表从`parse`一个方法复制到另一个`parseJob`方法。

希望我解释清楚对不起，如果不是请告诉我....

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:33:44.943

没有尝试过任何东西，但您似乎在这里遇到了错误：

```
 return Request('http://www.example.com/servlet/av/search&SiteName=page2',
                meta={'forwarding_hrefs': response.meta['forwarding_hrefs']},
                callback=self.parseJob) 
```

您正在传递 response.meta['forwarding_hrefs'] 但此响应不存在

你需要把：

```
 return Request('http://www.example.com/servlet/av/search&SiteName=page2',
                meta={'forwarding_hrefs': forwarding_hrefs},
                callback=self.parseJob) 
```

因为你有 forwarding_hrefs 字段，这样你将把它发送到解析元内部的作业，然后在元内部你将能够访问 response.meta['forwarding_hrefs'] 因为它将存在于该响应对象中。

# javascript - Safari 浏览器如何检测从隐私中阻止 cookie 未设置为从不？

> ID：11541275
> 
> 赞同：1
> 
> 时间：2012-07-18T12:24:01.483
> 
> 标签：javascript, browser, safari, bookmarklet

我使用 Javascript 开发了一个小书签，当阻止 cookie 未设置为从不时，我的小书签在 Windows 或 Mac 上的 Safari 浏览器上不起作用。

转到设置、首选项、隐私、阻止 cookie

我如何检测这个选项的价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:31:45.037

> 我的书签在 Safari 浏览器上不起作用。

因此，在代码中的某个时刻，您希望发生一些不会发生的事情。（很可能是无法设置然后读取 cookie。）

> 我如何检测此选项的值

你发现你想要发生的事情没有发生。

我很确定没有办法直接读取这个浏览器设置。如果您可以设置cookie然后读取它，您只能假设基于测试的设置。

# objective-c - UIImagePickerController 委托未调用

> ID：11541277
> 
> 赞同：0
> 
> 时间：2012-07-18T12:24:12.407
> 
> 标签：objective-c, ipad

我正在使用以下代码从 IPAD 前置摄像头自动拍照：

```
UIImagePickerController *imgPkr = [[UIImagePickerController alloc] init];
        imgPkr.sourceType = UIImagePickerControllerSourceTypeCamera;
        imgPkr.delegate = self;

        imgPkr.cameraDevice=UIImagePickerControllerCameraDeviceFront;
        [self presentModalViewController:imgPkr animated:YES];
        imgPkr.showsCameraControls = NO;
        [imgPkr takePicture]; 
```

但是这段代码不要拍任何照片，也不要调用委托：

```
 -(void)imagePickerController:(UIImagePickerController*)picker
didFinishPickingMediaWithInfo:(NSDictionary*)info 
```

知道代码有什么问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:33:47.503

我的第一个猜测是`[imgPkr takePicture];`在选择器完成呈现之前被调用。试试这样：

```
UIImagePickerController *imgPkr = [[UIImagePickerController alloc] init];
        imgPkr.sourceType = UIImagePickerControllerSourceTypeCamera;
        imgPkr.delegate = self;

        imgPkr.cameraDevice=UIImagePickerControllerCameraDeviceFront;
        [self presentModalViewController:imgPkr animated:YES];
        imgPkr.showsCameraControls = NO;
        [self performSelector:@selector(takePicture) withObject:self afterDelay:1.0]; 
```

或者

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(takePicture)
                                             name:AVCaptureSessionDidStartRunningNotification 

object:nil]; 
```

&

```
- (void)takePicture
{
    [imgPkr takePicture];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:34:11.723

我敢打赌，您在日志中会收到一条消息，说

> UIImagePickerController：忽略拍照请求；相机还没有准备好。

这是一个常见问题，因为底层捕获会话需要一些时间才能启动，因此您只需确保相机已准备好拍照，*然后*调用`takePicture`方法。现在，在我的回答中详细解释了一种获取通知的方法： [如何知道 iPhone 相机是否准备好拍照？](https://stackoverflow.com/questions/10678067/how-to-know-if-iphone-camera-is-ready-to-take-picture/10768237#10768237) 请注意，尽管此方法适用于 iOS5+（旧版本中有一个错误会阻止此事件的系统通知，这与文档中的描述相反）。我希望这个对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T17:28:43.730

等待相机准备好直到拍照的另一种方法是完成块->

```
[self presentViewController:imagePicker animated:YES
                 completion:^ {
                     [imagePicker takePicture];
                 }]; 
```

感谢 [iOS 的“GrandSteph”以编程方式拍照](https://stackoverflow.com/questions/9694859/ios-taking-photo-programmatically)

# sql-server - 提高具有许多左连接的视图的性能

> ID：11541279
> 
> 赞同：0
> 
> 时间：2012-07-18T12:24:14.943
> 
> 标签：sql-server, left-join, database-performance

我是 SQL 查询性能增强的新手，并被赋予了一项任务来增强它的视图。

这个视图定义应用了大约 20 个左连接，我认为这会妨碍性能 - 在本地服务器上检索 35K 奇数行大约需要 9 秒。

提高其性能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:29:18.990

1.  考虑是否需要 LEFT 联接而不是 INNER 联接。由于不了解所涉及的数据，我们无法为您提供。
2.  对您的查询运行执行计划。
3.  识别索引可以提高性能的连接。
4.  考虑去规范化你的数据库设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:28:06.513

没有看到查询很难说。提高性能的一种可能方法是为连接中涉及的列创建索引。

如果您查看查询执行计划，您应该能够看到查询的哪一部分正在减慢速度。您还可以通过[数据库引擎优化顾问](http://msdn.microsoft.com/en-us/library/ms166575%28v=sql.105%29)运行查询，并允许顾问建议哪些列索引会产生最大的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:34:07.317

你在哪里使用这个视图？我建议如果您在 proc 或类似的情况下使用它，然后只使用所有视图列中的几列。其中一些连接很可能是多余的，因为其中一些连接甚至不会影响最终结果，而且您​​不需要连接不必要的表。因此，最好的方法是分析在何处使用此视图以及每次调用该视图时使用了哪些列以及哪些表具有所需的列。

我建议如果您从其他 proc 或类似的程序中使用此视图，而不是引用视图引用每个表并仅使用那些需要的表。

# emacs - 无法打开 Emacs 函数的 C 源代码

> ID：11541280
> 
> 赞同：5
> 
> 时间：2012-07-18T12:24:15.370
> 
> 标签：emacs

当我搜索函数描述 [find-function] 并单击指向“--.c”文件的链接时，我无法打开它，并且在 Minibuf 中得到 Emacs C Source dir: ~/。我被困在那里，我不知道该怎么办。![在此处输入图像描述](../Images/e4900420c0edfc9f9cc89687515f3a1e.png)

“Emacs 发行版包括手册的完整源代码，以及多种语言的 Emacs 参考卡。” gnu.org/software/emacs

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T13:04:06.860

[从http://ftp.gnu.org/pub/gnu/emacs/](http://ftp.gnu.org/pub/gnu/emacs/)获取`.tar.gz`与您的 Emacs 版本相对应的文件（`M-x emacs-version`如果不确定，请检查），然后将其解压缩。然后，您可以输入解压缩它的路径作为对“Emacs C Source Dir”的响应。（我怀疑你需要指定Emacs 发行版的子目录，但我自己没有尝试过。）`src`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-27T02:33:01.550

下载源代码后，还有一个变量可以自定义源代码的位置。例如：

```
(setq find-function-C-source-directory "~/Projects/emacs-25.1/src/") 
```

# search - Restfullyii 限制和偏移

> ID：11541281
> 
> 赞同：1
> 
> 时间：2012-07-18T12:24:16.403
> 
> 标签：search, yii, limit, offset, yii-extensions

我正在尝试使用`yii`和`restfullyii`扩展，我已经设法让搜索正常工作，现在我正在尝试`limit`结果并包含一个`offset`，我将如何使用这个模块及其结果，搜索返回一个基于 a 的数组`json`发布，我也使用休息控制器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T18:03:07.280

是的，您可以使用 _GET vars limit & offset 轻松设置请求的限制和偏移量。这是一个示例 URI：

```
/api/work?limit=10&offset=30 
```

# python - 使用点表示法在 mongodb 查询中进行字段选择

> ID：11541282
> 
> 赞同：2
> 
> 时间：2012-07-18T12:24:16.370
> 
> 标签：python, mongodb, pymongo, mongokit

我在这里看到很多措辞相似的问题，但没有一个能解决我的问题。

我有这样的文件：

```
{'_id': ObjectId('5006916af9cf0e7126000000'),'data': [{'count': 0,'alis':'statsministeren','avis':'Ekstrabladet'}, {'count': 0,'alis ':'thorning','avis':'Ekstrabladet'}, {'count': 0,'alis':'socialdemokratiets formand','avis':'Ekstrabladet'}, {'count': 0,'alis' :'lars barfod','avis':'Ekstrabladet'}, {'count': 0,'alis':'formand for det konservativefolkeparti','avis':'Ekstrabladet'}, {'count': 0, 'alis':'s\xf8vndal','avis':'Ekstrabladet'}, {'count': 0,'alis': u"sf's formand",'avis':'Ekstrabladet'}, {'count': 0,'阿里斯':'m\xf6ger','avis':'Ekstrabladet'}, {'count': 0,'alis':'lars l\xf8kke','avis':'Ekstrabladet'}, {'count': 0,'alis ':'l\xf8kke rasmussen','avis':'Ekstrabladet'}, {'count': 0,'alis':'lederen af danmarks st\xf8rste parti','avis':'Ekstrabladet'}, {' count': 0,'alis':'Pia Kj\xe6rsgaard','avis':'Ekstrabladet'}, {'count': 0,'alis':'statsministeren','avis':'Information'}, { 'count': 1,'alis':'thorning','avis':'信息'}, {'count': 0,'alis':'socialdemokratiets formand','avis':'信息'}, {'计数'：0，'alis'：'lars barfod'，'avis'：'Information'}, {'count': 0,'alis':'formand for det konservative peopleeparti','avis':'Information'}, {'count': 0,'alis':'s\xf8vndal', 'avis':'Information'}, {'count': 0,'alis': u"sf's formand",'avis':'Information'}, {'count': 0,'alis':'m\xf6ger ','avis':'信息'}, {'count': 0,'alis':'lars l\xf8kke','avis':'信息'}, {'count': 0,'alis':' l\xf8kke rasmussen','avis':'Information'}, {'count': 0,'alis':'lederen af danmarks st\xf8rste parti','avis':'Information'}, {'count': 0,'alis':'Pia Kj\xe6rsgaard','avis':'信息'}, {'count': 0,'alis':'statsministeren','avis':'Berlingske'}, {'count': 0,'alis':'thorning','avis':'Berlingske' }, {'count': 0,'alis':'socialdemokratiets formand','avis':'Berlingske'}, {'count': 0,'alis':'lars barfod','avis':'Berlingske' }, {'count': 0,'alis':'formand for det konservative palmeparti','avis':'Berlingske'}, {'count': 1,'alis':'s\xf8vndal','avis' :'Berlingske'}, {'count': 0,'alis': u"sf's formand",'avis':'Berlingske'}, {'count': 0,'alis':'m\xf6ger',' avis':'Berlingske'}, {'count': 0,'alis':'lars l\xf8kke','avis':'Berlingske'}, {'count': 0,'alis':'l\xf8kke rasmussen','avis':'Berlingske'}, {'count' : 0,'alis':'lederen af danmarks st\xf8rste parti','avis':'Berlingske'}, {'count': 0,'alis':'Pia Kj\xe6rsgaard','avis':'Berlingske '}, {'count': 0,'alis':'statsministeren','avis':'JP'}, {'count': 0,'alis':'thorning','avis':'JP'} , {'count': 0,'alis':'socialdemokratiets formand','avis':'JP'}, {'count': 0,'alis':'lars barfod','avis':'JP'} , {'count': 0,'alis':'formand for det konservative peopleeparti','avis':'JP'}, {'count': 0,'alis':'s\xf8vndal','avis':'JP'}, {'count': 0,'alis': u"sf's formand",'avis ':'JP'}, {'count': 1,'alis':'m\xf6ger','avis':'JP'}, {'count': 0,'alis':'lars l\xf8kke' ,'avis':'JP'}, {'count': 0,'alis':'l\xf8kke rasmussen','avis':'JP'}, {'count': 0,'alis':'lederen af danmarks st\xf8rste parti','avis':'JP'}, {'count': 0,'alis':'Pia Kj\xe6rsgaard','avis':'JP'}, {'count': 0 ,'alis':'statsministeren','avis':'BT'}, {'count': 0,'alis':'thorning','avis':'BT'}, {'count': 0,'alis':'socialdemokratiets formand','avis':'BT'}, {'count': 0,'alis':'lars barfod','avis':'BT'}, {'count' : 0,'alis':'formand for det konservative palmeparti','avis':'BT'}, {'count': 0,'alis':'s\xf8vndal','avis':'BT'}, {'count': 0,'alis': u"sf's formand",'avis':'BT'}, {'count': 0,'alis':'m\xf6ger','avis':'BT' }, {'count': 0,'alis':'lars l\xf8kke','avis':'BT'}, {'count': 0,'alis':'l\xf8kke rasmussen','avis' :'BT'}, {'count': 0,'alis':'lederen af danmarks st\xf8rste parti','avis':'BT'}, {'count': 0,'alis':'Pia Kj\xe6rsgaard','avis':'BT'}, {'count': 0,'alis':'statsministeren','avis':'Politiken'}, { 'count': 0,'alis':'thorning','avis':'Politiken'}, {'count': 0,'alis':'socialdemokratiets formand','avis':'Politiken'}, {' count': 0,'alis':'lars barfod','avis':'Politiken'}, {'count': 0,'alis':'formand for det konservativefolkeparti','avis':'Politiken'} , {'count': 0,'alis':'s\xf8vndal','avis':'Politiken'}, {'count': 0,'alis': u"sf's formand",'avis':'Politiken '}, {'count': 0,'alis':'m\xf6ger','avis':'Politiken'}, {'count': 0,'alis':'lars l\xf8kke','avis':'Politiken'}, {'count': 0,'alis':'l\xf8kke rasmussen','avis':'Politiken'}, {'count': 0,'alis':'lederen af danmarks st\xf8rste parti','avis':'Politiken'}, {'count': 0,' alis':'Pia Kj\xe6rsgaard','avis':'Politiken'}],'time':'2012-07-18 12:35:22.241245'}count': 0,'alis':'Pia Kj\xe6rsgaard','avis':'Politiken'}],'time':'2012-07-18 12:35:22.241245'}count': 0,'alis':'Pia Kj\xe6rsgaard','avis':'Politiken'}],'time':'2012-07-18 12:35:22.241245'}

```

IE：

```
{_objectId : xxx, time: yyy, data :[ 72 similar dicts in this array ]} 
```

我想从 72 个字典之一中检索值。

我的第一次尝试是这样的：

```
db.observations.find({'data.avis':'Ekstrabladet', 'data.alis':'thorning'}, {'data.count':1}) 
```

这将检索 72 个`count`字典，而我真正想要的是同时满足`avis:ekstrabladet`和`alis:thorning`（只有一个数组）的数组的计数值。但是 mongo 会返回整个文档。

我找到了 $elemMatch，但我得到了相同的输出。

```
db.observations.find({'data' : {$elemMatch: {'alis':'thorning','avis':'Ekstrabladet'}}},{'data.count':1}) 
```

我想我可以在 python 中迭代完整的文档（这是一个烧瓶应用程序），但它看起来不是很优雅。

所以我的问题是：如何进入文档内部并从嵌套的数组文档中获取值？

奖励：由于我是各种数据库的新手，我只选择了 mongodb，因为它看起来非常好用且灵活，而且我不使用关键数据。但我不需要可扩展性，可以使用例如 sqlite 代替。如果你对我使用错误的工作工具有强烈的意见 - 那么请辱骂我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:29:25.813

[您不能只返回选定的子文档](https://stackoverflow.com/questions/3985214/mongodb-extract-only-the-selected-item-in-array?lq=1)。你会得到所有的。因此，您必须在客户端进行过滤。

`$elemMatch`但是，本质上是这样，否则您将不会将 avis 和 alis 与*同一个*数组条目匹配（每个匹配一个就足够了，AND vs OR 在某种程度上）。

# asp.net - 在不安装 .net4.5 的情况下运行 webapi

> ID：11541283
> 
> 赞同：3
> 
> 时间：2012-07-18T12:24:21.267
> 
> 标签：asp.net, asp.net-mvc, devexpress, asp.net-web-api

我有一个运行aspx 页面的网站，在asp.net4.0 下。

我还有一些 DevExpress 控件，是我 4 年前购买的。

我现在想向 Web 应用程序添加一个 API，但是我知道需要 .net4.5 才能运行。

DevExpress 控件在 4.5 下无法工作 - 所以我需要以相当高的成本更新它们。

1.  安装 .net4.5 后，我的网站有可能继续使用 .net4 - 而不是新的 4.5？这样我就可以让网站在 4.0 下运行，API 在 4.5 下运行？
2.  或者是否可以让 API（使用实体框架）在 .net 4.0 下运行

谢谢，

标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:31:00.020

您无需安装 .net4.5 即可同时使用 web-api 和实体框架。

您可以通过安装 nuget 包“Microsoft.AspNet.WebApi”（候选发布版）将 web-api 添加到现有项目

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T13:53:12.523

1.  是的，如果您将 Web API 放在一个单独的项目中，您可以将其设为 4.5，而构成该站点的其他项目可以是 4.0。您在构建项目时选择目标框架：右键单击项目 > 应用程序 > 目标框架下拉菜单

2.  您可以将 Web API 添加到至少使用 .NET 4.0 的任何 .NET 应用程序中。**Web API 不需要 .NET 4.5**。它可以是 Web 窗体项目、MVC 项目、空项目、控制台应用程序、WPF 应用程序、Metro 应用程序等 - 只要 .NET 版本至少为 4.0。

但在您的情况下，最简单的解决方案似乎是将所有内容保持在 4.0 以下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T20:18:15.967

您最好使用最终版本的 WepAPI 程序集重新创建 Web API 项目

教程： [http ://david.gardiner.net.au/2015/08/aspnet-web-api-for-net-framework-4-in.html](http://david.gardiner.net.au/2015/08/aspnet-web-api-for-net-framework-4-in.html)

# php - MySql请求中的1064错误

> ID：11541285
> 
> 赞同：-3
> 
> 时间：2012-07-18T12:24:24.917
> 
> 标签：php, mysql

我有以下 PHP 代码：

```
function get_all_labels_by_language_id($language_code, $page_index, $user_id) {
    $language_id = $this->get_language_id($language_code);
    $users_query = "select  eng.label_value, loc.votes, loc.user_id, loc.approved, eng.language_value,       
            coalesce(loc.language_value)
            from    labels eng
            left outer join    
                labels loc
            on      loc.language = " . $language_id . "
            and eng.label_value = loc.label_value
            and loc.user_id = '" . $user_id . "'
            where   eng.language = 45
            order by loc.language_value";
    $data = $this->db->query($users_query)->result_array();
    $result = array();
    for ($i = 0; $i < count($data); $i++) {
        $result[$i]['language_id'] = $language_id;
        if (!$data[$i]['user_id']) {
            $result[$i]['translate'] = $data[$i];
            $result[$i]['alternatives'] = NULL;

            $other_records_query = "select  eng.label_value, loc.votes, loc.user_id, loc.approved, eng.language_value,       
                coalesce(loc.language_value)
                from    labels eng
            left outer join    
                labels loc
            on      loc.language = " . $language_id . "
            and eng.label_value = loc.label_value
            where   eng.language = 45 and loc.label_value='" . $data[$i]['label_value'] . "'
            order by loc.language_value";
            $other_records = $this->db->query($other_records_query)->result_array();
            for ($k = 0; $k < count($other_records); $k++) {
                if ($other_records[$k]['approved'] == '1') {
                    $result[$i]['translate'] = $other_records[$k];
                } else {
                    $result[$i]['alternatives'][] = $other_records[$k];
                }
            }
        } else {
            $result[$i]['translate'] = $data[$i];
            $result[$i]['alternatives'] = NULL;
            if ($data[$i]['approved'] == '1') {
                $other_records_query = "select  eng.label_value, loc.votes, loc.user_id, loc.approved, eng.language_value,       
                coalesce(loc.language_value)
                from    labels eng
            left outer join    
                labels loc
            on      loc.language = " . $language_id . "
                    and eng.label_value = loc.label_value
                    and loc.approved='1'
            where   eng.language = 45 and loc.label_value='" . $data[$i]['label_value'] . "'
            and approved='0' order by loc.language_value";
                $other_records = $this->db->query($other_records_query)->result_array();
                for ($k = 0; $k < count($other_records); $k++) {
                    $result[$i]['alternatives'][] = $other_records[$k];
                }
            } else {
                $other_records_query = "select  eng.label_value, loc.votes, loc.user_id, loc.approved, eng.language_value,       
                coalesce(loc.language_value)
                from    labels eng
            left outer join    
                labels loc
            on      loc.language = " . $language_id . "
                    and eng.label_value = loc.label_value
                    and loc.approved='1'
            where   eng.language = 45 and loc.label_value='" . $data[$i]['label_value'] . "'
            order by loc.language_value";
                $other_records = $this->db->query($other_records_query)->result_array();
                for ($k = 0; $k < count($other_records); $k++) {
                    $result[$i]['alternatives'][] = $other_records[$k];
                }
            }
        }
    } 
```

此代码工作正常，但现在我收到以下错误：

错误号：1064

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 't set up correctly. If you're the store owner, please refer to' ' at line 8

select eng.label_value, loc.votes, loc.user_id, loc.approved, eng.language_value, coalesce(loc.language_value) from labels eng left outer join labels loc on loc.language = 24 and eng.label_value = loc.label_value where eng.language = 45 and loc.label_value='It looks like the payment gateway isn't set up correctly. If you're the store owner, please refer to' order by loc.language_value

Filename: Z:\home\localhost\www\system\database\DB_driver.php

Line Number: 330 
```

请告诉我，我该如何解决？我不明白我错在哪里。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:27:01.670

您没有转义要传递给 column 的字符串`label_value`。它包含破坏查询的字符。

**更新**

这看起来像 CodeIgniter 所以你应该使用：

```
$this->db->escape(); 
```

这是手册

[http://codeigniter.com/user_guide/database/queries.html](http://codeigniter.com/user_guide/database/queries.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:26:58.303

你应该`'`在你的字符串文字中转义

```
'It looks like the payment gateway isn\'t set up correctly. If you\'re the store owner, please refer to' 
```

[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)是你的朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:36:21.367

您正在使用未转义的字符串构建 SQL - 当其中一个字符串包含引号时，您就死定了。死我的意思是：如果这是一个用户提供的值，你只是失去了对你的数据库的控制（谷歌的“SQL注入”）。

您必须转义所有未知的字符串 - 使用哪种方法取决于您使用的数据库框架：它将提供转义功能。

# sql - 选择比给定数字“大”的数字

> ID：11541286
> 
> 赞同：3
> 
> 时间：2012-07-18T12:24:26.977
> 
> 标签：sql, postgresql

我在 PostgreSQL 中有一个带有一个数字列的表，并且我有一个给定的数字`x`。

如果`x`在表中，我想要所有数字`>= x`。

如果`x`不在表中，我想要所有数字`> x`和最大的数字`< x`。

例子：

```
id 
5
10
15
20 
```

因为`x = 15`它应该返回`15`and `20`。

因为`x = 12`它应该返回`10`,`15`和`20`。

我尝试了以下方法：

```
SELECT id FROM table_name WHERE id > 12
UNION
SELECT MAX(id) FROM table_name WHERE id <= 12 
```

哪个工作正常。

有没有单查询方式？谢谢你。

（这只是一个单列和数字的例子。实际是更大的表和日期时间列，但原理应该是一样的。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:51:26.097

从我的评论转换：

```
SELECT id 
  FROM table_name 
 WHERE id >= (SELECT MAX(id) 
                FROM table_name 
               WHERE id <= 12) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T13:11:44.323

```
select * from A where id >= coalesce((select id from A where id = 13),(select id from A where id < 13 order by id desc limit 1));

select * from A where id >= coalesce((select id from A where id = 15),(select id from A where id < 15 order by id desc limit 1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:06:15.780

还有另一种使用windows函数的方法：

```
select id
from (select id, lead(id) over (order by id) as nextid
      from t
     ) t
where nextid >= 12 
```

# c# - 如何使用 Log4Net 在日志文件中获取当前用户名而不是 AppPool 身份

> ID：11541289
> 
> 赞同：13
> 
> 时间：2012-07-18T12:24:31.993
> 
> 标签：c#, .net, asp.net-mvc-3, log4net

我们正在使用 ASP.NET MVC3 应用程序中的 Log4Net，一切正常，但我们希望在日志文件中查看当前用户名而不是应用程序池的身份，这是我们正在使用的附加程序配置：

```
<log4net>
    <appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
      <threshold value="ALL" />
      <immediateFlush>true</immediateFlush>
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <encoding value="utf-8" />
      <file value="C:\Logs\MyLogs.log" />
      <appendToFile value="true" />
      <rollingStyle value="Date" />
      <maxSizeRollBackups value="30" />
      <maximumFileSize value="25MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="[%property{log4net:HostName}] - %username%newline%utcdate - %-5level - %message%newline" />
      </layout>
    </appender>
    <root>
      <priority value="ALL" />
      <appender-ref ref="FileAppender" />
    </root>
</log4net> 
```

所以看起来属性：`%username`正在检索以下值：

```
WindowsIdentity.GetCurrent().Name 
```

而不是我们需要的：`HttpContext.Current.User`

关于如何在 web.config 中轻松解决此问题而不创建自定义属性或其他 log4net 派生类的任何想法？如果可能的话，如果自定义属性是我们可以忍受的唯一方式，我猜:)谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-18T12:34:27.403

替换`%username`为`%identity`应该这样做。它在我当前的项目中为我工作。

**[您可以通过这个](http://www.codeproject.com/Articles/140911/log4net-Tutorial)**出色的教程了解有关 log4net 的更多信息

# maps - 谷歌地图 GMT 时区偏移

> ID：11541290
> 
> 赞同：2
> 
> 时间：2012-07-18T12:24:35.167
> 
> 标签：maps

我一直在浏览文档，但找不到我要找的东西。

我需要找到地图上点击点的时区偏移量（例如 GMT +2:00）。我需要的只是+2部分。这是我到目前为止所拥有的：

```
google.maps.event.addListener(map, 'click', function(event) {
    marker = new google.maps.Marker({position: event.latLng, map: map});
    alert(event.latLng);
    alert(event.time_zone);
    var contentString = 'test';
    var infowindow = new google.maps.InfoWindow({content: contentString});  
    infowindow.open(map,marker);

}); 
```

# c# - 从 MVC 控制器将 HTML 渲染为字符串

> ID：11541295
> 
> 赞同：2
> 
> 时间：2012-07-18T12:24:43.733
> 
> 标签：c#, asp.net-mvc, controller

我读了这篇非常有用的帖子：[如何在 MVC3 中将 html 呈现为字符串](https://stackoverflow.com/questions/483091/render-a-view-as-a-string)而不是屏幕。

我已经创建了一个在我的控制器中执行此操作的函数。我现在希望能够从另一个项目的类中调用此方法，以便我可以将此功能作为服务提供。代码如下所示：

```
 using (var sw = new StringWriter())
        {
            var viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
            var viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
            viewResult.View.Render(viewContext, sw);
            viewResult.ViewEngine.ReleaseView(ControllerContext, viewResult.View);
            return sw.GetStringBuilder().ToString();
        } 
```

我想直接调用这个类，而不是通过 IIS。但随后 ControllerContext 为空。我可以以某种方式指定光盘上的视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:32:22.857

MVC 中的大多数控件都有一个名为`"ToHtmlString();"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:35:04.107

[http://msdn.microsoft.com/en-us/library/system.web.mvc.viewengineresult(v=vs.108](http://msdn.microsoft.com/en-us/library/system.web.mvc.viewengineresult(v=vs.108) )

您可以通过提供位置列表而不是调用 FindPartialView 创建 ViewEngineResult

# jquery - 单击按钮时的样式元素

> ID：11541308
> 
> 赞同：2
> 
> 时间：2012-07-18T12:25:34.153
> 
> 标签：jquery, css

我有动态创建的项目和按钮，我想通过使用 jquery 设置它们的样式来向用户展示正在发生的事情（我正在使用 AJAX）。每个项目如下所示：

```
<li class="items">
<div class="itemheading">
<div class="controls"> 
    <span class="votes">1</span>
    <form class="actions" method="POST">
        <input type="submit" class="button plus" value="+1" data-plus="123">
    </form>
    <form class="actions" method="POST">
        <input type="submit" class="button minus" value="-1" data-minus="123">
    </form>  
    <form class="actions" method="POST">
        <input type="submit" class="button delete" value="X" data-del="123">
    </form></div><span class="title">Item title</span>
</div>
<span class="infotext">Item Description</span>
</li> 
```

单击按钮时，我希望更新项目的样式。例如，如果单击 +1 按钮，则项目边框应淡化为绿色，然后在几秒钟内淡出至无，以表明该项目已被投票。

到目前为止，我想到的是以下内容：

```
$(".plus").live('click', function() {
 $(this).css("background", "#fff"); 
```

但这不起作用。我想我可以`$(this)`用来引用被点击的按钮，因为我已经在使用它来获取按钮的 data-tag 值：

```
var plus = $(this).data('plus'); 
```

另一个问题是，即使它确实有效，它也会设置按钮边框的样式，我需要以某种方式设置`<div class="itemheading">`. 我只能说 .itemheading 元素的样式，但由于我将拥有该类的多个项目，因此我需要找到另一种方法。也许有一种方法可以引用元素的父元素，然后我可以得到它的父元素？

谢谢。非常感谢任何帮助。

**更新：** 所以人们可以看到代码的工作原理。

```
$(".plus").live('click', function() {
 $(this).parents(".itemheading").css("background", "#000");
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:30:39.903

这是一个工作示例，不确定这是否是您所说的，但是在单击 +1 按钮后，带有 class .itemheading 的 class 的父元素会闪烁黑色。

示例 - [http://jsfiddle.net/yZmrz/](http://jsfiddle.net/yZmrz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:34:34.173

2个问题，

小问题是 .live 已被弃用，使用 .on 代替[http://api.jquery.com/on/](http://api.jquery.com/on/)

主要问题，您提到这些按钮是动态添加的，所以我猜您在创建元素之前绑定了 .live 事件。并且绑定仅适用于已经存在的元素。

要解决此问题，您应该将事件本身绑定到始终存在的父元素上，以处理对其子元素的点击。像这样：

```
$('.parent').on('click', '.plus', function(){
    $(this).css({background: "black"});
}); 
```

这样做的目的是确保每次单击 .plus 元素（它是 .parent 的后代）都会触发该函数，而不管它是何时创建的。

至于确保仅将更改应用于相关元素而不是所有元素，请使用遍历（[http://api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)）

traversing means that you can access elements by saying where they are relative to $(this). so that $(this).siblings('.myClass') will only select .myClass elements who are in the same element as $(this)

# c# - XAML 资源处理慢慢让我发疯

> ID：11541310
> 
> 赞同：0
> 
> 时间：2012-07-18T12:25:38.007
> 
> 标签：c#, wpf, uri, resourcedictionary, mergeddictionaries

我正在使用松散的 XAML（构建操作无，但始终复制到输出目录）。我还有一个“根”xaml，它是一个资源字典，它引用了一些位于子文件夹中的合并字典。这是我的文件夹结构：

```
<root>\Root.xaml
<root>\SubFolder1\MergedDict1.xaml
<root>\SubFolder1\MergedDict2.xaml
<root>\SubFolder2\MergedDict3.xaml
<root>\SubFolder2\MergedDict4.xaml 
```

我需要能够在不重新编译的情况下将其他 xaml 文件添加到文件夹中，这就是我需要使用松散 xamls 的原因。

在应用程序中，我加载了根 xaml，但总是得到无法找到合并字典的异常。我尝试了很多不同的变体来分配相对路径作为源。其中一些包括：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="<root>/SubFolder1/MergedDict1.xaml" />
    <ResourceDictionary Source="/SubFolder1/MergedDict1.xaml" />
    <ResourceDictionary Source="SubFolder1/MergedDict1.xaml" />
    <ResourceDictionary Source="./SubFolder1/MergedDict1.xaml" />
    <ResourceDictionary Source="../SubFolder1/MergedDict1.xaml" />
... 
```

令我惊讶（和持续的恐惧）他们都没有奏效。

我开始质疑我的理智，所以我什至编写了一个小型测试应用程序来为我生成相对路径，使用 URI：

```
 System.Uri uri2 = new Uri(@"C:\<root>\SubFolder1\MergedDict1.xaml");
        System.Uri uri1 = new Uri(@"C:\<root>");

        var r = uri1.MakeRelativeUri(uri2).ToString(); 
```

正如预期的那样，生成的相对路径是 SubFolder1/MergedDict1.xaml，也不起作用。谁能教我获得正确相对路径所涉及的黑魔法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:33:31.537

看起来您的 xaml 文件都在同一个组件中。不过，使用包 URI 可能会有所帮助：http: [//msdn.microsoft.com/en-us/library/aa970069.aspx](http://msdn.microsoft.com/en-us/library/aa970069.aspx)

# java - Java中是否有框架来设置持久层？

> ID：11541312
> 
> 赞同：1
> 
> 时间：2012-07-18T12:25:39.443
> 
> 标签：java, unit-testing, persistence, dao

我尝试为 Java Web 应用程序的持久层编写单元测试。我使用 JUnit 来测试服务层，我也想将它用于持久层。

因为应用程序是高度可定制的，所以可以通过配置更改持久层以使用支持 JDBC 的数据库（MySQL、Postgres、Oracle）和嵌入式数据库（sqljet）。是否有一个框架可以帮助我定义一个用于测试和设置数据存储的数据集？我的目标是编写一组测试并将其用于持久层的所有实现。DbUnit 不是一个选项，因为我有非 JDBC 版本的持久层 (sqljet)。

提前致谢，

马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:41:41.450

DBUnit 可能会帮助你

> DbUnit 是针对数据库驱动项目的 JUnit 扩展（也可与 Ant 一起使用），其中包括在测试运行之间将您的数据库置于已知状态。这是避免当一个测试用例损坏数据库并导致后续测试失败或加剧损坏时可能发生的无数问题的极好方法。
> 
> DbUnit 能够将您的数据库数据导出和导入 XML 数据集。从 2.0 版开始，当在流模式下使用时，DbUnit 也可以处理非常大的数据集。DbUnit 还可以帮助您验证您的数据库数据是否与预期的一组值匹配。

[http://www.dbunit.org/](http://www.dbunit.org/)

# asp.net-mvc-3 - 将 Html.Action 调用的结果存储在字典中？(ASP.NET MVC 3)

> ID：11541327
> 
> 赞同：0
> 
> 时间：2012-07-18T12:26:47.663
> 
> 标签：asp.net-mvc-3

我正在开发一个 ASP.NET MVC3 应用程序，我想从视图调用控制器并将该信息存储为字典。

**控制器代码：**

```
public Dictionary<string,int> foo()
{
    Dictionary<string,int> bar = new Dictionary<string,int>();
    bar.Add("test",100);
    return bar;
} 
```

**查看代码：**

```
@{ Dictionary<string,int> foobar = Html.Action("foo"); }
...
<div>@foobar["test"]</div> 
```

如果我使用`var foobar = Html.Action("foo");`，我可以让视图工作，但它只是说 foobar 是 type `System.Web.Mvc.MvcHtmlString`，所以我不能用它做太多。

是否有任何我缺少的内置功能，或者我应该为此使用类似 JSON 结果的东西？

**编辑：附加信息**

还应该注意的是，在 VS2010 调试器中，它将 foobar 正确识别为`{System.Collections.Generic.Dictionary'2[System.String,System.Int32]}`，所以问题是 foobar 没有正确解析。抛出的错误是：

```
Compiler Error Message: CS0021: Cannot apply indexing with [] 
to an expression of type 'System.Web.Mvc.MvcHtmlString' 
```

**编辑 2**

这些是将结果转换为字典时出现的错误：

`Url.Action("foo").ToDictionary<string,int>();`出于明显的原因返回`CS1501: No overload for method 'ToDictionary' takes 0 arguments`，但 VS2010 调试器识别出结果是字典：

![错误 1](../Images/afcec37177918c9c9e033dc9b9dc0cea.png)

但是当我添加参数 ( `Url.Action("foo").ToDictionary<string,int>(x=>x);`) 时，它会停止识别它是一个字典，尽管我不确定这些参数是否正确（它基于我在[此处](https://stackoverflow.com/questions/3611126/using-todictionary)找到的内容。

![错误 2](../Images/e872c9e2dd50aac47ddc115fd5eb20b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:18:12.317

你应该尽可能地让视图保持沉默。控制器必须将数据推送到视图。出于某种原因，如果您想调用一个执行复杂计算的函数，那么更好的主意是创建一个单独的静态类并将函数从控制器移动到该类。这`Html.Action`是完全不同的目的。您的控制器应始终返回操作结果，而不是字典或其他类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:22:42.877

对 Html.Action("foo") 的调用应该返回一个字符串。这样做是调用一个将子视图呈现为字符串的操作方法。请参阅[http://msdn.microsoft.com/en-us/library/ee721266](http://msdn.microsoft.com/en-us/library/ee721266)

您可以调用静态实用程序方法，请参阅[Is this an Extension or Helper Method in MVC3?](https://stackoverflow.com/questions/8178648/is-this-an-extension-or-helper-method-in-mvc3)

# ios - 如何在 iOS 中检查从 Internet 下载的数据百分比？

> ID：11541329
> 
> 赞同：2
> 
> 时间：2012-07-18T12:26:47.907
> 
> 标签：ios, nsdata

我正在尝试将数据从互联网下载到 iOS 中的 NSData。

当我从互联网下载数据时，我看不到从服务器下载了多少百分比。

我没有使用 UIWebView。

`.mp3`使用 NSData 从 Internet下载声音 ( )。

无论如何我可以知道从互联网下载了多少数据吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T13:44:09.557

脚步：

1) 使用对 .mp3 的 URL 的请求创建一个 NSURLConnection。

2）设置`self`为这个连接的代表。

3) 实现 NSURLConnectionDataDelegate 协议。（在您的类的接口声明旁边添加。

4）实现这些方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;
    statusCode = [httpResponse statusCode];
    if ((statusCode/100) == 2) 
    {
        contentLength = [httpResponse expectedContentLength];
        if (contentLength == NSURLResponseUnknownLength) 
                NSLog(@"unknown content length %ld", contentLength);
    }

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    bytesSum += [data length];
    percent = (float)bytesSum / (float)contentLength;

    // append the new data to the receivedData
    [receivedData appendData:data];     //received data is a NSMutableData ivar.

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
     //the end. Write your data ( stored in receivedData ) to a local .mp3 file.
} 
```

希望这可以帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:38:42.770

我建议看看这个：[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)

您可以使用它和其他好东西轻松跟踪上传和下载过程。

塞巴斯蒂安

# java - 我应该使用 ArrayList还是 List

> ID：11541338
> 
> 赞同：3
> 
> 时间：2012-07-18T12:27:09.833
> 
> 标签：java, android, optimization

我正在为 Android 开发并想知道，ArrayList 和 List 之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T12:29:08.123

对于Java中对象集合的处理，提供了Collection接口。这在`java.util package`.

**“List”**是一个接口，它扩展了集合接口，提供了一些比集合接口额外的方法来处理集合。其中**“ArrayList”**是“List”接口的实际实现。

除了 List接口中可用的**方法之外，ArrayList 类只有几个方法。**这没有太大区别。唯一的区别是，您在第一个中创建父接口的引用，并在第二个中创建实现 List（即）ArrayList 类的类的引用。如果你使用第一个，你将能够调用 List 接口中可用的方法，你不能调用 ArrayList 类中可用的新方法。而如果你使用第二个，你可以自由使用所有ArrayList 中可用的方法。

**编辑：**

在 Java 应用程序开发中，当您应该将集合框架对象作为参数传递给方法时，最好使用

```
List tempList = new ArrayList();
somemethodcall(tempList); 
```

因为，将来由于性能限制，如果您要更改实现以使用链表或其他一些实现 List 接口的类，而不是 ArrayList，则只能在一个点（即）仅更改实例化部分。否则，您将应该在所有区域进行更改，无论何时，您都使用特定的类实现作为方法参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T13:03:11.473

user370305 给出了准确的解释。这也可以帮助您理解 Java 中的集合层次结构。

![集合层次结构](../Images/be7410b500bed1c829c4c2c825cbbcbb.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T12:30:04.750

`List`是`ArrayList`实现的接口。如果您正在尝试创建一个需要`List`某种类型的方法，但您并不关心实际使用的是什么实现，那么请使用`List`.

如果您实际上是在实例化一个类，那么您必须选择其中`List`一个的一些实现是`ArrayList`

```
List<String> l1 = new ArrayList<String>(); 
```

将是一个例子。

您无法实例化接口，因此如果您尝试执行以下操作会出现错误：

```
List<String> l2 = new List<String>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:33:55.437

[维基百科](https://en.wikipedia.org/wiki/Linked_list#Linked_lists_vs._dynamic_arrays)上有一篇很好的文章，其中数组列表被称为“动态数组”。
如果您正在尝试优化您的应用程序，您应该查看文章旁边的表格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T12:34:54.250

`List`是一个接口，`ArrayList`是接口的一个实现`List`。除了接口中可用的方法之外，该类`ArrayList`只有几个方法。`List`

看看关于[*JavaBeat* - List 和 ArrayList 之间的区别的短文？](http://www.javabeat.net/qna/9-difference-between-list-and-arraylist-/)

# php - 在 Apache-Solr 中搜索部分单词

> ID：11541344
> 
> 赞同：0
> 
> 时间：2012-07-18T12:27:21.803
> 
> 标签：php, apache, tomcat, solr

我已经设置了 solr，我想通过提供该单词中的字符来搜索单词。示例：如果我给出“uni”，则单词是“大学”，它什么也不返回。我使用的字段类型是文本。defaultsearchfield 是文本，copyfield 也是文本。谢谢你。无人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:03:26.703

查看[通配符搜索](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html)。在您的特定情况下，搜索查询应该是`uni*`.

# java - Hadoop 新 API 的 Class Cast 异常

> ID：11541345
> 
> 赞同：1
> 
> 时间：2012-07-18T12:27:24.690
> 
> 标签：java, hadoop, mapreduce

我试图用 Map reduce 框架编写一些简单的代码。以前我使用 mapred 包实现，我能够将输入格式类指定为 KeyvalueTextInputFormat 但是在使用 mapreduce 的新 Api 中，这个类不存在。我尝试使用 TextInputFormat.class 但我仍然得到以下异常

```
- job_local_0001
java.lang.ClassCastException: org.apache.hadoop.io.LongWritable cannot be cast to org.apache.hadoop.io.Text
    at com.hp.hpl.mapReduceprocessing.MapReduceWrapper$HitFileProccesorMapper_internal.map(MapReduceWrapper.java:1)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:621)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:177) 
```

这是代码的示例片段

```
Configuration conf = new Configuration();
         conf.set("key.value.separator.output.line", ",");    

        Job job = new Job(conf, "Result Aggregation");
        job.setJarByClass(ProcessInputFile.class);

        job.setInputFormatClass(TextInputFormat.class);
        job.setOutputFormatClass(TextOutputFormat.class);

        job.setMapOutputKeyClass(Text.class);
        job.setMapOutputValueClass(Text.class);

        job.setMapperClass(MultithreadedMapper.class);
        MultithreadedMapper.setMapperClass(job, HitFileProccesorMapper_internal.class);
        MultithreadedMapper.setNumberOfThreads(job, 3);
        //job.setMapperClass(HitFileProccesorMapper_internal.class);
        job.setReducerClass(HitFileReducer_internal.class);

        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(Text.class);

        FileInputFormat.addInputPath(job, new Path(inputFileofhits.getName()));
        FileOutputFormat.setOutputPath(job, new Path(ProcessInputFile.resultAggProps
                .getProperty("OUTPUT_DIRECTORY")));

        try {
            job.waitForCompletion(true);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

请让我知道要进行哪些配置更改，以避免类转换异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:09:29.593

这通常发生在 MapReduce 尝试作为键/值传递的类型与 Map 或 Reduce 类模板化的类型不匹配时。

你说你正在使用`KeyvalueTextInputFormat`，但在你的代码中你正在使用[`TextInputFormat`](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/mapred/TextInputFormat.html)。`TextInputFormat`提供记录为`<LongWritable, Text>`：“位置，行”。

我猜你的 Mapper 的类型是`<Text, Text, ?, ?>`. 因此，MapReduce 试图将`LongWritable`提供`TextInputFormat`给它的 a 强制转换为 a `Text`，但它不能，所以它被炸毁了。

我建议您或者`KeyvalueTextInputFormat`将映射器的类型更改为`<LongWritable, Text, ?, ?>`.

# r - R filter() 处理 NA

> ID：11541348
> 
> 赞同：7
> 
> 时间：2012-07-18T12:27:29.710
> 
> 标签：r, filter, signals, time-series, na

我正在尝试实现切比雪夫滤波器来平滑时间序列，但不幸的是，数据序列中有 NA。

例如，

```
t <- seq(0, 1, len = 100)                     
x <- c(sin(2*pi*t*2.3) + 0.25*rnorm(length(t)),NA, cos(2*pi*t*2.3) + 0.25*rnorm(length(t))) 
```

我正在使用切比雪夫过滤器：`cf1 = cheby1(5, 3, 1/44, type = "low")`

我正在尝试过滤排除 NA 的时间序列，但不要弄乱订单/位置。所以，我已经试过了`na.rm=T`，但似乎没有这样的论点。然后

```
z <- filter(cf1, x)   # apply filter 
```

谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:45:08.313

尝试使用`x <- x[!is.na(x)]`删除 NA，然后运行过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:46:52.163

`compelete.cases`您可以使用该功能预先删除 NA 。您也可以考虑估算缺失的数据。查看 mtsdi 或 Amelia II 软件包。

**编辑：**

这是 Rcpp 的解决方案。这可能会有所帮助，因为速度很重要：

```
require(inline)
require(Rcpp)
t <- seq(0, 1, len = 100)
set.seed(7337)
x <- c(sin(2*pi*t*2.3) + 0.25*rnorm(length(t)),NA, cos(2*pi*t*2.3) + 0.25*rnorm(length(t)))
NAs <- x
x2 <- x[!is.na(x)]
#do something to x2
src <- '
Rcpp::NumericVector vecX(vx);
Rcpp::NumericVector vecNA(vNA);
int j = 0;   //counter for vx
for (int i=0;i<vecNA.size();i++) {
  if (!(R_IsNA(vecNA[i]))) {
    //replace and update j
    vecNA[i] = vecX[j];
    j++;
  }
 }
return Rcpp::wrap(vecNA);
'
fun <- cxxfunction(signature(vx="numeric",
                             vNA="numeric"),
                   src,plugin="Rcpp")
if (identical(x,fun(x2,NAs)))
    print("worked")
# [1] "worked" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:00:28.757

我不知道`ts`对象是否可以缺少值，但如果您只想重新插入`NA`值，您可以使用`?insert`from `R.utils`。可能有更好的方法来做到这一点。

```
install.packages(c('R.utils', 'signal'))
require(R.utils)
require(signal)
t <- seq(0, 1, len = 100)                     
set.seed(7337)
x <- c(sin(2*pi*t*2.3) + 0.25*rnorm(length(t)), NA, NA, cos(2*pi*t*2.3) + 0.25*rnorm(length(t)), NA)
cf1 = cheby1(5, 3, 1/44, type = "low")
xex <- na.omit(x)
z <- filter(cf1, xex)   # apply
z <- as.numeric(z)
for (m in attributes(xex)$na.action) {
  z <- insert(z, ats = m, values = NA)
}
all.equal(is.na(z), is.na(x))
?insert 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-23T21:31:51.017

这是一个函数，您可以使用它来过滤带有 NA 的信号。NA 被忽略而不是被零替换。

然后，您可以指定 NA 在滤波信号的任何点上可能占据的最大权重百分比。如果某个特定点的 NA 太多（而实际数据太少），则滤波后的信号本身将设置为 NA。

```
# This function applies a filter to a time series with potentially missing data 

filter_with_NA <- function(x,
                           window_length=12,                            # will be applied centrally
                           myfilter=rep(1/window_length,window_length), # a boxcar filter by default
                           max_percentage_NA=25)                        # which percentage of weight created by NA should not be exceeded
{
  # make the signal longer at both sides
  signal <- c(rep(NA,window_length),x,rep(NA,window_length))
  # see where data are present and not NA
  present <- is.finite(signal)

  # replace the NA values by zero
  signal[!is.finite(signal)] <- 0
  # apply the filter
  filtered_signal <- as.numeric(filter(signal,myfilter, sides=2))

  # find out which percentage of the filtered signal was created by non-NA values
  # this is easy because the filter is linear
  original_weight <- as.numeric(filter(present,myfilter, sides=2))
  # where this is lower than one, the signal is now artificially smaller 
  # because we added zeros - compensate that
  filtered_signal <- filtered_signal / original_weight
  # but where there are too few values present, discard the signal
  filtered_signal[100*(1-original_weight) > max_percentage_NA] <- NA

  # cut away the padding to left and right which we previously inserted
  filtered_signal <- filtered_signal[((window_length+1):(window_length+length(x)))]
  return(filtered_signal)
} 
```

# python-2.7 - 如何编写一个循环，我可以将不同的集合存储在不同的容器中：

> ID：11541350
> 
> 赞同：0
> 
> 时间：2012-07-18T12:27:33.310
> 
> 标签：python-2.7

我有一个包含不同 miRNA 及其靶基因的大 dic。我使用 dic.values 来弹出他们的目标基因。因为我想计算它们的目标基因的交集（也称为共享目标），使用 set.()。现在我有一个问题是：如何编写一个循环，我可以将不同的集合存储在不同的容器中：

我想修改这个脚本：

```
a1 = set(d1.values()[0])
a2 = set(d1.values()[1])
a3 = set(d1.values()[2]) 
```

请帮我一把。T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:30:45.933

如果您只需要所有值的交集：

```
set.intersection(*d1.values()) 
```

# javascript - jQuery position().top 返回 0 而不是实际值

> ID：11541362
> 
> 赞同：16
> 
> 时间：2012-07-18T12:28:35.330
> 
> 标签：javascript, jquery

根据 jQuery 官方文档，这个函数应该：

**“获取匹配元素集中第一个元素相对于偏移父元素的当前坐标。”**

以下代码预计返回值 51，但它返回值 0。任何人都可以提供见解，为什么？提前致谢。

我知道添加 css(top:xx) 有效，如果是这样，这是否意味着 position() 仅适用于元素具有顶部 css 属性的情况？

```
<html>

<head>
    <style type="text/css">
        .outer
        {
            width:200px;
            height:200px;
            overflow-y:auto;
            border:1px dotted grey;
            position:absolute;
        }
        .inner
        {
            width:50px;
            height:50px;
            margin-top:  50px;
            border:1px solid red;
        }
    </style>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript"">

        $(document).ready(function () {
            $('.inner').mousedown(function (e) {
                alert($(this).position().top);
            })
        })
    </script>
</head>
<body>

    <div class="outer">
        <div class="inner"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T13:45:29.663

API 描述正确。内部元素的（初始）默认 CSS 属性值为`top:auto`. 如您所知，有一个`margin-top:50px`给人的印象是内部元素是`50px`从顶部开始的，但事实并非如此。jQuery 将返回`position().top = 0`，因为元素的顶部确实`0px`来自父元素。

为了让 jQuery 使用该函数返回预期值，[`.position()`](http://api.jquery.com/position/)您需要将内部`<div>`相对（或绝对取决于您的需要）定位到父级并提供最高值并删除该`margin-top`属性，例如：

```
.inner {
  position:relative;
  top:50px;
  ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T12:31:56.253

它警告 0，这是 100% 正确的，因为当您使用它们来定位元素时，top 仅返回 0 以外的值，但在这里您使用边距和填充来定位元素，因此使用它们来获取顶部距离。像

```
$(document).ready(function () {
            $('.inner').mousedown(function (e) {
                alert($(this).css("margin-top"));
            })
        }) 
```

如果您想使用位置，请执行此操作

```
.inner
        {   position:absolute;
            width:50px;
            height:50px;
            top:  50px;
            border:1px solid red;
        } 
```

然后进行正常的编码

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T12:34:04.513

这对你有帮助吗？：

`document.getElementById("innerDiv").offsetTop;`

或者使用jquery的[偏移](http://api.jquery.com/offset/)方法：

> .offset() 方法允许我们检索元素相对于文档的当前位置。将此与 .position() 进行对比，后者检索相对于偏移父级的当前位置。当将新元素放置在现有元素之上以进行全局操作（特别是用于实现拖放）时，.offset() 更有用。

# database - Oracle 物化视图 VS 物理表

> ID：11541368
> 
> 赞同：4
> 
> 时间：2012-07-18T12:28:54.567
> 
> 标签：database, performance, oracle, oracle11g

*注意：Oracle 11gR2 标准版（所以没有分区）*

所以我必须建立一个流程，从包含大约 2700 万条记录的表中构建报告。我面临的困境是我无法从该表中创建自己的索引，因为它是我们无法更改的第 3 方表。因此，我开始尝试使用物化视图，然后我可以在其中创建自己的索引，或者创建一个基本上只是我会根据需要截断并重新填充的副本的物理表。

MAT 视图的优点是它基本上是从“实时”表中提取的，所以我不必担心差异，只要我在使用前刷新它，问题是刷新似乎需要大量时间. 然后我决定尝试物理表方法，我尝试截断和重新填充（大约需要 10 分钟），然后重建索引（需要另外 10 个，给予或接受）....我还尝试只使用“新”记录进行更新通过执行：

```
INSERT... SELECT where NOT Exists (Select 1 from Table where PK = PK) 
```

无论我的索引、并行度等如何，这几乎都需要 10 分钟...

有没有人不得不处理如此大量的数据（这将继续增长）并找到一种性能良好且有效的方法？

似乎视图不行......所以我只剩下这两个选项，因为我无法调整我的主表上的索引，所以任何提示建议将不胜感激......这个过程的整个目的是为了让报告“更快”，但不知何故，我在某些领域获得了性能，但考虑到我需要移动的数据量，我最终会在其他领域失去。除了以下是否还有其他选择：

1.  截断/填充表，重建索引
2.  从不存在 PK 的主表填充辅助表
3.  物化视图（刷新、重建索引）
4.  从 Live 表中提取的视图（无新索引）

在此先感谢您的任何建议.....

有谁知道如果我在第二个选项上进行插入时呈现我的索引并且这样不可用，或者它是否应该非常相似，那么执行“将表创建为选择...”是否比“插入...选择”表现更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:31:21.877

我认为对于此类任务的非常简单的方法有很多话要说。考虑在重复表上进行截断和直接路径（追加）插入，而不禁用/重建索引，并在表上设置 NOLOGGING。直接路径插入具有与之关联的索引维护机制，它可能比加载后运行多个索引重建更有效，因为它在临时段中记录构建索引所需的数据，从而避免后续的多次全表扫描。

如果您确实想尝试禁用/重建索引，那么请尝试在不使用查询并行性的情况下同时重建所有索引，因为只会使用一次物理全扫描——其余的扫描将是“寄生的”，因为它们将从内存中读取表块。

当您加载重复表时，请考虑对 select 中的行进行排序，以便报表上的常用谓词能​​够访问更少的块。例如，如果您通常查询日期范围，请按日期列排序。请记住，可以通过减少报告查询执行时间来恢复构建此报告表所花费的一点额外时间。

也可以考虑压缩表，但前提是您使用直接路径插入加载，除非您有昂贵的高级压缩选项。索引压缩和位图索引也值得考虑。

另外，请考虑不分析报表。报告查询通常使用多个谓词，而这些谓词使用常规统计信息无法很好地估计，并且无论如何您都必须依靠动态抽样来进行良好的基数估计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:10:25.567

“将表创建为选择”生成较少的撤消。这是一个优势。当数据被“插入”时，索引也会被维护并且性能会受到负面影响。

# xcode - 在 Xcode 4.3.3 (4E3002) 中：在 Storyboard 中按住 Ctrl 键并拖动到 .h 文件会导致 Xcode 崩溃

> ID：11541369
> 
> 赞同：1
> 
> 时间：2012-07-18T12:29:02.470
> 
> 标签：xcode, storyboard

我有一个大问题：每当我在故事板中并按 Ctrl 键从一个按钮拖动到它的 .h 文件中时，给一个随机名称并单击 Enter 创建一个动作，Xcode 总是崩溃。我已经重新启动了 Mac OS，重新安装了 Xcode，从头开始制作了一个新的故事板，但这一切都没有帮助，错误并没有改变最微小的一点。有谁知道我的设置有什么问题？

编辑：我解决了。问题是：包含按钮的 ViewController 的标题视图被切换到 iOS 库标题 (.h) 文件。所以 Xcode 试图写入一个写保护的库 .h 文件，因此崩溃了。我 Ctrl-Dragged Button 到一个正确的项目内头文件中，它完美地工作。

由于我对 Xcode 完全陌生，我没有意识到该文件不是从 Xcode 自动生成的，而是预先编写的和一个 iOS 库文件。

# python - Python正则表达式引擎和模式中的括号

> ID：11541373
> 
> 赞同：-3
> 
> 时间：2012-07-18T12:29:20.033
> 
> 标签：python, regex

我正在编写一个驱动程序来处理来自我 ssh 进入的终端的特定类型的提示。

驱动程序中的代码正在寻找从设备接收到的特定模式，以了解何时发送附加命令或退出等。

驱动程序中的代码将模式作为正则表达式。我已经为正则表达式尝试了许多不同的模式组合来处理这个提示`'(Cisco Controller) >'`，但无济于事。我尝试转义括号`'\(Cisco Controller\)\s*>'`，尝试使用原始字符串 `r'\(Cisco Controller\)\s*>'`，并且尝试了多种其他组合，但我通常以错误“不平衡括号”或“虚假转义字符”告终。为什么我不能让正则表达式引擎接受这种模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:58:47.830

我认为您发布的字符串的原始版本没有任何问题......当在字符串上进行测试时，`'(Cisco Controller) > Command to execute would be here'`它似乎匹配得很好。

```
Python 2.6.8 (unknown, Jun  9 2012, 11:30:32)
[GCC 4.5.3] on cygwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import re
>>> regex = re.compile(r'\(Cisco Controller\)\s*>')
>>> match = regex.search('(Cisco Controller) > Command to execute would be here')
>>> match
<_sre.SRE_Match object at 0x7ff3e720>
>>> 
```

# nosql - Couchbase：将视图与存储桶同步

> ID：11541379
> 
> 赞同：0
> 
> 时间：2012-07-18T12:29:42.730
> 
> 标签：nosql, couchdb, couchbase

我有一个问题要问沙发库专业人士：是否可以将文档子集（例如视图中的文档）与其他存储桶同步？

这样其他存储桶文档始终是“主”存储桶的直接子集吗？如果是这样，就性能而言，这不是很昂贵吗？还是 couchbase 有什么功能可以只创建文档的深层链接而不是复制它？

或者：是否可以在视图上编写视图？

先感谢您！

- - 编辑 - -

假设我想要两组（桶）文档 S1 和 S2。S2 是 S1 的子集。每个集合都包含相同的视图 V1、V2 和 V3，因为我希望能够使用相同的逻辑/接口查询它们中的任何一个。在我的情况下，集合 S2 是按用户/公司/商店/任何东西构建的，在生产中应该有大约 1000 个子集 S2 - 为了保持抽象，我们称它们为 S2a S2b 和 S2c。

包含在任何子集中的文档的选择由过滤实例（例如视图）完成。我们将这些过滤实例称为 F1，用于过滤 S1 到 S2，因此称为 F1a、F1b 和 F1c。

因此，根据我对 couchbase 的实际了解，这导致了以下设计/视图架构：我有三个“基本”视图来显示 V1、V2 和 V3，并且要实现 S2a、S2b 和 S2c，我必须创建设计视图 S2aV1 、S2aV2、S2aV3、S2bV1、S2bV2 等（9 次浏览）。

有人可能会说“明智地选择你的键，你可以避免子视图”，但在我看来，这并不容易，因为以下情况：在最坏的情况下，过滤器参数每分钟都在变化，并且包含许多 WHERE IN 约束，这可能（以我的实际观点）无法有效地处理查询 k/v 列表。

这导致了以下想法和我最初提出的问题。如果我在任何子集（由过滤器定义）中使用相同的视图，是否应该建立一个帮助我处理复杂过滤的实体？例如，在生成视图输出时在运行时调用的函数？这可能看起来像 /design/view?filter=F1 或类似的东西。

或者你有其他解决这个问题的想法吗？或者我应该使用 SQL，因为它更能处理频繁变化的过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:02:13.380

一般来说，对于大多数模型，您实际上并不需要存储桶“子集”，您尝试这样做是否有特殊原因，以及为什么您希望将这些数据分解？您还可以查询您的视图，或者代替视图上的视图，您可以制作一个单独的视图，根据您的需要进一步映射/过滤（即与视图上的视图执行相同的工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:30:45.790

我们正在研究 Elastic Search 集成。也许更适合您的用例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:13:40.747

我认为您要做的是在原始存储桶上编写一个视图，然后从该视图复制键/值，作为新存储桶中的文档。

编写一个自动化框架来管理它应该不难，这样您就可以近乎实时地使派生数据保持最新。

# ruby - 从视图执行 ruby 脚本

> ID：11541381
> 
> 赞同：1
> 
> 时间：2012-07-18T12:29:44.327
> 
> 标签：ruby, ruby-on-rails-3

我是 Ruby 和 RoR 的新手。我使用 Prawn 在 Ruby 中制作了一个 pdf 生成器。现在我想从我的 Rails 视图中执行它。

```
<%= form_for @assemble do |f| %>
      <div class="row">
        <div class="span2">
          <h2 style="text-align: right;">Your</h2>
          <ul id="download_ul">
            <li style="margin-top: 5px;"><%= f.label :title_top %> </li>
            <li style="margin-top: 13px;"><%= f.label :text_top %></li>
            <li style="margin-top: 13px;"><%= f.label :link %></li>
            <li style="margin-top: 13px;"><%= f.label :title_bottom %></li>
            <li style="margin-top: 13px;"><%= f.label :text_bottom %></li>
            <li style="margin-top: 13px;"><%= f.label :qr_code_url %></li>
            <li style="margin-top: 13px;"><%= f.label :photo %></li>
            <li style="margin-top: 13px;"><%= f.label :logo %></li>
            <li style="margin-top: 10px;"><%= f.label :format %></li>
            <li style="margin-top: 0px;"><%= f.label :cut_lines %></li>
          </ul>
        </div>
        <div class="span3">
          <h2>Information</h2>
          <form method="post" action="../generate_pdf.rb">
            <ul class="download_ul">
              <li><%= f.text_field :title_top %></li>
              <li><%= f.text_area :text_top%></li>
              <li><%= f.text_field :link%></li>
              <li><%= f.text_field :title_bottom %></li>
              <li><%= f.text_area :text_bottom %></li>
              <li><%= f.text_field :qr_code_url %></li>
              <li><%= f.text_field :photo %></li>
              <li><%= f.text_field :logo %></li>
              <li style="margin-top: 6px;">
                A4<%= f.check_box :format_a4 %>
                A5<%= f.check_box :format_a5 %>
                Letter<%= f.check_box :format_letter %>
                Business card<%= f.check_box :format_business_card %>
              </li>
              <li style="margin-top: 6px;">
                True<%= f.check_box :cut_lines_true, f.row %>
                False<%= f.check_box :cut_lines_false %>
              </li>
            </ul>
            <p><%= f.submit %>></p>
          </form>
        </div>
        <div class="span6">
          <h2>Example</h2>
          <p><%= image_tag("a5.png", :size => "420x600") %></p>
        </div>
      </div>
  <% end %> 
```

要在 ruby​​ 中执行我的 prawn-app，我使用 run.rb：

```
require '../lib/generator.rb'

PDFGenerator::A5.new(filename: "a5.pdf",
  colors: {
    instructions:         "525149",
    instructions_header:  "000000",
    panel:                "001430",
    experience:           "FFFFFF",
    qr_reader:            "525149"
  },
  texts: {
    qr_code_instructions: "*Some text ",
    instructions_header:  "Some text",
    instructions:         "Some text",
    link:                 "Some text",
    experience_header:    "Some text",
    experience:           "Some text"
  },
  photo:   "images/img.jpg",
  qr_code: "images/qr.png",
  logo:    "images/logo.png").generate 
```

我的控制器和模型文件：

```
class AssembleController < ApplicationController
  def index
    redirect_to new_assemble_path
  end

  def new
    @assemble = Assemble.new
  end
end

class Assemble < ActiveRecord::Base
  # attr_accessible :title, :body
end 
```

我希望很清楚我打算做什么。我很抱歉提出与其他人类似的问题，但我真的没有在我的代码中看到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T13:25:26.323

您需要在控制器中创建一个操作，该操作应该调用您的脚本并返回生成的 pdf。然后您可以`send_file`在公共文件夹中使用或保存文件并将其 url 返回给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T14:24:47.490

正如 Yuri 指出的那样，你必须做出一个控制器动作来做到这一点。 [Web 应用程序 101](http://dgrmm.wordpress.com/2012/07/13/web-application-101/)：要从浏览器获取操作以在服务器上执行某些操作，您必须执行请求周期。

[railscast](http://railscasts.com/episodes/153-pdfs-with-prawn/)剧集中说明了一种生成 pdf 的方法。如果不是这样，您至少需要设置响应标头，以便浏览器理解它是 pdf 而不是 html。

# sql - 在没有 LISTAGG 的 Oracle SQL 中按字符串列表排序

> ID：11541383
> 
> 赞同：5
> 
> 时间：2012-07-18T12:29:47.973
> 
> 标签：sql, oracle, oracle11gr2

我正在使用两个实体：`Item`和`Attribute`，它们看起来如下所示：

```
Item
----
itemId

Attribute
---------
attributeId
name 
```

一个`Item`has `Attributes`，在关联表中指定：

```
ItemAttribute
--------------
itemId
attributeId 
```

当此数据到达客户端时，它将显示为每`Item`行，每行将有一个`Attribute`按名称列出的 s 列表。例如：

```
Item  Attributes
----  ----------
1     A, B, C
2     A, C
3     A, B 
```

用户可以选择对`Attributes`列进行排序，因此我们需要能够按如下方式对数据进行排序：

```
Item  Attributes
----  ----------
3     A, B
1     A, B, C
2     A, C 
```

目前，我们每`ItemAttribute`行获取一行数据。基本上：

```
 SELECT Item.itemId,
         Attribute.name
    FROM Item
    JOIN ItemAttribute
      ON ItemAttribute.itemId = Item.itemId
    JOIN Attribute
      ON Attribute.attributeId = ItemAttribute.attributeId
ORDER BY Item.itemId; 
```

这会产生如下结果：

```
itemId  name
------  ----
1       A
1       B
1       C
2       A
2       C
3       A
3       B 
```

实际`ORDER BY`子句基于用户输入。它通常是单列，因此排序很简单，处理结果集的应用程序端循环将`Attribute`名称组合成一个逗号分隔的列表，以便在客户端显示。但是当用户要求对该列表进行排序时，最好让 Oracle 对结果进行排序，这样——使用上面的示例——我们会得到：

```
itemId  name
------  ----
3       A
3       B
1       A
1       B
1       C
2       A
2       C 
```

oracle的`LISTAGG`函数可以用来生成排序前的属性列表；然而`Attribute.name`可以是一个很长的字符串，并且组合列表可能大于 4000 个字符，这会导致查询失败。

是否有一种干净、有效的方法可以使用 Oracle SQL (11gR2) 以这种方式对数据进行排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T14:12:40.097

这里真的有两个问题：

### 1）如何聚合4000多字符的数据

汇总这么多数据并将其显示在单个列中是否明智？

无论如何，您将需要某种大型结构来显示超过 4000 个字符，`CLOB`例如。[您可以按照Tom Kyte 的线程](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::NO::P11_QUESTION_ID:2196162600402)之一中描述的一般准则编写自己的聚合方法（显然您需要对其进行修改，以便最终输出为 CLOB）。

我将使用嵌套表和自定义函数演示一个更简单的方法（适用于 10g）：

```
SQL> CREATE TYPE tab_varchar2 AS TABLE OF VARCHAR2(4000);
  2  /

Type created.

SQL> CREATE OR REPLACE FUNCTION concat_array(p tab_varchar2) RETURN CLOB IS
  2     l_result CLOB;
  3  BEGIN
  4     FOR cc IN (SELECT column_value FROM TABLE(p) ORDER BY column_value) LOOP
  5        l_result := l_result ||' '|| cc.column_value;
  6     END LOOP;
  7     return l_result;
  8  END;
  9  /

Function created.

SQL> SELECT item,
  2         concat_array(CAST (collect(attribute) AS tab_varchar2)) attributes
  3    FROM data
  4   GROUP BY item;

ITEM ATTRIBUTES
1    a b c
2    a c
3    a b 
```

### 2）如何对大数据进行排序

不幸的是，您不能在 Oracle 中按任意大的列进行排序：存在与排序键的类型和长度相关的已知限制。

*   尝试使用 clob 进行排序将导致`ORA-00932`：不一致的数据类型：预期 - 得到 CLOB。
*   尝试使用大于数据库块大小的键进行排序（例如，如果您决定将大数据拆分为许多 VARCHAR2）将产生`ORA-06502`：PL/SQL: numeric or value error: string buffer too small

我建议您按属性列的前 4000 个字节排序：

```
SQL> SELECT * FROM (
  2     SELECT item,
  3            concat_array(CAST (collect(attribute) AS tab_varchar2)) attributes
  4       FROM data
  5      GROUP BY item
  6  ) order by dbms_lob.substr(attributes, 4000, 1);

ITEM ATTRIBUTES
3    a b
1    a b c
2    a c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:51:19.853

正如文森特已经说过的，排序键是有限的（没有 CLOB，最大块大小）。

我可以提供一个稍微不同的解决方案，它在 10g 和更新版本中开箱即用，不需要使用 XMLAgg 的自定义函数和类型：

```
with ItemAttribute  as (
 select 'name'||level name
        ,mod(level,3) itemid
   from dual
  connect by level < 2000
)
,ItemAttributeGrouped as (
 select xmlagg(xmlparse(content name||' ' wellformed) order by name).getclobval() attributes
       ,itemid
   from ItemAttribute
  group by itemid
 )
select itemid
      ,attributes
      ,dbms_lob.substr(attributes,4000,1) sortkey
  from ItemAttributeGrouped
order by dbms_lob.substr(attributes,4000,1)
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:48:29.663

清洁是主观的，需要检查效率（但它仍然只出现一次，所以可能不会更糟），但是如果你对任何项目可能的属性数量有一个有限的上限 - 或者在潜在客户您必须考虑订购多少 - 如果您可以使用多个[`lead`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions086.htm)调用来执行此操作：

```
SELECT itemId, name
  FROM (
    SELECT itemId, name, min(dr) over (partition by itemId) as dr
      FROM (
        SELECT itemId, name,
            dense_rank() over (order by name, name1, name2, name3, name4) as dr
          FROM (
            SELECT Item.itemId,
                     Attribute.name,
                     LEAD(Attribute.name, 1)
                         OVER (PARTITION BY Item.itemId
                             ORDER BY Attribute.name) AS name1,
                     LEAD(Attribute.name, 2)
                         OVER (PARTITION BY Item.itemId
                             ORDER BY Attribute.name) AS name2,
                     LEAD(Attribute.name, 3)
                         OVER (PARTITION BY Item.itemId
                             ORDER BY Attribute.name) AS name3,
                     LEAD(Attribute.name, 4)
                         OVER (PARTITION BY Item.itemId
                             ORDER BY Attribute.name) AS name4
                FROM Item
                JOIN ItemAttribute
                  ON ItemAttribute.itemId = Item.itemId
                JOIN Attribute
                  ON Attribute.attributeId = ItemAttribute.attributeId
               )
          )
      )
ORDER BY dr, name; 
```

因此，内部查询正在获取您关心的两个值，并使用四个`lead`调用（仅作为示例，因此这可以根据前五个属性名称的最大值进行排序，但当然可以通过添加更多来扩展！）了解每个项目还有什么。有了你的数据，这给出了：

```
 ITEMID NAME       NAME1      NAME2      NAME3      NAME4
---------- ---------- ---------- ---------- ---------- ----------
         1 A          B          C
         1 B          C
         1 C
         2 A          C
         2 C
         3 A          B
         3 B 
```

下一个查询对这五个有序属性名称进行 a ，它为每个and[`dense_rank`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions052.htm)分配一个等级，给出：`itemID``name`

```
 ITEMID NAME               DR
---------- ---------- ----------
         1 A                   1
         1 B                   4
         1 C                   6
         2 A                   3
         2 C                   6
         3 A                   2
         3 B                   5 
```

下一个查询使用 的分析版本查找每个的计算`dr`值的最小值，因此 each得到、得到和得到。（您可以通过选择来组合这两个级别，但这（甚至）不太清楚）。`itemId`[`min`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions100.htm)`itemID=1``min(dr) = 1``itemId=2``3``itemId=3``2``min(dense_rank(...))`

最后的外部查询使用每个项目的最小排名来进行实际排序，给出：

```
 ITEMID NAME
---------- ----------
         1 A
         1 B
         1 C
         3 A
         3 B
         2 A
         2 C 
```

# wpf - listBox DataTemplate 没有拾取值

> ID：11541386
> 
> 赞同：0
> 
> 时间：2012-07-18T12:29:55.013
> 
> 标签：wpf, xaml, datatemplate

我正在学习使用 MSDN 中的示例将 WPF 中的 listBox 与 dataTemplate 一起使用，我可以将绑定到 ObservableCollection 的 listBox 作为源呈现并通过覆盖 ToString 方法。

但是，我需要为每个项目渲染一个图像和一些 texblocks。这是我的 XAML：

```
<Grid x:Class="MyAddin.WPFControls"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:c="clr-namespace:MyAddin"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
             Background="Transparent"
             HorizontalAlignment="Stretch" Width="auto"
             Height="215" VerticalAlignment="Stretch" ShowGridLines="False">
    <Grid.Resources>
        <c:People x:Key="MyFriends"/>
    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <TextBlock HorizontalAlignment="Left" 
               IsManipulationEnabled="True" 
               Height="20" Width="300">Activity Feed</TextBlock>
    <ListBox Grid.Row="1" Name="listBox1" IsSynchronizedWithCurrentItem="True" 
             BorderThickness="0" ScrollViewer.VerticalScrollBarVisibility="Auto"
             VerticalContentAlignment="Stretch" Margin="0,0,0,5" Background="Transparent">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Border Margin="5" BorderBrush="Black" BorderThickness="1">
                        <Image Source="{Binding Path=Avatar}" Stretch="Fill" Width="50" Height="50" />
                    </Border>
                    <StackPanel Grid.Column="1" Margin="5">
                        <StackPanel Orientation="Horizontal" TextBlock.FontWeight="Bold" >
                            <TextBlock Text="{Binding Path=Firstname }" />
                        </StackPanel>
                        <TextBlock Text="{Binding Path=Comment}" />
                    </StackPanel>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

我的 Collection 类如下：

```
public class People : ObservableCollection<Person>
{ }        

public class Person
{
    private string firstName;
    private string comment;
    private Bitmap avatar;

    public Person(string first, string comment, Bitmap avatar)
    {
        this.firstName = first;
        this.comment = comment;
        this.avatar = avatar;
    }

    public string FirstName
    {
        get { return firstName; }
        set { firstName = value; }
    }

    public string Comment
    {
        get { return comment; }
        set { comment = value; }
    }

    public Bitmap Avatar
    {
        get { return avatar;}
        set { avatar = value; }
    }

    public override string ToString()
    {
        return firstName.ToString();
    }
} 
```

加载插件后，我将下载数据并设置 itemsSource。

```
People p = new People();
p.Add(new Person("Willa", "Some Comment", myAvatar));
p.Add(new Person("Isak", "Some Comment", myAvatar));
p.Add(new Person("Victor", "Some Comment", myAvatar));

this.wpfControl.listBox1.ItemsSource = p; 
```

我面临的问题是这些项目被呈现为空行，而如果我删除 dataTemplate，则项目的名字会很好地呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:37:59.700

绑定本身没有任何问题，但您的头像类型似乎关闭，WPF 预计[`ImageSource`](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesource.aspx)（我不知道 Bitmap 和 之间是否存在任何隐式转换`ImageSource`，请检查[绑定错误](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/30/debugging-data-bindings-in-a-wpf-or-silverlight-application.aspxhttp://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/30/debugging-data-bindings-in-a-wpf-or-silverlight-application.aspx)以找出答案）。

# iphone - 以编程方式对齐 NavigationBar 中的按钮或按钮之间的空间

> ID：11541388
> 
> 赞同：2
> 
> 时间：2012-07-18T12:30:09.717
> 
> 标签：iphone, objective-c, ios, storyboard

我已经通过故事板界面创建了导航控制器，并且我在导航栏上以编程方式添加了 4 个按钮，但我不知道我应该如何证明它的合理性，请你帮助我！

这是图片：

![截屏](../Images/a21932ac1fcfd35323855c5c07dedaac.png)

这是我知道的按钮代码我使用了**rightBarButtonItems**但我不知道应该写什么！

```
 - (void)viewDidLoad
{
[super viewDidLoad];

  UIBarButtonItem *menuButton= [[UIBarButtonItem alloc] initWithTitle:@"Menu" style:UIBarButtonItemStyleDone  
       target:self action:@selector(menu:)];

UIBarButtonItem *yearButton= [[UIBarButtonItem alloc] initWithTitle:@"Year" style:UIBarButtonItemStyleDone
target:self action:@selector(year:)];
 UIBarButtonItem *weekButton= [[UIBarButtonItem alloc] initWithTitle:@"Week" style:UIBarButtonItemStyleDone 
 target:self action:@selector(week:)];
 UIBarButtonItem *reportButton= [[UIBarButtonItem alloc] initWithTitle:@"Report" style:UIBarButtonItemStyleDone 
  target:self action:@selector(report:)];

NSArray *buttons = [NSArray arrayWithObjects:menuButton,yearButton,weekButton,reportButton,nil];
self.navigationItem.rightBarButtonItems = buttons;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:41:54.053

在每个按钮之间添加灵活的垫片：

```
UIBarButtonItem *flexibleSpacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil]; 
```

# wso2 - WSO2 数据服务存档导出 (.car) 引发以下“导出存档时发生错误：索引：0，大小：0”

> ID：11541398
> 
> 赞同：0
> 
> 时间：2012-07-18T12:30:43.477
> 
> 标签：wso2, wso2dss, wso2developerstudio

我正在研究新的 WSO2 Developer Studio 附带的零售银行示例。

我在开发人员工作室中使用 Java 1.7 sdk

我已经完成了示例中的所有工件，当我尝试将文件导出为要部署在服务器上的碳应用程序存档（汽车）时，我得到了以下错误。

“导出存档时发生错误：索引：0，大小：0”请参阅下面的链接以获取错误快照

这仅在我尝试导出客户数据服务时发生。所有其他我可以很好地导出。

我在这里错过了什么吗？对此的任何帮助将不胜感激

奥马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:08:12.993

这是由于 Developer Studio 2.0.0 的数据服务导出器中的一个错误而发生的，它只影响 Windows 用户。

此错误已在即将发布的 Developer Studio 2.0.1 版本中修复，您可以从[此处](http://builder1.us1.wso2.org/~developerstudio/developer-studio/2.0.1/)下载最终的 RC 包。

谢谢并恭祝安康，

哈沙娜

# highcharts - 谷歌广告网站的 Highcharts 和 highstock 许可证

> ID：11541401
> 
> 赞同：1
> 
> 时间：2012-07-18T12:30:45.170
> 
> 标签：highcharts, highstock

如果我在我的网站中使用`highcharts`或并向该网站添加一些内容，我的网站是否将其视为盈利网站并要求我购买许可证`highstock``Google Ads`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:12:39.337

是的，您必须购买许可证。以下直接来自他们的网站：

**什么是商业网站？**

商业网站是指以**产生任何类型的收入或现金流为**目的的网站，并且不属于非营利组织。因此，如果您销售产品、销售广告、销售服务或只是营销商业业务，那么您的网站就是商业网站。公司网站即使不卖任何东西也是商业的，因为它的目的是为了迎合商业公司。

因此，根据上述内容，如果`Google Ads`产生任何利润，那么您需要购买许可证。

# enums - 使用 EBean 在数据库中存储枚举名称，而不是值

> ID：11541402
> 
> 赞同：7
> 
> 时间：2012-07-18T12:30:44.677
> 
> 标签：enums, playframework-2.0, ebean

我有这个枚举：

```
public enum DocumentTypes {
    PDF("PDF Document"), JPG("Image files (JPG)"), DOC("Microsoft Word documents");

    private final String displayName;

    DocumentTypes(final String display) {
        this.displayName = display;
    }

    @Override
    public String toString() {
        return this.displayName;
    }
} 
```

和这样的模型：

```
@Entity
@Table(name = "documents")
public class Document extends Model {
    @Id
    public Long id;

    @Constraints.Required
    @Formats.NonEmpty
    @Enumerated(EnumType.STRING)
    @Column(length=20, nullable=false)
    public DocumentTypes type;

    @Constraints.Required
    @Formats.NonEmpty
    @Column(nullable=false)
    public String document;
} 
```

我在我的控制器中使用它来匹配枚举：

```
DynamicForm form = form().bindFromRequest();
// ...
Document doc = new Document();
doc.type = DocumentTypes.valueOf(form.field("type").value());
doc.save(); 
```

问题是在数据库中，它存储为“Microsoft Word 文档”，但我更愿意将其存储为 DOC。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T10:51:21.523

[您可以使用 Annotation EnumMapping](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/annotation/EnumMapping.html)或[EnumValue](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/annotation/EnumValue.html)对其进行非常精细的定义。这适用于旧版本 org.avaje.ebean。

似乎对代码进行了完全重写。在实际版本中有不同的[做法](http://ebean-orm.github.io/docs/mapping/extension/dbenumvalue)。

# iphone - sqliteManager 的更新问题

> ID：11541405
> 
> 赞同：0
> 
> 时间：2012-07-18T12:30:53.073
> 
> 标签：iphone, ios, ipad, sqlite

我无法进行更新，但插入和选择工作正常。

笔记：

1）我使用的包装器来自：[https ://github.com/misato/SQLiteManager4iOS](https://github.com/misato/SQLiteManager4iOS)

2) 相同的代码适用于 INSERT 语句，但不适用于更新

```
//NSString* sqlStr = (@"INSERT INTO sbu (sbuName) VALUES ( 'rrrr' );)"); //WORKS 
```

3）这是代码：

与本次更新相关的代码如下：

我的内联代码

```
 NSString* sqlStr = (@"UPDATE User SET Name = 'wweerr' WHERE Id = 19"); //using a direct sql to verify if it works - does not
    SQLiteManager* dbManager =[[SQLiteManager alloc]initWithDatabaseNamed:@"data.db"];
    NSError* error = [dbManager doQuery:sqlStr]; 
```

从图书馆：

```
- (NSError *)doQuery:(NSString *)sql {

    NSError *openError = nil;
    NSError *errorQuery = nil;

    //Check if database is open and ready.
    if (db == nil) {
        openError = [self openDatabase];
    }

    if (openError == nil) {     
        sqlite3_stmt *statement;    
        const char *query = [sql UTF8String];
        sqlite3_prepare_v2(db, query, -1, &statement, NULL);

        if (sqlite3_step(statement) == SQLITE_ERROR) {
            const char *errorMsg = sqlite3_errmsg(db);
            errorQuery = [self createDBErrorWithDescription:[NSString stringWithCString:errorMsg encoding:NSUTF8StringEncoding]
                                                    andCode:kDBErrorQuery];
        }
        //NSLog(@"sql error: %@", error)
        NSInteger result =  sqlite3_finalize(statement);
        errorQuery = [self closeDatabase];
    }
    else {
        errorQuery = openError;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:46:49.107

我会尝试使用“WHERE Id = '19'”（19 带单引号），因为该字段可能已被定义为文本，因为 sqlite 字段是弱类型的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:46:32.140

我发现了陷阱。我已经使用以下方法包装了字符串：**initWithFormat**。

我只是分配一个这样的变量：

```
NSString *sqlStr = [[NSString alloc] initWithFormat:@"UPDATE User SET Name = 'some name' WHERE sbuId = 19"]; 
```

现在我只是将该变量传递给：

```
NSError* error = [[Utilities dbManager] doQuery:sqlStr]; 
```

TODO/TO_ASK：

为什么同样的事情不适用于：

```
 NSString* sqlStr = [NSString stringWithFormat:@"UPDATE User SET Name = 'some name' WHERE sbuId = 19"]; 
```

# jquery - jQuery 不会模拟点击 mailto 链接

> ID：11541408
> 
> 赞同：1
> 
> 时间：2012-07-18T12:30:55.240
> 
> 标签：jquery

在我的 jQuery Mobile 应用程序中，我试图以编程方式单击 mailto 链接，但没有成功。

这是HTML代码：

```
<section id="mensen" data-role="page">

<div data-role="content" class="content">
<a id="emailLink" href="mailto:123@123.com">This is the email link</a>

</div>
</section> 
```

jQuery代码是：

```
$(document).ready(function()
{   
$('#emailLink').click();
}) 
```

链接功能正常，如果直接单击，则会启动默认电子邮件客户端，但不会以编程方式发生任何事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T12:39:37.893

确实是的，但这会起作用

```
$(document).ready(function()
{   
   $('#emailLink')[0].click();
})​ 
```

编辑：（“为什么？”评论）

因为使用 jquery $(...) 完成的查询返回元素的数组/对象。我们必须使用索引 [0]（只需要一个，因为它是一个 id）才能调用链接对象的 .click 函数，而不是在 jquery 结果数组上。 ~~顺便说一句，我不希望数组具有该功能~~

jquery 结果数组应该有一个 .get(...) 函数来从结果中检索元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:35:13.053

绑定点击事件并使用窗口位置触发事件：

```
<a id='test' href="mailto:test@test.nl">Test</a>​ 
```

和jQuery：

```
$('#test').bind('click', function() {
  window.location.href = $(this).attr('href'); 
});

$('#test').click(); 
```

​</p>

[JSFIDDLE](http://jsfiddle.net/S7wtS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-04T20:24:40.713

在尝试了此页面上的所有答案和评论后，我终于能够打开一个包含主题和目标属性的 mailto 链接。我只在 Chrome（版本 37.0.2062.124 m）和 IE-11 中对此进行了测试：

```
 $("#form-email").on("submit",
        function (e) {
            e.preventDefault();
            var mailto = "aname.gmail"
            $("#email-form").attr("href", "mailto:" + mailto.replace(".", "@") + ".com?subject=Email from someone...");
            document.getElementById('email-form').click();
        }
    ); 
```

**HTML**

```
 <a href="" id="email-form" target="_blank" > 
```

# ajax - 解码 Ajax 响应

> ID：11541414
> 
> 赞同：1
> 
> 时间：2012-07-18T12:31:07.283
> 
> 标签：ajax, extjs

我是 ext Js 的新手。

我有一个ajax调用。我可以在警报上看到响应文本，但假设对 responseText 进行解码的下一行不会在警报框中产生任何结果。

我的功能是这样的：

```
function openToRecipients()
{

    Ext.Ajax.request({
        url: "Redirector?id=ClinicalInitiateForm&wfid=CLINICALONGOINGWFINITIATE",
        method: 'POST',                 
            success: function(response, opts) 
            {
                alert(response.responseText);
                var dataCurrent = Ext.util.JSON.decode(response.responseText);
                alert(dataCurrent );
                var jsonStr = dataCurrent.cData;
                recipientJsonResponse = dataCurrent.dataGrid;
                var myObject = eval('(' + jsonStr + ')');
                gridStore = new Ext.data.JsonStore({
                    id : 'gridStore',
                    autoLoad : true,
                    data : myObject,
                    root : 'data',
                    fields:['NAME',
                               'CLIENT',
                               'DESCRIPTION'
                         ],
                    listeners :{
                        load  : gridDisplay
                    }
                });
                },
            failure: function(response, opts) {
                alert("fail");
            }

    });

} 
```

这是我转换为字符串后的 json

```
"formFields" : [ {
    "id" : "NAME",
    "set" : "",
    "label" : "Name",
    "dataType" : "string",
    "editType" : "static",
    "clientConfig" : "",
    "hide" : "False",
    "required" : "",
    "mask" : "",
    "maxValue" : "",
    "maxLength" : "",
    "minValue" : "",
    "value" : "",
    "showIf" : "",
    "options" : "",
    "prePopulate" : "",
    "shortForm" : "",
    "comments" : "",
    "optionsValue" : "",
    "currentValue" : "",
    "disabled" : "",
    "qTip" : "",
    "hover" : ""
  }, {
    "id" : "CLIENT",
    "set" : "",
    "label" : "Client",
    "dataType" : "string",
    "editType" : "static",
    "clientConfig" : "",
    "hide" : "False",
    "required" : "",
    "mask" : "",
    "maxValue" : "",
    "maxLength" : "",
    "minValue" : "",
    "value" : "",
    "showIf" : "",
    "options" : "",
    "prePopulate" : "",
    "shortForm" : "",
    "comments" : "",
    "optionsValue" : "",
    "currentValue" : "",
    "disabled" : "",
    "qTip" : "",
    "hover" : ""
  }, {
    "id" : "DESCRIPTION",
    "set" : "",
    "label" : "Description",
    "dataType" : "string",
    "editType" : "static",
    "clientConfig" : "",
    "hide" : "False",
    "required" : "",
    "mask" : "",
    "maxValue" : "",
    "maxLength" : "",
    "minValue" : "",
    "value" : "",
    "showIf" : "",
    "options" : "",
    "prePopulate" : "",
    "shortForm" : "",
    "comments" : "",
    "optionsValue" : "",
    "currentValue" : "",
    "disabled" : "",
    "qTip" : "",
    "hover" : ""
  } ], 
```

这是我的数据

```
{'data':[{"NAME":"Shan","CLIENT":"CSC","DESCRIPTION":"Computer science"}]} 
```

我怎样才能在我的网格中拥有这些数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:05:30.207

这是您可以使用的代码：

```
var myStore = Ext.create( "Ext.data.JsonStore", {
    fields: [ "firstname", "lastname" ], // the fields of each item (table line)
    proxy: {
        type: "ajax",    // the proxy uses ajax
        actionMethods: { // this config is not necessary for you. I needed to use it to be able to work with the echo service of jsFiddle. if you want to use post (as I saw in your post, you can skip this)
            create: "POST",
            read: "POST",
            update: "POST",
            destroy: "POST"
        },
        url: "/echo/json/", // here will come your URL that returns your JSON (in your case "Redirector?id..."
        reader: {
            type: "json",  // this store reads data in json format
            root: "items"  // the itens to be read are inserted in a "items" array, in you case "formFields"
        }
    }
});

// in jsFiddle, we need to send the JSON that we want to read. In your case, you will just call .load() or set the autoLoad config of the store to true. If you want send adition parameters, you can use the sintax below.
myStore.load({
    params: {
        // everything inside the encode method will be encoded in json (this format that you must send to the store)
        json: Ext.encode({
            items: [{
                "firstname": "foo",
                "lastname": "bar"
            }, {
                "firstname": "david",
                "lastname": "buzatto"
            }, {
                "firstname": "douglas",
                "lastname": "adams"
            }]
        })
    }
});

// creatin the grid, setting its columns and the store
Ext.create( "Ext.grid.Panel", {
    title: "My Grid",
    columns: [{
        header: "First Name",
        dataIndex: "firstname"   // the dataIndex config is used to bind the column with the json data of each item
    }, {
        header: "Last Name",
        dataIndex: "lastname"
    }],
    store: myStore,           // the store created above
    renderTo: Ext.getBody()   // render the grid to the body
}); 
```

您可以在此处访问小提琴：http: [//jsfiddle.net/cYwhK/1/](http://jsfiddle.net/cYwhK/1/) 文档：

*   JsonStore：[http ://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.data.JsonStore](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.data.JsonStore)
*   Ajax 代理：[http ://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.data.proxy.Ajax](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.data.proxy.Ajax)
*   网格：[http ://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.grid.Panel](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.grid.Panel)

我忘了说的另一个想法是，您可以在商店中使用模型而不是字段数组。模型就像 OO 语言中的一个类。看看：[http ://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.data.Model](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.data.Model)

# java - 为什么我在这段代码中得到 StringIndexOutOfBoundsException？

> ID：11541415
> 
> 赞同：0
> 
> 时间：2012-07-18T12:31:08.680
> 
> 标签：java, indexoutofboundsexception

我在 Java 中收到以下错误消息

```
Exception in thread "main" 

    java.lang.StringIndexOutOfBoundsException: String index out of range: 0 
```

这是我的代码 -

```
public static void main(String[] args) {

    double gissade = 70;
    int input;
    java.util.Scanner in = new java.util.Scanner(System.in);

    char spelaIgen = 'j';
    // char input2;

    int antal = 1;

    while (spelaIgen == 'j') {
        System.out.print("gissa ett number?");
        Input = in.nextInt();

        if (input < gissade) {
            System.out.println("du har gissat för lågt försök igen");
            antal++;
        } else if (input > gissade) {
            System.out.println("du har gissat för högt försök igen");

            antal++;
        }
        if (input == gissade) {
            System.out.println("du har gissat rätt");
            System.out.println("efter " + antal + " försök");
        }

        System.out.println("vill du försöka igen? j/n");
        char input2 = in.nextLine().charAt(0);
        // String s1=in.nextLine();
        // char c1=s1.charAt(0);

        // if (input=='n');
        // System.exit(0);

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:33:19.823

这是因为`nextInt()`不会消耗 newLine，所以当您尝试执行时会得到一个空字符串`readLine()`，并尝试执行

```
"".charAt(0); 
```

这会引发您的异常。

尝试`nextLine()`在`nextInt()`.

一个好的做法是始终使用`nextLine()`, 然后解析你得到的字符串。举个`int`例子，你可以这样做：

```
String intInput;
do {
  System.out.print("gissa ett nummer?");
  intInput = in.nextLine();
while(!intInput.matches("\\d+"));
int number = Integer.parseInt(intInput); 
```

这将重复，直到您输入一个有效的数字。

# c - 如何在 GZIP 文件中分隔块？

> ID：11541423
> 
> 赞同：1
> 
> 时间：2012-07-18T12:31:27.323
> 
> 标签：c, gzip

我正在为学习目的编写一个解压缩 GZIP 文件的 C 程序。

根据 GZIP[规范](http://www.gzip.org/zlib/rfc-gzip.html)

> gzip 文件由一系列“成员”（压缩数据集）组成。每个成员的格式在下一节中指定。成员只是在文件中一个接一个地出现，在它们之前、之间或之后没有其他信息。

一个成员由一个标题（可能带有取决于某些标志值的可选字段）、一些压缩块（使用 deflate 算法）和最后一个 CRC32 和原始未压缩文件的大小组成。

我有两个问题：

1.  如何划分成员？实际上，一个 gzip 文件中真的有多个成员吗？似乎一个成员对应一个文件（例如文件名标题）
2.  如何分隔预告片的最后一个块（CRC + SIZE）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:46:40.387

这并不常见，但您有时会在单个文件中看到串联的 gzip 流。gzip 认为这是单个数据流，而不是多个“文件”，因此忽略文件名。

如果“如何分隔最后一个块”是指最后一个放气块，那么最后一个放气块只是在其标题中有一个位，将其标记为最后一个块。最后一个放气块后面是 crc 和未压缩的长度（模 2^32）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-18T06:35:59.740

> 如何划分成员？

成员没有分隔。它们之间没有分离，这就是为什么您可以`cat`像使用非 gzip 压缩文件一样将文件压缩在一起的原因。但是，一旦到达一个成员的末尾，您可以查找指示下一个成员开始的 ID1 和 ID2 值。从规范：

> 它们具有固定值 ID1 = 31 (0x1f, \037), ID2 = 139 (0x8b, \213)，以将文件标识为 gzip 格式。

这使您可以在文件末尾告诉除垃圾之外的另一个成员的开始。

如果您希望跳转到文件中的特定成员而不读取所有其他成员，则可以使用预先计算的索引，例如[CDX 文件提供](https://iipc.github.io/warc-specifications/specifications/cdx-format/cdx-2015/)的.

> 实际上，一个 gzip 文件中真的有多个成员吗？

[gzipped WARC 文件](http://bibnum.bnf.fr/warc/WARC_ISO_28500_version1_latestdraft.pdf)（用于存档网站）很常见。每条记录都是一个单独的成员，以便于查找。但是，该格式不依赖此功能。

# c++ - C++ 解析输入

> ID：11541425
> 
> 赞同：1
> 
> 时间：2012-07-18T12:31:36.987
> 
> 标签：c++, c

我需要解析一个看起来像这样的 C++ 标准输入：

**纳米（对）**

```
0 0
2 1 (0,1)
2 0
5 8 (0,1) (1,3) (2,3) (0,2) (0,1) (2,3) (2,4) (2,4) 
```

如果 N > 0 && M > 0，那么 M 对将跟随。这是单行输入，所以我不知道该怎么做。

我有一些解决方案，但有些东西告诉我这不是最好的。

```
void input(){
    int a[100][2];
    int n,m;
    char ch;
    cin >> n >> m;
    for ( int i = 0; i < m; i++) {
        cin >> ch >> a[i][0]>> ch>> a[i][1]>>ch;    
    }

    cout << n << " " << m << " \n";

    for ( int i=0; i < m; i++ ) {
        cout << "(" << a[i][0] << " ," << a[i][1] << ")";   
    }
} 
```

我的问题是最好/更正确的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T12:38:38.433

由于应用程序的输入数据永远不可信，因此添加错误检查以查看所提供的数据确实有效（否则应用程序的结果可能会在解析时出现错误）非常重要。

处理此类错误的*“C++ 方式”*是在负责解析数据的函数中出现问题时*抛出异常。*

然后，此函数的调用者将调用包装在*try-catch-block*中以捕获可能出现的错误。

* * *

### 使用*用户定义类型*..

定义自己的类型来保存数据对将大大提高代码的可读性，以下实现的输出与本文后面的实现是相同的。

```
#include <iostream>
#include <string>
#include <sstream>
#include <stdexcept> 
```

```
struct Pair {
  Pair (int a, int b)
    : value1 (a), value2 (b)
  {}

  static Pair read_from (std::istream& s) {
    int value1, value2;

    if ((s >> std::ws).peek () != '(' || !s.ignore () || !(s >> value1))
      throw std::runtime_error ("unexpected tokens; expected -> (, <value1>");

    if ((s >> std::ws).peek () != ',' || !s.ignore () || !(s >> value2))
      throw std::runtime_error ("unexpected tokens; expected -> , <value2>");

    if ((s >> std::ws).peek () != ')' || !s.ignore ())
      throw std::runtime_error ("unexpected token;expected -> )");

    return Pair (value1,value2);
  }

  int value1, value2;
}; 
```

^(我注意到程序员可能难以理解上述内容的一件事是使用`s >> std::ws`; 它用于消耗可用*的空白*，以便我们可以使用`.peek`来获取下一个可用的非空白字符。)

^(我实现静态函数的原因是后者将要求我们在从流中读取之前创建一个对象，这在某些情况下是不可取的`read_from`。`ostream& operator>>(ostream&, Pair&)`)

```
void
parse_data () {
  std::string line;

  while (std::getline (std::cin, line)) {
    std::istringstream iss (line);
    int N, M;

    if (!(iss >> N >> M))
      throw "unable to read N or M";
    else
      std::cerr << "N = " << N << ", M = " << M << "\n";

    for (int i =0; i < M; ++i) {
      Pair data = Pair::read_from (iss);

      std::cerr << "\tvalue1 = " << data.value1 << ", ";
      std::cerr << "\tvalue2 = " << data.value2 << "\n";
    }
  }
} 
```

^(通常我不建议只用大写命名非常量变量，但为了更清楚地说明哪个变量包含我使用与输入描述相同的名称。)

```
int
main (int argc, char *argv[])
{
  try {
    parse_data ();

  } catch (std::exception& e) {
    std::cerr << e.what () << "\n";
  }
} 
```

* * *

### 不使用*用户定义类型*

解析数据以及检查错误的直接方法是使用以下内容，尽管使用*用户定义的对象*和运算符重载可以大大改进它。

> 1.  *使用std::getline*读取每一行
> **   构造 n *std::istringstream iss (line)*并读取该行*   尝试使用*iss >> N >> M读取两个整数**   使用带有*iss >> s1*的 std::string s1*读取*M个* *“单词” ；* *1.  使用*s1*作为初始化器构造一个*std::istringstream inner_iss*
>     **   看看下一个可用的字符是`(`&& 忽略这个字符*   读取整数*   看看下一个可用的字符是`,`&& 忽略这个字符*   读取整数*   看看下一个可用的字符是`)`&& 忽略这个字符***

 ***如果在第 4 步之后 stringstream 不为空，或者*iss.good ()*在步骤之间的任何位置返回 false，则说明读取的数据存在语法错误。

* * *

### 示例实现

可以通过以下链接找到源代码（代码放在别处以节省空间）：

*   **[ideone.com - 不使用用户定义类型的示例片段](http://ideone.com/g2dT9)**

```
N = 0, M = 0
N = 2, M = 1
     value1 = 0, value2 = 1
N = 2, M = 0
N = 5, M = 8
     value1 = 0, value2 = 1
     value1 = 1, value2 = 3
     value1 = 2, value2 = 3
     value1 = 0, value2 = 2
     value1 = 0, value2 = 1
     value1 = 2, value2 = 3
     value1 = 2, value2 = 4
     value1 = 2, value2 = 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:40:17.293

如果要求操作的数据都在一行上，那么最好的技术可能是将行读入字符串，然后解析从输入字符串初始化的字符串流。

您应该考虑是否需要验证括号和逗号是否真的是括号和逗号 - 如果输入是：您会生成错误：

```
23 2 @3;8= %      7      %     12     % 
```

您的代码目前会接受它为有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:44:07.827

像这样的典型解决方案是为对定义一个类型，并`>>`为它实现一个运算符。就像是：

```
class Pair
{
    int first;
    int second;
public:
    Pair( int first, int second );
    //  ...
};

std::istream&
operator>>( std::istream& source, Pair& object )
{
    char open;
    char separ;
    char close;
    int first;
    int second;
    if ( source >> open >> first >> separ >> second >> close
            && open == '(' && separ == ',' && close == ')' ) {
        object = Pair( first, second );
    } else {
        source.setstate( std::ios_base::failbit );
    }
    return source;
} 
```

鉴于此，要读取文件：

```
std::string line;
while ( std::getline( source, line ) ) {
    std::istringstream l( line );
    int n;
    int m;
    std::vector<Pair> pairs;
    l >> n >> m;
    if ( !l ) {
        //  Syntax error...
    }
    Pair p;
    while ( l >> p ) {
        pairs.push_back( p );
    }
    if ( ! l.eof() ) {
        //  Error encountered somewhere...
    }
    //  Other consistency checks...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T13:01:26.863

对于此类任务，我更喜欢[Boost.Spirit ：](http://www.boost.org/doc/libs/1_49_0/libs/spirit/doc/html/)

```
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/adapted/struct/adapt_struct.hpp>

#include <boost/fusion/include/std_pair.hpp>

#include <string>
#include <iostream>

struct input {
  int x, y;
  typedef std::pair<int, int> pair;
  std::vector< pair > pairs;
};

BOOST_FUSION_ADAPT_STRUCT(
  input,
  (int, x)
  (int, y)
  (std::vector< input::pair >, pairs))

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;

template<typename Iterator>
struct input_parser : qi::grammar<Iterator, input(), ascii::space_type> {
  input_parser() : input_parser::base_type(start) {
    // two integers followed by a possibly empty list of pairs
    start = qi::int_ >> qi::int_ >> *pair;
    // a tuple delimited by braces and values separated by comma
    pair = '(' >> qi::int_ >> ',' >> qi::int_ >> ')';
  }

  qi::rule<Iterator, input(), ascii::space_type> start;
  qi::rule<Iterator, input::pair(), ascii::space_type> pair;
};

template<typename Iterator>
void parse_and_print(Iterator begin, Iterator end) {
    input x;
    input_parser<Iterator> p;
    bool r = qi::phrase_parse(begin, end, p, ascii::space, x);
    if(!r) {
      std::cerr << "Error parsing" << std::endl;
      return;
    }

    std::cout << "Output" << std::endl;
    std::cout << "x: " << x.x << std::endl;
    std::cout << "y: " << x.y << std::endl;
    if(x.pairs.empty()) {
      std::cout << "No pairs.";
    } else {
      for(std::vector<input::pair>::iterator it = x.pairs.begin(); 
          it != x.pairs.end(); ++it) { 
        std::cout << "(" << it->first << ',' << it->second << ") ";
      }
    }
    std::cout << std::endl;
}

int main()
{
    namespace qi = boost::spirit::qi;

    std::string input1 = "0 0";
    std::string input2 = "2 1 (0,1)";
    std::string input3 = "2 0";
    std::string input4 = "5 8 (0,1) (1,3) (2,3) (0,2) (0,1) (2,3) (2,4) (2,4)";
    parse_and_print(input1.begin(), input1.end());
    parse_and_print(input2.begin(), input2.end());
    parse_and_print(input3.begin(), input3.end());
    parse_and_print(input4.begin(), input4.end());
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-26T07:50:28.410

由于您已经注意到输入中的模式，因此字符串标记器之类的任何东西都可以解决您的问题。

为此，您可以使用[`strtok`](http://www.cplusplus.com/reference/clibrary/cstring/strtok/) 函数。对于[Boost 库](http://www.boost.org/doc/libs/1_46_1/libs/tokenizer/index.html)的实现也很有用，并且[在这里得到了很好的例证](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)***

# perl - 在 o conf init /proxy/ 之后使用带有代理失败的 CPAN

> ID：11541428
> 
> 赞同：17
> 
> 时间：2012-07-18T12:31:48.657
> 
> 标签：perl, configuration, proxy, cpan

我在企业环境中有一个 Linux 机器，其中 Web 访问是通过需要身份验证的代理来控制的。

在 cpan 的第一次运行期间，它会自动配置它通常所做的一切：

> 自动配置除“urllist”之外的所有内容。请立即调用“o conf init urllist”来配置您的 CPAN 服务器！
> 
> 提交：写了'/usr/lib/perl5/5.10.0/CPAN/Config.pm'

知道我有一个要导航的代理，并阅读了有关代理和 cpan 的文档和网络上的几页我：

> cpan[1]> o conf 初始化 /proxy/
> 
> 如果您通过代理访问网络，您可以在 CPAN 配置中或通过环境变量指定它们。$CPAN::Config 中的变量优先。
> 
> 你的ftp_proxy？[]
> 
> 你的 http_proxy？[] 10.12.8.9:3128
> 
> 你的 no_proxy？[]
> 
> 如果您的代理是身份验证代理，您可以永久存储您的用户名。如果您不想这样，只需按 RETURN。然后，您将在以后的每个会话中被要求输入您的用户名。
> 
> 您的代理用户 ID？[] my_net_id
> 
> 您的身份验证代理密码也可以永久存储在磁盘上。如果这违反了您的安全策略，只需按 RETURN。然后，您将在以后的每个会话中被要求输入密码。
> 
> CPAN: Term::ReadKey loaded ok (v2.30) 你的代理密码？请记住调用“o conf commit”以使配置永久化！
> 
> cpan[2]> o conf commit commit: 写 '/usr/lib/perl5/5.10.0/CPAN/Config.pm'

现在一切都应该好了，对吧？所以我希望，

> cpan[3]> i /Some::Module/ CPAN: 可存储加载正常 (v2.18)
> 
> 我想连接到以下站点之一以获取“authors/01mailrc.txt.gz”：
> 
> [http://www.perl.org/CPAN/](http://www.perl.org/CPAN/) [ftp://ftp.perl.org/pub/CPAN/](ftp://ftp.perl.org/pub/CPAN/)
> 
> 可以尝试连接到 Internet 吗？[是] LWP 不可用
> 
> 尝试使用“/usr/bin/curl -L -f -s -S --netrc-optional” 来获取 [http://www.perl.org/CPAN/authors/01mailrc.txt.gz](http://www.perl.org/CPAN/authors/01mailrc.txt.gz) curl: (22)请求的 URL 返回错误：407
> 
> 系统调用 "/usr/bin/curl -L -f -s -S --netrc-optional " [http://www.perl.org/CPAN/authors/01mailrc.txt.gz](http://www.perl.org/CPAN/authors/01mailrc.txt.gz) " > /root/.cpan/ sources/authors/01mailrc.txt.tmp29726" 返回状态 22 (wstat 5632) 警告：预期文件 [/root/.cpan/sources/authors/01mailrc.txt.gz.tmp29726] 不存在
> 
> 尝试使用“/usr/bin/wget -O /root/.cpan/sources/authors/01mailrc.txt.tmp29726”来获取 [http://www.perl.org/CPAN/authors/01mailrc.txt.gz](http://www.perl.org/CPAN/authors/01mailrc.txt.gz) -- 2012-07-17 15:57:38-- [http://www.perl.org/CPAN/authors/01mailrc.txt.gz](http://www.perl.org/CPAN/authors/01mailrc.txt.gz)连接到 10.12.8.9:3128... 已连接。已发送代理请求，等待响应... 301 已永久移动 位置： [http](http://www.cpan.org/authors/01mailrc.txt.gz) ://www.cpan.org/authors/01mailrc.txt.gz [以下]--2012-07-17 15:57:38-- [http: //www.cpan.org/authors/01mailrc.txt.gz](http://www.cpan.org/authors/01mailrc.txt.gz)连接到 10.12.8.9:3128... 已连接。已发送代理请求，等待响应... 407 需要代理身份验证 2012-07-17 15:57:38 错误 407：需要代理身份验证。

那么密码提示在哪里呢？

将 cpan 配置为通过具有身份验证的公司代理访问 Internet，我缺少什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-25T04:20:07.413

您需要提供绝对代理 URL 地址来配置 CPAN 代理设置。不要担心，而不是简单地提供 IP 地址和端口号，请提供如下所示。

```
cpan> o conf init /proxy/

Your ftp_proxy? [] ftp://10.12.8.9:3128

Your http_proxy? [] http://10.12.8.9:3128

Your no_proxy? [] 
```

并根据需要提供**用户名**和**密码**（确保您具有下载权限）

我也有同样的问题，但现在它对我有用。我也应该为你工作。

BR杰里·詹姆斯

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-18T15:53:22.763

安装 LWP。cpan 实用程序正在使用 curl，我猜是因为它无法加载 LWP。没有将代理参数传递给 curl，因此您需要在运行命令之前导出 http_proxy=http://host:port/。

或者，如果您可以使用您的发行版的包管理器安装 LWP，那么它应该正确配置代理访问。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T14:31:35.137

您可以在调用之前尝试使用它`cpan`：

```
export http_proxy=http://my_net_id:my_net_pwd@10.12.8.9:3128/ 
```

这种方式可能`curl`会使用代理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-18T09:48:43.993

```
[root@localhost ~] cpan 
```

终端不支持 AddHistory。

cpan shell -- CPAN 探索和模块安装 (v1.9800) 输入“h”寻求帮助。

# 列出我的下载地址

```
cpan[1]> o conf urllist 

urllist
    0 [http://mirror.waia.asn.au/pub/cpan/]
    1 [ftp://mirrors.coopvgg.com.ar/CPAN/]
    2 [http://httpupdate3.cpanel.net/CPAN/] 
```

输入'o conf'查看所有配置项

# 添加 CPAN 镜像列表

```
cpan[2]> o conf urllist push http://httpupdate3.cpanel.net/CPAN/ 
```

请使用 'o conf commit' 使配置永久化！

# 犯罪

```
cpan[3]> o conf commit 
```

提交：写了'/root/.cpan/CPAN/MyConfig.pm'

盘[4]>

现在您可以再次安装 perl 模块，例如： `cpan -i Text::Template`

# iphone - 无法以编程方式打开电话应用程序

> ID：11541433
> 
> 赞同：0
> 
> 时间：2012-07-18T12:32:00.327
> 
> 标签：iphone, ios

```
 NSString *phoneStr = @"tel:";
 phoneStr = [phoneStr stringByAppendingFormat:@"%@" , self.ContactPhone];
 NSURL * phoneURL = [NSURL URLWithString:phoneStr];
 [[UIApplication sharedApplication] openURL:phoneURL]; 
```

此代码不起作用且无法打开电话应用程序，当我打印 phoneURL 的值时，它始终为 null

为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:56:10.097

您需要转义电话字符串：

```
[NSURL URLWithString:[phoneStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:41:36.203

你错过了**//**电话后**：**

```
NSString *phoneStr = @"tel://";
 phoneStr = [phoneStr stringByAppendingFormat:@"%@" , self.ContactPhone];
 NSURL * phoneURL = [NSURL URLWithString:phoneStr];
 [[UIApplication sharedApplication] openURL:phoneURL]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:50:22.383

首先检查 self.ContactPhone 是否为空，并在结束通话后使用***@"telprompt://"***返回或重新启动您的应用程序。

```
NSString *phoneStr = @"telprompt://";
if([self.ContactPhone length]>0)
{
phoneStr = [phoneStr stringByAppendingFormat:@"%@" , self.ContactPhone];
NSURL * phoneURL = [NSURL URLWithString:phoneStr];
[[UIApplication sharedApplication] openURL:phoneURL];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-05T09:19:59.590

这里是**Swift 4.1的代码**

```
if let url = URL(string: "tel://" + phoneString), UIApplication.shared.canOpenURL(url) {
    UIApplication.shared.open(url, options: [:], completionHandler: nil)
} 
```

# algorithm - 混合多个变量的算法

> ID：11541434
> 
> 赞同：0
> 
> 时间：2012-07-18T12:32:06.677
> 
> 标签：algorithm, variables, language-agnostic, combinations

示例：我有从 1 到 10 的数字。所有可能的组合，在每个组合中，每个变量都包含一次，没有任何重复，是......嗯...... 3628800 (10 * 9 * 8 * 7 * 6 * 5 * 4 * 3 * 2 * 1 = 3628800）。

就我而言，计算机必须检查所有组合，而不是随机选择组合。之后，系统会将所需的组合存储在一个数组中。但是我想不出一种算法，也找不到在互联网上的算法（可能是因为我没有找到正确的方法）。

我可以使用什么算法来混合多个变量，其中所有组合都没有重复变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:36:11.137

您可以为此尝试**递归**方法。

这个想法是**“猜测”哪个数字将是第一个，设置它 - 然后递归数组的剩余部分**。如果你对所有剩余的元素做这些“猜测”，你就会得到所有可能的排列。

这是打印给定数组的所有排列的通用 C 代码（不处理数组中的重复值）：

```
void permute(int *array,int i,int length) { 
  if (length == i){
     printArray(array,length);
     return;
  }
  int j = i;
  for (j = i; j < length; j++) { 
     swap(array+i,array+j);
     permute(array,i+1,length);
     swap(array+i,array+j);
  }
  return;
} 
```

在这种方法中：用您的数字预先填充一个数组：`1,2,...,n`- 并在其上调用排列算法。

您可以通过一个简单的测试用例来查看它，包括[ideone](http://ideone.com/nM7YM)`print()`中的and`swap()`函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:58:14.607

您要查找的内容称为**permutations**。

[维基百科](http://www.en.wikipedia.org/wiki/Permutation)列出了几种不同的方式：

### 获得所有排列的慢方法

一种天真的慢方法包括创建一个给定整数 i 的函数，返回第 i 个排列，然后调用函数 N！次。

看看这个问题的答案在[这里](https://stackoverflow.com/questions/7918806/finding-n-th-permutation-without-computing-others)。

### 有序方式

Lexicographic 方法描述为：

> 以下算法在给定排列之后按字典顺序生成下一个排列。它就地改变了给定的排列。
> 
> 1.  找到满足 a[k] < a[k + 1] 的最大索引 k。如果不存在这样的索引，则排列是最后一个排列。
>     
>     
> 2.  找到最大的索引 l 使得 a[k] < a[l]。由于 k + 1 是这样一个索引，所以 l 是很好定义的并且满足 k < l。
>     
>     
> 3.  将 a[k] 与 a[l] 交换。
>     
>     
> 4.  反转从 a[k + 1] 到最后一个元素 a[n] 的序列。

您应该首先对序列进行排序以按顺序排列所有排列。

### 最小交换

可能更快，但我没有在我的快速浏览中看到任何代码示例。

考虑[Steinhaus-Johnson-Trotter 算法](http://en.wikipedia.org/wiki/Steinhaus%E2%80%93Johnson%E2%80%93Trotter_algorithm)的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:34:26.393

似乎您正在尝试打乱您的整数集：[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

# android - 适用于 Android 的 Appcelerator Titanium 后台服务地理定位

> ID：11541435
> 
> 赞同：1
> 
> 时间：2012-07-18T12:32:10.447
> 
> 标签：android, titanium, socket.io, appcelerator

据我所知，Titanium 只允许以指定的时间间隔在 bg.js 文件中运行代码。它是 Appcelerator Titanium 的限制吗？有没有一种方法可以执行代码，只要服务正在运行，就像您在 java 中可以做的那样，还是有一个模块可以做到这一点？

例如，是否可以在 Titanium Android 服务中运行 socket.io.client？

在此先感谢您的帮助。

# javascript - javascript中原型的含义

> ID：11541436
> 
> 赞同：20
> 
> 时间：2012-07-18T12:32:12.613
> 
> 标签：javascript

`reader`我写了from的简短继承代码`Person`：

```
<script>

/* Class Person. */
function Person(name) {
    this.name = name;
}

Person.prototype.getName = function() {
    return this.name;
}

var reader = new Person('John Smith');
alert(reader.getName());

</script> 
```

或者，我可以删除行 `Person.prototype.getName = function() { return this.name; }`并在 Person 对象中创建它。例如

```
<script>
/* Class Person. */
function Person(name) {
    this.name = name;
    this.getName = function() { return this.name;}
}

var reader = new Person('John Smith');
alert(reader.getName());

</script> 
```

`getName()`在这两种情况下调用时我得到了相同的结果。那么它们有什么不同呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-18T12:34:05.213

当您在原型上放置一些东西时，对象的**每个**实例都**共享相同**的方法代码。它们都使用相同的函数实例。

当您简单地将方法放在 上时`this`，每个对象实例都有自己的相同方法的**副本**。

使用`prototype`效率更高。请注意，这就是为什么通常将方法放置在原型上的原因，因为您通常希望所有实例使用相同的方法，但属性放置在实例本身上，因为通常您不希望所有实例共享相同的属性。

对于您的评论，如果您在对象的构造函数上放置一个方法，那么您实际上创建了一个“静态”方法。对象的任何实例都不会具有该方法，它们都必须在构造函数上访问它。所以在你的情况下，`Person.someMethod()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T12:35:32.900

当您将方法放入构造函数并从该构造函数中创建一个对象时，每个对象都有自己的`getName`功能。对于 10 个`Person`实例，每个实例都有自己的`getName`10 个单独的`getName`函数。

如果您放置`getName`在构造函数的原型中，则相同的`getName`函数将在所有实例之间共享/继承。所以对于 10 个实例`Person`，每个实例都具有`getName`但仅引用 1 个`getName`函数。

使用原型可以节省内存，因为该方法在实例之间共享，因此只使用一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T12:35:48.027

不同之处在于，当您将其放在原型上时，*所有*实例`Person`共享相同的代码`getName`- 您可以通过分配其他内容`getName`来更改*所有*实例：`Person`

```
Person.prototype.getName = function() { return 'Mr Jones' }; 
```

此外，由于它们共享相同的代码，因此占用的内存更少：您只有一个`getName`函数副本，而不是每个实例一个副本。

另一个区别是您可以稍后将 设置`Person`为另一个类的原型，比如说`Man`，它将继承属性/方法。

**更新：**这是一篇很好的文章，解释了原型的其他属性：[https ://stackoverflow.com/a/1534286/295262](https://stackoverflow.com/a/1534286/295262)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T12:35:21.527

不同之处在于您进一步扩展了 Person 类，子类将不会继承 getName() 方法

**编辑：**我在上面的陈述中是不正确的。刚刚在jsfiddle上测试过。无论我们是在原型上还是在函数实例本身上定义方法，它都可用于链中的子类。

这是证明：http: [//jsfiddle.net/u8qrd/](http://jsfiddle.net/u8qrd/)

我知道将方法附加到原型有性能/内存优势。Appart 在继承方面没有任何行为差异吗？

（希望我在这里提问没有违反 SO 规则）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T12:45:19.470

`prototype`用基于类的话来说，通过和声明函数之间的区别`this`是这样的：

**原型：**

实例的功能如下所示：

```
somefunc = function(){super()/*call the function of the super-class*/}; 
```

**这个：**

实例的功能如下所示：

```
somefunc = function(){/* Do same stuff as in the prototype func declared */}; 
```

现在更改原型上的函数将不会影响实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-12T09:51:28.723

当您将任何函数添加`this.functionname`到任何对象构造函数时，该构造函数创建的每个对象都会制作自己的该函数的副本，该副本也占用内存。想象一下，如果您有多个由同一个构造函数创建的对象，以及它将占用多少内存。另一方面，当您使用`cunstructorName.prototype.functionName`函数在内存中加载一次并且每个对象共享相同的原型函数构造函数时创建它。这种方法使您的代码在加载和操作时更快，并且还节省了大量内存。

# c# - 在用户控件内单击按钮时刷新页面数据

> ID：11541442
> 
> 赞同：1
> 
> 时间：2012-07-18T12:32:22.697
> 
> 标签：c#, asp.net

我有一个页面显示来自网络服务的数据。它首先检查数据是否存在于会话中，如果不存在则从 WS 获取。

我的控件调用 Web 服务并向数据添加另一行（在本例中为 SP 列表）。如果新项目添加成功，我想刷新会话中的列表。如果没有，则不需要刷新。

我希望页面从 Web 服务获取新数据，即使数据存在于会话中。我的问题是按钮的事件处理程序在包含控件的页面的页面加载事件之后触发，其中数据被检索并绑定到转发器。

我正在考虑使用一些客户端技巧，例如检查事件目标或检查 post params 列表中的按钮名称，但我的按钮是服务器端控件，我希望它保持这种状态。

对于这种情况，是否有一些最佳实践解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T08:47:30.780

我最终在 PreRender 事件处理程序中绑定数据时做了什么。这样，我在 click 事件处理程序中引发了标志，并且由于 PreRender 发生在 click 事件处理程序之后，我可以检查是否引发了标志，并采取相应的行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:37:33.840

```
void Page_Load()
{
    if(!Page.IsPostBack)
    {
         //call initial databind functions
         MyDataBindStuff();
    }
    else
    {
         //this is a postback, you may or may not want to do anyting
    }
}

private void MyDataBindStuff()
{
    //do databind work
}

void yourBtn_Click(Object sender, EventArgs e)
{
   //do work
   //now databind if needed after do work
   MyDataBindStuff();

} 
```

# xml - 即时将 B2B 中的 XML 格式化为 HTML

> ID：11541446
> 
> 赞同：0
> 
> 时间：2012-07-18T12:32:45.737
> 
> 标签：xml, formatting, b2b

我是 XML 新手，我希望有人能指出我正确的方向。因此，我们的合作伙伴公司收到订单，B2B 将其转换为 XML 并返回给我们。它更有可能最终出现在我们服务器上某处的文件夹中，或者可能是邮箱中。我们需要将每个单独的 XML 渲染成一个漂亮的装箱单。装箱单将是相同的，只是需要根据其来自的商店更改徽标。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:00:38.527

设计整体应用程序架构对于本论坛来说过于宽泛。但是，使用 XSLT 很容易实现 XML 到 HTML 的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:34:29.303

使用 XSLT 过滤器进行 XML 到 HTML 的转换（google XSL 样式表）

# c# - 尽管我提出了 propertychanged，但属性不会刷新

> ID：11541448
> 
> 赞同：0
> 
> 时间：2012-07-18T12:32:47.637
> 
> 标签：c#, wpf, inotifypropertychanged

目前我有一个问题，我不确定如何解决这个问题或如何找到解决方法。我有一个包含子对象的视图模型。如果我提出一个命令，我会用 new 重新初始化 ChildObject 并添加新数据。之后我的视图更新并显示新数据。有时（它不可重现）只有一个属性不再更新。如果我在父对象中为整个对象执行此操作，或者我使用 String.Empty 执行此操作，则没有区别。一个属性未更新，将保持其旧值（不会调用 get 方法）。一旦我能够得到这种行为，我就不能通过再次提出这个命令来更新它。

有人可以帮助我并知道此类行为可能发生在哪里吗？

谢谢，

**编辑示例代码以使问题可见。** 在这种情况下，它似乎可以工作，但我项目中的代码看起来与XAML**完全相同：**

```
<Window x:Class="WpfApplication14.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <Button Click="Button_Click" Content="Text"/>
        <Label Content="{Binding Path=Cls1.A}"/>
        <Label Content="{Binding Path=Cls1.B}"/>
    </StackPanel>
</Window> 
```

视图模型：

```
using System.ComponentModel;

namespace WpfApplication14
{
    class VM : INotifyPropertyChanged
    {
        public VM()
        {
        }

        private int b;

        public void doWork()
        {
            var cls2 = new Class2 { A = "XXX", B = "YYY", C = "ZZZ" };

            if (b == 3)
            {
                cls2 = new Class2 { A = "AAA", B = "BBB", C = "CCC" };
            }
            if (b == 4)
            {
                cls2 = new Class2 { A = null, B = null, C = null };
            }

            b++;
            if(b == 5)
            {
                b = 0;
            }

            Cls1 = new Class1(cls2);
            OnPropertyChange("Cls1");
        }

        public Class1 Cls1 { get; set; }

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChange(string property)
        {
            if(PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
            }
        }
    }
} 
```

类2：

```
namespace WpfApplication14
{
    class Class2
    {
        public string A { get; set; }
        public string B { get; set; }
        public string C { get; set; }
    }
} 
```

第一类：

```
using System.ComponentModel;

namespace WpfApplication14
{
    internal class Class1 : INotifyPropertyChanged
    {
        public Class1(Class2 x)
        {
            setCls2(x);
        }

        public Class2 cls2 { get; set; }

        public string A
        {
            get
            {
                return cls2.A;
            }
        }

        //After clicking e.g. this property stayes on the old value.
        public string B 
        {
            get
            {
                return cls2.B;
            }
        }

        public string C
        {
            get
            {
                return cls2.C;
            }
        }

        private void setCls2(Class2 x)
        {
            cls2 = x;
            OnPropertyChange("");
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChange(string property)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:59:31.017

从您的示例代码中很难看出，但我认为问题可能出在此处：

> 如果我提出一个命令，我会用 new 重新初始化 ChildObject 并添加新数据。

我的猜测是，当您创建 ChildObject 类的新实例时，您不会为该新实例重新连接 PropertyChanged 事件。因此，PropertyChanged 事件可能正在触发，但没有任何东西可以处理它。

# c++ - 如何在 Ubuntu 上将 SQLite 与 c++ 一起使用？（未定义的参考错误）

> ID：11541452
> 
> 赞同：1
> 
> 时间：2012-07-18T12:32:59.420
> 
> 标签：c++, ubuntu, sqlite

我想在 Ubuntu 上使用 SQLite 和 c++。我选择尝试[https://www.sqlite.org/quickstart.html](https://www.sqlite.org/quickstart.html)中的示例。但是在运行时`c++ test.cpp -o test`出现错误：

```
/tmp/ccTwwjKw.o: In function `main':
test.cpp:(.text+0xf1): undefined reference to `sqlite3_open'
test.cpp:(.text+0x106): undefined reference to `sqlite3_errmsg'
test.cpp:(.text+0x12e): undefined reference to `sqlite3_close'
test.cpp:(.text+0x15d): undefined reference to `sqlite3_exec'
test.cpp:(.text+0x18f): undefined reference to `sqlite3_free'
test.cpp:(.text+0x19b): undefined reference to `sqlite3_close'
collect2: ld gab 1 als Ende-Status zurück 
```

我认为问题与此处相同：[Sqlite undefined reference to `sqlite3_open' error in Netbeans C++ on Ubuntu, Integrating SQLite into Netbeans C++ Ubuntu](https://stackoverflow.com/questions/3463438)。但是我没有make文件，也不使用netbeans。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:36:12.293

这是一个链接器错误，您没有链接到任何库。使用 -llibname 链接到正确的库，其中 libname 是从一开始就删除了 lib 的库的名称。例如，如果 libname 是 libsqlite3.so，请尝试`-lsqlite3`在编译步骤结束时添加。当然，您还需要提供该库的路径，如果它位于使用该选项的非标准位置`-L/path/to/lib`，显然您需要先安装相关库。

# python - Python 线程池的问题

> ID：11541454
> 
> 赞同：1
> 
> 时间：2012-07-18T12:33:09.463
> 
> 标签：python, multithreading

我在使用 python 编写网站蜘蛛时遇到了麻烦。基本思路如下：

我有一个队列，每个线程从队列中获取一个 url 并调用一个函数`getAllLinks`从该 url 获取链接。伪代码如下：

```
class Spider(Threading.Thread):
    def __init__(self):
        self.queue = Queue.Queue

    def run(self):
        while True:
            url = self.queue.get()
            getAllLinks(url)  
            time.sleep(0.1)   #I try to release the GIL 
```

但问题是：即使我在调用 getAllLinks 后手动切换线程，程序也没有单线程程序快。有没有更好的办法？

我想使用多个线程来提高蜘蛛的处理速度，但我认为`time.sleep()`速度较慢，因为我强制一个线程释放 GIL。

我认为这类似于：`for url in urlList: spider(url)`. 不是在 之后才切换线程`getAllLinks()`，本质上与仅使用一个线程相同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:15:49.747

因此，您的多线程程序并不比它的单线程版本快得多。

您是正确的，CPython 解释器将释放全局解释器锁 (GIL)，[每 100 字节代码](http://poshmodule.sourceforge.net/posh/html/node1.html)。不幸的是，GIL 使不广泛使用 I/O 的多线程程序变得毫无用处：

> GIL 是否会阻止那些使用纯 Python 工作的人真正利用多核？简单地说：是的，确实如此。虽然线程本身是一种语言结构，但解释器是线程和操作系统之间映射的看门人。（[来源](http://jessenoller.com/2009/02/01/python-threads-and-the-global-interpreter-lock/)）。

但是，您说您正在广泛使用 I/O。GIL 在 I/O 完成时被释放，这意味着您的程序*可以*看到使用多线程的速度结果。

因此，将代码发布到您的`getAllLinks`函数中！通过这种方式，我们可以对哪些有效，哪些无效。而且，尽管您可以`time.sleep(.0001)`用来诱使 GIL 释放（使用比 更小的数字`0.1`），但由于您使用了大量的 I/O，您不应该需要这个 hack。删除该行。

# html - 带有水平子菜单的水平菜单

> ID：11541467
> 
> 赞同：1
> 
> 时间：2012-07-18T12:33:48.517
> 
> 标签：html, css

我正在尝试制作带有水平子菜单的水平菜单。我尝试了一些方法，但没有成功：上面的代码应该显示水平主菜单，当您将鼠标悬停在其中一个链接上时，链接的颜色会发生变化并出现水平子菜单。

html代码：

```
<div id="menu">
    <ul>

        <li style="float: left; a:hover;  "><a   href="acceuil.html"    style="color : #CBCAC7 ;">ACCEUIL</a>&nbsp;&nbsp;<img src="decoupage/puce_menu.png"   height="15"/>
        <ul>
        <li style="float: left; display: none; "><a href="#">Présentation</a>  </li>
        </ul>
        </li>
        <li style="float: left; "><a href="methodologie.html" style="color   : #CBCAC7 ;" >METHODOLOGIE</a></li>&nbsp;&nbsp;<img src="decoupage/puce_menu.png"   height="15"/>
        <li style="float: left; "><a href="references.html" style="color :   #CBCAC7 ;">REFERENCES</a>&nbsp;&nbsp;<img src="decoupage/puce_menu.png" height="15"/>
        <ul>
    <li style="float: left; display: none; "><a href="#">Urbanisme</a></li>
    <li style="float: left; display: none; "><a href="#">Tours</a></li>
    <li style="float: left; display: none; "><a href="#">Bureau</a></li>
    <li style="float: left; display: none; "><a href="#">Commerce</a></li>
    <li style="float: left; display: none; "><a href="#">Logements</a></li>
    </ul>
    </li>
        <li style="float: left; "><a href="partenaires.html" style="color :       #CBCAC7 ;">PARTENAIRES</a></li>&nbsp;&nbsp;<img src="decoupage/puce_menu.png" height="15"/>
        <li style="float: left; "><a href="contact.html" style="color :          #CBCAC7 ;">CONTACT</a></li>&nbsp;&nbsp;<img src="decoupage/puce_menu.png" height="15"/>
    </ul>
</div> 
```

CSS 代码

```
#menu
{ position: absolute;
right: 550px;
bottom: 460px;
z-index: 2;
font-style: italic ;
font-size: large ; 
}

#menu li.hover ul { 
display: inline;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:38:13.877

您正在尝试将`<ul>`元素放入另一个`<ul>`元素但在`<li>`元素之外。这是不允许的，一切都应该在`<li>`元素中，`<table>`以防万一，元素之外的一切都`<td>`破坏了布局。

我建议您首先修改 HTML 的结构，然后考虑 css 样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T12:01:10.917

不需要 js：您可以将每个菜单点作为一个单独`div`的在`div`水平`overflow:hidden`线上浮动。当悬停其中一个周围的 div 时，您将其高度最大化，因此下方有空间放置您的第二个水平菜单，该菜单已放置在`div`.

您还可以将其宽度最大化，使其获得足够的宽度，以显示第二个水平菜单。

第三，减少它的`z-index`，因此主菜单中的其他 div 仍然可以悬停和选择，即使悬停的活动菜单项的宽度已达到最大。

# javascript - 点击事件激活脚本

> ID：11541468
> 
> 赞同：0
> 
> 时间：2012-07-18T12:33:49.827
> 
> 标签：javascript, jquery, feedburner

如果我想在点击时激活一段代码，我会将代码放在头部，如下所示：

```
 <script type="text/javascript">
        function myFeed() {

...code... 

}
    </script> 
```

然后这样称呼它：

```
<button onclick="myFeed();"> click </button> 
```

但现在我在使用 FeedBurner 时遇到了问题。我只有这个：

```
<script src="http://feeds.feedburner.com/nu/gbKB?format=sigpro" type="text/javascript" ></script> 
```

如何像在第一个示例中那样为其分配一个函数并在正文中调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:42:37.877

单击时只需将 javascript 添加到 DOM，

这是怎么做

我还会在您添加的脚本中添加一个 ID，以便在您必须删除它时更容易。

我提供的这个方法将它添加到 DOM 的头部。

```
function addJavascript(jsname,pos) {
var th = document.getElementsByTagName(pos)[0];
var s = document.createElement('script');
s.setAttribute('type','text/javascript');
s.setAttribute('src',jsname);
th.appendChild(s);
} 
```

*   第 1 行使用脚本位置和添加位置的参数打开函数，例如 myscript.js 、 head
*   第 2 行 Cets 你在 pos 变量中告诉它的元素
*   第 3 行创建脚本标签
*   第 4 行添加脚本类型
*   第 5 行添加源
*   第 6 行将脚本、标签、类型添加到 DOM

[链接到资源（JS Dom 操作）](http://javascript.about.com/library/bladdjs.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:47:55.873

从利亚姆的回答开始，只是一些细节：

```
function myFeed()
{
  document.write('<script src="http://feeds.feedburner.com/nu/gbKB?format=sigpro" type="text/javascript" ></script>');
} 
```

[演示](http://jsfiddle.net/wh5cW/1/)

# vba - VBA PowerPoint 文本框文本对齐

> ID：11541475
> 
> 赞同：4
> 
> 时间：2012-07-18T12:34:04.543
> 
> 标签：vba, textbox, powerpoint

我正在使用 PowerPoint 2007，我想编写一个在幻灯片中创建文本框的宏。

但是，文本框中的文本默认对齐到中心。

我想把它左对齐，但我不知道该怎么做。如何更改此文本框的对齐方式？

这是我的代码。

```
Set objPPT = CreateObject("PowerPoint.Application")
Set SQ = objPPT.Presentation

......

SQ.Slides(i + 6).Shapes.AddTextbox(msoTextOrientationHorizontal, 50, 100, 600, 100).Select
objPPT.ActiveWindow.Selection.TextRange.Text = titre 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T14:44:47.690

首先，选择代码中的任何内容或依赖当前选择通常不是好的做法，因为它会使您的代码速度降低几个数量级。

相反，是这样的：

```
Dim oSh as Object ' if you're using late binding, as Shape if early binding

Set oSh =  SQ.Slides(i + 6).Shapes.AddTextbox(msoTextOrientationHorizontal, 50, 100, 600, 100)
' notice that I've removed the .Select from the end of the line above

With oSh.TextFrame
  .TextRange.Text = "something"
  .TextRange.Paragraphs.ParagraphFormat.Alignment = ppAlignLeft
End With 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T20:55:03.110

我相信您的问题的答案在于`Shape.TextFrame.TextRange`对象属性

```
oPPShape.TextFrame.TextRange.ParagraphFormat.Alignment = msoAlignLeft 
```

只是对你和史蒂夫的帖子的评论。如果您真的使用此代码和对象进行后期绑定，您还需要记住定义 PowerPoint 库中的常量，例如`msoTextOrientationHorizontal`. 当您从项目中删除 PPT 引用时，您会很快发现哪些常量被遗漏了。与 Excel 一样，将宏分发给具有不同版本的用户最好通过后期绑定来完成，其中 Office 产品引用与版本无关。

```
'Bind to an existing or created instance of Microsoft Powerpoint
Dim objPPTApp As Object
On Error Resume Next
Set objPPTApp = GetObject(, "Powerpoint.Application")
If Err.Number <> 0 Then: Err.Clear: Set objPPTApp = CreateObject("Powerpoint.Application") 
```

[更多后期绑定在这里。](http://www.excelguru.ca/content.php?179-Examples-Of-Using-Late-Binding-To-Connect-To-Other-Applications)

# ruby-on-rails-3 - Rails - 制作插件

> ID：11541485
> 
> 赞同：0
> 
> 时间：2012-07-18T12:34:33.810
> 
> 标签：ruby-on-rails-3

我为我的博客做了一个评论系统，现在我想和一些朋友分享。我需要做什么？我不熟悉插件/引擎/宝石（实际上我什至不知道它们之间的区别）。

我的评论系统有：

*   型号（评论.rb）
*   部分 (_comment.erb.html)
*   一些资产（comments.css、comments.js 和 2 张图片）
*   一些关系（属于Post，有很多投票）

我想要的是提供一些配置，比如使用另一个模型而不是 Post。

[你可以在这里](http://jmorais.com/blog/hello-world)看到评论系统。（是的，它完全受到 Reddit 的启发）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:50:48.967

[Rails 插件将在 Rails 4 中被弃用](http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#plugins4_0)，因此最好的选择是创建一个依赖于您用于 gem 的 Rails gem（ActiveRecord、ActiveSupport 等）的 gem。

那里有大量关于如何制作宝石的教程，我个人喜欢[Jeweler](https://github.com/technicalpickles/jeweler/)制作宝石。如果您想知道如何从头开始构建宝石，[请看这里](http://guides.rubygems.org/make-your-own-gem/#first-gem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:01:50.823

我认为您会发现引擎对于这样的用例非常有用。 [http://guides.rubyonrails.org/engines.html](http://guides.rubyonrails.org/engines.html)

# shell - Mac 的 sed 命令中的 -n 出现问题

> ID：11541486
> 
> 赞同：1
> 
> 时间：2012-07-18T12:34:37.167
> 
> 标签：shell, sed

我正在编写一个脚本`sed`，用于在一个文件中查找字符串 - **temp.txt**（版本号）并获取此字符串并更新另一个文件中的版本号。这是相关的代码片段。

```
new=$(sed -n '/version: /p' temp.txt)  
sed -i .bk "s/version: [.0-9]*/version: $new/" file2.txt 
```

我遇到的问题是该变量`new`不只占用带有版本号的一行，而是占用整个文件**file2.txt**。这使我相信该`-n`命令的一部分不起作用，因为这应该禁止打印所有行，但其中包含字符串`version`的行。

我认为这可能是`sed`我正在使用的版本（在 Mac 上）的问题。或者我可能使用`sed`错误的命令。任何帮助，将不胜感激。

我宁愿不更新我的版本`sed`，因为这个脚本不仅仅在我的计算机上运行。因此，任何解决方法都是理想的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-24T01:55:47.910

我假设你`temp.txt`看起来像这样：

```
# some text
version: 3.14
# more text 
```

和你的`file2.txt`类似。只有一个“版本：”存在。

如果是这样，您可以使用以下脚本：

```
#!/bin/bash
new=$(cat temp.txt | grep version: | sed "s/ //g" | cut -d ":" -f 2)
sed -i "bk" -E "s/version:.*/version: ${new}/" file2.txt 
```

第一个命令查找写入版本的行。我`sed`用来删除任何多余的空间，并`cut`提取版本号。例如，使用此命令版本号也可以是“3.6.7a”。

在第二个命令中，我将替换写入旧版本的行。注意我不关心“版本：”字符串后面的内容，因为我将用我的新版本号替换它。此外，我正在保存`file2.txt`into的备份`file2.txt.bk`。

# javascript - iPhone 上的高度不正确

> ID：11541489
> 
> 赞同：0
> 
> 时间：2012-07-18T12:34:44.820
> 
> 标签：javascript, iphone, html, fullscreen

已报告 iPhone 出现显示问题。我一个也没有。我想知道是否有人有任何想法。

在我的网站上。问题似乎是由 url 栏引起的。在 android 上，该函数`$(window).height()`返回（屏幕高度 - url 栏）。在 iOS 上，它似乎没有这样做。

在我的网站上，我正在跳过 url 栏的页面。然后我将图像全屏并居中。（由于一些规范限制，我必须使用 Javascript ）

在 Android 中，图像的大小会调整到屏幕的可见区域。在 iPhone 上，它们被调整为可用高度 - url 栏。这会导致图像太小，底部有间隙。至少这是我对问题的理解。

iPhone 截图。

![带网址栏](../Images/51a16c8ab935d66c7c57cf187881eefc.png)
*使用网址栏*

![没有网址栏](../Images/2ed4e23921f1750bcf0e90c6e717843e.png)
*没有网址栏*

这就是我用来调整图像大小的方法。

```
window.scrollTo(0, 1);
function setImageSize() {
    var windowWidth = $(window).width();
    var windowHeight = $(window).height();

    $('.photo-slide img').each(function() {
        var width = $(this).attr('data-width');
        var height = $(this).attr('data-height');

        if (width > windowWidth) {
            var ratio = windowWidth / width;
            width = windowWidth;
            height = height * ratio;
        }

        if (height > windowHeight) {
            var ratio = windowHeight / height;
            height = windowHeight;
            width = width * ratio;
        }

        var marginTop = 0;
        var marginLeft = 0;

        if (windowHeight > height) {
            marginTop = (windowHeight - height) / 2;
        }
        if (windowWidth > width) {
            marginLeft = (windowWidth - width) / 2;
        }

        $(this).css({
            'margin-left':marginLeft+'px',
            'margin-top':marginTop+'px',
            'width':width+'px',
            'height':height+'px'
        })
    })
} 
```

有没有人遇到过这个？如何解决此问题，以便在 url 栏不可见时图像填满屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:45:58.150

如果您在设置为 100 毫秒的 setTimeout 中调用 setImageSize()，那么 iPhone 是否会为您提供正确的屏幕高度？我记得这是不久前的一个问题。

或者，您不能使用 window.navigator.userAgent.indexOf('iPhone') 来检查它是否是 iPhone，然后将 URL 栏高度添加到图像高度上吗？

# jquery - jQuery 引用使用部分视图生成的 div 以附加另一个部分视图

> ID：11541496
> 
> 赞同：1
> 
> 时间：2012-07-18T12:34:58.870
> 
> 标签：jquery, asp.net-mvc, razor

我在一个页面上多次渲染了这个局部视图：

```
@model POS.Domain.Entities.Category

<div class = "category" id= "@Model.Name">
    <h2>@Model.Name</h2>
    <a href='javascript:getView();'>Get Partial View</a>
    <script type="text/javascript">
        function getView() {
            $('#divResult').load("@Url.Action("ProductList" , "Product", new {category = Model.Name})");
        }
    </script>
    <div id="divResult">
    </div>
</div> 
```

这个想法是，当有人单击`Get Partial View`链接时，它将使用类别值`ProductList`在我的控制器中加载由我的操作生成的部分视图，并将该部分视图附加到适当的div。`Product``Model.Name``divResult`

问题是页面加载后，如果用户点击任何`GetPartialView`链接，它会加载包含在最终类别中的产品列表并将它们附加到最顶部的`divResult`div。

我希望在更改脚本以使用 jQuery 适当加载信息方面获得一些指导。我也觉得每次加载这个局部视图时我都不应该重复脚本。. . `Get Partial View`那么，当用户单击其中一个链接时，我将如何编写适当的 jQuery 脚本来执行以下操作：

*   获取链接的父 div 的 id ( `@ModelName`)
*   使用该 ID 调用我的操作：`@Url.Action("ProductList", "Product", new {category = **that id**})";`
*   将该 Action 返回的部分视图附加到 id`divResult`位于父 div 内的 div 中，我们在此步骤上方找到了两个步骤

**更新**

这是我认为的Html：

```
<div class = "category" id= "Balls">
    <h2>Balls</h2>
    <a href='javascript:getView();'>Get Partial View</a>
    <script type="text/javascript">
        function getView() {
            var $category = $(this).closest(".category");
            var categoryName = $category.attr("id");
            //var categoryName ="Balls";
            $('.divResult').load("/Product/ProductList",
                {category: categoryName});
        }
    </script>
    <div class="divResult">
    </div>   
</div>
<div class = "category" id= "Drinks">
    <h2>Drinks</h2>
    <a href='javascript:getView();'>Get Partial View</a>
    <script type="text/javascript">
        function getView() {
            var $category = $(this).closest(".category");
            var categoryName = $category.attr("id");
            //var categoryName ="Balls";
            $('.divResult').load("/Product/ProductList",
                {category: categoryName});
        }
    </script>
    <div class="divResult">
    </div>   
</div> 
```

如果我手动传递`Balls`to的值`categoryName`- 我可以从该`Balls`类别接收产品，但如果我使用`var categoryName = $(this).closest(".category").attr("id");`我得到`undefined`.

也许看到 HTML 会有所帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:41:46.677

您可以使用加载函数的第二个参数将数据与加载请求一起传递。检查[http://api.jquery.com/load/](http://api.jquery.com/load/)

将getView函数改成如下：

```
function getView(e) {
  e.preventDefault();
    var $category = $(this).closest(".category");
  var categoryName = $category.attr("id");
   $('.divResult', $category).load("@Url.Action("ProductList" , "Product")", {
     category: categoryName
    });
} 
```

更新：同一 ID 不能用于页面上的多个元素。并且由于您正在多次加载部分视图并附加，因此您将以具有相同 ID 的多个元素结束。将您的部分视图更改为如下（使用类而不是 ID）：

```
@model POS.Domain.Entities.Category

<div class = "category" id= "@Model.Name">
    <h2>@Model.Name</h2>
    <a href='/get-partial-view'>Get Partial View</a>
    <div class="divResult">
    </div>
</div> 
```

并将 getView 函数移动到父视图：

```
<script type="text/javascript">
        function getView() {
                var categoryName = $(this).closest(".category").attr("#id");
                $('.divResult').load("/Product/ProductList",
                        {category: categoryName});
        }

        $(function(){
            $(".category").on("click", "a", getView);
        });
</script> 
```

# sql-server - “不推荐使用的加密算法”的原因是什么？

> ID：11541497
> 
> 赞同：1
> 
> 时间：2012-07-18T12:34:59.860
> 
> 标签：sql-server, sql-server-2008, encryption

正在查看 sys.dm_os_performance_counters 以了解我的 SQL Server 2008 R2 上使用了哪些已弃用的功能：

```
SELECT [object_name], instance_name, cntr_value
FROM sys.dm_os_performance_counters
WHERE [object_name] LIKE '%:Deprecated Features%'
    And cntr_value > 0
Order By cntr_value desc 
```

**发现很多“不推荐使用的加密算法”。不明白为什么。。**

在 SQL Profiler 中，我可以捕捉到“*弃用的加密算法 rc4 将在 SQL Server[..] 的未来版本中被删除*”，但无法真正理解 T-SQL 导致它的原因。并且找不到任何使用 RC4 算法的地方（因为[这个](http://technet.microsoft.com/en-us/library/ms345262%28v=sql.105%29.aspx)）。

没有非对称密钥。对称密钥使用AES_256算法，受证书保护，证书受DMK保护。

**更新：** 在 SQL Profiler 中使用了建议并过滤了一个 SPID。每次我使用对称键时都会发现这个事件被触发。TSQL：

```
OPEN SYMMETRIC KEY MyKey DECRYPTION BY CERTIFICATE MyCertificate; 
```

但：

```
Select key_algorithm, algorithm_desc, * 
From sys.symmetric_keys 
```

对于此键返回

```
key_algorithm   algorithm_desc
A3              AES_256 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:41:00.467

SSB/DBM[端点](http://msdn.microsoft.com/en-us/library/ms181591.aspx)?

> 指定端点必须使用 RC4 算法。这是默认设置。

您可以从[Deprecation Announcement Event Class](http://msdn.microsoft.com/en-us/library/ms186302)和[Deprecation Final Support Event Class](http://msdn.microsoft.com/en-us/library/ms178053) Profiler 事件中获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T20:28:22.983

您可能拥有[带有 WITH ENCRYPTION](http://technet.microsoft.com/en-us/library/ms187926.aspx#Encrypt)子句的存储过程或用户定义的函数。

# ruby - 在类中运行方法时如何记录消息？

> ID：11541502
> 
> 赞同：1
> 
> 时间：2012-07-18T12:35:08.027
> 
> 标签：ruby, logging, instance-variables, self

我写了以下代码。当我跑步时，`Hello.run`我想记录一条消息，但这不起作用。

为什么这不起作用？

```
class Hello
  def initialize
    @logger = Logger.new STDOUT
  end

  def self.run
    self.new
    @logger.warn 'Hello'
  end
end

Hello.run 
```

这是我在运行时收到的错误消息`Hello.run`

```
NoMethodError: private method `warn' called for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:43:07.860

您在构造函数中设置的`@logger`变量是实例变量，并且`self.run`是类方法。

实例变量在类方法中不可用，因此当您运行时`Hello.run`，您将无法访问`Hello`类的内部实例变量。

如果您希望记录器是类范围的，您可以将其定义为类变量，如下所示：

```
class Hello
  def initialize
    @@logger ||= Logger.new(STDOUT)
  end

  def self.run
    self.new # I don't get why you just create a new instance and throw it away
    @@logger.warn("Hello")
  end
end 
```

如果您有兴趣，我在[这里](https://stackoverflow.com/questions/11523547/rails-and-class-variables/11523632#11523632)对不同的变量范围有更长的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:46:21.857

您必须为您的班级创建一个新对象。当你这样做时，这`initialize`将被调用。

否则`@logger`不会被初始化。

```
hello = Hello.new
hello.run 
```

# jquery - $() / jquery() 的替代品

> ID：11541503
> 
> 赞同：0
> 
> 时间：2012-07-18T12:35:11.130
> 
> 标签：jquery

我想使用我自己的符号而不是*$()*或*jquery()*。可能吗？我强烈地觉得**不**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T12:36:47.510

当然有可能。您可以将`jQuery`对象（或`$`对象 - 它们引用相同的东西）分配给新的标识符：

```
var myNewName = jQuery; 
```

然后，您可以像当前使用`jQuery`或一样使用它`$`：

```
var elems = myNewName(".someClass"); 
```

请注意，这*不会*放弃 jQuery 对`$`变量的控制。为此（例如，如果您正在使用另一个库，例如使用`$`标识符本身的 PrototypeJS），您可以使用`jQuery.noConflict()`其他答案中显示的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:41:43.057

除了将 $ 或 jQuery 分配给新变量名之外，您还可以使用 noConflict 删除对 $ 和 jQuery 的全局引用。使用 noConflict 的返回，您可以创建一个全新的引用。

```
// remove reference to $ and jQuery
var mySymbol = jQuery.noConflict(true);

// remove reference to $ only
var mySymbol = jQuery.noConflict() 
```

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:40:12.780

你当然可以：

```
var j = jQuery.noConflict();
// Do something with jQuery
j("div p").hide(); 
```

[如此处](http://api.jquery.com/jQuery.noConflict/)所见。

# python - 输出中没有可见循环的连续输入序列的普通哈希

> ID：11541505
> 
> 赞同：1
> 
> 时间：2012-07-18T12:35:14.677
> 
> 标签：python, hash

在一个简单的基于瓦片的图像中，如果每个草地区域都有相同的草地瓦片在每个方格上重复出现，它看起来就像一个可怕的云纹图案，但如果交替使用三四个草瓦片，它看起来就非常自然。

最好的方法是通过其坐标的简单散列选择每个图块。（另一种可能的实现是在游戏开始时随机选择它们，但如果可能的话，我更喜欢散列函数。）

哈希函数的必要属性是：

*   尽可能快（最好是 x+y mod N），不需要加密属性
*   输出上没有可见的句点：例如。x+y mod N 失败，因为它总是在每一行中重复相同的 N 个图块

是否有一个简单的算术哈希可以工作，并且比“种子（坐标）;返回随机范围（N）”更简单，但如果输入是“（0,0）”，“（1,0）”，“（ 2,0)"... 输出中没有可见的模式？

在游戏开始时生成一些随机数据会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:41:33.027

我会尝试类似的东西

```
hash(coords) % number_of_tiles 
```

Python 的内置`hash()`函数并不是真正的伪随机行为，但为了这个目的，它可能已经足够好了。

这是一个包含 7 个图块的示例：

```
>>> for x in range(10):
...     for y in range(10):
...         print ".oO^v<>"[hash((x, y)) % 7],
...     print
... 
O < o v . ^ > O > O
. v o < < O > ^ v o
< o > O . ^ o v O <
^ . O > o < . v > ^
o v . ^ ^ > O < v .
> ^ . v o < O > O >
. ^ o v < o > O v .
< O v o . v > ^ O >
v . ^ > O < o v . ^
O > ^ . . v o < < O 
```

# php - 使用 PHP SDK 在 Facebook 上获取 Instagram 订阅源

> ID：11541507
> 
> 赞同：0
> 
> 时间：2012-07-18T12:35:20.913
> 
> 标签：php, facebook, facebook-graph-api, instagram

我对一些 facebook 开发的东西有一个小问题。目前，我正在尝试获取有关我通过 Instagram 发布的照片​​的信息。我已经用图形 api 试过了：

```
<?php $status = $fb->api($fb->getUser().'/photos', 'GET'); ?>
<pre><?php print_r($status);?></pre> 
```

但我没有获得有关使用其他应用程序完成的帖子的信息。其他一切都显示得很好。我需要的权限是：user_status、user_photos、friends_photos'

问题的根源可能在哪里？

在此先感谢，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:59:01.370

对于任何面临同样问题的人。这是一个已批准的错误： http: [//developers.facebook.com/bugs/202119973248747 ?browse=search_5001dc2ee99a53e97238451](http://developers.facebook.com/bugs/202119973248747?browse=search_5001dc2ee99a53e97238451)

# sockets - 在我的 Node.JS 服务器负载很重的情况下，我收到 ECONNRESET 套接字错误？

> ID：11541510
> 
> 赞同：3
> 
> 时间：2012-07-18T12:35:24.867
> 
> 标签：sockets, node.js, url, rest, tcp

所以我有一个 API 服务器和一个 Web 服务器。Web 服务器基本上是一个与 API 服务器对话的客户端。他们都使用带有 REST 端点的 Node.js。

当我的网络服务器访问 API 服务器时，有时我会得到 {"err":{"code":"ECONNRESET"}} ...这真的很随机​​，有时我会得到它，有时在不同的地方。

真的很难弄清楚发生了什么，因为我在不同的地方得到它。

我该如何解决这个问题？我已经将“ulimit -n”增加到 99999。

我能做些什么？它冻结了一切，发生这种情况时服务器无法继续运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:45:08.683

[`ECONNRESET`](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html)意味着 TCP 会话的另一端突然关闭了它的连接端。文件描述符限制与此处无关。这很可能是由于某些应用程序协议错误造成的。查看那个 API 服务器日志，它可能会抱怨一些事情。

# php - 奇怪的 readfile() 问题

> ID：11541512
> 
> 赞同：0
> 
> 时间：2012-07-18T12:35:32.893
> 
> 标签：php

我的脚本如下：

```
<?php
header("Content-type:application/pdf");

// It will be called downloaded.pdf
header("Content-Disposition:attachment;filename='test.pdf'");

// The PDF source is in original.pdf
readfile("www.example.com/test.pdf");
?> 
```

现在，如果我将 readfile 更改为：

```
// The PDF source is in original.pdf
readfile("test.pdf"); 
```

它工作正常，但如果我指定和绝对 URL， `readfile("www.example.com/test.pdf");`

PDF 打不开。以上似乎只在本地工作。

有谁知道为什么绝对网址不起作用？干杯

解决方案：

```
// The PDF source is in original.pdf 

readfile($_SERVER['DOCUMENT_ROOT']."/test.pdf"); 
```

此函数仅适用于绝对路径，不适用于 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:38:59.363

*   您缺少协议：`http://`
*   并检查您的`allow_url_fopen`设置！
*   开启错误报告

.

```
ini_set('display_errors', true);
error_reporting(E_ALL); 
```

更聪明的方法是在本地存储/缓存远程文件，因此您不必每次都下载它。它将减轻目标站点的负担。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:37:27.733

[如果启用了fopen](http://si2.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)包装器，则 URL 可以用作此函数的文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:39:49.867

试试这个..,

```
<?php
header("Content-type:application/pdf");

// It will be called downloaded.pdf
header("Content-Disposition:attachment;filename='test.pdf'");

// The PDF source is in original.pdf
readfile("http://www.example.com/test.pdf");
?> 
```

没有“http://”，您将无法下载。

# javascript - 多个自动完成小部件

> ID：11541513
> 
> 赞同：0
> 
> 时间：2012-07-18T12:35:35.340
> 
> 标签：javascript, jquery

任何人都可以建议处理多个自动完成选择的小部件，而不仅仅是一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:39:35.453

试试[JQuery 自动完成小部件](http://jqueryui.com/demos/autocomplete/#multiple)。您可以开箱即用地使用它，或者基于相同的原理构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:44:24.647

尝试**选择**- [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

具体来说，请查看他们在其页面上的*Selected and Disabled Support部分下的**多个部分*演示。

# c++ - 行进立方体（C++ 到 C#）

> ID：11541515
> 
> 赞同：0
> 
> 时间：2012-07-18T12:35:41.937
> 
> 标签：c++, pointers, marching-cubes

我正在尝试在 C# 中实现行进多维数据集，但我遇到了我不了解算法并且不知道如何实现它的部分。

`int Polygonise(GRIDCELL grid, double isolevel, TRIANGLE *triangles)`

第三个论点我不太明白。我知道它是一个指针，但稍后在算法中，当您设置三角形时，它看起来好像`triangles`变量是`TRIANGLE`结构的数组：

```
int ntriang = 0;

for (int i=0; triTable[cubeindex,i]!=-1; i+=3) {
    triangles[ntriang].p[i  ] = vertlist[triTable[cubeindex,i  ]];
    triangles[ntriang].p[i+1] = vertlist[triTable[cubeindex,i+1]];
    triangles[ntriang].p[i+2] = vertlist[triTable[cubeindex,i+2]];
    ntriang++;
} 
```

注意`triangles[ntriang]`. 这没有意义，因为在我们设置`triangles`为`TRIANGLE *triangles`. 我也不明白为什么它是一个指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:39:59.820

`Polygonize`expect的调用者`*triangles`指向一个足够长的已分配数组以包含所有三角形。c# 中的等价物可以是 a`TRIANGLE[]`或 a`List<TRIANGLE>()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:40:51.523

看起来这个函数采用体素/单元格的网格并输出三角形。它是一个指针，因为您将获得一个三角形列表。

# openssl - openssl 0.9.8.j 可能的错误

> ID：11541516
> 
> 赞同：0
> 
> 时间：2012-07-18T12:35:46.193
> 
> 标签：openssl

我正在使用 CI 中的 openssl 库 0.9.8j 开发 ssl 客户端，需要连接到服务器并验证服务器的证书。首先我以这种方式进行测试：

openssl s_client -connect 46.38.167.198:443 -CAfile /home/user/Desktop/sf_sharewin/tftp/verisign.pem

它在我的 Linux 机器上的 0.9.8g 版本上运行良好。但是当我在我的 uCLinux 设备上使用 0.9.8j 版本时，相同的测试结果是“错误 20 无法获得本地颁发者证书”。

我写了一些 C 代码（在 ucLinux 和 0.9.8j 版本下），函数 SSL_get_verify_result(ssl) 返回相同的错误 20。我确信 PEM 文件是正确的，路径是正确的。问题可能出在哪里？谢谢！

# c# - C# 使用服务器套接字发送整数

> ID：11541519
> 
> 赞同：-1
> 
> 时间：2012-07-18T12:35:52.800
> 
> 标签：c#, networking, tcp, client-server

你如何通过服务器套接字发送整数值？发送字符串相当容易，因为这是 MDN 教程中所涵盖的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:40:32.317

您可以将其转换为字符串、XML 或您希望的任何其他格式。或者，如果您只想发送整数的字节，可以将整数转换为字节数组，如下所示：

```
BitConverter.GetBytes(integer); 
```

但是，如果这样做，则必须注意通信两端的字节顺序（大端与小端）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:36:57.827

将它转换为字符串怎么样，最后你主要发送一个字节数组

# svn - 为什么在访问 VisualSVN 服务器时，svn 客户端出现错误“第 1 行的 XML 解析错误，找不到元素”？

> ID：11541520
> 
> 赞同：3
> 
> 时间：2012-07-18T12:35:53.253
> 
> 标签：svn, url, visualsvn-server

使用不正确的 URL 访问带有 Subversion 客户端的 VisualSVN 服务器存储库时，您可能会收到以下错误，例如[TortoiseSVN](http://tortoisesvn.net/)：

```
XML parse error at line 1 no element found 
```

*是什么原因以及如何摆脱错误？*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T12:35:53.253

阅读文章[KB102：不适当的存储库 URL 导致的 Subversion 客户端错误](https://www.visualsvn.com/support/topic/00102/)。您很可能会收到此错误，因为存储库的 URL 不正确。

* * *

与 Web 浏览器不同，Subversion 客户端无法访问整个*存储库列表*的内容。换句话说，您无法`https://svn.example.com/svn/`使用 Subversion 客户端（如 TortoiseSVN）或命令行客户端访问例如 URL。

您必须明确指定存储库（或其子文件夹或项目）的**URL 。**

正确的 URL 应如下所示：`https://<servername>/svn/<repository-name>/`

* * *

**2013 年 5 月 7 日更新：**

TortoiseSVN 1.8 中的存储库浏览器可以列出[SVNListParentPath](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.httpd.html#svn.serverconfig.httpd.extra)提供的存储库。请参阅[TortoiseSVN 1.8 发行说明](http://tortoisesvn.net/tsvn_1.8_releasenotes.html#repobrowser)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-11T10:30:14.553

就我而言，我已经使用 de 选项“窃取锁定”（当您为存储库文件设置锁定时，表单左下角区域的复选框）解决了这个问题，这个错误是由于某些文件似乎已解锁但实际上它不是（从资源管理器窗口中单击文件的属性验证这一点，然后，SVN 属性....然后您可以看到文件的真实状态）[锁定文件](https://i.stack.imgur.com/uzllP.png)

# jquery - Jquery .click 一秒钟

> ID：11541522
> 
> 赞同：0
> 
> 时间：2012-07-18T12:35:56.107
> 
> 标签：jquery, time, click

如何仅在单击按钮一秒钟后使该功能起作用？

例如

```
$("#button").click(function(){
$(".panel").addClass('flip'); 
```

我`'flip'`只需要按下按钮 1 秒钟。如果您单击它不到一秒钟，它不会`'flip'`

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:40:21.727

```
$(document).ready(function(){
  $("#button").mousedown(function(e){
    var self = this;
    clearTimeout(self.mouseUpTimer);
    self.mouseUpTimer = setTimeout(function(){
      $(self).bind('mouseup.delay', function(e){
        $(".panel").addClass('flip');
        $(self).unbind('mouseup.delay');
      });
    }, 1000);
  }).mouseup(function(e){
    clearTimeout(this.mouseUpTimer);
  });
}); 
```

jsFiddle：http: [//jsfiddle.net/zSPhK/](http://jsfiddle.net/zSPhK/)

# objective-c - 委托内（强）Objective C 属性中的垃圾

> ID：11541523
> 
> 赞同：2
> 
> 时间：2012-07-18T12:36:01.110
> 
> 标签：objective-c, ios, ios5, automatic-ref-counting

我是Objective C的新手，所以请原谅我的无知。我试图让[这段代码](https://github.com/mschulkind/cordova-true-native-ios/blob/master/Example/Classes/UIWebViewScriptDebugDelegate.m)工作，但无济于事。

在我的头文件中，我声明了一个属性：

```
@interface UIWebViewScriptDebugDelegate : NSObject

@property (nonatomic, strong) NSMutableDictionary *sourceIDMap;

@end 
```

在我的代码文件中，我合成并初始化它：

```
@implementation UIWebViewScriptDebugDelegate

@synthesize sourceIDMap = sourceIDMap_;

- (id)init
{
    if ((self = [super init])) {
        self.sourceIDMap = [[NSMutableDictionary alloc] init];
    }

    return self;
} 
```

它工作得很好——如果我插入一个`NSLog`电话，我发现那`self.sourceIDMap`确实是一本字典。但是，当另一个方法想要访问该属性时，它看起来`NSMutableDictionary`已经消失了。

```
- (void) webView:(WebView*)webView
  didParseSource:(NSString*)source
  baseLineNumber:(unsigned int)baseLineNumber
         fromURL:(NSURL*)url
        sourceId:(int)sourceID
     forWebFrame:(WebFrame*)webFrame
{
    // ...

    NSLog(@"Look what we got here:");
    NSLog(@"%@", self.sourceIDMap);
} 
```

有时它是一个`DOMCSSStyleDeclaration`，有时它是一个`DOMHTMLHeadElement`：

```
360 MyApp[49113:1507] Look what we got here:
360 MyApp[49113:1507] <WebScriptObjectPrivate: 0x14540d20>
361 MyApp[49113:1507] -[DOMCSSStyleDeclaration sourceIDMap]: unrecognized selector sent to instance 0xc32e550
361 MyApp[49113:1507] *** WebKit discarded an uncaught exception in the webView:didParseSource:baseLineNumber:fromURL:sourceId:forWebFrame: delegate: <NSInvalidArgumentException> -[DOMCSSStyleDeclaration sourceIDMap]: unrecognized selector sent to instance 0xc32e550
367 MyApp[49113:1507] Look what we got here:
368 MyApp[49113:1507] <WebScriptObjectPrivate: 0x14540ee0>
369 MyApp[49113:1507] -[DOMHTMLHeadElement sourceIDMap]: unrecognized selector sent to instance 0x145ec820
369 MyApp[49113:1507] *** WebKit discarded an uncaught exception in the webView:didParseSource:baseLineNumber:fromURL:sourceId:forWebFrame: delegate: <NSInvalidArgumentException> -[DOMHTMLHeadElement sourceIDMap]: unrecognized selector sent to instance 0x145ec820 
```

在哪里`NSMutableDictionary`？不应该保留吗？

### 更新

如果这有帮助，代码将被编译成一个启用了 ARC 的静态库，我从 MonoTouch 调用该库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:50:23.337

我添加了它的工作原理

```
objc_setAssociatedObject(sender,
    @"ScriptDebuggerDelegate", delegate, OBJC_ASSOCIATION_RETAIN
    ); 
```

在打电话`setScriptDebugDelegate:`之前。`sender``didClearWindowObject`

感谢您为小费制作truillot [de chambrier](https://stackoverflow.com/questions/11541523/garbage-in-strong-objective-c-property#comment15261140_11541523)。
（看来我[自己也不需要](https://stackoverflow.com/questions/6122600/will-objective-c-runtime-release-retained-associative-references-for-user) `release`。）

# algorithm - 如何使用 Aho-Corasick 在给定的字符串集中查找一段文本？

> ID：11541524
> 
> 赞同：2
> 
> 时间：2012-07-18T12:36:08.860
> 
> 标签：algorithm, string-matching, aho-corasick

我有 Aho-Corasick 算法的代码。但是我仍然不明白在给定字符串列表中搜索文本时如何在查找过程中使用状态信息。

例如，我有一个字符串列表`[MOSCOW][COLA]`，现在我需要确定是否`CA`在列表中，如果是，它的位置是什么？

这是[代码的链接](http://pastebin.com/AYUePCRF)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:41:50.417

您正在研究的算法的工作方式完全相反。如果字典是`[MOSCOW][COLA]`，输入字符串是`CA`，那么算法会告诉你`MOSCOW`in 的所有位置，以及in`CA`的所有位置。`COLA``CA`

现在，一个特定的状态（或者，`Node`正如链接代码所称的那样），其含义类似于：“*我们可能就在唯一`C`的 in之后`COLA`，但我们绝对不是在中间的任何地方`MOSCOW`*”。（这可能是在第一个字符之后访问的节点`CA`。）

当搜索不同的输入时，更容易看到算法的威力，例如`MOSCOLONI`。就在看到 之前`L`，当前状态将意味着“*我们可能将 5 个字符变成一个潜在的`MOSCOW`，或者 2 个字符变成一个潜在`COLA`*的”，重要的是状态会同时查看所有字典单词；事实上，当您考虑重复字符时，甚至进入所有单词的所有位置。

# android - 将 Google 地图划分为多个扇区

> ID：11541529
> 
> 赞同：3
> 
> 时间：2012-07-18T12:36:35.757
> 
> 标签：android, google-maps, google-maps-api-3, android-mapview

可以说我有某个国家的地图。无论如何，我可以将地图划分为扇区吗？像下面的图片？

我希望划分的原因是我被赋予了一项任务，即根据他当前的 lat 和 long 从 android 手机获取用户当前所在的扇区。因为谷歌地图没有将地图划分为我想要的区域，我可能必须将它们单独划分并绘制线条作为叠加层。各位有什么好的解决办法吗![在此处输入图像描述](../Images/53a52e571e6de9d670a6750d3bf585d4.png)

扇区边界以谷歌地图的高速公路为界。我相信最好的情况是手动绘制边界？我有大约 100mb 的高分辨率地图。但是我可以知道如何手动绘制边框吗？该图像只是划分如何工作的一个想法。整个系统都部署在安卓手机上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T14:24:13.997

一种选择是创建定义您的自定义扇区的 kml。可以将其导入 FusionTables 并使用 FusionTablesLayer 显示在地图上。

这是[一个示例（使用地理编码地址）](http://www.geocodezip.com/webknows_net_schoolboundarynewC.html)，它检测 FusionTable 中包含该点的行。

您可以使用 Google 地图“MyPlaces”绘制多边形并检索 kml。

其他几个例子：

[使用地理编码器和 geoxml3 指向多边形](http://www.geocodezip.com/geoxml3_test/v3_collection-map2e.html)

[使用地理编码器和 FusionTables 指向多边形](http://www.geocodezip.com/v3_collection-map2e_FT.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:13:55.327

你当然可以！查看此示例，它将较低的 48 个状态划分为您指定大小的单元格：

[http://maps.forum.nu/server_side_clusterer/index2.php](http://maps.forum.nu/server_side_clusterer/index2.php)

选中前两个复选框，“显示簇单元格”和“将网格单元格固定为纬度/经度”，然后单击“刷新”以加载标记。单元格是在客户端绘制的。

# php - 将包含字母和数字的单词分成两部分

> ID：11541531
> 
> 赞同：2
> 
> 时间：2012-07-18T12:36:36.343
> 
> 标签：php, variables, word

如何将包含字母和数字的单词分成字符变量和变量中的数字两部分：

例子：

```
<?
$x = "f25";
?> 
```

我想把这封信给一个新变量 $L="f"; 和另一个变量的数字 $N=25;

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:50:42.480

这可以[`preg_split()`](http://php.net/preg_split)通过将适当的标志传递给 来完成，而无需任何环顾`preg_split()`，如下所示：

```
$x = "f25";
list( $L, $N) = preg_split( '/([a-z]+)/i', $x, -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);
var_dump( $L, $N); 
```

这[**将输出**](http://viper-7.com/VWDNAq)：

```
string(1) "f" string(2) "25" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:44:56.423

```
print_r(preg_split('#(?<=\d)(?=[0-9])#i', "f25")); 
```

印刷

```
Array
(
    [0] => 5
    [1] => f
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:00:21.517

作为正则表达式的替代品

```
$x = "f25";
list($L,$N) = sscanf($x,'%[A-Z]%d'); 
```

# safari - Safari 5.1.7 混合标题从内容到页面？

> ID：11541538
> 
> 赞同：0
> 
> 时间：2012-07-18T12:36:57.527
> 
> 标签：safari, http-headers, browser-cache

我有一个非常奇怪的问题，以下简单的 php 页面保存在我的网络服务器的根目录中`test.php`：

```
<?
if( $_GET['img'] ) {
    header('HTTP/1.0 304 Not Modified');
    die();
} else {
    header("Cache-Control: no-store, no-cache, must-revalidate");
}
?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<body>

<img src="/test.php?img=1">
<a href="/not_existent_page.php">Dead link</a>

</body>
</html> 
```

因此，当页面加载时，我的服务器会使用以下标头进行响应：

```
Status Code 200
Cache-Control   no-store, no-cache, must-revalidate
Content-Type    text/html; charset=utf-8
Date    Wed, 18 Jul 2012 12:00:43 GMT
Server  Apache/2.2.22 (Ubuntu)
Strict-Transport-Security   max-age=172800, includeSubDomains
Vary    Accept-Encoding
x-frame-options sameorigin
x-powered-by    PHP/5.4.4-1~precise+1
x-ua-compatible IE=edge 
```

有趣的部分是缓存头：它说，不要缓存！

加载页面后对图片的请求有如下响应头：

```
Status Code 304
Date    Wed, 18 Jul 2012 12:02:20 GMT
Server  Apache/2.2.22 (Ubuntu) 
```

它没有说任何关于缓存的内容（但这没关系，我测试过）。

使用 firefox 和 chrome，该网站的行为应如此：每次我重新加载页面时，它都会按应有的方式重新加载。如果我单击链接，我会收到 404 apache 错误。

使用 safari，会发生以下情况：

如果我先打开页面，我会看到它。当我在短时间内重新加载页面时（见下文“短时间”的含义），它*总是*给我一个空白站点，当我点击时，死链接*有时*会给我一个空白站点，但我在Safari 的 Web 开发者控制台：

```
Status Code 304
Connection:Keep-Alive
Date:Wed, 18 Jul 2012 12:07:41 GMT
Keep-Alive:timeout=15, max=99
Server:Apache/2.2.22 (Ubuntu)
Vary:Accept-Encoding 
```

页面保持空白！但是：在我的 apache 服务器日志中，它说它在页面重新加载时返回了状态代码 200 的所有内容：

```
// first page load
[18/Jul/2012:14:10:12 +0200] "GET /test.php HTTP/1.1" 200 979 "url/test.php" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2"

// request of picture with answer 304
[18/Jul/2012:14:10:12 +0200] "GET /test.php?img=1 HTTP/1.1" 304 266 "url/test.php" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2"

// reload within 10 seconds
[18/Jul/2012:14:10:19 +0200] "GET /test.php HTTP/1.1" 200 777 "url/test.php" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2" 
```

（以及单击死链接时的 404。）

现在是有趣的部分：**如果我等待大约。加载页面 10 多秒后**，Safari 的行为符合预期：它只是在重新加载时再次加载页面，没有 304 标题（或在死链接上显示 404）。

我对 Firefox 和 chrome 完全没有问题。

所以我的问题**是：Safari 是否混淆了页面的标题，但仅在再次加载页面/在 10 秒内单击链接时**？我怎样才能防止这种情况？这是Safari中的错误吗？

顺便说一句：如果我将标头更改为其他内容，Safari 会缓存该标头。因此，如果我像这样更改 test.php：

```
...
if( $_GET['img'] ) {
    header('HTTP/1.0 204 No Content');
    die();
} else {
.... 
```

页面重新加载现在只是中止而没有做任何事情，但我在 safari 控制台中看到的标题是`204 No Content`.

最后一件事：在 10 秒内重新加载页面会不断触发错误，而*有时*单击链接在 safari 中有效，有时则无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:38:21.313

/test.php 将始终设置`header("Cache-Control: no-store, no-cache, must-revalidate");`标题没有什么有趣的，`do not cache`因为您明确设置了这些标题。

/test.php?img=whatever 永远不会像上面那样设置 Cache-Control 标头，并且总是返回空白 304 Not Modified。您在 header() 调用后立即退出。从技术上讲，它不是 apache 的图像。它的 mime 类型将是 text/html，因此它会将您的过期/缓存作为 html 和 php（在您的 .conf 和/或 htaccess 中）。除非你这样做`header('Content-Type: image/jpeg', true);`或类似。

在某些情况下，使用 header() 的第二个参数来替换以前的参数也很好。

试试这个。如果你得到相同的结果，请告诉我

```
<?php
if (isset($_GET['img'])) {
    header('Content-Type: image/jpeg', true);
    header($_SERVER['SERVER_PROTOCOL'].' 304 Not Modified', true, 304);
    exit;
} else {
    header('Expires: -1', true);
    header('Cache-Control: no-store, no-cache, must-revalidate, max-age=0', true);
}
?> 
```

# jquery - 使用 jQuery 过滤器在颜色框中打开 vimeo url

> ID：11541540
> 
> 赞同：0
> 
> 时间：2012-07-18T12:37:02.373
> 
> 标签：jquery, regex, embed, vimeo

我想使用 jQuery 扫描一个 html 页面 - 在这种情况下由 WordPress 创建以查找所有指向 vimeo 视频的链接 - 由用户通过 WP 编辑管理员添加。

然后我想将这些链接的控制权传递给颜色框。

jQuery 选择器与此链接一起使用：

[http://vimeo.com/44799432](http://vimeo.com/44799432)

```
// vimeo in colorbox ##
jQuery("a").filter(function(){ // filter all as ##
    return jQuery(this).text().match(/vimeo\.com/igm); // match text with vimeo.com ##
    }).colorbox({iframe:true, innerWidth: "80%", innerHeight: "80%"}) // assign to colorbox ##
    .addClass("button vimeo"); // add class to style ## 
```

但是，vimeo 将内容推出 iframe 并重新加载页面 - 所以我需要一个匹配这个 url 的正则表达式 - 可以通过 iframe 嵌入：

[http://player.vimeo.com/video/44799432](http://player.vimeo.com/video/44799432)

```
match(/player.vimeo\.com/); 
```

不这样做 - 有什么想法吗？

注意：我显然需要一个循环来检查多个 vimeo 链接......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:49:02.637

试试这个*（未经测试）* >>

```
jQuery("a").filter(function() {
    return jQuery(this).text().match(/vimeo\.com/igm);
  }).each(function() { 
    this.setAttribute("href", this.getAttribute("href")
    .replace(/^https?:\/\/(?:www\.|)vimeo\.com\/(\d+)$/i,
      "http://player.vimeo.com/video/$1")); 
  }).colorbox({iframe:true, innerWidth: "80%", innerHeight: "80%"})
  .addClass("button vimeo"); 
```

# python - 使用谷歌翻译器自动翻译 django.po 文件

> ID：11541541
> 
> 赞同：1
> 
> 时间：2012-07-18T12:37:03.507
> 
> 标签：python, django, internationalization

我有一个非常大的 django.po 文件，其中填充了所有 msgid。现在我需要用等效的翻译字符串替换 msgstr。每次我需要将字符串复制到谷歌翻译器时，获取翻译后的字符串并将其粘贴到文件中。是否也有任何可以获取目标语言并用翻译后的字符串填充所有 msgstr 的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-08T12:52:26.607

已经晚了，但它可能会帮助别人:)

您可以尝试模块[django-autotranslate](https://github.com/ankitpopli1891/django-autotranslate/)。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:36:43.260

你可以试试 django-rosetta 应用程序。它具有基于 ajax 的自动必应翻译选项。

[https://github.com/mbi/django-rosetta](https://github.com/mbi/django-rosetta)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-01-26T08:47:40.607

我遇到了同样的问题，我已经开始手动操作了，我搜索并发现 django-autotranslate 在这里查看 [https://pypi.org/project/django-autotranslate/](https://pypi.org/project/django-autotranslate/) 它的用法在同一个网页中进行了解释。它对我有用，我相信它对你有用。

# android - Android 应用启动性能

> ID：11541542
> 
> 赞同：0
> 
> 时间：2012-07-18T12:37:06.097
> 
> 标签：android, performance, android-asynctask, android-activity

当我在 android 模拟器上运行我的应用程序时，log-cat 告诉我它跳过了 70 帧（当应用程序开始启动时）并且它可能在主线程上做的太多了。如何分散负载或提高应用程序的性能。我需要在启动时加载屏幕吗？

这是我的启动活动，

```
package com.the.maze;

import android.app.ListActivity;  
import android.content.Intent;  
import android.os.Bundle;  
import android.view.View;  
import android.widget.ArrayAdapter;  
import android.widget.ListView;

    public class TheMazeActivity extends ListActivity{  
            String list[]={"New Game","Highscores","How to play","Settings","About"};
            Class classes[]={GameActivity.class,null,Instructions.class,null,null};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, list));

    }
        @Override
        protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        try{
        Intent intent= new Intent(TheMazeActivity.this,classes[position]);
        startActivity(intent);
        }catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:45:25.047

我可以建议您的改进不多，而且我没有在您的代码中看到繁重的计算（如果有的话！）。无论如何，这些是我的建议：

```
public class TheMazeActivity extends ListActivity{
    //make them static final  
    private static final String[] list={"New Game","Highscores","How to play","Settings","About"};
    private stativc final Class[] classes={GameActivity.class,null,Instructions.class,null,null};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, list));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        //no need for try catch, if you can perfectly find out, when to trigger!
        if [classes[position] != null){
            Intent intent= new Intent(TheMazeActivity.this,classes[position]);
            startActivity(intent);
        }
   }
} 
```

但请注意，这些更改只是所谓的[微优化](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)

# javascript - $('#element').css("CssProperty") 未加载

> ID：11541544
> 
> 赞同：1
> 
> 时间：2012-07-18T12:37:08.670
> 
> 标签：javascript, jquery, css

我正在使用 jquery .css() 函数来获取 'margin-left' 属性，`var divMargin= $('#DivId').css('margin-left')`但有时我会得到这完美的作品`undefined`，`divMargin`有时会导致问题

```
var divMargin= $('#DivId').css('margin-left'); 
```

这种意外行为的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:41:36.583

把你的脚本放进去

```
$(document).ready(function(){
var divMargin= $('#DivId').css('margin-left'); 
}) 
```

所以它在 DOM 加载后运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:40:35.273

jQuery`.css()`不返回计算的样式。`.css(..)`如果我没记错的话，它只会为您提供您通过调用设置的那些 CSS 属性。要获取当前设置的 CSS 属性，无论它是从哪里设置的，您都可以使用`window.getComputedStyle`

使用它来获取元素的计算样式：

```
window.getComputedStyle(element); 
```

参考：[https ://developer.mozilla.org/en/DOM/window.getComputedStyle](https://developer.mozilla.org/en/DOM/window.getComputedStyle)

对于margin-left，您可以执行以下操作：

```
var marginLeft = window.getComputedStyle($('#DivId')[0]).marginLeft; 
```

# javascript - javascript客户端中的服务器端数据绑定

> ID：11541547
> 
> 赞同：3
> 
> 时间：2012-07-18T12:37:10.747
> 
> 标签：javascript, data-binding

在当今时代通过 XHR 使用复杂 json 对象的最佳方式是什么？

在进行数据绑定时，在javascript中，到目前为止我使用的是Sencha的Ext.Js/ Sencha touch模型

例如：

```
 Store = Ext.create('Ext.data.Store',{
    Constructor: function (config) {
        var config = Ext.apply({}, config, {
            model: 'BasicModel',
            proxy: {
                type: 'ajax',
                url: 'myServerUrl.json',
                reader: {
                    type: 'json'
                }
            }
        });
    }   
}); 
```

这使我可以很容易地使用服务器数据，并且还为商店周围的各种酷魔法提供了便利的方法（REST/排序等隐形）。

目前，我正在尝试使用更少的 ExtJs，在我做的一些项目中，因为在某些方面它有点重，因此我正在寻找与 Ext 的数据存储具有相似/更好功能的东西，不是 ExtJS（例如不是 Ext -核）

目前最好的 XHR 实用工具包是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:44:16.380

我会推荐 Knockout.JS 或 Backbone。

来自 Knockout.js[文档](http://knockoutjs.com/examples/helloWorld.html)：

**HTML**：

```
<p>First name: <input data-bind="value: firstName" /></p>
<p>Last name: <input data-bind="value: lastName" /></p>
<h2>Hello, <span data-bind="text: fullName"> </span>!</h2> 
```

**JS**：

```
// Here's my data model
var ViewModel = function(first, last) {
    this.firstName = ko.observable(first);
    this.lastName = ko.observable(last);

    this.fullName = ko.computed(function() {
        // Knockout tracks dependencies automatically. It knows that fullName depends on firstName and lastName, because these get called when evaluating fullName.
        return this.firstName() + " " + this.lastName();
    }, this);
};

ko.applyBindings(new ViewModel("Planet", "Earth")); // This makes Knockout get to work 
```

正如我所说，Backbone 也是您特定问题的解决方案。 [这](http://thomasdavis.github.com/2011/02/01/backbone-introduction.html)是一个由菜鸟为菜鸟设计的 Backbone 教程。[这](http://backbonetutorials.com/cross-domain-sessions/)是关于跨域处理的更中级教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:34:16.347

您还应该考虑 Angular.js [http://angularjs.org/](http://angularjs.org/)。这是我的一位同事 Greg Weber 的博客文章。

[http://tunein.yap.tv/javascript/2012/06/11/javascript-frameworks-and-data-binding/](http://tunein.yap.tv/javascript/2012/06/11/javascript-frameworks-and-data-binding/)

他有很多关于各种框架的例子。我不确定是在这里复制他的 blob 帖子更好，还是只提供一个链接。现在我将留下链接。

# php - 将 Magento 从 1.5.1.0 升级到 1.7.0.0 后的实体类型

> ID：11541550
> 
> 赞同：2
> 
> 时间：2012-07-18T12:37:23.930
> 
> 标签：php, magento

我已经通过 svn 将 magento 从版本 1.5.1.0 升级到 1.7.0，最多使用[本文中](http://www.magentocommerce.com/wiki/groups/174/changing_and_customizing_magento_code#upgrading_to_a_newer_version)的说明。经过几次调整后，网站升级了，似乎运行良好。经过短暂的用户测试后，没有发现任何错误。

但是我对 1.7 全新安装中存在的新实体类型（我认为它们中的大多数是在 1.6.x 版本中引入的）存在疑问，并且在我的升级中不存在。

以下是 1.7 版本的全新安装中存在但在我的升级版本中不存在的那些实体类型的列表：

```
'creditmemo_comment'
'creditmemo_item'
'customer_payment'
'invoice_comment'
'invoice_item'
'invoice_shipment'
'order_address'
'order_item'
'order_payment'
'order_status'
'order_status_history'
'quote'
'quote_address'
'quote_address_item'
'quote_address_rate'
'quote_item'
'quote_payment'
'shipment_comment'
'shipment_item'
'shipment_track' 
```

我想问其他人是否有这个问题，是否有人对此有解决方案？我对此表示怀疑，因为即使站点似乎也可以正常工作，我担心实体类型的这种差异可能会在以后的生产中引起一些错误。

谢谢！

# android - Android：无法安装保存到内存的应用程序

> ID：11541551
> 
> 赞同：1
> 
> 时间：2012-07-18T12:37:26.673
> 
> 标签：android, parsing, package

我正在从服务器下载一个 Android 应用程序并将其保存到我的应用程序的内部空间，使用：

```
URL url = new URL(Urls[0]);
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
File outputFile = new File(getFilesDir(), "Apps");
outputFile.mkdirs();
File file = makeFilename(outputFile, _appName + ".apk");
file.createNewFile();
file.setExecutable(true);
file.setReadable(true, false);
file.setWritable(true, false);
FileOutputStream fout = new FileOutputStream(zipFile);
InputStream in = conn.getInputStream();
byte[] buffer = new byte[1024];
int length = 0;
while ((length = in.read(buffer)) > 0) {
fout.write(buffer, 0, length);
}
fout.close();
in.close();
outputFile.setExecutable(true, false);
outputFile.setReadable(true, false);
outputFile.setWritable(true, false);

private File makeFilename(File base, String name) {
        if (name.indexOf(File.separatorChar) < 0) {
            return new File(base, name);
        }
        throw new IllegalArgumentException("File " + name
                + " contains a path separator");
    } 
```

下载完成后，会出现通知。当我单击此通知时，应安装该应用程序。但实际上，当我点击通知时，会出现“解析包时出错”。我做错了什么？

```
Intent i = new Intent(Intent.ACTION_VIEW);
i.setDataAndType(Uri.fromFile(new File(getFilesDir()+ "/Apps/_appName.apk")),"application/vnd.android.package-archive");
PendingIntent act = PendingIntent.getActivity(MainActivity._activity,0, i, 0);
notification.setLatestEventInfo("TEXT", "TEXT, act); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:49:33.847

我怀疑您下载的 .apk 文件对您的应用程序本身来说是**私有的。**

所以检查一下，

而且，当您在应用程序中存储文件时，请确保它具有**WORLD_READABLE**权限，例如，

`Context.MODE_WORLD_READABLE`

就像是，

```
OutputStream myOutputFile = openFileOutput("xxxx.apk", Context.MODE_WORLD_READABLE); 
```

# iphone - Plist文件在iphone中转换xml文件？

> ID：11541554
> 
> 赞同：0
> 
> 时间：2012-07-18T12:37:34.573
> 
> 标签：iphone, ios, xml, plist

是否可以从 plist 转换 xml 文件，如何转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:54:15.397

plist 是一个 XML 格式的文件。您可以使用以下方法将数据从 plist 存储到字典 :-) 然后您可以使用正确的键值获取值！

```
NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];
NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"example.plist"];

NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
NSString *errorDesc = nil;
NSPropertyListFormat format; 

NSMutableDictionary *tempDict = (NSMutableDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc]; 
```

// 如果你想保存它

```
[tempDict writeToFile:plistPath atomically:YES] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:53:37.257

添加新文件（plist）

以源代码格式打开

复制粘贴 xml 代码，如果您的代码正确，它将起作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:51:55.617

首先，您需要将 plist 文件加载到 NSDictionary，这样：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"fileName" ofType:@"plist"];;
NSDictionary *dictionary = [NSDictionary dictionaryWithContentsOfFile:filePath]; //or use dictionaryWithContentsOfURL to get from the web 
```

然后只需将其转换为 NSData

```
NSData *xmlData = [NSPropertyListSerialization dataFromPropertyList:dictionary format:NSPropertyListXMLFormat_v1_0   errorDescription:nil];
NSString *xmlString = [[NSString alloc] initWithData:xmlData encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T12:11:52.387

是的。

在 xcode 中打开 plist 文件。制作 plist 文件的副本。现在您将有一个提示窗口。从**格式**下拉列表中选择**属性列表 XML 。**添加*.xml*作为扩展名。

 ***并享受:-D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T22:41:49.873

实际上，我们基于 NSXMLParser 编写了一个简单的解析器类，使用 NSXMLParserDelegate 中存在的方法遍历数据并返回一个字典。

然后这个字典可以保存为一个文件，这将是一个 pList。

这导致直接的 XML -> pList 数据转换，其中 pList 是 XML 的精确表示。

我不知道为什么 Xcode 没有这个确切的东西作为示例文件，因为它似乎是一种常见的需求。

如果 NSPropertyListSerialization propertyListFromData:plistXML 取代了所有这些，那么我将再看看我们的代码。***

# java - 什么是'create = true'，连接javadb？

> ID：11541559
> 
> 赞同：4
> 
> 时间：2012-07-18T12:37:42.273
> 
> 标签：java, database-connection, derby, javadb

`jdbc:derby:myDatabase;create=true`

是什么`create=true`意思？所有连接网址都应该有这个 create=true 还是只有用户和 psw？

进阶谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T12:40:20.930

`create=true`在这种情况下，如果数据库不存在，则将创建该数据库。如果不需要，可以避免使用该参数。

从[文档](http://db.apache.org/derby/docs/10.4/ref/rrefattrib26867.html)中：

> 创建在数据库连接 URL Derby 系统中指定的标准数据库，然后连接到它。如果无法创建数据库，则错误日志中会出现错误，并且连接尝试失败并出现 SQLException 指示找不到数据库。
> 
> 如果数据库已经存在，则创建到现有数据库的连接并发出 SQLWarning。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T12:41:00.697

根据[http://db.apache.org/derby/docs/10.4/ref/rrefattrib26867.html](http://db.apache.org/derby/docs/10.4/ref/rrefattrib26867.html)它：

> 创建在数据库连接 URL Derby 系统中指定的标准数据库，然后连接到它。

所以我会说不，你不应该在所有连接网址中都有它；仅当您特别希望创建不存在的数据库时。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T12:41:18.483

这可能会有所帮助

[http://db.apache.org/derby/docs/10.4/ref/rrefattrib26867.html](http://db.apache.org/derby/docs/10.4/ref/rrefattrib26867.html)

# arm - 为 arm-linux 交叉编译 apache 服务器

> ID：11541560
> 
> 赞同：1
> 
> 时间：2012-07-18T12:37:43.760
> 
> 标签：arm, embedded-linux

现在有一天我正在使用我的 arm-1808 板并想为其交叉编译 Apache Web 服务器。我已经尝试了不同的指令来执行此操作，但没有得到满意的结果，请帮助我。谢谢

# bash - 如何在 Bash 中进行浮点比较？

> ID：11541568
> 
> 赞同：21
> 
> 时间：2012-07-18T12:37:56.653
> 
> 标签：bash, shell, floating-point, comparison

```
lock_percent=$(echo "scale = 5; $value2*100/$value1" | bc)
value=`echo "$lock_percent" | bc`

    if [[ "$value" > "$8" ]]; then
       echo "Lock Percentage:$value percentage State Critical"
       exit $STATE_CRITICAL
    fi 
```

我无法对此进行浮点比较。我哪里错了？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-18T12:44:34.733

Bash 本身不能使用浮点数。在这种情况下，也许您可​​以乘以 10 或 100（等）并获得可以比较的整数值。或者，您可以使用**bc**比较和返回值：

```
echo "10.2>10.1" | bc 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-18T15:45:35.350

```
# float number comparison
fcomp() {
    awk -v n1="$1" -v n2="$2" 'BEGIN {if (n1+0<n2+0) exit 0; exit 1}'
}

# test and example
fcomp_test() {
    if fcomp "$1" "$2"; then
       echo "$1<$2"
    else
       echo "$1>=$2"
    fi
}

fcomp_test 0.0 0.1
fcomp_test 0.1 0.1
fcomp_test -0.1 0.1
fcomp_test 1e3 1e4
fcomp_test -1.34e3 1.03e4
fcomp_test ' 0 ' ' 1 ' 
```

# java - 无法在 jboss 5.0.1 中创建代理

> ID：11541570
> 
> 赞同：0
> 
> 时间：2012-07-18T12:37:59.267
> 
> 标签：java, web-services, jakarta-ee

我正在使用 JBoss 服务器 5.0.1 并使用 jax-rpc 编写了一个 Web 服务客户端。运行时出现以下异常。由于 JBoss Web 服务不接受用户定义的 Java bean 传入/传出 jax-rpc，我已将所有 Java bean 对象转换为字符串、字符串数组和原始数据类型。因此，我从客户端调用 Web 服务，但是当我尝试调用我的 Web 服务时，它会引发以下异常。请帮我。

```
 17:27:09,537 ERROR [ServiceProxy] Service error
   javax.xml.rpc.ServiceException: Cannot create proxy
    at org.jboss.ws.core.jaxrpc.client.ServiceImpl.getPort(ServiceImpl.java:359)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.ws.core.jaxrpc.client.ServiceProxy.invoke(ServiceProxy.java:127)
    at $Proxy105.getCarrierWSSEIPort(Unknown Source)
    at org.apache.jsp.index_jsp._jspService(index_jsp.java:88)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:601)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:662)
 Caused by: java.lang.IllegalStateException: Cannot synchronize to any of these methods:
 public abstract java.lang.String[] client.CarrierWSSEI.getGroupID() throws java.rmi.RemoteException
 public abstract boolean client.CarrierWSSEI.checkRateData(java.lang.String) throws java.rmi.RemoteException
 public abstract boolean client.CarrierWSSEI.commitZipImportData(java.lang.String) throws java.rmi.RemoteException

 OperationMetaData:
  qname={urn:CarrierWS/wsdl}checkPlanData2
  javaName=checkPlanData
  style=document/literal/WRAPPED
  oneWay=false
  soapAction=
  ParameterMetaData:
  xmlName={urn:CarrierWS/types}checkPlanData2
  partName=checkPlanData2
  xmlType={urn:CarrierWS/types}checkPlanData2
  javaType=test.CarrierWSSEI_checkPlanData2_RequestStruct
  mode=IN
  inHeader=false
  index=0
  wrappedParameters=[[name = String_1, type = java.lang.String, typeArgs = null, variable = String_1, index = 0], [name = String_2, type = java.lang.String,         typeArgs = null, variable = String_2, index = 1]]
   ReturnMetaData:
   xmlName={urn:CarrierWS/types}checkPlanData2Response
   partName=checkPlanData2Response
   xmlType={urn:CarrierWS/types}checkPlanData2Response
   javaType=test.CarrierWSSEI_checkPlanData_ResponseStruct1
   mode=OUT
   inHeader=false
   index=-1
   wrappedParameters=[[name = result, type = boolean, typeArgs = null, variable = result, index = -1]]
        at org.jboss.ws.metadata.umdm.OperationMetaData.eagerInitialize(OperationMetaData.java:491)
        at org.jboss.ws.metadata.umdm.EndpointMetaData.eagerInitializeOperations(EndpointMetaData.java:557)
        at org.jboss.ws.metadata.umdm.EndpointMetaData.initializeInternal(EndpointMetaData.java:541)
        at org.jboss.ws.metadata.umdm.EndpointMetaData.setServiceEndpointInterfaceName(EndpointMetaData.java:220)
        at org.jboss.ws.core.jaxrpc.client.ServiceImpl.getPort(ServiceImpl.java:345)
         ... 33 more
 17:27:09,646 ERROR [STDERR] javax.xml.rpc.ServiceException: Cannot create proxy
 17:27:09,646 ERROR [STDERR]     at org.jboss.ws.core.jaxrpc.client.ServiceImpl.getPort(ServiceImpl.java:359)
 17:27:09,646 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 17:27:09,646 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 17:27:09,646 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 17:27:09,646 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:597)
 17:27:09,646 ERROR [STDERR]     at org.jboss.ws.core.jaxrpc.client.ServiceProxy.invoke(ServiceProxy.java:127)
 17:27:09,646 ERROR [STDERR]     at $Proxy105.getCarrierWSSEIPort(Unknown Source)
 17:27:09,646 ERROR [STDERR]     at org.apache.jsp.index_jsp._jspService(index_jsp.java:88)
 17:27:09,662 ERROR [STDERR]     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
 17:27:09,662 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
 17:27:09,662 ERROR [STDERR]     at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
 17:27:09,662 ERROR [STDERR]     at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
 17:27:09,662 ERROR [STDERR]     at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
 17:27:09,662 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
 17:27:09,662 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
 17:27:09,662 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
 17:27:09,662 ERROR [STDERR]     at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
 17:27:09,662 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
 17:27:09,662 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
 17:27:09,662 ERROR [STDERR]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
 17:27:09,662 ERROR [STDERR]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
 17:27:09,662 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
 17:27:09,662 ERROR [STDERR]     at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
 17:27:09,662 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
 17:27:09,662 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
 17:27:09,662 ERROR [STDERR]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
 17:27:09,662 ERROR [STDERR]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
 17:27:09,662 ERROR [STDERR]     at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
 17:27:09,662 ERROR [STDERR]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
 17:27:09,677 ERROR [STDERR]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
 17:27:09,677 ERROR [STDERR]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
 17:27:09,677 ERROR [STDERR]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:601)
 17:27:09,677 ERROR [STDERR]     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
 17:27:09,677 ERROR [STDERR]     at java.lang.Thread.run(Thread.java:662)
 17:27:09,677 ERROR [STDERR] Caused by: java.lang.IllegalStateException: Cannot synchronize to any of these methods:
 public abstract java.lang.String[] client.CarrierWSSEI.getGroupID() throws java.rmi.RemoteException
 public abstract boolean client.CarrierWSSEI.checkRateData(java.lang.String) throws java.rmi.RemoteException
 public abstract boolean client.CarrierWSSEI.commitZipImportData(java.lang.String) throws java.rmi.RemoteException
OperationMetaData:
qname={urn:CarrierWS/wsdl}checkPlanData2
javaName=checkPlanData
style=document/literal/WRAPPED
oneWay=false
soapAction=
ParameterMetaData:
 xmlName={urn:CarrierWS/types}checkPlanData2
 partName=checkPlanData2
 xmlType={urn:CarrierWS/types}checkPlanData2
 javaType=test.CarrierWSSEI_checkPlanData2_RequestStruct
 mode=IN
 inHeader=false
 index=0
 wrappedParameters=[[name = String_1, type = java.lang.String, typeArgs = null, variable = String_1, index = 0], [name = String_2, type = java.lang.String,        typeArgs = null, variable = String_2, index = 1]]
 ReturnMetaData:
 xmlName={urn:CarrierWS/types}checkPlanData2Response
 partName=checkPlanData2Response
 xmlType={urn:CarrierWS/types}checkPlanData2Response
 javaType=test.CarrierWSSEI_checkPlanData_ResponseStruct1
 mode=OUT
 inHeader=false
 index=-1
wrappedParameters=[[name = result, type = boolean, typeArgs = null, variable = result, index = -1]]
17:27:09,756 ERROR [STDERR]     at org.jboss.ws.metadata.umdm.OperationMetaData.eagerInitialize(OperationMetaData.java:491)
17:27:09,756 ERROR [STDERR]     at org.jboss.ws.metadata.umdm.EndpointMetaData.eagerInitializeOperations(EndpointMetaData.java:557)
17:27:09,756 ERROR [STDERR]     at org.jboss.ws.metadata.umdm.EndpointMetaData.initializeInternal(EndpointMetaData.java:541)
17:27:09,756 ERROR [STDERR]     at org.jboss.ws.metadata.umdm.EndpointMetaData.setServiceEndpointInterfaceName(EndpointMetaData.java:220)
17:27:09,756 ERROR [STDERR]     at org.jboss.ws.core.jaxrpc.client.ServiceImpl.getPort(ServiceImpl.java:345)
17:27:09,756 ERROR [STDERR]     ... 33 more 
```

JSP客户端代码如下：

```
<%@page import="java.util.Hashtable"%>
<%@page import="javax.naming.*,javax.xml.rpc.Stub,stubs.CarrierWS,stubs.CarrierWSSEI,stubs.CarrierWSSEI_Impl"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>JSP Page</title>
</head>
<body>
<% try {
      InitialContext ic = new InitialContext( );
      CarrierWS carrierws = (CarrierWS)ic.lookup("java:comp/env/service/CarrierWS");
      out.println("========================" + carrierws);
      CarrierWSSEI sei = carrierws.getCarrierWSSEIPort();
      out.println("Invoking the service please wait ............." + carrierws.getCarrierWSSEIPort());
      ((Stub)sei)._setProperty(Stub.ENDPOINT_ADDRESS_PROPERTY,"http://localhost:8080/TestWS3WAR/CarrierWS");
      out.println("Invoking the service please wait ............." + sei.getActiveBenData().length);
   }
   catch(Exception e)
   {
      out.println("Exception occurred : " + e.getMessage());
      e.printStackTrace();
   }
%>
</body></html> 
```

提前致谢， Senthil

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:30:44.407

问题是尽管我将所有返回类型都转换为字符串类型，但 Jboss 5.0.1 GA 并没有在 Web 服务接口和实现中处理多态性。

# iphone - iPhone 从 RSA 公钥生成 X509 证书

> ID：11541571
> 
> 赞同：1
> 
> 时间：2012-07-18T12:38:01.467
> 
> 标签：iphone, certificate, rsa, exchange-server, x509

iPhone开发中有没有办法从我的RSA公钥（seckeyref）生成X509证书

或者有谁知道我如何将我的公钥传输到java服务器？

谢谢帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:31:01.947

不明白你的意思。如果您的意思是 RSA 是一个完整的证书，那么：

```
SecCertificateRef cert = ...
CFDataRef der = SecCertificateCopyData(cert);

const unsigned char * ptr = CFDataGetBytePtr(der);
int len = CFDataGetLength(der);

// now write len bytes from ptr to a file, put it in a POST request
// to the server, etc. 
```

您可以将其写成二进制文件（作为 DER 文件）或转换为 base64 作为 PEM 证书。Java 会喜欢 DER 文件/格式并接受它

```
FileInputStream certificateStream = new FileInputStream(aboveDerFileOrPost);
CertificateFactory certificateFactory = CertificateFactory.getInstance("X.509");
java.security.cert.Certificate[] certs = {};
certs = certificateFactory.generateCertificates(certificateStream).toArray();
certificateStream.close(); 
```

某种方式。如果你的意思是你有一个原始的 RSA 公钥——你现在想添加 X509 的东西来使它成为一个证书然后签名——那就是相当多的工作。AFAIK 需要使用 openssl（或者至少我是这样做的）来创建 x509 结构；然后使用 SecTransformExecute() 或 SecKeyRawSign() 进行签名，以免违反密钥库上的安全规则。

# python - 如何删除列表中的重复值？

> ID：11541576
> 
> 赞同：3
> 
> 时间：2012-07-18T12:38:04.167
> 
> 标签：python, list

> **可能重复：**
> [如何在 Python 列表中删除重复项，同时保持顺序？](https://stackoverflow.com/questions/480214/how-do-you-remove-duplicates-from-a-list-in-python-whilst-preserving-order)

让我们考虑一下列表：

```
x = ['a', 'b', 'c', 'c', 'a', 'd', 'z', 'z'] 
```

我想删除这些重复值 list-x 并希望结果为：

```
y = ['a', 'b', 'c', 'd', 'z'] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T12:42:02.073

如果订购无关紧要，请使用一组：

```
>>> list(set(['a', 'b', 'c', 'c', 'a', 'd', 'p', 'p']))
['a', 'p', 'c', 'b', 'd'] 
```

如果排序*确实*很重要，请使用[OrderedDict](http://docs.python.org/library/collections.html#collections.OrderedDict)：

```
>>> from collections import OrderedDict 
>>> OrderedDict.fromkeys(['a', 'b', 'c', 'c', 'a', 'd', 'p', 'p']).keys()
['a', 'b', 'c', 'd', 'p'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T12:39:02.713

由于没有说明有关保留顺序的内容，因此这种方法将起作用：

```
x = ['a', 'b', 'c', 'c', 'a', 'd', 'z', 'z']

list(set(x)) 
```

会给你

```
['a', 'c', 'b', 'd', 'z'] 
```

通过将列表更改为 a `set`，您可以消除所有重复项。您申请`list()`将非重复数据更改回列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T12:44:24.617

你也可以使用

```
y=[ x[i] for i in range(len(x)) if not x[i] in x[:i]] 
```

我认为这将是最简单的解决方案。

# jquery - 超大：playToggle

> ID：11541577
> 
> 赞同：0
> 
> 时间：2012-07-18T12:38:06.643
> 
> 标签：jquery, supersized

我正在使用超大背景幻灯片：

[http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)

使用以下代码在加载模式框时暂停幻灯片。

jQuery

```
<script type="text/javascript">
$(function($) {
 $('#slideInfo').click(function() {
    api.playToggle();
  });
});

</script> 
```

HTML

```
<div id="btnContainer">
<a id="slideInfo" href="#">More Info</a>
</div> 
```

我可以暂停幻灯片。但是，当我关闭模式框时，幻灯片将不会再次播放（它保持暂停状态）。

有没有办法做到这一点？

谢谢！

编辑：

这是测试站点：

[http://clientes.ktulumedia.com/peppophotography.com](http://clientes.ktulumedia.com/peppophotography.com)

以及相关代码：

```
 <script type="text/javascript">
 $(function($) {
 $('#slideInfoplay').click(function() {
 api.playToggle();
 });
 });

 $(function($) {
 $('#sb-nav-close').click(function() {
 api.playToggle();
 });
 });

 </script> 
```

单击显示“测试”的位置。我可以打开模式框并暂停幻灯片。但是，当我关闭模式框时，我无法重新启动幻灯片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:48:23.157

您的[插件用法](http://buildinternet.com/project/supersized/docs.html#api-playtoggle)是正确的，但您的[jQuery 文档就绪](http://api.jquery.com/ready/)方法是错误的。

```
$(function() {//you shouldnt use '$' inside function()
 $('#slideInfo').click(function() {
    api.playToggle();
  });
}); 
```

或者

```
$(document).ready(function() {
 $('#slideInfo').click(function() {
    api.playToggle();
  });
}); 
```

# objective-c - 在 NSTableView 中显示记录部分

> ID：11541581
> 
> 赞同：3
> 
> 时间：2012-07-18T12:38:15.587
> 
> 标签：objective-c, macos, cocoa-touch

我有三个可变数组都需要作为不同的部分加载到表中。但是，我发现`NSTableView`不支持部分，如何明智地显示列表部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:59:46.490

只需谷歌一下，你就会得到[这个样本](http://www.noodlesoft.com/blog/2009/09/25/sticky-section-headers-in-nstableview/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T13:13:54.400

您可以使用`NSOutlineView`支持这种事情的类。它是 的子类`NSTableView`。

数据模型和委托协议稍微复杂一些，但并不复杂。[Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSOutlineView_Class/Reference/Reference.html)中有更多信息。还有很多其他开发者制作的教程，谷歌会为你揭开。

# iphone - iPhone：在没有麦克风的情况下录制输出声音

> ID：11541594
> 
> 赞同：1
> 
> 时间：2012-07-18T12:38:57.500
> 
> 标签：iphone, objective-c, xcode, audio, audio-recording

我正在编写一个需要在没有麦克风的情况下录制输出声音的应用程序。
例如：如果我有两个声音文件，first.mp3 和 second.mp3，我想按录制按钮，然后按 playfirst 按钮，然后 playsecond 按钮然后 stoprecord 按钮。在此之后，我应该有 third.mp3，其中包括录制的第一和第二声音。
是否可以？

感谢和抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:14:49.673

我很确定如果不先让声音从设备中逸出，这在设备上是不可能的。

为了实现您想要的功能，Apple 的硬件工程师必须放置一个模拟多路复用器，其输出面向具有（至少）2 个输入的重新编码输入接口，其中一个是与外界接触的实际麦克风，另一个是扬声器 DAC 的输出。我只是不认为这是他们设计硬件的方式。

它应该是怎样的：

![在此处输入图像描述](../Images/c4ee87914686bfe5a833c221b2a2bb84.png)

最有可能是怎么做到的！！！

![在此处输入图像描述](../Images/047802d4d81ba1db5aca91a604738805.png)

# c# - 时间：2018-10-11 标签：c#reflectionfindingreloadedmethodwrtoinheritance

> ID：11541600
> 
> 赞同：3
> 
> 时间：2012-07-18T12:39:18.623
> 
> 标签：c#, reflection

当我有一个类型可以传递给该方法时，我试图通过反射找到最合适的调用方法。

让我担心的边缘情况是使用相同数量的参数重载，如下所示：

```
class UserClass {}
class UserClassB : UserClass {}

class SomeClass {
   void method(object x);
   void method(UserClass x);
} 
```

在运行时我对调用感兴趣`method`，而我手头的类型是`UserClassB`.

最合适的应该是`method(UserClass)`.

问题是使用`typeof(SomeClass).GetMethod("method", new Type[] { typeof(UserClass2) }));` 它时会返回一个空值，因为我认为它是根据传递类型的完全匹配进行搜索的。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:57:46.083

您缺少绑定标志。使用可以传递以下标志的重载：
BindingFlags.Instance | BindingFlags.NonPublic

你得到 null 因为 GetMethod 将寻找公共方法，除非你指定你也想要非公共方法。

```
var method = typeof(SomeClass).GetMethod("method", BindingFlags.Instance | BindingFlags.NonPublic, null, new[] { typeof(UserClass) },null); 
```

# javascript - 需要在表单的 AjaxSubmit 上将 Formvalues 从 View 传递到 Controller

> ID：11541601
> 
> 赞同：0
> 
> 时间：2012-07-18T12:39:21.660
> 
> 标签：javascript, asp.net, asp.net-mvc-3, jquery

```
I have a Strongly typed View Model
        @model DbRepositories.User
        @using (Html.BeginForm("AddUser", "Home", FormMethod.Post, new { id = "frmuser" })) { 

        Some Controls Goes here..
        <div> <input id="btnsave" type="button" value="Save" onclick="SaveUser();" /></div>
        } 
```

这是我的 Javascript 文件

```
var options = 
{
   success: showResponse  // post-submit callback 
};
function SaveUser() {
$('#frmuser').ajaxSubmit(options);
} 
```

和接受用户对象 [HttpPost] 的我的操作方法

```
public ActionResult AddUser(User Obj)
{
    UserHelper hlp = new UserHelper();
    hlp.AddNewUser(obj);
    return null;
} 
```

我没有在我的用户对象中获取表单字段值。我如何将表单数据发送到控制器。请帮助我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:13:42.853

尝试使用`Ajax.BeginForm`通过 ajax 提交表单值。

```
@{
   var ao = new AjaxOptions
            {
              HttpMethod = HttpMethod.Post,
              OnSuccess = showResponse,
              OnFailure = ..  
            }
}

@using(Ajax.BeginForm("AddUser", "Home", ao))
{
   Some Controls Goes here..
   <div><input id="btnsave" type="button" value="Save" /></div>
} 
```

您必须确保包含`jquery.unobtrusive-ajax.js`or `jquery.unobtrusive-ajax.min.js`。

# javascript - 如何显示隐藏和显示选择框？

> ID：11541603
> 
> 赞同：-1
> 
> 时间：2012-07-18T12:39:24.937
> 
> 标签：javascript, jquery

我用谷歌搜索了很多我的要求。所以我发布了这个问题。我的要求是当用户根据要显示的 div 从下拉列表中选择一个值时。但默认情况下，所有带有值的 div 都会被显示。

这是我的代码：

```
<select name="lab_1" id="title" >
  <option value="All" onclick="showAll();" >All</option>
  <option value="one" onclick="showOther();">One</option>
  <option value="two" onclick="showOther();">Two</option>    
</select>
<div id="All" >
  hiihdhfhdf
  <div id="otherTitle" style="display:none;" >
    select
  </div>
  <div id="otherTitle2" style="display:none;" >
    ramsai
  </div>
</div>

<script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
<script>
$(function() {
$('#title').change(function() {
    var all= $("#All").val();
    alert('hi');
    if(all==""){
        $("#otherTitle").show();
        $("#otherTitle2").show();
      }
      else if (this.value == "one") {
        $("#otherTitle").show();
        $("#otherTitle2").hide();
      }
      else if (this.value=="two"){
        $("#otherTitle2").show();
        $("#otherTitle").hide();
      }     
    });
    });

</script>
</body> 
```

这里有上面的代码，当我点击我的所有 div 时没有显示，但是当我转到一个或两个选项时，它显示了所有的值。我有 42 个 div 是否有针对 jquery 中所有这些 div 的任何其他解决方案，或者下面提到的是唯一的解决方案

先感谢您

拉姆赛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:52:19.983

在这里回答：http: [//jsfiddle.net/Hxadj/](http://jsfiddle.net/Hxadj/)

代码中有一些不需要的额外内容。您还测试了 All 的值。我不确定为什么，您需要的是使用 (this.value == X) 完成的选择的值

```
$(function() {
$('#title').change(function() {
if(this.value == "All"){
    $("#All").show();        
    $("#otherTitle").show();
    $("#otherTitle2").show();
  }
  else if (this.value == "one") {
    $("#All").hide();          
    $("#otherTitle").show();
    $("#otherTitle2").hide();
  }
  else if (this.value=="two"){
    $("#All").hide();          
    $("#otherTitle2").show();
    $("#otherTitle").hide();
  }     
});
}); 
```

**更新**

链接在这里：http: [//jsfiddle.net/Hxadj/1/](http://jsfiddle.net/Hxadj/1/)

HTML：

```
<select name="lab_1" id="title" >
<option value="All">All</option>
<option value="otherTitle">One</option>
<option value="otherTitle2">Two</option>
</select>

<div id="All" class="togglers">hiihdhfhdf</div>
<div id="otherTitle" class="togglers">select</div>
<div id="otherTitle2" class="togglers">ramsai</div> 
```

JS

```
 $(function() {
    $('#title').change(function() {
    var divName = this.value;
    if(this.value == "All"){    
        $(".togglers").show();
    }else{      
        $(".togglers").hide();
        $("#"+divName).show();           
      }     
    });
}); 
```

这应该这样做。基本上，您选择的选项值必须对应于 div ID。然后，您无需进入并为每个规则硬编码 show() 或 hide() 规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:51:00.887

```
<select name="lab_1" id="title" >
<option value="All" onclick="show(this.value);" >All</option>
<option value="one" onclick="show(this.value);" >One</option>
<option value="two" onclick="show(this.value);" >Two</option>
</select> 
```

现在您的 JavaScript 将如下所示：

```
<script>
function show(val){

  if(val=="All"){

     document.getElementById("otherTitle").style.visibility="";
     document.getElementById("otherTitle2").style.visibility="";

 }elseif(val=="one"){

     document.getElementById("otherTitle").style.visibility="";
     document.getElementById("otherTitle2").style.visibility="collapse";

 }elseif(val=="two"){

   document.getElementById("otherTitle").style.visibility="collapse";
   document.getElementById("otherTitle2").style.visibility="";
 }
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:55:00.153

或者再次：

```
$('#title').change(function() {
    var id = $(this).val();
    $('#otherTitle, #otherTitle2').not('#'+id).hide();
    $('#'+id).children().show();         
 }); 
```

[小提琴](http://jsfiddle.net/G7rNR/)

# php - PHP 类扩展了一个公共变量

> ID：11541610
> 
> 赞同：1
> 
> 时间：2012-07-18T12:39:52.930
> 
> 标签：php

我有两节课

```
class validate {
    public $mediaFlag;

    function ValidateTypeOfMedia($SOEmag,$SOEtab,$Soct,$DAL,$insertMeda,$other){    
        if($SOEmag==""){
            return "Must select Media Type";
        }
        else{
            $this->mediaFlag=1;
        }
    }

    function whatever()
    {
        if( $this->mediaFlag==1)
        {
            echo "flag is here";
        }
        else {
            echo "flag didn't work";
        }
    }
}/// Class validate Ends

class InsertINDB extends validate 
{

    function test(){
        if( $this->mediaFlag==1)
        {
            echo "flag is here";
        }
        else {
            echo "flag didn't work";
        }
    }
} 
```

我遇到的问题是在类 insertINDB 中，函数 test 无法识别 mediaFlag 变量已设置...但是，父类中的任何函数都可以识别。所以我的问题是，InsertINDB 类中的函数测试为什么不知道该标志已在父类中设置。

```
$object_validate= new validate;

$object_DB= new InsertINDB;

$object_validate->whatever();
$object_DB->test(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:43:54.673

从我所看到的 - 在设置标志的情况下，某些东西已经设置它 - 没有默认值。问题不`validate`在于`InsertINDB`. 例如，在第一种情况下`ValidateTypeOfMedia`被称为，在第二种情况下，不是。

编辑：OR`$SOEma == ""`在第二种情况下评估为 true 并且`ValidateTypeOfMedia`不将标志设置为 1。

顺便说一句，您的代码看起来不正确，不是最佳实践，无论您要实现什么（绝不是试图侮辱您）。

编辑2：

结果是什么，我敢打赌在这两种情况下都没有设置标志：

```
$object_validate= new validate;

$object_DB= new InsertINDB;

$object_validate->whatever();

$object_DB->test(); 
```

编辑3：

Khanquered Pro，根据您的评论-您可能不了解多态性的目的。所以解释一下 - 在你扩展第一个类之后，你创建了一个孩子的实例（在你的例子中是 InsertINDB）。然后该实例包含 validate 的所有方法（函数）和属性。您不能首先在一个实例中调用 validate，然后期望它的属性在子类中可用 - 在这种情况下，每个实例都是完全独立的东西，它们有自己的属性值（状态）。因此，在您扩展后，`validate`您只能与孩子一起工作 - 使用它来验证，使用它来插入到 db。`validate`并且仅在应用程序中需要验证数据而不插入任何内容的情况下才使用partent 。

我不会评论整个架构是否是个好主意——它超出了问题的范围，可能超出了您当前的知识范围，但是在您成功完成任务之后，请先阅读有关 OOP 主题的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:52:38.350

您的问题是对扩展类的工作原理以及类和对象之间的区别的误解。

当你这样做时，你会`$var = new ClassName`根据类实例化一个对象。该对象不再直接连接到类，并且从同一类更改另一个实例中的值不会影响其他实例。

相同的原则适用于扩展其他类的类——一旦实例化，一个对象就与其他所有对象分开，无论它们来自同一个类还是它的父/子之一。

我们举一个简单的例子：

```
class Bob {

  public $property = 1;

}

class Dave extends Bob {
}

$bob = new Bob;
$dave = new Dave;

echo $bob->property; // 1
echo $dave->property; // 1

$bob->property = 2;

echo $bob->property; // 2
echo $dave->property; // 1 
```

您期望的行为可以通过使用[*静态*](http://www.php.net/manual/en/language.oop5.static.php)成员（有时也称为*类*成员）来获得。

我认为值得您回到手册并完整地重新阅读[OOP 章节](http://php.net/manual/en/language.oop5.php)。

# java - 线程类的静态方法和本机方法是什么

> ID：11541617
> 
> 赞同：-5
> 
> 时间：2012-07-18T12:40:18.183
> 
> 标签：java

在一次采访中，我遇到了以下问题：

> 类的静态方法和本机方法是`Thread`什么？
> 
> 1.  `yield`
> 2.  `start`
> 3.  `join`
> 4.  `wait`

我了解多线程概念，例如：

```
Thread t = new Thread();
t.start(); // Thread starting execution
t.join(); // (or t.wait()) thread state will go to waiting 
```

但是我没有回答文章开头提到的面试问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:43:25.630

请参阅 Java 线程文档。

[http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)

像在大自然中`currentThread()` `sleep etc..` 吃的方法。`static`

`currentThread` `isAlive`像etc之类的方法很少`native`。

参考[这个](http://www.docjar.com/html/api/java/lang/Thread.java.html)。

```
yield -> public static native void
start -> public synchronized void start
join  -> public final synchronized void
wait  -> In object class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:48:21.527

您可能想查看[`java.lang.Thread`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html). 它基本上告诉你：

1.  `yield()`是`static`
2.  `wait()`不是`static`，并且是继承自`java.lang.Object`
3.  `start`并且`join`不是`static`并且由`java.lang.Thread`类定义。

这些`native`方法的好坏很可能取决于 VM 实现，但它在某种程度上取决于问题的实际含义`native`。

# android - 有没有办法通过使用 IMEI 号码来锁定我的安卓应用程序

> ID：11541618
> 
> 赞同：1
> 
> 时间：2012-07-18T12:40:19.103
> 
> 标签：android

> **可能重复：**
> [平板电脑的设备 IMEI 锁定](https://stackoverflow.com/questions/6463714/device-imei-locking-for-tablets)

有没有办法通过使用 IMEI 号来锁定我的 android 应用程序。我想这样做是因为我不想让我的应用程序的用户通过将 APK 发送到其他设备来共享它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:52:36.040

apk 本身无法锁定给付费用户，直到 JellyBean。从 JellyBean 开始，付费应用程序被加密并存储在手机上。

这是[Screencast](https://play.google.com/store/apps/details?id=com.ms.screencast&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5tcy5zY3JlZW5jYXN0Il0.)应用程序*似乎*使用的解决方案。当您购买它时，他们会将您的身份存储在他们的服务器中。每次您打开应用程序时，他们都会在继续之前再次验证您的身份。问题是，当然，如果没有连接到网络，即使是注册用户也无法使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:46:36.017

```
public String getSimSerialNumber(){
    TelephonyManager tm = (TelephonyManager)this.getActivity().getSystemService(this.getActivity().TELEPHONY_SERVICE); 
    String number = tm.getSimSerialNumber();
    return number;
} 
```

这可能对您有帮助。您还可以使用[Android 的 TelephonyManager](http://developer.android.com/reference/android/telephony/TelephonyManager.html)获取其他数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:49:43.403

据我所知，您的应用程序包无法自行修改。因此，如果没有一些外部服务器来验证锁定，使用任何唯一 ID 将其“锁定”到当前安装是毫无意义的。否则，用户可以重新安装，应用程序将读取 IMEI 并锁定。用户清除了“应用程序数据”，您的应用程序认为它是新安装的。

如果您事先知道 IMEI（例如从注册表单中），您可以为每个用户编译个人版本的应用程序，将 IMEI 硬编码在里面并在启动时检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T12:50:16.440

请阅读这篇博文。IMEI 不是识别特定设备的安全方法。

[http://android-developers.blogspot.de/2011/03/identifying-app-installations.html](http://android-developers.blogspot.de/2011/03/identifying-app-installations.html)

*   仅 WIFI 的设备不会有 IMEI
*   重置后，IMEI 保持不变。所以卖设备是个问题
*   有时查询IMEI的功能会返回垃圾
*   您需要在您的应用中获得额外的权限 (READ_PHONE_STATE)

不幸的是，谷歌没有为这个问题展示“最佳实践”的方式......

# python - 为什么我在 python 中将值分配到此处列出的错误？

> ID：11541624
> 
> 赞同：0
> 
> 时间：2012-07-18T12:40:35.453
> 
> 标签：python

而不是通过**list.append()**将值附加到 list ，为什么我不能像这样为它分配一个值？

```
In [24]: def a():
   ....:     a1=[5]
   ....:     print a1[0]
   ....:     

In [25]: a()
5

In [28]: def a():
   ....:     a1=[5]
   ....:     a1[1]=12
   ....:     print a1[1]
   ....:     

In [29]: a()
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
/home/dubizzle/webapps/django/dubizzle/<ipython-input-29-72f2e37b262f> in <module>()
----> 1 a()

/home/dubizzle/webapps/django/dubizzle/<ipython-input-28-681d86164e67> in a()
      1 def a():
      2     a1=[5]
----> 3     a1[1]=12
      4     print a1[1]
      5 

IndexError: list assignment index out of range 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:45:41.550

`a=[5]`创建一个大小为 1 的列表。以下是有效的：

```
a[0] = 1 
```

但是您不能仅通过将值分配给给定的不存在的位置来更改列表的大小。

不过，您可以使用`append`or扩展列表`+=`：

```
a.append(2)
a += [2] 
```

您还可以预先分配给定大小的列表：

```
a = [0] * 4 
```

这将为您提供一个包含四个元素（全为零）的列表。之后，您可以更改 0-3 范围内的任何元素。

作为参考，这里有一些[关于](http://docs.python.org/tutorial/datastructures.html#more-on-lists)python.org 列表的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:56:24.240

错误消息是不言自明的。

要强制创建新项目，您可以使用切片：

```
a1 = [5]
a1[1:2] = [12] 
```

如果您不关心元素的顺序，您可以使用字典：

```
d = {}
d[1] = 12 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T13:17:45.480

如果你真的想要，你可以创建自己的类，当你要求一个不存在的索引时重新定义（并用 填充其余部分`None`）

```
class mylist():
    def __init__(self,l):
        self.l = l
    def extend(self,index):
        diff = index + 1 - len(self.l)
        if diff > 0:
            self.l.extend([ None for x in range(diff) ] )
    def __getitem__(self,index):
        # self.extend(index) ## depending on your taste
        return self.l[index]
    def __setitem__(self,index,value):
        self.extend(index) 
        self.l[index] = value
    def __repr__(self):
        return self.l.__repr__()

a = mylist([0,1,2,3])
print 'List: %s' % a
# print a[5]  ### this will throw an 'list index out of range' unless you comment out the bit in __getitem__
a[5] = 5
print 'List: %s' % a
print a[5] 
```

哪个输出：

```
List: [0, 1, 2, 3]
List: [0, 1, 2, 3, None, 5]
5 
```

[在http://pythonfiddle.com/auto-dimension-list](http://pythonfiddle.com/auto-dimension-list)上查看

这是不完整的，因为您还需要桥接所有其他列表方法，不确定如何做到这一点（可能是一些**getattr**？）如果某些专家可以加入，那就太好了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:47:16.397

您应该使用 None 或其他内容预先填充它以添加索引

```
myList = [None] * 10
myList[1] = 'a' 
```

因为， list 最初是一个 touple，你不能在没有 append 的情况下添加任何东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T12:49:58.600

```
a1[x] = y 
```

这不可能发生，因为如果列表仅包含 1 项，并且您尝试分配`a1[3]`它将在列表中的其他两项中分配的内容`[1][2]`？

使用类型的内置方法来修改它们。`.append()` `.insert()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T12:56:14.803

list.append() 在列表中添加一个元素，并且 a[1] = 'x' 为索引为 1 的列表项分配一些值。您的代码的问题是您试图访问一个不存在的内存块。试试这个。

```
def a():
    a1=[5, 0] 
    a1[1]=12 
    print a1[1] 
```

或者

```
def a()
    a1 = list('abc')
    a1[1]=12 
    print a1[1] 
```

# android - android设备如何识别要使用的布局

> ID：11541627
> 
> 赞同：0
> 
> 时间：2012-07-18T12:40:42.183
> 
> 标签：android

在我的 android 应用程序中，我为大屏幕和超大屏幕设置了布局资源，即：layout-large 和 layout-xlarge。当我在具有“大”屏幕的设备模拟器中打开运行它时，它会从“layout-large”文件夹中获取布局，这似乎是正确的。但是当我使用 x-large 屏幕尺寸的设备时，它仍然使用“layout-large”资源。

我使用的 x-large 设备是 10"、1280x800、240dp 模拟器。知道吗？

我在清单中包含以下内容：

```
<supports-screens 
android:anyDensity="true"
android:smallScreens="true"
android:normalScreens="true"
android:largeScreens="true"
android:resizeable="true" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:47:03.907

下面的链接将帮助您了解 android 如何在各种设备上获取布局文件

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:43:47.810

您确定文件夹名称是`layout-xlarge`而不是`layout-x-large`？[文档](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:10:39.557

根据 Android 文档，用于布局的运行时渲染

> 在运行时，系统通过以下过程为任何给定资源确保当前屏幕上的最佳显示：

```
The system uses the appropriate alternative resource

Based on the size and density of the current screen, the system uses any size- and density-specific resource provided in your application. For example, if the device has a high-density screen and the application requests a drawable resource, the system looks for a drawable resource directory that best matches the device configuration. Depending on the other alternative resources available, a resource directory with the hdpi qualifier (such as drawable-hdpi/) might be the best match, so the system uses the drawable resource from this directory.
If no matching resource is available, the system uses the default resource and scales it up or down as needed to match the current screen size and density

The "default" resources are those that are not tagged with a configuration qualifier. For example, the resources in drawable/ are the default drawable resources. The system assumes that default resources are designed for the baseline screen size and density, which is a normal screen size and a medium density. As such, the system scales default density resources up for high-density screens and down for low-density screens, as appropriate.

However, when the system is looking for a density-specific resource and does not find it in the density-specific directory, it won't always use the default resources. The system may instead use one of the other density-specific resources in order to provide better results when scaling. For example, when looking for a low-density resource and it is not available, the system prefers to scale-down the high-density version of the resource, because the system can easily scale a high-density resource down to low-density by a factor of 0.5, with fewer artifacts, compared to scaling a medium-density resource by a factor of 0.75. 
```

# javascript - 第一步是 THREE.js：尝试将搅拌机模型添加到场景的问题

> ID：11541630
> 
> 赞同：0
> 
> 时间：2012-07-18T12:40:48.737
> 
> 标签：javascript, three.js

我正在使用 THREE.js 迈出第一步。

现在，我只是尝试修改此处找到的示例文件：http: [//aerotwist.com/tutorials/getting-started-with-three-js/](http://aerotwist.com/tutorials/getting-started-with-three-js/)

该文件创建一个三个场景，添加一个球体和一个点光源。

我的问题是：我找不到如何用我使用搅拌机 2.63 创建并使用搅拌机 2.63 导出器导出的模型替换球体。

我想我的语法有点错误。

下面是我的代码。有人能告诉我要改变什么才能让我的搅拌机模型在舞台上展示吗？

谢谢。

```
<head>
    <meta charset="utf-8" />
    <title>Sample Three.js</title>
    <link rel="stylesheet" href="js/Styles.css" />
</head>
<body>

    <div id="container">
    </div>

</body>
<script src="js/Stats.js"></script>
<script src="js/Three.js"></script>
<script>

var WIDTH = 700,
    HEIGHT = 600;

var VIEW_ANGLE = 45,
    ASPECT = WIDTH / HEIGHT,
    NEAR = 0.1,
    FAR = 10000;

var container = window.document.getElementById('container');

var renderer = new THREE.WebGLRenderer();
var camera = new THREE.PerspectiveCamera(  VIEW_ANGLE,
                                ASPECT,
                                NEAR,
                                FAR  );
var scene = new THREE.Scene();

camera.position.z = 300;

renderer.setSize(WIDTH, HEIGHT);

container.appendChild(renderer.domElement);

var sphereMaterial = new THREE.MeshLambertMaterial(
{
    color: 0xCC0000
});

//var radius = 50, segments = 16, rings = 16;

var loader = new THREE.JSONLoader();

loader.load( 'js/ModelTest.js', function ( geometry ) {
    mesh = new THREE.Mesh( geometry, sphereMaterial );
    scene.add( mesh );
    mesh.position.x = 0;
    mesh.position.y = 0;
    mesh.position.z = 0;
alert(mesh.geometry.vertices.length)
} );

//var sphere = new THREE.Mesh(
//new THREE.SphereGeometry(radius, segments, rings),sphereMaterial);

//scene.add(sphere);

scene.add(camera);

var pointLight = new THREE.PointLight( 0xFFFFFF );

pointLight.position.x = 10;
pointLight.position.y = 50;
pointLight.position.z = 130;

scene.add(pointLight);

renderer.render(scene, camera);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T10:55:25.657

也许是一个愚蠢的答案，但我遇到了同样的问题并解决了它缩放对象。尝试在 mesh.position.z=0 之后添加回调函数：

网格.scale.x = 网格.scale.y = 网格.scale.z = 200;

对我来说它有效。

希望有用。彼得罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:18:48.073

没有一个活生生的例子，很难知道......

加载是异步发生的。将 render() 调用移动到加载器回调函数的最后一行。（替换您的警报呼叫）。

确保相机离模型足够近才能看到它。

`camera.lookAt( scene.position )`将确保相机在您移动后正在查看原点。

# java - 阅读网页内容，获取异常

> ID：11541631
> 
> 赞同：0
> 
> 时间：2012-07-18T12:40:49.823
> 
> 标签：java

我正在制作一个 Android 应用程序，为此我必须从 URL（由一些 python 脚本输出）获取 JSON 内容。

我在 SO 上找到了一种方法，但我无法让它工作。这是代码：

```
public String webGet(String URL) throws Exception  
{ 
    BufferedReader in = null; 
    try  
    { 
        HttpClient client = new DefaultHttpClient(); 
        client.getParams().setParameter(CoreProtocolPNames.USER_AGENT, "android"); 

        HttpGet request = new HttpGet();
        request.setHeader("Content-Type", "text/html; charset=utf-8"); 
        request.setURI(new URI(URL)); 

        // Crashes after executing this line
        HttpResponse response = client.execute(request); 

        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent())); 

        StringBuffer sb = new StringBuffer(""); 
        String line = ""; 

        String NL = System.getProperty("line.separator"); 
        while ((line = in.readLine()) != null)  
        { 
            sb.append(line + NL); 
        } 
        in.close(); 
        String page = sb.toString();

        //System.out.println(page); 
        return page; 
    }  
    finally  
    { 
        if (in != null)  
        { 
            try  
            { 
                in.close(); 
            }  
            catch (IOException e)     
            { 
                Log.d("BBB", e.toString()); 
            } 
        } 
    } 
} 
```

此崩溃发生在此行之后：

```
HttpResponse response = client.execute(request); 
```

然后它只是跳转到该`finally`部分，我可以从异常消息中得到的只是某事是`null`. 这就是它所说的。

有人知道问题可能是什么吗？

* * *

异常说明截图：

![在此处输入图像描述](../Images/b96d660747000deef5a1b3ee34d74e28.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:49:25.033

您应该尝试捕获异常而不是抛出它，这样您可以获得有关错误的更多信息。

```
try {

} catch (ExceptionType name) {

} catch (ExceptionType name) {

} 
```

[http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:58:39.123

在某些 Android 版本中，您无法从“主”线程执行网络操作。这是为了确保您的应用程序仍然能够响应最终用户，即使它执行了一些需要很长时间的阻塞网络操作。

您需要在另一个线程中执行该操作。

[无法在 Android 中连接到 FTP](https://stackoverflow.com/questions/10976474/unable-to-connect-to-ftp-in-android/10977624#10977624)

# mysql - 如何从mysql中的三个表中获取一些列

> ID：11541633
> 
> 赞同：0
> 
> 时间：2012-07-18T12:40:50.727
> 
> 标签：mysql, multiple-tables

我有三个表，例如：

表格1：

```
|A|B|C|D| 
```

表2：

```
|A|E|F|G| 
```

表3：

```
|G|H| 
```

我需要的结果是：

```
|A|B|C|D|H| 
```

最初我只检查前两个表，从`table1`所有行和满足条件的行中`table2`的列`G``table1.A = table2.A`

就像是：

```
SELECT `table1`.*,`table2`.`G` FROM `table1` INNER JOIN `table2` WHERE `table1`.`A`=`table2`.`A` 
```

我现在的问题是`H`从使用满足旧条件的`table3`类似键值中获取列。`G`我希望我的问题有点清楚..有人可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:44:27.133

```
SELECT `table1`.*,`table2`.`G`,`table3`.`H`
FROM `table1` 
INNER JOIN `table2` ON `table1`.`A`=`table2`.`A`
INNER JOIN `table3` ON `table2`.`G`=`table3`.`G` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:45:59.180

从 table1,table2,table3 中选择 table1.A,table1.B,table1.C,table1.D,table3.H 其中 table1.A=table2.A AND table2.G=table3.G

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:45:20.680

这是使用隐式内部连接的最简单方法。

```
SELECT T1.A, T1.B, T1.C, T1.D, T3.H 
FROM `table1` T1, `table2` T2, `table3` T3 
WHERE T1.A = T2.A AND T2.G = T3.G 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:46:39.593

尝试这个：

```
SELECT
  `t1`.*,
  `t2`.`G`,
  `t3`.`H`
FROM
  `table1` AS `t1`
INNER JOIN
  `table2` AS `t2`
  ON `t1`.`id` = `t2`.`t1_id`
INNER JOIN
  `table3` AS `t3`
  ON `t1`.`id` = `t2`.`t2_id` (or join with table 2 I dont know)
WHERE
  `t1`.`A`=`t2`.`A` 
```

# ios - 即使我使用 GCD，UI 也会卡住

> ID：11541638
> 
> 赞同：0
> 
> 时间：2012-07-18T12:41:11.727
> 
> 标签：ios, xcode, grand-central-dispatch

当我从我的 secondView 回到我的 mainView 时，我正在我的 secondView 的 viewDidDisappear 方法中处理一些东西。问题是，由于应用程序必须执行的工作，我的 mainView 卡住了。

这是我所做的：

```
-(void)viewDidDisappear:(BOOL)animated
{
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

    dispatch_async(queue, ^{

    dbq = [[dbqueries alloc] init];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"abc" object:nil];
    //the notification should start a progressView, but because the whole view gets stuck, I can't see it working, because it stops as soon as the work is done

    dispatch_sync(dispatch_get_main_queue(), ^{

    //work    

    });
}); 
```

我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:42:29.263

您需要在`dispatch_async`您的`queue`. 您当前正在`// Work`主线程中进行工作（假设注释在它所在的位置），此外，您正在阻塞等待此工作的工作线程。

尝试重新安排您的 GCD 调用：

```
-(void)viewDidDisappear:(BOOL)animated
{
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

    dbq = [[dbqueries alloc] init];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"abc" object:nil];

    dispatch_async(queue, ^{

        // Perform work here

        dispatch_async(dispatch_get_main_queue(), ^{

           // Update UI here

        });
    });
} 
```

# nginx - NGINX 重写重定向问题

> ID：11541645
> 
> 赞同：0
> 
> 时间：2012-07-18T12:41:23.770
> 
> 标签：nginx

我有一个 NGINX 设置，试图将一个 URL 从 /system 重写为 /fs，我有这个代码：

```
location /system {
    rewrite ^ /fs last;
} 
```

由于某种原因，它只是重定向到一个名为 /fs 的文件夹，而我却找不到。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:35:56.443

```
location /system {
    alias /path/to/fs;
} 
```

[http://nginx.org/r/alias](http://nginx.org/r/alias)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:45:03.653

您的重写规则不正确。

**^**是重写字符串的开头，这没有任何意义。

尝试这样的事情：

```
rewrite ^system(.*)$ /fs$1 permanent; 
```

这是一个简短的[教程](http://nginx.org/en/docs/http/converting_rewrite_rules.html)。
新[教程](http://www.engineyard.com/blog/2011/useful-rewrites-for-nginx/)

**编辑：**我认为你应该在你的服务器块下写你的重写规则，我已经改变了规则。

# actionscript-3 - Flex 4.5，针对相同的组件

> ID：11541657
> 
> 赞同：0
> 
> 时间：2012-07-18T12:41:50.000
> 
> 标签：actionscript-3, apache-flex, flex4.5

我不是弹性专家，我是初学者，所以也许这是不可能的。

我有类似的东西：

```
<s:VGroup gap="2" paddingLeft="1" paddingTop="1">   
                    <s:BorderContainer 
                        rollOver="fadeInBorderComponent.play(); fadeInLabel.play()" 
                        rollOut="fadeOutBorderComponent.play(); fadeOutLabel.play()" 

                        buttonMode="true" useHandCursor="true" 
                        borderColor="0x808080" alpha="0.8" borderWeight="2">                                            
                        <s:Label  width="140" height="60" 
                                 backgroundColor="0xffffff" alpha="0.0" paddingBottom="2" paddingLeft="2" paddingRight="2" paddingTop="4" depth="1" styleName="captionText"
                                 text="Very, very long text to be wrap, long text to be wrap, long text to be wrap, long text to be wrap, long text to be wrap, long text to be wrap, this the end of a text" />
                        <s:Image width="140" height="125" scaleMode="stretch" source="assets/Koala.jpg">                    
                        </s:Image>                      
                    </s:BorderContainer>
                    <s:BorderContainer 
                        rollOver="fadeInBorderComponent.play(); fadeInLabel.play()" 
                        rollOut="fadeOutBorderComponent.play(); fadeOutLabel.play()" 

                        buttonMode="true" useHandCursor="true" 
                        borderColor="0x808080" alpha="0.8" borderWeight="2">                                            
                        <s:Label  width="140" height="60" 
                                 backgroundColor="0xffffff" alpha="0.0" paddingBottom="2" paddingLeft="2" paddingRight="2" paddingTop="4" depth="1" styleName="captionText"
                                 text="Very, very long text to be wrap, long text to be wrap, long text to be wrap, long text to be wrap, long text to be wrap, long text to be wrap, this the end of a text" />
                        <s:Image width="140" height="125" scaleMode="stretch" source="assets/Koala.jpg">                    
                        </s:Image>                      
                    </s:BorderContainer>                    
                </s:VGroup> 
```

这是我的代码：

```
 <s:Fade target="{BorderContainer}" id="fadeInBorderComponent" duration="300" alphaTo="1.0" />                   
    <s:Fade target="{BorderContainer}" id="fadeOutBorderComponent" duration="200" alphaTo="0.8" />      

    <s:Fade target="{Label}" id="fadeInLabel" duration="300" alphaTo="0.8" />                   
    <s:Fade target="{Label}" id="fadeOutLabel" duration="200" alphaTo="0.0" /> 
```

我的问题是，如何定位所有属于 vGroup 子级的 BorderContainer 而不是使用 ID 或 ID 数组，这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:47:19.653

效果类有一个“目标”数组。您可以将所有边框容器放在该数组中。

```
for(i=0; i<vgroup.numElements;i++)
{
  yourFade.targets.push(vgroup.getElementAt(i));
} 
```

# c# - 从另一个数据表更新数据表中数据的有效方法

> ID：11541659
> 
> 赞同：4
> 
> 时间：2012-07-18T12:42:00.577
> 
> 标签：c#, datatable, performance

我的 ASP.NET Web 服务项目中有一个数据表，该数据表中有大约 50 万条记录，有 39 列，并且存在于缓存中。一分钟后，后台线程访问数据库并从数据库中获取更新记录，我想在缓存数据表中更新这些记录，我正在使用以下方法，但它需要足够的时间来完成：

```
foreach (DataRow dRNew in dtNew.Rows)
{
     DataRow row = dtOriginal.Select("ID=" + dRNew["ID"]).First();
     row["Column1"] = dRNew["Column1"];
     row["Column2"] = dRNew["Column2"];
     row["Column3"] = dRNew["Column3"];
} 
```

我已经替换了以下行：

```
DataRow row = dtOriginal.Select("ID=" + dRNew["ID"]).First(); 
```

和

```
DataRow row = dtOriginal.AsEnumerable().Where(r => ((Int64)r["ID"]).Equals(dRNew["ID"])).First(); 
```

但徒劳无功，我的笔记本电脑大约需要 5 分钟。

谁能指导我在哪里以及我做错了什么？使用哪种方法可以有效地做到这一点，我不确定是否`Dataset.Merge`可以使用其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:46:19.923

你可以这样试试

```
dtOriginal.Merge(dtNew); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-21T00:32:14.003

我原以为使用它会更快：

```
TableToUpdate.AsEnumerable().Join
(
    TableToUpdateFrom.AsEnumerable(),
    lMaster => lMaster["COMMON_FIELD"], lChild => lChild["COMMON_FIELD"],
    (lMaster, lChild) => new { lMaster, lChild }
    ).ToList().ForEach
(
o =>
{
    o.lMaster.SetField("FIELD_TO_BE_UPDATED1", o.lChild["FIELD_TO_BE_UPDATED_FROM1"].ToString());
    o.lMaster.SetField("FIELD_TO_BE_UPDATED2", o.lChild["FIELD_TO_BE_UPDATED_FROM2"].ToString());
    o.lMaster.SetField("FIELD_TO_BE_UPDATED3", o.lChild["FIELD_TO_BE_UPDATED_FROM3"].ToString());
    o.lMaster.SetField("FIELD_TO_BE_UPDATED_ETC", o.lChild["APPROVAL_SCORE_FROM_ETC"].ToString());
}
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:12:37.847

试试这个方法，[DataRowCollection.Find](http://msdn.microsoft.com/en-us/library/ydd48eyk.aspx)。假设您的 DataTable 设置正确，它将是 O(log(n)) 而不是当前的 O(N)。

```
foreach (DataRow dRNew in dtNew.Rows) 
{
     DataRow row = null;
     try
     {
         row = dtOriginal.Find(dRNew["ID"]);
     }
     catch (MissingPrimaryKeyException)
     {
         row = dtOriginal.Select("ID=" + dRNew["ID"]).First();
     }
     if (row != null)
     {
         row["Column1"] = dRNew["Column1"]; 
         row["Column2"] = dRNew["Column2"]; 
         row["Column3"] = dRNew["Column3"]; 
     }
} 
```

# grails - grails / groovy NoClassDefFoundError 访问静态变量时

> ID：11541665
> 
> 赞同：0
> 
> 时间：2012-07-18T12:42:15.800
> 
> 标签：grails, groovy, static

我认为这对您来说很容易：

我有一个控制器，我想在其中访问另一个类 XY（groovy 类，位于包 src/groovy ...）中的静态字段。但这会得到一个 NoClassDefFoundError。

```
public class XY{ public static final String a = "something" }

in controller: XY.a causes error!!! 
```

同一个包中除 XY 类之外的其他类不会引起问题。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:52:06.663

看来您已经过度简化了该示例。`NoClassDefFoundError`不一样。*_* 上课不在时发生。当类在那里时发生，但它引用的东西不是。所以修复起来要麻烦得多。`ClassNotFoundException``ClassNotFoundException``NoClassDefFoundError`

XY 包是否与文件夹结构匹配（即如果它在“com.foo”包中，是否在 src/groovy/com/foo 中）？

尝试运行 'grails clean' 并再次运行它 - 可能存在一些编译器混淆，重新编译所有内容都可以解决它，或者显示真正的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:13:00.770

我发现了问题所在：

类 XY 已编译，但我尝试将“”分配给（意外声明的）静态整数。

这就是为什么整个类无法初始化并发生错误的原因。

是否有任何属性可以设置编译器以打印警告？

感谢您的提示！

# asp.net - 表单身份验证和模拟

> ID：11541667
> 
> 赞同：0
> 
> 时间：2012-07-18T12:42:33.620
> 
> 标签：asp.net

我正在尝试在我的应用程序中实现表单身份验证。同时我想冒充使用高权限的帐户，以访问服务器的文件。我写了以下代码：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
  <authentication mode="Forms">
    <forms loginUrl="Login.aspx" timeout="30" defaultUrl="HomePage.aspx"           
    cookieless="AutoDetect">
      <credentials passwordFormat="Clear">
        <user name="user1" password="pass@123"/>
        <user name="user2" password="pass@123"/>
      </credentials>
    </forms>
  </authentication>
  <authorization>
    <deny users="?"/>
  </authorization>
  <identity impersonate="true" userName="domain\abcd" password="aaaa"/>
  </system.web> 
```

看来，模仿是行不通的。我们不能在表单身份验证中使用模拟吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:56:02.823

Impersonate class:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web.Security;
using System.Security.Principal;
using System.Runtime.InteropServices;
using System.IO;
using System.Text;

using System.Web;

namespace [YourProgramName]  //You must change it
{
    public class Impersonate
    {

        [DllImport("advapi32.dll", SetLastError = true)]
        private static extern int LogonUser(string lpszUsername, string lpszDomain, string lpszPassword,
                                            int dwLogonType, int dwLogonProvider, out int phToken);

        [DllImport("kernel32.dll")]
        private static extern int FormatMessage(int dwFlags, string lpSource, int dwMessageId, int dwLanguageId,
                                                StringBuilder lpBuffer, int nSize, string[] Arguments);

        private const int LOGON32_LOGON_NETWORK_CLEARTEXT = 8;
        private const int LOGON32_PROVIDER_DEFAULT = 0;
        private const int FORMAT_MESSAGE_FROM_SYSTEM = 0x1000;

        private static WindowsImpersonationContext winImpersonationContext = null;

        public static void ImpersonateUser(string domain, string userName, string password)
        {

            //Benutzer einloggen
            int userToken = 0;

            bool loggedOn = (LogonUser(userName, domain, password, LOGON32_LOGON_NETWORK_CLEARTEXT,
                                        LOGON32_PROVIDER_DEFAULT, out userToken) != 0);

            if (loggedOn == false)
            {
                int apiError = Marshal.GetLastWin32Error();
                StringBuilder errorMessage = new StringBuilder(1024);
                FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM, null, apiError, 0, errorMessage, 1024, null);
                throw new Exception(errorMessage.ToString());
            }

            WindowsIdentity identity = new WindowsIdentity((IntPtr)userToken);
            winImpersonationContext = identity.Impersonate();

        }

        public static void UndoImpersonation()
        {
            if (winImpersonationContext != null)
            {
                winImpersonationContext.Undo();
            }
        }

    }
} 
```

Use it in your program:

```
Impersonate.ImpersonateUser("Domain", "Username", "UserPassword");

                     //Your Code as the new User

                Impersonate.UndoImpersonation(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T14:06:37.780

使用以下形式进行身份验证：

```
<forms loginUrl="Login.aspx" defaultUrl="HomePage.aspx" protection="Validation" timeout="30"/> 
```

# vba - Excel 矩阵获取（多个）值

> ID：11541671
> 
> 赞同：0
> 
> 时间：2012-07-18T12:42:43.337
> 
> 标签：vba, excel, matrix, excel-formula

如您所见，我们有一个包含数据的矩阵。（我删除了行和列的标题，因为它是不应该传播的公司信息。）

链接：http: [//i49.tinypic.com/5jwayg.jpg](http://i49.tinypic.com/5jwayg.jpg)

这就是我需要的：

*   当矩阵中有“X”时，我需要它所在列的值（来自“黄色”范围：B1:W1）。如您所见，一行中可能有更多“X”（“蓝色”范围：A3:A48）
*   因此，选择A11时，我需要B11和M11的值）

我希望有人能够通过功能实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:36:38.757

VBA 解决方案。

如果我正确理解您的问题，这应该有效，或者至少是一个很好的开始。

```
Option Explicit

Function findvalues(rng As Range) As String

Dim cel As Range, str As String

For Each cel In rng
    If cel.Value = "X" Then str = str & "," & cel.Value
Next

findvalues = Mid(str, 2)

End Function 
```

像这样实现它，给定链接中的电子表格

在单元格 A3`=findvalues(B3:W3)`中 在单元格 B2 中`=findvalues(B3:B48)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:30:59.543

我不确定您如何获得 B11 和 M11 的值，但您可以逐个单元格地执行此操作。只需这样做：

```
=IF(A1 = "X", COLUMN(A1), "") 
```

这将为您提供 A1 aka '1' 的列号。肯定有一种方法可以通过 VBA 获得您想要的东西，但是我对此还不是很有经验，所以我对您的帮助很小。

# ruby-on-rails - 每个模块的不同部分视图

> ID：11541672
> 
> 赞同：3
> 
> 时间：2012-07-18T12:43:01.007
> 
> 标签：ruby-on-rails

我有不同的命名空间控制器，它们共享相同的布局：

```
# /app/controllers/admin/dashboard.rb
class Admins::DashboardController < ApplicationController
  ...
end 
```

* * *

```
# /app/controllers/clients/dashboard.rb
class Clients::DashboardController < ApplicationController
  ...
end 
```

这是我的目录结构：

```
App
|_ Controllers
|  |_ Admins
|  |  |_ dashboard_controller.rb
|  |_ Clients
|     |_ dashboard_controller.rb
|
|_ Views
   |_ Admins
   |  |_ Dashboard
   |     |_ index.html.erb
   |
   |     |_ show.html.erb
   |_ Clients
   |  |_ Dashboard
   |     |_ index.html.erb
   |     |_ show.html.erb
   |_ layouts
      |_ admin.html.erb
      |_ _sidebar.html.erb 
```

我想确定布局是否显示`Admins`或`Clients`显示正确的侧边栏，例如：

```
<% if admins? %>
  ...
<% elsif clients? %>
  ...
<% end %> 
```

这甚至是解决此问题的最佳方法还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:25:13.447

您可以使用模板继承来实现这一点。只需`render 'sidebar'`在您想要重用的布局中，并在以下位置定义您的 _sidebar 模板：

```
app/views/admins/dashboard/_sidebar.html.erb  # for Admins::DashboardController
app/views/clients/dashboard/_sidebar.html.erb # for Clients::DashboardController
app/views/application/_sidebar.html.erb         # fallback sidebar 
```

由于模板继承，Rails 会自动为您选择右侧边栏。

如果您也想在其他 Admin/Client 控制器中使用相应的侧边栏，您还可以为每个控制器设置一个 BaseController，如下所示：

```
class Admins::BaseController < ApplicationController

end

class Admins::DashboardController < Admins::BaseController
  ...
end 
```

现在有一个`_sidebar.html.erb`模板，`app/views/admins/base/`并确保 Admins 命名空间中的每个 Controller 都继承自 Admins::BaseController。

您将看到这为您的所有命名空间控制器构建通用功能/回调等开辟了一种非常好的方式。此外，它允许您在需要时覆盖侧边栏部分，只需将`_sidebar.html.erb`文件放置在任何更具体的视图路径中，例如`app/views/admins/myspecificsidebars/_sidebar.html.erb`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:01:37.297

使用的布局方法`ApplicationController`。

```
layout :user_layout

def user_layout
  #your layout logic here, return the name of the layout
end 
```

# php - 从 JQuery AJAX 触发的 PHP 比较不返回值

> ID：11541678
> 
> 赞同：-1
> 
> 时间：2012-07-18T12:43:13.597
> 
> 标签：php

我正在使用`jQuery`调用`PHP`脚本来更新`MYSQL`数据库，但首先根据该值进行逻辑测试。如果我以这种方式构建查询，我会发现这个问题，我得到了错误`Query was empty`。

从逻辑上讲，我试图解决测试无济于事。任何帮助将不胜感激。

```
$type= trim($_POST['type']);
if( $type == "wanted" ) {
   $qUpdate = "UPDATE Post...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:48:04.623

POST 可能无法通过正常的 ajax 获取

```
$type= trim($_REQUEST['type']);
if( $type == "wanted" ) {
   $qUpdate = "UPDATE Post...";
   // Query must be correct in syntax ,I think its intentional for demo purpose
   if(mysql_query($qUpdate)) {
     echo "success";
   }
   else {
     echo "fail";
   }
} 
```

此“成功”和“失败”文本将作为您的 ajax 响应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:48:06.467

尝试 $_GET['type']，php 脚本是从 url 调用的，而不是从表单调用的。所以这是一个 $_GET 参数，而不是 $_POST

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:05:23.537

你应该检查你的查询并确保它是正确的并且变量被剥离，试试这个

```
$type = mysql_escape_real_string($_POST['type']);
$sql = "UPDATE table....."
//query the code and ensure if there's an error kill the script
$res = mysql_query($sql) or die(mysql_error()); 
```

让我知道你是怎么办的！：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T03:27:00.790

解决方案似乎是我的比较没有将苹果与苹果进行比较：

`if ($type == mysql_real_escape_string("wanted") )`

# php - 我怎样才能只处理 Javascript (AJAX) 中的一篇文章？

> ID：11541682
> 
> 赞同：1
> 
> 时间：2012-07-18T12:43:27.750
> 
> 标签：php, javascript, ajax

在我的网站上，每篇文章下都有可点击的隐藏元标记，例如页面浏览量或 Google 请求。

这是我使用的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){
         $(".slidingDiv").hide();
        $(".show_hide").show();
     $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
    });
 });
 </script> 
```

而这个PHP代码：

```
<p class="postmetadata"><a href="javascript:;" class="show_hide">[Show/hide meta data]</a></p>
<div class="slidingDiv">
<p class="postmetadata">Aufrufe: <?php if(function_exists('the_views')) { the_views(); } ?> </p>
<p class="postmetadata"><?php if(function_exists('stt_terms_list')) echo stt_terms_list() ;?></p>
<p class="postmetadata"><?php if (function_exists('backlinks')) backlinks(); ?></p>
<br>
</div> 
```

我使用 WordPress。问题是，如果我点击“显示/隐藏元数据”，每篇文章都会显示元数据。我只想要我点击的文章的元数据。这是[我的网站](http://www.abitur-lernhilfen.de/)。

您必须单击德语“[Zeige/Verstecke Meta-Datan]”，它等于“[显示/隐藏元数据]”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:46:51.680

使用 jQuery 方法[.next()](http://api.jquery.com/next/)，这将立即工作：

```
$('.show_hide').click(function(){
    $(this).next().slideToggle();
}); 
```

使用 jQuery 方法[.siblings()](http://api.jquery.com/siblings/)，即使您重新排列元素的顺序，这也将起作用：

```
$('.show_hide').click(function(){
    $(this).siblings('.slidingDiv').slideToggle();
}); 
```

使用 jQuery 方法[.closest()](http://api.jquery.com/closest/)，即使您重新排列元素深度，这也有效：

```
$('.show_hide').click(function(){
    $(this).closest('.span-8').find('.slidingDiv').slideToggle();
}); 
```

* * *

此外，对于 jQuery/Prototype 冲突，请参阅：[Prototype and jQuery together?](https://stackoverflow.com/questions/1997401/prototype-and-jquery-together)

最简单的解决方案是创建一个临时上下文：

```
(function($){
    $('.show_hide').click(function(){
        $(this).siblings('.slidingDiv').slideToggle();
    });
}(jQuery)); 
```

# groovy - 使用 Groovy XMLParser 访问 XML 节点的内容

> ID：11541683
> 
> 赞同：1
> 
> 时间：2012-07-18T12:43:38.707
> 
> 标签：groovy, xml-parsing

我有一些标签名称相同但值不同的元素。下面的示例显示了我的解析。

```
<Report>
<ReportHost name= 2.3.3.3><HostProperties>
<tag name="x"> Monday...</tag>
<tag name="z"> Linux.....</tag> 
```

我的问题是如何捕获字符串“x”..和“z”之后的文本目前我有

```
langs.Report.ReportHost.each{ReportHost->
${ReportHost.HostProperties.tag['@name']}" 
```

但这只是抓取 x 和 z。我需要什么语法来获取包括 Monday 和 Linux 之后的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:51:01.667

这将打印出标签属性列表，然后是节点内容列表：

```
langs.ReportHost.each { reportHost ->
  println "tag  = ${reportHost.HostProperties.tag['@name']}"
  println "cont = ${reportHost.HostProperties.tag*.text()}"
} 
```

如果你把你的每一个都放在树的下面，那么你可以很容易地把它们打印在一行上

```
langs.ReportHost.HostProperties.tag.each { tag ->
  println "tag=${tag.@name} content=${tag.text()}"
} 
```

# java - 在java中创建XML文件时传递字符串而不是节点

> ID：11541692
> 
> 赞同：0
> 
> 时间：2012-07-18T12:44:09.947
> 
> 标签：java, xml, string, xmlnode

我想创建一个包含系统所有信息的 XML 文件。为了获取信息，我会使用`getProperty(os.name)`并将其保存在这样的字符串中

```
String nameOS = "os.name";  
nameOS=System.getProperty(nameOS); 
```

现在我想创建一个 XML，并希望这个字符串的值成为创建的 XML 文件的元素之一，为此我会做这样的事情

```
Element Osname = doc.createElement("Osname");
Osname.appendChild(doc.createTextNode("nameOS"));
staff.appendChild(Osname); 
```

但是输出 xml 文件看起来像这样

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?> 
- <HardwareInfo>
  <OsName>nameOS</OsName>  
  </HardwareInfo> 
```

我在输出中得到字符串的名称，而不是字符串的值。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:45:59.597

删除 nameOs 周围的引号

```
Osname.appendChild(doc.createTextNode(nameOS)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:46:01.560

`Osname.appendChild(doc.createTextNode("nameOS"));`

应该

`Osname.appendChild(doc.createTextNode(nameOS));`

# angularjs - 根据条件重定向到某个路由

> ID：11541695
> 
> 赞同：498
> 
> 时间：2012-07-18T12:44:22.620
> 
> 标签：angularjs, ngroute

我正在编写一个具有登录视图和主视图的小型 AngularJS 应用程序，配置如下：

```
$routeProvider
 .when('/main' , {templateUrl: 'partials/main.html',  controller: MainController})
 .when('/login', {templateUrl: 'partials/login.html', controller: LoginController})
 .otherwise({redirectTo: '/login'}); 
```

我的 LoginController 检查用户/密码组合并在 $rootScope 上设置一个属性，以反映这一点：

```
function LoginController($scope, $location, $rootScope) {
 $scope.attemptLogin = function() {
   if ( $scope.username == $scope.password ) { // test
        $rootScope.loggedUser = $scope.username;
        $location.path( "/main" );
    } else {
        $scope.loginError = "Invalid user/pass.";
    }
} 
```

一切正常，但如果我访问，`http://localhost/#/main`我最终会绕过登录屏幕。我想写类似“每当路由更改时，如果 $rootScope.loggedUser 为空，则重定向到 /login”

...

... 等待。我可以以某种方式收听路由更改吗？无论如何，我都会发布这个问题并继续寻找。

* * *

## 回答 #1

> 赞同：516
> 
> 时间：2012-07-18T13:48:51.643

在浏览了一些文档和源代码之后，我想我得到了它的工作。也许这对其他人有用？

我将以下内容添加到我的模块配置中：

```
angular.module(...)
 .config( ['$routeProvider', function($routeProvider) {...}] )
 .run( function($rootScope, $location) {

    // register listener to watch route changes
    $rootScope.$on( "$routeChangeStart", function(event, next, current) {
      if ( $rootScope.loggedUser == null ) {
        // no logged user, we should be going to #login
        if ( next.templateUrl != "partials/login.html" ) {
          // not going to #login, we should redirect now
          $location.path( "/login" );
        }
      }         
    });
 }) 
```

一件看起来很奇怪的事情是我必须测试部分名称 ( `login.html`)，因为“下一个”Route 对象没有 url 或其他东西。也许有更好的方法？

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2013-11-03T12:22:42.900

这可能是一个更优雅、更灵活的解决方案，它具有“resolve”配置属性和“promises”，可以根据数据最终在路由和路由规则上加载数据。

您在路由配置中的“解决”中指定一个函数，并在函数加载和检查数据中，执行所有重定向。如果您需要加载数据，则返回一个承诺，如果您需要重定向 - 在此之前拒绝承诺。所有详细信息都可以在[$routerProvider](http://docs.angularjs.org/api/ngRoute.$routeProvider)和[$q](http://docs.angularjs.org/api/ng.$q)文档页面上找到。

```
'use strict';

var app = angular.module('app', [])
    .config(['$routeProvider', function($routeProvider) {
        $routeProvider
            .when('/', {
                templateUrl: "login.html",
                controller: LoginController
            })
            .when('/private', {
                templateUrl: "private.html",
                controller: PrivateController,
                resolve: {
                    factory: checkRouting
                }
            })
            .when('/private/anotherpage', {
                templateUrl:"another-private.html",
                controller: AnotherPriveController,
                resolve: {
                    factory: checkRouting
                }
            })
            .otherwise({ redirectTo: '/' });
    }]);

var checkRouting= function ($q, $rootScope, $location) {
    if ($rootScope.userProfile) {
        return true;
    } else {
        var deferred = $q.defer();
        $http.post("/loadUserProfile", { userToken: "blah" })
            .success(function (response) {
                $rootScope.userProfile = response.userProfile;
                deferred.resolve(true);
            })
            .error(function () {
                deferred.reject();
                $location.path("/");
             });
        return deferred.promise;
    }
}; 
```

对于说俄语的人，有一篇关于 habr “ [Вариант условного раутинга в AngularJS](http://habrahabr.ru/post/200662/) ”的帖子。

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2012-12-05T16:34:40.970

我一直在尝试做同样的事情。在与同事合作后想出了另一个更简单的解决方案。我在 上设置了手表`$location.path()`。这就是诀窍。我刚开始学习 AngularJS，发现它更干净、更易读。

```
$scope.$watch(function() { return $location.path(); }, function(newValue, oldValue){  
    if ($scope.loggedIn == false && newValue != '/login'){  
            $location.path('/login');  
    }  
}); 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2012-08-17T06:08:54.867

实现登录重定向的另一种方法是使用[此处描述](https://web.archive.org/web/20150609174122/http://www.espeo.pl/1-authentication-in-angularjs-application/)的事件和拦截器。本文描述了一些额外的优势，例如检测何时需要登录、对请求进行排队以及在登录成功后重放它们。

[您可以在此处](https://github.com/witoldsz/angular-http-auth/tree/gh-pages)试用工作演示并[在此处](http://witoldsz.github.com/angular-http-auth/)查看演示源。

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2014-07-30T10:11:37.190

### 1.设置全局当前用户。

在您的身份验证服务中，将当前经过身份验证的用户设置在根范围内。

```
// AuthService.js

  // auth successful
  $rootScope.user = user 
```

### 2\. 在每条受保护的路由上设置认证功能。

```
// AdminController.js

.config(function ($routeProvider) {
  $routeProvider.when('/admin', {
    controller: 'AdminController',
    auth: function (user) {
      return user && user.isAdmin
    }
  })
}) 
```

### 3\. 检查每次路由更改的身份验证。

```
// index.js

.run(function ($rootScope, $location) {
  $rootScope.$on('$routeChangeStart', function (ev, next, curr) {
    if (next.$$route) {
      var user = $rootScope.user
      var auth = next.$$route.auth
      if (auth && !auth(user)) { $location.path('/') }
    }
  })
}) 
```

或者，您可以在用户对象上设置权限并为每个路由分配权限，然后在事件回调中检查权限。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2014-02-03T01:24:23.527

以下是我的做法，以防它帮助任何人：

在配置中，我`publicAccess`在几条要向公众开放的路由上设置了一个属性（例如登录或注册）：

```
$routeProvider
    .when('/', {
        templateUrl: 'views/home.html',
        controller: 'HomeCtrl'
    })
    .when('/login', {
        templateUrl: 'views/login.html',
        controller: 'LoginCtrl',
        publicAccess: true
    }) 
```

然后在运行块中，我在`$routeChangeStart`重定向到的事件上设置了一个侦听器，`'/login'`除非用户有权访问或路由可公开访问：

```
angular.module('myModule').run(function($rootScope, $location, user, $route) {

    var routesOpenToPublic = [];
    angular.forEach($route.routes, function(route, path) {
        // push route onto routesOpenToPublic if it has a truthy publicAccess value
        route.publicAccess && (routesOpenToPublic.push(path));
    });

    $rootScope.$on('$routeChangeStart', function(event, nextLoc, currentLoc) {
        var closedToPublic = (-1 === routesOpenToPublic.indexOf($location.path()));
        if(closedToPublic && !user.isLoggedIn()) {
            $location.path('/login');
        }
    });
}) 
```

您显然可以将条件从`isLoggedIn`其他任何内容更改...只是显示另一种方法。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-09-21T19:17:52.810

我正在使用拦截器来做这件事。我创建了一个可以添加到 index.html 文件的库文件。这样您就可以为您的休息服务调用进行全局错误处理，而不必单独关心所有错误。再往下，我还粘贴了我的基本身份验证登录库。在那里你可以看到我还检查了 401 错误并重定向到不同的位置。参见 lib/ea-basic-auth-login.js

**lib/http-error-handling.js**

```
/**
* @ngdoc overview
* @name http-error-handling
* @description
*
* Module that provides http error handling for apps.
*
* Usage:
* Hook the file in to your index.html: <script src="lib/http-error-handling.js"></script>
* Add <div class="messagesList" app-messages></div> to the index.html at the position you want to
* display the error messages.
*/
(function() {
'use strict';
angular.module('http-error-handling', [])
    .config(function($provide, $httpProvider, $compileProvider) {
        var elementsList = $();

        var showMessage = function(content, cl, time) {
            $('<div/>')
                .addClass(cl)
                .hide()
                .fadeIn('fast')
                .delay(time)
                .fadeOut('fast', function() { $(this).remove(); })
                .appendTo(elementsList)
                .text(content);
        };

        $httpProvider.responseInterceptors.push(function($timeout, $q) {
            return function(promise) {
                return promise.then(function(successResponse) {
                    if (successResponse.config.method.toUpperCase() != 'GET')
                        showMessage('Success', 'http-success-message', 5000);
                    return successResponse;

                }, function(errorResponse) {
                    switch (errorResponse.status) {
                        case 400:
                            showMessage(errorResponse.data.message, 'http-error-message', 6000);
                                }
                            }
                            break;
                        case 401:
                            showMessage('Wrong email or password', 'http-error-message', 6000);
                            break;
                        case 403:
                            showMessage('You don\'t have the right to do this', 'http-error-message', 6000);
                            break;
                        case 500:
                            showMessage('Server internal error: ' + errorResponse.data.message, 'http-error-message', 6000);
                            break;
                        default:
                            showMessage('Error ' + errorResponse.status + ': ' + errorResponse.data.message, 'http-error-message', 6000);
                    }
                    return $q.reject(errorResponse);
                });
            };
        });

        $compileProvider.directive('httpErrorMessages', function() {
            return {
                link: function(scope, element, attrs) {
                    elementsList.push($(element));
                }
            };
        });
    });
})(); 
```

**css/http-error-handling.css**

```
.http-error-message {
    background-color: #fbbcb1;
    border: 1px #e92d0c solid;
    font-size: 12px;
    font-family: arial;
    padding: 10px;
    width: 702px;
    margin-bottom: 1px;
}

.http-error-validation-message {
    background-color: #fbbcb1;
    border: 1px #e92d0c solid;
    font-size: 12px;
    font-family: arial;
    padding: 10px;
    width: 702px;
    margin-bottom: 1px;
}

http-success-message {
    background-color: #adfa9e;
    border: 1px #25ae09 solid;
    font-size: 12px;
    font-family: arial;
    padding: 10px;
    width: 702px;
    margin-bottom: 1px;
} 
```

**索引.html**

```
<!doctype html>
<html lang="en" ng-app="cc">
    <head>
        <meta charset="utf-8">
        <title>yourapp</title>
        <link rel="stylesheet" href="css/http-error-handling.css"/>
    </head>
    <body>

<!-- Display top tab menu -->
<ul class="menu">
  <li><a href="#/user">Users</a></li>
  <li><a href="#/vendor">Vendors</a></li>
  <li><logout-link/></li>
</ul>

<!-- Display errors -->
<div class="http-error-messages" http-error-messages></div>

<!-- Display partial pages -->
<div ng-view></div>

<!-- Include all the js files. In production use min.js should be used -->
<script src="lib/angular114/angular.js"></script>
<script src="lib/angular114/angular-resource.js"></script>
<script src="lib/http-error-handling.js"></script>
<script src="js/app.js"></script>
<script src="js/services.js"></script>
<script src="js/controllers.js"></script>
<script src="js/filters.js"></script> 
```

**lib/ea-basic-auth-login.js**

几乎可以对登录进行相同的操作。在这里，您可以找到重定向的答案 ($location.path("/login"))。

```
/**
* @ngdoc overview
* @name ea-basic-auth-login
* @description
*
* Module that provides http basic authentication for apps.
*
* Usage:
* Hook the file in to your index.html: <script src="lib/ea-basic-auth-login.js">  </script>
* Place <ea-login-form/> tag in to your html login page
* Place <ea-logout-link/> tag in to your html page where the user has to click to logout
*/
(function() {
'use strict';
angular.module('ea-basic-auth-login', ['ea-base64-login'])
    .config(['$httpProvider', function ($httpProvider) {
        var ea_basic_auth_login_interceptor = ['$location', '$q', function($location, $q) {
            function success(response) {
                return response;
            }

            function error(response) {
                if(response.status === 401) {
                    $location.path('/login');
                    return $q.reject(response);
                }
                else {
                    return $q.reject(response);
                }
            }

            return function(promise) {
                return promise.then(success, error);
            }
        }];
        $httpProvider.responseInterceptors.push(ea_basic_auth_login_interceptor);
    }])
    .controller('EALoginCtrl', ['$scope','$http','$location','EABase64Login', function($scope, $http, $location, EABase64Login) {
        $scope.login = function() {
            $http.defaults.headers.common['Authorization'] = 'Basic ' + EABase64Login.encode($scope.email + ':' + $scope.password);
            $location.path("/user");
        };

        $scope.logout = function() {
            $http.defaults.headers.common['Authorization'] = undefined;
            $location.path("/login");
        };
    }])
    .directive('eaLoginForm', [function() {
        return {
            restrict:   'E',
            template:   '<div id="ea_login_container" ng-controller="EALoginCtrl">' +
                        '<form id="ea_login_form" name="ea_login_form" novalidate>' +
                        '<input id="ea_login_email_field" class="ea_login_field" type="text" name="email" ng-model="email" placeholder="E-Mail"/>' +
                        '<br/>' +
                        '<input id="ea_login_password_field" class="ea_login_field" type="password" name="password" ng-model="password" placeholder="Password"/>' +
                        '<br/>' +
                        '<button class="ea_login_button" ng-click="login()">Login</button>' +
                        '</form>' +
                        '</div>',
            replace: true
        };
    }])
    .directive('eaLogoutLink', [function() {
        return {
            restrict: 'E',
            template: '<a id="ea-logout-link" ng-controller="EALoginCtrl" ng-click="logout()">Logout</a>',
            replace: true
        }
    }]);

angular.module('ea-base64-login', []).
    factory('EABase64Login', function() {
        var keyStr = 'ABCDEFGHIJKLMNOP' +
            'QRSTUVWXYZabcdef' +
            'ghijklmnopqrstuv' +
            'wxyz0123456789+/' +
            '=';

        return {
            encode: function (input) {
                var output = "";
                var chr1, chr2, chr3 = "";
                var enc1, enc2, enc3, enc4 = "";
                var i = 0;

                do {
                    chr1 = input.charCodeAt(i++);
                    chr2 = input.charCodeAt(i++);
                    chr3 = input.charCodeAt(i++);

                    enc1 = chr1 >> 2;
                    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
                    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
                    enc4 = chr3 & 63;

                    if (isNaN(chr2)) {
                        enc3 = enc4 = 64;
                    } else if (isNaN(chr3)) {
                        enc4 = 64;
                    }

                    output = output +
                        keyStr.charAt(enc1) +
                        keyStr.charAt(enc2) +
                        keyStr.charAt(enc3) +
                        keyStr.charAt(enc4);
                    chr1 = chr2 = chr3 = "";
                    enc1 = enc2 = enc3 = enc4 = "";
                } while (i < input.length);

                return output;
            },

            decode: function (input) {
                var output = "";
                var chr1, chr2, chr3 = "";
                var enc1, enc2, enc3, enc4 = "";
                var i = 0;

                // remove all characters that are not A-Z, a-z, 0-9, +, /, or =
                var base64test = /[^A-Za-z0-9\+\/\=]/g;
                if (base64test.exec(input)) {
                    alert("There were invalid base64 characters in the input text.\n" +
                        "Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\n" +
                        "Expect errors in decoding.");
                }
                input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

                do {
                    enc1 = keyStr.indexOf(input.charAt(i++));
                    enc2 = keyStr.indexOf(input.charAt(i++));
                    enc3 = keyStr.indexOf(input.charAt(i++));
                    enc4 = keyStr.indexOf(input.charAt(i++));

                    chr1 = (enc1 << 2) | (enc2 >> 4);
                    chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
                    chr3 = ((enc3 & 3) << 6) | enc4;

                    output = output + String.fromCharCode(chr1);

                    if (enc3 != 64) {
                        output = output + String.fromCharCode(chr2);
                    }
                    if (enc4 != 64) {
                        output = output + String.fromCharCode(chr3);
                    }

                    chr1 = chr2 = chr3 = "";
                    enc1 = enc2 = enc3 = enc4 = "";

                } while (i < input.length);

                return output;
            }
        };
    });
})(); 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2016-09-28T11:21:05.100

在您的 app.js 文件中：

```
.run(["$rootScope", "$state", function($rootScope, $state) {

      $rootScope.$on('$locationChangeStart', function(event, next, current) {
        if (!$rootScope.loggedUser == null) {
          $state.go('home');
        }    
      });
}]) 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-07-11T19:10:45.480

[可以使用angular-ui-router](https://github.com/angular-ui/ui-router/wiki)重定向到另一个视图。为此，我们有方法`$state.go("target_view")`。例如：

```
 ---- app.js -----

 var app = angular.module('myApp', ['ui.router']);

 app.config(function ($stateProvider, $urlRouterProvider) {

    // Otherwise
    $urlRouterProvider.otherwise("/");

    $stateProvider
            // Index will decide if redirects to Login or Dashboard view
            .state("index", {
                 url: ""
                 controller: 'index_controller'
              })
            .state('dashboard', {
                url: "/dashboard",
                controller: 'dashboard_controller',
                templateUrl: "views/dashboard.html"
              })
            .state('login', {
                url: "/login",
                controller: 'login_controller',
                templateUrl: "views/login.html"
              });
 });

 // Associate the $state variable with $rootScope in order to use it with any controller
 app.run(function ($rootScope, $state, $stateParams) {
        $rootScope.$state = $state;
        $rootScope.$stateParams = $stateParams;
    });

 app.controller('index_controller', function ($scope, $log) {

    /* Check if the user is logged prior to use the next code */

    if (!isLoggedUser) {
        $log.log("user not logged, redirecting to Login view");
        // Redirect to Login view 
        $scope.$state.go("login");
    } else {
        // Redirect to dashboard view 
        $scope.$state.go("dashboard");
    }

 });

----- HTML -----

<!DOCTYPE html>
<html>
    <head>
        <title>My WebSite</title>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="MyContent">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script src="js/libs/angular.min.js" type="text/javascript"></script>
        <script src="js/libs/angular-ui-router.min.js" type="text/javascript"></script>
        <script src="js/app.js" type="text/javascript"></script>

    </head>
    <body ng-app="myApp">
        <div ui-view></div>
    </body>
</html> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-09-02T10:26:37.400

如果您不想使用 angular-ui-router，但希望通过 RequireJS 延迟加载控制器，那么在`$routeChangeStart`将控制器用作 RequireJS 模块（延迟加载）时，事件会出现一些问题。

你不能确定控制器会在`$routeChangeStart`被触发之前被加载——事实上它不会被加载。这意味着您无法访问`next`类似路由的属性，`locals`或者`$$route`因为它们尚未设置。
例子：

```
app.config(["$routeProvider", function($routeProvider) {
    $routeProvider.when("/foo", {
        controller: "Foo",
        resolve: {
            controller: ["$q", function($q) {
                var deferred = $q.defer();
                require(["path/to/controller/Foo"], function(Foo) {
                    // now controller is loaded
                    deferred.resolve();
                });
                return deferred.promise;
            }]
        }
    });
}]);

app.run(["$rootScope", function($rootScope) {
    $rootScope.$on("$routeChangeStart", function(event, next, current) {
        console.log(next.$$route, next.locals); // undefined, undefined
    });
}]); 
```

这意味着您无法在其中检查访问权限。

**解决方案：**

由于控制器的加载是通过解析完成的，因此您可以对访问控制检查执行相同的操作：

```
app.config(["$routeProvider", function($routeProvider) {
    $routeProvider.when("/foo", {
        controller: "Foo",
        resolve: {
            controller: ["$q", function($q) {
                var deferred = $q.defer();
                require(["path/to/controller/Foo"], function(Foo) {
                    // now controller is loaded
                    deferred.resolve();
                });
                return deferred.promise;
            }],
            access: ["$q", function($q) {
                var deferred = $q.defer();
                if (/* some logic to determine access is granted */) {
                    deferred.resolve();
                } else {
                    deferred.reject("You have no access rights to go there");
                }
                return deferred.promise;
            }],
        }
    });
}]);

app.run(["$rootScope", function($rootScope) {
    $rootScope.$on("$routeChangeError", function(event, next, current, error) {
        console.log("Error: " + error); // "Error: You have no access rights to go there"
    });
}]); 
```

请注意，`$routeChangeStart`我使用的不是使用事件`$routeChangeError`

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2015-08-25T09:46:20.667

```
 $routeProvider
 .when('/main' , {templateUrl: 'partials/main.html',  controller: MainController})
 .when('/login', {templateUrl: 'partials/login.html', controller: LoginController}).
 .when('/login', {templateUrl: 'partials/index.html', controller: IndexController})
 .otherwise({redirectTo: '/index'}); 
```

# iphone - ARC中的内存使用率真的很高

> ID：11541704
> 
> 赞同：0
> 
> 时间：2012-07-18T12:44:54.913
> 
> 标签：iphone, memory, automatic-ref-counting

在我的应用程序中，我注意到在选项卡之间切换时速度非常慢。进一步调查显示，在我的内存使用测试中，我的应用在 5 分钟的测试中超过了 70mb。我的本机电子邮件应用程序仅使用 40mb。这不可能发生

我正在使用 ARC，我认为如果我使用类似的东西

```
@property(nonatomic, strong)NSString *string; 
```

ARC 会自动解除分配。它似乎根本没有这样做。

我想知道的是我是否可以通过`dealloc`在我的代码中使用来减少我的内存（当我切换到 ARC 时，它删除了我所有的`dealloc`方法），或者是否有另一种方法来加速我的应用程序。

为了向您提供有关该应用程序功能的更多信息，请列出关键点：

- 从 web 服务获取邮件消息以及 pdfs

- 存储数组以检查消息是否已被读取、删除或未读

- 每次有人单击该选项卡时，邮件选项卡都会检查来自网络服务的新消息

- 对 pdf 文件进行相同检查

任何信息都会对我有很大帮助。

谢谢

**编辑**

这是我的泄漏图片。它很多。

![在此处输入图像描述](../Images/5374cb8e754dd40e3181c03639aca49f.png) ![在此处输入图像描述](../Images/fd17d21b18e340d07b41af1813ea6591.png) ![在此处输入图像描述](../Images/af2324e176369a205bc166a4c73ece22.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:51:29.967

找出这种高内存使用率的原因的最佳方法是使用该`Instruments`工具，更具体地说是使用该`Leaks`工具。

[您可以在](https://developer.apple.com/library/ios/#documentation/Performance/Conceptual/ManagingMemory/Articles/FindingLeaks.html)Apple 开发者网站上找到更多信息。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:54:34.423

我对 ARC 不熟悉，但我想它可能会减慢您的应用程序的速度。为什么？想一想：ARC 会自动完成您的“发布”工作，而不是您的手动发布。假设您有一个 30 行的方法，并且在第一行中创建了一个对象，然后在第三行中您不再需要它并手动释放它。而 ARC 将等到方法结束时才意识到不再需要您的对象。现在假设您在方法中进行了大量分配，ARC 将保留它们直到方法结束。恕我直言，手动释放更快。

# javascript - ExtJS:: 如何将逗号的特定“特殊键事件”添加到数字字段？

> ID：11541710
> 
> 赞同：3
> 
> 时间：2012-07-18T12:45:08.907
> 
> 标签：javascript, extjs

如果要我的 nubmerfield 取“，”并将其转换为“。” 上键。Numberfield 不允许在其中输入“，”。我想处理“specialkey”并添加“。” 手动。但是“，”不是特殊键。如何在那里添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:32:05.127

如果要将“，”转换为“。” 上键时，为什么要使用 'specialkey' 事件来处理它？你为什么不使用'keyup'事件？

这是一个例子：

```
Ext.create ('Ext.window.Window', {
    renderTo: Ext.getBody () ,
    width: 300 ,
    height: 150 ,
    title: 'It works!' ,
    items: [{
        xtype: 'numberfield' ,
        enableKeyEvents: true ,
        fieldLabel: 'Age' ,
        listeners: {
            keyup: function (nf, evt) {
                // 188 is ','
                if (evt.getKey () == 188) {
                    nf.setRawValue (nf.getRawValue () + '.');
                }
            }
        }
    }]
}).show (); 
```

否则，您可以使用**disableKeyFilter**属性允许用户插入特殊字符，如 ,.&*% 等，然后找到将 ',' 替换为 '.' 的方法。

顺便说一句，如果你想用**特殊键**事件处理“，”，这里有个技巧：

```
Ext.create ('Ext.window.Window', {
    renderTo: Ext.getBody () ,
    width: 300 ,
    height: 150 ,
    title: 'It works!' ,
    items: [{
        xtype: 'numberfield' ,
        enableKeyEvents: true ,
        fieldLabel: 'Age' ,
        listeners: {
            keyup: function (nf, evt) {
                // 188 is ','
                if (evt.getKey () == 188) {
                    // Fire 'specialkey' up passing ','
                    nf.fireEvent ('specialkey', nf, evt);
                }
            } ,
            specialkey: function (nf, evt) {
                // Here we are!
                alert (evt.getKey ());
            }
        }
    }]
}).show (); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-28T14:34:31.133

```
specialkey: function(field, e){
              // e.HOME, e.END, e.PAGE_UP, e.PAGE_DOWN,
              // e.TAB, e.ESC, arrow keys: e.LEFT, e.RIGHT, e.UP, e.DOWN
              if (e.getKey() == e.TAB) {
                    //Do specific action
              }
        } 
```

# javascript - 谷歌功能的猜测列表

> ID：11541711
> 
> 赞同：0
> 
> 时间：2012-07-18T12:45:10.977
> 
> 标签：javascript, ajax

我想在一个文本框中添加一个功能，如果有人正在输入一个名字并且我已经有一个名字列表，而不是像`Google Search`在文本框底部给我们一些与我们在文本中输入的字母相关的猜测列表一样-box 我还可以给出相同的列表，其中填充了名称列表中的所有名称。
这可能吗 ？
如果是，那么我应该从哪里开始？
谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:46:50.597

您可以使用类似[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

# vb.net - VB.NET 引用/指向变量

> ID：11541720
> 
> 赞同：3
> 
> 时间：2012-07-18T12:45:35.227
> 
> 标签：vb.net, class, variables

我知道我不能动态引用变量（例如，'var & var.Close()'）。我可以以某种方式拥有一个可以按名称指向另一个变量的变量吗？

我当前的代码是（其中 func() 需要一个数组）：

```
Dim playerNum As String = “P1”
Select Case playerNum
  Case “P1”
    Func(P1(x, xx))
  Case “P2”
    Func(P2(x, xx))
  .........
End Select 
```

可以按照这些思路做一些事情吗？

```
Dim playerNum As varNameRef = P1(,)
Func(playerNum(x, xx)) 
```

真的能阻止如此多的重复将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:57:34.973

您可以通过反思来做到这一点，但出于性能、可读性和可维护性的原因，我建议您不要这样做。

如果你真的想要，你可以使用`Actions(Of T)`，例如：

```
Class Player
    Public Name As String
End Class

Sub play(player As Player)
    Console.WriteLine(player.Name & " plays now")
End Sub 
```

创建一些播放器进行演示：

```
Dim playerList As New List(Of Player)
For i As Int32 = 1 To 10
    Dim p = New Player() With {.Name = "P" & i}
    playerList.Add(p)
Next

playerList.ForEach(AddressOf play) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:02:35.647

您需要的是引用类型（类），而不是值类型（结构）。例如，如果您创建了一个将数组存储为属性的类，如下所示：

```
Public Class PlayerData
    Public Data(10, 30) As Object
End Class 
```

这也为您提供了轻松扩展您存储的有关每个玩家的数据的优势。`PlayerData`然后，您可以使用多个变量引用同一个对象：

```
Dim player1 As New PlayerData()
Dim player2 As New PlayerData()
Dim player As PlayerData = Nothing
Select Case playerNum
    Case “P1”
        player = player1
    Case “P2”
        player = player2
End Select
Func(player.Data(x, xx)) 
```

但是，将它们作为键值对存储在字典中会更好，例如：

```
Dim players As New Dictionary(Of String, PlayerData)()
players("P1") = New PlayerData()
players("P2") = New PlayerData() 
```

然后，您可以像这样访问您的玩家：

```
Func(players(playerNum).Data(x, xx)) 
```

# actionscript-3 - ByteArray 到 BitmapData AS3

> ID：11541730
> 
> 赞同：6
> 
> 时间：2012-07-18T12:46:06.717
> 
> 标签：actionscript-3, bytearray, bitmapdata

我正在使用 com.adobe.images.PNGEncoder 将 bitmapData 编码为 byteArray。有没有办法不使用加载器将 byteArray 转换回 bitmapData？谢谢。

编辑：我不想使用加载器的原因是它是异步的，我不想实现事件监听器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T13:08:45.167

以下是使用加载器类但是同步的。

```
var loader:Loader = new Loader();
loader.loadBytes(byteArray);
bmpData.draw(loader); 
```

**编辑**：没关系 loadBytes 也是异步的，文档说您需要等待 init 事件。不想要事件监听器的原因是什么？它们是 AS3 中非常常见的做法。

所以你需要这样的东西：

```
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.INIT, function(e:Event):void {
   bmpData.draw(loader);    
});
loader.loadBytes(byteArray); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T14:52:01.223

看一下 bitmapdata 的 setpixels() 方法。它需要一个矩形来定义大小和一个字节数组作为内容。此方法同步

# ntfs - 如何保护扇区不被写入 NTFS

> ID：11541731
> 
> 赞同：0
> 
> 时间：2012-07-18T12:46:09.637
> 
> 标签：ntfs, ntfs-mft

我正在尝试在 ntfs 分区上实现反取证工具。我需要保留 1GB（在精确的物理位置）的空间不被文件系统写入。我的想法：

*   尝试在特定位置创建一个 1gb 文件（如何？），以便将其视为已使用
*   尝试手动编辑 MFT 并插入一个虚假条目以将该区域标记为已使用（如何？）

关于如何实现这两个想法或其他的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T06:01:30.993

这是危险的，需要一些实验。

*手动，您可以使用BAAD*在 MFT 中人为创建文件记录！记录开头的幻数（而不是*FILE0*），使其 Data 属性非常驻，并指向数据运行列表中的该位置以获得所需的集群数。现在您必须在 $Bitmap 文件中用 1 标记这些集群。您还必须将集群添加到 MFT 中的 $BadClus 文件中。

MFT 中的 $Bitmap 文件是一个具有卷大小的结构，每个位代表卷中的每个簇，从 0 到簇中卷的大小。如果该位为0，则对应的簇空闲，否则被占用。

如果您可以在没有 Windows 认为卷已损坏的情况下完成此操作，这意味着您已经从 NTFS、Windows 资源管理器和其他遍历卷查找文件的 Windows API 函数的角度正确完成了所有操作。任何事物。但是，大多数取证工具可以自己解析原始卷，并专门寻找这些差异。但是您的文件将受到保护，不会被写入（除非驱动器被重新格式化）。

欺骗某种取证工具的最佳选择是创建一个常规文件，您可以将其挂载为重解析点或驱动器，但您必须创建自己的 API 来加密/解密该文件并将其挂载为与文件系统无关的卷它可能包含。该工具将看到该文件，但它会被加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:30:32.913

直接编辑 MFT 是非常危险的。文件系统真的很喜欢负责，因为它缓存了东西）。

您可以通过使用 FSCTL_MOVE_FILE 将 1Gb 文件的任何部分移动到您想要的磁盘位置来实现您想要的。

请注意，这种方法有一个复杂性和一个问题。复杂之处在于您需要移动到已经没有文件数据的地方，这意味着您必须先清除目的地。这意味着您必须阅读位图以找出要将其移动到的位置。听起来像是碎片整理程序，是吗？

说到碎片整理程序，一旦您创建了此文件，任何运行的碎片整理程序都可能将其移出首选位置。请注意。

# c++ - Pthread 超时

> ID：11541733
> 
> 赞同：2
> 
> 时间：2012-07-18T12:46:16.960
> 
> 标签：c++, linux, pthreads

我想做的就是启动一个线程，看看它是否在一段时间内完成。

操作系统：Linux；语言：C++。

我不想使用不可移植的功能（就像[这个答案](https://stackoverflow.com/a/1244687/777833)中建议的那样）。

[除了使用互斥锁和条件变量（如建议here](https://stackoverflow.com/a/5750851/777833) ）之外，还有什么方法可以做到这一点？两个线程之间没有共享数据，所以从技术上讲我不需要互斥锁。我想要的只是，对于启动线程的函数，如果

*   线程已完成或

*   一定的时间过去了。

...并尽可能保持代码简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:22:40.053

如果你想使用 boost::thread，“通常的”布尔标志、条件变量、互斥锁方法很简单：

```
bool ready = false;
boost::mutex              mutex;
boost::condition_variable cv;

// function to be executed by your thread
void foo() 
{
    // lengthy calculation
    boost::mutex::scoped_lock lock( mutex );
    ready = true;
    cv.notify_one();
}

// will return, if the thread stopped
bool wait_for_foo( time_point abs_time )
{
    boost::mutex::scoped_lock lock( mutex );

    while ( !ready && cv.wait_until( lock, abs_time ) != cv_status::no_timeout )
      ;

    return ready;
} 
```

好的，并没有比使用 posix 简单得多；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T20:32:20.290

您可以创建计时器线程，一旦达到计时器就可以`timeout`取消该线程。不需要 mutex.code 就像：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

#define TIMEOUT 1*60 //in secend
int count = 0;
pthread_t t_main;   //Thread id for main thread
void * timer_thread()
{
    while (TIMEOUT > count)
    {
        sleep(1);  //sleep for a secand
        count++;
    }
    printf("killinn main thread\n");
    pthread_cancel(t_main); // cancel main thread

}
void * m_thread()
{
    pthread_t t_timer; //Thread id for timer thread
    if (-1 == pthread_create(&t_timer, NULL, timer_thread, NULL))
    {
        perror("pthread_create");
        return NULL;
    }
    //DO your work...
    while(1)
    {
        sleep(2);
    }
}

int main()
{
        if ( -1 == pthread_create(&t_main, NULL, m_thread, NULL))
    {
        perror("pthread_create");
        return -1;
    }
    if (-1 == pthread_join(t_main, NULL))
    {
        perror("pthread_join");
        return -1;
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:00:23.057

您甚至不需要条件变量，您可以让另一个线程在进入时锁定互斥锁并在完成时解锁它，并使用启动线程[`pthread_mutex_timedlock`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_mutex_timedlock.html)（在旧版本的 POSIX 中可选，在 POSIX 2008 中需要）尝试获取互斥锁，如果另一个线程尚未完成则超时。

# html - CSS相同高度的列，一列包含底部Div

> ID：11541743
> 
> 赞同：0
> 
> 时间：2012-07-18T12:46:40.727
> 
> 标签：html, css

我很想不使用表格（不是表格可以工作），但我们有这样一种情况，用户希望 3 列 div 浮动，一个 div 有两个 div，其中一个需要显示在 div 的底部。

也许我需要重新考虑整个过程并说服用户保持简单。

无论如何，这是我的代码：

```
<style>
    #outer-div {
        overflow: hidden;
        background-color: grey;
    }
    #column-one {
        padding-bottom: 500em;
        margin-bottom: -500em;
        background-color: red;
        width: 200px;
        float: left;
    }
    #column-two {
        padding-bottom: 500em;
        margin-bottom: -500em;
        background-color: green;
        width: 200px;
        float: left;
    }
    #column-three {
        padding-bottom: 500em;
        margin-bottom: -500em;
        background-color: blue;
        width: 200px;
        float: left;
    }
    #column-one-bottom {
        position: absolute;
        bottom: 0;
        background-color: pink;
    }
</style>
<div id="outer-div">
    <div id="column-one">
        <div id="column-one-top">
            Column One Top Data<br/>
            Column One Top Data<br/>
            Column One Top Data<br/>
            Column One Top Data<br/>
            Column One Top Data<br/>
        </div>
        <div id="column-one-bottom">
            Column One Bottom Data
        </div>
    </div>
    <div id="column-two">
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
    </div>
    <div id="column-three">
        Column Three Data<br/>
        Column Three Data<br/>
        Column Three Data<br/>
        Column Three Data<br/>
    </div>
    <br style="clear: both;"/>
</div> 
```

见[http://jsfiddle.net/Zre8D/2/](http://jsfiddle.net/Zre8D/2/)

希望有人可以提供帮助。

问题在于#column-one-bottom。我需要这是它的父级的底部，而不是 div 的中间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:06:32.580

改变你的风格如下。

```
<style>
    #outer-div 
    {
        height: 100%;
        background-color: grey;
    }
    #column-one 
    {
        background-color: red;
        position: absolute;
        left: 0;
        width: 200px;
        height: 100%
    }
    #column-two 
    {
        background-color: green;
        width: 200px;
        position: absolute;
        left: 200;
        height: 100%
    }
    #column-three {
        background-color: blue;
        width: 200px;
        position: absolute;
        left: 400;
        height: 100%
    }
    #column-one-bottom {
        position: absolute;
        bottom: 0;
        background-color: pink;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:54:09.403

像这样的东西？[http://jsfiddle.net/Zre8D/](http://jsfiddle.net/Zre8D/)

HTML：

```
<div id="outer-div">
    <div id="column-one">
        <div id="column-one-top">
            Column One Top Data<br/>
            Column One Top Data<br/>
            Column One Top Data<br/>
            Column One Top Data<br/>
            Column One Top Data<br/>
        </div>
        <div id="column-one-bottom">
            Column One Bottom Data
        </div>
    </div>
    <div id="column-two">
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
        Column Two Data<br/>
    </div>
    <div id="column-three">
        Column Three Data<br/>
        Column Three Data<br/>
        Column Three Data<br/>
        Column Three Data<br/>
    </div>
    <br style="clear: both;"/>
</div>​ 
```

CSS：

```
#outer-div {
        overflow: hidden;
        background-color: grey;
    }
    #column-one {
        background-color: red;
        width: 200px;
        float: left;
        position:relative;
        padding-bottom:200px;
    }
    #column-two {
        background-color: green;
        width: 200px;
        float: left;
    }
    #column-three {
        background-color: blue;
        width: 200px;
        float: left;
    }
    #column-one-bottom {
        position: absolute;
        bottom: 0;
        background-color: pink;
        overflow:hidden;
    }​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:52:09.833

```
#column-one-bottom {
    position: absolute; 
```

尝试：

```
#column-one-bottom {
    position: relative; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:27:02.850

我设法找到了解决方案。接近解决方案（http://jsfiddle.net/Zre8D/12/）：

```
#outer-div {
    overflow: hidden;
    background-color: grey;
    position: relative;
}
#column-one {
    padding-bottom: 500em;
    margin-bottom: -500em;
    background-color: red;
    width: 200px;
    float: left;
}
#column-two {
    padding-bottom: 500em;
    margin-bottom: -500em;
    background-color: green;
    width: 200px;
    float: left;
}
#column-three {
    padding-bottom: 500em;
    margin-bottom: -500em;
    background-color: blue;
    width: 200px;
    float: left;
}
#column-one-bottom {
    bottom: 0;
    position: absolute;
    background-color: pink;
} 
```

# java - 在 GUI 中集成 Java 控制台

> ID：11541744
> 
> 赞同：2
> 
> 时间：2012-07-18T12:46:40.207
> 
> 标签：java, eclipse, console, windowbuilder

我有一个 GUI（用 eclipse 和 windowbuilder 完成），我想打开（在 jframe 或我的 GUI 附近的新窗口中）一个控制台，它显示我的 System.out.println 和我的 printstacktrace（除其他外）。

我怎样才能做到这一点？我真的必须开发控制台吗？

（我不想确定用户从他的 cmd.exe 启动了我的 jar）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:57:43.103

使用`System.setOut`and `System.setErr`，您可以将控制台输出重定向到`PrintStream`您选择的 s。因此，您可以将所有输出发送到框架内的文本区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-03T18:01:46.200

有一个[SourceForge 项目](http://sourceforge.net/p/java42developmentconsole/svn/HEAD/tree/)会弹出一个控制台窗口来显示多种对象类型。

从项目：

描述

Java42 开发控制台是 Java 的 System 类的替代品。这是一个旨在在应用程序开发期间使用的开发工具，但也可以与您的产品一起打包和交付。

示例用法：

```
import java42.lang.System;

System.getManager().initialize(owner); // Owner is your app's JFrame

// All System.out.xxx methods are routed to the console.

// Print text:
System.out.println("Hello Console"); 

// Print components:
System.out.println(new JButton("Hello Console")); 

// Print images:
System.out.println(ImageIO.read(imageStream)); 
```

![在此处输入图像描述](../Images/bbbc7eef4d84f7a061a079a8be565f4e.png)

# mysql - 通过 3 个关联从 has_many_and_belongs_to_many 中选择对象

> ID：11541747
> 
> 赞同：0
> 
> 时间：2012-07-18T12:46:45.600
> 
> 标签：mysql, ruby-on-rails, activerecord

型号定义：

```
class Article < ActiveRecord::Base
  has_and_belongs_to_many :groups
end

class Group < ActiveRecord::Base
  has_and_belongs_to_many :articles
  has_many :domains, :inverse_of=>:group
end

class Domain < ActiveRecord::Base
  belongs_to :group, :inverse_of=>:domains
  has_many :pages, :inverse_of=>:domain
end

class Page < ActiveRecord::Base
  belongs_to :domain, :inverse_of=>:pages
  belongs_to :article, :inverse_of=>:pages
end 
```

具体来说`Article`，我想选择所有`Domains`（通过关联`groups.domains`）而不`Page`与该关联`Article`。

```
class Article < ActiveRecord::Base
  has_and_belongs_to_many :groups

  def avaiable_domains
    groups.domains("where not exists page with article_id=#{id}")) ##????
    #I have code mentioned at the end of this question, but I don't want use SQL, just pure active query
  end
end 
```

是否可以在纯 Active Record Query 或 Arel 中编写它（在 where 方法中没有 SQL）？

现在我正在使用这个：

```
Domain.where(:group_id=>group_ids).where('NOT EXISTS(SELECT 1 FROM pages WHERE pages.domain_id=domains.id AND article_id=?)',id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:00:23.203

```
Domain.joins(:groups => :articles, :pages).where("pages.article_id <> :id AND articles.id = :id", id: article_id) 
```

在域模型中

```
 scope :available, ->(article_id){ joins(:groups => :articles,:pages).
          where("pages.article_id <> :id AND articles.id = :id", id: article_id) 
```

在文章模型中

```
 def available_domains
    Domain.available(id)
  end 
```

# php - 谷歌地图路线回放

> ID：11541750
> 
> 赞同：0
> 
> 时间：2012-07-18T12:46:50.343
> 
> 标签：php, jquery, google-maps

我正在寻找一个 jquery 插件或任何在 kml 层中播放（带动画）路线的解决方案。如：[http ://ridewithgps.com/trips/337442](http://ridewithgps.com/trips/337442)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:06:03.723

这里有一些例子：

[API V3 驱动：](http://geocodezip.com/v3_animate_marker_directions.html) - [API V2 驱动：](http://econym.org.uk/gmap/example_cartrip2.htm) - [API V3 飞行](http://maps.forum.nu/v3/gm_flight_path_animated.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:05:17.483

以下是如何[沿折线为标记设置动画](http://www.geocodezip.com/v3_animate_marker_directions.html)的示例（折线来自方向服务）

您可以使用第三方 kml 解析器（如[geoxml3](http://code.google.com/p/geoxml3/)或[geoxml_v3](http://code.google.com/p/geoxml-v3/)）将 Kml 指定的折线加载为本机 google.maps.Polyline 对象

# .net - 解析带有未知分隔符的csv文件

> ID：11541753
> 
> 赞同：1
> 
> 时间：2012-07-18T12:47:01.113
> 
> 标签：.net, parsing, csv, delimiter

我必须编写（或使用现有的）csv 解析库。

问题是文件以具有不同分隔符的不同格式上传，例如：

```
File1:
field1; field2; field3; field4
field1; field2; field3; field4

File2:
feld1, field2, field3, field4
feld1, field2, field3, field4

File3:
"field1", "field2", "field3", "field4"
"field1", "field2", "field3", "field4" 
```

以编程方式了解哪个符号是列的实际分隔符的最佳方法是什么？

我正在考虑用符号统计分析编写自己的方法，但也许有现有的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:08:48.663

我会使用正则表达式（希望不会像上次那样得到尽可能多的反对票；））。我正在利用[反向引用](http://msdn.microsoft.com/en-us/library/thwdfzxy.aspx)，它基本上允许使用以前捕获的组。只要每一行使用相同的分隔符，您也可以在同一个文件中使用不同的分隔符（虽然不知道它是否有用）。

所以，这就是我构建正则表达式的方式：

```
string csvItem = @"[""']?\w+[""']?";
string separator = @"\s*[,\.;-]\s*";
string pattern = string.Format(@"^({0}(?<sep>{1}){0})+(\k<sep>{0})*$",
    csvItem, separator); 
```

csvItem 是 csv 中的一个项目（列）。它可以包含小写或大写字母、数字和下划线，并且可以选择用 " 或 ' 包围。

分隔符分隔项目。它由这些字符之一，.;- 和零个或多个空格字符组成。

该模式表示有效行由至少两个由分隔符分隔的 csvItems 组成。注意反向引用-> \k

这里是。这是测试文件的内容：

```
field1; field2; field3; field4
field1; field2; field3; field4

feld1, field2, field3, field4
feld1, field2, field3, field4

"field1", "field2", "field3", "field4"
"field1", "field2", "field3", "field4" 
```

还有一个示例控制台项目：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Text.RegularExpressions;

namespace csvParser {
    class Program {
        static void Main( string[ ] args ) {
            var lines = File.ReadAllLines( @"e:\prova.csv" );

            for ( int i = 0; i < lines.Length; i++ ) {
                string csvItem = @"[""']?\w+[""']?";
                string separator = @"\s*[,\.;-]\s*";
                string pattern = string.Format(@"^({0}(?<sep>{1}){0})+(\k<sep>{0})*$", csvItem, separator);

                var rex = new Regex( pattern, RegexOptions.Singleline );
                var match = rex.Match( lines[ i ] );

                if ( match == null ) {
                    Console.WriteLine( "No match on line {0}", i );
                    continue;
                }
                else {
                    string sep = match.Groups[ "sep" ].Value;

                    Console.WriteLine( "--- Line #{0} ---------------", i );
                    Console.WriteLine( "Line is '{0}'", lines[ i ] );
                    Console.WriteLine( "Separator is '{0}'", sep );

                    Console.WriteLine( "Items are:" );
                    foreach ( string item in lines[ i ].Split( sep ) )
                        Console.WriteLine( "\t'{0}'", item );

                    Console.WriteLine( );
                }
            }

            Console.ReadKey( );
        }
    }

    public static partial class Extension {
        public static string[ ] Split( this string str, string sep ) {
            return str.Split( new string[ ] { sep }, StringSplitOptions.RemoveEmptyEntries );
        }
    }
} 
```

最后它的输出：

```
--- Line #0 ---------------
Line is 'field1; field2; field3; field4'
Separator is '; '
Items are:
        'field1'
        'field2'
        'field3'
        'field4'

--- Line #1 ---------------
Line is 'field1; field2; field3; field4'
Separator is '; '
Items are:
        'field1'
        'field2'
        'field3'
        'field4'

--- Line #2 ---------------
Line is ''
Separator is ''
Items are:

--- Line #3 ---------------
Line is 'feld1, field2, field3, field4'
Separator is ', '
Items are:
        'feld1'
        'field2'
        'field3'
        'field4'

--- Line #4 ---------------
Line is 'feld1, field2, field3, field4'
Separator is ', '
Items are:
        'feld1'
        'field2'
        'field3'
        'field4'

--- Line #5 ---------------
Line is ''
Separator is ''
Items are:

--- Line #6 ---------------
Line is '"field1", "field2", "field3", "field4"'
Separator is ', '
Items are:
        '"field1"'
        '"field2"'
        '"field3"'
        '"field4"'

--- Line #7 ---------------
Line is '"field1", "field2", "field3", "field4"'
Separator is ', '
Items are:
        '"field1"'
        '"field2"'
        '"field3"'
        '"field4"' 
```

不幸的是，正则表达式也捕获了空行。试图修复它:)

# jquery - 如何让 jQuery 1.7 .on() 悬停？

> ID：11541754
> 
> 赞同：8
> 
> 时间：2012-07-18T12:47:00.963
> 
> 标签：jquery, hover

我在悬停状态下动态创建的元素有问题。当我将鼠标悬停在新创建的 html 元素上时，它不起作用。

这是我的 HTML 代码：

```
<button id="create">create new button</button>
<button class="hover">hover me</button>
<div></div> 
```

jQuery：

```
var createBtn = $("#create");

createBtn.click(function() {
    $('div').append('<button class="hover">new hover button</button');  
    return false;        
}); 

$('.hover').hover(function() {
    alert('you hovered the button!');
}, function() {
    alert('you removed the hover from button!');
}); 
```

我什至试过这段代码：

```
$('.hover').on({
    mouseenter : function() {
         alert('you hovered the button!');
    },
    mouseleave : function() {
        alert('you removed the hover from button!');
    }

}); 
```

如此处所示[http://api.jquery.com/on/](http://api.jquery.com/on/)，但仍然没有运气。这里还有演示：http: [//jsfiddle.net/BQ2FA/](http://jsfiddle.net/BQ2FA/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T12:49:22.493

这不是正确的语法。

使用它来监听动态创建的“.hover”元素的事件：

```
$(document).on('mouseenter', '.hover',  function(){
         alert('you hovered the button!');
}).on('mouseleave', '.hover', function() {
        alert('you removed the hover from button!');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T12:52:57.810

您正在使用`.on`直接绑定，您需要将其用于委托：

```
$('div').on({
    mouseenter: function() {
        alert('you hovered the button!');
    },
    mouseleave: function() {
        alert('you removed the hover from button!');
    }
}, ".hover"); 
```

[http://jsfiddle.net/BQ2FA/2/](http://jsfiddle.net/BQ2FA/2/)

# python - 具有阈值函数的 fmin

> ID：11541757
> 
> 赞同：1
> 
> 时间：2012-07-18T12:47:18.577
> 
> 标签：python, scipy, data-fitting

我有一些我想用 fmin 函数拟合的实验数据。我已经将 fmin 与另一个样本一起使用，一切正常。

这次我想用一个函数来表示数据，比如：

```
def f3(c,t):
    resultat=0
    test=t-c[0]
    if (test<0):
       resultat = c[1]
    else:
       resultat = c[1]+c[2]*(t-c[0])+c[3]*(t-c[0])*(t-c[0])+c[4]*(t-c[0])*(t-c[0])*(t-c[0])
    return resultat 
```

t 是时间向量，c[0] 是阈值（多项式系数的 c[i]） *（顺便说一下，数据可以用这个函数表示，因为我用它来生成数据示例！）*

函数错误由下式给出：

```
def e3(p,temps,y):
    error = 0
    i=0
    for t in temps:
        error = error + (f3(p,t)-y[i])**2
        i=i+1
    #cont = min(0,p[0])
    #error = error +10000*(cont*cont)*(cont*cont*cont*cont)
    return error 
```

p3=[10,250,0,0,0] 并且 T_out 是一个向量

拟合操作是：

```
p3_min = fmin(e3,p3[:], args=(temps,T_out),xtol=0.0001,ftol=0.0001) 
```

该指令对于“经典”多项式函数非常有效，但对于 f3 函数（其中带有“if”），p3_min 没有像预期的那样优化。

我试图实现像 p[0]>0 这样的约束或增加迭代次数，但我无法获得预期值。

有没有人尝试过用“阈值”函数拟合数据？如果能得到一些帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:41:08.683

您尝试优化的阈值函数具有更高程度的非线性，因此使用 fmin 等函数更难优化。

尝试执行分类步骤来估计阈值可能会更好。然后才执行优化但知道阈值。

scikit learn 是完成此类任务的绝佳工具：

[http://scikit-learn.org/stable/modules/classes.html#module-sklearn.svm](http://scikit-learn.org/stable/modules/classes.html#module-sklearn.svm)

# asp.net-mvc - 如何使用动作和控制器名称获取 ActionDescriptor

> ID：11541758
> 
> 赞同：8
> 
> 时间：2012-07-18T12:47:26.687
> 
> 标签：asp.net-mvc, asp.net-mvc-3

给定动作名称、控制器名称和 HTTP 动词（GET、POST .. 等），是否可以检查动作是否具有（即被修饰）特定动作过滤器属性？

请注意：动作和控制器不是当前动作和控制器，但可以是应用程序中的任何动作和控制器。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:01:20.923

我已经回答了我自己的问题，这与此非常相似。

*   问题：[我如何获得一个动作的 MethodInfo、给定的动作、控制器和区域名称？](https://stackoverflow.com/questions/13042819/how-do-i-get-the-methodinfo-of-an-action-given-action-controller-and-area-name)
*   答案：[https ://stackoverflow.com/a/13044838/195417](https://stackoverflow.com/a/13044838/195417)

除了动作和控制器名称之外，您还需要`http method`（即 GET、POST）来获得正确的结果。

这是解决您的问题的一段代码：

```
var controllerFactory = ControllerBuilder.Current
    .GetControllerFactory();

var controllerContext = @this.ControllerContext;

var otherController = (ControllerBase)controllerFactory
    .CreateController(
        new RequestContext(controllerContext.HttpContext, new RouteData()),
        controllerName);

var controllerDescriptor = new ReflectedControllerDescriptor(
    otherController.GetType());

var controllerContext2 = new ControllerContext(
    new MockHttpContextWrapper(
        controllerContext.HttpContext.ApplicationInstance.Context,
        method),
    new RouteData(),
    otherController);

var actionDescriptor = controllerDescriptor
    .FindAction(controllerContext2, actionName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-24T15:48:02.783

我有一个类似的问题，我需要检查一个动作是否有自定义属性。

```
public static IEnumerable<MyCustomAttribute> GetAttributes(string controllerName, string actionName)
    {
        var types = Assembly.GetExecutingAssembly().GetTypes();
        var controllers = types.Where(t => (t.Name == controllerName));
        var action = controllers.SelectMany(type => type.GetMethods().Where(a => a.Name == actionName)).FirstOrDefault();
        return action.GetCustomAttributes<MyCustomAttribute>(true);
    } 
```

归功于[这个 SO 答案](https://stackoverflow.com/a/13202945/2432522)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-07T11:59:40.323

如果有人编写单元测试并且`controllerFactory`不像他`Miguel Angelo`的回答那样为他工作，这是我迄今为止想出的最好的：

```
var ctrl = // your controller instance of type T.
var controllerDescriptor = new ReflectedControllerDescriptor(ctrl.GetType());
var actionDescriptor = new ReflectedActionDescriptor(typeof(T).GetMethod(actionName), actionName, controllerDescriptor); 
```

它不会定位控制器本身（它假定控制器），但您通常可以在编写测试时这样做......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:02:39.493

我不太确定你想在哪个地方检查它。如果您在[OnActionExecuting](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onactionexecuting.aspx)或[OnActionExecuted](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onactionexecuted.aspx)中执行此操作。[ActionExecutedContext](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionexecutedcontext.aspx)具有属性[ActionDescriptor](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionexecutedcontext.actiondescriptor.aspx)。在那里您可以找到[IsDefined](http://msdn.microsoft.com/en-us/library/system.web.mvc.actiondescriptor.isdefined%28v=vs.98%29.aspx)方法，该方法可以检查是否为此成员定义了指定属性类型的一个或多个实例。检查代码示例如下：

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    var hasAutorizeAttr = filterContext.ActionDescriptor
                            .IsDefined(typeof(AuthorizeAttribute), false);
    base.OnActionExecuted(filterContext);
} 
```

**编辑：**好的，现在我明白你的问题了。看起来没有优雅的解决方案。如果您需要使用[AjaxExtensions.BeginForm](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.beginform%28v=vs.90%29.aspx)方法来检查其他操作，我只看到一种方法 - 反射。但在我看来，在这种情况下，您需要重新考虑您的架构。

# maven - 如何使用maven编译atl文件

> ID：11541759
> 
> 赞同：0
> 
> 时间：2012-07-18T12:47:31.167
> 
> 标签：maven

我有一个 ATL 项目，我需要使用 maven 编译它。

是否可以使用 maven 其他文件而不是 java 进行编译？

有人在使用 maven 编译 atl 文件之前有经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:59:04.650

我希望你看看[maven-nar-plugin](http://duns.github.com/maven-nar-plugin/)，它旨在编译 C++ 代码等，但不幸的是，这个插件不能通过 Maven Central 获得。此外，它目前仅存在于 SNAPSHOT 版本中。还存在一个[maven-native-plugin](http://mojo.codehaus.org/maven-native/native-maven-plugin/)可能也值得一看。

# jquery - 如何使用 jquery 在文本框中设置计时器..？

> ID：11541760
> 
> 赞同：0
> 
> 时间：2012-07-18T12:47:34.243
> 
> 标签：jquery, jsp

我在 jsp 页面上有一个文本框。我想在页面加载时文本框的值应该显示页面加载了多少时间。或者简单地说，我想在一个文本框中设置一个倒计时，它应该在页面加载时立即自动启动。当用户点击提交按钮时，用户导航到另一个jsp页面显示他点击提交按钮花了多少秒（按钮在前一页上）。

我正在关注 HTML

```
<input type="text" id="timeleft" name="timeleft" /> 
```

在 jquery 脚本中，我正在执行以下操作：

```
<script type="text/javascript" src="jquery-1.7.2.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
    var start = new Date;
                    setInterval(function() {
                        $('timeleft').val((new Date - start) / 1000);
                    }, 1000);     });
        </script> 
```

但是计时器在文本框中不可见......？什么是错误..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:59:50.887

试试这个（基于你的代码）：

```
var start = new Date;
setInterval(timer, 1000);     

function timer() {
        $('#timeleft').val((new Date - start) / 1000);
    } 
```

对于整数：`$('#timeleft').val(parseInt((new Date - start) / 1000))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:49:37.623

您需要将 # 添加到您的选择器。

$('#timeleft') - 它当前正在寻找一个名为 timeleft 而不是 ID 的元素。

新的日期也会给你这个 - 2012 年 7 月 18 日星期三 08:51:56 GMT-0400 (EDT)

如果它是一个计时器，你会想要得到时间。试试这个以供参考。[http://www.w3schools.com/jsref/jsref_gettime.asp](http://www.w3schools.com/jsref/jsref_gettime.asp)

日期对象： [http ://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:05:01.867

只需为 id 选择器添加 #。

[演示](http://jsfiddle.net/nsjithin/4p9Wm/1/)

同样，如果它没有显示在 html 中，请检查您的页面中只有一个 id="timeleft" 的元素

# c# - C#动态添加按钮并用它发送事件参数

> ID：11541762
> 
> 赞同：2
> 
> 时间：2012-07-18T12:47:46.133
> 
> 标签：c#, winforms, listview, event-handling

我认为答案很容易，但我找不到......

我有一个这样编程的列表视图：

```
ListView board = new ListView();

board.Bounds = new Rectangle(new Point(0, 0), new Size(this.Width, this.Height));

board.View = View.Details;
board.LabelEdit = false;
board.AllowColumnReorder = false;
board.GridLines = true;

//textPieces 0 = Van 1 = Titel 2 = Ontvangen 3 = groote

board.Columns.Add(" Afzender ", -10, HorizontalAlignment.Center);
board.Columns.Add(" Titel ", -10, HorizontalAlignment.Center);
board.Columns.Add(" Ontvangen ", -10, HorizontalAlignment.Center);
board.Columns.Add(" Groote ", -10, HorizontalAlignment.Center);
board.Columns.Add(" Bekijken ", -10, HorizontalAlignment.Center);

for (int c = 0; c < new_message_counter; c++)
{
    ListViewItem item = new ListViewItem(berichten_verzameling[c, 0], 0);
    item.SubItems.Add(berichten_verzameling[c, 1]);
    item.SubItems.Add(berichten_verzameling[c, 2]);
    item.SubItems.Add(berichten_verzameling[c, 3]);
    Button dynamicbutton = new Button();
    dynamicbutton.Text = "Bekijk dit bericht";
    dynamicbutton.Name = "show_all_number_" + c;
    item.SubItems.Add(dynamicbutton);
    board.Items.Add(item);
}

groupBox1_all_message.Controls.Add(board); 
```

正如你们中的一些人可能已经看到的那样，有一个错误......因为这不起作用：( item.SubItems.Add(dynamicbutton);)

所以我的第一个问题是如何在其他信息的同一行显示按钮。

另外，我怎样才能动态地为所有这些按钮创建一个事件处理程序，并用它发送一些参数......

就像在 html / javascript 中一样：

```
<button OnClick="DoStuff(5,true);">do it!</button> 
```

但是我怎样才能在 C# 中做到这一点？

在此先感谢 TWCrap

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T13:27:43.173

第一个问题

```
How would you add a button onto standard winform listview control 
```

由于 listview（或 listviewitem）不能用作容器，因此无法直接添加控件。您可能需要寻找自定义方法/扩展功能。查看`ListViewExtender`文章 [How to add button into a listview in winforms](https://stackoverflow.com/questions/456063/adding-button-into-a-listview-in-winforms)

第二个问题

```
 How to make event handler to the button and add event argument to it 
```

使用 后`ListViewExtender`，您可以使用自定义 ListViewColumns 来获取 listviewitem 子文本的参数。您不需要从 UI 传递参数

```
dynamicbutton.Click += OnButtonActionClick();

 private void OnButtonActionClick(object sender, ListViewColumnMouseEventArgs e)
{
    // you clicked the button.
    MessageBox.Show("your current listviewItem - " - e.SubItem.Text)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:53:00.203

试试这个

```
 Button dynamicbutton = new Button();
    dynamicbutton.Command += new CommandEventHandler(dynamicbutton_Command);
    dynamicbutton.CommandName = "myCommandName";
    dynamicbutton.CommandArgument = anyID;

void dynamicbutton_Command(object sender, CommandEventArgs e)
{
   // do stuff
} 
```

并尝试此添加 yr 按钮

```
item.Controls.Add(dynamicbutton); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:53:37.133

好吧，这是第 2 部分，您可以将“Click”事件绑定到 do.. 循环中的事件处理程序。（例如 button.Click += {event}）

第 1 部分 => 我认为此链接将对您有所帮助：[在 WinForms 中将按钮添加到 Listview](https://stackoverflow.com/questions/456063/adding-button-into-a-listview-in-winforms)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T13:05:52.523

拉姆达

```
dynamicButton.Click += (sender, e) => {
    // ...
} 
```

完整签名

```
dynamicButton.Click += ClickEventCallback;

private void ClickEventCallback(object sender, EventArgs e) {
    // ...
} 
```

# php - 基于键对多维数组进行排序

> ID：11541763
> 
> 赞同：0
> 
> 时间：2012-07-18T12:47:52.917
> 
> 标签：php, arrays, sorting

我正在尝试根据多维数组中的特定键值对数组进行排序，如下所示

```
<?php
$country = array(
    array(
        'country' => 'India',
        'visits' => 22,
        'newVisits' => 16,
        'newVisitsPercent' => 72.7),
    array(
        'country' => 'USA',
        'visits' => 30,
        'newVisits' => 15,
        'newVisitsPercent' => 50),
    array(
        'country' => 'Japan',
        'visits' => 25,
        'newVisits' => 15,
        'newVisitsPercent' => 60));
?> 
```

我想按数组的“访问”键的降序对数组进行排序。

所需的数组是

```
<?php
$country = array(
    array(
        'country' => 'USA',
        'visits' => 30,
        'newVisits' => 15,
        'newVisitsPercent' => 50),
    array(
        'country' => 'Japan',
        'visits' => 25,
        'newVisits' => 15,
        'newVisitsPercent' => 60),
    array(
        'country' => 'India',
        'visits' => 22,
        'newVisits' => 16,
        'newVisitsPercent' => 72.7));
?> 
```

试图在 SO 中搜索所有结果都根据键的值进行排序。请让我知道我们需要使用哪个功能。

我查看了 ksort，多排序功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:54:08.920

PHP 有一个名为[usort](http://se.php.net/manual/en/function.usort.php) () 的内置函数，可以对这些类型的数组进行排序。

您的比较函数可能如下所示：

```
function mycmp($a, $b) {
  return intval($a['visits']) - intval($b['visits']);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T12:49:15.410

看看文档`usort`：[http ://www.php.net/manual/en/function.usort.php](http://www.php.net/manual/en/function.usort.php)

# android - (Android) 如何使用 listView 作为按钮？

> ID：11541768
> 
> 赞同：3
> 
> 时间：2012-07-18T12:48:04.083
> 
> 标签：android, listview, button, android-fragments, viewflipper

我有以下代码：我的片段上出现了一个列表。如何将列表项用作按钮，以便当我单击它们以从 ViewFlipper 更改页面时？
我尝试使用用-1初始化的变量（changepage）女巫。并将适配器的位置放入其中。以便单击以检查它是多少，并更改 ViewFlipper 的 displaychildren 功能

```
package com.weinco.fragments;

import java.util.ArrayList;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.ViewFlipper;

import com.weinco.R;

public class VinocardFragment extends Fragment {
int mNum;
private ListView menuItemList;
private ListViewAdapter listViewAdapter;
public static String text;
public static ViewFlipper VF;
public static ListView listViewVino;
public static final ArrayList<String> ListviewContent = new ArrayList<String>();
public static int changepage=-1;

/**
 * Create a new instance of CountingFragment, providing "num" as an
 * argument.
 */
static VinocardFragment newInstance(int num) {
    VinocardFragment f = new VinocardFragment();

    // Supply num input as an argument.
    Bundle args = new Bundle();
    args.putInt("num", num);
    f.setArguments(args);

    return f;
}

// ListView

public static class ListViewAdapter extends BaseAdapter {
    private LayoutInflater mInflater;

    public ListViewAdapter(Context context) {

        mInflater = LayoutInflater.from(context);

    }

    public int getCount() {
        return ListviewContent.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        ListContent holder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.listviewinflate, null);

            holder = new ListContent();
            holder.text = (TextView) convertView
                    .findViewById(R.id.TextView01);

            convertView.setTag(holder);
        } else {

            holder = (ListContent) convertView.getTag();
        }

        holder.text.setText(ListviewContent.get(position));
        return convertView;
    }

    public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) {
        if (position==0){
            changepage=0;
        }
    }

    class ListContent {
        TextView text;

    }
}

/**
 * When creating, retrieve this instance's number from its arguments.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mNum = getArguments() != null ? getArguments().getInt("num") : 1;

}

/**
 * The Fragment's UI is just a simple text view showing its instance number.
 */
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.vinocard, container, false);
    VF = (ViewFlipper) v.findViewById(R.id.viewFlipperVino);

    OnClickListener anmeldenListener;
    OnClickListener zuruckListener;
    OnClickListener zuruckListener2;

    // Variables
    ImageButton anmeldenB = (ImageButton) v.findViewById(R.id.anmelden);
    ImageButton backB = (ImageButton) v.findViewById(R.id.backVinoNr);
    ImageButton backB2 = (ImageButton) v.findViewById(R.id.backVinomenu);
    menuItemList = (ListView) v.findViewById(R.id.listViewVino);
    EditText vE = (EditText) v.findViewById(R.id.vinonr);
    text = vE.getText().toString();
    getMenuItems();

    // Onclick Listeners for buttons
    anmeldenListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            VF.showNext();

            menuItemList.setAdapter(listViewAdapter);

        }

    };

    if (changepage==0){
        VF.showNext();

    }

    zuruckListener = new OnClickListener() {
        @Override
        public void onClick(View v) {

        }
    };
    zuruckListener2 = new OnClickListener() {
        @Override
        public void onClick(View v) {
            VF.showPrevious();
        }
    };

    //Get Item ID's to pages

    anmeldenB.setOnClickListener(anmeldenListener);
    backB.setOnClickListener(zuruckListener);
    backB2.setOnClickListener(zuruckListener2);
    return v;
}

private void getMenuItems() {
     ListviewContent.add("Exklusivangebote");
     ListviewContent.add("Gutschein schneken");
     ListviewContent.add("Kundendaten");
     ListviewContent.add("Meine Gutscheine");
     ListviewContent.add("Jahresbonus");
     listViewAdapter = new ListViewAdapter(getActivity());

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:53:34.243

您可以扩展`ListFragment`而不是`Fragment`实施`onListItemClick()`. 从那里，您可以获取单击的项目的 id`ListView`并使用它做任何您想做的事情。

要实施`onListItemClick()`，

1.  右键单击您的代码空间。
2.  鼠标悬停“来源”
3.  单击“覆盖/实施方法”
4.  查找并检查`onListItemClick(ListView l, View v, int position, long id)`
5.  单击“确定”以实施检查方法。

在您的代码中查找`onListItemClick`，您应该会看到：

```
public void onListItemClick (ListView l, View v, int position, long id)
{
   // l - ListView that was clicked
   // v - View that was clicked within ListView l
   // position - Position of View v within ListView l
   // id - row id of item that was clicked
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:26:30.237

这解决了它：

menuItemList.setOnItemClickListener(new OnItemClickListener() {

```
 public void onItemClick(AdapterView<?> menuItemList, View v, int position,
             long id) {
           changepageothers=position;
            if (changepageothers==0){              
             VF.showNext();
             changepageothers=-1;
            }
            if (changepageothers==1){
             VF.showPrevious();
             changepageothers=-1;
            }

           }
          }); 
```

# php - 在 URL 重写 htaccess 方面需要帮助

> ID：11541770
> 
> 赞同：0
> 
> 时间：2012-07-18T12:48:08.317
> 
> 标签：php, .htaccess, url-rewriting

大家好，我需要有关 URL 重写`{www.mysub.domain.com/other?Name=Some Product Name&code=12312312}`的`{www.mysub.domain.com/other/Some Product Name/12312312}`帮助 这在我的本地主机上运行良好，但在我的域名主机上出现错误。以下是我的代码，请查看它并让我知道是错误的。我感谢您的帮助。

```
<pre>
RewriteEngine on<br>
RewriteRule ^itm/([A-Za-z0-9\s+!@$%&*._%+-/\(){}#='"`~|;:<>]+)/([0-9]+)$ itm.php?ItemName=$1&code=$2<br>
</pre> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:07:19.413

尝试使用以下内容：

```
Options +SymLinksIfOwnerMatch

RewriteEngine on

RewriteRule ^([a-zA-Z-]+)$ index.php?action=$1 [NC,L]

RewriteRule ^(member)-([0-9-]+)$ index.php?action=member&id=$2 [NC,L]

RewriteRule ^([a-zA-Z-]+)/([a-zA-Z-]+)-([0-9-]+)$ index.php?action=$1&saction=$2&sid=$3 [NC,L]

RewriteRule ^([a-zA-Z-]+)/([0-9-]+)$ index.php?action=$1&id=$2 [NC,L]

RewriteRule ^([0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/(.*).html$ index.php?action=details&id=$1&p1=$2&p2=$3&p3=$4 [NC,L] 
```

# java - 哈希表映射 - 更新值

> ID：11541771
> 
> 赞同：0
> 
> 时间：2012-07-18T12:48:10.637
> 
> 标签：java, hashtable

我只是使用哈希表来记住图像中出现的补色。

无论如何，所以我得到了当前值计数：

```
Float count = complementaryColour.get(complementaryString[1] + " and " + colourName); 
```

现在我想改变计数，所以我这样做：

```
count += (Float)((frequency/width*height)*total_distance); 
```

把它放回去

```
complementaryColour.put(complementaryString[1] + " and " + colourName, count); 
```

然而遗憾的是它不喜欢这样！它说我需要创建一个浮点数，然后当我查看将其放回哈希表的行时，它说它无法解析为变量。

我以前见过这样做，但只有当我们有 Integer count... 然后 count++; 然后可以将其返回到哈希表！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:13:17.920

根据您的问题，您`Hashtable`的情况如下。

```
Map <String , Float> complementaryColour=new Hashtable<String, Float >(); 
```

尝试这个

```
float f=(float) ((frequency/width*height)*total_distance);
lCount+=f; 
```

# wicket - 如何从子面板访问 wicket Page 表单模型

> ID：11541772
> 
> 赞同：2
> 
> 时间：2012-07-18T12:48:18.657
> 
> 标签：wicket

这是层次结构

父网页包含面板。网页有表格

```
add(this.form = new Form<LoginUser>("form", new CompoundPropertyModel<LoginUser>(new LoginUserModel(user))) {

@Override
protected void onSubmit() { 
...
} 
```

现在在面板中，我需要从表单更新中获取更新的 LoginUser。在面板中，我试图通过它`((UserPage) getPage()).getForm().getModelObject();` 但是，它没有给出`LoginUser`.

请提供您对如何访问面板中父网页的表单模型的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:15:11.040

只需在其构造函数中将模型或模型对象传递给您的面板并将其存储在面板的成员中。由于它与支持表单的对象完全相同，因此它将包含相同的更新值。

# jquery - 如何验证表单并通过 ajax 将表单发送到另一个 php 页面？

> ID：11541776
> 
> 赞同：0
> 
> 时间：2012-07-18T12:48:24.313
> 
> 标签：jquery

我之间有这段代码`<head></head>`

```
<script>
$(document).ready(function() {
    $("#test1").validate({
        jQuery.extend(jQuery.validator.messages, {
            required: "Bez vyplnění této položky nelze objednávku odeslat!",
            email: "Prosím zadejte platnou e-mailovou adresu!",
            number: "Zadané znaky mohou obsahovat pouze číslice od 0 - 9.",
        });
    });
});
</script> 
```

我需要让 ajax 函数验证表单，验证后我想将页面重定向到另一个 php 文件，在那里将继续我的另一个 php 代码。感谢帮助

# asp.net-mvc - 异常时维护 cookie

> ID：11541777
> 
> 赞同：0
> 
> 时间：2012-07-18T12:48:31.310
> 
> 标签：asp.net-mvc

我有一个屏幕，上面有网格。网格有一列作为超链接。超链接在新窗口中打开文档。每当在新窗口中加载文档时出现异常，我需要显示异常并且父屏幕应该继续工作。目前，当在新窗口中加载文档时发生异常，如果我关闭窗口，cookie 会被清除，因此父屏幕也会消失。即使关闭新窗口，我也需要让父母活着。我正在使用 Asp.net mvc3。

谢谢。

# search - 基于搜索词和位置进行搜索

> ID：11541778
> 
> 赞同：0
> 
> 时间：2012-07-18T12:48:53.037
> 
> 标签：search, geolocation, search-engine

我们想建立一个基于搜索词和位置的搜索引擎。技能页面之类的东西会提示您正在寻找的技能和位置（例如[http://www.skillpages.com/i/Search/Browse?Location=new+york&SearchTerm=designer&SearchType=SKILLS](http://www.skillpages.com/i/Search/Browse?Location=new+york&SearchTerm=designer&SearchType=SKILLS)）。

这是一种越来越普遍的搜索方式，我一直想知道它是如何实现的。

这些网站是否使用 google api 返回用户输入的位置的经度和纬度，然后决定半径，比如 50 公里，并在该半径内搜索技能（仍以技能页面为例）？

使用这种方法，半径是如何确定的？例如，如果用户选择“伦敦”，则半径将比用户选择“英国”时小得多......

实现这种搜索形式的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:24:55.140

查看 Google 地方信息的运作方式。它必须与您想要的非常相似。

# java - 为我们的应用程序保留一个专用的端口号

> ID：11541780
> 
> 赞同：1
> 
> 时间：2012-07-18T12:49:10.453
> 
> 标签：java, sockets

我们有一个软件应用程序，它具有客户端-服务器架构，并且只能在 LAN 上使用。因此，我们打算使用 Java Socket Programming 来实现这一点（基于明确定义的协议）。

我们有两种设置：*服务器设置*（将服务器设置为在端口上侦听请求的后台进程）和*客户端设置*。这两个都可以由用户手动调用，具体取决于他希望软件在该特定计算机上的行为方式。

现在，在服务器应用程序的情况下，在设置过程中，我们指定某些详细信息，例如端口号等......。所以，我们现在要做的是确保一旦该机器上的端口号固定，只要软件应用程序存在（并且不考虑服务器停机时间或正常运行时间），我们要确保没有其他第三方应用程序/产品使用该端口。

目前，有没有办法通过代码（Java）做到这一点？假设此应用程序不需要始终以管理员身份运行，因此可能没有访问 Windows 注册表的权限。

我希望我对问题陈述已经很清楚了。当然，如果需要任何澄清，请询问，我将尝试进一步解释。

期待有关解决此问题的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:55:22.370

你根本不能...

当您的程序关闭时，任何其他程序都可以打开您的端口，并阻止您的程序在启动后使用它...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:03:37.077

解决此问题的一种方法是使用服务发现。有很多方法可以实现这一点。

它们的共同点是能够通过名称或 id 查找服务并连接到它，而不管实际使用的端口如何。每次运行时可能会有所不同。这样，您的应用程序可以使用任何空闲端口，而无需保留端口（甚至只在一台主机上运行）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T01:30:43.593

你可以试试[https://github.com/ProfessorEugene/PortReserve](https://github.com/ProfessorEugene/PortReserve) (java 1.6+) - 完全公开，我是作者。

# opencv - YUV2 数据的 Channel 和 Bit 值

> ID：11541795
> 
> 赞同：1
> 
> 时间：2012-07-18T12:49:57.257
> 
> 标签：opencv, rgb, yuv

我有一个来自相机（PAL）的数据流我从回调函数获得的数据类型的格式类似于 U0-Y0-V0-Y1 U2-Y2-V2-Y3 U4-Y4-V4-Y5 .... ..

我需要使用 OpenCV 的 cvCvtColor() 函数将颜色格式更改为 RGB（或 BGR）。函数的用法是 cvCvtColor(YCrCb, dst, CV_YCrCb2BGR); 现在这里（实际上是之前）出现了问题，dst 是一个 3 通道 8U 图像，没关系，但是如何将来自回调函数的数据直接存储在 IplImage 中？如果我可以正确存储它，我可以使用 cvCvtColor() 来转换图像。任何功能，任何其他库？如果我在每一帧中使用 RGB<->YUV 数学转换，这会导致 70%++ 的 CPU 使用率，所以我不想使用它们，我正在寻找一种更简单的 CPU 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-28T23:51:20.347

如果您的输入格式是 YUY2，那么它实际上是 YUYV，我下面的示例假设了这一点。但是，如果您的格式确实是 UYVY，只需更改我的示例或颜色空间中的顺序（请参阅下面的注释）。

您可以通过 2 通道 Mat 数组将此 YUY2/YUYV422 数据呈现给 OpenCV。

有两种方法可以填充 Mat img：通过复制和通过引用。根据您的应用程序，您可以选择其中任何一种。

两者都假设您在 char 数组中有 yuv 数据`image_yuv`。

1a。通过参考原始数据（没有内存分配；快速）：

```
Mat img(height, width, CV_8UC2, img_yuv); 
```

1b。通过将数据复制到 Mat 中：

```
Mat img(height, width, CV_8UC2);
uchar *pix = img.ptr<uchar>(r); // first byte of the row in image
for (int r = 0, b=0; r < height; r++) {
    for (int c = 0; c < width; c+=4) {
        *pix++ = image_yuv[b++]; // y
        *pix++ = image_yuv[b++]; // u
        *pix++ = image_yuv[b++]; // y
        *pix++ = image_yuv[b++]; // v
    }
} 
```

现在您在 Mat img 中有数据，您可以使用 cvtColor 将其转换为其他颜色空间：

2a. 更改为 BGR：

```
cvtColor(img, img_p, COLOR_YUV2BGR_YUY2);
imshow("window", img_p); 
```

2b。更改为灰度：

```
cvtColor(img, img_p, COLOR_YUV2GRAY_YUY2);
imshow("window", img_p); 
```

注意：如果您的格式是 UYVY，请更改复制顺序或更改颜色空间（COLOR_YUV2BGR_UYVY 或 COLOR_YUV2GRAY_UYVY）。请参阅 OpenCV 源代码中的 imgproc.hpp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:56:16.813

IIRC openCV doesn't support interleaved YUV it only does planar YUV420/YUV422 where the Y data for the entire image is first followed by reduced resolution U and V (as used by JPEG)

You can either re-order the data into planes or simply generate the RGB data yourself using the [formulae here](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-cvtcolor) or the faster integer version in this answer [Converting YUV->RGB(Image processing)->YUV during onPreviewFrame in android?](https://stackoverflow.com/questions/9325861/converting-yuv-rgbimage-processing-yuv-during-onpreviewframe-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:18:03.797

我还发现此代码仅用于将 YUV 4:2:2 转换为 rgb，也许这可能有用.... [将 YUV422 转换为 RGB24](https://stackoverflow.com/questions/6995047/convert-yuv422-to-rgb24)（不，不是）但也许我发现的这个其他站点可能更有用。他没有提供任何将图像转换为 opencv 标准 RGB24 的代码，因此您必须了解 c 代码并将其改编为 opencv 标准： [http ://wss.co.uk/pinknoise/yuv2rgb/](http://wss.co.uk/pinknoise/yuv2rgb/)

不知何故，我找不到任何好的解决方案....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T13:21:42.987

我会为帧缓冲区制作一个 Iplimage 标头，如下所示：

```
 IplImage* header = cvCreateImageHeader(cvSize(width,height), IPL_DEPTH_8U, 3);
    headercopy->widthStep = width*3;//I hope this will right for you... :)
    headercopy->imageData = (char*) bufferstart; 
```

您现在可以将 Iplimage 标头用作普通的 Iplimage 希望就是这样。对于转换，您可能需要分配一个新的 IplImage 对象！

# java - 如何使用 Java 读取 JSON 数据

> ID：11541798
> 
> 赞同：0
> 
> 时间：2012-07-18T12:50:04.157
> 
> 标签：java, json

在 Java 中读取/解析以下 JSON 字符串时遇到问题。

代码：

```
try{
  json = new JSONObject(result);
//json now looks like this :-
// {'header': '[{"doc_no": "DN00001","stage":"P"}]','section':'[{"upper":100,"lower":1]'}
  if (json != null){
     // this line is throwing an exception!!
     JSONObject header =  new JSONObject("header");
   }catch(JSONException e){
    // Error Message
} 
```

我也试过这个：

```
JSONArray  header = json.getJSONArray("header"); 
```

但仍然抛出一些异常。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:51:57.503

这不是一个有效的 JSON 文件。

```
'header': '[{"doc_no": "DN00001","stage":"P"}]' 
```

数组不能被`'`
字符串包围 应该被包围`"`而不是`'`

阅读[http://json.org/](http://json.org/)了解 JSON 语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:53:18.570

```
JSONObject header =  new JSONObject("header"); 
```

您的意思是从现有对象中获取“标题”字段吗？

```
JSONObject header =  json.getJSONObject("header"); 
```

但从你的评论来看

```
// {'header': '[{"doc_no": "DN00001","stage":"P"}]','section':'[{"upper":100,"lower":1]'} 
```

您打算将“标头”作为一个数组（不是对象），但数据将它作为一个字符串（看起来像一个数组），因此您可能需要修复 JSON 以及 Java 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T13:09:09.993

在这里，伙计拿这个代码。如果您想从中获取 JSONObject，请修复您的 JSON 字符串

```
public static void main(String[] args) throws JSONException {
    String result = "{'header': '[{\"doc_no\": \"DN00001\",\"stage\":\"P\"}]','section':'[{\"upper\":100,\"lower\":1]'}";
    JSONObject json = new JSONObject(result);
    // json now looks like this :-
    //
    if (json != null) {
        String header = json.getString("header");
        System.out.println(header);
    }

} 
```

那你怎么了？几件事：

1.  你的 JSON 字符串都是非法的。感谢解析器与您合作。它应该是

    ```
    {
      "header": [{"doc_no": "DN00001","stage":"P"}],
      "section":[{"upper":100,"lower":1]
    } 
    ```

2.  它不会单独解决您的问题。既然你想得到`JSONObject`但你提供了一个`JSONArray`（你为什么这样做？）。所以删除那些方括号。

3.  还是不开心。您会看到您正在尝试`JSONObject`通过（显然）`new JSONObject("header")`使用字符串 taht 不是 JSON 来创建一个新的。9并期望它不会抛出错误？多么残忍。）加上你`get`不想`set`。所以使用`json.getXXX("header")`where XXX can be `String`，`JSONObject`或者`JSONArray`更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:52:04.540

`JSONObject header = new JSONObject("header");`

您不是要从中**获取**标头`json`，而不是创建新标头`JSONObject`吗？

如在

`JSONObject header = json.get("header");`

# html - 仅在鼠标悬停后对第一组列表应用边框

> ID：11541799
> 
> 赞同：0
> 
> 时间：2012-07-18T12:50:05.953
> 
> 标签：html, css

```
<ul id="menu">
  <li>first set<li>
     <ul>
       <li>second set</li>
       <li>second set</li>
     </ul>
  <li>first set<li>
  <li>first set<li>
</ul> 
```

我已经为第一组列表应用了左边框，使用

```
#menu li
{
  border-left: 1px solid black;
} 
```

但是，当鼠标悬停第一组时，第二组列表显示左边框为 2px。但我不希望第二组有任何左边框。我如何删除这个 2px？

我可以使用删除 1px

```
#menu ul li
{
  border-left: 0px;
} 
```

我如何才能删除第二组的另一个 1px 边框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:51:38.470

`#menu > li`在您的 CSS 中使用，而不是`#menu li`将边框限制为第一组。

IE

```
#menu > li
{
  border-left: 1px solid black;
} 
```

**更新**

根据 OP 发布的小提琴 - [http://jsfiddle.net/DrJsr/3/](http://jsfiddle.net/DrJsr/3/)，标记为：

```
<ul id="menu">
  <li>first set<li>
     <ul>
       <li>second set</li>
       <li>second set</li>
     </ul>
  <li>first set<li>
  <li>first set<li>
</ul> 
```

上面有几个问题：

*   一些 LI 没有关闭。这会导致一些浏览器误认为它是另一个 li 的开始
*   第二组的 UL 是主 UL 的直接子级 - 这在 HTML 中无效 - 理想情况下，第二个 UL 应该是主 UL 内的其中一个 LI 的子级

现在，关于边界 - 它实际上确实工作正常。如果您使用 Firebug 或 Chrome 检查第二组的 UL，您会看到浏览器自动添加一个 LI 来包装第二组的 UL，从而自动使 HTML 有效。

即您的 HTML 自动变为：

```
<ul id="menu"> 
  <li>first set</li>
  <li> <!-- this is added by browser and this LI will have a left border since it falls under #menu > li -->
     <ul> 
       <li>second set</li> 
       <li>second set</li> 
     </ul> 
  </li>
  <li>first set</li>
  <li>first set</li>
</ul> 
```

这个新的 LI 落入`#menu > li`并呈现左边框。如果您检查 Firebug，您会看到您看到的左边框是为这个新的 LI 渲染的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:18:51.947

有不同的方法来解决您的问题。这里有一个例子。

1.  创建一个 CSS 规则，其中有一个选择器指向第二组列表以设置边框样式。

    ```
    #menu li li {border-left:0;} 
    ```

2.  更好的方法是在你的第二组列表中添加一个类或一个 id 并为其创建一个 CSS 规则。如果我假设您在第二个`<ul>`列表中添加了 class="sub-menu"，则添加以下 CSS 规则。

    ```
    #menu ul.sub-menu li {border-left:0;} 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:26:54.917

也许这个？

```
#menu:first-child
{
border-left: 1px solid black;
} 
```

# java - 浏览器/jQuery 代理错误

> ID：11541802
> 
> 赞同：1
> 
> 时间：2012-07-18T12:50:08.720
> 
> 标签：java, javascript, jquery, spring-mvc, solr

我们有一个网络应用程序，它具有内置的搜索功能，我们的用户可以执行复杂的搜索。这是我们的软件堆栈：

*   服务器端是 Spring MVC，使用 Struts/JSP 进行查看
*   客户端 JS 库是用于表格的纯 jQuery 和 jqGrid
*   Web 应用程序打包为 WAR 并部署到 Tomcat 6.0.35 容器
*   Apache 2.2.22 Web Server 是一个反向代理，为我们的 JS 提供服务（我知道这不是必需的，但这是项目交给我们的方式，而不是我们的设计！）
*   后端由另一个团队构建和维护，但将 SOLR 和 Oracle 用于上述文本搜索功能

当用户在大约 30 秒后执行“广泛”查询（没有很好地定位并且需要 SOLR 真正突突的查询）时，他们会在屏幕上收到一条错误消息，上面写着“**代理错误**”。该错误消息将代替显示搜索结果的普通 jqGrid 表显示。

我已经对我们项目中的每个文件进行了全文搜索，但找不到这个短语，也没有“ `Proxy`”，也没有“ `proxy`”。

这些神秘且难以捉摸的“代理错误”在 90% 的情况下都发生在 IE8 和 IE9 中，尽管偶尔会在 FireFox 中发现它们。

由于在我们的代码库中找不到该字符串（或任何类似的内容），因此它必须来自这些第 3 方依赖项之一，并且只是以搜索结果的形式发送回用户。

有没有人见过这些技术中的任何一种以前的行为？这可能是浏览器以某种方式注入 DOM 的东西吗？我在这里傻眼了，时间不多了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:06:01.170

50x 绝对来自 Apache。检查`httpd.conf`- 您可能定义了类似`Timeout=blah`. 如果定义了这个属性，那么当 Apache 将请求转发到 Tomcat 时，如果 Tomcat 响应时间长于`blah`响应 Apache 快速失败，并向客户端返回 50x，将“代理错误”注入响应正文。

只需删除此超时设置，这会导致现代版本的 Apache 无限期等待。至少这样你不会得到代理错误，尽管不能保证 Tomcat 会返回任何东西给 Apache。

# asp.net - 处理异常的最佳实践

> ID：11541803
> 
> 赞同：2
> 
> 时间：2012-07-18T12:50:11.363
> 
> 标签：asp.net, entity-framework, enterprise-library

我有一个 ASP.NET (Webforms) 项目，使用**实体框架**和**企业库**进行异常处理/日志记录。**保存**到数据库时处理异常的最佳实践是什么。

我是否应该只使用异常处理块配置企业库来处理所有异常。**或者我应该用try/catch**包围每个**保存**语句并在每个 catch 语句中处理异常。我希望这是有道理的。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:53:26.697

您应该始终根据您的应用程序业务逻辑处理已知的预期异常，否则放手让企业库记录它。

另一个经验法则是，无论是否处理了异常，都会将您的应用程序状态/流程中断为意外状态，您应该让它失败。

**例子：**

```
class Programs
{
    static void Main(string[] args)
    {
        try
        {
            Print_String(null);
        }
        catch (System.ArgumentException ex)
        {
            Console.WriteLine("{0}", ex.Message);
        }
        //catch (Exception ex)
        //{
           //no no
        //}
        Console.ReadLine();
    }

    private static void Print_String(string str)
    {
        if (str == null)
        {
            throw new ArgumentNullException("str");
        }
        else
        {
            Console.WriteLine(str);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:51:42.253

有了轮子，就没有必要重新发明轮子。企业库是处理异常的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:00:39.280

页面级异常

```
Add a Page_Error() method to your page and handle the exceptions here 
```

应用程序级别异常：

```
Add your code in the global.asax event Application_Error() to manage exceptions 
```**

# php - 从 html 和 javascript 访问经过身份验证的 php 页面

> ID：11541804
> 
> 赞同：0
> 
> 时间：2012-07-18T12:50:11.277
> 
> 标签：php, javascript, html, http, authentication

我正在尝试编写一个简单的 html 页面来创建两个数据馈送的混搭。数据馈送源之一是一个 PHP 页面，每次请求时都会生成一个 Google 地球 KMZ 文件。我的目标是“实时”在我的页面上的地图上显示此提要。

特定的 PHP 页面需要身份验证，我有用户名和密码。当我将 URL 插入 Web 浏览器时，它会询问我的凭据，我提供它们并下载 KMZ 文件。

我想让我的 html 页面使用 javascript 向 PHP 页面发出 HTTP 请求，检索返回的 KMZ 并将其加载到地图上。

我对这种事情完全陌生，所以如果我朝着正确的方向前进，请告诉我，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:43:40.897

您没有指定在远程端使用*哪种类型*的身份验证，因此，我将做出一些猜测和假设：

**基本 HTTP 身份验证**

如果使用“[基本 HTTP 身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)”（这将显示一个浏览器弹出窗口，请求该领域的用户名/密码），您可以按如下方式制定您的请求 URL：

```
http://username:password@host.name/file.name?parameter=x 
```

在哪里：

*   `username`是您实际已知的用户名
*   `password`实际密码
*   `host.name`远程服务器的地址，
*   `file.name`您尝试访问的 PHP 文件
*   **可选：** `parameter=x`从 PHP 文件获取所需输出所需的任何已知参数

**PHP 身份验证**

如果实际的身份验证是由 PHP 页面本身完成的，那就另当别论了。在这种情况下，这完全取决于 PHP 脚本使用哪些变量来执行身份验证，特别是哪种*类型*的参数。最常用`GET`或被`POST`使用（或者如果`REQUEST`被使用，两者都会起作用）。

无论哪种方式，您都必须知道正在使用的参数的名称。我将假设`user`以下`pass`示例。

在 PHP 脚本中，这些看起来像`$_GET['user']`, `$_POST['user']`，`$_REQUEST['user']`或者`$user`如果危险的[register_globals](http://nl3.php.net/manual/en/ini.core.php#ini.register-globals)设置在`php.ini`.

在`GET`或的情况下`REQUEST`：

```
http://host.name/file.name?user=username&pass=password&parameter=x 
```

在以下情况下`POST`：

可以`POST`使用 JavaScript 赋值。[这个 SO 答案给出了一个工作示例。](https://stackoverflow.com/a/133997/813718)

**还要别的吗**

如果使用任何其他方法（还有很多其他方法），则需要更具体的信息来确定确切的方法和可行的解决方案。

# android - Eclipse：奇怪的语法错误

> ID：11541805
> 
> 赞同：1
> 
> 时间：2012-07-18T12:50:16.110
> 
> 标签：android, eclipse, syntax

Eclipse 今天让我发疯，在这里出现了这样的无意义错误：

```
Multiple markers at this line
- Syntax error on token ";", delete this 
 token
- Syntax error, insert ";" to complete 
 Statement 
```

这是我的代码：

```
View dialogView = (View) findViewById(R.layout.dialog);
    imgMan = new NovelImageManager();
    this.viewMan = new ViewManager(dialogView, this.imgMan);<--- Error happens here. 
```

我在像这样的其他项目中有奇怪的问题：

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    loadData();

    if (adView != null) {
        adView.loadAd(new AdRequest());
    } else {
        setupAds();
    }
} 
```

导致以下错误：

```
Multiple markers at this line
- Syntax error on token "void", @ 
 expected
- overrides 
 android.app.Activity.onResume 
```

这些代码过去有效，所以我不知道为什么 eclipse 会这样。我知道日食有时会很痛苦，但这没有意义。

知道这会导致什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:54:11.260

Clean and Build 是您的朋友！特别是如果您最近添加了新资源等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:04:20.963

编辑：请更新到 ADT 20.0.1。该错误已得到修复。

* * *

这是[Android Lint 中的一个错误](http://code.google.com/p/android/issues/detail?id=33985)。如果您在出现 Java 语法错误时点击保存按钮，它会“保存”来自 JDT 的 Java 相关错误。

You can hit the "Remove all warnings" button in the Android Lint view to get rid of those wrong warnings. Lint will re-create the correct warnings during the next run.

# vb.net - DOC 到 XPS 文件

> ID：11541807
> 
> 赞同：1
> 
> 时间：2012-07-18T12:50:20.463
> 
> 标签：vb.net, document, xps

我只是想知道如何将我的文档 .doc 路径转换为 ​​xps 文件文档。

如果有人可以提供帮助，我会很高兴知道 VB.NET 中的代码，因为我已经用谷歌搜索了它，但不幸的是我找不到我的问题的最佳答案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:21:27.037

我在控制台应用程序中使用以下代码执行此操作。您需要引用 Microsoft.Office.Interop.Word 程序集（稍后版本 12 以生成 XPS 文件）并导入命名空间。

VB中的代码是：

```
Option Explicit On

Module Module1

Sub Main()
    Dim word As _Application
    Dim doc As _Document

    word = New Application
    doc = word.Documents.Open("C:\test.doc")
    doc.SaveAs("C:\test.xps", WdSaveFormat.wdFormatXPS)
    word.Quit()
End Sub

End Module 
```

在 C# 中：

```
using Microsoft.Office.Interop.Word;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            _Application word = new Application();
            _Document doc = word.Documents.Open(@"C:\test.doc");
            doc.SaveAs(@"C:\test.xps", WdSaveFormat.wdFormatXPS);
            word.Quit();
        }
    }
} 
```

# dojo - 如何以声明方式右对齐 Dojo 数据网格中的列

> ID：11541815
> 
> 赞同：0
> 
> 时间：2012-07-18T12:50:52.353
> 
> 标签：dojo, dojox.grid.datagrid

我有一个使用 html 以声明方式创建的 Dojo 数据网格。我需要右对齐一列。我尝试了以下两种方法，我无法让它工作

**试试 1**

在下面的例子中，他`align="right"`被忽略了，但是`width="100px"`被添加到每个`<td>`元素的样式中

```
<table data-dojo-type="dojox.grid.DataGrid" style="height:100px;">
<thead>
   <tr>
    <th field="col1" width="auto">Col 1</th>
    <th field="col2" width="100px" align="right">Col 2</th>
    <th field="col3" width="100px" align="right">Col 3</th>
   </tr>
</thead>
</table> 
```

**试试 2**

在下面的例子`style="text-align:right;"`中似乎完全被dojo忽略了

```
<table data-dojo-type="dojox.grid.DataGrid" style="height:100px;">
<thead>
   <tr>
    <th field="col1" width="auto">Col 1</th>
    <th field="col2" width="100px" style="text-align:right;">Col 2</th>
    <th field="col3" width="100px" style="text-align:right;">Col 3</th>
   </tr>
</thead>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:45:43.267

您需要在元素上使用`styles`属性。`<th>`顾名思义，此属性指定将哪些 css 样式应用于`<td>`该列的 s。

示例标记：

```
<body class="claro">
    <table data-dojo-type="dojox.grid.DataGrid" style="width:100%" store="myStore">
        <thead>
            <tr>
                <th field="col1" width="auto" align="left">Col 1</th>
                <th field="col2"  width="100px" align="left">Col 2</th>
                <th field="col3" width="100px" align="right" styles="text-align:right;">Col 3</th>
           </tr>
        </thead>
    </table>
</body> 
```

示例 js：

```
dojo.require('dojox.grid.DataGrid');
dojo.require('dojo.parser');
dojo.require('dojo.data.ItemFileWriteStore');
dojo.ready(function() {
    var data = {
        identifier: 'id',
        items: []
    };
    var data_list = [
        {
        col1: "normal",
        col2: false,
        col3: 29.91},
    {
        col1: "important",
        col2: false,
        col3: 9.33},
    {
        col1: "important",
        col2: false,
        col3: 19.34}
    ];
    var rows = 60;
    for (var i = 0, l = data_list.length; i < rows; i++) {
        data.items.push(dojo.mixin({
            id: i + 1
        }, data_list[i % l]));
    }
    myStore = new dojo.data.ItemFileWriteStore({
        data: data
    });

    dojo.parser.parse();
});​ 
```

[http://jsfiddle.net/jrkeller/3h6MN/1/](http://jsfiddle.net/jrkeller/3h6MN/1/)

[我在这里](https://dojotoolkit.org/documentation/tutorials/1.7/working_grid/)的“使用网格”教程中发现了这个属性

# php - drupal数据库连接查询

> ID：11541820
> 
> 赞同：4
> 
> 时间：2012-07-18T12:51:08.607
> 
> 标签：php, database, drupal, drupal-7

我正在尝试使用以下代码从同一数据库查询中的两个数据库表中检索信息：

```
$query  =   db_select('webform_questionnaire_fieldset', 'wqf');
                        $query->join('webform_component', 'wc', 'wqf.cid = wc.cid');
                        $query->fields('wqf')
                        ->fields('wc')
                        ->condition('wqf.cid', $cid, '=')
                        ->condition('wqf.nid', $nid, '=')
                        ->condition('wqf.cid', 'wc.cid', '=')
                        ->execute()
                        ->fetchAll(); 
```

我得到的输出与数据库数据不相似，但看起来更像数据库元数据，如下所示：

```
SelectQuery::__set_state(array(
   'fields' => 
  array (
  ),
   'expressions' => 
  array (
  ),
   'tables' => 
  array (
    'wqf' => 
    array (
      'join type' => NULL,
      'table' => 'webform_questionnaire_fieldset',
      'alias' => 'wqf',
      'condition' => NULL,
      'arguments' => 
      array (
      ),
      'all_fields' => true,
    ),
    'wc' => 
    array (
      'join type' => 'INNER',
      'table' => 'webform_component',
      'alias' => 'wc',
      'condition' => NULL,
      'arguments' => 
      array (
      ),
      'all_fields' => true,
    ),
  ),
   'order' => 
  array (
  ), ...... 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T14:13:24.077

添加`condition`到 join 语句。喜欢`on table1.id = table2.id`，然后添加`$result = $query->execute()->fetchAll();`

```
$query = db_select('webform_questionnaire_fieldset', 'wqf');
$query->join('webform_component', 'wc', 'wqf.cid = wc.cid');
$query->fields('wqf')
    ->fields('wc')
    ->condition('wqf.cid', $cid, '=')
    ->condition('wqf.nid', $nid, '=')
    ->condition('wqf.cid', 'wc.cid', '=');
$result = $query->execute()->fetchAll(); 
```

希望这会有所帮助……穆罕默德。

# php - PHP-Script 不适用于其他人 - 空白画布

> ID：11541822
> 
> 赞同：0
> 
> 时间：2012-07-18T12:51:13.053
> 
> 标签：php, facebook

我得到了一个非常有趣的错误：我的脚本在我的帐户下运行良好。但是在所有（！）其他帐户上，我只看到一个空白画布。这是我的脚本：

```
<?php
require_once 'src/facebook.php'; 
$app_id = "xx";
$app_secret = "xx";  
$facebook = new Facebook(array(  'appId' => $app_id,  'secret' => $app_secret,  'cookie' => true  ));    
$signed_request = $facebook -> getSignedRequest();    
$locale = $signed_request["user"]["locale"];
if($locale =="de_DE") {
echo "<img src='deutsch.jpg'>";}
else {
echo "<img src='englisch.jpg'>";}
?> 
```

其实我找不到失败的地方。我是否必须更改任何权限或我的画布 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:02:05.030

1.  您的应用可能处于沙盒模式（在“设置 > 高级”下的开发者应用中）。这意味着只有应用程序的开发人员（或测试人员）才能看到它。
2.  PHP 错误 - 这可能是因为 $signed_request["user"]["locale"] 不存在。尝试添加

    ```
    error_reporting(E_ALL);
    ini_set('display_errors', "1"); 
    ```

    到脚本的顶部，然后查看其他用户看到的内容。

# unix - 将文件从多个文件夹移动到一个目标文件夹

> ID：11541823
> 
> 赞同：0
> 
> 时间：2012-07-18T12:51:14.317
> 
> 标签：unix

亲爱的 Unix 用户，例如，我有 6 个文件夹，每个文件夹中都有一个名为 file.txt 的文件。我拥有的所有文件夹中的文件名完全相同。我想将所有名为 file.txt 的文件从 6 个文件夹中的每一个移动到一个包含所有文件的通用文件夹中，因为我想最终连接这些文件。如何做到这一点？

输入：
文件夹1：file.txt，文件夹2：file.txt，文件夹3：file.txt

输出：final_folder：file.txt、file.txt、file.txt

谢谢

埃莱奥诺拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:57:47.753

同一目录中不能有多个同名文件。如果您打算最终连接所有文件，而不是一次完成所有文件？

例如，以下命令将连接`file.txt`目录中名称以 开头的所有文件`folder`并将输出写入`new_file.txt`：

```
cat folder*/file.txt > new_file.txt 
```

如果要在多级子目录中包含文件，可以考虑使用[`find`](http://unixhelp.ed.ac.uk/CGI/man-cgi?find). `file.txt`以下将在当前目录（和所有子目录）中递归搜索并将其内容连接到`new_file.txt`.

```
find . -name file.txt -exec cat {} \; > new_file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T13:02:13.867

它们不能在一个目录中都具有相同的名称

我会先查找，然后将猫放入文件中

```
 cat `find .name 'file' -print` path/newFile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T13:31:44.553

这通过重命名为带有 inodenumber 前缀的名称来处理重复名称的冲突。该功能不是严格需要的。

对于带有空格或制表符或更糟的文件名，此方法可能会失败。（但是在名字中加入空格和制表符的人应该失去......）

```
#!/bin/sh

DIRS="dir1 dir2 dir3 dir4"
TARGET=$HOME/txt

move_one()
{
  p=$1         # Full pathname
  t=$2         # Target directory
  i=$3         # Inode number from sourcefile
  d=`dirname $p`
  b=`basename $p`
  #echo "p=$p"
  #echo "d=$d" # the path-prefix from the source file
  #echo "b=$b" # The name part of the source file
  #echo "t=$t"
  #echo "i=$i"
# After checking, remove the echo below for more fun
  echo mv -i $p $t/$i$b
}
                                        # inodenumber+name
find $DIRS -name \*txt -type f -ls | awk '{print $1," ",$11}' | (
        while read i p; do
        # echo "i=$i"
        # echo "p=$p"
        move_one $p $TARGET $i
        done
        )
#eof 
```

# python - 将 Python 列表转换为 R 数值向量

> ID：11541824
> 
> 赞同：0
> 
> 时间：2012-07-18T12:51:16.253
> 
> 标签：python, r, vector, rpy2

我需要将我的数据拟合到 Beta 分布中并检索*alpha*参数。

我一直在用 Python 编写代码，但 SciPy 中似乎没有任何 beta 拟合函数。要么我在我不太熟悉的 Matlab 中做所有事情，要么在带有 R 及其`fitdistr`功能的 Python 中做所有事情。所以我选择了后者。

```
from rpy2.robjects.packages import importr

MASS = importr('MASS') 
```

然后我在 [0,1) 范围内获取我的浮点数向量，并将其传递给`fitdistr`：

```
myVector = myVector.tolist()
MASS.fitdistr(myVector,"beta") 
```

太糟糕了，它需要某种其他向量。rpy 和 rpy2 不是应该为我做所有的转换吗？

```
Error in function (x, densfun, start, ...)  : 
  'x' must be a non-empty numeric vector
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/rpy2/robjects/functions.py", line 82, in __call__
    return super(SignatureTranslatedFunction, self).__call__(*args, **kwargs)
  File "/usr/lib/python2.7/dist-packages/rpy2/robjects/functions.py", line 34, in __call__
    res = super(Function, self).__call__(*new_args, **new_kwargs)
rpy2.rinterface.RRuntimeError: Error in function (x, densfun, start, ...)  : 
  'x' must be a non-empty numeric vector 
```

我需要在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:05:58.113

答案就在这里： [Converting python objects for rpy2](https://stackoverflow.com/questions/2447454/converting-python-objects-for-rpy2)

```
import rpy2.robjects.numpy2ri
rpy2.robjects.numpy2ri.activate() 
```

请参阅[http://rpy.sourceforge.net/rpy2/doc/html/numpy.html](http://rpy.sourceforge.net/rpy2/doc/html/numpy.html)：

# sql-server - 获取多行的sql max datetime

> ID：11541825
> 
> 赞同：-3
> 
> 时间：2012-07-18T12:51:22.090
> 
> 标签：sql-server, sql-server-2008-r2, aggregate-functions, max

此语句返回 2 行：

```
SELECT ts.UnitId,ts.TeststepId, MAX(ts.CreatedAt)as CreatedAt 
FROM Teststep ts
INNER JOIN Unit u ON ts.UnitId = u.UnitId
Where u.TemplateId = 2 
Group by TeststepId, ts.UnitId 
```

我怎样才能得到日期最高的一行`CreatedAt`？我应该区分`unitId`吗？

**更新**

亚伦和弗莱姆要求了解更多信息：

```
1 Template has N Units
1 Unit has N Teststeps 
```

Teststep 表的聚集主键是 TeststepId 和 CreatedAt。

```
[TeststepId] [int] NOT NULL,

[Name] [nvarchar](50) NOT NULL,

[PreCondition] [nvarchar](500) NOT NULL,

[TestInstruction] [nvarchar](500) NOT NULL,

[ExpectedResult] [nvarchar](500) NOT NULL,

[CreatedAt] [datetime] NOT NULL,

[CreatedBy] [nvarchar](50) NOT NULL,

[UnitId] [int] NOT NULL, 
```

测试**步骤**表

Teststep 表中具有最重要字段的示例数据可能是：

![在此处输入图像描述](../Images/b3aa250e38f34d9cd42afeeea0b9d33a.png)

测试步骤显示历史测试步骤。从上图中您可以看到 TeststepId = 4 存在 2 次。历史版本（58 秒）和当前版本（59 秒）。

我只想在“当前”视图中显示 59 秒的 teststepid 4。

**更新 2**

我只想在 59 秒内获得 teststepid 4 并且所有其他 teststepId 都`s with their current date. If there are only rows with different teststepid`采用这些，因为它们是当前行。

我正要更改我的集成测试并找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:55:23.163

```
SELECT TOP (1) ts.UnitId, ts.TeststepId, ts.CreatedAt 
  FROM dbo.Teststep AS ts
  INNER JOIN Unit AS u 
  ON ts.UnitId = u.UnitId
  WHERE u.TemplateId = 2 
  ORDER BY ts.CreatedAt DESC; 
```

如果您希望每个 UnitId 和 SQL Server 2005+ 有一行，则：

```
;WITH x AS 
(
  SELECT ts.UnitId, ts.TestStepId, ts.CreatedAt,
    rn = ROW_NUMBER() OVER (PARTITION BY ts.UnitId ORDER BY ts.CreatedAt DESC)
  FROM dbo.Teststep AS ts
  INNER JOIN Unit AS u 
  ON ts.UnitId = u.UnitId
  WHERE u.TemplateId = 2 
)
SELECT UnitId, TestStepId, CreatedAt
  FROM x
  WHERE rn = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:58:42.357

另一种选择

试试这个：

```
WITH Data AS
(
    SELECT ts.UnitId, ts.TeststepId, ROW_NUMBER() OVER(PARTITION BY UnitId ORDER BY ts.CreatedAt DESC) Position
        FROM Teststep ts INNER JOIN Unit u ON ts.UnitId = u.UnitId
     WHERE u.TemplateId = 2 
)
SELECT *
  FROM Data
 WHERE Position = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:55:36.690

```
SELECT TOP 1 x.* FROM
    (SELECT ts.UnitId,ts.TeststepId, MAX(ts.CreatedAt)as CreatedAt FROM Teststep ts 
      INNER JOIN Unit u ON ts.UnitId = u.UnitId 
      Where u.TemplateId = 2  
      Group by TeststepId, ts.UnitId
      ORDER BY ts.CreatedAt DESC) as [x] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:58:55.327

其他方式：

```
with cte as (
SELECT ts.UnitId,ts.TeststepId, MAX(ts.CreatedAt)as CreatedAt 
FROM Teststep ts
INNER JOIN Unit u ON ts.UnitId = u.UnitId
Where u.TemplateId = 2 
Group by TeststepId, ts.UnitId)
select ts.UnitId,ts.TeststepId, CreatedAt from cte where CreatedAt
 =(select MAX(CreatedAt) from cte) 
```

# algorithm - 从集合中选择元素，概率与元素值成正比

> ID：11541831
> 
> 赞同：2
> 
> 时间：2012-07-18T12:51:38.390
> 
> 标签：algorithm, graph, selection, probability, random-sample

我有一个顶点列表，我必须从中选择一个概率与 deg(v) 成比例的随机顶点，其中 deg(v) 是顶点度数。此操作的伪代码如下所示：

```
Select u ∈ L with probability deg(u) / Sigma ∀v∈L deg(v) 
```

其中 u 是随机选择的顶点，L 是顶点列表，v 是 L 中的一个顶点。问题是我不明白该怎么做。有人可以向我解释一下，如何获得这个随机顶点。如果有人可以向我解释这一点，我将不胜感激。伪代码将更加感激；）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:55:30.840

`Sum(d(v))`最简单的解决方案是为每个填充一个 size 列表`v`- 您将`v`在列表的**确切** `d(v)`条目中保存一个引用。

`x`现在，在 range 中选择一个均匀分布的变量`[0,Sum(d(v)))`，然后返回`list[x]`

这种方法需要`O(n^2)`空间（因为对于简单的图`Sigma(d(v)) is O(n^2)`），初始化时间也是`O(n^2)`，但只进行一次。假设您要多次选择一个顶点，每次选择它时，除了第一次之外，将是`O(1)`[假设`O(1)`随机化函数和随机访问列表]。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T16:19:07.140

另一种解决方案；仍然很简单，不需要任何预处理或额外内存（如果您在图中有边列表）：

选择一条随机边，然后随机选择它连接的节点之一；那是你的随机顶点。概率与顶点度成正比 - 对于每个节点，概率为

```
P(v) = sum(P(e: e uses v))/2 = |{e: e uses v}|/(2*|E|) = deg(v)/(2*|E|) 
```

# node.js - 如何获取 websocket 连接的（Express 的）sessionID

> ID：11541835
> 
> 赞同：16
> 
> 时间：2012-07-18T12:51:45.160
> 
> 标签：node.js, websocket, express

我在`npm install ws`Express 运行的同一端口上使用 WebSockets。

我想从刚刚建立并升级到 WebSocket 的 HTTP 连接中获取关联的“sessionID”。

```
// start express listening
server.listen(conf.server.port, conf.server.host);

var WebSocketServer = require('ws').Server
  , wss = new WebSocketServer({server: server});

wss.on('connection', function(ws) {
    var sessionID = // how do I get this?
    ws.on('message', function(message) {
        console.log('received: %s', message);
    });
    ws.send('something');
}); 
```

如何才能做到这一点？

（我目前通过在页面中发送 sessionID 来解决这个问题，但这很难看。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-18T13:45:15.670

1.  解析 cookie
2.  获取会话 ID
3.  获取会话数据

    ```
    var express = require('express');
    var parseCookie = express.cookieParser();
    var MemoryStore = express.session.MemoryStore;

    var store = new MemoryStore();

    app.configure(function() {
        app.use(express.session({ store: store, secret: '123456', key: 'sid' }));
    });

    wss.on('connection', function(ws) {
        parseCookie(ws.upgradeReq, null, function(err) {
            var sessionID = ws.upgradeReq.cookies['sid'];
            store.get(sessionID, function(err, session) {
                // session
            });
        }); 

        ws.on('message', function(message) {
            console.log('received: %s', message);
        });
        ws.send('something');
    }); 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-01T18:35:03.873

这是一场噩梦，终于使用签名的 cookie 为自己工作了！

设置您的存储（示例内存存储）：

```
var MemoryStore = express.session.MemoryStore;
store = new MemoryStore(); 
```

在应用程序/服务器 js 文件中将 parseCookie 公开为全局（如果您在其他模块中需要它）：

```
app.use(parseCookie = express.cookieParser('secret')); 
```

现在设置套接字：

```
//this method gets called later
var ensureAuthenticatedSocket = function(handshake, callback) {
    cookie = cookieParser(handshake, null, function(err) {
        var sessionID = handshake.signedCookies['sid'];
        store.get(sessionID, function(err, session) {
            callback(err, session);
        });
    });
};
//listen time
io = io.listen(server);
//configure authentication
io.configure(function() {
    io.set('authorization', function(handshake, callback) {
        //call the method with handshake as parameter, wait for callback
        ensureAuthenticatedSocket(handshake, function(err, session) {
            if (!err && session) {
                //no error + found session = wicked!
                callback(null, true);
            } else {
                callback(null, false);
            }
        });
    });
});
...
//more socket code 
```

# c++ - 分段树 2D，矩形的总和

> ID：11541837
> 
> 赞同：2
> 
> 时间：2012-07-18T12:51:52.013
> 
> 标签：c++, data-structures, tree

最后，我真的很想学习和实现分段树 2D。它困扰着我。我知道分段树的一维情况，但不知何故我无法用二维来管理。问题是我有一个矩阵 1024x1024 （所以我使用数组 [2048][2048] 作为树），我想实现两个操作：

1.  无效插入（int x，int y，int val）；- 将值 val 分配给矩阵的元素 [x][y]
2.  整数查询（整数 x1，整数 y1，整数 x2，整数 y2）；- 返回矩形矩阵中元素的总和 (x1,y1,x2,y2)

到目前为止，我写了这个：

```
const int M=1024;
int tree[2*M][2*M];

void insert(int x, int y, int val) {
  int vx=M+x, vy=M+y;
  tree[vx][vy]=val;
  while(vy!=1) {
    vy/=2;
    tree[vx][vy]=tree[vx][2*vy]+tree[vx][2*vy+1];
  }

  while(vx!=1) {
    vy=M+y;
    vx/=2;
    while(vy!=1) {
      vy/=2;
      tree[vx][vy]=tree[2*vx][2*vy]+tree[2*vx+1][2*vy+1];
    }
  }
}

int query(int x1, int y1, int x2, int y2) {
  int vx1=M+x1, vy1=M+y1, vx2=M+x2, vy2=M+y2;  
  int res=tree[vx1][vy1];
  if(vx1!=vx2 || vy1!=vy2) res+=tree[vx2][vy2];
  while(vx1/2 != vx2/2) {
    vy1=M+y1; vy2=M+y2;
    while(vy1/2 != vy2/2) {
      if(vx1%2==0 && vy1%2==0) res+=tree[vx1+1][vy1+1];
      if(vx2%2==1 && vy2%2==1) res+=tree[vx2-1][vy2-1]; 
      vy1/=2; vy2/=2;
    }
    vx1/=2; vx2/=2;
  }

  return res;
} 
```

但它不能正常工作。说，对于：

插入（5,5,1）；查询（0,5,1000,5）；

它返回0，而不是1。我认为问题出在查询中（我希望插入没问题），我不完全理解这个操作的想法。在 1D 中我没有任何问题，但对我来说，这种情况很难想象。

您能帮我正确实施吗？我将非常感谢您的帮助。

**编辑：**也许最好展示我如何在一维中做到这一点，这段代码有效，我认为这个想法很简单：

```
const int M=1024;
int tree[2*M]; 

void insert(int x, int val) {
  int v=M+x;
  tree[v]=val;
  while(v!=1) {
    v/=2;
    tree[v]=tree[2*v]+tree[2*v+1];
  } 
}

int query(int a, int b) {
  int va=M+a, vb=M+b;
  int res=tree[va];
  if(va!=vb) res+=tree[vb];
  while(va/2 != vb/2) {
    if(va%2==0) res+=tree[va+1];
    if(vb%2==1) res+=tree[vb-1];
    va/=2; vb/=2;
  }
  return res;  
} 
```

但不幸的是我不能在 2D 中应用它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:22:35.900

好吧，您的案例确实返回 0 的原因是只执行了这部分代码：

```
int res=tree[vx1][vy1];
if(vx1!=vx2 || vy1!=vy2)
    res+=tree[vx2][vy2]; 
```

在这里，`res`是 0，因为`tree[vx1][vy1]`和`tree[vx2][vy2]`在您的情况下都为零。

这部分不会更改 res 因为条件从未满足：

```
if(vx1%2==0 && vy1%2==0)
    res+=tree[vx1+1][vy1+1];
if(vx2%2==1 && vy2%2==1)
    res+=tree[vx2-1][vy2-1]; 
```

所以， res 值不会改变，仍然是 0。

现在，关于整个事情。您正在以一种非常奇怪的方式构建一个段树，实际上，您根本没有构建任何树，并且很难理解您在使用该代码做什么。通常，您希望将二叉树（即段树）实现为链表，其中的节点类似于：

```
struct node
{
    int data;
    node *left;        
    node *right;
}; 
```

我可以建议您在[此处](http://www.dreamincode.net/code/snippet780.htm)、[此处](http://www.topcoder.com/tc?d1=tutorials&d2=lowestCommonAncestor&module=Static)、[此处](http://www.google.com/url?sa=t&rct=j&q=segment%20tree&source=web&cd=2&ved=0CGEQFjAB&url=http://wwwisg.cs.uni-magdeburg.de/ag/lehre/SS2009/GDS/slides/S11.pdf&ei=VLgGUPDiDOmG4gTzkbGNCQ&usg=AFQjCNHJkFXG8PplJxbc1ZrS0JRrGWxgBA&cad=rja)、[此处](https://stackoverflow.com/questions/5407814/c-interval-tree-implementation)和[此处](http://comeoncodeon.wordpress.com/2009/09/15/segment-trees/)查看有关二叉树和区间树的信息和实现。

# spring - 使用 Spring Servet 为 REST API 处理创建异步线程

> ID：11541840
> 
> 赞同：1
> 
> 时间：2012-07-18T12:51:59.173
> 
> 标签：spring, rest, tomcat, asynchronous, fire-and-forget

我想为我的几个 REST API 调用创建即发即弃模型，其中服务器将接受端点上的请求，在释放客户端连接时将对象发送到内部服务进行异步处理。我正在使用 Spring 3 MVC 和 Tomcat 6。我认为在这个阶段引入像 ActiveMQ 或 RabbitMQ 这样的完整消息传递系统对于我的项目来说太过分了。在 tomcat 和 Spring 中为我的服务创建异步处理（线程）是否有任何其他安全的方法？恐怕在tomcat里面做线程编程会破坏它的完整性。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:56:59.017

我不确定您是否可以在控制器上使用@Async，但您可以在服务中[执行任务执行和调度](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/scheduling.html)并从您的控制器调用它。

是的，关于在 tomcat 中使用线程不是一个好的解决方案。

# java - 用于构建 VOIP 电话呼叫的 Java SipServlet（在计算机和模拟电话/移动设备之间）

> ID：11541847
> 
> 赞同：2
> 
> 时间：2012-07-18T12:52:30.840
> 
> 标签：java, android, servlets, sip, voip

我对构建实际上可用于使用 SIP 或 H.323 呼叫模拟电话的 VOIP 很感兴趣。但我的问题是，是否可以使用 SIP 或 H.323 构建计算机到电话和电话到计算机的 VOIP 电话呼叫？否则，完成此任务的最常见方法是什么？我已经成功构建了一个应用程序，我可以使用套接字在两台计算机之间传输语音，我的猜测是构建 SIP 以与模拟电话通信非常复杂（即使我阅读了一些文档，我仍然没有完全理解它) 并且具有与普通套接字通信应用程序完全不同的架构。那么是否可以使用 SIP servlet 或 H.323 来实现我的目标？如果你有建造它的经验，你能分享一些你和我一起使用过的参考资料或文档吗？我将非常感谢它，我很确定它对所有其他期待构建与我类似的应用程序的人都有帮助。

======================================

按照[java voip开头](https://stackoverflow.com/questions/2321582/begin-with-java-voip)

一个家伙建议使用像[http://public.ifbyphone.com/](http://public.ifbyphone.com/)或[https://www.tropo.com/home.jsp](https://www.tropo.com/home.jsp)这样的 API ，但我有强烈的感觉，这些人会要求我付钱来使用他们的 API，并且我想做的只是自己构建它并仅出于目的进行试用，而根本不将其商业化。我找到了一个相当不错的与 VOIP 相关的东西，称为 VoiceXML，但它与我已经提到的 API 或库是同一种 API 或库吗？VoiceXML 到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:06:23.830

你实际上有两个问题：

1.  使用软件电话调用 SIP servlet。通过 Mobicents/Sailfin 完成它非常简单。下载其中任何一个并查找点击通话示例[http://www.mobicents.org/facebook-c2c.html](http://www.mobicents.org/facebook-c2c.html)。为了收听媒体，您必须使用媒体服务器，将音频/视频发送到您的软件电话。

2.  VXML 是您的服务器在您调用它时将解释的场景（想想网上银行、预付费充值等的菜单）。有关详细信息，请参阅 Voxeo 的[http://www.vxml.org](http://www.vxml.org)（顺便说一句：您可以在他们的网站上创建一个帐户并通过使用 Skype 或 SIP 调用它们来测试您的 vxml 应用程序（[http://www.voxeo.com/developers/evolution -ivr-developer.jsp](http://www.voxeo.com/developers/evolution-ivr-developer.jsp)）。

# ios - iOS通过wifi上传文件到应用程序

> ID：11541849
> 
> 赞同：1
> 
> 时间：2012-07-18T12:52:34.653
> 
> 标签：ios, file-upload

我正在开发一个需要支持通过本地 wifi 网络传输文件的应用程序，就像 goodread 应用程序一样。

这个想法是 iPhone 应用程序创建一个 HTTP 服务器，可通过显示表单的 Web 浏览器访问，以将文件上传到应用程序。

1.  在我的应用程序中按 wifi 传输选项
2.  访问一个 ip 地址，例如：192.168.0.12:port
3.  使用该页面将文件上传到我的应用程序

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T05:47:07.070

示例代码链接：

通过网络上传到 iPhone：[https ://plink.ucloud.com/public_link/link/9ba125f02169e4e3](https://plink.ucloud.com/public_link/link/9ba125f02169e4e3)

通过 ftp 上传到 iPhone：[https ://plink.ucloud.com/public_link/link/9c53e777455a6085](https://plink.ucloud.com/public_link/link/9c53e777455a6085)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:34:14.687

如果您正在寻找易于集成的 Web 服务器，请查看 Mongoose：

[http://code.google.com/p/mongoose/](http://code.google.com/p/mongoose/)

其他选项可能是使用 Bonjour 或只是让用户通过 iTunes 将内容放入应用程序的收件箱。

# c# - 如何让我的客户将他们自己的域重定向到我的服务器并识别他们？

> ID：11541855
> 
> 赞同：0
> 
> 时间：2012-07-18T12:52:45.847
> 
> 标签：c#, asp.net-mvc, dns, iis-7.5, nameservers

我有一个问题找不到答案，因为我不知道如何用英语搜索它:)

如何让我的客户将他们自己的域重定向到我的服务器并识别他们？就像WordPress。

例如，我创建了一个简单的 CMS 系统，客户可以注册并拥有自己的页面，例如 john.mysite.com。但是如果他们想使用他们的域，我是否必须在 Plesk 上创建所有这些域？顺便说一句，我在 Plesk 中使用 IIS 7.5。

我也不想使用 iframe。

例子;

> john.mywebsite.com/categories-150.html --> www.johnswebsite.com/categories-150.html

但它应该使用相同的代码。为此，我不必复制所有源代码并创建单独的域。

当然，我可以让他们将他们的 ns 更改为我的服务器并指定一个 A 记录，但我如何通过代码识别它？（C# ASP.NET MVC）我假设我可以通过数据库搜索域名并获取 ID，但是如何传递域名？

我希望你能够明白 ：）

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:57:05.130

您的问题对我来说不是很清楚，但我会尽力帮助您

首先您需要更改 DNS 设置并指向您的 IP

然后在 iis 中创建一个站点并将该域添加为主机头

并获取您可以使用的请求的网址

```
Request.Url or look in the Request.ServerVariables["SERVER_NAME"] 
```

有关服务器变量的更多信息 [http://msdn.microsoft.com/en-us/library/ms524602(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524602(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:14:37.303

正如我所看到的，这是一些字符串操作并使用字典来获取您想要的内容。

例如：

```
// preparation of the dictionary to map your sub domain to the clients website
IDictionary<String, String> clientRedirect = new Dictionary<String, String>();
clientRedirect.Add("john", "www.johnswebsite.com");

...

// actual processing incoming request
String strToRedirect = @"john.mywebsite.com/categories-150.html";
String relPath = strToRedirect.Substring(strToRedirect.IndexOf(@"/")); // = "/categories-150.html"
String subdomain = strToRedirect.Substring(0, strToRedirect.IndexOf(@"/"));
subdomain = subdomain.Replace(@".mywebsite.com", ""); // = "john"

String newUrl = clientRedirect[subdomain] + relPath; // = "www.johnswebsite.com/categories-150.html"

WebRequest request = WebRequest.Create(newURL); // use the URL 
```

或者你的意思是不同的？

# jbpm - 如何从外部源在 jbpm 5.3 中启动流程实例？

> ID：11541856
> 
> 赞同：0
> 
> 时间：2012-07-18T12:52:46.427
> 
> 标签：jbpm

成功登录到我的应用程序后，我想通过单击按钮或图像来运行 jBPM 流程实例。

谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:01:57.670

有什么链接？为了启动一个流程，您应该使用 jBPM API，例如，如果您在 JSP 中有一个 Web 应用程序，您将需要创建一个使用 jBPM API 的 servlet。您可以按照自己想要的方式灵活地进行操作。

干杯

# android - 在 android 设备的顶部和软键盘之间出现一个编辑文本

> ID：11541862
> 
> 赞同：2
> 
> 时间：2012-07-18T12:53:03.807
> 
> 标签：android, focus, scrollview

我有一个包含许多 ViewsStubs 的滚动视图布局，这些视图存根会根据用户操作（例如......回答第一个问题会出现第二个问题和答案字段（editText）而膨胀（显示））

我的问题是在回答第一个问题并单击提交后，下一个问题可见，但答案字段隐藏在软键盘下......用户看不到他正在输入的内容。

我想要的是任何新显示的editText/微调器/复选框必须出现在屏幕顶部（动态滚动到这些视图）。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:28:38.697

以我的代码为例，您可以执行以下操作：将**XML**设置为：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrlv"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:background="#123789" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#1188ff" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_below="@+id/headerlayout"
                android:background="#456789" >

                <EditText
                    android:id="@+id/etemail"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                    android:layout_marginRight="20dp"
                    android:layout_marginTop="40dp"
                    android:hint="Text 1"
                    android:maxLines="3" />

                <EditText
                    android:id="@+id/etpassword"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/etemail"
                    android:layout_alignRight="@+id/etemail"
                    android:layout_below="@+id/etemail"
                    android:hint="Text 2"
                    android:inputType="textPassword"
                    android:maxLines="3" />

                <EditText
                    android:id="@+id/etusername"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/etemail"
                    android:layout_alignRight="@+id/etemail"
                    android:layout_below="@+id/etpassword"
                    android:hint="Text 3"
                    android:maxLines="3" />

                <EditText
                    android:id="@+id/etphone"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/etemail"
                    android:layout_alignRight="@+id/etemail"
                    android:layout_below="@+id/etusername"
                    android:hint="Text 4"
                    android:inputType="text"
                    android:maxLines="5" />

                <CheckBox
                    android:id="@+id/chkterms"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/etemail"
                    android:layout_alignRight="@+id/etemail"
                    android:layout_below="@+id/etphone"
                    android:layout_marginTop="10dp"
                    android:text="Conditions Aplly"
                    android:textColor="@android:color/black" />

                <Button
                    android:id="@+id/btnlogin"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/chkterms"
                    android:layout_centerHorizontal="true"
                    android:layout_marginTop="10dp"
                    android:text="Login" />
            </RelativeLayout>
        </LinearLayout>
    </ScrollView>

</RelativeLayout> 
```

然后代码：

[1] 获取设备的屏幕分辨率：Height, Width

[2] 对 EditText 进行 onFocusChange

[3] 在那，如果您的 EditText 获得焦点，那么

[4] 获取 EditText 的底部，如果底部大于 (ScreenHeight / 3) 则

[5] 滚动 Your_ScrollView 到 (left, (ScreenHeight/3));

```
public class MainActivity extends Activity implements OnClickListener{
    private EditText etEmail, etPassword, etUserName, etPhoneNo;
    private CheckBox chkTerms;
    private Button btnLogin;
    ScrollView scrlv;

    int sw, sh, left, bottom;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        scrlv = (ScrollView) findViewById(R.id.scrlv);

        etEmail = (EditText) findViewById(R.id.etemail);
        etPassword = (EditText) findViewById(R.id.etpassword);
        etUserName = (EditText) findViewById(R.id.etusername);
        etPhoneNo = (EditText) findViewById(R.id.etphone);

        DisplayMetrics dm = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(dm);
        sw = dm.widthPixels;
        sh = dm.heightPixels;
        System.out.println("Screen Width = " + sw);
        System.out.println("Screen Height = " + sh);

        chkTerms = (CheckBox) findViewById(R.id.chkterms);

        btnLogin = (Button) findViewById(R.id.btnlogin);
        btnLogin.setOnClickListener(this);

        etUserName.setOnFocusChangeListener(new OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if(etUserName.hasFocus()) {
                    left = etUserName.getLeft();
                    bottom = etUserName.getTop();
                    if (bottom > sh / 3) {
                        System.out.println("Umn Left :: " + left);
                        System.out.println("Umn Bottom :: " + bottom);
                        scrlv.scrollTo(left, (sh/3));
                        left = etUserName.getLeft();
                        bottom = etUserName.getTop();
                        System.out.println("Umn Left :: " + left);
                        System.out.println("Unm Bottom :: " + bottom);
                    }
                }
            }
        });

        etPhoneNo.setOnFocusChangeListener(new OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if(etPhoneNo.hasFocus()) {
                    left = etPhoneNo.getLeft();
                    bottom = etPhoneNo.getTop();
                    if (bottom > sh / 3) {
                        System.out.println("Phno Left :: " + left);
                        System.out.println("Phno Bottom :: " + bottom);
                        scrlv.scrollTo(0, (sh/3));
                        left = etPhoneNo.getLeft();
                        bottom = etPhoneNo.getTop();
                        System.out.println("Phno Left :: " + left);
                        System.out.println("Phno Bottom :: " + bottom);
                    }
                }
            }
        });

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:00:58.823

您可以尝试 requestRectangleOnScreen 方法以确保您的视图可见。请参阅：http: [//developer.android.com/reference/android/view/View.html#requestRectangleOnScreen%28android.graphics.Rect%29](http://developer.android.com/reference/android/view/View.html#requestRectangleOnScreen%28android.graphics.Rect%29)

```
public boolean requestRectangleOnScreen (Rect rectangle)
Since: API Level 1

Request that a rectangle of this view be visible on the screen, scrolling if necessary just enough.

A View should call this if it maintains some notion of which part of its content is interesting. For example, a text editing view should call this when its cursor moves.
Parameters
rectangle   The rectangle.
Returns

    Whether any parent scrolled. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:15:52.500

在您的布局中，您可以尝试以下一些操作：

1) 设置属性 android:fillViewPort="true"

2）将编辑文本的权重设置为“1”（假设没有其他对象的权重为 1）

3) 你的滚动视图是否包含你所有的文本视图/编辑文本？尝试使用该 fillViewPort 属性将整个布局包围在滚动视图中可能是值得的。

这是滚动视图及其复杂性的一个很好的链接：

[http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T14:21:35.000

使用以下布局应该在显示软键盘时将底部 EditText 向上移动（在某些时候调用 view.setVisibility(true)）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ListView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/answers" />

    <EditText
        android:id="@+id/answers"
        android:layout_width="fill_parent"
        android:layout_height="200dp"
        android:layout_alignParentBottom="true"
        android:visibility="invisible"/>

</RelativeLayout> 
```

# excel - 用 CTRL+A 快捷键模拟选择块的 VBA 代码是什么？

> ID：11541863
> 
> 赞同：15
> 
> 时间：2012-07-18T12:53:04.947
> 
> 标签：excel, range, excel-2010, vba

在早期版本的 Excel 中，在工作表中按 CTRL+A 会逐字选择所有单元格。在 Excel 2010（不确定 2007 或 2003）中，我注意到如果您在包含值的单元格块中按 CTRL+A，它似乎知道只选择该块中的单元格。例如，如果 A1:D10 范围内的所有单元格都包含值，并且当活动单元格在该范围内时按 CTRL+A，它将仅选择 A1:D10。如果再次按 CTRL+A，那么它才会真正选择工作表中的所有单元格。

所以我录制了一个宏来查看执行此操作时生成的宏代码，但它实际上是`Range("A1:D10").Select`在我按下 CTRL+A 时写入的。这是限制性的而不是动态的，因为现在我必须编写自己的逻辑来确定活动单元格周围的边界。像这样的方法并不难`ActiveCell.End(xlDown)`，但我不想在这里重新发明轮子。

有没有类似的 Excel VBA 方法`ActiveCell.GetOuterRange.Select`？那样就好了。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-18T12:58:03.680

对于所有脏细胞，您都可以；

```
ActiveSheet.UsedRange.Select 
```

或者对于以连续方式围绕当前单元格的单元格，您可以；

```
ActiveCell.CurrentRegion.Select 
```

# c# - LINQ 2 SQL：AddObject 和 InsertOnSubmit

> ID：11541865
> 
> 赞同：0
> 
> 时间：2012-07-18T12:53:11.097
> 
> 标签：c#, .net, entity-framework, linq-to-sql

我需要在付款表中插入一条记录。我找到了两种方法来做到这一点

1.  添加对象
2.  插入提交

两者有什么区别？什么时候用什么？

```
 public void InsertEntity(DBML_Project.Payment payment)
    {
        //Insert the entity
        MyDataContext.GetTable<DBML_Project.Payment>().InsertOnSubmit(payment);
    }

public void InsertPayment(IPayment payment)
{
     this.AddObject(payment.GetType().Name, payment);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T13:29:35.757

以下是一些相关问题：

*   [AddObject 和 Save 不工作](https://stackoverflow.com/questions/9621902/addobject-and-save-not-working)
*   [找不到 InsertOnSubmit() 方法](https://stackoverflow.com/questions/9333811/cant-find-insertonsubmit-method)

他们做的事情*大致*相同，但[AddObject](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.addobject.aspx)属于微软的[实体框架](http://msdn.microsoft.com/en-us/library/bb399572.aspx)，而[InsertOnSubmit](http://msdn.microsoft.com/en-us/library/bb763516)属于微软的[LINQ to SQL](http://msdn.microsoft.com/en-us/library/bb386976.aspx)。

对于其中任何一个，您都需要在完成添加对象后将更改提交到数据库。在 AddObject 之后调用[SaveChanges](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.savechanges) ，在 InsertOnSubmit之后调用[SubmitChanges 。](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.submitchanges.aspx)

既然您提到您正在使用 LINQ to SQL，您可能需要 InsertOnSubmit。

# c# - C# 获取 => 修改 => 设置范例。如何将其缩短为一行函数调用？

> ID：11541882
> 
> 赞同：0
> 
> 时间：2012-07-18T12:54:09.297
> 
> 标签：c#, .net, visual-studio, .net-3.5

所以我使用类似的东西：

```
...
var o = myclass.o; // o is a property and o is a structure not class
o.modifyInternalParameter(a, b, c); // a, b, c were created somewhere before
myclass.o = o; // as you can see o has getter and setter.
... 
```

如何创建一个功能包装器而不是调用 3 行代码调用一些

```
func(myclass.o, TypeOfO.modifyInternalParameter, {a, b, c}, returnValueIfmodifyInternalParameterHasOne); 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:18:55.147

我会`modifyInternalParameter`返回自己或创建一个静态方法来为您执行此操作，然后您可以编写如下内容：

（返回自己，嗯，自己的副本，但修改后的副本）
`myclass.o = myclass.o.modifyInternalParameter(a, b, c)`

（静止的）
`myclass.o = ModifyInternalParameters(myclass.o, a, b, c)`

因此，您的内部方法可能如下所示：

```
public MyStruct modifyInternalParameter(object a, object b, object c)
{
    this.A = a;
    this.B = b;
    this.C = c;
    return this;
} 
```

可以用静态版本做类似的事情。

编辑：您还可以在内部为您创建一个扩展方法（或 on 方法`myclass`）：

`myclass.ModifyInternalParametersOnO(a, b, c)`

您可能在哪里：

```
public static void ModifyInternalParametersOnO(this MyClass myclass, object a, object b, object c)
{
    var o = myclass.o;
    o.modifyInternalParameters(a, b, c);
    myclass.o = o;
} 
```

# io - Programming Constest 的 I/O 优化

> ID：11541887
> 
> 赞同：-1
> 
> 时间：2012-07-18T12:54:22.120
> 
> 标签：io

在预定义输入格式的情况下，有什么方法可以优化输入。
示例问题：

*   [http://www.spoj.pl/problems/MARTIAN/](http://www.spoj.pl/problems/MARTIAN/)
*   [http://www.spoj.pl/problems/FISHER/](http://www.spoj.pl/problems/FISHER/)

我可以考虑一次扫描一行并解析它。有没有更好的方法来做到这一点？
如果有人知道方法，请分享优化代码段。最好使用**C/C++**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:47:10.480

如果要输入/输出大量数据，请使用 scanf/printf 而不是 cin/cout。它会更快。

# python - 如何通过 ODBC 检索 Oracle 数据库函数的结果？

> ID：11541894
> 
> 赞同：0
> 
> 时间：2012-07-18T12:54:45.380
> 
> 标签：python, oracle, odbc

我在通过 ODBC 调用 Oracle 存储函数（不是过程）时遇到问题。

我的函数很简单，它只是连接两个字符串。我可以通过以下方式调用它：

```
rs = c.execute("SELECT add_str('yogi', 'bubu') FROM dual")
for row in c.fetchall():
    print(row[0]) 
```

但是这种类型的调用数据库函数不适用于更改数据库的函数。所以我尝试了这个：

```
c.execute("{ ? = call add_str('ala', 'bubu') }"); 
```

但我得到了：

```
Error: HY000: The driver did not supply an error! 
```

在 ODBC 跟踪文件中，它看起来像：

```
python.exe odbc a20-e68 ENTER SQLExecDirect 
        HSTMT               00A02CE0
        UCHAR *             0x00AA6CE4 [      -3] "{ ? = call add_str('ala', 'bubu') }\ 0"
        SDWORD                    -3

python.exe odbc a20-e68 EXIT  SQLExecDirect  with return code -1 (SQL_ERROR)
        HSTMT               00A02CE0
        UCHAR *             0x00AA6CE4 [      -3] "{ ? = call add_str('ala', 'bubu') }\ 0"
        SDWORD                    -3

python.exe odbc a20-e68 ENTER SQLGetDiagRecW 
        SQLSMALLINT                  3 
        SQLHANDLE           00A02CE0
        SQLSMALLINT                  1 
        SQLWCHAR *          0x0021F7BC (NYI) 
        SQLINTEGER *        0x0021F808
        SQLWCHAR *          0x00A035F8 (NYI) 
        SQLSMALLINT               1023 
        SQLSMALLINT *       0x0021F818

python.exe odbc a20-e68 EXIT  SQLGetDiagRecW  with return code 100 (SQL_NO_DATA_FOUND)
        SQLSMALLINT                  3 
        SQLHANDLE           00A02CE0
        SQLSMALLINT                  1 
        SQLWCHAR *          0x0021F7BC (NYI) 
        SQLINTEGER *        0x0021F808
        SQLWCHAR *          0x00A035F8 (NYI) 
        SQLSMALLINT               1023 
        SQLSMALLINT *       0x0021F818 
```

类似的操作是可能的`JDBC/Jython`：

```
proc = db.prepareCall("{ ? = call add_str('j_bubu', 'j_yogi') }");
proc.registerOutParameter(1, Types.VARCHAR)
r = proc.execute();
print(proc.getString(1)) 
```

所以应该可以使用 ODBC & Python 做类似的事情。我已经检查过，如果我使用 JDBC-ODBC 桥接器，那么 Jython 可以像原生 JDBC 驱动程序一样通过 ODBC 调用数据库函数。

我的环境：

数据库：Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production

ODBC 驱动程序：11.01.00.06

SQORA32.DLL 文件版本：11.1.0.6.0

我尝试`odbc`了 ActiveState Python 2.7 和模块中的`pyodbc`模块。

我的问题：

有没有办法通过他们的 ODBC 驱动程序调用 Oracle 数据库函数（不是过程）？以及如何检索其结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:56:34.540

Google brought up this page:

[http://www.gossamer-threads.com/lists/python/python/71449](http://www.gossamer-threads.com/lists/python/python/71449)

> ... I don't think ODBC supports stored procedures returning a value directly. Only as part of a cursor. ...

Basically, you can't call the function directly. You could, however, create a procedure with an `OUT` parameter instead.

# android - ksoap2 问题 java.net.ConnectException

> ID：11541896
> 
> 赞同：3
> 
> 时间：2012-07-18T12:54:59.573
> 
> 标签：android, ksoap

我正在使用 kSoap2 访问肥皂网络服务。我在执行以下行时收到**java.net.connectException**

```
androidHttpTransport.call(Constants.SOAP_ACTION_GET_METHOD_NAME, envelope) 
```

这并不总是发生，但有时会发生。这是与服务器连接超时的问题吗？如何增加 kSoap 中的连接超时？我用谷歌搜索，但找不到解决方案。谁能建议我解决此错误的解决方案。

Logcat 详细信息如下：

```
07-17 14:46:24.800: W/System.err(8103): java.net.ConnectException: failed to connect to www.yahoo.com/175.41.138.237 (port 80) after 20000ms: isConnected failed: ENETUNREACH (Network is unreachable)
07-17 14:46:24.800: W/System.err(8103):     at libcore.io.IoBridge.isConnected(IoBridge.java:214)
07-17 14:46:24.800: W/System.err(8103):     at libcore.io.IoBridge.connectErrno(IoBridge.java:152)
07-17 14:46:24.800: W/System.err(8103):     at libcore.io.IoBridge.connect(IoBridge.java:112)
07-17 14:46:24.800: W/System.err(8103):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
07-17 14:46:24.800: W/System.err(8103):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
07-17 14:46:24.800: W/System.err(8103):     at java.net.Socket.connect(Socket.java:842)
07-17 14:46:24.800: W/System.err(8103):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:77)
07-17 14:46:24.800: W/System.err(8103):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
07-17 14:46:24.800: W/System.err(8103):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
07-17 14:46:24.800: W/System.err(8103):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
07-17 14:46:24.810: W/System.err(8103):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
07-17 14:46:24.810: W/System.err(8103):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
07-17 14:46:24.810: W/System.err(8103):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
07-17 14:46:24.810: W/System.err(8103):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
07-17 14:46:24.810: W/System.err(8103):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
07-17 14:46:24.810: W/System.err(8103):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
07-17 14:46:24.810: W/System.err(8103):     at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:80) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:04:59.840

> 如何增加 kSoap 中的连接超时？

`HttpTransportSE`在某些情况下，忽略超时值似乎仍然存在一个悬而未决的问题。请参阅此相关[链接](http://code.google.com/p/ksoap2-android/issues/detail?id=60&q=httpTransportse%20timeout)。

但是，对此的解决方案涉及修改现有的`ksoap2 API`.

感谢[Lightsoftai](http://www.lightsoftai.com/?p=707)的开发人员，您现在可以`HttpTransportSE`使用以下代码添加超时：

**注意**：*您可以为此使用 ksoap2 API 版本 2.5.2 或更高版本*

```
 /**
       * Creates instance of HttpTransportSE with set url
       *
       * @param url 
       *             the destination to POST SOAP data
       */
         public HttpTransportSE(String url) {
         super(url);
         }

       /**
      * Creates instance of HttpTransportSE with set url
      *
      * @param url
      *            the destination to POST SOAP data
      * @param timeout
      *               timeout for connection and Read Timeouts (milliseconds)
       */
       public HttpTransportSE(String url, int timeout) {
       super(url, timeout);
          } 
```

[您可以从此处](http://www.lightsoft.se/_lightsoft/wp-content/plugins/download-monitor/download.php?id=1)下载相同的 jar 文件。

另请参阅[ksoap never timeout](https://stackoverflow.com/questions/5489671/ksoap-never-timeout)。

希望能帮助到你。

# php - 为 Google Translate API 临时从字符串中删除 HTML 以降低成本

> ID：11541908
> 
> 赞同：2
> 
> 时间：2012-07-18T12:55:36.533
> 
> 标签：php, api, html-parsing, translation, google-translate

我必须使用我们付费的 Google API 翻译一些细节。详细信息包含 HTML，Google 会按每个字符收费。我不想发送完整的内容，而是只发送英文文本，并删除了 HTML。我可以使用 PHP 函数删除 HTML 标记和实体，但我必须在翻译后将英文内容放回 HTML 标记中才能正确显示。它还将包括 CSS。

例子：

```
<strong>This is a test</strong><br /> &nbsp; <custom tag>This is a test</custom tag><br /> 
```

翻译成西班牙语后，我需要：

```
<strong>Translated content </strong><br /> &nbsp; <p>Translated content </p><br /> 
```

如何在不向 API 发送 HTML 的情况下保留 HTML 格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:01:47.707

哈哈，我也有这个问题。但已经是前一阵子了...

我认为，有一个问题是 - 由于翻译性质 - 一些句子部分被交换了。所以我无法将标签放在相同的位置，首先。但我认为有一种方法可以从翻译过程中获取一些元数据，您是否可以看到句子的哪一部分移到了新位置以及内容是什么……我知道，我终于解决了。但我不记得如何:(

如果每个单词在翻译后再次出现在同一个位置，您可以先用空格或 htmltag 将所有单词分隔成一个数组，并记住每个 HTML-tag 的位置并在翻译后重新应用...

# sql-server - 选择语句以 HH:MM 格式显示分钟

> ID：11541910
> 
> 赞同：-1
> 
> 时间：2012-07-18T12:55:49.633
> 
> 标签：sql-server

我在 SQL Server 中有一个表（表名-Production）。Production 表有一个列 TimeSpent（Datatype-varchar(25)）并存储 Number of minutes used 。示例 60,78,23 等。我想在 select 语句中以 HH:MM 格式显示 TimeSpent。例如，它显示 60 的 01:00，78 的 01:18 等等。请帮助我如何编写此查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:07:00.523

```
CREATE TABLE #tblTime
(
    timespent VARCHAR(25)
);

INSERT INTO #tblTime VALUES (78)
INSERT INTO #tblTime VALUES (60)
INSERT INTO #tblTime VALUES (100)

SELECT 
    CAST(TimeSpent/ 60 AS VARCHAR(10)) + ':' + 
    RIGHT('0' + CAST(TimeSpent % 60 AS VARCHAR(2)), 2) AS [HH:MM] 
FROM 
    #tblTime 
```

# joomla - 我可以随机化 Joomla/K2 文章 URL 吗？

> ID：11541911
> 
> 赞同：0
> 
> 时间：2012-07-18T12:55:52.200
> 
> 标签：joomla, joomla-k2, joomla-article

我正在寻找一种将随机字符串/值添加到所有 Joomla 文章 URL 的方法。这样做的原因是人们将能够访问 URL，只要他们有内容的链接，但是他们不应该通过替换 URL 中的文章 ID 来访问其他内容（即：index.php/category/1 , index.php/category/2)。

无论别名文本如何将文章 ID 放在启用了 url 重写的 url 上，都将访问该文章。我正在使用 K2 组件，因此将其应用于 K2 文章（项目）。

我曾考虑在文章创建时将别名硬编码为随机值，但这并不能解决问题。尽管我为 Joomla 尝试的插件只做外部链接，但即使是混淆 URL 的方法也应该有效。

//软件：Joomla 2.5/K2 2.5/Apache服务器

# android - 内存不足时完成一项活动

> ID：11541913
> 
> 赞同：2
> 
> 时间：2012-07-18T12:55:56.460
> 
> 标签：android, back-stack

我的应用中有一个 Activity A 启动 Activity B。当我的应用程序停止并且android系统的内存不足时，我的应用程序将从后台堆栈中清除。当我再次启动我的应用程序时，在实例化 Activity B 期间发生了异常。所以我想确保 Activity B 在内存不足时完成，这样就不会发生异常。我曾尝试将finish() 放在onMemoryLow() 中，但没有奏效。我还可以做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T13:12:51.490

这可能无法回答您的整个问题，但它仍然会有所帮助。

首先要注意的是，当整个 Android 系统内存不足时，将调用 onLowMemory()。这与您的应用或活动无关。因此，覆盖该方法并不能确保您的 Activity 完成。

也许如果您的 Activity 是在 Andorid 系统的内存中（即在调用 onDestroy() 之前）并且如果您已经覆盖了 onLowMemory()，那么它将对您有所帮助。但除此之外，没有可能做到这一点。否则，您必须在进入活动之前检查所需的条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T13:25:06.480

如果它在后台，Android 只会杀死你的进程。当用户返回应用程序时，Android 会重新创建进程并重新创建位于 Activity 堆栈顶部的 Activity。您需要对您的活动进行编程，以便它们可以像这样运行（即：重新启动后重新创建）。如果您不能这样做，您可以尝试以下方法：

创建一个带有静态变量的类，如下所示：

```
public class Globals {
    public static boolean initialized;
} 
```

创建（或重新创建）流程时，该变量`Globals.initialized`将具有该值。`false`

现在，在您的 中`ActivityA`，当您设置`ActivityB`依赖的数据时，您可以设置初始化标志，如下所示：

```
Globals.initialized = true; 
```

在`ActivityB.onCreate()`中，检查 的值，`initialized`如果未设置，只需调用`finish()`它将带用户返回`ActivityA`，如下所示：

```
if (!Globals.initialized) {
    finish(); // Process was recreated while ActivityB was on top of the stack,
              //  so finish now
    return;
} 
```

# android - Android 我的 APK 大小 更大 50 MB

> ID：11541921
> 
> 赞同：4
> 
> 时间：2012-07-18T12:56:29.607
> 
> 标签：android

我正在开发一个游戏应用程序。它包含更多数量的图像、音乐文件等，超过了 50MB。但是根据 playstore，市场将允许 50MB 的 apk 大小，请提供任何解决方案来上传更多的 apk 50MB大小，

预先感谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:59:00.717

尝试 apk 扩展文件：http: [//developer.android.com/guide/google/play/expansion-files.html](http://developer.android.com/guide/google/play/expansion-files.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T13:22:30.293

```
to decrease the apk size you can do following things Like

1) Don't keep the any unnecessary file in the build ,

2) If images are of High definition decrease their density 
  or use smaller images  where you could use

3 ) Decrease the size of sound files by decreasing its bit rate

4) or what you can do is keep the resources to a server and download  them when are about to used. 
```

并查看此链接

[http://developer.sonymobile.com/wp/2012/01/31/tips-for-reducing-apk-file-size/](http://developer.sonymobile.com/wp/2012/01/31/tips-for-reducing-apk-file-size/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:59:44.673

Play Store 支持您的 APK 的扩展文件，（以 2 个 obb 文件的形式，每个文件最大 2GB）您可以在您的主应用程序中下载它们请参见此处：[APK 扩展文件](http://developer.android.com/guide/google/play/expansion-files.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-25T17:06:46.357

我知道这是一个迟到的答案，但它可能会帮助遇到类似问题的其他人：

**截至最近**（2015 年 9 月）**，如果您的目标是 Android 2.3 及更高版本，您可以上传最大 100 MB 的 APK** - 您可以[在此帮助页面上](https://support.google.com/googleplay/android-developer/answer/2481797?hl=en-GB)阅读更多相关信息。这个限制曾经是 50 MB。还有一篇 Android 开发者博客文章解释了[这里](http://android-developers.blogspot.co.uk/2015/09/support-for-100mb-apks-on-google-play.html)的变化。

或者，如果您的应用超过 100 MB APK 限制，您可以使用**扩展文件**。这些是在您的应用安装后下载的附加文件，最大可达 4 GB（具体而言，您可以拥有两个最大为 2 GB 的扩展文件）。[您可以在 Android 开发者网站上的此页面上](http://developer.android.com/google/play/expansion-files.html)了解有关扩展文件的更多信息。

但是，请注意，使用扩展文件有一些限制，除了每个文件有 2 GB 的限制，例如用户必须通过 Google Play 下载您的应用。有关这些的更多详细信息也可以在上面链接的 Android 开发者页面上找到。

# sencha-touch - 如何在 sencha touch2 中聚焦/突出显示工具栏元素内部

> ID：11541922
> 
> 赞同：0
> 
> 时间：2012-07-18T12:56:33.743
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我已经使用 sencha touch2 完成了应用程序。根据要求**，当鼠标悬停（指向）特定元素时，我需要在工具栏元素内聚焦/突出显示**。我添加了pressedCls，一旦我按下它就会起作用，但我需要在鼠标悬停时突出显示。谁能告诉我如何实现这一目标。

这是我的代码：

```
initialize:function () {
    this.callParent(arguments);
    var Button1 = {
        xtype:"button",
        id: 'suvilasBtn',            
        html: '<img  height="30" width="40", src="resources/sass/images/icons/about.png" />',            
        pressedCls: 'customPressedCls',            
        scope:this
    };
    var Button2 = {
        xtype: "button",
        id: 'projectBtn',
        html: '<img  height="30" width="40", src="resources/sass/images/icons/projects.png" />',
        handler: this.onProjectsButtonTap,
        scope: this
    };
    var bottomToolbar = {
        xtype:"toolbar",
        docked:"bottom",
        scrollable: false,                      
        defaults: {
            iconMask: true,
            ui: 'plain'
        },
        layout: {
            pack : 'center',
            align: 'center'
        },
        items:[
            Button1,
            Button2
        ]
    };
    this.add([ bottomToolbar ]);
} 
```

# c# - 如何在 .dll 卸载时停止线程

> ID：11541923
> 
> 赞同：0
> 
> 时间：2012-07-18T12:56:35.893
> 
> 标签：c#, multithreading, dll

我有一个 .dll 启动一个工作线程来监视 .dll 的某些活动的场景。这是某种类似于垃圾收集的东西，在一段时间不活动后清理内部缓存中的元素。

现在的问题是：我有代码在一个特殊的函数 Shutdown 中停止这个线程，但是.. 这并不总是被调用。它是从我编写的 1-2 个应用程序中调用的，但是使用了一个单元测试的 3rd 方工具，例如，我不能调用这个方法，因为我运行了任意的测试子集。

此外，我尝试将此类代码挂钩到 AppDomain DomainUnload 事件 - 该事件也不会被调用。

```
AppDomain.CurrentDomain.DomainUnload += new EventHandler(
    (o, e) => Shutdown() ); 
```

如何处理？为了完成这项工作，还需要任何其他“设计”/方法吗？

# vb.net - 通过vb.net分割字符串

> ID：11541924
> 
> 赞同：-1
> 
> 时间：2012-07-18T12:56:37.283
> 
> 标签：vb.net

我有一个像这样的 html 地址行：

```
Addressline1<br>Addressline2<br>... 
```

如何将它们拆分为数组？

我已经使用了这段代码，但它只返回一些字符

```
 Dim addressLine As String() = "Address1<br>Address2<br>".Split(New String() {"<br>"}, StringSplitOptions.RemoveEmptyEntries)

                    For index As Integer = 0 To addressLine.Count - 1
                        Dim address As String = "Address" + (index + 1).ToString()
                        Console.WriteLine(address(index))
                    Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T13:13:09.023

您的拆分有效，但是您的循环没有意义（不确定您要对此做什么）。如果您修复此问题，它将输出正确的值：

```
For index As Integer = 0 To addressLine.Count - 1
    Console.WriteLine(addressLine(index))
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:59:51.277

```
Dim Address As String() = addressLine.Split("<br>") 
```

# wcf - 如何通过 WCF 将自定义异常的字段从服务传播到客户端？

> ID：11541925
> 
> 赞同：1
> 
> 时间：2012-07-18T12:56:41.323
> 
> 标签：wcf

这是我观察到的

我需要从服务向客户端抛出一个自定义异常子类型。（列为FaultContract 上的具体操作）。我在 CustomException 上有某些字段，应该由客户端接收。

```
[Serializable]
class MyCustomException : Exception
{
    public string From { get; private set; }

    public MyCustomException(string where)
    {
        From = where;
    }

} 
```

}

我发现即使在 FaultException 实例中存在异常，该字段也没有被反序列化。我尝试通过覆盖 GetObjectData 和序列化 ctor 来实现 ISerializable，但没有骰子。我能理解它的唯一方法是将 MyCustomException 更改为 DataContract，而不是从 Exception 派生。

```
[DataContract]
class MyCustomException
{
    [DataMember]
    public string From { get; private set; }

    public MyCustomException(string where)
    {
        From = where;
    }
} 
```

这行得通。但是，它不能再从 Exception 派生了。因为 Exception 被标记为 Serializable 属性，并且您不能在一个类型上同时具有 Serializable 和 DataContract 。（确认：运行时抛出异常）

所以我的问题是：在 WCF 中传播自定义异常子类型的字段的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:23:13.223

> ...你不能在一个类型上同时拥有 Serializable 和 DataContract 。（确认：运行时抛出异常）

首先，你可以拥有`DataContract`和`Serializable`在一起。事实上，如果没有这个，我现在正在处理的网站将无法运行，因为我的 WCF 服务是通过`$.ajax`. [此](https://stackoverflow.com/questions/5405188/can-i-use-datacontract-and-serializable-together)SO 线程将为您提供正式的详细信息。

接下来，我强​​烈建议不要从`Exception`. 原因是您已经有一个[FaultException<TDetail>](http://msdn.microsoft.com/en-us/library/ms576199.aspx)内置类，`TDetail`您的自定义错误在哪里。您可以阅读[此](http://msdn.microsoft.com/en-us/library/ms752208.aspx)MSDN 文章以了解实现细节 - 请记住在部署时关闭客户端的“异常详细信息”。

```
catch (FaultException<MyFault> e)
{
    //e is the full exception (with StackTrace et al.) when 'exception details' is on
    //e.Detail is your custom fault which is always available
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:56:23.423

这就是我如何让它工作..不确定它是否是正确的方法。我找不到任何明确的指导方针，说明您不应该使用 Exception 子类型作为`FaultException<TDetail>`.

我尝试抛出一个`FaultException<FileNotFoundException>`并发现文件名字段实际上是正确传播的。

那么 FileNotFoundException 和 MyCustomException 之间的差异是什么？

由于基本异常实现了 ISerializable，我不得不**重写**服务器端的方法。

```
 protected MyCustomException(SerializationInfo info, StreamingContext context) :
        base(info, context)
    {
        this.From = info.GetString("From");
    }
    public override void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        base.GetObjectData(info, context);
        info.AddValue("From", this.From);
    } 
```

然后我使用 svcutil 生成客户端代理类。我发现 FileNotFoundException 没有生成（因为它是一个内置类型），但 MyCustomException 是。但是它没有任何字段，只有一个空的反序列化 ctor。

我之前没有深入研究 ISerializable，因为当我在代理类 ctor 中设置断点时，它没有被击中。我错误地中止了那条调查线（未能看到类上的 DebuggerStepThrough 属性和 GeneratedCode 属性；由 svcutil 添加）。

因此，我然后**手动编辑自动生成的类**以添加该字段并将其设置在 ctor 中，如下所示..

```
[System.SerializableAttribute()]
    public partial class MyCustomException : System.Exception
    {
        public string From { get; private set; } // manual edit

        public MyCustomException(System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext context) :
            base(info, context)
        {
             this.From = info.GetString("From");  // manual edit
        }
    } 
```

现在它按预期工作；现场数据完好无损。

这就提出了另一个问题：为什么代理生成步骤不自动执行此操作？

# dijit.form - Dojo“选择”小部件和分层存储

> ID：11541927
> 
> 赞同：0
> 
> 时间：2012-07-18T12:56:53.773
> 
> 标签：dijit.form, dojo

我试图在*dijit.form.Select*小部件中模仿 HTML 中标签的行为。根据我在 dojo 问题跟踪器上发布的票证的阅读，这可以使用分层存储来完成。我创建了这样一个商店，但下拉列表只显示“组名”而不是孩子。

有人知道*dijit.form.Select*小部件是否甚至可以与分层存储一起使用？

谢谢你，有一个美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:18:40.117

结果它不起作用，所以我完全改变了我的实现（即用户选择在*Select*控件中显示的内容，而不是使用*optgroup在**Select*中显示数据）

# css - ul-li 元素样式不正确

> ID：11541937
> 
> 赞同：2
> 
> 时间：2012-07-18T12:57:17.497
> 
> 标签：css, html, html-lists

您好我正在尝试建立一个列表（代码共享于：http: [//jsfiddle.net/jLM4J/](http://jsfiddle.net/jLM4J/)）。

我的问题是，虽然列表元素不应该重叠，但为什么我的列表与我试图显示用户详细信息的第一项重叠。

即使我将用户 li 元素替换为 ul 外部/内部的单独 div（http://jsfiddle.net/yYEhS/1/），ul 列表仍然会与我的元素重叠，但不应该因为我的元素是 div 显示作为一个块。

任何人都可以帮忙，因为这让我心烦意乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:59:36.333

这是因为`float:left;`在您的用户 div 声明中。像这样删除它，它可以工作：

```
.user-image {
    width: 30px;
    height: 30px;
    background: url('../../images/user.png') no-repeat center center;
    margin: 1px;
    border: 1px @border-style @border-color;
} 
```

没有设计可以看，很难知道为什么你会有那个浮动：留在那儿。

如果您需要它与 PAGE 左对齐，它需要在 ul 之外。
如果您希望它在页面内左对齐，则分配`text-align:left;`给 li 元素。

# mongodb - MongoDB - 十进制类型的值怎么样？

> ID：11541939
> 
> 赞同：40
> 
> 时间：2012-07-18T12:57:19.343
> 
> 标签：mongodb, decimal, bigdecimal, bson

我目前正在为一个小型金融相关项目学习和应用 MongoDB。

* * *

当我阅读[MongoDB in Action](http://www.manning.com/banker/)时，它说：

> BSON 数字类型通常出现的唯一其他问题是缺乏十进制支持。这意味着如果您计划在 MongoDB 中存储货币值，则需要使用整数类型并将值保存为美分。

* * *

我的金融相关产品会涉及一些货币价值，但我对上述说法有点困惑或担心。以下是我的问题：

1.  我可以用于我项目`double`中的那些吗？`currency values`
2.  如果我直接使用`double`它们会发生什么或后果？
3.  如果十进制类型是金融产品的必备品，那么使用 MongoDB 是不是一个坏主意？
4.  这是什么意思`you need to use an integer type and keep the values in cents`？这是否意味着如果我要存储`1.34 dollars`，那么我应该存储`134 cents`？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-18T13:28:19.367

如果出于财务目的需要精确表示，则双精度值或浮点值不适合，因为小数部分会出现舍入误差。某些十进制值不能使用基于二进制的浮点数表示，必须近似。

有关技术含量较低的介绍，请参阅[舍入浮点数的麻烦](http://www.theregister.co.uk/2006/08/12/floating_point_approximation/)；如果您想了解一下，请阅读[每位计算机科学家应该了解的浮点运算知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

建议使用整数类型（以美分存储值）是为了避免潜在的舍入错误。这种方法在 MongoDB 文档中描述为“[使用比例因子”来](https://docs.mongodb.com/manual/tutorial/model-monetary-data/#using-a-scale-factor)[建模货币数据](https://docs.mongodb.com/manual/tutorial/model-monetary-data/)，并且是 MongoDB 3.2 和更早版本的一般解决方法。

MongoDB 3.4 包含一个新的[Decimal BSON 类型](https://docs.mongodb.com/manual/tutorial/model-monetary-data/#numeric-decimal)，它为操作货币数据字段提供精确的精度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-06T02:05:48.833

MongoDb[在 3.4 版本中增加了对 Decimal 数据类型的](https://docs.mongodb.com/master/release-notes/3.4/#decimal-type)支持。它也可以从[shell](https://docs.mongodb.com/master/core/shell-types/#shell-type-decimal)获得。

> 3.4 添加了对使用新的十进制数据类型的十进制128 格式的支持。decimal128 格式支持最多 34 个十进制数字（即有效数字）和 -6143 到 +6144 的指数范围的数字。
> 
> 与仅存储十进制值的近似值的双精度数据类型不同，十进制数据类型存储精确值。例如，十进制 NumberDecimal("9.99") 的精确值为 9.99，而双精度 9.99 的近似值为 9.9900000000000002131628...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-18T09:29:27.280

当您不想将货币存储为分值时，您可以将 1.34 美元的货币存储为如下对象：

```
{
    major: 1,
    minor: 34,
    currency: "USD"
} 
```

用这样的对象做任何数学运算都不容易，也不会使用商业舍入规则。但是无论如何你都不应该在数据库上做任何业务逻辑，尤其是当它是一个像 MongoDB 这样的“哑”数据库时。

您应该做的是将这些对象从/到`Money`应用程序中的一个类序列化/反序列化，该类实现尊重舍入规则的基本货币数学运算，并在您尝试使用不同的货币单位进行操作时抛出异常（`$12.34 + 14.95€ = error`- 必须转换一个首先通过提供汇率将货币兑换成另一种货币）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-16T22:04:58.217

如果您使用的是 Mongoose，那么您可以在架构定义中使用 getter/setter 函数，例如

```
function getDecimalNumber(val) {    return (val/1000000); }
function setDecimalNumber(val) {    return (val*1000000); } 
```

适用于模式对象，例如

```
balance: { type: Number, default: 0, get: getDecimalNumber, set: setDecimalNumber }, 
```

要乘/除的零的数量取决于您想要的精度。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-09T05:51:53.620

看起来 MongoDB 终于添加了对小数的支持，虽然在撰写本文时这刚刚完成开发，但希望它应该很快在稳定版本（3.4？）中可用。

[https://jira.mongodb.org/browse/SERVER-1393](https://jira.mongodb.org/browse/SERVER-1393)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-09T12:10:58.560

我知道这篇文章很旧，但它在谷歌上排名很高，所以......

存储财务数据的最佳解决方案是使用 MongoDB 自己在此处[http://docs.mongodb.org/v2.6/tutorial/model-monetary-data/#monetary-value-exact-precision](http://docs.mongodb.org/v2.6/tutorial/model-monetary-data/#monetary-value-exact-precision)记录的精确精度。

```
{price: 9990, currency: "USD" } 
```

当您需要数据时，假设您需要 2 位精度，只需除以 100。缺点是您总是需要以相同的精度工作。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-11-16T00:49:25.677

## NodeJS 用户：

请注意，如果使用 NodeJS，则不要直接使用 NumberDecimal(string)，而是使用 Decimal128.fromString(string)。

参考：

*   [https://www.mongodb.com/community/forums/t/how-do-i-use-numberdecimal-within-node-js/3224](https://www.mongodb.com/community/forums/t/how-do-i-use-numberdecimal-within-node-js/3224)
*   [https://mongodb.github.io/node-mongodb-native/3.6/api/Decimal128.html](https://mongodb.github.io/node-mongodb-native/3.6/api/Decimal128.html)

例子：

```
const Decimal128 = require('mongodb').Decimal128

usersCollection.findOneAndUpdate({_id: ObjectID(this.data.userId), "myWells.wellId": ObjectID(this.data.wellId)},
  { 
    $set: { "myWells.$.interest": Decimal128.fromString(this.data.interest) }
  }
) 
```

# wcf - Silverlight 使用 WCF RIA 服务从数据库中获取最新版本的数据

> ID：11541942
> 
> 赞同：0
> 
> 时间：2012-07-18T12:57:28.683
> 
> 标签：wcf, silverlight, ria

业务应用程序的目标之一是允许多个用户同时运行应用程序来管理海量数据。如何使用 WCF RIA 服务从数据库中获取最新版本的数据？我曾尝试使用 DomainCollectionView 显示产品列表，并允许执行搜索，但不幸的是，如果我修改了产品名称或产品代码或直接删除记录，客户端上显示的搜索结果仍然是旧版本使用 SQL Management Studio 或其他用户所做的更改来创建数据库。要获取最新版本的数据，我必须刷新浏览器。听起来数据已经缓存在客户端了。请指教。

附上我使用 AdventureWorks 作为示例的编码文件，请导航到 ProductPage 并尝试在搜索框中键入一些内容。

[http://www.mediafire.com/?l4aee46y3vljuv7](http://www.mediafire.com/?l4aee46y3vljuv7)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:10:45.313

在 LoadProductSummaryList 方法中，更改行

```
Return context.Load(context.GetProductSummaryListQuery.Where(Function(p) p.Name.Contains(SearchText)) 
```

到

```
Return context.Load(context.GetProductSummaryListQuery.Where(Function(p) p.Name.Contains(SearchText)), LoadBehavior.RefreshCurrent, True) 
```

数据将根据您的需要进行刷新。

希望这可以帮助...

克里斯·安德森

# python - Python和C之间ntohl和htonl的行为不同

> ID：11541944
> 
> 赞同：0
> 
> 时间：2012-07-18T12:57:32.277
> 
> 标签：python, c, sockets, htonl

我试图在 Python 中模仿 C 程序的某些部分的行为。他们都在读取一个二进制文件，其中每条记录都是长度->数据。C 程序将从文件中提取长度字节，无论是正数还是负数，ntohl() 都会返回正确的长度。然而，在 Python 中，即使长度记录是相同的值，当它是负数时，我会得到一个溢出错误：

> 长度：419495936
> 
> ntohl: 281
> 
> 长度：-2147418112
> 
> 溢出错误：无法将负数转换为无符号长

与 C 相比：

> 长度：419495936
> 
> ntohl: 281
> 
> 长度：-2147418112
> 
> ntohl: 384

我在这里做错了什么？如何让 Python 产生与 C 相同的结果？

**用代码编辑**

这是C代码：

```
while (fread(&rec_len, sizeof(unsigned int),  1, fp1) != 0) {
    printf("length: %d\n", rec_len);
    rec_len = ntohl(rec_len);
    printf("ntohl: %d\n", rec_len); 
```

这是Python：

```
with open(file, "rb") as f:
    pSize = struct.unpack('<i', f.read(4))[0]
    print "length: " + str(pSize)
    packetSize = socket.ntohl(pSize)
    print "ntohl: " + str(packetSize)
    while packetSize > 0:
        packet = f.read(packetSize)
        pSize = struct.unpack('<i', f.read(4))[0]
        print "length: " + str(pSize)
        packetSize = socket.ntohl(pSize)
        print "ntohl: " + str(packetSize) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T13:08:01.787

您需要将一个正数传递给 htonl()。如果您无法更改读取值的方式，则可以使用以下代码：

```
>>> socket.htonl((-2147418112) & 0xffffffff)
384L 
```

编辑：查看您的代码后，您可以更改 struct.unpack 以使用`'<I'`它给您一个无符号数，或者甚至使用`'>I'`或`'!I'`否定之后对 ntohl() 的需要。

# php - PHP - 检查请求的 SSL 证书

> ID：11541952
> 
> 赞同：3
> 
> 时间：2012-07-18T12:57:49.703
> 
> 标签：php, ajax, ssl

PHP是否可以获取请求的证书，特别是证书上的网站名称和CA？

我想检查是否只能通过 AJAX 调用从我的网站调用我的 PHP 文件。像这样：

1.  用户登录我的网站，然后使用 https 进行后续交互
2.  用户加载页面`https:// domain/mypage.php`
3.  `https:// domain/mypage.php`有一个 AJAX 调用`https:// domain/getinfo.php`

在 getinfo.php 中，我想检查请求的证书详细信息，以确保请求是从我的网站发出的，*即不是直接点击 URL 或使用抓取工具。*

可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:43:37.380

> 我试图确保对我的 getinfo.php 的调用来自我的网站，而不是来自试图通过点击 URL 来窃取我的（非常昂贵的）数据的人。

您的意思是要确保*对您的呼叫`getinfo.php`来自访问您网站的客户*？这是一个重要的区别。“您的站点”不是发起请求，而是*访问该站点的客户端*。并且无论客户端在发送请求时是否仍然打开您的站点是不可能检测到的，每个请求看起来都与其他请求完全一样。

您*可以*要求客户在打开您的网站时必须收到的请求中发送一个令牌。通常这是一个 cookie 和/或会话 ID。如果没有有效的 cookie/会话，您将无法回答客户。

这仍然完全有可能在不实际打开页面的情况下抓取数据，只需发出一个请求来获取 cookie，另一个请求来获取数据。

出于所有意图和目的，如果 API/站点是公开的，那么数据也是公开的。如果您真的想保护它，则必须要求用户身份验证并小心将这些帐户提供给谁。这还可以进行审核并可能禁止似乎在抓取您的数据的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T10:56:28.830

另一种方法是一次性 GET/POST 令牌，例如您保存令牌和有效期，然后给脚本令牌，脚本使用[https://example.com/getinfo.php?t调用站点=token](https://example.com/getinfo.php?t=token)例如，您向客户端提供您的数据并删除令牌，因此没有人可以使用已经使用的令牌。

同样在任何情况下，您似乎都对 SSL 进行了调用，这很好并且更好地保留它，因为通过 HTTP 令牌无论是获取还是发布都是完全可见的，因此如果攻击者关闭连接然后尝试获取它的 URL坏的。

任何类型的恶意软件也可以这样做，因为在传输数据（令牌甚至您的“信息”）之后，很可能在 RAM 中未加密，因此可以在没有任何人注意的情况下将其拾取。

# iphone - 是否可以将 html 文本发送到 iMessage 并在我们的应用程序中将带有文本的图像发送到 iMessage？

> ID：11541953
> 
> 赞同：2
> 
> 时间：2012-07-18T12:57:49.157
> 
> 标签：iphone, objective-c, ios5

我是 iPhone 的初学者。我在我的应用程序中使用了 iMessage，因此是否可以在 iMessage 中同时发送带有文本的图像。并且可以在 iMessage 中发送 html 文本。给出建议和源代码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:07:26.250

不，这是不可能的，[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)唯一的支持文本。不支持格式或图像。

它还将通过 iMessage 发送消息，但将始终回退到 SMS。

# android - AsynTask 确定何时完成

> ID：11541959
> 
> 赞同：0
> 
> 时间：2012-07-18T12:58:16.083
> 
> 标签：android, asynchronous, android-asynctask

我想从一个调用 AsyncTask 的方法返回一个布尔值来执行 if order 来查找它是否完成。以前我调用了 .get() 方法（这很好），但这会暂停所有线程，我想要一个进度对话框。

我正在玩弄一个 for 循环的想法，该循环每 100 毫秒说一次睡眠/等待，然后检查 getStatus() 以查看它是否等于 Status.FINISHED，但这似乎是个坏主意。

下面是一小部分代码。

> ```
>  jData.theTask.execute(url);
> 
>   if(jData.theTask.getStatus() == AsyncTask.Status.FINISHED) {
>       if(!WebService.webServiceValid()) {
>              showMessage();
>              return false;
>          }
> 
>       return true;
>   }
> 
>   Log.d("fired", "false fired");
>   return false; 
> ```

该操作不会立即完成，因此它只是返回 false 并且由于操作尚未完成而发生竞争条件。如上所述，我可以将它包装在一个 for 循环中以定期检查 x 次，但我确信那里可能有更好的解决方案。

非常感谢

编辑：

似乎调用 .execute() 然后 .get() 实际上允许 UI 在等待来自 .get(long timeout, TimeUnit timeUnit) 的布尔值时生成我的进度对话框。这是我的问题的解决方案，但是我将把这个问题留到明天，以防有人对此发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:05:00.680

知道 AsyncTask 是否完成的最合适的地方是执行`onPostExecute`后调用的方法`doInBackground()`。您可以做的是根据后台活动的执行返回一个`Boolean`变量。`doInBackground()`当控件到达时，`onPostExecute()`您可以确信您的后台活动已经完成。

您使用的方式`AsyncTask`是不合适的，因为在`execute()`对`AsyncTask`对象的调用之后，控件返回到下一行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:32:32.977

将 if(jData.theTask.getStatus()==AsyncTask.Status.FINISHED) {} 块的内容移动到 onPostExecute() 内部

# iphone - 从 json 响应中获取 ID 的值

> ID：11541961
> 
> 赞同：0
> 
> 时间：2012-07-18T12:58:27.550
> 
> 标签：iphone, ios, facebook

我是 iPhone 应用程序开发的新手。我想从 Facebook 获取用户 ID（我的 ID）。我怎样才能得到身份证？控制台中的输出如下。

谢谢

```
- (void)request:(FBRequest *)request didLoad:(id)result
{
    NSLog(@"result is %@",result);

} 
```

控制台中的输出在这里：

```
 {   
 email = "kestwalg@gmail.com";
"first_name" = Gaurav;
gender = male;
hometown =     {
    id = 1231243212321;
    name = Haridwar;
};
id = 1213213231231;
"last_name" = K;
link = "http://www.facebook.com/kestwal.75";
locale = "en_US";
location =     {
    id = 123123123123;
    name = "New Delhi, India";
};
name = "Gaurav Kestwal";
timezone = "5.5";
"updated_time" = "2012-07-10T06:46:25+0000";
username = "gaur.75";
verified = 1;
work =     (
            {
        employer =             {
            id = 12312312312;
            name = "NKAPs Intellects Noida";
        };
        position =             {
            id = 213123123213;
            name = "iPhone Application Developer";
        };
        "start_date" = "0000-00";
    }
); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:05:45.367

试试看：

```
- (void)request:(FBRequest *)request didLoad:(id)result {
    NSString *jsonString = [NSString stringWithString:[result JSONRepresentation]];
    NSDictionary *userDict = [jsonString JSONValue];
    // do something with the values in the dictionary...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:03:01.193

实施[SBJson](https://github.com/stig/json-framework/)。

将 json 响应加载到 NSDictionary：

```
NSDictionary *myDictionary = [myJsonString JSONValue]; 
```

然后从字典中读取：

```
NSString *idString = [myDictionary objectForKey:@"id"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:04:55.597

你只需要解析它，幸运的是在 iPhone 中有很多方法可以很容易地做到这一点。例如，您可以使用此框架：[JSON 框架](https://github.com/stig/json-framework/)

# php - 减少数据库连接

> ID：11541962
> 
> 赞同：0
> 
> 时间：2012-07-18T12:58:35.787
> 
> 标签：php, jquery, mysql, database-connection

我目前正在为我的服务器制作一个小网页，其中显示了在其上玩的玩家的一些统计数据。它工作得很好，但我只是想知道是否可以减少与数据库的连接量。目前，我在页面中有一些 JQuery 代码会刷新部分内容以显示最新数据。现在，我以前从未使用过 JQuery，所以我这样做了：

```
<script>
 $(document).ready(function() {
     $("#blocks").load("blocks.php<? if($usePlayer){echo("?player=" . $player);} ?>");
     $("#global_stats").load("globalstats.php<? if($usePlayer){echo("?player=" . $player);} ?>");
     $("#top_entities").load("entities.php<? if($usePlayer){echo("?player=" . $player);} ?>");
   var blockRefresh = setInterval(function() {
      $("#blocks").load("blocks.php<? if($usePlayer){echo("?player=" . $player);} ?>");
   }, 5000);
   var globalStatsRefresh = setInterval(function() {
       $("#global_stats").load("globalstats.php<? if($usePlayer){echo("?player=" . $player);} ?>");
   }, 30000);

   $.ajaxSetup({ cache: false });
});
</script> 
```

问题是，我正在重新加载的页面的所有三个部分都需要一个 MySQL 数据库连接。目前，我在每个页面上都包含 db.php，但这似乎效率很低。什么是这样做的好方法呢？

哦，页面可以在这里看到：http: [//mc.centrility.nl/stats/](http://mc.centrility.nl/stats/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:39:54.783

好的，更详细的：

只与您的服务器 all.php 建立一个连接。正如 RoryPickering 所说，为此使用 $.ajax。

在服务器端，只有 all.php 被调用一次。

在那里将 db 连接设置为持久连接，因此您只需连接到数据库一次。

我怀疑您只能通过一次查询来获取所有数据，所以我想您将不得不多次查询数据库。

获取所有数据并将其转换为 JSON 格式，然后返回给客户端。

在客户端，将 JSON 数据拆分为您相应的区域/所需的子数据。

# php - phpquery codeigniter 如何

> ID：11541966
> 
> 赞同：2
> 
> 时间：2012-07-18T12:58:44.210
> 
> 标签：php, codeigniter, phpquery

有没有人有关于使用 phpQuery 和 CodeIgniter 的操作方法和教程？

我问是因为我想操纵某些 css 属性并换出某些 css 值。我本可以使用 JavaScript 来做到这一点，但是混合 PHP 和 JavaScript 很困难，所以这意味着要找到一种方法来操作 HTML 和 css 来做到这一点。无论如何，希望大家能提供帮助。

所以我希望加载 phpquery 并像任何其他库一样使用它

```
$this->load->libary('phpquery');
$this->phpquery->pq('div > p')->findall(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T23:57:05.763

`onefile`通过使用phpQuery 版本作为助手，我让 phpQuery 在我当前的 CodeIgniter 项目中工作。

### 安装

1.  下载[phpQuery-onefile.zip](http://code.google.com/p/phpquery/downloads/list)
2.  提取并复制 phpQuery-onefile.php 到`/your/ci/proj/application/helpers/phpQuery_helper.php`
3.  像普通助手一样加载它。

### 用法

这是我工作的一个非常基本的例子。

```
//to load in a controller
$this->load->helper('phpQuery');

//I'm using phpQuery in one of my libraries. So, load like this..
$ci =& get_instance();
$ci->load->helper('phpQuery');

//now use phpQuery like normal.  
phpQuery::newDocumentHTML('<div id="test">This is a test.</div');

$testElement = pq('#test');

echo $testElement->html(); //This is a test. 
```

### 或者

您也可以只使用普通的旧`include_once('path/to/phpQuery-onefile.php');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:13:46.233

你试过 PHP 的 DomDocument 类吗？

[http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)

这应该有点用吧？

# android - 频繁的http请求

> ID：11541973
> 
> 赞同：2
> 
> 时间：2012-07-18T12:58:56.033
> 
> 标签：android, http

我需要发送一系列 http 请求：1 分钟内每秒 1 个。AFAIK 它会影响电池的使用。处理此类问题有什么特殊策略吗？

UPD：我必须使用 POST 请求，这是我的 POST 请求函数：

```
 URL url;
  HttpURLConnection connection = null;
  try {
    //Create connection
    url = new URL(targetURL);
    connection = (HttpURLConnection)url.openConnection();
    connection.setRequestMethod("POST");
    connection.setConnectTimeout(3000);
    connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

    connection.setRequestProperty("Content-Length", "" + 
             Integer.toString(urlParameters.getBytes().length));
    connection.setRequestProperty("Content-Language", "en-US");

    if(headers != null){
        for (String key : headers.keySet()) {
            connection.setRequestProperty(key, headers.get(key));
        }
    }

    connection.setUseCaches (false);
    connection.setDoInput(true);
    connection.setDoOutput(true);

    //Send request
    DataOutputStream wr = new DataOutputStream (
                connection.getOutputStream ());
    wr.writeBytes (urlParameters);
    wr.flush ();
    wr.close ();

    //Get Response  
    InputStream is = connection.getInputStream();
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    String line;
    StringBuffer response = new StringBuffer(); 
    while((line = rd.readLine()) != null) {
      response.append(line);
      response.append('\r');
    }
    rd.close();

    Log.d("response", response.toString());

    return response.toString();

  } catch (Exception e) {

    e.printStackTrace();
    return null;

  } finally {

    if(connection != null) {
      connection.disconnect(); 
    }
  } 
```

是否可以采取任何措施来提高该问题的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T13:09:41.753

这是来自 Google I/O 的一段关于这个主题的视频：

[谷歌 I/O](http://www.youtube.com/watch?list=PL46069800A957F535&v=PwC1OlJo5VM&feature=player_detailpage#t=1038s)

简而言之：

每个请求都会将无线电从待机状态唤醒并将其转为全功率。发送请求后，它会保持这种状态一段时间，然后在低功耗状态下再停留一段时间，最后再次进入待机状态。

如果您执行一系列小请求，每个请求都会触发无线电全功率，如果请求之间的间隔太短，它将永远不会进入待机模式。

但是，如果您累积您的请求（如果您的应用确实不需要如此频繁地显示一些远程数据）并将它们作为批次发送但不那么频繁，它将触发更少的无线电并节省电池寿命。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:11:56.620

不知道你的问题是什么，但你以某种方式回答了自己 - 更多的活动比更少的活动更消耗电池。这太明显了，所以假设您想减少电池使用量，那么特殊策略是……嗯，最终会减少您的活动。对您的 HTTP 调用进行分组，重新设计服务器端以提高效率，批量执行调用以使用无线电的完整电源状态。

# c# - 如何使用 BinaryWriter 写入大文件

> ID：11541978
> 
> 赞同：0
> 
> 时间：2012-07-18T12:59:05.117
> 
> 标签：c#, binaryfiles, binarywriter

我有一些编写大型二进制文件的程序。我遇到了这个问题：有时我的程序在文件写入时崩溃而没有抛出任何错误（块捕获不执行。我编写了一些测试控制台应用程序来查找并解决这个问题。像这样：

```
static void Main(string[] args)
{
    for (int j = 0; j < 100; j++)
    {
        string fileName = @"D:\Users\nimci\Desktop\buf\"+j+".bin";
        using (var output =
            new BinaryWriter(File.Open(fileName, FileMode.Create, FileAccess.Write)))
        {
            for (int i = 0; i < 4000000; i++)
            {
                output.Write(i);
                //if(i%1000==0)   Thread.Sleep(1);
            }
        }
    }
} 
```

我有这样的结果：有些文件的大小为 0。例如编号为 8、10、15、17、...的文件

在我家（功能较弱）的计算机上，所有文件都已正确写入，在我的工作计算机上，其中一些文件的大小为 0。如果我取消注释 Thread.Sleep(1); （或以其他方式减慢我的程序）所有文件在我的工作计算机上也是正确的，但是这样的“修复”在我的服务器计算机上不起作用。谁能解释发生了什么错误，我该如何解决？我尝试使用 try-cath-finally 代替使用，但 catch 块不会捕获此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:01:43.993

尝试添加冲洗：

```
 for (int i = 0; i < 4000000; i++)         
        {         
            output.Write(i);         
            //if(i%1000==0)   Thread.Sleep(1);         
        }  
        output.Flush(); 
```

# text - ElasticSearch 查询问题

> ID：11541984
> 
> 赞同：0
> 
> 时间：2012-07-18T12:59:27.843
> 
> 标签：text, range, elasticsearch

我有这个查询，其中包含范围、文本和排序。当我将范围与排序或文本与排序一起使用时，它可以工作，但是当我尝试将所有三个一起使用时，它会引发错误：

“解析失败：无法解析源”

我不确定为什么它不起作用，因为错误不是很清楚。我使用 jsonlint.com 检查了 JSON，它是有效的。我可以不使用文本和范围查询的组合吗？

```
{
   "query" : {       
       "text" : {
          "Content" : "fight"
       },
       "range" : {
         "UpdateTime" : {
            "from" : "20120601T000000",
            "to" : "20120630T235959"
         }
       }        
    },
    "sort" : [{ "UpdateTime" : {"order" : "desc"} }]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T14:07:02.523

查询元素内部只能包含一个查询。如果您想通过范围和文本来限制搜索，您需要将这两个查询组合成一个查询，或者将其中一个用作查询，另一个用作过滤器。

使用布尔查询组合这两个查询将如下所示：

```
{
    "query" : {       
        "bool" : {
            "must" : [
                {
                    "text" : {
                        "Content" : "fight"
                    }                    
                },
                {
                    "range" : {
                        "UpdateTime" : {
                            "from" : "20120601T000000",
                            "to" : "20120630T235959"
                        }
                    }
                }
            ]
        }
    },
    "sort" : [{ "UpdateTime" : {"order" : "desc"} }]
}' 
```

使用过滤器它看起来像这样：

```
{
    "query" : {       
        "text" : {
            "Content" : "fight"
        }                    
    },
    "filter" : {
        "range" : {
            "UpdateTime" : {
                "from" : "20120601T000000",
                "to" : "20120630T235959"
            }
        }
    },
    "sort" : [{ "UpdateTime" : {"order" : "desc"} }]
} 
```

使用过滤器会影响构面的计算方式。有关详细信息，请参阅elasticsearch 文档的[过滤器页面](http://www.elasticsearch.org/guide/reference/api/search/filter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:06:53.833

使用这样的布尔查询并且它有效。

```
{
    "query": {
        "bool": {
            "must": {     
                "range": {
                    "UpdateTime": {
                        "from": "20120601T000000",
                        "to": "20120630T235959"
                    }
                }                
            },
            "must_not": { 
               "text": {
                    "Content": "fight"
                }
           }
        }
    }
} 
```

# android - Android socket编程模拟器连接故障

> ID：11541986
> 
> 赞同：1
> 
> 时间：2012-07-18T12:59:31.810
> 
> 标签：android, android-emulator

我正在为我的实习项目在 android 上编写一个服务器客户端应用程序。所有客户端都可以在本地主机上以服务器权限相互发送消息。首先，我编写了服务器和客户端，但我无法在本地主机上连接模拟器，我必须在同一台计算机上运行所有模拟器。我检查了其他问题和答案，但它们对我不起作用。我的问题是如何将模拟器（客户端和服务器）相互连接？我尝试了 10.0.2.2 并重定向端口但不起作用。谁能帮我一个简单的项目连接客户端和服务器并发送和接收一个简单的字符串？非常感谢....

# jquery - 防止用户使用 jQuery 在文本框中输入非数字

> ID：11541990
> 
> 赞同：2
> 
> 时间：2012-07-18T12:59:35.927
> 
> 标签：jquery, textbox

> **可能重复：**
> [如何使用 jQuery 在 HTML 输入框中只允许数字（0-9）？](https://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery)

我有一个 jquery 片段，它只允许特定文本框中的数字。如果用户键入字母/特殊字符，它根本不允许字符进入文本框。但它不起作用。

```
$("#PostalCode").keydown(function (e) {
            if (e.shiftKey || e.ctrlKey || e.altKey) { // if shift, ctrl or alt keys held down
                e.preventDefault();         // Prevent character input
            } else {
                var n = e.keyCode;
                if (!((n == 8)              // backspace
                        || (n == 46)                // delete
                        || (n >= 35 && n <= 40)     // arrow keys/home/end
                        || (n >= 48 && n <= 57)     // numbers on keyboard
                        || (n >= 96 && n <= 105))   // number on keypad
                        ) {
                    alert("in if");
                    e.preventDefault();     // Prevent character input
                }
            }
        }); 
```

每当我输入非数字（字母或特殊字符）时都会显示警报消息，这意味着我的逻辑可能是正确的。但是字符仍然显示在文本框中，这意味着`e.preventDefault()`. 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:03:57.673

根据这个[Opera preventDefault() on keydown 事件，](https://stackoverflow.com/questions/4773868/opera-preventdefault-on-keydown-event)一些浏览器不支持在 keydown 上的 preventDefault。你会是这种情况吗？

也许您可以尝试使用按键？

那或者你可以使用正则表达式并用“”替换无效字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:10:27.557

有趣的是，如果您在两者之间没有警报，[它会起作用，并提醒代码中断。](http://jsfiddle.net/poikl/z9Af6/)

# android - 如何为键盘上的xml中的功能键设置不同的背景？

> ID：11541993
> 
> 赞同：6
> 
> 时间：2012-07-18T12:59:44.240
> 
> 标签：android, xml, function, keyboard, key

我正在为 Android 开发一个键盘应用程序。我尝试为普通键和功能键设置不同的背景，但它不起作用：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Functional keys. -->

    <item android:state_single="true" android:state_pressed="true"
          android:drawable="@drawable/btn_keyboard_special" />
    <item android:state_single="true"
          android:drawable="@drawable/btn_keyboard_special" />

    <!-- Toggle keys. Use checkable/checked state.   -->

    <item android:state_checkable="true" android:state_checked="true" android:state_pressed="true"
          android:drawable="@drawable/btn_keyboard_key_dark_pressed_on" />
    <item android:state_checkable="true" android:state_pressed="true"
          android:drawable="@drawable/btn_keyboard_key_dark_pressed_off" />
    <item android:state_checkable="true" android:state_checked="true"
          android:drawable="@drawable/btn_keyboard_key_dark_normal_on" />
    <item android:state_checkable="true"
          android:drawable="@drawable/btn_keyboard_key_dark_normal_off" /> 

    <!-- Normal keys -->

    <item android:state_pressed="true"
          android:drawable="@drawable/glow" />
    <item android:drawable="@drawable/btn_keyboard_key_light_normal" />
</selector> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T01:42:45.753

这个黑客对我有用。

```
public class MyKeyboardView extends android.inputmethodservice.KeyboardView {

    Context context;
    public MyKeyboardView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
        this.context = context ;
    }

    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        Paint paint = new Paint();
        paint.setTextAlign(Paint.Align.CENTER);
        paint.setTextSize(25);
        paint.setColor(Color.RED);

        List<Key> keys = getKeyboard().getKeys();
        for(Key key: keys) {

     if(key.pressed){
                NinePatchDrawable npd = (NinePatchDrawable)context.getResources().getDrawable(R.drawable.glow);
                npd.setBounds(key.x,key.y,key.x+key.width,key.y+key.height);
                npd.draw(canvas);
            if(key.label != null)
                canvas.drawText(key.label.toString(), key.x + (key.width/2), key.y + 25, paint);
     }else if(key.modifier){  // boolean that defines key is function key

            NinePatchDrawable npd = (NinePatchDrawable)context.getResources().getDrawable(R.drawable.btn_keyboard_special);
            npd.setBounds(key.x,key.y,key.x+key.width,key.y+key.height);
            npd.draw(canvas);
            if(key.label != null)
                canvas.drawText(key.label.toString(), key.x + (key.width/2), key.y + 25, paint);
      }

        break;
        }
    } 
```

}

将您的布​​局 xml 更改为

```
 <com.example.yourpackage.MyKeyboardView
        android:id="@+id/keyboardview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:visibility="gone"
        android:background="#000000"
            android:keyBackground="@drawable/keyboard_selector" /> 
```

您可以根据需要在 onDraw() 中编写更多条件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T05:08:04.387

有一个名为 android:keyBackground 的 XML 属性。只需将此属性设置为可绘制对象，就可以了。

将此属性添加到 input.xml 中的 KeyboardView：

```
<KeyboardView android:keyBackground="@drawable/buttonbgselector" .../> 
```

我假设这是您用来为所有键分配背景颜色的方法。

对于单独的功能键，创建一个适当的前景可绘制图像以覆盖整个键并将其分配到`keyIcon`键盘布局 xml 的 xml 中。

为了完美，请使用覆盖相同尺寸的背景图像，以防您不想更改 keyIcon

# php - 无法连接到 Bluehost 服务器以使用 imap_open 从 PHP 脚本读取邮件

> ID：11541998
> 
> 赞同：0
> 
> 时间：2012-07-18T12:59:54.913
> 
> 标签：php, imap, bluehost

我正在尝试连接到 Bluehost 以阅读我的电子邮件（在 Bluehost 上的一个域上）。我尝试了以下代码：

```
imap_open("{mail.domain.com:993/imap/ssl}INBOX", $email, $password); 
```

也试过

```
imap_open("{box***.bluehost.com:993/imap/ssl}INBOX", $email, $password);

imap_open("{box***.bluehost.com:995/imap/ssl}INBOX", $email, $password); 
```

但它显示连接超时错误。

我使用 phpinfo() 进行了检查，启用了 imap 和 ssl 支持。

我使用了端口 995、993 110 和 143。

我使用 Microsoft Outlook 作为我的电子邮件客户端。我试图从 Outlook 获取详细信息，并将服务器显示为 pop3 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T21:32:28.860

```
$mailboxpath = '{boxXXX.bluehost.com:143/imap}';
$username = 'a@b.c';
$password = '?????';

$imap = imap_open($mailboxpath, $username, $password);

$folders = imap_list($imap, $mailboxpath, "*");

echo "<ul>";
foreach ($folders as $folder)
{
        $folder = str_replace($mailboxpath, "", imap_utf7_decode($folder));
        echo '<li><a href="mail.php?folder=' . $folder . '&func=view">' . $folder . '</a></li>';
print "\n";
}
echo "</ul>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:03:00.817

你有专用IP吗？如果启用了 IMAP，您可能还想检查您的 PHP INI 文件。