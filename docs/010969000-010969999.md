# StackOverflow 问答 10969000-10969999

# spring - 带有 Spring 和 Jackson API 的 BeanCreationException

> ID：10969002
> 
> 赞同：1
> 
> 时间：2012-06-10T13:15:19.190
> 
> 标签：spring, jackson

在尝试将 Jackson API 与 Spring 3.0.6 一起使用时，我遇到了以下异常。我在类路径中有 v1.8.9（core-asl，mapper-asl）的杰克逊罐子，但仍然由于一些冲突的罐子我面临错误::

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#8': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter]: Constructor threw exception; nested exception is java.lang.NoSuchMethodError: org.codehaus.jackson.type.JavaType.<init>(Ljava/lang/Class;I)V
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:965) [org.springframework.beans-3.0.6.RELEASE.jar:]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911) [org.springframework.beans-3.0.6.RELEASE.jar:]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485) [org.springframework.beans-3.0.6.RELEASE.jar:]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [org.springframework.beans-3.0.6.RELEASE.jar:]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270) [org.springframework.beans-3.0.6.RELEASE.jar:]
    ... 30 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter]: Constructor threw exception; nested exception is java.lang.NoSuchMethodError: org.codehaus.jackson.type.JavaType.<init>(Ljava/lang/Class;I)V
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:141) [org.springframework.beans-3.0.6.RELEASE.jar:]
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:74) [org.springframework.beans-3.0.6.RELEASE.jar:]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:958) [org.springframework.beans-3.0.6.RELEASE.jar:]
    ... 34 more
Caused by: java.lang.NoSuchMethodError: org.codehaus.jackson.type.JavaType.<init>(Ljava/lang/Class;I)V
    at org.codehaus.jackson.map.type.TypeBase.<init>(TypeBase.java:13) [jackson-mapper-asl-1.8.9.jar:]
    at org.codehaus.jackson.map.type.SimpleType.<init>(SimpleType.java:39) [jackson-mapper-asl-1.8.9.jar:]
    at org.codehaus.jackson.map.type.SimpleType.constructUnsafe(SimpleType.java:56) [jackson-mapper-asl-1.8.9.jar:]
    at org.codehaus.jackson.map.ObjectMapper.<clinit>(ObjectMapper.java:188) [jackson-mapper-asl-1.8.9.jar:]
    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.<init>(MappingJacksonHttpMessageConverter.java:56) [org.springframework.web-3.0.6.RELEASE.jar:]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [:1.6.0_24]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) [:1.6.0_24]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) [:1.6.0_24]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532) [:1.6.0_24]
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126) [org.springframework.beans-3.0.6.RELEASE.jar:]
    ... 36 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:29:35.653

Jackson 对 Spring 3.0.6 的正确版本依赖是 1.4.2（每个 Spring 的 pom），尝试用这个版本替换 1.8.9，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:56:56.403

感谢您的回复。但是，我可以通过一些研发来解决这个问题……我不需要去 Jackson v1.4.2，而是使用相同的版本，并在 JBoss 配置本身中稍作修改。

在 JBoss 中，转到 modules/org/codehaus/jackson/jackson-core-asl/main/

这里 JBoss 使用它自己的 Jackson API 版本（尽管我们在类路径中有不同的版本）。所以我复制了 v1.8.9 并在 module.xml 中进行了相应的更改（在同一目录中）。mapper jars v1.8.9 重复了类似的事情。

有了这个，我可以解决问题并再次运行...... :)

# json - Sinatra 路由返回枚举器而不是 json 对象

> ID：10969008
> 
> 赞同：0
> 
> 时间：2012-06-10T13:16:08.663
> 
> 标签：json, sinatra, ruby-datamapper

我正在尝试在 sinatra 路线中执行以下操作：

```
get '/posts/:id' do
  Post.find(params[:id]).to_json
end 
```

但这是返回一个枚举器。

如何访问 json 格式的单个对象？

PS我正在使用数据映射器

***编辑***

我设法通过使用*get*而不是*find*返回 json 值：

```
get '/posts/:id' do
  Post.get(params[:id]).to_json
end 
```

如果有人可以解释为什么我会接受答案，以免浪费问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:32:56.457

`find`DataMapper 中不存在。它是 Ruby 的 Enumerable 的一个方法，它返回一个枚举器对象；您正在尝试将其转换为 JSON。

DataMapper 对象显然实现了 Enumerable，这就是为什么您不会得到*未定义的方法*异常的原因。

枚举#find：[http ://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T16:01:28.703

Find 方法返回一个枚举器而不是条目。如果您只期望一个条目：试试这个

```
Post.first(params[:id]).to_json 
```

# azure - 如何删除包含租用 blob 的 Azure 存储帐户？

> ID：10969012
> 
> 赞同：158
> 
> 时间：2012-06-10T13:17:12.657
> 
> 标签：azure, azure-storage, vhd

我在玩 Windows Azure 持久虚拟机。最后，我删除了虚拟机（成功）并尝试删除关联的存储帐户。

删除存储帐户的请求失败。

在预览门户 (manage.windowsazure.com) 上，当我删除存储帐户时出现此错误：

```
Failed to delete Storage account 'portalvhdscwtwycpsxxxxx'

Details:

Storage account portalvhdscwtwycpsxxxxx has 1 container(s) which have an active image and/or disk artifacts. Ensure those artifacts are removed from the image repository before deleting this storage account. 
```

在以前的门户网站 (windows.azure.com) 上，我收到此错误：

```
Submit Failed

Storage account portalvhdscwtwycpsxxxxx has 1 container(s) which have an active image and/or disk artifacts. Ensure those artifacts are removed from the image repository before deleting this storage account. 
```

尝试在 Azure 存储资源管理器上删除 blob 本身（30GB VHD）我收到此错误：

```
There is currently a lease on the blob and no lease ID was specified in the request. 
```

所以我的评估是这个 blob 是租用的（由以前的，现在删除的虚拟机租用），除非我能得到这个租用 ID，否则我不能删除它。

问题是：如何删除此 blob 以及存储帐户？

* * *

## 回答 #1

> 赞同：334
> 
> 时间：2012-06-10T13:17:14.653

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-12-14T13:34:46.133

不幸的是，[费尔南多的回答](https://stackoverflow.com/a/10969013/165753)对我不起作用，因为存储是“孤立的”，因为我在删除存储之前删除了它的虚拟机。我找不到从门户网站执行此操作的方法，因此我安装了[azure-cli](https://azure.microsoft.com/en-us/documentation/articles/xplat-cli-install/#how-to-install-the-azure-cli)，并在身份验证后运行以下命令：

```
azure storage account delete <my-account> 
```

这失败了，并且错误消息包含罪魁祸首的名称，例如：

`error: Storage account <my-account> has some active image(s) and/or disk(s), e.g. <my-image>. Ensure these image(s) and/or disk(s) are removed before deleting this storage`

然后我删除了有问题的图像

`azure vm disk delete <my-image>`

并再次尝试删除存储，这次成功。

`azure storage account delete <my-account>`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-11T01:19:43.970

不幸的是，在某些情况下，VM 已被删除，但 Disks 显示附加到 blob（30GB VHD）的 VM 排除了删除。此外，在使用 Azure 存储资源管理器的情况下，您会发现无法删除的 orfan 但已租用的 VHD blob，并且预览门户上没有参考。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-29T07:50:45.203

转到虚拟机，然后单击光盘。标记光盘并选择底部的删除光盘。您现在可以选择是否要保留或删除相应的 vhd。

重要的是首先通过虚拟机删除磁盘而不是通过存储删除。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-12-08T12:46:39.380

您可以使用[Iaas Management Studio](http://iaas.ao-is.com/)：中断租约，删除 blob，然后删除孤立的图像。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-11-17T19:01:33.040

就我而言，由于 vmimages 无法删除存储。

使用 power shell 命令

**获取azurevmimage | Where-Object -Property Category -in -Value "user"**

列出所有图像要删除**所有您的图像**，请使用以下脚本：

```
get-azurevmimage | Where-Object -Property Category -in -Value "user" |   
foreach {
        echo "remove $($_.ImageName)"
        Remove-AzureVMImage –ImageName $($_.ImageName)
        } 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-01-14T13:13:56.150

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-09T06:25:12.557

在删除您的存储帐户之前进行检查；您创建的每个存储帐户都必须有关联的虚拟机、磁盘和映像。转到 Azure 门户

在左侧窗格中选择虚拟机选项卡单击实例映像和磁盘

请注意，单个虚拟机的附加磁盘显示在磁盘区域。在删除虚拟机之前，首先删除关联的磁盘，然后删除具有磁盘的虚拟机。然后最后删除存储帐户。如果与您要删除的帐户相关联，还请注意同一左侧窗格中的网络。

在新更新的 Azure 门户中，许多上述配置页面都已更改。您可以在“所有资源”窗格中看到图像和磁盘选项。在较新版本的 Azure 门户中，您可以在其相邻的垂直窗格中轻松识别 VM 及其关联的磁盘及其存储帐户，所有这些都在一个页面中具有不同的图标图像。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-19T08:51:15.383

有时我们通过新门户删除 azure 存储帐户，但我们无法删除它并收到此错误：“无法删除存储帐户'jason1disks796'。错误：**无法删除存储帐户，因为其工件正在使用中。**“</p>

我们可以使用 PowerShell 列出存储帐户（**ARM 模块**）的所有 VHD blob：

```
PS > Login-AzureRmAccount
PS > $RGName = "jason1"
PS > $SAName = "jason1disks796"
PS > $ConName = "vhds"
PS > $TempObj = New-Object -TypeName PSCustomObject
PS > $TempObj |Add-Member -Name BlobName -MemberType NoteProperty -Value $null
PS > $TempObj |Add-Member -Name LeaseState -MemberType NoteProperty -Value $null
PS > $Keylist = Get-AzureRmStorageAccountKey -ResourceGroupName $RGName -StorageAccountName $SAName
PS > $Key = $Keylist[0].Value
PS > $Ctx = New-AzureStorageContext -StorageAccountName $SAName -StorageAccountKey $Key
PS > Get-AzureStorageContainer -Context $ctx
CloudBlobContainer : Microsoft.WindowsAzure.Storage.Blob.CloudBlobContainer
Permission         : Microsoft.WindowsAzure.Storage.Blob.BlobContainerPermissions
PublicAccess       : Off
LastModified       : 1/19/2017 1:27:21 AM +00:00
ContinuationToken  :
Context            : Microsoft.WindowsAzure.Commands.Common.Storage.AzureStorageContext
Name               : vhds
PS > $List = Get-AzureStorageBlob -Blob *.vhd -Container $ConName -Context $Ctx
PS > $List | ForEach-Object { $TempObj.BlobName = $_.Name; $TempObj.LeaseState = $_.ICloudBlob.Properties.LeaseState; $TempObj }

BlobName              LeaseState
--------              ----------
SQL20170119092405.vhd     Leased

PS > Get-AzureStorageBlob -Blob * -Container $con -Context $ctx | Remove-AzureStorageBlob
PS > Remove-AzureRmStorageAccount -ResourceGroupName $RGname -Name $SAName 
```

如果您的存储帐户在**ASM 模块**中，您可以使用此脚本删除存储帐户：

```
Add-AzureAccount
$SAName = "jason1161"
$ConName = "vhds"
$TempObj = New-Object -TypeName PSCustomObject
$TempObj |Add-Member -Name BlobName -MemberType NoteProperty -Value $null
$TempObj |Add-Member -Name LeaseState -MemberType NoteProperty -Value $null
$Keylist = Get-AzureStorageKey -StorageAccountName $SAName
$Key = $Keylist.primary
$Ctx = New-AzureStorageContext -StorageAccountName $SAName -StorageAccountKey $Key
$List = Get-AzureStorageBlob -Blob *.vhd -Container $ConName -Context $Ctx
$List | ForEach-Object { $TempObj.BlobName = $_.Name; $TempObj.LeaseState = $_.ICloudBlob.Properties.LeaseState; $TempObj }
PS > Get-AzureStorageBlob -Blob * -Container $con -Context $ctx | Remove-AzureStorageBlob
PS > Remove-AzureStorageAccount -Name $SAName 
```

另外还有一种情况，当我们使用portal删除存储账户时，这个存储账户中没有容器或者blob（**一个空的存储账户**，我们无法通过PowerShell或者portal找到这个存储账户中的blob或者container） ，以及错误消息“无法删除存储帐户 'jason1disks796'。错误：无法删除存储帐户，因为其工件正在使用中”。**在这种情况下，我们可以创建一个新 VM 并将存储帐户指定给有问题的存储帐户，然后再次将其删除。**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-07T02:00:55.070

对于那些依赖 GUI 管理 Azure 并且不知道使用 PowerShell 或执行其他答案的人，您现在可以在尝试删除存储时通过选中“删除未附加的图像”来删除卡住的存储帐户。

它会自动删除存储而没有太多麻烦。

# r - 如何以独立于操作系统的方式从 R 打开本地 html 文件？

> ID：10969015
> 
> 赞同：9
> 
> 时间：2012-06-10T13:17:40.223
> 
> 标签：r

如何以独立于操作系统的方式从 R 打开本地 html 文件？

出于演示目的，假设文件被调用`test.html`并且位于工作目录中。

### 最初的想法

*   `system('gnome-open test.html')`
    *   这适用于 Ubuntu
*   `browseURL(paste('file://', getwd(),'test.html', sep='/'))`
    *   这适用于 Ubuntu，但感觉有点像 hack，我不确定它是否适用于 Windows。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T13:30:07.487

您可能会发现我的`open.file.in.OS`功能很有用，来源可以在[这里](https://github.com/rapporter/pander/blob/master/R/convert.R)找到。

关于此函数作用的简短摘要：

1.  检查平台
2.  基于平台，调用：
    *   `shell.exec`在 Windows 上
    *   `open`在`system`Mac 上
    *   并`xdg-open`在`system`其他类 Unix 操作系统上
3.  `shQuote`对私有文件的使用

* * *

**更新**：现在查看包`openFileInOS`中的内容。`pander`

```
library(pander)
openFileInOS("d:/del/dt/a.html") 
```

*参考*：此函数是 David Hajage`convert`函数的分叉版本，可在[此处](https://github.com/eusebe/ascii/blob/master/R/export.r)找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T03:31:10.747

*我只是想将@daroczig 给出的**答案从评论中提取出来并作为答案。**如果@darcozig 想将此作为单独的答案发布，我将删除此副本。*

```
openHTML <- function(x) browseURL(paste0('file://', file.path(getwd(), x))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T13:30:56.617

使用该`file.path`函数构造文件路径。

```
 file.path(..., fsep = .Platform$file.sep)

 ...: character vectors.

fsep: the path separator to use. 
```

默认情况下，它将使用当前的操作系统路径分隔符。

例如

```
> file.path ("", "home", "phoxis", "paragraph")
[1] "/home/phoxis/paragraph" 
```

这会生成我的文件“/home/phoxis/paragraph”

注意开头的空白字符串“”。在我的情况下，这会强制添加一个额外的“/”来生成绝对路径。调整以根据您的需要生成绝对或相对路径并查看`?file.path`

我认为这将满足您的需求

# java - 忽略来自混淆代码中某个方法的调用

> ID：10969016
> 
> 赞同：1
> 
> 时间：2012-06-10T13:17:42.230
> 
> 标签：java, obfuscation, stack-trace, minecraft

我正在尝试查找调用方方法的方法签名。我需要这样做，因为我正在编写的代码被混淆并且很多方法被重载。我试图忽略来自具有签名的某个方法的调用目前我的代码看起来像这样

```
StackTraceElement caller = Thread.currentThread().getStackTrace()[2];
String cn = caller.getClassName();
String mn = caller.getMethodName();
if(cn == "net.minecraft.client.Minecraft" && (mn == "displayGuiScreen" || mn == "a")){ // displayGuiScreen is for non-obfuscated, a is for obfuscated. Doesn't work because 2 other methods that call it are also called a when obfuscated
    System.err.println("Skipped");
    return;
} 
```

谁能帮我这个？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:00:23.987

首先验证您的代码在没有混淆的情况下工作。

其次，找到混淆图，它是混淆程序的输出。

第三验证您的混淆器是否更新了字符串以匹配地图中详细说明的新方法签名。奇怪的是只有类名和方法名发生了变化。

如果您没有匹配项，请查看您的混淆器以获取重写看起来像反射调用的字符串的选项，或者使用 asm 重写未获得更新的已编译类中的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:37:19.380

尝试使用[asm 库](http://asm.ow2.org/)，我刚刚发现我认为与您相关的帖子，尝试阅读并找出示例，[发布](https://stackoverflow.com/questions/4024587/get-callers-method-java-lang-reflect-method)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T13:53:11.573

您也许可以将 AspectJ 与编译时编织一起使用。如果调用者是 displayGuiScreen 方法，您可以使用[around 建议](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-advice.html)什么都不做。这仅在您编译所有调用您的类的代码时才有效。编译时编织是必要的，因为您必须在混淆之前以及为您的方法的所有调用者执行此操作。你应该能够做这样的事情：

```
aspect IgnoreCallsFromDisplayGuiScreen {
    void around(): call(void MyClass.myMethod()) && withincode(void Minecraft.displayGuiScreen()) {
        return;
    }
} 
```

# asp.net-mvc-4 - WebApi POST 在 AppHarbor 上返回 404

> ID：10969018
> 
> 赞同：1
> 
> 时间：2012-06-10T13:18:11.923
> 
> 标签：asp.net-mvc-4, asp.net-web-api, appharbor

我有一个托管在 AppHarbor 上的 Asp.net WebAPI 服务，它在 POST 请求上引发 404 错误。尽管 MVC 4 控制器的 POST 托管在同一个虚拟目录中，但它可以完美运行。

相同的 WebApi 在 localhost 上工作。我尝试了以下选项但没有运气：

```
<system.webServer>
   <validation validateIntegratedModeConfiguration="false" />
   <modules runAllManagedModulesForAllRequests="true" >
      <remove name="WebDAVModule" />
   </modules>
   <handlers>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers> 
```

我还尝试设置基于操作的 URL 以检查它是否有效，但没有运气。我什至用以下方法装饰了该方法：

```
 [AcceptVerbs("POST")] 
```

是否需要将任何内容添加到 web.config 或我缺少的任何身份验证设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:47:41.850

解决了，是因为数据库问题。我查看了返回的默认 try..catch

```
HttpStatusCode.NotFound (404) 
```

而不是 500 错误代码。它现在启动并运行。

# android - 从Android小部件的文本框中检索文本？

> ID：10969019
> 
> 赞同：2
> 
> 时间：2012-06-10T13:18:15.823
> 
> 标签：android, android-widget, textview

我的 App 小部件有一个 TextView，它在与用户交互时会发生文本更改。现在我如何在运行时从中检索文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T13:20:04.513

你不能。应用小部件是只写的：您可以向它们推送数据，但不能读取它们。

相反，当您使用新文本更新应用小部件时，您需要将该文本存储在某个地方，也许是在一个文件中。

# html - 如何适应 div 的高度以包裹其浮动的孩子

> ID：10969023
> 
> 赞同：28
> 
> 时间：2012-06-10T13:18:25.897
> 
> 标签：html, css, css-float

我有一个 div 包裹着两个孩子，一个向左浮动，另一个向右浮动。我想在孩子周围放置边框和背景，但 div 的高度为 0，因为它不会调整大小以适应孩子。

这是它的一个例子：http: [//jsfiddle.net/VVZ7j/17/](http://jsfiddle.net/VVZ7j/17/)

我希望红色背景一直向下。我试过 height:auto，但没有用。

任何和所有的帮助将不胜感激，谢谢。

PS如果可能的话，我不想使用任何javascript。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-10T13:21:46.713

这是使用浮点数时的常见问题。有几种常见的解决方案，我根据个人喜好订购了（最好的方法优先）：

1.  使用 ::after CSS 伪元素。这被称为“clearfix”，适用于 IE8 及更高版本。如果您需要与早期版本的 IE 兼容，[这个答案应该会有所帮助](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)。[例子](http://jsfiddle.net/dX2Xh/74/)。

    ```
    .parentelement::after {
        content: "";
        display: table;
        clear: both;
    } 
    ```

2.  将两个浮动添加到具有 CSS 属性的容器中`overflow: auto`或`overflow: hidden`. 但是，这种方法可能会导致问题（例如，当工具提示与父元素的边缘重叠时，会出现滚动条）。[例子](http://jsfiddle.net/dX2Xh/1/)。

    ```
    <div style="overflow: auto">
        <div style="float: left"></div>
        <div style="float: left"></div>
    </div> 
    ```

3.  向父元素添加设置高度。[例子](http://jsfiddle.net/dX2Xh/4/)。

    ```
    <div style="height: 200px">
        <div style="float: left"></div>
        <div style="float: left"></div>
    </div> 
    ```

4.  使父元素浮动。[例子](http://jsfiddle.net/dX2Xh/2/)。

    ```
    <div style="float: left">
        <div style="float: left"></div>
        <div style="float: left"></div>
    </div> 
    ```

5.  在浮动后添加一个 div `clear: both`。[例子](http://jsfiddle.net/dX2Xh/)。

    ```
    <div style="float: left"></div>
    <div style="float: left"></div>
    <div style="clear: both"></div> 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T13:19:45.657

添加`overflow: hidden;`到#wrap。这是一个`clear fix`. 这里有一些关于它的文档：http: [//positioniseverything.net/easyclearing.html](http://positioniseverything.net/easyclearing.html)

LE：也有多种方法可以实现这一点，具体取决于浏览器的兼容性：

1.  添加溢出：隐藏到父容器。

`#wrap { overflow: hidden; }`

1.  使用伪元素添加`clear: both`.

`#wrap:after { clear: both; content: ""; display: table;}`

1.  最常用的技术是添加一个额外的作为父容器的最后一个元素。

`<div style="clear:both"></div>`

`not`当您获得额外的 HTML 标记时，我更喜欢使用第 3 个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T13:21:43.453

尝试添加`overflow: hidden`到您的`#wrap` `div`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T13:32:51.727

我开始使用 Nicolas Gallagher 提供的这种“micro-clearfix”解决方案。

[http://nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

```
/* For modern browsers */
.cf:before,
.cf:after {
    content:"";
    display:table;
}

.cf:after {
    clear:both;
}

/* For IE 6/7 (trigger hasLayout) */
.cf {
    *zoom:1;
} 
```

只需将其添加到您的 CSS 和任何浮动元素中，将“cf”类添加到任何具有浮动子元素的任何元素的包装器中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T13:26:04.230

只需在关闭外部 div 之前再添加一个**样式为 clear:both的 div，即此处“换行”**

--示例代码--

```
<div id="wrap">
    <div id="left">
        <p>some content at left</p>
    </div>
    <div id="right">
        <p>some content at right</p>
    </div>
    <div style="clear:both"></div>
</div> 
```

# php - 将字符串限制为 256 个字节

> ID：10969034
> 
> 赞同：0
> 
> 时间：2012-06-10T13:19:34.517
> 
> 标签：php, ios, apple-push-notifications

我目前有：

```
$payload = array();
$payload['aps']['badge'] = 1;
$payload['aps']['alert'] = html_entity_decode($title);
$payload['aps']['sound'] = "default"; 
```

但：

> 通知有效负载允许的最大大小为**256 字节**；Apple Push Notification Service 拒绝任何超过此限制的通知。

`$title`（主要是英语，没有多少特殊字符）通常大于 256 个字符。我应该怎么做才能检查和限制/删除多余的字符？`strlen`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:21:36.033

如果标题大于 256，您可以使用 strlen 检查，或者直接剪切它。 `$title = substr($title, 0, 256);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-04T21:02:37.440

如前所述，问题在于字节长度，因此 substr 不是正确的方法。我认为`mb_strcut`应该改用这种方法。

[https://www.php.net/manual/en/function.mb-strcut.php](https://www.php.net/manual/en/function.mb-strcut.php)

# rhel - 在 RHEL 6.2 64 位上安装 Snort

> ID：10969037
> 
> 赞同：0
> 
> 时间：2012-06-10T13:19:45.700
> 
> 标签：rhel, snort, daq-mx

我在 RHEL 6.2 上安装 snort

我正在尝试安装 DAQ。

我在跑步

进行安装

并得到以下错误：

RCE -module -export-dynamic -avoid-version -shared -L/usr/lib -ldnet -o daq_ipq.la -rpath /usr/local/lib/daq daq_ipq_la-daq_ipq.lo -lipq -L/usr/lib - ldnet ../sfbpf/libsfbpf.la ) libtool: relink: gcc -shared .libs/daq_ipq_la-daq_ipq.o -Wl,-rpath -Wl,/usr/local/lib -L/usr/lib -lipq -ldnet - l/usr/local/lib -lsfbpf -Wl,-soname -Wl,daq_ipq.so -o .libs/daq_ipq.so /usr/bin/ld: /usr/lib/libdnet.a(addr.o): 重定位R_X86_64_32 针对`.rodata.str1.1' can not be used when making a shared object; recompile with -fPIC /usr/lib/libdnet.a: could not read symbols: Bad value collect2: ld returned 1 exit status libtool: install: error: relink`daq_ipq.la' 在安装之前使用上述命令 make[2]: *** [install-pkglibLTLIBRARIES] 错误 1

make[2]: 离开目录`/usr/daq-0.6.2/os-daq-modules'

make[1]: *** [install-am] 错误 2

make[1]: 离开目录`/usr/daq-0.6.2/os-daq-modules'

make: *** [安装递归] 错误 1

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:16:14.583

在此之后，它起作用了：

```
 $tar zxvf /root/snort-packages/libdnet-1.12.tgz
    $cd libdnet-1.12
    $ ./configure "CFLAGS=-fPIC -g -O2" --prefix=/usr
    $make
    $make install
    $ yum install libdnet-devel
    $ locate libdnet
    $ ln -s libdnet.1 libdnet.so.1
    $ cp /usr/lib64/libdnet.so.1 /usr/local/lib/libdnet.so.1 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-17T05:55:20.853

试试这个：

```
$tar zxvf /root/snort-packages/libdnet-1.12.tgz
$cd libdnet-1.12
$ ./configure "CFLAGS=-fPIC -g -O2" --prefix=/usr
$make
$make install
$ yum install libdnet-devel
$ locate libdnet
$ ln -s libdnet.1 libdnet.so.1
$ cp /usr/lib64/libdnet.so.1 /usr/local/lib/libdnet.so.1 
```

# c++ - 将未知类型的元素输入到向量中

> ID：10969040
> 
> 赞同：8
> 
> 时间：2012-06-10T13:19:58.317
> 
> 标签：c++, types, vector

我正在开发一个程序，该程序从用户那里获取元素并对它们进行排序。对于这个程序，我必须使用向量，因为在用户输入之前元素列表的大小是未知的。我们的指示是：

> 用 C++ 编写一个程序来实现对元素列表的排序。元素可以是任何类型，但都是相同的类型，例如所有整数或所有浮点数或所有字符或所有字符串（字符串应像在字典中一样排序）。您可以实现您选择的任何排序算法。
> 
> 1.  询问用户会有多少元素
> 2.  要求用户输入元素
> 3.  要求用户选择排序顺序：升序或降序或两者
> 4.  打印输入和输出列表
> 5.  用户不会提供有关元素类型的任何信息

我对向量不是很熟悉（老师在课堂上基本上是略读主题），而且我的书并没有给我提供关于该主题的大量信息。我遇到的问题是在用户开始输入之前我不知道元素列表的类型。到目前为止，我已经尝试过：

*   创建一个 void 类型向量（现在我已经研究过了，显然不允许，哎呀）
*   通过将第一个元素发送给函数并让函数根据第一个元素的类型确定要创建的向量类型来重载一个函数`insertInVector`（当我想到它时，这似乎是我的最佳选择，除了我需要访问向量在函数终止之后，所以最终也是不行的）
*   `#include <typeinfo>`在程序中，找到第一个元素的类型，然后使用创建一个向量`vector<typeid(firstElement).name()>`，老实说，我不确定为什么这不起作用，但它没有。

就像我说的那样，我对向量的经验非常有限，因为这是我第一次使用它们。我也是一个相当新的程序员，所以我在这方面所做的很多研究都超出了我的想象。任何可以在这方面提供的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T14:28:15.390

C++ 是一种*静态*类型的语言。这意味着所有类型都应该在编译期间确定：在运行程序时不能引入新类型。

> *   创建一个 void 类型向量（现在我已经研究过了，显然不允许，哎呀）

`void`实际上是一个很奇怪的类型，主要是一个占位符，当你期望一个类型（比如一个函数返回类型）并且没有提供时。`void*`被用作指向未知类型的指针（主要在 C 中），但这是一个相当黑客，因为有关原始信息的信息被丢弃（就语言而言）所以这会导致问题实际上用值做事情所以获得。

> *   通过将第一个元素发送到函数并让函数根据第一个元素的类型确定要创建的向量类型来重载名为 insertInVector 的函数
>     
>     
> *   `#include <typeinfo>`在程序中，找到第一个元素的类型，然后使用创建一个向量`vector<typeid(firstElement).name()>`，老实说，我不确定为什么这不起作用，但它没有。

不幸的是，两者都不可能：既然你不能声明一个没有类型的变量，那么以什么`firstElement`开头的类型是什么？

* * *

你所描述的问题一般来说是困难的。基本上，这意味着您必须接受一串字符，然后编写一组规则来确定如何解释这些字符。这通常是通过使用*语法*对这些规则进行编码来完成的；但是对于可能是一项简单的任务，语法可能会很复杂。

让我举一个小例子：

```
class Input {
public:
    enum Type {
        Int,
        Double,
        String
    };

    static Input Parse(std::string const& s);

    Input(): _type(Int), _int(0), _double(0.0) {} // need to define a default...

    Type type() const { return _type; }

    int asInt() const {
        assert(_type == Int && "not an int");
        return _int;
    }

    double asDouble() const {
        assert(_type == Double && "not a double");
        return _double;
    }

    std::string const& asString() const {
        assert(_type == String && "not a string");
        return _string; 
    }

private:
    Type _type;
    int _int;
    double _double;
    std::string _string;
}; 
```

显然，真正的挑战是正确`Parse`输入。

这个想法是使用一组规则，例如：

*   an`int`仅由数字组成，可选前缀`-`
*   a`double`仅由数字组成，最多有一个`.`，并且可以选择前缀`-`
*   a`string`可以是任何东西，因此是我们的包罗万象

然后我们可以编写方法的识别部分`Parse`：

```
static bool isInt(std::string const& s) {
    if (s.empty()) { return false; }

    // The first character may be among digits and '-'
    char const first = s.at(0);
    if (not isdigit(first) and first != '-') { return false; }

    // Subsequent characters may only be digits
    for (char c: s.substr(1)) {
        if (not isdigit(c)) { return false; }
    }

    // Looks like it is an int :)
    return true;
} // isInt

// Note: any int could be interpreted as a double too
static bool maybeDouble(std::string const& s) {
    if (s.empty()) { return false; }

    // The first character may be among digits, '.' and '-'
    char const first = s.at(0);
    if (not isdigit(first) and first != '.' and first != '-') { return false; }

    // There may only be one dot
    bool hasSeenDot = s.at(0) == '.';

    // Subsequent characters may only be digits and a dot now
    for (char c: s.substr(1)) {
        if (not isdigit(c) and c != '.') { return false; }

        if (c == '.') {
            if (hasSeenDot) { return false; } // no second dot allowed
            hasSeenDot = true;
        }
    }

    // Looks like it could be a double
    return true;
} // maybeDouble

static Input::Type guessType(std::string const& s) {
    if (isInt(s)) { return Input::Int; }

    // Test double after we ensured it was not an int
    if (maybeDouble(s)) { return Input::Double; }

    return Input::String;
} // guessType 
```

再加上猜测逻辑，最后解析出来了：

```
Input Input::Parse(std::string const& s) {
    Input result;

    result._type = guessType(s);

    switch(result._type) {
    case Input::Int: {
        std::istringstream stream(s);
        s >> result._int;
        return result;
    }
    case Input::Double: {
        std::istringstream stream(s);
        s >> result._double;
        return result;
    }
    case Input::String:
        result._string = s;
        return result;
    }

    // Unreachable (normally)
    abort();
} // Input::Parse 
```

呸！

所以 ？差不多好了。现在我们需要确定如何比较两个输入。如果它们都具有相同的类型，这很容易，否则您将需要确定任意逻辑。您可以很容易地在输入 Double 中转换输入 Int，但对于字符串来说它有点奇怪。

```
// define < for comparing two instance of "Input",
// assuming they both have the same type
bool operator<(Input const& left, Input const& right) {
    assert(left.type() == right.type() && "Different Types!");

    switch(left.type()) {
    case Input::Int: return left.asInt() < right.asInt();
    case Input::Double: return left.asDouble() < right.asDouble();
    case Input::String: return left.asString() < right.asString();
    }
} // operator< 
```

最后，程序：

```
int main(int argc, char* argv[]) {
    // parse command line
    std::vector<Input> inputs;

    // by convention argv[0] is the program name, it does not count!
    for (int i = 1; i != argc; ++i) {
        inputs.push_back(Input::Parse(argv[i]));

        // Detect that the type is the same as the first input
        if (inputs.size() >= 2) {
            if (inputs.back().type() != inputs.front().type()) {
                std::cerr << "Please only use one type among Int, Double and String\n";
                return 1; // non-0 is an error
            }
        }
    }

    // sort
    std::sort(inputs.begin(), inputs.end());

    // echo back to the user
    for (Input const& i: inputs) {
        switch(i.type()) {
        case Input::Int: std::cout << i.asInt() << "\n"; break;
        case Input::Double: std::cout << i.asDouble() << "\n"; break;
        case Input::String: std::cout << i.asString() << "\n"; break;
        }
    }

    // End of the program
    return 0;
} 
```

当然，因为我不知道您希望处理的类型.. 我已经决定了一个任意的集合；）但是，这应该给您一个基础的骨架。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T13:57:02.123

查看评论中所述问题的实际要求，我建议您将所有输入存储在 an 中并使用[std::sort](http://en.cppreference.com/w/cpp/algorithm/sort)`std::vector<std::string>`对向量进行排序。因此，您不必担心不同的类型，而是可以根据您解释向量中要表示的字符串的内容来指定排序逻辑。所以

1.  根据字符串表示的内容为字符串实现排序功能（稍后会详细介绍）
2.  将输入作为字符串存储在向量中。
3.  确定字符串代表的类型
4.  选择基于此类型的排序功能
5.  `std::sort`使用和适当的排序函数对向量进行排序。

关于排序函数，`std::sort`接受一个二进制函子或对两个元素应用“小于”比较的函数，所以你的函子或函数应该看起来像

```
bool foo(const std::string& rhs, const std::string& lhs) {
  // implement the logic
} 
```

**编辑**：查看最近的评论，似乎练习的主要目的可能是为不同类型实现排序算法。在这种情况下，我建议遵循 C++ 标准库采用的方法，即在两种类型之间实现术语排序或*小于*比较，从而将排序逻辑与要排序的类型解耦。因此，您需要一个模板排序函数，以迭代器类型和比较函数/函子为模板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T13:40:12.193

如果您知道用户可能输入的类型，您可以使用模板和继承：

```
class Generic {
public:
  virtual void process_input() = 0; // Handles the next input from user
  virtual void process_output() = 0; // Processes the data inserted
};

template <typename T>
class HandleInput : public Generic {
private:
    std::vector<T> storage;
public:
    HandleInput(T first)
    {
      storage.push_back(first);
    }

    void process_input()
    {
      // do whatever you want
    }

    void process_output()
    {
      // do whatever you want
    }
};

int main(int argc, char **argv)
{
  // Get first input
  Input i = input();
  Generic *g;

  // Instantiate the "right" generic with a switch
  switch (i.type) {
    case T:
      g = new HandleInput<T>(i.value);
  }

  // Use Generic from here onwards
} 
```

这只是一个想法（`Input`不能这样实现，您需要使用从用户那里获取某些内容并确定其类型的逻辑来更改该部分），但它具有将类型屏蔽为泛型类的好处，因此您可以考虑您的代码围绕由`Generic`.

另一个想法（可能更简单）是使用 a`std::vector<void*>`和 an`enum`来告诉您存储在向量中的数据的类型是什么。当您需要在将来某个地方处理该数据时，您可以打开枚举以将向量元素适当地转换为正确的类型并将它们分派给适当的代码。

**编辑**：另一个想法是定义一个模板化函数，该函数接受输入并使用标准比较器对数组进行排序：

```
#include <iostream>

#include <vector>
#include <algorithm>
#include <boost/lexical_cast.hpp>

template <typename T>
void print_v(std::vector<T> &v)
{
    typename std::vector<T>::iterator it;
    for (it = v.begin(); it != v.end(); it++)
        std::cout << *it << " ";
    std::cout << std::endl;
}

template <typename T>
void sort_and_print(T first, size_t n, bool asc)
{
    std::vector<T> v;
    v.push_back(first);
    for (size_t i = 0; i < n; i++) {
        std::string s;
        std::cin >> s;
        T e = boost::lexical_cast<T>(s);
        v.push_back(e);
    }

    print_v(v);
    if (asc)
        std::sort(v.begin(), v.end(), std::greater<T>());
    else
        std::sort(v.begin(), v.end());
    print_v(v);
}

int main(int argc, char **argv)
{
    std::string s = "test";
    sort_and_print(s, 2, true);
    unsigned int j = 3;
    sort_and_print(j, 2, true);
    return 0;
} 
```

确定第一个输入类型的逻辑取决于您（也许您可以打开另一个问题）；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T00:55:39.427

这个问题有两个方面：解析和排序。

*   您可以使用*正则表达式*来检查用户输入的数据类型。
*   您可以使用`cin`来解析数据。

**首先：**意识到在收到所有用户输入之前，您*不一定*知道用户输入的*类型〜例如：考虑用户名列表：*

```
728278243
390349346
495045594
elizabeth 
```

因此，最好不要假设最了解传入数据（*可能导致令人沮丧的用户体验*），而是更愿意将所有内容视为潜在的字符串。将所有原始输入存储为字符串，以便您可以以与输入相同的格式输出。您可以使用枚举类型在排序比较器内部进行切换， *或者*考虑使用`mutliset/multimap`. 在这里，您将构建一个*有序*集。所以不需要排序。NB：构造一个有序集合的 N 个元素的复杂度，*或者*对于 N 个未排序的列表元素进行单一排序，其复杂度大致相等 ~> NlogN

对于您手头的任务，这几乎不重要，但实际上取决于列表的使用方式，在性能方面，一种或其他方法将更合适。

如果你已经使用过`std::vector`then之类的`std::multimap`应该不会太吓人。松散地说，它是一个关联的键值对数组。这里的*multi意味着它可以使用**相同*的键存储多个元素（在这里，你想要）。

在这个例子中，我使用*boost* regex 库来确定一些*时髦*的输入数据类型。
（例如`sudo apt-get install libboost-regex1.46-dev`：）

这个*正则表达式*可能看起来晦涩难懂，但 i/web 上有许多示例，几乎适用于所有可以想象的模式。[*注意：C++11 正则表达式几乎是 boost 正则表达式的替代品。即：boost regex 应该与新兴的 C++11 标准前向兼容*]

**废话.cpp：**

```
#include <iostream>
#include <sstream>
#include <string>
#include <list>
#include <map>
#include <set>
#include <boost/regex.hpp>    
//NB: GNU gcc added *experimental support for regular expressions in TR1 v 4.3.0.
//    compile with:  -std=c++0x

using namespace std;
using namespace boost;

//some example input data-types (perhaps notably missing a date!) 
const regex re_char("[^0-9]", regex_constants::extended); //non numeric chars
const regex re_digit("[[:digit:]]+", regex_constants::extended); //a string of only digits in range [0..9] ~ie: Z+
const regex re_xdigit("0[xX][[:xdigit:]]+", regex_constants::extended); //support hex iff starts with '0x' or '0X'
const regex re_float("[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?", regex_constants::extended); //all kinds of numbers

int main(int argc, char** argv)
{    
    int i, countc=0;
    double d;
    string str;
    int element_count;    

    do
    {
        cout << "how many elements will there be? "; 
        if (cin >> element_count) break;
        cin.clear();
        cin >> str;
        cout << "\033[A\033[2K" << flush;
    }
    while(13);
    cin.ignore(128,'\n'); 

    multimap<double, string> list_num; 
    multimap<double, string> list_fp; 
    //NB: below, by way of example, construction using the 'greater<int>' comparison class achieves _descending_ order 
    multimap<int, string, greater<int> > list_int; 
    list<string> list_str; 

    for (int next=0; next < element_count; next++)
    {
        cout << "\033[A\033[2K" << flush;
        cout << "enter next element in list ["<< next+1 << "/" << element_count << "] : "; 
        getline (cin,str);

        if (regex_match(str, re_xdigit))
        {
            //see all about manipulators here:
            //http://www.cplusplus.com/reference/iostream/istream/operator%3E%3E/
            stringstream(str) >> hex >> i;            
            list_int.insert(pair<int, string>(i, str)); 
            list_num.insert(pair<double, string>(i, str)); 
        }
        else if (regex_match(str, re_digit))
        {
            stringstream(str) >> i;            
            list_int.insert(pair<int, string>(i, str));            
            list_num.insert(pair<double, string>(i, str)); 
        }
        else if (regex_match(str, re_float))
        {
            stringstream(str) >> d;    
            list_fp.insert(pair<double, string>(d, str));        
            list_num.insert(pair<double, string>(d, str)); 
        } 

        if (regex_match(str, re_char)) countc++;      
        list_str.push_back(str);
    }    

    cout << "\033[A\033[2K" << flush;

    cout << "input: unsorted list:" << endl;
    for (list<string>::iterator it=list_str.begin(); it!=list_str.end(); it++) 
        cout << *it << endl;

    if (list_int.size() == element_count)
    {
        cout << endl << "output: sorted list of Z+ types:" << endl;
        for (multimap<int, string>::iterator it=list_int.begin() ; it != list_int.end(); it++ )
            cout << (*it).second << endl;
    }
    else if (list_fp.size() == element_count)
    {
        cout << endl << "output: sorted list of fp types:" << endl;
        for (multimap<double, string>::iterator it=list_fp.begin() ; it != list_fp.end(); it++ )
            cout << (*it).second << endl;
    }
    else if (list_num.size() == element_count)
    {
        cout << endl << "output: sorted list of numeric types:" << endl;
        for (multimap<double, string>::iterator it=list_num.begin() ; it != list_num.end(); it++ )
            cout << (*it).second << endl;
    }
    else //output as sorted strings ~but in _descending_ order, using reverse iterator, by way of example
    {
        list_str.sort(); //but best to use list_str.sort(greater<string>()); with forward iterators
        cout << endl << "output: sorted list of " <<  (countc == element_count ? "non numeric char" : "string") << " types:" << endl;
        for (list<string>::reverse_iterator it=list_str.rbegin(); it!=list_str.rend(); ++it) 
            cout << *it << endl;        
    }   

    return 0;
} 
```

示例在 Ubuntu 上编译和运行。命令行的东西：

```
$
$ lsb_release -d
Description:    Ubuntu 11.10

$ g++ --version
g++ (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1 

$ g++ --pedantic -oblah blah.cpp -lboost_regex
$ ./blah
input: unsorted list:
4.77
2.0e+2
-.3
11
0x10

output: sorted list of numeric types:
-.3
4.77
11
0x10
2.0e+2
$ 
```

**注意：**这是示例代码：

*   这里可以进行许多优化。您显然不需要*像*`stl`我使用的那么多容器。
*   我没有严格处理排序的方向（但展示了几种可能实现的方法）。
*   将特定于类型的功能封装在 C++ 对象中也可能很好；对于您希望支持的每种*类型*都有一个基类和派生类~但是这个*作业*对吗？- 所以可能不值得过火；）

# android - 导出 APK 后，Phonegap/Cordova 列入白名单的跨域 SSL 请求不起作用

> ID：10969043
> 
> 赞同：6
> 
> 时间：2012-06-10T13:20:07.400
> 
> 标签：android, cordova, https, whitelist

我创建了一个需要与自签名 SSL 服务通信的 phonegap 应用程序。

我在 res/xml/cordova.xml 中将我的网址列入白名单，如下所示：

`<access origin="https://www.mydomain.com" subdomains="true" />`

当我从 Eclipse 运行和构建时，这工作正常，但是如果我然后导出并签署我的应用程序并手动安装 APK，那么该应用程序将无法与我的 Web 服务通信。

与服务器的通信是使用 Sencha Touch 库进行的，如下所示：

```
Ext.Ajax.request({
        url: 'https://www.mydomain.com',
        method: 'get',          
        success: function(result) {                 
        },
        failure: function(result) {         
        }           
    }); 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T07:07:52.840

问题是您使用的是自签名证书。默认情况下，Android WebView 不允许自签名 SSL 证书。[PhoneGap/Cordova 在 CordovaWebViewClient 类中覆盖了这一点，](https://github.com/apache/incubator-cordova-android/blob/master/framework/src/org/apache/cordova/CordovaWebViewClient.java#L279-298)但它的行为并没有太大偏离；如果应用程序经过调试签名，它将`proceed`忽略错误，否则将失败。

您可以在应用程序中更改上面链接到的代码并使该`onReceivedSslError`方法始终调用`handler.proceed()`- 但不建议这样做。不要使用自签名证书！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T02:13:25.987

我做了以下操作来绕过限制（目前使用 Cordova 1.7.0）。这绝对是天生不安全的：

```
public class MyWebViewClient extends CordovaWebViewClient {

    public MyWebViewClient(DroidGap ctx) {
        super(ctx);
    }

    @Override
    public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {
        // testing against getPrimaryError() or hasErrors() will fail on Honeycomb or older.
        // You might check for something different, such as specific info in the certificate,
        //if (error.getPrimaryError() == SslError.SSL_IDMISMATCH) {
            handler.proceed();
        //} else {
        //    super.onReceivedSslError(view, handler, error);
        //}
    }
} 
```

然后在主要活动中：

```
@Override
public void init() {
    super.init();

    //pass in our webviewclient to override SSL error
    this.setWebViewClient(this.appView, new MyWebViewClient(this));
} 
```

# java - JPA - 没有连接列的一对多关联

> ID：10969048
> 
> 赞同：2
> 
> 时间：2012-06-10T13:21:22.407
> 
> 标签：java, hibernate, jpa

我想编写一个具有一对多关系的 JPA 实体类。我想避免在父类中定义关系以避免每次对对象进行引用时都加载数据，即使不需要关联数据也是如此。我已经读过，即使使用延迟加载，也可以加载数据，所以我需要避免这种情况。

在以下示例中，

```
Customer table
------------------------
customerid, customerName
1           John
2           Bob 
```

订单表 - customerId 是 Customer 的外键

```
orderId, customerId, orderDate
1        1           12MAY2012 
1        1           13MAY2012
1        2           16MAY2012 
```

JPA 实体

```
@Entity
public class Customer {

    // all Customer-related fields WITHOUT @OneToMany relationship with Order
}

@Entity
public class Order {

    String orderDate;

    @ManyToOne
    private Customer owner;
} 
```

我将如何根据订单表上的条件从客户表中检索数据？例如，我怎么能说“让我找到所有已下订单且 orderDate 介于两个日期之间的客户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:30:22.103

使用 hbm.xml 有查询属性来实现你想要的

[http://ayende.com/blog/4054/nhibernate-query-only-properties](http://ayende.com/blog/4054/nhibernate-query-only-properties)

# dotnetopenauth - DotNetOpenId“登录失败”。登录中的字符

> ID：10969055
> 
> 赞同：0
> 
> 时间：2012-06-10T13:22:14.733
> 
> 标签：dotnetopenauth

在我的项目中，我使用来自 DotNetOpenAuth 库的 OpenIdProviderWebForms 和[OpenIdRelyingPartyWebForms](http://www.dotnetopenauth.net/)。

验证是通过用户对域服务器的请求来完成的。

登录我的用户格式**为 test_dm\username**和**username@test.dm.ru**

对提供者的授权是成功的，但是当openid.GetResponse(); 我收到错误“登录失败（发送直接消息或获取响应时发生错误。）”。

正如我所发现的，问题是由于用户名中的字符`.`和`/!`（我用 /！替换 \ ）引起的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:55:19.200

OpenID 从不在两个网站之间传输用户名。什么代码（大概在您的网络应用程序中）负责将用户名放在 URL 中？我建议您`Uri.EscapeDataString`在将用户名放入 URL 之前使用转义用户名。

# terminology - “实施无关”是什么意思？

> ID：10969057
> 
> 赞同：12
> 
> 时间：2012-06-10T13:22:21.877
> 
> 标签：terminology

我只是想知道“与实现无关”是什么意思？我没有找到任何解释。我的意思是在这种情况下：“一种与实现无关的工程方法”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-26T08:48:33.210

“与*实施无关”*的**反面**是*“特定于实施”。* 一些例子应该清楚地表明区别：

 **## 与实施无关

*同义词：**独立于实施***

**例子：**

*   排序算法[“快速排序”](https://en.wikipedia.org/wiki/Quicksort)
*   [用伪代码](https://en.wikipedia.org/wiki/Pseudocode)编写的[算法](https://en.wikipedia.org/wiki/Algorithm)

上面的示例**可以**用每种[编程语言](https://en.wikipedia.org/wiki/Programming_language)
（[Assembler](https://en.wikipedia.org/wiki/Assembly_language#Assembler)、[BASIC](https://en.wikipedia.org/wiki/BASIC)、[C#](https://en.wikipedia.org/wiki/C_Sharp_(programming_language))、[C++](https://en.wikipedia.org/wiki/C%2B%2B)、[Java](https://en.wikipedia.org/wiki/Java_(programming_language))、[JavaScript](https://en.wikipedia.org/wiki/JavaScript)等）实现

* * *

## 特定于实现

*同义词：**依赖于实现***

**例子：**

*   [设备驱动程序](https://en.wikipedia.org/wiki/Device_driver)，
*   AMD (tm) 或 Intel (tm)[处理器的](https://en.wikipedia.org/wiki/Processor_(computing))[机器语言代码](https://en.wikipedia.org/wiki/Machine_code)

上面的示例**仅在**为其编写的硬件上运行。

但依赖或正在使用其他软件、[依赖注入](https://en.wikipedia.org/wiki/Dependency_injection)、[接口](https://en.wikipedia.org/wiki/Interface_(computing))、[操作系统](https://en.wikipedia.org/wiki/Operating_system)、[服务](https://en.wikipedia.org/wiki/Service_(systems_architecture))或[框架](https://en.wikipedia.org/wiki/Software_framework)的软件也是特定于实现的（例如，虽然 .NET 的中间语言[MSIL](https://en.wikipedia.org/wiki/Common_Intermediate_Language)可以在不同的硬件或操作系统上运行，但它仍然依赖于[.NET 框架](https://en.wikipedia.org/wiki/.NET_Framework)，因此是特定于实现的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T16:09:25.773

这通常用于讨论问题而不承诺特定的实现。这样做可能会导致选择最适合问题的实现/工具，而不必担心在问题定义期间已经选择的解决方案的局限性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T16:30:43.900

说一个解决方案与实现无关就是说它不依赖于特定的技术、编程语言等。伪代码将是一个与实现无关的工具的一个很好的例子，就像 UML 建模一样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T13:24:26.180

在这种情况下，不可知论的意思是“不关心”。所以实现不可知论是不关心实现的东西。**

# regex - 正则表达式：如何将 CSV 数据转换为 JSON 数组？

> ID：10969062
> 
> 赞同：-1
> 
> 时间：2012-06-10T13:22:55.860
> 
> 标签：regex, json, vim, csv, sublimetext2

**如何使用正则表达式将 csv 字符串转换为 JSON 数组？**

我正在尝试将正则表达式与 Vim 或 Sublime Text 等文本编辑器一起使用，而不是与编程语言一起使用。仅供参考，Sublime Text 使用[Boost 语法](http://www.boost.org/doc/libs/1_49_0/libs/regex/doc/html/index.html)。

如果我有一组这样的 csv 字符串：

```
"tag1, tag2, tag3" 
```

上面的字符串格式应如下所示：

```
["tag1", "tag2", "tag3"] 
```

* * *

**（添加了对整个内容的解释......）**

csv 字符串位于内容的中间，如下所示：

```
...
{"url":"http://osxdaily.com/2007/0ge5/02/quickly-encrypt-a-file-with-openssl",
 "user":"user01","tag_string":"openssl,encrypt",
 "created_at":"2011/04/19 05:49:26 +0000",
 "title":"Quickly encrypt a file with OpenSSL"},  
{"url":"http://staticimport.blogspot.com","user":"user02",
 "tag_string":"command,line,developer,tools,osx",
 "created_at":"2011/04/19 05:42:13 +0000","title":"Mac OS X Lion Command Line Developer Tools staticimport"},    
{"url":"https://developer.apple.com/downloads/index.action",
 "user":"user_01","tag_string":"ios,development,download",
 "created_at":"2011/04/19 04:47:26 +0000","title":"Apple Developer Download Center"}
... 
```

**tag_string**是要转换为 JSON 数组的 csv 字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T13:32:42.337

在 Vim 中，分三遍：

```
:s/,\s*/", "/g
:s/^/[
:s/$/] 
```

# android - 在 SQLite 中排序

> ID：10969063
> 
> 赞同：0
> 
> 时间：2012-06-10T13:23:28.553
> 
> 标签：android, sql, sqlite

我有一个数据库，我想对其进行排序。我遇到了几个选择排序数据但不修改数据库本身的代码。我遇到了.. 那么如何对数据库进行排序呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:29:26.147

您不对关系数据库中的表进行排序。

您在它们上创建索引。并在您的查询中使用 ORDER BY。这样你的查询结果就会被排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T13:38:40.583

在创建数据库时在列上创建索引以获得更好的查询性能：

`CREATE INDEX sorted_idx ON table_name(indexed_column ASC);`

有关索引的更多信息： [http ://www.sqlite.org/lang_createindex.html](http://www.sqlite.org/lang_createindex.html)

然后在代码中选择使用`ORDER BY`

`db.rawQuery("SELECT * FROM table_name ORDER BY indexed_column ASC", null);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T13:27:52.143

如果您的意思是“对数据库进行排序”来简单地对表进行排序，

1.  创建临时表作为排序选择，例如你有`table1`一个你想排序的未排序`column1`然后这样做：

    ```
    CREATE TABLE temp_table1 
    AS SELECT * 
    FROM table1 
    ORDER BY column1; 
    ```

2.  删除原始表。

3.  重命名`temp_table1`为`table1`.

# uitableview - UITableView 中的 UISearchBar 与 .plist

> ID：10969065
> 
> 赞同：-1
> 
> 时间：2012-06-10T13:23:33.000
> 
> 标签：uitableview, plist, uisearchbar

过去，我按照一个小教程在我的 UITableView 中实现了一个 UISearchBar。

它是由数组组成的。现在我有了处理所有内容的 .plist 文件，那么 searchBar 会怎么样？我的意思是，我做了类似的事情：

```
 copyLists = [[NSMutableArray alloc] initWithArray:sortedList copyItems:YES]; 
```

其中 sortedList 是包含 plist 的数组。

基本上 searchBar 工作正常，但是当我输入一个单词时，它不显示任何单元格，即使我写了一个单元格的确切名称。

它是否应该返回`name`plist 中包含的作为单元名称的键？

searchBar 将如何随 plist 改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T17:00:49.350

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [self.filteredList removeAllObjects]; // First clear the filtered array.

    NSArray *objcts = unfilteredList;

    for (NSDictionary *section in objcts)
    {
        for (NSDictionary *row in [section valueForKey:@"Rows"])
        {
            NSRange rng = [[row valueForKey:@"name"] rangeOfString:searchString options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];

            if (rng.length != 0)
                [self.filteredList addObject:row];
        }
    }
    // Return YES to cause the search result table view to be reloaded.
    return YES;
} 
```

确保您`Search Bar and Search Display Controller` `delegate`设置正确。然后用于显示单元格使用：

```
NSArray *rows;
if (tableView == self.searchDisplayController.searchResultsTableView)
{
    rows = filteredList;
} else {
    NSDictionary *section = [unfilteredList objectAtIndex:indexPath.section];
    rows = [section objectForKey:@"Rows"];
}
cell.textLabel.text = [[rows objectAtIndex:indexPath.row] objectForKey:@"name"]; 
```

并更改 , 等的`rowCount`逻辑`titleHeader`。

# iphone - sleep() 不像我预期的那样工作

> ID：10969067
> 
> 赞同：0
> 
> 时间：2012-06-10T13:24:16.087
> 
> 标签：iphone, xcode, uibutton, sleep, uicolor

我在使用 sleep() 时遇到了一些问题。我有 10 个 UIButtons 连接到同一个名为“buttons:”的 IBAction。现在，IBAction 方法应该禁用所有按钮并将它们的背景颜色变为红色，然后调用一个名为“nextButtonToEnable”的方法，该方法首先有一个 sleep(1)，然后是一个随机 int，由一个变为 1 的开关使用启用的按钮和蓝色而不是红色。现在问题来了，我希望所有按钮在按下时都变成红色，然后在 1 秒延迟后，另一个按钮会变成蓝色，但这不会发生，真正发生的是当我按下蓝色按钮时，它在整个延迟 1 秒，然后它变成红色，另一个按钮变成蓝色。

这是我的代码

。H：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    IBOutlet UIButton *b1;
    IBOutlet UIButton *b2;
    IBOutlet UIButton *b3;
    IBOutlet UIButton *b4;
    IBOutlet UIButton *b5;
    IBOutlet UIButton *b6;
    IBOutlet UIButton *b7;
    IBOutlet UIButton *b8;
    IBOutlet UIButton *b9;
    IBOutlet UIButton *b10;
}
-(void)nextButtonToEnable;

@end 
```

米：

```
-(IBAction)buttons:(id)sender {
b1.enabled = NO;
b2.enabled = NO;
b3.enabled = NO;
b4.enabled = NO;
b5.enabled = NO;
b6.enabled = NO;
b7.enabled = NO;
b8.enabled = NO;
b9.enabled = NO;
b10.enabled = NO;
b1.backgroundColor = [UIColor redColor];
b2.backgroundColor = [UIColor redColor];
b3.backgroundColor = [UIColor redColor];
b4.backgroundColor = [UIColor redColor];
b5.backgroundColor = [UIColor redColor];
b6.backgroundColor = [UIColor redColor];
b7.backgroundColor = [UIColor redColor];
b8.backgroundColor = [UIColor redColor];
b9.backgroundColor = [UIColor redColor];
b10.backgroundColor = [UIColor redColor];

[self nextButtonToEnable];
}

-(void)nextButtonToEnable {

sleep(1);

int nextButton = rand() % 10;

switch (nextButton) {
    case 0:
        b1.enabled = YES;
        b1.backgroundColor = [UIColor blueColor];
        break;
    case 1:
        b2.enabled = YES;
        b2.backgroundColor = [UIColor blueColor];
        break;
    case 2:
        b3.enabled = YES;
        b3.backgroundColor = [UIColor blueColor];
        break;
    case 3:
        b4.enabled = YES;
        b4.backgroundColor = [UIColor blueColor];
        break;
    case 4:
        b5.enabled = YES;
        b5.backgroundColor = [UIColor blueColor];
        break;
    case 5:
        b6.enabled = YES;
        b6.backgroundColor = [UIColor blueColor];
        break;
    case 6:
        b7.enabled = YES;
        b7.backgroundColor = [UIColor blueColor];
        break;
    case 7:
        b8.enabled = YES;
        b8.backgroundColor = [UIColor blueColor];
        break;
    case 8:
        b9.enabled = YES;
        b9.backgroundColor = [UIColor blueColor];
        break;
    case 9:
        b10.enabled = YES;
        b10.backgroundColor = [UIColor blueColor];
        break;

    default:
        break;
}
} 
```

所以它就像睡眠在 b1.enabled = NO; 之间 和 b1.backgroundColor = [UIColor redColor];。

我该如何解决这个问题，因为我在互联网上没有找到任何东西。主要是因为我不知道要搜索什么：P。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:37:19.077

您可能应该使用`performSelector:withObject:afterDelay:`而不是`sleep()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:27:46.303

`sleep()`已弃用，`Sleep()`改为使用（大写 S）

如果你想让你的进程休眠 1 秒，你需要做：

```
Sleep(1000); 
```

其中 1000 是毫秒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T11:00:28.253

```
#include <stdlib.h> 
```

那会解决你的问题。

# jquery - 如何使用 jquery 在鼠标悬停上制作这样的背景 flash 动画

> ID：10969074
> 
> 赞同：0
> 
> 时间：2012-06-10T13:24:45.147
> 
> 标签：jquery, flash, jquery-animate

[你可以在这里](http://www.geneticlimited.com/body.php)看到2种动画：

1) 左上角的文字'GENETIC LIMITED'有动画

2) 左侧垂直菜单（主页、支付和政策等）在鼠标悬停时有彩色动画。

两种情况都使用Flash。如何使用jquery达到相同的效果？我看到了 jquery 颜色插件和其他东西（[这里](http://www.bitstorm.org/jquery/color-animation/)、[这里](http://jqueryui.com/demos/animate/#demo)和[这里](http://api.jquery.com/animate/) ），但这似乎不能解决我的问题。

请问有什么解决办法吗？

# android - 活动正在等待服务完成

> ID：10969076
> 
> 赞同：2
> 
> 时间：2012-06-10T13:25:53.760
> 
> 标签：android, service, android-activity

我有一个奇怪的问题。我有一个带有 ListView 的 Activity，并在 onCreate 的 Activity 中启动一个服务。

当我现在启动应用程序时，在服务完成工作之前不会显示 Activity 的布局。=( 通常该服务应该在后台完成他的工作。

活动

```
import java.util.ArrayList;
import java.util.HashMap;
import android.app.Activity;
import android.app.ActivityManager;
import android.app.ActivityManager.RunningServiceInfo;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class DealAlertMainActivity extends Activity {

    ListView list;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        list = (ListView) findViewById(R.id.list);

        //start service if its not running
        if(isMyServiceRunning() == false)
            startService(new Intent(DealAlertMainActivity.this, DealAlert_Service.class));
    }

    @Override
    public void onStart()
    {
        super.onStart();

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("keyword", "Test Keyword");
        map.put("title", "Test Title");
        mylist.add(map);
        map = new HashMap<String, String>();
        map.put("keyword", "Test Keyword 2");
        map.put("title", "Test Title 2");
        mylist.add(map);

        SimpleAdapter feeds_list = new SimpleAdapter(this, mylist, R.layout.listview_item,
                    new String[] {"keyword", "title"}, new int[] {R.id.Keyword, R.id.Title});
        list.setAdapter(feeds_list);

    }

...

} 
```

服务

```
import java.util.ArrayList;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;

public class DealAlert_Service extends Service {

    private NotificationManager mNM;

    public void onCreate()
    {
        super.onCreate();

        mNM = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    }

    public int onStartCommand(Intent intent, int flags, int startId) {

        //Do work

        }

    @Override
    public void onDestroy() {
      super.onDestroy();

    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:29:37.840

从 UI 的角度来看，服务会自动在后台运行。从线程的角度来看，它们*不会*自动在后台。`onStartCommand()`在主应用程序线程上调用，并且您的 UI 将被冻结，无论需要多长时间`onStartCommand()`才能完成。因此，服务要完成的任何重要工作都需要在后台线程中完成，无论是您自己创建的还是通过切换到`IntentService`.

# java - Web 服务中的错误使用与 JAVA Axis 一起开发的 SSH

> ID：10969080
> 
> 赞同：1
> 
> 时间：2012-06-10T13:26:18.520
> 
> 标签：java, web-services, ssh, axis, noclassdeffounderror

我尝试在 JAVA（轴）中创建一个 Web 服务，它连接到 SSH 中的服务器，所以我使用了一个名为：ganymed 的 api，它在 java 中运行良好

但是当我尝试使用 AXis 获取 WSDL 文件时，我有一个 stange 错误“异常 - java.lang.NoClassDefFoundError：ch/ethz/ssh2/StreamGobbler”

## 这是我的文件 java ：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import ch.ethz.ssh2.Connection;
import ch.ethz.ssh2.Session;
import ch.ethz.ssh2.StreamGobbler;

public class ganymed
{
    public static string ssh()
    {       String res="";
        String hostname = "10.0.0.20";
        String username = "students";
        String password = "xxxx";
    try
    {
        /* Create a connection instance */

        Connection conn = new Connection(hostname);

        /* Now connect */

        conn.connect();

        /* Authenticate.
         * If you get an IOException saying something like
         * "Authentication method password not supported by the server at this stage."
         * then please check the FAQ.
         */

        boolean isAuthenticated = conn.authenticateWithPassword(username, password);

        if (isAuthenticated == false)
            throw new IOException("Authentication failed.");

        /* Create a session */

        Session sess = conn.openSession();

        sess.execCommand("uname -a && date && uptime && who");

        System.out.println("Here is some information about the remote host:");

        /* 
         * This basic example does not handle stderr, which is sometimes dangerous
         * (please read the FAQ).
         */

        InputStream stdout = new StreamGobbler(sess.getStdout());

        BufferedReader br = new BufferedReader(new InputStreamReader(stdout));

        while (true)
        {
            String line = br.readLine();
            if (line == null)
                break;
            res +=line;

        }

        /* Show exit status, if available (otherwise "null") */

        System.out.println("ExitCode: " + sess.getExitStatus());

        /* Close this session */

        sess.close();

        /* Close the connection */

        conn.close();

    }
    catch (IOException e)
    {
        e.printStackTrace(System.err);
        System.exit(2);
    }
     return res;
         } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:31:13.260

NoClassDefFoundError 的明显原因是特定类在类路径中不可用，因此您需要将包含`ch/ethz/ssh2/StreamGobbler`类的 jar 添加到类路径中，或者如果您期望它在类路径中不可用，则需要检查它为什么不可用。

看看这个链接：http: [//javarevisited.blogspot.com/2011/06/noclassdeffounderror-exception-in.html](http://javarevisited.blogspot.com/2011/06/noclassdeffounderror-exception-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-16T01:51:50.113

我也遇到这个问题。最后，我将 ganymed-ssh2-263-SNAPSHOT.jar 复制到 /usr/share/tomcat6/webapp/myapp/WEB-INF/lib 并修复问题。我想jar文件应该集成到myapp.war中。

# android - 从 ContentView 访问 Activity

> ID：10969081
> 
> 赞同：0
> 
> 时间：2012-06-10T13:26:27.380
> 
> 标签：android, android-activity

如何从它的 contentView 访问活动？contentView 是自定义布局实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:27:50.193

我将“自定义布局实现”解释为您创建了`View`.

`View`可以调用的任何子类`getContext()`在所有正常情况下都将返回`Activity`承载`View`.

# node.js - 带有超级代理的 Node.js 递归函数

> ID：10969082
> 
> 赞同：0
> 
> 时间：2012-06-10T13:26:34.713
> 
> 标签：node.js, recursion

我正在开发一个简单的函数，该函数利用[superagent](https://github.com/visionmedia/superagent)模块查询 API 服务以检索拆分为多个页面的信息。

一旦我完成每个调用，我必须将信息推送到一个数组中，然后当我检索到最后一页时，开始处理这个数组。

由于异步性，使用正常方式肯定会遇到问题，所以我需要回调或事件发射器之类的东西来摆脱这个问题。

Atm 我使用了这段代码，但这不起作用：

```
function getPage(page){
  pages = new Array()
  superagent.get('http://localhost/api.json')
  .end(function(r){
   if(r[r.length-1] == 'value')
    getPage(page++)
   else
    pages.push(r);
  );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:35:09.810

看看 async.js，它是一个非常有用的库，可以帮助你。

# c++ - 使用带参数的 Boost::Thread 时出现编译器错误

> ID：10969083
> 
> 赞同：0
> 
> 时间：2012-06-10T13:27:15.483
> 
> 标签：c++, boost

我将不胜感激这里的任何帮助。我正在尝试使用 Boost::Thread 异步调用函数，但出现了一些错误。这是我的真实代码。

主要：

```
vector<std::string> a = ...;
vector<std::string> b = ...;
vector<boost::thread> threads;

threads.push_back(boost::thread(do_work, an_integer, a[i], b.begin(), b.end()));

// Later I will join()... 
```

别处：

```
void do_work(int i, std::string a_string, vector<string>::iterator begin, vector<string>::iterator end)
{
    // Some stuff
} 
```

我对这些东西很陌生，更习惯于 C#。无论如何，这些是我得到的错误：

```
error C2664: 'void (int,std::string,std::_Vector_iterator<_Myvec>,std::_Vector_iterator<_Myvec>)' : cannot convert parameter 1 from 'std::_Vector_iterator<_Myvec>' to 'int'

error C2664: 'void (int,std::string,std::_Vector_iterator<_Myvec>,std::_Vector_iterator<_Myvec>)' : cannot convert parameter 3 from 'std::basic_string<_Elem,_Traits,_Ax>' to 'std::_Vector_iterator<_Myvec>'

error C2664: 'void (int,std::string,std::_Vector_iterator<_Myvec>,std::_Vector_iterator<_Myvec>)' : cannot convert parameter 4 from 'std::_Vector_iterator<_Myvec>' to 'std::_Vector_iterator<_Myvec>' 
```

我将不胜感激您能提供的任何帮助。我几乎可以肯定在做一些非常愚蠢的事情！非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:05:22.753

该编译器错误表明`b.begin()`并且`b.end()`是不同的类型，显然不能在您列出的代码中。重新检查您的代码以确保您没有被定义`b`为其他东西。（还要检查`an_integer`，因为编译器认为它是一个迭代器。）

# asp.net - Visual Studio 中的连接错误

> ID：10969085
> 
> 赞同：0
> 
> 时间：2012-06-10T13:27:43.423
> 
> 标签：asp.net, sql-server, visual-studio-2010, sql-server-2008-r2

我正在使用 ASP.NET 开发一个 Web 应用程序。我的数据库位于另一台名为`DataServer`. 数据库服务器操作系统是 Windows Server 2003，它使用 SQL Server 2008 R2。问题是当我启动计算机并第一次运行应用程序时，它无法连接到服务器并显示以下错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问

我打开`My Computer`并`\\DataServer`在 Windows 资源管理器的地址栏上键入并浏览服务器文件。这样做后问题就消失了。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:43:21.883

这可能只是一个名称解析问题——您使用的是域控制器还是工作组中的？您是否为了连接到服务器而打开和关闭 VPN？

在任何情况下，您都可以告诉 Visual Studio 连接到 IP 地址`DataServer`而不是名称（在您添加到项目的连接中或在 web.config 中明确指定的连接字符串中）。您还可以在您的主机文件中添加一个条目，该条目将取代任何 DNS 解析。

# iphone - 禁用对图层/场景的触摸以暂停

> ID：10969091
> 
> 赞同：0
> 
> 时间：2012-06-10T13:28:18.773
> 
> 标签：iphone, ios, cocos2d-iphone

我正在尝试为我的游戏创建一个暂停菜单。使用`[[CCDirector sharedDirector] pause]`效果很好，但是我的游戏精灵有自己的 ccTouch 方法，因此在游戏暂停时仍然可以拖动它们。

我通过在现有场景之上创建一个 CCLayer 来创建暂停菜单，然后将其删除并在他们点击恢复时恢复。

有没有一种简单的方法可以让它只有暂停层接收触摸？还是有其他选择？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:43:55.287

您可以为所有层实施某种锁定和解锁，在其中您将禁用和启用任何用户交互。然后只需实现将锁定/解锁命令转换为所有可锁定子项的逻辑。例如，它可以作为一些协议来实现

# android - 安卓模拟器上的游戏开发

> ID：10969092
> 
> 赞同：0
> 
> 时间：2012-06-10T13:28:31.747
> 
> 标签：android, android-emulator

我有 corei7 @1.73GHz 和 6GB Ram，模拟器真的很慢。你们喜欢如何开发游戏？在模拟器或真实设备上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T18:03:39.853

简单：在真实设备上。但是有很多原因为什么你需要两者。设备速度更快，可以反映您实际遇到的软件。模拟器的用途无穷无尽，您可以打开迂腐的运行时选项。因此，当您需要快速周转时使用设备，使用模拟器进行深度调试，使用设备以确保您不会在模拟器中遇到怪癖，并使用模拟器以确保您不会遇到特定于设备的行为。

# mysql - MySQL 查询优化

> ID：10969108
> 
> 赞同：2
> 
> 时间：2012-06-10T13:30:30.583
> 
> 标签：mysql, database, optimization, query-optimization

我有以下查询来从 MySQL（所有 InnoDB）中选择用户及其位置等。该表`user`，每个大约有 200 万行，大约 250 行`blocked_user`，大约3500 行和大约 280 万行。`blocked_countries``countries``regions``cities`

问题是查询非常快（0.05 秒），没有`AND co.country_id='us'`在`WHERE`子句中。但是，我尝试了很多，但只是感觉肯定有一个更简单更好的方法来处理这个查询，不是吗？

我错过了什么？非常感谢任何帮助！非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:16:46.423

再次感谢你的帮助。最后，我找到了解决问题的方向。性能问题主要是由于范围扫描和`ORDER BY ... LIMIT`.

所以，我学到了很多关于索引的知识（对我来说是新的），并发现如果你有一个范围扫描（在我的例子中，年龄在 x 和 y 之间），那么范围列必须是连接索引中的最后一个，否则该索引不能完全使用。另外，用于对结果进行排序的列，必须在索引的最后。因此，考虑到范围扫描和 之间的混合`ORDER BY`，您需要决定是否应该使用索引进行排序或选择。

在我的情况下，这意味着要为几个索引考虑一些好的组合，其中要排序的剩余行只是极少数，或者如果搜索不能缩小到仅一些行，则将使用一个单独的索引进行排序然后查询将快速找到由 给出的行数`LIMIT`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T13:36:56.267

尝试将 country_id 的 WHERE 更改为 HAVING

```
AND birthdate <=  '802726152'
AND birthdate >=  '676495752'

ORDER BY u.id DESC
HAVING co.country_id='us'
LIMIT 20 
```

# python - 如何在不拉伸图像的情况下更改 matplotlib 中 imshow 的比例？

> ID：10969113
> 
> 赞同：8
> 
> 时间：2012-06-10T13:31:09.077
> 
> 标签：python, matplotlib

我想以类似于此处[http://www.scipy.org/Plotting_Tutorial](http://www.scipy.org/Plotting_Tutorial)的第二个示例的方式使用 imshow 进行绘图，但要重新定义轴的比例。我还希望图像在执行此操作时保持静止！

示例中的代码：

```
from scipy import *
from pylab import *

# Creating the grid of coordinates x,y 
x,y = ogrid[-1.:1.:.01, -1.:1.:.01]

z = 3*y*(3*x**2-y**2)/4 + .5*cos(6*pi * sqrt(x**2 +y**2) + arctan2(x,y))

hold(True)
# Creating image
imshow(z, origin='lower', extent=[-1,1,-1,1])

xlabel('x')
ylabel('y')
title('A spiral !')

# Adding a line plot slicing the z matrix just for fun. 
plot(x[:], z[50, :])

show() 
```

如果我将范围修改为更宽，例如：

```
imshow(z, origin='lower', extent=[-4,4,-1,1]) 
```

然后拉伸生成的图像。但我想做的只是改变刻度以与我的数据一致。我知道我可以使用 pcolor 来保存 X 和 Y 数据，尽管这会产生其他影响。

我找到了这个答案，它允许我手动重做所有刻度：

[如何转换（或缩放）轴值并重新定义 matplotlib 中的滴答频率？](https://stackoverflow.com/questions/1143848/how-do-i-convert-or-scale-axis-values-and-redefine-the-tick-frequency-in-matpl)

但这似乎有点矫枉过正。

有没有办法只改变标签显示的范围？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T15:56:09.037

A`help(imshow)`会找到`aspect`参数，经过一些实验后，它似乎给出了你想要的（螺旋的方形图像，但 x 比例从 -4 到 4，y 从 -1 到 1）当像这样使用时：

```
imshow(z, origin='lower', extent=[-4,4,-1,1], aspect=4) 
```

但是现在你`plot`仍然是从-1到1，所以你也必须修改它......

```
plot(x[:]*4, z[50, :]) 
```

我认为当您有几个必须修改的元素时，仅使用单行刻度重新标记并不过分：

```
xticks(xticks()[0], [str(t*4) for t in xticks()[0]]) 
```

# c# - 如何在 C# 上将文件拖入整个表单？

> ID：10969114
> 
> 赞同：-1
> 
> 时间：2012-06-10T13:31:11.747
> 
> 标签：c#, forms, drag-and-drop, treelistview

我有一个 Windows 窗体，我想在其中启用拖放附件。

我已经激活了 myForm_DragEnter 和 myForm_DragDrop 事件，它似乎有效。

但是，在一个地方（treeListView），我无法执行拖动操作。

我该如何解决这个问题？我不想启用拖入treeListView，但到窗体...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:34:39.213

启用拖动到 treeListView 并将拖动的项目发送到表单。发送一个Form的引用到treeListView或者简单的直接调用Form的拖拽函数。

# c - 使用 C 在 SVG 中绘制切线图

> ID：10969119
> 
> 赞同：1
> 
> 时间：2012-06-10T13:31:52.673
> 
> 标签：c, graph, svg, drawing

这是我比较复杂的作业的最后一部分，我自己也搞不清楚。

基本上它是一个切线函数，使用 C 绘制到 SVG。

我是这样画的：

![在此处输入图像描述](../Images/31125a78bf16ae5754a5fa31317befaf.png)

这就是它的样子：

![在此处输入图像描述](../Images/f47873d7498130e9a6fa80f4b0e27ceb.png)

它几乎是一样的，除了我画的是那些没有定义切线的线。我该如何摆脱它？我实际上是使用一个简单的`for`循环生成该切线，并且我理解通过将 Lineto 更改为 Moveto 我将摆脱那些线，但是如何确定一个可用于任何高度/宽度和任何 (-x,x ) (-y,y)。有什么想法吗？

**源代码**： [链接到我的绘图](http://pastebin.com/GNzzvw7W)| [链接到原图](http://pastebin.com/A0fD9LKP)

编辑：结构

```
typedef struct svg_graph{
    int w;
    int h;
    int x;
    int y;
} graph; 
```

和代码本身：

```
double initializer = 0;
double m = 0;
double temp = 0;

initializer = svg->h/2 - tan(-svg->x)*(((double)svg->h/2)/svg->y);
fprintf(output, "<path clip-path=\"url(#myClip)\" d=\"M 0 %.1f", initializer)
temp = ((double)svg->x/(svg->w/2));
m = svg->h/2 - tan(-svg->x+temp)*((double)(svg->h/2)/svg->y);
for (int i = 1; i<=svg->w; i++){

      fprintf(output, " L %d %.1f", i, m);

      temp = ((double)svg->x/(svg->w/2)) + temp;
      m = svg->h/2 - tan(-svg->x+temp)*((double)(svg->h/2)/svg->y);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:58:39.843

如果导数是非有限的，那么您需要移动而不是线。

# list - 在haskell中输入后调用函数

> ID：10969120
> 
> 赞同：0
> 
> 时间：2012-06-10T13:32:18.780
> 
> 标签：list, function, haskell, input

这是家庭作业的一部分。我需要编写一个从输入读取信息直到空行的函数。在该函数之后，将第一个、第三个、第五个...行符号作为一个字符串，将第二个、第四个...作为另一个字符串。签名是`combine :: IO (String , String)`

我编写了一个函数，它接受一个列表作为参数，并将 1,3,5.. 放到一个`String`2,4,6 符号到另一个`String`。功能在这里：

```
intotwo (x : xs)
   = let
      (us , vs)
         = intotwo xs
   in
   (x : vs , us)
intotwo _
   = ([] , []) 
```

我还编写了一个读取输入的代码：它在这里：

```
combine
   = do
      lines <- getLine
      if null lines
         then return ([], [])
         else do
            linesagain <- combine
            return --what should I return? 
```

谁能帮我完成我的作业（可选：提供一些提示）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T15:25:21.907

我会给出一些提示来帮助您解决问题。

首先，为您定义的所有函数提供类型是一个巨大的帮助。这让编译器可以立即告诉您一个函数是否没有按照您的想法执行。当您需要将程序的不同部分连接在一起时，它还可以为您提供帮助。

其次，每个函数只解决一个问题是一个非常好的主意。您的 intotwo 函数很好地遵循了这一点，它很好地完成了拆分列表的工作。但是，您的 combine 函数看起来像是在尝试做太多事情，这会使编写变得更加困难。我会将该功能拆分为两个较小的功能。

最后，还有一个非常有用的特殊功能，叫做`undefined`. 这匹配任何类型，并帮助您编写函数。诀窍是从等于未定义的整个函数开始（并在运行时编译但崩溃），并逐步改进该函数，直到它完成您想要的并且没有更多的未定义。

所以首先，我会在 intotwo 函数中添加一个类型签名。类型是`[a] -> ([a], [a])`。

接下来，我将编写一个函数，从输入中读取行，直到遇到空行，然后返回读取的行列表。此函数将具有以下类型：

```
readLinesUntilEmpty :: IO [String]
readLinesUntilEmpty = undefined 
```

几乎可以做到这一点的实现是：

```
readLinesUntilEmpty = do
  nextLine <- getLine
  rest <- readLinesUntilEmpty
  return (nextLine : rest) 
```

然而，这永远不会停止阅读（注意如何不检查 nextLine 是否为空）。

以下函数显示了如何执行此操作（但我将部分实现排除在外）：

```
readLinesUntilEmpty = do
  nextLine <- getLine
  case nextLine of
    "" -> do
      undefined -- TODO fix me
    _ -> do
      undefined -- TODO fix me 
```

你应该能够从那里找出其余的。

接下来，您的 intotwo 函数返回两个字符串列表，但您需要再次将它们连接在一起。例如`["this", "that"]`应该变成`"this\nthat"`. 这种函数的类型是`[String] -> String`：

```
joinLines :: [String] -> String
joinLines = undefined -- TODO 
```

这是一个比 inttotwo 函数更容易编写的函数，所以你应该没问题。

最后，您可以将这三个函数链接在一起以获得结果：

```
combine :: IO (String, String)
combine = do
  lines <- readLinesUntilEmpty
  let (oddLines, evenLines) = intotwo lines
  return $ (joinLines oddLines, joinLines evenLines) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:28:33.787

由于您需要读取多个字符串，因此您需要递归输入。或者您可以只使用 getContents，但我不确定它是否适合交互式 I/O。像这样的东西：

```
combine = getContents
          >>= return . intotwo 
```

# jsf - JSF 。SelectOneMenu 和 SelectItems

> ID：10969122
> 
> 赞同：5
> 
> 时间：2012-06-10T13:32:33.277
> 
> 标签：jsf, selectonemenu

我试图让用户从 JSF 的下拉列表中选择一个集合项目。这是我正在使用的代码：

```
<f:view>
 <h:form id="insert">
    <h:selectOneMenu value="#{MyBean.user}">
        <f:selectItems value="#{MyBean.userList}" var="currentUser" itemValue="#{currentUser.username}" itemLabel="#{currentUser.username}"/>
     </h:selectOneMenu>
     <h:commandButton value="Insert" action="#{AuctionBean.insertItem}"/><br>
 </h:form>
</f:view> 
```

这是 MyBean 的代码：

```
@ManagedBean
public class MyBean{
    private String user;
    private Collection<User> userList;

    @PostConstruct
    public void init() {
                this.userList = UserRepository.getInstance().findAllUsers();
    }
    ...
    public String insertItem() {
         System.out.println("The selected user is " + this.user);
         ...
         return ("successfulInsertion");
    }
...
} 
```

如果需要我的用户获取器和设置器：

```
public String getUser() {
        return this.user;
    }

    public void setUser(String user) {
        this.user = user;
    } 
```

我的问题是，当它打印“选定的用户是”时，没有写 user.toString()，而是 userList.toString()！就像 selectOneMenu 没有正确设置一样，但我已经搜索了很多关于它的内容。任何人都可以帮忙吗？谢谢， 安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:02:14.890

`<f:selectItems>`不`Collection`支持。你需要一个`List`or`Map`或`Object[]`。

### 也可以看看：

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

* * *

**更新**：事实证明您使用的是 JSP 而不是 Facelets。新的 JSF 2.x 标记和属性**不适**用于 JSP。这包括`<f:selectItems var>`. 只有旧的 JSF 1.x 标记和属性可用于 JSP。从 JSF 2.0 开始，JSP 已被 Facelets 弃用并取而代之。您应该改用 Facelets。

### 也可以看看：

*   [从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T13:43:06.467

添加`<f:ajax/>`到您的`<h:selectOneMenu value="#{MyBean.user}">`

像这样

```
<h:selectOneMenu value="#{MyBean.user}">
    <f:ajax/>
    <f:selectItems value="#{MyBean.userList}" var="currentUser" itemValue="#{currentUser.username}" itemLabel="#{currentUser.username}"/>
</h:selectOneMenu> 
```

每次您从下拉列表中选择一个值时，这都会将您的选择提交给服务器...

或者

添加`<f:ajax execute="@form"/>`到您的按钮，以便在调用之前提交下拉菜单的选择`insertItem`

```
<h:commandButton value="Insert" action="#{AuctionBean.insertItem}">
    <f:ajax execute="@form"/>
</h:commandButton> 
```

# objective-c - 更改部分 uiwebview 文本

> ID：10969128
> 
> 赞同：0
> 
> 时间：2012-06-10T13:33:17.190
> 
> 标签：objective-c, uiwebview

我有一个 uiwebview，我加载了以下 NSString 文本

```
 NSString *htmltext=@"Likes: @Amore , @George , @Morfy ..."; 
```

然后我像这样将它加载到uiwebview中，以十六进制定义颜色

```
[wholikes loadData:[[NSString stringWithFormat:@"<html> <head><style>BODY { font-family: 'Times New Roman'; font-size: 14px; word-wrap: break-word}</style></head><body text=\"#645a49\">%@</body></html>", htmltext] dataUsingEncoding:NSUTF8StringEncoding]
              MIMEType:@"text/html"
      textEncodingName:@"UTF-8"
               baseURL:nil]; 
```

有没有办法更改部分 uiwebview 文本？我希望“喜欢：”以另一种颜色呈现。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:49:19.733

你可以使用css，就像这样：

```
<span style="color:blue;">Links:</span> 
```

那么“喜欢：”这个词的颜色是蓝色的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:52:29.913

只需将您的字符串分成两部分，然后将它们以适当的 HTML 格式插入到您的格式字符串中。因此

```
NSString *htmltext = @" @Amore , @George , @Morfy ...";
NSString *titletext = @"Likes: "; 

NSString *htmlString = [NSString stringWithFormat:
    @"<html><head>...etc. 
    <span style=\"color:red\">%@</span>
    <span style=\"color:blue\">%@</span>
    ...", 
    titletext, htmltext];

[wholikes loadData:[htmlString dataUsingEncoding:NSUTF8StringEncoding]
          MIMEType:@"text/html"
  textEncodingName:@"UTF-8"
           baseURL:nil]; 
```

# asp.net - Safari 兼容性问题

> ID：10969130
> 
> 赞同：-1
> 
> 时间：2012-06-10T13:33:19.100
> 
> 标签：asp.net, mobile, safari, cross-browser

我有在 .net flatform 1.1 上运行的 web 应用程序，在 windows 2003 服务器上运行。当我尝试访问 ipad 和 iphone 中的 Web 应用程序时，它仅加载母版页，默认网页正在加载到浏览器。我最近将我的 web 应用程序迁移到 asp.net framework 4.0 并部署在 windows 2008 服务器中，现在它在 IE 8 中运行得非常好，但是当我尝试在 safari 上浏览网站时仍然遇到同样的问题。谁能帮我解决这个问题？我真的需要在 ipad 上运行这个应用程序。

谢谢

哈林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:03:55.343

你的问题很模糊。您可以应用任何神奇的设置来解决您的所有问题，但有一些建议可以帮助您入门：

*   在 iPad 上的 Safari 设置中启用开发人员，以便您查看任何错误，
*   在您的 PC 上使用 Safari 来测试您的网站，
*   确保您的 html 有效，使用[http://validator.w3.org/](http://validator.w3.org/)进行确认。

这个“ASP.NET 转换和迁移”页面也可能有帮助：http: [//msdn.microsoft.com/en-us/library/bb398858](http://msdn.microsoft.com/en-us/library/bb398858)

# android - 自定义 Fragment 不能转换为其他自定义 Fragment

> ID：10969136
> 
> 赞同：1
> 
> 时间：2012-06-10T13:34:39.423
> 
> 标签：android, android-fragments

我尝试简单地用另一个自定义片段替换一个自定义片段。第一个自定义片段被调用`MenuFragment`并扩展`ListFragment`。创建活动时（onCreate），我将其插入到`layout_container`我在 XML 中定义的布局（称为）中：

```
FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
MenuFragment menufragment = new MenuFragment(); 
fragmentTransaction.add(R.id.layout_container, menufragment);
fragmentTransaction.commit(); 
```

在这里，我没有问题。

然后，当用户单击某些内容时，我想将其替换为名为`AlbumsFragment`（也扩展了）的第二个片段。`ListFragment`在我的 onClick 事件中，我放了：

```
AlbumsFragment albumsfragment = new AlbumsFragment(); 
FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
fragmentTransaction.replace(R.id.layout_container, albumsfragment);
fragmentTransaction.addToBackStack(null);
fragmentTransaction.commit(); 
```

在这里，新片段很好地显示并替换了菜单片段，但同时应用程序崩溃并且 LogCat 说：

```
 E/AndroidRuntime(25105): java.lang.ClassCastException: com.music.musicapp.AlbumsFragment cannot be cast to com.music.musicapp.MenuFragment 
```

我只使用和定位 Api 级别 15，所以我不使用 Android 支持包。

**编辑：** 这是我的专辑片段代码，非常简单，它只是一个包含两个项目“Album1”和“Album2”的列表。单击后我可以看到这两个项目，但应用程序立即崩溃。

```
package com.music.musicapp;

import java.util.ArrayList;

import android.app.ListFragment;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class AlbumsFragment extends ListFragment {

            // declare the array list
             ArrayList<String> array = new ArrayList<String>();

             @Override
                public void onActivityCreated(Bundle savedInstanceState) {
                    super.onActivityCreated(savedInstanceState);

                // Fill up Array 
                    array.add("album1");
                    array.add("album2");

                    setListAdapter(new ArrayAdapter<String>(getActivity(),
                            android.R.layout.simple_list_item_1, array));

                 }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:08:27.473

问题解决了，

我有另一个需要 的方法，`MenuFragment`因此，当这个片段被替换为 时`AlbumsFragment`，这个方法使应用程序崩溃，因为它引用了一个不存在的片段。

所以问题不在发布的代码中，对不起。重要的是要考虑替换片段的影响，并且在引用它时要小心（检查它是否仍在 UI 上，或者它是否已经发送到返回堆栈等...）。

感谢您的回答，很抱歉没有看到我的问题不存在（但是当项目变得复杂时，很难总是看到问题出在哪里：/）。

# yii - 如何在yii中链接数据

> ID：10969137
> 
> 赞同：2
> 
> 时间：2012-06-10T13:34:48.600
> 
> 标签：yii

我刚开始使用 yii，但我对 php 框架并不陌生。但是现在我遇到了这个问题：

我有两个模型/数据库：

部门： [http ://s7.directupload.net/images/120610/alemicys.png](http://s7.directupload.net/images/120610/alemicys.png)

员工： [http ://s1.directupload.net/images/120610/hxerdm8t.png](http://s1.directupload.net/images/120610/hxerdm8t.png)

我只是想在这个员工视图中显示部门的实际名称。因此，我希望使用“司法部”而不是“部门”栏中的 1。

这是我的数据库的样子：http://s1.directupload.net/images/120610/7wupindz.png

提前致谢！约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:04:32.263

在员工网格视图的[`columns`](http://www.yiiframework.com/doc/api/1.1/CGridView#columns-detail "http://www.yiiframework.com/doc/api/1.1/CGridView#columns-detail")属性中添加：

```
// this is in place of just 'departmentId',
array( 
    'name'=>'departmentId', // name of the foreign key attribute
    'value'=>'$data->department->name', // access the 'name' attribute of the related record through relation named 'department', the current record is represented by '$data'
    'type'=>'raw' // data is of raw type
), 
```

阅读[CDataColumn](http://www.yiiframework.com/doc/api/1.1/CDataColumn "http://www.yiiframework.com/doc/api/1.1/CDataColumn")以了解如何修改上述数组。

注意：由于您只要求显示，因此上面的代码将起作用，如果您希望此列的过滤器起作用，您必须要么

1.  修改员工模型的搜索功能（或您正在搜索的任何地方）以将输入字符串映射到部门 ID 或
2.  编写一些 javascript 将相关部门的 id 发送到搜索，而不是字符串。

现在过滤器只适用于部门ID（*即整数*）而不是名称（*字符串*）。

您也可以这样做而不是上面的代码：

```
//again in place of departmentId
'department.name' // using the 'department' relation, accessing its 'name' 
```

但是接下来要获得过滤器会很困难（您必须再次使用数组），并且列标题也将成为部门模型*名称属性的**attributeLabel*。可以使用格式更改标题 : ，因此您可以：*`'name:type:header'``'department.name:Department'`*

 *大多数这些细节都可以在我包含的文档链接中找到。*

# jquery - 拆分为列的链接列表

> ID：10969139
> 
> 赞同：1
> 
> 时间：2012-06-10T13:35:11.680
> 
> 标签：jquery

我正在使用 ajax 调用获取链接，并且内容是动态的。

我想让链接流动：10个链接从上到下，其他10个链接进入一个新列等。

我需要一些看起来像这样的东西：http: [//jsfiddle.net/89JKM/18/](http://jsfiddle.net/89JKM/18/)，但这可以跨浏览器工作。此外，如果数字或链接是例如 15，那么 10 的第一列应该在它用 5 填充第二列之前填满，并将最后一列留空。我相信 jQuery 脚本可以解决问题，或者如果有一些很酷的 CSS 魔法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:30:35.250

好吧，这是一种方法：

```
function cssSupportFor(prop) {
    if (!prop) {
        // you have to supply a property to test
        return false;
    }
    else {
        var styles = document.body.style;

        // testing for native support:
        if (prop in styles) {
            // returns the property
            return prop;
        }
        else {
            // tests for vendor-prefixed support:
            var vendors = ['Moz', 'Webkit', 'Ms', 'O'],
                // upper-cases the first letter of the property for camel-casing
                Prop = prop[0].toUpperCase() + prop.substring(1);
            for (var i = 0, len = vendors.length; i < len; i++) {
                if ((vendors[i] + Prop) in styles) {
                    // returns the vendor-prefixed property
                    return vendors[i] + Prop;
                }
                else if (i == (vendors.length - 1)) {
                    // if no vendor-prefixed support, or native support, returns false
                    return false;
                }
            }
        }
    }
}

// if there's support for the tested property then it's implemented here
if (cssSupportFor('columnCount')) {
    var prop = cssSupportFor('columnCount');
    $('#linklist')[0].style[prop] = 3;
}
// otherwise the following jQuery kicks in to achieve much the same
else {
    var aElems = $('#linklist a'),
        cols = Math.ceil(aElems.length / 10);

    for (var i = 0, len = cols; i < cols; i++) {
        var d = $('<div />', {
            'class': 'col'
        }).appendTo('#linklist');
        $('#linklist > a:lt(10)').appendTo(d);
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/89JKM/28/)。

参考：

*   jQuery：
    *   [`appendTo()`](http://api.jquery.com/appendTo/).
    *   [`:lt()`小于选择器](http://api.jquery.com/less-than-selector/)。
*   'Plain'/native JavaScript（全部来自[Mozilla 开发者网络](https://developer.mozilla.org/en/JavaScript)）：
    *   [`CSSStyle`声明](https://developer.mozilla.org/en/DOM/CSSStyleDeclaration)。
    *   [`element.style`](https://developer.mozilla.org/en/DOM/element.style).
    *   [`Math.ceil()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/ceil).
    *   [`string.substring()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring).
    *   [`string.toUpperCase()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/toUpperCase).

# javascript - 将 div 项存储在数组中

> ID：10969142
> 
> 赞同：0
> 
> 时间：2012-06-10T13:35:42.120
> 
> 标签：javascript, jquery, arrays

我想制作堆栈，对于每个堆栈我都有一个 div 容器。在那个容器中有很多 div，即堆栈的项目。

我想使用“类”（我知道 javascript 并没有真正拥有它们）。

首先，我拿到容器，然后从这里通过它。

```
var stacks = [];

$(document).ready(function(){

    $('.stackContainer').each(function(containerIndex) {
        //stacks[containerIndex] = $(this);
        $(this).css('z-index', containerIndex);
        stacks.push(new StackMedia($(this)));
    });

}); 
```

现在是困难的部分（对我来说）。在我想存储项目的 StackMedia 中，这只是带有 stackItem 类的 div（它不应该变成单例）。

我尝试了很多东西，atm 我找不到变量项目。

```
function StackMedia (container) { //, x, y, overlapX, overlapY
    this.container = container;
    //this.x = x;
    //this.y = y;
    //this.overlapX = overlapX;
    //this.overlapY = overlapY;

    this.items = container.find('.stackItem');
    console.log(items.length);

    //var elems = container.find('.stackItem'); 
    //var $items = jQuery.makeArray(elems);

    /*
    for(var i = 0; i < $items.length; i++) {
        console.log($items[i]);
        $items[i].css('top', i * 10).css('left', i * 10);

    }
    */

    /*
    this.items = [];

    container.find('.stackItem').each(function(itemIndex) {
        //console.log($(this));
        //items = $(this);
        this.items.push("test");
    });
    */

    /*
    items = container.find('.stackItem');
    */

} 
```

我怎样才能实现我想要的？

# ruby-on-rails - Rails - 使用 ruby gems 安装电子表格 gem 时出错

> ID：10969144
> 
> 赞同：2
> 
> 时间：2012-06-10T13:36:09.183
> 
> 标签：ruby-on-rails, gem

我希望能够处理 Rails 中的 Excel 电子表格。
所以我正在使用`spreadsheet`图书馆。
但是，当我使用 ruby​​gems 安装电子表格时，出现异常：

```
Successfully installed spreadsheet-0.7.1
1 gem installed
Installing ri documentation for spreadsheet-0.7.1...
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/internals.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/reader/biff8.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/reader.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/writer/biff8.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/writer/format.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/writer/n_worksheet.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/writer/workbook.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/writer/worksheet.rb, skipping
Installing RDoc documentation for spreadsheet-0.7.1...
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/internals.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/reader/biff8.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/reader.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/writer/biff8.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/writer/format.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/writer/n_worksheet.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/writer/workbook.rb, skipping
unable to convert "\xE2" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to GBK
for lib/spreadsheet/excel/writer/worksheet.rb, skipping` 
```

然后在我的 doSomethingController 中，我编写了代码：

```
require 'spreadsheet' 
```

但服务器返回错误

```
cannot load such file -- spreadsheet 
```

你能帮我弄清楚发生了什么，我该如何解决这个异常

我的环境：

```
ruby 1.9.3
rubygem 1.8.16 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:19:12.397

检查您的宝石：

```
gem list 
```

检查是否安装了那个：

```
gem list | grep spreadsheet 
```

按照[http://rubygems.org/gems/spreadsheet](http://rubygems.org/gems/spreadsheet)上的使用说明进行操作，其中还谈到了开发依赖项：

```
hoe ~> 2.13   
rdoc ~> 3.10 
```

[http://spreadsheet.rubyforge.org/files/GUIDE_txt.html](http://spreadsheet.rubyforge.org/files/GUIDE_txt.html)上有一个很棒的“入门”指南

wiki - [http://spreadsheet.ch/](http://spreadsheet.ch/)也很有用。

# hibernate - 针对不同需求的 Hibernate 映射实体

> ID：10969147
> 
> 赞同：0
> 
> 时间：2012-06-10T13:36:44.347
> 
> 标签：hibernate, hibernate-annotations

我有两个实体。1) 文档和 2) Document_Users。一个文档可以有读者和作者。表格设计如下：

**文档**

*   ID
*   姓名

**文档_用户**

*   ID
*   姓名
*   角色
*   文档 ID

“角色”属性的值可以是 READER 和 WRITER。

我想设计 Document 类如下。

```
@Entity
@Table
public class document
{
@Id
private int id;
@Column
private String name;

private List<DocumentUser> readers;

private List<DocumentUser> writers;
} 
```

请指导我如何在上面的类中映射“读者”和“作者”，以便在选择文档时可以获得它们的列表。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:10:35.837

我会让事情变得简单，只需要一个 DocumentUser 的映射集合。获取作者只会返回一个过滤的集合。获得非作家的读者也是如此：

```
public List<DocumentUser> getWriters() {
    List<DocumentUser> result = new ArrayList<DocumentUser>();
    for (DocumentUser du : documentUsers) {
        if (du.getRole() == DocumentUserRole.WRITER) {
            result.add(du);
        }
    }
    return du;
} 
```

这样做的好处是非常接近数据库设计的实际情况。它不需要任何特定于实现的技巧。并且它允许通过执行将读者转换为作者`documentUser.setRole(DocumentUserRole.WRITER)`，而无需将用户从列表中删除并将其添加到另一个列表中。

如果从一开始就知道 DocumentUser 的类型并且永远不会改变，那么基于继承的解决方案将是合适的。

# protocol-buffers - 安装 google protobuf 需要编译吗？

> ID：10969149
> 
> 赞同：8
> 
> 时间：2012-06-10T13:37:08.297
> 
> 标签：protocol-buffers

我只是想确定一下：如果你想使用谷歌协议缓冲区，我可以找到编译器的二进制文件，但不知何故，我似乎还需要编译剩余的源文件。这是真的？我有一个 MinGW c 编译器，可以吗？有人有make文件吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-10T13:43:17.550

通常需要编译器将protobuf“模式”编译为包装器，以便在您的代码中使用。所以这不是一个实际的制作/构建过程。提供更多详细信息，您将如何使用 proto 文件 - 即您项目的语言是什么。

**更新**：看来您没有安装 python-protobuf，或者 Python 找不到它。

使用安装它

```
apt-get install python-protobuf # for Ubuntu
yum install python-protobuf # for Fedora/Redhat 
```

或者

```
easy_install protobuf 
```

或从源代码安装，如下所述： [http ://code.google.com/p/protobuf/issues/detail?id=235](http://code.google.com/p/protobuf/issues/detail?id=235)

# javascript - 如何在 iPad 的 safari 上调试 javascript 和 css（我可以在 iPad 上使用类似 firebug 的东西）吗？

> ID：10969150
> 
> 赞同：1
> 
> 时间：2012-06-10T13:37:15.233
> 
> 标签：javascript, css, ipad, safari, firebug

我正在为我的网站开发 iPad 版本，但在 ipad 上调试 javascript 和 css 时遇到了困难。有什么简单的方法可以做到这一点？我可以在 iPad 上使用 firebug 之类的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:44:31.957

您应该查看 JS 控制台[http://jsconsole.com/](http://jsconsole.com/)。

这是一个不错的入门视频[http://www.youtube.com/watch?v=BEo8oJYey-M](http://www.youtube.com/watch?v=BEo8oJYey-M)

# android - 将文本文件传递给 arrayadapter

> ID：10969153
> 
> 赞同：0
> 
> 时间：2012-06-10T13:37:20.733
> 
> 标签：android, arraylist, android-arrayadapter

我的问题如下。我希望能够将文本文件读入数组适配器。我有一个 TextView 和 3 个 RadioButtons。到目前为止，我已经设法传递了一个可用于更新 TextView 的字符串数组。我有一个数组列表，如下所示

```
ArrayList<info> list = new ArrayList<info>();

    for(int i=1; i <= 3; i++)
    {
        Reader reader = new ResultsReader("C:/Users/ALEXDEV/workspace/Questions/src/quiz"+i+".txt");
        reader.read();

        String str = ((ResultsReader)reader).getInput();
        String data[] = str.split("<.>");

        info = q new info();
        q.question = data[0];
        q.choice1 = data[2];
        q.choice2 = data[3];
        q.choice3 = data[4];
        list.add(q);
    }

    for(Question qs: list) { 

      System.out.println("Q: "+qs.question); 
        System.out.println("Q: "+qs.choice1); 
        System.out.println("Q: "+qs.choice2); 
        System.out.println("Q: "+qs.choice3);   
    } 
```

-

Q：问题
Q：回答一
Q：回答二
Q：回答三

所以我想做的是将arraylist传递给arrayadapter，这样我就可以使用getView方法返回各种结果

到目前为止，我已经尝试将作为数组列表的列表传递给 MySimpleArrayAdapter 适配器 = new MySimpleArrayAdapter(this, list);

公共类 CustomAdapter 扩展 ArrayAdapter {

```
private ArrayList<Question> list;
private Context context;

public CustomAdapter(Context context, int textViewResourceId, ArrayList<Question> list) {
    super(context, textViewResourceId,list);
    this.context = context;
    this.list = list;
    // TODO Auto-generated constructor stub

}

public View getView(int position, View convertView, ViewGroup parent)
{
     View view = convertView;
        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
           view = inflater.inflate(R.layout.basic, null);
        }

        Question element = list.get(position);

        if (element!= null) {
            // My layout has only one TextView
            TextView itemView = (TextView) view.findViewById(R.id.questionText);

            if (itemView != null) {
                // do whatever you want with your string and long
                itemView.setText(String.format("%s %d", element.question, element.answer));
            }

         }

        return view;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:15:14.820

您需要创建一个自定义适配器来提供列表视图。

您可以创建自定义 ArrayAdapter（[此处](https://stackoverflow.com/a/2265712/1105376)为示例）或 BaseAdapter（[此处](http://geekswithblogs.net/bosuch/archive/2011/01/31/android---create-a-custom-multi-line-listview-bound-to-an.aspx)为示例）。

在任何一种情况下，您都将覆盖`getView`适配器的方法，以将数据处理到布局中的各种小部件中。

**编辑**

如果问题实际上是“我如何调用适配器？” 然后：

```
private CustomAdapter my_adapter;

my_adapter = new CustomAdapter(this, R.layout.row, list);
setListAdapter(my_adapter); 
```

并按照上面的链接之一创建您的`CustomAdapter`.

# jquery - 如何将 Jeditable 与 hoverintent 一起使用

> ID：10969156
> 
> 赞同：1
> 
> 时间：2012-06-10T13:38:14.507
> 
> 标签：jquery, jquery-plugins, jeditable, hoverintent

我想使用 hoverIntent(plugin) 事件使我的字段可编辑。因此，用户将鼠标悬停在某个字段上大约一秒钟，该字段就会以编辑模式显示。我尝试了几种方法，但都没有奏效。有什么建议么？以下是我尝试的方法：

**方法 1 - 使用 JEditable 插件参数（无法弄清楚设置）**

```
 $('.dle_textfield 17').editable('http://www.example.com/save.php', {
     indicator : 'Saving...',
     plugin: function (settings,original){
     var config={
       over:function(){},
       interval:500,
       out:function(){}
     }  
       $('.dle_textfield 17').hoverIntent(config);
     }
 }); 
```

**方法 2 - 使用 hoverintent 和 hover 事件**

*此方法有效，但需要触发辅助悬停事件（用户悬停在场地外和返回场地）。这是一种糟糕的用户体验。我希望鼠标不必移动并变得可编辑。

```
var config={
  over:test,
  interval:500,
  out:function(){}
}   
function test() {
   $('.dle_textfield.17').attr('class','edittest 17');
   $('.edittest.17').live('hover',function(){
        $('.edittest.17').editable('http://www.example.com/save.php', {
          indicator : 'Saving...',
          event:'hover'
         });
    });
 }

$('.dle_textfield').hoverIntent(config); 
```

# java - 如何使用 Primefaces 在 JSF 页面中显示来自 Java 缓冲区的消息

> ID：10969157
> 
> 赞同：1
> 
> 时间：2012-06-10T13:38:19.800
> 
> 标签：java, jsf, jsf-2, primefaces

我设法用 Primefaces 创建了捆绑包。我想创建 Java 缓冲区并以 FIFO 顺序存储消息。将消息插入缓冲区时，我想将其显示到 JSF 页面中。我怎么能用 Primefaces 做到这一点？

我发现了 Primefaces 的例子：

```
<h:form id="dccd">

    <p:growl id="growl" showDetail="true" sticky="true" />

    <p:panel header="Growl">
        <h:panelGrid columns="2">
            <h:outputText value="Your Name: *" /> 
            <p:inputText value="#{bean.text}" required="true" label="Name"/>
        </h:panelGrid>

        <p:commandButton value="Save" actionListener="#{bean.save}" update="growl"/>
    </p:panel>

</h:form> 
```

但这仅在我调用动作侦听器时才有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:27:49.797

您的示例仅在按下按钮时才有效的原因是您正在更新咆哮元素。

您可以做两件事来确保不断收到新消息。

# 推

使用推送时，服务器会在必要时将更新推送到客户端。PrimeFaces 有[一些例子](http://www.primefaces.org/showcase/push/index.jsf)可以帮助你实现推送。我不知道这是否适用于所有浏览器。

# 轮询

使用轮询客户端定期检查更新（会产生大量网络流量）。PrimeFaces 有一个 poll 元素可以让事情变得更简单，看看[这个例子](http://www.primefaces.org/showcase/ui/poll.jsf)。AFAIK 它使用 JavaScript，因此它应该适用于大多数现代浏览器。

# html - 对齐我的图像，使它们彼此相邻

> ID：10969159
> 
> 赞同：3
> 
> 时间：2012-06-10T13:39:02.723
> 
> 标签：html, css

我正在回显一些图像，它们都可以正常工作，但我的问题是它们都在页面示例中

图 1

图 2

图 3

我想让它们像这样坐在一起

图 1 图 2 图 3

等等。我试图将内联添加到我的`div`标签的 CSS 中，但它不起作用......

```
 <div class="auction_box" style="height:150px">

                                <form name="myform" action="userbox.php" method="POST">
                                <p> </p>
                                <p> </p>
                                <p> </p>

    <p align="center"><a href="smalldex.php?name='.$battle_get['name'].'"?KeepThis=true&amp;TB_iframe=true&amp;height=400&amp;width=600" class="thickbox"><img src="http://pokemontoxic.net/img/pokemon/'.$v->type.''.$battle_get['pic'].'" width="" height="" border="0" /></a></p>
      <p align="center"><span style="height: 70px; text-align: center;">

                                    Name:<br/>' .$v->pokemon. '<br/>
                                    Level:' .$v->level. '<br/>
                                    Exp:' .$v->exp. '<br/>
                                    Gender:' .$v->gender. '<br/>
                                    Type:' .$v->type. '<br/>

    Slot you want to put your pokemon in

<select name="mydropdown">

<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
</select>

<input type="hidden" name="myName" value="'.$v->id.'" />
                                <input type="submit" value="submit" name="submit"> 

                                </form>
                                </div>'; 
```

可以看到`div`被称为`auction_box`. 我在 CSS 中尝试了很多东西，但没有奏效……我希望它们彼此相邻。

你能看到图像是这部分吗

```
 <p align="center"><a href="smalldex.php?name='.$battle_get['name'].'"?KeepThis=true&amp;TB_iframe=true&amp;height=400&amp;width=600" class="thickbox"><img src="http://pokemontoxic.net/img/pokemon/'.$v->type.''.$battle_get['pic'].'" width="" height="" border="0" /></a></p>
      <p align="center"><span style="height: 70px; text-align: center;"> 
```

我希望整个回声（例如水平有很好的图片）是内联的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T13:45:17.800

使用样式**float:left**到放置图像的容器

```
<div style="width:500 px">
<div style="float:left; width:100 px">Image 1</div>
<div style="float:left; width:100 px">Image 2</div>
<div style="float:left; width:100 px">Image 3</div>

<div style="clear:both"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T14:05:08.533

`width`只要孩子适合父母，就可以随心所欲。( `border`'s &`padding`将计入`width`.)

[jsFiddle 演示](http://jsfiddle.net/4d6Hc/)

HTML

```
<div id="parent">
    <div class="image">Image 1</div>
    <div class="image">Image 2</div>
    <div class="image">Image 3</div>

    <div style="clear:both"></div>
</div> 
```

CSS：

```
#parent {
    width: 900px;
}

.image {
    float: left;
    width: 300px;
} 
```

# android - 带有 2 个 ImageView 和 3 个 TextView 的 RealtiveLayout

> ID：10969160
> 
> 赞同：0
> 
> 时间：2012-06-10T13:39:09.247
> 
> 标签：android, layout

我想要一个这样的布局： ![自定义布局](../Images/6cd400917f484d2890bc29c208245b27.png)

到目前为止，我已经得到了这个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:background="@drawable/game1_background"
     >

    <ImageView 
        android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:id="@+id/flag1"
        />
    <TextView
        android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
         android:layout_centerVertical="true"

         android:id="@+id/team1"
        />
    <TextView 
        android:layout_width="wrap_content"
    android:layout_height="wrap_content" 

        />

<TextView
        android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
         android:layout_centerVertical="true"

         android:id="@+id/team2"
        />
<ImageView 
        android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:id="@+id/flag2"
        />
</RelativeLayout> 
```

但这不起作用。有人可以说为什么吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:58:11.463

我试图让它尽可能接近你所拥有的。我懂了：

![在此处输入图像描述](../Images/159c7ccc15c5c8ba09cba7895f3a328a.png)

这是你需要做的

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
     >
    <ImageView 
        android:id="@+id/image1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_alignParentLeft="true"
        android:background="@drawable/ic_launcher"
            />
    <TextView
        android:id="@+id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/image1"
        android:text="Text1"
        />
    <TextView 
        android:id="@+id/text2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_centerInParent="true"
        android:text="Text2"
        />

    <TextView
        android:id="@+id/text3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@id/image2"
        android:text="Text3"
        />
<ImageView 
        android:id="@+id/image2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_alignParentRight="true"
        android:background="@drawable/ic_launcher"
        />
</RelativeLayout> 
```

使用`android:margin`或`android:padding`根据需要调整文本框位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T13:56:22.083

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center_vertical"
    android:background="@drawable/game1_background">
  <ImageView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/flag1"/>
  <TextView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:id="@+id/team1"/>
  <TextView 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
  <TextView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
     android:id="@+id/team2"/>
  <ImageView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/flag2"/>
</LinearLayout> 
```

注意参数： android:gravity="center_vertical" 它将垂直发送所有孩子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T13:58:11.907

与`RelativeLayout`你将不得不做这样的事情......

```
<ImageView
    android:id="@+id/flag1"
    android:layout_width="60dp"
    android:layout_height="60dp"
    android:layout_alignParentLeft="true"
    android:layout_margin="10dp"
    android:background="@drawable/ic_launcher" />

<TextView
    android:id="@+id/team1"
    android:layout_width="wrap_content"
    android:gravity="center"
    android:layout_height="60dp"
    android:layout_margin="10dp"
    android:layout_toRightOf="@id/flag1"
    android:text="hello" />

<TextView
    android:id="@+id/team3"
    android:layout_width="wrap_content"
    android:gravity="center"
    android:layout_height="60dp"
    android:layout_margin="10dp"
    android:layout_toRightOf="@id/team1"
    android:text="gth" />

<TextView
    android:id="@+id/team2"
    android:layout_width="wrap_content"
    android:gravity="center"
    android:layout_height="60dp"
    android:layout_margin="10dp"
    android:layout_toRightOf="@id/team3"
    android:text="gth" />

<ImageView
    android:id="@+id/flag2"
    android:layout_width="60dp"
    android:layout_height="60dp"
    android:layout_margin="10dp"
    android:layout_toRightOf="@id/team2"
    android:background="@drawable/ic_launcher"
    android:text="gth" /> 
```

请根据您的规格调整尺寸。

RelativeLayout 有一组不同的属性，可用于在屏幕内定位 View，它易于学习且灵活，请参阅[RelativeLayout 的 Android 文档](http://developer.android.com/reference/android/widget/RelativeLayout.html)了解更多信息。

# facebook - Facebook 发送对话链接错误

> ID：10969163
> 
> 赞同：2
> 
> 时间：2012-06-10T13:39:51.433
> 
> 标签：facebook, dialog, facebook-javascript-sdk

为什么下面的代码有时只有效？我可以从一个 Facebook 帐户发送它，一切正常，但从另一个 Facebook Messenger 不会显示链接说它已被删除。

我已经尝试使用具有相同结果的 urlencoding 链接，但我认为这可能是由于缓存造成的？

有没有人有一个工作的例子？

```
 ```
FB.init({ appId: '1234567890', xfbml: true, cookie: true });

              FB.ui({
                  method: 'send',
                  name: 'Name example',
                  link: 'http://example.com/tab.aspx?something=1',
                  picture: 'https://example.com/UserImg/shareimage_1.png?c=634749391974203784',
                  display: 'popup',
                  description: 'Description'
              }, function (response) {
                  if (response == "") {

                  } else {

                  }
              }); 
``` 
            回答 #1

赞同：0

时间：2013-03-06T23:21:07.643

[关于这个问题的 facebook 文档](https://developers.facebook.com/bugs/284149695026014/)

Arthur Klepchukov · Berkeley 我可能已经解决了我的问题，这要归功于：“如果我有一个链接到域的 Facebook 应用程序，例如 example.com，那么我可以从该应用程序发送到除 example.com 之外的任何网站的链接。所以看起来就像 facebook 采取的反垃圾邮件措施一样。” 从[Facebook 发送对话框不适用于除 Google 之外的任何 URL](https://stackoverflow.com/questions/11368639/facebook-send-dialog-doesnt-work-for-any-urls-except-google)。回复 · 3 · 不同 · 取消关注帖子 · 2012 年 8 月 31 日下午 3:13

```

# r - 用于短期任务的 Amazon EC2 按需工作人员

> ID：10969164
> 
> 赞同：19
> 
> 时间：2012-06-10T13:39:59.170
> 
> 标签：r, amazon-ec2, amazon-emr, amazon-swf

我正在寻找构建一个 Web 应用程序，该应用程序需要在 R 中按需运行资源密集型 MCMC（[马尔可夫链蒙特卡罗）计算，以便为用户生成一些概率图。](http://en.wikipedia.org/wiki/Markov_chain_Monte_Carlo)

约束：

1.  显然我不想在与 Web 应用前端相同的服务器上运行资源密集型计算，因此需要将这些任务交给**工作实例**。

2.  这些计算需要大量的 CPU 才能运行，我希望尽可能降低延迟（希望是几秒钟，而不是几分钟），所以我更愿意在**更强大的硬件**上运行计算。

3.  我负担不起以约 66 美分/小时 x 24 小时/天的速度运行强大的 EC2 实例，因此可能需要**按需**或现场请求实例。

以下是我提出的选项：

1.  每天 24 小时运行一个廉价且负担得起的工作实例，该实例一次执行一项任务，由 Amazon SWF（或 SQS）管理。

    **缺点：**

    *   *高延迟*- 更便宜的硬件，更长的等待时间。

2.  为每个任务生成一个更强大的工作实例（只要将作业添加到队列中就会启动）并在完成时终止实例。

    **缺点：**

    *   *昂贵/浪费*- 我每次都要在服务器上支付一个小时，并且只用几秒钟来计算

    *   *启动开销*——按需启动一个新的 EC2 实例会引入不可忽略的延迟（抵消使用更强大硬件的全部目的）吗？

3.  与 #2 类似，但 EC2 现货请求出价低。

    **缺点：**

    *   *启动开销*- 见 #2

    *   *不一致？*- 我以前从未处理过现场请求，所以我不知道这样的解决方案会有多不稳定或动手操作......我是否必须不断调整我的出价以确保我仍然可以在高峰时间完成任务? 另外，我想我必须密切监视我的流程，以确保它们在计算过程中不会被中断。

4.  某种混合解决方案，我主动监控强大的硬件工作实例及其负载，并每小时智能地启动和终止实例，以保持成本和可用性的最佳平衡

    **。**

    *   *复杂且昂贵的设置*——除非有一个很好的托管服务来处理这样的事情，否则我必须自己设置所有的基础设施......

我希望有一些服务可以让我按分钟而不是按小时为高度可用的按需硬件付费。

所以我的问题如下：

*   你会如何建议解决这个问题？

*   是否有一个很好的 EC2 实例管理解决方案可以位于 Amazon SWF 之上并帮助我进行负载平衡和终止空闲工作人员？

*   现场请求投标会解决我的问题，还是更适合不一定需要立即完成的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T03:17:56.443

您可能不知道还有另一种选择。实际上我只是偶然发现了它： http: [//multyvac.com](http://multyvac.com)

我没有使用它的经验（所以我不能保证），但它看起来像是我见过的第一个真正提供真正“实用计算”的解决方案。它从 Python 开始，但现在支持任何语言。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-03T08:51:44.290

> *我希望有一些服务可以让我按分钟而不是按小时为高度可用的按需硬件付费。*

该服务是[AWS Lambda](https://aws.amazon.com/lambda/details/)，当您提出问题时它不可用：

> Lambda 在高可用性计算基础架构上运行您的代码并执行计算资源的所有管理，包括服务器和操作系统维护、容量配置和自动扩展

[定价](https://aws.amazon.com/lambda/pricing/)：

> 根据对函数的请求数量和**代码执行时间向您收费**
> 
> 持续时间从您的代码开始执行到它返回或以其他方式终止的时间计算，**四舍五入到最接近的 100ms**。
> 
> Lambda 免费套餐包括每月 100 万**个免费请求和每月**400,000 GB 秒的计算时间。

您还可以使用[HTTP 端点](https://aws.amazon.com/lambda/faqs/)包装 Lambda 函数，可能会从您的应用程序中删除该层：

> 您可以通过使用 Amazon API Gateway 定义自定义 RESTful API 通过 HTTPS 调用 Lambda 函数。这为您的函数提供了一个端点，可以响应 GET、PUT 和 POST 等 REST 调用。阅读有关将 AWS Lambda 与 Amazon API Gateway 结合使用的更多信息。

警告：Lambda 目前只支持 JavaScript、Java 和 Python，所以我不确定你将如何让 R 工作。您可能需要在这些运行时之一中托管 R。

# c++ - 透视矩阵的旋转角度

> ID：10969170
> 
> 赞同：1
> 
> 时间：2012-06-10T13:40:36.853
> 
> 标签：c++, opencv, computer-vision

如何从透视矩阵检测旋转角度？

我写了这段代码，但结果角度不超过 40 ...

```
Mat mmat;
mmat.create(3,3,CV_32FC1);
mmat=getPerspectiveTransform(templPoints,imgPoints);
cout<< mmat<<endl<<endl;
float angle=acos(mmat.at<double>(0,0));
angle=(angle*180)/3.14;
cout<<"angle is"<<angle<<endl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T15:18:18.277

getPerspectiveTransform 返回一个单应矩阵，可以这样分解：

[R11,R12,T1]

[R21,R22,T2]

[ 磷 , 磷 , 1]

R代表旋转矩阵，T代表平移，P代表透视扭曲。

有关旋转矩阵表示的更多信息：

[http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

[http://mathworld.wolfram.com/RotationMatrix.html](http://mathworld.wolfram.com/RotationMatrix.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T01:46:45.437

过程如下。考虑一个 3D 点 X，在齐次坐标中由列向量 [ x1, x2, x3, 1]' 表示（我使用素数符号“'”表示转置）。然后考虑一个 2D 点 u = [u1, u2, 1]'，它是（透视）相机中 X 的图像。然后相机的投影由 3x4 投影矩阵 P 表示，使得

u = P * X。

其中“*”表示逐列乘积：u1 = P11*x1 + P12*x2 + P13*x3 + P14 等。

矩阵 P 可以分解为两个矩阵的乘积：

P = K * Q

其中 K 是 3x3 上对角矩阵

```
K = [ fx s  cx
      0  fy cy
      0  0  1 ] 
```

代表相机，Q是一个3x4矩阵

```
Q = [R | t] 
```

其中 R 是相机的 3x3 旋转矩阵，t 是 3x1 平移向量。

如果给定项目矩阵 P，则恢复 K、R 和 t 的过程如下：

1.  计算P的“ [RQ 分解”](http://en.wikipedia.org/wiki/QR_decomposition)
2.  从 Q 中提取 R（只需阅读其最左边的 3 列）

# javascript - 返回 WinJS.xhr 请求结果

> ID：10969174
> 
> 赞同：1
> 
> 时间：2012-06-10T13:41:37.440
> 
> 标签：javascript, windows, winjs, microsoft-metro

我正在使用 Windows 8 Metro SDK atm，但在使用 WinJS.xhr 时遇到了一些麻烦。如果不是在 getData 函数中返回 WinJS.xhr，而是返回一些 json 对象，一切正常，但我想返回由 xhr 请求生成的 json 对象。

我在这里的尝试有什么问题？谢谢！！:)

```
(function () {
    "use strict";

function getData() {
    return WinJS.xhr({ url: "http://stackoverflow.com" }).done(
        function (request) {
            var results = [];
            var Item = {
                title: "title",
                text: "some text goes here"
            }
            results.push(Item);
            return results;
        },
        function (request) {
            var results = [];
            results.push({ title: "error", text: "error text" });
            return results;
        }
    );
}

var categoryList = new WinJS.Binding.List(getData());

var publicMembers = { itemList: categoryList };
WinJS.Namespace.define("Data", publicMembers);

})(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T21:27:52.980

您将无法让您的`getData`函数返回数据本身 - 这是 Javascript 和 Metro 中异步操作的本质。

该`WinJS.xhr`函数返回一个`WinJS.Promise`对象，该对象代表一个异步操作。你应该把它返回`Promise`给你的调用者，调用者可以使用`then`or`done`方法注册回调函数，当操作完成时（在 Promises 的术语中，当*完成*`Promise`时）。

 *因此，您的 getData 函数调用者将如下所示：

```
function myFunc() {
    getData().then(function(xhr) {
        // ...do something with the data when it arrives...
    }, function(err) {
        // ...do something with the error
    });
} 
```

请注意，回调传递给 XMLHttpRequest 对象。

你的 getData 方法变成了这样：

```
function getData() {
    return WinJS.xhr({ url: "http://stackoverflow.com" })
} 
```*

# algorithm - Udi Manber 和 Gene Myers 方法

> ID：10969175
> 
> 赞同：4
> 
> 时间：2012-06-10T13:41:42.623
> 
> 标签：algorithm, suffix-array

我有一个后缀数组 SA 和一个数组 L 存储两个连续后缀之间的[LCP](http://www.cs.iastate.edu/~cs548/references/linear_lcp.pdf)（最长公共前缀）的长度，即

```
L[i]=LCP(SA[i-1],SA[i]) where 1<=i<=|SA| 
```

[这里](http://pps.topcoder.com/forums/?module=RevisionHistory&messageID=1171511)也有描述。

我应该如何使用这个数组 L 在给定的两个后缀 x 和 y 之间找到 LCP(x,y)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T08:25:46.487

```
rank[0...7]: 4 6 8 1 2 3 5 7 
string:      a a b a a a a b 
------------------------------------------- 
 sa[1] = 3 : a a a a b         height[1] = 0 
 sa[2] = 4 : a a a b           height[2] = 3 
 sa[3] = 5 : a a b             height[3] = 2 
 sa[4] = 0 : a a b a a a a b   height[4] = 3 
 sa[5] = 6 : a b               height[5] = 1 
 sa[6] = 1 : a b a a a a b     height[6] = 2 
 sa[7] = 7 : b                 height[7] = 0 
 sa[8] = 2 : b a a a a b       height[8] = 1 
```

这里数组**高度**等于数组**L**

使用数组**sa**，我们可以轻松计算数组**秩**

然后使用**稀疏表（ST）算法**计算**rmq question**。 [http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Range_Minimum_Query_%28RMQ%29](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Range_Minimum_Query_%28RMQ%29)

```
int *RMQ = height;
//int RMQ[N];
int mm[N];
int best[20][N]; //best[i][j] means the minimal value in the range [j, j + 2^i)
void initRMQ(int n){
  int i,j,a,b;
  for(mm[0]=-1,i=1;i<=n;i++)
  mm[i]=((i&(i-1))==0)?mm[i-1]+1:mm[i-1];
  for(i=1;i<=n;i++) best[0][i]=i;
  for(i=1;i<=mm[n];i++)
  for(j=1;j<=n+1-(1<<i);j++){
    a=best[i-1][j];
    b=best[i-1][j+(1<<(i-1))];
    if(RMQ[a]<RMQ[b]) best[i][j]=a;
    else best[i][j]=b;
  }
}
int askRMQ(int a,int b){
  int t;
  t=mm[b-a+1];b-=(1<<t)-1;
  a=best[t][a];b=best[t][b];
  return RMQ[a]<RMQ[b]?a:b;
}
int lcp(int a,int b){ //this is your answer
  int t;
  a=rank[a];b=rank[b];
  if(a>b) {t=a;a=b;b=t;}
  return(height[askRMQ(a+1,b)]);
} 
```

然后只需调用函数 lcp()。时间和空间是O(nlogn)

# .net - 应用程序部署 [.NET 2.0 + Access 2007 运行时]

> ID：10969178
> 
> 赞同：0
> 
> 时间：2012-06-10T13:42:19.903
> 
> 标签：.net, deployment, windows-installer, setup-deployment

我创建了一个现在需要正确部署的应用程序。

该应用程序是用 C#/.NET 编写的。

该应用程序使用旧数据库（access 2007 运行时）并建立在 .NET 2.0 框架上。

假设系统没有 .NET 2.0 并访问 2007 运行时，我如何使用单个安装程序正确部署应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:03:17.867

我这样做如下：

1.  为您的应用程序创建 MSI 或 EXE 安装程序。您可以使用[WIX](http://wix.sourceforge.net/)。
2.  创建检查是否安装了 .NET Framework 的引导程序。如果不是：安装它并运行主安装包（在第 1 点创建）。您可以使用[DotnetInstaller](http://dotnetinstaller.codeplex.com/)。
3.  您还应该将[Access 2007 Runtime](http://www.microsoft.com/en-us/download/details.aspx?id=4438)添加到将在客户端计算机上不存在 MS Office 时安装的引导程序。

DotnetInstaller 使您能够创建一个文件安装。

# javascript - 显示事件序列的 Javascript

> ID：10969188
> 
> 赞同：1
> 
> 时间：2012-06-10T13:43:54.053
> 
> 标签：javascript, concurrency, dom-events

我有一个 4x4 的网格，我想显示颜色序列，以便一次在一个单元格中显示不同的颜色。

使用循环不起作用：

```
 var table = document.getElementById('myTable');
     for(var i=0; i<sequence.length; i=i+3) {
        setTimeout(function(){ table.rows[sequence[i]].cells[sequence[i+1]].className = sequence[i+2]; }, timeout);
        setTimeout(function(){ table.rows[sequence[i]].cells[sequence[i+1]].className = 'black'; }, timeout+1999);
          timeout = timeout+2000;
     }
  } catch(err) { alert(err); }   
} 
```

按顺序使用语句会：

```
 setTimeout(function(){ table.rows[sequence[0]].cells[sequence[1]].className = 'black'; }, 2999);
  setTimeout(function(){ table.rows[sequence[3]].cells[sequence[4]].className = sequence[5]; }, 3000);
  setTimeout(function(){ table.rows[sequence[3]].cells[sequence[4]].className = 'black'; }, 4999); 
```

(...)

有谁知道为什么循环不起作用？我尝试清除超时但没有喜悦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:45:34.633

这是一个经典的闭包问题：当函数被调用时，i 具有循环结束的值。

我喜欢使用对象来封装变量并避免这些问题。例如 ：

```
var table = document.getElementById('myTable');
function C(i, timeout) {
    this.i=i;
    this.timeout = timeout;
}
C.prototype.doThing = function() {
    setTimeout(function(){ table.rows[sequence[obj.i]].cells[sequence[obj.i+1]].className = sequence[i+2]; }, timeout);
    setTimeout(function(){ table.rows[sequence[obj.i]].cells[sequence[obj.i+1]].className = 'black'; }, timeout+1999);
};

 for(var i=0; i<sequence.length; i=i+3) {
        new C(i, timeout)).doThing();
        timeout = timeout+2000;
     }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T13:47:38.347

使用这样的自调用函数来传递不同的值，`i`否则你将传递相同的值：

```
var table = document.getElementById('myTable');

 for(var i=0; i<sequence.length; i=i+3) {
   (function(i){
    setTimeout(function(){ table.rows[sequence[i]].cells[sequence[i+1]].className = sequence[i+2]; }, timeout);
    setTimeout(function(){ table.rows[sequence[i]].cells[sequence[i+1]].className = 'black'; }, timeout+1999);
      timeout = timeout+2000;
   })(i)

} catch(err) { alert(err); } 
```

# c# - 设置 EnyimMemcached 以使用 Couchbase 服务器

> ID：10969190
> 
> 赞同：1
> 
> 时间：2012-06-10T13:43:57.547
> 
> 标签：c#, asp.net-mvc-4, couchbase, enyim

我正在尝试使[EnyimMemcached](https://github.com/enyim/EnyimMemcached)库与我安装在本地计算机上的[Couchbase 社区服务器一起工作，但完全没有运气。](http://www.couchbase.com/download)

我正在使用`web.config`

```
<sectionGroup name="enyim.com">
      <section name="memcached" type="Enyim.Caching.Configuration.MemcachedClientSection, Enyim.Caching" />
  </sectionGroup> 
```

```
 <enyim.com>
    <memcached protocol="Binary">
      <servers>
        <add address="localhost" port="8091" />
      </servers>
      <socketPool minPoolSize="10" maxPoolSize="100" connectionTimeout="00:00:10" deadTimeout="00:02:00" />
      <authentication type="Enyim.Caching.Memcached.PlainTextAuthenticator, Enyim.Caching" userName="Administrator" password="1234" />
    </memcached>
  </enyim.com> 
```

但我一直没有在本地服务器上获得任何点击

```
var result = _client.Store(StoreMode.Add, key, val); 
```

不断返回`false`。

> 你们中的任何人使用它是否有任何更改，并且可以**向我展示正确设置它的一些信息？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:13:47.157

我的配置：

```
<sectionGroup name="enyim.com">
      <section name="memcached" type="Enyim.Caching.Configuration.MemcachedClientSection, Enyim.Caching" />
</sectionGroup>
 ...
<enyim.com>
  <memcached>
    <servers>
      <add address="127.0.0.1" port="10001" />
    </servers>
    <socketPool minPoolSize="10" maxPoolSize="100" connectionTimeout="00:10:00" deadTimeout="00:02:00" />
  </memcached>
</enyim.com> 
```

System.Web.Caching.Cache 的基本包装器

```
public class MemcachedCache : ICache
{
        private MemcachedClient cache;

        private TimeSpan _timeSpan = new TimeSpan(
            Settings.Default.DefaultCacheDuration_Days,
            Settings.Default.DefaultCacheDuration_Hours,
            Settings.Default.DefaultCacheDuration_Minutes, 0);

        public MemcachedCache()
        {
            cache = new MemcachedClient();
        }
        /// <summary>
        /// Gets a cache object based on the cache_key.
        /// </summary>
        /// <param name="cache_key"></param>
        /// <returns></returns>
        public object Get(string cache_key)
        {
            return cache.Get(cache_key);
        }
        /// <summary>
        /// Override to allow expiration at a specific date/time and a priority level.
        /// </summary>
        /// <param name="cache_key"></param>
        /// <param name="cache_object"></param>
        /// <param name="expiration"></param>
        /// <param name="priority"></param>
        public void Set(string cache_key, object cache_object, DateTime expiration, CacheItemPriority priority)
        {
            cache.Store(StoreMode.Set, cache_key, cache_object, expiration);
        }

        /// <summary>
        /// Override to cache for a specified amount of time and a priority level.
        /// </summary>
        /// <param name="cache_key"></param>
        /// <param name="cache_object"></param>
        /// <param name="expiration"></param>
        /// <param name="priority"></param>
        public void Set(string cache_key, object cache_object, TimeSpan expiration, CacheItemPriority priority)
        {
            cache.Store(StoreMode.Set, cache_key, cache_object, expiration);
        }
} 
```

对于您的配置，还要检查所有端口是否打开（8091、8092）。如果您使用单独的端口配置，还要检查它是否已打开。

# javascript - Facebook页面的Facebook“喜欢”按钮，但带有回调

> ID：10969194
> 
> 赞同：3
> 
> 时间：2012-06-10T13:44:43.163
> 
> 标签：javascript, facebook, facebook-like, facebook-javascript-sdk, facebook-social-plugins

我想将 facebook like 按钮用于 facebook 粉丝页面，但带有回调函数。

到目前为止，我只设法让回调函数与具有以下代码的 facebook 应用程序一起使用-

```
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
    FB.init({
        appId  : 'appID',
        status : true, // check login status
        cookie : true, // enable cookies to allow the server to access the session
        xfbml  : true, // parse XFBML
        channelUrl : 'http://www.my_url.com/channel.html', // channel.html file
        oauth  : true // enable OAuth 2.0
    });
</script>

<script>(function(d, s, id) {
   var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) return;
   js = d.createElement(s); js.id = id;
   js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
   fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
FB.Event.subscribe('edge.create', function(href, widget) {
    callbackFunction();
});
</script> 
```

就像我说的，上面的代码适用于 facebook 应用程序。但我真正想做的是绑定与此类似的代码，但绑定到 Facebook 页面的“喜欢”按钮，如下所示 -

```
<div class="fb-like-box" data-href="https://www.facebook.com/{page-name}" data-width="292" data-height="250"  data-show-faces="true" data-stream="true" data-header="true"></div> 
```

有谁知道实现这一目标的方法？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:40:11.213

`<div class = "fb-like-box"`我已经点击了... html5 女主角的 laik 。变体：

```
FB.Event.subscribe ('edge.create', function (response) {
     alert ('You just liked' + response);
}); 
```

你只能在XFBML版本的like按钮中使用，

但我有一个非常，并最终决定了这个变体

```
<div id="fb-root"></div>

<script>
     window.fbAsyncInit = function() {
 FB.init({appId: 'YOUR_FACEBOOK_APP_ID', status: true, cookie: true, xfbml: true});
 FB.Event.subscribe('edge.create', function(response) {
 alert('You just liked '+response);
 });
};
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ru_RU/all.js#xfbml=1&appId=265929413447804";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

</script>

<div class="fbp-one" style="margin-top: 62px;
                                margin-left: 60px;
                                position: absolute;
                                z-index: 1000;
                                height: 27px;
                                background-color: white;">
            <div class="fb-like" data-send="false" data-layout="button_count" data-width="100" data-height="200" data-show-faces="false"></div>
</div>
<div class="fbp-two" style="position:relative;">
            <div class="fb-like-box" data-href="YOUR_ADRESS" data-width="190" data-show-faces="true" data-stream="false" data-header="true"></div>
</div> 
```

Div 'FBP-one' 在上面的 FBP-2 中的按钮上变得更好，看起来像一个单元和功能在所有浏览器中都可以工作，只需为自己绘制 CSS :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:54:01.873

事实上，对于触发的事件， [Like Box的行为与](https://developers.facebook.com/docs/reference/plugins/like-box/)[Like Button](https://developers.facebook.com/docs/reference/plugins/like/)的行为相同，这意味着您的代码应该按预期工作。这是[fbrell 上的工作示例](http://www.fbrell.com/saved/656b756adc415ff7056cf6a10c7e5b64)。

实际上，您的代码~~存在可能导致意外行为~~的问题，您在页面上包含了**两个**版本的 JS-SDK，一个作为常规`script`标记（带有`en_US`语言环境），一个以异步方式包含（带有`en_GB`语言环境），您应该只使用一！

请注意，如果您选择第二个（异步）版本，您需要定义`window.fbAsyncInit`函数`FB.init`并`FB.subscribe`从那里调用您的和...

# c# - 在解压缩 zip 时执行 exe

> ID：10969196
> 
> 赞同：0
> 
> 时间：2012-06-10T13:45:09.297
> 
> 标签：c#, asp.net, zip, exe, unzip

在我们的项目中，我想压缩一些文件。这些文件包括一个exe和一个文本文件。现在我需要以编程方式压缩文件。

实际上，exe 需要在客户端计算机上运行，​​并且文本文件包含运行此 exe 所需的一些信息。

因此，在下载并解压缩后，需要自动执行 exe。

有没有办法做这些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:48:39.897

创建您自己的项目（Winforms/WPF），您可以在其中使用`DotNetZip`库解压缩文件。该项目中的代码，以便在解压缩 zip 文件时使用`Process`命令运行解压缩的 exe。

允许用户下载此项目的 exe 和 zip 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T16:07:23.480

如果我正确理解您的问题，您可能对[自解压 - SFX感兴趣](http://74.cz/en/make-sfx/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T16:43:29.317

如果我理解正确，您需要一个 ZIP 文件，其内容将在下载 ZIP 后神奇地执行。幸运的是，由于技术和组织原因，这是不可能的。

另一方面，您可以创建特定于平台（即仅限 Windows 或仅限 Linux）的自解压可执行文件，该可执行文件将解压缩其内容并启动预定义文件。这就是 WinZIP 所做的（IIRC Microsoft 将此类档案用于他们的 PowerToys 部署）。

# mysql - 如何在联合选择中的mysql中使用字段选择中的表名

> ID：10969201
> 
> 赞同：1
> 
> 时间：2012-06-10T13:45:59.430
> 
> 标签：mysql

我有一个多语言 cms 表，我需要一个 UNION SELECT 来从所有语言中选择表，无论如何我定义当前行是来自女巫表吗？像这样的东西：

```
SELECT *,lan=en FROM en_table UNION SELECT *,lan=fa FROM fa_table ... 
```

我知道我可以使用这个：

```
SELECT *,(SELECT TABLE_NAME FROM INFORMATION_SCHEMA.PARTITIONS WHERE TABLE_SCHEMA = 'db' AND TABLE_NAME = 'en_table' LIMIT 1) As lan FROM en_table UNION ... 
```

但这是愚蠢的想法，是更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:48:59.840

使用用单引号括起来的字符串文字，其别名如下：

```
SELECT
  *,
  /* string literal 'en' */
  'en' AS lang
FROM en_table
UNOIN ALL
  *,
  /* string literal 'fa' */
  'fa' AS lang
FROM fa_table 
```

需要注意两点：`SELECT *`在`UNION`查询中使用是不明智的。相反，要明确列，因此它们的顺序是确定的。

```
SELECT
  col1,
  col2,
  'en' AS lang
FROM en_table
UNOIN ALL
  col1,
  col2,
  'fa' AS lang
FROM fa_table 
```

然后，如果可能的话，从长远来看，您应该将所有这些表合并为一个，其中包括一个标识语言的列。`UNION`这将使您不必在以后用 s使事情复杂化。

# javascript - 当 Chrome 打开一个新标签时，Chrome 可以自动打开它的 Javascript 调试器吗？

> ID：10969202
> 
> 赞同：7
> 
> 时间：2012-06-10T13:46:06.487
> 
> 标签：javascript, google-chrome

或者 Chrome 在打开源代码中包含“调试器”关键字的页面时可以自动打开调试器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T05:38:55.147

以前有一个命令行标志--always-enable-devtools，现在看起来不像了。但是，您可以使用一个漂亮的技巧，尽管如果您不在 OSX 上，您将不得不摆弄一下以重现我正在做的事情。

我制作了两个 shell 脚本，“developer-chrome”和“debugger-chrome”。

developer-chrome 是我想要一直观察的实例，debugger-chrome 只会放在我的第二个监视器中，这样我就可以看到控制台消息并在需要时戳 developer-chrome。

## 开发者铬

```
#!/bin/bash

export PROFILE=$HOME/develop-chromium-profile
export DISK_CACHEDIR=/tmp/develop-chromium-profile-cache
export DISK_CACHESIZE=0
export MEDIA_CACHESIZE=0
/Applications/Chromium.app/Contents/MacOS/Chromium \
    --remote-debugging-port=4096 \
    --user-data-dir=${PROFILE} \
    --enable-experimental-webgl=yes \
    --window-position=3000,400 \
    --window-size=1200,1000 \
    --no-pings \
    --disk-cache-dir=${DISK_CACHEDIR} \
    --disk-cache-size=${DISK_CACHESIZE} \
    --media-cache-size=${MEDIA_CACHESIZE} \
    --disable-geolocation \
    --ash-immersive \
    --disable-application-cache \
    --pinned-tab-count=1 http://some_url_im_developing_on/ 
```

## 调试器-chrome

```
#!/bin/bash

export PROFILE=$HOME/debugger-chromium-profile
export DISK_CACHEDIR=/tmp/debugger-chromium-profile-cache
export DISK_CACHESIZE=0
export MEDIA_CACHESIZE=0
/Applications/Chromium.app/Contents/MacOS/Chromium \
    --user-data-dir=${PROFILE} \
    --enable-experimental-webgl=yes \
    --window-position=2400,400 \
    --window-size=1200,1000 \
    --no-pings \
    --disk-cache-dir=${DISK_CACHEDIR} \
    --disk-cache-size=${DISK_CACHESIZE} \
    --media-cache-size=${MEDIA_CACHESIZE} \
    --disable-geolocation \
    --ash-immersive \
    --disable-application-cache \
    --pinned-tab-count=1 http://localhost:4096/ 
```

先运行 developer-chrome，然后运行 ​​debugger-chrome。chrome 的两个实例都将是自主的，因此您可以根据需要停止/重新启动它们。如果断开连接，您可能必须从调试器铬手动重新连接到调试器.. 但是。我不知道。

真的让我*很*恼火，没有办法让 devtools 自动出现。再加上 Chrome 的“做了还是没做？” 动态内容的缓存行为几乎让我考虑使用 Firefox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:52:29.343

/当我在 Chrome 中（在 Mac 上）使用以下内容时，`debugger;`它不会自动打开控制台，只有在开发人员工具都准备好激活时才会运行。在 Firefox（安装了 Firebug）中执行相同操作并运行我的页面/脚本时，JavaScript 控制台/调试器会在 `debugger;`语句被命中时打开。

只是我的经验。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T15:14:57.977

是的。

谷歌浏览器可以打开调试器，因为你使用了**debbuger**标志。请参见下面的示例：

```
<script>
  (yourcode here)
  debugger;
  (next code to debug)
</script> 
```

**Developers Tools**的**Sources**面板将在该特定行中自动为您打开。

 **它也适用于**Internet Explorer 11**。

*在版本 43.x 上测试。***

# aptana - 有没有办法让 Aptana studio 选择所选单词的每个实例？

> ID：10969203
> 
> 赞同：1
> 
> 时间：2012-06-10T13:46:20.587
> 
> 标签：aptana

Aptana studio 是否能够做到这一点：如果我在代码中选择了一个词，Aptana 是否可以在代码中的任何位置自动选择这个词？

例如：如果我选择“mercedes”，Aptana 会自动选择此代码中的每个“mercedes”实例。

# jsf - 如何在 h:dataTable 中使用 h:selectOneRadio 来选择单行？

> ID：10969204
> 
> 赞同：5
> 
> 时间：2012-06-10T13:46:27.487
> 
> 标签：jsf, jsf-2, datatable, selectoneradio

我在表格中显示了页面列表。每个页面都有属性 homePage ，我希望在数据表中有一列单选按钮绑定在这个属性上，并且用户只能检查一个值。如何在服务器端获取此值？

我看到了一些如下示例：http: [//jforum.icesoft.org/JForum/posts/list/14157.page](http://jforum.icesoft.org/JForum/posts/list/14157.page)，但我想知道在这种情况下最佳做法是什么。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-10T13:56:20.883

根据[JSF 规范问题 329](https://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-329)，我终于为 JSF 2.3 实现了它。使用新`group`属性，您现在可以在转发器组件中对单选按钮进行分组。

```
<h:dataTable value="#{bean.items}" var="item">
    <h:column>
        <h:selectOneRadio group="foo" value="#{bean.selectedItem}">
            <f:selectItem itemValue="#{item}" />
        </h:selectOneRadio>
    </h:column>
</h:dataTable> 
```

它将按照 Mojarra 2.3.0-m07 提供。

* * *

在 JSF 2.3 之前，这对于标准 JSF 来说并非易事`<h:selectOneRadio>`。基本上，每一行中的单选按钮都需要使用相同的输入相互分组，`name`以便在您选择一个单选按钮时取消选中其他单选按钮。但是它们没有被分组，它们都有自己的`name`，所以其他单选按钮永远不会被取消选中。

PrimeFaces 等组件库通过提供特殊的属性或列组件解决了这个问题。另请参阅[此展示示例](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)，该示例使用 a`<p:column selectionMode="single">`生成单个选择列。所选值由 的`selection`属性引用`<p:dataTable>`。如果您已经在使用组件库并且它已经为您提供了这样的组件，那么您应该使用它。

在标准 JSF`<h:dataTable>`中，`<h:selectOneRadio>`您需要引入一个 JavaScript 解决方法，如下所示，取消选中同一列中的所有其他单选按钮：

```
<h:dataTable value="#{bean.items}" var="item">
    <h:column>
        <h:selectOneRadio valueChangeListener="#{bean.setSelectedItem}"
            onclick="dataTableSelectOneRadio(this);">
            <f:selectItem itemValue="null" />
        </h:selectOneRadio>
    </h:column>
    ...
</h:dataTable> 
```

和

```
public void setSelectedItem(ValueChangeEvent event) {
    FacesContext context = FacesContext.getCurrentInstance();
    selectedItem = context.getApplication().evaluateExpressionGet(context, "#{item}", Item.class);
} 
```

和

```
function dataTableSelectOneRadio(radio) {
    var radioId = radio.name.substring(radio.name.lastIndexOf(':'));

    for (var i = 0; i < radio.form.elements.length; i++) {
        var element = radio.form.elements[i];

        if (element.name.substring(element.name.lastIndexOf(':')) == radioId) {
            element.checked = false;
        }
    }

    radio.checked = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:20:32.193

我找到了另一个解决方案，我想与你分享，是使用`h:selectBooleanCheckbox`，以及 BalusC 建议的单选 JS 函数：

```
 <ace:column id="homePage" headerText="Home Page">
                <h:selectBooleanCheckbox value="#{adpage.homePage}" onclick="dataTableSelectOneRadio(this);"></h:selectBooleanCheckbox>
            </ace:column> 
```

和JS：

```
function dataTableSelectOneRadio(radio) {
var radioId = radio.name.substring(radio.name.lastIndexOf(':'));

for (var i = 0; i < radio.form.elements.length; i++) {
    var element = radio.form.elements[i];

    if (element.name.substring(element.name.lastIndexOf(':')) == radioId) {
        element.checked = false;
               }
         }

      radio.checked = true;
    } 
```

这将只选中一个复选框并更新选中/未选中对象中的布尔属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T14:41:00.913

selectedRadioButton 变量应该在函数之外声明。

```
var selectedRadioButton;

function uncheckRadioButtons(radioButton) {
   if (selectedRadioButton != null) {
      selectedRadioButton.checked = false;
   }

   selectedRadioButton = radioButton;
   selectedRadioButton.checked = true;
} 
```

并在 xhtml

```
 <h:selectOneRadio 
        onclick="uncheckRadioButtons(this);">
        <f:selectItem itemValue="null" />
    </h:selectOneRadio> 
```

# php - 根据 IF 语句的结果，在 While 循环中求和变量

> ID：10969205
> 
> 赞同：0
> 
> 时间：2012-06-10T13:46:57.750
> 
> 标签：php, variables, if-statement, while-loop, sum

还有一个问题...

我有以下while循环工作：

```
 $activityreport = "SELECT $fieldname FROM $table WHERE QuoteID=$quoteid";

    $activity = mysql_query($activityreport) or die(mysql_error());

    while($data = mysql_fetch_array($activity)){

    $amount = $data[$fieldname];

    if($amount>0 && $table != 'OptionFees'){ 
        $amountc = abs($amount);
        }
        elseif($amount>0 && $table == 'OptionFees'){
        $amountd = abs($amount);
        }
        elseif($amount<0 && $table == 'OptionFees'){
            $amountc = abs($amount);
        }
        else{
            $amountd = abs($amount);
        }

    $totald = $totald + $amountd;
    $totalc = $totalc + $amountc;

    echo "<tr><td class='description'>$table</td>
            <td class='debit'>".money_format('%(#10n', $amountd)."</td>
            <td class='credit'>".money_format('%(#10n', $amountc)."</td></tr>";

    } 
```

我的问题是 $totald 和 $totalc 最终只得到最后一次通过 while 循环的结果，而不是所需的所有行程的总数。

**如果不是因为 IF 语句分解 $data[$fieldname]，我可以只使用 $total += $data[$fieldname]**，但分解很重要。如您所见，我正在使用它来创建一个表格，该表格将显示 GL 帐户以及它们各自的借方和贷方的日记帐分录。每个帐户的行完美显示，但总数仅显示最后一行的重复。

任何帮助将非常非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:49:08.767

在开始循环之前初始化这些变量：

```
$activityreport = "SELECT $fieldname FROM $table WHERE QuoteID=$quoteid";

$activity = mysql_query($activityreport) or die(mysql_error());

$totald = 0;
$totalc = 0;

while($data = mysql_fetch_array($activity)){

$amount = $data[$fieldname];
$amountc = 0;
$amountd = 0;

if($amount>0 && $table != 'OptionFees'){ 
    $amountc = abs($amount);
    }
    elseif($amount>0 && $table == 'OptionFees'){
    $amountd = abs($amount);
    }
    elseif($amount<0 && $table == 'OptionFees'){
        $amountc = abs($amount);
    }
    else{
        $amountd = abs($amount);
    }

$totald = $totald + $amountd;
$totalc = $totalc + $amountc;

echo "<tr><td class='description'>$table</td>
        <td class='debit'>".money_format('%(#10n', $amountd)."</td>
        <td class='credit'>".money_format('%(#10n', $amountc)."</td></tr>";

} 
```

# mongodb - MongoDB映射减少查询

> ID：10969206
> 
> 赞同：6
> 
> 时间：2012-06-10T13:46:58.313
> 
> 标签：mongodb, mapreduce

我有一个相当大的 MongoDB，我需要从中提取统计信息，我这样做是为了运行 Map Reduce 查询。

现在的问题是我需要缩小查询范围以使用例如 status: 'drafted" 而不是使用整个集合。

这是我的 Map/Reduce 代码（我正在使用 Codeigniter）：我尝试执行此查询的最后一步，但我无法获得结果，所以我认为我添加了错误的语法： http: [//cookbook.mongodb.org/patterns/ unique_items_map_reduce/](http://cookbook.mongodb.org/patterns/unique_items_map_reduce/)。

```
$map = new MongoCode ("function() {

                day = Date.UTC(this.created_at.getFullYear(), this.created_at.getMonth(), this.created_at.getDate());

                emit ({day: day, _id: this._id}, {created_at: this.created_at, count: 1});

            }");

            $reduce = new MongoCode ("function( key , values ) {

                var count = 0;

                values.forEach (function(v) {

                    count += v['count'];

                });

                return {count: count};

            }");

            $outer = $this->cimongo->command (array (

                "mapreduce" => "documents",   

                "map"       => $map,   

                "reduce"    => $reduce,  

                "out"       => "stats_results"

            ));

            $map = new MongoCode ("function() {

                emit(this['_id']['day'], {count: 1});

            }");

            $reduce = new MongoCode ("function( key , values ) {

                var count = 0;

                values.forEach (function(v) {

                    count += v['count'];

                });

                return {count: count};

            }");

            $outer = $this->cimongo->command (array (

                "mapreduce" => "stats_results",   

                "map"       => $map,   

                "reduce"    => $reduce,   

                "out"       => "stats_results_unique"

            )); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T18:42:49.877

关于你的问题的两件事：

1）食谱中的示例对于您要执行的操作可能有点过于复杂。这是一个更简单的：

给定一个看起来像这样的文档结构：

```
{
    "url" : "http://example.com/page8580.html",
    "user_id" : "Jonathan.Clark",
    "date" : ISODate("2012-06-11T10:59:36.271Z")
} 
```

下面是一些用于运行 map/reduce 作业的示例 JavaScript 代码，该作业将计算每个不同 URL 的访问次数。

```
// Map function:

map = function() {
  emit({ url: this.url }, {count: 1});
}

// Reduce function:

reduce = function(key, values) {
    var count = 0;

    values.forEach(
    function(val) { count += val['count']; }
    );

    return {count: count};
};

// Run the Map/Reduce function across the 'pageviews' collection:
// Note that MongoDB will store the results in the 'pages_per_day'
//   collection because the 'out' parameter is present

 db.pageviews.mapReduce( 
    map,        // pass in the 'map' function as an argument
    reduce,     // pass in the 'reduce' function as an argument
    // options
    { out: 'pages_per_day',     // output collection
      verbose: true }       // report extra statistics
); 
```

2) 如果您只想在“pageviews”集合的一个子集上运行 Map/Reduce 函数，您可以指定对“mapReduce()”调用的查询，以限制“map( )'函数将在：

```
// Run the Map/Reduce function across the 'pageviews' collection, but 
// only report on the pages seen by "Jonathan.Clark"

 db.pageviews.mapReduce( 
    map,        // Use the same map & reduce functions as before
    reduce,     
    { out: 'pages_per_day_1user',       // output to different collection
      query:{ 'user_id': "Jonathan.Clark" }     // query descriptor
      verbose: true }       
); 
```

请注意，如果您不使用 JavaScript，则必须将这些调用翻译成您正在使用的任何编程语言。

3) 下面是一个使用 PHP 调用带有查询条件的 Map/Reduce 函数的示例：

```
$outer = $this->cimongo->command (array (
                "mapreduce" => "pageviews",   
                "map"       => $map,   
                "reduce"    => $reduce,   
                "out"       => "pages_per_day_1user",
                "query"     => array( "user_id" => "Jonathan.Clark" )
            )); 
```

4）有关Map/Reduce的更多信息，请参阅以下参考资料：

*   Map/Reduce 手册页：[http ://www.mongodb.org/display/DOCS/MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)
*   调试 Map/Reduce：[http ://www.mongodb.org/display/DOCS/Troubleshooting+MapReduce](http://www.mongodb.org/display/DOCS/Troubleshooting+MapReduce)
*   在 PHP 中使用 Map/Reduce：http: [//us.php.net/manual/en/mongodb.command.php](http://us.php.net/manual/en/mongodb.command.php)

    - 威廉

# python - Python：将文件中的行转换为列

> ID：10969209
> 
> 赞同：1
> 
> 时间：2012-06-10T13:47:19.187
> 
> 标签：python, text, rows

我是一个 python 初学者，试图制作一个脚本，使用制表符分隔的文本文件作为输入将指定的行转换为列。以下是文件中的行示例：

```
1   chr1    1008376 1258657 250281  4628    666 2832    565 16.6323226376   83.3676773624
1   chr1    1258657 1516806 258149  2544    601 1481    231 13.4929906542   86.5070093458
1   chr1    1516806 1766886 250080  1652    590 936 63  6.30630630631   93.6936936937
1   chr1    1766886 2017159 250273  5030    1608    2698    362 11.8300653595   88.1699346405 
```

本质上，该文件遍历个体（第 0 列）染色体（第 1 列）中的区域列表（第 2-3 列），并给出为该区域（第 9 列）计算的统计数据。该文件首先列出了个体 1 的所有区域，然后是 2，直到最后一个个体。档案中有20个人。我想要一个不包含第 0 列或第 4-8 列的新文件，并且具有新列，这些新列是每个人在该行（现在是第 1-2 列）中的区域得分。因此，对于个人 1，第 3 列现在将是以前的第 9 列，第 4 列将是个人 2 中该区域的得分，依此类推。因此，每一行都有第 2 列（chr1）作为第 0 列，区域得分之后的 20 列（第 1-2 列）是 20 个人中每个人的得分。目前分数是成行的，所以文件有很多行。第 1-3 列中的每个个体值都是相同的，因此不存在区域不重叠的问题。此外，所有个人都具有相同的行数。换句话说，第 2+3 列在文件中重复了 20 次。

如果这太复杂/密集，下面的解释是一个简化的例子来说明问题。

这是我想要的一个简单的虚拟示例：

原始文件：

```
1 chr1 10 20 30423
1 chr1 20 30 40556
2 chr1 10 20 73476
2 chr1 20 30 43657
3 chr1 10 20 34656.5
3 chr1 20 30 90848 
```

变成：

```
chr1 10 20 30423 73476 34656.5
chr1 20 30 40556 43657 90848 
```

因此，如果任何 python 用户有一些关于将行转换为列的技巧，即使你没有时间专门解决这个问题，我也会发现行到列转换是一个特别棘手的问题，尤其是当它以列中的值为条件（此处为第 0 列）。

如果我能澄清问题，请告诉我。任何帮助或意见表示赞赏。

所以更新：感谢您的所有评论，这是我到目前为止的想法：

```
ListofData = [] # make list
individual=1 # only interested in first individual to get list of windows for the chromosome
for line in file('/mnt/genotyping/Alex/wholegenome/LROH/LROHSplitbyChrom/Filtered_by_MappingQuality20/SimpleHomozygosityScore/HomozygosityStatisticsTameratsalllanesMinMQ20chr20'): 
    line = line.rstrip() 
    fields = line.split("\t")
    if "chr" in line: #avoids header 
        if int(fields[0]) == individual:
            ListofData.extend(fields[2:5]) # add start, end and size of window to list

        else: # once iterated through windows, split the list into sets of three, making it one list per line
            lol = [ListofData[i:i+3] for i in range(0, len(ListofData), 3)] #list of lists divided into 3's

smallcounter = 0
for i in lol: #for set of 3 in list
    for line in file('/mnt/genotyping/Alex/wholegenome/LROH/LROHSplitbyChrom/Filtered_by_MappingQuality20/SimpleHomozygosityScore/HomozygosityStatisticsTameratsalllanesMinMQ20chr20'):
        if "chr" in line: # avoids header 
            line = line.rstrip() 
            fields = line.split("\t")
            if str(fields[2]) == lol.pop(0): #if start position in line matches start position in i
                i.extend(fields[9]) #add homozygosity score to list
                counter = counter + 1
            if smallcounter == 20: #if gone through all individuals in file
                smallcounter = 0 #reset counter for next try
                print i 
```

我浏览了文件以在第 2-4 列中获取我想要的信息并将其放入列表中。然后我把这个列表分成每行对应的 3 组。然后在第二个循环中，我试图说对于列表中的每组 3 个（因此对于列表中的每个列表）遍历文件，并且如果列表中的第一个位置与文件中的起始位置相同（ fields[2]) 然后将 fields[9] 中的分数添加到该列表中。然后我需要做的就是一个接一个地打印列表以获得我想要的。但是我对这条线有困难：

```
if str(fields[2]) == lol.pop(0): 
```

我希望 python 查看列表中的第一个位置，最初是 fields[2] 并询问它是否与它循环通过的行中的 fields[2] 位置相同。如果是，那么它应该将字段 [9] 附加到列表中。

如果我需要更好地解释，请告诉我。

非常感谢您，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:07:34.570

开始使用一门新语言是很困难的，你必须从某个地方开始。幸运的是，您选择了 Python，并且拥有 Python 命令行。使用它，您可以测试如何创建列，等等。

首先，您需要读入输入文件，并处理每一行中的信息。Python [CSV 模块](http://docs.python.org/library/csv.html)非常棒。我在水务项目中到处使用它，随后在许多其他需要 .csv 处理的项目中使用它。

但是你有一个制表符分隔的文件。我从未尝试将分隔符设置为制表符并验证它与制表符分隔的文件一起使用。如果尝试这样做不起作用 - 您可以在 Python 命令行中对其进行测试 - 作为一种解决方法，您可以将制表符分隔的文件通过管道传输到 sed 并将制表符转换为逗号。

至于列、行表示，在 Python 中，您必须有一个列表列表。那就是你需要有 [[1,2][3,4]...]。

Python 中的列表是可变的，因此您可以附加到它们。您会将列表列表初始化为空列表

```
lol = [] 
```

然后，您需要根据您想要跨越的列数向大声笑添加一个列表。假设您将仅包含数字的两列行放在一起，作为练习，您可以这样做：

```
lol.append([1,2])
lol.append([3,4])
lol.append([5,6])

>>> lol
[[1, 2], [3, 4], [5, 6]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:49:06.750

这里有一些代码可以让您了解可以做什么。我将省略花里胡哨的东西（例如，前三个`if's`可以在循环中更优雅地完成；等等），只提供基本代码。我正在读取文件“chr.txt”并写入`stdout`：

```
def readTabbedFile(filename):
    out = {}
    file = open(filename, 'r')
    for line in file.readlines():
        line = line.rstrip('\n\r')
        parsedLine = line.split('\t')
        if not parsedLine[1] in out:
            out[parsedLine[1]] = {}
        if not parsedLine[2] in out[parsedLine[1]]:
            out[parsedLine[1]][parsedLine[2]] = {}
        if not parsedLine[3] in out[parsedLine[1]][parsedLine[2]]:
            out[parsedLine[1]][parsedLine[2]][parsedLine[3]] = []

        out[parsedLine[1]][parsedLine[2]][parsedLine[3]].append(parsedLine[9])

    for key0 in out.keys():
        for key1 in out[key0].keys():
            for key2 in out[key0][key1].keys():
                outStr = key0 + "\t" + key1 + "\t" + key2 + "\t"
            for val in out[key0][key1][key2]:
                outStr += "\t" + val
                print(outStr)

    file.close()

if __name__ == '__main__':
    readTabbedFile("chr.txt") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-09T12:23:38.003

您可以将您的问题与列表理解相关联，以将行转换为矩阵中的列。

![在此处输入图像描述](../Images/a44c82dceb0bc062b13e4ebb6155ab50.png)

# javascript - 尽管页面存在，但 Jquery AJAX 未加载页面

> ID：10969211
> 
> 赞同：0
> 
> 时间：2012-06-10T13:47:37.330
> 
> 标签：javascript, jquery, ajax

我对整个 AJAX 事物比较陌生，我目前正在编辑一个脚本，该脚本将打开一个模式框，然后将请求的内容加载到所述框中。我有以下 Javascript

```
jQuery(document).ready(function($){

$('a[name=modal]').click(function(e) {

    e.preventDefault();

    var maskHeight = $(document).height();
    var maskWidth = $(window).width();

    //Set height and width to mask to fill up the whole screen
    $('#mask').css({'width':maskWidth,'height':maskHeight});  
    $('#mask').fadeTo(600,0.75); 

    var load_page = $(this).attr('ajax');

    //Get the window height and width
    var winH = $(window).height();
    var winW = $(window).width();

    // Set the loading HTML to be displayed
    var loadingHTML = '<center><img src="_img/progress_bar.gif"/></center>';

        //Set the loading bar
        $('#placeholder').html(loadingHTML).fadeTo(600,1);
        $('#placeholder').css('top',  winH/2-$('#placeholder').height()/2);
        $('#placeholder').css('left', winW/2-$('#placeholder').width()/2);

    // Ajax load
    $('#ajax').load('_content/' + load_page + '.php', null, function(){  
        $('#ajax').css('top',  winH/2-$('#ajax').height()/2);
        $('#ajax').css('left', winW/2-$('#ajax').width()/2);
        $('#ajax').fadeTo(600,1);
    });   

});

$('.window .close').click(function (e) {
    e.preventDefault();
    $('#mask, #box, #ajax').hide();
});    

//if mask is clicked
$('#mask').click(function () {
    $(this).hide();
    $('#ajax, #placeholder').hide();
}); 
```

});

还有下面的 HTML，

```
<div id="mask"></div>
<div id="placeholder"></div>
<div id="ajax"></div> 
```

我的 CSS 也是，

```
 #mask 
{
  position: absolute;
  left: 0;
  top: 0;
  opacity: 0;
  z-index: 9000;
  background: url("../_img/mask.png") repeat;
  display: none;
  overflow: hidden;
}
#placeholder
{
    overflow: hidden;
    opacity: 0;
    position: absolute;
    z-index: 9050;
    overflow: hidden;
}
#ajax
{
    position: absolute;
    z-index: 9100;
    overflow: hidden;
    opacity: 0;
    display: none;
} 
```

该脚本显示加载栏，但不显示带有 AJAX 内容的模态框，该页面确实存在于我的 Localhost 上。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:28:47.107

我认为这是因为该站点找不到 _content 文件夹，因为它可能与 javascript 文件不在同一目录中。尝试 ../_content 如果这不起作用，只需尝试使用整个 url：[http](http://example.com/a/b/_content/) ://example.com/a/b/_content/ ...

# objective-c - UIButton 没有响应 'touchUpInside' 但会响应 'touchDown' 很好

> ID：10969213
> 
> 赞同：3
> 
> 时间：2012-06-10T13:47:43.913
> 
> 标签：objective-c, ios, uibutton, human-interface, uicontrolevents

在我的程序中，我有一个 UIButton 以编程方式声明为`UIVIewController`. 我已将其设置为在用户触发`touchUpInside`事件时发送操作，如下所示：

`[restartButton addTarget:self action:@selector(handleRestart) forControlEvents:UIControlEventTouchUpInside];``restartButton`的名字在 哪里`UIButton`。

当我输入`UIControlEventTouchDown`参数`forControlEvents`时，它工作正常。但是，`UIControlEventTouchUpInside`根本行不通。有人知道这是为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T02:15:35.910

查看这个问题和答案：[https](https://stackoverflow.com/a/11667958/607730) ://stackoverflow.com/a/11667958/607730 。父视图上有一个 UITapGestureReconizer ，它拦截了 TouchUpInside 事件，但允许触摸甚至通过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T13:54:18.683

您可能需要检查`restartButton.bounds`. 您可以简单地将其设置为零，从而导致`UIControlEventTouchUpInside`永远不会发生。检查它的最佳方法是向图层添加边框。

```
[restartButton.layer setBorderWidth:1.0f];
[restartButton.layer setBorderColor:[UIColor redColor].CGColor]; 
```

不要忘记`#import <QuartzCore/QuartzCore.h>`上面的工作

# android - Android PreferenceManager NullPointException

> ID：10969223
> 
> 赞同：0
> 
> 时间：2012-06-10T13:49:33.220
> 
> 标签：android, nullpointerexception, sharedpreferences, socketexception

我很难理解为什么在使用 PreferenceManager 时会出现空点异常。

我正在使用当前活动中的按钮来调用另一个名为`Location`

```
 /** Location selection */
    bLocation = (Button) findViewById(R.id.bLocation);
    bLocation.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            loc = new Location();
            loc.locationSelection();
        }
    }); 
```

// 上面的按钮调用下面的类

```
public class Location extends Activity {

    NetworkConnection nc;
    SharedPreferences prefs;
    SharedPreferences sharedPrefs;
    NetworkConnection netConnect;
    Options opts;

    public void locationSelection(){

        try{
            sharedPrefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
            if (sharedPrefs.contains("LOCATION")){
                Log.d("if", "if");
            }else{
                Log.d("if", "else");

            }

        }catch(Exception e){
            Log.d("EXCEPTION", "Location Selection " + e);
        }
    }
} 
```

**编辑：**

//整个Options类哪个类Location类。

```
public class Options extends Activity {

    /** Include classes */
    SharedPreferences sharedPrefs;
    Preferences prefs;
    Location loc;
    LocationSQL locSQL;
    NetworkConnection netConnect;

    /** Declare buttons */
    Button bLocation;
    Button bRefresh;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.options);

        sharedPrefs = PreferenceManager.getDefaultSharedPreferences(Options.this);

        /** Set the location for the user */
        setLocationPref();

        /** Refresh selection */
        bRefresh = (Button) findViewById(R.id.bRefresh);
        bRefresh.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

            }
        });

        /** Location selection */
        bLocation = (Button) findViewById(R.id.bLocation);
        bLocation.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                loc = new Location();
                loc.locationSelection();
            }
        });
    } 
```

//整个日志猫

```
06-10 13:56:03.015: D/AndroidRuntime(27310): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
06-10 13:56:03.015: D/AndroidRuntime(27310): CheckJNI is ON
06-10 13:56:03.135: D/AndroidRuntime(27310): --- registering native functions ---
06-10 13:56:03.685: D/dalvikvm(249): GC_EXPLICIT freed 88 objects / 4296 bytes in 43ms
06-10 13:56:03.726: D/PackageParser(59): Scanning package: /data/app/vmdl72287.tmp
06-10 13:56:03.845: I/PackageManager(59): Removing non-system package:com.swiftdrink
06-10 13:56:03.845: I/ActivityManager(59): Force stopping package com.swiftdrink uid=10036
06-10 13:56:03.855: I/Process(59): Sending signal. PID: 26952 SIG: 9
06-10 13:56:03.865: I/UsageStats(59): Unexpected resume of com.android.launcher while already resumed in com.swiftdrink
06-10 13:56:03.875: I/WindowManager(59): WIN DEATH: Window{44f77270 com.swiftdrink/com.swiftdrink.SwiftDrinkMain paused=false}
06-10 13:56:03.905: W/InputManagerService(59): Got RemoteException sending setActive(false) notification to pid 26952 uid 10036
06-10 13:56:04.016: W/IInputConnectionWrapper(114): showStatusIcon on inactive InputConnection
06-10 13:56:04.205: D/PackageManager(59): Scanning package com.swiftdrink
06-10 13:56:04.205: I/PackageManager(59): Package com.swiftdrink codePath changed from /data/app/com.swiftdrink-1.apk to /data/app/com.swiftdrink-2.apk; Retaining data and using new
06-10 13:56:04.215: I/PackageManager(59): /data/app/com.swiftdrink-2.apk changed; unpacking
06-10 13:56:04.225: D/installd(34): DexInv: --- BEGIN '/data/app/com.swiftdrink-2.apk' ---
06-10 13:56:04.435: D/dalvikvm(27317): DexOpt: load 36ms, verify 99ms, opt 2ms
06-10 13:56:04.445: D/installd(34): DexInv: --- END '/data/app/com.swiftdrink-2.apk' (success) ---
06-10 13:56:04.445: W/PackageManager(59): Code path for pkg : com.swiftdrink changing from /data/app/com.swiftdrink-1.apk to /data/app/com.swiftdrink-2.apk
06-10 13:56:04.445: W/PackageManager(59): Resource path for pkg : com.swiftdrink changing from /data/app/com.swiftdrink-1.apk to /data/app/com.swiftdrink-2.apk
06-10 13:56:04.455: D/PackageManager(59):   Activities: com.swiftdrink.SplashScreen com.swiftdrink.SwiftDrinkMain com.swiftdrink.Deals com.swiftdrink.Events com.swiftdrink.Featured com.swiftdrink.Options com.swiftdrink.SortBy com.swiftdrink.NetworkConnection com.swiftdrink.Constents com.swiftdrink.getSetLocation com.swiftdrink.Location com.swiftdrink.DBAdapter com.swiftdrink.JSON com.swiftdrink.Preferences
06-10 13:56:04.465: I/ActivityManager(59): Force stopping package com.swiftdrink uid=10036
06-10 13:56:04.565: I/installd(34): move /data/dalvik-cache/data@app@com.swiftdrink-2.apk@classes.dex -> /data/dalvik-cache/data@app@com.swiftdrink-2.apk@classes.dex
06-10 13:56:04.565: D/PackageManager(59): New package installed in /data/app/com.swiftdrink-2.apk
06-10 13:56:04.685: I/ActivityManager(59): Force stopping package com.swiftdrink uid=10036
06-10 13:56:04.835: D/dalvikvm(114): GC_EXPLICIT freed 1024 objects / 58032 bytes in 140ms
06-10 13:56:04.845: D/dalvikvm(59): GC_EXPLICIT freed 12088 objects / 692712 bytes in 141ms
06-10 13:56:05.015: W/RecognitionManagerService(59): no available voice recognition services found
06-10 13:56:05.235: D/dalvikvm(59): GC_EXPLICIT freed 4804 objects / 260184 bytes in 94ms
06-10 13:56:05.255: D/dalvikvm(148): GC_EXPLICIT freed 2567 objects / 129888 bytes in 540ms
06-10 13:56:05.265: I/installd(34): unlink /data/dalvik-cache/data@app@com.swiftdrink-1.apk@classes.dex
06-10 13:56:05.276: D/AndroidRuntime(27310): Shutting down VM
06-10 13:56:05.285: D/dalvikvm(27310): Debugger has detached; object registry had 1 entries
06-10 13:56:05.305: I/dalvikvm(27310): JNI: AttachCurrentThread (from ???.???)
06-10 13:56:05.305: I/AndroidRuntime(27310): NOTE: attach of thread 'Binder Thread #3' failed
06-10 13:56:05.786: D/AndroidRuntime(27322): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
06-10 13:56:05.786: D/AndroidRuntime(27322): CheckJNI is ON
06-10 13:56:05.895: D/AndroidRuntime(27322): --- registering native functions ---
06-10 13:56:06.466: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.swiftdrink/.SplashScreen }
06-10 13:56:06.505: I/ActivityManager(59): Start proc com.swiftdrink for activity com.swiftdrink/.SplashScreen: pid=27328 uid=10036 gids={3003, 1015}
06-10 13:56:06.535: D/AndroidRuntime(27322): Shutting down VM
06-10 13:56:06.535: D/dalvikvm(27322): Debugger has detached; object registry had 1 entries
06-10 13:56:06.575: I/AndroidRuntime(27322): NOTE: attach of thread 'Binder Thread #3' failed
06-10 13:56:07.445: D/dalvikvm(27328): GC_EXTERNAL_ALLOC freed 858 objects / 59096 bytes in 175ms
06-10 13:56:07.815: I/ActivityManager(59): Displayed activity com.swiftdrink/.SplashScreen: 1333 ms (total 1333 ms)
06-10 13:56:08.155: I/ActivityManager(59): Starting activity: Intent { act=com.swiftdrink.SWIFTDRINKMAIN cmp=com.swiftdrink/.SwiftDrinkMain }
06-10 13:56:08.275: V/one(27328): locationSelection
06-10 13:56:08.585: I/ActivityManager(59): Displayed activity com.swiftdrink/.SwiftDrinkMain: 428 ms (total 428 ms)
06-10 13:56:11.646: D/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol
06-10 13:56:16.886: D/dalvikvm(114): GC_EXPLICIT freed 970 objects / 55696 bytes in 124ms
06-10 13:56:20.166: D/EXCEPTION(27328): Location Selection java.lang.NullPointerException
06-10 13:56:21.906: D/dalvikvm(260): GC_EXPLICIT freed 66 objects / 3040 bytes in 128ms 
```

**编辑2：** //网络连接类

```
public class NetworkConnection extends Activity {
    /** Called when the activity is first created. */

    public boolean isNetworkConnAvail(Context context) {

        ConnectivityManager connMgr = (ConnectivityManager) 
            context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
        if (networkInfo != null)
            return networkInfo.isConnected();

        return false;
    }
} 
```

//打印语句

```
06-10 14:10:40.015: D/AndroidRuntime(27731): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
06-10 14:10:40.015: D/AndroidRuntime(27731): CheckJNI is ON
06-10 14:10:40.145: D/AndroidRuntime(27731): --- registering native functions ---
06-10 14:10:40.535: D/dalvikvm(27670): GC_EXPLICIT freed 1408 objects / 74352 bytes in 898ms
06-10 14:10:40.645: D/AndroidRuntime(27731): Shutting down VM
06-10 14:10:40.645: D/dalvikvm(27731): Debugger has detached; object registry had 1 entries
06-10 14:10:40.665: I/AndroidRuntime(27731): NOTE: attach of thread 'Binder Thread #3' failed
06-10 14:10:41.045: D/AndroidRuntime(27739): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
06-10 14:10:41.045: D/AndroidRuntime(27739): CheckJNI is ON
06-10 14:10:41.166: D/AndroidRuntime(27739): --- registering native functions ---
06-10 14:10:41.655: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.swiftdrink/.SplashScreen }
06-10 14:10:41.695: D/AndroidRuntime(27739): Shutting down VM
06-10 14:10:41.695: D/dalvikvm(27739): Debugger has detached; object registry had 1 entries
06-10 14:10:41.775: I/dalvikvm(27739): JNI: AttachCurrentThread (from ???.???)
06-10 14:10:41.775: I/AndroidRuntime(27739): NOTE: attach of thread 'Binder Thread #3' failed
06-10 14:10:42.465: I/ActivityManager(59): Displayed activity com.swiftdrink/.SplashScreen: 799 ms (total 799 ms)
06-10 14:10:42.845: I/ActivityManager(59): Starting activity: Intent { act=com.swiftdrink.SWIFTDRINKMAIN cmp=com.swiftdrink/.SwiftDrinkMain }
06-10 14:10:42.895: V/one(27670): locationSelection
06-10 14:10:43.186: I/ActivityManager(59): Displayed activity com.swiftdrink/.SwiftDrinkMain: 337 ms (total 337 ms)
06-10 14:10:45.185: D/EXCEPTION(27670): Location Selection java.lang.NullPointerException
06-10 14:10:45.185: W/System.err(27670): java.lang.NullPointerException
06-10 14:10:45.205: W/System.err(27670):    at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
06-10 14:10:45.205: W/System.err(27670):    at com.swiftdrink.Location.locationSelection(Location.java:39)
06-10 14:10:45.205: W/System.err(27670):    at com.swiftdrink.Options$2.onClick(Options.java:73)
06-10 14:10:45.205: W/System.err(27670):    at android.view.View.performClick(View.java:2408)
06-10 14:10:45.205: W/System.err(27670):    at android.view.View$PerformClick.run(View.java:8816)
06-10 14:10:45.205: W/System.err(27670):    at android.os.Handler.handleCallback(Handler.java:587)
06-10 14:10:45.216: W/System.err(27670):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-10 14:10:45.216: W/System.err(27670):    at android.os.Looper.loop(Looper.java:123)
06-10 14:10:45.216: W/System.err(27670):    at android.app.ActivityThread.main(ActivityThread.java:4627)
06-10 14:10:45.216: W/System.err(27670):    at java.lang.reflect.Method.invokeNative(Native Method)
06-10 14:10:45.216: W/System.err(27670):    at java.lang.reflect.Method.invoke(Method.java:521)
06-10 14:10:45.216: W/System.err(27670):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-10 14:10:45.216: W/System.err(27670):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-10 14:10:45.226: W/System.err(27670):    at dalvik.system.NativeStart.main(Native Method)
06-10 14:10:48.366: D/dalvikvm(114): GC_EXPLICIT freed 239 objects / 11320 bytes in 128ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:22:14.430

您可以使用 loc = new Location(); 创建 Location 类的实例。现在 Location 是一个扩展 Activity 的类，并且由于您不像正常的 Activity 那样启动它（例如，通过 Intents），所以永远不会调用 onCreate()。因此，您的 getApplicationContext() 将返回 null，因为您的 Activity 没有按预期实例化。

要解决此问题，您可以像这样向类添加构造函数：

```
//New Global Variable

Context context;

public Location (Context arg)
{
context = arg;
} 
```

此外，您需要更改 SharedPreferences 初始化以使用该`context`变量而不是 getApplicationContext()。

然后分配 loc 使用：

```
loc = new Location(getApplicationContext()); 
```

这至少应该解决您的 NullPointerException。

由于不受支持的地址类型，您的 SocketException 似乎正在发生，但从您发布的代码来看，您似乎根本没有使用任何地址。

# android - 用于 Android 许可的 AESObfuscator

> ID：10969226
> 
> 赞同：4
> 
> 时间：2012-06-10T13:49:41.167
> 
> 标签：android, android-lvl

我在 ServerManagedPolicy 中使用 AESObfuscator 进行 android 许可。到目前为止，我已经像这样创建了 deviceId：

```
String deviceId = Secure.getString( getContentResolver(), Secure.ANDROID_ID ); 
```

网上所有的例子都是这样做的，但有时会说它不是很安全，但没有描述其他方法。我读过 ANDROID_ID 可以很容易地更改，甚至可以为空，所以我真的想有另一种方法来获得一个唯一的 id。对于购买了我的应用程序的人来说，许可多次失败，我很确定这与此有关，否则只能是谷歌的问题，我真的很怀疑。

那么我该怎么做呢？只需创建一个随机哈希并将其添加到 deviceId （当然将其存储在某处..？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T01:54:27.497

你说的“安全”是什么意思？这只是混淆您的偏好以使其更难在有根设备上进行编辑的问题。如果您重置设备（删除所有数据），或者如果有人在有根设备上编辑它，ANDROID_ID 可能会发生变化。第一种情况并不是真正的问题，在第二种情况下，您将无法解密（去混淆）存储的首选项，因此您只需将其视为错误。如果它真的为空，您应该考虑某种后备值。

这里的重点不是要有唯一的 ID，而是使用一些特定于设备的数据来混淆首选项，这样您就不能只是将它们复制到另一台设备上。您可以使用 IMEI、WiFi 适配器 MAC 地址或任何其他特定设备的哈希值，但您必须处理特定属性不可用的情况（例如，仅 WiFi 的平板电脑没有 IMEI 等。 )

使用 ACRA 或 BugSense 等错误报告库来跟踪实际错误并了解许可失败背后的真正原因。有时是谷歌基础设施的问题，所以你也应该尝试处理这个问题（缓存许可状态等）

# python - 从进程到 wx.TextCtrl 控件的非阻塞实时重定向标准输出

> ID：10969228
> 
> 赞同：0
> 
> 时间：2012-06-10T13:50:12.337
> 
> 标签：python, multithreading, wxpython

我有 countdown.exe 文件（该文件的源代码如下）。执行此文件时，他每隔一秒就在控制台中写入一次文本。当我的 GUI python 应用程序被执行时，我开始执行这个文件：

```
self.countdown_process = subprocess.Popen("countdown.exe", shell=True, stdout=subprocess.PIPE) 
```

我在 subprocess.PIPE 中重定向标准输出并启动`out_thread`读取该进程标准输出并添加到 TextCtrl 的线程：

```
out_thread = OutTextThread(self.countdown_process.stdout, self.AddText)
out_thread.start() 
```

这是我的 python 应用程序的完整代码：

```
import os
import sys
import wx

import subprocess, threading

class MyFrame(wx.Frame):
    def __init__(self):
        super(MyFrame, self).__init__(None)
        self._init_ctrls()

    def _init_ctrls(self):
        self.OutText = wx.TextCtrl(id=wx.NewId(), value='', name='OutText',
                                   parent=self, pos=wx.Point(0, 0),
                                   size=wx.Size(0, 0), style=wx.TE_MULTILINE|wx.TE_RICH2)

        self.OutText.AppendText("Starting process...\n")
        self.OutText.AppendText("Waiting 10 seconds...\n")
        self.countdown_process = subprocess.Popen("countdown.exe", shell = True, stdout=subprocess.PIPE)
        out_thread = OutTextThread(self.countdown_process.stdout, self.AddText)
        out_thread.start()

    def AddText(self, text):
        self.OutText.AppendText(text)

class OutTextThread(threading.Thread):
    def __init__(self, std_out, cb):
        super(OutTextThread, self).__init__()
        self.std_out = std_out
        self.cb = cb

    def run(self):
        text = None
        while text != '':
            text = self.std_out.readline()
            self.cb(text)

if __name__ == '__main__':
    app = wx.App(False)
    frame = MyFrame()
    frame.Show(True)
    app.MainLoop() 
```

countdown.exe 的 C++ 代码很简单：

```
#include <stdio.h>
#include <time.h>

void wait ( int seconds )
{
  clock_t endwait;
  endwait = clock () + seconds * CLOCKS_PER_SEC ;
  while (clock() < endwait) {}
}

int main ()
{
  int n;
  printf ("Starting countdown...\n");
  for (n=10; n>0; n--)
  {
    printf ("%d\n",n);
    wait (1);
  }
  printf ("FIRE!!!\n");
  return 0;
} 
```

但我有一些问题。我启动我的 python 应用程序，我必须等待 10 秒，并且只有 10 秒 countdown.exe 的标准输出是用 TextCtrl 写入的，如下图所示： ![在此处输入图像描述](../Images/c83b930d37c39f7c60b28148fa723989.png) 我希望在 TextCtrl 中实时写入 countdown.exe 的标准输出（self.OutText ）。我怎么能做到这一点？我尝试在 AddText 方法中使用 wx.CallAfter：

```
def AddText(self, text):
    wx.CallAfter(self.OutText.AppendText, text) 
```

但没用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:36:38.007

您不能直接从线程调用 wxPython 方法。所以这条线

```
self.cb(text) 
```

不会工作。但是如果你把它放到一个线程安全的方法中，比如 wx.CallAfter，那么它应该可以工作。请参阅以下链接：

*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)
*   [http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

我还在这里写了一篇关于将内容从标准输出重定向到文本控件的教程：

*   [http://www.blog.pythonlibrary.org/2010/06/05/python-running-ping-traceroute-and-more/](http://www.blog.pythonlibrary.org/2010/06/05/python-running-ping-traceroute-and-more/)

# ruby-on-rails - 呈现复杂 Flash 消息的更好方法

> ID：10969230
> 
> 赞同：0
> 
> 时间：2012-06-10T13:50:31.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一些复杂的消息要在 Flash 消息中显示，因此我没有在控制器中使用长字符串，而是将其提取为部分。我这样做：

```
flash[:success] = render(:partial => "complicated_message")
…
respond_to do |format|
  format.html
  format.js
end 
```

然后应该呈现一个显示闪光灯的普通视图。当然，这是一个双重渲染错误，因为我“浪费”了部分渲染。

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:01:50.227

正如@jdoe 所建议的那样，答案是改用 render_to_string 方法。

# css - 如何创建桌面小部件

> ID：10969235
> 
> 赞同：-2
> 
> 时间：2012-06-10T13:51:29.870
> 
> 标签：css, desktop, widget

大家好，我正在尝试使用 XHTML、CSS、JavaScript 和 Ajax 为学校项目构建桌面小部件 oa Web 应用程序。我的问题是：

任何人都知道任何工具包或框架或构建桌面小部件的东西吗？

谢谢！

[编辑] 嗨，伙计们，我知道我在 10 个月前问过这个问题，但我想出了如何使用 html/css/javascript 构建这些应用程序。很简单，答案是您需要在完成后创建一个 zip 存档，然后将小部件添加到 win7 小部件中。

对于我 10 个月前提出的问题，我很抱歉，但我认为现在应该与许多可能遇到此问题的人分享此信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:53:48.167

您可以使用[Adob​​e Air](http://get.adobe.com/air/?promoid=JOPDE)来创建桌面小部件。

> Adobe® AIR® 3 运行时使开发人员能够使用 HTML、JavaScript、Adobe Flash® 软件和 ActionScript® 来构建作为独立客户端应用程序运行的 Web 应用程序，而不受浏览器的限制。

# postgresql - 命名在 PostgreSQL 中使用大小写创建的输 出列

> ID：10969236
> 
> 赞同：4
> 
> 时间：2012-06-10T13:51:31.957
> 
> 标签：postgresql, switch-statement

是否可以在 PostgreSQL语句中命名使用`case`("switch")创建的输出列？`SELECT`从[文档](http://www.postgresql.org/docs/8.4/static/functions-conditional.html)中可以看出这是不可能的。我想做的一个示例用法是：

`SELECT CASE (column) WHEN 1 THEN 'One' END AS 'TheColumn' FROM TABLE ;`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T13:57:14.637

它对我有用（pg-9.1）

```
CREATE TABLE one
    ( one INTEGER
    );
INSERT INTO one(one) values ( 0), (1), (NULL);

SELECT case one 
        when 1 then 'one'
        when 0 then 'zero'
        else 'other' 
       end AS the_one
FROM one; 
```

因此，单引号（用于引用别名列名）应该是双引号（或不存在）。

结果：

```
CREATE TABLE
INSERT 0 3
UPDATE 3
 the_one 
---------
 one
 zero
 other
(3 rows) 
```

# rss - 按标签将 Feedburner 的一个 Feed 拆分为多个 Fe ed

> ID：10969237
> 
> 赞同：1
> 
> 时间：2012-06-10T13:51:33.610
> 
> 标签：rss, blogger, feed, atom-feed, feedburner

如何将 FeedBurner 的 Feed 分成多个 Fe​​ed？

我的一个从 blogger.com 发布到 FeedBurner 并具有类别标签，即 Blogger 中的标签。我尝试使用 Yahoo Pipe 按标签拆分项目，但无法成功，因为它的过滤器仅适用于标题和描述中的单词。

[这是我提要的原始 RSS](http://engineerflies.blogspot.com/feeds/posts/default?alt=rss)

[Blogger 供稿 URL](http://support.google.com/blogger/bin/answer.py?hl=en&hlrm=en&answer=97933)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:57:08.110

要根据标签类别为同一博客设置多个提要，请使用此格式，如下[所述](http://labnol.blogspot.in/2007/08/offer-rss-feeds-for-blogger-search.html)-

http://{yourblogname}.blogspot.com/feeds/posts/default/-/{label}

这个技巧仍然适用于 Feedburner 的转世形式。

# java - 在一个事务中更改实体字段

> ID：10969238
> 
> 赞同：0
> 
> 时间：2012-06-10T13:51:38.973
> 
> 标签：java, hibernate, jpa, transactions

在我的应用程序中，我有一个需要一些时间（30 秒 - 5 分钟）的过程，在此期间通过 JPA 操作数据库。

我的问题是我想将进程的状态设置为其 db 实体：

```
 void runProcess(Process process) {
     process.setState("Started.");
     em.merge(process);

     ... db manipulations

     process.setState("First phase finished.");
     em.merge(process);

     ... db manipulations

     process.setState("Process finished.");
     em.merge(process);
 } 
```

问题是只有第一次更新发生，其他更新被忽略。

我没有收到任何错误和 Hibernate 日志，我可以看到进程更新三次：

```
 Hibernate: update process set state=? where id=? 
```

但只会进行第一次更新。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:58:21.177

对实体所做的更改是在内存中进行的，并且仅在刷新时（通常在事务结束时）写入数据库。

并且即使在事务结束之前进行了fluch，或者如果您在每次进程状态更新后fluch，其他并发事务也很有可能看不到新状态，因为事务是相互隔离的，并且默认隔离大多数情况下，级别是 READ_COMMITTED（这意味着其他事务只有在提交后才能看到更改）。

如果你想让进程状态明确写入数据库，你需要在一个单独的事务中写入这个状态。

# python - Python：在 wx.EmptyImage 上使用 dc.drawBitMap 在位图中进行条带化

> ID：10969241
> 
> 赞同：1
> 
> 时间：2012-06-10T13:52:31.223
> 
> 标签：python, wxpython

我真的不明白以下代码导致的条带化行为。我更希望看到位图的上半部分是白色的，而下半部分是黑色的。我想我可能在这里误解了一些基本的东西。感激地收到任何帮助。

```
import numpy
import wx

class MyFrame(wx.Frame):
def __init__(self, parent, id, title):
    wx.Frame.__init__(self, parent, id, title, size = (135,655))

    width = 128
    height = 640
    color = (255,255,255)

    array = numpy.zeros((width,height,3),'uint8')
    array[:,:,] = color
    print array[10,10,0]
    array[0:128,0:320,0:3] = 0
    print array[10,10,0]
    image = wx.EmptyImage(width,height)
    image.SetData(array.tostring())
    self.bitmap = image.ConvertToBitmap()
    wx.EVT_PAINT(self, self.OnPaint)

    self.Centre()

def OnPaint(self, event):
    dc = wx.PaintDC(self)
    dc.DrawBitmap(self.bitmap,3,10)

class MyApp(wx.App):
    def OnInit(self):
        frame = MyFrame(None, -1, '2DS')
        frame.Show(True)
        self.SetTopWindow(frame)
        return True

app = MyApp(0)
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:49:42.627

如果你初始化你的 numpy 数组`numpy.zeros((height,width,3),'uint8')`并切片数组`array[0:320,0:128,0:3]`（高度然后宽度）你应该得到你所期望的。

在您的示例中，您有 128 行，有 640 列（阵列中的基本宽度为 640，高度为 128）。因为位图是 128 宽，640 的宽度环绕在 5 条线 (640/128) 上，因此您将图像的左侧设为黑色，将右侧设为白色，但由于线条环绕，您会得到斑马纹效果。

# regex - 使用 Perl 计算字符串中的连续字符数

> ID：10969251
> 
> 赞同：7
> 
> 时间：2012-06-10T13:54:36.430
> 
> 标签：regex, perl

我有一个包含多个连续字符序列的字符串，例如：

```
aaabbcccdddd 
```

我想将其表示为：`a3b2c3d4`

到目前为止，我想出了这个：

```
#! /usr/bin/perl

$str = "aaabbcccdddd";
$str =~ s/(.)\1+/$1/g;

print $str."\n"; 
```

输出：

```
abcd 
```

它将连续字符存储在捕获缓冲区中并仅返回一个。但是，我想要一种方法来计算捕获缓冲区中连续字符的数量，然后只显示一个字符后跟该计数，以便将输出显示为`a3b2c3d4`而不是`abcd`.

上述正则表达式需要进行哪些修改？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T14:08:08.250

这似乎需要替换命令上的“执行”选项，因此替换文本被视为 Perl 代码的片段：

```
 $str =~ s/((.)\2+)/$2 . length($1)/ge; 
```

### 脚本

```
#!/usr/bin/env perl
use strict;
use warnings;

my $original = "aaabbcccdddd";
my $alternative = "aaabbcccddddeffghhhhhhhhhhhh";

sub proc1
{
    my($str) = @_;
    $str =~ s/(.)\1+/$1/g;
    print "$str\n";
}

proc1 $original;
proc1 $alternative;

sub proc2
{
    my($str) = @_;
    $str =~ s/((.)\2+)/$2 . length($1)/ge;
    print "$str\n";
}

proc2 $original;
proc2 $alternative; 
```

### 输出

```
abcd
abcdefgh
a3b2c3d4
a3b2c3d4ef2gh12 
```

* * *

> 你能分解正则表达式来解释它是如何工作的吗？

*我假设有问题的是匹配部分而不是替换部分。*

原来的正则表达式是：

```
(.)\1+ 
```

这将捕获单个字符，该字符`(.)`后跟重复一次或多次的相同字符。

修改后的正则表达式是“相同的”，但也捕获了整个模式：

```
((.)\2+) 
```

第一个左括号开始整体捕获；第二个左括号开始捕获单个字符。但是，现在是第二次捕获，所以`\1`原版中的需要成为`\2`修改版中的。

因为搜索捕获了整个重复字符的字符串，所以替换可以很容易地确定模式的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:18:45.193

如果您可以忍受由以下原因引起的减速，则以下工作有效`$&`：

```
$str =~ s/(.)\1*/$1\. length $&/ge; 
```

`*`将上述表达式中的to更改为`+`不影响非连续字符。

`${^MATCH}`正如 JRFerguson 提醒的那样，Perl 5.10+ 提供了一个不影响正则表达式性能的等效变量：

```
$str =~ s/(.)\g{1}+/$1\. length ${^MATCH}/pge; 
```

对于 Perl 5.6+，仍然可以避免性能下降：

```
$str =~ s/(.)\g{1}+/ $1\. ( $+[0] - $-[0] ) /ge; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-25T14:10:39.693

JS：

```
let data = "ababaaaabbbababb";

data.replace(/((.)\2+)/g, (match, p1, p2) =>  {
  data = data.replace(new RegExp(p1, 'g'), p2 + p1.length);
});

console.log(data); 
```

# c++ - 合成歌曲时音符之间的准确延迟

> ID：10969254
> 
> 赞同：1
> 
> 时间：2012-06-10T13:54:54.157
> 
> 标签：c++, audio, sleep, midi

我正在编写同时播放数字音频（合成音乐）和 MIDI 音乐（使用 RtMidi 库）的 C++ 代码。数字化的音乐将在计算机的音频设备中播放，但 MIDI 音乐可以在外部合成器。我想播放一首同时使用数字化乐器和 MIDI 乐器的歌曲，但我不确定同步这两个音频流的最佳方式：

*   无法使用像 Sleep() 这样的函数，因为延迟时间既不均匀又太长，无法满足我的需要（大约为 1 毫秒）。如果 Sleep() 在仅请求 1ms 时定期等待 5ms，生成的歌曲速度将关闭，除非每次调用时都准确，否则速度将不均匀。
*   计算放入音频缓冲区的样本数量可为数字音频的音符之间提供超精确的时序（一个样本的最小延迟 - 48kHz 时为 0.02 毫秒），但此时序不能用于 MIDI。因为音频是缓冲的，所以音符会以突发方式合成（一次填充一个音频缓冲区，尽可能快），所以这会导致每次数字音频缓冲区需要播放一堆 MIDI 音符时，它们之间没有延迟被重新填充。
*   播放实时 MIDI 数据没有时间信息，因此一旦发送音符就会播放。因此，一个音符不能安排在以后播放，所以我需要自己在正确的时间准确地发送 MIDI 事件。

目前我正在使用 nanosleep() - 它仅适用于 Linux，而不适用于 Windows - 等待音符之间的正确时间。这允许数字音频和 MIDI 数据保持同步，但是 nanosleep() 不是很一致，因此产生的速度非常不均匀。

谁能想到一种方法来保持数字音频和 MIDI 数据的音符之间的准确时序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:30:40.093

如果你愿意使用 Boost，它有[CPU-precision timers](http://www.boost.org/doc/libs/1_49_0/libs/timer/doc/index.html)。如果没有，在 Windows 上有功能[`QueryPerformanceCounter`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)和`QueryPerformanceFrequency`，可用于基于 CPU 的计时，这肯定会满足您的所有需求。网络上有很多 Timer 类实现，其中一些在 windows 和 *ix 系统上都可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:51:21.707

第一个问题是您需要知道有多少音频通过了音频设备。如果您的延迟足够低，您可能会根据您推送的数据量来猜测，但是这与播放之间的延迟是一个移动目标，因此您应该尝试从音频中获取该信息硬件。该信息是可用的，因此请使用它，因为您将从延迟测量中的错误中获得的“抖动”会以音乐上明显的方式影响同步。

如果必须使用 sleep 进行计时，有两个问题会使其睡眠时间更长：1\. 优先级（如果另一个进程/线程具有更高的优先级，则如果计时器已用完，它将运行）和 2\. 系统延迟（如果系统需要 5 毫秒来交换进程/线程，它可能会将其添加到您请求的延迟时间中）。这些延迟在音乐上是相关的。大多数 midi API 都有一个“sequencer” API，可以让您提前对数据进行排队，以避免使用系统计时器。

即使您没有将 portaudio 用于音频 I/O，您也可能会发现此文档很有用。

[http://www.portaudio.com/docs/portaudio_sync_acmc2003.pdf](http://www.portaudio.com/docs/portaudio_sync_acmc2003.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T14:42:23.607

这个问题的答案不在于小缓冲区，而在于大缓冲区。

让我们以一首 3 分钟的歌曲为例。

首先渲染数字部分，并用 MIDI 音符“标记”它。然后开始播放并在时间到时触发 MIDI 音符，可能使用 std::vector 来保存有序列表。可以使用整体时间偏移来更改同步：

可怕的不完整但希望是关于该主题的示范性伪代码：

```
start_digital_playing_thread();
int midi_time_sync = 10; // ms
if (time >= (midi_note[50]->time + midi_time_sync)) // play note 
```

# jquery - 一次显示/隐藏多个 div 的按钮

> ID：10969255
> 
> 赞同：4
> 
> 时间：2012-06-10T13:55:01.557
> 
> 标签：jquery, css, html

我想要一个按钮，当点击它时，它会同时显示多个 div（3 个或更多），然后再次点击它会隐藏 div。我找到了一次显示多个 div 的答案，但我希望所有 div 同时弹出并从一个按钮同时隐藏。div 的样式会有所不同。如果这已经得到回答，我很抱歉，并提前感谢您的任何答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:58:44.317

你为什么不在`hiddenDiv`所有需要隐藏和使用的div上写一个类？

```
$('#hideButton').click(function() {
  $('.hiddenDiv').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:56:57.767

使用这个脚本：

```
$('#button-id').click(function(e) {
  $('#id1, #id2').toggle();
  e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:16:17.817

或者您可以使用普通的 javascript（如果您不喜欢 jQuery）并调用两次（或更多）函数来隐藏 html 元素。像这样的东西：

```
<button onclick="divHideShow('divC');divHideShow('divD');">Click me</button> 
```

当然，divHideShow 是隐藏 div 元素的函数。所以调用上面的隐藏 divC 和 divD。查找有关以下内容的详细说明：[显示或隐藏多个 div](http://interestingwebs.blogspot.com//2011/05/show-or-hide-multiple-divs.html)。

# c - 获取线程状态，如 top

> ID：10969259
> 
> 赞同：0
> 
> 时间：2012-06-10T13:55:30.597
> 
> 标签：c, multithreading

查询线程状态的 linux API 是什么，比如`top -H`命令可以做什么？我不需要可移植性，它只需要在现代 x86[_64] linux 上工作。

*我不想只知道线程是活动的还是终止的*。我也需要知道它是否在睡觉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:11:57.530

据我所知，至少在 Linux 上`top`从 , 读取它的信息。`/proc`

**更新**：对于`top`您可能想在此处阅读的来源：[Procps - /proc 文件系统实用程序](http://procps.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:17:17.153

您想使用来自 procps ( [http://procps.sourceforge.net/](http://procps.sourceforge.net/) ) 的 libproc。

网上没有任何 API 文档，但是[http://codingrelic.geekhold.com/2011/02/listing-processes-with-libproc.html](http://codingrelic.geekhold.com/2011/02/listing-processes-with-libproc.html)是使用 libproc 的一个很好的介绍。

# mod-rewrite - 在 %{REQUEST_FILENAME} 之后，指向 css/javascript 的 mod_rewrite 链接仍然混乱！-f

> ID：10969262
> 
> 赞同：1
> 
> 时间：2012-06-10T13:56:20.990
> 
> 标签：mod-rewrite

我真的在努力完成最简单的事情......

重定向：http_://somehost/.../site_directory/Arg1/Arg2

至：http_://somehost/.../site_directory/index.php?a=Arg1&b=Arg2

我已经像这样设置了 mod_rewrite（在 /site_directory 的 .htaccess 文件中）

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ([^/\.]+)/([^/\.]+)$ index.php?a=$1&b=$2 [NC] 
```

我收到各种错误，因为正在 /site_directory/Arg1/Arg2 中搜索我的 javascript 和 css 文件。

我到底在做什么愚蠢的事情来搞砸这件事？提前致谢。

（mod_rewrite 已安装并正常工作，因为 index.php 会吐回 $_GET 参数，因为我告诉它，它们是 'Arg1' 和 'Arg2'）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:20:50.600

您应该使用绝对路径而不是相对路径来引用您的脚本和 CSS 文件。

```
<script src="/site_directory/foobar.js"> 
```

代替

```
<script src="foobar.js"> 
```

所以文件将从 加载`/site_directory/foobar.js`，而不是从`/site_directory/Arg1/Arg2/foobar.js`.

# c# - WCF 数据服务 - 客户端正在缓存结果

> ID：10969264
> 
> 赞同：2
> 
> 时间：2012-06-10T13:56:22.690
> 
> 标签：c#, wcf, ado.net, wcf-data-services

我有一个 WCF 数据服务，我的客户端是一个 WPF 应用程序。

我的 WCF 数据服务中有一个服务操作。类似的东西

```
[WebGet]
public IQueryable<VSuppliersExtra> GetAllVSuppliers()
{
    List<VSuppliersExtra> lstVsup = new List<VSuppliersExtra>();
    // add some VSuppliersExtra entities to the list
    ........
    return lstVsup.AsQueryable<VSuppliersExtra>();            
} 
```

在我的客户中，我有

```
oCollection = new ObservableCollection<VSuppliersExtra>(jp.CreateQuery<VSuppliersExtra>("GetAllVSuppliers"));
//Open a new window Change collection and update the changes in the DB
.......
//run the same query again
.......
oCollection = new ObservableCollection<VSuppliersExtra>(jp.CreateQuery<VSuppliersExtra>("GetAllVSuppliers")); 
```

现在，一切正常，但第二次调用服务操作将始终让我得到相同的结果而无需更改，直到我重新启动我的应用程序。
我检查了数据库，我所有的更改都保存到了 SQL 服务器，我检查了服务中的函数，它确实返回了更新的数据......但我得到了相同的结果集！！！！客户端有缓存吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T20:49:39.190

好吧，我找到了一些文章[http://msdn.microsoft.com/en-us/library/gg602811.aspx](http://msdn.microsoft.com/en-us/library/gg602811.aspx)
我添加了一个 context.MergeOptions = MergeOption.OverwriteChanges;

那就是诀窍。

谢谢

# cocoa - 如何从 Cocoa 中的窗口控制器获取当前的第一响应者？

> ID：10969271
> 
> 赞同：9
> 
> 时间：2012-06-10T13:57:38.440
> 
> 标签：cocoa, nsview, categories, first-responder

我想在窗口中找到第一响应者视图。为此，我想实现这样的类别：

```
 @implementation  NSView (ViewExtensions)
- (NSView *)findFirstResponder
{
    if ([self isFirstResponder]) {        
        return self;     
    }

    for (NSView *subView in [self subviews]) {
        NSView *firstResponder = [subView findFirstResponder];

        if (firstResponder != nil) {
            return firstResponder;
        }
    }

    return nil;
}

@end 
```

上面的代码基于这个问题/答案 SO：[Get the current first responder without using a private API](https://stackoverflow.com/questions/1823317/how-do-i-legally-get-the-current-first-responder-on-the-screen-on-an-iphone)。

问题可能在于 NSResponder 没有像 UIResponder 那样的 isFirstResponder 方法。NSResponder 的等价物是什么？

如果按照上面的方法实现上面的方法，我当然会得到调试信息：“'NSView'可能无法响应'isFirstResponder'”。

如何让 findFirstResponder 在 Cocoa 中工作？

更多信息：稍后我想在我的窗口控制器中以某种方式使用上述方法，例如：

```
 NSArray *copiedObjects;
        if ([[self window]contentView] == MyTableView) {
            copiedObjects = [tableController selectedObjects];
        }
        if ([[self window]contentView] == MyOutlineView) {
            copiedObjects = [treeController selectedFolders];
        } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-10T16:11:06.790

有什么问题`-[NSWindow firstResponder]`，直接返回第一响应者？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:34:18.003

如果您只想要第一响应者，请`firstResponder`使用`NSWindow`.

`targetForAction:`如果您想要特定操作的第一响应者（例如`mouseDown:`） ，您可能想要使用 NSApplications方法

# c++ - 我可以在类模板的方法中引用另一个模板类型的对象吗？

> ID：10969277
> 
> 赞同：1
> 
> 时间：2012-06-10T13:58:13.000
> 
> 标签：c++, templates, linked-list

我的目标是创建一个包含不同类型节点的链表。为此，我创建了一个节点类模板，如下所示：

```
template <class T>
class N_Node
{
public:
    N_Node(T e, N_Node *p = nullptr ,N_Node *n = nullptr);
    void set_previous(N_Node<T> *p);
    void set_next(N_Node<T> *n);
    N_Node get_previous();
    N_Node get_next();

    T element;
    N_Node *prev;
    N_Node *next;
}; 
```

现在，在 main.cpp 中，当我尝试执行以下操作时，它给了我一个错误，说 type`N_Node<int>*`的参数与 type 的参数不兼容`N_Node<char>*`。所以，我想知道是否有任何方法可以指定设置为前一个的节点可以是与当前节点不同的类型？

```
N_Node<int> n1(5);
N_Node<char> n3('g');
n3.set_previous(&n1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:04:53.993

当然，创建一个`N_Node_Base`省略`element`成员的类，并从它继承 for `N_Node<T>`。大多数 C++ 标准库实现这样做是为了减少模板开销。

当然，这样做你将失去遍历列表和访问元素的能力，因为你不知道每个元素的类型。您可能希望在`T`使用 eg的最小界面之后进行类型擦除`boost::any`，但您必须更多地说明您为什么要这样做。

# javascript - 可拖动的 div 不可编辑

> ID：10969278
> 
> 赞同：1
> 
> 时间：2012-06-10T13:58:14.453
> 
> 标签：javascript, jquery

Jquery UI`Draggable`并`Contenteditable`没有在同一个`Div`元素上一起工作。有什么解决方法吗？

示例：[jsfiddle](http://jsfiddle.net/EexHH/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:16:42.210

jQuery 可拖动的原因是劫持了元素的点击事件。您可以在代码中使用此修复：

```
$('.edit').draggable().bind('click', function(){
  $(this).focus();
}) 
```

小提琴：http: [//jsfiddle.net/EexHH/3/](http://jsfiddle.net/EexHH/3/)

# android - 如何使用 ContentResolver 创建新的播放列表

> ID：10969281
> 
> 赞同：7
> 
> 时间：2012-06-10T13:58:38.143
> 
> 标签：android, android-contentprovider, android-music-player

我正在尝试`Playlist`使用 Android 创建一个新的`ContentResolver`，它将添加到音乐播放器的播放列表中，但是当代码运行时，插入到播放列表中返回 null （对于`Uri`），当我检查音乐播放器的播放列表时，我的新`Playlist`条目不在那里。我怀疑`insert()`返回 null 的原因是因为我没有正确创建播放列表。鉴于我的代码不起作用，有人可以澄清如何动态创建新的播放列表。（在我的搜索中，我找到了几种查询播放列表的方法，但实际上并没有创建新的方法）

这是我的代码...

```
 ContentResolver resolver = getActivity().getContentResolver();

    Uri playlists = MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI;

    Log.d(A.TAG, "Checking for existing playlist for " + chart.getName());
    Cursor c = resolver.query(playlists, new String[] {"*"}, null, null, null);
    long playlistId = 0;
    c.moveToFirst();
    do {
        String plname = c.getString(c.getColumnIndex(MediaStore.Audio.Playlists.NAME));
        if (plname.equalsIgnoreCase(chart.getName())) {
            playlistId = c.getLong(c.getColumnIndex(MediaStore.Audio.Playlists._ID));
            break;
        }
    } while (c.moveToNext());
    c.close();

    if (playlistId!=0) {
        Uri deleteUri = ContentUris.withAppendedId(playlists, playlistId);
        Log.d(A.TAG, "REMOVING Existing Playlist: " + playlistId);

        // delete the playlist
        resolver.delete(deleteUri, null, null);
    }

    Log.d(A.TAG, "CREATING PLAYLIST: " + chart.getName());
    ContentValues v = new ContentValues();
    v.put(MediaStore.Audio.Playlists.NAME, chart.getName());
    v.put(MediaStore.Audio.Playlists.DATE_MODIFIED, System.currentTimeMillis());
    Uri newpl = resolver.insert(playlists, v);
    Log.d(A.TAG, "Added PlayLIst: " + newpl);

    Uri insUri = Uri.withAppendedPath(newpl, MediaStore.Audio.Playlists.Members.CONTENT_DIRECTORY);

    int order = 1;
    Log.d(A.TAG, "Playlist Members Url: " + insUri);
    c = getContentManager().queryWhere(getActivity(), Song.class, Song.Fields.LIBRARYID + " != 0 and " + Song.Fields.CHARTID + " = " + chart.getId(), (String[])null);
    if (c.moveToFirst()) {
        Log.d(A.TAG, "Adding Songs to PlayList **");
        do {
            long id = c.getLong(c.getColumnIndex(Song.Fields.LIBRARYID));
            ContentValues cv = new ContentValues();
            cv.put(MediaStore.Audio.Playlists.Members.PLAY_ORDER, order++);
            cv.put(MediaStore.Audio.Playlists.Members.AUDIO_ID, id);
            Uri u = resolver.insert(insUri, cv);
            Log.d(A.TAG, "Added Playlist Item: " + u + " for AUDIO_ID " + id);
        } while (c.moveToNext());
    }
    c.close(); 
```

****更新：部分解决******

 **上面的代码确实正确地添加了一个新的播放列表 on `4.0.3`，但不是 on `2.3`。唯一的问题区域`4.0.3`是我需要确保`DATE_MODIFIED`已在播放列表中`PLAY_ORDER`设置并且已在播放列表项中设置。

我仍然不知道为什么它不会在 2.x 上创建播放列表，所以如果有人对此有任何想法，我想知道。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T15:14:32.427

这是我在自定义构建的 AsyncTask 中使用的代码，它适用于 2.3、3.1 和 4.03：

```
 ContentValues mInserts = new ContentValues();
            mInserts.put(MediaStore.Audio.Playlists.NAME, mPrefs.getString(AM.MEDIASTORECHANGE_NEWPLAYLISTNAME, "New Playlist"));
            mInserts.put(MediaStore.Audio.Playlists.DATE_ADDED, System.currentTimeMillis());
            mInserts.put(MediaStore.Audio.Playlists.DATE_MODIFIED, System.currentTimeMillis());
            mUri = mCR.insert(MediaStore.Audio.Playlists.EXTERNAL_CONTENT_URI, mInserts);
            if (mUri != null) {
                mPlaylistId = -1;
                mResult = FM.SUCCESS;
                c = mCR.query(mUri, PROJECTION_PLAYLIST, null, null, null);
                if (c != null) {
                    // Save the newly created ID so it can be selected.  Names are allowed to be duplicated,
                    // but IDs can never be.
                    mPlaylistId = c.getInt(c.getColumnIndex(MediaStore.Audio.Playlists._ID));
                    c.close();
                }
                if (DBG.AUDIO) {
                    Log.d(TAG, "PLAYLIST_ADD - mPlaylistId: " + mPlaylistId 
                            + "  mSelectString: " + mSelectString + "  mUri: "+ mUri.toString());
                }

            }

public static final String[] PROJECTION_PLAYLIST = new String[] {
    MediaStore.Audio.Playlists._ID,
    MediaStore.Audio.Playlists.NAME,
    MediaStore.Audio.Playlists.DATA
}; 
```

要获得正确的 Uri 以添加播放列表成员，您需要 Id。要将歌曲添加到播放列表，您还需要知道播放列表当前状态下 PLAYORDER 的当前高水位。否则，MediaStore ContentResolver 会因为您尝试插入具有相同播放顺序的播放列表成员而作呕。因此，您需要首先查询播放列表 Uri 以获得最高的 PLAYORDER 值，并将其用作 ContentValues 插入的起点。

我只尝试一次插入一个播放列表成员，但理论上您可能可以进行批量插入。下面的代码设置为将来转换为批量插入，但目前一次只插入一个。它采用 MediaStore.Audio.Media 歌曲的光标并将它们插入到已存储在 SharedPreferences 中的播放列表 ID 中。

```
 private void addSongsInCursorToPlaylist(Cursor c) {
    int mIdCol;
    int mCount;
    int mPercent = 0;
    ContentResolver mCR = mContext.getContentResolver();
    ContentProviderClient mCRC = null;
    try {
        mCount = c.getCount();
        mIdCol = c.getColumnIndex(MediaStore.Audio.Media._ID);
        ContentValues[] mInsertList = new ContentValues[1];
        mInsertList[0] = new ContentValues();
        int mPlaylistId  = mPrefs.getInt(AM.PLAYLIST_NOWPLAYING_ID, AM.PLAYLIST_ID_DEFAULT);
        Uri mUri = MediaStore.Audio.Playlists.Members.getContentUri("external", mPlaylistId);
        Cursor c2 = mCR.query(mUri, 
                PROJECTION_PLAYLISTMEMBERS_PLAYORDER, null, null, MediaStore.Audio.Playlists.Members.PLAY_ORDER + " DESC ");
        int mPlayOrder = 1;
        if (c2 != null) {
            if (c2.moveToFirst()) {
                mPlayOrder = (c2.getInt(c2.getColumnIndex(MediaStore.Audio.Playlists.Members.PLAY_ORDER))) + 1;
            }
            c2.close();
        }
        mCRC = mCR.acquireContentProviderClient(mUri);
        if (DBG.AUDIO) {
            Log.d(TAG, "addSongsInCursorToPlaylist -Content Uri: " + mUri.toString() 
                    + "  PlaylistID: " + mPlaylistId + " mPlayOrder: " + mPlayOrder);
        }
        for (int i=0; i< mCount; i++) {
            if (c.moveToPosition(i)) {
                // Don't pollute with progress messages..has to be at least 1% increments
                int mTemp = (i * 100) / (mCount );
                if (mTemp > mPercent) {
                    mPercent = mTemp;
                    publishProgress(mPercent);
                }
                mInsertList[0].put(MediaStore.Audio.Playlists.Members.AUDIO_ID, c.getLong(mIdCol));
                mInsertList[0].put(MediaStore.Audio.Playlists.Members.PLAY_ORDER, mPlayOrder++);
                mCR.insert(mUri, mInsertList[0]);
                if (DBG.AUDIO) {
                    Log.d(TAG, "addSongsInCursorToPlaylist -Adding AudioID: " + c.getLong(mIdCol) + " to Uri: " + mUri.toString()  );
                }
            }
            mCRC.release();
        }
    } catch (Throwable t) {
        t.printStackTrace();
    }

}
    // Projection to get high water mark of PLAY_ORDER in a particular playlist
public static final String[] PROJECTION_PLAYLISTMEMBERS_PLAYORDER = new String[] {
    MediaStore.Audio.Playlists.Members._ID,
    MediaStore.Audio.Playlists.Members.PLAY_ORDER
};
// Projection to get the list of song IDs to be added to a playlist
public static final String[] PROJECTION_SONGS_ADDTOPLAYLIST = new String[] {
    MediaStore.Audio.Media._ID,
}; 
```**

# c# - 在 C# 中使用两种字体键入

> ID：10969284
> 
> 赞同：0
> 
> 时间：2012-06-10T13:59:03.650
> 
> 标签：c#, fonts, textbox

我正在使用 VS2010、C# 开发 WinForm 应用程序，有没有办法在文本框中使用两种字体？例如，我的用户使用 Tahoma 字体键入，然后他可以按组合键或单击按钮，然后他可以使用 Times New Roman 字体键入（使用 Tahoma 键入的文本不应更改其字体）

我有什么选择？我想 RichTextBox 是我唯一的选择，对吗？如果是这样，如何删除 RichTextBox 图标和工具栏？

Telerik 或其他第三方组件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:44:19.650

正如你所说，`RichTextBox`将帮助你做你所要求的。但是，我不明白您关于删除图标和工具栏的说法。恰恰相反，您必须创建自己的按钮才能启用格式化。

作为一个例子，我向您展示如何切换选择的**粗体**样式

```
private void boldToolStripButton_Click(object sender, EventArgs e)
{
    ToggleFontStyle(FontStyle.Bold);
    boldToolStripButton.Checked = !boldToolStripButton.Checked;
}

private void ToggleFontStyle(FontStyle style)
{
    int selStart = richTextBox.SelectionStart;
    int selLength = richTextBox.SelectionLength;
    int selEnd = selStart + selLength;

    if (selLength == 0) {
        return;
    }

    Font selFont = richTextBox.SelectionFont;
    if (selFont == null) {
        richTextBox.Select(selStart, 1);
        selFont = richTextBox.SelectionFont;
        if (selFont == null) {
            return;
        }
    }
    bool set = (selFont.Style & style) == FontStyle.Regular;

    for (int from = selStart, len = 1; from < selEnd; from += len) {
        richTextBox.Select(from, 1);
        Font refFont = richTextBox.SelectionFont;
        for (int i = from + 1; i < selEnd; i++, len++) {
            richTextBox.Select(i, 1);
            if (!refFont.Equals(richTextBox.SelectionFont))
                break;
        }
        richTextBox.Select(from, len);
        if (set) {
            richTextBox.SelectionFont = new Font(refFont, refFont.Style | style);
        } else {
            richTextBox.SelectionFont = new Font(refFont, refFont.Style & ~style);
        }
    }
    // Restore the original selection
    richTextBox.Select(selStart, selLength);
} 
```

如您所见，这非常复杂，因为当前的文本选择可以包含格式不同的文本部分。此代码以分段方式更改字体样式，确保一块具有唯一的格式。

为了提供用户友好的界面，您还必须处理文本选择事件并根据选择的格式切换样式按钮。即，如果用户选择粗体文本，则粗体切换按钮应处于按下状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:48:58.730

要更改按钮单击或类似
`richTextBox1.Text += " ";`
`richTextBox1.Select(richTextBox1.TextLength,1);`
`FontDialog fd = new FontDialog();`
`fd.ShowDialog();`
`richTextBox1.SelectionFont = fd.Font;`

的字体，如果您希望字体固定在单击上，则对其进行硬编码，而不是显示字体对话框。
*我不明白你的意思`how can I remove RichTextBox icons and toolbars`*

# ios - 图像比例 AFnetworking

> ID：10969285
> 
> 赞同：0
> 
> 时间：2012-06-10T13:59:27.613
> 
> 标签：ios, xcode, image, afnetworking

如何更改 UIImageview 上图像显示的大小，我正在使用 AFNETWORKING 下载图像，它适合 UIImageView 的大小。

但是我想只显示一半的图像，就像 Facebook 应用程序你只看到图像的一部分点击图像查看完整图像一样。谢谢

```
UIImageView *posterImage = [[UIImageView alloc]init]; 
    posterImage.frame = CGRectMake(index * showsScrollView.bounds.size.width + 50, 40, 225, 337);

    [showsScrollView addSubview:posterImage];
    // 6.5 - Asynchronously load the image        
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:posterUrl]];
    [posterImage setImageWithURLRequest:request placeholderImage:[UIImage imageNamed:@"page.png"]
                                success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
                                    [[AFNetworkActivityIndicatorManager sharedManager] decrementActivityCount];
                                } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
                                    [[AFNetworkActivityIndicatorManager sharedManager] decrementActivityCount];
                                }];

    [[AFNetworkActivityIndicatorManager sharedManager] incrementActivityCount]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:52:09.383

我不确定您要做什么，但是您可以通过设置`contentMode`属性来完成类似的事情。

否则，您将在成功块中进行所需的任何调整大小。

重要的旁注：您根本不必手动管理`AFNetworkActivityIndicatorManager`。只需为共享管理器设置`enabled`为`YES`，它会在您提出和完成请求时自动显示和隐藏。

# jquery - jquery函数onclick添加类和删除类

> ID：10969287
> 
> 赞同：0
> 
> 时间：2012-06-10T14:00:08.907
> 
> 标签：jquery

我正在做 jquery 函数来启用和禁用输入类型文本

第一个函数工作正常并更改 a href 的类，但与新类相关的第二个函数不起作用

这是完整的代码

[http://jsfiddle.net/RcLgz/1/](http://jsfiddle.net/RcLgz/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:18:48.260

我看到你没有写`removeAttr`在你的函数中，也使用`live`函数

```
$("a.add").live('click',function () 
{
    $(this).prev("input").css("opacity","1");

    $(this).prev("input").removeAttr("disabled");
    $(this).removeClass("add");
    $(this).addClass("edit");
}); 
```

我希望这个答案对你有帮助..让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:06:02.900

您需要使用委托事件，以便处理程序将应用于更改的 DOM 类：

```
$("div.row").on('click', 'a.add', function () {
    ...
});

$("div.row").on('click', 'a.edit', function() {
    ...
}); 
```

[**现场演示**](http://jsfiddle.net/RcLgz/6/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-10T14:05:22.930

这是解决方案：

[http://jsfiddle.net/RcLgz/2/](http://jsfiddle.net/RcLgz/2/)

**从 jQuery 1.7 开始**，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。

这是更新的版本：

[http://jsfiddle.net/RcLgz/5/](http://jsfiddle.net/RcLgz/5/)

# eclipse - Eclipse JSTL 核心自动完成

> ID：10969290
> 
> 赞同：8
> 
> 时间：2012-06-10T14:00:20.640
> 
> 标签：eclipse, jsp, spring-mvc, jstl, jsp-tags

Eclipse 的 JSP 标签自动完成功能适用于 Spring Security 标签，但不适用于 JSTL 核心。

我在 JSP 文件的顶部有以下声明：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %> 
```

我依赖于 JSTL：

```
 <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency> 
```

...但奇怪的是，JSTL Core 从不自动建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T07:08:26.483

问题是`jstl-api.jar`可能附带的`javax.servlet>jstl`依赖项不`TLD`包含`META-INF`. 您需要的是`jstl-impl.jar`项目类路径中某处可用的文件（Maven 依赖项或直接包含），因为在`jstl-impl.jar`文件中您可以看到它具有以下文件：`META-INF/c.tld`

如果 Eclipse JSP 编辑器可以`jstl-impl.jar`从您的项目类路径中读取，那么它可以读取标签信息并为您提供自动完成功能。

![Eclipse JSP编辑器中jstl补全的截图](../Images/cf2dce80e53f335f04fa0f433239ae95.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T15:12:09.273

如果您使用 Jboss 或其他服务器，请尝试使用 jstl-api.jar。将它添加到 eclipse 类路径中，它应该像魅力一样工作。

# wpf - 苹果风格滚动条 WPF

> ID：10969292
> 
> 赞同：46
> 
> 时间：2012-06-10T14:00:35.863
> 
> 标签：wpf, xaml, scrollbar

我正在尝试减小滚动条控件的大小并使其更像“Apple”，因为它非常适合我的界面。

我想要实现的是看起来像这样的东西：

![在此处输入图像描述](../Images/6c4e88cbd918c5aabb6e8ac23f354aa0.png)

到目前为止，我只有这个

```
 <Style TargetType="{x:Type ScrollBar}">
            <Setter Property="Stylus.IsFlicksEnabled" Value="True" />
            <Setter Property="Background" Value="#8C8C8C" />
            <Setter Property="Width" Value="8"/>
            <Setter Property="MinWidth" Value="8" />
        </Style> 
```

工作 XAML

可以[在 WPF 中的 Apple Style Scrollbar 中找到实现](http://sa.ndeep.me/post/apple-style-scrollbar-in-wpf)

```
 <!--Scrollbar Thumbs-->
<Style x:Key="ScrollThumbs" TargetType="{x:Type Thumb}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Thumb}">
                <Grid x:Name="Grid">
                    <Rectangle HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="Auto" Height="Auto" Fill="Transparent" />
                    <Border x:Name="Rectangle1" CornerRadius="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="Auto" Height="Auto"  Background="{TemplateBinding Background}" />
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="Tag" Value="Horizontal">
                        <Setter TargetName="Rectangle1" Property="Width" Value="Auto" />
                        <Setter TargetName="Rectangle1" Property="Height" Value="7" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<!--ScrollBars-->
<Style x:Key="{x:Type ScrollBar}" TargetType="{x:Type ScrollBar}">
    <Setter Property="Stylus.IsFlicksEnabled" Value="false" />
    <Setter Property="Foreground" Value="#8C8C8C" />
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="Width" Value="8" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ScrollBar}">
                <Grid x:Name="GridRoot" Width="8" Background="{TemplateBinding Background}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="0.00001*" />
                    </Grid.RowDefinitions>

                    <Track x:Name="PART_Track" Grid.Row="0" IsDirectionReversed="true" Focusable="false">
                        <Track.Thumb>
                            <Thumb x:Name="Thumb" Background="{TemplateBinding Foreground}" Style="{DynamicResource ScrollThumbs}" />
                        </Track.Thumb>
                        <Track.IncreaseRepeatButton>
                            <RepeatButton x:Name="PageUp" Command="ScrollBar.PageDownCommand" Opacity="0" Focusable="false" />
                        </Track.IncreaseRepeatButton>
                        <Track.DecreaseRepeatButton>
                            <RepeatButton x:Name="PageDown" Command="ScrollBar.PageUpCommand" Opacity="0" Focusable="false" />
                        </Track.DecreaseRepeatButton>
                    </Track>
                </Grid>

                <ControlTemplate.Triggers>
                    <Trigger SourceName="Thumb" Property="IsMouseOver" Value="true">
                        <Setter Value="{DynamicResource ButtonSelectBrush}" TargetName="Thumb" Property="Background" />
                    </Trigger>
                    <Trigger SourceName="Thumb" Property="IsDragging" Value="true">
                        <Setter Value="{DynamicResource DarkBrush}" TargetName="Thumb" Property="Background" />
                    </Trigger>

                    <Trigger Property="IsEnabled" Value="false">
                        <Setter TargetName="Thumb" Property="Visibility" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="Orientation" Value="Horizontal">
                        <Setter TargetName="GridRoot" Property="LayoutTransform">
                            <Setter.Value>
                                <RotateTransform Angle="-90" />
                            </Setter.Value>
                        </Setter>
                        <Setter TargetName="PART_Track" Property="LayoutTransform">
                            <Setter.Value>
                                <RotateTransform Angle="-90" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Width" Value="Auto" />
                        <Setter Property="Height" Value="8" />
                        <Setter TargetName="Thumb" Property="Tag" Value="Horizontal" />
                        <Setter TargetName="PageDown" Property="Command" Value="ScrollBar.PageLeftCommand" />
                        <Setter TargetName="PageUp" Property="Command" Value="ScrollBar.PageRightCommand" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-11T08:20:07.180

它不是很漂亮，老实说我不记得它是从哪里来的，有一些类似于你在我的一个项目中所追求的东西，可能有很多不需要或不正确的风格但是不妨试一试。

```
 <!--Scrollbar Thumbs-->
        <Style x:Key="ScrollThumbs" TargetType="{x:Type Thumb}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Grid x:Name="Grid">
                            <Rectangle HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="Auto" Height="Auto" Fill="Transparent" />
                            <Border x:Name="Rectangle1" CornerRadius="10" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="Auto" Height="Auto"  Background="{TemplateBinding Background}" />
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Tag" Value="Horizontal">
                                <Setter TargetName="Rectangle1" Property="Width" Value="Auto" />
                                <Setter TargetName="Rectangle1" Property="Height" Value="7" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--ScrollBars-->
        <Style x:Key="{x:Type ScrollBar}" TargetType="{x:Type ScrollBar}">
            <Setter Property="Stylus.IsFlicksEnabled" Value="false" />
            <Setter Property="Foreground" Value="LightGray" />
            <Setter Property="Background" Value="DarkGray" />
            <Setter Property="Width" Value="10" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollBar}">
                        <Grid x:Name="GridRoot" Width="19" Background="{TemplateBinding Background}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="0.00001*" />
                            </Grid.RowDefinitions>

                            <Track x:Name="PART_Track" Grid.Row="0" IsDirectionReversed="true" Focusable="false">
                                <Track.Thumb>
                                    <Thumb x:Name="Thumb" Background="{TemplateBinding Foreground}" Style="{DynamicResource ScrollThumbs}" />
                                </Track.Thumb>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton x:Name="PageUp" Command="ScrollBar.PageDownCommand" Opacity="0" Focusable="false" />
                                </Track.IncreaseRepeatButton>
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton x:Name="PageDown" Command="ScrollBar.PageUpCommand" Opacity="0" Focusable="false" />
                                </Track.DecreaseRepeatButton>
                            </Track>
                        </Grid>

                        <ControlTemplate.Triggers>
                            <Trigger SourceName="Thumb" Property="IsMouseOver" Value="true">
                                <Setter Value="{DynamicResource ButtonSelectBrush}" TargetName="Thumb" Property="Background" />
                            </Trigger>
                            <Trigger SourceName="Thumb" Property="IsDragging" Value="true">
                                <Setter Value="{DynamicResource DarkBrush}" TargetName="Thumb" Property="Background" />
                            </Trigger>

                            <Trigger Property="IsEnabled" Value="false">
                                <Setter TargetName="Thumb" Property="Visibility" Value="Collapsed" />
                            </Trigger>
                            <Trigger Property="Orientation" Value="Horizontal">
                                <Setter TargetName="GridRoot" Property="LayoutTransform">
                                    <Setter.Value>
                                        <RotateTransform Angle="-90" />
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="PART_Track" Property="LayoutTransform">
                                    <Setter.Value>
                                        <RotateTransform Angle="-90" />
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Width" Value="Auto" />
                                <Setter Property="Height" Value="12" />
                                <Setter TargetName="Thumb" Property="Tag" Value="Horizontal" />
                                <Setter TargetName="PageDown" Property="Command" Value="ScrollBar.PageLeftCommand" />
                                <Setter TargetName="PageUp" Property="Command" Value="ScrollBar.PageRightCommand" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

# javascript - 使用护照的 Node.js 用户身份验证

> ID：10969299
> 
> 赞同：8
> 
> 时间：2012-06-10T14:01:35.660
> 
> 标签：javascript, node.js, express, coffeescript, passport.js

（使用序列化函数更新代码 - 仍然重定向到 /failedRedirect）

我正在尝试使用护照包进行简单的用户名/密码身份验证，但失败了。在下面的示例中，我尝试通过基本上始终返回有效身份验证（无论通过什么）来验证身份验证是否有效，但由于某种原因它失败并且护照重定向到失败的登录链接。

如果有人可以帮助我弄清楚如何让这个例子简单地验证任何东西，我应该能够从那里进行管理。

咖啡脚本中的代码是：

```
express = require "express"
passport = require "passport"
LocalStrategy = require("passport-local").Strategy

passport.use(new LocalStrategy( (username, password, done) ->
  console.log "LocalStrategy invoked"
  done(null, {id: 1, name: "Marius"})
))

passport.serializeUser (user, done) ->
  done null, user

passport.deserializeUser (obj, done) ->
  done null, obj

app = express.createServer()

app.configure ->
  app.use express.bodyParser()
  app.use express.static("./public")
  app.use express.cookieParser("SOMESECRET")
  app.use express.session
    secret: "SOMESECRET"
    cookie:
      maxAge: 60000
  app.use passport.initialize()
  app.use passport.session()
  app.set "view", "./srv/views"
  app.set "view engine", "jade"

app.get "/login", (req, res) ->
  res.send "login page"

app.post "/login", passport.authenticate("local",
  failureRedirect: "/failedRedirect"
  successRedirect: "/successRedirect"
  failureFlash: true)

app.listen 8082 
```

**已解决：**好的，我相信有几个原因导致我无法让它工作。序列化的东西可能是一个（我没有测试过），但由于 Jared 说需要它们，我将它们留在里面（他是 Passport 的作者）。另一个混淆可能与 express 版本和我对 npm 的混淆有关。我相信我测试了最新的 express v2，但我也测试了我现在正在运行的 v3。对于版本 3，您可能还应该查看`connect-flash`Github 上的模块，因为 Jared 示例中使用的一些“闪存”内容已从 express v3 中移出（因此模块将其放回......）。最后，确保使用正确命名的输入名称（默认情况下）`username`发布。`password`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T18:58:15.253

在我看来，您缺少必要的用户序列化逻辑来建立登录会话。如果我将这两个函数添加到 JavaScript 代码中，它可以工作：

```
passport.serializeUser(function(user, done) {
  done(null, user);
});

passport.deserializeUser(function(obj, done) {
  done(null, obj);
}); 
```

您需要根据需要对用户进行序列化。详情在本页底部：http: [//passportjs.org/guide/configuration.html](http://passportjs.org/guide/configuration.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-11T14:01:17.703

对于我看到的本地密码策略有问题的人来说，post 变量名称往往是最大的问题。它可能在文档中应该是大而粗的，并且可能应该有配置值来更改它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-30T11:27:41.903

我已经从这个链接成功地完成了 [http://danialk.github.io/blog/2013/02/23/authentication-using-passportjs/从](http://danialk.github.io/blog/2013/02/23/authentication-using-passportjs/)[https://github.com/DanialK/PassportJS-Authentication](https://github.com/DanialK/PassportJS-Authentication) location 下载示例代码

在 routes.js 更改代码中只需要更改一项

```
app.post("/login" ,passport.authenticate('local',{successRedirect : "/",failureRedirect : "/login",  })); 
```

到 - - - - - - - - - - - - - - -

```
app.post("/login" ,passport.authenticate('local',{failureRedirect : "/login"}), function(req,res){ res.render('your home page here', {user : req.user });}); 
```

# node.js - node.js 中的 Mongodb 安全性

> ID：10969301
> 
> 赞同：10
> 
> 时间：2012-06-10T14:01:59.363
> 
> 标签：node.js, mongodb, security, code-injection, database

例如 MySQL 数据库存在已知的安全问题。这如何适用于 NoSQL 数据库？例如注入、xss 等。在使用 NoSQL 数据库时，您必须采取哪些安全措施？特别是关于 MongoDB（使用[node-mongodb-native](https://github.com/mongodb/node-mongodb-native)）和 Node.js（使用 Express）

如果是这样，是否有任何 Node/Express 模块有助于防止这种情况发生？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T14:09:07.503

NodeJS、MongoDB（以及其他一些大量使用 javascript 的 NoSQL 数据库）存在特定问题：*serverside javascript injection*。查看[此处](http://nosql.mypopescu.com/post/14453905385/attacking-nosql-and-node-js-server-side-javascript)和[此处 (pdf)](http://media.blackhat.com/bh-us-11/Sullivan/BH_US_11_Sullivan_Server_Side_WP.pdf)了解详细信息。它更像是 SQL 注入而不是 XSS。

很快，当您期望只有 JSON 时，攻击者将 javascript 发送到您的 nodejs 或 mongodb。所以理论上坏人可以让你的服务宕机（DOS），访问你的数据甚至文件系统。

为防止此类攻击，您必须：

1.  通过将脚本与用户输入连接起来，避免创建“临时”JavaScript 命令。
2.  使用正则表达式验证 SSJS 命令中使用的用户输入。
3.  避免使用 JavaScript eval 命令。特别是，在解析 JSON 输入时，请使用更安全的替代方法，例如 JSON.parse。

# objective-c - iPad和iPhone使用不同图像时如何最小化代码？

> ID：10969302
> 
> 赞同：7
> 
> 时间：2012-06-10T14:01:59.577
> 
> 标签：objective-c, ios

当我意识到我将不得不（可能？）为每个 UI 元素编写条件时，我几乎完成了我的应用程序的 iPhone 版本，因为它们使用不同的图形。这将使我的代码非常混乱。我有 15 种不同的自定义 UI 控件，我无法想象为每种方法设置条件（“如果 ipad 加载 image_ipad，如果 iphone 加载 image_iphone”）是最好的方法。任何人都可以提出一种特殊的技术来处理这个问题吗？或者有没有办法在视网膜和常规之间命名图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T14:14:14.883

您只需要传递基本图像名称..假设我们的图像名称是“Apple.png”，然后您将像这样编写获取图像名称`UIImage *image = [UIImage ImageNamed:@"Apple.png"]`，并且以下情况的图像名称将是：

1\. **iPad** > put ~ipad ，图片名称将是`"Apple~ipad.png"`

2\. **iPhone** > put ~iphone ，图片名称为`"Apple~iphone.png"`

**3.对于retina** display > put @2x ，图像名称将是`"Apple@2x.png"`

4.如果你有适用于**ipad和 iphone 的***视网膜*显示的不同图像，它将是这样的，，对于 iPad `"Apple@2x~ipad.png"`，，对于 iPhone`"Apple@2x~iphone.png"`

如果你这样命名它，iOS 将检测到最匹配的图像名称并加载它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:14:06.863

如果您想拥有视网膜和非视网膜版本，您只需在捆绑包中保存资产的两个版本。如果您的资产被称为 button.png 您保存：

-button.png 用于非视网膜版本。-button@2x.png 用于视网膜显示版本。

你的代码：

```
UIImage * myImage = [UIImage imageNamed:@"button.png"]; 
```

如果视网膜，系统将自动检查@2x.png，否则它将为非视网膜选择另一个

您可以将 myImage 放在您的自定义 UI 中，其余的由操作系统为您完成 ;-)

# jquery - 背景图像在 chrome 中不起作用

> ID：10969306
> 
> 赞同：1
> 
> 时间：2012-06-10T14:03:13.590
> 
> 标签：jquery, css, firefox, google-chrome

```
 .button {
        background: transparent url("/assets/LoD-Button-Normal.png") no-repeat bottom right;
        width: 110px;
        height: 30px;
        display: block;
        background-position: bottom right; 
        text-align:center;
    }

    .button_click { 
      background: transparent url("/assets/LoD-Button-Click.png") no-repeat bottom right;
      width: 110px;
      height: 30px;
      display: block;
      background-position: bottom right;
    }

    $(".button").click(function(){
      $(this).removeClass("button").addClass("button_click");   
    })

    <a class="button" href="/link"> Button </a> 
```

当我单击按钮时。它在 Firefox 上更改背景图像，但在 chrome 上不起作用。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:54:30.953

该代码似乎很好，因此没有任何错误，可能是 chrome 在更改 bg 图像之前正在重定向。

试试这个：

```
$(".button").click(function(e){
  e.preventDefault();
  $(this).removeClass("button").addClass("button_click");
  location.href = $(this).attr('href'); 
  // if for some reason this isn't working you can call setTimeout with the location.href
}); 
```

# jquery - 将css应用于对话框中的输入

> ID：10969309
> 
> 赞同：2
> 
> 时间：2012-06-10T14:03:44.573
> 
> 标签：jquery, css, jquery-ui

我有两个输入。我希望它们在包含默认值时具有灰色文本。第一个输入有效，但是，当输入在对话框中时，最初不会应用 CSS。我想我可以在打开对话框时通过 jQuery 应用 CSS，但是，我似乎不需要这样做。有什么建议么？

[http://jsfiddle.net/pwdB5/](http://jsfiddle.net/pwdB5/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /> 
<title>Testing</title>  
<script src="http://code.jquery.com/jquery-latest.js"></script> 
<link type="text/css" href="http://jqueryui.com/latest/themes/base/ui.all.css" rel="stylesheet" />
<script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/jquery-ui.js"></script> 
<style type="text/css">
input.filter {
    color: #929292;
    font-size: 0.7em;
    width: 120px;
}
</style> 
<script> 
$(function(){

    $('.default-value').each(function() {
        var $t=$(this), default_value = $t.value;
        $t.focus(function() {
            $t.css('color','black');
            if(this.value == default_value) {
                $t.val('');
            }
        });
        $t.blur(function() {
            $t.css('color','#929292');
            if($.trim(this.value) == '') {
                $t.val(default_value);
            }
        });
    });

    $("#open").click(function() {$("#dialog").dialog("open");});
    $("#dialog").dialog({
        autoOpen    : false,
        modal       : true,
        open : function() {$('#dialog').find('input.filter').val('look up trade');}
    });

});
</script>
</head>

<body>
<button id="open">Click</button>
<input type="text" value="default value2" class="default-value filter" name="value2" />

<div id="dialog" title="dialog">
<input type="text" value="default value1" class="default-value filter" name="value1" />
</div>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:29:08.667

看起来，`style`没有应用 - 因为，该领域正在得到关注。

尝试这个：

```
$("#dialog").dialog({
    autoOpen    : false,
    modal       : true,
    open : function() {$('#dialog').find('input.filter').val('look up trade').blur();}
}); 
```

# android - Android：OnNewIntent 在膨胀之前需要自定义视图大小

> ID：10969310
> 
> 赞同：0
> 
> 时间：2012-06-10T14:04:02.123
> 
> 标签：android, android-layout, android-intent

我只想计算一些线位置以在 onNewIntend(Intent intent) 方法中绘制。给定一些纬度/经度，我必须将它们放入自定义视图中。对于这个计算 - 这是我的问题 - 我需要为 0 的 myView.getHeight()/getWidth() 方法，因为在 onCreate(...) 之前调用了 onNewIntend(...)。：/

你有什么想法来解决这个问题吗？

我已经试过了...

```
@Override
public void onNewIntent(Intent intent) {
    final String action = intent.getAction();

    if (Intent.ACTION_RUN.equals(action)) {         

        // @Todo: Here should be checked if view is already inflated ...
        setContentView(R.layout.collector);
        int x = mGraphView.getMeasuredHeight(); 
        ... 
```

...这也产生x = 0

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:13:38.197

每当视图父级要求它测量自身时，在您的自定义视图中覆盖 onMeasure 以获取宽度和高度。您可以添加布局侦听器

[http://developer.android.com/reference/android/view/View.OnLayoutChangeListener.html](http://developer.android.com/reference/android/view/View.OnLayoutChangeListener.html)

```
@Override 
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
   int parentWidth = MeasureSpec.getSize(widthMeasureSpec);
   int parentHeight = MeasureSpec.getSize(heightMeasureSpec);
   this.setMeasuredDimension(parentWidth/2, parentHeight);
   this.setLayoutParams(new *ParentLayoutType*.LayoutParams(parentWidth/2,parentHeight));
   super.onMeasure(widthMeasureSpec, heightMeasureSpec); 
```

}

# html - 隐藏文件的实际链接

> ID：10969312
> 
> 赞同：0
> 
> 时间：2012-06-10T14:04:05.507
> 
> 标签：html, hyperlink

我有一个包含文件链接的图像。当您单击它时，将开始下载该文件，您可以在下载管理器软件等中看到它的链接。就像这样： [https](https://stackoverflow.com/File.rar) ://stackoverflow.com/File.rar 我想隐藏这个链接，用户不能看到它，只有他下载它。如何使用 HTML 来做到这一点？

这是该图像及其超链接的示例：

```
<a href="https://stackoverflow.com/File.rar"><img src="https://stackoverflow.com/downloadbutton.gif" alt="" width="128" height="41" /></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:08:18.983

你不能那样做。用户所见即所得。

您*可以*`window.status`做的是通过 JavaScript设置属性来提供替代状态栏文本。但是如果你没有很好的理由这样做，你的用户会讨厌你*（*而且“隐藏链接”对用户来说*不是*一个很好的理由！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:14:03.767

仅使用 HTML 是不可能的。为了获得您想要的效果，您需要使用一些脚本。

以下文章提供了一些解决方案：

*   [PHP：隐藏真实文件 URL 并通过 PHP 脚本提供下载](http://www.kavoir.com/2009/05/php-hide-the-real-file-url-and-provide-download-via-a-php-script.html)
*   [需要一个保护下载链接的好脚本或会员下载管理器脚本](http://www.webhostingtalk.com/showthread.php?t=1144355)

话虽如此，您正在尝试做的似乎是一种解决方法。如果您能更清楚地说明实际问题，我认为可以有更好的解决方案。这个问题的最终目标是什么？你为什么要隐藏网址？

# jquery - jQuery 滑动侧边栏

> ID：10969325
> 
> 赞同：0
> 
> 时间：2012-06-10T14:05:36.760
> 
> 标签：jquery, jquery-animate

我正在研究一些 jquery，它将在悬停时在窗口两侧滑动 2 100% 侧边栏（有一个 10px 覆盖区域）。

如果任一条是硬编码的，我可以让它工作，但是，我正在尝试组合代码，当我这样做时，脚本不起作用。我不确定它是否与将值传递给 .animate() 函数或什么有关。我的控制台中没有收到任何错误消息。

这是代码的小提琴：http: [//jsfiddle.net/u3XGF/](http://jsfiddle.net/u3XGF/)

或者，也许这是一件简单的事情，有人会立即发现：

**HTML**

```
<div id="sb-left" class="sidebar"></div>
<div id="workspace">
<div id="sb-right" class="sidebar"></div>​ 
```

**CSS**

```
html, body { width: 100%; height: 100%; overflow: hidden; }

.sidebar { position: absolute; height: 100%; z-index: 99; }
.sidebar#sb-left { width: 300px; left: -290px; background: red; }
.sidebar#sb-right { width: 175px; right: -165px; background: green; }

#workspace { margin: 0 10px; height: 100%; background: #1a1a1a; z-index: 1; } 
```

**jQuery**

```
$(function(){

  $('.sidebar').each(function(){

    // Slide
    if($(this).attr('id')=='sb_left'){ var side='left'; var width=300; var push_margin='margin-left'; }
    else{ var side='right'; var width=175; var push_margin='margin-right'; }

    $(this).hover(function() {
        var timeout = $(this).data("timeout");
        if(timeout){ clearTimeout(timeout); }
        $(this).animate({side:'0px'},300,'easeOutQuart');
        $('#workspace').animate({push_margin:width+'px'},300,'easeOutQuart');
     },function() {
        $(this).data("timeout", setTimeout($.proxy(function() {
            $(this).animate({side:'-'+(width-10)+'px'},300,'easeOutQuart');
            $('#workspace').animate({push_margin:'10px'},300,'easeOutQuart');
        },this), 300));
     });

  });

});​ 
```

# vb.net - 在 VB.net 中打开关联文件

> ID：10969329
> 
> 赞同：1
> 
> 时间：2012-06-10T14:06:05.740
> 
> 标签：vb.net, file

我正在尝试将多个文件与我的应用程序关联我已经完成了关联文件但是当我尝试打开多个文件应用程序只打开一个文件时，在表单加载事件中使用此代码打开文件 iam

```
 For Each arg In My.Application.CommandLineArgs
            open_File(return_rtb, arg)
        Next arg 
```

第二个问题是 myApp 是单实例应用程序，如果用户在 myApp 第一次像表单加载事件一样运行时双击文件，如何捕获。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:33:20.053

这是 VB.NET 的内置功能，由应用程序框架选项提供，默认情况下为 Winforms 应用程序打开。项目+属性，应用程序选项卡，勾选“制作单实例应用程序”选项。

使用 My.Application.StartupNextInstance 事件。[此事件的MSDN 库文章](http://msdn.microsoft.com/en-us/library/b9z4eyh8%28v=VS.80%29.aspx)中的代码片段向您展示了如何使用 e.CommandLine 属性来发现传递给第二个实例的文件的路径。

# cakephp - CakePHP Ajax 表单提交与文件上传

> ID：10969333
> 
> 赞同：2
> 
> 时间：2012-06-10T14:06:58.117
> 
> 标签：cakephp, cakephp-1.3, cakephp-model

我正在使用 AJAX 表单提交的蛋糕 PHP 文件上传。但这不是工作。$_FILES 数组中没有任何内容。但是当我使用普通表单提交时，它工作正常，没有任何问题。我正在使用以下代码使用 AJAX 提交表单

```
 echo $this->Form->create('AlbumDetail',array('enctype' => 'multipart/form-data','type'=>'file'));

    echo $form->input('Image',array("type" => "file"));  

    echo $ajax->submit('Add Album', array('url'=> array('controller'=>'album_details', 'action'=>'addalbum'), 'update' => 'album_update')); 
```

尽管 ，

```
echo $this->Form->create('AlbumDetail', array('enctype' => 'multipart/form-data', 'controller' => 'album_details', 'action' => 'addalbum', 'type' => 'file'));

echo $form->input('Image',array("type" => "file")); 

echo "<input name='submit' type='submit' value='Add Album'>"; 
```

工作没有任何问题，并且 $_FILES 数组正在返回值。任何人都可以做一点帮助...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T08:31:21.333

正如 void0 所提到的，您不能使用 Ajax 发布文件。[这个类似的问题](https://stackoverflow.com/a/166267/7032) 有一些解决方法和建议的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:40:30.097

看看这个 CakePHP 插件：[https ://github.com/srs81/CakePHP-AjaxMultiUpload](https://github.com/srs81/CakePHP-AjaxMultiUpload)

我认为这可能正是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-22T07:12:07.767

现在是可能的。

这就是我做到这一点的方式。首先，我使用 Uploadable Behavior 来处理从以下位置上传的文件：[https ://github.com/cakemanager/cakephp-utils](https://github.com/cakemanager/cakephp-utils)

模型：

```
$this->addBehavior('Utils.Uploadable', [
       'file' => [
       'removeFileOnUpdate' => false,
       'field' => 'file_tmp',
       'path' => dirname(ROOT).'{DS}invoices{DS}', 
       'fileName' => '{field}'
       ]
    ]); 
```

控制器：

```
public function ajaxInvoice() {

    if ($this->request->is('ajax')) {
        $this->autoRender = false;
        $this->Invoices->deleteAll(['order_id' => $this->request->data['order_id']]);

        $invoice = $this->Invoices->newEntity();

        $invoice->order_id = $this->request->data['order_id'];
        $invoice->file_tmp = $this->request->data['file']['name'];

        $invoice = $this->Invoices->patchEntity($invoice, $this->request->getData());

        $this->Invoices->save($invoice);
        $this->response->body($invoice);

    }
} 
```

模板：

```
<?php use Cake\Routing\Router; ?>

<input type="file" class="upload<?= $id ?> hidden"><a data-id="<?= $id ?>" class="upload">Upload</a>

<script type = "text/javascript" > $(document).ready(function() {
    $('.upload').on('click', function() {
        var id = $(this).attr('data-id');
        $('.upload' + id + '').click();
        $('.upload' + id + '').change(function(e) {
            e.stopImmediatePropagation();
            var form = new FormData();
            form.append('file', $(this)[0].files[0]);
            form.append('order_id', id);
            $.ajax({
                type: "POST",
                url: '<?php echo Router::url(array('controller ' => 'Invoices ', 'action ' => 'ajaxInvoice ')); ?>',
                data: form,
                cache: false,
                contentType: false,
                processData: false,
                success: function(data, status, xhr) {
                    var response = JSON.parse(xhr.responseText);
                },
            });
        });
    });
}); 
</script> 
```

# html - 使 youtube.com/embed URL 在 iOS 上工作

> ID：10969334
> 
> 赞同：19
> 
> 时间：2012-06-10T14:06:59.737
> 
> 标签：html, ios, youtube, html5-video

对于 YouTube 上的给定视频，您可以在任何 iOS 设备上访问 http://youtube.com/watch?v=[code] 来观看该视频。

但是，如果您使用 http://youtube.com/embed/[code] URL（例如，在页面上的 iframe 或[Colorbox](http://www.jacklmoore.com/colorbox)模式中），它将无法在 iOS 上播放。

例如，如果您使用这样的代码：

```
<iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/embed/VIDEO_ID" frameborder="0"> 
```

你只会看到一个错误：

> 您的浏览器目前无法识别任何可用的视频格式。[单击此处访问我们关于 HTML5 视频的常见问题。](http://example.com)

雪上加霜的是，该链接在 iOS 上不可点击，所以我不知道该链接到哪个页面。[YouTube 上](http://youtube.com/html5)有一个HTML5 页面，但它并没有说什么特别有用或令人惊讶。

是否有可以在 iOS 上按预期工作的 iframe 嵌入语法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-30T00:56:43.970

Try this, it just works:

```
<object>
    <param name="movie" value="http://www.youtube.com/v/[VIDEO_ID]"></param>
    <embed src="http://www.youtube.com/v/[VIDEO_ID]" type="application/x-shockwave-flash"></embed>
</object> 
```

**Edit**: It works because Apple replaces the html tag with an embedded native movie player that can play the youtube video.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T01:44:00.033

考虑使用[MediaElement.js](http://mediaelementjs.com/)。它可以包装 youtube 视频以在 ios 上显示为 html5，并为其他设备/浏览器类型提供 Flash 后备。

源代码提供的演示之一显示了这一点，而且相当简单：

```
<video width="640" height="360" id="player1">
    <source type="video/youtube" src="http://www.youtube.com/watch?v=nOEw9iiopwI" />
</video>

<script>
    $('video').mediaelementplayer({
        success: function(media, node, player) {
            $('#' + node.id + '-mode').html('mode: ' + media.pluginType);
    }
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-01T00:12:08.053

@Hejazi 的回答对我不起作用。这做到了：

```
 <iframe id="myythtml5player" frameborder="0" allowfullscreen="1" allow="autoplay; encrypted-media" width="560" height="315"
    src="https://www.youtube.com/embed/XdMzPdgg6rs?widget_referrer=https%3A%2F%2Ftinybitegames.com&amp;enablejsapi=1&amp;origin=https%3A%2F%2Ftinybitegames.com&amp;widgetid=1" data-tooltip-align="b,c" data-tooltip="YouTube video player" aria-label="YouTube video player" data-title="YouTube video player"></iframe> 
```

此代码是从 YouTube 的演示站点复制的：[https ://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-03-13T16:24:15.913

我有一个使用 youtube api v3 查找视频然后播放的网站。我在 gdrive 中托管网络。获取链接，将链接传递到 FIREFOX ios 应用的地址栏。将此 html 保存在 FF 应用程序中。它的工作原理与使用桌面时一样好。但是 ios FF 非常不友好，它不会将 html 源代码共享给其他任何地方。

比FF好，可以用ios Aloha浏览器。最重要的是，将 html 保存到 ALOHA 后，将其共享到 ios KODER html 编辑器中。在 KODER 中，您可以编辑 html（例如，添加 <base href=“...”> 等...），您可以完美地呈现这个 html。最后，您可以将 html 共享（上传）到 Dropbox，然后将其导出到 gDrive。

# html - 获取粉丝页面上的朋友列表，而不是个人页面

> ID：10969336
> 
> 赞同：2
> 
> 时间：2012-06-10T14:07:06.007
> 
> 标签：html, facebook, facebook-graph-api, facebook-javascript-sdk

我使用 js sdk 毫无问题地获取我的朋友列表。我得到的名单来自我的 facebook 个人页面 (Tony Easterbird)

我还有一个粉丝类型的页面，叫做 Katahdin Sheep。我想得到一个喜欢这个页面的人的列表。（卡塔丁羊）。

两个页面的 appID 相同，所以我对如何获取列表有点困惑。

如果尝试过：

```
 FB.api('me/KatahdinSheep', function(response){... etc 
```

并且：

```
 FB.api ('Katahdin.Sheep', function(response){ ... etc 
```

你能引导我朝着正确的方向前进吗？非常感谢您的帮助。

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:15:17.903

我不相信您可以通过`page_id`（使用API​​）检索用户列表。
我相信您唯一能做的就是`user_id`针对 a测试特定内容，`page_id`以查看**该**用户是否已经喜欢您的页面。

通过 Facebook 网站，你可以准确地看到谁喜欢你的页面，但我相信 Facebook 已经通过这种方式限制了 API，以防止应用程序进行数据挖掘。

# ruby-on-rails - friendly_id，种子数据库，未定义的方法“friendly_id”

> ID：10969341
> 
> 赞同：1
> 
> 时间：2012-06-10T14:07:45.800
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, friendly-id

在 Rails 3 应用程序中，我正在尝试为使用的模型编写种子（在 db/seeds.rb 中）[`friendly_id`](https://github.com/norman/friendly_id)：

```
# /db/seeds.rb
Page.create(:title => "Default page", :content => "Default content of the default page") 
```

当我运行`rake db:seed`任务失败。以下是运行时的要点`--trace`：

```
rake aborted!
undefined local variable or method `friendly_id' for #<Class:0x007fa1de992ac8>
/Users/cornelius/.rvm/gems/ruby-1.9.2-p290@usg/gems/activerecord-3.2.5/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
/Users/cornelius/Sites/usg/app/models/page.rb:2:in `<class:Page>'
/Users/cornelius/Sites/usg/app/models/page.rb:1:in `<top (required)>'
... 
```

这是模型：

```
# /app/models/page.rb
class Page < ActiveRecord::Base
  extend friendly_id
  friendly_id :title, use: :slugged
end 
```

我`friendly_id`用作宝石：

```
# /Gemfile
gem 'friendly_id' 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:45:54.190

在您的模型中，您需要正确扩展类，类名是 FriendlyId，而不是friendly_id。

作为 Ruby 和 Rails 中的约定，类名是 CamelCase，文件名是 snake_case。

您的页面模型应为：

```
class Page < ActiveRecord::Base
  extend FriendlyId
  friendly_id :title, use: :slugged
end 
```

# php - 解析错误：语法错误，意外的 '.'，期待 ',' 或 ';'

> ID：10969342
> 
> 赞同：18
> 
> 时间：2012-06-10T14:07:48.297
> 
> 标签：php

这件事让我很烦。我收到 Parse 错误：语法错误，意外的 '.'，期待 ',' 或 ';' 在这条线上

```
public static $user_table = TABLE_PREFIX . 'users'; 
```

TABLE_PREFIX 是由定义函数创建的常量

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-10T14:10:12.727

静态类属性在编译时初始化。初始化静态类属性时，不能使用常量`TABLE_PREFIX`与字符串文字连接，因为直到运行时才知道常量的值。相反，在构造函数中初始化它：

```
public static $user_table;

// Initialize it in the constructor 
public function __construct() {
  self::$user_table = TABLE_PREFIX . 'users';
}

// If you only plan to use it in static context rather than instance context 
// (won't call a constructor) initialize it in a static function instead 
public static function init() {
  self::$user_table = TABLE_PREFIX . 'users';
} 
```

[http://us2.php.net/manual/en/language.oop5.static.php](http://us2.php.net/manual/en/language.oop5.static.php)

> 与任何其他 PHP 静态变量一样，静态属性只能使用文字或常量进行初始化；不允许表达。因此，虽然您可以将静态属性初始化为整数或数组（例如），但您不能将其初始化为另一个变量、函数返回值或对象。

### PHP >= 5.6 的更新

PHP 5.6 对表达式的支持有限：

> 在 PHP 5.6 及更高版本中，同样的规则适用于 const 表达式：一些有限的表达式是可能的，只要它们可以在编译时计算。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-10T14:10:20.940

点是字符串连接运算符。它是一个运行时函数，因此不能用于声明静态（解析时间）值。

# nhibernate - NHibernate：如何设置组件中的属性 ID

> ID：10969344
> 
> 赞同：1
> 
> 时间：2012-06-10T14:08:02.743
> 
> 标签：nhibernate, fluent-nhibernate, generator

我想（通过 Fluent NHibernate）设置要生成的 Id：已分配。映射的 Id 是包含在实体内部组件中的属性，如下所示：

```
public class Group
{
    public Group()
    {
    }

    public Group(GroupIdentifier identifier)
    {
       GroupIdentifier = identifier;
    }

    [DataMember]
    public virtual GroupIdentifier GroupIdentifier { get; set; }

    [DataMember]
    public virtual IList<X> Objects { get; set; }
}

public class GroupIdentifier
{
    protected ProtectionGroupIdentifier()
    {
    }

    [DataMember]
    public virtual Guid GroupGuid 
    { get; set; }

} 
```

我使用以下代码来定义实体 ID：

```
.Override<Group>(obj => obj.Id(x => x.GroupIdentifier.GroupGuid).GeneratedBy.Assigned()) 
```

当我尝试保存实体时，出现以下错误：抛出异常。NHibernate.PropertyNotFoundException：NHibernate.PropertyNotFoundException：在类中找不到属性“GroupGuid”的吸气剂...

如果我将 GroupGuid 移动到 Group Entity 并设置 Id - 它正在工作。但我在 GroupIdentifier 组件中需要它。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:26:10.423

一旦将 GroupGuid 封装在 GroupIdentifier 类中，您就不再映射 guid 类型，而是自定义类型。NHibernate 需要知道如何将该自定义类型映射到数据库。您需要告诉它如何使用 NHibernate[自定义值类型](http://www.nhforge.org/doc/nh/en/index.html#mapping-types-custom)。

要了解有关 NHibernate 类型系统的更多信息，请阅读[这篇文章](http://dotnet.dzone.com/articles/understanding-nhibernate-type)。谷歌搜索可以为您提供[更多](http://blog.miraclespain.com/archive/2008/Mar-18.html) [信息](https://stackoverflow.com/questions/1565056/how-to-implement-correctly-iusertype)。

但是，由于您计划将其用于 ID 属性，因此您最好仔细检查您的要求：[为 id 属性使用自定义类型](https://stackoverflow.com/questions/9444056/using-custom-type-for-the-id-property)。显然这不是一个好主意。

# javascript - 网站 iframe 到 windows 7 小工具

> ID：10969346
> 
> 赞同：0
> 
> 时间：2012-06-10T14:08:14.727
> 
> 标签：javascript, jquery, html, windows-desktop-gadgets

我有一个用于存放我的小工具文件的网站，并且我制作了一个带有 iframe 的 Windows 7 小工具来连接它。我遇到的问题是我需要以某种方式使用 javascript 发送消息。对我来说最好的选择是尝试 parent.loadPage('page') 并将其从 iframe（在不同的域上运行）发送到 windows 7 小工具的功能，但它不起作用。有没有人对此有任何想法，将不胜感激。

只是为了澄清 iframe 正在连接到一个网站，例如 (www.example.com/gadget/page.php) 该页面包含一个使用 onClick parent.loadPage 的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:54:36.830

鉴于没有直接的答案，让我总结一下......

简短的回答是“不，你不能”。

更长的答案是该小工具实际上是一个浏览器，因此由于[跨站点脚本 (XSS) 保护](https://stackoverflow.com/questions/239194/how-does-xss-work)，它会阻止 iFrame 和父级之间的任何 javascript 通信。

相反（假设您可以控制要在 iFrame 中显示的内容），您应该着眼于通过 AJAX 带回要显示的信息，并将其直接显示到小工具中。

# .net - 如何将网格捕获到不同大小的图像文件？

> ID：10969348
> 
> 赞同：1
> 
> 时间：2012-06-10T14:08:41.610
> 
> 标签：.net, wpf, c#-4.0

在 WPF 应用程序中，做这种事情的最佳方法是什么？如果我有一个 1000 x 1000 大小的网格，我如何将其保存为 200 x 200 大小的图像？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:41:52.447

稍微修改了我的答案，以便在这种情况下将
[大 WPF 画布切成许多小 PNG 图像](https://stackoverflow.com/questions/4453059/slice-large-wpf-canvas-into-many-small-png-images)

像这样称呼它

```
SaveFrameworkElementToPng(myGrid, 200, 200, "MyImage.png"); 
```

*SaveFrameworkElementToPng*

```
private void SaveFrameworkElementToPng(FrameworkElement frameworkElement,
                                       int width,
                                       int height,
                                       string filePath)
{
    BitmapImage bitmapImage = VisualToBitmapImage(frameworkElement);
    SaveImage(bitmapImage, width, height, filePath);
}

public BitmapImage VisualToBitmapImage(FrameworkElement frameworkElement)
{
    RenderTargetBitmap rtb = new RenderTargetBitmap((int)frameworkElement.ActualWidth,
                                                    (int)frameworkElement.ActualHeight,
                                                    96d,
                                                    96d,
                                                    PixelFormats.Default);
    rtb.Render(frameworkElement);

    MemoryStream stream = new MemoryStream();
    PngBitmapEncoder encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(rtb));
    encoder.Save(stream);

    BitmapImage bitmapImage = new BitmapImage();
    bitmapImage.BeginInit();
    bitmapImage.StreamSource = stream;
    bitmapImage.EndInit();

    return bitmapImage;
}

public void SaveImage(BitmapImage sourceImage,
                        int width,
                        int height,
                        string filePath)
{
    TransformGroup transformGroup = new TransformGroup();
    ScaleTransform scaleTransform = new ScaleTransform();
    scaleTransform.ScaleX = (double)width / sourceImage.PixelWidth;
    scaleTransform.ScaleY = (double)height / sourceImage.PixelHeight;
    transformGroup.Children.Add(scaleTransform);

    DrawingVisual vis = new DrawingVisual();
    DrawingContext cont = vis.RenderOpen();
    cont.PushTransform(transformGroup);
    cont.DrawImage(sourceImage, new Rect(new Size(sourceImage.PixelWidth, sourceImage.PixelHeight)));
    cont.Close();

    RenderTargetBitmap rtb = new RenderTargetBitmap(width, height, 96d, 96d, PixelFormats.Default);
    rtb.Render(vis);

    PngBitmapEncoder encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(rtb));

    using (FileStream stream = new FileStream(filePath, FileMode.Create))
    {
        encoder.Save(stream);
        stream.Close();
    }
} 
```

# objective-c - 如何从动作中返回对象

> ID：10969351
> 
> 赞同：0
> 
> 时间：2012-06-10T14:09:31.730
> 
> 标签：objective-c, sudzc

我正在尝试与 sudzc.com 肥皂客户端合作。

这就是我调用 Web 服务的方式：

```
Example_ManagerService* soapService = [[CCExample_ManagerService alloc] init];
[soapService getVehicle:self action:@selector(getVehicleHandler:) id: currentVeh_id.intValue]; 
```

现在这是调用 getVehicle 并将结果传递给操作 getVehicleHandler。到目前为止，一切都很好。但是，是否有可能从 getVehicleHandler 函数中获取结果？目前它正在返回无效：

```
- (void) getVehicleHandler: (id) value { 
```

我不想在处理程序中完成所有工作，而是将对象传递回调用对象。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:33:48.227

您可以在处理程序中设置对象，而不是返回值

```
- (void) getVehicleHandler: (id) value {
        ...do your staff...
        myObject=myNewValueForMyObject
} 
```

# android - 如何在第二个活动中访问 Arduino ADK

> ID：10969358
> 
> 赞同：0
> 
> 时间：2012-06-10T14:11:04.443
> 
> 标签：android, communication, arduino, adk, accessory

我目前正在使用 Arduino Mega ADK 和 Android 平板电脑。我的应用程序包含两个活动。在主要活动中，一切正常，我可以通过 Arduino Mega ADK 控制我的应用程序。如何设置第二个活动，以便它也可以访问 Arduino ADK？

第一个活动的代码在这里看起来就像[这个一样。](http://allaboutee.com/2011/12/31/arduino-adk-board-how-send-data-from-the-board-to-the-android-device/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:08:28.193

一种实用的方法是通过静态成员传递实例。

我会更进一步，将所有 ADK 启动/拆卸逻辑放入一个单独的类中，专门负责这一点。在这种情况下，您可以隔离逻辑并使整个事物成为[服务](http://developer.android.com/reference/android/app/Service.html)，然后与它进行通信，而无需直接接触 ADK，甚至不知道它的存在——这就是我在[项目](https://play.google.com/store/apps/details?id=net.sf.dz4.adk)中所做的。

# php - 数组名称 php 中的 POST 变量

> ID：10969361
> 
> 赞同：1
> 
> 时间：2012-06-10T14:11:16.383
> 
> 标签：php, arrays, variables, post

我无法让这段代码正常工作。我需要根据发布的变量获取一个数组。我想这很明显，但我找不到解决方案。

```
$choice1 =
    array (
        'order' => array (1,2,3,4,5),
            'settings' => (1,0,1)
    );
$choice2 =
    array (
        'order' => array (1,5,3,2,4),
            'settings' => (0,0,0)
    );
if(isset($_POST['choice'])) {
    $template_to_get = $_POST['choice'];
    $order_display = $template_to_get['order'];          // Here is the problem
    echo json_encode(array('order' => $order_display));
} 
```

也试过：

```
$order_display = $$template_to_get['order'];
$order_display = "$".$template_to_get['order'];
... 
```

如果我写了这一行，它可以工作，但我不知道它是选择 1 还是选择 2 将被发布：

```
$order_display = $choice1['order']; 
```

我想将 (1,2,3,4,5) 数组作为输出。（我简化了，但我有大约 20 个选项X）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:27:01.183

我会将您的选择分组到单个 num 索引数组中，而不是添加变量变量的气味：

```
$choices = array(
    1 => array(
        'order' => array (1,5,3,2,4),
        'settings' => (0,0,0),
    ),
    2 => array(
        'order' => array (1,2,3,4,5),
        'settings' => (1,0,1)
    ),
);

if(isset($_POST['choice'])) {
    $template_choice = $_POST['choice'];
    echo json_encode(array('order' => $choices[ $template_choice ]['order'] ));
} 
```

或者非常接近的东西。

编辑：请注意，如果您在 $_POST['choice'] 中发布字符串，同样可以正常工作，例如 'template_1' 可以发布并匹配到：

```
$choices = array(
    'template_1' => array( ... );
    ...
); 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:14:26.277

在这里找出你想要的东西有点困难，但我*认为*是这样的：

```
$order_display = $choice1[$_POST['choice']]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T14:19:41.823

```
foreach ($choice as $key => $val)
foreach ($val as $nval)
  echo $key . ' : ' . $nval . '<br />'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T14:24:22.230

```
$varname = 'choice' . $_POST['choice'];
$order_display = $$varname['order']; 
```

# multithreading - 如何检查 dispatch_async 是否已完成执行块

> ID：10969362
> 
> 赞同：0
> 
> 时间：2012-06-10T14:11:41.633
> 
> 标签：multithreading, dispatch-async

我有一个关于 dispatch_async 的问题。我想确保队列完成执行，因为我需要返回一个仅在块完成时获得的值。

```
 dispatch_queue_t downloadQueue = dispatch_queue_create("flickr downloader", NO); 

    dispatch_async(downloadQueue, ^{
        NSArray *photos = [[FlickrFetcher photosInPlace:self.listOfPlacesChosenPlaceDictionary maxResults:50] mutableCopy];
        dispatch_async(dispatch_get_main_queue(), ^{
            self.photoAtThePlace = photos; 
        });
    });

     dispatch_release(downloadQueue);
     return  [self.photoAtThePlace mutableCopy]; 
```

当前返回值将为零，因为调用 return 函数时 dispatch_async(dispatch_get_main_queue(), ^{..} 尚未执行。我如何确保在调用 return 之前完成？谢谢！

# xcode - 如何在 XCode 4 中使用 plist 填充 iOS TableView

> ID：10969364
> 
> 赞同：0
> 
> 时间：2012-06-10T14:11:59.743
> 
> 标签：xcode, plist, nsdictionary, tableview, cell

> **可能重复：**
> [如何使用 XCode 和 4 故事板使用 plist 内容填充 TableView](https://stackoverflow.com/questions/10950876/how-to-populate-a-tableview-with-plist-content-using-xcode-and-4-storyboard)

我已经完成了这些步骤：

1：做了一个tableviewcontroller（WinesViewController）

2：添加了一个带有标题和副标题标签的原型单元格：名称标签和地区标签。单元格标识符：wineCell

3：用 10 种酒（字典）制作 Wine.plist（字典键 = 酒名）

字典包含 18 个带有字符串键的字符串：Name、District、Image、Alcohol 等，以及 1 个名为 Price 和 Price 字符串的数组。

4：制作了 NSObject 的 Wine.h/.m 子类。.h：

```
#import <Foundation/Foundation.h>

@interface Wine : NSObject {

    NSString *wineImage;
    NSString *wineName;
    NSString *wineDistrict;
    NSString *wineCountry;
    NSString *wineFlag;
    NSString *wineFylde;
    NSString *wineFriskhet;
    NSString *wineGarvesyre;
    NSString *wineColor;
    NSString *wineSmell;
    NSString *wineTaste;
    NSString *wineSuits;
    NSString *wineGrapes;
    NSString *wineAlcohol;
    NSString *wineSugar;
    NSString *wineAcid;
    NSString *wineProducer;
    NSMutableArray *winePrice;
    NSString *wineFact;
}

@property (copy, nonatomic) NSString *wineImage;
@property (copy, nonatomic) NSString *wineName;
@property (copy, nonatomic) NSString *wineDistrict;
@property (copy, nonatomic) NSString *wineCountry;
@property (copy, nonatomic) NSString *wineFlag;
@property (copy, nonatomic) NSString *wineFylde;
@property (copy, nonatomic) NSString *wineFriskhet;
@property (copy, nonatomic) NSString *wineGarvesyre;
@property (copy, nonatomic) NSString *wineColor;
@property (copy, nonatomic) NSString *wineSmell;
@property (copy, nonatomic) NSString *wineTaste;
@property (copy, nonatomic) NSString *wineSuits;
@property (copy, nonatomic) NSString *wineGrapes;
@property (copy, nonatomic) NSString *wineAlcohol;
@property (copy, nonatomic) NSString *wineSugar;
@property (copy, nonatomic) NSString *wineAcid;
@property (copy, nonatomic) NSString *wineProducer;
@property (retain, nonatomic) NSMutableArray *winePrice;
@property (copy, nonatomic) NSString *wineFact;

@end 
```

并将它们都合成了inn wine.m

然后我尝试了 Apples Propery List Programming Guide 中的不同代码组合，[http:](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1) //www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1和此处的答案，以填写表格视图单元格，其中 plist 中的名称和区域字符串作为标题/子图块。现在我把自己弄得一团糟，我什至不想发布来自 WinesViewController.h/.m 的代码。最好重新开始。

稍后我也会添加图像，并使用 plist 中的其余信息来创建 WinesDetailViewController，但制作 tableView 似乎就足够了。有人可以帮我吗？

我希望葡萄酒在 tableview 中显示 az，只有 1 个部分开始，稍后我将添加部分。首先，我需要完成这个地面结构！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:33:26.843

最简单的方法是使用：

```
NSDictionary* wines = [NSDictionary dictionaryWithContentsOfURL:<URL to plist file>]; 
```

这将创建一个包含 plist 中所有内容的字典。然后，您可以逐步浏览字典的键（将是葡萄酒的名称），如下所示：

```
NSEnumerator* keyEnum = [wines keyEnumerator];
NSDictionary* nextWine = nil;
while ((nextWine = [keyEnum nextObject]) != nil)
{
    // pull out the data for each wine, such as its image, district, country, etc. and
    // put them into your model object.
} 
```

# go - vim - 保存时自动格式化golang源代码

> ID：10969366
> 
> 赞同：27
> 
> 时间：2012-06-10T14:12:17.380
> 
> 标签：go, vim

我正在使用 vim 和[vim-golang](https://github.com/jnwhiteh/vim-golang)插件。这个插件带有[一个名为 : Fmt 的函数，它使用](https://github.com/jnwhiteh/vim-golang/blob/master/ftplugin/go/fmt.vim)[gofmt](http://gofmt.com/)（一个命令行可执行文件）“重新格式化”源代码。

我想在每次保存文件时调用 :Fmt 函数，因此它会不断重新格式化。我认为这应该使用[autocmd](http://vimdoc.sourceforge.net/htmldoc/autocmd.html)指令来完成。但我有两个疑问：

1.  我找不到执行该功能的方法。我尝试在 autocmd 行的末尾写 Fmt 和 :Fmt ，但它似乎没有用。我想我错过了一些东西，比如“通话”。
2.  我希望仅在保存文件类型为“go”的文件时才发生这种情况。我不知道如何结合这两个条件 - 我可以根据文件类型激活变量，并且我可以做一些小事情，比如在保存文件时删除尾随空格，但要分开保存。

所以这就是我到目前为止所拥有的：

```
" I can set variables for go like this
autocmd FileType go setlocal noexpandtab shiftwidth=4 tabstop=4 softtabstop=4 nolist

" I can clean trailing spaces(conserving cursor position) on save like this
autocmd BufWritePre * kz|:%s/\s\+$//e|'z

" None of these worked:
autocmd BufWritePre,FileType go Fmt
autocmd BufWritePre,FileType go :Fmt 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-10T14:38:48.470

该`FileType`事件不会在缓冲区写入时触发；`BufWritePre`是正确的，但您需要提供文件模式，例如`*.go`：

```
autocmd BufWritePre *.go Fmt 
```

唯一的缺点是这重复了*go*文件类型的检测。您可以通过挂钩事件来委托它`FileType`，然后使用特殊`<buffer>`模式为每个 Go 缓冲区定义格式化 autocmd：

```
autocmd FileType go autocmd BufWritePre <buffer> Fmt 
```

这样做的缺点是，如果文件类型被多次设置，您也将多次运行格式化。这可以通过 custom 来解决`:augroup`，但现在它变得非常复杂。或者，如果您确实确定这是`BufWritePre`Go 缓冲区的唯一自动命令，您可以使用`:autocmd! BufWritePre ...`(with a `!`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:44:44.760

如果你使用折叠，gofmt 会把这些弄乱（它打开闭合的折叠，关闭打开的折叠）。要保持折叠状态，请使用以下自动命令

```
autocmd FileType go autocmd BufWritePre <buffer> execute "normal! mz:mkview\<esc>:Fmt\<esc>:loadview\<esc>`z" 
```

它使用 z 寄存器来标记光标位置，因为 :mkview 和 :loadview （保存并恢复折叠）出于某种原因移动光标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-21T20:37:09.220

For those not using the plugin, this should work:

```
autocmd FileType go autocmd BufWritePre <buffer> execute "normal! mz:mkview\<esc>:%!gofmt-safe\<esc>:loadview\<esc>`z" 
```

Add the following script to your `PATH`, this is needed otherwise gofmt will nuke the file if there are any syntax errors. This can be dangerous if you type `:x` for instance.

`gofmt-safe`

```
#!/usr/bin/env bash

orig=$(mktemp)
fmt=$(mktemp)

cat > "$orig"

<"$orig" gofmt "$@" > "$fmt" 2>/dev/null

if [ $? -eq 0 ]; then
    cat "$fmt"
else
    cat "$orig"
fi

rm -f "$orig" "$fmt" 
```

If you want live dangerously without this script, you can replace `%!gofmt-safe` with `%!gofmt` in the `autocmd` line. This has the benefit of showing you syntax errors on `:w`. Just make sure not to type `:x` or `:wq`.

# git - Git 的 'remote add' & 'fetch' 流程说明

> ID：10969367
> 
> 赞同：1
> 
> 时间：2012-06-10T14:12:20.713
> 
> 标签：git, github, fetch

此示例在 github 网站上的[octocat 示例之后的“步骤 3：配置遥控器”下：](https://help.github.com/articles/fork-a-repo)

```
git remote add upstream git://github.com/octocat/Spoon-Knife.git
git fetch upstream 
```

据我了解，在执行这些命令后，github 用户 octocat 自从我克隆存储库以来所做的更改现在已在项目的本地存储库中实现。但是假设在我执行上述命令后，用户 octocat 再次对项目进行了更改。

Q1：现在所有更改都会自动更新到我的本地文件夹吗？（我怀疑不是）

如果 Q1 的答案是否定的：

Q2.1：为了让我再次更新新的更改，我是否只需要再次执行单个命令`git fetch upstream`来更新新的更改？

Q2.2：我能否仅获取最新获取中所做更改的日志？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:45:09.543

Q1：不。Git 不会轮询遥控器的更改。您必须命令 git 来下拉更改`git fetch`（或拉）。

但是，如果您的分支正在跟踪远程分支（很可能是这样），那么当您发出`git status`git 时会告诉您分支是在远程之前还是在远程之后。如果你领先，那么你已经提交了，而遥控器上没有任何变化。如果你落后了，那么新的提交已经添加到远程。

Q2：是的。但是，请注意，`git fetch`这只会将更改拉下来。它不会将它们合并到您当前的分支中。所以在你真正合并它们之前，你不会“看到”这些变化。他们生活在一个单独的分支中——在这种情况下，上游/主控（假设主控是有问题的分支）。

当您检查了更改并准备好将它们合并到本地分支时，您可以这样做：

```
git merge upstream/master 
```

Q2.2：是的。这就是为什么做`git fetch`是有用的。它可以很容易地查看更改是什么，而不是`git pull`在一个操作中执行获取和合并的位置。虽然您仍然可以获得在这种情况下的更改列表，但要稍微困难一些。

在您的情况下，您正在执行 git fetch，以查看所做的更改，请执行`git diff upstream/master`.

# php - PHP, Printf,Sprintf 函数

> ID：10969371
> 
> 赞同：3
> 
> 时间：2012-06-10T14:12:30.183
> 
> 标签：php, printf

我正在研究printf，sprintf，但我没有理解一些要点，如果有人可以帮助我理解这些要点，

在[PHP 手册](http://php.net/manual/en/function.sprintf.php)的这个链接上：

有从一到六的解释：

我不明白的是：第一个和第二个（1（符号说明符），2（填充说明符）），如果有人可以帮我举个例子，我将非常感激。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-10T14:14:01.987

sprintf() 返回一个字符串， printf() 显示它。

以下两个是相等的：

```
printf(currentDateTime());
print sprintf(currentDateTime()); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-10T14:24:38.517

符号说明符强制一个符号，即使它是正数。所以，如果你有

```
$x = 10;
$y = -10;
printf("%+d", $x);
printf("%+d", $y); 
```

你会得到：

```
+10
-10 
```

填充说明符添加左填充，以便输出始终采用一定数量的空格，这允许您对齐一堆数字，在生成带有总计的报告等时很有用。

```
 $x = 1;
 $y = 10;
 $z = 100;
 printf("%3d\n", $x);
 printf("%3d\n", $y);
 printf("%3d\n", $z); 
```

你会得到：

```
 1
  10
 100 
```

如果您在填充说明符前面加上零，则字符串将被零填充而不是空格填充：

```
 $x = 1;
 $y = 10;
 $z = 100;
 printf("%03d\n", $x);
 printf("%03d\n", $y);
 printf("%03d\n", $z); 
```

给出：

```
 001
 010
 100 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T14:34:11.437

符号说明符：放置加号 ( + ) 会强制显示负号和正号（默认情况下仅指定负值）。

```
$n = 1;

$format = 'With sign %+d  without %d';
printf($format, $n, $n); 
```

印刷：

> 带符号 +1 不带 1

填充说明符表示将使用什么字符将结果填充到指定长度。该字符是通过在其前面加上一个单引号 (') 来指定的。例如用字符'a'填充到长度3：

```
$n = 1;

$format = "Padded with 'a' %'a3d"; printf($format, $n, $n);
printf($format, $n, $n); 
```

印刷：

> 用 'a' aa1 填充

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-04T21:51:07.090

**1.符号说明符：**

默认情况下，浏览器只`-`在负数前面显示符号。`+`正数前面的符号被省略。但是可以`+`通过使用符号说明符来指示浏览器在正数前面显示符号。例如：

```
$num1=10;
$num2=-10;
$output=sprintf("%d",$num1);
echo "$output<br>";
$output=sprintf("%d",$num2);
echo "$output"; 
```

输出：

```
10
-10 
```

这里`+`省略了正数之前的符号。但是，如果我们在字符后面加上`+`符号，则不再发生省略。`%``%d`

```
$num1=10;
$num2=-10;
$output=sprintf("%+d",$num1);
echo "$output<br>";
$output=sprintf("%+d",$num2);
echo "$output"; 
```

输出：

```
+10
-10 
```

**2.填充说明符：**

填充说明符在输出的左侧或右侧添加一定数量的字符。这些字符可以是空格、零或任何其他 ASCII 字符。

例如，

```
$str="hello";
$output=sprintf("[%10s]",$str);
echo $output; 
```

源代码输出：

```
[     hello]             //Total length of 10 positions,first five being empty spaces and remaining five being "hello" 
```

HTML 输出：

```
 [ hello]                 //HTML displays only one empty space and collapses the rest, you have to use the <pre>...</pre> tag in the code for HTML to preserve the empty spaces. 
```

将负号向左表示输出：

```
$output=["%-10s",$string];
echo $output; 
```

源代码输出：

```
[hello     ] 
```

HTML 输出：

```
[hello ] 
```

把符号放在`0`后面`%`用零替换空格。

```
$str="hello";
$output=sprintf("[%010s]",$str);
echo $output; 
```

输出：

```
[00000hello] 
```

左对齐

```
$output=sprintf("[%-010s]",$str); 
```

输出：

```
[hello00000] 
```

后跟`'`任何 ASCII 字符（如`*`after `%`）会导致显示该 ASCII 字符而不是空格

```
$str="hello";
$output=sprintf("[%'*10s]",$str);
echo $output; 
```

输出：

```
*****hello 
```

左对齐：

```
$output=sprintf("[%-'*10s]",$str);
echo $output; 
```

输出：

```
hello***** 
```

# erlang - Erlang - 解码 RSA 公钥

> ID：10969374
> 
> 赞同：0
> 
> 时间：2012-06-10T14:13:00.703
> 
> 标签：erlang, rsa, gnupg, public-key

[对此](https://stackoverflow.com/questions/10966256/erlang-importing-gpg-public-key)的跟进。

我得到了阅读/解码工作

```
1> {ok, F} = file:read_file("inaimathi.rsapub").
{ok,<<"-----BEGIN RSA PUBLIC KEY-----\nmQINBE9NBIQBEADMSzN6b0FaPP0rGiLDWKfH4ehN66Z0SAIynXm6lBHjmO69pNsm\niIe4p1X9aXhr"...>>}
2> [Entry] = public_key:pem_decode(F).
[{'RSAPublicKey',<<153,2,13,4,79,77,4,132,1,16,0,204,75,
                   51,122,111,65,90,60,253,43,26,34,195,
                   88,167,...>>,
                 not_encrypted}] 
```

根据[文档](http://www.erlang.org/doc/apps/public_key/using_public_key.html#id60385)，为了从中获得一个有效的公钥，我要做的最后一件事就是在`public_key:pem_entry_decode/1`上面运行`Entry`。但是，当我尝试这样做时，我得到了一个错误。

```
3> public_key:pem_entry_decode(Entry).
** exception error: no match of right hand side value 
                    {error,
                        {asn1,
                            {{badmatch,{error,{asn1,{wrong_tag,{131097,16}}}}},
                             [{'OTP-PUB-KEY',dec_RSAPublicKey,2,
                                  [{file,"OTP-PUB-KEY.erl"},{line,5956}]},
                              {'OTP-PUB-KEY',decode,2,
                                  [{file,"OTP-PUB-KEY.erl"},{line,493}]},
                              {public_key,der_decode,2,
                                  [{file,"public_key.erl"},{line,166}]},
                              {erl_eval,do_apply,6,
                                  [{file,"erl_eval.erl"},{line,576}]},
                              {shell,exprs,7,[{file,"shell.erl"},{line,668}]},
                              {shell,eval_exprs,7,
                                  [{file,"shell.erl"},{line,623}]},
                              {shell,eval_loop,3,
                                  [{file,"shell.erl"},{line,608}]}]}}}
     in function  public_key:der_decode/2 (public_key.erl, line 170) 
```

我在这里做错了什么？

**编辑：**不认为这很重要，但有人问，所以。

我在 Core i3 上运行 Debian Wheezy，安装了 Erlang，这是从大约 2 天前的结帐开始[的](https://github.com/erlang/otp)。

`erl --version`说

```
Erlang R15B02 (erts-5.9.2) [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T20:42:23.473

您的代码在这里工作正常：

```
decode() ->
    [application:start(X) || X <- [crypto, public_key, ssl]],
    RawData = ["-----BEGIN PUBLIC KEY-----\n",
               "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDBm8yuHmd0P6scl48DEi+xp47w\n",
               "XVZaKWRygGKtA2XkdRuCU99f0Tq07Llcgf8XuR+Wnk+z2CdMMFMzOGhCePblVIAn\n",
               "33dcBVlDokpBF7AnTClsaLcixxZw1LIUiaPaBdN7oG8vt3G2caLHRrrkoEnccY+6\n",
               "GadfH7iuHdcVsz1mowIDAQAB\n",
               "-----END PUBLIC KEY-----"],
    D = iolist_to_binary(RawData),
    [Entry] = public_key:pem_decode(D),
    public_key:pem_entry_decode(Entry). 
```

生成输出（缩短）：

```
 {'RSAPublicKey',135956...,65537} 
```

# c# - 使用 C# .NET 动态生成新线程

> ID：10969381
> 
> 赞同：-1
> 
> 时间：2012-06-10T14:13:57.200
> 
> 标签：c#, multithreading

如何以有效且受控的方式动态生成线程？线程将根据每个 XML 主机 ID 动态创建。

例子：

```
samplethread1  for hostid:-1
samplethread2  for hostid:-2 
```

因为我不能依赖主机 ID 计数，所以我需要使我的代码动态化：建议我如何控制每个线程。

给定一段示例 XML 代码：

```
<?xml version="1.0" standalone="yes"?>
  <HOSTS>
     <Host id = '1'>
       <Extension>txt</Extension>
       <FolderPath>C:/temp</FolderPath>
     </Host>
     <Host id = '2'>
       <Extension>rar</Extension>
       <FolderPath>C:/Sample</FolderPath>
     </Host>
  </HOSTS> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:58:52.183

我不得不同意这个问题并不是特别清楚。但是，如果您只想为每个主机创建一个新线程，那么这个怎么样？这是使用[.NET 4.0 Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。从 .NET 4.0 开始，这是一种利用处理器并发功能的简单方法。

```
static void Main(string[] args)
{
    var currentDir = Directory.GetCurrentDirectory();
    var xDoc = XDocument.Load(string.Format(Path.Combine(currentDir, "Hosts.xml")));
    var taskFactory = new TaskFactory();

    foreach (XElement host in xDoc.Descendants("Host"))
    {
        var hostId = (int) host.Attribute("id");
        var extension = (string) host.Element("Extension");
        var folderPath = (string) host.Element("FolderPath");
        taskFactory.StartNew(() => DoWork(hostId, extension, folderPath));
    }
    //Carry on with your other work
}

static void DoWork(int hostId, string extension, string folderPath)
{
    //Do stuff here
} 
```

如果您使用的是 .NET 3.5 或更早版本，那么您可以自己创建线程：

```
static void Main(string[] args)
{
    var currentDir = Directory.GetCurrentDirectory();
    var xDoc = XDocument.Load(string.Format(Path.Combine(currentDir, "Hosts.xml")));
    var threads = new List<Thread>();

    foreach (XElement host in xDoc.Descendants("Host"))
    {
        var hostID = (int) host.Attribute("id");
        var extension = (string) host.Element("Extension");
        var folderPath = (string) host.Element("FolderPath");
        var thread = new Thread(DoWork)
                         {
                             Name = string.Format("samplethread{0}", hostID)
                         };
        thread.Start(new FileInfo
                         {
                             HostId = hostID,
                             Extension = extension,
                             FolderPath = folderPath
                         });
        threads.Add(thread);
    }
    //Carry on with your other work, then wait for worker threads
    threads.ForEach(t => t.Join());
}

static void DoWork(object threadState)
{
    var fileInfo = threadState as FileInfo;
    if (fileInfo != null)
    {
        //Do stuff here
    }
}

class FileInfo
{
    public int HostId { get; set; }
    public string Extension { get; set; }
    public string FolderPath { get; set; }
} 
```

这对我来说仍然[是 Threading 的最佳指南](http://www.albahari.com/threading/)。

**编辑**

所以这是我认为你在评论中得到的基于任务的版本？

```
static void Main()
{
    var currentDir = Directory.GetCurrentDirectory();
    var xDoc = XDocument.Load(string.Format(Path.Combine(currentDir, "Hosts.xml")));
    var taskFactory = new TaskFactory();

    //I'm assuming this ID would normally be user input, or be passed from some other external source
    int hostId = 2;

    taskFactory.StartNew(() => DoWork(hostId, xDoc));
    //Carry on with your other work
}

static void DoWork(int hostId, XDocument hostDoc)
{
    XElement foundHostElement = (from hostElement in hostDoc.Descendants("Host")
                                    where (int)hostElement.Attribute("id") == hostId
                                    select hostElement).First();
    var extension = (string)foundHostElement.Element("Extension");
    var folderPath = (string)foundHostElement.Element("FolderPath");
    //Do stuff here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:20:38.630

如果您不想维护数组处理，您可以“触发并忘记”，所以我建议使用“线程池”：

```
ThreadPool.QueueUserWorkItem(); 
```

更多信息请访问[http://msdn.microsoft.com/en-us/library/3dasc8as(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/3dasc8as(v=vs.80).aspx)

如果要创建数组，可以执行以下操作：

```
List<Thread> threads = new List<Thread>();
threads.Add(new Thread()); //Create the thread with your parameters here 
```

创建和运行线程的示例：http: [//msdn.microsoft.com/en-us/library/system.threading.thread.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)

# database - SQLiteDataReader GetFieldType() 返回 Int64，但在 GetInt64() 上失败 - 这是错误还是功能？

> ID：10969385
> 
> 赞同：0
> 
> 时间：2012-06-10T14:14:03.707
> 
> 标签：database, sqlite

从 SQLiteDataReader 读取时，我遇到了一些奇怪的行为，即 GetFieldType(0) 返回 typeof(Int64)，GetValue(0) 返回 Int64，但 GetInt64(0) 因 System.InvalidCastException 异常而失败。

我花了相当长的时间来重现这种行为：

```
using System;
using System.Data.SQLite;
using NUnit.Framework;

namespace Test
{
    [TestFixture]
    public class SQLiteType
    {
        [Test]
        public void A()
        {
            var sqlConnection = new SQLiteConnection("Data Source=:memory:;Version=3;");
            sqlConnection.Open();

            var create = sqlConnection.CreateCommand();
            create.CommandText = "CREATE TABLE FOO (x INTEGER)";
            create.ExecuteNonQuery();

            var insert = sqlConnection.CreateCommand();
            insert.CommandText = "INSERT INTO FOO VALUES (?)";
            var param = insert.CreateParameter();
            param.Value = new TimeSpan(0); // NOTE INSERTING TIMESPAN DIRECTLY instead of .Ticks
            insert.Parameters.Add(param);
            insert.ExecuteNonQuery();

            var select = sqlConnection.CreateCommand();
            select.CommandText = "SELECT x FROM FOO";

            var dr = select.ExecuteReader();

            while (dr.Read())
            {
                var valueObject = dr.GetValue(0);
                Assert.AreEqual(typeof (Int64), valueObject.GetType());
                var valueType = dr.GetFieldType(0);
                Assert.AreEqual(typeof (Int64), valueType);
                var value = dr.GetInt64(0); // throws System.InvalidCastException 
            }
        }
    }
} 
```

当通过将 TimeSpan 值直接插入 INTEGER 列（而不是例如可能更有意义的 TimeSpan.Ticks）来创建行时，似乎会发生这种情况。尽管如此，数据读取器仍然告诉我该列是 Int64。

我不确定 SQLiteDataReader 的合同是什么，但我之前假设如果 GetFieldType() 返回 typeof(Int64)，那么 GetInt64() 应该不会失败。也许不是这样？（GetValue() 仍然返回一个 Int64 似乎很奇怪）也许它是 SQLite 独特的动态类型系统的产物。

当然，这并不难避免，但出于教学原因，我只是好奇为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:07:30.100

根本原因可能与 SQLite 处理类型的方式有关：

[http://www.sqlite.org/datatype3.html#affinity](http://www.sqlite.org/datatype3.html#affinity)

即使那样，这对我来说也像是一个错误。如果：

```
dr.GetValue(0).GetType() == typeof(System.Int64) 
```

那么它当然应该遵循`dr.GetInt64(0)`不抛出异常。我会向 sqlite-users@sqlite.org 发送一封电子邮件，如下所述：[http ://www.sqlite.org/src/wiki?name=Bug+Reports](http://www.sqlite.org/src/wiki?name=Bug+Reports)

请注意，如果您更换：

```
param.Value = new TimeSpan(0); 
```

和

```
param.Value = new TimeSpan(0).Ticks; 
```

然后

```
var value = dr.GetInt64(0); 
```

工作正常。我提出这个是因为我不确定在分配 TimeSpan 时是否有任何转换假设。例如，没有从`TimeSpan`to的隐式或显式转换`long`。

# asp.net-mvc-3 - 如何处理我的路线价值？

> ID：10969387
> 
> 赞同：-1
> 
> 时间：2012-06-10T14:14:08.423
> 
> 标签：asp.net-mvc-3

我有一个区域并将我的路线更改为这个

```
 public class WeblogsAreaRegistration : AreaRegistration
 {
    public override string AreaName
    {
        get
        {
            return "Weblogs";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Weblogs_default",
            "Weblogs/{controller}/{action}/{blogName}/{post}",
            new { action = "Index", 
                  blogName = UrlParameter.Optional,post=UrlParameter.Optional}
        );

    }
} 
```

这是我的索引

```
 public ActionResult Index(string blogName,int post)
    {
        return View();
    } 
```

它可以正常工作：

```
 http://localhost:2927/Weblogs/Blogs?blogName=Myco&Post=3 
```

但不是由

```
 http://localhost:2927/Weblogs/Blogs?blogName=Myco 
```

问题是什么？

如何更改我的路线以使用此 URL：

```
 http://localhost:2927/Weblogs/Blogs/Myco/3 
```

“myco”是博客名称，3 是帖子编号。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:17:10.803

从您的路线中删除您的`action`和令牌。`controller`将其修改为：

```
 context.MapRoute(
            "Weblogs_default",
            "Weblogs/Blogs/{blogName}/{post}",
            new { action = "Index", 
                  Controller = "Blogs",
                  blogName = UrlParameter.Optional,
                  post=UrlParameter.Optional}
        ); 
```

# c# - 如何将 HtmlAgilityPack 的 Htmlnode 转换为 webbrowser HtmlElement

> ID：10969393
> 
> 赞同：2
> 
> 时间：2012-06-10T14:14:34.143
> 
> 标签：c#, html-agility-pack

我正在创建一个自动将数据插入 html 输入标签的应用程序。我有特定标签的 xPath，例如“/html/body/form/div/div[2]/div/div/input”，我在 HtmlAgilityPack 的帮助下设法获得了 HtmlNode

```
var documentAsIHtmlDocument3 = (mshtml.IHTMLDocument3)webBrowser.Document.DomDocument;
StringReader sr = new StringReader(documentAsIHtmlDocument3.documentElement.outerHTML);
htmlDocument.Load(sr);
    if (htmlDocument.DocumentNode != null)
    {
        HtmlNode currentNode = htmlDocument.DocumentNode.SelectSingleNode(xPath);
    } 
```

现在我需要以某种方式从 Webbrowser.Document 中选择 HtmlElement ，它对应于当前 HtmlNode 。有人可以帮我吗？

顺便说一句：我没有创建任何垃圾邮件机器人。

大家好。我找到了递归解决方案，有很多 if 语句并且没有 htmlagilitypack，但不幸的是我现在不能发布它。看来我的声望不够。

不过，如果它没有付出太多努力，你能告诉我如何用 htmlagilitypack 解决这个问题，因为我的代码看起来真的很讨厌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:08:06.330

谢谢大家。经过几乎一整天的思考和编程，我决定必须使用原生 htmlElement 而不是 htmlagilitypack HtmlNode，因为我想在 webbrowser 中将文本输入到 Htmlelement 中。所以这是我想出的代码。如果有人用 htmlagilitypack 展示解决方案，我仍然会很感激。

```
 public HtmlElement selectHtmlNode(string xPath, HtmlElement htmlElement)
    {
        string currentNode;
        int indexOfElement;

        //get string representation of current Tag.
        if (xPath.Substring(1,xPath.Length-2).Contains('/'))
            currentNode = xPath.Substring(1, xPath.IndexOf('/', 1) - 1);
        else
            currentNode = xPath.Substring(1, xPath.Length-1);
        //gets the depth of current xPath
        int numOfOccurence = Regex.Matches(xPath, "/").Count;

        //gets the children's index
        int.TryParse(Regex.Match(currentNode, @"\d+").Value, out indexOfElement);

        //if i have to select nth-child ex: /tr[4]
        if (indexOfElement > 1)
        {
            currentNode = currentNode.Substring(0, xPath.IndexOf('[') - 1);
            //the tag that i want to get
            if (numOfOccurence == 1 || numOfOccurence == 0)
            {
                return htmlElement.Children[indexOfElement - 1];
            }
            //still has some children tags
            if (numOfOccurence > 1)
            {
                int i = 1;
                //select nth-child
                foreach (HtmlElement tempElement in htmlElement.Children)
                {
                    if (tempElement.TagName.ToLower() == currentNode && i == indexOfElement)
                    {
                        return selectHtmlNode(xPath.Substring(xPath.IndexOf('/', 1)), tempElement);
                    }
                    else if (tempElement.TagName.ToLower() == currentNode && i < indexOfElement)
                    {
                        i++;
                    }
                }
            }
        }
        else
        {
            if (numOfOccurence == 1 || numOfOccurence == 0)
            {
                return htmlElement.FirstChild;
            }
            if (numOfOccurence > 1)
            {
                foreach (HtmlElement tempElement in htmlElement.Children)
                {
                    if (tempElement.TagName.ToLower() == currentNode)
                    {
                        return selectHtmlNode(xPath.Substring(xPath.IndexOf('/', 1)), tempElement);
                    }
                }
            }
        }
        return null;
    } 
```

函数就是这样调用的。其中 htmlController 是某个类的实例。

```
HtmlElement currentElement = htmlController.selectHtmlNode("/body/form/div/div[2]/div/div/input", webBrowser.Document.GetElementsByTagName("html")[0]);
currentElement.SetAttribute("Value", "hello world"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:55:02.143

如果您知道元素的某个位置，您可以简单地通过

**HtmlNode mynode=htmlDocument.DocumentNode.SelectSingleNode("//div[@class='fooclass']");**

或者您可以对 HtmlNodeCollection 使用 Select 函数。

获取特定节点后，只需使用 mynode 变量 Attributes、InnerHtml 或 InnerText 属性来满足您的需要。

例如：如果您的节点引用图像 **mynode.Attributes["src"].Value**将显示图像源 uri。

PS：我假设 htmlDocument 是 HtmlAgilityPack 的类。

# r - 创建一个大的协方差矩阵

> ID：10969395
> 
> 赞同：1
> 
> 时间：2012-06-10T14:14:43.207
> 
> 标签：r, mapreduce, elastic-map-reduce

我需要创建约 110 个双精度为 19347 x 19347 的协方差矩阵，然后将它们加在一起。

这本身并不是很困难，对于较小的矩阵，以下代码可以正常工作。

```
covmat <- matrix(0, ncol=19347, nrow=19347)
files<-list.files("path/to/folder/")
for(name in files){
  text <- readLines(paste("path/to/folder/", name, sep=""),  n=19347, encoding="UTF-8")
   for(i in 1:19347){
    for(k in 1:19347){
      covmat[i, k]  <- covmat[i,k] + (as.numeric(text[i]) * as.numeric(text[k]))
    }
  }
} 
```

为了节省内存，我不计算每个单独的矩阵，而是在遍历每个文件时将它们加在一起。

问题是当我在需要使用的真实数据上运行它时，它花费的时间太长了。实际上没有那么多数据，但我认为这是一项 CPU 和内存密集型工作。因此运行它约 10 小时不会计算结果。

我曾考虑尝试使用 Map Reduce (AWS EMR)，但我得出的结论是，我认为这不是 Map Reduce 问题，因为它不是大数据问题。但是，如果我做错了，这是我一直在使用的映射器和减速器的代码。

```
#Mapper
text <- readLines("stdin",  n=4, encoding="UTF-8")
covmat <- matrix(0, ncol=5, nrow=5)

for(i in 1:5){
  for(k in 1:5){
     covmat[i, k]  <- (as.numeric(text[i]) * as.numeric(text[k]))
  }
}

cat(covmat)

#Reducer
trimWhiteSpace <- function(line) gsub("(^ +)|( +$)", "", line)
splitIntoWords <- function(line) unlist(strsplit(line, "[[:space:]]+"))
final <- matrix(0, ncol=19347, nrow=19347)
## **** could wo with a single readLines or in blocks
con <- file("stdin", open = "r")
while (length(line <- readLines(con, n = 1, warn = FALSE)) > 0) {

    line <- trimWhiteSpace(line)
    words <- splitIntoWords(line)
    final <- final + matrix(as.numeric(words), ncol=19347, nrow=19347)
}
close(con)
cat(final) 
```

谁能建议如何解决这个问题？

提前致谢

**编辑**

感谢下面一些评论者的大力帮助，我已经修改了代码，因此效率更高。

```
files<-list.files("path/to/file")
covmat <- matrix(0, ncol=19347, nrow = 19347)
for(name in files){
   invec <- scan(paste("path/to/file", name, sep=""))
   covmat <- covmat + outer(invec,invec, "*")
} 
```

这是我正在尝试处理的文件的示例。

```
1       0.00114582882882883
2      -0.00792611711711709
...                     ...
19346  -0.00089507207207207
19347  -0.00704709909909909 
```

在运行程序时，每个文件仍需要约 10 分钟。有人对如何加快速度有任何建议吗？

我有 8gb 的内存，当程序运行时，R 只使用了 4.5gb 的内存，并且有少量空闲。

我正在运行 Mac OS X Snow Leopard 和 R 64bit v. 2.15

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T15:21:20.957

我对您循环中的逻辑感到担忧。您正在计算一个本质上是 covmat + outer(in.vec) 的结果。

```
 text <- c("1", "5", "8")
    for(i in 1:3){
     for(k in 1:3){
       covmat[i, k]  <-  (as.numeric(text[i]) * as.numeric(text[k]))
     }
   }
 covmat
     [,1] [,2] [,3]
[1,]    1    5    8
[2,]    5   25   40
[3,]    8   40   64
 outer(as.numeric(text),as.numeric(text), "*")
     [,1] [,2] [,3]
[1,]    1    5    8
[2,]    5   25   40
[3,]    8   40   64 
```

这并没有错，只是可以在 R 中大大简化的东西，如果这是你真正想要的，那么这个向量化函数可以替换整个内部两个循环：

```
invec <- scan(paste("path/to/folder/", name, sep="")
covmat <- outer(invec,invec, "*") 
```

您还使用最外层循环覆盖连续文件的每个结果，这不是您所说的想要做的，因此您可能需要决定将这些矩阵存储在什么数据结构中，自然选择是列表：

```
matlist <- list()
files<-list.files("path/to/folder/")
    for(name in files){
         invec <- scan(paste("path/to/folder/", name, sep="")
         covmat <- outer(invec,invec, "*")
         matlist[[name]] <- covmat
                      } 
```

现在“matlist”应该有与该目录中的文件一样多的矩阵。您可以按名称或按输入顺序访问它们。您可以使用以下方法检索名称：

```
names(matlist) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:48:11.927

也许

```
covmat <- matrix(0, ncol=19347, nrow = 19347)
files <- paste("path/to/folder/", list.files("path/to/folder/"), sep = '')
for(name in files){
  vec <- scan(name,  nlines = 19347)
  mat <- outer(vec, vec, '*')
  covmat <- covmat + mat
} 
```

我猜，但也许你真的想要类似的东西......

```
numFiles <- 110
mat <- matrix(0, ncol= numFiles, nrow = 19347)
files <- paste("path/to/folder/", list.files("path/to/folder/"), sep = '')
for(i in 1:numFiles){
  mat[i,] <- scan(files[i],  nlines = 19347)
}
covmat <- cov(mat) 
```

# cocos2d-iphone - 如何调整 Cocos2d 粒子系统中已经存在的粒子大小

> ID：10969396
> 
> 赞同：1
> 
> 时间：2012-06-10T14:14:44.233
> 
> 标签：cocos2d-iphone

我是 Cocos2d 和游戏开发的新手。我在 Cocos2d 中使用粒子系统，我想动态调整屏幕上已经存在的所有粒子的大小。我尝试更改 startSize、endSize 和其他一些值，但它们只影响将要发射的粒子。那么如何达到我想要的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:29:21.397

一切都继承了具有比例属性的 CCNode。因此，当您将粒子添加到场景中时，您可以更改比例

```
CCParticleSystemQuad *jewelxplodeparticle = [CCParticleSystemQuad particleWithFile:@"bam.plist"];
jewelxplodeparticle.position = ccp(100,100);
jewelxplodeparticle.autoRemoveOnFinish = true;
[self addChild:jewelxplodeparticle z:1 tag:1];
jewelxplodeparticle.scale = 3.0f 
```

或者要获取您已经添加的粒子，请执行以下操作。

```
CCParticleSystemQuad *jewelxplodeparticle = (CCParticleSystemQuad*)[self getChildByTag:1];
jewelxplodeparticle.scale = 3.0f 
```

Scale 的工作原理与 CCSprite 相同。

# objective-c - 防止小负数打印为“-0”

> ID：10969399
> 
> 赞同：5
> 
> 时间：2012-06-10T14:15:16.770
> 
> 标签：objective-c, nsstring, nsnumber, zero, nsnumberformatter

如果我在 Objective-C 中执行以下操作：

```
NSString *result = [NSString stringWithFormat:@"%1.1f", -0.01]; 
```

它会给出结果`@"-0.0"`

有谁知道`@"0.0"`在这种情况下我如何强制结果（没有“-”）？

编辑：我尝试使用 NSNumberFormatter，但它有同样的问题。以下还产生`@"-0.0"`：

```
double value = -0.01;
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setMaximumFractionDigits:1];
[numberFormatter setMinimumFractionDigits:1];
NSString *result = [numberFormatter stringFromNumber:[NSNumber numberWithDouble:value]]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-18T13:26:24.720

我想要一个通用的解决方案，独立于数字格式化程序的配置。

我使用了一个类别将功能添加到 NSNumberFormater；

```
@interface NSNumberFormatter (PreventNegativeZero)
- (NSString *)stringFromNumberWithoutNegativeZero:(NSNumber *)number;
@end 
```

随着实施：

```
@implementation NSNumberFormatter (PreventNegativeZero)

- (NSString *)stringFromNumberWithoutNegativeZero:(NSNumber *)number
{
    NSString *const string = [self stringFromNumber: number];
    NSString *const negZeroString = [self stringFromNumber: [NSNumber numberWithFloat: -0.0f]];

    if([string isEqualToString: negZeroString])
    {
        NSString *const posZeroString = [self stringFromNumber: [NSNumber numberWithFloat: 0.0]];
        return posZeroString;
    }

    return string;
}

@end 
```

# 这个怎么运作

**关键功能**是询问数字格式化程序它将如何格式化`-0.0f`（即浮点减零），`NSString`以便我们可以检测到这一点并采取补救措施。

为什么要这样做？根据格式化程序配置，`-0.0f`可以格式化为：`@"-0"`, `@"-0.0"`, `@"-000"`, `@"-0ºC"`, `@"£-0.00"`, `@"----0.0"`, `@"(0.0)"`,`@".⓪零"`真的, 几乎*任何东西*。因此，我们**询问**格式化程序如何`-0.0f`使用以下行进行格式化：`NSString *const negZeroString = [self stringFromNumber: [NSNumber numberWithFloat: -0.0f]];`

有了不想要的`-0.0f`字符串，当任意输入数字被格式化时，可以测试它是否匹配不想要的`-0.0f`字符串。

第二个重要特征是数字格式化程序还被要求提供替换正零字符串。这是必要的，以便像以前一样尊重其格式。这是通过以下行完成的：`[self stringFromNumber: [NSNumber numberWithFloat: 0.0]]`

# 无效的优化

很想自己执行一个数字测试来确定输入数字是否会被格式化为`-0.0f`字符串，但这非常重要（即，一般来说基本上是不可能的）。这是因为将格式化为`-0.0f`字符串的数字集取决于格式化程序的配置。如果碰巧四舍五入到最接近的百万，那么`-5,000f`作为输入将被格式化为`-0.0f`字符串。

# 要避免的实现错误

当检测到格式化为`-0.0f`字符串的输入时，使用 生成一个正零等效输出字符串`[self stringFromNumber: [NSNumber numberWithFloat: 0.0]]`。请注意，特别是：

*   代码格式化浮点文字**`0.0f`**并返回它。
*   该代码**不**使用输入的否定。

否定输入`-0.1f`将导致格式化`0.1f`。根据格式化程序的行为，这可能会被四舍五入并导致`@"1,000"`您不想要的结果。

# 最后说明

对于它的价值，这里使用的方法/模式/算法将转换为其他语言和不同的字符串格式化 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:52:55.223

使用`NSNumberFormatter`. 一般来说，`NSString`格式不应该用于向用户呈现数据。

编辑：如问题所述，这不是正确的答案。有很多解决方案。检查负零很容易，因为它被定义为等于任何零 ( `0.0f == -0.0f`)，但实际问题是许多其他值可以四舍五入到负零。我建议不要捕获这些值，而是建议进行后处理 - 一个检查结果是否仅包含零位（跳过其他字符）的函数。如果是，请删除前导减号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T14:27:29.870

```
NSString *result = [NSString stringWithFormat:@"%1.1f", -0.01*-1]; 
```

如果您传递一个实例而不是一个值，您可以检查：

```
float myFloat = -0.01;
NSString *result = [NSString stringWithFormat:@"%1.1f", (myFloat<0? myFloat*-1:myFloat)]; 
```

**编辑：** 如果你只想 0.0 作为正值：

```
 NSString *result = [NSString stringWithFormat:@"%1.1f",(int)(myFloat*10)<0?myFloat:myFloat*-1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-15T19:17:13.950

通过采用 float 或 double 值将数字转换为 NSString。将字符串转换回 NSNumber。

```
NSDecimalNumber *num = [NSDecimalNumber decimalNumberWithString:@"-0.00000000008"];
    NSString *st2 = [NSString stringWithFormat:@"%0.2f", [num floatValue]];
    NSDecimalNumber *result = [NSDecimalNumber decimalNumberWithString:st2]; //returns 0 
```

# c# - 为什么 ForEach 扩展方法在 C# 的 ObservableCollections 中不可用

> ID：10969406
> 
> 赞同：0
> 
> 时间：2012-06-10T14:15:59.620
> 
> 标签：c#, generics

> **可能重复：**
> [为什么 IEnumerable 接口上没有 ForEach 扩展方法？](https://stackoverflow.com/questions/101265/why-is-there-not-a-foreach-extension-method-on-the-ienumerable-interface)

为什么 ForEach 扩展方法在 ObservableCollections 类中不可用，而在 List 中可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:19:48.497

正如 JJohn 所说，这是设计使然。阅读Eric Lippert 的[这篇文章了解更多信息。](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)标准`foreach`循环也可以正常工作，并且通常更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:18:25.903

`ForEach`仅在任何其他集合中可用`List<T>`，而不在任何其他集合中可用。这只是设计决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T14:59:28.553

Foreach 只能用于那些属于实现 IEnumerable 的类的对象。IEnumerable 是一个接口，它定义了一个方法 GetEnumerator，它返回一个 IEnumerator 接口，这反过来又允许对集合进行只读访问。实现 IEnumerable 的集合可以与 foreach 语句一起使用。

# css - 浮动 div 的自动宽度

> ID：10969415
> 
> 赞同：3
> 
> 时间：2012-06-10T14:17:13.677
> 
> 标签：css, html, css-float

这是我的代码

```
<div class='content'>
  <div class='div1'>content</div>
  <div class='div2'>content</div>
</div> 
```

```
.content { width:300px;}
.div1 { float:left;width:200px;}
.div2 { float:left;width:100px;} 
```

在某些情况下，我需要设置`display:none`为`div2`. 是否可以将宽度设置为（ 300px ）`.div1`的全尺寸`.content`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:43:32.533

重新排序您的 div，并使用`overflow: hidden`：

```
<div class='content'>
  <div class='div2'>content 2</div>
  <div class='div1'>content 1</div>
</div> 
```

```
.content { width:300px; overflow: hidden;}
.div1 { overflow: hidden;}
.div2 { float:left; width:100px;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:37:23.080

只要您只需要添加或删除第二个 div，最简单的解决方案就是只将第二个 div 设为浮动，并将其放在第一个非浮动 div 中，如下所示：http: [//jsfiddle.net/ TB89A/](http://jsfiddle.net/Tb89A/) .

只需删除 display:none 上的注释即可查看它的实际效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T14:29:08.690

尝试在设置时添加类（例如，`hidden`），然后设置do （在其中定义）。最后，您可以使用 jQuery 和条件：`div2``display: none``fullwidth``div1``width: 300px`

```
if($('.hidden').length()) {
   $('.div1').addClass('fullwidth');
} 
```

当然，您可能希望将这些类名更改为更具体的类名。

我想不出任何不同的解决方案，因为 CSS 不允许条件语句。

# dependency-injection - 适用于 Windows 8 Metro 应用程序的依赖注入框架

> ID：10969417
> 
> 赞同：6
> 
> 时间：2012-06-10T14:17:30.607
> 
> 标签：dependency-injection, windows-8, microsoft-metro

我似乎找不到 Windows 8 Metro 应用程序的依赖注入框架。

有win8 Metro应用程序的框架吗？

Ninject 还不支持 win8 metro。那么有人有什么建议吗？（城堡，春天，...）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T19:28:21.353

您可以尝试[Unity 3.0 for .NET4.5 Preview](http://unity.codeplex.com/releases/view/75719)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T21:02:38.073

这是 Ninject WinRT 的源代码：[https](https://github.com/remogloor/ninject) ://github.com/remogloor/ninject 它还没有发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:16:16.597

我一直在使用[Autofac Portable Library](http://code.google.com/p/autofac/downloads/list)的 Beta 版本（Metro 应用程序支持它），到目前为止它运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T10:57:13.697

Catel MVVM 工具包还包含一个 DI 容器，它的 Metro 版本将于本周发布（据他们的一位开发人员称）：[http ://catel.codeplex.com](http://catel.codeplex.com)

# jquery - 段间jquery移动数据传输

> ID：10969421
> 
> 赞同：2
> 
> 时间：2012-06-10T14:18:19.087
> 
> 标签：jquery, mobile

我正在做基于 JQM 和[http://dl.dropbox.com/u/49735179/dialog-data-transfer.html](http://dl.dropbox.com/u/49735179/dialog-data-transfer.html)的移动网站。

如果从“dialogPage”部分的搜索结果之一单击提交按钮，它应该显示在 zip1、zip2、addr 表单的“mainPage”部分。

但是 zip_code1、zip_code2、addr 的表单值不会转移到“mainPage”部分。

这个脚本有什么问题？

这是完整的脚本+ html。

```
<!DOCTYPE html> 
<html> 
<head>
<title>Test Dialog</title>
<meta charset="utf-8" />
<meta name="viewport" content="height=device-height,width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
</head> 

<body> 

<script>

$(document).ready(function() {
$('form').submit(function(){
var inputVal1 = $('input[name=zip_code1]').val();
var inputVal2 = $('input[name=zip_code1]').val();
var inputVal3 = $('input[name=addr]').val();
$("#mainPage").data("inputVal1", inputVal1);
$("#mainPage").data("inputVal2", inputVal2);
$("#mainPage").data("inputVal3", inputVal3);

})
});
$('#mainPage').live('pageshow', function(){
var inputVal1 = $(this).data('inputVal1') ? $(this).data('inputVal1') : "<? $defaultValue1 ?>";
var inputVal2 = $(this).data('inputVal2') ? $(this).data('inputVal2') : "<? $defaultValue2 ?>";
var inputVal3 = $(this).data('inputVal3') ? $(this).data('inputVal3') : "<? $defaultValue3 ?>";

$('div input[name=zip1]').val(inputVal1);
$('div input[name=zip2]').val(inputVal2);
$('div input[name=addr]').val(inputVal3);
});

</script>

<section id="mainPage" data-role="page">
<header data-role="header"><h1>Header</h1></header>
<div data-role="content">
<div>
<input type="text" name="zip1" value="">-<input type="text" name="zip2" value="">
<input type="text" name="addr" value="">
</div>

<a href="#dialogPage" data-role="button" data-transition="pop">Open Dialog</a>
</div>
<footer data-role="footer"><h1>Footer</h1></footer>
   </section>

   <!-- ## DIALOGS ## -->
   <section id="dialogPage" data-role="dialog" data-theme="d">
<header data-role="header"><h1>Header</h1></header>
<div data-role="content">
<h3>Input Dialog</h3>

<INPUT type="text" autocomplete="off" value="" id="k"><input type="submit" value="search" onClick="kin()" data-role="button">           
<DIV id="serverMsg"></DIV>      

           <form>
            <input type=hidden name=zip_code1 value='code1'>
            <input type=hidden name=zip_code2 value='code2'>
            <input type=hidden name=addr value='address1'>
            <table><tr>
            <td width=50>code1 - code2</td>
            <td>address1</td>
          </tr></table>
          <input type="submit" value='address1' /> 
          </form>

           <form>
            <input type=hidden name=zip_code1 value='code4'>
            <input type=hidden name=zip_code2 value='code5'>
            <input type=hidden name=addr value='address2'>
            <table><tr>
            <td width=50>code4 - code5</td>
            <td>address2</td>
          </tr></table>
          <input type="submit" value='address2' /> 
          </form>

           <form>
            <input type=hidden name=zip_code1 value='code6'>
            <input type=hidden name=zip_code2 value='code7'>
            <input type=hidden name=addr value='address2'>
            <table><tr>
            <td width=50>code6 - code7</td>
            <td>address3</td>
          </tr></table>
          <input type="submit" value='address3' /> 
          </form>              

    </div>

</div>
<footer data-role="footer"></footer>
  </section>

  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:21:40.543

使用`attr`方法，`data()`方法不创建`data`属性；

```
$(document).ready(function() {
$('form').submit(function(){
var inputVal1 = $('input[name=zip_code1]').val();
var inputVal2 = $('input[name=zip_code1]').val();
var inputVal3 = $('input[name=addr]').val();
$("#mainPage").attr("data-inputVal1", inputVal1);
$("#mainPage").attr("data-inputVal2", inputVal2);
$("#mainPage").attr("data-inputVal3", inputVal3);
... 
```

# java - jcodec - 有人看过这个库的文档吗？

> ID：10969423
> 
> 赞同：3
> 
> 时间：2012-06-10T14:18:29.023
> 
> 标签：java

我正在尝试使用 jcodec 将缓冲图像编码为 h264 电影。只有我无法在任何地方找到示例代码。

过去有人用过这个库吗？我没有看到任何文档，甚至库附带的 javadoc 也没有包含使用信息。如果您看过示例，或者可以提供见解，请告诉我。

[http://jcodec.org/](http://jcodec.org/)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:22:29.067

JCodec 不支持 H.264 编码。但是，您可以将 JNA 与 x264 库或 ffmpeg 一起使用。如果您选择这条路线，此线程可能会帮助您开始：[如何使用 x264 C API 将一系列图像编码为 H264？](https://stackoverflow.com/questions/2940671/how-does-one-encode-a-series-of-images-into-h264-using-the-x264-c-api).

**[更新]**从 0.1.0 版开始，JCodec 支持 H.264 编码，这是一个简单的类，可用于将图像序列转换为 MP4 容器中的 H.264 视频：

```
public class SequenceEncoder {
    private SeekableByteChannel ch;
    private Picture toEncode;
    private RgbToYuv420 transform;
    private H264Encoder encoder;
    private ArrayList<ByteBuffer> spsList;
    private ArrayList<ByteBuffer> ppsList;
    private CompressedTrack outTrack;
    private ByteBuffer _out;
    private int frameNo;
    private MP4Muxer muxer;

    public SequenceEncoder(File out) throws IOException {
        this.ch = NIOUtils.writableFileChannel(out);

        // Transform to convert between RGB and YUV
        transform = new RgbToYuv420(0, 0);

        // Muxer that will store the encoded frames
        muxer = new MP4Muxer(ch, Brand.MP4);

        // Add video track to muxer
        outTrack = muxer.addTrackForCompressed(TrackType.VIDEO, 25);

        // Allocate a buffer big enough to hold output frames
        _out = ByteBuffer.allocate(1920 * 1080 * 6);

        // Create an instance of encoder
        encoder = new H264Encoder();

        // Encoder extra data ( SPS, PPS ) to be stored in a special place of
        // MP4
        spsList = new ArrayList<ByteBuffer>();
        ppsList = new ArrayList<ByteBuffer>();

    }

    public void encodeImage(BufferedImage bi) throws IOException {
        if (toEncode == null) {
            toEncode = Picture.create(bi.getWidth(), bi.getHeight(), ColorSpace.YUV420);
        }

        // Perform conversion
        for (int i = 0; i < 3; i++)
            Arrays.fill(toEncode.getData()[i], 0);
        transform.transform(AWTUtil.fromBufferedImage(bi), toEncode);

        // Encode image into H.264 frame, the result is stored in '_out' buffer
        _out.clear();
        ByteBuffer result = encoder.encodeFrame(_out, toEncode);

        // Based on the frame above form correct MP4 packet
        spsList.clear();
        ppsList.clear();
        H264Utils.encodeMOVPacket(result, spsList, ppsList);

        // Add packet to video track
        outTrack.addFrame(new MP4Packet(result, frameNo, 25, 1, frameNo, true, null, frameNo, 0));

        frameNo++;
    }

    public void finish() throws IOException {
        // Push saved SPS/PPS to a special storage in MP4
        outTrack.addSampleEntry(H264Utils.createMOVSampleEntry(spsList, ppsList));

        // Write MP4 header and finalize recording
        muxer.writeHeader();
        NIOUtils.closeQuietly(ch);
    }

    public static void main(String[] args) throws IOException {
        SequenceEncoder encoder = new SequenceEncoder(new File("video.mp4"));
        for (int i = 1; i < 100; i++) {
            BufferedImage bi = ImageIO.read(new File(String.format("folder/img%08d.png", i)));
            encoder.encodeImage(bi);
        }
        encoder.finish();
    }
} 
```

**[更新 1]**使用此代码将交错的 YUV 4:2:0 字节数组转换为 JCodec 图片：

```
byte[] input = ...
Picture output = Picture.create(width, height, ColorSpace.YUV420);
int[] d0 = output.getData()[0], d1 = output.getData()[1], d2 = output.getData()[2];

for(int i = 0, j0 = 0, j1 = 0, j2 = 0; i < input.length; i += 6, j0 += 4, ++j1 , ++j2) {
    d0[j0    ] = input[i    ] & 0xff;
    d0[j0 + 1] = input[i + 1] & 0xff;
    d0[j0 + 2] = input[i + 2] & 0xff;
    d0[j0 + 3] = input[i + 3] & 0xff;

    d1[j1    ] = input[i + 4] & 0xff;
    d2[j2    ] = input[i + 5] & 0xff;
} 
```

# javascript - javaScript多次图像未加载

> ID：10969424
> 
> 赞同：1
> 
> 时间：2012-06-10T14:18:31.027
> 
> 标签：javascript, html5-canvas

我正在绘制在两个不同位置使用加载器方法加载的图像。但它只显示第二个。（我正在关注这个[http://www.html5canvastutorials.com/tutorials/html5-canvas-image-loader/](http://www.html5canvastutorials.com/tutorials/html5-canvas-image-loader/)）

如果我添加一个 alert() 它在 Fx 中有效，但在 Chrome 中无效。我希望它在任何地方都可以在没有 alert() 的情况下工作

如果我尝试在不使用预加载图像的情况下绘制图像，我会得到想要的结果。但我认为这是额外的负载（http://www.html5canvastutorials.com/tutorials/html5-canvas-images/）

**ImageOnload("O",120,120); //此图不显示**

**alert("如果我添加警报，它只在 Fx 中有效，在 Chrome 中无效")**

**ImageOnload("O",120,20);//只有这个显示？？？**

```
<html>
    <head>
    </head>
    <script type="text/javascript" >
        var ctx;
        var ImageVariable={};

        window.onload= function()
        {
            var canvas = document.getElementById("gameLoop");   
            ctx = canvas.getContext("2d");

            ImageBuilder(ImageSourceDB);
            ImageOnload("O",120,120); //This image is not displaying
                    //alert("If i add alert it works only in FFox but not in chrome")
            ImageOnload("O",120,20);  
        }

        var ImageSourceDB=
        {
            X:"./Images/X.gif",
            O:"./Images/O.gif"
        }
        function ImageBuilder(ImageSrcDB)
        {
            for (iSrc in ImageSrcDB)
            {
                ImageVariable[iSrc]= new Image();   
                    ImageVariable[iSrc].src = ImageSrcDB[iSrc];
            }
        }

        function ImageOnload(ImageSrc,x,y)
        {
            ImageVariable[ImageSrc].onload= function ()
            {
                ctx.drawImage(ImageVariable[ImageSrc],x,y);
            };          
                    ImageVariable[ImageSrc].src = ImageSourceDB[ImageSrc];
        }
    </script>
    <body>
        <canvas class ="pattern" id="gameLoop" height="300"  width="300" />
    </body>
</html> 
```

项目清单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:19:46.580

```
ImageOnload("O",120,120); //This image not displaying
ImageOnload("O",120,20);//only this is displaying ??? 
```

您忘记更改对象的 id：

```
ImageOnload("O",120,120);
ImageOnload("X",120,20); // Use "X", not "O"!!! 
```

如果你还想显示两次“O”，那么你应该画两次，但只有一个`onload`功能。请参见下面的示例：

```
<script type="text/javascript" >
    var ctx;
    var ImageVariable={};
    var ImageSourceDB = {
        X:"./Images/X.gif",
        O:"./Images/O.gif"
    }

    window.onload = function() {
        var canvas = document.getElementById("gameLoop");   
        ctx = canvas.getContext("2d");

        ImageBuilder(ImageSourceDB);

        ImageVariable["O"].onload = function() {
            // this will be executed when the image "O" is loaded
            // this is a pointer to ImageVariable["O"]
            ctx.drawImage(this, 120, 120);
            ctx.drawImage(this, 120, 20);
        }
        ImageVariable["X"].onload = function() {
            // this will be executed when the image "X" is loaded
            ctx.drawImage(this, 30,  30);
        }
    }        
    function ImageBuilder(ImageSrcDB) {
        for (iSrc in ImageSrcDB) {
            ImageVariable[iSrc]= new Image();   
            ImageVariable[iSrc].src = ImageSrcDB[iSrc];
        }
    }
</script> 
```

# azure - Azure 网站上的“未找到 OpenID 端点”

> ID：10969426
> 
> 赞同：6
> 
> 时间：2012-06-10T14:18:37.750
> 
> 标签：azure, dotnetopenauth, azure-web-app-service

作为 Azure 网站运行的 MVC 3 应用程序有一个奇怪的问题。过去我在使用 Azure 时遇到过问题，但新的网站概念几乎可以完美运行，除了这个：

```
DotNetOpenAuth.Messaging.ProtocolException: No OpenID endpoint found. 
```

这只发生在谷歌上，只发生在 Azure 上。在本地运行它工作正常，在 AppHarbor 上运行它工作正常，但在 Azure 上，每次尝试使用 Google 进行 OpenID 登录都会由于该异常而导致服务器错误（使用 Airbrake 跟踪）。

自己看看，尝试在[我的网站](http://versulo.azurewebsites.net)上用谷歌登录，如果你立即得到一个服务器错误页面，这意味着 DNOA 正在呕吐。所有其他登录方法都可以正常工作，包括也是 OpenID 的 Yahoo 和 AOL。

PS：不要尝试太多次，AirBrake 会很乐意向我的电子邮件地址发送垃圾邮件：<

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T03:22:45.480

在调用*之前*尝试将此代码添加到您的网站`OpenIdRelyingParty.CreateRequest`：

```
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3; 
```

在某些 Azure 配置中，这已被证明可以解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T15:09:27.407

我在 global.asax 中有这个功能：

```
AreaRegistration.RegisterAllAreas(); 
```

删除此行后，一切正常。

我在我的应用程序中添加了一些区域，这个功能是 VS2012 自动添加的。

# iphone - 更改所有按钮的更简单方法？

> ID：10969430
> 
> 赞同：1
> 
> 时间：2012-06-10T14:19:00.113
> 
> 标签：iphone, xcode, uibutton, background-color

我有 10 个`UIButton`我想更改其背景颜色。

这是我现在拥有的：

```
b1.backgroundColor = [UIColor redColor];
b2.backgroundColor = [UIColor redColor];
b3.backgroundColor = [UIColor redColor];
b4.backgroundColor = [UIColor redColor];
b5.backgroundColor = [UIColor redColor];
b6.backgroundColor = [UIColor redColor];
b7.backgroundColor = [UIColor redColor];
b8.backgroundColor = [UIColor redColor];
b9.backgroundColor = [UIColor redColor];
b10.backgroundColor = [UIColor redColor]; 
```

我想知道是否有另一种更简单的方法来做到这一点。我已经准备好尝试`UIButton.backgroundColor = [UIColor redColor]`了，但没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:23:01.337

```
//Make an array of the buttons:
NSArray* buttons=[[NSArray alloc] initWithObjects:b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,nil];
//Loop through them
for(UIButton* b in buttons)
{
  b.backgroundColor = [UIColor redColor];
} 
```

数组也可以在`viewDidLoad`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:29:01.003

将按钮放入数组中：

```
NSArray* buttonArray=[[NSArray alloc] initWithObjects:b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,nil]; 
```

然后设置所有按钮的背景颜色：

```
[buttonArray makeObjectsPerformSelector:@selector(setBackgroundColor:) withObject:[UIColor redColor]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T14:21:44.973

在`viewDidLoad`. 然后只需使用 for 循环来更改颜色。

# java - 当我尝试使用 JPA 进行本地数据存储时，Eclipse RCP 抛出异常

> ID：10969431
> 
> 赞同：0
> 
> 时间：2012-06-10T14:19:17.213
> 
> 标签：java, jpa, eclipse-rcp, derby

我的 RCP 应用程序中有以下代码：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("todos");
EntityManager em = emf.createEntityManager();
Query q = em.createQuery("select t from Todo t");
@SuppressWarnings("unchecked")
List<Todo> todos = (List<Todo>)q.getResultList(); 
```

我的配置是 META-INF/persistence.xml 并包含：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="todos" transaction-type="RESOURCE_LOCAL">
        <class>foo.bar.Todo</class>
        <properties>
            <property name="javax.persistence.jdbc.driver"
                value="org.apache.derby.jdbc.EmbeddedDriver" />
            <property name="javax.persistence.jdbc.url" 
                value="jdbc:derby:/home/pocon64/myDb;create=true" />
            <property name="javax.persistence.jdbc.user" value="test" />
            <property name="javax.persistence.jdbc.password" value="test" />

            <!-- EclipseLink should create the database schema automatically -->        
            <property name="eclipselink.ddl-generation" value="create-tables" />
            <property name="eclipselink.ddl-generation.output-mode"
                value="database" />
        </properties>
    </persistence-unit>
</persistence> 
```

当我尝试运行该应用程序时，它启动正常，但显示错误：

```
Could not create the view: 
Exception Description: An exception was thrown while searching for persistence archives with ClassLoader: org.eclipse.core.runtime.internal.adaptor.ContextFinder@4b51ac10
Internal Exception: Exception [EclipseLink-30009] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while trying to load persistence unit at url: bundleresource://51.fwk2013125681:10
Internal Exception: Exception [EclipseLink-30004] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while processing persistence.xml from URL: bundleresource://51.fwk2013125681:10
Internal Exception: 
(1\. URI was not reported to parser for entity [document]) 
```

根本没有创建 db 文件。任何想法是什么原因造成的？

添加：下面的完整堆栈跟踪：

```
Local Exception Stack: 
Exception [EclipseLink-30009] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while trying to load persistence unit at url: bundleresource://51.fwk998462082:10
Internal Exception: Exception [EclipseLink-30004] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while processing persistence.xml from URL: bundleresource://51.fwk998462082:10
Internal Exception: 
(1\. URI was not reported to parser for entity [document])
at org.eclipse.persistence.exceptions.PersistenceUnitLoadingException.exceptionLoadingFromUrl(PersistenceUnitLoadingException.java:100)
at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processPersistenceArchive(PersistenceUnitProcessor.java:538)
at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.getPersistenceUnits(PersistenceUnitProcessor.java:444)
at org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.findPersistenceUnitInfoInArchive(JPAInitializer.java:172)
at org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.findPersistenceUnitInfoInArchives(JPAInitializer.java:154)
at org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.findPersistenceUnitInfo(JPAInitializer.java:135)
at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:73)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:60)
at com.diligentgaming.dcm.workstation.plugins.core.dashboard.DashboardView.createPartControl(DashboardView.java:64)
at org.eclipse.ui.internal.ViewReference.createPartHelper(ViewReference.java:375)
at org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:229)
at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
at org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:313)
at org.eclipse.ui.internal.ViewPane.setVisible(ViewPane.java:534)
at org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:180)
at org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:270)
at org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)
at org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart(TabbedStackPresentation.java:473)
at org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:1245)
at org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:1198)
at org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1597)
at org.eclipse.ui.internal.PartStack.createControl(PartStack.java:643)
at org.eclipse.ui.internal.PartStack.createControl(PartStack.java:570)
at org.eclipse.ui.internal.PartSashContainer.createControl(PartSashContainer.java:568)
at org.eclipse.ui.internal.PerspectiveHelper.activate(PerspectiveHelper.java:272)
at org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:981)
at org.eclipse.ui.internal.WorkbenchPage.onActivate(WorkbenchPage.java:2714)
at org.eclipse.ui.internal.WorkbenchWindow$28.run(WorkbenchWindow.java:3030)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:3011)
at org.eclipse.ui.internal.WorkbenchWindow.busyOpenPage(WorkbenchWindow.java:799)
at org.eclipse.ui.internal.Workbench$23.runWithException(Workbench.java:1229)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3938)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3615)
at org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:803)
at org.eclipse.ui.internal.Workbench$33.runWithException(Workbench.java:1600)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3938)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3615)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2609)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at com.diligentgaming.dcm.workstation.plugins.core.Application.start(Application.java:20)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
at org.eclipse.equinox.launcher.Main.main(Main.java:1386)
Caused by: Exception [EclipseLink-30004] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while processing persistence.xml from URL: bundleresource://51.fwk998462082:10
Internal Exception: 
(1\. URI was not reported to parser for entity [document])
at org.eclipse.persistence.exceptions.PersistenceUnitLoadingException.exceptionProcessingPersistenceXML(PersistenceUnitLoadingException.java:118)
at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processPersistenceXML(PersistenceUnitProcessor.java:587)
at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processPersistenceArchive(PersistenceUnitProcessor.java:536)
... 63 more
Caused by: 
(1\. URI was not reported to parser for entity [document])
at org.eclipse.persistence.internal.jpa.deployment.xml.parser.XMLExceptionHandler.error(XMLExceptionHandler.java:28)
at org.eclipse.persistence.internal.jpa.deployment.xml.parser.XMLExceptionHandler.warning(XMLExceptionHandler.java:23)
at gnu.xml.aelfred2.SAXDriver.warn(SAXDriver.java:935)
at gnu.xml.aelfred2.SAXDriver.startExternalEntity(SAXDriver.java:631)
at gnu.xml.aelfred2.XmlParser.pushURL(XmlParser.java:3358)
at gnu.xml.aelfred2.XmlParser.doParse(XmlParser.java:159)
at gnu.xml.aelfred2.SAXDriver.parse(SAXDriver.java:320)
at gnu.xml.aelfred2.XmlReader.parse(XmlReader.java:294)
at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processPersistenceXML(PersistenceUnitProcessor.java:577)
... 64 more</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:08:08.403

答案原来是从类路径中删除 gnujaxp.jar，之后一切似乎都正常。

# yui - 如何呈现 YUI 数据表？

> ID：10969432
> 
> 赞同：0
> 
> 时间：2012-06-10T14:19:28.033
> 
> 标签：yui, yui-datatable

根据[YUI DataTable 控件的文档，](http://yuilibrary.com/yui/docs/datatable/)我推断出以下代码：

```
<!DOCTYPE HTML>
<HTML>
<HEAD>
    <SCRIPT type="text/javascript" src="http://yui.yahooapis.com/3.5.1/build/yui/yui-min.js"></SCRIPT>
    <SCRIPT type="text/javascript">
        // Create a new YUI instance and populate it with the required modules.
        YUI().use('datatable', function (Y) {
            // Columns must match data object property names
            var data = [
                { id: "ga-3475", name: "gadget",   price: "$6.99", cost: "$5.99" },
                { id: "sp-9980", name: "sprocket", price: "$3.75", cost: "$3.25" },
                { id: "wi-0650", name: "widget",   price: "$4.25", cost: "$3.75" }
            ];

            var table = new Y.DataTable({
                columns: ["id", "name", "price"],
                data: data,

                // Optionally configure your table with a caption
                caption: "My first DataTable!",

                // and/or a summary (table attribute)
                summary: "Example DataTable showing basic instantiation configuration"
            });
            table.render("#example");
        });
    </SCRIPT>
</HEAD>
<BODY>
</BODY>
</HTML> 
```

侮辱性的是，文档说：

> 此代码生成此表：
> 
> ![在此处输入图像描述](../Images/e630b55fc13f2ae3e7ec74cc54023734.png)

除了此代码生成此表：

![在此处输入图像描述](../Images/6db7ce0c6f8086d8578ea900c4fdf6b8.png)

所以很明显我错过了一些关于如何渲染 YUI 数据表的基本知识。渲染 YUI 数据表的正确方法是什么？

**问**：如何渲染 YUI 数据表？

* * *

[另一个页面](http://yuilibrary.com/yui/docs/datatable/datatable-basic.html)提到包括 a `<div>`，将我`<BODY>`的从空更改为：

```
<BODY>
    <div class="example yui3-skin-sam">
        <div id="simple"></div>

        <div id="labels"></div>
    </div>
</BODY> 
```

但不会改变控件的外观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T14:38:54.873

添加`class="yui3-skin-sam"`body标签，table css写对应这个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:54:12.243

将 <script> 移动到 <body> 的底部，或者至少在包含 DataTable 的 <div> 之后。这将避免在设置 DOM 之前加载脚本*的竞争条件。*

render('#example') 告诉 DataTable 渲染到一个 id 为 'example' 的元素您包含的标记示例有一个 div*类*为 'example'，然后是两个 id 为 'simple' 和 'labels '。您需要确保在 yui3-skin-sam 类的父元素内进行渲染。如果您告诉 YUI 小部件渲染到它找不到的元素中，它会退回到在 <body> 内渲染它。您可以通过以下几种方式解决此问题：

*   将类添加到 <body> 标签而不是 <div> （不是一个坏主意，但您仍然应该修复渲染目标选择器）
*   使用与页面上的元素匹配的 render( *?* ) 目标选择器，例如 render('.example')、render('#simple') 或 render('#labels')。

在任何情况下，请确保您的渲染目标位于 class="yui3-skin-sam" 的元素内

# javascript - HTML5 文本旋转

> ID：10969436
> 
> 赞同：2
> 
> 时间：2012-06-10T14:19:44.547
> 
> 标签：javascript, html, rotation, html5-canvas

我想旋转图形 x 轴的文本。下面是我正在使用的代码

```
context.rotate(20*Math.PI/2);
context.fillText(name, startX + (i * barWidth) + i, chartHeight + 10, 200); 
context.rotate(-20*Math.PI/2); 
```

写完文字后，我将其旋转回原始位置。但不知何故，它不起作用。工作代码可以在[http://intercepter.comli.com/example3.html找到](http://intercepter.comli.com/example3.html)

我已经阅读了[这篇文章](https://stackoverflow.com/questions/3167928/drawing-rotated-text-on-a-html5-canvas)并尝试了它，但它只是不起作用。请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:09:50.047

旋转`20*Math.PI/2`类似于不旋转任何东西，因为：

```
20*Math.PI/2 = 10*Math.PI = 2*Math.PI 
```

不知道你想如何旋转你的文字，而不是

```
context.rotate(20*Math.PI/2);
context.fillText(name, startX + (i * barWidth) + i, chartHeight + 10, 200); 
context.rotate(-20*Math.PI/2); 
```

您可以尝试使用这样的[转换](https://developer.mozilla.org/en/Canvas_tutorial/Transformations)：

```
context.save();
context.setTransform(1,0,0,1,0,0);
context.translate(startX + (i * barWidth) + barWidth/2, chartHeight - 10); 
context.rotate(-Math.PI/2);

context.fillText(name, 0, 0, 200);        
context.restore(); 
```

查看工作[**演示**](http://jsfiddle.net/xzMzw/)：

# c# - 如何在WPF中放大图片？

> ID：10969442
> 
> 赞同：-1
> 
> 时间：2012-06-10T14:20:05.890
> 
> 标签：c#, wpf

我必须在 WPF 中放大单张图片。问题是手术后图片只显示了一部分。

我必须让它逐渐扩大。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:30:28.057

我认为您将图像拉伸属性修改为`none`.

集合`Height`和`Width`属性：

```
<Image
   Height="165"
   HorizontalAlignment="Left"
   Name="image1" Stretch="Fill"
   VerticalAlignment="Top"
   Width="339"
   Source="[your source]" /> 
```

在`[your source]`你将把你的图像的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T15:39:29.570

如果您的图像元素仅显示图片的一部分，您可以将 Stretch 属性更改为 Uniform（保留纵横比）或 Fill（不保留纵横比）。

您可以使用 RenderTransform 属性的 ScaleTransform 来放大图片而不影响应用程序的布局，或者使用 LayoutTransform 属性的 ScaleTransform 来放大图片，从而影响您的布局。ScaleTransform 提供了两个重要的属性 ScaleX 和 ScaleY，它们分别影响图像在其 X 和 Y 轴上的大小调整方式。要逐渐应用此效果，您必须使用 DoubleAnimation。您没有指定何时触发放大，因此出于示例的目的，我假设您希望在用户将鼠标悬停在图像上时放大图像。当用户将鼠标移出图像时，提供的代码也会逐渐减小图像大小。要更改大小的增加和减少发生的时间，请更改两个 EventTrigger 的 RoutedEvent 属性。

```
<Image Stretch="Uniform" Source="Penguins.jpg">
     <Image.RenderTransform>
          <ScaleTransform ScaleX="1" ScaleY="1" x:Name="scale" />
     </Image.RenderTransform>
     <Image.Triggers>
          <EventTrigger RoutedEvent="MouseEnter">
               <BeginStoryboard>
                    <Storyboard>
                         <DoubleAnimation Storyboard.TargetProperty="ScaleX"
                                          Storyboard.TargetName="scale" To="1.5"
                                          Duration="0:0:1" />
                         <DoubleAnimation Storyboard.TargetProperty="ScaleY"
                                          Storyboard.TargetName="scale" To="1.5"          
                                          Duration="0:0:1" />
                    </Storyboard>
               </BeginStoryboard>
          </EventTrigger>
          <EventTrigger RoutedEvent="MouseLeave">
               <BeginStoryboard>
                    <Storyboard>
                         <DoubleAnimation Storyboard.TargetProperty="ScaleX"
                                          Storyboard.TargetName="scale" To="1" 
                                          Duration="0:0:1" />
                         <DoubleAnimation Storyboard.TargetProperty="ScaleY"
                                          Storyboard.TargetName="scale" To="1" 
                                          Duration="0:0:1" />
                     </Storyboard>
               </BeginStoryboard>
          </EventTrigger>
     </Image.Triggers>
</Image> 
```

# java - 有条件地将元素渲染为链接以在 Java 中实现 HAL

> ID：10969443
> 
> 赞同：4
> 
> 时间：2012-06-10T14:20:36.407
> 
> 标签：java, json, marshalling, jackson

我正在尝试在 JAX-RS 服务中实现[JSON 的 HAL 标准。](http://stateless.co/hal_specification.html)我的项目由包含许多项目的用户组成，这些项目包含许多节点，这些节点包含各种数据和指向其他节点的指针。

所以当一个端点被击中时，我想将对象嵌入一层深，然后链接：

*   /user 有用户数据和“_embedded”项目，但这些项目只包含节点（和自身）的“_links”
*   /project/1234 有“_embedded”节点，但这些节点“_links”到更多数据。

等等。

Jackson JSONFilters 看起来很接近，但我不太了解它。特别相关的是，有时一个属性将被映射到“_embedded”的集合中，有时在“_links”中使用不同的技术。

有人尝试过这样的事情吗？

有 HalBuilder，但它似乎需要手动序列化，我想避免。话又说回来，Jackson 的代码似乎几乎和手动序列化一样多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:29:40.060

您需要实现您的自定义杰克逊序列化器（[http://jackson.codehaus.org/1.7.9/javadoc/org/codehaus/jackson/map/JsonSerializer.html](http://jackson.codehaus.org/1.7.9/javadoc/org/codehaus/jackson/map/JsonSerializer.html)）

看看 Spring Hateoas 项目。他们已经实现了杰克逊扩展`HalJacksonModule`( [https://github.com/SpringSource/spring-hateoas/commit/61e73107c1213556c025dc8f68a8784daf089796](https://github.com/SpringSource/spring-hateoas/commit/61e73107c1213556c025dc8f68a8784daf089796) ) 以启用对杰克逊的 HAL 序列化。我认为您可以使用它或根据您的需要调整它。

此外，“Spring Data Rest”项目 (http://www.springsource.org/spring-data/rest) 提供了一种使用 Spring Hateoas 将 JPA 模型导出到 REST（使用 hateoas）的方法。您可以查看代码以获得灵感，或者只是在代码中使用该框架。（记得注册`HalJacksonModule`到`ObjectMapper`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T00:53:47.903

我发现 RestExpress 库非常棒，它包括对 HAL 的支持。作者基于一个简单的配置完成了构建序列化机制和链接构建的所有工作。

[https://github.com/RestExpress/HyperExpress](https://github.com/RestExpress/HyperExpress)

[https://github.com/RestExpress/HyperExpress/tree/master/hal](https://github.com/RestExpress/HyperExpress/tree/master/hal)

# c++ - C++ 中的函数匹配错误

> ID：10969446
> 
> 赞同：-1
> 
> 时间：2012-06-10T14:20:39.827
> 
> 标签：c++, compiler-errors

为什么以下代码给了我以下编译器错误：“找不到匹配的吃（）”？

```
#include <iostream.h>
#include <conio.h>

void spit(char in[255])
{
    cout << in;
}

void spit (int in)
{
    cout << in;
}

int eat(int in)
{
    cout << "? ";
    cin >> in;
    return in;
}

char*  eat(char in[255])
{
    cout << "? ";
    cin >> in;
    return in;
}

int main()
{
clrscr();

int input;
input = eat(); // <---- over here
spit(input);

getch();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:27:17.927

需要传参数吃

```
..
int input;
input = eat(123);
spit(input);
.. 
```

但是为什么有函数吃/吐`char [255]`作为参数呢？你不使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:22:04.643

您的`eat`函数需要一个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T14:23:03.850

你有两个`eat()`重载。它们都需要一个参数。您应该在调用它时指定一个参数，`int`或者`char*`根据您的需要。或者创建一个`eat()`不带参数的新函数。

# list - Erlang List 连接，奇怪的“|” 符号

> ID：10969447
> 
> 赞同：3
> 
> 时间：2012-06-10T14:20:43.737
> 
> 标签：list, erlang, concatenation, bubble-sort

为了熟悉 Erlang，我正在尝试编写自己的冒泡排序算法。现在，我的模块中有以下代码：

```
-module(mysort).
-export([bubblesort/1]).

bubblesort(L) ->
    sort_sequence(L, []).

sort_sequence([H1|[H2|T]], Sorted) ->
    if H2 >= H1 ->
        sort_sequence(T, Sorted ++ [H1, H2]);
    H2 < H1 ->
        sort_sequence(T, Sorted ++ [H2, H1])
    end;
sort_sequence([H|T], Sorted) ->
    Sorted ++ H;
sort_sequence([], Sorted) ->
    Sorted. 
```

首先：**请不要给我的代码建议** 我想自己弄清楚^^

问题是：如果我说`mysort:bubblesort([2,1,3,4,5]).` 输出如我所料：`[1,2,3,4,5]`

但如果我说`mysort:bubblesort([2,1,3,5,4]).` 输出是：`[1,2,3,5|4].`

我唯一的问题是：这是**什么“|” 在列表项之间签名意味着什么？！**

谢谢你们！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T14:37:57.500

列表可以有两种形式：要么是空的（`[]`），要么有头和尾（`[H|T]`）。`[]`空列表也是如此，`[1 | []]`它是一个头部为 1 且尾部为的列表`[]`，并且`[1|2]`是一个头部为 1 且尾部为 2 的列表。

如果列表为空或其尾部是正确列表，则列表称为*正确列表。*一个正确的列表也是如此`[]`，因为它是空的，并且`[1|[]]`是一个正确的列表，因为它的尾部是空列表（这是一个正确的列表），但`[1|2]`不是一个正确的列表，因为它的尾部是 2 并且 2 不是一个正确的列表。

由于正确的列表是最常见的列表类型，并且像这样以嵌套列表的形式读取和写入它们有点麻烦，因此它们有一个特殊的语法：显示一个正确的列表，可以通过用逗号分隔子列表的头部来编写. 因此，如果我们有正确的列表`[1 | [2 | [3 | []]]]`，它会显示为`[1,2,3]`（我们也可以这样写），这样更具可读性。

这种格式也用于显示不正确列表的开头，如果它们“开始”正确直到非正确尾部所在的点，它将用`|`. 因此，例如，如果我们有不正确的列表`[1 | [2 | [3|4]]]`（这是不正确的，因为最里面的尾部是 4，这不是正确的列表），它将显示为`[1,2,3|4]`与正确的列表区分开来`[1 | [2 | [ 3 | [4 | []]]]]`，后者将显示为`[1,2,3,4]`。

因此，如果您看到类似的内容，那么您以某种方式创建了一个列表，其尾部不是正确的列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T14:32:54.780

当尾部未列出时会发生这种情况：

```
> [1,2,3 | 2].
[1,2,3|2]

> [1,2,3 | [2]].
[1,2,3,2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T19:37:45.223

第一：谢谢各位！

```
sort_sequence([H|T], Sorted) ->
    Sorted ++ H; 
```

我将单个项目连接到列表中，这当然不是正确的列表；这导致了你们都解释的错误

# c# - Couchbase .NET SDK

> ID：10969449
> 
> 赞同：0
> 
> 时间：2012-06-10T14:20:59.580
> 
> 标签：c#, database, couchbase

再会！

我想从 MySQL 切换到 CouchBase，但在执行此操作时遇到了一些问题。在阅读了几个小时的所有教程、手册和谷歌搜索后，我仍然需要回答以下问题：

1.  您如何以编程方式声明一个新的 CouchBaseClient 实例？我需要根据登录的用户连接到不同的存储桶。入门教程只是尽可能地提到了这一点，但没有给出任何实际的方法。

2.  您如何以编程方式创建新的存储桶？每次有人注册时，我都需要这个来创建一个新的存储桶。互联网上没有关于 .NET 的信息，只能通过 telnet 和命令行。

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:18:49.830

答案如下。需要考虑的几件事...创建客户端实例的成本相对较高。您通常不希望在每个应用程序域中多次创建新的 CouchbaseClient（具有存储桶关联性）。

还要记住，存储桶并不是真的意味着每个用户的多租户。存储桶有点类似于数据库——如果你在这个应用程序中使用 MySQL，你会为每个用户创建一个新的数据库吗？

您可以在以下位置阅读有关在配置中设置多个存储桶的更多信息：

[http://www.couchbase.com/wiki/display/couchbase/Couchbase+.NET+Client+Library#Couchbase.NETClientLibrary-UsingMultipleBucketswiththeCouchbaseClient](http://www.couchbase.com/wiki/display/couchbase/Couchbase+.NET+Client+Library#Couchbase.NETClientLibrary-UsingMultipleBucketswiththeCouchbaseClient)

1.  var config = new CouchbaseClientConfiguration(); config.Urls.Add(new Uri("http://localhost:8091/pools/default")); config.Bucket = "默认";

    var client = new CouchbaseClient(config);

2.

此功能当前不是 .NET 客户端库的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:19:37.620

回答1：

```
var client = new CouchbaseClient("bucketname1","password1");

var client2 = new CouchbaseClient("bucketname3","password3"); 
```

# c# - 重定向错误 401.2 未经授权

> ID：10969457
> 
> 赞同：3
> 
> 时间：2012-06-10T14:22:20.870
> 
> 标签：c#, asp.net, redirect, web-config

我一直在尝试重定向错误消息 401.2。：未经授权：由于服务器配置，登录失败，如下所示：

```
<customErrors defaultRedirect="Error.aspx" mode="On">
      <error statusCode="401" redirect="Unauthorized.aspx" />
    </customErrors> 
```

但它从未真正重定向。它仍然显示默认的访问被拒绝页面。我在那里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:58:28.637

将以下内容添加到 global.asax 似乎工作得很好：

```
void Application_EndRequest(object sender, EventArgs e)
        {
            if (Response.StatusCode == 401)
                Response.Redirect("Unauthorized.aspx");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:29:24.683

**首先试试这个：**

在您的 Unauthorized.aspx.cs Page_Load 方法上设置：

```
private void Page_Load(System.Object sender, System.EventArgs e)
{
    //Put user code to initialize the page here 
    Response.StatusCode = 401;
    Response.TrySkipIisCustomErrors = true;
} 
```

有关详细信息，请参阅此：

[HttpResponse.TrySkipIisCustomErrors 属性](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.tryskipiiscustomerrors.aspx)

[IIS 7 错误页面超过 500 个错误](http://www.west-wind.com/weblog/posts/2009/Apr/29/IIS-7-Error-Pages-taking-over-500-Errors)

**第二次尝试这个：** 除了标记之外，还使用这个来绕过 IIS 错误页面：

```
<system.webServer>
      <httpErrors existingResponse="PassThrough" />
</system.webServer> 
```

# php - Mysql为每个id更新不同的字段（列）

> ID：10969466
> 
> 赞同：0
> 
> 时间：2012-06-10T14:23:39.917
> 
> 标签：php, mysql

我有一个数据库， `PlayerID, goals, yellows,reds` 我想做的是在单个语句中根据 playerID 和偶数（目标、黄色、红色）增加列。目前它一次完成一个 playerID：

```
UPDATE players SET $event=$event+1 WHERE id=$playerID 
```

`$event`字段名称在哪里`(goals, yellows, reds)`

我想做的就是在一个声明中包含所有内容。如果您想象玩家 1 得到黄色而玩家 2 得到红色，那么我会将声明想象为：

```
UPDATE players SET (yellows=yellows+1,reds=reds+1) WHERE id=(1,2) 
```

我知道上面的代码是错误的，但我希望它有助于让我了解我想要做什么。每个`SET`参数对应于各自的`id`参数。单独它会是：

```
 UPDATE players SET yellows=yellows+1 WHERE id=1
  UPDATE players SET reds=reds+1 WHERE id=2 
```

我**不是**在寻找：

```
UPDATE players SET (yellows=yellows+1,reds=reds+1) WHERE id IN (1,2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:07:01.437

如果你想要一个`UPDATE`声明：

```
UPDATE players 
SET yellows = CASE WHEN id = 1 
                     THEN yellows + 1
                     ELSE yellows
                   END  
  , reds    = CASE WHEN id = 2 
                     THEN reds + 1
                     ELSE reds 
              END
WHERE id IN (1, 2) ; 
```

# php - 在Mysql中计算多行

> ID：10969468
> 
> 赞同：0
> 
> 时间：2012-06-10T14:24:25.890
> 
> 标签：php, mysql, count

我目前有一张表格，里面有按日期排序的某个帖子的点赞和推文。

我想知道查询以计算按 post_id 排序的喜欢和推文的总数。下面示例的结果应该是 50 个赞和 20 个推文。

表的结构是：

```
post_id date    likes   tweets
1   2012-06-09  20  10
1   2012-06-10  30  10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:31:17.537

看看[这个文档](https://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)。试试这个：

```
SELECT SUM(`likes`) AS `likes`, SUM(`tweets`) AS `tweets` FROM `table` GROUP BY `post_id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:28:32.850

**在你的情况下：**

假定您的表名：推文

```
select SUM(likes), SUM(tweet) from post_table group by(post_id) 
```

**一般形式：**

```
SELECT column_name, aggregate_function(column_name)
FROM table_name
WHERE column_name operator value
GROUP BY column_name 
```

# objective-c - NSTask 还是 AScript？

> ID：10969470
> 
> 赞同：0
> 
> 时间：2012-06-10T14:24:54.293
> 
> 标签：objective-c, macos, git, applescript

我是 objetive-c 的新手，因为我来自 Java (Android)，然后是一点 AppleScript。

所以我的应用程序正在进行 git 提交。但是如您所知，终端具有用户可能想要查看的输出。所以我应该继续在幕后使用我的 NSTask，还是应该只使用 AppleScript 并让用户从终端继续。主要是我的 push.m 看起来像这样：

```
#import "Push.h"

@implementation Push

@synthesize test;
@synthesize dirPath;

-(IBAction)chooseFolder:(id)sender{

    dirPath = [self get];
    NSArray *array = [dirPath componentsSeparatedByString:@"/"];
    NSString *pub = [array lastObject];
    [projectName setStringValue:pub];

    BOOL fileyn = [self check:dirPath];

    if(fileyn) {

    } else {

    }

}
-(IBAction)pushAction:(id)sender {
    [self push];
    [self push];
}

-(void)push{ 

    if(dirPath == nil || dirPath == @"") {
        [self chooseFolder:nil];
    }

    NSString *commitText = [commitMessage stringValue];
    [commitMessage setStringValue:@""];
    commitText = [NSString stringWithFormat:@"%@",commitText];

    if (i == 1) {

    } else {
        [self runScript:dirPath:@"add" :@"*" :nil];
        [self runScript:dirPath:@"commit" :@"-m" :commitText];
        [self runScript:dirPath:@"push" :@"origin" :@"HEAD"];
    }

}

-(void) runScript:(NSString *) path:(NSString* )cmd1:(NSString *) cmd2:(NSString *) cmd3{

    NSTask *aTask = [[NSTask alloc] init];

    NSPipe *pipe;
    pipe = [NSPipe pipe];
    [aTask setStandardOutput: pipe];

    NSFileHandle *file;
    file = [pipe fileHandleForReading];

    NSArray* args = [NSArray arrayWithObjects:cmd1,cmd2,cmd3, nil];
    [aTask setArguments:args];
    [aTask setCurrentDirectoryPath:path];
    [aTask setLaunchPath:@"/usr/local/git/bin/git"];
    [aTask setArguments:args];
    [aTask launch];

    [finished setStringValue:@"finished"];

}

-(IBAction)back:(id)sender{

    test = [[NSWindowController alloc] initWithWindowNibName:@"POP"];
    [test showWindow:self];
    [window close];

}

-(BOOL)check:(NSString *) pow{
    BOOL isFile = [[NSFileManager defaultManager] fileExistsAtPath:pow isDirectory:NO];

    return isFile;
}

-(NSString *)get {  

    NSOpenPanel *panel = [NSOpenPanel openPanel];
    [panel setAllowsMultipleSelection:NO];
    [panel setCanChooseDirectories:YES];
    [panel setCanChooseFiles:NO];
    if ([panel runModal] != NSFileHandlingPanelOKButton) return nil;
    return  [[panel directoryURL] path];
}

@end 
```

所以我该怎么做？有什么要改进的吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:28:17.930

这种应用程序设计完全取决于您；这里没有正确的答案。这取决于您要完成什么，以及您希望允许用户做什么。如果您只是想向用户显示您正在运行的任何命令的输出，您可以简单地从`NSTask`（使用您设置的输出管道）中获取输出并将其显示在文本视图中供用户查看。

但是，如果您想运行交互式`git`命令，那就有点复杂了。由于您的问题对“让用户从终端继续”的含义不是很具体，因此我在这里会很困难，因此，如果这不是您的意思，请告诉我。就良好的用户界面和用户体验而言，除非您别无选择，否则强迫某人转到不同的应用程序以继续使用您自己的应用程序几乎不是一个好主意。如果应用程序想要向用户显示结果，最好在应用程序内进行（例如，使用自定义视图或 Web 视图），而不是将用户带到其他地方。如果您希望命令是交互式的，

无论如何，快速浏览一下，您的代码似乎应该可以工作（除了前面提到的注释中的问题，您应该修复它）——而且由于您没有提到它的任何问题，我认为它可以工作。这不是编程问题。这是一个设计问题，你必须自己考虑答案（话虽如此，我投票结束这个问题，因为它并不真正符合 StackOverflow 指南 - 答案是一个问题意见，而不是事实）。

# c++ - 关于 C++ 中的内存

> ID：10969475
> 
> 赞同：2
> 
> 时间：2012-06-10T14:25:38.093
> 
> 标签：c++, memory

> **可能重复：**
> [大数组大小的分段错误](https://stackoverflow.com/questions/1847789/segmentation-fault-on-large-array-sizes)

运行程序时出现分段错误。

```
#include<iostream>
using namespace std;

int main(){
    int x[2000][2000];
    int y;
    cin >> y;
} 
```

* * *

但是，当我运行它们时，以下两个程序是可以的。

```
#include<iostream>
using namespace std;

int x[2000][2000];
int main(){

    int y;
    cin >> y;
} 
```

和

```
#include<iostream>
using namespace std;

int main(){
    int x[2000][2000];
    int y;
} 
```

* * *

我很困惑。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T14:30:08.023

恭喜，您发现了[堆栈溢出](http://en.wikipedia.org/wiki/Stack_overflow)。

在第一个示例中，大数组`x`压`y`入堆栈末尾，因此访问它会使程序崩溃。(2) 不会因为您声明的大数组在数据段中而不在堆栈中而崩溃；(3) 不会崩溃，因为您实际上并没有访问堆栈末尾之后的内存（您已经声明了它，但没有读取或写入它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:30:47.527

在您的第一个示例中，您尝试在堆栈上分配 20,000*20,000*4 字节（假设为 32 位整数）。这相当于大约 16MB 的数据，比编译器为您分配的堆栈大小（通常约为 1MB）还多，因此您的（堆栈）内存不足

在第二个示例中，编译器将内存分配给`x`一个单独的全局空间（不在堆栈上），该空间有足够的空间来容纳它。

第三个例子比较棘手，因为它看起来应该导致与第一个相同的情况，但是您的编译器可能优化了该函数，因为它认为该函数中没有进行任何有意义的工作（因此没有为局部变量）

# javascript - 如何将日期解析到数组中？

> ID：10969484
> 
> 赞同：-4
> 
> 时间：2012-06-10T14:27:11.537
> 
> 标签：javascript

> 11.06.2012 17:40

我需要的只是放入数组值

```
mydate.day = 11;
mydate.month = 6;
mydate.year = 2012;
mydate.hours = 17;
mydate.minutes = 40; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-10T14:34:40.757

```
"11.06.2012 17:40".split(/[.: ]/).map(Number);
//[11, 6, 2012, 17, 40] 
```

# python - Python Qt QFileDialog::getopenFileNames - 文件选择顺序

> ID：10969486
> 
> 赞同：1
> 
> 时间：2012-06-10T14:27:24.787
> 
> 标签：python, qt, getopenfilename

我正在编写一个小的 Python 代码来加入文本文件，并且这些文件被选为用户输入。但重要的是我得到用户选择的顺序，因为我想以选定的顺序加入文件。但我看到 getOpenFileNames 返回的列表没有保留选择顺序。

有人对捕获选择顺序有什么建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:53:16.063

```
self.filename = QtGui.QFileDialog.getOpenFileNames(
    self,
    "Cargar tu documento",
    self.lastOpenedFile,
    "*.doc;*.odt;*.pdf" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:55:29.260

我最初想建议为跟踪选择的 currentChanged 信号编写回调，但似乎在使用 getOpenFileNames 时不会调用此信号。另一种方法是使用 show() 显示对话框并将回调连接到 filesSelected，在用户单击对话框上的“打开”按钮后调用该回调。回调的参数是一个包含所选文件的列表，该列表似乎按照它们的选择顺序（刚刚在 python3/pyqt4 上测试过）。

```
def callback(files):
    joined_files = ''.join([open(f).read() for f in files])
    do_something_with(joined_files)

dialog = QtGui.QFileDialog()
dialog.setFileMode(3) #allow selection of multiple files
dialog.filesSelected.connect(callback)
dialog.show() 
```

这样做的一个问题是没有以简单的方式向用户指示顺序 - “文件”文本框包含有序文件的名称，但是当您选择多个文件时这会很混乱。一种更好但稍微复杂一点的方法是构建一个小部件或对话框，其中包含用于选择文件的 FileDialog 和一个保存要处理的文件的 List/TableWidget，用户可以一次添加一个文件。这将允许更好的概览以及从多个目录中轻松选择文件和更好的可扩展性（例如过滤、重新排列、排序选择）。

# c - 为什么 windows 生成进程有时会触发错误 STATUS_SXS_ASSEMBLY_NOT_FOUND？

> ID：10969488
> 
> 赞同：0
> 
> 时间：2012-06-10T14:27:29.807
> 
> 标签：c, windows, spawn

所以，我有一小段 C 代码在 Windows 盒子上运行，上面写着：

```
/* invoke command */
impl->procHandle = _spawnve(_P_NOWAIT, command, vargs, env);
if (impl->procHandle == -1) {
  printf("Failed to invoke command: %s\n", strerror(errno));
  impl->busy = false;
}
printf("VICTORY\n"); 
```

我围绕这个写了一些单元测试，我的“命令”是 C:\windows\system32\ipconfig.exe 并且它可以工作，没问题。

试图将其用于应用程序启动器... doo doo。因有用的错误而失败：

```
The application failed to initialize properly (0xc0150004). 
Click on OK to terminate the application. 
```

好的...四处搜索我发现错误代码是STATUS_SXS_ASSEMBLY_NOT_FOUND，当我尝试启动notepad.exe时也会发生这种情况。缺少程序集？

为什么会这样？

我该如何解决它？

我只是在这里*猜测*，但我怀疑它与需要在 _spawnve() 中设置 PATH 变量有关，但我不知道它应该是什么。我尝试通过路径，但这似乎没有帮助。运行此代码：

```
int offset = 0;
while (vargs[offset] != NULL) {
  printf("vargs %d: %s\n", offset, vargs[offset]);
  ++offset;
}
offset = 0;
while (env[offset] != NULL) {
  printf("env %d: %s\n", offset, env[offset]);
  ++offset;
} 
```

产量：

```
vargs 0: C:\windows\system32\notepad.exe
env 0: PATH=c:\WINDOWS\system32 
```

IE。我传入 argv[0] 和一个路径值；不是其他环境变量或参数。

有任何想法吗？

--

编辑：

因此，似乎发生此错误是因为当我使用 _spawnve() 调用命令时未正确设置 PATH。

这通过调用 _spawnv() 或 _spawnvpe() 变得明显，这两者似乎都可以正常工作。

*但是*，这并没有真正帮助我，因为我需要在应用程序运行时为其指定一个额外的 PATH 组件。将 PATH=... 传递给 _spawnvpe() 会导致相同的错误，显然 _spawnv 没有被使用，因为它不允许您指定 PATH。

所以真的，这个问题的答案是：因为 PATH 变量是错误的。

...但我仍然不知道它*应该*是什么。似乎没有我在任何地方都可以找到的可行示例。我将接受任何链接到使用 _spawnve() 或 _spawnvpe() 的编码示例并将 PATH 变量传递给它（并且工作）的答案。

编辑#2：

真的。不，实际上，这不起作用。这是它不起作用的*示例。*忘记链接到一个有效的例子；只需修改我的示例并发布一个差异，即 1) 通过 PATH 和 2) 运行没有错误。

NB。想看看它的工作吗？更改为 _spawnv() 或将 env 值设为 NULL，它运行得很好。

```
#include <stdio.h>
#include <windows.h>
#include <process.h>
#include <errno.h>

int main(int argc, char *argv[]) {

  char *path_value;
  char buffer[4000];
  const char *env[2];
  const char *args[1];
  char *command;
  int result;
  intptr_t procHandle;

  path_value = getenv("PATH");
  sprintf(buffer, "PATH=%s", path_value);
  env[0] = buffer;
  env[1] = NULL;

  args[0] = NULL;

  int offset = 0;
  while (env[offset] != NULL) {
    printf("env %d: %s\n", offset, env[offset]);
    ++offset;
  }

  offset = 0;
  while (args[offset] != NULL) {
    printf("arg %d: %s\n", offset, args[offset]);
    ++offset;
  }

  command = "C:\\windows\\system32\\notepad.exe";

  procHandle = _spawnvpe(_P_NOWAIT, command, args, NULL);
  if (procHandle == -1) {
    printf("Failed to invoke command: %s\n", strerror(errno));
    exit(1);
  }

  _cwait(&result, procHandle, 0);
  if (result != 0)
    printf("Command exited with error code %d\n", result);
} 
```

输出：

```
env 0: PATH=.;c:\Program Files\Common Files\Microsoft Shared\Windows Live;c:\WINDOWS\system32;c:\WINDOWS;c:\WINDOWS\System32\Wbem;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;c:\Program Files\CMake 2.8\bin;c:\Program Files\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;c:\Program Files\Common Files\Microsoft Shared\Windows Live
Command exited with error code -1072365564 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:54:17.297

这是错误的：

```
const char *args[1];
args[0] = NULL; 
```

你需要

```
const char *args[2];
args[0] = "notepad";
args[1] = NULL; 
```

除此之外，您的示例代码至少在使用 Visual Studio 2010 编译时有效。我已经在 Windows 7 和 Windows XP 上对其进行了测试，并且可以正常工作。记事本运行。

你用的是什么编译器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:54:19.163

没错， _ 的第二个参数`spawnev()`是要执行的应用程序的名称，**包括其完整路径**。

要四处了解路径，您可以调用命令处理器`cmd.exe`并将其与应用程序的名称一起传递，以使用`cmd.exe`'s 选项作为参数执行`/C`。

`cmd.exe`这适用于您可以从命令行窗口之一启动应用程序的所有情况。

`cmd.exe`知道环境变量的值`PATH`并使用它来搜索应用程序的启动路径。

自身的路径`cmd.exe`可以从环境变量中读取`COMSPEC`。

**更新**：有关此问题的更多信息（包括示例），请阅读[此处](http://msdn.microsoft.com/en-us/library/20y988d2%28v=vs.110%29)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T07:28:22.413

[如此处_spawn, _wspawn Functions](http://msdn.microsoft.com/en-us/library/20y988d2%28v=vs.71%29.aspx)所指定，只有名称中带有“p”字母的函数才会隐式使用 PATH 环境变量。其他人没有。

所以你需要这样做：

```
char *args[] =  {"notepad.exe", NULL };
_spawnvpe(_P_NOWAIT, args[0], args, NULL); 
```

# sql - 使用 where 子句中的列优化查询

> ID：10969490
> 
> 赞同：2
> 
> 时间：2012-06-10T14:27:33.020
> 
> 标签：sql, database, database-agnostic

我有一个 sql 查询，它获取设计为低级队列的表中的前 N ​​行。

```
select top N * from my_table where status = 0 order by date asc 
```

此查询背后的意图如下：

*   首先，这个问题与数据库无关，因为我的实现将支持 sql server、oracle、DB2 和 sybase。上面“top N”的sql语法只是一个例子。
*   该表可以包含数百万行。
*   相比之下，N 是一个相对较小的数字，例如 100。
*   当行在队列中时状态为 0。稍后它变为 1 表示它正在处理中。处理后删除。因此，预计表中至少 90% 的行的状态为 0。
*   表中的行应根据其日期获取，因此该`order by`子句。

使此查询最快运行的最佳索引是什么？

我最初认为索引应该是 on `(date, status)`，但我不确定了。由于状态列将大部分包含零，它是否有附加值？单独索引就足够了`(date)`吗？
或者也许应该是`(status, date)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:54:22.450

我认为没有独立于 RDMS 的有效解决方案。例如，Oracle 有位图索引，SQLServer 有部分索引，如果 Mysql 或 Sqlite 没有类似的东西，我看不出不使用它们的理由。此外，从历史上看，SQLServer 实现聚簇表（或 Oracle 世界中的 IOT）的方式比 Oracle 更好，因此在日期列上具有聚簇索引可能对 SQLServer 非常有效，但不适用于 Oracle。

我宁愿改变一点方法。如果您说 90% 的行不满足`status=0`条件，为什么不尝试重构模式，并添加一个仅包含您感兴趣的记录的新表（或物化视图）？即使 RDMS 不直接支持物化视图，保持该表最新并将数据与原始表合并所需的新可编程对象的数量也相对较少。此外，如果可以重新设计底层逻辑，使行永远不会更新，只会插入或删除，那么这将有助于避免锁争用，从而使整个系统具有更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:04:28.290

在 Date 上有一个聚集索引，在 Status 上有一个非聚集索引。

# wcf - n 层、Linq 和 WCF

> ID：10969491
> 
> 赞同：0
> 
> 时间：2012-06-10T14:27:35.503
> 
> 标签：wcf, performance, linq, serialization, deserialization

我们有一个 n 层架构：

- 与数据库通信并处理所有业务逻辑的 WCF 服务。-与 WCF 服务通信的 ASP.NET MVC 网站。

这是从数据库到“吉他”的 html 视图的数据序列化-反序列化的场景：

-Guitar_1 由 linq 生成的类，-Guitar_2 由 WCF 服务公开并由 ASP.NET MVC 网站使用的 DataContract。-Guitar_3 模型传递给视图

当最终用户想要取回吉他时，Guitar_1 被转换为 Guitar_2，然后转换为 Guitar_3。这确实不是问题，但如果最终用户请求吉他列表，那么所有这些过程都会为每把吉他重复（一个循环）。

如果我必须以编程方式处理所有序列化-反序列化的东西，我每层只有一个类。例如，它仍然可以通过在 Linq 类上注释“DataContract”/“DataMember”在 wcf 项目中完成，但是如果我刷新我的数据库模型，我的所有注释都会消失（在 ASP.NET MVC 项目上也是如此，刷新服务参考删除所有添加的代码）。

此外，使用这些自动序列化程序真的更有效率吗？编写序列化器-反序列化器所花费的时间与注释类（DataContract/DataMember）和处理类 Guitar_1 到 Guitar_2 的转换一样多......再加上性能损失（循环和转换）......

你们有什么感想？因为这个，你们中的一些人会像过去一样编码吗？

**更新**：正如“Abhijit Kadam”所建议的，我在使用 web 服务时使用了**部分类**，但是，在使用 Linq2SQL 时我找到了一个更好的解决方案：POCO 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:20:52.647

如果主要关注的是框架创建的模型类会自动重新生成，并且您的更改就像此类类上的注释被清除了，那么在这种情况下，您可以使用[部分类，请参见此处的信息](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)。如果自动生成的类是 Employee。然后在单独的文件中创建一个部分类 Employee 并在此部分定义中包含要注释的字段。这个阶级不会被消灭和再生。但是，当您编译代码时，生成的 Employee 类将是原始 Employee 类 + 部分定义的 Employee 类的组合。

从 Guitar_1 类转换为 Guitar_2 也是可以的，有时我们必须这样做以满足特定要求。我更喜欢通过网络传输 JSON 数据，例如从 WCF 到 MVC Web，然后浏览器将从 MVC APP 获取 json 数据。然后我使用 jsrender 或 knockout 等框架在客户端（浏览器）上将数据呈现为 HTML。JSON 是可读的、紧凑的并且 javascript 和 javascript 库喜欢 json。

# java - JAVA：方法和使用一个类

> ID：10969492
> 
> 赞同：-2
> 
> 时间：2012-06-10T14:27:43.537
> 
> 标签：java

我想在一个类中使用不同的方法。但我知道`main`编译器只会读取该方法。那么如何在`main`方法中使用其他方法、对象和数据呢？你能给我一个简单的例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:31:50.820

Java 编译器`javac`将编译所有方法。JVM将从可以从当前类或其他类调用其他方法的方法*开始*执行程序。`main()`有关更多信息，请参阅 java 教程（例如由 Sergeii 或任何其他人引用）。

祝您学习 Java 愉快！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:29:08.323

尝试阅读 Oracle (Sun)的[教程](http://docs.oracle.com/javase/tutorial/getStarted/application/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T15:26:48.553

`Entry point of a program in Java is its Main`，并且每个程序必须有一个且只有一个主程序（在Java Web App中，没有main方法）。

尝试阅读`Head First Java by Kathy Sierra and Bert Bates`……学习起来很棒而且很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T14:33:30.647

```
public class A{

  public void print(){ System.out.println("Printing"); }

  public static void printStatic(){ System.out.println("static Printing"); }

  public static void main(String args[]){  

    printStatic();
    A.printStatic();

    new A().print();
  }
} 
```

上面的代码有你需要的，但我建议你学习基本的java。

# php - 如何在将用户数据发送到 mySQL 之前对其进行清理？

> ID：10969497
> 
> 赞同：0
> 
> 时间：2012-06-10T14:28:34.673
> 
> 标签：php, mysql, security, sanitization

我正在做一个论坛。

我想在将输入数据（即用户的帖子）发送到 MySQL 数据库之前对其进行清理。

我已经在搜索一些功能来做到这一点，但我不确定我是否已经使用了足够多的功能以及它们是否都足够安全。欢迎任何建议。

这是我的代码：

```
$message=$_POST['answer'];
$message=nl2br($message); //adds breaks to my text
$message=stripslashes($message); //removes backslahes (needed for links and images)
$message=strip_tags($message, '<p><a><b><i><strong><em><code><sub><sup><img>'); //people can only use tags inside 2nd param
$message = mysql_real_escape_string($message); //removes mysql statements i think (not sure) 
```

**编辑：**请告诉我是否应该向 strip_tags 函数添加一些标签。也许我忘记了一些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:41:20.293

尝试改用 PDO。它具有强大的绑定功能，真正提高了安全性。这里有一些例子： http: [//php.net/manual/pl/pdostatement.bindvalue.php](http://php.net/manual/pl/pdostatement.bindvalue.php)

PDO 在 PHP5 中是默认的，现在几乎无处不在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:51:44.187

如果您想允许在论坛中使用有限的 HTML（如您使用 strip_tags() 的方式所见），请使用[HTMLPurifier](http://htmlpurifier.org/)；否则，您在这些标签的属性中很容易受到 javascript 的攻击。

顺便说一句，现在您正在剥离`<br>`您添加的标签

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-10T14:43:03.863

当您保存到数据库时：

```
$message=strip_tags($message, '<p><a><b><i><strong><em><code><sub><sup><img>'); //people can only use tags inside 2nd param
$message = mysql_real_escape_string($message); //removes mysql statements i think (not sure) 
```

当你输出：

```
$message=nl2br($message); //adds breaks to my text
$message=stripslashes($message); //removes backslahes (needed for links and images) 
```

此外，当您写入 html 输入元素时使用[htmlspecialchars](http://codeigniter.com/)`text`或`textarea`

OBS：不要重新发明轮子。学习一些 PHP 框架，如[codeigniter](http://codeigniter.com/)，它提供了非常安全的数据管理方式。.

# c++ - crtdbg.h 是否与 DirectX 冲突？

> ID：10969502
> 
> 赞同：1
> 
> 时间：2012-06-10T14:29:02.850
> 
> 标签：c++, directx, crtdbg.h

我刚刚发现了隐藏的宝石`crtdbg.h`，它使内存泄漏检测变得更加容易。不幸的是，当我今天将 DirectX 链接到我的程序时，我遇到了一些我以前从未见过的错误。

```
1>e:\program files (x86)\microsoft directx sdk (june 2010)\include\d3dx10math.h(425): error C2059: syntax error : 'constant'
1>e:\program files (x86)\microsoft directx sdk (june 2010)\include\d3dx10math.h(425): error C2091: function returns function
1>e:\program files (x86)\microsoft directx sdk (june 2010)\include\d3dx10math.h(425): error C2802: static member 'operator new' has no formal parameters
1>e:\program files (x86)\microsoft directx sdk (june 2010)\include\d3dx10math.h(426): error C2059: syntax error : 'constant'
1>e:\program files (x86)\microsoft directx sdk (june 2010)\include\d3dx10math.h(426): error C2090: function returns array
1>e:\program files (x86)\microsoft directx sdk (june 2010)\include\d3dx10math.inl(1003): error C2761: 'void *(__cdecl *_D3DXMATRIXA16::operator new(void))(size_t)' : member function redeclaration not allowed
1>e:\program files (x86)\microsoft directx sdk (june 2010)\include\d3dx10math.inl(1003): fatal error C1903: unable to recover from previous error(s); stopping compilation 
```

似乎当 crtdbg 覆盖 new 运算符时，它破坏了 DirectX SDK 中的某些内容（如果您没有注意到错误，我正在使用 DirectX 11 SDK）。有这样的记录吗？几次搜索没有产生任何结果。我真的希望我可以继续使用这些内存调试工具，任何解决方法都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:22:29.543

好的，我想通了。我[通过谷歌找到了这篇文章。](https://stackoverflow.com/a/5057248/953613)（我希望 Stack Overflow 在我输入此内容时在侧边栏上向我展示了它！或者它确实展示了它，但我错过了它......）。

基本上，我需要将包含 of`crtdbg.h`和`stdlib.h`of 的定义移动`_CRTDBG_MAP_ALLOC`到单独的标题中，并使用项目属性页面中**C/C++** >> **Advanced**`Forced Include File`下的选项强制包含文件无处不在。这似乎使它覆盖所有其他覆盖。****`new`****

# php - Facebook登录重定向PHP / Javascript不起作用

> ID：10969509
> 
> 赞同：1
> 
> 时间：2012-06-10T14:29:11.273
> 
> 标签：php, javascript, facebook, redirect, login

我浏览了该网站上的许多帖子，但仍然无法让 Facebook 登录和重定向工作。当用户通过按网页上的按钮通过 Facebook 登录时，我想自动将他们重定向到另一个网页并通过 url 传递他们的电子邮件和密码。不幸的是，我只能让它在他们登录时工作，我必须手动重新加载页面以通过刷新我的网页来让他们进入重定向页面。我想知道是否有人可以发布有关如何执行此操作的代码？我试过很多东西。

```
<?php

 //uses the PHP SDK.  Download from https://github.com/facebook/php-sdk
 require 'facebook.php';

define('YOUR_APP_ID', 'xxxx');

$facebook = new Facebook(array(
    'appId'  => 'xxxx',
   'secret' => 'xxxx',
  ));   

?>

<div id="fb-root"></div>
<div id="user-info"></div>
     <div class="fb-login-button" style="position:absolute;top:800px;">Login with Facebook</div>

<script>

    window.fbAsyncInit = function() {
      FB.init({ appId: 'xxxx', 
            status: true, 
            cookie: true,
            xfbml: true,
            oauth: true});

  function updateButton(response) {
    var button = document.getElementById('fb-auth');

    if (response.authResponse) {
      //user is already logged in and connected
      var userInfo = document.getElementById('user-info');
      FB.api('/me', function(response) {
        userInfo.innerHTML = '<img src="https://graph.facebook.com/' 
      + response.id + '/picture">' + response.email;
        button.innerHTML = 'Logout';

             });
      button.onclick = function() {
        FB.logout(function(response) {
          var userInfo = document.getElementById('user-info');
          userInfo.innerHTML="";
    });
      };

} 

    else {
      //user is not connected to your app or logged out
      button.innerHTML = 'Login';
      button.onclick = function() {
        FB.login(function(response) {
      if (response.authResponse) {
            FB.api('/me', function(response) {
          var userInfo = document.getElementById('user-info');
          userInfo.innerHTML = 
                '<img src="https://graph.facebook.com/' 
            + response.id + '/picture" style="margin-right:5px"/>' 
            + response.name;

        });    
          } else {
            //user cancelled login or did not grant authorization
          }
        }, {scope:'email'});    
      }
    }
  }

  // run once with current status and whenever the status changes
  FB.getLoginStatus(updateButton);
  FB.Event.subscribe('auth.statusChange', updateButton);    
};

(function() {
  var e = document.createElement('script'); e.async = true;
  e.src = document.location.protocol 
    + '//connect.facebook.net/en_US/all.js';
  document.getElementById('fb-root').appendChild(e);
}());

</script>

<?php

   $uid = $facebook->getUser();
    if($uid != 0) {
        header("Location: signup.php");
      }   

    ?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-10T14:37:43.740

主要`header('Location')`用于 facebook 应用程序不起作用。

我假设其余代码正在运行，因此唯一需要的更改是

```
$uid = $facebook->getUser();
if($uid != 0) {
    echo("<script> top.location.href='your-login-url'</script>");
    return;
} 
```

希望这可以帮助

# xcode - XCode Storyboard 如何访问故事板中的所有视图控制器

> ID：10969512
> 
> 赞同：0
> 
> 时间：2012-06-10T14:29:28.663
> 
> 标签：xcode, storyboard

在单视图应用程序中，如果我有多个视图控制器分配有不同的类，则在情节提要内部，

我怎样才能在 AppDelegate 中访问所有这些，同时仍然知道 ViewController 的类型（类）是什么？

例如我可以访问的根视图控制器

```
BlackTimer *vc = (BlackTimer *)_window.rootViewController; 
```

其他兄弟视图控制器怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:37:34.263

在您的应用程序委托内创建您的兄弟 UIViewControllers 的 iVar，然后每当您调用视图控制器时，您分配初始化应用程序委托内的 ivar。您可以通过使用从任何地方获取对应用程序委托的引用

```
[UIApplication sharedApplication] delegate]; 
```

# android - 如何覆盖 TimePicker 以更改文本颜色

> ID：10969513
> 
> 赞同：0
> 
> 时间：2012-06-10T14:30:05.587
> 
> 标签：android, colors, overriding, android-4.0-ice-cream-sandwich, timepicker

我的观点有一个白色的背景，它必须保持这种状态。我在那个白色背景上有一个 TimePicker。android 2.3.3 一切正常，但 android 4.0.3 有一个新的 timePicker 样式。数字有一个非常明亮的颜色。在白色背景上很难看到它们，而且我没有找到直接更改 textColor 的方法。我不想改变背景，因为它看起来不太好。

有没有办法覆盖它并将数字的颜色设置为黑色？

真诚的，沃尔芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T09:24:04.957

使用这个功能

```
public static boolean setNumberPickerTextColor(NumberPicker numberPicker, int color) {
final int count = numberPicker.getChildCount();
for (int i = 0; i < count; i++) {
  View child = numberPicker.getChildAt(i);
  if (child instanceof EditText) {
    try {
      Field selectorWheelPaintField =
          numberPicker.getClass().getDeclaredField("mSelectorWheelPaint");
      selectorWheelPaintField.setAccessible(true);
      ((Paint) selectorWheelPaintField.get(numberPicker)).setColor(color);
      ((EditText) child).setTextColor(color);
      numberPicker.invalidate();
      return true;
    } catch (NoSuchFieldException e) {
      Log.w("setNumberPickerTextColor", e);
    } catch (IllegalAccessException e) {
      Log.w("setNumberPickerTextColor", e);
    } catch (IllegalArgumentException e) {
      Log.w("setNumberPickerTextColor", e);
    }
  }
}
return false; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:41:51.933

看看styles.xml的android源码

[https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml)

然后，您在活动/时间选择器上设置样式，看起来您可以执行以下操作：

```
<style name="MyTimePicker" parent="@android:style/Widget.TimePicker">
    <item name="android:textColor">#000000</item>
</style> 
```

或者可能（仅限 3.0 及更高版本）

```
<style name="MyHoloTimePicker" parent="@android:style/Widget.Holo.TimePicker">
    <item name="android:textColor">#000000</item>
</style> 
```

那么你的xml将是：

```
<TimePicker
 style="@style/MyHoloTimePicker"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" /> 
```

# python - Hadoop不可分割的TextInputFormat

> ID：10969517
> 
> 赞同：0
> 
> 时间：2012-06-10T14:30:33.693
> 
> 标签：python, hadoop, amazon-web-services, streaming, amazon-emr

有没有办法将整个文件发送到映射器而不被拆分？

我已经读过[这个](http://hadoop.apache.org/common/docs/r0.20.203.0/streaming.pdf)，但我想知道是否有另一种方法可以做同样的事情而不必生成中间文件。理想情况下，我想要 Hadoop 命令行上的现有选项。

我`streaming`在 Amazon EMR 上使用带有 Python 脚本的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:42:48.110

只需将配置属性设置`mapred.min.split.size`为巨大的（10G）：

```
-D mapred.min.split.size=10737418240 
```

或者使用不可拆分的编解码器 (Gzip) 压缩输入文件。使用 .gz 扩展名，TextInputFormat 将向`isSplittable(FileSystem, Path)`方法返回 false

# matlab - 在矩阵中查找条目匹配某些约束的行？

> ID：10969521
> 
> 赞同：2
> 
> 时间：2012-06-10T14:30:53.687
> 
> 标签：matlab, matrix

我在 Matlab 中有一个矩阵，想要找到所有行的索引，其中*一些*列满足特定标准。

例子

```
M =

 1     5     9    13
 2     6    10    14
10    14    11    15
 4     8    10    14 
```

现在我想找到所有行的 incedeces，其中`M(:,3) == 10 AND M(:,4) == 14`.

结果应该是：

```
R =

 0
 1
 0
 1 
```

我虽然关于类似的东西

```
find(ismember(M,[* * 10 14]),1) 
```

但`ismember()`不适用于通配符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:32:42.820

```
R = (M(:,3) == 10 & M(:,4) == 14); 
```

应该足够了。

# android - TextToSpeech - 安卓

> ID：10969525
> 
> 赞同：1
> 
> 时间：2012-06-10T14:31:42.287
> 
> 标签：android, text-to-speech

我正在做一个简单的游戏。第一轮的想法是，第一个活动有 26 个按钮（图像） - 英文字母，我想让它在按钮单击时发音。例如，当我按下“a”按钮时，它必须说“a”。如何获取每个按钮的 ID，然后获取它的字符串并将其作为参数提供给 speak() 方法？提前致谢 ！

代码在这里：

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Vibrator;
import android.widget.Button;
import android.widget.TableLayout;
import android.widget.TableRow;

import java.util.Locale;
import java.util.Random;

import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;

public class FirstActivity extends Activity {

    /** Called when the activity is first created. */

    TextToSpeech ttx;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.firstact);

        ttx = new TextToSpeech(
                FirstActivity.this, 
                new TextToSpeech.OnInitListener() {

            public void onInit(int status) {
                // TODO Auto-generated method stub
                if(status !=TextToSpeech.ERROR){
                    ttx.setLanguage(Locale.US);                 
                }

            }
        });

        TableLayout table = (TableLayout) findViewById(R.id.table);

        String alphabet = "abcdefghijqlmnopqrstuvwxyz";

        int pos = 0;
        for (int i = 0; i < 7; i++) {
            TableRow row = new TableRow(this);
            for (int j = 0; j < 4; j++) {
                if (pos == 26) {
                    break;
                }
                Button but = new Button(this);
                /*but.setOnClickListener(btnListener);*/
                but.setText(Character.toString(alphabet.charAt(pos++)));
                but.setHeight(80);
                but.setWidth(70);
                but.setBackgroundResource(R.drawable.burti);
                row.addView(but);
                but.setId(pos);

                 but.setOnClickListener((OnClickListener) this);

            table.addView(row);

        }}

    }
    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        if(ttx != null){
            ttx.stop();
            ttx.shutdown();     
        }
        super.onPause();
    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub

        String pressed = but.getText().toString(); //error here....
        ttx.speak(pressed, TextToSpeech.QUEUE_FLUSH, null);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:35:31.160

我做了一个工作示例： http: [//frank.anemaet.nl/android/TalkingButtons.zip](http://frank.anemaet.nl/android/TalkingButtons.zip) 这是工作代码的片段：

```
for (int i = 0; i < alphabet.length(); i++)
    {
        TableRow row = new TableRow(this);
        Button but;
        but = new Button(this);
        but.setText(Character.toString(alphabet.charAt(i)));
        but.setHeight(button_width);
        but.setWidth(button_height);
        but.setId(i);

        but.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
              performClick(v);
            }
          });

        row.addView(but);
        table.addView(row);
    } 
```

...

```
public void performClick(View arg0){

    Button tv = (Button)findViewById(arg0.getId());
    String pressed = tv.getText().toString(); 
    ttx.speak(pressed, TextToSpeech.QUEUE_FLUSH, null);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:00:53.500

你的 onInit() 方法必须做更多的事情，比如当用户没有安装语言数据时处理。请参阅[此代码](https://github.com/gast-lib/gast-lib/tree/master/library/src/root/gast/speech/tts)以获取帮助程序类。

# textures - 苹果的织物纹理是如何生成的？

> ID：10969526
> 
> 赞同：3
> 
> 时间：2012-06-10T14:31:43.847
> 
> 标签：textures

苹果现在在很多产品中都使用了这种纹理：

![在此处输入图像描述](../Images/3615ab7c2f31ca5a7874b9e6b982c485.png)

仔细看看：

![在此处输入图像描述](../Images/41201758237d737db0fb4383a5db0062.png)

你可以看到它不仅仅是一堆线条：它有一个随机元素。一般来说，这如何实现？我对实现的兴趣不如对概念的兴趣。我在网上查过，但找不到任何提示。如果这个概念太宽泛而无法在这里完全涵盖，我会很高兴有一些阅读材料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:36:18.683

您应该研究的技术称为[纹理合成](https://en.wikipedia.org/wiki/Texture_synthesis)和[程序纹理生成](https://en.wikipedia.org/wiki/Procedural_texture)。在文献中，有许多算法可以基于样本纹理（例如，岩石、大理石或其他材料的照片）或基于输入参数（随机数量、纹理结构、等等）。一些算法在他们可以完成的事情上是相当惊人的。

# cocos2d-iphone - Cocos2d 2.0 - 找不到 spriteFrame？

> ID：10969528
> 
> 赞同：0
> 
> 时间：2012-06-10T14:32:01.677
> 
> 标签：cocos2d-iphone

我正在使用 Cocos2D 2.0 为 iPad 开发。

我有这些行：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"atlas.plist"];
CCSpriteBatchNode *batchNode = [CCSpriteBatchNode batchNodeWithFile:@"atlas.png"];
[self addChild:batchNode];

CCSprite *mySprite = [CCSprite spriteWithFrameName:@"white.png"]; 
```

它因此错误而惨遭失败：

**Cocos2d: CCSpriteFrameCache: Frame 'white.png' not found *** Assertion failure in -[CCSprite initWithSpriteFrame:], /Users/myUser/Documents/MyApp/MyApp/libs/cocos2d/CCSprite.m:212**

我已经使用 TexturePacker 生成了 plist。TexturePacker 创建了 4 个文件：atlas-ipadhd.plis、atlas-ipadhd.png、atlas.plist 和 atlas.png。

**white-ipadhd.png 是 2x2 白色图片。white.png 是 1x1 白色图片。**

这是atlas-ipadhd的内容

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <dict>
        <key>frames</key>
        <dict>
            <key>white-ipadhd.png</key>
            <dict>
                <key>frame</key>
                <string>{{162,2},{2,2}}</string>
                <key>offset</key>
                <string>{0,0}</string>
                <key>rotated</key>
                <false/>
                <key>sourceColorRect</key>
                <string>{{0,0},{2,2}}</string>
                <key>sourceSize</key>
                <string>{2,2}</string>
            </dict>
            <key>bgNormal-ipadhd.png</key>
            <dict>
                <key>frame</key>
                <string>{{2,2},{348,78}}</string>
                <key>offset</key>
                <string>{0,0}</string>
                <key>rotated</key>
                <true/>
                <key>sourceColorRect</key>
                <string>{{0,0},{348,78}}</string>
                <key>sourceSize</key>
                <string>{348,78}</string>
            </dict>
            <key>bgPressed-ipadhd.png</key>
            <dict>
                <key>frame</key>
                <string>{{82,2},{348,78}}</string>
                <key>offset</key>
                <string>{0,0}</string>
                <key>rotated</key>
                <true/>
                <key>sourceColorRect</key>
                <string>{{0,0},{348,78}}</string>
                <key>sourceSize</key>
                <string>{348,78}</string>
            </dict>
        </dict>
        <key>metadata</key>
        <dict>
            <key>format</key>
            <integer>2</integer>
            <key>realTextureFileName</key>
            <string>atlas-ipadhd.png</string>
            <key>size</key>
            <string>{256,512}</string>
            <key>smartupdate</key>
            <string>$TexturePacker:SmartUpdate:f709325b7d140d102cd10dd90ef475b0$</string>
            <key>textureFileName</key>
            <string>atlas-ipadhd.png</string>
        </dict>
    </dict>
</plist> 
```

**这是 atlas.plist**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <dict>
        <key>frames</key>
        <dict>
            <key>white.png</key>
            <dict>
                <key>frame</key>
                <string>{{84,2},{1,1}}</string>
                <key>offset</key>
                <string>{0,0}</string>
                <key>rotated</key>
                <false/>
                <key>sourceColorRect</key>
                <string>{{0,0},{1,1}}</string>
                <key>sourceSize</key>
                <string>{1,1}</string>
            </dict>
            <key>bgNormal.png</key>
            <dict>
                <key>frame</key>
                <string>{{2,2},{174,39}}</string>
                <key>offset</key>
                <string>{0,0}</string>
                <key>rotated</key>
                <true/>
                <key>sourceColorRect</key>
                <string>{{0,0},{174,39}}</string>
                <key>sourceSize</key>
                <string>{174,39}</string>
            </dict>
            <key>bgPressed.png</key>
            <dict>
                <key>frame</key>
                <string>{{43,2},{174,39}}</string>
                <key>offset</key>
                <string>{0,0}</string>
                <key>rotated</key>
                <true/>
                <key>sourceColorRect</key>
                <string>{{0,0},{174,39}}</string>
                <key>sourceSize</key>
                <string>{174,39}</string>
            </dict>
        </dict>
        <key>metadata</key>
        <dict>
            <key>format</key>
            <integer>2</integer>
            <key>realTextureFileName</key>
            <string>atlas.png</string>
            <key>size</key>
            <string>{128,256}</string>
            <key>smartupdate</key>
            <string>$TexturePacker:SmartUpdate:c3c8dd4637d116b049a6b55c8ad175d0$</string>
            <key>textureFileName</key>
            <string>atlas.png</string>
        </dict>
    </dict>
</plist> 
```

这是 atlas-ipadhd.png 和 atlas.png

![在此处输入图像描述](../Images/988c5a76814400c0ac0932f1463585b2.png) ![在此处输入图像描述](../Images/0f48238d2ce2b75e1c4a21e761c2878e.png)

看了几个小时后，我找不到这些文件有什么问题……但它仍然会发生灾难性的崩溃。

任何线索？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:48:52.037

精灵帧名称应为 atlas-ipadhd.plist 中的 white.png。

直接从马嘴里：

```
+(id)spriteWithSpriteFrameName:(NSString*)spriteFrameName
{
    CCSpriteFrame *frame = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:spriteFrameName];

    NSAssert1(frame!=nil, @"Invalid spriteFrameName: %@", spriteFrameName);
    return [self spriteWithSpriteFrame:frame];
} 
```

没有尝试使用设备特定键更正框架名称。这样，您的代码可以完全与设备无关，您只需为资源（纹理和 plist）提供适当的设备特定文件名。

# bash - grep 日志文件中特定日期的所有行

> ID：10969531
> 
> 赞同：2
> 
> 时间：2012-06-10T14:32:48.260
> 
> 标签：bash, date, grep

我需要在 /var/log/messages 中对“昨天”的所有行进行 grep。当我使用以下代码段时，由于日期格式为“Jun 9”，我得到零结果。（此处不显示，但在日志文件中，当月的天数小于 10 时，会用额外的空格填充）。

```
cat /var/log/messages | grep `date --date="yesterday" +%b\ %e` 
```

当我进入

```
$ date --date="yesterday" +%b\ %e 
```

在命令行上，它返回昨天的日期，并带有填充。

但是当我将它与 grep 和反引号结合使用时，额外的填充被抑制，这给了我零结果。

我需要更改什么才能*使用*额外的填充对“日期”进行评估？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T14:41:22.043

您应该可以通过在反引号周围加上引号来解决此问题：

```
cat /var/log/messages | grep "`date --date="yesterday" +%b\ %e`" 
```

# c# - 在禁用按钮上创建模糊效果

> ID：10969532
> 
> 赞同：7
> 
> 时间：2012-06-10T14:32:51.493
> 
> 标签：c#, wpf, xaml, triggers

我正在尝试制作一个按钮，该按钮在禁用时会变得模糊。

到目前为止，这就是我所拥有的：

```
<Style x:Key="BluredButton" TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border x:Name="Chrome" Background="{TemplateBinding Background}" SnapsToDevicePixels="true" CornerRadius="10" BorderThickness="1">
                    <Border.Effect>
                        <BlurEffect Radius="0"/>
                    </Border.Effect>
                    <Border.BorderBrush>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF7D8F93" Offset="0"/>
                            <GradientStop Color="#FF5797A7" Offset="0.997"/>
                        </LinearGradientBrush>
                    </Border.BorderBrush>
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Border>
                <ControlTemplate.Triggers>
                    <EventTrigger RoutedEvent="FrameworkElement.Loaded"/>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="#ADADAD"/> 
                        <!--How do I set BlurEffect.Radius here?-->
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

按钮被禁用后，我想将模糊半径设置为 3。

我怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T14:46:50.897

您可以`Effect`在`Trigger`

```
<Setter TargetName="Chrome" Property="Effect">
    <Setter.Value>
        <BlurEffect Radius="3"/>
    </Setter.Value>
</Setter> 
```

所以它看起来像这样

```
<ControlTemplate TargetType="{x:Type Button}">
    <Border x:Name="Chrome" Background="{TemplateBinding Background}" SnapsToDevicePixels="true" CornerRadius="10" BorderThickness="1">
        <Border.BorderBrush>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FF7D8F93" Offset="0"/>
                <GradientStop Color="#FF5797A7" Offset="0.997"/>
            </LinearGradientBrush>
        </Border.BorderBrush>
        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
    </Border>
    <ControlTemplate.Triggers>
        <EventTrigger RoutedEvent="FrameworkElement.Loaded"/>
        <Trigger Property="IsEnabled" Value="false">
            <Setter Property="Foreground" Value="#ADADAD"/>
            <Setter TargetName="Chrome" Property="Effect">
                <Setter.Value>
                    <BlurEffect Radius="3"/>
                </Setter.Value>
            </Setter>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T11:29:20.983

您可以使用 WPF Transitionz 动画库（[Github](https://github.com/ABTSoftware/SciChart.Wpf.UI/blob/master/SciChart.Wpf.UI.Transitionz/Transitionz.Blur.cs)、[NuGet](https://www.nuget.org/packages/SciChart.Wpf.UI.Transitionz/)）来做到这一点

以下代码：

```
<Window x:Class="WpfApplication15.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:tz="http://schemas.abtsoftware.co.uk/transitionz"
        xmlns:wpfApplication15="clr-namespace:WpfApplication15"
        mc:Ignorable="d"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="b2vc"></BooleanToVisibilityConverter>
        <wpfApplication15:BluParamsWhenTrueConverter x:Key="bpc" From="0" To="10" Duration="200"></wpfApplication15:BluParamsWhenTrueConverter>
    </Window.Resources>
    <Grid>
        <CheckBox x:Name="CheckBox" Content="Is Visible?" IsChecked="False"></CheckBox>
        <TextBlock Foreground="#AAA" Margin="10" TextWrapping="Wrap" Text="Lorem ipsum .. TODO insert a lot of text here "
                   tz:Transitionz.Blur="{Binding ElementName=CheckBox, Path=IsChecked, Converter={StaticResource bpc}}"/>
        <TextBlock Text="Hello World!" FontSize="44" HorizontalAlignment="Center" VerticalAlignment="Center"
            Visibility="Collapsed"
            tz:Transitionz.Opacity="{tz:OpacityParams From=0, To=1, Duration=200, TransitionOn=Visibility}"
            tz:Transitionz.Translate="{tz:TranslateParams From='10,0', To='0,0', Duration=200, TransitionOn=Visibility}"
            tz:Transitionz.Visibility="{Binding ElementName=CheckBox, Path=IsChecked, Converter={StaticResource b2vc}}"/>
    </Grid>
</Window>

using System;
using System.Globalization;
using System.Windows.Data;
using SciChart.Wpf.UI.Transitionz;

namespace WpfApplication15
{
    public class BluParamsWhenTrueConverter : IValueConverter
    {
        public double Duration { get; set; }
        public double From { get; set; }
        public double To { get; set; }

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return ((bool)value) ? 
                new BlurParams() {  Duration = Duration, From = From, To = To, TransitionOn = TransitionOn.Once} : 
                new BlurParams() { Duration = 200, From = To, To = From, TransitionOn = TransitionOn.Once};
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

结果在此输出中，它允许在属性更改时模糊背景和前景的不透明动画：

[![在此处输入图像描述](../Images/c6a74c83f8cb42a6aba3a8326428c4e1.png)](https://i.stack.imgur.com/qnYc3.gif)

# titanium - 带有自定义行的 Titanium TableViewRow 类名

> ID：10969535
> 
> 赞同：2
> 
> 时间：2012-06-10T14:33:03.843
> 
> 标签：titanium, tableview, allocation, classname

我想知道 Ti.UI.TableViewRow 的“className”属性在创建自定义行时有什么帮助。

例如，我通过以下方式使用自定义行填充 tableview：

```
function populateTableView(tableView, data) {
  var rows = [];
  var row;
  var title, image;
  var i;

  for (i = 0; i < data.length; i++) {
    title = Ti.UI.createLabel({
      text : data[i].title,
      width : 100,
      height: 30,
      top: 5,
      left: 25
    });
    image = Ti.UI.createImage({
      image : 'some_image.png',
      width: 30,
      height: 30,
      top: 5,
      left: 5
    });

    /* and, like, 5+ more views or whatever */

    row = Ti.UI.createTableViewRow();

    row.add(titleLabel);
    row.add(image);

    rows.push(row);
  }

  tableView.setData(rows);
} 
```

当然，这个“自定义”行的示例很容易使用 TableViewRow 的标准`title`和`image`属性创建，但这不是重点。如何防止分配新标签、图像视图和表格视图的其他子视图以支持它们的重用？我知道在 iOS 中，这是通过使用`-[UITableView dequeueReusableCellWithIdentifier:]`从“reservoir”（因此“className”在这里是“标识符”）获取行对象的方法来实现的，该对象当前未用于显示数据，但已经具有所需的子视图在其中正确布局，因此只需要更新其中包含的数据（文本、图像数据等）。

由于这个系统非常简单，我很难相信 Titanium API 使用的方法不支持这个。

在阅读 API 并搜索网络后，我确实怀疑是这种情况。推荐使用“className”属性作为在 Titanium 中提高表格视图效率的简单方法，但未以任何方式解释其与自定义表格视图行的关系。如果有人能为我澄清这件事，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:58:30.923

Titanium SDK 用于`-[UITableView dequeueReusableCellWithIdentifier:]`重用单元格布局。在 UITableView 代理（Titanium SDK 2.1.3）中，你有这个：

**TiUITableView.m（第 1720 行）**

```
- (UITableViewCell *)tableView:(UITableView *)ourTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...
    UITableViewCell *cell = [ourTableView dequeueReusableCellWithIdentifier:row.tableClass];
    ...
} 
```

此代码用于重用布局单元。您可以在 Apple 文档中查看有关此方法[的更多信息。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier%3a)

# html - 浮动 div 垂直对齐 div

> ID：10969537
> 
> 赞同：-2
> 
> 时间：2012-06-10T14:33:21.430
> 
> 标签：html, css, css-float, vertical-alignment

> **可能重复：**
> [最佳实践在 div 上垂直对齐中心内容](https://stackoverflow.com/questions/10968726/best-practice-vertical-align-center-content-on-div)

如何使用相同的 CSS 为两个正方形垂直对齐中心 .content。

[例子](http://jsfiddle.net/Sha6m/9/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:17:45.077

这是解决方案-> [http://jsfiddle.net/Sha6m/12/](http://jsfiddle.net/Sha6m/12/)。

您需要添加`display: table-cell;`到内部 .content 中，将*它们的*垂直对齐设置为 middle ( `vertical-align: middle;`) 并给它们相同的`height`和它们的父 .area （不幸的是`width`，100% 的宽度和高度在这里不起作用，所以当你改变`.area`高度和宽度，您还必须为 .content div 执行此操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:49:48.427

当你得到一个固定的高度时，我会添加一个`line-height: 100px;`并删除你的`vertical-align`和`display`

[jsfiddle修改](http://jsfiddle.net/Sha6m/14/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T14:58:35.187

您正在应用`display table-cell`错误的元素。您必须将它们包装在容器中，然后应用于`display: table cell`该容器。检查我的例子-> [http://jsfiddle.net/Sha6m/10/](http://jsfiddle.net/Sha6m/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T14:36:06.870

`style='vertical-align:middle'`..

# c - C语言中的议程/调度程序/日历

> ID：10969538
> 
> 赞同：0
> 
> 时间：2012-06-10T14:33:22.180
> 
> 标签：c

我需要有一个想法来编写我应该做的程序的一部分。

这部分旨在成为一个议程，如果我们可以安排一些事情并检查我们在进行新约会时遇到了什么冲突。

我虽然使用过某种结构，但我想我把整个事情复杂化了。

我正在考虑有一个今年的结构，一个月的结构和一天的新结构。然后，年有月结构，月有日结构。但我觉得这可以变得更简单，我只是想不出更好的主意。

我怎样才能让这更简单？我只需要做一些事情来在一天和几个小时内存储一个新的约会，并且它不能同时有两个约会。

任何帮助，我将不胜感激。

```
enum DiaSemana { Domingo, Segunda, Terca, Quarta, Quinta, Sexta, Sabado };

struct Dia {
    int dia;
    int semana;
    char* horas[24][60];
};

struct Meses {
    int mes;
    char* nome[11];
    struct Dia dia;
};

struct Ano {
    int ano;
    tipoAno tipo;
    struct Meses jan;
    struct Meses fev;
    struct Meses mar;
    struct Meses abr;
    struct Meses mai;
    struct Meses jun;
    struct Meses jul;
    struct Meses ago;
    struct Meses set;
    struct Meses out;
    struct Meses nov;
    struct Meses dez;
};
typedef struct Ano ANO;
typedef ANO *PANO;

int validaBi(int ano) {
    if(ano%4==0)
        return 0;
    else
        return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:52:06.980

在处理这样的问题时，您基本上必须弄清楚您想要将哪些信息**放入应用程序**以及您想要**从中获得什么**。

1.  我知道您从一个空日历开始 - 还没有活动。
2.  然后你会想要在 2012-06-11/10:00 到 2012-06-11/12:00 之间放置一个事件。

所以我们现在可以看到，我们有一个有开始和结束的事件。请原谅我在这里使用了一点 OOP，但它仍然适用于 C。

```
typedef struct 
{
    DateTime Start, End;
} Event; 
```

伟大的。但是，什么是日期时间？我们也需要那个。

```
typedef struct
{
    int Year, Month, Day;
    int Hour, Minute;
} DateTime; 
```

现在我真的会想念 C++ 中的“++”部分，但仍然......

```
typedef struct
{
    int EventCount;
    Event Events[MAX_EVENTS];
} Calendar; 
```

再次，请原谅我对 C 的无知。所以我们在这里创建的是我们系统的基本概念。正如您现在可能看到的，下一步将是`Add(Calendar, Event)`函数，但现在由您来解决这个问题。

我并不是说上面的解决方案是最好的，唯一的，也不完整的。我只是想给你一个关于解决这样的问题的提示。

# iphone - CFDictionaryCreate 类似于 [NSDictionary dictionaryWithObject ... ]

> ID：10969542
> 
> 赞同：1
> 
> 时间：2012-06-10T14:33:33.633
> 
> 标签：iphone, objective-c, ipad, core-foundation

我正在寻找创建以下字典的方法

```
 NSDictionary *frameProperties = [NSDictionary dictionaryWithObject:[NSDictionary 
                                                  dictionaryWithObject:[NSNumber numberWithInt:2] 
                                                                forKey:(NSString *) kCGImagePropertyGIFDelayTime]
                                     forKey:(NSString *) kCGImagePropertyGIFDictionary]; 
```

通过CoreFoundation，即与`CFDictionaryCreate`

任何想法如何实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:53:55.217

似乎我已经自己构建了答案，请确认某人。代码编译正常，但我还不能测试它。

```
 int delayOnEachFrame = 2;
    const void *tkeys[1] = { kCGImagePropertyGIFDelayTime };
    const void *tvalues[1] = { CFNumberCreate(0, kCFNumberSInt32Type, &delayOnEachFrame) };
    CFDictionaryRef tframeProperties = CFDictionaryCreate(NULL, tkeys, tvalues, 1, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);

    const void *keys[1] = { kCGImagePropertyGIFDictionary };
    const void *values[1] = { tframeProperties };
    CFDictionaryRef frameProperties = CFDictionaryCreate(NULL, keys, values, 1, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks); 
```

# ckeditor - 带有 CKFinder 自定义配置文件的 CKeditor

> ID：10969544
> 
> 赞同：1
> 
> 时间：2012-06-10T14:33:58.747
> 
> 标签：ckeditor, ckfinder

我知道可以为 CKFinder 加载自定义配置文件

```
CKFinder.config.customConfig = baseUrl + '/js/ckfinder_config.js'; 
```

但是，当我在 CKEditor 中加载 CKFinder 时，我不知道如何为 CKFinder 加载自定义配置。我只有这些选项：

```
CKEDITOR.editorConfig = function( config )
{
  config.filebrowserBrowseUrl = baseUrl ;
  config.filebrowserImageBrowseUrl = baseUrl ;
  config.filebrowserFlashBrowseUrl = baseUrl ;
  config.filebrowserUploadUrl = baseUrl ;
  config.filebrowserImageUploadUrl = baseUrl ;
  config.filebrowserFlashUploadUrl = baseUrl ;
} 
```

有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:13:31.740

请参阅此页面：[http ://docs.cksource.com/CKFinder_2.x/Developers_Guide/PHP/CKEditor_Integration#Enabling_CKFinder](http://docs.cksource.com/CKFinder_2.x/Developers_Guide/PHP/CKEditor_Integration#Enabling_CKFinder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:35:39.217

你检查过这个 API 部分吗？ [http://docs.cksource.com/ckfinder_2.x_api/symbols/CKFinder.config.html#.customConfig](http://docs.cksource.com/ckfinder_2.x_api/symbols/CKFinder.config.html#.customConfig)

# java - AOP 实现背后的大思想是什么

> ID：10969545
> 
> 赞同：6
> 
> 时间：2012-06-10T14:34:03.080
> 
> 标签：java, design-patterns, jakarta-ee, aop, aspectj

我想对我说清楚。

我阅读了 AOP 的概念，我明白这是共享横切服务的好方法。（日志记录、安全、事务...）

但我想对这个想法和它的实施说/问一些事情。

我读到有一些方法，如 AspectJ、JBOSS AOP，以便将 AOP 同化到我的业务逻辑中。

但它不是很久以前就在这里了吗？

例如，我想在我的组件（Java bean、EJB'S 等）之间共享一个日志记录或安全实现。

为什么我不能制作一个 Singleton bean，以确保它只有一个实例，并且只要任何组件需要它的日志记录/安全服务，它就会查找并使用它的服务。

为什么我需要了解并拥有所有那些“大”实现，例如 aspectj 或 jboss AOP？我在这里想念什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T14:42:13.103

AOP 的想法是将通用逻辑保存在一个地方（您的单例解决方案也可以解决）**并且**“不可见”（透明）。使用 AOP，您的日志记录代码甚至不是业务逻辑的一部分，而是在幕后“注入”的。

此外，它更具动态性 - 您无需在每次需要记录时都调用单例服务。只需配置一次切入点（例如：“*此包中的所有设置器*”），日志记录将应用于所有现有代码和新代码。

此外，AOP 更加灵活和强大。您可以询问 AOP 实现：“请在我每次调用以“ `save*`”开头并带一个参数的方法时启动一个事务”或“如果返回的方法`Customer`抛出一个子类的异常`IllegalAgumentException`，请再次调用该方法”。

AOP 不仅仅是对通用逻辑进行分组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T14:45:58.153

您还没有理解 AOP 的全部含义。AOP的思想是能够写

```
public void foo() {
    // some business code
} 
```

而不是写

```
public void foo() {
    LogManager.getInstance().log("entering foo...");
    SecurityManager.getInstance().checkUserInRole("fooer");
    TransactionManager.getInstance().startTransaction();
    try {
        // some business code
        TransactionManager.getInstance().commit();
    }
    catch(RuntimeException e) {
        TransactionManager.getInstance().rollback();
        throw e;
    }
    LogManager.getInstance().log("leaving foo...");
} 
```

所有横切关注点（日志记录、安全性、事务管理）都在业务代码之外，而不是与业务代码混在一起，并且反复令人作呕。

# twitter-bootstrap - 固定布局位置：固定侧边栏

> ID：10969547
> 
> 赞同：1
> 
> 时间：2012-06-10T14:34:06.023
> 
> 标签：twitter-bootstrap

我正在尝试创建一个位置：使用引导程序固定侧边栏，但我还没有取得任何成功。我的尝试基本上可以概括为：

```
<div class="container">
  <div class="row">
    <div class="span3">
    </div>
    <div class="span9">
    </div>
  </div>
</div> 
```

并将 span3 列的位置设置为固定，并尝试各种不同的 css 位置。但是，它似乎打破了span9的大小和定位。

我的尝试完全错误吗？还是我完全错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:42:57.493

使用 twitter bootstrap 或 css 将整个页面居中对齐是不可能的。

但可能有一点jquery。

```
function sizing() {
  var windowwidth=$(window).width();
  var containerwidth=$('.container').width();
  var diff=windowwidth-containerwidth+40;
  $('#leftmargin').text("window="+ windowwidth+",container="+containerwidth);
  if(diff>0) {
    $('#leftmargin').css('margin-left', (diff/2) +'px');
  } else {
    $('#leftmargin').css('margin-left', '20px');
  }
}
$(document).ready(sizing);
$(window).resize(sizing); 
```

并添加 id="leftmargin" 如下所示（向右滚动）：

```
<div class="row">
  <div class="span3" style="position:fixed;background-color:green;height:100%;top:0px;" id="leftmargin">
    position fixed navbar (out of .container)
  </div>
</div>
<div class="container">
  <div class="row">
  <div class="span3" style="background-color:red">empty to avoid overflow</div>
    <div class="span9 offset3" style="background-color:blue;">
      bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
      bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
      bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
      bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
      bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
      bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
    </div>
  </div>
</div>​ 
```

[http://jsfiddle.net/baptme/NzqfL/](http://jsfiddle.net/baptme/NzqfL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:15:02.487

据我了解，您需要一个 span3 固定位置列。

以下代码有效但未居中。

```
<div class="row">
    <div class="span3" style="position:fixed;background-color:green;height:100%;top:0px">
         position fixed navbar (out of .container)
    </div>
 </div>
 <div class="container" style="margin:0px">
   <div class="row">
     <div class="span3" style="background-color:red;height:100%">empty to avoid overflow</div>
       <div class="span9 offset3">
           bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
           bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
           bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
           bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
           bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
           bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>bla bla bla<br>
       </div>
   </div>
 </div>​ 
```

[http://jsfiddle.net/baptme/A8HLL/48/](http://jsfiddle.net/baptme/A8HLL/48/)

# twitter-bootstrap - 带有 Twitter Bootstrap 的 Ubuntu Server 12.04 上的 LessCss 客户端问题

> ID：10969551
> 
> 赞同：1
> 
> 时间：2012-06-10T14:34:32.863
> 
> 标签：twitter-bootstrap, less, ubuntu-server, ubuntu-12.04

如果问题标题可能不方便，我提前道歉。我很确定 Ubuntu Server 12.04 不是原因，但我可以解释诀窍在哪里......

我的网站使用带有 LESS 的 Bootstrap 及其客户端编译（我正处于开发周期，所以我想将它保留在客户端上）。在我的本地实例（装有 Ubuntu 12.04 的笔记本电脑）上一切正常，但从我的服务器实例（在 Ubuntu Server 12.04 上运行）请求相同的网站时不会生成样式。

两者都使用相同的 mod 运行 Apache 2.2.22：别名、auth_basic、authn_file、authz_default、authz_groupfile、authz_host、authz_user、autoindex、cgi、deflate、dir、env、headers、mime、negotiation、php5、reqtimeout、rewrite、setenvif、ssl ， 地位。

* * *

### 我从我的本地实例（Ubuntu 12.04）得到的效果**很好！**

```
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>My website</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta content="" name="description">
        <meta content="alterphp" name="author">
        <link href="/bundles/mywebsite/css/main.less" type="text/css" rel="stylesheet/less">
        <link href="/bootstrap/less/responsive-768px-979px.less" type="text/css" rel="stylesheet/less">
        <script type="text/javascript" src="/jquery/jquery.js"> ... </script>
        <script type="text/javascript" src="/jquery.form.js"> ... </script>
        <script type="text/javascript" src="/bundles/mywebsite/js/less-1.3.0.min.js"> ... </script>
        <style id="less:bundles-mywebsite-css-main" type="text/css" media="screen"> **Style is well processed** </style>
        <style id="less:error-message" type="text/css" media="screen"> ... </script>
    </head>
    <body>
        ...
    </body>
</html> 
```

使用 FireBug，我可以看到“网络”选项卡中只有两个主要的较少文件显示为已下载。**main.less**导入更少的文件，这些文件都在 main.less 响应中处理。

* * *

### 我从我的服务器实例（Ubuntu Server 12.04）得到的东西不起作用！

```
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>My website</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta content="" name="description">
        <meta content="alterphp" name="author">
        <link href="/bundles/mywebsite/css/main.less" type="text/css" rel="stylesheet/less">
        <link href="/bootstrap/less/responsive-768px-979px.less" type="text/css" rel="stylesheet/less">
        <script type="text/javascript" src="/jquery/jquery.js"> ... </script>
        <script type="text/javascript" src="/jquery.form.js"> ... </script>
        <script type="text/javascript" src="/bundles/mywebsite/js/less-1.3.0.min.js"> ... </script>
        <style id="less:error-message" type="text/css" media="screen"> ... </script>
    </head>
    <body>
        ...
    </body>
</html> 
```

没有从 main.less 处理任何样式......使用 FireBug，我可以看到从**main.less**导入的所有 less 文件都显示为在“网络”选项卡中下载。

**编辑 1：** 我访问了我的页面，并且每个资源一个接一个（每个 LESS 文件都是可访问且完整的）。我在“网络”选项卡中没有错误，只是在我的服务器实例上没有处理 LESS 样式......

* * *

我对这个谜有任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:55:33.607

对我来说，问题来自 less.js

[https://github.com/cloudhead/less.js/blob/master/dist/less-1.3.0.js](https://github.com/cloudhead/less.js/blob/master/dist/less-1.3.0.js)

查看第 3107 至 3112 行

```
less.env = less.env || (location.hostname == '127.0.0.1' ||
                    location.hostname == '0.0.0.0' ||
                    location.hostname == 'localhost' ||
                    location.port.length > 0 ||
                    isFileProtocol ? 'development'
                                                     : 'production'); 
```

您可以尝试通过在第 3112 行之后添加来强制 less.env 的值。

```
less.env ='production'; 
```

或者

```
less.env ='development'; 
```

例如：如果您的开发服务器有一个 dns 记录，例如“ubuntuserver”，并且您使用 url “http://ubuntuserver”访问网络服务器

然后 less.env='production'; 而且因为资源是本地的，所以出了点问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:45:15.080

当我发现 LESS 的调试模式时，强制**less.env**进行*开发对我很有帮助……甚至我的本地实例也有一个主机名，所以 less.env 始终是“生产”，我从来没有看到 LESS 的任何错误。*

我的错误是我导入的文件较少，子目录或相对路径过多。抱歉这个含糊的解释，但这是我在 github 上从这个问题中得到的：[https ://github.com/cloudhead/less.js/issues/723](https://github.com/cloudhead/less.js/issues/723)

# xcode - 子目录中的资源文件被复制到应用程序包的根目录

> ID：10969555
> 
> 赞同：24
> 
> 时间：2012-06-10T14:35:27.890
> 
> 标签：xcode, resources, directory

我不确定这是预期的还是错误的。我正在尝试在磁盘中创建与 XCode 中相同的文件夹结构。我使用以下步骤将资源文件添加到我的项目中：

1.  `Resources`在项目的根文件夹下创建一个文件夹。
2.  将`Resources`文件夹拖到 XCode，它会`Group`为该文件夹创建一个。
3.  将我的资源文件拖到 XCode`Finder`中的文件夹中。`Resources`

现在我可以看到所有资源文件都列在`Build Phrases`->`Copy Bundle Resources`中。

奇怪的是，它`[[NSBundle mainBundle] pathForResource:@"book" ofType:@"epub"]`返回一个可以定位的文件路径，而`[[NSBundle mainBundle] pathForResource:@"book" ofType:@"epub" inDirectory:@"Resources"]`返回`(null)`.

从`Build Results`窗口中，我注意到这一行：

```
CpResource MBookReader/Resources/book.epub /Users/neevek/Library/Developer/Xcode/DerivedData/workspace-fykuaikryknuhxgevcdtspkspptj/Build/Products/Debug-iphonesimulator/MBookReader.app/book.epub
cd /Users/neevek/workspace/xcode_projects/MBookReader
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
builtin-copy -exclude .DS_Store -exclude CVS -exclude .svn -exclude .git -exclude .hg -resolve-src-symlinks -strip-tool /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip /Users/neevek/workspace/xcode_projects/MBookReader/MBookReader/Resources/book.epub /Users/neevek/Library/Developer/Xcode/DerivedData/workspace-fykuaikryknuhxgevcdtspkspptj/Build/Products/Debug-iphonesimulator/MBookReader.app 
```

这表明该`Resources/book.epub`文件确实被复制到`MBookReader.app/`（应用程序包的根目录）。

现在`Resources`是磁盘中的一个真正的文件夹，为什么文件夹本身没有被复制？

PS。我正在使用 XCode 4.3.2。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-12T13:07:12.930

将资源文件夹添加到 Xcode 时，在滑动窗口中选择“创建文件夹引用”而不是“为任何添加的文件夹创建组”。

也就是说，将问题中的 3 个步骤替换为以下步骤。

1.  在项目的根目录下创建一个*Resources目录。*按照您希望的方式在*Resources*目录中组织您的目录结构。
2.  将*Resources*目录拖到 XCode 并选择**Create folder references**选项。

你完成了。Xcode 将递归地将*资源*目录的内容复制到包中。

当 Xcode 没有将修改后的文件复制到*Resources*目录中的某个位置时，您可能会遇到麻烦。干净的构建通常可以解决此问题。或者，您可以在构建之前删除 .app 文件。这不会导致未修改的源文件重新构建，但会强制 Xcode 重新复制所有资源。

![示例文件夹参考](../Images/f7662785dc0c098221d367428f7127fc.png)

# python - 如何在列表python中表示一个项目

> ID：10969559
> 
> 赞同：2
> 
> 时间：2012-06-10T14:36:36.533
> 
> 标签：python

我有一个元组列表，如下所示：

```
[(time1, hashusi, servername, uri, referrer, useragent),
 (time2, hashusi, servername, uri, referrer, useragent),
 (time3, srcip, code, mime),
 (time4, hashusi, servername, uri, referrer, useragent),
 (time5, srcip, code, mime) ...] 
```

如果 item 的长度为 6，则表示它是一个请求，否则它是一个响应，现在我需要将这个列表中的所有请求和响应配对，它们已经按时间排序，如您在此示例中所见，前两项都是请求。

我想一个一个地浏览这些项目，如果一个请求后面跟着一个响应，那么它们是一对，我会为它们分配一个编号。如果一个请求后面跟着一个请求，那么第一个请求应该被丢弃，并检查第二个请求后面是否有响应，等等

```
for item in mergelistsorted:
    if len(item) == 6 and flag == None: #The first item is a request
       ##need to check the next item##
       if len(next item) == 6:
          continue
       else:
          requestlist.append((item[0],item[1],item[2],item[3])) 
```

我不知道如何引用“下一项”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:45:04.287

定义这个方法（[source](http://docs.python.org/library/itertools.html)）：

```
def pairwise(iterable):
    "s -> (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = itertools.tee(iterable)
    next(b, None)
    return itertools.izip(a, b) 
```

然后使用这个循环：

```
for curr, next in pairwise(list): 
```

需要注意的是，您不会得到`curr`--the last 迭代中的最后一项将是`(next_to_last, last)`. 如果您想进入`(last, None)`最终迭代，您需要在定义中更改`izip`为。`izip_longest``pairwise`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:40:55.413

您可以使用这样的循环遍历对：

```
for prv, nxt in zip(ls[:-1], ls[1:]):
   ... 
```

例如：

```
ls = [
    'request1',
    'request2',
    'request3',
    'response3',
    'request4',
    'response4',
]

for prv, nxt in zip(ls[:-1], ls[1:]):
    if 'request' in prv and 'response' in nxt:
        print prv, nxt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T14:40:23.230

而不是使用`for item in list`，使用`for index in range(len(list))`。

然后你可以参考`item`as`list[index]`和`next item`will be `list[index+1]`。

# javascript - Jquery - 如何从中选择下一个元素？

> ID：10969560
> 
> 赞同：1
> 
> 时间：2012-06-10T14:36:44.447
> 
> 标签：javascript, jquery, select, post, jquery-selectors

我正在从数据库中检索 9 个图像缩略图，每个都位于自己的 div 中，如下所示：

```
<div class="post">

<div class="post_desc"></div>
<div class="post_title"></div>
<a href="#" class="linktopost">**<img src="img/thumb.png" class="thumb-img"/>**</a>
<form>
**<input type="hidden" class="postid" value="'.$post_id.'" />**
</form>

</div> 
```

使用 Jquery，我试图在单击缩略图时发布隐藏输入字段中的值，但我很难正确选择它。输入中的值随 9 个图像中的每一个而变化。

这就是我对 Jquery 的了解：

```
$(".thumb-img").click(function(){

    $.post("inc/fullpost.php", {postid: ##########.val()},
        function(output){
            $("#gotpostid").html(output).show();
        }).fail(function(x,y,z){ 
            $("#gotpostid").html(x + "<br />" + y + "<br />" + z)
        });

}); 
```

那么如何正确选择与图像缩略图位于同一包含类的输入字段中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:45:22.727

试试这个：

```
$(".thumb-img").click(function(){
    var postId = $(this).closest(".post").find(".postid").val();
    $.post("inc/fullpost.php", {postid: postId},
        function(output){
            $("#gotpostid").html(output).show();
        }).fail(function(x,y,z){ 
            $("#gotpostid").html(x + "<br />" + y + "<br />" + z)
        });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:46:49.757

```
$(".linktopost").click(
function(){ var ValueToPost= $(this).next("input").val();

$.post("inc/fullpost.php", {postid: ValueToPost},
    function(output){
        $("#gotpostid").attr('type', 'text').val(output);
    }).fail(function(x,y,z){ 
        $("#gotpostid").val(x + "<br />" + y + "<br />" + z)
});

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T14:47:17.607

您可以使用[数据](http://api.jquery.com/jQuery.data/)而不是`hidden`元素。删除`hidden`元素，然后尝试这样：

*标记：*

```
<img src="img/thumb.png" class="thumb-img" data-postid="'.$post_id.'"/> 
```

*脚本：*

```
$(".thumb-img").click(function(){
    $.post("inc/fullpost.php", {postid: $(this).data('postid')},function(output){
            $("#gotpostid").html(output).show();
        }).fail(function(x,y,z){ 
            $("#gotpostid").html(x + "<br />" + y + "<br />" + z)
        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T14:46:33.120

尝试以下

$(yourImage).parent().find('.postid').get(0)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T14:47:53.253

好吧，我不知道您是否意识到，但是您所做的实际上不是选择一个值，而是在#gotpostid 元素中设置该值。

要选择值，这是方法：

```
$value = $('#gotpostid').val(); 
```

如果您正在设置它，那么：

```
$('#gotpostid').val($value); 
```

# windows - 从“发送到”菜单调用我的程序时，如何确定用户正在浏览的文件夹？

> ID：10969562
> 
> 赞同：0
> 
> 时间：2012-06-10T14:36:50.483
> 
> 标签：windows, delphi, windows-explorer

我在 SendTo 中放置了我的应用程序的快捷方式。现在我可以在资源管理器中选择一些文件并将它们发送到我的应用程序。但是我怎样才能得到文件所在的路径呢？我的程序应该在所有接收到的文件名通用的父目录中创建一个新文件。

例如，如果我有这些文件：

```
C:\one.txt
C:\1\

```

我在资源管理器中选择文件*one.txt*和目录*1*。我怎样才能知道这些文件的起始目录是*C:\*？

我知道我可以`ParamStr()`用来获取文件的路径，但那又如何呢？我可以尝试为传递给我的应用程序的所有文件获取公共目录，但是如果我在*C:\*目录*1*和*2*中选择并且这些目录如下所示：

```
C:\1\4\5\one.txt
C:\1\4\two.txt

```

然后起始目录是*C:\1\4*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:52:19.517

在 Windows 7 之前，在资源管理器中选择的所有文件始终位于同一目录中，因此很容易知道用户正在浏览哪个目录。它与任何一个文件的目录相同。为此使用[`ExtractFilePath`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.ExtractFilePath)。

不过，从 Windows 7 开始，资源管理器允许您[将目录放入名为*library*](http://windows.microsoft.com/en-US/windows7/Arrange-sort-or-group-your-files)的组中。所有文件夹中的所有文件都显示在一个视图中。用户可以从多个目录中选择文件并将它们一次全部发送到您的程序。该视图不代表磁盘上的任何真实目录，因此这里提出的问题毫无意义。

作为替代方案，您可以决定使用发送到您的程序[的所有文件共有的祖先目录](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773574.aspx)，但这不会告诉您太多。一方面，如果文件驻留在多个驱动器上，则公共目录将是*空字符串*。即使一个或多个选定文件的目录是当前帐户，您计算的目录也可能不可写。

*仅使用您收到的第一个*文件的目录可能会更容易，甚至在您无法自动确定的情况下显示询问用户使用哪个目录的 UI。（也许您可以使用第一个目录预先填充结果，因此用户无需执行任何操作，只需在常见情况下批准您的建议。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:27:30.363

我想我会通过 ParamStr 将所有文件名传递给我的程序并使用这个函数： [http](http://delphi.about.com/od/delphichallengesexercises/qt/delphi-extract-base-path-challenge.htm) ://delphi.about.com/od/delphichallengesexercises/qt/delphi-extract-base-path-challenge.htm 来查找常见的基本路径，应该是调用 SendTo 的路径。

# c# - 绘制极坐标曲线 Lemiscate bug

> ID：10969563
> 
> 赞同：0
> 
> 时间：2012-06-10T14:36:53.780
> 
> 标签：c#, curve, polar-coordinates

我正在尝试绘制[lemiscate](http://en.wikipedia.org/wiki/Lemniscate_of_Bernoulli)。我的代码没有正确绘制曲线。为什么线在点 0,0（左角）开始或结束？

![在此处输入图像描述](../Images/3da0e6d4d12cc334403055d8c420cac6.png)

```
private void drawLemiscate(Graphics g, int a, int Sx,int Sy) 
{
    int x, y;

    Point[] p = new Point[720];
    for (int phi = 0; phi < 720; phi++)
    {
        int r = (int)(a * Math.Cos(2 * degreeToRadians(phi)));
        if (r > 0)
            continue;
        x = (int)Math.Round((r * Math.Sin(degreeToRadians(phi)) + Sx));
        y = (int)Math.Round((r * Math.Cos(degreeToRadians(phi)) + Sy));
        p[phi] = new Point(x, y);
    }
    Pen pen = new Pen(Color.Red, 1);
    g.DrawLines(pen, p);
    canvas.Invalidate();
}

private double degreeToRadians(double angle)
{
    return Math.PI * angle / 180.0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:18:55.430

您应该调查哪个元素`p`是 (0, 0)。您可以使用调试器检查它或使用循环来查找它并打印出哪些索引具有 (0, 0)。

提示：考虑`if (r > 0) continue;`对你的输出有什么影响。

# java - 第二次尝试时出现数据库连接错误

> ID：10969564
> 
> 赞同：0
> 
> 时间：2012-06-10T14:36:59.947
> 
> 标签：java, mysql

有人能告诉我为什么如果我尝试使用此代码连接到数据库会出现错误吗？

```
conn = DriverManager.getConnection("jdbc:" + this.dbms +"://" + this.serverName +":" + this.portNumber +"/" + this.dbName, connectionProps);
con.close();
conn = DriverManager.getConnection("jdbc:" + this.dbms +"://" + this.serverName +":" + this.portNumber +"/" + this.dbName, connectionProps); 
```

当我只输入第一行时，一切正常，我可以连接到数据库，但是如果我尝试使用所有 3 行重新连接，则会出现错误：

```
resultset is from update. no data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:30:08.913

为什么您一次又一次地编写相同的代码尝试编写两个函数一个用于连接另一个用于断开连接调用这些函数用于重新连接

# java - 在 Java 中获取 Windows 7 库位置

> ID：10969573
> 
> 赞同：2
> 
> 时间：2012-06-10T14:38:42.563
> 
> 标签：java, windows-7, filesystems

我正在尝试列出在视频 Windows 7 库中找到的所有文件。

首先，我很抱歉，如果以前有人问过这个问题，但对于我的生活，我找不到它。我找到[了这个](https://stackoverflow.com/questions/9000785/open-a-windows-7-library-in-windows-explorer)；但是，它适用于 C#。我找不到 Java 的类似物。

我知道默认文件夹位置在这里：

C:\用户[USER_NAME_HERE]\视频

但是，该库可以包含多个要包含的文件夹。我也猜你可以使用注册表；然而，这并不理想。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:47:06.973

库实际上是 XML 文件，您可以在以下位置访问视频库

C:\Users\[USER]\AppData\Roaming\Microsoft\Windows\Libraries\Videos.library-ms

该文件包含所有包含文件夹的列表。

# visual-studio-2010 - 如何在设置和 bin 中包含解决方案中未引用的 exe/dll - VS 2010

> ID：10969576
> 
> 赞同：1
> 
> 时间：2012-06-10T14:39:25.650
> 
> 标签：visual-studio-2010, setup-deployment

我有一个包含多个项目的解决方案 - exe 和 dll 的组合。

我对设置项目相当陌生。

我有一个事件日志安装程序 (exe)，我在安装过程中在客户端计算机上运行它 - 一个运行良好的自定义操作。

此项目在解决方案中，未被任何其他项目引用。

我如何将其设置为：

1.  自动被复制到主项目的 bin 文件夹 - 首先，这样做是正常的做法吗？如果没有，您在哪里复制未引用的 exes/dll - 在运行时加载？

2.  当我包含主项目的主要输出时，自动包含在设置项目中。

我在构建配置管理器中检查了项目 - 没有任何改变。我仍然需要手动复制。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:18:01.473

除了将项目输出添加到部署项目之外，您还可以将文件添加到部署项目： [“如何将项目添加到部署项目”](http://msdn.microsoft.com/en-us/library/z11b431t.aspx "如何将项目添加到部署项目")。这说明：

“将合并模块或程序集添加到部署项目 在解决方案资源管理器中选择部署项目。在项目菜单上，指向添加，然后单击合并模块或单击程序集。在出现的对话框中，选择所需的项目添加。” 您可以将额外文件定向到各种符号目标位置，例如您的目标 Program Files 文件夹。

但由于它是您需要的日志安装程序，您可能希望将其安装为先决项目：[“如何安装先决条件”](http://msdn.microsoft.com/en-us/library/7eh4aaa5 "如何安装先决条件")

最后，您可能需要查看可以添加到任何安装步骤的“自定义操作”，并且几乎可以处理您需要的任何其他内容。

# android - 应用程序无法在 HoneyComb 上安装

> ID：10969584
> 
> 赞同：0
> 
> 时间：2012-06-10T14:41:03.487
> 
> 标签：android, android-3.0-honeycomb, android-package-managers

我刚刚尝试将我的应用程序安装到我的摩托罗拉 Xoom 上，但安装时遇到问题。

当我在设备上安装 APK 并尝试启动应用程序时，它会崩溃并显示以下消息。

> 应用程序包安装程序（进程 com.android.packageinstaller）意外停止。请再试一次

应用程序在模拟器和电话上都安装并运行良好。我正在通过笔记本电脑安装应用程序。

** 附加信息 **

我刚刚发现，如果我从应用程序列表启动应用程序，它现在也不能在模拟器上运行。它报告“未安装应用程序”。如果我通过 Eclipse 启动它，它确实可以工作。

清单：（注意我已经删除了我的包名称并更改了活动名称）

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="PACKAGE_NAME_REMOVED" 
      android:versionName="1.0.5" 
      android:versionCode="9">

    <uses-permission 
        android:name="android.permission.ACCESS_WIFI_STATE">
    </uses-permission>
    <uses-permission 
        android:name="android.permission.ACCESS_NETWORK_STATE">
    </uses-permission>
    <uses-permission 
        android:name="android.permission.INTERNET">
    </uses-permission>
    <uses-permission 
        android:name="android.permission.BROADCAST_STICKY">
    </uses-permission>

    <uses-sdk 
        android:targetSdkVersion="8" 
        android:minSdkVersion="5" />

    <application 
        android:label="@string/app_name" 
        android:debuggable="false" 
        android:icon="@drawable/launchericon">

        <activity 
            android:name=".MainActivity"
            android:label="@string/app_name_beta" 
            android:launchMode="singleTop" 
            android:permission="android.permission.BROADCAST_STICKY" 
            android:screenOrientation="portrait" 
            android:configChanges="orientation">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="MyListActivity"          
            android:label="@string/devicelistactivity_label" 
            android:screenOrientation="portrait" 
            android:configChanges="orientation">
        </activity>
        <activity 
            android:name=".interface.InterfacceActivity" 
            android:permission="android.permission.BROADCAST_STICKY" 
            android:screenOrientation="portrait" 
            android:launchMode="singleTop" 
            android:configChanges="orientation">
        </activity>   
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:29:34.843

确保所有`Activity`名称和路径都正确。导出前清理并构建项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:36:56.703

看来我使用权限不正确。Logcat 报告了一个安全异常，因为我的应用程序使用了棒广播，即使我已经在清单中放置了 stickybroadcast 权限。

[如此处](https://groups.google.com/group/android-developers/browse_thread/thread/5ce448ad766369a5)详述，我从活动和应用程序节点中删除了stickybroadcast 权限。

# python - OpenCV - 读取 16 位灰度图像

> ID：10969585
> 
> 赞同：29
> 
> 时间：2012-06-10T14:41:03.383
> 
> 标签：python, opencv

我正在尝试在 Python 中使用 OpenCV 2.4 读取 16 位灰度图像，但它似乎将其加载为 8 位。

我正在做：

```
im = cv2.imread(path,0)
print im

[[25 25 28 ...,  0  0  0]
[ 0  0  0 ...,  0  0  0]
[ 0  0  0 ...,  0  0  0]
..., 
```

如何获得 16 位？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-10T16:50:19.780

弄清楚了。万一其他人遇到这个问题：

```
im = cv2.imread(path,-1) 
```

将标志设置为 0，加载为灰度，似乎默认为 8 位。将标志设置为 -1 会按原样加载图像。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-10-03T14:30:37.340

为了提高可读性，使用标志**cv2.IMREAD_ANYDEPTH**

```
image = cv2.imread( path, cv2.IMREAD_ANYDEPTH ) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-01-30T18:21:01.683

我遇到了同样的问题（使用 cv2.imread 将 16 位 .tif 加载为 8 位）。但是，使用 -1 标志并没有帮助。相反，我能够使用 tifffile 包加载 16 位图像。

# c# - 由于错误的数据库约束，无法将值插入表中

> ID：10969590
> 
> 赞同：0
> 
> 时间：2012-06-10T14:41:46.283
> 
> 标签：c#, oracle, constraints

我有问题。我有一个包含三个表的 Oracle 数据库设置，第一个是`project`，第二个是`skill`，第三个是`requiredskill`，这是前两个表之间的链接。它们的主键都在第三张表中作为外键。

在我的程序中的某个时刻，我创建了一个`project`并将其保存在数据库中。紧接着我在表中插入两个值，`requiredskill`表的某个主键`skill`和刚刚创建的项目的主键。

我使用以下代码插入数据：

```
 OracleCommand cmd = new OracleCommand();
    cmd.Parameters.Add(new OracleParameter("projID", project.ProjId));
    foreach (Skill skill in skills)
    {
        cmd.Connection = conn;
        cmd.Parameters.Add(new OracleParameter("skillID", skill.SkillID));
        cmd.CommandText = "INSERT INTO REQUIREDSKILL VALUES(:skillID, :projID)";
        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
        }
        catch (OracleException)
        {
        }
        finally
        {
            conn.Close();
        }

    } 
```

一旦我执行查询，`OracleException`就会被捕获并告诉我项目 ID（`project`表的主键）不存在，但是，通过断点我已经验证数据在执行时在表中. 有人对此有答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:49:20.833

使用以下语法，您的插入语句会更加健壮：

```
insert into requiredskill (skillid, projectid) values ( ...) 
```

...因为您可能有错误的列顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:47:43.127

我怀疑这是一个事务性问题：如果在一个（未提交的）事务中插入项目 ID，而在另一个事务中插入所需的技能，则后者将失败。

确保提交第一个事务并重试。

# uinavigationbar - 将 UIBarButtonItem 定位在 UINavigationBar 的边缘

> ID：10969600
> 
> 赞同：5
> 
> 时间：2012-06-10T14:42:59.827
> 
> 标签：uinavigationbar, uibarbuttonitem

是否可以将自定义图像 UIBarButton 项放置在 UINavigationBar 的左侧或右侧**边缘**？如果按钮的边缘接触 UINavigationBar 的边缘，我创建按钮的方式看起来最好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:58:03.053

你最好的选择是继承 UINavigation 栏和覆盖布局子视图。

在我的示例中，如果按钮的标签为 900，我将其移动到最左边缘。

```
- (void) layoutSubviews {
    [super layoutSubviews];
    //override the navigation bar to move classes with 900 to the ledge
    for (UIView *view in self.subviews) {  
        if ([view isKindOfClass:[UIButton class]]) {  
            if (view.tag == 900)
                view.frame = CGRectMake(0,0, 88, 44);
        }

    }
} 
```

# c# - 简化类结构

> ID：10969602
> 
> 赞同：2
> 
> 时间：2012-06-10T14:43:13.010
> 
> 标签：c#, class, caching

我已经建立了一个配置系统，它将从 MySQL 数据库中获取配置。我已经让它工作了，但现在我意识到要从缓存中获取值，我必须使用这个冗长的混乱代码。

```
CacheLayer.Instance.Caches["app_config"].Current.EmailALertInterval 
```

我想删除`Current`，但我还没有弄清楚是否可以让班级直接这样做。目前，实现看起来像这样。

```
public T Current
{
    get
    {
        if (_current == null)
        {
            ReloadConfiguration();
        }

        return _current;
    }
} 
```

但我想简单地说：

```
CacheLayer.Instance.Caches["app_config"].EmailALertInterval 
```

我正在看类似的东西，但这仅适用于索引器。

```
public T this[T key] 
```

**编辑：只是为了添加更多上下文，我将添加更多代码。**

这是缓存层。它本质上允许我存储多个配置。例如，我可能有一个通用应用程序配置，但我也可以获取一组使用的电子邮件。

```
public Dictionary<String,IGenericCache<dynamic>> Caches
{
    get
    {
        return _caches;
    }
}

public void AddCache(String config)
{
    _caches.Add(config,new GenericCache<dynamic>(config));
} 
```

在我的 GenericCache 中，我使用存储在 MySQL 数据库中的 JSON 字符串加载配置。

```
_current = JsonConvert.DeserializeObject<T>(db.dbFetchConfig(config)); 
```

存在和不存在的原因`GenericConfig`是因为我希望能够在不一定使用.`T``dynamic``CacheLayer``dynamic`

关于我希望如何使用它的另一个例子。

```
List<String> EmailList = CacheLayer.Instance.Caches["EmailList"].Current; 
```

这实际上会从 MySQL 中获取一个包含电子邮件列表的 JSON 数组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:48:24.157

添加新属性

```
public int EmailALertInterval
{
    get { return Current.EmailALertInterval; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:57:57.597

你有很多这样的配置，EmailAlertInterval 只是一个例子，对吧？

然后您必须更改 Caches 类，正如您已经提到的。

但是，正如您已经知道哪些缓存将进入 CacheLayer（至于我理解您的示例），您可以在那里拥有属性，例如

```
CacheLayer.Instance.Caches.AppConfig.EmailALertInterval 
```

该属性处理 Current 现在所做的事情。

```
public T AppConfig
{
    get
    {
        if (appConfig == null)
        {
           return ReloadConfiguration();
        }

        return appConfig;
    }
} 
```

认为应该更优雅

# java - 删除“final”关键字会影响二进制兼容性吗？

> ID：10969607
> 
> 赞同：3
> 
> 时间：2012-06-10T14:43:38.207
> 
> 标签：java, binary-compatibility

如果我`final`从方法或其他“事物”中删除关键字，我的类的用户是否必须重新编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:48:24.817

不，假设你对这个疣没问题，删除 final 关键字不会破坏兼容性：

如果模块 B 从模块 A 中的类调用任何方法，并且模块 C 覆盖了先前的最终方法，并且来自模块 C 的对象被传递给模块 B，则调用将转到模块 A 的实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T14:47:02.800

从技术上讲，他们不必重新编译。

我想不出从方法/属性中删除 final 关键字可能导致的任何影响，这可能会导致兼容性损失，因此它不应该给您带来任何问题。

用示例代码测试，没有运行时错误：

```
public class Test2{
    public static final String test = "HELLO!";
}

public class Test {
    public static void main (String [] args) {
        System.out.println(Test2.test);
    }
} 
```

1.  编译Test.java
2.  Ran Test.java -> 输出 = “你好！”
3.  修改Test2.java：

    ```
    public class Test2{
        public static String test = "HELLO!";
    } 
    ```

4.  编译Test2.java

5.  Ran Test.java -> 输出 = “你好！”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T14:48:38.410

如果您的客户直接调用您的代码，则不会。但是它可能会破坏一个使用反射发现你的类的程序，检查你的方法是否是最终的，如果方法是最终的，它会做不同的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T15:30:44.077

直接从马嘴里说：

> 将声明为 final 的方法更改为不再声明为 final 不会破坏与预先存在的二进制文件的兼容性。

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html#jls-13.4.17](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html#jls-13.4.17)

# java - 轻松部署 EJB

> ID：10969608
> 
> 赞同：0
> 
> 时间：2012-06-10T14:43:41.803
> 
> 标签：java, jakarta-ee, ejb, ejb-3.0

我可能在这里太天真了，但我的假设是，使用 EJB 3，现在只需将一个类标记为 @Stateful 即可使其成为有状态会话 bean。

我的问题：我可以按原样部署它吗？如果可以，如何部署？还是我还需要将其打包在 EAR 中。我想认为注释就足够了，但我可能过于乐观了。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:30:01.247

要创建 EJB 3，您需要两件事：

1- 创建一个声明方法的接口 2- 创建一个实现该接口的类

如果要使用注解，则必须使用@Remote 或@Local 对接口进行注解，并且必须使用@Stateful 对类进行注解。

您可以将 EJB 部署为 EAR 或简单地部署为 JAR，这取决于您是否有 Web 组件部件，那么如果您只有 EJB，则可以考虑使用 EAR，您可以简单地使用 JAR。

我猜您已经考虑过 Stateful Session Bean 与 SLSB 相比可扩展性较差的事实。所以必须小心使用它们。

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T04:42:12.273

注释与详细说明 XML 文件中的 bean 一样好。它仍应打包在一个 jar 文件中，该文件将放入 EAR 中。注释只是 XML 配置文件的替代品。

# c++ - 为什么 shared_pointer 不允许定义像 ptr = new Object;

> ID：10969611
> 
> 赞同：1
> 
> 时间：2012-06-10T14:44:15.957
> 
> 标签：c++, shared-ptr

> **可能重复：**
> [为什么 shared_ptr 有一个显式的构造函数](https://stackoverflow.com/questions/304093/why-shared-ptr-has-an-explicit-constructor)

这让我感到困惑，为什么`std::shared_ptr<int> p1(new int(10));`会在一段时间内正常，而在`std::shared_ptr<int> p2 = new int(10);`失败时？我*认为*两者应该以相同的方式构建。

# ant - Ant 中的条件连接

> ID：10969616
> 
> 赞同：2
> 
> 时间：2012-06-10T14:44:56.007
> 
> 标签：ant, build.xml

我有一个任务：

```
<target name="someTarget">
    <concat destfile="someFile">
        <string>someString</string>

        <string>someOtherString</string>
    </concat>
</target>

<target name="someOtherTarget">
    <antcall target="someTarget">
        <param name="myParam" value="myValue"></param>
    </antcall>

    <antcall target="someTarget">
    </antcall>
</target> 
```

如何连接调用目标时提供的`someOtherString`唯一 if ？`myParam``someTarget`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:58:08.397

如果没有 Ant 扩展，只需使用[条件 Ant 执行](http://ideoplex.com/id/136/conditional-execution-in-ant)：

```
<project default="someOtherTarget">
    <target name="someTarget" depends="-someString,-someOtherString"/>

    <target name="-someString" unless="myParam">
        <concat destfile="someFile">
            <string>someString</string>
        </concat>
    </target>

    <target name="-someOtherString" if="myParam">
        <concat destfile="someOtherFile">
            <string>someString</string>
            <string>someOtherString</string>
        </concat>
    </target>

    <target name="someOtherTarget">
        <antcall target="someTarget">
            <param name="myParam" value="myValue"></param>
        </antcall>
        <antcall target="someTarget"/>
    </target>
</project> 
```

如果您不介意将 Ant 扩展添加到您的项目中，请查看[Ant-Contrib](http://ant-contrib.sourceforge.net/)的[If 任务](http://ant-contrib.sourceforge.net/tasks/tasks/if.html)。

# emacs - 在组织模式中隐藏标记元素

> ID：10969617
> 
> 赞同：34
> 
> 时间：2012-06-10T14:45:03.990
> 
> 标签：emacs, elisp, markup, org-mode

org-mode 中有很多[结构标记元素](http://orgmode.org/manual/Structural-markup-elements.html#Structural-markup-elements)，例如***bold***或*/italic/*，但它们在 org-mode 文本中可见，如果文件用于导出，这很好，如果文件用于导出，则不好半所见即所得编辑。我想隐藏这些标记符号，所以***bold***变为**粗体**，就像链接隐藏它们的方括号一样。

开箱即用的 org-mode 有可能吗？如果没有，那么请建议一个可以解决此问题的 elisp 代码。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-10T17:17:55.563

尝试：

```
(setq org-hide-emphasis-markers t) 
```

或通过自定义设置：

`M-x`自定义变量`RET`组织隐藏强调标记`RET`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-31T02:46:14.723

如果您使用的是 Spacemacs，您也可以使用`M-RET T V`(toggles `space-doc-mode`) 来切换它。它隐藏了组织模式强调标记和元标记等。有关完整说明，请参见例如`SPC h f space-doc-mode`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-25T15:33:59.827

我喜欢经常显示/隐藏这些。如果您想让它成为一个简单的切换，请将其放入您的`init.el`以获得`C-c e`绑定：

```
(defun org-toggle-emphasis ()
  "Toggle hiding/showing of org emphasize markers."
  (interactive)
  (if org-hide-emphasis-markers
      (set-variable 'org-hide-emphasis-markers nil)
    (set-variable 'org-hide-emphasis-markers t)))
(define-key org-mode-map (kbd "C-c e") 'org-toggle-emphasis) 
```

# rest - 将 RPC 接口转换为 REST

> ID：10969623
> 
> 赞同：2
> 
> 时间：2012-06-10T14:45:23.900
> 
> 标签：rest, rpc

我已经使用 RPC 多年，但现在我们必须使用 REST。我试图了解两者之间的差异以及其中一个如何优于另一个。因此，我阅读了很多文章，试图完全理解其中的微妙之处。到目前为止，它看起来不错，但有一些小问题。

我理解（至少我认为我理解），将事物共享为通过使用动词 GET、PUT 等获取的资源的一般概念。这很好地映射到大多数服务器访问概念，但还有其他想法可以不那么容易映射。例如，我需要通知服务器下载一个 gravatar 图像并存储它。我不确定这如何适合 RESTful 端点。

请注意，我知道如何将 RPC 伪装成 REST，但我对此不感兴趣。我想以“REST方式”来做这件事，如果没有其他原因，只是为了了解这种方式实际上是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:07:02.313

是的，在大多数情况下，RPC 风格的服务很好地映射到 REST。因此，CRUD 操作可以映射到任何好的地方。无论如何，我们可以在第一阶段识别合约方法，将它们映射到 URI 和不同的 HTTP 动词。第二阶段是引入资源，可能以 DTO 对象的形式存在。

无论如何，从 RPC 到 REST（很可能是第 2 级）的路线图在 Richardson 成熟度模型 (RMM) 上得到了很好的描述：

*   **0 级：** SOAP、XML RPC、POX、单一 URI

*   **第 1 级：** URI 隧道、许多 URI、单个动词

*   **级别 2：**许多 URI、许多动词、CRUD 服务（例如 Amazon S3）

*   **第 3 级：**第 2 级 + 超媒体 RESTful 服务

更多关于 RMM 的信息：

[http://code.google.com/p/implementing-rest/wiki/RMM](http://code.google.com/p/implementing-rest/wiki/RMM) [http://martinfowler.com/articles/richardsonMaturityModel.html](http://martinfowler.com/articles/richardsonMaturityModel.html)

但在我看来，你已经知道了。那么复杂的场景呢。他们有很多。作为问题的例子：

> 例如，我需要通知服务器下载一个 gravatar 图像并存储它。我不确定这如何适合 RESTful 端点。

我不认为它很难映射到 REST。一切都取决于细微差别。例如，当用户选择“gravatar”选项时，为什么在注册用户时不这样做。或者为什么不拥有 GET [http://bookslirarysample.com/users/15/gravatar](http://bookslirarysample.com/users/15/gravatar)。REST 没有问题。

但也许您不仅假设 REST 端点或如何说服务器。当然，在 gravatar 下的功能不仅仅是 REST 调用。服务器上可能是消息总线，您的 REST 服务器通过它发送消息。特殊的“下载器”服务将收到此消息，下载图像，将其存储并保存到具有某些 id 的用户 oject。REST 并没有减少它背后的巨大服务器基础设施。REST 外观背后可能是复杂的企业级事件驱动架构。这对 REST 来说不是问题。

无论如何，还有更高级的场景。像通知聚合、事务、安全等。其中许多在 Jim Webber 的书中都有很好的描述：

[REST 实践：超媒体和系统架构](https://rads.stackoverflow.com/amzn/click/com/0596805829)

# c# - 抽象方法是虚拟的吗？

> ID：10969625
> 
> 赞同：10
> 
> 时间：2012-06-10T14:45:54.083
> 
> 标签：c#

我是否正确声明方法`abstract`自动使其成为虚拟？

也就是说，在子类中我可以多次覆盖它，在运行时，会调用对象的运行时类型对应的方法吗？

是否可以声明一个抽象的非虚拟方法？也就是说，必须在非抽象子类中实现并且不能被覆盖的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T14:47:23.620

是的，[抽象方法在](http://msdn.microsoft.com/en-us/library/aa664435.aspx)定义上是虚拟的；它们必须是可覆盖的，才能被子类实际覆盖：

> 当实例方法声明包含`abstract`修饰符时，该方法称为抽象方法。尽管**抽象方法隐含地也是虚拟方法**，但它不能有修饰符`virtual`。

相反，您不能声明抽象的非虚拟方法，因为如果可以，您将拥有一个无法实现的方法，因此永远无法调用，从而使其毫无用处。

然而，如果你想让一个类实现一个抽象方法但不允许它的任何子类修改它的实现，那就是[`sealed`](http://msdn.microsoft.com/en-us/library/aa645769.aspx)进来的地方。一个例子：

```
abstract public class AbstractClass
{
    abstract public void DoSomething();
}

public class BaseClass : AbstractClass
{
    public sealed override void DoSomething()
    {
        Console.WriteLine("Did something");
    }
} 
```

请注意，虽然抽象方法是（隐式）虚拟的，但具体基类中的实现是非虚拟的（因为`sealed`关键字）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:48:20.820

是的，它们是虚拟的。否则，您将无法为它们编写实现。

# php - zend_service_amazon 未生成输出

> ID：10969628
> 
> 赞同：1
> 
> 时间：2012-06-10T14:46:05.163
> 
> 标签：php, zend-framework, amazon-web-services

我正在使用 Zend Framework 从亚马逊检索图书信息。此代码在页面中没有显示任何错误，也没有显示任何结果。你能解决这个问题吗？

```
define("AMAZON_API_KEY","#################");
define("AMAZON_SECRET_KEY","############################################");
require_once 'Zend/Service/Amazon.php';
$amazon = new Zend_Service_Amazon(AMAZON_API_KEY, 'US', AMAZON_SECRET_KEY);
$results = $amazon->itemSearch(array('SearchIndex' => 'Books','Keywords' => 'history'));
print_r($results);
foreach ($results as $result) {
    echo $result->Title . '<br />';
} 
```

提前致谢。普拉卡什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:43:22.463

亚马逊 API zend 的这个修复应该在框架的下一个版本中更新。如果你不想等待那个版本，你可以将补丁文件从这里[http://framework.zend.com/issues/browse/ZF-12046](http://framework.zend.com/issues/browse/ZF-12046)应用到你的副本来修复这个错误。我的解决了 希望这对你也有用..

如果您在制作补丁时遇到问题，请告诉我

# windows - 带有签名（但不是 WHQL）驱动程序的 Windows XP 上的“dpinst /silent”失败

> ID：10969629
> 
> 赞同：2
> 
> 时间：2012-06-10T14:46:06.780
> 
> 标签：windows, driver-signing, dpinst

[带有“/s” （静默）标志的](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544775%28v=vs.85%29.aspx)[驱动程序包安装程序](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544842%28v=vs.85%29.aspx)(DPInst)无法在 Windows XP 上安装签名驱动程序。该证书是有效的（[Authenticode](http://en.wikipedia.org/wiki/Code_signing#Implementations)证书），但不是[WHQL](http://en.wikipedia.org/wiki/WHQL_Testing)证书。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T20:20:11.693

DPInst 有两个“静音”标志—— `/q`（安静）和`/sw`（抑制向导）。`/q`暗示安静但也可能（我没有测试！）在发出 DIF_REMOVE 请求时设置 DI_QUIETINSTALL。显然，这使得（Windows XP 的）SetupAPI 库变得“他们试图偷偷摸摸地对付我！” 如果证书不是珍贵的 WHQL[*] 证书，则拒绝安装。

请注意，当设置`/lm`（传统模式）标志时，DPInst 本身会忽略证书的有效性，但底层 Windows 仍然会拒绝它。

解决方案是使用`/sw`标志（连同`/lm`）。

*顺便说一句，我还没有检查这个的含义 - 例如，Windows 是否在某些配置下弹出“停止安装”提示框？我将相应地测试和更新这个答案。*

### “停止安装”提示“看起来像：

![命令行标志在某些情况下显示的唯一窗口](../Images/528a928fc9b368eac348f0574db02ad9.png)

[*] ... 或其他 Windows 系统组件验证证书，但这不是重点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T12:04:37.693

如果设备驱动程序已签名，您需要将其发布者添加到受信任的发布者列表中。按照下面文章中提到的步骤

[http://www.richud.com/wiki/Windows_7_Broken_Trusted_Publisher_Certificates_signed_Drivers_fix](http://www.richud.com/wiki/Windows_7_Broken_Trusted_Publisher_Certificates_signed_Drivers_fix)

在此静默安装后将正常工作。

# java - 从侦听器调用所有者类

> ID：10969640
> 
> 赞同：5
> 
> 时间：2012-06-10T14:47:34.133
> 
> 标签：java, button, methods, swt, listener

有以下课程 -

```
public class GUIclass1 extends org.eclipse.swt.widgets.Composite {
    private void initGUI() {

        {
            // The setting of the open file button.
            openButton = new Button(this, SWT.PUSH | SWT.CENTER);
            openButton.addSelectionListener(new SelectionAdapter() {
                public void widgetSelected(SelectionEvent evt) {
                    foo() ; 
                }
            });
        }
    }

    public void foo() {
        // implementation ..
    }
} 
```

正如您在其中看到的，`addSelectionListener`有一个对方法的调用`foo()` 。

我的问题是 -`foo()`为了知道哪个类`foo()`与 .

我试过`super().foo()`没有成功。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T14:49:12.050

你会称它为`GUIclass1.this.foo()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:55:43.203

试试这个，

我们知道`an inner class has an implicit access to the members of the outer class`，所以`this.foo() Will NOT work`，但是

`GUIclass1.this.foo() Will WORK`.

# javascript - jQuery插件返回未定义

> ID：10969642
> 
> 赞同：0
> 
> 时间：2012-06-10T14:47:50.827
> 
> 标签：javascript, jquery, jquery-plugins

我有一个插件来翻译 dom 节点。这就是它的作用：

```
$.fn.jqTranslate = function (pkg, options) {
    var self = this;
    Translate.initialize(pkg, options).done(function () {
        return self.each(Translate.translate);
    });
};
translate: function () {
    var elem = $(this),
        key = elem.data('translate');
    if (Translate.translatable) {
        if (Translate.translatedStrings[key]) {
            if (Translate.translatedStrings[key].length === undefined) {
                // The key have nested keys
                Translate.translateElement(elem, Translate.translatedStrings[key].text);
                delete Translate.translatedStrings[key].text;
                elem.attr(Translate.translatedStrings[key]);
            }
            else Translate.translateElement(elem, Translate.translatedStrings[key]);
        }
    }
    if (typeof Translate.options.onComplete === 'function') Translate.options.onComplete.apply(this, arguments);
    return elem;
} 
```

如果您看到，它正在返回 self 因此插件理论上可以像这样链接：

```
$('p').jqTranslate('global').addClass('translated') 
```

应该工作，但它说：

> 未捕获的类型错误：无法调用未定义的方法“addClass”

我究竟做错了什么？

[您可以在GitHub](https://github.com/Belelros/jqueryTranslator)中查看完整代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:55:00.263

您正在`undefined`从插件中隐式返回。当您没有 return 语句时，函数返回`undefined`.

```
$.fn.jqTranslate = function (pkg, options) {
    var self = this;
    Translate.initialize(pkg, options).done(function () {
        return self.each(Translate.translate);
    });
    return this; //add return statement
}; 
```

# javascript - 用箭头键 jquery 移动元素

> ID：10969647
> 
> 赞同：-2
> 
> 时间：2012-06-10T14:48:17.923
> 
> 标签：javascript, jquery

谁能告诉我为什么这不起作用[jsfiddle 代码](http://jsfiddle.net/kuEA7/3/)？

JavaScript：

```
$(document).ready(function() {
        $(document).live("keydown", KeyOperation);
});

function KeyOperation(e)
{
    alert("in");
    var top = $(".move").offset().top;
    var left = $(".move").offset().left;
    var IncrementBy = 10;

    if (e.which == 37) {
        $(".move").css({ left: left - 10 });
    }
    else if (e.which == 38) {
        $(".move").css({ top: top - IncrementBy });
    }
    else if (e.which == 39) {
        $(".move").css({ left: left + IncrementBy });
    }
    else if (e.which == 40) {
        $(".move").css({ top: top + IncrementBy });
    }
}​ 
```

HTML：

```
<div class="move"></div>​ 
```

CSS：

```
.move
{
    width: 100px;
    height:100px;
    border:1px solid red;
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:52:52.860

假设问题是元素没有移动（你并没有真正在你的问题中明确问题），原因是元素没有正确定位。

添加`position: absolute`或添加`position: relative`到您的 CSS。

这是一个[更新的小提琴](http://jsfiddle.net/kuEA7/5/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:24:34.393

您需要`alert`在代码中删除该函数，并将该`.live`函数替换为该`.keydown`函数。

# node.js - Node.js 函数

> ID：10969654
> 
> 赞同：0
> 
> 时间：2012-06-10T14:48:40.743
> 
> 标签：node.js, express

我将 node.js 与 express 框架一起使用，并且我已经弄清楚了路由是如何工作的。

```
app.get('/save',webcalender.save); 
```

我有一个具有此功能的网络日历文件：

```
exports.save = function(req, res){
res.send(req.query["headline"]);}; 
```

但是我将如何构建一个不同的函数并在那里使用它：

```
exports.test = function() { console.log("test"); } 
```

我试过了：

```
exports.save = function(req, res){
    test(); or webcalender.test or also test = webcalender.test(); and then test;
res.send(req.query["headline"]);}; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:24:49.150

这个问题有点不清楚。

我假设`save`函数在一些中定义`webcalendar.js`并导入

```
var webcalendar = require('./webcalendar.js'); 
```

我现在在两种情况下打破答案。

## 假设`test`功能相同`webcalendar.js`

然后你可以做类似的事情

```
var test = function() {console.log("test");}
exports.test = test; 
```

或者在一行

```
var test = module.exports.test = function() {console.log("test");} 
```

然后`test`在同一个模块中使用`test();`就像你做的那样简单地调用。

## 如果 if`test`在另一个模块中定义

让我们说，`test.js`为了在`webcalendar.js`模块中使用它，你必须像这样要求它：

```
var test = require('./test.js').test;
exports.save = function(req, res){
    test();
res.send(req.query["headline"]);}; 
```

或者干脆

```
exports.save = function(req, res){
    require('./test.js').test();
res.send(req.query["headline"]);}; 
```

* * *

这应该涵盖大多数情况，如果不是，请澄清您的问题，因为正如我之前所说，它不清楚。

另外，我建议您熟悉[nodejs 模块](http://nodejs.org/docs/v0.4.2/api/modules.html)，以了解需要导出的原因、内容和时间，因为您不清楚为什么要导出该`test`函数（以防它仅在`webcalendar.js`模块中使用）。 这是nodejs需要[的另一个好资源](http://jherdman.github.com/2010-04-05/understanding-nodejs-require.html)

祝你好运！

# jquery - Jqgrid：工具栏搜索选项 - 从下拉列表中选择范围

> ID：10969658
> 
> 赞同：1
> 
> 时间：2012-06-10T14:49:12.927
> 
> 标签：jquery, jqgrid

我需要帮助来使用过滤器工具栏下拉菜单对 jqgrid 数据进行范围选择 - 我检查了它只有的 sopt 选项 -

```
['equal','not equal', 'less', 'less or equal','greater','greater or equal', 'begins with','does not begin with','is in','is not in','ends with','does not end with','contains','does not contain'] 
```

而且我无法在工具栏上找到有关如何使用此范围进行范围的任何线索。我有一个下拉菜单，其中包含`"All", "1-4", "5-9"`我的过滤器工具栏上的值，当我选择说`'1-4'`我希望网格填充该范围内的所有行时。我查看了一堆来自 stackoverflow 和 trirand 本身的过滤器示例，但它们似乎都用于搜索框。我很感激任何帮助来实现这一点，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:07:09.773

我能够根据示例多词样本- [http://www.ok-soft-gmbh.com/jqGrid/MultiwordSearchingToolbar.htm](http://www.ok-soft-gmbh.com/jqGrid/MultiwordSearchingToolbar.htm)按范围实现此过滤器。大部分代码来自上述示例，并进行了细微更改。根据 Oleg 的反馈进行了修改，使其成为 le 和 ge。

```
 modifySearchingFilter = function (separator) {
            var i, rules, rule, parts, group, str;
            var filters = $.parseJSON(this.p.postData.filters); 
            if(separator != '-')
              return;
            if (filters && typeof filters.rules !== 'undefined' && filters.rules.length > 0) {
                rules = filters.rules;
                for (i = 0; i < rules.length; i++) {
                    rule = rules[i];
                    if (rule.op === 'range') {
                        // Range should only have 2 parts lowerbound and upperbound
                        parts = rule.data.split(separator);
                        if (parts.length == 2) {
                            if (typeof filters.groups === 'undefined') {
                                    filters.groups = [];
                            }
                            group = {
                                groupOp: 'AND',
                                groups: [],
                                rules: []
                            };
                            filters.groups.push(group);
                            // Breaking to 2 rules one le and other ge
                            group.rules.push({
                                        data: (parts[0]),
                                        op: "ge",
                                        field: rule.field
                                    });                             
                            group.rules.push({
                                        data: (parts[1]),
                                        op: "le",
                                        field: rule.field
                                    });                                                                     
                            rules.splice(i, 1);     
                            i--; // to skip i++                             
                        }
                    }
                }
                this.p.postData.filters = JSON.stringify(filters);
            }
        },

 //using range op so that it is not confused with other ops
 setRangeSearchSelect = function(columnName) {
        grid.jqGrid('setColProp', columnName,
        {
           stype: 'select',
           searchoptions: {                                 value:buildRangeSearchSelect(),
                 sopt:['range'],                            
        }
     });
    };

 grid.jqGrid('filterToolbar',  
    {
     stringResult:true, 
     searchOnEnter:true,      
     defaultSearch:"cn", 
     beforeSearch: function () {  
       modifySearchingFilter.call(this, '-');    
     }}); 
```

# c# - 无效的嵌入语句错误 88

> ID：10969662
> 
> 赞同：5
> 
> 时间：2012-06-10T14:49:55.407
> 
> 标签：c#

为什么以下失败：

```
while (true)
   int a;

if(true)
   int a;

if(true)
   int a = 5;

if(true)
  int a = somestaticfunction(); 
```

显然，如果失败并显示：Visual Studio 上的“无效嵌入语句错误 88”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T15:15:33.837

这是对正在发生的事情的一个[很好的解释](http://web.archive.org/web/20111104035854/http://murrayon.net/2009/09/variable-declaration-restrictions.html)，它是语言规范的一部分。似乎Objective C、Java和C也有同样的限制。您可以通过像这样封闭您的陈述来解决它。

```
while(true)
    {int a;}

if(true)
    {int a;}

if(true)      
    {int a = 5;}      

if(true)      
    {int a = somestaticfunction();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:17:09.687

在 C# 中不能这样写。您应该像下面这样更改它，否则它将生成[Compiler Error CS1023:](http://msdn.microsoft.com/en-us/library/xaw06638%28vs.80%29.aspx)它说：

> 嵌入式语句，例如 if 语句之后的语句，既不能包含声明，也不能包含带标签的语句。

```
 while (true)
        {
               int a;
        }
if(true)
{
   int a;
}

if(true)
{
   int a = 5;
}

if (true)
{
    int a = somestaticfunction();
} 
```

# ios - iPhone 和 Mac 之间的通信

> ID：10969666
> 
> 赞同：4
> 
> 时间：2012-06-10T14:50:04.313
> 
> 标签：ios, macos, networking, bluetooth

我正计划创建一个从 iPhone 获取数据并将其发送到 Mac 上的另一个应用程序的应用程序。陀螺仪数据也将被发送。

我假设这最好通过蓝牙连接完成。

谁能给我一些关于我应该如何构建应用程序或是否可能的信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T16:00:02.637

我说实现这一点的最理想方式是通过 Bonjour 协议。

这是一篇关于这个主题的精彩文章， http: [//mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/](http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/)。

在 iOS 中使用 Bonjour 的好处是它也可以通过蓝牙工作。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-07T05:26:54.747

在这里，我创建了在 iphone 和 iMAC 之间交换数据的示例应用程序。

我只用wifi测试过。

[https://github.com/boobalaninfo/Bonjour-iOS-MAC-Apps](https://github.com/boobalaninfo/Bonjour-iOS-MAC-Apps)

# ssis - 在 SSIS 中更新结果集的列

> ID：10969668
> 
> 赞同：0
> 
> 时间：2012-06-10T14:50:26.997
> 
> 标签：ssis

我想从 SSIS 中的“执行 SQL 任务”中的 SELECT 语句更新结果集的列文档路径，该语句将文档路径生成为 company\doc_ID。如果我想将每个文档的每个文档路径从 company\doc_ID 更改为 tm\doc_ID，那么实现此目的的最佳方法是什么？

# powershell - 使用 Register-WmiEvent 通知脚本何时开始执行

> ID：10969671
> 
> 赞同：1
> 
> 时间：2012-06-10T14:50:56.047
> 
> 标签：powershell, wmi, powershell-2.0

我对 PS 完全陌生，我一直在尝试想出一种方法来检测脚本何时开始执行，比如 Foo.(ps1 | pl | py | bar) 以便我可以在该事件上运行 powershell 脚本. 我开始使用[MSDN](http://blogs.msdn.com/b/powershell/archive/2009/08/30/exploring-wmi-with-powershell-v2.aspx)中的以下示例，并添加了一个 if 语句来过滤除 PS 执行之外的所有内容。

```
$Query = 'SELECT * FROM Win32_ProcessStartTrace'            
$action = {            
    $e = $Event.SourceEventArgs.NewEvent 
    if($e.ProcessName -eq "powershell.exe") {           
        $fmt = 'ProcessStarted: (ID={0,5}, Parent={1,5}, Time={2,20}, Name="{3}")'            
        $msg = $fmt -f $e.ProcessId, $e.ParentProcessId, $event.TimeGenerated, $e.ProcessName            
        Write-host -ForegroundColor Red $msg            
    }
}            
Register-WmiEvent -Query $Query -SourceIdentifier ProcessStart -Action $Action 
```

代码现在检测 powershell 实例何时启动，但我还没有找到访问和过滤传递给实例的参数的方法。我想确保我只对 Foo 脚本而不是任何其他 PS 脚本采取行动。有没有办法访问已启动的 powershell 进程的参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T15:45:59.270

试一试，您可以尝试将您的脚本与新进程的 CommandLine 属性相匹配：

```
Register-WmiEvent -Query "SELECT * FROM __InstanceCreationEvent WITHIN 2 WHERE TargetInstance isa 'Win32_Process'" -SourceIdentifier NewPSProcess -Action {
    $e = $EventArgs.NewEvent.TargetInstance
    if($e.Name -eq 'powershell.exe')
    {
        #if($e.CommandLine -match 'yourScript') { ... }
        Write-host $e.CommandLine
    }
}

sleep 5
powershell -file c:\test.ps1 
```

**更新**
这是一个仅捕获 powershell.exe 进程创建（在查询级别）并将命令行值写入文本文件的更新代码。我能够查看写入文件的所有 powershell 进程创建（由 cmd 生成）。

```
$query = 'Select * From __InstanceCreationEvent Within 2 Where TargetInstance Isa "Win32_Process" And TargetInstance.Name = "powershell.exe"'
Register-WMIEvent -Query $query -SourceIdentifier NewPSProcess -Action {
   $EventArgs.NewEvent.TargetInstance.CommandLine | Out-File D:\scripts\temp\psevent.txt -Append
} 
```

# ruby-on-rails - ActiveRecord 回调和验证的顺序是什么？

> ID：10969673
> 
> 赞同：57
> 
> 时间：2012-06-10T14:51:51.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord

我想知道创建 ActiveRecord 对象时调用的回调和验证的顺序是什么。

假设我有一些自定义验证和回调，如下所示：

```
validates :reference_code, :if => :reference_code, :on => :create
before_create :assign_reference 
```

哪个会先运行？回调需要首先发生，否则验证可能会失败。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-06-13T18:35:59.387

最新版本的 Rails 列表的最新版本可以在[`ActiveRecord::Callbacks`文档](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)中找到。Rails 4、3 和 2 的列表如下。

## 导轨 4

这个列表的最新版本可以在[Rails 4 Guides](http://guides.rubyonrails.org/active_record_callbacks.html#available-callbacks)中找到。

### 创建对象

*   `before_validation`
*   `after_validation`
*   `before_save`
*   `around_save`
*   `before_create`
*   `around_create`
*   `after_create`
*   `after_save`
*   `after_commit/after_rollback`

### 更新对象

*   `before_validation`
*   `after_validation`
*   `before_save`
*   `around_save`
*   `before_update`
*   `around_update`
*   `after_update`
*   `after_save`
*   `after_commit/after_rollback`

### 销毁对象

*   `before_destroy`
*   `around_destroy`
*   `after_destroy`
*   `after_commit/after_rollback`

## 导轨 3

此列表的最新版本可以在[Rails 3 Guides](http://guides.rubyonrails.org/v3.2.21/active_record_validations_callbacks.html#available-callbacks)中找到。

### 创建对象

*   `before_validation`
*   `after_validation`
*   `before_save`
*   `around_save`
*   `before_create`
*   `around_create`
*   `after_create`
*   `after_save`

### 更新对象

*   `before_validation`
*   `after_validation`
*   `before_save`
*   `around_save`
*   `before_update`
*   `around_update`
*   `after_update`
*   `after_save`

### 销毁对象

*   `before_destroy`
*   `around_destroy`
*   `after_destroy`

## 导轨 2

此列表的最新版本可以在[Rails 2.3 指南中找到](http://guides.rubyonrails.org/v2.3.11/activerecord_validations_callbacks.html#available-callbacks)

### 创建对象

*   `before_validation`
*   `before_validation_on_create`
*   `after_validation`
*   `after_validation_on_create`
*   `before_save`
*   `before_create`
*   *`INSERT`*手术
*   `after_create`
*   `after_save`

### 更新对象

*   `before_validation`
*   `before_validation_on_update`
*   `after_validation`
*   `after_validation_on_update`
*   `before_save`
*   `before_update`
*   *`UPDATE`*手术
*   `after_update`
*   `after_save`

### 销毁对象

*   `before_destroy`
*   *`DELETE`手术*
*   `after_destroy`

由于您需要首先验证`reference_code`，因此`assign_reference`可以在回调中调用该方法，也可以在`after_validation`我上面提供的列表中出现在它之后的任何回调中调用该方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-21T06:30:05.120

# 导轨 5

这是一个[包含所有可用 Active Record 回调](https://guides.rubyonrails.org/active_record_callbacks.html#available-callbacks)的列表，按照在相应操作期间调用它们的顺序列出：

## 1 创建对象

*   `before_validation`
*   `after_validation`
*   `before_save`
*   `around_save`
*   `before_create`
*   `around_create`
*   `after_create`
*   `after_save`
*   `after_commit/after_rollback`

# 2 更新对象

*   `before_validation`
*   `after_validation`
*   `before_save`
*   `around_save`
*   `before_update`
*   `around_update`
*   `after_update`
*   `after_save`
*   `after_commit/after_rollback`

## 3 销毁对象

*   `before_destroy`
*   `around_destroy`
*   `after_destroy`
*   `after_commit/after_rollback`

`after_save`在创建和更新时都运行，但总是在更具体的回调之后运行，`after_create`并且`after_update`无论宏调用的执行顺序如何。

`before_destroy`回调应该放在`dependent: :destroy`关联之前（或使用 prepend: true 选项），以确保它们在记录被删除之前执行`dependent: :destroy`。

# android - 使用“so”文件创建一个 SDK（单个 jar 文件）

> ID：10969676
> 
> 赞同：5
> 
> 时间：2012-06-10T14:52:16.153
> 
> 标签：android, sdk, android-ndk

我应该创建一个易于使用的 SDK，所以我需要将它放在一个 jar 文件中。资源是有问题的，但是如果包含“.so”文件，这些文件是 NDK 创建的库（通常放在“libs/armeabi”文件夹中）呢？

是否可以将“.so”文件添加到 jar 文件中，这样使用 SDK 的 jar 文件的人就不需要将它们添加到项目中的 libs 文件夹中？

如果是这样，如何，如果没有，是否有任何解决方法？

澄清一下：无论谁使用 SDK，都应该只使用一个 jar 文件，其中包含使用 SDK 所需的所有内容，包括“.so”文件。

请注意，如果我将 libs 文件夹（以及其中的“.so”文件）放入使用 SDK 的项目中，它就可以正常工作。如果我将 SDK 项目用作 Android 项目，情况也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:00:41.703

其实它就是`Android`既然`ADT 17`来了。事实上，当您创建 a`library project`并将其导入另一个项目时，`Android`会创建一个`jar file`. 这也是真的`native library`。很简单，当您构建项目库时，该`armeabi`文件夹也将包含在其中`jar`。

# ruby-on-rails - 如何在洗劫时使用字段名设置默认条件？

> ID：10969678
> 
> 赞同：4
> 
> 时间：2012-06-10T14:52:36.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, predicate, ransack

我有一个用户和一个角色模型，两者都通过 habtm 关联，并且有一个与角色关联的论坛模型。在论坛的搜索表单中，我想按具有特定角色的用户（按名称：版主）进行过滤。

源代码如下所示：

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :roles, :join_table => :users_roles
  rolify

class Role < ActiveRecord::Base
  has_and_belongs_to_many :users, :join_table => :users_roles
  belongs_to :resource, :polymorphic => true

class Forum < ActiveRecord::Base
  has_many :roles, :as => :resource
  ...

<%= simple_form_for @forums, :html => { :class => 'form-horizontal' } do |f| %>
  ...
  <%= f.input :roles_users_id_in, 
              :collection => User.joins(:roles)
                                 .where(:roles => {:name => :moderator}) %> 
```

是否可以将其组合到字段名称中，我是否需要使用自定义设置进行设置，或者如何使用预设条件（role.name == :moderator）进行搜索？

**更新**

看起来我必须使用自定义的ransacker，我想出了以下内容：

```
class Forum < ActiveRecord::Base
  ..
  ransacker :moderator_users, :formatter => proc { |v|
    Role.joins(:users).where(:roles => { :name => :moderator, 
                                         :resource_type => :forum}, 
                             :users => {:id => v}).map(&:resource_id)
  } do |parent|
    parent.table[:id]
  end

<%= search_form_for @q, :builder => SimpleForm::FormBuilder do |f| %>

    <%= f.input :moderator_users_in, 
                :collection => User.joins(:roles)
                                   .where(:roles => {:name => :moderator}),
    ... 
```

使用上面的解决方法，有一个论坛 sql 查询和一个针对每个用户的查询。是否可以将其结合起来并将 sql 查询设置为如下所示：

```
SELECT DISTINCT `forums`.* FROM `forums` 
  LEFT OUTER JOIN `roles` ON `roles`.`resource_id` = `forums`.`id` AND 
                  `roles`.`resource_type` = 'Forum'                  
  LEFT OUTER JOIN `users_roles` ON `users_roles`.`role_id` = `roles`.`id` 
  LEFT OUTER JOIN `users` ON `users`.`id` = `users_roles`.`user_id` 
WHERE `roles`.`name` = 'responsible' AND `users`.`id` IN (1,3,6) 
```

另见：[https ://github.com/ernie/ransack/issues/103](https://github.com/ernie/ransack/issues/103)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T08:09:55.807

我不是 100% 确定我得到了这个问题，而且它有点老了，但无论如何我都会尝试一下：

因此，您拥有想要搜索的模型，并且拥有始终想要应用的条件。现在我想到的第一件事就是控制器中结果的 where 条件，如下所示：

```
@q = Forum(params[:q])
@forums = @q.result.where("role_id = ?", 1) # the number of course should be the id of the moderator object 
```

或者您可以在搜索表单中尝试隐藏字段：

```
<%= f.select(:role_name_matches, Role.pluck(:name), :as => :hidden, :input_html => { :value => "moderator" } ) %> 
```

如果您的意思是别的意思并且仍然需要回答，请向我解释您的意思。我有相当多的洗劫经验，并想提供帮助。

# c# - 泛型类，如何在运行时设置类型？

> ID：10969681
> 
> 赞同：3
> 
> 时间：2012-06-10T14:53:01.193
> 
> 标签：c#, generics, runtime, generic-programming

我创建了一个泛型类，但我知道运行时的类型，而不是设计中的类型，所以我想知道如何在运行时设置类型。

例如，我有：

```
public class MyGenericClass<T>
{
....
} 
```

然后我尝试使用它。我在其他类中有一个方法，它使用这个泛型类。在这个类的构造函数中，我接收到我想要的类型作为参数，所以我有一个类型属性，我在其中保存了我需要的类型。所以我正在尝试这个：

```
MyGenericClass<_typeNeeded> myClass = new MyGenericClass<typeNeeded>(); 
```

但这不起作用。

如何在我创建的类中设置运行时类型？

我正在使用 C# 4.0。

谢谢。戴姆洛克。

编辑：我想要做的是以下。我有一个类需要对数据库进行一些查询。这个查询总是返回相同的信息，一个类，但是包含这个类的信息来自不同的表。这是因为我需要确定要使用的查询。为了决定使用什么查询，我使用收到的类型。

出于这个原因，我在设计时不知道类型，但在运行时。

我可以使用将由类实现的接口，并使用用正确的类实例化的接口，但这使我在实例化的时刻有一个开关或一个 if，这就是我试图避免的，我想要更通用的东西。另外，如果我使用这个解决方案，在实例化的那一刻有一个 if，我可以创建泛型类，所以我只有一个类，它会更易于维护。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T15:04:06.057

看看[`MakeGenericType`](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)方法。您可以使用它来创建一个`Type`实例（然后可用于创建该类型的实例），该实例具有在运行时确定的通用参数值。但是请注意，在处理该对象的通用特征时，您需要更多的反思；您不能在代码中创建类型为具有变量类型参数的泛型类型的变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T17:59:19.630

您可以通过另一种方式创建您的类，将您想要使用的类型传递给构造函数并利用[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264741.aspx)关键字。

例如：

```
class MyGeneralClass
{
    dynamic myVariable;
    Type type;

    public MyGeneralClass(Type type)
    {  
        this.type = type;
        myVariable = Activator.CreateInstance(type);
        //And then if your type is of a class you can use its methods      
        //e.g. myVariable.MyMethod();
    }

    //If your function return something of type you can also use dynamic
    public dynamic Function()
    {
        return Activator.CreateInstance(type);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T18:27:55.677

如果您考虑一下，没有理由拥有在运行时确定类型的泛型。泛型提供强类型，但这只有在编译时知道类型时才有可能。这是泛型的最大优势之一，它提供了安全性，因为您知道对象可以执行哪些操作。在运行时，如果你不知道你得到的是什么类型，那将违背这个目的，你将不得不深入研究强大的（但有时是危险的）**反射**世界。例如，

```
List<DateTime> list = new List<DateTime>();
foreach (DateTime item in list)
   item.Minute + ": " + item.Hour 
```

因为我在编译时知道类型，所以我可以将它存储在一个通用容器中，并且在使用它时我具有类型安全性。我知道该项目具有 Minute 和 Hour 属性。

* * *

如果要根据对象的类型执行操作，则使用 GetType() 方法。这是您进入运行时类型识别和处理的窗口。

```
Result PerformQuery(object unknownObject)
{
    switch (object.GetType())
    {
         case typeof(ThisType): Do This; break;
         case typeof(ThatType): Do That; break;
    }
} 
```

* * *

如果您要对对象做某事，那么您要么在编译时知道方法名称，这意味着您可以使用接口，

```
IFood hamburger = new Hamburger();
hamburger.BeEaten(); 
```

* * *

如果您没有或想要使用接口，您可以使用反射或动态，在这种情况下，如果我知道要调用什么方法，我会使用动态。

```
Result PerformQuery(object unknownObject)
{
    if (object.GetType() == typeof(Pizza))  
    {
        dynamic pizza = unknownObject;
        pizza.BakeInOven() // since I checked and know it is type Pizza it is 'somewhat' safe to do this, unless Pizza class changes the name of BakeInOven method.
     }
 } 
```

* * *

最后，如果您不知道要在编译时调用的方法，您可以使用反射。

```
 string methodName = CalculateWhatMethodShouldBe();
  MethodInfo myMethod = unknownObject.GetType().GetMethods().First(m => m.Name == methodName);    
  MethodInfo.Invoke(unknownObject); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T15:05:28.737

我没有关于您的代码的足够信息，但也许您可以使用简单的多态性：

```
public interface IMyInterface
{
...
}

public class MyGenericClass<T> : IMyInterface
{
....
}

IMyInterface myClass = new MyGenericClass<typeNeeded>(); 
```

您还可以将其与工厂设计模式混合使用，以便其他一些类将根据一些运行时知识负责您的类型的实例化。

这当然假设您的 MyGenericClass 没有以下方法：

```
public T GetT(){...} 
```

或者如果它确实存在所有 T'types 之间的附加关系，以便它们都有共同的超类，可以说 BaseT，你可以改变

```
public T GetT(){...} 
```

到：

```
public BaseT GetT(){...} 
```

# java - 现有 java 类的 Javadoc

> ID：10969682
> 
> 赞同：-1
> 
> 时间：2012-06-10T14:53:05.110
> 
> 标签：java, eclipse, javadoc

我正在使用 Eclipse，并且说我对 StreamTokenizer 类感兴趣，我希望能够在没有互联网连接的情况下从 Eclipse 内部看到类似[的东西。](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/StreamTokenizer.html)我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:56:01.303

如果您的 JDK 设置正确，那么当您将鼠标放在某物上或滚动浏览自动完成列表时，您应该能够看到 Javadoc 条目。

在 Java 类中键入 StreamTokenizer，确保它已在顶部导入，然后将鼠标放在它上面以查看它的 Javadoc。方法/字段等也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:56:38.743

将此处的 Java 7 Java 文档下载到您的桌面：

[http://www.oracle.com/technetwork/java/javase/documentation/java-se-7-doc-download-435117.html](http://www.oracle.com/technetwork/java/javase/documentation/java-se-7-doc-download-435117.html)

然后，转到 Eclipse Preferences -> Java -> Installed JREs

选择您的 JRE，单击编辑...

选择 rt.jar（此 jar 文件包含 Java 的所有运行时类），然后选择“Javadoc Location...”，并将 URL 指向上面 javadoc 下载的 zip 文件。

您现在可以在 Eclipse 中离线访问 Java 7 文档。

# xcode - 使用 Swipe 使用另一个 IBaction (XCODE)

> ID：10969684
> 
> 赞同：0
> 
> 时间：2012-06-10T14:53:28.027
> 
> 标签：xcode, gestures

我现在正在为 iOS 构建一个音乐应用程序，我有一个与 Nextsong 的 IBoutlet 连接的按钮。例如。如何将滑动用作按钮。所以当刷卡时，会触发一个 IBoutlet。

这可能吗？这会怎样？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:42:48.547

Define a function `nextSong` then your button and the swipe gesture can call it, depending on which action the user makes.

# javascript - 模式弹出窗口上的按钮单击事件，在网格视图内未触发

> ID：10969690
> 
> 赞同：0
> 
> 时间：2012-06-10T14:54:22.970
> 
> 标签：javascript, asp.net, vb.net

我遇到以下问题。

**场景：** 我有一个 asp 网格，其中有几列绑定到数据。最后一列已转换为模板字段。在这个模板字段中是一个按钮，上面附加了一个模态弹出扩展器。隐藏在此字段内的是一个模式弹出窗口。此模式弹出窗口用于添加新帐户。它包含 2 个文本框、下拉列表和按钮（“添加”和“取消”）。单击“添加”时，在后面的代码中插入新帐户后，模式应该关闭。

**问题：** 我让弹出窗口显示并从缓存中加载下拉列表，没有问题。如何在后面的代码中触发按钮单击事件。我尝试使用执行 _doPostBack('btnAddAcc','') 的 JavaScript 函数，但它一直返回错误“JavaScript 错误：预期对象”。我在 Google 上大约 1 小时后收集到，这是因为找不到“btnAddAcc”，因为它实际上位于网格视图单元格中，无法直接访问。使用页面方法和 ajax 调用是公司的最后手段对此有严格的政策，只有在一堆文书工作后才允许这样做。

编码：

```
<asp:GridView ID="gvNEA" runat="server" CssClass="gridA_Orange" 
AutoGenerateColumns="False" AllowPaging="True" 
EmptyDataText="No transactions with 'Non Existent Account(s)'" 
ShowHeaderWhenEmpty="True" Width="945px">
<Columns>
    <asp:BoundField HeaderText="Transaction Date" DataField="Transaction_Date" />
    <asp:BoundField HeaderText="Account Number" DataField="Account_Number" />
    <asp:BoundField HeaderText="Description" DataField="Description"/>
    <asp:BoundField HeaderText="Amount" DataField="Amount"/>
    <asp:BoundField HeaderText="Offset Account" DataField="OffsetAccount" />
    <asp:BoundField HeaderText="File Name" DataField="FileName" />
    <asp:BoundField HeaderText="Transaction Type" DataField="TransType" />
    <asp:TemplateField ShowHeader="False">
        <ItemTemplate>
            <asp:Button ID="btnAdd" runat="server" CausesValidation="false" 
                OnClientClick="showPopUp('pupAddAcc');" Text="Add Account" CssClass="ButtonStyle_Gray" />
            <asp:ModalPopupExtender ID="mpeAddAcc" runat="server" 
                BackgroundCssClass="modalBackground" TargetControlID="btnAdd"
                PopupControlID="pnlAddAcc"
                CancelControlID="btnCancelAddAcc" DropShadow="True" 
                Enabled="True">
            </asp:ModalPopupExtender>
            <div id="pupAddAcc">
                <asp:Panel ID="pnlAddAcc" runat="server" BackColor="White" 
                    BorderColor="White" BorderStyle="Solid" BorderWidth="1px" Width="430">                
                    <table align="center" id="tblAddAcc" class="BasicHTMLTable">
                    <asp:HiddenField ID="hfTransType" runat="server" Value='<%# Bind("TransType") %>' />
                        <tr align="center" >
                            <td colspan="2">
                                <asp:Label ID="lblAccountHeader" runat="server" width="390px" Text="Add Account" 
                                CssClass="ButtonStyle_Orange" Height="25px" Font-Bold="true" Font-Size="Large" />
                            </td>
                        </tr>
                        <tr>
                            <td align="right" class="PopupCol">Account Number</td>
                            <td align="left" ><asp:Label ID="lblAccNumber" runat="server" Width="165px" 
                                    Text='<%# Bind("Account_Number") %>' /></td>
                        </tr>
                        <tr>
                            <td align="right" class="PopupCol" >Name</td>
                            <td align="left" ><asp:TextBox ID="txtName" runat="server" Width="165px" />
                                <asp:RequiredFieldValidator ID="rfvName" runat="server" 
                                    ControlToValidate="txtName" Text="*" ValidationGroup="acc" />
                            </td>
                        </tr>
                        <tr>
                            <td align="right" class="PopupCol" >Search Name</td>
                            <td align="left" ><asp:TextBox ID="txtSearchName" runat="server" Width="165px" />
                                <asp:RequiredFieldValidator ID="rfvSName" runat="server" 
                                    ControlToValidate="txtSearchName" 
                                    Text="*" ValidationGroup="acc" />
                            </td>
                        </tr>
                        <tr>
                            <td align="right" class="PopupCol" >Group</td>
                            <td align="left" >
                                <asp:DropDownList ID="ddlGroup" runat="server" Width="170">                                
                                </asp:DropDownList>
                            </td>
                        </tr>
                        <tr>
                            <td align="right" class="PopupCol" >Currency</td>                                    
                            <td align="left" >
                                <asp:DropDownList ID="ddlCurrency" runat="server" Width="170px">
                                </asp:DropDownList>
                            </td>
                        </tr> 
                        <tr>
                            <td align="center" colspan="2">
                                <asp:Button ID="btnAddAcc" runat="server" Text="Add Account" 
                                    CssClass="ButtonStyle_Orange" OnClientClick="javascript:addAccount()" 
                                    ValidationGroup="acc" />  
                                &nbsp&nbsp                      
                                <asp:Button ID="btnCancelAddAcc" runat="server" Text="Cancel" CssClass="ButtonStyle_Orange" />
                            </td>
                        </tr>
                    </table>                
                </asp:Panel>
            </div>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:BoundField HeaderText="RecId" DataField="RecId" Visible="False"/>
</Columns> 
```

我用这个 JavaScript 函数打开弹出窗口：

```
function showPopUp(p) {
        var Popup = document.getElementById(p);
        Popup.style.visibility = "visible";
        Popup.style.display = "";
    } 
```

点击 btnAddAcc 时的功能：

```
function addAccount() {
        _doPostBack('btnAddAcc', '');
    }; 
```

函数背后的代码

```
Protected Sub btnAddAcc_Click(sender As Object, e As System.EventArgs)
    'Code for inserting new account goes here
End Sub 
```

提前感谢您的任何帮助和建议。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:02:30.737

如果将 OnClick 设置为服务器端事件会发生什么？

```
<td align="center" colspan="2"> 
  <asp:Button ID="btnAddAcc" runat="server" Text="Add Account"  
     CssClass="ButtonStyle_Orange" OnClick="btnAddAcc_Click"  
     ValidationGroup="acc" />   
  &nbsp&nbsp                       
  <asp:Button ID="btnCancelAddAcc" runat="server" Text="Cancel" CssClass="ButtonStyle_Orange" /> 
</td> 
```

但是......获取事件引用（即'__doPostback'的东西）的正确方法是在服务器端获取它`ClientScript.GetPostBackEventReference`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:09:02.033

我最终找到了答案。我不得不使用 gridview.RowCommand 事件。它处理网格视图单元格内的所有按钮相关事件。

查看 msdn 文档。它应该解释这个命令的大部分内容。

[GridView.RowCommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

问候乔治

# oracle - 约束违反异常 ORA-00001

> ID：10969693
> 
> 赞同：3
> 
> 时间：2012-06-10T14:54:49.363
> 
> 标签：oracle, hibernate, indexing, ora-00001

我正在使用 Oracle 数据库。我们在调用我们的服务时经常看到失败。当我查看日志时，我在表上看到以下异常

java.sql.BatchUpdateException：ORA-00001：违反了唯一约束 (DBSCHEMA.IDX_CO_DETAILS)。

我检查了表上的索引以获取索引名称 DBSCHEMA.IDX_CO_DETAILS 。

它不包括任何列（INCLUDE_COLUMN 为空）。我怎么知道这个约束是为了什么？是主键约束吗？

我们将休眠用于 ORM。下面是休眠上下文中的回溯

```
Caused by: org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:94)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:266)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:167)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1027)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:365) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T15:07:23.890

[唯一约束](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CNCPT1642)强制执行唯一性。[与主键约束](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CNCPT1646)不同，它将允许空值。

您的错误意味着当数据库已配置为明确禁止时，您正在插入重复数据。

[您可以通过对all_constraints](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1046.htm#i1576022)运行以下查询来找出表上有哪些约束。链接解码列`CONSTRAINT_TYPE`，例如`P`是主键和`U`唯一键。

```
select *
  from all_constraints uc
 where uc.table_name = 'MY_TABLE'
   and owner = 'DBSCHEMA' 
```

要找出约束中的列，[`all_cons_columns`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1044.htm#sthref1057)请改用，或将两者组合到一个查询中：

```
select uc.*, ucc.column_name, ucc.position
  from all_constraints uc
  join all_cons_columns ucc
    on uc.owner = ucc.owner
   and uc.table_name = ucc.table_name
   and uc.constraint_name = ucc.constraint_name
 where uc.table_name = 'MY_TABLE'
   and uc.owner = 'DBSCHEMA' 
```

对于任一查询，您都可以添加附加条件`and constraint_name = 'IDX_CO_DETAILS'`以找出似乎导致您的问题的特定约束的详细信息。

* * *

出于几个原因，您的评论有点令人惊讶。即使是系统创建的约束，例如在创建表时没有指定名称的情况下在线定义的约束，也应该显示出来。此外，约束名称`IDX...`暗示它是一个索引。

如果您运行以下查询，它应该会告诉您该对象是否存在于数据库中：

```
select *
  from all_objects
 where object_name = 'IDX_CO_DETAILS' 
```

我希望`OBJECT_TYPE`这个查询返回的是`'INDEX'`.

此后，以下查询将返回具有该名称的每个索引、索引的类型、与之关联的表以及该表的所有者。

```
select *
  from all_indexes
 where index_name = 'IDX_CO_DETAILS' 
```

根据您的错误判断，我进一步希望`UNIQUNESS`此查询返回的列是`'UNIQUE'`.

这应该可以帮助您追踪对象。

也可以使用系统包[`dbms_metadata`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_metada.htm#ARPLS640)来追踪对象的DDL；小心它返回一个clob。

```
select dbms_metadata.get_ddl('INDEX','IDX_CO_DETAILS', schema => 'DBSCHEMA') 
  from dual 
```

该参数`schema`是可选的。

# ios - 连接返回时重新发送 ASIHTTPRequest

> ID：10969694
> 
> 赞同：0
> 
> 时间：2012-06-10T14:54:59.163
> 
> 标签：ios, queue, asihttprequest, nsoperation, nsoperationqueue

我正在使用 ASIHTTPRequest 与我的网站进行交互。我基本上是将 ASIHttpRequests 添加到队列中。如果有互联网连接，一切正常。但是，我猜如果请求失败（即没有互联网连接），操作会被删除

有没有办法仅在有互联网连接时排队和执行请求？如果没有互联网连接，请求应该排队并在连接返回时自动发送。如果这是不可能的，那么完成我在这里尝试的最佳方法是什么？

谢谢！

这就是我现在设置队列的方式：

```
NSURL *url = [NSURL URLWithString:@"http://www.tst.com.au/test.php?op=updateField"];

        ASIFormDataRequest *startHourRequest = [ASIFormDataRequest requestWithURL:url];

        NSDateFormatter *apiformatter = [[ [NSDateFormatter alloc] init] autorelease];
        [apiformatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
        NSString *webdate = [apiformatter stringFromDate:date];
        [startHourRequest setDelegate:appDelegate];
        [startHourRequest setPostValue:webdate forKey:@"fieldvalue"];
        [startHourRequest setPostValue:[appDelegate shiftuid] forKey:@"uid"];
        [startHourRequest setPostValue:editAttribute forKey:@"fieldname"];
        [startHourRequest setDidFinishSelector:@selector(requestDone:)];
        [startHourRequest setDidFailSelector:@selector(requestWentWrong:)];
        [[appDelegate queue] addOperation:startHourRequest]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:04:49.433

是的，您可以使用 Reachability 类很容易地做到这一点：

首先，您将在发送初始请求之前检查 Internet 可访问性：

```
Reachability *reachability = [Reachability reachabilityForInternetConnection];    
NetworkStatus internetStatus = [reachability currentReachabilityStatus];
if (internetStatus != NotReachable) {
    //Do your request
}
else {
    //save your url to an array for use when the internet returns
} 
```

并在视图控制器或您发送请求的任何地方执行此操作以侦听 Internet 更改

```
- (void)viewDidLoad

    [[NSNotificationCenter defaultCenter]
     addObserver:self 
     selector:@selector(networkStatusChanged:) 
     name:kReachabilityChangedNotification 
     object:nil];

    internetReachable = [Reachability reachabilityForInternetConnection];
    [internetReachable startNotifier];
}

- (void)networkStatusChanged:(NSNotification *)notice {
    NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
    if (internetStatus != NotReachable && [yourUrlsToSend count] > 0) {
        //send off your requests now that you have internet

    }
} 
```

这一切都取决于包括来自苹果的 reqchability 文件，可以在此处找到：在此处[输入链接描述](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。希望有帮助

# selenium - selenium IDE、RC 和 XUnit

> ID：10969699
> 
> 赞同：1
> 
> 时间：2012-06-10T14:55:36.413
> 
> 标签：selenium, junit, phpunit, selenium-rc, selenium-ide

**如果 selenium RC 比 selenium IDE 更强大，为什么人们使用 selenium IDE？**， 我不明白。这些都进行测试，但其中一个（RC）使用另一种语言（具有所有优点）。所以，对 selenium 的真正兴趣是使用 RC，不是吗？IDE不是很好，还是我错了？

**另一个问题**是（我是单元测试的新手），当你使用 selenium RC 时，最后你使用 PHPunit o Junit（即），那么，你为什么使用 selenium？，仅使用 phpunit 还不够吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:17:18.127

Selenium 工具实际上是三个，而不是两个：

* * *

## 硒 IDE

是一个 Firefox 附加组件，由 Selenium RC 提供支持。它很容易学习，它可以非常快速地创建测试用例，并且对于测试用例记录工具来说非常聪明。它仅具有 Selenese（内置命令）和（有限）JavaScript 的优势，因此不是很强大。但是，如果您需要在一个不太复杂的网页上快速创建测试用例，那么它就是您可以使用的工具，因为它非常易于使用并且非常快速。您必须在 Java 中为 Selenium RC（或 WebDriver）编写一百行代码，但您只需在 IDE 中单击几次即可完成。不需要 Eclipse/NetBeans，几乎不需要编程技能。它适用于基本问题和静态页面。

* * *

## 硒 RC

给你这么多。它由纯 JavaScript 支持（每次都被注入到页面中），并具有类似六种编程语言（C#、Java、Ruby、PHP、Python、Perl）的 API。它使您能够充分利用语言的潜力，例如，我们使用 Java 连接到数据库，检查其状态并检查一些先决条件。但是完成事情需要更多的时间、精力和知识。

此外，Selenium RC 已在一年前被弃用！没有更多的发展。它可以工作，但它有一些无法轻易克服的严重限制（JavaScript 的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，JavaScript 的安全策略无法编辑`<input type='file' />`元素，一个非常不可扩展的 API，它实际上不允许你进行所有可能的修改需要，无法处理`onload`JS 对话框...）。

* * *

## Selenium WebDriver（又名 Selenium 2）

是 Selenium RC 的继承者。它真的从内部驱动浏览器（IE 的 DLL 挂钩、Firefox 的插件、谷歌自己为 Chrome 提供的驱动程序等），有一个非常漂亮和干净的 API 并克服了 Selenium RC 的所有问题（除了下载文件，然而)，它正在积极开发和增强。现在推荐使用 Selenium WebDriver，而不是 Selenium RC。

[（天哪，这么多文字只是为了说服您使用 WebDriver 而不是 RC）]

* * *

关于**PHPUnit**：

PHPUnit 和 Selenium 做了一些非常不同的事情。PHPUnit（就像任何 xUnit 框架一样）主要用于[单元测试](http://en.wikipedia.org/wiki/Unit_testing)，但 Selenium 更多的是[黑盒测试](http://en.wikipedia.org/wiki/Black-box_testing)或[系统测试](http://en.wikipedia.org/wiki/System_testing#Types_of_tests_to_include_in_system_testing)。

当您编写代码时，最好用 PHPUnit 编写测试 - 这些测试将测试您项目的内部结构。他们会一件一件、一件一件地做。Selenium 从另一个角度看待它——它测试用户可以真正看到和体验到的东西，它测试整个项目，以及所有微小的东西如何协同工作。*它在浏览器本身中*测试（以及其他！）您的前端，因此您可以在多个浏览器中尝试您的新更改，而无需移动手指。Selenium 从外部测试您的整个应用程序，它会查看当有人敲门时它的行为。PHPUnit 从内部测试应用程序的各个部分——是否正确的人去开门以及是否没有忘记拿钥匙。

PHPUnit 测试和 Selenium 测试都需要。这些框架并不是真正的竞争对手，它们在其中一个不足的地方相互补充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:51:25.140

Selenium IDE 不需要编程语言知识……这还不错。有时有人只是想设置一个简单的脚本，而 Selenium IDE 应该使工作变得轻松简单。

Selenium 的重点不是取代 JUnit 和其他框架进行单元测试；它的重点是控制浏览器，以便您可以模拟用户与您的网站或应用程序的交互。我不明白问题的那一部分。例如，Selenium 的使用并不总是与 JUnit 的使用相关联。

与您的问题相同，为什么使用 Selenium RC 而不是 Selenium 2 (WebDriver)？

# database - talend中如何连接数据库

> ID：10969700
> 
> 赞同：4
> 
> 时间：2012-06-10T14:55:39.410
> 
> 标签：database, ms-access, talend

我在连接到我的 Access 数据库时遇到问题。我已经选择了数据库，但是当我检查连接时，会出现一条错误消息。错误信息为：[Microsoft][Pilote ODBC Microsoft Access] Ressources système insuffisantes（英文：[ODBC Microsoft Access Driver] Insufficient system resources）。

请给我正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-15T08:35:07.897

此模糊错误消息的一种可能解释是使用混合架构，这似乎是 MS Access 和 Talend 之间熟悉的连接问题。尽量避免混合架构，并为 Office、Java、Talend 和 ODBC 驱动程序使用 32 位或 64 位程序。后者在 Windows 64bit 中有些令人困惑：

*   %WINDIR%\SysWOW64 文件夹中的 odbcad32.exe 适用于 32 位
*   控制面板中的 ODBC 工具适用于 64 位

因此，请确保在正确的位置设置正确的数据源。

还有一件事：确保在创建数据源时选择最新的 MS Access ODBC 驱动程序。如果在 ODBC 工具中添加新的 DS，通常应该会看到两个版本，一个随 Windows (6.0) 提供的旧版本和一个随 Office 安装提供的新版本（Office 2010 为 14.0）。

# python - django 在模型自定义保存中访问上传的文件，最佳实践？

> ID：10969703
> 
> 赞同：4
> 
> 时间：2012-06-10T14:55:52.790
> 
> 标签：python, django, models, filefield, imagefield

我最近一直在尝试使用 django

我希望能够在模型保存功能上通过 imagemagick 运行上传的文件，我意识到这是不可能的，因为在保存实例之前文件不可用

我已经开始工作了，如果在开始时调用保存，然后允许访问上传的文件，然后在填充其他字段后重新保存

有没有更好的方法来实现这一目标？调用保存函数两次感觉有点不对劲

```
class uploadedFiles(models.Model):
orignal_image = models.FileField(upload_to='userimages/')
user = models.ForeignKey(User)
description = models.TextField(blank=True)

def __unicode__(self,force_insert=False, force_update=False):
    return "%s uploaded by %s" % (self.orignal_image.path, self.user) 

def save(self, force_insert=False, force_update=False):
    super(uploadedFiles, self).save()
    s = ''
    cmd = subprocess.Popen(['identify', '-verbose', self.orignal_image.path], stdout=subprocess.PIPE)
    for line in cmd.stdout:
        s += line
    self.description = s
    super(uploadedFiles, self).save() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:44:19.390

如果您使用图像库函数来收集图像元数据，那就更好了。然后你只需要从`FileStorage`图像字段的实例中读取图像数据。只需检查[文件上传](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/)的文档。此外，当使用 Django 时`ImageField`，它会检查上传的文件以查看是否是有效的图像文件，检查代码`ImageField`作为基线以获得有关图像的更多信息。

我会`clean`为模型定义一个方法，这将在调用模型的方法之前被调用`save`。在`clean`中，然后使用 PIL 函数检查图像字段的数据流以获取元数据（或您要为此使用的任何库，只要它接受数据流，**而不是**物理文件），然后填写描述字段与元数据。

使用 Django 的 Storage API 更好，因此您可以从存储在云中的文件（如 Amazon S3）中提取元数据，而不仅仅是存储在本地文件系统中的文件，从而使代码在部署之间更具可移植性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T15:26:21.860

使用 Django 的`pre_save`信号（[docs](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.pre_save)，另请参阅Django 文档中的[Signals](https://docs.djangoproject.com/en/dev/topics/signals/)）：

```
from django.db.models.signals import pre_save
from myapp.models import MyModel

def do_something(sender, **kwargs):
    pass
pre_save.connect(do_something, sender=MyModel) 
```

Django 现在将`do_something`在保存`MyModel`对象之前调用。

# scala - 在 Play 中使用 HAML、Scaml 或 Jade

> ID：10969705
> 
> 赞同：10
> 
> 时间：2012-06-10T14:56:04.107
> 
> 标签：scala, playframework-2.0, haml, pug, scaml

是否可以在 Play 视图中使用 Haml（或类似的诱人语言，如 Scaml 或 Jade）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T14:58:54.313

尝试使用[Scalate 模板引擎](http://www.playframework.org/modules/scalate-0.3/home)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-04T12:28:53.053

好吧，我不确定是否有人对此有任何运气。所以让我分享一下我做了什么。

我正在使用带有 scala 的 play 2.1.1。将 Play (Scala) 与 Jade 集成是一种痛苦。

如果您对 haml 感到满意，Jade 可能是最接近它的。

play 2.* 与jade 的集成并不是很好，尤其是在使用sbt 时。安装 scalate 有点矫枉过正，因为它的重量很重。我使用了一个名为 Jade4J 的 Java 库，它是用 Java 编写的。

[你可以在这里](https://gist.github.com/geetchandratre/5705523)看到我的解决方案.. 非常干净和简单。

有一些像 play2-scalate 这样的插件可能会对您有所帮助，但它们会获得并非真正需要的整个 scalate 库。希望这可以帮助。干杯

# multithreading - Clojure 的平行剂量

> ID：10969708
> 
> 赞同：17
> 
> 时间：2012-06-10T14:56:43.817
> 
> 标签：multithreading, clojure, parallel-processing

我根本没有在 Clojure 中使用过多线程，所以不确定从哪里开始。

我有一个`doseq`身体可以并行运行。我想要的是总是有 3 个线程在运行（留下 1 个核心空闲）并行评估主体，直到范围用完。没有共享状态，没有什么复杂的——相当于 Python 的多处理就可以了。

所以像：

```
(dopar 3 [i (range 100)]
  ; repeated 100 times in 3 parallel threads...
  ...) 
```

我应该从哪里开始寻找？有这个命令吗？标准包装？一个好的参考？

到目前为止，我已经找到`pmap`，并且可以使用它（我如何一次限制为 3 个？[看起来它一次使用 32 个](https://stackoverflow.com/questions/3464584/clojure-parallel-mapping-and-infinite-sequences?rq=1)- 不，消息来源说 2 + 个处理器），但似乎这是一个基本的原语那应该已经存在于某个地方。

*澄清*：我真的很想控制线程数。我有长时间运行的进程并使用大量内存，因此创建大量进程并希望一切正常并不是一个好方法（[使用大量可用内存的示例](https://stackoverflow.com/questions/10799656/fast-way-to-count-how-often-pairs-appear-in-clojure-1-4)）。

*更新*：开始编写执行此操作的宏，我需要一个信号量（或互斥体，或我可以*等待*的原子）。Clojure 中是否存在信号量？或者我应该使用 ThreadPoolExecutor？不得不从 Java 中提取这么多东西似乎很奇怪——我认为 Clojure 中的并行编程应该很容易......也许我在想这个完全错误的方式？嗯。代理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T17:18:41.533

好的，我*想*我想要的是`agent`每个循环都有一个，数据使用`send`. 使用触发的代理`send`从线程池运行，因此数量在某种程度上受到限制（它不能精确控制三个线程，但现在必须这样做）。

[Dave Ray 在评论中解释：要控制池大小，我需要自己编写]

```
(defmacro dopar [seq-expr & body]
  (assert (= 2 (count seq-expr)) "single pair of forms in sequence expression")
  (let [[k v] seq-expr]
    `(apply await
       (for [k# ~v]
         (let [a# (agent k#)]
           (send a# (fn [~k] ~@body))
         a#))))) 
```

可以像这样使用：

```
(deftest test-dump
  (dopar [n (range 7 11)]
    (time (do-dump-single "/tmp/single" "a" n 10000000)))) 
```

耶！作品！我好棒！（好吧，Clojure 也有点摇滚）。 [相关博文](http://www.acooke.org/cute/Clojuremac0.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T03:25:38.560

`pmap`在大多数情况下实际上可以正常工作 - 它为您的机器使用具有合理数量的线程的线程池。我不会费心尝试创建自己的机制来控制线程数，除非您有真正的基准证据表明默认值会导致问题。

话虽如此，如果您真的想限制最多三个线程，一个简单的方法是在范围的 3 个子集上使用 pmap：

```
(defn split-equally [num coll] 
  "Split a collection into a vector of (as close as possible) equally sized parts"
  (loop [num num 
         parts []
         coll coll
         c (count coll)]
    (if (<= num 0)
      parts
      (let [t (quot (+ c num -1) num)]
        (recur (dec num) (conj parts (take t coll)) (drop t coll) (- c t)))))) 

(defmacro dopar [thread-count [sym coll] & body]
 `(doall (pmap 
    (fn [vals#]
      (doseq [~sym vals#]
        ~@body))  
    (split-equally ~thread-count ~coll)))) 
```

请注意使用`doall`，这是强制评估`pmap`（这是惰性的）所必需的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-30T15:34:31.993

现在实际上有一个[图书馆](https://github.com/TheClimateCorporation/claypoole)可以做到这一点。从他们的`github`：

Claypoole 库提供了 Clojure 函数的基于线程池的并行版本，例如`pmap`、`future`和`for`.

它提供相同的有序/无序版本。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-10T19:05:35.753

你为什么不只使用pmap？您仍然无法控制线程池，但它比编写使用代理的自定义宏要少得多（为什么不使用期货？）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-10-30T16:19:14.233

我对以下要求有类似的问题：

1.  控制使用的线程数；
2.  不知道线程池的管理；
3.  **不需要**保持任务的顺序；
4.  任务的处理时间可以不同，因此**不能**保留任务的顺序，而较早完成的任务应该更早返回；
5.  懒惰地评估和提交输入序列；
6.  输入序列中的元素不应被越界读取，而应根据返回的结果进行缓冲和读取，以避免出现内存不足的问题。

核心`pmap`函数只满足最后两个假设。

这是一个满足这些假设的实现，它使用标准 Java 线程池`ExecutorService`以及输入流的一个`CompletionService`和一些分区：

```
(require '[clojure.tools.logging :as log])

(import [java.util.concurrent ExecutorService ExecutorCompletionService 
                              CompletionService Future])

(defn take-seq
  [^CompletionService pool]
  (lazy-seq
   (let [^Future result (.take pool)]
     (cons (.get result)
           (take-seq pool)))))

(defn qmap
  [^ExecutorService pool chunk-size f coll]
  (let [worker (ExecutorCompletionService. pool)]
    (mapcat
     (fn [chunk]
       (let [actual-size (atom 0)]
         (log/debug "Submitting payload for processing")
         (doseq [item chunk]
           (.submit worker #(f item))
           (swap! actual-size inc))
         (log/debug "Outputting completed results for" @actual-size "trades")
         (take @actual-size (take-seq worker))))
     (partition-all chunk-size coll)))) 
```

可以看出`qmap`并没有实例化线程池本身，而只是`ExecutorCompletionService`. 例如，这允许传入一个固定大小`ThreadPoolExecutorService`。此外，由于`qmap`返回一个惰性序列，它不能也不能管理线程池资源本身。最后，`chunk-size`允许限制输入序列的多少元素被实现并作为任务一次提交。

下面的代码演示了正确的用法：

```
(import [java.util.concurrent Executors])

(let [thread-pool (Executors/newFixedThreadPool 3)]
  (try
    (doseq [result (qmap thread-pool
                         ;; submit no more than 500 tasks at once
                         500 
                         long-running-resource-intensive-fn
                         unboundedly-large-lazy-input-coll)]
      (println result))
    (finally
      ;; (.shutdown) only prohibits submitting new tasks,
      ;; (.shutdownNow) will even cancel already submitted tasks.
      (.shutdownNow thread-pool)))) 
```

以下是一些使用的 Java 并发类的文档：

*   [ExecutorCompletionService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)
*   [线程池执行器](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)
*   [链接阻塞队列](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html)
*   [Executors 静态工厂外观](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-19T03:43:16.593

Not sure if it is idiomatic, as I'm still quite a beginner with Clojure, but the following solution works for me and it also looks pretty concise:

```
(let [number-of-threads 3
      await-timeout 1000]
  (doseq [p-items (partition number-of-threads items)]
    (let [agents (map agent p-items)]
      (doseq [a agents] (send-off a process))
      (apply await-for await-timeout agents)
      (map deref agents)))) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-28T11:13:02.433

使用管道和渠道。如果您的操作是 IO 绑定的，这是一个更可取的选项，因为 pmap 的池绑定到 CPU 数量。

另一个不错的选择是使用代理和发送，它在下面使用 cachedThredPoolExecutor。

# jsf-2 - 标记不起作用导致 NoSuchMethodException 异常

> ID：10969710
> 
> 赞同：1
> 
> 时间：2012-06-10T14:57:10.110
> 
> 标签：jsf-2, tags, shiro

你能为我的问题提供一个解决方案吗？

我与 Apache Shiro 集成，一旦我使用 shiro:hasRole 标签或其他标签，就会抛出异常：

```
Caused by: java.lang.NoSuchMethodException: org.apache.shiro.web.tags.HasRoleTag.<init>(javax.faces.view.facelets.TagConfig)
    at java.lang.Class.getConstructor0(Class.java:2706)
    at java.lang.Class.getConstructor(Class.java:1657)
    at com.sun.faces.facelets.tag.AbstractTagLibrary$HandlerFactory.createHandler(AbstractTagLibrary.java:187)
    at com.sun.faces.facelets.tag.AbstractTagLibrary.createTagHandler(AbstractTagLibrary.java:678)
    at com.sun.faces.facelets.tag.CompositeTagLibrary.createTagHandler(CompositeTagLibrary.java:184)
    at com.sun.faces.facelets.compiler.TagUnit.createFaceletHandler(TagUnit.java:120)
    at com.sun.faces.facelets.compiler.TextUnit.createFaceletHandler(TextUnit.java:117)
    at com.sun.faces.facelets.compiler.CompilationUnit.getNextFaceletHandler(CompilationUnit.java:115)
    at com.sun.faces.facelets.compiler.TagUnit.getNextHandler(TagUnit.java:124)
    at com.sun.faces.facelets.tag.AbstractTagLibrary$ComponentConfigWrapper.getNextHandler(AbstractTagLibrary.java:230)
    at javax.faces.view.facelets.TagHandler.<init>(TagHandler.java:116)
    at javax.faces.view.facelets.MetaTagHandler.<init>(MetaTagHandler.java:105)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.<init>(DelegatingMetaTagHandler.java:69)
    at javax.faces.view.facelets.ComponentHandler.<init>(ComponentHandler.java:128)
    at com.sun.faces.facelets.tag.jsf.html.HtmlComponentHandler.<init>(HtmlComponentHandler.java:75)
    at sun.reflect.GeneratedConstructorAccessor19.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.faces.facelets.tag.AbstractTagLibrary$UserComponentHandlerFactory.createHandler(AbstractTagLibrary.java:306)
    at com.sun.faces.facelets.tag.AbstractTagLibrary.createTagHandler(AbstractTagLibrary.java:678)
    at com.sun.faces.facelets.tag.CompositeTagLibrary.createTagHandler(CompositeTagLibrary.java:184)
    at com.sun.faces.facelets.compiler.TagUnit.createFaceletHandler(TagUnit.java:120)
    at com.sun.faces.facelets.compiler.TextUnit.createFaceletHandler(TextUnit.java:117)
    at com.sun.faces.facelets.compiler.CompilationUnit.getNextFaceletHandler(CompilationUnit.java:115)
    at com.sun.faces.facelets.compiler.TagUnit.getNextHandler(TagUnit.java:124)
    at com.sun.faces.facelets.tag.AbstractTagLibrary$ComponentConfigWrapper.getNextHandler(AbstractTagLibrary.java:230)
    at javax.faces.view.facelets.TagHandler.<init>(TagHandler.java:116)
    at javax.faces.view.facelets.MetaTagHandler.<init>(MetaTagHandler.java:105)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.<init>(DelegatingMetaTagHandler.java:69)
    at javax.faces.view.facelets.ComponentHandler.<init>(ComponentHandler.java:128)
    at com.sun.faces.facelets.tag.jsf.html.HtmlComponentHandler.<init>(HtmlComponentHandler.java:75)
    at sun.reflect.GeneratedConstructorAccessor19.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.faces.facelets.tag.AbstractTagLibrary$UserComponentHandlerFactory.createHandler(AbstractTagLibrary.java:306) 
```

请注意，我有一个正确的 shiro 配置，其中应用了 shiro 安全性并保护了资源，其中用户必须经过身份验证和授权才能访问应用程序资源。

但是一旦我尝试涉及 shiro 安全标签，就会看到异常。

我打开了诸如 HasRoleTag 之类的 shiro java 标签，实际上没有构造函数将实例`javax.faces.view.facelets.TagConfig` 作为参数！

你能帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:23:06.507

从 1.2 版开始，Shiro 不附带 JSF 支持。您正在查看的标记是 JSP 标记。Deluan Quintão 为 shiro 编写了一组 JSF facelet 标签。你可以在这里阅读他关于使用它们的帖子：http: [//techbeats.deluan.com/apache-shiro-tags-for-jsffacelets](http://techbeats.deluan.com/apache-shiro-tags-for-jsffacelets)

请注意，他的工作将从 1.3 开始正式并入 Shiro。（确实，已经在后备箱里了）

# c - 多线程文本输出不闪烁

> ID：10969712
> 
> 赞同：0
> 
> 时间：2012-06-10T14:57:30.863
> 
> 标签：c, linux, ncurses

我不得不使用 Linux 终端的 ncurses 库编写一些带有多线程文本的程序。我试着像下面展示的那样做，但效果很差。你有什么想法如何组织好工作吗？

```
#include <panel.h>
#include <pthread.h>

int main()
{
  pthread_t t_out[5];
  for(i=1; i<13; i++)
    pthread_create(&t_out[i],NULL,&text_out,&i);
  pthread_t refr[5];
    pthread_create(&t_out[i],NULL,&refresh_all,NULL);
}

void text_out(void *coord)
{
  int x = *(int *)coord;
  int i;
  for(i=1; i<10; i++)
  {
    move(i,x);
    printw("*");
    sleep(1);
  }
}

void refresh_all()
{
  while(1)
  {
    clear();
    refresh();
    sleep(1);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:13:34.403

好吧，在我看来，您每秒清除屏幕 5 次，难怪它会闪烁。

无论如何，最好在任何地方都使用相同的实践 UI 框架 - 将您的 UI 保持在一个线程中。

# php - 让 CI 会话永远存在？

> ID：10969713
> 
> 赞同：2
> 
> 时间：2012-06-10T14:57:35.467
> 
> 标签：php, codeigniter, session

我正在使用 CodeIgniter 的内置会话，而不是 PHP 会话（阅读更多：[http](http://codeigniter.com/user_guide/libraries/sessions.html) ://codeigniter.com/user_guide/libraries/sessions.html ）。我还将用户的会话保存到我的数据库中的一个表中。我遇到了一个问题，即用户的会话数据将在一段时间不活动后重置为默认值，而我的预期操作是让它永远存在/直到用户注销/清除他们的 cookie。

这是我的 CodeIgniter application/config/config.php 设置：

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 0;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

从理论上讲，我认为由于 sess_expiration 设置为 0，它会一直持续到上面列出的操作之一发生。不幸的是，它看起来像是在大约 30 分钟后才超时？我没有确定这个数字，但关键是它太短了。

我还阅读了有关 CI 和 AJAX 调用如何遇到一系列问题的信息。尽管我的网站使用了很多 AJAX 调用，但即使有人登录一次，不做任何事情，在大约 30 分钟内返回并看到他们已注销，会话也会过期！

编辑：如果有人偶然发现这个主题，仅供参考：我正在努力实现“记住我”功能。这将在用户的浏览器中存储一个 cookie，并在访问网站时对其进行检查。据我所知，这是正确的方法，而不是试图让会话无限期地持续下去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:15:15.850

看看 /system/libraries/Session.php 中的 sess_read() 和 sess_update() 使用 last_activity + sess_expiration < now 检查会话过期时间 可能你需要更改**$sess_expiration的默认值**

```
var $sess_expiration            = 7200; 
```

# c# - C# 从类中的委托方法中获取值 --- 带有 lambda 运算符的引用？

> ID：10969716
> 
> 赞同：1
> 
> 时间：2012-06-10T14:58:13.733
> 
> 标签：c#

我想封装委托方法，稍后会调用。此委托方法在调用时将在该时间实例计算一些参数并将值分配/返回给类外部的变量。

例如，我有一个类 Tool

当调用委托方法时，这个工具应该生成，比如说点......

```
public delegate void Action();

class Tool
{
public Action Select;
public Action Cancel;
public Point position;
public Tool(ref Point outPoint) //Cannot use ref with lambda...
{
Select = () => outPoint = position;
}

public void Update(Point newPosition)
{
position = newPosition
}
public void UpdateKey(Keys k, bool IsPress)
{
//Invoke Select/Cancel when press some keys
}

} 
```

我在这里要完成的是一个简单的函数，它应该接收我的输入并在调用 Select 后用正确的参数填充它。如果这是一个单一的方法，那么使用 ref 很容易完成。但是，我必须跟踪许多论点，所以我必须把它变成一个类。另一件事是，这个调用发生在类内部，所以我不能从类中返回计算值。尽管我可以更改设计以便从类外部更新更新方法，但我希望让类管理自己的更新例程。我知道应该有更好的方法，所以如果有的话，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:11:57.620

如果 Point 是一个结构，则需要一个包含 OutPoint 的类。

```
class OutPointContainer { //Please, think of a better name :)
    public Point OutPoint{ get; set; }
}

class Tool
{
public Action Select;
public Action Cancel;
public Point position;

public Tool(OutPointContainer outPointContainer)
{
    Select = () => outPoint.OutPoint = position;
}

public void Update(Point newPosition)
{
position = newPosition
}
public void UpdateKey(Keys k, bool IsPress)
{
//Invoke Select/Cancel when press some keys
}

} 
```

之后，您总是使用 Point from`OutPointContainer.OutPoint`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:14:18.243

由于 Point 是一个类，您可以随时更改它的值，而不是完整的参考：

```
public Tool(OutPointContainer outPointContainer)
{
    Select = () => outPoint.UpdateWith(position);
} 
```

UpdateWith 方法将执行以下操作：

```
public void UpdateWith(Point other){
    this.X = other.X;
    this.Y = other.Y;
} 
```

# c# - 将自定义绑定添加到 ToolTip

> ID：10969718
> 
> 赞同：2
> 
> 时间：2012-06-10T14:58:29.080
> 
> 标签：c#, wpf, xaml, caliburn.micro, convention

我试图弄清楚 ConventionManager 的工作原理，但我似乎无法弄清楚如何添加约定以允许绑定自定义属性。

我想要实现的是 Caliburn.Micro 将自动将按钮上的 ToolTip 属性绑定到 ViewModel 中名为 [Name]ToolTip 的属性，其中 [Name] 是按钮的名称。

编辑：似乎我在示例中不小心使用了格式括号，哎呀！

# java - 使用 Android 的基于标记的增强现实模型查看器

> ID：10969720
> 
> 赞同：1
> 
> 时间：2012-06-10T14:58:40.993
> 
> 标签：java, android

任何人都知道在 Android 中使用基于标记的增强现实。目前我在 android 2.2 中设置了我所有的相机设置。现在搜索如何使用增强现实。任何人都知道这一点。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:07:48.340

您可以使用[AndAR](http://code.google.com/p/andar/)

您可以浏览存储库中给出的示例代码。

您还可以使用这本书[Pro Android Augmented Reality](http://www.apress.com/9781430239451)。

（为了充分披露，我写了那本书）。

# objective-c - 使用 Restkit 映射到 REST 时如何更改属性值？

> ID：10969722
> 
> 赞同：5
> 
> 时间：2012-06-10T14:58:52.917
> 
> 标签：objective-c, ios, json, mapping, restkit

我有一个核心数据对象和一个 REST Web 界面，它们对同一属性使用不同的值。托管对象具有名为“type”的属性，它是一个整数（枚举），REST 接口有一个名为“type”的字符串值（字符串如：“truck”、“car”、“moped”）。

使用 RKObjectLoaderDelegate 方法获取对象时，我将值从字符串转换为整数`objectLoader:willMapData:`。我希望这就是我应该这样做的方式。

我的问题：放置/发布对象时，如何或在哪里将值从整数（枚举）转换回字符串值？在序列化过程中是否有时刻我可以操纵放置/发布操作的值？我应该对序列化程序或 RKManagedObjectMapping 进行子类化，还是在某个时候调用我的委托以更改属性的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T13:35:06.737

您可以通过为您正在映射的 (NSManagedObject) 类创建一个类别并在该类别中添加将由 Restkit 使用的特殊属性来解决此问题。因此，在将枚举（类型）转换为字符串的类别中添加一个属性 typeString，并将属性“typeString”映射到 json，而不是“type”。接收看起来像这样：

```
[mapping mapKeyPath:@"type" toAttribute:@"typeString"] 
```

并像这样发送：

```
[serializationMapping mapKeyPath:@"typeString" toAttribute:@"type"] 
```

这样你根本不需要使用`objectLoader:willMapData:`，并且转换很好地嵌入到对象（类别）中。

# java - 在运行我的网络项目时获取此目录列表？

> ID：10969726
> 
> 赞同：0
> 
> 时间：2012-06-10T14:59:06.900
> 
> 标签：java

我是 java 的初学者，我正在做一个 java web applicatiom，但是当我在浏览器中访问我的项目时，我得到了“Directory Listing For /”语句。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:48:02.673

I found the solution you need ...

you must know the basics about `Dynamic Web Application`

In Eclipse when you create a new `Dynamic Web Project` and then run the project you will get the directory list

read the reference #1 you will feel happy to read it don`t be afraid i read it

[Apache Tomcat 7 How to Install & Configure](http://www3.ntu.edu.sg/home/ehchua/programming/howto/tomcat_howto.html)

and #2 [How do I specify the Tomcat context configuration for my Web Application?](http://wiki.eclipse.org/WTP_Tomcat_FAQ#How_do_I_specify_the_Tomcat_context_configuration_for_my_Web_Application.3F)

they summerize the reference

[Official reference from Tomcat site you may find it advanced ! so keep it as last resort](http://tomcat.apache.org/)

after reading reference #1 you will understand the solution

i created new dynamic web project named **`test`** the

1- "Change Port Of server" go to **`server.xml`** file in your Servers folder and modify

```
<Connector connectionTimeout="20000" port="9999" protocol="HTTP/1.1" redirectPort="8443"/> 
```

i did not do any thing but to specify the port to `9999` instead of the `default` one note: this step is not a must but some times the default port is used by another program , you do it to make sure.

2- "Assign Context Path Parameter" Now go to **`context.xml`** in Servers folder too and put your **context path**

```
<Context reloadable="true" path="/test"> 
```

All i did in this step is putting path attribute and assign it to test for example but name it as your project name as best practice

3- "Assign relative Url" I created NewFile.jsp in the root of my project and in **`WEB-INF`** folder the file **`web.xml`**

put these lines and remove the existing default ones

```
<display-name>test</display-name>
  <welcome-file-list>    
    <welcome-file>NewFile.jsp</welcome-file>
  </welcome-file-list> 
```

This means the default page when run the project thats what i read, understood and tested

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:01:42.600

您似乎没有可登陆的默认网页。

通常这样的页面被称为`index.html`。尝试将此页面添加到项目的根目录，然后重试。

# php - 一个 HTML 表格中的多个表单

> ID：10969732
> 
> 赞同：3
> 
> 时间：2012-06-10T15:00:08.090
> 
> 标签：php, html, forms, html-table

在一个很长的产品列表中，我正在创建一个表格。每行都应该可以更新。如果我将多个表单放在一个表中，则 HTML 无效。一个解决方案是为每一行创建一个表，但格式会非常难看。

我想做这个：

```
<table>
<tr><form><td><input type=\"text\" name=\"name\" value=\"".$row['name']."\" /></td>\n";
</td><td></td>....<td><input type=\"submit\" name=\"Submit_btn\" id=\"Submit_btn\" value=\"Update\"></td></tr></form>
<tr><form><td></td><td></td>....<td><input type=\"submit\" name=\"Submit_btn\" id=\"Submit_btn\" value=\"Update\"></td></tr></form>
.
.
.
</table> 
```

这是无效的。我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:44:19.433

If you want to do this cross browser, without using javascript:

Use a differently named submit button for each row, where the name contains id info. Like

```
<input type="submit" name="id[589] value="update this row"> 
```

So long as the user either clicks that submit button, or tabs to the button tpo give it focus, and then presses enter, the browser will reliably send the name of that submit button(and only that submit button), and then you can get the id via

```
$id = key($_POST['id']); 
```

But, the problem is if the user submits the form via the enter key, when the form focus is on a different type of input element, like a `type=text` for example. The form will submit, but different browsers will either

1) send no name of any submit button at all,

2) or they will send the name of the first submit button to appear in the form's html source.

If you place a dummy submit button at the start of the form, and hide w/ css, then you can reliably detect this type of form submission via

```
isset($_POST['dummySubmit']); 
```

You cannot perform the update, but you can output all the posted values back to the user(so that their work isn't lost), along with a message telling them they need to explicitly click a submit button, and let them try again.

Or... you could just forgo using individual buttons, and update every record, every time, which probably isn't as bad as you think. I don't think there's generally much benefit to try to filter out what records have changed in some attempt to reduce sql queries. But if you really wanted to, maybe send an md5 hash of the row data concatenated together, and then recomput the hash upon submit and compare.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T15:03:15.367

在整个表格周围使用一个表格。

过滤掉不需要的数据到达服务器后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:10:14.550

使用 id 指定行。还将更改行的 id 发送到服务器以进行过滤。

# java - 基于哈希创建一个统一的随机数

> ID：10969733
> 
> 赞同：4
> 
> 时间：2012-06-10T15:00:27.080
> 
> 标签：java, random, apache-commons-math

我需要一个好的伪随机数，它基于一个由字符串和一个 long 组成的密钥。当我使用相同的密钥进行查询时，我应该得到相同的随机数，而且，如果我使用稍微不同的密钥进行查询，我应该得到一个非常不同的数字，即使说密钥中的 long 为 1。我试过这段代码并且随机数是唯一的，但对于相似的数字，它们似乎是相关的。

```
import java.util.Date;
import java.util.Random;
import org.apache.commons.lang3.builder.HashCodeBuilder;

public class HashKeyTest {
    long time;
    String str;
    public HashKeyTest(String str, long time) {
        this.time = time;
        this.str = str;
    }

    @Override
    public int hashCode() {
        return new HashCodeBuilder().append(time).append(str).toHashCode();
    }

    public static void main(String[] args) throws Exception {
        for(int i=0; i<10; i++){
            long time = new Date().getTime();
            HashKeyTest hk = new HashKeyTest("SPY", time);
            long hashCode = (long)hk.hashCode();
            Random rGen = new Random(hashCode);
            System.out.format("%d:%d:%10.12f\n", time, hashCode, rGen.nextDouble());
            Thread.sleep(1);
        }
    }
} 
```

我拼凑的解决方案。这工作得很好，但我想知道它是否需要这么冗长。

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.nio.ByteBuffer;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.Random;

public class HashKeyTest implements Serializable{

    long time;
    String str;

    public HashKeyTest(String str, long time) {
        this.time = time;
        this.str = str;
    }

    public double random() throws IOException, NoSuchAlgorithmException {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ObjectOutputStream out = new ObjectOutputStream(bos);
        out.writeObject(this);
        byte[] bytes = bos.toByteArray();
        MessageDigest md5Digest = MessageDigest.getInstance("MD5");
        byte[] hash = md5Digest.digest(bytes);
        ByteBuffer bb = ByteBuffer.wrap(hash);
        long seed = bb.getLong();

        return new Random(seed).nextDouble();
    }

    public static void main(String[] args) throws Exception {
        long time = 0;
        for (int i = 0; i < 10; i++) {
            time += 250L;
            HashKeyTest hk = new HashKeyTest("SPY", time);
            System.out.format("%d:%10.12f\n", time, hk.random());
            Thread.sleep(1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:44:50.187

我只会使用密钥的散列本身作为“随机”数字。假设一个合理的哈希实现，它将具有您提到的所有属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T15:46:11.707

这是一个有点令人惊讶的结果。我会认为种子的微小差异会导致随机数流的巨大差异。回想起来，我不知道为什么我会这么想。

不过，它很容易修复！

也许最简单的事情就是让随机数生成器在使用之前先预热一下。不同种子产生的比特流开始时相似，但分歧很快，因此只需丢弃比特流的早期部分就可以了。在创建 的行之后，立即`Random`添加：

```
rGen.nextLong(); 
```

或者，为了更多的分歧：

```
for (int j = 0; j < 10; ++j) rGen.nextLong(); 
```

一个快速测试表明，这会得到更多种类的数字。

另一种选择是使用 a`java.security.SecureRandom`作为随机数生成器。这可以更好地从相似的输入生成不同的输出。你用一个字节数组播种它；您可以通过说类似`(str + time).getBytes()`.

另一种选择是获取您的种子，然后使用加密散列（如 SHA-256）对其进行散列，然后使用其中的一部分作为种子。散列将采用非常相似的输入并产生非常不同的输出，然后会为您提供适当不同的随机比特流。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T15:58:19.767

您说“当我使用相同的密钥进行查询时，我应该得到相同的随机数，而且，如果我使用稍微不同的密钥进行查询，我应该得到一个非常不同的数字”。如果我正确理解您的问题，您不想要一个随机数，而是想要一个加密哈希码之类的东西。

您应该考虑通过 SHA 或 MD5 等哈希函数传递您拥有的任何数据。这会给你一些看似随机的输入，但在相同的输入下总是相同的，即使你的输入变化很小，也会有很大的不同。

编辑：要始终如一地获得双值，请尝试这样的事情（伪代码）：

```
SHAHashValue v = ComputeSHA( yourObject);
Random r = new Random(v);
the_random_value = r.getNext(); 
```

这里的想法是使用 SHA 哈希值作为种子来初始化随机生成器。这几乎就是你所拥有的，但我不知道你的 HashBuilder 会根据不同的值产生什么。因此，改用 SHA 哈希可能会改善这种情况。

您还应该考虑到 0 和 1 之间的双精度值的“非常不同”的值可能不会立即显现出来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T15:32:41.603

我的理解是：

*   您的对象有两个实例变量 - 一个 long`time`和一个字符串`str`，需要考虑计算随机数
*   您希望随机数对`time`零件非常敏感。
*   相同的`time`+`str`组合应该产生相同的随机数。
*   如果两个不同的`time`+`str`组合产生相同的随机数是可以的。

从您发布的代码来看，它似乎`HashCodeBuilder()`并不像您希望的那样敏感`time`。

除了其他人的建议之外，一个想法可能`time`是以一致的方式改变自身。

您可以取`time`（`long`键的部分）的最后一位数字并将其移动到数字中间的某个位置。例如，您`hashCode()`可以：

```
@Override
public int hashCode() {
    return (new org.apache.commons.lang.builder.HashCodeBuilder()
            .append(time+((time%10)*100000000)).append(str).toHashCode());
} 
```

（代码并没有完全将最后一位数字移到中间，而是在问题的上下文中做类似的事情）

但这会有点慢。因此，您可以将其转换为位运算符。

```
@Override
public int hashCode() {
    return (new org.apache.commons.lang.builder.HashCodeBuilder()
            .append(time+((time & 63l) << 57)).append(str).toHashCode());
} 
```

有点像提取时间的最后 6 位（`time & 63l`）并将这些位放在前面（`57`有点随机。我只是想将这些位移动到更重要的位置）。这与“将数字移动到中间某处”的类比不完全匹配，但在概念上类似于。

如果仅提取最后 5 位 ( `time & 31l`)，您将获得更多差异。您可以尝试不同的值。对于问题中发布的代码，`time & 63l`版本返回以下输出：

```
1339343005559:-1084202043:0.339762681480
1339343005585:1801482883:0.323979029483
1339343005586:559968862:0.786162684846
1339343005587:-681545159:0.241820545267
1339343005588:-580881900:0.692788956755
1339343005590:1231057354:0.624686671170
1339343005591:-10456667:0.530394885899
1339343005592:1700819920:0.894868466104
1339343005593:459305899:0.149584882259
1339343005595:-2023722143:0.289584988289 
```

`long`正如预期的那样，对于密钥部分的微小变化，它显示出更大的差异。

# haskell - 在哪里将“始终运行”线程添加到 Yesod 应用程序

> ID：10969734
> 
> 赞同：2
> 
> 时间：2012-06-10T15:00:30.617
> 
> 标签：haskell, yesod, haskell-wai

我正在编写一个 Yesod 应用程序，但它还需要分叉几个非 Web 服务。（UDP监听器、TCP监听端口等）

拼接叉子的正确位置在哪里，这样可以无缝地工作，无论我的应用程序是在“yesod devel”中运行还是部署用于生产。

PS我真的只想添加一个伪Main，它将由任何一个通过WAI运行应用程序的网络服务器分叉（在服务启动时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:09:51.887

你应该把它放在`makeApplication`脚手架`Application.hs`文件的函数中。

此函数将为您启动的 Web 应用程序的每个实例运行一次¹，并且由于您几乎总是只运行应用程序的一个实例，因此您应该在此处执行此操作。

¹请注意，理论上可以在同一个进程中运行同一个 WAI 应用程序的多个实例，例如，如果您希望两个实例监听不同的端口，但默认情况下这永远不会发生

# mysql - mysql join 两个表选择并记录问题

> ID：10969737
> 
> 赞同：0
> 
> 时间：2012-06-10T15:00:41.050
> 
> 标签：mysql, pdo

我想在我的网页上显示以下信息：
日期 - 个人费用（业务费用）
06-June-2012 - usd555.00 (usd3022.00)
05-June-2012 - usd666.00 (usd0.00)
04-June -2012 - usd0.00 (usd444.40)
04-June-2012 - usd333.00 (usd2333.40)

目前我的代码是：

```
$sql = "SELECT payment_date, sum(price) FROM expense WHERE category=? spender_id=? GROUP BY payment_date";
    $q = $conn->prepare($sql);
    $result = $q->execute(array("Personal", $user_id));
    while($r = $q->fetch(PDO::FETCH_ASSOC)){
        $payment_date_db = $r['payment_date'];
        $payment_date_db2 = date("d-F-Y", strtotime($payment_date_db));
        $price_db = $r['sum(price)'];

        echo $payment_date_db2 . " - " . $money_currency . $price_db . "<br />";
    } 
```

我不知道如何选择和显示业务费用记录并将其显示到总括符号（）中。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:50:17.537

您确实应该提供有关表架构的更多详细信息，但我想我可以从您的查询中推断出它是这样的：

费用（payment_id [PK]，spender_id [FK]，类别 [FK??]，价格，payment_date）

其中类别字段包含“个人”或“费用”。

因此，如果您想获取特定消费者在每个日期的个人和业务费用的总和，请尝试以下查询：

```
SELECT 
    payment_date,
    SUM(IF(category = 'Personal', price, 0)) AS personal_expense_total,
    SUM(IF(category = 'Business', price, 0)) AS business_expense_total
FROM 
    expense
WHERE 
    spender_id = ?
GROUP BY 
    payment_date 
```

所以在你的 PHP 代码中，你可以这样做：

```
$sql = '
    SELECT
        payment_date,
        SUM(IF(category = "Personal", price, 0)) AS personal_expense_total,
        SUM(IF(category = "Business", price, 0)) AS business_expense_total
    FROM expense
    WHERE spender_id = :spender_id
    GROUP BY payment_date';
$stmt = $conn->prepare($sql);
$stmt->bindParam(':spender_id', $user_id, PDO::PARAM_INT); // Assuming $user_id contains an integer
$stmt->execute();

while($r = $stmt->fetch(PDO::FETCH_ASSOC))
{
    $date = date('d-F-Y', strtotime($r['payment_date']));
    $personal = 'usd' . number_format($r['personal_expense_total'], 2);
    $business = 'usd' . number_format($r['business_expense_total'], 2);

    echo "$date - $personal - ($business)<br />";
} 
```

# objective-c - 如何将视图控制器添加到我的导航控制器？

> ID：10969739
> 
> 赞同：4
> 
> 时间：2012-06-10T15:00:43.333
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller

我正在开发一个应用程序，我`UINavigationController`在`AppDelegate`. 在启动时，我用`UIViewController`.

```
 self.navigationController = [[UINavigationController alloc] initWithRootViewController:viewController];
[self.navigationController setNavigationBarHidden:YES];

[window addSubview:self.navigationController.view]; like this. 
```

但是，我想将 other 添加`UIViewControllers`到，但我知道每次我想使用 other 时`UINavigatioNController`重新初始化不是一个好习惯。请你能告诉我这样做的正常方法吗？`UINavigationController``UIViewControllers`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T15:56:23.527

如果你确切地知道你想要你的视图控制器堆栈是什么，那么你可以直接设置它们。

例如，假设我希望导航控制器上的视图以 OverView > TableView > NewItemView 开始。我希望人们在启动应用程序后立即创建他们的第一个条目。在我的导航控制器中，我只需要在`-application:didFinishLaunchingWithOptions:`.

```
NSArray *stack = [NSArray arrayWithObjects:overViewController, tableViewController, newItemViewController, nil];
navController.viewControllers = stack; 
```

请注意，这会完全删除旧堆栈。导航视图控制器中的任何视图控制器都将丢失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T15:04:50.447

一个 UINavigationController 只需要一个 UIViewController。

要使用其他 UIViewController，必须通过以下方法从 rootViewController 推送它们：

```
- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

# iphone - 视网膜设备上的cocos2d CCMenu填充奇怪

> ID：10969741
> 
> 赞同：0
> 
> 时间：2012-06-10T15:01:02.363
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, retina-display

**情况：** 我正在使用 [(CCMenu*)myMenu alignItemsVerticallyWithPadding:4.0f] 垂直布局几个按钮 (CCMenuItemSprite)。在非视网膜设备上，填充按预期显示，但在模拟器上的视网膜模式下，填充似乎加倍。关于为什么的任何想法？

**代码：**

```
CCMenuItemSprite *itemPlay = [CCMenuItemSprite itemFromNormalSprite:[CCSprite spriteWithSpriteFrameName:@"play.png"] selectedSprite:nil target:self selector:@selector(goPlay:)];

CCMenuItemSprite *itemHowto = [CCMenuItemSprite itemFromNormalSprite:[CCSprite spriteWithSpriteFrameName:@"howto.png"] selectedSprite:nil target:self selector:@selector(goHowto:)];

CCMenuItemSprite *itemSettings = [CCMenuItemSprite itemFromNormalSprite:[CCSprite spriteWithSpriteFrameName:@"settings.png"] selectedSprite:nil target:self selector:@selector(goSettings:)];

CCMenuItemSprite *itemHelp = [CCMenuItemSprite itemFromNormalSprite:[CCSprite spriteWithSpriteFrameName:@"help.png"] selectedSprite:nil target:self selector:@selector(goHelp:)];

CCMenu *myMenu = [CCMenu menuWithItems:itemPlay,itemHowto,itemSettings,itemHelp, nil];
myMenu.position = ccp(160.0f,216.0f);
[myMenu alignItemsVerticallyWithPadding:4.0f];
[self addChild: myMenu z:10]; 
```

**更新：** 我不想做这样的事情，但如果没有更好的解决方案我会这样做：

```
float padding = 4.0f;
// flag stored in app delegate to know whether we are retina
if([[AppDelegate sharedAppDelegate] isRetina])padding = (2.0f);
CCMenu *myMenu = [CCMenu menuWithItems:itemPlay,itemHowto,itemSettings,itemHelp, nil];
myMenu.position = ccp(160.0f,216.0f);
[myMenu alignItemsVerticallyWithPadding:padding];
[self addChild: myMenu z:10]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:12:41.043

**已解决：**
填充问题是由 TexturePacker 中的设置造成的。我将“内部填充”设置为 4px。删除设置解决了问题。请看下面的截图：

![在此处输入图像描述](../Images/2ca8f948bfc3b8d5ccb18facd6f3fc6d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:23:23.087

我对 cocos2d 没有太多经验，但你可以试试这个：

```
[myMenu alignItemsVerticallyWithPadding:(4.0f/[[UIScreen mainScreen] scale])]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:29:43.480

你有视网膜资产吗？cocos2d 不会自动扩大您的资产，所以它是您的 CCSprite 的一半大小，因此填充似乎加倍。

# asp.net-mvc-3 - MVC ActionResult 强制 JQuery Mobile 刷新页面？

> ID：10969745
> 
> 赞同：1
> 
> 时间：2012-06-10T15:01:54.953
> 
> 标签：asp.net-mvc-3, jquery-mobile, actionresult

我有一个使用 jQuery Mobile 的 MVC3 项目，我有一个小问题，当我将操作结果返回到视图时，jQuery Mobile 没有重新加载页面，因此没有加载其中的`<script>`标签`<head>`？

在 jQuery Mobile 中重定向到另一个页面时我遇到了同样的问题，可以通过添加`rel="external"`到 a 标签来解决这个问题。

无论如何我可以强制页面在操作结果中重新加载吗？

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:12:29.483

您可以手动更改页面并在`options`对象中设置此标志：

> **reloadPage** ( *boolean* , default: false) 强制重新加载页面，即使它已经在页面容器的 DOM 中。仅当 changePage() 的 'to' 参数是 URL 时使用。

*来源：http: [//jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)*

例子：

```
<a data-role="button" href="/do-something.aspx">Click ME</a>
<script>
//bind to link elements for the click event
$('a').on('click', function () {
    //manually change page to the clicked HREF
    $.mobile.changePage(this.href, {
        //set the reloadPage flag to true so jQuery Mobile will update the page
        reloadPage : true
    });
    //stop the default behavior of the link
    return false;
});
</script> 
```

默认情况下，jQuery Mobile 首先查看当前 DOM 以查看所请求页面的版本是否存在，如果存在，则 jQuery Mobile 只是导航到该页面而不加载任何更多外部资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:32:43.273

在你的行动结果中试试这个..

```
window.location = 'your full path'; 
```

# android - 显示对话框片段

> ID：10969746
> 
> 赞同：0
> 
> 时间：2012-06-10T15:02:05.513
> 
> 标签：android, android-dialogfragment

我有一个扩展 android.support.v4.app.DialogFragment 的类 ActivityExitDialogFragment。ActivityExitDialogFragment 中只有 2 个方法，onCreateDialog 和 newInstance 来获取 ActivityExitDialogFragment 的新实例。他们来了：

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
    String title = getArguments().getString("title");
Dialog myDialog = new AlertDialog.Builder(getActivity())
.setIcon(R.drawable.ic_launcher)
.setTitle(title)
.setNegativeButton("No", new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // Dismiss the dialog.
        dismiss();
    }
    })
.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // Close the Activity.
        getActivity().finish();
    }
}).create();

return myDialog;
}

static ActivityExitDialogFragment newInstance(String message) {
ActivityExitDialogFragment dialog = new ActivityExitDialogFragment();
Bundle args = new Bundle();
args.putString("title", message);
dialog.setArguments(args);
return dialog;
} 
```

这是用于显示对话框的方法。它在同一个包中的不同活动中。当用户单击退出按钮时调用它：

```
public void cancelButton(View v) {
    ActivityExitDialogFragment dialog =                        
    ActivityExitDialogFragment.newInstance(exitMessage);

    dialog.show(new FragmentActivity().getSupportFragmentManager(),               
    "Exiting");
} 
```

每当我单击退出按钮时，我都会在 dialog.show 行收到 IllegalStateException。我之前遇到过这个问题，这是因为我的项目的 libs 文件夹中没有 android-support-v4.jar 文件。我把那个 jar 文件放在 libs 文件夹中，它工作了。我将类的名称从其他名称更改为 ActivityExitDialogFragment 并让 eclipse 更改 java 文件的名称以匹配。从那以后，我又遇到了这个例外。我不知道是否是巧合，我在更改名称后再次遇到异常，或者 eclipse 是否做了其他事情，只是更改了 jar 文件的名称以匹配公共类的名称。我尝试更改 getInstance 方法的访问修饰符，删除并添加 android 支持 jar 文件的新副本，将名称改回旧名称，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:58:14.157

您不应该尝试使用 new 直接实例化 Activity。而是直接从您拥有的活动中获取片段管理器：

```
dialog.show(getSupportFragmentManager(),               
"Exiting"); 
```

# c# - Internet 和服务器连接和通信

> ID：10969748
> 
> 赞同：0
> 
> 时间：2012-06-10T15:02:16.390
> 
> 标签：c#, security

我正在使用 C# 开发基于 .NET 的应用程序。我已经在网上搜索了数周和数月而没有运气，我找不到示例或解决方案或推荐的方法。

我想做的是：

制作一个连接到服务器（通过 Internet）并从数据库下载信息的应用程序，例如： 连接到服务器并下载病毒签名文件的防病毒软件。

如何实现与 Web 服务器的稳定安全连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:14:41.890

您可以使用 WebClient 类从网站下载文件：http: [//msdn.microsoft.com/en-us/library/ez801hhe.aspx](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:20:45.053

当两方之间需要通信并且选择的技术是 .NET 时，WCF 在许多情况下是一个很好的答案。

下面的示例描述了如何下载文件。 [http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)

它从中加载数据，`Stream`因此可以很容易地适应从数据库中获取数据。

使用 WCF，您可以推迟安全和传输决策。您可以`basicHttpBinding`通过更新配置文件来实现并确保一切都按预期工作并切换到 TCP 和安全通道。

发现什么文件对你有好处的逻辑应该作为单独的方法来实现。同样，您可以为您的业务功能使用 SOAP 或 REST/Web 绑定，并为文件下载使用 TCP 或 P2P。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T15:09:41.013

我可以建议您，
第一次使用 Web 服务，将数据作为蒸汽提供给您的应用程序
第二次使用远程数据库，并像您在使用它时那样存储它`localhost`

# java - 如何更新 ArrayList 中包含的对象的属性？

> ID：10969749
> 
> 赞同：0
> 
> 时间：2012-06-10T15:02:28.113
> 
> 标签：java, arraylist

我有以下课程：

```
class A {
    String s;
    Double d;
    A a;
}

class B {
    String s;
    Double d;
} 
```

以及以下 ArrayList：

```
List<A> A_list = new ArrayList<A>(); // List of A class object
List<B> B_list = new ArrayList<B>(); // List of B class object 
```

我需要做的就是：

```
iterate through A_list
    iterate through B_list 
        if A_list.get(i).s is equal to B_list.get(j).s
        // just update this A_list.get(i).d value without changing other properties
        then A_list.get(i).d = A_list.get(i).d + B_list.get(j).d; 
```

有人可以建议我（如果可能的话，使用一些示例代码）如何在不更改其他属性的情况下更新对象数组列表中的特定对象属性？

我在java方面没有那么多经验。所以，如果我犯了任何错误，请原谅我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:16:28.513

我希望这可能对你有所帮助。

```
 for (A arr : A_list){

       for (B brr : B_list){

           if ((arr.s).equals(brr.s)){

                  arr.d = arr.d + brr.d;

      }

 }

} 
```

# php - 通过网络上传可恢复的大文件 (2+Gb)

> ID：10969751
> 
> 赞同：2
> 
> 时间：2012-06-10T15:02:31.783
> 
> 标签：php, perl, file-upload, upload, resume

我想实现大文件上传，有**很多解决方案**（jquery、php、flash、java、js/jquery、node.js 等），我很快就迷路了/找不到符合我要求的东西。

基本上我需要这个：

1.  我必须能够处理 2GB 以上的大文件

2.  如果连接暂时中断，我必须能够暂停/恢复上传

3.  进度指示器

4.  良好的跨浏览器支持

5.  易于安装/更新/维护/使用

6.  多/并发上传支持

7.  我不需要编码、解压缩等...我只需要上传功能

8.  我对技术持开放态度（另见下一点），只要我可以在 EC2 linux 实例（标准 amazon linux 发行版）上运行它

9.  我知道我正在排除一项重要技术，但我想避免 java 小程序，因为我所针对的市场中 java 运行时的安装率很低

值得一提的库包括[Plupload](http://www.plupload.com/)和[名为 formidable 的 node.js 库](https://github.com/felixge/node-formidable)，这似乎（几乎？）满足了我的需要。Plupload 具有我需要的所有功能，除了 2GB+ 文件似乎有问题

谢谢！

PS。我非常绝望，即使是**商业组件也可以**！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:05:36.430

我们在[swfupload](http://code.google.com/p/swfupload/)方面取得了巨大的成功，这里有一个[演示](http://demo.swfupload.org/v220/index.htm)。我们的客户上传高清视频文件，这个组件很容易进入并运行我们的定制。

# android - Android - 找不到命令

> ID：10969753
> 
> 赞同：49
> 
> 时间：2012-06-10T15:02:41.300
> 
> 标签：android, linux, classpath

我正在尝试在 ubuntu 中运行命令

> android 更新项目 --path 。

但是我得到了一个`android:command not found error.`

我认为这与我前几天在这里学到的路径有关？我只是想知道，我需要添加什么变量（我假设是 Android）以及我还需要指出什么。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-03-13T10:04:01.103

在 MacOS/Linux 上，将安装 SDK 的路径定义为`ANDROID_HOME`：

**苹果系统**

```
$ export ANDROID_HOME=/Applications/android-sdk-macosx 
```

如果您安装了[Android Studio](http://developer.android.com/sdk/index.html)，则该值需要为

```
export ANDROID_HOME=$HOME/Library/Android/sdk 
```

**Linux**

```
$ export ANDROID_HOME=~/android-sdk-linux 
```

然后将路径添加到`platform-tools`和`tools`子目录（在 MacOS/Linux 上相同）。

```
export PATH=$ANDROID_HOME/tools:$PATH
export PATH=$ANDROID_HOME/platform-tools:$PATH 
```

您现在应该能够`android`从 shell 运行。

如果上述建议的 ANDROID_HOME 路径均无效，您可以通过以下方式找到（唯一且一致命名的）平台工具文件夹：

```
find / -name platform-tools 2>/dev/null 
```

无论返回的路径都需要修剪到以`sdk`,`android-sdk-linux`或结尾`android-sdk-macosx`。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-08T17:08:16.997

另一种可能性只是您的“android”文件不可执行。导航到终端中的工具路径，然后通过以下方式使其可执行：
`chmod 777 android`
然后您可以运行：
`./android sdk`
这对我有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-10T15:05:39.490

假设您已设置`ANDROID_HOME`为指向 sdk 安装，您应该将`$ANDROID_HOME/tools`和添加`$ANDROID_HOME/platform-tools`到您的`PATH`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-22T06:11:53.593

有时，即使您`android_sdk/`从命令行添加了 dir 路径，它仍然无法正常工作并给出`command not found error`，在这种情况下，请按照以下步骤操作。我自己遇到了这个问题，我尝试了上述所有步骤，但都没有奏效，所以我想我应该分享一下，也许这可能会对某人有所帮助。
（**android-sdk-linux 是您提取的 android sdk 库的名称**）。

1) 从命令行打开 bashrc 文件

```
gedit ~/.bashrc 
```

2）在顶部添加以下行。

```
export PATH=${PATH}:~/android-sdk-linux/tools
export PATH=${PATH}:~/android-sdk-linux/platform-tools 
```

3 ）退出系统并重新登录。键入`Ctrl`++打开命令行并键入**android**启动软件。`Alt``T`

 *** * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-27T10:06:34.160

安装[Android Studio](https://developer.android.com/studio/install.html)后。创建或编辑您的 ~/.bashrc 文件并添加以下行：

```
export ANDROID_HOME=~/Android/Sdk
export PATH=${PATH}:${ANDROID_HOME}/tools 
```

并重新加载 .bashrc

```
source ~/.bashrc 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-10T15:05:15.430

那是因为你的`platforms`and`platform-tools`不在`PATH`环境变量中。您可以运行`adb`命令 with`path-to-adb/adb`或 add `platforms`and `platform-tools`to `PATH`并运行仅键入`adb`

这是我的路径环境变量：

```
PATH=/usr/local/bin:/usr/bin:/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/4.5.3:/opt/android-sdk-update-manager/tools:/opt/android-sdk-update-manager/platform-tools 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-29T01:15:43.047

对于 Mac，键入 进入您的主目录`cd ~`，然后键入`vi .bash_profile`，此文件可能为空或刚刚创建，这不是问题。

要编辑文件，请按`i`键盘并在文件内键入以下路径：

```
export PATH="/Users/YOUR-USERNAME-HERE/Library/Android/sdk/platform-tools":$PATH
export PATH="/Users/YOUR-USERNAME-HERE/Library/Android/sdk/tools":$PATH 
```

完成后，按`esc`，然后再次按`shift :`并键入`wq`。好的，现在您保存了文件。现在，退出终端并重新启动，然后尝试输入：

```
adb -h
android -h 
```

如果两个命令都给你输出，这意味着一切正常。

不是：我们使用`vi`命令来编辑文件。如果您对这个命令感到困惑，您也可以尝试`nano`编辑文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-28T14:38:06.527

android 现在在 android-sdks/tools

如果你使用的是 mac，你可以设置你的 .bash_profile 来包含它。

```
PATH=$PATH:[android-sdks]/platform-tools:[android-sdks]/tools 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-27T21:21:40.297

1.  卸载木桶 android-platform-tools

    ```
    brew cask uninstall android-platform-tools 
    ```

2.  使用 Android Studio 安装它**

# delphi - 如何使用 Delphi 从 IE 接收事件？

> ID：10969754
> 
> 赞同：3
> 
> 时间：2012-06-10T15:03:00.683
> 
> 标签：delphi

我需要从每个浏览器窗口评估文档并采取相应措施。我正在使用 shellwindows 来获取 IwebBrowser2。然后我可以访问我需要的所有文档属性。IE...

ShellWindows := TshellWindows.Create(nil);

...

ShellWindowDisp := ShellWindows.Item(Count); //for循环

...

ShellWindowDisp.QueryInterface(iWebBrowser2, WebBrowser);

ETC....

据我所知，这种方法效果很好。但是，如果其中一个文档发生更改，我的代码将永远不会知道。所以我需要监视资源管理器中的事件，例如 OnDocumentComplete。将上面的代码转储到计时器中并比较属性显然不是要走的路。我发现了几个捕获事件的组件，但不想为此依赖第三方组件。由于我在这方面的知识有限，我需要了解发生了什么。那里有任何好的文章来解释如何解决这个问题，最好是使用简单的源代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T17:35:33.710

为了访问 WebBrowser 实例的事件，必须先[`IConnectionPointContainer`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683857%28v=vs.85%29.aspx)使用接口的 QueryInterface 方法获取接口的指针[`IWebBrowser2`](http://msdn.microsoft.com/en-us/library/aa752127%28v=vs.85%29.aspx)，然后调用 FindConnectionPoint 方法传递[DWebBrowserEvents2](http://msdn.microsoft.com/en-us/library/aa768283%28v=vs.85%29.aspx)接口的 GUID，最后调用接口的 Advise 方法[`IConnectionPoint`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694318%28v=vs.85%29.aspx)开始接收事件。

像这样的东西

```
var
 LConnectionPointContainer : IConnectionPointContainer;
 LConnectionPoint : IConnectionPoint;
 dwCookie: Longint;
begin
  //LWebBrowser2 is a IWebBrowser2 object
  LWebBrowser2.QueryInterface(IConnectionPointContainer, LConnectionPointContainer);
  LConnectionPointContainer.FindConnectionPoint(DWebBrowserEvents2, LConnectionPoint);
  LConnectionPoint.Advise(Self, dwCookie);
end; 
```

所有这些代码都必须在从 IDispatch 派生的类中实现，以便在 Invoke 方法中接收事件。在您的情况下，您需要拦截[DocumentComplete](http://msdn.microsoft.com/en-us/library/aa768282%28v=vs.85%29.aspx)事件，您必须在*DispID*参数的值为 259 时进行检查。

如果您想要此解释的示例，请尝试检查此代码[`intercept Internet Explorer messages.`](http://www.swissdelphicenter.ch/torry/showcode.php?id=2058)

# iphone - 浮点数问题

> ID：10969755
> 
> 赞同：0
> 
> 时间：2012-06-10T15:03:08.460
> 
> 标签：iphone, objective-c, ios, cocoa-touch

全部，

我有一个浮点数问题需要帮助。我刚开始使用 Objective-C，这似乎是一个非常简单的解决方案，但我在搜索后不知所措。简而言之，我将来自四个 TextField 的数字输入添加在一起，并在 UILabel 中显示答案。我的答案是正确的十进制格式，但只显示 0.00 而不是正确的总和。我确定它与字符串和浮点数之间的转换有关，但我需要一些帮助：

```
- (IBAction)Calc1:(id)sender {

    int result = [oranges.text doubleValue] + 
                    [bananas.text doubleValue] +
                        [grapes.text doubleValue] +
                            [pears.text doubleValue];

    text123.text = [NSString stringWithFormat:@"%.1f", result];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:14:03.810

您可能希望将结果声明为双精度...

```
double result = .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:17:30.670

您使用`int`类型来存储`double`类型，那么准确性就会丢失。

您应该将结果变量设置为`double`类型。

# c# - Databinder Eval value.value 将不起作用

> ID：10969758
> 
> 赞同：1
> 
> 时间：2012-06-10T15:03:16.983
> 
> 标签：c#, sql, databinder

我正在使用 C# Visual Studio 在 ASP.NET 中测试数据绑定。但是我有一个恼人的问题......为了显示数据库中的所有产品，我使用了带有数据源查询的转发器。查询是：

> SELECT title, prijs, Product.artikelnummer, bestandnaam FROM Product INNER JOIN (Foto INNER JOIN Productfoto ON Foto.[foto_id] = Productfoto.[foto_id]) ON Product.[artikelnummer] = Productfoto.[artikelnummer] ORDER BY title;

因为 artikelnummer 存在于多个表中，所以我必须在它前面写上表名。但是当我将数据加载到转发器中时，单个名称可以工作，例如：

> DataBinder.Eval(Container.DataItem, "bestandnaam")

但是当我使用“ **artikelnummer”**时：

> DataBinder.Eval(Container.DataItem, "Product.artikelnummer")

我收到一个错误：*DataBinding：“System.Data.Common.DataRecordInternal”不包含名为“Product”的属性。*

我怎么能读到artikelnummer？这对我很重要，因为 product_detailview 将从文章编号加载他的数据（荷兰语中的 artikelnummer）

任何人？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:14:46.800

如果您的 SQL 输出（选择部分）中有多个相同的名称，请使用别名来分隔它们：

```
SELECT titel, prijs, Product.artikelnummer as Productartikelnummer, bestandnaam FROM Product INNER JOIN (Foto INNER JOIN Productfoto ON Foto.[foto_id] = Productfoto.[foto_id]) ON Product.[artikelnummer] = Productfoto.[artikelnummer] ORDER BY titel; 
```

但是，我只看到*artikelnummer*被返回一次，所以你使用它应该没有问题。

```
DataBinder.Eval(Container.DataItem, "artikelnummer") 
```

结果集将自动删除“产品”。列名的一部分，因此您不能在绑定方法中使用表名来修饰列名。

# python - 用于在 SI 单位前缀之间转换的 Python 库

> ID：10969759
> 
> 赞同：14
> 
> 时间：2012-06-10T15:03:21.423
> 
> 标签：python

我正在寻找一个 python 库，它支持在各种 SI 前缀之间转换数字，例如，kilo 到 pico，nano 到 giga 等等。你会推荐什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-08-19T10:33:45.800

我将一个简单的函数[（由 Jukka “Yucca” Korpela 编写的原始 C 版本）](http://www.cs.tut.fi/~jkorpela/c/eng.html)移植到 Python 以根据 SI 标准格式化数字。我经常使用它，例如，在绘图上设置刻度标签等。

您可以使用以下方式安装它：

```
pip install si-prefix 
```

源代码[在 GitHub 上可用](https://github.com/cfobel/si-prefix)。

示例用法：

```
from si_prefix import si_format

print si_format(.5)
# 500.0m  (default precision is 1)

print si_format(.01331, precision=2)
# 13.31m

print si_format(1331, precision=2)
# 1.33k

print si_format(1331, precision=0)
# 1k 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T17:45:52.567

# Dictionaries

If you don't want to use any 3rd-party library like the ones listed below, you can actually implement your own parsing function.

Use a dictionary to match up the prefixes to their values. I've done it for you already:

```
_prefix = {'y': 1e-24,  # yocto
           'z': 1e-21,  # zepto
           'a': 1e-18,  # atto
           'f': 1e-15,  # femto
           'p': 1e-12,  # pico
           'n': 1e-9,   # nano
           'u': 1e-6,   # micro
           'm': 1e-3,   # mili
           'c': 1e-2,   # centi
           'd': 1e-1,   # deci
           'k': 1e3,    # kilo
           'M': 1e6,    # mega
           'G': 1e9,    # giga
           'T': 1e12,   # tera
           'P': 1e15,   # peta
           'E': 1e18,   # exa
           'Z': 1e21,   # zetta
           'Y': 1e24,   # yotta
    } 
```

Then you can use regex (as described by [my answer here](https://stackoverflow.com/a/9891784/1292652)) to search or parse the input and use the dictionary for getting the appropriate value.

* * *

# Unum

[Unum](http://pypi.python.org/pypi/Unum/4.1.0 "Unum") is well finished and thoroughly documented library.

**Pros:**

*   allows you to define arbitrary units (magnitude only supports user-defined units as long as they are a combination of the base units).

**Cons:**

*   doesn't handle prefixes well
*   clutters your namespace with all its unit definitions (you end up with variables named `M`, `S` etc. in your namespace)

* * *

# Magnitude

You can also use [Magnitude](http://juanreyero.com/open/magnitude/ "Magnitude"), another library. It supports all the kinds of SI unit prefixes you're talking about, plus it'll handle the parsing as well. From the site:

> A physical quantity is a number with a unit, like 10 km/h. Units are specified as strings. They can be any of the SI units, plus a bunch of non-SI, bits, dollars, and any combination of them. **They can include the standard SI prefixes.**
> ...
> **All standard prefixes are understood, from yocto to yotta and from kibi to exbi.**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-15T21:23:56.650

[QuantiPhy](https://quantiphy.readthedocs.io/en/stable)是一个新的软件包，它可以在具有 SI 比例因子的数字之间进行转换。单位包（例如 Unum 和 Magnitude）通常是更好的选择，它们更重并专注于单位而不是比例因子。

QuantiPhy 提供了 Quantity，它是一个将数字与其测量单位相结合的对象（单位是可选的）。创建数量时，您可以使用 SI 单位前缀。一旦你有了一个数量，你就可以在表达式中使用它，它充当一个浮点数。或者您可以将其转换为字符串，在这种情况下，它默认使用 SI 单位前缀。

```
>>> from quantiphy import Quantity

# convert strings to quantities
>>> duration = Quantity('0.12 ks')
>>> print(duration)
120 s

# convert to other units when rendering to a string
>>> print(duration.render(scale='min'))
2 min

# quantities act like floats in expressions
>>> rate = 1/duration
>>> print(rate)
0.008333333333333333

# convert floats to quantities
>>> rate = Quantity(rate, 'Hz')
>>> print(rate)
8.3333 mHz

# can be used in format strings
>>> print(f'Duration = {duration:<12.3} Rate = {rate}')
Duration = 120 s        Rate = 8.3333 mHz 
```

默认情况下，QuantiPhy 在渲染到字符串时使用自然前缀，这可能是您想要的。但是您可以使用缩放强制它渲染到特定前缀：

```
>>> mass = Quantity('1000 g')
>>> print(mass)
1 kg

>>> print(mass.render(show_si=False))
1e3 g

>>> print(mass.render(show_si=False, scale=(1e-12, 'pg')))
1e9 pg 
```

在这种情况下，您必须关闭 SI 单位前缀以避免获得多个前缀：'1 npg'。

一个更自然的例子可能是您要转换单位：

```
>>> l = Quantity('2um')                                                      
>>> print(l.render(scale='Å'))                                               
20 kÅ                                                                        

>>> print(f'{l:sÅ}')                                                         
20 kÅ 
```

最后一个示例显示您可以将所需的单位放在类型之后的格式字符串中，并且将自动为您完成转换。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-06T15:24:41.857

我不知道这是否是最好的答案，但它适用于我的情况。随意验证我的解决方案。我是第一次使用 Python，欢迎提出建设性的批评......以及积极的反馈：D
这是我的代码：

```
class Units:
def __init__(self):
    global si;
    si = {
          -18 : {'multiplier' : 10 ** 18, 'prefix' : 'a'},
          -17 : {'multiplier' : 10 ** 18, 'prefix' : 'a'},
          -16 : {'multiplier' : 10 ** 18, 'prefix' : 'a'},
          -15 : {'multiplier' : 10 ** 15, 'prefix' : 'f'},
          -14 : {'multiplier' : 10 ** 15, 'prefix' : 'f'},
          -13 : {'multiplier' : 10 ** 15, 'prefix' : 'f'},
          -12 : {'multiplier' : 10 ** 12, 'prefix' : 'p'},
          -11 : {'multiplier' : 10 ** 12, 'prefix' : 'p'},
          -10 : {'multiplier' : 10 ** 12, 'prefix' : 'p'},
          -9 : {'multiplier' : 10 ** 9, 'prefix' : 'n'},
          -8 : {'multiplier' : 10 ** 9, 'prefix' : 'n'},
          -7 : {'multiplier' : 10 ** 9, 'prefix' : 'n'},
          -6 : {'multiplier' : 10 ** 6, 'prefix' : 'u'},
          -5 : {'multiplier' : 10 ** 6, 'prefix' : 'u'},
          -4 : {'multiplier' : 10 ** 6, 'prefix' : 'u'},
          -3 : {'multiplier' : 10 ** 3, 'prefix' : 'm'},
          -2 : {'multiplier' : 10 ** 2, 'prefix' : 'c'},
          -1 : {'multiplier' : 10 ** 1, 'prefix' : 'd'},
           0 : {'multiplier' : 1, 'prefix' : ''},
           1 : {'multiplier' : 10 ** 1, 'prefix' : 'da'},
           2 : {'multiplier' : 10 ** 3, 'prefix' : 'k'},
           3 : {'multiplier' : 10 ** 3, 'prefix' : 'k'},
           4 : {'multiplier' : 10 ** 3, 'prefix' : 'k'},
           5 : {'multiplier' : 10 ** 3, 'prefix' : 'k'},
           6 : {'multiplier' : 10 ** 6, 'prefix' : 'M'},
           7 : {'multiplier' : 10 ** 6, 'prefix' : 'M'},
           8 : {'multiplier' : 10 ** 6, 'prefix' : 'M'},
           9 : {'multiplier' : 10 ** 9, 'prefix' : 'G'},
          10 : {'multiplier' : 10 ** 9, 'prefix' : 'G'},
          11 : {'multiplier' : 10 ** 9, 'prefix' : 'G'},
          12 : {'multiplier' : 10 ** 12, 'prefix' : 'T'},
          13 : {'multiplier' : 10 ** 12, 'prefix' : 'T'},
          14 : {'multiplier' : 10 ** 12, 'prefix' : 'T'},
          15 : {'multiplier' : 10 ** 15, 'prefix' : 'P'},
          16 : {'multiplier' : 10 ** 15, 'prefix' : 'P'},
          17 : {'multiplier' : 10 ** 15, 'prefix' : 'P'},
          18 : {'multiplier' : 10 ** 18, 'prefix' : 'E'},
          }

def convert(self, number):
    # Checking if its negative or positive
    if number < 0:
        negative = True;
    else:
        negative = False;

    # if its negative converting to positive (math.log()....)
    if negative:
        number = number - (number*2);

    # Taking the exponent
    exponent = int(math.log10(number));

    # Checking if it was negative converting it back to negative
    if negative:
        number = number - (number*2);

    # If the exponent is smaler than 0 dividing the exponent with -1
    if exponent < 0:
        exponent = exponent-1;
        return [number * si[exponent]['multiplier'], si[exponent]['prefix']]; 
    # If the exponent bigger than 0 just return it
    elif exponent > 0:
        return [number / si[exponent]['multiplier'], si[exponent]['prefix']]; 
    # If the exponent is 0 than return only the value
    elif exponent == 0:
        return [number, '']; 
```

这就是它的工作原理：

```
c1 = +1.189404E-010
fres = -4.07237500000000E+007;
ls = +1.943596E-005;

units = sci.Units();
rValue, rPrefix = units.convert(c1);
print rValue;
print rPrefix;

print units.convert(fres);
print units.convert(ls); 
```

回应是：

```
118.9404
p
[-40.72375, 'M']
[19.435959999999998, 'u'] 
```

我不知道是否有人会觉得这有帮助。我希望你会。我已经在这里发布了，所以想要帮助的人也可以给他们一个想法，也许他们可以优化它:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-07T16:32:56.760

我知道这是一个旧线程，但我只想抛出对我编写的处理各种前缀单位转换处理的 python 库的引用

*   [Bitmath - 文档](http://bitmath.readthedocs.org/en/latest/ "位数学")
*   [位数学 - GitHub](https://github.com/tbielawa/bitmath/ "GitHub")

以下是主要功能列表：

*   **在SI**和**NIST**前缀单位之间转换( `kB`to `GiB`)
*   在相同类型的单位之间转换（SI 到 SI，或 NIST 到 NIST）
*   自动人类可读的前缀选择（如 hurry.filesize [https://pypi.python.org/pypi/hurry.filesize](https://pypi.python.org/pypi/hurry.filesize)）
*   基本算术运算（从 50GiB 中减去 42KiB）
*   丰富的比较操作 ( `1024 Bytes == 1KiB`)
*   按位运算 ( `<<`, `>>`, `&`, `|`, `^`)
*   读取设备的存储容量（仅限 Linux/OS X 支持）
*   argparse [https://docs.python.org/2/library/argparse.html](https://docs.python.org/2/library/argparse.html) 集成为自定义类型
*   进度[条 https://code.google.com/p/python-progressbar/](https://code.google.com/p/python-progressbar/) 集成为更好的文件传输速度小部件
*   字符串解析
*   排序

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-06T14:36:36.147

@naitsirhc，感谢您的包裹。我添加了一个小功能想法来使用你的包

```
import pandas as pd
import collections
Measure = collections.namedtuple('Measure', 'SLOT TEXT AVG HIGH LAST LOW SIGMA SWEEPS')
d=[Measure(SLOT='1', TEXT='CH1,AMPLITUDE', AVG='584.4782173493248E-3', HIGH='603.9744119119119E-3', LAST='594.125218968969E-3', LOW='561.1797735235235E-3', SIGMA='5.0385410346638E-3', SWEEPS='237996'), Measure(SLOT='2', TEXT='CH1,FREQUENCY', AVG='873.9706607717992E+6', HIGH='886.1564731675113E+6', LAST='873.9263571643770E+6', LOW='854.8833348698727E+6', SIGMA='4.382200567330E+6', SWEEPS='20705739'), Measure(SLOT='3', TEXT='CH4,PERIOD', AVG='1.1428492411436E-9', HIGH='1.1718844685593E-9', LAST='1.1432428766843E-9', LOW='1.1261916413092E-9', SIGMA='6.6735923746950E-12', SWEEPS='20680921'), Measure(SLOT='4', TEXT='CH4,FREQUENCY', AVG='875.0358282079155E+6', HIGH='887.9483414008331E+6', LAST='874.780693212961E+6', LOW='853.3264385945507E+6', SIGMA='5.0993358972092E+6', SWEEPS='20681008')]

from si_prefix import si_format

import si_prefix
si_prefix.SI_PREFIX_UNITS="yzafpnum kMGTPEZY"

def siSuffixNotation(element):
    try:
        ret=float(element)
        return str(si_format(ret)).replace(' ','')
    except ValueError:
        return element

df=pd.DataFrame(d)

df.T.applymap(siSuffixNotation) #<= nice pretty print output table
                    0              1           2              3
SLOT              1.0            2.0         3.0            4.0
TEXT    CH1,AMPLITUDE  CH1,FREQUENCY  CH4,PERIOD  CH4,FREQUENCY
AVG            584.5m         874.0M        1.1n         875.1M
HIGH           604.0m         885.6M        1.2n         887.9M
LAST           586.5m         874.2M        1.1n         874.9M
LOW            561.2m         854.9M        1.1n         854.1M
SIGMA            5.0m           4.4M        6.7p           5.1M
SWEEPS         191.5k          16.7M       16.6M          16.6M 
```

多亏了你，我知道有一张我喜欢的漂亮的打印表。（我不喜欢数字和后缀之间的空格，我不喜欢 unicode 类型，我更喜欢 u for micro）++

# ios - UIPanGestureRecognizer 和 UITapGestureRecognizer 同时使用

> ID：10969760
> 
> 赞同：4
> 
> 时间：2012-06-10T15:03:37.273
> 
> 标签：ios, xcode, cocos2d-iphone, uitapgesturerecognizer, uipangesturerecognizer

这是我的小情况。我正在使用 uipanGesture 移动 ccsprite。我可以四处移动它没问题，而且我在屏幕上有一个可以使用 uitapgesture 拍摄的点。

```
-(void)handleTap:(UITapGestureRecognizer *)recognizer{

CGPoint location = [recognizer locationInView:recognizer.view];
location = [[CCDirector sharedDirector]convertToGL:location];
location = [self convertToNodeSpace:location];

if (location.x > winSize.width * .6 && location.y <winSize.height/2) {
  NSLog(@"fire");  
} 
```

我添加了委托方法，所以当我平移时，我可以单击启动按钮：一切正常。

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
  return YES;
} 
```

但是，当我不平移而只是使用 uitapgesture 射击时，我无法在射击时平移......我认为它发生的原因是因为它正在注册最后一次点击， `recognizer.state == UIGestureRecognizerStateBegan`因为我没有平移。

任何人都知道我可以点击而不是将点击注册为`if (recognizer.state == UIGestureRecognizerStateBegan`

我试过如果`(location.x < winSize.width/2)`但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:29:16.630

您可能需要使用 requireGestureRecognizerToFail 设置手势识别器链。这将意味着正在执行的手势将被迫失败，优先于第二个手势。

所以我想你想要你的[requireGestureToFail:]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:59:49.193

我不知道是否有人对这篇文章感兴趣，但我确实使用以下方法解决了 90% 之类的问题

```
 for(int i=0; i<[recognizer numberOfTouches]; i++){
    CGPoint pt = [recognizer locationOfTouch:i inView:recognizer.view];
    pt = [[CCDirector sharedDirector]convertToGL:pt];
    pt = [self convertToNodeSpace:pt];

   if (i==0) {
   //stuff
     } 
```

# macos - 无法让 Code::Blocks 在 OS X Lion 上运行

> ID：10969761
> 
> 赞同：0
> 
> 时间：2012-06-10T15:03:53.210
> 
> 标签：macos, ide, osx-lion, codeblocks

我刚刚在运行 OS X Lion 的 Macbook Air 上安装了 Code::Blocks，但我无法让它工作。

起初，问题是我没有安装 C 编译器，所以我下载了开发人员工具，但现在我遇到了另一个问题：每当我尝试“运行并构建”我的测试应用程序时，我都会得到以下信息消息：“信息：这个项目似乎还没有建立。你想现在建立它吗？”。

然后我可以按“是”、“否”或“取消”。我显然按“是”，但那个窗口不断弹出来问我同样的问题。

此外，当我尝试使用 Codeblocks 菜单并选择“退出并关闭所有窗口”来退出 Code::Blocks 时，它说应用程序已意外关闭（然后我可以重新打开、忽略或报告）。

我正在使用 Code::Blocks 的 10.05 版。

我只是想让 Code::Blocks 像在我的 Linux 系统上一样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:19:35.733

我也有类似的问题。Mac OS X Lion 开发者工具默认不会将命令行工具安装到 /usr/bin 或任何其他典型的系统文件夹，我相信 Code::Blocks 可能会搜索诸如 make、g++ 和其他重要的程序工具。如果它找不到 make，那么这可能解释了为什么没有构建项目。

为了正确安装这些，请转到 XCode 上的首选项窗格。从这里选择“下载”，然后选择“组件”。这些项目之一应该是命令行工具。只需点击“安装并输入苹果ID”即可。

您可能需要将您的 Apple ID 注册为开发人员。为此，请访问：http: [//developer.apple.com](http://developer.apple.com)

或者，您可以使用`ln`将开发人员命令链接到 /usr/local/bin 目录，但您必须在 /Developer 中挖掘才能找到它们。

# java - 检查文件结尾没有按预期工作

> ID：10969764
> 
> 赞同：0
> 
> 时间：2012-06-10T15:03:59.273
> 
> 标签：java, file, io

我尝试检查是否已到达文件末尾，但空字符串的条件不起作用

```
public void readEquation(String fileName) {  
        File aFile = new File(fileName);
        String line = null;
        int cnt = 0;
        try {
            FileReader reader = new FileReader(aFile);
            BufferedReader bufferedReader = new BufferedReader(reader);
            while ((line = bufferedReader.readLine()) != null) {      
                //but line gets null
                intoMap(line, cnt);
                cnt++;
            }
        } catch (IOException e1) {
            e1.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:08:25.427

您错误地阅读两行而不是一次。循环的条件自己读取一行，然后在循环内读取另一行。我建议这个改变：

```
public void readEquation(String fileName) {  
        File aFile = new File(fileName);
        String line = null;
        int cnt = 0;
        try {
            FileReader reader = new FileReader(aFile);
            BufferedReader bufferedReader = new BufferedReader(reader);
            line = bufferedReader.readLine();
            while (line != null) {                  
                intoMap(line, cnt);
                cnt++;
                line = bufferedReader.readLine();
            }
        } catch (IOException e1) {
            e1.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:06:04.570

您正在连续阅读两行：循环条件中的一行，然后是循环主体中的另一行。您在条件中读取的内容将被忽略且从未使用过。没有任何东西会检查第二行的值。

通常人们这样写这个循环：

```
while ((line = bufferedReader.readLine()) != null) {      
    intoMap(line, cnt);
    cnt++;
} 
```

这样，您总是在使用前检查线路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T15:06:07.447

```
while ((bufferedReader.readLine()) != null) {      
                line = bufferedReader.readLine();    //but line gets null 
```

你在这里读了两行。

为避免这种情况，请使用 tmp String 之类的

```
String line=null;
while ((line=bufferedReader.readLine()) != null) {  
    //now line stores line from file or null if file doesn't have new line 
```

编辑 - 示例

我刚刚测试了这段代码

```
 BufferedReader bufferedReader=null;
    try {
        String line = null;
        bufferedReader = new BufferedReader(new FileReader("d:\\ranks.txt"));
        while ((line=bufferedReader.readLine()) != null) {      
            System.out.println(line);
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally{
        try {
            bufferedReader.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

它奏效了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T15:07:31.123

您的代码的问题是，当您在 while 条件下执行 bufferedReader.readLine() 时，您已经在读取该行。

你应该做这个：

```
public void readEquation(String fileName) {  
    File aFile = new File(fileName);
    String line = null;
    int cnt = 0;
    try {
        FileReader reader = new FileReader(aFile);
        BufferedReader bufferedReader = new BufferedReader(reader);
        while ((line = bufferedReader.readLine()) != null) {       // only reads once
            intoMap(line, cnt);
            cnt++;
        }
    } catch (IOException e1) {
        e1.printStackTrace();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T15:10:01.700

这对你有用。

```
 while ((line = bufferedReader.readLine()) != null) {      

                    intoMap(line, cnt);
                    cnt++;
                } 
```

# php - php在mySQL中一键插入多行

> ID：10969769
> 
> 赞同：-2
> 
> 时间：2012-06-10T15:04:42.060
> 
> 标签：php, mysql, row

我有一个`result`在 mySQL 中调用的表。我想单击一下插入多行。基本上老师是通过php将学生成绩存入数据库：

表：结果

实体：结果，student_id

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T15:08:11.443

您的 php 脚本需要按以下方式构造插入 sql（我假设您的表 T1 有两个字段 F1 和 F2，输入是 v11 v12 v21 v22 等）

```
INSERT INTO T1 (F1,F2)
VALUES
(V11,V12),
(V21,V22),
...
...
(Vn1,Vn2); 
```

# asp.net-mvc-3 - 敏感实体

> ID：10969774
> 
> 赞同：1
> 
> 时间：2012-06-10T15:04:56.200
> 
> 标签：asp.net-mvc-3, model-view-controller, editing

我想允许我的用户更新他们的帐户详细信息。为简化起见，假设帐户模型由`ID`、`Name`、`Surname`、`Username`和组成`Password`，并且我只希望用户能够更改`Name`和`Surname`。问题是，如果我将帐户模型传递给视图，我需要为`ID`、`Username`和`Password`. 现在即使我可以加密这些数据，将密码放在视图中也不安全。

另一种方法是创建一个`EditAccount`包含`ID`, `Name`and `Surname`only 的视图模型，但是在控制器操作中我需要再次搜索正在修改的用户`Name`并`Surname`在保存之前手动分配新的用户，这种方法不是特别整洁. 在这种情况下，您有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:07:25.810

绝对创建一个不包含的单独 ViewModel`Password`并将其发送到编辑视图。为特定需求使用特定的 ViewModel 是完全正常的。这就是 ViewModel 的用途。它们重量轻且可重复使用。它们旨在重塑您的实体数据以满足 UI 的需求，以仅包含您需要的内容。这是首选方法，因为它适用于 MVC 模式，而不是反对它。

如果需要，您可以创建一个继承层次结构，例如具有一个非敏感数据 ViewModel 和一个用于继承非敏感数据的敏感数据，以满足更改用户密码的需要。如：

使用它来编辑用户：

```
public class UserEditViewModel {

    public int ID { get; set; }

    [Required]
    public string Name { get; set; }

    public string Surname { get; set; }
} 
```

当您需要`User`info plus时使用它`Password`。当您希望允许用户编辑其密码时使用此模型

```
public class SensitiveUserViewModel : UserEditViewModel {

    [Required]
    public string Username { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Current Password")]
    public string OldPassword { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "New Password")]
    public string NewPassword { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm New Password")]
    [Compare("NewPassword", ErrorMessage = "The new password and confirmation password do not match")]
    public string ConfirmPassword { get; set; }
} 
```

您进行编辑的视图将具有这些操作。通过这种方式编辑非敏感用户信息只有您需要的数据，并且没有安全问题。

```
public ActionResult EditUser(int ID) {
    // get User by ID
    var model = new UserEditViewModel();
    // map your entity fields to ViewModel
    return View(model);
}

public ActionResult EditUser(UserEditViewModel model) {
    if(ModelState.IsValid) {
        // save user edits
    }
    return View(model);
} 
```

您应该使用单独的视图来允许用户编辑密码信息。这样您就可以使用，`SensitiveUserViewModel`因此您拥有所有数据，敏感和非敏感属性。这样可以保持一切干净，因为您的所有属性都在一个地方，并且仅用于更改`Password`，而不是编辑`Name`，`Surname`

```
public ActionResult ChangePassword(int ID) {
    // get user by ID
    var model = new SensitiveUserViewModel();
    // map your entity to ViewModel
    return View(model);
}

[HttpPost]
public ActionResult ChangePassword(SensitiveUserViewModel model) {
    if(ModelState.IsValid) {
        // save user password info
    }
    return View(model);
} 
```

# ruby-on-rails - 在方法内部不重复数据库调用的最有效方法是什么？

> ID：10969782
> 
> 赞同：2
> 
> 时间：2012-06-10T15:06:04.593
> 
> 标签：ruby-on-rails, activerecord

我正在编写一个模型实例方法，如果它存在则应该找到一个 AR 关联，或者如果它不存在则创建它。我怎样才能做到这一点，以便在第一次查找后不再查询数据库？我在下面有这个方法的两个版本，但都有缺点。

这种方法每次都执行查询，效率低下。

```
 def cart
    carts.order('created_at desc').where(:purchased_at => nil).first || carts.create
  end 
```

此方法仅进行一次数据库查找，但在诸如 cart.destroy 之类的操作后会不同步。

```
 def cart
    @cart_ || @cart_ = carts.order('created_at desc').where(:purchased_at => nil).first || @cart_ = carts.create
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:17:35.033

ActiveRecord 关系有一个鲜为人知的功能，允许您从它们创建一个实例：

```
User.where(name: 'John').new #=> <User @name="John"> 
```

结合它，`find_or_create`你就在路上：

```
Cart.order('created_at DESC').find_or_create_by_purchased_at(nil) 
```

每次调用`cart`Rails 都会运行一个查询，*但是*它非常高效，因为它会命中在请求结束时过期的查询缓存。假设您没有在调用此方法之间清除所有购物车，那么您应该没问题。

# php - 如何在 Javascripts 中调试验证表单？

> ID：10969786
> 
> 赞同：-1
> 
> 时间：2012-06-10T15:06:25.053
> 
> 标签：php, javascript, jquery, html

> **可能重复：**
> [如何调试 Javascript 错误？](https://stackoverflow.com/questions/819213/how-to-debug-javascript-error)

我创建了一个带有 HTML 表单的表格，如下所示： // $usr 只是另一个过程的结果：

```
<form name="myForm" action="addAccessories.php"  method="post" onsubmit="return validateForm(this);">
        <table border="1" id="IT">
            <tr> 
                <th>Barcode<em>*</em></th>
                <th>Current stock</th>
            </tr>    
        <?php
           for($id=1; $id<=$usr; $id++){                   
        ?>
            <tr>                    
                <td><input type="hidden"  name="id[]" value="<?php echo $id; ?>" />
                    <input type="text"  name="bar_code<?php echo $id; ?>" id="bar_code<?php echo $id; ?>" value="" /></td> 
```

" type="text" id="description" value="" />

```
 <td><input type="text"  name="num_stock<?php echo $id; ?>" value="0" id="num_stock<?php echo $id; ?>"/></td>
        <?php
            }
        ?>
            <tr>
                <td> </td> 
                <td> <button data-theme="b" input type="submit" name="Submit" value="Submit">Add accessories</button></td>
            </tr>
        </table>
    </form> 
```

获取输入并创建表后，我使用验证表单代码对其进行验证（验证和自动完成代码）：

```
<?php
$query= "SELECT description from accessories_type ORDER BY description";
$result= mysqli_query($link, $query) or die(mysqli_error($link));
?>
<script>
$(document).ready(function() {
    for(i = 1; i < document.getElementById("IT").rows.length; i++)    {
    var availableConsoles = [
        <?php
        while($row = mysqli_fetch_array($result)){    
            echo '"' . $row['description'] . '"' . ',';
        }
        ?>
    ];
    $( "#description " ).autocomplete({
            source: availableConsoles
    });
}
});
</script>  

<script type="text/javascript">    

function validateForm(form){

var errors = [];       
var c, cs = form.elements;
var reB = /^bar_code/;
var reN = /^num_stock/;
var reD = /^[0-9]+$/;

for (var i=0;i<cs.length; i++) {
    c = cs[i];

    if (reB.test(c.name) && c.value == '') {
    errors[errors.length]= 'You must enter barcode.';
    }
    if (reN.test(c.name) && !reD.test(c.value)) {
    errors[errors.length] = 'Stock number must be a positive integer.';
    }     

if (errors.length > 0) {
    reportErrors(errors);
    return false;
}         return true;
}
}
function reportErrors(errors){
var msg = "There were some problems...\n";
for (var i = 0; i<errors.length; i++) {
    var numError = i + 1;
    msg += "\n" + numError + ". " + errors[i];
}
alert(msg);
}
</script> 
```

但是，它并没有按我的意愿执行。谁能指出我做错了什么以及如何解决？另外，如何调试一般的 javascripts 代码（例如将代码执行结果打印到终端，类似于“echo .... in PHP”）谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:21:51.040

我不知道你的问题，但这里有一些事情要做：

代替：

```
errors[errors.length] = "Current stock must be an integer"; 
```

做：

```
errors.push("Current stock must be an integer"); 
```

最后，您可以像@tereško 所说的那样调用[console.log ，然后按](https://stackoverflow.com/questions/4743730/javascript-what-is-console-log-and-how-do-i-use-it)**F12**进行检查：

```
console.log(errors); 
```

还有这个：

```
if(isNaN(num_stock)){ 
```

可能是这样（为了安全）：

```
if(isNaN(parseInt(num_stock))){ 
```

现在，该`errors`数组会产生什么错误？

# jquery - 将此 jquery 翻译成咖啡脚本？

> ID：10969788
> 
> 赞同：5
> 
> 时间：2012-06-10T15:06:34.213
> 
> 标签：jquery, coffeescript

我不确定如何构建以下内容。这工作正常：

```
 $('.hover li').on 'hover', (ev) ->
    $(this).addClass('active') 
```

我知道我可以使用“toggle”而不是“addClass”，但由于其他原因，我需要传递一个处理程序输出函数。所以我尝试了这个：

```
 $('.element').on 'hover', (ev)
    -> $(this).addClass('active'),
    -> $(this).removeClass('active') 
```

这将返回一个错误 - 'unexpected ，'。我尝试了其他变体，并且我在网上找到的大多数示例都没有使用该`.on 'hover' (ev) ->`格式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T15:33:03.373

`on()`如果您想一次附加两个事件处理程序，则不能用于此。

You need to use `hover()`:

```
$('.element').hover(
  (ev) -> $(this).addClass 'active'
  (ev) -> $(this).removeClass 'active'
) 
```

or even better, utilizing `toggleClass()`

```
$('.element').hover (ev) -> $(this).toggleClass 'active' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T15:11:37.383

jQuery 的切换功能需要两个功能，我认为这就是您所追求的：

```
$('.element').toggle 'hover', 
    (ev) -> 
        $(this).addClass('active')
        # Do other stuff...
    (ev) -> 
        $(this).removeClass('active')
        # Do other stuff... 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-10T15:09:11.893

```
$('.element').on 'hover', (ev) ->
  $(this).addClass('active').removeClass('active') 
```

应该这样做。虽然我不明白。您添加*活动*类，然后将其删除。尽管如此，上面的代码至少是有效的咖啡脚本。

# android - Android Min3d 不支持粒子效果？

> ID：10969799
> 
> 赞同：0
> 
> 时间：2012-06-10T15:08:10.507
> 
> 标签：android, 3d, particles

我想在android上制作一个3d游戏。所以我选择了min3d框架。

但是现在我发现min3d不支持3d效果（粒子和材质动画）。

我对 min3d 感到失望，并打算更改框架。

请帮我。对我来说最可用的框架是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:26:32.460

尝试使用AndEngine，这个[项目](https://github.com/pocmo/AndEngine-ParticleSystem-Demos)可以帮助你

# java - 变量在侦听器中应该是最终的

> ID：10969803
> 
> 赞同：2
> 
> 时间：2012-06-10T15:08:29.367
> 
> 标签：java

> **可能重复：**
> [无法引用在不同方法中定义的内部类中的非最终变量](https://stackoverflow.com/questions/1299837/cannot-refer-to-a-non-final-variable-inside-an-inner-class-defined-in-a-differen)
> [为什么在匿名类中只能访问最终变量？](https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class)

在 SO 和谷歌中寻找这个问题的答案，但找不到任何答案。

我有以下代码：

```
MyClass variable = new MyClass();
Button b = new Button();
b.addActionListener(new ActionListener() {
   public void actionPerformed(ActionEvent e){
         System.out.println("You clicked the button");
         variable.doSomething();
   }
}); 
```

编译器返回这个：

> 从内部类中访问局部变量变量；需要声明为final

为什么`variable`必须是最终的技术原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T15:15:45.883

这是因为您使用的是匿名内部类。发生的是编译器为您创建类。它将它称为您的外部类并添加`$`和编号，例如`$`，`$2`等等。

该类具有自动初始化的外部类的引用，因此其实例可以使用外部类的方法和字段。

但是你的班级是匿名的。它是在方法内部定义的，可以使用在这个匿名类之前定义*的*内部变量。问题是“它怎么能做到？” 确实，您不能参考“运行方法的实例”来访问其变量。答案是匿名内部类引用的所有方法变量都复制到匿名内部类。因此变量必须是最终的：否则有人可以从外部类更改它们的值，并且这些更改对内部类是不可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:11:06.793

这是因为内部类仅在触发事件时才执行代码。如果变量没有声明为final，那么`MyClass`引用的对象`variable`可能会改变，如果内部类需要该对象，它将不知道它应该引用哪个`MyClass`对象。

因此，它应该被声明为最终的，所以这个引用永远不会改变。

想象一下没有 final 关键字的情况：

`variable`正在 创建内部类引用对象，并且`MyClass`在内部类中引用对象`hashCode(): 12345``variable``MyClass``hashCode(): 12345`

`variable`更改为现在在内部类中引用 Object `MyClass`with`hashCode(): abcde` `variable`仍在引用`MyClass`Object with`hashCode(): 12345`

触发事件时，Java 如何从这里运行代码？使用哪个`MyClass`对象？

现在使用 final 关键字：

`variable`正在 创建内部类引用对象，并且`MyClass`在内部类中引用对象`hashCode(): 12345``variable``MyClass``hashCode(): 12345`

由于 final 关键字，无法更改引用。

当事件被触发时，Java 总是知道`MyClass`要调用哪个对象。没问题。

# ruby-on-rails - 使用 koala gem 设置上传到 Facebook 的视频的隐私

> ID：10969805
> 
> 赞同：1
> 
> 时间：2012-06-10T15:08:59.337
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, video, koala

我正在尝试使用考拉将视频发布到 Facebook。除了我无法设置视频的隐私设置外，一切似乎都正常。我的代码是
`result = fb_graph.put_video(video_path, {:title => self.title, :description => self.description, :privacy => '{"value": "CUSTOM", "friends": "SELF"}'})`

如何正确设置隐私？

# c - NULL 地址位置的值是多少？

> ID：10969808
> 
> 赞同：1
> 
> 时间：2012-06-10T15:09:10.443
> 
> 标签：c, null

为什么此代码打印 4 作为输出？

还请提供一些详细信息，以帮助我更好地理解这种行为。

```
int main(){ 
     int *p=NULL;
     printf("%d" ,p+1);
     return 0; 
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T15:11:39.653

您将指针设置为 0 (NULL)，然后向其添加 1；然后您将结果转换为`int`并打印结果。您在这里需要的关键知识是，当您递增（加 1 到）一个指针时，实际上是添加了指向对象的大小——一个`int`指针前进到指向*下一个* `int`。因为`int`is （显然）在您的平台上`p`是 4 个字节，所以会递增以指向一个地址，该地址比它开始的位置 4 个字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T15:16:06.373

值得注意的是，这`p + 1`是一个无效的指针（即，一个既不是`NULL`也不是指向有效对象/超过数组对象的指针），任何使用它都是未定义的行为。

```
printf("%d" ,p+1); 
```

或（更正确）：

```
printf("%p", (void *) (p + 1)); 
```

是未定义的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T15:13:26.300

C 中的大小`int`（通常）为 4 个字节。因此，将指针增加一个单位意味着将其值增加`sizeof(int)`.

此外，您不是打印指针指向的值（因为这肯定会使您的程序崩溃），而是指针本身的值。您绝对应该看一下 C（或一般）中的任何指针教程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T15:17:42.807

你得到*未定义的行为*。仅当指针指向数组的元素或数组末尾之外的元素并且将指针移动整数表示的位置数的结果也指向的元素时，才向指针添加整数有效相同的数组，或者一个超出末尾的数组。（出于这些目的，非数组对象可以被视为单元素数组的唯一元素。）

空指针不指向数组的元素，因此您不能向其添加一个元素。（在 C++ 中，明确允许将 0 添加到空指针值并获得空指针值作为结果。（请参阅Andrew Koenig 在 Dobb 博士的[这篇博客条目。）](http://www.drdobbs.com/blogs/cpp/240001022)

通过将指针值传递给相应的格式说明符所期望的位置，您可以获得更多*未定义的行为*。是 的正确格式说明符，如果要将指针打印为with ，则需要显式转换。`printf``%d``int``%p``void*``int``%d`

如果您的程序具有*未定义的行为*，则无法保证可能发生的任何事情。你当然不能通过观察结果来推断出任何关于语言的东西，并且有争议的是，试图从这样的行为中推断出实现的属性有什么优点，因为没有进一步的证据，即从程序中观察到的结果的形式没有如果编译器供应商有*未定义*的行为或保证，您将不知道哪些情况可能会导致观察到的行为发生变化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-10T15:13:46.817

您正在打印 p 的地址，而不是存储在地址 p 的值。p = NULL 将 p 设置为零。由于它是一个指向整数的指针，因此将其递增 1 实际上会使指针递增整数的大小，通常为 4 或 8 个字节。

尝试通过 *p 打印存储在地址 0（甚至 4）的内容通常会在大多数系统上终止您的程序，因为该内存区域受到保护。

# mysql - SQL group by 返回错误数据

> ID：10969811
> 
> 赞同：-2
> 
> 时间：2012-06-10T15:09:39.867
> 
> 标签：mysql, sql, group-by

这让我疯了！Musing MySQL DBMS（抱歉没有指定）......

我有下表：

```
"id", "pingdate", "players"
"3","2012-05-24 11:45:04","63"
"1","2012-05-24 12:15:03","14"
"2","2012-05-24 12:15:03","38"
"3","2012-05-24 12:15:03","24"
"1","2012-05-24 12:45:04","22"
"2","2012-05-24 12:45:04","40"
"3","2012-05-24 12:45:04","66"
"1","2012-05-24 13:15:03","14"
"5","2012-05-24 13:15:03","99"
"3","2012-05-24 13:15:03","63"
"3","2012-05-24 13:15:03","38"
"4","2012-05-24 13:15:03","63" 
```

我想要以下结果：

```
"5","2012-05-24 13:15:03","99"
"3","2012-05-24 12:45:04","66"
"4","2012-05-24 13:15:03","63" 
```

在文本中，我想要 3 个不同的 ID，具有最高玩家和正确的 pingdate。

我已经尝试过了，但它返回了错误的 pingdate：

```
SELECT id, 
       pingdate, 
       max(players) AS players 
FROM pings 
GROUP BY id  
ORDER BY players DESC 
LIMIT 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:21:31.913

您没有指定 DBMS，所以这是一个 ANSI SQL 解决方案：

```
select *
from (
    select id, 
           pingdate,
           rank() over (partition by id order by players desc) as rnk
    from pings
) t
where rnk <= 3
order by players desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:15:52.667

您必须使用连接或子查询来完成，请参阅[sql - 从基于组的行中获取 id](https://stackoverflow.com/questions/2588095/sql-getting-the-id-from-a-row-based-on-a-group-by)

```
Select  a.id, a.pingdate, a.players from pings a, (
  SELECT id, max(players) AS players 
  FROM pings 
  GROUP BY id ) b 
where a.id=b.id and a.players=b.players 
ORDER BY players DESC 
LIMIT 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T15:16:36.947

首先你需要返回所有结果......然后只返回 3

```
SELECT *
FROM (
SELECT id,pingdate, max(players) AS players 
FROM pings 
GROUP BY id, pingdate  )
WHERE rownum = 3
ORDER BY players DESC 
```

我希望这能帮到您

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T15:24:16.810

最大值 := 的定义没有更高的值：

```
SELECT id, pingdate, players 
FROM pings pi
    WHERE NOT EXISTS (
         SELECT *
         FROM pings nx
         WHERE nx.id = pi.id
         AND nx.players > pi.players
         )
ORDER BY players
LIMIT 3
    ; 
```

# c++ - Gnome 3 上的 SFML 1.6 全屏崩溃

> ID：10969813
> 
> 赞同：0
> 
> 时间：2012-06-10T15:09:42.870
> 
> 标签：c++, linux, ubuntu, sfml, gnome-shell

我正在尝试使用 SFML 的全屏模式进行测试，但是每次窗口进入全屏模式时它都会崩溃。这是我的程序：

```
#include <stdio.h>
#include <SFML/Graphics.hpp>

int main ( int argc, char** argv ) {
    sf::Window win( sf::VideoMode ( argc >= 3 ? atoi ( ( const *char ) argv[1] ) : 1280, argc >= 3 ? atoi ( ( const *char ) argv[2] ) ), "", sf::Style::Fullscreen );

    while ( win.IsOpened ( ) ) {
        sf::Event in;

        while ( win.GetEvent ( in ) ) {
            if ( in.Type == sf::Event::KeyPressed ) {
                switch ( in.Key.Code ) {
                    case sf::Key::Q:
                        win.Close ( );
                        break;

                    default:
                        break;

                }
            }
        }

        win.Display ( );
    }
} 
```

我用这个命令用一个makefile编译它：

`g++ -o build/Test -lsfml-system -lsfml-window -lsfml-graphics src/main.cpp`

当我从终端运行程序时它崩溃了：

`build/Test 1440 900`

`build/Test`

我在 Apple Macbook Air (4, 2) 上运行 ubuntu linux 12.04。我尝试同时使用 gdm 和 lightdm，它们都有相同的结果。此外，它适用于 gnome 2、unity 和 openbox，但不适用于 gnome 3。

我不介意乱搞配置文件，但我想继续使用 gnome shell，因为它目前是我最喜欢的 DE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:36:45.423

切换到 SFML 2.0 解决了这个问题。感谢康拉德鲁道夫在评论中发表了这一点。

# python - 从标识符构建 json 树结构

> ID：10969814
> 
> 赞同：1
> 
> 时间：2012-06-10T15:09:48.633
> 
> 标签：python, json, tree, identifier

我有一个包含如下数据的文件：

```
ID attribute
1 'text'
101 'text'
1011 'text'
10111 'text'
1011101 'text'
1011102 'text'
1011103 'text'
1011104 'text'
1011130 'text' 
```

我的目标是从这些数据构建 json 树结构：

```
{
    [
    ID : 1,
    attribute : 'text',
    children : [
        ID: 101,
        attribute : 'text',
        children : [
             ...
    ID : 2,
        ...
    ]
} 
```

在 python 中，我建立了一个这样的字典列表：

```
[ {'id': ID, 'attr' : text}, {...} ] 
```

我想我可以利用叶子 id 包含他父母 id 的事实，但我看不到构建我想要的结构的方法。

我将不胜感激任何帮助，伪代码或任何其他编程语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:19:27.643

我不太了解你的 ID 编号系统，所以这里是一个简单前缀树的代码：

```
ls = """
1 'text'
101 'text'
1011 'text'
10111 'text'
1011101 'text'
2 two
2111 'text'
21114 'text'
25 'text'
2567 'text'
"""
ls = map(str.split, ls.strip().splitlines())

tree = [{'prefix': '', 'children':[]}]
stack = [tree[0]]

for id, attr in ls:
    while not id.startswith(stack[-1]['prefix']):
        stack.pop()
    node = {'prefix': id, 'attr': attr, 'children': []}
    stack[-1]['children'].append(node)
    stack.append(node)

import pprint
pprint.pprint( tree) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:14:16.363

thg435 的解决方案几乎没有什么变化：

```
# open & read raw file
f=open(args[0], 'r')
text = f.read()

#
text = map(lambda s: s.split(" ", 1), text.strip().replace("'","").splitlines())
tree = [{'prefix': '', 'children':[]}]
stack = [tree[0]]

for id, attr in text:
    while not id.startswith(stack[-1]['prefix']):
        stack.pop()
    node = {'prefix': id, 'attr': attr, 'children': []}
    stack[-1]['children'].append(node)
    stack.append(node)

pprint.pprint( tree)

print json.dumps( tree)
f=open(args[1], 'w')
f.write(json.dumps( tree, sort_keys=True, indent=1)) 
```

谢谢 ！

# android - 安卓指尖文字输入

> ID：10969815
> 
> 赞同：1
> 
> 时间：2012-06-10T15:09:50.653
> 
> 标签：android, text, ocr

我希望创建一个 Android 笔记应用程序

我希望用户能够在平板电脑屏幕上写字，就像在记事本上写字一样

我一直在玩一些示例和教程，但无法获得不同的字符，每个字母都会自动连接到下一个。

我从 marakana 示例“Android 2D 图形示例”开始，然后从那里开始。

我如何允许用户输入每个字母而不将其连接在一起？

一旦输入了每个单词（而不是“加入”），我想处理“粗略”文本并使用“正确”字体显示输入的单词。

# php - 父文件夹中包含的文件，其中包含另一个文件夹中的文件

> ID：10969817
> 
> 赞同：2
> 
> 时间：2012-06-10T15:09:54.843
> 
> 标签：php, include, directory

标题很难理解，但我的问题很简单：

我有：

**配置文件**

```
include('config_mysql.php');
include('language/english.php'); 
```

然后我有：**index.php**

```
include('config.php'); 
```

然后：**/ajax/ajax_vote.php**

```
include('../config.php'); 
```

为什么`index.php`两者都包括`config_mysql.php`但`language/english.php`只`ajax/ajax_vote.php`包括`config_mysql.php`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:16:15.763

基本文件夹`include()`始终是原始脚本的基本文件夹，因此 d 脚本中的`include()`s`include()`将不直观：

`ajax/ajax_vote.php`将（试图）包括

```
ajax/../config.php
  -> ajax/sonfig_mysql.php
     ajax/language/english.php 
```

你可能想看看

```
$BASEDIR=dirname(__FILE__);
include("$BASEDIR/config_mysql.php");
include("$BASEDIR/language/english.php"); 
```

和朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:06:18.433

原因是， 与`language/english.php`不在同一目录中`config.php`。此外，它`/ajax/ajax_vote.php`位于根文件夹之外的某个地方。

但是，PHP 仍然能够正确地包含文件。我不明白为什么`/ajax/ajax_vote.php`不包括文件`language/english.php`。如果我误解了这个问题，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:55:10.147

Eugen 说的是真的，这是因为基本路径与您包含的脚本不同。

而且从我的测试看来（因为我遇到了类似的问题）php include() 在包含文件时会存储另一个临时的 include_path，这就是为什么 ajax_vote.php 可以包含 config_mysql.php。为了说服自己，请尝试将 config_mysql.php 移动到您的 ajax 文件夹：它的工作原理相同，并且 config.php 将能够包含它（但仅在执行 ajax_vote.php 时，而不是 index.php！）。在这种情况下，您有两个包含路径：“/ajax/”和“/”。

但是，当您使用路径（不仅仅是要包含的文件名，还要在字符串中指定文件夹）时，包含路径仅基于执行脚本（例如：仅 '/ajax/'）。

您可以通过执行以下操作来解决此问题：

```
include(dirname(__FILE__).'/language/english.php'); // don't forget the prepended '/' 
```

要不就：

```
include('/language/english.php'); // here again the prepended '/' 
```

但是我警告你，我还不完全理解为什么第二种方法有效，使用第一种方法和 dirname() 可能会更安全。

/编辑：我刚刚发现 include('/path/to/file') 可能是 Windows 操作系统上的一个错误：在 Windows 上它等于 dirname(__ FILE__ )，但在 UNIX 上它等于根路径。所以 dirname(__ FILE__ ) 肯定更可靠。

# java - 安全的 Java 应用程序数据库

> ID：10969818
> 
> 赞同：1
> 
> 时间：2012-06-10T15:09:55.887
> 
> 标签：java, jdbc, embedded-database, encryption

我正在寻找用于管理财务的应用程序。它将存储银行交易，因此数据文件必须是安全的。我对 SQL 和 JDBC 很满意，尽管解决方案不一定是 JDBC。我正在寻找一种嵌入式解决方案，因为我希望数据文件是可移植的。

我尝试使用 TrueZip (http://truezip.java.net/) 创建一个 ZIP 容器，然后使用各种数据库 API 来管理其中的数据。我试过了：

*   sqlite4java (http://code.google.com/p/sqlite4java/)
*   SQLiteJDBC ( [http://www.zentus.com/sqlitejdbc/](http://www.zentus.com/sqlitejdbc/) )
*   xBaseJ ( [http://xbasej.sourceforge.net/](http://xbasej.sourceforge.net/) )

也许有一些更简单的东西，一个具有内置安全性的嵌入式数据库。（那将是最好的！）我不反对编写我自己的安全数​​据库，但如果有什么东西经过测试并且可以工作，我会加入！

谢谢你看我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:30:00.440

首先，大型 DBMS 具有集成的身份验证机制和安全性。
那么为什么不使用它呢？
如果您的问题是您想要一些免费的嵌入式数据库，请查看[H2](http://www.h2database.com/html/main.html)
它是面向 Java 的，它提供加​​密

# dapper - 如何使用 dapper.net 创建对象层次结构？

> ID：10969826
> 
> 赞同：4
> 
> 时间：2012-06-10T15:11:39.410
> 
> 标签：dapper

我有一个表格定义如下：

```
enter code here

CREATE TABLE Milestone
( 
    MilestoneID Int,
    MilestoneName Nvarchar(256),
    ParentMilestoneID Int
) 
```

类定义如下：

```
enter code here

public class Milestone
{
    public int MilestoneID {get;set;}
    public string MilestoneName {get;set:}
    public Milestone milestone {get;set;}
} 
```

如何将 sql 查询映射到父子层次结构对象？

欢迎任何建议或想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:04:16.267

这不完全是层次结构，而是更好的父子关系，我想您可以查看名为[Multi Mapping部分的](https://github.com/StackExchange/dapper-dot-net#multi-mapping)[示例页面](https://github.com/StackExchange/dapper-dot-net)。

# mysql - 如何在 NAVICAT 上进行自动增量工作

> ID：10969831
> 
> 赞同：3
> 
> 时间：2012-06-10T15:12:11.350
> 
> 标签：mysql, primary-key, increment, navicat

我正在使用 NAVICAT 为 MYSQL 创建表，但我无法为我的主键列找到自动增量属性选项。

```
id integer(10)(auto_increment)primary key 
```

任何人请帮帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:19:35.223

我不熟悉 NAVICAT，但如果你可以直接运行 SQL 语句，试试这个：

```
ALTER TABLE `yourTable` CHANGE `id` `id` INT(10) NOT NULL AUTO_INCREMENT 
```

完整的文档[在这里](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-13T07:38:45.290

据报道，Navicat 中有一个自动增量复选框，但您必须先创建一个整数键，保存操作，然后重新选择字段，现在底部区域会出现自动增量复选框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-01T21:22:37.950

**单击字段末尾的键，它会显示自动增量选项**

[![Navicat 自动增量](../Images/c72f28fe791c611ed9dd27549a795a3e.png)](https://i.stack.imgur.com/lcAQ5.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:51:39.253

我正在使用 Navicat (10.1.0 Mac) Enterprise。在表创建对话框中，有一个复选框`auto increment`应该可以完成您正在寻找的事情。

# php - Code Igniter：一个领域最常用的方法

> ID：10969832
> 
> 赞同：0
> 
> 时间：2012-06-10T15:12:45.800
> 
> 标签：php, codeigniter, dry

在我的 CI 控制器中，我具有以下三个功能：

```
function _temp ($view,$data="") {
  $this->load->view('temp/nm-header',$data);
  $this->load->view($view,$data);
  $this->load->view('temp/footer',$data);
}

function _qs($val) {
  return $this->session->userdata($val);
}

function _qp($val) {
  return $this->input->post($val);
} 
```

我想为此有一个中央控制器，而不是必须在我拥有的每个控制器中复制/粘贴这些方法。做一个图书馆能解决问题吗？如果是这样的话...

```
$ci =& get_instance 
```

如何使上述变量在我的库类中的所有方法中都可用？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T15:18:40.133

无需创建库。相反，创建一个`MY_Controller`为您的常用方法调用的基本控制器，并让您的其他控制器从它扩展，如下所示：

MY_控制器：

```
class MY_Controller extends CI_Controller {

    function __construct() {
        parent::__construct();
    }

    function _temp ($view,$data="") {
        $this->load->view('temp/nm-header',$data);
        $this->load->view($view,$data);
        $this->load->view('temp/footer',$data);
    }

    function _qs($val) {
        return $this->session->userdata($val);
    }

    function _qp($val) {
        return $this->input->post($val);
    }

} 
```

您希望访问常用方法的任何其他控制器：

```
class Some_controller extends MY_Controller {

    function __construct() {
        parent::__construct();
    }

    // _temp(), _qs(), and _qp() are now all available to any controller
    // that extends MY_Controller

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:14:38.927

您可以创建自己的核心类并扩展 CI 类。 [http://codeigniter.com/user_guide/general/core_classes.html](http://codeigniter.com/user_guide/general/core_classes.html)

# ruby-on-rails - 由 delete_all 引起的 ActiveRecord::StatementInvalid

> ID：10969836
> 
> 赞同：0
> 
> 时间：2012-06-10T15:13:18.320
> 
> 标签：ruby-on-rails, sqlite, ruby-on-rails-3.1

在我们的 rails 3.1.4 应用程序中，系统日志中过多的条目将使用 sys_log 模型中的方法删除：

```
 def self.trim_log(num_entry)
    if SysLog.count > num_entry      
      SysLog.where("log_date < #{SysLog.all[num_entry -1].log_date}").delete_all
    end
  end 
```

这里的 num_entry 是我们要保留的日志条目。该条目之前的任何条目都将被删除。但是 delete_all 在 rspec 中导致以下错误：

```
 ←[31mFailure/Error:←[0m ←[31mSysLog.trim_log(1)←[0m
 ←[31mActiveRecord::StatementInvalid:←[0m
   ←[31mSQLite3::SQLException: near "03": syntax error: DELETE FROM "sys_logs" WHERE (log_date < 2012-06-10 03:43:21 UTC)←[0m 
```

Rails 控制台中的错误是相同的。我们开发的数据库是sqlite3。log_date 是日期时间。我们的代码有什么问题？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:48:37.577

尝试：

```
SysLog.where("log_date < ?", SysLog.all[num_entry -1].log_date).delete_all 
```

正确引用您的日期。

但考虑修改。我想你可以通过这种方式获取你的第 num_entry-1 个元素：

```
SysLog.offset(num_entry-1).first 
```

这比获取所有这些要高效得多。

# extjs - 如何在extjs中的按钮单击事件上将文本字段值添加到网格面板

> ID：10969838
> 
> 赞同：0
> 
> 时间：2012-06-10T15:13:24.787
> 
> 标签：extjs, extjs4

我想知道如何在 extjs 中的按钮单击事件上将文本字段值添加到网格中。我可以看到表单和所有带有验证的控件，但是当我单击按钮时，我无法将此数据添加到网格面板中，我的代码如下

**应用程序.js**

```
Ext.application({
    name: 'app',
    launch: function () {
    Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [

        {name: 'name',  type: 'string'},
        {name: 'dob', type: 'date'},
        {name: 'email', type: 'string'},
        {name: 'mobile', type: 'string'},

    ]
});

var data = {
    users: [
        {

            name: 'abc',
            dob: '4/12/2012',
            email: 'abc@yahoo.com',
            mobile:'9800000774'
        },
        {

            name: 'xyz',
            dob: '4/13/2012',
            email: 'xyz@yahoo.com',
            mobile:'9821111774'
        }
    ]
};

//note how we set the 'root' in the reader to match the data structure above
var store = Ext.create('Ext.data.Store', {
    autoLoad: true,
    storeId:'dataStore',
    model: 'User',
    data : data,
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'users'
        }
    }
 });
Ext.define('MyApp.view.ui.MyWindow', {
    extend: 'Ext.window.Window',

    height: 505,
    width: 462,
    title: 'My Window',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'form',
                    height: 270,
                    padding: 5,
                    bodyPadding: 10,

                    title: 'My Form',
                    items: [
                        {
                            xtype: 'textfield',
                            id: 'txtnm',
                            fieldLabel: 'Name',
                            allowBlank: false,
                            anchor: '100%'
                        },
                        {
                            xtype: 'textareafield',
                            id: 'txtadd',
                            fieldLabel: 'Address',
                            allowBlank: false,
                            anchor: '100%'
                        },
                        {
                            xtype: 'datefield',
                            id: 'dtDob',
                            fieldLabel: 'DOB',
                            allowBlank: false,
                            anchor: '100%'
                        },
                        {
                            xtype: 'textfield',
                            id: 'txtemail',
                            fieldLabel: 'Email',
                            allowBlank: false,
                            vtype: 'email',
                            anchor: '100%'
                        },
                        {
                            xtype: 'textfield',
                            id: 'txtmob',
                            fieldLabel: 'Mobile no',
                            allowBlank: false,
                            maskRe: /[0-9]/,
                            maxLength: 10,
                            minLength: 10,
                            anchor: '100%'
                        },
                        {
                            xtype: 'textfield',
                            id: 'txtpwd',
                            inputType: 'password',
                            fieldLabel: 'Password',
                            allowBlank: false,
                            anchor: '100%'
                        }
                    ]
                },
                {
                    xtype: 'button',
                    id: 'btnSubmit',
                    margin: '0 0 5 200',
                    text: 'Submit',
                    listeners: 
                    {
                        click : function()
                        {
                            alert("hi");
                            //What to write here to add data of a controls in grid
                        }
                    }

                },

                {
                    xtype: 'gridpanel',
                    height: 174,
                    padding: 5,
                    width: 450,
                    title: 'My Grid Panel',
                    store: Ext.data.StoreManager.lookup('dataStore'),
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'name',
                            text: 'Name'
                        },
                        {
                            xtype: 'datecolumn',
                            dataIndex: 'dob',
                            text: 'DOB'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'email',
                            text: 'Email'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'mobile',
                            text: 'Contact no'
                        },

                    ],
                    viewConfig: {

                    }
                }
            ]
        });

        me.callParent(arguments);
    }
});

//        Ext.define('MyApp.MyWindow', {
//            extend: 'Ext.Window',
//            title: 'Welcome!',
//            initComponent: function () {
//                this.items = [{
//                    xtype: 'textfield',
//                    name: 'tfName',
//                    fieldLabel: 'Enter your name'
//                }], this.callParent(arguments);
//            }
//        });
       var win = Ext.create('MyApp.view.ui.MyWindow');
        win.show();
    }
}); 
```

**默认.aspx**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
     <link rel="stylesheet" type="text/css" href="extjs/resources/css/ext-all.css">

    <script type="text/javascript" src="extjs/ext-debug.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:14:38.230

Grid 附有一个商店。这部分你做对了。

Store 有一个记录数组。这部分你也做对了（至少我希望如此）。

当您想将记录添加到网格时 - 您需要将记录添加到商店。看方法`add()` [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store-method-add](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store-method-add)

您的表单尚未附加到模型，因此您可能必须先创建模型，使用表单中的值填充其字段，然后将其添加到商店。寻找`updateRecord()`方法 - [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Basic-method-updateRecord](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Basic-method-updateRecord) - 但是您需要将表单定义更改为映射它对模型或`getValue()`每个字段的单独调用。

在您尝试这样的事情之后 - 如果您仍有问题，请发布更新的代码。

最后一点 - 我假设您使用的是 ExtJs4.x，对吗？

# sql - 对不会被选择的属性使用 group by

> ID：10969840
> 
> 赞同：1
> 
> 时间：2012-06-10T15:13:37.803
> 
> 标签：sql

假设我有下表：

```
employee (id, name, surname, salary); 
```

问题是：我可以使用未出现在 select 子句中的属性对选择进行分组吗？

例如：

```
select count (*)
from employee
where salary > 40000
group by id 
```

我知道在这种情况下该`group by`子句是无用的，但这只是一个例子。它是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:22:03.473

它依赖于实现。例如，Oracle 要求在 'group by' 子句中命名的列出现在 select 语句中。其他的，包括 MySql，例如，没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-09T09:36:02.817

教授告诉我们，group by子句中写的属性应该自动添加到select子句中。很抱歉回答迟了，但我正在寻找别的东西，我看到了这个。

# c# - 省略代码：条件属性和预处理指令之间有什么区别？

> ID：10969841
> 
> 赞同：0
> 
> 时间：2012-06-10T15:13:41.307
> 
> 标签：c#, debugging, c-preprocessor, compiler-directives

我想知道有什么区别

```
#define MYSYMBOL

#if MYSYMBOL
public void foo () {

    // ...
}
#endif 
```

和

```
#define MYSYMBOL

[Conditional("MYSYMBOL")]
public void foo () {

    // ...
} 
```

?

也许这很明显，但如果有人能给我一个正确方向的提示，我将不胜感激:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T15:19:50.777

它们不一样。

Using`#if`完全删除了包含的代码，因此任何调用该方法的代码都不会编译，因为该方法已经消失。你也可以用这种方式包装任意数量的代码，而不仅仅是一个完整的方法。

Using`[Conditional]`意味着该方法不会在运行时被调用，但对它的调用仍然会编译（但调用不会在 IL 代码中发出）。同样，这样，该方法必须返回`void`并且没有任何`out`或`ref`参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T15:20:56.233

是的，有很大的不同：使用`#if`指令，方法根本不编译；它只是不存在于编译的代码中。有了这个`Conditional`属性，方法就被编译了，但它是否被调用取决于客户端代码中的符号。如果调用代码中未定义符号，则删除调用站点，并且不调用该方法。

例如，这对于将根据是否定义 DEBUG 符号来调用的库代码很有用。一个例子是[`Debug.Print`](http://msdn.microsoft.com/en-us/library/9azyssyh.aspx)方法：只有当您的项目使用 DEBUG 符号编译时才会调用它，但无论是否定义了符号，该方法仍然存在于 System.dll 中。

# paypal - PayPal 交易的直接 Web URL

> ID：10969845
> 
> 赞同：13
> 
> 时间：2012-06-10T15:14:18.840
> 
> 标签：paypal

实施 PayPal 的网站付款标准后，我想从我的网站后端链接到交易的详细信息视图 - 只是一个简单的直接 Web URL 到 PayPal 端。

我不知道为什么这很棘手，但是当我尝试从登录到 PayPal 系统中获取它时，它似乎非常模糊，以这种形式：

> history.paypal.com/uk/cgi-bin/webscr?cmd=_history-details&info=[看起来像某种 GUID]&ptype=4&history_cache=[巨大的编码字符串]

我猜这是设计使然，但如果您想要一种快速跳转到交易详细信息的方法，它并不是很有帮助。我已经`https://www.paypal.com/vst/id=1234`在搜索中看到的一些网站上尝试了推荐的表格（也使用 co.uk，因为我是英国的），但有人告诉我：

> 您链接中的交易 ID 无效。

即使直接从 PayPal 的后端订单列表中复制交易 ID，也会发生这种情况。

是否有可靠的方法直接链接到 PayPal 中的订单/交易详情页面？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-09T22:36:39.407

我找到了一个似乎有效的链接：

```
https://www.paypal.com/cgi-bin/webscr?cmd=_view-a-trans&id=XXXXXX 
```

对于沙盒：

```
https://sandbox.paypal.com/cgi-bin/webscr?cmd=_view-a-trans&id=XXXXXX 
```

在链接中，将 XXXXXX 替换为交易 ID。

这是从一封确认付款的电子邮件中得到的。当然，没有办法知道它会工作多长时间，它不完全是一个文档化的功能。贝宝可以随时改变它。但它至少应该在今天起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-02T10:15:59.280

最新的 URL 是[https://www.paypal.com/uk/cgi-bin/webscr?cmd=_view-a-trans&id=xxxxxx](https://www.paypal.com/uk/cgi-bin/webscr?cmd=_view-a-trans&id=xxxxxx)。

这是 2014 年 3 月的电子邮件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:21:25.167

在我看来，`info`您提供的 PayPal URL 中的参数是使用某种加密创建的，该加密告诉 PayPal 用户当前正在查看哪个交易。为了从您的后端直接创建一个链接到 PayPal 网站上的交易，您必须弄清楚他们是如何创建该参数的——这很可能很难做到。

最重要的是，没有简单的方法可以做你想做的事情。即使您要复制 PayPal 加密`info`参数的方式，PayPal 也可以随时更改加密或 URL 以查看交易，然后您将再次不走运。

正如@Louis 建议的那样，您可以寻求一种显示交易详细信息的替代方法（即升级您的PayPal 帐户并寻求使用API​​ 调用来获取交易详细信息或使用IPN）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T05:51:55.183

我不相信网站付款标准可以实现您的要求。但是，如果您决定谨慎地升级您的帐户，您可以使用额外的 API 调用，即[GetTransactionDetails](https://cms.paypal.com/mx/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_GetTransactionDetails)。

另一种方法是使用 PayPal 的即时付款通知 (IPN) 系统，让它在处理完交易后通知您的应用程序。然后，您可以在本地存储这些数据，并以编程方式将其从数据库中提取出来。

# php - SESSION destroys after POST

> ID：10969847
> 
> 赞同：0
> 
> 时间：2012-06-10T15:14:26.290
> 
> 标签：php

I'm developing a site for someone where users can post problems to a website and the Admin of the company can view the problems and give a solution for it. I use one page that takes care of the login handling and a mysql db. The problem is that i can log in, it shows me another panel(userpanel), but whatever other button i click, it takes me back to the login panel. It used to work as i was able to post data to my database. but suddenly after some changes on my website, it stopped working (and i can't find the problem anymore.)

When i log in, $_SESSION["LoggedIn"] gets a value and goes to the other panel on the same page with http post. when i click a button there, it seems that $_SESSION["LoggedIn"] is removed again because i check with isset if the user is logged in, otherwise it shows the userpanel.

```
//check user logged in
if (isset($_SESSION['LoggedIn'])) {

//Problem posted
if (isset($_POST["plaatsen"])) {
    //Processing - plaatsen
    postProblem();
    }
} else {
//do login thing 
```

}

I've attached my code here and i hope anyone can help me out.

Index.php: [http://pastebin.com/BZSirUTT](http://pastebin.com/BZSirUTT)

Functions.php: [http://pastebin.com/7Hknhm9r](http://pastebin.com/7Hknhm9r)

Website: [http://php.olvgroeninge.be/~sac.26A-07/php/Oefeningen/Oefening3/index.php](http://php.olvgroeninge.be/~sac.26A-07/php/Oefeningen/Oefening3/index.php) (it's in dutch)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T15:41:42.030

Sessions typically don't disappear by themselves. If they do, assuming you did run `session_start()` first, it can be due to:

1.  The session could not be saved on the server; this can be due to disc space or permission issues. It could also be due to **any page output** before the `session_start()` statement. Fortunately, you can see this by heightening the error reporting at the start of your script:

    `ini_set('display_errors', 'On'); error_reporting(-1);`

2.  The session could not be found; for session to perpetuate it requires the session id at every request. Depending on your settings, this can come from the URL (`PHPSESSID=xxx`) or cookies. In the latter case, you can verify that your browser sends the cookie by whipping up the browser developer tools.

3.  You destroyed the session yourself; calling `session_unset` or `session_destroy` will clear and remove the session respectively. Make sure this doesn't happen accidentally.

4.  The session is garbage collected; this normally only happens after some time of inactivity, configured using the relevant ini settings

5.  The session could not be read; just like #1 but for reading.

Hope at least one of these points helps you.

* * *

## Debugging the session

You can add the following code to all pages to isolate the problem:

```
echo '<pre>', htmlspecialchars(print_r($_COOKIE, true)), '</pre>';
session_start();
echo '<pre>Session = ', session_id(), '</pre>'; 
```

**Update** The problem is that the `index.php` doesn't set any cookies; OP created a separate small test page which does set cookies. Turns out the problem is #2 then :)

# iphone - 显示随机单词和用户名

> ID：10969848
> 
> 赞同：0
> 
> 时间：2012-06-10T15:14:33.107
> 
> 标签：iphone, objective-c, ios, xcode

为什么这不起作用？

```
NSString *username = [[GKLocalPlayer localPlayer] alias];

random(); { 
    int text = rand() % 4;
    switch (text) {
        case 0: mainTextController.text = username,@"LEOONS"; break;
        case 1: mainTextController.text = username,@"AAIING"; break;
        case 2: mainTextController.text = username,@"AALBES"; break;
        case 3: mainTextController.text = username,@"AALDĲK"; break;

        default:
        break;        }
} 
```

尝试了不同的设置，但不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T15:18:07.823

问题是`mainTextController.text = username,@"LEOONS";`。逗号不连接 Objective-C 字符串对象（也不是 C 字符串，为了记录）。你的意思是：

```
mainTextController.text = [username stringByAppendingString:@"LEOONS"]; 
```

（有关逗号在 C 中如何工作的更多信息：[http](http://en.wikipedia.org/wiki/Comma_operator) ://en.wikipedia.org/wiki/Comma_o​​perator 。我相信在这种情况下，您正在设置`text`为`username`然后评估，但不使用，的结果`@"LEOONS"`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T15:24:25.190

正如andyvn22 所说，您需要使用`-stringByAppendingString:`连接两个字符串。我想补充一点，您的问题可以像这样更好地解决：

```
NSString *username = [[GKLocalPlayer localPlayer] alias];
NSArray *randomAddons = [NSArray arrayWithObjects:
                         @"LEOONS",
                         @"AAIING",
                         @"AALBES"
                         /* Add as many as you want here.... */, nil];
int randomIndex = arc4random() % [randomAddons count];
mainTextController.text = [username stringByAppendingString:[randomAddons objectAtIndex:randomIndex]]; 
```

（有关信息，请参阅[此处](https://stackoverflow.com/questions/160890/generating-random-numbers-in-objective-c)`arc4random()`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T15:26:12.113

也许你想要更随机和更有未来的证据:-)

```
NSString *username = [[GKLocalPlayer localPlayer] alias];
int text = arc4random_uniform(4); //Don't do this: rand() % val or arc4random() % val
switch (text) {
    case 0: mainTextController.text = [NSString stringWithFormat:@"%@ %@ ",username,@"LEOONS"]; break;
    case 1: mainTextController.text = [NSString stringWithFormat:@"%@ %@ ",username,@"AAIING"]; break;
    case 2: mainTextController.text = [NSString stringWithFormat:@"%@ %@ ",username,@"AALBES"]; break;
    case 3: mainTextController.text = [NSString stringWithFormat:@"%@ %@ ",username,@"AALDĲK"]; break;
    default:
        break;
} 
```

但更好的是：

```
NSMutableArray* names = [[NSMutableArray alloc] init];
[names addObject:@"LEOONS"];
[names addObject:@"AAIING"];
[names addObject:@"AALBES"];
[names addObject:@"AALDĲK"];

NSString *username = [[GKLocalPlayer localPlayer] alias];
int text = arc4random_uniform([names count]); //again use arc4random_uniform
mainTextController.text = [NSString stringWithFormat:@"%@ %@ ",username,[names objectAtIndex:text]]; 
```

# ios - 从空字符串解析时如何使 NSURL 变量为零？

> ID：10969856
> 
> 赞同：3
> 
> 时间：2012-06-10T15:15:03.777
> 
> 标签：ios, nsurl

我是iOS开发的新手。有时我的 API 服务器会返回一个`nil`值。当我尝试创建`NSURL`实例时，这会引发错误。

这是条件：

```
NSString *tmpURL = nil;
NSURL *url = [NSURL URLFromString:tmpURL]; 
```

在这种情况下，它会使应用程序崩溃。我只想使`url`变量为零，而不是引发错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T15:17:35.573

怎么样：

```
NSString *tmpURL = nil;
NSURL *url = tmpUrl ? [NSURL URLFromString:tmpURL] : nil; 
```

# c# - 如何从pdf文件中查找页眉页脚

> ID：10969857
> 
> 赞同：2
> 
> 时间：2012-06-10T15:15:05.917
> 
> 标签：c#, java, c++, .net, pdf

我想从 pdf 文件中查找/提取页眉或页脚。我知道它可以通过 apose.net 库完成，但它不是免费的。我搜索了互联网，但找不到用于提取页眉或页脚的免费库。

> 许多像 itextsharp 这样的库只能添加页眉或页脚，但不能提取或查找页眉或页脚。

我没有找到任何方法来提取页眉或页脚。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:14:40.753

页眉和页脚在整个文档上应该具有相同的结构，所以我认为这是一个很好的开始方式。您可以**搜索**一些**模式**，然后提取页眉/页脚。然后你可以使用库`itextsharp`来提取这个值，有用的方法：

`PdfTextExtractor.GetTextFromPage(reader, fromPage, toPage);`

# jquery - Javascript 日期格式 2012-04-01T23:00:00Z

> ID：10969858
> 
> 赞同：1
> 
> 时间：2012-06-10T15:15:26.600
> 
> 标签：jquery

我的 jQuery 中有以下日期格式。但是当我尝试使用 datepicker 进行 dateparse 时，它​​表明该对象不受支持。我认为日期格式不正确。

以下行在 Chrome 和 Firefox 中可以正常工作，但在 IE 中不行。我得到 NaN 作为结果返回：

```
var newdate = getNewDate(value);

function getNewDate(dateValue) {
    var newDate = new Date(dateValue);
    var cDate  = newDate.getDate();
    var cMonth = newDate.getMonth() + 1; // have to add one as January starts from 0
    var cYear = newDate.getFullYear();

    return cDate + "/" + cMonth + "/" + cYear;
}; 
```

当我这样做`getDate`时，它会为每个获取返回，`NaN`即和。`getDate``getMonth``getFullYear`

我只需要获取日期并以这种格式返回`dd/mm/yyyy`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:20:45.190

试试这个，

[演示](http://jsfiddle.net/MCXCn/)

```
var value = '2012-04-01T23:00:00Z';
var newdate = getNewDate(value);
alert(newdate);
function getNewDate(dateValue) {
    var newDate = new Date(dateValue.substring(0,dateValue.indexOf('T')).replace(/-/g,'/'));
    var cDate  = newDate.getDate();
    // have to add one as January starts from 0
    var cMonth = newDate.getMonth() + 1; 
    var cYear = newDate.getFullYear(); 
    return cDate + "/" + cMonth + "/" + cYear;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T15:33:22.993

您可以拆分 amd 子字符串函数

函数 getNewDate(dateValue) {

```
var dataAarr = dateValue.split('-'); 

   return dataAarr[2].substring(0,2) + "/" + dataAarr[1] + "/" + dataAarr[0];
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T15:31:38.927

[这里的](http://jsfiddle.net/justeric/nCE9u/58/)工作示例

```
var d = new Date();

var month = d.getMonth() + 1;
var day = d.getDate();

var output = (('' + day).length < 2 ? '0' : '') + day + '/' + (('' + month).length < 2 ? '0' : '') + month + '/' + d.getFullYear(); 
```

# javascript - Mac Store 应用程序：用 JavaScript 编写

> ID：10969861
> 
> 赞同：3
> 
> 时间：2012-06-10T15:15:41.453
> 
> 标签：javascript, macos

## 问题

我有一个 HTML5/JavaScript 应用程序。我想把它提交给苹果商店。

无论如何我可以以某种方式将它嵌入到 Safari/Webkit 中，并让苹果接受它作为应用程序吗？

## 语境

这个项目最初是一个网络应用程序，但我发现我喜欢 javascript/SVG 远远超过 Objective-C。因此，我更愿意继续使用 JavaScript 进行开发，但不知何故能够提交到苹果 Mac 商店。

## 说明：

我的目标是 Mac 商店，而不是 iOS 商店。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:18:47.113

这就是phonegap的全部意义所在。看看[http://www.phonegap.com](http://www.phonegap.com)。它是一个开源项目，用于在 html5 中编写跨平台移动应用程序，可以在许多不同的平台上运行。

那里有一个名为 phonegap-mac 的端口，用于苹果桌面。（参见：[https](https://github.com/shazron/phonegap-mac) ://github.com/shazron/phonegap-mac ）我已经多次使用它来将 html5 应用程序作为 Mac 桌面上的“应用程序”托管。我现在不知道桌面应用程序的应用程序商店是否有任何限制不允许phonegap，但一般来说不应该有。

# php - Magento - 隐藏客人结帐的选项

> ID：10969863
> 
> 赞同：1
> 
> 时间：2012-06-10T15:15:50.403
> 
> 标签：php, magento

如何确定在计费阶段选择的结帐方式？

我们有一个插件，显示客户在从我们的网站结账时选择客户组的选项。

问题是如果他们想以访客身份结帐，我们希望隐藏此选项，因此该选项仅在他们正在注册或登录时可见。

我尝试使用 isCustomerLoggedIn() 函数来执行此操作，但是当他们选择注册时不会显示该选项。

如果客户选择了注册或访客结帐，有谁知道在persistent/checkout/onepage/billing.phtml 模板中告知的方法？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:08:34.650

我认为，最好将问题表述为“如何确定在计费阶段选择的结帐方式？”

无论如何，您应该能够通过以下方式判断选择了哪种结帐方法

```
$this->getQuote()->getCheckoutMethod() 
```

所以：

```
if($this->getQuote()->getCheckoutMethod() == "register" || 
Mage::getSingleton('customer/session')->isLoggedIn() )
{
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:56:50.260

您应该能够通过以下方式判断选择了哪种结帐方式

```
$this->getQuote()->getCheckoutMethod() 
```

所以：

```
if($this->getQuote()->getCheckoutMethod() == "register" || 
Mage::getSingleton('customer/session')->isLoggedIn() )
{
... 
```

# python - 如何通过 ECDH 加密和发送数据，只提供一个公钥（peerkey）？

> ID：10969867
> 
> 赞同：2
> 
> 时间：2012-06-10T15:16:13.073
> 
> 标签：python, m2crypto, elliptic-curve

我正在编写一个需要非对称加密的程序。我的方法是使用 Python 的 M2Crypto，我选择了 ECDH 作为算法。但是，我也希望该过程像 RSA 一样简单，它只需要我们接收器的公钥。ECDH 不是。它的公钥似乎必须首先与发送者自己的公钥结合，从而计算共享秘密并完成所有工作。

不管效率如何，我确实想要这样的解决方案，这样如果有人想给我发消息，我的 EC 公钥就会被发布，发件人必须：

1.  获取他/她自己的 EC 私钥
2.  把这个私钥和我的公钥结合起来，计算一个共享的秘密
3.  使用秘密和 AES 或其他对称密码加密消息
4.  向我发送密文和派生的公钥（来自此私钥）。

但这里有一个问题。我观察到只有当任何一方基于相同的曲线参数生成他们的密钥时，才存在成功的密钥交换。但是，除非我提供有关我的公钥所基于的曲线的其他信息，否则还有其他方法可以解决这个问题吗？公钥加载有：

```
M2Crypto.EC.load_pub_key([filename]) 
```

并返回一个 EC.EC_pub 实例。我认为关于曲线的信息应该隐藏在这种情况下的某个地方，但我还没有找到。

请指出我遗漏的内容，或者我的解决方案是否错误或可以更简单，或任何其他建议。谢谢。

# django - 在美国境外使用 Django 付款

> ID：10969875
> 
> 赞同：0
> 
> 时间：2012-06-10T15:16:57.620
> 
> 标签：django, payment-gateway

我在 Django 中开发了一个 Web 应用程序，它接受 paypal 中的付款（和定期付款）。应用程序工作正常，但用户鼓励我考虑其他付款方式。

问题是我尝试了一些，或者 (a) 没有找到可以使用的 API，或者 (b) 没有在美国以外提供他们的服务（例如 stripe 或 BrainTree[*]）。

所以我的问题是，你知道一种可以像 django-paypal 一样简单地与 django 集成并为美国以外的公司工作的支付方式吗？

克里斯

[*] 虽然 BT 在美国以外的地区不提供服务，但我可以选择就此与他们联系。我联系了他们，我正在等待他们的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:58:56.090

您可能想查看[Ogone](http://www.ogone.com/)。[我在这里](https://github.com/tschellenbach/Django-ogone)找到了一个将它与 Django 集成的项目。

# google-docs-api - 从 Google Docs 获取可用存储空间

> ID：10969884
> 
> 赞同：2
> 
> 时间：2012-06-10T15:17:56.473
> 
> 标签：google-docs-api, google-drive-api

我正在构建一个涉及 Google Docs API 的 Java 应用程序。我正在使用旧的 API（[Google Docs API](http://code.google.com/p/gdata-java-client/source/browse/trunk/java/#java)），因为新的 API 要复杂得多，我花了几个小时试图让它工作。

无论如何，我使用了附加到 API 的示例，并让它工作，因为我可以获得文件列表，下载/上传/删除文件。

如何获取可用存储空间（云存储中的剩余空间）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:24:34.193

新的 Drive API v2 在 About feed 中包含总存储量和可用存储量：[https ://developers.google.com/drive/v2/reference/about](https://developers.google.com/drive/v2/reference/about)

# c++ - boost::atomic 真的可以通过减少多线程中系统调用（在互斥体/信号量中）的开销来提高性能吗？

> ID：10969889
> 
> 赞同：3
> 
> 时间：2012-06-10T15:18:34.040
> 
> 标签：c++, multithreading, boost, pthreads, atomic

我正在尝试比较 Linux 上 boost::atomic 和 pthread 互斥锁的性能：

```
 pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER ;
 int g = 0 ;

 void f()
 {

    pthread_mutex_lock(&mutex);
    ++g;
    pthread_mutex_unlock(&mutex);
    return ;
 }
 const int threadnum = 100;
 int main()  
 {
    boost::threadpool::fifo_pool tp(threadnum);
    for (int j = 0 ; j < 100 ; ++j)
    {
            for (int i = 0 ; i < threadnum ; ++i)
                    tp.schedule(boost::bind(f));
            tp.wait();
    }
    std::cout << g << std::endl ;
    return 0 ; 
 } 
```

是时候了：

```
 real    0m0.308s
 user    0m0.176s
 sys     0m0.324s 
```

我也试过 boost::atomic:

```
 boost::atomic<int> g(0) ;

 void f()
 {

      ++g;
    return ;
  }
  const int threadnum = 100;
  int main()
  {
    boost::threadpool::fifo_pool tp(threadnum);
    for (int j = 0 ; j < 100 ; ++j)
    {
            for (int i = 0 ; i < threadnum ; ++i)
                    tp.schedule(boost::bind(f));
            tp.wait() ;
    }
    std::cout << g << std::endl ;
    return 0 ;
   } 
```

是时候了：

```
 real    0m0.344s
 user    0m0.250s
 sys     0m0.344s 
```

我多次运行它们，但时间结果相似。

atomic 真的可以帮助避免由 mutex/semaphore 引起的系统调用开销吗？

任何帮助将不胜感激。

谢谢

**更新：将循环数增加到 1000000**

```
 for (int i = 0 ; i < 1000000 ; ++i)
    {
            pthread_mutex_lock(&mutex);
            ++g;
            pthread_mutex_unlock(&mutex);
    } 
```

类似于 boost::atomic 。

通过“time ./app”测试时间

使用提升：原子：

```
real    0m13.577s
user    1m47.606s
sys     0m0.041s 
```

使用 pthread 互斥锁：

```
real    0m17.478s
user    0m8.623s
sys     2m10.632s 
```

似乎 boost:atomic 更快，因为 pthread 使用更多时间进行系统调用。

为什么 user time + sys 大于 real time ？

欢迎任何意见！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T15:27:15.467

我猜你没有正确测量原子与互斥锁所花费的时间。相反，您正在测量 boost 线程池管理所产生的开销：设置新任务 f() 比执行任务本身需要更多时间。

我建议你在 f() 中添加另一个循环来获得类似的东西（对原子版本做同样的事情）

```
 void f()
 {
    for(int i = 0  ; i < 10000 ; i++) {
      pthread_mutex_lock(&mutex);
      ++g;
      pthread_mutex_unlock(&mutex);
    }
    return ;
 } 
```

如果有变化，请发布分数，我很想看看有什么不同！

# php - 使用 git 版本控制进行 PHP 开发

> ID：10969893
> 
> 赞同：3
> 
> 时间：2012-06-10T15:18:55.713
> 
> 标签：php, mysql, git, apache, version-control

是否可以对 PHP + MySQL + Apache 项目进行版本控制？它是否可以跟踪数据库中的更改，例如，如果我添加了一个新表，我可以提交吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T15:24:18.917

将数据库保留在版本控制中是不正常的。一些开发人员使用 sqlite 数据库进行开发，以便可以将其签入版本控制，但这可能会导致问题，因为 sqlite 语法可能与 MySQL 不同。

但是，您可以保留数据库架构和迁移源控制。看看[mysql-php-migrations 之](https://github.com/davejkiger/mysql-php-migrations)类的项目就可以开始了。

[在http://net.tutsplus.com/tutorials/other/easy-version-control-with-git/](http://net.tutsplus.com/tutorials/other/easy-version-control-with-git/)上有一个很好的关于在 Git 中使用 PHP 的教程——这应该可以帮助你入门。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T15:25:31.770

将 Git 用于您的 PHP 脚本没有问题，但是跟踪数据库的更改有点棘手。如果您有创建数据库结构的 SQL 脚本，那么这些脚本可以毫无问题地进行版本控制。否则，您可以`mysqldump`在进行任何更改后将结构输出到 SQL 脚本：

```
mysqldump -d -h localhost -u root -pmypassword mydatabase > dumpfile.sql 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T15:20:48.047

您可以使用 git 来跟踪创建必要数据库结构的 PHP 脚本和 SQL 脚本。这些 SQL 脚本当然可以进行版本控制，并在任何给定状态下重新创建数据库模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T15:21:21.677

Git本质上是SCM，意思是**源代码**控制。mysql 中的表存储为二进制文件，所以这不是一个好主意。

但是，您可以存储**创建**这些表的 SQL 查询，并允许您在需要时重新创建它们。

至于php，一切都会好的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-05T08:08:44.193

我最近发布了一个非常简单的 shell 脚本，它有助于将 MySQL 数据库的更改保持在版本控制之下。

[https://github.com/stevecomrie/mysql-version-control](https://github.com/stevecomrie/mysql-version-control)

# ruby - 提交表单后没有路线匹配 [POST] "/story/new"

> ID：10969908
> 
> 赞同：1
> 
> 时间：2012-06-10T15:20:54.333
> 
> 标签：ruby, ruby-on-rails-3, rails-routing

我刚刚开始“在 Rails 上构建你自己的 Ruby”，我不得不经常使用 Google，因为这本书似乎有很多地方的代码不起作用。这一次，我找不到答案。好的，这就是交易。我有一个看起来像这样的表格：

`new.html.erb`：

```
<%= form_for :story do |f| %>
<p>
    name:<br />
    <%= f.text_field :name %>
</p>

<p>
    link: <br />
    <%= f.text_field :link %>
</p>

<p>
    <%= submit_tag %>
</p>

<% end %> 
```

当我去的时候它显示得很好`localhost:3000/story/new`。问题是，当我尝试在表单中输入内容并按“提交”时，我收到此错误：

```
Routing Error

No route matches [POST] "/story/new" 
```

我的`routes.rb`样子是这样的：

```
FirstApp::Application.routes.draw do
    resources :story 
```

`story_controller`看起来像这样：

```
 def new
    @story = Story.new(params[:story])
    if request.post?
      @story.save
    end
  end 
```

的`story_controller`东西`new`是直接出书。[我想我可能在这里](https://stackoverflow.com/questions/10863673/routing-error-no-route-matches-post-for-new)有一个解决方案，但没有骰子。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:10:04.657

我猜你的意思是（注意 at 符号）：

```
<%= form_for @story do |f| %> 
```

这可能会解决您的路由问题，但正如约翰所提到的，您的控制器操作也有点偏离。该`new`操作应该只加载一个虚拟模型并显示 new.html.erb 页面 - 保存应该在一个单独的操作中进行，称为`create`.

希望这可以帮助！

**编辑：**最小控制器代码：

```
class StoriesController < ApplicationController
    def new
        #Make a dummy story so any default fields are filled correctly...
        @story = Story.new
    end

    def create
        @story = Story.new(params[:story])
        if(@story.save)
            #Saved successfully; go to the index (or wherever)...
            redirect_to :action => :index
        else
            #Validation failed; show the "new" form again...
            render :action => :new
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-22T05:25:06.077

这是您（和我）从指南中遗漏的部分：

> 但是，这种形式存在一个问题。如果您检查生成的 HTML，通过查看页面的源代码，您将看到表单的 action 属性指向 /articles/new。这是一个问题，因为此路由会转到您当前所在的页面，并且该路由仅应用于显示新文章的表单。
> 
> **表单需要使用不同的 URL 才能转到其他地方。** **这可以通过 form_for 的 :url 选项非常简单地完成。** 通常在 Rails 中，用于提交此类新表单的操作称为“创建”，因此表单应指向该操作。
> 
> **编辑 app/views/articles/new.html.erb 中的 form_for 行，如下所示：**

```
<%= form_for :story, url: stories_path do |f| %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T18:22:09.180

首先，Rails 在使用单数和复数名称时依赖于约定而不是配置。如果要遵循约定，则必须更改 to 中的行`routes.rb`，`resources :stories`这将生成以下路线：

```
 stories GET    /stories(.:format)          stories#index
           POST   /stories(.:format)          stories#create
 new_story GET    /stories/new(.:format)      stories#new
edit_story GET    /stories/:id/edit(.:format) stories#edit
     story GET    /stories/:id(.:format)      stories#show
           PUT    /stories/:id(.:format)      stories#update
           DELETE /stories/:id(.:format)      stories#destroy 
```

请注意，在这种情况下，您必须将控制器重命名为`StoriesController`. 但是，您的`routes.rb`has`resources :story`会生成以下路线：

```
story_index GET    /story(.:format)          story#index
            POST   /story(.:format)          story#create
  new_story GET    /story/new(.:format)      story#new
 edit_story GET    /story/:id/edit(.:format) story#edit
      story GET    /story/:id(.:format)      story#show
            PUT    /story/:id(.:format)      story#update
            DELETE /story/:id(.:format)      story#destroy 
```

如您所见，确实没有`POST /story/new`. 我想，你得到的错误是由你的控制器中的以下代码触发的：

```
if request.post?
  @story.save
end 
```

`POST`这是完全错误的，因为您试图在路由到的操作中检查请求`GET`。只需从您的`new`操作中删除此代码并将`create`操作添加到您的操作中，`StoryController`如下所示：

```
def create
  @story = params[:story]
  if @story.save
    redirect_to @story, notice: "Story created"
  else
    render action: "new"
  end
end 
```

这现在应该可以解决您的问题。但我强烈建议您使用复数`stories`作为您的资源，因为它会再次困扰您。

# java - 使用 android 相机拍照后将用户带回之前的活动

> ID：10969910
> 
> 赞同：0
> 
> 时间：2012-06-10T15:20:58.907
> 
> 标签：java, android, android-camera, android-activity

我正在android中开发与相机相关的应用程序。我想要的是当用户拍照时，他应该立即被带到他之前的活动中。现在我的代码所做的是当用户拍照时，屏幕底部会出现两个按钮，即保存和丢弃。所以我不想那样。拍摄照片时，用户应直接导航到上一个活动。怎么能做到这一点？

这是我的代码

```
public class CameraActivity extends Activity implements View.OnClickListener {
ImageView iv;
Button bCapture, bSetWall;
Intent i;
int CameraResult = 0;
Bitmap bmp;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initialize();
    InputStream is = getResources().openRawResource(R.drawable.ic_launcher);
    bmp = BitmapFactory.decodeStream(is);
}

private void initialize() {
    iv = (ImageView)findViewById(R.id.ivCamera);
    bCapture = (Button)findViewById(R.id.bCapture);
    bSetWall = (Button)findViewById(R.id.bSetWall);
    bCapture.setOnClickListener(this);
    bSetWall.setOnClickListener(this);
}

public void onClick(View v) {
    switch(v.getId()) {
    case R.id.bCapture:
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, CameraResult);
        break;
    case R.id.bSetWall:
        try {
            getApplicationContext().setWallpaper(bmp);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break;
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:37:30.173

您现在拥有的代码将使用现有的相机应用程序拍摄照片。也就是说，它正在使用一个已经存在的 Activity，该 Activity 属于安装在您设备上的某个相机应用程序。

也就是说，无法操作`Activity`属于其他应用程序的 s。您必须改为实现自己的[相机活动](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/CameraPreview.html)。

# c# - 计算 CPU 使用率

> ID：10969911
> 
> 赞同：5
> 
> 时间：2012-06-10T15:20:59.493
> 
> 标签：c#, .net, algorithm, cpu-usage

我们的商业模式要求根据 CPU 小时数/使用情况向用户收费。

最初我在考虑简单地使用`StopWatch`然后使用经过时间作为度量单位。

但是我看到这种方法的问题是，在白天有 5000 个用户访问服务器时，同一段代码的运行时间会比夜间只有 50 个用户访问服务器的时间要长。

另一种选择是根据对传入的数据用户执行的迭代向用户收费。这种方法也存在一些问题。

*   有些函数不需要对数据进行任何迭代。
*   CPU 使用率`x + y`低于`x + y * z`.

什么是在 C#/.Net 中计算 CPU 使用率信息的好方法，以便无论服务器的负载如何，对于相同操作的所有用户都保持相同？

可能，实际装配级指令的总量？有没有办法在 C# 中获取这些信息？

有什么其他的方法，可以分享推荐吗？

非常感谢您对此进行调查。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-10T15:27:54.873

执行用户想要在单独[进程](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)中运行的任何内容，并在进程完成后查找其[CPU 时间](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.totalprocessortime)。这也与挂钟时间不同，因为它只考虑进程在 CPU 上实际运行的时间。

对于那些不愿意阅读文档的人来说，最小的例子：

```
ProcessStartInfo psi = new ProcessStartInfo(@"C:\Blah\Foo.exe");
Process p = Process.Start(psi);
p.WaitForExit();
TimeSpan time = p.TotalProcessorTime;
p.Close(); 
```

不过，您可能希望异步运行它。

无需估计、猜测或黑魔法。无论如何，您无法可靠地计算它。

# c# - 如何让 2 个用户控件同步或访问 WPF 中的按钮/代码隐藏实例？

> ID：10969918
> 
> 赞同：2
> 
> 时间：2012-06-10T15:21:48.997
> 
> 标签：c#, wpf, user-controls

我的项目有问题。这是我的解决方案资源管理器：

![在此处输入图像描述](../Images/823a8800dbbf67694f67cd29f1377b24.png)

BLA 是一个示例 UserControl，它被加载到 MainWindow Grid 中两次：

```
<Window x:Class="UserControlWechseln.MainWindow"
        xmlns:local="clr-namespace:UserControlWechseln"
        Title="MainWindow" Height="428" Width="1195" xmlns:am="http://schemas.amcharts.com/charts/wpf/2009/xaml">
    <Grid Height="1000" Width="1000">            
        <Grid Height="500" HorizontalAlignment="Left" Margin="12,31,0,0" Name="grid1" VerticalAlignment="Top" Width="142">
            <local:BLA Margin="-3,-17,-270,17" />
        </Grid> 

        <Grid Height="500" HorizontalAlignment="Right" Margin="0,6,31,0" Name="grid2" VerticalAlignment="Top" Width="402">
            <local:BLA />
        </Grid>    
    </Grid>
</Window> 
```

BLA UserControl 的 XAML 代码如下所示：

```
<UserControl x:Class="UserControlWechseln.BLA"
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid Name="Bla">
        <Button Content="House" Height="23" HorizontalAlignment="Left" Margin="64,237,0,0" Name="button1" VerticalAlignment="Top" Width="75"  Click="ButtonClick" />
        <Button Content="Soccer" Height="23" HorizontalAlignment="Left" Margin="169,237,0,0" Name="button2" VerticalAlignment="Top" Width="75" Click="ButtonClick" />    
    </Grid>
</UserControl> 
```

BLA UserControl 的 C# 代码如下所示：

```
public partial class BLA : UserControl {
        public BLA() {
            InitializeComponent();
        }

        private void ButtonClick(object sender, RoutedEventArgs e) {
            Button btn = sender as Button;
            Bla.Children.Clear();

            if (btn.Content.ToString() == "House") {
                Haus uc1 = new Haus();
                Bla.Children.Add(uc1);
            } else if (btn.Content.ToString() == "Soccer") {
                Fussball uc2 = new Fussball();
                Bla.Children.Add(uc2);                
            }
        }

        private void Window_Loaded(object sender, RoutedEventArgs e) {
        }

        private void button1_Click(object sender, RoutedEventArgs e) {
        }

        private void button1_Click_1(object sender, RoutedEventArgs e) {
        }

        private void button1_Click_2(object sender, RoutedEventArgs e) {
        }

        private void button2_Click(object sender, RoutedEventArgs e) {
        }
    }
} 
```

现在的问题是你得到这个视图：

![在此处输入图像描述](../Images/4a45447c67c3e53b919f767d72a585c3.png)

是否可以触发一次主页按钮并在两个用户控件“BLA”上显示 Img？它们显然是相同的 UserControl。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:58:20.867

它们是您的 UserControl 的不同实例，它们不知道另一个存在。您将需要创建`Properties`和`Events`. 我确信可能有更好的方法，但这是我拼凑起来展示的东西（我还重命名了你的一些类，因为我没有你所拥有的相同命名空间）。此外，当您更改图像时，您正在清除 UserControl 中的所有控件。

**编辑**添加完整示例

**用户控制**

```
namespace WpfApplication1{

    /// <summary>
    /// Interaction logic for Bla.xaml
    /// </summary>
    public partial class Bla : UserControl
    {
        public event RoutedEventHandler changeHaus
        {
            add { AddHandler(myEvents.changeHausEvent, value); }
            remove { RemoveHandler(myEvents.changeHausEvent, value); }
        }

        public event RoutedEventHandler changeSoccer
        {
            add { AddHandler(myEvents.changeSoccerEvent, value); }
            remove { RemoveHandler(myEvents.changeSoccerEvent, value); }
        }

        public Bla()
        {
            InitializeComponent();
        }
        private void ButtonClick(object sender, RoutedEventArgs e) { 
            Button btn = sender as Button; 
            if (btn.Content.ToString() == "House")
            {
                SetHaus();
                RoutedEventArgs ea = new RoutedEventArgs(myEvents.changeHausEvent);
                RaiseEvent(ea);
            }
            else if (btn.Content.ToString() == "Soccer")
            {
                SetSoccer();
                RoutedEventArgs ea = new RoutedEventArgs(myEvents.changeSoccerEvent);
                RaiseEvent(ea);
            }
        } 

        public void SetHaus()
        {
            display.Fill = new SolidColorBrush(Colors.Blue);
        }

        public void SetSoccer()
        {
            display.Fill = new SolidColorBrush(Colors.Red);
        }
    }
    public static class myEvents
    {
        public static  RoutedEvent changeHausEvent = EventManager.RegisterRoutedEvent("changeHaus",RoutingStrategy.Tunnel,typeof(RoutedEventHandler), typeof(Bla));
        public static RoutedEvent changeSoccerEvent = EventManager.RegisterRoutedEvent("changeSoccer", RoutingStrategy.Tunnel, typeof(RoutedEventHandler), typeof(Bla));

    }
} 
```

**用户控件 Xaml**

```
<UserControl x:Class="WpfApplication1.Bla"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid Name="bla">
        <Grid.RowDefinitions>
            <RowDefinition Height="3*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Rectangle Name="display" Height="223" Grid.Row="0" />
        <Button Grid.Row="1" Content="House" Height="23" HorizontalAlignment="Left" Margin="64,25,0,0" Name="button1" VerticalAlignment="Top" Width="75"  Click="ButtonClick" />
        <Button Grid.Row="1" Content="Soccer" Height="23" HorizontalAlignment="Left" Margin="169,25,0,0" Name="button2" VerticalAlignment="Top" Width="75" Click="ButtonClick" />
    </Grid>

</UserControl> 
```

**主窗口**

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void bla1_changeHaus(object sender, RoutedEventArgs e)
        {
            bla2.SetHaus();
        }

        private void bla1_changeSoccer(object sender, RoutedEventArgs e)
        {
            bla2.SetSoccer();
        }

        private void bla2_changeHaus(object sender, RoutedEventArgs e)
        {
            bla1.SetHaus();
        }

        private void bla2_changeSoccer(object sender, RoutedEventArgs e)
        {
            bla1.SetSoccer();
        }
    }
} 
```

**主窗口 Xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" xmlns:my="clr-namespace:WpfApplication1">
    <Grid>
        <my:Bla HorizontalAlignment="Left" Margin="0,12,0,0" x:Name="bla1" VerticalAlignment="Top" changeHaus="bla1_changeHaus" changeSoccer="bla1_changeSoccer" />
        <my:Bla HorizontalAlignment="Left" Margin="247,12,0,0" x:Name="bla2" VerticalAlignment="Top" changeHaus="bla2_changeHaus" changeSoccer="bla2_changeSoccer" />
    </Grid>
</Window> 
```

# objective-c - 不能用简单的录音机录音或播放？

> ID：10969922
> 
> 赞同：0
> 
> 时间：2012-06-10T15:22:32.853
> 
> 标签：objective-c

我有**两个**班级，一个记录和一个播放器。在我的主要场景中，我创建了它们的一个实例并播放和录制。但是，正如我所见，它只记录并且不播放（文件不存在！）

这是两者的代码：

```
-(void)record {
    NSArray *dirPaths;
    NSString *docsDir;
    NSString *sound= @"sound0.caf" ;
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) ;
    docsDir = [dirPaths objectAtIndex:0];
    NSString *soundFilePath = [docsDir stringByAppendingPathComponent:sound];
    NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

    NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
      [NSNumber numberWithFloat: 44100.0], AVSampleRateKey,
      [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
      [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
      [NSNumber numberWithInt: AVAudioQualityMax],
      AVEncoderAudioQualityKey, nil];

    NSError *error;
    myRecorder = [[AVAudioRecorder alloc] initWithURL:soundFileURL settings:settings error:&error];

    if (myRecorder)  {
        NSLog(@"rec");
        [myRecorder prepareToRecord];
        myRecorder.meteringEnabled = YES;
        [myRecorder record];
    } else
        NSLog( @"error"  );
} 
```

**我可以看到的日志** `rec`。

```
-(void)play {
  NSArray *dirPaths;
  NSString *docsDir;
  dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
    NSUserDomainMask, YES);
  docsDir = [dirPaths objectAtIndex:0];
  NSString *soundFilePath1 =  @"sound0.caf" ;
  NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath1];
  BOOL isMyFileThere = [[NSFileManager defaultManager] fileExistsAtPath:soundFilePath1];
  if(isMyFileThere) {
    NSLog(@"PLAY"); 
    avPlayer1 = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:NULL];
    avPlayer1.volume = 8.0;
    avPlayer1.delegate = self;
    [avPlayer1 play];
 }
} 
```

**我没有看到日志** `PLAY`！

我称他们为：

```
recInst=[recorder alloc]; //to rec
[recInst record];

plyInst=[player alloc]; //play
[plyInst play]; 
```

并停止录音机：

```
- (void)stopRecorder {
    NSLog(@"stopRecordings");
    [myRecorder stop];
    //[myRecorder release];    
} 
```

这里有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:36:56.430

在您的记录方法中，您将文件名附加到路径中：

```
NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"sound0.caf"]; 
```

您不会在 play 方法中执行此操作，因此它会在当前工作目录的任何位置而不是 Documents 目录中查找文件。

你需要做：

```
NSString *soundFilePath1 = [docsDir stringByAppendingPathComponent:@"sound0.caf"]; 
```

代替：

```
NSString *soundFilePath1 =  @"sound0.caf" ; 
```

还有一点需要注意：soundFilePath 和 soundFilePath1 都是局部变量。因此，它们在各自的方法之外是不可见的。因此，没有必要给它们起不同的名称。您可以将它们都称为 soundFilePath 并且不会发生冲突。

# adt - adt 与 eclipse 一起使用

> ID：10969925
> 
> 赞同：1
> 
> 时间：2012-06-10T15:23:19.973
> 
> 标签：adt

我无法让 Eclipse (v3.7.2) 和 ADT 插件 (v18.0.0) 一起玩。我正在尝试设置使用 RFO BASIC。

这是关于我如何进步的更新。我卸载了 Eclipse 和 Androide SDK。然后我将一个新的 Eclipse 安装解压缩到 C:\Eclipse。使用 Windows .EXE 安装程序，我安装了 Android SDK，选择安装到 C:\Android\android-sdk 而不是默认的 C:\Program Files\Android\android-sdk。

我下载了以下平台： 4.0.3 API 15 4.0 API 14 1.5 API 3

这些我将它们解压缩到 Android 的 \platform 文件夹中。然后我启动了 SDK Manager，所有这 3 个都出现了。我“全选”并进行了“重新加载”，以确保它们被识别。好的，到目前为止，一切都很好。开始设置 Eclipse ADT 插件。

启动 Eclipse，进入“Help -> Install New Software”，点击“Add”，点击“Archive”按钮，将其命名为“Android Plugin”并将其指向我放置在“ADT-18.0.0.zip” C:\Eclipse 文件夹。在“可用软件”对话框中，单击“开发者工具”并单击“下一步”，接受许可协议，单击“完成”。接下来是一系列对话框，其中一个标题为“安装 -> 安装详细信息”。它列出了以下4项：

Android DDMS Android 开发工具 Android Hierachy Viewer Android Traceview

这就是我遇到麻烦的地方。我选择所有 4 并且“下一步”按钮保持灰色，并显示此消息：

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Android 开发工具 18.0.0.v201203301601-306762

现在，如果我取消选择 Android 开发工具，对话框允许我继续，其他 3 项似乎已安装好。

如果此时我转到“Window -> Preferences”，Android**不会**出现在左侧面板中。

我还缺少一个组件吗？如果是这样呢？？？如果没有，有没有人看到我做错了什么？？？

谢谢，比尔

# c++ - 在 Ubuntu 中使用 rtMidi 产生 midi 声音

> ID：10969930
> 
> 赞同：0
> 
> 时间：2012-06-10T15:24:27.813
> 
> 标签：c++, midi

我在我的 linux 机器上播放 midi 声音时遇到问题。使用 RtMidi 和 C/C++ 我生成了三个 midi 消息，即使我尝试了所有可能的端口（我探查了所有输出端口），我似乎无法从中听到声音。我应该手动将这些胆小的端口之一连接到扬声器吗？如何？

预先感谢

编辑1：

我正在尝试实施 Chris Arndt [在这里](https://stackoverflow.com/questions/8330846/how-to-connect-to-alsa-server-in-this-case-timidity-in-ubuntu-using-c)描述的解决方案：

“看看 RtMidi 库。它是跨平台的（Win、OS X、Linux、SGI），用 C++ 编写，易于编译和包含在您的项目中。

然后启动 Timidity 作为服务器（Ubuntu 包含一个用于此的初始化脚本），它将为 Timidity 创建几个 ALSA 序列器客户端端口。在 RtMidi 中打开这些端口之一作为输出并开始发送 midi 消息。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:50:41.707

问题来自 rtMidi 的在线示例，当我使用文档中的示例时，它运行良好。

# mysql - 如何将 CSV 列批量加载到 MySQL 表中

> ID：10969931
> 
> 赞同：0
> 
> 时间：2012-06-10T15:24:31.490
> 
> 标签：mysql, bash, csv

我有许多 csv 文件，它们将构成 mysql 数据库的基础。我的问题如下：

输入 CSV 文件的格式为：

时间 | 值参数 1 | 价值参数 2 | 价值参数 3 | 等等。
0.00001 | 10 | 20 | 30 | 等等

这不是我想在数据库中使用的结构。在那里，我想要一个用于所有数据的大表，其结构如下：

时间 | 参数 | 价值 | 计量单位 | 版本

这意味着我想将 CSV 中的 TIME 和 VALUE PARAM 1 的组合插入到表中，然后将 TIME 和 VALUE PARAM 2 的组合插入到表中，以此类推。

我以前没有做过类似的事情，但可能的解决方案是设置一个循环遍历列并在每次迭代中将时间 + 值的组合插入到我的数据库中的 BASH 脚本？

我对 mysql 有一定的了解，但对 bash 脚本的了解非常有限。但是我找不到使用 mysql LOAD DATA INFILE 命令的方法。

如果您需要更多信息来帮助我，我很乐意提供更多信息！

问候，

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:28:23.173

我整天、每一天都这样做，而且通常情况下，通过将 LOAD DATA INFILE 用于临时表，然后利用 mySQL 的强大功能将其成功放入最终表/格式，从而获得最大的成功和最少的麻烦。[此答案](https://stackoverflow.com/questions/10606343/load-file-into-mysql/10606519#10606519)的详细信息。

为了进一步说明这一点，我们处理了全国 80K 高中/大学的每个视频事件的日志文件（即*每一次*暂停/播放/搜索/停止/开始，对于 100 的数千个视频）。

它们由许多不同的服务器提供服务，具体取决于视频的类型（WMV、FLV、MP4 等），因此每晚有大约 200GB 需要处理，每种格式都有不同的日志布局。我们使用 CSV/PHP 执行此操作的旧方法实际上需要几天时间才能完成，但将其更改为 LOAD DATA INFILE 到临时表中，将它们统一为第二个标准化临时表，然后使用 SQL 进行分组，否则会切分执行时间到几个小时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:38:45.840

首先使用脚本预处理您的 CSV 可能是最简单的`awk`，然后（如 Greg P 所说）使用`LOAD DATA LOCAL INFILE`. 如果我正确理解您的要求，这个 awk 脚本应该可以工作：

```
#!/usr/bin/awk -F| -f

NR==1 { 
    for(col = 2; col <= NF; col++) label[col] = $col
    printf("TIME | PARAM | VALUE | UNIT | VERSION\n")
    next 
}

{
    for(col = 2; col <= NF; col++) {
        printf("%s | %s | %s | [unit] | [version]\n", $1, label[col], $col)
    }
} 
```

输出：

```
$ ./test.awk test.in
TIME | PARAM | VALUE | UNIT | VERSION
0.00001  |  VALUE PARAM 1  |  10  | [unit] | [version]
0.00001  |  VALUE PARAM 2  |  20  | [unit] | [version]
0.00001  |  VALUE PARAM 3  |  30  | [unit] | [version]
0.00001  |  ETC.   |  etc. | [unit] | [version] 
```

然后

```
mysql> LOAD DATA LOCAL INFILE 'processed.csv' 
mysql> INTO TABLE 'table' 
mysql> FIELDS TERMINATED BY '|' 
mysql> IGNORE 1 LINES; 
```

（注意：我没有测试过 MySQL）

# android - 当我在 android 中导入 jsoup.jar 时，出现了一些错误

> ID：10969932
> 
> 赞同：0
> 
> 时间：2012-06-10T15:24:36.047
> 
> 标签：android, jsoup

当我在 android 中使用 jsoup.jar 时，问题是：

意外的顶级异常：java.lang.IllegalArgumentException：已添加：... 转换为 Dalvik 格式失败，错误 1

android中不能使用jsoup.jar吗？我搜索了很多材料，但它不起作用！帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:36:34.737

您有两次包含相同的 jar 库。检查您的应用程序和所有引用的 Android 库，并确保您只包含一次所有 jar。

# animation - 如何在开始位置/零帧停止动画

> ID：10969939
> 
> 赞同：1
> 
> 时间：2012-06-10T15:25:49.933
> 
> 标签：animation, unity3d

我试图用一个按钮停止动画对象，我想当它停止时，对象位于起始位置。例如，我有一个带有动画移动位置的立方体。当按下停止按钮时，立方体回到原来的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:10:35.083

当没有动画播放时，Unity 根本不会改变对象的位置——因此停止它不会为您重置位置。它不会再移动它*了。*

如果要将对象返回到开始播放动画之前的配置，则必须自己完成。您的选择是：

*   使开始位置也由动画设置。这样您就可以在另一个动画完成后播放*该动画。*
*   使您正在播放的动画在结束时将对象返回到其起始位置 - 即让动画的最后一帧回到对象的起始位置。
*   编写捕获和恢复对象位置的代码，方法是保存 transform.position/transform.rotation 的值，然后在动画完成时再次设置它们。

# ruby-on-rails - 将 DateTime 字段与 DateTime 对象进行比较

> ID：10969940
> 
> 赞同：1
> 
> 时间：2012-06-10T15:25:56.213
> 
> 标签：ruby-on-rails

我有一个`Event`包含`start_date`类型字段的模型`datetime`。我有一个简单的模型方法，应该让我知道它`start_date`是否已经处于活动状态，或者它是否尚未发生：

```
def future_event?
  self.start_date >= DateTime.now
end 
```

然后在我看来，我检查我需要加载哪个视图（基于事件是否现在正在发生或事件是否仍在未来）。我尝试了各种方法，例如将两者都转换为 Time 对象、字符串格式等……似乎没有任何效果，总是呈现相同的视图。这是我的视图代码：

```
<% if @event.future_event? %>
   <%= render "pages/main_container_offline" %>
   <%= render "pages/sidebar_offline" %>
 <% else %>
   <%= render "pages/main_container_online" %>
   <%= render "pages/sidebar_live" %>
<% end %> 
```

有任何想法吗？

## 编辑：

这是输出`@event.start_date`：`2012-06-10 10:20:00 UTC`

这是输出`DateTime.now`：`2012-06-10T10:35:30-05:00`

如您所见，格式不同。我不确定这是否是一个问题。

* * *

这是我的控制器方法，它设置`@event`：

```
def index
  @event = Event.active.order("start_date ASC").first
end

## model
scope :active, lambda {
  where("end_date >= ?", DateTime.now)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:29:48.303

更改配置的替代方法是：

```
def future_event?
  self.start_date.utc >= Time.zone.now.utc
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:59:06.933

所以，我终于想通了。基本上问题是 Rails 将所有内容保存在 UTC 时区，这总是与我在本地的时间不同（因此渲染不正确）。为了解决这个问题，我不得不告诉 Rails 和 ActiveRecord 使用我的时区保存所有内容，并在我的时区显示所有内容。以下更改解决了我的问题：

### 应用程序.rb

```
config.time_zone = 'Central Time (US & Canada)'
config.active_record.default_timezone = :local 
```

### 模型.rb

```
def future_event?
  self.start_date >= Time.zone.now
end 
```

# css - 带背景图像的三角形

> ID：10969941
> 
> 赞同：24
> 
> 时间：2012-06-10T15:25:56.753
> 
> 标签：css, svg, css-shapes

我正在研究一个需要两个三角形来保存背景图像并成为链接的项目。

这是我想要两个三角形的模型。

![带背景图像的三角形](../Images/92b4408961dc21cd6143829f9fab225d.png)

目前，我只有两个跨越 900x600 的 div，每个三角形作为背景图像。我现在遇到的问题是我无法将鼠标悬停在 Cinema div 的透明部分上以到达照片 div。

我可以用 css3 三角形完成这个设计并设置它们的背景图像吗？我一直认为自定义形状是由边框组成的，带有边框颜色。

是否可以使用 css3 三角形，如果可以，有人可以帮我编写代码吗？

这是我目前拥有的。

```
.pageOption {
  position: relative;
  width: 900px;
  height: 600px;
}
.pageOption .photo {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 900px;
  height: 600px;
  background: url('../images/menuPhoto.png') no-repeat 0 0;
}
.pageOption .cinema {
  position: absolute;
  bottom: 0px;
  right: 0px;
  width: 900px;
  height: 600px;
  background: url('../images/menuCinema.png') no-repeat 0 0;
}
```

```
<div class="pageOption">
  <a href="#" class="option photo" id="weddingPhoto"></a>
  <a href="#" class="option cinema" id="weddingCinema"></a>
</div>
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-15T06:44:31.573

如果您使用子图像而不是背景图像作为链接，这真的很容易。您只需要倾斜`.option`具有不同变换原点的两个元素，然后取消倾斜它们的子图像并`overflow: hidden`在两者`.pageOption`和`.option`元素上进行设置。支持很好，应该适用于除 IE8/7 和 Opera Mini 之外的所有设备。

# [***演示***](http://codepen.io/thebabydino/pen/liDCz)

**结果**：

![三角形 图片](../Images/e1a580f5914fd2cc61abc4b729bd41ae.png)

**HTML**：

```
<div class='pageOption'>
  <a href='#' class='option' data-inf='photo'>
    <img src='../images/menuPhoto.png'>
  </a>
  <a href='#' class='option' data-inf='cinema'>
    <img src='../images/menuCinema.png'>
  </a>
</div> 
```

相关**CSS**：

```
.pageOption {
  overflow: hidden;
  position: relative;
  width: 40em; height: 27em;
}
.option, .option img { width: 100%; height: 100%; }
.option {
  overflow: hidden;
  position: absolute;  
  /* arctan(27 / 40) = 34.01935deg 
   * need to skew by 90deg - 34.01935deg = 55.98065deg
  */
  transform: skewX(-55.98deg);
}
.option:first-child {
  left: -.25em;
  transform-origin: 100% 0;
}
.option:last-child {
  right: -.25em;
  transform-origin: 0 100%;
}
.option img {
  transform: skewX(55.98deg);
  transform-origin: inherit;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-13T14:58:46.273

您可以通过多种方法实现此布局。这是一个使用[内联 svg](https://developer.mozilla.org/en-US/docs/SVG_In_HTML_Introduction)和[clip-path 元素](https://developer.mozilla.org/en/docs/Web/SVG/Element/clipPath)的示例：

```
<svg viewbox="0 0 10 6.7">
  <defs>
    <clipPath id="top">
      <polygon points="0 0, 9.9 0, 0 6.6" />
    </clipPath>
    <clipPath id="bottom">
      <polygon points="10 0.1, 10 6.7, 0.1 6.7" />
    </clipPath>
  </defs>
  <image xlink:href="http://i.imgur.com/RECDV24.jpg" x="0" y="0" height="6.7" width="10" clip-path="url(#top)"/>
  <image xlink:href="http://i.imgur.com/5NK0H1e.jpg" x="0" y="0" height="6.7" width="10" clip-path="url(#bottom)"/>
</svg>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T12:36:37.913

这是我的 CSS 建议：

1.  使用作为 HTML5 标签且不是跨浏览器的[画布。](http://dev.w3.org/html5/2dcontext/)
2.  使用[SVG](http://www.w3.org/TR/SVG/struct.html)。（最靠谱的）
3.  使用 CSS3 旋转过渡并将其覆盖在具有隐藏溢出的包装器中。再次不是跨浏览器。

**旋转过渡：**

```
-webkit-transform: rotate(7.5deg);  /* Saf3.1+, Chrome 
   -moz-transform: rotate(7.5deg);  /* FF3.5+ 
    -ms-transform: rotate(7.5deg);  /* IE9 
     -o-transform: rotate(7.5deg);  /* Opera 10.5 
        transform: rotate(7.5deg);
           filter: progid:DXImageTransform.Microsoft.Matrix(/* IE6–IE9 
                   M11=0.9914448613738104, M12=-0.13052619222005157,M21=0.13052619222005157, M22=0.9914448613738104, sizingMethod='auto expand'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-17T11:02:07.007

使用 CSS 的响应式想法`clip-path`

```
.pageOption {
  height: 100vh;
  position: relative;
}

.pageOption .photo {
  position: absolute;
  top: 0;
  left: 0;
  right: 5px;
  bottom: 5px;
  background: url('https://picsum.photos/id/1068/900/900') center/cover;
  clip-path: polygon(0 0, 100% 0, 0 100%);
}

.pageOption .cinema {
  position: absolute;
  top: 5px;
  left: 5px;
  right: 0;
  bottom: 0;
  background: url('https://picsum.photos/id/1055/900/900') center/cover;
  clip-path: polygon(100% 100%, 100% 0, 0 100%);
}
.pageOption a:hover {
  filter:grayscale(1);
}

body {
  margin: 0;
}
```

```
<div class="pageOption">
  <a href="#" class="option photo" ></a>
  <a href="#" class="option cinema"></a>
</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T12:18:17.023

正如你所说，css3 三角形是由边框组成的，所以你不能给它们附加背景。

我建议您只使用两个 PNG，然后使用 js 来监听点击事件并根据鼠标位置创建正确的操作。

还有一个 webkit-mask css 属性，但它在其他浏览器中非常不受支持（我将它用于一个小分页起球技巧 - [http://jsfiddle.net/xTNTH/3/](http://jsfiddle.net/xTNTH/3/) - 最好在 safari [没有 js 只有 css] - [http://snag.gy/7fRNq.jpg](http://snag.gy/7fRNq.jpg) )

# python - 为 INSTALLED_APPS 生成表失败

> ID：10969945
> 
> 赞同：1
> 
> 时间：2012-06-10T15:26:25.427
> 
> 标签：python, django, django-models, django-admin, django-views

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "D:\PythonPack\lib\site-packages\django\core\management\__init__.py", lin
e 443, in execute_from_command_line
    utility.execute()
  File "D:\PythonPack\lib\site-packages\django\core\management\__init__.py", lin
e 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "D:\PythonPack\lib\site-packages\django\core\management\base.py", line 19
6, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "D:\PythonPack\lib\site-packages\django\core\management\base.py", line 23
2, in execute
    output = self.handle(*args, **options)
  File "D:\PythonPack\lib\site-packages\django\core\management\base.py", line 37
1, in handle
    return self.handle_noargs(**options)
  File "D:\PythonPack\lib\site-packages\django\core\management\commands\syncdb.p
y", line 57, in handle_noargs
    cursor = connection.cursor()
  File "D:\PythonPack\lib\site-packages\django\db\backends\__init__.py", line 30
6, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "D:\PythonPack\lib\site-packages\django\db\backends\sqlite3\base.py", lin
e 281, in _cursor
    self._sqlite_create_connection()
  File "D:\PythonPack\lib\site-packages\django\db\backends\sqlite3\base.py", lin
e 271, in _sqlite_create_connection
    self.connection = Database.connect(**kwargs)
sqlite3.OperationalError: unable to open database file 
```

尝试后我遇到了这些错误

```
python manage.py syncbd 
```

在本教程中 [https://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

使用 Django 启动第一个 Web 应用程序（Dian-go 或 Jan-go ？）。有人可以帮助我导致这些错误消息的原因吗？

**更新**

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'D:\Python\mysite\sqlitedb',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

那是数据库设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:32:45.550

Windows 用户应该使用 / 而不是 \ 作为 settings.py 中的文件路径。
使用`D:/Python/mysite/sqlitedb`而不是`D:\Python\mysite\sqlitedb`.

# java - 如何将vm字节码反编译成java

> ID：10969946
> 
> 赞同：3
> 
> 时间：2012-06-10T15:26:28.793
> 
> 标签：java, android, dex

是否有任何工具可以将那些是 VM 字节码文件的 Android DEX 转换为相应的 Java 源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:15:43.120

使用[dex2jar](http://code.google.com/p/dex2jar/)，然后您可以使用任何您想要的反编译器对其进行反编译，例如[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:28:46.230

您可以尝试在此处使用其中一种反编译器：[http](http://www.java-decompiler.com/) ://www.java-decompiler.com/ 请注意，除非您反编译已使用调试标志编译的代码，否则局部变量将没有名称。

# eclipse - 在 Eclipse 中访问链接资源

> ID：10969950
> 
> 赞同：2
> 
> 时间：2012-06-10T15:27:01.940
> 
> 标签：eclipse, vxworks

我目前正在努力利用 Windriver 的 Workbench 工具，据我所知，它是建立在 Eclipse 之上的。

我们的源代码控制工具是 ClearCase，我们主要使用位于各个开发人员工作站上的快照视图进行工作。因此，每个开发人员视图的绝对路径是不同的。由于深度嵌套的相对路径可能有点麻烦（例如 ../../../../../Some_Package/src/），我们使用链接资源`PROGRAM_ROOT_PATH`来标识给定开发人员的特定视图目录。

这对于在构建属性中引用头文件和库目录来说效果相对较好，但是我们正在尝试从我们的构建脚本中引用该链接资源，以便进行构建后处理，例如将编译的程序复制到发布区域。

像访问环境变量一样访问链接资源似乎是错误的做法，因为`$(SOURCE_ROOT_PATH)`它提供了一个空字符串。有没有办法从生成文件中的 Eclipse / Workbench 访问这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:01:59.977

查看工作区项目根目录中的 .classpath 和 .project 文件 - 我相信链接资源应该在其中一个或另一个中定义（可能是 .classpath）。从您的脚本（您没有提到它是 Ant、Maven、Gradle 等）中，您应该能够找到一种方法从 .classpath 中获取该值（通过一些插件或自定义代码）。

我们使用 Eclipse、ClearCase 和 Ant。我发现共享项目的最简单方法是将 .project、.classpath 和 build.xml 文件包含在 ClearCase 项目的顶层中。然后，当您创建视图时，将其安装在 Eclipse 工作区中，然后执行 File -> Import，然后从弹出窗口中选择 Existing Project。在视图中浏览到项目的顶层并导入它。

build.xml 和 .classpath 中的路径从那时起是相对的，因此项目的绝对路径是什么并不重要。例如，您的构建会将您的源目录定义为 ./src/java 之类的东西，将测试目录定义为 ./test/java 等。无论您的绝对路径是 c:\workspace\project 还是 /home/someuser/project 或其他对您的构建脚本无关紧要。

# bash - 如何在 Bash 中输出多行字符串？

> ID：10969953
> 
> 赞同：336
> 
> 时间：2012-06-10T15:27:16.057
> 
> 标签：bash

如何在不使用多个回显调用的情况下在 Bash 中输出多行字符串，如下所示：

```
echo "usage: up [--level <n>| -n <levels>][--help][--version]"
echo 
echo "Report bugs to: "
echo "up home page: " 
```

我正在寻找一种可移植的方式来做到这一点，只使用 Bash 内置。

* * *

## 回答 #1

> 赞同：402
> 
> 时间：2012-06-10T17:11:44.580

此处的文档通常用于此目的。

```
cat << EOF
usage: up [--level <n>| -n <levels>][--help][--version]

Report bugs to: 
up home page:
EOF 
```

所有 Bourne 衍生的 shell 都支持它们，包括所有版本的 Bash。

* * *

## 回答 #2

> 赞同：224
> 
> 时间：2012-06-10T15:33:07.803

或者你可以这样做：

```
echo "usage: up [--level <n>| -n <levels>][--help][--version]

Report bugs to: 
up home page: " 
```

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2018-08-18T18:47:54.790

受此页面上富有洞察力的答案的启发，我创建了一种混合方法，我认为这是最简单和更灵活的方法。你怎么看？

首先，我在一个变量中定义了用法，这允许我在不同的上下文中重用它。格式非常简单，几乎所见即所得，无需添加任何控制字符。这对我来说似乎相当便携（我在 MacOS 和 Ubuntu 上运行它）

```
__usage="
Usage: $(basename $0) [OPTIONS]

Options:
  -l, --level <n>              Something something something level
  -n, --nnnnn <levels>         Something something something n
  -h, --help                   Something something something help
  -v, --version                Something something something version
" 
```

然后我可以简单地将它用作

```
echo "$__usage" 
```

甚至更好的是，在解析参数时，我可以在其中以单行方式回显它：

```
levelN=${2:?"--level: n is required!""${__usage}"} 
```

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2012-06-10T15:29:20.073

使用选项，然后您可以在字符串`-e`中打印换行符。`\n`

[样品](https://github.com/nhahtdh/scripts/blob/master/MFFolder.sh)（但不确定是否好用）

~~有趣的是，该`-e`选项在[MacOS 的手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/echo.1.html)中没有记录，但仍然可用。它记录在[Linux 的手册页中](http://linux.die.net/man/1/echo)。~~

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2012-06-10T23:47:51.557

由于我`printf`在评论中推荐过，我可能应该给出一些它的用法示例（尽管为了打印使用信息，我更有可能使用 Dennis 或 Chris 的答案）。 `printf`使用起来比`echo`. 它的第一个参数是一个格式字符串，其中*总是*解释转义符（如`\n`） ；它还可以包含以 开头的格式指令，这些指令控制在其中包含任何附加参数的位置和方式。以下是将其用于使用消息的两种不同方法：*`%`*

 *首先，您可以在格式字符串中包含整个消息：

```
printf "usage: up [--level <n>| -n <levels>][--help][--version]\n\nReport bugs to: \nup home page: \n" 
```

请注意，与 不同的是`echo`，您必须明确包含最后的换行符。此外，如果消息恰好包含任何`%`字符，则必须将它们写为`%%`. 如果您想包含错误报告和主页地址，可以很自然地添加它们：

```
printf "usage: up [--level <n>| -n <levels>][--help][--version]\n\nReport bugs to: %s\nup home page: %s\n" "$bugreport" "$homepage" 
```

其次，您可以使用格式字符串使其在单独的行上打印每个附加参数：

```
printf "%s\n" "usage: up [--level <n>| -n <levels>][--help][--version]" "" "Report bugs to: " "up home page: " 
```

使用此选项，添加错误报告和主页地址非常明显：

```
printf "%s\n" "usage: up [--level <n>| -n <levels>][--help][--version]" "" "Report bugs to: $bugreport" "up home page: $homepage" 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2018-03-01T11:31:49.957

此外，对于缩进的源代码，您可以使用**`<<-`**（带有尾随破折号）**忽略前导制表符**（但不是前导空格）。

例如这个：

```
if [ some test ]; then
    cat <<- xx
        line1
        line2
xx
fi 
```

输出没有前导空格的缩进文本：

```
line1
line2 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2021-04-19T21:08:54.263

我通常使用我认为更灵活和直观的内置读取命令。它将一行的内容读入一个变量，并允许与特殊的 shell 变量 IFS 绑定的分词。有关更多详细信息，请参阅此[博客](https://www.computerhope.com/unix/bash/read.htm)甚至手册页。

```
read -r -d '' usage <<-EOF
    usage: up [--level <n>| -n <levels>][--help][--version] 

    Report bugs to: $report server
    up home page: $HOME
EOF
echo "$usage" 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2020-11-15T14:56:02.663

使用 -e 参数和转义字符 \n：

```
echo -e "This will generate a next line \nThis new line is the result" 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-01-19T09:49:08.347

还有一件事，使用`printf`预定义变量（此处：）`msg`作为模板。

```
msg="First line %s
Second line %s
Third line %s
"

one='additional message for the first line'
two='2'
tri='this is the last one'

printf "$msg" "$one" "$two" "$tri" 
```

此 ^^^ 将打印整个消息，其中插入了其他变量，而不是`%s`按提供的顺序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-10T12:07:36.737

```
 You can write your
    text
        freely,
                   in a separate: 
                             ----file. 
```

接着

```
echo "$(</pathto/your_multiline_file)" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-18T08:14:12.950

做这个：

```
dedent() {
    local -n reference="$1"
    reference="$(echo "$reference" | sed 's/^[[:space:]]*//')"
}

text="this is line one
      this is line two
      this is line three\n"

# `text` is passed by reference and gets dedented
dedent text

printf "$text" 
```

输出不先调用`dedent`：

```
this is line one
      this is line two
      this is line three 
```

...并首先调用 WITH `dedent`（如上所示）：

```
this is line one
this is line two
this is line three 
```

有关完整的解释，请参阅我已经写过的地方：

1.  [等效于 bash 中的 python 的 textwrap dedent](https://stackoverflow.com/a/71169678/4561887)
2.  [带有额外空格的多行字符串（保留缩进）](https://stackoverflow.com/a/71169983/4561887)

当然，感谢@Andreas Louv 在这里[向我展示了`sed`该功能的一部分](https://stackoverflow.com/a/37888919/4561887)。*

# macos - 如何使用 Github 从不同的计算机访问相同的项目文件？

> ID：10969956
> 
> 赞同：9
> 
> 时间：2012-06-10T15:27:55.107
> 
> 标签：macos, git, github, workflow, repository

我主要在台式机 Mac 上工作，但也有一台笔记本电脑，我在离开办公室时使用。

我想从任一计算机访问和处理我最新的 html、css、php 和 python 文件。

我认为 Github 是做到这一点的方法，但是在理解“流程”时遇到了问题，而且我有 RTFM！我不明白我是否应该首先在 Github 上创建一个存储库，为什么当我尝试“克隆”某些东西时，它并没有神奇地最终出现在我的本地计算机上……那里有一个漂亮的红色大按钮，上面写着“同步”是...

...或者我是否应该只使用命令行...

因此，如果我从桌面开始并创建新文件，使用 git 或 Github（？）将这些文件放在可以从我的笔记本电脑访问的地方，然后将笔记本电脑上的文件合并回?Github 存储库，这样我就可以从我的桌面访问这些文件。

谢谢大家的回复和解答！git 工作流程，对于我的需要，现在很清楚。

***wadesworld*提供的工作流程很简洁，是我需要的概述。**

但是，**Michael Durrant**的命令行步骤专门使用命令行指令填充了该工作流程 - 我也需要它。

**steelclaw**和**uDaY**的回答和回应很重要，因为我不明白我首先创建哪个 repo 并不重要，并且在本地添加和提交是我工作流程中必不可少的第一步。

具体来说，**steelclaw**对我的一个回答问题的回答提供了我需要的关闭，因此我可以了解更多信息：

> 初始化存储库后，请务必使用“添加”和“提交”。这些将使文件成为存储库的正式版本。之后，您需要使用“推送”将其上传到远程存储库。”

**ilollar**的资源“Git for Ages 4 and Up”也值得点击，特别是对于像我这样视觉的人！

非常感谢大家！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T15:51:46.187

您想对文件进行版本控制，还是只想在两个地方访问相同的文件？

无论您是编写代码还是设计网站，作为开发人员使用版本控制都是一个好主意。但是，要做到这一点，您必须致力于学习版本控制系统的工作原理，因为它们都有一些学习曲线。

但是，如果您对这种复杂性不感兴趣并且只是想确保您可以访问最新版本的文件，那么您正在寻找一种更简单的文件同步操作。

那么，你想要哪一个？

编辑：根据响应，这是模型：

1）在工作计算机上创建存储库。

2) 在 github 上创建同名的存储库。

3）推送到github上的仓库

4) 在家里，做一个 git clone 来拉下你推送的更改。

5) 现在两个位置都存在存储库，您可以在下班前简单地执行 git push，回家时执行 git pull，反之亦然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T15:47:26.050

要回答您问题的详细信息：我会选择[Dropbox](https://www.dropbox.com/)。
[即使对于非 Ubuntu 用户， UbuntuOne](https://one.ubuntu.com/)也很好，当然[Google 驱动器](https://drive.google.com/start?utm_medium=ha&utm_source=en-oa-na-us-bk&utm_campaign=en#home)是该块的（大）新玩家。

他们比较如下：

```
Service    Free*1  NextLevel*1  NextLevel($)*2  Features
Dropbox    2       50           $2.5O           One Folder, best gui sync tools.
UbuntuOne  5       20           $4.00           Multiple directories anywhere
GDrive     5       25           $2.50           It's Google.

*1 GB
*2 Cost per month 
```

要回答您的问题的标题：

如果你想要更适合程序员的东西，我会使用 git：

首先，安装 gitx（Linux 阅读器，即 gitg），因为这是迄今为止最流行的 git gui：

![在此处输入图像描述](../Images/b7e9645b3e9d4a10edb01f3832db5a66.png)

对于“流程”，我还可以参考我对各种功能的撰写：
[git、github、fork 和分支的核心概念是什么。git 与 SVN 相比如何？](https://stackoverflow.com/questions/9204168/understanding-the-core-concept-of-git/9204219#9204219)

使用 gitx 或 gitg 具体流程如下：

1) 对文件进行一些更改。

2) 使用工具“提交”选项卡查看更改的内容（“未分级”）： ![在此处输入图像描述](../Images/b779bfede53969cf72d3e66b0f014a94.png)

3）通过将文件从“未暂存”拖动到“暂存”来添加文件：

4) 给出提交信息 ![在此处输入图像描述](../Images/cc24aefa5921f96b8a703819259704ce.png)

5) 提交文件。 ![在此处输入图像描述](../Images/b02f290e4fa526910b960d42e4fc8f14.png)

6）然后我将它推送到命令行的远程，`$ git push remote`或者我通过右键单击并选择第二个主控来使用gui - 请参见此处：![在此处输入图像描述](../Images/d82c6168c31333eedf1adf4514833cff.png)

.

如果我要与其他人分享，我经常需要`git pull`在其他人的更改中合并），然后才能执行`git push`

github 部分正在执行初始化、推送和克隆，但我想说只是阅读这些教程而不是 SO 问题。基本上，我这样做：

*   在 git 中本地设置存储库：

`git init
git add .
git commit "Initial commit"`

设置github：

[使用 github ( https://help.github.com/articles/create-a-repo](https://help.github.com/articles/create-a-repo) )创建一个 github 存储库，然后将本地存储库推送到它，如下所示：

git push 起源大师。

如果存储库已存在于 github 上但不在您的本地 pc 上，那就是您单击远程链接，然后在终端类型中`git clone`[粘贴此处，例如 ctrl-v]

如果您从 github“开始”：

*   进行代码更改
*   `git pull`- 将最新版本放入您的存储库并合并任何更改
*   `git add .`添加所有修改过的文件
*   `git commit`-m "消息"
*   `git push`# origin master 是默认值。

如果在一天结束时您决定使用像 Dropbox 这样简单的东西，您可以使用我的推荐链接 - [http://db.tt/pZrz4t3k](http://db.tt/pZrz4t3k) - 获得比标准 2GB 多一点的空间，使用这个我们都可以获得额外的 0.5 GB，但是所有这些路线中的哪一条取决于您和您的需求。我使用所有这些服务（git、github、UbuntuOne、Dropbox 和 googleDrive，所以我不推荐其中一个——这取决于需要）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T15:51:50.323

由于在一个答案中解释如何使用整个 VCS 是一项艰巨的任务，因此我可以向您指出一些非常有用的资源，以帮助您理解和使用 Git：

*   [Pro Git](http://git-scm.com/book) - 一本免费的在线书籍（用 Git 编写！），所有 Git 的语言都很简单。
*   [GitHub 帮助](https://help.github.com/)- GitHub 自己的帮助部分将引导您完成设置和使用 Git，而不仅仅是使用他们自己的应用程序。很有用。
*   [Get Started with Git](http://www.alistapart.com/articles/get-started-with-git/) - 一个很好的教程，让你开始使用 Git。
*   [Git For Ages 4 and Up](http://blip.tv/open-source-developers-conference/git-for-ages-4-and-up-4460524) - 用 Tinker Toys 解释 Git 内部工作原理的精彩视频。不是最好的 Git 介绍，但是一旦你感觉更舒服了，就可以观看一个很棒的视频。

Git 一开始可能会觉得复杂或奇怪，但如果你正在寻找一个好的版本控制系统，那就太棒了。

但是，如果您正在寻找的只是一种类似云的服务，可以在多台计算机上同步一些文件，就像其他人提到的那样，[Dropbox](https://www.dropbox.com/)将是您的最佳选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T15:45:44.573

我建议使用[DropBox](https://www.dropbox.com/)或[Google Drive](https://drive.google.com/)。它们将让您完全按照您的目标去做，它们非常用户友好（而且免费 [5 Gb 我认为]）。

它们会自动更新（只要您显然有互联网连接）

只需创建一个文件夹，将一些文件放入其中，然后您就可以离开了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T15:35:47.470

我使用 Github 作为 git 的“中心”，来分享完成的代码。（以及用于版本控制的 Git）

和 Dropbox 在不同的计算机和手机/平板电脑之间同步文件，管理文件。

[http://db.tt/EuXOgGQ](http://db.tt/EuXOgGQ)

它们为我服务于不同的目的。两者都很好！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-10T15:42:17.610

Git 是用于版本控制的高级且相当困难的工具。如果您有勇气，可以尝试安装命令行工具，但我建议使用图形客户端，特别是 SourceTree。 [http://www.atlassian.com/software/sourcetree/overview](http://www.atlassian.com/software/sourcetree/overview)

您需要克隆您的存储库，或者初始化一个新的。要连接到您的存储库，您需要知道 URL，可能还需要知道存储库的用户名和密码。您还需要为存储库提供一个有效的名称。

要更新文件有几个步骤：首先，您需要将更改添加到目录。源树可能会自动执行此操作。然后，您需要提交更改。这基本上是确认更改并用评论对其进行签名。要上传它们，您需要使用 push 并选择正确的远程存储库。当您想要更新本地存储库时，您需要使用 pull 并再次选择正确的远程存储库。

但是，出于您的目的，Dropbox 似乎可能更好，因为它会自动更新并且非常简单。如果您不需要 git 提供的高级版本控制（例如分支、从许多用户合并），那么它似乎对您来说是一个更好的选择。 [https://www.dropbox.com/](https://www.dropbox.com/)

# ruby-on-rails - Rails - UsersController#create 中的 ArgumentError - 参数太少

> ID：10969957
> 
> 赞同：2
> 
> 时间：2012-06-10T15:28:15.950
> 
> 标签：ruby-on-rails, authentication, devise, arguments

这可能是非常基本的，但我似乎无法弄清楚。

本质上，当我尝试使用表单创建新用户并且用户详细信息已经存在且不是唯一的时，我收到以下错误：

```
ArgumentError in UsersController#create

too few arguments

Application Trace | Framework Trace | Full Trace
app/controllers/users_controller.rb:61:in `format'
app/controllers/users_controller.rb:61:in `create' 
```

这是我`create`在我的行动`user_controller.rb`：

```
 # POST /users
  # POST /users.xml
  def create
      @user = User.new(params[:user])

        if @user.save
          flash[:notice] = 'User successfully created' and redirect_to :action=>"index"
        else
          format.html { render :action => "new" }
          format.xml  { render :xml => @user.errors, :status => :unprocessable_entity }
        end
      end
    end 
```

这是我的`user.rb`

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :username, :password, :password_confirmation, :remember_me

  validates :email, :username, :presence => true, :uniqueness => true
end 
```

这也是我的表格：

```
<%= simple_form_for(@user) do |f| %>
  <div class="field">
    <%= f.input :username %>
  </div>
  <div class="field">
    <%= f.input :email %>
  </div>
    <div class="field">
      <%= f.input :password %>
    </div>
    <div class="field">
      <%= f.input :password_confirmation %>
    </div>
  <div class="actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T15:30:52.633

`format`在这种情况下是什么？

没有`respond_to`障碍，把它放回去！您正在引用其他一些`format`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T15:37:02.840

代码的确切布局通过不同的 rails 版本有所改变（请发布您使用的版本 - 检查 Gemfile）。

此示例适用于 rails 3+（它是使用 3.2.5 生成的，但应适用于所有 3+ 或至少 3.1+ 版本）

```
def create
  @user = User.new(params[:user])

  respond_to do |format|
    if @user.save
      format.html { redirect_to @user, notice: 'Blob was successfully created.' }
      format.json { render json: @user, status: :created, location: @user}
    else
      format.html { render action: "new" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

ps simple_form 的好选择，它让生活更轻松！

# html - css 对齐标题和摘要

> ID：10969960
> 
> 赞同：-7
> 
> 时间：2012-06-10T15:28:43.513
> 
> 标签：html, css

我正在尝试对齐标题和它下面的摘要。 [http://pligg.marsgibson.info/story.php?title=when-i-was-responsible-for-all-the-pcs-in-a-large-studio-i-learned-that-i-needed-随时携带恢复磁盘-](http://pligg.marsgibson.info/story.php?title=when-i-was-responsible-for-all-the-pcs-in-a-large-studio-i-learned-that-i-needed-to-carry-a-recovery-disk-at-all-times-)

看截图 [http://i50.tinypic.com/2akb4m0.jpg](http://i50.tinypic.com/2akb4m0.jpg)

建议css根据截图对齐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:34:12.287

您应该使用`margin`并`padding`正确对齐它们，例如：

```
.title{
   margin-left: 46px;
}
.summary{
   padding: 5px 80px;
} 
```

# c# - 编写内联抽象类的c#实现？

> ID：10969966
> 
> 赞同：11
> 
> 时间：2012-06-10T15:29:22.913
> 
> 标签：c#, android, mono, abstract-class

我发现了一个很好的用java编写的代码示例，用于使用定时器/定时器任务类......

我目前正在将其转换为 c# 用于“Mono for Android”实现，但在转换抽象类 TimerTask 的内联实现时遇到了麻烦

```
// Here's the original java code

private void resetMapChangeTimer()    
{        
mChangeDelayTimer.schedule(
new TimerTask()        
    {            
      @Override            
      public void run()            
      {                
        // Some code to run           
      }        
    }, longTenSeconds);    
} 
```

当我在 c# 中实现它时，我想从 TimerTask（抽象类）和 run 方法等内联创建一个继承类，而不必像上面的 java 代码那样创建一个单独的类（扩展 TimerTask）。

谁能建议我使用 c# 语法来内联创建这个抽象类，而不是创建一个单独的类来继承和实现 TimerTask？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T15:30:19.007

C# 不支持 Java 中的内联类。您可以定义匿名方法，但不能定义整个类。所以你必须定义一个单独的类来实现抽象类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T15:32:43.107

正如 Darin 所说，匿名函数是通往这里的路。您只是想指定一种行为，所以只需让方法接受 an`Action`然后调用者就可以使用匿名函数（匿名方法或 lambda 表达式）。调用代码如下所示：

```
changeDelayTimer.Schedule(() => {
    // Code to run
}, TimeSpan.FromSeconds(10)); 
```

或者，如果您有很多代码，您会想要使用一个方法，并进行方法组转换：

```
changeDelayTimer.Schedule(MethodContainingCode, TimeSpan.FromSeconds(10)); 
```

在 Java 中，我很少发现除了重写匿名内部类中的单个方法之外，我想做的事情更多——因此 C# 中的匿名函数在这里几乎总是可以正常工作。

将代码从 Java 移植到 C# 时，重要的是不要尝试保留 Java 惯用语 - 保留相同的*目标*，而是移植到 .NET 惯用语，在这种情况下，它使用委托以抽象方式表示单个行为.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T02:13:23.507

如果你想使用/扩展现有的 Java 类，你可以实现一个通用的帮助类：

```
class MyTimerTask: TimerTask
{
    private Action action;

    public MyTimerTask(Action action)
    {
        this.action = action;
    }

    public override void Run()
    {
        if(action != null)
            action();
    }
} 
```

然后，您可以使用匿名方法：

```
mChangeDelayTimer.Schedule(new MyTimerTask(() =>
{
    //Do something

}), longTenSeconds); 
```

为了在您的项目中获得最佳的 C# 体验，您可以进一步添加扩展方法。在项目的某处创建一个公共静态类：

```
public static class TimerHelper
{
    public static void Schedule(this DelayTimer /*or whatever your timer class is*/ timer, Action action, int delay)
    {
        if(timer == null)
            throw new ArgumentNullException("timer"); //null check needed because this method is not really an instance method

        timer.Schedule(new MyTimerTask(action), delay);
    }
} 
```

然后您可以使用以下代码：（TimerHelper 类必须对执行上下文“可见”才能显示扩展方法，因此它是公共的）

```
mChangeDelayTimer.Schedule(() =>
{
    //Do something

}, longTenSeconds); 
```

# windows-phone-7 - 从 WP7 中的委托功能访问屏幕上的元素

> ID：10969970
> 
> 赞同：-1
> 
> 时间：2012-06-10T15:29:54.203
> 
> 标签：windows-phone-7

假设我有一个注册屏幕，当用户单击“注册”按钮时，会发生一个异步操作，最后会调用一个委托方法。我希望在用户单击按钮时关闭按钮（这部分很容易），并且如果注册失败（服务器拒绝注册）重新启用按钮。如何从委托功能访问此按钮的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T00:38:15.353

假设您已经在 XAML 中声明了 Button 的名称，在委托回调函数中，我会执行类似的操作（Dispatcher.BeginInvoke 是在 UI 线程上执行代码所必需的）：

```
Dispatcher.BeginInvoke(() =>
{
       MyRegisterButton.IsEnabled = true;
}); 
```

# ajax - 在我的 ASP.NET MVC 应用程序中将 JSON 数据检索到 jqGrid 时，我应该使用 POST 还是 GET？

> ID：10969974
> 
> 赞同：2
> 
> 时间：2012-06-10T15:30:20.817
> 
> 标签：ajax, asp.net-mvc, performance, caching, jqgrid

我在我的 ASP.NET MVC 应用程序中使用[jqgrid 。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:first_grid)目前我有 mTYPE: 'POST' 像这样：

```
jQuery("#myGrid").jqGrid({
    mtype: 'POST',
    toppager: true,
    footerrow: haveFooter,
    userDataOnFooter: haveFooter, 
```

但我正在阅读[这篇文章](http://www.codeproject.com/Articles/23306/10-ASP-NET-Performance-and-Scalability-Secrets)，我看到了这段：

> 浏览器可以缓存用户硬盘上的图像、JavaScript、CSS 文件，如果调用是 HTTP GET，它还可以缓存 XML HTTP 调用。缓存基于 URL。如果它是同一个 URL，并且它被缓存在计算机上，那么响应会从缓存中加载，而不是在再次请求时从服务器加载。基本上，浏览器可以缓存任何 HTTP GET 调用并根据 URL 返回缓存的数据。如果您以 HTTP GET 的形式进行 XML HTTP 调用，并且服务器返回一些特殊的标头通知浏览器缓存响应，在以后的调用中，响应将立即从缓存中返回，从而节省网络往返的延迟和下载时间.

鉴于这种情况，我是否应该将我的 jqGrid mType 全部切换为使用“POST”中的“GET”作为 mType？（它说 XML（没有提到 JSON）。如果答案是肯定的，那么实际上我会想要为 jqGrid mType 使用 POST 的情况是什么，因为它似乎在没有这种缓存优势的情况下做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:00:29.430

您描述的问题可能在 Internet Explorer 中，但*如果您使用默认选项，jqGrid 中将不存在该问题*。

如果您查看将使用的完整 URL，您将看到如下参数

```
nd=1339350870256 
```

[它与jQuery.ajax](http://api.jquery.com/jQuery.ajax/)具有相同的`cache: true`含义。jqGrid 将当前时间添加到 URL 以使其唯一。

我个人喜欢在jqGrid中使用HTTP GET，但不喜欢`nd`参数的使用。[我在旧答案](https://stackoverflow.com/a/3885956/315935)中描述的原因。最好使用`prmNames: {nd:null}`jqGrid 的选项来删除`nd`URL 中参数的使用。而不是那个可以*控制服务器端的缓存*。例如设置

```
Cache-Control: private, max-age=0 
```

是我的标准设置。要设置 HTTP 标头，您只需在 ASP.NET MVC 操作的代码中包含以下行

```
HttpContext.Current.Response.Cache.SetMaxAge (new TimeSpan (0)); 
```

[您可以在答案](https://stackoverflow.com/a/9269567/315935)中找到更多详细信息。

重要的是要理解，标头`Cache-Control: private, max-age=0`不会阻止数据的缓存，但是如果没有在服务器上重新验证，数据将永远不会被使用。使用其他 HTTP 标头选项[ETag](http://en.wikipedia.org/wiki/HTTP_ETag)，您可以使重新验证真正起作用。主要思想是，`ETag`在更改服务器上的数据时总是会更改 的值。如果先前的数据已经在 Web 浏览器缓存中，Web 浏览器会**自动**发送`If-None-Match`HTTP 请求中的一部分，其中的值`ETag`来自缓存的数据。因此，如果服务器看到数据没有更改，它可以使用具有`304 Not Modified`状态和HTTP 响应的**空正文**的 HTTP 响应来回答。它允许网络浏览器使用本地以前缓存的数据。

在[答案](https://stackoverflow.com/a/10871428/315935)和[这个](https://stackoverflow.com/a/10461964/315935)答案中，您将找到如何使用`ETag`方法的代码示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T15:32:10.880

如果服务器发送的数据发生变化，那么您应该使用 POST 来避免每次请求时都获取缓存数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T16:52:40.690

您不应将 GET 用于所有目的。GET 请求应该用于从服务器获取数据，而不是用于保存或删除操作。GET 请求有一些限制，因为您发送到服务器或附加为查询字符串的数据您不能使用 GET 请求发送非常大的数据。此外，您不应使用 GET 请求将敏感信息发送到服务器。您应该在所有其他情况下（如添加、编辑和删除）发出 POST 请求。

据我所知，jqgrid 在每个 GET 请求中都附加了一个唯一键，因此您不会从浏览器缓存中获得任何好处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T16:34:35.570

解决缓存行为的一种方法是在每次发出请求时使 GET 唯一。`jQuery.ajax()`通过将时间戳附加到请求的末尾来使用“缓存：false”来执行此操作。您可以使用类似的方法复制此行为：

```
uri = uri + '?_=' + (new Date()).getTime(); // uri represents the URI to the endpoint 
```

# mysql - mysql 错误：错误 hbm2ddl.SchemaUpdate - 将 Grails 应用程序推送到 Cloud Foundry 时行大小太大

> ID：10969978
> 
> 赞同：0
> 
> 时间：2012-06-10T15:31:04.257
> 
> 标签：mysql, grails, cloud, cloud-foundry

上次我能够成功部署到 Cloud Foundry，现在引入了新的域类，我需要对其进行更新。它更新成功，但是没有创建一个表，这就是为什么我试图删除应用程序并再次推送它以详细查看错误，这就是我得到的：

```
ERROR hbm2ddl.SchemaUpdate  - Unsuccessful: create table case_file (id bigint not null auto_increment, version bigint not null, case_type varchar(255) not null, category varchar(255) not null, client_id bigint not null, date_created datetime not null, class varchar(255) not null, has_criminal_record bit, house_size decimal(19,2), number_of_children integer, agreement varchar(255), brief_evaluation varchar(4000), comments varchar(4000), court_order varchar(255), date_from datetime, date_of_birth datetime, date_of_report datetime, date_signed_authorized_person datetime, date_signed_revisor datetime, date_to datetime, demand_number varchar(255), first_name varchar(255), has_court_order bit, has_intervention_plan bit, has_voluntary_measures bit, interventions_measure_and_resources varchar(4000), last_name varchar(255), other_documents varchar(255), permanent_code varchar(255), proposed_orientation varchar(4000), results_obtained varchar(4000), signature_of_authorized_person longblob, signature_of_director_of_social_services longblob, signature_of_revisor longblob, situation_of_child varchar(4000), voluntary varchar(255), primary key (id)) ENGINE=InnoDB
2012-06-10 15:17:02,466 [main] ERROR hbm2ddl.SchemaUpdate  - Row size too large. The maximum row size for the used table type, not counting BLOBs, is 65535\. You have to change some columns to TEXT or BLOBs
2012-06-10 15:17:02,501 [main] ERROR hbm2ddl.SchemaUpdate  - Unsuccessful: alter table case_file add index FK27F9B12B94D36A39 (client_id), add constraint FK27F9B12B94D36A39 foreign key (client_id) references client (id)
2012-06-10 15:17:02,501 [main] ERROR hbm2ddl.SchemaUpdate  - Table 'd838abcc25b974c87a204aa924e607694.case_file' doesn't exist
2012-06-10 15:17:13,997 [main] ERROR util.JDBCExceptionReporter  - Table 'd838abcc25b974c87a204aa924e607694.case_file' doesn't exist
Stopping Tomcat because the context stopped. 
```

只是为了提供有关该域的一些背景信息，它包含 3 个 longblob（用于图片），我认为这可能会导致“ `Row size too large`”问题。顺便说一句，我使用的是 grails 2.0.0。我该如何解决这个问题？

该应用程序在本地运行良好，它没有抛出这个错误，这就是为什么我看到它时非常震惊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:07:53.060

[您可以在他们的网站](http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html)上阅读 MySQL 中的这个硬限制。基本上，您有很多 256 和 4000 个字符的列，您已经超过了 65,535 个限制。您最好的做法是将`varchar(4000)`列切换为`text`：

```
class MyDomain {
    String description

    static mapping = {
        description type: "text"
    }
} 
```

请注意，Hibernate 可能无法将现有数据迁移到新的列类型。先测试一下！并确保在更新之前备份您的 CF 数据库。

# windows - 批处理文件仅检测文件名的一部分

> ID：10969981
> 
> 赞同：0
> 
> 时间：2012-06-10T15:31:50.987
> 
> 标签：windows, batch-file, rename

我需要一个批处理文件的片段，它可以检测文件名的一部分，然后重命名它。请注意，文件名后面的数字随机变化，但“文件”始终相同。

例子：

文件名：file143424

文件夹中始终只有一个文件需要重命名。该脚本将删除该文件的旧版本。例如，我将第一个文件放入文件夹中，并将脚本也放入其中。然后我运行脚本，将其重命名为文件。然后，如果我放入一个新文件，该脚本在再次运行时会从“文件”前缀中识别它，并在删除旧文件后将其重命名为文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:42:56.123

打扰一下。我认为你的问题不完整。您想将“file134342”重命名为什么？

在您的评论中您说：将其重命名为“文件”，但这仅在只有*一个*具有该名称的文件时才有效。无论如何，这里是：

```
for %%f in (file*) do ren %%f file 
```

如果这不是您想要的，那么请给我们更多细节（您总是从一开始就提供完整的细节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:38:17.843

您可以通过这种方式检查前四个字符：

```
if "%filename:~0,4%"=="file" ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T14:43:07.857

[@Aacini 的建议](https://stackoverflow.com/a/10971355/297408)在您的情况下应该可以正常工作。但是你可以在没有循环的情况下做得很好`for`，一个`REN`( `RENAME`) 命令就足够了：

```
RENAME file* file 
```

# php - PHP - 正则表达式 (preg_match)

> ID：10969982
> 
> 赞同：0
> 
> 时间：2012-06-10T15:31:56.470
> 
> 标签：php, regex, preg-match, preg-match-all

```
<?php
$string = "http://example.com/file/D1 http://example.com/file/D2
http://example.com/file/D3";
preg_match_all('/(https?\:\/\/)?(www\.)?example\.com\/file\/(\w+)/i', $string, $matches);  
foreach($matches[3] as $value)
{  
print $value;  
}
?> 
```

我想预匹配第三个链接并获得“D3”。
我不希望它与其他两个链接匹配。这就是为什么它应该检查链接的开头或结尾是否有空格。
我知道要与空格匹配，表达式是`\s`. 我试过了，但不知何故我不明白。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:38:27.227

您可以`$`像这样添加匹配字符串的结尾，它只会返回最后一个。

```
preg_match_all('/(https?\:\/\/)?(www\.)?example\.com\/file\/(\w+)$/i', $string, $matches); 
```

# matlab - Matlab：如何求解二元方程组？

> ID：10969987
> 
> 赞同：2
> 
> 时间：2012-06-10T15:32:58.587
> 
> 标签：matlab, linear-algebra, equation-solving

我正在尝试使用以下形式求解方程组：

```
a5 + a6 + a7 + f5 + f6 + f7 = 11;
b5 + b6 + b7 + e5 + e6 + e7 = 100;
c5 + c6 + c7 + d5 + d6 + d7 = 100;

a5 + b5 + c5 + d5 + e5 + f5 = 11;
a6 + b6 + c6 + d6 + e6 + f6 = 100;
a7 + b7 + c7 + d7 + e7 + f7 = 100; 
```

其中所有变量和数字都是二进制文件。

有没有办法在 Matlab 中做到这一点？

例如，通过用十进制值替换二进制数：

```
a5 + a6 + a7 + f5 + f6 + f7 = 3;
b5 + b6 + b7 + e5 + e6 + e7 = 4;
c5 + c6 + c7 + d5 + d6 + d7 = 4;

a5 + b5 + c5 + d5 + e5 + f5 = 3;
a6 + b6 + c6 + d6 + e6 + f6 = 4;
a7 + b7 + c7 + d7 + e7 + f7 = 4; 
```

并以某种方式告诉 Matlab 未知数应该是整数并且来自区间 [0:1]？

* * *

这是 A x = b 的形式：

```
A = [1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1;
0 0 0 1 1 1 0 0 0 0 0 0 1 1 1 0 0 0;
0 0 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0;
1 0 0 1 0 0 1 0 0 1 0 0 1 0 0 1 0 0;
0 1 0 0 1 0 0 1 0 0 1 0 0 1 0 0 1 0;
0 0 1 0 0 1 0 0 1 0 0 1 0 0 1 0 0 1];

b = [3 4 4 3 4 4]; 
```

那么下一步是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:46:03.317

bintprog，如果你有优化工具箱。

由于可能有多种解决方案，我将选择总和最小的解决方案。

```
>> A = [1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1;
0 0 0 1 1 1 0 0 0 0 0 0 1 1 1 0 0 0;
0 0 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0;
1 0 0 1 0 0 1 0 0 1 0 0 1 0 0 1 0 0;
0 1 0 0 1 0 0 1 0 0 1 0 0 1 0 0 1 0;
0 0 1 0 0 1 0 0 1 0 0 1 0 0 1 0 0 1];

>> b = [3 4 4 3 4 4];

>> bintprog(ones(1,18),[],[],A,b)
Optimization terminated.
ans =
     0
     1
     1
     1
     1
     1
     1
     1
     1
     1
     0
     0
     0
     0
     1
     0
     1
     0 
```

# android - toPixels()：将经度和纬度投影到自定义视图的像素

> ID：10969991
> 
> 赞同：0
> 
> 时间：2012-06-10T15:33:10.033
> 
> 标签：android

我仍然面临将地质位置列表投影到像素的困难。我有一个自定义视图（源自 SurvaceView），用于简单地绘制坐标。

我的代码：

```
x = (int) sView.getHeight() * ( (pos.getLat() - minLat) / (maxLat - minLat)) + margin;
...
myPoints.add(new Point(x,y));

onDraw(Canvas canvas) {
  for (Point p : myPoints) {
    canvas.drawPoint(p.x, p.y, myPaint);
  } 
```

....不适合整个视图。我变得绝望了。你有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:29:19.837

有点不清楚你想要什么。

但是，如果我理解正确，您希望将一组 GPS 坐标绘制到位图上，并且您希望生成的绘图适合位图的大小。

如果是这样，我建议采取以下策略：

1.  求最小和最大纬度和经度，MinLon、MaxLon、MinLat 和 MaxLat。
2.  从所有点中减去最小值（将数据集重新设置为 (0,0)）。
3.  找到水平比例因子：ScaleX := (MyBitmap.Width) / (MaxLat - MinLat)
4.  找到垂直比例因子：ScaleY := (MyBitmap.Height) / (MaxLon - MinLon)
5.  循环遍历数据集中的所有点，并应用 ScaleX 和 ScaleY 的最低比例因子。

然后，您将拥有一组带有坐标的点，这些点可以绘制到您的位图上。

它不会是一个地图上正确的投影，但它可能至少可以作为一个起点。

# c# - 访问继承的私有基类成员...通过派生类对象...在基类成员中创建

> ID：10969993
> 
> 赞同：0
> 
> 时间：2012-06-10T15:33:29.837
> 
> 标签：c#, inheritance

我无法理解为什么 a 类中的 m() 可以通过 b 类和 b 类对象访问 x 和 y，如果 x 和 y 是私有的。我知道当 b 从 a 继承时，b 从 a 接收私有成员，即使它们不能被 b 使用。但奇怪的是b成员不能使用x和y，而a以外的类不能通过b类和b类对象获取变量，而m()却可以通过b访问x和y类和 b 类对象。

有人可以使用我错过的一般规则向我解释这一点，或者可能解释编译器如何将基成员“给予”派生类？

```
class a
{
    private int x;
    private static int y;

    static void m()
    {
        b bobj = new b();
        int mm = bobj.x;
        int rr = b.y;

    }

    void n()
    {
        b bobj = new b();
        int mm = bobj.x;
        int rr = b.y;
    }
}

class b : a
{
    private int u;
    private static int v;

    static void o()
    {

    }

    void p()
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:37:15.387

> 我无法理解为什么 a 类中的 m() 可以通过 b 类和 b 类对象访问 x 和 y，如果 x 和 y 是私有的

类声明中的代码可以访问该类声明的任何私有成员——就这么简单。所以里面的代码`a`不能访问在 中*声明*的私有变量`b`，但它可以`a`通过一个实例访问在 中声明的私有变量，该实例`a`也恰好是`b`.

请注意，这一行：

```
int rr = b.y; 
```

有效地转换为

```
int rr = a.y; 
```

`y`仅由 声明`a`- 如果它*真的*由 声明`b`，它将无法访问。

有关详细信息，请参阅 C# 4 语言规范的第 3.5 节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:38:53.883

这是从 C++ 语言继承的规则。

`private`并对`protected`类进行操作，而不是对象。因此，例如，如果您有一个`Bank`对象，它的成员可以访问任何其他`Bank`人的私人数据，尽管这可能看起来违反直觉或危险。

因为 C++ 广泛使用指针算法和无限类型转换，所以在同一进程中执行任何代码之前，无法可靠地保护进程内的数据。

但是，如果您只需要防止*意外*访问的对象级保护，则可以通过定义一个接口并仅在银行之间传递接口来帮助您。虽然`Bank`对象仍然可以执行以下操作：

```
void TransferMoneyFrom(IBank otherBank, decimal theirAccountNumber,
                        decimal receivingAccountNumber, int amount)
{
    ((Bank)otherBank).PrivateProperty = whatever;
} 
```

...它不太可能无意中发生，因为需要显式类型转换或使用反射。

（请注意，C# 通常可以更轻松地*有意*访问您没有源代码的某个其他*类*的私有成员（按名称，使用反射）。如​​果该类型的供应商认为这是一个劣势，他们可以使用一个混淆器使这变得更加困难。这仍然不能以任何方式保护被混淆的对象免受其自身的其他实例的影响。）

# eclipse - Eclipse SVN 对 SourceForge 的帮助

> ID：10969998
> 
> 赞同：0
> 
> 时间：2012-06-10T15:34:54.830
> 
> 标签：eclipse, svn

我似乎无法将 Eclipse 中的项目上传到 SourceForge。基本上我要去 Team -> Share Project -> SVN 并返回错误。我不确定下一步该做什么，因为我已经厌倦了找出配置文件的位置，但无济于事。我还关闭了 Windows (7) 防火墙。它是 Eclipse Indigo SR2。

mkdir --parents -m "初始导入。" [svn+ssh://john@svn.code.sf.net/p/novaturtles2/code/trunk/GoogleJavaForm] 系统找不到指定的文件。
svn：无法连接到 URL 'svn+ssh://john@svn.code.sf.net/p/novaturtles2/code/trunk/GoogleJavaForm' 的存储库 svn：无法创建隧道：系统找不到指定的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:31:02.790

不得不做两件事：

1.  下载 Eclipse SVN 软件： http: [//www.eclipse.org/subversive/downloads.php](http://www.eclipse.org/subversive/downloads.php)

2.  安装最新版本的 SubEclipse。 [http://subclipse.tigris.org/servlets/ProjectProcess?pageID=p4wYuA](http://subclipse.tigris.org/servlets/ProjectProcess?pageID=p4wYuA)

3.  使用 SVN 套件设置软件。 [http://www.ranjankumar.in/working-with-svn-repository-in-eclipse/](http://www.ranjankumar.in/working-with-svn-repository-in-eclipse/)

4.  在 Eclipse 中选择第二个 SVN 选项。默认设置为SVNKit后不存在隧道错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T15:44:45.783

你是用 svn+ssh 连接的吗？

[这篇](http://kiranpatils.wordpress.com/2009/08/13/svn-cant-create-tunnel-the-system-cannot-find-the-path-specified/ "这")博文说他们通过这个解决了一个类似的问题：

```
 SVN_SSH Environment Variable value was like this[Won't Work]:

C:\Program Files\Putty\bin\plink.exe

It should be like this [Will work]:

C:\\Program Files\\Putty\\bin\\plink.exe

OR
C:/Program Files/Putty/bin/plink.exe 
```