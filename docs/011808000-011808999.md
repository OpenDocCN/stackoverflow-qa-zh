# StackOverflow 问答 11808000-11808999

# c++ - 创建 Visual Studio 错误列表消息

> ID：11808000
> 
> 赞同：1
> 
> 时间：2012-08-04T10:46:03.413
> 
> 标签：c++, visual-studio, visual-c++, message, error-list

有没有办法在 Visual Studio 错误列表中创建自定义消息？我正在看 VS 2010 和 2012。

对于生成错误，这是一个简单的`#error text`. 为了生成警告，它是`#pragma warning ("text")`. 为了将消息打印到输出窗口，它是`#pragma message("text")`

关于如何在错误列表中创建信息消息的文档很少或没有。有谁知道这是否可能？如果不使用 VS 插件，我更愿意，但如果有办法使用这些插件，那也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:10:43.467

可能这可能会有所帮助：[格式化自定义构建步骤或构建事件的输出](http://msdn.microsoft.com/en-us/library/yxkt8b26%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T07:01:02.133

这个宏是 Rost 链接到的一个可能的实现：

```
#define COMBINE_NAMES_HELPER_6(a,b,c,d,e,f)                   a##b##c##d##e##f
#define COMBINE_NAMES_6(a,b,c,d,e,f)                          COMBINE_NAMES_HELPER_6(a,b,c,d,e,f)

#define FILE_LINE_FUNC_STR(msg)   ( COMBINE_NAMES_6(__FILE__, "(",STRING( __LINE__), "): ", __FUNCTION__, " "msg) )
#define COMPILER_MSG(msg)         message FILE_LINE_FUNC_STR(msg) 
```

# html - 如何将div定位在图像的右侧？

> ID：11808002
> 
> 赞同：0
> 
> 时间：2012-08-04T10:46:25.987
> 
> 标签：html, css

我在页面中心有图像。

我想在图像中显示文本**块**。图像之间。`<div class='contain'>``float left``10px``<div class='contain'>`

我不想移动图像，我想图像将留在中心，并在右侧放置 `<div class='contain'>`。

我将属性添加`clear:both;`到图像或 div 中，但我认为我不知道如何使用它。

[jsfiddle 演示](http://jsfiddle.net/centerwow/gPNAM/2/show/)

我怎样才能做到这一点？谢谢

我的代码：

```
<h1><a id="toptitle" href="http://www.centerwow.com">portfolio</a></h1>
<div id="container">

    <div id="all_pages">

        <div class="page">
            <h1>Home Page</h1>
            <img src="images/yellow_flowers.jpg" width="300px" height="300px">
            <div class='contain'>this is the home page bla bla bla</div>
        </div> <!-- page1 -->
        <div class="page">
            <h1>About Us Page</h1>
            <img src="images/Pink_Flowers.jpg" width="300" height="300px">

        </div> <!-- page2 --> 
        <div class="page">
            <h1>Contact Us Page</h1>
            <img src="images/green_flowers.jpg" width="300" height="300px">

        </div> <!-- page2 --> 

    </div> <!-- #all_pages -->

</div> <!-- #container -->

<div id="menu">
<ul>
    <li id="1" class="link CC3366 active">Home</li>
    <li id="2" class="link 33FF66">About</li>
    <li id="3" class="link FFFF33">Contact Us</li>
</ul>
</div> <!-- #menu -->
<div id="footer"><a class="link" href="http://www.centerwow.com">mysite</a></div>
​
body {
    background: #CC3366 url(images/temp.png) center 130px no-repeat ;
    overflow:hidden;
    margin:0;
    padding:0;
    }
#container { 
    width: 1000px;
    overflow: hidden;
    position: relative;
    height: 450px;
    margin: 0 auto;
 }

#all_pages {
    position: absolute;
    left: 0;
    top: 0;
    width: 3000px;
    }
.page {
    width: 1000px;
    height: 400px;
    float: left;
    text-align: center;
    margin-top: 10px;
    }    
.page img {
    margin-top: 10px;
    }
#menu {
    background: #000;

    }
#menu ul { 
    list-style: none;
    width: 457px;
    height: 35px;
    margin:auto;
    }
#menu ul li {
    float: left;
    color: #FFFF33;
    width: 150px;
    line-height: 35px;
    text-align: center;
    cursor: pointer;
    }
.active {
    color: #fff !important;
    }
#footer a{
    font-size: 25px;
    font-weight: bold;

    }
#footer{
    line-height: 100px;
    background: #CC3366;
    width:100%;
    height:1000px;
    text-align: center;
    display: block;
}
#toptitle {
    position: absolute;
    width:100px;
    top: 30px;
    left: 30px;
    color: #000;
    cursor: pointer;
    z-index:20;
}
a {
text-decoration: none;
}
#contain{
    clear:both;
    float:left;
    margin-left:10px;
    background: blue;
    width:300px;
    height:300px;
}
.clear{

}​

$(".link").click(function(){
        var page = $(this).attr("id");
        var color = $(this).attr("class");
        color = color.substr(5,6);
        $('#all_pages').animate({left: (page-1)*(-1000) }); 
        $("body").animate({backgroundColor: '#'+color});
        $("#menu ul li").removeClass('active');
        $(this).addClass('active'); 
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T21:42:36.623

我用桌子来做这项工作，它似乎工作正常。

```
<center>
 <table>
  <tr>
   <td valign=top align=right width=50%>Here is the text</td>
   <td width=300px><img src='fun.jpg' width=300px height=300px></img></td>
   <td width=50%></td>
  </tr>
 </table>
</center> 
```

# c++ - C++ 结构中的前向声明编译器错误

> ID：11808004
> 
> 赞同：0
> 
> 时间：2012-08-04T10:46:32.617
> 
> 标签：c++, visual-studio-2010, mingw

这在 Visual C++ 2010 中编译。

它不编译和 MINGW。

```
struct nextifcondinfo
{
  hash_map <string, nextifcondinfo> next;
  int action; 
};

I get an error message:
Description Resource    Path    Location    Type
forward declaration of 'struct nextifcondinfo'      C/C++ Problem 
```

你能告诉我在mingw中使用什么开关来解决吗？或者你还有其他想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T10:53:56.837

我不相信您的代码应该编译，但它确实取决于 hash_map 实现。看起来你对 VC++ 很幸运，对 MinGW 很不幸。

例如，解决使用指针

```
struct nextifcondinfo
{
  hash_map <string, nextifcondinfo*> next;
  int action; 
}; 
```

您也可以使用智能指针。

# java - 设置 Spring Archetype 时出现重复问题

> ID：11808011
> 
> 赞同：1
> 
> 时间：2012-08-04T10:47:27.173
> 
> 标签：java, eclipse, spring, maven

我在别处找不到这个问题的答案。

我正在尝试设置一个虚拟机来学习 spring、wicket 和 hibernate。我从[这个](http://blog.iprofs.nl/2011/02/15/a-maven-quickstart-on-wicket-spring-and-hibernate/)maven-archetype 开始并像这样使用它：

```
mvn archetype:generate -DarchetypeGroupId=nl.iprofs -DarchetypeArtifactId=wicket-spring-hibernate-quickstart -DarchetypeVersion=1.3 -DarchetypeRepository=http://www.iprofs.nl/repository/ -DinteractiveMode=false -DgroupId=me.sandbox -DartifactId=swh
cd swh
mvn install 
mvn eclipse:eclipse
mvn jetty:run 
```

Jetty 启动演示项目，它应该可以访问。

然后我将项目导入最新的 STS (SpringSourceToolsuite)。但是当我部署应用程序时，我得到了这个错误：

```
SEVERE: Error configuring application listener of class org.springframework.web.util.Log4jConfigListener
java.lang.ClassNotFoundException: org.springframework.web.util.Log4jConfigListener 
```

我只是不明白。我是 spring 新手，没有经常使用 maven，但我的印象是 maven 会自动解决依赖关系（例如上面的）：/

在我的 .classpath 文件中，我发现（除了许多其他）这些条目：

```
<classpathentry kind="var" path="M2_REPO/org/slf4j/slf4j-api/1.5.8/slf4j-api-1.5.8.jar" sourcepath="M2_REPO/org/slf4j/slf4j-api/1.5.8/slf4j-api-1.5.8-sources.jar"/>
<classpathentry kind="var" path="M2_REPO/org/slf4j/slf4j-log4j12/1.4.2/slf4j-log4j12-1.4.2.jar" sourcepath="M2_REPO/org/slf4j/slf4j-log4j12/1.4.2/slf4j-log4j12-1.4.2-sources.jar"/>
<classpathentry kind="var" path="M2_REPO/log4j/log4j/1.2.14/log4j-1.2.14.jar" sourcepath="M2_REPO/log4j/log4j/1.2.14/log4j-1.2.14-sources.jar"/> 
```

似乎 M2_REPO 未定义。我尝试将文件夹 .m2/repository 从我的用户文件夹符号链接到项目文件夹，甚至添加了指向同一位置的环境变量 M2_REPO。*所有*引用的文件都在文件夹结构中。但是我仍然遇到同样的错误，并且仍然有来自 maven-jars 的 Classpath Dependency Validator 的警告。

如果这有任何帮助：

我在 oracle-vm 内的 64 位 XUbuntu 上运行它。我从存储库安装了 maven2 和 openjdk-7-jdk，从官方站点安装了 Springsource Toolssuite .sh-installer 64Bit 2.9.2。

我很困惑，因为我从没想过设置一个简单的演示原型会那么难。我想我犯了一个简单/天真的初学者错误。但我不知道。请帮我。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:10:46.170

如果 M2_REPO 未定义，您通常应该在 eclipse/STS 中收到警告。为确保该变量可用，您可以转到`Preferences > Java > Build path > Classpath variables`. 如果您没有在此处定义变量 M2_REPO，则可以将其添加到`<path>/.m2/repository`

关于您使用的 maven-archetype，我不能说太多。但也许你应该看看[Spring roo](http://www.springsource.org/spring-roo/)，它可以帮助你创建一个新的 Spring 项目（创建配置文件，向 pom.xml 添加依赖项等）。使用 hibernate 和 roo 创建一个新的 Spring 项目基本上是编写 2 个命令：

```
project --topLevelPackage com.company.project
jpa setup --provider HIBERNATE --database MYSQL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:13:55.177

如果你有 eclipse 的 M2 插件设置，你可以在那里设置 M2_HOME。如果您没有为 eclipse 安装 m2 插件，那么只需将您的 M2 存储库添加到类路径

# android - PHP Web 服务和 .NET Web 服务之间的区别

> ID：11808017
> 
> 赞同：0
> 
> 时间：2012-08-04T10:47:52.820
> 
> 标签：android, web-services

我想学习如何在 android 中使用 web 服务，并且我已经对其进行了一些研究，我已经看到 .net web 服务是 XML 格式并以 XML 格式返回响应，当 PHP web 服务给出 jason 数组作为响应时，我已经将 ksoap 用于 .net web 服务，ksoap 是否也可以用于 php web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:44:19.500

我想你误会了。.Net 不仅可以生成 XML 格式的数据。使用 .NET 也可以生成 JSON 数据，也可以使用 php 生成 XML 格式。大多数人只会使用 JSON，因为它重量轻且它可以从客户端轻松解析。在我看来，解析 XML 数据真的很痛苦。

而且你问ksoap 也用于php？是的。

请参阅以下链接 [http://www.petetracey.com/2009/11/ksoap-with-php-tutorial/](http://www.petetracey.com/2009/11/ksoap-with-php-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T04:10:58.233

上面的站点是我的站点，所以我想我会澄清一下——SOAP 是一种使用 XML 作为其基础格式的协议。它是使用 XML 的众多选项之一。KSOAP（带有 K）是用于黑莓的 Java 库，但可能位于 android 库中的某个位置或以某种方式添加。我仍然认为更好的选择是 JSON，它重量更轻，解析速度更快，因此对于具有数据速率/有限处理能力/电池消耗的移动设备会随着处理器的使用而增加——你想要精简和平均。

因此，任何现代语言，无论是 PHP、.NET、whathaveyou++，都有 JSON 和 XML 的库——而且大多数语言都内置了 SOAP，或者在某处作为第 3 方库。使用哪种工具才是完成这项工作的正确工具，而 SOAP 在这一点上几乎是 Sun/Oracle 和 Microsoft 世界之外的传统技术。

# javascript - 带有固定顶部导航的 impress.js 无法正常工作

> ID：11808018
> 
> 赞同：3
> 
> 时间：2012-08-04T10:48:00.297
> 
> 标签：javascript, html, css, impress.js

我一直在使用 impress.js、html5 和 css。我的 impress.js 演示文稿已达到我非常满意的标准，但我正在尝试实现类似于 Twitter 的固定顶部导航。

当前的实现不能正常工作。如果您在幻灯片/步骤上单击该栏，则链接将无法单击。

[我的尝试](http://www.fyldetrade.co.uk/v2/)

**HTML**

```
<!DOCTYPE html5>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>

    <title>PATCHU_</title>

    <meta name="author" content="patchu" />

    <link href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />

    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
</head>

<body class="impress-not-supported">
<div class="fallback-message">
    <p>Your browser <strong>doesn't support the features required</strong> by my website, so you are presented with a simplified version.</p>
    <p>For the best experience please use the latest <strong>Chrome</strong>, <strong>Safari</strong> or <strong>Firefox</strong> browser.</p>
</div>
<div class="navbar-fixed-top2" align="center">
<p>Navigation will go here <a class="" href="#websites" title="My Websites">My Websites</a> 
<a class="" href="#about" title="My Websites">About</a> 
<a class="" href="#contact" title="My Websites">Contact</a>
<a class="" href="#applications" title="My Websites">Applications</a>
</div>
<div id="impress" data-transition-duration="800">   
    <div id="title" class="step slide" data-x="0" data-y="0" data-scale="3">
        <hgroup>
            <h1>@PATCHU_</h1>
            <h2></h2>
        </hgroup>
    </div>
    <div id="about" class="step slide" data-x="-1000" data-y="-700" data-rotate="270" data-scale="5">
            <h1>About Me</h1>
    </div>
    <div id="about1" class="step slide about" data-x="-1900" data-y="880" data-z="-100" data-rotate="270" data-scale="1">
            <p>Apart from making <strong>awesome websites</strong>, I love computer networking and making <strong>iOS applications.</strong></p>
    </div>
    <div id="about2" class="step slide about" data-x="-1900" data-y="100" data-z="-100" data-rotate="270" data-scale="1">
            <p>Minimalist, <strong>Perfectionist</strong>, Gamer and Apple fanboy. I have a passion for creating stuff. Love trying out <strong>new technologies</strong> and experiences.</p>
    </div>
    <div id="about3" class="step slide about" data-x="-1900" data-y="-800" data-z="-100" data-rotate="270" data-scale="1">
            <p>I mostly code in <strong>PHP</strong> and <strong>Objective-C</strong>, but I'm not afraid to get my hands dirty.</p>
    </div>
    <div id="about4" class="step slide about" data-x="-1900" data-y="-1600" data-z="-100" data-rotate="270" data-scale="1">
            <p><strong>Graduated</strong> with a <strong>1:1</strong> (84% Average) in Computer Network Technology BSc.</p>
    </div>
    <div id="websites" class="step slide" data-x="7100" data-y="-700" data-z="-3000" data-rotate="0" data-scale="5">
            <h1>Websites</h1>
    </div>
    <div id="applications" class="step slide application" data-x="3950" data-y="-4500" data-z="-3000" data-rotate="90" data-scale="5">
            <h1>Applications</h1>
    </div>
    <div id="contact" class="step slide" data-x="-180" data-y="2100" data-scale="3">
            <h1>Connect</h1>
            <p></p>

            <div id="contact_images">
                <a href=""><img src="images/twitter.png"></a>
                <a href=""><img src="images/linkedin.png"></a>
            </div>
    </div>
</div>

<script src="js/impress.js"></script>
<script>
    //All hail megatron
    impress().init();
    //impress().showMenu();
</script>
</body>

</html> 
```

**CSS**

```
/* 
    Resetting the humans
*/
.navbar-fixed-top2{
    position:fixed;
    top:0;
    width:100%;
    height:50px;
    background-color:red;
    z-index:3000;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T17:42:24.447

这是由于 impress.js 中的 chrome 错误的解决方法，请参阅随附的 CSS 文件末尾的注释。

要使导航栏中的链接可点击，请将以下内容添加到 .navbar-fixed-top2 CSS 类：

```
pointer-events: auto 
```

或者，将以下类添加到您的 CSS：

```
.extra-clickable { pointer-events: auto } 
```

...然后将该类添加到您想要可点击的#impress 之外的任何内容中。

# jboss - javax.naming.CommunicationException

> ID：11808019
> 
> 赞同：0
> 
> 时间：2012-08-04T10:48:08.817
> 
> 标签：jboss, shutdown

尝试关闭我的 jboss 服务器时出现以下错误

```
Exception in thread "main" javax.naming.CommunicationException 
[Root exception is java.rmi.ConnectIOException: Exception creating connection to: 10.10.100.49; 
```

嵌套异常是：

```
 java.net.NoRouteToHostException: No route to host]
 at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:649)
 at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:509)
 at javax.naming.InitialContext.lookup(Unknown Source)
 at org.jboss.Shutdown.main(Shutdown.java:188)
Caused by: java.rmi.ConnectIOException: Exception creating connection to: 10.10.100.49; nested exception is: 
 java.net.NoRouteToHostException: No route to host
 at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source)
 at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source)
 at sun.rmi.transport.tcp.TCPChannel.newConnection(Unknown Source)
 at sun.rmi.server.UnicastRef.invoke(Unknown Source)
 at org.jnp.server.NamingServer_Stub.lookup(Unknown Source)
 at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:530)
 ... 3 more
Caused by: java.net.NoRouteToHostException: No route to host
 at java.net.PlainSocketImpl.socketConnect(Native Method)
 at java.net.PlainSocketImpl.doConnect(Unknown Source)
 at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
 at java.net.PlainSocketImpl.connect(Unknown Source)
 at java.net.SocksSocketImpl.connect(Unknown Source)
 at java.net.Socket.connect(Unknown Source)
 at java.net.Socket.connect(Unknown Source)
 at java.net.Socket.<init>(Unknown Source)
 at java.net.Socket.<init>(Unknown Source)
 at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(Unknown Source)
 at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(Unknown Source)
 ... 9 more 
```

安装 JBoss 服务器的虚拟机最近被复制到具有不同 IP 地址的新虚拟机。不确定仍然引用旧 IP 的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:41:05.840

`10.10.100.49`在您的 JBoss 根文件夹中进行搜索。

如果您使用的是类 Unix 操作系统，请尝试：

```
find /path/to/jboss/home -type f -exec grep -l '10.10.100.49' {} \; 
```

# mysql - 如何“输入”不符合 WHERE 条件的列的计数？

> ID：11808023
> 
> 赞同：0
> 
> 时间：2012-08-04T10:48:23.643
> 
> 标签：mysql, select

首先，我对标题感到*非常*抱歉。我真的不知道如何正确地表达这个问题。如果有人能想到更好的措辞，请编辑或告诉我。

关于这个问题：

我有两张桌子。`usage_logs`和`servers`。`servers`存储我的客户端与特定服务器通信所需的所有服务器信息。`usage_logs`，当然，存储哪个用户使用了特定的服务器、哪个服务器以及使用了多长时间。

我需要一个查询来选择当前由最少用户使用的服务器的服务器信息。

这是我当前的查询：

```
SELECT servers.ip, servers.serverkey, servers.port, servers.id, COUNT(usage_logs.sid) nbr 
FROM servers 
LEFT JOIN usage_logs ON servers.id = boot_logs.sid 
WHERE usage_logs.time+usage_logs.date > 1344076143 
      AND usage_logs.sid IS NOT NULL 
      AND servers.status='ONLINE' 
GROUP BY sid 
ORDER BY nbr DESC; 
```

`1344076143`可以用当前时间代替（在我的实际脚本中）。这个查询*几乎*可以工作。它正在选择一个服务器，**但**由于其他服务器实际上并未在使用中，因此它不符合`WHERE usage_logs.time+usage_logs.date > 1344076143`标准，因此未在输出中列出。

我需要一种方法让它仍然列出该服务器，但我不知道如何。

另外，这`usage_logs.sid IS NOT NULL`是因为我最近才开始尝试改进使用跟踪，所以在今天之前，`sid`不存在。

`usage_logs.sid`是服务器 ID，最多匹配`servers.id`.

我一直在谷歌上搜索这个地狱，实际上`JOIN`之前甚至从未使用过声明，所以也请不要犹豫，纠正你发现的任何问题。我非常想提高我的 MySQL 技能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:03:24.443

这些行被排除在外，因为您的`WHERE`子句中的条件有效地过滤掉了具有由外连接`NULL`生成的值的行（因为在 之后评估）。`LEFT``WHERE``FROM / JOIN`

您需要做的是ed 表`OR`上的条件，`LEFT JOIN`以获取在某个日期之后使用的服务器***或***根本没有任何使用*的*服务器。

尝试：

```
SELECT    a.ip, 
          a.serverkey, 
          a.port, 
          a.id, 
          COUNT(b.sid) nbr 
FROM      servers a
LEFT JOIN usage_logs b ON a.id = b.sid 
WHERE     a.status='ONLINE' AND 
          (b.time + b.date > 1344076143 OR b.sid IS NULL)
GROUP BY  a.id 
ORDER BY  nbr 
```

# c# - 注册表写入不起作用

> ID：11808025
> 
> 赞同：1
> 
> 时间：2012-08-04T10:48:41.713
> 
> 标签：c#, registry

这是我的注册表编写代码

```
key.SetValue(KeyName, KeyValue_number, RegistryValueKind.DWord); 
```

调试时的值是这样的：

```
key = {HKEY_LOCAL_MACHINE\SOFTWARE\Test}
KeyName = "quack"
KeyValue_number = 1 
```

所以看起来它应该可以很好地插入，但我根本无法在注册表中找到密钥：/，而不是作为目录或密钥重新启动 regedit 和一切，仍然没有，这很混乱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:03:07.253

事实证明，在 64 位系统上，Windows 会自动将许多键重定向到注册表中的不同文件夹。就我而言，它是“HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Test”。

编辑：感谢下面的 Hans Passant，显然解决这个问题的方法是将编译平台设置为“任何 CPU”，这个问题就解决了

# linux - SVN 冲突，硬盘上没有文件

> ID：11808029
> 
> 赞同：1
> 
> 时间：2012-08-04T10:49:06.323
> 
> 标签：linux, svn

我有两台电脑和 svn repo。我已经使用我的笔记本将文件添加到 svn 并在另一个上说 svn。该文件是新文件，它在我的第二台 PC 上不存在，但我得到：

```
@konrad:~/svn$ ls web/web/browser.xslt.xml
ls: cannot access web/web/browser.xslt.xml: No such file or directory

@konrad~/svn$ svn up
Conflict discovered in 'web/web/WEB-INF/xslt/browser.xslt.xml'.
Select: (p) postpone, (df) diff-full, (e) edit,
        (mc) mine-conflict, (tc) theirs-conflict,
        (s) show all options: 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:11:50.297

您`ls`显示了一个不同的文件：`web/web/browser.xslt.xml`而不是`web/web/WEB-INF/xslt/browser.xslt.xml`. 你确定你`web/web/WEB-INF/xslt/browser.xslt.xml`的系统上没有？

我总是遇到这些神秘的冲突，这很令人沮丧，因为在解决这个问题之前你什么都做不了。我想你可以做一个*diff-full*然后决定合并什么或如何合并，但我总是觉得这很令人沮丧，因为我真的不能花时间去思考和解决这个问题。

终止更新并执行`svn status`. 这会给你原因。也许您已经删除了该文件，`svn delete`并且该文件有一个传入的更新。也许您添加了文件，而其他人也添加了文件。也许您的驱动器上有文件的非颠覆版本，并且有人在 Subversion 中添加了它。有时，我发现冲突无非是`svn:mergeinfo`财产上的冲突。

最简单的方法就是摆脱问题并接受存储库中的任何内容：

1.  在文件上做一个`svn resolved`。这将使它摆脱*冲突状态*。
2.  现在`svn status`对文件做一个。这会告诉你 Subversion 认为你做了什么。例如，您是删除了这个文件还是添加了这个文件。
3.  如果您看到文件已*修改*，请对其进行比较，这样您就可以看到修改了什么。请记住，差异也可以是属性值！
4.  如果文件存在于您的工作副本中，为了安全起见，请将文件复制到其他位置。
5.  做一个`svn revert`。A`svn status`应该显示文件是原始的。
6.  现在，您可以`svn update`对文件执行操作。您现在将获得存储库中的最新副本。

一旦你把一切都清理干净，你可以决定如何继续。即使这是我所做的更改与某人所做的更改之间的真正冲突，我仍然更喜欢这样做。我可以用它`vimdiff`来查看差异是什么以及更新什么比在更新过程中更容易。

# facebook - Facebook Graph API 中是否确认了用户的电子邮件地址？

> ID：11808030
> 
> 赞同：16
> 
> 时间：2012-08-04T10:49:21.507
> 
> 标签：facebook, facebook-graph-api, openid

我通过 Facebook Graph API 收到用户的电子邮件，但我如何验证用户在 Facebook 注册后是否确认了他的电子邮件？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-07T13:52:17.167

我通过创建一个新的 Facebook 帐户并尝试将其连接到网站而不验证我的电子邮件地址来测试这个场景。Facebook 对话框不允许我这样做，并解释说我必须在连接之前先验证我的电子邮件地址。

因此，您可以依靠从 Facebook 检索到的电子邮件来进行“验证”，而无需更改策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:42:28.203

您将无法判断电子邮件是否已通过验证，但如果`/me`API 调用返回`verified = true`，则表示用户已通过某种方式（信用卡、移动设备等）验证了他们的帐户。因此可以安全地假设用户的帐户和电子邮件是有效的。

# .net - 在服务器的后台保持功能处于活动状态

> ID：11808033
> 
> 赞同：0
> 
> 时间：2012-08-04T10:49:34.397
> 
> 标签：.net, multithreading, asp.net-mvc-3, web-services, recursion

我正在.Net 上开发一个 mvc 应用程序，它的扩展部分包含一个功能，可以将内容发布到不同的社交网络平台，如 Facebook、twitter 等。简而言之，它实际上是在不同的网络上自动发布指定的时间间隔和指定的时间。问题是发帖部分必须始终在后台匿名运行，与真实网站的状态没有任何联系，因此它可以随时检查时间/间隔和帖子。

目前我的控制器有一个递归函数，主要部分看起来像下面的代码，但就像在 mvc 中发生的那样，这个函数通过来自客户端浏览器的 url 调用启动，并且在调用之后浏览器进入等待状态，因为这个函数保持递归运行，直到浏览器在指定的无响应时间后取消请求。

当然这种行为并不理想，所以我想要的是：

*   使该功能独立，并在服务器的后台持续运行。
*   有人告诉我，如果我使用 WCF（Windows 通信基础）使其成为服务等工作，它会解决我的问题吗？我还没有 WCF，但如果能解决问题，我可以试一试。
*   还有其他方法可以实现吗？

*代码：*

```
 while (status == "1")
        {

            if (totalRows > 0)
            {

                for (int i = 1; i < totalRows; i++)
                {
                    myPostArray[i] = myPosts.Tables["myPosts"].Rows[i]["Postmsg"].ToString();
    //…
    //Post to the platform through respected API
    //…

                    System.Threading.Thread.Sleep(3000000000);
                }
                status = true;
            } else if (myPosts.Tables[0].Rows.Count == 0)
            {
                status = false;
            }
            TheRepeater(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:54:59.500

您确实需要为此提供单独的服务，该服务将执行以下操作：

*   接受来自您的 Web 应用程序的“开始处理”命令
*   返回“已确认，现在将开始处理” - 这将结束您的 Web 应用程序和服务之间的通信，释放通信通道并将控制权返回给 Web 服务器（而不是超时）
*   在您的服务中进行后台处理，可能在`sleep`周期结束时进行自动唤醒以进行下一次迭代

# iphone - iphone app第一个tabview不显示tableview数据

> ID：11808034
> 
> 赞同：1
> 
> 时间：2012-08-04T10:49:46.163
> 
> 标签：iphone, uitableview, uinavigationcontroller, uitabbarcontroller

我有一个应用程序已经在应用程序商店工作和销售了一段时间。我决定用 Webview 更新它。该应用程序底部有一个标签栏，前两个标签是导航视图，其中包含向下钻取的表格。第三个选项卡是新的 Web 视图，第四个选项卡是简单的图像和文本。

启动应用程序，我在第一个选项卡中看不到任何表格，其他所有表格都可以正常工作。如果我将两个导航选项卡交换在一个不在选项卡上工作的选项卡上，那么现在可以在选项卡 2 上工作，反之亦然。

我猜这与应用程序如何启动并显示第一个视图有关？

让我知道您需要查看什么代码？

***最后回答了自己***

我设法弄清楚这是第一个视图的加载问题，并更改了我的 App 委托以反映这一点：

**之前**：

```
 self.window.rootViewController = tabBarController; 
```

**之后**：

```
[window addSubview:tabBarController.view];
[window addSubview:navigationController.view];
[window makeKeyAndVisible]; 
```

我希望这对其他人有所帮助，这可能不是正确的方法，但它似乎对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T13:25:31.440

最后回答了自己

我设法弄清楚这是第一个视图的加载问题，并更改了我的 App 委托以反映这一点：

前：

```
 self.window.rootViewController = tabBarController; 
```

后：

```
[window addSubview:tabBarController.view];
[window addSubview:navigationController.view];
[window makeKeyAndVisible]; 
```

我希望这对其他人有所帮助，这可能不是正确的方法，但它似乎对我有用。

# http - linux下读取http包

> ID：11808037
> 
> 赞同：0
> 
> 时间：2012-08-04T10:49:53.760
> 
> 标签：http, packet-sniffers, rfc2616

我正在阅读 RFC 2616，我想查看所有 http 数据包。哪个工具最适合这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:28:58.873

尝试 htracr - [https://github.com/mnot/htracr/](https://github.com/mnot/htracr/)

顺便说一句，RFC2616 很快就会被取代；见 [http://trac.tools.ietf.org/wg/httpbis/trac/wiki](http://trac.tools.ietf.org/wg/httpbis/trac/wiki)

# php - 试图创建类似于 Facebook 的“点赞”系统

> ID：11808044
> 
> 赞同：1
> 
> 时间：2012-08-04T10:50:58.890
> 
> 标签：php, mysql, arrays, facebook, facebook-like

我正在使用 PHP 数组来收集已添加到我的 MySQL 数据库中的用户输入。由于这是来自用户输入的信息，因此我使用数据库中的 num_rows 创建的变量来确定 for 循环通过显示我的数组值运行的次数。for 循环包含一个显示数组的一个值的表单和一个“like”按钮（type=submit），并重复此表单直到显示所有值（从最新到最旧），然后是一个“like”按钮每个。

我希望用户能够单击“喜欢”按钮，为该帖子添加“喜欢”。我遇到的问题是我拥有的代码正在为每个帖子添加一个“喜欢”（因为代码会检查是否按下了“喜欢”按钮，并且由于“喜欢”按钮是由for 循环，每个“喜欢”按钮都具有相同的名称）。我试图通过根据递增变量为“喜欢”按钮命名来纠正此问题，但如果名称是变量或数组，该按钮似乎不起作用。

这是我的代码：

```
<?php
error_reporting (E_ALL ^ E_NOTICE);

session_start();
$userid = $_SESSION['userid'];
$username = $_SESSION['username'];
$userside = $_SESSION['side'];

echo "<b>Organized posts:</br><hr /></b>";

require("./postconnect.php");

$query = mysql_query("SELECT * FROM original ORDER BY postid ASC");
$numrows = mysql_num_rows($query);

$numrows = $numrows-1;

$sql = "SELECT postername FROM original ORDER BY postid ASC"; // select only the postername field from the table "original"
$result = mysql_query($sql); // process the query

$name_array = array(); // start an array

while($row = mysql_fetch_array($result)){ // cycle through each record returned
  $name_array[] = "".$row['postername'].""; // get the postername field and add to the array above
}

$sql = "SELECT post FROM original ORDER BY postid ASC"; // select only the post field from the table "original"
$result = mysql_query($sql); // process the query

$post_array = array(); // start an array

while($row = mysql_fetch_array($result)){ // cycle through each record returned
  $post_array[] = "".$row['post'].""; // get the post field and add to the array above
}

$sql = "SELECT posterside FROM original ORDER BY postid ASC"; // select only the posterside field from the table "original"
$result = mysql_query($sql); // process the query

$side_array = array(); // start an array

while($row = mysql_fetch_array($result)){ // cycle through each record returned
  $side_array[] = "".$row['posterside'].""; // get the posterside field and add to the array above
}

$sql = "SELECT likes FROM original ORDER BY postid ASC"; // select only the likes field from the table "original"
$result = mysql_query($sql); // process the query

$likes_array = array(); // start an array

while($row = mysql_fetch_array($result)){ // cycle through each record returned
  $likes_array[] = "".$row['likes'].""; // get the likes field and add to the array above
}

$i=$numrows;

for($i;$i>=0;$i--) {

    if ($side_array[$i]==1) {
        $color="red";
    }
    elseif ($side_array[$i]==2) {
        $color="blue";  
    }
    elseif ($side_array[$i]==3) {
        $color="green"; 
    }

    echo "<form action='./memberhag.php' method='post'>
            <table>
            <tr>
              <td><font color='$color'>$name_array[$i]</font> - $post_array[$i]</td>
        </tr>
        <tr>
          <td><input type='submit' name='likebtn' value='Like' /> <font color=$color>$name_array[$i]</font> has $likes_array[$i] likes!</td>
        </tr>
        </table>
        </form>";

    if ($_POST['likebtn']) {

            $numlikes = $likes_array[$i];
        $numlikes = $numlikes + 1;      
        mysql_query("UPDATE original SET likes = '$numlikes' WHERE postername = '$name_array[$i]'");

    }
}

?> 
```

这让我困惑了好一阵子……我什至尝试过使用 while 循环而不是 for 循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T11:02:10.760

有很多表格来做到这一点是一种可能的解决方案，但我倾向于只有一个表格和几个按钮。主要问题似乎是，正如您所说，您将按钮称为相同的东西，这意味着您无法确定按下了哪个按钮。

一个*非常基本*的解决方法是这样做：

```
<input type='submit' name='likebtn_{$i}' value='Like' /> 
```

这至少会给你一个序数，你可以用它来区分按钮。但是，您最好`posts`在此循环中循环，因此您可以执行此操作（假设您`id`在此表中调用了一个主键：

```
<input type='submit' name='likebtn_{$post['id']}' value='Like' /> 
```

啊，是的，当你修复你的`POST`部分时（即当有人按下“喜欢”按钮时），你需要阅读 $_POST 中的内容并解析出被推送的内容。为了帮助调试它，暂时将它添加到您的 post 处理程序中：

```
print_r($_POST); exit(); 
```

这将为您提供需要解码的输出（检查每个帖子的输出是否不同）。您还需要更改您的`if`声明以检测帖子；改变这个：

```
if ($_POST['likebtn']) { 
```

至：

```
if ($_POST) { 
```

这是必要的，因为您现在没有要检测的单个名称，所以我们现在检测数组是否`$_POST`包含任何内容（如果有，我们知道这是一个后操作）。在这个里面，放`print_r()`上面，看看里面是什么。

现在，您可以采取以下措施来改进您的代码：

*   目前尚不清楚该表的`original`作用，所以我可能会重命名它。
*   当您已经完成时，您似乎对此表有几个查询`SELECT * FROM original`- 所以这里有太多查询
*   请记住，在这样的系统中，您可能需要其他表，例如谁做了“喜欢”（可能称为`user`）
*   而不是`for`循环，将其切换到您的帖子表上的 while 循环。
*   尽量不要在语句中放置大块的 HTML `echo "x"`，因为一段时间后很难调试。最好跳出 PHP 模式，在 HTML 模式下使用简单的循环和变量输出。

编辑，以回应您的评论：

> 好的，我做了 if ($_POST) { print_r } 并为其中一篇文章获取了 Array ( [likebtn_4] => Like )。:-)——杰里米

伟大的！好的，试试这样的：

```
if ($_POST) {
    $find = 'likebtn_';
    foreach ($_POST as $key => $value) {
        $likeKey = (int) str_replace($key, $find, '');
        if ($likeKey) {
            // If this runs, do your update against row $likeKey
            // Note that I've forced it to be an int, to avoid security issues
        }
    }
} 
```

最重要的是，试着理解*为什么*会这样。如有必要，请围绕它进行一些阅读。我基本上遍历了post 操作的*关联数组*，并测试了每个键（即元素名称）以查看它是否包含字符串“likebtn_”。如果是这样，我将余数转换为整数，然后您可以在`UPDATE`语句中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T11:26:39.383

这些查询中的任何一个实际上都没有不同的逻辑。因此，显而易见的（只读）事情是将它们组合成一个语句。写代码的时候尽量少写。信不信由你，这将大大提高代码的质量。但是，不要为了实现这个目标而牺牲清晰度，有时清晰度会用更少的行来表达，有时则不然。

我将假设您的数据库，并且您唯一的表具有这种形式：

```
|postername|post|posterside|likes| 
```

这意味着原始表中的每一行都有对应的列，如上所述。

所以....

```
if(!empty($_POST) && !!$_POST['likebtn']) {
    //Do your likebtn stuff here.
}
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");
$sql = "SELECT * FROM colums ORDER BY postid ASC";
$result = mysqli->query($sql);
while($row = $result->fetch_assoc()){
    switch($row[2]) {
        case 1:
             $color = "red";
             break;
        case 2:
             $color = "blue";
             break;
        case 3:
             $color = "green";
             break;
        default:
            //Handle when this case doesn't match
     }
//The rest of your table would go hear, remember that $row[0] is the corresponding
//postername for said row.  You will loop through rows until there are no more.
//Study Mysql injection, you are in danger of it now.  Good luck
} 
```

# html - div在表格单元格中的绝对位置

> ID：11808051
> 
> 赞同：0
> 
> 时间：2012-08-04T10:52:41.803
> 
> 标签：html, html-table, css-position

我有一个元素`<div>`，每个元素中都有`<td>`元素。我需要制作一个绝对位置的 div。但这似乎不起作用。

这是[示例](http://jsfiddle.net/eric777/bZDQT/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:00:01.697

要将绝对定位在元素内，我认为您需要使用边距而不是通常的顶部、左侧等。

```
div {
    position: absolute;
    margin: 0 0 0 0; 
}​ 
```

编辑：看看这个：http: [//jsfiddle.net/bZDQT/6/](http://jsfiddle.net/bZDQT/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:07:08.083

您必须设置表格的一些宽度和高度才能完成这项工作。由于 table 内唯一的元素是绝对的 div，所以它没有被计算。

# java - 爪哇玩！2 不重新编译

> ID：11808053
> 
> 赞同：2
> 
> 时间：2012-08-04T10:52:48.107
> 
> 标签：java, playframework-2.0

我的游戏运行完美，但我加载了示例项目表单并对其进行了一些更改。现在我遇到了一个我自己无法解决的问题。

我的路线如下所示：

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /                           controllers.Login.blank()
# Login
GET     /login                      controllers.Login.blank()
# Signup
GET     /signup                     controllers.SignUp.blank()
GET     /users/fakeuser             controllers.SignUp.edit()
POST    /signup                     controllers.SignUp.submit()

# Contact
GET     /contacts                   controllers.Contacts.blank()
GET     /contacts/fakecontact       controllers.Contacts.edit()
POST    /contacts                   controllers.Contacts.submit()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

如您所见，前两行重定向到 Login.blank()

问题是如果我这样做：

```
cd forms
play
run 
```

并转到 localhost:9000/login

我收到以下错误：

```
Action not found
1GET/controllers.Application.index()
2GET/signupcontrollers.SignUp.blank()
3GET/users/fakeusercontrollers.SignUp.edit()
4POST/signupcontrollers.SignUp.submit()
5GET/contactscontrollers.Contacts.blank()
6GET/contacts/fakecontactcontrollers.Contacts.edit()
7POST/contactscontrollers.Contacts.submit()
8GET/assets/$file<.+>controllers.Assets.at(path:String = "/public", file:String) 
```

如您所见，播放！没有更新路由文件。它使用旧的。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T11:24:04.003

做一个`play clean`然后`play run`。

有时，Play 的路由文件有问题。

# ruby-on-rails - 是否可以拆分数组并将拆分重新注入？

> ID：11808055
> 
> 赞同：0
> 
> 时间：2012-08-04T10:53:17.270
> 
> 标签：ruby-on-rails, ruby

好的，我需要的有点奇怪，如下所示：

线索数组是手动创建的，数据数组是动态创建的。Xpath 函数将我们的线索作为输入并将结果映射到数据以创建动态数组

```
clues = Array.new

clues << 'Power supply type'    
clues << 'Slots'
clues << 'Software included'

selector = "//td[text()='%s']/following-sibling::td"

data = Array.new
data = clues.map do |clue| 
         xpath = selector % clue
         [clue, doc.at(xpath).text.strip]
       end 
```

数据数组中的代码使用两个输入，线索和选择器
，线索[index] 处的每个项目进入 %s 处的选择器成为

```
//td[text()='%s']/following-sibling::td  
//td[text()='Power supply type']/following-sibling::td
//td[text()='Slots']/following-sibling::td
//td[text()='Software included']/following-sibling::td 
```

然后 Xpath 使用我们存储的命令从网页中获取信息，然后将所有这些作为元素存储在数组 data 中，如 data[0]...data[3]

Data[2] 看起来像这样，一大块信息

```
Symantec Norton Internet Security (60 days live update); Recovery partition (inc
luding possibility to recover system; applications and drivers separately); Opti
onal re-allocation of recovery partition; 
```

我想获取此处列出的每个软件并将其单独存储，例如

```
data[2]Symantec Norton Internet Security (60 days live update); 
data[3]Recovery partition (including possibility to recover system; 
data[4]Optional re-allocation of recovery partition; 
```

所以我假设我需要以某种方式拆分 data[2] 并将其添加回数据数组？

我正在尝试隔离这个特定的索引，因为我需要它在多行上以便最终输出到电子表格

**最终期望的输出**

![在此处输入图像描述](../Images/f7419be74c7a1bf1b562a30f06f22a82.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:53:07.503

Just to clarify, you have an array like this:

```
data << 'Power supply type'
data << 'Slots'
data << 'Symantec Norton Internet Security (60 days live update); Recovery partition (inc luding possibility to recover system; applications and drivers separately); Optional re-allocation of recovery partition;'
data << 'Something else' 
```

And you want it become this?

```
data << 'Power supply type'
data << 'Slots'
data << Symantec Norton Internet Security (60 days live update);
data << Recovery partition (inc luding possibility to recover system;
data << applications and drivers separately);
data << Optional re-allocation of recovery partition;
data << 'Something else' 
```

You can do this by doing the following:

```
temp = []
data[2].split(/(;)/).each_slice(2){ |s| temp << s.join.strip }
data[2] = temp
data.flatten! 
```

Or if you want to iterate over all items in the data array:

```
data.each_with_index do |x, i|
  temp = []
  data[i].split(/(;)/).each_slice(2){ |s| temp << s.join.strip }
  data[i] = temp
end
data.flatten! 
```

Basically what is happening is that it takes the string, splits it up on the ';', re-inserts the ';' where it was removed, replaces the original spot in the data array with the array of the split string, then flattens the entire data array back into one array.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:21:34.953

```
data = data[0..1] + data[2].scan(/.*?;/) + data[3..-1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T15:44:44.670

```
data = Array.new
clues.each do |clue|
  xpath = selector % clue
  text = doc.at(xpath).text.strip
  if clue == 'Software included'
    values = text.scan(/.+?;/)
    values << text if values.empty? # text did not contain a semicolon
    data << [clue, values.shift.strip]
    values.each do |value|
      data << ['', value.strip]
    end
  else
    data << [clue, text]
  end
end 
```

输出（缩进更易读）：

```
[
  ["Power supply type", "400w"],
  ["Slots", "2"],
  ["Software included", "Symantec Norton Internet Security (60 days live update);"],
  ["", "Recovery partition (including possibility to recover system;"],
  ["", "applications and drivers separately);"],
  ["", "Optional re-allocation of recovery partition;"]
] 
```

# extjs - Kitchen Sink 导航中的页面导航

> ID：11808061
> 
> 赞同：1
> 
> 时间：2012-08-04T10:54:21.200
> 
> 标签：extjs

我已经开发了一个基于 sencha touch 1 中的厨房水槽设计的应用程序。对于 itemDisclosure 上的列表，我需要导航到另一个具有菜单的 js 页面。例如，如果它是员工列表，则通过单击特定员工我应该得到一个不同的页面，其中包含**工资详细信息**，**休假详细信息**等。

```
 demos.List = new Ext.Panel ({
layout : 'fit',
    cls: 'demo-list',
    items: [{
        width: Ext.is.Phone ? undefined : 300,
        height: Ext.is.Phone ? undefined : 500,
        xtype: 'list',
        store: demos.ListStore, //getRange(0, 9),
        itemTpl: '<div class="contact"><strong>{firstName}</strong> {lastName}</div>',
        onItemDisclosure: function(record, btn, index) {
            Ext.Msg.alert('Tap', 'Disclose more info for ' +  record.get('firstName'));
             ---- From here I want to open a new page ----
             ---- I am following Kitchen Sink architecture -----

            }

    }]
/*}]*/ 
```

});

我必须导航到employeeMenu.js

任何人都可以帮助我吗？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:47:37.480

Animesh，您必须在项目中添加employeeMenu，如下所示

```
items: [{
        width: Ext.is.Phone ? undefined : 300,
        height: Ext.is.Phone ? undefined : 500,
        xtype: 'list',
        store: demos.ListStore, //getRange(0, 9),
        itemTpl: '<div class="contact"><strong>{firstName}</strong> {lastName}</div>',
        onItemDisclosure: function(record, btn, index) {
            Ext.Msg.alert('Tap', 'Disclose more info for ' +  record.get('firstName'));
             ---- From here I want to open a new page ----
             ---- I am following Kitchen Sink architecture -----

            }

    },{employeeMenu}] 
```

# jquery - jQuery：CSS 选择器：如何选择除特定类之外的所有元素？

> ID：11808062
> 
> 赞同：1
> 
> 时间：2012-08-04T10:54:47.953
> 
> 标签：jquery, css, jquery-selectors

我需要选择 div#request 的内容，而不是 .requestHeader 的内容。我应该使用哪个选择器？

```
<div id="request">
  <h3 class="requestHeader">
    Request Details
  </h3>
    Dear Human, In this life you're allowed to make only one request. Keep in mind! Even that request will never be resolved!!
    <br/>
      Request for Money&nbsp;
      75.00&nbsp;
      USD&nbsp;
      per day
</div> 
```

我试过了`div#request:not(.requestHeader)`。它不起作用，并给出与`div#request`. 我错过了什么？

所需输出：（仅用于打印）

```
 Dear Human, In this life you're allowed to make only one request. Keep in mind! Even that request will never be resolved!!
    <br/>
      Request for Money&nbsp;
      75.00&nbsp;
      USD&nbsp;
      per day 
```

我需要在没有链接的情况下执行此操作。即`$('#request'):not('requestHeader')`不能做。我只是有自由去做这件事`$('SELECTOR-HERE')`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T10:59:04.723

```
$('*','#request').not(".requestHeader") 
```

查找元素内的所有元素`#request`，然后排除具有类的元素`.requestHeader`

您遇到的问题可能是`#request`div 内没有其他元素，文本只是文本节点而不是元素，因此要选择目标 div 的内容，您可能需要使用`andSelf()`并且可能`contents()`取决于您的意图使用选择器，这是回答问题所需的关键部分，您是否打算仅替换文本或将其作为 DOM 元素进行交互等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:08:40.773

```
$('#request').not('.requestHeader') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T11:26:09.087

如果您可以更改 HTML，我建议您在文本周围放置一个 span 元素。这将允许您轻松选择除 requestHeader 类之外的所有内容。

看到这个 jsFiddle [http://jsfiddle.net/davew9999/gepga/](http://jsfiddle.net/davew9999/gepga/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-25T07:32:32.287

此 jQuery 将应用于 #request 元素中的所有元素，但具有 .requestHeader 类的元素除外。

```
$("#request *:not('.requestHeader')"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-27T06:43:10.950

我看到的唯一方法是过滤文本节点的包装元素的内容。

```
var theText = $('#request').contents().filter(function() {
     // Text nodes only
    return this.nodeType === 3;
}).text();

// Trim leading and trailing white spaces
console.log($.trim(theText)); 
```

见 JSFiddle：http: [//jsfiddle.net/YNLwG/1/](http://jsfiddle.net/YNLwG/1/)

# ios - UISegmentedControl 错误自定义处理

> ID：11808066
> 
> 赞同：1
> 
> 时间：2012-08-04T10:55:01.667
> 
> 标签：ios, uisegmentedcontrol

我使用以下代码自定义了 UISegmentedControl 的外观：

```
UIImage *bg = [UIImage imageNamed:@"segment_bg"];
UIImage *bg_sel = [UIImage imageNamed:@"segment_sel"];
UIImage *leftSep = [UIImage imageNamed:@"segment_div_sx"];
UIImage *rightSep = [UIImage imageNamed:@"segment_div_dx"];

UIEdgeInsets selectionInsets = UIEdgeInsetsMake(0, 8, 0, 8);

[self.segmentedControl setBackgroundImage:[bg resizableImageWithCapInsets:UIEdgeInsetsZero]
                        forState:UIControlStateNormal
                      barMetrics:UIBarMetricsDefault];

[self.segmentedControl setBackgroundImage:[bg_sel resizableImageWithCapInsets:selectionInsets]
                        forState:UIControlStateSelected
                      barMetrics:UIBarMetricsDefault];

[self.segmentedControl setBackgroundImage:[bg resizableImageWithCapInsets:UIEdgeInsetsZero]
                        forState:UIControlStateNormal
                      barMetrics:UIBarMetricsDefault];

[self.segmentedControl setDividerImage:[bg resizableImageWithCapInsets:UIEdgeInsetsZero]
          forLeftSegmentState:UIControlStateNormal
            rightSegmentState:UIControlStateNormal
                   barMetrics:UIBarMetricsDefault];

[self.segmentedControl setDividerImage:rightSep
          forLeftSegmentState:UIControlStateSelected
            rightSegmentState:UIControlStateNormal
                   barMetrics:UIBarMetricsDefault];

[self.segmentedControl setDividerImage:leftSep
          forLeftSegmentState:UIControlStateNormal
            rightSegmentState:UIControlStateSelected
                   barMetrics:UIBarMetricsDefault]; 
```

如下图所示，一切看起来都很好，切换时其他部分看起来也不错：

![正确的图像](../Images/cc38a1d085b7d0753d6ecb31777f9a65.png)

但是当我从第三段切换到第一段时，段分隔器是错误的（右端没有圆角，所以不是正确的分隔器）。

![错误的图像](../Images/3cf42503fc51ebec0e4d3569ae6ff5bd.png)

如果分段控件有更多段，则总是（并且仅）在从第三段切换到第一段时发生这种情况。

我发现在*valueChanged:*事件更正显示之后将*setNeedsLayout*消息发送到 UISegmentedControl 对象。

 *现在，我自定义分段控件的方式有问题吗？它是一个已知的错误还是我应该将其报告为一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:53:23.230

有点丑陋的解决方法，但我设法用以下方法修复它，直到苹果自己修复它。

首先，您需要继承 UISegmentedControl 并添加以下内容：

```
@implementation MJSegmentedControl

- (void)layoutSubviews
{
    [super layoutSubviews];
    NSInteger cachedIndex = self.selectedSegmentIndex;
    self.selectedSegmentIndex = 0;
    self.selectedSegmentIndex = cachedIndex;
}

@end 
```*

# php - 如何在 php 中添加启用或禁用格式的复选框？

> ID：11808070
> 
> 赞同：0
> 
> 时间：2012-08-04T10:55:40.897
> 
> 标签：php, mysql

两个数据库表

1-customer_table

```
customer_id 客户组
1 1,2,3
2 -
3 1,5,3,4

```

和第二张桌子

2组

```
group_id 组名
1个
2乙
3℃
4 天
5 E

```

我想用复选框为在客户表中添加组创建代码。

当我们在客户 ID 1 中添加组时，复选框显示为 1、2、3、4、5，其中 1、2、3 显示为选中或禁用的复选框，其余仅作为复选框...。

```
 `if($row['customer_group']=='')
 {
          $res = "SELECT grp_id, grp_name FROM grp_table";
         $result1 = mysql_query($res);
         while($row1 = mysql_fetch_array($result1)) 
         {
         echo "<input name='group[]' id='group[]'  type='checkbox' value='$row1[grp_id]' />"."". $row1['grp_name']."&nbsp;" ;
         echo "<br>";       
         }
 }
 else
 {
         $res = "SELECT grp_id, grp_name FROM group_table";
         $result1 = mysql_query($res);

          $lst_rp = explode(',', $row['customer_group']);
             foreach($lst_rp as $rp_id) 
             {

             while($row1 = mysql_fetch_array($result1)) 
                {
                    echo  $rp_id;
                 if($row1[grp_id]=='$rp_id')
                    {
                    echo "<input name='group[]' id='group[]'   checked='checked' type='checkbox' value='$row1[grp_id]' disabled />"."". $row1['sim_grp_name']."&nbsp;" ;
                    echo "<br>";        
                    }
                    else
                    {
                    echo "<input name='group[]' id='group[]'   type='checkbox' value='$row1[grp_id]'   />"."". $row1['grp_name']."&nbsp;" ;
                    echo "<br>";    
                    }
                }

             }
    }` 
```

`?>`

但我无法达到我的最终结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:26:19.483

您可能想显示复选框。您需要将第 4 行更改为 disabled="disabled"

```
 1  while($row1 = mysql_fetch_array($result1)) {
   2  echo  $rp_id;
   3  if($row1[grp_id]=='$rp_id') {
   4  echo "<input name='group[]' id='group[]'   checked='checked' type='checkbox' value='$row1[grp_id]' disabled="disabled" />"."". $row1['sim_grp_name']."&nbsp;" ;
      echo "<br>"; } else {
      echo "<input name='group[]' id='group[]'   type='checkbox' value='$row1[grp_id]'   />"."". $row1['grp_name']."&nbsp;" ;
      echo "<br>";
       } 
```

# xml - Xslt：动态创建根元素（起始标签）

> ID：11808073
> 
> 赞同：0
> 
> 时间：2012-08-04T10:56:08.537
> 
> 标签：xml, xml-parsing, xslt-1.0, xmlspy

以下是 XML 数据中的节点

```
 <WebServiceUrl>"http://webser.part.site"</WebServiceUrl>
<UserName>nida</UserName>
<Passsword>123</Password>
</ProcessData> 
```

我已将此节点值传递给 Xslt 服务，现在我在参数中有此 url 节点值，例如

```
<xsl:param name="UserName"/>
<xsl:param name="Password"/>
<xsl:param name="WebServiceUrl"/> 
```

现在我想创建一个 soapenv:Envelope 标签并在其中使用这个值

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="$WebServiceUrl"> 
```

所以我想从 XSLT 代码中得到的最终输出是：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"          xmlns:web="http://webservice2.partner.insite">
 <soapenv:Header/>
<soapenv:Body>
<web:upload>
<web:username>nida</web:username>
<web:password>123</web:password>
</web:upload></soapenv:Body></soapenv:Envelope> 
```

**请帮帮我**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:01:02.803

**这种转变**：

```
<xsl:stylesheet version="1.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:ext="http://exslt.org/common"
     xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
     exclude-result-prefixes="ext soapenv">
        <xsl:output omit-xml-declaration="yes" indent="yes"/>
      <xsl:param name="pUserName" select="'nida'"/>
      <xsl:param name="pPassword" select="'123'"/>
      <xsl:param name="pWebServiceUrl" select="'http://webser.part.site'"/>

        <xsl:variable name="vrtfDummy">
         <xsl:element name="web:dummy" namespace="{$pWebServiceUrl}"/>
        </xsl:variable>

        <xsl:variable name="vNS" select="ext:node-set($vrtfDummy)/*/namespace::web"/>

     <xsl:template match="/*">
       <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
           <xsl:copy-of select="$vNS"/>
         <soapenv:Body>
           <xsl:element name="web:upload" namespace="{$vNS}">
             <xsl:element name="web:username" namespace="{$vNS}">
               <xsl:value-of select="$pUserName"/>
             </xsl:element>
             <xsl:element name="web:password" namespace="{$vNS}">
               <xsl:value-of select="$pPassword"/>
             </xsl:element>
           </xsl:element>
         </soapenv:Body>
         </soapenv:Envelope>
     </xsl:template>
</xsl:stylesheet> 
```

**当应用于任何 XML 文档（未使用）时，会产生所需的正确结果：**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://webser.part.site">
   <soapenv:Body>
      <web:upload>
         <web:username>nida</web:username>
         <web:password>123</web:password>
      </web:upload>
   </soapenv:Body>
</soapenv:Envelope> 
```

# machine-learning - 期望最大化技术的直观解释是什么？

> ID：11808074
> 
> 赞同：117
> 
> 时间：2012-08-04T10:56:12.230
> 
> 标签：machine-learning, cluster-analysis, data-mining, mathematical-optimization, expectation-maximization

期望最大化（EM）是一种对数据进行分类的概率方法。如果我错了，如果它不是分类器，请纠正我。

这种 EM 技术的直观解释是什么？这里是`expectation`什么，是什么`maximized`？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2017-04-22T15:59:08.440

*注意：这个答案背后的代码可以在[这里](https://github.com/ajcr/em-explanation/blob/master/em-notebook-2.ipynb)找到。*

* * *

假设我们从两个不同的组（红色和蓝色）中采样了一些数据：

[![在此处输入图像描述](../Images/2a86a71efe68542973a876938ed857bc.png)](https://i.stack.imgur.com/JDJ1n.png)

在这里，我们可以看到哪个数据点属于红色或蓝色组。这使得很容易找到表征每个组的参数。例如，红色组的平均值在 3 左右，蓝色组的平均值在 7 左右（如果需要，我们可以找到确切的平均值）。

一般而言，这称为*最大似然估计*。给定一些数据，我们计算最能解释该数据的参数（或多个参数）的值。

现在想象一下，我们*看*不到哪个值是从哪个组中采样的。一切对我们来说都是紫色的：

[![在此处输入图像描述](../Images/243f3a8c23022dd5465fdf33d8f197a4.png)](https://i.stack.imgur.com/uvcRO.png)

这里我们知道有*两组*值，但我们不知道任何特定值属于哪个组。

我们还能估计最适合这个数据的红色组和蓝色组的均值吗？

是的，我们通常可以！**期望最大化**为我们提供了一种方法。该算法背后的一般思想是这样的：

1.  从每个参数可能的初始估计开始。
2.  计算每个参数产生数据点的*可能性。*
3.  根据参数产生的可能性，计算每个数据点的权重，指示它是更红还是更蓝。将权重与数据（**期望**）结合起来。
4.  **使用权重调整后的数据（最大化**）计算更好的参数估计值。
5.  重复步骤 2 到 4，直到参数估计收敛（该过程停止产生不同的估计）。

这些步骤需要进一步解释，所以我将逐步解决上述问题。

# 示例：估计均值和标准差

我将在此示例中使用 Python，但如果您不熟悉该语言，代码应该很容易理解。

假设我们有两个组，红色和蓝色，其值分布如上图所示。具体来说，每个组都包含一个从具有以下参数的[正态分布中提取的值：](https://en.wikipedia.org/wiki/Normal_distribution)

```
import numpy as np
from scipy import stats

np.random.seed(110) # for reproducible results

# set parameters
red_mean = 3
red_std = 0.8

blue_mean = 7
blue_std = 2

# draw 20 samples from normal distributions with red/blue parameters
red = np.random.normal(red_mean, red_std, size=20)
blue = np.random.normal(blue_mean, blue_std, size=20)

both_colours = np.sort(np.concatenate((red, blue))) # for later use... 
```

这是这些红色和蓝色组的图像（以免您不得不向上滚动）：

[![在此处输入图像描述](../Images/2a86a71efe68542973a876938ed857bc.png)](https://i.stack.imgur.com/JDJ1n.png)

当我们可以看到每个点的颜色（即它属于哪个组）时，就很容易估计每个组的均值和标准差。我们只需将红色和蓝色值传递给 NumPy 中的内置函数。例如：

```
>>> np.mean(red)
2.802
>>> np.std(red)
0.871
>>> np.mean(blue)
6.932
>>> np.std(blue)
2.195 
```

但是如果我们*看*不到点的颜色怎么办？也就是说，每个点都被染成紫色，而不是红色或蓝色。

为了尝试恢复红色组和蓝色组的均值和标准差参数，我们可以使用期望最大化。

我们的第一步（上面的第**1**步）是猜测每个组的均值和标准差的参数值。我们不必聪明地猜测；我们可以选择我们喜欢的任何数字：

```
# estimates for the mean
red_mean_guess = 1.1
blue_mean_guess = 9

# estimates for the standard deviation
red_std_guess = 2
blue_std_guess = 1.7 
```

这些参数估计产生如下所示的钟形曲线：

[![在此处输入图像描述](../Images/50d847713bc1c93e60ae10a2c9e9bb0a.png)](https://i.stack.imgur.com/GxLlr.png)

这些都是不好的估计。例如，对于合理的点组，这两种方法（垂直虚线）看起来都远离任何类型的“中间”。我们希望改进这些估计。

下一步（**步骤 2**）是计算每个数据点出现在当前参数猜测下的可能性：

```
likelihood_of_red = stats.norm(red_mean_guess, red_std_guess).pdf(both_colours)
likelihood_of_blue = stats.norm(blue_mean_guess, blue_std_guess).pdf(both_colours) 
```

在这里，我们使用我们当前对红色和蓝色均值和标准差的猜测，简单地将每个数据点放入正态分布的[概率密度函数中。](https://en.wikipedia.org/wiki/Normal_distribution)例如，这告诉我们，根据我们目前的猜测，1.761 处的数据点*更*可能是红色（0.189）而不是蓝色（0.00003）。

对于每个数据点，我们可以将这两个似然值转换为权重（**步骤 3**），以便它们总和为 1，如下所示：

```
likelihood_total = likelihood_of_red + likelihood_of_blue

red_weight = likelihood_of_red / likelihood_total
blue_weight = likelihood_of_blue / likelihood_total 
```

使用我们当前的估计和新计算的权重，我们现在可以计算红色和蓝色组的均值和标准差的*新估计（***步骤 4**）。

*我们使用所有*数据点两次计算平均值和标准差，但权重不同：一次用于红色权重，一次用于蓝色权重。

直觉的关键是，颜色在数据点上的权重越大，数据点对该颜色参数的下一次估计的影响就越大。这具有将参数“拉”到正确方向的效果。

```
def estimate_mean(data, weight):
    """
    For each data point, multiply the point by the probability it
    was drawn from the colour's distribution (its "weight").

    Divide by the total weight: essentially, we're finding where 
    the weight is centred among our data points.
    """
    return np.sum(data * weight) / np.sum(weight)

def estimate_std(data, weight, mean):
    """
    For each data point, multiply the point's squared difference
    from a mean value by the probability it was drawn from
    that distribution (its "weight").

    Divide by the total weight: essentially, we're finding where 
    the weight is centred among the values for the difference of
    each data point from the mean.

    This is the estimate of the variance, take the positive square
    root to find the standard deviation.
    """
    variance = np.sum(weight * (data - mean)**2) / np.sum(weight)
    return np.sqrt(variance)

# new estimates for standard deviation
blue_std_guess = estimate_std(both_colours, blue_weight, blue_mean_guess)
red_std_guess = estimate_std(both_colours, red_weight, red_mean_guess)

# new estimates for mean
red_mean_guess = estimate_mean(both_colours, red_weight)
blue_mean_guess = estimate_mean(both_colours, blue_weight) 
```

我们对参数有新的估计。要再次改进它们，我们可以跳回第 2 步并重复该过程。我们这样做直到估计收敛，或者在执行了一些迭代之后（**步骤 5**）。

对于我们的数据，这个过程的前五次迭代看起来像这样（最近的迭代有更强的外观）：

[![在此处输入图像描述](../Images/e330126564b863847010533ae3061a9a.png)](https://i.stack.imgur.com/QbKmW.png)

我们看到均值已经在某些值上收敛，曲线的形状（由标准差控制）也变得更加稳定。

如果我们继续进行 20 次迭代，我们将得到以下结果：

[![在此处输入图像描述](../Images/d3ac3bd5352c13395a0c9a9afeef5bb8.png)](https://i.stack.imgur.com/RVFBC.png)

EM 过程已经收敛到以下值，结果非常接近实际值（我们可以看到颜色 - 没有隐藏变量）：

```
 | EM guess | Actual |  Delta
----------+----------+--------+-------
Red mean  |    2.910 |  2.802 |  0.108
Red std   |    0.854 |  0.871 | -0.017
Blue mean |    6.838 |  6.932 | -0.094
Blue std  |    2.227 |  2.195 |  0.032 
```

在上面的代码中，您可能已经注意到新的标准差估计是使用先前迭代的均值估计来计算的。最终，如果我们首先计算平均值的新值并不重要，因为我们只是在某个中心点周围找到值的（加权）方差。我们仍然会看到参数的估计收敛。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-08-04T20:09:38.927

EM 是一种在模型中的某些变量未被观察到时（即当您有潜在变量时）最大化似然函数的算法。

你可能会问，如果我们只是想最大化一个函数，为什么我们不直接使用现有的机制来最大化一个函数。好吧，如果您尝试通过获取导数并将它们设置为零来最大化它，您会发现在许多情况下，一阶条件没有解决方案。有一个先有鸡还是先有蛋的问题，要解决模型参数，您需要知道未观察到的数据的分布；但是您未观察到的数据的分布是您的模型参数的函数。

EM 试图通过迭代猜测未观察到的数据的分布来解决这个问题，然后通过最大化实际似然函数的下限来估计模型参数，并重复直到收敛：

EM算法

从猜测模型参数的值开始

E-step：对于每个具有缺失值的数据点，在给定模型参数的当前猜测和观察到的数据的情况下，使用您的模型方程求解缺失数据的分布（请注意，您正在求解每个缺失值的分布值，而不是期望值）。现在我们有了每个缺失值的分布，我们可以计算似然函数对未观察到的变量的*期望值。*如果我们对模型参数的猜测是正确的，那么这个预期的可能性就是我们观察到的数据的实际可能性；如果参数不正确，它将只是一个下限。

M-step：现在我们已经有了一个没有未观察到的变量的预期似然函数，像在完全观察到的情况下一样最大化该函数，以获得模型参数的新估计。

重复直到收敛。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-07-11T15:11:02.877

这是理解期望最大化算法的简单方法：

**1-**阅读 Do 和 Batzoglou 的这篇[EM 教程论文](http://ai.stanford.edu/~chuongdo/papers/em_tutorial.pdf)。

**2-**您的脑海中可能有问号，请查看此数学堆栈交换[页面](https://math.stackexchange.com/questions/25111/how-does-expectation-maximization-work)上的解释。

**3-**看看我用 Python 编写的这段代码，它解释了第 1 项的 EM 教程文件中的示例：

***警告：***代码可能混乱/次优，因为我不是 Python 开发人员。但它完成了这项工作。

```
import numpy as np
import math

#### E-M Coin Toss Example as given in the EM tutorial paper by Do and Batzoglou* #### 

def get_mn_log_likelihood(obs,probs):
    """ Return the (log)likelihood of obs, given the probs"""
    # Multinomial Distribution Log PMF
    # ln (pdf)      =             multinomial coeff            *   product of probabilities
    # ln[f(x|n, p)] = [ln(n!) - (ln(x1!)+ln(x2!)+...+ln(xk!))] + [x1*ln(p1)+x2*ln(p2)+...+xk*ln(pk)]     

    multinomial_coeff_denom= 0
    prod_probs = 0
    for x in range(0,len(obs)): # loop through state counts in each observation
        multinomial_coeff_denom = multinomial_coeff_denom + math.log(math.factorial(obs[x]))
        prod_probs = prod_probs + obs[x]*math.log(probs[x])

    multinomial_coeff = math.log(math.factorial(sum(obs))) -  multinomial_coeff_denom
    likelihood = multinomial_coeff + prod_probs
    return likelihood

# 1st:  Coin B, {HTTTHHTHTH}, 5H,5T
# 2nd:  Coin A, {HHHHTHHHHH}, 9H,1T
# 3rd:  Coin A, {HTHHHHHTHH}, 8H,2T
# 4th:  Coin B, {HTHTTTHHTT}, 4H,6T
# 5th:  Coin A, {THHHTHHHTH}, 7H,3T
# so, from MLE: pA(heads) = 0.80 and pB(heads)=0.45

# represent the experiments
head_counts = np.array([5,9,8,4,7])
tail_counts = 10-head_counts
experiments = zip(head_counts,tail_counts)

# initialise the pA(heads) and pB(heads)
pA_heads = np.zeros(100); pA_heads[0] = 0.60
pB_heads = np.zeros(100); pB_heads[0] = 0.50

# E-M begins!
delta = 0.001  
j = 0 # iteration counter
improvement = float('inf')
while (improvement>delta):
    expectation_A = np.zeros((5,2), dtype=float) 
    expectation_B = np.zeros((5,2), dtype=float)
    for i in range(0,len(experiments)):
        e = experiments[i] # i'th experiment
        ll_A = get_mn_log_likelihood(e,np.array([pA_heads[j],1-pA_heads[j]])) # loglikelihood of e given coin A
        ll_B = get_mn_log_likelihood(e,np.array([pB_heads[j],1-pB_heads[j]])) # loglikelihood of e given coin B

        weightA = math.exp(ll_A) / ( math.exp(ll_A) + math.exp(ll_B) ) # corresponding weight of A proportional to likelihood of A 
        weightB = math.exp(ll_B) / ( math.exp(ll_A) + math.exp(ll_B) ) # corresponding weight of B proportional to likelihood of B                            

        expectation_A[i] = np.dot(weightA, e) 
        expectation_B[i] = np.dot(weightB, e)

    pA_heads[j+1] = sum(expectation_A)[0] / sum(sum(expectation_A)); 
    pB_heads[j+1] = sum(expectation_B)[0] / sum(sum(expectation_B)); 

    improvement = max( abs(np.array([pA_heads[j+1],pB_heads[j+1]]) - np.array([pA_heads[j],pB_heads[j]]) ))
    j = j+1 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-08-04T21:45:11.330

从技术上讲，“EM”这个术语有点未指定，但我假设您指的是高斯混合建模聚类分析技术，这是一般 EM 原理的一个*实例*。

实际上，**EM 聚类分析不是分类器**。我知道有些人认为聚类是“无监督分类”，但实际上聚类分析是完全不同的。

人们对聚类分析的主要区别，以及人们对分类的最大误解是：**在聚类分析中，没有“正确的解决方案”**。它是一种知识*发现*方法，它实际上是为了发现*新*的东西！这使得评估非常棘手。它通常使用已知的分类作为参考进行评估，但这并不总是合适的：您拥有的分类可能会或可能不会反映数据中的内容。

让我举个例子：你有一个庞大的客户数据集，包括性别数据。将此数据集拆分为“男性”和“女性”的方法在与现有类进行比较时是最佳的。以“预测”的方式思考这很好，因为对于新用户，您现在可以预测他们的性别。在“知识发现”的思维方式中，这实际上很糟糕，因为您想在数据中发现一些*新结构*。然而，将数据拆分为老年人和儿童的方法在男性/女性类别中得分会*尽可能低。*但是，这将是一个很好的聚类结果（如果没有给出年龄）。

现在回到 EM。本质上，它假设您的数据由多个多元正态分布组成（请注意，这是一个*非常*强的假设，特别是当您固定集群数量时！）。然后它试图通过**交替改进模型和模型的对象分配来为此找到一个局部最优模型**。

为了在分类上下文中获得最佳结果，请选择*大于*类数的聚类数，或者甚至仅将聚类应用于*单个*类（以找出类中是否存在某种结构！）。

假设你想训练一个分类器来区分“汽车”、“自行车”和“卡车”。假设数据恰好包含 3 个正态分布几乎没有用处。但是，您可能会假设*有不止一种类型的汽车*（以及卡车和自行车）。因此，不是为这三个类别训练分类器，而是将汽车、卡车和自行车分成 10 个集群（或者可能是 10 辆汽车、3 辆卡车和 3 辆自行车，等等），然后训练一个分类器来区分这 30 个类别，然后将类结果合并回原始类。您可能还会发现有一个集群特别难以分类，例如 Trikes。它们有点像汽车，有点像自行车。或送货卡车，这更像是超大型汽车而不是卡车。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-03T01:22:51.580

其他答案很好，我将尝试提供另一种观点并解决问题的直观部分。

[EM（期望最大化）算法](http://en.wikipedia.org/wiki/Expectation%E2%80%93maximization_algorithm)是一类使用[对偶的迭代算法的变体](http://en.wikipedia.org/wiki/Duality_%28mathematics%29)

摘录（强调我的）：

> 在数学中，一般来说，对偶性通常（但不总是）通过对合运算以一对一的方式将概念、定理或数学结构转换为其他概念、定理或结构：如果A 是 B，那么 B 的对偶就是 A。这样的对合**有时有不动点**，所以 A 的对偶就是 A 本身

通常，*对象A 的对**偶*B以某种方式与 A 相关，以保持某种*对称性或兼容性*。例如 AB =**常量**

 ****使用对偶性（在前面的意义上）的迭代算法的例子是：

1.  [最大公约数的欧几里得算法及其变体](http://en.wikipedia.org/wiki/Euclidean_algorithm)
2.  [Gram–Schmidt 向量基算法和变体](http://en.wikipedia.org/wiki/Gram%E2%80%93Schmidt_process)
3.  [算术平均 - 几何平均不等式及其变体](http://en.wikipedia.org/wiki/Arithmetic%E2%80%93geometric_mean)
4.  [期望最大化算法及其变体](http://arxiv.org/pdf/1105.1476.pdf)（另请参阅[此处了解信息几何视图](http://www.researchgate.net/profile/Shun_Ichi_Amari/publication/222444851_Information_geometry_of_the_EM_and_em_algorithms_for_neural_networks/links/0f3175385938a75a6c000000.pdf)）
5.  （..其他类似的算法..）

以类似的方式，[EM 算法也可以看作是两个对偶最大化步骤](http://www.cs.toronto.edu/~fritz/absps/emk.pdf)：

> ..[EM] 被视为最大化参数和未观测变量分布的联合函数。关于参数的 M 步..

在使用对偶的迭代算法中，有一个平衡（或固定）收敛点的显式（或隐式）假设（对于 EM，这是使用 Jensen 不等式证明的）

所以这类算法的概要是：

1.  **类 E 步骤：**找到关于给定**y**保持不变的最佳解决方案**x 。**
***   **M-like step (dual)：**找到关于**x**的最佳解**y**（如上一步中计算的）保持不变。***   **终止/收敛步骤的标准：使用更新的****x**、**y**值重复步骤 1、2直到收敛（或达到指定的迭代次数）****

 ******请注意**，当这种算法收敛到（全局）最优时，它已经找到了**在两种意义上**（即在**x**域/参数和**y**域/参数中）都最佳的配置。然而，该算法只能找到*局部*最优而不是*全局*最优。

我会说这是对算法大纲的直观描述

对于统计论点和应用，其他答案已经给出了很好的解释（也请查看此答案中的参考资料）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-30T02:20:17.750

接受的答案引用了[Chuong EM Paper](http://ai.stanford.edu/~chuongdo/papers/em_tutorial.pdf)，它在解释 EM 方面做得不错。还有一个[youtube 视频](https://www.youtube.com/watch?v=7e65vXZEv5Q)更详细地解释了这篇论文。

回顾一下，这里是场景：

```
1st:  {H,T,T,T,H,H,T,H,T,H} 5 Heads, 5 Tails; Did coin A or B generate me?
2nd:  {H,H,H,H,T,H,H,H,H,H} 9 Heads, 1 Tails
3rd:  {H,T,H,H,H,H,H,T,H,H} 8 Heads, 2 Tails
4th:  {H,T,H,T,T,T,H,H,T,T} 4 Heads, 6 Tails
5th:  {T,H,H,H,T,H,H,H,T,H} 7 Heads, 3 Tails

Two possible coins, A & B are used to generate these distributions.
A & B have an unknown parameter: their bias towards heads.

We don't know the biases, but we can simply start with a guess: A=60% heads, B=50% heads. 
```

在第一次试验的问题的情况下，直觉上我们会认为 B 生成了它，因为正面的比例非常符合 B 的偏见......但这个值只是一个猜测，所以我们不能确定。

考虑到这一点，我喜欢这样考虑 EM 解决方案：

*   每次翻转试验都会“投票”选出它最喜欢的硬币
    *   这是基于每枚硬币与其分布的匹配程度
    *   或者，从硬币的角度来看，相对于另一枚硬币（基于对**数似然**） ，人们对看到这个试验的**期望很高。**

***   根据每个试验对每个硬币的喜欢程度，它可以更新对该硬币参数（偏差）的猜测。
    *   试验越喜欢硬币，它就越能更新硬币的偏见以反映它自己！
    *   本质上，硬币的偏差是通过在所有试验中组合这些加权更新来更新的，这个过程称为（**最大化**），它指的是在给定一组试验的情况下尝试对每个硬币的偏差进行最佳猜测。**

 **这可能过于简单化了（甚至在某些层面上是根本错误的），但我希望这在直观层面上有所帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-04T14:56:43.243

EM 用于最大化具有潜在变量 Z 的模型 Q 的似然性。

这是一个迭代优化。

```
theta <- initial guess for hidden parameters
while not converged:
    #e-step
    Q(theta'|theta) = E[log L(theta|Z)]
    #m-step
    theta <- argmax_theta' Q(theta'|theta) 
```

e-step：给定 Z 的当前估计，计算预期的对数似然函数

m-step：找到使这个 Q 最大化的 theta

GMM 示例：

e-step：在给定当前 gmm 参数估计的情况下估计每个数据点的标签分配

m-step：在给定新​​标签分配的情况下最大化新的 theta

K-means 也是一种 EM 算法，在 K-means 上有很多解释动画。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-22T00:03:23.333

**使用在 Zhubarb 的回答中引用的 Do 和 Batzoglou 的同一篇文章，我在Java**中为该问题实现了 EM 。对他的回答的评论表明，该算法陷入了局部最优，如果参数 thetaA 和 thetaB 相同，我的实现也会发生这种情况。

下面是我的代码的标准输出，显示了参数的收敛。

```
thetaA = 0.71301, thetaB = 0.58134
thetaA = 0.74529, thetaB = 0.56926
thetaA = 0.76810, thetaB = 0.54954
thetaA = 0.78316, thetaB = 0.53462
thetaA = 0.79106, thetaB = 0.52628
thetaA = 0.79453, thetaB = 0.52239
thetaA = 0.79593, thetaB = 0.52073
thetaA = 0.79647, thetaB = 0.52005
thetaA = 0.79667, thetaB = 0.51977
thetaA = 0.79674, thetaB = 0.51966
thetaA = 0.79677, thetaB = 0.51961
thetaA = 0.79678, thetaB = 0.51960
thetaA = 0.79679, thetaB = 0.51959
Final result:
thetaA = 0.79678, thetaB = 0.51960 
```

下面是我在（Do and Batzoglou，2008）中解决问题的 EM Java 实现。实现的核心部分是运行 EM 直到参数收敛的循环。

```
private Parameters _parameters;

public Parameters run()
{
    while (true)
    {
        expectation();

        Parameters estimatedParameters = maximization();

        if (_parameters.converged(estimatedParameters)) {
            break;
        }

        _parameters = estimatedParameters;
    }

    return _parameters;
} 
```

下面是整个代码。

```
import java.util.*;

/*****************************************************************************
This class encapsulates the parameters of the problem. For this problem posed
in the article by (Do and Batzoglou, 2008), the parameters are thetaA and
thetaB, the probability of a coin coming up heads for the two coins A and B,
respectively.
*****************************************************************************/
class Parameters
{
    double _thetaA = 0.0; // Probability of heads for coin A.
    double _thetaB = 0.0; // Probability of heads for coin B.

    double _delta = 0.00001;

    public Parameters(double thetaA, double thetaB)
    {
        _thetaA = thetaA;
        _thetaB = thetaB;
    }

    /*************************************************************************
    Returns true if this parameter is close enough to another parameter
    (typically the estimated parameter coming from the maximization step).
    *************************************************************************/
    public boolean converged(Parameters other)
    {
        if (Math.abs(_thetaA - other._thetaA) < _delta &&
            Math.abs(_thetaB - other._thetaB) < _delta)
        {
            return true;
        }

        return false;
    }

    public double getThetaA()
    {
        return _thetaA;
    }

    public double getThetaB()
    {
        return _thetaB;
    }

    public String toString()
    {
        return String.format("thetaA = %.5f, thetaB = %.5f", _thetaA, _thetaB);
    }

}

/*****************************************************************************
This class encapsulates an observation, that is the number of heads
and tails in a trial. The observation can be either (1) one of the
experimental observations, or (2) an estimated observation resulting from
the expectation step.
*****************************************************************************/
class Observation
{
    double _numHeads = 0;
    double _numTails = 0;

    public Observation(String s)
    {
        for (int i = 0; i < s.length(); i++)
        {
            char c = s.charAt(i);

            if (c == 'H')
            {
                _numHeads++;
            }
            else if (c == 'T')
            {
                _numTails++;
            }
            else
            {
                throw new RuntimeException("Unknown character: " + c);
            }
        }
    }

    public Observation(double numHeads, double numTails)
    {
        _numHeads = numHeads;
        _numTails = numTails;
    }

    public double getNumHeads()
    {
        return _numHeads;
    }

    public double getNumTails()
    {
        return _numTails;
    }

    public String toString()
    {
        return String.format("heads: %.1f, tails: %.1f", _numHeads, _numTails);
    }

}

/*****************************************************************************
This class runs expectation-maximization for the problem posed by the article
from (Do and Batzoglou, 2008).
*****************************************************************************/
public class EM
{
    // Current estimated parameters.
    private Parameters _parameters;

    // Observations from the trials. These observations are set once.
    private final List<Observation> _observations;

    // Estimated observations per coin. These observations are the output
    // of the expectation step.
    private List<Observation> _expectedObservationsForCoinA;
    private List<Observation> _expectedObservationsForCoinB;

    private static java.io.PrintStream o = System.out;

    /*************************************************************************
    Principal constructor.
    @param observations The observations from the trial.
    @param parameters The initial guessed parameters.
    *************************************************************************/
    public EM(List<Observation> observations, Parameters parameters)
    {
        _observations = observations;
        _parameters = parameters;
    }

    /*************************************************************************
    Run EM until parameters converge.
    *************************************************************************/
    public Parameters run()
    {

        while (true)
        {
            expectation();

            Parameters estimatedParameters = maximization();

            o.printf("%s\n", estimatedParameters);

            if (_parameters.converged(estimatedParameters)) {
                break;
            }

            _parameters = estimatedParameters;
        }

        return _parameters;

    }

    /*************************************************************************
    Given the observations and current estimated parameters, compute new
    estimated completions (distribution over the classes) and observations.
    *************************************************************************/
    private void expectation()
    {

        _expectedObservationsForCoinA = new ArrayList<Observation>();
        _expectedObservationsForCoinB = new ArrayList<Observation>();

        for (Observation observation : _observations)
        {
            int numHeads = (int)observation.getNumHeads();
            int numTails = (int)observation.getNumTails();

            double probabilityOfObservationForCoinA=
                binomialProbability(10, numHeads, _parameters.getThetaA());

            double probabilityOfObservationForCoinB=
                binomialProbability(10, numHeads, _parameters.getThetaB());

            double normalizer = probabilityOfObservationForCoinA +
                                probabilityOfObservationForCoinB;

            // Compute the completions for coin A and B (i.e. the probability
            // distribution of the two classes, summed to 1.0).

            double completionCoinA = probabilityOfObservationForCoinA /
                                     normalizer;
            double completionCoinB = probabilityOfObservationForCoinB /
                                     normalizer;

            // Compute new expected observations for the two coins.

            Observation expectedObservationForCoinA =
                new Observation(numHeads * completionCoinA,
                                numTails * completionCoinA);

            Observation expectedObservationForCoinB =
                new Observation(numHeads * completionCoinB,
                                numTails * completionCoinB);

            _expectedObservationsForCoinA.add(expectedObservationForCoinA);
            _expectedObservationsForCoinB.add(expectedObservationForCoinB);
        }
    }

    /*************************************************************************
    Given new estimated observations, compute new estimated parameters.
    *************************************************************************/
    private Parameters maximization()
    {

        double sumCoinAHeads = 0.0;
        double sumCoinATails = 0.0;
        double sumCoinBHeads = 0.0;
        double sumCoinBTails = 0.0;

        for (Observation observation : _expectedObservationsForCoinA)
        {
            sumCoinAHeads += observation.getNumHeads();
            sumCoinATails += observation.getNumTails();
        }

        for (Observation observation : _expectedObservationsForCoinB)
        {
            sumCoinBHeads += observation.getNumHeads();
            sumCoinBTails += observation.getNumTails();
        }

        return new Parameters(sumCoinAHeads / (sumCoinAHeads + sumCoinATails),
                              sumCoinBHeads / (sumCoinBHeads + sumCoinBTails));

        //o.printf("parameters: %s\n", _parameters);

    }

    /*************************************************************************
    Since the coin-toss experiment posed in this article is a Bernoulli trial,
    use a binomial probability Pr(X=k; n,p) = (n choose k) * p^k * (1-p)^(n-k).
    *************************************************************************/
    private static double binomialProbability(int n, int k, double p)
    {
        double q = 1.0 - p;
        return nChooseK(n, k) * Math.pow(p, k) * Math.pow(q, n-k);
    }

    private static long nChooseK(int n, int k)
    {
        long numerator = 1;

        for (int i = 0; i < k; i++)
        {
            numerator = numerator * n;
            n--;
        }

        long denominator = factorial(k);

        return (long)(numerator / denominator);
    }

    private static long factorial(int n)
    {
        long result = 1;
        for (; n >0; n--)
        {
            result = result * n;
        }

        return result;
    }

    /*************************************************************************
    Entry point into the program.
    *************************************************************************/
    public static void main(String argv[])
    {
        // Create the observations and initial parameter guess
        // from the (Do and Batzoglou, 2008) article.

        List<Observation> observations = new ArrayList<Observation>();
        observations.add(new Observation("HTTTHHTHTH"));
        observations.add(new Observation("HHHHTHHHHH"));
        observations.add(new Observation("HTHHHHHTHH"));
        observations.add(new Observation("HTHTTTHHTT"));
        observations.add(new Observation("THHHTHHHTH"));

        Parameters initialParameters = new Parameters(0.6, 0.5);

        EM em = new EM(observations, initialParameters);

        Parameters finalParameters = em.run();

        o.printf("Final result:\n%s\n", finalParameters);
    }
} 
```**********

# java - 如何使码头服务器可以从局域网访问？

> ID：11808075
> 
> 赞同：14
> 
> 时间：2012-08-04T10:56:17.013
> 
> 标签：java, jetty, localhost, maven-3, lan

我正在尝试使用 192.168.0.6:8080（A 的 IP）从 LAN 上的另一台机器（B）访问 Web 应用程序（部署在我的机器（A）上的 jetty8 中），但它不工作。虽然我通常可以使用 192.168.0.5（B 的 IP）从 A 访问机器 B 上 AppServ 上托管​​的应用程序。

我可以在机器 A 上的 localhost:8080 上正常访问该应用程序。

我可以保证没有网络问题，但由于某种原因无法通过网络访问码头。是否有任何特定配置可以通过 LAN 访问？

我的应用程序是 Maven 项目，我从 eclipse 运行它，设置在 web.xml 和 pom.xml 中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-10T21:58:43.890

**以下答案适用于 Jetty 8 及更早版本（Jetty 9+ 命令和类名不同）**

确保检查您正在侦听的接口。

示例（来自日志）

```
2012-08-10 14:52:26.470:INFO:oejs.AbstractConnector:Started SelectChannelConnector@127.0.0.1:8080 
```

这表示服务器仅在 127.0.0.1 (localhost) 上进行侦听。您可以查看日志，也可以在机器 A 上进行快速测试。打开 Web 浏览器并测试这两个 URL

*   `http://localhost:8080/`
*   `http://192.168.0.6:8080/`

如果它对两个 URL 都有响应，那么您可能已正确设置它并需要处理防火墙问题。如果它适用于一个，但不适用于另一个，那么您只在 1 个接口上收听。

要让码头监听所有接口，请使用特殊 IP 0.0.0.0

```
$ java -Djetty.host=0.0.0.0 -jar start.jar
2012-08-10 14:53:25.338:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8080 
```

此时，jetty 正在侦听您机器上的所有接口。

注意：您也可以编辑 etc/jetty.xml 并永久设置主机。

```
 <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
        <Set name="host">0.0.0.0</Set>
      ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-20T11:05:18.033

**2020-07-20**

作为@JoakimErdfelt [answer](https://stackoverflow.com/a/11909810/3667003)的补充，在 Jetty 9.4.12.v20180830（及更高版本）上，您可以**以编程方式将主机配置**为：

```
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.ServerConnector;

    Server server = new Server();       

    ServerConnector httpConnector = new ServerConnector(server);
        httpConnector.setHost("0.0.0.0"); // <--------- !
        httpConnector.setPort(12345);
        httpConnector.setIdleTimeout(5000);
        server.addConnector(httpConnector); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T20:00:00.063

所以我点击了这个，在调试了一个下午的奇怪行为后，我发现 Jetty 只是将自己广播到 IPv6，并跳过 IPv4，v4 端口被分配给另一个应用程序。

我的解决方案？跳转到另一个端口...

# xml - 在 XSL:FO 之前和之后强制分页符

> ID：11808079
> 
> 赞同：1
> 
> 时间：2012-08-04T10:56:44.023
> 
> 标签：xml, pdf, xsl-fo, apache-fop

`<fo:block>`当以下条件成立时，如何在元素之前和之后强制分页：

*   内容不完全适合上一页。

我尝试过使用`keep-together.within-page`，`page-break-inside`但是（在这两种情况下）当内容跨度超过单个页面（垂直）时，一切都会被压扁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T11:40:38.193

您是否尝试过值为“page”的[break-before](http://www.w3schools.com/xslfo/prop_break-before.asp)和[break-after属性？](http://www.w3schools.com/xslfo/prop_break-after.asp)

# javascript - 表达“无法获取/查询”错误

> ID：11808080
> 
> 赞同：3
> 
> 时间：2012-08-04T10:56:46.473
> 
> 标签：javascript, node.js, express, routes

我最近尝试使用*Express*，但我发现它有点困难，我尝试在`app.js`文件和之后定义路由，但当我尝试浏览到时仍然出现此`require`错误`index.js``localhost:3000/route`

**query.js**文件_

```
exports.show = function(reg,res){
    res.render("test",{title:"query testing"});
}; 
```

我试过这个`app.js`

```
app.get('/query',require('./routes/query.js')); 
```

并且在`index.js`

```
var queryX = require('./query.js');
app.get('/query',queryX.show); 
```

`route-separation`我在github上尝试了这个例子，我也得到了一个错误，
为什么我不能让它工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T11:11:11.500

仔细查看示例：[Line 7](https://github.com/visionmedia/express/blob/master/examples/route-separation/index.js#L7)和[Line 21](https://github.com/visionmedia/express/blob/master/examples/route-separation/index.js#L7)。

应用程序.js：

```
var site = require('./routes/site.js');
app.get('/', site.index); 
```

路线/site.js：

```
module.exports = function(req, res) { ... }; 
```

如果您想使用 routes/index.js 来存储您的所有路线，您必须将其传递`app`给导出的函数。

就像是：

应用程序.js：

```
var express = require('../..')
  , app = express();

require('./routes')(app); 
```

路线/index.js：

```
var more_routes = require('./more_routes');

module.exports = function(app) {

  app.get('/', function(req, res){...});
  app.get('/show', more_routes.show);
  app.get('/list', more_routes.list);
} 
```

# scala - 覆盖子类中的字段

> ID：11808086
> 
> 赞同：4
> 
> 时间：2012-08-04T10:57:54.133
> 
> 标签：scala

在 Scala 中，我们可以覆盖字段。我想知道这有什么好处？通常我们只是继承该字段并在子类的构造函数中设置它的值。有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T12:24:08.263

### 序幕：

Scala 不允许您覆盖`var`s，因为它们必须被协变（字段读取）和逆变（字段写入）覆盖，这意味着它们实际上必须是不变的。Scala 确实允许您以`val`协变方式覆盖 s，因为它们只能被读取（一旦它们被初始化）。

### 例子：

这里有两个用例，都说明了一个专业化。假设以下最小类层次结构：

```
class A
class B extends A 
```

**示例 1：** 在以下示例中，我们使用字段覆盖来专门化子类。也就是说，在使用`Super`实例时，我们只知道它`super.f`包含一个类型为 的对象`A`。然而，当使用一个`Sub`实例时，我们知道它`sub.f`包含一个特殊的类型对象`B`。

```
class Super {
  val f: A = new A()
}

class Sub extends Super {
  override val f: B = new B()
} 
```

**示例 2：** 字段覆盖的不同用例是用字段覆盖方法。这种可能性允许我们以一般方式指定接口，也就是说，我们让潜在的实现者可以选择`f`在每次调用时计算值，但也可以`f`只计算一次（在实例化期间）。在后一种情况下`f`是恒定的，这允许编译器执行更积极的优化。

```
trait Interface {
  def f: A = new A()
}

class Impl extends Interface {
  override val f: A = new A()
} 
```

# sql-server - 仅 MS DateTime LOG 表

> ID：11808087
> 
> 赞同：0
> 
> 时间：2012-08-04T10:58:02.093
> 
> 标签：sql-server, database, datetime

我正在创建一个数据库来存储用户信息，并且需要记录对用户所做的更改。

这最终将导致一种“时间线”，因此日期/时间因素至关重要。

对于这个问题，我将使用以下示例：

```
#ID - int
memName - string
memBio - string
memStatusString - string 
```

现在，我的想法是将其链接到这样的表：

```
ID - int
#memID - int
dateNameChanged - DateTime
dateBioChanged - DateTime
dateStatusStringChanged - DateTime 
```

* * *

这是记录信息的好方法吗？我想在另一张桌子上做，以便以后轻松列出。

此外，我从不将日志记录放在同一个表中，因为日志日期只会在更改之后出现。如果用户从不改变，那只会浪费空间。

综上所述;

有一个更好的方法吗？

更新：我为缺乏信息道歉。我使用的是 SQL Server 2008，asp net c# 3.5 - 4（只做数据库结构 atm）。

此外，成员将有不同的表，例如 tblMemberInformation、tblClanInformation、tblMemberGameRank

每个表中的每个 CHANGED 数据（只是为了确认）都需要存储到具有相应日期的日志文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:08:50.627

您尚未指定您使用的 SQL Server 版本，因此我将假定为最新版本。

SQL Server 2008+ 已内置[审计](http://msdn.microsoft.com/en-us/library/cc280386.aspx)：

> 审核 SQL Server 数据库引擎的实例或单个数据库涉及跟踪和记录数据库引擎上发生的事件。SQL Server 审计允许您创建服务器审计，其中可以包含服务器级事件的服务器审计规范和数据库级事件的数据库审计规范。审核的事件可以写入事件日志或审核文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T20:34:24.093

SQL 审计确实允许您审计对特定对象的特定操作。例如，您可以仅在一张表上审核 UPDATE。请参阅[http://www.ultimatewindowssecurity.com/sqlserver/auditpolicy/auditactiongroups/database-level_audit_actions.aspx](http://www.ultimatewindowssecurity.com/sqlserver/auditpolicy/auditactiongroups/database-level_audit_actions.aspx)。我意识到 SQL 审计可能不适合这种需求，但这就是它的能力。

# c# - 抓取一个 IE 窗口

> ID：11808088
> 
> 赞同：1
> 
> 时间：2012-08-04T10:58:13.010
> 
> 标签：c#, .net, interface, screen-scraping, web-scraping

我正在开发与两个系统接口以加载/存储数据的系统。

1.  一个古老的终端程序，它使用第 3 方 DLL 来桥接 .NET 和该系统，发送击键并接收它们。这部分没有问题，因为技术很清楚。

2.  一个 128 位 SSLed Web 应用程序，从网站在它自己的窗口中启动。它没有在任何类型的 Java 中运行，只是 HTML 和一点 JavaScript。

    我想以某种方式抓取此窗口的内容，以便可以访问其中的可用文档。至少，这将等待用户导航到正确的页面，然后单击我编写的应用程序中的按钮，然后查找正确的窗口，解析当前页面的源并下载文件.

    在理想情况下，它会从一开始就实现自动化，用户只需在我的应用程序中单击一下即可导航到正确的页面、登录并下载文档。

＃2在任何程度上都可行，使用免费组件的商业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:49:55.267

你想要的很难实现，如果你不针对特定的浏览器供应商，比如 FF 或 Chrome 等，那就更难实现了。

建议：

1) 用于`System.Net.WebClient`直接从网络服务器下载源代码。

2）如果你需要一些自动化代码不能（或者你不想）模拟的用户交互，你可以使用**webkitdotnet 之**类的项目，然后你可以创建一个 WinForm 应用程序，里面有一个浏览器。您将拥有对该浏览器内容的完全访问权限。

Webkitdotnet 项目页面：http: [//sourceforge.net/projects/webkitdotnet/](http://sourceforge.net/projects/webkitdotnet/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-10T16:16:46.977

如果浏览器 Internet Explorer（我正在阅读问题标题），只需引用此`Microsoft Internet Controls` `COM`库：

[![微软互联网控制](../Images/82bbbbd929220217228f4c078ff839a4.png)](https://i.stack.imgur.com/z5QbO.png)

然后我做了这样的刮：

```
var internetExplorerShells = new SHDocVw.ShellWindows();

string html = null;
foreach (SHDocVw.InternetExplorer ie in internetExplorerShells)
{
    if (ie.Document != null)
    {
        var url = ie.LocationURL;

        // If the Internet Explorer Address contains _configuration.ScrapingUrl
        if (CultureInfo.InvariantCulture.CompareInfo.IndexOf(
            url,
            _configuration.ScrapingUrl,
            CompareOptions.IgnoreCase) >= 0)
        {
            html = ie.Document.Body.OuterHtml;
            if (html != null)
                break;
        }
    }
} 
```

然后只需通过 NuGet 安装[HTMLAgilityPack](https://www.nuget.org/packages/HtmlAgilityPack/)并开始抓取 html：

```
var htmlDocument = new HtmlDocument();
htmlDocument.LoadHtml(html); 
```

# arduino - Arduino Nano 外接电源和 USB 电源输入硬件有什么区别？

> ID：11808089
> 
> 赞同：2
> 
> 时间：2012-08-04T10:58:18.947
> 
> 标签：arduino

我正在使用外部 USB 电源适配器 (1000 mA)为[Arduino Nano rev 3.0 设备供电。](http://arduino.cc/en/Main/ArduinoBoardNano)当我将它连接到电源输入时，电路板的动作很奇怪，伺服器就变了。如果我在 USB 端口上使用相同的适配器，则电路板可以正常工作。我想腾出 USB 端口并使用外部电源。为什么板子不能使用相同的电源工作，我能做些什么来稳定它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:02:13.720

似乎您的外部 USB 电源的制造足以为一些伺服系统 (1000 mA) 供电。尝试使用另一个电源（额定为 5 V @ +300 mA）。

如果您没有其他电源，请确保输出约为 5 V，并在 Arduino 的 5 V 和 GND 之间放置一个**大**电容器（200 uF 或更大）。我怀疑电源可能只有一个半波桥式整流器，这可能不足以驱动伺服电机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:14:47.177

据我了解，您只能从 USB 汲取 100mA 电流，直到连接的设备通过 USB 协议协商以接收更多电流。

[https://electronics.stackexchange.com/questions/5498/how-to-get-more-than-100ma-from-a-usb-port](https://electronics.stackexchange.com/questions/5498/how-to-get-more-than-100ma-from-a-usb-port)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T12:17:50.720

5V 有点低，通过 VIN 或桶形连接器为 Arduino 供电时，您至少需要 6.2V (IIRC) 才能使其稳定

# c++ - 指向内存块元素的 C++ 指针

> ID：11808099
> 
> 赞同：0
> 
> 时间：2012-08-04T10:59:14.120
> 
> 标签：c++, memory, pointers

考虑以下代码：

```
byte *memblock = new byte[500];
byte **ptr_to_memblock  = &memblock;
memblock += 40;
ptr_to_memblock  = &memblock; 
```

ptr_to_memblock 在上面的示例中将始终保持相同的值。我猜这是因为 memblock 的地址（有或没有偏移量）将始终返回连续内存块的地址。

问题在于我想实现某种 DynamicHeap 类，您可以在其中分配任意大小的内存并以任意顺序释放它。该类使用一个内存块（如上面的 memblock），一旦内存块已满，它将被更大的内存块替换。问题是我需要跟踪所有使用 DynamicHeap 类内存的对象，因为一旦我分配了一个更大的块来用旧块替换它，我需要重新分配我的程序使用的所有指针。当我的程序想要从 DynamicHeap 类获取内存时，我想通过指向我返回的内存的指针来做到这一点。不幸的是，我返回的指向内存的指针始终是指向我在内部使用的内存块的指针。

有没有办法在连续的内存块中获取特定地址的指针？

任何答案表示赞赏。

[编辑] 也许这个例子将有助于理解我的问题是什么：

```
//byte = typedef char
byte *memblock = new byte[sizeof(Object) * 2];

Object *myObject1 = new((Object*)memblock) Object;
Object *myObject2 = new((Object*)memblock + sizeof(Object)) Object;

Object **ptr_to_myObject1 = &myObject1;
Object **ptr_to_myObject2 = &myObject2; //will be the same as ptr_to_myObject1

byte *memblock2 = new byte[sizeof(Object) * 3];
memcpy(memblock2,memblock,sizeof(Object) *2);

*ptr_to_myObject1 = (Object*)memblock2;
*ptr_to_myObject2 = (Object*)memblock2 + sizeof(Object); //Won't work.

delete[] memblock;
memblock = NULL; 
```

我只能重新分配指向 myObject1 的指针（因为它与地址与 memblock 相同），但我不能重新分配指向 myObject2 的指针（因为 &myObject2 与 &myObject1 相同（与 &memblock 相同））。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:12:45.663

您正在获取变量 memblock 的地址，该地址永远不会改变。我认为您将变量的地址与分配的内存的地址混淆了。

获取指向分配内存中特定地址的指针的方法是您在上面的代码中执行的方式，`memblock + 40`是指向分配内存中 40 字节地址的指针。但是鉴于我认为您正在尝试这样做，这将无济于事。

一种方法是分配*句柄*，句柄是指向指针的指针。当你分配一些内存时，你也会从一个单独的地方分配一个句柄。您初始化句柄以指向分配的内存`*handle = memblock + offset; return handle;`。现在，当您调整堆大小时，您可以遍历所有句柄（您已将其保存在某个列表中）并重新分配它们`*handle = new_memblock + new_offset;`。问题是您的程序必须处理句柄而不是指针，这很尴尬。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:19:44.807

ptr_to_memblock = &memblock. 这里将变量 memblock 的地址存储在变量 ptr_to_memblock 中。Memblock 是一个存储在内存中某个特定地址的变量，它永远不会改变。

# mysql - 多个查询合二为一？

> ID：11808100
> 
> 赞同：2
> 
> 时间：2012-08-04T10:59:48.173
> 
> 标签：mysql, sql, database

如何将其放入一个查询中？

例如：

```
SELECT * FROM `result` WHERE status = 'new' AND YEAR(`end_date`)  = '2012' limit 20
SELECT * FROM `result` WHERE status = 'new' AND YEAR(`end_date`)  = '2013' limit 20
SELECT * FROM `result` WHERE status = 'new' AND YEAR(`end_date`)  = '2014' limit 20
SELECT * FROM `result` WHERE status = 'new' AND YEAR(`end_date`)  = '2015' limit 20

SELECT * FROM `result` WHERE status = 'new' AND DAY(`end_date`)  = '1' limit 20
SELECT * FROM `result` WHERE status = 'new' AND DAY(`end_date`)  = '2' limit 20
... and to 31

and same for the Month Jan to Dec 
```

基本上显示每天、每月和每年的 20 条记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T11:40:43.690

您可以通过这种方式使用[UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)合并结果集：

```
SELECT * FROM `result` WHERE status = 'new' AND YEAR(`end_date`)  = '2012' limit 20
UNION
SELECT * FROM `result` WHERE status = 'new' AND YEAR(`end_date`)  = '2013' limit 20
UNION
SELECT * FROM `result` WHERE status = 'new' AND YEAR(`end_date`)  = '2014' limit 20
UNION
SELECT * FROM `result` WHERE status = 'new' AND YEAR(`end_date`)  = '2015' limit 20
UNION
SELECT * FROM `result` WHERE status = 'new' AND DAY(`end_date`)  = '1' limit 20
UNION 
SELECT * FROM `result` WHERE status = 'new' AND DAY(`end_date`)  = '2' limit 20
ORDER BY submit_date DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:38:03.097

我认为您需要使用存储功能，而不是类似的东西可能会帮助您

```
create function MyRecords()
RETURNS @MyResultsTable table
BEGIN
    select * into @MyResultsTable from ? where ?
    select * into @MyResultsTable from ? where ?
    select * into @MyResultsTable from ? where ?
    select * into @MyResultsTable from ? where ?
    .....
    .....
    .....
end 
```

我现在没有安装 MySql，但你应该尝试从控制台创建它并调用它。祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T11:06:33.237

```
SELECT * FROM `result` WHERE status = 'new' AND YEAR(`end_date`)  >= '2012' AND YEAR(`end_date`) <= '2015' AND DAY(`end_date`)  >= '1' AND DAY(`end_date`)  <= '32' AND  MONTH(`end_date`)  >= '1' AND  MONTH(`end_date`)  <= '12'  limit 20 
```

这样做，你想要什么？

# jquery - 单击表格行时无法显示表格行

> ID：11808107
> 
> 赞同：2
> 
> 时间：2012-08-04T11:00:15.023
> 
> 标签：jquery, show-hide

我有一个表，其中包含三行 quest_row、quest_image 和 quest_text 组。最初，只有 quest_row 是可见的 - 这有效。它显示问题编号。当用户单击表的 quest_row 行时，我希望它显示下一个 quest_image 和 quest_text 行。这是代码：

```
<table width="90%">
<tr>
    <td>Questions <?php echo "how many = $how_many"; ?>
    </td>
</tr>
</table>
<?php 
for ($i=1;$i<=$how_many;$i++) {
$row=mysqli_fetch_assoc($result);?>
<table name="quest_info" id="quest_info" border=1 width="100%">
    <tr class="quest_row">
        <td bgcolor="#00CCFF">
        Question# <?php echo $i; ?>
        </td>
    </tr>
<?php if ($row["image"] <> NULL) { ?>
        <tr class="quest_image" >
            <td class="quest_image" id="quest_image<?php echo $i; ?>">
                <img src="<?php $pic = $row['image']; echo $base_path . $pic; ?>" width="200" />
            </td>
        </tr>
        <tr class="quest_text" >
            <td class="quest_text" id="quest_text<?php echo $i; ?>"><?php echo $row["question"]; ?></td>
        </tr>
    </table>
    <?php
} else {
    ?>
        <tr class="quest_image" >
            <td class="quest_image" id="quest_image<?php echo $i; ?>">
            </td>
        </tr>
        <tr class="quest_text" >
            <td class="quest_text" id="quest_text<?php echo $i; ?>"><?php echo $row["question"]; ?></td>
        </tr>
    </table>
    <?php 
} ?>
<?php
}  ?>
<script type="text/javascript" src="../jquery/jquery/jquery-1.7.2.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$(".quest_text").hide();
$(".quest_image").hide();
$("#quest_info").click(function(){
    var trigger = event.target;
    alert('target = ' + target);
    if(trigger.className == 'quest_row') 
    {
            $(trigger).closest('tr').next('quest_image').show();
            $(trigger).closest('tr').next('quest_text').show();
    }
    });
});
</script> 
```

不知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:11:02.717

JQuery 在显示/隐藏表行时出现问题.. 尝试使用 DIV

# wpf - 将 MediaElement 绑定到滑块位置

> ID：11808108
> 
> 赞同：3
> 
> 时间：2012-08-04T11:00:27.410
> 
> 标签：wpf, binding, mediaelement

我有 MediaElement 和 Slider。如何在没有 DispatcherTimer 的情况下将 MediaElement.Position 绑定到 Slider.Value？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:43:42.097

好的，这*可能*是：

```
<Slider 
    x:Name="PositionSlider"  
    Minimum="0" 
    Maximum="{Binding 
                  ElementName=mediaElement,  
                  Path=mediaElement.NaturalDuration.TimeSpan.TotalMilliseconds}"   
 />

<MediaElement 
    x:Name="mediaElement"
    Position="{Binding Value, 
               ElementName=PositionSlider, 
               Converter={StaticResource MyMsToTimeSpanConverter}}"  /> 
```

！！但 ！！Position 不是依赖属性，因此您不能对其进行任何绑定。当您说“它不起作用”时……当然它不起作用，而且永远不会。绑定需要依赖属性。

因此，您应该像微软为其 MediaElement 小演示所做的那样：在代码中处理所有内容。
[http://msdn.microsoft.com/en-us/library/ms748248.aspx](http://msdn.microsoft.com/en-us/library/ms748248.aspx)

# javascript - 无法获得 ajax 响应

> ID：11808110
> 
> 赞同：1
> 
> 时间：2012-08-04T11:00:42.353
> 
> 标签：javascript, ajax, symfony

我是 symfony 的新手。我创建了一个名为`index.html.twig`. 在此，我编写了一个用于发出 ajax 请求的代码，如下所示：

```
<script language="javascript">
    function onsub()
    {
        alert(document.getElementById('source').value);
        var http=new XMLHttpRequest();
        var name="rohit";
        if(http.open("POST", "sub.html.php?field="+name, true)) alert('yes');
        alert(http);
        http.onreadystatechange = function() 
        {
            if(http.readyState == 4 && http.status == 200) 
            {

                alert('i m back');
            }
            else
            {
                alert('sorry');
            }
        }  

        http.send();
    }

    </script> 
```

这是当我按下提交按钮提交表单时调用的操作。当我提交表单时，会调用此操作并弹出正确的值，但它不会将数据发送到请求的文件，即`sub.html.php`. 它正在正确地制作对象。当我打印`http.readyState`then 的值时，它给出的答案是`1`. 所以我想将 的值发送`name`到请求的文件`sub.html.php`。我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:25:51.427

尝试这个 .....

```
<script language="javascript">
function onsub() 
{ 
   var name="rohit";
   alert(document.getElementById('source').value); 
   if(window.XMLHttpRequest)
   { 
      http=new XMLHttpRequest();
   } 
   else 
   { 
    // code    for IE6, IE5 
    http=new ActiveXObject("Microsoft.XMLHTTP"); 
   }
   http.onreadystatechange=function() 
   { 
     if(http.readyState == 4 &&    http.status == 200) 
     { 
       alert('i m back'); 
     } 
     else 
     { 
       alert('sorry'); 
     }
   }    
   http.open("GET", "sub.php?field="+name , true); 
   http.send(); 
   }    
   </script> 
```

# r - crosstab 和 xtabs 生成零而不是 NA

> ID：11808112
> 
> 赞同：1
> 
> 时间：2012-08-04T11:00:55.643
> 
> 标签：r, crosstab, na

我使用了以下（示例）数据和 crosstab() 创建了一个交叉表数据集。当我使用此方法时，所有没有数据的列 x 行组合在我的输出数据集中都变为零。我希望它们是 NA，因为数据集中存在真正的零值，否则我无法区分它们。此外，我已经尝试了 xtabs() 并遇到了同样的问题。非常感谢任何有关获得 NA 或其他方法的建议。

```
WW1_Data <- structure(list(Site_Name = c("Alnön", "Alnön", "Alnön", "Ammarnäs",
"Ammarnäs", "Anjan", "Anjan", "Bäcksand", "Bäcksand", "Fittjebodarna",
"Fittjebodarna", "Flatruet", "Flatruet", "Flatruet", "Flatruet",
"Glen", "Glen", "Glen", "Idre", "Idre"), Year = c("1996", "2000",
"2010", "1996", "2011", "2009", "2010", "2000", "2010", "2008",
"2009", "2008", "2009", "2010", "2011", "2008", "2009", "2010",
"1996", "2010"), WW1_Pct_2 = c(0.307692307692308, 0.260869565217391,
0.0833333333333333, 0.75, 0.8, 0.52, 0.5, 0.0833333333333333,
0.375, 0.4, 0.423076923076923, 0.85, 0.483870967741935, 0.56,
0.58, 0.777777777777778, 0.555555555555556, 0.521739130434783,
0.4, 0)), .Names = c("Site_Name", "Year", "WW1_Pct_2"), row.names = c(3L,
4L, 5L, 8L, 9L, 10L, 11L, 15L, 16L, 28L, 29L, 30L, 31L, 32L,
33L, 42L, 43L, 44L, 59L, 60L), class = "data.frame")

xtabs(WW1_Pct_2 ~ Site_Name + Year, WW1_Data)

## alternatively ##

library(ecodist)
WW1_XTAB  <- data.frame(with(WW1_Data, crosstab(Site_Name, Year, WW1_Pct_2))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:53:07.223

由于使用 xtabs 进行聚合时使用的函数是`sum`您可以通过使用 tapply 将其与默认设置 na.rm=FALSE 一起使用：

```
> with(WW1_Data, tapply(WW1_Pct_2, list(Site_Name,  Year), sum )  )
                      1996          2000         2008         2009          2010 2011
Alnön         0.3076923077 0.26086956522           NA           NA 0.08333333333   NA
Ammarnäs      0.7500000000            NA           NA           NA            NA 0.80
Anjan                   NA            NA           NA 0.5200000000 0.50000000000   NA
Bäcksand                NA 0.08333333333           NA           NA 0.37500000000   NA
Fittjebodarna           NA            NA 0.4000000000 0.4230769231            NA   NA
Flatruet                NA            NA 0.8500000000 0.4838709677 0.56000000000 0.58
Glen                    NA            NA 0.7777777778 0.5555555556 0.52173913043   NA
Idre          0.4000000000            NA           NA           NA 0.00000000000   NA 
```

有`as.data.frame`一种用于表的方法（这是一种特殊的矩阵），它是`tapply`返回的对象类。你的使用`as.data.frame`是多余的，因为结果`reshape`已经是一个数据框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:32:53.000

这成功了。欢迎其他解决方案！

```
WW1_XTAB <- as.data.frame(reshape(WW1_Data,idvar="Site_Name",timevar="Year",direction="wide")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T23:24:26.007

另一种方法是

```
library(reshape2)
dcast(WW1_Data, Site_Name~Year) 
```

尽管这依赖于每个站点/年份组合只有一个条目。如果还有更多你可以使用

```
library(reshape2)
dcast(WW1_Data, Site_Name~Year, sum) 
```

但这会在缺少值的情况下给出 0 而不是 NA （基于零元素列表的总和为 0。

# function - 在正在运行的 nodejs 服务器上的终端内检查变量值并执行函数

> ID：11808113
> 
> 赞同：0
> 
> 时间：2012-08-04T11:01:04.770
> 
> 标签：function, node.js, variables, terminal, nowjs-sockets

我在我的终端上在 nodejs 上运行一个测试游戏服务器。如果我想检查一个变量的值，或者执行一个函数怎么办？如果可能的话，在航站楼内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T07:26:11.273

您可能想要运行调试器，以便在运行时与我们的应用程序交互。在这里你可以找到一些：[https ://github.com/joyent/node/wiki/modules#wiki-debugging-and-console](https://github.com/joyent/node/wiki/modules#wiki-debugging-and-console)

# cocoa-touch - 如何使用iphone sdk中的手势在框架中移动图像

> ID：11808114
> 
> 赞同：0
> 
> 时间：2012-08-04T11:01:15.847
> 
> 标签：cocoa-touch, ios5, ios4, uiimageview, uigesturerecognizer

我是使用手势的新手，通过使用我想在框架中移动图像的手势。任何人都可以帮助解决这个问题。你可以找到下面的图像。

![在此处输入图像描述](../Images/c2906baaaf31e0ffc3f7c13d746c2a3b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:43:07.630

嗨 VSN 首先从您的图像视图中剪切选定的部分

使用此代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"tactile_noise.png"]];

    self.imageCropper = [[BJImageCropper alloc] initWithImage:[UIImage imageNamed:@"gavandme.jpg"] andMaxSize:CGSizeMake(1024, 600)];
    [self.view addSubview:self.imageCropper];
    self.imageCropper.center = self.view.center;
    self.imageCropper.imageView.layer.shadowColor = [[UIColor blackColor] CGColor];
    self.imageCropper.imageView.layer.shadowRadius = 3.0f;
    self.imageCropper.imageView.layer.shadowOpacity = 0.8f;
    self.imageCropper.imageView.layer.shadowOffset = CGSizeMake(1, 1);

    [self.imageCropper addObserver:self forKeyPath:@"crop" options:NSKeyValueObservingOptionNew context:nil];

    if (SHOW_PREVIEW) {
        self.preview = [[UIImageView alloc] initWithFrame:CGRectMake(10,10,self.imageCropper.crop.size.width * 0.1, self.imageCropper.crop.size.height * 0.1)];
        self.preview.image = [self.imageCropper getCroppedImage];
        self.preview.clipsToBounds = YES;
        self.preview.layer.borderColor = [[UIColor whiteColor] CGColor];
        self.preview.layer.borderWidth = 2.0;
        [self.view addSubview:self.preview];
    }
} 
```

检查这个例子

[https://github.com/barrettj/BJImageCropper/downloads](https://github.com/barrettj/BJImageCropper/downloads)

或 **要裁剪选定的图像部分，请这样做**

```
// Create the image from a png file
UIImage *image = [UIImage imageNamed:@"prgBinary.jpg"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

// Get size of current image
CGSize size = [image size];

// Frame location in view to show original image
[imageView setFrame:CGRectMake(0, 0, size.width, size.height)];
[[self view] addSubview:imageView];
[imageView release];    

// Create rectangle that represents a cropped image  
// from the middle of the existing image
CGRect rect = CGRectMake(size.width / 4, size.height / 4 , 
    (size.width / 2), (size.height / 2));

// Create bitmap image from original image data,
// using rectangle to specify desired crop area
CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], rect);
UIImage *img = [UIImage imageWithCGImage:imageRef]; 
CGImageRelease(imageRef);

// Create and show the new image from bitmap data
imageView = [[UIImageView alloc] initWithImage:img];
[imageView setFrame:CGRectMake(0, 200, (size.width / 2), (size.height / 2))];
[[self view] addSubview:imageView];
[imageView release]; 
```

参考这个

[http://mobiledevelopertips.com/graphics/how-to-crop-an-image.html](http://mobiledevelopertips.com/graphics/how-to-crop-an-image.html)

或调整 uiiamgeview 的大小

```
- (UIImage *)resizeImage:(UIImage*)image newSize:(CGSize)newSize 
{
    CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
    CGImageRef imageRef = image.CGImage;

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Set the quality level to use when rescaling
    CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, newSize.height);

    CGContextConcatCTM(context, flipVertical);  
    // Draw into the context; this scales the image
    CGContextDrawImage(context, newRect, imageRef);

    // Get the resized image from the context and a UIImage
    CGImageRef newImageRef = CGBitmapContextCreateImage(context);
    UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

    CGImageRelease(newImageRef);
    UIGraphicsEndImageContext();    

    return newImage;
} 
```

**裁剪或调整图像大小后应用`UIPanGestureRecognizer`**

```
UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
    [panRecognizer setMinimumNumberOfTouches:1];
    [panRecognizer setMaximumNumberOfTouches:1];
    [panRecognizer setDelegate:self];
    [holderView addGestureRecognizer:panRecognizer];

-(void)move:(id)sender {

    [[[(UITapGestureRecognizer*)sender view] layer] removeAllAnimations];

    [self.view bringSubviewToFront:[(UIPanGestureRecognizer*)sender view]];
    CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {

        firstX = [[sender view] center].x;
        firstY = [[sender view] center].y;
    }

    translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);

    [[sender view] setCenter:translatedPoint];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {

        CGFloat finalX = translatedPoint.x + (.35*[(UIPanGestureRecognizer*)sender velocityInView:self.view].x);
        CGFloat finalY = translatedPoint.y + (.35*[(UIPanGestureRecognizer*)sender velocityInView:self.view].y);

        if(UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {

            if(finalX < 0) {

                finalX = 0;
            }

            else if(finalX > 768) {

                finalX = 768;
            }

            if(finalY < 0) {

                finalY = 0;
            }

            else if(finalY > 1024) {

                finalY = 1024;
            }
        }

        else {

            if(finalX < 0) {

                finalX = 0;
            }

            else if(finalX > 1024) {

                finalX = 768;
            }

            if(finalY < 0) {

                finalY = 0;
            }

            else if(finalY > 768) {

                finalY = 1024;
            }
        }

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:.35];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
        [[sender view] setCenter:CGPointMake(finalX, finalY)];
        [UIView commitAnimations];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:44:26.827

**//NSURL 连接与 JSON 解析：**

**[https://www.dropbox.com/s/ubmaulkdhbdqha1/ViewController.m](https://www.dropbox.com/s/ubmaulkdhbdqha1/ViewController.m)**

```
ViewController.h

@interface ViewController : UIViewController<UITableViewDelegate,UITableViewDataSource>
{
    IBOutlet UITableView *tableView1;
    NSArray *practice_ArrayForDisplayingEx;

    NSMutableArray *arrRespone;
    NSMutableData *responseData;

    NSMutableDictionary *resultsDictionary;
    NSURLConnection *urlConnection;

}
@property(nonatomic,strong) IBOutlet UITableView *tableView1;
@property (nonatomic, strong) NSMutableData *responseData;

@end 
```

**视图控制器.m**

```
- (void)viewDidLoad
{

    arrRespone=[NSMutableArray new];

    self.responseData = [NSMutableData data];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.indiaglitz.com/json/vod_menu_init.asp"]];

    urlConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    [self.responseData appendData:data];

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{

    [self.responseData setLength:0];

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {

    NSLog(@"didFailWithError");

   // NSLog([NSString stringWithFormat:@"Connection failed: %@", [error description]]);

}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSLog(@"connectionDidFinishLoading");

    NSLog(@"Succeeded! Received %d bytes of data",[self.responseData length]);

    // convert to JSON

    NSError *myError = nil;

   resultsDictionary = [NSJSONSerialization JSONObjectWithData:self.responseData options:NSJSONReadingMutableLeaves error:&myError];

    NSDictionary  *arrDetails=[[resultsDictionary objectForKey:@"menu"] objectAtIndex:0] ;

    NSDictionary *genr=[[arrDetails valueForKey:@"categories"] objectAtIndex:0];

    NSLog(@"array detailsarray ====>%@",arrDetails);

    NSLog( @"genreee arrray==%@",genr);

    //NSLog(@"genrvalueeee -----%@",[genr valueForKey:@"genre"]);

    NSLog(@"counttttt===%d",[[genr valueForKey:@"genre" ] count]);

    NSLog(@"genre objectatindex==%@",[genr valueForKey:@"cliptype"]);

    for (int i=0;i<[[genr valueForKey:@"genre" ] count];i++)

    {

        NSDictionary *strDetails=[[genr valueForKey:@"genre"] objectAtIndex:i];
        NSString *str=[strDetails valueForKey:@"gname"];
        NSLog(@"First string details===>%@",str);

        [arrRespone addObject:str];

        NSLog(@"response ====>%@",arrRespone);   
    }
    [tableView1 reloadData];
    }
#pragma mark Table view methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    NSLog(@"numberOfSectionsInTableView");
    return 1;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 45;  
    NSLog(@"heightForRowAtIndexPath");

}
// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"numberOfRowsInSection");
   return  [arrRespone count];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"inside tableview");
    static NSString *CellIdentifier = @"TableCell";

    //TableCell *cell = (TableCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier];

    }
   // cell.textLabel.text=[arrRespone objectAtIndex:indexPath.row];

    NSLog(@"cellvalue:%@",cell.textLabel.text);
    NSLog(@"inside numberofRowsInsection");
    // Configure the cell...
      cell.textLabel.text = [arrRespone objectAtIndex:indexPath.row];

    return cell;

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

# android - 从 JSON url 读取数据，但 android 不允许。NetworkOnMainThread 异常和 StrictMode$AndroidBlockGuardPolicy 错误

> ID：11808130
> 
> 赞同：1
> 
> 时间：2012-08-04T11:04:05.707
> 
> 标签：android, json, android-mapview, gson, android-networking

我正在尝试在 Android 应用程序中使用谷歌地图。MainActivity 包含 EditText、ImageButton 和 MapView。当用户给出一些查询并点击 ImageButton 时，MainAcitivity 应该从 url 获取一些 JSON 数据，然后当用户单击这些标记时，我需要使用该 JSON 数据来创建标记和对话框。每当我运行应用程序时，它都运行良好。但是当我单击 ImageButton 时，应用程序停止给出 logcat 错误 NetworkOnMainThreadException 和 StrickMode$AndroidBlockGuardPolicy。我附上了 logcat 输出和 MainActivity。我已经运行了这个 JSON 程序来创建其他测试项目，它工作得很好。但是当我将它添加到 MainAcitivity 时，它不起作用。我相信，android 的安全策略正在阻止它从 url 获取数据。

那么这个错误的原因是什么，我怎样才能使这个活动工作呢？非常感谢朋友们的关注。如果您需要更多 CustomOverlayItem 对象或 JSON 对象的代码，请告诉我。

```
public class MainActivity extends MapActivity {

        private List<Home> listHome = new ArrayList<Home>();

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            MapView mv_map = (MapView) findViewById(R.id.mv_map);
            MapController mapController = mv_map.getController();
            mv_map.setBuiltInZoomControls(true);
            mapController.setZoom(5);
            Markers markers = new Markers(this.getResources().getDrawable(
                    R.drawable.ic_action_home), this);
            CustomOverlayItem items = new CustomOverlayItem(getuserLocation(),
                    "Checking", "Checking");
            List<Overlay> overlays = mv_map.getOverlays();
            markers.addOverlayItem(items);
            overlays.add(markers);

            ImageButton ib_search = (ImageButton) findViewById(R.id.ib_search);
            ib_search.setOnClickListener(new OnClickListener() {

            @Override
                public void onClick(View v) {
                    Json json = new Json();
                    listHome = json.getListHome();
                    EditText editText = (EditText) findViewById(R.id.et1_search);
                    editText.setText(listHome.get(0).getTitle().toString());
                }
            });

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

        @Override
        protected boolean isRouteDisplayed() {
            return false;
        }

        private GeoPoint getuserLocation() {
                GeoPoint geoPoint = new GeoPoint(19240000, -99120000);
            return geoPoint;
        }
    } 
```

Logcat 输出：错误

```
08-04 16:26:55.253: E/Trace(1307): error opening trace file: No such file or directory (2)
08-04 16:26:57.743: E/MapActivity(1307): Couldn't get connection factory client
08-04 16:27:01.643: E/AndroidRuntime(1307): FATAL EXCEPTION: main
08-04 16:27:01.643: E/AndroidRuntime(1307): android.os.NetworkOnMainThreadException
08-04 16:27:01.643: E/AndroidRuntime(1307):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at java.net.URL.openStream(URL.java:462)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at com.incubers.map.json.Json.getListHome(Json.java:33)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at com.incubers.map.MainActivity$1.onClick(MainActivity.java:53)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at android.view.View.performClick(View.java:4084)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at android.view.View$PerformClick.run(View.java:16966)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at android.os.Handler.handleCallback(Handler.java:615)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at android.os.Looper.loop(Looper.java:137)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at java.lang.reflect.Method.invokeNative(Native Method)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at java.lang.reflect.Method.invoke(Method.java:511)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-04 16:27:01.643: E/AndroidRuntime(1307):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T11:07:48.390

当应用程序尝试在其主线程上执行网络操作时，会引发[NetworkOnMainThreadException异常。使用](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)、[Handler](http://developer.android.com/reference/android/os/Handler.html)、[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html) 从服务器获取 Json

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:24:43.410

```
StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
    .detectAll()
    .penaltyLog()
    .penaltyDialog()
    .build()); 
```

参考[这个](http://developer.android.com/reference/android/os/StrictMode.html)

您还可以避免主线程上的 IO 相关任务/

使用 Handler、AsyncTask 并在 UI 上发布结果。

# jquery - how to insert a auto reload in potomak/jquery-instagram

> ID：11808132
> 
> 赞同：0
> 
> 时间：2012-08-04T11:04:36.690
> 
> 标签：jquery, instagram

I'm trying to build something out of potomak's jquery-instagram js code and I'm using it as is.. [here](https://github.com/potomak/jquery-instagram/blob/master/jquery.instagram.js) is the code:

and [here](https://github.com/potomak/jquery-instagram/blob/master/README.md) is how I'm calling it (the second one with the "more" button..)

could someone please tell me how to insert a auto refresh every X seconds to the photostream..?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:25:39.903

Try something like:

```
function hipsterPictures() {
  var clientId = 'xxx';
  var loading = '<div class="loading">Loading...</div>';

  $(".instagram.tag").html(loading).instagram({
    hash: 'hipster',
    show: 5,
    clientId: clientId,
    onComplete: function() {
      $(".instagram.tag .loading").remove();
    }
  });
}

hipsterPictures();

setInterval(function() {
  hipsterPictures();
}, 10000); 
```

See [demo](http://jsbin.com/ufudoj/4/edit).

# android - Android 自定义视图不能使用 alignParentButton 或 wrap_content

> ID：11808133
> 
> 赞同：0
> 
> 时间：2012-08-04T11:04:48.473
> 
> 标签：android, custom-view

我有一个问题，我不知道如何解决。我创建了一个自定义视图，并希望将其与相对布局中的父按钮对齐，但是当我这样做时，视图变得透明了？！怎么会这样？此外，如果我设置周围的视图 layout_height = wrap_content 它会填满整个屏幕。我怎样才能将其配置为不这样做，而只是包装内容？

这是我的自定义视图

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.LinearGradient;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.Shader;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.RelativeLayout;

public class HomeMenuBackground extends View
{ 
    private int mScreenWidth;
    private int mScreenHeight;
    private RectF mSpace;
    private RectF mSpaceStroke;
    private Paint mPaint;
    private Paint mPaintStroke;
    private Rect mRect; 
    private LinearGradient mGradient;

    public HomeMenuBackground(Context context, AttributeSet attrs)
    {
        super(context, attrs);

        mScreenWidth = context.getResources().getDisplayMetrics().widthPixels;
        mScreenHeight = context.getResources().getDisplayMetrics().heightPixels;
        final int mHeighMenu = (int) (mScreenHeight*0.8);
        mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mSpace = new RectF(-20, 2, mScreenWidth + 20, 148);
        mSpaceStroke = new RectF(-22, 0, mScreenWidth + 22, 150);
        mRect = new Rect();

        mPaintStroke = new Paint();
        mPaintStroke.setStyle(Paint.Style.STROKE);
        mPaintStroke.setStrokeCap(Paint.Cap.ROUND);
        mPaintStroke.setStrokeWidth(2);
        mPaintStroke.setColor(Color.BLACK);
        mPaintStroke = new Paint(Paint.ANTI_ALIAS_FLAG);

    }

    @Override
    public void onDraw(Canvas canvas)
    {       
        mRect.set(0, 75, canvas.getWidth(), canvas.getHeight());
        canvas.drawArc(mSpaceStroke, 180, 360, true, mPaintStroke);
        canvas.drawArc(mSpace, 180, 360, true, mPaint);
        canvas.drawRect(mRect, mPaint);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
    {
        if(mGradient == null)
        {
            mGradient = new LinearGradient(0, 0, 0, MeasureSpec.getSize(heightMeasureSpec), Color.WHITE, Color.GRAY, Shader.TileMode.MIRROR);
            mPaint.setShader(mGradient);
        }

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
} 
```

我希望你能帮助我：D

BR FireFly3000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:20:21.243

为了确定自定义视图的高度和宽度，您可以覆盖[`setMeasuredDimension (int measuredWidth, int measuredHeight)`](http://developer.android.com/reference/android/view/View.html#setMeasuredDimension%28int,%20int%29)方法并根据您的要求提供视图的高度和宽度。`setMeasuredDimension(100, 100);`我尝试使用 RelativeLayout 我可以通过使用inside`onMeasure()`方法在底部看到高度和宽度为 (100, 100) 的布局。

# django - django：循环或迭代字段、名称和详细名称

> ID：11808134
> 
> 赞同：0
> 
> 时间：2012-08-04T11:04:51.950
> 
> 标签：django, python-2.7, django-views, django-templates

我想我已经阅读了大多数“相关/重复”问题（即[来自模板标签的冗长](https://stackoverflow.com/questions/7792353/django-verbose-name-from-a-template-tag)，[遍历字段名称](https://stackoverflow.com/questions/2170228/django-iterate-over-model-instance-field-names-and-values-in-template)，[遍历模型](https://stackoverflow.com/questions/3159614/iterating-through-model-fields-django)，以及[一些](https://stackoverflow.com/questions/2368948/list-fields-present-in-a-table)，[更多](https://stackoverflow.com/questions/4279905/access-django-model-fields-label-and-help-text?lq=1)......）

不幸的是，我担心我需要一些手握......因为我是 django n00b 并且似乎无法使其工作。这是我在 html 中想要的结果：

```
<!-- this in some section of the template -->
First Name : . Joe
Last Name : .. Blogs

<!-- this in another section -->
City:  ....... Xanadu
Country: ..... Mongolia
Occupation: .. Programmer

<!-- this in another section of the template -->
Age: ......... 75 
Height: ...... 180 cm
Eye color:  .. red 
```

我不想只做 4 或 5 个部分和 10 个可能的字段

```
{% if data.first_name %}
  First Name:  {{ data.first_name }}
{% endif %} 
```

四十次！:-/ ...所以这是（大致）我的尝试：

**模型.py**

```
class GenericPerson(models.Model):
    first_name = models.CharField(_('First Name'),
                        max_length = 200, 
                        help_text = _('What is your name?'))

    last_name = models.CharField(_('Last Name'),
                        max_length = 200, 
                        help_text = _('What is your name?'))
    etc, etc ...

    class Meta:
        abstract = True

class Person(GenericPerson):    
    age_in_years = models.PositiveIntegerField(_('Age'), 
                null = True,
                blank = True,
                help_text=_('When was you born?, mate')) 
    location = models.ForeignKey(GeographicalProfile,
                               verbose_name=_('geolocations'),
                               null = True,
                               blank = True)

    height = ... etc, etc. 
```

**视图.py**

```
...
try:
   person = Person.objects.filter(pk=product_id)
except Person.DoesNotExist:
    raise Http404

generaldata = person.values('first_name',
                              'last_name',
                              etc, etc,
                              )[0]
localdata = person.values('city',
                              'country',
                              etc, etc
                              )[0]
physicaldata = person.values('age',
                                 'height',
                                 'eye_color',
                                  etc, etc
                                 )[0]
extra_context[data] = generaldata
extra_context[loc] = localdata
extra_context[phys] = physicaldata

return render_to_response(template_name, extra_context ,context_instance=RequestContext(request)) 
```

使用该视图，我可以

**模板.html**

```
{% for p in phys.items %}
<ul>
  {% if p.1 %}
     <li>{{p.0}} :  {{p.1}}</li>
  {% endif %}
</ul>
{% endfor %} 
```

对于不同的部分。但这会将字段返回为 age_in_years、eye_color（而不是名称）。好的，所以从上面的帖子中我创建了一个自定义模板标签，

```
from django import template
register = template.Library()

@register.filter
def get_name(object):
    return object._meta.verbose_name # put here whatever you would like to return

register.tag('get_name', get_name) 
```

，将其加载到模板 {% load person_extras %} 中，现在......我已经盲目地尝试在模板中的任何地方使用这个 {{something|get_object_name}} ......但是我没有理解的蛮力给了我：

> “str”对象没有属性“_meta”
> 
> “列表”对象没有属性“_meta”
> 
> “元组”对象没有属性“_meta”
> 
> 'dict' 对象没有属性 '_meta'
> 
> “ValuesQuerySet”对象没有属性“_meta”

那么，我在哪里使用这个模板标签呢？或者我如何修改我的视图以在 for 循环中使用这个模板标签？

谢谢你的洞察力

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T12:18:10.650

当你调用`person = Person.objects.filter(pk=product_id)`时会返回一个`QuerySet`对象`People`。当您随后[`values`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values)在此查询集上使用它时——用文档的话来说——：

> 返回一个 ValuesQuerySet — 一个 QuerySet 子类，它在用作可迭代对象而不是模型实例对象时返回字典。

所以基本上，在你的模板中，当你尝试调用你的模板标签时，你试图调用`._meta.verbose_name`一个字典对象而不是一个`Person`对象，这是行不通的。

因此，您可以改为将普通查询集传递给模板，然后限制要为每个部分（常规、本地、物理）显示的字段并使用一些模板过滤器来帮助您。所以像：

```
try:
    people = Person.objects.filter(pk=product_id)
except Person.DoesNotExist:
    raise Http404

extra_context = {
    'people' : people,
    'general_fieldnames' : ['first_name', 'last_name' ...],
    'local_fieldnames' : ['age', 'weight' ...],
    'physical_fieldnames' : ['age', 'height' ...], 
}
return render_to_response(template_name, extra_context      
    ,context_instance=RequestContext(request)) 
```

但是有一个问题（如您所知），因为没有简单的方法可以遍历对象的字段或获取它们的详细名称。相反，我们可以遍历我们的`physical_fieldnames`列表，从对象中获取相应的字段以及使用过滤器的详细名称。

```
from django import template
register = template.Library()

@register.filter
def get_field_value(obj, field_name):
    return getattr(obj, field_name, None)

@register.filter
def get_verbose_name(obj, field_name):
    return obj._meta.get_field(field_name).verbose_name

register.tag('get_verbose_name', get_verbose_name)
register.tag('get_field_value', get_field_value) 
```

现在在模板中

```
{% for person in people %}
<h1>General</h1>
<ul>
{% for field_name in general_fieldnames %}
    {{ person|get_verbose_name:field_name }} : {{ person|get_field_value:field_name }}
{% endfor %}
</ul>
{% endfor %}

... 
```

# javascript - 添加 jquery 验证后，jquery datepicker 无法正常工作

> ID：11808141
> 
> 赞同：0
> 
> 时间：2012-08-04T11:06:31.910
> 
> 标签：javascript, jquery

我创建了一个页面来通过 jquery UI 日期选择器添加生日。它工作正常。但是在我为字段添加 jquery 验证之后。日期选择器没有出现。但是验证工作正常。谁能给我一个理由和答案？谢谢你。这是我的脚本标签...

```
 <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script> 
<script  src="Scripts/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery/jquery.min.js"></script>

    </script>
<!-- DIALOG BOX START ------------------------------------------------------------------------------------>
<link href="CSS_D/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />
  <script>

$(document).ready(function(){

 $('#search_btn').click(function(){

        if( $('#legacy_code_text').val() == "" && $('#lable_title_text').val() == "" && $('#division_list').val() == -1 &&

        $('#lable_title_text').val() == "" &&       
        $('#file_name_text').val() == "" && 
        $('#bundle_ref_no_text').val() == "" && 
        $('#bundle_shelf_no_text').val() == "" && 
        $('#rack_no_text').val() == "" && 
        $('#shelf_no_text').val() == "" &&      
        $('#date_created_text').val() == "" && 
        $('#date_retained_text').val() == "" && 
        $('#date_to_be_disposed_text').val() == "" &&       
        $('#division_list').val() == -1 &&      
        $('#unit_list').val() == -1 &&
        $('#assignee_code_list').val() == -1 &&
        $('#assignee_list').val() == -1 &&
        $('#subject_list').val() == -1 &&
        $('#serial_no_list').val() == -1 

        ){
        $( "#dialog:ui-dialog" ).dialog( "destroy" );

        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Ok": function() {

                        $( this ).dialog( "close" );

                    //*****************************************************************
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }

        });
        }else{ 

        $('#form1').submit();

          }
    });
    });

    </script>

    <!-- DIALOG BOX END ------------------------------------------------------------------------------------>

    <!--Ajax Function To Fill Unit Drop Down------------------------------------------------------------------------>
    <script>
    function fillUnitDropDown(str)
                {
                    var xmlhttp;
                    if (str.length==0)
                    { 
                        document.getElementById("unit_list").innerHTML="";
                        return;
                    }
                    if (window.XMLHttpRequest)
                    {// code for IE7+, Firefox, Chrome, Opera, Safari
                        xmlhttp=new XMLHttpRequest();
                    }
                    else
                    {// code for IE6, IE5
                        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xmlhttp.onreadystatechange=function()
                    {
                        if (xmlhttp.readyState==4 && xmlhttp.status==200)
                        {
                            document.getElementById("unit_list").innerHTML=xmlhttp.responseText;
                        }
                    }
                    xmlhttp.open("GET","getUnit.php?division="+str,true);
                    xmlhttp.send();
                }

</script>
   <!--Ajax Function To Fill Unit Drop Down END------------------------------------------------------------------------>
<style type="text/css">
body {
    background-color: #B4C8E0;
    background-image: url(images/title2.png),url(images/tile.png);
    background-attachment:fixed;
    background-repeat: repeat ;
    margin:0;
    padding:0;
}
.logdetials .main_bar tr td {
    color: #cdf8ff;
}
a:link {
    color: #cdf8ff;
}

</style>

<!-- SLIDE SHOW START--------------------------------------------------------------------------------------------->
<script type="text/javascript" src="jquery/fadeslideshow.js">

/***********************************************
* Ultimate Fade In Slideshow v2.0- (c) Dynamic Drive DHTML code library (www.dynamicdrive.com)
* This notice MUST stay intact for legal use
* Visit Dynamic Drive at http://www.dynamicdrive.com/ for this script and 100s more
***********************************************/

</script>
<script type="text/javascript">

var mygallery=new fadeSlideShow({
    wrapperid: "slide", //ID of blank DIV on page to house Slideshow
    dimensions: [967, 200], //width/height of gallery in pixels. Should reflect dimensions of largest image
    imagearray: [
        ["images/img0.jpg", "", "", "The best way to track your files"],
        ["images/img1.jpg", "", "", "The choice for quality service"],
        ["images/img2.jpg", "", "", "With latest technology"],
        ["images/img3.jpg","","","For a safe and secured place"],
        ["images/img4.jpg", "", "", "Better performance with reliable service"],
        ["images/img5.jpg", "", "", "24 x 7 Service"]

         //<--no trailing comma after very last image element!
    ],
    displaymode: {type:'auto', pause:5000, cycles:0, wraparound:false},
    persist:  false, //remember last viewed slide and recall within same session?
    fadeduration: 1500, //transition duration (milliseconds)
    descreveal: "peekaboo",
    togglerid: ""
})

</script>
<!-- SLIDE SHOW END--------------------------------------------------------------------------------------------->

<!-- Date PICKER START--------------------------------------------------------------------------------------------->
    <link rel="stylesheet" href="JDate/themes/base/jquery.ui.dialog.css">
<script src="JDate/ui/jquery-1.7.2.js"></script>
    <script src="JDate/ui/jquery.ui.core.js"></script>
    <script src="JDate/ui/jquery.ui.widget.js"></script>
    <script src="JDate/ui/jquery.ui.datepicker.js"></script>
    <link rel="stylesheet" href="JDate/demos/demos.css">
    <script>
    $(function() {
        $( "#birthday_text" ).datepicker();

            $( "#birthday_text" ).datepicker( "option", "dateFormat", "yy-mm-dd" );

    });

    </script>
<!-- Date PICKER END --------------------------------------------------------------------------------------------->

<!-- Jquery Validations -------------------------->
<script src="NewFormValidator/js/jquery-1.7.2.min.js" type="text/javascript">
    </script>
    <script src="NewFormValidator/js/languages/jquery.validationEngine-en.js" type="text/javascript" charset="utf-8">
    </script>
    <script src="NewFormValidator/js/jquery.validationEngine.js" type="text/javascript" charset="utf-8">
<link rel="stylesheet" href="NewFormValidator/css/validationEngine.jquery.css" type="text/css"/>

    <script>
        jQuery(document).ready(function(){
            // binds form submission and fields to the validation engine
            jQuery("#form1").validationEngine();
        });

        /**
        *
        * @param {jqObject} the field where the validation applies
        * @param {Array[String]} validation rules for this field
        * @param {int} rule index
        * @param {Map} form options
        * @return an error string if validation failed
        */
        function checkHELLO(field, rules, i, options){
            if (field.val() != "HELLO") {
                // this allows to use i18 for the error msgs
                return options.allrules.validate2fields.alertText;
            }
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:36:12.293

一旦我遇到了类似的问题。这是因为 jquery 的不同版本。我认为您也在使用不同版本的 Jquery。删除所有不必要的引用。仅使用一个用于 Datepicker 的 Jquery 参考。

# iphone - Cocos2d：对多个精灵使用单个计时器/调度器

> ID：11808143
> 
> 赞同：0
> 
> 时间：2012-08-04T11:06:38.660
> 
> 标签：iphone, cocos2d-iphone, nstimer, box2d-iphone

我想知道是否可以对多个精灵使用单个计时器或调度程序方法？就像我现在正在开发游戏一样，可能有任意数量的精灵，我想对所有这些精灵执行一些操作，那么我是否必须使用与精灵一样多的计时器或调度程序？或者如何仅使用一个计时器或调度程序来完成这项工作？如果我安排一个方法并将其用于，说 10 个精灵怎么办？会不会影响性能..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:20:08.580

这在大多数游戏中都很常见。通常你会使用一个相似的对象列表来进行不同的操作。粒子系统就是这样工作的，使用单个对象更新所有精灵的位置。不过，在我的游戏中，我有很多对象，每个对象都有自己的更新功能，即使它们是同一类型。

```
for (GameObject* object in objects)
    [object update:dt]; 
```

我想它更像是一个性能问题，一旦你遇到问题，或者如果你知道你将进行繁重的处理，就应该对其进行优化。像这样的东西可能在更新函数上，会涉及更少的函数调用，并且可能会更有效，但我认为它真的不值得，因为首先尝试优化的东西可能会在绘图侧而不是逻辑方面（如 spritebatch 或粒子系统）。

```
for (CCSprite* sprite in sprite)
{
    sprite.x = someVariable;
} 
```

# xml - Chrome 扩展清单版本：2 xml

> ID：11808144
> 
> 赞同：0
> 
> 时间：2012-08-04T11:06:56.597
> 
> 标签：xml, google-chrome-extension

我正在使用 javascript rss 搜索脚本作为可搜索的电话/地址列表来工作。我将它作为带有清单版本：1 的工具栏上的 Chrome 弹出扩展程序，但我无法让它与版本：2 一起使用。在版本：1 中，xml 数据库文件不需要在清单中命名，但似乎在版本：2 中确实如此，但对于我的生活，我无法弄清楚它应该去哪里。我不希望它被上传到服务器或任何东西，因为我们只需要它在本地工作，它在 version:1 上做得很好。

我尝试搜索要复制的清单文件，但大多数答案都引用了较旧的清单版本，例如[Chrome Extension Manifest 'Matches'](https://stackoverflow.com/questions/2769525/chrome-extension-manifest-matches)

我希望这是我想念的简单的东西，所以如果有人可以提供帮助，将不胜感激。

~~这是我的清单代码：~~ 修改后的代码如下：

```
 {
  "name": "Telephone Search",
  "version": "2.0",
  "description": "Tel Test.",

  "browser_action": {
    "default_icon": "icon.png",
    "default_title": "Addresses",
    "default_popup": "index.html"
    },
  "content_scripts": [
    {
      "matches": [
      "http://*/*",
      "file://*/*",
      "<all_urls>"
      ],
      "js": [
      "combinedTipue.js"
      ]
    }
  ],
  "permissions": [
    "tabs",
    "http://*/*",
    "file://*/*",
    "<all_urls>"
  ],
  "manifest_version": 2
 } 
```

xml 文件tipue_data.xml 在我一直试图让它工作的几个地方！

* * *

@ Rob W 如果您的意思是 .js 脚本，我在下面添加了它们：（抱歉，如果它们应该放在“评论”而不是“答案”中，但有字符限制）

~~tipue.js~~ 结合Tipue.js

```
 function setFocus(){
document.getElementById("searchBox").focus();
}
// Tipue JS 4.2
//
// Tipue JS Copyright (C) 2002-2007 Tri-State Consultants
// Tipue JS is open source and released under the GNU General Public License
// Start tipue_set code
// Tipue JS 4.2
//
// Tipue JS Copyright (C) 2002-2007 Tri-State Consultants
// Tipue JS is open source and released under the GNU General Public License
//
// Tipue JS Set
// General
data = 'tipue_data.xml';
data_source = 1;
results_location = 'results.html';

// Results 

per_page = 10;
context = 1;
context_seed = 100;
descriptive_length = 25;
rank_seed = 3;
include_num = 0;
include_url = 1;
header_links = 1;
bold_query = 1;
bold_title = 1;
bold_footer = 1;

// Search

common_words = 'a about an are as at be by do for from how I in is it of on that the this to was what when where who will with';
stemming = 'javascript^js checkboxes^checkbox';
spell = 'tipu^Tipue endshet^Endsheet';

// Text

tl_1 = 'Your search - ';
tl_2 = ' - did not match any documents.<p>Suggestions:<p>Make sure all keywords are spelled correctly.<br>Try different or more general keywords.';
tl_3 = 'Previous';
tl_4 = 'Next';
tl_5 = 'to';
tl_6 = 'of';
tl_7 = 'for';
tl_8 = 'Did you mean:';
tl_9 = 'The following common words have been excluded from your search:';
tl_10 = 'Blank search.';
tl_11 = '<p>Powered by <a href="http://www.tipue.com" target="_blank">Tipue</a>';
tl_12 = 'Results';

// XML

xml_pages = 'page';
xml_title = 'title';
xml_url = 'url';
xml_content = 'content';

// End tipue_set code
tid = window.location.search;
rd = tid.indexOf('?d=');
rn = tid.indexOf('&n=');
if (rn == -1) {
    dit = tid.substring(rd + 3);
    tn = 0;
} else {
    dit = tid.substring(rd + 3, rn);
    tn = parseInt(tid.substring(rn + 3));
}
dit = dit.replace(/\+/g, ' ');
dit = decodeURIComponent(dit);

dit = dit.replace(/\s+/g, ' ');
od = dit;
hd = dit;

dit = dit.replace(/ and /gi, ' ');
dit = dit.replace(/- /gi, '-');
dit = dit.replace(/\s+/g, ' ');

nr = per_page;
r_l = results_location;
b_q = bold_query;
b_t = bold_title;
b_f = bold_footer;
ct = context;
c_s = context_seed;
seed = rank_seed;
ct_l = descriptive_length;
c_w = common_words;

tr = new Array();
co = 0;
nd = 0;
nc = 0;
sp_l = '';
cw_l = '';

if (data_source < 2) {
    s = new Array();
    if (window.ActiveXObject) {
        xmldoc = new ActiveXObject("Microsoft.XMLDOM");
        xmldoc.async = false;
        xmldoc.onreadystatechange = function () {
            if (xmldoc.readyState == 4) get_xml();
        }
        xmldoc.load(data);
    } else if (window.XMLHttpRequest) {
        client = new XMLHttpRequest();
        client.open("GET", data, false);
        client.send(null);
        xmldoc = client.responseXML;
        get_xml();
    }
}

function get_xml() {
    if (document.implementation && document.implementation.createDocument) xmldoc.normalize();
    if (data_source == 0) {
        pages = xmldoc.getElementsByTagName("item");
        for (c = 0; c < pages.length; c++) {
            rs = pages[c];
            es_0 = rs.getElementsByTagName("title")[0].firstChild.data;
            es_0 = es_0.replace(/\^|\~/g, '');
            es_1 = rs.getElementsByTagName("link")[0].firstChild.data;
            es_1 = es_1.replace(/\^|\~/g, '');
            es_2 = rs.getElementsByTagName("description")[0].firstChild.data;
            es_2 = es_2.replace(/\^|\~/g, '');
            s[c] = es_0 + '^' + es_1 + '^' + es_2 + '^0^0';
        }
    }
    if (data_source == 1) {
        pages = xmldoc.getElementsByTagName(xml_pages);
        for (c = 0; c < pages.length; c++) {
            rs = pages[c];
            es_0 = rs.getElementsByTagName(xml_title)[0].firstChild.data;
            es_0 = es_0.replace(/\^|\~/g, '');
            es_1 = rs.getElementsByTagName(xml_url)[0].firstChild.data;
            es_1 = es_1.replace(/\^|\~/g, '');
            es_2 = rs.getElementsByTagName(xml_content)[0].firstChild.data;
            es_2 = es_2.replace(/\^|\~/g, '');
            if (rs.getElementsByTagName("open").length > 0) es_3 = rs.getElementsByTagName("open")[0].firstChild.data;
            else es_3 = '0';
            if (rs.getElementsByTagName("rank").length > 0) es_4 = rs.getElementsByTagName("rank")[0].firstChild.data;
            else es_4 = '0';
            s[c] = es_0 + '^' + es_1 + '^' + es_2 + '^' + es_3 + '^' + es_4;
        }
    }
}

dit = dit.replace(/\^/g, '');
dit = dit.replace(/^\s+/, '');
dit = dit.replace(/\s+$/, '');
if (seed < 1) seed = 1;
if (seed > 9) seed = 10;

v_d = false;
if (dit == '' || dit == ' ') v_d = true;

t_m = 0;
if (dit.charAt(0) == '"' && dit.charAt(dit.length - 1) == '"') t_m = 1;

if (t_m == 0 && !v_d) {
    if (c_w.length > 0) {
        cw = c_w.split(' ');
        for (i = 0; i < cw.length; i++) {
            pat = new RegExp("\\b" + cw[i] + "\\b", 'gi');
            rn = dit.search(pat);
            if (rn != -1) {
                pat_1 = new RegExp("\\+" + cw[i] + "\\b", 'gi');
                pat_2 = new RegExp("\\-" + cw[i] + "\\b", 'gi');
                rn_1 = dit.search(pat_1);
                rn_2 = dit.search(pat_2);
                if (rn_1 == -1 && rn_2 == -1) {
                    cw_l += '<b>' + cw[i] + '</b>, ';
                    dit = dit.replace(pat, '');
                }
            }
        }
        if (cw_l.length > 0) {
            cw_l = cw_l.replace(/\s+$/, '');
            if (cw_l.charAt(cw_l.length - 1) == ',') cw_l = cw_l.substr(0, cw_l.length - 1);
            dit = dit.replace(/\s+/g, ' ');
            dit = dit.replace(/^\s+/, '');
            dit = dit.replace(/\s+$/, '');
            if (dit == '' || dit == ' ') v_d = true;
            hd = dit;
        }
    }

    if (spell.length > 0) {
        cw = spell.split(' ');
        for (i = 0; i < cw.length; i++) {
            wt = cw[i].split('^');
            pat = new RegExp("\\b" + wt[0] + "\\b", 'i');
            rn = dit.search(pat);
            if (rn != -1) {
                if (sp_l.length < 1) sp_l = dit;
                pat = new RegExp(wt[0], 'i');
                sp_l = sp_l.replace(pat, wt[1]);
            }
        }
    }

    if (stemming.length > 0) {
        cw = stemming.split(' ');
        for (i = 0; i < cw.length; i++) {
            wt = cw[i].split('^');
            pat = new RegExp("\\b" + wt[0] + "\\b", 'i');
            rn = dit.search(pat);
            if (rn != -1) {
                dit = dit.replace(pat, wt[0] + '~' + wt[1]);
            }
        }
    }

    dit = dit.replace(/ or /gi, '~');
    dit = dit.replace(/\"/gi, '');
    ct_d = 0;
    w_in = new Array();
    wt = dit.split(' ');
    for (i = 0; i < wt.length; i++) {
        w_in[i] = 0;
        if (wt[i].charAt(0) == '-') w_in[i] = 1;
        pat = new RegExp("\\~", 'i');
        rn = wt[i].search(pat);
        if (rn != -1) w_in[i] = 2;
        wt[i] = wt[i].replace(/^\-|^\+/gi, '');
    }

    a = 0;
    for (c = 0; c < s.length; c++) {
        es = s[c].split('^');
        rk = 1000;
        if (es[3] == null) es[3] = '0';
        if (es[4] == null) es[4] = '0';
        if (parseInt(es[4]) > 10) es[4] = '10';
        pa = 0;
        nh = 0;
        for (i = 0; i < w_in.length; i++) {
            if (w_in[i] == 0) {
                nh++;
                nt = 0;
                pat = new RegExp("\\b" + wt[i] + "\\b", 'i');
                rn = es[0].search(pat);
                if (rn != -1) {
                    rk -= seed * 3;
                    rk -= parseInt(es[4]);
                    nt = 1;
                    if (ct == 1) ct_d = 1;
                }
                rn = es[2].search(pat);
                if (rn != -1) {
                    rk -= seed;
                    rk -= parseInt(es[4]);
                    nt = 1;
                }
                if (nt == 1) pa++;
            }
            if (w_in[i] == 1) {
                pat = new RegExp("\\b" + wt[i] + "\\b", 'i');
                rn = es[0].search(pat);
                if (rn != -1) pa = 0;
                rn = es[2].search(pat);
                if (rn != -1) pa = 0;
            }
            if (w_in[i] == 2) {
                nh++;
                nt = 0;
                w_o = wt[i].split('~');
                pat = new RegExp("\\b" + w_o[0] + "\\b", 'i');
                pat_2 = new RegExp("\\b" + w_o[1] + "\\b", 'i');
                rn = es[0].search(pat);
                rn_2 = es[0].search(pat_2);
                if (rn != -1 || rn_2 != -1) {
                    rk -= seed / 2;
                    rk -= parseInt(es[4]);
                    nt = 1;
                    if (ct == 1) ct_d = 1;
                }
                rn = es[2].search(pat);
                rn_2 = es[2].search(pat_2);
                if (rn != -1 || rn_2 != -1) {
                    rk -= seed / 2;
                    rk -= parseInt(es[4]);
                    nt = 1;
                }
                if (nt == 1) pa++;
            }
        }

        if (pa == nh && nh != 0) {
            es_c = '';
            ci_e = es[2].split(' ');
            if (ci_e.length < ct_l) {
                es_c = es[2];
            } else {
                for (i = 0; i < ct_l; i++) {
                    es_c += ci_e[i] + ' ';
                }
            }
            es_c = es_c.replace(/^\s*|\s*$/g, '');
            if (es_c.charAt(es_c.length - 1) == '.' || es_c.charAt(es_c.length - 1) == ',') es_c = es_c.substr(0, es_c.length - 1);
            es_c += ' ...';

            if (ct == 1 && ct_d == 0) {
                ct_f = true;
                pat = new RegExp("\\b" + wt[0] + "\\b", 'i');
                rn = es[2].search(pat);
                if (rn > c_s) {
                    t_1 = es[2].substr(rn - (c_s - 1));
                    rn = t_1.indexOf('. ');
                    if (rn != -1 && rn < (c_s / 2)) {
                        t_1 = t_1.substr(rn + 1);
                        t_2 = t_1.split(' ');
                        if (t_2.length > ct_l) {
                            es_c = '';
                            for (i = 1; i < ct_l + 1; i++) {
                                es_c += ' ' + t_2[i];
                            }
                            if (es_c.charAt(es_c.length - 1) == '.' || es_c.charAt(es_c.length - 1) == ',') es_c = es_c.substr(0, es_c.length - 1);
                            es_c += ' ...';
                            ct_f = false;
                        }
                    }
                }
                if (ct_f) {
                    rn = es[2].search(pat);
                    t_1 = es[2].substr(rn - (c_s / 5));
                    rn = t_1.indexOf(' ');
                    if (rn != -1) {
                        t_1 = t_1.substr(rn + 1);
                        t_2 = t_1.split(' ');
                        es_c = '';
                        if (t_2.length > ct_l) {
                            for (i = 1; i < ct_l + 1; i++) {
                                es_c += ' ' + t_2[i];
                            }
                        } else {
                            for (i = 1; i < t_2.length; i++) {
                                es_c += ' ' + t_2[i];
                            }
                        }
                        if (es_c.charAt(es_c.length - 1) == '.' || es_c.charAt(es_c.length - 1) == ',') es_c = es_c.substr(0, es_c.length - 1);
                        es_c += ' ...';
                    }
                }
            }

            tr[a] = rk + '^' + es[0] + '^' + es[1] + '^' + es_c + '^' + es[2] + '^' + es[3] + '^' + es[4];
            a++;
        }
    }
    tr.sort();
    co = a;
}

if (t_m == 1 && !v_d) {
    dit = dit.replace(/"/gi, '');
    a = 0;
    ct_d = 0;
    pat = new RegExp(dit, 'i');
    for (c = 0; c < s.length; c++) {
        es = s[c].split('^');
        rk = 1000;
        if (es[3] == null) es[3] = '0';
        if (es[4] == null) es[4] = '0';
        if (parseInt(es[4]) > 10) es[4] = '10';
        rn = es[0].search(pat);
        if (rn != -1) {
            rk -= seed * 3;
            rk -= parseInt(es[4]);
            ct_d = 1;
        }
        rn = es[2].search(pat);
        if (rn != -1) {
            rk -= seed;
            rk -= parseInt(es[4]);
        }
        if (rk < 1000) {
            es_c = '';
            ci_e = es[2].split(' ');
            if (ci_e.length < ct_l) {
                es_c = es[2];
            } else {
                for (i = 0; i < ct_l; i++) {
                    es_c += ci_e[i] + ' ';
                }
            }
            es_c = es_c.replace(/^\s*|\s*$/g, '');
            if (es_c.charAt(es_c.length - 1) == '.' || es_c.charAt(es_c.length - 1) == ',') es_c = es_c.substr(0, es_c.length - 1);
            es_c += ' ...';

            if (ct == 1 && ct_d == 0) {
                ct_f = true;
                rn = es[2].search(pat);
                if (rn > c_s) {
                    t_1 = es[2].substr(rn - (c_s - 1));
                    rn = t_1.indexOf('. ');
                    if (rn != -1 && rn < (c_s / 2)) {
                        t_1 = t_1.substr(rn + 1);
                        t_2 = t_1.split(' ');
                        if (t_2.length > ct_l) {
                            es_c = '';
                            for (i = 1; i < ct_l + 1; i++) {
                                es_c += ' ' + t_2[i];
                            }
                            if (es_c.charAt(es_c.length - 1) == '.' || es_c.charAt(es_c.length - 1) == ',') es_c = es_c.substr(0, es_c.length - 1);
                            es_c += ' ...';
                            ct_f = false;
                        }
                    }
                }
                if (ct_f) {
                    rn = es[2].search(pat);
                    t_1 = es[2].substr(rn - (c_s / 5));
                    rn = t_1.indexOf(' ');
                    if (rn != -1) {
                        t_1 = t_1.substr(rn + 1);
                        t_2 = t_1.split(' ');
                        es_c = '';
                        if (t_2.length > ct_l) {
                            for (i = 1; i < ct_l + 1; i++) {
                                es_c += ' ' + t_2[i];
                            }
                        } else {
                            for (i = 1; i < t_2.length; i++) {
                                es_c += ' ' + t_2[i];
                            }
                        }
                        if (es_c.charAt(es_c.length - 1) == '.' || es_c.charAt(es_c.length - 1) == ',') es_c = es_c.substr(0, es_c.length - 1);
                        es_c += ' ...';
                    }
                }
            }

            tr[a] = rk + '^' + es[0] + '^' + es[1] + '^' + es_c + '^' + es[2] + '^' + es[3] + '^' + es[4];
            a++;
        }
    }
    tr.sort();
    co = a;
}

if (v_d) co = 0;

function tip_query() {
    if (od != 'undefined' && od != null) document.forms.tipue.d.value = od;
}

function tip_header() { // this writes the line with the search word
    if (co > 0) {
        ne = nr + tn;
        if (ne > co) ne = co;
        document.write(tl_12, ' ', tn + 1, ' ', tl_5, ' ', ne, ' ', tl_6, ' ', co, ' ', tl_7, ' ');
        if (header_links == 1) {
            if (t_m == 0) {
                hd = hd.replace(/\"/gi, '');
                wt_h = hd.split(' ');
                for (i = 0; i < wt_h.length; i++) {
                    if (wt_h[i].toLowerCase() != 'or' && wt_h[i].toLowerCase() != 'and' && wt_h[i].toLowerCase() != 'not' && wt_h[i] != '+' && wt_h[i] != '-') {
                        if (wt_h[i].charAt(0) == '+' || wt_h[i].charAt(0) == '-' || wt_h[i].charAt(0) == '~') {
                            document.write(wt_h[i].charAt(0));
                            wt_h[i] = wt_h[i].slice(1, wt_h[i].length);
                        }
                        document.write('<a href="', r_l, '?d=', wt_h[i], '">', wt_h[i], '</a><p> ');
                    } else document.write(wt_h[i] + ' ');
                }
            } else document.write(hd);
        } else document.write(hd);
    }
}

function tip_out() {
    if (cw_l.length > 0) {
        document.write(tl_9, ' ', cw_l, '<p>');

    }
    if (sp_l.length > 0) {
        sp_e = encodeURIComponent(sp_l);
        document.write(tl_8, ' <a href="', r_l, '?d=', sp_e, '">', sp_l, '</a><p>');
    }
    if (co == 0) {
        if (v_d) {
            document.write(tl_10);
        } else {
            document.write(tl_1);
            if (b_q == 1) document.write('<b>', od, '</b>');
            else document.write(od);
            document.write(tl_2);
        }
        return;
    }
    if (tn + nr > co) nd = co;
    else nd = tn + nr;
    for (a = tn; a < nd; a++) {
        os = tr[a].split('^');
        if (b_q == 1 && t_m == 0) {
            for (i = 0; i < wt.length; i++) {
                pat = new RegExp("\\~", 'i');
                rn = wt[i].search(pat);
                if (rn != -1) {
                    tw = wt[i].split('~');
                    for (c = 0; c < tw.length; c++) {
                        lw = tw[c].length;
                        pat = new RegExp(tw[c], 'i');
                        rn = os[3].search(pat);
                        if (rn != -1) {
                            o1 = os[3].slice(0, rn);
                            o2 = os[3].slice(rn, rn + lw);
                            o3 = os[3].slice(rn + lw);
                            os[3] = o1 + '<b>' + o2 + '</b>' + o3;
                        }
                    }
                } else {
                    lw = wt[i].length;
                    pat = new RegExp(wt[i], 'i');
                    rn = os[3].search(pat);
                    if (rn != -1) {
                        o1 = os[3].slice(0, rn);
                        o2 = os[3].slice(rn, rn + lw);
                        o3 = os[3].slice(rn + lw);
                        os[3] = o1 + '<b>' + o2 + '</b>' + o3;
                    }
                }
            }
        }

        if (b_q == 1 && t_m == 1) {
            lw = dit.length;
            tw = new RegExp(dit, 'i');
            rn = os[3].search(tw);
            if (rn != -1) {
                o1 = os[3].slice(0, rn);
                o2 = os[3].slice(rn, rn + lw);
                o3 = os[3].slice(rn + lw);
                os[3] = o1 + '<b>' + o2 + '</b>' + o3;
            }
        }

        if (include_num == 1) document.write(a + 1, '. ');
        if (os[5] == '0') t_b = '';
        if (os[5] == '1') t_b = 'target="_blank"';
        if (os[5] != '0' && os[5] != '1') t_b = 'target="' + os[5] + '"';
        if (b_t == 0) document.write('<a href="', os[2], '" ', t_b, '>', os[1], '</a>');
        if (b_t == 1) {
            lw = dit.length;
            tw = new RegExp(dit, 'i');
            rn = os[1].search(tw);
            if (rn != -1) {
                o1 = os[1].slice(0, rn);
                o2 = os[1].slice(rn, rn + lw);
                o3 = os[1].slice(rn + lw);
                os[1] = o1 + '<b>' + o2 + '</b>' + o3;
            }
            document.write('<a href="', os[2], '" ', t_b, '>', os[1], '</a>');
        }
        if (b_t == 2) document.write('<a href="', os[2], '" ', t_b, '><b>', os[1], '</b></a>');

        if (os[3].length > 1) document.write('<br>', os[3]);
        if (include_url == 1) document.write('<br><a href="', os[2], '" ', t_b, 'target="_blank">', os[2], '</a>');
        document.write('<p>');
    }
}

function tip_footer() {
    if (co > nr) {
        od = encodeURIComponent(od);
        var np = Math.ceil(co / nr);
        nc = co - (tn + nr);
        if (tn > 0) var na = Math.ceil(tn / nr) + 1;
        else var na = 1;
        if (tn > 1) document.write('<a href="', r_l, '?d=', od, '&n=', tn - nr, '">', tl_3, '</a> &nbsp;');
        if (np < 10) {
            for (var i = 0; i < np; i++) {
                var nb = nr * i;
                if (nb == tn) {
                    if (b_f == 1) document.write('<b>', i + 1, '</b> &nbsp;');
                    else document.write(i + 1, ' &nbsp;');
                } else document.write('<a href="', r_l, '?d=', od, '&n=', nb, '">', i + 1, '</a> &nbsp;');
            }
        }
        if (np > 9) {
            if (na < 8) {
                for (var i = 0; i < 9; i++) {
                    var nb = nr * i;
                    if (nb == tn) {
                        if (b_f == 1) document.write('<b>', i + 1, '</b> &nbsp;');
                        else document.write(i + 1, ' &nbsp;');
                    } else document.write('<a href="', r_l, '?d=', od, '&n=', nb, '">', i + 1, '</a> &nbsp;');
                }
            } else {
                var ng = na - 5;
                if (np > ng + 9) var nf = ng + 9;
                else nf = np;
                for (var i = ng; i < nf; i++) {
                    var nb = nr * i;
                    if (nb == tn) {
                        if (b_f == 1) document.write('<b>', i + 1, '</b> &nbsp;');
                        else document.write(i + 1, ' &nbsp;');
                    } else document.write('<a href="', r_l, '?d=', od, '&n=', nb, '">', i + 1, '</a> &nbsp;');
                }
            }
        }
        if (nc > 0) document.write('<a href="', r_l, '?d=', od, '&n=', tn + nr, '">', tl_4, '</a>');
    }
    }

function tipqueryTask() {
        get_xml();
        tip_header();
        tip_query();
        tip_out();
        tip_footer();
        setFocus();
    }
    document.getElementById('myform').addEventListener('submit', tipqueryTask());{
     // event.preventDefault(); Prevent default behaviour (submitting form)
    var outputElement = document.getElementById('outputHeader');
    outputElement.innerHTML = '<script language="JavaScript" type="text/javascript" >tip_out()></script>';
    var outputElement = document.getElementById('outputQuery');
    outputElement.innerHTML = '<script language="JavaScript" type="text/javascript">tip_query()></script>';
    var outputElement = document.getElementById('outputOut');
    outputElement.innerHTML = '<script language="JavaScript" type="text/javascript">tip_out()</script>';
    var outputElement = document.getElementById('outputFooter');
    outputElement.innerHTML = '<script language="JavaScript" type="text/javascript">tip_footer()></script>';
} false; 
```

进一步研究，我认为这可能与必须将 XML 文件列入白名单和对 js 文件进行修改有关，但如果是这样，那对我来说太复杂了。我自己不会写javascript，我只是一个业余爱好者，只能调整其他人的脚本以满足我的需要。

如果您需要任何其他信息，请告诉我。非常感谢

索引.html

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0020)http://www.tipue.com -->

<html>
<head>
<title>Address % Telephone Search</title>
</head>
<body>
<form id="myform" method="get" name="tipue" action="results.html">
<table cellpadding=0 cellspacing=0 class="form_table"><tr>
<td class="form_td_left">
<input type="text" name="d" id="searchBox" class="field">
</td>
<td class="form_td_right">
<input type="submit" value="Go" class="button">
<br />
</td></tr></table>
</form>
<!-- End of form section -->
<p>
Enter Tipue or other search terms in the example above.
<p>
This example uses an <a href="http://www.tipue.com/products/tipueJS/started/xml.cgi">XML</a> data file. For more information see <a href="http://www.tipue.com/products/tipueJS/started/">Getting Started</a>.
<br>
</body>
</html> 
```

你还需要

results.html
（下面的修改代码）

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0020)http://www.tipue.com -->
<html>
<head>
<title>Tipue JS XML Example Search Results</title>
</head>
<body>
<form id="myform" method="get" name="tipue" action="results.html">
<table cellpadding=0 cellspacing=0 class="form_table"><tr>
<td class="form_td_left">
<input type="text" name="d" class="field" id="searchBox">
</td>
<td class="form_td_right">
<input type="submit" value="Go" class="button">
</td></tr></table>
</form>
<!-- End of form section -->
<br>
<div id="outputQuery"></div>
<div id="outputHeader"></div>
<div id="outputOut"></div>
<div id="outputFooter"></div>
<script language="JavaScript" type="text/javascript" src="combinedTipue.js"></script> 
<br>
<hr>
</body>
</html> 
```

如果您将清单更改为版本：1，您会看到它可以正常工作，但不是版本：2。感谢您对此的帮助，非常感谢

~~添加 popup.js~~删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T06:19:49.397

我已经可以使用 popup.js 脚下的这段代码了：

```
function tipqueryTask() {get_xml(); tip_header(); tip_query(); tip_out(); tip_footer();}
function clickHandler() {
  setTimeout(tipqueryTask, 5000);}
  var alreadyrunflag=0 //flag to indicate whether target function has already been run
if (document.addEventListener)
  document.addEventListener("DOMContentLoaded", function(){alreadyrunflag=1; clickHandler()}, false)
else if (document.all && !window.opera){
  document.write('<script type="text/javascript" id="contentloadtag" defer="defer" src="javascript:void(0)"><\/script>')
  var contentloadtag=document.getElementById("contentloadtag")
  contentloadtag.onreadystatechange=function(){
    if (this.readyState=="complete"){
      alreadyrunflag=1
      clickHandler()}}} 
```

注意 setTimeout 是 5 秒。似乎正在发生的事情是当我单击扩展时，index.html 打开并且我有 5 秒的时间输入搜索查询（否则它会显示“空白搜索”（这是属性/变量之一？？在tipue_set .js)) 在我按 Enter 键后，会出现 results.html 页面，但其中没有结果，然后一旦 5 秒结束，就会出现另一个页面，上面有实际结果。SetTimeout 正在从 popup.js 运行点击处理，但我无法弄清楚如何让它从结果页面运行，该结果页面应该具有用于​​tipqueryTask 中所有功能的内联 js。我尝试将它们放在单独的脚本中，但没有奏效。有任何想法吗？如果没有，我将不得不像这样离开它。这并不理想，但总比没有好。

# linux - Linux 上的 Eclipse for Java EE - 看不到 Java EE 项目？

> ID：11808146
> 
> 赞同：0
> 
> 时间：2012-08-04T11:07:14.270
> 
> 标签：linux, eclipse, ubuntu

我刚刚在 Ubuntu 上安装了 eclipse indigo。之后，我去安装新软件 > WEB、XML、Java EE 等。

当我转到 Eclipse 插件时，我看到它们已安装。

但是当我尝试创建一个新的例如 Web 项目时，我看不到它！唯一需要选择的一点是“新建 > 常规 > 项目”。没有其他的！

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:52:45.260

即使这不能回答 OP 的问题，我还是建议从[**这里**](http://www.eclipse.org/downloads/?osType=linux)安装最新的 Java EE 版本：

`http://www.eclipse.org/downloads/?osType=linux`

回到你的问题。也许您可以尝试使用该选项重新启动 eclipse，`-clean`以确保它不是有问题的过时的工作区元数据。如果这不起作用，我会重申最初的建议，即下载 Java EE 版本以节省时间。

（请不要被冒犯，但为了排除明显的情况，您必须在安装所有插件后重新启动 Eclipse ？）

# java - 如何用图像替换文本中的表情符号，例如:)？

> ID：11808147
> 
> 赞同：0
> 
> 时间：2012-08-04T11:07:27.673
> 
> 标签：java, jsf-2, primefaces

我想在我的 JSF/PrimeFaces Web 应用程序中将表情符号显示为图像。为此，我需要`:)`用图像替换文本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:37:37.433

JSF 不为此提供任何工具。

在最简单的情况下，您可以只使用[类](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)[的可用方法对`String`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)实例执行操作`String`，例如[`replace()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29).

```
text = text.replace(":)", "<img src=\"smile.png\" />"); 
```

*（您可能希望应用更细粒度的匹配，可能使用正则表达式或词法分析器，以防止诸如*“......分号;（或冒号，:)......”之类的合法字符序列*被错误地替换）*

然后，要在 JSF 中显示带有 HTML 图像的被操纵`String`实例，您需要使用设置为`<h:outputText>`的`escape`属性`false`来禁用用于防止 XSS 攻击漏洞的内置 HTML 转义。

```
<h:outputText value="#{bean.text}" escape="false" /> 
```

这样，`<img>`由于转义，HTML 元素将由网络​​浏览器逐字解释，而不是向最终用户显示纯文本。

但是，正如您可能已经猜到的那样，如果您事先不清理最终用户的输入，这当然会打开可能的[XSS 攻击漏洞。](http://en.wikipedia.org/wiki/Cross-site_scripting)最终用户将能够通过输入来做坏事，例如`<script>stealCookies()</script>`在文本中添加一个也将由网络浏览器逐字解释的内容。要事先清理最终用户的输入，您可以使用[Jsoup](http://jsoup.org)等，它为此提供了一种[`clean()`](http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer)方法：

```
text = Jsoup.clean(text, Whitelist.basic()); 
```

*（在替换表情符号之前执行此操作，否则也可能会剥离这些`<img>`标签！）*

# matlab - 如何在 MATLAB 中使用箱线图函数显示均值而不是中值

> ID：11808149
> 
> 赞同：2
> 
> 时间：2012-08-04T11:07:43.230
> 
> 标签：matlab, boxplot

是否可以在 MATLAB 中使用箱线图函数显示平均值而不是中位数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:58:49.623

将平均值绘制为 上**的**标记`boxplot`：

```
boxplot
...
plot(mean,'d'),'-mo',
               'LineWidth',15,
               'MarkerEdgeColor','k',
               'MarkerSize',20; 
```

# java - 从 Android 服务调用 AlertDialog.Builder

> ID：11808151
> 
> 赞同：0
> 
> 时间：2012-08-04T11:07:49.737
> 
> 标签：java, android, adt

我想显示来自 a 的警报`service`，我不在乎当前是什么活动，只显示警报。

但是建设者需要像这样的建设

```
AlertDialog.Builder builder = new AlertDialog.Builder(this); 
```

但是我如何知道当前的活动并传递给`AlertDialog.Builder`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:10:52.250

> 但是我如何知道当前活动并传递给 AlertDialog.Builder？

您不需要知道当前的活动。只需使用`android:theme="@android:style/Theme.Dialog"`服务中的主题开始一项活动。

# javascript - 使用Jquery将Ajax jsonp数据发送到数组

> ID：11808152
> 
> 赞同：-1
> 
> 时间：2012-08-04T11:08:01.483
> 
> 标签：javascript, jquery, ajax, jsonp

我创建了一个检索数据的 jsonp 请求。唯一的问题是我似乎无法在循环外的数组中获取数据:(

```
var lookbook_data = new Array();
$.ajax({
  url: "http://lookbook.king-quinna.nl/api/get_recent_posts/?callback=1&custom_fields=image1",
dataType: "jsonp",
success: function(data) {
for(var i = 0; i<4; i++) {
    lookbook_data[i] = data.posts[i].custom_fields.image1[0];      
}
}
});
console.log(lookbook_data); 
```

因此，当我在 console.log 中排列它们时，它会以应有的方式输出数据。但是在功能之外它没有。但是我确实在外面清除了变量，所以我真的不明白为什么:(

顺便说一句，抱歉，混乱的代码块似乎无法用 4 个空格来正确处理：(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T11:13:52.107

该 ajax 调用是异步的，因此您可以在代码完成之前立即到达代码的最后一行。

你可以同步（不推荐）

```
async = 'false' 
```

在ajax调用中

或做这样的事情

```
$.ajax({
    url: "http://lookbook.king-quinna.nl/api/get_recent_posts/?callback=1&custom_fields=image1",
    dataType: "jsonp",
    success: function(data) {
        for(var i = 0; i<4; i++) {
            lookbook_data[i] = data.posts[i].custom_fields.image1[0];      
        }
        continueHere()
     }
 });

 function continueHere() {
      // rest of the code that handles your ajax call
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T11:25:20.697

```
var lookbook_data = new Array(),
    XHR = $.ajax({
            url: "http://lookbook.king-quinna.nl/api/get_recent_posts/?callback=1&custom_fields=image1",
            dataType: "jsonp"
          });
//anywhere else in your script you can call :
XHR.done(function() {
    for(var i = 0; i<4; i++) {
        lookbook_data[i] = data.posts[i].custom_fields.image1[0];      
    }
    console.log(lookbook_data); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T11:32:50.290

use this inside your for loop `console.log(lookbook_data[i]);` inside the success function

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T11:27:03.720

`console.log(lookbook_data);`在成功函数内部使用

# jquery - 使用 jQuery 验证单选按钮和复选框

> ID：11808159
> 
> 赞同：0
> 
> 时间：2012-08-04T11:09:45.520
> 
> 标签：jquery, validation

所以我有这个表单，通过 jQuery ajax 发送，但我想验证这些字段。我知道如何验证正常的输入字段，但是单选按钮和复选框会造成麻烦。这是我验证表单并发送它并显示结果的代码。

```
$(function() {
    $("#submit").click(function() {
var kysymys1 = $.trim($("input.kysymys1").val());
      if (kysymys1 == "") {
          alert('Täytä kaikki kentät.');
          return false;
      }
var kysymys2 = $.trim($("input.kysymys2").val());
      if (kysymys2 == "") {
          alert('Täytä kaikki kentät.');
          return false;
      }
var kysymys3 = $.trim($("input.kysymys3").val());
      if (kysymys3 == "") {
          alert('Täytä kaikki kentät.');
          return false;
      }

      var dataString = $('#service-test').serialize();
      //alert (dataString);return false;
     $.ajax({
    type: "POST",
    url: "../quiz.php",
    data: dataString,
    dataType: "text",
    error: function(){ alert ('Nyt jotakin meni kyllä pahemman kerran pieleen. Yritä uudelleen?');
 },
    success: function(data) {
 $("#result").html(data);
$('#service-test').fadeOut('slow');
   }

  });
  return false;

    });
  }); 
```

和表格本身：

```
<div style="border:1px solid grey;">
<div id="result" style="padding:2%;"></div>
<form id="service-test" action="#" method="../quiz.php" style="padding:2%;">
Muuttuuko sivujen sisältö usein?
<input type="radio" name="muuttuminen" value="Kylla" class="kysymys1" /> Kyllä
<input type="radio" name="muuttuminen" value="Ei" class="kysymys1" />Ei
Mitä näistä voisit haluta sivuillesi?
<input type="checkbox" name="possiblecontent" value="Kuvagallerian"  class="kysymys2" />Kuvagallerian
<input type="checkbox" name="possiblecontent" value="Pieni verkkokauppa"  class="kysymys2" />Pieni verkkokauppa
<input type="checkbox" name="possiblecontent" value="Isompi verkkokauppa"  class="kysymys2" />Isompi verkkokauppa
<input type="checkbox" name="possiblecontent" value="Jotain muuta"  class="kysymys2" />Jotain muuta
Millaisen ulkoasun haluaisit?
<input type="radio" name="ulkoasu" value="Massasta erottuvan, uniikin ulkoasun"  class="kysymys4" /> Massasta erottuvan, uniikin ulkoasun
<input type="radio" name="ulkoasu" value="Jotain muuta"  class="kysymys3" /> Jotain muuta
<input id="submit" type="submit" /></form>
</div> 
```

但是，如果用户不选择，验证部分不会做任何事情。

这里也是一个 jsfidde：http: [//jsfiddle.net/ducVP/4/](http://jsfiddle.net/ducVP/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:18:14.600

而不是检查值，您想检查复选框/单选按钮是否已被选中..

所以试试这个

```
if ($('input.kysymys1:checked').val() == 'false') {
          alert('Täytä kaikki kentät.');
          return false;
} 
```

这将检查复选框是否被选中，如果没有，则发出警报。

**编辑** 为什么不将其中一个单选按钮作为默认选项进行检查？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:21:46.877

更改单选按钮验证

```
var kysymys1 = $.trim($("input.kysymys1").val());
          if (kysymys1 == "") {
              alert('Täytä kaikki kentät.');
              return false;
          } 
```

到

```
if (!$(".kysymys1").is(':checked')) {
          alert('Täytä kaikki kentät.');
          return false;
      } 
```

[http://jsfiddle.net/ducVP/13/](http://jsfiddle.net/ducVP/13/)

# c++ - 错误：“。”之前的预期不合格 ID 标记 - 标准：: 向量

> ID：11808162
> 
> 赞同：2
> 
> 时间：2012-08-04T11:10:15.977
> 
> 标签：c++, vector, std

代码：

```
#include <vector>
#include <iostream>

typedef struct
{
    std :: string latitude;
    std :: string longitude;
} coordinate;

std :: vector <coordinate> previousPoints;

int main ()
{
    coordinate.latitude  = latitude;
    coordinate.longitude = longitude;
    previousPoints.push_back (coordinate);

    return 0;
} 
```

输出：

```
anisha@linux-y3pi:~> g++ -Wall demo.cpp
demo.cpp: In function ‘int main()’:
demo.cpp:14:12: error: expected unqualified-id before ‘.’ token
demo.cpp:15:12: error: expected unqualified-id before ‘.’ token
demo.cpp:16:38: error: expected primary-expression before ‘)’ token 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T11:14:04.213

```
typedef struct
{
    std :: string latitude;
    std :: string longitude;
} coordinate; 
```

`coordinate`是匿名结构上的 typedef，而不是对象。你应该在你的函数中创建对象`coordinate`，或者不使用`typedef`，即

```
struct coord
{
    std :: string latitude;
    std :: string longitude;
} coordinate; 
```

现在，`coordinate`是对象。还有一个问题，为什么要在`std`后面输入空格`::`？这是合法的，但很奇怪。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T11:14:56.767

您需要创建一个要添加到向量中的实际变量：

```
int main ()
{
    coordinate c;
    c.latitude  = latitude;
    c.longitude = longitude;
    previousPoints.push_back (c); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T11:16:59.173

```
coordinate.latitude  = latitude; 
```

您需要一个对象来访问它的成员，但`coordinate`只需命名一个结构。同样在右侧，您没有价值...您需要类似的东西：

```
coordinate c;
c.latitude  = "120";
c.longitude = "10";
previousPoints.push_back(c); 
```

# iphone - 如何阅读 webview 中资源文件夹子文件夹中的 PDF 文件？

> ID：11808163
> 
> 赞同：2
> 
> 时间：2012-08-04T11:10:25.627
> 
> 标签：iphone, ios, xcode, pdf, webview

![在此处输入图像描述](../Images/a7a03625abb5366c80b0f9bad725c33a.png)

我在我的应用程序的 Resourse 文件夹的子文件夹中有一些 PDF 格式文档。我尝试以这种方式阅读这些文档。这是我的代码。

```
 NSString *path = [[NSBundle mainBundle] pathForResource:chapter ofType:@"pdf"];
   NSURL *targetURL = [NSURL fileURLWithPath:path];
   NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
   [[webView scrollView] setContentOffset:CGPointMake(0,500) animated:YES];
   [webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"window.scrollTo(0.0, 50.0)"]];
   [webView loadRequest:request];
   [self.view addSubview:webView];
   [webView release]; 
```

在此代码中“路径”返回零值，当我签入控制台时。但是当我检查存储我想要的 pdf 文档名称的字符串“章节”时，它总是有一个 pdf 文档名称。当我的程序崩溃时在控制台中它显示了这样的东西。

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 
'-[UIWebView scrollView]: unrecognized selector sent to instance 0x6587d20' 
```

任何帮助都会被给予。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T11:31:58.123

你在你的项目中检查你的 pdf 文件吗？

![在此处输入图像描述](../Images/ac78c1a20086576f794e8f576e571fb4.png)

我测试了以下代码。没问题。

请检查您项目中的 chapter.pdf 文件。点是相对路径。

**必须区分大小写。“章节”/“章节”不等于字符串。**

```
NSLog(@"path:%@",[[NSBundle mainBundle] pathForResource:@"chapter" ofType:@"pdf"]);

console:
    /var/mobile/Applications/72AFA069-D83E-469A-A687-AEAFDB0B4D97/TableViewTest.app/chapter.pdf 
```

* * *

```
NSLog(@"path:%@",[[NSBundle mainBundle] pathForResource:@"Chapter" ofType:@"pdf"]);

console:
    (null) 
```

* * *

```
self.myWebView = [[[UIWebView alloc] initWithFrame:webFrame] autorelease];
self.myWebView.backgroundColor = [UIColor whiteColor];
self.myWebView.scalesPageToFit = YES;
self.myWebView.delegate = self;
[self.view addSubview:self.myWebView];
[self.myWebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"chapter" ofType:@"pdf"]]]]; 
```

![在此处输入图像描述](../Images/0e9daede2f591025617767aa5c07eb55.png)

* * *

在您的项目文件夹中，名称将在实际的 iPhone 包中消失。您创建了一个名为 Resource-Common 的文件夹，但最终在 NSBundle 中消失了。

![在此处输入图像描述](../Images/9a90b304be4a6344a718a7fb902f11f1.png)

见下图。两者都是集成的。项目中的文件夹名称只是 xcode 中的可见文件夹。

![在此处输入图像描述](../Images/207fd37a8cf26264ed0ad4f47d61bccb.png)

如果你想要 NSBundle 中的所有 pdf 文件列表。尝试以下代码。

```
NSArray *pdfCollection = [[NSBundle mainBundle] pathsForResourcesOfType:@"pdf" inDirectory:nil]; 
```

![在此处输入图像描述](../Images/769ba85031569f2c7c29a7a05f1fdbfc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:19:51.880

[根据 Apple 的文档](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)，UIWebView 的 scrollView 是只读属性：与 Web 视图关联的滚动视图。（只读）。但是你把它当作一个 UIScrollView 来对待，但它不是。那是错误信息。

# django - Django：未访问表单数据以在会话中存储数据

> ID：11808167
> 
> 赞同：1
> 
> 时间：2012-08-04T11:11:00.120
> 
> 标签：django, django-forms, django-templates, django-views, django-sessions

**视图.py**

```
from textize.models import Textizer
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.core.context_processors import csrf

def index(request):
    if request.method == 'POST':
        form = Textizer(request.POST)
        print "debug 0"  # <---It's not reaching this point when I submit the data via the form
        if form.is_valid():  #check to see if the input is valid
            print "debug 1"
            request.session['text'] = form.cleaned_data['to_textize']  #set the session key:value pair
            return HttpResponseRedirect('/results') #redirect to the results page

    else:
        form = Textizer()
        print "debug 2" # reaches here

    c = {'form': form}
    c.update(csrf(request))

    return render_to_response('index.html', c)

def results(request):
    text = request.session.get("text", "dummy")
    c = {'text' : text}
    return render_to_response('results.html', c) 
```

**索引.html**

```
<form action="/results" method="POST"> {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit" />
</form> 
```

**结果.html**

```
<b>Input text: </b>{{ text }} 
```

我正在尝试将数据从“索引”页面传递到“结果”页面。在这种情况下，我想在结果页面上显示输入和提交的字符串。

我的表格有什么问题？

另外，我是否正确形成了会话键：值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:52:24.737

```
from textize.models import Textizer
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.core.context_processors import csrf

def index(request):

    form = Textizer(request.POST or None)

    if request.method == 'POST':
        print "debug 0"
        if form.is_valid():
            print "debug 1"
            request.session['text'] = form.cleaned_data['to_textize']

    c = {'form': form, 'text':request.session.get("text", "")}
    c.update(csrf(request))

    return render_to_response('index.html', c) 
```

然后是模板 index.html

```
<form action="" method="POST"> {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit" />
</form> 
result: {{ text }} 
```

足以让这一切顺利进行。

# android - 旋转回纵向时避免Android VideoView损坏？

> ID：11808171
> 
> 赞同：0
> 
> 时间：2012-08-04T11:11:19.060
> 
> 标签：android, android-videoview, corruption, screen-rotation

> **可能重复：**
> [旋转回纵向时避免 Android VideoView 损坏](https://stackoverflow.com/questions/6524659/avoid-android-videoview-corruption-when-rotating-back-to-portrait)

我设法编写了一个有限的视频播放器，能够从互联网上查看 .3gp 文件。视频将以全屏居中显示，保持视频纵横比。此外，旋转不会中断视频，它可以毫无问题地继续播放。

一切似乎都很好，但是...在我的 HTC Legend 上，当您旋转回纵向时，视频已损坏，并且不是全屏显示，而是以其原始像素大小显示。但是再次旋转到风景作品并完美显示。任何想法为什么？不幸的是，我没有更多的硬件来测试它，而且我已经没有想法可以测试了。

您可以从[https://github.com/gradha/Android-video-stream-rotation](https://github.com/gradha/Android-video-stream-rotation)获取完整的示例源代码。这是我打开应用程序的屏幕截图，旋转到横向，触摸屏幕以显示视频控件，然后旋转回纵向以查看损坏情况。

![图1](../Images/8fddc52d6ba8a1216a3a7bb5dc560488.png) ![图2](../Images/c3707ee8f8db75888dd4afe962ce1433.png) ![图3](../Images/ff11c69a4743d0aba3bb8d852a2499d9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:02:49.213

```
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN, WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

这个来源救了我

# r - R 自组织子集

> ID：11808172
> 
> 赞同：0
> 
> 时间：2012-08-04T11:11:23.687
> 
> 标签：r

我有一个有一百行的矩阵。有没有办法获得与第一行最相似的十行的子集。

```
res2 <- matrix(rexp(200, rate=.1), ncol=10, nrow=100)

set1 <- subset(res2, res2 >condition1)
set1[with(set1, order(condition)), ]
set2 <- head(set1,10) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T16:56:51.853

也许：

生成数据：

```
set.seed(101)
res2 <- matrix(rexp(200, rate=.1), ncol=10, nrow=100) 
```

计算距离矩阵。这是非常低效的，因为我们正在计算*所有*成对的距离，但它的编码效率很高且易于使用，并且您有很多距离度量选择（请参阅`?dist`、查找`method`）。对于这个尺寸问题，它非常快。

```
dd <- dist(res2)
rr <- rank(as.matrix(dd)[1,]) 
```

您会注意到第一行的第一个元素（即第 1 行与其自身之间的距离）的等级为 1，其值 ( `as.matrix(dd)[1,1]`) 为零。所以我们现在需要的是接下来十个最小距离的行......

```
res2[rr>1 & rr<=11,] 
```

# javascript - PNG修复新元素

> ID：11808173
> 
> 赞同：0
> 
> 时间：2012-08-04T11:12:04.550
> 
> 标签：javascript, jquery, png, iepngfix

我正在[将此脚本](http://www.dillerdesign.com/experiment/DD_belatedPNG/)用于 IE6 的 PNG 修复。

我注意到，当我克隆一个元素时，克隆的 PNG 是未修复的，即使它们附加了正确的类，我无法重新应用修复。我正在使用 jquery 克隆一个元素，并且出于广泛的原因必须使用 clone(false,false) ...有没有办法在附加克隆后将修复应用于新元素？再次调用 DD_belatedPNG.fix(".pngfix") 似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T13:51:20.443

与其使用 png 修复，不如使用 IE 支持的透明 PNG（带有 alpha 的 8 位调色板）。[如果您使用的是 Mac， ImageAlpha](http://pngmini.com/)将为您执行此操作，否则您可以使用[pngquant](https://github.com/pornel/improved-pngquant#readme)（ImageAlpha 的基础）为您执行此操作。

Javascript/IE Filter 类型的东西不需要解决这个问题，应该避免。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:02:12.257

此解决方案适用于 img 元素

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style>
    body {
        background:#0000FF;
    }
</style>
<script type="text/javascript" language="javascript" src="jquery.min.js"></script>
<script type="text/javascript" language="javascript" src="DD_belatedPNG_0.0.8a.js"></script>
<script>
    $(document).ready(function () {
        function imageClickHandler () {
            var $newA = $("<a></a>")
            var $newImg = $(this).find('img').clone(false,false);
            $newImg.attr("style","");
            $newA.append($newImg);

            $newA.click(imageClickHandler);
            $(this).parent().append($newA);
            DD_belatedPNG.fix('img');
        }

        DD_belatedPNG.fix('img');
        $('a').click(imageClickHandler);

    });
</script>
</head>
<body>
<a><img src="image.png" /></a>
</body>
</html> 
```

**编辑** 此解决方案适用于 bg 元素

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style>
        body {
            background:#0000FF;
        }

        a {
            display:inline-block;
            //display:inline;
            zoom:1;
            width:512px;
            height:512px;
            background:url(image.png) no-repeat center center;
            text-decoration:none;
            outline:none;
        }
    </style>
    <script type="text/javascript" language="javascript" src="jquery.min.js"></script>
    <script type="text/javascript" language="javascript" src="DD_belatedPNG_0.0.8a.js"></script>
    <script>
        $(document).ready(function () {
            function imageClickHandler () {
                var $newA = $(this).clone(false,false);
                $newA.removeAttr("style isImg vmlInitiated vmlBg");
                $newA.click(imageClickHandler);
                $(this).parent().append($newA);
                DD_belatedPNG.fix('a');
            }

            DD_belatedPNG.fix('a');
            $('a').click(imageClickHandler);

        });
    </script>
</head>
<body>
    <a></a>
</body>
</html> 
```

# jquery - 如何在 IE 中将大小调整器添加到文本区域？

> ID：11808176
> 
> 赞同：9
> 
> 时间：2012-08-04T11:12:27.097
> 
> 标签：jquery, internet-explorer, resize, textarea, resizable

如何像在 Chrome 和 Firefox 中一样在 IE 中向 textarea 添加调整大小？

`jQuery.resizable()`不会为我工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-05-05T19:33:07.880

Internet Explorer（和 Microsoft Edge，截至 2016 年 5 月 5 日）不支持 textarea 元素的本机抓取器/调整大小。虽然这些最终*可能*会在未来（在 Microsoft Edge 中）得到支持，但您现在拥有的最佳选择是 polyfill 功能。

网上有很多选项可以做到这一点，但如果你使用 jQuery 和 jQuery UI，你可以使用[Resizable](http://api.jqueryui.com/resizable/)小部件：

```
$("textarea").resizable({
    handles: "se" // place handle only in 'south-east' of textarea
}); 
```

默认情况下，这会将处理程序放在 textarea 下方。我不喜欢这样：

```
.ui-resizable-handle {
    transform: translateY(-100%);
} 
```

你可以在这里看到最终结果：http: [//jsbin.com/rumokazepo/edit ?html,css,js,output](http://jsbin.com/rumokazepo/edit?html,css,js,output)

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2012-08-04T11:24:19.730

这不能通过定义`width`和`height`像这样在CSS中解决：

```
.resize {
     width: 100px;
     height: 100px;
 }

 <textarea class="resize"></textarea> 
```

# java - 算术运算的溢出和范围检查

> ID：11808177
> 
> 赞同：9
> 
> 时间：2012-08-04T11:12:33.797
> 
> 标签：java, math, range

在实际应用之前，我们如何检查算术运算是否会超出数据类型的上限。

说java中的上界简称为32767，我乘以328 * 100，我实际上无法进行比较，`Short.MAX_VALUE`因为乘法后答案已经溢出并且答案将是-32736，这肯定小于`Short.MAX_VALUE`

再举一个例子，说我是`int`在 for 循环中计算 17^10（17 的 10 次方）的值。我怎么知道我的答案在哪个阶段溢出。

这`Short`和`int`事情只是一个例子。以更大的洞察力来考虑这个问题，对于所有数据类型究竟可以做什么。

我试过谷歌搜索，但没有找到有助于理解这个概念的好链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T11:22:40.183

溢出检查有 3 种可能的方法：

**使用更大的类型并向下转换：**将输入转换为下一个更大的原始整数类型并以更大的大小执行算术。检查每个中间结果是否有原始较小类型的溢出；如果范围检查失败，则抛出 ArithmeticException。

**预检查输入：**检查每个算术运算符的输入以确保不会发生溢出。如果执行操作会溢出，则再次抛出 ArithmeticException，否则执行操作。

例如：

```
static void preAddCheck(int left, int right) throws ArithmeticException {
   if (right > 0 ? left > Integer.MAX_VALUE - right : left < Integer.MIN_VALUE - right) {
    throw new ArithmeticException("Integer overflow");
  }
} 
```

**BigInteger：**将输入转换为 BigInteger 类型的对象，并使用 BigInteger 方法执行所有算术运算。溢出时引发 ArithmeticException。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T11:25:25.653

有计划在 Java 8 的 Math 包中包含这些方法，但我不知道目前的状态是什么。一些源代码可[在此处](http://cr.openjdk.java.net/~rriggs/6708398.1/raw_files/new/src/share/classes/java/lang/Math.java)获得。我不知道实现是如何测试的，但这可以给你一些想法。

例如，int 乘法是通过使用 long 来完成的：

```
public static int multiplyExact(int x, int y) {
    long r = (long)x * (long)y;
    if ((int)r != r) {
        throw new ArithmeticException("long overflow");
    }
    return (int)r;
} 
```

但长乘法使用更复杂的算法：

```
public static long multiplyExact(long x, long y) {
    long r = x * y;
    long ax = Math.abs(x);
    long ay = Math.abs(y);
    if (((ax | ay) >>> 31 != 0)) {
        // Some bits greater than 2^31 that might cause overflow
        // Check the result using the divide operator
        // and check for the special case of Long.MIN_VALUE * -1
       if (((y != 0) && (r / y != x)) ||
            (x == Long.MIN_VALUE && y == -1)) {
            throw new ArithmeticException("long overflow");
        }
    }
    return r;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T11:36:50.483

我会使用最大的可能类型 BigInteger/BigDecimal 进行计算。然后我会根据它的大小将值分配给适当的类型......有趣的是，有一些有用的方法......如果值不能包含在short中，shortValueExtract将抛出ArithmetricException......

```
BigDecimal result = BigDecimal.valueOf(328).multiply(
        BigDecimal.valueOf(100));
try {
    short shortResult = result.shortValueExact();
} catch (ArithmeticException e) {
    // overflow
    System.out.println("Overflow!");
}

try {
    int intResult = result.intValueExact();
} catch (ArithmeticException e) {
    // overflow
} 
```

# html - 根据条件设置 div 标签高度

> ID：11808185
> 
> 赞同：1
> 
> 时间：2012-08-04T11:13:37.550
> 
> 标签：html, css

我有 div 标签，我想这样做：如果内容 div 标签低于 100px，则将 div 标签高度设置为 100px。但如果内容高度高于 100px - 自动设置 div 标签高度，请告诉我 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:16:17.990

应用以下样式..

```
 style='min-height:100px;' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:48:53.530

叉

```
min-height: 100px; 
height:auto !important; 
height: 100px; 
```

# jquery - 如何使用 impress.js 创建非全屏演示？

> ID：11808186
> 
> 赞同：2
> 
> 时间：2012-08-04T11:13:37.193
> 
> 标签：jquery, html, animation, impress.js

如何使用 impress.js 创建不填满整个页面的演示文稿？我需要将它用作现有网页的一部分的横幅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T03:50:27.027

试试[jmpress.js](http://jmpressjs.github.io/jmpress.js/#/home) - 查看其主页上的展示和[codrops 上的本教程](http://tympanus.net/codrops/2012/04/05/slideshow-with-jmpress-js/)。他们似乎有你所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:08:00.943

这是 jmpress.js 用作横幅的一个很好的例子：http: [//tympanus.net/codrops/2012/04/05/slideshow-with-jmpress-js/](http://tympanus.net/codrops/2012/04/05/slideshow-with-jmpress-js/)

# .net - 我可以减少列表视图的执行时间吗？

> ID：11808187
> 
> 赞同：0
> 
> 时间：2012-08-04T11:13:41.363
> 
> 标签：.net, c#-4.0, listview, imagelist

我正在使用以下功能添加项目。此功能正常工作，但执行需要很长时间。请帮助我减少添加到列表视图中的项目的执行时间。

功能：

```
listViewCollection.Clear();
listViewCollection.LargeImageList = imgList;
listViewCollection.LargeImageList.ImageSize = new System.Drawing.Size(100, 100);
 foreach (var dr in Ringscode.Where(S => !S.IsSold))
 {
     listViewCollection.Items.Insert(0,
                   new ListViewItem(dr.CodeNo.ToString(), dr.RingID.ToString()));
     imgList.Images.Add(dr.RingID.ToString(), binaryToImage(dr.Image));
 }

public Image binaryToImage(System.Data.Linq.Binary binary) 
{ 
   byte[] b = binary.ToArray(); 
   MemoryStream ms = new MemoryStream(b); 
   Image img = Image.FromStream(ms); 
   return img; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:32:04.270

如果您在同一线程中执行非 UI 工作（在您的情况下，操作流和图像），您需要期望您的 UI 会变慢。解决方案是将这项工作卸载到另一个线程，将 UI 线程留给用户。一旦工作线程完成，告诉 UI 线程进行更新。

第二点是批量更新 ListView 数据时，你应该告诉 ListView 等到你完成所有操作。

如果你这样做更好。评论是内联的。

```
// Create a method which will be executed in background thread,
// in order not to block UI
void StartListViewUpdate()
{
    // First prepare the data you need to display
    List<ListViewItem> newItems = new List<ListViewItem>();
    foreach (var dr in Ringscode.Where(S => !S.IsSold))
    {
        newItems.Insert(0,
                      new ListViewItem(dr.CodeNo.ToString(), dr.RingID.ToString()));
        imgList.Images.Add(dr.RingID.ToString(), binaryToImage(dr.Image));
    }

    // Tell ListView to execute UpdateListView method on UI thread
    // and send needed parameters
    listView.BeginInvoke(new UpdateListDelegate(UpdateListView), newItems);
}

// Create delegate definition for methods you need delegates for
public delegate void UpdateListDelegate(List<ListViewItem> newItems);
void UpdateListView(List<ListViewItem> newItems)
{
    // Tell ListView not to update until you are finished with updating it's
    // data source
    listView.BeginUpdate();
    // Replace the data
    listViewCollection.Clear();
    listViewCollection.LargeImageList = imgList;
    listViewCollection.LargeImageList.ImageSize = new System.Drawing.Size(100, 100);
    foreach (ListViewItem item in newItems)
        listViewCollection.Add(item);
    // Tell ListView it can now update
    listView.EndUpdate();
}

// Somewhere in your code, spin off StartListViewUpdate on another thread
...
        ThreadPool.QueueUserWorkItem(new WaitCallback(StartListViewUpdate));
... 
```

当我内联编写此代码时，您可能需要修复一些问题，并且没有在 VS 中对其进行测试。

# android - 添加指向从 xml 文件解析的内容的链接

> ID：11808192
> 
> 赞同：1
> 
> 时间：2012-08-04T11:14:11.143
> 
> 标签：android, xml-parsing

我正在创建一个新闻应用程序。我已成功解析（使用 sax）文件并在列表视图中添加了标题。我想分别为标题添加链接。因此，一旦单击标题，它就会打开相应标题的详细新闻

我如何将链接添加到标题。？

这是我使用的[xml文件](http://feeds.bbci.co.uk/news/wales/rss.xml)..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T11:23:13.427

只需创建自定义适配器。

参考这个链接，

[如何在 ListView 上更改颜色和字体](https://stackoverflow.com/questions/7361135/how-to-change-color-and-font-on-listview)

textview 设置为链接使用下面的代码，

```
textView.setText(Html.fromHtml(
        "<b>text3:</b>  Text with a " +
        "<a href=\"http://www.google.com\">link</a> " +
        "created in the Java source code using HTML.")); 
```

textView.setMovementMethod(LinkMovementMethod.getInstance());

# javafx-2 - Griffon JavaFX 示例应用程序无法编译

> ID：11808199
> 
> 赞同：0
> 
> 时间：2012-08-04T11:15:13.513
> 
> 标签：javafx-2, griffon

我无法运行 aalmiray 的博客“The Griffon Trove: dialogs and JavaFX”中的示例应用程序。

> [griffonc] 将 1 个源文件编译到 C:\Users\foo.griffon\1.0.1\projects\sample\classes\main 编译错误：BUG！源单元“C:\Users\foo\sample\griffon-app\views\sample\DialogView.groovy”中的“语义分析”阶段异常 索引无效

`import javafx.geometry.Insets`通过编译评论帮助。

Groovy 版本：1.8.5 JVM：1.6.0_24 供应商：Sun Microsystems Inc.
操作系统：Windows 7 x64
Griffon 版本：1.0.1
JavaFX 版本：2.1 运行时

链接在[这里](http://www.jroller.com/aalmiray/entry/the_griffon_trove_dialogs_and)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:15:34.163

在我看来，您受到[http://jira.codehaus.org/browse/GRIFFON-517](http://jira.codehaus.org/browse/GRIFFON-517)的影响。如果是这种情况，请确保您运行的是最新版本的 JavaFX 和 GroovyFX 插件。您可以通过调用快速检查插件是否需要更新`griffon list-plugin-updates`。

您还可以查看[http://artifacts.griffon-framework.org](http://artifacts.griffon-framework.org)以获取更新。

# python - 使用python在文件中指定位置后查找重复的字符串

> ID：11808203
> 
> 赞同：0
> 
> 时间：2012-08-04T11:15:42.057
> 
> 标签：python, regex

文本文件包含

```
paragraph 1: 
01 internet 1
02 intranet 2
paragraph 2: 
03 internet 1
04 intranet 2
paragraph 3: 
05 internet 1
06 intranet 2
paragraph 4: 
07 internet 1
08 intranet 2 
```

我想使用 python 在第 2 段中找到 Intranet 2。

这是我到目前为止所拥有的：

```
file = open( "c:\file.txt", "r" ).readlines()
var = raw_input("enter the value")
var1 = "paragraph 1:"
for line in file:
  if re.search(var1, line,re.IGNORECASE):
    print re.search(var, line,re.IGNORECASE)
    print "found", line
    count=line for line in file:
      if re.search(var, line,re.IGNORECASE):
        print "value=", line 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:46:58.750

假设您只想在指定的部分中搜索，这应该可以：

```
def find(file, paragrapgh_number, search_string):
    paragraph = 'paragraph {}'.format(paragrapgh_number)
    for line in file:
        if line.find(paragraph) >= 0:
            break
    for line in file:
        if line.find(search_string) >=0:
            print('Found:', line)
        elif line.find('paragraph') >= 0:
            print('Not found')
            return

with open( "./test.txt", "r" ) as file:
    find(file, 2, 'intranet 2')

>>>Found: 04 intranet 2 
```

如果在指定部分中找不到字符串，它将显示

```
>>>Not Found 
```

# google-app-engine - 读取多个主要版本 ID 的日志？

> ID：11808207
> 
> 赞同：0
> 
> 时间：2012-08-04T11:16:17.943
> 
> 标签：google-app-engine, logging

我正在尝试获取多个主要版本 ID 的日志（使用 LogService API Java SDK 1.7.0）。

示例：获取应用版本 1 和 2 的日志：

```
...
logquery.majorVersionIds(Arrays.asList("1","2"));
ls.fetch(logquery);
... 
```

但它抛出了这个异常：

> com.google.appengine.api.log.InvalidRequestException：必须指定一个主要版本 ID。在 com.google.appengine.api.log.LogServiceImpl$1.convertException(LogServiceImpl.java:108) 在 com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:106) 在 com.google.appengine。 com.google.appengine.api.log.LogServiceImpl.fetch(LogServiceImpl.java:22) 上的 api.log.LogServiceImpl.fetch(LogServiceImpl.java:31)

我做错了什么还是不支持？Java 文档说：

> public LogQuery majorVersionIds(java.util.List<java.lang.String> versionIds)
> 
> 允许用户指定应读取其日志数据的主要应用程序版本的设置器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:58:00.697

这是文档的问题。您收到的错误是告诉您当时只能指定一个 version_id。[python 文档](https://developers.google.com/appengine/docs/python/logservice/functions)指出：

> 目前，每个 fetch 调用只能指定一个 version_id。

[将来您可以在外部问题跟踪器](http://code.google.com/p/googleappengine/issues/list)中创建问题。

ps：我提交了一个内部问题来解决这个问题。

# java - Windows上智能卡的Java密钥库和密码安全性

> ID：11808209
> 
> 赞同：0
> 
> 时间：2012-08-04T11:16:44.337
> 
> 标签：java, certificate, keystore

[http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html](http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html)

在下面的代码中，java 应用程序向用户请求密码：

```
KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());

// get user password and file input stream
char[] password = getPassword();
java.io.FileInputStream fis =
    new java.io.FileInputStream("keyStoreName");
ks.load(fis, password);
fis.close(); 
```

这是否意味着应用程序可以获取我的数字证书密码，即使它位于智能卡上并可能将其用于其他用途？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:01:17.027

是的，另一个具有足够权限的应用程序可以从内存中读取密码的内容，或者在输入键盘时窥探密码。

代码示例显示了存储为`char`数组的密码，这是推荐的做法。与 immutable 不同，这样的数组可以在使用密码后重置为不同的值`String`。这会最小化攻击窗口，但不会删除它。

一些智能卡制造商提供外部 PIN 键盘设备，以确保将密码直接传送到卡上。您可以考虑研究其中一种解决方案。

# android - 使用phonegap api从js调用java函数时VM崩溃

> ID：11808221
> 
> 赞同：0
> 
> 时间：2012-08-04T11:18:57.007
> 
> 标签：android

我曾使用 phonegap 编写一个应用程序，该应用程序试图从 android 2.3.3 环境中的 java 脚本调用 java 函数。

我的问题是应用程序显示警报消息然后崩溃并在下面提示错误消息

```
 08-04 11:06:12.669: W/dalvikvm(551): JNI WARNING: jarray 0x40522898 points to non-array object (Ljava/lang/String;)
    08-04 11:06:12.669: I/dalvikvm(551): "WebViewCoreThread" prio=5 tid=9 NATIVE
    08-04 11:06:12.669: I/dalvikvm(551):   | group="main" sCount=0 dsCount=0 obj=0x4051dd20 self=0x2a6d88
    08-04 11:06:12.669: I/dalvikvm(551):   | sysTid=559 nice=0 sched=0/0 cgrp=default handle=2780864
    08-04 11:06:12.669: I/dalvikvm(551):   | schedstat=( 943171212 746714576 110 )
    08-04 11:06:12.680: I/dalvikvm(551):   at android.webkit.WebViewCore.nativeTouchUp(Native Method)
    08-04 11:06:12.680: I/dalvikvm(551):   at android.webkit.WebViewCore.nativeTouchUp(Native Method)
    08-04 11:06:12.680: I/dalvikvm(551):   at android.webkit.WebViewCore.access$3300(WebViewCore.java:53)
    08-04 11:06:12.680: I/dalvikvm(551):   at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:1158)
    08-04 11:06:12.680: I/dalvikvm(551):   at android.os.Handler.dispatchMessage(Handler.java:99)
    08-04 11:06:12.680: I/dalvikvm(551):   at android.os.Looper.loop(Looper.java:123)
    08-04 11:06:12.680: I/dalvikvm(551):   at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:629)
    08-04 11:06:12.680: I/dalvikvm(551):   at java.lang.Thread.run(Thread.java:1019)
    08-04 11:06:12.680: E/dalvikvm(551): VM aborting 
```

任何人都可以就这个问题提供帮助/建议吗？

下面是代码

```
 MainActivity.java

        import org.apache.cordova.*;

        import android.os.Bundle;
        import android.app.Activity;
        import android.view.Menu;
        import android.view.MenuItem;
        import android.support.v4.app.NavUtils;

        public class MainActivity extends DroidGap {
            private MyClass mc;

            @Override
            public void onCreate(Bundle savedInstanceState) {       

                super.onCreate(savedInstanceState);
                super.init(); 
                mc = new MyClass(this, appView);
                appView.addJavascriptInterface(mc, "MyCls");       
                super.loadUrl("file:///android_asset/www/5.html");
            }  

        }

    MyClass.java

        import org.apache.cordova.DroidGap;

        import android.content.Context;
        import android.telephony.TelephonyManager;
        import android.webkit.WebView;

        public class MyClass {
              private WebView mAppView;
              private DroidGap mGap;

              public MyClass(DroidGap gap, WebView view)
              {
                mAppView = view;
                mGap = gap;
                System.out.println("jjjjj");
              }

              public String getTelephoneNumber(){
                  return "i am android";
              }
            }

    5.html
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">      
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="jquery.jsonp.js"></script>
    </head>

    <script>
    $(document).ready(function(){

        $("#c2").click(function(){
            alert('jjjj');
            var t = window.MyCls.getTelephoneNumber();
            alert(t );
        });
    });
    </script>

    <body>
    <br><button id="c2">Call Android Activity</button>
    </body>
    </html>

    Manifest:

    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.myfirstapp"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />

        <supports-screens 
        android:largeScreens="true" 
        android:normalScreens="true" 
        android:smallScreens="true" 
        android:resizeable="true" 
        android:anyDensity="true" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:configChanges="orientation|keyboardHidden|screenSize"
                android:name=".MainActivity"
                android:label="@string/title_activity_main" >
                <meta-data
                    android:name="android.support.PARENT_ACTIVITY"
                    android:value="MainActivity" />
                <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            </activity>
        </application>
    <uses-permission android:name="android.permission.INTERNET" />
    </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T04:19:18.417

已经发现了。这个问题只发生在安卓模拟器上。它在带有 android 2.3.4 和 4.0.3 的设备上运行良好。

# uml - UML 序列图显示子类的创建？

> ID：11808223
> 
> 赞同：2
> 
> 时间：2012-08-04T11:19:21.480
> 
> 标签：uml

在 UML 图中，当您创建子类的实例时，您通常是否在子类构造函数之前包含超类的隐式构造？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T11:26:19.280

我通常不会包括它。UML 序列图的目的是显示组件之间发生的事情。它不应该与设计的其他部分隔离阅读，因此如果读者不确定任何组件*是*什么（即子类和超类的实例），他或她应该查看 - 希望 - 伴随类图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:23:07.420

sequence 只是显示了相关模块的逻辑顺序。您是否觉得有必要确定真正调用了哪种方法？另外我猜想让父类引用子类的目的是，直到运行时，您才会知道实际引用了哪个子类。如果不是这种情况，那么是否应该明确引用具体的子类？被调用的方法是否在子类或父类上以某种方式改变序列？

# tomcat7 - tomcat 7实例未在ubuntu上启动

> ID：11808227
> 
> 赞同：0
> 
> 时间：2012-08-04T11:19:50.203
> 
> 标签：tomcat7, ubuntu-12.04, instanceof

我是 Tomcat、Apache 和 Ubuntu 的新手，我不知道在哪里寻找日志。

我已经逐字阅读了如何创建多个 tomcat 实例的文章，但是我遇到了一个小故障，我不确定如何调试它。我应该在页面的四分之三处启动实例，但我得到的只是[失败]，没有错误消息。我不知道在哪里看或我能做些什么来调试这个。

[https://github.com/getrailo/railo/wiki/Ubuntu-12.04-Railo-4-Beta-with-Tomcat7-multi-instance](https://github.com/getrailo/railo/wiki/Ubuntu-12.04-Railo-4-Beta-with-Tomcat7-multi-instance)

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:43:22.700

我终于设法到达了我想要的地方，那就是让多个 tomcat 实例同时运行。如果没有这些帖子中提到的文章，我将无法做到这一点，非常感谢他们的辛勤工作。

我在尝试启动 tomcat 时收到 [fail] 消息的原因是因为我遵循了基于我的硬件的 java 选项步骤，这花了我一天的时间！！当重置为默认值时，我能够毫无错误地启动/停止我的实例。我建议您使用默认值 (JAVA_OPTS="-Djava.awt.headless=true -Xmx128m -XX:+UseConcMarkSweepGC") 然后在一切运行时进行调整。

如果您在尝试浏览您的实例时遇到权限或未找到文件夹错误，那是因为 tomcat7 没有您的工作文件夹的[所有权](https://stackoverflow.com/questions/6185933/how-to-declare-var-www-as-tomcat-and-railo-root)（按照[此](http://blog.getrailo.com/post.cfm/railo-on-aws-elastic-beanstalk)操作了解如何使用 railo 部署创建工作文件夹）。

希望这可以节省几个小时/几天。

# iphone - 终止先前的下载请求

> ID：11808229
> 
> 赞同：0
> 
> 时间：2012-08-04T11:20:15.323
> 
> 标签：iphone, objective-c, ios, afnetworking

我开始`AFHTTPRequestOperation`从服务器下载一些数据。

触发下载的动作是用户输入的文本。我正在努力使这个动态化，所以如果用户输入: `a`，它将开始为`a`. 当用户添加另一个字母/更改文本时，例如更改为`ab`，它将终止先前的请求并为 开始一个新的请求`ab`。我试图让它充满活力。

有没有办法`AFNetworking`终止正在运行的请求/操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:00:29.450

`cancel`您可以在任何操作上调用方法...
如果您使用`AFHTTPClient`的是`cancelAllHTTPOperationsWithMethod`取消操作的方法。
或者您可以使用`NSMutableSet`跟踪视图控制器中运行的所有请求，并在您需要时取消一个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T11:33:56.897

According to the AFNetworking reference there is no way to terminate the request.

Solution:
Just have a scheme to identify the various requests and ignore all but the last one.

# javascript - 提交表单时如何重置某些字段？

> ID：11808230
> 
> 赞同：0
> 
> 时间：2012-08-04T11:20:15.790
> 
> 标签：javascript, html

我有由 ajax 创建的商店表单，并且想要重置它拥有的某些字段。这是我的代码，从表单呈现的地方一直到它自己的视图：

其渲染位置：

宠物/index.html.erb

```
<div class="tabbable">
   <ul class="nav nav-tabs">
      <li class="active">
         <a href="#tab1" data-toggle="tab">Store</a>
      </li>
   </ul>
   <div class="tab-content">
      <div class="tab-pane active add-store-form" id="tab1">
         <%= render "stores/form" %>
      </div>
   </div>
</div> 
```

它是如何创建的：

**注意：**我的新视图和创建视图都具有相同的确切代码。

new.js.erb & create.js.erb (就这 1 行)

```
$('.add-store-form').html('<%= escape_javascript(render(:partial => 'stores/form', locals: { store: @store })) %>'); 
```

现在在我的商店表单上，我想`#`用他们重置字段：

```
<%= form_for(@store, :remote => true, :html => { :class => "add-form", :id => "sform" }) do |f| %>

  # <%= f.text_field :name  %>

  # <%= f.check_box :personal %>

    <%= f.collection_select :category_id, Category.all, :id, :name, {}, {} %>

  # <%= f.text_field :address %>

    <%= f.text_field :website %>

  # <%= f.text_field :phone_number %>

  <%= f.submit "Create" %> 
```

如何仅重置这些特定字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:06:40.950

这是[使用 jQuery 清除表单字段](https://stackoverflow.com/questions/6364289/clear-form-fields-with-jquery)的重复问题。

因此，您应该包含一个具有以下功能的 js 文件（**非** `new.js.erb`或）：`create.js.erb`

```
$('#sform').live('submit', function() { 
  $('#name').val("");  # this only resets the name field, provided it has the id 'name'
}); 
```

在我链接到的那个问题的答案中，您还有其他示例。请注意，他们使用单击按钮来重置字段，而我建议您在单击创建按钮时使用表单提交事件。

# mysql - 如何在 MySQL 中当月的第一天和当天之间进行选择？

> ID：11808232
> 
> 赞同：57
> 
> 时间：2012-08-04T11:20:40.807
> 
> 标签：mysql, date, get

我需要在当月的第一天和当天从 MySQL 数据库中选择数据。

```
select*from table_name 
where date between "1st day of current month" and "current day" 
```

有人可以提供此查询的工作示例吗？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-08-04T11:24:55.123

```
select * from table_name 
where (date between  DATE_ADD(LAST_DAY(DATE_SUB(CURDATE(), interval 30 day), interval 1 day) AND CURDATE() ) 
```

或更好 ：

```
select * from table_name 
where (date between  DATE_FORMAT(NOW() ,'%Y-%m-01') AND NOW() ) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-04-24T06:41:14.407

我正在寻找一个类似的查询，我需要在查询中使用一个月的第一天。该`last_day`功能对我不起作用，但`DAYOFMONTH`派上用场。

因此，如果有人正在寻找相同的问题，以下代码将返回当月第一天的日期。

```
SELECT DATE_SUB(CURRENT_DATE, INTERVAL DAYOFMONTH(CURRENT_DATE)-1 DAY); 
```

将日期列与该月的第一天进行比较：

```
select * from table_name where date between 
DATE_SUB(CURRENT_DATE, INTERVAL DAYOFMONTH(CURRENT_DATE)-1 DAY) and CURRENT_DATE 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-04T11:26:53.363

```
select * from table_name 
where `date` between curdate() - dayofmonth(curdate()) + 1
                 and curdate() 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/6f355/1)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-07T00:13:47.287

我使用了以下查询。过去它对我很有用。

```
select date(now()) - interval day(now()) day + interval 1 day 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-07T10:17:09.957

尝试这个 ：

```
SET @StartDate = DATE_SUB(DATE(NOW()),INTERVAL (DAY(NOW())-1) DAY);
SET @EndDate = ADDDATE(CURDATE(),1);
select * from table where (date >= @StartDate and date < @EndDate); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-24T13:17:06.927

mysql当前月份和当前年份的完整解决方案，它也可以正确使用索引:)

```
-- Current month
SELECT id, timestampfield 
  FROM table1
 WHERE timestampfield >= DATE_SUB(CURRENT_DATE, INTERVAL DAYOFMONTH(CURRENT_DATE)-1 DAY)
   AND timestampfield <=  LAST_DAY(CURRENT_DATE);

-- Current year
SELECT id, timestampfield 
  FROM table1
 WHERE timestampfield >= DATE_SUB(CURRENT_DATE, INTERVAL DAYOFYEAR(CURRENT_DATE)-1 DAY)
   AND timestampfield <=  LAST_DAY(CURRENT_DATE); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-11T03:02:20.357

```
select * from table
where date between 
(date_add (CURRENT_DATE, INTERVAL(1 - DAYOFMonth(CURRENT_DATE)) day)) and current_date; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-08T18:52:53.040

在需要对我在电子商务商店中运行的一些商业智能查询进行相同的查询后，我发现自己在这里。我想添加我的解决方案，因为它可能对其他人有帮助。

```
set @firstOfLastLastMonth = DATE_SUB(LAST_DAY(DATE_ADD(NOW(), INTERVAL -2 MONTH)),INTERVAL DAY(LAST_DAY(DATE_ADD(NOW(), INTERVAL -2 MONTH)))-1 DAY);
set @lastOfLastLastMonth = LAST_DAY(DATE_ADD(NOW(), INTERVAL -2 MONTH));
set @firstOfLastMonth = DATE_SUB(LAST_DAY(DATE_ADD(NOW(), INTERVAL -1 MONTH)),INTERVAL DAY(LAST_DAY(DATE_ADD(NOW(), INTERVAL -1 MONTH)))-1 DAY);
set @lastOfLastMonth = LAST_DAY(DATE_ADD(NOW(), INTERVAL -1 MONTH));
set @firstOfMonth = DATE_ADD(@lastOfLastMonth, INTERVAL 1 DAY);
set @today = CURRENT_DATE; 
```

### 今天是 2019-10-08 所以输出看起来像

```
@firstOfLastLastMonth = '2019-08-01'
@lastOfLastLastMonth = '2019-08-31'
@firstOfLastMonth = '2019-09-01'
@lastOfLastMonth = '2019-09-30'
@firstOfMonth = '2019-10-01'
@today = '2019-10-08' 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-24T04:31:01.637

```
select * from <table>
where <dateValue> between last_day(curdate() - interval 1 month + interval 1 day)
                  and curdate(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-28T17:01:55.097

这里的所有反应都太复杂了。您知道当前月份的第一天是当前日期，但日期为 01。您可以通过输入 NOW() 方法来使用 YEAR() 和 MONTH() 来构建月份日期。这是解决方案：

```
select * from table_name 
where date between CONCAT_WS('-', YEAR( NOW() ), MONTH( NOW() ), '01') and DATE( NOW() ) 
```

CONCAT_WS() 用分隔符连接一系列字符串（在本例中为破折号）。因此，如果今天是 2020 年 8 月 28 日，YEAR(NOW()) = '2020' 和 MONTH(NOW()) = '08'，那么您只需要在末尾附加 '01'。

瞧！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-08-07T05:01:45.620

我用过这个

```
select DATE_ADD(DATE_SUB(LAST_DAY(now()), INTERVAL  1 MONTH),INTERVAL  1 day) first_day
      ,LAST_DAY(now()) last_day, date(now()) today_day 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-05T14:39:52.370

一种不太正统的方法可能是

```
SELECT * FROM table_name 
WHERE LEFT(table_name.date, 7) = LEFT(CURDATE(), 7)
  AND table_name.date <= CURDATE(); 
```

因为日期介于月初和现在之间，就相当于本月和现在之前的日期。不过，我确实觉得这比其他一些方法在眼睛上更容易一些。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-03-15T14:10:40.600

```
SELECT date_sub(current_date(),interval dayofmonth(current_date())-1 day) as first_day_of_month; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-08-10T09:53:56.707

我有一些类似的要求 -`find first day of the month`但基于`year end month`用户在他们的个人资料页面中选择的。

问题陈述 - 找出`txns`用户在他/她的财政年度所做的所有事情。`Financial year`使用`year end`月份值确定，其中`month`可以是任何有效月份 - `1 for Jan`, `2 for Feb`, , `3 for Mar`....`12 for Dec`

对一些客户来说，有的人`financial year end`在`March`，有的人在观察它`December`。

```
Scenarios - (Today is `08 Aug, 2018`)
   1\. If `financial year` ends on `July` then query should return `01 Aug 2018`.
   2\. If `financial year` ends on `December` then query should return `01 January 2018`.
   3\. If `financial year` ends on `March` then query should return `01 April 2018`.
   4\. If `financial year` ends on `September` then query should return `01 October 2017`. 
```

最后，下面是查询。-

```
select @date := (case when ? >= month(now()) 
then date_format((subdate(subdate(now(), interval (12 - ? + month(now()) - 1) month), interval day(now()) - 2 day)) ,'%Y-%m-01')
else date_format((subdate(now(), interval month(now()) - ? - 1 month)), '%Y-%m-01') end) 
```

其中`?`是`year end`月份（值从 1 到 12）。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-04-09T06:31:48.813

**Get first date and last date from month and year.**

```
select LAST_DAY(CONCAT(year,'.',month,'.','01')) as registerDate  from user;
   select date_add(date_add(LAST_DAY(end_date),interval 1 DAY),interval -1 MONTH) AS closingDate from user; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-11-16T16:09:37.580

这里的关键是获取该月的第一天。为此，有几种选择。在性能方面，我们的测试表明它们之间没有显着差异 -[我们写了一篇关于该主题的完整博客文章](https://kb.zensoft.hu/mysql-get-the-first-day-of-the-month-for-a-given-date/)。我们的研究结果表明，真正重要的是您是否需要将结果设为 VARCHAR、DATETIME 或 DATE。

获取当月第一天的实际问题的最快解决方案返回 VARCHAR：

```
SELECT CONCAT(LEFT(CURRENT_DATE, 7), '-01') AS first_day_of_month; 
```

第二快的解决方案给出了 DATETIME 结果——它的运行速度比前一个慢大约 3 倍：

```
SELECT TIMESTAMP(CONCAT(LEFT(CURRENT_DATE, 7), '-01')) AS first_day_of_month; 
```

最慢的解决方案返回 DATE 对象。不相信我？[运行此 SQL Fiddle 并亲自查看](http://sqlfiddle.com/#!9/9eecb/118188)

在您的情况下，由于您需要将该值与表中的其他 DATE 值进行比较，因此使用哪种方法并不重要，因为即使您的公式不返回 DATE 对象，MySQL 也会隐式进行转换。

所以说真的，随你挑选。哪个最适合您？我会选择第一个，因为它是最短的并且可以说是最简单的：

```
SELECT * FROM table_name 
WHERE date BETWEEN CONCAT(LEFT(CURRENT_DATE, 7), '-01') AND CURDATE;

SELECT * FROM table_name 
WHERE date BETWEEN DATE(CONCAT(LEFT(CURRENT_DATE, 7), '-01')) AND CURDATE;

SELECT * FROM table_name 
WHERE date BETWEEN (LAST_DAY(CURRENT_DATE) + INTERVAL 1 DAY - INTERVAL 1 MONTH) AND CURDATE;

SELECT * FROM table_name 
WHERE date BETWEEN (DATE(CURRENT_DATE) - INTERVAL (DAYOFMONTH(CURRENT_DATE) - 1) DAY) AND CURDATE;

SELECT * FROM table_name 
WHERE date BETWEEN (DATE(CURRENT_DATE) - INTERVAL (DAYOFMONTH(CURRENT_DATE)) DAY + INTERVAL 1 DAY) AND CURDATE;

SELECT * FROM table_name 
WHERE date BETWEEN DATE_FORMAT(CURRENT_DATE,'%Y-%m-01') AND CURDATE; 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2016-07-23T02:18:00.643

```
SET @date:='2012-07-11';
SELECT date_add(date_add(LAST_DAY(@date),interval 1 DAY), 
       interval -1 MONTH) AS first_day 
```

# apache - 如何重写从插件域到外部文件夹的路径？

> ID：11808233
> 
> 赞同：0
> 
> 时间：2012-08-04T11:21:12.017
> 
> 标签：apache, .htaccess, mod-rewrite

结构是：

```
domain.com
   addon1.com
   addon2.com
   some_php_scripts_folder
      script.php 
```

我想使用相对路径将规则从 addon1.com 重写为 script.php，但我不能。（错误的请求）。不知何故这是合乎逻辑的，因为 addon1.com 它是根，但我想与 htacces 文件相对。

前任：

```
RewriteRule ^page-example$ ../some_php_scripts_folder/script.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:51:20.817

您不能`RewriteRule`在文档根目录之外创建目标，您需要在 addon1.com 的 vhost 配置中创建一个别名，该别名类似于 apache 的[Alias 指令](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)：

```
Alias /page-example /path/to/domain.com/some_php_scripts_folder/script.php 
```

# magento - 配置兼容的开发和生产站点

> ID：11808235
> 
> 赞同：0
> 
> 时间：2012-08-04T11:21:42.110
> 
> 标签：magento

我正在开发一个 Magento 网站。我可以访问本地主机和远程主机，并且想以某种方式配置开发和生产环境。在远程主机上，我恢复了在本地主机上备份的数据库数据，但是当我这样做时，我会覆盖主机的基本名称，这会导致网站在加载页面时被重定向到不存在的 URL。我怎样才能避免这种冲突：

我希望能够（a）在 http://remotehost/foobardev 上开发并将我的数据备份到 http://remotehost/foobar 或以其他方式（b）在 http://localhost/foobar 上开发并在 http 上部署:// 远程主机/foobar 。我想知道如何在不覆盖 Magento 管理面板 -> 系统 -> 配置 -> Web -> Unsecure Base URL / Secure Base URL 中找到的值的情况下来回传输数据库数据，当我运行 mysql 并使用 mysql 命令源将在开发站点上找到的数据库条目恢复到生产站点。

因此，我想要一种更简单的方法来恢复数据库内容，而不会覆盖在 magento 管理面板中配置的基本 url，因为这样做会导致在每次页面加载时重定向到不存在或错误的位置，从而使系统无法使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:46:14.107

不完全是这样的问题。Magento EE 内置了 staging，也可以合并您的数据。你必须明白，如果没有一些严肃的同步框架来跟踪每一行和每一列的状态，知道哪些数据是新的，哪些是旧的，并解决同步冲突，那么从开发到实时同步数据是不容易的。

**这是您的流程，假设您使用的是 CE 并且没有捆绑数据迁移工具。**

*   设置实时数据库并计算数据只会从实时移动到开发，而永远不会从开发移动到实时，因为您没有数据迁移。您需要在数据库级别进行和保存的每个配置都在实时数据库上进行（在开发环境中测试它们，然后在实时环境中创建）
*   制作一个shell脚本，fabric脚本任何你喜欢的部署脚本，它将导出实时数据库转储，删除dev数据库（如果存在）并创建一个新数据库并将实时数据库导入其中，运行将更改/删除的pre或post sql脚本与环境相关的配置值（如 base_url、secure_base_url 等）
*   为避免重复数据输入，请始终创建您需要使用 magento 设置脚本保留的所有属性和配置值。

**代码也是如此，这是一个具有实时、舞台和开发环境的常见设置场景**

*   一个基于干净的 magento 版本树的主版本控制（最好是裸露的，以避免有人在那里更改文件）存储库
*   为每个环境（live、stage、dev(n)）和一个经过验证的代码流从 dev（您开发并且可能有损坏的代码库状态）到 stage（发布候选驻留并准备好测试并且不会更改）的单独分支从舞台到现场（您的现场代码处于稳定状态）
*   每个开发人员都在从 dev 分支结帐并提交到自己的 dev 分支，然后将更改推送到 dev 在那里可以评估并确定更改是否足够成熟以进行暂存
*   阶段是发布候选者存在的地方，客户可以测试（或自动化测试）并诊断它是否准备好发布，没有人在这里更改代码并且代码来自开发分支
*   live 是实时运行的版本，没有人直接更改任何代码。如果测试通过，代码只能从阶段来到这里

所以为了更好地可视化它，想象你的代码库驻留在 git 中。

```
myproject_magento_se (your project git repository on bitbucket.org or in github or wherever you can host)
--> master (branch with all clean magento versions from your current to latest)
--> dev (git checkout -b master (or by specific version from master) 
--> stage (while on dev: git checkout -b stage)
--> live (while on stage: git checkout -b live) 
```

并想象您的主机设置如下：

```
www.mylivesite.com =  git clone yourgitrepo; git checkout live;
stage.mylivesite.com = git clone yourgitrepo; git checkout stage;
dev.mylivesite.com = git clone yourgitrepo; git checkout dev; 
```

对于所有这些，您最好拥有部署脚本，只需按一下按钮，即可在环境之间进行切换、代​​码和数据库提升。

**以下是您每天需要对每个软件项目执行的一些常见操作**

*   从现场移动/重置数据从现场到开发（如果需要加扰或更改客户端相关数据，请进行混淆调用）
*   将代码从开发移动到阶段
*   将代码从舞台转移到现场
*   重置/创建任何具有实时状态的开发人员（数据和代码）

玩得开心 :) 并通过这个线程以及[https://superuser.com/questions/90301/sync-two-mysql-databases](https://superuser.com/questions/90301/sync-two-mysql-databases)和所有其他你可以在类似的问题上搜索 SO。

# debugging - 通过 coffeescript 客户端编译器检索生成的 JS

> ID：11808237
> 
> 赞同：0
> 
> 时间：2012-08-04T11:22:09.883
> 
> 标签：debugging, coffeescript

我想通过[CoffeeScript 客户端编译器](http://coffeescript.org/#scripts)调试生成的 javascript ，例如：

```
<script type="text/coffeescript">
foo = 0
</script> 
```

应该在我的页面中生成一些类似的 JS 代码：

```
var foo = 0; 
```

所以我可以在我的控制台中添加一个断点。

--

问题是我无法弄清楚这个 JS 在页面上的注入位置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:23:33.760

代码不会作为 DOM 的一部分注入到页面中，就像您在 <script> 标记中那样，而是直接加载到 Javascript 引擎中，就像它会发生在类似的事情中一样

```
eval("var myFoo = function () {}"); 
```

话虽如此，我使用了 Visual Studio 2012，它在运行调试器时在解决方案资源管理器中名为“功能代码”的特殊节点中显示此类代码，但我无法在 Firebug 或 Chrome 中找到它。您是否尝试过使用 phenomnomnominal 建议的“调试器”语句？

# android - 如何检查线程已完成并显示 Toast

> ID：11808241
> 
> 赞同：1
> 
> 时间：2012-08-04T11:22:47.333
> 
> 标签：android, multithreading

我正在开发一个 android 应用程序，我有一个扩展`Thread`类的单独类，在这里我调用一个服务并获取数据，现在我需要知道这个线程何时完成，并在完成时向我显示一个 Toast。比如“成功”

有没有类似Thread`onPostExecute()`的方法？`AsyncTask`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:21:01.393

我希望你正在使用这样的线程..

```
 .....
 new Thread(new Runnable() {
  public void run() {
    YourMetod();  //you want to execute first                              
    finishedHandler.sendEmptyMessage(0);//when first method is executed completly you need to call this
  }
 }).start();
 .... 
```

像这样在你的类中创建一个处理程序

```
 private Handler finishedHandler = new Handler() {
    @Override public void handleMessage(Message msg) {
        //create your toast here
     }
 }; 
```

试试这个希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:35:22.463

Display a toast is different that modify Views component because toast can be displayed from every thread while views need to be accessed only from the main thread. So, if you need just to display a Thread just call `Toast.makeToast(...).show()` wherever you are.

Anyway, you can send messages from a backgrund thread to the main thread using the `Handler` class:

[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

[http://developer.android.com/guide/faq/commontasks.html#threading](http://developer.android.com/guide/faq/commontasks.html#threading)

# ruby-on-rails - 尽管设置相反，Rails 应用程序通过 nginx 强制 https 运行？

> ID：11808242
> 
> 赞同：0
> 
> 时间：2012-08-04T11:22:51.147
> 
> 标签：ruby-on-rails, nginx, varnish

我一直在努力部署我的 rails 应用程序，虽然有一些问题我已经能够解决其中的大部分问题。然而，最新的情况相当令人困惑。

我的设置如下：

Ruby 1.9/Rails 3.2 App w/Phusion Passenger --> CentOS 6.2 上的 nginx --> Varnish 缓存服务器

尽管 config.force_ssl 设置为 false 并且在 production.rb 文件中被注释掉，服务器仍然强制重定向到 https（在我的情况下这还不能正常工作）。服务器已经通过'killall nginx'和'/opt/nginx/sbin/nginx'反复重启，所以设置应该生效。

我的第一个想法是缓存服务器可能落后了，但事实并非如此。

然而，使这特别奇怪的是，如果不投入生产模式，应用程序可以正常工作。如果我编辑 nginx.conf 改为使用开发模式，该站点将完美运行。

罪魁祸首可能是什么？我对服务器维护和 IT 这方面非常陌生，所以我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:39:55.133

原来，这真的是清漆过于激进。

# android - 使用 LuaEclipse 时导出为 .apk 和项目文件位置未知（初学者）

> ID：11808244
> 
> 赞同：0
> 
> 时间：2012-08-04T11:23:07.717
> 
> 标签：android, eclipse, lua, apk, coronasdk

我正在尝试创建一个 .apk 文件。我看到一个新的 .apk 保存在我的桌面上，但它只是一个带有扩展名的文件，其中没有数据。

我最近刚从 Corona SDK 迁移到 LuaEclipse，我现在需要解释如何组合我的所有文件。

我在 Project Files 文件夹中有一个 .lua 文件，其中包含其他数据，例如图像和声音（使用 Corona 时）。现在我想将这些所有文件导出为 .apk（使用 Eclipse 导出），但我不能，因为我不知道在 LuaEclipse 中哪里可以找到 Project Files 的位置，以便放置 .lua 文件和其他文件在里面。

我是初学者，所以如果问题不清楚，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:39:05.583

LuaEclipse 不是用于编写 Lua 应用程序的工具。或者至少，不是以您尝试使用它的方式。它是一个 IDE，但由于 Lua 是一种脚本语言，因此您需要一个运行时才能使 Lua 脚本真正工作。

或者换一种说法，LuaEclipse 和 Corona 做了完全不同的事情。你不能用 LuaEclispe 替换 Corona。Corona 是使用 Lua 编写应用程序的运行时。LuaEclispe 只是一个为 Lua 语言提供支持的 Eclipse 插件。它不提供实际的运行时。

# php - 如何在同一天获得两个时间之间的时差？

> ID：11808249
> 
> 赞同：1
> 
> 时间：2012-08-04T11:23:50.870
> 
> 标签：php, model-view-controller, codeigniter

我是 CodeIgniter 和 PHP 的新手。
在我的数据库中，我将用户状态存储在 IN 时间和 Out Time 中。我想计算该时间意味着用户在特定日期登录的时间。用户可能登录多次或在特定日期注销。
如何计算时间？

时间格式为=04:06:37。如果用户在 04:06:37 登录并在 04:09:37 注销，则时间差为 3 分 0 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T11:28:58.193

该[`DateTime::diff()`](http://at2.php.net/manual/en/datetime.diff.php)功能可以满足您的需求。

例如

```
$login    = new DateTime('2012-09-04 14:00:00');
$logout   = new DateTime('2012-09-04 16:00:00');
$interval = $logout->diff($login);
echo $interval->format('%H hours %i minutes %s seconds'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T11:28:50.053

使用 将时间转换为时间戳[`strtotime()`](http://php.net/manual/en/function.strtotime.php)，然后从原始时间减去最近的时间。例如;

```
$to_time = strtotime("04:09:37");
$from_time = strtotime("04:06:37");
$time_diff = $to_time - $from_time;
echo gmdate('H:i:s', $time_diff); 
```

# c# - 从 _layout.cshtml 中的数据库加载数据

> ID：11808254
> 
> 赞同：2
> 
> 时间：2012-08-04T11:25:12.117
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我正在使用 ASP.NET MVC 4 创建一个 Web 应用程序。

我想在所有页面上显示用户的昵称，所以我必须将它加载到`_layout.cshtml`.

请注意，我正在手动存储用户的昵称。（在我自己的数据库和我自己的表中。）

我可以通过添加用户的用户名`Membership.GetUser().UserName`，但我想从数据库中加载他的昵称并将其显示在`_layout.cshtml`.

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T11:59:12.507

让我为您提供一个简单的解决方案：在控制器中编写一个动作（我的是 CommonController）：

```
 public ActionResult NickName()
    {
        SqlConnection cn = new SqlConnection(cnstr);
        SqlCommand cmd = new SqlCommand(cmdStr, cn);
        cn.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        string nickName = string.Empty;

        while (dr.Read())
        {
            nickName = dr["nick_Name"].ToString();
        }

        dr.close()
        return Content(nickName);
    } 
```

将下面的行放在 _Layout 中您想要的任何位置：

```
 nickname = @{Html.RenderAction("NickName", "Common");} 
```

完成的！

感谢@SergRogovtsev 的推荐：

```
 nickname = @Html.Action("NickName", "Common") 
```

**先问：** 你用的是实体框架吗？您可以使用 EF 或 ADO 在 _Layout 中使用部分视图。如果您的意思是您无法使用实体框架访问 aspnet_membership 表，您应该以另一种方式提出您的问题！

通过提供一些代码示例，让我更多地了解您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T07:40:29.370

我建议您在登录时将用户名存储在会话变量中（这是通过访问 Session 对象来完成的，该对象实现了键=值对架构，允许您随意存储和检索数据）。必须为每个加载的页面进行数据库调用会拖累性能，并且会话中的单个昵称字符串变量不会占用服务器上的那么多空间。

至于加载变量，您可以使用 Vahid 发布的代码，但如果您的网站仍处于起步阶段，我会建议您花额外的时间来学习和实施 Entity Framework。它更干净、更容易，微软确实在朝着这个方向推动数据连接管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T11:28:36.043

我使用了 Mr_Creostoe 和 Vahid 答案的组合。

我在会话中保存昵称（如 Mr_Cresotoe 所说），如果没有这样的会话（例如，如果用户勾选*记住我*复选框并在多次访问后），我将使用`RenderAction`. （正如瓦希德所说）。

谢谢你们！

# google-app-engine - 即使遵循 DKIM 程序，来自 Google App Engine 的电子邮件也会进入垃圾邮件文件夹

> ID：11808255
> 
> 赞同：4
> 
> 时间：2012-08-04T11:25:17.593
> 
> 标签：google-app-engine

在[另一篇文章](https://stackoverflow.com/questions/11774590/mails-sent-from-gae-go-in-the-spam-folder-of-hotmail-even-after-editing-spf-reco/11793615#11793615)中，我想知道是否有人也有来自 Google App Engine 的电子邮件最终进入 Hotmail 的垃圾邮件文件夹。

感谢社区的帮助，我可以找到解决问题的方法。我确实留下了原始帖子，因为它解决了一组电子邮件系统（例如 free.fr）的问题。

然而，不幸的是，修复是部分的，它仍然是 hotmail 的问题。一旦这个问题得到解决，我将更新最初的帖子。

您将在下面找到最终位于 Hotmail 垃圾邮件文件夹中的邮件。

对我来说看起来很奇怪的是：

*   昨天我在电子邮件中有“dkim=pass”的地方进行了测试。今天其他测试有“dkim=temperror”。虽然昨天我有“dkim=pass”，但邮件最终进入了垃圾邮件文件夹
*   今天我有“dkim=temperror”，我不明白这是什么意思

有没有人有一些想法？越来越难以理解为什么它适用于除 hotmail 之外的所有电子邮件系统。

谢谢，

雨果

x-store-info:4r51+eLowCe79NzwdU2kR3P+ctWZsO+J 认证结果：hotmail.com；sender-id=pass（发件人IP为209.85.213.207）header.from=admin@plugsystems.com；**dkim=温度错误**header.d=plugsystems.com；x-hmca=pass X-SID-PRA: admin@plugsystems.com X-Message-Status: n:0:n X-SID-Result: Pass X-DKIM-Result: TempError X-AUTH-Result: PASS X-消息送达：Vj0xLjE7dXM9MDtsPTA7YT0wO0Q9MjtHRD0yO1NDTD00 X-消息的信息：o9rlR4nWDTdAvwKKkW + ebjaNRBhWfirkKplRTvFb0jLyKfWDD1CiQJSrYGPEuh2GOIiEGly1AGxiI / aHFqM5d3PpaLYYerrWHzwUPlyoEy9CbytLpScTK1Jq + 2 / GQW4lIqYx3o3TG40EkcgVaBPqlw ==接收：从mail-yx0-f207.google.com（[209.85.213.207]）通过BAY0-MC3-F27.Bay0。 hotmail.com 与 Microsoft SMTPSVC(6.0.3790.4900)；2012 年 8 月 4 日星期六 03:55:31 -0700 接收：yenl5 与 SMTP id l5so28780yen.6 为 ; 2012 年 8 月 4 日星期六 03:55:31 -0700 (PDT) DKIM-签名：v=1；一个=rsa-sha256；c=放松/放松；d=plugsystems.com；s=谷歌；h=mime-version:reply-to:x-google-appengine-app-id:message-id:date:subject:from:to: 内容类型：内容传输编码；bh=euOvGlAMboKg1Q3U9r2HjPZ7pOICyqvz1yxwQnTnDp8=; B = VLAlR0aAgxPJ / A3E + ZgWuZWXb3ZgocGXCPcp / 4B0mLeCnI02mmohF6TLm2wMj1O8Od HW8H6EIujSK / oirDJSAyyqN5 / u1vhL3Bs0B2lafJjBVDkSsL1mP7DBIj6HMKrQpd6cee B + URUbQ0tT8cadBoilvBxklEbt6d2XKFl5qBw = MIME-版本：1.0收到的：通过用10.236.116.74 SMTP ID f50mr2524543yhh.33.1344077731015; 2012 年 8 月 4 日星期六 03:55:31 -0700 (PDT) 回复：Plugimmo X-Google-Appengine-App-Id：s~plugimmo 消息 ID：<20cf303dd262b52b2404c66e7b3a@google.com> 日期：星期六，8 月 4 日2012 10:55:31 +0000 主题：Plugimmo 从：Plugimmo 到：Olivier Truemath 内容类型：文本/纯文本；字符集=ISO-8859-1；格式=流动；delsp=yes 内容传输编码：base64 返回路径：3o_8cUAgJEJwLHQCEIIKCI6EH.8KIKHEREAN.PNQAI6PDDKPI6EH.BN@M3KW2WVRGUFZ5GODRSRYTGD7.apphosting。

Qm9uam91ciwNCkxlIGJ1dCBkZSBjZXQgZW1haWwgZXN0IGRlIHbpcmlmaWVyIHF1ZSB2b3VzIGF2 ZXogZWZmZWN0aXZlbWVudCBkZW1hbmTpICANCmFjY + hzIGF1IHNlcnZpY2UgUGx1Z2ltbW8gcG91 ciBsJ2VtYWlsIDogb2xpdmllci50cnVlbWF0aEBob3RtYWlsLmZyDQpTaSB2b3VzIGF2ZXogZWZm ZWN0aXZlbWVudCBkZW1hbmTpIGFjY + hzIGF1IHNlcnZpY2UgcGx1Z2ltbW8sIHZldWlsbGV6ICAN CmNsaXF1ZXIgc3VyIGxlIGxpZW4gY2ktZGVzc291cyBwb3VyIGNvbmZpcm1lciB2b3RyZSBkZW1h bmRlDQpodHRwOi8vcGx1Z2ltbW8uYXBwc3BvdC5jb20vcGx1Z2ltbW8vdmVyaWZ5RW1haWw / Y29k ZT03MjJjNGFhM2NhYTlhNWZlNTIzZTVjZDU3OTQxZjdlOA0K

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T13:34:07.760

我不确定 DKIM temperror，但请查看第 3 步。“设置 SenderID 记录” [http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send- some-email-through-code.html](http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html)。我认为 hotmail 特别使用 SenderID，这可能是您的邮件成为垃圾邮件的原因。

另请查看[http://mailchimp.com/about/authentication/](http://mailchimp.com/about/authentication/)，其中显示了哪些邮件服务器使用每种身份验证的细分。

祝你好运，罗伯

**编辑：**

如果您仍然在 Hotmail 中将邮件发送到垃圾邮件时遇到问题，请查看 Microsoft 提供的[此资源](https://support.msn.com/eform.aspx?productKey=edfsjmrpp&ct=eformts&scrx=1)。该资源提供了一套服务来帮助您找出为什么您的邮件被垃圾邮件，以及帮助您阻止您的邮件成为垃圾邮件的工具。

上的链接摘要包括：

*   [加入垃圾邮件报告计划以接收有关您的垃圾邮件的更新](https://support.msn.com/eform.aspx?productKey=edfsjmrpp&ct=eformts)
*   [加入 Smart Sender Service 以查看 Hotmail 过滤器如何对 IP 范围、邮件等进行评级/查看](http://postmaster.live.com/snds)
*   [可交付性问题提交](https://support.msn.com/eform.aspx?productKey=edfsmsbl2&ct=eformts)
*   [向安全列表发件人提供第三方服务](http://g.live.com/9wc9en-us/senderscore)

# android - 从android中的存档解压缩单个文件

> ID：11808259
> 
> 赞同：4
> 
> 时间：2012-08-04T11:25:25.000
> 
> 标签：android, archive, compression

我有一个大档案（在我的情况下是 zip），大小约为 100MB，其中包含约 15000 个文件。我需要从这个档案中快速提取一个文件。

我尝试了下一个代码：

```
final String zipPath = "archive.zip";
FileInputStream fin = new FileInputStream(zipPath);

in = new ZipInputStream(fin);

for (ZipEntry entry = in.getNextEntry(); entry != null; entry = in.getNextEntry()) {
    if(entry.equals("file.name")){
    //unzip this entry
    break;
}
} 
```

它有效，但太慢了。

在存档中找到必要文件是否有另一种可能性？例如，在 linux 上，使用命令可以非常快

```
unzip archive.zip myfile.name 
```

一般来说，我需要从某个存档中找到并解压缩一个文件。它可以是另一种格式......可能是另一种格式，它可以更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:32:10.130

您可以使用[libzip 库](http://www.nih.at/libzip/)。

# c++ - 将 MFC 应用程序从 Visual Studio 2010 编译到 2012 RC 会导致 LNK2038

> ID：11808260
> 
> 赞同：5
> 
> 时间：2012-08-04T11:25:41.427
> 
> 标签：c++, visual-studio-2010, mfc, linker-errors, visual-studio-2012

我的项目在 VS 2010 的调试和发布模式下编译并运行正常。今天我尝试用 VS 2012 编译它，但出现此错误：

```
1>  Generating Code...
1>pcrecppd.lib(pcrecpp.obj) : error LNK2038: mismatch detected for '_MSC_VER': 
value '1600' doesn't match value '1700' in NamesEditorDlg.obj 
```

我在代码中搜索了“_MSC_VER”，但找不到任何匹配项。我也找不到“1600”或“1700”。

所以我想知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T20:32:10.803

看起来您在 vc2012 中使用来自 vc2010 的 .lib（猜测它看起来像一个 PCRE 库）。您需要重新编译所有 .lib 或使用 DLL 的运行时链接（即 LoadLibrary、GetProcAddress 等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T19:03:37.747

在项目属性中，选择常规，然后将“平台工具集”设置更改为“Visual Studio 2010 (v100)”。在我这样做之后，我的代码使用原始库编译得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T13:43:25.677

在[http://msdn.microsoft.com/en-us/library/b0084kay.aspx](http://msdn.microsoft.com/en-us/library/b0084kay.aspx)查看它似乎该变量包含编译器的版本号。我认为修复它的最佳方法是在 2012 年创建一个新项目并将源文件添加到新项目中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:25:07.960

不，您只需要检查项目的属性。存在指向旧项目文件的链接。需要在“.NET Framework 和链接”页面上打开项目属性，所有链接结束为新的 2012 项目文件添加新的。

# javascript - 为什么 ("a" in ["a","b"]) 产生假，而 (1 in [1,2]) 产生真？

> ID：11808263
> 
> 赞同：1
> 
> 时间：2012-08-04T11:26:17.390
> 
> 标签：javascript, match

> **可能重复：**
> [运算符中的 javascript](https://stackoverflow.com/questions/9635914/javascript-in-operator)

为什么`("a" in ["a","b"])`yield`false`和`(1 in [1,2])`yield `true`？有没有理由`"a"`不匹配该数组的第一个元素而 1 匹配？为什么它不适用于字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T11:28:27.017

[`in`运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)通过键而不是值检查属性是否存在。并且您的长度为 2 的数组*有一个索引`"1"`*-`arr["1"]`是值`2`。例如，`0 in ["a", "b"]`也是`true`。该行为不依赖于正在使用的字符串或数字。

您通常会在普通对象上使用它，而不是在数组上。像`"a" in {a:1} === true`，或`"b" in {a:1} === false`。

# c# - 这段代码的含义是什么？(IEnumerable 查询 = 来自列表中的编号）

> ID：11808270
> 
> 赞同：2
> 
> 时间：2012-08-04T11:26:42.267
> 
> 标签：c#, .net, linq, ienumerable

这个东西的意思是什么：

```
IEnumerable<int> query = from num in list
                         where num < 3
                         select num; 
```

这是[IEnumerable<T>](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)的对象吗？

任何人都可以描述一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T11:50:45.740

你知道正常的方法语法，对吧？之类的东西`list.Add(10)`。Microsoft 的一些聪明人指出，许多集合和列表存在相似之处。人们可能喜欢做一些事情，比如选择某些值并对应该适用于*所有*集合的值求和，而不需要每个集合都为其提供方法。

因此，他们引入了*扩展方法*，即只定义一次但可以应用于特定类型的所有对象（例如集合）的方法。例子是[`list.Where`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where.aspx)和[`list.Sum`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)。要使用扩展方法，您必须[添加定义它们的命名空间](https://stackoverflow.com/a/11784165/146622)。扩展方法采用 lambda 表达式，该`Where`表达式在集合的每个元素上执行。

假设您有一些整数列表：

```
List<int> list = new List<int>();
list.Add(-1);
list.Add(0);
list.Add(1);
list.Add(2);
list.Add(3);
list.Add(4); 
```

然后，我以前必须编写以下代码来仅获取小于三的整数：

```
List<int> query = new List<int>();
foreach(var nr in list)
{
    if (nr < 3)
        query.Add(nr);
} 
```

现在，使用扩展方法，我可以这样写：

```
IEnumerable<int> query = list.Where(nr => nr < 3); 
```

枚举时，`query`只会返回`list`小于三的整数。这些扩展方法是 LINQ（[语言集成查询](http://msdn.microsoft.com/en-us/library/bb397933.aspx)）的一部分。

但是，为了使 LINQ 更易于使用，他们设计了一种新语法。使用这种新语法，LINQ 更易于阅读和编写。

```
IEnumerable<int> query = from nr in list
                         where nr < 3
                         select nr; 
```

编译器采用新语法并将其转换为前面提到的包含该`Where`方法的代码。你看，它只是让处理集合更容易的语法糖。

该[`IEnumerable<int>`接口](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)是任何可以枚举的对象的通用接口。最简单的枚举形式是`foreach`对对象进行操作，它会一一返回它包含的所有整数。因此，LINQ 查询返回*一些 object*，但您不知道确切的类型。但是你知道它可以被枚举，这使得它非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T11:50:48.580

这是一个 linq 等价于 say

```
IEnumerable<int> GetLessThanThree(IEnumerable<int> list)
{
   foreach(int num in list)
   {
     if (num < 3)
     {
        yield return num
     }
   }
} 
```

或者如果你还没有达到收益

```
IEnumerable<int> GetLessThanThree(IEnumerable<int> list)
{
   List<int> result = new List<int>();
   foreach(int num in list)
   {
     if (num < 3)
     {
        result.Add(num);
     }
   }
   return result;
} 
```

# java - 在 jsf 中的类型上找不到属性

> ID：11808272
> 
> 赞同：9
> 
> 时间：2012-08-04T11:27:03.003
> 
> 标签：java, jsf, jakarta-ee, jsf-2, primefaces

我正在尝试调用 jsf 中使用 primefaces 的属性。但我在 managedbean.PersonelBean 类型上找不到错误 500。我正在使用休眠 jsf 和 spring。

PersonelBean.java

```
@ManagedBean(name="personelMB")
@SessionScoped
public class PersonelBean implements Serializable{
    private static final long serialVersionUID = 1L;

    @ManagedProperty(value="#{PersonelService}")
    IPersonelService personelservice;
    List<Personel> personelList;

    private int personel_id;
    private String pname;
    private String pfamily;
    private String paddress;
    private String pphone;
    public IPersonelService getPersonelservice() {
        return personelservice;
    }
    public void setPersonelservice(IPersonelService personelservice) {
        this.personelservice = personelservice;
    }
    public List<Personel> getPersonelList() {
        personelList=new ArrayList<Personel>();
        personelList.addAll(getPersonelservice().getPersonels());
        return personelList;
    }
    public void setPersonelList(List<Personel> personelList) {
        this.personelList = personelList;
    }
    //getter and setter method

    public void addPersonel(){
        Personel personel=new Personel();
        personel.setPaddress(getPaddress());
        personel.setPersonel_id(getPersonel_id());
        personel.setPfamily(getPfamily());
        personel.setPname(getPname());
        personel.setPphone(getPphone());
        getPersonelservice().addPersonel(personel);
    }

} 
```

个人资料.xhtml

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="rtl" 
xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
 xmlns:f="http://java.sun.com/jsf/core"
 xmlns:fn="http://java.sun.com/jsp/jstl/functions"
>
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>اطلاعات پرسنلی</title>
</h:head>
<h:body>
<h1>اضافه کردن پرسنل جدید</h1>
        <h:form>

            <h:panelGrid columns="4" >
              شماره پرسنلی : 
                <h:inputText id="id" value="#{personelMB.personel_id}" 
                    size="20" required="true"
                    label="id" >
                </h:inputText>
                <br></br>
                نام : 
                <h:inputText id="name" value="#{personelMB.pname}" 
                    size="20" required="true"
                    label="Name" >
                </h:inputText>

                 نام خانوادگی: 
                <h:inputText id="family" value="#{personelMB.pfamily}" 
                    size="20" required="true"
                    label="family" >
                </h:inputText> 

                آدرس : 
                <h:inputTextarea id="address" value="#{personelMB.paddress}" 
                    cols="30" rows="10" required="true"
                    label="Address" >
                </h:inputTextarea>

          تلفن:  
                <h:inputText id="tel" value="#{personelMB.pphone}" 
                    size="20" required="true"
                    label="tel" >
                </h:inputText> 
            </h:panelGrid>

            <h:commandButton value="درج اطلاعات" action="#{personelMB.addPersonel()}" />

        </h:form>
 <h2>مشاهده اطلاعات پرسنل</h2>  
 <h:form prependId="false">  

    <p:dataTable id="dataTable" var="personel" value="#{personelMB.getPersonelList()}">  

        <f:facet name="header">  
            اطلاعات پرسنل 
        </f:facet>  

        <p:column>  
            <f:facet name="header">  
               شماره پرسنلی  
            </f:facet>  

            <h:outputText value="#{personel.personel_id}" />  

            <f:facet name="footer">  
                کدملی 
            </f:facet>  
        </p:column>  

        <p:column headerText="نام">  
            <h:outputText value="#{personel.pname}" />  
        </p:column>  

        <p:column headerText="نام خانوادگی">  
            <h:outputText value="#{personel.pfamily}" />  
        </p:column>  

        <p:column headerText="آدرس">  
            <h:outputText value="#{personel.paddress}" />  
        </p:column>  
   <p:column headerText="تلفن">  
            <h:outputText value="#{personel.pphone}" />  
        </p:column>
        <f:facet name="footer">  
            In total there are #{fn:length(personelMB.getPersonelList())} personels.  
        </f:facet>  

    </p:dataTable>  

</h:form>  

</h:body>
</html> 
```

但我有这个错误：

```
description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

javax.servlet.ServletException: /personel.xhtml @58,88 value="#{personelMB.getPersonelList()}": Property 'getPersonelList' not found on type managedbean.PersonelBean
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:321)

root cause 

javax.el.PropertyNotFoundException: /personel.xhtml @58,88 value="#{personelMB.getPersonelList()}": Property 'getPersonelList' not found on type managedbean.PersonelBean
    com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:97)
    org.primefaces.component.api.UIData.isLazyLoading(UIData.java:170)
    org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:187)
    org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:107)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:879)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1650)
    javax.faces.render.Renderer.encodeChildren(Renderer.java:164)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:849)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1643)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1646)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1646)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:389)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:127)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:117)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:135)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:309) 
```

我不知道出了什么问题，但我的 addPersonel() 效果很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T11:38:08.777

属性值表达式需要在以下语法中指定，不带`get`(or `is`) 前缀和括号：

```
value="#{personelMB.personelList}" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T11:39:59.757

查看您的其他 gettes 和 setter，并查看对异常的解释。

> /personel.xhtml @58,88 value="#{personelMB.getPersonelList()}"：在 managedbean.PersonelBean 类型上找不到属性“getPersonelList”

您正在为 的其他属性使用正确的 JSF EL（这个东西：#{...}）`PersonelBean`：

*   `#{personelMB.pname}`-> 转换为 personelMB.getPname()
*   `#{bean.property}' -> bean.getProperty()

但突然你正在使用：

```
personelMB.getPersonelList() 
```

你应该使用

```
#{personelMB.personelList} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-08T07:11:43.257

你可以工作`#{#{personelMB.getPersonelList()}`，但你应该需要添加两个 jar 文件`el-ap-SNAPSHOT.jar`和`el-impl-SNAPSHOT.jar`.

# facebook - 内置对象类型“链接”的自定义操作被拒绝

> ID：11808276
> 
> 赞同：-1
> 
> 时间：2012-08-04T11:27:16.433
> 
> 标签：facebook, facebook-opengraph

我正在尝试为我的应用程序中的内置对象类型“链接”创建自定义操作“查看”，该操作发布到时间线，用户“查看”“链接”。但是，在提交此操作以供审核​​时，它被拒绝并出现以下错误：

`You are trying to submit a custom action which is not permitted. Please delete this action and submit a built-in version of this action instead.`

“链接”的内置操作是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:45:13.600

尝试创建一个名为 OpenGraph 的操作`visited`，看看它是否有效。可能比`view`.

# java - 如何将 TwitterFeed (JSON) 解析为自定义列表视图？

> ID：11808279
> 
> 赞同：2
> 
> 时间：2012-08-04T11:27:43.267
> 
> 标签：java, android, json, listview, twitter

我从教程 How to parse JSON data into a Custom Listview 中得到了一个代码

这是教程中的代码，有一些修改：

```
public class TwitterParseHandler extends Activity {
ArrayList<TwitterFeed> arrayOfWebData = new ArrayList<TwitterFeed>();

class TwitterFeed {
    public String text;
    public String created_at;
}

FancyAdapter aa=null;

static ArrayList<String> resultRow;

public void onCreate(Bundle savedInstanceState) {
    try
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_twitter_parse_handler);
        String result = "";

        try
        {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=3FMNu&count=20&exclude_replies=True");
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            InputStream webs = entity.getContent();

            try
            {
                BufferedReader reader = new BufferedReader(new InputStreamReader(webs, "iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "/n");
                }

                webs.close();
                result=sb.toString();
            }catch(Exception e){
                Log.e("log_tag", "Error in converting result "+e.toString());
            }
        }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
        }

        try
        {
            JSONArray jArray = new JSONArray(result);
            for (int i=0;i<jArray.length();i++)
            {
                JSONObject json_data = jArray.getJSONObject(i);
                TwitterFeed resultRow = new TwitterFeed();
                resultRow.text = json_data.getString("text");
                resultRow.created_at = json_data.getString("created_at");

                arrayOfWebData.add(resultRow);
            }
        }catch(JSONException e){
            Log.e("log_tag", "Error in parsing data "+e.toString());
        }

        ListView myListView = (ListView)findViewById(R.id.list);

        aa=new FancyAdapter();

        myListView.setAdapter(aa);
    }
    catch(Exception e){
        Log.e("ERROR", "ERROR IN CODE: "+e.toString());
        e.printStackTrace();
    }
}

class FancyAdapter extends ArrayAdapter<TwitterFeed> {
    FancyAdapter() {
        super(TwitterParseHandler.this, android.R.layout.simple_list_item_1, arrayOfWebData);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView==null) {
            LayoutInflater inflater=getLayoutInflater();
            convertView=inflater.inflate(R.layout.twitterlist, null);

            holder=new ViewHolder(convertView);
            convertView.setTag(holder);
        }
        else
        {
            holder=(ViewHolder)convertView.getTag();
        }
        holder.populateFrom(arrayOfWebData.get(position));

        return(convertView);
    }
}

class ViewHolder {
    public TextView name=null;
    public TextView birthday=null;

    ViewHolder(View row) {
        name=(TextView)row.findViewById(R.id.TwitterText);
        birthday=(TextView)row.findViewById(R.id.TwitterDatum);
    }

    void populateFrom(TwitterFeed r) {
        name.setText(r.text);
        birthday.setText(r.created_at);
    }
}
} 
```

我已经用我的 twitterfeed 替换了教程中的 JSON（工作正常）：[https ://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=3FMNu&count=20&exclude_replies=True](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=3FMNu&count=20&exclude_replies=True)

并将属性从`name`and更改`birthday`为`text`and `created_at`，现在当我调试它时，我收到以下错误：

```
08-04 12:36:40.539: E/log_tag(4599): Error in parsing data org.json.JSON
Exception: Value 
{ "error": "This method requires a GET.",
  "request":"\/1\/statuses\/user_timeline.json?include_entities=true&include_rts=true&screen_name=3FMNu&count=20&exclude_replies=True"
} of type org.json.JSONObject cannot be converted to JSONArray 
```

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:47:57.880

尝试：

```
HttpGet httpGet = new HttpGet(https://api.twitter.com/1/statuses/user_timeline.json); 
```

带参数：

```
List<NameValuePair> params = new LinkedList<NameValuePair>();
params.add(new BasicNameValuePair("include_entities", true));
... 
```

也试试[如何在 Android 中向 HTTP GET 请求添加参数？](https://stackoverflow.com/questions/2959316/how-to-add-parameters-to-a-http-get-request-in-android)

# javascript - 动态添加绑定（例如 hasfocus）到可观察数组中的特定项目

> ID：11808288
> 
> 赞同：1
> 
> 时间：2012-08-04T11:29:20.163
> 
> 标签：javascript, knockout.js

我正在使用 knockoutJS 来处理表格中网站名称和 URL 对的可编辑列表 - 下面有一个按钮可以添加新项目。我的代码基于[列表和集合教程](http://learn.knockoutjs.com/#/?tutorial=collections)。

```
....
<tbody data-bind="foreach: website">
 <tr>
  <td><input data-bind="value: name, hasfocus: true" /></td>
  <td><input data-bind="value: url" /></td>
  <td><a href="#" data-bind="click: $root.removeWebsite">Remove</a></td>
 </tr>
</tbody>
</table>

<button data-bind="click: addWebsite" class="btn">Add another</button> 
```

注意我使用`hasfocus: true`这样每次添加一个新的空白字段时，他们不必用鼠标单击它。您还将在下面的代码（来自 viewmodel 函数）中看到，在允许人们添加另一个文本框之前，我正在检查列表中最后一个文本框的内容。

```
// Add and remove
self.addWebsite = function() {

    var length = self.website().length;
    if (self.website()[length - 1].name == '') {
        // Last site in list has no name, don't allow them to add another
        return false;
    }

    self.website.push(new dashboardApp.website());
} 
```

有没有办法在运行时更改绑定 - 所以我可以将最后一个项目焦点作为提示用户他们应该填写它而不是创建更多的空白行，例如：

```
self.website()[length - 1].name.hasfocus = true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:30:14.173

您可以通过使用可观察对象来绑定`hasfocus`而不是仅绑定`hasfocus: true`.

我喜欢做这样的事情的一种方法是`focused`在字段的主要可观察对象之外添加一个子可观察对象。就像是：

```
var Site = function(name, url) {
    this.name = ko.observable(name);
    this.name.focused = ko.observable(true);

    this.url = ko.observable(name);
}; 
```

然后，绑定 like`data-bind="value: name, hasfocus: name.focused"`并在您的检查中设置焦点 observable 以确保 last name 为空 like `name.focused(true)`。

这是一个示例：http: [//jsfiddle.net/rniemeyer/NkYR5/](http://jsfiddle.net/rniemeyer/NkYR5/)

如果您的`name`和`url`不是可观察的，那么您可以添加另一个专门用于控制焦点的可观察。

# sql - 如何在 SQL 中增加数据库值？

> ID：11808290
> 
> 赞同：0
> 
> 时间：2012-08-04T11:29:33.153
> 
> 标签：sql

我遇到了投票系统的问题，特别是在投票功能中。

如何在数据库中制作类似 votes++ 的内容，而无需在单个查询中选择最后一票？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T11:33:57.090

```
UPDATE myTable
  SET voteCol = voteCol + 1
  WHERE id = idOfInterest; 
```

# javascript - 默认事件发生后如何执行我自己的代码？

> ID：11808292
> 
> 赞同：0
> 
> 时间：2012-08-04T11:29:41.647
> 
> 标签：javascript, jquery

是否有一个函数可以在默认事件发生后执行一些代码？例如，我想在默认鼠标滚轮发生后获取 scrollTop 值。jquery 或 javascript 可以为我做这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T11:31:58.437

There is a broad range of event handlers in jQuery. You can use `.scroll()` to respond to scroll event. [Full list of events [handlers]](http://api.jquery.com/category/events/).

```
$(window).scroll(function() {
  alert('scrolled!');
}); 
```

[`scroll()`](http://api.jquery.com/scroll/):

> A scroll event is sent whenever the element's scroll position changes, regardless of the cause. A mouse click or drag on the scroll bar, dragging inside the element, pressing the arrow keys, or using the mouse's scroll wheel could cause this event.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:35:24.783

```
​$(document)​.on('mousewheel DOMMouseScroll', function() {
    var top = $(this).scrollTop();
    console.log(top);
})​;​ 
```

[小提琴](http://jsfiddle.net/98Mse/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T11:37:18.873

鼠标滚轮处理可能有点痛苦。您可能应该尝试使用 jQuery Mousewheel 插件。

[Brandon Aaron 的这个](http://brandonaaron.net/code/mousewheel/demos)在过去对我很有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T11:41:32.873

我正在使用 Brandon Aaron 的 jquery.mousewheel.js 来附加这样的事件：

```
$('#mydiv').mousewheel(function(event, delta, deltaX, deltaY) { alert(deltaY); }); 
```

你可以从[https://github.com/brandonaaron/jquery-mousewheel/downloads下载它](https://github.com/brandonaaron/jquery-mousewheel/downloads)

# javascript - 获取数据库表上每一行的值

> ID：11808293
> 
> 赞同：0
> 
> 时间：2012-08-04T11:30:15.123
> 
> 标签：javascript, jquery, yii, datatables

我有这个 Jquery 代码，如果我点击它的行，它应该会给我一个列的结果。我正在使用 Yii，但问题主要出在 Jquery 上。

```
$(document).on('click', 'td.myLink a', function(){
    $('input[name=\"ECCategory[ParentID]\"]').val($('#mainID').html());

        $('.search-form form').submit();
}); 
```

这就是我所拥有的。无论我点击哪一行，它都会给我第一行（mainID 列）的结果。例如，我想要的是单击第 5 行并获取第 5 行的 mainID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:41:34.940

ID 是唯一的。所以只有一个元素可以有 id `mainID`。您可能希望`$(this)`在[`click`](http://api.jquery.com/click/)事件中使用从选定元素中进行搜索。例如：

```
$(function($){
    $('td.myLink a').click(function(){
        var tr = $(this).parent().parent(); // selected row
        // get columns that you want from selected row using tr.find('...')
        // ...
    }
}); 
```

# java - 关于自定义比较器

> ID：11808295
> 
> 赞同：0
> 
> 时间：2012-08-04T11:30:17.693
> 
> 标签：java, collections

我正在尝试开发一个应用程序，其中 arraylist 将按名字排序，如果两个人的名字相同，那么将根据他们的薪水进行进一步比较，为此必须进行比较，请告知如何制作那个自定义比较器..下面是我现在的程序仪式，它现在只是比较薪水仪式的基础......！

```
 package saxbean;

class Emp //implements Comparable
{
      String name,job;
      int salary;
      public Emp(String n,String j,int sal)
      {
         name=n;
         job=j;
         salary=sal;
       }
      public void display()
      {
        System.out.println(name+"\t"+job+"\t"+salary);
       }
     public boolean equals(Object o)
      {

         Emp p=(Emp)o;
          return this.name.equals(p.name)&&this.job.equals(p.job) &&this.salary==p.salary;
       }
     public int hashCode()
       {
          return name.hashCode()+job.hashCode()+salary;
       }

      /* public int compareTo(Object o)
       {
          Emp e=(Emp)o;
          return this.name.compareTo(e.name);
           //return this.job.compareTo(e.job);
        //   return this.salary-e.salary;

        }*/
} 
```

我的比较器是...

```
import java.util.Comparator;

    class SalaryComparator implements Comparator {
        public int compare(Object paramObject1, Object paramObject2) {
            Emp localEmp1 = (Emp) paramObject1;
            Emp localEmp2 = (Emp) paramObject2;
            return localEmp1.salary - localEmp2.salary;
        }
    } 
```

我的主要课程是...

```
class EmpListDemo
{
      public static void main(String arg[])
      {
          List  list=new ArrayList ();
          list.add(new Emp("Ram","Trainer",34000));
          list.add(new Emp("Sachin","Programmer",24000));
          list.add(new Emp("Ram","Trainer",34000));
          list.add(new Emp("Priyanka","Manager",54000));
          list.add(1,new Emp("Ravi","Administrator",44000));
          list.add(new Emp("Anupam","Programmer",34000));
          list.add(new Emp("Priyanka","Manager",54000));
          list.add(new Emp("Sachin","Team Leader",54000));
          System.out.println("There are "+list.size()+" elements in the list.");

          //original list
          System.out.println("Content of list are : ");
          ListIterator itr1=list.listIterator();
          while(itr1.hasNext())
          {
            Emp e=(Emp)itr1.next();  
            e.display();
          }           

          System.out.println("*****************");

          System.out.println("Sort Object according to Salary");
          Collections.sort(list,new SalaryComparator());
          System.out.println("Content of list are : ");
           itr1=list.listIterator();
           while(itr1.hasNext())
           {
             Emp e=(Emp)itr1.next();  
             e.display();
           }
          }
} 
```

但是请告知如何开发一个应用程序，其中arraylist 将按名字排序，如果两个人的名字相同，那么将根据他们的薪水进行进一步的比较..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:42:07.927

```
class SalaryComparator implements Comparator {
        public int compare(Object paramObject1, Object paramObject2) {
            Emp localEmp1 = (Emp) paramObject1;
            Emp localEmp2 = (Emp) paramObject2;
            int result = localEmp1.getName().compareTo(localEmp2.getName());
            if (result == 0) {
                result = localEmp1.salary - localEmp2.salary;
            }
            return result;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:44:43.597

我猜你是这样的...

```
public class SalaryComparator implements Comparator<Emp> {

  @Override
  public int compare(Emp o1, Emp o2) {
    int result = o1.name.compareTo(o2.name);
    return result != 0 ? result : o1.salary - o2.salary;
  }
}

class Emp {
  String name;
  int salary;
} 
```

# javascript - 单击连接的可排序对象时查找列表文本

> ID：11808296
> 
> 赞同：0
> 
> 时间：2012-08-04T11:30:33.767
> 
> 标签：javascript, jquery, jquery-ui

我已经连接了可排序列表，我想要一个回调函数来双击列表元素。有没有一种标准的方法来确定被点击的项目的 html/text 内容是什么？我在 chrome 上执行以下操作，但它不适用于 Firefox。

```
//when element is dropped in connected sortable
ui.item[0].ondblclick = wordClicked;

function wordClicked(e) {
    console.log(e.srcElement.innerText);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:39:48.277

我会使用 jQuery 方法，因为 jQuery 可以在所有浏览器上运行。

对于您的双击事件处理程序，您可以使用此[http://api.jquery.com/dblclick/](http://api.jquery.com/dblclick/)

要获取元素的文本，您可以使用此[http://api.jquery.com/text/](http://api.jquery.com/text/)

我创建了这个 jsFiddle，它显示了这两种方法的工作原理[http://jsfiddle.net/davew9999/7cQXX/](http://jsfiddle.net/davew9999/7cQXX/)

**HTML**

```
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
</ul>

<div id="result"></div>​ 
```

**JavaScript**

```
$("ul li").dblclick(function() {
    $("#result").text("You double clicked " + $(this).text());
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:55:17.910

在这种情况下，狐狸不支持“innerText”

# javascript - VS可以在发布时更改我的js中的变量值吗

> ID：11808297
> 
> 赞同：3
> 
> 时间：2012-08-04T11:30:33.707
> 
> 标签：javascript, visual-studio-2010, ide, publish

我运行 VS2010 Web Developer 并将一个 javascript 变量设置为一个值以进行测试。当我发布我的作品时，我认为该变量应该是另一个影响最终行为的值。所以，在*rumpa.js*文件中，我有以下内容。

```
$(document).ready(function () {
  var iable = "test value";
  ...} 
```

但是，就在我执行发布之前，我*手动*编辑了该行，使其如下所示。

```
$(document).ready(function () {
  var iable = "publish value";
  ...} 
```

它工作得很好，除了我经常忘记改变`iable`，`"publish value"`直到一个不满意的客户来电。这不是最佳的开发技术。

我可以以某种方式让 VS 更改我的源代码，这样我就不必这样做了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:13:05.337

您可以使用配置转换文件。这样，您可以为每个发布配置文件设置不同的设置。更多信息可以在这里找到：http: [//blog.hmobius.com/post/2010/02/17/ASPNET-40-Part-4-Config-Transformation-Files.aspx](http://blog.hmobius.com/post/2010/02/17/ASPNET-40-Part-4-Config-Transformation-Files.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-23T05:25:54.827

Rob Angelier 的回答中引用的链接对我不起作用。由于我今天正在寻找同样的问题，我发现你可以使用#DEBUG：

```
#if DEBUG
    var iable = "test value";
#else
    var iable = "publish value";
#endif 
```

但是，我有时需要将调试版本发布到此方法不允许的服务器。因此，您可以检查服务器名称：

```
var iable;
if (window.location.hostname=="localhost")
{
    var iable = "test value";
} else
{
    var iable = "publish value";
} 
```

或者在 Angular 中，我将服务用作：

```
(function () {
    "use strict";

    angular
        .module("common.services", ["ngResource"])
        .constant("appSettings",
        {
            commonsetting: false,
        });

    if (window.location.hostname=="localhost")
    {
        // local dev settings
        angular
            .module("common.services", ["ngResource"])
            .constant("appSettings",
            {
                iable = "test value";
            });
    } else
    {
        // remote settings
        angular
            .module("common.services", ["ngResource"])
            .constant("appSettings",
            {
                var iable = "publish value";
            });
    }
}()); 
```

希望这可以节省一些时间。

# objective-c - 为什么基于自动布局的 NSWindow 在缩放后重绘不正确？

> ID：11808299
> 
> 赞同：2
> 
> 时间：2012-08-04T11:30:49.643
> 
> 标签：objective-c, xcode, cocoa, autolayout

我从 Xcode 中的标准 Cocoa 应用程序模板创建了一个应用程序，并将其设置为使用自动引用计数。

我添加的只是 MainMenu.xib 中窗口的工具栏和表格视图。如果我此时运行应用程序，应用程序如下所示：

![在此处输入图像描述](../Images/e348b79c203824682525118c105e5875.png)

然后我单击标题栏中的绿色缩放按钮。该窗口随后最大化并填满整个桌面。然后我再次单击缩放按钮。窗口缩小到原来的宽度，而不是原来的高度。它没有最大化时的高度，但比原始高度高得多：

![在此处输入图像描述](../Images/b9fc2355edcacaaa775b0b1d42f6a3dd.png)

然后我右键单击工具栏并将其隐藏。工具栏动画消失，但随后立即再次可见。但是，不能单击按钮，也不能通过拖动来移动窗口。就好像工具栏实际上已停用一样。为了说明这一点，如果在这种状态下调整窗口大小，它看起来像这样：

![在此处输入图像描述](../Images/426e326903bfbd07fa6c81c9d706af0d.png)

为什么会发生这种情况，我应该怎么做才能防止它发生？我使用的是 OS X 10.8 和 Xcode 4.4，而不是开发者预览版。

**更新：**（2013 年 4 月）看起来[这实际上是 Cocoa 中的一个错误](http://lists.apple.com/archives/cocoa-dev/2012/Aug/msg00152.html)。:-(

**更新：**（2013 年 6 月）从 10.8.4 开始，我无法再重现此问题。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:33:20.630

您可以尝试在您的 .xib 文件文件检查器中禁用“使用自动布局”，这是 Xcode 4.4 中的一个新功能，可能会导致您的 Windows 行为。

# android - getting UUIDs from G- Shock watch bluetooth android

> ID：11808302
> 
> 赞同：16
> 
> 时间：2012-08-04T11:31:03.617
> 
> 标签：android, bluetooth, uuid, bluetooth-lowenergy

I am working on Bluetooth Low Energy in Android. I want to get the `UUIDs` of remote device when the device is paired. I have found that `BluetoothDevice.getUuids()` will give the `UUIDs` of a remote device. I have used that in the settings application of **ICS**. I am able to get the `UUIDs` of classic device and dongle which is a Low energy device. But I am not able to get the `UUIDs` of a **casio watch** which is also a low energy.

Can you please help me on this issue?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-27T13:10:39.110

`BluetoothDevice.getUuids()`此方法不会启动服务发现过程以从远程设备检索 UUID。而是返回服务 UUID 的本地缓存副本。

`fetchUuidsWithSdp()`如果需要新的 UUID，请使用。愿这有帮助

# java - in jdt how to retrieve the absolute path of a jar if it is linked to the project?

> ID：11808303
> 
> 赞同：0
> 
> 时间：2012-08-04T11:31:12.783
> 
> 标签：java, jar, eclipse-jdt

i am writing a plugin for eclipse 4.2 that will upload the jars the user adds to a project. in order to do this i need to want to retrieve the location of the jars in the class path. the problem is that as far as i can see IJavaProject doesn't make the distinction between a linked jar and a copied one. so when i use IClasspathEntry to retrieve the location of the jar the returned value is a location in the project and not the jars true location.

does any one know how can i retrieve it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:42:14.667

我认为您正在寻求一种方法来查找项目内部 jar 的文件系统位置。

Eclipse 工作区使用本地文件系统的抽象，它与实际文件系统相似但不同。有一些 API 可以从文件系统位置转换`IResource`为文件系统位置。

通常，调用`IClasspathEntry`时将返回工作空间相关的位置`getPath`。因此，要获取类路径条目的文件系统位置，请执行以下操作：

```
ResourcesPlugin.getWorkspace.getRoot().getFile(entry.getPath()).getLocation(); 
```

# asp.net-mvc - How can I avoid getting the "Potentially dangerous request" error with json <> MVC3 or MVC4?

> ID：11808304
> 
> 赞同：2
> 
> 时间：2012-08-04T11:31:37.543
> 
> 标签：asp.net-mvc, asp.net-mvc-3

I am using Json to send update information to the following controller action:

```
 [HttpPost]
    public JsonResult JsonUpdate(string pk, string rk, string fld, string val) {
        Content content = null;
        try {
            if (fld == "TempRowKey") {
                content = contentService.Get(pk, rk);
                rk = utilityService.DotFormatToRowKey(val);
                contentService.UpdateRowKey(content, rk, User.Identity.Name);
            } else { 
```

I realize it's an added protection in MVC that's causing the problem but I need to be able to pass HTML code in the val argument and I am getting the following error:

```
A potentially dangerous Request.Form value was detected from the client (val="...e HashMap <K,V>, LinkedHashMap..."). 
```

Note that the is valid text that an admin person entered. This screen is only used by admins and so I am okay with no protection for the field.

Looks like there were some changes between MVC2, 3 and 4\.

What are the ways I can avoid this problem with MVC3 and MVC4\. I saw there's another post like mine on stackoverflow but it does not really address the problem.

Note I am looking for something local that I can apply to just this action. I saw some suggestions on the web but it looks like there's confusion between how to handle this with the different MVC versions. Is the best way to encode and decode the data and if so how could I do that?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T11:37:17.177

```
[ValidateInput(false)]
public JsonResult JsonUpdate(string pk, string rk, string fld, string val)
{
    ... 
```

但是，您也应该能够执行以下操作：

```
public class MyJsonUpdateModel
{
    public string pk { get; set; }
    public string rk { get; set; }
    public string fld { get; set; }

    [AllowHtml]
    public string val { get; set; }
}

// [ValidateInput(false)] not needed because model states HTML is allowed
public JsonResult JsonUpdate(MyJsonUpdateModel model)
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:12:39.430

```
public class MyModel{
  [AllowHtml]
  public string  Text{get;set;}
} 
```

您需要将 [AllowHtml] 属性添加到该字段。还要确保你没有向 Action 添加 FormCollection 模型，你可以看到 [https://stackoverflow.com/a/4866070/1431191](https://stackoverflow.com/a/4866070/1431191)

# service - 如何通过 chromedriver selenium 禁用定位服务？

> ID：11808310
> 
> 赞同：6
> 
> 时间：2012-08-04T11:32:25.317
> 
> 标签：service, selenium, location, selenium-chromedriver

我正在使用 selenium 2 - Webdriver、Chromedriver、Java。我的一项测试需要关闭 Chrome 上的定位服务。

我注意到默认情况下，位置服务是打开的 Chromedriver。

我想知道是否有办法在 chromedriver 上禁用定位服务？

提前谢谢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-12T16:17:02.767

是的，这是可能的。按以下方式使用 ChromeOptions 类：

```
 ChromeOptions options = new ChromeOptions();

 JSONObject jsonObject = new JSONObject();
 jsonObject.put("profile.default_content_settings.geolocation", 2);

 options.setExperimentalOption("prefs", jsonObject);
 WebDriver driver = new ChromeDriver(options); 
```

[您可以在此处](http://code.google.com/p/chromedriver/issues/detail?id=138)将其视为问题的答案

# .net - Aborting blocking thread

> ID：11808311
> 
> 赞同：3
> 
> 时间：2012-08-04T11:32:47.967
> 
> 标签：.net, multithreading

I have a thread that is blocking on a Networkstream `Read` call. How do I best abort this thread? I tried calling `Thread.Abort` on the thread from another thread, which according to MSDN should raise a `ThreadAbortException`. However the `ThreadAbortException` is not raised at all in the thread. It is however, when I remove the blocking `Read` call and just have the thread sit in a loop. What is the best way to do this? Can I wait on the `Read` call and an event at the same time so the thread unblocks if either occurs? Then I could just signal that event from another thread.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T11:36:51.093

关闭插座！然后 Read 应该抛出一个异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:32:09.950

`Thread.Abort`仅在线程运行托管代码时中止，但您的线程正在等待非托管套接字，因此在套接字解除阻塞之前不会发生任何事情。

关闭套接字是这里的最佳选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T16:19:00.597

放

```
stream.ReadTimeout = timeout; 
// timeout in ms 
```

使用前

```
stream.Read(.... 
```

这将强制读取超时，并允许在指定*超时*（以毫秒为单位）没有读取任何内容时执行某些操作。请参阅[Stream::ReadTimeout 属性](http://msdn.microsoft.com/en-us/library/system.io.stream.readtimeout.aspx)或MSDN 上[的这篇文章](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/1ab61b3a-823c-4785-b130-d5d253f11d4d)。这样，您可以实现仅在指定*timeout*阻塞的读取。使用其他同步方法来确定是应该继续读取还是应该完成线程。超时会抛出异常。

# java - VLCJ fails to toggle fullscreen

> ID：11808314
> 
> 赞同：1
> 
> 时间：2012-08-04T11:33:10.477
> 
> 标签：java, netbeans, netbeans-plugins, vlcj

if i directly use vlcj to show full screen then it's ok,but when i initially set a fixed size and later on the fly set it to full screen then it losts it's rendering, code:

* * *

```
 panel_canvas=new JPanel(new BorderLayout());
    panel_canvas.add(windowsCanvas,BorderLayout.CENTER);
    mediaPlayerFactory = new MediaPlayerFactory("--no-video-title-show");
    mediaPlayer = mediaPlayerFactory.newEmbeddedMediaPlayer();    
    mediaPlayer.setVideoSurface(mediaPlayerFactory.newVideoSurface(windowsCanvas));
    frame.setContentPane(panel_canvas);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        
    frame.setLocationRelativeTo(null);
    frame.setSize(600,500);
    frame.setVisible(true); 
```

* * *

but if i use a process when press "enter" it will be full screen then it fails

```
 frame.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released ENTER"), "RELEASED_ENTER");
        frame.getRootPane().getActionMap().put("RELEASED_ENTER", new AbstractAction() {            
        @Override
        public void actionPerformed(ActionEvent e) {                
        if(!frame.isUndecorated()){
           pres_size=frame.getSize();               
           prev_location=frame.getLocation();
           frame.dispose();
           frame.setUndecorated(true);
           frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
           frame.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:57:44.777

I apply the following method in my code to toggle full-screen in Swing:

```
int lastState = 0;
Rectangle lastBounds = null;

private void toggleDecoration(boolean decorated) {
    dispose();
    if (decorated) {
        //save last bounds and its extended state
        lastState = getExtendedState();
        lastBounds = getBounds();
        try{
            setExtendedState(getExtendedState() | JFrame.MAXIMIZED_BOTH);
        }
        catch(Exception ev){
            setBounds(getGraphicsConfiguration().getDevice().getDefaultConfiguration().getBounds());
            ev.printStackTrace();
        }
    }
    else {
        //restore last bounds and its extended state
        setBounds(lastBounds);
        setExtendedState(lastState);
    }
    setUndecorated(decorated);
    setVisible(true);
} 
```

Usage:

```
decorated = !decorated;
toggleDecoration(decorated); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T00:41:30.013

我有同样的问题，并以这种方式解决：

```
 @SuppressWarnings("deprecation")
	public static void toogleFullScreen(JFrame mainWindow) {
		boolean isPlaying = mainWindow.mediaPlayer.isPlaying();
		if (isPlaying) {
			mainWindow.mediaPlayer.stop();
		}
		if (!mainWindow.isUndecorated()) {
			mainWindow.dispose();
			mainWindow.setAlwaysOnTop(true);
			mainWindow.setUndecorated(true);
			GraphicsEnvironment.getLocalGraphicsEnvironment()
					.getDefaultScreenDevice().setFullScreenWindow(mainWindow);
			BufferedImage cursorImage = new BufferedImage(1, 1,
					Transparency.TRANSLUCENT);
			mainWindow.setCursor(Toolkit.getDefaultToolkit()
					.createCustomCursor(cursorImage, new Point(0, 0),
							"InvisibleCursor"));
			mainWindow.setVisible(true);
			mainWindow.repaint();
		} else {
			GraphicsDevice device = GraphicsEnvironment
					.getLocalGraphicsEnvironment().getDefaultScreenDevice();
			DisplayMode modo = device.getDisplayMode();
			mainWindow.dispose();
			mainWindow.setAlwaysOnTop(false);
			mainWindow.setUndecorated(false);
			mainWindow.setBounds(modo.getWidth() / 2, modo.getHeight() / 2,
					modo.getWidth() / 2, modo.getHeight() / 2);
			device.setFullScreenWindow(null);
			mainWindow.setCursor(Cursor.DEFAULT_CURSOR);
			mainWindow.setVisible(true);
			mainWindow.repaint();
		}
		if (isPlaying) {
			mainWindow.mediaPlayer.start();
		}
	}
```

您只需要在设置全屏时停止播放器。

# css - Image overlapping in sencha touch's carousel

> ID：11808317
> 
> 赞同：0
> 
> 时间：2012-08-04T11:33:30.953
> 
> 标签：css, sencha-touch, extjs, carousel

I created carousel which loads many images. However, each image is overlapping to another image from different card as shown here:
![card_1](../Images/4e46ab9a9fdb02a52bf4311bb30fa7e4.png) ![card_2](../Images/5b23e5a08a8091435e82de7d5fc6bb9d.png) ![card_3](../Images/4b1956b4316e618b7f21910d345f1bde.png)

As you can see in the screenshot, some part of the first image appear in the second card and so on.

This is how I put the image inside a "html" component within carousel's item:

```
html: '<div> <img src="'+avaImg+'" />' 
```

Is there any way to make the image fit into the screen regardless the resolution of the phone?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:09:51.750

嗨@tukang你可以尝试创建css类，像这样，

```
.your_name {
   background-image: url(your_url_image);
   background-repeat: no-repeat;
   background-position: center;
} 
```

然后把它放在你的html标签上`<div class="your_name"></div>`

**我希望能帮助你。:)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:20:26.287

为什么不在[`Ext.Image`](http://docs.sencha.com/touch/2-0/#!/api/Ext.Img)Sencha Touch 2 中使用组件？

然后，您可以使用[`style`](http://docs.sencha.com/touch/2-0/#!/api/Ext.Img-cfg-style)config.xml 将自定义样式应用于该图像。

# c# - 根据签入表单在 html 电子邮件模板中将复选框标记为 true

> ID：11808318
> 
> 赞同：0
> 
> 时间：2012-08-04T11:33:43.120
> 
> 标签：c#, javascript, asp.net, html

我必须发送一封包含一些复选框的电子邮件。我的 aspx 表单也有相同的复选框，这些复选框位于 html 电子邮件模板中，但表单复选框是 asp 控件。

如果用户勾选了 1 个复选框并且未选中其他复选框，那么我如何将检查值发送到 html 模板并进入 html 模板并选择，根据用户在表单中的选择取消选中 html 模板中的复选框。

html 复选框和 aspx 表单复选框都具有相同的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:35:42.237

您如何生成和格式化电子邮件？你是在 VB.NET/C# 中用 System.Net.Mail 做的吗？如果您按照我认为的方式进行操作，我认为您最好的选择是在使用模板格式化电子邮件正文时传递一组真/假值，并选中/取消选中电子邮件中的复选框使用这些值。例如：

```
//Determine which checkboxes are checked and add them to the array.
Dim checkedBoxes New ArrayList
checkedBoxes.Add(IIf(chk_first.Checked, "checked", ""))
checkedBoxes.Add(IIf(chk_second.Checked, "checked", ""))
checkedBoxes.Add(IIf(chk_third.Checked, "checked", ""))

//Then you'd have your email generation code here. This is only the body part of it.
email.Body = String.Format(File.ReadAllText([YourTemplateFile]), checkedBoxes.ToArray()) 
```

当然，我在这里做了很多假设。然后，在您的模板文件中，每个检查的值将使用数组中的真/假值，因此第一个将具有：

```
<input type="checkbox" name="check1" value="check1" {0} /> 
```

我希望这有帮助。如果我不合适，请发布您用于生成和发送电子邮件的代码，我将能够提供更多帮助。

# .htaccess - .htaccess rewrite is resulting in 404

> ID：11808319
> 
> 赞同：0
> 
> 时间：2012-08-04T11:33:53.240
> 
> 标签：.htaccess, rewrite, http-status-code-404

I have my .htaccess set up to rewrite 'friendly URLs' - the first is working perfectly and rewrites as it should, however the second, which is written in exactly the same way does not work and results in a 404\. I'm not sure where I'm going wrong.

The following rewrites correctly to mysite.com/1:

```
# Setup conditions for internal rewrite of DYHAMB
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Rewrite for DYHAMB
RewriteRule ^(0|[1-9]\d{0,2})$ /episode.php?episode=$1&podcast=DYHAMB [L,QSA]
# External redirect for DYHAMB
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+episode\.php\?episode=(\d+)\&podcast\=DYHAMB [NC]
RewriteRule ^ /%1? [R=301,L] 
```

However this should rewrite to mysite.com/new/1 but actually returns 404:

```
# Setup conditions for internal rewrite of new
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Rewrite for new
RewriteRule ^(0|[1-9]\d{0,2})$ /episode.php?episode=$1&podcast=new [L,QSA]
# External redirect for new
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+episode\.php\?episode=(\d+)\&podcast\=new [NC]
RewriteRule ^ /new/%1? [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:44:34.610

您需要匹配重定向 URI 的“新”部分：

```
RewriteRule ^new/(0|[1-9]\d{0,2})$ /episode.php?episode=$1&podcast=new [L,QSA] 
```

# sql - Encapsulation of multiple sub-system

> ID：11808324
> 
> 赞同：0
> 
> 时间：2012-08-04T11:34:29.210
> 
> 标签：sql, sql-server-2008

We are looking to develop a offer calculation system which is backed by different kind of bid systems. Here are DB table structure for two bid system A & B,

```
BidSystemA - It stores list of Bids through Bid System A
-------------------
Id - int Primary Key
BidAmount - money

BidSystemA_Region - Each Individual Bid can have more than one region
------------------
StateCode - varchar(2)
Id - ForeignKey to BidSystemA

Make_Master
----------------------
Make - varchar(100) i.e Apple
Id - Primary Key

BidSystemA_Makes - Each Individual Bid can have more than one Makes
-------------------------
Make - Foreign Key to Make_Master
Id - Primary Key

BidSystemB - It stores list of Bids through Bid System B
-------------------
Id - int Primary Key
BidAmount - money

Feature_Master
----------------------
Id - Primary Key
Feature - varchar(50) i.e Has Camera, Has Touch Interface etc.

BidSystemB_Features - Each Individual Bid can have more than one features
------------------
Features - varchar(50)
Id - ForeignKey to Feature_Master

Screen_Dimension_Master
--------------------
Screen_Dimension - varchar(50) i.e 480x240

BidSystemB_Dimension - Each Individual Bid can have more than one Dimensions
-------------------------
Screen_Dimension - Foreign Key to Screen_Dimension_Master
Id - Primary Key 
```

Now, I have sellers proving bidding through Bid System A & B. If a customer comes in to search to sell product then we need to present highest bid with help of both bid systems. We need to fire Query on Both system parallely and show highest Bid to customer.

I am looking design solution using SQL Server database features only.

I have two questions:

1.  How can achieve parallelism in the database (Query multiple bid system at a time)?
2.  Should I use View to aggregate multiple sub-system results and always query against view?

# c++ - directshow render

> ID：11808325
> 
> 赞同：0
> 
> 时间：2012-08-04T11:34:29.593
> 
> 标签：c++, graphics, directshow

hi every one this is my first post here . i got a misunderstanding of the DirectShow the First at all is the render : here is the question if i create a stream where it should appear . should i create `IVideoWindow * pointerV;` and create the window form by hand "from scratch" ? because i need to create a sophisticated GUI and *coding it will be mission impossible V*.

i am using VC++ ; i wondering if is it possible to use the winFrame directly with all .net 's components and combine the all with directShow functionality ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:28:40.590

您只需添加并连接一个 Video Renderer 过滤器，它将创建窗口。然后从此过滤器或图形对象本身请求 IVideoWindow 接口（如果图形中只有一个视频渲染器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T00:49:58.783

您可以创建 GUI 并渲染到该 GUI 中的任何组件。您只需提供该 GUI 元素的句柄，这样您就可以拥有不可能的 GUI 以及直接显示。

对于 .Net 组件，我相信最好的方法是使用 .net（比如 c# .net），您可以使用名为 dshow.net 的直接显示包装器，它使事情变得非常容易，因为您使用的是 C# 并获得了 Direct show 的强大功能，但请请注意，这会在尝试实现高级功能时偶尔引起问题。但我仍然认为这是使用 dshow 的好方法。

但是，如果您打算使用 directshow 并且有一个非常复杂的 ui ，让我建议另一种使用直接显示的方法。使用框架 Qt 使用 vc++ 编译器。

抱歉，我无法正确回答您的问题，但希望对您有所帮助。

# java - 无法找出此 java 代码片段中的异常

> ID：11808326
> 
> 赞同：0
> 
> 时间：2012-08-04T11:34:33.410
> 
> 标签：java

我已经尝试过这个代码片段，但无法弄清楚这个异常的原因。

我的代码是：-

```
import java.util.*;
class ScannerTest
{
 public static void main(String[]args)
  {
    String csv = "Sue,5,true,3";
    Scanner sc = new Scanner(csv);
    sc.useDelimiter(",");
    int age = sc.nextInt();
    System.out.println(age);
  }
} 
```

输出是： -

```
Exception in thread "main" java.util.InputMismatchException
    at java.util.Scanner.throwFor(Unknown Source)
    at java.util.Scanner.next(Unknown Source)
    at java.util.Scanner.nextInt(Unknown Source)
    at java.util.Scanner.nextInt(Unknown Source) 
```

我是java新手，所以请帮助我了解这个异常的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T11:41:42.597

在 javadoc 示例中，您可以看到它是如何工作的：

```
String input = "1 fish 2 fish red fish blue fish";
     Scanner s = new Scanner(input).useDelimiter("\\s*fish\\s*");
     System.out.println(s.nextInt());
     System.out.println(s.nextInt());
     System.out.println(s.next());
     System.out.println(s.next());
     s.close(); 
```

你的第一个标记是一个字符串。如果您使用 next int 它需要一个整数。你可能想要使用这样的东西（在你知道 csv 的结构并且它不会改变的条件下）：

```
public static void main(String[]args)
      {
        String csv = "Sue,5,true,3";
        Scanner sc = new Scanner(csv);
        sc.useDelimiter(",");
        sc.next();
        int age = sc.nextInt();
        System.out.println(age);
      } 
```

或者

```
public static void main(String[] args) {
        String csv = "Sue,5,true,3";
        String ageString = csv.split(",")[1];
        System.out.println(ageString);
    } 
```

...

将字符串解析为 int：

```
int age = Integer.parseInt(ageString); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T11:39:31.727

Scanner[的 nextInt 方法的 Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextInt%28int%29)状态

> 将输入的下一个标记扫描为 int。如果下一个标记无法转换为有效的 int 值，则此方法将抛出 InputMismatchException，如下所述。如果翻译成功，扫描仪会超过匹配的输入。

由于您的第一个令牌是一个字符串，这就是正在发生的事情。在大多数情况下，在 CSV 中，您会知道将呈现什么，您应该逐一阅读它们，和/或使用[hasNextInt](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextInt%28%29)方法及其朋友来检查您所期望的是否真的存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T11:38:29.510

扫描仪需要一个整数类型，但第一个标记是一个字符串 - `"Sue"`，要修复，放置：

```
sc.next(); // skip "Sue" 
```

在调用 nextInt() 以使用 String 令牌之前。

# java-me - 如何在 j2me 中运行 LWUIT RssReader 示例应用程序

> ID：11808328
> 
> 赞同：0
> 
> 时间：2012-08-04T11:34:39.683
> 
> 标签：java-me, lwuit

我找到了一个使用 lwuit 创建 Rss 阅读器的示例应用程序，示例应用程序 url 是

“https://projects.developer.nokia.com/LWUIT_for_Series_40/browser/IO/src/com/sun/lwuit/io/ui/RSSReader.java”

我已经浏览了代码，但是在这个示例中，没有创建 Midlet，并且在 lwuit jar 文件中找不到以下类的一些类

```
 import com.sun.lwuit.io.NetworkEvent;
    import com.sun.lwuit.io.NetworkManager;
    importcom.sun.lwuit.io.services.RSSService;
    import com.sun.lwuit.layouts.BoxLayout;
    import com.sun.lwuit.list.DefaultListModel; 
```

谁能指导我在我的设备上成功执行此示例应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:55:37.563

`com.sun.lwuit`您可以从 svn checkout获取所有源代码。网址[https://svn.java.net/svn/lwuit~svn](https://svn.java.net/svn/lwuit~svn)看一下 LWUIT_1_5 根文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:47:22.563

我也经历过这个问题。对于 lwuit.jar，您可以采用两种方式： (1) 下载 subversion 存储库的源代码（由 Telmo 响应）并在 NetBeans IDE 中编译文件；或 (2) 获取已由某人编译的 LWUIT 版本。

要使用 NetBeans 开放源代码，请转到：NetBeans IDE 菜单 / Team / Subversion / Checkout /

使用以下 URL 访问源代码：

[https://svn.java.net/svn/lwuit~svn](https://svn.java.net/svn/lwuit~svn)（匿名）

或 SSH URL（需要 SSH 密钥）：svn+ssh://@svn.java.net/lwuit~svn

导入所有项目（如 UI、IO ......并构建它）之后。（需要 WTK 2.5.2 参考 - 在项目属性中），可以在他们的示例中使用新的库。

# c# - The name 'ClientScript' does not exist in the current context

> ID：11808329
> 
> 赞同：20
> 
> 时间：2012-08-04T11:34:47.343
> 
> 标签：c#, javascript, asp.net

I have a behindcode javascript. it is to show a javascript dialog box.

however, it keep show this error

```
The name 'ClientScript' does not exist in the current context 
```

This code was put inside masterpage. I had also use the exactly same code at other aspx file, and it work out fine apart from this..

here is my code:

```
 protected void Button2_Click(object sender, EventArgs e)
    {
        string message = "Order Placed Successfully.";
        System.Text.StringBuilder sb = new System.Text.StringBuilder();
        sb.Append("<script type = 'text/javascript'>");
        sb.Append("window.onload=function(){");
        sb.Append("alert('");
        sb.Append(message);
        sb.Append("')};");
        sb.Append("</script>");
        ClientScript.RegisterClientScriptBlock(this.GetType(), "alert", sb.ToString()); string script = "alert('abc');";

    } 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-04T11:42:03.650

尝试：

```
Page.ClientScript 
```

而是看看它是否有所作为。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-21T14:58:01.670

对于cs文件，示例是；

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "{some text for type}", "alert('{Text come to here}'); ", true); 
```

对于masterpage cs，示例是；

```
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "{some text for type}", "alert('{Text come to here}'); ", true); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T11:40:48.857

在母版页上尝试`ScriptManager.RegisterStartupScript()`。请注意，签名与 . 略有不同`Page.ClientScript.RegisterClientScriptBlock()`。

*   [ScriptManager 类](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.aspx)的文档

# android - How to partially update views in an app widget without rebuilding all the RemoteViews

> ID：11808331
> 
> 赞同：5
> 
> 时间：2012-08-04T11:34:52.770
> 
> 标签：android, android-layout, android-widget, remoteview

I'm implementing an app widget and I'd like to be able to change the property of a single view in the widget layout, without rebuilding all the `RemoteViews` from scratch, which involves loading XML etc and which is not necessary in some circumstances.. Is there a way to say "update property X on view identified by a specific ID in the current widget layout"? I've seen that there is a `partiallyUpdateAppWidget` method in the `AppWidgetManager` class but I can't understand nor if it is meant for this purpose neither how it must be used.. Can you help me or point me to a useful link or example?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-04T03:50:34.373

是的，您可以`partiallyUpdateAppWidge`在`AppWidgetManager`课堂上使用 t 方法。例如，如果要更新小部件内的文本视图：

```
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
rv = new RemoteViews(context.getPackageName(), R.layout.widgetlayout); 
rv.setTextViewText(R.id.ofTextViewInWidgetLayoutXML, "Hello World");
appWidgetManager.partiallyUpdateAppWidget(appWidgetIds, rv); 
```

参考： [只是更新一个小部件 RemoteViews 而不是完全创建一个新的？](https://stackoverflow.com/questions/4528824/just-update-a-widget-remoteviews-instead-of-completly-creating-a-new-one)

# javascript - "Wrapper" TinyMce Custom Plugin

> ID：11808334
> 
> 赞同：1
> 
> 时间：2012-08-04T11:35:10.453
> 
> 标签：javascript, tinymce

Maybe you guys can help me. I am trying to create a custom plugin for TinyMce that basically wraps my selection like so:

`<div class="myClass" >` *content* `</div>`

Sort of like how the bold button works. I don't know a lot of javascript and the current plugins are really confusiong so im wondering if anyone can tell me how to do it. I have already created my custom plugin and made it show up on TinyMce, so that part is done, I just need the method.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:15:15.630

包装选择不是一个大问题 - 如果您的 html 根元素是`<p>`. 否则它将无法正常工作。

这是必要的代码：

```
var ed = tinymce.get('my_editor_id');
var content = ed.selection.getContent();
tinymce.execCommand('insertHTML', false, '<div class="myClass">'+content+'</div>'); 
```

请注意，仅选择段落的一部分时可能会遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T17:57:24.703

这是我的做法：

```
 this.editor = ed;

        ed.addCommand('mceblizzardquote', function () {

            var se = ed.selection.getContent();

            if (se.trim() == "") {
                alert("Nothing Selected.");
                return;
            }

            var s1 = '<div class="myClass" >';
            s1 += se + '</div>';

            ed.selection.setContent(s1);
        }); 
```

# batch-file - create a folder name variable dos command

> ID：11808335
> 
> 赞同：0
> 
> 时间：2012-08-04T11:35:13.670
> 
> 标签：batch-file, cmd

i want to create a batch file

```
@echo off
set /p name="Type folder name(s):
md %name%
cd p:\%name% 
```

all lines work, but i cannot change the directiory to `cd p:\%name%` when i run the script thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:47:09.493

您需要`cd /d`更改到另一个驱动器上的目录：

```
cd /d p:\%name% 
```

# concurrency - erlang vs golang

> ID：11808341
> 
> 赞同：4
> 
> 时间：2012-08-04T11:36:13.867
> 
> 标签：concurrency, erlang, go

我打算学习一门新语言以获得更好的并发性。

Erlang 是一种古老但功能强大的语言，具有支持其整个并发系统的运行时以及著名的库 OTP。这更像是JVM。

Go 是另一种擅长并发的语言，而它更像 C。

我的主要领域是关于 C/S 和 B/S。我应该更喜欢什么？

# php - MySQL - 3 列数据。需要所有 3 列共有的数据计数，以及数据本身

> ID：11808347
> 
> 赞同：0
> 
> 时间：2012-08-04T11:37:13.643
> 
> 标签：php, mysql

我有一个 3 列 x、y、z 的表。这些行包含数据。有时数据的值是重复的。

需要知道哪些数据是重复的和计数。这个简化的示例只有几个数据值。

实际上，该表还有几个其他列和一个主键，并且 x,y,z 中通常没有数据。该查询将通过 php 调用。

桌子：

```
x y z
a
  b 
    c
  a d
    a
a b a 
```

所需的 MySQL 查询结果：

```
Data Count
a    5 
b    2
c    1
d    1 
```

如果有人可以提供帮助，将不胜感激。已经为此奋斗了几个小时，但进展不快。

干杯，

彼得

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T11:41:03.113

您可以使用此解决方案：

```
SELECT   a.data,
         COUNT(*) AS Count
FROM     (
         SELECT x AS data FROM tbl WHERE x IS NOT NULL UNION ALL
         SELECT y         FROM tbl WHERE y IS NOT NULL UNION ALL
         SELECT z         FROM tbl WHERE z IS NOT NULL
         ) a
GROUP BY a.data 
```

这将所有三列的值合二为一，因此它变成了一个简单的`GROUP BY`and `COUNT`。

# php - 对象到数组的转换作为单独的函数而不是作为对象方法

> ID：11808350
> 
> 赞同：0
> 
> 时间：2012-08-04T11:37:38.607
> 
> 标签：php, arrays, recursion, map

我对 API 的 json 数据进行了 json 解码，并希望将对象转换为 array 。我写了一个类函数来做到这一点。这个功能是

```
public function objectToArray($result) {
    if (is_object($result)) {
        $result = get_object_vars($result);
    }
    if (is_array($result)) {
        return array_map( @$this->objectToArray, $result);
    }
    else {
        // Return array
        return $result;    
    }
} 
```

所以上面的代码不起作用。它只转换了“第一层”对象，而不是对象数组的对象（我说的是嵌套数组和对象）。但是，当我在类外声明函数 objectToArray 并将 array_map 的参数更改为“objectToArry”时，它突然开始工作。怎么会 ？PHP 类中的递归函数是否存在问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T11:43:33.260

有什么问题：

```
json_decode($input,true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:44:38.420

在 PHP 中，`$this->objectToArray`是对该名称的属性的引用，而不是对您期望的函数的引用。您需要传递一个带有对象实例和方法名称的数组：

```
return array_map(array($this, 'objectToArray'), $result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T11:47:11.973

当您想使用对象的方法作为回调时，您必须传递一个数组：

```
array_map(array($this, 'objectToArray'), $result); 
```

如果您没有使用`@`操作员抑制错误，PHP 可能会告诉您。

# r - 我如何访问检查包裹时可能出现的任何注释？

> ID：11808354
> 
> 赞同：3
> 
> 时间：2012-08-04T11:38:10.837
> 
> 标签：r, devtools

运行`R CMD check`时，可能会收到错误、警告或注释。我想检查是否生成了 NOTE，如果是，则以编程方式访问 NOTE 的内容。

我的目标是查看是否生成了一个说明，表明 CRAN 上尚不存在提交。我知道还有其他方法可以检查，但是重新发明轮子似乎很可惜，因为`devtools::check()`如果是这样的话，已经生成了一条消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T13:33:13.197

好吧，R 是开源的，这来自文件`src/library/tools/R/build.R`. 那么为什么不从那里开始呢？

```
edd@max:~/src/debian/R/R-2.15.1/src/library/tools/R$ grep '"NOTE' build.R 
    resultLog(Log, "NOTE")
                     sprintf("NOTE: There were %d notes.\n",
                     sprintf("NOTE: There was 1 note.\n"))
edd@max:~/src/debian/R/R-2.15.1/src/library/tools/R$ 
```

# android - 在服务中处理 KILL 信号？

> ID：11808356
> 
> 赞同：0
> 
> 时间：2012-08-04T11:38:37.780
> 
> 标签：android, linux, process

我是安卓开发新手。我们的要求是在android中运行一个后台服务。这是无法杀死的，或者它能够处理来自任务管理器的 KILL 信号。

有什么办法吗？

我听说过 addShutdownHandler，但是当用户杀死它时它不会被触发。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T11:45:42.813

> 有什么办法吗？

只需构建您自己的自定义 Android 版本，使用标准 C/C++ 守护程序中的代码，然后分发包含该自定义 Android 版本的 ROM 模块。

如果您尝试创建一个普通的 SDK 应用程序，用户或 Android 本身可以随时出于任何原因摆脱您的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:46:50.320

一般来说：不可能。

我应该补充一点，试图强加这样的要求会让你听起来很邪恶——允许用户杀死进程是有原因的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T11:48:32.467

来自`man 7 signal`：

> 信号 SIGKILL 和 SIGSTOP 不能被捕获、阻止或忽略。

这基本上是内核设计的。想一想：如果一个进程可以忽略所有信号，那么如果它不受控制地逃跑，你将如何阻止它？不，您需要做的是确保不发送 KILL 信号。只要没有具有管理权限的人生成信号，在其自己的用户 ID 下运行您的程序应该可以实现这一点——但即使是这个要求实际上也可能无法满足。通过设计，系统提供了杀死进程的基本能力，理论上用户或系统管理员可能（无论出于何种原因）希望进程被杀死。

# parsing - 在 C# 中解析 A SPX 页面

> ID：11808359
> 
> 赞同：-2
> 
> 时间：2012-08-04T11:39:56.470
> 
> 标签：parsing

如何将这样的 ASPX 页面解析为：[http](http://www.shufersal.co.il/Pages/Catalog.aspx#) ://www.shufersal.co.il/Pages/Catalog.aspx#到 C# 中的字符串？这个网站是购物网站，我想从中获取一些详细信息，例如产品名称和价格？请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:43:13.813

您可以为此使用 HTML Agility Pack。更多信息可以在这里找到：

[http://www.google.nl/url?sa=f&rct=j&url=http://www.4guysfromrolla.com/articles/011211-1.aspx&q=html+agility+pack+tutorial&ei=hwodUKGlHu220QWJmYBo&usg=AFQjCNH4auAyTI9GTpM2cistPrGGnMHLeg](http://www.google.nl/url?sa=f&rct=j&url=http://www.4guysfromrolla.com/articles/011211-1.aspx&q=html+agility+pack+tutorial&ei=hwodUKGlHu220QWJmYBo&usg=AFQjCNH4auAyTI9GTpM2cistPrGGnMHLeg)

也有一些可用的例子。如果您熟悉 linq to X 查询，那么它非常易于使用。

# javascript - 使用瀑布方法时，async.js 返回最后一个值

> ID：11808361
> 
> 赞同：1
> 
> 时间：2012-08-04T11:40:05.330
> 
> 标签：javascript, node.js, async.js

全部。最后我使用 asyncjs 的 waterflow 方法返回 res 值。但是下面的代码返回未定义的值。

```
var async = require("async");
User.findBy = function(name,password){
  async.waterfall([
      function fetch(callback){
        db.lrange("users",0,-1,function(err,users){
          users.forEach(function(item){
            var u = JSON.parse(item);
            if ((u.name == name) && (u.password == password)){
              console.log(u);
              callback(null,u);
              return;
            }
          });
        });
        callback(null);
      }
      ],function end(err,res){

        setTimeout(function(){
        // I want to return res value at last.
        return u;
        },0);
      });
}; 
```

### 应用程序.js

```
 // but it returns undefined value.
 var user = User.findBy("nobinobiru",a"); 
```

你有什么主意吗？请任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:24:47.970

在 fetch 函数中，您调用 callback(null); 在 db.lrange 调用之后立即。这个调用在这里是不必要的，因为你需要等待 db 的结果。

此代码应该可以正常工作：

```
var async = require("async");
User.findBy = function(name,password){
    async.waterfall([
        function fetch(callback){
            db.lrange("users",0,-1,function(err,users){
                var user;
                if (users && users.length) {
                    users.forEach(function(item){
                        var u = JSON.parse(item);
                        if ((u.name == name) && (u.password == password)){
                            console.log(u);
                            user = u;
                            return;
                        }
                    });
                    callback(null,user);
                } else {
                    callback(null);
                }
            });
        }
    ],function end(err,res){

        setTimeout(function(){
            // I want to return res value at last.
            return res;
        },0);
    });
}; 
```

# css - 表单中的 CSS 标签元素无法正确显示

> ID：11808363
> 
> 赞同：0
> 
> 时间：2012-08-04T11:40:33.753
> 
> 标签：css

当我在此处找到的表格上单击 sumbit 时：

[http://test-bed.co.uk/garden/book.php](http://test-bed.co.uk/garden/book.php)

验证消息没有按预期显示，我希望它们出现在输入元素旁边，就好像它们是内联的一样。

我相信标签或输入样式规则可能会导致问题。当它们浮动时，具有表单 id 的包含 div 向左浮动。

```
#aform label {
    clear: both;
    display: block;
    float: left;
    font-weight: bold;
    text-align: left;
}

.inputstyle2 {
    float: left;
    margin-right: 240px;
    width: 300px;
}

#form {
    float: left;
} 
```

任何关于我做错了什么的建议和解释将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:47:41.343

首先，您需要在其中删除和`margin-right`添加：`clear: both``.inputstyle2`

```
.inputstyle2 {
    clear: both;
    width: 300px;
} 
```

错误标签仍将放置在输入字段下方，因为它们继承`clear: both`了`#aForm label`其中的浮动效果。值得庆幸的是，您可以通过使用更具体的 CSS 选择器并删除`clear`：

```
#aForm label.error {
    clear: none;
} 
```

# objective-c - 如何在加载内容之前获取“全屏”UITableView 的边界

> ID：11808364
> 
> 赞同：1
> 
> 时间：2012-08-04T11:40:36.163
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我一直在尝试通过本教程为 UITableView 实现覆盖活动指示器 - [http://www.markbetz.net/2010/09/30/ios-diary-showing-an-activity-spinner-over-a-适合视图/](http://www.markbetz.net/2010/09/30/ios-diary-showing-an-activity-spinner-over-a-uitableview/)

它可能有点旧，但除了显示覆盖的边界的小问题外，它似乎运行良好。

我试图在这里得到这些界限：

```
-(void)showActivityView {
    if (overlayController == nil) {
        // This is where I get the wrong bounds
        overlayController = [[ActivityOverlayController alloc] initWithFrame:self.tableView.bounds];
    }
    [self.tableView insertSubview:overlayController.view aboveSubview:self.tableView];
} 
```

如果我在加载和填充表格之后调用该方法，但如果我在它得到错误的边界之前调用它，这将获得边界并完美地显示我的叠加层。我试过获取 tableView.superView 的边界，但这只是在左上角显示覆盖。

我知道这是因为 UITableView 在加载之前不包含任何单元格，因此还没有适当的边界，但我不知道如何获取这些单元格。

错误显示：

![在此处输入图像描述](../Images/35c997b717c501b0c3755bebee27cfb5.png)

正确（但在加载表格后）显示：

![在此处输入图像描述](../Images/a4f708fe7d23328610bef5efdca26a83.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:59:14.480

根据示例链接，您应该这样做

```
-(void)showActivityView {
    if (overlayController == nil) {
        // This is where I get the wrong bounds
        overlayController = [[ActivityOverlayController alloc] initWithFrame:self.tableView.superview.bounds];
    }
    [self.tableView.superview insertSubview:overlayController.view aboveSubview:self.tableView];
} 
```

你为什么要做`[self.tableView insertSubview:..]`而不是`[self.tableView.superview insertSubview:..]`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:55:13.540

使用 UITableView 的“frame”属性而不是“bounds”怎么样？如果表格视图是在 XIB 中定义的，那么在将单元格加载到表格中之前，框架应该已经很好了。所以你需要更换：

```
 overlayController = [[ActivityOverlayController alloc] initWithFrame:self.tableView.bounds]; 
```

和：

```
 overlayController = [[ActivityOverlayController alloc] initWithFrame:self.tableView.frame]; 
```

# ruby-on-rails - 将路线中的布局设置到范围内

> ID：11808365
> 
> 赞同：2
> 
> 时间：2012-08-04T11:40:39.697
> 
> 标签：ruby-on-rails, layout, routing, scope

我有管理员控制器，我想为“/管理员”路径设置布局。

我尝试喜欢：

```
scope '/admin' do
  layout 'admin' # did't work
  get '/' => 'admin#index', as: 'admin'
  resources :posts, as: 'admin_posts'
end 
```

我可以在 AdminController 中设置布局，例如：

```
class AdminController < ApplicationController
  layout 'admin'
end 
```

但这是一个不好的方法，因为合理地为所有从“/admin”路径调用的控制器使用一些布局

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T11:54:54.303

您不能直接在您的 routes.rb 中设置布局

我认为你的做法是正确的

```
class AdminController < ApplicationController
  layout 'admin'
end 
```

现在您将使用 AdminController 在 admin 范围内生成其他控制器

```
class UsersController < AdminController
end 
```

或者如果在命名空间中

```
class Admin::UsersController < AdminController
end 
```

这就是我所做的，如果我确实理解了你的问题。

# python - Django NameError：名称'os'未定义

> ID：11808367
> 
> 赞同：7
> 
> 时间：2012-08-04T11:40:44.853
> 
> 标签：python, django

当我尝试按照[本教程](http://ghickman.co.uk/2012/07/22/google-oauth2-sso-with-django.html)在我的 Django 1.4 上安装 Google-auth2 时，出现此错误：

```
Traceback (most recent call last):
  File "./manage.py", line 11, in <module>
    import settings
  File "/home/ubuntu/xx/settings.py", line 140, in <module>
    GOOGLE_OAUTH2_CLIENT_ID = os.environ['GOOGLE_OAUTH2_CLIENT_ID']
NameError: name 'os' is not defined 
```

这一行是：

```
139- LOGIN_REDIRECT_URL = '/'

**140- GOOGLE_OAUTH2_CLIENT_ID = os.environ['GOOGLE_OAUTH2_CLIENT_ID']**

141- GOOGLE_OAUTH2_CLIENT_SECRET = os.environ['GOOGLE_OAUTH2_CLIENT_SECRET']
142- GOOGLE_WHITE_LISTED_DOMAINS = ['mydomain.org']
SOCIAL_AUTH_USER_MODEL = 'auth.User' 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-04T11:43:11.693

您尝试使用未导入的模块中的*某些*`os`内容，因此您无法使用它。

为了解决这个问题，在开头的某处添加该模块的导入`settings.py`：

```
import os 
```

* * *

此外，如果您没有`GOOGLE_OAUTH2_CLIENT_ID`in `os.environ`，请不要从那里加载它。相反，直接将其设置在`settings.py`：

```
GOOGLE_OAUTH2_CLIENT_ID = 'your-actual-client-id-value' 
```

或者，您可以在运行脚本之前先在 shell 中设置它：

```
export GOOGLE_OATH2_CLIENT_ID='your-actual-client-id-value' 
```

# c# - 如何处理对 RichTextBox 的右键单击？

> ID：11808369
> 
> 赞同：0
> 
> 时间：2012-08-04T11:40:53.003
> 
> 标签：c#, richtextbox

如何在 C# 中处理 RichTextBox 中的右键单击？

例如：

当我在 RichTextBox 上单击鼠标右键时，程序将显示一个 MessageBox。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T11:51:35.600

您必须捕获`Mouse_Down`事件，而不是`Mouse_Click`如下：

```
private void richTextBox1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == System.Windows.Forms.MouseButtons.Right)
    {
        MessageBox.Show("you got it!");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:43:14.170

订阅[MouseClick](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.mouseclick.aspx)事件并检查`MouseEventArgs.Button`属性以查看单击了哪个按钮。

你为自己尝试了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T11:52:25.070

在设计模式下单击 RichTextBox。右键单击并选择属性，然后导航到 MouseDown 事件。双击该事件，您将被定向到页面后面的代码，您可以在那里编写代码。

# java - 基于 XML 值的矩阵计算

> ID：11808373
> 
> 赞同：0
> 
> 时间：2012-08-04T11:41:29.823
> 
> 标签：java, xml

今天是个好日子。我尝试学习一些关于解析文件的知识，我决定从 DOM、xPath 或 SAX 开始，例如如何从两个 2x2 矩阵中获取数值。

然后在 JAVA 中对这两个矩阵进行计算以输出结果。什么最好用于解析，然后用某种算法获得计算矩阵的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:02:09.180

您可能会查看[`JScience`](http://jscience.org/)使用[*javolution*](http://javolution.org/)进行[XML 编组](http://javolution.org/target/site/apidocs/javolution/xml/package-summary.html#package_description)的库。

# asp.net - 向 asp.net 中的 myaspnetuser 表添加其他用户信息

> ID：11808388
> 
> 赞同：0
> 
> 时间：2012-08-04T11:43:25.340
> 
> 标签：asp.net, mysql, database, asp.net-mvc-3, implicit

我在酒店管理网站上工作，在用户注册中，我使用了 asp.net mysql 会员提供程序，它为我提供了我想要自定义的数据库。我想添加一个`contact_no`在 mysql 会员提供程序用户表中命名的列如何做这件事在 mvc3 中。

有人知道这件事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:51:37.673

我认为向 users 表添加新字段是不正确的。如果要存储用户个人信息，我建议使用配置文件表。这更干净，并且根据 asp.net 会员提供程序结构。

*   [检查这个](https://stackoverflow.com/questions/79129/implementing-profile-provider-in-asp-net-mvc)
*   而[这个](https://stackoverflow.com/questions/426609/how-to-assign-profile-values)

# android - keytool 错误：java.io.IoException：不正确的 AVA 格式

> ID：11808391
> 
> 赞同：211
> 
> 时间：2012-08-04T11:44:12.440
> 
> 标签：android, android-keystore

我是 Android 开发新手；当我尝试签署应用程序时，出现以下错误。谁能帮我解决这个问题？

```
keytool error :java.io.IoException:Incorrect AVA format 
```

我在论坛上找到了一些解决方案，例如我需要运行`debug.keystore`但我没有成功。

* * *

## 回答 #1

> 赞同：534
> 
> 时间：2012-08-04T15:16:47.807

可能您在名称、组织或其他地方的字段中输入了非法字符（类似于，（逗号））。

当然，如果你真的想要某些字符可以用 \ 符号转义

“+”（加号）符号也会导致此问题。（人们通常倾向于在国家代码字段中使用 + 号）

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-08-05T06:18:50.400

尝试使用 Eclipse ADT 导出已签名的 .apk 文件时遇到错误。该错误与您的错误相同。就我而言，我在国家代码之前使用了 + 号。通过从此名称中删除 + 号解决了问题并允许我完全导出我签名的 .apk 文件。此外，使用逗号、斜线、分号、引号时也会出现此错误。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-04-10T06:37:16.017

您在导出 apk 时尝试使用特殊字符。您不能在创建 apk 时显示的任何字段中使用这些特殊字符。特殊字符集包括：

*   逗号 (,)
*   加号 (+)
*   引号 (")
*   反斜杠（“\”）
*   尖括号（< 和 >）
*   分号 (;)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-03-07T06:12:52.830

我通过更改国家代码解决了这些异常：

`+91`至 `India`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-12-12T02:04:14.540

当我根本没有设置专有名称选项时，我遇到了这个错误。这已通过将选项设置为格式有效的字符串来纠正。

此命令因 AVA 格式异常而失败：（为易读性添加了换行符）

```
C:\Program Files\Java\jdk1.6.0_45\jre\bin>keytool 
-genkey -v -dname PatrickTaylor -validity 10000 
-keystore C:\drops\patrickkeystore 
```

此命令成功完成：

```
C:\Program Files\Java\jdk1.6.0_45\jre\bin>keytool 
-genkey -v -dname PatrickTaylor -validity 10000 
-keystore C:\drops\patrickkeystore 
-dname "cn=Patrick Taylor, ou=engineering, o=company, c=US" 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-06-08T16:11:10.273

特殊字符/转义所有好的答案/可能是问题；您没有共享实际的“keytool”命令行，因此很难给出准确的答案。如果您尝试生成 pub/priv 密钥对（“-genkeypair”参数），那么 1 个问题是证书主题专有名称（“ **-dname** ”arg）未在正确的 X.500 AVA 中指定（“**属性**/**价值**”断言）格式**。**例如，省略主题公用名 (CN) 前面的“CN=”。参数应该是这样的：

```
keytool ... -dname="CN=SomeCertSubject" ... 
```

在此专有名称参数中，“ **CN** ”（“Common Name”）是“ **A**属性”，“ **SomeCertSubject** ”是“**值**”。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-05-06T09:49:33.060

这个“可能你在名称，组织或其他地方的字段中输入了非法字符（类似于，（逗号））。”为我工作。我在州或省上有一个逗号。请按规则将此答案标记为答案；因为 +91 中的 + 是一个特殊字符。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-05-10T18:29:06.770

`+`我在国家代码前面输入了一个错误。所以改变了如下的值。

`+7`至`7`

这个对我有用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-11-18T08:17:10.503

当我们要在 Android Studio 中生成签名 APK 时，这是一个常见的错误。因此，在**Keystore**文件中，您不能使用任何特殊字符或符号，例如 ( **, \ + - * / < > ; ' "** ) 否则，您会得到 java.io.IoException。

查看演示，您如何填写您的**密钥库**文件：

**密码：**没有特殊字符或符号的任何内容

**别名：** Key0（由您决定）

**有效期（年）：** 25（由您决定）

**名字和姓氏：**您的正确姓名，但不要在您的名字中使用特殊字符，例如 $unny @dam

**组织单位：**您的组织名称

**组织：**您的组织名称

**城市或地区：**您的城市名称

**州或省：**您的州或省名称

**国家代码 (XX)：**使用您的国家代码，如果您不知道，请搜索 Google。

**然后点击确定**

# android - 启动应用程序时出现致命错误 (E/AndroidRuntime(464): FATAL EXCEPTION: main)

> ID：11808397
> 
> 赞同：0
> 
> 时间：2012-08-04T11:45:02.207
> 
> 标签：android, widget, textview, runtime-error, classcastexception

嘿伙计们，我对制作应用程序真的很陌生，这是我启动应用程序时发生的错误。如果你们中的一个人能告诉我如何逐步解决这个问题，我将非常感激:) 谢谢，记录：

```
 08-04 17:02:45.480: D/AndroidRuntime(464): Shutting down VM
   08-04 17:02:45.480: W/dalvikvm(464): threadid=1: thread exiting with uncaught exception (group=0x40015560)
   08-04 17:02:45.499: E/AndroidRuntime(464): FATAL EXCEPTION: main
   08-04 17:02:45.499: E/AndroidRuntime(464): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dice.alt/com.dice.alt.DiceAlternativeActivity}: java.lang.ClassCastException: android.widget.TextView
   08-04 17:02:45.499: E/AndroidRuntime(464):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
   08-04 17:02:45.499: E/AndroidRuntime(464):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
   08-04 17:02:45.499: E/AndroidRuntime(464):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at android.os.Handler.dispatchMessage(Handler.java:99)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at android.os.Looper.loop(Looper.java:123)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at android.app.ActivityThread.main(ActivityThread.java:3683)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at java.lang.reflect.Method.invokeNative(Native Method)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at java.lang.reflect.Method.invoke(Method.java:507)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at dalvik.system.NativeStart.main(Native Method)
  08-04 17:02:45.499: E/AndroidRuntime(464): Caused by: java.lang.ClassCastException: android.widget.TextView
  08-04 17:02:45.499: E/AndroidRuntime(464):    at com.dice.alt.DiceAlternativeActivity.onCreate(DiceAlternativeActivity.java:20)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  08-04 17:02:45.499: E/AndroidRuntime(464):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
  08-04 17:02:45.499: E/AndroidRuntime(464):    ... 11 more
  08-04 17:02:48.179: I/Process(464): Sending signal. PID: 464 SIG: 9</i>' 
```

XML：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="409dp"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/ndice"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#4876FF" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="number"
            android:text="@string/empty" >

            <requestFocus />
        </EditText>

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/udice"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#4876FF" />

        <EditText
            android:id="@+id/editText2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="number"
            android:text="@string/empty" />

        <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/result" />

        <TextView
            android:id="@+id/op"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#DC143C"
            android:layout_weight="0.54"
            android:text="@string/empty"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/ABJ2"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="#32CD32" />

    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:43:56.633

`Caused by: java.lang.ClassCastException: android.widget.TextView`

**-**日志中的上述行表明**在尝试将一种类型的变量转换为不兼容的类型时出现异常。**

**-**您要么尝试将不兼容的内容转换为 TextView 类型变量，要么将 TextView 转换为不兼容的类型。

**例如：**

`Button b = (TextView)findViewById(R.id.mbut);`

# php - PHPmailer 正在向我的电子邮件发送副本

> ID：11808400
> 
> 赞同：1
> 
> 时间：2012-08-04T11:45:16.300
> 
> 标签：php, smtp, copy, phpmailer

当我通过 PHPmailer (SMTP) 发送测试消息时，我的电子邮件会附加到收件人列表中。这是收件人在收件箱电子邮件中看到的内容

> 收件人：mail@mail.com，姓名 <mail2@mail.com>

第二封邮件是我的。我怎样才能阻止这个？

这是我的代码

```
function send_email($to, $fromName, $subject, $message, $contentType='text', $smtp_opts) {
    $mail = new PHPmailer();
    $mail->SetFrom($smtp_opts['fromEmail'], $fromName);
    $mail->Subject = $subject;
    $mail->Mailer = 'smtp';
    $mail->AddAddress($to);
    $mail->CharSet = "UTF-8";
    $mail->IsHTML($contentType=='html');

    $mail->Host = $smtp_opts['host'];
    $mail->SMTPAuth = (bool)$smtp_opts['auth'];
    if ($mail->SMTPAuth) {
        $mail->Username = $smtp_opts['username'];
        $mail->Password = $smtp_opts['password'];
    }

    $mail->Body = $message;
    $mail->AddAddress($smtp_opts['fromEmail'], $fromName);

    $result = $mail->Send();

    $mail->ClearAddresses();
    $mail->ClearAttachments();
    return $result;
}

$smtp_opts = array( ... ); // host, port, fromEmail, auth, username, password
send_email('mail@mail.com', 'Name', 'Subj', 'Msg', 'html', $smtp_opts); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T11:52:57.907

```
$mail->AddAddress($smtp_opts['fromEmail'], $fromName); 
```

如果我没记错的话，这个命令会将另一个收件人添加到收件人列表中。尝试将其删除并发送另一封测试电子邮件。那时你不应该收到复制邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:57:06.240

我认为问题出在这一行 $mail->AddAddress($smtp_opts['fromEmail'], $fromName);

# php - 缺少数据的时间范围内的平均值

> ID：11808407
> 
> 赞同：16
> 
> 时间：2012-08-04T11:47:26.820
> 
> 标签：php, mysql, sql, date, average

假设一个表如：

```
UID     Name        Datetime                Users
4       Room 4      2012-08-03 14:00:00     3
2       Room 2      2012-08-03 14:00:00     3
3       Room 3      2012-08-03 14:00:00     1
1       Room 1      2012-08-03 14:00:00     2

3       Room 3      2012-08-03 14:15:00     1
2       Room 2      2012-08-03 14:15:00     4
1       Room 1      2012-08-03 14:15:00     3

1       Room 1      2012-08-03 14:30:00     6

1       Room 1      2012-08-03 14:45:00     3
2       Room 2      2012-08-03 14:45:00     7
3       Room 3      2012-08-03 14:45:00     8
4       Room 4      2012-08-03 14:45:00     4 
```

我想获得从下午 2 点到下午 3 点每个房间（1、2、3、4）的平均用户数。问题是有时房间可能不会在 15 分钟的间隔时间“登记入住”，因此必须假设上一个已知的用户计数仍然有效。

例如，`2012-08-03 14:15:00`房间 4 的签到从未签入，因此必须假设房间 4 有 3 个用户，`2012-08-03 14:15:00`因为那是它在`2012-08-03 14:00:00`

这会持续下去，因此我正在寻找的平均用户数如下：

房间 1: (2 + 3 + 6 + 3) / 4 = 3.5
房间 2: (3 + 4 + `4`+ 7) / 4 = 4.5
房间 3: (1 + 1 + `1`+ 8) / 4 = 2.75
房间 4: ( 3 + `3`+ `3`+ 4) / 4 = 3.25

其中`#`是基于先前已知签到的假定数字。

我想知道单独使用 SQL 是否可以做到这一点？如果不是，我很好奇一个巧妙的 PHP 解决方案，它不仅仅是暴力数学，例如我快速不准确的伪代码：

```
foreach ($rooms_id_array as $room_id) {
    $SQL = "SELECT * FROM `table` WHERE (`UID` == $room_id && `Datetime` >= 2012-08-03 14:00:00 && `Datetime` <= 2012-08-03 15:00:00)";
    $result = query($SQL);
    if ( count($result) < 4 ) {
        // go through each date and find what is missing, and then go to previous date and use that instead
    } else {
        foreach ($result)
            $sum += $result;
        $avg = $sum / 4;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T13:37:13.233

你的困难*（最昂贵的一步）*将是填补空白。如果无法在源数据中“填补空白”，您可能希望有一个模板来加入，然后使用相关子查询来查找与该模板关联的数据。

这通常最适合真实的表格，但这里有一个使用硬编码的内嵌视图的示例......

```
SELECT
  `room`.`uid`           `uid` ,
  AVG(`data`.`users`)    `average_users`
FROM
  (SELECT 1 `UID`  UNION ALL
   SELECT 2 `UID`  UNION ALL
   SELECT 3 `UID`  UNION ALL
   SELECT 4 `UID`)                                     `room`
CROSS JOIN
  (SELECT '2012-08-03 14:00:00' `datetime`  UNION ALL
   SELECT '2012-08-03 14:15:00' `datetime`  UNION ALL
   SELECT '2012-08-03 14:30:00' `datetime`  UNION ALL
   SELECT '2012-08-03 14:45:00' `datetime`)            `checkin`
LEFT JOIN
  data
    ON  `data`.`uid`      = `room`.`uid`
    AND `data`.`datetime` = (SELECT MAX(`datetime`)
                               FROM `data`
                              WHERE `uid`       = `room`.`uid`
                                AND `datetime` <= `checkin`.`datetime`)
GROUP BY
  `room`.`uid` 
```

*-`CROSS JOIN`创建模板以确保您始终拥有每个房间的每个签到位置的记录。*

*-`correlated sub-query`回溯时间以查找当时该房间的最新签到。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T21:14:19.730

您可以使用此解决方案：

```
SELECT   b.Name, 
         AVG(b.Users) avg_users
FROM     (
         SELECT     a.UID, 
                    MAX(c.Datetime) last_date
         FROM       (SELECT DISTINCT UID FROM tbl) a
         CROSS JOIN (
                    SELECT '14:00:00' intrvl UNION ALL
                    SELECT '14:15:00'        UNION ALL
                    SELECT '14:30:00'        UNION ALL
                    SELECT '14:45:00'
                    ) b
         JOIN       tbl c ON a.UID           = c.UID
                         AND TIME(b.intrvl) >= TIME(c.Datetime)
         GROUP BY   a.UID,
                    b.intrvl
         ) a
JOIN     tbl b ON a.UID       = b.UID
              AND a.last_date = b.Datetime
GROUP BY b.UID,
         b.Name 
```

* * *

# 查询细分：

* * *

## 第1步：

我们需要做的第一件事是将每个房间与每个时间间隔相关联。例如，在您的示例数据中，`Room 4`没有与区间`14:15:00`和的关联`14:30:00`，但我们仍然需要以某种方式表示这些关联。

我们通过创建具有相关时间间隔的每个不同房间的[笛卡尔积来实现这一点：](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)

```
SELECT     a.UID, 
           b.intrvl
FROM       (SELECT DISTINCT UID FROM tbl) a
CROSS JOIN (
           SELECT '14:00:00' intrvl UNION ALL
           SELECT '14:15:00'        UNION ALL
           SELECT '14:30:00'        UNION ALL
           SELECT '14:45:00'
           ) b
ORDER BY   b.intrvl, a.UID DESC --Ordering for display purposes 
```

*渲染：*

```
UID | intrvl
--------------
4   | 14:00:00
3   | 14:00:00
2   | 14:00:00
1   | 14:00:00
4   | 14:15:00
3   | 14:15:00
2   | 14:15:00
1   | 14:15:00
4   | 14:30:00
3   | 14:30:00
2   | 14:30:00
1   | 14:30:00
4   | 14:45:00
3   | 14:45:00
2   | 14:45:00
1   | 14:45:00 
```

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/002e3/34)

* * *

## 第2步：

然后，一旦我们有了这些关联，我们将结果连接回主表 ( `tbl`)，条件是主表的`Datetime`字段时间部分小于每个 的笛卡尔连接时间`UID`。这将对每个`UID`->`intrvl`关联执行什么操作，它将显示在该`intrvl`时间或之前发生的所有条目。

因此，例如，由于`Room 3`没有`14:30:00`intrvl 条目，因此只有两个条目将与该 intrvl 连接： on`14:15:00`和`14:00:00`since 它们都发生在 intrvl 时间或之前。

您现在可以看到我们的目标。此步骤的结果将使我们能够访问每个 intrvl 的最新条目。

```
SELECT     a.UID, 
           b.intrvl,
           c.*
FROM       (SELECT DISTINCT UID FROM tbl) a
CROSS JOIN (
           SELECT '14:00:00' intrvl UNION ALL
           SELECT '14:15:00'        UNION ALL
           SELECT '14:30:00'        UNION ALL
           SELECT '14:45:00'
           ) b
JOIN       tbl c ON a.UID           = c.UID
                AND TIME(b.intrvl) >= TIME(c.Datetime)
ORDER BY   b.intrvl, a.UID DESC, c.Datetime --Ordering for display purposes 
```

*渲染（不包括`Name`列）：*

```
UID |  intrvl    |  Datetime             |  Users
---------------- --------------------------------
4   |  14:00:00  |  2012-08-03 14:00:00  |  3   <-- Most recent entry up until 14:00:00
3   |  14:00:00  |  2012-08-03 14:00:00  |  1   <-- Most recent entry up until 14:00:00
2   |  14:00:00  |  2012-08-03 14:00:00  |  3   <-- Most recent entry up until 14:00:00
1   |  14:00:00  |  2012-08-03 14:00:00  |  2   <-- Most recent entry up until 14:00:00
4   |  14:15:00  |  2012-08-03 14:00:00  |  3   <-- Most recent entry up until 14:15:00
3   |  14:15:00  |  2012-08-03 14:00:00  |  1
3   |  14:15:00  |  2012-08-03 14:15:00  |  1   <-- Most recent entry up until 14:15:00
2   |  14:15:00  |  2012-08-03 14:00:00  |  3
2   |  14:15:00  |  2012-08-03 14:15:00  |  4   <-- Most recent entry up until 14:15:00
1   |  14:15:00  |  2012-08-03 14:00:00  |  2
1   |  14:15:00  |  2012-08-03 14:15:00  |  3   <-- Most recent entry up until 14:15:00
4   |  14:30:00  |  2012-08-03 14:00:00  |  3   <-- Most recent entry up until 14:30:00
3   |  14:30:00  |  2012-08-03 14:00:00  |  1   
3   |  14:30:00  |  2012-08-03 14:15:00  |  1   <-- Most recent entry up until 14:30:00
2   |  14:30:00  |  2012-08-03 14:00:00  |  3
2   |  14:30:00  |  2012-08-03 14:15:00  |  4   <-- Most recent entry up until 14:30:00
1   |  14:30:00  |  2012-08-03 14:00:00  |  2
1   |  14:30:00  |  2012-08-03 14:15:00  |  3
1   |  14:30:00  |  2012-08-03 14:30:00  |  6   <-- Most recent entry up until 14:30:00
4   |  14:45:00  |  2012-08-03 14:00:00  |  3
4   |  14:45:00  |  2012-08-03 14:45:00  |  4   <-- Most recent entry up until 14:45:00
3   |  14:45:00  |  2012-08-03 14:00:00  |  1
3   |  14:45:00  |  2012-08-03 14:15:00  |  1
3   |  14:45:00  |  2012-08-03 14:45:00  |  8   <-- Most recent entry up until 14:45:00
2   |  14:45:00  |  2012-08-03 14:00:00  |  3
2   |  14:45:00  |  2012-08-03 14:15:00  |  4
2   |  14:45:00  |  2012-08-03 14:45:00  |  7   <-- Most recent entry up until 14:45:00
1   |  14:45:00  |  2012-08-03 14:00:00  |  2
1   |  14:45:00  |  2012-08-03 14:15:00  |  3
1   |  14:45:00  |  2012-08-03 14:30:00  |  6
1   |  14:45:00  |  2012-08-03 14:45:00  |  3   <-- Most recent entry up until 14:45:00 
```

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/002e3/28)

* * *

## 第 3 步：

我们的下一步是获取上面的结果集，并且只`Datetime`为每个 intrvl 提取最近加入的。我们可以通过`GROUP BY`与`MAX()`聚合函数结合使用来实现这一点。

不幸的是，由于行为方式，我们也无法正确提取`Users`每个选定s 的值。`Datetime``GROUP BY`

```
SELECT     a.UID, 
           b.intrvl,
           MAX(c.Datetime) last_date
FROM       (SELECT DISTINCT UID FROM tbl) a
CROSS JOIN (
           SELECT '14:00:00' intrvl UNION ALL
           SELECT '14:15:00'        UNION ALL
           SELECT '14:30:00'        UNION ALL
           SELECT '14:45:00'
           ) b
JOIN       tbl c ON a.UID           = c.UID
                AND TIME(b.intrvl) >= TIME(c.Datetime)
GROUP BY   a.UID,
           b.intrvl
ORDER BY   b.intrvl, a.UID DESC --Again, for display purposes 
```

*渲染：*

```
UID |  intrvl    |  last_date
---------------------------------------
4   |  14:00:00  |  2012-08-03 14:00:00
3   |  14:00:00  |  2012-08-03 14:00:00
2   |  14:00:00  |  2012-08-03 14:00:00
1   |  14:00:00  |  2012-08-03 14:00:00
4   |  14:15:00  |  2012-08-03 14:00:00
3   |  14:15:00  |  2012-08-03 14:15:00
2   |  14:15:00  |  2012-08-03 14:15:00
1   |  14:15:00  |  2012-08-03 14:15:00
4   |  14:30:00  |  2012-08-03 14:00:00
3   |  14:30:00  |  2012-08-03 14:15:00
2   |  14:30:00  |  2012-08-03 14:15:00
1   |  14:30:00  |  2012-08-03 14:30:00
4   |  14:45:00  |  2012-08-03 14:45:00
3   |  14:45:00  |  2012-08-03 14:45:00
2   |  14:45:00  |  2012-08-03 14:45:00
1   |  14:45:00  |  2012-08-03 14:45:00 
```

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/002e3/30)

* * *

## 第4步

现在我们必须获取`Users`每个的值，`last_date`以便我们可以取这些值的平均值。为此，我们将最后一步中的查询包装为`FROM`子句内的子选择，并再次加入主表，条件是对于每个匹配的`UID`->`last_date`关联，获取`Users`.

```
SELECT   a.UID,
         a.last_date,
         b.Users
FROM     (
         SELECT     a.UID, 
                    MAX(c.Datetime) last_date
         FROM       (SELECT DISTINCT UID FROM tbl) a
         CROSS JOIN (
                    SELECT '14:00:00' intrvl UNION ALL
                    SELECT '14:15:00'        UNION ALL
                    SELECT '14:30:00'        UNION ALL
                    SELECT '14:45:00'
                    ) b
         JOIN       tbl c ON a.UID           = c.UID
                         AND TIME(b.intrvl) >= TIME(c.Datetime)
         GROUP BY   a.UID,
                    b.intrvl
         ) a
JOIN     tbl b ON a.UID       = b.UID
              AND a.last_date = b.Datetime
ORDER BY a.UID DESC --Display purposes again 
```

*渲染：*

```
UID | last_date           | Users
---------------------------------
4   | 2012-08-03 14:00:00 | 3
4   | 2012-08-03 14:00:00 | 3
4   | 2012-08-03 14:00:00 | 3
4   | 2012-08-03 14:45:00 | 4
3   | 2012-08-03 14:00:00 | 1
3   | 2012-08-03 14:15:00 | 1
3   | 2012-08-03 14:15:00 | 1
3   | 2012-08-03 14:45:00 | 8
2   | 2012-08-03 14:00:00 | 3
2   | 2012-08-03 14:15:00 | 4
2   | 2012-08-03 14:15:00 | 4
2   | 2012-08-03 14:45:00 | 7
1   | 2012-08-03 14:00:00 | 2
1   | 2012-08-03 14:15:00 | 3
1   | 2012-08-03 14:30:00 | 6
1   | 2012-08-03 14:45:00 | 3 
```

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/002e3/32)

* * *

## 第 5 步

现在只需对每个房间进行分组并对`Users`列进行平均即可：

```
SELECT   b.Name, 
         AVG(b.Users) avg_users
FROM     (
         SELECT     a.UID, 
                    MAX(c.Datetime) last_date
         FROM       (SELECT DISTINCT UID FROM tbl) a
         CROSS JOIN (
                    SELECT '14:00:00' intrvl UNION ALL
                    SELECT '14:15:00'        UNION ALL
                    SELECT '14:30:00'        UNION ALL
                    SELECT '14:45:00'
                    ) b
         JOIN       tbl c ON a.UID           = c.UID
                         AND TIME(b.intrvl) >= TIME(c.Datetime)
         GROUP BY   a.UID,
                    b.intrvl
         ) a
JOIN     tbl b ON a.UID       = b.UID
              AND a.last_date = b.Datetime
GROUP BY b.UID,
         b.Name 
```

*渲染：*

```
Name   | avg_users
------------------
Room 1 | 3.5
Room 2 | 4.5
Room 3 | 2.75
Room 4 | 3.25 
```

[*最终结果的 SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/002e3/33)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T21:36:47.993

我只是玩了一下[MySQL 变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)，并想出了以下想法：

只需计算用户随时间的（离散）积分，然后除以总时间。

```
SET @avgSum := @lastValue := @lastTime := @firstTime := 0;
SELECT
  *,
  @firstTime := IF(@firstTime = 0, UNIX_TIMESTAMP(`DateTime`), @firstTime),
  @avgSum := @avgSum + (UNIX_TIMESTAMP(`DateTime`) - @lastTime) * @lastValue,
  @lastValue,
  @lastTime,
  @lastValue := `Users`,
  @lastTime := UNIX_TIMESTAMP(`DateTime`),
  @avgSum / (UNIX_TIMESTAMP(`DateTime`) - @firstTime) AS `average`
FROM
  `table`
WHERE
  `UID` = 1 AND
  UNIX_TIMESTAMP(`DateTime`) >= … AND
  UNIX_TIMESTAMP(`DateTime`) < …
ORDER BY
  UNIX_TIMESTAMP(`DateTime`) ASC; 
```

`@firstTime`是第一条用户记录的时间戳，是`@avgSum`一段时间内用户的总和（积分）。`@lastValue`并且`@lastTime`是上一条记录的值和时间。该列`average`是用户总数除以整个间隔（不要介意`NULL`由于第一条记录被零除）。

仍然存在两个限制：必须存在给定间隔的第一条和最后一条记录。如果没有，平均值会在最后一个可用记录处“结束”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T03:13:18.650

我认为这在适应所有时间框架方面做得很好，即使签入间隔不均匀。另外，我认为您的示例中有错误；在您的加权平均值中，房间 2 的最后一个值是“4”而不是“7”。

设置：

```
if object_id(N'avgTbl', N'U') is not null
drop table avgTbl;

create table avgTbl (
    UserId int not null,
    RoomName nvarchar(10) not null,
    CheckInTime datetime not null,
    UserCount int not null,

    constraint pk_avgTbl primary key (UserId, RoomName, CheckInTime)
);

insert into avgTbl (UserId, RoomName, CheckInTime, UserCount) values
(4, 'Room 4', '2012-08-03 14:00:00', 3),
(2, 'Room 2', '2012-08-03 14:00:00', 3),
(3, 'Room 3', '2012-08-03 14:00:00', 1),
(1, 'Room 1', '2012-08-03 14:00:00', 2),

(3, 'Room 3', '2012-08-03 14:15:00', 1),
(2, 'Room 2', '2012-08-03 14:15:00', 4),
(1, 'Room 1', '2012-08-03 14:15:00', 3),

(1, 'Room 1', '2012-08-03 14:30:00', 6),

(1, 'Room 1', '2012-08-03 14:45:00', 3),
(2, 'Room 2', '2012-08-03 14:45:00', 7),
(3, 'Room 3', '2012-08-03 14:45:00', 8),
(4, 'Room 4', '2012-08-03 14:45:00', 4); 
```

查询：

```
/* 
* You just need to enter the start and end times below.  
* They can be any intervals, as long as the start time is 
* before the end time.
*/
declare 
    @startTime datetime = '2012-08-03 14:00:00',
    @endTime datetime = '2012-08-03 15:00:00';

declare     
    @totalTime numeric(18,1) = datediff(MINUTE, @startTime, @endTime);

    /*
    * This orders the observations, and assigns a sequential number so we can 
    *join on it later.
    */
with diffs as (
    select 
        row_number() over (order by RoomName, CheckInTime) as RowNum,
        CheckInTime,
        UserCount,
        RoomName
    from avgTbl
),
/*
* Get the time periods, 
* calc the number of minutes, 
* divide by the total minutes in the period, 
* multiply by the UserCount to get the weighted value, 
* sum the weighted values to get the weighted avg.
*/
mins as (
    select 
        cur.RoomName,
        /*
        * If we do not have an observation for a given room, use "0" instead
        * of "null", so it does not affect calculations later.
        */
        case 
            when prv.UserCount is null then 0
            else prv.UserCount
            end as UserCount, 
        /* The current observation time. */            
        cur.CheckInTime as CurrentT,
        /* The prior observation time. */
        prv.CheckInTime as PrevT,
        /*
        * The difference in minutes between the current, and previous qbservation
        * times.  If it is the first observation, then use the @startTime as the
        * previous observation time.  If the current time is null, then use the
        * end time.
        */
        datediff(MINUTE, 
            case 
                when prv.CheckInTime is null then @startTime 
                else prv.CheckInTime 
                end, 
            case 
                when cur.CheckInTime is null then @endTime 
                else cur.CheckInTime 
                end) as Mins 
    from diffs as cur
        /*
        * Join the observations based on the row numbers.  This gets the current,
        * and previous observations together in the same record, so we can 
        * perform our calculations.
        */
        left outer join diffs as prv on cur.RowNum = prv.RowNum + 1
            and cur.RoomName = prv.RoomName
    union
    /*
    * Add the end date as a period end, assume that the user count is the same 
    * as the last observation.
    */
    select 
        d.RoomName, 
        d.UserCount, 
        @endTime,
        d.CheckInTime, -- The last recorded observation time.
        datediff(MINUTE, d.CheckInTime, @endTime) as Mins
    from diffs as d 
    where d.RowNum in (
        select MAX(d2.RowNum)
        from diffs as d2
        where d2.RoomName = d.RoomName
        )
    group by d.RoomName, d.CheckInTime, d.UserCount
)
/* Now we just need to get our weighted average calculations. */
select 
    m.RoomName, 
    count(1) - 1 as NumOfObservations,
    /*
    * m.Min = minutes during which "UserCount" is the active number.
    * @totalTime = total minutes between start and end.
    * m.Min / @totalTime = the % of the total time.
    * (m.Min / @totalTime) * UserCount = The weighted value.
    * sum(..above..) = The total weighted average across the observations.
    */
    sum((m.Mins/@totalTime) * m.UserCount) as WgtAvg
from mins as m
group by m.RoomName
order by m.RoomName; 
```

# asp.net-mvc-3 - 无法通过 renderAction 渲染视图

> ID：11808408
> 
> 赞同：0
> 
> 时间：2012-08-04T11:47:38.930
> 
> 标签：asp.net-mvc-3

嗨，我正在使用 RenderAction 助手，在渲染期间我有这个错误：

> 执行处理程序“System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper”的子请求时出错。

控制器代码：

```
public ActionResult GetSearcher()
        {

            SearcherLines sl = new SearcherLines()
            {
                RegionList = db.Region.ToList(),
                CategoryList = db.Category.ToList(),
                SearchValue = null
            };

            return PartialView(sl);
        } 
```

视图模型

```
public class SearcherLines
    {
        public List<Region> RegionList { get; set; }
        public List<Category> CategoryList { get; set; }
        public string SearchValue { get; set; }
    } 
```

部分视图

```
@model IEnumerable<MasterProject.JobForYou.v3.Models.ViewModels.SearcherLines>

@foreach (var i in Model)
{
  <p>@i.CategoryList</p><br />
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:15:21.120

尝试在控制器操作上设置 OutputCache 属性

# winapi - 注册窗口类

> ID：11808410
> 
> 赞同：2
> 
> 时间：2012-08-04T11:47:58.413
> 
> 标签：winapi

我想我的问题对于那些花时间处理 Win32 API 的人来说相对容易。

所以我的问题是：
初始化 WNDCLASSEX 实例后，我们需要使用“RegisterClassEx”函数“注​​册”它，为什么？我们为什么要这样做？这个注册是什么意思，在什么情况下我需要注册东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T12:54:16.903

The `ATOM` returned by `RegisterClassEx` uniquely identifies your "window class" which can then be referred to in other windows APIs. [[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633587.aspx)]

Effectively it is a hash so as to reduce the amount of data processed each time a window is created or looked for. It does also mean that multiple windows with same features can be easily created and identified.

I was addressing the practical reasons above. Hans Passant's [answer](https://stackoverflow.com/a/11809835/256431) correctly explains this is the OO class concept provided for C. [Further MSDN example](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633575.aspx).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T15:35:53.720

函数名称中的*Class*一词很重要。当您使用面向对象的语言（如 C++、Delphi、Java 或 C# 等）编写代码时，您可以使用*class*关键字来创建具有*行为*的对象。但是 winapi 被设计为在 C 语言中使用，C 语言没有这样的功能。RegisterClassEx() 函数是对它的模拟，它允许您创建一个窗口，该窗口从命名类“派生”其行为，您可以覆盖该行为。您使用该类名创建的每个窗口都具有相同的行为。

您传递的 WNDCLASSEX 结构为窗口提供了默认行为。该结构中最重要的成员是：

*   lpsz类名。这相当于 C++ 类名。您可以稍后调用 CreateWindowEx() 并传递该名称以获取以某种方式运行的窗口。Windows 本身调用 RegisterClassEx() 来注册它的几个内置窗口类，然后您可以在自己的代码中轻松地重用它们。“EDIT”、“BUTTON”和“LISTBOX”就是很好的例子。
*   lpfnWndProc。这就是赋予窗口类特定默认行为的原因。为特定消息实现消息处理程序的窗口过程的地址。通过在 CreateWindowEx() 调用中指定另一个窗口过程，您可以进一步自定义默认行为，换句话说，从基类“派生”您自己的类。这样的窗口过程必须总是调用 DefWindowProc()，相当于调用基类方法。或者换句话说，一个窗口有*一个*虚拟方法。
*   h图标等。这些相当于基类的属性，它们设置影响默认消息处理程序的默认值。帮助您保持窗口程序简单。例如，很少需要为 WM_ERASEBKGND 编写消息处理程序，hbrBackground 成员设置窗口的默认背景。

即使您不打算重新使用窗口，Windows 也会要求您调用 RegisterClassEx()。这是迄今为止在您自己的代码中最常见的函数用法。在您编写一个实现控件的库之前，您不会开始真正利用它，其他代码可以使用的窗口。像“编辑”。

# automated-tests - 如何在 JMeter 测试中在一个站点上发出 100 个请求，而在另一个站点上每隔五分之一发出请求？

> ID：11808412
> 
> 赞同：1
> 
> 时间：2012-08-04T11:48:25.573
> 
> 标签：automated-tests, jmeter, performance-testing

如何在 JMETER 中创建一个测试：

*   总共发出 100 个请求，但是
*   对站点 A 的每 4 个请求和
*   对站点 B 的每 5 个请求

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T12:27:46.187

1）您可以使用一组[吞吐量控制器](http://jmeter.apache.org/usermanual/component_reference.html#Throughput_Controller)- 但它们只能在循环中正常工作（例如循环控制器的“孩子”）。

您可以尝试使用如下所示的内容，例如：

```
. . .
    **Loop Controller**
    Loop Count = 100
        **Throughput Controller**
        Percent Execution
        Throughput = 80.0
            **HTTP Request Sampler**
            Request to 1st site
        **Throughput Controller**
        Percent Execution
        Throughput = 20.0
            **HTTP Request Sampler**
            Request to 2nd site
. . . 
```

查看这些以获取详细信息：

*   [吞吐量控制器的目的？](https://stackoverflow.com/questions/10379033/purpose-of-throughput-controller)
*   [Jmeter - 加权随机值？](https://stackoverflow.com/questions/5481867/jmeter-weighted-random-values)
*   [吞吐量控制器如何工作？](http://jmeter.512774.n5.nabble.com/How-throughput-controller-work-td3328412.html)

2）另一种结构只能使用循环控制器来实现，例如：

```
. . .
    **Loop Controller**
    Loop Count = 20
        **Loop Controller**
        Loop Count = 4
            **HTTP Request Sampler**
            Request to 1st site
        **HTTP Request Sampler**
        Request to 2nd site
. . . 
```

# c# - 如何在同一个函数中传递不同数量的参数？

> ID：11808414
> 
> 赞同：0
> 
> 时间：2012-08-04T11:48:30.940
> 
> 标签：c#, function, overloading

我有类似的问题，但没有得到满意的答案。

我有一个功能

```
func(int a,int b)
{
//code....
} 
```

此函数接受两个参数（a 和 b）。我想在同一个函数中传递不同数量的参数。我知道有一个重载的概念，但我不知道我将传递多少个参数。我在 C#(asp.net) 中工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T11:50:29.907

您可以使用[可变参数](http://en.wikipedia.org/wiki/Variadic_function)（c# 中的[params ）...](http://msdn.microsoft.com/en-us/library/ms182366%28v=vs.80%29.aspx)

**C# 中的示例：**

```
public void func(params int[] numbers)
        { 
            for(int i = 0; i < numbers.Length; i++) 
            { 
                Console.WriteLine(numbers[i]);
            } 
        } 
```

# ruby - Rails 3 中的 link_to t() 是什么？

> ID：11808420
> 
> 赞同：9
> 
> 时间：2012-08-04T11:49:19.050
> 
> 标签：ruby, ruby-on-rails-3

我今天早上看了 Railscast 328，我很难找到方法的文档。

```
<%= link_to t('.edit', :default => t("helpers.links.edit")),
                  edit_boy_scout_path(boy_scout), :class => 'btn btn-mini' %> 
```

我了解 link_to 方法，但我对 t('edit .... ) 参数感到困惑，它在此方法中调用了两次。解释甚至指向我一些文档会很棒。感谢所有的帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-04T11:54:08.067

该`t`函数是 的别名`I18n.translate`。

`default:`如果缺少请求的密钥（`'.edit'`您的示例），该选项会提供要使用的翻译。

请参阅[国际化指南](http://guides.rubyonrails.org/i18n.html)（并转到 4.1.2 了解`:default`选项的语法）

# html - 画布性能 - 最好先绘制到屏幕外的画布？

> ID：11808421
> 
> 赞同：1
> 
> 时间：2012-08-04T11:49:26.050
> 
> 标签：html, canvas

正如问题所述 - 如果我们在屏幕外缓冲区中完成所有绘图，然后将该缓冲区绘制到屏幕上的画布上，画布性能会更快，还是没关系？

我在每个绘制循环上绘制了很多矩形 + 小图像。它在 ios 上运行得非常好，但在 android 手机上它非常可怕。但也许浏览器实现已经在幕后为我们做这件事了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:16:05.033

如果您这样做以缓存图像的一部分，将会有所帮助。如果你只是把所有东西都画到它上面然后复制到屏幕上的画布上，那是不值得的。

*   使用多个画布在另一个上分别绘制图像的一部分（使用一个用于很少更新的绘图，另一个仅用于经常更改的部分）
*   对不改变但在主画布中移动的形状使用屏幕外画布。

# php - 我能怎么做？$.load 到 DIV 和 PHP 标头以允许访问源

> ID：11808424
> 
> 赞同：1
> 
> 时间：2012-08-04T11:49:58.583
> 
> 标签：php, jquery, cors

我正在尝试将外部域 URL 加载到 div 中。这是我的代码：

```
<div id="content"></div>
<script>
$(document).ready(function() {
    $("#content").load("http://www.domain.com/external.php?query=sentence&callback=?");
});
</script> 
```

在 External.php 的顶部，我放了：

```
<?php header("Access-Control-Allow-Origin: *");?> 
```

但我仍然看不到 div 中的内容。有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:04:54.450

你的例子对我来说很好。请记住，并非所有浏览器都支持跨域 ajax 调用。这是一个[列表](http://caniuse.com/#search=cors)

# c++ - C++- 错误 C2144 语法错误：'int' 应该以 ';' 开头

> ID：11808432
> 
> 赞同：6
> 
> 时间：2012-08-04T11:51:29.157
> 
> 标签：c++

我正在尝试编译这个 C++ 代码：

```
#include <stdlib.h>
#include <stdio.h>   
#include <string.h>
#include "general_configuration.h"
#include "helper_functions.h"

#define LINE_LEN 80

// file_with_as_ext returns 1 if the input has .as extension
int file_with_as_ext(char* input)
{
  char* dot_value = strchr(input, '.');
  if (dot_value == NULL)
    return 0;
  else
  {
    if (strcmp(dot_value,".as") == 0)
      return 1;
  }
} 
```

但我得到了错误`"C2144: syntax error : 'int' should be preceded by ';'"`

我不明白为什么，因为最后`#define`不需要`';'`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T04:35:17.993

我遇到了这个问题。我写了一个头文件，但我忘了加“；” 在函数声明的尾部。所以，我的 c 文件中有一个错误，它包含这个头文件。我在这里添加评论，希望它对某人有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-04T12:08:01.420

首先，您发布的代码以杂散的反引号开头。如果这确实在您的代码中，则应将其删除。

其次，如果您使用以下行结束函数，编译器会更开心，并发出更少的警告

```
return 0; // unreachable 
```

这是很好的 C++ 风格，值得推荐。（在你的情况下，这条线实际上可能是*可达的，*在这种情况下，这条线不仅是好的风格，而且是正确操作所必需的。检查这个。）

否则，您的代码看起来一切正常，除了一些关于过时的 C 风格使用`#define`以及关于一两个其他次要风格点的小反对意见。关于`#define`，它不是 C++ 源代码，而是*预处理器指令。* 它实际上由与编译器不同的程序处理，并在编译器看到它之前被适当的 C++ 代码删除和替换。预处理器对分号不感兴趣。这就是为什么该`#define`行不以分号结尾的原因。其他开始的行通常也不`#`以分号结尾。

`general_configuration.h`正如@JoachimIsaksson 所指出的，文件末尾或文件中可能缺少所需的分号`helper_function.h`。您应该检查每个文件的最后一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T12:06:41.377

> 我不明白为什么，#define 不需要';' 在末尾。

因为#define 不是语句，而是*预处理器指令*，并且在分离指令时预处理器是面向行的。例如，您不能将两个#defines 放在同一行。

# python - 如何在pyqt中为QAction重新实现trigger()信号？

> ID：11808435
> 
> 赞同：3
> 
> 时间：2012-08-04T11:51:39.493
> 
> 标签：python, plugins, pyqt, signals-slots, qaction

我将 Python 与 PyQt 一起用于我的界面，并使用 Yapsi 来添加插件。Yapsy 找到了我所有的插件并将所有插件添加到我的主窗口中的菜单中。每个插件都被触发信号激活。QAction 的这个信号没有参数，我需要知道是什么插件发出了信号。

这是相关代码：

```
pluginMenu = self.menuBar().addMenu("P&lugins")

# Create plugin manager
self.manager = PluginManager(categories_filter={ "Formatters": Formatter})
self.manager.setPluginPlaces(["plugins"])

# Load plugins
self.manager.locatePlugins()
self.manager.loadPlugins()

# A do-nothing formatter by default
self.formatters = {}

for plugin in self.manager.getPluginsOfCategory("Formatters"):

# plugin.plugin_object is an instance of the plugin
print(plugin.plugin_object.name)
# The method to create action associated each input to default triggered() signal
newAction = self.createAction(plugin.plugin_object.name, slot=self.updatePreview())

self.addActions(pluginMenu, (newAction, None))
self.formatters[plugin.plugin_object.name] = (plugin.plugin_object, newAction)

def updatePreview(self):
    # Here I need know what plugin emit the signal    
    #=================================================================== 
```

我想用一些参数将信号与其他信号连接起来，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:12:19.167

我不知道什么是 Yapsi，但有[`QObject.sender`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qobject.html#sender)方法：

> **QObject QObject.sender (self)**
> 
> 如果在由信号激活的槽中调用，则返回指向发送信号的对象的指针；否则返回 0。该指针仅在从该对象的线程上下文调用该函数的槽执行期间有效。
> 
> 如果发送方被销毁，或者槽与发送方的信号断开连接，则此函数返回的指针无效。
> 
> 警告：这个函数违反了面向对象的模块化原则。但是，当许多信号连接到单个插槽时，访问发送器可能会很有用。
> 
> 警告：如上所述，当插槽通过 Qt.DirectConnection 从与此对象线程不同的线程调用时，此函数的返回值无效。请勿在此类场景中使用此功能。

更多提示：http: [//blog.odnous.net/2011/06/frequently-overlooked-and-practical.html](http://blog.odnous.net/2011/06/frequently-overlooked-and-practical.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:10:17.920

正确的方法是使用[`QSignalMapper`](http://doc-snapshot.qt-project.org/4.8/qsignalmapper.html).

示例代码：

```
signalmap = QSignalMapper(self)
signalmap.mapped[QString].connect(self.handler)
...
signalmap.setMapping(action, name)
action.triggered[()].connect(signalmap.map) 
```

This will re-emit the `triggered` signal with a string "name" parameter. It's also possible to re-emit signals with an `int`, `QWidget` or `QObject` parameter.

# asp.net-mvc-3 - 创建部分类时出错

> ID：11808436
> 
> 赞同：1
> 
> 时间：2012-08-04T11:52:14.963
> 
> 标签：asp.net-mvc-3, entity-framework

我正在开发 MVC 应用程序，我正在尝试创建由 MVC 应用程序生成的类的部分类，比如说 Location 类。

现在我想在新的类文件中创建 Location 类的部分类。

以下类代码由位置代码的 MVC 自动生成。

```
namespace CRM
{
    public partial class Location
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Remark { get; set; }
    }
} 
```

我添加了新的类文件，其中包含上述文件的部分类

```
namespace CRMEntities.Partial_Class
{
    public interface ILocation
    {
        [StringLength(50, ErrorMessage = "Region can accept maximum 50 characters.")]
        string Region { get; set; }

        [Key]
        int Id { get; set; }

        [Required]
        string Name { get; set; }

        string Remark { get; set; }
    }

    public partial class Location : ILocation
    {
    }
} 
```

**它给出了以下错误... `CRMEntities.Partial_Class.Location' does not implement interface member 'CRMEntities.Partial_Class.ILocation.Name`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T14:49:44.967

首先，您不需要这样做，我的理解是您正在尝试进行验证，对吗？想想看，EF生成的对象不是ViewModel，而是领域模型。数据注释应该在视图模型中，而不是域模型中。

大多数情况下，经常误用的是将域模型用作视图模型，但它并不正确。因为有时，视图模型需要多个领域模型来为您的 UI 提供数据。

因此，为了分离关注点，您需要定义与域模型不同的视图模型。示例：您有 Location 类，您需要添加 LocationViewModel 类并在此处放置数据注释。

您可以手动映射或使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)在视图模型和域模型之间进行映射。另一种解决方案是您可以使用[Fluent Validation](http://fluentvalidation.codeplex.com/)，这样，无需为了验证而拥有更多的部分类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:28:48.490

您没有`ILocation`在问题中显示 of 的定义，但错误表明该`Location.Name`属性的声明方式与`ILocation.Name`成员不同。

**编辑：**您的两个部分类似乎位于两个不同的命名空间中，因此它们实际上是两个完全不同的类，而不是同一类的两个部分。这将解释编译器错误。

话虽如此，我确实同意另一个答案（+1！），您应该在视图模型上进行 UI 验证。

# sharepoint - 当数据在 SharePoint 服务器中时创建 SSRS 报告

> ID：11808441
> 
> 赞同：3
> 
> 时间：2012-08-04T11:52:52.177
> 
> 标签：sharepoint, reporting-services, ssrs-2008

我在 SharePoint 服务器中有一些记录。我必须使用 SSRS 创建一些报告。我有点困惑，我使用 SharePoint 列表来创建报告，或者我使用单独的数据库来创建 SSRS 报告。请让我知道哪种方法是创建 SSRS 报告的最佳方法，使用 SharePoint 列表或使用单独的 SQL Server 数据库。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:39:53.617

如果您正在处理相对较小的数据集，从 SharePoint 列表中获取数据可能没问题，但直到 SSRS 2008 R2 才直接支持。但是，您可以尝试将此处描述的技术适用于早期版本：

[http://www.codeproject.com/Articles/24469/SQL-Reporting-Services-data-from-SharePoint-lists](http://www.codeproject.com/Articles/24469/SQL-Reporting-Services-data-from-SharePoint-lists)

此示例说明如何使用 SharePoint 2007 执行此操作 - 我不确定您需要做什么才能使其与 SharePoint 2010 一起使用。您没有在问题中指出您使用的是哪个版本的 SharePoint，所以我'会把它扔在那里以防万一它有帮助。

如果您使用的是 SSRS 2008 R2，那么您有一个内置的 SharePoint 列表源，您可以在此处了解它：[http ://www.mssqltips.com/sqlservertip/2068/using-a-sharepoint-list-as- a-data-source-in-sql-server-reporting-services-2008-r2/](http://www.mssqltips.com/sqlservertip/2068/using-a-sharepoint-list-as-a-data-source-in-sql-server-reporting-services-2008-r2/)

如果报告运行得足够快，我会认为这是一个合理的来源。如果他们不这样做，您可能需要设置一个单独的数据库，以便您可以调整查询和/或数据以获得更好的性能。

# servlets - Tomcat7部署中的addServlet错误

> ID：11808443
> 
> 赞同：0
> 
> 时间：2012-08-04T11:53:03.997
> 
> 标签：servlets, websocket, tomcat7, web.xml

我使用以下方法创建了一个 Web 应用程序： - HTML 5 - WebSocket（使用 Tomcat 7） - Spring - Hibernate

问题在于我在 Tomcat 7 中的战争部署期间：

```
org.apache.catalina.startup.ContextConfig parseWebXml
Grave: Erreur d'Úvaluation (parse) dans le fichier web.xml de l'application Ó jn
di:/localhost/mywebapp/WEB-INF/web.xml
org.xml.sax.SAXParseException; systemId: jndi:/localhost/mywebapp/WEB-INF/web.xm
l; lineNumber: 11; columnNumber: 12; Error at (11, 12) : org.apache.catalina.dep
loy.WebXml addServlet 
```

这是我的 web.xml ：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
version="3.0">

<display-name>My WebApp</display-name>

<servlet>
    <servlet-name>Welcome</servlet-name>
    <servlet-class>websocket.UrlWebSocketServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Welcome</servlet-name>
    <url-pattern>/websocket/welcome</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext*.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

</web-app> 
```

这是我的 Servlet（WebSocket 类）：

```
public class UrlWebSocketServlet extends WebSocketServlet {

private static final Logger log = LoggerFactory.getLogger(UrlWebSocketServlet.class);

@Override
protected boolean verifyOrigin(String origin) {
    log.trace("Origin: {}", origin);
    return true;
}

@Override
protected StreamInbound createWebSocketInbound(String subProtocol, HttpServletRequest request) {
    return new WebSocketConnection();
}

private static class WebSocketConnection extends MessageInbound {

    @Override
    protected void onOpen(WsOutbound outbound) {
        log.info("Conexión abierta");
    }

    @Override
    protected void onClose(int status) {
        log.info("Conexión cerrada");
    }

    @Override
    protected void onBinaryMessage(ByteBuffer byteBuffer) throws IOException {
        log.warn("No se soportan mensajes binarios");
        throw new UnsupportedOperationException("No se soportan mensajes binarios");
    }

    @Override
    protected void onTextMessage(CharBuffer charBuffer) throws IOException {
        final String user = charBuffer.toString();
        log.debug("Mensaje recibido: {}", user);
        getWsOutbound().writeTextMessage(CharBuffer.wrap("Hola " + user + " desde WebSocket"));
    }
}
} 
```

编辑 ：

这是我 pom.xml 的 Tomcat jar 部分：

```
 <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-catalina</artifactId>
        <version>7.0.29</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-coyote</artifactId>
        <version>7.0.29</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-servlet-api</artifactId>
        <version>7.0.29</version>
        <scope>provided</scope>
    </dependency>
            <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>provided</scope>
    </dependency> 
```

非常感谢 ：）

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:45:04.720

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>tomcat-catalina</artifactId>
    <version>7.0.29</version>
</dependency> 
```

应该说：

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>tomcat-catalina</artifactId>
    <version>7.0.29</version>
    <scope>provided</scope>
</dependency> 
```

# iphone - Retina iPhone 无法使用响应式 Twitter Bootstrap

> ID：11808444
> 
> 赞同：3
> 
> 时间：2012-08-04T11:53:26.820
> 
> 标签：iphone, css, ios, twitter-bootstrap, responsive-design

我正在将 Twitter Bootstrap 与响应式 CSS 一起用于设计为在 UIWebView 中运行的网页。

我希望页面在所有 iPhone 上看起来都一样，但视网膜 iPhone 的分辨率应该加倍的图像除外，但占用相同的“空间”。

我已成功将以下内容添加到我的 style.css 以换入和换出正确的图像：

```
.normalres { display:block } /* or anything else */
.retinares   { display:none  }

@media all and (-webkit-min-device-pixel-ratio: 2) {
   .normalres { display:none  }
   .retinares   { display:block }
} 
```

我在以下情况下使用这些：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="description" content"">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/bootstrap-responsive-mod.css" rel="stylesheet">
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="span12">
          <h5>Why this phone app?</h5> 
          <img class="pull-right normalres" src="img/iphone.png">          
          <img class="pull-right retinares" src="img/iphone_retina.png">
          <p>Blah Foo Bar</p>
        </div>
      </div>
    </div> <!-- /container -->
  </body>
</html> 
```

这两个图像分别是 150px 宽和 300px 宽。

但是我遇到了视网膜 iPhone 的问题。加载了正确的图像，而不是将其拉到右侧（以及围绕它流动的文本），这在非视网膜 iPhone 上发生得很好，图像被拉伸到浏览器的整个宽度，并且没有任何东西在它周围流动。因此它看起来与非视网膜版本不同。

我相信这与 Bootstrap 认为视网膜 iPhone 像普通 iPhone 一样低分辨率（320x480）然后看到相当大的视网膜图像（320 像素宽）并弄错布局有关。

我想我必须告诉 Bootstrap responsive 将视网膜 iPhone 视为 640px 宽的设备而不是 320px 宽的设备，但我不知道 responsive.css 中哪些媒体查询要更改以及如何更改它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T06:39:48.513

我有一个类似的问题，我希望 iPhone 浏览器以比默认 320px 更高的分辨率渲染一个肖像视口。OP似乎在问这个问题：

> 我想我必须告诉 Bootstrap 响应式将视网膜 iPhone 视为 640 像素宽的设备而不是 320 像素宽的设备，但我不知道 responsive.css 中的哪些媒体查询要更改以及如何更改它们。

我使用的修复是修改视口`meta`标签：

```
<meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=1"> 
```

然后我能够以大约 400 像素的宽度进行渲染。要达到 640 像素，只需将`initial-scale`值设为 0.5。请注意，这将影响所有类似移动设备的设备，而不仅仅是视网膜 iphone，因此您需要使用多个设备进行测试。

我使用了一些javascript来查看iphone窗口的宽度是多少：

```
$("#screenWidth").text($(window).width());
$(window).resize(function() {
    $("#screenWidth").text($(window).width());
}); 
```

并向页面添加一些 HTML：

```
<div>screen width: <span id="screenWidth"></span>px</div> 
```

# emacs - 多词背景颜色错误

> ID：11808446
> 
> 赞同：2
> 
> 时间：2012-08-04T11:53:36.133
> 
> 标签：emacs, terminal

我在我的 emacs 配置中添加了 multi-term。它工作得很好，但是控制台中的任何文本和一些空格（包括来自 ssh 的 vim 中的这些）都有白色背景，并且由于我使用深色背景的深蓝色样式，它看起来不太好。如何解决这个问题？

这是屏幕：[http ://tinypic.com/view.php?pic=rh1q9v&s=6](http://tinypic.com/view.php?pic=rh1q9v&s=6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:23:48.383

term.el 中的颜色有时效果不佳，具体取决于加载时间。在设置颜色主题后调用它可能会解决问题。

```
(setq term-default-fg-color (face-foreground 'default))
(setq term-default-bg-color (face-background 'default)) 
```

# android - 实现剪切、复制和粘贴

> ID：11808447
> 
> 赞同：-3
> 
> 时间：2012-08-04T11:53:49.483
> 
> 标签：android

我是 android 平台的新手，正在尝试构建一个文件管理器应用程序。我已经完成了使用意图打开任何文件并为特定文件提供特定图标的操作。现在我想在我的文件浏览器中实现剪切、复制和粘贴，以便我可以在我的应用程序中**剪切/复制/粘贴任何文件/文件夹**。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-04T12:32:16.277

只需创建模拟文件剪贴板的字符串（文件路径）变量。

# iphone - 适用于 iOS 和 Android NDK 的 C++ 日志记录框架

> ID：11808451
> 
> 赞同：3
> 
> 时间：2012-08-04T11:54:19.563
> 
> 标签：iphone, c++, logging, android-ndk

我正在寻找具有以下功能的适用于 iOS 和 Android NDK 的 C++ 日志框架：

*   支持 iOS 和 Android NDK
*   日志具有严重性（信息、警告、错误、严重等）
*   控制启用或禁用哪些日志记录语句
*   管理输出目的地

我查看了其他帖子中提出的关于 c++ 日志框架的建议框架，但似乎没有满足 iOS 和 Android NDK 的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-15T08:30:26.413

看看[zf_log](https://github.com/wonder-mice/zf_log)日志库。对于您的目的而言，它可能过于简单，但它同时支持 Android 和 iOS 并满足您的其他要求。虽然不确定“管理输出目标”是什么意思，但它支持自定义输出功能。

# jquery - Jquery Addclass 不起作用

> ID：11808454
> 
> 赞同：-2
> 
> 时间：2012-08-04T11:54:33.760
> 
> 标签：jquery, css, jquery-animate, addclass

我有这段代码，但它不起作用；我不知道为什么。我在所有浏览器（IE、chrome、firefox）中都试过了。我想系统必须添加类，我尝试了 chrome 的控制台来查看 DOM。我看到了添加的类，但 chrome 或其他浏览器没有变化。

```
<html>
  <head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

    <style>
      #boton
      {
        width:200px;
        height:30px;
        border:1px solid;
        background-color:#cccccc;
      }

    </style>

    <style>
      .botoncla
      {
        background-color:#FF0000;
      }
    </style>

    <script>

    $(document).ready(function(){
      $("#boton").hover(function(){
        $(this).addClass("botoncla");
      }, function(){
        $(this).removeClass("botoncla");
     });
    });

    </script>
    </head>

    <body>
       <div id="boton">Hello</div>
    </body>

</html> 
```

有人可以测试一下吗？它对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:00:41.137

您的 jQuery 代码正在运行，但您的 CSS 不起作用，因为of`background-color`没有`.botoncla`覆盖`background-color`.`#boton`

试试这个：

```
.botoncla
{
    background-color:#FF0000 !important;
} 
```

**编辑**

但是在你的情况下，`!important`是一个黑客......也许你应该`.animate()`改用：

```
$(this).animate({ backgroundColor: "FF0000" }, "slow"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:06:54.230

你可以试试这个

```
#boton.botoncla {
background-color:#FF0000;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T12:06:08.960

这里有一些问题。首先，您包括两次 jQuery，以及 jQuery UI（未使用）。这两个 jQuery 版本也不同，如`latest`构建`1.7.2`。删除其中一个（可能是 v1.4）。

它不应用样式 from 的原因`.botoncla`是因为 ID 总是比类具有更高的特异性，这意味着样式 from`#boton`被认为更重要。您可以`!important`在声明中添加一个，或者更好的是，使其更具体，如下所示：`#boton.botoncla`

请参阅我的 jsFiddle：http: [//jsfiddle.net/TheNix/rvUtT/](http://jsfiddle.net/TheNix/rvUtT/)

# c# - 如何在 XML 文件中包含特殊字符并正确读取？

> ID：11808459
> 
> 赞同：1
> 
> 时间：2012-08-04T11:55:31.403
> 
> 标签：c#, .net, xml

我正在创建一个 XML 文件，其中标签的 Innertext 是`\r\n`

它创造得很好。但是当我在代码隐藏中读取这些 xml 文件时`\r\n`被读取为`\n\n`

我正在阅读它`XMLTextReader`。

这可能是什么原因以及如何像提供的那样阅读它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:03:10.007

您需要对此类字符进行编码才能保留它们。

一种方法是用相应的字符引用替换字符：

*   `\n`到`&#10;`
*   `\r`到`&#13;`

另一种方法是在部分中包含需要保留空白的`<![CDATA[]]>`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:09:33.667

该问题没有提供足够的详细信息来正确回答它。所以我会在这里假设一些事情。

应该考虑几件事：

1.  您是否使用不同的区域设置？
2.  XML文件的编码是什么？
3.  系统的平台编码是什么？
4.  什么是系统行分隔符？
5.  您是否使用内部文本来强制在由该 XML 文件构建的文档中换行？
6.  您知道 XML 语言中的 CDATA 标记吗？

这些要点可能会对您的问题产生影响。但是当重新阅读您的问题时，我认为您正在寻找 CDATA 解决方案，以防止您的内部文本被 XML 解析器误解。

我的猜测是将内部文本包装`\r\n`在 CDATA 标记中。

可以在此处找到有关 CDATA 标记的更多信息：[CDATA](http://www.w3schools.com/xml/xml_cdata.asp)

祝你好运！

# sql - 如何使用 MongoDB 构建递归结构

> ID：11808460
> 
> 赞同：1
> 
> 时间：2012-08-04T11:56:01.683
> 
> 标签：sql, node.js, mongodb, data-structures, recursion

我正在尝试用 SQL 做一些通常简单的事情（例如，在同一个表中使用外键）（它可能与 MongoDB 一样简单，我只是还不知道），即构建递归数据结构。

对于此示例，我将讨论网站中的页面。我想做一个多层次的页面结构。所以可能有：

*   家
*   我们的产品
    *   产品一
    *   产品 2
*   关于我们
    *   我们在哪？
    *   联系我们

假设页面有标题和内容。

我需要知道执行此操作的最佳方法是什么，以及如何基于该数据结构（显示每个级别的每个页面的页面）构建站点地图。

对于这种情况，我正在使用 MongoDB 构建一个 node.js 应用程序。

编辑：不是通过简单地在每个页面中引用父页面来工作吗？页面会像`{ title: 'test', content: 'hello world', parentPage: ObjectID(parent page) }`

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T12:57:34.077

我个人会在这里实现一个物化路径结构，使用前缀不区分大小写的正则表达式很容易更新和查询（这意味着它将使用索引），因此示例如下所示：

```
{_id: {}, path: 'about_us/where_are_we'} 
```

如您所见，这也允许 SEO 友好的 URL 直接点击这棵树，从而为您提供最大的权力。这在您希望显示如下 URL 的帮助系统中特别有用：

```
/help/how-to-use-my-site 
```

由于`how-to-use-my-site`可以直接点击路径甚至更远，您可以容纳两个字段并直接点击全文，例如：

```
{_id: {}, path: 'about_us/where_are_we', normalised_url: 'where_are_we'} 
```

当然，正如前面的回答所说，您必须知道您希望如何访问您的内容，但我认为物化路径是一个好的开始。

您可以在此处阅读有关 Mongo 中树结构的更多信息：[http ://www.mongodb.org/display/DOCS/Trees+in+MongoDB](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:46:40.937

您需要知道如何访问您的数据。

上次我使用树结构时，我在 Ruby 中实现[了这个](https://github.com/gtgames/machete/blob/master/models/taxonomy.rb)（我从各种来源获得灵感），它存储了一个 _id 路径和完整的 uri（页面标题），处理这样的结构很痛苦。

另一方面，您可以创建集合文档（根）和嵌入文档（分支和叶子）。处理起来比较简单，但是查询的时候需要获取整棵树，而且只有知道深度才可以查询内部文档。

根据我过去的经验，支持树形结构的所有工作都得不偿失（除非它是必需的），大多数用户将创建一个基于标签而不是固定类别的松散结构。

# c# - 避免注册表 Wow6432Node 重定向

> ID：11808462
> 
> 赞同：31
> 
> 时间：2012-08-04T11:56:41.747
> 
> 标签：c#, registry, wow64

我正在尝试在 c# 中使用 Microsoft.Win32.RegistryKey 插入一些简单的注册表项，但路径会自动更改为：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Test 
```

到

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Test 
```

我尝试了谷歌，但我只得到一些模糊和令人困惑的结果。以前有人处理过这个问题吗？一些示例代码将非常受欢迎。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-04-02T23:51:08.190

您可以使用 RegistryKey.OpenBaseKey 来解决这个问题：

```
var baseReg = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry64);
var reg = baseReg.CreateSubKey("Software\\Test"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-04T13:03:25.757

在 WOW64 下，某些注册表项被重定向（软件）。当 32 位或 64 位应用程序对重定向的键进行注册表调用时，注册表重定向器会拦截调用并将其映射到键的相应物理注册表位置。有关详细信息，请参阅[注册表重定向器](http://msdn.microsoft.com/en-gb/library/aa384232%28v=vs.85%29.aspx)。

您可以使用[RegistryView Enumeration](http://msdn.microsoft.com/en-us/library/microsoft.win32.registryview.aspx) on [RegistryKey.OpenBaseKey 方法](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.openbasekey.aspx)显式打开32 位视图并直接访问HKLM\Software\。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-10-04T13:06:54.017

我不知道如何使用 .reg 文件来解决它。但只在一个BAT文件中，如下：

您必须`/reg:64`在命令行末尾添加。前任：

```
REG ADD "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Authentication\LogonUI\Background" /v "OEMBackground" /t REG_DWORD /d 0x00000001 /f /reg:64 
```

资料来源：[Wow6432Node 以及如何通过 Sccm 将注册表设置部署到 64 位系统](http://brpoblog.wordpress.com/2012/12/18/deploy-registry-settings-to-64-bit-systems-via-sccm/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-16T21:38:50.890

这是我开发的仅读取和写入 32 位注册表的工作代码。它适用于 32 位和 64 位应用程序。如果未设置该值，则“读取”调用会更新注册表，但如何删除它是非常明显的。它需要 .Net 4.0，并使用 OpenBaseKey/OpenSubKey 方法。

我目前使用它来允许 64 位后台服务和 32 位托盘应用程序无缝访问相同的注册表项。

```
using Microsoft.Win32;

namespace SimpleSettings
{
public class Settings
{
    private static string RegistrySubKey = @"SOFTWARE\BlahCompany\BlahApp";

    public static void write(string setting, string value)
    {
        using (RegistryKey registryView = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry32))
        using (RegistryKey registryCreate = registryView.CreateSubKey(RegistrySubKey))
        using (RegistryKey registryKey = registryView.OpenSubKey(RegistrySubKey, true))
        {
            registryKey.SetValue(setting, value, RegistryValueKind.String);
        }        
    }
    public static string read(string setting, string def)
    {
        string output = string.Empty;
        using (RegistryKey registryView = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry32))
        using (RegistryKey registryCreate = registryView.CreateSubKey(RegistrySubKey))
        using (RegistryKey registryKey = registryView.OpenSubKey(RegistrySubKey, false))
        {
            // Read the registry, but if it is blank, update the registry and return the default.
            output = (string)registryKey.GetValue(setting, string.Empty);
            if (string.IsNullOrWhiteSpace(output))
            {
                output = def;
                write(setting, def);
            }
        }
        return output;
    }
}
} 
```

用法：把它放在它自己的类文件（.cs）中，这样调用它：

```
using SimpleSettings;
string mysetting = Settings.read("SETTINGNAME","DEFAULTVALUE"); 
```

# json - 将 Chrome 应用清单从 V1 转换为 v2

> ID：11808465
> 
> 赞同：1
> 
> 时间：2012-08-04T11:56:58.283
> 
> 标签：json, google-chrome, web-applications, google-chrome-extension, manifest

我用代码在清单版本 1 中制作了一个 chrome 应用程序：

```
 {
"name": "J-Tech",
"version": "2",
"icons": { "128": "icon.png" },
"app": {
"urls": [
"http://www.j-tech-web.co.uk"
],
"launch": {
"web_url": "http://www.j-tech-web.co.uk"
}
}
} 
```

我找不到教程让它带我进入我的网站，谁能告诉我怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:12:10.267

这应该工作

```
 {
    "name": "J-Tech",
    "description": "sample Text",
    "version": "2",
    "manifest_version": "2",
    "icons": 
    {
        "128": "icon.png"
    },

    "app":
    {
        "urls": 
    [
            "http://www.j-tech-web.co.uk"
        ],

        "launch": 
    {
            "web_url": "http://www.j-tech-web.co.uk"
        }
    },

    "permissions": 
    [

    ]
} 
```

# c# - 如何在 C# 中使用泛型声明变量

> ID：11808466
> 
> 赞同：1
> 
> 时间：2012-08-04T11:57:01.247
> 
> 标签：c#, generics

```
public static object GetObject(int x)
{
    return new object { };
}
public static object GetObject(string x)
{
    return new object { };
}
public static void ProcessObject<T>(T x) where T : int, string <= got error here: 
{
    object o = GetObject(x);
} 
```

出现错误“用作约束的类型必须是接口、非密封类或类型参数。”

我如何重写代码以使其在不写入`ProcessObject(int x)`和`ProcessObject(string x)`两次的情况下工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T12:28:34.247

因此，您现在拥有的（根据接受的答案和您的评论）是：

```
public static void ProcessObject<T>(T x)
{
    object o;
    if (typeof(T) == typeof(int))
        o = GetObject((int)(object)x);
    else if (typeof(T) == typeof(string))
        o = GetObject((string)(object)x);
    else
        throw new Exception();
    // do stuff with o
} 
```

我建议公开`int`和`string`重载，但为了防止代码重复，请在内部调用另一种方法：

```
public static void ProcessObject(int x)
{
    ProcessObject(GetObject(x));
}
public static void ProcessObject(string x)
{
    ProcessObject(GetObject(x));
}
private static void ProcessObject(object o)
{
    // do stuff with o
} 
```

这使您的`public`方法的输入值清晰：`int`并且`string`是唯一可接受的类型，同时仍然不复制您的实际逻辑（`// do stuff with o`）。

您可能不喜欢这两个公共`ProcessObject`方法是彼此重复的，（无论如何表面上；在幕后，它们调用了两个不同`GetObject`的重载），但我认为这是最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:00:07.730

你不能做你想做的事：首先，[不可能在一个通用约束中列出几个类](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)；其次，您可以放入约束中的类型必须是您可以继承它（或者如果它是接口则实现它）的类型。两者`int`都未通过`string`此检查。在这种情况下，最好使用两个单独的重载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T12:14:28.150

一般来说，如果您的对象根据泛型类型参数做出不同的反应，那么在这种情况下您可能不应该使用泛型。泛型非常适合您希望始终做同样事情的情况，无论实际使用什么类型。

因此，泛型约束只允许您为类型参数列出一个基类。传递给相应类型参数的任何实际类型都是给定继承层次结构的一部分，从您指定的基类开始，因此您的类的用户可以指定与基类或其任何子类匹配的任何类型。

同时，作为泛型类的作者，您可以放心地假设指定的类型（至少）具有约束所指示的基类的接口。因此，您可以访问基类的任何成员。

如果你想允许`string`or `int`，想象一下可能是什么成员。两者都直接来自`System.Object`，因此限制没有意义，因为它没有限制；每种类型都派生自`System.Object`.

总而言之，如果你真的想区别对待`string`，`int`这绝对是提供两个重载而不是一个泛型类的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T12:04:44.170

在 C# 中不可能查看[Constraints on Type Parameters](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)。尝试使用[动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T11:59:53.470

只需删除`where`部分

```
public static void ProcessObject<T>(T x) 
{
    object o = GetObject(x);
} 
```

而且也不要`object`在你的其他方法中使用，而是使用`T`

# java - Mysql 连接器不适用于 JDK 1.7 上的 Eclipse Juno

> ID：11808470
> 
> 赞同：0
> 
> 时间：2012-08-04T11:57:30.647
> 
> 标签：java, eclipse, mysql-connector

我有一个在 MySQL 数据库上执行 CRUD 的 Java 程序。

为此，我一直在使用：

```
Eclipse Indigo
Java 1.6
MySql-Connector-java-5.1.19-bin.jar 
```

*我尝试在一台新*机器 上执行相同的代码：

```
Eclipse Juno
Java 1.7
MySql-Connector-java-5.1.19-bin.jar. 
```

我已将 MySql 连接器添加到 Eclipse Juno 中项目的构建路径。

但是，ant 构建失败，并出现有关缺少应从连接器获取的类和包的错误：

```
Buildfile: /home/rudra/Softwares/openfire/openfire_src/build/build.xml
init:
compile:
[javac] Compiling 14 source files to /home/rudra/Softwares/openfire/openfire_src/work/classes
[javac] warning: [options] bootstrap class path not set in conjunction with -source 1.5
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:3: error: package com.mysql.jdbc does not exist
[javac] import com.mysql.jdbc.Connection;
[javac]                      ^
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:4: error: package com.mysql.jdbc does not exist
[javac] import com.mysql.jdbc.PreparedStatement;
[javac]                      ^
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:5: error: package com.mysql.jdbc does not exist
[javac] import com.mysql.jdbc.ResultSet;
[javac]                      ^
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:21: error: cannot find symbol
[javac]             PreparedStatement stat = (PreparedStatement)connect.prepareStatement(query2);
[javac]             ^
[javac]   symbol:   class PreparedStatement
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:21: error: cannot find symbol
[javac]             PreparedStatement stat = (PreparedStatement)connect.prepareStatement(query2);
[javac]                                       ^
[javac]   symbol:   class PreparedStatement
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:21: error: cannot find symbol
[javac]             PreparedStatement stat = (PreparedStatement)connect.prepareStatement(query2);
[javac]                                                                ^
[javac]   symbol:   method prepareStatement(String)
[javac]   location: variable connect of type Connection
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:23: error: cannot find symbol
[javac]             ResultSet result = (ResultSet) stat.executeQuery();
[javac]             ^
[javac]   symbol:   class ResultSet
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:23: error: cannot find symbol
[javac]             ResultSet result = (ResultSet) stat.executeQuery();
[javac]                                 ^
[javac]   symbol:   class ResultSet
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:28: error: cannot find symbol
[javac]                 PreparedStatement preparedStmt = (PreparedStatement) connect.prepareStatement(query);
[javac]                 ^
[javac]   symbol:   class PreparedStatement
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:28: error: cannot find symbol
[javac]                 PreparedStatement preparedStmt = (PreparedStatement) connect.prepareStatement(query);
[javac]                                                   ^
[javac]   symbol:   class PreparedStatement
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:28: error: cannot find symbol
[javac]                 PreparedStatement preparedStmt = (PreparedStatement) connect.prepareStatement(query);
[javac]                                                                             ^
[javac]   symbol:   method prepareStatement(String)
[javac]   location: variable connect of type Connection
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:41: error: cannot find symbol
[javac]                 PreparedStatement statement = (PreparedStatement) connect.prepareStatement("Insert into user values (?,?,?);");
[javac]                 ^
[javac]   symbol:   class PreparedStatement
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:41: error: cannot find symbol
[javac]                 PreparedStatement statement = (PreparedStatement) connect.prepareStatement("Insert into user values (?,?,?);");
[javac]                                                ^
[javac]   symbol:   class PreparedStatement
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:41: error: cannot find symbol
[javac]                 PreparedStatement statement = (PreparedStatement) connect.prepareStatement("Insert into user values (?,?,?);");
[javac]                                                                          ^
[javac]   symbol:   method prepareStatement(String)
[javac]   location: variable connect of type Connection
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:73: error: cannot find symbol
[javac]             PreparedStatement statement = (PreparedStatement) connect.prepareStatement(query);
[javac]             ^
[javac]   symbol:   class PreparedStatement
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:73: error: cannot find symbol
[javac]             PreparedStatement statement = (PreparedStatement) connect.prepareStatement(query);
[javac]                                            ^
[javac]   symbol:   class PreparedStatement
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:73: error: cannot find symbol
[javac]             PreparedStatement statement = (PreparedStatement) connect.prepareStatement(query);
[javac]                                                                      ^
[javac]   symbol:   method prepareStatement(String)
[javac]   location: variable connect of type Connection
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:75: error: cannot find symbol
[javac]             ResultSet result = (ResultSet) statement.executeQuery();
[javac]             ^
[javac]   symbol:   class ResultSet
[javac]   location: class UserDB
[javac] /home/rudra/Softwares/openfire/openfire_src/src/java/org/jivesoftware/openfire/UserDB.java:75: error: cannot find symbol
[javac]             ResultSet result = (ResultSet) statement.executeQuery();
[javac]                                 ^
[javac]   symbol:   class ResultSet
[javac]   location: class UserDB 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:01:14.340

从**[这个](http://bit.ly/RliE2y)**问题中得到启示：

假设您的 build.xml 中有一个编译目标，看起来类似于：

```
<!-- Compile application -->
  <target name="compile">
    <mkdir dir="${classes.dir}"/>
    <javac srcdir="${src.dir}" destdir="${classes.dir}" debug="yes" includeantruntime="false">
      <classpath refid="classpath" />
    </javac>
  </target> 
```

成功编译所需要做的就是定义类路径，使其包含项目 lib 目录中的所有 jar，如下所示：

```
 <path id="classpath">
    <fileset dir="${lib.dir}" includes="*.jar"/>
  </path> 
```

我从您的问题中了解到，您在 Eclipse 项目中添加了对连接器 jar 的引用。您可以在将连接器 jar 复制到 Eclipse 项目的 lib 文件夹中*后*尝试上述建议。

或者，虽然我认为这不是一个很好的建议，但您可以将项目导出为 Ant Build 并检查由此生成的 build.xml。这可以通过转到 File -> Export，输入“ant”进行过滤，然后选择“Ant Buildfiles”来完成，如下所示：

![导出为 Ant BuildFiles](../Images/36645cd7052b5ad37ee4780ad085d900.png)

# javascript - 获取当前 URL，替换部分路径名，并在空白选项卡中打开

> ID：11808472
> 
> 赞同：0
> 
> 时间：2012-08-04T11:57:44.473
> 
> 标签：javascript, jquery

我想获取当前 URL，替换其中的部分路径名，然后在新选项卡中打开结果。

当前 URL 如下所示：

```
 http://website.com/file.php?identificator=11111&folder=name 
```

我想获取 URL（我假设使用“window.location”最合适（？）），然后用“name2”（固定值）替换参数“name”（变量，可能随时不同）并在新选项卡中打开生成的 URL，可能多次。

我试过研究replace（），但无法隔离路径名中的参数。

一个人将如何进行？jQuery 也可能是一个替代品。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:26:57.000

```
<script>

url = window.location.href;

newurl = url.replace(url,"http://website.com/file.php?identificator=11111&folder=anything
    "); // your replacement

window.onload = window.open(newurl);

</script> 
```

*未经测试的代码

# php - 在 PHP 中关闭 MySQL 连接

> ID：11808476
> 
> 赞同：3
> 
> 时间：2012-08-04T11:58:29.967
> 
> 标签：php, mysql

我只是想知道，在页面末尾关闭 PHP 中的 MySQL 连接是否很好？有什么优势？关闭它重要吗？

真诚的，乔伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:04:23.797

通常不需要使用 mysql_close()，因为非持久打开的链接会在脚本执行结束时自动关闭，但请记住，一旦不再需要资源就立即终止它们始终是一个好习惯。如果您的脚本长时间占用您不再需要的资源，只会让您更接近资源耗尽

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:05:23.997

无论如何，PHP 都会在脚本结束时释放任何资源。

例如，最好释放文件资源并锁定文件，因为您的脚本可能会以 1s 形式运行，但您可能只需要在脚本开始时几毫秒的文件。

如果您在开始时使用 SQL 几毫秒，则使用相同的推理，然后只对提取的数据进行处理 - 通过关闭您的连接，您允许另一个连接取代您的位置（MySQL 限制可以同时连接的连接数制成）。

另一方面，如果您在脚本结束时释放它，因为您在脚本的整个执行过程中（间歇性地）使用数据库，那么您只是在做 PHP 在脚本结束时无论如何都会做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T12:55:15.650

If you mean using persistent connections: in general (99.99% of the time) it is NOT (!) very wise to use persistent connections. Certainly not when using transactions. The performance penalty for opening and closing connections every request is not that big.

> PHP persistent connections are bad because...
> 
> *   they cause transactions, table locks, temporary tables, session variables and most other useful features in MySQL to be very dangerous, potentially causing server-wide deadlocks and database errors during page generation.
> *   they occupy hundreds of MySQL sockets and threads, increasing the risk of hitting a limit somewhere (open files, mysql settings, kernel limits?).
> *   When something break because of persistent connections, it's certain to be extremely difficult to diagnose, since it will only show up after a certain thread has served certain requests in a certain order.
> *   with a pool of web servers, one slow web server can back up and consume so many connections it can't use that the other servers can't create connections to complete their requests.

See for instance this article.

[http://meta.wikimedia.org/wiki/Why_persistent_connections_are_bad](http://meta.wikimedia.org/wiki/Why_persistent_connections_are_bad)

In general it is also good programming practice to explicitly release all resources you acquire as soon as possible since they can then be used by competing scripts of routines. Using constructors and destructors ('smart resources') is a good way to do this. In PHP it is possible your script ends with a fatal error in which case you get no chance to release them yourself.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T12:03:59.037

是的，使用后关闭连接是一种很好的做法，它可以减轻数据库的负担。性能会提高。应始终在使用后释放资源，以便其他用户可以使用它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-18T11:20:59.880

$conn = new mysqli("localhost","Username","Password","Db_name");

```
$sql = "SELECT * FROM `your_table_name`";

$connStatus = $conn->query($sql);

$numberOfRows = mysqli_num_rows($connStatus);

$numberOfRows; 

//this echo out the total number of rows returned from the query

$conn->close(); 
```

# android - 适用于 Android 的拼图

> ID：11808477
> 
> 赞同：1
> 
> 时间：2012-08-04T11:58:31.170
> 
> 标签：android, ios, browser

我见过 Pieceable 这是一个网站，您可以在其中上传 iOS 应用程序，然后直接在浏览器中试用它们。类似的东西也适用于Android吗？

要上传 APK 文件，在网站中嵌入一些代码并能够在购买之前试用该应用程序吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:40:01.503

我知道这不属于这里，但只要它得到了回答，我就会给出答案。我发现[AppSurfer](http://www.appsurfer.com)工作得非常好。

# javascript - 未捕获的类型错误：无法设置未定义的属性“插件”

> ID：11808479
> 
> 赞同：2
> 
> 时间：2012-08-04T11:58:36.810
> 
> 标签：javascript, plugins, typeerror

当我将其加载到在线服务器上时，我的网站上出现以下错误。

```
Uncaught TypeError: Cannot set property 'plugin' of undefined               global.js:1

Port error: Could not establish connection. Receiving end does not exist.   miscellaneous_bindings:232 
```

和不安全的 JavaScript 错误。

我对 JavaScript 不太擅长，所以请帮帮我。

该网站是：rangepakistan.com。这是一个非政府组织的网站。

当我在我的计算机上加载这个网站时，我没有遇到任何问题，就像我在我的硬盘上的浏览器上离线打开 index.html 一样。

截屏：

![这是谷歌浏览器的检查元素截图](../Images/c79e83e642ed2f43090220320f844fa2.png)

截图 2：

![在此处输入图像描述](../Images/506189dbdf2ec209eab18f00e0b83868.png)

`http://seemas-pk.com/pp`

`http://seemas-pk.com/pp/js/global.js`<-- 有错误的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:00:11.063

我不知道你是从哪里得到脚本的，但它正在破坏哈希`window.location.hostname`以执行该操作的函数。

```
(function() {
    var b = "h";
    var c = [0, -1631451101, -1757475694];
    var f = "00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";
    b += "os";
    var d = "loca";
    function e(k, h) {
        if (h == window.undefined) {
            h = 0
        }
        var l = 0;
        var a = 0;
        h = h ^ (-1);
        for (var g = 0, j = k.length; g < j; g++) {
            l = (h ^ k.charCodeAt(g)) & 255;
            a = "0x" + f.substr(l * 9, 8);
            h = (h >>> 8) ^ a
        }
        return h ^ (-1)
    }
    b += "tn";
    d += "tion";
    b += "ame";
    d = window[d][b];
    if ($.inArray(e(d), c) < 0) {
        jQuery.pez.plugin = function() {
            $.pez.plugin.enable = true
        }
    }
})(); 
```

中的数组`c`包含几个哈希值。通过一些幸运的猜测`-1631451101`map to`"localhost"`和`0`maps to `""`，这是您在本地机器上运行站点时得到的。由于您的主机名没有映射到数组中的第三个哈希值，因此被设置为某个值，如果未定义`jQuery.pez.plugin`，则该值不起作用。`jQuery.pez`从文件中删除该功能，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:24:21.473

感谢大家的帮助。没有你们，我不会这样做。问题出在我猜测的函数名上。

删除它不起作用，所以我从两行的函数名称中删除了“插件”。它使它工作:)

将其重命名为

```
 if ($.inArray(e(d), c) < 0) {

    jQuery.pez= function() {

        $.pez.enable = true

    } 
```

# winapi - Win32 全局密钥挂钩 / SetWindowsHook / GetAsyncKeyState 有时不起作用

> ID：11808480
> 
> 赞同：1
> 
> 时间：2012-08-04T11:58:54.253
> 
> 标签：winapi, setwindowshookex, wh-keyboard-ll

我有一个关于虚拟键挂钩的问题。我想为我的应用程序定义全局快捷方式（RegisterHotkey 不够）。但是，我尝试了两种方法来实现快捷方式：

1.  我注册了一个 WH_KEYBOARD_LL 钩子。我将所有挂钩代码放入一个 DLL 中，它工作正常！但是：当特殊应用程序（例如 CCleaner ）具有焦点时，钩子不再起作用！我的申请没有任何结果。我尝试使用 32 位和 64 位 DLL。

2.  我试图通过频繁调用 GetAsyncKeyState 而不是使用钩子来解决问题。此版本也运行良好，直到特殊应用程序（再次 CCleaner）成为焦点。此时 GetAsyncKeyState 为所有键返回 0，即使它们被按下。

有谁知道如何解决这个问题？

顺便说一句，似乎禁用我的钩子的应用程序是用 Delphi 编写的。此外，这些“邪恶”应用程序不会对任何输入做出反应，这意味着对这些应用程序窗口的 ShowWindow 调用没有效果。SetWindowLong 等也是如此。

非常感谢您的回复！

# c# - Console.Error 和 Console.Out 未写入重定向文件流

> ID：11808481
> 
> 赞同：3
> 
> 时间：2012-08-04T11:58:55.600
> 
> 标签：c#, .net, console, stdout, stderr

```
namespace Pro
{
    class ErrorLog
    {
        public ErrorLog(RenderWindow app)
        {
            startTime = DateTime.Now.ToString("yyyyMMddHHmm");
            outFile = @"data\runtime\" + startTime + ".log";
            errFile = @"data\runtime\" + startTime + ".err";

            try
            {
                OutputStream = new StreamWriter(outFile);
                ErrorStream = new StreamWriter(errFile);
            }
            catch (Exception e)
            {
                Console.Error.WriteLine(e);
                MessageBox.Show(e.Message);
                Environment.Exit(1);
            }

            var info = new ComputerInfo();

            Console.SetOut(OutputStream);
            Console.SetError(ErrorStream);
            Console.WriteLine("Start Time: {0}", startTime);
            Console.WriteLine("Platform: {0}", info.OSFullName);            
            Console.WriteLine("Available Memory: {0}", info.AvailablePhysicalMemory);

            ReportApplicationData(app);

        }

        ~ErrorLog()
        {
            if (wereErrors)
            {
                var msg = string.Format("There were some runtime errors. Kindly see {0} for the error messages and {1} for the runtime log",
                    errFile, outFile);
                DisplayMessage(msg);                
            }

            Console.Error.Close();
            Console.Out.Close();
        }

        public void ReportApplicationData(RenderWindow app)
        {          
            this.app = app;

            Console.WriteLine("Screen Width = {0}, Height = {1}, Depth = {2}",
                app.Width, app.Height, app.Settings.DepthBits);
        }

        public void DisplayMessage(string msg)
        {
            Console.WriteLine("Application Message : '{0}'", msg);
            MessageBox.Show(msg);
        }

        public void DisplayError(bool fatal, string format, params object[] arg)
        {
            Console.Error.WriteLine(format, arg);
            wereErrors = true;

            if (fatal) app.Close();
        }

        public TextWriter ErrorStream
        {
            get;
            private set;
        }

        public TextWriter OutputStream
        {
            get;
            set;
        }

        bool wereErrors = false;

        string startTime;
        string errFile;
        string outFile;

        RenderWindow app; // SFML RenderWindow
    }
} 
```

`ErrorLog`我在`Main`方法中创建了一个实例。但是，出于某种原因，即使创建了`.log`and文件，也没有任何内容被写入。`.err`我所看到的只是两个大小为 0 字节的空文件，其中没有写入任何文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T12:13:59.917

你必须刷新你的流，即：

```
OutputStream.Flush(); 
```

# asp.net - 在 webgrid asp mvc 中使用图像而不是文本

> ID：11808483
> 
> 赞同：2
> 
> 时间：2012-08-04T11:59:05.663
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, webgrid

如何将此 webgrid 中的操作链接更改为图像？ps：我希望所有图片都出现在同一列

```
@{
var grid = new WebGrid(Model, canPage:true ,canSort:true, rowsPerPage :6);
grid.Pager(WebGridPagerModes.NextPrevious);
    @grid.GetHtml(tableStyle: "webGrid", htmlAttributes: new { id = "datatable" },
    headerStyle: "Header",
    alternatingRowStyle: "alt",
    columns: grid.Columns(grid.Column(header: "", format: (item) =>
 new HtmlString(
       Html.ActionLink("Détails", "Details", new { id = item.id_client }).ToString() +
       Html.ActionLink("Modifier", "Edit", new { id = item.id_client }).ToString() +
                Html.ActionLink("Supprimer", "Delete", new { id = item.id_client }).ToString()
 )),
    grid.Column("Nom"),
    grid.Column("Prenom", "Prénom"),
    grid.Column("Email")));

                    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T10:49:52.727

我已经使用 css 类解决了这个问题

```
@{
         var grid = new WebGrid(Model, canPage:true ,canSort:true, rowsPerPage :6);
            grid.Pager(WebGridPagerModes.NextPrevious);
            @grid.GetHtml(tableStyle: "webGrid", htmlAttributes: new { id = "datatable" },
            headerStyle: "webgrid-header",
            selectedRowStyle : "webgrid-selected-row",
            footerStyle : "webgrid-footer",
            rowStyle: "webgrid-row-style",
            alternatingRowStyle: "webgrid-alternating-row",
            columns: grid.Columns(
            grid.Column(header: "", format:  (item) =>
            Html.ActionLink("Détails", "ObtenirDifficulte", new { id = item.id_diff}, 
            new { @class = "details" }), style: "actions"),
            grid.Column(header: "", format:  (item) => Html.ActionLink("Modifier", 
            "Edit",
            new { id = item.id_diff }, new { @class = "modifier" }),style : "actions"),
            grid.Column(header: "", format: (item) => Html.ActionLink("Supprimer",
            "Delete", new { id = item.id_diff }, new { @class = "supprimer" }),
            style: "actions"),
            grid.Column("titre", "Titre"),
            grid.Column("description", "Description"),
            grid.Column("tache.nom_tache", "Tâche correspondante")
            ));
} 
```

这是css类

```
.modifier
{
    background: url(../Images/modifier.png) no-repeat top left ;
    display: block;
    width: 18px;
    height: 24px;
    text-indent: -9999px;
}
.details
{
    background: url(../Images/details.png) no-repeat top left ;
    display: block;
    width: 26px;
    height: 32px;
    text-indent: -9999px;
}
.supprimer
{
    background: url(../Images/supprimer.png) no-repeat  ;
    display: block;
    width: 18px;
    height: 24px;
    text-indent: -9999px;
} 
```

# sql - SQL Server 2008 加入

> ID：11808486
> 
> 赞同：-2
> 
> 时间：2012-08-04T11:59:29.790
> 
> 标签：sql, sql-server-2008, syntax

我的数据库中有一些表，我想使用 join 将它们组合起来，但我遇到了问题。让我说清楚。我已将`Id_num`（列名）指定为表中的主键，`Stu_info`其他表有一个`Id_num`列来存储 ID 号。

所有表都具有`Id_num`将存储 ID 号的列的相同名称 ( )。我试图创建一个视图来连接表以从特定表中获取特定数据。如果我使用`INNER JOIN`，那么由于一些空值，它不会显示任何行。但是我用过`LEFT OUTER JOIN`它正在工作。但这带来了一个不可接受的问题。

代码 ：

```
SELECT     
    dbo.Stu_info.Id_num, dbo.Development_fee.Dvf, dbo.Stu_info.Stu_name, 
    dbo.Stu_info.Dep_name, dbo.Tuition_fee.Acy, dbo.Tuition_fee.Tui_fee, 
    dbo.Registration_fee.Reg_fee, dbo.Form_fill_up_fee.Acy AS Expr1, 
    dbo.Form_fill_up_fee.FFF, dbo.Examination_fee.E_typ, dbo.Examination_fee.Exm_fee, 
    dbo.monthly_instal.Instm, dbo.monthly_instal.Paid
FROM
    dbo.Stu_info 
LEFT OUTER JOIN
    dbo.Tuition_fee ON dbo.Stu_info.Id_num = dbo.Tuition_fee.Id_num 
LEFT OUTER JOIN
    dbo.Registration_fee ON dbo.Stu_info.Id_num = dbo.Registration_fee.Id_num 
LEFT OUTER JOIN
    dbo.Examination_fee ON dbo.Stu_info.Id_num = dbo.Examination_fee.Id_num 
LEFT OUTER JOIN
    dbo.monthly_instal ON dbo.Stu_info.Id_num = dbo.monthly_instal.Id_num 
LEFT OUTER JOIN
    dbo.Development_fee ON dbo.Stu_info.Id_num = dbo.Development_fee.Id_num 
LEFT OUTER JOIN
    dbo.Form_fill_up_fee ON dbo.Stu_info.Id_num = dbo.Form_fill_up_fee.Id_num 
```

例如，表`Dvf`的列`Development_fee`有一个数据，表`Tui_fee`的列`Tuition_fee`有六个数据，用于具有以下 ID 的学生`LAB10161117`。

现在，如果您尝试使用以下代码

```
Select * from View_1
Where Id_num = 'LAB10161117' 
```

要获取以下 ID LAB10161117 的数据，那么您应该获取以下信息。喜欢

```
ID number : LAB10161117
-----------------------------------------
Development Fee  ---- Tuition Fee ---- Other columns
10000            ----  1000
Null             ----  1000
Null             ----  1000
Null             ----  1000
Null             ----  1000
Null             ----  1000 
```

因为表`Dvf`的列`Development_fee`有一个条目`LAB10161117`是`10000`&表`Tui_fee`的列`Tuition_fee`有六个条目`LAB10161117`是`1000, 1000, 1000, 1000, 1000, 1000`。但它不像上面的信息那样显示。当我执行以下代码以显示该 ID 的数据时

```
Select * from View_1
Where Id_num = 'LAB10161117' 
```

然后它显示错误的信息，如

```
ID number : LAB10161117
-----------------------------------------
Development Fee  ---- Tuition Fee ---- Other columns

10000            ----  1000
10000        ----  1000
10000       ----  1000
10000        ----  1000
10000       ----  1000
10000       ----  1000 
```

这是不对的！这意味着要与`Tuition_fee`有六行的表匹配，它已经`Development_fee`再次生成了相同的表值（六次），尽管`Development_fee`表对于具有以下 ID 的人只有一行`LAB10161117`。

我只想准确地显示表中存在的行，并且我想停止行重复。你能帮我解决这个问题吗？请帮助我摆脱这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:36:50.167

您应该考虑使用 UNION 而不是 JOIN。

简化您的查询，联合可能如下所示

```
SELECT           dbo.Stu_info.Id_num, dbo.Development_fee.Dvf
FROM             dbo.Stu_info 
LEFT OUTER JOIN  dbo.Tuition_fee ON dbo.Stu_info.Id_num = dbo.Tuition_fee.Id_num 
UNION
SELECT           dbo.Stu_info.Id_num, dbo.Registration_fee.Reg_fee
FROM             dbo.Stu_info 
LEFT OUTER JOIN  dbo.Registration_fee ON dbo.Stu_info.Id_num = dbo.Registration_fee.Id_num 
```

# jquery-masonry - jQuery 梅森角戳

> ID：11808492
> 
> 赞同：0
> 
> 时间：2012-08-04T12:00:07.843
> 
> 标签：jquery-masonry

jQuery Masonry 很棒，但是，有没有人能够让角落标记出现在页面的左上角？我尝试更改为，`float: left;`但这似乎不起作用。

此外，当我调整窗口大小时，调整大小不会自动调整角戳。

这是CSS

```
.corner-stamp {
width: 270px;
height: 300px;
padding: 10px;
float: right;
background: red;
color: white;
-moz-border-radius: 15px 0px 15px 0px;
-webkit-border-radius: 15px 0px 15px 0px;
border-radius: 15px 0px 15px 0px;
} 
```

这是JS：

```
$.Mason.prototype.resize = function() {
  this._getColumns();
  this._reLayout();
};
$.Mason.prototype._reLayout = function(callback) {
  var $cornerStamp, cornerStampX, freeCols, i;
  freeCols = this.cols;
  if (this.options.cornerStampSelector) {
    $cornerStamp = this.element.find(this.options.cornerStampSelector);
    cornerStampX = $cornerStamp.offset().left - (this.element.offset().left + this.offset.x + parseInt($cornerStamp.css("marginLeft")));
    freeCols = Math.floor(cornerStampX / this.columnWidth);
  }
  i = this.cols;
  this.colYs = [];
  while (i--) {
    this.colYs.push(this.offset.y);
  }
  i = freeCols;
  while (i < this.cols) {
    this.colYs[i] = this.offset.y + $cornerStamp.outerHeight(true);
    i++;
  }
  this.layout(this.$bricks, callback);
};
$container = $("#streams");
$container.imagesLoaded(function() {
  $container.masonry({
    itemSelector: ".stream-item",
    columnWidth: 60,
    isAnimated: false,
    isFitWidth: true,
    cornerStampSelector: '.corner-stamp'
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:18:35.593

您可能可以[在 github 上找到您需要的代码](https://github.com/desandro/isotope/issues/131)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:57:51.723

对于左浮动，您最好的选择是确保“带角印章”的瓷砖是您列表中的第一个瓷砖。

另外，我一直在玩角冲压，并注意到该设置`isFitWidth: true`会干扰角冲压。

如果您找到了更好的左角冲压方法，请告诉我。如果你找到了一种方法来右角戳，但在页面上将瓷砖居中，请告诉我。

谢谢。

# mysql - 在 mysql 查询中使用 INDEX (PRIMARY)，但出现错误的语法错误？

> ID：11808493
> 
> 赞同：2
> 
> 时间：2012-08-04T12:00:08.043
> 
> 标签：mysql

我试图通过使用索引来加速 mySQL 查询，但由于某种原因，它告诉我语法错误。不过，我不知道为什么。有任何想法吗？

我所做的只是添加“使用索引（主要）”

```
SELECT a.listing_id FROM db_listings USE INDEX (PRIMARY)
a LEFT JOIN db_users u ON u.user_id=a.owner_id WHERE a.active=1 GROUP BY a.listing_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:04:59.917

将表别名放在`a`USE INDEX 子句之前。

# c - 这样的代码合法吗？

> ID：11808498
> 
> 赞同：0
> 
> 时间：2012-08-04T12:01:05.080
> 
> 标签：c, pointers, standards, c99

我一直在使用一个使用 GCC 4.4.1 (ISO C99) 编译的程序，今天注意到了这个怪癖。尽管它可以在目标上正常工作，但编译器也不会使用 -Wall 发出任何警告。

```
void mutex_init(mutex_t *mutex)
{
 if(unlikely(mutex->magic == MUTX_MAGIC_CHAR))
    return;

 mutex->owner = NULL;
 mutex->prior = NULL;
 mutex->magic = MUTX_MAGIC_CHAR;
 thread_queue_init(&mutex->queue);
} 
```

不应该是这样吗

```
*mutex->owner = NULL; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T12:03:32.317

不，`magic->owner`相当于`(*magic).owner`。

`->`运算符旨在处理指向结构的指针，而运算符则`.`直接处理结构。

# php - 加载，滚动，放大和缩小图像，如谷歌地图

> ID：11808501
> 
> 赞同：4
> 
> 时间：2012-08-04T12:01:21.017
> 
> 标签：php, javascript, jquery

我正在开发一个 Web 应用程序。我只是想知道如何做到这一点。它就像一个地图应用程序，但不是地图。

我需要在 mysql 数据库中的 div 内的网页上显示 100 张图像。每个图像将显示在特定的预定义图块上。我想要以下功能主义者。

1.  加载图像（不是所有图像）
2.  放大和缩小。像地图一样更新图像。
3.  滚动。像地图一样更新图像。

一个。我的 div 只能显示 25 张图像。我只想在该区域加载 25 张图像。剩余的图像应在滚动或放大和缩小时加载。

湾。如果用户点击“放大”，那么它应该加载并显示下一层大图像，如谷歌地图，如果我点击缩小，它会显示上一层小图像。

谁能告诉我如何构建这个应用程序。我已经检查过 OpenLayers、地理服务器和 ajax-zoom。我不想使用地理服务器，因为它不是地图应用程序。但我需要与地图相同的功能。我应该使用 jquery 插件来做到这一点。

请帮忙

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:27:14.010

有点乱，但这里有一些建议：

* * *

`zoom`2\. 使用 CSS 的属性可以轻松实现放大和缩小。困难的部分是在特定位置放大。

为此，您可以将可调整大小的分隔符元素放在另一个元素中。包含元素将具有`overflow`of `none`，并保持相同的大小。这样，您可以根据手指的位置（假设您希望触摸设备使用它）和 div 内的位置获得准确的坐标。

如果您只是放大桌面，请将原点变量设置为屏幕中心。

至于更改图像，一旦设置的 CSS 属性足够大/小，您就可以简单地加载新图像。但是，如果可能的话，我建议只加载一次更大的图像；更少的 http 请求和更少的加载时间。

* * *

1.一旦当前坐标之间的距离超过某个阈值，您就可以加载图像，考虑缩放量。

* * *

3.滚动是指平移还是放大？

有几种方法可以实现滚动缩放效果。一种方法是在具有指定内部高度的所有内容上放置一个不可见元素，从而需要滚动条。`scrollHeight-clientHeight`当用户在此元素中滚动时，在比较和`scrollTop`属性后，该事件可能会导致与通常缩放相同的事件。

对于平移，只需更改图像包装器`left`和`top`属性即可。

* * *

我希望所有这些都有帮助。

# jquery - 将样式应用于多个选择器

> ID：11808502
> 
> 赞同：0
> 
> 时间：2012-08-04T12:01:26.913
> 
> 标签：jquery

为什么以下内容不将 css 规则应用于这两个元素？

```
var prevElem = $('<a href="#" class="'+ settings.prev +'" />').text('Prev');
var nextElem = $('<a href="#" class="'+ settings.next +'" />').text('Next');
container.append(prevElem, nextElem);
$(prevElem, nextElem).css('top', container.height()/2); 
```

它仅适用于 prevElem。

**请注意，动态元素已添加到 DOM（及其类）中，因此它们就在那里。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T12:10:13.290

要做你需要的，你必须调用`add()`方法。

```
var prevElem = $('<a href="#" class="'+ settings.prev +'" />').text('Prev');
var nextElem = $('<a href="#" class="'+ settings.next +'" />').text('Next');

prevElem.add(nextElem).appendTo(container).css('top', container.height()/2); 
```

您不能通过将数组作为参数提供给 来连接数组的原因`jQuery`是根本没有这样的 API。而且不应该有，因为它会导致无法实现在上下文中搜索元素的[jQuery( selector [, context] ) 。](http://api.jquery.com/jQuery/)查看[$.add()](http://api.jquery.com/add/)以了解您尝试执行的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:08:05.387

您的代码应该是：

```
prevElem.add(nextElement).css('top', container.height()/2); 
```

如果您查看[文档，`jQuery`](http://api.jquery.com/jQuery/)您会发现无法按照您尝试的方式创建具有两个元素的 jQuery 对象。阅读文档，无需*猜测*它是如何工作的。

# c# - 如何使用 Quartz.Net 中的 NameValueCollection 访问任何作业属性？

> ID：11808508
> 
> 赞同：1
> 
> 时间：2012-08-04T12:02:19.643
> 
> 标签：c#, .net, scheduled-tasks, quartz-scheduler, quartz.net

我有一个关于 Quartz.net 的大项目。我已经创建了一些工作来完成一些任务。所以我做了一个总结项目来了解我。我有工作。我想将一些值解析为工作的属性。在执行时，作业需要这些属性。但我不能那样做。请不要说“为什么不使用'JobDetail.JobDataMap'？” 我需要以下结构：

![在此处输入图像描述](../Images/eb13ffb017e66675acecdafe0b8b9cff.png)

查看 JobBase：

```
 public abstract class JobBase : MarshalByRefObject, IStatefulJob
{
    void IJob.Execute(JobExecutionContext context)
    {
        this.Execute();
    }

    protected abstract void Execute();
} 
```

还有Test.cs（这是我的工作！）

测试.cs：

```
 public class Test : JobBase
{

    public string FileName { get; set; }

    public string Ip { get; set; }

    protected override void Execute()
    {
        Ping ping = new Ping();
        PingReply pingReply = ping.Send(Ip);
        using (System.IO.StreamWriter file = new System.IO.StreamWriter(FileName, true))
        {
            file.WriteLine(pingReply.Address);
        }  
    }
} 
```

我的项目开始时间表：

```
 private void btnProperties_Click(object sender, EventArgs e)
    {
        ISchedulerFactory schedfabrikayeni;
        IScheduler schedyeni;
        JobDetail job;
        CronTrigger trigeryeni;
        NameValueCollection properties = new NameValueCollection();
        properties["FileName"] = @"C:\temp\pingresult.txt";
        properties["Ip"] = "192.168.16.14";

        schedfabrikayeni = new StdSchedulerFactory(properties);
        schedyeni = schedfabrikayeni.GetScheduler();
        job = new JobDetail("myJob", null, typeof(Test));

        JobDataMap map = new JobDataMap();
        map.Put("msg", "Your remotely added job has executed!");
        job.JobDataMap = map;
        string cronExpressiontxt = string.Empty;
        //0 0 12 1 4 ? *
        cronExpressiontxt = "0 0/1 * 1/1 * ? *";
        trigeryeni = new CronTrigger("triger1", null, "myJob", null, cronExpressiontxt);

        schedyeni.ScheduleJob(job, trigeryeni);
        schedyeni.Start();
    } 
```

但我的 Ip 为 null 我的 FileName 为 null。如何使用以下用法设置属性：

```
 NameValueCollection properties = new NameValueCollection();
        properties["FileName"] = @"C:\temp\pingresult.txt";
        properties["Ip"] = "192.168.16.14";

        schedfabrikayeni = new StdSchedulerFactory(properties); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:11:18.960

我必须同意@jvilalta 和@sgmoore，您需要使用 JobDataMap 来存储有状态数据。这是我如何使用 JobDataMap 属性的示例：

```
 protected override void ExecuteWorker(IJobExecutionContext context)
    {
        try
        {
            SomeProcessor someProcessor;

            // If the JobDataMap doesn't contain the initialized key yet, then this job hasn't been run before.
            // Initialize state data if this is the case; otherwise, get state data from the JobDataMap.
            if (!context.JobDetail.JobDataMap.Contains(QUARTZ_KEY_PROCESSOR))
            {
                someProcessor = someProcessorFactory.Create();

                if (someProcessor == null)
                    return;

                context.JobDetail.JobDataMap[QUARTZ_KEY_PROCESSOR] = someProcessor;
            }
            else
            {
                someProcessor = (someProcessor)context.JobDetail.JobDataMap[QUARTZ_KEY_PROCESSOR];
            }

            ExecuteETL(someProcessor, DateTime.MaxValue);
        }
        catch (Exception e)
        {
            m_log.Fatal("Scheduled job execution failed.", e);
            // This method can only throw a JobExecutionException.
            // http://quartznet.sourceforge.net/tutorial/lesson_3.html
            throw new JobExecutionException(e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T18:16:54.093

你从哪里得到这样的想法？我没有看到任何这样的例子。

我可能是错的，但据我了解，您传递给调度程序的 NameValueCollection 属性是用于配置调度程序本身工作方式的设置。例如，如果您希望您的调度程序使用 sql 数据库，您可以将（除其他外）quartz.jobStore.type 的值设置为“Quartz.Impl.AdoJobStore.JobStoreTX, Quartz”。

我假设如果您传递了调度程序不知道的任何额外属性，它们将被简单地忽略。

特别是，似乎没有任何方法可以访问调度程序上的属性，这再次表明只需要/用于初始化调度程序。

> 请不要说“为什么不使用'JobDetail.JobDataMap'？”

JobDataMap 似乎正是为此目的而设计的。如果出于某种原因它对您不起作用，您最好解释它**为什么**不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:02:14.183

您可以通过实现自定义调度程序工厂和/或自定义作业工厂来做到这一点。默认调度程序和作业工厂不支持像您描述的那样设置作业属性。正如@sgmoore 所说，JobDataMap 是将参数传递给作业的正确方法。

FWIW，您拥有的代码将无法正常工作。调度程序本身需要作为单例进行管理，并且一旦创建，只要调度程序需要启动并运行，就需要维护对它的引用。否则它将被垃圾收集。

以下是我写的一些[帖子](http://jayvilalta.com/blog/tag/ijobfactory/)，如果您决定实施工作工厂，您可能会感兴趣。

# android - achartengine 演示，没有 R 文件的痕迹

> ID：11808509
> 
> 赞同：1
> 
> 时间：2012-08-04T12:02:23.597
> 
> 标签：android, eclipse, achartengine

我正在尝试在我的计算机上运行 achartengine 演示源。我正确地将 zipfile(achartengine-1.0.0-demo-source.zip) 作为项目导入我的工作区。根本没有 gen 文件夹。

我检查了；没有“import Android.R”行**。**

然后几乎每个导入行或方法都会收到“无法解决”错误。项目资源管理器菜单中有一行说“无法获取项目的系统库”我也不知道该怎么办。

所以 Eclipse 建议我将 Android.jar 导入到我的项目中，然后我就这样做了。一切似乎都很好，但仍然存在一个问题。

像这样的行仍然有错误

导入“org.achartengine.chartdemo.demo.R;”

是的！尽管如此，不存在 gen 文件夹，因此没有 R 文件。

我知道在 android 包中导入了一个 R 文件，但我无法删除它。我还检查了我所有的资源和 xml 名称都是**小写**的。

有人可以帮我吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:23:06.353

有同样的问题。解决了。不要导入 zip 文件。提取 zip 文件并作为现有项目导入。

另外，@override 语句可能会出错：可以通过将兼容性设置为 1.6 级[Java 7 语言功能与 Android来解决](https://stackoverflow.com/questions/7153989/java-7-language-features-with-android)

另外，您可能会在演示运行时遇到错误 - 此处的解决方案（参见 Shine 的帖子）[achartengine 演示编译，但运行时错误](https://stackoverflow.com/questions/10433847/achartengine-demo-compiling-but-runtime-error)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:54:01.937

如果您安装了 ADT 插件，则 R 类和 gen 目录由 Eclipse 自动生成。请查看[此](https://stackoverflow.com/questions/10160778/the-application-achartengine-has-stopped-unexpectedly-please-try-again/10496375#10496375)内容，因为它可以帮助您正确设置项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T20:08:10.947

这可能对某人有所帮助，主要是必要的。

我不得不将我的**lib**文件夹更改为**libs**。

# php - php-Mysql-smarty 从多个表中获取数据

> ID：11808513
> 
> 赞同：1
> 
> 时间：2012-08-04T12:03:11.393
> 
> 标签：php, mysql, smarty

我有个问题。我解决不了。我不擅长 PHP-MySQL。

我有三张桌子。

第一个表：链接 --> 行：linkid、link、orderlink

第二个表：sublinkss1 --> 行：sublink1id,sublink1,ordersublink1,link,linkid

第三个表：sublinkss2 --> 行：sublink2id,sublink2,ordersublink2,sublink1,sublink1id

```
 $get_data=mysql_query("select linkss.link, sublinkss1.sublink1, sublinkss2.sublink2 from linkss,sublinkss1, sublinkss2 where sublinkss1.linkid=linkss.linkid and sublinkss2.sublink1id=sublinkss1.sublink1id order by orderlink, ordersublink1, ordersublink2");
 while ($row=mysql_fetch_assoc($get_data)) {
    $data[$row["link"]][$row["sublink1"]][$row["sublink2"]]=array($row["link"],$row["sublink1"],$row["sublink2"]);        
    }          
    $smarty = new Smarty();        
    $smarty->assign('data',$data); 
```

tpl文件是这个

```
<ul>
{foreach key=link from=$data item=linkss}
<li><a href="#">{$link}</a>
<ul>
{foreach key=sublink1 item=sublinkss1 from=$linkss }
<li><a href="#">
{$sublink1}
</a>

<ul>
{foreach key=sublink2 item=sublinkss2 from=$sublinkss1 }
<li><a href="#">
{$sublink2}
</a>

</li>
{/foreach}
</ul>

</li>
{/foreach}
</ul>

</li>
{/foreach}
</ul> 
```

例如，一些数据存储在数据库中，我想要这样的输出

```
<ul>
<li>Home Page
<ul><li>Projects</li></ul>
</li>
<li>About Us
<ul><li>History</li></ul>
<ul><li>Products
<ul><li>Product1</li></ul>
<ul><li>Product2</li></ul>
<ul><li>Product3</li></ul>
</li></ul>
</li>
<li>Contact Us</li>
</ul> 
```

但是这些代码不能正常工作。我尝试使用内连接和左连接，但我无法处理。请问你能帮帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:33:14.797

我认为您将需要与您在问题中所写类似的 SQL 查询。在这种情况下，您将获得类似的行：

```
link1,sublink1,subsublink1
link1,sublink1,subsublink2
link1,sublink1,subsublink3
link1,sublink2,subsublink4
link1,sublink2,subsublink5
link1,sublink2,subsublink6
...
link2,sublink3,subsublink7
... 
```

您可以将此结果重新排列为 smarty：

```
current_link = ""; current_sublink = "";
desired_array = array();
foreach ($result as $r) {
    $desired_array[$r["link"]]["sublinks"][$r["sublink1"]][] = $r["sublink2"]; 
} 
```

如果我写的正确，您的结果将转换为这样的数组：

```
array(
    "link1" => array(
         "sublinks" => array(
              "sublink1" => array("subsublink1","subsublink2",...),
              "sublink2" => array("subsublink3","susbulink4",...),
              ...
         )
    ),
    "link2" => array(
         // same as link1
    )
) 
```

如果你的链接没有子链接，你需要`FROM link LEFT JOIN sublink1 ON ... LEFT JOIN sublink2 ON...`而不是`FROM link,sublink1,sublink2`你需要对 PHP 代码进行一些修改。

在 smarty 中：你需要嵌套`foreach`：

```
<ul>
{foreach from=$desired_array key=link item=link_item}
   <li>{$link}
       <ul>
       {foreach from=$link_item["sublinks"] key=sublink1 item=sublink_item}
          <li>{$sublink1}
          <ul>
          {foreach from=$sublink item=sublink_item2}
             <li>{$sublink_item2}</li>
          {/foreach}
          </ul></li>
       {/foreach}
       </ul>
   </il>
 {/foreach} 
```

也许这些代码并不完美，但我认为这是一个很好的起点（您可以包括检查子链接数组的计数是否不为零等）

# sql - 选择日期和时间范围

> ID：11808514
> 
> 赞同：1
> 
> 时间：2012-08-04T12:03:29.583
> 
> 标签：sql, oracle

如何仅选择大于 40 天的日期？

```
SELECT name, gender, WardNo, StartOfOccupancy, EndOfOccupancy  
  FROM Patient, Occupancy  
  WHERE EndOfOccupancy > 40 StartOfOccupancy; 
```

我想显示该人在结束入住之前已经工作超过 40 天的数据，我尝试了许多变体，但无法弄清楚如何构建最后一行并不断收到此错误：

```
ORA-00932: inconsistent datatypes: expected DATE got NUMBER 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:17:12.690

您将需要检查边界情况，看看您是否得到了您想要的。如果您使用 Oracle DATE 数据类型，您可能希望比较 TRUNC(EndOfOccupancy) 和 TRUNC(StartOfOccupancy) 以摆脱时间组件。

```
SELECT name, gender, WardNo, StartOfOccupancy, EndOfOccupancy  
  FROM Patient, Occupancy  
  WHERE TRUNC(EndOfOccupancy) - TRUNC(StartOfOccupancy) >= 40; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:05:58.787

尝试

```
SELECT name, gender, WardNo, StartOfOccupancy, EndOfOccupancy
FROM Patient, Occupancy
WHERE EndOfOccupancy > DATE_ADD(StartOfOccupancy, INTERVAL 40 DAY) 
```

# css - Container Div 意外停止

> ID：11808516
> 
> 赞同：1
> 
> 时间：2012-08-04T12:03:58.560
> 
> 标签：css, html

我正在使用 Nivo Slider 创建一个带有幻灯片的网站。出于某种原因，在我的 nivo 滑块 div 之后，即使我的所有 DIV 似乎都正确分层（并且正确关闭），我的容器 DIV 在 Nivo 滑块之后意外停止。

这是网站：[http ://cbchaverhill.onedirectionconnection.com](http://cbchaverhill.onedirectionconnection.com)

以下是我的 DIV 的设置方式：

```
<div id="container" class="shadow">

<div id="title">
<div id="titleleft">Calvary Baptist Church</div>
<div id="cbcstuff">
Calvary Baptist Church<br>
13 Ashland Street<br>
PO Box 781<br>
Haverhill, MA 01830
</div>
</div>

<div id="navi">

<?php wp_nav_menu( array( 'sort_column' => 'menu_order', 'container_class' => 'access', 'menu_class' => 'access' ) ); ?>

</div>

<div id="header">

<div id="slide">

<div id="slider" class="nivoSlider">
            <img src="/wp-content/themes/cbc/001.png" alt="" />
            <img src="/wp-content/themes/cbc/002.png" alt="" />
            <img src="/wp-content/themes/cbc/003.png" alt="" />
        </div>
<script type="text/javascript" src="/nivo-slider/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="/nivo-slider/jquery.nivo.slider.js"></script>
<script type="text/javascript">
$(window).load(function() {
$('#slider').nivoSlider({
    effect: 'fade',
    animSpeed: 500,
    pauseTime: 4000,
    startSlide: 0,
    directionNav: false,
    directionNavHide: true,
    controlNav: false,
    controlNavThumbs: false,
    pauseOnHover: true,
    manualAdvance: false,
    randomStart: false,
});
});
</script>

</div>

<div id="sidebarr">

Blah blah blah Blah blah blah Blah blah blah Blah blah blah.
Blah blah blah Blah blah blah Blah blah blah Blah blah blah.

</div>

<div id="content"> 
```

如您所见，容器 DIV 在幻灯片放映后立即停止，出于某种原因，我似乎无法弄清楚，即使没有内容，页面也会延伸超过 4000 像素。

如果有人有任何意见，将不胜感激。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:08:18.617

有趣的是，由于您触发了 Quirks Mode，它不会在 IE 中发生（删除之前的注释`<!DOCTYPE>`以解决该问题）。

问题是由浮动引起的。要修复，只需添加`overflow:hidden`到您的 Container div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:11:48.360

缺少结束标签`</html> and </body>`，并且

如果您正在处理`float`，请将`overflow`属性添加到您的父 div 或`clear:both` 在浮动 div 之后添加。

# c++ - 线程的创建，CRT和DLL的意思是怎么做的？

> ID：11808525
> 
> 赞同：5
> 
> 时间：2012-08-04T12:05:13.110
> 
> 标签：c++, windows, dll, crt

所以我知道 CreateThread 和 CRT 会导致内存泄漏，信号不起作用，应该使用 _beginthread 或 _beginthreadex 函数。

在编写应用程序时这一切都很好，但是那些正在为其他应用程序编写 dll 的人呢（无论是普通的 c dll、com 对象、插件等）。无法保证调用 DLL 的线程是如何创建的，即使他们使用 __beginthread(ex) 也很可能打赌他们有不同的 CRT 实现\版本。

那么程序员到底应该做什么呢？不使用CRT？生成一个内部线程并将所有工作卸载到该线程（不使用 CRT 和调用线程）？DllMain 和附加/分离东西的一些技巧可以正确设置和关闭所有线程，无论它们是如何创建的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T16:35:18.280

> CreateThread 和 CRT 可能会导致内存泄漏

不，这是一个非常难以消除的误解，出于某种原因。在上个世纪使用 _beginthread() 是必要的，VS6 是最后一个具有 CRT 的 VS 版本仍然需要它。

这已经得到修复，在很大程度上是为了处理对添加到 Windows 2000 的线程池的支持。显然你不能在 CRT 中做任何事情来处理它们，这些线程是由操作系统本身启动的。实现非常简单。只要 CRT 需要一个线程局部变量，例如 strtok() 所需的变量，它首先检查是否已经为线程分配了 TLS 存储。如果没有，它会即时分配它。

只需使用 CreateThread() 就不用担心，当然隐含假设您不再使用 14 岁的编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:16:26.293

有两种选择：

1.  不要使用 DLL 中的 CRT。
2.  提供多个 DLL，每个受支持的工具链版本一个。

如果 1 不是可接受的解决方案，则选择 2。请注意，无论如何您都必须提供多个 DLL，例如，如果您的用户针对 32 位*和*64 位体系结构进行编译。

# android - Android：包括单独的库项目（例如 Facebook SDK）

> ID：11808526
> 
> 赞同：0
> 
> 时间：2012-08-04T12:05:14.393
> 
> 标签：android, facebook

我已将 facebook SDK 添加到我的工作区并将其添加到我的应用程序项目属性中的库中。我注意到，如果在我尝试构建我的应用程序时未打开 facebook SDK 项目，则构建失败，因为 facebook 项目也需要打开。我只是想知道是否必须在发布之前将 facebook sdk 复制到我的项目文件夹中，还是 eclipse 会自动将其构建到应用程序 APK 文件中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:10:18.103

您只需从 Facebook-sdk 所在的文件创建新项目。然后右键单击您的项目 --> 属性 --> Android，然后在库部分单击添加并选择 Facebook SDK。您不必将 Facebook-sdk 复制到您的项目中，eclipse 会为您完成这项工作。

# javascript - 如何在客户端使用 ImageMap 可点击区域？

> ID：11808528
> 
> 赞同：3
> 
> 时间：2012-08-04T12:05:28.723
> 
> 标签：javascript, asp.net

有没有人使用 javascript 来处理 ImageMap 的可点击部分？应该在 IE 和 Firefox 中都可以使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:19:01.643

您可以使用库进行图像地图区域选择。在此之前，您必须创建图像的地图区域并使用库。

1) 映射库

[映射库](http://www.netzgesta.de/mapper/)

2) CVI地图库

[CVI地图库](http://code.dma.unipi.it/p/tentacles/browser/trunk/tentacles/public/js/mapper/cvi_map_lib.js?rev=11)

# c# - C# Windows RT 列表框水平滚动问题

> ID：11808529
> 
> 赞同：0
> 
> 时间：2012-08-04T12:05:41.290
> 
> 标签：c#, .net, microsoft-metro, windows-runtime, winrt-xaml

我将以下列表框控件放置在网格内，但列表框无法正确水平滚动。如果您将滚动条拖到它上面可以正常工作，但是如果您单击箭头，它只会滚动到一半。我该如何解决这种行为？

```
<Page
x:Class="App5.MainPage"
IsTabStop="false"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App5"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
      <ListBox Height="400" Width="200" 
       ScrollViewer.HorizontalScrollBarVisibility="Auto" 
      ScrollViewer.HorizontalScrollMode="Auto">
      <ListBoxItem Content="This is my horizontal test # 1" />
      <ListBoxItem Content="This is my second horizontal test which spams across" />
      </ListBox>
</Grid>
</Page> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:53:31.520

对我来说，这看起来像是 WinRT 中的一个错误。您仍然可以单击 Horizo​​ntalLargeIncrease 重复按钮，这样就可以了。也许您可以编辑 ListBox/ScrollViewer/ScrollBar/Horizo​​ntalLargeIncrease RepeatButton 的模板以扩展其单击/触摸目标以覆盖 Horizo​​ntalSmallIncrease RepeatButton 的区域，因此无论您单击何处 - 它仍会完全滚动。

或者，您可以将 ListBox.ItemsPanel/ItemsPanelTemplate 设置为 StackPanel。请注意，默认值是 VirtualizingStackPanel，它更适合长列表，因为与 StackPanel 相比，它不会生成绑定集合中的所有项目，但您看到的问题似乎与 VirtualizingStackPanel 有关。

# python - 使用 Python 获取通过 SMS 发送的 Twitter 消息

> ID：11808534
> 
> 赞同：1
> 
> 时间：2012-08-04T12:06:17.120
> 
> 标签：python, twitter, tweepy

有谁知道使用 Python（或任何语言）收集 Twitter 短信的方法？我正在做一个项目，它需要一个由短信组成的语料库。我想，既然人们通过短信使用 Twitter，那就像从手机中收集短信一样好。

有任何想法吗？

顺便说一句，我使用 Tweepy 库来收集 Twitter 消息的公共流。但是，据我所知，这些无法区分文本消息或仅从计算机写入的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:00:23.577

在响应中，查找“源”元素。

它通常会说类似

```
"source" : "<a href="http://example.com" rel="nofollow">Some Twitter App</a>", 
```

如果一条推文已**通过 SMS / 短信**发送，它会说

```
"source" : "<a href="http://twitter.com/devices" rel="nofollow">txt</a>", 
```

遗憾的是，Twitter 搜索引擎*不允许*您按来源搜索，因此您可能必须捕获大量推文才能获得足够的短信。

# jquery - 简单的动画内容替换？

> ID：11808537
> 
> 赞同：0
> 
> 时间：2012-08-04T12:06:49.707
> 
> 标签：jquery, xhtml, slider, css-transitions

我需要一些关于前进的最佳方式的建议或关于稳定插件/解决方案的建议。

基本上：

1.  我有 2 行，每行 3 张图像，总共 6 张图像。
2.  每张照片都是一个产品。
3.  单击链接将更改内容以向您显示有关产品的更多信息。

下图显示了我尝试完成之前和之后：

1.  单击 6 个图像之一时，内容区域应更改，因此布局不同。
2.  新布局是：**A.**顶部放大的内容区域。**B.**底部有 5 个缩略图。

![布局示例](../Images/5af5fbbff157f4e727324062e835dfe0.png)

现在我不需要任何花哨的东西，我最终想做的是：

1.  在页面加载时显示“之前”状态。一旦单击其中一个图像，我们就无需返回此状态。

2.  一些如何从“之前”状态过渡到“之后”状态。我在想它可能就像在一个 div 中同时显示两个状态一样简单，其中一个被隐藏，只是让“之后”状态向上滚动或反弹，这样它要么覆盖“之前”状态，要么将其推出内容区域，所以它现在被隐藏了。

    *   类似于： [http ://webdeveloperpost.com/Articles/Create-your-own-sliding-divs-with-jQuery.aspx](http://webdeveloperpost.com/Articles/Create-your-own-sliding-divs-with-jQuery.aspx)
3.  一旦处于“之后”状态，单击产品图像可能会淡入/淡出其顶部的内容区域。

4.  虽然显示的产品不应该出现在底部，因此为什么它只显示 5 张图片而不是 6 张......我绝对可以将所有 6 张图片都放在底部以使事情变得更容易。

* * *

笔记：

A. 我在看这两个教程，但它们实际上改变了所有的页面内容。这对我不起作用，因为我在示例图像中显示的左侧有内容，我不希望它必须淡入淡出/加载：-http: [//css-tricks.com/动态页面替换内容/](http://css-tricks.com/dynamic-page-replacing-content/) - [http://net.tutsplus.com/tutorials/javascript-ajax/how-to-load-in-and-animate-content-with-jquery/comment-page-1/#注释](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-load-in-and-animate-content-with-jquery/comment-page-1/#comments)

B. 考虑一下，也许为了保持一致，也许最好：

*   从底部向上滑动到“之后”状态，将“之前”状态推开。
*   一旦处于“之后”状态，只需单击产品图像后从左向右滑动产品信息即可。
*   所以底部只显示5个产品图片，隐藏当前可见产品的div。但是，我认为总是显示所有 6 个可能会更容易。

我不确定实现上述内容将如何影响 SEO，但我知道除了隐藏一堆 div 并以某种方式使用 jquery 之外，我没有其他方法可以完成我正在做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:33:42.147

这并不难做到。我建议您将图像作为数组提供，其中包含每个图像上带有数据的对象。然后，在页面加载时，为每个图像创建一个“平铺”并将它们放在一个框中。处理瓷砖上的点击并根据需要移动它们，甚至可能`div`为产品信息创建一个。

我很无聊，所以我使用 jQuery 为你做了一个小例子：[JSFiddle 上的示例](http://jsfiddle.net/U2hqA/5/)

* * *

*注意：*我只在 Chrome 中测试了上述链接，因此在 Firefox、Opera 等上可能存在不一致。

# parsing - 单曲面解析——它是什么？

> ID：11808539
> 
> 赞同：23
> 
> 时间：2012-08-04T12:07:06.717
> 
> 标签：parsing, haskell, monoids

[我刚刚从Edward Kmett](https://stackoverflow.com/users/34707/edward-kmett)的名为“Monoids 简介”的[幻灯片](http://comonad.com/reader/wp-content/uploads/2009/08/IntroductionToMonoids.pdf)中偶然发现了*monoidal 解析*一词。幻灯片始终使用 haskell。

现在，在搜索这个词时，我只发现很少提到它，而且最多的是同一作者。所以我认为这个术语可以在这里解释。

那么，*monoidal 解析*是不是很有趣又新颖呢？除了我链接的幻灯片之外，它是否出现在任何地方？最重要的是它是什么？幻灯片本身似乎没有给出定义，也没有过多强调它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-04T18:49:01.670

我将从解析器通常的工作方式开始。从广义上讲，解析器按顺序获取输入标记。在某个时刻（通常在所有标记都用完之后），解析器返回输出。该模型的一个缺点是它本质上是顺序的：因为解析器按顺序对一系列标记进行操作，因此如何并行化该过程并不明显。

但是，如果我们可以访问能够将部分解析结果组合成单个结果的操作，则解析可以并行化。例如，如果我们的语言可以用上下文无关文法表示，那么我们可以分别并行地解析每个顶级定义，然后使用组合操作组装这些部分。

Monoidal 解析仅仅意味着解析器可以访问合适的组合函数。幺半群是具有零元素和二元关联运算符的结构。例如，列表形成一个幺半群，其中零是空列表，关联运算符是连接。请记住，关联性意味着`(a++b)++c == a++(b++c)`。碰巧这是确保我们能够以合理的方式重新组合解析结果的必要属性。重新组合子解析的确切顺序无关紧要，只要将每个子解析保存在正确的序列位置即可。

当然，对于实际编写并行解析器，也有必要适当地拆分块。如果要并行解析顶级定义，则必须能够识别该定义的开始位置。此任务通常由解析器本身执行。我记得，他的大部分幻灯片都涵盖了这个主题。在顶级定义上拆分是相当粗粒度的；理想情况下，我们的解析器将能够从任意标记开始，然后在应用 monoid 运算符时从片段中理解。

不幸的是，我不能说“monoidal parsing”是否是新的，因为我对文献不是特别熟悉。但是，我怀疑任何用于并行解析的模型或算法都涉及一个幺半群结构，即使它没有明确命名。一段时间以来，众所周知，monoids 适用于并行化问题，因此如果该技术在解析器研究人员中很常见，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T18:24:30.767

试试他在[这个页面上](http://comonad.com/reader/2009/iteratees-parsec-and-monoid/)的另一个演示文稿，它是您正在阅读的那个之后的第二个。这是新的东西，我真正能做的就是解释他的幻灯片，并告诉你这是一种尝试单子解析（如 Parsec）并使用更弱的代数结构，以便有更多的空间来重构计算。这个想法是为了提高并行性。

编辑：页面上的评论表明这两次会谈是背靠背安排的，所以你看到的幻灯片上提到的可能是第二次会谈的前兆。

# c# - 在 asp.net 中自动隐藏/显示 DIV

> ID：11808540
> 
> 赞同：-5
> 
> 时间：2012-08-04T12:07:08.900
> 
> 标签：c#, asp.net

我是 asp.net 的初学者。当新消息到达右下页时，我需要提醒当前登录的用户。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:17:07.857

为此，您可以使用通知查看此网址 [http://www.magic-dev.com/send-notification-signalr.htm](http://www.magic-dev.com/send-notification-signalr.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:17:27.920

我假设您已经创建了一个 div，其中包含与用户收件箱或自定义消息相关的控件。

首先，我建议将控件放在 asp:Panel 中，而不是 . 这样您就可以随时隐藏和显示面板。

强制面板在页面加载时隐藏。然后，在 Page_Load 或 Page_Init 中创建一个方法来检查用户何时有消息。如果是这样，使面板可见。

我假设您将消息存储在某种数据库（数据库）中。如果是这样，请在 PrivateMessage 表中创建一个新列以保存用户是否已阅读 PM 的天气。这将允许您轻松区分何时显示 asp:Panel。

为 asp:Panel 使用浮动标签，然后将其放置在屏幕上您想要的任何位置。

没有您的任何来源或任何信息，这是我能提供的最好的。

# java - Apache HttpClient 返回内容为空的实体

> ID：11808547
> 
> 赞同：1
> 
> 时间：2012-08-04T12:08:27.770
> 
> 标签：java, httpclient

我正在尝试借助 Apache HttpClient 4.2 (Java) 获取一系列网页。问题是：系列中的一些HttpEntities内容为空，即：

```
is = new ByteArrayInputStream(EntityUtils.toByteArray(entity))
System.out.println(response.getStatusLine());
System.out.println(is.available()); 
```

显示 HTTP/1.1 200 OK 和 0。对于其他显示，例如 HTTP/1.1 200 OK 和 64344。如果我重新启动代码，该系列中的另一个 HttpEntities 可能为空。我做了一个递归，在同一个程序中运行网页，直到获得非零内容——经过一些调用，我得到了它……我在 Win'XP 下运行程序。

代码本身（没有递归）：

```
public InputStream loadURL(String url) throws IOException {
    PoolingClientConnectionManager connManager = new PoolingClientConnectionManager();
    DefaultHttpClient httpclient = new DefaultHttpClient(connManager);
    InputStream is = null;
    try {
        HttpGet httpget = new HttpGet(url);
        HttpResponse response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();
        if (entity != null) {
            try {
                System.out.println("========================================");
                is = new ByteArrayInputStream(EntityUtils.toByteArray(entity));
                System.out.println(is.available());
                System.out.println(response.getStatusLine());
                System.out.println("========================================");
            } catch (IOException ex) {
                throw ex;
            } catch (RuntimeException ex) {
                httpget.abort();
                throw ex;
            }
        }
    } catch (ClientProtocolException ex) {
        throw ex;
    } finally {
        httpclient.getConnectionManager().shutdown();
    }
    return is;
} 
```

InputStream 在外部代码中关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:06:12.560

如果您依靠`available()`告诉您实体是否为空，则说明您在滥用它。它返回可以在*不阻塞的情况下读取的字节数。*检查 Javadoc，您会在其中找到一个特定的警告，禁止使用它来预测传入数据的总长度。那不是它的用途。

# visual-studio-2010 - 当我在 C# 中键入 { 时，如何阻止 Visual Studio 2010 插入 }？

> ID：11808549
> 
> 赞同：1
> 
> 时间：2012-08-04T12:08:30.853
> 
> 标签：visual-studio-2010

当我输入

```
new List<T> { 
```

如何阻止 Visual Studio 自动将其更改为

```
new List<T> {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T12:13:18.453

默认情况下，Visual Studio 不插入`}`. 它可以通过 ReSharper 或其他插件（例如 Productivity Power Tools）来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:18:49.583

工具 > 生产力电动工具 > 自动支撑完成 > 关闭

这样排序:)

直到现在我才意识到它是那个插件。

谢谢

# javascript - 在 JavasciptMVC 中存储常量值的最佳方法是什么

> ID：11808550
> 
> 赞同：1
> 
> 时间：2012-08-04T12:08:45.043
> 
> 标签：javascript, jquery, javascriptmvc, stealjs

我知道 JavaScript 中没有常量，但是我想单独存储配置值以使它们易于查找和调整。

1.  创建一个单独`$.Class`的并将键值对存储在静态部分中
2.  或者让它们从 JSON 配置文件中读取
3.  或者更好的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:14:06.980

我会选择＃2。我猜 JSON 比扩展具有静态属性的类更具可读性。

但是，我不会使用 XHR 读取 JSON，而只是将其设计为 JSONP。然后 JSON 实际上得到一个对象字面量，它可以分配给应用程序的任何静态变量。你甚至可以通过使用像`$.extend(MyClass, {…});`.

# php - fclose 警告：fclose()：提供的参数不是有效的流资源

> ID：11808551
> 
> 赞同：2
> 
> 时间：2012-08-04T12:08:48.630
> 
> 标签：php, fopen, fwrite, fclose

我在我的页面上收到警告

> 警告：fclose()：提供的参数不是有效的流资源

使用以下代码

```
$fp = fopen('data.txt', 'w');
$write = '2';
fwrite($fp, $write);
fclose($fp); 
```

**更新代码**

```
if(isset($_REQUEST['go1']))
{
    $fp = fopen('data.txt', 'w');
    $write = '1';
    $fp1 = fopen('file.php', 'w');
    $write1 = '<br><img src="/1/online.png" style="position:absolute; z-index:-2;" />';
}
if(isset($_REQUEST['go2']))
{

    $fp = fopen('data.txt', 'w');
    $write = '2';
    $fp1 = fopen('file.php', 'w');
    $write1 = '<br><img src="/1/offline.png" style="position:absolute; z-index:-2;" />';
}

fwrite($fp, $write);
fclose($fp);
fwrite($fp1, $write1);
fclose($fp1);

$fp = fopen('data.txt', 'r');
$contents = fread($fp, filesize('data.txt'));
fclose($fp);
if($contents == '1')
    include('file.php');
else if($contents == '2')
    include('file.php');
else
    echo 'Something else...'; 
```

在第 27 行和第 29 行第 27 行得到错误

```
fclose($fp); 
```

第 29 行

```
fclose($fp1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:47:21.030

您的问题出在“if-else”语句中（文件未打开）...检查您的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-03T18:13:28.677

当您的 if() 条件返回 false 时，没有打开 $fp 文件，因此没有什么可关闭的。PHP 不明白您要关闭什么文件，因为没有打开任何文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T12:10:46.980

立即浮现在脑海中的唯一可能性是`fopen`由于某种原因失败，`$fp`设置为`FALSE`.

例如，如果不允许您创建或覆盖`data.txt`文件（权限等），则可能会发生这种情况。

来自 PHP 的`fopen`和`fclose`文档（稍作解释）：

> fopen() 调用成功时返回文件指针资源，错误时返回 FALSE。
> 
> fclose() 的文件指针必须有效，并且必须指向由 fopen() 或 fsockopen()*成功打开的文件。*

（我的斜体）。在尝试使用文件句柄之前，您确实应该检查返回值`fopen`以确保它有效。

* * *

根据您更新的代码，您应该检查其中一个请求变量（go1 或 go2）是否已实际设置。如果两者都不是，那么您将不会打开该文件，但您仍会尝试关闭它。

而且，尽管您*说它*已写入文件，但您可能希望通过在开始运行之前将其删除来确认这一点。您可能只是看到以前的文件。

# php - XML 解析速度是否足以处理 i18n / l10n 和其他任务，还是我应该使用 MySQL？

> ID：11808552
> 
> 赞同：0
> 
> 时间：2012-08-04T12:08:52.923
> 
> 标签：php, mysql, xml, localization, internationalization

问题：在 PHP 5.3/MySQL 站点中处理翻译（可能还检索/存储插件首选项和文件结构），结构类似于 CMS。

我坚持的方法是拥有一个包含各种语言的所有通用翻译的大 XML 文件，以及具有单个页面和单个插件本地化的较小 XML 文件。

XML 解析是否足够快以执行任务，还是我应该依赖其他方法（简单的文本文件、数据库表......）？哪个是最快的 XML 解析器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:29:59.603

足够快对于您当前的项目来说太具体了。
我认为这可能是[过早的优化](http://c2.com/cgi/wiki?PrematureOptimization)，我的建议是做一个对您和您的翻译人员最方便的优化，如果它不起作用，则有可能更改为另一种方法。
更改翻译方法并使用数组/等将现有翻译从/移到 XML/DB/PHP 文件并不是很困难。您还可以使用 memcache 来避免每次都加载和解析翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T08:16:37.803

在不知道您的性能要求的情况下，我们如何判断它是否满足您的性能要求？

从本质上讲，它没有理由不够快。当然，您必须小心确保缓存翻译字典等可重用资源，使用 XSLT 键进行快速索引访问，等等。

# csv - 在 Mathematica 中拟合 CSV 数据

> ID：11808554
> 
> 赞同：2
> 
> 时间：2012-08-04T12:09:07.150
> 
> 标签：csv, import, wolfram-mathematica

我有一个[CSV 文件](http://pastebin.com/pPpVyAzN)，请注意您应该复制并粘贴它并将文件名重命名为 GPA.csv，我想将其导入 Mathematica 并使用幂函数对其进行调整。

注意：我知道将它与幂函数完美拟合是非常不可取的，因为它会给出错误的预测。

所以我开始做以下事情：

```
data = Import["C:\\GPA.csv", "Table"]
linfit = Fit[data, {1,x}, x] 
```

现在奇怪的是它给了我一个错误说明：

> Fit::fitc：坐标数 (0) 不等于变量数 (1)。>>

但我确信我已经输入了超过 350 个坐标。我究竟做错了什么？

PS：我也尝试过 test = Transpose[data]，但是我得到了大约 350 个坐标，它仍然不等于变量的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T12:22:37.320

要回答您的两个问题：

1.  `Import["C:\\GPA.CSV", "Data"]`将使一切正常 - 就像简单的那样`Import["C:\\GPA.CSV"]`。

2.  这些东西不同的原因是因为 Mathematica 有一种不直观且 (IMO) 令人困惑的文件导入方式。`"Table"`不起作用的具体原因是这被解释为“文件格式”，默认情况下 - 请参阅[格式文档](http://reference.wolfram.com/mathematica/ref/format/Table.html)-`Import`假设在这种情况下：

    ```
    "FieldSeparators" = {" ","\t"} 
    ```

    这样您的逗号实际上被假定为每行字符串的一部分，而不是分隔符 - 只允许使用空格和制表符。`1, 2`（如果您有一个文件包含一个字符串`"1,"`和一个数字，这会更加令人困惑`2`。）因此，您也可以使用

    ```
    Import["C:\\GPA.CSV", "Table", "FieldSeparators" -> ","] 
    ```

    当然，CSV 文件格式假定逗号作为您想要的分隔符。令人困惑的是`"Data"`，在这种情况下，它*不是*“文件格式”，而是“元素”。这意味着`.csv`文件扩展名允许将文件作为 CSV 文件导入，然后您请求……等待它……导入文件中的“数据”元素。哪个是数据。

您可以尝试阅读[文档](http://reference.wolfram.com/mathematica/ref/Import.html)和[格式列表，](http://reference.wolfram.com/mathematica/guide/ImportingAndExporting.html)[但`Import`](http://reference.wolfram.com/mathematica/ref/Import.html)我想您已经尝试过了。

# php - 如何从会话数组中删除行并再次排序数组列表？

> ID：11808559
> 
> 赞同：1
> 
> 时间：2012-08-04T12:10:11.797
> 
> 标签：php, codeigniter, session

我有一个网站，用户可以添加或删除自己喜欢的书籍。我在页面的每一行都添加了“添加”和“删除”按钮。我可以在会话数组中添加喜欢的书籍，这没有问题。但我无法从“用户最喜欢的书单”中删除一行。

我用过jquery，ajax。我可以取消设置行，但我想要的是从会话中完全删除该行并再次订购。尽管我取消了行的设置，但会话的元素数并没有改变。

这是代码：

```
 //There are rows in $newdata. That is to say, newdata array is not empty now.
    // I just add newdata array here to show that there is an array called newdata.

    var $newdata = array();

    function delete_row($rowid) {

    if (isset($rowid)) {

    $this->newdata = $this->session->userdata('contents');
    unset($this->newdata[$rowid]['id']);
    unset($this->newdata[$rowid]['name']);
    unset($this->newdata[$rowid]['author']);
    unset($this->newdata[$rowid]['year']);

    $this->session->set_userdata(array('contents' => $this->newdata));

    $contents = $this->session->userdata('contents');

    $i = 0;

        foreach ($contents as $key)         
        {
            if ($key['id'] != "") {
                $i++;

            $this->newdata[$i]['id'] = $key['id'];
            $this->newdata[$i]['name'] = $key['name'];
            $this->newdata[$i]['author'] =$key['author'];
            $this->newdata[$i]['year'] =$key['year'];

            } else {

            }
        }

    $this->session->set_userdata(array('contents' => $this->newdata));

    } else {

        echo "There is no row to be deleted";
    }
} 
```

这是查看代码（html）：

```
<div>

        <?php 

        if (count($contents)==0) {
        echo 'There is no favorite book';
        } else {

        echo '<table class="table table-striped">';

        $i = 0;
        echo count($contents);
        foreach ($contents as $items) {

        echo '<tr>';
        echo '<td>'.$items['id'].'</td>';
        echo '<td>'.$items['name'].'</td>';
        echo '<td>'.$items['author'].'</td>';
        echo '<td>'.$items['year'].'</td>';
        echo '<td><button id='.$i .' class="delete_row"><b>DELETE</b></button></td>';
        echo '</tr>';
        $i++;

    }
    echo '</table>';

    }
        ?>
    </div> 
```

这是jQuery代码：

```
$('.delete_row').click(function(event) {
event.preventDefault();
var id = $(this).attr("id"); 
window.location.href = '/favorite/delete_row/'+id;

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:17:48.587

我认为问题出在 del 按钮 id 上。您正在使用`$i`变量而不是`$items['id']`. 因此 JS 重定向会将 count int 而不是项目`id`发送到删除页面。

改变：

```
echo '<td><button id='. $i .' class="delete_row"><b>DELETE</b></button></td>'; 
```

进入：

```
echo '<td><button id='. $items['id'] .' class="delete_row"><b>DELETE</b></button></td>'; 
```

# java - 在谷歌 appengine 部署战争文件后，从内部检查战争文件

> ID：11808561
> 
> 赞同：1
> 
> 时间：2012-08-04T12:10:17.457
> 
> 标签：java, google-app-engine, jakarta-ee, war

在我在谷歌应用引擎上部署我的应用程序后，我可以在战争中存在的文件夹中看到一种方法。我必须检查是否有*文件*上传到那里。我的意思是我可以从内部检查战争文件。我可以在硬盘驱动器上使用*winrar执行此操作。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:12:52.340

**是**的，您可以在将项目部署到 Google App Engine 后读取应用程序的文件。

由于在您的项目中使用 java-ee，您可以使用**AppEngineFile**类。请参阅[文档](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/files/AppEngineFile)

# rspec - rspec 不按默认顺序打印测试

> ID：11808564
> 
> 赞同：0
> 
> 时间：2012-08-04T12:10:48.590
> 
> 标签：rspec, guard

我正在使用警卫，所以从命令行运行特定测试对我来说并不方便，所以我猜想 rspec 将按照文件中的顺序运行所有测试，但 rspec 运行测试就像在这个例子中一样：

```
# ./spec/requests/projects_spec.rb:90:...
# ./spec/requests/projects_spec.rb:99:...
# ./spec/requests/projects_spec.rb:105:...
# ./spec/requests/projects_spec.rb:115:...
# ./spec/requests/projects_spec.rb:55:...
# ./spec/requests/projects_spec.rb:61:...
# ./spec/requests/projects_spec.rb:68:...
# ./spec/requests/projects_spec.rb:75:... 
```

我已将这一行添加到 .rspec 文件中，`--order default`但它没有改变任何内容。

rspec 的版本是 2.11.0

如何使 rspec 打印在文件中声明的测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:11:08.403

只需注释掉文件中的`config.order`行`spec_helper.rb`。

# php - Google Map API 3 标记未显示

> ID：11808570
> 
> 赞同：3
> 
> 时间：2012-08-04T12:12:12.003
> 
> 标签：php, ajax, codeigniter, google-maps, google-maps-api-3

我正在使用谷歌地图 API 3 和谷歌地理编码器。问题是它没有显示标记和信息窗口我通过 ajax 带来数据并调用函数 showAddress(elemId, address) 其中 elementId 是 div id 将在其中呈现地图。这是谷歌地图的代码

```
<script type="text/javascript">
//<![CDATA[

var geocoder;
var map;
var lat;
var lng;
function showAddress(elemId, address) {
    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status){
//        console.log(results[0].geometry.location.YA);
            lat = results[0].geometry.location.Ya;
            lng = results[0].geometry.location.Za;
                var mapOptions = {
                    zoom: 15,
                    center:  new google.maps.LatLng(lat, lng),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
            map = new google.maps.Map(document.getElementById(elemId),
                    mapOptions)
            $('a#full-'+elemId).attr('href','http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q='+lat+','+lng+'')
            var marker 
            marker = "marker_"+elemId;
            myLatlng = new google.maps.LatLng(lat,lng);
            marker = new google.maps.Marker({
                id:elemId,
                position: myLatlng,
                map: map
            });
            var infowindow = "infowindow"+elemId;
            infowindow  = new google.maps.InfoWindow({
            content: 'Hello world'
            });
            infowindow.open(map, marker);
            google.maps.event.trigger(map, 'resize');
    });

}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:32:49.450

首先 .Ya 和 .Za 没有记录在案的属性，所以如果你像在

```
lat = results[0].geometry.location.Ya;
lng = results[0].geometry.location.Za; 
```

该代码可能会破坏。

其次，**results[0].geometry.location**已经是**google.maps.LatLng()**对象，所以不需要单独提取 lat 和 lng 并创建一个新的。你可以像这样使用它：

```
map.setCenter(results[0].geometry.location);
var marker = new google.maps.Marker({
    id: elemId,
    map: map,
    position: results[0].geometry.location
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:37:38.560

1.  您没有检查对地理编码器的调用是否成功（地址是什么？）
2.  您没有使用文档化的界面，这些会随着版本的变化而改变：

    ```
     lat = results[0].geometry.location.Ya;
        lng = results[0].geometry.location.Za; 
    ```

# mysql - SQL 订单字符串作为数字

> ID：11808573
> 
> 赞同：174
> 
> 时间：2012-08-04T12:12:58.657
> 
> 标签：mysql, sql, string, numbers, sql-order-by

我将数字保存为`VARCHAR`MySQL 数据库。`INT`由于其他一些情况，我无法制作它们。

排序时将它们视为字符而不是数字。

在数据库中我有

```
1 2 3 4 5 6 7 8 9 10... 
```

在我的页面上，它显示了这样的有序列表：

```
1 10 2 3 4 5 6 7 8 9 
```

如何使它按数字升序排列？

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2012-08-04T12:15:44.993

如果可能，如果您只存储数字，则应将列的数据类型更改为数字。

如果你不能这样做，那么将你的列值`integer` *明确地*转换为

```
select col from yourtable
order by cast(col as unsigned) 
```

或*隐含地*，例如使用强制转换为数字的数学运算

```
select col from yourtable
order by col + 0 
```

BTW MySQL 从左到右转换字符串。例子：

```
string value  |  integer value after conversion
--------------+--------------------------------
'1'           |  1
'ABC'         |  0   /* the string does not contain a number, so the result is 0 */
'123miles'    |  123 
'$123'        |  0   /* the left side of the string does not start with a number */ 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2014-07-31T14:12:20.130

另一种方式，不使用单个演员表。

（对于使用 JPA 2.0 的人，不允许强制转换）

```
select col from yourtable
order by length(col),col 
```

编辑：仅适用于正整数

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2017-03-10T07:36:13.250

**另一种简单的方法**

`ORDER BY ABS(column_name)`

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-10-15T02:41:37.273

我用来排序的列有字母和数字的任意组合，所以我使用这篇文章中的建议作为起点并想出了这个。

```
DECLARE @tmp TABLE (ID VARCHAR(50));
INSERT INTO @tmp VALUES ('XYZ300');
INSERT INTO @tmp VALUES ('XYZ1002');
INSERT INTO @tmp VALUES ('106');
INSERT INTO @tmp VALUES ('206');
INSERT INTO @tmp VALUES ('1002');
INSERT INTO @tmp VALUES ('J206');
INSERT INTO @tmp VALUES ('J1002');

SELECT ID, (CASE WHEN ISNUMERIC(ID) = 1 THEN 0 ELSE 1 END) IsNum
FROM @tmp
ORDER BY IsNum, LEN(ID), ID; 
```

结果

```
ID
------------------------
106
206
1002
J206
J1002
XYZ300
XYZ1002 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-05-17T09:22:40.870

这对我有用。

```
select * from tablename
order by cast(columnname as int) asc 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-02-21T08:01:15.467

它可能对正在寻找相同解决方案的人有所帮助。

```
select * from tablename ORDER BY ABS(column_name) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-05-19T13:48:57.370

另一种转换方式。

如果您有字符串字段，则可以通过以下方式对其或其数字部分进行转换：添加前导零以使所有整数字符串具有相等的长度。

```
ORDER BY CONCAT( REPEAT(  "0", 18 - LENGTH( stringfield ) ) , stringfield ) 
```

或按字段的一部分排序，例如“tensymbols13”、“tensymbols1222”等。

```
ORDER BY CONCAT( REPEAT(  "0", 18 - LENGTH( LEFT( stringfield , 10 ) ) ) , LEFT( stringfield , 10 ) ) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-02-05T04:22:09.850

我也在寻找一个带有字母前缀的排序字段。这是我找到的解决方案。这可能对正在寻找相同解决方案的人有所帮助。

字段值：

```
FL01,FL02,FL03,FL04,FL05,...FL100,...FL123456789

select SUBSTRING(field,3,9) as field from table order by SUBSTRING(field,3,10)*1 desc 
```

`SUBSTRING(field,3,9)`我放 9 是因为 9 足以让我保存最多 9 位整数值。

所以结果将是 123456789 123456788 123456787 ... 100 99 ... 2 1

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-03-30T23:43:50.810

这将处理负数、分数、字符串，一切：

```
ORDER BY ISNUMERIC(col) DESC, Try_Parse(col AS decimal(10,2)), col; 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-03-26T20:37:30.580

如果您使用的是 AdonisJS 并且具有混合 ID，例如 ABC-202、ABC-201...，您可以将原始查询与 Query Builder 结合起来并实施上述解决方案 ( [https://stackoverflow.com/a/25061144/4040835](https://stackoverflow.com/a/25061144/4040835) )如下：

```
const sortField =
  'membership_id'
const sortDirection =
  'asc'
const subquery = UserProfile.query()
  .select(
    'user_profiles.id',
    'user_profiles.user_id',
    'user_profiles.membership_id',
    'user_profiles.first_name',
    'user_profiles.middle_name',
    'user_profiles.last_name',
    'user_profiles.mobile_number',
    'countries.citizenship',
    'states.name as state_of_origin',
    'user_profiles.gender',
    'user_profiles.created_at',
    'user_profiles.updated_at'
  )
  .leftJoin(
    'users',
    'user_profiles.user_id',
    'users.id'
  )
  .leftJoin(
    'countries',
    'user_profiles.nationality',
    'countries.id'
  )
  .leftJoin(
    'states',
    'user_profiles.state_of_origin',
    'states.id'
  )
  .orderByRaw(
    `SUBSTRING(:sortField:,3,15)*1 ${sortDirection}`,
    {
      sortField: sortField,
    }
  )
  .paginate(
    page,
    per_page
  ) 
```

**注意：** 在这一行：`SUBSTRING(:sortField:,3,15)*1 ${sortDirection}`，

1.  **'3'**代表数字前最后一个非数字字符的索引号。如果您的混合 ID 是“ABC-123”，那么您的索引号将为 4。
2.  **'15'**用于在连字符后捕获尽可能多的数字。
3.  **'1'**对子字符串执行数学运算，有效地将子字符串转换为数字。

参考 1：您可以在此处阅读有关原始查询中的参数绑定的更多信息：[https](https://knexjs.org/#Raw-Bindings) ://knexjs.org/#Raw-Bindings 参考 2：Adonis 原始查询：[https ://adonisjs.com/docs/4.1/query-builder# _raw_queries](https://adonisjs.com/docs/4.1/query-builder#_raw_queries)

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2015-11-18T11:34:35.480

将您的字段更改为 INT 而不是 VARCHAR。

> 由于其他一些情况，我无法将它们设为 INT。

然后先解决依赖的情况。否则，您正在解决真正的潜在问题。使用 MySQL CAST 是一种选择，但它掩盖了应该修复的错误模式。

# objective-c - 无法将对象添加到 NSMutableArray

> ID：11808579
> 
> 赞同：1
> 
> 时间：2012-08-04T12:13:39.823
> 
> 标签：objective-c, xcode4.3

我是一个使用 RPN 计算器的新手，我正在尝试设置一个由两个成员数组组成的数组来存储字符串/值对，以便以后可以使用它们来显示按下的数字/运算符的完整序列到达用户现在所在的任何地方。问题是，无论我做错了什么都意味着数组不会填充。关于如何解决这个问题的任何想法？

这是我的代码（`oneStringValuePair`并且`arrayOfStringValuePairs`是在 .h 中声明`(nonatomic, strong)`并在 .m 中合成的 NSMutableArrays）：

```
NSLog(@"result is float: %f",result);

self.formattedNumber = [NSString stringWithFormat:@"( %@%@%@ )",firstNumber,operation,secondNumber];

NSLog(@"String is %@",self.formattedNumber);

NSMutableArray *pair = self.oneStringValuePair;
NSMutableArray *array = self.arrayOfStringValuePairs;

pair = [pair init];
array = [array init];

if(pair==nil)
{
    NSLog(@"pair is nil.");
}

if (array==nil)
{
    NSLog(@"array is nil.");
}

[pair addObject:self.formattedNumber];

NSLog(@"first array element description: %@", [[pair lastObject] description]);
[pair addObject:[NSNumber numberWithFloat:result]];

NSLog(@"second array element description: %@",[[pair lastObject] description]);
NSLog(@"pair count: %@",self.oneStringValuePair.count);

if (self.arrayOfStringValuePairs)
{
    [array addObject:pair];
}

NSLog(@"count of pairs:  %@",array.count); 
```

这是 NSLog 的`5 3 + 6 /`：

```
2012-08-04 08:02:54.550 Calculator[83891:f803] result is float: 8.000000
2012-08-04 08:02:54.552 Calculator[83891:f803] String is ( 3+5 )
2012-08-04 08:02:54.552 Calculator[83891:f803] pair is nil.
2012-08-04 08:02:54.553 Calculator[83891:f803] array is nil.
2012-08-04 08:02:54.554 Calculator[83891:f803] first array element description: (null)
2012-08-04 08:02:54.555 Calculator[83891:f803] second array element description: (null)
2012-08-04 08:02:54.555 Calculator[83891:f803] pair count: (null)
2012-08-04 08:02:54.556 Calculator[83891:f803] count of pairs:  (null)
2012-08-04 08:02:55.987 Calculator[83891:f803] result is float: 0.750000
2012-08-04 08:02:55.988 Calculator[83891:f803] String is ( 6/8 )
2012-08-04 08:02:55.989 Calculator[83891:f803] pair is nil.
2012-08-04 08:02:55.990 Calculator[83891:f803] array is nil.
2012-08-04 08:02:55.991 Calculator[83891:f803] first array element description: (null)
2012-08-04 08:02:55.992 Calculator[83891:f803] second array element description: (null)
2012-08-04 08:02:55.993 Calculator[83891:f803] pair count: (null)
2012-08-04 08:02:55.994 Calculator[83891:f803] count of pairs:  (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:18:11.987

你有像下面这样初始化 NSMutableArray 吗？

```
NSMutableArray *pair = [NSMutableArray array]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:27:06.670

您的代码中几乎没有问题

```
NSLog(@"result is float: %f",result);

self.formattedNumber = [NSString stringWithFormat:@"( %@%@%@ )",firstNumber,operation,secondNumber];

NSLog(@"String is %@",self.formattedNumber);

// ***** add 
if (self.oneStringValuePair == nil)
{
    self.oneStringValuePair = [NSMutableArray array];
}

if (self.arrayOfStringValuePairs == nil)
{
    self.arrayOfStringValuePairs = [NSMutableArray array];
}

// *****
NSMutableArray *pair = self.oneStringValuePair;
NSMutableArray *array = self.arrayOfStringValuePairs;

//pair = [pair init];   // `init` is used to initialize object
//array = [array init]; // but not allocate object, if array is nil, [array init] will return nil

if (pair==nil)
{
    NSLog(@"pair is nil.");
}

if (array==nil)
{
    NSLog(@"array is nil.");
}

[pair addObject:self.formattedNumber];
NSLog(@"first array element description: %@", [[pair lastObject] description]);

[pair addObject:[NSNumber numberWithFloat:result]];
NSLog(@"second array element description: %@",[[pair lastObject] description]);

// the line below will crash if self.oneStringValuePair is not nil
//NSLog(@"pair count: %@",self.oneStringValuePair.count);
NSLog(@"pair count: %d",self.oneStringValuePair.count);

if (self.arrayOfStringValuePairs)
{
    [array addObject:pair];
}

// the line below will crash if array is not nil
//NSLog(@"count of pairs:  %@",array.count);
NSLog(@"count of pairs:  %d",array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T12:43:55.260

这是做什么的？

```
NSMutableArray *pair = self.oneStringValuePair;
NSMutableArray *array = self.arrayOfStringValuePairs;
pair = [pair init];
array = [array init]; 
```

您可以打印并检查`self.oneStringValuePair`&是否`self.arrayOfStringValuePairs`为 nil。如果为 nil，则像这样分配这两个对象。

```
self.oneStringValuePair = [[[NSMutableArray alloc] init] autorelease] 
```

也不需要打电话

```
pair = [pair init];
array = [array init]; 
```

尝试删除它。每当您为其分配对象时，都无需执行 init (Initializer)。

# ruby - 我无法安装 ruby 1.8.7

> ID：11808583
> 
> 赞同：1
> 
> 时间：2012-08-04T12:14:17.677
> 
> 标签：ruby, ubuntu, ruby-1.9.2, ruby-1.8.7

我想安装 ruby​​ 1.8.7 并从 main 卸载 ruby​​ 1.9.2。请不要像我那样建议 rvm 。但是 ruby​​ 1.9.2p0 粘在我的系统上。我试过`sudo apt-get remove ruby`了，它删除了 ruby​​，但是当我运行`ruby -v`它时显示 ruby​​ 1.9.2p0 在那里...我想为 redmine 安装 ruby​​ 1.8.7。

请建议如何删除 1.9.2 并安装 1.8.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T18:10:20.867

Rvm 的存在正是出于这个原因——你不需要删除 ruby​​ 1.9.2 来添加 1.8.7。查看[rvm 备忘单](http://cheat.errtheblog.com/s/rvm)并查看“Install Ruby”和“Selecting Ruby for Work”标题下的内容。

也就是说，当你想切换到它时`rvm install 1.8.7`，你应该能够运行。`rvm use 1.8.7`只需`rvm use 1.9.2`在您想切换回 Ruby 1.9.2 时运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:17:50.647

你有没有尝试过：？

```
apt-get install ruby1.8 
```

然后尝试运行：

```
$ ruby1.8 
```

# c# - 在 asp.net 中传递数据列表值（已关闭）

> ID：11808596
> 
> 赞同：1
> 
> 时间：2012-08-04T12:16:05.577
> 
> 标签：c#, asp.net, sql, datalist

我有一个绑定到数据库的数据列表，现在标签更改为链接按钮

```
<asp:DataList ID="DataList1" runat="server" DataSourceID="SqlDataSource1" >
<ItemTemplate>
<asp:LinkButton ID="LinkButton1" runat="server" Text='<%# Eval("username") %>'>
</asp:LinkButton>
.....some other datalist item 
</ItemTemplate>
</asp:DataList> 
```

对于这种情况，我希望链接按钮启动一个新页面，其中 Eval("username") 值被传递到新页面。

我正在考虑使用诸如 .... 之类的会话来传递它。

```
string any_variable ;
session["Picked_username_from_datalist"] = any_variable ;
response.redirect("newpage.aspx"); 
```

这样我将使用 session 传递的变量可以被操纵。

但我的问题是我不知道如何将 Text='<%# Eval("username") %> 分配给变量 any_variable .....

~~ 变量的赋值取决于绑定到数据库的数据绑定的文本 .... 例如 ... 第一个链接按钮文本是 username1 ，第二个是 username2 等等，基于我的 SQL 选择命令......

我需要选定的 Text='<%# Eval("username") %> 以便我可以操纵信息以根据该值显示另一个数据绑定控件。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T12:52:57.190

您可以使用 DataList 的 onitemcommand="DataList1_ItemCommand" 事件

```
<asp:DataList ID="DataList1" runat="server" DataSourceID="SqlDataSource1" onitemcommand="DataList1_ItemCommand" >
        <ItemTemplate>
        <asp:LinkButton ID="LinkButton1" runat="server" Text='<%# Eval("username") %>' CommandArgument='<%# Eval("username") %>' CommandName="Redirect">
        </asp:LinkButton>
        .....some other datalist item 
        </ItemTemplate>
        </asp:DataList> 
```

服务器端代码是

```
protected void DataList1_ItemCommand(object source, DataListCommandEventArgs e)
{
    if (e.CommandName == "Redirect")
    {
         Session["Picked_username_from_datalist"] = e.CommandArgument;
         Response.Redirect("newpage.aspx");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:24:44.107

我认为您必须使用项目绑定事件

```
void Item_Bound(Object sender, DataListItemEventArgs e)
{
   // here you can find the value as
       LinkButton lk= (LinkButton)e.Item.FindControl("LinkButton1");
    session["Picked_username_from_datalist"] = lk.Text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T12:25:31.780

很简单：

```
 <asp:DataList ID="DataList1" runat="server" DataSourceID="SqlDataSource1" >
     <ItemTemplate>
     <asp:LinkButton ID="LinkButton1" runat="server" Text='<%# Eval("username") %>' CommandName="Assign" CommandArgument='<%# Eval("username") %>'>
     </asp:LinkButton>
    .....some other datalist item 
     </ItemTemplate>
     </asp:DataList> 
```

请注意添加的新属性`CommandName`和命令参数。现在你可以用`[ItemCommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemcommand.aspx)`它来做任何你想做的事情。

```
void Item_Command(Object sender, DataListCommandEventArgs e) 
      {
         if(e.CommandName == "Assign") {
             string userName = e.CommandArgument;
         }

      }
```

另一种简单的方法是使用超链接代替链接按钮。

```
<asp:hyperlink id="link1" href='<%#Eval("username","/yourpage.aspx?userName={0}")' />
```

我希望这能帮到您。

# iphone - 无法写入 plist 文件 iOS

> ID：11808597
> 
> 赞同：1
> 
> 时间：2012-08-04T12:16:11.240
> 
> 标签：iphone, objective-c, ios

我在 stackoverflow 上阅读了很多关于此的问题，并且我确保在首次运行时将我的 plist 文件从捆绑包复制到文档目录。但是，现在当我尝试写入这个 plist 文件时，它没有成功写入。

```
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
NSString *documentsDirectory = [path objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"inAppList.plist"];
[infoDict setObject:[NSNumber numberWithInt:1] forKey:@"someKey"];
didWrite = [infoDict writeToFile:filePath atomically:YES]; 
```

didWrite 结果是“不”。

我确信 plist 文件正在被复制到文档目录中，因为我可以在管理器和我的设备选项卡中看到它。我也能够成功地从文档目录中读取文件。

可能只是一个很小的错误，但真的无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:07:37.673

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0]; 

plistpath = [[NSString alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:@"Product.plist"]]; 
```

进而

```
[array writeToFile:path atomically:YES]; 

[Whatever [Array or Dictionary] you want to Write in Plist] 
```

如果仍未创建 plist，则检查您的数组或字典是否必须为空。

还有一件事：确保您没有在 plist 中插入空值。如果您尝试这样做....那么它也无法创建plist。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T13:22:39.143

与您的代码类似，代码可能如下所示：

```
// get plist file path
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
NSString *documentsDirectory = [path objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"inAppList.plist"];

// set '1' forKey "somebody"
NSArray *objectArray = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:1],nil];
NSArray *keyArray = [[NSArray alloc] initWithObjects:@"someKey",nil];
NSDictionary *infodict = [[NSDictionary alloc] initWithObjects:objectArray forKeys:keyArray];

// write dictionary to file
BOOL didWrite = [infodict writeToFile:filePath atomically:YES]; 
```

# c# - Listview.Items.Clear() 不工作

> ID：11808600
> 
> 赞同：0
> 
> 时间：2012-08-04T12:16:54.360
> 
> 标签：c#, listview, timer, redundancy

我正在读取文件并使用计时器在列表视图中显示其内容。虽然我每次都使用 listview.items.clear()，但我的列表并没有清除，并且每次都会重复相同的数据来列出。

```
 private void timer1_Tick(object sender, EventArgs e)
    {
        bufferedListView1.Items.Clear();
        StreamReader sr = new StreamReader("C:\\sample.txt");
        string s;
        s = sr.ReadLine();
        while (s != null)
        {
            s = sr.ReadLine();
            var m = Regex.Match(s, @"^([a-zA-Z._]+)@([\d]+)");
            if (m.Success)
            {
                allcont ac = new allcont();
                ac.name = m.Groups[1].Value;
                ac.number = m.Groups[2].Value;
                con.Add(ac);
                s = sr.ReadLine();
            }
        }
        foreach (allcont aa in con)
        {
            ListViewItem i = new ListViewItem(new string[] { aa.name, aa.number });
            i.Tag = aa;
            bufferedListView1.Items.Add(i);
        }
        sr.Close();

    }

    contacts con = new contacts();
    public class contacts:List<allcont>
    { 

    }
    public class allcont
    {
        public string name;
        public string number;
    } 
```

请解决...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T12:21:52.400

似乎您没有清洁`con`容器，因此它的内容会在每个计时器滴答声中附加（而不是被替换）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:31:33.857

此更改将解决您的问题。

```
 private void timer1_Tick(object sender, EventArgs e)
    {
        bufferedListView1.Items.Clear();
        StreamReader sr = new StreamReader("C:\\sample.txt");
        contacts con = new contacts();
        string s;
        s = sr.ReadLine();
        while (s != null)
        {
            s = sr.ReadLine();
            var m = Regex.Match(s, @"^([a-zA-Z._]+)@([\d]+)");
            if (m.Success)
            {
                allcont ac = new allcont();
                ac.name = m.Groups[1].Value;
                ac.number = m.Groups[2].Value;
                con.Add(ac);
                s = sr.ReadLine();
            }
        }
        foreach (allcont aa in con)
        {
            ListViewItem i = new ListViewItem(new string[] { aa.name, aa.number });
            i.Tag = aa;
            bufferedListView1.Items.Add(i);
        }
        sr.Close();

    }

    public class contacts:List<allcont>
    { 

    }
    public class allcont
    {
        public string name;
        public string number;
    } 
```

# apache - 如何使用 mod_proxy 并更改应用程序路径？

> ID：11808603
> 
> 赞同：1
> 
> 时间：2012-08-04T12:17:08.150
> 
> 标签：apache, tomcat, apache2, tomcat7, mod-proxy

想象一下，您想通过 Apache 启用对**管理器**Tomcat 应用程序的访问。基本方法是：

```
ProxyPass /manager ajp://localhost:8009/manager
ProxyPassReverse /manager ajp://localhost:8009/manager 
```

这按预期工作，通过 access `http://yourdomain/manager`。但是，如果您还想更改名称，则无法正常工作。想象一下，您想通过`http://yourdomain/foo`.

```
ProxyPass /foo ajp://localhost:8009/manager
ProxyPassReverse /foo ajp://localhost:8009/manager 
```

当您访问 foo 时，地址栏将变为`http://yourdomain/manager`并显示 404：在此服务器上未找到请求的 URL /manager/。

我尝试了下面的 proxy_html 代码，但结果相同：

```
ProxyPass /foo ajp://localhost:8009/manager
ProxyPassReverse /foo ajp://localhost:8009/manager
SetOutputFilter proxy-html
ProxyHTMLURLMap ^/manager(.*)$ /foo/$1 R 
```

我正在使用 mod_proxy_html 的 3.0.1 版本，因此没有定义“ProxyHTMLEnable On”（我相信这是 3.1 中的新功能）。
**缺少什么或定义不正确？**
（注意：我相信您也可以使用重写规则来做到这一点，但这可能会更简单）

# opengl - imageAtomicCompSwap 文档和使用

> ID：11808604
> 
> 赞同：2
> 
> 时间：2012-08-04T12:17:10.603
> 
> 标签：opengl, glsl

我正在尝试使用整数纹理为着色器互斥体实现深度剥离算法。正如[这个问题](https://stackoverflow.com/questions/10652862/glsl-semaphores)所建议的，我怀疑可以使用 imageAtomicCompSwap(...)。

查看该函数[的文档，并为无符号整数选择重载：](http://www.opengl.org/sdk/docs/manglsl/xhtml/imageAtomicCompSwap.xml)

```
uint imageAtomicCompSwap(gimage2D image, ivec2 P, uint data); 
```

但是，尚不清楚如何使用它。文档内容如下：

> imageAtomicCompSwap 以原子方式将 data 的值与坐标 P 处的 texel 的值进行比较。. . . 如果值相等，则将数据存储到纹素中，否则将其丢弃。它返回纹素的新值。

这听起来像是函数将数据与纹素中已经存在的值进行比较。如果值相等，则实际上什么都不会发生（“数据存储到纹素中”，但它们比较相等，所以没有变化）。如果值不相等，则不会发生任何事情（“否则将被丢弃”）。然后该函数返回 texel 的新值（因为无论哪种方式都没有发生任何事情，这只是 texel 开始时的原始值）。显然我错过了一些东西。

使事情复杂化的是，我什至无法让这个功能出现。写作：

```
//img2D_0 is declared "layout(r32ui) coherent restrict uniform uimage2D img2D_0"
imageAtomicCompSwap(img2D_0,coord,1u); 
```

. . . 给出：

> 0(14) : 错误 C1115: 无法找到兼容的重载函数“imageAtomicCompSwap(struct uimage2D1x32, ivec2, uint)”

值得一提的是，如果我传递两个数字：

```
imageAtomicCompSwap(img2D_0,coord,1u,1u); 
```

它编译得很好——我知道这应该只适用于多重采样；我是否以某种方式声明了多重采样图像？那么，A：文档是什么意思，B：为什么我需要的功能不起作用？我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:24:58.837

> 查看该功能的文档

伙计，这些页面*造成*的问题比解决的问题多……

简而言之，文档被破坏了。*规范*（即：重要的文档）声明该函数定义为：

```
uint imageAtomicCompSwap(IMAGE_PARAMS, uint compare, uint data) 
```

图像统一在哪里`IMAGE_PARAMS`，适合该图像统一的纹理坐标在哪里。对于一维图像，它需要一个`image1D`和一个`int`; 对于 2D 图像，它需要一个`image2D`和一个`ivec2`; 等等

它通过将图像中的值与 进行比较来工作`compare`。如果它们相等，则`data`存储在此位置（已交换）；否则，不进行交换。返回值将是条件交换完成*之前*存储在此位置的任何值。

# c# - C# ShowHelp - 无法删除 chm 文件

> ID：11808616
> 
> 赞同：1
> 
> 时间：2012-08-04T12:18:11.173
> 
> 标签：c#, html-helper, chm

我做了一个小程序，你不必安装。所以当我想显示帮助时，我必须从资源中提取它，这很好用，我保存了这个文件的路径。

然后当我调用 ShowHelp 时，我将路径传递给提取的文件。在结束事件中，我尝试删除此文件，这是问题。

当我使用

```
Help.ShowHelp(this,pathToChmFile); 
```

效果很好，我可以删除文件，但是当我通过 topicId 时，就像这样

```
Help.ShowHelp(this, pathToChmFile, HelpNavigator.TopicId, "10"); 
```

然后当调用 FormClosing 时，我无法删除 chm 文件，因为它是由我的进程打开的。但是为什么当我没有topicId显示它时，我可以删除它？

因为你不能卸载我的程序，我想自己清理“垃圾”，但现在我不能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:22:46.133

在这种情况下产生垃圾是不可避免的。您无法确保文件被删除。一方面，当你的程序崩溃太多时，用户通常会卸载它。您不能将资源提取到与 EXE 相同的目录中，您的程序无法访问典型的安装位置进行编写。UAC 阻止了这一点。用户在复制您的 EXE 时将收到提升提示，但您自己的操作没有提供此类提示。您必须解压到 %AppData% 或 TEMP 文件夹，您的用户将永远找不到该文件。至少有一种机制可以从 TEMP 中删除旧垃圾，因此更喜欢使用 Path.GetTempPath()。

另一方面，锁也是不可避免的，它被另一个进程持有。Windows hh.exe 程序显示 .chm 文件内容。当用户退出您的程序但没有先关闭帮助查看器时，您无法做任何合理的事情。没有可靠的方法可以找到正确的 hh.exe 实例来杀死它，可能有多个。

所以你被垃圾困住了，Path.GetTempPath() 是最不令人反感的。除非您将 .chm 文件部署在与 EXE 相同的目录中。如果不是从 .zip 文件，创建 setup.exe 程序对于安装项目来说是非常简单的，不要跳过解决您的问题并使您的用户感到舒适的一*件事*。

# java - 使用 gawk / awk / sed 修改 java 文件（交换 java 函数参数）

> ID：11808619
> 
> 赞同：1
> 
> 时间：2012-08-04T12:18:25.360
> 
> 标签：java, sed, awk, gawk

我有很多包含如下语句的 Java 文件：

```
assertEquals(x, 0); 
```

我想交换每个文件中的 2 个参数。我怎么能以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T12:29:04.847

```
sed 's/assertEquals(\([^,]*\), *\([^)]*\));/assertEquals(\2, \1);/g' <input.file >output.file 
```

**更好的：**

```
sed 's/assertEquals(\([^,]*\),[ ]\{0,1\}\([^)]*\));/assertEquals(\2, \1);/g' <input.file >output.file 
```

**解释：**

*   `s/"pattern"/"substitution"/g //`s => 替代，g => 整行
*   `\(...\)`捕获子模式。这可以通过 引用`\number`。所以逻辑是`s/assertEquals("pattern1","??whitespace??""pattern2");/assertEquals("pattern2", "pattern1");/g`
*   `[ ]\{0,1\}`匹配逗号后的可能空格（0 或 1 次出现） -`[ ]?`对我不起作用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T13:16:05.140

```
sed -i '/[(][ ]*\([^,]*\)[ ]*,[ ]*\([^)]*\)[ ]*[)]/ s::(\2,\1):' FILE 
```

*   消除参数之间的空格
*   交换所有有 2 个参数的函数调用的参数

# c# - 如何防止窗体“挂起”？

> ID：11808626
> 
> 赞同：5
> 
> 时间：2012-08-04T12:20:12.800
> 
> 标签：c#, winforms, freeze

> **可能重复：**
> [C# WinForm 应用程序 - UI 在长时间运行期间挂起](https://stackoverflow.com/questions/1216791/c-sharp-winform-application-ui-hangs-during-long-running-operation)

我在 C# Windows 窗体中创建了一个进度条示例应用程序。

我的应用程序运行良好，但是当我尝试移动我的应用程序位置或最小化时，它会“挂起”，直到它的过程不符合要求。

请帮助：如何防止我的应用程序“挂起”？

**这是我的应用程序代码：**

```
public partial class ProgressBar : Form
{
    public ProgressBar()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        int value;
        for (value = 0; value != 10000000; value++)
            progressBar1.Value = progressBar1.Value + 1;

        MessageBox.Show("ProgressBar Full", "Done", 
                        MessageBoxButtons.OK, MessageBoxIcon.Information);
        this.Close();
    }

    private void ProgressBar_Load(object sender, EventArgs e)
    {
        progressBar1.Maximum = 10000000;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T12:24:46.480

它“挂起”的原因是因为进程在同一个线程中运行。使用 BackgroundWorker 将进度条进程移动到另一个线程。

为防止复制+粘贴，请参考以下链接：

*   [后台工作者教程](http://www.dreamincode.net/forums/topic/112547-using-the-backgroundworker-in-c#/)
*   [后台工人阶级](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T13:20:43.370

防止这种情况的唯一方法是将工作负载委托给另一个线程。

您可以使用几个类来执行此操作：

*   [后台工作者](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)
*   [线程池](http://msdn.microsoft.com/en-us/library/system.threading.threadpool%28v=vs.100%29.aspx)
*   [任务](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)
*   [线](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)

后台工作者可能是最简单的方法，因为它提供了将结果返回给 UI 线程的方法。使用其他选项，您需要将结果*发送*到正确的线程。

# mysql - 实体管理器不从数据库中读取最新状态

> ID：11808627
> 
> 赞同：0
> 
> 时间：2012-08-04T12:20:14.593
> 
> 标签：mysql, hibernate, ejb

我正在使用 EJB 容器托管 Bean 数据库处理。我无法开始事务和结束事务。EJB 处理这个。持久性提供程序处于休眠状态。

当我想执行 sql 查询时，它不会从数据库返回到最新状态。我想获取状态为 WAITING 的实体，但是尽管某些实体未处于 WAITING 状态，但它们被检索到执行查询。我认为 hibernate 不会进入数据库以获取最新状态。

我尝试了 Query.setHint(String,Object)、em.clear 和其他一些东西，但我做不到。O 正在处理这个问题一个星期。我尝试了任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:45:46.117

我创建了一个新 bean，添加了检索状态为 Waiting 的实体的方法作为该 bean 的业务方法。我在方法声明中添加了 @TransactionAtrribute(REQUIRES_NEW) 注释，这解决了我的问题

# javascript - 在 jQuery Mobile 中通过 jQuery 更改 href 属性

> ID：11808628
> 
> 赞同：0
> 
> 时间：2012-08-04T12:20:29.230
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在通过 jQuery Mobile 创建一个应用程序。

我想要一个链接，它重定向到一个页面。例如：

```
<a href="/Account/" data-transition="turn" class="useroptions">Account</a> 
```

它在所有页面上都可用，我想将`href`每个页面上的链接更改为如下内容：

```
<a href="/Account/?returnUrl=http%3A%2F%2Fexample.com%2FAbout" data-transition="turn" class="useroptions">Account</a> 
```

**我已经编写了这段代码，但是当 jQuery Mobile 加载带有 Ajax 导航的页面时**它不起作用：

```
$(function () {
    $(".useroptions").attr("href", "/Account/?returnUrl=" + encodeURIComponent(document.URL));
}); 
```

显示每个页面时如何做到这一点？（我应该使用哪个事件？...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:32:18.393

我应该使用`pageshow`jQuery Mobile 的事件。请参阅[此](http://jquerymobile.com/test/docs/api/events.html)页面`pageshow`的一部分。

修改后的 jQuery 代码版本可以正常工作：

```
$("div[data-role='page']").live("pageshow",function() {
    $(".useroptions").attr("href", "/Account/?returnUrl=" + encodeURIComponent(document.URL));
}); 
```

# css - 如何使用浮动内容使包装器居中

> ID：11808629
> 
> 赞同：0
> 
> 时间：2012-08-04T12:20:39.540
> 
> 标签：css

我有一个包装数量为 300 x 300 的大 div。当浏览器全屏时，包装器位于中心。但是当我调整浏览器的大小时，内容流到第二行，但包装器占据了 100% 的窗口。例如，浏览器窗口的宽度是 800 像素，内容是 4 块 300 像素 x 300 像素，所以两个块加起来只占 600 像素，另外两个在第二行。我的问题是包装器拉伸到 800px 并且内容位于屏幕的左侧，我希望它位于中心（当我使用 float:left 时）当我使用 display:inline-block 和 text-align:center 尝试相同时，即使包装器拉伸到 100% 的宽度，我也可以让内容在屏幕中居中。问题 1。

简化的[小提琴](http://jsfiddle.net/mamasum/b532A/1/)您可以看到，如果窗口很小，第三个橙色框会落在第二行但居中。当我使用 text-align: left 时，所有框都靠在左侧，在右侧留下了很大的空间。

这是我在网站上的相关 CSS：

```
#site-wrapper {
    min-height:100%;
    text-align: center;
    position:relative;
}

#container {
   position:relative;
   width: auto;
   margin: 0 auto;
   display: inline-block;
   padding-bottom:40px;   /* Height of the footer */
}

div#content-wrapper{
   padding:5px 0 5px 0;
   font-size: 0;
   text-align: center;
   margin-left: auto;
}

#column1, #column2, #column3 {
    margin-right: 5px;
}
#column-last{
    margin-right: 5px;
}
div.column {
    //float: left;
    display: inline-block;
    vertical-align: top;
    font-size: 0;

}
.item {
    background: #0072C6; 
    width: 20em;
    padding: 5px;
    height: auto;
    margin: 0 0 5px 0;
    font-size: 14px;
    color: #FFF;
    box-shadow: inset 0 0 100px #1082D6;

} 
```

# javascript - 仅在 jQuery 验证中验证数字、括号和空格

> ID：11808630
> 
> 赞同：4
> 
> 时间：2012-08-04T12:20:59.760
> 
> 标签：javascript, jquery, regex, jquery-validate

我正在尝试在 jQuery 验证中验证电话号码，但失败了。我想要的只是允许像`(01660) 888999`. 环顾网络，我发现了一百万个例子，但似乎没有任何效果。这是我目前的努力

```
$.validator.addMethod("phonenumber", function(value) {
  var re = new RegExp("/[\d\s()+-]/g");
  return re.test(value);
  //return value.match("/[\d\s]*$");
}, "Please enter a valid phone number"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T12:24:07.387

Bergi 是正确的，您构建正则表达式的方式是错误的。

另一个问题是您缺少锚点和 a `+`：

```
var re = /^[\d\s()+-]+$/; 
```

请注意，尽管基于正则表达式的解决方案仍将允许某些不是有效电话号码的输入。您可以通过多种方式改进您的正则表达式，例如，您可能希望要求至少有 x 个数字。

对于哪些电话号码有效和无效，有很多规则。您不太可能以可维护的方式将所有这些规则编码为正则表达式，因此您可以尝试以下方法之一：

*   找到一个能够验证电话号码（但可能不是基于正则表达式）的库。
*   如果您需要正则表达式，请瞄准与规则非常接近的内容，但不要尝试处理所有特殊情况。我建议尝试编写一个接受所有有效电话号码但不一定拒绝所有无效电话号码的表达式。

您可能还需要考虑为您的解决方案编写测试用例。测试还将兼作您希望接受和拒绝哪些输入的文档形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:25:32.857

[您需要在构造函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/)中使用正则表达式文字**或**字符串文字：[`RegExp`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/)

```
var re = /[\d\s()+-]/g;
// or
var re = new RegExp("[\\d\\s()+-]", "g"); 
```

另请参阅[创建正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Creating_a_Regular_Expression)。

除此之外，您需要使用[字符串开始和结束锚点](http://www.regular-expressions.info/anchors.html)来确保正则表达式匹配整个字符串，而不仅仅是它的一部分，以及一些[重复修饰符](http://www.regular-expressions.info/repeat.html)以允许多个字符：

```
var re = /^[\d\s()+-]+$/g; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T12:31:25.227

另一种方法可能是：

```
function(value) {
  return /^\d+$/.test(value.replace(/[()\s+-]/g,''));
} 
```

如果你也想检查数字的长度，说它必须是一个 10 位数字的字符串：

```
function(value) {
  return /^\d{10}$/.test(value.replace(/[()\s+-]/g,''));
} 
```

# solr - Solr 可以索引纯文本文件而无需通过 Tika 运行它们吗？

> ID：11808635
> 
> 赞同：2
> 
> 时间：2012-08-04T12:21:22.813
> 
> 标签：solr, apache-tika

我只是在 Solr 的研究阶段，但到目前为止，似乎要索引非结构化文本文件，我必须使用 Tika 将其转换为 XML？这是真的？我觉得奇怪的是 Lucene 可以在不进行任何转换的情况下对任意文本进行标记和索引，但是 Solr 需要这个额外的转换为 XML 的步骤。我想也许我只是错过了一些东西。

我正在研究每天对数百万个文件和数百 GB 的近实时全文搜索，因此额外的 Tika 转换很麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:01:10.387

感谢您的回复。@javanna 我的问题最好被问为“无需以任何方式预处理输入”。他们中的太多人来得太快了，他们太大了，速度很重要。@Oklein 在研究您提到的 DIH 时，我偶然发现了这份文件：

[http://www.lucidimagination.com/sites/default/files/file/whitepaper/LIWP_IndexingTextandHTMLFilesWithSolr.pdf](http://www.lucidimagination.com/sites/default/files/file/whitepaper/LIWP_IndexingTextandHTMLFilesWithSolr.pdf)

基本上我追求的答案是，使用 ExtractingRequestHandler 处理纯文本文件并即时添加额外的字段。现在我正在使用 cURL，它可以使用 GET 参数添加字段，并将使用 SolrJ 进行等效操作。

[http://wiki.apache.org/solr/ExtractingRequestHandler#SolrJ](http://wiki.apache.org/solr/ExtractingRequestHandler#SolrJ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:27:43.027

查看[DIH中的 PlainTextEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#PlainTextEntityProcessor)

# javascript - 没有模板的主干

> ID：11808638
> 
> 赞同：3
> 
> 时间：2012-08-04T12:21:39.663
> 
> 标签：javascript, backbone.js, mustache, handlebars.js

拥有不依赖于任何模板系统的主干视图是一种不好的做法吗？

当然，这并不意味着任何类型的 DOM 代码都将使用视图中的硬编码字符串手动生成。不不不。我当然可以在 DOM 元素中缓存每个视图的基本布局，设置为 display:none。但是，我想减少模板本身中的任何类型的值设置。我宁愿在视图本身中使用 jquery 或任何其他类型的 DOM 修饰符形式来做到这一点。通过这种方式，我使用 Mustache、Handelbars、Underscore 模板系统等，为自己避免了不断的差异和无数小时的工作，这些工作让我和我自己暴露了我的应用程序。将所有视图逻辑放在一个地方可以让一切变得更干净，至少在我看来。它提供了很多好处，例如正确的部分渲染、值绑定等，我'

我看到的唯一问题可能是我对 jQuery 进行的持续检查是否会执行得足够快，但我想它最终不应该是这样的问题。

你怎么看？好的？坏的？实际的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:30:07.693

恕我直言，不使用*模板引擎*本身并不是一个糟糕的设计决定。

模板引擎旨在生成更清晰、更易于维护的代码，如果您认为不使用它们会生成更清晰、更易于维护的代码，那么您可以在没有它们的情况下运行它们。

我认为最好使用*模板引擎*，但这只是个人喜好问题。我还将*模板*与手动 DOM 修改结合起来`this.$el.find(".my-element").html( "new value" );`进行部分更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T04:43:28.897

模板很好。它们为您节省了大量编码时间，并允许您循环元素并使用很少的代码创建多个元素。

也就是说，如果渲染调用过多或者您破坏并重新创建 DOM 元素/模板，则会在性能上花费很多。

我有一个用于主干的 PerfView，它可以在 chrome 中以 120FPS 的滚动视图显示 1,000,000 个模型。诀窍是我只用我需要的所有可能节点渲染模板一次，然后在模型更改时更改 DOM 中的内容。此外，为 DOM 元素使用对象池可以让您重用它们。查看第 237 行 ( [https://github.com/puppybits/BackboneJS-PerfView/blob/master/index.html](https://github.com/puppybits/BackboneJS-PerfView/blob/master/index.html) ) 上的 modelMap 属性，了解如何半自动更新元素，以免过度使用模板。

# jquery - 如果幻灯片切换打开，则显示特定的背景位置

> ID：11808642
> 
> 赞同：0
> 
> 时间：2012-08-04T12:22:28.387
> 
> 标签：jquery, toggle

知道如何设置背景位置，因此当标签关闭时，背景始终为“背景位置”、“5% 50%”，如果标签打开，其背景位置始终为“背景位置”、“5%” 115%' ?

我假设某处需要有一个 if(element).is(':hidden') 语句。

谢谢！

```
$('.blue-tab').toggle(function() {  
        var group = $(this).parent('.group-wrap').children('.indi-group');  
            $('.indi-group').not(group).hide(300);
            group.slideToggle(600, function() {
                $(this).parent('.group-wrap').children('.blue-tab').css('background-position', '5% 115%');
            });
    }, function() {
        var group = $(this).parent('.group-wrap').children('.indi-group');
            $('.indi-group').not(group).hide(300);
            group.slideToggle(600, function() {
                $(this).parent('.group-wrap').children('.blue-tab').css('background-position', '5% 50%');
            });
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:11:47.620

您需要使用`.is(":visible")`- [jQuery Docs](http://api.jquery.com/visible-selector/)
您可以使用它来测试所选元素是可见还是隐藏。

所以你会做这样的事情：

```
if($('.blue-tab').is(":visible")){
    // Change your BG position to '5% 115%'
    $(this).parent('.group-wrap').children('.blue-tab').css('background-position', '5% 115%');
} else {
    // Its not visible.. so change the position to '5% 50%'
    $(this).parent('.group-wrap').children('.blue-tab').css('background-position', '5% 50%');
} 
```

确保在开始任何动画之前调用它，如果元素处于中间过渡状态，它将始终是 vislble `(TRUE)`，无论它是动画还是动画。

# python - 如何使用正则表达式匹配带有边界的单词？

> ID：11808644
> 
> 赞同：2
> 
> 时间：2012-08-04T12:23:02.547
> 
> 标签：python, regex

例如，我有这个字符串：`"http://www.google.com/this_is_our_network/"`

我想匹配“工作”这个词，但开头或结尾没有字母字符。在上面的示例中，正则表达式不应返回匹配项。

但是，在这个字符串中：`"http://www.google.com/work_for_us.html"`正则表达式应该匹配，因为开头和结尾都没有字母字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T12:33:39.650

试试这个正则表达式：`(?<=[\W_])work(?=[\W_])`

这使用*积极的前瞻和后瞻断言*来尊重封闭字符，但不将它们包括在匹配中。

这个正则表达式匹配`work`

1.  如果它跟随一个`\W`字符或下划线
    AND
2.  如果它后跟一个`\W`字符或下划线。

`\b`不能使用 for word 边界匹配，因为这里不需要`_`匹配。`\w`

* * *

更多示例：

*   匹配多个单词：
    `(?<=[\W_])(work|job)(?=[\W_])`

*   与上面相同，但不创建子匹配：
    `(?<=[\W_])(?:work|job)(?=[\W_])`

*   也尊重线端：
    `(?<=[\W_])(?:work|job)(?=[\W_]|$)`

* * *

关于正则表达式语法的一些有用说明：

*   `\w`匹配所有字母数字字符和下划线；这相当于`[a-zA-Z0-9_]`

*   `\W`匹配完全相反的`\w`

*   `\b``\w`匹配 a和字符之间的边界`\W`（或反之亦然）

*   *积极的前瞻断言：*
    `foo(?=bar)`匹配`foo`后跟`bar`，不包括`bar`在匹配中。

*   *肯定的后向断言：*如果它跟随则
    `(?<=foo)bar`匹配，不包括在匹配中。`bar``foo``foo`

有关 (python) regex 语法的更多信息，请考虑[python regex docs](http://docs.python.org/library/re.html)或[perl regex docs](http://perldoc.perl.org/perlre.html)。此外，基于 Web 的[Python](http://www.pythonregex.com/)正则表达式工具便于测试。

# ruby-on-rails - 何时应嵌入或引用关联 Mongodb

> ID：11808645
> 
> 赞同：2
> 
> 时间：2012-08-04T12:23:03.500
> 
> 标签：ruby-on-rails, mongodb, mongoid, database

我在带有 odm [mongoid的 rails 应用程序中使用 mongodb](http://mongoid.org)

我的问题很简单：

a) 什么时候应该嵌入或引用对象之间的关联？

b) 这对应用程序性能有何影响？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:38:05.557

引用关系需要多次数据库查找；嵌入式关系没有。但是引用关系更容易使用（特别是如果您刚刚开始使用您的应用程序和/或 mongo）。我建议您保持引用关系，直到您更好地了解应用程序的形状和数据需求；此时，您可以通过将其中一些引用关系切换为嵌入来对数据进行非规范化。

我还建议使用[https://github.com/dzello/mongoid_alize](https://github.com/dzello/mongoid_alize)来帮助进行非规范化。

# python - 对于自动化具有图像按钮的屏幕，Python 模块必须使用 Pywinauto 或其他一些模块

> ID：11808663
> 
> 赞同：0
> 
> 时间：2012-08-04T12:25:45.940
> 
> 标签：python

我想自动化一个使用图像按钮的屏幕，而不是使用 swapy 获取图像控件，所以我必须使用 python 使用哪个模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:37:48.267

我是 SWAPY 的作者。您必须查看 Sikuli 项目[http://sikuli.org/](http://sikuli.org/) 它允许使用控件，例如使用图片。但 Sikuli 没有 python`API`或 SDK。在 python 中使用它的唯一方法是制作类似的东西 - `subprocess.call`( `sikuli.exe somescript`) ...

# php - 如何在 MVC 中使用 AJAX - php Blog？- 动态添加评论

> ID：11808665
> 
> 赞同：-1
> 
> 时间：2012-08-04T12:25:59.693
> 
> 标签：php, ajax, model-view-controller

我写了一个`posts.php`页面，显示某个帖子及其评论，使用户能够动态地向该帖子*添加新评论。*

我想使用 Ajax 实现 *"submit_comment"*，但我真的不知道如何在 MVC 中实现。

这是我的 Posts.php：

```
<script type="application/javascript" src="Ajax/addComment.js"> </script> 
src="../views/Ajax/addComment.js"> </script> <title> Posts
(View)</title> </head>

<body> <div id="main"> <div class="container"> <?=$data['header'];?>

<div id="content">  
    <!-- Main Post -->
    <div class="content-background">
    <h2> <?=$data['title'];?></h2>
    <h4> <?=$data['date'];?> </h4>
    <p> <?=$data['content'];?></p>
    </div>

    <div id="form-content">
      <form name="commentForm" method="post">
      Enter your name:  <input type="text" name="username" id="username">&nbsp; <br />
      Enter your comment: </br> <textarea name="comment" id="comment" cols="10" rows="10"> </textarea> <br />

      <input value='Submit' type='button'  onclick='JavaScript:commentRequest2("<?=$data['id']?>")'
name='submit'>      

      </form>
    </div>
    <div id="commentArea">
        <?=include_once("comments_area.php");?>
    </div><!-- end commentArea -->

    </div>  </div> </div>

</body> </html> 
```

这是我的 Posts_Controller.php：

```
<?php
/**
 * This file handles the retrieval and serving of posts posts
 */
class Posts_Controller
{
    /**
     * This template variable will hold the 'view' portion of our MVC for this 
     * controller
     */
    public $template = 'posts';

    /**
     * This is the default function that will be called by router.php
     * 
     * @param array $getVars the GET variables posted to index.php
     */
    public function main(array $getVars)
    {
        $postsModel = new Posts_Model;

            }
            else{
        //get the post
        $post = $postsModel->get_main_post("`id`='", $getVars['id'], "LIMIT", "1");
        //get the comments
        $comments = $postsModel->get_comments("`postID`='", $getVars['id']);
        //create a new view and pass it our template
        $header = new View_Model('header_template');
        $view = new View_Model($this->template);

        //assign post data to view
        $view->assign('header', $header->render(FALSE));
        $view->assign('title' , $post['title']);
        $view->assign('content' , $post['content']);
        $view->assign('date' , $post['date']);
        $view->assign('by' , $post['added_by']);
        $view->assign('id' , $post['id']);
        $view->assign('commentsArr' , $comments);
        $view->render();
            }
    }
} 
```

这是我的 Posts_Model.php：

```
<?php
/**
 * The Posts Model does the back-end heavy lifting for the Posts Controller
 */
class Posts_Model
{
    /**
     * Holds instance of database connection
     */
    private $db;

    public function __construct()
    {
        $this->db = new MysqlImproved_Driver;
    }

    /**
     * Fetches article based on supplied name
     * 
     * @param string $author
     * 
     * @return array $article
     */
    public function get_main_post($cond1, $var1, $cond2 ="", $var2 = "")
    {        
        //connect to database
        $this->db->connect();

        //sanitize data
        $var1 = $this->db->escape($var1);
        $var2 = $this->db->escape($var2);
        $cond = $cond1.$var1."'"; 
        $cond.= " ".$cond2." ".$var2;  

        //prepare query
        $this->db->prepare
        (
            "
            SELECT *  FROM `posts`
            WHERE $cond
            ;
            "
        );

        //execute query
        $this->db->query();

        $article = $this->db->fetch('array');

        return $article;
    }

    public function get_comments($cond1, $var1, $cond2 ="", $var2 = "")
    {        
        //connect to database
        $this->db->connect();

        //sanitize data
        $var1 = $this->db->escape($var1);
        $var2 = $this->db->escape($var2);
        $cond = $cond1.$var1."'"; 
        $cond.= " ".$cond2." ".$var2;  

        //prepare query
        $this->db->prepare
        (
            "
            SELECT *  FROM `comments`
            WHERE $cond
            ;
            "
        );

        //execute query
        $this->db->query();
        $resultArr[0] = 0;
        $i = 1;
        while( $result = $this->db->fetch('array')){
            $resultArr[$i] = $result;
            $i++;
        }
        $resultArr[0] = $i;

        return $resultArr;
    }

}
?> 
```

我应该在哪里添加 addComment.js？（V、M 还是 C？） addComment 应该做什么？调用什么 URL/函数？

有什么建议么？例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:08:49.990

在您的控制器中创建一个函数，允许您将 javascript 文件添加到您的视图中。然后在你的控制器中调用它。它将文件路径添加到数组中，并在视图显示之前将其分配给模板。

```
$view->addJavascript('/Ajax/addComment.js'); 
```

或者你可以使用

```
$js_files[] = '/Ajax/addComment.js';
$view->assign('js_files', $js_files); 
```

那么在你看来你可以使用

```
<?
   foreach($data['js_files'] as $file)
   {
       echo '<script type="application/javascript" src="'.$file.'"> </script>'
   }
?> 
```

不确定您的路由在您的应用程序中是如何构造的，但您将为 ajax 功能创建一个类似于 main 的方法。如果您提到更多关于 URL 如何路由到控制器的信息，那么我可能会提出更有根据的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:15:47.340

> [在你尝试学习如何使用 MVC 之前，你应该学习如何编写语义 HTML 和不显眼的 JavaScript！从`posts.php`文件来看，你真的不知道你在做什么。]
> 
> [我建议阅读[此页面](http://microformats.org/wiki/posh)中的所有内容。它将包含很多关于 HTML 的非常好的材料。然后观看[本讲座](http://www.youtube.com/watch?v=Y2Y0U-2qJMs)，然后在[http://yuiblog.com/crockford/](http://yuiblog.com/crockford/)上观看所有内容。另外，我建议您阅读[Eloquent Javascript](http://eloquentjavascript.net/contents.html)书籍。]

您使用的是自制框架还是第三部分产品？

反正。您应该首先创建一个非 AJAX 方法来添加注释。在您当前的设置中，很可能通过`post_comment()`在`Posts_Model`. 然后在 , 中创建一个单独的方法`Posts_Controller`来处理`POST`请求。

完成后，您可以开始使用 AJAX 为文章发布新评论。您的`'/views/Ajax/addComment.js'`文件应该添加到`posts.php`文件中（您称之为“视图”，但它不是）。您应该使用绝对路径来包含该 JS 文件。

AJAX 请求应通过附加`onsubmit`到`<form name="commentForm">`. 您从表单的元素中收集数据并创建 XHR 请求。要了解如何操作，请阅读[这篇文章](http://www.openjs.com/articles/ajax_xmlhttp_using_post.php)。

> [也就是说，**您的代码容易受到 SQL 注入的攻击。**仅仅因为您使用 PDO/MySQLi 它不会神奇地保护您。您实际上也需要知道**如何**使用它。我建议阅读[**这篇文章**](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)（是的，它适用于 PDO，但理论不会改变）。尤其是[这一段](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers#Running_Statements_With_Parameters)。它应该向您解释如何正确使用准备好的语句以及为什么它很重要。对于 MySQLi 等效项，您必须阅读[`MySQLi::bind_param()`手册条目](http://php.net/manual/en/mysqli-stmt.bind-param.php)。]

# c++ - ROS Linking errors using boost::filesystem library using C++ under linux

> ID：11808668
> 
> 赞同：1
> 
> 时间：2012-08-04T12:26:43.863
> 
> 标签：c++, boost, linker, ros

我收到以下错误：

```
CMakeFiles/ndt_visualiser.dir/src/fromFile.o: In function `boost::filesystem3::path::codecvt()':
/usr/include/boost/filesystem/v3/path.hpp:377: undefined reference to `boost::filesystem3::path::wchar_t_codecvt_facet()'
CMakeFiles/ndt_visualiser.dir/src/fromFile.o: In function `directory_iterator':
/usr/include/boost/filesystem/v3/operations.hpp:594: undefined reference to `boost::filesystem3::detail::directory_iterator_construct(boost::filesystem3::directory_iterator&, boost::filesystem3::path const&, boost::system::error_code*)'
CMakeFiles/ndt_visualiser.dir/src/fromFile.o: In function `boost::filesystem3::path::codecvt()':
/usr/include/boost/filesystem/v3/path.hpp:377: undefined reference to `boost::filesystem3::path::wchar_t_codecvt_facet()'
CMakeFiles/ndt_visualiser.dir/src/fromFile.o: In function `path<boost::filesystem3::directory_entry>':
/usr/include/boost/filesystem/v3/path.hpp:134: undefined reference to `boost::filesystem3::path_traits::dispatch(boost::filesystem3::directory_entry const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, std::codecvt<wchar_t, char, __mbstate_t> const&)'
CMakeFiles/ndt_visualiser.dir/src/fromFile.o: In function `is_directory':
/usr/include/boost/filesystem/v3/operations.hpp:223: undefined reference to `boost::filesystem3::detail::status(boost::filesystem3::path const&, boost::system::error_code*)'
CMakeFiles/ndt_visualiser.dir/src/fromFile.o: In function `boost::iterator_facade<boost::filesystem3::directory_iterator, boost::filesystem3::directory_entry, boost::single_pass_traversal_tag, boost::filesystem3::directory_entry&, int>::operator++()':
/usr/include/boost/filesystem/v3/operations.hpp:630: undefined reference to `boost::filesystem3::detail::directory_iterator_increment(boost::filesystem3::directory_iterator&, boost::system::error_code*)'
CMakeFiles/ndt_visualiser.dir/src/fromFile.o: In function `boost::filesystem3::path::codecvt()':
/usr/include/boost/filesystem/v3/path.hpp:377: undefined reference to `boost::filesystem3::path::wchar_t_codecvt_facet()'
CMakeFiles/ndt_visualiser.dir/src/fromFile.o: In function `is_directory':
/usr/include/boost/filesystem/v3/operations.hpp:223: undefined reference to `boost::filesystem3::detail::status(boost::filesystem3::path const&, boost::system::error_code*)'
CMakeFiles/ndt_visualiser.dir/src/fromFile.o: In function `~dir_itr_imp':
/usr/include/boost/filesystem/v3/operations.hpp:563: undefined reference to `boost::filesystem3::detail::dir_itr_close(void*&, void*&)'
/usr/include/boost/filesystem/v3/operations.hpp:563: undefined reference to `boost::filesystem3::detail::dir_itr_close(void*&, void*&)'
CMakeFiles/ndt_visualiser.dir/src/fromFile.o: In function `__static_initialization_and_destruction_0':
/usr/include/boost/system/error_code.hpp:214: undefined reference to `boost::system::generic_category()'
/usr/include/boost/system/error_code.hpp:215: undefined reference to `boost::system::generic_category()'
/usr/include/boost/system/error_code.hpp:216: undefined reference to `boost::system::system_category()' 
```

我看过很多帖子都有类似的错误。在几乎所有这些帖子（例如[Linux 中的 Linking Boost Library](https://stackoverflow.com/questions/1408619/problem-linking-boost-library-in-linux)）中，似乎解决方案是，您需要添加 -lboost_filesystem 和 -lboost_system 标志。我已经尝试将这些作为 lflags 或 cflags 添加到 manifest.xml 中，但这完全没有改变。我已经尝试在我的包的 CMakeLists.txt 中添加一些东西，但我想我做错了。

那么有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T05:20:52.697

您需要在 CMakeLists.txt 中添加如下行：

```
rosbuild_add_boost_directories()
rosbuild_link_boost(ndt_visualizer filesystem system) 
```

有关更多详细信息，请参阅[http://www.ros.org/wiki/rosbuild/CMakeLists#rosbuild_link_boost 。](http://www.ros.org/wiki/rosbuild/CMakeLists#rosbuild_link_boost)

向清单中的 lflags 或 cflags 添加行会影响链接到您的其他包，而不是您链接到其他的包。

将来，根据[支持指南，最好在](http://ros.org/wiki/Support)[ROS Answers上提出 ROS 问题](http://answers.ros.org/questions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:00:02.620

作为一个小的后续行动，我遇到了对涉及文件状态和错误代码的未定义引用的问题。

问题出现在排序库链接上（“依赖较少的”库出现在“依赖较多的”库之后，至少在 GCC 中是这样）。我的项目使用了一个依赖于 Boost.Filesystem 和 yaml-cpp 的自定义库。之前，我在 boost 库之后链接了我的自定义库，但那不起作用。我必须通过确保之后链接提升来修复它：

```
rosbuild_add_boost_directories()
rosbuild_add_executable(${PROJECT_NAME} ${SRCS})
target_link_libraries(${PROJECT_NAME} custom_lib yaml-cpp)
rosbuild_link_boost(${PROJECT_NAME} filesystem system) 
```

# android - WebView android中的焦点不会从EditText更改为TextBox

> ID：11808670
> 
> 赞同：2
> 
> 时间：2012-08-04T12:27:05.530
> 
> 标签：android, android-webview

我有一个`EditText`,`WebView`用于搜索。`TextBox`搜索后，用户通过来自服务器的链接获得一些渲染。光标在`EditText`和 中`TextBox`闪烁`WebView`。但即使我尝试在 的 中输入一些`TextBox`内容`WebView`，字母也会出现在 中，`EditText`但不会出现在`TextBox`中`WebView`。

关于为什么在模拟器中发生此问题的任何想法。

布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="match_parent"
 android:background="@drawable/white"
 android:tileMode="repeat" >

 <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

   <LinearLayout 
      android:layout_height="wrap_content" 
      android:orientation="horizontal"
      android:layout_width="fill_parent"
      android:layout_marginTop="30dip"
      android:focusable="true" 
      android:focusableInTouchMode="true">  

      <EditText android:text="" 
        android:id="@+id/searchEditText"
        android:layout_height="wrap_content" 
        android:layout_weight="1"
        android:layout_width="fill_parent">
      </EditText>
      <Button android:text="Search" 
        android:id="@+id/searchCatalogButton"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content">
      </Button>

  </LinearLayout>

    <WebView
      android:id="@+id/browserwebview"
      android:fillViewport="true"
      android:layout_marginTop="75dip"
      android:layout_marginBottom="30dip"
      android:layout_height="fill_parent"
      android:layout_width="fill_parent"/>
    <LinearLayout
        android:id="@+id/header"
        android:layout_alignParentTop="true"
        android:layout_width="fill_parent" 
        android:layout_height="30dip"
        android:background="@drawable/black"
        android:tileMode="repeat">
    <ImageButton 
        android:id="@+id/buttonBackCatalog"
        android:src="@drawable/greenarrow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/black"
        android:tileMode="repeat"/>
    <ImageView 
        android:src="@drawable/logo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="gone"/>
  </LinearLayout>

  <LinearLayout
    android:layout_alignParentBottom="true"
    android:layout_width="fill_parent" 
    android:layout_height="30dip"
    android:layout_weight="1"
    android:weightSum="5" 
    android:orientation="horizontal"
    android:background="@drawable/black"
    android:tileMode="repeat">

    <LinearLayout 
        android:id="@+id/footerLayoutHome"
        android:clickable="true"
        android:layout_width="fill_parent"
        android:layout_weight="1" 
        android:orientation="vertical"
        android:gravity="center" 
        android:layout_height="fill_parent">

    <ImageButton 
        android:id="@+id/footerMainBtnHome"
        android:layout_width="fill_parent" 
        android:layout_height="14dip"
        android:src="@drawable/home" 
        android:background="@drawable/black"/>
    <TextView 
        android:text="Home" 
        android:textSize="8dip"
        android:textColor="#ffffff"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    </LinearLayout>
    <LinearLayout 
        android:id="@+id/footerLayoutProducts"
        android:clickable="true"
        android:layout_width="fill_parent"
        android:layout_weight="1" 
        android:orientation="vertical"
        android:gravity="center" 
        android:layout_height="fill_parent">

        <ImageButton 
            android:id="@+id/footerMainBtnProducts"
            android:layout_width="fill_parent" 
            android:layout_height="14dip"
            android:src="@drawable/products" 
            android:background="@drawable/black"/> 
        <TextView 
            android:text="Products" 
            android:textSize="8dip"
            android:textColor="#ffffff"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
   </LinearLayout>
   <LinearLayout 
        android:id="@+id/footerLayoutCart"
        android:clickable="true"
        android:layout_width="fill_parent"
        android:layout_weight="1" 
        android:orientation="vertical"
        android:gravity="center" 
        android:layout_height="fill_parent">

        <ImageButton 
            android:id="@+id/footerMainBtnCart"
            android:layout_width="fill_parent" 
            android:layout_height="14dip"
            android:src="@drawable/cart" 
            android:background="@drawable/black"/>
        <TextView 
            android:text="Cart" 
            android:textSize="8dip"
            android:textColor="#ffffff"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

   </LinearLayout>
   <LinearLayout 
        android:id="@+id/footerLayoutFeedback"
        android:clickable="true"
        android:layout_width="fill_parent"
        android:layout_weight="1" 
        android:orientation="vertical"
        android:gravity="center" 
        android:layout_height="fill_parent">

        <ImageButton 
        android:id="@+id/footerMainBtnFeedback"
        android:layout_width="fill_parent" 
        android:layout_height="14dip"
        android:src="@drawable/feedback" 
        android:background="@drawable/black"/>
        <TextView 
        android:text="Feedback" 
        android:textSize="8dip"
        android:textColor="#ffffff"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

   </LinearLayout>  

   <LinearLayout 
      android:id="@+id/footerLayoutHelp"
      android:clickable="true"
      android:layout_width="fill_parent"
      android:layout_weight="1" 
      android:orientation="vertical"
      android:gravity="center" 
      android:layout_height="fill_parent">

       <ImageButton 
        android:id="@+id/footerMainBtnHelp"
        android:layout_width="fill_parent" 
        android:layout_height="14dip" 
        android:src="@drawable/help" 
        android:background="@drawable/black"/>
       <TextView 
        android:text="Help" 
        android:textSize="8dip"
        android:textColor="#ffffff"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    </LinearLayout>                
  </LinearLayout>
 </RelativeLayout>
</LinearLayout> 
```

**Java 代码**

```
 webView = (WebView) findViewById(R.id.browserwebview);
    searchEditText = (EditText)findViewById(R.id.searchEditText);
    search = (Button)findViewById(R.id.searchCatalogButton);

    search.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            String urlSearchKey = searchEditText.getText().toString().trim();
            if(urlSearchKey==""){
                Toast.makeText(Catalog.this, "Enter Search Keyword", Toast.LENGTH_LONG).show();

            }
            else{
                url=urlforthesite+urlSearchKey;
                webView.loadUrl(url);
                searchEditText.setText("");
            }

        }
    });` 
```

期待你的答复。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:21:42.457

根据 webkit 的定制，webview 中文本框的行为可能因设备而异。在原始android源代码中，textBox与android view的editText相结合。但在设备中它可以给出不同的外观。所以这不是问题，它只是那个 api 的行为。在不同的设备上检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:30:35.900

做这**2 件事**。可能会解决你的问题:))

**1）**添加 `android:focusable="true"`webView

```
<WebView android:id="@+id/browserwebview"
    android:layout_weight="1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:focusable="true"  
    android:fillViewport="true"
    android:layout_marginTop="75dip"
    android:layout_marginBottom="30dip"
  /> 
```

**2）**添加`webView.getSettings().setJavaScriptEnabled(true)`；在你的 Java 代码中

# mysql - 数据库设计：喜欢表？

> ID：11808680
> 
> 赞同：23
> 
> 时间：2012-08-04T12:28:16.930
> 
> 标签：mysql, database, postgresql, database-design

我想知道，
在许多网站上都有喜欢/不喜欢帖子的选项。
当然，即使在这里，在stackoverflow。

所以，从技术上讲，这是一张大赞表？

```
user_id    post_id 
```

user_id - 谁投票
post_id - 这是哪个帖子

这就是全部吗？
大赞表？
没有更有效/更复杂的东西吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-04T12:35:47.090

在最基本的层面上，是的，就是这样。

但随后它开始扩展，试图回答以下问题：

*   用户有多喜欢这篇文章？
*   他们什么时候喜欢这个帖子？
*   他们是怎么找到这个帖子的？
*   他们对帖子发表评论了吗？
*   整个小组/社区如何喜欢这个帖子

然后您开始想要回答有关朋友和社区的更深入的问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-04T13:21:34.357

我想我能理解你的担心。每次需要显示页面时都必须发出 COUNT() 。

您当然必须拥有这个基本表，这将是 COUNT() 的基础，但您实际上并不需要对每次访问都进行 COUNT() 操作。

创建一个总计表并在页面收到喜欢或不喜欢时使用触发器或调用存储过程来不时更新它。

我会说每种方法都更适用于不同的网站个性，即更多的阅读或更多的写作，但你已经知道，当谈到喜欢或不喜欢时，没有什么是可以预见的。

# php - 使用php运行c程序

> ID：11808689
> 
> 赞同：9
> 
> 时间：2012-08-04T12:29:04.353
> 
> 标签：php, c

如何使用 php 运行 c 程序`exec()` 我已经从谷歌搜索中看到了很多结果 可以通过 exec() 函数但我无法使用它 我尝试过这种方式 我用 c 编写了一个程序

```
**myc.c**
#include <stdio.h>

int main(int argc, char *argv[])
{
    printf("Hello, world\n");

    return 0;
}

**test.php**
<?php
exec('myc.c');
?> 
```

任何人都可以在这方面帮助我吗？我通过 wamp 服务器通过放置 www 文件夹执行此操作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T09:55:16.130

C程序

```
#include <stdio.h>

int main(int argc, char **argv)
{
    if(argv[1])
    printf("First arg %d\n", argv[1]);
    if(argv[2])
    printf("Second arg %d", argv[2]);
    return 0;
} 
```

* * *

PHP 代码

```
<?php
exec("testone.exe 125 70", $out);
print_r($out);
?> 
```

* * *

组合输出：

```
<!-- Array ( [0] => First arg 27 [1] => Second arg 27 ) --> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T12:31:20.817

如果要运行用 C 编写的程序，则必须运行*程序*而不是源代码。

将您的 C 编译成可执行文件，然后从`exec`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-04T12:32:08.047

您应该编译您的 C 程序，然后用 PHP 执行它。PHP 不会运行您的 C 代码，即使它们具有相似的语法。

PHP`exec`函数将执行类似于在 shell 或命令提示符下执行的命令。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-27T17:08:20.630

今天的 PHP 生态系统现在为此提供了几个更好的解决方案。

## 1.写一个PHP扩展

您可以使用[Zephir](https://zephir-lang.com/en)以类似 PHP 的语言轻松构建 PHP 扩展。它们提供了一种称为[自定义优化器](https://docs.zephir-lang.com/0.11/en/optimizers)的机制，可以将任意 C 库或自定义 C 代码干净地绑定到您的扩展。

虽然它需要更多的工作，但它*可以*（YMMV）通过原生 PHP 调用产生接近 C 的性能，并升级你的 PHP-fu。你也可能不小心爱上了 Phalcon。

以我个人的经验，纯 Zephir 实际上损害了纯 PHP 在我的任务中的性能，所以只有当你想利用现有 C 库的强大功能，或者你有繁重的工作负载时，我才会推荐它。

[这个 Github 评论](https://github.com/phalcon/zephir/pull/21#issuecomment-26178522)简要概述了为什么应该使用 Zephir 优化器而不是内联[CBLOCK](https://github.com/phalcon/zephir/blob/c893389cc6de6fc6a52199ae401aa91ff7eb1206/test/cblock.zep#L13)以及如何构建目录/文件。

## 2\. 使用 FFI

从 PHP 7.4 开始，内置了[外部函数接口。](https://www.php.net/manual/en/ffi.examples-basic.php)您也可以[将其安装](https://github.com/dstogov/php-ffi#install)为旧版本 PHP 的扩展。

好处？您不必编写自己的 PHP 扩展来使用 C 代码。不足之处？现在，FFI 性能并不能真正与实际的 C 代码相比。你可以把它想象成一个拐杖而不是一个蝙蝠车。

如果您关心高性能，请尝试选项 1。

# css - 如何将内容 div 夹在两个固定宽度的列之间

> ID：11808694
> 
> 赞同：0
> 
> 时间：2012-08-04T12:30:02.963
> 
> 标签：css, html

看看[这个小提琴](http://jsfiddle.net/lexy0202/DbQUN/)。我在两边都有 div，固定宽度为 50 像素，并且`display:inline-block`.

我希望内部的 div 扩展以填补这两个 div 之间的空白，但问题是如果我在这个 div 中放置大量文本，它会将自身推到下一行，并且布局会崩溃。

另外，我想要它，所以即使中间有少量文本（小于页面宽度），中间 div 也会填充空间。

如何确保左右 div 始终位于左右两侧，并且内容 div 始终填充它们之间的空间？

我尝试使用 CSS3 的`calc`，但它似乎[没有得到很好的支持](http://caniuse.com/calc)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:47:47.507

如果您愿意使用 javascript，这将起作用：

```
​$(function(){
    $('div.middle').width( $('div.container').width() - $('div.right.col').width() - $('div.left.col').width() - 10 );

    $(window).resize(function() {
        $('div.middle').width( $('div.container').width() - $('div.right.col').width() - $('div.left.col').width() - 10 );
    });

}); 
```

工作 JSFiddle：http: [//jsfiddle.net/vh8Zu/](http://jsfiddle.net/vh8Zu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:40:37.840

这是过去通过使用表格进行布局来处理的那种情况。这将在未来通过新的 Flexbox 实现来修复[https://developer.mozilla.org/en-US/docs/CSS/Flexbox](https://developer.mozilla.org/en-US/docs/CSS/Flexbox)

同时，您可以使用 display: table-cell 来模拟表格效果，这将导致每个 div 以您期望表格的方式拉伸。如果您想更好地控制总宽度，可以将其包装在具有 display: table-row 和设置宽度的 div 中。

```
.col {
    background-color:#333;
    color:#EEE;
    width:50px;
    display:table-cell;
}
.middle {
    background-color:#EEE;
    color:#333;
    display:table-cell;
} 
```

# php - 控制器未执行：错误 404

> ID：11808696
> 
> 赞同：1
> 
> 时间：2012-08-04T12:30:07.510
> 
> 标签：php, codeigniter

我使用 CI v2.0.3 ， xampp windows 1.7.0 ，并将 CI 文件夹重命名为“Hello”
，我在应用程序/控制器中创建了一个 Blog.php。

Blog.php 的内容是：

```
<?php
if(!defined('BASEPATH')) exit('No Direct Script Access Allowed');

class Blog extends CI_Controller {
        function __construct()
        {
            parent::__construct();
        }

        function index()
        {
            echo "Haloo.. CI pertama";     
        }
} 
```

我想访问`localhost:8080/hello/index.php/blog`或`localhost:8080/hello/index.php/Blog`但他们都仍然显示`404 not found`。
这正是我所期望的：“Haloo.. CI pertama”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:37:50.433

如果您的 CI 文件夹名为“Hello”，那么您可以这样访问它：

```
http://localhost:8080/Hello/index.php/blog 
```

怎么了！文件夹名称区分大小写，因此`/hello/index.php/blog`不起作用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T12:36:08.483

如果您没有为 Apache 启用重写模块，则您输入的 URL 不正确。对于考虑文件夹名称的设置，请尝试：

```
http://localhost:8080/Hello/index.php?/blog 
```

**编辑：**添加了文件夹名称

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-04T12:32:22.277

您需要在索引操作中呈现视图。

您的视图位于 application/views 中。所以你必须创建一个名为`index.php`那里的文件，你将把`Hello World`. 然后您将其添加到您的函数中：

```
$this->load->view('index'); 
```

希望这可以帮助。

# asp.net - 如何在 ASP.NET MVC3 的 ORM 中插入示例数据而不删除整个数据库？

> ID：11808698
> 
> 赞同：2
> 
> 时间：2012-08-04T12:30:30.857
> 
> 标签：asp.net, asp.net-mvc-3, sql-server-2008, orm

我正在使用 ASP.NET MVC3 的网站上工作，并按照 MVC Music Store 教程进行操作，但可以根据需要进行编辑。我现在正试图在我的测试部署服务器上预览该站点，但 SQL 连接有问题。

我更改了 SampleData 文件以满足我的需要并替换`DropCreateDatabaseIfModelChanges<MyProjectEntities>`为，`DropCreateDatabaseAlways<MyProjectEntities>`因为它没有在我需要时更新示例数据。

当我尝试在数据库中查找某些内容时，我得到了异常`Cannot drop the database 'MyDatabase', because it does not exist or you do not have permission`。我知道这是因为我根本无法删除数据库，而且我将无法在我的服务器上执行此操作。那么如何告诉 ORM 我不希望它删除数据库来创建表，而是清空或更新现有数据库？

**更新：**

我下载了 SQL Server Management Studio 并设法将数据从本地数据库获取到在线数据库，但现在我得到了一个不同的错误：`Login failed for user '[username]'.`

我仔细检查了连接字符串，它是正确的，这是我的 Web.config 中的完整代码片段：

```
<add name="AdzTowerEntities"
     connectionString="Data Source=xxxxx.db.xxxxxxx.hostedresource.com; Initial Catalog=xxxxxroot; User ID=xxxxxroot; Password=xxxxxpassword;"
     providerName="System.Data.SqlClient"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:48:56.013

使用[MigrateDatabaseToLatestVersion](http://msdn.microsoft.com/en-us/library/hh829293%28v=vs.103%29)怎么样？

如果您无法使用代码优先迁移，则可以创建一个自定义 IDatabaseInitializer，它将执行带来更改所需的 SQL：

```
 public class AlwaysSeedInitializer : IDatabaseInitializer<MyProjectEntities>
      {
         public void InitializeDatabase( MyProjectEntities context )
             {
                if( context.Database.Exists() )
                {
                   if( !context.Database.CompatibleWithModel( true ) )
                   {
                      context.Database.SqlCommand("Add SQL commands here");
                   }
                }

                if ( /* Insert test to see if database is already seeded */ )
                {
                   //Seed here if the db is not seeded 
                }
             }
      } 
```

并将其放入 global.asax 的 Application_Start() 中：

```
 Database.SetInitializer(new AlwaysSeedInitializer()); 
```

# c# - c# tesseract2 ocr 识别 2 而不是 3

> ID：11808707
> 
> 赞同：1
> 
> 时间：2012-08-04T12:31:37.757
> 
> 标签：c#, tesseract

[![图像1](../Images/6e78f8fa57e8490d8df3b2b20939f55f.png)](https://i.stack.imgur.com/U7YDT.gif)
[（来源：[askdev.ru](http://u.askdev.ru/501/d0d4/d852f8/large.gif)）]

[![img2](../Images/282bf3046ff802c44e0d98761bf55d22.png)](https://i.stack.imgur.com/Zzw5K.gif)
[（来源：[askdev.ru](http://u.askdev.ru/501/d0d5/b0d8fd/large.gif)）]

结果，我有 298 和 288。

```
tessnet2.Tesseract ocr = new tessnet2.Tesseract();
ocr.SetVariable("tessedit_char_whitelist", "$,0123456789");
ocr.Init("C:\\tessdata\\", "eng", false); 

Bitmap tmp = wbbmp.Clone(rectM[5], System.Drawing.Imaging.PixelFormat.Format24bppRgb);

List<tessnet2.Word> n = ocr.DoOCR(tmp, new Rectangle(0,0,75,21)); 
```

# objective-c - addObject 替换 NSMutableArray 中的前一个对象

> ID：11808720
> 
> 赞同：2
> 
> 时间：2012-08-04T12:33:10.567
> 
> 标签：objective-c, ios, nsmutablearray

我正在尝试通过 for 循环将对象添加到 NSMutableArray。但似乎每当我添加一个对象时，它都会替换旧的对象，因此我当时在数组中只有一个对象......

你知道什么可能是错的吗？

```
- (void)viewDidLoad
{
[super viewDidLoad];
LoginInfo *info = [[LoginInfo alloc] init];
info.startPost = @"0";
info.numberOfPosts = @"10";
info.postType = @"1";
getResults = [backendService getAllPosts:info];

for (NSInteger i = 0; i < [getResults count]; i++) {

    Post *postInfo = [[Post alloc] init];
    postInfo = [getResults objectAtIndex:i];

    dataArray = [[NSMutableArray alloc] init];
    [dataArray addObject:postInfo.noteText];
    NSLog(@"RESULT TEST %@", dataArray);

}
} 
```

结果测试日志始终只显示输出中最后添加的字符串。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T12:37:32.873

您正在 for 循环内初始化 dataArray，因此每次再次创建它（这意味着没有对象）并添加一个新对象

移动

```
dataArray = [[NSMutableArray alloc] init]; 
```

在 for 循环之前

`postInfo`当您立即用 getResults 数组中的对象覆盖它时，也不需要分配/初始化对象

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T12:43:57.433

您使用此行继续为循环的每次运行重新初始化数组：

```
dataArray = [[NSMutableArray alloc] init]; 
```

So`dataArray`为每次循环运行设置一个新的（空）数组。

而是在循环之前初始化数组。尝试这样的事情：

```
dataArray = [[NSMutableArray alloc] init];

for (NSInteger i = 0; i < [getResults count]; i++) {

    PostInfo *postInfo = [getResults objectAtIndex:i];

    [dataArray addObject:postInfo.noteText];

    NSLog(@"RESULT TEST %@", dataArray);

} 
```

# asp.net - 从 IIS 和 asp.net 中的共享服务器发送邮件错误

> ID：11808722
> 
> 赞同：0
> 
> 时间：2012-08-04T12:33:30.100
> 
> 标签：asp.net

我正在做一个项目，我必须向我的用户/客户发送链接。一旦他们注册了他们的帐户，邮件就会发送给他们。现在，当单击该链接时，他们的邮件中将有一个链接，用户将再次被重定向到我的网站，并且他们将看到一个 pdf。

当我从我的系统和本地服务器执行此操作时，它工作正常。

但是现在我的项目已经放在开发服务器上，我无法从那里发送邮件。

我收到以下错误

消息：Sys.WebForms.PageRequestManagerServerErrorException：AspPDF.NET 2.0.0.14045 已生成错误 #46：[打开输出文件失败：访问路径 'C:\inetpub\wwwroot\Myesign\UploadedFiles\Signed\Support2(1).pdf ' 被拒绝。]

我不清楚这个错误的可能原因是什么。当我使用本地服务器时，同一个项目工作，我的电脑也工作正常，但从生产服务器上，同一个项目不工作。

我在邮件 ID 中获得的链接也是

“http://localhost/ScriptResource.axd?d=n3csX8loR-nh3aSKQ4FNi7Vth7ZBerv1fa-7sJrneEaqqdsyYs5M1zxZ6mXbdwJ0oPXtyofmMkG8z9SZaK8qgo6xYZPs72x4Icy0pXeiYtTxb_JCbdFLZmwvpEToNB0tY16mtEQ2&2&”

在上面的链接中不需要“http://localhost/”有什么我可以做的吗？我确定可能有某种方法，但我无法找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:43:59.690

您可以发布用于生成和通过电子邮件发送链接的代码吗？这可能是一个相对链接问题。此外，请确保 NTAUTHORITY\NETWORKSERVICE 帐户有权读取服务器上 PDF 文件夹中的文件，因为这是通过 IIS 在服务器上访问文件时使用的帐户。

# ruby - 计算字段的 ruby 活动记录条件

> ID：11808726
> 
> 赞同：1
> 
> 时间：2012-08-04T12:34:08.517
> 
> 标签：ruby, activerecord, count, conditional-statements

我正在尝试在一个查询中执行计算，为计算值应用条件并计算结果。问题是我不知道如何从条件中引用计算字段。

我有 Issues.created_on 字段，我想查找有关在用户提供的几周内每周创建多少问题的统计信息。这是我的查询在 MySql 中的样子：

```
mysql>  SELECT status_id as group_id,
YEAR(created_on)*1000+WEEK(created_on,1) as range_value, count(*) as
noOfEntries FROM `issues` WHERE (`issues`.`project_id` IN (1))  GROUP
BY issues.status_id, range_value;

+----------+-------------+-------------+
| group_id | range_value | noOfEntries |
+----------+-------------+-------------+
|        1 |     2012031 |           2 |
|        5 |     2012015 |           1 |
+----------+-------------+-------------+ 
```

这是我的代码（简化）：

```
# Range value is dynamic: "YYYYXXX", where YYYY is year and XXX could be week, month or day of year
range_value = "YEAR(created_on)*1000+WEEK(created_on,1)"    
select = "#{range_value} as range_value, count(*) as noOfEntries"
grouping = "range_value"
# other conditions are provided by user, so we just add one here
conditions["range_value"] = range[:min]..range[:max]

rows = Issue.all(:select => select, :conditions => conditions, :readonly => true, :group => grouping) 
```

但我得到这个错误：

```
ActiveRecord::StatementInvalid (Mysql::Error: Unknown column 'issues.range_value' in 'where clause': SELECT YEAR(created_on)*1000+WEEK(created_on,1) as range_value, 'weeks' as range_type, count(*) as logged_hours, 1 as entries, 'priority_id' as grouping, issues.priority_id as group_id FROM `issues` WHERE (`issues`.`range_value` BETWEEN '2012012' AND '2012031' AND `issues`.`project_id` IN (1))  GROUP BY range_value, issues.priority_id ORDER BY 1 asc, 6 asc): 
```

我要修改的代码不是我的，所以我不能向 Issues 对象添加任何新字段或方法。所以像这样的解决方案[对](https://stackoverflow.com/questions/11457031/query-based-on-calculated-fields-with-mongoid)我不起作用，我猜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:42:38.510

你应该做这个：

```
rows = Issue.select(select).where(conditions).group(grouping).readonly 
```

更清楚了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T05:33:27.737

我找到了一个实际上有帮助[的代码示例：](http://blog.grayproductions.net/articles/five_activerecord_tips)

> ActiveRecord 没有用于在数据库查询中包含 HAVING 子句的参数，我有时发现自己需要它。幸运的是，您可以在 :group 参数的末尾偷偷添加它，而无需求助于 find_by_sql() 调用。（我不记得曾经在没有 GROUP BY 的情况下使用过 HAVING，尽管可能在某些情况下这样做是有意义的。）
> 
> 例如，这是我的一个 Rails 应用程序的查询，它在数据库中查找所有重复的电子邮件地址：

```
duplicates = User.find( :all,
  :select     => "email, COUNT(email) AS duplicate_count",
  :conditions => "email IS NOT NULL AND email != ''",
  :group      => "email HAVING duplicate_count > 1"
) 
```

因此，经过轻微修改，我的代码可以工作：

```
# Range value is dynamic: "YYYYXXX", where YYYY is year and XXX could be
# week, month or day of year
range_value = "YEAR(created_on)*1000+WEEK(created_on,1)"    
select = "#{range_value} as range_value, count(*) as noOfEntries"
# CHANGED THIS LINE from: grouping = "range_value"
grouping = " HAVING range_value BETWEEN #{range[:min]} AND #{range[:max]}"

# other conditions are provided by user, so we just add one here
# REMOVED THIS LINE
# conditions["range_value"] = range[:min]..range[:max]

rows = Issue.all(:select => select, :conditions => conditions, :readonly => true, :group => grouping) 
```

# regex - 获取准确数字的正则表达式

> ID：11808728
> 
> 赞同：2
> 
> 时间：2012-08-04T12:34:38.417
> 
> 标签：regex, numbers

我在一个字符串中有一些逗号分隔的数字，我想从中匹配一个特定的数字。对于示例字符串“18, 34, 22, 9, 2, 56”，我想匹配数字“2”，而不是 22 中的两个“2”。我怎样才能获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:40:02.470

使用这个正则表达式`\b2\b`替换`2`你的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T13:04:59.390

您可以使用大多数 prog 语言提供的普通字符串函数来解决这个问题，而无需使用正则表达式。例如 Python 中的一种解决方案。在开头和结尾添加逗号：

```
s=", 18, 34, 22, 9, 2, 56,"
s.find(', 2,') 
```

如果找不到搜索字符串，该函数将返回 -1。如果您坚持使用正则表达式，则模式可能看起来相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T12:44:26.737

这可能不是最好的方法，但您可以尝试这样的方法

```
 string NUmbers= "18,22,34,52";
                string[] NewNos=NUmbers.Split(',');

                for(int i=0;i<NewNos.Length;i++)
                {
                    if(NewNos[i].ToString().Contains("2"))
                    {
                    //do whatever you want

                    }
                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T13:14:12.880

你可以使用 grep

```
echo "18, 34, 22, 9, 2, 56" | grep -E -o "^2,| 2,| 2$" 
```

并用您在逗号分隔的数字字符串中搜索的任何数字替换 grep 正则表达式中的“2”

# c# - 更改 RowSpan 和 ColumnSpan 后呈现元素的大小

> ID：11808731
> 
> 赞同：-1
> 
> 时间：2012-08-04T12:35:08.790
> 
> 标签：c#, wpf, grid, size, html-table

`Grid`更改布局后，我需要布局中元素的大小`ColumnSpan`and `RowSpan`。和属性`ActualWidth`不`ActualHeight`反映渲染大小。

```
<Window x:Class="SizeTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" KeyDown="OnKeyDown">
<Grid Name="grid">
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Label Name="testElement" Content="Test" Background="Red" Grid.Row="0" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="1" />
</Grid> 
```

```
private void OnKeyDown(object sender, KeyEventArgs e)
{
    var w1 = testElement.ActualWidth;
    var h1 = testElement.ActualHeight;

    Grid.SetColumnSpan(testElement, 2);
    Grid.SetRowSpan(testElement, 2);

    var w2 = testElement.ActualWidth;
    var h2 = testElement.ActualHeight;

    MessageBox.Show(string.Format("Initial size: {0}x{1}\nNew size: {2}x{3}", w1, h1, w2, h2));
} 
```

输出：初始尺寸：285.5x160 新尺寸：285.5x160

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:45:24.963

`ActualWidth`并且`ActualHeight`会在更新网格布局时为您提供正确的结果。`LayoutUpdated`所以你必须在你的网格或其他父元素的情况下获得这两个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:47:43.353

调用[Grid.UpdateLayout 方法](http://msdn.microsoft.com/en-us/library/system.windows.uielement.updatelayout) `ActualWidth`后`ActualHeight`会反映新的值。

```
Grid.SetColumnSpan(testElement, 2);
Grid.SetRowSpan(testElement, 2);
grid.UpdateLayout() 
```

# asp.net - 在 VB 中使用 LINQ 查询动态创建哈希表并将其绑定到 ASP-DataGrid

> ID：11808737
> 
> 赞同：-1
> 
> 时间：2012-08-04T12:35:50.057
> 
> 标签：asp.net, vb.net, linq, entity-framework, hashtable

这就是我到目前为止所做的（代码片段）

ASP.NET 标记：

```
 <div class="Grid-style">
   <asp:GridView ID="dgRequiredAttachment" runat="server" AutoGenerateColumns="false" DataKeyNames="Key">
      <Columns>
         <asp:BoundField HeaderText="Key" datafield="Key" SortExpression="Key" Visible="false"/>
          <asp:BoundField HeaderText="Value" datafield="Value" SortExpression="Value"/>
       </Columns>
    </asp:GridView>
 </div> 
```

VB.NET 代码：

```
 Protected Sub ddlCitizenStatus_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlCitizenStatus.SelectedIndexChanged
Dim context As New EGrantsModel.Entities
Dim attachmentType As New EGrantsModel.ATTACHMNTTYPE

Dim DC As Hashtable = New Hashtable
Dim orderCopyDesc As String = (From orderCopy In context.ATTACHMNTTYPEs Where orderCopy.ATTACHTYPEID = "1" Select orderCopy.DESCRIPTION).First
Dim notificationLtrDesc As String = (From notificationLetter In context.ATTACHMNTTYPEs Where notificationLetter.ATTACHTYPEID = "2" Select notificationLetter.DESCRIPTION).First
Dim citizenListDesc As String = (From citizenList In context.ATTACHMNTTYPEs Where citizenList.ATTACHTYPEID = "3" Select citizenList.DESCRIPTION).First

DC.Add("1", orderCopyDesc)
DC.Add("2", notificationLtrDesc)
DC.Add("3", citizenListDesc) 

dgRequiredAttachment.DataSource = DC
dgRequiredAttachment.DataBind()
dgRequiredAttachment.Visible = True

End Sub 
```

现在在线

```
Dim DC As New Hashtable = New Hashtable 
```

我想：如您所见，我正在使用 LINQ 查询动态创建 HashTable。但是，如果我在类型表中有超过 3 个条目`Attachment`，它会检查`ATTACHMENTType`表中的所有值，`AttachmenttypeID`并使用循环将项目填充/添加到哈希表。

有人可以帮我弄这个吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:16:41.680

通过以下代码，我解决了我的问题

**VB代码**

```
 Dim DC As Hashtable = New Hashtable
     Dim attachmentTypes = (From attachmentTypeData In context.ATTACHMNTTYPEs Select attachmentTypeData.DESCRIPTION, attachmentTypeData.ATTACHTYPEID)

       For Each a In attachmentTypes
         DC.Add(a.ATTACHTYPEID, a.DESCRIPTION)
       Next

      dgRequiredAttachment.DataSource = DC 
      dgRequiredAttachment.DataBind()
      dgRequiredAttachment.Visible = True 
```

# c - 从 ext3 linux 安全删除文件

> ID：11808742
> 
> 赞同：4
> 
> 时间：2012-08-04T12:36:33.070
> 
> 标签：c, file, unix

这个问题在过去被问到不同程度的成功......

是否有可以调用的工具或 C/C++ unix 函数使我能够检索文件在磁盘上的位置？不是文件的某个虚拟地址，而是文件所在的磁盘/扇区/块？

这里的目标是能够覆盖磁盘上存在的实际位。我可能需要一种方法来绕过内核的地址叠加。我愿意考虑基于 x86 asm 的解决方案...

但是，我觉得已经有一些工具可以很好地做到这一点。

感谢您对此的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:30:50.467

只有在非常特定的情况下才能安全地删除文件：

*   操作系统和实际存储介质之间没有不受控制的间接层。

    在无法再假设的现代系统上。带有固件磨损均衡代码的 SSD 驱动器不能这样工作；他们可以随意移动或复制数据，没有记录或外部控制的可能性。即使是磁盘驱动器也会例行地将现有数据留在故障后重新映射的扇区中。混合驱动器兼具...

    ATA 规范确实支持擦除整个驱动器的[SECURE ERASE](https://ata.wiki.kernel.org/index.php/ATA_Secure_Erase)命令，但我不知道现有的实现有多彻底。

*   文件系统驱动程序始终具有稳定且唯一的文件到物理块的映射。

    我相信`ext2fs`确实有这个功能。我也认为，`ext3fs`并且`ext4fs`在默认日记模式下也可以这样工作，但在安装`data=journal`允许文件数据存储在日记中的选项时不是这样，而不仅仅是元数据。

    另一方面`reiserfs`，工作方式肯定不同，因为它存储少量数据以及元数据，除非安装了该`notail`选项。

如果满足这两个条件，那么诸如此类的程序*可能*能够通过多次覆盖文件的内容来安全地删除文件的内容。[`shred`](http://linux.die.net/man/1/shred)

 *这种方法仍然没有考虑到：

*   备份

*   虚拟化存储

*   交换空间中的剩余数据

*   ...

底线：

*   您不能再假设安全删除是可能的。最好假设这是不可能的并使用加密；如果您正在处理敏感数据，则可能无论如何都应该使用它。

*   有关敏感数据的协议要求对存储介质进行物理销毁是有原因的。有些公司实际上将他们的硬盘驱动器消磁，然后在焚烧残骸之前将它们*切碎......**

# android - 如何获取 Horizo ntalScrollView 的宽度

> ID：11808746
> 
> 赞同：1
> 
> 时间：2012-08-04T12:37:09.070
> 
> 标签：android, horizontalscrollview

我正在开发一个由水平滚动视图组成的应用程序，我想获得 Horizo​​ntalScrollView 的宽度。**我**怎样才能做到这一点？它对我来说归零

## 在 XML 中有这样的。

```
<TextView
    android:layout_width="50dp"
    android:layout_height="10dp"
    android:background="#00ff00" />

<HorizontalScrollView
    android:id="@+id/horizontalScrollView1"
    android:layout_width="fill_parent"
    android:layout_height="100dp"
    android:background="#ff0000" >

    <TextView
        android:layout_width="50dp"
        android:layout_height="10dp"
        android:background="#00ff00" />
</HorizontalScrollView> 
```

在 Java 中

```
public class TestApplication extends Activity{

    private HorizontalScrollView horizontalScrollView1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.testscroll);

        horizontalScrollView1 = (HorizontalScrollView)findViewById(R.id.horizontalScrollView1);
        horizontalScrollView1.getRight();
        horizontalScrollView1.getWidth();

        System.out.println("horizontalScrollView1.getWidth();::>"+horizontalScrollView1.getWidth());
        System.out.println("horizontalScrollView1.getWidth();::1>"+horizontalScrollView1.getMeasuredWidth());
    } 
```

我已经尝试过以下方法，任何人都可以帮助我。

谢谢尼基尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:40:29.103

你可以这样做：

```
int width = 0;
ViewTreeObserver vto = horizontalScrollView1.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

    @Override
    public void onGlobalLayout() {
        width = horizontalScrollView1.getWidth();
    }
}); 
```

希望有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-08T17:58:20.537

请尝试这样

```
Log.d("TAG","scrollbar width: " + scrollView.getChildAt(0).getWidth());
Log.d("TAG","scrollbar height: " + scrollView.getChildAt(0).getHeight()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T12:53:01.733

Instead of `getWidth()` method try with `getMeasuredWidth()` it will help you i think

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T14:50:54.123

您可以在这种情况下实现：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);

    int width = horizontalScrollView1.getMeasuredWidth();
    int height = horizontalScrollView1.getMeasuredHeight();
    System.out.println("widrh::>"+width);
    System.out.println("height::>"+height);
} 
```

# firefox - 占位符在 Chrome 中聚焦时不会消失

> ID：11808752
> 
> 赞同：8
> 
> 时间：2012-08-04T12:38:26.283
> 
> 标签：firefox, google-chrome, placeholder

我根据下面的代码创建了一个输入。

```
<div>
  <form id="me" runat="server">
  <input id="stuff" type="text" placeholder="Type here" runat="server" />
  </form>
</div> 
```

正如预期的那样，当我开始输入时，占位符文本消失了。这在 Burning Cat 浏览器中可以正常工作，但在 Shiny Metal 浏览器中却不行。是什么导致它（样式，服务器标签，其他东西......）？可以做些什么呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-25T15:17:06.897

我今天遇到了同样的问题，我想出了一个纯 CSS~~解决方案~~：

```
input:focus::-webkit-input-placeholder {
    color: transparent;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T23:55:52.063

Firefox 和 chrome（和 safari）在 HTML5 占位符上的行为不同。如果您希望 chrome 消除焦点上的占位符，可以使用以下脚本：

```
$('input:text, textarea').each(function(){
    var $this = $(this);
    $this.data('placeholder', $this.attr('placeholder'))
         .focus(function(){$this.removeAttr('placeholder');})
         .blur(function(){$this.attr('placeholder', $this.data('placeholder'));});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T07:23:44.017

您可以使用这个占位符 jquery 插件：[placeholderFix](https://github.com/SimonePomata/jquery-placeholderFix)。使用这个插件，占位符标签将在所有浏览器中以相同的方式工作，在不支持它的浏览器中也是如此。

# javascript - Bootstrap 下拉菜单不选择元素。需要下拉按钮组设计

> ID：11808754
> 
> 赞同：3
> 
> 时间：2012-08-04T12:38:36.453
> 
> 标签：javascript, css, twitter-bootstrap

我正在使用 twitter bootstrap 并寻找一个看起来像按钮组的下拉菜单。问题是，在所有 twitter 引导示例中，下拉菜单仅充当菜单项，因此所选项目并没有真正改变：http:
[//twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

有谁知道如何设计像按钮组这样的下拉菜单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:47:25.867

我将此网络发现转换为 jquery 插件：

```
(function($) {
    $.fn.buttonSelect = function() {
        this.hide().wrap('<div class="btn-group"/>');
        var select = this.parent();
        var selectedOption=this.find('option[selected]').length>0?this.find('option[selected]'):this.find('option:nth(0)');
        var currentValue = selectedOption.val();
        var currentText = selectedOption.text();
        select.html(
            '<input type="hidden" value="' + this.val() + '"/>'+
            '<a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;">'+
                '<span>'+currentText+'</span>'+
                '&nbsp;&nbsp;<span class="caret"></span>'+
            '</a>'+
            '<ul class="dropdown-menu"></ul>');

        var dropdownMenu=select.find('.dropdown-menu');
        this.find('option').each(function(o, q) {
            dropdownMenu.
                append('<li><a href="javascript:;" data-value="' + $(q).attr('value') + '">' + $(q).text() + '</a></li>');
        });

        var hidden=select.find('input[type=hidden]');
        var label=select.find('.btn span:nth(0)');
        dropdownMenu.find('a').click(function() {
            hidden.val($(this).data('value')).change();
            label.text($(this).text());
        });

        return this;
    };
})(jQuery); 
```

然后，使用 $(elem).buttonSelect(); 使选择元素看起来像按钮组。

# android - 如何从 android 上的音量偏好更改音量？

> ID：11808757
> 
> 赞同：2
> 
> 时间：2012-08-04T12:39:50.990
> 
> 标签：android, volume, preference, ringtone

我有一个应用程序具有音量偏好，在我的布局代码下方：

```
<VolumePreference
android:name="Volume Preference"
android:summary="Ringtone Volume"
android:title="Ringtone Volume"
android:key="ringVolPref"/> 
```

但我不知道，如何在课堂上实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:57:15.457

Try this code

**XML**

```
<SeekBar android:id="@+id/seekbar"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:max="100"
android:minWidth="250px"  /> 
```

**CODE**

```
public class MainActivity extends Activity 
{

    /** Called when the activity is first created. */

    private SeekBar volumeSeekbar = null;
    private AudioManager audioManager = null; 

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setVolumeControlStream(AudioManager.STREAM_MUSIC);
        setContentView(R.layout.main);
        initControls();
    }

    private void initControls()
    {
        try
        {
            volumeSeekbar = (SeekBar)findViewById(R.id.seekbar);
            audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            volumeSeekbar.setMax(audioManager
                    .getStreamMaxVolume(AudioManager.STREAM_MUSIC));
            volumeSeekbar.setProgress(audioManager
                    .getStreamVolume(AudioManager.STREAM_MUSIC));   

            volumeSeekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() 
            {
                @Override
                public void onStopTrackingTouch(SeekBar arg0) 
                {
                }

                @Override
                public void onStartTrackingTouch(SeekBar arg0) 
                {
                }

                @Override
                public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) 
                {
                    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,
                            progress, 0);
                }
            });
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-12T10:13:38.357

在您的情况下，最好的方法是添加到您的 .xml `android:streamType`中。这将改变所选流类型的音量。

```
<VolumePreference
           android:title="Alarm volume"
           android:persistent="false"
           android:streamType="alarm"/> 
```

# javascript - 基本阵列构造的功能方法

> ID：11808758
> 
> 赞同：3
> 
> 时间：2012-08-04T12:39:56.703
> 
> 标签：javascript, functional-programming

这是我的代码，作用于`myArray`：

```
var myArray = [];
var i;

for(i = 0; i < 20; i += 1) {
   myArray.push(Math.random());
} 
```

是否有没有虚拟变量的上述功能等价物`i`？

*最喜欢的答案*：

*   `while(myArray.push(Math.random()) < 20);`
*   `$.map(Array(20), Math.random);`
*   `for(var myArray = []; myArray.push(Math.random()) < 20;);`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T12:50:13.093

不在 ES5 中，没有真正等效的功能，因为您必须拥有数量为 20 的东西才能将 map 应用于...

```
var my20ElementArray = [0,1,2,3,4,5,6,7,8,9,10];
var myArray = my20ElementArray.map(Math.random); 
```

您可以在 Python 中创建一个[类似 xrange 的函数](http://djangosnippets.org/snippets/2287/)，但这只会将这个“未使用”变量隐藏在函数中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T12:59:40.953

在 JavaScript 1.7 中，您可以使用[数组推导](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7#Array_comprehensions_(Merge_into_Array_comprehensions))来完成此任务：

```
var myArray = [Math.random() for each (i in range(0, 20))]; 
```

* * *

但是，在 ES5.1 中，您可以使用[`Array`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)生成任意长度的数组，然后将其映射为随机数。唯一的缺点是它[`map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)不适用于未初始化的值，因此我首先使用[`join`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)and生成一个空字符串数组[`split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)：

```
var myArray = new Array(20).join(" ").split(" ").map(Math.random); 
```

丑陋，但很短。在 JavaScript中创建范围的一个可能更好（但不太容易理解）的想法[- 奇怪的语法](https://stackoverflow.com/q/18947892/1048572)：

```
var myArray = Array.apply(null, {length: 20}).map(Math.random); 
```

* * *

`i`从@FelixKlings 评论开始，人们也可以在没有循环变量的情况下使用这个单行代码：

```
for (var myArray=[]; myArray.push(Math.random()) < 20;);
// much better:
for (var myArray=[]; myArray.length < 20;) myArray.push(Math.random()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T12:58:06.740

您是否正在寻找以下内容：

```
function makeArray(length, def) {
    var array = [];
    var funct = typeof def === "function";
    while (array.push(funct ? def() : def) < length);
    return array;
} 
```

然后您可以按如下方式创建数组：

```
var array = makeArray(100); // an array of 100 elements
var zero = makeArray(5, 0); // an array of 5 `0`s 
```

在您的情况下，您可以执行以下操作：

```
var myArray = makeArray(20, Math.random); 
```

请参阅以下小提琴：http: [//jsfiddle.net/WxtkF/3/](http://jsfiddle.net/WxtkF/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T11:23:28.047

这个怎么样？

它的功能风格，非常简洁。

```
var makeRandomArray = function(n){
    if (n == 0) return [];
    return [Math.random()].concat(makeRandomArray(n-1));
};

console.log(makeRandomArray(20)) 
```

[http://jsfiddle.net/YQqGP/](http://jsfiddle.net/YQqGP/)

​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T13:11:53.520

你可以试试：

```
var myArray = String(Array(20)).split(',')
               .map( () => Math.random() ); 
```

或者用类似的东西扩展 Array 原型：

```
Array.prototype.vector = function(n,fn){
  fn = fn || function(){return '0';};
  while (n--){
    this.push(fn());
  }
  return this;
}
// usage
var myArray = [].vector(20, () => Math.random()); 
```

或者尝试一些有趣的事情：

```
var myArray = function a(n,fn){
  return n ? a(n-1,fn).concat(fn()) : [];
}(20, () => Math.random()) 
```

或者使用[Array.from](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from) (ES>=2015)

```
Array.from({length: 20}).map(() => Math.random()) 
```

# api - 用于 JSF 的 Highcharts Java Api 包装器？

> ID：11808769
> 
> 赞同：1
> 
> 时间：2012-08-04T12:41:54.903
> 
> 标签：api, jakarta-ee, jsf-2, highcharts

我在[Highcharts 的官方网站上](http://www.highcharts.com/download)寻找Api 包装器，它不包含 Java 的 Api 包装器。它只有[highcharts-serverside-export](https://github.com/one2team/highcharts-serverside-export)用于在服务器端生成图像。有人知道JSF 是否存在类似[DotNet.Highcharts的东西吗？](http://dotnethighcharts.codeplex.com/)我遇到过这个问题，即如何将[Highcharts 与 JSF](https://stackoverflow.com/questions/9879281/jsf-highcharts-and-js)一起使用，但肯定有一些来自 .NET 的 Api 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:36:39.143

我遇到了和你一样的问题。我开始编写自己的自定义组件来连接 JSF 和 highcharts。我已经提供了[我的代码](http://kevindoran1.blogspot.co.nz/2012/12/using-highcharts-in-jsf.html)。它不是一个完整的包装，但总比没有好。

# search - Lucene 如何在复合查询中对数据进行排序？

> ID：11808772
> 
> 赞同：0
> 
> 时间：2012-08-04T12:42:10.470
> 
> 标签：search, solr, lucene, full-text-search, cloudant

如果我使用复合查询，我需要知道 Lucene 如何对结果集中的记录进行排序。

看起来它使用“分数”值对精确查询进行排序，并按字典顺序对范围查询进行排序。但是如果查询看起来像

```
q = type:TAG OR type:POST AND date:[111 to 999] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:05:00.137

您将逻辑**搜索**和**评分**混合在一起。当您传递查询 like`date:[111 to 999]`时，Lucene 会搜索日期在指定范围内的所有文档。但是您没有就如何对它们进行排序给出任何建议-日期 111 比 555 更适合您吗？还是701比398好？Lucene 对此一无所知，因此所有找到的文档的分数都是相同的。只是为了进行排序，Lucene 按字典顺序对结果进行排序，但这主要是实现的细节，而不是一些关键思想。

另一方面，如果您通过查询传递一些其他参数 - 无论是关键字还是标签 - Lucene 可以应用其[相似性算法](http://lucene.apache.org/core/3_6_1/api/core/org/apache/lucene/search/Similarity.html)并为结果中的不同文档分配不同的分数。[您可以在此处](http://lucene.apache.org/core/3_6_1/scoring.html)找到有关 Lucene 评分的更多信息。

所以，给你一个简短的回答：Lucene 按分数对结果进行排序，只有当 2 个文档的分数相同时，它才会使用其他类型的排序选项，如字典顺序。

# java - Spring MVC：调度程序映射到错误的视图

> ID：11808773
> 
> 赞同：0
> 
> 时间：2012-08-04T12:42:17.783
> 
> 标签：java, spring, spring-mvc

问题是：我的观点是回头客。根据我的viewresolver应该映射到WEB-INF/pages/customer.html。相反，它正在通过调度程序 servlet 并且无法找到客户 html。它给出的错误是：“警告：在名称为'mvc-dispatcher'的DispatcherServlet中找不到带有URI [/SpringMVC/WEB-INF/pages/customer.html]的HTTP请求的映射”

这是我的控制器

```
@Controller
public class CustomerController implements BeanFactoryAware {

    private Customers customers;

    /*public String getCustomer(@RequestParam String name) {

        //ApplicationContext context = new FileSystemXmlApplicationContext("/WEB-INF/springapp-servlet.xml");
        //Customers customers = get
        System.out.println("In Controller");
        return "customer";
    }*/

    @RequestMapping(value="/form")  
    public String getCustomer(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {

            System.out.println("In Customer Controller");
            return "customer";
    }

    @Override
    public void setBeanFactory(BeanFactory context) throws BeansException {
        // TODO Auto-generated method stub
        customers = (Customers)context.getBean("customers");

        //System.out.println(customers);

    }

} 
```

这是我的 web.xml

http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

```
<display-name>Spring Web MVC Application</display-name>

<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/mvc-dispatcher-servlet.xml,/WEB-INF/beans.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

这是我的 dispatcher.xml

```
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.html</value>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:53:23.573

Try changing your servlet mapping from:

```
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

to

```
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:00:51.417

您的 servlet 将拦截对匹配 '/*' 的 url 模式的所有调用，但它无法在任何弹簧控制器中找到指定的映射。

我曾经遇到过类似的麻烦，我是如何通过遵循所有春季电话的特定模式来克服这个问题的。例如，

```
<url-pattern>*.htm</url-pattern> 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T14:19:26.810

这将不起作用，因为最终调用将转到 RequestDispatcher，如下所示：

```
RequestDispatcher dispatcher = httpRequest.getRequestDispatcher("/WEB-INF/pages/test.html");
dispatcher.forward(httpRequest, httpRequest); 
```

此时容器将期望 DispatcherServlet 再次处理请求（因为`/*`路径）。如果它是一个jsp页面，容器有一个映射`*.jsp`并且知道如何处理它。

解决方法是将资源放置在相对于 Web 资源的某个位置（如果是 maven 结构，则在 下`src/main/webapp/resources/`，为此内容配置处理程序：

```
<mvc:resources location="/resources/" mapping="/resources/**" /> 
```

现在从您的控制器中您可以返回：

```
return "forward:/resources/mypage.html"; 
```

另外，我看到您正在查找“客户”bean，您不需要这样做，而是希望 Spring 将其注入：

```
@Controller
public class CustomerController{

    @Autowired private Customers customers; 
```

# python - 如何使用 BeautifulSoup 获取两个指定标签之间的所有文本？

> ID：11808776
> 
> 赞同：6
> 
> 时间：2012-08-04T12:42:38.767
> 
> 标签：python, html-parsing, beautifulsoup

```
html = """
...
<tt class="descname">all</tt>
<big>(</big>
<em>iterable</em>
<big>)</big>
<a class="headerlink" href="#all" title="Permalink to this definition">¶</a>
...
""" 
```

我想`big`在第一次出现`a`标签之前获取起始标签之间的所有文本。这意味着如果我举这个例子，那么我必须得到`(iterable)`一个字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T14:25:40.153

一种迭代方法。

```
from BeautifulSoup import BeautifulSoup as bs
from itertools import takewhile, chain

def get_text(html, from_tag, until_tag):
    soup = bs(html)
    for big in soup(from_tag):
        until = big.findNext(until_tag)
        strings = (node for node in big.nextSiblingGenerator() if getattr(node, 'text', '').strip())
        selected = takewhile(lambda node: node != until, strings)
        try:
            yield ''.join(getattr(node, 'text', '') for node in chain([big, next(selected)], selected))
        except StopIteration as e:
            pass

for text in get_text(html, 'big', 'a'):
    print text 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T13:59:44.323

我会避免 nextSibling，因为从您的问题来看，您希望包含直到 next 的所有内容`<a>`，无论它是在兄弟元素、父元素还是子元素中。

因此，我认为最好的方法是找到作为下一个`<a>`元素的节点并递归循环直到那时，添加遇到的每个字符串。如果您的 HTML 与示例有很大不同，您可能需要整理以下内容，但这样的事情应该可以工作：

```
from bs4 import BeautifulSoup
#by taking the `html` variable from the question.
html = BeautifulSoup(html)
firstBigTag = html.find_all('big')[0]
nextATag = firstBigTag.find_next('a')
def loopUntilA(text, firstElement):
    text += firstElement.string
    if (firstElement.next.next == nextATag):             
        return text
    else:
        #Using double next to skip the string nodes themselves
        return loopUntilA(text, firstElement.next.next)
targetString = loopUntilA('', firstBigTag)
print targetString 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T13:47:39.750

你可以这样做：

```
from BeautifulSoup import BeautifulSoup
html = """
<tt class="descname">all</tt>
<big>(</big>
<em>iterable</em>
<big>)</big>
<a class="headerlink" href="test" title="Permalink to this definition"></a>
"""
soup = BeautifulSoup(html)
print soup.find('big').nextSibling.next.text 
```

[有关详细信息，请从此处](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#nextSibling%20and%20previousSibling)查看使用 BeautifulSoup 遍历的 dom

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T13:11:30.300

```
>>> from BeautifulSoup import BeautifulSoup as bs
>>> parsed = bs(html)
>>> txt = []
>>> for i in parsed.findAll('big'):
...     txt.append(i.text)
...     if i.nextSibling.name != u'a':
...         txt.append(i.nextSibling.text)
...
>>> ''.join(txt)
u'(iterable)' 
```

# asp.net-mvc - MVC 3 两次使用@model

> ID：11808785
> 
> 赞同：0
> 
> 时间：2012-08-04T12:44:13.783
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我想使用两次@model 从我网站的另一部分获取数据是否可能？因为现在我遇到了错误，但是如果我只有第一个 @model 一切正常。

看 -> [MVC 3 - 异常详情：System.InvalidOperationException](https://stackoverflow.com/questions/11810558/mvc-3-exception-details-system-invalidoperationexception)

> 错误 2“SportsStore.Entities.Kategorie”不包含“Opis”的定义，并且找不到接受“SportsStore.Entities.Kategorie”类型的第一个参数的扩展方法“Opis”（您是否缺少 using 指令或程序集参考？） c:\Users\Rafal\Desktop\MVC ksiązka\moj projekt\sklep\SportsStore.WebUI\Views\Product\List.cshtml 16 4 SportsStore.WebUI

```
@model IEnumerable<SportsStore.Entities.Towar>
@model IEnumerable<SportsStore.Entities.Kategorie>

@{
    ViewBag.Title = "List";
}

<h2>List</h2>

@foreach (var p in Model)
{
    <div class="item">
         <h3>@p.Nazwa</h3>
         @p.Opis
         <h4>@p.Cena.ToString("c")</h4>
    </div>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:54:14.963

每个视图只能有一个模型。但是您可以使用另一个对象来声明模型：

```
public class SomeViewModel
{
   public IEnumerable<Towar> Towars;
   public IEnumerable<Category> Categories;

   public SomeViewModel(IEnumerable<Towar> towars, IEnumerable<Category> categories) {
     Towars = towars;
     Categories = categories;
   }
} 
```

然后像这样在您的视图中使用它：

```
@model SportsStore.Entities.SomeViewModel

@foreach (var item in Model.Towars)
{
  <div class="item">
    <h3>@p.Nazwa</h3>
    @p.Opis
    <h4>@p.Cena.ToString("c")</h4>
  </div>
}
@foreach (var item in Model.Categories) {
  @item.Name @* or what you need down here *@
} 
```

我还建议您在 MVC 中使用英文名称。阅读和理解更清楚;)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:54:34.917

我认为这将是创建一个 ViewModel（组合您拥有的两个实体）然后基于该 ViewModel 的 View 的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T17:04:59.027

最好创建一个视图模型来表示您的数据。您的视图模型必须只包含您需要在视图上显示的内容。任何不使用的东西都可以删除，没有意义。您的视图模型可能如下所示：

```
using SportsStore.Entities;

public class YourViewModel
{
     public IEnumerable<Towar> Towars { get; set; }

     public IEnumerable<Kategorie> Categories { get; set; }  // I assume this is categories
} 
```

假设您必须在创建视图中使用此视图模型，那么您的创建操作可能如下所示：

```
public class YourController : Controller
{
     private readonly ITowarRepository towarRepository;
     private readonly ICategoryRepository categoryRepository;

     public YourController(ITowarRepository towarRepository, ICategoryRepository categoryRepository)
     {
          this.towarRepository = towarRepository;
          this.categoryRepository = categoryRepository;
     }

     public ActionResult Create()
     {
          YourViewModel viewModel = new YourViewModel
          {
               Towars = towarRepository.GetAll(),
               Categories = categoryRepository.GetAll()
          };

          return View(viewModel);
     }
} 
```

然后在你看来：

```
@model YourProject.DomainModel.ViewModels.YourViewModel

@foreach (var towar in Model.Towars)
{
     // Do whatever
}

@foreach (var category in Model.Categories)
{
     // Do whatever
} 
```

# javascript - Firefox 扩展：在多个浏览器窗口中观察“用户交互不活动”

> ID：11808788
> 
> 赞同：0
> 
> 时间：2012-08-04T12:45:04.747
> 
> 标签：javascript, firefox, events, firefox-addon, dom-events

当用户处于非活动状态时，我试图在我的 Firefox 扩展中进行观察。我目前的解决方案来自一个类似的问题，在[这里](https://stackoverflow.com/questions/5183230/how-can-i-observe-a-specified-firefox-event-in-a-firefox-extension)找到（见接受的答案）。它基本上工作得很好。

然而，我注意到，它似乎无法区分多个打开的浏览器窗口——也就是说，用户不能在一个窗口中处于活动状态，而在另一个窗口中处于非活动状态。目前，活动/非活动状态是所有 Firefox 窗口中的某种全局状态。*因此，如果用户在所有*打开的浏览器窗口中都处于活动状态，则用户变得真正不活动

有没有办法区分不同的窗口，还是我必须处理它（不会很糟糕，但仍然......）？非常感谢您对此的任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:17:15.540

这是您必须自己实施的事情。它还很大程度上取决于“在特定窗口中不活动”的含义。我猜你的意思是这个窗口中缺少鼠标和键盘活动。所以你必须为`keydown`, `keyup`, `mousemove`, `mousedown`, `mouseup`, `DOMMouseScroll`, `touchstart`, `touchend`,`touchmove`事件添加一个监听器。这些事件的侦听器将设置一个超时，例如一分钟。但是，如果有的话，它会首先清除已经存在的超时。这样，超时将在收到最后一个事件后一分钟触发，在用户停止在窗口中生成键盘或鼠标事件后一分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:26:34.363

观察者传递的`subject`参数应该是当前活动浏览器窗口的窗口。

# c++ - 尝试从自己的类访问公共变量时出现奇怪的 SIGSEGV

> ID：11808790
> 
> 赞同：0
> 
> 时间：2012-08-04T12:46:01.343
> 
> 标签：c++, opengl, segmentation-fault

我正在使用 OpenGL 编写程序，但遇到了一个问题。我有一个名为“Quad”的类，导致问题的两个变量是公共地图和公共 Vector3（这是另一个类）。以下是 Quad.h 中定义的这两个变量：

```
std::map<unsigned int, Vector3*> vertexes;
Vector3* normal; 
```

“正常”在 Quad 构造函数中启动（我认为是这个词），如下所示：

```
normal = new Vector3(0,0,0); 
```

地图只是添加到这样的：

```
vertexes[0] = &vertex; 
```

`vertex`作为一个普通的 Vector3，并且地图接受指向 Vector3 的指针，所以我不得不像这样引用它。

我可以通过另一个函数打印出 Vector3 的正确值，但由于某种原因，我得到了一个分段错误：

```
void Quad::draw()
{
    glNormal3f(normal->x, normal->y, normal->z);

    for (std::map<unsigned int, Vector3*>::iterator i = this->vertexes.begin(); i !=   this->vertexes.end(); ++i) {
        glVertex3f(i->second->x, i->second->y, i->second->z);
    }
} 
```

我知道这是由公共变量引起的，因为如果我注释掉方法的内容，就不会发生错误。`cout << normal->x << endl;`也会导致故障，而`cout << "Hello World!" << endl;`不会。但是这个函数和这个有什么区别？

```
void Quad::calculateNormal()
{
    Vector3 tmp = *vertexes[0];
    tmp = tmp.getFaceNormal(*vertexes[1], *vertexes[2]);
    normal = &tmp;
    std::cout << *normal << std::endl;
} 
```

这是 normal 被重新定义和打印的地方。即使替换`std::cout << *normal << std::endl;`为`std::cout << normal->x << std::endl;`作品并为我提供正确的数据，但在其他功能中却没有？我只是不明白。我很确定这很愚蠢（我希望如此）。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T12:54:48.830

If you have code similar to this:

```
// Global map of vertices
std::map<unsigned int, Vector3*> vertexes;

void foo()
{
    Vector3 vertex;
    vertexes[0] = &vertex;
}

int main()
{
    foo();
    std::cout << vertexes[0]->x << '\n';
} 
```

Then you are invoking *undefined behavior*. This is because the pointer you add in function `foo` is no longer valid, as it points to a local variable.

# html - 避免鼠标悬停时抖动

> ID：11808791
> 
> 赞同：0
> 
> 时间：2012-08-04T12:46:03.523
> 
> 标签：html, css

我正在尝试为我的网页制作一个左侧导航菜单，如下图所示：

这是我面临的问题的jsfiddle。[http://jsfiddle.net/rzr4Z/](http://jsfiddle.net/rzr4Z/)

我的 html 如下所示

```
<ul id="nav">
    <li><a href="#first-page" id="first_id">First</a><img src="images/navbar-icons/first.png" />
    </li>
    <li><a href="#second-page" id="second_id">Second</a><img src="images/navbar-icons/second.png" />
    </li>
    <li><a href="#third-page" id="third_id">Third</a><img src="images/navbar-icons/third.png" /> <img
        src="images/navbar-icons/third.png" />
        <ul id="side-menu">
            <li><img src="images/navbar-icons/submenu-img.png" alt="sub menu image" />
            </li>
            <li>Sub-menu item 1</li>
            <li>Sub-menu item 2</li>
            <li>Sub-menu item 1</li>
        </ul></li>
    <li><a href="fourth-page" id="fourth_id">Fourth</a><img src="images/navbar-icons/fourth.png" />
    </li>
</ul> 
```

**CSS：**

```
ul#nav {
    list-style-type: none;
    margin: 10px 0;
    padding: 0;
    text-align: center;
}

ul#nav li {
    font-size: 250%;
    line-height: 25px;
    padding: 7px 0;
    margin: 0;
}

ul#nav li a {
    display: block;
}

ul#nav li a:link,ul#nav li a:visited {
    color: #333333;
    text-decoration: none;
}

ul#nav li a:hover,ul#nav li a:active {
    color: #a61607;
    text-decoration: none;
}

ul#nav li img {
    display: none;
}

ul#nav a:hover#first_id+img {
    display: block;
    position: relative;
    top: -25px;
}

ul#nav a:hover#second_id+img {
    display: block;
    position: relative;
    top: -25px;
}

ul#nav a:hover#third_id+img {
    display: block;
    position: relative;
    top: -25px;
}

ul#nav a:hover#fourth_id+img {
    display: block;
    position: relative;
    top: -25px;
}

ul#nav li ul#side-menu {
    display: none;
    position: absolute;
}

ul#nav li:hover ul#side-menu {
    font-size: 30%;
    list-style-type: none;
    line-height: 2px;
    color: #a61607;
    text-decoration: none;
    display: block;
    position: absolute;
    top: 310px;
    left: 250px;
}

ul#nav li:hover ul#side-menu li {
    float: none;
}

ul#nav li:hover ul#side-menu li img {
    position: absolute;
    top: 400px;
    left: 0px;
} 
```

而不是做类似的事情，

```
ul#nav a:hover+img {
    display: block;
    position: relative;
    top: -25px;
} 
```

我必须为 css 中的每个 li 元素使用不同的 ID，因为每个翻转图像都有不同的大小和宽度，以便我可以针对它们相应的翻转位置单独调整它们。为每个菜单项使用不同的 ID 是否是获得所需效果的正确方法？

然而，主要问题是当我悬停每个菜单项的图像时，我开始获得飘动的效果，而这种飘动的悬停效果在眼睛看来并不容易。将鼠标悬停在菜单项上时，子菜单的图像（子菜单项会出现，但 img 不会出现）也不会出现`#third-page`。

关于如何解决这种抖动并获得此菜单的正确效果的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:10:10.147

解决问题的诀窍有两点：

1）使`LI`项目固定宽度 2）使“悬停”效果发生在 上`LI`，而不是`A`

您遇到“闪烁”的原因正是上面所描述的。当您将`:hover`效果应用于`A`标签并且标签的大小不固定时，您会在鼠标导致的某些位置结束，将`:hover`导致`:hover`它的对象从鼠标下方移出 - 这会导致效果最后，将对象放回鼠标下方 - 这会再次导致它。无尽的因果，让你闪烁。

通过将`:hover`效果放在`LI`相反的位置上，`:hover`无论鼠标是否在`A`OR上，都会引起 升高`IMG`- 所以当`IMG`标签弹出可见并且所有内容都改变大小时，您的鼠标仍然悬停在`LI`包含这两个元素的 - 和瞧 - 不闪烁。

但是，由于图像的大小，您的方法**会**导致另一个问题。因为您的图像由于它们的高度（大图像）而向下分流 - 当您到达图像的底部并翻转下一个`LI`时 - 一切都会从您的鼠标下方移出并导致类似的问题。然而，这通常不会导致闪烁本身。

[请参阅您的 jsFiddle](http://jsfiddle.net/rzr4Z/4/ "更新到您的 jsFiddle")的以下更新。

正如您将看到的，“高度”问题发生在“第三”条目上。这也可以通过显式设置高度/宽度和使用精确大小的图像来解决 - 或者（更有效地）通过使用`background: url(...);`CSS 规则而不是`IMG`标签 - 因为它们更容易剪辑/调整大小。

如果您需要其他一些带有子菜单的基于 CSS 的翻转菜单的示例，请查看[这个 jsFiddle](http://jsfiddle.net/TroyAlford/25J4e/ "纯 CSS 菜单示例")，它演示了一种更模块化的下拉菜单等方法。可以使用背景图形轻松修改它以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T18:50:58.133

在您的情况下，使用不同的 ID 是可以的。至于颤振问题，我可以通过更改这部分 CSS 来消除它：

```
ul#nav a:hover#first_id+img {
    display: block;
    position: relative;
    top: -25px;
}

ul#nav a:hover#second_id+img {
    display: block;
    position: relative;
    top: -25px;
}

ul#nav a:hover#third_id+img {
    display: block;
    position: relative;
    top: -25px;
}

ul#nav a:hover#fourth_id+img {
    display: block;
    position: relative;
    top: -25px;
} 
```

对此：

```
ul#nav li:hover #first_id+img {
    display: block;
}

ul#nav li:hover #second_id+img {
    display: block;
}

ul#nav li:hover #third_id+img {
    display: block;
}

ul#nav li:hover #fourth_id+img {
    display: block;
} 
```

发生的事情是，当您将鼠标悬停在第三个链接上时，图像的大小会推动链接，使其位于 li 的中心。如果图像出现后您的鼠标碰巧悬停在链接的左侧或右侧，那么您不再将鼠标悬停在链接上，因此它会消失，然后立即重新出现，因为现在您再次将鼠标悬停在链接上.. 。 ETC。

检测 :hover 在 li 本身上可以解决此问题，以便在您将鼠标悬停在 li 本身上时显示图像，无论您是悬停在链接、图像还是它们周围的任何空间上。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:36:08.797

当我们不指定以下 css 属性时，会发生此问题：

1.  最小宽度、最大宽度和
2.  最小高度，最大高度

仔细使用以下 css 属性会有所帮助：

```
#parent_id:hover
{
  //use borders to find space required for correct width/height
}

#parent_id>#child_id:hover
{
  //use borders to find space required for correct width/height
}

#parent_id:hover, #child_id:hover
{
  //use borders to find space required for correct width/height
} 
```

因此，请确保添加这些。

**永远记住这一点：**

永远不要做没有边框的 css，始终确保为几乎所有节点添加边框，这有助于清楚地了解占用了多少空间，并且更容易像这样在 css 中锻炼错误

```
ul#nav {
list-style-type: none;
margin: 0;
padding: 0;
text-align: center;
position:absolute;
height:300px;
width:200px;
max-height:300px;
max-width:200px;
border:5px solid red;
overflow:hidden;
}

ul#nav li {
border:1px solid green;
font-size: 250%;
line-height: 25px;
max-height:200px;
padding: 7px 0;
margin-top: 10px;
max-height:50px;
}
ul#nav li a {
border:1px solid black;
}
ul#nav li a:link,ul#nav li a:visited {
color: #333333;
text-decoration: none;
}

ul#nav li a:hover,ul#nav li a:active {
max-height:50px;
color: #a61607;
text-decoration: none;
}

ul#nav li img {
display: none;
}

ul#nav a:hover#first_id+img {
display: block;
}

ul#nav a:hover#second_id+img {
display: block;
}

ul#nav a:hover#third_id+img {
display: block;
}

ul#nav a:hover#fourth_id+img {
display: block;
}

ul#nav li ul#side-menu {
display: none;
}

ul#nav li:hover ul#side-menu {
font-size: 30%;
list-style-type: none;
line-height: 2px;
color: #a61607;
text-decoration: none;
display: block;
position: absolute;
top: 310px;
left: 250px;
}

ul#nav li:hover ul#side-menu li {
float: none;
}

ul#nav li:hover ul#side-menu li img {
position: absolute;
width:48px;
height:48px;
top: 400px;
left: 0px;
}​ 
```

**现在不飘了**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:11:42.330

You can either do:

```
ul#nav li a{display: block;} 
```

or

```
ul#nav li{text-align: left;} 
```

so `mouseleave` doesn't fire on `mouseenter`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T18:22:23.647

你的代码：

```
ul#nav {
    list-style-type: none;
    margin: 0;
    padding: 0;
    text-align: center;
    position:absolute;
    max-height:300px;
    max-width:200px;
    border:5px solid red;
    overflow:hidden;
} 
```

我的代码：

```
ul#nav {
list-style-type: none;
margin: 0;
padding: 0;
text-align: center;
position:absolute;
height:300px;
width:200px;
max-height:300px;
max-width:200px;
border:5px solid red;
overflow:hidden;
} 
```

**仔细看我上一个答案，你错过了一些重要的属性，比如 height:300px; 和宽度：200px；**

* * *

**简单地指定以 max,min 为前缀的属性是不够的，您应该添加特定的高度和宽度设置，然后颤动就会消失。**

# extjs - 如何使用 Extjs4.1 从服务器端查询数据

> ID：11808798
> 
> 赞同：0
> 
> 时间：2012-08-04T12:47:00.157
> 
> 标签：extjs, extjs4, server-side, extjs4.1

刚开始学习Extjs，想实现一个服务端查询。我在我的Extjs MVC的Contriller中写了一些这样的代码：</p>

```
'SearchPanel button[action=select]': {
                'click' : function() {
                    //console.log(Ext.getDom('s_name').value );
                    console.log(Ext.getCmp('s_studentid').getValue());
                    var grid = Ext.ComponentQuery.query('studentList')[0];
                    var store  = grid.store;

                    store.filterBy(function(record) {
                        //return record.get('name') == '张新武' && record.get('id') == 8;
                        var s_studentid = Ext.getCmp('s_studentid').getValue();
                        var s_name = Ext.getCmp('s_name').getValue();
                        var s_unikey = Ext.getCmp('s_unikey').getValue();
                        var s_type = Ext.getCmp('s_type').getValue();
                        var s_sex = Ext.getCmp('s_sex').getValue();
                        var s_college = Ext.getCmp('s_college').getValue();
                        var s_major = Ext.getCmp('s_major').getValue();
                        var s_ethnic = Ext.getCmp('s_ethnic').getValue();
                        return (s_studentid == "" || record.get('id') == s_studentid)
                            &&(s_name == "" || record.get('name').indexOf(s_name)>=0)
                            &&(s_unikey == "" || record.get('name') == s_unikey)
                            &&(s_type == "" || record.get('type') == s_type)
                            &&(s_sex == "" || record.get('sex') == s_sex)
                            &&(s_college == "" || record.get('college') == s_college)
                            &&(s_major == "" || record.get('major') == s_major)
                            &&(s_ethnic == "" || record.get('ethnic') == s_ethnic);
                        console.log('invoke select');
                    });
                }  
            } 
```

但我发现它从 Extjs 存储中查询数据，而不是从服务器端查询数据。如何更改我的代码以使其可以从服务器端查询数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:53:23.950

You need to reload with a new paramset in order to realize server-side filtering

```
store.load({params: /* all this stuff */}) 
```

or similar..

# java - 更改 index.html 拒绝在 Web 应用程序的实际运行中发生

> ID：11808800
> 
> 赞同：0
> 
> 时间：2012-08-04T12:47:22.170
> 
> 标签：java, html, jsp, web-applications, servlets

当我尝试编辑我的`index.html`文件时，发生了一些非常奇怪的事情。

我正在使用Java 中的`jsp`-s 和`servlets`, 。

当我尝试更新其中一个字段时，例如：

```
<!DOCTYPE html>
<html>
<head><title>Bank application</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>
<table class="title">
  <tr><th>Bank application</th></tr>
</table>

<br/>
<fieldset>
  <legend>Bank Account Balance</legend>
  <form action="show-balance">
    Customer ID (id001, idffffffffffffffffdsafds002, id003):
    <input type="text" name="cusdddddddddddddddddddddddddddtomerId"/><br/>
    <input type="submit" value="Sddddddddddddddddddddddddddddddddddddddhow Balance"/>
  </form>
</fieldset>

<br/>

// from here, the rest is the same as the above 
```

我明白了（和以前一样）：

![在此处输入图像描述](../Images/1b68e112daf73df30313cd57783bbb89.png)

为什么更改 index.html 文件时，没有发生任何更改？

我正在使用 ：

1.  阿帕奇 7
2.  Xampp

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:56:05.243

浏览器将缓存 HTML 文件，除非您明确告诉浏览器刷新 (ctrl + F5)。我猜你只是在加载 HTML 的缓存版本。

# primefaces - 如何避免在picklist primefaces中拖放？

> ID：11808803
> 
> 赞同：0
> 
> 时间：2012-08-04T12:48:08.660
> 
> 标签：primefaces

我在使用选项列表时遇到问题。我不知道如何避免在选项列表中拖放。我正在使用 primefaces 3.2 有人请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:17:18.013

它在[这里](http://forum.primefaces.org/viewtopic.php?f=3&t=23872)得到了回答。

简而言之，PrimeFaces 没有为您提供禁用拖放（从 3.3 版开始）的选项`p:pickList`。

由于问题在于人们可以将项目拖动到屏幕上的任何位置，因此针对 3.4 版[创建了一个新问题。](http://code.google.com/p/primefaces/issues/detail?id=4469)此增强功能将防止将项目拖出`p:pickList`容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T13:11:24.940

您可以扩展 init 方法并禁用 jQuery 可排序：

```
/* Deactivate drag and drop */
if (PrimeFaces.widget.PickList) {
    PrimeFaces.widget.PickList = PrimeFaces.widget.PickList.extend({
        init : function(cfg) {
            this._super(cfg);
            $(this.jqId + " ul").sortable("disable");
        }
    });
} 
```

# javascript - 在 (0 - X) 范围内生成唯一编号，保留历史记录以防止重复

> ID：11808804
> 
> 赞同：5
> 
> 时间：2012-08-04T12:48:21.593
> 
> 标签：javascript, jquery, arrays, random

我遇到了一个挑战，我需要一个函数来返回给定范围内的随机数`0 - X`。不仅如此，我还要求返回的数字是**唯一的**；不重复先前调用该函数时已经返回的数字。

可选地，完成此操作后（例如，范围已“用尽”），只需返回该范围内的随机数。

怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T14:24:35.733

这应该这样做：

```
function makeRandomRange(x) {
    var used = new Array(x),
        exhausted = false;
    return function getRandom() {
        var random = Math.floor(Math.random() * x);
        if (exhausted) {
            return random;
        } else {
            for (var i=0; i<x; i++) {
                random = (random + 1) % x;
                if (random in used)
                    continue;
                used[random] = true;
                return random;
            }
            // no free place found
            exhausted = true;
            used = null; // free memory
            return random;
        }
    };
} 
```

用法：

```
var generate = makeRandomRange(20);

var x1 = generate(),
    x2 = generate(),
    ... 
```

* * *

虽然它可以工作，但在生成第 x 个随机数时它没有很好的性能 - 它在整个列表中搜索一个空闲位置。[这个算法](https://stackoverflow.com/a/196065/1048572)，一步一步的[Fisher-Yates 洗牌](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)，来自问题[Unique (non-repeating) random numbers in O(1)?](https://stackoverflow.com/q/196017/1048572) , 会表现更好：

```
function makeRandomRange(x) {
    var range = new Array(x),
        pointer = x;
    return function getRandom() {
        pointer = (pointer-1+x) % x;
        var random = Math.floor(Math.random() * pointer);
        var num = (random in range) ? range[random] : random;
        range[random] = (pointer in range) ? range[pointer] : pointer;
        return range[pointer] = num;
    };
} 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/cyDEa/)）

仅生成一个“组”唯一编号的扩展版本：

```
function makeRandomRange(x) {
    var range = new Array(x),
        pointer = x;
    return function getRandom() {
        if (range) {
            pointer--;
            var random = Math.floor(Math.random() * pointer);
            var num = (random in range) ? range[random] : random;
            range[random] = (pointer in range) ? range[pointer] : pointer;
            range[pointer] = num;
            if (pointer <= 0) { // first x numbers had been unique
                range = null; // free memory;
            }
            return num;
        } else {
            return Math.floor(Math.random() * x);
        }
    };
} 
```

（[演示](http://jsfiddle.net/cyDEa/1/)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T22:16:34.553

你得到了一些很棒的编程答案。这是一个更有理论色彩的全景图：-)

您的问题被称为“抽样”或“子集抽样”，您可以通过多种方式做到这一点。让`N`您作为抽样框架的范围（即`N=X+1`），并`M`作为样本的大小（您要选择的元素数量）。

*   如果`N`比 大得多`M`，您将需要使用一种算法，例如 Bentley 和 Floyd 在他的专栏“ [Programming Pearls: a sample of brilliance ”中建议的算法（](http://dl.acm.org/citation.cfm?id=315746)[此处](http://wikisend.com/download/954842/BeFl87.pdf)暂时没有 ACM 的锁屏），我真的推荐这个为他们明确给出代码并根据哈希表等进行讨论；里面有一些巧妙的技巧

*   如果`N`与 处于同一范围内`M`，则您可能希望使用[Fisher-Yates 洗牌](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)`M`，但仅在步骤后停止（而不是`N`）

*   如果您真的不知道，那么[Devroye 关于随机生成的书第 647 页上的算法非常快](http://luc.devroye.org/chapter_thirteen.pdf)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T12:48:21.593

我写了这个函数。它保留自己的数组和生成数字的历史记录，防止初始重复，如果范围内的所有数字都已输出一次，则继续输出随机数：

```
// Generates a unique number from a range
// keeps track of generated numbers in a history array
// if all numbers in the range have been returned once, keep outputting random numbers within the range
var UniqueRandom = { NumHistory: new Array(), generate: function(maxNum) {
        var current = Math.round(Math.random()*(maxNum-1));
        if (maxNum > 1 && this.NumHistory.length > 0) {
            if (this.NumHistory.length != maxNum) {
                while($.inArray(current, this.NumHistory) != -1) { current = Math.round(Math.random()*(maxNum-1)); }
                this.NumHistory.push(current);
                return current;
            } else {
                //unique numbers done, continue outputting random numbers, or we could reset the history array (NumHistory = [];)
                return current;
            }
        } else {
            //first time only
            this.NumHistory.push(current);
            return current;
        }
    }
}; 
```

[这是一个工作小提琴](http://jsfiddle.net/c_kick/YnRs7/)

我希望这对某人有用！

[编辑：正如下面Pointy](https://stackoverflow.com/users/182668/pointy)所指出的，它可能会在大范围内变慢（这是一个 [小提琴，从 0-1000 的范围内](http://jsfiddle.net/c_kick/sDe4p/)，这似乎运行良好）。然而; 我不需要很大的范围，所以如果您希望生成并跟踪一个巨大的范围，那么这个函数可能确实不适合。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-04T15:23:33.160

您可以尝试使用当前日期和时间值生成数字，这将使其独一无二。要使其在范围内，您可能必须使用一些数学函数。

# jquery - JQM：居中/对齐图标

> ID：11808806
> 
> 赞同：0
> 
> 时间：2012-08-04T12:48:30.620
> 
> 标签：jquery, button, icons, size, location

我需要一个 200px x 200px 的按钮大小，中间的图标（水平和垂直）。我可以创建 200px x 200px 大小并使用我的个人图标。

![在此处输入图像描述](../Images/3b65f9c98084fb3fcf37d1d54258ba79.png)

我的问题是：！

*   如何在按钮中水平和垂直居中图标？

如果有人可以帮助我，我将不胜感激。

干杯，

蒂莫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:02:39.930

```
<head>
<style type="text/css">
<!--
a{
    line-height: 600px; 
   }
-->   
        </style>
   </head>
  <body>
<a data-corners="false" href="index.html" data-role="button" data-icon="customized"
          data-iconpos="top" id="start-button"
          data-theme="a">LIVINGROOM</a>

</body>
</html> 
```

问题仍然存在，如何将图标水平和垂直居中。或者根本如何定位图标....

# python - 在烧瓶中，我应该手动捕获视图中所有可能的错误吗？

> ID：11808809
> 
> 赞同：4
> 
> 时间：2012-08-04T12:49:01.287
> 
> 标签：python, flask

我是 Flask 的新手，在编写视图时，如果应该捕获所有错误，我会徘徊。如果我这样做，大多数视图代码都应该用 try... 包装。我认为这不是优雅的。

例如。

```
@app.route('/')
def index():
    try:
        API.do()
    except:
        abort(503) 
```

我应该这样编码吗？如果没有，服务会崩溃（uwsgi+lnmp）吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T13:07:37.423

你只抓住你能处理的东西。“处理”一词的意思是“做一些有用的事情”，而不仅仅是“打印一条消息然后死去”。print-and-die 已经由异常机制处理，并且可能比您做得更好。

例如，这不能有效地处理异常：

```
denominator = 0
try:
    y = x / denominator
except ZeroDivisionError:
    abort(503) 
```

您无能为力，而且这`abort`是多余的，因为这就是未捕获的异常无论如何都会导致发生的原因。这是一个有用的处理示例：

```
try:
    config_file = open('private_config')
except IOError:
    config_file = open('default_config_that_should_always_be_there') 
```

但请注意，如果第二次打开失败，则没有任何用处，因此它将沿调用堆栈向上移动并可能停止程序。你永远不应该做的是有一个裸露的`except:`，因为它隐藏了关于哪里出错的信息。当您收到“一切都是 503”的缺陷报告并且您不知道`API.do()`.

无法进行任何有用处理的 Try / except 块会使代码变得混乱，并在视觉上掩盖了主要的执行流程。如果只是为了自己生成错误返回，无例外的语言会强制您检查每次调用是否有错误返回。存在异常的部分原因是为了消除代码噪音。

# java - 如何在 Java 中获取 mp4 电影的单个图像

> ID：11808815
> 
> 赞同：8
> 
> 时间：2012-08-04T12:50:18.783
> 
> 标签：java, decode, mp4

我想对以 .mp4 格式存储的视频进行一些图像分析。因此，我需要一种方法来用 Java 获取这部电影的图像。我搜索了很多，发现了一些库，比如 jcodec 和 jaad。但我无法让这些库运行起来。正如我发现的那样，有一些例子（至少我没有找到）展示了我的用例。

你能帮助我吗？您是否知道任何可以满足我需要并且至少在 Win7 64 位上运行的库。或者你知道如何用 jcodec 来完成这个吗？

编辑：

正如我所写的，我用 jcodec 进行了尝试。我发现了如何获取帧的数据，但不知道如何将其转换为 BufferedImage 之类的东西。我希望这些数据不是简单的 RGB 格式，而是任何压缩格式。（我说得对吗？）我不知道要解码这些数据。

您可以使用 jcodec 获取帧的数据，如下所示（至少据我所知）：

```
public static void main(String[] args) throws IOException, MP4DemuxerException {
    String path = "videos/video-2011-09-21-20-07-21.mp4";

    MP4Demuxer demuxer1 = new MP4Demuxer(new FileInput(new File(path)));
    DemuxerTrack videoTrack = demuxer1.getVideoTrack();

    Packet firstFrame = videoTrack.getFrames(1);
    byte[] data = firstFrame.getData();
} 
```

我还发现了以下内容： [http](http://code.google.com/p/jcodec/source/browse/trunk/src/test/java/org/jcodec/containers/mp4/DitherTest.java?r=70) ://code.google.com/p/jcodec/source/browse/trunk/src/test/java/org/jcodec/containers/mp4/DitherTest.java?r=70 但这是使用可下载的 jar 包无法正常工作（存在编译错误）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-27T06:49:40.233

您可以在 followinf 程序中使用 jcodec（[https://github.com/jcodec/jcodec](https://github.com/jcodec/jcodec)），我正在从视频中提取帧。

```
/*
 * To extract frames from a mp4(avc) video
 * 
 */
package avc_frame;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import org.jcodec.api.FrameGrab;
import org.jcodec.api.JCodecException;

public class Avc_frame {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws IOException, JCodecException {

        long time = System.currentTimeMillis();
        for (int i = 50; i < 57; i++) { 
            BufferedImage frame = FrameGrab.getFrame(new File("/Users/jovi/Movies/test.mp4"), i);
            ImageIO.write(frame, "bmp", new File("/Users/jovi/Desktop/frames/frame_"+i+".bmp"));
        }
        System.out.println("Time Used:" + (System.currentTimeMillis() - time)+" Milliseconds");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-20T04:06:03.843

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import org.bytedeco.javacpp.opencv_core.IplImage;
import org.bytedeco.javacv.FFmpegFrameGrabber;
import org.bytedeco.javacv.FrameGrabber.Exception;

public class Read{
    public static void main(String []args) throws IOException, Exception
    {
        FFmpegFrameGrabber frameGrabber = new FFmpegFrameGrabber("C:/Users/Digilog/Downloads/Test.mp4");
        frameGrabber.start();
        IplImage i;
        try {

            i = frameGrabber.grab();
            BufferedImage  bi = i.getBufferedImage();
            ImageIO.write(bi,"png", new File("D:/Img.png"));
            frameGrabber.stop();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

# ios - 如何在 iOS 中提醒用户有关 ram 硬盘驱动器或电池的信息

> ID：11808816
> 
> 赞同：2
> 
> 时间：2012-08-04T12:50:36.957
> 
> 标签：ios, push-notification

我能够获取内存、硬盘和电池信息，并想在空闲硬盘、内存或电池（假设）低于 20% 时通知用户，即使我的应用程序没有运行。这可能吗？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:33:33.220

不，你不能。您*也许*可以强行插入重要的位置更改 API，它会在设备更改蜂窝塔时提供通知，但这仅在用户定期移动时才有效（Apple 很可能会拒绝您的应用，因为您正在实际上对用户的位置不感兴趣）。

可能有一些应用程序会监控网络*帐户*并在达到某些阈值时发送推送通知消息，但所有轮询和逻辑都将在集中式服务器（例如在您的 ISP 处）上发生，而不是在设备上发生。*这样的应用程序在运行时很*可能会提供额外的信息——我认为，这样做可能会以一种在用户看来好像应用程序在后台运行的方式来执行，而实际上它不是不。

（如果您只希望自己使用它——即您是在自己的设备上运行自己的代码的开发人员，并且不需要遵守 App Store 指南——那么您也可以使用 VoIP 后台任务类型. 这将为您提供所需的心跳式轮询，但您**不会**使用 VoIP 后台任务类型进入 App Store 来处理非 VoIP 的事情——只需询问制作 Sparrow 的人即可。）

# jquery - 如果另一个 div 被隐藏，则显示另一个 div

> ID：11808817
> 
> 赞同：0
> 
> 时间：2012-08-04T12:50:41.513
> 
> 标签：jquery, innerhtml

我有一个 div 来显示页面上最近查看的项目，如果使用 innerHTML 为空，我将隐藏它，因此外部空框不会显示并且它工作正常。问题是它会在页面上留下一个很大的洞，直到一个项目被查看。

我一直在尝试做的是显示另一个 div，如果 div id="recentinc" 被隐藏，那么一旦 div id="recentinc" 有内容，它就会被隐藏。

到目前为止，这是我的代码：

```
<div id="recentinc"><?php include 'recentview.php'; ?></div>
<script type="text/javascript">
if (document.getElementById('recentinc').innerHTML == '')
    document.getElementById('recently_viewed').style.display = 'none';
</script>
</div> 
```

我想要另一个 div 例如。

```
<div id="copy">more content</div> 
```

当 div id="recentinc" 被隐藏时，它将显示。

使用 jQuery 可能有更好的方法，但我找不到答案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:58:38.020

不确定大洞是什么，因为将显示设置为“无”将从流中删除元素。尝试设置可见性而不是仅仅隐藏它`display:none`，这样它将是不可见的，但仍然占据相同的空间并且仍然在文档流中：

```
if (document.getElementById('recentinc').innerHTML == '')
    document.getElementById('recently_viewed').style.visibility = "hidden"; 
```

或 jQuery：

```
$("#recently_viewed").css('visibility', $("#recentinc").is(":visible")?'hidden':'visible'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:00:36.710

试试这个：

```
<div id="recentinc"><?php include 'recentview.php'; ?></div>
<script type="text/javascript">
if ($('#recentinc').html().length<1)
{
  $('#recently_viewed').hide();
}
</script>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T13:41:25.200

据我了解，您想`#copy`根据 的空性来显示/隐藏`#recentinc`，而对`#recently_viewed`.

```
var showRecent = $("#recentinc").children().length > 0;
$("#recently_viewed").toggle(showRecent);
$("#copy").toggle(!showRecent); 
```

# sencha-touch-2 - Sencha 2 在发送请求时发送不使用相同的会话

> ID：11808818
> 
> 赞同：1
> 
> 时间：2012-08-04T12:50:46.963
> 
> 标签：sencha-touch-2

请参阅附件，我使用 Spring Security 将用户登录到服务器，登录后我执行 GET 以获取成人对象。但是 Sencha 2 没有使用相同的会话，您可以在服务器日志中看到创建了另一个会话。Sencha 2 似乎没有保留 cookie（当我在 Chrome 调试器中查看 cookie 时）![在此处输入图像描述](../Images/80a85d15c6151027ae017ede99b2f6b8.png)。

为什么 Sencha 不坚持使用服务器发送的 cookie？

![在此处输入图像描述](../Images/241a15a0d197489f2c7645c158c2f360.png)

# c - 如何使用 gtk 信号将多个变量作为数据传递

> ID：11808819
> 
> 赞同：11
> 
> 时间：2012-08-04T12:50:52.823
> 
> 标签：c, gtk

我有一个小程序，其中 gtk 信号回调函数需要 2 或 3 个变量。

我不想制作这些全局变量（项目的整个目标是整洁），我不想制作一个完整的结构，以便我可以将一个小部件和一个编译的正则表达式发送到一个函数。

据我所见`g_signal_connect`，仅允许单个数据变量。

这样做的最有效方法可能是指向所讨论的两个对象的 void 指针数组吗？像这样的东西？

```
void * data[2];
data[0] = widget;
data[1] = compiledregex;
g_signal_connect(save,"clicked",G_CALLBACK(callbackfunction),data); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T13:11:01.137

当然你可以使用 void 指针数组，但是如果你想传递不同类型的值（尤其是类型长于 的值`sizeof(void *)`），你就不能使用数组。对于这些，您几乎肯定希望将它们包装在一个结构中并将结构的地址作为数据参数传递。

例子：

```
struct my_struct *data = malloc(sizeof(*data));
data->field_one = value_one;
data->field_two = value_two; /* etc. */

g_signal_connect(save, "clicked", callback, data); 
```

当然，不要忘记`free(data)`在回调函数中（假设它是单次使用的）。

编辑：因为您想要一个带有 void ** 的示例，所以在这里（这很难看，我不建议您使用它——因为为原始类型分配单元素数组会浪费您的拍摄，或者因为投射指向 void * 的非指针是不好的做法...）：

```
void **data = malloc(sizeof(data[0]) * n_elements);

type1 *element1_ptr = malloc(sizeof(first_item));
*element1_ptr = first_item;
data[0] = element1_ptr;

/* etc. */ 
```

释放他们：

```
int i;
for (i = 0; i < n_elements; i++)
    free(data[i]);

free(data); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T01:59:01.263

您可以使用 g_object_set_data() 和 g_object_get_data()。首先，设置数据：

```
g_object_set_data(G_OBJECT(my_edit), "my_label", my_label);
g_object_set_data(G_OBJECT(my_edit), "age", GINT_TO_POINTER(age)); 
```

在回调中，您可以像这样获取数据：

```
gint age = GPOINTER_TO_INT(g_object_get_data(G_OBJECT(widget), "age"));
GtkWidget *my_label = g_object_get_data(G_OBJECT(widget), "my_label"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T21:26:02.377

扩展 H2CO3 的答案，您还可以将数据（顺便说一下，我强烈建议使用结构）设置为在信号处理程序断开连接时自动释放：

```
g_signal_connect_data(save, "clicked", callback, data, (GClosureNotify)free, 0); 
```

# spring - 获取静态资源spring mvc

> ID：11808820
> 
> 赞同：1
> 
> 时间：2012-08-04T12:50:59.033
> 
> 标签：spring, spring-mvc

我知道网络上有很多这样的问题（尤其是这里），但没有什么能真正帮助我。我正在使用 spring mvc（spring 版本 3.1.0.RELEASE），我想通过 URL 访问我的静态数据。
我的包：
-src --main
---
resources
----public
inside public 我有一个例如 test.xml 文件。
这是我的 web.xml

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/ApplicationContext.xml</param-value>
    </context-param>
<servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/ServletContext.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

这是我的 ServletContext.xml

```
<!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/public/**" location="/resources/public/" /> 
```

现在，当我输入此 URL“localhost:8080/bmark-central/resources/public/test.xml”时，我得到一个 404。我在没有上下文根“localhost:8080/resources/public/test.xml”的情况下尝试了它，而且没有得到我的 test.xml（也得到了 404）。我映射有什么问题吗？我在这里错过了什么吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:09:14.770

问题可能是静态资源应该与您的 web 内容相关 - 因此它们应该位于此文件夹中以便可访问 -`src/main/webapp/resources/public`而不是`src/main/resources`.

# google-apps-script - body css 规则和 google-caja

> ID：11808822
> 
> 赞同：1
> 
> 时间：2012-08-04T12:51:50.567
> 
> 标签：google-apps-script, google-caja

如果我没记错的话，google-caja 会删除 body css 规则。由于 HtmlService 使用 caja 清理所有 html css 和 javascript，因此我们无法设置 body 元素的样式。

这个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:21:39.773

[这里有一个使用 jQuery](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1534#c4)的解决方法；希望它可能适合您的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T13:06:50.630

这是一个已知的 Caja 错误（我手边没有错误 ID，但它应该在 Caja 问题跟踪器上），并且我认为将在一个版本中修复。同时，在整个页面周围添加一个`<div>`并设置样式。

# delphi - Val 不适用于 UInt64？

> ID：11808825
> 
> 赞同：4
> 
> 时间：2012-08-04T12:52:25.777
> 
> 标签：delphi, delphi-xe2

只是好奇为什么以下代码无法将 uint64 值转换为字符串表示形式？

```
var
  num: UInt64;
  s: string;
  err: Integer;

begin
  s := '18446744073709551615';  // High(UInt64)
  Val(s, num, err);
  if err <> 0 then
    raise Exception.Create('Failed to convert UInt64 at ' + IntToStr(err));  // returns 20
end. 
```

德尔福 XE2

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T20:10:38.800

你是对的：`Val()`不兼容`UInt64 / QWord`。

有两个重载函数：

*   一个返回浮点值；
*   一个返回一个`Int64`（即有符号值）。

您可以改用此代码：

```
function StrToUInt64(const S: String): UInt64;
var c: cardinal;
    P: PChar;
begin
  P := Pointer(S);
  if P=nil then begin
    result := 0;
    exit;
  end;
  if ord(P^) in [1..32] then repeat inc(P) until not(ord(P^) in [1..32]);
  c := ord(P^)-48;
  if c>9 then
    result := 0 else begin
    result := c;
    inc(P);
    repeat
      c := ord(P^)-48;
      if c>9 then
        break else
        result := result*10+c;
      inc(P);
    until false;
  end;
end; 
```

它适用于 Unicode 和非 Unicode 版本的 Delphi。

出错时返回 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T12:59:04.853

根据[文件](http://docwiki.embarcadero.com/Libraries/en/System.Val)，

> S 是字符串类型的表达式；它必须是形成有符号实数的字符序列。

我同意文档有点含糊；确实，*形式*究竟是什么意思，*有符号实数*究竟是什么意思（尤其`num`是整数类型时）？

不过，我认为要突出显示的部分是已*签名*的。在这种情况下，您需要一个整数，因此`S`必须是*形成有符号整数的字符序列*。但是你的最大值是`High(Int64) = 9223372036854775807`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T13:31:32.947

确实缺乏这方面的文档，但我使用`StrToUInt64`and `UIntToStr`from `System.SysUtils`，它们在字符串和无符号 64 位整数之间进行转换。

我不确定这些是什么时候添加到 Delphi 中的，但它们肯定是在最近的几个版本中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T10:32:36.507

```
function TryStrToInt64(const S: string; out Value: Int64): Boolean;
var
  E: Integer;
begin
  Val(S, Value, E);
  Result := E = 0;
end; 
```

# jquery - JavaScript 动态改变行颜色

> ID：11808826
> 
> 赞同：0
> 
> 时间：2012-08-04T12:52:27.803
> 
> 标签：jquery

我已经回答了我的问题的所有答案，但对我来说，anuthing 似乎不起作用。我想闪烁我的表格行颜色

这是代码：目前它只显示紫色，没有闪烁

```
$(document).ready(function() {
    openticketPageLoad();
    setInterval(findYellow, 1000);

    function findYellow() {
        $('#divOutputWindow').find('tr').each(function() {
            var $this = $(this);
            if ($this.css("background-color") == "purple") {
                $this.css("background-color", "white")
            } else {
                $this.css("background-color", "purple")
            }
        })
    }
}); 
```

HTML是使用jQuery（CSS）+Ajax+CS文件后面的一些代码生成的这是我从“检查元素”中获得的代码

```
<tr class="ui-state-default2 ui-pgrid-table-row-visible" style="background-color: purple; "><td class="ui-pgrid-table-expander"></td>
            <td class="ui-pgrid-table-cell-sorted"><input name="ctl391" type="checkbox" id="chkTicket_189293" class=" chkTicket" value="189293"></td><td>189293</td><td><input name="ctl392" type="text" id="txtVendorTicket_189293" class=" vendorTicket" onblur="" value=""></td><td>SWCW35216</td><td>FLM</td><td>SDB CISCO</td><td>Open</td><td>CASH HANDLER FATAL ERROR,CASSETTE FAULTED</td><td>04-08-2012 13:36:31</td><td>04-08-2012 14:05:00</td><td>4.52</td><td>System</td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:58:40.753

background-color 几乎肯定不会返回值“紫色”，它将返回 rgb 或 hex 值（我相信这取决于浏览器）。因此，您需要针对与“紫色”相关的等效 rgb 或十六进制值进行测试。

因此，您的代码将始终转到 if/else 语句的 else 部分。因此总是产生紫色背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:02:49.313

这是因为 $this.css("background-color") 不是字符串，而是 rgb 或 rgba 颜色规范。

改用类：

```
.purple {
  background-color: purple;
}
.white {
  background-color: white;
} 
```

和

```
 $(document).ready(function() {
        openticketPageLoad();
        setInterval(findYellow, 1000);
        function findYellow() {
            $('#divOutputWindow').find('tr').each(function() {
            var $this = $(this);
            $this.toggleClass('purple');
            $this.toggleClass('white', !$this.hasClass('purple'); // toggle to white if it's not purple
            })
        }
    }); 
```

看看它在行动：http: [//jsfiddle.net/xWRZx/](http://jsfiddle.net/xWRZx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T13:10:45.737

`.css`getter 不检索属性，`.style`它检索`getComputedStyle`或`.currentStyle`（在 IE 中）。所以它与在元素上设置属性的`.css`设置器不对称。`.style`

因此，您永远无法可靠地获得这样的颜色，并且必须使用一些颜色规范化库，因为浏览器之间的值可能会有所不同。

但是，您的用例不需要这个，因为您可以简单地使用 css 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T04:37:13.530

我提出了一个更简单、更语义化的解决方案：

### HTML

```
<div id="divOutputWindow">
    <table>
        <tr>
            <td>foo</td>
            <td>bar</td>
        </tr>
        <tr>
            <td>hello</td>
            <td>world</td>
        </tr>
        <tr>
            <td>lazy</td>
            <td>fox</td>
        </tr>
    </table>
</div>​ 
```

### CSS

```
#divOutputWindow tr {
    background-color: white;
}

#divOutputWindow tr.highlighted {
    background-color: purple;
}
​ 
```

### JS

```
setInterval(findYellow, 1000);
function findYellow() {
    $('#divOutputWindow').find('tr').each(function() {
        $(this).toggleClass('highlighted');
    });
}​ 
```

### 现场演示

[http://jsfiddle.net/Y6NwR/](http://jsfiddle.net/Y6NwR/)

# java - JRE 1.7 - java 版本 - 返回：java/lang/NoClassDefFoundError: java/lang/Object

> ID：11808829
> 
> 赞同：140
> 
> 时间：2012-08-04T12:52:38.627
> 
> 标签：java

当运行任何 java 应用程序或只是“java”时，jvm 会失败：

> VM
> java/lang/NoClassDefFoundError: java/lang/Object初始化时出错

以下是*错误*答案列表：

1.  正确的 Java 主目录（包括 /bin 目录）位于全局 PATH 中

2.  JAVA_HOME 设置正确

3.  执行命令 java -fullversion 有效

    ```
    $ java -fullversion

    ./java full version "1.7.0_05-b05" 
    ```

4.  /usr/java 中的符号链接都指向正确的 java 安装

5.  创建系统时，我没有安装任何“默认”java

6.  `java -version`失败...与上述相同的错误

7.  从 java 安装的目录结构下发出命令也不起作用

8.  这是 64 位的 64 位 java

有任何想法吗？

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2013-01-23T12:51:17.840

This problem stems from an improper Java installation.

# Possibility 1

> **NOTE:** This scenario only applies to Java 8 and prior. Beginning with Java 9, the JRE is structured differently. rt.jar and friends no longer exist, and Pack200 is no longer used.

The Java standard library is contained in various JARs, such as `rt.jar`, `deploy.jar`, `jsse.jar`, etc. When the JRE is packaged, these critical JAR files are compressed with [Pack200](https://en.wikipedia.org/wiki/Pack200) and stored as `rt.pack`, `deploy.pack`, `jsse.pack`, etc. The Java installer is supposed to uncompress them. If you are experiencing this error, apparently that didn't happen.

You need to manually run [`unpack200`](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/unpack200.html) on all `.pack` files in the JRE's `lib/` and `lib/ext/` folders.

### Windows

To unpack one `.pack` file (for example `rt.pack`), run:

```
"%JAVA_HOME%\bin\unpack200" -r -v rt.pack rt.jar 
```

To recursively unpack all `.pack` files, from the JRE root run:

```
for /r %f in (*.pack) do "%JAVA_HOME%\bin\unpack200.exe" -r -q "%f" "%~pf%~nf.jar" 
```

### *nix

To unpack one `.pack` file (for example `rt.pack`), run:

```
/usr/bin/unpack200 -r -v rt.pack rt.jar 
```

To recursively unpack all `.pack` files, from the JRE root run:

```
find -iname "*.pack" -exec sh -c "/usr/bin/unpack200 -r -q {} \$(echo {} | sed 's/\(.*\.\)pack/\1jar/')" \; 
```

# Possibility 2

You misinstalled Java in some other way. Perhaps you installed without admin rights, or tried to simply extract files out of the installer. Try again with the installer and/or more privileges. Or, if you don't want to use the installer, use the `.tar.gz` Java package instead.

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-06-16T11:18:37.517

对于 *nix 操作系统上的 Java 8，请转到`<jdk root>/jre/lib`（对我来说，`/usr/java/jdk1.8.0_05/jre/lib`）。从此目录执行：

```
../../bin/unpack200 rt.pack rt.jar
../../bin/unpack200 jsse.pack jsse.rar
../../bin/unpack200 charsets.pack charsets.jar 
```

为了防止在您安装了另一个 JRE 时出现版本问题，请使用`unpack200`您正在修复的 JRE 随附的相同版本 - 也就是说，从命令行，使用`../../bin/unpack200`（对我来说，这扩展为`/usr/java/jdk1.8.0_05/bin/unpack200`），而不仅仅是`unpack200`.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-10T08:32:12.537

似乎对于 64 位架构，您必须同时安装 32 位版本和 64 位版本的 jre（架构独立文件如 rt.jar 仅在 32 位版本中分发）。

然后记住要注意在全局 PATH 环境变量中包含正确的 java 可执行文件。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-06-01T15:38:44.920

**不耐烦的人的**快速解决方案；）在****Windows**机器上，试试这个：转到`C:\Windows\System32`目录并删除`java.exe`（或将其重命名为类似的名称`java.exe.old`）。**

 **至少从 1.6 开始，`java.exe`Windows 目录中不应该有一个。如果有，那是某种东西的剩余物。

**多读一点：**

我真的很惊讶 2012 年的一个问题还没有得到批准的答案，而我实际上在 2015 年在我的 Win 7 32 位操作系统上遇到了同样的问题！

那么到底发生了什么？

基本上，一切正常，我下载了 H2 数据库，当我尝试启动时，`H2 Console (Command Line)`我得到了：

```
Error occurred during initialization of VM
java/lang/NoClassDefFoundError: java/lang/Object 
```

我发现了这个问题，并且能够确认相同的症状：

JAVA_HOME 设置正确：

```
echo %JAVA_HOME%
C:\Program Files\Java\jdk1.6.0_26 
```

`java -version`失败，虽然`java --fullversion`工作正常：

```
java -fullversion
java full version "1.6.0_45-b06" 
```

**解决方案：** 转到`C:\Windows\System32`目录并删除（我实际上重命名）`java.exe`文件！！！！

现在，我得到：

```
java -version
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) Client VM (build 20.1-b02, mixed mode, sharing) 
```

并且`H2 Console (Command Line)`工作正常！

学分转到本论坛的最后一篇文章： [https ://bukkit.org/threads/java-lang-noclassdeffounderror-java-lang-object.70450/](https://bukkit.org/threads/java-lang-noclassdeffounderror-java-lang-object.70450/)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-03-04T01:33:42.763

我今天下载了新的 JDK（1.8.0.73）启动`c:> java.exe`并得到了臭名昭著的：

> ```
> Error occurred during initialization of VM
> java/lang/NoClassDefFoundError: java/lang/Object 
> ```

我只是想在这里分享我的工作解决方案。

当我 cd'ied 进入该`jdk\bin`文件夹时，Java 会运行良好，所以我知道它是`PATH`. 我设置`PATH`在`\jdk\bin`CMD 来证明它并且它有效。

所以，我想，`PATH`必须有一个文件夹`java.exe`导致了冲突。事实证明，它`C:\>ProgramData\Oracle\Java\javapath`保存了可执行文件的**符号链接。**

`java.exe`是指着`jre\bin`。该文件已损坏，当我开始时`\jre\bin\java.exe`- 完全相同的错误。答对了。我重新安装了 JRE，问题就消失了。快乐的编码...

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-01-20T00:44:54.240

您很可能在安装中缺少一个名为 rt.jar 的文件，该文件包含 java.lang.Object 的类文件。检查您的安装文件等。

特别要注意，64 位安装程序会覆盖（或安装“旁边”）现有的 32 位安装。换句话说，要获得完全工作的 64 位安装，您必须首先运行 32 位安装，然后如果您有一台支持 64 位的机器，则安装 64 位...

相反，如果您只进行 64 位安装，您将在安装中丢失某些文件，并会出现上述错误。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-03-23T09:35:49.127

在 Windows 10 上，我在使用 JRE 1.8 (8u121) 时遇到了同样的问题。
打字

```
java -version 
```

cmd提示符返回

```
Error occurred during initialization of VM
java/lang/NoClassDefFoundError: java/lang/Object 
```

所有其他命令 , `echo %JAVA_HOME%`,`echo %JRE_HOME%`工作`echo %PATH%`正常`java -fullversion`。

转到系统管理面板上的环境变量，从 PATH 中删除链接`C:\ProgramData\Oracle\Java\javapath`，并确保在 PATH 中将链接设置为`C:\Program Files\Java Folder\bin`.

之后，检查是否`C:\Windows\System32`存在`java.exe`文件；如果为真，则删除该文件。

现在输入`java -version`它工作正常。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-10-06T10:52:36.937

当您通过`_uncompressing_`它而不是`_executing_`它安装 JDK 时会发生此问题。

**举例：**

```
unzip jdk-6u45-linux-x64.bin  (wrong)

sh ./jdk-6u45-linux-x64.bin   (right) 
```

在第一种情况下，运行时库（如 rt.jar）不会自动解压缩（因此，您可以找到 rt.pack 文件等而不是 .jar 文件）。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-01-25T22:03:43.577

我最近遇到了同样的问题。在我的情况下，我的 Windows 7 机器自动下载了 java 并添加`C:\ProgramData\Oracle\Java\javapath`到我的路径环境变量的开头，这弄乱了我的 java。一旦我从路径中摆脱了它，它就起作用了。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-08-21T21:06:49.100

不能只安装 64 位，必须先安装 32 位，然后再添加 64 位组件。

来自 java.com：

> 在允许 32 位 JVM 的 64 位系统上安装 JRE 需要两个步骤：首先安装 32 位 JRE，然后安装对 64 位操作的附加支持。文件名如下：

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-08-20T14:19:05.313

如果您在 java 二进制文件上执行“chmod u+rx”并运行它，它将解压缩 jar 文件，您可以执行 java -version 而不会出现运行时错误

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-01-27T05:33:16.937

如果您在没有先安装 32 位的情况下安装 64 位版本，尽管修复了所有其他问题，但仍会出现此错误。我有一台运行 Java 8u71 的全新 Dell i7 64 位 Windows 10 Pro 机器。在将我的 %path% 和 %classpath% 添加到环境变量并尝试其他几个修复后，卸载 64 位，安装 32 位然后重新安装 64 位修复它。

一些已被提及为可能原因的问题，例如未解包文件等，可能仍会导致问题，但如果您不这样做，其他修复程序也将不起作用。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-08-08T07:22:47.627

我遇到了类似的问题，发现程序数据（C:\ProgramData\Oracle\Java\javapath）中的符号链接是错误的。我已经给出了正确的路径并且它有效。

[有关如何更正程序数据的详细信息，请参见此处](https://stackoverflow.com/questions/26864662/how-to-solve-the-error-the-system-cannot-find-the-file-c-programdata-oracle-ja)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-04-04T11:07:07.917

就我而言，我使用的是 windows 8.1（安装了 jdk1.8.0_77），我做了三件事：

1.  我删除了以前的jdks
2.  我重命名了 C:\Windows\System32 中的 java.exe 文件
3.  我还在我的 PATH 中删除了 C:\ProgramData\Oracle\Java\javapath (echo %PATH%)

瞧，它修好了！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-09-23T15:45:36.780

另一个答案可能是在 Linux 案例中使用 tar.gz 文件。solaris 平台似乎也有类似的东西。这样，所有文件都将采用预期的格式，并且不会出现任何解包问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-10-15T08:17:42.523

我在使用 JDK 1.7.0_40 i586 安装 x86_64 Linux 时遇到了一些问题。我发现问题在于 rpm 无法解压缩 jar 文件，正如 Rigg802 所提到的（尽管 rpm 完成了标记成功）：

```
Unpacking JAR files...
        rt.jar...
/var/tmp/rpm-tmp.zLzkkb: /usr/java/jdk1.7.0_40/bin/unpack200: /lib/ld-linux.so.2: bad ELF interpreter: No such file or directory
Error: unpack could not create JAR file:

        /usr/java/jdk1.7.0_40/jre/lib/rt.jar 
```

文件 /lib/ld-linux.so.2 由 glibc-2.12-1.107.el6_4.4 提供。**i686**不在 jdk rpm 的 rpm deps 中。

Oracle JDK rpm 还需要 32 位版本的 libgcc-4.4.7-3.el6。**i686**待安装

因此，解决方法是先安装 glibc-2.12-1.107.el6_4.4.i686 和 libgcc-4.4.7-3.el6.i686。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-01-26T18:19:57.703

这解决了我在 CentOS 上遇到的问题

```
sudo yum install java-1.8.0-openjdk-devel 
```

另请参阅[在 CentOS 6 中设置 JAVA_HOME 和 CLASSPATH](https://stackoverflow.com/questions/16271316/setting-java-home-classpath-in-centos-6)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-09-30T07:32:27.877

转到控制面板，卸载java相关的东西（如果打开则关闭eclipse），然后重新安装java并打开eclipse，清理项目。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-12-20T23:03:06.037

刚刚在 Solaris 上执行此操作并遇到了同样的问题，即使“java -version”也不起作用。发行版的 64 位版本远小于 32 位版本是有原因的。确实如上所说：

换句话说，要获得完全正常工作的 64 位安装，您必须首先运行 32 位安装，如果您有一台支持 64 位的机器，然后再安装 64 位...

所以我运行了 32 位的安装程序：

> sh jdk-6u131-solaris-sparc.sh

然后我运行了 64 位的安装程序：

> sh jdk-6u131-solaris-sparcv9.sh

这给了我几个 java 可执行文件可供选择：

*   $查找。-名称java
*   ./jdk1.6.0_131/db/demo/programs/scores/java
*   ./jdk1.6.0_131/db/demo/programs/vtis/java
*   ./jdk1.6.0_131/bin/java
*   ./jdk1.6.0_131/bin/sparcv9/java
*   ./jdk1.6.0_131/jre/bin/java
*   ./jdk1.6.0_131/jre/bin/sparcv9/java

sparcv9 java 是 64 位版本，当与 32 位 JDK 一起安装时，它们与“-version”一起使用。

*   ./jdk1.6.0_131/bin/sparcv9/java -version
*   java版本“1.6.0_131”
*   Java(TM) SE 运行时环境 (build 1.6.0_131-b32)
*   Java HotSpot(TM) 64 位服务器 VM（内部版本 20.131-b32，混合模式）

-担

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-01-27T14:34:54.480

对我有用的快速修复：

```
for file in $(find "$JAVA_HOME" -name "*pack")
do 
    unpack200 "${file}" "${test_file/%pack/jar}";
done 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-02-24T12:38:12.483

我发现这个错误是在我提取 .rpm 文件时发生的。

然后我删除了该文件夹并下载了适用于 Linux 64 的 jdk-7u79-linux-x64.tar.gz 并提取了该文件的内容。另外： export JAVA_HOME=/opt/java/jdk1.7.0_79 export JDK_HOME=/opt/java/jdk1.7.0_79 export PATH=${JAVA_HOME}/bin

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-08-24T22:43:49.050

*只需再次*安装 jre 即可。它简单地解决了我的问题。（我安装jdk后SonarQube启动批处理开始报这个错误）

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-03-23T07:01:10.723

我在 Redhat Linux 7 中遇到了同样的问题。这已通过删除、安装以下 RPM 并重新加载终端来解决。

```
java-1.8.0-openjdk-1.8.0.232.b09-0.el7_7.x86_64 
java-1.8.0-openjdk-devel-1.8.0.232.b09-0.el7_7.x86_64
java-1.8.0-openjdk-headless-1.8.0.232.b09-0.el7_7.x86_64 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-06-29T08:47:20.593

在窗口 10 中，env 中已经存在一个路径，因为`C:\>ProgramData\Oracle\Java\javapath`它包含指向可执行文件的符号链接。

当我安装一个新版本并将其从我的环境变量中删除时，我的所有项目都开始显示它。

我在窗口 10 中使用日食氧气

要解决它： -

1.  我只是`C:\>ProgramData\Oracle\Java\javapath`从环境变量中删除路径并在路径中添加新的环境作为 JAVA_HOME 和 %JAVA_HOME%/bin

2.  我以管理员权限重新安装 jdk（删除以前的 JRE 文件夹）

3.  打开你的eclipse项目>右键单击>转到属性>在库中>现在删除JRE系统库>单击添加库>选择“JRE系统库”>单击下一步>选择“工作区默认JRE（jre1.8.x_xxx）”>结束

我的问题已经解决了：）希望对您有所帮助：）

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-01-28T23:05:56.820

所以，我继续尝试一切，最后似乎在卸载 java 后重新安装它解决了我的问题。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-11-14T07:15:09.307

如果 JAVA 安装版本有任何问题

C:\JAVA

将给出它拾取的java的位置。如果您有安装以外的任何路径，请删除这些文件或重命名它（可能是 _backup）。您将获得正确版本的 java 文件。

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2016-08-09T12:36:54.097

我遇到了同样的问题，我安装了两个 java 版本，因此导致了这个问题。要确认这一点，请单击控制面板中的 java 图标，如果未打开则问题相同，只需卸载一个版本即可。小菜一碟。谢谢。

* * *

## 回答 #28

> 赞同：-2
> 
> 时间：2016-06-28T08:41:37.983

我面临同样的问题：VM java/lang/NoClassDefFoundError: java/lang/Object 初始化期间发生错误

请按照以下步骤解决问题：

步骤 1\. 转到 C:\Program Files\ 并搜索 Java 文件夹。

步骤 2\. 删除 C:\Program Files\Java 文件夹。

[步骤 3\. 从http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)为您的 32 位/64 位版本下载新的 Jdk

步骤 4\. 安装 JDK

第 5 步：现在将 JAVA_HOME 设置为“C:\Program Files\Java\jdk1.8.0_91”

第 6 步：打开命令提示符并输入 java -version。

有用。**

# c# - OCX Event is not fired when parent is not set to a visible form

> ID：11808839
> 
> 赞同：0
> 
> 时间：2012-08-04T12:53:25.870
> 
> 标签：c#, events, service, ocx

I have an OCX and I use it in a Service and There is no visible form. It needs a form as a parent otherwise it's events is not fired How can I make the ocx to process messages and fire the event ?

Here is my code :

```
public AxKylixSMS SMS;

SMS = new AxKylixSMS();            

SMS.CreateControl();

SMS.NewDeliveryReport += new   _DKylixSMSEvents_NewDeliveryReportEventHandler(OnDeliveryReport); 
```

OnDeliveryReport Event is not fired. How can I solve this problem ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:01:06.633

使用它来引用您的表单尝试：

```
public AxKylixSMS SMS;

SMS = new AxKylixSMS();            

SMS.CreateControl();

SMS.NewDeliveryReport += new   _DKylixSMSEvents_NewDeliveryReportEventHandler(this.OnDeliveryReport); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:28:11.353

通常 ocx 可以在 winform 上工作，但在您的上下文中，您可以使用 EventLog 在 Windows 服务和 winform 之间进行通信，两者都可以访问：这里是一个示例 [http://www.codeproject.com/Articles/4857/A-realtime -事件日志监控工具](http://www.codeproject.com/Articles/4857/A-realtime-event-log-monitoring-tool)

# php - Page A to page B - Connect the pages to be recognized as logged in

> ID：11808840
> 
> 赞同：0
> 
> 时间：2012-08-04T12:53:37.240
> 
> 标签：php, mysql, forms

I have created some access controlled pages which can be viewed only after logged in. I had to create another page which holds a form where the user is going to fill the details and submit it. But am not able to connect page A to page B so that the user is still logged in.

I try to add the codes that I used in the access controlled pages to the Page B which has a form. But then the page shows internal error 500.

The code that I am using on the access controlled pages is

```
<?PHP
require_once("./include/membersite_config.php");

if(!$fgmembersite->CheckLogin())
{
    $fgmembersite->RedirectToURL("login.php");
    exit;
}
?> 
```

When I try to use the same for the Page B which has a form for submission, it doesn't work.

Something is conflicting.

Here is the code on the Page B

```
<?PHP

require_once("./separate/include/fgcontactformuser.php");
require_once("./separate/include/captcha-creator.php");

$formproc = new FGContactForm();
$captcha = new FGCaptchaCreator('scaptcha');

$formproc->EnableCaptcha($captcha);

$formproc->AddRecipient('mail.com'); //<<---Put your email address here

$formproc->SetFormRandomKey('H04uLRJh4CY5sR4');

if(isset($_POST['submitted']))
{
   if($formproc->ProcessForm())
   {
        $formproc->RedirectToURL("PageB.php");
   }
}

?> 
```

Why is there a conflict and why it doesn't work?

# asp.net-mvc-3 - ASP.NET MVC Base Class Route

> ID：11808841
> 
> 赞同：0
> 
> 时间：2012-08-04T12:53:37.517
> 
> 标签：asp.net-mvc-3

I have several `Controllers` which all inherit a `BaseController`.

I have an Admin `Area` setup where Controllers inherit the `BaseController`. Inside the `BaseController` there is a method called `public JsonResult DoSomething()`. If some of these `Controllers` have a View of which a `Url.Action` is defined, how can I reference that `DoSomething()` method in the base controller with an Area reference?

```
BaseController
FruitController : BaseController
VegetableController : BaseController 
```

Index View of FruitController has a call to

```
@Url.Action("DoSomething", ???, new { area = "Admin" }) 
```

I dont think there is a constructor with action and just variables. Am I just stuck with defining `public JsonResult DoSomething()` in each Controller regardless of it being in the BaseController as I can't seem to call the method.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:12:55.480

您调用`DoSomething`您当前所在的控制器..因为它继承了`BaseController`，它也将具有`DoSomething`操作。但是，它返回的视图必须位于正确的控制器视图文件夹下。否则您必须明确说明视图的位置。

```
@Url.Action("DoSomething", "Fruit", ... 
```

# java - How to Assert Two doubles in JUnit Using assertEquals with Epsilon?

> ID：11808849
> 
> 赞同：4
> 
> 时间：2012-08-04T12:55:14.917
> 
> 标签：java, junit

assertEquals for doubles is deprecated. I found that the form with Epsilon should be used. It is because of impossible 100% strictness of doubles. But anyway I need to compare two doubles (expected and actual result), but I don't know how to do it.

At the moment my test looks like:

```
@Test
public void testCalcPossibleDistancePercentageCount() {
    int percentage = 100;
    assertEquals("Wrong max possible value for %" + percentage, 110.42, processor.calcPossibleValue(percentage));
    percentage = 75;
    /*corresponding assertions*/
} 
```

Here are 3 double values I receive and which I want to check with JUnit: 110.42, 2760.5 and 10931.58. How should JUnit test look like with assertions for them? I receive them as a result of calculation in a method:

```
processor.calcPossibleValue(allowed_percentage){return /*Some weird formulae here*/;} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T12:57:53.107

You need to add a fourth parameter to the `assertEquals` call: the threshold within which two doubles should be considered "equal". Your call should look like this:

```
assertEquals("Wrong max possible value for %" + percentage, 110.42,
        processor.calcPossibleValue(percentage), 0.01); 
```

The above call would indicate that if the value returned by `processor.calcPossibleValue(percentage)` is within ± 0.01 of `110.42`, then the two values are considered equal. You can change this value to make it as small as is necessary for your application.

See the [JUnit documentation](http://junit.sourceforge.net/javadoc/org/junit/Assert.html#assertEquals%28java.lang.String,%20double,%20double,%20double%29) for more information.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T18:16:25.397

Java double 使用[IEEE 754 64 位格式](https://en.wikipedia.org/wiki/Double_precision_floating-point_format)。这种格式有 52 个尾数位。在比较 2 个值时，epsilon 应考虑预期值的大小。

例如， 0.01 可能对 110.42 有效，但如果预期值 > 2 ^(52)则无效。^(2 52)的量级太大以至于0.01 会因为精度而丢失（即只有52 位尾数位）。例如，2 ^(52) + 0.01 == 2 ^(52)。

考虑到这一点，epsilon 应该缩放到预期值。例如，期望值 ÷ 2 ^(52 - 3)或 110.42 ÷ 2 ^(52 - 3) = 1.96... x 10 ^(-13)。我选择了 2 ^(52 - 3)，因为这将在尾数的 3 个最低有效位中给出一个容差。

一个警告是，如果预期值为 0.0，则此公式将 epsilon 计算为 0.0，这对于特定情况可能过于严格。

另一个注意事项是不处理 NaN 和 ±∞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-26T16:20:05.690

**断言已弃用**

```
assertTrue("message like not equal ",expectedresult-actual == 0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-16T20:02:51.903

```
Assert.assertTrue("Not equals", expectedDouble -  actualDouble == 0); 
```

无需涉及 epsilon 或 delta。

# ios - iOS SDK getting clipboard text on application load

> ID：11808850
> 
> 赞同：8
> 
> 时间：2012-08-04T12:55:38.683
> 
> 标签：ios, sdk, uiviewcontroller, uipasteboard

I would like to get the text copied to clipboard when application launching.

I can use following text to get the available text from clipboard. But I need to use this value in a different viewcontroller. How can I pass this value to my viewcontroller?

```
- (void)applicationDidBecomeActive:(UIApplication *)application {

    NSLog([UIPasteboard generalPasteboard].string);

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-28T19:45:39.983

更好的处理方法是为 UIApplicationDidBecomeActiveNotification 事件添加一个观察者（在视图控制器中）。这样可以避免应用程序委托和视图控制器之间不必要的耦合。

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(getClipboardString:)
                                             name:UIApplicationDidBecomeActiveNotification object:nil]; 
```

编辑：当视图控制器被移除时，不要忘记移除观察者：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-04T13:14:57.623

在您的 VC 上声明并实现一个方法，您可以在激活时从应用程序委托调用该方法：

```
@inferface ViewController: UIViewController {
   /* etc. */
}

- (void)handlePasteboardString:(NSString *)s;

@end 
```

在您的应用委托中：

```
- (void)applicationDidBecomeActive:(UIApplication *)a
{
    [self.mainViewController handlePasteboardString:[UIPasteboard generalPasteboard].string];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T19:32:38.767

不确定何时需要剪贴板项目，但如果是在显示或即将显示特定视图控制器时，您可以在`viewDidLoad`该视图控制器中执行此操作

# objective-c - Why do we need to use NSAutoreleasepool for each thread?

> ID：11808851
> 
> 赞同：5
> 
> 时间：2012-08-04T12:55:55.820
> 
> 标签：objective-c, ios, nsautoreleasepool

In iOS app development, we are using `NSAutoreleasePool` to relinquish ownership of objects at a later point in time.

But why can it be shared between different threads?

Why do we need to create a new autoreleasepool when I wanted to use a new thread?

**EDIT:**

As taskinoor mentioned my question was why this is designed in such a way that each thread should have a separate autoreleasepool.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T13:22:52.230

多线程自动释放池的设计挑战是何时耗尽它们。如果在对象仍在使用时耗尽池，那么您将崩溃。对于每个线程，很容易判断您何时处于运行循环之外，因此处于可以耗尽自动释放对象的位置。在多线程情况下，您的线程需要在它们的运行循环结束时同步，这样您就可以确保您处于一个安全的点来耗尽它们。以这种方式同步踏板是一个坏主意，它会产生大量空闲时间并减慢程序的速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T13:05:10.610

每个线程都是不同的执行上下文——一个线程可能迟早退出，它们可能使用具有不同生命周期和内存管理需求的不同资源，因此每个线程应该独立管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T13:06:44.557

因为他们是这样设计的。我想你的问题是为什么他们以这种方式设计。我不是 100% 肯定，但一个可能的原因可能是跨线程共享资源是有代价的。在对共享池的每次修改期间，每个线程都需要锁定解锁，这会降低性能。仅当需要共享时才应在多个线程之间共享资源，而自动释放池则不是这种情况。使用专用的自动释放池性能会更好。这可能是此设计决定的一个可能原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T13:04:05.727

我不认为自动释放池在线程之间共享，根据Cocoa 中的[苹果内存管理指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)，每个线程都有自己的自动释放池堆栈

如果您不为您创建或分离的线程创建自动释放池，则自动释放功能不起作用，因此内存占用会增加

# wordpress - Move wordpress site: Theme options are reset to default on first access

> ID：11808854
> 
> 赞同：0
> 
> 时间：2012-08-04T12:56:54.057
> 
> 标签：wordpress, wordpress-theming

I've setup a script to move a wordpress site. It does all the search-replace on URLs etc. All according to the numerous tutorials out there.

Now to my issue:

The site is looking almost great BUT the options for my themes are reset when I access the site the first time. I can see the database row with the option values being reset when I access the site.

Has anyone stumpled upon the same issue?

Best regards,

Niclas

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:57:04.513

您的主题可以在激活时重置它的选项。我以前曾多次在没有经验的 wp 编码器中看到过该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T15:39:08.867

wordpress 存储其部分内容的格式包括信息的长度参数。现在，如果您更改某些信息（移动到新域时的 URL），长度信息将被更改，并且 wordpress 无法解码数据。我不得不编写一个脚本来迭代所有内容（SQL 内容）并将长度属性更新为新长度。

对不起。是前段时间。但它可能会给需要的用户一个提示。

# java - StringIndexOutOfBoundsException in while loop

> ID：11808856
> 
> 赞同：0
> 
> 时间：2012-08-04T12:57:02.050
> 
> 标签：java, while-loop

I have this code:

```
String input = JOptionPane.showInputDialog("Enter text");
StringBuilder forward = new StringBuilder("");
StringBuilder backward = new StringBuilder("");
int f = 0;
int b = input.length();

while(f < input.length()) {

    while(input.charAt(f) > 63) {

        forward.append(input.charAt(f));
        f++;

    }

    f++;
} 

System.out.println(forward); 
```

although program is not finished, it already throws an exception here. It says:

Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 5 ( Range depends on, how many character i enter ) at java.lang.String.charAt(Unknown Source)

Strange thing is that i yesterday worked on similar code and it worked perfectly, and it was practical the same.

I already searched stack forums and docs oracle but i only found that this exception is thrown when is index equal the size of the string ( for charAt method ).

So still it seems to be the problem right here but i can't find it.

```
while(input.charAt(f) > 63) 
```

EDIT:

Why is that code not working? Again its throwing same exception as above?

```
while(b > 0) {

        if(input.charAt(b) > 63) {

            backward.append(input.charAt(b));

        }

        b--;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T12:58:47.913

这里的值`f`可以超过字符串的长度：

```
while (input.charAt(f) > 63) {
    forward.append(input.charAt(f));

    // This next line might increase f past the end of the string.
    f++;
} 
```

试试这个：

```
while (f < input.length()) {

    char c = input.charAt(f);
    if (c > 63) {
        forward.append(c);
    }

    f++;
} 
```

第二个版本总是`f < input.length()`在尝试访问之前进行检查`input.charAt(f)`。

# svg - How to place multiple evenly-spaced arrowheads along an SVG line?

> ID：11808860
> 
> 赞同：59
> 
> 时间：2012-08-04T12:57:21.763
> 
> 标签：svg, line, drawing, markers, svg-marker

I am new to SVG and I am trying to draw a straight line between two points. I managed so far by using this command:

`<line x1="50" y1="50" x2="150" y2="150" style="stroke:rgb(255,255,0); stroke-width:2" stroke-dasharray="5,3" />"`

What is the simplest way to add tiny triangles or arrow heads (evenly spaced) over this line in order to indicate the direction?

**Edit 1:**

Just to be more clear, I am not after an arrow at the end of the line, but multiple triangles (evenly spaced) along the whole line. If possible, I would like to replace each dash in the dashed line with a triangle pointing in the direction of the line.

**Edit 2**

Based on Phrogz' suggestion, I created a page as shown below, but nothing is showing up. What am I doing wrong?

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="css/com.css" rel="stylesheet" type="text/css" />
</head>
<body style="background:none;">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 -10 70 90">
<defs>
<marker id="t" markerWidth="4" markerHeight="4"
        orient="auto" refY="2">
  <path d="M0,0 L4,2 0,4" />
</marker>
</defs>
<polyline points="0,0 0,50 20,70 40,10 42,8 44,10, 46,14 50,50" />
</svg>
<script type="text/javascript">
midMarkers(document.querySelector('polyline'),6);

    // Given a polygon/polyline, create intermediary points along the
    // "straightaways" spaced no closer than `spacing` distance apart.
    // Intermediary points along each section are always evenly spaced.
    // Modifies the polygon/polyline in place.
    function midMarkers(poly,spacing){
        var svg = poly.ownerSVGElement;
        for (var pts=poly.points,i=1;i<pts.numberOfItems;++i){
            var p0=pts.getItem(i-1), p1=pts.getItem(i);
            var dx=p1.x-p0.x, dy=p1.y-p0.y;
            var d = Math.sqrt(dx*dx+dy*dy);
            var numPoints = Math.floor( d/spacing );
            dx /= numPoints;
            dy /= numPoints;
            for (var j=numPoints-1;j>0;--j){
                var pt = svg.createSVGPoint();
                pt.x = p0.x+dx*j;
                pt.y = p0.y+dy*j;
                pts.insertItemBefore(pt,i);
            }
            if (numPoints>0) i += numPoints-1;
        }
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-08-04T15:40:30.710

*基于对问题的澄清，这是沿`<polyline>`元素创建中间点以使`marker-mid="url(#arrowhead)"`属性起作用的实现。有关标记和箭头的介绍，请参见下文。*

## 演示：http: [//jsfiddle.net/Zv57N/](http://jsfiddle.net/Zv57N/)

```
midMarkers(document.querySelector('polyline'),6);

// Given a polygon/polyline, create intermediary points along the
// "straightaways" spaced no closer than `spacing` distance apart.
// Intermediary points along each section are always evenly spaced.
// Modifies the polygon/polyline in place.
function midMarkers(poly,spacing){
  var svg = poly.ownerSVGElement;
  for (var pts=poly.points,i=1;i<pts.numberOfItems;++i){
    var p0=pts.getItem(i-1), p1=pts.getItem(i);
    var dx=p1.x-p0.x, dy=p1.y-p0.y;
    var d = Math.sqrt(dx*dx+dy*dy);
    var numPoints = Math.floor( d/spacing );
    dx /= numPoints;
    dy /= numPoints;
    for (var j=numPoints-1;j>0;--j){
      var pt = svg.createSVGPoint();
      pt.x = p0.x+dx*j;
      pt.y = p0.y+dy*j;
      pts.insertItemBefore(pt,i);
    }
    if (numPoints>0) i += numPoints-1;
  }
} 
```

上面的代码修改了一个现有元素，以沿每个直边的每个*间距*`<polyline>`单位添加点。将其与在每个顶点放置一个旋转标记相结合，您就可以沿着您的路径一致地绘制任意复杂的形状/图形。*`marker-mid`*

 *![鸟道](../Images/a7deab1e859ad00e391b6132262f6088.png)

尽管代码沿每个线段均匀地隔开点（这样在拐角处不会出现难看的“聚集”），因为上面的演示显示代码不会删除路径中已经拥有的比*间距*更近的点价值。

* * *

*（原始“标记简介”答案如下。）*

* * *

您想定义一个[SVG`<marker>`元素](http://www.w3.org/TR/SVG/painting.html#MarkerElement)并将`marker-start="…"`和/或`marker-end="…"`属性添加到您的行中。使用标记将任意形状复制到路径的末端，并（使用`orient="auto"`）旋转形状以匹配。

```
<svg xmlns="http://www.w3.org/2000/svg" viewBox="-50 -100 200 200">
  <defs>
    <marker id='head' orient='auto' markerWidth='2' markerHeight='4'
            refX='0.1' refY='2'>
      <path d='M0,0 V4 L2,2 Z' fill='red' />
    </marker>
  </defs>    
  <path
    marker-end='url(#head)'
    stroke-width='5' fill='none' stroke='black'  
    d='M0,0 C45,45 45,-45 90,0'
    />    
</svg>​ 
```

### 演示：http: [//jsfiddle.net/Z5Qkf/1/](http://jsfiddle.net/Z5Qkf/1/)

![带箭头的曲线](../Images/13a97cb8159359e28c9858240de0f60f.png)

在上面：

*   [`orient="auto"`](http://www.w3.org/TR/SVG/painting.html#OrientAttribute)使标记随线旋转
*   [`markerWidth`并`markerHeight`](http://www.w3.org/TR/SVG/painting.html#MarkerWidthAttribute)定义一个用于标记的边界框（如 viewBox）。
    *   请注意，这些然后由`stroke-width`最后一行的缩放；高度为“4”会使其在最终图纸（4×5）中为 20 个单位宽。
*   [`refX`并`refY`](http://www.w3.org/TR/SVG/painting.html#MarkerElementRefXAttribute)在将形状放置在路径末端时定义“原点”的位置
    *   我曾经`refX="0.1"`确保标记与行尾略微重叠
*   为了使自动方向正常工作，您希望标记的“向前”方向位于 +x 方向。（用于标记的红色路径在未旋转时看起来像这样 ▶。）
*   您可以单独调整标记和/或线的`fill-opacity`and `stroke-opacity`，但更改`opacity`线的 也会影响绘制的标记。
    *   *由于线和标记重叠，如果降低`fill-opacity`标记的 ，您会看到重叠；但是，如果您降低`opacity`线条本身的 ，则标记将在线条上完全不透明地合成，然后两者的组合会降低不透明度。*
        ![在此处输入图像描述](../Images/cbd2774e3d5f9f8bce3989dfb87be98b.png)

* * *

如果您想要沿直线长度的箭头，则需要使用沿直线`marker-mid="…"`的任何一个`<path>`或`<polyline>`和中间点。

### 演示：http: [//jsfiddle.net/Z5Qkf/2/](http://jsfiddle.net/Z5Qkf/2/)

![在此处输入图像描述](../Images/0ca6c381bbd554a9fc17f2cf2b7c385d.png)

唯一的问题是沿线改变方向的任何点都会[弄乱方向](http://jsfiddle.net/Z5Qkf/3/)；这就是为什么在演示中我使用 Bézier 曲线来圆角，使直线上的中点沿着直线段。

```
<svg xmlns="http://www.w3.org/2000/svg" viewBox="-50 -100 200 200">
<defs>
  <marker id='mid' orient="auto"
    markerWidth='2' markerHeight='4'
    refX='0.1' refY='1'>
    <!-- triangle pointing right (+x) -->
    <path d='M0,0 V2 L1,1 Z' fill="orange"/>
  </marker>
  <marker id='head' orient="auto"
    markerWidth='2' markerHeight='4'
    refX='0.1' refY='2'>
    <!-- triangle pointing right (+x) -->
    <path d='M0,0 V4 L2,2 Z' fill="red"/>
  </marker>
</defs>

<path
  id='arrow-line'
  marker-mid='url(#mid)'
  marker-end='url(#head)'
  stroke-width='5'
  fill='none' stroke='black'  
  d='M0,0 L20,20 C40,40 40,40 60,20 L80,0'
  />

</svg>​ 
```

要在程序上执行此操作，您可以使用 JavaScript 和`getPointAtLength()`路径命令对路径进行[采样](http://phrogz.net/svg/convert_path_to_polygon.xhtml)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-09-20T21:07:08.193

只想添加一些有用的链接和示例：

**1.箭头可以是二次的** [![在此处输入图像描述](../Images/99c4d69dda56c59eb875784627213867.png)](https://i.stack.imgur.com/EmsIC.jpg)

**2.三次曲线** [![在此处输入图像描述](../Images/ae68f89235526b175f827f945907662a.png)](https://i.stack.imgur.com/vE0oJ.jpg)

文档：[https ://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths)

## **演示：**这里实现了两种箭头：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>

  <svg xmlns="http://www.w3.org/2000/svg" viewBox="-50 -100 200 200">
<defs>
  <marker id='head' orient="auto"
    markerWidth='2' markerHeight='4'
    refX='0.1' refY='2'>
    <!-- triangle pointing right (+x) -->
    <path d='M0,0 V4 L2,2 Z' fill="black"/>
  </marker>
</defs>

<path
  id='arrow-line'
  marker-end='url(#head)'
  stroke-width='1'
  fill='none' stroke='black'  
  d='M0,0 Q45,-20 90,0'
  />

<path
  id='arrow-line'
  marker-end='url(#head)'
  stroke-width='1'
  fill='none' stroke='black'  
  d='M0,50 C10,30 80,30 90,50'
  />

</svg>
</body>
</html>
```*

# javascript - 书签链接在 Chrome 中不起作用

> ID：11808867
> 
> 赞同：1
> 
> 时间：2012-08-04T12:58:28.473
> 
> 标签：javascript, html, bookmarks

我有以下用于为网站添加书签的功能。此功能在 Firefox 中有效，但在 Mac OS 上的 Chrome 中无效（我尚未测试 IE）：

```
function bookmark(url,title){
  if ((navigator.appName == "Microsoft Internet Explorer") && (parseInt(navigator.appVersion) >= 4)) {
  window.external.AddFavorite(url,title);
  } else if (navigator.appName == "Netscape") {
    window.sidebar.addPanel(title,url,"");
  } else {
    alert("Press CTRL-D (Netscape) or CTRL-T (Opera) to bookmark");
  }
} 
```

和链接：

```
<a href="javascript:bookmark('http://www.url.com','Bookmark it')" title="">Bookmark</a> 
```

任何人都可以给我任何提示，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:08:40.993

您的代码仅适用于旧浏览器。
您不能在现代浏览器上使用 JavaScript 创建书签，因为它不符合 W3C 规范，而且没有用处（如果用户喜欢，他会为您的网站添加书签）。

但是您可以添加`rel="bookmark"`到链接以指示它应该用作书签。

# java - 枚举作为实例变量

> ID：11808869
> 
> 赞同：19
> 
> 时间：2012-08-04T12:58:39.457
> 
> 标签：java, enums, scjp

如果您有一个枚举，例如

```
enum Coffee {
    BIG,
    SMALL
} 
```

和一个类，它有一个像这样的枚举实例变量：

```
public class MyClass {
    private Coffee coffee;

    // Constructor etc.
} 
```

为什么可以在构造函数中说 eg `coffee.BIG`？我不明白你可以使用参考吗？枚举作为实例变量是否被初始化为`null`? 这是第一章 SCJP 书中的自测题 #4。*我试图缩短代码和问题。*

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-04T13:31:02.617

在

```
enum Coffee {
    BIG,
    SMALL
} 
```

BIG 或 SMALL 是`public static final`Coffee 类的字段，和所有静态字段一样，它们可以通过类名访问，例如

```
Coffee b1 = Coffee.BIG; 
```

或通过与类相同类型的引用，例如

```
Coffee s2 = b1.SMALL;
Coffee s3 = Coffee.BIG.SMALL; //BIG is reference of type Coffee so it is OK (but looks strange) 
```

但是请记住，**我们应该避免通过引用访问静态成员**。这会造成混乱，因为我们并没有真正访问*实例*的成员而是*类*的成员（例如，没有多态行为）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-04T13:30:11.280

**这是幕后**发生的事情：

```
E:\workspace>type Coffee.java
public enum Coffee {
    BIG,
    SMALL
}

E:\workspace>javap Coffee
Compiled from "Coffee.java"
public final class Coffee extends java.lang.Enum<Coffee> {
  public static final Coffee BIG;
  public static final Coffee SMALL;
  public static Coffee[] values();
  public static Coffee valueOf(java.lang.String);
  static {};
} 
```

如您所见`BIG`，`SMALL`本质上是枚举中的静态字段。

[**JLS**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2)也明确了这部分：

> 除了枚举类型 E 从 Enum 继承的成员之外，对于每个声明的名称为 n 的枚举常量，该枚举类型都有一个隐式声明的名为 n 的类型 E 的 public static final 字段。这些字段被认为是在与相应的枚举常量相同的顺序，在枚举类型中显式声明的任何静态字段之前。每个这样的字段都被初始化为与之对应的枚举常量。

希望这能澄清你的问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-04T13:02:55.277

在 Java 5 之前，实现枚举的方法是创建一个类，该类具有私有构造函数和初始化为特定值的同一类的公共最终字段。

从 Java 5 开始，枚举构造实际上是一种糖，它可以做同样的事情，并且处理诸如不允许空值、枚举值成为公共静态字段等事情。

# jquery - JQuery 内容滑块：3 个内容滑块，其中没有一个可以正常工作。提供样品

> ID：11808877
> 
> 赞同：0
> 
> 时间：2012-08-04T13:00:15.867
> 
> 标签：jquery, html, css, slider, carousel

我必须为具有以下规格的客户构建内容库：

1.  页面上将有两个画廊。
2.  它们将在灯箱内——用户将点击链接，画廊将在模态窗口中打开。
3.  画廊将具有位于滑动内容顶部的下一个/上一个按钮
4.  画廊将在每张幻灯片中包含图像和文本/其他内容。

我有 3 个我建立的画廊的例子，它们并没有完全按照他们应该做的那样做，每个都有自己独特的方式：

1：**画廊尝试一**，基于无畏飞行器滑块：[DEMO HERE](http://www.steph-morris.com/slidertest/index_rollmyown.html#)

*对此不起作用的是*：按钮位于每个列表项的内部。我试图通过将绝对定位的图像作为假按钮放在实际链接的顶部来解决此问题，但这在 Internet Explorer 中创建了一个无法解决的 Z-Index 问题。该死。

我的 JQuery 印章无法编写一个新函数，以便按钮可以独立于 LI 并通过计算按钮被单击的次数来触发滑动，所以我尝试了另一种解决方案：

2.**画廊尝试二**，基于 TinyCarousel：[DEMO HERE](http://www.steph-morris.com/slidertest/index_tinycarousel.html)

*这个有什么作用：*一切！这很棒！我喜欢自动启用/禁用“上一个”按钮。旋转木马的数量没有限制。惊人的。除了...

*什么不起作用：*出于某种我无法理解的原因，将 TinyCarousels 放在模态窗口内会停用按钮。这些按钮从字面上获得了一类“禁用”并停止工作。为什么？不知道。试图通过使用 removeClass 取消“禁用”类来修复它。没修。没有想法。

1.  **图库尝试三**，基于 Stackoverflow 用户 Kei 的优秀[JSFiddle](http://jsfiddle.net/sZqXs/)。[在这里演示](http://www.steph-morris.com/slidertest/index_clicker.html)

*什么不起作用*：这个与页面上的两个画廊配合得很好，在模式窗口内工作，但是......整个 JQuery 专门针对 IMG，而不是 LI，所以它不适用于我的附加文字内容。

因此，任何人都可以提供解决方案或建议：

1.  将静态按钮添加到库尝试一
2.  修复 TinyCarousel 中禁用模式窗口内的画廊的错误
3.  修改库尝试三，使其针对 LI 中的所有内容，而不仅仅是 IMG，或者
4.  您知道的灯箱+画廊解决方案可以直接开箱即用地完成所有这些事情并允许轻松自定义 CSS？

**进一步的画廊尝试：**

1.  BXgallery：不起作用，因为它会动态检测其内容的大小并相应地调整自身大小，当内容最初隐藏在模式窗口中时，使其高度和宽度为 0px。[在这里演示](http://www.steph-morris.com/slidertest/index_bxslider.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:02:38.403

最后，我放弃并使用了 AnySlider。

我想远离它，因为它功能如此齐全以至于它可能是一个令人头疼的定制问题，而且我记得默认的 CSS 非常密集，无法正确浏览和设置样式。

但是，由于我在尝试不起作用的滑块时显然比我花在解开 AnySlider 的默认 CSS 上的时间要多得多，所以我放弃并尝试了它。在不到一个小时的时间内，它的风格就很体面了。

Ta-da，它有效：[DEMO HERE](http://steph-morris.com/slidertest/index_anythingslider.html)

1.  它适用于页面上的两个画廊
2.  它在模态窗口内工作
3.  控件位于画廊的顶部
4.  它适用于文本和图像内容。

故事的寓意：有时显而易见的答案是显而易见的。

# powershell - Hyper-V 使用 PowerShell 实时备份 VHD

> ID：11808881
> 
> 赞同：3
> 
> 时间：2012-08-04T13:00:45.987
> 
> 标签：powershell, backup, windows-server-2008-r2, hyper-v, vhd

我听说有人说您可以在 Windows 2008 R2 Hyper-V（非集群）上备份 VHD 文件，并在来宾处于活动状态并使用 powershell 脚本运行时备份它们。有没有人有这方面的经验可以分享？

什么样的备份是出口？制作、复制然后还原的快照？我知道有很多付费使用模型，但这是一个测试环境，我只是想知道是否有一种“弱但功能强大”的方式来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T20:37:35.883

确实！只需制作卷的 VSS 快照，将其挂载为驱动器号，抓取 VHD 文件，然后将它们放在其他位置。这是我几年前写的一篇：

[http://www.send4help.net/full-backups-of-running-hyper-v-guests-309](http://www.send4help.net/full-backups-of-running-hyper-v-guests-309)

如果我不得不再做一次，我会遵循这个方法：

[http://blogs.msdn.com/b/virtual_pc_guy/archive/2009/03/11/backing-up-hyper-v-with-windows-server-backup.aspx](http://blogs.msdn.com/b/virtual_pc_guy/archive/2009/03/11/backing-up-hyper-v-with-windows-server-backup.aspx)

它在默认的 Windows 备份工具中启用了对 Hyper-V 的原生支持。

享受！

# javascript - 画布文本调整大小

> ID：11808882
> 
> 赞同：1
> 
> 时间：2012-08-04T13:01:04.993
> 
> 标签：javascript, css, html, resize, html5-canvas

我正在尝试以与此类似的方式调整画布中的文本大小：http: [//simonsarris.com/project/canvasdemo/demo2.html](http://simonsarris.com/project/canvasdemo/demo2.html)

有没有办法单独更改字符串的宽度或高度？

到目前为止，我所能做的就是更改字体大小，但使用句柄更难管理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:11:38.823

请参阅此 URL 以调整 HTML5 画布文本大小[http://jsfiddle.net/palani/Cxgkz/](http://jsfiddle.net/palani/Cxgkz/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T13:28:09.140

我能想到的一种方法是`toDataUrl`在单独的隐藏画布上将字符串转换为图像。然后在您的主画布上绘制该图像并操作其`width`和`height`.

[演示](http://jsfiddle.net/bCLZF/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:57:38.843

我使用 KineticJS setScale 方法做到了这一点。我从那里得到了 insipartion [http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)

```
 function addText(color, text, font, fontsize) {

        var layerid = 'layer-text-something';

        var layer = new Kinetic.Layer({
            id:layerid
            ,
            offset: [0, 0]
        });
        var group  = new Kinetic.Group({
            x: 50,
            y: 50,
            draggable: true
            ,dragOnTop: false
            ,
            offset: [50, 50]
        });
        layer.add(group);
        stage.add(layer);

        var mtext = new Kinetic.Text({
            x: 0,
            y: 0,
            text: text,
            fontSize: fontsize,
            fontFamily: font,
            fill: color,
            draggable: false,
            id: 'text-'+layernum,
            name: 'text'

        });

        mtext.on('mouseover', function() {
            document.body.style.cursor = 'pointer';
        });

        mtext.on('mouseout', function() {
            document.body.style.cursor = 'default';
        });
        group.add(mtext);

        var width = mtext.getWidth();
        var height = mtext.getHeight();

        addAnchor(group, 0, 0, 'topLeft');
        addAnchor(group, width, 0, 'topRight');
        addAnchor(group, width, height, 'bottomRight');
        addAnchor(group, 0, height, 'bottomLeft');

        stage.draw();

        return layer;
    }

function update(activeAnchor) {
    var group = activeAnchor.getParent();

    var topLeft = group.get('.topLeft')[0];
    var topRight = group.get('.topRight')[0];
    var bottomRight = group.get('.bottomRight')[0];
    var bottomLeft = group.get('.bottomLeft')[0];

    var text = group.get('.text')[0];

    var anchorX = activeAnchor.getX();
    var anchorY = activeAnchor.getY();

    // update anchor positions
    switch (activeAnchor.getName()) {
        case 'topLeft':
            topRight.setY(anchorY);
            bottomLeft.setX(anchorX);
            break;
        case 'topRight':
            topLeft.setY(anchorY);
            bottomRight.setX(anchorX);
            break;
        case 'bottomRight':
            bottomLeft.setY(anchorY);
            topRight.setX(anchorX); 
            break;
        case 'bottomLeft':
            bottomRight.setY(anchorY);
            topLeft.setX(anchorX); 
            break;
    }

    if (text) {
        text.setPosition(topLeft.getPosition());

        var newWidth = topRight.getX() - topLeft.getX();
        var newHeight = bottomLeft.getY() - topLeft.getY();
        if(newWidth && newHeight ) {
            currentSize = text.getSize();
            text.setScale(newWidth/currentSize.width, newHeight/currentSize.height);
        }
    }
}

function addAnchor(group, x, y, name) {
    var layer = group.getLayer();

    var anchor = new Kinetic.Circle({
        x: x,
        y: y,
        stroke: '#666',
        fill: '#ddd',
        strokeWidth: 2,
        radius: 3,
        name: name,
        draggable: true,
        dragOnTop: false
    });

    anchor.on('dragmove', function() {
        update(this);
        layer.draw();
    });
    anchor.on('mousedown touchstart', function() {
        group.setDraggable(false);
        this.moveToTop();
    });
    anchor.on('dragend', function() {
        group.setDraggable(true);
        layer.draw();
    });
    // add hover styling
    anchor.on('mouseover', function() {
        var layer = this.getLayer();
        document.body.style.cursor = 'pointer';
        this.setStrokeWidth(4);
        layer.draw();
    });
    anchor.on('mouseout', function() {
        var layer = this.getLayer();
        document.body.style.cursor = 'default';
        this.setStrokeWidth(2);
        layer.draw();
    });

    group.add(anchor);
} 
```

看看： http: [//kineticjs.com/docs/symbols/Kinetic.Node.php#setScale](http://kineticjs.com/docs/symbols/Kinetic.Node.php#setScale)

# mysql - MySQL 编辑器挂起尝试在全新安装时启动

> ID：11808886
> 
> 赞同：2
> 
> 时间：2012-08-04T13:01:18.380
> 
> 标签：mysql

我刚刚下载了最新的社区安装程序 (5.5.27) 以及工作台 (5.2.41)。
我在设置的所有默认设置上单击确定。

当我尝试在工作台主页上“打开连接以开始查询”并选择“Local Instance MySql 55”时，我一直卡在一个永无止境的“Opening SQL Editor”屏幕上（“An SQL Editor instance for”Local Instance MySql 55" 正在打开，应该马上就可以使用")

任何想法可能是错的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T16:58:26.640

我不知道发生了什么。我启动了一个命令窗口，它工作。
然后我在清除密码库后重试，它成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-03T15:38:06.833

它也发生在我身上。登录时，只需确保您已单击“将密码添加到钥匙串访问”选项

# jquery - 用于调整元素位置的 css

> ID：11808888
> 
> 赞同：0
> 
> 时间：2012-08-04T13:01:36.100
> 
> 标签：jquery, html, css

我有一个灯箱来显示一些东西。灯箱可以通过几行 HTML 代码和 CSS 正常工作。在灯箱内，有一个“关闭窗口”链接。我想单击它然后关闭表单。预计在表格底部，但现在不是。

我认为这是一个 CSS 样式问题。该演示位于[jsfiddle 演示中。](http://jsfiddle.net/zhshqzyc/HjCyA/4/)

```
 <a id="show-panel" href="#">Show</a>
        <div id="lightbox-panel">
          <h2>Title</h2>
            <p>Goal: </p>
                <br />
          <span>
          <ul style="float:left"><li>Goal 1</li><li>Goal 2</li><li>Goal 3</li></ul>
                </span>

          <p style="float:left" align="center"> <a id="close-panel" href="#">Close this window</a> </p>
        </div>
        <!-- /lightbox-panel -->
        <div id="lightbox"></div>
        <!-- /lightbox --> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:04:22.280

您以错误的方式使用花车，这是您要找的吗？

[小提琴](http://jsfiddle.net/HjCyA/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:04:49.713

`float:left`从您的`ul`和`p`标签中删除

[小提琴](http://jsfiddle.net/HjCyA/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T13:05:50.077

尝试添加到您的 CSS：

```
#close-panel {
    position: absolute;
    bottom: 0px;
    right: 0px;
} 
```

# ruby-on-rails - 使用 Apache 为 Rails 运行 Mongrel

> ID：11808893
> 
> 赞同：4
> 
> 时间：2012-08-04T13:02:42.740
> 
> 标签：ruby-on-rails, centos, mongrel

我正在尝试部署我的小型 Rails 应用程序。我的 VPS 正在运行 Apache 2.2，我希望将请求定向到混合集群以处理我的新 Rails 应用程序。

Ruby 版本 1.9.3 Rails 版本 3.2.7 Mongrel 版本 1.2.0 (gem install mongrel --pre)

**我做了什么**

我已经为端口 3001 到 3003 启动了 3 个 mongrel 守护进程，其中包括：

```
mongrel_rails start -e production -p 3001 -d -P log/mongrel1.pid 
```

分别。

运行每个启动命令后需要注意的事项；我收到以下通知：

> 注意： Gem::SourceIndex.from_installed_gems 已被弃用，没有替代品。它将在 2011 年 10 月 1 日或之后删除。从 /usr/local/rvm/gems/ruby-1.9.3-p194/gems/gem_plugin-0.2.3/lib/gem_plugin.rb:109 调用的 Gem::SourceIndex.from_installed_gems。注意： from_installed_gems(arg) 已弃用。来自 /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb:63:in `block (2 levels) in deprecate' 注意：Gem： :SourceIndex.from_gems_in 已被弃用，没有替代品。它将在 2011 年 10 月 1 日或之后删除。从 /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:50 调用的 Gem::SourceIndex.from_gems_in。注意： Gem::SourceIndex#each 已被弃用，没有替代品。它将在 2011-11-01 或之后删除。宝石：：

我的理解告诉我这应该不是问题，但是当我运行时：

```
ps aux | grep mongrel 
```

我得到：

```
someotheruser     17186  0.0  0.1 101064  1336 pts/0    S    12:56   0:00 su mongrel
mongrel  17187  0.1  0.3  67260  2872 pts/0    S    12:56   0:00 bash
mongrel  17284  0.0  0.1  65600   980 pts/0    R+   12:56   0:00 ps aux
mongrel  17285  0.0  0.0  61176   728 pts/0    R+   12:56   0:00 grep mongrel 
```

即，我找不到服务器进程。

我已将我的虚拟主机更新为：

```
<proxy balancer://mongrelcluster>
  BalancerMember http://127.0.0.1:3001
  BalancerMember http://127.0.0.1:3002
  BalancerMember http://127.0.0.1:3003
</proxy>

<VirtualHost *:80>
  ServerName subdomain.mydomain.co.uk
  ServerAlias subdomain.mydomain.co.uk
  ProxyPass / balancer://mongrelcluster/
  ProxyPassReverse / balancer://mongrelcluster/
  ProxyPreserveHost on
</VirtualHost> 
```

当我将浏览器定向到 subdomain.mydomain.co.uk 时，我收到一个 Apache 403 错误，但我不知道错误在哪里。mongrel 可能没有按应有的方式运行，但也许我的虚拟主机设置不正确。

感谢任何帮助和/或指导，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:15:38.070

检查了 Mongrel 日志文件，问题似乎是我的 database.yml 文件将适配器指定为 sqlite3，而它应该是 mysql2。我没有安装 sqlite3，所以 Mongrel 无法启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:07:23.587

我想您可能在您的 VirtualHost 标记中缺少 DocumentRoot 规范。

# c++ - 关于声明成员函数

> ID：11808897
> 
> 赞同：0
> 
> 时间：2012-08-04T13:03:22.247
> 
> 标签：c++, function, abstract-class, definition, member

我有一个抽象基类。

我有一堆成员函数，它们不是私有的，也不是静态的，也不是模板，只是普通的公共成员函数。

而且我注意到我**必须定义在其他函数的****定义**中被调用的任何这些公共普通函数，即使这些函数没有由 main 中的任何代码运行。

更让我注意的是，无论如何，如果类是抽象的，如果类本身不会以任何方式实例化，为什么实际上应该强制定义任何函数？

这是我在这里发布的第一个问题，如果我没有很好地解释自己或做错了什么，很抱歉。

在此先感谢您的帮助！

这是我正在谈论的课程的缩短版本：

```
#ifndef PROCESS_H_INCLUDED
#define PROCESS_H_INCLUDED

#include <iostream>
#include <memory>

using std::weak_ptr;
using std::shared_ptr;

class Process;

typedef shared_ptr<Process> shProcess;
typedef weak_ptr<Process> wProcess;

class Process
{
    friend class ProcessManager;
public:

    inline void AttachChild(shProcess shChild);

    /*
    FOR EXAMPLE I CAN LEFT THE FUNCTION ABOVE WITHOUT BEING DEFINE, BUT I HAVE
    TO DEFINE THE FUNCTION BELOW OR I GET A COMPILER ERROR
    COULD IT BE BECAUSE EVEN IF THIS CLASS IS ABSTRACT I AM USING IT AS A 
    PARAMETER OF OTHER FUNCTIONS FOR POLIMORPHIC PURPOSES?
    */
    shProcess RemoveChild(void){return shProcess();}//reliases ownership of the child  

    shProcess PeekChild(void){return m_shChild;} //doesn´t release ownership of the child

};

#endif //PROCESS_H_INCLUDED 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:09:05.427

如果链接器可以证明它们永远不会被调用，您可以只声明函数（而不提供主体）。

然而，虚函数可能会阻碍这一点，因为编译器必须构建一个 vtable（其他一些编译单元可能从类继承并调用函数），然后链接器的任务要困难得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:08:20.223

您可以通过一种奇怪但标准的语法使用来实现您想要的效果`= 0`，如

```
class T {
    // ...
  public:
    virtual int foo() = 0;
}; 
```

# objective-c - Objective-c UIScrollView 出现在自定义视图上方

> ID：11808898
> 
> 赞同：2
> 
> 时间：2012-08-04T13:03:23.617
> 
> 标签：objective-c, uiscrollview

我有以下问题。我的项目中有 2 个视图，一个是通过编程创建的（并且它具有触摸事件），另一个是通过 xib 文件创建的界面视图。我创造

```
UIScrollView 
```

在我的 ViewController 中并将其设置为视图，然后将我的视图添加为子视图。但我看不到那个程序创建的，只有白屏和界面视图..

我也可以以某种方式禁用 ScrollView 的触摸拦截吗？我想为它添加某种小地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:18:06.743

由于您传递`CGRectZero`给您的视图`initWithFrame:`，它的创建大小为零。您需要传递一个矩形来显示视图，使用`CGRectMake`.

就处理触摸而言，您可以通过拦截在滚动视图的子类中对其进行自定义`touchesShouldBegin:withEvent:inContentView:`。还有一个`delaysContentTouches`标志可让您控制发送到处理代码的事件的时间。

# http - HTTP 范围请求的最佳长度是多少

> ID：11808902
> 
> 赞同：2
> 
> 时间：2012-08-04T13:04:14.510
> 
> 标签：http, http-headers, xmlhttprequest, xmlhttprequest-level2

我有一个 javascript 下载器，它通过多个 HTTP 范围请求获取大文件：

```
xhr.setRequestHeader("Range", "bytes=" + start + "-" + end); 
```

而结束是

```
var end = start + length 
```

范围请求是必须的，因为我需要在文件中获取特定的偏移量（考虑从多个 HTTP 服务器下载）如果下载器即将使用这种方法下载 ~100MB 文件，那么获得良好吞吐量的最佳长度是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T02:48:00.130

恐怕你的问题没有简单的答案。有许多类型的连接，对于每一对客户端-服务器，答案会有所不同，这取决于延迟、带宽、连接质量、断开连接的频率，甚至更复杂的东西，因为在某些情况下并行连接的数量、一个请求中传输的最大大小等可能存在限制。如果您只对某种此类场景感兴趣，例如与附近服务器的快速、良好连接，那么我会说您选择的值并不重要，因为连接开销通常低于十分之一一秒钟。

这还取决于您对响应的处理方式；如果您将其加载到内存中，那么请考虑到您将从不知道的计算机上消耗内存，并且假设没有人会介意为一个段消耗额外的 16Mb 是一个很大的假设。

# php - Slideshow Pro Director 移动 XML

> ID：11808903
> 
> 赞同：1
> 
> 时间：2012-08-04T13:04:18.440
> 
> 标签：php, javascript, xml, gallery, slideshow

显然，在 Slideshow Pro Director 移动版中，除了 Director 本身的输出之外，不能从其他来源获取 XML。

我需要修改哪些脚本以及如何传递我的自定义 XML？

# c - windows下监控C中的文件和目录

> ID：11808907
> 
> 赞同：0
> 
> 时间：2012-08-04T13:05:07.730
> 
> 标签：c, winapi, gcc, file-io, monitor

有一种方法可以监视目录中的更改，例如 FileSystemWatcher 但在 C 中？

注意：我（必须）使用 gcc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T13:21:25.840

请参阅[FindFirstChangeNotification](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364417(v=vs.85).aspx)或[ReadDirectoryChangesW](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465(v=vs.85).aspx)。

# regex - Perl 在定义的模式位置拆分

> ID：11808913
> 
> 赞同：1
> 
> 时间：2012-08-04T13:05:38.753
> 
> 标签：regex, perl, split

有没有办法通过使用 perl split 函数在模式的定义位置打破字符串？例如，通过使用`@array=split(/pattern/, $string)`一个获取拆分数组，`$string`但该数组中缺少由模式定义的部分字符串。是否可以指定要拆分的模式的哪个位置，以便所有初始片段`$string`都包含在 中`@array`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T17:16:52.037

从您的示例来看，您似乎想在某个点拆分，例如 after`tg`和 before `gg`。

因为`split`使用正则表达式，您可以使用*环视断言*。

[在 perlre 的扩展模式](http://perldoc.perl.org/perlre.html#Extended-Patterns)下阅读它们

例如

```
use strict;
use warnings;

my $s = 'aaaatgggccc';

my @fields = split /(?<=tg)(?=gg)/, $s;

print "$_\n" for @fields; 
```

**输出**

```
aaaatg
ggccc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:20:38.963

@Mat 的回答很好，可能是我会使用的。但是，为了完整起见，还有另一种可能适合的方式：

```
my $pattern = qr/MY_PATTERN/;
my @array   = /($pattern)($string)?/g; 
```

`/g`修饰符导致模式重复匹配。是可选的`?`，具体取决于您希望达到的精确效果。

# android - App FC 获取位置后

> ID：11808917
> 
> 赞同：1
> 
> 时间：2012-08-04T13:06:50.913
> 
> 标签：android, gps, location, android-location

应用程序从 GPS 获取位置后关闭！请帮忙！我已经使用 [此](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a)代码来获取位置。但我仍然遇到问题！
**MainActivity.java**

```
package com.locationremind.app;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import com.locationremind.app.MyLocation.LocationResult;

public class LocationReminderActivity extends Activity {
    //Location loc;
    Context context;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        context=this;
        Button btn_ok=(Button) findViewById(R.id.btn_set);
        EditText txt_msg=(EditText) findViewById(R.id.txt_alarm);
        String msg= txt_msg.getText().toString();
        btn_ok.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                LocationResult locationResult = new LocationResult(){
                    @Override
                    public void gotLocation(Location location){
                        //Got the location
                        try {
                            Toast.makeText(context, "Location set to\n Latitude:"+location.getLatitude()+",Longitude:"+location.getLongitude(), Toast.LENGTH_LONG).show();
                            doWithLocation(location);
                        } catch (Exception e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                            Toast.makeText(context, "Error Finding Location"+e.getMessage(), Toast.LENGTH_LONG).show();
                        }
                    }};

                MyLocation myLocation = new MyLocation();
                myLocation.getLocation(context, locationResult);          
                };
        });
            }       
    public boolean doWithLocation(Location location) throws NullPointerException
    {
        if(location==null)
            return false;
        TextView tv_lat= (TextView) findViewById(R.id.tv_lat);
        tv_lat.setVisibility(View.VISIBLE);
        TextView tv_lat_value=(TextView) findViewById(R.id.tv_lat_value);
        tv_lat_value.setText(Double.toString(location.getLatitude()));
        tv_lat_value.setVisibility(View.VISIBLE);
        TextView tv_long=(TextView) findViewById(R.id.tv_long);
        tv_long.setVisibility(View.VISIBLE);
        TextView tv_long_value=(TextView) findViewById(R.id.tv_long_value);
        tv_long_value.setText(Double.toString(location.getLongitude()));
        tv_long_value.setVisibility(View.VISIBLE);
        //loc.set(location);
        return true;
    }
} 
```

**我的位置.java**

```
package com.locationremind.app;

import java.util.Timer;
import java.util.TimerTask;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.widget.Toast;

public class MyLocation {
    Timer timer1;
    LocationManager lm;
    LocationResult locationResult;
    boolean gps_enabled=false;
    boolean network_enabled=false;
    Context con;
    public boolean getLocation(Context context, LocationResult result)
    {   con=context;
        //I use LocationResult callback class to pass location value from MyLocation to user code.
        locationResult=result;
        if(lm==null)
            lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        //exceptions will be thrown if provider is not permitted.
        try{gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);}catch(Exception ex){ex.printStackTrace();}
        try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){ex.printStackTrace();}

        //don't start listeners if no provider is enabled
        if(!gps_enabled && !network_enabled)
            return false;

        if(gps_enabled)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
        //if(network_enabled)
            //lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
        timer1=new Timer();
        timer1.schedule(new GetLastLocation(), 60*2*1000);
        return true;
    }

    LocationListener locationListenerGps = new LocationListener() {
        @Override
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            //lm.removeUpdates(locationListenerNetwork);
        }
        @Override
        public void onProviderDisabled(String provider) {
            Toast.makeText(con.getApplicationContext(), "Please enable GPS in Settings!", Toast.LENGTH_LONG).show();
            Message msg = handler.obtainMessage();
             msg.arg1 = 1;
             handler.sendMessage(msg);
        }
        @Override
        public void onProviderEnabled(String provider) {}
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };
    private final Handler handler = new Handler() {
         @Override
        public void handleMessage(Message msg) {
              if(msg.arg1 == 1){
                    // Without this in certain cases application will show ANR
                        AlertDialog.Builder builder = new AlertDialog.Builder(con.getApplicationContext());
                        builder.setMessage("Your GPS is disabled! Would you like to enable it?").setCancelable(false).setPositiveButton("Enable GPS", new DialogInterface.OnClickListener() {
                             @Override
                            public void onClick(DialogInterface dialog, int id) {
                                  Intent gpsOptionsIntent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                                  con.startActivity(gpsOptionsIntent);
                              }
                         });
                         builder.setNegativeButton("Do nothing", new DialogInterface.OnClickListener() {
                              @Override
                            public void onClick(DialogInterface dialog, int id) {
                                   dialog.cancel();
                              }
                         });
                         AlertDialog alert = builder.create();
                         alert.show();
                   }

           }
    };

    class GetLastLocation extends TimerTask {
        @Override
        public void run() {
             lm.removeUpdates(locationListenerGps);
             //lm.removeUpdates(locationListenerNetwork);

             Location  gps_loc=null;
             if(gps_enabled)
                 gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
             //if(network_enabled)
               //  net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

             //if there are both values use the latest one
             if(gps_loc!=null){
                 //if(gps_loc.getTime()>net_loc.getTime())
                     locationResult.gotLocation(gps_loc);
                 //else
                     //locationResult.gotLocation(net_loc);
                 return;
             }

             //if(gps_loc!=null){
               //  locationResult.gotLocation(gps_loc);
                 //return;
             //}
             /*if(net_loc!=null){
                 locationResult.gotLocation(net_loc);
                 return;
             }*/
             //locationResult.gotLocation(null);
        }

    }

    public static abstract class LocationResult{
        public abstract void gotLocation(Location location);
    }
} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.locationremind.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".LocationReminderActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".NotificationClass"
            android:label="YOU ARE IN PROXIMITY AREA!!!"
            android:exported="false">
            <intent-filter>
                <action android:name="com.locationsensor.notif"/>
                <category android:name="android.intent.category.DEFAULT"/> 
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

请帮忙。我已经在真正的手机上试过了，我在这里发帖。我不想使用网络位置。有什么建议么？

# javascript - JavaScript 中的嵌套 for...in 语句

> ID：11808919
> 
> 赞同：3
> 
> 时间：2012-08-04T13:06:59.570
> 
> 标签：javascript

我正在尝试在 Codecademy 中学习 JavaScript，其中简要提到的一件事是“for in”循环。我在一些练习中使用过它们，但在这种情况下，我无法让它发挥作用。我可以用 for (i = blah; etc) 做到这一点，但我想知道这有什么问题以及是否有办法解决它：

```
//Your three dimensional array from the last exercise probably
//looked something like this:
var hands = [];
hands[0] = [ [3,"H"], ["A","S"], [1,"D"], ["J","H"], ["Q","D"] ];
hands[1] = [ [9,"C"], [6,"C"], ["K","H"], [3,"C"], ["K","H"] ];

//Loop over every dimension in the array, logging out the suit and rank
//of each card in both hands
//1\. loop over each hand
for (var hand in hands) {
//2\. loop over each card array in each hand
    for (var card in hand) {
        //3\. loop over each rank/suit array for each card in each hand
        for (var prop in card) {
            //4\. log the value of the rank/suit array item
            console.log(card[prop]);
        }
    }
} 
```

输出是 0 0 0，而不是数字和花色。我尝试在第一个和第二个循环之后放置 console.log() ，我注意到它在第一个循环中正常工作，但在第二个循环中没有。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T13:12:10.677

暂时忽略这个`for-in`问题，你的内部循环应该是这样的......

```
for (var hand in hands) {
    for (var card in hands[hand]) {
        for (var prop in hands[hand][card]) {
            console.log(hands[hand][card][prop]);
        }
    }
} 
```

请注意，每个内部循环都需要显式引用其外部循环的当前值。您正在迭代键（之前的变量`in`）。

* * *

要正确处理数组，您几乎应该总是使用`for`循环而不是`for-in`.

```
for (var i = 0; i < hands.length; i++) {
    for (var j = 0; j < hands[i].length; j++) {
        for (var k = 0; k < hands[i][j].length; k++) {
            console.log(hands[i][j][k]);
        }
    }
} 
```

这有几个原因，您可以在 StackOverflow 上找到这些原因。

* * *

为了增加代码的清晰度，您可以将当前项目缓存在变量中......

```
for (var i = 0; i < hands.length; i++) {
    var hand = hands[i]
    for (var j = 0; j < hand.length; j++) {
        var cards = hand[j];
        for (var k = 0; k < cards.length; k++) {
            console.log(cards[k]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T13:14:01.753

您不应该`for..in`在数组上使用循环，因为它不仅循环遍历数组的索引成员，还循环遍历对象的所有属性。相反，您可以使用“传统”`for`循环或 ECMAScript 5`.forEach`

```
var hand, card, prop, h, c, p;

for (h = 0; h < hands.length; ++h) {
    hand = hands[h];
    for (c = 0; c < hand.length; ++c) {
        card = hand[c];
        for (p = 0; p < card.length; ++p) {
            prop = card[p];
            console.log(prop);
        }
    }
} 
```

有更短的方法可以完成上述操作，但这是一种基本且易读的方法。

# linux - 内部调用 Linux 命令并将输出保存到文件的 Perl 脚本？

> ID：11808921
> 
> 赞同：-6
> 
> 时间：2012-08-04T13:07:30.687
> 
> 标签：linux, perl

我正在尝试编写一个内部调用“ls”并将输出保存到文件的 Perl 脚本。在屏幕上分页显示文件，允许用户按一个键转到下一页？

有任何想法吗？谢谢

到目前为止，我有这个：

```
#!/usr/bin/perl
$command = system("ls /bin/usr/account\ users/"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T13:15:26.823

将命令的输出保存到`$command`想要

```
my $command = `ps aux`; 
```

或者，也许更好，

```
my @command = `ps aux`; 
```

后者会将命令输出的每一行存储为列表的单独元素。之后，您可以随心所欲地`$command`进行操作`@command`——显示其内容，将其内容写入文件，显示和写入，随心所欲。

要写入文件，

```
my $filename = "MY_FILENAME";
# ...
open FILE, '>>', $filename;
print FILE @command;
close FILE; 
```

如果您更喜欢覆盖文件而不是追加文件，则可以使用`'>'`而不是。`'>>'`您可以使用任何单词来代替`FILE`，尽管在任何情况下将这样的单词全部大写是惯例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T17:36:03.363

听起来您正在尝试重写`ls | more`. 你真的需要这样做吗？

下面的程序打开文件`temp.txt`进行写入。然后它使用`qx`（相当于反引号）从命令获取输出并将其写入文件。

然后重新打开同一个文件进行读取，一次将二十行发送到`STDOUT`.

为了允许来自键盘的字符 IO，读取模式设置为 3，`ReadKey`并被调用以获取下一个按键。这些调用需要在程序顶部的语句中`Term::ReadKey`指定模块。`use`它是一个核心模块，因此不需要安装

```
use strict;
use warnings;

use Term::ReadKey;

open my $fh, '>', 'temp.txt' or die $!;
print $fh qx(ls /bin/usr/account/users/);

open $fh, '<', 'temp.txt' or die $!;

ReadMode(3);

my $n = 20;
while (<$fh>) {

  print;

  if (--$n == 0) {
    print "-- More  --";
    ReadKey(0);
    $n += 20;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T13:17:39.983

您可以查看使用`system`以下命令：

```
ps aux >/tmp/myfile 
```

或者，如果您想在 Perl 中处理它，例如：

```
open (INSTREAM, "ps aux |"); 
```

然后你可以在任何其他“文件”中阅读它：

```
while (<INSTREAM>) { ... } 
```

# mongodb - mongodb：对动态数字的数字字段进行排序

> ID：11808925
> 
> 赞同：1
> 
> 时间：2012-08-04T13:07:54.843
> 
> 标签：mongodb, sorting

我知道目前不可能使用 mongodb 进行动态排序。虽然我有一个任务需要解决：

我有一个包含 > 1 个 Mio 文档的集合。每个文档都包含一个名为“group_id”的字段，其中包含一个介于 1 和 200 之间的数字。现在，在此过程中，我想查找（）所有符合特定条件的文档，并以所有具有给定 group_id 的文档的方式排序首先，然后是所有其他人。所有给定的数字（1-200）都可以被质疑。

如何根据“group_id”预先计算一个字段，以便在运行时获得所需的排序顺序？那可能吗？我想避免有一个包含 200 个成员的数组（199 = false 和 1 = true），因为这也意味着 200 个索引。

对此有什么想法吗？提前致谢

# java - 如何在没有额外依赖的情况下从不同的包中调用 api 方法？

> ID：11808940
> 
> 赞同：0
> 
> 时间：2012-08-04T13:09:58.930
> 
> 标签：java, android, design-patterns, modularity, api-design

**假设：**
我有一个 Java/Android 模块化库，可以这样设置：

```
package com.mycorp.app.sample.integration;
public class ModuleConnector {

    public static final LogcatLogger   LOGCAT_LOGGER              
        = new LogcatLoggerImpl.Configurator("TEST")
              .verbosity(LogcatLoggerImpl.Verbosity.VERBOSE)
              .replace("ApiDesign", "Design")
              .replace("Sample", "Sample")
              .createInstance();

    public static final JsonWebservice GET_INFORMATION_WEBSERVICE
        = new JsonWebserviceImpl.Configurator()
              .logger(LOGCAT_LOGGER)
              .enableCaching(true)
              .endpoint("http://test.com")
              .createInstance();
} 
```

**问题：**
当前依赖关系图显示： ![没有依赖性。 没关系](../Images/85e0f5f27fa0ce1fa37f17262f193111.png)

添加此代码后显示如下

```
package com.mycorp.app.sample.global;
public class G extends Application {

    static {
        ModuleConnector.GET_INFORMATION_WEBSERVICE.request(null);
    }
} 
```

我想防止标记依赖： ![问题](../Images/15f8ed79e972bbdebb7dc9a5a574eae1.png)

**笔记：**

*   `ModuleConnector`在`com.mycorp.app.sample.integration`包装中
*   `com.mycorp.app.sample.global`可以是每个客户端包。

*   我想用来`com.mycorp.app.sample.integration`访问模块api

*   我有很多 api 方法，所以我更喜欢不使用 **命令/策略**模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:18:14.800

这是一个谜吗？您的代码没有显示依赖项是什么。是编译时依赖还是运行时依赖？什么样的分析产生了你的图表？

使用您提供的信息，无法判断依赖是什么以及如何防止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:57:55.450

场景不是很清楚......但我试图给出一些想法

也许您想删除这种直接依赖关系，以便您可以将您的 lib 作为单独的 jar 文件提供...在这种情况下，您可以在“集成”模块中放置一些包装器

应用程序 -> 集成/插件模块 -> 您的库模块

就像，当你调用 ModuleConnector 类时，你需要用静态方法初始化它，所以你的开发人员必须知道，“在使用 ModuleConnector 之前，我必须用静态方法初始化它......我不能忘记”。 ...如果想删除这种依赖，那么你可以提供

```
 package com.mycorp.app.sample.integration;

  Class ApplicationModuleConnector  {
    ModuleConnector connector;
    static {
       //do something
    }

    //this method will be called by you developer, he need not to bother about init() of ModuleConnector
    public invokeWebservice() {}
  } 
```

# mysql - 每天跟踪数据库表的使用情况

> ID：11808941
> 
> 赞同：1
> 
> 时间：2012-08-04T13:10:30.210
> 
> 标签：mysql, database, analytics, theory

我的数据库中有大约 100,000 个艺术家/乐队。我希望能够跟踪每个乐队的观看次数，例如，如果我正在查看 Pearl Jam 指标，我希望能够在 2012 年 1 月 1 日看到他们在 2012 年 1 月 2 日看到了 10,000 次观看观看了 12,000 次……等等。

捕获这些数据的最佳方法是什么？我不是在寻找代码帮助，而是在寻找理论/建议。

我正在考虑执行以下操作：

1.  艺术家的命中表。每次查看 Pearl Jam（或任何其他艺术家）时，插入一个新行来跟踪此视图（包括艺术家 ID 和时间戳）。
2.  在过去 24 小时内对这些行运行每晚脚本。按艺术家 ID 分组和计数。将此计数插入到该特定日期的每位艺术家的新表中。
3.  截断这个命中表，使其不会变得非常大。
4.  选择艺术家 ID 以获取视图。

这是正确的思路吗？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:37:18.113

我是开源分析平台[Countly](http://count.ly)的开发人员，想与您分享我的经验。

为艺术家的每个视图插入一个新行并每天对这些结果进行 map-reduce 肯定是一个解决方案（它实际上是旧分析解决方案使用的解决方案），但您可以选择更好的方法。然而，这种方法需要使用面向文档的数据库，就像[MongoDB](http://www.mongodb.org/)一样。

当对艺术家有看法时，您将对相关字段进行增量，就像；

```
db.views.update({'artist_id': 1}, {
    '$inc': {
        "views": 1,
        "2012.views": 1,
        "2012.8.views": 1,
        "2012.8.4.views": 1
    }
}) 
```

您将在视图集合中获得一个文档，如下所示；

```
{
    "artist_id": 1,
    "2012": {
        "8": {
            "4": {
                "views": 1 /* today */
            },
            "views": 1 /* august */
        },
        "views": 1 /* 2012 */
    },
    "views": 1 /* all time */
} 
```

该解决方案不需要批处理，实际上是实时的。如果您想查看 8 月的所有统计数据，只需获取如下结果，您将获得 8 月所有日期的数据以及 8 月本身的总观看次数。

```
db.views.findOne({"artist_id": 1}, {"2012.8": 1}) 
```

或者，如果您只需要 2012 年的总观看次数；

```
db.views.findOne({"artist_id": 1}, {"2012.views": 1}) 
```

假设您使用的是 LAMP 堆栈，您可以查看[MongoDB PHP 驱动程序。](https://github.com/mongodb/mongo-php-driver/)

# javascript - [未定义] 和 [,] 有什么区别？

> ID：11808946
> 
> 赞同：8
> 
> 时间：2012-08-04T13:11:28.263
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 中的“未定义 x 1”是什么？](https://stackoverflow.com/questions/10683773/what-is-undefined-x-1-in-javascript)

在 Chrome 21 中，`[,]`输入到控制台输出

> [未定义 x 1]

和喂养`[undefined]`输出

> [不明确的]

`[undefined]`和 和有什么不一样`[undefined x 1]`？

符号是什么`[undefined x 1]`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T13:23:30.253

`[,]`是一个[稀疏数组](https://stackoverflow.com/q/1510778/1048572)。它的长度为`1`，但没有值 ( `0 in [,] === false`)。也可以写成`new Array(1)`。

`[undefined]`是一个长度数组，`1`其值为`undefined`index `0`。

访问属性“ `0`”时，两者都将返回`undefined`- 第一个是因为该属性未定义，第二个是因为该值是“未定义”。但是，数组不同，它们[在控制台中的输出](https://stackoverflow.com/questions/10683773/what-is-undefined-x-1-in-javascript)也不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T13:26:19.863

`[,]`创建一个长度为 1 且没有索引的数组。

`[undefined]`创建一个长度为 1 的数组，其`undefined`值为 index `0`。

Chrome`undefined × x`用于没有顺序索引的稀疏数组：

```
var a = [];

a[8] = void 0; //set the 8th index to undefined, this will make the array's length to be 9 as specified. The array is sparse
console.log(a) //Logs undefined × 8, undefined, which means there are 8 missing indices and then a value `undefined` 
```

如果要`.forEach`在稀疏数组上使用，它会跳过不存在的索引。

```
a.forEach(function() {
    console.log(true); //Only logs one true even though the array's length is 9
}); 
```

就好像你做一个正常`.length`的循环一样：

```
for (var i = 0; i < a.length; ++i) {
    console.log(true); //will of course log 9 times because it's only .length based
} 
```

如果您希望`.forEach`行为与非标准实现相同，则存在一个问题。

```
new Array(50).forEach( function() {
    //Not called, the array doesn't have any indices
});

$.each( new Array(50), function() {
    //Typical custom implementation calls this 50 times
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T13:24:42.760

在 Chrome 21 上，这对我来说又是奇怪的`[]`输出。`[]`

无论如何`[a, b, c, ...]`是 Javascript 的数组表示法，所以你基本上是在定义一个没有值的数组。

然而，结束`,`是可以接受的，以使数组生成更容易。所以 Chrome 告诉你的是数组中有一个未定义的值。有关示例，请参见代码。

```
[,,]
> [undefined x2]
[1,2,]
> [1, 2]
[1,2,,]
> [1, 2, undefined × 1]
[1,2,,,]
> [1, 2, undefined × 2]
[1,2,,3,4,,,6]
> [1, 2, undefined × 1, 3, 4, undefined × 2, 6] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-04T13:16:39.853

看起来这只是显示重复的“未定义”值的一种简写方式。例如：

```
> [,,,]
  [ undefined x 3 ] 
```

但是`[]`根本不一样`[undefined]`。如果我是你，我会仔细检查。

# ruby-on-rails - 通过字符串获取 ActiveRecord 对象的属性

> ID：11808949
> 
> 赞同：41
> 
> 时间：2012-08-04T13:11:55.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这可能是一件非常简单的事情，但找不到解决方案。

我有一个 ActiveRecord 对象，并希望获得这样的属性：

```
attribute_name = "name"
user = User.find(1)
user.get_attribute_by_name(attribute_name) => "John" 
```

谢谢！

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-04T13:14:19.387

所有这些都应该起作用：

```
user[attribute_name]
user.read_attribute(attribute_name)
user.send(attribute_name) 
```

我个人不会`send`在这种情况下使用。有空时，最好`public_send`发送

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-19T15:01:43.153

您可以使用其中一个`[]`或`read_attribute()`，但[它们不是等效的](https://github.com/bbatsov/rails-style-guide/issues/155)。更安全的访问方法是使用[[] 方法](http://apidock.com/rails/ActiveRecord/AttributeMethods/%5B%5D)`ActiveModel::MissingAttributeError`方法，因为如果属性不存在，它将引发错误。如果属性不存在，则 read_attribute[方法](http://apidock.com/rails/ActiveRecord/AttributeMethods/read_attribute)返回。`nil`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-09-11T10:32:56.003

在 Rails 5 中，可以`attribute_name = "name"`正常工作

# ruby-on-rails - mongoid 将 has_many 关系转换为 embeds_many

> ID：11808953
> 
> 赞同：2
> 
> 时间：2012-08-04T13:12:14.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, embedded-resource, mongoid3

不久前，我犯了早期的新手 mongodb 错误，并在我应该嵌入它们的时候创建了很多 has_many 关系。

我的问题是我现在如何将我的记录从多态 has_many 场景转换为 embeds_many？

```
#Place.rb
has_many :images, as: :imageable, dependent: :destroy, autosave: true

#Image.rb
belongs_to :imageable, polymorphic: true 
```

到 =>

```
#Place.rb
embeds_many :images, as: :imageable

#Image.rb
embedded_in :imageable, polymorphic: true 
```

我通常会遍历所有记录并这样做，但我想命名将是一个问题。所以我不确定如何在不创建临时模型的情况下完成这一任务，但我希望其他一些人也犯了同样的错误并且可能有一个温和的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T11:10:51.540

对于像我这样的人，以后再看这个问题！

您可以通过将模型从 has_many 更改为 embeds_many（在 ruby​​ 基本代码中）来做到这一点，然后使用我为自己编写的这个 javascript：

```
// Parent is parent model name without 's' and model is related model name without 's',
// if you have something with plural name this function don't work
// example : ref2em('user', 'post')
var ref2em = function(parent, model) {
  var query, update;
  // Search through all instances
  db[parent+'s'].find().forEach(function(ref) {
    query = {};
    // Get all related models with parent_id
    query[parent+"_id"] = ref._id;
    db[model+'s'].find(query).forEach(function(em) {
      // Update parent with $push operator (add model to parent's models attribute)
      update = { $push: {} };
      update['$push'][model+'s'] = em;
      db[parent+'s'].update({_id: ref._id}, update);
    });
  });
} 
```

然后使用这样的东西（将用户 has_many 帖子更新为用户 embeds_many 帖子）：

```
ref2em('user', 'post') 
```

（所有这些功能都只能在 mongo 控制台中使用，请确保您有备份并且您知道自己在做什么，阅读我写的评论并最后删除旧集合）。

没有保证，我只是分享我所做的（也许对你不起作用）。

# objective-c - 如何在objective-c中创建两个模型类的包装类

> ID：11808954
> 
> 赞同：2
> 
> 时间：2012-08-04T13:12:33.520
> 
> 标签：objective-c, ios, core-data, nsmanagedobject

我正在开发一个应用程序，其中有两个非常相似的模型类。我想在一个视图控制器中使用这两个类，该布局基于模型类的属性。问题是我目前有很多 if 语句来检查它是哪个类。

例子：

```
- (UIView *)setUpViewForObject:(id)object
{

    // Check if it is a Post or Event object
    Post *post;
    Event *event;
    if ([object class] == [Event class]) {
        event = (id)object;
    } else if ([object class] == [Post class]) {
        post = (id)object;
    }

    if (post) {
        // Do stuff
        // ie:
        self.customUiView.textField.text = post.text;
    } else if (event) {
        // Do similar stuff
        // ie:
        self.customUiView.textField.text = event.text; 
    }
} 
```

这个解决方案似乎很多余，我在几个地方做了。因此，我想知道是否可以创建两个 NSManagedObject 类的包装类。我使用 CoreData 并从 xCode 生成模型，所以我不会使用所有这些 if 语句。

就像是：

```
@interface News : NSManagedObject
[...]
@property (nonatomic, retain) NSString * text;
[...]

@interface Event : NSManagedObject
[...]
@property (nonatomic, retain) NSString * text;
[...] 
```

是否可以创建这两个 NSManagedObject 类的包装类，可能使用枚举。我也希望这些对象是可更新的、可删除的等。当时我在想我也许可以使用 Enum 或类似的东西来创建一个抽象类，但我不知道这样的类的外观、工作和使用方式。

如果这是可能的，任何建议，在这种情况下，像这样的包装类将如何看起来将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:39:08.877

Core Data 支持抽象超类的概念。所以你用一个属性来定义它，比如“标签”，它可以区分这两个类。然后 News 和 Event 都将该类作为它们的超类。这是与 Core Data 一起使用的一种非常常见的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T13:39:28.507

尝试这样做：

```
//in NewsEventRootObject.h
@interface NewsEventRootObject:NSManagedObject //root object for these two classes

[...]

@property (nonatomic,retain) NSString *text; //similar fields in here

-(void) getSomeValue;

//in News.h
@interface News : NewsEventRootObject

[...]

-(void) getNews;

//in Event.h
@interface Event : NewsEventRootObject

[...]

-(void) getEvent;

//in your "handler".m

- (UIView *)setUpViewForObject:(NewsEventRootObject *) object
{ 
    //you can access similar fields and methods without if/else statements
    self.customUiView.textField.text = object.text;

    SomeValue *someValue=[object getSomeValue];

    //but for class-specific you should make a check
    if ([object respondsToSelector:@selector(getEvent)]) {

    }

    if ([object respondsToSelector:@selector(getNews)]) {

    }

} 
```

真的，永远不要通过 == 检查类，使用 isKindOfClass 语句

# wpf - 在 XAML 中为带有图像的按钮添加鼠标悬停效果

> ID：11808955
> 
> 赞同：2
> 
> 时间：2012-08-04T13:12:47.697
> 
> 标签：wpf, xaml, button, styles

我有一个带有图像的按钮，如下所示：

```
<Button Width="22" Height="22" Command="{Binding PreviousCommand}">                               
  <Button.Template>
    <ControlTemplate>
      <Image Source="C:\Users\abcdef\Desktop\Slide-To-Left-Arrow-24.png"></Image>                            
    </ControlTemplate>
  </Button.Template>
  <Button.InputBindings>
    <KeyBinding Key="Up" Command="{Binding PreviousCommand}" Modifiers="Alt+Shift" />
  </Button.InputBindings>
</Button> 
```

我想应用一些鼠标悬停效果来识别按钮是可点击/可聚焦的。我尝试按如下方式添加触发器，但它不起作用：

```
<ControlTemplate.Triggers>
  <Trigger Property="IsMouseOver" Value="True"> 
    <Setter Property="Background" Value="Black" /> 
  </Trigger>
</ControlTemplate.Triggers> 
```

它不工作。我需要做什么？请帮帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T13:28:02.540

您的控制模板此时*仅*包含一个图像，因此您无法更改背景（通过触发器）。如果您想添加背景更改，则需要扩展`ControlTemplate`一点。尝试这样的事情：

```
<Button.Template>
  <ControlTemplate>
    <Grid x:Name="bg">
      <Image Margin="4" Source="C:\Users\dheeraj.dilip.awale\Desktop\Slide-To-Left-Arrow-24.png"></Image>
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="IsMouseOver" Value="True"> 
           <Setter Target="bg" Property="Background" Value="Black" /> 
        </Trigger>
     </ControlTemplate.Triggers>                            
  </ControlTemplate>
</Button.Template> 
```

This is just a *very simple* example of how you can utilize the trigger you've shown above. All this does is add a `Grid` under the image and a `Margin` to the image so that part of the `Grid` is visible. It then uses the `Target` property of the `Setter` to assign the `Background` of the `Grid` when the user hovers over the button. You can certainly do much more with your `ControlTemplate` to provide other types of visual cues, but hopefully this will get you started.

# android - android listview在textfilter时获取列表项的正确位置

> ID：11808959
> 
> 赞同：0
> 
> 时间：2012-08-04T13:13:34.567
> 
> 标签：android, listview, position

我对列表视图有疑问。我有一个启用了文本过滤器的列表视图。当我单击没有 textfilter 的列表项时，我得到了该位置，并将其提供给下一个活动，该活动根据该位置显示正确的文本。但是当我使用文本过滤器并单击一个项目时，下一个活动会向我显示错误的文本，可能是因为列表项的位置发生了变化。有人有解决这个问题的方法吗，例如不使用位置而是列表项的另一个引用？我到处寻找，但找不到解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:24:53.680

`position`您可以直接从 listAdapter获取正确的项目。它仅包含列表中显示的当前项目。

```
listAdapter .getItem(position); 
```

参考：[onItemClick 在可见页面上给出项目的索引/位置...不是列表中项目的实际索引 ..启用 setTextFilterEnabled 时出现问题 .. android](https://stackoverflow.com/questions/2521775/onitemclick-gives-index-position-of-item-on-visible-page-not-actual-index-o?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:42:12.337

如果有什么问题`position`，你可以从`id`改为`position`。当列表被过滤时，`position`in[`onClick`](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html#onItemClick%28android.widget.AdapterView%3C?%3E,%20android.view.View,%20int,%20long%29)事件是过滤列表中的新位置而不是旧位置。正常，`id`是您的项目在输入数据中的顺序

# jquery - 显示两个表格行

> ID：11808960
> 
> 赞同：-1
> 
> 时间：2012-08-04T13:13:40.600
> 
> 标签：jquery, toggle

我正在尝试使用 jquery 显示/隐藏表的下两行。下面的代码当前显示了带有类 - quest_image 的 tr，但没有类 quest_text。

```
<table id="my_table">
<tr>
    <td><img alt="Show/Hide" src="img.gif" class="ShowHide"></td>
    <td>text 1</td>
</tr>
<tr class="quest_image">
    <td colspan="2">hidden text 1</td>
</tr>
<tr class="quest_text">
    <td colspan="2">hidden text 3</td>
</tr>
<tr>
    <td><img alt="Show/Hide" src="img.gif" class="ShowHide"></td>
    <td>text 2</td>
</tr>
<tr class="quest_image">
    <td colspan="2">hidden text 4</td>
</tr>
<tr class="quest_text">
    <td colspan="2">hidden text 2</td>
</tr>

</table>
<script type="text/javascript" src="../jquery/jquery/jquery-1.7.2.js"></script>
<script type="text/javascript">
// bind click event ONCE to the table
// not to every .ShowHide
$('#my_table').click(function(event){

    // find where the click originated from
    var trigger = event.target;

    // if it has a class of "ShowHide"
    // THEN toggle the next row
    if(trigger.className == 'ShowHide')
    {
        // toggle away
        $(trigger).closest('tr').next('.quest_text').toggle();
        $(trigger).closest('tr').next('.quest_image').toggle();
    }
});
</script> 
```

演示：http: [//jsfiddle.net/7TzJL/](http://jsfiddle.net/7TzJL/)

为什么一个切换有效，而另一个无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:32:18.513

`next()`如果选择器匹配，则返回紧接的下一个元素。它不会选择具有匹配选择器的最接近的元素。您需要使用`nextAll()`并将其限制在第一场比赛中。

此外，jQuery 1.7 具有`.on()`因此您可以删除复杂的类检查并将事件直接绑定到类。不要忘记将所有内容包装在 document.ready 事件中。

```
$( function() {
    $('#my_table').on( 'click', '.ShowHide', function() {
        var $trigger = $( this );
        $trigger.closest( 'tr' ).nextAll('.quest_text:first').toggle();
        $trigger.closest( 'tr' ).nextAll('.quest_image:first').toggle();
    });
}); 
```

演示：http: [//jsfiddle.net/MaPaX/](http://jsfiddle.net/MaPaX/)

# scala - 类型 T 和 [T] 之间的 scala 差异

> ID：11808966
> 
> 赞同：4
> 
> 时间：2012-08-04T13:15:05.953
> 
> 标签：scala, generics

> **可能重复：**
> [Scala：抽象类型与泛型](https://stackoverflow.com/questions/1154571/scala-abstract-types-vs-generics)

我理解它的方式，以下两个类定义是相同的。那么除了语法之外还有什么区别？

```
abstract class Container[T] {}
class IntContainer extends Container[Int] {}

abstract class Container2 { type T }
class IntContainer2 extends Container2 { type T = Int } 
```

当我查看反编译的字节码时，我注意到第一组仍然具有泛型（尽管 IntContainer 被定义为具有类型 Object: `public class IntContainer extends Container<Object>`）。第二组没有这样的信息。我以为所有泛型类型都被删除了......

PS 使用 Scala 2.10-M5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T16:19:28.633

抽象类型和泛型之间有一个明显的区别，我们总是需要记住：

*   如果一个类作为泛型类型，同一个类的多个实例可能有不同的泛型类型
*   如果将具体类作为抽象类型，对于给定的 Scala 类，该（确切地说）类的所有实例都将具有相同的抽象类型。

您现在应该清楚这两者可以以不同的方式使用：

*   泛型主要是为必须充当容器的类或应在给定目标上执行某些操作的业务类设计的。从这个意义上说，泛型参数允许您在编译时检查类型安全
*   抽象类型主要用于定义更高级别的行为或属性，并在子类化时对其进行细化。泛型与继承关系不大

如果你换个角度看，虽然将 GenericClass[T] 和 T 作为参数传递给方法是一个常见的特性，但设计一个接收 ClassWithAbstractTypeT 和 classWithAbstractType.T 的方法要难得多。实际上，除非*路径相关的方法*处于活动状态，否则禁止在 Scala 2.9 中编写类似的方法（如果我没记错的话，在 2.10 中默认情况下是活动的）

# c# - 数据库锁定

> ID：11808969
> 
> 赞同：0
> 
> 时间：2012-08-04T13:16:15.750
> 
> 标签：c#, locking, deadlock

我想知道如何在数据库驱动的应用程序中实现锁定的（更简单）方法（例如，在 c# 中，我指的是桌面应用程序或 Web 应用程序都连接到处理数据库操作的 WCF/Web 服务）。

我从这篇 wiki 文章[http://en.wikipedia.org/wiki/Lock_(computer_science](http://en.wikipedia.org/wiki/Lock_(computer_science) ) 了解到我可以进行乐观锁定，即检查自上次阅读后是否进行了更新并相应地抛出错误并要求用户重新阅读数据并尝试再次更新。但是如果有更多的用户同时进行更新，缺点是可能会有很多更新试验和错误。

作为结论，我认为乐观锁定是一种选择。是否还有其他实施起来并不复杂的选项？我认为锁定和互斥锁是一种选择，但我想不出一种方法来实现“如果”条件来查看哪个记录被阻止，这样就不会导致死锁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:25:15.443

避免死锁就是以正确的顺序获取锁。例如，在修改某个特定用户的数据之前，您可以 UPDLOCK 该用户，以便没有并发事务可以同时修改该用户。

这只是一个例子。你需要找到一个很可能以一致的顺序获取锁的方案。

对于读取，您可以使用快照隔离。

无论如何，许多应用程序只在特定位置出现死锁。也许您可以忽略该问题并通过更改少量代码来修复生产中的任何虚假死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:36:56.850

锁定数据的一种简单方法是在数据库上创建一个简单的表，其中包含以下列：

第 1 列：表名称 第 2 列：行 id 第 3 列：锁定（布尔值）毕竟您的软件可以读取此表以了解正在修改的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:23:17.657

您没有提及您使用或正在考虑的数据库产品。在 PostgreSQL 中（如果您可以选择），有一种技术类似于乐观并发控制 (OCC)，但用于`SERIALIZABLE`事务的回滚较少。它被称为可序列化快照隔离 (SSI)。基本上，OCC 基于单个读写反依赖取消事务，而 SSI 仅在存在多个读写反依赖的模式时才会取消事务，研究表明，如果不可序列化将始终存在效果是可能的。

这是一项新技术，于 2008 年首次发表在一篇学术论文中，并首次出现在 2011 年发布的 PostgreSQL 9.1 的公共生产数据库中。

显然还有很多其他方法可以解决这个问题，但您对 OCC 的兴趣似乎表明这可能对您有吸引力。面对并发事务时保持完整性的每种技术都将涉及阻塞、事务回滚或两者兼而有之。“传统的”严格两相锁定 (S2PL) 技术更倾向于阻塞，而 OCC 和 SSI 的阻塞最少（因此并发性更高），但在某些工作负载中可能有更多的回滚。使用的最佳技术绝对取决于工作量。

[您可以在 SERIALIZABLE 事务隔离级别的 PostgreSQL 文档、](http://www.postgresql.org/docs/current/interactive/transaction-iso.html#XACT-SERIALIZABLE)带有[一些示例的 Wiki 页面、](http://wiki.postgresql.org/wiki/SSI) ACM [SIGMOD 2008 的初始](http://dl.acm.org/citation.cfm?id=1620587)论文、[Michael J. Cahill 的博士论文](http://hdl.handle.net/2123/5353)或 Dan RK Ports 和我本人的论文中阅读更多关于 SSI的信息已被接受在 VLDB 2012 上展示，并且应该很快由 VLDB 发布。

# java - 无法在具有整数主键字段的表中插入记录

> ID：11808970
> 
> 赞同：0
> 
> 时间：2012-08-04T13:16:18.043
> 
> 标签：java, jdbc, sqlite, sqlexception

我在 SQLite 数据库中有一个表，其 ID 字段为`integer primary key`（因此`autoincrement`ed ）。我有以下查询在表中插入记录。

```
INSERT INTO users(fname, lname, email, password) VALUES('Foo','Bar','foo@bar.com','12345'); 
```

而第一个字段`u_id`被省略。这个查询在终端上运行良好，我可以插入记录，但是从 Java 中这样做会抛出`SQLException`message `users.u_id may not be NULL`。我正在使用`PreparedStatement`以下查询：

```
INSERT INTO users(fname, lname, email, password) VALUES(?,?,?,?) 
```

我在这里做错了什么？

**注意：** 我使用的是 SQLite 3，带有 JDBC 驱动程序[SQLiteJDBC](http://webcache.googleusercontent.com/search?q=cache:sm3IEtsiaxsJ:www.zentus.com/sqlitejdbc/%20&cd=4&hl=en&ct=clnk&gl=in)（该站点已关闭，但我之前确实`jar`下载了该文件）。跟司机有关系吗？

## 更新：

这是抛出异常的堆栈跟踪：

```
java.sql.SQLException: users.u_id may not be NULL
at org.sqlite.DB.execute(DB.java:275)
at org.sqlite.DB.executeUpdate(DB.java:281)
at org.sqlite.PrepStmt.executeUpdate(PrepStmt.java:77)
at com.paperfood.DatabaseManager.insertUser(DatabaseManager.java:64)
at com.paperfood.controller.RegisterUser.doPost(RegisterUser.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

以下是我的记录插入 Java 代码：

```
PreparedStatement pst = con.prepareStatement("INSERT INTO users(fname, lname, email, password) VALUES(?,?,?,?)");
pst.setString(1, user.getFirstName());
pst.setString(2, user.getLastName());
pst.setString(3, user.getEmail());
pst.setString(4, user.getPassword());
pst.executeUpdate(); 
```

其中，`user`是实体类的对象，其字段映射到表字段。另外，请注意我的控制器（`RegisterUser`servlet）正在使用`DatabaseManager`类来插入记录，并且`DatabaseManager`该类具有`insertUser()`接受实体类对象参数的方法 class `User`。

以下是创建表的 SQL `users`：

```
CREATE TABLE users(
    u_id integer PRIMARY KEY,
    fname varchar(30),
    lname varchar(30),
    email varchar(30),
    password varchar(32)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:17:35.593

你当前的主键不是自增的，所以你需要自己指定主键的值。如果您希望主键是自增的，您需要明确指定它。

请参阅：[http](http://www.sqlite.org/autoinc.html) ://www.sqlite.org/autoinc.html您的表定义需要是：

```
CREATE TABLE users(
    u_id integer PRIMARY KEY AUTOINCREMENT,
    fname varchar(30),
    lname varchar(30),
    email varchar(30),
    password varchar(32)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:03:15.490

你可以试试这个。

```
PreparedStatement pst = con.prepareStatement("INSERT INTO users(u_id, fname, lname, email, password) VALUES(?,?,?,?,?)");

pst.setString(1, null);
pst.setString(2, user.getFirstName());
pst.setString(3, user.getLastName());
pst.setString(4, user.getEmail());
pst.setString(5, user.getPassword()); 
```

据此，将[其](http://www.sqlite.org/autoinc.html)设置为 null 应该可以工作。

> 如果插入时没有指定 ROWID，或者指定的 ROWID 的值为 NULL，则会自动创建适当的 ROWID。

我不确定为什么您的代码不起作用，尽管根据上述语句的第一部分它是正确的。

**编辑：**

刚碰到[这个](http://comments.gmane.org/gmane.comp.db.sqlite.jdbc/854%20Please%20check%20if%20you%27re%20pointing%20to%20right%20database%20in%20your%20code.)。请检查您是否在代码中指向正确的数据库。

# mysql - 是否可以在没有任何或所有 MyISAM、MERGE、MEMORY 或 CSV 引擎的情况下从源代码编译 MySQL。

> ID：11808971
> 
> 赞同：0
> 
> 时间：2012-08-04T13:16:20.363
> 
> 标签：mysql, linux, storage-engines

是否可以在没有任何或所有 MyISAM、MERGE、MEMORY 或 CSV 存储引擎的情况下从源代码编译 MySQL。

[http://dev.mysql.com/doc/refman/5.5/en/source-configuration-options.html#option_cmake_storage_engine_options](http://dev.mysql.com/doc/refman/5.5/en/source-configuration-options.html#option_cmake_storage_engine_options)上的文档说这些存储引擎是强制性的，但它也提到了该`-DWITHOUT_XXX_STORAGE_ENGINE=1`选项。

让我知道是否可以直接或通过源代码中的任何调整来排除任何这些存储引擎。另外，我无法弄清楚如何使用`-DWITHOUT_XXX_STORAGE_ENGINE=1`选项。我正在通过命令构建源代码

```
`BUILD/compile-pentium-debug`

`make install` 
```

从 MySQL 源代码父目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:14:08.377

MyISAM 在代码库中是绝对强制性的；它用于内部系统表（没有它 MySQL 将无法启动），也用于某些类型的查询中使用的内部临时表。你无法避免它。

就连（主要的）分叉 Drizzle 也无法彻底消灭 MyISAM

# c# - 将 IEnumerable 转换为 System.Data.Linq.Table

> ID：11808976
> 
> 赞同：1
> 
> 时间：2012-08-04T13:16:43.827
> 
> 标签：c#, linq, linq-to-sql

我有一个返回类型为**Table的函数**

****此代码不起作用。我只想将 IEnumerable 返回为 Linq.Table ******

 **```
 public static System.Data.Linq.Table<Products> GetProducts()
    {
        MyContext mc = new MyContext();

        Table<Products> ret = null;
        // Or   Table<Products> ret = mc.GetTable<Products>();

        ret.AttachAll<Products>(mc.GetTable<Products>()
                                  .OrderBy(p => p.ProductID).Take(1));

        return ret;
    } 
```

现在我想将 IEnumerable 查询转换为 System.Data.Linq.Table。

（您可能会说我可以更改返回类型，但问题是这是否可能。我可以覆盖 GetTable() 之类的函数吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T04:46:40.217

你不能。该类的[`Table<TEntity>`存在](http://msdn.microsoft.com/en-us/library/bb358844.aspx)是为了提供[`IQueryable<T>`接口](http://msdn.microsoft.com/en-us/library/bb351562.aspx)实现。里面没有任何*实际*的项目，它只是一个由[`DataContext`类](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)公开的根，以便提供一个`IQueryable<T>`被解释、翻译成 SQL 然后发送到 SQL 服务器的实现。

如果您有一个[`IEnumerable<T>`接口](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)实现，那么您很可能*已经拥有*正在迭代的具体化结果集（或内存中的集合）。实现没有任何好处，`IQueryable<T>`因为没有什么可解释的；你想要的一切都已经在记忆中了。

也就是说，在实现中使用常规扩展方法/查询语法可能`IEnumerable<T>`比尝试将其放入`Table<TEntity>`.**

# performance - TortoiseSVN 图标覆盖和网络共享/挂载

> ID：11808978
> 
> 赞同：1
> 
> 时间：2012-08-04T13:17:40.203
> 
> 标签：performance, tortoisesvn, smb, network-share

在网络驱动器上启用 TortoiseSVN 图标覆盖[会减慢](http://tortoisesvn.tigris.org/faq.html#ovlonlylocal)整个系统的速度。

规模有多大，有什么办法可以减轻这种影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:06:44.390

[根据](https://groups.google.com/d/msg/tortoisesvn-dev/dCXz8jODeRE/GFzuBsOGcq0J)TSVN 的首席开发者[Stefan Küng](http://tortoisesvn.net/stefan_kueng.html)的说法：

> 当缓存确定是否显示路径的覆盖时，最后检查驱动器类型。如果路径在“允许的路径”列表中，则驱动器类型甚至不会被检查，因此它应该更快。当然，复选框的状态根本不重要。

# asp.net-mvc - 我应该如何管理我的 ASP.NET MVC 4 应用程序中的成员资格？

> ID：11808985
> 
> 赞同：6
> 
> 时间：2012-08-04T13:19:29.500
> 
> 标签：asp.net-mvc, asp.net-membership, asp.net-mvc-4, membership

当我正在创建我的第一个 ASP.NET MVC 4 Internet 应用程序时，我想知道如何最好地管理站点上的成员资格。该应用程序允许用户注册和登录。我有兴趣了解如何实现管理站点成员的完整解决方案，包括管理用户界面。

我应该如何向我的应用程序添加会员管理设施？我主要考虑两个不同的 NuGet 包作为我的解决方案的基础，[SecurityGuard.MVC4](https://github.com/kahanu/Security-Guard/wiki/1.--Overview)和[MvcMembership](https://github.com/TroyGoode/MembershipStarterKit)。两者看起来都是为我的应用程序添加会员管理的一个很好的起点，但我发现很难选择，因为我对这个主题知之甚少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:28:48.770

我相信安全卫士是你想要的。它为您提供了更完整的会员区。我自己都没有使用过，但是我自己做了，并且通过查看您提供的链接，Security Guard 是您创建管理后端的最佳选择。

但是，如果您只需要授权不同的部分，检查用户角色，或者解锁用户，您可能可以通过使用内置的[User](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.applicationservices.user_methods)和[Mebership](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx)和[Role](http://msdn.microsoft.com/en-us/library/system.web.security.roles_methods)方法来获得。您将不得不创建一些视图，而不是创建一些视图，但这不是很困难并​​且是一个很好的学习体验。

# caching - 在 Hadoop 工作节点上缓存数据

> ID：11808988
> 
> 赞同：0
> 
> 时间：2012-08-04T13:20:59.610
> 
> 标签：caching, hadoop, amazon-s3, mapreduce, ehcache

我的 Map/Reduce 程序经常从 S3 请求文件。在 reducer 中，我非常频繁地从 Amazon S3 请求文件，并且我可能会多次请求同一个文件（大约 10 K 个文件，每个文件在 1 MB 到 12 MB 之间）。使用 Hadoop 分布式缓存效率不高，因为它将所有这些文件复制到所有工作节点（据我所知），但我不想像在减速器阶段那样做这些，我可能只从 10 K 个文件中请求 1000 个文件。此外，如果减速器在文件之前请求，如果减速器再次需要它，我不想再次请求它。我在问是否有人在工作节点上实现了像 ehcache 或 oscache 这样的缓存框架？或者有什么方法可以只缓存工作机器磁盘上的请求文件？

谢谢雅希亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:52:01.907

您可能需要具有分区缓存支持的成熟内存数据网格。GridGain 就是其中之一。看看[www.gridgain.com](http://www.gridgain.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:23:24.153

看看[SHARK](http://shark.cs.berkeley.edu/) 它应该不需要太多时间来配置。另一种选择是 memcached 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:06:32.243

我建议使用 HDFS 作为缓存。S3 通常比本地磁盘慢得多，因此 HDFS 可以被视为本地缓存。
我不知道全自动解决方案，但我相信 distcp 会有所帮助。(http://hadoop.apache.org/common/docs/r0.19.2/distcp.html) 它有“更新”选项，所以它不会复制大小不变的文件
。

# python - django-pipeline amazon s3 collectstatic 文件找不到

> ID：11808991
> 
> 赞同：4
> 
> 时间：2012-08-04T13:21:11.593
> 
> 标签：python, django, amazon-s3, django-staticfiles, django-storage

我将 s3boto、django-pipeline 和 django-storages 与此设置一起使用：

```
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
STATICFILES_STORAGE = 'utils.classutils.S3PipelineStorage'

MEDIA_ROOT = "/"
MEDIA_URL = '//s3.amazonaws.com/%s/' % AWS_STORAGE_BUCKET_NAME
STATIC_ROOT = '/static/'
STATIC_URL = '//s3.amazonaws.com/%s/static/' % AWS_STORAGE_BUCKET_NAME
STATICFILES_DIRS = (
    os.path.join(SITE_ROOT, 'assets'),
) 
```

以及 django-pipeline 的自定义存储

```
from django.contrib.staticfiles.storage import CachedFilesMixin
from pipeline.storage import PipelineMixin
from storages.backends.s3boto import S3BotoStorage

class S3PipelineStorage(PipelineMixin, CachedFilesMixin, S3BotoStorage):
    pass 
```

但我不断得到：

```
ValueError: The file 'project/head.png' could not be found with <utils.classutils.S3PipelineStorage object at 0x2163510>. 
```

但是这个文件在任何地方都不存在！不在插件中，我尝试找到它，我检查了我的静态目录，尝试在管理员中找到它，我什至不记得使用过这样的文件！我试过findstatic，找不到文件。

我会错过什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:06:01.497

您当然有一个指向不存在`'project/head.png'`文件的 css 文件，删除此引用，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T09:24:08.877

短提示。我在设置 S3 以提供静态文件时遇到了这个问题。

我想从 s3 提供静态内容，并继续处理上传到本地机器上的媒体文件夹的文件。我当时拥有的是在 s3 上的 css 文件中引用的一个图像，该图像指向媒体文件夹中的图像，如下所示`background: url(../media/some/image.png)`。

显然，在 css 中设置的相对路径在 s3 中找不到该文件，并且上传崩溃了。它在本地工作，但在从 s3 运行静态文件时不起作用。

# css - 如何用 CSS 大写第一行？::第一行伪元素不起作用

> ID：11808992
> 
> 赞同：13
> 
> 时间：2012-08-04T13:21:21.443
> 
> 标签：css, css-selectors, line, pseudo-element, capitalize

现在我有一个段落，我想将整个第一行大写。我已将第一段设置为 ID“firstp”并尝试：

```
#firstp::first-line {
  text-transform: uppercase;
} 
```

我已经尝试过了，`text-transform: capitalize`但这也不起作用。这很奇怪，因为我已经设法使用`#firstp:first-letter`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T14:20:40.460

`text-transform`on`:first-line`现在真的有问题，请参阅此处的参考[http://reference.sitepoint.com/css/text-transform](http://reference.sitepoint.com/css/text-transform)

您可以使用这个名为**linify** [https://github.com/octopi/Linify](https://github.com/octopi/Linify)的 jquery 插件来选择第一行，然后应用`text-transform: uppercase`

问候，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-30T01:59:43.887

我认为 Chrome 的 ":first-line" 有问题。尝试删除它并在此页面上使用 james31rock 的语法，除了在他的示例中 CSS 应该是“#firstp{...”以反映他的 HTML 中的 ID 而不是“.makeupper”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T05:15:58.853

为了实现这一点，您必须在正确的语法中使用以下伪元素。例子：

HTML部分：

```
<selection id="Welcome">
<p>Some text</p>
</section> 
```

CSS 表：

```
#Welcome p:first-of-type:first-line {
text-transform: uppercase;
} 
```

我希望这有帮助。抱歉迟到了。我想，迟到总比没有好！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T15:40:42.557

您可能想使用：

```
font-variant: small-caps; 
```

我认为它看起来更好，并且在所有主要浏览器中都受支持。

更多信息

[http://en.wikipedia.org/wiki/Small_caps](http://en.wikipedia.org/wiki/Small_caps)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-21T14:08:43.167

可能还有其他方法...

如果您在段落中有两个带有文本的跨度，其中一个跨度将位置设置为段落的左上角，因此这两个跨度将重叠。现在将上部跨度的高度设置为大约`line-height`文本的高度并`overflow`隐藏，这样只有跨度的第一行可见。在上部跨度上设置`text-transform`为大写，并且你的第一行是大写的。

**此解决方案的缺点**是，大写文本更宽，因此下一行可能会丢失单词。您可以通过使用[**固定宽度**](https://en.wikipedia.org/wiki/Monospaced_font)字体来解决此问题，或者尝试`letter-spacing`在两个跨度上进行设置，以便大写和小写文本的宽度相同。

[这是 jsFiddle](https://jsfiddle.net/kw8mw6kp/2)，虽然有时当您更改窗口大小时它并不理想，**但它可能就足够了**。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-04T13:37:40.093

在 Chrome 中，这两种方法似乎都不起作用。在即文本转换作品中。我没有 Firefox 来测试。

[http://jsfiddle.net/vJSeq/4/](http://jsfiddle.net/vJSeq/4/) - 使用文本装饰

[http://jsfiddle.net/vJSeq/3/](http://jsfiddle.net/vJSeq/3/) - 使用文本转换

您可以看到选择器是正确的，因为它被突出显示。

我的建议是使用一些东西来分隔你想要突出显示的文本，方法是在段落内创建一个 span 标签并为其分配一个类

```
<p id="firstp">to stop the degradation of the planet's natural environment and to build a future in <span class="makeupper">which humans live in harmony with nature, by; conserving</span> the world's biological diversity, ensuring that the use of renewable natural resources is sustainable, and promoting the reduction of pollution and wasteful consumption.</p>
​ 
```

和CSS

```
.makeupper
{
  text-transform: uppercase;  
} 
```

[http://jsfiddle.net/vJSeq/5/](http://jsfiddle.net/vJSeq/5/)

# ember.js - 使用 {{#each ...} 时 {{action ...}} 未设置 event.context（未定义）

> ID：11808995
> 
> 赞同：2
> 
> 时间：2012-08-04T13:21:25.837
> 
> 标签：ember.js

我第一次尝试使用 Ember.js，大致遵循 Ember.js 指南，但我遇到了以下问题。

相关代码： [https](https://gist.github.com/3257657) ://gist.github.com/3257657 （完整的rails应用见：[https](https://github.com/basveeling/ember-test) ://github.com/basveeling/ember-test ）

背景：我正在使用 1.0 预发行版 ember.js 运行最新的 ember-rails 构建。我正在使用 ember-data 作为后期模型。

几乎所有东西都可以在这个应用程序中运行，除了创建的 href`{{action showPost context="post" href=true}}`有一个未定义的 id ( `#/posts/undefined`)。此外，传递给`showPost`动作的 jQuery 事件没有上下文属性（它有视图属性）。

我是不是走错了路，还是我偶然发现了预发布中的一个错误？

编辑：这可能与[从“编辑”导航回“显示”后的 Url 包含“未定义”而不是 id有关](https://stackoverflow.com/questions/11807742/url-contains-undefined-instead-of-id-after-navigating-back-from-edit-to-sho)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T13:32:52.647

尝试更改`{{action showPost context="post" href=true}}`为 `{{action showPost post href=true}}`

1.0 预发布版更改了动作助手。

更多信息：[https ://github.com/emberjs/ember.js/commit/83b7a61a892e55423cf1e66f606b13435bcab8f0](https://github.com/emberjs/ember.js/commit/83b7a61a892e55423cf1e66f606b13435bcab8f0)

# android - 如何从服务内部检测/监听 Android 应用程序/活动的运行变化？

> ID：11808996
> 
> 赞同：3
> 
> 时间：2012-08-04T13:21:31.640
> 
> 标签：android, android-activity, broadcastreceiver, android-service

我正在运行一项服务。该服务应该监听（即每个广播接收器）活动/应用程序启动/恢复操作，无论如何。我的目标是做一些事情，每次一个应用程序启动，或者另一个应用程序启动/恢复，简而言之，当前前端应用程序发生变化。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:04:30.723

使用 ActivityManager 的定期检查（就像您在评论中所说的那样）是完成它的唯一方法 AKAIK。

系统不会广播任何可以被第 3 方捕获的任何内容，以表明应用程序已启动。

请注意，每隔几秒钟检查一次的重复任务将对运行它的设备产生性能和电池影响。

# java - 作为参数传递给类的关联对可测试性有什么影响？

> ID：11808998
> 
> 赞同：2
> 
> 时间：2012-08-04T13:22:06.070
> 
> 标签：java, associations, testability

我正在研究一个面向对象的设计问题。我将尝试专注于我感到困惑的部分，并用文字解释它，而不是提供代码。

I have a class called SalesPolicy that contains a List of TaxPolicy. TaxPolicy is an abstract class that represents a tax policy with name and tax rate as attributes. TaxPolicy contains an abstract method called accept. Concrete implementations of a TaxPolicy must implement the accept method and provide the logic for deciding when a TaxPolicy is applicable.

I have another class called SalesEngine. SalesEngine has a SalesPolicy and SalesPolicy is one of the parameters to the SalesEngine constructor. SalesEngine decides whether a TaxPolicy from a List of TaxPolicy in SalesPolicy is applicable for an item or not by calling the accept method and then calculates the tax accordingly. As explained earlier, SalesPolicy contains a single attribute which is a list of TaxPolicy and a method to add to the List.

我需要知道的是是否可以为 SalesEngine 类设置像 SalesPolicy 这样的参数。从可测试代码的角度来看，这有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:29:00.167

我认为有这样的场景是完全可以的：

```
public SalesEngine(SalesPolicy policy) { ... } 
```

创建`SalesEngine`用户或已经知道`SalesPolicy`他们想要使用什么的人的位置。

另一个可能有价值的场景是用户在创建时*不*知道`SalesPolicy`他们想要使用什么的情况`SalesEngine`，您可以通过添加默认构造函数和 setter 方法来做到这一点：

```
// default construtor
public SalesEngine() { ... }

// sets the sales policy
public void setSalesPolicy(SalesPolicy policy){ ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T13:38:48.830

我同意 Hunter 的回答，即您的描述听起来很合理（并且，根据它的使用方式，允许稍后添加 SalesPolicy 可能会很有用）。所以在这里我将解决你关于测试的问题。简短的回答是，它并没有真正改变太多。

假设 SalesEngine 需要一个 SalesPolicy 对象来完成它的工作，它必须以一种或另一种方式获得它。据推测，测试困难将在于测试具有良好代表性的 SalesPolicy 对象范围。但是，无论您是将其作为构造函数的一部分还是稍后添加，都不会真正使这变得更容易或更难。

另一方面，如果 SalesEngine 并不总是需要 SalesPolicy 才能工作，那么您绝对应该采纳 Hunter 的建议。这将是一个更合适的接口，并且在不需要 SalesPolicy 的情况下可以减轻测试负担。