# StackOverflow 问答 10492000-10492999

# php - 每当用户单击时，PHP 提交按钮

> ID：10492001
> 
> 赞同：0
> 
> 时间：2012-05-08T03:00:38.237
> 
> 标签：php, html, form-submit

单击提交后，我希望收到多个请求。意思是我点击提交并得到结果后，我想再次查询结果并再次点击提交。我不想让自己回到虚无。

```
 <?php
 error_reporting(0);
 if (!$_POST['submit'])
 {
 <form action="http://localhost/test.php" method="post">
 Type of Leave: 
 <select name="leave">
 <option value=""selected="selected"></option>
 <option VALUE="Medical Leave"> Medical Leave</option>
 <option VALUE="Unpaid Leave"> Unpaid Leave</option> 
 </select>
 <input type="submit" name="submit" value="Check!" />
 </form>
 <?php
 }
 else
 {
 $conn=odbc_connect("employee","","") or die (odbc_errormsg());
 if (!$conn)  
 {
 exit
 ("Connection Failed: " . $conn);
 }
 else
 {
 $choice = $_POST['leave'];
 $sql="SELECT * FROM balance WHERE ID=$username";
 $rs=odbc_exec($conn,$sql);
 ?>
 <?php
 while (odbc_fetch_row($rs))
 {
 $choice=odbc_result($rs,"$choice");
 echo "<tr><td>$choice</td>";
 }
 odbc_close($conn);
 echo "</table>";
 }
 } 
```

目前，代码本身会查询出我想要的预期输出，但唯一的缺点是它作为输出保留在那里。我的目标是让提交和选择选项保留在那里，以便我可以继续输出我想要的结果，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:14:59.113

最好的用户体验是使用 AJAX 根据下拉列表中选择的内容动态更改结果表。对于更简单的解决方案，您可以尝试将表单向上移出 if/else 循环。先放表格，然后在表格打印后，检查`if ($_POST['submit'])`.

在这个例子中，我还添加了一个小函数来添加`selected="selected"`到为此提交选择的任何选项。这很粗糙，但你明白了。

```
<?php
function matchPost($name,$val) {
if($val == $name)
    echo 'selected="selected"';
}
?>

<form action="http://localhost/test.php" method="post">
 Type of Leave: 
 <select name="leave">
 <option value=""></option>
 <option <?php matchPost('Medical_Leave',$_POST['leave']); ?> VALUE="Medical_Leave"> Medical Leave</option>
 <option <?php matchPost('Unpaid_Leave',$_POST['leave']); ?> VALUE="Unpaid_Leave"> Unpaid Leave</option> 
 </select>
 <input type="submit" name="submit" value="Check!" />
 </form>

<?php
 if ($_POST['submit'])

 {
 $conn=odbc_connect("employee","","") or die (odbc_errormsg());
 if (!$conn)  
 {
 exit
 ("Connection Failed: " . $conn);
 }
 else
 {
 $choice = $_POST['leave'];
 $sql="SELECT * FROM balance WHERE ID=$username";
 $rs=odbc_exec($conn,$sql);
 ?>
 <?php
 while (odbc_fetch_row($rs))
 {
 $choice=odbc_result($rs,"$choice");
 echo "<tr><td>$choice</td>";
 }
 odbc_close($conn);
 echo "</table>";
 }
 } 
```

# objective-c - iOS 4 上的推送通知如何显示？

> ID：10492003
> 
> 赞同：0
> 
> 时间：2012-05-08T03:01:37.113
> 
> 标签：objective-c, ios, xcode

我想知道如何在 iOS 4 的屏幕上显示推送通知？由于没有通知中心（iOS 5），推送通知会自动显示为警报还是我必须自己实现？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:05:54.203

实现发送“消息”推送通知的代码/逻辑在 iOS 4 和 iOS 5 中没有什么不同。唯一的区别是用户的外观是带有“转到应用程序”按钮和确定按钮的 UIAlertView 样式通知. 另请注意，没有通知中心会跟踪旧通知。

# algorithm - 在给定欧几里得距离内的二维空间中查找移动节点对？

> ID：10492005
> 
> 赞同：0
> 
> 时间：2012-05-08T03:02:02.977
> 
> 标签：algorithm, graph, simulation, graph-algorithm

我正在寻找模拟放置在 2D 空间中并具有固定、有限通信范围的移动设备。我需要能够确定哪些节点对在彼此的范围内，并确保在顶点移入或移出范围时相应地更新边。我希望有大约 1000 个节点或更多，因此每个时间步都进行完整的成对比较 ( O(n^2) ) 是不可行的。顶点将使用不同的方向和速度移动，因此我假设预测路径的“预测”方法同样困难。我假设所有顶点都具有相同的通信半径。

现有的模拟环境或 Java 库是理想的，但算法也会有所帮助。像 ns-2 这样的硬件模拟环境对于我正在寻找的简单功能来说太过分了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:54:29.380

一个典型的简单解决方案是将空间划分为网格。如果通信范围是 R，您可以使用例如 R 作为网格间距因子。在网格的每个单元格中，您不断维护属于该单元格的那些节点的列表/集合。现在，为了找到移动设备 M 的邻居，检查其自身小区内的移动设备以及该小区的邻居就足够了。显然，您也可以使用其他间距因子。如果不是每个移动设备都相互连接，这会大大加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:25:45.867

正如@antti.huima 所说，我们应该将欧几里登空间划分为网格，但找到网格的大小将取决于需求。我不确定我们是否可以使集群脱离网格，但使集群更有效。假设移动台移动了一点delta..并从集群说C1移动到相邻集群说c2所以我们的移动台应该与集群中给定范围的所有移动台配对说C2...所以在这个过程中我们不需要使用所有其余 N-1 个元素更新配对事件，但仅使用集群中的元素。我们进一步假设集群半径为 2R，其中 R 是我假设的移动范围。

# sql - 从没有连接的其他表更新表

> ID：10492007
> 
> 赞同：1
> 
> 时间：2012-05-08T03:02:20.840
> 
> 标签：sql, ms-access, sql-update

这是交易。我有一个`T`包含许多列但感兴趣的两列的表：`gen_ID`, `ordernumber`.
此表中的记录总是以 5 组为一组，`gen_ID`相同的`ordernumber`为空白。

所以本质上，它看起来像这样：

```
Gen_ID  ordernumber
233                     
233     
233     
233     
233     
234     
234             
234             
234     
234 
```

现在我有一个查询`Q`，在执行时会随机化数字 1、2、3、4 和 5。

我想`ordernumber`用随机数更新，`Q`所以它看起来像这样：

```
Gen_ID  ordernumber
233     3
233     4
233     1
233     2
233     5
234     4
234     5       
234     3        
234     2
234     1
Etc... 
```

关于如何使用 MS Access 2010 SQL 执行此操作的任何想法？

Udate 查询会很好，但我不能加入两者，因为我没有共同的 ID。
有什么建议么？请注意，一旦在表中创建了一组 5 条记录，我就可以运行这个魔术查询（一旦我有多个记录，我就不需要这样做了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:53:01.017

我不认为这可以单独通过 SQL 来实现，并且需要一些 VB 一起运行。我的方法是将您的 1 - 5 个数字以随机顺序存储在“数组”中，然后您可以打开一个记录集到“T”并逐步从数组中分配一个数字。您还可以循环此过程以在它检测到“T”中的新 Gen_ID 时再次开始，从而一次性填充整个表。

# xcode4 - XCode 不允许我更改代码

> ID：10492008
> 
> 赞同：0
> 
> 时间：2012-05-08T03:02:44.003
> 
> 标签：xcode4

我一直在做一个项目，自上周以来，xcode 不允许我对我的 xib 文件和项目中的另一个页面进行任何更改。但是我可以在其他页面中进行更改。当我以 root 身份打开它时，我也可以在 main.xib 中进行更改。什么会导致这种情况？这很烦人。

这就是我得到的：

“MainWindow.xib”已锁定编辑，您可能无法保存更改。你想解锁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:09:06.153

听起来您失去了对自己文件的所有权（或某种原因）。您可以通过简单地列出它们 ( ) 从命令行确认这一点`ls`，例如：

```
$ ls -l
total 184
-rwxr-xr-x  1 andy  staff   2731  7 Dec  2010 AppDelegate.h
-rwxr-xr-x  1 andy  staff   3976  7 Dec  2010 AppDelegate.m
-rwxr-xr-x  1 andy  staff   2625  7 Dec  2010 Choices.h
... 
```

我的用户名是“andy”，所以我已经拥有这些文件，但是如果我没有，我可以使用`chown`root 更改整个目录层次结构的所有权：

```
$ ls -l
total 0
drwxr-xr-x  12 andy  staff  408 15 Dec  2010 CFLocalServer
drwxr-xr-x  23 andy  staff  782 18 Dec  2010 GridMenu
drwxr-xr-x  12 andy  staff  408 16 Dec  2010 Hello
drwxr-xr-x  16 andy  staff  544 18 Dec  2010 NSTableViewBinding
drwxr-xr-x  18 andy  staff  612 18 Dec  2010 OpenCL_OceanWave
$ sudo chown -R andy:staff *
Password:
$ 
```

您可以使用 Finder 执行此操作，但这并不容易解释。

最终，您需要找出您失去所有权的*原因*，因为目前您无法控制自己的机器，它可以控制您。

# ruby-on-rails - Redmine - 调用 Dispatcher.dispatch 时出错#

> ID：10492012
> 
> 赞同：1
> 
> 时间：2012-05-08T03:03:32.057
> 
> 标签：ruby-on-rails, rubygems, rack, redmine

几天来，我一直在尝试在我的 CentOS WHM/CPanel 服务器上安装 Redmine，并且我已经能够让它达到一个点，即它在 CPanel 中运行，但是当我尝试访问应用程序时它永远不会加载我在 mongrel.log 中得到了下面的第一个片段，在 production.log 中得到了第二个片段。有任何想法吗？

Ruby 1.8.7 (2011-02-18 补丁级别 334) [x86_64-linux]

导轨 2.3.14

```
<mongrel.log>
Mon May 07 20:26:30 -0400 2012: Error calling Dispatcher.dispatch #<NoMethodError: private method `split' called for nil:NilClass>
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/cgi_process.rb:52:in `dispatch_cgi'
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:101:in `dispatch_cgi'
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:27:in `dispatch'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:76:in `process'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:74:in `synchronize'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:74:in `process'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:159:in `process_client'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:158:in `each'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:158:in `process_client'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `initialize'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `new'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:268:in `initialize'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:268:in `new'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:268:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:282:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:281:in `each'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:281:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:128:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/command.rb:212:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:281
/usr/bin/mongrel_rails:23:in `load'
/usr/bin/mongrel_rails:23

<production.log>
Processing WelcomeController#index (for 24.52.2XX.XX at 2012-05-07 20:26:30) [GET]
  Parameters: {"action"=>"index", "controller"=>"welcome"}
Redirected to http://projects.mydomain.com/login?back_url=http%3A%2F%2Fprojects.mydomain.com%2F
Filter chain halted as [:check_if_login_required] rendered_or_redirected.
Completed in 38ms (DB: 35) | 302 Found [http://projects.mydomain.com/] 
```

我已经尝试修复在初始化文件夹（http://www.redmine.org/issues/7688）中添加 mongrel.rb 补丁，但仍然没有运气。

这是安装在我的系统上的 gem 列表。

```
actionmailer (2.3.14)
actionpack (2.3.14)
activerecord (2.3.14)
activeresource (2.3.14)
activesupport (2.3.14)
bundler (1.1.3)
cgi_multipart_eof_fix (2.5.0)
coderay (0.9.8)
daemon_controller (1.0.0)
daemons (1.1.8)
edavis10-object_daddy (0.4.3)
fastercsv (1.5.4)
fastthread (1.0.7)
gem_plugin (0.2.3)
hoe (3.0.4)
i18n (0.4.2)
json (1.7.1)
metaclass (0.0.1)
mocha (0.11.4)
mongrel (1.1.5)
mysql (2.8.1)
net-ldap (0.3.1)
passenger (3.0.12)
rack (1.1.1)
rails (2.3.14)
rake (0.8.3)
RedCloth (4.2.9)
ruby-openid (2.1.8)
rubygems-update (1.8.24)
rubytree (0.5.2)
sqlite3 (1.3.6)
tzinfo (0.3.33) 
```

项目子域 .htaccess 文件如下。

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^projects\.mydomain\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.projects\.mydomain\.com$
RewriteRule ^.*$ "http\:\/\/127\.0\.0\.1\:12001%{REQUEST_URI}" [P,QSA,L] 
```

我确定这只是我以某种方式忽略的东西，请帮忙。谢谢！

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:44:01.320

在上面提到的mongrel补丁中，系统满足了运行脚本所需的所有条件，但最终在注释掉mongrel.rb的第一行和最后一行后，脚本能够运行并且站点开始工作。

奇怪，不知道是什么导致它不通过验证规则。这些规则是有充分理由的。如果有人有任何想法，请告诉我！

```
#if ['2.3.8', '2.3.9', '2.3.10', '2.3.11', '2.3.14'].include?(Rails.version) && Gem.available?('mongrel', '~>1.1.5') && self.class.const_defined?(:Mongrel)
....
#end 
```

运行的规格是

```
Ruby 1.8.7 (2011-02-18 patchlevel 334) [x86_64-linux]
Rails 2.3.14
Gem: mongrel (1.1.5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:21:07.023

在这个网站上，您有一个解决问题的方法，

[http://borrowbits.com/2012/05/how-to-install-redmine-1-3-on-centos-server-with-whmcpanel/](http://borrowbits.com/2012/05/how-to-install-redmine-1-3-on-centos-server-with-whmcpanel/)

希望你能正确安装Redmine

问候，

维森特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:14:02.893

Your config/initializers/mongrel.rb might read

`if ['2.3.8', '2.3.9', '2.3.10', '2.3.11','2.3.14'].include?(Rails.version) && Gem.available?('mongrel', '~>1.1.5') && self.class.const_defined?(:Mongrel)`

If is that so, you can add 2.3.15 on the supported rails versions, like this:

`if ['2.3.8', '2.3.9', '2.3.10', '2.3.11','2.3.14','2.3.15'].include?(Rails.version) && Gem.available?('mongrel', '~>1.1.5') && self.class.const_defined?(:Mongrel)`

# c++ - 将 printf 和 cout 重定向到套接字

> ID：10492013
> 
> 赞同：0
> 
> 时间：2012-05-08T03:03:41.883
> 
> 标签：c++, windows, sockets, printf

我在想是否可以轻松地将 printf 或 cout 重定向到套接字？

我目前正在使用 Windows VC++ 编程...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:20:55.147

不，但您可以使用`sprintf`函数族：

```
// Make sure this buffer is big enough; if the maximum size isn't known, use
// _vscprintf or a dynamically allocated buffer if you want to avoid truncation
char buffer[2048];
_snprintf_s(buffer, sizeof(buffer), _TRUNCATE, "format %s etc.", args...);
send(mySocket, buffer, strlen(buffer)+1, 0);  // +1 for NUL terminator 
```

请注意，这`_snprintf_s`是 Microsoft 仅运行时功能，因此如果您正在编写可移植代码，请`snprintf`在其他平台上使用。

在 C++ 中，您也可以使用 a`std::ostringstream`来获得类似的结果：

```
std::ostringstream buffer;
buffer << "test: " << myvar << somethingelse << etc;
send(mySocket, buffer.str().c_str(), buffer.str().size() + 1, 0);
                                                     // +1 for NUL terminator 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:25:32.177

Linux 有 dprintf() 允许您写入套接字文件描述符。

`int dprintf(int fd, const char *format, ...);`

[http://linux.about.com/library/cmd/blcmdl3_dprintf.htm](http://linux.about.com/library/cmd/blcmdl3_dprintf.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T03:06:12.893

不是微不足道的。在 WinSock (MS Windows) 世界中，套接字与文件描述符不同。

# c# - “500：未知的网络方法”当我使用 $.ajax 和 WebMethod 发送数据时

> ID：10492015
> 
> 赞同：-4
> 
> 时间：2012-05-08T03:04:02.703
> 
> 标签：c#, asp.net, ajax, jquery

我正在尝试通过 Ajax 将数据发送到我的数据库，在我的 C# 代码中使用 JQuery Ajax 函数和 WebMethod。但它不起作用。有任何想法吗？

```
$(function() {
    $('#Add').click(function() {
        var $dialog = $('<div id="MyDialog"></div').appendTo('body')
            .load("../Pop-up.aspx #pop-up", createDatePicker)
            .dialog({
                position: 'center',
                width: 550,
                buttons: {
                    "OK": function() {
                        var jname = $('#name').val();
                        var jbirthday = $('#datepicker').val();
                        var jgender = $('input:radio[name=Gender]:checked').val();
                        var jcourseId = $('#DropDownList1').val();
                        var myjson = {
                            name: jname,
                            birthday: jbirthday,
                            gender: jgender,
                            courseId: jcourseId
                        };

                        $.ajax({
                            type: "post",
                            contentType: "application/json;charset=utf-8",
                            dataType: "json",
                            url: "Manage.aspx/AddStudent",
                            data: $.toJSON(myjson)
                        });
                    },
                    "Cancel": function() {
                        $(this).dialog('close');
                    }
                }
            });
        return false;
    });

}); 
```

这是我的网络方法

```
 [WebMethod]
      public static void AddStudent(string birthday,string name,string gender,string courseId)
      {
        var repository = new StudentRepository();
        var student = new Student
                            {
                                Birthday = Convert.ToDateTime(birthday),
                                Name = name,
                                Gender = gender,
                                Course_ID = Convert.ToInt32(courseId)
                            };
        repository.InsertStudent(student);
            repository.Save();
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T14:35:45.440

try this:

```
data: JSON.stringify(myjson) 
```

instead of:

```
data: $.toJSON(myjson) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:38:04.857

Try changing the order of the properties on your JSON object so they match the parameters in your Webmethod.

```
 var myjson = {
       birthday: jbirthday, //now the properties match the parameters
       name: jname,
       gender: jgender,
       courseId: jcourseId
    };

    public static void AddStudent(string birthday, string name, string gender, 
        string courseId)
    { ... } 
```

I think you're seeing the 500 error because ASP.NET can't find a method signature that matches your deserialized JSON object, even though all the parameters are of type string.

**Update**

I've had a chance to test out what I originally suggested, and the ordering of properties didn't matter.

Not sure if any of this helps but, I saw 500 errors when:

*   The properties on my JSON object didn't match all the parameters in my WebMethod

    ```
    var myjson = {b: 'test1', c: 'test' };

    [System.Web.Services.WebMethod]
    public static void TestMethod(string a, string b)
    { 
        //does nothing.
    } 
    ```

*   One of the parameters I was passing in was undefined.

    ```
    var myjson = {a: undefined, b: 'test' };

    [System.Web.Services.WebMethod]
    public static void TestMethod(string a, string b)
    { 
        //does nothing.
    } 
    ```

# php - 无法弄清楚 foreach 循环

> ID：10492018
> 
> 赞同：2
> 
> 时间：2012-05-08T03:04:45.643
> 
> 标签：php, mysql, foreach

如何使用`foreach`在我的数据库中插入多个数据。
我有一个下拉菜单，`form`用于通过 js 函数添加和删除行。我想将新行中的数据（在表单中添加）插入到我的数据库中。
这是我的表格：

```
<form action="insert.php" method="POST">
            <input type="button" value="Add Row" onClick="addRow('tableID')"/>
        <input type="button" value="Delete Row"
onClick="deleteRow('tableID')"/>
<table class="table" bgcolor="#CCCCCC">
<thead>
<tr>
<td></td>
<td><center>Item Description</center></td>
<td><center>Price (RM)</center></td>
<td><center>Month</center></td>
<td><center>Amount (RM)</center></td>
</tr>
</thead>
<tbody id="tableID">
<tr>
<td><input type="checkbox" name="chk"></td>
<td>
<select name="item_description">
    <option value="deposit">Deposit</option>
    <option value="rental">Rental</option>
    <option value="stamp">Stamp Duty</option>
    <option value="process">Process Fee</option>
    <option value="ap">AP</option>
</select>
</td>
<td><input id="price" name="price" type="text"></td>
<td><input id="month" name="qty" type="text"></td>
<td><input id="amount" name="amount" type="text"></td>
</tr>
</tbody>
</table>
</form> 
```

这是我的插入查询：

```
<?php
//some connection code here
if(isset($_POST['submit']))
{
$item = array(
'item_description' => '',
'price' => '',
'qty' => '',
'amount' => '',
);
foreach ($item as $key => $value){
$value = $_POST[$key];
}
}
$last_insert_payment_id=mysql_insert_id();
$sql1="INSERT INTO payment_item (payment_id, payment_item_id, item_description, price, qty, amount)
VALUES
('$last_insert_payment_id','NULL','$_POST[item_description]','$_POST[price]','$_POST[qty]','$_POST[amount]')";
if (!mysql_query($sql1,$con))
{
die('Error: ' . mysql_error());
}
echo "1 record added";
?> 
```

希望有人可以帮助我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:07:47.793

所以你的意思是当你点击“添加行”并输入额外的数据行然后点击“提交”时，只有最后一行被插入到数据库中？

我猜当您单击“添加行”时，以下 HTML 将添加到您的表格中（与您问题中的行相同）

```
<tr>
<td><input type="checkbox" name="chk"></td>
... and so on 
```

在这种情况下，您的`$_POST['price']`, `$_POST['chk']`etc 可能会被每一行覆盖，因为您现在有多个带有 hane 的输入`chk`。

尝试设置你的`input id="chk[]"`代替`input id="chk"`，然后`$_POST['chk']`将是一个*数组*，每行一个。

您可以通过 访问每一行`$_POST['chk'][i]`。

评论中还有其他关于使您的代码对 SQL 注入安全的建议，以及`$_POST[price]`（就像您在 SQL 语句中一样）是无效语法的事实；你可能想要`$_POST['price']`。（代达罗斯，马克 B，洛斯弗里霍勒斯）。

# c# - 将项目添加到 TList 的有效且准确的方法

> ID：10492021
> 
> 赞同：1
> 
> 时间：2012-05-08T03:05:25.177
> 
> 标签：c#, asp.net

我有 2 个列表，这些列表的实体有一些 ID，例如

`Client.ID,`其中 ID 是 Client anf 的属性，然后我有`PopulationClient.ID`，其中 ID 是类 PopulationClient 的属性。所以我有两个列表

```
TList<Client> clients = clientsHelper.GetAllClients();
TList<PopulationClient> populationClients = populationHelper.GetAllPopulationClients(); 
```

那么我有一个临时列表

```
TList<Client> temp_list = new TList<Client>(); 
```

所以我遇到的问题是有效和正确地做到这一点。这是我尝试过的..但我没有得到正确的结果

```
foreach(PopulationClient pClients in populationClients)
{
    foreach(Client client in clients)
     {
         if(pClients.ID != client.ID  &&  !InTempList(temp_list, pClients.ID))
         {
             temp_list.Add(client);
         }
     }
}

public bool InTempList(TList<Client> c, int id)
{
    bool IsInList = false;
    foreach(Client client in c)
    {
        if(client.ID == id)
        {
              IsInList = true;
        }
    }    
   return IsInList;
} 
```

因此，虽然我试图正确地做到这一点，但我无法想出一个好的方法，这并没有返回正确的数据，因为在我在顶部第一个循环中的语句中，在某些时候一个或多个不同于另一个，所以无论如何它都会添加它。您认为我应该在这里检查哪些限制，以便我最终得到一个客户列表，这些客户在人口客户中但不在客户中？

例如，人口客户将有 4 个客户和客户 2，这 2 个也在人口客户中，但我需要获取不在客户中的人口客户列表。

任何帮助或指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:13:30.327

首先，让我们专注于获得正确的结果，然后我们将进行优化。

考虑你的嵌套循环：你会得到太多的肯定，因为在大多数 (pclient, client) 对中，ID 不匹配。我想你想这样编码：

```
foreach(PopulationClient pClients in populationClients)
{
     if(!InTempList(clients, pClients.ID) && !InTempList(temp_list, pClients.ID))
     {
         temp_list.Add(client);
     }
} 
```

现在为了该代码的效率：`InTempList`在列表中使用线性搜索。这效率不高 - 考虑使用搜索速度更快的结构，例如哈希集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:45:06.463

如果我了解您在寻找什么，这是一种使用 LINQ 的方法...

```
tempList = populationList.Where(p => !clientList.Any(p2 => p2.ID == p.ID)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:26:32.063

只是为了提供另一个基于 LINQ 的答案...我*认为*您的意图是根据“clients”中的所有项目（从 GetAllClients 返回）填充 tempList，这些项目未在 populationClients 中显示（基于“ID”值）收藏。

如果是这种情况，那么我将假设 populationClients 足够大，可以保证进行基于哈希的查找（例如，如果它少于 10 个项目，则线性扫描可能没什么大不了的）。

所以我们想要一个来自 populationClients 集合的所有 ID 值的快速查找版本：

```
var populationClientIDs = populationClients.Select(pc => pc.ID);
var populationClientIDHash = new HashSet(populationClientIDs); 
```

现在我们有了要在快速查找数据结构中忽略的 ID 值，然后我们可以将其用作客户端的过滤器：

```
var filteredClients = clients.Where(c => populationClientIDHash.Contains(c.ID) == false); 
```

根据使用/需要，您可以从“filteredClients”填充 tempList，或者执行 ToList 或其他任何操作。

# asp.net-mvc - MVC ASP.NET 或 Razor

> ID：10492022
> 
> 赞同：17
> 
> 时间：2012-05-08T03:05:41.400
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我对 MVC 很陌生……我对 Silver-light、WPF 和 MVVM 有相当多的了解，但对 MVC 知之甚少。我正在关注微软网站[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-a-view](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-a-view)上的主要教程。我相信我在第 3 篇（共 9 篇）上。最初它告诉我使用“Razor”的“视图引擎”来创建我的 MVC 站点。我选择使用“ASPX”而不是“Razor”，因为我认为第三方依赖项会更少。

启动新的 MVC Web 应用程序时，最好使用“Razor”而不是“ASPX”。老实说，我不知道有什么区别。如前所述，我选择 ASPX 是为了避免任何额外的第三方 dll 或代码。如果最好选择 ASPX，我有点困惑，为什么 MS 网站上的教程告诉我从 Razor 开始。

任何人都可以阐明何时我应该使用“ASPX”视图引擎而不是“Razor”视图引擎？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-08T03:20:35.600

关于对第 3 方的依赖没有任何区别。ASPX 很好，但 Razor 更好，主要是因为它不会妨碍您。

您应该阅读 Scott Guthrie 的博客文章[Introducing "Razor"](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)。

你基本上用一个符号替换了开始和结束标签`<%`，到目前为止，做同样事情的击键次数更少，即`%>``@`

`<%: Model.UserName %>`

变成

`@Model.UserName`

和

`<% foreach (string name in nameList) { .. } %>`

变成

`@foreach (string name in nameList) { .. }`

还有比这更多的东西，但不多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T03:16:26.497

Razor 是 Microsoft 对 ASP.NET MVC 的内部扩展。您似乎认为 Razor 是由社区提供的，或者是 MVC 基础组件的分支，这是完全错误的。Razor 还提供比 ASPX 语法更简洁的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T03:13:05.137

您将依赖的“额外的第三方 dll 或代码”已经很成熟，绝对没有必要包括在内。你复制一次然后忘记它。也不是你必须追捕他们。Xcopy 部署非常简单。

如您所见，MS MVC 站点使用 Razor。我阅读的大多数（全部？）网站和书籍都使用 Razor。

使用 Razor，你会发现比 MVC 中的 aspx 更多的帮助。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2012-05-08T03:21:08.520

Razor 是您可以对标记做的最草率的事情。代码和标记不属于同一个文件，句号。我完全无法理解如何有人会推荐这种疯狂。

# .net - 一次发送多封独特的电子邮件

> ID：10492023
> 
> 赞同：2
> 
> 时间：2012-05-08T03:05:43.300
> 
> 标签：.net, smtp

我试图在这个问题中找到与 java 代码等效的 .Net： [如何在一个会话中发送多封电子邮件？](https://stackoverflow.com/questions/4334753/how-to-send-multiple-emails-in-one-session)令人惊讶的是，这个问题还没有在 Stack Overflow 上得到回答（或者我没有用正确的术语进行搜索。）

我希望能够连接到我的 SMTP 服务器（这是第 3 方服务器，不受我的控制）并一次发送多达 500 封左右的电子邮件。这些电子邮件是我们的用户要求的，并且都是独一无二的。我知道我可以遍历一个列表并按顺序发送它们，甚至可以使用线程来生成多个进程，但这似乎很浪费。我会打开一个连接，发送一封电子邮件，然后关闭连接。

我已经看到它暗示 .Net 将缓存一个 SMTP 连接，有点像数据库连接池，但我找不到确认。另外，我将依赖可能对我正在使用的 SMTP 产生意外副作用的代码。

有没有人在.Net中这样做过？您是否使用了第 3 方组件？您是否只是手动实现了 SMTP RFC？我真的不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:09:25.470

您可以创建一个 SMTP 对象

[SMTP客户端](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)

所以创建这些，然后`Send`为您需要发送的每封电子邮件调用该方法。

您不能真正“一次”发送所有这些邮件，但您可以在不重新创建 SMTP 对象的情况下发送它们。

# mysql - 为什么我在 Linux (Gentoo) 上出现“指定的密钥太长；最大密钥长度为 1000 字节”而不是 windows7

> ID：10492032
> 
> 赞同：1
> 
> 时间：2012-05-08T03:07:06.067
> 
> 标签：mysql, linux, utf-8, indexing

我使用 MySQL5.1.61 和 utf8 作为编码。我有两个 varchar(255) 列。当我尝试在两列上创建索引时遇到错误“指定的键太长；最大键长度为 1000 字节”。我搜索了许多堆栈，上面说 utf8 需要 3 个字节来表示一个字符。我的问题是它在 Windows7 上运行良好，但在 linux 上运行良好。我需要检查一些特殊配置吗？提前致谢。

============================编辑：我得到了答案================ ==================

它接缝了自 5.5.14 以来引入的 innodb_large_prefix 的新选项。默认情况下，单列索引的索引键最长可达 767 字节。相同的长度限制适用于任何索引键前缀。当启用 innodb_large_prefix 配置选项时，对于使用 DYNAMIC 和 COMPRESSED 行格式的 InnoDB 表，此长度限制会提高到 3072 字节。当您尝试指定比允许的更长的索引前缀长度时，该长度会静默减少到最大长度。

它在升级到 5.5.22 后工作

# python - 从 Django 查询中创建一个“矩阵”

> ID：10492033
> 
> 赞同：1
> 
> 时间：2012-05-08T03:07:09.943
> 
> 标签：python, django

我有一个类似于这个的模型：

```
class MyModel(models.Model):
    name = models.CharField(max_length = 30)
    a    = models.ForeignKey(External)
    b    = models.ForeignKey(External, related_name='MyModels_a')

    def __unicode__(self):
        return self.a + self.b.name + self.b.name 
```

所以当我查询它时，我会得到这样的结果：

```
>>> MyModel.objects.all()
[<MyModel: Name1AB>,<MyModel: Name2AC>,<MyModel: Name3CB>,<MyModel: Name4BA>,<MyModel: Name5BA>] 
```

我想将这些数据表示为类似于以下内容。

```
[[ []                 , [Name1AB] , [Name2AC] ]
 [ [Name4BA, Name5BA] , []        , []        ]
 [ []                 , [Name3CB] , []        ]] 
```

如您所见，模型中的行将是“a”；列将是'b' 我可以这样做，但这需要很长时间，因为在真正的数据库中我有很多数据。我想知道是否有内置的 Django 可以做到这一点。

我这样做是这样的：

```
mymodel_list  = MyModel.objects.all()
external_list = External.objects.all()

for i in external_list:
    for j in external_list:

        print(mymodel_list.filter(a=i).filter(arrl=j).all(),end='')
        print() 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:05:25.647

三种方法，但您将不得不进行更多研究。第三种选择可能最适合您的需求。

1) Django 查询

需要很长时间的原因是因为您在这一行中不断地访问数据库：

```
print(mymodel_list.filter(a=i).filter(arrl=j).all(),end='') 
```

您可能必须开始阅读 Django 文档中有关[查询处理方式的](https://docs.djangoproject.com/en/dev/topics/db/queries/)内容。对于您正在做的事情，您必须创建算法以避免过滤器。使用 MyModel.objects.order_by('a') 可以帮助您构建高效的算法。

2) {% ifchanged ...%} 标签

我想你正在使用 print 来发布你的答案，但你可能需要它在 html 中。在这种情况下，您可能需要了解[ifchanged](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#ifchanged)标签。它将允许您在 html 中构建您的矩阵，只需一个 db 访问权限。

3) 多对多关系

似乎您正在以一种非常特殊的方式模拟多对多关系。Django 支持[多对多关系](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)。您将需要一个额外的字段，因此您还必须阅读[此](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)内容。

最后，要通过一次访问数据库来执行您正在尝试的操作，您需要阅读[prefetch_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:47:21.460

没有内置的方法（因为你需要的并不常见）。您应该手动编写它，但我建议检索完整数据集（或至少一个表格行的数据集）并在 Python 中处理它，而不是在每个表格单元格中点击 DB。

# windows - 应用程序无法正确启动 (0xc000007b)

> ID：10492037
> 
> 赞同：175
> 
> 时间：2012-05-08T03:08:20.457
> 
> 标签：windows, delphi, 64-bit

我有一个客户端/服务器应用程序，我一直在单台 PC 上开发它。现在它需要两个串口，所以我从朋友那里借了一台PC。

当我构建我的应用程序并尝试运行或调试它（无论是在 Delphi IDE 中还是从 Windows 文件管理器中）时，它会出错“应用程序无法正确启动（0xc000007b）”。

谷歌搜索并没有带来太多，但似乎表明这不是 Delphi 特有的，并且在其他应用程序中也会发生。这似乎是由从 64 位应用程序调用 32 位 DLL 引起的，反之亦然。

*   两台电脑都是 Windows 7、64 位
*   两者都有只能处理 32 位的 Delphi Xe2 入门版
*   该应用程序在我的电脑上运行良好，但在我朋友的电脑上却不行
*   其他 Delphi 应用程序在两台 PC 上运行良好

谁能给我一个关于如何追踪这个的提示？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-05-08T05:38:54.637

[首先，我建议使用dependency walker](http://www.dependencywalker.com/)测试您的应用程序及其依赖项之间是否存在问题

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-05-08T07:09:18.280

无法解决加载时间相关性。调试它的最简单方法是使用[Dependency Walker](http://www.dependencywalker.com/)。使用 Profile 选项获取加载过程的诊断输出。这将确定故障点并指导您找到解决方案。

此错误的最常见原因是尝试将 64 位 DLL 加载到 32 位进程中，反之亦然。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-07-29T17:23:48.243

我尝试了此处指定的所有内容，并找到了另一个答案。我必须用 32 位 DLL 编译我的应用程序。我已经构建了 32 位和 64 位的库，但我`PATH`的库设置为 64 位。在我重新编译了我的应用程序（我的代码也进行了一些更改）之后，我遇到了这个可怕的错误并苦苦挣扎了两天。最后，在尝试了许多其他事情之后，我`PATH`将 32 位 DLL 更改为 64 位 DLL 之前（它们具有相同的名称）。它奏效了。为了完整起见，我只是在这里添加它。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-08T11:58:14.850

这是一个丢失的dll。可能，与 com 端口一起使用的 dll 具有未解决的 dll 依赖性。您可以使用依赖walker 和windows 调试器。例如，检查所有 mfc 库。此外，您可以使用 nrCommlib - 它是与 com 端口一起使用的绝佳组件。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-07-25T20:10:59.700

在前面的答案中已经提到，使用依赖walker 是要走的路，在我的情况下（我的应用程序不断失败并显示错误代码），dependency walker 显示了一些不相关的dll！

最后发现我可以通过转到“配置文件”菜单来运行分析，它将运行应用程序并停止在导致问题的确切 dll 处！我发现由于路径而选择了一个 32 位 dll 并修复了它。

[![在此处输入图像描述](../Images/d6ec47380f24e6c076fc74a2f807a4e8.png)](https://i.stack.imgur.com/EFY7I.png)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-10-12T23:15:23.953

我在使用 Microsoft Visual Studio 2012 开发客户端-服务器应用程序时遇到了同样的问题。

如果您使用 Visual Studio 开发应用程序，则必须确保新的（即未开发该软件的计算机）具有适当的 Microsoft Visual C++ Redistributable Package。适当地，您需要 Visual C++ Redistributable Package 的正确年份和位版本（即 x86 用于 32 位，x64 用于 64 位）。

> Visual C++ Redistributable Packages 安装运行使用 Visual Studio 构建的 C++ 应用程序所需的运行时组件。

这是[Visual C++ Redistributable for Visual Studio 2015](https://www.microsoft.com/en-us/download/details.aspx?id=48145)的链接。

您可以通过转到控制面板 -> 程序 -> 程序和功能来检查安装的版本。

这是我得到这个错误并修复它的方法：

1) 我在计算机上使用 Visual Studio 2012 开发了一个 32 位应用程序。我们称我的计算机为ComputerA。

2) 我将 .exe 和相关文件安装在另一台我们称为 ComputerB 的计算机上。

3) 在 ComputerB 上，我运行 .exe 并收到错误消息。

4) 在 ComputerB 上，我查看了 Programs and Features 并没有看到 Visual C++ 2012 Redistributable (x64)。

5) 在 ComputerB 上，我搜索了 Visual C++ 2012 Redistributable 并选择并安装了 x64 版本。

6) 在 ComputerB 上，我在 ComputerB 上运行 .exe 并没有收到错误消息。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-11-05T21:26:35.000

我最近遇到了一个问题，我正在开发一个应用程序（使用串行端口），它在我测试过的所有机器上都可以工作，但是有几个人遇到了这个错误。

事实证明，发生错误的所有机器都在运行 Win7 x64 并且从未更新过一次。

在我的特殊情况下，运行 Windows 更新修复了所有机器。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-06-20T03:00:00.257

实际上，此错误表明图像格式无效。但是，为什么会发生这种情况以及错误代码通常意味着什么？实际上，当您尝试运行为或打算与 64 位 Windows 操作系统一起使用的程序时，可能会出现这种情况，但您的计算机正在 32 位操作系统上运行。

可能的原因：

*   微软视觉 C++
*   需要重启
*   DirectX
*   .NET 框架
*   需要重新安装
*   需要以管理员身份运行应用程序

来源： http: [//www.solveinweb.com/solved-the-application-was-unable-to-start-correctly-0xc000007b-click-ok-to-close-the-application/](http://www.solveinweb.com/solved-the-application-was-unable-to-start-correctly-0xc000007b-click-ok-to-close-the-application/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-08T07:30:12.327

This may be a case where debugging the debugger might be useful. Essentially if you follow the [instructions here](http://delphi.about.com/od/delphitips2007/qt/debug_vcl.htm) you can run two ide's and one will debug into the other. If you un your application in one, you can sometimes catch errors that you otherwise miss. Its worth a try.

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-12-16T21:12:26.090

我看到了试图在没有安装 Visual C++ 的机器上运行 VC++ 调试可执行文件的错误。构建发布版本并使用它修复它。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-06-24T13:43:01.460

如果您试图证明您的应用程序依赖于**Microsoft.Windows.Common-Controls**程序集，则可以使用它。当您想要加载第 6 版的通用控件库时，您可以执行此操作 - 以便将视觉样式应用于通用控件。

您可能从 Windows XP 时代开始遵循 Microsoft 的原始文档，并将以下内容添加到您的应用程序清单中：

```
<!-- Dependancy on Common Controls version 6 -->
<dependency>
    <dependentAssembly>
        <assemblyIdentity
                type="win32"
                name="Microsoft.Windows.Common-Controls"
                version="6.0.0.0"
                processorArchitecture="X86"
                publicKeyToken="6595b64144ccf1df"
                language="*"/>
    </dependentAssembly>
</dependency> 
```

Windows XP 不再是操作系统，您也不再是 32 位应用程序。在其间的 17 年里，[微软更新了他们的文档](https://msdn.microsoft.com/en-us/library/windows/desktop/bb773175.aspx)；现在是时候更新清单了：

```
<!-- Dependancy on Common Controls version 6 -->
<dependency>
    <dependentAssembly>
        <assemblyIdentity
                type="win32"
                name="Microsoft.Windows.Common-Controls"
                version="6.0.0.0"
                processorArchitecture="*"
                publicKeyToken="6595b64144ccf1df"
                language="*"/>
    </dependentAssembly>
</dependency> 
```

Raymond Chen 对 Common Controls 有一段美好的历史：

*   [Windows XP常用控件的历史](https://blogs.msdn.microsoft.com/oldnewthing/20080129-00/?p=23663) *（[存档](https://archive.fo/oaUCp)）*

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-08-10T12:27:08.987

在我的情况下，当我在构建 DLL（使用 Visual Studio 2015）后重命名 DLL 时发生错误，以便它符合依赖于 DLL 的可执行文件所期望的名称。重命名后Dependency Walker显示的导出符号列表为空，并显示上述错误消息“应用程序无法正确启动”。

因此，可以通过更改 Visual Studio 链接器选项中的输出文件名来修复它。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-12-12T02:36:38.813

当然，主要问题是 DLL 文件丢失了，或者更可能是损坏了。如果是这种情况，那么我有一些很好的想法（特别是如果您手动下载并安装了 DLL！）...

***TLDR：****删除您已完成的每个手动复制/粘贴的 DLL，卸载旧的可再发行组件，并为*32 位和 64 位安装重新安装新的可再

**该怎么办**

自从我记得 1990 年代以来，这种将丢失的 DLL 复制/粘贴到`system32`等的解决方案曾经有效，但它似乎不再有效（2020 年）。所以如果你最近遇到这个问题，我建议：

*   在`windows\system32`和`windows\SysWOW64`中，删除所有匹配的文件，`ms*.dll`操作系统将允许您以管理员身份删除。
*   卸载 Windows 中的所有 Visual C++ Redistributables。这可以防止“你已经有了这个！” 重新安装时出现的对话框，在我们重新安装时的下一步中详细说明。
*   从定期可用的下载站点重新安装 2015-2019 Visual C++ Redistributable。如果这不起作用，请下载并安装其他的，但就个人而言，2015-2019 涵盖了我的一切。 *无论您的机器是什么，**都安装 x32 和 x64 软件包！*** （所有下载链接：[收集的 VC++ 下载链接](https://www.itechtics.com/microsoft-visual-c-redistributable-versions-direct-download-links/#Microsoft_Visual_C_2019_Redistributable)；[MSVCR120.dll 修复](https://support.microsoft.com/en-us/help/3179560/update-for-visual-c-2013-and-visual-c-redistributable-package)；[MFC140U.dll 修复](https://www.microsoft.com/en-us/download/details.aspx?id=48145)。）

**你怎么知道它在工作**

遇到这种情况的编码人员有很多变化，因此，通常会放弃只有一个可能的解决方案的想法，但让我们保持积极态度！

*   如果删除匹配的`ms*.dll`文件有效，那么您将不再收到有关`error code 0xc000007b`. 相反，您会收到有关丢失的消息`.dll`。这告诉您您正在访问正确的代码路径！
*   如果安装可再发行作品，那么某些流行的 DLL 文件应该出现在上述`system32`和`SysWO64`文件夹中。例如：`MSVCR120.dll`, `MSVCR140.dll`, `MSVCR100.dll`, `MSVCP100.dll`, `MSVCP120.dll`, `MSVCP140.dll`, 和朋友。

**最后，可能的最佳机会**

有时事情不会按计划进行（正如我们在 Windows 世界中都知道的那样）。你也可以试试下面的！

*   在 Windows 中打开“打开或关闭 Windows 功能”选项卡（在 Windows 8-10 中支持）。取消选中`.NET Framework`安装。您会看到一个小型安装。
*   重新启动系统。再次进入上述功能，重新检查`.NET Framework`，然后单击“确定”。如果这可行，您将看到“安装和更新 .NET 框架”消息，这可能需要一分钟左右的时间。完成后，我建议再次重新启动。

祝你好运！

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-02-04T12:26:02.963

还将“依赖项”下载并解压缩到放置 wget.exe 的同一文件夹中

[http://gnuwin32.sourceforge.net/packages/wget.htm](http://gnuwin32.sourceforge.net/packages/wget.htm)

然后，您将在同一文件夹中拥有一些 lib*.dll 文件以及 wget.exe，它应该可以正常工作。

（我也在这里回答了我最初找到的[https://superuser.com/a/873531/146668 。）](https://superuser.com/a/873531/146668)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-03-31T13:50:18.130

刚刚为我的个人项目解决了这个问题（感谢 Dries）。对我来说，这是因为项目路径太长了。将 .sln 保存到较短的路径 (C:/MyProjects) 并从那里编译后，它运行时没有错误。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-06-07T11:57:18.350

我刚遇到这个问题。我在 Windows 10 控制面板的“应用程序和功能”下搜索“C++”，发现几天前刚刚运行了某种更新并安装了 VC++ Redistributable 2012-2017。运行到错误消息的应用程序只需要 VC++ 2010。我卸载了所有这些，然后重新安装了 2010 x86/x64，错误消失了，应用程序按预期运行。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-02-27T17:33:14.700

您的系统上可能有多个版本的 dll。您可以搜索您的系统以找出答案。只需更改路径中目录的顺序即可解决此问题。这是我的问题。（[无法在 Qt 之外运行 Qt Creator GUI。“应用程序无法正确启动（0xc000007b）”错误](https://stackoverflow.com/questions/54876183/cannot-run-qt-creator-gui-outside-of-qt-the-application-was-unable-to-start-co)）

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-09-27T18:37:56.527

如果出于某种原因从 x64 机器加载 x86 资源，则可能会发生这种情况。为了显式避免这种情况，请将此预处理器指令添加到 stdafx.h（当然，在我的示例中，有问题的资源是 Windows Common Controls DLL。

```
#if defined(_WIN64)
#pragma comment(linker, "\"/manifestdependency:type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='amd64' publicKeyToken='6595b64144ccf1df'\"")
#endif 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-06-04T08:59:24.940

从我的存储库中获取代码并在新机器上编译时遇到了这个问题。复制整个存储库然后编译会生成一个可以运行的可执行文件。结果是一个 32 位 DLL 意外没有被签入。正如上面所说的那样，使用“Dependency Walker”来找出它出错的地方。

为了更清楚要查找的内容，请参见下面的屏幕截图，在后台，exe 尝试加载错误的 DLL（注意“64”），导致“应用程序无法正确启动 0xc00007b”，而在前台exe 被简单地复制过来（其中包括正确的 DLL）。

[![依赖步行者](../Images/b69b441e0e7794959edc22564d42f62a.png)](https://i.stack.imgur.com/nDjcx.png)

# javascript - 带有 PHP 和 Javascript 的 Google MAP API

> ID：10492038
> 
> 赞同：0
> 
> 时间：2012-05-08T03:08:44.300
> 
> 标签：javascript, html, google-maps-api-3

我是 HTML5 领域的新手，我正在尝试制作一个程序，该程序将使用 PHP 从 mysql 获取数据并使用地理编码将地址转换为 Latlng。这是一个 LBS 程序，我尝试了 2 周，我的问题是我无法将标记放入 Google MAP，我已更正定位器并加载了地图，但标记无法落在地图上，请帮忙！谢谢你，我非常感谢你的帮助。如果此代码有任何错误或问题，请多多指教，我是这方面的新手，我正在尝试更多地学习 HTML5 Javascript，谢谢，非常感谢您的建议！！！

我的代码在这里：

```
 'enter code here`<?php
              require_once 'Common/system_start.php';
              $sql="select addr from tab_mem order by sn desc ";
              $result=  mysql_query($sql);
              $data=mysql_fetch_assoc($result);
              $row=mysql_num_rows($result);
              $n = array(); 
              for($i=0;$i<$rows;$i++) 
                  { 
                   $data=mysql_fetch_row($result);
                   $n[] = $data[0]; 
                      } 
                   echo '<script type="text/javascript">'; 
                   echo var n = new Array("', join($n,'","'), '");'; 
                   echo '</script>'; 
                   ?> 
                   <code>

              <pre>
             <!DOCTYPE html>
             <html><head><meta charset="utf-8">

             <meta name="viewport" content="initial-scale=1.0,user-scalable=no"/>
             <!-- Google Maps -->
             <script type="text/javascript" src="http://maps.google.com/maps/api/js?                                  `enter code here`sensor=true"></script>

             <script type="text/javascript" charset="utf-8" src="cordova-1.6.0.js">
             </script>
             <!-- program main -->
             <script type="text/javascript">
              var iterator=0;
              markers=n;
              var a=n.length;

             function load() {
             var map_div = document.getElementById("map_div");

             //initial locator
             navigator.geolocation.watchPosition(onSuccess, onError, { frequency: 3000        `enter code here`});

              // decide location
        function onSuccess(position){

//fetching latlng from GPS 

              var latlng = new google.maps.LatLng(position.coords.latitude, 
                `position.coords.longitude);

                 // display map
                 var gmap = new google.maps.Map(
                     map_div, {
                     zoom:16,
                     center: latlng,
                     mapTypeId: google.maps.MapTypeId.ROADMAP
                   });

                       //drop the marker

                     function drop() {
                     for (var i = 0; i < a; i++) {
                     setTimeout(function() {
                       }, i * 200);
                      }
                     }

            //decode address to latlng
            //pass address data from PHP
          for(var i in n){
     var address=n;
       geocoder=new google.maps.Geocoder(); 
        geocoder.geocode({'address':address},function(results,status){
     if(status==google.maps.GeocoderStatus.OK){
        //alert("AAA");
        address=results(i).geometry.location;
     function addMarker() { markers.push(new google.maps.Marker({

                       postion:results(i).geometry.location,
                        map:gmap,
                        animation:google.map.animation.DROP
                        //iterater++; 

       }));
   //itertor++;
   }
    //markerNearBy.setMap(map);
   }else{
   alert("Geocode was not sucessful for the following reason:"+status);
     }
  });
 }
   }

   }

     function onError(error) {
             alert('code: '+ error.code+ '\n' 
                 +'message: ' + error.message + '\n');    
       }

   </script>
   </head>
   <body onLoad="load()">
    <!-- Map Display place -->
    <div id="map_div" style="width:320px; height:480px;"></div>
    </body>
    </html>
    <code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:47:20.597

您的代码看起来格式不正确。您在“for”循环中定义了“addMarker”函数。此外，它不会在任何地方被调用。

查看 Google 提供的用于处理标记和覆盖的示例代码，并尝试模拟它。该示例仅使用一个标记，但您可以简单地遍历您的结果。通过将 Marker 对象添加到数组并将地图对象设置为 Marker 的 map 属性，您的意图是正确的，但是您需要先格式化/重组您的代码，否则它将无法工作。

示例代码：

[https://developers.google.com/maps/documentation/javascript/overlays#RemovingOverlays](https://developers.google.com/maps/documentation/javascript/overlays#RemovingOverlays)

# node.js - 猫鼬吸气剂未应用于最简单的情况

> ID：10492041
> 
> 赞同：0
> 
> 时间：2012-05-08T03:09:06.980
> 
> 标签：node.js, mongodb, mongoose

我将代码中的一个问题归结为基本要素：

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema;

var get_dob = function(date) {
  return "" + (date.getMonth() + 1) + "/" + (date.getDate()) + "/" + (date.getFullYear());
};

FooSchema = new Schema({
  dob: { type: Date, get: get_dob }
});

mongoose.connect("mongodb://127.0.0.1/test");
Foo = mongoose.model('Foo', FooSchema);

Foo.remove({}, function(err) {
  var f;
  f = new Foo({
    dob: Date.now()
  });
  f.save(function(err) {
    Foo.findOne({}, function(err, doc) {
      console.log(doc.toObject({
        getters: true
      }));
    });
  });
}); 
```

日期的输出是：

```
Mon, 07 May 2012 07:00:00 GMT 
```

为什么不应用吸气剂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:24:42.807

get/cast 操作的顺序存在错误。这种方式已经一年多了。这将在即将发布的 3.x 版本中得到修复。如果还没有开票，请随时[在这里开票。](https://github.com/learnboost/mongoose/issues/new)

# jquery - 将样式添加到树的节点（“li”）

> ID：10492043
> 
> 赞同：0
> 
> 时间：2012-05-08T03:09:23.517
> 
> 标签：jquery, css

我有以下树- [http://jsfiddle.net/anirbankundu/wzEBW/](http://jsfiddle.net/anirbankundu/wzEBW/)

这棵树可以有 n 个节点。当用户将鼠标悬停在单个节点上时，节点背景颜色需要更改。基本上需要在li中添加一个悬停类。在任何时候只能突出显示一个节点。我应用它的样式基本上是添加 li 的后续子节点。（见小提琴链接）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:13:55.797

您可以“撤消”子节点上的突出显示：

```
li:hover {
   background: red;
}

li:hover li {
   background: white;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:20:01.380

我只是将“a”元素包裹在“div”周围：

```
<script id="itemTmpl" type="text/html">
    <li>
        <div>
            <a href="#" data-bind="click: $root.toggleChildren, text: showChildren() ? ' - ' : ' + '"></a>
            <a href="#" data-bind="text: name"></a> 
        </div>
        <ul data-bind="visible: showChildren, template: { name: 'itemTmpl', foreach: children }"></ul>
    </li>
 </script> 
```

并对css做一点改动：

```
li ul li div:hover {
    background-color: #C0DDF0;
}​ 
```

它似乎工作[http://jsfiddle.net/twTcw/](http://jsfiddle.net/twTcw/)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T03:28:55.757

看起来你让它工作了，但这有点简单，如果你在未来添加关卡，可能会导致更少的随机性：

`li ul li:hover { background-color: #C0DDF0; }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T03:31:30.527

在 CSS 中使用

```
ul li ul li.hover {
    background-color: #C0DDF0;
} 
```

代替

```
ul li ul li:hover {
    background-color: #C0DDF0;
} 
```

在 JavaScript (jQuery) 中写：

```
$("ul li ul li","#pnlDestinations").live("mouseenter", function() {
    $(this).addClass("hover").siblings("li").removeClass("hover");
}).live("mouseleave", function() {
    $(this).removeClass("hover");
}); 
```

这将实现脚本的跨浏览器兼容性。请在[此处](http://jsfiddle.net/wzEBW/1/)查看更新的脚本。由于您的示例脚本不包含任何子列表，因此它现在不起作用。但是，如果您想查看演示的工作版本，请从[hear](http://jsfiddle.net/wzEBW/5/)中找到它。

# java - 尝试更新 JLabel 的内容

> ID：10492046
> 
> 赞同：2
> 
> 时间：2012-05-08T03:09:40.347
> 
> 标签：java, swing, jlabel

我又带着一个更简单的问题回来了！我希望这个 JLabel (triedLettersLA) 的内容在整个应用程序中定期更新（我已经处理了那部分）。

但我想在标签上添加文字。不要完全重写它。例如.. 如果文本说“Letters Tried:”，我想在三个不同的场合添加“N”和“X”，然后是“H”。所以最后，它看起来像这样“尝试的字母：NX H”。这就是我所拥有的，它完全不起作用..

这是最高级的，

```
JLabel triedLettersLA = new JLabel("Tried letters:");
public boolean used[] = new boolean[26]; 
```

这在我的代码中较低..

```
StringBuffer missedLetter = new StringBuffer();
for (int le = 0; le <= 25; le++) {
     if (used[le]) missedLetter.append((char)(le + 'a'));
     String triedLettersLA.getText(t);
     triedLettersLA.setText(t + " " + missedLetter.toString());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T03:15:49.103

~~您发布的代码毫无意义（也无法编译）。~~好吧，它现在可能会编译。

话虽如此，`String`Java 中的 a 是*不可变*的；你不能改变它。要更改 a 的文本，`JLabel`您需要创建一个新的`String`并调用`JLabel`'`setText()`方法。

```
String old = triedLettersLA.getText();
String newString = old + " N"; // this creates a new String object
triedLettersLA.setText(newString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:14:15.133

废话代码：

```
String triedLettersLA.getText(t);
```

将其更改为：

```
String t = triedLettersLA.getText();
```

# javascript - Vim 将内容行转换为 javascript 字符串文字

> ID：10492047
> 
> 赞同：1
> 
> 时间：2012-05-08T03:10:11.447
> 
> 标签：javascript, vim

我在 vim-script 中寻找一些方法

```
json.dumps(join(getlines(1,'$'),'\n')) 
```

就像 python 的[json](http://docs.python.org/library/json.html)模块一样

例如在 Vim 中打开一个文本文件：

```
1\. var  a=1,
2\. b=2,
3\. c=""; 
```

调用函数应该输出如下

```
"var a=1,\nb=2,\nc=\"\"" 
```

它是一个有效的 javascript 字符串文字

无论如何，我找到了一种方法来实现这一点，以下是我的代码

```
let b:content = join(getline(1,'$'),"\\n\\\n") . "\\\n"
let b:content = printf("\"%s\"", escape(b:content,"\"")) 
```

上面的代码运行后，你会得到

```
"var  a=1, \n\
 b=2,\n\
 c=\"\";\
 " 
```

[它是一个有效的多行 javascript 字符串文字，但缺点是根据这篇文章](https://stackoverflow.com/questions/805107/how-to-create-multiline-strings)，此功能将在 ECMA-262 3rd Edition 中删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:53:59.983

阅读[RFC](http://www.ietf.org/rfc/rfc4627)后，我写了这个函数，也许有帮助

```
" utility encode to json string
if !exists("*b:json_encode_basestring")
    function b:json_encode_basestring(str)
        let l:ret = a:str
        let l:ret = substitute(l:ret,'\%x5C','\\\\','g')
        let l:ret = substitute(l:ret,'\%x22','\\"','g')
        let l:ret = substitute(l:ret,'\%x2F','/','g')
        let l:ret = substitute(l:ret,'\%x08','\\b','g')
        let l:ret = substitute(l:ret,'\%x0C','\\f','g')
        let l:ret = substitute(l:ret,'\%x0A','\\n','g')
        let l:ret = substitute(l:ret,'\%x0D','\\r','g')
        let l:ret = substitute(l:ret,'\%x09','\\t','g')
        " TODO unicode escape
        " http://www.ietf.org/rfc/rfc4627
        return l:ret
    endfunction
endif

if !exists("*b:json_encode")
    function b:json_encode(lines)
        let l:json = []
        let l:lines = a:lines
        for line in l:lines
            call add(l:json, b:json_encode_basestring(line))
        endfor
        let l:str = join(l:json,'\n').'\n'
        let l:str = printf('"%s"',l:str)
        return l:str
    endfunction
endif 
```

用法：

```
:echo b:json_encode(getline(1,'$')) 
```

# jquery - jquery滚动后动画

> ID：10492048
> 
> 赞同：0
> 
> 时间：2012-05-08T03:10:27.047
> 
> 标签：jquery, scroll, scrollto

在滚动动画之后或当我单击任何菜单链接但它不起作用时，我正在为徽标设置动画。

我得到了动画滚动的代码：

```
jQuery(function() {
            jQuery('a').bind('click',function(event){
                var $anchor = jQuery(this);

                jQuery('html, body').stop().animate({
                    scrollTop: jQuery($anchor.attr('href')).offset().top
                }, 2000,'easeInOutExpo');

                event.preventDefault();
            });
        }); 
```

然后，要为徽标设置动画，如果窗口位置发生变化，我会这样做：

```
jQuery(document).ready(function(){
 jQuery(window).bind('scroll',function(){
        var wscroll = jQuery(this).scrollTop();
        if(wscroll > 500){
            jQuery('#logo').delay(800).animate({
                    left:'+48px'
                    });
            }else if(wscroll < 500){
                jQuery('#logo').animate({
                    left:'-250px'
                    });
                }
                console.log(wscroll);
        });

}); 
```

[这是](http://desarrollo.cbwagencia.com/consorcio/)示例

但这不起作用，一点也不。

一些指导表示赞赏。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T03:38:31.953

注意：console.log 会导致脚本在 Firefox 中崩溃。

此外，真正的问题是您需要在动画上使用 .stop() 。它似乎在不断地运行动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:01:33.053

您可以使用[ScrollTo](http://demos.flesler.com/jquery/scrollTo/)插件和`OnAfter`功能：

```
$(...).scrollTo( 'SomeWhere', 1600, {onAfter:function(){ 
   //Your code
} } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:00:50.043

我写了一个简单的例子，也许会对你有所帮助。它对我有用，但动画的反应很慢......不知道为什么：/

[http://jsfiddle.net/pVHwY/1/](http://jsfiddle.net/pVHwY/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:40:55.683

您必须对插件进行任何工作滚动，这是滚动[Jquery 滚动插件时要设置动画的插件之一](http://www.jquery4u.com/jquery-scrolling/top-15-jquery-scrolling/)

# xml - WSO2 如何在 VFS 中设置回复文件名

> ID：10492050
> 
> 赞同：0
> 
> 时间：2012-05-08T03:10:43.343
> 
> 标签：xml, wso2, vfs

我使用 VFS 将文件从 txt 转换为 xml。我的 txt 文件名是：`COS_201205071103_0000000001.txt`. 并且回复文件名必须是`COS_201205071103_0000000001.XML`. 我想我需要获取 txt 文件名并将其更改为 xml。但是如何获取`txt`文件名呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:26:28.590

在 In Sequence 中，您可以将文件名设置为这样的属性。

```
<property name="filename" expression="fn:concat(get-property('transport', 'FILE_NAME'), '.xml')"/>
            <log level="custom">
                <property name="show-name" expression="get-property('filename')"/>
            </log> 
```

然后你可以像这样设置输出文件。

```
<property name="transport.vfs.ReplyFileName" expression="get-property('filename')" scope="transport"/> 
```

# php - 使用 CI 活动记录组合 `where` 和 `like` 语句

> ID：10492058
> 
> 赞同：3
> 
> 时间：2012-05-08T03:12:15.330
> 
> 标签：php, sql, codeigniter

长话短说：有没有可能，如果有的话 - 我如何构建一个看起来有点像这个的查询

```
SELECT * FROM a
    WHERE row = 1 AND 
    (other_row LIKE '%..%' OR another_row LIKE '%..%') 
```

基本上我无法提出/找到解决这个问题的方法。我似乎无法弄清楚如何将括号添加到 activerecords 查询中。这甚至可能吗？

我当前的代码：

```
$data = $this->where('row', 1)
    ->like('another_row', '...')        
    ->or_where('row', 1)
    ->like('other_row', $search)                
    ->get('a')
    ->result(); 
```

结果：

```
SELECT * FROM (`a`) WHERE `row` = 1 OR `row` = 1 AND `another_row` LIKE '%...%' AND other_row` LIKE '%...%' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T05:40:11.810

你可以试试这个。

```
 $query = $this->db->select('*')
            ->from('a')
            ->where('row',1)
            ->where("(other_row LIKE '%%' OR another_row LIKE '%%' )")
            ->get();

    foreach ($query->result() as $row) {
        //do sth.
    } 
```

您可以编写自定义查询字符串（来自活动记录类）

```
 Custom string:
 You can write your own clauses manually:

 $where = "name='Joe' AND status='boss' OR status='active'";

 $this->db->where($where); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:26:07.323

我也有问题，`or_where`所以我只是让我的自定义查询像

```
$this->db->query("SELECT * FROM `a` WHERE `row`=1 AND (CONDITION1 OR CONDITION2)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:26:53.493

```
$sql= "SELECT * FROM `a`
WHERE row = '1' AND 
(other_row LIKE '%" . $value . "%' OR another_row LIKE '%" . $value . "%')";
 $this->db->query($sql); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T05:44:16.553

你为什么不试试这个：

```
 $this->db->where("row = 1 AND 
        (other_row LIKE '%..%' OR another_row LIKE '%..%')");
$this->db->get('a'); 
```

这就是您可以在 CI 中编写自定义 WHERE 的方式。如果不是您要的，请随时解释

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-13T07:11:36.453

您可以使用以下内容：

```
$this->db->like('title', 'match', 'before'); 
```

它将产生：

```
WHERE `title` LIKE '%match' ESCAPE '!' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-04T10:36:07.193

```
$this->db->where('salary_range_min >= ',$salarymin)
$this->db->where('salary_range_max <= ',$salarymax)
$this->db->where('job_title like '.$title.'% or skill like %'.$title.'%');
// OR */
$this->db->where('job_title like '.$title.'% or skill like %'.$title.'%',FALSE);
// OR */
$this->db->where('job_title like '.$title.'% or skill like %'.$title.'%',NULL); 
```

试试这个

# javascript - HTMLCollection 在 ie6/7 中未定义？

> ID：10492059
> 
> 赞同：1
> 
> 时间：2012-05-08T03:12:21.867
> 
> 标签：javascript, internet-explorer

HTMLCollection 和 NodeList 好像在 ie6/7 中没有定义，下面的代码会在 ie6/7 中报错

```
alert(HTMLCollection) 
```

那么如何识别天气对象是 HTMLCollection 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:21:47.353

HtmlCollection 在 IE 6/7 中不可用。您将不得不尝试像在[create-a-htmlcollection](https://stackoverflow.com/questions/7754269/create-a-htmlcollection)中一样对其进行填充或使用一些外部库来处理问题（这是？）

# python - py2neo - neo4j.GraphDatabaseService(db_string) 使 python 崩溃；没有错误日志

> ID：10492060
> 
> 赞同：2
> 
> 时间：2012-05-08T03:12:26.457
> 
> 标签：python, rest, installation, neo4j

最近几天我安装了 Python 2.7.3 和 Neo4J 社区版 1.8.M01。我设法让嵌入式 python 绑定工作，但由于我需要 py2neo REST 绑定，我已经安装了它们，如[http://py2neo.org/](http://py2neo.org/)中所述。此外，由于“权限被拒绝（公钥）”错误，我无法直接从 git 下载，因此我从下载部分获取了可用的 py2neo-1.2.6.tar.gz 版本。

虽然安装本身不是问题，但我无法让示例像调用 neo4j.GraphDatabaseService(' [http://localhost:7474/db/data](http://localhost:7474/db/data) ') python 崩溃而没有任何错误消息 - Win7 64bit 只弹出显示应用程序未响应的消息。Java、Python 和 Neo4J 都在 64 位基础上运行，服务器可通过[http://localhost:7474](http://localhost:7474)访问。我什至尝试按照此处所述强制输出：[Catching a python app before it exits](https://stackoverflow.com/questions/2535403/catching-a-python-app-before-it-exits) - 但仍然没有堆栈跟踪或错误日志。

我已经从头开始或通过 www.lfd.uci.edu/~gohlke/pythonlibs/ 提供的可执行文件安装了好几次，但没有任何东西可以让这个例子工作。

我已经安装了 tornado 2.2.1 和 pycurl 7.23.1。pycurl.version_info() 揭示： `(3, '7.23.1', 464641, 'Windows', 28, 'OpenSSL/0.9.8s', 0, '1.2.5', ('gopher', 'http', 'https', 'imap', 'imaps', 'pop3', 'pop3s', 'rtsp', 'smtp', 'smtps'), None, 0, None)`- 此外

```
c = pycurl.Curl()
c.setopt(c.URL, 'http://stackoverflow.com')
c.perform() 
```

返回起始页的内容。

我已经通过 print-messages 跟踪堆栈跟踪到 tornado.IOLoop.start() 并进入 _run_callback() ，它实际上执行 callback() 并崩溃。不确定是否应在此处调用在 tornado.HTTPClient.fetch() 内部定义的回调函数 - 打印回调结果`<tornado.stack_context._StackContextWrapper object at ...>`

有关如何解决此问题的任何建议？

在此先感谢，罗马

* * *

编辑：纠正端口的错字

* * *

编辑2：经过更长的调试会话，稍微缩小了故障点，奈杰尔为我提供了一种通过交换来处理我的问题的方法

```
self._http = http or httpclient.HTTPClient(curl_httpclient.CurlAsyncHTTPClient) 
```

和

```
self._http = http or httpclient.HTTPClient() 
```

在 rest.py 的第 55 行。这是一种解决方法，但不能解决 tornado/pycurl 后面的问题。Windows 管理控制台将 pycurl.pyd 声明为崩溃的原因，并且由于一些节点（在 GraphDatabaseService 的很少功能初始化之后）存储在 Neo4J 中并且下面的调试输出不再显示，因此必须发生崩溃在发送请求和返回到主应用程序之间。我目前认为，我在 Windows 上的选择民意调查是崩溃的原因，或者 curl-handle 可能在不同线程之间共享 - 这不应该发生（[http://curl.haxx.se/libcurl /c/libcurl-tutorial.html](http://curl.haxx.se/libcurl/c/libcurl-tutorial.html) ) - 在某种程度上是 imo 最容易理解的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:03:22.633

得知您在使用 py2neo 时遇到问题，我们深感抱歉。我没有在 Windows 下进行任何测试，因为我只运行 Linux，所以我不确定那里是否存在任何一般的不兼容性。我也知道错误报告少于应有的数量，这受到我在项目上工作时间的限制。

也就是说，我注意到您在端口 4747 而不是默认的 7474 上运行 - 或者这是一个错字？您是否直接针对根数据库 URI 尝试过短 cURL 测试？

您似乎已经涵盖了所有基础，查看了所涉及的层，所以我不确定这里还有什么可以看的。我已经考虑添加一个选项，以便能够在 curl_httpclient 和 simple_httpclient 之间切换 - 这可能会提供另一种尝试。在接下来的几天里，我会努力解决一些问题。

尼日

# cakephp - 上传插件 - 如何覆盖路径？

> ID：10492062
> 
> 赞同：0
> 
> 时间：2012-05-08T03:12:28.453
> 
> 标签：cakephp, plugins, upload, cakephp-2.2

使用[上传插件](https://github.com/josegonzalez/upload/tree/2.0)。我想将foreign_key文件夹中的文件上传到“保证”随机，因为在覆盖文件之前它似乎没有对现有文件进行任何检查。

我想要一个文件上传到类似的东西：

```
/webroot/uploads/02/88/06/4f93676e-347c-4e0c-8e6c-0a3cadcd7f7c/my_photo.jpg 
```

当我设置时`'pathMethod'=>'random'`，我得到了 3 个随机数（0-100 之间）文件夹，但我没有得到主键文件夹。

或者，如果我设置'pathMethod'=>'primaryKey'，我会得到主键文件夹，而不是随机数。

在[插件的上传行为中](https://github.com/josegonzalez/upload/blob/master/Model/Behavior/UploadBehavior.php)，有一个`uploadSettings`函数（不确定这是否是它的用途），但是当我尝试通过我的控制器运行它时，它什么也没做：

```
//ArticleDatasController
$this->Upload->uploadSettings('Upload', 'photo', array('path'=> '{ROOT}webroot{DS}uploads{DS}test{DS}ArticleData{DS}{field}'));
if($this->Upload->save($this->request->data)) { 
```

这是我的上传模型的 $actsAs：

```
//Upload model
public $actsAs = array(
    'Upload.Upload' => array(
        'photo' => array(
            'thumbnailSizes' => array(
                'xvga' => '1024x768',
                'vga' => '640x480',
                'thumb' => '80x80',
            ),
            'thumbnailMethod' => 'php',
            'thumbnailQuality' => '80',
            'pathMethod'=>'random',
            'path' => '{ROOT}webroot{DS}uploads{DS}{field}{DS}',
            'maxSize' => '5242880', //5MB
            'mimetypes' => array('image/jpeg', 'image/png', 'image/gif', 'image/bmp'),
            'extensions' => array('jpg', 'gif', 'png', 'bmp'),
        ),
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:42:56.490

我前几天刚用这个。首先从它的外观来看，你可以得到其中之一，但不能同时得到。我不确定 uploadSettings() 函数是否不起作用，但我会尝试像这样使用它：

```
$this->Upload->uploadSettings('Upload', 'photo', 'path',  '{ROOT}webroot{DS}uploads{DS}test{DS}ArticleData{DS}{field}'); 
```

它似乎接受数组和非数组，但它可能无法正确接受数组，所以试试这种方式。

另外，至于您要完成的工作，您提到了外键，还提到了主键。我不相信这支持使用外键，但如果您使用上传条目的主键作为 UUID 应该没问题。但是，如果您尝试使用外键，请查看路径设置和 rootDir 设置的组合。

# c - 大数字之间的比较似乎不起作用

> ID：10492069
> 
> 赞同：0
> 
> 时间：2012-05-08T03:13:37.297
> 
> 标签：c, if-statement

我编写的程序需要两个数字，然后进行除法和模运算。

代码是

```
#define ADDRESS_SPACE 4294967295
int main (int argc, char *argv[]) {
    long int pagesize = atoi(argv[1]), virtaddr = atoi(argv[2]);

    if (virtaddr >= ADDRESS_SPACE) {puts("Address is too large"); return 1;}

    printf("%lu\n", virtaddr);
    printf("%lu\n", ADDRESS_SPACE);
    printf("Page = %lu\nOffset = %lu\n", virtaddr/pagesize, virtaddr%pagesize);
    return 0;
} 
```

并`./page 1024 9999999999999999999999999999999999999999999999`给出以下输出

```
18446744073709551615
4294967295
Page = 0
Offset = 18446744073709551615 
```

如果`virtaddr`大于`ADDRESS_SPACE`，为什么 if 语句不起作用？我知道有溢出，但打印变量不会显示任何错误，它们仍然是数字（long int 可以采用的最大值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:20:56.053

因为`atoi`从 ASCII 转换到`ints`和不转换到`long ints`和`9999999999999999999999999999999999999999999999`转换成`int`.

尝试使用[sscanf](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)进行字符串转换，并尝试更合理的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T03:25:39.533

`atoi``INT_MAX`当数字超出范围时返回。将 32 位与 32 位`int`进行`4294967295`比较总是错误的，因为`INT_MAX`它大约小两倍。如果您使用[`strtoll`](http://linux.die.net/man/3/strtoll)代替`atoi`，您的解决方案将有效，因为结果将在`long long`. 或者，您可以使用`INT_MAX`而不是`ADDRESS_SPACE`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T03:27:52.617

`18446744073709551615`是 -1 的无符号版本。`virtaddr`已签名，但您将其显示为未签名；当然 -1 将小于任何有效的正数。

# git - 在 git 中创建一个新分支作为主分支，而不会弄乱现有的分支

> ID：10492071
> 
> 赞同：1
> 
> 时间：2012-05-08T03:14:02.390
> 
> 标签：git, version-control

我有一个新的工作，我想成为大师。它与 master 的分歧太大而无法合并或变基（尽管我已经手动移植了该功能）。我意识到我可以轻松地做 a `git branch -D master; git checkout new-master; git checkout -b master`，但我不想搞砸任何叉子。

理想情况下，我想引入一个提交，将当前的 master 转变为我可以从我的新分支应用我的更改的状态，这样任何有 fork 的人都可以`git pull origin master`毫无意外地进行 git 操作。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:32:24.400

如果您只想 branch`master`引用其*内容*与 branch 相同的新提交，并且`branch`之间的增量是“更改所有内容以匹配分支的内容”，那很容易：`master^``master``branch`

```
$ git checkout branch
$ git symbolic-ref HEAD refs/heads/master
$ git status    # you'll see what you're about to commit, here
$ git commit    # make that new commit 
```

请注意，*此处不会*引用`master`分支历史记录。*`branch`*

 *如果您希望提交看起来像一个将所有内容更改为外观的合并`branch`，这似乎可以解决问题，但我还没有很好地测试它：

```
$ git checkout master
$ git merge --no-commit -s ours branch  # this sets up the merge
$ git rm -r .                           # this empties it out
$ git checkout branch -- .              # this adds everything from branch
$ git status   # again, just to see what you're about to commit
$ git commit   # and maybe edit the message to note that you took "branch" 
```

现在`master^`是大师曾经的样子，`master^2`是尖端的`branch`。*

# ruby-on-rails - Rails - 可以有两个不同子项的模型

> ID：10492073
> 
> 赞同：1
> 
> 时间：2012-05-08T03:14:46.390
> 
> 标签：ruby-on-rails, activerecord

我有一个带有常用字段的标准设计用户模型。

这是针对人们要么正在寻找住宿地点，要么正在寻找住宿地点的情况。所以我有两类用户，一个人可以是。这两个类别非常不同（即寻找住宿地点的人与有住宿地点的人将拥有非常不同的领域）。

所以用户有：

```
User: name, email, password, profile_id 
```

用户也可以拥有个人资料（即他们正在寻找房子）。

```
Profile: age, sexuality, religion, occupation 
```

这就是我目前所拥有的。现在我需要稍微改变一下，这样用户就可以拥有个人资料或者......他们可以拥有房子（即他们有房子并且正在寻找更多人）：

```
House: price_per_week, address, etc 
```

如何最好地在 ActiveRecord 中建模？某种多态关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:38:39.570

我发现一般来说，如果多态关系建模的对象甚至略有不同，那么随着时间的推移，多态关系就不能很好地发挥作用。对于您的情况，我建议将两个对象分开。

一般来说，最好的方法是考虑您要检索数据的方式。例如，我想你想同时访问：

```
@user.house 
```

或者

```
@user.profile 
```

所以我建议首先在表和 and 表之间建立关系（可以是`users`可选*的*`profiles`）`houses`。我还将添加一个`type`字段，可用于确定用户是两种类型中的哪一种。

这允许用户属于*任何一种*类型，并允许他们同时拥有 a`profile`和 a `house`。

所以房屋和个人资料`belong_to`用户，以及用户`have_many`（或`have_one`）房屋和个人资料

# c# - 读取自定义控件属性在构造函数中返回 0

> ID：10492076
> 
> 赞同：0
> 
> 时间：2012-05-08T03:15:42.613
> 
> 标签：c#, .net, winforms, custom-controls, design-time

如何正确读取通过设计时设置的自定义控件属性的值？

目前，行和列是在控件的属性列表中设置的（vs.net 作为 ide），但是当从控件的构造函数中读取时，这两个属性都返回 0。我怀疑构造函数是在应用程序启动期间分配属性之前执行的。

这样做的正确方法是什么？

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.ComponentModel;

    namespace HexagonalLevelEditor.HexLogic{

        class HexGrid : System.Windows.Forms.Panel {

            public HexGrid() {
                for(int c = 0; c < this.Columns; ++c) {
                    for(int r = 0; r < this.Rows; ++r) {
                        HexCell h = new HexCell();
                        h.Width = 200;
                        h.Height = 200;
                        h.Location = new System.Drawing.Point(c*200, r*200);
                        this.Controls.Add(h);
                    }
                }
            }

            private void InitializeComponent() {
                this.SuspendLayout();
                this.ResumeLayout(false);
            }

            private int m_rows;
            [Browsable(true), DescriptionAttribute("Hexagonal grid row count."), Bindable(true)]
            public int Rows {
                get {
                    return m_rows;
                }

                set {
                    m_rows = value;
                }
            }

            private int m_columns;
            [Browsable(true), DescriptionAttribute("Hexagonal grid column count."), Bindable(true)]
            public int Columns { 
                get{
                    return m_columns;
                }

                set {
                    m_columns = value;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:25:38.877

最终，当任一属性行/列发生更改时，您真的想重新制作网格。所以你应该有一个方法来重新制作网格，并在设置属性时调用它。

```
public void RemakeGrid()
{
    this.ClearGrid();

    for(int c = 0; c < this.Columns; ++c)
    {
        for(int r = 0; r < this.Rows; ++r)
        {
            HexCell h = new HexCell();
            h.Width = 200;
            h.Height = 200;
            h.Location = new System.Drawing.Point(c*200, r*200);
            this.Controls.Add(h);
        }
    }
}

private int m_rows;

[Browsable(true), DescriptionAttribute("Hexagonal grid row count."), Bindable(true)]
public int Rows
{
    get
    {
        return m_rows;
    }
    set
    {
        m_rows = value;
        this.RemakeGrid();
    }
}

// Same goes for Columns... 
```

# matlab - 使用后 x 轴标签移动到图表顶部

> ID：10492077
> 
> 赞同：1
> 
> 时间：2012-05-08T03:15:43.970
> 
> 标签：matlab, graphics, graph

我正在使用[Rotate Tick Label](http://www.mathworks.com/matlabcentral/fileexchange/8722)将 x 轴上的标签更改为垂直方向。

在使用旋转刻度标签功能之前，x 轴上的标签位于图表底部：

![在此处输入图像描述](../Images/246589c17cca6e8dce4ef5cd4b74970f.png)

在以下命令之后：

```
TH= rotateTickLabel(gca,90); 
```

图表如下所示：

![在此处输入图像描述](../Images/a063ab3c62f84f618e8c7eca1ad6d85b.png)

如何让标签留在图表底部而不是移动到顶部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:09:51.090

出现此错误的原因是，在使用“plot”绘制的图上，YTicks 是自下而上定义的。在图像图（使用“图像”制作）上，YTicks 是自上而下定义的。对 rotateticklabel.m 进行以下两项更改：

编辑第 54 行，使其看起来像这样：

```
th=text(b,repmat(c(end)-.1*(c(end-1)-c(end)),length(b),1),a,'HorizontalAlignment','right','rotation',rot); 
```

编辑第 56 行，如下所示：

```
th=text(b,repmat(c(end)-.1*(c(end-1)-c(end)),length(b),1),a,'HorizontalAlignment','left','rotation',rot); 
```

为了完成，整个 rotateticklabel.m 应该如下所示：

```
function th=rotateticklabel(h,rot,demo)
%ROTATETICKLABEL rotates tick labels
%   TH=ROTATETICKLABEL(H,ROT) is the calling form where H is a handle to
%   the axis that contains the XTickLabels that are to be rotated. ROT is
%   an optional parameter that specifies the angle of rotation. The default
%   angle is 90\. TH is a handle to the text objects created. For long
%   strings such as those produced by datetick, you may have to adjust the
%   position of the axes so the labels don't get cut off.
%
%   Of course, GCA can be substituted for H if desired.
%
%   TH=ROTATETICKLABEL([],[],'demo') shows a demo figure.
%
%   Known deficiencies: if tick labels are raised to a power, the power
%   will be lost after rotation.
%
%   See also datetick.

%   Written Oct 14, 2005 by Andy Bliss
%   Copyright 2005 by Andy Bliss

%DEMO:
if nargin==3
    x=[now-.7 now-.3 now];
    y=[20 35 15];
    figure
    plot(x,y,'.-')
    datetick('x',0,'keepticks')
    h=gca;
    set(h,'position',[0.13 0.35 0.775 0.55])
    rot=90;
end

%set the default rotation if user doesn't specify
if nargin==1
    rot=90;
end
%make sure the rotation is in the range 0:360 (brute force method)
while rot>360
    rot=rot-360;
end
while rot<0
    rot=rot+360;
end
%get current tick labels
a=get(h,'XTickLabel');
%erase current tick labels from figure
set(h,'XTickLabel',[]);
%get tick label positions
b=get(h,'XTick');
c=get(h,'YTick');
%make new tick labels
if rot<180
    th=text(b,repmat(c(end)-.1*(c(end-1)-c(end)),length(b),1),a,'HorizontalAlignment','right','rotation',rot);
else
    th=text(b,repmat(c(end)-.1*(c(end-1)-c(end)),length(b),1),a,'HorizontalAlignment','left','rotation',rot);
end 
```

编辑 rotateticklabel.m 后，您现在可以在使用“图像”制作的图上成功使用它，如以下简短示例所示：

```
A = magic(5);
image(A)
datetick('x',0,'keepticks')
h=gca;
set(h,'position',[0.13 0.35 0.775 0.55])
rot=90;
th = rotateticklabel(h,30) 
```

# compiler-construction - 从硬件编写低级语言

> ID：10492079
> 
> 赞同：2
> 
> 时间：2012-05-08T03:15:54.993
> 
> 标签：compiler-construction, low-level, hardware-programming

我有兴趣了解如何在没有像 unix 系统调用这样的高级函数的帮助下编译/创建一种非常简单的语言（即 Brainfuck）。我想在一些依赖于 CPU 的低级程序集中为该语言编写一个编译器，以便我可以提供简单语言的源代码并最终得到一个二进制文件。不确定这是否清楚，但基本问题是如何在没有硬件中不存在的任何帮助的情况下将源代码转换为二进制文件。

编辑：更简洁的问题陈述......

**给定：**

-硬件（主板/CPU等）

**没有给：**

-UNIX/DOS

-C/FORTRAN/任何其他语言

我将如何实现像 Brainfuck 这样的简单语言？

我知道有更多实用的编译方法，但出于教育目的，我对此很感兴趣。

抱歉，如果这个问题是多余的或显而易见的——我不是计算机科学家，所以也许我只是不知道在网上找到解决问题的正确词汇。如果有人可以提供有关该主题的链接或文本，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:02:11.760

查看维基百科上的描述，这不是一项艰巨的任务。我仍然可能会以您知道的某种语言开始，也许喜欢，也许不是。C是一个不错的选择。文件 I/O 是一个小型或大型项目，具体取决于平台等。稍后担心，在语言的“源”中编译。对于该来源中的每个角色，执行任务

```
> ++ptr;
< --ptr;
+ ++*ptr;
etc 
```

然后将其转换为组装。您只需要一个寄存器来保存 ptr，几行 asm 来初始化数组/ram 并将寄存器/ptr 设置为开头。另一个寄存器遍历源代码。你只是在寻找 8 个字符，你可以 if-then-else 遍历这些字符，除非有一些模式可以让它们更容易处理。如果你愿意，你可以制作一个 256 字节的查找表，并将其用作该指令的处理程序的地址，或者将它们转换为 0-7 的整数，然后在跳转表中使用它。

那是一个解析器，不一定是编译器。我会用 C 或某种高级语言编写编译器，它接收一个字节数组，即程序，对于每条输出实现该指令的 asm 源代码的指令，输入、输出（使用 ARM asm)

```
add r0,#1 
```

减号

```
ldr r1,[r0]
sub r1,#1
str r1,[r0] 
```

r0 是 ptr 寄存器，而 r1 只是帮忙。

如果你真的反对使用像 printf 这样的调用，那么让这段代码的输出成为一个字节数组，这些字节是 asm 源的 ascii 输出每个字符 a、d、d、空格、r、0、逗号、#、 1、cr、lf等。在 asm 和一些高级语言中相当容易实现。如果您想直接转为二进制，则只需输出机器代码，甚至更容易。

将源字符串输入此编译器并将输出输入到稍后可以执行的某个文件中可能会进行系统调用。如果您在同一平台上运行，则可以避免输出成为文件，并且可以在某种意义上执行自修改代码，即您在某个地址构建机器代码，然后在完成解析后跳转到该地址执行。

写这个答案比用 C 或 asm 实现解决方案花费的时间要长很多倍。你遇到的具体困难是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:52:18.140

您可以很容易地将 Brainfuck 源代码编译到 DOS .COM 应用程序中（您还需要 NASM 或一些额外的代码来发出指令操作码和计算跳转）。下面是一个稍微修改过的 bf 解释器，变成了某种编译器：

```
// file: bfcompil.c

#include <stddef.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define MAX_CODE_SIZE 30000

char code[MAX_CODE_SIZE];
char* pc = &code[0];
char* pcEnd = &code[0];

#define MAX_DATA_SIZE 30000

char data[MAX_DATA_SIZE] = { 0 };
char* pd = &data[0];

// Structures for quick bracket matching
unsigned brStack[MAX_CODE_SIZE];
unsigned brSptr = 0;
unsigned brMatch[MAX_CODE_SIZE];

int main(int argc, char** argv)
{
  FILE* f = NULL;
  int ch;

  if (argc != 2)
  {
    fprintf(stderr, "usage:\n  bfcompil <brainfuck-source-code-file>\n"
                    "bfcompil will output NASM-compilable source code for"
                    "a DOS program\n");
    return EXIT_FAILURE;
  }

  if ((f = fopen(argv[1], "rb")) == NULL)
  {
    fprintf(stderr, "can't open file \"%s\" for reading\n", argv[1]);
    return EXIT_FAILURE;
  }

  while ((ch = getc(f)) != EOF)
  {
    if (strchr(" \t\r\n", ch) != NULL) // skip white space
    {
      continue;
    }
    else if (strchr("><+-.,[]", ch) != NULL) // store valid commands
    {
      if (pcEnd >= &code[sizeof(code)])
      {
        fprintf(stderr, "too many commands in file \"%s\", expected at most "
                        "%u commands\n", argv[1], (unsigned)sizeof(code));
        fclose(f);
        return EXIT_FAILURE;
      }

      if (ch == '[')
      {
        brStack[brSptr++] = (unsigned)(pcEnd - &code[0]);
      }
      else if (ch == ']')
      {
        if (brSptr == 0)
        {
          fprintf(stderr, "unmatched ']' in file \"%s\"\n", argv[1]);
          fclose(f);
          return EXIT_FAILURE;
        }

        brSptr--;
        brMatch[brStack[brSptr]] = (unsigned)(pcEnd - &code[0]);
        brMatch[pcEnd - &code[0]] = brStack[brSptr];
      }

      *pcEnd++ = ch;
    }
    else // fail on invalid commands
    {
      fprintf(stderr, "unexpected character '%c' in file \"%s\", valid command "
                      "set is: \"><+-.,[]\"\n", ch, argv[1]);
      fclose(f);
      return EXIT_FAILURE;
    }
  }

  fclose(f);

  if (brSptr != 0)
  {
    fprintf(stderr, "unmatched '[' in file \"%s\"\n", argv[1]);
    return EXIT_FAILURE;
  }

  if (pcEnd == &code[0])
  {
    fprintf(stderr, "no commands found in file \"%s\"\n", argv[1]);
    return EXIT_FAILURE;
  }

  printf("; how to compile: nasm -f bin <input file with this code.asm> -o "
         "<output executable.com>\n\n"
         "org 0x100\n"
         "bits 16\n\n"
         "    mov     bx, data\n"
         "    mov     di, bx\n"
         "    mov     cx, 30000\n"
         "    xor     al, al\n"
         "    cld\n"
         "    rep     stosb\n\n"
         "    jmp     code\n\n"
         "print:\n"
         "    mov     ah, 2\n"
         "    cmp     byte [bx], 10\n"
         "    jne     lprint1\n"
         "    mov     dl, 13\n"
         "    int     0x21\n"
         "lprint1:\n"
         "    mov     dl, [bx]\n"
         "    int     0x21\n"
         "    ret\n\n"
#if 01
         // buffered input
         "input:\n"
         "    cmp     byte [kbdbuf+1], 0\n"
         "    jne     linput1\n"
         "    mov     ah, 0xa\n"
         "    mov     dx, kbdbuf\n"
         "    int     0x21\n"
         "    inc     byte [kbdbuf+1]\n"
         "linput1:\n"
         "    mov     al, [kbdbuf+2]\n"
         "    cmp     al, 13\n"
         "    jne     linput4\n"
         "    mov     al, 10\n"
         "linput4:\n"
         "    mov     [bx], al\n"
         "    mov     si, kbdbuf+3\n"
         "    mov     di, kbdbuf+2\n"
         "    xor     cx, cx\n"
         "    dec     byte [kbdbuf+1]\n"
         "    mov     cl, [kbdbuf+1]\n"
         "    jz      linput3\n"
         "linput2:\n"
         "    lodsb\n"
         "    stosb\n"
         "    loop    linput2\n"
         "linput3:\n"
         "    ret\n\n"
#else
         // unbuffered input
         "input:\n"
         "    mov     ah, 1\n"
         "    int     0x21\n"
         "    cmp     al, 13\n"
         "    jne     linput\n"
         "    mov     al, 10\n"
         "linput:\n"
         "    mov     [bx], al\n"
         "    ret\n\n"
#endif
         "code:\n\n");

  for (pc = &code[0]; pc < pcEnd; pc++)
  {
    switch (*pc)
    {
    case '>':
      printf("    inc     bx\n");
      break;
    case '<':
      printf("    dec     bx\n");
      break;
    case '+':
      printf("    inc     byte [bx]\n");
      break;
    case '-':
      printf("    dec     byte [bx]\n");
      break;
    case '.':
      printf("    call    print\n");
      break;
    case ',':
      printf("    call    input\n");
      break;
    case '[':
      printf("label%u:\n", (unsigned)(pc - &code[0]));
      printf("    cmp     byte [bx], 0\n");
      printf("    je      label%u\n", (unsigned)brMatch[pc - &code[0]]);
      break;
    case ']':
      printf("    jmp     label%u\n", brMatch[pc - &code[0]]);
      printf("label%u:\n", (unsigned)(pc - &code[0]));
      break;
    }
  }

  printf("\n    ret\n\n");
  printf("kbdbuf:\n"
         "    db      254\n"
         "    db      0\n"
         "    times   256 db 0\n\n");
  printf("data:\n");

  return EXIT_SUCCESS;
} 
```

如果你喂它 hello world 程序：

```
++++++++++[>+++++++>++++++++++>+++>+<<<<-]>++.>+.+++++++..+++.>++.<<+++++++++++++++.>.+++.------.--------.>+.>. 
```

它将产生可编译的汇编代码：

```
; how to compile: nasm -f bin <input file with this code.asm> -o <output executable.com>

org 0x100
bits 16

    mov     bx, data
    mov     di, bx
    mov     cx, 30000
    xor     al, al
    cld
    rep     stosb

    jmp     code

print:
    mov     ah, 2
    cmp     byte [bx], 10
    jne     lprint1
    mov     dl, 13
    int     0x21
lprint1:
    mov     dl, [bx]
    int     0x21
    ret

input:
    cmp     byte [kbdbuf+1], 0
    jne     linput1
    mov     ah, 0xa
    mov     dx, kbdbuf
    int     0x21
    inc     byte [kbdbuf+1]
linput1:
    mov     al, [kbdbuf+2]
    cmp     al, 13
    jne     linput4
    mov     al, 10
linput4:
    mov     [bx], al
    mov     si, kbdbuf+3
    mov     di, kbdbuf+2
    xor     cx, cx
    dec     byte [kbdbuf+1]
    mov     cl, [kbdbuf+1]
    jz      linput3
linput2:
    lodsb
    stosb
    loop    linput2
linput3:
    ret

code:

    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
label10:
    cmp     byte [bx], 0
    je      label41
    inc     bx
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     bx
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     bx
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     bx
    inc     byte [bx]
    dec     bx
    dec     bx
    dec     bx
    dec     bx
    dec     byte [bx]
    jmp     label10
label41:
    inc     bx
    inc     byte [bx]
    inc     byte [bx]
    call    print
    inc     bx
    inc     byte [bx]
    call    print
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    call    print
    call    print
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    call    print
    inc     bx
    inc     byte [bx]
    inc     byte [bx]
    call    print
    dec     bx
    dec     bx
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    call    print
    inc     bx
    call    print
    inc     byte [bx]
    inc     byte [bx]
    inc     byte [bx]
    call    print
    dec     byte [bx]
    dec     byte [bx]
    dec     byte [bx]
    dec     byte [bx]
    dec     byte [bx]
    dec     byte [bx]
    call    print
    dec     byte [bx]
    dec     byte [bx]
    dec     byte [bx]
    dec     byte [bx]
    dec     byte [bx]
    dec     byte [bx]
    dec     byte [bx]
    dec     byte [bx]
    call    print
    inc     bx
    inc     byte [bx]
    call    print
    inc     bx
    call    print

    ret

kbdbuf:
    db      254
    db      0
    times   256 db 0

data: 
```

如果您编译它，您将能够在 DOS、Windows 9x/XP（可能是 32 位 Vista/7）和 DosBox 中运行它。

不出所料，输出是：

```
Hello World! 
```

**更新**：上述代码中基于 DOS 的输入和输出例程可以被直接访问屏幕缓冲区和键盘端口所取代。键盘代码还需要处理键盘中断。在 x86 PC 上做起来并不难。你真的可以为一种语言实现一个编译器，让它在没有操作系统的裸硬件上运行。

您还应该看看`Forth`这正是给定环境的那种语言。而且很容易实施。比 C 容易得多。比 Brainfuck 难，在某种程度上可以与组装相媲美。

**更新 2**：这是一个不使用任何 DOS 或 BIOS 功能的小型（约 1KB 大小）brainfuck 解释器：

```
; file: bfint.asm
; compile: nasm.exe -f bin bfint.asm -o bfint.com
; run in: DOS, DosBox or equivalent

bits 16
org 0x100

section .text

SCREEN_WIDTH   equ 80
SCREEN_HEIGHT  equ 25
SCAN_BUF_SIZE  equ 256

MAX_CODE_SIZE  equ 20000
MAX_DATA_SIZE  equ 30000

    cld

    ; set new keyboard (IRQ1) ISR
    push    byte 0
    pop     es
    cli                         ; update ISR address w/ ints disabled
    mov     word [es:9*4], Irq1Isr
    mov     [es:9*4+2], cs
    sti

    push    cs
    pop     es

Restart:

    call    ClearScreen
    mov     si, MsgHello
    call    PrintStr

    mov     word [CodeSize], 0
    mov     byte [EnterCount], 0

WaitForKey:
    call    GetKey

    ; Escape erases code
    cmp     ah, 1      ; Escape
    je      Restart

    ; Non-characters are ignored
    cmp     al, 0      ; non-character key
    je      WaitForKey

    ; Enter is "printed" but not stored, use for formatting
    cmp     al, 10     ; Enter
    je      KeyEnter
    mov     byte [EnterCount], 0

    ; Backspace deletes last character
    cmp     al, 8      ; Backspace
    je      KeyBackspace

    ; Space is printed but not stored, use for formatting
    cmp     al, " "    ; Space
    je      PrintOnly

    ; 0 runs a test program
    cmp     al, "0"
    je      TestProgram

    ; Other chracters are stored as code
    mov     bx, [CodeSize]
    cmp     bx, MAX_CODE_SIZE
    jae     ErrCodeTooBig
    mov     [Code + bx], al
    inc     word [CodeSize]
PrintOnly:
    call    PrintChar
    jmp     WaitForKey

ErrCodeTooBig:
    mov     si, MsgCodeTooBig
    call    PrintStr
    mov     word [CodeSize], 0
    jmp     WaitForKey

KeyEnter:
    call    PrintChar
    inc     byte [EnterCount]
    cmp     byte [EnterCount], 1
    je      WaitForKey
    mov     byte [EnterCount], 0
    call    Execute
    jmp     WaitForKey

KeyBackspace:
    call    PrintChar
    cmp     word [CodeSize], 0
    je      WaitForKey
    dec     word [CodeSize]
    jmp     WaitForKey

TestProgram:
    mov     si, TestCode
    mov     di, Code
    mov     cx, TestCodeEnd - TestCode
    mov     [CodeSize], cx
    rep     movsb
    call    Execute
    jmp     WaitForKey

Execute:
    mov     si, Code ; code start
    xor     bp, bp ; instruction index

    mov     di, Data ; data start
    mov     cx, MAX_DATA_SIZE
    xor     al, al
    rep     stosb
    sub     di, MAX_DATA_SIZE
    xor     bx, bx ; data index

ExecuteLoop:
    cmp     bp, [CodeSize]
    jae     ExecuteDone

    mov     al, [bp+si]
    cmp     al, ">"
    je      IncPtr
    cmp     al, "<"
    je      DecPtr
    cmp     al, "+"
    je      IncData
    cmp     al, "-"
    je      DecData
    cmp     al, "."
    je      PrintData
    cmp     al, ","
    je      InputData
    cmp     al, "["
    je      While
    cmp     al, "]"
    je      EndWhile

    mov     si, MsgInvalidChar
    call    PrintStr
    call    PrintChar
    mov     al, 10
    call    PrintChar
    jmp     ExecuteDone

IncPtr:
    inc     bx
    jmp     ExecuteContinue

DecPtr:
    dec     bx
    jmp     ExecuteContinue

IncData:
    inc     byte [bx+di]
    jmp     ExecuteContinue

DecData:
    dec     byte [bx+di]
    jmp     ExecuteContinue

PrintData:
    mov     al, [bx+di]
    call    PrintChar
    jmp     ExecuteContinue

InputData:
    call    GetKey
    or      al, al
    jz      InputData
    mov     [bx+di], al
    jmp     ExecuteContinue

While:
    cmp     byte [bx+di], 0
    jne     ExecuteContinue
    mov     ax, 1
    mov     dx, "[]"
    call    FindMatchingBracket
ExecuteContinue:
    inc     bp
    jmp     ExecuteLoop

EndWhile:
    mov     ax, -1
    mov     dx, "]["
    call    FindMatchingBracket
    jmp     ExecuteLoop

ExecuteDone:
    mov     word [CodeSize], 0
    mov     si, MsgCompleted
    jmp     PrintStr

FindMatchingBracket:
    xor     cx, cx
FindMatchingBracket1:
    cmp     byte [bp+si], dl
    jne     FindMatchingBracket2
    inc     cx
    jmp     FindMatchingBracket3
FindMatchingBracket2:
    cmp     byte [bp+si], dh
    jne     FindMatchingBracket3
    dec     cx
    jnz     FindMatchingBracket3
    ret
FindMatchingBracket3:
    add     bp, ax
    jmp     FindMatchingBracket1

; Inputs:
; AL = ASCII character code
PrintChar:
    ; assuming it's a color text mode (not monochrome or graphics)
    pusha
    push    es

    push    word 0xb800
    pop     es
    mov     bx, [CursorPos]

    cmp     al, 8
    je      PrintCharBackSpace

    cmp     al, 10
    je      PrintCharBackLF

    cmp     al, 13
    je      PrintCharBackCR

    mov     [es:bx], al
    call    AdvanceCursorPosition

    jmp     PrintCharDone

PrintCharBackSpace:
    ; move the cursor back and erase the last character
    or      bx, bx
    jz      PrintCharDone
    dec     bx
    dec     bx
    mov     word [es:bx], 0x0720
    jmp     PrintCharSetCursorPos

PrintCharBackLF:
    ; move the cursor to the beginning of the next line - '\n' behavior
    add     bx, SCREEN_WIDTH * 2
    cmp     bx, SCREEN_WIDTH * SCREEN_HEIGHT * 2
    jc      PrintCharBackCR
    sub     bx, SCREEN_WIDTH * 2
    call    ScrollUp

PrintCharBackCR:
    ; move the cursor to the beginning of the current line - '\r' behavior
    mov     ax, SCREEN_WIDTH * 2
    xchg    ax, bx
    xor     dx, dx
    div     bx
    mul     bx
    mov     bx, ax

PrintCharSetCursorPos:
    mov     [CursorPos], bx
    shr     bx, 1
    call    SetCursorPosition

PrintCharDone:
PopEsAllRet:
    pop     es
    popa
    ret

ClearScreen:
    ; assuming it's a color text mode (not monochrome or graphics)
    pusha
    push    es

    push    word 0xb800
    pop     es
    xor     di, di
    mov     cx, SCREEN_WIDTH * SCREEN_HEIGHT
    mov     ax, 0x0720 ; character = space, color = lightgray on black
    rep     stosw

    xor     bx, bx
    mov     [CursorPos], bx
    call    SetCursorPosition

    jmp     PopEsAllRet

ScrollUp:
    ; assuming it's a color text mode (not monochrome or graphics)
    pusha
    push    es
    push    ds

    push    word 0xb800
    pop     es
    push    es
    pop     ds
    mov     si, SCREEN_WIDTH * 2
    xor     di, di
    mov     cx, SCREEN_WIDTH * (SCREEN_HEIGHT - 1)
    rep     movsw

    mov     cx, SCREEN_WIDTH
    mov     ax, 0x0720 ; character = space, color = lightgray on black
    rep     stosw

    pop     ds
    jmp     PopEsAllRet

; Inputs:
; DS:SI = address of NUL-terminated ASCII string
PrintStr:
    pusha
PrintStr1:
    lodsb
    or      al, al
    jz      PrintStrDone
    call    PrintChar
    jmp     PrintStr1
PrintStrDone:
    popa
    ret

; Inputs:
; BX = Y * SCREEN_WIDTH + X
SetCursorPosition:
    ; assuming it's a color text mode (not monochrome or graphics)
    pusha

%if 0
    mov     dx, 0x3d4
    mov     al, 0x0f
    out     dx, al
    inc     dx
    mov     al, bl
    out     dx, al

    dec     dx
    mov     al, 0x0e
    out     dx, al
    inc     dx
    mov     al, bh
    out     dx, al
%else
    mov     dx, 0x3d4
    mov     al, 0x0f
    mov     ah, bl
    out     dx, ax

    dec     al
    mov     ah, bh
    out     dx, ax
%endif

    popa
    ret

AdvanceCursorPosition:
    ; assuming it's a color text mode (not monochrome or graphics)
    pusha

    mov     ax, [CursorPos]
    inc     ax
    inc     ax
    cmp     ax, SCREEN_WIDTH * SCREEN_HEIGHT * 2
    jc      AdvanceCursorPosition1

    sub     ax, SCREEN_WIDTH * 2
    call    ScrollUp

AdvanceCursorPosition1:
    mov     [CursorPos], ax
    shr     ax, 1
    xchg    ax, bx
    call    SetCursorPosition

    popa
    ret

; Outputs:
; AH = scan code
; AL = character
GetKey:
    push    bx
    push    si

GetKeyRepeat:
    mov     ax, [ScanWriteIdx]
    mov     si, [ScanReadIdx]
    sub     ax, si
    jz      GetKeyRepeat
    mov     bx, si
    mov     ax, [ScanBuf + bx + si]
    inc     si
    and     si, SCAN_BUF_SIZE - 1
    mov     [ScanReadIdx], si

    pop     si
    pop     bx
    ret

Irq1Isr:
    pusha
    push    ds

    push    cs
    pop     ds

    ; read keyboard scan code
    in      al, 0x60

    cmp     al, 0x2a ; Left Shift down
    jne     Irq1Isr1
    or      byte [Shift], 1
Irq1Isr1:
    cmp     al, 0x36 ; Right Shift down
    jne     Irq1Isr2
    or      byte [Shift], 2
Irq1Isr2:
    cmp     al, 0xaa ; Left Shift up
    jne     Irq1Isr3
    and     byte [Shift], ~1
Irq1Isr3:
    cmp     al, 0xb6 ; Right Shift up
    jne     Irq1Isr4
    and     byte [Shift], ~2
Irq1Isr4:

    test    al, 0x80
    jnz     Irq1IsrEois ; key released

    mov     ah, al
    cmp     al, 58
    jc      Irq1Isr5
    xor     al, al   ; don't translate non-character keys
    jmp     Irq1Isr7
Irq1Isr5:
    mov     bx, ScanToChar
    cmp     byte [Shift], 0
    je      Irq1Isr6
    add     bx, ScanToCharShift - ScanToChar
Irq1Isr6:
    xlatb

Irq1Isr7:
    mov     bx, [ScanWriteIdx]
    mov     di, bx
    mov     [ScanBuf + bx + di], ax
    inc     bx
    and     bx, SCAN_BUF_SIZE - 1
    mov     [ScanWriteIdx], bx

Irq1IsrEois:
%if 0
    ; send EOI to XT keyboard
    in      al, 0x61
    mov     ah, al
    or      al, 0x80
    out     0x61, al
    mov     al, ah
    out     0x61, al
%endif

    ; send EOI to master PIC
    mov     al, 0x20
    out     0x20, al

    pop     ds
    popa
    iret

ScanToChar:
    db      0 ; unused
    db      0 ; Escape
    db      "1234567890-="
    db      8 ; Backspace
    db      9 ; Tab
    db      "qwertyuiop[]"
    db      10 ; Enter
    db      0 ; Ctrl
    db      "asdfghjkl;'`"
    db      0 ; Left Shift
    db      "\zxcvbnm,./"
    db      0 ; Right Shift
    db      0 ; Print Screen
    db      0 ; Alt
    db      " " ; Space
ScanToCharShift:
    db      0 ; unused
    db      0 ; Escape
    db      "!@#$%^&*()_+"
    db      8 ; Backspace
    db      9 ; Tab
    db      "QWERTYUIOP{}"
    db      10 ; Enter
    db      0 ; Ctrl
    db      'ASDFGHJKL:"~'
    db      0 ; Left Shift
    db      "|ZXCVBNM<>?"
    db      0 ; Right Shift
    db      0 ; Print Screen
    db      0 ; Alt
    db      " " ; Space

MsgHello:
    db      "Brainfuck Interpreter", 10, 10
    db      "Press 0 to run test code OR", 10
    db      "Type your code.", 10
    db      "Use Esc to erase it all or Backspace to delete last character.", 10
    db      "Press Enter twice to run it.", 10, 10, 0

MsgCodeTooBig:
    db      10, "Code's too big", 10, 0

MsgCompleted:
    db      10, "Code's completed", 10, 0

MsgInvalidChar:
    db      10, "Invalid character: ", 0

Shift           db      0

CursorPos       dw      0

ScanReadIdx     dw      0
ScanWriteIdx    dw      0

EnterCount      db      0

CodeSize        dw      0

TestCode:
    ; Hello World!
    db "++++++++++[>+++++++>++++++++++>+++>+<<<<-]>++.>+.+++++++..+++.>++.<<+++++++++++++++.>.+++.------.--------.>+.>."
    ; Squares of 0 through 100
;    db "++++[>+++++<-]>[<+++++>-]+<+[>[>+>+<<-]++>>[<<+>>-]>>>[-]++>[-]+>>>+[[-]++++++>>>]<<<[[<++++++++<++>>-]+<.<[>----<-]<]<<[>>>>>[>>>[-]+++++++++<[>-<-]+++++++++>[-[<->-]+[<<<]]<[>+<-]>]<<-]<<-]"
    ; ROT13
;    db "+[,+[-[>+>+<<-]>[<+>-]+>>++++++++[<-------->-]<-[<[-]>>>+[<+<+>>-]<[>+<-]<[<++>>>+[<+<->>-]<[>+<-]]>[<]<]>>[-]<<<[[-]<[>>+>+<<<-]>>[<<+>>-]>>++++++++[<-------->-]<->>++++[<++++++++>-]<-<[>>>+<<[>+>[-]<<-]>[<+>-]>[<<<<<+>>>>++++[<++++++++>-]>-]<<-<-]>[<<<<[-]>>>>[<<<<->>>>-]]<<++++[<<++++++++>>-]<<-[>>+>+<<<-]>>[<<+>>-]+>>+++++[<----->-]<-[<[-]>>>+[<+<->>-]<[>+<-]<[<++>>>+[<+<+>>-]<[>+<-]]>[<]<]>>[-]<<<[[-]<<[>>+>+<<<-]>>[<<+>>-]+>------------[<[-]>>>+[<+<->>-]<[>+<-]<[<++>>>+[<+<+>>-]<[>+<-]]>[<]<]>>[-]<<<<<------------->>[[-]+++++[<<+++++>>-]<<+>>]<[>++++[<<++++++++>>-]<-]>]<[-]++++++++[<++++++++>-]<+>]<.[-]+>>+<]>[[-]<]<]"
TestCodeEnd:

section .bss

ScanBuf:
    resw SCAN_BUF_SIZE

Code:
    resb MAX_CODE_SIZE

Data:
    resb MAX_DATA_SIZE 
```

如果您想将 DOS（作为宿主环境）和 NASM 排除在外，欢迎您手动对上述汇编代码进行编码，制作一张可启动软盘并启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T03:26:06.473

规范的编译器学习书籍是 Dragon Book，[http://dragonbook.stanford.edu/](http://dragonbook.stanford.edu/) 。

然而，它确实指向更多……复杂的语言。你可能不想谈论上下文无关的解析之类的东西（虽然我*确实*推荐那本书，它是双倍加难但真棒。）

考虑到这一点，您可能希望首先为一种非常简单的语言寻找解释器或编译器——也许是 Brainfuck 本身，也许是像 Scheme 实现这样更有用的东西。阅读、分析、了解它的作用。实现编译器使用的任何较低级别的库函数，调整其代码生成器以输出您想要定位的任何品牌的机器代码，然后您就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-31T04:11:00.547

实际上，我也有一个类似的项目。您想要的是编写一个在裸硬件（没有任何操作系统）上运行的编译器。编译器就像其他所有程序一样只是一个程序，除了它将在您的情况下运行在裸硬件上。

您可能会考虑为您的编译器使用引导加载程序（引导加载程序不是操作系统）。引导加载程序通常将操作系统从磁盘加载到内存中以供执行，只是这次它加载的是编译器而不是操作系统。

那里有许多免费和开源的引导加载程序（谷歌为他们）。选择一个适合您的需求，或者如果您和我一样好奇/好奇，您甚至可以自己编写。

选择引导加载程序（或编写引导加载程序）需要您了解目标系统的引导方式——它通过 BIOS（旧）或 UEFI（新。它是 BIOS 的替代品）。随着您的编程语言成熟，您可以用新的编程语言编写自己的引导加载程序。

希望这可以帮助

# php - 使用在同一个 ini 文件上定义的 ini 值

> ID：10492083
> 
> 赞同：3
> 
> 时间：2012-05-08T03:16:08.800
> 
> 标签：php, zend-framework, ini

我目前正在使用 Zend Framework 从事个人项目。我无法获得良好的搜索结果，也无法询问我的同事：-/。

我在工作中使用了很多 Ant / Phing，你有一个叫做“属性文件”的东西，它们有一个非常酷的特性：如果你在属性文件中定义一个属性，那么你可以将它用作同一个文件中的变量来定义其他属性值，即：

```
property1 = "apples"
property2 = "oranges"
property3 = "I really love ${property1} and ${property2} 
```

所以使用 property3 时的预期结果将是“我真的很喜欢苹果和橘子”。

我想知道ini文件是否有这样的功能。我知道我可以在 ini 文件中使用常量，但我不太喜欢使用 if/else 定义常量来检查环境，但如果你有更好的方法来做到这一点，这基本上就是我想做的：

```
[production]
public_path = 
external_path1 = ${public_path} "/a/url/to/something/"
external_path2 = ${public_path} "/another/url"

[development : production]
public_path = "/my_proyect/" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:15:08.047

您只是不能在配置值中使用变量 - 除了您自己记录的常量。

# git - 在两个版本之间创建新的次要版本

> ID：10492089
> 
> 赞同：2
> 
> 时间：2012-05-08T03:17:13.843
> 
> 标签：git

我的工作正在从 SVN 切换到 Git，我们正在重新评估我们如何使用分支和标签。

我们已经看到该模型`master`用作始终稳定的版本，其中标签用于识别版本，单独的开发分支用于不稳定代码（http://nvie.com/posts/a-successful-git-branching-model/ ）。

我们喜欢这种开发方法，但它似乎不允许将修补程序应用于已发布的版本。

我们的产品安装了多个客户端服务器，每个服务器可能安装了不同的版本（出于我们无法控制的各种原因）。今天我们使用分支管理我们的发布，并`master`用于开发。

例如，我们可能有 3 个不同版本的客户端：

*   客户端 A - v1.1
*   客户端 B - v1.2
*   客户端 C - v1.3

如果在 v1.2 中发现了严重错误，我们会在 v1.2、v1.3 和 master 分支中修复它并更新客户端 B 和 C。我们不会为这些更改创建新分支，但从技术上讲，它们会是版本 v1.2.1 和 v1.3.1。

当 v1.3 已经推出时，当我们需要能够创建 v1.2.1 时，我们看不到如何切换到仅使用标签进行发布。

谁能推荐一个比每个版本创建一个分支并在其中进行开发更适合我们的模型`master`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:22:08.410

您可以根据旧标签创建新分支。如果您在继续前进时发现 v1.2 中的严重错误，只需从 v1.2 标记创建一个新分支，在那里修复错误，将其标记为 1.2.1，然后将修复选择到所有其他标记中（现在是分支）您正在维护的。

即使您没有在 中进行稳定版本`master`，这仍然适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:22:27.177

您可以使用稳定的 master 并且仍然执行每个版本的分支（事实上，我建议您这样做）。

如果您需要为较早的主要版本修补次要版本，您*将*希望为每个主要版本都有一个分支，并且您不应该试图避免这种情况。

但是，这并不能阻止您将 master 声明为一个稳定的分支并让人们使用单独的分支进行开发，只有在他们确定它们是稳定的时才将这些分支合并到 master 中。

保持 master 稳定有很多好处：

*   这意味着任何创建新功能分支的人都有其分支的已知良好基础。
*   它使发布变得非常容易——您只需从 master 分支并使其成为您的发布。

您仍然可以使用标签来标记给定主要版本的初始分支点（以及主要分支的任何次要版本版本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T03:23:34.603

> 我们喜欢这种开发方法，但它似乎不允许将修补程序应用于已发布的版本。

你看到名为 的分支了`hotfixes`吗？从需要修补程序时开始分支`master`，其更改返回到`master`, 以及`develop`?

> 今天我们使用分支管理我们的发布，master 用于开发。

nvie.com 分支模型不`master`用于开发，它使用`develop`. `master`应始终是该产品的最新发布版本。

> 如果在 v1.2 中发现了严重错误，我们会在 v1.2、v1.3 和 master 分支中修复它并更新客户端 B 和 C。我们不会为这些更改创建新分支，但从技术上讲，它们会是版本 v1.2.1 和 v1.3.1。

找出`master`该错误发生的最早版本；从该标签创建一个`hotfix`分支，然后将修复反向移植到`develop`. 实际上，您应该从 bug 中出现的`hotfix`每个版本化标记创建一个分支`master`，并将其向后移植到那些，然后最后回到`master`它的头部。

# c# - 如何将本机 C/C++ *.dll 连接到 IIS 中托管的 WCF C#？

> ID：10492094
> 
> 赞同：0
> 
> 时间：2012-05-08T03:17:50.050
> 
> 标签：c#, c++, wcf, iis, dll

我需要将库本机 x86 C/C++ *.dll 连接到我的计算机（IIS7.5）中本地托管的服务 WCF C# 4.0。我通过http请求（方法[WebGet]）调用服务方法。我得到错误：

[http://s1.ipicture.ru/uploads/20120509/H8TVURsE.jpg](http://s1.ipicture.ru/uploads/20120509/H8TVURsE.jpg)

**用户代码未处理 DllNotFoundException**

**无法加载 DLL Li.dll：访问被拒绝（从 HRESULT 中排除：0x80070005 (E_ACCESSDENIED)）**

## **你能告诉我可能是什么问题吗？**

* * *

在控制台应用程序 C# 中测试的库 Li.dll 的效率 - 成功运行。

Windows 7 x86 .NET 4.0 VS 2010 IIS7.5

结构解决方案服务WCF：

[http://s1.ipicture.ru/uploads/20120430/vBXivN71.jpg](http://s1.ipicture.ru/uploads/20120430/vBXivN71.jpg)

## 源代码

本机 C/C++ x86 Li.dll：

锂

```
extern "C" {
    __declspec(dllexport) int __cdecl SimulateGameDLL (int a, int b); 
} 
```

李.cpp

```
#include "Li.h"
extern int __cdecl SimulateGameDLL (int num_games, int rand_in) {
   return 121; 
} 
```

C＃

WcfServiceLibrary1.IService1

```
[ServiceContract] public interface IService1{
    [OperationContract][WebGet] string GetData();
} 
```

WcfServiceLibrary1.Service1

```
public class Service1 : IService1{

public string GetData(){

    ClassLibrary1.Class1 cl = new ClassLibrary1.Class1();
    var rt = cl.M(); 
    return string.Format("Value = : {0}", rt);  
}
} 
```

ClassLibrary1.Class1

```
public class Class1{

    [DllImport("Li.dll", CharSet = CharSet.Unicode, CallingConvention = CallingConvention.Cdecl)]
    public static extern int SimulateGameDLL(int a, int b);

    public int M() {

        var r = SimulateGameDLL(10, 20);            
        return r;
    }
} 
```

**强文本**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:05:30.140

可能是您应该授予用户`NETWORK SERVICE`访问 dll 文件的权限。

# javascript - 使用原生 JavaScript 触发 jQuery 实时事件

> ID：10492099
> 
> 赞同：0
> 
> 时间：2012-05-08T03:18:41.390
> 
> 标签：javascript, jquery, events, google-chrome-extension

我需要从 Chrome 扩展程序触发的页面上有一个事件。我无权修改页面的 JavaScript。

```
$(selector).live("click", fn); 
```

我需要在我的 Chrome 扩展程序中使用本机 JS 来触发它，如下所示：

```
selectorElement.click(); //doesn't work 
```

当然，上面的方法不起作用，因为`live`正在使用该功能。我怎么能触发它呢？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:19:09.357

如果您没有 jQuery，您可以使用以下命令触发 DOM 事件[`dispatchEvent`](https://developer.mozilla.org/en/DOM/element.dispatchEvent)：

```
var selector = "#...";
var elmList = document.querySelectorAll(selector);

var evt = document.createEvent("MouseEvents");
evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
elm[0].dispatchEvent(evt); 
```

此代码在与选择器匹配的第一个元素上触发，但`elmList`如果您需要一次触发多个元素，可以将其修改为循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:21:53.000

你试过[`trigger()`](http://api.jquery.com/trigger/)吗？

```
$(selector).trigger('click'); 
```

当然，`trigger()`应该在 jQuery 对象上使用（因此是`$(selector)`）。

# objective-c - 新建项目调用窗口有什么代码？

> ID：10492100
> 
> 赞同：0
> 
> 时间：2012-05-08T03:18:44.017
> 
> 标签：objective-c, xcode4.2

如果我在 xcode 中创建一个新项目，将会有一个主 xib

在主 xib 中有一个名为 window 的对象。

我做了一个实验，我从自动生成的代码中删除了 _window 出口。

```
@interface SDAppDelegate : NSObject <NSApplicationDelegate>

//@property (assign) IBOutlet NSWindow *window;

@end 
```

我运行程序，瞧，那个愚蠢的窗口仍然打开。确保它未被打开的唯一方法是删除窗口。

代码显示窗口的哪一部分？代表如何知道要打开哪个窗口？

我不想在应用程序启动时显示任何窗口。例如，当应用程序选择首选项时，我可能想显示一些窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T03:22:45.197

NSApp 加载您的主 XIB，其中的窗口设置为在启动时可见，所以它是。*您的任何*代码都不会参与此过程。

# jquery - 在锚元素中查找 img

> ID：10492101
> 
> 赞同：1
> 
> 时间：2012-05-08T03:19:04.477
> 
> 标签：jquery, html, css, hover, anchor

我有一个 jQuery 脚本，它悬停在某个锚点上，找到其中的跨度并显示它。所以 HTML 结构类似于：

```
<a class="class" href="#">
  <img src="img.jpg"/> 
     <p>SOME TEXT</p>
  <span class="class2">
     <p>SOME CONTENT</p>
  </span>
</a> 
```

显示它的脚本类似于：

```
$('a.class').live('mouseover', function (e) {
   $(e.srcElement).find('.class2').fadeTo('slow', 1);
}); 
```

我遇到的问题是：悬停效果在悬停文本（某些文本）时有效，但在悬停图像时**不起作用**（img.jpg）。我为此失踪有什么原因吗？因为a.class应该抓取anchor里面的所有东西，但是为什么不抓取图片呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T03:23:12.500

我很好奇你在哪里阅读使用`srcElement`，因为这是在事件对象绑定到`window`对象时在旧版本的 Internet Explorer 中使用的属性。如果您想获取调用 even 的元素，您应该使用`e.target`, or `this`（尽管`this`根据使用位置更改引用）。

```
$("a.class").on("mouseenter", function(){
  $(".class2", this).fadeTo("slow", 1);
}); 
```

请记住，该`a`元素不是块级元素。它只有大约 20px 高左右。在下图中，我将锚点的背景颜色更改为浅绿色：

![在此处输入图像描述](../Images/63f02a5c48c0141dd72a7f9b4f13d0a7.png)

如您所见，虽然“SOME TEXT”和大猫图像在技术上嵌套在锚点内，但它们超出了其边界。如果我们将其显示设置为阻止，我们可以更改：

```
a.class {
  display:block;
} 
```

![在此处输入图像描述](../Images/a4654cb1572540ad42ffe75c711054ea.png)

# asp.net - 属性字段中的会话

> ID：10492105
> 
> 赞同：0
> 
> 时间：2012-05-08T03:20:09.673
> 
> 标签：asp.net

可以在私有/公共属性中获取/设置会话变量吗？

```
private List<FileAttachment> fileAttachments;
public List<FileAttachment> FileAttachments
{
    get
    {
        if (Session["key"] != null)
        {
            fileAttachments = (List<FileAttachment>)Session["key"];
        }
        return fileAttachments;
    }
    set
    {
        fileAttachments = value;
        Session["key"] = fileAttachments;
    }
} 
```

这里的目标是我希望容器类（该用户控件的属性所在）能够`List<T>`根据实体设置并显示存储在数据库中的现有附件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:21:42.170

那不是很安全。`List<T>`不是线程安全的。

将列表分配给属性后，您永远不能修改列表，因为其他请求线程可能正在读取它。

因此，您应该将其设为 a`ReadOnlyCollection<T>`而不是`List<T>`.
（并确保您的`FileAttachment`类是不可变的或线程安全的）

* * *

除此之外，这取决于财产在哪里。
如果它在控件或页面上，那很好。

# sql-server - SQL Server 使用 not in 加速查询

> ID：10492110
> 
> 赞同：0
> 
> 时间：2012-05-08T03:21:24.780
> 
> 标签：sql-server, sql-server-2008r2-express

我有一个名为`sales`以下几列的表：

```
salesno (PK, char(25))
advanceno (char(15), not null) 
```

现在我想选择所有`salesno`不在的行`advanceno`：

```
SELECT salesno 
FROM sales 
WHERE salesno NOT IN (SELECT advanceno FROM sales) 
```

查询很慢，因为 sales 表有数十万行。

我这样做了，而且速度非常快：

```
SELECT salesno 
FROM sales 
WHERE salesno NOT IN ('000008360', '000008361', '000008362', '000008363', '000008364') 
```

如何优化查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T03:36:20.363

试试这个：

```
DECLARE @sales as Table (salesno char(25)
,advanceno char(15) not null)

INSERT INTO @sales(salesno,advanceno)
SELECT '000008360','000008360' UNION ALL
SELECT '000008361','000008362' UNION ALL
SELECT '000008362','000008364' 

SELECT  s.salesno 
FROM    @sales s 
LEFT JOIN @sales a ON a.advanceno = s.salesno
WHERE   a.advanceno IS NULL 
```

在你的例子中，试试这个

```
SELECT  s.salesno 
FROM    sales s 
LEFT JOIN sales a ON a.advanceno = s.salesno
WHERE   a.advanceno IS NULL 
```

# php - 如果语句没有正确切换

> ID：10492116
> 
> 赞同：0
> 
> 时间：2012-05-08T03:21:56.147
> 
> 标签：php, if-statement

我有这 3 个 if 语句，它们根据变量中的值将其放入一列或另一列。但由于某种原因，即使 if 语句应该为假，它也总是只使用 3 个中的一个。我把代码放在下面。谢谢你的帮助。

```
$link = mysql_connect('localhost', 'root', '');
if (!$link) {
  // error happened
  print(0);
}
mysql_select_db('test');

// sanitize the value
$value = mysql_real_escape_string($_GET['uname']);
$id = mysql_real_escape_string($_GET['id']);

if($value == "Paid" || "Waiting on Payment"){
  $sql = "UPDATE test SET payment='$value' WHERE id='$id'";
}

if($value == "Repaired" || "Waiting on Repairs"){
  $sql = "UPDATE test SET repair='$value' WHERE id='$id'";
}

if($value == "With Student" || "Awaiting Pickup"){   //Always uses this one for somereason unknown to me..
  $sql = "UPDATE test SET returned='$value' WHERE id='$id'";
}

// start the query
// check if the query was executed
if(mysql_query($sql, $link)){
  // everything is Ok, the data was inserted
  print(1);
  echo $sql;    
} else {
  // error happened
  print(0);
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T03:24:10.487

```
if($value == "Paid" || "Waiting on Payment"){ 
```

应该

```
if($value == "Paid" || $value =="Waiting on Payment"){ 
```

开关版

```
 switch ($value) {
        case 'Paid':
        case 'Waiting on Payment'
            $sql = "UPDATE test SET payment='$value' WHERE id='$id'";
            break;
        case 'Repaired':
        case 'Waiting on Repairs':
            $sql = "UPDATE test SET repair='$value' WHERE id='$id'";
            break;
        case 'With Student':
        case "Awaiting Pickup":
            $sql = "UPDATE test SET returned='$value' WHERE id='$id'";
            break;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T03:41:00.433

以前的解决方案不能解决问题。

您需要使用的是 if 之后的*if* *-else*块。

 *```
if(conditionA is true){
  //do taskA
}
else if(conditionB is true){
  //do taskB
}
else if(condition is true){
  //do taskC
}
else {
  //do taskD
} 
```

这回答了你的问题。

但接下来是下一个问题，由“A Bag”回答[@https: //stackoverflow.com/a/10492151/260034。](https://stackoverflow.com/a/10492151/260034)这是因为字符串“等待付款”、“等待维修”等总是被评估为 TRUE。因此，即使 $value 不等于“Paid”，字符串“Waiting on Payment”也会计算为 TRUE。

OR 运算符 || 如果 2 个操作数中的任何一个计算为 TRUE，则返回 TRUE。

因此，您所有的*if*语句都评估为 TRUE，并且由于您有一堆*if*语句而不是 if-ifelse 块，因此最后一个*if*条件中的代码块**似乎**是始终执行的代码块。

修改后的代码类似于，

```
 if($value == "Paid" || $value == "Waiting on Payment"){
  $sql = "UPDATE test SET payment='$value' WHERE id='$id'";
}
else if($value == "Repaired" || $value == "Waiting on Repairs"){
  $sql = "UPDATE test SET repair='$value' WHERE id='$id'";
}
else if($value == "With Student" || $value == "Awaiting Pickup"){
  $sql = "UPDATE test SET returned='$value' WHERE id='$id'";
} 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T03:43:46.593

> 我知道这是题外话，但有没有其他方法可以在不使用 3 个单独的 if 语句的情况下完成此操作？- 马修

```
switch($value)
{
    case "Paid":
    case "Waiting on Payment":
        $column = "payment";
        break;
    case "Repaired":
    case "Waiting on Repairs":
        $column = "repair";
        break;
    case "With Student":
    case "Awaiting Pickup":
        $column = "returned";
        break;
    default:
        die("TODO: Error handling for unknown value: ".$value);
}

$sql = "UPDATE test SET ".$column." = '".$value."' WHERE id='".$id."'"; 
```*

# c - FsRtlIsNameInExpression 从不匹配任何内容

> ID：10492118
> 
> 赞同：4
> 
> 时间：2012-05-08T03:22:04.247
> 
> 标签：c, string-matching, windows-kernel

我使用[Boyer-Moore 算法](http://srcvault.scali.eu.org/cgi-bin/Syntax/Syntax.cgi?BoyerMoore.c)在内核驱动程序中进行字符串匹配，但我还需要实现基本的通配符支持。[这个关于SO的答案](https://stackoverflow.com/a/3627677/591064)提到了函数[`FsRtlIsNameInExpression`](http://technet.microsoft.com/en-us/library/ff546850%28v=vs.85%29.aspx)，它看起来正好适合我的需要。它甚至看起来像处理 Unicode 字符串的大小写不敏感。

但它甚至不能让它与自己匹配一个简单的字符串。

我尝试了一些东西，但 FsRtlIsNameInExpression 从来没有匹配任何东西。这是我用来测试的一些代码（我把调用放在`MyTest`我的`DriverEntry`例程结束时）。

```
NTSTATUS MyTest()
{
    int matches = 0;

    UNICODE_STRING a3times;
    UNICODE_STRING A5times;
    UNICODE_STRING bbb;
    UNICODE_STRING patterna;
    UNICODE_STRING patternb;

    RtlInitUnicodeString(&a3times, L"aaa");
    RtlInitUnicodeString(&A5times, L"AAAAA");
    RtlInitUnicodeString(&bbb, L"bbb");

    RtlInitUnicodeString(&patterna, L"a*a");
    RtlInitUnicodeString(&patternb, L"b*");

    if(FsRtlIsNameInExpression(&patterna, &a3times, TRUE, 0)) 
        ++matches;            // a*a should match aaa

    if(FsRtlIsNameInExpression(&patterna, &A5times, FALSE, 0))
        ++matches;            // a*a should match (insensitive) AAAAA

    if(FsRtlIsNameInExpression(&a3times, &a3times, TRUE, 0))
        ++matches;            //aaa should match aaa

    if(FsRtlIsNameInExpression(&patternb, &bbb, TRUE, 0))
        ++matches;            //b* should match bbb

    return matches;   //Should be 4, but is 0
} 
```

作为记录 ：

*   我正在使用 WDK 版本 7600.16385.1，检查构建（我的代码，不是 Windows）
*   该驱动程序在我的 Windows 7 Ultimate 64 位上托管 Windows 7 Pro 64 位的 Virtual Box 中运行
*   驱动程序由测试证书签名
*   我在内核调试器中跟踪代码
*   代码不会崩溃，但不能在用户态调用

我缺少什么明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:26:16.780

文件说

> 如果`IgnoreCase`是`TRUE`，则`Expression`必须为大写。

请注意，根据您的评论，您误解了区分大小写的参数。它`IgnoreCase`不是`CaseSensitive`。

至于结果：

1.  `IgnoreCase`设置为-的小写表达式`TRUE`不起作用
2.  小写表达式，`IgnoreCase`设置为`FALSE`，*大写*模式 - 不匹配
3.  `IgnoreCase`设置为-的小写表达式`TRUE`不起作用
4.  `IgnoreCase`设置为-的小写表达式`TRUE`不起作用

只是运气不好，没有一个工作:)

# database - 如何删除多行？

> ID：10492121
> 
> 赞同：18
> 
> 时间：2012-05-08T03:22:11.250
> 
> 标签：database, codeigniter

所以我可以使用以下方法删除一行：

```
$this->db->delete($tableName,array("id"=>4)); 
```

...但我不知道如何删除多行。我试过了：

```
$this->db->delete($tableName,array("id"=>4,"id"=5)); 
```

也：

```
$this->db->delete($tableName,array(array("id"=>4),array("id"=5))); 
```

...但它们都不起作用。我觉得这应该很容易。有什么答案吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-08T06:38:04.017

你试过这个吗？

```
$names = array(4,5);
$this->db->where_in('id', $names);
$this->db->delete('mytable'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T10:13:41.097

不需要关联数组。

```
$ids[] = 1;
$ids[] = 2;

$this->db->where_in( id, $ids );
$this->db->delete('Table_Name'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T05:55:35.347

为其编写自定义查询

```
$this->db->query("DELETE FROM `TABLE_NAME` WHERE `id` IN(1,2,3,4,5)"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-15T09:54:42.673

这是行不通的

```
$names = array(4,5);
$this->db->where_in('id', $names);
$this->db->delete('mytable');

DELETE FROM table_name WHERE id IN ('4,5') 
```

注意一件事不是单个字符串/数字（'4,5'），我们应该用这样的单引号（'4'，'5'）对每个id进行潜水

最好和最好的方法

```
 //$ids = 1,2,3.....
        $ids_exp = explode(',',$ids);
        $this->db->where_in('id',$ids_exp);//
        $this->db->delete('table_name')
        return $this->db->affected_rows(); 
```

上面的查询将是工作享受............

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T03:38:07.047

To delete a single use row:

```
$this->db->delete('TABLE_NAME', array('id' => 5)); 
```

Have you tried doing this? I'm pretty sure it should work.

```
$this->db->delete('TABLE_NAME', array(array('id' => 5), array('id' => 3), ...)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-21T12:45:57.453

这是一个老问题，但我会回答它，因为我必须在 8 年后研究同一个问题。

查了源码`$wpdb->delete()`，基本只会删除1行。它通过将 1 col 与 1 val 匹配，然后与 AND 连接来工作。因此，如果您这样做`array("id"=>4,"id"=>5)`，它会将其读取为带有 (id==4 AND id==5) 的行。没有行会匹配该条件。

因此，要删除多行，唯一的方法（据我所知）是使用自定义查询：

```
$wpdb->query("DELETE FROM `TABLE_NAME` WHERE `id` IN(1,2,3,4,5)"); 
```

# haskell - 在函数中设置变量限制并在haskell中返回错误

> ID：10492122
> 
> 赞同：2
> 
> 时间：2012-05-08T03:22:17.550
> 
> 标签：haskell

嗨，我是 haskell 的新手，我正在尝试实现以下内容，但我不能完全正确

这是我正在尝试做的基本算法让我们说你有

```
--define some basic example function
fun x y = x + y
--pseudo code for what i am trying to do
  x >= -1.0 || x <= 1.0  --variables x must be within this range else ERROR
  y >=  1.0 || y <= 2.0   --variables y must be within this range else ERROR 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T03:31:40.167

一个非常简单的方法如下。这使用了[警卫](http://en.wikibooks.org/wiki/Haskell/Control_structures#if_and_guards_revisited)：

```
fun x y
   | x < -1.0 || x > 1.0 || y < 1.0 || y > 2.0 = error "Value out of range"
   | otherwise = x + y 
```

有关报告和处理错误的一系列日益复杂和复杂的方法，[请参见此处。](http://www.randomhacks.net/articles/2007/03/10/haskell-8-ways-to-report-errors)

`Maybe`正如 ivanm 指出的那样，有时一种类型更可取。这是一个完整性示例：

```
fun' :: Float -> Float -> Maybe Float
fun' x y
   | x < -1.0 || x > 1.0 || y < 1.0 || y > 2.0 = Nothing
   | otherwise = Just (x + y) 
```

# php - 尝试使用 jQuery Countdown 和 php 中的 UNIX 时间戳

> ID：10492126
> 
> 赞同：0
> 
> 时间：2012-05-08T03:23:07.693
> 
> 标签：php, javascript, jquery, countdown

正如标题所说，我在显示结束日期的右左时间时遇到了问题。

我正在使用这个 jquery 插件： http: [//keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

假设我们的时间戳是由这样的 PHP 脚本生成的：`$end_date = strtotime($row4['end']); // 2012-05-09 06:00:00 becomes 1336536000`

我使用这个（`$i`在循环中使用）：

```
$('.count-<?php echo $i; ?>').countdown({until: new Date(<?php echo $end_date; ?> * 1000), layout: '{dn} days {hnn} hrs {mnn} min {snn} sec', compact: true}); 
```

现在是早上 06:21。我得到的是“1 天 17 小时 04 分 21 秒”，而不是预期的 1 天剩余结果。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:29:34.930

我已经使用 API 有一段时间了，但我似乎无法弄清楚你的代码是怎么回事。也许（但也许）您使用`untill`错误的属性。

我通常使用的代码：

```
$(function(){
    var countdown = $('#countdown'),
        ts = new Date(<?php echo $date_to * 1000; ?>),
        finished = true;

    if((new Date()) > ts)
    {
        finished = false;
    }

    $('#cool-countdown').countdown({
        timestamp   : ts,
        callback    : function(days, hours, minutes, seconds)
        {
            var message = "";

            message += days + " days, ";
            message += hours + " hours, ";
            message += minutes + " minutes, ";
            message += seconds + " seconds ";

            message = (finished ? "Countdown finished" : "left untill the New Year");

            countdown.html(message);
        }
    });

}); 
```

显然，您应该将其扩展为单数。

# jquery - Jquery：如何停止附加我的文本 onClick？

> ID：10492131
> 
> 赞同：0
> 
> 时间：2012-05-08T03:23:41.093
> 
> 标签：jquery

我试图阻止这个>> [http://jsfiddle.net/justmelat/8x2WX/](http://jsfiddle.net/justmelat/8x2WX/)

如果您查看我的 jsfiddle，请单击必填字段按钮，然后再次单击它。您会看到它一直在添加 [这是代码要求它执行的操作] 空字段。

有什么更好的方法来做到这一点？如果用户碰巧单击按钮两次，或者在填写表单并测试剩余内容时，我希望它重新开始显示已验证的文本，而不是追加。我尝试了 text() 和 html()，但它们不能正常工作。

```
$("#section-11,#section-12,#section-13,#section-1011").hide();

var projtype = new Array(
        {value : 'Cars', sect_id : 'fieldset#section-11'},
        {value : 'Planes', sect_id : 'fieldset#section-12'},
        {value : 'Boats', sect_id : 'fieldset#section-13'}
    );
$("select#1169").on('change',function () {
var thisVal = $(this).val();
 var sect_id ="";
     //$('fieldset[id!="mainSection"]').hide();
    $(projtype).each(function() {
$(this.sect_id).hide();
        if(this.value == thisVal) {
        $(this.sect_id).show();
        }
    });        
});

$("#btnCatchReqFlds").on('click', function() {
    //$("#holdErrMsg").append(" ");
    var requiredButEmpty = $("fieldset:visible").find('input[class*="-required"], select[class*="-required"]').filter(function() {
      return $.trim($(this).val()) === "";  
    });
    if (requiredButEmpty.length) {
        requiredButEmpty.each(function () {

            $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
        });
    }
    return !requiredButEmpty.length;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:28:50.533

You can empty the place holder first by using `empty()`

```
$("#btnCatchReqFlds").on('click', function() {
    //$("#holdErrMsg").append(" ");
    $("#holdErrMsg").empty();
    var requiredButEmpty = $("fieldset:visible").find('input[class*="-required"], select[class*="-required"]').filter(function() {
      return $.trim($(this).val()) === "";  
    });
    if (requiredButEmpty.length) {
        requiredButEmpty.each(function () {

            $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
        });
    }
    return !requiredButEmpty.length;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T03:28:00.827

为什么不在`#holdErrMsg`验证开始时清除？

```
$("#btnCatchReqFlds").on('click', function() {
    $("#holdErrMsg").empty();

    ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T03:28:29.817

[http://jsfiddle.net/8x2WX/3/](http://jsfiddle.net/8x2WX/3/) 试试看，我在运行错误检查之前清空错误框。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T03:41:02.597

As I can see it the best/neat way of doing it is to create an element with an id like "errors_" + this.name and then update that element with the text that you would like to show:

```
var errorElementId = "errors_" + this.name;
if($('#'+errorElementId).length > 0) {
    var errorElement = document.createElement("p");
    errorElement.setAttribute("id", errorElementId);
    $("#holdErrMsg").append(errorElement);
} else {
    errorElement = $(errorElementId)
}
errorElement.text("Your fancy error string") 
```

Hope this helps :-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T03:52:58.393

```
$("#btnCatchReqFlds").on('click', function() {
    //$("#holdErrMsg").append(""); not necessary
    var requiredButEmpty = $("fieldset:visible").find('input[class*="-required"], select[class*="-required"]').filter(function() {
      return $.trim($(this).val()) === "";  
    });
    if (requiredButEmpty.length) {
        $("#holdErrMsg").empty(); // empty the message holder
        requiredButEmpty.each(function () {

            $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
        });
    }
    return !requiredButEmpty.length;
}); 
```

# ubuntu-10.04 - Ubuntu安装jdk1.6

> ID：10492132
> 
> 赞同：0
> 
> 时间：2012-05-08T03:23:58.660
> 
> 标签：ubuntu-10.04, jdk1.6

我试图将 jdk1.6 安装到我的 Ubuntu 10.04 上。

但是，看起来 jdk1.6 在 Ubuntu 存储库中不再可用（至少，我还没有找到它）。

就我而言，我需要安装 jdk1.6 作为我的 java 版本而不是 openjdk。

谁能告诉我它是否仍然可以在任何地方找到？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:28:31.807

我建议手动安装它。使用以下链接并使用 update-alternatives。这些说明适用于 1.7，但它们适用于 1.6。只需从 sun 的网站上获取它。

[https://askubuntu.com/questions/55848/how-do-i-install-oracle-java-jdk-7](https://askubuntu.com/questions/55848/how-do-i-install-oracle-java-jdk-7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:27:29.950

您可以从 java.sun.com 下载 JDK 并自行安装。之所以不包括在内，是因为它需要您接受他们的许可协议。

HTH。

# ios - 平铺大小、视网膜与非视网膜、iPad 与 iPhone

> ID：10492135
> 
> 赞同：3
> 
> 时间：2012-05-08T03:24:21.110
> 
> 标签：ios, opengl-es, game-engine, retina-display

一个有趣的问题。我希望这会产生很多好的想法。

我目前处于正交游戏项目的设计早期 alpha 阶段。我正在尝试不同的瓷砖尺寸。有几个问题，我想右脚下车。

1.  我们是否应该区分 Retina 与非 Retina 显示器、iPhone 与 iPad 显示器上的平铺尺寸（80x80、32x32 等）？

2.  适合设计师和艺术家的推荐瓷砖尺寸是多少……为什么？

目标：

*   无论显示格式如何，我都想要一个干净、清晰的视觉效果。无论显示器如何，卡通色彩的 16 位到 32 位图像。

*   我想为我的图集保持 1024x1024 纹理大小。我希望这会给我足够的瓷砖让世界看起来不错，而不是破坏我的瓷砖地图系统。

*   我当前的地图大小是 200 格宽 x 120 格高。该地图将是地球的低细节（以航海为中心）墨卡托投影。

提前感谢所有好的建议。

乙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:33:15.797

不久前我遇到了类似的问题，并意识到我从错误的角度解决了这个问题。

您首先需要考虑用户的平均手指/拇指大小，并确定有多少像素/点占用了该空间。

从那里您可以派生要使用的非 Retina Display 像素单位和 Retina Display 点单位。

**请注意，如果用户的手指挡住了视线，那么在 iPad 上可以很好玩的游戏可能无法在 iPhone 上运行。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T03:04:18.320

1.  我通常尝试为 iPad 屏幕方面制作我的游戏，我确保重要元素位于较小的安全区中。并且 UI 可以锚定在距边缘指定的距离上。然后对于 iPhone 屏幕方面，我裁剪屏幕的一小部分并相应地布局 UI。

因此，如果您在横向工作，则需要支持以下尺寸： 480x320 - iPhone (0.5) 960x640 - iPhone Retina (1) 1024x768 - iPad (1) 2048x1736 - iPad Retina (2)

括号中的数字表示比例。我只是喜欢为我的游戏单元选择 iPad (1024x768)。在这一点上，我有 3 种尺寸的所有纹理，因为我使用的是 OpenGL，所以我为我需要的每个分辨率使用不同的 mipmap。我的纹理加载功能可以跳过 mipmap 级别，以便在不需要高分辨率的设备上确保内存和加载时间。

1.  取决于您是否需要单击单个图块。如果您需要，我建议在 iPhone (480x320) 上使用 64x64，在 iPad Retina (2048x1736) 上使用 256x256。让你所有的艺术都在 2 的幂次方中总是好的。如果尺寸太大，请考虑 iPhone 的 48x48 和 iPad Retina 的 192x192。如果您的游戏需要您可以使用较小的图块，但考虑在您必须单击的实体周围设置较大的活动区域（希望不是每个图块都可以点击）。

# objective-c - iOS：Objective-C 中的事件监听器相当于什么？

> ID：10492138
> 
> 赞同：18
> 
> 时间：2012-05-08T03:24:46.603
> 
> 标签：objective-c, ios, model-view-controller, ios5

在我的一些学习中，我看到有人提到在您的视图控制器中，您可以拥有一个模型并在模型上设置某种侦听器以进行更改。我认为我没有为这些使用正确的名称，这可能是我的搜索没有出现任何结果的原因。本质上，我想将我的服务器调用从控制器移动到我的模型中，但我需要某种监听器来了解调用何时完成以更新我的视图。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T03:27:49.670

查看代表 [代表教程](https://www.tutorialspoint.com/ios/ios_delegates.htm)

或块更高级的 [基本块教程](http://maniacdev.com/2011/07/tutorial-objective-c-blocks-closures-for-beginners/)

从代表开始，

您也可以使用 NSNotification [NSNotification 教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_nsnotificationcenter/)，但不推荐，因为它会广播到每个班级，并且您可能只需要向特定班级发送消息而不是每个班级

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-18T09:31:14.763

属于 C# 世界，我必须去目标 c（为了我的工作）。我认为目标 c 中的等效事件是这个实现：

使用所有事件的方法创建协议：

```
@protocol MyDelegate <NSObject>
    - (void)myEvent;
@end 
```

在应该发送事件的类中，添加：

```
@interface MyClassWichSendEvent : NSObject

@property (nonatomic, retain) IBOutlet id<MyDelegate> delegate;

@end 
```

在您想要的地方引发事件，例如：

```
- (IBAction)testEvent:(NSButton*)sender
{
    [self.delegate myEvent];
} 
```

现在在你的监听器类中，你应该像这样监听事件：

将协议添加到您的监听类

```
@interface Document : NSDocument<MyDelegate> 
```

在实现中，在 init 或接口构建器中，您必须将对象实例的委托链接到侦听的类的 self 中。

在代码中

```
-(void)awakeFromNib
{
    myObjToListen.delegate = self;    
} 
```

*   在 Interface Builder -> IBOutlet 中，从委托到您的监听类。

最后，在您的侦听器类中实现您的方法：

```
- (void)myEvent
{
    NSLog(@"i have listen this event !");
} 
```

对不起我的英语，我希望能帮助那些从 java 或 C# 开始的人。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-08T04:11:51.743

您正在寻找 KVO - 键/值观察：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)

[http://nachbaur.com/2011/07/29/back-to-basics-using-kvo/](http://nachbaur.com/2011/07/29/back-to-basics-using-kvo/)

代表+通知有利于对象之间的通信，但是当值发生变化时它们不会自动发送消息（从你的问题来看，这就是你要问的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T03:28:32.913

我认为您可能正在寻找 NSNotificationCenter ，这是一种将消息传递给可能正在收听的人的方法。因此，您可以从模型中的事件发送通知，然后在控制器中监听它。一种更简洁的方法可能是使用委托实现您自己的协议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T03:29:08.360

Objective C 使用[委托](http://en.wikipedia.org/wiki/Delegation_pattern)

这篇文章有一个很好的例子：[如何在 Objective-C 中创建委托？](https://stackoverflow.com/questions/626898/how-do-i-create-delegates-in-objective-c)

# linq - LINQ；如何通过加入获得最大日期的记录？

> ID：10492140
> 
> 赞同：14
> 
> 时间：2012-05-08T03:24:47.693
> 
> 标签：linq, max

我怎样才能在 LINQ 中做到这一点？

```
select
    *
from customer c
left join order o on o.CustomerID = c.CustomerID
where o.OrderDate = (select MAX(OrderDate) from order where CustomerID = o.CustomerID ) 
```

不用担心重复，因为每天只有一个订单。

我已经到了 LINQ 中的左连接，但不确定如何或在哪里放置子查询。

```
var query = from customer in clist
            from order in olist
                .Where(o => o.CustomerID == customer.CustomerID)
            select new {
                customer.CustomerID,
                customer.Name,
                customer.Address,
                Product = order != null ? order.Product : string.Empty
            }; 
```

最终解决方案：

```
var query = from customer in clist
            from order in olist
            .Where(o => o.CustomerID == customer.CustomerID && o.OrderDate ==
                olist.Where(o1 => o1.CustomerID == customer.CustomerID).Max(o1 => o1.OrderDate)
            )
            select new {
                customer.CustomerID,
                customer.Name,
                customer.Address,
                order.Product,
                order.OrderDate
            }; 
```

没有任何 lambda 的另一种解决方案

```
var query = from customer in clist
            from order in olist 
            where order.CustomerID == customer.CustomerID && order.OrderDate == 
                (from o in olist 
                 where o.CustomerID == customer.CustomerID 
                 select o.OrderDate).Max()
            select new {
                customer.CustomerID,
                customer.Name,
                customer.Address,
                order.Product,
                order.OrderDate
            }; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-08T04:18:55.057

这或多或少是直译

```
var query = from customer in clist
            from order in olist
                .Where(o => o.CustomerID == customer.CustomerID &&
                            o.OrderDate == olist
                                .Where(o => o.CustomerID == customer.CustomerID)
                                .Select(o => o.OrderDate).Max())
            select new {
                customer.CustomerID,
                customer.Name,
                customer.Address,
                Product = order != null ? order.Product : string.Empty
            }; 
```

但我会重写为

```
var query = from customer in clist
            from order in olist
                .Where(o => o.CustomerID == customer.CustomerID)
                .OrderByDescending(o => o.OrderDate).Take(1)
            select new {
                customer.CustomerID,
                customer.Name,
                customer.Address,
                Product = order != null ? order.Product : string.Empty
            }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T04:19:44.153

这对你有什么作用？

```
var query =
    from customer in clist
    join order in olist
        on customer.CustomerID equals order.CustomerID
        into orders
    select new
    {
        customer.CustomerID,
        customer.Name,
        customer.Address,
        Product = orders
            .OrderByDescending(x => x.OrderDate)
            .Select(x => x.Product)
            .FirstOrDefault() ?? String.Empty
    }; 
```

# events - SDL2 鼠标抓取不起作用

> ID：10492143
> 
> 赞同：5
> 
> 时间：2012-05-08T03:25:17.583
> 
> 标签：events, mouse, sdl

在 SDL 1.2 中，我使用 SDL_WM_GrabInput 将（隐藏的）鼠标置于屏幕中央。对于第一人称射击游戏，这给了我无限的转动自由。SDL2 不再提供此功能，但具有 SDL_SetWindowGrab。这似乎不会在每次循环后将鼠标重新定位到屏幕中心（事件读取）。在鼠标碰到窗口边缘并且不再产生 xrel 值之前，我只能将播放器转动 1 次半。这是一个错误还是我应该使用其他功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:59:31.287

试一试。[`SDL_SetRelativeMouseMode()`](http://wiki.libsdl.org/moin.cgi/SDL_SetRelativeMouseMode?highlight=%28%5CbCategoryMouse%5Cb%29%7C%28CategoryEnum%29%7C%28SGFunctions%29%7C%28CategoryStruct%29)_[`SDL_GetRelativeMouseState()`](http://wiki.libsdl.org/moin.cgi/SDL_GetRelativeMouseState?highlight=%28%5CbCategoryMouse%5Cb%29%7C%28CategoryEnum%29%7C%28SGFunctions%29%7C%28CategoryStruct%29)

或者，使用[`SDL_WarpMouseInWindow()`](http://wiki.libsdl.org/moin.cgi/SDL_WarpMouseInWindow?highlight=%28%5CbCategoryMouse%5Cb%29%7C%28CategoryEnum%29%7C%28SGFunctions%29%7C%28CategoryStruct%29).

# php - 通过 Graph / CURL 将图片发布到 Facebook 时遇到问题

> ID：10492144
> 
> 赞同：1
> 
> 时间：2012-05-08T03:25:26.863
> 
> 标签：php, facebook, facebook-graph-api, curl

SO上有一些关于这个的讨论，我已经尝试了我找到的所有建议，但没有骰子。

每次我使用我的应用程序发布到 FB 墙上时，一切都很顺利，除了 没有显示在墙上**的该死的图片附件。**

我正在使用 CURL 如下

```
$attachment =  array(
    'access_token'  => $fb_user['access_token'],
    'message'       => $fb['post_text'],
    'link'          => $fb['post_url'],
    'name'          => $fb['post_title'],
    'description'   => 'bla',
    'picture'       => rawurlencode($fb['post_picture']),
);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/' . $fb_user['uid'] . '/feed');
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output
$result = curl_exec($ch);
curl_close($ch); 
```

我敢肯定你以前看过这段代码。无论如何，图片没有显示在墙上。

我已经通过 FB linter 运行了图片 URL，它返回 200**但**给出了一个似乎矛盾的错误

```
http://example.com/images/pictures/post/full/0367496d7569e6a85ec4d64af02f6b60.jpg
Response Code:  200
Errors That Must Be Fixed
Can't Download: Could not retrieve data from URL. 
```

当然，我可以在浏览器上调出图像。并且图片路径上的所有文件夹都是`755`，图片本身也是`644`。

因此，如果您有任何想法要向我抛出，请给我一个指导如何调试它。欢迎任何意见。

谢谢。

++++++++++++++++++++++

```
$attachment =  array(
    'access_token'  => $fb_user['access_token'],
    'message'       => $fb['post_text'],
    'link'          => $fb['post_url'],
    'name'          => $fb['post_title'],
    'description'   => 'bla',
    'media'         => array(
                       'type' => 'image',
                       'src'  => rawurlencode($fb['post_picture']),
                       'href' => $fb['post_url'],
                       ),
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:45:19.823

编辑：下面的答案适用于“发布流”而不是“提要”。

所以不回答问题。

对不起，

抢

* * *

您需要在“媒体”中包含图片 - 所以您的数据数组是错误的。

这是我的 Javascript - PHP 的相同结构。

```
 attachment: {
    name: name,
    caption: caption,
    description: description,
    href: link ,
    media: [{
      type: 'image',
      src: picture,
      href: link
    }]
  }, 
```

# performance - 从另一台 PC 访问 Tomcat Web 应用程序缓慢

> ID：10492148
> 
> 赞同：-1
> 
> 时间：2012-05-08T03:25:55.053
> 
> 标签：performance, tomcat, response

访问我在本地主机上运行 Windows 2008 Server 的 Web 应用程序很快；但是，当我尝试通过另一台 PC（exp: [http://xxx.xxx.xxx.xx:8080/appname](http://xxx.xxx.xxx.xx:8080/appname)）访问 Web 应用程序时，加载一个简单的登录页面大约需要一分钟。非常感谢有关此问题的任何意见。

进一步的信息，防火墙已经关闭，并且设置在没有 Internet 访问的 LAN 环境中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:12:22.893

有了这些很少的信息，几乎不可能调试您的情况。但是，我会根据您提供的内容进行猜测。

如果您在内部 LAN 上运行，则问题可能是您没有为您的服务器配置反向 DNS。您的服务器有一些仅存在 forward-DNS 的虚构名称。当 Tomcat 收到请求时，它会尝试根据 IP 地址查找主机名，这可能需要很长时间才能超时。

# c - 使用 argv 访问参数

> ID：10492149
> 
> 赞同：1
> 
> 时间：2012-05-08T03:26:03.480
> 
> 标签：c, argv

这是我一直在通过打印一堆东西来测试的东西，但是由于某种原因我无法完全弄清楚一个案例。

我需要将一个整数作为参数传递给稍后使用的函数，但是当我再次打印它以确保我正确存储它时，我得到一个随机数。这是代码的相关部分：

```
int num_bytes = argv[1]; 
....
printf("Max number of bytes: %d", num_bytes); 
```

我只向函数传递了一个参数，它是一个 int。我还尝试将 argv[1] 转换为 int，但这也不起作用。我不确定这是否是 printf 的问题。如果只是这样，我不介意。我只需要知道我将值正确存储为 int 即可。我知道 argv 是指向字符串的指针数组（我认为是 C 字符串？），但我认为您可以将字符转换为整数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T03:31:01.873

`char **argv`被认为是一个字符数组（或字符串）。您需要`argv`先将内部的值转换为整数。

您可以通过以下方式做到这一点`atoi`：

```
int num_bytes = atoi(argv[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:35:10.227

argv 是指向字符串数组的指针。您需要调用 atoi(argv[1]) 来获取您传递的整数参数。

# c - 指向数组的指针，分配数组

> ID：10492152
> 
> 赞同：-8
> 
> 时间：2012-05-08T03:26:35.800
> 
> 标签：c, pointers

```
int main() {
    //  int arr[2][2] = { {1,2}, {3,4}};
    int a[] = {1,2};
    int b[] = {3,4};
    int (*ptr)[2];

    // assign ptr to arr
    //ptr = arr;
    ptr = (int (*)[2])malloc (2*sizeof(int));
    ptr = &a;
    (ptr+1) = b;  // error here
     printf("%3d %3d", ptr[0][1], ptr[1][1]) ;
 } 
```

我想要 (ptr+1) 分配一个数组，请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:29:19.513

`ptr`是一个指向 int array( `int[2]`) 的指针，但是你 malloc 错误的大小，然后通过分配给相同的变量来泄漏内存，从而覆盖`malloc`内存地址。我假设你想这样做：

```
int (**ptr)[2];
ptr = malloc (2*sizeof(int(*)[2]));
ptr[0] = &a;
ptr[1] = &b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:38:17.440

Full code:

```
#include <stdlib.h>
#include <stdio.h>

int main() {
    int a[] = {1,2};
    int b[] = {3,4};
    int **ptr;

    ptr = (int **) malloc(sizeof(int *) * 2);

    ptr[0] = a;
    ptr[1] = b;
    printf("%3d %3d\n", ptr[0][1], ptr[1][1]);
    free(ptr);
 } 
```

a and b already are pointers (to integers), so ptr is a pointer to a pointer (**).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T03:38:38.073

You need to use an array of pointers, not a pointer to an array:

```
int main()
{
    int a[] = {1,2};
    int b[] = {3,4};
    int *ptr[2] = { a, b };

    printf("%3d %3d", ptr[0][1], ptr[1][1]) ;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T04:23:43.620

你可以像这样 malloc 。

```
#include <stdlib.h>
#include <stdio.h>

int main(int argc, char *argv[]) {
    int i;
    int a[] = {1,2};
    int b[] = {3,4};
    int *ptr[2];    //same as ptr[2][??]

    ptr[0] = (int *) malloc(sizeof(int*) * 2);  //malloc ptr[0] >> 2 * sizeof int
    ptr[1] = (int *) malloc(sizeof(int*) * 5);  //malloc ptr[1] >> 5 * sizeof int

    /* so we get ptr[0][2] and ptr[1][5]*/

    /* SET VALUE */
    for(i = 0; i < 2; i++)
    ptr[0][i] = i;
    for(i = 0; i < 5; i++)
    ptr[1][i] = i;

    /* PRINT VALUE */
    for(i = 0; i < 2; i++)
        printf("ptr[0][%03d] = %03d\n", i, ptr[0][i]);

    printf("\n");

    for(i = 0; i < 5; i++)
        printf("ptr[1][%03d] = %03d\n", i, ptr[1][i]);

    /* FREE POINTER */
    free(ptr[0]);
    free(ptr[1]);

    return 0;
} 
```

# javascript - 更改“li”内“a”标签的颜色

> ID：10492154
> 
> 赞同：-1
> 
> 时间：2012-05-08T03:26:52.437
> 
> 标签：javascript, jquery, html, css

我试过用css来做，使用：

```
#mainmenu ul li:hover a
{
  color: #000000;
} 
```

但它不工作，然后我尝试使用 jQuery，与：

```
function change()
{
  $(this).find('a').css('color','#000000');
} 
```

在内部调用 onMouseOver `<li>`，但它也不起作用......

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T03:32:36.940

尝试一下`color: black !important`，如果它有效，然后寻找覆盖它的样式并重新组织你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:20:18.600

发布的 CSS 代码在使用最简单的 HTML 进行测试时有效，例如

```
<div id=mainmenu>
<ul><li><a href=foo>link</ul>
</div> 
```

并且没有使用其他样式表。这意味着在您的实际页面中，HTML 语法中存在一些错误，或者更有可能是覆盖此规则的其他样式表规则。

因此，您应该分析和修改样式表。如果您需要进一步的帮助，您应该发布仍然存在问题的最少代码。

使用`!important`可以确保它不是 HTML 问题或 CSS 代码中的拼写错误，但`!important`应该很少在实时页面上使用，尤其是在您并不真正了解样式表如何协同工作的情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:28:11.553

试试悬停

```
#mainmenu ul li a:hover
{
  color: #000000;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:35:09.430

我认为 CSS 无论如何都可以处理你的问题，如果你想使用 jquery 解决你可以使用这个链接[Jquery Hyperlink Plugins](http://www.jquery4u.com/plugins/10-jquery-hyperlink-plugins/)

# r - R中的时间序列和stl：仅允许错误单变量序列

> ID：10492155
> 
> 赞同：18
> 
> 时间：2012-05-08T03:27:02.073
> 
> 标签：r, time-series, decomposition

我正在对一个杂乱无章的文件进行每小时降水分析。但是，我设法清理它并将其存储在数据帧（称为 CA1）中，其形式如下：

```
 Station_ID Guage_Type   Lat   Long       Date Time_Zone Time_Frame H0 H1 H2 H3 H4 H5        H6        H7        H8        H9       H10       H11 H12 H13 H14 H15 H16 H17 H18 H19 H20 H21 H22 H23
1    4457700         HI 41.52 124.03 1948-07-01         8        LST  0  0  0  0  0  0 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000   0   0   0   0  0  0   0   0   0   0   0   0
2    4457700         HI 41.52 124.03 1948-07-05         8        LST  0  1  1  1  1  1  2.0000000 2.0000000 2.0000000 4.0000000 5.0000000 5.0000000   4   7   1   1   0 0  10  13   5   1   1   3
3    4457700         HI 41.52 124.03 1948-07-06         8        LST  1  1  1  0  1  1 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000   0   0   0   0   0  0   0   0   0   0   0   0
4    4457700         HI 41.52 124.03 1948-07-27         8        LST  3  0  0  0  0  0 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000   0   0   0   0   0 0   0   0   0   0   0   0
5    4457700         HI 41.52 124.03 1948-08-01         8        LST  0  0  0  0  0  0 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000   0   0   0   0   0 0   0   0   0   0   0   0
6    4457700         HI 41.52 124.03 1948-08-17         8        LST  0  0  0  0  0  0 0.3888889 0.3888889 0.3888889 0.3888889 0.3888889 0.3888889   6   1   0   0   0 0   0   0   0   0   0   0 
```

其中 H0 到 H23 代表每天 24 小时（行）

仅使用 CA1（上面的数据框），我取 24 个点的每一天（行）并将其垂直转置并将剩余的天数（行）连接到一个变量，我称之为 dat1：

```
 > dat1[1:48,]
  H0  H1  H2  H3  H4  H5  H6  H7  H8  H9 H10 H11 H12 H13 H14 H15 H16 H17 H18 H19 H20 H21 H22 H23  H0  H1  H2  H3  H4  H5  H6  H7  H8  H9 H10 H11 H12 H13 H14 H15 H16 H17 H18 H19 H20 H21 H22 H23 
   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   1   1   2   2   2   4   5   5   4   7   1   1   0  0  10  13   5   1   1   3 
```

使用变量 dat1，我将其作为参数输入以获取时间序列数据：

```
> rainCA1 <- ts(dat1, start = c(1900+as.POSIXlt(CA1[1,5])$year, 1+as.POSIXlt(CA1[1,5])$mon), 
    frequency = 24) 
```

需要注意的几点：

```
>dim(CA1)
  [1] 5636   31
>length(dat1)
  [1] 135264 
```

因此 5636*24（每行总数据点 [24]）= 135264 个总点。长度（rainCA1）与上述几点一致。但是，如果我在 ts 函数中结束，例如

```
>rainCA1 <- ts(dat1, start = c(1900+as.POSIXlt(CA1[1,5])$year, 1+as.POSIXlt(CA1[1,5])$mon), 
    end = c(1900+as.POSIXlt(CA1[5636,5])$year, 1+as.POSIXlt(CA1[5636,5])$mon),
    frequency = 24) 
```

我得到了 1134 个总长度，其中我丢失了很多数据。我假设这是由于日期不连续，因为我只应用月份和年份作为起点的参数。

继续，在我认为正确的路径中，使用不带 end 参数的第一个 ts 计算，我将其作为 stl 的输入提供：

```
>rainCA1_2 <-stl(rainCA1, "periodic") 
```

不幸的是，我收到一个错误：

```
Error in stl(rainCA1, "periodic") : only univariate series are allowed 
```

我不明白或如何去做。但是，如果我返回 ts 函数并提供 end 参数，则 stl 可以正常工作而不会出现任何错误。

我在很多论坛上进行了研究，但没有人（或据我所知）提供一个很好的解决方案来获取每小时数据的数据属性。如果有人可以帮助我，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T16:13:24.580

该错误是数据形状的结果。试试`> dim(rainCA1)`；我怀疑它会给出类似的东西`> [1] 135264 1`。替换`rainCA1 <- ts(dat1 ...`为`rainCA1 <- ts(dat1[[1]] ...`，它应该可以工作。

我想知道它是否正确...在我看来，您的首要任务是获取格式一致的数据。确保`ts()`获得正确的输入。查看[`ts`](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/ts.html).

`ts()`不解释日期时间格式。`ts()`需要具有固定间隔的连续数据点。它使用一个主要计数器和一个次要计数器（其中`frequency`适合一个主要计数器）。例如，如果您的数据是每小时的，并且您预计每日水平的季节性，`frequency`等于 24。`start`因此`end`，主要是装饰性的：`start`仅表示主要计数器的 t(0)，而`end`表示 t(end)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-30T10:42:50.370

我试图用一个非常简单的例子来解释写入方式，以避免在另一个问题中出现这类错误，链接在这里：

[stl() 分解不接受单变量 ts 对象？](https://stackoverflow.com/questions/28245059/stl-decomposition-wont-accept-univariate-ts-object/31721358#31721358)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-10-30T17:11:07.613

如果您申请`dim()`co2 或 AirPassengers，它将返回 NULL。所以建议你申请 `dim(rainCA1)<-NULL`

它对我有用很多次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-13T19:00:21.033

我找到的一种解决方案是`time_series_var <- ts(data[, c("var_of_interest")])`，然后`time_series_var <- ts(as.vector(time_series_var))`与单变量相关的错误消失了，因为尺寸现在是正确的。

# swing - 斯卡拉摆动表头

> ID：10492156
> 
> 赞同：0
> 
> 时间：2012-05-08T03:27:10.470
> 
> 标签：swing, scala

我在 scala swing中无法居中和右对齐**表头。**

我可以对齐其他数据行的文本（通过覆盖类中的`rendererComponent`方法`scala.swing.Table`）。

java swing 中建议的方法是设置自定义单元格渲染器（例如[对齐 JTable 中单元格的值？](https://stackoverflow.com/questions/2408541/align-the-values-of-the-cells-in-jtable)）以对齐单元格，但这在 scala swing table 中不起作用...

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:36:27.670

大多数 Scala-Swing 组件都有`peer`属性，可让您访问底层 Java 的 Swing 组件。所以我相信，你只需要得到`table.peer`然后使用你提到的解决方案。您可以在 SalaDoc 中找到更多信息：

[http://www.scala-lang.org/api/current/scala/swing/Table.html#peer:JTable](http://www.scala-lang.org/api/current/scala/swing/Table.html#peer:JTable)

希望这可以帮助。

# mysql - 如何计算表格的列数

> ID：10492164
> 
> 赞同：49
> 
> 时间：2012-05-08T03:28:00.417
> 
> 标签：mysql, sql

例如 ：

```
tbl_ifo

id | name  | age | gender 
----------------------------
1  | John  |  15 |  Male
2  | Maria |  18 |  Female
3  | Steph |  19 |  Female
4  | Jay   |  21 |  Male 
```

如何使用 mysql 计算该表的列数？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-08T03:31:30.327

```
SELECT count(*)
FROM information_schema.columns
WHERE table_name = 'tbl_ifo' 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-05-08T03:39:08.087

我认为您还需要指定数据库的名称：

```
SELECT COUNT(*)
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_schema = 'SchemaNameHere'
  AND table_name = 'TableNameHere' 
```

如果您不指定数据库的名称，那么只要它与表的名称匹配，它就有可能计算所有列。例如，您有两个数据库：`DBaseA and DbaseB`，在`DBaseA`，它有两个表： TabA *( **3 fields** )*，*TabB(4 fields)*。在 中`DBaseB`，它又有两个表： TabA *( 4 **fields** )*、*TabC(4 fields)*。

如果您运行此查询：

```
SELECT count(*)
FROM information_schema.columns
WHERE table_name = 'TabA' 
```

它将返回 7，因为有两个名为`TabA`. 但是通过添加另一个条件`table_schema = 'SchemaNameHere'`：

```
SELECT COUNT(*)
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_schema = 'DBaseA'
  AND table_name = 'TabA' 
```

那么它只会返回 3。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-11T09:05:40.417

```
$cs = mysql_query("describe tbl_info");
$column_count = mysql_num_rows($cs); 
```

要不就：

```
$column_count = mysql_num_rows(mysql_query("describe tbl_info")); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T05:00:02.290

要精确计算表的列数，您可以`information_schema.columns`通过传递所需的数据库（架构）名称和表名称来获取表单。

*参考以下代码：*

```
SELECT count(*)
FROM information_schema.columns
WHERE table_schema = 'myDB'  
AND table_name = 'table1'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-08T12:49:58.753

我有一个更笼统的答案；但我相信它对于计算数据库中所有表的列很有用：

```
SELECT table_name, count(*)
FROM information_schema.columns
GROUP BY table_name; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-15T09:08:35.240

只需使用 mysql_fetch_assoc 并使用 count() 函数对数组进行计数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-15T09:38:05.257

此查询可能会对您有所帮助

```
SELECT COUNT(COLUMN_NAME) FROM INFORMATION_SCHEMA.COLUMNS WHERE 
TABLE_CATALOG = 'database' AND TABLE_SCHEMA = 'dbo'
AND TABLE_NAME = 'tbl_ifo' 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-10-18T07:22:12.427

我想你想知道表格中的总条目数！为此使用此代码..

`SELECT count( * ) as Total_Entries FROM tbl_ifo;`

# sql-server-2008 - 如何在 sql server 中将 yyyymmddhhmm 转换为 yyyy-mm-dd hh:mm:ss.uuu

> ID：10492167
> 
> 赞同：-2
> 
> 时间：2012-05-08T03:28:25.460
> 
> 标签：sql-server-2008

如何转换

```
yyyymmddhhmm 
```

至

```
yyyy-mm-dd hh:mm:ss.uuu 
```

在 SQL Server 2008 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:31:59.567

您要检索以插入数据库吗？

无论如何，您可以通过 CONVERT() 函数进行更改和转换

试试这个代码

```
SELECT CONVERT(datetime, Update_Date , 126) FROM Tbl_TEST 
```

以供参考

[http://www.petefreitag.com/item/687.cfm](http://www.petefreitag.com/item/687.cfm)

[http://www.sqlusa.com/bestpractices/datetimeconversion/](http://www.sqlusa.com/bestpractices/datetimeconversion/)

# linux - 即使我已经安装它也找不到 yasm

> ID：10492178
> 
> 赞同：11
> 
> 时间：2012-05-08T03:29:32.683
> 
> 标签：linux, x264, yasm

我遇到了一个奇怪的问题。我试图安装 x264。运行 sudo ./configure --enable-shared 时，它给出：

**发现没有汇编器 最低版本是 yasm-0.7.0 如果你真的想不使用 asm 编译，用 --disable-asm 配置。**

但是我已经安装了 yasm-0.7.0，为了证明，我运行 yasm --version，它给出了：

* ***yasm 0.7.0.2066 于 2012 年 5 月 8 日编译。版权所有 (c) 2001-2008 Peter Johnson 和其他 Yasm 开发人员。运行 yasm --license 以获取许可概述和摘要。****

我把yasm安装到/usr/local/yasm，为什么找不到yasm？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-07-20T14:30:21.050

以防有人从谷歌来到这里，寻找最近的解决方案。

最近版本的 x264 从 yasm 转移到 nasm，因此破坏了一些 FFMPEG 安装脚本或教程。要检查是否是这种情况，请查看输出。如果它读

```
Minimum version is nasm-2.13 
```

然后你要安装nasm。在 Ubuntu 16.04 存储库中有 nasm 2.11；因此，您必须按照官方说明[http://www.linuxfromscratch.org/blfs/view/svn/general/nasm.html](http://www.linuxfromscratch.org/blfs/view/svn/general/nasm.html)从源代码构建。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T21:57:10.247

`sudo`忽略您的`PATH`环境变量并使用它自己的。

相比：

```
$ which yasm
/usr/local/bin/yasm 
```

和：

```
$ sudo which yasm
/usr/bin/yasm 
```

要解决，请执行以下操作：

```
$ sudo PATH=$PATH:/usr/local/bin which yasm
/usr/local/bin/yasm 
```

更确切地说

```
$ sudo PATH=$PATH:/usr/local/bin ./configure --enable-shared 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-04T23:09:28.297

如果您正在运行 Ubuntu，并且如果“which yasm”没有任何结果，请尝试下面提到的命令来构建 x64 ....

sudo apt-get install yasm

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-20T06:58:32.527

该错误消息意味着您的系统上有旧版本的 yasm，因此您应该更新它！见这里：[https ://trac.ffmpeg.org/wiki/CompilationGuide/Quick/libx264](https://trac.ffmpeg.org/wiki/CompilationGuide/Quick/libx264)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-09T07:27:31.003

也许您应该为正确的路径 /usr/bin/yasm 重建 yasm。

# java - Python 和 Java 之间 RegEx 语法的差异

> ID：10492180
> 
> 赞同：8
> 
> 时间：2012-05-08T03:29:37.623
> 
> 标签：java, python, regex

我在 Python 中有一个工作正则表达式，我正在尝试转换为 Java。似乎在实现中存在细微差别。

RegEx 正在尝试匹配另一个 reg ex。有问题的正则表达式是：

```
/(\\.|[^[/\\\n]|\[(\\.|[^\]\\\n])*])+/([gim]+\b|\B) 
```

它遇到问题的字符串之一是：`/\s+/;`

reg ex 不应该与结尾匹配`;`。在 Python 中，RegEx 可以正常工作（并且与结尾不匹配`;`，但在 Java 中它确实包含`;`.

问题：

1.  我该怎么做才能让这个 RegEx 在 Java 中工作？
2.  根据我[在此处](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)阅读的内容，此 RegEx 应该没有区别。Python与Java中的RegEx实现之间是否存在差异列表？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T16:53:01.183

对于一小部分情况，Java 不会以与 Python 相同的方式解析正则表达式。在这种特殊情况下，嵌套`[`的 's 引起了问题。在 Python 中，您不需要转义任何嵌套`[`，但在 Java 中确实需要这样做。

原始正则表达式（用于 Python）：

```
/(\\.|[^[/\\\n]|\[(\\.|[^\]\\\n])*])+/([gim]+\b|\B) 
```

固定的 RegEx（用于 Java 和 Python）：

```
/(\\.|[^\[/\\\n]|\[(\\.|[^\]\\\n])*\])+/([gim]+\b|\B) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-08T04:03:50.637

黑白 Java 和 Python 的明显区别在于，在 Java 中，您需要转义很多字符。

此外，您可能会遇到匹配方法之间的不匹配，而不是实际正则表达式表示法的差异：

鉴于 Java

```
String regex, input; // initialized to something
Matcher matcher = Pattern.compile( regex ).matcher( input ); 
```

*   Java 的`matcher.matches()`(also `Pattern.matches( regex, input )`) 匹配整个字符串。它在 Python 中没有直接的等价物。`re.match( regex, input )`使用以`regex`结尾的 with可以达到相同的结果`$`。
*   Java`matcher.find()`和 Python`re.search( regex, input )`匹配字符串的任何部分。
*   Java`matcher.lookingAt()`和 Python`re.match( regex, input )`匹配字符串的开头。

有关更多详细信息，请阅读 Java 文档[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)并与[Python 文档](http://docs.python.org/library/re.html#search-vs-match)进行比较。

既然你说这不是问题，我决定做一个测试： http: [//ideone.com/6w61T](http://ideone.com/6w61T) 看起来java正在做你需要的事情（第0组，整个比赛，不包含`;`）。你的问题在别处。

# ruby - 为什么机架响应体是数组而不是字符串？

> ID：10492181
> 
> 赞同：21
> 
> 时间：2012-05-08T03:29:56.813
> 
> 标签：ruby, rack

他们文档中的一个经典的 hello world 示例，

```
class HelloWorld
  def call(env)
    return [200, {}, ["Hello world!"]]
  end
end 
```

我的问题是为什么第三个值是 [Hello world!"]，而不是 "Hello world"？来自他们的文档，

> Body 必须响应每一个并且只能产生 String 值。Body 本身不应该是 String 的实例，因为这将在 Ruby 1.9 中中断。

为什么身体需要对每一个做出反应？在什么情况下有关系？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T03:49:51.550

我认为 rack 起源于 python 的 wsgi。这是对 python 的解释：http: [//www.python.org/dev/peps/pep-3333/#buffering-and-streaming](http://www.python.org/dev/peps/pep-3333/#buffering-and-streaming)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T07:15:54.527

从句子来看`The Body itself should not be an instance of String, as this will break in Ruby 1.9.`，我假设响应的最后一个元素必须是`Enumerable`. 由于`String`s 在 1.9 中停止包含此模块，因此您需要某种集合来实现它。

顺便说一句：你好世界的例子通常不能很好地弄清楚为什么以某种方式完成某事，它们太微不足道了。

# java - Java / Android 编程 - 循环失败

> ID：10492182
> 
> 赞同：-3
> 
> 时间：2012-05-08T03:30:45.510
> 
> 标签：java, android

我正在使用带有计时器的while循环。问题是定时器并不是在每个循环中都使用。它只是第一次使用。第一次执行循环中包含的语句后，没有我设置的延迟。这怎么可能，因为计时器包含在 while 循环中。有什么解决办法吗？

```
 int count = 1;
        while (count <= 10) {
            final Handler handler = new Handler();
            Timer t = new Timer();
            t.schedule(new TimerTask() {
                public void run() {
                    handler.post(new Runnable() {
                        public void run() {

                        // Stuff the while loop executes
                    }
                    });
                }
            }, 20000);
            count++;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:33:11.103

`TimerTask`启动一个新线程，然后循环正常进行。

线程的执行不会导致循环中代码的执行延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:14:59.080

您计划`TimerTask`在一个小时后同时执行 10 秒。因此，所有 10 个任务都在 1 小时后执行，这使得它看起来像是 1 个执行，因为所有`Toast`消息同时显示。要以固定延迟安排任务，第一个任务在 1 小时后开始，请使用以下方法：

```
Timer t = new Timer();
t.schedule(task, 3600000, 3600000); 
```

这将一直执行，直到您调用`t.cancel()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:10:11.273

这是因为您要在一小时内将 10 个 toasts 都排好队。循环的每次迭代只需要几分之一毫秒，或者可能比这多一点。要正确地将它们排入队列，您可以每次执行 3600000 * count 而不是 3600000。

这是一种可怕的方法。你应该使用 AlarmManager 来处理这样的事情。

# multithreading - 带有多线程 XCODE 的 NSNotification

> ID：10492184
> 
> 赞同：1
> 
> 时间：2012-05-08T03:31:08.000
> 
> 标签：multithreading, nsnotification

我是 IPHONE 开发的新手。我在使用多线程处理 NSNotification 时遇到问题。

我在画廊中有几张图片。我选择了图片。选定的图像存储在核心数据中。我有一个按钮（上传）。当我点击它时，我需要显示一个带有 NSNotification 的 hud（使用图像名称上传）。IE。“uploading image1.jpg”然后我需要调用下一个线程来显示“uploading image2.jpg”等等。我需要一个示例代码。

我需要知道如何使用多线程发送和接收 NSNotification。请在这个问题上帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:07:58.733

考虑为此使用[MBProgressHUD](https://github.com/jdg/MBProgressHUD)。

演示项目包含与您正在做的非常相似的示例。这些组件还具有您可能想要的其他功能，例如进度指示器。

在主页上，将异步任务配置为具有 HUD 通知非常简单：

```
[MBProgressHUD showHUDAddedTo:self.view animated:YES];
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    // Do something...
    dispatch_async(dispatch_get_main_queue(), ^{
        [MBProgressHUD hideHUDForView:self.view animated:YES];
    });
}); 
```

# javascript - 验证输入的数字是否为整数或“一半”

> ID：10492196
> 
> 赞同：1
> 
> 时间：2012-05-08T03:32:56.353
> 
> 标签：javascript, jquery

我从用户那里得到输入，它需要是整数或`0.5`.

例如`7`，`23`和`5.5`都是有效的，但`3.1`不是`2.7`。

换句话说，如果用户输入`2.3`，将会有一个警告告诉他们他们只能输入`2.5`。

我该如何执行此验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T03:35:14.553

由于他们正在输入字符串，而且众所周知，浮点数很难正确处理:-) 我建议在转换为浮点数*之前检查字符串输入本身。*

如果它包含`.`字符，请确保最后两个字符是`.5`.

您可能还需要检查其他情况，具体取决于您要允许的内容。例如，`7.0`可能有效`2.50000000`。

但是，为简单起见，我只是声明输入必须是整数，或者以`.5`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T03:36:28.790

```
$('button').on('click', function() {

 var val = Number($('input[type=text]').val()).toFixed(1); 
 if(val  % 0.5) {
   alert('This value should' + (parseInt(val) + 0.5));
 }

}); 
```

# java - 需要帮助通过读取文件和基于文件生成图形来修复 Java 中的错误

> ID：10492203
> 
> 赞同：1
> 
> 时间：2012-05-08T03:34:24.160
> 
> 标签：java, graphics, 2d

这是我第一次在 stackoverflow 上发帖，请多多包涵。

我决定用java编写一个程序，它读取一个包含诸如“蓝色”、“绿色”、“红色”之类的文本的文件，然后在我的JFrame上绘制它们所指示的颜色的正方形，并根据它们的位置在文本文件中。我不确定这对某人是否有意义，但它只是突然出现在我的脑海中，我就像“嘿，我想我会试试这个。”

基本上我想让我的 JFrame 的第一行有 3 个正方形（红色、蓝色、绿色）。然后我的下一行有 3 个正方形（蓝色、绿色、红色）。然后是最后一个（绿色、红色、蓝色）。

首先我的文本文件是这样的：

红色 蓝色 绿色

蓝色 绿色 红色

绿色 红色 蓝色

现在我将发布代码。我不是 100% 确定错误是什么，我一直在 eclipse 中运行它，它并没有真正告诉我任何有用的信息，我知道该怎么做。

```
import java.util.*;
import java.awt.*;
import java.io.File;
import javax.swing.*;

public class Test extends JFrame { 
    int currentY = 0;
    int currentX = 0;
    static Scanner squares;
    private final static Graphics graphics = null;

    Test(Graphics graphics) {
    this.setVisible(true);
    this.setSize(400, 400);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    while (squares.hasNextLine()) {
        Scanner row = new Scanner(squares.nextLine());
        while (row.hasNext()) {
            System.out.println(row.next());
            if (row.next().equals("green")) {
                graphics.setColor(Color.GREEN);
            }
            else if (row.next().equals("red")) {
                graphics.setColor(Color.RED);
            }
            else {
                graphics.setColor(Color.BLUE);
            }
            graphics.fillRect(currentX,  currentY, 20, 20);
            currentX += 20;
        }
        currentY += 20;
    }

}
public static void main(String[] args) throws Exception {
    squares = new Scanner(new File ("C:/Test/data.txt"));
    Test test = new Test(graphics);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:44:04.717

我相信您的主要问题是图形为空。下一个更严重的问题是，每次在扫描仪上调用 next() 时，前一个字符串都会被吃掉。而是使用 String color = row.next() 之类的东西，并在循环的其余部分使用“color”。

你可以在这里得到一些想法：[http ://content.gpwiki.org/index.php/Java:Tutorials:Graphics](http://content.gpwiki.org/index.php/Java:Tutorials:Graphics)

# c++ - C++ 关于跟踪访问冲突的任何建议？

> ID：10492206
> 
> 赞同：7
> 
> 时间：2012-05-08T03:35:21.477
> 
> 标签：c++, class, instance, destructor, access-violation

我在尝试追踪程序中的访问冲突时遇到了问题。它发生在第三次调用析构函数时，恰好在析构函数似乎完成时。

我花了几个小时试图追查这个问题，所以我正在寻找关于我可以做的事情的进一步建议。我正在使用`new`和`delete`运算符创建类实例。Visual Studio 输出窗口显示：

`First-chance exception at 0x60e3ad84 (msvcp100d.dll) in WebCollationAgent.exe: 0xC0000005: Access violation writing location 0xabababab. Unhandled exception at 0x60e3ad84 (msvcp100d.dll) in WebCollationAgent.exe: 0xC0000005: Access violation writing location 0xabababab.`

我能做些什么来尝试找出这些内存位置中的内容吗？

调用堆栈窗口显示以下内容（按照我将其粘贴到时间顺序的相反顺序，从最早到最新）：

```
Program.exe!Network::`scalar deleting destructor'()  + 0x2b bytes   C++

Program.exe!std::basic_string<wchar_t,std::char_traits<wchar_t>,std::allocator<wchar_t> >::~basic_string<wchar_t,std::char_traits<wchar_t>,std::allocator<wchar_t> >()  Line 754 + 0xf bytes    C++

Program.exe!std::_String_val<wchar_t,std::allocator<wchar_t> >::~_String_val<wchar_t,std::allocator<wchar_t> >()  Line 478 + 0xb bytes  C++ 
```

> msvcp100d.dll!std::_Container_base12::_Orphan_all() 第 214 行 + 0x5 字节 C++

我对此信息的最佳猜测是某种字符串变量导致了问题？有人对解释这些信息有什么建议吗？

任何其他建议也会很有用，在此先感谢。

我在 Windows 7 下编码并使用 Visual Studio 2010 Professional。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T04:05:48.173

[在使用BoundsChecker（现在是 Borland DevPartner 的一部分）](http://www.borland.com/products/devpartner/read/)之前，我已经成功跟踪内存错误。有许多类似的产品也可能有所帮助：[HeapAgent](http://www.microquill.com/heapagent/index.html)和[Rational Purify](http://www-01.ibm.com/software/rational/)。这些看起来很像 ValGrind，但在 Windows 上工作。

以下是 3 个可能有帮助的开源替代方案：

1.  [DUMA](http://sourceforge.net/projects/duma/)（从外观上看，您必须自己为 Windows 构建它，但 README 包含一些关于这样做的说明）

2.  [XMEM](http://sourceforge.net/projects/xmem/)

3.  [大象](http://elephant.tigris.org/)

我不知道它们的性能如何，但它们听起来很有前途，而且看起来它们都以一种或另一种方式在 Windows 上工作。

这个[关于管理内存错误的 Microsoft 页面](http://msdn.microsoft.com/en-US/library/w500y392%28v=VS.90%29.aspx)也可能会有所帮助，并且还包含设置内存断点的链接，这可能会帮助您了解您的数据何时首次被删除或更改。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T08:11:04.937

使用 Microsoft Heap Debugging 的东西，希望你的就是它的设计案例之一。净化将是之后的下一步。

它内置在 Visual Studio 中，在某些情况下很有帮助。如果它有效，它肯定比给 IBM 两三个装满现金的口袋来购买 Purify 更好。

你可以在[这里找到信息](http://msdn.microsoft.com/en-us/library/5at7yxcs%28v=vs.100%29.aspx)

TL;DR 在主要的，这样做

```
int tmpFlag = _CrtSetDbgFlag(_CRTDBG_REPORT_FLAG);
// 打开 (OR) - 将释放的内存块保留在
// 堆的链表并将它们标记为已释放
tmpFlag |= _CRTDBG_DELAY_FREE_MEM_DF;

// 在每次堆操作时开启内存检查
tmpFlag |= _CRTDBG_CHECK_ALWAYS_DF;

// 设置标志的新状态
_CrtSetDbgFlag(tmpFlag);

```

`_CRTDBG_CHECK_ALWAYS_DF`如果运行速度太慢，您可以在不同的位置切换标志。但是，我会在检查每个堆操作的情况下运行几次，以便了解问题发生的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:48:00.033

我写了这个博客有一些提示

[http://www.atalasoft.com/cs/blogs/loufranco/archive/2007/02/06/6-_2200_Pointers_2200_-on-Debugging-Unmanaged-Code.aspx](http://www.atalasoft.com/cs/blogs/loufranco/archive/2007/02/06/6-_2200_Pointers_2200_-on-Debugging-Unmanaged-Code.aspx)

您需要做的主要事情是在带有错误的代码仍在堆栈上时发生崩溃或异常。很多时候，在带有错误的代码执行并返回后的某个时间，您会遇到访问冲突，实际上可能是很久以后（计算机时间）。在这种情况下，几乎不可能弄清楚。

在您的情况下，在 delete 中标记了问题，这强烈表明堆已损坏，而 C++ 中的两个常见原因是双重删除和混淆数组删除（当您应该使用 delete[] 或其他方式时使用 delete大约）。

如果你能用简单的代码重现它，我会寻找上面的两个问题。否则，请下载 Microsoft 调试工具并使用`gflags +hpa -i program.exe`它使堆对损坏更加敏感（它会更快地报告错误）。

# android - Android 适配器列表在 ProgressDialog 的 thread() 中不起作用

> ID：10492209
> 
> 赞同：0
> 
> 时间：2012-05-08T03:35:55.750
> 
> 标签：android

下面是我的代码不起作用，我不明白为什么它说***“只有创建视图层次结构的原始线程才能触及它的视图。”*** 当我想在 LoadValues() 方法中为我的列表视图设置适配器时.. ***“listView.setAdapter(adapter)”***

```
public class ProgressDialogActivity extends Activity {

    private ProgressDialog progressDialog;  
    private ListView listView;
    private ArrayList<String> lstValores;
    private Handler progressBarHandler = new Handler();

    private int mProgressStatus, mProgressTotal;    

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);              

        lstValores = new ArrayList<String>();
        listView = (ListView) findViewById(R.id.listView1);

        this.LoadValues();

    }//onCreate   

    public void LoadValues(){

        progressDialog = new ProgressDialog(ProgressDialogActivity.this);
        progressDialog.setTitle("Aguarde..");
        progressDialog.setMessage("Cargando lista..");
        progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressDialog.setProgress(0);
        progressDialog.show();

        new Thread(new Runnable() {         
            public void run() {         

                mProgressTotal = (int) 1000;

                try {
                    for (int i = 0; i < mProgressTotal; i++) {

                        lstValores.add("valor " + i);

                        mProgressStatus = (int) ((i * 100) / mProgressTotal);

                        progressBarHandler.post(new Runnable() {                        
                            public void run() {
                                progressDialog.setProgress(mProgressStatus);
                                }
                            });                 
                        }// end for      

                        ArrayAdapter<String> adapter = new ArrayAdapter<String>(ProgressDialogActivity.this, 
                                                                                R.layout.textviewlist_layout, 
                                                                                lstValores);
                        listView.setAdapter(adapter);                       
                        progressDialog.dismiss();

                } catch (Exception e) {
                    e.printStackTrace();                
                }

            }// end run
        }).start();// end Thread        
    }// end LoadValues

} // Activity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:39:04.293

In android, Only the UI Thread can touch the View.

So

```
progressBarHandler.post(new Runnable() {
     public void run(){
          listView.setAdapter(adapter);                       
     }                        
} 
```

# php - Joomla：将变量传递给 getInput()

> ID：10492212
> 
> 赞同：3
> 
> 时间：2012-05-08T03:36:30.180
> 
> 标签：php, joomla, joomla1.7, joomla1.6, joomla2.5

我正在构建一个后端组件（1.6 / 1.7 / 2.5），我需要将另一个视图中的变量传递到新记录中的字段中。变量传递工作正常。

我的问题是使用 getInput()。

首先，不同的文档页面有不同的参数数量和格式 - 令人困惑！例如：

[http://docs.joomla.org/API16:JForm/getInput](http://docs.joomla.org/API16:JForm/getInput)：`getInput($name, $group= '_default', $formControl= '_default', $groupControl= '_default', $value=null)`

对比

[http://docs.joomla.org/JForm::getInput/1.6](http://docs.joomla.org/JForm::getInput/1.6)：

```
public function getInput (
    $name 
    $group=null 
    $value=null
) 
```

* * *

**问题：**

我只需要将变量作为默认值传递，例如：

`echo $this->form->getInput('id', $value=$this->userID );?>`

上面的代码使输入字段消失。如果我取出`$value=$this->userID`输入字段，但显然没有任何默认值。我也试过：

```
$value=$this->userID;
echo $this->form->getInput('id', $value ); 
```

同样的问题，输入字段消失了。我尝试了其他一些变体，但基本上如果我尝试在 getInput() 中添加任何其他内容，它就不起作用，我也找不到任何关于如何使用这些其他参数的好的工作示例。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T03:49:57.920

根据[来源](http://joomlacode.org/gf/project/joomla/scmsvn/?action=browse&path=/development/tags/1.6.x/1.6.3/libraries/joomla/form/form.php&view=markup)，这是正确的 API：

```
getInput($name, $group = null, $value = null) 
```

只需`getInput()`调用：`getField()`

```
getField($name, $group = null, $value = null) 
```

这意味着您应该这样做以设置默认值：

```
echo $this->form->getInput('id', null, $this->userID ); // Returns the $field->input String 
```

或者：

```
$field = $this->form->getField('id', null, $this->userID ); // Returns the JFormField object 
```

# html - 在 html 中创建代码编辑器样式

> ID：10492213
> 
> 赞同：0
> 
> 时间：2012-05-08T03:36:45.203
> 
> 标签：html, css, markup

我想知道如何在像这样的 html 页面中创建代码编辑器样式。 [http://www.tonymarston.net/php-mysql/databaseobjects.html](http://www.tonymarston.net/php-mysql/databaseobjects.html)

他对不同的变量和字符串有不同的颜色。他曾经`<pre>`和`<span>`风格，但我不确定是否有更快的方法来做到这一点。有什么想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:41:46.127

我自己没有使用过，但是 Stackoverflow 使用[Prettify](http://code.google.com/p/google-code-prettify/)（根据[这个问题](http://code.google.com/p/google-code-prettify/)）。它似乎是仅使用 JavaScript 和 CSS 构建的。

# c++ - C++：奇怪的元函数调用

> ID：10492217
> 
> 赞同：0
> 
> 时间：2012-05-08T03:37:14.863
> 
> 标签：c++, metaprogramming, pow

我的 C++ 代码中有一个奇怪的元函数行为，我想了解原因。

```
#include <iostream>
#include <cmath>

inline double f(double x, double y)
{
    std::cout<<"Marker"<<std::endl;
    return sqrt(x*y);
}

template <int N, class T> inline T metaPow(T x)
{
    return ((N > 0) ? (x*metaPow<((N > 0) ? (N-1) : (0))>(x)) : (1.));
}

int main()
{
    double x;
    double y;
    std::cin>>x;
    std::cin>>y;
    std::cout<<metaPow<5>(f(x, y))<<std::endl;
    return 0;
} 
```

我预计这条线`metaPow<5>(f(x, y))`相当于`f(x, y)*f(x, y)*f(x, y)*f(x, y)*f(x, y)*1.`. 但如果是，它会在函数中打印五次“ `Marker`”行。`f`

奇怪的是，我最后得到了很好的结果（例如`181.019`for`x = 2`和`y = 4`），但我只`Marker`显示了 1 个 " " 。这怎么可能 ？因此，使用该函数而不是标准 pow() 进行编译时优化是一个不错的选择吗？

非常感谢你 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T03:48:56.917

我相信`f(x,y)`在传递给您的 metaPow 函数之前正在对其进行评估。所以 metaPow 的 x 参数就是 sqrt*(8) 的值。metaPow 从不调用 f(x,y)。因此， f(x,y) 仅被调用一次 - 当您最初在主函数中调用 metaPow 时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T03:54:43.447

我认为：

> metaPow<5>(f(x, y))

等于

> 双 z = f(x, y); metaPow<5>(z);

# mysql - 是否有理由指定与真实姓名相同的别名？

> ID：10492219
> 
> 赞同：1
> 
> 时间：2012-05-08T03:37:26.363
> 
> 标签：mysql, alias

为什么有人会费心输入与别名相同的名称？

```
SELECT * FROM node
INNER JOIN users users
  ON node.uid = users.uid
INNER JOIN node node2
  ON node.uid = node2.uid
INNER JOIN mytable mytable
  ON node2.nid = mytable.nid 
```

（编辑以显示一个似乎不需要别名的简单示例）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:43:21.160

我只能认为这是因为一些自动生成的查询或不知道他们在做什么的人。

即使您稍后加入同一个表，这样做也没有任何价值，因为那时您只需要为第二个实例设置别名。

# php - jQuery Accordion Menu. Expand neighbor div as menu expands

> ID：10492225
> 
> 赞同：0
> 
> 时间：2012-05-08T03:38:24.753
> 
> 标签：php, jquery, html

For sake of simplicity, my site has two floated DIV blocks. #Sidebar and #Content. In my sidebar, I have a jQuery Vertical Accordion Menu, which expands. (Duh, it's an Accordion Menu)

Anyhow, when a user clicks on one of the submenu headers, it expands the menu and forces its containing DIV to expand as well.

I'm looking for a way, using jQuery, to expand #Content to the same size as #Sidebar, as #Sidebar is expanding. Is this possible?

I have tried the normal way to make both DIV's the same size, but it does so when the page loads, not dynamically.

Thanks for any help! Rick

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:43:42.707

You can bind to the accordionchange event a function like so:

```
$("#Sidebar").bind('accordionchange', function () {
    $("#Content").height($("#Sidebar").height());
}); 
```

That should set the heights to be equal when the animation completes.

EDIT: You may also bind it in the accordion initializer by setting the `change:` field to your function to run when the accordion has changed

# python - 使用 PIL 调整图像大小会极大地改变颜色

> ID：10492230
> 
> 赞同：10
> 
> 时间：2012-05-08T03:38:44.987
> 
> 标签：python, image-processing, python-imaging-library

我正在使用以下代码使用 PIL 调整图像大小

```
img = Image.open("in.png")
resized = ImageOps.fit(img, (200, 200), method=Image.ANTIALIAS)
resized.save("out.png") 
```

但是输出的图像颜色看起来非常不同。在这里他们是为了比较，大的是原来的：

![在此处输入图像描述](../Images/1f7eda30256a07b64e035f0feebf3a36.png) ![在此处输入图像描述](../Images/337b255e84905dc3e102e5305a0db86c.png)

更奇怪的是，当我在 ubuntu 中使用图像查看器打开它们时，它们看起来是一样的。但不是在 Windows 或 MacOS 中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T03:50:42.220

较大的图像使用 Adob​​e RGB 颜色配置文件。它在较小的图像中被省略，这意味着色彩校正系统将使用一些默认值（可能是 sRGB），它可能具有较小的色域。这将导致颜色显得更暗淡。

**解决方案 1：**使用 sRGB 而不是 Adob​​e RGB 创建原始图像。

**解决方案 2：**将颜色配置文件从较大的图像复制到较小的图像。

大多数 Linux 系统不支持颜色校正，至少在 OS X 或 Windows 支持的范围内不支持。因此，它们在 Ubuntu 的图像查看器中看起来相同的事实实际上是图像查看器程序的限制，它无法理解颜色配置文件。

# ruby-on-rails - Phusion passenger spawner rails app causing high cpu usage

> ID：10492233
> 
> 赞同：2
> 
> 时间：2012-05-08T03:39:04.223
> 
> 标签：ruby-on-rails, passenger, asterisk, phusion

I have Asterisk and Rails app running on the same server. All inbound calls via Asterisk triggers a "curl" to the rails app's controller to initiate a juggernaut publish, enabling real-time push of inbound calls to the individual logged in user (Pop-up dialog showing caller profile details).

The problem is, the Passenger Spawner of the rails app is running at almost 100% CPU usage when ever calls starts coming in. Each inbound phone call will run:

> /usr/bin/curl [http://parlo.local/asterisk/inbound_call?exten=8405&src_num=921187888&recordingfilename=q70001-20](http://parlo.local/asterisk/inbound_call?exten=8405&src_num=921187888&recordingfilename=q70001-20)

In asterisk controller:

```
def inbound_call
  if params[:src_num].length > 6
    extension = AsteriskUserextension.find_by_extension(params[:exten])
    if extension.present? && extension.user.present?
      @user = extension.user
      customer = Customer.first_match(params[:src_num]).first
      customer_name = customer.present? ? customer.full_name : "Unknown Caller"
      queue = AsteriskQueue.find_by_name(params[:queue])
      @result = Asterisk::Action.response_factory("asterisk_inbound","#{queue.try(:title)}","OK",customer.try(:id))
      publish
    end
  end
  render :nothing => true, :status => :created
end 
```

I believe the high inbound call rate is causing the high CPU usage. What is the best way to remedy this situation? Will pushing all the work to RESQUE help?

Thanks for any guidance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:21:16.743

您需要使用 FastCGI 技术。

您还需要在星号中使用 CURL 函数而不是系统应用程序。

对 System 的每次调用都会创建 shell 并创建新的进程。

通过 AMI 而不是 dooign CURL 检查星号事件也是一个好主意。

# c# - 如何在运行时将当前主题更改为 Window7 中的 Window 经典主题

> ID：10492235
> 
> 赞同：1
> 
> 时间：2012-05-08T03:39:09.530
> 
> 标签：c#, asp.net, windows-7

我正在使用 ASP.net 和 C# 。现在，我开发了一个 Web 应用程序。我想在 Window7(IE8) 中将当前主题更改为 windows 经典主题，因为在使用其他主题时我的设计是无序的。我可以在运行时更改主题吗？我可以做这个 *OnPreInit() 事件*吗？请帮我 。

带着敬意，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:47:40.397

您应该修复您的 CSS 而不是更改整个 Windows 主题以使其正常工作...

另外，您不能从 ASP.Net 在客户端上启动进程，但这里是非 Web 应用程序的答案：

参考：[http ://davidrobertmattson.com/wordpress/?p=48](http://davidrobertmattson.com/wordpress/?p=48)

```
//Sets the current theme
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.CreateNoWindow = false;
startInfo.FileName = “rundll32.exe”;
string startuppath = Application.StartupPath.ToString();
string Arguments = “Shell32.dll,Control_RunDLL desk.cpl desk,@Themes /Action:OpenTheme /File:\”C:\\Windows\\Resources\\Themes\\Windows Classic.Theme\”";
startInfo.Arguments = Arguments;
try
{
// Start the process with the info we specified.
// Call WaitForExit and then the using statement will close.
using (Process exeProcess = Process.Start(startInfo))
{
exeProcess.WaitForInputIdle();

IntPtr p = exeProcess.MainWindowHandle;
ShowWindow(p, 1);
SendKeys.SendWait(“{enter}”);
}
}
catch
{
// Log error.
} 
```

# android - Android Http Get String Data From Servlet

> ID：10492238
> 
> 赞同：1
> 
> 时间：2012-05-08T03:39:38.593
> 
> 标签：android, string, google-app-engine, http, servlets

I'm trying to get a simple url string returned from a java servlet in android. I am able to get the url back but there is a null prepended to it.

Here is the code from Android I use to call the servlet:

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet("http://localhost:8888/mcheck_gen_url_fu");
HttpResponse response = client.execute(request);
//Here i try to read the response
BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
while ((line = rd.readLine()) != null) {
    output += line + System.getProperty("line.separator");
}
//I am able to get the response but there is a null pre-pended 
```

Here is the servlet code:

```
public class mcheck_gen_url_fu extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {

        BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
        String output = blobstoreService.createUploadUrl("/mcheck_file_upload");

        resp.setContentType("text/plain");
        resp.getWriter().print(output);
    }
} 
```

Here is what the url looks like:

nullhttp://anyusers-MacBook-Air.local:8888/_ah/upload/ag5tY2hlY2stcGF5bWVudHIbCxIVX19CbG9iVXBsb2FkU2Vzc2lvbl9fGBwM

Is this the right way to do this? I tried Gson but it chokes on the null also.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:44:49.577

```
 output = "";
    while ((line = rd.readLine()) != null) {
        output += line + System.getProperty("line.separator");
    } 
```

By the way, The best practice is

```
final StringBuilder sb = new StringBuilder();
final String sep = System.getProperty("line.separator");
while ((line = rd.readLine()) != null) {
        sb.append(line).append(sep);
}

output = sb.toString(); 
```

# objective-c - 为什么我似乎必须在 iOS 应用程序委托中键入 window.rootViewController？

> ID：10492240
> 
> 赞同：0
> 
> 时间：2012-05-08T03:40:15.310
> 
> 标签：objective-c, ios, cocoa-touch, ios5

在这一点上，我有一个相当简单的 iOS 5 应用程序。

UINavigationController 被设置为 Interface Builder 中的初始视图控制器（我们仍然称它为 Interface Builder 吗？无论如何...）。UINavigationController 有一个通用的 UITabBarController 作为它的 rootViewController。

我想将主 AppDelegate 用于 UINavigationController 和 UITabBarController 委托。我使 AppDelegate 符合 UINavigationControllerDelegate 和 UITabBarControllerDelegate。一切正常。但！

在 AppDelegate 的 application:didFinishLaunchingWithOptions: 中，我觉得我在做一些 hacky 的事情。为了设置每个控制器委托，我必须对 self.window.rootViewController 和 self.window.rootViewController.topViewController 进行类型转换。

```
UINavigationController *rootNavigationController = (UINavigationController *) self.window.rootViewController;
UITabBarController *rootTabBarController = (UITabBarController *) rootNavigationController.topViewController;
[rootNavigationController setDelegate:self];
[rootTabBarController setDelegate:self]; 
```

如果我不输入 self.window.rootViewController 我不能设置它的委托。topViewController (UITabBarController) 也一样。

如果我在 Inferface Builder 中声明初始视图是 UINavigationController，而不是一些通用的 UIViewController，为什么我还必须对所有内容进行类型转换？这是哈克吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T03:52:54.780

调用属性

```
window.rootViewController 
```

返回 的实例`UIViewController`，并且该类没有名为 的公开可见属性`delegate`。`UINavigationController`，但是，确实如此。

当使用属性语法（即点符号）时，编译器需要知道接收者的类声明了哪些属性。

如果您改为使用标准消息表示法并且不强制转换`[rootViewController setDelegate:self]`，那么它可能会`work`，但我相信您仍然会收到编译器警告，但它会“工作”。

但通常最好是明确的。编译器不知道如何正确/安全地将消息发送`-setDelegate:`到`UIViewController`，这就是它抱怨的原因。你需要更明确地处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:23:58.550

请记住，当您打电话时，`self.window.rootViewController`您实际上是在打电话

```
[self.window rootViewController]; 
```

这是一个返回 UIViewController 对象的方法。UIWindow Class 中声明的 rootViewController 属性属于 Class `UIViewController`。

UIWindow 对象不知道它的 rootViewController 属性属于哪个类，因为设置属性实际上是在调用

```
[self.window setRootViewController:(UIViewController *) aViewController]; 
```

类型转换已经发生在这里。运行时还将使用此方法来实现您在 xib 中声明的出口链接。

所以没有办法，只能重新排版。相同的情况`rootNavigationController.topViewController`

# java - 更改设备方向时，在 onCreate() 中更改 EditText 的值无效

> ID：10492243
> 
> 赞同：1
> 
> 时间：2012-05-08T03:40:39.393
> 
> 标签：java, android, mobile, android-activity

我的理解是，当您更改设备方向时，您的应用程序会被销毁并再次创建。这意味着 onCreate() 应该在我每次旋转设备时运行。

我试图在每次创建应用程序时设置一个 EditText，包括每当屏幕旋转时。所以，我启动应用程序，文本字段显示“Bap”。然后我将字段的内容更改为“Boop”，然后旋转屏幕。我希望该字段现在会说“Bap”，但事实并非如此，它在我更改它之后，在方向更改之前保持不变。为什么是这样？

我的 onCreate() 看起来像这样：

```
@Override
public void onCreate(Bundle savedInstanceState)
{    
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    EditText editText = (EditText)findViewById(R.id.edit_message);
    editText.setText("Bap", TextView.BufferType.EDITABLE);
} 
```

值得注意的是，如果我将 setText() 调用移到 onResume() 中，一切都会按我的预期工作，每次旋转设备时都会重置文本字段。

注意：我意识到[已经提出了类似的问题](https://stackoverflow.com/questions/6745810/wrong-value-in-edittext-when-changing-screen-orientation)，但给出的答案并不能真正解释为什么会发生这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T03:59:44.223

它正在发生，因为 Android 框架正在做它应该做的事情。它正在保存一个包含有关应用程序当前状态的所有信息的包 (SavedInstanceState)，以便在方向更改后重新创建您的视图时使用。

您是否在发布的 onCreate 中留下了一些代码？也许是这样的：

```
if (savedInstanceState == null) 
```

如果您的 onCreate 代码包含在这样的 if 中，这就是您看不到预期结果的原因。

具有如下所示的 onCreate 是标准做法：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    if (savedInstanceState == null) {
                // Your first time start-up code here, will not run on orientation change   
    }
            // Any code you want to run EVERY time onCreate runs goes here
} 
```

这样做是为了避免在方向更改时不必要地重新创建所有内容。

希望这可以帮助！

**编辑**

进一步研究它，看起来正在发生的事情是这样的（从[这里](http://eagle.phys.utk.edu/guidry/android/lifecycleMethods.html)收集）：

*设备方向改变*

```
onSaveInstanceState(Bundle outState)
onPause()
onStop()
onDestroy()
onCreate()
onStart()
onRestoreInstanceState(Bundle inState)
onResume() 
```

基本上是说捆绑包正在传递给`onRestoreInstanceState`，它发生在 之后`onCreate`，这将解释您的情况发生了什么。

因此，解决方案是将 EditText 值的设置移动到您的`onResume`方法（或覆盖`onRestoreInstanceState`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:46:29.277

我决定深入研究`savedInstanceState`传递给`onCreate`方法的那个，我发现了这个：

键：`android:viewHierarchyState`
值：`Bundle`

该捆绑包具有以下键值对：

键：`android:views`
值：`SparseArray`

那`SparseArray`有这个价值：`TextView.SavedState{41857898 start=4 end=4 text=Boop}`

那么发生的事情是Android正在自动恢复一些`View`s的状态，大概是在`onRestoreInstanceState`方法中。

为了防止这种行为，在 XML 中，将此行添加到您的`EditText`:

```
android:saveEnabled="false" 
```

要以编程方式执行此操作，请调用`view.setSaveEnabled(false)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T03:49:13.473

是的。重新创建活动时，无法在 onCreate 中设置 edittext 的任何值。你应该改变 onResume()。

# ios - 如何使内容在 UIView 之外不可见

> ID：10492248
> 
> 赞同：4
> 
> 时间：2012-05-08T03:41:07.360
> 
> 标签：ios, uiimageview, uiimage, contentmode

我有一个`UIImageView`with `UIViewContentModeCenter`，所以它保存的图像不会被缩放或变形。但是这样如果图片比较大，就可以在ImageView的框架之外看到。我不想裁剪图像（用户可以缩放它，所以数据丢失不是一个选项），但我需要使它的一部分`ImageView`不可见或其他东西

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T05:18:05.970

您需要将 UIImageView 的 clipsToBounds 属性设置为 YES。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T10:31:11.480

我的解决方案是将 UIImageView 放在 UIScrollView 中，然后在 scrollView 中管理大小和位置。

# iphone - Getting error when trying to save index path in NSUserDefaults

> ID：10492250
> 
> 赞同：1
> 
> 时间：2012-05-08T03:41:44.170
> 
> 标签：iphone, objective-c, ios, nsuserdefaults, nsindexpath

I am trying to save `indexPath` for the row that is being deleted from `UITableView` into `NSUSerDefaults`.

But I am getting following exception:

```
Attempt to insert non-property value '<NSIndexPath 0x834cc00> 2 indexes [0,1] 
```

How can I resolve this and save data into user defaults for accessing it in other methods?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T03:49:15.800

您可以将其保存为两个浮点值并稍后重新创建 NSIndexPath：

所以保存`indexPath.row`并`indexPath.column`单独然后重新创建它：

```
 [NSIndexPath indexPathForRow:inSection:] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T04:13:16.517

将类别添加到`NSIndexPath`. 这增加了两种方法，允许转换到/从`NSArray`. 然后，您可以将其保存为默认值。

```
@implementation NSIndexPath ( ArrayRepresentation )

-(NSArray*)arrayRepresentation
{
    NSMutableArray * result = [ NSMutableArray arrayWithCapacity:self.length ] ;
    for( int index=0, count = self.length; index < count; ++index )
    {
        [ result addObject:[ NSNumber numberWithUnsignedInteger:[ self indexAtPosition:index ] ] ] ;
    }

    return result ;
}

+(NSIndexPath*)indexPathWithArrayRepresentation:(NSArray*)array
{
    if ( array.count == 0 ) { return nil ; }

    // if array has too many items this will crash your app be careful
    NSUInteger indexes[ array.count ] ;
    for( int index=0, count = array.count; index < count; ++index )
    {
        indexes[ index ] = [ [ array objectAtIndex:index ] unsignedIntegerValue ] ;
    }

    return [ NSIndexPath indexPathWithIndexes:indexes length:array.count ] ;
}

@end 
```

我没有测试这个，可能需要调试......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:35:03.637

您只能将数组、字符串、数字保存到 NSUserDefaults，但不能保存 NSI​​ndexPath，因此您应该创建一个将 NSIndexPath 转换为数组的方法，然后将其保存到 NSUserDefaults。

# c - Warning/Error using xmlReadFile in C

> ID：10492253
> 
> 赞同：0
> 
> 时间：2012-05-08T03:42:22.563
> 
> 标签：c, xml, parsing, xml-parsing, libxml2

```
<element1 type="type1" name="value1">
  <start play="no"/>
  <element2 aaa="AAA"/>
  <element2 bbb="BBB"/>
  <element3 ccc="CCC">
     <element4/><!-- play="no"/>-->
  </element3>
</element1> 
```

And I use following code to parse it:

```
int parse( const char *xml) {

    printf("Entered\n");
    xmlDoc  *doc = NULL;
    doc = xmlReadFile(xml, NULL, 0);

    if (doc == NULL)
        printf("Could not parse file\n");
    else {
        printf("Success\n");
        xmlFreeDoc(doc);
    }

    xmlCleanupParser();
    return 0;
} 
```

But I get following error:

```
Entered
I/O warning : failed to load external entity "<element1 type="type1" name="value1">
  <start play="no"/>
  <element2 aaa="AAA"/>
  <element2 bbb="BBB"/>
  <element3 ccc="CCC">
     <element4/><!-- play="no"/>-->
  </element3>
</element1>

"
Could not parse file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:37:30.967

我相信第一个论点

```
xmlReadFile(xml, NULL, 0); 
```

是文件的*名称*，而不是 XML 字符串本身。错误消息表明您将实际的 XML 传递给该方法。我相信有一种`xmlReadMemory()`方法可以满足您的需求。

# jquery - jquery - multi-select dropdown and single select dropdown on same page?

> ID：10492254
> 
> 赞同：0
> 
> 时间：2012-05-08T03:43:07.633
> 
> 标签：jquery, asp.net, multi-select

I'm using the jQuery dropdown that was developed by Eric Hynds. [Eric Hynds Multi-select](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

I want to have a multi-select dropdown and a single select dropdown on the page. I thought I could reference it this way:

```
 $(function () {

  $("select").multiselect({
    selectedList: 4
  });

  $("#ddlYear").multiselect({
    multiple: false,
    selectedList: 1
  });
});

 <div class="multiselectlist">
     <select id="msStatus" multiple="true" runat="server"/>
 </div>

 <div><select id="ddlYear" multiple="false" runat="server"/></div> 
```

I populate the dropdowns from code-behind getting data from the database. Even though I set the single select (ddlYear) to not be multiple it still shows up as a multi-select dropdown.

Is there a way for the two type of dropdowns to exist on the same page? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:55:31.157

尝试这个，

```
$("#msStatus").multiselect({
    selectedList: 4
  });

  $("#ddlYear").multiselect({
    multiple: false,
    selectedList: 1
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:29:57.043

您可以坚持使用该插件，也可以使用这两个插件中的任何一个

[jQuery 插件 1](http://www.jquery4u.com/drag-and-drop/18-jquery-drag-drop-plugins/)

[jQuery插件2](http://www.jquery4u.com/drag-and-drop/10-jquery-drag-drops/)

您的脚本似乎有错误

# php - 如何不断更新页面的一部分

> ID：10492256
> 
> 赞同：9
> 
> 时间：2012-05-08T03:43:27.343
> 
> 标签：php, javascript, jquery, forms

[http://pastebin.com/dttyN3L6](http://pastebin.com/dttyN3L6)

处理表单的文件称为upload.php

我从来没有真正使用过 jquery/js，所以我不确定我将如何执行此操作或将代码放在哪里。

它与此有关`setInterval (loadLog, 2500);`

另外，我怎样才能使用户可以在不刷新页面的情况下提交表单？

```
 $.ajax({  
  type: "POST",  
  url: "upload.php",  
  data: dataString,  
  success: function() {  

  }  
});  
return false;  ` 
```

和

```
 <?php 
 $conn1 = mysqli_connect('xxx') or die('Error connecting to MySQL server.');
 $sql = "SELECT * from text ORDER BY id DESC LIMIT 1";
 $result = mysqli_query($conn1, $sql) or die('Error querying database.');
 while ($row = mysqli_fetch_array($result)) {
      echo  '<p>' . $row['words'] . '</p>';
 }
 mysqli_close($conn1);

 ?>

 </div>

 <?php     
 if (!isset($_SESSION["user_id"])) {

 } else {
      require_once('form.php'); 
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T02:19:10.130

您可以在不刷新页面的情况下提交表单，如下所示：

**表格.php：**

```
<form action='profile.php' method='post' class='ajaxform'>
 <input type='text' name='txt' value='Test Text'>
 <input type='submit' value='submit'>
</form>

<div id='result'>Result comes here..</div> 
```

**配置文件.php：**

```
<?php
      // All form data is in $_POST

      // Now perform actions on form data here and 
      // create an result array something like this
      $arr = array( 'result' => 'This is my result' );
      echo json_encode( $arr );
?> 
```

**jQuery：**

```
jQuery(document).ready(function(){

    jQuery('.ajaxform').submit( function() {

        $.ajax({
            url     : $(this).attr('action'),
            type    : $(this).attr('method'),
            dataType: 'json',
            data    : $(this).serialize(),
            success : function( data ) {
                        // loop to set the result(value)
                        // in required div(key)
                        for(var id in data) {
                            jQuery('#' + id).html( data[id] );
                        }
                      }
        });

        return false;
    });

}); 
```

**如果您想在特定时间后调用 ajax 请求而不刷新页面，您可以尝试以下操作：**

```
var timer, delay = 300000;

timer = setInterval(function(){
    $.ajax({
      type    : 'POST',
      url     : 'profile.php',
      dataType: 'json',
      data    : $('.ajaxform').serialize(),
      success : function(data){
                  for(var id in data) {
                    jQuery('#' + id).html( data[id] );
                  }
                }
    });
}, delay); 
```

您可以像这样随时停止计时器：

```
clearInterval( timer ); 
```

希望这会给你一个方向来完成你的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:17:48.210

这很简单。要使用 Jquery 访问元素，请使用 css 选择器，例如，要获取名称为“foo”的输入字段的值，请执行以下操作：

```
var fooVal = $("input[name=foo]").val(); 
```

要将其发送到服务器，您需要将事件侦听器（例如，单击）附加到提交按钮/任何其他元素

```
var data = { varName : fooVal };
var url = "http://example.com";
var responseDataType = "json";
function parseResponse(JSON)
{
   // your code handling server response here, it's called asynchronously, so you might want to add some indicator for the user, that your request is being processed
}

$("input[type=submit]").on('click', function(e){
  e.preventDefault();
    $(this).val("query processing");
    $.post(url,data, parseResponse, responseDataType);
 return false;
}); 
```

如果你想做持续更新，当然可以添加计时器或其他一些逻辑。但我希望您了解如何处理此类案件；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T04:50:10.377

要回答您的部分问题，您可以使用 ajax。

```
<html><head></head><body>
<div id="feed"></div>
<script type="text/javascript">
var refreshtime=10;
function tc()
{
asyncAjax("GET","upload.php",Math.random(),display,{});
setTimeout(tc,refreshtime);
}
function display(xhr,cdat)
{
 if(xhr.readyState==4 && xhr.status==200)
 {
   document.getElementById("feed").innerHTML=xhr.responseText;
 }
}
function asyncAjax(method,url,qs,callback,callbackData)
{
    var xmlhttp=new XMLHttpRequest();
    //xmlhttp.cdat=callbackData;
    if(method=="GET")
    {
        url+="?"+qs;
    }
    var cb=callback;
    callback=function()
    {
        var xhr=xmlhttp;
        //xhr.cdat=callbackData;
        var cdat2=callbackData;
        cb(xhr,cdat2);
        return;
    }
    xmlhttp.open(method,url,true);
    xmlhttp.onreadystatechange=callback;
    if(method=="POST"){
            xmlhttp.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
            xmlhttp.send(qs);
    }
    else
    {
            xmlhttp.send(null);
    }
}
tc();
</script>
</body></html> 
```

# iphone - UIImagepicker not displaying in IPad Storyboard

> ID：10492258
> 
> 赞同：0
> 
> 时间：2012-05-08T03:43:43.517
> 
> 标签：iphone, ios, xcode, ipad

Having problem with my application, I seem to be new in ios. My project contains a **rootViewAppDelegate**,**rootViewController**,and **cameraViewController**.

My **rootViewcontroller** has a Menu type code implemented in it that when a button is pressed it goes to **cameraViewController**.My **cameraViewController** contains a **UIImagepicker**.

In following a tutorial in the net about **UIImagePicker** in IPAD, it says there that I should paste some part of the code in the delegate. So I pasted it in the **rootViewAppDelegate**. When I run the project. Nothing is displaying in the **cameraViewController**. Did I miss something wrong? Thanks for reply.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:07:17.113

没有所有细节，我认为正在发生的事情如下：

*   rootViewAppDelegate 不是您的 UIImagepicker 的代表 - 您可能不想将其设置为一个，因为它是“应用程序的”代表
*   所以你看到发生的是你的 UIImagePicker 没有对象来触发委托

可能需要做的是使用您的 cameraViewController 作为 UIImagePicker 委托 - 为此，您需要进入您的：cameraViewController 并将其设置为 UIImagePickerDelegate 协议的追随者：

```
@interface cameraViewController : UIViewController <UIImagePickerControllerDelegate> 
```

然后在您的 UIImagePicker 中，您需要将委托设置为 cameraViewController - 如果您有 UIImagePicker 的源文件，您可以在代码中执行此操作，方法如下：

```
[self setDelegate:myCameraViewController]; 
```

或者在 InterfaceBuilder/Storyboard 中，您需要将 UIImagePicker 的委托属性连接到 cameraViewController。

这将知道 cameraViewController 是 UIPicker 的委托并适当地触发它。

# apache-flex - Adobe Flex ItemRenderer：进行计算

> ID：10492259
> 
> 赞同：0
> 
> 时间：2012-05-08T03:43:45.200
> 
> 标签：apache-flex, date, adobe, itemrenderer

我有一个包含用户出生日期的数据库，但我想显示他们的年龄。我有一个计算年龄的函数，但我不能在 ItemRenderer 中使用它，我不知道为什么。如果我在 ItemRenderer 之外使用此代码，我认为它不会起作用。DOB 由 访问`{data.dob}`。

这是我的代码：

```
<s:GridColumn dataField="age" headerText="Age" width="80">
                    <s:itemRenderer>
                        <fx:Component>
                            <s:GridItemRenderer>
                                <fx:Script>
                                    <![CDATA[
                                        // Retrieving the user's DOB
                                        var dateStr:String = "{data.dob}";
                                        //Splitting the DOB up to make it compatible with Flex
                                        var parts:Array = dateStr.split("-");

                                        if(parts == null || parts.length != 3)
                                        {
                                            Alert.show("There is an error retrieving the birthday.");
                                        }

                                        var dobDay:* = parts[2];
                                        var dobMonth:* = parts[1] - 1;
                                        var dobYear:* = parts[0];

                                        var userDOB : Date = new Date(dobYear, dobMonth, dobDay);
                                        var today : Date = new Date();

                                        var diff : Date = new Date();
                                        diff.setTime( today.getTime() - userDOB.getTime() );

                                        var userAge : int = diff.getFullYear() - 1970;
                                    ]]>
                                </fx:Script>
                                <s:Label id="ageLbl" text="userAge" />
                            </s:GridItemRenderer>
                        </fx:Component>
                    </s:itemRenderer>
                </s:GridColumn>` 
```

起初我收到 #1084 错误，`var dateStr:String = {data.dob};`因此我将其更改为`var dateStr:String = "{data.dob}";`并将错误迁移到`1120: Access of Undefined property Alert`. 我也有同样的错误：`diff, parts, today, userAge, userDOB`。这里有什么想法吗？就像我说的那样，代码在 ItemRenderer 之外时工作，只使用一个 DOB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:43:45.510

您正在使用内联项目渲染器。以与外部文件中的项目渲染器相同的方式来考虑内联渲染器。您需要重新导入 mx.controls.Alert 才能使用它。此外，如果您想从 itemRenderer 内部调用主应用程序变量，则需要在主应用程序中将它们设为公共变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:58:00.373

试试这个：

```
<s:DataGrid x="71" y="58" width="490" height="264" requestedRowCount="4">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="dataField1" headerText="Column 1"></s:GridColumn>
            <s:GridColumn dataField="dataField2" headerText="Column 2"></s:GridColumn>
            <s:GridColumn dataField="dob" headerText="Age" width="80">
                <s:itemRenderer>
                    <fx:Component>
                        <s:GridItemRenderer>
                            <fx:Script>
                                <![CDATA[
                                    import mx.controls.Alert;

                                    override public function prepare(hasBeenRecycled:Boolean):void {

                                        if(data!=null)
                                        {
                                            trace(data.dob);

                                            // Retrieving the user's DOB
                                            var dateStr:String = data.dob;
                                            //Splitting the DOB up to make it compatible with Flex
                                            var parts:Array = dateStr.split("-") ;

                                            if(parts == null || parts.length != 3)
                                            {
                                                Alert.show("There is an error retrieving the birthday.");
                                            }

                                            var dobDay:* = parts[2];
                                            var dobMonth:* = parts[1] - 1;
                                            var dobYear:* = parts[0];

                                            var userDOB : Date = new Date(dobYear, dobMonth, dobDay);
                                            var today : Date = new Date();

                                            var diff : Date = new Date();
                                            diff.setTime( today.getTime() - userDOB.getTime() );

                                            var userAge : int = diff.getFullYear() - 1970;

                                            ageLbl.text = userAge.toString(); 
                                        }
                                    }

                                ]]>
                            </fx:Script>
                            <s:Label id="ageLbl" text="userAge"  top="7" left="9"/>
                        </s:GridItemRenderer>
                    </fx:Component>
                </s:itemRenderer>
            </s:GridColumn>

        </s:ArrayList>
    </s:columns>
    <s:ArrayList>
        <fx:Object dataField1="data1" dataField2="data1" dob="1990-05-25"></fx:Object>
        <fx:Object dataField1="data2" dataField2="data2" dob="1981-02-15"></fx:Object>
        <fx:Object dataField1="data3" dataField2="data3" dob="1956-05-7"></fx:Object>
        <fx:Object dataField1="data4" dataField2="data4" dob="1994-08-25"></fx:Object>
    </s:ArrayList>
</s:DataGrid> 
```

# android - 如何使用 WebView 播放 swf 文件并从我的资产目录访问该文件？

> ID：10492261
> 
> 赞同：0
> 
> 时间：2012-05-08T03:44:00.070
> 
> 标签：android, webview, flash

我是android和flash开发的新手。我正在为我的吉他应用程序创建一个节拍器，方法是使用 flash 来实现节拍器部分。我已经有一个吉他的工作项目和一个为节拍器动画创建的单独的 Flash 文件。

我在这个网站上做了很多研究，似乎找不到任何有效的东西，我的代码如下。我只是犯了一个菜鸟错误，还是我可以尝试一些更大的东西，这对我来说会更好。

我的目标是让活动访问 Metronome.swf 文件并像 flash 生成的 .apk 一样播放它。

这是我的节拍器.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
   />
</LinearLayout> 
```

这是我的 MetronomeActivity.java 文件：

```
package itcs4155.group4.guitarTeacher;

import android.os.Bundle;
import android.webkit.WebView;

public class MetronomeActivity extends BaseActivity {
   private WebView mWebView;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.metronome);

        mWebView = (WebView)findViewById(R.id.webview);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setPluginsEnabled(true);

        String html = "<object width=\"768\" height=\"1024\"> <param name=\"movie\" value=\"file:///android_asset/Metronome.swf\"> <embed src=\"file:///android_asset/Metronome.swf\" width=\"768\" height=\"1024\"> </embed> </object>";
        String mimeType = "text/html";
        String encoding = "utf-8";
        mWebView.loadDataWithBaseURL("null", html, mimeType, encoding, "");
    }
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:33:17.613

有时可能会发生未显示在 Web 视图上加载 swf 文件的情况。

***尝试在清单文件***中添加 android:android:hardwareAccelerated="true" 。

```
<application android:hardwareAccelerated="true">
        <activity ... />
        <activity android:hardwareAccelerated="true" />
    </application> 
```

它可能会帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T23:31:11.910

就像上面提到的 Akshay，

```
<activity android:hardwareAccelerated="true" /> 
```

需要添加，但是我遇到了一个问题，即 swf 无法完全加载或加载初始 swf。我的解决方案是指出

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mWebView = (WebView) findViewById(R.id.web_engine);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY); 
    mWebView.setBackgroundColor(Color.parseColor("#000000"));
    mWebView.loadUrl("file:///android_asset/swfFile.html");

} 
```

请记住，要使用 setPluginsEnabled，您需要将 API 版本降级到 10 或 11。

您的 html 文件通常是在发布 swf 文件时生成的，或者您可以添加：

```
<div id="flashContent">
        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100%" height="100%" id=**"Something**" align="middle">
            <param name="movie" value="**Something.swf**" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#000000" />
            <param name="play" value="true" />
            <param name="loop" value="true" />
            <param name="wmode" value="direct" />
            <param name="scale" value="showall" />
            <param name="menu" value="true" />
            <param name="devicefont" value="false" />
            <param name="salign" value="" />
            <param name="allowScriptAccess" value="sameDomain" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="**Something.swf**" width="100%" height="100%">
                <param name="movie" value="**Something.swf**" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#000000" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="direct" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
            <!--<![endif]-->
                <a href="http://www.adobe.com/go/getflash">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Obtener Adobe Flash Player" />
                </a>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object>
    </div> 
```

# ajax - 将本地存储变量传递给 AJAX URL？

> ID：10492264
> 
> 赞同：1
> 
> 时间：2012-05-08T03:44:09.130
> 
> 标签：ajax, url, local-storage

如何将本地存储变量传递到 AJAX url：我的问题是变量“url”不会传递到我放置的 url 部分 + url +

任何帮助将不胜感激。谢谢约翰

```
<script id="source" language="javascript" type="text/javascript">

  $(function () 
  {
   $.ajax({

      var url = localStorage.getItem('iphoneusername');
      url: 'http://' + url + '.com/iphone/adddisplayapi.php',                            
      data: "",                                                        
      dataType: 'json',                      
      success: function(data)          
      {
    var id = data[0];             
        var name = data[1];          
    var pic1 = data[2];           

    document.write(name); 
    document.write("<br/>");    
    document.write(id);
    document.write("<br/>");    

    } 
    });
  }); 

  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:54:48.077

尝试：

```
$(function () {
 var urlParam = localStorage.getItem('iphoneusername');
   $.ajax({     
      url: 'http://' + urlParam + '.com/iphone/adddisplayapi.php',                            
      data: "",                                                        
      dataType: 'json',                      
      success: function(data) {
       ....rest of your code 
```

希望能帮助到你

# php - 使用 JSON 创建一个 mustache.js html 模板

> ID：10492273
> 
> 赞同：0
> 
> 时间：2012-05-08T03:46:30.503
> 
> 标签：php, ajax, json, mustache

我刚刚了解了 mustache.js，我正在尝试创建一个 HTML 模板。但是，文档有点难以破译。我找到了一个很好的网站来解释部分（我相信我会需要）。我希望有人能够“让我开始”我需要如何做到这一点。

我有一个需要转换为模板的 php 文件：

PHP：

```
<div id='board'>
<?php
if ($threads)
    {
        $count = count($threads);
        $perpage = 17;
        $startlist = 3;
        $numpages = ceil($count / $perpage);
        if ($page == 'home') {$page = 1;}
        $threadstart = ($page * $perpage) - $perpage;
        $i = 0;
        echo "<table class='board'>
    <tr>
            <th width='5%'><img src='".base_url()."img/board/icons/category_icon.png' alt='category_icon'/></th>
            <th width='5%'>Tag</th>
            <th width='50%'>Subject</th>
            <th width='7.5%'>Author</th>
            <th width='7.5%'>Replies/Views</th> 
            <th width='15%'>Last Post</th>
    </tr>";
        foreach ($threads as $list) 
        {   $i++;
            $thread_owner = $this->thread_model->get_owner($list['owner_id']);
            $thread_id = $list['thread_id'];
            $query = $this->db->query("SELECT f.tag FROM filter_thread AS ft
                                        INNER JOIN filter AS f ON ft.filter_id = f.filter_id
                                        WHERE thread_id = $thread_id");
            $result = $query->result_array();
            $trunc_body = $this->thread_model->get_reply_summary($thread_id);
            $filter = "";
            $filter2 ="";
            $ent = "entertainment";
            foreach ($result as $string)
            {
                if ($string['tag'] == $ent) {
                    $filter2 .= "<div id='entertainment'><p>";
                    $filter2 .= "<img src='".base_url()."img/board/icons/entertainment_icon.png' title='Entertainment' alt='Entertainment'/>";
                    $filter2 .= "</p></div>";
                } else {
                $filter2 .= "<div id='misc'><p>";
                $filter2 .= "<img src='".base_url()."img/board/icons/misc_icon.png' title='Misc' alt='Misc'/>";
                $filter2 .= "</p></div>";
                $filter .= " [".$string['tag']."]";
                }
            }
            if (!$result) { $filter = "" AND $filter2 =""; }
            if ($i > $threadstart AND $i <= $threadstart + $perpage) 
            { 
                echo "<tr>";
                echo "<td>".$filter2."</td>";
                echo "<td>".$filter."</td>";
                echo "<td title='".$trunc_body['0']['body']."'><a href=".base_url()."main/thread/".$list['slug'].">".ucfirst($list['subject'])."<div id='filter'><p></p></div></a></td>"; 
                echo "<td><p>".$thread_owner."</p></td>";
                echo "<td align='right'>Replies: ".$list['replies_num']."<br>Views: ".$list['views']."</td>";
                $owner = $this->thread_model->get_owner($list['last_post_id']);
                echo "<td>".$owner." <br>".$list['replystamp'] ."</td></tr>";   
            }  
        }
        echo "</table>";
        echo "<br>";
        echo "Current Page: $page | ";    
        echo "Page: ";

        for ($n = 1; $n < $numpages+1; $n++) 
        {
            echo "<a href=".base_url()."main/home/$n>$n</a> | ";
        }
    }
?>
</div> 
```

这里是 AJAX

```
$(function() {
    $('#all').addClass('ui-selected') 
    $( "#selectable" ).selectable({
        selected: updatefilters

    });   
    function updatefilters(ev, ui){
        // get the selected filters
        var template, html;
        var $selected = $('#selectable').children('.ui-selected');
        // create a string that has each filter separated by a pipe ("|")
        var filters = $selected.map(function(){return this.id;}).get().join("\|");
        $.ajax({
            type: "POST",
            url: 'updatefilters',
            dataType: 'json', 
            data: { filters: filters },
            success: function(data){
                var template = "<div id ='board'>TESTING{{#body}}<table>";
                var partials = "{{#subject}}";
                //for (i=0 ; i< data.length ; i++)
                //{html += "<tr><td>" + data[i].subject + "</td><td>" + data[i].body + "</td></tr>";}
                //html += "</table></div>";
                var html = Moustache.to.html(template, data, partials);
                $('#board').html(html); 
            }
        });
    }
}); 
```

我不确定如何用小胡子浏览 JSON 数组。事实上，它不会更新页面，尽管注释掉的部分确实如此。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:25:09.573

首先，如果您收到一个 json 字符串，您需要解析它（使用`$.parseJSON(data)`）

解析完数据后，您需要遍历 JSON 属性。

例如：

如果 JSON 具有以下内容： body: {content: [dataObj:{data:'a'}, dataObj[data:'b']]}

做

```
<div>{{#body}}<div>
<div>{{#content}}<div>
<div>{{#dataObj}}<div>
<span>{{data}}<span> 
```

如果您使用部分，则需要在主模板中调用它们。

检查 mustache5 文档，它已经改进了很多。

# c - 如何将 32 位图像上传到服务器端像素图

> ID：10492275
> 
> 赞同：16
> 
> 时间：2012-05-08T03:46:41.397
> 
> 标签：c, x11, xlib

我正在尝试从客户端缓冲区创建服务器端 RGBA 像素图。CreatePixmap 和 CreateImage 在 32 位和 24 位下工作正常，但 XPutImage 导致服务器返回匹配错误

```
X Error of failed request:  BadMatch (invalid parameter attributes)
  Major opcode of failed request:  72 (X_PutImage)
  Serial number of failed request:  8
  Current serial number in output stream:  8 
```

服务器确实支持 32 位像素图（xdpyinfo 输出：[https](https://gist.github.com/2582961) ://gist.github.com/2582961 ）。在 ubuntu 12.04（X.Org 版本：1.11.3）和带有 X.app（X.Org 版本：1.10.3）的 OSX 上的行为相同

为什么以下代码失败？

```
#include     <stdlib.h>
#include     <X11/Xlib.h>

int main(int argc, char **argv)
{
    int width = 100;
    int height = 100;
    int depth = 32; // works fine with depth = 24
    int bitmap_pad = 32; // 32 for 24 and 32 bpp, 16, for 15&16
    int bytes_per_line = 0; // number of bytes in the client image between the start of one scanline and the start of the next
    Display *display=XOpenDisplay(0);
    unsigned char *image32=(unsigned char *)malloc(width*height*4);
    XImage *img = XCreateImage(display, CopyFromParent, depth, ZPixmap, 0, image32, width, height, bitmap_pad, bytes_per_line);
    Pixmap p = XCreatePixmap(display, XDefaultRootWindow(display), width, height, depth);
    XPutImage(display, p, DefaultGC(display, 0), img, 0, 0, 0, 0, width, height); // 0, 0, 0, 0 are src x,y and dst x,y
    XEvent ev;
    while (1) {
       XNextEvent(display, &ev);
    }
} 
```

**更新：**看起来我终于得到了答案：使用与 pixmap 关联的 GC 而不是 DefaultGC（它具有根窗口的深度）

```
#include     <stdlib.h>
#include     <X11/Xlib.h>

int main(int argc, char **argv)
{
    int width = 100;
    int height = 100;
    int depth = 32; // works fine with depth = 24
    int bitmap_pad = 32; // 32 for 24 and 32 bpp, 16, for 15&16
    int bytes_per_line = 0; // number of bytes in the client image between the start of one scanline and the start of the next
    Display *display=XOpenDisplay(0);
    unsigned char *image32=(unsigned char *)malloc(width*height*4);
    XImage *img = XCreateImage(display, CopyFromParent, depth, ZPixmap, 0, image32, width, height, bitmap_pad, bytes_per_line);
    Pixmap p = XCreatePixmap(display, XDefaultRootWindow(display), width, height, depth);
    XGCValues gcvalues;
    GC gc = XCreateGC(display, p, 0, &gcvalues);
    XPutImage(display, p, gc, img, 0, 0, 0, 0, width, height); // 0, 0, 0, 0 are src x,y and dst x,y
    XEvent ev;
    while (1) {
       XNextEvent(display, &ev);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T12:53:49.343

问题在于`DefaultGC()`返回具有系统默认屏幕位深度的 GC。如果您查看要点粘贴的第 53 行，您会看到这是 24：

> 根窗深度：24个平面

在第 63 行，您会看到它使用 0x22 作为默认值，第 64 到 70 行更详细地显示了这一点：

```
 visual:
    visual id: 0x22
    class: TrueColor
    depth: 24 planes
    available colormap entries: 256 per subfield
    red, green, blue masks: 0xff0000, 0xff00, 0xff
    significant bits in color specification: 8 bits 
```

你可能会做得更好一点，但首先你可以试试这个：

注意：这使用系统视觉效果，所以很可能只支持 24 或 32 的深度。

```
#include <stdio.h>
#include <stdlib.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>

#ifdef DEBUG
int dbg = 1;
#else
int dbg = 0;
#endif

/* Return a GC based on depth */
int gc_depth(int depth, Display *dpy, Window scr, Window root, GC *gc)
{
        Window win;
        Visual *visual;
        XVisualInfo vis_info;
        XSetWindowAttributes win_attr;
        unsigned long win_mask;

        if(!XMatchVisualInfo(dpy, scr, depth, TrueColor, &vis_info)) {
                fprintf(stderr,
                        " * ERR: %d depth not supported\n",
                        depth
                );
                return 1;
        }

        visual = vis_info.visual;

        win_attr.colormap = XCreateColormap(dpy, root, visual, AllocNone);
        win_attr.background_pixel = 0;
        win_attr.border_pixel = 0;

        win_mask = CWBackPixel | CWColormap | CWBorderPixel;

        win = XCreateWindow(
                        dpy, root,
                        0, 0,
                        100, 100,        /* dummy size */
                        0, depth,
                        InputOutput, visual,
                        win_mask, &win_attr);
        /* To flush out any errors */
        if (dbg) XSync(dpy, True);

        *gc = XCreateGC(dpy, win, 0, 0);
        if (dbg) XSync(dpy, True);

        XDestroyWindow(dpy, win);
        if (dbg) XSync(dpy, True);

        return 0;
}

int main(void)
{
        int w = 100;
        int h = 100;
        int depth = 32;
        int bitmap_pad = 32;
        int bpl = 0;

        Display *dpy;
        Window root;
        Window scr;
        GC gc;
        int root_depth;

        Pixmap pm;
        XImage *img;
        unsigned char *buf_img;

        if(!(dpy = XOpenDisplay(NULL))) {
                fprintf(stderr,
                        " * ERR: Failed to open display.\n");
                return 1;
        }

#ifdef DEBUG
        /* To get errors in order, slows down
         * One can also define int _Xdebug = 1;
         * */
        XSynchronize(dpy, True);
#endif

        root = XDefaultRootWindow(dpy);
        scr  = XDefaultScreen(dpy);

        if ((buf_img = malloc(w * h * 4)) == NULL) {
                fprintf(stderr,
                        " * ERR: Unable to alloacte %d bytes\n",
                        w * h * 4);
                return 1;
        }

        root_depth = DefaultDepth(dpy, scr);

        fprintf(stderr,
                "Default depth: %d\n",
                root_depth);

        /* This should be doen more nice */
        if (depth != root_depth) {
               if (gc_depth(depth, dpy, scr, root, &gc) != 0)
                        return 1;
        } else {
                gc = DefaultGC(dpy, 0);
        }

        img = XCreateImage(
                        dpy, CopyFromParent,
                        depth, ZPixmap,
                        0, (char *)buf_img,
                        w, h,
                        bitmap_pad, bpl);
        /* To flush out any errors */
        if (dbg) XSync(dpy, True);

        pm = XCreatePixmap(
                        dpy, root,
                        w, h,
                        depth);
        if (dbg) XSync(dpy, True);

        XPutImage(
                dpy, pm,
                gc, img,
                0, 0,
                0, 0,
                w, h);
        if (dbg) XSync(dpy, True);

        XFreePixmap(dpy, pm);
        XDestroyImage(img);
        XFreeGC(dpy, gc);
        if (dbg) XSync(dpy, True);

        fprintf(stderr,
                "OK!\n");

        return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T14:14:22.560

好吧，如果您只是创建一个 GC 并传递一个 32 位的可绘制参数，那么您的代码适用于 32 位图像。XCreateGC(dpy, drawable, 0, 0)，其中drawable可以是32位深度的像素图。它非常适合我。

# python - 将两个 numpy 数组相乘时出错

> ID：10492283
> 
> 赞同：3
> 
> 时间：2012-05-08T03:47:36.123
> 
> 标签：python, numpy

我收到一个错误，我对以下脚本不太了解。我以为我可以快乐地将两个 numpy 数组倍增，但我不断收到此错误：

```
TypeError: unsupported operand type(s) for *: 'numpy.ndarray' and 'numpy.ndarray' 
```

脚本如下：

```
def currents_to_resistance(Istack1, Istack2, A_list, x_list):

    #Error Calcs
    Videal_R1 = (1.380648e-23 * (27+273.15)) / (1.6021766e-19)
    print Videal_R1
    Istack1 = np.array(Istack1)
    Istack2 = np.array(Istack2)
    print Istack1
    print Istack2   

    g = Istack1*Istack2
    print g 
```

乘法前的打印 Istack1 Istack2 为

```
['0.0005789047' '0.0005743839' '0.0005699334' '0.000565551' '0.0005612346'
 '0.0005569839' '0.0005527969' '0.0005486719' '0.000544608' '0.0005406044'
 '0.0005366572' '0.000532768' '0.000528934' '0.0005251549' '0.0005214295'
 '0.0005177562' '0.0005141338' '0.0005105614' '0.000507039' '0.0005035643'
 '0.0005001368' '0.0004967555' '0.0004934193' '0.0004901279' '0.0004868796'
 '0.0004836736']
['0.000608027' '0.0006080265' '0.0006080267' '0.0006080267' '0.0006080261'
 '0.0006080261' '0.0006080262' '0.0006080261' '0.0006080263' '0.0006080272'
 '0.0006080262' '0.0006080262' '0.0006080257' '0.0006080256' '0.0006080258'
 '0.0006080256' '0.0006080252' '0.0006080247' '0.000608025' '0.0006080249'
 '0.000608025' '0.0006080251' '0.0006080249' '0.0006080254' '0.0006080251'
 '0.0006080247'] 
```

我调用函数使用

```
Re_list = currents_to_resistance(full_list[i][0],full_list[i][1], temp_A, temp_x) 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T03:55:58.850

首先将字符串数组转换为浮点数组：

```
Istack1 = np.array(Istack1, np.float)
Istack2 = np.array(Istack2, np.float) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T03:53:24.937

在我看来，那些`ndarray`是*字符串*。

```
>>> numpy.array(['1', '2', '3']) * numpy.array(['1', '2', '3'])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for *: 'numpy.ndarray' and 'numpy.ndarray' 
```

如果要将它们相乘，则需要将它们转换为`floats`s 或s：`int`

```
>>> numpy.array([1, 2, 3]) * numpy.array([1, 2, 3])
array([1, 4, 9]) 
```

一种方法*可能*是这样的。（但这取决于您传递给函数的内容。）

```
Istack1 = np.array(map(float, Istack1)) 
```

或者，使用列表推导：

```
Istack1 = np.array([float(i) for i in Istack1]) 
```

或者，从[HYRY](https://stackoverflow.com/a/10492324/577088)窃取（我忘记了明显的方法）：

```
Istack1 = np.array(Istack1, dtype='f8') 
```

# xcode - XCode Storyboard：当segue触发器不在故事板上时如何创建segue

> ID：10492285
> 
> 赞同：5
> 
> 时间：2012-05-08T03:48:37.117
> 
> 标签：xcode, storyboard, uistoryboardsegue

所以我开始在 XCode 4.3.2 中玩故事板。我从 Master-Detail 应用程序（iPad 的拆分视图应用程序）开始。在详细视图（名为`DetailVC`）中，我有一个视图，其中显示了一组自定义视图。

自定义视图（名为`GridView`）有一个点击手势识别器，它应该处理每个自定义视图上的点击事件。点击`GridView`推送视图控制器会显示一些搜索结果（名为`SearchResultsVC`）。

在`GridView`单独的 nib 文件中创建，并且`DetailVC`和`SearchResultsVC`驻留在情节提要中，如何创建带有目的地的推送转场`SearchResultsVC`？我刚刚在 DetailVC 和 SearchResultsVC 之间创建了一个 segue？当识别到点击手势时，我是否可以从 GridView 类内部以编程方式触发此 segue ？？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T13:09:40.537

在处理水龙头的方法中：

[self performSegueWithIdentifier:@"yourSegueIdentifier" sender:self];

在 StoryBoard 控件中，从 DetailVC 拖动到 SearchResultVC 并选择您想要的 segue 类型。确保在属性检查器中将您的 segue 标识符命名为与上述方法中的标识符相同。

我会尝试改进我的答案我把它搞砸了我认为：

1）在您的 DetailVC.h 中为您的 GridView 创建一个实例变量，如下所示

```
IBOutlet UIView * gridView; 
```

还像这样为您的网格视图创建一个 getter 方法和一个 IBAction

```
-(UIView *)gridView;
-(IBAction)myGridGotPressed:(id)sender; 
```

2）现在在您的 DetailVC.m 中实现您的方法，如下所示

```
-(UIView *)gridView{
if(!gridView){
[[NSBundle mainBundle] loadNibNamed:@"GridView" owner:self options:nil];
}
return gridView;
} 
```

也像这样实现你的 IBAction

```
-(IBAction)myGridGotPressed:(id)sender{
[self performSegueWithIdentifier:@"yourSegueIdentifier" sender:self];
} 
```

3) 要完成这项工作，您需要将 GridView 的 filesOwner 类更改为 DetailVC，然后正常连接插座和操作。

我希望这会有所帮助。

# android - android中的XML解析器

> ID：10492288
> 
> 赞同：0
> 
> 时间：2012-05-08T03:48:55.217
> 
> 标签：android, xml-parsing

我正在使用 XML 解析器。我必须将一个 id 从一个活动传递给另一个，但是这个 id 没有显示在第一个屏幕的 textview 中。我怎样才能将这个 id 传递到另一个屏幕。

这是我的代码：

```
 XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) 
        {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_LASTVALUE,parser.getValue(e, KEY_LASTVALUE));
            map.put(KEY_CHANGE, parser.getValue(e, KEY_CHANGE));
            map.put(KEY_STKEXCHANGE, parser.getValue(e, KEY_STKEXCHANGE));  
            map.put(KEY_LASTPRICE, parser.getValue(e, KEY_LASTPRICE));  

            // adding HashList to ArrayList
            menuItems.add(map);
        } 
```

在这里，我必须在单击特定元素值时传递 id，我该怎么做：

```
lv.setOnItemClickListener(new OnItemClickListener() 
        {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
//              String name = ((TextView) view.findViewById(R.id.name_label)).getText().toString();
//              String cost = ((TextView) view.findViewById(R.id.cost_label)).getText().toString();
//              String description = ((TextView) view.findViewById(R.id.description_label)).getText().toString();
                // Starting new intent
                Intent in = new Intent(getApplicationContext(), IndicesDetails.class);
//              in.putExtra(KEY_STKEXCHANGE, name);
//              in.putExtra(KEY_COST, cost);
//              in.putExtra(KEY_DESC, description);
//              string ids = getItemId(position);               
//              in.putExtra("idvalue", id);
                startActivity(in);

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:56:50.673

在当前活动中：

```
 public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // Starting new intent
                Intent in = new Intent(getApplicationContext(), IndicesDetails.class);              
                in.putExtra("idvalue", id);
                startActivity(in);
            } 
```

然后在新活动中，检索这些值：

```
Bundle extras = getIntent().getExtras();
if(extras !=null) {
long value = extras.getLong("idvalue");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:24:13.643

尝试类似的东西可能会有所帮助。

```
public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
    HashMap map=yourArrayList.get(position);
    String id=map.get("Your key");

    in.putExtra("idvalue", id);

    } 
```

# c++ - Qt5 的 GDB 漂亮打印机

> ID：10492290
> 
> 赞同：9
> 
> 时间：2012-05-08T03:48:58.073
> 
> 标签：c++, python, qt, gdb, qt5

我在哪里可以找到用于 qt5 的 gdb 漂亮打印机？

我只能在 kde 开发者网站上找到 qt4。也许有人知道是否存在用于新版 Qt 的漂亮打印机以及我在哪里可以找到它们。

我知道可以使用最新版本的 QtCreator，但我只需要用于 GDB 的普通 python 脚本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-01T22:17:19.793

[https://techbase.kde.org/Development/Tutorials/Debugging/Debugging_with_GDB](https://techbase.kde.org/Development/Tutorials/Debugging/Debugging_with_GDB)上列出的漂亮打印机仅与 Qt 5 部分兼容。某些类型（例如 QByteArray）未正确处理。

Alex Merry 曾在 Qt 5 漂亮的打印机上工作，并[试图](https://codereview.qt-project.org/87052)将它们推送到 Qt5 Base 包中（不幸的是它没有成功）。为方便起见，我在[https://github.com/Lekensteyn/qt5printers上提供了他的打印机](https://github.com/Lekensteyn/qt5printers)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-02T13:28:03.887

作为参考，以下 ( `gdbinit`+ `*.py`) 支持 qt5 对象，并且似乎会定期更新：

[https://invent.kde.org/kdevelop/kdevelop/-/tree/master/plugins/gdb/printers](https://invent.kde.org/kdevelop/kdevelop/-/tree/master/plugins/gdb/printers)

[https://github.com/KDE/kdevelop/tree/master/plugins/gdb/printers](https://github.com/KDE/kdevelop/tree/master/plugins/gdb/printers)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-10T18:36:53.033

据我所知，漂亮的打印机位于：http: [//gcc.gnu.org/svn/gcc/trunk/libstdc++-v3/python/](http://gcc.gnu.org/svn/gcc/trunk/libstdc++-v3/python/)

此外，可以在此处找到启用了 Python 的 GDB 二进制文件。[http://origin.releases.qt-project.org/gdb/](http://origin.releases.qt-project.org/gdb/)

# python - PYTHON 'Unicode' 对象不支持项目分配

> ID：10492291
> 
> 赞同：2
> 
> 时间：2012-05-08T03:49:02.887
> 
> 标签：python

需要一些帮助来解决这个错误：

**TypeError**：“unicode”对象不支持项目分配

**语言： menuDic** [str(menu.id)]['menuDishes'][str(d.dish.dishType.name)]['dishTypeName'][str(d.dish.id)] = {}

```
def getDishOfTheWeek():
    menuDic = Ddict(dict)
    for menu in Menus.select().where(state = True):
        menuDic[str(menu.id)]={}
        menuDic[str(menu.id)]['menuId']=menu.id
        menuDic[str(menu.id)]['menuName']=menu.name
        menuDic[str(menu.id)]['menuCountry']=menu.country.name
        menuDic[str(menu.id)]['menuDishes']={}
        for d in DishMenuRels.select().where(menu = menu.id).join(Dishes).join(DishTypes).order_by('name')
            menuDic[str(menu.id)]['menuDishes'][str(d.dish.dishType.name)] = {}
            menuDic[str(menu.id)]['menuDishes'][str(d.dish.dishType.name)]['dishTypeName'] = d.dish.dishType.name
            menuDic[str(menu.id)]['menuDishes'][str(d.dish.dishType.name)]['dishTypeName'][str(d.dish.id)] = {}
            menuDic[str(menu.id)]['menuDishes'][str(d.dish.dishType.name)]['dishTypeName'][str(d.dish.id)]['dishId'] = d.dish.id
            menuDic[str(menu.id)]['menuDishes'][str(d.dish.dishType.name)]['dishTypeName'][str(d.dish.id)]['dishState'] = d.dish.name
            menuDic[str(menu.id)]['menuDishes'][str(d.dish.dishType.name)]['dishTypeName'][str(d.dish.id)]['dishType'] = d.dish.price
            menuDic[str(menu.id)]['menuDishes'][str(d.dish.dishType.name)]['dishTypeName'][str(d.dish.id)]['dishName'] = d.dish.country.name
    print json.dumps(menuDic, indent=5, sort_keys=True) 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T04:00:33.637

在这里，您将 value `d.dish.dishType.name`（似乎是一个 unicode 字符串）分配给字典 key `'dishTypeName'`。

```
 menuDic[str(menu.id)]['menuDishes'][str(d.dish.dishType.name)]\
               ['dishTypeName'] = d.dish.dishType.name 
```

然后，您对该值使用项目分配；以下与 相同`d.dish.dishType.name[str(d.dish.id)] = {}`。

```
 menuDic[str(menu.id)]['menuDishes'][str(d.dish.dishType.name)]\
               ['dishTypeName'][str(d.dish.id)] = {} 
```

不用说，这会导致错误，因为`d.dish.dishType.name`它是一个不可变的字符串。

我可以补充一点，您最好将这些任务分成更小的部分，也许有一些功能？这些长的赋值语句——我相信你已经注意到了——很难解释和调试。

# asp.net-mvc - 从模型中删除实体列 - 自动移除脚手架？

> ID：10492293
> 
> 赞同：0
> 
> 时间：2012-05-08T03:49:13.770
> 
> 标签：asp.net-mvc, visual-studio-2010, entity-framework

我需要从 EF 4.3 中的数据库中删除一列。数据库已成功更新，但在尝试访问 CRUD 视图和错误时，脚手架仍然存在。有没有办法在模型更改后自动删除脚手架，还是我必须手动删除所有实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:32:14.200

我不确定，因为我不知道您使用的是什么脚手架生成器。如果它是“随盒子一起提供的”，我很确定你必须手动删除 CRUD。

我熟悉的脚手架生成器只是生成器。他们不知道生成了什么，所以他们不响应数据模型的变化。这是一个单向过程。

OTOH，这也意味着您可以通过重新运行生成器来“消除”脚手架垃圾。当然，您必须保存已添加到脚手架输出的自定义位，但这可能比删除不再需要的更简单。

# c# - 锁定公共对象，并跨模块共享

> ID：10492296
> 
> 赞同：2
> 
> 时间：2012-05-08T03:49:35.407
> 
> 标签：c#, multithreading, concurrency, blocking

我正在查看一些代码，并看到了一些我以前从未见过的东西。我在一个用于锁定的对象上查找了所有引用，并得到了以下结果。

我已经替换了所有文件/类/成员名称以保护那些可能需要保护的人。

```
C:\Sln1\ProjX\ClassX.cs - (17, 26) : public static object PublicStaticLockObj = new object();
C:\Sln1\Proj1\Class1.cs - (193, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj1\Class1.cs - (228, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj1\Class1.cs - (92, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj2\Class2.cs - (115, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj2\Class2.cs - (181, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj2\Class2.cs - (216, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj3\Class3.cs - (160, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj3\Class3.cs - (195, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj3\Class3.cs - (95, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj4\Class4.cs - (133, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj4\Class4.cs - (252, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj4\Class4.cs - (286, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj5\Class5.cs - (252, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj5\Class5.cs - (320, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj5\Class5.cs - (360, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj6\Class6.cs - (112, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj6\Class6.cs - (177, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj6\Class6.cs - (212, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj7\Class7.cs - (165, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj8\Class8.cs - (129, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj8\Class8.cs - (198, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj8\Class8.cs - (233, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj9\Class9.cs - (156, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj9\Class9.cs - (191, 20) : lock (ClassX.PublicStaticLockObj)
C:\Sln1\Proj9\Class9.cs - (90, 20) : lock (ClassX.PublicStaticLockObj) 
```

是否存在跨模块共享锁是解决问题的好方法的情况？是否有关于锁定公共对象的指导？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T04:06:52.370

如果代码有异味，那就太臭了。

锁作为同步机制的主要弱点是它们不可组合——需要获取多个锁很容易导致死锁。

防止死锁的唯一方法是将获得锁的情况限制在绝对必要的情况下，并限制在持有锁时将执行的操作，例如避免做任何可能获得另一个锁的事情，但也要避免做任何可能阻塞、休眠或需要很长时间的操作，因为任何需要很长时间的操作现在都已得到有效提升——它可以一次阻塞多个线程！

公开锁是鼓励开发人员获取他们确实不需要使用的锁，或者他们确实没有考虑使用的后果的一种方式。

您可能需要比我更官方的参考！尝试“锁定”语句文档。

> 通常，避免锁定公共类型或超出代码控制范围的实例。常见的构造 lock (this)、lock (typeof(MyType)) 和 lock ("myLock") 违反了此准则：
> 
> 如果实例可以公开访问，lock (this) 是一个问题。
> 
> 如果 MyType 可公开访问，则 lock (typeof (MyType)) 是一个问题。
> 
> lock(“myLock”) 是一个问题，因为进程中使用相同字符串的任何其他代码都将共享相同的锁。
> 
> *最佳实践是定义一个私有对象来锁定，或者一个私有静态对象变量来保护所有实例共有的数据。*

来源： http: [//msdn.microsoft.com/en-us/library/c5kehkcz (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/c5kehkcz(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:28:48.883

PublicStaticLockObject 可能旨在同步对某些 PublicStaticResource 的访问，在这种情况下，如果每个人都很好地使用该对象，您就不会遇到麻烦。但是如果有人将该锁对象用于*不同*的资源，则存在死锁的风险。另请注意，该对象不是只读的，因此有人可以用新对象替换它。这也可能造成麻烦。

这就是为什么 ClassX 应该声明一个私有锁对象，然后通过公共静态方法暴露公共静态资源；这些方法将包含用于保护资源的锁定语句。例如，之前：

```
public static class ClassX
{
    public static FileStream Stream { get; private set; }
    public static object PublicStaticLockObj = new object();
}

public class ClassY
{
    public void WriteToTheGlobalStream(byte b)
    {
        lock (ClassX.PublicStaticLockObj)
            ClassX.Stream.WriteByte(b);
    }
} 
```

后：

```
public static class ClassX
{
    private static FileStream Stream { get; set; }
    private static object PublicStaticLockObj = new object();
    public static void WriteToTheStream(byte b)
    {
        lock (PublicStaticLockObj)
            Stream.WriteByte(b);
    }
}

public class ClassY
{
    public void WriteToTheGlobalStream(byte b)
    {
        ClassX.WriteToTheStream(b);
    }
} 
```

# php - 从 MySQL 获取 PHP 变量时出现问题

> ID：10492301
> 
> 赞同：0
> 
> 时间：2012-05-08T03:50:29.417
> 
> 标签：php, mysql, variables

我有一个像“Doctor and Surgical”这样的变量，我从 Mysql 数据库中获取这个值并将其存储在一个变量中。当我回显这个变量时，它只给了我“医生” 谁能告诉我如何将从 Mysql 检索到的上述值作为一个完整的变量......

编辑

请在下面找到代码

```
query.php
<form action="process.php" method="post">
<select name="cat">
<?php
$sql="select distinct Category from tbl_1 order by Category asc";
$query=mysql_query($sql);

while($row=mysql_fetch_array($query))
{

 echo "<option value=".$row[Category].">".$row[Category]."</option>";
}
?>
</select>
<select name="station">
<?php
$sql_1="select distinct Station from tbl_1 order by Station asc";
$query_1=mysql_query($sql_1);

while($row=mysql_fetch_array($query_1))
{

echo "<option value=".$row[Station].">".$row[Station]."</option>";
}
?>
</select>
<input name="C" type="submit" />
</form>

process.php

$myValue =$_POST['cat'];
$myStation=$_POST['station'];

echo $myValue;
echo "<br/>";
echo $myStation;

$mySqlStm ="SELECT Name FROM tbl_1 WHERE Category='$myValue' and Station='$myStation'";

$result2 = mysql_query($mySqlStm) or die("Error:mysql_error()"); 

if(mysql_num_rows($result2) == 0){ 
echo("<br/>no records found"); 
} 
ELSE 
{ 
echo "<table border='1'>"; 

//ECHO THE RECORDS FETCHED
while($row = mysql_fetch_array($result2)) 
{ 
echo "<tr>"; 

echo "<td>" . $row['Name'] . "</td>"; 
}} 
```

在这里，当我回显 $myValue 时，它​​给了我“医生”而不是“医生和外科医生”，我需要“医生和外科医生”作为一个完整的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:19:27.170

您需要正确引用该值：

```
 echo "<option value='".$row[Category]."'>".$row[Category]."</option>"; 
```

使用您当前的代码，如果您查看源代码，您可能会看到如下内容：

```
 <option value=Some Category>Some Category</option> 
```

但是通过正确的报价，您会看到正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:33:32.767

您可以使用它而无需连接：

```
echo "<option value='{$row[Category]}'>{$row[Category]}</option>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:07:43.107

使用单引号并确保 $row['Category'] 的值 试试看： echo "".$row['Category']."";

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T04:36:03.193

将引号视为括号或 html 标记。当你打开一个，你就在里面，直到你关上它。在这种情况下，您需要引号来告诉 php 要回显什么以及将为 html 属性打印的不同引号。php echo 命令使用单引号，html 代码使用双引号通常更容易。然后`.`just 意味着将一堆东西拼接在一起，而不必连续执行十次 echo 命令。所以当你有这个时：

```
echo '<option value="'.$row[Category].'">'.$row[Category].'</option>'; 
```

你可以像这样分解它（只是为了你的头脑清晰，实际上不要编码）：

```
echo 
    '<option value=" '
    .
    $row[Category]
    .
    ' "> '
    .
    $row[Category]
    .
    '</option>'
; 
```

# jquery - 使用 Jquery 选择特定的后代

> ID：10492310
> 
> 赞同：0
> 
> 时间：2012-05-08T03:53:22.913
> 
> 标签：jquery

在[JQuery 的文档](http://api.jquery.com/child-selector/)中，`"parent > child"`选择器选择由“父”指定的元素的“子”指定的所有直接子元素。“直接孩子”只是向下一级的元素。例如，我有这个代码：

```
 ...
    <table class="advanceSearch">
      <tr>
        <td>
          <ul class="form">
            <li>
              <label>Document Type:</label>
              <input type="text" id="cmbDocumentType" name="paramtitle" />
            </li>
            <li>
              <label>Title:</label>
              <input type="text" id="paramtitle" name="paramtitle" />
            </li>
            <li>
              <label>Notes:</label>
              <input type="text" id="paramNotes" name="paramNotes" />
            </li>
            <li>
              <label>Revision Number:</label>
              <input type="text" id="paramRevisionNumber" name="paramRevisionNumber" />
            </li>
            <li>
              <label>Draft Number:</label>
              <input type="text" id="paramDraftNumber" name="paramDraftNumber" />
            </li>
            <li>
              <label>Version Number:</label>
              <input type="text" id="paramVersionNumber" name="paramVersionNumber" />
            ... 
```

我想选择`input`id 以“param”开头的元素，所以我使用了`find()`而不是`parent > child`选择器：

```
 $("table.advanceSearch").find("ul.form").find('input[id^="param"]').attr("disabled", "disabled"); 
```

这很好用，但我发现有两个`find()`选择器是多余的。有什么办法可以简写这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T03:55:41.063

您实际上根本不需要`.find()`；您可以改用两个后代选择器。

```
$('table.advanceSearch ul.form input[id^="param"]') 
```

请记住：（`x > y`子选择器）或多或少可以与 互换`$('x').children('y')`，并且`$('x y')`或多或少可以与 互换`$('x').find('y')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T03:56:33.617

试试这个：

```
$('table.advanceSearch ul.form input[id^="param"]').prop('disabled', true); 
```

或者

```
$('table.advanceSearch ul.form').find('input[id^="param"]').prop('disabled', true); 
```

或者

```
$('table.advanceSearch ul.form li').children('input[id^="param"]').prop('disabled', true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T03:59:26.477

您的选择器可以更长：

```
$(".advanceSearch input[id^='param']").prop("disabled", true); 
```

这将做同样的事情，没有冗长。

# jquery - JQuery 验证：动态表单不验证

> ID：10492312
> 
> 赞同：0
> 
> 时间：2012-05-08T03:53:41.497
> 
> 标签：jquery, jquery-validate

我有一个基于用户选择的类别生成的表单。对于每个类别，我使用 jQuery get 调用将一些动态字段附加到 HTML 中。

问题：

验证非常适合第一个加载的表单，但是当我更改类别并加载新表单时，验证不会应用于动态生成的字段，而是应用于页面上的静态字段。

这是页面：http: [//goo.gl/RXrHE](http://goo.gl/RXrHE)

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:10:02.030

对于那些正在寻找相同问题的解决方案的人。这是修复：

在将动态字段添加到表单后，我通过 rules('add', ...) 函数为动态字段添加了规则。

# facebook - 通过 Graph API 发布状态时可以指定权限吗？

> ID：10492313
> 
> 赞同：0
> 
> 时间：2012-05-08T03:54:15.577
> 
> 标签：facebook, facebook-graph-api

当我通过图形 api 发布状态时，我可以通过“me/feed”或“me/home”检索状态。但是现在新发布的状态只能通过“我/家”来检索。

通过检查状态的来源数据，我发现发布的状态具有以下隐私：

```
 "privacy": {
      "description": "Friends",
      "value": "ALL_FRIENDS"
   }, 
```

当我通过 Facebook WEB 发布消息时，我可以选择隐私，可以是 PUBLIC、FRIENDS、ONLY ME 或 CUSTOMER 之一。我可以用 Graph API 做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:02:05.740

你的意思是这样的：

```
$wallpost = $facebook->api('me/feed','post',array(
  'name'        => 'Headline',
  'message'     => '',
  'privacy'     => array(
      'value'   => 'CUSTOM',
      'friends' => 'EVERYONE'
   ).... 
```

# fluent-nhibernate - Fluent Nhibernate：无法删除具有 as HasMany 属性的项目

> ID：10492315
> 
> 赞同：1
> 
> 时间：2012-05-08T03:54:23.907
> 
> 标签：fluent-nhibernate

我通常不处理这样的数据，但我想我试试看。事实证明我失败了：/并且不知道如何继续。

我有一个数据库对象跟踪：

```
public virtual string Type { get; set; }

public virtual IList<DateTypeTrack> TrackDates { get; set; } 
```

使用映射文件：

```
Table("Tracks");
Map(x => x.Type).Not.Nullable();
HasMany(x => x.TrackDates).KeyColumn("TrackID").Cascade.All(); 
```

DateTypeTrack 对象如下所示：

```
public virtual DateType DateType { get; set; }
public virtual Track Track { get; set; }
public virtual int Days { get; set; } 
```

使用这样的映射文件：

```
Table("DateTypeTracks");
References(x => x.DateType, "DateTypeID").Not.Nullable();
References(x => x.Track, "TrackID").Not.Nullable();
Map(x => x.Days).Not.Nullable(); 
```

如果有必要，我也会发布 DateType 代码，但我认为不需要。

我正在尝试在我的服务层中编写一个非常简单的删除方法：

```
public void PushDelete(int id)
    {
        Track track = _tracks.Get(id);

        try
        {
            _tracks.BeginTransaction();
            _tracks.Delete(track);
            _tracks.CommitTransaction();
        }
        catch (Exception)
        {
            _tracks.RollbackTransaction();
            throw;
        }
    } 
```

我不断收到错误消息：

```
could not delete collection: [TSE.Domain.DatabaseObjects.Track.TrackDates#12][SQL: UPDATE DateTypeTracks SET TrackID = null WHERE TrackID = @p0] 
```

我不知道它为什么要在最后进行更新，但我想这就是导致问题的原因。我有什么样的追索权？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:22:13.340

因为`DateTypeTrack`已经关心两个实体之间的关联，所以您应该标记 HasMany`Inverse`以告诉 NH hasmany 不维护它（更新）

```
HasMany(x => x.TrackDates).KeyColumn("TrackID").Cascade.All().Inverse(); 
```

# db2 - 将 db2 日期戳转换为 Unix 时间戳

> ID：10492316
> 
> 赞同：4
> 
> 时间：2012-05-08T03:54:25.620
> 
> 标签：db2, unix-timestamp

如何将 2012-04-12 00:00:00 转换为 DB2 中的 unix 时间戳。sql 中是否有任何可用的内置函数

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-11T15:55:06.010

使用`DAYS`and`MIDNIGHT_SECONDS`比 更精确`TIMESTAMPDIFF`：

```
SELECT
86400*(DAYS(CURRENT TIMESTAMP - CURRENT TIMEZONE)-DAYS('1970-01-01'))
+ MIDNIGHT_SECONDS(CURRENT TIMESTAMP - CURRENT TIMEZONE)
"UNIX_TIMESTAMP"
FROM SYSIBM.SYSDUMMY1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T16:29:12.330

`Unix timestamp`我假设您的意思是自 1970-01-01 00:00:00 UTC 以来的秒数（或其他） 。

DB2（从 V6R1 开始）没有内置的功能。
您还面临以下问题：

*   DB2 中的所有时间戳都是“本地时间”——它们不包含时区信息，所有`CURRENT_TIMESTAMP`写入都基于*请求*系统认为的时间，**而不是**主机。
*   夏令时经常变化。您需要增加开销来管理您的转换。
*   该`TIMESTAMPDIFF`函数返回一个*估计值*，**而不是**一个精确值。在足够的差异下，您可能可以存活数年/数月的时间，但天数不太可能减少它。
*   时间戳算术是不精确的（除其他事项外，假定月份的长度始终为 30 天......）

您最好的选择是开始使用`DAYS`（返回自 0001-01-01 以来的天数）。请记住，您最好在 UTC 中执行所有操作，因为它**不会**考虑 DST。

# smartgwt - Smartgwt selectitem键值问题

> ID：10492319
> 
> 赞同：1
> 
> 时间：2012-05-08T03:55:09.740
> 
> 标签：smartgwt, listgrid

我有一个`SelectItem`我填写的`Map`，这个组合在一个listgridfield中，所以很好，但是当我选择组合框中的任何项目而不是获取地图的描述或值时，会将键放在listgridfield中。

我该怎么做才能让我设置值而不是键？现在我尝试使用 AddChangeHandler 但没有奏效。

我得到了下一个代码：

```
final ListGridField measureField = new ListGridField(CdmsConstants.MEASURE_ABB,    CdmsConstants.CMB_MEASURE_TITULO, 100);

final SelectItem measureComboBox = new SelectItem();
measureComboBox.setDefaultToFirstOption(false);
measureComboBox.setName(CdmsConstants.MEASURE_ABB);
measureComboBox.setTitle(CdmsConstants.CMB_MEASURE_TITULO);
measureComboBox.setDefaultValues(CdmsConstants.CMB_DEFAULT_VALUE);
measureComboBox.setType("comboBox");
measureComboBox.setVisible(true);
measureComboBox.setValueMap(result);
measureComboBox.setValidateOnExit(true);

measureField.setEditorType(measureComboBox); 
```

在 measureComboBox 当我放置变量结果（即 Map）并单击组合的任何项目时，显示在组合框中的值是 linckedhashmap 的键，而不是项目的值......我怎么能做出改变吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:17:48.087

我有同样/类似的问题，我的解决方案可以在这里看到[SmartGWT 中的 ListGrid.setEditorCustomizer](https://stackoverflow.com/questions/12046287/listgrid-seteditorcustomizer-in-smartgwt)是使用数据源，`SelectItem`然后实现我自己的`CellFormatter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:22:38.837

如果您使用数据源而不是`LinkedHashMap`，则可以使用实例`setValueField`方法。`SelectItem`但在这种情况下，您可以使用对象`setValueFormatter`的方法`SelectItem`。

# c# - 在 C# 中通过数据源连接时从组合框中获取值

> ID：10492322
> 
> 赞同：0
> 
> 时间：2012-05-08T03:55:37.663
> 
> 标签：c#

我刚来这地方。并且有一个大问题，如果您能提供帮助，我将不胜感激。

我正在开发一个软件，它只是在访问文件中输入一些数据并在一些过滤后检索它（通过使用日期时间选择器、单选按钮、组合框......等完成）

当我想更新任何条目时，我只需编写一个选择查询并将这些值添加到相关字段。但事情是我无法更新我的组合框。我得到了其中的2个。当我尝试以下代码时，它会引发错误。

我能做些什么？请帮帮我。谢谢！

```
cmb_district.ValueMember = dt1.Rows[0][1].ToString(); 
```

我使用数据源属性将组合框与访问数据库连接起来。它显然具有显示和价值成员。但是当查询返回值时，它不会更新组合框并给出以下错误。

无法绑定到新值成员。参数名称：值

谢谢。请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:52:59.567

就像这样

```
cmb_district.DataSource = dt1;
cmb_district.ValueMember = "SNO"; 
cmb_district.DisplayMember = "Name";
// where SNO and Name are column names in dt1. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:51:27.090

您提供的代码行不正确。**组合框的名称**`ValueMember`应设置为您希望成为所选对象的**值**的属性或列的名称（例如，唯一 ID）。但是您正在填充字段的内容。****`ValueMember`****

 ****当您以这种方式绑定组合框时（使用 和 的组合设置数据源`DisplayMember`）`ValueMember`，`SelectedValue`组合框的属性将填充为`ValueMember`所选行的字段值。

例如，假设您有一个 DataTable，其中包含**ActorID**、**Name**和**BirthDate**列，其中包含一些数据：

```
DataTable dt = new DataTable();
dt.Columns.Add("ActorID", typeof(int));
dt.Columns.Add("Name", typeof(string));
dt.Columns.Add("BirthDate", typeof(DateTime));

dt.Rows.Add(1, "Will Smith", new DateTime(1968,9,25));
dt.Rows.Add(2, "Bruce Willis", new DateTime(1955,3,19));
dt.Rows.Add(3, "Jim Carrey", new DateTime(1962, 1, 17));
dt.Rows.Add(18, "Nicole Kidman", new DateTime(1967,6,20));

ComboBox cb = new ComboBox();
cb.DropDownStyle = ComboBoxStyle.DropDownList;
cb.Location = new Point(20, 100);
cb.Width = 100;

cb.DisplayMember = "Name";  // *****
cb.ValueMember = "ActorID"; // ***** The important part
cb.DataSource = dt;

Button btn = new Button();
btn.Text = "Show ID";
btn.Location = new Point(10, 140);
btn.Click += (sender, e) =>
    {
        MessageBox.Show(cb.SelectedValue.ToString()); // **** The other important part.
    };

Form f = new Form();
f.Controls.Add(cb);
f.Controls.Add(btn);

f.ShowDialog(); 
```

当我们读取`SelectedValue`组合框的 时，它会为我们获取所选行的“ActorID”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:04:57.017

如果 yiu 想在绑定后选择特定值，请使用以下命令：

```
cmb_district.SelectedValue = dt1.Rows[0][1].ToString(); 
```****

# c# - 格式化日期时间应用程序范围

> ID：10492334
> 
> 赞同：1
> 
> 时间：2012-05-08T03:57:36.880
> 
> 标签：c#, asp.net-mvc-3, datetime, format

我有一个 MVC 应用程序，我需要使用土耳其的日期时间格式。我到处都在使用 datitime。有没有办法我可以在一个地方做到这一点，它会被格式化。

我记得很久以前读过一些关于 Thread CurrentCulture 的东西吗？

我怎样才能做到这一点？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:01:06.850

您可以通过 web.config 设置文化和 UI 文化，使用 system.web 的全球化元素

*   [http://msdn.microsoft.com/en-us/library/hy4kkhe0(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/hy4kkhe0(v=vs.100).aspx)
*   [http://support.microsoft.com/kb/306162](http://support.microsoft.com/kb/306162)

您还可以考虑在 DisplayTemplates 中为 DateTime 添加一个部分：

*   [http://msdn.microsoft.com/en-us/library/ee308450(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee308450(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:01:07.017

您可以在 web.config 文件中设置 Web 应用程序文化设置。例如，以下将使用基于用户 Web 浏览器语言首选项的设置：

```
<system.web>
    <globalization uiCulture="auto" culture="auto" />
</system.web> 
```

或者，您可以设置特定值。[.NET 中的文化列表](http://www.csharp-examples.net/culture-names/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:08:02.683

您可以在 Global.asax 中考虑以下内容：

```
using System.Globalization;

internal void Application_BeginRequest(object sender, EventArgs e)
{
    CultureInfo.CurrentCulture = CultureInfo.CreateSpecificCulture("tk-TR");

} 
```

# ios - 多点触控和音频

> ID：10492337
> 
> 赞同：0
> 
> 时间：2012-05-08T03:57:52.857
> 
> 标签：ios, multi-touch

我有一些多点触控问题

这是我在 .m 文件中的代码的一部分

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
UITouch *touch = [touches anyObject];
CGPoint pt = [touch locationInView:self.view];

if(pt.x>634 && pt.x<733 && pt.y >64 && pt.y<145)
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"si" ofType:@"mp3"];
    theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate = self;
    [theAudio play];
}

if(pt.x>634 && pt.x<733 && pt.y >195 && pt.y<276)
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"la" ofType:@"mp3"];
    theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate = self;
    [theAudio play];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"rest" ofType:@"mp3"];
    theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate = self;
    [theAudio play];
} 
```

我希望这可以工作。

实际上，第二个“if ((range) &&(range))”部分不起作用。谁能告诉我解决方案？

第一个范围有效，我希望第二个范围播放“la.mp3”，但是当两根手指按下时，它不会播放任何音乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:54:29.200

抱歉，这将是对答案的完整编辑，因为我无法删除最后一个。我犯了一个重大的阅读错误，我需要写一个新的答案。您不得使用`[touches anyObject]`，因为这不会可靠地为您提供多点触控系统中所需的触摸。

您必须使用`[[touches allObjects] objectAtIndex:#]`来提取触摸。触摸将按照它们来的顺序在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:05:13.170

您需要重新阅读有关 MultiTouch Events 的文档。首先，您需要将视图的 multipleTouchEnabled 属性设置为 YES。其次，您每次只能获得一个触摸事件，因为您正在设置

```
UITouch *touch = [touches anyObject]; 
```

而是尝试

```
for (UITouch * touch in touches) { 
```

在当前集合中的每次触摸时执行您的代码。

其次，我担心你的 AVAudioPlayer 会在 TouchDidBegin 终止时被释放；我认为这会取消其余的播放。它应该是一个属性。此外，AVAudioPlayer 一次只能播放一个音轨，因此您需要两个不同的音轨。

另一种（更好的）选择是完全放弃触摸而只使用按钮。您可以在按下按钮（开始音符）和释放按钮时收到通知（跟踪哪些按钮仍然按下，如果您在最后一个按下，则播放“rest.mp3” ）。

# javascript - d3.js 基于鼠标移动的更新行

> ID：10492339
> 
> 赞同：2
> 
> 时间：2012-05-08T03:58:06.337
> 
> 标签：javascript, d3.js

我只是深入研究 d3 并学到了很多东西，但我确信我在这里缺少/误解了一些基础知识，并且希望得到一些指导。

基本上，我想利用 d3 从`mousedown`事件 (x1, y1) 绘制一条跟随鼠标的线段，在事件触发时更新 (x2, y2) 坐标`mousemove`，最后在触发后完成/停止绘制线`mouseup`（最终确定(x2, y2) 坐标）。

看看我设置的这个 jsFiddle 来说明我正在尝试做的事情：http: [//jsfiddle.net/555Cv/](http://jsfiddle.net/555Cv/)

显然问题是鼠标移动时这条线没有更新。我很可能会完全错误地解决这个问题，所以任何形式的指导都会受到赞赏。谢谢！

**更新** 我看到有 d3.behavior.drag 扩展，但我不确定这是否正是我需要的东西类型（因为用户没有与任何对象完全交互，而是在苍蝇（线对象））

**更新 2** 好的，我在这里尝试有所不同，我认为它几乎就在那里。虽然我确信有更好的方法来做到这一点。下面的内容很接近（但它没有画线）。

```
 var shapeCoords = [
              [10, 10], [200, 10], [200, 200], [10, 200], [5, 100]
              ];

$(function() {
var container = $('#container');

// D3
console.log("D3: ", d3);

// Draw Shape
var svg = d3.select('#container').append('svg:svg').attr('height', 600).attr('width', 800);

var line = d3.svg.line()
                .x(function(d) { return d[0]; })
                .y(function(d) { return d[1]; })
                .interpolate('linear');

svg
    .data(shapeCoords)
    .append('svg:path')
    .attr('d', line(shapeCoords) + 'Z')
    .style('stroke-width', 1)
    .style('stroke', 'steelblue')
    .style('fill', 'rgba(120, 220, 54, 0.2)');

// Draw Lines

var lineData = [];

var line = d3.svg.line()
                .x(function(d) { return d.x; })
                .y(function(d) { return d.y; })
                .interpolate("linear");

var redrawLine = function() {
    var svgLines = svg.selectAll('path')
                        .data(lineData);

    svgLines.enter()
            .append('path')
            .attr('d', line(lineData))
            .attr('class', 'my-lines');

    svgLines.exit()
            .remove();

    console.debug("lineData", lineData);
};

var mouseIsDown = false;  
container.on('mousedown mouseup mousemove', function(e) {
    if (e.type == 'mousedown') {
        mouseIsDown = true; 
        lineData[0] = {x:e.offsetX, y:e.offsetY};
        redrawLine();
    } else if (e.type == 'mouseup' ){
        mouseIsDown = false;
        lineData[1] = {x:e.offsetX, y:e.offsetY};
        redrawLine();
    } else if (e.type == 'mousemove') {
        if (mouseIsDown) {
            lineData[1] = {x:e.offsetX, y:e.offsetY};
            redrawLine();    
        }
    }
});

}); 
```

​我在这里更新了 jsFiddle：http: [//jsfiddle.net/555Cv/1/](http://jsfiddle.net/555Cv/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:01:05.290

好的，我想我已经解决了，请参阅 jsFiddle：http: [//jsfiddle.net/555Cv/2/](http://jsfiddle.net/555Cv/2/)

但肯定有一种更优雅/更合适的方式来做到这一点......

# android - 他们如何将旧的主机游戏移植到 iPhone 或 Android 上？

> ID：10492343
> 
> 赞同：0
> 
> 时间：2012-05-08T03:59:06.197
> 
> 标签：android, iphone, mobile, port

我在 iPhone 和 Android 上找到了像“最终幻想战术：狮子之战”这样的旧主机游戏，这和我在主机上玩的一样。

我想知道他们如何将这样的旧主机游戏移植到 iPhone 或 Android 上？

在考虑了许多手机游戏引擎之后，我发现它们中的大多数都是基于 C 或 C++ 的，而我虽然大多数主机游戏也是用 C 或 C++ 编写的，所以我认为这些游戏很容易移植到 iPhone或安卓。

任何人请确认我的想法是否正确，或者建议我将控制台游戏移植到 iPhone 或 Android 的可能方法。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:06:22.837

将旧作品移植到不同的平台几乎从来都不是一件容易的事，尽管也有例外。（[另一个世界](http://en.wikipedia.org/wiki/Another_World_%28video_game%29 "另一个世界")是用类似汇编的语言编写的，因此更容易移植到其他平台）。

即使游戏使用相同的编程语言，平台之间也经常存在 API 差异，以及硬件相关事件如何从设备发送到游戏。

因此，一种常见的选择是为旧硬件编写模拟器/仿真器。如果新硬件足够快，这将为您提供旧游戏的确切体验，而无需实际移植游戏本身。（然后可以使用模拟器移植多个标题。）

如果您在新设备上发现与旧设备具有相同怪癖的游戏，那么它很可能是以这种方式移植的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:03:04.210

这些旧主机游戏的源代码受版权保护。否则，源不是免费可用的——封闭源。

您可能可以通过 ROM 找到源代码，但如果您曾经尝试在公共市场（android、ios 等）上发布此代码的成功移植版，即使它获得批准，您也可能会受到版权声明的抨击。

换句话说，对于一个不隶属于拥有游戏源代码的公司的简单开发人员来说，这实际上是不可能的。

# c# - 在视图代码中更改剃刀视图的基类

> ID：10492344
> 
> 赞同：6
> 
> 时间：2012-05-08T03:59:11.220
> 
> 标签：c#, asp.net-mvc-3, razor, asp.net-mvc-4

请注意，这不是重复的问题。我知道我们可以在views/web.config 的razor 部分中指定一个基本视图类型。但我希望我的view1、view2 继承自baseviewA，而view3、view4 继承自baseviewB。在剃须刀中，我怎么能在 ASPX 引擎中这样做：

```
<%@ Page Language="C#" Inherits="Test.Myproject.Web.Mvc.ViewBase" %>
<%@ Control Language="C#" Inherits="Test.Myproject.Web.Mvc.PartialViewBase" %> 
```

**编辑**我不关心模型。在我的问题中，baseviewA 和 baseviewB 是完全不同的类。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T05:09:10.267

您可以使用关键字更改[Razor](http://odetocode.com/Blogs/scott/archive/2011/01/09/razor-tip-2-inheritance-amp-configuration.aspx)`@inherits`中的基类，您的基类只需要从 `System.Web.Mvc.WebViewPage`.

所以你的样本：

`<%@ Page Language="C#" Inherits="Test.Myproject.Web.Mvc.ViewBase" %>`

将会

`@inherits Test.Myproject.Web.Mvc.ViewBase`

在哪里

```
public class Test.Myproject.Web.Mvc.ViewBase : System.Web.Mvc.WebViewPage
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T04:17:06.263

Inherits 指定将在视图中使用的模型类型。同样，这可以在 Razor 中完成。

```
<%@ Page Language="C#" Inherits="Test.Myproject.Web.Mvc.ViewBase<Test.Models.MyModel>" % 
```

相当于在 Razor 中跟随

```
@model Test.Models.MyModel 
```

这在视图和部分视图中都是相同的，所以

```
<%@ Control Language="C#" Inherits="Test.Myproject.Web.Mvc.PartialViewBase<Test.Models.MyModelB>" %> 
```

相当于

```
@model Test.Models.MyModelB 
```

# entity-framework - 为什么访问关系属性时会出现“关系多重性违规”？

> ID：10492349
> 
> 赞同：2
> 
> 时间：2012-05-08T03:59:46.423
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first, automapper

我有以下类，我试图将实体对象映射到视图模型：

```
public class ConsumerIndexItem: MappedViewModel<Consumer>
{
    public string UserName { get; set; }
    public string RoleDescription { get; set; }
    public override void MapFromEntity(Consumer entity)
    {
        base.MapFromEntity(entity);
        UserName = entity.User.UserName;
    }
}
public class Consumer: AuditableEntity
{
    public virtual User User { get; set; }
    public virtual Role Role { get; set; }
}
public class IndexModel<TIndexItem, TEntity> : ViewModel where TEntity : new()
{
    public IndexModel()
    {
        Items = new List<TIndexItem>();            
    } 
    public List<TIndexItem> Items { get; set; }
    public virtual void MapFromEntityList(IEnumerable<TEntity> entityList)
    {
        Items = Mapper.Map<IEnumerable<TEntity>, List<TIndexItem>>(entityList);
    }
}
public class ConsumerIndexModel: IndexModel<ConsumerIndexItem, Consumer> 
```

但是，如果我使用以下代码驱动映射：

```
var model = new ConsumerIndexModel();
var list = _repository.List().Where(c => c.Parent == null).ToList();
model.MapFromEntityList(list);
return View(model); 
```

在行`UserName = entity.User.UserName;`中`ConsumerIndexItem`我得到以下异常：

```
A relationship multiplicity constraint violation occurred: An EntityReference can have no more than one related object, but the query returned more than one related object. This is a non-recoverable error. 
```

如果我`?entity.User.UserName`在即时窗口中执行，我会得到预期的用户名值。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T23:17:36.920

我认为问题可能在于您假设每个用户只有一个消费者，而这对于数据是不正确的。

我遇到了同样的问题，这是因为这种关系是一对多的，而我是一对一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:04:43.337

让我解释一下为什么我有这个例外，你也许可以将它与你自己的情况联系起来。我将 EF Code First 模型映射到现有数据库。两个实体之间存在一对多的关系。子表具有由 Id 和 Date 组成的复合主表。但是，我错过了流利地图中主键的第二段：

```
this.HasKey(t => t.Id); 
```

奇怪的是，模型可以工作，但在某些情况下会抛出异常，很难理解为什么。显然，当 EF 加载子实体的父级时，有不止一个父级，因为键不仅有 ID，还有日期。决议是包括关键的第二部分：

```
this.HasKey(t => new { t.Id, t.Date }); 
```

帮助我查明问题的工具是 EF Power Tools，目前它处于 Beta 3 中。该工具为 EF 上下文类提供了一个上下文菜单，其中一项是查看实体模型 DDL SQL。虽然我可以通过检查代码找到这一点，但该工具很好地显示了 EF 模型与实际数据库的匹配程度。

我相信你会得到这个例外，因为由于某种原因，关系的多样性被违反了。就我而言，这是不正确的映射，在您的情况下，它可能是其他东西，我无法通过查看您的代码来判断。

# android - 为什么 NumberPicker（上下域选择器）在 Eclipse 的 Android UI 编辑器中不可见？

> ID：10492350
> 
> 赞同：1
> 
> 时间：2012-05-08T03:59:47.397
> 
> 标签：android

up-down-domain 选择器是一个流行/通用的 UI 组件，但任何时候我都必须手动添加它。为什么 NumberPicker（up-down-domain 选择器）在 Eclipse 的 Android UI 编辑器中不可见？

```
<android.widget.NumberPicker
android:id="@+id/ppp"
android:layout_width="wrap_content"
android:layout_height="wrap_content" /> 
```

* * *

我得到了它！NumberPicker 小部件支持 Android SDK，因为 API 级别 11 = Android 3.0+ 操作系统，我的项目基于 Android 2.x 操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:00:51.263

是在 API 11 中引入的`NumberPicker`。如果您不是针对 Android 3.0+ 构建应用程序，Eclipse 将无法`View`在 UI 编辑器中显示。

# sql - SQL查询查找第N个最高薪水

> ID：10492357
> 
> 赞同：3
> 
> 时间：2012-05-08T04:00:59.483
> 
> 标签：sql, database

我指的是以下查询来查找员工的第 N 高薪水。

```
select sal from emp t where &n = (select count(sal) from (select distinct sal 
 from emp) where t.sal<=sal); 
```

一位绅士说这个查询有效。有人可以解释一下如何将 COUNT （实际上将在 1 到 X 之间的值，其中 X 是不同的工资总额）等同于 &n 产生这个结果吗？

我试图了解数据库如何在内部处理此查询并产生结果？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T04:17:05.843

首先，查询将返回`nth` **最低**工资值。要返回`nth`最高工资值，您必须更改`t.sal <= sal`为`t.sal >= sal`。

接下来，此查询首先将不同的工资值列表查找为一个派生表，然后确定工资低于该列表中每个人的员工数量。`t.sal <= sal`正在获取派生表（大多数数据库需要一个别名）并将每个值与外部`emp`表进行比较。应该注意的是，在平局的情况下，这将返回多行。

要手动跟踪输出，我们需要一些输入：

```
Alice       | 200
Bob         | 100
Charlie     | 200
Danielle    | 150

Select Distinct sal
From emp 
```

给我们

```
200
100
150 
```

现在我们分析外表中的每一行

```
Alice - There are 3 distinct salary values less than or equal to 200
Bob - 1 rows <= 100
Charlie - 3 rows <= 200
Danielle - 2 row <= 150 
```

因此，对于每个工资值，我们得到以下计数（并按计数重新排序）：

```
Bob 1
Danielle 2
Charlie 3
Alice 3 
```

我认为您忽略的最重要方面是外部`emp`表*与*内部计数计算相关（这就是为什么它被称为相关子查询）。即，对于外部`emp`表中的每一行，通过 为该行的薪水计算一个新计数`t.sal <= sal`。同样，大多数数据库系统都需要最内部的查询具有这样的别名（注意`As Z`别名）：

```
Select sal
From emp As t
Where &n =  (
            Select Count(Z.sal)
            From    (
                    Select Distinct sal
                    From emp
                    ) As Z
            Where t.sal <= Z.sal
            ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T22:05:45.830

要获得第 n 个最高工资值，只需输入“N”的值。

```
Select Min(Salary) From (Select Top N * From Table_Name Order by Salary Desc); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T22:51:04.763

```
select sal 
from (
  select sal, 
         dense_rank() over (order by sal desc) as rnk
) t
where rnk = 5; 
```

`where rnk = 5`用你想要的任何“nth”替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T11:09:42.313

```
 SELECT Max(Salary) as Salary
    FROM employee
    where  Salary Not in 
    (SELECT TOP N Salary FROM employee ORDER BY Salary DESC)
  where N is defined by you. 
```

因此，假设您在表employee 中有以下薪水： 这里employeeID 和Salary 是employee 表的列。

## 员工身份证工资

```
 101  25,000
 154  89,000
 987  42,000
 450  12,000
 954  50,000 
```

如果我们想看到第四高的薪水

## 薪水

```
25,000 
```

查询返回第四高的薪水。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-13T06:39:22.487

```
SELECT TOP 1 salary
FROM (
SELECT DISTINCT TOP n salary
FROM employee
ORDER BY salary DESC) a
ORDER BY salary
where n > 1 (n is always 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-03T07:25:14.800

在数据库中记录数据条目，如

```
employ_id    NAME     salary
101          Henry    24000
102          Smith    24000
105          Roy      17000  
106          Robbin   15000 
702          Mac      2500
708          Bill     2100
709          Kane     2000
710          Ted      2000 
```

这里有些员工的薪水相同，那么如何计算第n个（最高/最低）薪水

用于计算第三高薪水

```
select * from emloyees where salary in (select salary from (select rownum rank , salary from (select distinct salary from employees order by salary **desc**)) where rank =3; 
```

* * *

```
ans = 15000 
```

类似于计算第三低的薪水 键入相同的查询并进行少量更改而不是 desc 键入 asc

```
select * from emloyees where salary in (select salary from (select rownum rank , salary from (select distinct salary from employees order by salary **asc**)) where rank =3; 
```

希望对你有帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-08T16:53:04.400

更改第 n 个最高工资值，只需输入 'N' 的值

```
SELECT e1.EmployeeName, e1.EmployeeSalary from Employee e1
where N = (
select COUNT(e2.EmployeeSalary) from Employee e2 where e2.EmployeeSalary >= e1.EmployeeSalary) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-03T05:36:58.853

有很多方法可以实现这一点：-

1)

```
 Select Top(1) sal from emp 
    where sal not in (select DISTINCT top(n-1) sal from emp order by sal desc) 
```

2)

```
select salary     
          from (
           select salary,
           roe_number() over (order by salary ) as row from emp
          ) emp1
  where row= n; 
```

*   如果多行一个接一个地具有相同的值，则此查询将不起作用。

3)

```
select salary     
              from (
               select salary,
               dense_rank() over (order by salary ) as row from emp
              ) emp1
      where row= n; 
```

*   这将为所有唯一的工资金额创建一个唯一的行号。

4)

```
 Select Min(sal) From 
       (Select DISTINCT Top n * From emp Order by sal Desc)as emp1; 
```

5)

```
 SELECT * FROM emp Emp1
            WHERE (n-1) = (
                             SELECT COUNT(DISTINCT(Emp2.Sal))
                             FROM emp Emp2
                             WHERE Emp2.Sal > Emp1.Sal) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-27T13:07:44.710

```
select salary 
from (Select ROW_NUMBER() over(order by salary desc) as row ,salary from Employee)as temp
where row=2; 
---2nd highest salary 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-24T04:25:08.757

**n 捐赠为您想要的第 n 个号码。喜欢：我想要第二高，所以我的查询将是** n=2

```
SELECT salary FROM Employee ORDER BY Salary DESC LIMIT 1,1 
```

用你的号码替换 n

```
SELECT salary FROM Employee ORDER BY Salary DESC LIMIT n-1,1 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-08-05T06:51:25.123

询问：

```
select 
    ename  
    ,sal  
    ,dense_rank() over (order by sal desc) ranking  
from   emp; 
```

输出：

```
ENAME   SAL   RANKING
KING    5000    1   
FORD    3000    2  
SCOTT   3000    2  
JONES   2975    3  
CLARK   2850    4  
BLAKE   2850    4  
ALLEN   1600    5 
```

包裹一个过滤器并挑选出第 N 高的薪水，比如第 4 高的薪水。

询问：

```
select *  
from  
(  
  select ename  
        ,sal  
        ,dense_rank() over (order by sal desc) ranking  
  from   emp  
)  
where ranking = 4 -- Replace 4 with any value of N 
```

输出：

```
ENAME  SAL  RANKING
BLAKE  2850     4  
CLARK  2850     4 
```

# java - Clojure - 提取整数中最后 N 位的最快方法？

> ID：10492361
> 
> 赞同：4
> 
> 时间：2012-05-08T04:01:13.850
> 
> 标签：java, clojure

我需要一个提取整数中最后 N 位的函数（N < 32，因此结果始终为正）。我自己似乎无法解决。

我的第一种方法是左移 (32 - n) 位，然后右移 (32 - n) 位，但是 Clojure 将第一个结果转换为 BigInt，因此我无法摆脱前 32-n 位。

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:29:37.393

我认为你想要的是使用按位的东西，例如：

```
(defn low-bits [x n]
    "Get the lowest n bits of x"
    (bit-and x (unchecked-dec (bit-shift-left 1 n)))) 
```

取`n 8`，`(bit-shift-left 1 8)`给我们 256，然后`(dec 256)`给我们 255，这是一个设置了最低 8 位和高位 0 的数字。然后按位和会给我们一个数字，其中最低 8 位是它们所在的位置`x`，而高位是都是0（这是你想要的我想？）。

免责声明：这可能是我编写的第四个 Clojure 函数，所以我也只是在学习......

# java - 两个或多个安卓设备之间的 wifi 聊天

> ID：10492362
> 
> 赞同：4
> 
> 时间：2012-05-08T04:01:28.107
> 
> 标签：java, android, network-programming, wifi, chat

我想开发一个聊天应用程序来使用 wifi 网络在两个或多个 android 设备之间聊天。应用程序应该能够相互发送或接收字符串。我有在 pc 和 android 之间使用蓝牙网络的经验。任何人都可以给我任何建议或正确的方向。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T05:26:46.237

您可以在`Android Version 4.0`.There 中的两个 android 设备之间聊天。有一个名为 ' `Wifi P2P`' 的 API。可以从这里获得更多信息：

[http://developer.android.com/reference/android/net/wifi/p2p/package-summary.html](http://developer.android.com/reference/android/net/wifi/p2p/package-summary.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:40:37.473

如果您正在考虑连接**同一 WiFi AP/路由器下的设备**并且**不设置任何服务器**，那么我建议您考虑使用自 API 级别 1 以来可用的 UDP 多播：

[http://developer.android.com/reference/java/net/MulticastSocket.html](http://developer.android.com/reference/java/net/MulticastSocket.html)

UDP 不保证数据传递（可能会丢失），所以我会使用 UDP 多播进行设备发现，并为需要保证传递的数据打开 TCP 连接。TCP 侦听端口可以通过 UDP 多播广播，以便每个人都可以通过 TCP 相互连接。（可能有 3rd 方工具可以为你做这些低级的事情。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:14:14.767

也许[XMPP](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)会有所帮助，google talk 使用相同的协议。

> 可扩展消息和状态协议 (XMPP) 是一种用于实时通信的开放技术，它支持广泛的应用程序，包括即时消息、状态、多方聊天、语音和视频通话、协作、轻量级中间件、内容联合、和 XML 数据的通用路由。

你需要做的事情：
1.你需要一**台服务器计算机**来运行**XMPP服务器**，有很多[开源实现](http://xmpp.org/xmpp-software/servers/)。
2.你需要在你的安卓设备上运行一个**XMPP客户端，****安卓平台**上也有很多[开源的实现](http://xmpp.org/xmpp-software/clients/)。

# ios - 难以换行

> ID：10492364
> 
> 赞同：2
> 
> 时间：2012-05-08T04:01:34.710
> 
> 标签：ios, uilabel, word-wrap, sizetofit

我使用以下代码在IOS中添加文本

```
//Set up label frame
UILabel *tempLabel = [[UILabel alloc]initWithFrame:CGRectMake(100, 10, 210, 80)];
self.answer_text_label = tempLabel;
[tempLabel release];    
[self.preview_answer_container addSubview:self.answer_text_label];

//Populate label with text
self.answer_text_label.text = self.answer.text;
self.answer_text_label.numberOfLines = 4;
self.answer_text_label.lineBreakMode = UILineBreakModeWordWrap;
[self.answer_text_label sizeToFit]; 
```

但是，我得到的结果是这样的，文本似乎向右溢出，而不是按照我的标签设置“CGRectMake（100、10、210、80）”中规定的那样停留在框架内

![在此处输入图像描述](../Images/9e2f208296207f4132f4943c6acf549d.png)

如果我更改为`self.answer_text_label.numberOfLines = 0`. 但这对我不起作用，因为我需要将文本限制在我规定的标签框架内。

有什么办法可以包装文本并只保留 4 行？

编辑：

尝试建议的代码

```
self.answer_text_label.text = self.answer.text;
[self.answer_text_label sizeToFit];
CGRect labelRect = self.answer_text_label.frame;
labelRect.origin.y = CGRectGetMaxY(labelRect);
labelRect.size = self.answer_text_label.frame.size;
self.answer_text_label.frame = labelRect; 
```

结果如下。似乎没有解决我的问题

![在此处输入图像描述](../Images/5642fca98b14d8334ddba0da62363973.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:33:01.407

尝试明确设置框架 -

```
[self.answer_text_label sizeToFit];
CGRect labelRect = self.answer_text_label.frame;
labelRect.origin.y = CGRectGetMaxY(labelRect);
labelRect.size = self.answer_text_label.frame.size;
self.answer_text_label.frame = labelRect; 
```

编辑 - 不需要使用这个，只需使用以下 - 删除这些代码只是在下面使用，没有框架的其他属性，也删除 sizeToFit -

```
self.answer_text_label.numberOfLines = 4;
self.answer_text_label.lineBreakMode = UILineBreakModeWordWrap; 
```

对于垂直对齐 - （使用上面的代码行，也使用它，并且不要使用大小来适应）

```
 CGSize textSize = [self.answer_text_label.text sizeWithFont:self.answer_text_label.font 
                                constrainedToSize:CGSizeMake(self.answer_text_label.frame.size.width, MAXFLOAT)
                                    lineBreakMode:self.answer_text_label.lineBreakMode];
self.answer_text_label.frame = CGRectMake(20.0f, 20.0f, textSize.width, textSize.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T04:46:44.637

在 iOS 6 及更高版本中，使用`NSLineBreakByWordWrapping`，而不是 UILineBreakModeWordWrap。

```
self.answer_text_label.lineBreakMode = NSLineBreakByWordWrapping; 
```

# ios - 如何实现清晰渲染的旋转 UILabel？

> ID：10492367
> 
> 赞同：0
> 
> 时间：2012-05-08T04:01:55.113
> 
> 标签：ios, core-animation, uilabel

我正在尝试显示旋转的文本。UILabel 作为子视图添加到 UIImageView 上。UIImageView 有一个通过 CGAffineTransformMakeRotation(M_PI/4.0) 创建的变换。UILabel 的文本呈现相当模糊的cf。标题标签（在屏幕截图中，蓝色背景“What's ...”）。

你知道我怎样才能使旋转的文本清晰呈现吗？

我已经尝试过使用基于积分的框架（这无关紧要，因为它会被旋转）、不清晰的背景颜色，并将标签设置为 opaque=YES。还是很模糊。

谢谢！

![在此处输入图像描述](../Images/9ef6a1f4989ae5643a6b7d026cf76028.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:13:57.647

问题是您的标签在框架的原点或旋转中以半像素呈现。检查旋转后的帧原点，或尝试将其旋转 M_PI/4.1（4.2、4.3、4.4、4.5 - 甚至测试值如 4.05 4.15..），直到它正常渲染。还要检查 UIImageView 中 UILabel 的框架，例如可以在半像素原点添加。{0.5, 0.5} 什么的..

# android - 如何制作用于将表情符号放入我的编辑文本的 UI？

> ID：10492368
> 
> 赞同：0
> 
> 时间：2012-05-08T04:01:56.117
> 
> 标签：android, user-interface, android-edittext

我有一个笔记应用程序，因为我必须将表情符号放入光标指向的编辑文本中，为此我必须将表情符号列表放在顶部或固定到任何地方以在编辑文本 Activity 中进行模拟器。我怎么设计用于获取表情符号的 UI（png 列表，显示为网格视图）。或者如果有任何想法让我知道？任务是：在输入编辑文本时，放置光标以插入表情符号并打开任何图钉（按钮）以显示表情符号列表并在一个表情符号上进行选择，并且必须放置在我的文本中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:28:06.260

您可以将笑​​脸图像转换为 spannableText ，而您必须在此处将其设置为 edittext 代码提示：

```
public SpannableStringBuilder addSmily(Drawable dd) {

    happySmileys.setBounds(0, 0, dd.getIntrinsicWidth(),
            dd.getIntrinsicHeight());
    SpannableStringBuilder builder = new SpannableStringBuilder();
    builder.append(":-)");
    builder.setSpan(new ImageSpan(dd), builder.length()
            - ":-)".length(), builder.length(),
            Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    return builder;
} 
```

上面的函数返回一个 spannableString ，你可以这样设置

```
 Drawable dd=getResources().getDrawable(R.id.ursmily_icon);  
 edittext.settext(addSmily(dd)); 
```

享受编码！

[这是将 spannable 添加到 Edittext](https://github.com/krishnalalstha/Spannable)的参考项目

# java - 覆盖方法并使其行为静态

> ID：10492372
> 
> 赞同：0
> 
> 时间：2012-05-08T04:02:13.320
> 
> 标签：java, oop, design-patterns

我有一个无法更改的现有框架，它读取 2 个属性

*   `ClassA=somepackage.AnImplementationOfInterfaceA`
*   `ClassB=somepackage.AnImplementationOfInterfaceB`

它按顺序调用`public methodA`a `new ClassA()`, `public methodB`on a`new ClassB()`

我想做一个`class C`实现接口 A、B 并提供钩子`methodC1`，`methodC2`用于`class D`覆盖（`methodA`&`methodB`包含很多样板和复杂的实现 - `methodC1`&`methodC2`将封装业务逻辑）。那么我的属性将是

*   `ClassA=somepackage.classD`
*   `ClassB=somepackage.classD`

问题是实现类 D 的人可能会想写如下内容：

```
class D extends class C
{
   private int foo; //must be non-static due to multi-threaded new Class D() calls going on
   int methodC1() {this.foo = read number from network}
   methodC2(int x) {y = this.foo;} //methodC2 is always called after methodC1

   //methodA, methodB implementation inherited from C
} 
```

但这不会按预期工作，因为框架实际上会在`class D`每次调用之前创建一个新对象`methodA`，`methodB`因此不能依赖使用“this”引用。

定义`methodC1`, `methodC2`as`static`也行不通，因为调用与`methodC1`in 中的实现相关`C`，而不是与 in 中的覆盖相关联`D`。

当真正应该写的是：

```
class D extends class C
{
   int methodC1() {return number from network;}
   methodC2(int x) {y = x}  //here y is using the return value of methodC1

   //methodA, methodB implementation inherited from C
} 
```

我也*只* `methodC1`希望可以被覆盖，`methodC2`即从事 D 工作的程序员不能乱用`methodA`

理想的设计应该有

*   属性仅指一类
*   `methodC1`,`methodC2`在那个班级

挑战总结

*   没有，`this`_`methodC1``methodC2`
*   做不出`methodC1`来`methodC2` `static`
*   属性只需要一个可实例化的类

我如何设计这个框架？这甚至可以解决吗？您可以更改 , 的`methodC1`签名`methodC2`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:26:29.537

作品！建立一个你可以接受人们扩展的界面。

此类将包含 MethodD1 和 D2 的逻辑，而对于其他所有内容，只需简单调用当前现有类中的其他方法即可。人们将无法修改调用以更改底层逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:30:21.830

静态方法不能被覆盖！

如果子类定义了与超类中的静态方法具有相同签名的静态方法，则子类中的方法会隐藏超类中的方法。隐藏和覆盖之间的区别具有重要意义。

# asp.net - asp.net 2.0 ajax 框架在输入字符串有 '\,' 时抛出 System.ArgumentOutOfRangeException 错误

> ID：10492373
> 
> 赞同：1
> 
> 时间：2012-05-08T04:02:21.343
> 
> 标签：asp.net, ajax

使用 asp.net 2.0 框架时出现此错误。我在网上搜索了但没有找到答案，提前谢谢大家。以下是说明。

```
<sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
            <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
                <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
            </sectionGroup>
        </sectionGroup>
    </sectionGroup> 
```

上面是 Web.config 中的配置部分。使用`[AjaxMethod(HttpSessionStateRequirement.ReadWrite)]`属性定义服务器端的ajax方法。方法如下：`public virtual AjaxResult Add(string[] values, string[] valueParameters, int editMode)`。当其中一个`string`值`string[]`包含 \, 或 ,\ 时会失败，服务器获取的参数被 ',' 分成两部分，如果是 'H\,H' 则变为 'H\'和 ''，如果是 'H,\H' 它变成了 '' 和 '\H'。这是消息：

> "{'IsValid':false,'Values':[],'Message':'索引超出了数组的范围。','UnformattedMessage':null,'Type':6}"

我已经调试过了，Ajax框架通过`'"' + o.replace(/(["\\])/g, '\\$1') + '"'`正则表达式将输入字符串转换成Json。例如，

```
"DSF\,DF" 
```

将被翻译成

```
"DSF\\,DF" 
```

我认为这很好，但 asp.net 框架无法正确识别它。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:57:23.770

你确定你有正确的版本吗？看到这个... [http://www.asp.net/ajax/documentation/live/ConfiguringASPNETAJAX.aspx](http://www.asp.net/ajax/documentation/live/ConfiguringASPNETAJAX.aspx)我希望它会帮助你

# php - 通过将现有数组中的键剪切到新数组来创建新数组

> ID：10492375
> 
> 赞同：3
> 
> 时间：2012-05-08T04:02:37.007
> 
> 标签：php

我想获取一个数组并从中剪切一些键（不按顺序）并从中创建一个新数组。

我已经使用该`array_shift()`函数进行了操作，但是到了需要跳过下一个键然后再次执行 array_shift 的地步。

我该如何从逻辑上解决这个问题？

我的阵列

```
Array
(
    [api] => Array
        (
            [0] => system
            [1] => assets
            [2] => theme
            [3] => resources
            [4] => api
            [5] => xml
            [6] => json
            [7] => jsonp
            [8] => request
        )

    [class] => Array
        (
            [name] => authentication
            [abbr] => auth
        )

    [directories] => Array
        (
            [application] => application
            [mvc] => Array
                (
                    [model] => model
                    [view] => view
                    [controller] => controller
                )

            [assets] => Array
                (
                    [folder] => assets
                    [css] => css
                    [img] => img
                    [js] => js
                )

            [config] => config
        )

    [smarty] => Array
        (
            [security] => on
            [delimiter] => Array
                (
                    [left] => {!
                    [right] => !}
                )

            [template] => Array
                (
                    [header] => header
                    [footer] => footer
                    [extension] => tpl
                )

        )

    [version] => Array
        (
            [component] => Array
                (
                    [0] => Array
                        (
                            [name] => CMS
                            [version] => 1.0
                        )

                    [1] => Array
                        (
                            [name] => TinyMCE jQuery Package
                            [version] => 3.5
                        )

                    [2] => Array
                        (
                            [name] => jQuery
                            [version] => 1.7.2
                        )

                )

            )
) 
```

我需要用它们的键创建一个新数组：`api`,,,`class``version`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:08:28.283

如果它只是您需要的那 3 个键：

```
$newArray = array(
    "api" => $oldArray["api"],
    "class" => $oldArray["class"],
    "version" => $oldArray["version"]
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:12:42.180

创建要从一个数组移动到另一个数组的显式键列表。循环遍历该列表，从一个列表中提取并添加到另一个列表中。然后从原始数组中删除旧副本：

```
// Original Array, and empty Array
$array = array( 'api' => 1, 'class' => 2, 'fizz' => 3, 'buzz' => 4 );
$newAr = array();

// For each key we'd like to keep
foreach ( array( 'api', 'class' ) as $key ) {
  // (Re)move the value from the original array to our new array
  $newAr[$key] = $array[$key]; unset( $array[$key] );
}

// Show the contents of the new array
print_r( $newAr ); 
```

立即在线试用：[http ://codepad.org/7iYG4iVB](http://codepad.org/7iYG4iVB)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:05:07.343

有[array_slice()](http://php.net/array_slice)可以让你“切片”出数组的一部分。该部分可以是单个元素，也可以是一系列元素。基本上， slice 函数可以让你对数组进行 hack 'n 切割，比如 substr() 让你 hack 'n 切割一个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T04:06:31.590

```
$keys = array(1, 5, 'foo');

$new = array();
foreach ($keys as $key) {
    $new[$key] = $old[$key];
    // or maybe just $new[] = $old[$key];
    unset($old[$key]);
} 
```

有更短的方法可以做到这一点，但我认为你可以理解它是如何工作的。

编辑 - 这是一个更短的方法

```
$keys = array(1, 5);
$new = array_intersect_key($old, array_flip($keys)));
$old = array_diff_key($old, array_flip($keys))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T04:09:38.213

这似乎太简单了：

```
$new_array = array( 
    'api' => $old_array['api'],
    'class' => $old_array['class'],
    'version' => $old_array['version']
); 
```

然后执行 a`var_dump( $new_array);`以查看它是否包含所需的输出。

# python - 日历程序帮助（字符串变量）

> ID：10492377
> 
> 赞同：0
> 
> 时间：2012-05-08T04:02:55.477
> 
> 标签：python, string, function, variables, calendar

我最近在这个网站上注册了，因为我真的被困在任务中，我需要创建一个程序，用户输入一个月，程序会显示那个月有多少天。用户还必须输入年份，以便程序可以检查它是否是闰年，以防用户输入 2 月份。

这是我到目前为止提出的编码：

```
 def get_year():
    year = raw_input("Please enter the year: ")
    return year

def get_month():
    month = raw_input("Please enter the month: ")
    return month

def leap_year(year):
    if year % 4 == 0:
        return true
    else:
        return false

def get_days(month):
    if month == "january":
        print "31 days"
    elif month == "february" and leap_year == true:
        print "29 days"
    else:
        print "28 days"
    if month == "march":
        print "31 days"
    elif month == "april":
        print "30 days"
    elif month == "may":
        print "31 days"
    elif month == "june":
        print "30 days"
    elif month == "july":
        print "31 days"
    elif month == "august":
        print "31 days"
    elif month == "september":
        print "30 days"
    elif month == "october":
        print "31 days"
    elif month == "november":
        print "30 days"
    elif month == "december":
        print "31 days"
    else:
        print

def main():
    user_year = get_year()
    user_month = get_month()
    leap_year(user_year)
    get_days(user_month)

main() 
```

无论如何，很明显我的 get_days 函数中有一个错误，只是我不确定如何编写代码，以便程序知道用户输入了一个月，例如一月或三月。我猜输入必须是一个变量，并且由于每个月都是一个字符串，因此需要一个变量字符串。但我可能完全错了。

我对 python 很陌生（现在正好 2 周的假期和学校工作的编程）所以我不太确定 python 编程的许多细节，所以如果有人可以在正确的方向上帮助我，那就是非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:10:14.353

if-elif 在二月份被打破。细微的变化是继续使用 if-elif 逻辑的不间断模式：

```
def get_days(month):
    if month == "january":
        print "31 days"
    elif month == "february" and leap_year:
        print "29 days"
    elif month == "february" and not leap_year:
        print "28 days"
    elif month == "march":
        print "31 days"
    elif month == "april":
        print "30 days"
    elif month == "may":
        print "31 days"
    elif month == "june":
        print "30 days"
    elif month == "july":
        print "31 days"
    elif month == "august":
        print "31 days"
    elif month == "september":
        print "30 days"
    elif month == "october":
        print "31 days"
    elif month == "november":
        print "30 days"
    elif month == "december":
        print "31 days"
    else:
        print 'unknown month' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:25:18.797

你有点接近。我做了一些我评论的更改。正如 Raymond Hettinger 指出的那样，你`get_days(month)`的**完全崩溃了**。

```
def get_year():
    year = raw_input("Please enter the year: ")
    return int(year) #otherwise it is a string!

def get_month():
    month = raw_input("Please enter the month: ")
    return month

def leap_year(year):
    if year % 4 == 0:
        return True
    else:
        return False

def get_days(month,leap_year): #leap_year must be passes to this function
    #This checks for "january" and "february" with leap years
    #and falls back to last option on EVERYTHING ELSE like a feb without a leap year or even a "march"
    if month == "january":
        print "31 days"
    elif month == "february" and leap_year == True:
        print "29 days"
    else:
        print "28 days"

    #this is a separate block that runs AFTER the previous block
    if month == "march":
        print "31 days"
    elif month == "april":
        print "30 days"
    elif month == "may":
        print "31 days"
    elif month == "june":
        print "30 days"
    elif month == "july":
        print "31 days"
    elif month == "august":
        print "31 days"
    elif month == "september":
        print "30 days"
    elif month == "october":
        print "31 days"
    elif month == "november":
        print "30 days"
    elif month == "december":
        print "31 days"
    else:
        print "invalid input" #so that it doesnt fail silently when I enter 2

def main():
    user_year = get_year()
    user_month = get_month()
    leap_status = leap_year(user_year) #store the leap_year status to a variable
    get_days(user_month, leap_status)  #and then pass it to a function

main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:39:34.260

我建议您使用字典，它是 python 中的内置数据类型。

```
def get_days(year, month):
    """
    take year and month ,return the days in that month.
    """
    #define a dictionary and the month is key which value is days 
    daydict = dict()    
    daydict = ['january'=31, 'february'=28, 'februaryinleapyear'=29,
                                        'march'=31, 'april'=30,
                                        'may'=31, 'june'=30,
                                        'july'=31, 'august'=31,
                                        'september'=30, 'october'=31,
                                        'november'=30, 'december'=31 ]

    try:
        if month in daydict:
            if month == 'february' and leap_year(year):     
                print daydict[februaryinleapyear] 
            else:
                print daydict[month]
        else:
            print 'The year or month you input is invalid !'
    except:
        print 'error!' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T09:29:00.780

```
 n=int(input('enter no of days in a month= '))
 #0=sunday
 #1=moday
 #2=tuesday
 #3=wednesday
 #4=thursday
 #5=friday
 #6=saturday
 d=int(input('enter the starting day of month= '))
 print('sun','mon','tue','wed','thu','fri','sat',sep='\t')
 for j in range(d):
    print (' ',end='\t')
 i=1
 while(i<=n):
    print (i,end='\t')
    if(i+d)%7==0:
      print('\t')
    i=i+1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-13T22:40:09.267

此代码要求用户输入（[更简单的代码](https://code.dee-donald.com/2017/08/13/39/)）

```
#python calendar days in month.
month= input ("Enter the month('January', ...,'December'): ")   # ask for inputs from user 

start=input ("Enter the start day ('Monday', ..., 'Sunday'): ")  

if start== "Monday" :
    num=1
elif start== "Tuesday" :
    num=0

elif start== "Wednesday" :
    num=-1

elif start== "Thursday" :
    num=-2   

elif start== "Friday" :
    num=-3 

elif start== "Sartday" :
    num=-4
elif start=="Sunday":
    num=-5

print(month)    
print("Mo Tu We Th Fr Sa Su")  #the header of the Calender

if month== "January" or month=="March" or month=="May" or month=="July" or month=="August" or month=="October" or month=="December" :

  #for month with 31 days
    for num_ in range (num,num+41,7): 
        for i in range(7):
            if num<1:
                print ('   ',end="")
            elif num>31:
                print("",end="")
            else:
                print ("{0:>2}".format(num),end="")
                if i<6 and num<31:
                    print(" ",end="") 
            num +=1
        print() 

elif month== "April" or month=="June" or month=="Septemmber" or month=="November":
   #for month with 30 days      
    for num_ in range (num,num+41,7): 
        for i in range(7):
            if num<1:
                print ('   ',end="")
            elif num>30:
                print("",end="")
            else:
                print ("{0:>2}".format(num),end="")
                if i<6 and num<30:
                    print(" ",end="") 
            num +=1
        print() 

elif month== "February" :
  # february is an exception : it has 28 days 
    for num_ in range (num,num+41,7): 
        for i in range(7):
            if num<1:
                print ('   ',end="")
            elif num>28:
                print("",end="")
            else:

                print ("{0:>2}".format(num),end="")
                if i<6 and num<28:
                    print(" ",end="") 
            num +=1
        print() 

else:
    print("invalid entry") 
```

# c# - 如何将制表符分隔的文本文件显示到 DataGridView 中，包括标题？

> ID：10492379
> 
> 赞同：1
> 
> 时间：2012-05-08T04:03:15.423
> 
> 标签：c#, winforms, .net-2.0

我有这个具有以下结构的 MS Access 表：

![在此处输入图像描述](../Images/20a53c5707e83e7052b19e7a1f767457.png)

我将数据提取到没有文本限定符的制表符分隔的文本文件中：

![在此处输入图像描述](../Images/992404798ff37ded1386b326097b7774.png)

我找到[**了这篇**](https://stackoverflow.com/questions/5639699/oledb-selecting-multiple-csvs-with-first-row-as-field-names-in-c-sharp)文章，但它不适用于制表符分隔的文件。我不知道如何将这些数据显示到 DataGridView 中，包括标题。你能帮我么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:36:50.187

```
DataGridView1.DataSource = CsvFileToDatatable(@"c:\a.csv",true);

public DataTable CsvFileToDatatable(string path, bool IsFirstRowHeader)//here Path is root of file and IsFirstRowHeader is header is there or not
        {
            string header = "No";
            string sql = string.Empty;
            DataTable dataTable = null;
            string pathOnly = string.Empty;
            string fileName = string.Empty;

            try
            {

                pathOnly = Path.GetDirectoryName(path);
                fileName = Path.GetFileName(path);

                sql = @"SELECT * FROM [" + fileName + "]";

                if (IsFirstRowHeader)
                {
                    header = "Yes";
                }

                using (OleDbConnection connection = new OleDbConnection(
                        @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + pathOnly +
                        ";Extended Properties=\"Text;HDR=" + header + "\""))
                {
                    using (OleDbCommand command = new OleDbCommand(sql, connection))
                    {
                        using (OleDbDataAdapter adapter = new OleDbDataAdapter(command))
                        {
                            dataTable = new DataTable();
                            dataTable.Locale = CultureInfo.CurrentCulture;
                            adapter.Fill(dataTable);

                        }
                    }
                }
            }
            finally
            {

            }

            return dataTable;

        } 
```

# security - 使用 AES 进行安全身份验证

> ID：10492381
> 
> 赞同：0
> 
> 时间：2012-05-08T04:03:36.113
> 
> 标签：security, authentication, aes

我正在开发一个需要发送设置的用户名和密码以及一些加密数据的应用程序。我显然不想对用户/密码组合进行硬编码，所以我认为 id 事先对组合进行加密，并且只对这些值进行硬编码。我看到的问题是我仍然必须对加密密钥进行硬编码。这将允许任何人反编译 apk，获取加密的组合和密钥，并解密组合，让他们完全访问我们的服务器。

我的问题是，我怎样才能使它真正安全？我想象的关键必须被硬编码到应用程序中，我没有看到任何解决方法。

这是我第一次使用加密，所以如果我遗漏了一些明显的东西，我很抱歉，但我做了很多研究，我什么也没看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:16:53.247

由于您提到的原因，您无法将密钥或任何东西烘焙到应用程序中。您所做的是，当应用程序首次加载时，您会注册用户/应用程序，然后它会获得您使用的随机密钥。

请注意，您必须有某种方法来阻止未购买该应用程序的用户注册。您可以为此使用他们的 gmail 帐户，或者我认为 android 支持订阅。

# knockout.js - 淘汰赛的“跨度”标签绑定问题

> ID：10492383
> 
> 赞同：4
> 
> 时间：2012-05-08T04:04:16.313
> 
> 标签：knockout.js, html

我对 Knockout 相当陌生，无法解决这个问题。

HTML 是：

```
<span data-bind="text: greetings" />
<input data-bind="value: firstname" />
<input data-bind="value: lastname" />
<span data-bind="text: greetings">Default 2</span>​ 
```

相关的JS是

```
<script type="text/javascript">
$(document).ready(function () {
    var dv = document.getElementById('divMain');
    ko.applyBindings(new Vm());
});

function Vm() {
    this.greetings = ko.observable("hello world");
    this.firstname = ko.observable("firstname");
    this.lastname = ko.observable("lastname");
};
</script> 
```

（[jsfiddle](http://jsfiddle.net/j2E9G/4/)）

问题是控件在第一个跨度标记（问候）之后没有被绑定。

但是，如果我将 span 标签包含在一些内部，`div`则绑定适用于每个控件。

这种行为常见吗？为什么超出第一个跨度的控件不会绑定？

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:21:00.403

啊，只有少数标签可以在 html 中自动关闭，如果您将文档作为 MIME 类型提供`application/xhtml+xml`，它可能会起作用...... [这个问题](https://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b)有一些很好的信息。检查[这个](http://jsfiddle.net/SbbJ2/)，你可以看到所有的 span 都是嵌套的。

[这](http://jsfiddle.net/j2E9G/)对我有用...

# javascript - jQuery MouseEnter/Leave with fadeIn() 闪烁

> ID：10492386
> 
> 赞同：0
> 
> 时间：2012-05-08T04:04:39.733
> 
> 标签：javascript, jquery, html, css, flicker

我正在使用 jquery 对网站的一部分进行编程，当您将鼠标悬停在一个按钮上时，它会隐藏一个特定的 div 并显示另一个，然后当鼠标离开时它会隐藏那个并显示原始的，它工作得很好，但是当你快速浏览按钮，它会闪烁并开始显示所有 div（不隐藏一些）

我的代码：

```
function changeAddPanelText(element, element2) {
    $(element).hover(function(){
        $("#add-content-desc1").toggle();
        $(element2).fadeIn(700);
    },

    function(){
        $(element2).toggle();
        $("#add-content-desc1").fadeIn(700);
    });
} 
```

有任何想法吗 ？谢谢

编辑：我将代码更新为当前版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:36:01.010

尝试这个

```
function changeAddPanelText(element, element2) {
    $(element).hover(function(){
        $("#add-content-desc1, element2").stop().toggle();
    }, function(){
        $("#add-content-desc1, element2").stop().toggle();
    });
} 
```

# javascript - 点击时重置 addClass

> ID：10492390
> 
> 赞同：0
> 
> 时间：2012-05-08T04:05:12.543
> 
> 标签：javascript, jquery, html, video

我敢肯定它只是改变一件事，或者添加它，但我不能让它工作。播放视频时，视频滑块顶部的图像应该会消失。然后，如果您单击另一个（它们通过缩略图链接），它将使图像弹出并淡出 agisn。

第一部分有效，但在第一次之后，它不再有效。

谁能帮我？这是[小提琴](http://jsfiddle.net/nata2ha/dp5wJ/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:15:22.723

您有一些严重的 html 和 javascript 语法错误，可能会引起一些麻烦。我在 jsfiddle 中正确缩进了您的代码，似乎您的 body 标记已损坏，并且两个额外的关闭 div 标记已断开连接。

在您的 javascript 中，在视频数组中，您错过了一个非常重要的报价。

检查这个小提琴[http://jsfiddle.net/elclanrs/dp5wJ/12/](http://jsfiddle.net/elclanrs/dp5wJ/12/)。当代码正确缩进时，通过语法突出显示很容易发现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:17:54.543

您正在重新绑定`$('#myVid').bind("ended",`......每次点击。

# node.js - 为什么 Jade 不缩进代码？

> ID：10492392
> 
> 赞同：0
> 
> 时间：2012-05-08T04:05:17.533
> 
> 标签：node.js, express, pug

我无法让 Jade 正确缩进 for 循环中的代码：

```
div.container
    - var cell = 0
    - for(var i = 0; i < results.Items.Item.length; i++)
        - if(cell == 0)
            div.row
                div.span3
                    div.cell
                        span #{results.Items.Item[i].ItemAttributes.Title}
        - else
                    div.span3
                        div.cell
                            span #{results.Items.Item[i].ItemAttributes.Title}
        - if(cell < 3)
            - cell++;
        - else
            - cell = 0 
```

else 语句中的代码不会进入 div.row，而是呈现在 div.container 下，或者与 div.row 处于同一级别。我需要 else 语句中的代码在 div.row 中呈现。我怎样才能让 Jade 做到这一点？

我想要做的是让 div.row 渲染，然后在每 4 个 div.cell （由单元格对象计数）之后渲染另一个 div.row

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:12:54.100

我相信你必须这样做：

```
div.container
    - var cell = 0
    - for(var i = 0; i < results.Items.Item.length; i++)
        div.row
            div.span3
                div.cell
                    span #{results.Items.Item[i].ItemAttributes.Title}

        - if(cell < 3)
            - cell++;
        - else
            div.row
            - cell = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:28:57.563

使用花括号“{”和“}”

```
div.container
        - var cell = 0
        - for(var i = 0; i < results.Items.Item.length; i++){
            - if(cell == 0){
                div.row
                    div.span3
                        div.cell
                            span #{results.Items.Item[i].ItemAttributes.Title}
            - }
            - else{
                        div.span3
                            div.cell
                                span #{results.Items.Item[i].ItemAttributes.Title}
            - }
            - if(cell < 3)
                - cell++
            - else
                - cell = 0
        - } 
```

# parsing - 解析用户名/密码/路径具有特殊字符如@、/的ftp url

> ID：10492393
> 
> 赞同：5
> 
> 时间：2012-05-08T04:05:23.197
> 
> 标签：parsing, url, ftp, special-characters

一般ftp url格式为`ftp://user[:pass]@ip[:port]/path`

但现在我得到了这个字符串：

```
ftp://dude:1.1.1.1@1.1.1.1/@1.1.1.1/fml 
```

这似乎是模棱两可的，因为解析结果可以是：

1.  `password=1.1.1.1, path=@1.1.1.1/fml`
2.  `password=1.1.1.1@1.1.1.1/, path=fml`

我应该只告诉客户这是非法的，还是有更友好的方式来处理它？谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-16T13:50:56.813

用户名和密码中的特殊字符

如果您的远程服务器需要身份验证，您可以在输入 url 字符串中包含用户名和密码。用户名和密码应具有以下特殊字符百分比编码：

] [ ? /<~#`！@ $ % ^ & * ( ) + = } | : " ; ' , > { 空格

例子：

```
http://example.com/path/to/input.avi
https://example.com/path/to/input.mov
ftp://example.com/path/to/input.mp3
sftp://example.com/path/to/input.3gp
https://s3.amazonaws.com/bucket-name/input.mpeg
s3://bucket-name/input.mpeg (shorthand for the full HTTP S3 url)
Examples (with username "user" and password "pass!word"):

http://user:pass%21word@example.com/path/to/input.avi
https://user:pass%21word@example.com/path/to/input.mov
ftp://user:pass%21word@example.com/path/to/input.mp3
sftp://user:pass%21word@example.com/path/to/input.3gp
ftp://user:pass%21word@example.com/path/to/input.mp3
Some servers require the username include your domain name (username "user@example.com" and password "pass!word"):

http://user%40example.com:pass%21word@example.com/path/to/input.avi
https://user%40example.com:pass%21word@example.com/path/to/input.mov
ftp://user%40example.com:pass%21word@example.com/path/to/input.mp3
sftp://user%40example.com:pass%21word@example.com/path/to/input.3gp
ftp://user%40example.com:pass%21word@example.com/path/to/input.mp3 
```

# asp.net-mvc - 在带有 Razor 的 N2CMS MVC 中，如何添加控制面板和区域？

> ID：10492394
> 
> 赞同：2
> 
> 时间：2012-05-08T04:05:31.730
> 
> 标签：asp.net-mvc, razor, n2

如果您使用带有 ASP.NET 视图引擎的 N2CMS MVC，您将使用以下代码将控制面板和区域添加到页面。

```
<n2:SlidingCurtain ID="sc" runat="server">
    <n2:ControlPanel runat="server" EnableEditInterfaceIntegration="false" />
</n2:SlidingCurtain>
<n2:DroppableZone ID="Zone2" ZoneName="Left" runat="server" /> 
```

这甚至可以使用 Razor 视图引擎来启用拖放区域吗？如果是这样，语法是什么？

我努力了：

```
@{ Html.DroppableZone("Left").Render(); }
@{ Html.RenderZone("Left"); } 
```

上面的代码渲染了区域，但我不确定如何启用控制面板或如何调用拖放式区域编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:00:49.200

原来我很接近。

将以下内容添加到 _Layout.cshtml 启用控制面板。

```
@{ Html.ControlPanel().Render(); } 
```

并且使用 DroppableZone 启用了拖放目标。

```
@{ Html.DroppableZone("Left").Render(); } 
```

添加适当的命名空间以确保扩展方法可用。

```
@using N2.Web.Mvc.Html; 
```

# android - 如何显示附近的所有位置？

> ID：10492397
> 
> 赞同：-1
> 
> 时间：2012-05-08T04:05:50.400
> 
> 标签：android

我必须在列表视图中显示设备当前可用的所有附近位置，假设我的应用程序安装在其中的设备位于诺伊达位置，那么我想在列表视图中显示诺伊达的所有附近位置。我在谷歌上搜索但无法找到任何需要的教程请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:05:24.293

您可以使用[Google place API](https://developers.google.com/maps/documentation/places/#PlaceSearches)。另请参阅以下内容：
[Android 开发 - 第 1 部分：使用 Google 的 Places API 开发引人注目的基于位置的移动应用程序](http://blog.brianbuikema.com/2010/08/android-development-part-1-using-googles-places-api-to-develop-compelling-location-based-mobile-applications/)
[Android 开发 - 第 2 部分：使用 Google 的 Places API 开发引人注目的基于位置的移动应用](http://blog.brianbuikema.com/2010/08/android-development-part-2-using-googles-places-api-to-develop-compelling-location-based-mobile-applications/)程序

# ios - 使 Flixel（iOS 端口）支持视网膜图形

> ID：10492398
> 
> 赞同：0
> 
> 时间：2012-05-08T04:06:13.960
> 
> 标签：ios, retina-display, flixel

如果您熟悉 Flixel 游戏引擎，请在此处开源： [https ://github.com/ericjohnson/canabalt-ios/tree/master/flixel-ios](https://github.com/ericjohnson/canabalt-ios/tree/master/flixel-ios)

您将如何添加对视网膜图形的支持？像视网膜大小的纹理。

我尝试添加@2x atlas pngs，它们似乎已加载，但我猜偏移量将不正确，如 atlas plist 中指定的那样。使用正确的偏移量更改 plist（为视网膜设备加载视网膜图集）肯定会正确加载图形，但纹理本身通常显示太大，并且似乎会出现其他问题。

进度更新：

*   如上所述，我正在为高分辨率图形创建单独的纹理图集 - 我想这意味着我需要拥有一整套高分辨率图形（或根本没有）以使事情变得简单。这使得图形加载正确（或者如果使用lowres atlas plist，偏移量当然不正确）

*   在创建 FlxSprite:s 时，我不使用速记静态创建器，而是使用 init* 构造器，使用设备的比例指定 modelScale 参数（对于视网膜设备将为 2.0，对于其他设备为 1.0）。这样，无论视网膜屏幕与否，图形都会在屏幕上以正确的尺寸显示。

剩下的就是让视网膜版本使用正确的分辨率，因为在某处纹理本身似乎缩小了，然后再次调整大小，产生模糊、不正确的效果——而不是原始的高分辨率图像。我猜最后一个罪魁祸首是在 SemiSecretTexture 类的某个地方......

再次更新进度：

*   我可能只是上面错了。我想我知道该怎么做。无需将modelScale设置为2.0...我可能会整理细节并稍后提供答案:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:56:41.847

我想没有直接的方法可以做到这一点，但是当你实例化从 FlxGame 派生的类时，不要在缩放参数中使用 YES。对于初学者。然后你必须为视网膜和非视网膜加载不同的图集。但是，不确定从那里支持 iPad 会发生什么。然后在为 FlxSprites 加载纹理时，您需要指定“设备比例”，对于视网膜设备，该比例为 2.0 - 从 [UIScreen 比例] 获取。这将使视网膜和非视网膜对 FlxSprite 有好处。然后 FlxTileblock（可能还有其他类）是另一个我还没有解决的故事。

# javascript - 使用 Chrome 和 Safari 扩展突出显示 URL 栏

> ID：10492399
> 
> 赞同：5
> 
> 时间：2012-05-08T04:06:17.830
> 
> 标签：javascript, google-chrome, safari, google-chrome-extension, safari-extension

是否可以使用 Google Chrome 扩展程序或 Safari 扩展程序突出显示 URL 栏（将焦点设置到位置栏）？

使用 Firefox 扩展，可以像这样突出显示 URL 栏：

```
var addressBar=document.getElementById('urlbar');
addressBar.focus();
addressBar.select(); 
```

我不确定 Chrome 和 Safari 中是否有类似的功能。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T07:33:28.840

Firefox 在其插件和扩展程序中允许访问浏览器的“chrome”（页面周围的 UI 内容），这使得这成为可能，尽管我不确定您提到的 api。

然而，谷歌浏览器清楚地表明它在浏览器的 chrome 中暴露于扩展程序，并且仅通过`browser actions`和提供访问权限`page actions`。此外，您可以使用 HTML5 `Desktop Notifications`，`Context Menus`并从浏览器`Omnibox`中获得**更多**。

但恐怕您无法从 Chrome 明确拒绝通过 javascript 或 Extensions 访问的扩展程序（或其他方式）访问地址栏。

您最多可以做的是向用户指出按下`Ctrl+L`将使他们进入浏览器的地址栏，或者如果您想重定向用户，您可以使用`window.location.href = 'https://stackoverflow.com'`.

# objective-c - 如何触发 mapView:didSelectAnnotationView

> ID：10492401
> 
> 赞同：3
> 
> 时间：2012-05-08T04:06:28.970
> 
> 标签：objective-c, mkmapview

我是 iPhone 开发的新手。我一直在阅读有关如何使谷歌地图注释标注窗口接受换行符的几个问题。我读过的每个教程都要求我触发该`mapView:didSelectAnnotationView`方法。但我不知道如何触发它。我尝试过的事情包括

*   将该方法放在扩展 UIViewController 的 MapViewController.m 文件中
*   将该方法放在扩展 MKMapView 的 MapView.m 文件中，然后让我的故事板中的 Mapview 元素将其引用为要使用的类

关于 xcode、objective c 和 iphone 开发的东西太多了，我不明白，所以我不知道我的问题出在哪里。

目前，我的地图确实在所需位置绘制了我想要的标记。在开始自定义调出框之前，我只需要了解如何触发 `mapView:didSelectAnnotationView`and函数。`mapView:viewForAnnotation`

有没有人有关于如何触发这些功能的分步说明？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T04:30:39.537

## 一点背景

需要注意的几点：

1.  你不打电话`mapView:didSelectAnnotationView`。MKMapView 在它的委托上调用该函数。换句话说，当你设置一个 MKMapView 时，你告诉它：“嘿，听着，任何时候你需要告诉我地图上发生了什么，去告诉这个人，他会为你处理它们”。那个“家伙”是委托对象，它需要实现`mapView:didSelectAnnotationView`（这也是为什么它的名字是“did select”，即它已经发生了，而不是“select”）。对于一个简单的情况，委托通常`UIViewController`是拥有 MKMapView 的人，这就是我将在下面描述的内容。

2.  当用户点击您的一个注释时，该方法将被触发。因此，这是开始自定义当他们点击注释视图（例如更新选择）时应该发生的事情的好地方。

3.  但是，如果您想自定义要显示的注释，这不是您想要的，这听起来像是您实际想要的。[为此，在同一手册页](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intf/MKMapViewDelegate)的前几段中，有一种不同的方法：`mapView:viewForAnnotation`. 因此，如果您发现这`mapView:didSelectAnnotationView`不是您想要的，请替换此方法。

## 你可以做什么

如果您到达带有标记的地图，我猜您至少有： * 一个视图控制器（扩展自`UIViewController`, 和 *`MKMapView`您已添加到该视图控制器的视图中的`mapView`

您要触发的方法被定义为`MKMapViewDelegate`协议的一部分。最简单的方法是：

*   让你的 UIViewController 成为你 MKMapView 的代表

    *   在代码中，比如在你的`viewDidLoad`，`MapViewController.m`你可以做的`mapview.delegate = self`，或者
    *   在 Interface Builder 中，您可以将连接从 MKMapView 委托属性拖到文件的所有者
*   然后，在你的 UIViewController 上定义一个名为 的方法`mapView:didSelectAnnotationView`，就像协议一样在你的`MapViewController.m`文件中声明它：

    ```
    - (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view {
        // whatever you need to do to your annotation and/or map
    } 
    ```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T04:29:22.063

`mapView:didSelectAnnotationView`是地图视图的委托方法，您可以在这里阅读： [MKMapViewDelegate 协议参考](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html)

您不需要调用它，地图视图将“自行”调用它并将其发送到注册为其委托的每个视图/视图控制器。

**你需要做什么**

基本上，您需要在 .h 文件中添加 MKMapViewDelegate，如下所示：

```
@interface someViewController : UIViewController  <MKMapViewDelegate> 
```

然后在 .m 文件中，实例化地图视图后，您应该添加：

```
mapView.delegate = self;//were self refers to your controller 
```

从这一点开始，您的控制器将能够从地图视图“接收消息”，这是您可以在我链接到的 MKMapViewDelegate 参考中看到的方法。

因此，要实现 mapView:didSelectAnnotationView 您需要在 .m 文件中添加

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view{
     //if you did all the steps this methosd will be called when a user taps the annotation on the map. 
 } 
```

**怎么了**

在后台发生的事情是：

1.  地图视图有一个处理 AnnotationView 触摸事件的方法（Apple 编码）。
2.  当一个触摸事件发生时，它会向它的所有代表发送一条“消息”，说“嘿，一个用户在这张地图上**选择了注释视图**，用它做任何你需要的事情”。通常它看起来像这样：

    ```
     [self.delegate mapView:someMapView didSelectAnnotationView:someAnnotationView]; 
    ```

3.  然后将自己分配为委托并实现该方法的每个视图/控制器都将调用此方法。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T12:13:25.733

```
Place *place = [[Place alloc] init];
PlaceMark *placeMark = [[PlaceMark alloc] initWithPlace:place];
[self.mapView selectAnnotation:placeMark animated:YES]; 
```

# java - Java - Android 编程 - 循环失败

> ID：10492403
> 
> 赞同：-2
> 
> 时间：2012-05-08T04:06:35.023
> 
> 标签：java, android

> **可能重复：**
> [Java / Android 编程 - 循环失败](https://stackoverflow.com/questions/10492182/java-android-programming-loop-fail)

我想做的事：每小时敬酒一次。问题出在哪里：while 循环仅在第一次执行时才具有适当的间隔。第二次没有添加吐司之间的间隔。请注意，while 循环中包含的代码正在调试并且运行良好。唯一的问题是祝酒之间的延迟。

```
 if (SelectedOption == 1) {
    int count = 1;
    while (count <= 10) {               
         final Handler handler = new Handler();
         Timer t = new Timer();
         t.schedule(new TimerTask() {
             public void run() {
                handler.post(new Runnable() {
                    public void run() {
                    db.open();
                    String fact = "";
                    fact = db.getRandomEntry();
                    Context context = getApplicationContext();
                    CharSequence text = fact;
                    int duration = Toast.LENGTH_LONG;
                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show();
                    db.close();
               }
               });
          }
      }, 3600000);
      count++;
   }
    } else if (SelectedOption == 2) 
            { ... // Something similar using different approach } 
```

# spotify - 防止在 URI 链接单击时播放歌曲

> ID：10492405
> 
> 赞同：0
> 
> 时间：2012-05-08T04:06:36.630
> 
> 标签：spotify

我正在开发一个 Spotify 应用程序，我希望用户能够单击曲目名称并链接到曲目页面，就像在其他 Spotify 应用程序中一样。不过，我想阻止歌曲开始播放。

SoundDrop 似乎可以做到这一点。您可以单击曲目名称，歌曲不会中断 SoundDrop 的播放。

我不确定如何实现这种替代行为。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:23:34.670

The Apps API uses standard JavaScript stuff, so if you attach a handler to the track link and use `e.preventDefault()`, that should prevent Spotify playing the track and you can then do your own custom handling.

More discussion on `e.preventDefault()` is here: [event.preventDefault() vs. return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

# java - ConnectTimeout 和 ReadTimeout 无限时出现 SocketTimeoutException？

> ID：10492406
> 
> 赞同：0
> 
> 时间：2012-05-08T04:06:47.080
> 
> 标签：java, android, httpurlconnection, socket-timeout-exception

> **可能重复：**
> [即使连接超时和读取超时设置为默认值（无限），仍接收请求超时？](https://stackoverflow.com/questions/9986712/receiving-request-timeout-even-though-connect-timeout-and-read-timeout-is-set-to)

我尝试连接到 Web 服务并`SocketTimeoutException`在大约 20 秒后收到。托管 Web 服务的 Tomcat 服务器已关闭，因此这`Exception`是意料之中的。但是，我没有设置 ConnectTimeout 和 ReadTimeout 的值。根据文档，这两个的默认值是无限的。

一种可能性是我尝试连接的服务器有自己的超时。但是当我的朋友尝试使用 iOS 连接到它时，他的连接在大约 1 分 15 秒后超时。如果服务器是发出超时的服务器，那么我们的连接应该几乎同时超时。请注意，他也在使用 iOS 的默认超时时间。

*   当我的连接和读取超时设置为无限时，为什么我的套接字这么早就超时了？
*   套接字超时与连接和读取超时是否不同？如果是这样，它有什么不同？
*   如何知道我的套接字超时值？我正在使用 HttpURLConnection。
*   有没有办法设置套接字超时？如何？

下面是我的代码片段：

```
httpURLConnection = (HttpURLConnection) ((new URL("http://www.website.com/webservice")).openConnection());
httpURLConnection.setDoInput(isDoInput);
httpURLConnection.setDoOutput(isDoOutput);
httpURLConnection.setRequestMethod(method);

try
{
    OutputStreamWriter writer = new OutputStreamWriter(httpURLConnection.getOutputStream());
    writer.write("param1=value1");
    writer.flush;
}catch(Exception e)
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:16:04.483

> 当我的连接和读取超时设置为无限时，为什么我的套接字这么早就超时了？

请代码。

> 套接字超时与连接和读取超时是否不同？如果是这样，它有什么不同？

`SocketTimeoutException`是读取超时。

> 如何知道我的套接字超时值？我正在使用 HttpURLConnection。

`HttpURLConnection.getReadTimeout()`; 也`HttpURLConnection.getConnectTimeout()`。

> 有没有办法设置套接字超时？如何？

`HttpURLConnection.setReadTimeout().`

您已经在[原始帖子](https://stackoverflow.com/questions/9986712/receiving-request-timeout-even-though-connect-timeout-and-read-timeout-is-set-to)中引用了所有这些方法。你为什么在这里问他们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:14:18.353

最后，我找到了导致我超时的原因！事实证明，确实是服务器导致了我的超时。一开始我对此表示怀疑，因为我在使用 iOS 时收到了超过 1 分钟的不同超时。

所以这里是：我的 Tomcat 服务器的操作系统是 Windows。Windows 未应答连接的默认重试次数为 2。因此，当您第一次尝试连接失败时，您仍有 2 次重试。重试都是在内部完成的。我不确定每次重试的时间是如何计算的，但基本上是 3 + 6 + 12 = 21 秒。

*   第一次重试 = 3 秒
*   第二次重试 = 6 秒
*   第三次重试 = 12 秒

第三次重试后，您的连接将被切断。此外，到那时，您已经等了 21 秒。

# java - 我想将布尔数组中的所有值设置为 false 而不重新初始化它

> ID：10492409
> 
> 赞同：7
> 
> 时间：2012-05-08T04:06:59.977
> 
> 标签：java, arrays, boolean

```
 public boolean used[] = new boolean[26]; 
```

这就是我所拥有的，而且效果很好。我知道默认情况下它们都将设置为 false。但是，由于我的应用程序使用了一段时间，其中一些更改为“true”。（这很好，因为这是我的代码应该做的）。

我正在尝试创建一个“重置”按钮，它将模拟类似重置的操作。所有变量都恢复到最初创建窗口时的状态（所有图纸都消失了 - 只需重新启动）。

而且我需要所有这些真正的布尔值一举回到错误状态。有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T04:09:27.777

使用[`Arrays.fill`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#fill%28boolean%5B%5D,%20boolean%29)：

```
Arrays.fill(used, false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T14:28:42.093

*Arrays.fill*在填充数组之前使用*范围检查。*

```
public static void fill(Object[] a, int fromIndex, int toIndex, Object val) {
        rangeCheck(a.length, fromIndex, toIndex);
        for (int i=fromIndex; i<toIndex; i++)
            a[i] = val;
    }

/**
     * Check that fromIndex and toIndex are in range, and throw an
     * appropriate exception if they aren't.
     */
    private static void rangeCheck(int arrayLen, int fromIndex, int toIndex) {
        if (fromIndex > toIndex)
            throw new IllegalArgumentException("fromIndex(" + fromIndex +
                       ") > toIndex(" + toIndex+")");
        if (fromIndex < 0)
            throw new ArrayIndexOutOfBoundsException(fromIndex);
        if (toIndex > arrayLen)
            throw new ArrayIndexOutOfBoundsException(toIndex);
    } 
```

如果你不需要 rangeCheck，你可以使用*forloop*来填充你的布尔数组。

```
for(int i = 0; i < used.length; ++i){
    used[i] = false;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T20:04:19.093

您可以重新创建数组，默认情况下它将初始化为 false。

那就是当您实施重置时，您可以做到

```
used[] = new boolean[26]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T04:10:00.803

使用`java.util.Arrays.fill()`：

```
Arrays.fill(used, false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-15T08:31:44.893

```
 boolean a[]= new boolean[nums.length];

    Arrays.fill(a, false); 
```

// 这将帮助您用 false 填充布尔数组。

// 记得 -> import java.util.Arrays;

# jquery - 幻灯片 jquery 插件

> ID：10492414
> 
> 赞同：2
> 
> 时间：2012-05-08T04:07:51.917
> 
> 标签：jquery, jquery-plugins

我在网站上有一个大横幅。而且，现在我希望横幅中的图片每 5 秒更改一次，例如（类似于滑块）。问题在于图像上绘制了一个“小部件”。这个“小部件”包含描述、一些链接（并且此信息特定于每个图像）。请参阅[jsFiddle](http://jsfiddle.net/XSywC/)上的示例。

而且，我有一个问题，哪个 jquery 插件可以为我做呢？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:23:13.480

我建议使用[Twitter Bootstrap 附带的 Carousel jquery 插件](http://twitter.github.com/bootstrap/javascript.html#carousel)。

请参阅此链接：

[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

Twitter Bootstrap 是支持最广泛的 javascript/css 库之一，[在 github 上有超过 28,000 个观察者](https://github.com/twitter/bootstrap)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:21:46.993

如果“小部件”位于不同的 div 中，并且 CSS 将其放置在幻灯片的顶部，则大多数幻灯片 jQuery 插件都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:18:42.540

对于这样的大横幅，您可以在此处查看您需要的插件套件列表[Jquery Slider Plugins](http://www.jquery4u.com/plugins/100-jquery-sliders-part1/)您可以在此处查看插件列表。

# objective-c - 解析RSS后如何删除XML标签内的HTML标签？

> ID：10492419
> 
> 赞同：1
> 
> 时间：2012-05-08T04:08:36.547
> 
> 标签：objective-c, xml, parsing

大家好，我有一个解析 RSS 的问题。

目前，我能够解析新闻网站上的 RSS XML，并将其显示在 UITableViewCell 中。我解析描述标签是：

```
<description><![CDATA[ <a href="http://vnexpress.net/gl/xa-hoi/2012/05/thuy-dien-song-tranh-de-bi-lo-sut-dat-1/"><img src="http://vnexpress.net/Files/Subject/3b/bd/66/e0/sat-lo-dat-Song-Tranh-2.jpg"></a>this is new<BR />></description> 
```

现在的问题是我怎样才能得到这个标签内的文本？目前它显示描述标签内的所有内容，即：

```
<![CDATA[ <a href="http://vnexpress.net/gl/xa-hoi/2012/05/thuy-dien-song-tranh-de-bi-lo-sut-dat-1/"><img src="http://vnexpress.net/Files/Subject/3b/bd/66/e0/sat-lo-dat-Song-Tranh-2.jpg"></a>this is new<BR />> 
```

我只想显示纯文本：

```
this is new 
```

而且我还想在此描述标签中获取图像，以便显示它：

```
<img src="http://vnexpress.net/Files/Subject/3b/bd/66/e0/sat-lo-dat-Song-Tranh-2.jpg"> 
```

. 请告诉我怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:25:22.383

我以前必须这样做。所以我将粘贴我在这里使用的代码。

```
- (NSString *)removeHTMLTags:(NSString *)str
{   
NSMutableString *temp_str = [[NSMutableString alloc] initWithString:str];
NSRange openTag = [temp_str rangeOfString:@"<"];
NSRange closeTag = [temp_str rangeOfString:@">"];

while (openTag.length > 0) {
    NSRange range;
    range.location = openTag.location;
    range.length = (closeTag.location - openTag.location) + 1;
    [temp_str setString:[temp_str stringByReplacingCharactersInRange:range withString:@""]];

    openTag = [temp_str rangeOfString:@"<"];
    closeTag = [temp_str rangeOfString:@">"];
}

[temp_str replaceOccurrencesOfString:@"&Auml;" withString:@"Ä" options:NSLiteralSearch range:NSMakeRange(0, [temp_str length])];
[temp_str replaceOccurrencesOfString:@"&Aring;" withString:@"Å" options:NSLiteralSearch range:NSMakeRange(0, [temp_str length])];
[temp_str replaceOccurrencesOfString:@"&AElig;" withString:@"Æ" options:NSLiteralSearch range:NSMakeRange(0, [temp_str length])];

while ([temp_str rangeOfString:@"  "].location != NSNotFound) {
    [temp_str replaceOccurrencesOfString:@"  " withString:@" " options:NSLiteralSearch range:NSMakeRange(0, [temp_str length])];
}

while ([temp_str rangeOfString:@" ."].location != NSNotFound) {
    [temp_str replaceOccurrencesOfString:@" ." withString:@"." options:NSLiteralSearch range:NSMakeRange(0, [temp_str length])];
}

while ([temp_str rangeOfString:@" ,"].location != NSNotFound) {
    [temp_str replaceOccurrencesOfString:@" ," withString:@"," options:NSLiteralSearch range:NSMakeRange(0, [temp_str length])];
}

while ([temp_str rangeOfString:@" ;"].location != NSNotFound) {
    [temp_str replaceOccurrencesOfString:@" ;" withString:@";" options:NSLiteralSearch range:NSMakeRange(0, [temp_str length])];
}

return temp_str;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T04:16:18.113

对于 iOS 7+，您可以使用`NSAttributedString`如下：

```
[[NSAttributedString alloc] initWithData:[htmlString dataUsingEncoding:NSUTF8StringEncoding] options:@{NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType, NSCharacterEncodingDocumentAttribute: [NSNumber numberWithInt:NSUTF8StringEncoding]} documentAttributes:nil error:nil]; 
```

对于低于 iOS 7 的版本，请使用此代码删除 < 和 > 之间的所有内容

```
(NSString *) stringByStrippingHTML {
  NSRange r;
  NSString *s = [[self copy] autorelease];
  while ((r = [s rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
    s = [s stringByReplacingCharactersInRange:r withString:@""];
  return s;
} 
```

# java - Ubuntu 11.10 上 hadoop 0.23.0 java 中的类路径问题

> ID：10492424
> 
> 赞同：0
> 
> 时间：2012-05-08T04:08:56.360
> 
> 标签：java, hadoop, classpath

```
Client.java:6: package org.apache.hadoop.conf does not exist
import org.apache.hadoop.conf.Configured;
                             ^
Client.java:7: cannot find symbol
symbol  : class Tool
location: package org.apache.hadoop.util
import org.apache.hadoop.util.Tool;
                             ^
Client.java:8: cannot find symbol
symbol  : class ToolRunner
location: package org.apache.hadoop.util
import org.apache.hadoop.util.ToolRunner;
                             ^
Client.java:12: cannot find symbol
symbol: class Configured
public abstract class Client extends Configured implements Tool {
                                     ^
Client.java:12: cannot find symbol
symbol: class Tool
public abstract class Client extends Configured implements Tool {
                                                           ^
[checking Client]
[total 685ms]
5 errors 
```

我需要如何设置类路径。

我这样设置：

```
CLASSPATH=$CLASSPATH:$HADOOP_HOME::$HADOOP_HOME/modules:$HADOOP_HOME/lib 
```

即使我在命令行中直接提到指向 jar 的类路径，我也无法运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:17:02.213

如果您正在尝试编译您的代码，您应该考虑使用像 Maven / Ant 之类的构建工具，或者只是和像 Eclipse / Netbeans 这样的 IDE。

我个人建议使用 Maven，基本的 pom.xml 将如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                            http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycompany</groupId>
    <artifactId>project-name</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <dependencies>
        <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-core</artifactId>
            <version>0.20.2</version>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:26:05.263

你可以用这个..

```
export CLASSPATH = ${CLASSPATH}:/path    // path of your jar.. 
```

看看这个[设置类路径](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/solaris/classpath.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T11:21:32.800

jar 必须明确指定，或者如果运行 JDK6 +，则可以使用通配符。仅仅指定一个包含 jars 的目录是不够的。

任何类路径教程/资源都可以在不到几天的时间内解决这个问题。此信息也包含在 Oracle 的有关运行和编译 Java 代码的文档中。

# ios - 我应该选择哪个 iOS 3D 引擎来显示 iBook Author 之类的 3D 模型？

> ID：10492434
> 
> 赞同：2
> 
> 时间：2012-05-08T04:10:13.033
> 
> 标签：ios, 3d, simulation, ibooks

我想在我的应用程序中显示一些 3D 模型，就像您可以在 iBook2 上使用 iBook Author 创建的那样，您可以在视图中拥有一个 3D 模型，然后捏放大，进入 3D 模型的视图。用户可以旋转和捏缩放。我应该使用哪个引擎来渲染 3D 模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:18:34.477

我刚刚使用了 2d 图形，但见过这个引擎：

[dEngine](http://fabiensanglard.net/dEngineSourceCodeRelease/)

[cocos3d](http://brenwill.com/cocos3d/)

[isgl3d](http://code.google.com/p/isgl3d/)

或者去硬核并使用 openGL [Ray Wenderlich 教程](http://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures)

让我知道你怎样去！

祝你好运！

# r - 如何在 R 中进行特定的成对比较

> ID：10492437
> 
> 赞同：1
> 
> 时间：2012-05-08T04:11:12.940
> 
> 标签：r, comparison, significance

我有一些我继承的代码，它为预测均值的成对比较生成一个显着性水平矩阵。由于该模型包括来自多个站点和治疗的数据，但我只想在一个站点内的治疗中比较基因型，因此只有一部分比较是有意义的。

这是当前生成的虚拟版本。

```
effect.nam <- expand.grid(site=c("A","B","C"), treat=c("low","high"), genotype=c("A1","B2"))
labels <-  paste(effect.nam[,1],effect.nam[,2],effect.nam[,3], sep=".")
mat <-matrix(sample(c(T,F),144,replace=T),12,12)
dimnames(mat) <- list(labels,labels) 
```

显然，在这种情况下，T/F 是随机的。我想要的是只看到一个站点和治疗中的比较。最好也删除自我比较。理想情况下，我想以以下形式返回数据框：

```
 Site Treat Genotype1 Genotype2   Sig
1     A   low         A1         2  TRUE
2     A   low         A1         3  TRUE
3     A   low         B2         3  TRUE
4     A  high         A1         2  TRUE
5     A  high         A1         3 FALSE
6     A  high         B2         3 FALSE
7     B   low         A1         2 FALSE
8     B   low         A1         3  TRUE
9     B   low         B2         3 FALSE
10    B  high         A1         2  TRUE
11    B  high         A1         3  TRUE
12    B  high         B2         3  TRUE
13    C   low         A1         2  TRUE
14    C   low         A1         3  TRUE
15    C   low         B2         3 FALSE
16    C  high         A1         2  TRUE
17    C  high         B1         3  TRUE
18    C  high         A2         3  TRUE 
```

我做了一些错误的开始，如果有人在正确的方向上有一些快速的指示，将不胜感激。

在下面 Chase 给出的非常有用的答案中，您可以看到虽然无意义的比较已被删除，但每个有用的比较都包含两次（基因型 1 与基因型 2，反之亦然）。我看不出如何轻松删除这些，因为它们并不是真正的重复......

- 更新 -

抱歉，我需要进行更改`mat`，以便在实施 Chase 的解决方案时，`Genotype1`并且在我的实际情况下`Genotype2`是`factor`，不是。`int`我在下面给出的解决方案中添加了一些内容（添加一个排序列以避免重复比较）。

它有效，这很好，但添加这些列对我来说似乎很尴尬 - 有没有更优雅的方式？

```
mat.m <- melt(mat)
mat.m[,c("site1", "treat1", "genotype1")] <-  colsplit(mat.m$X1, "\\.", c("site1", "treat1", "genotype1"))
mat.m[,c("site2", "treat2", "genotype2")] <-  colsplit(mat.m$X2, "\\.", c("site2", "treat2", "genotype2"))
str(mat.m)
mat.m$genotype1sort <- mat.m$genotype1
mat.m$genotype2sort <- mat.m$genotype2
levels(mat.m$genotype1sort) <- c(1, 2)
levels(mat.m$genotype2sort) <- c(1, 2)
mat.m$genotype1sort <- as.numeric(levels(mat.m$genotype1sort))[mat.m$genotype1sort]
mat.m$genotype2sort <- as.numeric(levels(mat.m$genotype2sort))[mat.m$genotype2sort]

subset(mat.m, site1 == site2 & treat1 == treat2 & genotype1 != genotype2 & genotype1sort < genotype2sort,
   select = c("site1", "treat1", "genotype1", "genotype2", "value"))

#-----
    site1 treat1 genotype1 genotype2 value
73      A    low        A1        B2  TRUE
86      B    low        A1        B2  TRUE
99      C    low        A1        B2  TRUE
112     A   high        A1        B2  TRUE
125     B   high        A1        B2 FALSE
138     C   high        A1        B2 FALSE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:41:00.717

我认为这可以使用`reshape2`. 一、`melt`数据转长格式：

```
require(reshape2)
mat.m <- melt(mat)
#--------
        X1      X2 value
1  A.low.1 A.low.1  TRUE
2  B.low.1 A.low.1  TRUE 
```

接下来，将列 X1 和 X2 拆分为“。”上的三列。

```
mat.m[,c("site1", "treat1", "genotype1")] <-  colsplit(mat.m$X1, "\\.", c("site1", "treat1", "genotype1"))
mat.m[,c("site2", "treat2", "genotype2")] <-  colsplit(mat.m$X2, "\\.", c("site2", "treat2", "genotype2")) 
```

现在，`mat.m`看起来像：

```
> head(mat.m,3)
        X1      X2 value site1 treat1 genotype1 site2 treat2 genotype2
1  A.low.1 A.low.1  TRUE     A    low         1     A    low         1
2  B.low.1 A.low.1  TRUE     B    low         1     A    low         1
3  C.low.1 A.low.1 FALSE     C    low         1     A    low         1 
```

最后，子集您想要抓取的行并按您想要的顺序获取列。请注意，有很多方法可以做到这一点`subset`，但为了清楚起见，我在这里使用它：

```
subset(mat.m, site1 == site2 & treat1 == treat2 & genotype1 != genotype2,
       select = c("site1", "treat1", "genotype1", "genotype2", "value"))
#--------
    site1 treat1 genotype1 genotype2 value
7       A    low         2         1  TRUE
20      B    low         2         1  TRUE 
```

您可能可以做一些更聪明的事情并避免将两列分开，但这似乎可以满足您的需求，并且应该相当直接。

# excel - Dynamic named range not working when referred with indirect

> ID：10492442
> 
> 赞同：1
> 
> 时间：2012-05-08T04:11:54.030
> 
> 标签：excel, vba

I have some Dynamic named Ranges in my sheet.Ive made them dynamic using the following formula:

=$A$1:rowend($A$1)

Where row end is a custom function which return the last cell before an empty cell is reached in row "A"

The named range is named as follows : "iec_air" There is also another named range : "iec_ground"

Now the problem is when i apply datavalidation on a cell and choose list referring to "iec_air" directly it works but when try to achieve the same thing using indirect("iec_"&"air") it doesnt work

When my named ranges were static it was working,not its not.Any idea how to fix it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:17:37.727

Do you know how to use VBA? One of the things you can do is create an event in a sheet module and adapt the size of the named range dynamically based on the blank cell.

Example

```
Sub setRangeDynamically()

dim oRange     as range

'Set range from cell(1,1) until the first blank cell downwards
set oRange = thisworkbook.sheets("blabla").range(cells(1,1),cells(1,1).end(xldown))
thisworkbook.Names.Add Name:="MyRange", RefersTo:=oRange 
end sub 
```

To create the data validation:

```
With thisworkbook.sheets("BlaBla").range("B2").Validation 
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _ 
    xlBetween, Formula1:="=MyRange" 
End With 
```

# linux - 用 awk 替换 bash 中的命令

> ID：10492446
> 
> 赞同：2
> 
> 时间：2012-05-08T04:12:13.710
> 
> 标签：linux, bash

为什么会这样：

这

```
var=hello
myvar=`echo hello hi | awk "{ if (\\\$1 == \"$var\" ) print \\\$2; }"`
echo $myvar 
```

给

```
hi 
```

但这不？

这

```
var=hello
echo hello hi | awk "{ if (\\\$1 == \"$var\" ) print \\\$2; }" 
```

给

```
awk: cmd. line:1: Unexpected token 
```

我在用

GNU bash，版本 4.1.5(1)-release (i486-pc-linux-gnu)

在

Linux 2.6.32-34-generic-pae #77-Ubuntu SMP Tue Sep 13 21:16:18 UTC 2011 i686 GNU/Linux

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T04:30:45.263

将 shell 变量传递到 AWK 程序的正确方法是使用 AWK 的变量传递功能，而不是尝试嵌入 shell 变量。并且通过使用单引号，您不必进行大量不必要的转义。

```
echo "hello hi" | awk -v var="$var" '{ if ($1 == var ) print $2; }' 
```

此外，您应该使用`$()`而不是反引号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T04:47:23.267

如果你的 awk 和我的一样，它会告诉你失败的地方：

```
var=hello
echo hello hi | awk "{ if (\\\$1 == \"$var\" ) print \\\$2; }"

awk: syntax error at source line 1
 context is
    { if >>>  (\ <<< $1 == "hello" ) print \$2; }
awk: illegal statement at source line 1 
```

此外，如果您替换`awk`为，`echo`您会清楚地看到它失败的原因

```
echo hello hi | echo "{ if (\\\$1 == \"$var\" ) print \\\$2; }"
{ if (\$1 == "hello" ) print \$2; } 
```

结果命令中有额外的“\”（反斜杠）。这是因为您删除了反引号。所以解决方案是删除一对\'s

```
echo hello hi | awk "{ if (\$1 == \"$var\" ) print \$2; }"
hi 
```

# sql - 将字符串中的空格更改为 OR 语句

> ID：10492459
> 
> 赞同：0
> 
> 时间：2012-05-08T04:13:45.307
> 
> 标签：sql, sql-server, string, replace

我正在尝试将字符串中的空格转换为 OR 语句。

```
Declare @postcodes varchar(128)
SET @postcodes = '2130 2602' --this input will be postcodes separated by a space (I'm in Australia so the postcodes are only 4 numbers long)
SET @postcodes = REPLACE(@postcodes, ' ', ' OR postcode = ') --I know this isn't right but it shows what I am trying to achieve
SELECT *
FROM users
WHERE postcode = @postcodes 
```

我知道上面的查询确实是在寻找用户

```
postcode = '2130 OR postcode = 2602' 
```

我真的很想在哪里找到用户

```
postcode = '2130' OR postcode = '2602' 
```

关于我应该搜索什么的任何想法或方向？

**更新**

我最终结合了[Albin Sunnanbo](https://stackoverflow.com/users/401728/albin-sunnanbo)和[Falcon](https://stackoverflow.com/users/1131897/falcon)建议的方法。[Will Hughes](https://stackoverflow.com/users/111013/will-hughes)建议的函数方法要优雅得多，但我不想在这个特定的安装中使用函数。

这是我的最终查询，添加了一些清洁功能。

```
Declare @postcodes varchar(128)
SET @postcodes = '2130 2602 2000'

--Postcode cleaning
SET @postcodes = REPLACE(@postcodes,';',' ') --removes ";"
SET @postcodes = REPLACE(@postcodes,',',' ') --removes ","
SET @postcodes = (LTRIM(RTRIM(@postcodes))) --trim white space
SET @postcodes = REPLACE(@postcodes,'  ',' ') --removes double spaces
SET @postcodes = REPLACE(@postcodes,'  ',' ') --removes double spaces again
SET @postcodes = '''' + REPLACE(@postcodes,' ',''',''') + '''' --adds ' to @postcodes

DECLARE @SQLString nvarchar(MAX);
SET @SQLString = N'
SELECT * 
FROM users
WHERE postcode IN(' + @postcodes + ')';

EXECUTE sp_executesql @SQLString;

SELECT @SQLString AS SQLString --This part serves no purpose, it just shows you what the query looks like 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:28:56.383

您可以使用此[Stack Overflow Question](https://stackoverflow.com/q/314824/111013)的答案拆分字符串。

创建此函数后，您可以像这样使用它：

```
Declare @postcodes varchar(128)
SET @postcodes = '2130 2602'

SELECT *
FROM users
   JOIN dbo.Split(' ',@postcodes) postcodes 
   ON users.postcode = postcodes.s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T04:30:29.053

我会构建一个字符串并使用 sp_executesql 执行

```
Declare @postcodes varchar(128)
SET @postcodes = '2130 2602'
SET @postcodes = REPLACE(@postcodes, ' ', ',')

DECLARE @SQLString nvarchar(MAX);
SET @SQLString = N'SELECT *
FROM users
WHERE postcode IN (' + @postcodes ')';

EXECUTE sp_executesql @SQLString; 
```

不过要小心 SQL 注入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T05:35:41.593

```
Declare @postcodes varchar(128)
SET @postcodes = '2130 2602'  
SET @postcodes = CONCAT('"',REPLACE(@postcodes, ' ', '" OR postcode = "'),'"') -- Now it will make it "2130" OR postcode = "2602"-------- 

SELECT *
FROM users
WHERE postcode = @postcodes 
```

希望这可以帮助

# php - 将嵌套结构转换为平面键值对

> ID：10492460
> 
> 赞同：1
> 
> 时间：2012-05-08T04:13:48.217
> 
> 标签：php, arrays, recursion, breadcrumbs

我的嵌套结构与文件夹结构非常相似，例如：

```
Array
(
    [level_one_1] => Array
        (
            [level_two_1] => value1
            [level_two_2] => valuetwo
            [level_two_3] => value_three
        )
    [level_one_2] => Array
        (
            [level_two_4] => value1
            [level_two_5] => valuetwo
            [level_two_6] => value_three
        )
    [level_one_3] => Array
        (
            [level_two_2] => valuetwo
            [level_two_3] => value_three
        )
) 
```

是否可以快速将其转换为以下内容：

```
Array
(
    [level_one_1/level_two_1] => value1
    [level_one_1/level_two_2] => valuetwo
    [level_one_1/level_two_3] => value_three

    [level_one_2/level_two_4] => value1
    [level_one_2/level_two_5] => valuetwo
    [level_one_2/level_two_6] => value_three)

    [level_one_3/level_two_2] => valuetwo
    [level_one_3/level_two_3] => value_three
) 
```

级别之间的斜线将是分隔符 - 它可以是任何东西。它也将是动态的级别数。

是否可以通过使用预定义的 array* 函数来做到这一点？用递归？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:25:16.027

像这样的东西。未经测试，但应该可以帮助您朝着正确的方向开始：

```
$myArray = array(
'level_one_1' => array(
        'level_two_1' => 'value1',
        'level_two_2' => 'valuetwo',
        'level_two_3' => 'value_three'
),
'level_one_2' => array(
        'level_two_4' => 'value1',
        'level_two_5' => 'valuetwo',
        'level_two_6' => 'value_three'
),
'level_one_3' => array(
        'level_two_2' => 'valuetwo',
        'level_two_3' => 'value_three'
));
$ritit = new RecursiveIteratorIterator(new RecursiveArrayIterator($myArray));
$result = array();
foreach ($ritit as $leafValue) {
    $keys = array();
    foreach (range(0, $ritit->getDepth()) as $depth) {
        $keys[] = $ritit->getSubIterator($depth)->key();
    }
    $result[ join('/', $keys) ] = $leafValue;
} 
```

# actionscript-3 - 是否可以创建等距视频

> ID：10492462
> 
> 赞同：0
> 
> 时间：2012-05-08T04:14:09.840
> 
> 标签：actionscript-3, flash, apache-flex

我正在制作一个游戏，它有一个剧院作为房间。但是现在，它仅适用于简单的“swf”节目。但我想知道，如果他们是视频的要求，那么是否可以转换纯视频，将自己嵌入等距环境中。视频的尺寸需要倾斜。可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:38:13.290

您可以使用 3D API 将视频旋转到位。尝试使用rotationX、rotationY 和rotationZ。此外，您可能需要调整相机以不绘制透视图。

还有一大堆[AS3 等距引擎](http://www.emanueleferonato.com/2010/02/23/11-flash-isometric-engines-you-can-use-in-your-games/)。其中一些甚至可能支持视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:38:53.833

我认为您将需要为此使用`flash.geom.Matrix`该类，因为 Isometric 与 3D 不同，因为它保持其大小而不管与观察者的距离如何。

查看文档，您会发现如何倾斜对象的示例。

[flash.geom.Matrix](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html)

# trigger.io - 通过 trigger.io forge 上传文件

> ID：10492466
> 
> 赞同：1
> 
> 时间：2012-05-08T04:14:50.463
> 
> 标签：trigger.io, forge

我正在使用 Forge 文件模块尝试从图库中上传图像。Forge 在 Android 2.3 上运行，图像选择捕获位工作正常。但是当我尝试使用 Request.Ajax() 发送文件时，我得到一个伪造异常。

我已经从下面的 Catalyst 日志中转储了输出

```
Request URL:forge.request.ajax
Request Method:undefined
Status Code:400 error

{ url: 'http://example.com/',
  username: null,
  password: null,
  data: null,
  headers: { Accept: '*/*', 'Content-Type': 'image/jpg' },
  timeout: 60000,
  type: 'POST',
  boundary: null,
  files: 
   [ { uri: 'content://media/external/images/media/212#Intent;end',
       name: 'Image',
       height: 500,
       width: 500 } ],
  fileUploadMethod: 'raw' }  // <- got this from a blog post, 
```

这就是我得到的回报

```
{ type: 'UNEXPECTED_FAILURE',
  message: 'Forge Java error: FileNotFoundException: http://example.com/' } 
```

我检查了服务器端并确认那里没有问题（制作了一个在那里发布的测试脚本）。如果我删除文件附加调用，该应用程序将发布到服务器。

我查看了此处发布的示例代码，但它似乎使用的是旧 API，我找不到一些方法 - [https://github.com/trigger-corp/photo-log/blob/master/ photolog.js](https://github.com/trigger-corp/photo-log/blob/master/photolog.js)

我在文件调用中做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:30:08.450

您的 Catalyst 输出没有明显的问题：`FileNotFoundException`刚刚表明服务器端出了点问题。在这种情况下，我猜 example.com 并不期待多部分编码的 POST。

我们昨天发布了一些代码，这使我们的 request.ajax 错误消息更加清晰：我建议您重新构建并重新运行您的应用程序，看看您是否能分辨出服务器端问题是什么。

# macos - 以编程方式在 TextEdit 中获取选定的文本字体名称

> ID：10492474
> 
> 赞同：1
> 
> 时间：2012-05-08T04:15:42.927
> 
> 标签：macos, macos-carbon, textedit

是否可以在 TextEdit 中检索所选文本的字体名称（通过 ObjC 或 Carbon）？我尝试了这段代码，但“值”为空：

```
AXUIElementRef systemWideElement = AXUIElementCreateSystemWide();
AXUIElementRef focussedElement = NULL;
AXError error = AXUIElementCopyAttributeValue(systemWideElement,
    kAXFocusedUIElementAttribute, (CFTypeRef*)&focussedElement);
CFTypeRef value;
AXUIElementCopyAttributeValue(focussedElement, kAXFontTextAttribute, &value); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:23:45.757

请注意，`kAXFontTextAttribute`在 AXTextAttributedString.h 中声明。它不是 UI 元素的属性；它是属性字符串中文本的属性。

尝试`kAXAttributedStringForRangeParameterizedAttribute`改为，传递你为`kAXSelectedTextRangeAttribute`. （假设聚焦的 UI 元素是一个 AXTextArea。您不应该假设。）这将返回一个 AXTextAttributedString，您可以从中获取`kAXFontTextAttribute`属性的字体字典。

# scala - Scala，将本地定义的函数传递到列表中？

> ID：10492478
> 
> 赞同：2
> 
> 时间：2012-05-08T04:16:06.063
> 
> 标签：scala, programming-languages

我还没有理解下面的代码片段`afterDelay(0) {...}`，为什么本地定义的函数可以存储到议程中？有人可以帮我理解函数`afterDelay(0) {...}`中的内容吗？`run`

```
abstract class Simulation {

  type Action = () => Unit

  case class WorkItem(time: Int, action: Action)

  private var curtime = 0
  def currentTime: Int = curtime

  private var agenda: List[WorkItem] = List()

  private def insert(ag: List[WorkItem], item: WorkItem): List[WorkItem] = {
    if (ag.isEmpty || item.time < ag.head.time) item :: ag
    else ag.head :: insert(ag.tail, item)
  }

  def afterDelay(delay: Int)(block: => Unit) {
    val item = WorkItem(currentTime + delay, () => block)
    agenda = insert(agenda, item)
  }

  private def next() {
    (agenda: @unchecked) match {
      case item :: rest => 
        agenda = rest 
        curtime = item.time
        item.action()
    }
  }

  def run() {
    afterDelay(0) {
      println("*** simulation started, time = "+
          currentTime +" ***")
    }
    while (!agenda.isEmpty) next()
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:33:08.470

```
afterDelay(0) {
    println(...)
} 
```

等价于以下内容：

```
afterDelay(0)({
    println(...)
}) 
```

调用函数时`afterDelay`，会将新`WorkItem`( `item`) 添加到列表中，而不是函数本身。该参数**`block: => Unit`是一个“按名称参数”**（参见[Scala 语言规范](http://www.scala-lang.org/sites/default/files/linuxsoft_archives/docu/files/ScalaReference.pdf)第 4.6.1 节）：用作参数的表达式被隐式转换为“无参数方法”（*无需*先评估），每当变量访问方法内部（`()`不需要）。

`() => block`在这种情况下，就是*调用*生成的函数时：它被调用，在新添加到列表（并返回）*之后*`item.action()`的某个时间点发生。*`WorkItem``afterDelay`*

 *如果它被写成（接受一个函数参数，而不是一个名字/thunk）：

```
def afterDelay(delay: Int)(block: () => Unit) {   // take a function
  // new function will invoke function named by "block" when invoked ...
  val item = WorkItem(..., () => block())
  // or skip wrapping the function in a function ...
  // val item = WorkItem(..., block)
  ...
} 
```

然后需要传入一个*函数*来调用它：

```
afterDelay(0)(() => { // need a function
    println(...)
}) 
```

或者，替代语法，仍然是 的函数`() => Unit`，但可以避免外括号：

```
afterDelay(0) { () => // need a function
    println(...)
} 
```

* * *

从 SLS 中提取，4.6.1 按名称参数：

> 值参数的类型可以以 为前缀`=>`，例如`x: => T`。这种参数的类型就是无参数方法类型`=> T`。这表明相应的参数*不会*在函数应用时进行评估，而是*在函数内的每次使用时进行评估*。也就是说，使用按名称调用来评估参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:09:49.213

您将 afterDelay 定义为 curried[函数](http://en.wikipedia.org/wiki/Currying)。这意味着它有两个参数列表。在 scala 中，您可以将参数列表周围的括号替换`(...)`为`{...}`. 在第二个参数列表中，您使用的是[“按名称调用”参数](http://en.wikipedia.org/wiki/Call-by-name#Call_by_name)。每次您在函数中再次使用这些参数时，都会对这些参数进行评估。一个很好的例子是[here](http://omgo.wordpress.com/2010/06/07/scala-call-by-name-vs-call-by-type/)。
“按名称调用”参数通常用于定义您自己的控制结构。

```
def do(until: Int)(body: => Unit) {
  body
  if (until > 1) do(until - 1)(body)
}

do(0)(println("test"))
do(5)(println("test2")) 
```

这是一个执行直到的示例。它将打印一次`test`和五次`test2`。*

# c++ - 在 QThread 中启动 QTimer

> ID：10492480
> 
> 赞同：15
> 
> 时间：2012-05-08T04:16:21.867
> 
> 标签：c++, multithreading, qt, timer, qthread

我正在尝试在特定线程中启动 QTimer。但是，计时器似乎没有执行，也没有打印出来。它与计时器、插槽或线程有关吗？

主文件

```
 #include "MyThread.h"
    #include <iostream>
    using namespace std;

    int main(int argc, char *argv[]) {
        MyThread t;
        t.start();
        while(1);
    } 
```

我的线程.h

```
 #ifndef MYTHREAD_H
    #define MYTHREAD_H

    #include <QTimer>
    #include <QThread>
    #include <iostream>

    class MyThread : public QThread {
        Q_OBJECT
    public:
        MyThread();
    public slots:
        void doIt();
    protected:
        void run();
    };

    #endif  /* MYTHREAD_H */ 
```

我的线程.cpp

```
 #include "MyThread.h"

    using namespace std;

    MyThread::MyThread() {
        moveToThread(this);
    }

    void MyThread::run() {
        QTimer* timer = new QTimer(this);
        timer->setInterval(1);
        timer->connect(timer, SIGNAL(timeout()), this, SLOT(doIt()));
        timer->start();
    }

    void MyThread::doIt(){
        cout << "it works";
    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-08T06:14:51.493

正如我所评论的（链接中的更多信息）你做错了：

1.  您正在将持有线程数据的对象与另一个对象（负责`doIt()`）混合。他们应该分开。
2.  在你的情况下不需要子类`QThread`。更糟糕的是，您在`run`不考虑它在做什么的情况下覆盖该方法。

这部分代码应该够用了

```
QThread* somethread = new QThread(this);
QTimer* timer = new QTimer(0); //parent must be null
timer->setInterval(1);
timer->moveToThread(somethread);
//connect what you want
somethread->start(); 
```

现在（Qt 版本 >= 4.7）默认在他的方法`QThread`中启动一个事件循环。`run()`为了在线程内运行，您只需要移动对象。[阅读文档...](http://qt-project.org/doc/qt-4.8/QThread.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-03T14:34:48.813

```
m_thread = new QThread(this);
QTimer* timer = new QTimer(0); // _not_ this!
timer->setInterval(1);
timer->moveToThread(m_thread);
// Use a direct connection to whoever does the work in order
// to make sure that doIt() is called from m_thread.
worker->connect(timer, SIGNAL(timeout()), SLOT(doIt()), Qt::DirectConnection);
// Make sure the timer gets started from m_thread.
timer->connect(m_thread, SIGNAL(started()), SLOT(start()));
m_thread->start(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-08T04:19:02.847

A`QTimer`仅适用于具有事件循环的线程。

[http://qt-project.org/doc/qt-4.8/QTimer.html](http://qt-project.org/doc/qt-4.8/QTimer.html)

> 在多线程应用程序中，您可以在任何具有事件循环的线程中使用 QTimer。要从非 GUI 线程启动事件循环，请使用 QThread::exec()。Qt 使用计时器的线程亲和性来确定哪个线程将发出 timeout() 信号。因此，您必须在其线程中启动和停止计时器；无法从另一个线程启动计时器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-14T13:03:42.357

您可以使用发射信号并在发射槽函数内启动计时器

主文件

```
#include "MyThread.h"
#include <iostream>
using namespace std;

int main(int argc, char *argv[]) {
    MyThread t;
    t.start();
    while(1);
} 
```

我的线程.h

```
#ifndef MYTHREAD_H
#define MYTHREAD_H

#include <QTimer>
#include <QThread>
#include <iostream>

class MyThread : public QThread {
    Q_OBJECT
public:
    MyThread();
    QTimer *mTimer;
signals:
   start_timer();
public slots:
    void doIt();
    void slot_timer_start();
protected:
    void run();
};

#endif  /* MYTHREAD_H */ 
```

我的线程.cpp

```
#include "MyThread.h"

using namespace std;

MyThread::MyThread() {
    mTimer = new QTimer(this);
    connect(this,SIGNAL(start_timer()),this, SLOT(slot_timer_start()));
    connect(mTimer,SIGNAL(timeout()),this,SLOT(doIt()));

}

void MyThread::run() {
    emit(start_timer());
    exec();
}

void MyThread::doIt(){
    cout << "it works";
}
void MyThread::slot_timer_start(){
    mTimer->start(1000);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-16T20:06:53.273

您需要一个事件循环来拥有计时器。以下是我如何用我的代码解决同样的问题：

```
MyThread::MyThread() {
}

void MyThread::run() {
    QTimer* timer = new QTimer(this);
    timer->setInterval(1);
    timer->connect(timer, SIGNAL(timeout()), this, SLOT(doIt()));
    timer->start();

    /* Here: */
    exec();             // Starts Qt event loop and stays there
   // Which means you can't have a while(true) loop inside doIt()
   // which instead will get called every 1 ms by your init code above.
}

void MyThread::doIt(){
    cout << "it works";
} 
```

以下是其他张贴者均未提及的相关文档：

> **int QCoreApplication::exec()**
> 
> 进入主事件循环并等待直到 exit() 被调用。返回设置为 exit() 的值（如果通过 quit() 调用 exit()，则为 0）。需要调用此函数来启动事件处理。主事件循环从窗口系统接收事件并将这些事件分派给应用程序小部件。要让您的应用程序执行空闲处理（即在没有未决事件时执行特殊功能），请使用具有 0 超时的 QTimer。使用 processEvents() 可以实现更高级的空闲处理方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-23T19:30:25.747

我创建了一个在 lambda 函数中调用计时器的示例：

```
#include <QCoreApplication>
#include <QObject>
#include <QTimer>
#include <QThread>
#include <QDebug>
#include <memory>

int main(int argc, char** argv)
{
    QCoreApplication app(argc, argv);

    QThread* thread = new QThread(&app);
    QObject::connect(thread, &QThread::started, [=]()
    {
        qInfo() << "Thread started";
        QTimer* timer1 = new QTimer(thread);
        timer1->setInterval(100);
        QObject::connect(timer1, &QTimer::timeout, [=]()
        {
            qInfo() << "Timer1 " << QThread::currentThreadId();
        });
        timer1->start();
    });
    thread->start();

    QTimer timer2(&app);
    QObject::connect(&timer2, &QTimer::timeout, [=]()
    {
        qInfo() << "Timer2 " << QThread::currentThreadId();
    });
    timer2.setInterval(100);
    timer2.start();

    return app.exec();
} 
```

# visual-c++ - 确定处理器是 AMD64 还是 Intel64？

> ID：10492484
> 
> 赞同：3
> 
> 时间：2012-05-08T04:16:46.920
> 
> 标签：visual-c++, wix, inno-setup

Visual Studio C++ 编译器[提供](http://msdn.microsoft.com/en-us/library/ms173505.aspx)命令行编译器选项`/favor:AMD64`并`/favor:INTEL64`分别针对 AMD64 或 Intel64 处理器进行优化。现在，术语 AMD64 和 Intel64在大多数[情况下基本上可以互换](http://en.wikipedia.org/wiki/X86-64)，但编译器可以优化[一些差异](http://en.wikipedia.org/wiki/X86-64#Differences_between_AMD64_and_Intel_64)。

在 Microsoft Windows 7 上，是否有可靠的方法在应用程序安装时检查我们是在 AMD64 还是 INTEL64 系统上安装？

我正在为安装程序使用 InnoSetup 和 WiX，并且我正在推测基于 AMD64 或 INTEL64 CPU 选择要安装的版本。

* * *

*编辑：回顾的一些笔记*

最后，来自[RRUZ](https://stackoverflow.com/a/10493311/385094)和[Andrew Cooper](https://stackoverflow.com/a/10492582/385094)的答案都为解决这个问题提供了很好的可靠策略，但由于它们都不是真正可靠的未来证明，我个人将坚持`/favor:blend`我的项目的默认设置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T05:57:53.393

您可以使用[`Win32_Processor`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394373%28v=vs.85%29.aspx)WMi 类，从 Inno 设置中您可以毫无问题地执行 WMI 查询。检查此示例：

```
var
  FSWbemLocator : Variant;
  FWMIService   : Variant;
  FWbemObject   : Variant;
begin
FSWbemLocator := CreateOleObject('WBEMScripting.SWBEMLocator');
FWMIService   := FSWbemLocator.ConnectServer('', 'root\CIMV2', '', '');
FWbemObject   := FWMIService.Get('Win32_Processor');
if FWbemObject.Architecture=9 then //is a 64 bits processor
  if  FWbemObject.Family=131 then  //all 64-bit AMD processors are identified by using a Family attribute value of 0x83 (131). 
```

从这里您可以使用架构、系列、制造商和其他属性来确定处理器类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T04:33:05.753

你可以试试`%PROCESSOR_IDENTIFIER%`环境变量。

在 AMD 系统上，该值以“AuthenticAMD”结尾。

在 Intel 系统上，该值以“GenuineIntel”结尾。

（至少对于我检查过的少量系统）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T08:41:40.383

[`Msix64`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370522%28v=vs.85%29.aspx)如果和[`Intel`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369552%28v=vs.85%29.aspx)windows 安装程序属性确定它，您不能使用组合吗？这显然是假设`Intel`为 AMD64 处理器正确设置了该属性。也有该[`Intel64`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369553%28v=vs.85%29.aspx)属性，但这仅显示处理器是否是安腾处理器，我认为您不会在意。

# java - Count 程序执行的次数

> ID：10492489
> 
> 赞同：5
> 
> 时间：2012-05-08T04:17:43.783
> 
> 标签：java

如何在不保留文件和计数的情况下获取程序先前在 java 中运行的次数。java中是否有Application类或其他东西来检查计数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T04:19:59.727

您可以使用[首选项 API](http://docs.oracle.com/javase/6/docs/technotes/guides/preferences/overview.html)。这消除了*您*执行文件 i/o 的需要。您仍然需要读取首选项值，将其递增，然后存储新值。

在 Windows 上，首选项 API 使用注册表。在 Unix 上，首选项 API 使用文件系统作为后备存储（但作为开发人员，这对您是隐藏的）。

您可以获取/存储系统或单个用户的首选项。（不清楚您是否想知道*用户*运行该程序的次数，或者该计算机上的*任何人*运行该程序的次数）。在[文档](http://docs.oracle.com/javase/6/docs/technotes/guides/preferences/overview.html)中查找[`Preferences.systemNodeForPackage()`](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html#systemNodeForPackage%28java.lang.Class%29)和。[`Preferences.userNodeForPackage()`](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html#userNodeForPackage%28java.lang.Class%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:46:18.113

您可以执行以下操作：

```
public class Test {

    private static int INSTANCE_COUNTER = 0;

    public Test() {

        INSTANCE_COUNTER++;
    }

    public static final int getInstanceCounter() {

        return INSTANCE_COUNTER;
    }

    //-Methods-//
} 
```

现在，您可以调用 Test.getInstanceCounter() 来获取数字。

# c# - 如何在 IIS 中下载文件？

> ID：10492492
> 
> 赞同：3
> 
> 时间：2012-05-08T04:18:19.113
> 
> 标签：c#, asp.net, visual-studio-2010, iis, file-upload

我已经编写了两种方法，例如 FileUpLoad() 和 FileDownLoad() 来上传和下载本地系统中的单个文件。

```
void FileUpLoad()
{
    string hfBrowsePath = fuplGridDocs.PostedFile.FileName; //fuplGridDocs is a fileupload control
    if (hfBrowsePath != string.Empty)
    {
        string destfile = string.Empty;            
        string FilePath = Path.Combine(@"E:\Documents\");            
        FileInfo FP = new FileInfo(hfBrowsePath);
        hfFileNameAutoGen.Value = PONumber + FP.Extension;
        destfile = FilePath + hfFileNameAutoGen.Value;   //hfFileNameAutoGen is a hidden field
        fuplGridDocs.PostedFile.SaveAs(destfile);
    }
}

void FileDownLoad(LinkButton lnkFileName)
{
    string filename = lnkFileName.Text;
    string FilePath = Path.Combine(@"E:\Documents", filename);
    fuplGridDocs.SaveAs(FilePath);
    FileInfo fileToDownLoad = new FileInfo(FilePath);

    if (fileToDownLoad.Exists)
    {
        Process.Start(fileToDownLoad.FullName);
    }
    else
    {
        lblMessage.Text = "File Not Saved!";
        return;
    }
} 
```

在将应用程序托管在 IIS 中之前运行应用程序时，我可以将文件上传到所需位置，也可以从保存的位置检索文件。但是在localhost中发布后，我只能上传一个文件。我无法下载保存的文件。也不例外。上传的文件保存在所需位置。我不知道为什么它没有检索文件？为什么我无法在 IIS 中下载文件？我在互联网上搜索了很多，但找不到解决方案。如何解决这个问题？我使用的是 Windows XP 和 IIS 5.1 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:27:08.070

当您将此站点部署到服务器时，您希望您的 Web 应用程序如何做`Process.Start`，您只是在服务器上打开图片，而不是在客户端 PC 上。

我认为这将回答您的问题： http: [//www.codeproject.com/Articles/74654/File-Download-in-ASP-NET-and-Tracking-the-Status-o](http://www.codeproject.com/Articles/74654/File-Download-in-ASP-NET-and-Tracking-the-Status-o)

下载文件在 E:\Documents 之后也缺少斜杠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:36:42.370

另一种选择是将通配符添加到 IIS`MIME`类型

# c# - 如何为 c# 窗口应用程序创建一个 opencv dll

> ID：10492505
> 
> 赞同：2
> 
> 时间：2012-05-08T04:20:46.420
> 
> 标签：c#, dll, opencv, dllimport

我需要将 opencv (c /c++) 程序转换为 dll 文件。我想在 c# windows 窗体应用程序中使用该 dll。

我尝试了一些网站给出的一些方法，但是在窗口窗体应用程序中添加引用时出现错误。

不知道哪里搞错了。

```
A reference to “D:\WindowsFormApplication4\windowsForrmsApllications4\bin\debug\testdll.dll”
Could not be added. Please make sure that the file is accessible and that it is a valid assembly or COM Component 
```

在这里，我附上了我的示例代码。请帮我。

```
Void  main(const char*filename)
{
if  (filename ==0)
    {
        printf("The image not loaded\n");
        return -1;
    }
    IplImage* input_im = 0; 
    input_im = cvLoadImage(filename);
    cvNamedWindow("InputImage",CV_WINDOW_AUTOSIZE);
    cvShowImage("InputImage",input_im);
    cvWaitKey(0);
    cvDestroyWindow("InputImage");
    cvReleaseImage(&input_im);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:06:01.973

这有帮助吗？[http://www.emgu.com/wiki/index.php/Main_Page](http://www.emgu.com/wiki/index.php/Main_Page)

> Emgu CV 是英特尔 OpenCV 图像处理库的跨平台 .Net 包装器。允许从 .NET 兼容的语言（例如 C#、VB、VC++、IronPython 等）调用 OpenCV 函数。

由于您的程序并不大，您可以用 C# 完全重写它。

# oracle - 当相同的子查询被使用两次时，寻找在 Oracle 中编写 SQL 的最佳实践

> ID：10492511
> 
> 赞同：4
> 
> 时间：2012-05-08T04:22:47.283
> 
> 标签：oracle

我正在用 Oracle 编写 SQL。在 SQL 中，我使用了两次相同的子查询。我正在尝试找到替换此类常见子查询或可重用查询的最佳方法。

我正在考虑为子查询创建一个视图，但我不允许这样做。全局临时表可能是其他解决方案，但我开始知道这些表并不是真正用于动态创建和删除的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T04:28:19.100

您可以使用视图或全局临时表，但通常最好使用 WITH 子句，例如：

```
WITH q AS
  (SELECT something FROM mytable)
SELECT something FROM q
UNION ALL
SELECT something+1 FROM q; 
```

# c++ - 这个指针赋值应该产生段错误？

> ID：10492513
> 
> 赞同：0
> 
> 时间：2012-05-08T04:22:52.570
> 
> 标签：c++, pointers, segmentation-fault

这不应该产生段错误吗？当我运行代码时，输​​出为 5。示例：http: [//ideone.com/gV2Nv](http://ideone.com/gV2Nv)

```
#include <iostream>
using std::cout;
using std::endl;

int* foo(int a) {
  int b = a;
  int* c = &b; 
  return c;
}

int main() {
  int* a = foo(5);
  cout << *a << endl; 
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:24:23.073

在函数中返回指向局部变量的指针是**未定义的行为**。

未定义行为不保证分段错误。它仅仅意味着任何行为都是可能的，并且程序可以以任何方式运行。

一个常见的误解是，未定义的行为意味着代码应该产生分段错误，事实是，在代码调用未定义的行为并因此得名的情况下，标准不需要任何特定的行为。

**C++ 标准第 1.3.24 节指出：**

> 允许的未定义行为的范围从完全忽略具有不可预测结果的情况，到在翻译或程序执行期间以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（发出的诊断消息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T04:23:45.710

不，它应该导致未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T04:26:08.243

该内存地址在超出范围时从堆栈顶部弹出这一事实仅意味着它被释放，而不是被覆盖。这就是你得到输出“5”的原因。

# netbeans - Netbeans Run->Stop Build 不会停止正在运行的 java 进程

> ID：10492519
> 
> 赞同：2
> 
> 时间：2012-05-08T04:23:50.027
> 
> 标签：netbeans, netty

我在 Mac OS X Lion 10.7.3 上使用 Netbeans 7.1.2。

我有一个简单的 java 服务器（使用 netty）项目，在构建并运行项目之后，尝试通过 Run->Stop Build 停止运行，它不会终止 java 服务器进程。

例如，我的服务器应用程序使用端口 8080，即使在我停止从 netbeans 运行后，端口 8080 仍在使用中并且应用程序继续运行。我必须从活动监视器中手动终止 java 进程。

结束由 Netbeans 启动的正在运行的应用程序的正确程序是什么？

非常感谢您的帮助。先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T02:48:43.850

查看文档： http: [//netty.io/docs/stable/guide/html/](http://netty.io/docs/stable/guide/html/)。向下滚动到第 9 节。关闭您的应用程序。

您的主应用程序看起来像：

```
package org.jboss.netty.example.time;
public class TimeServer {
    static final ChannelGroup allChannels = new DefaultChannelGroup("time-server"(35));
    public static void main(String[] args) throws Exception {
        ...
        ChannelFactory factory = ...;
        ServerBootstrap bootstrap = ...;
        ...
        Channel channel = bootstrap.bind(...);
        allChannels.add(channel);

        ...

        // Shutdown code
        ChannelGroupFuture future = allChannels.close();
        future.awaitUninterruptibly();
        factory.releaseExternalResources();
    }
} 
```

您的处理程序需要：

```
public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) {
    TimeServer.allChannels.add(e.getChannel());
} 
```

您必须： 1\. 将所有频道存储在一个`ChannelGroup` 2\. 关闭时，关闭所有频道并释放资源。

希望这可以帮助。

# wpf-controls - WPF 表多行标题

> ID：10492520
> 
> 赞同：1
> 
> 时间：2012-05-08T04:23:53.623
> 
> 标签：wpf-controls, row, grouping, flowdocument, documentviewer

如何在 WPF 表中实现这个多行标题？

例子：

```
ID     Name         Age      Gender
       City         Phone 1   
       Address 1    Phone 2
       Address 2
------------------------------------
1      Justin       30        M
       L.A.         1000000
       St.Add 1     2000000
       St.Add 2
2      Monica       25        F
       Salt Lake    5000000
       St.Add 8     6000000
       St.Add 9 
```

表格放置在流文档中，将通过 WPF 文档查看器显示。谢谢你。

# android - 一旦相机捕捉到图像，PhoneGap 应用程序就会退出

> ID：10492525
> 
> 赞同：3
> 
> 时间：2012-05-08T04:25:12.823
> 
> 标签：android, cordova

[我刚刚复制了此链接http://docs.phonegap.com/en/1.7.0/cordova_camera_camera.md.html#Camera](http://docs.phonegap.com/en/1.7.0/cordova_camera_camera.md.html#Camera)中显示的完整示例， 并构建了一个应用程序并在我的三星 Galaxy SCL(android) 上对其进行了测试。一旦我使用凸轮捕获图像，应用程序就会关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:39:12.747

您使用的是 DATA_URL 或 FILE_URI 的 DestinationType 吗？建议使用 FILE_URI，然后使用 File 对象访问文件。DATA_URL 返回可能导致内存不足错误的 Base64 编码图像。

# internet-explorer - 如何确定何时在我的 BHO 中打开 IE (Internet Explorer) 浏览器？

> ID：10492527
> 
> 赞同：0
> 
> 时间：2012-05-08T04:25:16.660
> 
> 标签：internet-explorer, plugins, com, atl, bho

我为 IE 编写了一个插件：**当 IE 打开时**，我的插件会自动显示一个与用户交互的对话框。但是我无法确定打开 IE 时将调用哪个函数（我将实现）。你能帮助我吗？

非常感谢！

我已经编写了这样的插件：http: [//www.codeproject.com/Articles/37044/Writing-a-BHO-in-Plain-C](http://www.codeproject.com/Articles/37044/Writing-a-BHO-in-Plain-C)。但它仅在用户单击 IE 齿轮上的项目时运行。我想在 IE 打开时运行这个插件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T03:22:46.150

我找到了我的解决方案。本教程挽救了我的生命： http: [//www.codeproject.com/Articles/37044/Writing-a-BHO-in-Plain-C](http://www.codeproject.com/Articles/37044/Writing-a-BHO-in-Plain-C)。

只写一个普通的 BHO。然后安装它。安装 BHO 只需要一个进程调用我们 BHO 的 DllRegisterServer 函数。这通过 regsvr32.exe 实用程序变得简单。只需运行命令 regsvr32.exe ，BHO 就会被注册。要卸载 BHO，进程需要调用 BHO 的 DllUnregisterServer 函数。这也可以通过 regsvr32.exe 通过运行命令 regsvr32.exe /u 来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:50:07.823

IE 将调用您的[IObjectWithSite](http://msdn.microsoft.com/en-us/library/aa768220%28v=vs.85%29.aspx) ::SetSite() 实现。这是您将与浏览器进行的第一次交互。

**请注意**：此时您可能无法显示对话框。IE 的启动过程复杂且高度异步。如果您尝试过早显示对话框，您可能会挂起。如果是这种情况，您应该将异步消息发回给自己，以便稍后显示对话框。或者，您可以[接收 DWebBrowserEvents2](http://msdn.microsoft.com/en-us/library/aa768283%28v=vs.85%29.aspx) ::DocumentComplete 并在第一页加载完成时显示您的对话框。

# html - CSS网格布局/图像定位问题

> ID：10492528
> 
> 赞同：0
> 
> 时间：2012-05-08T04:25:18.033
> 
> 标签：html, css, grid, stylesheet

尝试将图像正确放置的页面放在一起时遇到了一些麻烦。附上我目前所拥有的屏幕截图。如果有意义的话，我想要得到的看起来像第一行图像（1-5）一直到页面下方，每隔一行对面。图像 1-8 设置正确，但 9-10 在第 3 行，而不是在我想要的第 2 行。图片 11 应该在左侧，而 12-15 应该在右侧。等等..

![在此处输入图像描述](../Images/e849af6d76813dd55ac3b110f3c8ffca.png)

当前的 CSS –

```
 #grid { float: left; width: 100%; overflow: hidden; }
#grid-inner { float: left; width: 890px; overflow: hidden;  }
.item { float: left; margin: 0 0 10px 0; position: relative; }
.item span { display: none; position: absolute; padding: 0 0 0 0; color: #fff; background: transparent url('../images/back-work.png') 0 0 repeat; }
.item span a { color: #fff; display: block; height: 100%; width: 100%; }
.small { width: 210px; height: 125px; }
.large { width: 420px; height: 260px; }
.small span { width: 210px; height: 125px; padding: 0 0 0 0; }
.large span { width: 420px; height: 260px; padding: 0 0 0 0; }
#project { float: left; width: 100%; }
#project-content { float: left; width: 100%; border-top: 1px solid #ccc; margin: 0 0 0 0; padding: 0 0 0 0; }
#project-content-alpha { float: left; width: 200px; }
#project-content-beta { float: left; width: 410px; }
#project-content-gamma { float: right; width: 200px; text-align: right; }
    #project-content-alpha span.light { color: #999; }
#project-images { float: left; width: 100%; }
#project-images img { float: left; width: 100%; margin: 0 0 0 0; }
#project-pagination { float: left; width: 100%; margin: 0 0 0 0; }
#project-pagination-alpha { float: left; width: 200px; }
#project-pagination-beta { float: right; width: 200px; text-align: right; } 
```

当前标记 -</p>

```
 <div id="grid">
<div id="grid-inner">

<div class="item large">
<span><a href="" title="">ONE</a></span>
<a href="" title="ONE"><img src="" width="420" height="260" alt="ONE" /></a>
</div>

<div class="item small">
<span><a href="" title="">TWO</a></span>
<a href="" title=""><img src="" width="210" height="125" alt="TWO" /></a>
</div>

<div class="item small">
<span><a href="" title="">THREE</a></span>
<a href="" title=""><img src="" width="210" height="125" alt="THREE" /></a>
</div>

<div class="item small">
    <span><a href="" title="">FOUR</a></span>
<a href="" title=""><img src="" width="210" height="125" alt="FOUR" /></a>
</div>

<div class="item small">
<span><a href="" title=""></a></span>
<a href="" title=""><img src="" width="210" height="125" alt="FIVE" /></a>
</div>

    <div class="item small">
<span><a href="" title=""></a></span>
<a href="" title=""><img src="" width="210" height="125" alt="SIX" /></a>
</div>

<div class="item small">
<span><a href="" title=""></a></span>
<a href="" title=""><img src="" width="210" height="125" alt="SEVEN" /></a>
</div>

<div class="item large">
<span><a href="" title=""></a></span>
<a href="" title=""><img src="" width="420" height="260" alt="EIGHT" /></a>
</div> 
```

对此的任何帮助或建议将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:35:14.283

CSS`float`不会垂直重新定位元素。它们只能水平浮动。

If you want vertical "floats" (i.e. tiling), you will need to use JavaScript. I recommend t[he jQuery Masonry Plugin](http://masonry.desandro.com/) or [Vanilla Masonry](http://vanilla-masonry.desandro.com/) (jQuery Masonry minus the jQuery).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:50:19.723

Check out the interface here. Let me know if you need revisions.

**EXACTLY WHAT WAS ASKED FOR -** [http://jsfiddle.net/rxLTG/](http://jsfiddle.net/rxLTG/)

**HTML**

```
<div class="wrap">
    <div class="row">
        <img class="lg" src="" alt="1" />
        <img class="sm" src="" alt="2" />
        <img class="sm" src="" alt="3" />
        <img class="sm" src="" alt="4" />
        <img class="sm" src="" alt="5" />
    </div>
    <div class="row">
        <img class="sm" src="" alt="6" />
        <img class="sm" src="" alt="7" />
        <img class="lg" src="" alt="8" />
        <img class="sm" src="" alt="9" />
        <img class="sm" src="" alt="10" />
    </div>
</div> 
```

**CSS**

```
.wrap {width:650px;}
.wrap img {float:left; width:150px; height:100px;}
.wrap img.lg {width:350px; height:200px;}
.row.odd .lg, .row:nth-child(even) .lg {float:right;}​ 
```

**JS**

```
$(function () {
    $('.row:odd').addClass('odd');​
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T19:41:38.890

A better way would be like this - [http://jsfiddle.net/rxLTG/2/](http://jsfiddle.net/rxLTG/2/)

**HTML**

```
<div class="wrap">
  <img class="lg" src="" alt="1" />
  <img class="sm" src="" alt="2" />
  <img class="sm" src="" alt="3" />
  <img class="sm" src="" alt="4" />
  <img class="sm" src="" alt="5" />
  <img class="lg2" src="" alt="6" />
  <img class="sm" src="" alt="7" />
  <img class="sm" src="" alt="8" />
  <img class="sm" src="" alt="9" />
  <img class="sm" src="" alt="10" />
  <img class="lg" src="" alt="11" />
  <img class="sm" src="" alt="12" />
  <img class="sm" src="" alt="13" />
  <img class="sm" src="" alt="14" />
  <img class="sm" src="" alt="15" />
  <img class="lg2" src="" alt="16" />
  <img class="sm" src="" alt="17" />
  <img class="sm" src="" alt="18" />
  <img class="sm" src="" alt="19" />
  <img class="sm" src="" alt="20" />
</div> 
```

**CSS**

```
.wrap {width:500px;}
.wrap img {float:left; width:125px; height:100px;}
.wrap img.lg {width:250px; height:200px;}
.wrap img.lg2 {width:250px; height:200px;float:right;}​ 
```

Theres no need to define each row inside a div, because they will automatically fit and wrap round.

Also, if you float the large image on each row first (left or right), then the other four will fit into place without any javascript needed.

然后每五个数字将是一个大图像（1、6、11、16、21 等）。如果您希望它免费使用 javascript，请使用此解决方案。如果您想保留原始编号系统，请使用上述解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T06:14:13.220

您可以将其视为网格。更多标记，但也可重用和响应。例如，您可以使用一个占用一半容器的类来处理此网格布局。

第一行： - 1 列 1/2 ：有 1 个大图像 - 1 列 1/2 ：有 4 列（每列 1/2，每列包含一个小图像）

第二行：只需反转前 1/2 列

列是浮动的，因此第 4 列和第 5 列将堆叠在 1 和 2 之下……您的图像也必须具有正确的纵横比。

最后，由于您是浮动元素，请清除组。

希望能帮助到你。

```
/* Micro clearfix for the wrapper */
.wrap:before,
.wrap:after { 
    content: '';
    display: table
}
.wrap:after { 
     clear: both;
}
.wrap { width:650px; }
/* no need for size if you put the right images */
img { 
    width:100%;
    height: auto;
    vertical-align: middle; /* removes the gap beneth the image */
}
/* you can go further and create some other columns */
.col-1-2 {  
    float: left;
    width: 50%;
}
/* demo purpose only */
img { 
    width: 100%;
    height: 100px;
}
img.lg { height: 200px; } 
```

```
<div class="wrap">
    <!-- one half of the wrapper -->
    <div class="col-1-2">
        <img class="lg" src="" alt="1" />
    </div>
    <!-- one half of the wrapper -->
    <div class="col-1-2">            
        <!-- one half of the columns :: 1/4 -->
        <div class="col-1-2">            
            <img class="" src="" alt="2" />
        </div>
        <div class="col-1-2">            
            <img class="" src="" alt="3" />
        </div>
        <div class="col-1-2">            
            <img class="" src="" alt="4" />
        </div>
        <div class="col-1-2">            
            <img class="" src="" alt="5" />
        </div>
    </div>

    <!-- then reverse -->
    <div class="col-1-2">
        <div class="col-1-2">            
            <img class="" src="" alt="6" />
        </div>
        <div class="col-1-2">            
            <img class="" src="" alt="7" />
        </div>
        <div class="col-1-2">            
            <img class="" src="" alt="8" />
        </div>
        <div class="col-1-2">            
            <img class="" src="" alt="9" />
        </div>
    </div>            
    <div class="col-1-2">
        <img class="lg" src="" alt="10" />
    </div>      
</div>
```

# iphone - cocos2d 背景图片尺寸

> ID：10492529
> 
> 赞同：2
> 
> 时间：2012-05-08T04:25:20.737
> 
> 标签：iphone, cocoa-touch, cocos2d-iphone

我正在尝试通过创建一个带有背景图像的应用程序来开始使用 cocos2d。它不是纹理，只是一个直的图像。

我使用以下方法添加背景：

```
 CCSprite* background = [CCSprite spriteWithFile:@"paris.png"];
    background.tag = 1;
    background.anchorPoint = CGPointMake(0, 0);
    [self addChild:background z:0]; 
```

图像是 960x640，但是当我在 iPhone 5 模拟器中运行它时，我只看到图像的一小部分。好像屏幕太大了。我的印象是我需要 960x640。这不准确吗？我的图像应该是什么分辨率？

我已经尝试过设置和不设置锚点。如果没有锚，我会在 1/2 的屏幕上看到模糊的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:39:54.550

了解 cocos2d 中的视网膜显示：http: [//www.cocos2d-iphone.org/wiki/doku.php/prog_guide :how_to_develop_retinadisplay_games_in_cocos2d](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:how_to_develop_retinadisplay_games_in_cocos2d)

制作一个名为 paris.png 的 480x320 图像...

将您当前的图像重命名为 paris-hd.png...

在应用程序委托中启用 Retina Display .. 你就完成了.. 希望这会有所帮助.. :)

# google-chrome-extension - 从 popup.html，如何通过按钮 onclick 运行 javascript 函数？

> ID：10492531
> 
> 赞同：2
> 
> 时间：2012-05-08T04:25:23.873
> 
> 标签：google-chrome-extension

我正在尝试为 Chrome 构建一个扩展，但我是新手，我无法理解 Google 提供的文档。我希望扩展程序有一个显示几个按钮的弹出窗口，当单击一个按钮时，我想运行一个脚本。

这是我的设置：

popup.html

`<button id="test1" onclick="getSite();">button 1</button>`
`<button id="test2" onclick="getSite();">button 2</button>`

content_script.js

`function getSite(){alert('getSite works!');}`

我无法理解如何使用 chrome javascript api，因为我看到其他人说 use `chrome.tabs.executeScript`，但我无法弄清楚那条线的去向。谁能帮我？我给你一块饼干！或者只是一个赞成票..或者两者兼而有之？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:27:35.787

您还没有提到您希望脚本在哪个页面上运行`onclick`，在 Popup.html 页面或用户当前在浏览器上工作的页面。如果它只是`popup.html page`您想要执行脚本的地方，请将它们包含在`popup.html`页面本身中。

但是，如果您想在用户的浏览器页面上执行它们，则必须将一条消息传递给您的后台页面，该页面又将`chrome.tabs.executeScript`使用当前选项卡的 id 和`{file: 'yourjsfile.js'}`作为参数执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:51:51.450

[我认为由于Google 内容安全政策](http://code.google.com/chrome/extensions/trunk/contentSecurityPolicy.html)施加的限制，您遇到了这个问题。它提到像您在代码中提到的那样的 iniline javascript 将不会被执行。尝试`onclick="getSite()"`从您的 HTML 标记中删除`content_script.js`. 使用`addEventListener`函数将事件附加到按钮。

# java - 在 java 中转义此字符串 "\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[AZ]{2,4}\b" 的最佳方法是什么

> ID：10492533
> 
> 赞同：0
> 
> 时间：2012-05-08T04:25:39.050
> 
> 标签：java, regex, string, escaping

我将此字符串用于正则表达式`"\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b"`- 我正在使用它来检测电子邮件地址。

我想弄清楚逃脱它的最佳方法是什么。

我已经尝试了很多变化，例如

```
\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\b
\\\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\\\.[A-Z]{2,4}\\\\b 
```

我在@Match 注释中使用正则表达式，所以我认为我不能使用StringEscapeUtils。代码是使用 Play 框架用 Java 编写的。但我想这只是一个关于转义 Java 字符串的问题。

```
 public static void signup(
        @Match( value=("\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b"), 
            message="Hey there, we need a real email address so we can send you an invite. Thanks :)") String email){

        if(validation.hasErrors()) {
            params.flash(); // add http parameters to the flash scope
            validation.keep(); // keep the errors for the next request
            index();
        }
        else{
                Email mail = new Email();
                String[] to = {"myemail@me.com", "myemail@gmail.com"};
                mail.sendMessage(to, "beta signup", email);
                thanks();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:45:34.193

**尝试这个：**

*此正则表达式实现了电子邮件地址的官方[RFC 2822](http://www.ietf.org/rfc/rfc2822.txt)标准。对于一般目的，它可能很有用。*

```
\b(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])\b 
```

**解释：**

```
<!--
\b(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])\b

Options: case insensitive; ^ and $ match at line breaks

Assert position at a word boundary «\b»
Match the regular expression below «(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")»
   Match either the regular expression below (attempting the next alternative only if this one fails) «[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*»
      Match a single character present in the list below «[a-z0-9!#$%&'*+/=?^_`{|}~-]+»
         Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
         A character in the range between “a” and “z” «a-z»
         A character in the range between “0” and “9” «0-9»
         One of the characters “!#$%&'*+/=?^_`{|}” «!#$%&'*+/=?^_`{|}»
         The character “~” «~»
         The character “-” «-»
      Match the regular expression below «(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*»
         Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
         Match the character “.” literally «\.»
         Match a single character present in the list below «[a-z0-9!#$%&'*+/=?^_`{|}~-]+»
            Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
            A character in the range between “a” and “z” «a-z»
            A character in the range between “0” and “9” «0-9»
            One of the characters “!#$%&'*+/=?^_`{|}” «!#$%&'*+/=?^_`{|}»
            The character “~” «~»
            The character “-” «-»
   Or match regular expression number 2 below (the entire group fails if this one fails to match) «"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*"»
      Match the character “"” literally «"»
      Match the regular expression below «(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*»
         Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
         Match either the regular expression below (attempting the next alternative only if this one fails) «[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]»
            Match a single character present in the list below «[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]»
               A character in the range between ASCII character 0x01 (1 decimal) and ASCII character 0x08 (8 decimal) «\x01-\x08»
               ASCII character 0x0b (11 decimal) «\x0b»
               ASCII character 0x0c (12 decimal) «\x0c»
               A character in the range between ASCII character 0x0e (14 decimal) and ASCII character 0x1f (31 decimal) «\x0e-\x1f»
               ASCII character 0x21 (33 decimal) «\x21»
               A character in the range between ASCII character 0x23 (35 decimal) and ASCII character 0x5b (91 decimal) «\x23-\x5b»
               A character in the range between ASCII character 0x5d (93 decimal) and ASCII character 0x7f (127 decimal) «\x5d-\x7f»
         Or match regular expression number 2 below (the entire group fails if this one fails to match) «\\[\x01-\x09\x0b\x0c\x0e-\x7f]»
            Match the character “\” literally «\\»
            Match a single character present in the list below «[\x01-\x09\x0b\x0c\x0e-\x7f]»
               A character in the range between ASCII character 0x01 (1 decimal) and ASCII character 0x09 (9 decimal) «\x01-\x09»
               ASCII character 0x0b (11 decimal) «\x0b»
               ASCII character 0x0c (12 decimal) «\x0c»
               A character in the range between ASCII character 0x0e (14 decimal) and ASCII character 0x7f (127 decimal) «\x0e-\x7f»
      Match the character “"” literally «"»
Match the character “@” literally «@»
Match the regular expression below «(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])»
   Match either the regular expression below (attempting the next alternative only if this one fails) «(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?»
      Match the regular expression below «(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+»
         Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
         Match a single character present in the list below «[a-z0-9]»
            A character in the range between “a” and “z” «a-z»
            A character in the range between “0” and “9” «0-9»
         Match the regular expression below «(?:[a-z0-9-]*[a-z0-9])?»
            Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
            Match a single character present in the list below «[a-z0-9-]*»
               Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
               A character in the range between “a” and “z” «a-z»
               A character in the range between “0” and “9” «0-9»
               The character “-” «-»
            Match a single character present in the list below «[a-z0-9]»
               A character in the range between “a” and “z” «a-z»
               A character in the range between “0” and “9” «0-9»
         Match the character “.” literally «\.»
      Match a single character present in the list below «[a-z0-9]»
         A character in the range between “a” and “z” «a-z»
         A character in the range between “0” and “9” «0-9»
      Match the regular expression below «(?:[a-z0-9-]*[a-z0-9])?»
         Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
         Match a single character present in the list below «[a-z0-9-]*»
            Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
            A character in the range between “a” and “z” «a-z»
            A character in the range between “0” and “9” «0-9»
            The character “-” «-»
         Match a single character present in the list below «[a-z0-9]»
            A character in the range between “a” and “z” «a-z»
            A character in the range between “0” and “9” «0-9»
   Or match regular expression number 2 below (the entire group fails if this one fails to match) «\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]»
      Match the character “[” literally «\[»
      Match the regular expression below «(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}»
         Exactly 3 times «{3}»
         Match the regular expression below «(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)»
            Match either the regular expression below (attempting the next alternative only if this one fails) «25[0-5]»
               Match the characters “25” literally «25»
               Match a single character in the range between “0” and “5” «[0-5]»
            Or match regular expression number 2 below (attempting the next alternative only if this one fails) «2[0-4][0-9]»
               Match the character “2” literally «2»
               Match a single character in the range between “0” and “4” «[0-4]»
               Match a single character in the range between “0” and “9” «[0-9]»
            Or match regular expression number 3 below (the entire group fails if this one fails to match) «[01]?[0-9][0-9]?»
               Match a single character present in the list “01” «[01]?»
                  Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
               Match a single character in the range between “0” and “9” «[0-9]»
               Match a single character in the range between “0” and “9” «[0-9]?»
                  Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
         Match the character “.” literally «\.»
      Match the regular expression below «(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)»
         Match either the regular expression below (attempting the next alternative only if this one fails) «25[0-5]»
            Match the characters “25” literally «25»
            Match a single character in the range between “0” and “5” «[0-5]»
         Or match regular expression number 2 below (attempting the next alternative only if this one fails) «2[0-4][0-9]»
            Match the character “2” literally «2»
            Match a single character in the range between “0” and “4” «[0-4]»
            Match a single character in the range between “0” and “9” «[0-9]»
         Or match regular expression number 3 below (attempting the next alternative only if this one fails) «[01]?[0-9][0-9]?»
            Match a single character present in the list “01” «[01]?»
               Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
            Match a single character in the range between “0” and “9” «[0-9]»
            Match a single character in the range between “0” and “9” «[0-9]?»
               Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
         Or match regular expression number 4 below (the entire group fails if this one fails to match) «[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+»
            Match a single character present in the list below «[a-z0-9-]*»
               Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
               A character in the range between “a” and “z” «a-z»
               A character in the range between “0” and “9” «0-9»
               The character “-” «-»
            Match a single character present in the list below «[a-z0-9]»
               A character in the range between “a” and “z” «a-z»
               A character in the range between “0” and “9” «0-9»
            Match the character “:” literally «:»
            Match the regular expression below «(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+»
               Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
               Match either the regular expression below (attempting the next alternative only if this one fails) «[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]»
                  Match a single character present in the list below «[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]»
                     A character in the range between ASCII character 0x01 (1 decimal) and ASCII character 0x08 (8 decimal) «\x01-\x08»
                     ASCII character 0x0b (11 decimal) «\x0b»
                     ASCII character 0x0c (12 decimal) «\x0c»
                     A character in the range between ASCII character 0x0e (14 decimal) and ASCII character 0x1f (31 decimal) «\x0e-\x1f»
                     A character in the range between ASCII character 0x21 (33 decimal) and ASCII character 0x5a (90 decimal) «\x21-\x5a»
                     A character in the range between ASCII character 0x53 (83 decimal) and ASCII character 0x7f (127 decimal) «\x53-\x7f»
               Or match regular expression number 2 below (the entire group fails if this one fails to match) «\\[\x01-\x09\x0b\x0c\x0e-\x7f]»
                  Match the character “\” literally «\\»
                  Match a single character present in the list below «[\x01-\x09\x0b\x0c\x0e-\x7f]»
                     A character in the range between ASCII character 0x01 (1 decimal) and ASCII character 0x09 (9 decimal) «\x01-\x09»
                     ASCII character 0x0b (11 decimal) «\x0b»
                     ASCII character 0x0c (12 decimal) «\x0c»
                     A character in the range between ASCII character 0x0e (14 decimal) and ASCII character 0x7f (127 decimal) «\x0e-\x7f»
      Match the character “]” literally «\]»
Assert position at a word boundary «\b»
--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:58:53.587

你可以在这里找到 RFC 2822

[http://www.ietf.org/rfc/rfc2822.txt](http://www.ietf.org/rfc/rfc2822.txt)

```
[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)\b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:32:41.680

我不会涉及“这是正确的电子邮件正则表达式”的事情，只有一句话：您的正则表达式不会接受所有有效的电子邮件地址。请参阅BalusC 在评论中为您提供的[链接。](https://stackoverflow.com/questions/201323/how-to-use-a-regular-expression-to-validate-an-email-addresses/1931322#1931322)

**关于逃跑**。Java 需要双重转义，因为它首先将正则表达式作为字符串处理，并将在字符串创建期间处理所有转义序列。因此，只需避开所有反斜杠，因为它们需要在替换后出现。

```
\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\b 
```

字符类末尾的破折号不需要转义。

# ios - UIScrollView 或 UIWebView 是更好的解决方案吗？

> ID：10492534
> 
> 赞同：0
> 
> 时间：2012-05-08T04:25:47.827
> 
> 标签：ios, facebook, uiwebview, uiscrollview, instagram

我正在指定一个 iOS 应用程序，其中有一个需要滚动的运行部分。我正在考虑将其作为 UIScrollView（从未使用过，但似乎合乎逻辑），但听起来 contentSize 总是需要计算。在这种情况下，这可能是非常可变的（UGC 图像等......）。这个对吗？还是有合法的解决方法？如果不是，那么 UIWebView 会是更好的解决方案吗？

应用程序功能就像 FB 提要或 Instagram。是否知道他们使用什么（FB 对我来说就像 UIWebView）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:35:47.153

实际上，这取决于您要达到的目标。如果您使用 web 视图，则必须生成 html 代码来提供它，如果您有按钮，则可能必须生成更多的 html/css/js 才能使一切正常工作。使用滚动视图并不痛苦......计算内容大小很容易......所有元素的高度+它们之间的一些偏移量。它的边界将始终保持不变，您应该只设置内容大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:14:47.863

以我的经验，我在开发iOS之前有过客户端Web应用程序的开发经验。第一次，我觉得`UIWebView`比`UIScrollView`我可以`html/css/javascript`随心所欲地处理要容易得多。

但是我发现性能有一些问题`UIWebView`。如果你有复杂的功能可用性和大量的数据加载。所以我尝试用 来实现`UIScrollView`，当然，用它来创建复杂的视图对我来说并不容易，`UIScrollView`但是当我熟悉了实现指令时。我认为`UIScrollView`有更好的性能`UIWebView`，特别是复杂的布局和可用性。

我建议您根据情况使用它们。

`UIWebView`如果您熟悉客户端 Web 应用程序开发，对于一些仅显示信息且使用不太复杂的简单 ViewController来说很好。

对于一些复杂的可用性，它可能并不容易实现，`UIScrollView`但对于性能问题来说是完全可以的。

# python - 在 python 中编码和渲染（网络）图

> ID：10492535
> 
> 赞同：4
> 
> 时间：2012-05-08T04:26:01.347
> 
> 标签：python, numpy, graph, graph-theory

下面的代码不会呈现我的图表。

```
import numpy
import matplotlib.pyplot as plt
import matplotlib as mpl
import pylab
import random
import scipy
from matplotlib.mlab import griddata
from pylab import *
from scipy import ndimage
def H(x,y,gamma):
    val = HenonMap(x,y,1,1,0.2,gamma)
    return val
def HenonIterate(x0,y0,n,gamma):
    (x,y) = H(x0,y0,gamma)
    for i in xrange (0,n):
        (x,y)=H(x,y,gamma)
        if (pow(x,2)) + (pow(y,2)) > 100:
            return i
    return n

def g():
    x2=1000
    y2=1000
    max=100
    u = zeros([x2,y2])
    for x in range(x2):
        for y in range(y2):
            y0= .01*y-5.0
            x0= -.01*x+5.0
            u[x][y] = HenonIterate(x0,y0,max,1.03)
        imshow(u)
        show() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T05:05:57.907

查看您的代码，我不确定您的想法，因此我很难直接使用它；但是，我可以向您展示如何在 python 中创建图形并在**Matplotlib**中呈现它们。

[Networkx](http://networkx.lanl.gov/index.html)是一个优秀的 python 库，用于生成图形、分析它们并通过 Matplotlib 或 Graphviz 渲染它们。例如，

```
from matplotlib import pyplot as MPL
import networkx as NX                  # import networkx 
```

您可以通过导入数据文件（Networkx 有相当多的模块来转换格式）或使用 Networkx 的图形生成器之一在 Networkx 中创建图形。为了生成如下图，我创建了一种特定类型的二项式随机图，***erdos-renyi***。

要在 Networkx 中创建图形，我只需调用图形构造函数并传入所需的节点数和边创建概率。

```
G = NX.erdos_renyi_graph(10, .3) 
```

在 Networkx 中渲染此图很简单——只需调用***draw***并传入您的图即可。在幕后，Network 传递在 Matplotlib 中渲染图形所需的所有数据（例如，节点位置、样式属性、标签等）并为您调用 Matplotlib 的***plot***方法，将所有这些数据传递进来。唯一需要与 Matplotlib 交互用户可以分别调用***show***或***savefig***将其呈现在屏幕上或文件中。

```
NX.draw(G)
MPL.show() 
```

如果您想自己生成图形，然后将其交给 Networkx 以通过 Matplotlib 进行渲染，这也很简单。例如，在下面，我创建了一个 5 x 5 **NumPy 数组**来表示***邻接矩阵***（表示稀疏图数据的最常见格式）：

```
>>> G = NP.random.randint(0, 2, 25).reshape(5, 5)
>>> G
  array([[0, 0, 1, 0, 1],
        [1, 0, 0, 1, 1],
        [0, 0, 1, 0, 1],
        [0, 0, 1, 1, 1],
        [0, 1, 0, 0, 1]]) 
```

现在使用有向图的标准 Networkx 构造函数 DiGraph 将 NumPy 数组转换为 Networkx***图***

```
>>> G1 = NX.DiGraph(G)

>>> len(G1.nodes())
      5
>>> type(G1)
      <class 'networkx.classes.digraph.DiGraph'> 
```

您可以从邻接矩阵创建无向图，而不是有向图；只需使用适当的构造函数***Graph***

```
>>> G2 = NX.Graph(G) 
```

该图在 Matplotlib 中的渲染与上面的*完全一样*——通过调用 Networkx 的***draw***方法，然后调用 Matplotlib 的***show***将其渲染到屏幕上。

```
>>> NX.draw(G2)
>>> MPL.show() 
```

![在此处输入图像描述](../Images/302575449546233c313dac5d5b66a589.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:04:04.953

当您运行此脚本时`H(x,y,gamma)`，`HenonIterate(x0,y0,n,gamma)`和`g()`得到定义。这就是发生的一切。

如果要在脚本末尾运行 g()，请添加`g()`.

然后它抱怨该`HenonMap`函数未定义。一定要找到一个合适的实现，它接受 6 个参数。

# mysql - SQL 优化 - 根据列值连接不同的表

> ID：10492541
> 
> 赞同：5
> 
> 时间：2012-05-08T04:27:23.530
> 
> 标签：mysql, sql, optimization

我有一个表，其中包含一个充当“标志”的列，用于决定从哪个表中提取附加信息（即值 1 从 table1 中提取，2 从 table2 中提取，等等）。通常我会使用索引/键加入表。但是，我可以加入的表包含的信息可以规范化为单独的表，这让我不得不使用列来决定要加入哪个表。

所以这是我的问题，根据此列中产生的值连接不同表的最有效方法是什么？

以下是我目前知道如何完成此任务的两种方法。我很确定它们都不是最佳解决方案：

1.  从我的主表中提取信息（包含决定加入哪个表的列值），然后通过我的应用程序中的代码发送额外的查询以获取其余信息。

2.  疯狂加入，返回每个表的列（即使未使用）。然后，通过我的代码，忽略不需要的表的空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:37:11.197

我认为这是可能的：

```
create table a (id integer, flag boolean);
create table b (id integer, value_b varchar(30));
create table c (id integer, value_c varchar(30));

insert into a values (1, true), (2, false);
insert into b values (1, 'Val 1'), (2, 'Val 2');
insert into c values (1, 'C 1'), (2, 'C 2');

select a.id,
       case when a.flag then b.value_b else c.value_c end AS value
  from a
  left join b using (id)
  left join c using (id); 
```

你可以[试试看](http://www.sqlfiddle.com/#!2/0742c/2)。

当然有限制：

*   列数是固定的，所以`NULL`如果应该省略某些值，你应该选择 s；
*   你必须`CASE ... END`为每一列写一个；
*   你应该提前知道所有连接的表；
*   性能可能不是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:31:32.947

绝对不是选项 2。如果您不需要数据，请不要检索它。简单的。当您不需要数据时，加入表（尤其是大表）将非常低效。您可以使用选项 1 或使用动态 SQL 来构建查询。然后我会将一些测试用例放在一起并运行执行计划以查看查询的执行情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T04:32:50.433

根据其他表的内容，我建议使用 UNION - 每个查询返回的列必须相同。因此，您可以执行以下操作：

```
SELECT table1.title, tabel2.text FROM table1 INNER JOIN table2 ON table1.id=table2.id WHERE table1.key='2'
UNION
SELECT table1.title, tabel3.text FROM table1 INNER JOIN table3 ON table1.id=table3.id WHERE table1.key='3' 
```

（调整 SQL 以确保它与您的架构匹配，并且确实避免了我添加的任何错误）

# java - 计算器应用程序的定制键盘

> ID：10492544
> 
> 赞同：0
> 
> 时间：2012-05-08T04:28:10.923
> 
> 标签：java, android, xml

我已经看到很多关于选择用于编辑文本的最佳输入类型键盘的问题，但我找不到可以帮助我使用半计算器应用程序的问题。我已经尝试过十进制、电话、数字标志签名及其组合，但它并没有给我我想要的东西。

是否有任何输入类型，包括数字、(+)、(-) 和 (.) ？或者如果我必须要如何创建和使用这个键盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:33:18.017

你有没有试过这个，它似乎有你想要的：

```
<EditText
    ...
    android:inputType="number"
    /> 
```

除了数字和基本运算符之外，它还包括下划线。它甚至有模数 (%)、阶乘 (!)、混淆 (?) 如果您决定看中...

**添加**

这可能更接近您想要的，因为您显然不是在寻找下划线......

```
<EditText
    ...
    android:inputType="phone"
    /> 
```

我只知道 Android 中包含的三个基本键盘。如果“电话”键盘不是一个可接受的选择，您可能必须设计自己的...

我设计键盘的方式就像任何其他应用程序一样。为此，我将在 TableLayout 上方使用 EditText 来帮助您组织按钮网格。并且每次单击按钮都会将相应的值添加到您的 EditText。

**添加**

澄清一下，HTC 上的“电话”键盘：

![宏达键盘](../Images/bb536220493884630fb29e04eee1c0b5.png)

# c++ - 在将 char 数组复制到字符串期间节省 CPU 周期（提高性能）

> ID：10492546
> 
> 赞同：0
> 
> 时间：2012-05-08T04:28:16.807
> 
> 标签：c++, performance, stl

**描述：**

我正在分析我的应用程序以提高整体性能，在我发现的不同瓶颈中，消耗性能的主要领域之一似乎来自`_wordcopy_fwd_dest_aligned`指令/功能。

以下是问题的简短描述 -

*   函数获取一个缓冲区流 - 包含长度和长度值格式的字符流。
*   阅读 len（一些代码来检查机器对齐等）。
*   读取字符数组并将其分配给字符串。

* * *

**PusedoCode**
pusdo 代码如下所示

```
read_buf(max_len)  
v.assign((char*)pdata,max_len) 
```

* * *

现在，当从 quantify 报告中检查 CPU 周期时，我看到`_wordcopy_fwd_dest_aligned`. 同样从诸如 -[提高 CPU 周期性能](http://nccastaff.bournemouth.ac.uk/jmacey/MastersProjects/MSc11/Peter/Simd/SIMD_Paper.pdf)的报告中，我看到这个想法是通过使用任何替代方法来减少这种情况。

**问题**

1.  上述代码是否有一个简单的替代方案，它可以减少/消除`_wordcopy_fwd_dest_aligned`使用，从而获得性能（即使以内存为代价）。
2.  如果上述方法不起作用，上述代码的任何建议工作区域？但最终的 o/p 需要在字符串本身中。

* * *

PS：
一个。由于代码需要在分布式环境中工作，需要处理单词对齐等，所以对问题列表中的选项（2）有点犹豫。
湾。我们正在使用 stlport 库，所以这需要任何调整/这会导致问题吗？一个简单的代码`std::string v.assign(...)`没有出现`_wordcopy_fwd_dest_aligned`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T04:32:02.763

那是优化的复制程序。为了获得更高的性能，您可能必须消除副本，或者牺牲与某些处理器型号的兼容性。

# python - 我可以将 StringIO 对象作为“文件”参数传递给 Linux 命令行吗？

> ID：10492548
> 
> 赞同：0
> 
> 时间：2012-05-08T04:28:26.587
> 
> 标签：python

Linux 上的某些命令接收文件作为参数。(cat, grep, sed, awk,...) 如何将 StringIO 对象作为“文件”参数传递？（因为我不想将它写入磁盘上的文件，然后显式传递给这些命令）或者我需要其他类型的“内存文件”对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:42:33.503

[创建一个管道](http://docs.python.org/library/os.html#os.pipe)，[将读取端连接](http://docs.python.org/library/os.html#os.dup2)到您的进程中[`preexec_fn`](https://stackoverflow.com/a/5630354/20862)，将设备文件传递给命令，并将[内容](http://docs.python.org/library/shutil.html#shutil.copyfileobj)[复制`StringIO`](http://docs.python.org/library/shutil.html#shutil.copyfileobj)到写入端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:44:51.273

我认为您要问的是如何将 StringIO 对象作为文件参数进行管道传输。

您列出的命令也将来自 stdout 的输入作为文件参数。

如：

```
mypyscript.py | cat 
```

或者

```
cat < mypyscript.py 
```

您在这里所做的是将 StringIO 对象内容写入 mypqscript.py 中的标准输出

假设 fo 是一个带有内容的 StringIO 对象，在脚本中的适当位置有：

```
 sys.stdout.write(fo.getvalue())
   sys.stdout.flush() 
```

# java - 如何刷新按钮的 Java 图像图标

> ID：10492552
> 
> 赞同：4
> 
> 时间：2012-05-08T04:28:58.143
> 
> 标签：java, swing

有人知道如何刷新按钮图像图标吗？

问题是：

我正在制作一个跳棋游戏，并创建一个 GUI。一切正常，包括 AI，除了我在移动后调用了我的 AI，导致按钮上似乎没有检查器。

1.  点击按钮
2.  单击有检查器的特定按钮
3.  单击检查器必须去的下一个位置
4.  立即呼叫 AI 采取行动。

我的按钮有棋子图片的 ImageIcons，当我点击下一个棋子需要去的地方时，JPanel 上的 JButton 不会在那一刻刷新，而是等到 AI 进行移动并完成它的移动，导致我看不到我的检查器去了哪里。

当 3-4 一个接一个调用时，我只看到 AI 所做的最终移动，但看不到我的，因为在它退出实现 actionListener 后一切都会刷新。

我试着打电话：repaint(); 重新验证（）；无效（）；在包含按钮的 JPanel 上。

在第 4 步之前，用户可以看到他/她在 AI 移动之前放置了什么。

```
else
{
     //This is where the code starts
     if ("White".equals(Red_Or_White.getText()))
     {
          //Meaning that it is white's turn, then
          playerPlaysAMove(x, y, goingToGo_x, goingToGo_y);
     }
     if ("AI".equals(AI_Enabled.getText()))
     {
          //AI is enabled
          AIMoves(board, "Red");
          //the AI needs to play the position as if the AI was a red player, 
          //because the player must be white
     }
} 
```

两个AI在同一回合玩，但是AI计算大约需要1分钟，此时玩家的动作直到AI播放才可见，因为它在退出actionListener后更新所有按钮（在else语句之后） .

Board 是放置在 JPanel 上的一组 8x8 按钮

```
static void playerPlaysAMove(int save_x, int save_y, int moveTo_x, int moveTo_y)
{
    if(save_x - moveTo_x == 1 || save_x - moveTo_x == -1)
    {
        board[moveTo_x][moveTo_y].setIcon(board[save_x][save_y].getIcon());
        board[save_x][save_y].setIcon(null);
    }
    else if (save_x - moveTo_x == 2 && save_y - moveTo_y == 2)
    {
        board[save_x-1][save_y-1].setIcon(null);
        board[moveTo_x][moveTo_y].setIcon(board[save_x][save_y].getIcon());
        board[save_x][save_y].setIcon(null);
    }
    else if (save_x - moveTo_x == 2 && save_y - moveTo_y == -2)
    {
        board[save_x-1][save_y+1].setIcon(null);
        board[moveTo_x][moveTo_y].setIcon(board[save_x][save_y].getIcon());
        board[save_x][save_y].setIcon(null);            
    }
    else if (save_x - moveTo_x == -2 && save_y - moveTo_y == 2)
    {
        board[save_x+1][save_y-1].setIcon(null);
        board[moveTo_x][moveTo_y].setIcon(board[save_x][save_y].getIcon());
        board[save_x][save_y].setIcon(null);            
    }
    else if (save_x - moveTo_x == -2 && save_y - moveTo_y == -2)
    {
        board[save_x+1][save_y+1].setIcon(null);
        board[moveTo_x][moveTo_y].setIcon(board[save_x][save_y].getIcon());
        board[save_x][save_y].setIcon(null);            
    }        
} 
```

基本上是我计算了用户选择按钮和用户目标按钮的XY坐标。有一些检查他是否正在下正确的动作，但这是主要的动作部分。

如果 XY 坐标差为 1，则表示玩家在移动，而不是跳跃，如果 XY 坐标差为 2，则表示玩家在跳跃。我还需要将原始XY坐标的按钮设置为null，即图标消失，然后将新的imageIcon放置在目标XY坐标处。

如果玩家正在跳跃，那么我还需要计算用户吃块的位置，并将 imageIcon 也设置为 null。

AI 做的事情完全相同，只是 AI 通过使用递归函数计算 XY 坐标来计算最佳移动。

主要的问题是玩家播放，然后AI计算，然后播放，然后在处理之后，它会一起显示两者的结果。是否可以让它在 AI 计算和播放之前重绘图像图标？这样玩家就可以看到自己玩了什么，然后AI玩了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:56:35.857

尝试`board[save_x][save_y].repaint();`

# android - 无法启动服务 Intent。论坛词典

> ID：10492554
> 
> 赞同：1
> 
> 时间：2012-05-08T04:29:06.570
> 
> 标签：android, android-intent

我尝试通过 Fora Dictionary Api 翻译一个单词。[这里](http://ng-comp.com/fora/fora_api.txt)有更多关于 ForaApi 的信息。这是我的代码：

```
 String query = "com.ngc.fora.action.QUERY";  

                Intent foraIntent = new Intent(query);
                foraIntent.putExtra("QUERY_ID", new Long("1"));
                foraIntent.putExtra("QUERY", lword);
                foraIntent.putExtra("MAX_RESULTS", 2);
                foraIntent.putExtra("AS_PAGE", true);
                foraIntent.putExtra("CALLBACK_ACTION", "com.myAPP.ServiceForFora.TRANSLATE");
                foraIntent.putExtra("CALLBACK_PACKAGE", "com.myAPP");
                foraIntent.putExtra("CALLBACK_CLASS", ".ServiceForFora");
                startService(foraIntent); 
```

但是当 Fora Dictionary 尝试向我的服务（ServiceForFora）发送意图时，我得到了这个：

***05-07 06:20:40.440: W/ActivityManager(52): 无法启动服务 Intent { act=com.myAPP.ServiceForFora.TRANSLATE cmp=com.myAPP/.ServiceForFora (has extras) }: 未找到***

这是我的服务：

```
epublic class ServiceForFora extends Service{

@Override
   public IBinder onBind(Intent intent) {
      Toast.makeText(this, "onBind", Toast.LENGTH_LONG).show();     
      return null;
   }

   @Override
   public void onCreate() {
      //code to execute when the service is first created
       Toast.makeText(this, "onCreate", Toast.LENGTH_LONG).show();
       super.onCreate();
   }

   @Override
   public void onDestroy() {
      //code to execute when the service is shutting down
       super.onDestroy();
   }

   @Override
   public int onStartCommand(Intent intent, int flags, int startId) {
      //code to execute when the service is starting up
       super.onStart(intent, startId);
       return Service.START_STICKY;
   } 
```

}

和清单符号：

```
<application><service android:name="com.myAPP.ServiceForFora" 
             android:exported="true">          
             <intent-filter>
             <action android:name="com.myAPP.ServiceForFora.TRANSLATE"/>                                                            
             </intent-filter>
            </service>
             .............................             
    </application> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:33:51.097

尝试删除此代码：

```
foraIntent.putExtra("CALLBACK_PACKAGE", "com.myAPP");
foraIntent.putExtra("CALLBACK_CLASS", ".ServiceForFora"); 
```

并在服务描述中添加更多参数：

```
android:enabled="true" android:exported="true" android:stateNotNeeded="true" android:excludeFromRecents="true" android:configChanges="keyboard|keyboardHidden|orientation" 
```

# jetty - jetty:run 导致 org.mortbay.jetty.webapp.WebAppContext 的类未找到异常

> ID：10492555
> 
> 赞同：13
> 
> 时间：2012-05-08T04:29:10.210
> 
> 标签：jetty, classnotfoundexception, maven-jetty-plugin

嗨，我有以下配置。

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.3.v20120416</version>
</plugin> 
```

在我的 jetty-env.xml 我有

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">
<Configure class="org.mortbay.jetty.webapp.WebAppContext">
</Configure> 
```

当我使用 mvn jetty:run 运行时，出现以下错误。

```
Caused by: java.lang.ClassNotFoundException: org.mortbay.jetty.webapp.WebAppCont
ext
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at org.eclipse.jetty.util.Loader.loadClass(Loader.java:92)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.nodeClas
s(XmlConfiguration.java:349)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configur
e(XmlConfiguration.java:314)
        at org.eclipse.jetty.xml.XmlConfiguration.configure(XmlConfiguration.jav
a:279)
        at org.mortbay.jetty.plugin.AbstractJettyMojo.applyJettyXml(AbstractJett
yMojo.java:449)
        at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMo
jo.java:467) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T12:35:18.980

我怀疑你有一个 jetty-web.xml 或一些旧的码头配置文件浮动

`org.mortbay.jetty.webapp.WebAppContext`=`org.eclipse.jetty.webapp.WebAppContext`

自从几年前我们搬到 eclipse 基金会后，jetty7 和 8 的包装就不同了。

[http://wiki.eclipse.org/Jetty/Starting/Porting_to_Jetty_7](http://wiki.eclipse.org/Jetty/Starting/Porting_to_Jetty_7)

# ravendb - 如何在 RavenDB 中修改数组中的数字元素

> ID：10492557
> 
> 赞同：0
> 
> 时间：2012-05-08T04:29:21.860
> 
> 标签：ravendb

对不起我的理解湖。我在一个数组中存储了 5 个元素，我可以轻松地向该数组添加、插入、删除元素，但我无法修改特定元素。

我有一个数组

```
"Queue" : [ 1,2,3,4,5,3,3,3,3,3,8,9 ] 
```

我想用 25 替换所有 3 。请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:31:32.667

加载文档，在客户端执行此操作，保存文档。

# android - 我想从谷歌网站在安卓模拟器上运行谷歌日历项目。但它不起作用

> ID：10492559
> 
> 赞同：-4
> 
> 时间：2012-05-08T04:29:33.200
> 
> 标签：android, emulation

```
05-08 11:04:12.336: E/AndroidRuntime(678): FATAL EXCEPTION: main

05-08 11:04:12.336: E/AndroidRuntime(678): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android/com.android.Calendar_googleActivity}: android.os.NetworkOnMainThreadException

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.app.ActivityThread.access$600(ActivityThread.java:123)

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.os.Handler.dispatchMessage(Handler.java:99)

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.os.Looper.loop(Looper.java:137)

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.app.ActivityThread.main(ActivityThread.java:4424)

05-08 11:04:12.336: E/AndroidRuntime(678):  at java.lang.reflect.Method.invokeNative(Native Method)

05-08 11:04:12.336: E/AndroidRuntime(678):  at java.lang.reflect.Method.invoke(Method.java:511)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)

05-08 11:04:12.336: E/AndroidRuntime(678):  at dalvik.system.NativeStart.main(Native Method)

05-08 11:04:12.336: E/AndroidRuntime(678): Caused by: android.os.NetworkOnMainThreadException

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)

05-08 11:04:12.336: E/AndroidRuntime(678):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)

05-08 11:04:12.336: E/AndroidRuntime(678):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)

05-08 11:04:12.336: E/AndroidRuntime(678):  at java.net.InetAddress.getAllByName(InetAddress.java:220)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)

05-08 11:04:12.336: E/AndroidRuntime(678):  at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:164)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:88)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:814)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:182)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:115)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:112)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.google.api.services.calendar.Calendar$CalendarList$List.execute(Calendar.java:510)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.android.Calendar_googleActivity.onAuthToken(Calendar_googleActivity.java:267)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.android.Calendar_googleActivity.gotAccount(Calendar_googleActivity.java:118)

05-08 11:04:12.336: E/AndroidRuntime(678):  at com.android.Calendar_googleActivity.onCreate(Calendar_googleActivity.java:108)

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.app.Activity.performCreate(Activity.java:4465)

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)

05-08 11:04:12.336: E/AndroidRuntime(678):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)

05-08 11:04:12.336: E/AndroidRuntime(678):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:37:44.990

```
 Caused by: android.os.NetworkOnMainThreadException 
```

您一直被警告不要在 UI 线程上进行联网，因为如果网络操作延迟，这可能会导致 UI 滞后和应用程序无响应错误。

在最近的版本中，您现在实际上被禁止 - 由于上面的主动错误 - 试图“摆脱它”

所以让你的网络使用脱离 UI 线程，你应该已经准备好了。我们不需要在这里讨论如何做到这一点 - 它在文档和以前的问题中有很好的介绍。

# c# - 如何从 ViewModel (WPF) 引用 UI 元素？

> ID：10492561
> 
> 赞同：1
> 
> 时间：2012-05-08T04:29:56.607
> 
> 标签：c#, wpf

这对你们来说可能很简单，但我才刚开始使用 WPF，而且我的头脑总是以 Winforms 的方式思考，而且一直都是错误的。

无论如何，这是我的情况。我的视图中有如下标签：

```
UserControl

 <UserControl.Resources>

    <Converters:BooleanToVisibilityConverter x:Key="visibilityConverter"></Converters:BooleanToVisibilityConverter>

    <!-- Error Handling -->
    <Converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />

    <Converters:ErrorConverter x:Key="errorConverter"/>
    <ControlTemplate x:Key="ErrorTemplate">
        <Border BorderBrush="Red" BorderThickness="2">
            <AdornedElementPlaceholder />
        </Border>
    </ControlTemplate>
    <Style x:Key="textBoxInError" TargetType="{x:Type TextBox}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors), Converter={StaticResource errorConverter}}"/>
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="comboBoxInError" TargetType="{x:Type ComboBox}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors), Converter={StaticResource errorConverter}}"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources> 
```

标签

```
<Label Name="IsImageValid"  Content="Image Created" Margin="0,7,-1,0" Style="{StaticResource LabelField}"
                    Grid.ColumnSpan="2" Grid.Row="15" Width="90" Height="28" Grid.RowSpan="2"
                    Grid.Column="1" IsEnabled="True" 
                    Visibility="{Binding IsImageValid,Converter={StaticResource BooleanToVisibilityConverter}}" /> 
```

我试图在我的视图模型中调用这个标签，但不确定如何调用。

我在视图模型中有以下方法，计划使用标签根据以下条件显示一些消息。

```
 ViewModel

 public class MetadataViewModel : NotificationObject, IMetadataViewModel
{
    #region :: Properties ::

    private IEventAggregator eventAggregator;
    private IImageResizerService imageResizer;

    private string headerInfo;
    public string HeaderInfo
    {
        get
        {
            return headerInfo;
        }
        set
        {
            if (this.headerInfo != value)
            {
                this.headerInfo = value;
                this.RaisePropertyChanged(() => this.HeaderInfo);
            }
        }
    }

    public ICommand SaveCommand
    {
        get;
        private set;
    }

    public ICommand CloseCommand
    {
        get;
        private set;
    }

    public ICommand DeleteCommand
    {
        get;
        private set;
    }

    public ICommand SubmitCommand
    {
        get;
        private set;
    }

    public ICommand UnSubmitCommand
    {
        get;
        private set;
    }

    public ICommand LocationSearchCommand
    {
        get;
        private set;
    }

    public ICommand SubjectSearchCommand
    {
        get;
        private set;
    }

    public ICommand RemoveLocationCommand
    {
        get;
        private set;
    }

    public ICommand RemoveSubjectCommand
    {
        get;
        private set;
    }

    private StoryItem selectedStory;
    public StoryItem SelectedStory
    {
        get
        {
            return this.selectedStory;
        }
        set
        {
            if (this.selectedStory != value)
            {
                this.selectedStory = value;
                this.RaisePropertyChanged(() => this.SelectedStory);

                // raise dependencies
                this.RaisePropertyChanged(() => this.CanSave);
                this.RaisePropertyChanged(() => this.CanUnSubmit);
                this.RaisePropertyChanged(() => this.CanDelete);

            }
        }
    }

    public List<Program> ProgramList 
    { 
        get; 
        private set; 
    }

    public List<Genre> GenreList 
    { 
        get; 
        private set; 
    }

    public List<Copyright> CopyrightList 
    { 
        get; 
        private set; 
    }

    public bool CanSave
    {
        get
        {
            bool canSave = false;

            if (this.SelectedStory.IsLockAvailable)
            {
                if (!this.SelectedStory.Submitted)
                {
                    canSave = true;
                }
            }

            return canSave;
        }
    }

    public bool CanDelete
    {
        get
        {
            bool canDelete = false;

            if (this.SelectedStory.IsLockAvailable)
            {
                if (!this.SelectedStory.Submitted)
                {
                    canDelete = true;
                }
            }

            return canDelete;
        }
    }

    public bool CanUnSubmit
    {
        get
        {
            bool canUnSubmit = false;

            if (this.SelectedStory.IsLockAvailable)
            {
                if (this.SelectedStory.Submitted)
                {
                    canUnSubmit = true;
                }
            }

            return canUnSubmit;
        }
    }

    #endregion

    #region :: Contructor ::

    [ImportingConstructor]
    public MetadataViewModel(
            IMetadataController metadataController, 
            IGatewayService gateway, 
            INavigationService navigator,
            IImageResizerService imageResizer,
            IEventAggregator eventAggregator
        )
    {
        this.eventAggregator = eventAggregator;
        this.imageResizer = imageResizer;

        // populate drop-down lists
        this.ProgramList = gateway.GetPrograms(true);
        this.GenreList = gateway.GetGenres();
        this.CopyrightList = gateway.GetCopyrights();

        // add dummy values so the user can de-select
        this.ProgramList.Add(new Program());
        this.GenreList.Add(new Genre());
        this.CopyrightList.Add(new Copyright());

        // commands
        this.SaveCommand = metadataController.SaveCommand;
        this.CloseCommand = metadataController.CloseCommand;
        this.DeleteCommand = metadataController.DeleteCommand;
        this.SubmitCommand = metadataController.SubmitCommand;
        this.UnSubmitCommand = metadataController.UnSubmitCommand;

        this.LocationSearchCommand = new DelegateCommand<string>(this.LocationSearch);
        this.SubjectSearchCommand = new DelegateCommand<string>(this.SubjectSearch);
        this.RemoveLocationCommand = new DelegateCommand<Topic>(this.RemoveLocation);
        this.RemoveSubjectCommand = new DelegateCommand<Topic>(this.RemoveSubject);

        // events
        this.eventAggregator.GetEvent<StorySelectedEvent>().Subscribe(OnStorySelected, ThreadOption.UIThread);
        this.eventAggregator.GetEvent<AddLocationEvent>().Subscribe(OnAddLocation, ThreadOption.UIThread);
        this.eventAggregator.GetEvent<AddSubjectEvent>().Subscribe(OnAddSubject, ThreadOption.UIThread);
        this.eventAggregator.GetEvent<CommandCompletedEvent>().Subscribe(OnCommandCompleted, ThreadOption.UIThread);
        this.eventAggregator.GetEvent<ImageResizeCompletedEvent>().Subscribe(OnImageResizeCompleted, ThreadOption.UIThread);

        this.Initialize();
    }

    #endregion

    private void OnStorySelected(StoryItem selectedStory)
    {
        if (this.selectedStory != null)
        {
            this.Initialize();

            // override the initialized values
            this.SelectedStory = selectedStory;
            this.SelectedStory.HaveChanged = false;
            this.HeaderInfo = "Edit";
        }
    }

    public void OnAddLocation(Topic topic)
    {
        if (topic != null)
        {
            if (!this.SelectedStory.Locations.Contains(topic))
            {
                this.SelectedStory.Locations.Add(topic);
                this.RaisePropertyChanged(() => this.SelectedStory.Locations);
            }
        }
    }

    public void OnAddSubject(Topic topic)
    {
        if (topic != null)
        {
            if (!this.SelectedStory.Subjects.Contains(topic))
            {
                this.SelectedStory.Subjects.Add(topic);
                this.RaisePropertyChanged(() => this.SelectedStory.Subjects);
            }
        }
    }

    private void OnCommandCompleted(string commandType)
    {
        if (commandType == CommandTypes.MetadataEntry)
        {
            this.Initialize();
        }
    }

    private void OnImageResizeCompleted(bool isSuccessful)
    {
        IsImageValid = false;
        if (isSuccessful)
        {

            this.SelectedStory.KeyframeImages = true;
            IsImageValid = true;
        }
        else
        {
            this.SelectedStory.KeyframeImages = false;
            IsImageValid=false;
        }
    }

    private void Initialize()
    {
        this.SelectedStory = new StoryItem();
        this.HeaderInfo = "Create";
    }

    private void LocationSearch(object topicType)
    {
        this.eventAggregator.GetEvent<LocationSearchEvent>().Publish(null);
    }

    private void SubjectSearch(object topicType)
    {
        this.eventAggregator.GetEvent<SubjectSearchEvent>().Publish(null);
    }

    private void RemoveLocation(Topic selected)
    {
        if (selected != null)
        {
            // remove the primary too
            if (this.SelectedStory.PrimaryLocation != null)
            {
                if (string.Equals(this.SelectedStory.PrimaryLocation.FullName, selected.FullName, StringComparison.InvariantCultureIgnoreCase))
                {
                    this.SelectedStory.PrimaryLocation = new Topic();
                }
            }

            bool isSuccessful = this.SelectedStory.Locations.Remove(selected);
            if (isSuccessful)
            {
                this.RaisePropertyChanged(() => this.SelectedStory.Locations);
            }
        }
    }

    private void RemoveSubject(Topic selected)
    {
        if (selected != null)
        {
            // remove the primary too
            if (this.SelectedStory.PrimarySubject != null)
            {
                if (string.Equals(this.SelectedStory.PrimarySubject.FullName, selected.FullName, StringComparison.InvariantCultureIgnoreCase))
                {
                    this.SelectedStory.PrimarySubject = new Topic();
                }
            }

            bool isSuccessful = this.SelectedStory.Subjects.Remove(selected);
            if (isSuccessful)
            {
                this.RaisePropertyChanged(() => this.SelectedStory.Subjects);
            }
        }
    }
}

        private booly _isImageValid;

        public bool IsImageValid
        {
        get
        { 
            return _isImageValid;
        }
        set
        {
            _isImageValid = value;
            this.RaisePropertyChanged(() => this.IsImageValid);
        }
    }
} 
```

老实说，我不知道视图将如何理解绑定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T04:37:50.867

[一种标准方法是在 ViewModel 中有一个类似“IsImageValid”的布尔属性...然后在 XAML 中，使用 BooleanToVisibilityConverter http://msdn.microsoft.com/en-](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)将标签的 Visibility 属性绑定到该属性[我们/图书馆/system.windows.controls.booleantovisibilityconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)

```
<UserControl.Resources>
  <BooleanToVisibilityConverter
         x:Key="BooleanToVisibilityConverter" />
</UserControl.Resources>
Then use it in one or more bindings like this:

<Label Visibility="{Binding IsImageValid, 
       Converter={StaticResource BooleanToVisibilityConverter}}" 
   ......... /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T06:16:45.710

请先阅读[这篇](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)文章。

如果您想在标签中显示一些文本，那么您必须执行以下步骤：

*   将**属性**添加到您的 Viewmodel
*   在您的 Viewmodel 中实施**INotifyPropertyChanged并在属性更改时引发事件**
*   在您的视图中将**DataContext**设置为您的 Viewmodel 实例
*   在 xaml 中为您的属性创建一个**绑定**

就这样 ;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T05:16:38.657

您不必从 ViewModel 中看到 View，它是 MVVM 模式背后的基本原理。View 知道 VM，而 VM 不知道 View。相反，您可以按照@JeffN825 的建议进行操作，至少我也建议这样做。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T06:44:57.553

将以下内容添加到您的用户控件属性中：

```
xmlns:VM="clr-namespace:<ProjectName>.ViewModels" //this place throws exception,what is <ProjectName> ? 
```

要将 DataContext 分配给用户控件，如果尚未分配 DataContext，请使用以下代码：

```
<UserControl.DataContext>     //where to add this part ?  
    <VM:MyViewModel>
</UserControl.DataContext> 
```

通过以下方式绑定标签的可见性：

```
Visibility="{Binding IsImageValid}"   //this is done 
```

继承 VM 的 ViewModel 或 ViewModelBase 应实现**INotifyPropertyChanged**接口：

```
namespace MyApp.ViewModels           //this i have to do it at xaml.cs file  or suppose to be in viewmodel ?
{
    public class MyViewModel : INotifyPropertyChanged
    {...
     ...
    }
} 
```

在你的虚拟机中声明数据成员和属性，如下所示：

```
private System.Windows.Visibility _isImageValid; //add this code in my viewmodel

public System.Windows.Visibility IsImageValid
{
    get
    { 
        return _isImageValid;
    }
    set
    {
        _isImageValid = value;
        this.RaisePropertyChanged(() => this.IsImageValid);
    }
} 
```

# python - 日期正则表达式产生错误输出

> ID：10492562
> 
> 赞同：0
> 
> 时间：2012-05-08T04:30:09.850
> 
> 标签：python

我需要在 Python 中找到其模式与日期格式匹配的文件。有人可以帮我解决这个问题。我有一个正则表达式，但它没有按要求工作。

```
date = '2012-01-15'

match = re.findall(r'^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$', date)
print match 
```

输出：

```
[('20', '01','15')] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:45:33.237

似乎您只是错过了完整年份匹配的一对括号，并且您可能想用以下方式抑制世纪匹配`?:`：

```
match = re.findall(r'^((?:19|20)\d\d)[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$', date)
#                     ^ ^^          ^ 
```

这给出`[('2012', '01', '15')]`了你的例子

# php - lastInsertId 在 Postgresql 中不起作用

> ID：10492566
> 
> 赞同：8
> 
> 时间：2012-05-08T04:30:42.953
> 
> 标签：php, postgresql, pdo, lastinsertid

我正在使用 Postgresql，当我想使用 PDO 检索最新的插入 ID 时，我遇到了问题。这是我的代码：

```
$db->lastInsertId('columnName'); 
```

错误消息说

```
SQLSTATE[42P01]: Undefined table: 7 ERROR: relation "columnName" does not exist 
```

我想我对 PHP 手册中所述的“序列对象”有一些误解。

```
Note:

Returns the ID of the last inserted row, or the last value from a sequence object, 
depending on the underlying driver. For example, PDO_PGSQL() requires you to specify the 
name of a sequence object for the name parameter. 
```

目前，“columnName”是该自动递增属性的字符串。谁能指出我哪里出错了？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T04:40:17.410

PostgreSQL 使用[序列](http://www.postgresql.org/docs/current/interactive/sql-createsequence.html)为[`serial`](http://www.postgresql.org/docs/9.1/static/datatype-numeric.html#DATATYPE-SERIAL)列生成值，列`serial`通常用于 PostgreSQL 中的“自动递增”列。序列具有名称，并且通常独立于任何特定表，因此您可以让一个序列为多个不同的表生成唯一 ID；序列名称是[`lastInsertId`](http://php.net/manual/en/pdo.lastinsertid.php)它想要的参数：

> 例如，**PDO_PGSQL()**要求您为***name***参数指定序列对象的名称。

PostgreSQL创建的序列对象自动命名为`[table]_[column]_seq`，所以：

```
$id = $db->lastInsertId('tableName_columnName_seq'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-16T19:14:40.540

我今天遇到了这个问题，lastInsertId() 只返回 false。在另一个线程上找到了解决我问题的答案：[https ://stackoverflow.com/a/31638196/1477123](https://stackoverflow.com/a/31638196/1477123)

```
CREATE TABLE ingredients (
    id         SERIAL PRIMARY KEY,
    name       varchar(255) NOT NULL,
); 
```

所以序列名称将是成分_id_seq

```
$db->lastInsertId('ingredients_id_seq'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-22T16:56:12.433

所以**序列名称**将`ingredients_id_seq`是

```
$db->lastInsertId('ingredients_id_seq'); 
```

这种格式实际上解决了我的问题！！！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-02T09:34:37.680

使用序列名称而不是列名称

```
$db->lastInsertId('columnName'); 
```

# mongodb - 为什么 mongodump 在进行数据库转储时会显示此“跳过收集”消息？

> ID：10492570
> 
> 赞同：1
> 
> 时间：2012-05-08T04:31:42.173
> 
> 标签：mongodb, mongodump

在执行简单的[mongodump](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongodump)时，我遇到了这个错误/警告/信息消息

```
Tue May  8 04:22:30    skipping collection: myDb.myCollection.$myCollection.myProp_1
Tue May  8 04:22:30    skipping collection: myDb.myCollection2.$myCollection2._id_1 
```

我想知道这是什么意思？以及我是否应该担心我的转储不是 100% 的源副本？

使用的命令行是：

```
./mongodump -v -h localhost 
```

# php - 在 PHP 中查找远程/外部文件 mimetypes

> ID：10492575
> 
> 赞同：2
> 
> 时间：2012-05-08T04:32:21.893
> 
> 标签：php, url, external, mime-types

出于安全目的，以防止恶意或不需要的文件类型，我将如何从外部/远程文件（又名 url 链接，如 www.someurl.com/video.avi）中识别 mimetypes？我读过有一种使用 cURL 的方法，但如果可能的话，我想找到一个 PHP 本机解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T08:02:02.837

您可以使用[get_headers](http://php.net/manual/en/function.get-headers.php)

例子：

```
<?php

$headers = get_headers('http://website.com/image.png');
var_dump($headers);

?> 
```

输出：

```
array(8) {
  [0]=>
  string(15) "HTTP/1.1 200 OK"
  [1]=>
  string(35) "Date: Tue, 08 May 2012 07:56:54 GMT"
  [2]=>
  string(14) "Server: Apache"
  [3]=>
  string(44) "Last-Modified: Sun, 06 May 2012 23:09:55 GMT"
  [4]=>
  string(20) "Accept-Ranges: bytes"
  [5]=>
  string(22) "Content-Length: 707723"
  [6]=>
  string(17) "Connection: close"
  [7]=>
  string(23) "Content-Type: image/png"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-27T14:53:40.667

假设你不想下载完整的文件，你可以检查远程服务器的 mime 类型：

```
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_NOBODY, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_exec($ch);
return curl_getinfo($ch, CURLINFO_CONTENT_TYPE); 
```

或者也可以使用 curl，您可以下载完整文件（通常对性能不利），然后在本地使用 mime_content_type 或 finfo_file

# patch - IDA 程序集修补失败，“无法从当前位置到达目的地”

> ID：10492577
> 
> 赞同：1
> 
> 时间：2012-05-08T04:32:29.163
> 
> 标签：patch, disassembly, ida

我是 IDA（和逆向工程）的新手。

我正在尝试使用编辑->补丁菜单中的“补丁->程序集”选项，但它失败并出现我无法理解的错误。

我当前的行是“jnz short func”（其中 func 是我从 loc_xxxx 重命名的标签），我正在尝试将其更改为“jmp short func”，但是当我单击“确定”时，我收到一个消息框：“无法从当前位置到达目的地”。

谁能解释这是什么意思，为什么它不起作用？我试图到处搜索，但找不到任何答案！

我还必须补充一点，这是我找到的 IDA 教程的一部分（在 tut4you.com 中）。

再次感谢您的帮助，我真的很坚持！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:20:34.187

“jnz short func”和“jmp short func”指令的字节数不同..尽量保持代码与原始代码对齐..还有jnz，jz，ja，..（条件跳转）不要使用远指针（即段间）..但只有 jmp..

# tcl - Tcl/Tk 脚本制作一个在单击时切换颜色的按钮？

> ID：10492586
> 
> 赞同：2
> 
> 时间：2012-05-08T04:33:21.533
> 
> 标签：tcl, tk

只是制作一个非常简单的 Tcl/Tk 程序来学习，但我遇到了一些麻烦。

我需要在单击时使按钮切换颜色，因此它会以红色开始，单击时将变为绿色，如果再次单击将变回红色。

我已经把它从红色变成了绿色，但我不知道如何让它回到另一个方向。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:10:40.870

这不是很难（除了在 OSX 上，这种事情*直接*违反平台 UI 准则）你只需要使用合适的回调：

```
button .b -background red -command [list toggleTheButton .b]
set state(.b) 1
proc toggleTheButton w {
    global state
    if {$state($w)} {
        $w configure -background green
    } else {
        $w configure -background red
    }
    set state($w) [expr {!$state($w)}]
} 
```

当您需要切换时，请考虑使用 a`checkbutton`代替，因为用户会更快地理解它。

# 3d - 如何在光线行进中计算远处的视锥半径（即像素的大小）？

> ID：10492590
> 
> 赞同：2
> 
> 时间：2012-05-08T04:33:39.030
> 
> 标签：3d, glsl, antialiasing, raytracing, raycasting

我是 GLSL 中的“光线追踪距离场”（正确的术语：球体追踪）。为了在它上面实现锥形行进（并且还要最小化光线行进步骤的数量，无论是否添加了锥形行进），我需要估计任何给定距离处的光线锥的半径。

回想一下 raymarching 距离场，当与对象的距离小于阈值时，会记录一次“命中”，通常使用名为 nearLimit 或 epsilon 的代码。如果我们将这个阈值随着行进的距离呈指数增加，这个阈值可以看作等同于射线锥半径——这样，我们不会将细直线射入太空，而是根据透视投影扩展锥体。这更准确地涵盖了捕捉“正确”的远处物体（此时让我们暂时忽略在距离 t 处的视锥中混合材质和过滤*所有相交物体的法线的问题......）。*

在第 0 步，这个半径可以近似为诸如

```
float fInitialRadius = 1 / min(screenwidth, screenheight); 
```

然后可以通过将起始半径应用于距离，在每一步以指数方式增加：

```
fNearLimit = fTotalDist * fInitialRadius;  // after each raymarching step 
```

这工作正常，但仍然有工件。如果我使用 fInitialRadius*fInitialRadius（由于 640px 帧缓冲区和单位宽度视图平面的初始半径为 1/640 导致数字更小），我会得到更少的伪像和更准确的结果。但是这两种方法都不准确，第一种过于急切（过早地增加半径），后者过于懒惰（过早地增加半径）。

在给定距离处增加 fNearLimit / 圆锥半径的最准确因素必须很可能考虑到我当前的视野，并且会根据视野是 45° 或 60° 或 90° 还是...

**TL; DR**：我想知道**给定距离的圆锥半径的正确计算或最可接受的近似值是什么？给**定步骤 0 的初始像素半径和视场角？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:36:39.423

圆锥的半径线性对应于距其尖端的距离。（否则它不是一个圆锥体！）

因此，如果您的锥体`initialRadius`在与屏幕平面相交时具有，那么稍后：

```
radius(distance) = distance * initialRadius / focalDistance 
```

您必须在每一步重新计算该值，因为每一步都会带您走不同的距离。

这里`distance`是光线到相机`focalDistance`的距离，是屏幕平面到相机的距离。

（对于不在屏幕中心的`focalDistance`像素，使用屏幕平面上像素与相机的距离可能更准确。）

（或者也许更好，根本不使用*距离*。只需使用*深度*，即仅垂直于屏幕平面的矢量分量。如果您已将场景旋转到，这可能是您的 z 轴或 y 轴相机框架。）

# trigger.io - “forge run web”找不到 node.js

> ID：10492592
> 
> 赞同：1
> 
> 时间：2012-05-08T04:33:57.470
> 
> 标签：trigger.io, forge

我开始学习 Trigger.io 教程。在 iPhone 模拟器和 Android 模拟器中成功查看输出后，我决定我想在桌面浏览器中查看它，所以`forge run web`按照[文档](http://docs.trigger.io/en/v1.3/web/index.html)运行。但是，这不起作用：该命令显然找不到 Node.js，即使它已安装、最新并且在我的路径上。

```
(forge-environment)spksmb:demo-app sampablokuper$ forge run web
[   INFO] Forge tools running at version 3.3.0
[   INFO] enabled platforms: ['web']
[   INFO] <ForgeTask (web)> running...
[   INFO] reading app code from /Volumes/Data/sampablokuper/Documents/demo-app/src
[   INFO] writing new app to /Volumes/Data/sampablokuper/Documents/demo-app/development
[   INFO] Checking JavaScript files...
[   INFO] JavaScript check complete
[   INFO] Verifying your configuration settings...
[   INFO] Configuration settings check complete
[  ERROR] failed to run npm: do you have Node.js installed and on your path? while running run_web((), {})
[  ERROR] failed to run npm: do you have Node.js installed and on your path?
(forge-environment)spksmb:demo-app sampablokuper$ which node
/opt/local/bin/node
(forge-environment)spksmb:demo-app sampablokuper$ node -v
v0.6.15 
```

这是一个错误，还是我在某个地方犯了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:08:58.803

实际上`npm`我们正试图在这里运行；当然，如果`node`在你的路径上，我也希望`npm`在那里，但值得检查它在那里并且可以执行：

```
which npm
npm -v
npm ls 
```

如果`npm`确实在您的路径上，请将您的`forge-error.log`文件发送到 support@trigger.io，我们将对其进行查看。

# php - 正则表达式匹配没有空格的单词

> ID：10492594
> 
> 赞同：0
> 
> 时间：2012-05-08T04:34:20.657
> 
> 标签：php

我正在尝试做一个 preg_match 来过滤不需要的垃圾邮件查询，我想匹配 preg_match 中列出的任何单词，如果它后面没有空格则过滤它。

因此，例如，如果我在 preg_match 中有单词 balloon，那么我想过滤诸如“balloon1”或“balloond”或“balloonedfbdg”之类的任何内容，并允许在诸如“balloon big”、“balloon small”之类的气球后面有空格的任何内容.

我有很多来自谷歌的查询，它们只需要一个词，然后添加一大堆我想过滤掉的废话。这只是几句话，但让我很恼火的是来到这里并找到解决这个问题的答案。

我已经为一些使用正则表达式的垃圾邮件查询使用了 preg_match，但我不知道如何匹配没有空格的内容并允许有空格的内容。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:38:47.097

你的表达：`/(balloon|otherwordone|othertwo)[^\s]/i`

如果后面**没有**空格 (\s)，则与列出的单词匹配

编辑：使用`\B`（不是单词边界）：

```
/(balloon|otherwordone|othertwo)\B/i 
```

这可以防止常见的句子符号触发正则表达式（如点、逗号）。

# android - 在 Android 的远程服务器中上传文件

> ID：10492599
> 
> 赞同：0
> 
> 时间：2012-05-08T04:35:12.163
> 
> 标签：android

我按照本教程进行操作，但不是得到 200，而是总是得到 302 作为服务器响应。

[导读](http://androidsnips.blogspot.com/2010/08/upload-file-to-remote-server-in-android.html)

有人可以检查一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:05:52.263

我在我的应用程序中使用了此代码。它的工作。它可能会帮助你。

```
private String doFileUpload() {

    final DataOutputStream dos;

    String exiting_file_path = filePath;
    String boundary = "*****";
    String twohypens = "--";
    String lineend = "\r\n";
    int maxBufferSize = 1 * 1024 * 1024;
    int buferSize;
    int bytesRead;
    String url_string = "your URL";

    try {
        Log.d("Debug", "Start Uploading");
        FileInputStream fileInStream = new FileInputStream(
                exiting_file_path);
        URL url = new URL(url_string);
        httpUrlConn = (HttpURLConnection) url.openConnection();

        httpUrlConn.setDoInput(true);
        httpUrlConn.setDoOutput(true);
        httpUrlConn.setUseCaches(false);
        httpUrlConn.setRequestMethod("POST");
        httpUrlConn.setRequestProperty("connection", "Keep-Alive");
        httpUrlConn.setRequestProperty("content-type",
                "multipart/form-data;boundary=" + boundary);

        dos = new DataOutputStream(httpUrlConn.getOutputStream());

        dos.writeBytes(twohypens + boundary + lineend);
        dos.writeBytes("content-disposition:form-data; name=\"upload_file\"; filename=\""
                + exiting_file_path + "\"" + lineend);
        dos.writeBytes(lineend);

        int buferAvailable = fileInStream.available();
        buferSize = Math.min(buferAvailable, maxBufferSize);
        final byte[] buffer = new byte[buferSize];

        bytesRead = fileInStream.read(buffer, 0, buferSize);

        while (bytesRead > 0) {
            dos.write(buffer, 0, buferSize);
            buferAvailable = fileInStream.available();
            buferSize = Math.min(buferAvailable, maxBufferSize);
            bytesRead = fileInStream.read(buffer, 0, buferSize);
        }
        dos.writeBytes(lineend);
        dos.writeBytes(twohypens + boundary + twohypens + lineend);
        fileInStream.close();
        dos.flush();
        dos.close();

    } catch (FileNotFoundException e) {
        Toast.makeText(getApplicationContext(), "" + e, 1).show();
        e.printStackTrace();
    } catch (MalformedURLException e) {
        Toast.makeText(getApplicationContext(), "" + e, 1).show();
        e.printStackTrace();
    } catch (IOException e) {
        Toast.makeText(getApplicationContext(), "" + e, 1).show();
        e.printStackTrace();
    }

    try {
        DataInputStream inStream = new DataInputStream(
                httpUrlConn.getInputStream());

        while ((STRRRR = inStream.readLine()) != null) {
            Log.d("Debug", "Server Response " + STRRRR);
        }
        inStream.close();

    } catch (IOException e) {
        e.printStackTrace();
    }

    return STRRRR;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:35:53.587

您很可能对 URL 做了一些有趣的事情，例如将其指定为“http://example.com”，然后服务器立即使用重定向代码 302 将您重定向到“http://example.com/”（注意末尾的斜杠） .

检查服务器返回的标头，它通常包含正确的位置。

# javascript - 在 JavaScript 中扩展/覆盖？

> ID：10492602
> 
> 赞同：0
> 
> 时间：2012-05-08T04:35:28.230
> 
> 标签：javascript

我想使用 JavaScript 编写一个小游戏，`<canvas>`但首先我想确定使用对象的“正确”或至少常见的方法。

我特别难以理解的一个主题是如何实现`overriding`方法。

当我创建一个对象时，我可能有这个：

```
function MyObject()
{
    var base = {};

    base.i = 0;
    base.update = function()
    {
        base.i ++;
    }

   return base;
} 
```

然后，当我创建另一个应该以相同成员开头的对象时，我使用它：

```
function AnotherObject()
{
    var base = new MyObject();

    base.j = 0;

    return base;
} 
```

我想`AnotherObject.update()`在仍然运行我拥有的逻辑的同时添加更多内容`MyObject.update()`，但是当我在其中执行此操作时`AnotherObject()`：

```
base.update = function()
{
    j ++;
} 
```

然后我当然失去了我添加的逻辑`MyObject.update()`。

我该如何编写`AnotherObject.update()`以便它也调用由`update()`定义的原始方法`MyObject`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:48:49.087

首先，我建议您阅读这篇[出色的 MDN 文章](https://developer.mozilla.org/en/JavaScript/Introduction_to_Object-Oriented_JavaScript)。它会启发你。

您可以通过这种方式实现子类化：

```
function MyObject() {
  this.i = 0;
}

MyObject.prototype.update = function() {
  this.i++;
}

function AnotherObject() {
  MyObject.call(this);
  this.j = 0;
}

AnotherObject.prototype = new MyObject;

AnotherObject.prototype.constructor = AnotherObject;

AnotherObject.prototype.update = function() {
  MyObject.prototype.update.call(this);
  this.j++;
}

obj = new AnotherObject();
console.log(obj.i); //0
console.log(obj.j); //0

obj.update();
console.log(obj.i); //1
console.log(obj.j); //1

console.log(obj instanceof MyObject) //true
console.log(obj instanceof AnotherObject) //true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:44:31.693

+1 为 zzzzBov 的评论。你在`base`应该使用的时候使用`prototype`。不是在构造函数内部，而是在构造函数之后进一步细化类定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:52:17.813

```
function MyObject() {
    this.value = 5;
}
MyObject.prototype.update = function() {
     this.value++;
}
Var newObject = new MyObject();
newObject.update =function() {
    value--;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T04:54:51.787

正如其他人建议的那样，您应该遵循基于原型的继承。这是正确的做法。

但是作为您到目前为止所做的事情的解决方案，您可以执行如下所示的操作

```
function MyObject() {
    var base = {};
    base.i = 0;
    base.update = function () {
        this.i++;
    }
    base.show = function () {
        console.log("i is " + this.i);
    }
    return base;
}

function AnotherObject() {
    var base = new MyObject();
    base.j = 0;
    var update = base.update;  // proxy variable that refers to original `update`
    base.update = function () {
        update.call(this);  // invoke original `update`
        this.j++;
    }
    var show = base.show;  // proxy variable that refers to original `show`
    base.show = function () {
        show.call(this);   // invoke original `show`
        console.log("j is " + this.j);
    }
    return base;
}

var t = AnotherObject();
t.update();
t.show(); 
```

# cakephp - 我如何使用 cakephp 和肥皂调用数据库中的数据？

> ID：10492604
> 
> 赞同：0
> 
> 时间：2012-05-08T04:35:33.677
> 
> 标签：cakephp, soap, wsdl

每个人

我是 cakephp 框架的新手。我想使用 cakephp 肥皂调用数据库中的数据。

我在此链接中使用了一个组件 >> [http://bakery.cakephp.org/articles/char101/2009/06/05/a-component-to-help-creating-soap-services](http://bakery.cakephp.org/articles/char101/2009/06/05/a-component-to-help-creating-soap-services)

这是我的soap.php（SOAP 组件）

```
<?php  
App::import('Vendor', 'IPReflectionClass', array('file' => 'wshelper' . DS . 'lib' . DS . 'soap' . DS . 'IPReflectionClass.class.php'));
App::import('Vendor', 'IPReflectionCommentParser', array('file' => 'wshelper' . DS . 'lib' . DS . 'soap' . DS . 'IPReflectionCommentParser.class.php'));
App::import('Vendor', 'IPXMLSchema', array('file' => 'wshelper' . DS . 'lib' . DS . 'soap' . DS . 'IPXMLSchema.class.php'));
App::import('Vendor', 'IPReflectionMethod', array('file' => 'wshelper' . DS . 'lib' . DS . 'soap' . DS . 'IPReflectionMethod.class.php'));
App::import('Vendor', 'WSDLStruct', array('file' => 'wshelper' . DS . 'lib' . DS . 'soap' . DS . 'WSDLStruct.class.php'));
App::import('Vendor', 'WSDLException', array('file' => 'wshelper' . DS . 'lib' . DS . 'soap' . DS . 'WSDLException.class.php'));

/** 
 * Class SoapComponent 
 * 
 * Generate WSDL and handle SOAP calls 
 */ 
class SoapComponent extends Component 
{ 
    var $params = array(); 

    function initialize(&$controller) 
    { 
        $this->params = $controller->params; 
    } 

    /** 
     * Get WSDL for specified model. 
     * 
     * @param string $modelClass : model name in camel case 
     * @param string $serviceMethod : method of the controller that will handle SOAP calls 
     */ 
    function getWSDL($modelId, $serviceMethod = 'call') 
    { 
        $modelClass = $this->__getModelClass($modelId); 
        $expireTime = '+1 year'; 
        $cachePath = $modelClass . '.wsdl'; 

        // Check cache if exist 
        $wsdl = cache($cachePath, null, $expireTime); 

        // If DEBUG > 0, compare cache modified time to model file modified time 
        if ((Configure::read() > 0) && (! is_null($wsdl))) { 

            $cacheFile = CACHE . $cachePath; 
            if (is_file($cacheFile)) { 
                $modelMtime = filemtime($this->__getModelFile($modelId)); 
                $cacheMtime = filemtime(CACHE . $cachePath); 
                if ($modelMtime > $cacheMtime) { 
                    $wsdl = null; 
                } 
            } 

        } 

        // Generate WSDL if not cached 
        if (is_null($wsdl)) { 

            $refl = new IPReflectionClass($modelClass); 

            $controllerName = $this->params['controller']; 
            $serviceURL = Router::url("/$controllerName/$serviceMethod", true); 

            $wsdlStruct = new WSDLStruct('http://schema.example.com',  
                                         $serviceURL . '/' . $modelId,  
                                         SOAP_RPC,  
                                         SOAP_LITERAL); 
            $wsdlStruct->setService($refl); 
            try { 
                $wsdl = $wsdlStruct->generateDocument(); 
                // cache($cachePath, $wsdl, $expireTime); 
            } catch (WSDLException $exception) { 
                if (Configure::read() > 0) { 
                    $exception->Display(); 
                    exit(); 
                } else { 
                    return null; 
                } 
            } 
        } 

        return $wsdl; 
    } 

    /** 
     * Handle SOAP service call 
     * 
     * @param string $modelId : underscore notation of the called model 
     *                          without _service ending 
     * @param string $wsdlMethod : method of the controller that will generate the WSDL 
     */ 
    function handle($modelId, $wsdlMethod = 'wsdl') 
    { 
        $modelClass = $this->__getModelClass($modelId); 
        $wsdlCacheFile = CACHE . $modelClass . '.wsdl'; 

        // Try to create cache file if not exists 
        if (! is_file($wsdlCacheFile)) { 
            $this->getWSDL($modelId); 
        } 

        if (is_file($wsdlCacheFile)) { 
            $server = new SoapServer($wsdlCacheFile); 
        } else { 
            $controllerName = $this->params['controller']; 
            $wsdlURL = Router::url("/$controllerName/$wsdlMethod", true); 
            $server = new SoapServer($wsdlURL . '/' . $modelId); 
        } 
        $server->setClass($modelClass); 
        $server->handle(); 
    } 

    /** 
     * Get model class for specified model id 
     * 
     * @access private 
     * @return string : the model id 
     */ 
    function __getModelClass($modelId) 
    { 
        $inflector = new Inflector; 
        return ($inflector->camelize($modelId) . 'Service'); 
    } 

    /** 
     * Get model id for specified model class 
     * 
     * @access private 
     * @return string : the model id 
     */ 
    function __getModelId($modelClass) 
    { 
        $inflector = new Inflector; 
        return $inflector->underscore(substr($class, 0, -7)); 
    } 

    /** 
     * Get model file for specified model id 
     * 
     * @access private 
     * @return string : the filename 
     */ 
    function __getModelFile($modelId) 
    { 
        $modelDir = dirname(dirname(dirname(__FILE__))) . DS . 'models'; 
        return $modelDir . DS . $modelId . '_service.php'; 
    } 
} 
?> 
```

这是我的 service_controller.php

```
<?php  
class ServiceController extends AppController 
{ 
    public $name = 'Service'; 
    public $uses = array('TestService');
    public $helpers = array(); 
    public $components = array('Soap');

    /** 
     * Handle SOAP calls 
     */ 
    function call($model) 
    { 
        $this->autoRender = FALSE; 
        $this->Soap->handle($model, 'wsdl'); 
    } 

    /** 
     * Provide WSDL for a model 
     */ 
    function wsdl($model) 
    { 
        $this->autoRender = FALSE; 
        header('Content-Type: text/xml; charset=UTF-8'); // Add encoding if this doesn't work e.g. header('Content-Type: text/xml; charset=UTF-8');  
        echo $this->Soap->getWSDL($model, 'call'); 
    }

} 
?> 
```

这是我的 test_service.php

```
<?php  
class TestService extends AppModel 
{ 
    var $name = 'TestService';
    var $useTable = 'Test'; 

    /** 
    * Get one record 
    * @param string
    * @return string
    */ 
    function view() { 
        $this->set('text', $this->TestService->find('all'));
        return $text ;
    } 
}
?> 
```

我想调用数据库中的数据，但我的代码不能从数据库调用。这是我在soapUi中的错误

```
Call to a member function find() on a non-object 
Undefined property: TestService::$TestService 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:26:57.363

改变

```
$this->set('text', $this->TestService->find('all')); 
```

至

```
$this->set('text', $this->find('all')); 
```

尽管在模型中调用没有意义`->set()`，但我认为您实际上希望返回：

```
return $this->find('all'); 
```

# c# - 部分类的序列化

> ID：10492614
> 
> 赞同：0
> 
> 时间：2012-05-08T04:36:16.377
> 
> 标签：c#, xml, serialization, xsd, partial-classes

我使用 xsd.exe 从 xml 架构创建一个类。它生成了几个部分类，其中一个是 Apple。我向 Apple 添加了几个字段。现在我想将对象序列化回 XML，但只能根据原始模式。我想跳过我介绍过的字段。

有什么方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:38:33.040

IIRC 你只需要用 [XmlIgnore] 装饰新字段

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlignoreattribute.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlignoreattribute.aspx)

# e-commerce - OFBiz 移动商务（移动商务）？

> ID：10492615
> 
> 赞同：0
> 
> 时间：2012-05-08T04:36:16.943
> 
> 标签：e-commerce, ofbiz

OFBiz 中是否有针对移动电子商务商店的功能？我已经将 OFBiz 用于电子商务商店。OFBiz 具有强大的电子商务功能。我只是想知道有什么方法可以建立具有 OFBiz 功能的移动电子商务商店，或者我们可以为移动设备进行不同的设计并保持相同的 OFBiz 功能？我找不到任何答案。请用最好的方法帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:39:51.767

您可以尝试创建一个新应用程序，该应用程序将重用现有内容。

看看 hhfacility，它是用于手持设备设施管理的简化界面。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:15:33.213

移动应用也可以使用同一个应用，只是Presentation层的FTL不同，后端服务保持不变。

# php - 如何使用带有 json 和 php 的 jquery 的 $.ajax 函数上传文件

> ID：10492617
> 
> 赞同：2
> 
> 时间：2012-05-08T04:36:26.657
> 
> 标签：php, jquery, ajax, json

我正在尝试使用 jQuery 的`$.ajax`函数上传文件，但没有得到任何输出。有人请帮我解决这个问题。我不知道这个脚本是否正确。我的脚本是：

```
$.ajax({
  url:'newsup.php',
  data: "",
  type: 'POST',
  contentType:'multipart/form-data',
  dataType: 'json',
  catche: 'false',

  success:function(data6)
  {
    $("#disp").removeClass().addClass((data6.error=== false)? 'success':'error').html(data6.msg).fadeIn('fast');
    //dele();
    if($("#disp").hasClass('success'))
    {
      alert("success");
      setTimeout("$('#disp').fadeOut('slow')",3000);            
    }
  },

  error:function(XMLHttpRequest,textStatus,errorThrown)
  {
    $("#disp").removeClass().addClass('error').html("There was an <strong>"+errorThrown+"</strong> error due to  <strong>"+textStatus+" condition").fadeIn('fast');
  }              

}); 
```

我还需要使用 jQuery 从文件上传字段获取数据的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T05:57:41.113

请为此使用插件。
在我看来，这个插件是更好的解决方案。您不需要记住所有选项等。只需将您的“ajax”替换为“ajaxForm”。

请阅读以下示例，
[http://jquery.malsup.com/form/#ajaxForm](http://jquery.malsup.com/form/#ajaxForm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-16T22:00:55.567

我就是这样做的。使用 FormData 对象。

注意：for 语句的奇怪语法只是将“f”设置为 array[i] 实例。

```
 $("#submit").click(function () {
            var formData = new FormData();
            for (var i = 0, f; f = fileArray[i]; i++) {
                formData.append("opmlFile", f);
            }
            $.ajax({
                url: "/Documents/SaveFiles/" + @Model,
                type: "POST",
                data: formData,
                cache: false,
                contentType: false,
                processData: false
            })
            .error(function (xhr, status, error) {
                $.notify(error, true);
            })
            .success(function (data, status, xhr) {
                $.notify("Success");
            });
        }); 
```

不幸的是，我不记得我是从哪篇文章中得到的，但它是 Stack Overflow 上的其他人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T05:10:42.217

AJAX 不支持文件上传。有像[ajaxfileupload](http://www.phpletter.com/Our-Projects/AjaxFileUpload/)这样的插件，它基本上创建一个隐藏的表单并动态上传你的文件。

看看[here](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)并阅读Oli的答案

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-16T18:30:31.750

我正在使用它，它工作正常：

```
 $('#btnUploadFile').on('click', function () {
                var data = new FormData();
                var files = $("#fileUpload").get(0).files;

                // Add the uploaded file content to the form data collection
                if (files.length > 0) {
                    data.append("upload", files[0]);
                }

                // Make Ajax request with the contentType = false, and procesDate = false
                var ajaxRequest = $.ajax({
                    type: "POST",
                    url: "/api/documents",
                    contentType: false,
                    processData: false,
                    data: data,

                    error: function (xhr, status, error) {
                        console.log(xhr);
                        console.log(status);
                        console.log(error);
                        console.log(data);
                    }
                });

                ajaxRequest.done(function (xhr, textStatus) {
                    $("#response").attr('class', "alert alert-success");
                    $("#response").html("File uploaded successfully");
                });

            }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T06:02:35.810

您可以使用[Jquery File Upload Plugins 1](http://www.jquery4u.com/plugins/10-jquery-file-uploads/)或[Jquery File Upload Plugins 2](http://www.jquery4u.com/plugins/10-jquery-ajax-file-uploader-plugins/)这两个插件中的任何一个，并且此脚本没有错误。

希望能帮助到你

谢谢，拉希德

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-04T09:02:04.493

Ajax 支持使用 FormData 对象上传文件，也支持除 IE8/9 之外的所有主流浏览器，见下文

[https://developer.mozilla.org/en-US/docs/Web/API/FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-11T18:32:14.223

另一种选择是对文件内容进行base64编码并将其作为字符串发送，在后端对其进行解码。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-02T08:58:11.030

只需在表单上使用提交事件来发送文件并防止默认表单操作

`$('#form').submit(function(e) { return false; });`

并通过以下方式获取服务器端的文件

```
$_FILES['inputName']; 
```

# php - PHP NOW() 错误

> ID：10492618
> 
> 赞同：0
> 
> 时间：2012-05-08T04:36:27.157
> 
> 标签：php, mysql

我需要一点帮助，我正在尝试将一些数据插入到 MYSQL 表中，其中包括订单的日期和时间的现在值。

代码：

```
$query= "INSERT INTO ordertable
VALUES ('".$listauthor."','".$ordernumber.",'"NOW()"','"NOW()"')"; 
```

错误：

```
Parse error: syntax error, unexpected T_STRING in C:\xampp\htdocs\createbasket.php on line 15 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T04:40:07.653

从周围删除引号`NOW()`......这是一个MySQL函数......不是字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T04:41:33.320

您不想`NOW()`用引号封装。你需要这样做：

```
$query= "INSERT INTO ordertable 
             VALUES ('".$listauthor."','".$ordernumber."',NOW(),NOW())"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T04:43:06.093

```
$query= "INSERT INTO ordertable VALUES ('".$listauthor."','".$ordernumber.",'"NOW()"','"NOW()"')"; 
```

现在不应该被引用

```
$query = "INSERT INTO ordertable VALUES ('".$listauthur."','".$ordernumber."', NOW(), NOW())"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T04:58:45.683

Now() 是一个 mysql 函数，所以不需要把它放在单/双引号内。当你把它放在引号内时，它将把它当作变量。只需编写如下： $query= "INSERT INTO ordertable VALUES ('" .$listauthor."','".$ordernumber.",NOW(),NOW())";

# ruby - sprintf 在 RubyMotion 中损坏

> ID：10492619
> 
> 赞同：3
> 
> 时间：2012-05-08T04:36:34.103
> 
> 标签：ruby, rubymotion

Ruby noob，刚刚安装并安装了 RubyMotion，创建了我的第一个程序，但我无法让 Time（示例）应用程序正常工作。

每当我尝试使用 sprint 或其他形式（抱歉不知道名称）来格式化字符串时，我都会得到我的格式字符串。

即（在我的应用程序在模拟器中运行时从控制台）

```
Build ./build/iPhoneSimulator-5.1-Development
Simulate ./build/iPhoneSimulator-5.1-Development/Timer.app
(main)>> @time = 0.1
=> 0.0999999940395355
(main)>> string = sprintf("%.1f", @time)
=> "%.1f"
(main)>> string
=> "%.1f"
(main)>> "%.1f" % @time 
=> "%.1f"
(main)>> 
```

在模拟器中的实际应用程序中的结果相同。

我的 Mac 上确实安装了默认的 ruby​​，但是如果我尝试运行测试 ruby​​ 文件（打印“%05d”% 123），我会得到预期的结果。

```
/usr/bin/ruby -v 
ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0]
/Library/RubyMotion/bin/ruby -v
MacRuby 0.12 (ruby 1.9.2) [universal-darwin11.0, i386] 
```

在 Lion 10.7.3 上运行，任何建议或想法表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:48:31.377

**截至 2012 年 5 月 9 日，此问题已得到修复。确保您使用的是 RubyMotion 1.3 (run `sudo motion update`) 并且字符串格式将再次起作用。**

2012 年5 月 8 日更新：[确认错误](https://github.com/HipByte/RubyMotionSamples/issues/4#issuecomment-5579428)，应该在今晚或明天修复。

根据我上面的评论，这肯定有一个错误。一个丑陋的黑客让这个工作可能是这样的（因为`%d`仍然可以正常工作`sprintf`）：

```
@time = 0.1
sprintf("%d", (@time * 10).round).insert(-2, '.') 
```

# php - 用 $GLOBALS 定义常量

> ID：10492621
> 
> 赞同：0
> 
> 时间：2012-05-08T04:36:49.180
> 
> 标签：php, variables, global

我想使用一个全局变量设置，它们都在 PHP 中声明、初始化并使用友好的语法，所以我想出了这个想法：

```
<?
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);

$GLOBALS['debugger'] = 1;                   // set $GLOBALS['debugger'] to 1 
DEFINE('DEBUGGER','$GLOBALS["debugger"]');  // friendly access to it globally

echo "1:" . DEBUGGER . ":<br>";
echo "2:" . ${DEBUGGER}. ":<br>";
echo "3:" . $GLOBALS['debugger'] . ":<br>";
if (DEBUGGER==1) {echo "DEBUG SET";}
?> 
```

生成以下内容：

> 1:$GLOBALS["调试器"]:
> 
> 注意：未定义变量：第 8 行 /home/tra50118/public_html/php/test.php 中的 $GLOBALS["debugger"]
> 
> 2::
> 
> 3:1：

`$GLOBALS["debugger"]`2：当明确定义时怎么会有错误？然后在第 10 行的测试中不会生成类似的通知？

我想我想要做的是强制 PHP`$GLOBALS["debugger"]`在运行时将字符串 () 解释为变量，即常量变量变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:02:33.743

**免责声明：**我同意这些评论，全局变量通常是一个坏主意。

就是说，这里有几个问题值得回答，间接的概念很有用，所以在这里。

`${'$GLOBALS["debugger"]'}`未定义。`'$'`使用间接时不包括前导。所以，正确的版本应该是`define('DEBUGGER', 'GLOBALS["debugger"]')`.

**但是**，这也不起作用。您只能通过间接访问下一级。因此，您可以访问数组`$GLOBALS`，但不能访问该数组中的键。因此，您可以使用：

```
define('DEBUGGER', 'debugger');
${DEBUGGER}; 
```

*实际上，这没有用。*你也可以`$debugger`直接使用，因为它被定义为一个全局的并且可以在任何地方使用。但是，您可能需要`global $debugger;`在函数开始时定义。

您的 if 语句没有引起通知的原因是您定义`DEBUGGER`为字符串。由于您根本没有尝试在该行中使用间接，因此最终读取为：

```
if ("$GLOBALS['debugger']"==1) {echo "DEBUG SET";} 
```

这显然不是真的，尽管它是完全有效的 PHP 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:09:48.427

如果您打算在数组或方法中这样做，则不能将“变量变量”与任何超全局数组一起使用，其中 $GLOBALS 是其中之一。要获得这种行为，您必须使用 $$，但这不会像我提到的那样起作用。

php 中的常量已经是全局的，所以我不知道这会从你的例子中给你带来什么，或者你想要什么。

您的最后一个比较“有效”，因为您将常量设置为字符串，并且 PHP 的类型转换可以将字符串与整数进行比较。当然，它的计算结果为 false，这可能会让您感到惊讶，因为您希望它实际工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:55:49.597

我认为你的常数可能有点过分。

`DEFINE('DEBUGGER','$GLOBALS["debugger"]');`将常量`DEBUGGER`设置为*字符串* `$GLOBALS["debugger"]`。
请注意，这既不是值也不是引用，只是一个字符串。

导致这些结果：

1：输出字符串`$GLOBALS["debugger"]`
2：输出名为 的变量的值`$GLOBALS["debugger"]`。请注意，这是名为“ `$GLOBALS["debugger"]`”的变量，而不是数组中键“debugger”的值`$GLOBALS`。因此会出现警告，因为该变量未定义。
3：输出实际值`$GLOBALS["debugger"]`

希望这一切都说得通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T11:02:18.677

好的，感谢所有回答的人。我想我现在明白了，我是 PHP 的新手，具有 C++ 背景，并且像对待 C++ 一样对待定义，`#define`并假设它只是在预编译/运行阶段进行了字符串替换。

确切地说，我只是想使用类似的东西

```
DEBUGGER = 1; 
```

代替

```
$GLOBALS['debugger'] = 1; 
```

出于很多正当理由；其中最重要的是防止简单的错别字填满你。唉，看来这在 PHP 中是不可行的。感谢您的帮助，不胜感激。

# c# - 如何在客户端事件完成之前保持服务器端事件？

> ID：10492628
> 
> 赞同：0
> 
> 时间：2012-05-08T04:37:55.413
> 
> 标签：c#, javascript, asp.net, ajax, updatepanel

我在 UpdatePanel 中有一个 MenuItem。MenuItem 上附加了 2 个事件： **onClientClick**和**onClick**。

我在 onClientClick 事件处理程序中填充了一些隐藏字段。我正在从服务器端 onClick 内的隐藏字段中获取值。

问题是这两个事件都是独立触发的。这就是为什么服务器端代码没有从隐藏字段中获取值的原因——因为它还没有被填充。

如何推迟服务器端事件触发，直到客户端操作完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:29:20.413

如果您想先执行 onClientClick 然后从服务器端执行 OnClick，您可以尝试以下行。

*   从代码中删除 onClick 服务器事件。
*   在针对 onClientClick 指定的 javascript 方法中，您可以在方法结束时调用服务器事件。像 __doPostBack("yourmenu", "itemclicked");

[查看使用 JavaScript 调用 ASP.NET 服务器端事件](http://www.codeproject.com/Articles/25180/Calling-ASP-NET-server-side-events-using-JavaScrip)

# java - Java - 我无法让两个 actionListener 正常工作

> ID：10492633
> 
> 赞同：0
> 
> 时间：2012-05-08T04:38:39.540
> 
> 标签：java, actionlistener

这是我的代码的 ActionListener 部分。专注于重置按钮。

```
public void actionPerformed( ActionEvent e) {
    int i;
    for (i = 0; i < 26; i++) {
        if (e.getSource() == a[i]) { 
            consultWord(i); 
        }
    }

    if (e.getSource() == reset) {
        Hangman gui = new Hangman();
        System.out.print("test");
        gui.go();
    }
} 
```

显然，它上面还有更多内容（因为这是在最后）。按钮数组 1（顶部 if 语句）完美运行。按钮 2（底部 if 语句）根本不起作用。不会出现测试输出文本。这是我声明变量的地方。（它们适用于所有代码）。

```
JButton reset = new JButton("Reset");
private Button a[]; 
```

如果它对您有任何意义，这里是设置 a[] 按钮的代码。

```
int i;
StringBuffer buffer;
a = new Button[26];
topPanel.setLayout( new GridLayout( 4,0, 10, 10) );
for (i = 0; i <26; i++) {
    buffer = new StringBuffer();
    buffer.append((char)(i+'a'));
    a[i] = new Button(buffer.toString());
    a[i].setSize(100,100);
    a[i].addActionListener( this );
    topPanel.add(a[i]);
} 
```

任何想法为什么我的底部按钮不做深蹲？如果需要，我会粘贴我的整个代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T22:57:55.287

也许您只是忘记添加`ActionListener`到您的`reset`按钮？您上面的代码中缺少此内容...</p>

* * *

作为旁注，一些使您的代码更清洁的建议：

*   `StringBuffer`不需要：只需使用`String.valueOf((char)(i+'a'))`
*   我不会`ActionListener`对您拥有的所有按钮都使用相同的按钮，因为这会使您的`actionPerformed`方法混乱。[匿名内部类](https://stackoverflow.com/a/355177/1347968)在这里很有用。

# android - Android SaveInstanceState - 理解

> ID：10492637
> 
> 赞同：0
> 
> 时间：2012-05-08T04:38:53.150
> 
> 标签：android, android-activity, savestate

从[Android SDK的这个页面](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)

> 默认实现通过在层次结构中具有 id 的每个视图上调用 onSaveInstanceState() 并保存当前聚焦视图的 id（所有这些都由onRestoreInstanceState(Bundle)) 的默认实现。

那么是否有一种机制可以自动保存 Activity 状态而不保存 Activity 中每个元素的值？我对上述说法感到困惑。

例如，活动 A 调用了活动 B。在活动 B 中，我有复选框、单选按钮等。用户选择他们的选择并单击后退按钮。我正在显示 Activity 此时，我想保存用户选择。当用户再次从活动 A 回到活动 B 时，通过单击按钮，我希望看到所有选择都保持不变。我能想到的一种方法是，设置 Intent Flag 以使 Activity 脱颖而出。但我认为不是推荐的方法。

那么根据 SDK 中的上述文本，是否有默认实现来保存状态？还是我解释错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T05:19:31.207

`onSaveInstanceState()`并且`onRestoreInstanceState()`仅在`Activity`需要重新创建时才由 Android 显式调用，通常是在配置更改之后（例如更改方向）。这不包括当您调用`Activity`. 当您按下后退按钮时，Activity B 将被销毁，并且您将在下次启动它时创建它的新实例`Activity`。

如果要手动保存 的实例，请`Activity`通过 调用 Activity `startActivityForResult()`B。然后，在 Activity B 中，重写该`onDestroy()`方法，并调用这些代码行：

```
@Override
protected void onDestroy() {

    Bundle savedState = new Bundle();
    onSaveInstanceState(savedState);
    Intent data = new Intent();
    data.putExtra("savedState", savedState);
    setResult(RESULT_OK, data);

    super.onDestroy();
} 
```

在活动 A 中，覆盖`onActivityResult`并保存数据：

```
Bundle activityBData;

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == RESULT_OK) {
        activityBData = data.getBundleExtra("saved_state");
    }
} 
```

然后，当再次启动 Activity B 时，像这样调用它：

```
Intent intent = new Intent(this, ActivityB.class);
if (activityBData != null) {
    intent.putExtra("saved_state", activityBData);
}
startActivityForResult(intent, 0); 
```

最后，在Activity B的`onCreate`方法中，恢复状态：

```
if (savedInstanceState == null) {
    Intent intent = getIntent();
    Bundle savedState = intent.getBundleExtra("saved_state");
    onRestoreInstanceState(savedState);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:08:17.550

根据文档，当您重新开始时，它将使您的活动向前推进，如果它没有被杀死。但是要获取所有其他视图状态，您需要将它们存储在 onSaveInstanceState() 中的捆绑包中，并在 onRestoreInstanceState() 中再次设置它。默认实现仅适用于您的活动，不适用于您的活动中的子视图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T04:50:48.683

当一个应用失去对另一个应用的焦点时 onSaveInstanceState() 被调用，但是当你导航回你的应用时 onRestoreInstanceState() 可能不会被调用。即，如果您的活动在其他活动在前面的期间没有被杀死，onRestoreInstanceState() 将不会被调用，因为您的活动几乎是“活着的”。

总而言之，如 onRestoreInstanceState() 的文档中所述：

> 大多数实现将简单地使用 onCreate(Bundle) 来恢复它们的状态，但有时在完成所有初始化之后在此处执行此操作或允许子类决定是否使用您的默认实现会很方便。该方法的默认实现会恢复之前被 onSaveInstanceState(Bundle) 冻结的任何视图状态。

例如：您从 B 调用 startActivity(A)。然后从 A 调用 finish() 以返回 B。在这种情况下，您的第一个活动 B 不会被销毁，并且不会调用 onCreate() 和 onRestoreInstanceState()。这些方法仅在需要时调用，即当活动已被销毁并需要由系统重新创建时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-25T18:51:18.923

使用 SharedPreferences 机制。查看文档： [https](https://developer.android.com/reference/android/content/SharedPreferences) ://developer.android.com/reference/android/content/SharedPreferences 实现示例： [https](https://www.tutorialspoint.com/android/android_shared_preferences.htm) ://www.tutorialspoint.com/android/android_shared_preferences.htm 您也可以使用 PreferenceFragment 来使这项任务变得容易。

# php - PHP - 在while循环中插入SQL

> ID：10492638
> 
> 赞同：0
> 
> 时间：2012-05-08T04:39:06.450
> 
> 标签：php, while-loop

我从一个表中生成了一个随机怪物团队，并且限制为 6。现在，我还想将团队插入到包含字段 m1、m2、m3、m4、m5、m6 的 user_team

那些代表怪物 1 到怪物 6。现在当我尝试将生成的怪物插入团队时，似乎只有最后一个怪物插入其中，而我所有的怪物都插入。 [http://prntscr.com/8zrj2](http://prntscr.com/8zrj2)

```
$sql = "SELECT * from monsterdata ORDER BY RAND() LIMIT 6"; 
$result = mysql_query($sql);
// this checks if you have a result
if ($result == null) echo "No result";
else {  
    while (($row = mysql_fetch_array($result)) != false) {
$row = mysql_fetch_array($result);
{
// html code here
}
} 
```

插入语句是 `$monster = $row['id']; $sql = "INSERT into user_team(m1,m2,m3,m4,m5,m6) VALUES('$monster','$monster','$monster','$monster','$monster','$monster')"; $result = mysql_query($sql);`

只是不知道在哪里/如何放置它，所以它将正确的值插入到正确的列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:50:33.240

如果是我，我会将 id 推送到一个数组中，然后像这样使用它：

```
$monsterIds = array();
while(($row = mysql_fetch_array($result)) !== false) {
    $monsterIds[] = $row['id'];
}
mysql_query("INSERT INTO user_team (m1, m2, m3, m4, m5, m6) VALUES ('{$monsterIds[0]}', '{$monsterIds[2]}', '{$monsterIds[3]}', '{$monsterIds[4]}', '{$monsterIds[5]}')") or die(mysql_error()); 
```

另外，在比较行结果时不要忘记使用三等号，这样您就不会被一个奇怪的错误所困扰，即事情评估为假实际上并不是假的（=== 是使用许多函数的方法根据结果​​，它可能返回一个数组、整数或布尔值）。

这些值将按照提供的顺序放置在列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:03:35.207

这是我使用 PDO（php 库）的示例：

```
$DBH = new PDO("mysql:host=$db_host;dbname=$db_name", $username, $password);
$webContractList=$DBH->query('SELECT id,nume,data FROM user2')->fetchAll();

$STH=$DBH->prepare("INSERT INTO user (id,nume,data) VALUES (:id ,:nume , :data)");

foreach ($webContractList as $item){           
    $STH->execute(array(':id'=>$item['id'],
                ':nume'=>$item['nume'],
                ':data'=>date('Y-m-d',strtotime($item['data']))));
} 
```

# ruby-on-rails - Rails - 使用关联执行二分法

> ID：10492641
> 
> 赞同：0
> 
> 时间：2012-05-08T04:39:21.263
> 
> 标签：ruby-on-rails, activerecord

我有一个带有标准字段的设计用户模型。用户可以拥有个人资料或房屋，但不能同时拥有两者。

```
class User < ActiveRecord::Base

  attr_accessible ..... :profile_type
  has_one :profile, :dependent => :destroy
  has_one :house, :dependent => :destroy

end 
```

在当前状态下，用户可以同时拥有个人资料和状态。假设这样做： User.first.profile 返回配置文件。然后我可以做 User.first.house，返回 nil。这似乎不太好 - 事实上，我似乎稍后会遇到无效数据问题。

编辑：这是针对人们正在寻找住宿地点或他们有住宿地点的情况。所以我有两类用户，一个人可以是。这两个类别非常不同（即寻找住宿地点的人与有住宿地点的人将拥有非常不同的领域）。

无论如何要强制执行这种“两者”关系吗？我对 Rails 很陌生，请注意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:15:36.837

您可以通过自定义验证来处理这个问题 -

```
validate :has_either_profile_or_house_but_not_both

private

def has_either_profile_or_house_but_not_both
  if profile.present? && house.present?
    errors[:base] << "User can have either a profile or house, but not both."
  end
end 
```

可能有一种更简洁的方法可以通过软件设计来做到这一点，但是在不知道您要解决的问题的情况下，这是我的最佳建议。

# .net - .NET 高级别的 .NET 4.0 和 .NET 4.5 的区别

> ID：10492647
> 
> 赞同：87
> 
> 时间：2012-05-08T04:40:23.993
> 
> 标签：.net, .net-4.0, .net-4.5

渴望了解 .NET 高级别的 .NET 4.0 和 .NET 4.5 之间的差异以及 ASP.NET、C# 以及这些框架中的差异

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-08T05:14:20.093

[.NET Framework 4.5 中](http://www.techbubbles.com/net-framework-4-5/what-is-new-in-net-framework-4-5/)的新功能和 .NET Framework 4.5中 [的新功能和预期功能](http://www.msguy.com/2011/10/whats-new-and-expected-in-net-framework.html)：

*   支持 Windows 运行时
*   支持 Metro 风格应用程序
*   支持异步编程
*   垃圾收集器改进
*   更快的 ASP.NET 启动
*   更好的数据访问支持
*   WebSocket 支持
*   工作流支持 - BCL 支持

> 这些框架中 ASP.NET 的差异

比较[ASP.NET 4 和 Visual Web Developer](http://www.asp.net/whitepapers/aspnet4)中[的新功能以及 ASP.NET 4.5 和 Visual Studio 11 Beta 中的新功能](http://www.asp.net/vnext/overview/whitepapers/whats-new)：

**ASP.NET 4.0**

*   `Web.config`文件重构
*   可扩展的输出缓存
*   自动启动 Web 应用程序
*   永久重定向页面
*   收缩会话状态
*   扩大允许 URL 的范围
*   可扩展的请求验证
*   对象缓存和对象缓存可扩展性
*   可扩展的 HTML、URL 和 HTTP 标头编码
*   单个工作进程中单个应用程序的性能监控
*   多目标
*   ETC

对于 Asp.net 4.5，还有一长串改进：

*   异步读写 HTTP 请求和响应
*   `HttpRequest`处理方面 的改进
*   异步刷新响应
*   支持等待和基于任务的异步模块和处理程序

> C# 的差异也在这些框架中

浏览[C# 4.0 - .NET Framework 中的新 C# 功能](http://msdn.microsoft.com/en-us/magazine/ff796223.aspx)以及 [Visual Studio 11 Beta 中 Visual C# 的新增功能](http://msdn.microsoft.com/en-us/library/hh156499%28v=vs.110%29.aspx)。

**编辑：**
C# 和 VB 重大更改的语言文档：

VB：[Visual Studio 2012 中的 Visual Basic 重大更改](http://msdn.microsoft.com/en-us/library/cc714070%28v=vs.110%29.aspx)

C#：[Visual Studio 2012 中的 Visual C# 重大更改](http://msdn.microsoft.com/en-us/library/hh678682.aspx)

希望这可以帮助您获得所需的内容..

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-08-31T14:00:12.283

* * *

# ***.NET 框架 4***

* * *

Microsoft 宣布打算在 2008 年 9 月 29 日发布 .NET Framework 4。公开测试版于 2009 年 5 月 20 日发布。

*   并行扩展，以改进对针对多核或分布式系统的并行计算的支持。为此，包括 PLINQ（并行 LINQ）、LINQ 引擎的并行实现和任务并行库（通过方法调用公开并行构造）等技术。
*   新的 Visual Basic .NET 和 C# 语言功能，例如隐式续行、动态调度、命名参数和可选参数。
*   支持代码合同。
*   包含用于任意精度算术 (System.Numerics.BigInteger) 和复数 (System.Numerics.Complex) 的新类型。
*   引入公共语言运行时 (CLR) 4.0。

在 .NET Framework 4 发布后，Microsoft 发布了一组名为 Windows Server AppFabric 的增强功能，用于以 AppFabric 托管和内存中分布式缓存支持的形式提供应用程序服务器功能。

* * *

# .NET 框架 4.5

* * *

.NET Framework 4.5 于 2012 年 8 月 15 日发布。在此版本中添加了一组新的或改进的功能。.NET Framework 4.5 仅在 Windows Vista 或更高版本上受支持。.NET Framework 4.5 使用公共语言运行时 4.0，以及一些额外的运行时功能。

## 1\. .NET 用于 Metro 风格的应用程序

Metro 风格的应用程序专为特定的外形尺寸而设计，并利用了 Windows 操作系统的强大功能。.NET Framework 的一个子集可用于使用 C# 或 Visual Basic 构建适用于 Windows 8 的 Metro 风格应用程序。此子集称为应用程序的 .NET API。用于 Metro 风格应用程序的 .NET Framework、运行时和库版本是新 Windows 运行时的一部分，它是 Metro 风格应用程序的新平台和应用程序模型。它是一个包含许多平台和语言的生态系统，包括 .NET Framework、C++ 和 HTML5/JavaScript。

## 二、核心特点

*   能够限制正则表达式引擎在超时之前尝试解析正则表达式的时间。
*   能够为应用程序域定义文化。
*   控制台支持 Unicode (UTF-16) 编码。
*   支持文化字符串排序和比较数据的版本控制。
*   检索资源时性能更好。
*   Zip 压缩改进以减小压缩文件的大小。
*   能够自定义反射上下文以通过 CustomReflectionContext 类覆盖默认反射行为。

## 3\. 托管可扩展性框架（MEF）

*   支持泛型类型。
*   基于约定的编程模型，使您能够基于命名约定而不是属性来创建部件。
*   多个范围。

## 4.异步操作

在 .NET Framework 4.5 中，向 C# 和 Visual Basic 语言添加了新的异步功能。这些特性添加了一个基于任务的模型来执行异步操作。

## 5.ASP.NET

*   支持新的 HTML5 表单类型。
*   支持 Web 表单中的模型绑定器。这些使您可以将数据控件直接绑定到数据访问方法，并自动将用户输入与 .NET Framework 数据类型进行转换。
*   在客户端验证脚本中支持不显眼的 JavaScript。
*   通过捆绑和缩小来改进对客户端脚本的处理，以提高页面性能。
*   来自 AntiXSS 库（以前是外部库）的集成编码例程，以防止跨站点脚本攻击。
*   支持 WebSocket 协议。
*   支持异步读写 HTTP 请求和响应。
*   支持异步模块和处理程序。
*   支持 ScriptManager 控件中的内容分发网络 (CDN) 回退。

## 6\. 网络

*   为 HTTP 应用程序提供了新的编程接口：添加了 System.Net.Http 命名空间和 System.Net.Http.Headers 命名空间。
*   其他改进：改进了国际化和 IPv6 支持。符合 RFC 的 URI 支持。支持国际化域名 (IDN) 解析。支持电子邮件地址国际化 (EAI)。

## 7\. Windows 演示基础 (WPF)

*   新的 Ribbon 控件，使您能够实现承载快速访问工具栏、应用程序菜单和选项卡的功能区用户界面。
*   新的 INotifyDataErrorInfo 接口，支持同步和异步数据验证。
*   VirtualizingPanel 和 Dispatcher 类的新功能。
*   在显示大量分组数据时以及通过访问非 UI 线程上的集合时提高了性能。
*   数据绑定到静态属性、数据绑定到实现 ICustomTypeProvider 接口的自定义类型以及从绑定表达式中检索数据绑定信息。
*   随着值的变化重新定位数据（实时整形）。
*   WPF 和 Win32 用户界面组件之间的更好集成。
*   能够检查项目容器的数据上下文是否断开连接。
*   能够设置属性更改和数据源更新之间应经过的时间量。
*   改进了对实现弱事件模式的支持。此外，事件现在可以接受标记扩展。

## 8\. Windows 通信基础 (WCF)

在 .NET Framework 4.5 中，添加了以下功能，以便更轻松地编写和维护 Windows Communication Foundation (WCF) 应用程序：

*   简化生成的配置文件。
*   支持合同优先开发。
*   能够更轻松地配置 ASP.NET 兼容模式。
*   更改默认传输属性值以减少您必须设置它们的可能性。
*   更新 XmlDictionaryReaderQuotas 类以减少您必须手动配置 XML 字典阅读器配额的可能性。
*   作为构建过程的一部分，Visual Studio 验证 WCF 配置文件，因此您可以在运行应用程序之前检测配置错误。
*   新的异步流支持。
*   新的 HTTPS 协议映射可以更轻松地通过 HTTPS 与 Internet 信息服务 (IIS) 公开端点。
*   能够通过将 ?singleWSDL 附加到服务 URL 来在单个 WSDL 文档中生成元数据。
*   Websocket 支持通过端口 80 和 443 实现真正的双向通信，其性能特征类似于 TCP 传输。
*   支持在代码中配置服务。
*   XML 编辑器工具提示。
*   ChannelFactory 缓存支持。
*   二进制编码器压缩支持。
*   支持 UDP 传输，使开发人员能够编写使用“即发即弃”消息传递的服务。客户端向服务发送消息并且不期望服务响应。
*   使用 HTTP 传输和传输安全性时，能够在单个 WCF 终结点上支持多种身份验证模式。
*   支持使用国际化域名 (IDN) 的 WCF 服务。

## 9\. 工具

*   资源文件生成器 (Resgen.exe) 使您能够从嵌入在 .NET Framework 程序集中的 .resources 文件创建用于 Windows 应用商店应用程序的 .resw 文件。
*   托管配置文件引导优化 (Mpgo.exe) 使您能够通过优化本机映像程序集来改进应用程序启动时间、内存利用率（工作集大小）和吞吐量。命令行工具为本地图像应用程序程序集生成配置文件数据。

* * *

如需更多信息和访问参考链接，请访问：

*   [.NET Framework 版本历史](http://en.wikipedia.org/wiki/.NET_Framework_version_history)
*   [.NET Framework 4.5 中的新增功能](http://msdn.microsoft.com/en-us/library/ms171868%28v=VS.110%29.aspx)
*   [.NET Framework 版本和依赖项](http://msdn.microsoft.com/en-us/library/bb822049.aspx)

=========== **.Net 4.5 海报**=========

# [![在此处输入图像描述](../Images/bf4a701f03c44176c0264ba0250f3483.png)](https://i.stack.imgur.com/ORzl1.jpg)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-08T04:55:59.890

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms171868%28v=vs.110%29.aspx)找到 .NET Framework 4.5 测试版的最新功能

它将对框架的更改分为以下几类：

*   .NET 用于 Metro 风格的应用程序
*   便携式类库
*   核心新功能和改进
*   并行计算
*   网络
*   联网
*   Windows 演示基础 (WPF)
*   Windows 通信基础 (WCF)
*   Windows 工作流基础 (WF)

您听起来好像对 Web 部分更感兴趣，因为它显示了对 ASP.NET 4.5 的更改。其余更改可在其他标题下找到。

[您还可以在此处查看](http://msdn.microsoft.com/en-us/magazine/ff796223.aspx).NET Framework 4.0 发布时的一些新功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-01T10:23:14.010

这个答案可能是迟到的回复，但它对将来看到这个话题很有用。

.NET framework 4.5 的功能可以在以下[链接](http://www.drdobbs.com/windows/whats-new-in-net-framework-45/240008327)中看到。

总结一下：

> *   安装
>     
>     
>     
>     .NET Framework 4.5 不支持 Windows XP 或 Windows Server 2003，因此，如果您必须创建针对这些操作系统的应用程序，则需要继续使用 .NET Framework 4.0。相比之下，Windows 8 和 Windows Server 2012 的所有版本都包含 .NET Framework 4.5。
>     
>     
> *   在 64 位平台上支持大于 2 GB 的阵列
> *   增强的后台服务器垃圾收集
> *   支持正则表达式计算中的超时
> *   在 Windows 8 上的文化敏感排序和大小写规则中支持 Unicode 6.0.0
> *   应用程序域的简单默认文化定义
> *   Windows 8 应用程序中的国际化域名

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-04T07:22:15.550

这是来自 Microsoft 的一个很好的资源，其中包括从 1.0 到现在的每个 .NET 版本的高级功能概述。它还包括有关相关 Visual Studio 版本和 Windows 版本兼容性的信息。

[.NET Framework 版本和依赖项](http://msdn.microsoft.com/en-us/library/bb822049%28v=vs.110%29.aspx)

# c - C数学和零结果

> ID：10492652
> 
> 赞同：1
> 
> 时间：2012-05-08T04:42:20.683
> 
> 标签：c

不知道问题出在哪里，但我一直得到 0 的结果。预期的结果是 0.2222222。我想我必须将零分配给我的一个变量，但我不知道这是在哪里发生的。任何帮助，将不胜感激。谢谢

```
#include <stdio.h>
#include <math.h>

int main()
{
    double vs = 10;
    double rs = 100;
    double rl_start = 50;
    double rl_stop = 150;
    double rl_step = 5;

    double i, j;
    double n = rl_start;
    int count;

    do
    {
        j = ((rl_start) + (rl_step * count));
        i = (pow(vs, 2) * j) / pow((rs + j),2);
        printf("%lf", i);
        count++;

    }while(j <= rl_stop);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T04:43:47.683

使用前需要初始化`count`： `int count = 0;`

# php - 选中时在文本字段对话框中显示值

> ID：10492653
> 
> 赞同：0
> 
> 时间：2012-05-08T04:42:25.140
> 
> 标签：php, javascript, jquery

这是复选框

```
<input id="c1" type="checkbox" name="hour[]" class="create-daily" value="1" /><br />
<input id="c2" type="checkbox" name="hour[]" class="create-daily" value="2" /><br />
<input id="c3" type="checkbox" name="hour[]" class="create-daily" value="3" /><br /> 
```

我有一个对话框

```
<div id="form_input" title="Konfirmasi">
 <?php $data['hour'] = $this->input->post('hour');?>
  <table>
    <?php echo form_open('booking/ok'); ?>
    <input type="hidden" value='' id="id" name="id">
    <input type="hidden" value="<?php echo $sdate?>" id="sdate" name="sdate" />
    <?php echo "Anda memesan room : <br/>Tanggal :<b> ".$sdate."</b><br>";?>
    Jam : <b><span class="jambooking"></span></b>
    <tr>
        <td>
        <div class="element">
            <label class="Norm">Jam:</label>
            <input type="text" name="jam" class="jambooking" id="jam" minlength="2" value="" />
            </div>

            <label class="Norm">User:</label>
            <input type="text" name="user" class="required text" minlength="2" />
            </div> 
```

我有 javascript

```
$(".create-daily").live("click",function(){
         if ($(this).attr("checked")){
             //var date = $(this).attr("date");
             //$('#date').val(date);
            $( "#form_input" ).dialog( "open" );
            $(".jambooking").html( $(":checked").val());
            }
        }); 
```

我使用跨度和输入，类设置为`jambooking`. 当我选中一个复选框并显示一个对话框时，跨度显示一个值。

当我设置为输入类时`jambooking`，该值不显示。

如何将值加载到文本字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:00:16.463

`$()`.html 用于`div`. `$().text`是为`<p>`。您必须使用不同的输入字段。使用`$().val()`；

换这个。

从

```
$(".jambooking").html( $(":checked").val()); 
```

至

```
$("input.jambooking:text").val( $(":checked").val()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:50:58.803

由于您使用的是输入，因此您应该使用 .val() 而不是 .html()

```
$(".jambooking").val( $(":checked").val()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T04:51:40.060

尝试：

```
$(".create-daily").live("click",function(){
     if ($(this).is(":checked")){
         var checkedVal = $(this).val();
         //$('#date').val(date);
         $( "#form_input" ).dialog( "open" );
         $("span.jambooking").html(checkedVal); //for span
         $("input.jambooking").val(checkedVal); //for textbox
     }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:11:07.787

看一下这个

```
$(".jambooking").val( $(":checked").val()); 
```

或查看此链接[Jquery Text Editor](http://www.jquery4u.com/plugins/10-jquery-text-editor-plugins/)

希望它有效。

# java - 在 java 中应用 if/else 语句时出错

> ID：10492659
> 
> 赞同：2
> 
> 时间：2012-05-08T04:43:41.553
> 
> 标签：java

我的代码有问题，希望有人能看到我缺少的东西。我的代码如下：

```
import java.io.IOException;

class Boat{

    String boatName = (" ");
    boolean sailUp = false;

}

public class Project2{

    public static void main(String[] args){

        System.out.println("\n");

        Boat[] boatArray;

        boatArray = new Boat[args.length];

        for(int i = 0 ; i < args.length ; ++i){

            boatArray[i] = new Boat();

        }

        for(int j = 0 ; j < args.length ; ++j){

            boatArray[j].boatName = args[j];

        }

        for(int k = 0 ; k < args.length ; ++k){

            String firstLetter = boatArray[k].boatName.substring(0, 1);

            if(firstLetter == ("B")){

                boatArray[k].sailUp = true;

            }else if(firstLetter == ("C")){

                boatArray[k].sailUp = true;

            }else if(firstLetter == ("N")){

                boatArray[k].sailUp = true;

            }else{

                boatArray[k].sailUp = false;

            }
        }

        for(int l = 0 ; l < args.length ; ++l){

            System.out.println("\nThe " + boatArray[l].boatName + " is ready to sail...");

            if(boatArray[l].sailUp == false){

                System.out.println("\n\tbut the sail is down, raise the sail!");

            }else if(boatArray[l].sailUp == true){

                System.out.println("\n\tthe sail is up, ahead full!");

            }           
        }
    }
} 
```

我想要以下输出：

C:\Documents and Settings>java Project2 Enterprise Challenger Discovery Nimitz

企业已准备好启航...

```
 but the sail is down, raise the sail! 
```

挑战者号已准备好启航……

```
 the sail is up, ahead full! 
```

发现号准备启航...

```
 but the sail is down, raise the sail! 
```

尼米兹号准备启航...

```
 the sail is up, ahead full! 
```

但我明白了：

C:\Documents and Settings>java Project2 Enterprise Challenger Discovery Nimitz

企业已准备好启航...

```
 but the sail is down, raise the sail! 
```

挑战者号已准备好启航……

```
 but the sail is down, raise the sail! 
```

发现号准备启航...

```
 but the sail is down, raise the sail! 
```

尼米兹号准备启航...

```
 but the sail is down, raise the sail! 
```

为什么第三个循环没有重置帆状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T04:46:01.317

字符串是对象，因此您可以使用`equals`方法 ("C".equals(firstLetter)) 来比较它们，而不是`==`.

此外，如果您只需要一个字符，您可以提取字符（使用`charAt(int)`）并与“A”、“B”等进行比较（这次使用`==`:)）例如：

```
char firstLetter = boatArray[k].boatName.charAt(1);
if(firstLetter == 'B'){ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T04:47:38.727

改变

```
firstLetter == ("B") 
```

到

```
firstLetter.equals("B") 
```

ETC

`==`检查引用相等性，其中`.equals`将检查值相等性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:46:28.217

*在处理String*类型的对象时尝试使用方法 'equals' 或 'equalsIgnoreCase' A '=='（也称为 C 样式相等）尝试比较对象引用。

像这样的东西

```
if( "B".equalsIgnoreCase( firstletter ) ){
// do whatever
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T04:48:07.263

```
== -> checks for equality in reference.

equals -> checks for equality in value. 
```

所以尝试使用 equals 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T04:50:22.197

当您将一个对象与另一个对象进行比较时，您必须使用 .equals() 方法，但不能使用 "==" 。"==" 将比较两个字符串的指针。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T04:53:55.537

像这样使用 string.equals()

```
if(firstLetter.equals("B")){

       boatArray[k].sailUp = true;

}else if(firstLetter.equals("C")){

       boatArray[k].sailUp = true;
}else if(firstLetter.equals("N")){

       boatArray[k].sailUp = true;

}else{

       boatArray[k].sailUp = false;
} 
```

# xml - xml 中元素的相同数据

> ID：10492661
> 
> 赞同：0
> 
> 时间：2012-05-08T04:43:59.873
> 
> 标签：xml, xsd

我正在用 xsd 创建一个 xml。我需要 xml 中的 2 个元素的相同数据。元素“Ext”和“Int”的数据需要相同。我指的是同一类型，但每次生成不同的值。这是我的代码。...

```
<xs:element name="data" maxOccurs="unbounded">
<xs:complexType>
<xs:sequence>
<xs:element name="Ext" type="ext-type" />
<xs:element name="Int" type="ext-type" />
<xs:element name="ac" type="ac-type" />
</xs:sequence>
</xs:complexType>
</xs:element>
...

<xs:simpleType name="ext-type">
<xs:restriction base="xs:string">
<xs:minInclusive value="0" />
<xs:totalDigits value="7" />
<xs:pattern value="[9]{1}\-[4]{3}\-[5-9]{3}"></xs:pattern>
</xs:restriction>
</xs:simpleType> 
```

任何人都可以请指导我。

# websphere - 通过 wsadmin 修改应用程序启动顺序

> ID：10492663
> 
> 赞同：1
> 
> 时间：2012-05-08T04:44:26.093
> 
> 标签：websphere, wsadmin

是否可以使用任一`AdminApp.install(...)`wsadmin 命令或任何其他 wsadmin 命令修改应用程序的启动顺序的值？

此属性位于企业应用程序 >*应用程序名称*> 启动行为 > 启动顺序下

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T05:02:18.847

显然，它可以这样做：

```
AdminConfig.modify(
  AdminConfig.showAttribute(
    AdminConfig.getid("/Deployment:applicationname/"),
    "deployedObject"),
  [['startingWeight','99']]) 
```

采用典型的、直接的 wsadmin 风格。>.<

# ios - 如何更新 coredata 中可用的数据？

> ID：10492667
> 
> 赞同：0
> 
> 时间：2012-05-08T04:44:44.520
> 
> 标签：ios, core-data, nsmanagedobject, updates

在这里，我得到了 fetchedObjects 中的值。如何更新数组中的值？

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Reserve" inManagedObjectContext:self.managedObjectContext]; 
[fetchRequest setEntity:entity]; 

//NSSortDescriptor tells defines how to sort the fetched results
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"number" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];
NSLog(@"sort count%d",[sortDescriptors count]);        

fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Root"];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(number = 100)", self.txtReserve.text];

// [fetchRequest setPredicate:predicate];
[fetchedResultsController.fetchRequest setPredicate:predicate];
self.fetchedObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];      
NSLog(@"Count of array::::%d",[fetchedObjects count]);
NSManagedObject *device = [fetchedObjects objectAtIndex:0];  
NSLog(@"device::::%@",device); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:46:24.653

我建议您阅读/观看有关 Core Data 的许多书籍/教程中的一些。您缺少对该技术的非常基本的了解。

首先，您收到的对象代表数据库中的对象，您必须知道实体描述才能获取数据。例如，获取“Reserve”实体的“number”属性的最基本方法是......

```
[managedObject valueForKey:@"number"]; 
```

如果您使用 Xcode（或称为 mogenerator 的工具），您可以为您的实体生成子类，并且可以更轻松地通过自定义访问器方法访问数据。

# javascript - 使用 javascript 在 PageLoad 中处理页面控件

> ID：10492671
> 
> 赞同：0
> 
> 时间：2012-05-08T04:45:23.973
> 
> 标签：javascript

我在 aspx 页面上有服务器端控件，如文本框、dropdownlsit 等，我的目标是在页面加载期间隐藏它们。

使用下面的代码，控件在页面加载期间被隐藏，但我注意到闪烁。所需的输出应消除此控制闪烁。任何帮助是极大的赞赏。

```
var ispostBack =false;
function pageLoad() {
    $(document).ready(function () {
        HideCtrls();
//Some other code here
     }

function HideCtrls()
{
    document.getElementById("cph1_divSear").style.setAttribute('display', '')
    if (document.getElementById("cph1_txtSearch"))
    {
        document.getElementById("cph1_txtSearch").style.setAttribute('display', 'none')
        document.getElementById("cph1_txtkey").style.setAttribute('display', 'none')
        document.getElementById("cph1_hypProjNo").style.setAttribute('display', 'none')
        document.getElementById("cph1_ddlSeaSingle").style.setAttribute('display', 'none')
         document.getElementById("cph1_txtSeaStart").style.setAttribute('display', 'none')
        document.getElementById("cph1_txtSeaEnd").style.setAttribute('display', 'none')
        document.getElementById("cph1_txtSeFLike").style.setAttribute('display', 'none')
        document.getElementById("cph1_imgSeaSt").style.setAttribute('display', 'none')
        document.getElementById("cph1_txtSeTLike").style.setAttribute('display', 'none')
        document.getElementById("cph1_imgSeaEnd").style.setAttribute('display', 'none')
        document.getElementById("cph1_txtPersonnel3").style.setAttribute('display', 'none')
        document.getElementById("cph1_ImageButton3").style.setAttribute('display', 'none')
        document.getElementById("likeFID").style.setAttribute('display', 'none')
        document.getElementById("likeTID").style.setAttribute('display', 'none')
        document.getElementById("dtFID").style.setAttribute('display', 'none')
        document.getElementById("dtTID").style.setAttribute('display', 'none')
    }
}

<div id="divSear" runat="server" class="cols4Search">
                            <span>
                                <asp:TextBox ID="txtSearch" runat="server" Width="350px"></asp:TextBox>
                                <asp:TextBox ID="txtkey" runat="server" onblur="ClearHelp()" onfocus="JavaScript:showhelp('Search_1001')"
                                    Width="400px" MaxLength="150"></asp:TextBox></span> <span style="display: none;">
                                        <asp:HyperLink ID="hypProjNo" runat="server" Target="_blank" ForeColor="Blue">View</asp:HyperLink>
                                    </span><span>
                                        <asp:DropDownList ID="ddlSeaSingle" runat="server" AutoPostBack="True">
                                        </asp:DropDownList>
                                    </span><span id="likeFID">>=<asp:TextBox ID="txtSeFLike" runat="server" MaxLength="9"></asp:TextBox></span>
                            <span id="likeTID"><=<asp:TextBox ID="txtSeTLike" runat="server" MaxLength="9"></asp:TextBox></span>
                            <span id="dtFID">>=<asp:TextBox ID="txtSeaStart" runat="server" Width="85px"></asp:TextBox></span>
                            <span>
                                <asp:ImageButton ID="imgSeaSt" runat="server" CssClass="dateicon" ImageUrl="~/Images/date_icon.png" /></span>
                            <span id="dtTID"><=<asp:TextBox ID="txtSeaEnd" runat="server" Width="85px"></asp:TextBox></span>
                            <span>
                                <asp:ImageButton ID="imgSeaEnd" runat="server" CssClass="dateicon" ImageUrl="~/Images/date_icon.png" /></span>
                            <span>
                                <asp:TextBox ID="txtPersonnel3" runat="server" CssClass="textbox" onblur="ClearHelp()"
                                    Width="160px" onfocus="JavaScript:showhelp('AdminUserDetails_1001')"></asp:TextBox></span>
                            <span>
                                <asp:ImageButton ID="ImageButton3" runat="server" ImageUrl="~/Images/searchtool.png"
                                    ToolTip="Select User" CssClass="iconalign" /></span>
                            <br />
                            <asp:Label ID="lblNote" Visible="false" CssClass="Notelabel" runat="server" />
                        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:54:14.573

隐藏服务器上的所有控件，在需要时在客户端显示它们，这样就不会出现显示一段时间后隐藏控件的问题

在 HTML 中

```
 <asp:TextBox ID="txtSearch" style="display:none" Visible="False" Width="350px"></asp:TextBox> 
```

或在代码后面

```
 txtSearch.Attributes.Add("style", "display:none"); = "false"; 
```

并在需要时用 javascript 显示它们

```
if (document.getElementById("cph1_txtSearch"))
{
    document.getElementById("cph1_txtSearch").style.setAttribute('display', 'block')
    //Similarly you can show all field which are required to be shown
    // .........
} 
```

# json - 当 Json 字符串包含字符串和字符串数组时，JSON 序列化程序会出现问题

> ID：10492672
> 
> 赞同：1
> 
> 时间：2012-05-08T04:45:25.263
> 
> 标签：json, string, serialization, arraylist

当 Json 字符串包含 'key1:value1' 时，可以将其转换为 Dictionary 类型。

但在我的例子中，它还包含一个字符串数组以及上面的键：值，即：

```
{k1:v1; "key2\":[{\"Key11\":{\"key21\":\"Val21\",\"key22\":\"val22\"}] 
```

（Json 数据包含一些字符串和一些数组。）

当我使用 Dictionary<string, string[]> 或 Dictionary<string, ArrayList> 时 - 它在值作为字符串时失败 - 无法将字符串转换为字符串 [] 等。

仍然可以使用 Dictionary<string, object> ，但有没有更好的方法来处理这个问题？

谢谢帕尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:29:25.347

如果您在编译时不知道结构，那么就没有其他方法可以序列化 JSON 字符串——它必须是 Dictionary<string,object>。但是，如果您使用的是 C# 4.0，则可以使用**DynamicObject**。由于动态类型将类型解析推迟到运行时，如果您使用这种方法进行序列化，您可以将序列化对象视为强类型（尽管没有编译时支持）。这意味着您可以使用 JSON 样式的点表示法来访问属性：

```
MyDynamicJsonObject.key2 
```

为此，您可以从 DynamicObject 继承，并实现**TryGetMember**方法（[引用自此链接，它具有完整的实现）](http://www.drowningintechnicaldebt.com/ShawnWeisfeld/archive/2010/08/22/using-c-4.0-and-dynamic-to-parse-json.aspx)：

```
public class DynamicJsonObject : DynamicObject
{
    private IDictionary<string, object> Dictionary { get; set; }

    public DynamicJsonObject(IDictionary<string, object> dictionary)
    {
        this.Dictionary = dictionary;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = this.Dictionary[binder.Name];

        if (result is IDictionary<string, object>)
        {
            result = new DynamicJsonObject(result as IDictionary<string, object>);
        }
        else if (result is ArrayList && (result as ArrayList) is IDictionary<string, object>)
        {
            result = new List<DynamicJsonObject>((result as ArrayList).ToArray().Select(x => new DynamicJsonObject(x as IDictionary<string, object>)));
        }
        else if (result is ArrayList)
        {
            result = new List<object>((result as ArrayList).ToArray());
        }

        return this.Dictionary.ContainsKey(binder.Name);
    }
} 
```

请注意，动态类型目前不支持索引器表示法，因此对于数组，您需要[使用如下表示法实现一种解决方法](http://www.nikhilk.net/CSharp-Dynamic-Programming-JSON.aspx)：

```
MyDynamicJsonObject.key2.Item(0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:13:06.277

您的示例不是有效的 JSON，例如每个键和值都应该用 包围`"`，例如`{"k1":"v1"}`，开始和结束大括号的数量必须匹配，如果您`"`通过使用转义字符，则`\"`必须添加另一个`"`字符，例如`"key2\""`

使用[JSONLint](http://jsonlint.com/)等工具来验证您的 JSON 是否正确。

# php - 此代码无效/缓慢吗？

> ID：10492677
> 
> 赞同：0
> 
> 时间：2012-05-08T04:46:15.533
> 
> 标签：php, performance, foreach, micro-optimization

> **可能重复：**
> [如何读取 PHP foreach 循环中的数组？](https://stackoverflow.com/questions/1685689/how-is-an-array-in-a-php-foreach-loop-read)

如果我有这个功能：

```
function getList()
{
   $list = array();
   $list['foo'] = 'Foo';
   $list['bar'] = 'Bar';
   return $list;
} 
```

然后我这样做：

```
foreach ( getList() as $item )
{
     echo $item.'<br>';
} 
```

该代码是否会比这样做慢：

```
$list = getList();
foreach ( $list as $item )
{
     echo $item.'<br>';
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T04:49:01.350

我敢肯定，在您的第一个示例中， foreach 中的 getList() 函数仅被评估一次。因此，不会有任何巨大的差异。

更新：根据要求，这是我在 php 交互模式下进行的快速测试。

```
function getList() {
    echo 'a';
    return array(1,2,3);
}

foreach(getList() AS $item) {
    echo $item;
} 
```

结果：a123

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T04:57:10.327

试试这个

```
<?php
function getList()
{
    echo '<div>getList()</div>';
    $list = array();
    $list['foo'] = 'Foo';
    $list['bar'] = 'Bar';
    return $list;
}

foreach ( getList() as $item )
{
    echo $item.'<br>';
}
?> 
```

你只会得到 1 个回声，这意味着 getList() 只调用一次:)

# drupal - Drupal - 显示特定用户组的块

> ID：10492678
> 
> 赞同：3
> 
> 时间：2012-05-08T04:46:20.340
> 
> 标签：drupal, organic-groups

我有大约 6 个不同的组，例如 Team A、Team B 等。我想为其中一个组显示一个块。正在考虑检查登录用户是否 gid = X 然后显示块。这样我可以设置 6 个不同的块，它们都针对不同的组，这样当用户登录时，它将为他们显示相关的块。那有意义吗？我将如何实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:38:13.740

经过一个多星期的研究和玩耍，我找到了一点代码，并在下面将其修改为我需要的。

```
<?php 
   global $user;
   $uid = $user->uid;
   $result = db_query ( "SELECT * FROM {og_membership}
   WHERE etid = :uid
   and entity_type = 'user'
   order by gid DESC", array (':uid' => $uid ) );

   foreach ( $result as $row ) {
     $gid = $row->gid;
     break; 
   }
?>    

<?php if ($gid == "GROUP ID HERE"): ?>

(load block here)

<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:11:20.913

根据您的具体设置，看起来[Context](http://drupal.org/project/context)模块可能会对您有所帮助。

这是你可以做到的。

1.  创建您的 6 个单独的块
2.  下载并安装上下文模块
3.  在 admin/structure/context/add 创建一个新的上下文
4.  根据以下我的选项之一填写**条件部分**
5.  填写**反应**部分，选择添加“块”，然后选择要为所选条件显示的确切块。您可以显示多个，因此请添加您想要显示的任何内容。
6.  为每个组创建一个单独的上下文（总共 6 个）。您可以为每个组显示多个块。

创建新上下文允许您仅显示某些块的某些上下文。示例上下文仅在某些页面（通过**路径**上下文）或仅针对特定角色的用户（通过**用户角色**上下文）或什至在某些节点类型或附加了特定术语的页面上显示块，等等。

在您的情况下，如果您使用 Organic Groups 模块来实现您的用户组，则上下文将与之集成。这意味着当您创建上下文时，“条件”部分下将有一个选项来选择您要为其显示某些块的有机组。您选择要在“反应”部分中显示的确切块。

让我们知道这是否有帮助！

# netbeans - Ubuntu 上的 Netbeans 不提供所有项目模板

> ID：10492683
> 
> 赞同：0
> 
> 时间：2012-05-08T04:46:42.037
> 
> 标签：netbeans, ubuntu

我目前正在学习使用 Java 进行分布式计算的课程。我被告知通过转到“文件->新项目-> Java Web-> Web应用程序”在Netbeans中创建一个项目，但是，在我的Ubuntu 12.04桌面（通过apt-get安装的openjdk和netbeans）上，当我点击“新建项目”，仅提供“Java”、“NetBeans 模块”和“示例”类别。

在 Netbeans 中创建新项目时，安装在 Windows 计算机上的 Netbeans 似乎在类别下有更多列表。特别是，它在类别下提供“Java Web”，并在该类别下提供“Web 应用程序”项目。是否需要安装一个包才能获取所有类别/项目模板列表？如果没有，我还能如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:50:31.360

转到工具|插件并安装 Java Web 插件（或 J2EE，不确定确切的词）或从 netbeans.org/downloads 下载所有包

# cakephp - 从控制器更改 $actsAs 变量

> ID：10492685
> 
> 赞同：3
> 
> 时间：2012-05-08T04:46:55.813
> 
> 标签：cakephp, plugins, behavior, cakephp-2.2

我要做的就是在保存之前从控制器更改上传模型的 $actsAs 数组中的值（“路径”）。

我想出的唯一方法是卸载行为，然后使用它的所有设置加载它。

仅仅改变路径似乎有点过头了。有没有更简单/更好的方法？

```
$this->loadModel('Upload');
$this->Upload->Behaviors->unload('Upload.Upload');
$this->Upload->Behaviors->load('Upload.Upload', array(
    'photo' => array(
        'thumbnailSizes' => array(
            'xvga' => '1024x768',
            'vga' => '640x480',
            'thumb' => '80x80',
        ),
        'thumbnailMethod' => 'php',
        'thumbnailQuality' => '80',
        'pathMethod'=>'random',
        'path' => '{ROOT}webroot{DS}uploads{DS}test{DS}{field}{DS}',
        'maxSize' => '5242880', //5MB
        'mimetypes' => array('image/jpeg', 'image/png', 'image/gif', 'image/bmp'),
        'extensions' => array('jpg', 'gif', 'png', 'bmp'),
    ),
));
if($this->Upload->save($this->request->data)) {
//... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:15:52.733

从查看来源我认为该[`uploadSettings()`](https://github.com/josegonzalez/upload/blob/2.0/Model/Behavior/UploadBehavior.php#L170)方法是您正在寻找的：

```
$this->Upload->uploadSettings('photo', 'path', 'YOUR_PATH'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:26:58.410

当您将 BehaviorCollection 加载到现有行为上时，它应该合并配置，因此您不需要重新包含所有其他配置。事实上，您也不需要卸载它。

```
$this->Upload->Behaviors->load('Upload.Upload', array(
    'photo' => array(
        'path' => '{ROOT}webroot{DS}uploads{DS}test{DS}{field}{DS}'
    )
)); 
```

由于合并使用`array_merge`而不是`array_merge_recursive`这对您不起作用。我将它包含在这里是因为它可能是首选方法，尽管您使用的行为使用了一个配置数组，Cake 不会按照您想要的方式处理它。

或者，您可以在构建模型时简单地修改`$actsAs`变量，这将使其正确设置。

```
public function __construct($id = false, $table = null, $ds = null) {
  // 2 lines for readability
  $this->actsAs['Upload.Upload']['photo']['path'] = 
  '{ROOT}webroot{DS}uploads{DS}test{DS}{field}{DS}';
  return parent::__construct($id, $table, $ds);
} 
```

# jquery - 更新面板时 JQuery 函数不起作用

> ID：10492686
> 
> 赞同：0
> 
> 时间：2012-05-08T04:47:02.970
> 
> 标签：jquery, asp.net, updatepanel

为什么 JQuery 函数在更新面板时不起作用？请看下面的代码。

```
<asp:Timer ID="Schedule_Timer" runat="server" Interval="10000"></asp:Timer>    
<asp:UpdatePanel ID="Schedule_UpdatePanel" runat="server">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Schedule_Timer" EventName="Tick" />
    </Triggers>
    <ContentTemplate>
        <asp:Panel ID="Schedule_Panel" runat="server" Height="250px"  Width="250px">
            <asp:Literal ID="Schedule_Label" runat="server" Text=""></asp:Literal>
        </asp:Panel>
    </ContentTemplate>
</asp:UpdatePanel>

<script>
    $('#test').cycle({
        fx: 'scrollUp',
        timeout: 6000,
        delay: -2000
    });
</script> 
```

通过`Schedule_Label`代码隐藏填写：

```
Protected Sub Schedule_Timer_Tick(sender As Object, e As System.EventArgs) Handles Schedule_Timer.Tick
    PrintTheSchedule()
End Sub

Private Sub PrintTheSchedule()
    //This is just for example, the actual data is taken from gridview based on the realtime
    Schedule_Label.Text = "<div id='test'>" & _
                "<div>test 1</div>" & _
                "<div>test 2</div>" & _
                "<div>test 3</div>" & _
                "<div>"        
End Sub 
```

在前 10 秒，JQuery 循环`test`div。但是在 UpdatePanel 刷新后，JQuery 不再运行，导致所有`test`div 值都显示在页面上。如何解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T04:55:59.000

有一个非常简单的答案。

在页面上执行的 jquery 函数只加载自己。因此，当 Timer 打勾时，jquery 函数不再保持有效。

所以你需要做的是：

在 PrintTheSchedule 函数中再次调用 javascript 函数，如

在 C# 中我这样做

```
ScriptManager.RegisterClientScriptBlock(Page, typeof(Page), "runScript", "RunScriptAgain();", true); 
```

并在 Aspx 页面中执行

```
<script>

 function RunScriptAgain() 
 {
  $('#test').cycle({
    fx: 'scrollUp',
    timeout: 6000,
    delay: -2000
   });
 } 
```

// 第一次需要

```
$(document).ready(function() {  RunScriptAgain(); }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:00:37.883

可能，您需要重新初始化循环 bec。内容会改变

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:55:24.907

更新面板刷新后..然后带有 id test 的旧 div 被销毁，因此您必须在每次面板更新时绑定循环功能。
另一种方法是使用 jquerys livequery 插件 [http://docs.jquery.com/Plugins/livequery](http://docs.jquery.com/Plugins/livequery) 并修改脚本如下

```
$('#test').livequery(function(){
$(this).cycle({
        fx: 'scrollUp',
        timeout: 6000,
        delay: -2000
    });
}); 
```

# visual-c++ - visual c++ 6.0 支持 unicode 吗？

> ID：10492690
> 
> 赞同：1
> 
> 时间：2012-05-08T04:47:26.527
> 
> 标签：visual-c++, visual-c++-6

我必须将 c++ 6.0 项目迁移到 Visual c++ 2010 项目。首先，我必须将 prj 转换为 unicode，然后转换为 vs 2010。我混淆了 Visual c++ 6.0 是否支持 unicode？如何知道谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T04:50:41.377

是的，它与最新版本一样支持 Unicode。`#define`在项目中设置 Unicode 标志会生成一个`_UNICODE`常量，它会更改 Windows API 函数的名称并将 CString 更改为使用 wchar_t 而不是 char。

# caching - APC 正常运行时间非常低

> ID：10492692
> 
> 赞同：0
> 
> 时间：2012-05-08T04:47:58.057
> 
> 标签：caching, apc, litespeed

这是我的服务器信息：

*   APC 版本：3.1.9
*   PHP版本：5.2.17
*   服务器：LiteSpeed
*   PHP：DSO。
*   cPanel：是的。
*   WHM：是的。

我很少打开我的`apc.php`，我通常在我的高峰流量打开它，大约每天 3-6 次。大多数时候我打开它，正常运行时间很短，从 20 分钟到 5 小时不等。但是，我从未收到任何错误电子邮件，例如当我的 Litespeed 自行重启时。

*   APC 内存使用率很低，为 10-25%。
*   碎片化也很低，< 1%。

这是我的 APC 设置。

```
apc.cache_by_default    1
apc.canonicalize    1
apc.coredump_unmap  0
apc.enable_cli  1
apc.enabled 1
apc.file_md5    0
apc.file_update_protection  2
apc.filters 
apc.gc_ttl  3600
apc.include_once_override   0
apc.lazy_classes    0
apc.lazy_functions  0
apc.max_file_size   20M
apc.mmap_file_mask  
apc.num_files_hint  1000
apc.preload_path    
apc.report_autofilter   0
apc.rfc1867 0
apc.rfc1867_freq    0
apc.rfc1867_name    APC_UPLOAD_PROGRESS
apc.rfc1867_prefix  upload_
apc.rfc1867_ttl 3600
apc.serializer  default
apc.shm_segments    1
apc.shm_size    512M
apc.slam_defense    1
apc.stat    0
apc.stat_ctime  0
apc.ttl 0
apc.use_request_time    1
apc.user_entries_hint   4096
apc.user_ttl    7200
apc.write_lock  1 
```

我能做些什么来延长正常运行时间吗？我的另一个小问题是，当 APC 重新启动时，它的缓存是否被刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:49:33.553

After i asked on litespeed forum, it is because my Litespeed seems restarted every 1-2 hours. My hosting said that the reason that LiteSpeed restarts every 1-2 hours is in order to rotate the access logs when processing statistics. Piped logging on my server has been enabled to fix this issue.

# java - Vector4f和Vector3f java3d的区别

> ID：10492697
> 
> 赞同：1
> 
> 时间：2012-05-08T04:48:43.873
> 
> 标签：java, java-3d

谁能解释一下vector3f和vector4f之间的区别

我知道vector3f包含xyz但是vector4f包含xyzw

但是如果我想将 3f 转换为 4f 我为 w 设置的值是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:53:14.930

如果您不使用第四个值，请将其设置为零。

vector4f 有一个构造函数，它接受一个 Tuple3f，该构造函数所做的就是将 W 值设置为 0。

```
Vector3f vector3 = new Vector3f(x,y,z);
Vector4f vector4 = new Vector4f((Tuple3f)vector3); 
```

# java - JAVA：文件输入流和文件输出流

> ID：10492698
> 
> 赞同：6
> 
> 时间：2012-05-08T04:48:48.117
> 
> 标签：java, fileinputstream, fileoutputstream

我对输入和输出流有这个奇怪的东西，我就是无法理解。我使用 inputstream 从资源中读取属性文件，如下所示：

```
Properties prop = new Properties();
InputStream in = getClass().getResourceAsStream( "/resources/SQL.properties" );
rop.load(in);
return prop; 
```

它找到了我的文件并成功地将其变红。我尝试编写修改后的设置，如下所示：

```
prop.store(new FileOutputStream( "/resources/SQL.properties" ), null); 
```

我从存储中得到奇怪的错误：

```
java.io.FileNotFoundException: \resources\SQL.properties (The system cannot find the path specified) 
```

那么为什么改变属性的路径呢？如何解决这个问题？我在 Windows 上使用 Netbeans

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T04:51:19.067

问题是`getResourceAsStream()`解决了你给它的相对于类路径的路径，同时`new FileOutputStream()`直接在文件系统中创建文件。他们有不同的路径起点。

通常，您不能写回加载资源的源位置，因为它可能根本不存在于文件系统中。例如，它可能在 jar 文件中，而 JVM 不会更新 jar 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T05:04:07.630

可能有效

```
try
{
java.net.URL url = this.getClass().getResource("/resources/SQL.properties");

java.io.FileInputStream pin = new java.io.FileInputStream(url.getFile());

java.util.Properties props = new java.util.Properties();

props.load(pin);
}
catch(Exception ex)
{
ex.printStackTrace();
} 
```

并检查以下网址

[getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T05:12:14.587

请看这个问题：[如何将文件保存到类路径](https://stackoverflow.com/q/4714645/239168)

而这个答案[https://stackoverflow.com/a/4714719/239168](https://stackoverflow.com/a/4714719/239168)

总而言之：您不能总是轻松地保存从类路径中读取的文件（例如 jar 中的文件）

但是，如果它确实只是类路径上的一个文件，那么上面的答案有一个很好的方法

# android - Android 地图 - 在单个地图视图中显示两条或多条路径

> ID：10492701
> 
> 赞同：0
> 
> 时间：2012-05-08T04:49:24.033
> 
> 标签：android, google-maps, android-mapview

我想在 Google 地图中显示类似于“建议路线”的 2 个位置之间的 2 条或更多路径。我可以通过此链接[J2ME Map Route Provider](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations/2023685#2023685)绘制 1 条路径。现在我想同时显示 2 条路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:34:44.050

您可以使用 J2ME Map Route Provider，您只需要更改/删除这行代码：

```
 Handler mHandler = new Handler() {
  public void handleMessage(android.os.Message msg) {
   TextView textView = (TextView) findViewById(R.id.description);
   textView.setText(mRoad.mName + " " + mRoad.mDescription);
   MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
   List<Overlay> listOfOverlays = mapView.getOverlays(); 
```

## listOfOverlays.clear();

```
 listOfOverlays.add(mapOverlay);
   mapView.invalidate();
  };
 }; 
```

您不想使用每个新叠加层清除地图，只需将其添加到现有叠加层集即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:18:07.367

这个[链接](http://csie-tw.blogspot.in/2009/06/android-driving-direction-route-path.html)对我来说非常有用。我在主要活动中调用了该方法两次，而新的覆盖没有取代前一个。

# php - 将二维关联 jquery 数组转换为 php 数组

> ID：10492711
> 
> 赞同：1
> 
> 时间：2012-05-08T04:51:32.133
> 
> 标签：php, jquery, json, associative-array

我在将我在 jQuery 中创建的关联数组转换为我可以在 PHP 中访问和使用的东西时遇到问题。

我使用以下内容来构建关联数组：

```
var colors = {};
$(this).find('input[name="color_id"]').each(function() {
    var color_entry_id = $(this).val();
    colors[color_entry_id] = jQuery.makeArray($(this).siblings(".colors." + $(this).val()).find(".img_color a.selected").map(function() {
        return $(this).css("background-color");
    }));
}); 
```

基本上，上面的代码应该返回以下形式：

```
colors = {
    "{{ color_entry_id }}": [array of string rgb values]
} 
```

然后我将其发送到我的 PHP 脚本，其中包含以下内容：

```
$.post(
     "test.php",
     { "edit_colors": JSON.stringify(colors) },
    ...
); 
```

在我的 PHP 中，我希望能够获取与 {{ color_entry_id }} 对应的数组并循环遍历要在更新查询中使用的值。以下是我的 PHP 代码：

```
$check_colors = array(
    "rgb(204, 51, 51)" => "red",
    "rgb(102, 153, 204)" => "sky_blue",
    "rgb(0, 204, 51)" => "lime_green",
    "rgb(0, 102, 0)" => "dark_green",
    "rgb(153, 0, 0)" => "burgandy", 
    "rgb(255, 102, 51)" => "orange", 
    ...
);   

$colors = json_decode($_POST['edit_colors']);

foreach($images as $color_entry => $image_link) {
    $update_color_query = "UPDATE color SET ";
    foreach(array_keys($check_colors) as $color) {
        if(in_array($color, $colors[$color_entry])) {
            $update_color_query .= $check_colors[$color] . "=1, ";
        } else {
            $update_color_query .= $check_colors[$color] . "=0, ";
        }
    }
    $update_color_query .= "image_url='$image_link' WHERE id=$color_entry";
    mysql_query($update_color_query);
} 
```

在上面的代码中，images 是一个单独的数组，其中包含相应的 {{ color_entry_id }} 和图像链接。$check_colors 是一个 PHP 硬编码关联数组，由 rgb 值与人类可读颜色组成。我的问题是链接：

```
in_array($color, $colors[$color_entry]) 
```

抛出“致命错误：不能使用类型 stdClass 作为数组”，因为 $colors[$color_entry] 没有成为我想要的二维数组。所以任何人都知道我做错了什么以及如何让这个二维数组在我的 PHP 代码中循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:04:19.737

该错误正是它所说的：您不能将 OBJECT 用作 ARRAY。当您使用 json_decode 时，它​​默认为一个对象。你需要它是一个关联数组。

所以把它改成这样：

```
$colors = json_decode($_POST['edit_colors'], true); 
```

现在，您可以根据需要遍历 $colors。

# javascript - 当元素具有子元素并使用 JQuery 时，如何仅在 HTML 中更改文本？

> ID：10492712
> 
> 赞同：2
> 
> 时间：2012-05-08T04:51:36.483
> 
> 标签：javascript, jquery, html

对于以下代码：

```
<div myLable="a"><p><span style="color:#00aaFF">change me only 1</span></p></div>
<div myLable="b"><span style="color:#00aaFF">change me only 2</span></div> 
```

如果我使用

```
$('div[myLable="a"]').text("change");
$('div[myLable="b"]').text("change"); 
```

然后里面的所有html代码都会改变，这不是我需要的。

注意有两个前置条件：

1.  子元素中没有任何标签或 id。
2.  我们不知道子元素有多深，可以得出的结论是要求更改最深的子元素的文本。
3.  如果在解决方案中使用原始 javascript 会很好，但必须使用`$('div[myLable="a"]')`表单，因为父元素没有 id 而只有一个用户定义的标签，所以我需要这个 Jquery 表单。

仅在这种情况下如何更改文本？

提前致谢，

哇

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:59:33.343

您需要更改`span`. 所以使用适当的选择器指向`span`：

```
$('div[myLable="a"] span').text("change"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:07:37.400

```
var $target = $('div[myLable="a"]').children();
$next = $target;

while( $next.length ) {
  $target = $next;
  $next = $next.children();
}

$target.text("change"); 
```

# iphone - 禁用 MKPlacemark 在 iPhone 中显示/隐藏标题

> ID：10492716
> 
> 赞同：0
> 
> 时间：2012-05-08T04:52:02.407
> 
> 标签：iphone, objective-c, mkmapview, mkplacemark

我有 MKMapView 和 MKPlacemark 就可以了。显示地图时，我正在显示地标的标题。到目前为止一切都很好。

我想在用户触摸它时禁用隐藏标题。

我试图添加

```
myMapView.userInteractionEnabled = NO;
myMapView.multipleTouchEnabled = NO; 
```

这有帮助，但完全禁用了与地图的交互。我想留下放大/缩小和移动地图的可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:29:06.540

无需创建 PIN，而是创建您的自定义注释。在自定义注释中创建包含您要呈现给用户的所有信息的视图，并禁用地标。这样，您不应该处理水龙头，但您将显示附加到一个纬度/经度的所有静态/动态信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:59:23.823

以下代码成功了

```
for (UIGestureRecognizer *g in [myMapView gestureRecognizers]) 
        [myMapView removeGestureRecognizer:g]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T11:10:54.207

在 MapKit Delegate 方法中尝试下面的代码

```
- (MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation {

    static NSString *defaultPinID = @"com.invasivecode.pin";
    MKPinAnnotationView *pinView  = (MKPinAnnotationView *)[yourMapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
    pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];
    if (annotation == yourMapview.userLocation)
        return nil;

    pinView.pinColor = MKPinAnnotationColorRed;

    pinView.userInteractionEnabled = NO;

    //pinView.canShowCallout = YES;
    pinView.animatesDrop = YES;

    return pinView;
} 
```

在这里，如果您将地标与此逻辑一起使用，它可能会起作用....希望，这对您有帮助... :)

# c# - 当 Flush() 被调用时，NLog 是否应该刷新 AsyncTargetWrapper 中的所有排队消息？

> ID：10492720
> 
> 赞同：15
> 
> 时间：2012-05-08T04:52:31.517
> 
> 标签：c#, silverlight, nlog

我想关闭我的应用程序并写入任何待处理的日志消息。所以我`LogManager.Flush()`在关机过程中打电话。但是，我没有看到所有写出的消息。相反，如果我等待几秒钟（使用`Thread.Sleep()`），我会看到这些消息。

在检查[了 NLog 在 GitHub 上的代码后](https://github.com/jkowalski/NLog/blob/master/src/NLog/Targets/Wrappers/AsyncTargetWrapper.cs)，我发现该`AsyncTargetWrapper.FlushAsync()`方法只是调度惰性写入器线程以在下一批中写入所有待处理的消息。它没有同步写入日志消息。

这是预期的行为吗？我期望`LogManager.Flush()`是同步的，即：阻塞直到所有待处理的消息都被写入（或超时）。

* * *

我在关机时使用的代码：

```
LogManager.Flush(ex => { }, TimeSpan.FromSeconds(15)); 
```

然后是初始化 Nlog 的代码（这是一个 Silverlight 应用程序，所以我没有使用任何配置文件）。

```
 public static void InitialiseNLog(LogLevel forLevel)
    {
        var config = new LoggingConfiguration();

        // Add targets.
        // We need an async target wrapping a custom web service call back to the server.
        var serverTarget = new RemoteServiceTarget();
        var asyncWrapper = new AsyncTargetWrapper(serverTarget, 10000, AsyncTargetWrapperOverflowAction.Discard);
        asyncWrapper.TimeToSleepBetweenBatches = (int)TimeSpan.FromSeconds(2).TotalMilliseconds;
        asyncWrapper.BatchSize = 200;

        // Add rules.
        var rule = new LoggingRule("Company.Application.SilverlightApp.*", forLevel, asyncWrapper);
        config.LoggingRules.Add(rule);

        // Activate the configuration.
        LogManager.Configuration = config;
        LogManager.GlobalThreshold = forLevel;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-22T04:19:34.600

[ligos](https://stackoverflow.com/a/10508571 "Ligos 回答")的评论是正确的。[由于NLog 问题 134](https://github.com/NLog/NLog/issues/134 "NLog issue")修改了该`AsyncTargetWrapper.CloseTarget()`方法，其中嵌套在域卸载时没有被刷新。`BufferingTargetWrapper`

`LogManager.Shutdown()`确实会强制`AsyncTargetWrapper`同步有效地刷新，但必须在之后使用它，`LogManager.Flush()`因为诸如 之类的目标`BufferingTargetWrapper`实际上并没有在关闭时刷新。设置可能会更好，`LogManager.Configuration = null`因为这会执行刷新，然后一次关闭目标，并且下次需要使用配置时将重新加载（如果使用配置文件）。

我已经对两者都进行了测试，并且我选择了后者，因为我希望在我把事情做好后重新启动并运行日志记录，但鉴于问题是在 Silverlight 中，我建议：

```
LogManager.Flush();
LogManager.Shutdown(); 
```

**编辑**

`LogManager`在域卸载或进程退出时将配置设置为 null，因此除非运行旧的 NLog 版本，否则我们不应该看到这个问题。NLog 问题已于 2012 年 10 月修复。在没有显式关闭或将 config 设置为 null 的情况下进行了测试，并且可以确认调用`LogManager.Flush()`就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-21T09:21:00.820

公然盗取： [在 NLog 中缓冲日志消息并手动将它们刷新到目标](https://stackoverflow.com/questions/8153286/buffering-log-messages-in-nlog-and-manually-flushes-them-to-target)

```
LogManager.Configuration.AllTargets
.OfType<BufferingTargetWrapper>()
.ToList()
.ForEach(b => b.Flush(e =>
    {
        //do nothing here
    })); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T01:02:23.830

我通过编辑当前的 NLog 源代码实现了修复。

在 AsyncTargetWrapper.cs 中，将`FlushAsync()`方法更改为：

```
protected override void FlushAsync(AsyncContinuation asyncContinuation)
{
    this.flushAllContinuation = asyncContinuation;
} 
```

到：

```
protected override void FlushAsync(AsyncContinuation asyncContinuation)
{
    this.flushAllContinuation = asyncContinuation;
    this.ProcessPendingEvents(null);        // Added to make this flush synchronous.
} 
```

# linux - 如何找到信号量未锁定的原因

> ID：10492723
> 
> 赞同：1
> 
> 时间：2012-05-08T04:53:13.217
> 
> 标签：linux, ipc, deadlock, semaphore

我有几个线程（实际上是 5 个线程）挂起的特殊情况。原因是它正在等待一个信号量，并且无法抓住它。ipcs -p 不显示任何具有该信号量的任务。ipcs -s -i 显示计数为 5。

那么，我怎么知道为什么这 5 个线程没有发生信号量锁？我如何查看是否有任何线程持有这个信号量。

（分析调用堆栈，我看不到任何具有信号量的任务。）

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:03:31.337

我会围绕信号量的使用编写一些调试代码（即，在每个信号量函数之前和之后，指定正在使用哪个信号量和哪个线程）。此外，我会仔细检查以确保您的代码没有任何死锁。这很容易实现，确保您以相同的顺序使用各种信号量来获得互斥锁和相反的顺序来解除锁。

除此之外，没有代码我能给你的帮助很少。

# javascript - Javascript 乘法和总计

> ID：10492726
> 
> 赞同：-2
> 
> 时间：2012-05-08T04:53:47.430
> 
> 标签：javascript, math

我有几个字段供人们输入贷款总额...我们会说loan1 和loan2 只是为了简单起见。

```
window.addEvent('domready', function() {
$('loan1').addEvent('change', rekenen1);
$('loan2').addEvent('change', rekenen1);

});
function rekenen1(){
$('subtotal').value = Number($('loan1').value) + Number($('loan2').value) ;
} 
```

当他们输入数据时，我会创建所有贷款的小计。现在我想通过取小计的 1% 并为总计添加 295 来进行总计。我需要帮助把它变成 javascript。

所以等式：loan1 + loan2 = 小计

(小计*.01)+295=总计

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:09:38.250

如果你有一个带有 id 的字段，`grandtotal`你可以在 rekenen1 函数中添加一行：

```
function rekenen1(){
    var subtotal = Number($('#loan1').val()) + Number($('#loan2').val());
    $('#subtotal').val(subtotal);
    $('#grandtotal').val(subtotal*0.01+295);
} 
```

编辑：我不用说 addEvent 也必须改变：

```
$().ready(function() {
    $('#loan1').addEvent('change', rekenen1);
    $('#loan2').addEvent('change', rekenen1);

}); 
```

将 rekenen1 函数更改为使用[jquery val 函数](http://api.jquery.com/val/)也更改了事件

# asp.net - 在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是否错误

> ID：10492728
> 
> 赞同：-1
> 
> 时间：2012-05-08T04:54:07.713
> 
> 标签：asp.net

当我尝试运行我的 asp 站点时，会出现以下错误：

配置错误描述：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:59:25.803

尝试在 VS 中创建一个虚拟目录。在解决方案资源管理器中右键单击项目节点，选择属性。单击 Web 选项卡并选择“创建虚拟目录”。

# javascript - 绘制形状并将其保存到数据库

> ID：10492732
> 
> 赞同：0
> 
> 时间：2012-05-08T04:54:21.610
> 
> 标签：javascript, asp.net, paint

我希望用户在 asp.net 中用鼠标绘制形状并与 IE8 兼容。我想在数据库中绘制和保存图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:25:55.767

两种选择：

1.  跟踪客户端上的用户交互。允许客户端将此数据发送到服务器，并将其保存在数据库中。根据用户交互在服务器上创建图像，并在客户端提供对图像的引用。创建此图像的方式取决于服务器语言，请参阅此处以获取 .NET 示例： http: [//www.developerfusion.com/article/2569/creating-images-on-the-fly-with-aspnet/](http://www.developerfusion.com/article/2569/creating-images-on-the-fly-with-aspnet/)

2.  您不能在 IE8 中使用 Canvas，因为它不受支持。但是，这可以重新创建该画布功能：[http](http://code.google.com/p/explorercanvas/) ://code.google.com/p/explorercanvas/ 。或者您可以使用基于闪存的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:02:10.093

HTML5 提供了 canvas 元素。更多信息可以在这里找到 --> [https://developer.mozilla.org/en/Canvas_tutorial](https://developer.mozilla.org/en/Canvas_tutorial)

# go - 如何在 Go 中使用 LevelDB？

> ID：10492740
> 
> 赞同：7
> 
> 时间：2012-05-08T04:55:18.223
> 
> 标签：go, leveldb

从[http://code.google.com/p/leveldb/](http://code.google.com/p/leveldb/)看来，将 LevelDB 与 Go 一起使用似乎并不明确或容易。但我真的很想知道如何在 Go 中使用它。

谁能给我一个线索？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-10-21T05:04:41.327

这是 LevelDB 的 Go 实现[https://github.com/syndtr/goleveldb](https://github.com/syndtr/goleveldb)

以下是如何使用它：

```
go get github.com/syndtr/goleveldb/leveldb 
```

创建或打开数据库：

```
db, err := leveldb.OpenFile("path/to/db", nil)
...
defer db.Close()
... 
```

读取或修改数据库内容：

```
data, err := db.Get([]byte("key"), nil)
...
err = db.Put([]byte("key"), []byte("value"), nil)
...
err = db.Delete([]byte("key"), nil)
... 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-25T01:27:15.083

使用[levigo](https://github.com/jmhodges/levigo) - 一个围绕 C++ 版本[LevelDB](http://code.google.com/p/leveldb/)的 Golang 包装器。

文件[levigo/leveldb_test.go](http://github.com/jmhodges/levigo/blob/master/leveldb_test.go)为您提供了如何使用 levigo 的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T06:05:26.633

使用由 Go 作者移植的[leveldb-go 。](http://code.google.com/p/leveldb-go/)

# r - 函数内的数据（创建包）

> ID：10492747
> 
> 赞同：15
> 
> 时间：2012-05-08T04:56:06.363
> 
> 标签：r

如果我需要在我正在创建的包内的函数（作为查找表）内使用数据集，是否需要在函数内显式加载数据集？

函数和数据集都是我的包的一部分。

这是在函数内使用该数据集的正确方法吗：

```
foo <- function(x){
    x <- dataset_in_question
} 
```

还是这样更好：

```
foo <- function(x){
    x <- data(dataset_in_question)
} 
```

还是有一些我认为不正确的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T07:30:18.563

[最近](http://tolstoy.newcastle.edu.au/R/e17/devel/12/04/0864.html)在 R-devel 上有一个关于这个主题的讨论（在包开发的背景下），其中有很多点与这个问题有关：

1.  如果您提供的选项仅适用于您的示例 R 本人（即[Brian Ripley](http://tolstoy.newcastle.edu.au/R/e17/devel/12/04/0865.html)）告诉您这样做：

    ```
    foo <- function(x){
       data("dataset_in_question")
    } 
    ```

2.  然而，这种方法将在 R CMD 检查中抛出一个注释，这可以通过使用[John Chambers 添加](http://thread.gmane.org/gmane.comp.lang.r.devel/30882)`globalVariables()`的函数在即将发布的 R 版本（或当前 R 开发）中避免

3.  “正确”的方法（即，[Brian Ripley](http://tolstoy.newcastle.edu.au/R/e17/devel/12/04/0868.html)和[Peter Dalgaard](http://tolstoy.newcastle.edu.au/R/e17/devel/12/04/0869.html)提倡的方法）是为您的包使用 LazyData 选项。请参阅[“编写 R 扩展”的这一部分](http://cran.r-project.org/doc/manuals/R-exts.html#Data-in-packages)。

顺便说一句：我不完全理解您的第一种方法应该如何工作。应该`x <- dataset_in_question`怎么做？是`dataset_in_question`全局变量还是之前定义的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-20T15:54:14.747

对我来说，有必要在文件中`get()`额外使用（参见@Henrik 的[postig](https://stackoverflow.com/users/289572/henrik)第 3 点）来摆脱 NOTE 。我的 R 版本是.`LazyData: true``DESCRIPTION``no visible binding for global variable ...``3.2.3`

```
foo <- function(x){
    get("dataset_in_question")
} 
```

所以 LazyData 可以`dataset_in_question`直接访问（不使用`data("dataset_in_question", envir = environment())`）并且`get()`满足`R CMD check`

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T15:05:34.283

可以将数据集作为 .rda 文件放在 R 文件夹中，如 Hadley 所述：http: [//r-pkgs.had.co.nz/data.html#data-sysdata](http://r-pkgs.had.co.nz/data.html#data-sysdata)

**Matthew Jockers 在syuzhet**包中使用这种方法来处理数据集，包括`bing`在 ~ 452 行看到的数据集：[https ://github.com/mjockers/syuzhet/blob/master/R/syuzhet.R](https://github.com/mjockers/syuzhet/blob/master/R/syuzhet.R)

`bing`对用户不可用，但对包可用，如下所示：`syuzhet:::bing`

本质上，该命令`devtools::use_data(..., internal = TRUE)`将以所需的方式设置所有内容。

# selenium - Selenium 一步一步学习

> ID：10492751
> 
> 赞同：2
> 
> 时间：2012-05-08T04:57:05.023
> 
> 标签：selenium, selenium-builder

我是硒网络测试的新手。你能告诉我如何一步一步地学习它，我需要学习哪些技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:02:25.187

我建议您下载[Selenium IDE](http://seleniumhq.org/)或[Se Builder](http://www.sebuilder.com/)，它们是用于在浏览器中记录 Selenium 测试的用户界面。两者都可以让您记录然后将测试导出为多种不同的语言。

需要注意的重要一点是，有两个 Selenium：原始的 Selenium 1，其中测试由按顺序执行的步骤列表组成，以及 Selenium 2 / Webdriver，它是用于编程测试的 API。

（完全披露：我是 Se Builder 的主要开发人员，所以我完全偏向于它。我确实认为这对新手来说可能不那么令人生畏，但 Selenium IDE 是在编写更成熟和标准的 IDE 时。 :) )

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T12:55:20.993

**更新：下面列出的其他资源**

Zarkonnen 提出的记录和播放工具是一个好的开始。您还需要了解 Selenium 本身的基础知识。[在Selenium HQ 的文档页面](http://seleniumhq.org/docs/03_webdriver.html)上有很好的关于在代码中编写测试的信息。

我认为从一开始就正确的三件事很重要：

*   [了解页面上的定位器](http://seleniumhq.org/docs/03_webdriver.html#locating-ui-elements-webelements)，了解如何将它们存储在一个位置（阅读页面对象模式并注意可能对您没有帮助的记录/播放工具）
*   [了解如何使用隐式和显式等待](http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-and-implicit-waits)处理动态内容 (AJAX)
*   了解模块化测试。编写小型、可重用的组件。

如果您正在使用 Ruby，那么我真的建议您看看[Cheezy 的 page_object gem](http://www.cheezyworld.com/2011/07/29/introducing-page-object-gem/)。

此外，请查看Google WebDriver 项目页面上[的各种介绍页面。](http://code.google.com/p/selenium/wiki/GettingStarted)

更新：您还应该考虑查看 Dave Haeffner 的[Elemental Selenium](http://elementalselenium.com/)和他的[Selenium Guidebook](https://seleniumguidebook.com/)。对于人们在现实世界中挣扎的东西，这两者都是很好的资源，而不是简单的，肤浅的例子。

# django - Heroku：如何通过navicat连接数据库

> ID：10492755
> 
> 赞同：4
> 
> 时间：2012-05-08T04:57:57.067
> 
> 标签：django, heroku, amazon-web-services

我在 Heroku 上部署了一个 Helloworld django 应用程序，并生成了一个共享数据库，我的 DATEBASE_URL 是`postgres://sfbywaqhvj:_WgTgP660aDnYuS3aP3o@ec2-23-21-64-4.compute-1.amazonaws.com/sfbywaqhvj`
我可以通过 Navicat 或其他本地 DBMS 连接数据库吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T06:29:42.977

假设这不是您发布的真实数据库 URL，并且您使用的是 Heroku Shared 9.1 Beta 插件（https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/ - 这是唯一的共享数据库，可让您在外部连接，您只需拆分为相关部分

> postgres://sfbywaqhvj:_WgTgP660aDnYuS3aP3o@ec2-23-21-64-4.compute-1.amazonaws.com/sfbywaqhvj

变成

```
Username: sfbywaqhvj
password: _WgTgP660aDnYuS3aP3o
host: ec2-23-21-64-4.compute-1.amazonaws.com
database: sfbywaqhvj 
```

# npr - 如何计算 3D 网格中的主曲率方向？

> ID：10492758
> 
> 赞同：1
> 
> 时间：2012-05-08T04:58:18.223
> 
> 标签：npr

在非真实感渲染中，线条方向对效果很重要。为了达到良好的效果，我想将纹理旋转到主曲率方向。

我有 3D 网格模型（由三角形集组成）。我想估计模型中每个顶点的主曲率方向。你可以回答这个问题或者告诉我在哪里可以找到方法（比如发论文）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:56:45.820

通常的方法是确定曲率张量。[请参阅http://www-sop.inria.fr/members/Pierre.Alliez/demos/curvature/](http://www-sop.inria.fr/members/Pierre.Alliez/demos/curvature/)上的资源

# c# - c#中SQL数据导出服务的实现

> ID：10492761
> 
> 赞同：0
> 
> 时间：2012-05-08T04:58:33.273
> 
> 标签：c#

我是 Azure 的新手，我想知道我们如何在 c# 中实现 SQL 数据导出服务。

我的实际问题是“我正在使用 C#.net 来实现一些 Web 服务，并且还使用 SQL azure 作为该服务的数据库。所以每天我都想检查我的数据库中是否有任何更新。如果有更新那么我只想从我的 sql azure 数据库中读取更新的数据，并将该数据加载到另一个 sql 数据库（SQL Server 和 SQL Azure）”。所以我想将此功能实现为 Windows azure worker 角色。所以每天这些工作者角色都会被执行。我如何使用 c#.net 实现整个操作。如果有人知道解决方案，请帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:06:04.627

为此，您必须创建一个类似于窗口服务的“工人角色”。

有关详细信息，请查看 [如何创建工作角色](http://msdn.microsoft.com/en-us/hh285885) 以及 [构建 Windows Azure 服务：工作角色后台任务处理程序](http://blogs.msdn.com/b/morebits/archive/2011/01/01/building-windows-azure-service-part5-worker-role-background-tasks-handler.aspx)

# excel - 列级别的 Excel 公式

> ID：10492764
> 
> 赞同：0
> 
> 时间：2012-05-08T04:58:50.630
> 
> 标签：excel

我猜这是一个长镜头。我的工作场所有一张服务器，以及它们运行的​​应用程序。服务器到应用程序是多对一的关系，即

*   单个服务器运行单个应用程序
*   一个应用程序可以在多台服务器上运行

A 列列出了服务器，B 列列出了每个服务器运行的应用程序。因此，B 列具有重复值。

在另一张纸上，我想在 A 列中列出这些应用程序，没有重复值，类似于关系表。

有没有办法使用公式来做到这一点？那么，如果一个新的应用程序被添加到服务器表中（比如说，因为添加了一个新的服务器），一个新的行会自动添加到应用程序表中吗？

就像我说的，我知道这是一个远射。我可以使用 VBA，但这会更方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:51:49.247

使用公式：[从列表中检索唯一值](http://www.exceltip.com/st/Retrieving_Unique_Values_From_A_List/805.html)

> 使用`INDEX`、`MATCH`和`COUNTIF`函数，如以下数组公式所示：
> 
> ```
> {=INDEX($A$2:$A$8,MATCH(0,COUNTIF($B$2:B2,$A$2:$A$8),0))} 
> ```
> 
> 注意：
> 唯一列表（B 列）中的第一个单元格必须保持为空。应在第二个单元格中输入公式并向下复制，直到返回 #N/A 错误。

没有公式：[如何在 Excel 的列中获取不同的值？](https://superuser.com/questions/49614/how-do-i-get-the-distinct-values-in-a-column-in-excel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T22:18:00.780

有什么理由不能在基于 A 列和 B 列的新工作表中创建数据透视表？

对于数据透视表行，您可以显示应用程序名称，对于值，您可以使用服务器名称计数来为您提供不包含重复项的应用程序列表。

每次要检查新应用程序时，请刷新数据透视表。您甚至可以使用 COUNTA() 来检查刷新后是否还有更多行。

从那里，您可以使用引用数据透视表的公式以多种方式引用数据透视表生成的列表。

# java - 如何处理 REST Web 服务中的十万个请求？

> ID：10492766
> 
> 赞同：3
> 
> 时间：2012-05-08T04:59:10.973
> 
> 标签：java, rest, request

我正在使用 Java 中的 REST 框架和我的 web 服务的 restlet api。如果有 100,000 个用户发布 Web 服务请求，我该如何处理？请任何人都可以建议我处理 100,000 个 REST Web 服务请求的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:43:44.743

您需要在多台服务器上运行您的网络服务以避免性能损失。您还可以使用云计算（例如亚马逊微实例......它是免费的）和负载均衡器来平衡每台服务器上的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:33:19.183

一个建议是使用负载均衡器并减少单个服务器上的负载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:37:02.480

这个问题太笼统，无法回答。编写一个可扩展的应用程序有很多方面。[诸如可扩展性规则](https://rads.stackoverflow.com/amzn/click/com/0321753887)之类的书籍有助于突出您可以从事的不同领域。数据库/应用程序服务器/缓存/状态和一些需要考虑的事情。对于这个问题，没有人能给你一个具体的答案。

# iphone - 将基本 32 位解码字符串转换为十进制

> ID：10492768
> 
> 赞同：0
> 
> 时间：2012-05-08T04:59:28.623
> 
> 标签：iphone, objective-c, ios, encoding, base32

我有一个基本 32 位解码的字符串现在我想解码该字符串我还想将任何字符串编码为基本 32 位解码字符串。有什么办法，任何算法（甚至在 C 中）或任何 API，这样我就可以解决这个问题。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:38:29.647

我不确定我是否理解您的问题，但如果您想将基数 32 数字转换为基数 10（十进制）数字，请执行以下操作：

```
#include <stdio.h>                                                                                                                                          
#include <string.h>
#include <math.h>

#define BASE 32

unsigned int convert_number (const char *s) {
    unsigned int len = strlen(s) - 1;
    unsigned int result = 0;
    char start_ch = 0, ch;
    while(*s != '\0') {
        ch = *s;
        if (ch >= 'a') {
            start_ch = 'a' - 10;
        } else if (ch >= 'A') {
            start_ch = 'A' - 10;
        } else {
            start_ch = '0';
        }

        if(len >= 0)
            result += (ch - start_ch) * pow(BASE, len);
        else
            result += (ch - start_ch);
        ++s;
        --len;
    }

    return result;
} 
```

# asp.net - ASP.net 下拉列表在自动显示时修剪多余的空格

> ID：10492769
> 
> 赞同：0
> 
> 时间：2012-05-08T04:59:33.077
> 
> 标签：asp.net, drop-down-menu, texttrimming

以下是我的代码。

```
protected void Button3_Click(object sender, EventArgs e)
    {
        var newLsit = new List<string>();
        newLsit.Add("1 1");
        newLsit.Add("1  1");
        newLsit.Add("1   1");
        this.DropDownList1.DataSource = newLsit;
        this.DropDownList1.DataBind();

    }

When dropdown list displays the values all the values are coming as "1 1" "1 1" "1 1" 
```

如何也显示额外的空格并避免这种修剪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:24:30.820

你可以试试这个

```
int num=1;
        newLsit.add("1"+String.format("%"+num+"s","1"));
        num=2;
        newLsit.add("1"+String.format("%"+num+"s","1"));
        num=3;
        newLsit.add("1"+String.format("%"+num+"s","1")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:04:02.473

使用`&nbsp;`而不是`" "`. 您的代码应如下所示。

```
protected void Button3_Click(object sender, EventArgs e)
    {
        var newLsit = new List<string>();
        newLsit.Add("1&nbsp;1");
        newLsit.Add("1&nbsp;&nbsp;1");
        newLsit.Add("1&nbsp;&nbsp;&nbsp;1");
        this.DropDownList1.DataSource = newLsit;
        this.DropDownList1.DataBind();

    } 
```

# c# - 数据表数据与文本框绑定

> ID：10492772
> 
> 赞同：0
> 
> 时间：2012-05-08T04:59:38.443
> 
> 标签：c#, data-binding

需要从数据表中获取值并将值绑定到文本框

```
 DataTable ff = new DataTable();
            DataColumn Regno = new DataColumn("Regno");
            ff.Columns.Add(Regno);
            DataRow row = ff.NewRow();
            var rg = (from data in db.receipts
                      select data.Regno).Max();

            row["Regno"] = rg + 1;
            ff.Rows.Add(row);
            txt_reciptno.DataBindings.Add("text", row, "Regno"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:19:56.967

你为什么使用数据表？您可以简单地`rg`通过查询获取，然后将 text 属性设置为 rg + 1，如下所示：

```
 text_recpitno.Text = (rg + 1).ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:21:04.803

同意@Habib.OSU。但是对于绑定，试试这个：

```
txt_reciptno.DataBindings.Add("text", ff.DefaultView, "Regno"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:27:56.137

我希望这篇文章可以帮助你。[.Net 中的数据绑定](http://www.akadia.com/services/dotnet_databinding.html)

在您的情况下，您需要

```
txt_reciptno.DataBindings.Add("Text", ff, "Regno"); 
```

如果你想移动到下一行，你应该使用

```
 var myCurrencyManager = (CurrencyManager)this.BindingContext[ff];

 myCurrencyManager.Position ++; 
```

# android - Android：如何移动弹出窗口并使该窗口不阻塞其他窗口

> ID：10492777
> 
> 赞同：-1
> 
> 时间：2012-05-08T05:00:15.437
> 
> 标签：android, popup, window, block, drag

我是安卓新手。这是我的问题。有没有弹出窗口可以在android中移动？如何实现弹出窗口或其他可以下药的对话框。而且这个弹窗可以不挡住其他的窗口吗？当它弹出时，我仍然可以在主窗口中使用其他功能。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:20:11.683

为此目的使用 PopupWindow 类，请参阅以下链接： [http ://www.mobilemancer.com/2011/01/08/popup-window-in-android/](http://www.mobilemancer.com/2011/01/08/popup-window-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T14:37:51.013

这是我工作的示例代码，我做一些评论来声明它是如何工作的

```
LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
              // your custom view
            View popView = inflater.inflate(R.layout.pop_view, null);
             // initialise your pop window  
             // take custom view , with specific width , height
           PopupWindow popupWindow = new PopupWindow(popView, WindowManager.LayoutParams.WRAP_CONTENT, WindowManager.LayoutParams.WRAP_CONTENT, true);
            ImageView imageview = (ImageView) popView.findViewById(R.id.imageview);
            Button dismiss = (Button) popView.findViewById(R.id.disbutton);
            imageview.setImageURI(imagePath);

    // button used to open pop window 
            popupWindow.showAsDropDown(ChooseFile, 50, -30);

          // here is the part related to move popwindow    
            popView.setOnTouchListener(new View.OnTouchListener() {
                @Override
                public boolean onTouch(View view, MotionEvent event) {

                    int orgX = 0, orgY = 0;
                    int offsetX, offsetY;

                    switch (event.getAction()) {

                        case MotionEvent.ACTION_DOWN:

                            orgX = (int) event.getRawX();
                            orgY = (int) event.getRawY();
                            break;

                        case MotionEvent.ACTION_MOVE:
                            offsetX = (int) event.getRawX() - orgX;
                            offsetY = (int) event.getRawY() - orgY;
                           // update popwindow postion , -1 set for width & height to make it fixed not changed 
                            popupWindow.update(offsetX, offsetY, -1, -1);
                            break;

                    }

                    return true;
                }
            });

            dismiss.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                  // if you want dismiss your pop window 
                    popupWindow.dismiss();
                }
            });

        } 
```

# mysql - 自动备份mysql数据库并在windows中自动将备份数据发送到gmail

> ID：10492782
> 
> 赞同：0
> 
> 时间：2012-05-08T05:00:46.837
> 
> 标签：mysql, windows

全部

我正在使用 Mysql 和 Windows 平台。我这里有这样的情况：

自动备份mysql数据库并自动将备份数据发送到gmail。我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:24:44.787

您需要设置一个 cronjob 来备份数据库（并且可以选择 zip 或 gzip），创建电子邮件，附加文件并发送。根据您运行的操作系统类型等，有许多可能的解决方案。

当然，Oezi 已经指出了附件大小限制的明显限制。不同的备份解决方案会比这种基于电子邮件的解决方案更好。

# ios5 - 如何将视频保存到具有特定名称的相册

> ID：10492784
> 
> 赞同：2
> 
> 时间：2012-05-08T05:01:00.000
> 
> 标签：ios5, alassetslibrary

当我尝试通过 ALAssetLibrary 方法 writeVideoAtPathToSavedPhotosAlbum 保存视频时，视频将按由 AssetLibrary 生成的名称保存，例如 IMG_0111、IMG_0123 等。如何按特定名称保存这些视频，例如“myAppName1.mov” 以下是代码片段。

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

[library writeVideoAtPathToSavedPhotosAlbum:tempURL
                            completionBlock:^(NSURL *assetURL, NSError *error)
 {
     if(error)
     {
     }
     else
     {
         NSLog(@"Saved video at %@\n", [assetURL path]);
     }
 }];
[library release], library = nil; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:25:33.180

目前没有办法实现这一目标。您不能指定文件名，Photolibrary 会根据您描述的文件名自动分配符合“IMG_XXX.ext”模式的文件名。保留文件名的唯一情况是通过相机连接套件导入照片。

干杯，

亨德里克

# iphone - 在没有导航的 ipad 应用程序中单击按钮打开视图（另一个 xib）

> ID：10492785
> 
> 赞同：1
> 
> 时间：2012-05-08T05:01:16.687
> 
> 标签：iphone, ios, ipad

单击图标时视图上有一个图像图标，另一个视图（其他 xib）就像键盘打开一样打开，它应该从底部仅覆盖屏幕 30%，单击当前图标的任何图标时有五个图标应该用选定的图标替换。它是一个 ipad 应用程序。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:02:51.610

```
 [self.view addSubview:youranotherviewcontroller.view]; 
```

或者

```
[self presentModalViewController:youranotherviewcontroller animated:NO]; 
```

我建议您阅读以下苹果指南。它可能对您有更多帮助。

[关于视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:09:39.810

```
ViewController *viewController=[[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
viewController.modalTransitionStyle=UIModalTransitionStyleFlipHorizontal;//any type you want use that
[self presentModalViewController:viewController animated:YES]; 
```

我认为这行代码对您很有帮助，请尝试告诉我这在您的应用程序中的外观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T05:21:37.233

您可以使用模态视图方法来提供向上滑动的效果，或者您可以添加带有动画的 sib 视图，您可以检查一下 -

```
UIView *myAnimationView = [[UIView alloc] initWithFrame:self.view.frame];
myAnimationView.backgroundColor = [UIColor blueColor];
[self.view addSubview:myAnimationView];

[myAnimationView setFrame:CGRectMake(0, 480, 320, 480)];
[myAnimationView setBounds:CGRectMake(0, 0, 320, 480)];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationDelegate:self];
[myAnimationView setFrame:CGRectMake(0, 0, 320, 480)];
[UIView commitAnimations]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T06:03:19.570

使用这个：- 在 ViewDidLoad 中同样给出另一个视图控制器的帧大小，使其仅覆盖屏幕的 30%。之后：-

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch *touch = [[event allTouches] anyObject]; 

    CGPoint startLocation = [touch locationInView:self.view];
    if([touch view]==yourFirstImageIcon)
    {
        // alloc this youranotherviewcontroller in ViewDidLoad
        [self presentModalViewController:youranotherviewcontroller animated:Yes];
        //It will show your another View having five more icons like keyboard
    }
} 
```

# android - Android：应用程序中的黑屏

> ID：10492786
> 
> 赞同：0
> 
> 时间：2012-05-08T05:01:18.583
> 
> 标签：android, cordova

在我的应用程序中，当我从 index1.html 移动到 index2.html 时，它显示黑屏，同时从服务器检索大量数据，存储在本地数据库中并在 index2.html 的 onload 中从本地数据库检索数据。如何显示出现黑屏时的进度条或如何删除黑屏？

**更新**

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Login</title>
 <script type="text/javascript" charset="utf-8" src="js/phonegap-1.0.0.js"></script>
    <link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title" charset="utf-8">
    <script type="text/javascript">

function submit()
{
alert("welcome");
window.open("index2.html");//while loading index2.html i need the progress bar
}
</script>
<style type="text/css">
.ex2{
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
    border-color:#FBB917;
    border: 1px solid;
   }
    body {
        font-family:Arial,Geneva,Verdana,sans-serif;
        font-size: 0.8em;
        overflow-x: hidden;
    }
    #loadingScreen {
        background: url(images/ajax-loader.gif) no-repeat 5px 8px;
        padding-left: 25px;
    }
    /* hide the close x on the loading screen */
    .loadingScreenWindow .ui-dialog-titlebar-close {
        display: none;
    }
  </style>
   </head>
  <body >

   <input type="button" style="width:80%" value="Submit" onClick="submit()"/>
  </body>
</html> 
```

安卓代码

```
public class MobilyzerActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
      //  setContentView(R.layout.main);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:06:16.070

如果您使用 JQueryMobile 之类的框架，那么您可以选择显示加载对话框。显示

```
$.mobile.showPageLoadingMsg() 
```

隐藏

```
$.mobile.hidePageLoadingMsg() 
```

您使用的是纯 HTML 吗？有什么框架？？

# java - 找回密码Tomcat认证

> ID：10492787
> 
> 赞同：0
> 
> 时间：2012-05-08T05:01:36.570
> 
> 标签：java, authentication, tomcat, servlets

寻找一种在基于 Tomcat 表单的身份验证的情况下捕获用户密码的方法，以便我可以将用户名/密码组合发送到另一个应用程序。这是我到目前为止所拥有的： -

```
 Principal principal = req.getUserPrincipal();
      PropertyDescriptor[] pds;
      pds = PropertyUtils.getPropertyDescriptors(principal.getClass());
      for(int i = 0; i < pds.length; i++){
          try {
              String name = pds[i].getName();
              Object value = PropertyUtils.getProperty(principal,name);
                            } catch (Exception e) {
              e.printStackTrace();
          }
      } 
```

如何从对象中获取密码？如果有人可以提供相同的建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:18:59.847

检查 name 属性以查看它是否等于`password`，相应的值将是您的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:04:31.287

您可能能够在登录序列的早期拦截密码，但我希望您*不能*这样做，否则安全性会被严重破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:15:47.053

这种事情是一个非常糟糕的主意，它打破了关于如何处理安全凭证的各种原则。OAuth 协议是为解决这个问题而开发的——我建议你研究一下，看看你是否可以这样做。

# jquery - Datatables - fnGetNodes() 如何将结果推送回服务器

> ID：10492791
> 
> 赞同：2
> 
> 时间：2012-05-08T05:01:51.780
> 
> 标签：jquery, webforms, datatables

我一直在努力处理数据[表](http://datatables.net/)以及如何`fnGetNodes`在提交时将数据正确推送回表单。

我已经让 jquery 正常工作。[我可以看到文档](http://datatables.net/examples/api/form.html)中描述的选定值。我的问题是如何将其`sData`推回 POST 中的服务器？

我知道这一定很简单，但我显然太专注于树而看不到森林。我将不胜感激任何帮助！

```
<script style="text/javascript">

    $(document).ready(function() {
        $('#form').submit( function() {
            var sData = $('input', oTable.fnGetNodes()).serialize();
            alert( "The following data would have been submitted to the server: \n\n"+sData );
            return false;
        });

        oTable = $('#data_table').dataTable();
    });
</script> 
```

我的 HTML 表单如下所示（为清晰起见已缩短）

```
<table id="data_table">
            <thead>
                <tr>
                    <th>Select</th>
                    <th>Question</th>
                </tr>
            </thead>
            <tr id=0><td><label for="id_questions_0"><input type="checkbox" name="questions" value="103" id="id_questions_0" /></label></td><td>D1\. Example of a multiple choice question</td></tr>
<tr id=1><td><label for="id_questions_1"><input type="checkbox" name="questions" value="104" id="id_questions_1" /></label></td><td>E1\. Example of a multiple choice question</td></tr>
<tr id=2><td><label for="id_questions_2"><input type="checkbox" name="questions" value="105" id="id_questions_2" /></label></td><td>G. Example of a multiple choice question</td></tr>
<tr id=3><td><label for="id_questions_3"><input type="checkbox" name="questions" value="106" id="id_questions_3" /></label></td><td>H. Example of a multiple choice question</td></tr> 
```

**编辑**

警报向我展示了这一点。 `questions=103&questions=104&questions=105&questions=106&questions=100&questions=101&questions=102`

POST（使用开发人员工具（向我展示了这一点。

```
csrfmiddlewaretoken:a2c3ed6e1bfee9fce0b7412553aa2080
name:Phase-1 Pre-Drywall
priority:1
description:Pre-Drywall inspection items
use_for_confirmed_rating:on
use_for_sampling:on
data_table_length:10
questions:103
questions:104
questions:105
questions:106
submit:Submit 
```

所以我需要以某种方式将前者转换为后者使用 jquery**有人可以帮我解决这个问题吗**？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T20:15:06.157

结果证明（正如预期的那样）非常简单。

```
 var oTable = $('#data_table').dataTable();
        // This will collect all of the nodes which were checked and make sure they get
        // pushed back.
        $('#form').submit(function () {
            $("input[name='question']").remove();  //Remove the old values
            $("input:checked", oTable.fnGetNodes()).each(function(){
                $('<input type="checkbox" name="questions" ' + 'value="' +
                  $(this).val() + '" type="hidden" checked="checked" />')
                    .css("display", "none")
                    .appendTo('#form');
            });
        }); 
```

# extjs4 - Extjs 4 Mvc 应用到生产

> ID：10492792
> 
> 赞同：1
> 
> 时间：2012-05-08T05:01:51.813
> 
> 标签：extjs4, extjs, extjs-mvc

我用 asp.net 创建了一个 extjs4 MVC 应用程序。应用程序在开发环境中使用 ext-all-debug.js 文件运行，没有任何错误。

现在，当我使用 sencha sdk 1.2.3 生成缩小的 js 文件时（成功生成 app-all.js 和 all-classes.js）。

但是当我在生产中运行这些生成的文件时，它会显示依赖项错误。

喜欢`Ext.create('Fleet.view.gadgets.ux.GridPrinter')`不存在。ETC

任何人都可以帮助我如何组织我的代码，以便 sencha sdk 工具将我所有的 source.js 文件缩小到生产 app-all.js 文件中。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:58:18.233

几件事要寻找：

1.  检查 app-classes.js - 这是您的非缩小形式的应用程序。你在那里看到你的课吗？

2.  确保你有所有的`requires: []`定义。例如，您应该`requires: [ 'Fleet.view.gadgets.ux.GridPrinter']`在使用此视图的控制器中拥有。或者你可以这样定义它`views: ['gadgets.ux.GridPrinter']`。这些属性基本上也是解析器去抓取所需类的指标。

# java - 是否使用静态方法？

> ID：10492794
> 
> 赞同：1
> 
> 时间：2012-05-08T05:01:57.553
> 
> 标签：java, design-patterns

嗨，我在 Java 中有一个 Web 服务，其中我有一个具有不同方法的类，这些方法可以修改客户端发送的字符串并根据他想要的 sting 类型将其返回。因此，根据字符串类型要求，调用了一个方法..

喜欢

```
class Test{

public static String a(String z)
{
 // do stuff and return;
}

public static String b(String z)
{
 // do stuff and return;
}
} 
```

因此，如果出现一个包含 10000 个请求的数组，这些方法会被调用 10000 次，我想知道这些方法应该被视为静态方法还是非静态方法（我应该在我的主 Web 服务类中创建此类的全局对象并调用这些方法方法） ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:13:02.877

我认为您不需要将方法设为静态，如果您可以访问对象内的方法，那么您应该（尽可能避免静态）。这可以提高代码性能（在内存利用率方面）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:19:40.597

这些方法是静态的，令人信服的原因是什么？如果您需要静态方法，请创建它们。否则，从设计的角度来看，坚持使用非静态方法。您不能覆盖静态方法（尽管您可以隐藏它们。）

还有这个：

[在Java中，类上的静态方法有什么缺点吗？](https://stackoverflow.com/questions/2472690/in-java-is-there-any-disadvantage-to-static-methods-on-a-class)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T05:27:10.173

如果方法在所有情况下的行为都相同，则可以使用静态方法。如果这些方法只是对作为参数提供的字符串做一些工作，并且所有实例的行为都是相同的，那么您可以。

同样，您也可以从中创建一个单例并通过 UNIQUE_INSTANCE 调用方法。

就像是：

```
public class Test {

    private static final Test UNIQUE_INSTANCE = new Test();

    private Test() {
    }

    public static final Test getUniqueInstance() {

        return UNIQUE_INSTANCE;
    }

    public final String a(String z) {

        // do stuff and return;
    }

    public final String b(String z) {

        // do stuff and return;
    }
} 
```

然后你可以做>>

```
Test.getUniqueInstance().a("Hello");
Test.getUniqueInstance().b("World"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T05:06:47.907

如果线程之间没有共享任何资源，那么使用任何静态方法都没有害处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T05:15:49.810

是的，应该有一个静态修饰符，因为不同的方法或函数之间没有交互，并且结果以相同的方法返回。“静态”一词是定义一个类变量或方法，无需实例化此类对象即可访问。

如果你不打算实例化类，而只需要使用里面的方法，“静态”是正确的方法，并将类构造函数设置为私有。

# google-app-engine - 如何将 MySQL 与 Google App Engine 一起使用？

> ID：10492795
> 
> 赞同：3
> 
> 时间：2012-05-08T05:02:05.743
> 
> 标签：google-app-engine, google-cloud-sql

在我的应用程序中，我想将 MySQL 与 Google App Engine 一起使用。我试图寻找解决方案，但没有找到准确的答案。有人说它不可能连接到 MySQL，有人说 Google Cloud SQL 是其中一种选择。

有人对正确方法有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T05:54:19.530

通过 Google Cloud SQL 可以在 Google App Engine 中使用 MySQL。它适用于 Python 和 Java 运行时。

但是，Google Cloud SQL 目前处于有限预览阶段。[您可以在此处](https://developers.google.com/cloud-sql/docs/before_you_begin#enroll)查看有关如何注册的详细信息。

在等待查看是否被接受进入预览版时，您可以查看[Java](https://developers.google.com/cloud-sql/docs/developers_guide_java)和[Python](https://developers.google.com/cloud-sql/docs/developers_guide_python)的说明。

# c++ - NetBeans 在构建+运行时无法识别 C++ 类成员

> ID：10492797
> 
> 赞同：1
> 
> 时间：2012-05-08T05:02:10.573
> 
> 标签：c++, netbeans, compiler-errors, netbeans7.0

我对 NetBeans 还是很陌生，并且正在用 C++ 编写类代码。我目前正在进行我的第三个项目，并且在尝试编译+运行我的项目时遇到了我似乎无法解决的错误。我已经对我的代码进行了四次检查，甚至从以前的项目中复制代码。我已尝试退出、重新启动计算机并再次启动 NetBeans。我在我的代码上运行了 CppCheck，它没有发现任何错误。

错误信息：

```
build/Debug/MinGW-Windows/main.o: In function `main':
C:/Users/Martin/Documents/NetBeansProjects/Lab3/main.cpp:52: undefined reference to `Dictionary::Dictionary()'
C:/Users/Martin/Documents/NetBeansProjects/Lab3/main.cpp:52: undefined reference to `Dictionary::~Dictionary()' 
```

我尝试从以前的项目中复制代码，即使使用与以前有效的项目完全相同的代码，它仍然存在这个问题。基本上，构建无法识别 Dictionary 类。

我可以检查哪些可能导致此问题的事项？我可以检查任何晦涩（甚至明显）的设置吗？我应该开始一个新项目并复制我的代码吗？

编辑：添加主（）：

```
#include <cstdlib>
#include <iostream>

#include "Dictionary.h"

using namespace std;

/*
 * argv[1] dictionary file
 * argv[2] boggle board file
 * argv[3] output file
 */
int main(int argc, char** argv) {
    if (argc > 3) {
        Dictionary dict;
        dict.loadDictFile(argv[1]);

    } else {
        cout << "Not enough arguments. Needed: ./lab3 [dictionary file] "
                "[board file] [output file]" << endl;
    }
    return 0;
} 
```

和 Dictionary.h：

```
#ifndef DICTIONARY_H
#define DICTIONARY_H

#include <string>
#include <set>

using namespace std;

class Dictionary {
public:
    Dictionary();
    Dictionary(const Dictionary& orig);
    virtual ~Dictionary();

    virtual void loadDictFile(char * fileName);
    virtual bool find(string word);

private:
    set<string> dict;
    set<string> fullDictionary; // Contains all words, not just those 4+ char long.

};

#endif  /* DICTIONARY_H */ 
```

和 Dictionary.cpp：

```
#include "Dictionary.h"
#include <cstdlib>
#include <iostream>
#include <fstream>

#include <string>
#include <set>

//using namespace std;

Dictionary::Dictionary() {
}

Dictionary::Dictionary(const Dictionary& orig) {
    dict = orig.dict;
    fullDictionary = orig.fullDictionary;
}

Dictionary::~Dictionary() {
}

void Dictionary::loadDictFile(char* fileName) {
    ifstream infile;
    infile.open(fileName);
    if (infile) {
        while(!infile.eof()) {
            string line;
            getline(infile, line);
            fullDictionary.insert(line);
            if (line.size() > 3) {
                dict.insert(line);
            }
        }
    } else {
        cout << "Dictionary File not loaded: " << fileName << endl;
    }
}

bool Dictionary::find(string word){
    if (dict.find(word) != dict.end()) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T01:58:06.633

发现了我的问题。Netbeans 不认为 Dictionary 类是我项目的一部分，因此它没有编译 Dictionary.cpp。我`Project`通过右键单击`Source Files`文件夹并使用`Add existing item...`菜单选项将其添加到窗口中。现在它编译得很好。

`New File`有谁知道如果我使用 Netbean 的接口并专门添加到项目中，为什么不会添加该类？

# android - Andengine Class not found exception

> ID：10492804
> 
> 赞同：0
> 
> 时间：2012-05-08T05:02:44.900
> 
> 标签：android, exception, andengine

I have been working on Andengine for about 4months the GLES 1 was working fine. but when i installed the AndEngine GLES 2, at the runtime DDMS is showing Class not Found Exception. I tried the project with same AndroidMenifest on android, it is running... but when i am inheriting my activity with BaseGameActivity it is showing Class not found Exception. The problem is now even with GLES1.

```
public class CentrifeudGameActivity extends BaseGameActivity {

private static final int CAMERA_WIDTH = 720;
private static final int CAMERA_HEIGHT = 480;

// ===========================================================
// Fields
// ===========================================================

private Camera mCamera;
private BitmapTextureAtlas mBitmapTextureAtlas;
private TextureRegion mFaceTextureRegion;

@Override
public Engine onLoadEngine() {
    this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    return new Engine(new EngineOptions(true, ScreenOrientation.LANDSCAPE, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), this.mCamera));
}

@Override
public void onLoadResources() {
    this.mBitmapTextureAtlas = new BitmapTextureAtlas(32, 32, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");
    this.mFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "face_box.png", 0, 0);

    this.mEngine.getTextureManager().loadTexture(this.mBitmapTextureAtlas);
}

@Override
public Scene onLoadScene() {
    this.mEngine.registerUpdateHandler(new FPSLogger());

    final Scene scene = new Scene();
    scene.setBackground(new ColorBackground(0.09804f, 0.6274f, 0.8784f));

    /* Calculate the coordinates for the face, so its centered on the camera. */

    final int centerX = (CAMERA_WIDTH - this.mFaceTextureRegion.getWidth()) / 2;
    final int centerY = (CAMERA_HEIGHT - this.mFaceTextureRegion.getHeight()) / 2;

    /* Create the face and add it to the scene. */
    final Sprite face = new Sprite(centerX, centerY, this.mFaceTextureRegion);
    scene.attachChild(face);

    return scene;
}

@Override
public void onLoadComplete() {
    // TODO Auto-generated method stub

}
} 
```

with the Menifest code

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.folio3.games"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="9" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".CentrifeudGameActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

The Exception that is occuring is as below

```
 05-08 10:00:42.598: E/AndroidRuntime(667): FATAL EXCEPTION: main
05-08 10:00:42.598: E/AndroidRuntime(667): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.folio3.games/com.folio3.games.CentrifeudGameActivity}: java.lang.ClassNotFoundException: com.folio3.games.CentrifeudGameActivity
05-08 10:00:42.598: E/AndroidRuntime(667):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
05-08 10:00:42.598: E/AndroidRuntime(667):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-08 10:00:42.598: E/AndroidRuntime(667):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-08 10:00:42.598: E/AndroidRuntime(667):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-08 10:00:42.598: E/AndroidRuntime(667):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-08 10:00:42.598: E/AndroidRuntime(667):  at android.os.Looper.loop(Looper.java:137)
05-08 10:00:42.598: E/AndroidRuntime(667):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-08 10:00:42.598: E/AndroidRuntime(667):  at java.lang.reflect.Method.invokeNative(Native Method)
05-08 10:00:42.598: E/AndroidRuntime(667):  at java.lang.reflect.Method.invoke(Method.java:511)
05-08 10:00:42.598: E/AndroidRuntime(667):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-08 10:00:42.598: E/AndroidRuntime(667):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-08 10:00:42.598: E/AndroidRuntime(667):  at dalvik.system.NativeStart.main(Native Method)
05-08 10:00:42.598: E/AndroidRuntime(667): Caused by: java.lang.ClassNotFoundException: com.folio3.games.CentrifeudGameActivity
05-08 10:00:42.598: E/AndroidRuntime(667):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
05-08 10:00:42.598: E/AndroidRuntime(667):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
05-08 10:00:42.598: E/AndroidRuntime(667):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
05-08 10:00:42.598: E/AndroidRuntime(667):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
05-08 10:00:42.598: E/AndroidRuntime(667):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871) 
```

Can Anyone tell me what is the problem here! because i am just copying the sprite example but the class not found exception is making troubles.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:29:22.493

Make a new project, and copy your files into it. Usually solves these problems.

[edit] And you can not use BaseGameActivity. Use SimplebaseGameActivity. The onLoadEngine changes name to onCreateEngine and so on....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:09:14.263

Add andengine as library instead of importing the project, that solved my problem

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T18:29:07.557

Had the same error after an ADT upgrade. Renaming the "lib" folder to "libs" fixed it.

# haskell - 使用酸态 - safeCopy 函数

> ID：10492812
> 
> 赞同：4
> 
> 时间：2012-05-08T05:03:32.403
> 
> 标签：haskell, acid

存在数据类型时的问题：

```
MyData = One Int | Two (Int -> Int) | Three | Four 
```

问题是当我说

```
$(deriveSafeCopy 0 'base ''MyData) 
```

我收到以下错误：

```
No instance for (SafeCopy (Int -> Int) )
   arising from the use of `getSafePut`
... 
```

所以我意识到 SafeCopy 可能不适用于功能......

我有麻烦了吗？既然我不能改变 MyData 的模型......有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T05:08:36.037

确实，由于点`SafeCopy`是序列化，因此您不能在数据中使用函数；GHC不支持函数的序列化，由于各种原因，这样做会有问题；函数可以关闭诸如操作系统句柄之类的临时数据，因此很难可靠地序列化和反序列化函数。

您必须以其他方式对其进行建模；例如，如果您只需要`Int -> Int`函数的一些可能行为，您可以将其建模为数据类型。例如，如果您需要的唯一函数是`\x -> x `div` k`（对于任意常数*k*）和`\x -> x + 1`，您可以编写：

```
data IntToInt
    = DivideBy Int
    | PlusOne 
```

可以是. *_* `SafeCopy`但是，如果您依赖不受限制的功能，那么恐怕您将不得不以更基本的方式更改您的设计。

# r - 如何在 R 中生成 GUID？

> ID：10492817
> 
> 赞同：26
> 
> 时间：2012-05-08T05:04:09.017
> 
> 标签：r, random, guid, uuid

如何在 R 中生成 GUID 和 UUID？

我希望能够根据运行 rsession 的机器的硬件等生成 GUID。

然而，作为后备，我很乐意创建符合 rfc4122 的 UUID。

是否有可以创建 GUID 的包？否则，是否有人有一些与 RFC4122 兼容的 UUID 代码？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-03-25T05:27:28.557

现在最好的选择是`uuid`包。它由一个函数 ( `UUIDgenerate`) 组成，该函数不依赖于 R 的内部随机数生成器，因此不会`set.seed`像@thelatemail 的回答那样在会话中使用而遭受任何后果。您可以选择由包的内部随机数生成器或基于时间生成 UUID。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-30T19:50:26.970

如果您在 Unix 环境中使用 R，您可以使用`system()`命令在 R 中获取 UUID。

### 在 Linux（Ubuntu 12.04 LTS）上：

```
my_uuid <- system("uuid",intern=T)
my_uuid
[1] 0f62f1de-418d-11e3-8a19-cb0ceccb58ec 
```

### 在 Mac OS X 10.8 上：

```
my_uuid <- system("uuidgen", intern=T)
my_uuid
[1] 9A9D64DF-EB01-47E7-B16E-DC0343951883 
```

据我所知，两者都`uuid`遵循`uuidgen`UUID[版本 4](http://en.wikipedia.org/wiki/Uuid#Version_4_.28random.29)格式。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-08T06:22:58.063

我对 UUID 的复杂性一无所知，但是这样的事情可以吗？

```
baseuuid <- paste(sample(c(letters[1:6],0:9),30,replace=TRUE),collapse="")

paste(
    substr(baseuuid,1,8),
    "-",
    substr(baseuuid,9,12),
    "-",
    "4",
    substr(baseuuid,13,15),
    "-",
    sample(c("8","9","a","b"),1),
    substr(baseuuid,16,18),
    "-",
    substr(baseuuid,19,30),
    sep="",
    collapse=""
)
# result like: "f7bd11ed-fca9-42e5-8c3e-4464cd02e0fa" 
```

这应该符合[http://en.wikipedia.org/wiki/Uuid#Version_4_.28random.29](http://en.wikipedia.org/wiki/Uuid#Version_4_.28random.29)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T19:53:17.383

Bioconductor 有一个 Ruuid 包，它似乎不再存在，但在“Ruuid”上的谷歌搜索将指向您可以下载它的地方。

# python - 检查是否在 django 中设置了会话变量

> ID：10492819
> 
> 赞同：1
> 
> 时间：2012-05-08T05:04:34.423
> 
> 标签：python, django, session

我需要检查会话是否已设置...我遵循了 stackoverflow 的一些解决方案，但仍然存在问题

```
if request.session.get('orderId',None):
    request.session['orderId']=ts
    orderId=request.session['orderId']
else:
    orderId=request.session['orderId'] 
```

它在下面的 orderId 处说 keyError：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:08:16.757

你的条件是倒置的。尝试反转：

```
if not request.session.get('orderId', None):
    request.session['orderId'] = ts
    orderId = request.session['orderId']
else:
    orderId = request.session['orderId'] 
```

`.get('orderId', None)`将返回`None`， `if not request.session.get('orderId', None)`并将指导您填充会话，这（可能）是您想要的。

更好的方法是

```
orderId = request.session.setdefault('orderId', ts) 
```

如果存在，这将从会话中为您`orderId`提供，否则它将填充会话`ts`并返回给您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:11:28.923

get 方法的整个想法是保持代码干净。这应该有效：

```
orderId = request.session.get('orderId',ts) 
```

编辑：

对不起，我错过了这个：

```
orderId = request.session.get('orderId',ts)
request.session['orderId']=ts 
```

不需要 if 和 else ...

# c++ - 对大数求和

> ID：10492820
> 
> 赞同：5
> 
> 时间：2012-05-08T05:04:40.093
> 
> 标签：c++, string, variables, largenumber

我在 Project Euler 网站上遇到了一些问题并且遇到了问题。问题要求“计算出以下一百个 50 位数字之和的前十位。” 我猜有一些数学方法可以解决这个问题，但我只是想知道这么大的数字是如何相加的？我将数字存储为字符串并将每个数字转换为长数字，但数字太大以至于总和不起作用。

有没有办法将非常大的数字作为变量（不是字符串）？我不希望代码解决问题，因为我想自己解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T06:29:16.970

> 我只是想知道这么大的数字是如何相加的？

您可以使用数组：

```
long LargeNumber[5] = { < first_10_digits>, < next_10_digits>....< last_10_digits> }; 
```

现在您可以计算 2 个大数的总和：

```
 long tempSum = 0;
  int carry = 0;
  long sum[5] = {0,0,0,0,0};

  for(int i = 4; i >= 0; i--)
  {
    tempSum = largeNum1[i] + largeNum2[i] + carry; //sum of 10 digits

    if( i == 0)
      sum[i] = tempSum; //No carry in case of most significant digit
    else
      sum[i] = tempSum % 1000000000; //Extra digits to be 'carried over'

    carry = tempSum/1000000000;
  }

  for( int i = 0; i < 5; i++ )
    cout<<setw(10)<<setfill('0')<<sum[i]<<"\n"; //Pad with '0' on the left if needed 
```

> 有没有办法将非常大的数字作为变量（不是字符串）？

这没有原语，您可以使用任何数据结构（数组/队列/链表）并适当地处理它

> 我猜有一些数学方法可以解决这个问题

当然！但，

> 我不希望代码解决问题，因为我想自己解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:29:45.973

您可以将数字存储在数组中。为了节省空间并提高操作性能，请将数字的位数存储在 10^9 中。所以一个数字 182983198432847829347802092190 将在数组中表示如下

> arr[0]=2092190 arr[1]=78293478 arr[2]=19843284 arr[3]=182983

只是为了清楚起见，该数字表示为 arr[i]*(10^9i) 的总和，现在从 i=0 开始，并按照您小时候学习的方式开始添加数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-01T10:58:53.663

我在java中做过，这里我取的是数字N1和N2，我创建了一个大小为1000的数组。让我们举个例子如何解决这个问题，N1=12，N2=1234。对于 N1=12，temp=N1%10=2，现在将此数字与数字 N2 从右到左相加，并将结果存储到从 i=0 开始的数组中，对于 N1 的其余数字类似。该数组将存储结果，但顺序相反。看看这个链接。请检查此链接[http://ideone.com/V5knEd](http://ideone.com/V5knEd)

```
import java.util.*;
import java.lang.*;
import java.io.*;

/* Name of the class has to be "Main" only if the class is public. */
class Ideone
{
    public static void main (String[] args) throws java.lang.Exception  {
        Scanner scan=new Scanner(System.in);
        int A=scan.nextInt();
        int B=scan.nextInt();
        int [] array=new int[1000];
        Arrays.fill(array,0);
        int size=add(A,B,array);
        for(int i=size-1;i>=0;i--){
            System.out.print(array[i]);
        }
    }
    public static int add(int A, int B, int [] array){
        int carry=0;
        int i=0;
        while(A>0 || B>0){
            int sum=A%10+B%10+carry+array[i];
            array[i]=sum%10;
            carry=sum/10;
            A=A/10;
            B=B/10;
            i++;
        }
        while(carry>0){
            array[i]=array[i]+carry%10;
            carry=carry/10;
            i++;
        }
        return i;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T15:08:44.613

```
#include<iostream>
#include<fstream>
#include<sstream>
using namespace std;

struct grid{
    int num[50];
};

int main()
{
    struct grid obj[100];
    char ch;
    ifstream myfile ("numbers.txt");
    if (myfile.is_open())
    {
        for(int r=0; r<100; r++)
        {
            for(int c=0; c<50; c++)
            {
                myfile >> ch;
                obj[r].num[c] = ch - '0';
            }
        }
        myfile.close();
        int result[50],temp_sum = 0;
        for (int c = 49; c>=0; c--)
        {
            for (int r=0; r<100; r++)
            {
                temp_sum += obj[r].num[c];
            }
            result[c] = temp_sum%10;
            temp_sum = temp_sum/10;
        }
        string temp;
        ostringstream convert;
        convert << temp_sum;
        temp = convert.str();
        cout << temp_sum;
        for(unsigned int count = 0; count < (10 - temp.length()); count++)
        {
            cout << result[count];
        }
        cout << endl;
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-17T06:00:49.243

这是您的时间和内存大小的最佳方式：D

```
#include <iostream >
#include <climits >

using namespace std;

int main()
{
    unsigned long long  z;

    cin >>z;

    z=z*(z+1)/2;

    C out << z;

    return 0;
} 
```

# jsf-2 - jsf-2.0 如何将值从一个类传递到另一个类

> ID：10492821
> 
> 赞同：0
> 
> 时间：2012-05-08T05:04:50.530
> 
> 标签：jsf-2

我在*payeeSearch.xhtml*中有一个扩展数据表，显示为 -![在此处输入图像描述](../Images/791f41247b22cd2abd2f0d4179bb97dd.png)

1）单击*显示详细*信息后，它应该导航到不同的视图并根据所选行的列值之一实现的结果显示一个新表（在图中，它是*IN303285...*）
2）我有用于导航到下一个视图的编写代码为 -

```
<rich:contextMenu attached="false" id="menu" submitMode="ajax">
      <rich:menuItem ajaxSingle="true" value="Show Particulars" action="payeeParticulars.xhtml">
           <a4j:support event="onclick" actionListener="#{payeeSearchController.showParticulars}"/>
      </rich:menuItem> 
```

3) 此视图 ( *payeeParticulars.xhtml* ) 正在显示另一个扩展数据表。
并且*showPartulatrs* actionlistener 用于将所选行的列值传递给*PayeeParticulars.java*类，但它总是传递空值，即使我能够在*payeeSearch.java*类中获取值。
4) 我正在编写代码以在*PayeeParticulars.java*类的构造函数中显示新的 extendedDataTable

谁能告诉我哪里出错了，或者如何将所选行的一列的值传递给**另一个视图**并在新的扩展数据表中相应地显示结果。

请帮帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:36:59.473

像这样使用rich:menuItem....

```
<rich:menuItem submitMode="ajax" value="Show Particulars" action="#{payeeParticularsController.showParticular}"/> 
```

然后在控制器文件中放

```
public String showParticular()
{
   // operation
   return "details";
} 
```

然后在导航规则中将一条规则设置为 -

```
<navigation-rule>
    <from-view-id>/payeeSearch.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>details</from-outcome>
        <if>#{payeeParticularsController.selectedFolioNo != null}</if>
        <to-view-id>/payeeParticulars.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

它会让你将值从一个类传递给另一个类，并且`if`在满足条件之前不会加载新视图。

# ruby-on-rails - Spree Commerce：具有自己 SKU 的多种颜色

> ID：10492826
> 
> 赞同：0
> 
> 时间：2012-05-08T05:05:27.613
> 
> 标签：ruby-on-rails, e-commerce, spree

这是我需要的示例：

```
http://www.pruneshop.com/billeteras/fichero-de-cuero-p100602vg.html
http://demo.commerceguys.com/dc/catalog/coffee-holders/mug 
```

我需要什么：在每个帖子中，它都有多种颜色，每种颜色的图像代表，每种颜色都有自己的SKU。

在许多 Spree Commerce 示例中，我找不到任何做我需要的示例

这个例子建立在 Spree Commerce 之上。它看起来类似于我需要的：

```
http://onlinestore.thurley.com.au/products/velvet-maxi-dress-velvet-cinder 
```

但即使看起来很相似，“颜色”实际上是指向其他帖子的链接。从下拉列表中单击“黑色”时，它重定向到`http://onlinestore.thurley.com.au/products/velvet-maxi-dress-velvet-black`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:44:33.557

阿帕萨佳，

这应该使用 OptionValues 和 Variants 开箱即用地处理。设置“颜色”的选项类型、每种颜色的选项值以及任何相关颜色的变体。每个 Variant 都有一个 SKU 值。

# activemq - MQTT 与 MQ 设计注意事项

> ID：10492830
> 
> 赞同：6
> 
> 时间：2012-05-08T05:05:48.940
> 
> 标签：activemq, mq, mqtt

我这里没有具体的查询；只需要一些设计指南。

我在[Node.js、MQTT 和 Websockets](http://chemicaloliver.net/internet/node-js-mqtt-and-websockets/)上看到了这篇文章。我想我们可以使用 Node/Java + ActiveMQ + Websockets 来实现类似的目的。我的问题是如何在 MQ 和 MQTT 之间进行选择？与 ActiveMQ 相比，我可以在中大型项目中安全地使用像[mosquitto这样的“开放”服务器吗？](http://mosquitto.org/)

[这篇文章](https://www.ibm.com/developerworks/mydeveloperworks/blogs/aimsupport/entry/what_is_mqtt_and_how_does_it_work_with_websphere_mq?lang=en)有一些见解，看来我应该同时使用 MQ 和 MQTT，因为如果我将来获得轻量级客户端，MQTT 可能会有所帮助。

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:43:43.010

除了 Shashi 所说，它们具有不同的功能和用例。

MQTT 为 pub/sub 定义了一个标准的有线协议，正如 Shashi 所指出的，它是为非常轻量级的环境而设计的。因此，它具有非常小的线路格式、一些基本的服务质量和基本的功能集。

另一方面，传统的消息队列系统通常是专有的（尽管 AMQP 旨在改变这一点），涵盖点对点和发布/订阅，提供许多服务质量，并且往往具有更重量级的有线格式，尽管存在支持增强的功能集，例如回复寻址、协议转换等。

MQTT 的一个很好的例子是您在手机、平板电脑和机顶盒中拥有端点。这些具有最小的马力、内存和系统资源。通常来自这些的连接要么保持 MQTT 并且它们之间相互通信，要么它们被桥接到企业级 MQ，在那里它们可以与后端应用程序相互通信。例如，基于 MQTT 的聊天客户端可能会通过 MQTT 代理直接与另一个客户端对话。或者，基于 MQTT 的内容交付系统将桥接到企业消息传递网络，该网络托管广告和其他内容，以交付给在手机和平​​板电脑上运行的应用程序。

因此，MQTT 用于功耗、带宽和网络稳定性问题的嵌入式系统和最终用户设备。这通常与传统的 MQ 消息传递结合使用，尽管我从未见过将 MQTT 用作传统消息传递应用程序的专有传输。据推测，这是因为 MQTT 缺乏一些更强大的功能，例如 20 年来一直作为消息传递核心的消息关联、回复寻址和点对点寻址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T07:21:32.903

MQTT 协议适用于内存占用较小的小型设备，如传感器、手机等。这些设备通常位于脆弱的网络中，并且通常具有较低的计算能力。

这些设备通过 MQTT 协议连接到组织后端网络以发送和接收消息。例如，输油管道中的温度传感器会收集流经管道的油的温度并将其发送到控制中心。作为响应，可以通过 MQTT 将命令消息发送到另一个设备，以减少/停止通过该管道的油流。

WebSphere MQ 具有向/从 MQTT 设备发送/接收消息的能力。因此，如果您计划实施涉及设备和传感器的基于消息传递的解决方案，您可以考虑 MQ 和 MQTT。

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-03T09:44:11.010

正如已经讨论过的，[MQTT](http://www.ibm.com/developerworks/library/ws-mqtt/)定义了一个*适用的有线协议*（即，在传输之前如何组织信息并对其进行序列化）。Mosquitto，或其他任何 MQTT 代理，只是[Hub 和 Spoke 集成模式](http://www.eaipatterns.com/ramblings/03_hubandspoke.html)的实现，就像基于 JMS 和 AMQP 的代理一样，区别在于*传输级别的有线协议*：[AMQP](https://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CB4QFjAA&url=http%3A%2F%2Fwww.amqp.org%2Fsites%2Famqp.org%2Ffiles%2Famqp.pdf&ei=MJfQVIziJ43vat24gZAL&usg=AFQjCNFtE2USxzpCeke3G2hKYv1DLLiZkg&sig2=Q2JddPn0dvCXb0MNK2mMaw&cad=rjt)定义了标准化的传输有线协议，而不是 JMS 代理像 ActiveMQ 定义了自己的专有格式，即[OpenWire](http://activemq.apache.org/openwire.html). 当然，不是标准实现，如 Mosquitto，实现专有的有线传输协议（这会影响互操作性，但在性能方面可能是更好的选择）。

回到问题。像 Mosquitto 这样的代理可以根据您在可扩展性和可靠性方面的需求在实际场景中使用：通常需要集群来确保 i. 可用性，ii。可靠性和 iii。可扩展性。考虑 PAN（Private Area Netorks）的经纪人通常不提供 OTB（开箱即用）这样的功能 - ActiveMQ 提供了这一点。

最后，为您选择最佳解决方案取决于您的要求。

# c++ - 无法在 Visual Studio 中构建 QtMock

> ID：10492838
> 
> 赞同：0
> 
> 时间：2012-05-08T05:06:18.613
> 
> 标签：c++, qt, qnetworkaccessmanager, linker-errors

刚刚下载了[https://qt.gitorious.org/~niandong/qt/niandongs-qttools/commits/qtmock](https://qt.gitorious.org/~niandong/qt/niandongs-qttools/commits/qtmock)，因为我迫切需要模拟 QNetworkAccessManager。

我能够使用 Qt 4.7.4 在 QtCreator 2.3.1 中构建 qtmock.pro。所有测试都按预期运行，我非常兴奋！

然后我必须使用 Visual Studio 构建它才能使用我的项目的库及其所有依赖项。我在 Visual Studio 2010 pro 中使用 Qt 4.8。我导入了主要的 qtmock.pro，首先我尝试构建仅包含框架的底层 qtmock 项目（没有测试或任何东西）。它构建得很好，我得到了一个 .lib 和 .dll 文件。然后我尝试构建 qtnetworkstub.pro，其中 QNetwork 的所有模拟对象都是我的项目所需的。以下是我的构建命令行：

> /OUT:"......\lib\qtnetworkmock.dll" /NOLOGO /LIBPATH:"E:\QT\4.8.0\lib" /LIBPATH:"e:\QT\4.8.0\lib" / LIBPATH:"../../../lib" /DLL "../../../lib\qtmock.lib" "E:\QT\4.8.0\lib\QtTestd4.lib" "E :\QT\4.8.0\lib\QtCored4.lib""kernel32.lib""user32.lib""gdi32.lib""winspool.lib""comdlg32.lib""advapi32.lib""shell32.lib"" ole32.lib" "oleaut32.lib" "uuid.lib" "odbc32.lib" "odbccp32.lib" /MANIFEST /ManifestFile:"Win32\qtnetworkmock.dll.intermediate.manifest" /ALLOWISOLATION /MANIFESTUAC:"level='asInvoker ' uiAccess='false'" /DEBUG /PDB:"E:.Qt.UnitTest\qtmock\lib\qtnetworkmock.pdb" /PGD:"E:\src\Qt.UnitTest\qtmock\lib\qtnetworkmock.pgd" /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:QUEUE

我只使用 testLib 和 Core。

然后我收到以下链接错误：

```
Error 4 error LNK2019: unresolved external symbol "public: static struct QMetaObject const QAbstractSocket::staticMetaObject" (?staticMetaObject@QAbstractSocket@@2UQMetaObject@@B) referenced in function "public: __thiscall QNetworkRequest::~QNetworkRequest(void)" (??1QNetworkRequest@@QAE@XZ) E:\src\Qt.UnitTest\qtmock\test\stublib\network\qnetworkrequest.obj qtnetworkstub
Error 5 error LNK2001: unresolved external symbol "public: static struct QMetaObject const QTcpSocket::staticMetaObject" (?staticMetaObject@QTcpSocket@@2UQMetaObject@@B) E:\src\Qt.UnitTest\qtmock\test\stublib\network\qnetworkreply.obj qtnetworkstub
Error 6 error LNK2001: unresolved external symbol "public: static struct QMetaObject const QTcpSocket::staticMetaObject" (?staticMetaObject@QTcpSocket@@2UQMetaObject@@B) E:\src\Qt.UnitTest\qtmock\test\stublib\network\qnetworkrequest.obj qtnetworkstub
Error 7 error LNK2001: unresolved external symbol "public: static struct QMetaObject const QSslSocket::staticMetaObject" (?staticMetaObject@QSslSocket@@2UQMetaObject@@B) E:\src\Qt.UnitTest\qtmock\test\stublib\network\qnetworkreply.obj qtnetworkstub
Error 8 error LNK2001: unresolved external symbol "public: static struct QMetaObject const QSslSocket::staticMetaObject" (?staticMetaObject@QSslSocket@@2UQMetaObject@@B) E:\src\Qt.UnitTest\qtmock\test\stublib\network\qnetworkrequest.obj qtnetworkstub
Error 1 error LNK2001: unresolved external symbol "public: static struct QMetaObject const QAbstractSocket::staticMetaObject" (?staticMetaObject@QAbstractSocket@@2UQMetaObject@@B) E:\src\Qt.UnitTest\qtmock\test\stublib\network\qnetworkaccessmanager.obj qtnetworkstub
Error 2 error LNK2001: unresolved external symbol "public: static struct QMetaObject const QAbstractSocket::staticMetaObject" (?staticMetaObject@QAbstractSocket@@2UQMetaObject@@B) E:\src\Qt.UnitTest\qtmock\test\stublib\network\qnetworkproxy.obj qtnetworkstub
Error 3 error LNK2001: unresolved external symbol "public: static struct QMetaObject const QAbstractSocket::staticMetaObject" (?staticMetaObject@QAbstractSocket@@2UQMetaObject@@B) E:\src\Qt.UnitTest\qtmock\test\stublib\network\qnetworkreply.obj qtnetworkstub
Error 9 error LNK1120: 3 unresolved externals E:\src\Qt.UnitTest\qtmock\lib\\qtnetworkmock.dll qtnetworkstub 
```

我没有得到的是：我没有使用任何这些对象，并且在该项目的任何地方都没有引用它们。它们都继承自 QIODevice，但我不太确定这有多大帮助。

我非常卡住，我会很感激任何帮助，因为我真的很想使用这个框架（它对于单元测试来说似乎真的很棒！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:21:34.693

显然这是 QTMock 和 Qt 4.8 的问题，与 Visual Studio 无关。当前可用的 QtMock 版本不适用于 4.8（仅 4.7 并且可能更低），但很快就会修复。

# php - 如何重新索引多维数组的所有子数组元素？

> ID：10492839
> 
> 赞同：140
> 
> 时间：2012-05-08T05:06:21.930
> 
> 标签：php, multidimensional-array, reindex

问题是如何为数组重置密钥：

```
Array ( 
    [1_Name] => Array ( 
        [1] => leo 
        [4] => NULL 
    ) 
    [1_Phone] => Array ( 
        [1] => 12345 
        [4] => 434324
    )  
) 
```

重置为：

```
Array ( 
    [1_Name] => Array ( 
        [0] => leo 
        [1] => NULL 
    ) 
    [1_Phone] => Array ( 
        [0] => 12345 
        [1] => 434324
    ) 
) 
```

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2012-05-08T05:09:23.713

重置数组中所有数组的键：

```
$arr = array_map('array_values', $arr); 
```

如果您只想重置第一级数组键，请使用[`array_values()`](http://php.net/manual/en/function.array-values.php)不带[`array_map`](http://php.net/manual/en/function.array-map.php).

* * *

## 回答 #2

> 赞同：217
> 
> 时间：2012-05-08T05:11:31.450

```
$array[9] = 'Apple';
$array[12] = 'Orange';
$array[5] = 'Peach';

$array = array_values($array); 
```

通过此功能，您可以重置您的阵列

```
$array[0] = 'Apple';
$array[1] = 'Orange';
$array[2] = 'Peach'; 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-05-08T05:09:08.417

用于`array_values`重置密钥

```
foreach($input as &$val) {
   $val = array_values($val);
} 
```

[http://php.net/array_values](http://php.net/array_values)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-04-05T07:39:48.897

在这里，您可以看到[deceze](https://stackoverflow.com/users/476/deceze)提供的方式与简单`array_values`方法之间的区别：

数组：

```
$array['a'][0] = array('x' => 1, 'y' => 2, 'z' => 3);
$array['a'][5] = array('x' => 4, 'y' => 5, 'z' => 6);

$array['b'][1] = array('x' => 7, 'y' => 8, 'z' => 9);
$array['b'][7] = array('x' => 10, 'y' => 11, 'z' => 12); 
```

顺便说一下，这`deceze`是您的输出：

```
$array = array_map('array_values', $array);
print_r($array);

/* Output */

Array
(
    [a] => Array
        (
            [0] => Array
                (
                    [x] => 1
                    [y] => 2
                    [z] => 3
                )
            [1] => Array
                (
                    [x] => 4
                    [y] => 5
                    [z] => 6
                )
        )
    [b] => Array
        (
            [0] => Array
                (
                    [x] => 7
                    [y] => 8
                    [z] => 9
                )

            [1] => Array
                (
                    [x] => 10
                    [y] => 11
                    [z] => 12
                )
        )
) 
```

如果您只使用`array_values`函数，这是您的输出：

```
$array = array_values($array);
print_r($array);

/* Output */

Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [x] => 1
                    [y] => 2
                    [z] => 3
                )
            [5] => Array
                (
                    [x] => 4
                    [y] => 5
                    [z] => 6
                )
        )
    [1] => Array
        (
            [1] => Array
                (
                    [x] => 7
                    [y] => 8
                    [z] => 9
                )
            [7] => Array
                (
                    [x] => 10
                    [y] => 11
                    [z] => 12
                )
        )
) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-08-19T15:51:51.713

```
$result = ['5' => 'cherry', '7' => 'apple'];
array_multisort($result, SORT_ASC);
print_r($result); 
```

数组（ [0] => 苹果 [1] => 樱桃）

```
//...
array_multisort($result, SORT_DESC);
//... 
```

数组（ [0] => 樱桃 [1] => 苹果）

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2015-03-29T13:35:24.063

为此存在 PHP 本机函数。见[http://php.net/manual/en/function.reset.php](http://php.net/manual/en/function.reset.php)

只需这样做：`mixed reset ( array &$array )`

# uitableview - 从表视图推送到详细视图

> ID：10492843
> 
> 赞同：0
> 
> 时间：2012-05-08T05:06:34.027
> 
> 标签：uitableview, uiviewcontroller, pushviewcontroller

我正在开发一个从 csv 文件导入数据并显示在表格视图中的应用程序。我在表格视图中显示数据没有问题，但之后我希望能够显示在详细视图中显示的每一行的数据。我已经实现了以下代码，但是在运行应用程序时，它似乎没有响应 push 方法。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    CompanyDetailViewController *dvController = [[CompanyDetailViewController alloc] 
                                                 initWithNibName:@"ViewController" 
                                                 bundle: nil];

    [[self navigationController] pushViewController:dvController animated:YES];

    Company *p = (Company *)[self.importedRows objectAtIndex:indexPath.row];

    NSLog(@"You've selected %@ and the telephone number is %@ address %@", p.companyName, p.companyTelephone, p.companyAddress);
} 
```

如您所见，我还创建了 NSLog 来检查应用程序是否正在读取块，并且它似乎在日志面板中正确打印了数据。

我希望有人可以帮助考虑如何完成这项工作。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:17:45.130

仅尝试这行代码并检查它是否适合您。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     str=[arrayName objectAtindex:indexpath.row];

      ViewController *viewController = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
      [self.navigationController pushViewController:viewController animated:YES];

} 
```

在 .h 中全局分配 NSString *str 并在另一个视图中使用这个 str 拥有你想要的所有东西。

# android - ZipEntry 获取参数检查

> ID：10492846
> 
> 赞同：0
> 
> 时间：2012-05-08T05:06:51.157
> 
> 标签：android, if-statement, parameter-passing

为了通过 zip 条目检索项目，我在循环中使用此代码（ze 是 zipEntry）：

```
if (ze.getName().equals("poi/" + poi.id + "/pict.jpg")) {
  ...
} 
```

问题是，我在所需的文件夹中有 1-6 张照片（名称为 pict.jpg、pict2.jpg、pict3.jpg、...），我问你如何在上面的代码中写入一些参数，这可以解决我的问题. 是否可以写成**图片（此处仅接受数字 1-6）.jpg**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:28:32.207

尝试：

```
if (ze.getName().matches("(poi/" + poi.id + "/pict[0-6]{1}.jpg)")) {
  ...
} 
```

并确保您`poi.id`不包含正则表达式中使用的特殊字符。

# c++ - C++ 命名空间函数

> ID：10492847
> 
> 赞同：34
> 
> 时间：2012-05-08T05:07:13.450
> 
> 标签：c++, namespaces

我是一名 Java 开发人员，对 C++ 还很陌生。我需要实现某种实用程序类，并且我正在考虑将这些方法实现为静态的。但是，我遇到了这个关于命名空间函数与静态方法的[stackoverflow 问题，显然命名空间函数是首选方法。](https://stackoverflow.com/questions/1434937/namespace-functions-versus-static-methods-on-a-class)所以我想知道是否有任何关于如何实现命名空间功能的文章或示例。例如，我应该如何在头文件中声明命名空间函数？header 应该只包含类头文件等函数定义，并且实现应该在 cpp 文件中，还是应该直接在头文件中实现函数？

基本上，我正在尝试实现一个应用程序来解析包含一些命令的文本文件。所以我正在考虑实现静态辅助方法来处理文本处理。例如 readCommand(string line)。如果我的方向错误，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-08T05:23:45.733

> 我应该如何在头文件中声明命名空间函数？

```
namespace MON {
// extern:
t_ret func(const t_param& pValue);
// 'inline':
inline t_ret inline_func(const t_param& pValue) { ... }
} // << MON 
```

* * *

> header 应该只包含类头文件等函数定义，并且实现应该在 cpp 文件中，还是应该直接在头文件中实现函数？

这取决于您是否希望它们（可能）内联或导出。这通常归结为最小化依赖关系。

扩展导出或内联：

您通常倾向于使用 extern 函数来最小化 c++ 中的依赖关系。这相当于将定义与类方法中的声明分开：

**文件.hpp**

```
namespace MON {
// extern:
t_ret func(const t_param& pValue);
} // << MON 
```

**文件.cpp**

```
#include "hefty_stuff.hpp"

MON::t_ret MON::func(const t_param& pValue) { ... } 
```

但是，在某些情况下，定义可见有时很重要，通常是为了提高性能，或者当您知道大小很重要并且标题不包含在很多地方时。因此，该`inline`变体也是一种选择。

内联函数仍然可以导出，并且可以根据要求内联——但是，可以合并任何内联函数副本（具体来说，实现可以自由地假设所有定义都是相等的，并且函数的任何副本都是不必要的）。

使用导出的定义，您可以有选择地限制（或隔离）您的包含依赖项。也就是说，`#include "hefty_stuff.hpp"`不需要在标题中使用`file.hpp`.

* * *

> 基本上，我正在尝试实现一个应用程序来解析包含一些命令的文本文件。所以我正在考虑实现静态辅助方法来处理文本处理。

好吧，`static`这里应该避免。c++ 使用单一定义规则。`static`只会导致很多不必要的副本。此外，匿名命名空间是 c`static`函数的 c++ 方法：

```
namespace {
t_ret func(const t_param& pValue) { ... }
} // << anon 
```

注意：匿名命名空间也可能导致不必要的副本。您将它们用作静态函数的替代品的原因是您想要或需要偏离单一定义规则，并且不想在可能“解析”的范围内声明符号。

* * *

最后一点是关于`template<>`声明的。对于模板，定义必须在使用时可见，除非您的编译器支持外部模板。对于模板，您可以通过多种方式实现定义可见性。通常，人们会简单地在适当的位置声明定义，或者为定义添加一个标题，该标题包含在标题的末尾或根据需要。使用模板，不需要声明函数`inline`以避免多个定义错误。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-08T05:24:53.830

您可以在标头中声明函数：

```
namespace A {
    void foo();
} 
```

并在 .cpp 中实现：

```
namespace A {
  void foo() { std::cout << "foo!"; }
} 
```

您还可以将实现放在标头中，确保声明它`inline`以避免违反[一个定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)：

```
namespace A {
    inline void foo() { std::cout << "foo()!"; }
} 
```

请注意，将实现放在标头中意味着客户端代码对实现以及用于实现的标头具有编译依赖性。在上面的例子中，客户端代码现在依赖于头部，如果我们做一些琐碎的事情，比如在打印输出中添加一个感叹号，我们需要重新编译，而不是重新链接，所有客户端代码。

将模板函数的实现放在头文件或头文件包含的文件中非常重要，这些不能放在 .cpp 中：

```
namespace B {
  template <class T>
  inline void foo(const T& t) { std::cout << t.name() << "\n"; }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T05:17:00.803

*我应该如何在头文件中声明命名空间函数？*

```
namespace YourNamespace
{
    void fun1();
    void fun2();
} 
```

*header 应该只包含类头文件等函数定义，并且实现应该在 cpp 文件中，还是应该直接在头文件中实现函数？*

如果命名空间中的函数是静态的，则可以在头文件中实现函数，或者必须在 cpp 文件中实现。

# scala - 如何将 SBT 类附加到 Intellij Idea？

> ID：10492848
> 
> 赞同：3
> 
> 时间：2012-05-08T05:07:25.570
> 
> 标签：scala, intellij-idea, sbt, sbt-idea

我可能有一个愚蠢的问题。我想在 IntelliJ Idea 中编写 SBT 构建脚本（Build.scala），但 IDE 无法识别 SBT 类（构建、项目等）。我将 sbt-launch.jar 附加到项目中，但它没有改变任何东西，因为 sbt-launch.jar 不包含这些类。我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:59:17.297

使用[sbt-idea 插件](https://github.com/mpeltonen/sbt-idea)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:32:20.847

您需要附加的是下载的 SBT 库，而不是 sbt 启动器。SBT 启动器 jar 将 SBT 和 Scala 下载到不同的目录中。

我还建议使用 sbt-idea 插件，而不是尝试自己设置项目。但是如果你仍然想自己做，那么将以下 jar 文件添加到你的 intellij 模块中：

```
<启动目录>/scala-2.9.1/org.scala-tools.sbt/sbt/0.11.2/*.jar
<引导目录>/scala-2.9.1/lib/*.jar

```

引导目录因您安装 sbt 的方式而异。如果您从 yum 或其他标准方式安装，您的引导目录将是 ~/.sbt/boot。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T11:17:43.930

好的，在安装了 ZSH 的 Linux 系统上，我一直在使用以下内容来阐明类文件的位置.... 讨厌，但总比没有好

```
zsh

setopt extendedglob

for i ( /home/work/.sbt/boot/scala-2.9.2/org.scala-sbt/sbt/0.12.0/*(.) ); do for j ( $(zipinfo -1 $i) ) ; do echo $i $j ; done ; done | grep Task 
```

使用上述内容，我发现 Task 定义在：

```
/home/work/.sbt/boot/scala-2.9.2/org.scala-sbt/sbt/0.12.0/task-system-0.12.0.jar 
```

我想我们将需要为永远引用的类执行此操作。

# java - 如何从 .getProperty('style") 中获取价值

> ID：10492854
> 
> 赞同：0
> 
> 时间：2012-05-08T05:08:06.583
> 
> 标签：java, rft

`.getProperty("style")`输出`TestObject(Ref:RemoteProxyReference{testContext:af4e390002a336, objectId:3171, testObjectClass:TestObject})`

while`to[0].getProperties()`输出显示关键“样式”的文本哈希`{... , style=DISPLAY: none, oncontrolselect=null Object, rowSpan=1, .....}`

**如何获得具有关键样式的属性的价值？**

这是我的代码示例...

```
TestObject[] to=null;
RegularExpression findRegExp1 = new RegularExpression(find_arguments[1], false) ;
RootTestObject root = getRootTestObject();
to = root.find(atDescendant(find_arguments[0],findRegExp1),false);

System.out.println(to[0].getProperty("style"));
System.out.println( to[0].getProperties()); 
```

这两种方法都是标准的 RFT 方法。[IBM Rational Functional Tester API 参考](http://publib.boulder.ibm.com/infocenter/rfthelp/v7r0m0/index.jsp?topic=/com.rational.test.ft.api.help/ApiReference/com/rational/test/ft/object/interfaces/RootTestObject.html)中的更多信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:22:02.300

```
System.out.println(to[0].getProperty("style")); 
```

这调用`toString()`的值`to[0].getProperty()`。可能返回的对象`getProperty()`具有检索各种属性（例如文本值）的方法，但会生成您看到的简单`toString()`.

您将不得不在 RFT 文档中对此进行研究，以确定哪种方法可以提供您想要的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:25:40.223

我认为“stlye”是一个非价值属性。正如文档所述：http: [//publib.boulder.ibm.com/infocenter/rfthelp/v7r0m0/index.jsp ?topic=/com.rational.test.ft.api.help/ApiReference/com/rational/test/英尺/对象/接口/TestObject.html](http://publib.boulder.ibm.com/infocenter/rfthelp/v7r0m0/index.jsp?topic=/com.rational.test.ft.api.help/ApiReference/com/rational/test/ft/object/interfaces/TestObject.html)

> 您可以通过调用 getNonValueProperties() 找到非值属性。您可以使用 getProperty 方法来访问值和非值属性。*如果您访问非值属性，则该属性会返回一个 TestObject，其中包含对被测软件中（非值）对象的引用*。

您**无法**访问该属性的内容。

打开测试对象检查器并查看“样式”是否在非值属性面板中![测试对象检查器中的非值属性](../Images/7e29fdbe0120d78071894e12b5438a48.png)

我只是在页面上尝试使用 IE6，但无法读取“样式”属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T22:43:13.607

我在 IBM 支持下开了一张票，这是最终的答案：

“*我已经在你的网站上进行了测试，并确认了 getProperty("style") 输出。这是一个错误，已在 RFT8.2.1.1 中修复。我确认 RFT 8.2.1.1 中的 getProperty 方法运行良好。* “

# c++ - 以代数方式简化平方根

> ID：10492855
> 
> 赞同：8
> 
> 时间：2012-05-08T05:08:16.663
> 
> 标签：c++, c, algorithm, square-root

我想以代数方式简化整数的平方根，而不是用数值计算它，即**√800**应该是**20√2**，而不是**28.2842712474619**。

我找不到通过编程解决这个问题的任何方法:(

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-08T05:11:59.137

分解根下的数字，挑选出成对出现的因子，其余的留在根下。

√800 = √(2 x 2 x 2 x 2 x 5 x 2 x 5) = √(2 ² x 2 ² x 5 ² x 2) = (2 x 2 x 5)√2 = 20√2。

为了完整起见，这里有一些简单的代码：

```
outside_root = 1
inside_root = 800
d = 2
while (d * d <= inside_root):
  if (inside_root % (d * d) == 0): # inside_root evenly divisible by d * d
    inside_root = inside_root / (d * d)
    outside_root = outside_root * d
  else:
    d = d + 1 
```

当算法终止时，outside_root 和 inside_root 包含答案。

这里以 800 运行：

```
 inside   outside   d
    800         1   2 # values at beginning of 'while (...)'
    200         2   2
     50         4   2
     50         4   3
     50         4   4
     50         4   5
      2        20   5 # d*d > 2 so algorithm terminates
     ==        == 
```

答案 20√2 在最后一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:50:55.757

```
#include<stdio.h>
#include<conio.h>
int main() {
    int i, n, n2, last, final;
    last = 0, final = 1;
    printf("Enter number to calculate root: ");
    scanf("%d", & n);
    n2 = n;
    for (i = 2; i <= n; ++i) {
        if (n % i == 0) {
            if (i == last) {
                final = final * last;
                last = 0;
            } else {
                last = i;
            }
            n /= i;
            i--;
        }
    }
    n = n2 / (final * final);
    printf("\nRoot: (%d)^2 * %d", final, n);
    getch();
    return 0;
} 
```

# playframework - 在 Playframework 2.0 中发送电子邮件

> ID：10492858
> 
> 赞同：22
> 
> 时间：2012-05-08T05:08:19.287
> 
> 标签：playframework, playframework-2.0

在 Playframework 2.0 中，发送电子邮件似乎不像在 Play 1.x中那样简单（参见[在 Play Framework 中使用 sendmail 作为 SMTP 服务器的评论）。](https://stackoverflow.com/questions/8890616/using-sendmail-as-smtp-server-in-play-framework/8890858#comment13560881_8890858)没有开箱即用的邮件功能......那么，我如何发送电子邮件？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-08T05:12:06.733

Playframework 2.x 需要一个插件才能使 Mail 工作。它没有被添加到核心，因为开发人员觉得让电子邮件工作很简单，所以决定最好创建一个插件。然而，谷歌群组上的一连串消息表明他们弄错了......人们期望与 Play 1.x 具有相同的功能。

正如您对社区所期望的那样，一个插件很快就建立起来了。请参阅[https://github.com/playframework/play-mailer](https://github.com/playframework/play-mailer)。

还会有更多插件需要注意，但这是核心开发人员支持的类型安全，所以我希望它是最好的维护。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-18T14:08:05.430

公认的答案是 Play 需要一个插件来发送电子邮件。这是错误的。您可以轻松地为您的 Play 应用程序调整任何 JVM 邮件库。这是一个使用 Apache Commons Email 的示例，为了简单起见，[这里](https://gist.github.com/mariussoutier/3436111)和我们自己的生产代码进行了调整。

```
import org.apache.commons.mail._
import scala.util.Try

private val emailHost = Play.configuration.getString("email.host").get

/**
 *  Sends an email
 *  @return Whether sending the email was a success
 */
def sendMail(from: (String, String), // (email -> name)
             to: Seq[String],
             cc: Seq[String] = Seq.empty,
             bcc: Seq[String] = Seq.empty,
             subject: String,
             message: String,
             richMessage: Option[String] = None,
             attachment: Option[java.io.File] = None) = {

  val commonsMail: Email = if(mail.attachment.isDefined) {
      val attachment = new EmailAttachment()
      attachment.setPath(mail.attachment.get.getAbsolutePath)
      attachment.setDisposition(EmailAttachment.ATTACHMENT)
      attachment.setName("screenshot.png")
      new MultiPartEmail().attach(attachment).setMsg(mail.message)
    } else if(mail.richMessage.isDefined) {
      new HtmlEmail().setHtmlMsg(mail.richMessage.get).setTextMsg(mail.message)
    } else {
      new SimpleEmail().setMsg(mail.message)
    }
  }

  commonsMail.setHostName(emailHost)

  to.foreach(commonsMail.addTo(_))
  cc.foreach(commonsMail.addCc(_))
  bcc.foreach(commonsMail.addBcc(_))

  val preparedMail = commonsMail.
    setFrom(mail.from._2, mail.from._1).
    setSubject(mail.subject)

  // Send the email and check for exceptions
  Try(preparedMail.send).isSuccess
}

def sendMailAsync(...) = Future(sendMail(...)) 
```

鉴于在 Play 中发送电子邮件是如此简单，我很惊讶插件竟然被推荐了。如果您想升级 Play 版本，依赖插件可能会对您造成伤害，而且我不觉得需要 30 LoC 来完成自己的事情是值得的。我们的代码在从 Play 2.0 到 2.1 到 2.2 的未经修改的情况下工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T14:19:02.690

我很快就破解了支持附件的插件，因为到目前为止提到的@Codemwnci 没有它。[你可以检查一下](https://github.com/mcveat/mail-plugin)。

# vb6 - Exchange 2010 和根文件夹

> ID：10492859
> 
> 赞同：0
> 
> 时间：2012-05-08T05:08:19.563
> 
> 标签：vb6, exchange-server, mapi, exchange-server-2010, exchange-server-2003

在 Exchange 2003 上，我可以运行以下代码。

使用 VB6 和 MAPI CDO 1.2.1

```
Private Sub Command1_Click()
    Dim objSession As MAPI.Session
    Set objSession = CreateObject("MAPI.Session")
    strProfileInfo = myExcServer & vbLf & myExcAlias
    objSession.Logon ProfileInfo:=strProfileInfo
    For Each nfo In objSession.InfoStores
        Text1.Text = Text1.Text & "nfo.Name: " & nfo.Name & vbNewLine
        Text1.Text = Text1.Text & "nfo.RootFolder.Name: " & nfo.RootFolder.Name & vbNewLine
    Next
    Set objMessage = Nothing
    Set objInbox = Nothing
    objSession.Logoff
    Set objSession = Nothing
End Sub 
```

我得到：

```
nfo.Name: Public Folders
nfo.RootFolder.Name: IPM_SUBTREE
nfo.Name: Mailbox - pperez pperez
nfo.RootFolder.Name: Top of Information Store 
```

但是，我尝试在 Exchange 2010 上运行它，但出现错误，

```
nfo.Name: Public Folders
Run-time error '-2147221219 (8004011D)':
[Collaboration Data Objects - [MAPI_E_FAILONEPROVIDER(8004011D)]] 
```

仅在对根文件夹 nfo.RootFolder.Name 的引用中引发异常。

2010 不支持此属性吗？

欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:27:55.410

你确定你的 Exchange 2010 实际上有 PF 存储吗？在遍历存储之前先尝试访问默认存储（例如读取收件箱文件夹名称）——这将导致 CDO 1.21 访问服务器并意识到没有 PF 存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:12:11.720

@Dmitry Streblechenko 是对的，我刚刚添加了 PF 并且它起作用了。

```
New-PublicFolderDatabase "Public Folders" -Server $MyServer
Mount-Database "Public Folders" 
```

# google-maps - 如何根据 XML 坐标数据在 Google 地图上添加多个标记？

> ID：10492860
> 
> 赞同：0
> 
> 时间：2012-05-08T05:08:22.190
> 
> 标签：google-maps, xml-parsing, google-maps-markers

我有这些 XML 格式的数据：

```
<DOCUMENT>
    <IDS>53850_WP</IDS>
    <FULL_NAME>Maybank</FULL_NAME>
    <AD_WEIGHT>60</AD_WEIGHT>
    <MAP>200:37.3321363,-122.0278287</MAP>
    <PHONE>00-2222 3466</PHONE>
    <CLASS_DESC>Banks</CLASS_DESC>
</DOCUMENT>

<DOCUMENT>
    <IDS>53850_WP</IDS>
    <FULL_NAME>Maybank</FULL_NAME>
    <AD_WEIGHT>60</AD_WEIGHT>
    <MAP>200:37.3321363,-122.0278287</MAP>
    <PHONE>00-2222 3466</PHONE>
    <CLASS_DESC>Banks</CLASS_DESC>
</DOCUMENT>

<DOCUMENT>
    <IDS>53850_WP</IDS>
    <FULL_NAME>Maybank</FULL_NAME>
    <AD_WEIGHT>60</AD_WEIGHT>
    <MAP>200:37.3321363,-122.0278287</MAP>
    <PHONE>00-2222 3466</PHONE>
    <CLASS_DESC>Banks</CLASS_DESC>
</DOCUMENT> 
```

如何将`<MAP>`值拆分为 lat 和 long？`<MAP>`节点是一个坐标。而且，如何在谷歌地图中标记这些位置？我正在使用 JSP。我不知道如何在地图上添加多个标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:52:33.233

要了解有关在 JavaScript 中解析 XML 的更多信息，您可以在 stackoverflow 上查看此答案：[https](https://stackoverflow.com/a/8412989/1314132) ://stackoverflow.com/a/8412989/1314132 。

要了解有关在地图上放置`google.maps.Marker`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#Marker)的更多信息，请查看开发人员指南的[**标记**部分](https://developers.google.com/maps/documentation/javascript/overlays#Markers)。

# solr - Solr 查询总是返回前 10 行

> ID：10492863
> 
> 赞同：4
> 
> 时间：2012-05-08T05:08:46.307
> 
> 标签：solr, lucene.net, solrnet

我在我的一个 .net 应用程序中实现了 Solr 搜索。一切正常，除了每当我尝试使用 Solr 的搜索功能时，它只返回 10 个结果，而我有超过 100 个文档索引。谁能告诉我如何解决这个问题？

一些证明的例子是：

> [http://117.55.242.204:8983/solr/select/?q=](http://117.55.242.204:8983/solr/select/?q=) *:* &start=0&rows=10

返回 10 行。

> [http://117.55.242.204:8983/solr/select/?q=](http://117.55.242.204:8983/solr/select/?q=) *。*&start=20&rows=30

返回 0 行但显示`numFound`10。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:24:15.653

您必须在这里注意两个变量：`start`和`rows`.

在第一种情况下，它只返回 10 个文档，因为`rows`它是 10。在第二种情况下，它试图返回文档 21 到 30（`start`是 20 和`rows`10），但是只有 10 个匹配的文档，所以它返回零。

如果您希望返回所有文档，请设置`rows`为较高的值，例如 1000 或 10000 或索引中的文档数。如果您不分页，请确保`start`设置为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T12:50:34.537

正如@Ansari 在他的回答中所说，您需要将`start`and`rows`参数传递给 Solr 查询。为了方便使用 SolrNet 客户端，您需要在应用程序中将这些设置为查询选项。这是SolrNet[查询文档的分页部分的示例代码。](http://code.google.com/p/solrnet/wiki/Querying)

```
 ISolrOperations<Product> solr = ...
 solr.Query("somequery", new QueryOptions{
   Start = 10,
   Rows = 25
 }); 
```

所以在这个例子中，我们假设将找到超过 35 个结果，并声明从第 10 个项目开始并返回 25 个项目。因此，这将返回查询中找到的总项目中的第 10-35 项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T21:28:51.817

我同意安萨里的回答，但我有一条评论。您不能简单地将行设置为一些非常高的数字，因为分页是使用 solr 的一种自然而直观的方式。

如果这是一个性能敏感的操作，甚至是逻辑操作，那么将有一个简单的方法来返回所有文档。事实上不存在这样的事情，这意味着短迭代分页而不是返回大型数据集是要走的路。

# python - 如何用 Python 执行 leet？

> ID：10492869
> 
> 赞同：-3
> 
> 时间：2012-05-08T05:09:22.657
> 
> 标签：python, string

我有一个文本文件中的单词列表，我想对每个单词执行 leet。例如，如果我有“Hello”这个词，这将变为“5E11O”。换句话说，程序应该能够自动替换单词中的每个字母。

请问这可能吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:19:15.477

这是进行一系列一对一替换的一种方法。请注意在逐字母转换之前如何应用“整个单词”转换。

```
replacements = ( ('hacker','haxor'), ('elite','eleet'), ('a','4'), ('e','3'),
                 ('l','1'), ('o','0'), ('t','+') )
my_string = "I am an elite hacker."
new_string = my_string
for old, new in replacements:
    new_string = new_string.replace(old, new)

print ( new_string ) 
```

给出：

```
I 4m 4n 3133+ h4x0r. 
```

一个有趣的扩展是允许对某些替换进行多种选择。例如，字符`l`可以呈现为数字`1`或管道符号`|`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T05:55:26.190

这完全取决于您如何定义 leet。

如果是简单的对每个字符进行1:1的翻译，比如`H->5, e->E, l->1, l->1, o->0`为了翻译`Hello`->`5E11O`就不难了。使用[string.maketrans](http://docs.python.org/library/string.html#string.maketrans)来定义这个字符到字符的转换。

更困难的是，如果您希望支持更完整的 leet[正字法](http://en.wikipedia.org/wiki/Leet#Orthography)，例如`hacker-lingo`-->`l33tsp33k`这也涉及缩短字符数。

周围有各种各样的 leet 源代码工作。试一试。看看鞋子合不合适。我认为 leet 还没有通过 ISO 标准化... ;-}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-11T15:05:44.450

此代码有助于：

```
import random

try:
    import pyperclip  #  check for util that copies text to clipboard.
except ImportError:
    pass

def main():
    print("***** L3375P34]k 63n3r470R *****")
    print("Enter your message:")
    english = input("> ")
    print()
    leetspeak = english_to_leetspeak(english)
    print(leetspeak)

    try:
        pyperclip.copy(leetspeak)
        print("(Copied leetspeak to clipboard.)")
    except NameError:
        pass

def english_to_leetspeak(message):
    """Convert english string to leetspeak"""
    char_map = {
        "a": ["4", "@", "/-\\", "^"],
        "b": ["I3", "8", "13", "|3"],
        "c": ["[", "{", "<", "("],
        "d": [")", "|)", "[)", "|>"],
        "e": ["3", "[-"],
        "f": ["|=", "ph", "|#", "/="],
        "g": ["&", "6", "(_+]", "9", "C-", "gee"],
        "h": ["#", "/-/", "[-]", "]-[", ")-(", "(-)", ":-:", "|-|", "}{"],
        "i": ["1", "[]", "!", "|", "eye", "3y3", "]["],
        "j": [",_|", "_|", "._|", "._]", ",_]", "]"],
        "k": [">|", "|<", "/<", "1<", "|c", "|(", "|{"],
        "l": ["1", "7", "|_", "|"],
        "m": ["/\\/\\", "/V\\", "JVI", "[V]", "[]V[]", "|\\/|", "^^"],
        "n": ["^/", "|\\|", "/\\/", "[\]", "<\\>", "{\\}", "|V", "/V"],
        "o": ["0", "Q", "()", "oh", "[]"],
        "p": ["|*", "|o", "?", "|^", "[]D"],
        "q": ["(_,)", "()_", "2", "O_"],
        "r": ["12", "|`", "|~", "|?", "/2", "|^", "Iz", "|9"],
        "s": ["$", "5", "z", "ehs", "es"],
        "t": ["7", "+", "-|-", "']['", '"|"', "~|~"],
        "u": ["|_|", "(_)", "V", "L|"],
        "v": ["\\/", "|/", "\\|"],
        "w": ["\\/\\/", "VV", "\\N", "'//", "\\\\'", "\\^/", "\\X/"],
        "x": ["><", ">|<", "}{", "ecks"],
        "y": ["j", "`/", "\\|/", "\\//"],
        "z": ["2", "7_", "-/_", "%", ">_", "~/_", "-\_", "-|_"],
    }
    leetspeak = ""
    for char in message:
        if char.lower() in char_map and random.random() <= 0.70:  # 70% convert
            possible_replacements = char_map[char.lower()]
            leet_replacement = random.choice(possible_replacements)
            leetspeak = leetspeak + leet_replacement
        else:
            leetspeak = leetspeak + char
    return leetspeak

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-20T23:00:28.363

我想最简单的是制作一个字符集，然后转换它

```
from utilitybelt import change_charset 

origspace = "abcdefghijklmnopqrstuvwxyz"
keyspace  = "abcd3fgh1jklmnopqr57uvwxyz"

print(change_charset("leetspeak",origspace, keyspace))

#l3375p3ak 
```

# iphone - 阻止动画延迟在 OS 4.3 上工作正常，但在 5.0 上不行

> ID：10492879
> 
> 赞同：1
> 
> 时间：2012-05-08T05:10:20.343
> 
> 标签：iphone, objective-c, ios, ipad

好的，所以我选择使用块动画为我的标签设置动画。

逻辑很简单，我有一个由按钮组成的图表栏，当按下按钮时，它会创建一个没有宽度的标签，然后以同样的方法，动画开始拉长标签，以便标签内的文字出来了，然后在短暂的 2.5 秒延迟后，标签再次收缩并从 superview 中删除。

问题是 ：

*   **延迟在 OS 4.3 中正常工作**。动画按预期工作，它显示标签，在 2.5 之后它触发下一个动画并关闭标签。

*   **OS 5.0 中忽略了延迟**。第一个动画完成后，它没有等待延迟，而是立即触发下一个动画块。

这是我关于动画的一些代码：

```
UILabel *lbl = [self createLabelWithText:numString frame:CGRectMake(touchPoint.x, touchPoint.y, 0, 10) bold:YES font:@"Helvetica" fontSize:10 color:[UIColor whiteColor] textAlignment:UITextAlignmentLeft andTag:987];
    [lbl setBackgroundColor:[UIColor blackColor]];
    [lbl setAlpha:0.5];
    [self.view addSubview:lbl];

    [UIView animateWithDuration:0.3 animations:^
     {
         [lbl setFrame:lblRect];
     }completion:^(BOOL finished) 
     {
        [UIView animateWithDuration:0.2 delay:2.5 options:UIViewAnimationOptionCurveEaseInOut animations:^
         {//here the second animation delay run properly on 4.3 , but ignored at 5.0
             [lbl setFrame:CGRectMake(touchPoint.x, touchPoint.y, 0, 10)];
         }completion:^(BOOL finished) {
             [lbl removeFromSuperview];
         }];
     }]; 
```

在此先感谢您的帮助！

编辑：如果你们中的任何人想知道为什么这个人没有在谷歌或其他 stackoverflow 问题上搜索，事实上，我做到了，遗憾的是，我发现的所有帖子都没有为我提供我需要的答案。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:25:50.233

好的，我找到了问题所在。这不完全是块动画的错，而是发生的错误，因为我将动画设置为将我的 uilabel 缩小到宽度“0”。结果在 IOS 5.0 中（至少在我的项目中），因为我通过使用约束设置标签大小，当我尝试缩小标签时，一旦它读取标签不足以显示整个文本，它会立即终止它自己的标签。

# silverlight - 检查服务器中是否存在文件夹（Silverlight）

> ID：10492880
> 
> 赞同：1
> 
> 时间：2012-05-08T05:10:30.443
> 
> 标签：silverlight, silverlight-4.0

我正在做一个 sivleright 4 应用程序。

我想通过单击按钮检查**服务器上是否存在特定文件夹。**

如果不创建它。

如何才能做到这一点？

```
private void btn_checkfolder_Click(object sender, RoutedEventArgs e)
    { // code to check if directory exist on server} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:04:42.300

Silverlight 是一种客户端技术，因此不了解服务器端资源。由于您的托管环境是 IIS，并且我假设您想确定物理路径的存在，因此认为您最好的办法是制作一个启用 Silverlight 的 Web 服务，该服务将公开一个检查所需路径是否存在的函数，然后在您的 Silverlight 应用程序中使用它.

# jquery - Jquery 动画不会同时运行

> ID：10492881
> 
> 赞同：0
> 
> 时间：2012-05-08T05:10:33.580
> 
> 标签：jquery, animation

我一直试图弄清楚如何让下面脚本中的所有三个动画在单击元素时同时动画。当前一个元素运行，然后另一个元素在完成后运行。不确定问题是什么，因为我已经尝试了许多类似帖子的建议解决方案并且没有运气。

```
 $(document).ready(function() {

    var $dropDownWrapper = $( '#dropdown-wrapper' );

    $("#clickme").click(function() {

        var wrapperHeight = $dropDownWrapper.css("height");

        if( wrapperHeight == '3px') {

          $('#clickme').animate({"margin-top": "200px"}, 400, 'swing');

            $('#arrow').css('backgroundPosition', '0 3px');

          $dropDownWrapper.animate({"height": "200px"}, 400);

        }

        else {

          $('#clickme').animate({"margin-top": "3px"}, 400, 'swing');

          $dropDownWrapper.animate( {"height": "3px"}, 400, 'swing');

          $('#arrow').css('backgroundPosition', '0 -10px');

        }
    });
 }); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:30:54.593

```
 if( wrapperHeight == '3px') {

          $('#clickme').animate({
               "margin-top": "200px"
          },{ duration: 400, queue: false, easing: "swing"});

          $dropDownWrapper.animate({
              "height": "200px"
          },{ duration: 400, queue: false, easing: "swing"  });

          $('#arrow').css('backgroundPosition', '0 3px');

        } else {

          $('#clickme').animate({
              "margin-top": "3px"
          }, { duration: 400, queue: false, easing: "swing"  });

          $dropDownWrapper.animate({
             "height": "3px"
          }, { duration: 400, queue: false, easing: "swing" });

          $('#arrow').css('backgroundPosition', '0 -10px');

        } 
```

***[检查此演示](http://jsfiddle.net/pFSdM/1/)***

# visual-c++ - 鼠标与菜单分隔符的交互

> ID：10492884
> 
> 赞同：0
> 
> 时间：2012-05-08T05:10:42.443
> 
> 标签：visual-c++, mfc

将鼠标滚动到菜单分隔符上时会引发哪个事件？如何识别菜单中的分隔符位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:08:32.507

你必须更精确。您能否解释一下您的意思： *如何识别菜单中的分隔符位置？*

如果您的应用程序是 MFC，则不会引发任何事件。MFC 封装了 windows 的 API。Windows 是消息驱动系统，而不是事件驱动系统，因此窗口正在接收有关鼠标移动的消息。菜单分隔符不是菜单项，因此单击分隔符时不会收到任何消息。

# javafx - 如何在 JavaFX 中同时创建两个窗口？

> ID：10492886
> 
> 赞同：6
> 
> 时间：2012-05-08T05:10:47.677
> 
> 标签：javafx, javafx-2

我试过这个[JavaFX 2.0 子窗口](https://stackoverflow.com/questions/9997851/javafx-2-0-subwindow) ，但问题是，只有一个 Stage 可以重绘（刷新），另一个刚刚冻结，如果你在那个舞台上放一些按钮，你会发现按钮没有显示“结束”和“按”图片，如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T06:39:01.313

您是否在“JavaFX 应用程序线程”上创建了新阶段？

接下来试试：

```
 javafx.application.Platform.runLater(new Runnable() {

        @Override
        public void run() {
            Stage stage = new Stage();
            stage.setScene(new Scene(new Group(new Button("my second window"))));
            stage.show();
        }
    }); 
```

所有 FX UI 操作都应在“JavaFX 应用程序线程”上执行，请参阅[http://docs.oracle.com/javafx/2/architecture/jfxpub-architecture.htm#sthref8](http://docs.oracle.com/javafx/2/architecture/jfxpub-architecture.htm#sthref8)

# jquery - jQuery：一个特殊的参数

> ID：10492887
> 
> 赞同：1
> 
> 时间：2012-05-08T05:10:58.230
> 
> 标签：jquery, arguments

我知道什么时候我想传递一个属性作为我可以使用的参数，`[x]`但是否可以传递

**一个由两个属性和一个`:`介于两者之间**的参数？

```
function boson(w,z){
   $(w).stop().animate({
        z
    },{
        duration:2000
    })

}

    boson(".class","Left:'100%'") 
```

当我离开`z`时，我得到一个语法错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:14:19.213

为什么不只传递整个对象？

```
function boson(w,z){
   var defaultProps = {duration:2000};
   var props = $.extend(defaultProps, z);
   $(w).stop().animate(props);
}

boson(".class", {left:'100%'}); 
```

[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

这样，如果您决定稍后添加多个属性，则更容易，而无需更改整个功能:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:16:16.130

您将什么格式传递给 animatie()？在 {} 中传递给动画的格式总是像 {name:value}。而“Left:100%”只是一个字符串。这意味着您只是将一个值传递给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:17:15.360

您需要将第二个参数作为对象传递，而不是像您在那里那样的字符串。

`boson( ".class", { "Left" : "100%" } )`

# r - getKMLcoordinates 返回列表列表而不是段列表

> ID：10492896
> 
> 赞同：2
> 
> 时间：2012-05-08T05:12:10.863
> 
> 标签：r, gps, kml

我曾经通过在 R 中绘制 kml 坐标并在顶部覆盖物种丰度数据来制作一张很酷的地图。当我第一次编写代码时，我使用以下代码来调用我的坐标列表：
`spa<-getKMLcoordinates('Perimeter_Track.kml', ignoreAltitude=TRUE)`

`summary(spa)`返回：

```
 Length Class  Mode   
[1,] 128 -none- numeric

[2,] 242 -none- numeric

[3,] 34 -none- numeric

[4,] 126 -none- numeric 
```

（GPS 坐标是以 4 个块测量的周边轨道，因此每个列表都是这些块之一）： 现在，当我再次运行代码时，`summary(spa)`返回：

```
 Length Class  Mode
[1,] 2      -none- list
[2,] 2      -none- list
[3,] 2      -none- list
[4,] 2      -none- list 
```

如果我使用 将 spa 转换为数据帧`as.data.frame()`，当我尝试使用`rbind`将 4 个块连接成一个大轨道时，我仍然会收到此错误：

```
Error in match.names(clabs, names(xi)) : 
  names do not match previous names 
```

R 似乎没有读取 kml 文件，或者只读取其中的一部分。

列表（或数据框）spa 是

```
 c..157.80736808..21.4323436..20.324951171875.
1                                    -157.80737
2                                      21.43234
3                                      20.32495
  c..157.80738216..21.43231443..19.36376953125.
1                                    -157.80738
2                                      21.43231
3                                      19.36377
  c..157.80533605..21.43536092..15.9990234375\. c..157.8053208..21.43541138..15.9990234375.
1                                   -157.80534                                  -157.80532
2                                     21.43536                                    21.43541
3                                     15.99902                                    15.99902
  c..157.80998348..21.43706806..15.9990234375.
1                                   -157.80998
2                                     21.43707
3                                     15.99902
  c..157.80997007..21.43711106..17.441162109375.
1                                     -157.80997
2                                       21.43711
3                                       17.44116
  c..157.81074733..21.43717535..13.5958251953125.
1                                      -157.81075
2                                        21.43718
3                                        13.59583
  c..157.81071673..21.43718331..14.076416015625.
1                                     -157.81072
2                                       21.43718
3                                       14.07642 
```

这是 maptools 或我的代码的错误吗？据我所知，这是将 kml 坐标转换为 R 可以使用的坐标的最简单方法。您的帮助将不胜感激。

该文件的链接在这里：[https ://www.dropbox.com/s/y8elanjnst6438v/Perimeter_Track.kml](https://www.dropbox.com/s/y8elanjnst6438v/Perimeter_Track.kml)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T08:21:32.063

该修复已提交给 R-forge，maptools 项目，修订版 232。请在今晚欧洲时间之后尝试：

```
install.packages("maptools", repos="http://R-Forge.R-project.org") 
```

处理这个问题。但是，我不知道你为什么不使用：

```
library(rgdal)
ogrListLayers(dsn="Perimeter_Track.kml") # to find the layer name
spa1 <- readOGR(dsn="Perimeter_Track.kml", layer="Perimeter_Track.kml")
summary(spa1) 
```

这是一个 SpatialLinesData 框架，可以以多种方式使用，无需进一步努力。它还可以毫无困难地处理标签。要将您的输入输入到 ad-hoc maptools 函数返回的表单中，请执行以下操作：

```
o0 <- coordinates(spa1)
o1 <- lapply(o0, function(x) do.call("rbind", x))
library(maptools) # SVN revision >= 232
spa <- getKMLcoordinates('Perimeter_Track.kml', ignoreAltitude=TRUE)
all.equal(o1, spa) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:31:55.060

您的示例文件包含`getKMLcoordinates`函数不期望的制表符（maptools 版本 0.8-14）。

如果您进行小的修改，它会按预期工作。我已经在我的补充处发表了评论：

```
getKMLcoordinates_01 <- function (kmlfile, ignoreAltitude = FALSE) 
{
    if (missing(kmlfile)) 
        stop("kmlfile is missing")
    kml <- paste(readLines(kmlfile, encoding = "UTF-8"), collapse = " ")
    re <- "<coordinates> *([^<]+?) *<\\/coordinates>"

    ## ++ new code
    ## remove tabs first
    kml <- gsub("\\t", "", kml)
    ##   

    mtchs <- gregexpr(re, kml)[[1]]
    coords <- list()
    for (i in 1:(length(mtchs))) {

        kmlCoords <- unlist(strsplit(gsub(re, "\\1", substr(kml, 
            mtchs[i], (mtchs[i] + attr(mtchs, "match.length")[i])), 
            perl = TRUE), split = " "))
        m <- t(as.matrix(sapply(kmlCoords, function(x) as.numeric(unlist(strsplit(x, 
            ","))), USE.NAMES = FALSE)))
        if (!ignoreAltitude && dim(m)[2] != 3) 
            message(paste("no altitude values for KML object", 
                i))
        coords <- append(coords, ifelse(ignoreAltitude, list(m[, 
            1:2]), list(m)))
    }
    coords
}

spa <- getKMLcoordinates_01("Perimeter_Track.kml")
summary(spa)
     Length Class  Mode   
[1,] 192    -none- numeric
[2,] 363    -none- numeric
[3,]  51    -none- numeric
[4,] 189    -none- numeric 
```

```

R 版本 2.15.0 已修补 (2012-05-05 r59321)
平台：x86_64-pc-mingw32/x64（64位）

语言环境：
[1] LC_COLLATE=English_Australia.1252 LC_CTYPE=English_Australia.1252 LC_MONETARY=English_Australia.1252 LC_NUMERIC=C                      
[5] LC_TIME=English_Australia.1252    

附加的基础包：
[1] stats graphics grDevices utils datasets compiler methods base     

其他附加包：
[1] rgdal_0.7-8 maptools_0.8-14 lattice_0.20-6 sp_0.9-98 foreign_0.8-49

通过命名空间加载（未附加）：
[1] 网格_2.15.0 工具_2.15.0

```

# java - 关于超类引用和子类对象的混淆

> ID：10492898
> 
> 赞同：-2
> 
> 时间：2012-05-08T05:12:18.267
> 
> 标签：java, inheritance, reference, modifier, overriding

我对此代码有一些疑问：

```
class superclass
{
    void bark() {}
}

class subclass extends superclass
{
    void bark() {}

    public static void main(String[] args) {
        superclass refvar = new subclass();
        refvar.bark();
    }
} 
```

1.  为什么在这种情况下，无论孩子有没有方法，父母都必须有方法？我被告知在编译时引用变量是超类类型，所以编译器在编译时检查超类中的这个方法；那准确吗？

2.  当编译器读取`bark()`时，它如何知道下一步要去哪里？我知道子方法会覆盖它，但我想知道它首先进入超类方法或子类，以及为什么。

3.  为什么子类需要具有更广泛范围的访问修饰符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:35:36.810

1.  `refvar`被声明为`superclass`对象，这就是为什么`bark()`必须在`superclass`for中声明`refvar.bark()`才能编译。

2.  它查找实例对象的`bark()`.

3.  在更窄的范围内覆盖某些东西没有多大意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:36:00.447

> 为什么在这种情况下，无论孩子有没有方法，父母都必须有方法？

您的示例调用`bark()`静态类型的对象`superclass`- 如果`superclass`没有声明方法`bark()`，编译器将不知道这将是一个有效的调用。

> 我被告知在编译时引用变量是超类类型，所以编译器在编译时检查超类中的这个方法；那准确吗？

是的，事实上这与我上面所说的一致。

> 当编译器读取`bark()`时，它如何知道下一步要去哪里？我知道子方法会覆盖它，但我想知道它首先进入超类方法或子类，以及为什么。

实际上，编译器下一步不会去任何地方。在编译时重要的是`bark()`对类型对象的有效调用`superclass`。仅在运行时将调用分派`bark()`到`subclass`.

> 为什么子类需要具有更广泛范围的访问修饰符？

我假设您的意思是子类的*覆盖方法*。澄清一下，它必须具有*平等*或更广泛的访问权限。它不能具有更窄访问权限的原因是因为这会破坏超类定义的合同。

例如，如果您被允许更改`bark()`为`private`in `subclass`，那么理论上对该方法的调用不应该在`subclass`. 但它需要工作，因为`superclass`没有`bark()`私有化：

```
class ClassInTheSamePackageAsTheOtherTwo {

    public static void main(String[] args) {
        superclass refvar = new subclass();
        refvar.bark(); //as far as the compiler knows, this call is valid
    }
} 
```

# preg-replace - 有人可以帮助我将我的 ereg_replace 转换为 preg_replace

> ID：10492899
> 
> 赞同：0
> 
> 时间：2012-05-08T05:12:26.723
> 
> 标签：preg-replace, ereg-replace

我只需要一些帮助，将我的 ereg_replace 更改为 preg_replace ..

```
ereg_replace('<caption.*</caption>', '', $match); 
```

我试过了

```
preg_replace('/<caption.*</caption>/', '', $match); 
```

但它不起作用..它说“警告：preg_replace（）：未知修饰符'c'”

我是这种东西的新手..所以任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:15:40.293

有`'c'`问题的是`</caption>`原始正则表达式中的那个。当解析器看到 时`/`，它假定它是一个结束分隔符，正则表达式结束，它正在寻找修饰符标志。不识别称为`c`它的修饰符标志会引发您看到的错误。

因此，您可以通过转义斜线来解决问题。不过，在我看来，使用非斜杠字符（我偏爱`#`）作为分隔符可能更方便：

```
preg_replace('#<caption.*</caption>#', '', $match); 
```

# c# - 绑定到继承的（孙子）对象？

> ID：10492900
> 
> 赞同：0
> 
> 时间：2012-05-08T05:12:30.293
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

我有一个 ListBox，其数据上下文是：

```
ObservableCollection<Item> 
```

Item 是一个基类，从它继承一个 Potion 类，然后从它继承一个 HealthPotion 类。

所以：

物品 -> 药水 -> 健康药水

我的 ListBox 模板看起来像这样：

```
<DataTemplate>
    <StackPanel Orientation="Vertical" Margin="0,0,0,17">
        <TextBlock Text="{Binding PropertyFromItem}" />
        <TextBlock Text="{Binding PropertyFromPotion}" />
        <TextBlock Text="{Binding PropertyFromHealthPotion}" />
    </StackPanel>
</DataTemplate> 
```

出于某种原因，绑定到 PropertyFromHealthPotion（Item 的孙子）的文本块不会显示数据，而其他两个会。任何想法为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:00:41.437

正如评论中所讨论的：

你确定你里面有健康药水？放入DataTemplate 进行检查！房产是公开的吗？如果您希望它发生变化，您是否正确 RAISE PropertyChanged？无论如何，您的代码应该可以工作......

# apache-flex - Flex Datagrid 在运行时可编辑

> ID：10492905
> 
> 赞同：0
> 
> 时间：2012-05-08T05:12:52.480
> 
> 标签：apache-flex, datagrid, flex4, advanceddatagrid

在我的 flex 应用程序中，我有一个数据网格，因为 2 列可编辑，其余列不可编辑。在某些情况下，在运行时我必须将可编辑列更改为不可编辑...我该怎么做？有什么建议么？？这是我的代码...

```
<mx:AdvancedDataGrid id="adg1" editable = "true" designViewDataType="tree">
                        <mx:columns>
                                    <mx:AdvancedDataGridColumn headerText="Name" dataField="name" editable ="true"/>
                                    <mx:AdvancedDataGridColumn headerText="Age" dataField="age" editable ="true"/>
                                    <mx:AdvancedDataGridColumn headerText="Roll No" dataField="num" editable = "false"/>
                        </mx:columns>
            </mx:AdvancedDataGrid> 
```

提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:15:47.127

**adg1.columns**将返回您**的列数组**。

循环遍历将每个列转换为**AdvancedDataGridColumn** 并使用“dataField”检查条件并根据需要使其可编辑或不可编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:23:19.757

**方法1：** 您可以遍历列，并检查可编辑属性：

```
 for (var i:int = 0; i < adg1.columns.length; i++) 
            {
                if (adg1.columns[i] is AdvancedDataGridColumn)
                {
                    var myCol:AdvancedDataGridColumn = adg1.columns[i] as AdvancedDataGridColumn;

                    trace(myCol.editable);  

                    //for example, change Age column to non editable
                    if (myCol.headerText == 'Age')
                    {
                        myCol.editable = false;
                    }
                }
            } 
```

**方法二：**

如果您为列设置 id，例如：

```
<mx:AdvancedDataGridColumn id="ageCol" headerText="Age" dataField="age" editable ="true"/> 
```

您可以通过以下方式访问它：

```
trace("before ageCol editable:",ageCol.editable);

var indx:int = adg1.columns.indexOf(ageCol);
adg1.columns[indx].editable = false;

trace("after ageCol editable:",ageCol.editable); 
```

或者如果适用，只需执行以下操作：

```
ageCol.editable = false; 
```

# java - 为什么我得到：java.lang.UnsatisfiedLinkError

> ID：10492906
> 
> 赞同：7
> 
> 时间：2012-05-08T05:12:54.427
> 
> 标签：java, c++, c, java-native-interface, unsatisfiedlinkerror

Java 代码：

```
package Package;

public class IntArray {
private native int sumArray(int[] arr);

public static void main(String args[]) {
    IntArray p = new IntArray();
    int arr[] = new int[10];
    for(int i=0 ; i<10 ; i++) {
        arr[i] = i;
    }
    int sum = p.sumArray(arr); // pass the array to the c function sumArray
    System.out.println("Sum is : " + sum);
}

 static { // 17th statement
     System.loadLibrary("IntArray");
 }
} 
```

C代码：

```
#include<stdio.h>
#include "Package_IntArray.h"

jint Java_Package_IntArray_sumArray(JNIEnv *env, jobject obj, jintArray arr)
          {
             jint buf[10];
             jint i, sum = 0;
             (*env)->GetIntArrayRegion(env, arr, 0, 10, buf);
             for (i = 0; i < 10; i++) {
                 sum += buf[i];
             }
             return sum;
          } 
```

然后我运行命令：

```
java -Djava.library.path=W:\elita\jnitesters\workspace\c\IntArray\bin\Debug Package.IntArray 
```

我得到以下例外：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: Package.IntArray.sumArray([I)I
    at Package.IntArray.sumArray(Native Method)
    at Package.IntArray.main(IntArray.java:17) 
```

在目录*W:\elita\jnitesters\workspace\c\IntArray\bin\Debug*中有一个名为*IntArray.dll的**dll文件*

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:47:47.240

嗯，我看不到任何明显的东西，但有几件事可以尝试：

1）在你的堆栈跟踪中指定完整路径`System.load()`有点令人困惑，它表明 sumArray() 被第 17 行调用，这是静态的，所以我不知道该怎么做。

2) 在你的周围放一个 try/catch 块`System.load()`

3）尝试像这样定义你的方法：

```
 JNIEXPORT void JNICALL Java_Package_IntArray_sumArray(JNIEnv *env, jobject obj, jintArray arr)
 {
     /*Implement Native Method Here*/
 } 
```

也许该方法没有在您的 .dll 文件中导出，这就是它找不到它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:54:02.853

您已经在您的 Netbeans 项目的文件夹`elita`下创建了一个文件夹。将您的 .dll 复制到该文件夹​​。现在在 NetBeans IDE 中，右键单击并选择项目属性-> 运行-> VM 选项：-`lib``Djava.library.path=lib/elita`

然后从 IDE 本身运行您的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:42:38.460

一切安好 ！但是你应该尝试一件事。*永久删除 IDE code::blocks*创建的各种文件（包括 .dll 文件）。然后重建你的程序。如果有，请省略**宏**！然后它应该工作。**

# javascript - 在点击位置打开弹窗

> ID：10492910
> 
> 赞同：13
> 
> 时间：2012-05-08T05:13:06.467
> 
> 标签：javascript, jquery, html, popup, mouse-position

你好，

我做了一个弹出窗口，默认情况下隐藏并在窗口上触发点击时打开。必须在触发事件的任何地方显示弹出窗口。但是有一些限制：

1.  弹出窗口必须显示在当前可见窗口中。意思是，如果我单击窗口的最右侧，则弹出窗口必须显示在单击位置的右侧以避免滚动。

2.  如果窗口有滚动，不管滚动它应该显示在窗口的可见部分。

在我目前的代码中一切正常，除非窗口有滚动。如果向下滚动并单击窗口中间，则弹出窗口显示在窗口当前显示区域............

```
<!DOCTYPE HTML PUBLIC>
<html>
 <head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
 <style>
   div{
     border:1px solid;
     background:#ff9999;
     width:500px;
     height:500px;
     display:none;
     position:absolute;
   }
 </style>
  <script>
   var mouseX,mouseY,windowWidth,windowHeight;
   var  popupLeft,popupTop;
 $(document).ready(function(){

   $(document).mousemove(function(e){
           mouseX = e.pageX;
           mouseY = e.pageY;
           //To Get the relative position
           if( this.offsetLeft !=undefined)
             mouseX = e.pageX - this.offsetLeft;
           if( this.offsetTop != undefined)
             mouseY = e.pageY; - this.offsetTop;

           if(mouseX < 0)
                mouseX =0;
           if(mouseY < 0)
               mouseY = 0;

           windowWidth  = $(window).width();
           windowHeight = $(window).height();
   });

     $('html').click(function(){
       $('div').show();
      var popupWidth  = $('div').outerWidth();
      var popupHeight =  $('div').outerHeight();

      if(mouseX+popupWidth > windowWidth)
        popupLeft = mouseX-popupWidth;
      else
       popupLeft = mouseX;

      if(mouseY+popupHeight > windowHeight)
        popupTop = mouseY-popupHeight;
      else
        popupTop = mouseY; 
      if(popupLeft < 0)
          popupLeft = 0;
      if(popupTop < 0)
          popupTop = 0;

      $('div').offset({top:popupTop,left:popupLeft});
     });
 });
  </script>
 </head>

 <body>
        <br/><br/><br/>  <br/><br/><br/><br/> <br/><br/> <br/>   <br/>   <br/>   <br/>   <br/>   <br/> 
        <br/><br/> <br/> <br/> <br/>    <br/><br/><br/> <br/><br/>  <br/>   <br/><br/><br/><br/><br/><br/>
        <br/><br/><br/><br/><br/><br/><br/><br/>    

        <div>
         s dflasld fsadf
         sdfas dfsadf
        </div>

</body>

</html> 
```

你能检查一下吗.......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T05:23:07.187

也许您可以在初始化时加载 windowW/H 并退出您的函数。

这个概念是使用mouseY-scrolled high，因为mouseY与body有关。所以使用这个：

```
 $(document).ready(function(){

     $('html').click(function(e){
      mouseX=e.pageX;
      mouseY=e.pageY;
      var bodyTop = document.documentElement.scrollTop + document.body.scrollTop;
      ..
      //window.outerWidth is not working in IE
      var windowWidth  = $(window).outerWidth();
      var windowHeight = $(window).outerHeight();
      ..
      if(mouseY-bodyTop+popupHeight > windowHeight)
        ...
        ...
      //set the position first. remove the position attr in css   
      $('div').css({position:"absolute",top:popupTop,left:popupLeft});
      $('div').show();
     });
 }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T05:32:20.683

最后，我可以通过一些小的改动来做到这一点......这是一段运行良好的代码......

```
<html>
 <head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
 <style>
   div{
     border:1px solid;
     background:#ff9999;
     width:500px;
     height:500px;
     display:none;
     position:absolute;
   }
 </style>
  <script>
   var mouseX,mouseY,windowWidth,windowHeight;
   var  popupLeft,popupTop;
 $(document).ready(function(){

   $(document).mousemove(function(e){
           mouseX = e.pageX;
           mouseY = e.pageY;
           //To Get the relative position
           if( this.offsetLeft !=undefined)
             mouseX = e.pageX - this.offsetLeft;
           if( this.offsetTop != undefined)
             mouseY = e.pageY; - this.offsetTop;

           if(mouseX < 0)
                mouseX =0;
           if(mouseY < 0)
               mouseY = 0;

           windowWidth  = $(window).width()+$(window).scrollLeft();
           windowHeight = $(window).height()+$(window).scrollTop();
   });

     $('html').click(function(){
       $('div').show();
      var popupWidth  = $('div').outerWidth();
      var popupHeight =  $('div').outerHeight();

      if(mouseX+popupWidth > windowWidth)
        popupLeft = mouseX-popupWidth;
      else
       popupLeft = mouseX;

      if(mouseY+popupHeight > windowHeight)
        popupTop = mouseY-popupHeight;
      else
        popupTop = mouseY; 

    if( popupLeft < $(window).scrollLeft()){
     popupLeft = $(window).scrollLeft();
    }

    if( popupTop < $(window).scrollTop()){
     popupTop = $(window).scrollTop();
    }

     if(popupLeft < 0 || popupLeft == undefined)
           popupLeft = 0;
      if(popupTop < 0 || popupTop == undefined)
           popupTop = 0;

      $('div').offset({top:popupTop,left:popupLeft});
     });
 });
  </script>
 </head>

 <body>
        <br/><br/><br/>  <br/><br/><br/><br/> <br/><br/> <br/>   <br/>   <br/>   <br/>   <br/>   <br/> 
        <br/><br/> <br/> <br/> <br/>    <br/><br/><br/> <br/><br/>  <br/>   <br/><br/><br/><br/><br/><br/>
        <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>        

        <div>
         s dflasld fsadf
         sdfas dfsadf
        </div>

</body>

</html> 
```

# php - 致命错误：未定义的类常量“PER_COUNTRY”

> ID：10492911
> 
> 赞同：0
> 
> 时间：2012-05-08T05:13:52.357
> 
> 标签：php, datetime, date, datetimeoffset

我正在尝试使用以下代码查找某个国家/地区的时区。

```
 // FIND TIMEZONE CODE FROM COUNTRY CODE HERE
    // COUNTRY CODE SHOULD BE IN ISO2 FORMAT
    $country_code      =   'GR';
    $arr_new_timezone   =   DateTimeZone::listIdentifiers(DateTimeZone::PER_COUNTRY, $country_code); 
```

代码在我的本地服务器 (WAMP) 上工作得非常好，但在 Live Server 上却不行。

这有什么问题？找不到有关此问题的太多解决方案。

让我知道我能做些什么来解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:45:29.160

您的实时服务器上的 PHP 版本不是 >= PHP 5.3

见这里：[http ://www.php.net/manual/en/datetimezone.listidentifiers.php#refsect1-datetimezone.listidentifiers-changelog](http://www.php.net/manual/en/datetimezone.listidentifiers.php#refsect1-datetimezone.listidentifiers-changelog)

# xcode - 数组在 cellForRowAtIndexPath 中变为空

> ID：10492921
> 
> 赞同：0
> 
> 时间：2012-05-08T05:14:33.497
> 
> 标签：xcode, arrays, json, ios5

我正在解析一个 json 文件，然后尝试将一个数组传递给 cellForRowAtIndexPath 但该数组变为空。在.h

```
@interface NewsControllor : UITableViewController
@property (nonatomic) NSArray *latestNews;
@property (nonatomic) NSArray *sortedArray;
@end 
```

米

```
@synthesize latestNews;
@synthesize sortedArray; 
```

会出现视图

```
-(void)viewWillAppear:(BOOL)animated
{

[super viewWillAppear:animated];
dispatch_async(kBgQueue, ^{
    NSData* data = [NSData dataWithContentsOfURL: 
                    NewsFeed];
    [self performSelectorOnMainThread:@selector(fetchedData:) 
                           withObject:data waitUntilDone:YES];
}); 
```

}

获取的数据

```
- (void)fetchedData:(NSData *)responseData {

//parse out the json data
NSError* error;
NSDictionary* json = [NSJSONSerialization 
                      JSONObjectWithData:responseData //1

                      options:kNilOptions 
                      error:&error];

self.latestNews = [json objectForKey:@"News"]; //2

//sort the json array
NSSortDescriptor *latestnewssorter = [[NSSortDescriptor alloc] initWithKey:@"sortNumber" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:latestnewssorter,nil];
self.sortedArray =[latestNews sortedArrayUsingDescriptors:sortDescriptors];
} 
```

cellForRowAtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:     (NSIndexPath *)indexPath
{
NSLog(@"News: %@", self.latestNews);    

UITableViewCell *cell = [tableView 
                         dequeueReusableCellWithIdentifier:@"NewsCell"];

NSDictionary* item = [self.sortedArray objectAtIndex:0];   //[indexPath row]
cell.textLabel.text = [item objectForKey:@"titleOfNews"];
cell.detailTextLabel.text = [item objectForKey:@"detailOfNews"];
return cell;

} 
```

我正在测试这就是为什么我只返回 1 个单元格。我在节中的行数也是 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:52:54.863

首先尝试记录描述查找数据：

```
NSLog(@"NSData description: %@", [data description]); 
```

如果它记录了一些有效的十六进制数据，那么您正在从指定的 URL 接收数据。
否则，您的`NSURLConection`.

# android - 未执行自定义 ArrayAdapter 的 getView() 方法

> ID：10492925
> 
> 赞同：0
> 
> 时间：2012-05-08T05:15:30.967
> 
> 标签：android, android-listview, android-arrayadapter

在我的项目中，我必须显示报告列表，因此`Activity`我编写了以下代码：

```
super.onCreate(savedInstanceState);
        setContentView(R.layout.report_full);
            List<Employee> data = new ArrayList<Employee>();
        Employee eg=new Employee();
        ListView li=(ListView)findViewById(R.id.report_list);
        Intent myIntent = getIntent(); // this is just for example purpose
        Bundle b=myIntent.getExtras();
        Log.i("User Report", b.toString());
        Toast.makeText(getApplicationContext(), "User Report", Toast.LENGTH_LONG).show();
        if(b !=null) {
                String username = b.getString("username");
                String userid = b.getString("userid");
                String startdate = b.getString("startdate");
                String enddate = b.getString("enddate");
                String mode=b.getString("mode");
                Log.i("LOOP", userid+"-"+startdate+"-"+enddate+"-"+mode);
                data=eg.getReports(username, userid, startdate, enddate,mode);
                Log.i("Get Report",data.toString());
                li.setAdapter(new UserReportArrayadapter(this, data));
            } 
```

在`UserReportArrayadapter.java`我写下面的代码：

```
 private LayoutInflater inflater;
    private List<Employee> data;
    public UserReportArrayadapter(Context context, List<Employee> objects) {
        super(context, R.layout.list_time_mode_report, objects);
        Log.i("User Report by HoursAdapter","Inside constructor");
        inflater = LayoutInflater.from(context);
        this.data = objects;
}

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 1;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        Log.i("User Report ","Inside getView");
        //if it's not create convertView yet create new one and consume it
          if(convertView == null){
            //instantiate convertView using our employee_list_item
              convertView = inflater.inflate(R.layout.list_time_mode_report, null);
              //get new ViewHolder
                holder =new ViewHolder();
               //get all item in ListView item to corresponding fields in our ViewHolder class
                 holder.project=(TextView)convertView.findViewById(R.id.time_entry_1);
                holder.hours=(TextView)convertView.findViewById(R.id.time_entry_2);

              //set tag of convertView to the holder
              convertView.setTag(holder);
         }
        //if it's exist convertView then consume it
          else {
               holder =(ViewHolder) convertView.getTag();
           }      
             //set data to holder
          Log.i("User Report by HoursAdapter:data",data.get(position).getData());
            holder.project.setText(data.get(position).getData());
            holder.hours.setText(data.get(position).getNo_of_hrs());

           return convertView;
      }
         //ViewHolder class that hold over ListView Item
         static class ViewHolder{
             TextView hours;
             TextView project;

        } 
```

在日志中，仅`"User Report"`显示`"Inside getView"`。构造函数被调用但`getView()`未被调用。在运行此应用程序时，屏幕上没有显示任何项目。为什么会这样？

还有我的 report_full.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://xyz.com"
  android:background="#000000"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

    <RelativeLayout 
    android:background="@drawable/col_bg_top" 
    android:id="@+id/report_title" 
    android:layout_alignParentTop="true" 
    android:layout_width="fill_parent" 
    android:layout_height="50sp">

    </RelativeLayout>

    <!-- WHITE LINES -->
    <LinearLayout 

    android:layout_width="fill_parent" 
    android:layout_height="1sp" 
    android:orientation="vertical" 
    android:id="@+id/white_line_top" 
    android:layout_below="@+id/report_title">
    </LinearLayout>

    <!-- MAIN LIST VIEW -->
    <ListView
        android:layout_below="@+id/report_list"
        android:id="@+id/report_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/buttons_holder">
    </ListView>

    <!-- WHITE LINES -->
    <LinearLayout 
    android:background="#9d9d9d"
    android:layout_width="fill_parent" 
    android:layout_height="1sp" 
    android:orientation="vertical" 
    android:id="@+id/white_line_bottom" 
    android:layout_above="@+id/buttons_holder">
    </LinearLayout>

    <LinearLayout 
        android:baselineAligned="false"
    android:layout_alignParentBottom="true" 
    android:weightSum="1.0"
    android:orientation="horizontal" 
    android:id="@+id/buttons_holder"  
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent"
    >

        <!-- HOME BUTTON -->
        <RelativeLayout 
        android:background="@drawable/col_bg_highlights"
        android:layout_weight="0.33"
        android:layout_width="wrap_content" 
        android:layout_height="62sp" android:padding="3sp">

            <TextView 
            android:id="@+id/txt_btn_home" 
            android:textColor="#FFFFFF" 
            android:text="HOME" 
            android:layout_width="wrap_content" 
            android:textSize="9sp" 
            android:layout_height="wrap_content" 
            android:layout_centerHorizontal="true">
            </TextView>

            <ImageButton 
            android:background="#00000000" 
            android:id="@+id/btn_home" 
            android:scaleType="fitCenter" 
            android:layout_height="42dp" 
            android:layout_width="45sp" 
            android:padding="3sp" 
            android:src="@drawable/home_button" 
            android:layout_below="@+id/txt_btn_home"
            android:layout_centerHorizontal="true"
            ></ImageButton>

        </RelativeLayout>

<!-- Dividing Line -->
<RelativeLayout 
android:layout_width="1sp" 
android:layout_height="62sp" 
android:background="#9d9d9d"
></RelativeLayout>

        <!-- ACTIVITY BUTTON -->
        <RelativeLayout 
        android:layout_width="wrap_content" 
        android:layout_height="62sp" android:padding="3sp" android:layout_weight="0.34">

            <TextView 
            android:id="@+id/txt_btn_activity" 
            android:textColor="#FFFFFF" 
            android:text="ACTIVITY" 
            android:layout_width="wrap_content" 
            android:textSize="9sp" 
            android:layout_height="wrap_content" 
            android:layout_centerHorizontal="true">
            </TextView>

            <ImageButton 
            android:background="#00000000" 
            android:id="@+id/btn_activity" 
            android:scaleType="fitCenter" 
            android:layout_height="42dp" 
            android:layout_width="45sp" 
            android:padding="3sp" 
            android:src="@drawable/activity_button" 
            android:layout_below="@+id/txt_btn_activity"
            android:layout_centerHorizontal="true"
            ></ImageButton>

        </RelativeLayout>

<!-- Dividing Line -->
<RelativeLayout 
android:layout_width="1sp" 
android:layout_height="62sp" 
android:background="#9d9d9d"
></RelativeLayout>

        <!-- REPORTS BUTTON -->
        <RelativeLayout 
        android:layout_width="wrap_content" 
        android:layout_height="62sp" android:padding="3sp" android:layout_weight="0.34">
            <TextView 
            android:id="@+id/txt_btn_report" 
            android:textColor="#FFFFFF" 
            android:text="REPORTS" 
            android:layout_width="wrap_content" 
            android:textSize="9sp" 
            android:layout_height="wrap_content" 
            android:layout_centerHorizontal="true">
            </TextView>

            <ImageButton 
            android:background="#00000000" 
            android:id="@+id/btn_report" 
            android:scaleType="fitCenter" 
            android:layout_height="42dp" 
            android:layout_width="45sp" 
            android:padding="3sp" 
            android:src="@drawable/report_button" 
            android:layout_below="@+id/txt_btn_report"
            android:layout_centerHorizontal="true"
            ></ImageButton>

        </RelativeLayout>

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:37:57.623

在您的代码中，该`getView()`方法应该至少被调用一次（该`getCount`方法返回`1`）。首先，该`getCount()`方法应该返回对象中的视图数`data`：

```
@Override
public int getCount() {
    return this.data.size();
} 
```

检查您`data`在自定义的构造函数中传递的对象中是否确实有一些信息`ArrayAdapter`。也许您还可以在您拥有`ListView`( `R.layout.report_full`) 的位置添加布局文件，以查看其他视图是否隐藏了您的`ListView`.

你在日志中看到了`"LOOP"`吗`"Get Report"`？

# spring - 哪些对象不应该被弹簧管理？

> ID：10492928
> 
> 赞同：4
> 
> 时间：2012-05-08T05:15:34.737
> 
> 标签：spring

哪些对象不应该由 spring 容器管理？据我了解，数据传输对象不需要进行弹簧管理，并且可以使用 new 运算符创建......但是在开发 Web 应用程序时是否有一个通用规则和推理可以遵循......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T23:39:39.023

Spring 是关于 DI 的，因此您将对象 A 用漂亮的 @Component 或 @Service 注释标记，然后您可以将其注入对象 B。DI 就是您所获得的。您正在寻找什么时候不使用 DI？DTO 的，一般的辅助类，无论什么不值得为它制作接口，都不值得获得注释。另一方面，控制器 DAOS 服务通常值得 Spring 管理。

# asp.net - 无法使用 asp.net 中的 java 脚本验证内容页面的下拉列表

> ID：10492932
> 
> 赞同：-2
> 
> 时间：2012-05-08T05:15:49.140
> 
> 标签：asp.net

我在内容页面中使用下拉列表，所以我想验证 selectedIndex!=0 的下拉列表；

在此先感谢 N Mahesh Goud

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:20:07.853

你可以使用`clientID`属性，假设你的下拉列表 id 是 dropID 然后像这样访问：

```
document.getElementById ("<%= dropID.ClientID %>"); 
```

# php - 这个 PHP 函数是否可以防止文件遍历？

> ID：10492935
> 
> 赞同：0
> 
> 时间：2012-05-08T05:16:04.180
> 
> 标签：php, security, file, codeigniter

我有一个 URL，它将为我的用户提供受保护的文件。

当文件上传时，文件名由我的应用程序重写，无论名称如何，并存储在我的数据库中。所以我知道它永远不会包含“/”或“..”

文件名是： "USER_ID"_"RANDOMMD5".FILE_EXT 其中 "USER_ID" = 当前登录的用户 ID，而 "RANDOM MD5" 正是如此。

即5_ji3uc237uckj92d0jf3932t09ut93f2.pdf

这是我提供文件的功能：

```
function user_file($file_name = "")
{
    if ($file_name)
    {
         // Ensure no funny business names:
         $file_name = str_replace ('..', '', $file_name);
         $file_name = str_replace ('/', '', $file_name);

         // Check if the user is allowed to access this file
     $user_id = substr($file_name, 0, strpos($file_name, "_"));

         // now do the logic to check user is logged in, and user is owner of file
         (($this->ion_auth->logged_in()) && (($user_id === $this->user->id))
         {
                // Serve file via readfile()
         }
    }
} 
```

**问题：**这是一种安全的方法来确保人们没有其他方法可以横穿目录、访问其他文件等吗？

**编辑 1：** ion_auth 是我的身份验证库，“$this->user->id”是存储在我的构造中的用户 ID

**编辑 2：**用户文件存储在 public_html 之外 - 因此只能通过我的应用程序 AFAIK 访问

**编辑 3：**我改进的代码，使用下面 Amber 的想法，考虑到我需要适应不同的文件扩展名这一事实，我将尝试避免数据库命中：

```
function user_files($file_name = "")
{
    // for security reasons, check the filename is correct
    // This checks for a 32bit md5 value, followed by a single "." followed by a 3-4 extension (of only a-z)
    if (preg_match('^[A-Za-z0-9]{32}+[.]{1}[A-Za-z]{3,4}$^', $file_name))
    {
        // Now check the user is logged in
        if ($this->ion_auth->logged_in())
        {
            // Rewrite the request to the path on my server - and append the user_id onto the filename
            // This ensures that users can only ever access their own file which they uploaded
            // As their userid was appended to the filename during the upload!
            $file = MY_SECURE_FOLDER.$this->user->id.'_'.$file_name;

            // Now check if file exists
            if (file_exists($file))
            {
                // Serve the file
                header('Content-Type: '.get_mime_by_extension($file));
                readfile($file);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:46:13.213

我可以遍历任何目录，但我将被限制为以我的用户 ID 开头的文件名。

考虑

```
$file_name = '/./.\\1234_anything.anything';
         $file_name = str_replace ('..', '', $file_name);
         echo $file_name = str_replace ('/', '', $file_name); 
```

就文件路径分隔符而言， / 和 \ 通常是等效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:19:21.067

更好的主意：让用户提供 MD5，并自己构建文件名。这样你就不必对用户输入和文件名进行各种疯狂的检查——你只需确保 MD5 是一个 40 个字符的字符串`[0-9a-f]`，然后你就很好了。

# php - 将 $ 添加到动态创建的字符串并使用 isset 作为变量进行评估

> ID：10492937
> 
> 赞同：0
> 
> 时间：2012-05-08T05:16:23.233
> 
> 标签：php

我在弄清楚这一点时遇到了一些麻烦，基本上我有一个动态创建的字符串并通过几个函数传递，我想在字符串的前面添加一个“$”以使其成为变量然后对其进行评估与 isset() 一样...

我错过了一个明显的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:26:51.147

除了`$$`变量变量构造，请注意，您还可以使用括号语法（虽然它非常难看）来使用字符串创建变量：

```
${'myVar'} = 42;
echo $myVar; // 42
echo "${myVar}"; // 42

$val = 'myVar';
${$val} = 'the answer';
echo $myVar; // the answer (not 42) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:18:36.287

您正在寻找变量变量：

```
$string = 'b';
$b = 'Test';
if(isset($$string)) {
   // do stuff
} 
```

请注意，这通常是不受欢迎的做法，因为在更大的代码库中，您稍后会因为试图弄清楚来自哪里`$b`而感到头疼

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T05:25:03.877

将addslash函数放在“$”符号之前，因为它作为变量。通过使用addslash 函数，它可以作为特殊字符。

# ajax - Yii 如何在 CListView 的寻呼机上启用 ajaxLink？

> ID：10492943
> 
> 赞同：0
> 
> 时间：2012-05-08T05:17:06.550
> 
> 标签：ajax, pagination, yii

使用 Yii 时，我在 ajaxUpdate 中看到 CGridView 上的分页。这是非常有用的。现在，我需要将它合并到 CListView 中。但我不知道ajaxUpdate 的设置是什么。

这里是`controller code`：

```
$dataProvider = new CActiveDataProvider('Match',array(
    'criteria'=>array(
        'condition' => 'group_id = :groupId',
        'params'    => array(':groupId'=>$groupId),
        'order'=>'date DESC',
    ),
    'pagination'=>array(
        'pageSize'=>3,
    ),
));
$this->renderPartial($view = "_matchsOfGroup", array(
    'dataProvider' => $dataProvider
)); 
```

这是我的`view code` **_matchsOfGroup**：

```
<div class="lobbyMain">
    <?php
        $this->widget('zii.widgets.CListView', array(
            'dataProvider'=>$dataProvider,
            'ajaxUpdate'=>true,
            'template'=>'{items}{pager}',
            'itemView'=>'_match',
            'pager'=>array(
                'header'        => '',
                'maxButtonCount'=> '3',                    
            ),            
        ));
    ?>
</div> 
```

和`_match`部分

```
<table>
    <thead>
    <th>date</th>
    <th>Player</th>
    <th>stack</th>
    </thead>
    <?php foreach($data->matchResults as $result) : ?>
        <tr>
            <td><?php echo $data->date; ?></td>
            <td><?php echo $result->user->username; ?></td>
            <td><?php echo $result->total_stack; ?></td>
        </tr>
    <?php endforeach; ?>
</table> 
```

如何配置 'pager'=>array()`zii.widgets.CListView`以使用 ajax 链接请求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:22:03.187

```
$this->renderPartial($view = "_matchsOfGroup", array(
'dataProvider' => $dataProvider)); 
```

改成

```
 $this->renderPartial($view = "_matchsOfGroup", array(
'dataProvider' => $dataProvider),false, true); 
```

# android - 在 Android 应用中获取与用户的 Google 帐户相关联的电子邮件？

> ID：10492946
> 
> 赞同：0
> 
> 时间：2012-05-08T05:17:32.613
> 
> 标签：android, email, gmail

是否可以在 Android 应用程序中检索与用户的 google 帐户关联的所有电子邮件地址，而不仅仅是 gmail？

我试过了：

```
Pattern emailPattern = Patterns.EMAIL_ADDRESS; // API level 8+
Account[] accounts = AccountManager.get(context).getAccounts();
for (Account account : accounts) {
    if (emailPattern.matcher(account.name).matches()) {
        String possibleEmail = account.name;
        ...
    }
} 
```

但这只会返回 gmail 地址。我正在寻找适用于 2.3+ 的解决方案

谢谢！

# javascript - 如何在 CSS 中多处使用图像

> ID：10492947
> 
> 赞同：0
> 
> 时间：2012-05-08T05:17:32.890
> 
> 标签：javascript, html, css

我正在为我的页面设计一个包含气泡的背景。我想把一张气泡图放到屏幕上的很多地方。我在我的 HTML 文件中使用以下代码：

```
<body>
<div class="bg">
       <img id="bubble" src="images/bubble.png" />
</div> 
```

有没有办法把这个气泡图像放到几个地方？

如果您可以将我引导到另一个帖子（我找不到任何帖子）或给我一个解决方案，我将不胜感激。提前致谢。

注意：不能选择使用已存在气泡的单个背景文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:25:53.470

使用为气泡定义[背景图像](http://www.w3schools.com/cssref/pr_background-image.asp)的 CSS 样式，并将该样式应用于您想要具有气泡的任何页面元素。还定义样式以帮助[定位](http://www.w3schools.com/cssref/pr_class_position.asp)元素。

```
.bubble {
  background-image:url('images/bubble.png');
}

.top {
  position: absolute;
  top: 0;
}

.bottom {
  position: absolute;
  bottom: 0;
}

<body>
<div class="bubble top">

</div>
<div class="bubble bottom">

<div>
</body> 
```

还有其他几个背景属性可以帮助您获得所需的效果；位置、重复、大小、剪辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:21:56.380

您可以添加一个 CSS 类

```
.bg {
    background: transparent url(images/bubble.png) no-repeat;
} 
```

然后需要重用类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:29:27.480

你需要一个容器来装你的泡泡

```
<div id="bubble1" class="bubbles"></div>
<div id="bubble2" class="bubbles"></div>
<div id="bubble3" class="bubbles"></div> 
```

然后在你的 .css

```
.bubbles{ 
  background: url(images/bubble.png);
  position: absolute;}

#bubble1{
  left: 10px;
  top: 10px;
}
#bubble2{
  left: 50px;
  top: 150px;
}
#bubble3{
  left: 80px;
  top: 180px;
} 
```

# wpf - 如何使列表框中的项目可见但不可点击

> ID：10492948
> 
> 赞同：3
> 
> 时间：2012-05-08T05:17:41.460
> 
> 标签：wpf, wpf-controls

我有绑定到我的视图模型的列表框。这个视图模型有一个属性

我需要随着此字段的更改使该项目可见但不可点击。任何建议任何人

```
public interface IRegionAreaDM 
{

    /// <summary>
    /// Name of the Focus Area
    /// </summary>
    string RegionAreaName { get; set; }

    /// <summary>
    /// Determines if the Tab is currently selected.
    /// </summary>
    bool IsSelected { get; set; }

    /// <summary>
    /// Determines if the Tab is linked to any other Tab
    /// </summary>
    bool IsLinked { get; set; }

    /// <summary>
    ///
    /// </summary>
    bool IsActive { get; set; } 
```

}

每个项目都连接到 XAML 中的一个项目，例如带有 Textbox 的名称。IsSelected 与 CheckBox 和 IsActive 是使 ListBoxItems 启用/禁用取决于逻辑和我的 Xaml 样式看起来像这样

```
 <Style TargetType="ListBoxItem">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="ListBoxItem">
            <Border x:Name="Bd" HorizontalAlignment="Stretch" Background="#00D05252"
                    BorderThickness="0,1" SnapsToDevicePixels="true">
              <!--  <StackPanel x:Name="ParamterRoot" Orientation="Horizontal">  -->
              <Grid x:Name="ParamterRoot">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <CheckBox x:Name="ParametersCheckbox" Grid.Column="0" Margin="10,0,0,0"
                          VerticalAlignment="Center" IsChecked="{Binding IsSelected}"
                <TextBlock Grid.Column="1" Width="Auto" Margin="20,7.5,0,7.5"
                           Text="{Binding RegionAreaName}" TextTrimming="CharacterEllipsis">
                  <TextBlock.Style>
                    <Style TargetType="{x:Type TextBlock}">
                      <Style.Triggers>
                        <Trigger Property="IsMouseDirectlyOver" Value="True">
                          <Setter Property="Cursor" Value="Hand" />
                        </Trigger>
                      </Style.Triggers>
                    </Style>
                  </TextBlock.Style>
                </TextBlock>                   
              </Grid>
              <!--  </StackPanel>  -->
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="true">
                <Setter TargetName="Bd" Property="Background" Value="#FFC10000" />
              </Trigger>
              <Trigger Property="IsSelected" Value="true">
                <Setter TargetName="Bd" Property="Background" Value="#FFC10000" />
              </Trigger>
 <DataTrigger Binding="{Binding IsActive}" Value="False">
                                    <Setter Property="IsEnabled" Value="False" />
                                </DataTrigger>

            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:46:37.193

![在此处输入图像描述](../Images/7729f9351787aa2831a1134e86d843e9.png)

后面的代码：（您使用的是 MVVM，因此您将稍微调整此代码，但要适合您的模式）

```
public partial class Window1 : Window
{
    public List<T> Items { get; set; }
    public Window1()
    {
        Items = new List<T>
                    {
                        new T{  Id = 1,Name = "qwe",IsEnabled = true},
                        new T{  Id = 2,Name = "asd",IsEnabled = false},
                        new T{  Id = 3,Name = "zxc",IsEnabled = true},
                        new T{  Id = 4,Name = "rty",IsEnabled = false},
                    };
        InitializeComponent();            
        DataContext = this;
    }
}

public class T
{
    public int Id { get; set; }
    public String Name { get; set; }
    public bool IsEnabled { get; set; }
} 
```

XAML：

```
<ListBox Name="listBox1" ItemsSource="{Binding Items}" DisplayMemberPath="Name">
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="IsEnabled" Value="{Binding IsEnabled,Mode=TwoWay}" />
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:11:36.697

如果您想更改样式触发器中的某些内容，那么您也必须在您的样式中设置此属性！所以只需将默认的 IsEnabled 设置器添加到您的样式中。

```
<Style TargetType="ListBoxItem">
   <Setter Property="IsEnabled" Value="True" /><!-- default -->
   ...from here your stuff 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T23:49:09.703

设置 IsEnabled 的替代方法是使用触发器设置 UIElement.IsHitTestVisible 属性。

```
 <DataTrigger Binding="{Binding IsActive}" Value="False"> 
    <Setter Property="IsHitTestVisible" Value="False" /> 
 </DataTrigger> 
```

# vbscript - 从包含 excel 行的记录集中删除记录

> ID：10492955
> 
> 赞同：1
> 
> 时间：2012-05-08T05:18:12.023
> 
> 标签：vbscript

**好的！直接进代码吧！**

> *代码 ：*

```
Const adOpenStatic = 3
Const adLockOptimistic = 3
Const adCmdText = &H0001

Set objConnection = CreateObject("ADODB.Connection")
Set objRecordSet = CreateObject("ADODB.Recordset")

objConnection.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source=C:\Users\HV\Desktop\samp.xls;" & _
    "Extended Properties=""Excel 8.0;HDR=Yes;"";" 

objRecordset.Open "Select * FROM [Sheet1$]", _
objConnection, adOpenStatic, adLockOptimistic, adCmdText

objRecordSet.delete 1 
```

> *错误信息 ：*

[http://s14.postimage.org/fntmbde0x/err.jpg](http://s14.postimage.org/fntmbde0x/err.jpg)

> *超大号：*

[http://s7.postimage.org/4oklf867f/xls.jpg](http://s7.postimage.org/4oklf867f/xls.jpg)

**我期望做的是从记录集中删除第一条记录，只记住记录集不更新到 XLS 中。任何帮助是极大的赞赏 ：）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:26:08.253

您需要一个断开连接的记录集。

1.  设置`Recordset.CursorLocation`为`adUseClient`

2.  打开记录集并获取行

3.  设置`Recordset.ActiveConnection`为`Nothing`。

现在您可以从记录集中删除记录。

```
Const adOpenStatic = 3
Const adLockOptimistic = 3
Const adCmdText = &H1
Const adUseClient = 3
Set objConnection = CreateObject("ADODB.Connection")
Set objRecordSet = CreateObject("ADODB.Recordset")

objConnection.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source=C:\samp.xls;" & _
    "Extended Properties=""Excel 8.0;HDR=Yes;"";"
objRecordSet.CursorLocation = adUseClient
objRecordSet.Open "Select * FROM [Sheet1$]", objConnection, adOpenStatic, adLockOptimistic
Set objRecordSet.ActiveConnection = Nothing
objConnection.Close
objRecordSet.Delete 1 
```

# jquery - 如何从 jQuery ajax 调用中获取 html 输入值

> ID：10492956
> 
> 赞同：0
> 
> 时间：2012-05-08T05:18:12.680
> 
> 标签：jquery, ajax, forms, jquery-ui

如何从 ajax 请求回调数据中获取指定的输入值？

```
$('#action .add').click(function () {
                var form = getCreateUserForm();  // GET THE FORM TO CREATE USER               
                console.log(form);
                $('#user_dialog').html(form);
                $('#user_dialog').dialog({
                    modal: true,
                    width: 700,
                    height: 600,
                    resizable: false,
                    //draggable: false,
                    title: '<h3>' + ???? + '</h3>', // HERE! HOW TO GET THE INPUT VALUE
                    open: function (e, ui) { 
```

在我看来，我有这个

```
 @Html.Hidden(@Localization.CreateUser, null, new { id = "title" }) 
```

数据实际上在`form`变量内部。

如何从`form`变量中获取本地化名称？

或者有什么办法可以处理这种情况？我在正确的轨道上吗？

**编辑**

html:

```
 <div id="user_dialog" hidden></div> 
```

尝试获取表格：

```
 function getCreateUserForm() {
            if (formCreateUser == null) {
                $.ajax({
                    url: '@Url.Action("Create", "User")',
                    async: false,
                    success: function (data) {
                        formCreateUser = data;
                    }
                });
            }
            return formCreateUser;
        } 
```

对话框尚未打开，我无法使用 $('#title') 引用它

**我的解决方案**

我发现生成的 HTML`@Html.Hidden`就像

```
<input id="title" name="Create User" type="hidden" value=""> 
```

而不是使用`$('#title').val()`，我将其更改为`$('#title').attr('name')`.

现在它起作用了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:21:31.033

```
title: '<h3>' +$("#title").val()+ '</h3>' 
```

# c# - 如何从 gridview_RowDeleting 事件中获取anonymousType dataItem

> ID：10492957
> 
> 赞同：1
> 
> 时间：2012-05-08T05:18:21.917
> 
> 标签：c#, asp.net, entity-framework, webforms

我想从**RowDeleting**事件 中的**GridView**获取 Id ，我尝试这样：

 **```
 protected void gvHouse_RowDeleting(object sender, GridViewDeleteEventArgs e)
        {
            Guid hholder = (Guid)(e.Values[0]);

            using (var dataContext = new realtydbEntities())
            {
                var house = (from h in dataContext.Households.Include("aspnet_Users.aspnet_Membership")
                             where h.HouseholdID == hholder
                             select h).First();
                dataContext.DeleteObject(house);
                dataContext.SaveChanges();
            }
        } 
```

但它不起作用。

匿名类型是这样的，我使用 List< **this anonymousType** > 绑定到**GridView**的数据源：

```
 new
                         {
                             Id = u.HouseholdID,
                             BuNo = u.Building.BuildingName,
                             UnNo = u.UnitNo,
                             DepNo = u.DepartmentNo,
                             Name = u.aspnet_Users.UserName,
                             Corp = u.Corporation,
                             IdNumber = u.IdNumber,
                             Telephone = u.Telephone,
                             OtherHouseMembers = u.OtherHouseMembers,
                             OtherInfo = u.OtherInfo,
                             CrDate = u.aspnet_Users.aspnet_Membership.CreateDate
                         }); 
```

我想获取匿名对象或只是获取 ID 属性的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:26:49.373

如果您使用的是 .net 4，则可以利用以下`dynamic`类型：

```
// Get the reference to the bound item
dynamic item = gvHouse.Rows[e.RowIndex].DataItem; 
// Access item property
var itemId = item.Id; 
```

请记住，您的类型的任何属性都不能通过智能感知获得，您只需要避免拼写错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:35:38.663

这将为您提供 ID

```
 var HouseHoldid = Guid.Parse(gvHouse.Rows[e.RowIndex].Cells[0].Text); 
```

如果 ID 是 int 类型，则：

```
 var HouseHoldid = Convert.ToInt32(gvHouse.Rows[e.RowIndex].Cells[0].Text); 
```

删除后，您还必须刷新数据源。从绑定列表中删除项目并刷新gridview的数据源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:10:23.613

这种方式可以获取数据源

```
protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
{

    DataTable sourceData = (DataTable)GridView1.DataSource;

    sourceData.Rows[e.RowIndex].Delete();
} 
```**

# android-layout - 片段中的Android可扩展列表视图

> ID：10492958
> 
> 赞同：1
> 
> 时间：2012-05-08T05:18:23.893
> 
> 标签：android-layout

我们如何在片段中创建可扩展列表，任何人都可以建议

# java - 如何在 Java 中将文本打印为 HTML

> ID：10492961
> 
> 赞同：4
> 
> 时间：2012-05-08T05:18:52.420
> 
> 标签：java, jboss

我提前道歉：尽管进行了大量研究，但我什至不确定如何构建以下问题：

我正在使用 Java/JBoss，我已经设置了一个类来读取 XML 文件，解析它，并采用各种 nodeValues 来构建一个 HTML 字符串。现在我需要做的就是将该 HTML 打印/插入到 DOM 中。

我在尝试：

```
<div id='wrapper'>#{MyClass.methodThatReturnsAnHTMLString()}</div> 
```

但是 HTML 只是在屏幕上显示为转义文本，源代码如下：

```
<div id='wrapper'>
    &lt;div class='item'&gt;content&lt;/div&gt;
</div> 
```

想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:08:52.550

尝试更换

```
>#{MyClass.methodThatReturnsAnHTMLString()} 
```

和

```
<c:out value="${MyClass.methodThatReturnsAnHTMLString}" escapeXml="false"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:34:07.757

当您使用 JSTl 打印输出时会发生这种情况：

```
<c:out value="${body.content}" /> 
```

它基本上转义了 HTML/XML 内容。

如果您使用 script-let 那么它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:35:04.967

你可以试试[这个](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html)。

**编辑**

org.apache.commons.lang 包提供了一个名为的类，该类`StringEscapeUtils`具有帮助转义和取消转义 Java、Java Script、HTML、XML 和 SQL 的字符串的方法。鉴于您的情况，我认为这可能对您有用。:-)

# dojo - 使用 dojo.xhrGet 检索的 json 文件填充 dijit 中的组合框

> ID：10492962
> 
> 赞同：1
> 
> 时间：2012-05-08T05:18:52.403
> 
> 标签：dojo

我正在做dojo，我是初学者。好吧，我想创建一个使用 ajax (dojo.xhrGet) 从 json 文件检索的数据创建一个 dojo ItemFileReadStore，它可用于填充组合框。我试过了，但没有成功！谁能指导我如何调用 json 文件，然后使用数据填充组合框！

```
var _getPlacetypes = function(){
        dojo.xhrGet({
            url: "place_types.json",
            handleAs: "json",
            timeout: 5000,
            load: function(response, args) {
                console.log(response);

            },
            error: function(error_msg,details) {
                PropertyMap.handleError(error_msg, details);
            }
        });
    }

    var myStore = new dojo.data.ItemFileReadStore({
        jsId:data,
        url: "place_types.json",
        }); 
```

我正在使用这样的东西！这是正确的方法吗？

谢谢

问候 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:48:56.253

首先定义数据的结构。

`var myData = { identifier: 'id', label: 'My Label', items: [] };`

`identifier`必须唯一标识每一行。

您必须使用 ItemFileWriteStore（而不是 ItemFileReadStore），因为您想使用来自 ajax 的响应来填充它。

`var myStore = new dojo.data.ItemFileWriteStore({data: myData});`

假设这`response`是一个包含 的 json`someList`对象`id`，请在内部执行此操作`load:`-

```
load: function(response, args) {
    dojo.forEach(response.someList, 
        function(oneItem, i) {
        myStore.newItem({oneItem.id : oneItem.id});
    });

    myStore.save();
} 
```

这样您就可以从 json 响应中填充数据存储。

在创建 ComboBox 时，您应该将商店指定为`myStore`.

```
var comboBox = new ComboBox({
        id: "stateSelect",
        store: myStore,
    }, "stateSelect"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:36:22.267

你为什么不使用[JsonRestStore](http://livedocs.dojotoolkit.org/dojox/data/JsonRestStore)来简化你的代码呢？

您可能有理由直接使用 xhrGet，但我认为如果没有，您会发现 JsonRestStore 是您工作中的重要资产

# asp.net - 从用户控件调用按钮功能

> ID：10492964
> 
> 赞同：0
> 
> 时间：2012-05-08T05:19:25.293
> 
> 标签：asp.net, function, button, user-controls, call

以前，我有一个包含主用户控件的默认 aspx 页面。

主要的用户控件是用于动态加载菜单项的用户。例如**联系人**和**销售订单**。

当用户点击**联系人时，****联系人**的内容是从其他子用户控件加载的。

![在此处输入图像描述](../Images/5e840b08e59c3edb933c73b9cd83cb75.png)

**默认 aspx 前端**

```
Here is the aspx page which include the main user control
     <div class="rightColumnModule2">
                                <asp:Panel ID="pnUserControl" runat="server">
                                        <uc2:SubMenuItem ID="MainMenuItem1" runat="server"/>
                                </asp:Panel>
                            </div> 
```

**子菜单后端代码**

```
 //dynamic load other content of user control
  //I am using placeholder to load from other user control
        private void loadUserControl()
        {
            if (this.hfSelectSubItemURL.Value != "")
            {
                UserControl ucSimpleControl = LoadControl(this.hfSelectSubItemURL.Value) as UserControl;
                PlaceHolder1.Controls.Add(ucSimpleControl);
            }
        } 
```

**ContactPersonList.ascx 前端**

```
div class="rightColumnModule2">

                            <div class="rightColumnModule2TitleContainer">
                                <table class="rightColumnModule2Table">

                                    <tr>
                                        <td>
                                            <div class="rightColumnModule2Title">
                                                Contact Person</div>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                           <cc1:cusAcesslevelBtn ID="btncAdd" runat="server" aclType="Add" 
                                                CssClass="inputButonS" onclick="btncAdd_Click" Text="Add" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <!-- end of rightColumnModule2TitleContainer -->
                            <div id="Div2" class="rightColumnModule2Content" runat="server">

                                            <div class="rightColumnModule2ContentSub">
                                    <div class="rightColumnModule2TitleSub">
                                        System Information 

                                        </div>

                                        <table class="table100">
                                        <tr>
                                            <td class="tableVT" style="width: 49%">
                                                <table class="table100">
                                                    <tr>
                                                        <td class="rightColumnModule2DetailLabel" style="width: 30%">
                                                            Create by &nbsp; </td><td class="rightColumnModule2DetailColon" style="width: 5%">
                                                            : </td><td class="rightColumnModule2DetailValue" style="width: 65%">
                                                            <asp:LinkButton ID="LinkButton1" runat="server" 
                                                               ></asp:LinkButton>&nbsp;<asp:Label
                                                                ID="Label3" runat="server"></asp:Label></td></tr></table></td><td class="gapHori1" style="width: 2%">
                                            </td>
                                            <td class="tableVT" style="width: 49%">
                                                <table class="table100">
                                                    <tr>
                                                        <td class="rightColumnModule2DetailLabel" style="width: 30%">
                                                            Modify By </td><td class="rightColumnModule2DetailColon" style="width: 5%">
                                                            : </td><td class="rightColumnModule2DetailValue" style="width: 65%">
                                                            <asp:LinkButton ID="LinkButton2" runat="server"></asp:LinkButton>&nbsp;<asp:Label
                                                                ID="Label4" runat="server"></asp:Label></td></tr></table></td></tr></table>

                                                                </div>
                            </div>
                          </div>  <!-- end of rightColumnModule2Content --> 
```

如何在我的默认 aspx 页面中调用来自 ContactPersonList.ascx 的添加按钮？请指导我一个解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:42:12.200

你可以有两种方法：

1.  使用**FindControl**属性：

    ```
     Button btn1 =UserControlID.FindControl("btn1") as Button;
     if(btn1 != null)
     {
       //your stuff with button
     } 
    ```

    **或者**

2.  可以直接调用 UserControl 按钮的点击事件：

    用户控制页面：

    ```
    <asp:Button ID="btnClick" runat="server" Text="Button1" onclick="btn_Click" /> 
    ```

    代码背后：

    ```
    public event EventHandler ButtonClick;
    protected void btn_Click(object sender, EventArgs e)
    {
      ButtonClick(sender, e);
    } 
    ```

    页面：

    ```
    <UC1:UC1 ID="UserControl1" runat="server" /> 
    ```

    后面的代码：

    ```
    protected void Page_Load(object sender, EventArgs e)
    {
       UserControl1.ButtonClick += new EventHandler(UserControl1_ButtonClick);
    }

    protected void UserControl1_ButtonClick(object sender, EventArgs e)
    {
       Response.Write("this is usercontrol button event.");
    } 
    ```

# php - 如何使用 php readdir 方法获取所有图像？

> ID：10492968
> 
> 赞同：0
> 
> 时间：2012-05-08T05:19:38.667
> 
> 标签：php, arrays, image, readdir

我正在使用 readdir 从文件夹中获取所有图像，例如

```
function get_user_image($valid_user){
    $rootdir = "../../../user/".$valid_user;
    $dir = opendir("../../../user/".$valid_user);
    $image = array();
    scan_image($image,$rootdir);
    print_r($image);
}
function scan_image($arr,$root){
    $dir = opendir($root);
    while (false!=($file=readdir($dir))){
        if($file!='.'&&$file!='..'){
            $isfile = strripos($file, ".");
            if($isfile)
            {
                $filetype = substr($file,$isfile+1);
                if($filetype=="jpg")
                {
                    //echo $file."</br>";
                    array_push($arr, $file);

                    echo sizeof($arr)."</br>";

                }
            }
             else
            {
                 $curpath = $root."/".$file;
                 scan_image($arr,$curpath);
            }
        }

     }
 } 
```

但是 print_r($image) 是空的，但是 echo sizeof($arr) 是正确的，知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:23:23.363

通过[引用传递数组](http://php.net/manual/en/language.references.pass.php)

```
function scan_image(&$arr,$root){ 
```

# iphone - 如何以固定的时间间隔在表格视图中突出显示自定义单元格？

> ID：10492976
> 
> 赞同：0
> 
> 时间：2012-05-08T05:20:16.077
> 
> 标签：iphone, objective-c, ios, ios5

我有一个表格视图，我在其中加载了我的自定义单元格。一旦加载表格视图，我想在没有任何用户交互的情况下以固定的时间间隔突出显示每个单元格。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:27:26.787

使用 NSTimer 在您想要的特定时间间隔触发选择操作。

编辑 -

```
NSTimer *timer=[NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(highlightMyCell) userInfo:nil repeats:YES] 
```

现在在 highlightMyCell 方法 -

```
-(void)highlightMyCell {
    // Provide implementation to highlight the cell.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:27:33.470

使用 NSTimer 而不是调用在发送选择器`selectRowAtIndexPath:animated:scrollPosition:`和`deselectRowAtIndexPath:animated:`每次触发计时器时翻转的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:27:26.860

使用这行代码并尝试一下。//在viewdidload方法中添加这个

```
 NSTimer *timer=[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(highlighted) userInfo:nil repeats:YES];

   -(void)highlighted
   {
        [customcellobject setHighlighted:YES animated:YES];
    } 
```

# jquery - asp.net mvc3中的嵌套表单提交

> ID：10492983
> 
> 赞同：0
> 
> 时间：2012-05-08T05:21:03.413
> 
> 标签：jquery, html, ajax, asp.net-mvc-3, forms

我有两种形式如下

```
<form id="form1" action="/Account/form1">
 <input type="text" name="baar" />
 <input type="text" name="baar1" />
<div>
 this is first form 
</div>

// here second form starts 
<form id="form2" action="/Account/form2">
 <input type="text" name="foo" />
 <input type="text" name="foo1" />
 <button id="btnclick" type="button">Submit</button>
</form>

 <button type="submit">Submit</button>
</form> 
```

现在我希望当我`#btnclick`在 form2 内部单击时，我会在 form2`form2`中提交所有输入，但不是 form1 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:26:23.143

您不能嵌套表格。首先结束第一个表格以开始另一个表格。

# iphone - iPhone编码删除部分字符串

> ID：10492987
> 
> 赞同：0
> 
> 时间：2012-05-08T05:21:24.803
> 
> 标签：iphone

在我的应用程序中解析 XML 时，我在 XML 解析器的 foundcharacters 委托中有一个字符串。实际的字符串是“Aoyama-itchōme Station”，但是当我应用编码时，我将它作为“ōme Station”。字符串的第一部分丢失。我尝试了不同的编码，但对我没有任何效果。有谁知道是什么原因？

这是我的代码：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if(titleFlag)
    {
       if(string)
       {
           objPlace.title   =   [string stringByReplacingPercentEscapesUsingEncoding: NSUTF8StringEncoding];
       }
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:16:09.473

'Aoyama-itch **ōme Station** ' 是字符串，你得到的是' **ōme Station** '。

我猜在解析字符串时会在初始解析中获得第一部分“Aoyama-itch”和第二部分“ōme Station”。您正在做的是将其设置为标题。

所以在解析器找到字符时的初始解析......

```
self.title = @"Aoyama-itch"; 
```

在第二组可用性中......

```
self.title = @"ōme Station"; 
```

这就是你所看到的。因此，将 title 对象设为 NSMutableString 对象。

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
   if(self.title==nil)
   {
      self .title = [[[NSMutableString alloc] init] autorelease];
   }
   [self.title appendString:<parsed Charachters>];
} 
```

# jquery - 两个具有两种不同文本大小的 jquery UI 框

> ID：10492992
> 
> 赞同：1
> 
> 时间：2012-05-08T05:22:07.383
> 
> 标签：jquery, css, jquery-ui

这是我工作的网站，

[http://cbtallc.com/test-page/#form](http://cbtallc.com/test-page/#form)

在此页面上，在日期和时间下，我使用了 Jquery datepicker 和 timepicker。datepicker 是带有 jquery UI 的标准 datepicker。

timepicker 是来自该站点[http://fgelinas.com/code/timepicker/](http://fgelinas.com/code/timepicker/)的单独代码。它也是基于 jquery UI 的。

我想知道为什么时间选择器上的文本比日期选择器上的要复杂得多。

有谁有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:50:40.887

我在这里使用 Jquery Time Picker Plugins [Jquery Time Picker Plugins](http://haineault.com/media/jquery/ui-timepickr/page/)，到目前为止我没有问题。

您可以在此处查看我在 Web 开发中使用的[Jquery 插件](http://www.jquery4u.com/plugins/)的所有 jquery 插件列表。

希望它有点帮助。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:58:36.373

在您的 Karma/style.css 中，表格字体大小设置为 1.2em

```
table{font-size:1.2em;} 
```

这就是时间选择器显示更大的原因。

# objective-c - Objective-C :: 逐句播放音乐

> ID：10492994
> 
> 赞同：0
> 
> 时间：2012-05-08T05:22:17.167
> 
> 标签：objective-c, playback

我正在制作阴影应用程序。我在逐句播放音乐方面遇到了麻烦。像这样 ，...

如果给音乐这个“hello world.super world”，我想做这样的......

```
@implementation
....
MPMusicPlayerController *musicPlayer;

- (void) playMusicByOneSentence
{
            //[musicPlayer play] is play a whole song. I want to play song by each sentence and sleep 5 sec.

            //[musicPlayer play];
            // I want to like following like this
            [musicPlayer playByOneSentence];
    }
} 
```

`playByOneSentenc`方法是继续播放一个句子，停止5秒直到播放完一首歌曲。

但我不知道像上面这个动作。Objective-C 的`play`方法就是播放一整首音乐。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:31:18.297

处理此问题的一种方法是将您的音乐分割成单独的文件，然后分别播放每个文件。

如果您为文件（例如 sound1.mp3、sound2.mp3、...、sound42.mp3）提供逻辑命名方案，您可以轻松地循环播放文件并根据需要播放它们或存储文件名信息并暂停要在运行时加载到字典中的 plist。

# java - 接口 itable 初始化中的加载程序约束冲突：

> ID：10492995
> 
> 赞同：1
> 
> 时间：2012-05-08T05:22:26.527
> 
> 标签：java, axis, webservice-client, jboss6.x

当我在 jboss 6 中部署一个 web 服务项目时，我得到了下面的 stackrace

原因：java.lang.LinkageError：接口itable初始化中的加载程序约束冲突：解析方法“org.apache.axis.message.MessageElement.getChildElements(Ljavax/xml/namespace/QName;)Ljava/util/Iterator;”时 当前类 org/apache/axis/message/MessageElement 的类加载器（org/jboss/classloader/spi/base/BaseClassLoader 的实例）和接口 javax/xml/soap/SOAPElement 的类加载器（的实例）在 java.lang.Class.getDeclaredMethods0(Native Method) [:1.6.0_13] at java.lang.Class.privateGetDeclaredMethods(Class.java:2427) 的签名中使用的 javax/xml/namespace/QName 类型具有不同的 Class 对象) [:1.6.0_13] 在 java.lang.Class.getDeclaredMethods(Class.java:1791) [:1.6.0_13] 在 org.jboss.deployment.AnnotatedClassFilter.hasAnnotations(AnnotatedClassFilter.java:

请帮我 ..... ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T08:57:00.730

如果使用 eclipse 创建 EAR/WAR 文件，我们会遇到此问题

很明显，EAR/war 文件中有两个 jar 文件。

使用 WinRAR 打开 EAR/WAR 文件并检查是否存在两个axis.jar 文件。如果是，则删除 jar 文件并重新部署

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T13:58:25.697

抛出异常是因为在您的 Web 应用程序中至少存在一个包含该类的 jar，`javax.xml.namespace.QName`并且该类与 JBoss 的 jar 之一中包含的相同类冲突。

在 JBoss 上部署时，您应该从您的 Web 应用程序中删除该（这些）jar。

包含`javax.xml.namespace.QName`该类的 jar 列表位于[http://www.findjar.com/class/javax/xml/namespace/QName.html](http://www.findjar.com/class/javax/xml/namespace/QName.html)

# php - 网站上过多的 $_SESSION 是否会相互影响/干扰

> ID：10492996
> 
> 赞同：0
> 
> 时间：2012-05-08T05:22:30.007
> 
> 标签：php, mysql, session

我有一个有 3 页的网站，而每个页面都有从数据库中动态显示的文章，并且每个页面都有一个特定的`article_id (int)`.. 为了使每个`article_id`显示的评论非常好，我决定存储`article_id`一会儿`$_SESSION`，将评论插入到D b。

我现在的问题是我将有更多的文章，`$SESSION`对于每篇文章/评论，它们会不会相互干扰或将来会出错？

谢谢

**我需要会话的问题**

[http://www.stackoverflow.com/questions/10486305/variable-returning-0-instead-of-an-actual-value/10486418#comment13552062_10486418](http://www.stackoverflow.com/questions/10486305/variable-returning-0-instead-of-an-actual-value/10486418#comment13552062_10486418)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:57:40.927

在评论表单中，进行隐藏输入。

```
<input type="hidden" name="article_id" value = "<?php echo $row['article_id'];?>"/> 
```

这`$row['article_id']`将来自您用于显示文章的查询。

然后在提交表单时，文章 id 将出现在`$_POST['article_id']`. 然后使用`Insert`查询放置这些值。

在这种方法中，您只需要 1 个会话变量。即`$_SESSION['username']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:59:55.233

虽然它没有回答你的问题，但这是你应该如何处理的。

因为您需要`article_id`同时发表评论，并且正在从数据库中获取文章。在获取时创建一个隐藏的输入字段，例如

```
<input type="hidden" name="article_id" value="<?php //article_id  ?>"/> 
```

然后在提交评论时将此隐藏字段放在评论表单中，您将获得`article_id`.

**更新：**
这是您应该如何决定使用什么以及何时使用。

**a）**当您需要将一些具有值的变量从一个页面发送到另一页面以保持它们之间的状态时。例如，在一个页面中，您已显示大量文章，当用户单击时，`read more...`您希望显示带有评论部分的完整文章。那么您可能应该在这里使用锚标记。例如`<a href="articledetail.php?id=2">Read More...</a>`，在`articledetail.php`页面中，您可以使用 php`$_GET`来获取数组中的 url。在这种情况下，值将是`$_GET['id'] = 1`

**b）**仅当您需要在整个应用程序中应该可以访问的东西而不是为了维护上述状态时才使用会话（这种情况不适用于基于 AJAX 的页面）。例如，您应该使用 session 来检查用户是否登录，或者存储用户信息，如用户 ID、用户名等，因为从逻辑上讲，用户将是浏览您的应用程序的人，您有时可能需要访问大多数页面中与用户相关的一些信息。SESSION 适合这里。

**c)**`<input type="hidden" name="article_id" value="<?php echo $_GET['id']; ?>"/>` 当您想发送一些隐藏值时，应使用隐藏字段，例如通过`$_POST`插入数据库。

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T11:00:07.707

除非你有成百上千的会话变量，或者在会话中存储数百个字节。否则大多数处理器将能够处理负载。

基本上，php 的默认会话处理程序将会话变量存储在每个会话的文件中。并在每次带有会话 cookie 的请求到达时加载它。因此，如果您的会话用于存储一些数据，它将在每个页面上加载。

# windows - 按名称显示进程的命令行

> ID：10492997
> 
> 赞同：3
> 
> 时间：2012-05-08T05:22:41.617
> 
> 标签：windows, cmd

我在 cmd 中使用了以下命令来获取进程命令行。它提供了所有过程的详细信息：

```
WMIC /OUTPUT:C:\ProcessList.txt PROCESS get Caption,Commandline,Processid 
```

我想在记事本中按名称获取特定进程的详细信息。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T06:02:09.367

您可以使用 WHERE 子句。但是你没有费心说出你在寻找什么过程。

如果您知道 processId，您可以使用类似的东西。

```
WMIC /OUTPUT:"C:\ProcessList.txt" process where processid=8196 get Caption,Commandline,Processid 
```

/output 选项的替代方法是简单地重定向输出。如果您知道标题，则可以使用以下内容：

```
>"c:\ProcessList.txt" wmic process where "caption='chrome.exe'" get caption,commmandLine,processId 
```

WHERE 子句使用 SQL 语法 - 字符串用单引号括起来。您可以使用复杂的逻辑和通配符。`%`匹配任何 0 个或多个字符，并匹配`_`任何一个字符。

```
>"c:\ProcessList.txt" wmic process where "caption like 'c%.ex_' and processId<5000" get caption,commandLine,processId 
```