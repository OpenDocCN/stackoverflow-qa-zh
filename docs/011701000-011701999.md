# StackOverflow 问答 11701000-11701999

# objective-c - iOS 开发：在 NSRunLoop 中时 timeIntervalSince1970 不更新

> ID：11701001
> 
> 赞同：2
> 
> 时间：2012-07-28T12:25:33.163
> 
> 标签：objective-c, ios, timer, nsdate

我对iOS开发相当陌生，所以如果这有点愚蠢，我很抱歉。

但是对于我的生活，我无法弄清楚为什么当我在 Objective-C 的循环中调用 (NSTimeInterval)timeIntervalSince1970 时，它会在第一次运行时取回值并且根本不会从那里更新。我在循环中使控制台输出当前时间，并且始终相同：

我用它来打印它：

```
NSLog([NSString stringWithFormat:@"time: %f",(float)[[NSDate date] timeIntervalSince1970]]); 
```

这是控制台输出：

```
 GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Mon Aug 15 16:03:10 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin".Attaching to process 557.
2012-07-28 13:17:01.801 QuitSmoking SideKick[557:207] number of times: 24 this app has been launched
2012-07-28 13:17:01.805 QuitSmoking SideKick[557:207] LOADED VIEW CONTROLLER
2012-07-28 13:17:01.806 QuitSmoking SideKick[557:207] time: 1343477760.000000
2012-07-28 13:17:02.807 QuitSmoking SideKick[557:207] time: 1343477760.000000
2012-07-28 13:17:03.807 QuitSmoking SideKick[557:207] time: 1343477760.000000
2012-07-28 13:17:04.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:05.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:06.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:07.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:08.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:09.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:10.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:11.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:12.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:13.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:14.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:15.807 QuitSmoking SideKick[557:207] time: 1343477888.000000
2012-07-28 13:17:16.807 QuitSmoking SideKick[557:207] time: 1343477888.000000 
```

我的 Iphone 应用程序会计算您自首次安装该应用程序以来节省的金额。这有一个计算函数，该函数在循环的每次迭代中调用，称为 [calulateMoney]，它需要用户从 NSUserDefaults 开始的时间，并将其与当前时间和其他因素相比较。

我使用以下代码开始循环，该代码在 -(void)ViewDidLoad 处运行：

```
 NSRunLoop *runloop = [NSRunLoop currentRunLoop];

timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(calculateMoney) userInfo:nil repeats:YES];

[runloop addTimer:timer forMode:NSRunLoopCommonModes];
[runloop addTimer:timer forMode:UITrackingRunLoopMode]; 
```

最后是我调用来计算金钱的方法（对不起，如果这是错误的术语，我通常是Java）：

```
 //method that performs math on the score against the cost of a smoke and how many seconds have passed.
-(IBAction) calculateMoney
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSString *packSize = [defaults objectForKey:@"packSize"];

    NSString *packCost = [defaults objectForKey:@"packCost"];

    NSString *dailyCigs = [defaults objectForKey:@"dailyCigs"];

    NSDate *timer_date = [NSDate date];

   // float current_time = [[NSDate date] timeIntervalSince1970];

    int size = [packSize intValue];
    int daily = [dailyCigs intValue];
    float cost = [packCost floatValue];

    NSLog([NSString stringWithFormat:@"time: %f",(float)[[NSDate date] timeIntervalSince1970]]);

    //current time doesn't log further than the time it's initialized. RESEARCH NEEDED.
    float seconds =  (float)[[NSDate date] timeIntervalSince1970] -[[defaults objectForKey:@"firstLogTime"]floatValue];

    float calcPart1 = (float) daily/size;
  //  NSLog([NSString stringWithFormat:@"calc 1: %f",calcPart1]);
    float calcPart2 = (float) calcPart1 * cost;
  //  NSLog([NSString stringWithFormat:@"calc 2: %f",calcPart2]);
    float calcPart3 = (float) calcPart2 / (24*60*60);
 //   NSLog([NSString stringWithFormat:@"calc 3: %f",calcPart3]);
    float result = (float) calcPart3 * seconds;
  //  NSLog([NSString stringWithFormat:@"result: %f",result]);

    money.text= [NSString stringWithFormat:@"%f", result];

    [money sizeToFit];

} 
```

我可以提供您可能需要的任何其他信息，此时我正在撕毁我的头发。我只是不明白为什么时间没有更新..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:13:41.120

所以问题是 [[NSDate date] timeIntervalSince1970] 返回一个双精度数，当你将它截断为浮点数时，你会得到这个不正确的值。对所有浮点类型使用双精度，问题就会消失：

```
 NSLog(@"time: %lf", [[NSDate date] timeIntervalSince1970]);

2012-07-28 11:17:42.200 TimeTester[22022:f803] time: 1343488662.200260
2012-07-28 11:17:43.200 TimeTester[22022:f803] time: 1343488663.200198
2012-07-28 11:17:44.200 TimeTester[22022:f803] time: 1343488664.200264
2012-07-28 11:17:45.200 TimeTester[22022:f803] time: 1343488665.200141
2012-07-28 11:17:46.200 TimeTester[22022:f803] time: 1343488666.200046
2012-07-28 11:17:47.199 TimeTester[22022:f803] time: 1343488667.199891
2012-07-28 11:17:48.200 TimeTester[22022:f803] time: 1343488668.200030
2012-07-28 11:17:49.199 TimeTester[22022:f803] time: 1343488669.199775
2012-07-28 11:17:50.199 TimeTester[22022:f803] time: 1343488670.199782 
```

# objective-c - 以照片质量捕获时提高 AVCaptureVideoPreviewLayer 性能

> ID：11701004
> 
> 赞同：1
> 
> 时间：2012-07-28T12:25:57.423
> 
> 标签：objective-c, cocoa-touch, avfoundation, preview, avcapturesession

我正在开发增强现实应用程序，其主要功能是在相机预览上显示叠加层，但我还需要能够保存应用了叠加层的高分辨率照片。为此，我将`AVCaptureSession`预设设置为`AVCaptureSessionPresetPhoto`. 但是 AVPreviewLayer 对于此类会话的平滑度和响应能力比预设的要差得多`AVCaptureSessionPresetHigh`。同时，预置预览中显示的区域`AVCaptureSessionPresetHigh`比 预置小`AVCaptureSessionPresetPhoto`。但这对我来说并不重要。

所以问题是如何从相机中捕获高质量的照片，但具有与视频捕获相同级别的 previewLayer 响应能力？

# algorithm - 实时计算最后一分钟内对服务器的点击次数的有效方法

> ID：11701008
> 
> 赞同：6
> 
> 时间：2012-07-28T12:26:44.293
> 
> 标签：algorithm, data-structures

假设您有一个不断获取 HTTP 请求的服务器。你的老板需要一些统计数据，并要求你计算在任何给定时间最后一分钟内的命中数。

你会使用什么算法和数据结构来实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T12:44:43.203

使用[循环缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)。

每当您必须通过内置的过时来保留一些当前统计信息时，环形缓冲区是一个不错的选择。在您的情况下，您可以通过在循环缓冲区的前面插入新数据包并在缓冲区中保留一分钟前指针，或对请求时间执行二进制搜索，轻松地保持最后一分钟的请求计数.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:34:42.327

一个[动态数组](https://en.wikipedia.org/wiki/Dynamic_array)，其中一个仅附加文件是磁盘上的对应文件。只需将每个命中附加到数组中，以便按时间排序。追加需要摊销的常数时间。您可以进行二分搜索（或插值搜索）以找到最后一分钟开始的点，然后在 O(lg *n* ) （或 (O(lg lg *n* )) 时间内求和到最后。

或者，从末尾进行线性扫描而不是二进制搜索，如果文件变得非常大并且您只需要最后一分钟，这会更快。如果最后一分钟的预期命中次数与时间无关，则这只需要恒定的时间（但向后读取旋转磁盘上的文件可能会很慢）。

如果您没有空间来存储所有旧数据，那么使用双端队列是一个更好的主意。deques 的良好实现在标准库中可用，例如 C++ 和 Python。

# c++ - Qt 线程等待来自 GUI 的输入

> ID：11701009
> 
> 赞同：1
> 
> 时间：2012-07-28T12:26:47.687
> 
> 标签：c++, multithreading, qt

我有一个 QThread 可以进行大量计算（它可以运行几分钟），并且在一个（并且只有一个）点需要用户输入，例如以是/否对话框的形式。当然，不能访问任何 GUI 元素，也不能从线程打开任何对话框（Qt 设计选择），因为它不是主线程。

好吧，有许多明显的解决方案，但我对“推荐”解决方案或“最佳实践”感兴趣。

我的想法：

1.  因为只有一点必须从 GUI 读取输入，所以我可以有两个线程，第二个线程在评估对话框后启动。问题：它使代码不灵活，如果我以后必须引入更多对话框怎么办？不太可能，但可能会发生。
2.  我只有一个线程，并且我在两个方向上都与信号和插槽进行通信（我只有“线程到主线程”形式的信号经验，而不是相反的方向）。所以线程运行，到了必须做出用户决定的地步，所以线程向主线程（也就是 GUI 线程）发出一个信号，主线程在一个槽中捕获它，创建对话框，评估结果，然后向线程发出信号。现在怎么办？线程在槽中捕获信号，但它应该如何影响`run()`正在执行计算的方法？如果`run()`退出，则线程死亡。所以我的`run()`函数中有这样的东西：`while (!can_continue) { sleep(); }`我设置`can_continue`在我捕获从主发送的信号的插槽中。但是，我怀疑这是最简单/最优雅的解决方案。**有没有我应该知道的一般做法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:23:24.187

出现第二个版本的问题是因为[您使用 Qt 线程错误](https://blog.qt.io/blog/2010/06/17/youre-doing-it-wrong/)。

您应该创建`class Worker: public QObject`具有信号的新对象：

```
void stage1Finished();
void stage2Fibished(); 
```

和插槽：

```
void startStage1();
void startStage2(); 
```

然后创建`Qthread`线程对象，推`Worker`送到线程，`startStage1()`与`started()`线程的信号连接，在信号上显示对话框`stage1Finished()`并将*对话框接受信号*与`startStage2()`. `stage2Finished`与螺纹槽连接`exit()`。

然后你就不用在任何地方睡觉了，所有的信号处理都将通过标准机制`Qthread`。然后你只需启动线程开始处理并获得`finished`处理完成的信号。

将信号连接到插槽时，使用`Qt::QueuedConnection`.

# javascript - HTML/JS 导航栏

> ID：11701010
> 
> 赞同：-1
> 
> 时间：2012-07-28T05:36:48.477
> 
> 标签：javascript, html

我目前正在一个网站上工作，我遇到了一个问题，我不确定问题是我的图像还是 html/JS 代码。

我正在制作一个包含 7 个图像的导航菜单，这些图像将具有翻转效果并更改为另一个图像。

这是我的第一张图片的代码。

```
<div id="nav-menu">
 <a href="Culture.html" onmouseover="culture-nav.src='images/nav/over_culture.gif';"onmouseout="culture-nav.src='images/nav/norm_culture.gif';">
  <img border="0" src='images/nav/norm_culture.gif' alt="Culture-nav-button";name="culture_nav"/>
 </a>
</div> 
```

当我在 PS 中创建图像时，我也使用了切片，并为网络设备和 png-24 保存。然而，两个外部图像是 png，内部 5 是 gif。这是问题所在，还是我的代码，我该如何解决？

参考：over_culture.gif(onmouseover) norm_culture.gif(hover/onmouseout)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:43:27.537

这只能使用 css 完成，如下所示：（根据您的图像大小更改宽度和高度）

```
<style>
#nav-menu a{display:block;}
a.culture {width:100px;height:100px; background: url(/images/nav/norm_culture.gif) no-repeat 0 0 }
a.culture:hover{background: url(/images/nav/over_culture.gif) no-repeat 0 0}
</style>
<div id="nav-menu"> 
 <a href="Culture.html" class="culture">Culture</a> 
</div> 
```

# .net - Windows Live Connect SDK 桌面演练

> ID：11701012
> 
> 赞同：0
> 
> 时间：2012-07-28T12:27:11.867
> 
> 标签：.net

我在传统的 Windows 窗体应用程序中开始使用 Windows Live Connect SDK 时遇到了很大的困难。

我想知道：

1.  要安装什么 SDK 包，以及如何添加对我的项目的引用？
2.  一个简单的代码示例，只是如何进行身份验证的最基本示例。

从这里我应该能够解决剩下的问题，在线文档主要用于 Windows 8 Metro 应用程序或 Windows Phone。

希望存在更传统的包装组件吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:28:55.047

你可以在 msdn 上找到有趣的文章

[http://msdn.microsoft.com/en-us/library/hh243641.aspx](http://msdn.microsoft.com/en-us/library/hh243641.aspx)

API 在这里下载

[http://msdn.microsoft.com/en-us/live/ff621310.aspx](http://msdn.microsoft.com/en-us/live/ff621310.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:09:00.180

经过一番钓鱼和得到不好的参考后，我发现了这个页面：

[http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/13566fdc-592d-493e-81c7-40b724136a4e/](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/13566fdc-592d-493e-81c7-40b724136a4e/)

SDK 仅适用于 Windows 8 或 Windows Phone。可以直接通过 REST 服务使用，但显然这是一个更陡峭的学习曲线。

# objective-c - 在 NSMutableArray 中提取和比较 Int

> ID：11701017
> 
> 赞同：0
> 
> 时间：2012-07-28T12:27:39.653
> 
> 标签：objective-c, xcode

我试图以这种方式将数组中的整数与另一个 int 进行比较：

```
if (i == the integers in the array) {

        }else {

        [image1 addSubview:textname];

            } 
```

和...

```
indexDelete = text.tag;

[myIntegers addObject:[NSNumber numberWithInteger:indexDelete - 1]];

NSLog (@"Array: %@", myIntegers); 
```

控制台显示：

```
Array: (
0,
1,
2
) 
```

i 是 for 循环中的一个整数，它不断增加 1

关于我如何做到这一点的任何想法？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:46:09.453

这应该使用 indexOfObject 工作：

```
for (int i ...) {
    NSNumber *numberI = [NSNumber numberWithInt:i];

    // Check if i is not equal to one of the numbers in the array
    if ([myIntegers indexOfObject:numberI] == NSNotFound) {
        // Run set of functions
    }
} 
```

或者一个简单的 for 循环：

```
for (int i ...) {
    BOOL found = NO;

    for (NSNumber *number in myIntegers) {
        if ([number intValue] == i) {
            found = YES;
        }
    }

    if (found == NO) {
        // Run set of functions
    }
} 
```

# php - 如何使用 php cUrl 发布“提交”

> ID：11701026
> 
> 赞同：1
> 
> 时间：2012-07-28T12:28:35.410
> 
> 标签：php, arrays, post, curl, submit

我正在尝试用 php 卷曲帖子
我要提交的页面有这样的代码

```
<input name="fname" type="hidden" value="show">
<input name="method" type="submit" value="Continue"> 
```

我正在尝试模拟此“sumbit”（继续）按钮并使用 php 进行重定向

```
$post= array("method=>Continue")

$ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, $string);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($ch, CURLOPT_COOKIEJAR, '/tmp/cookies.txt');
 curl_setopt($ch, CURLOPT_COOKIEFILE, '/tmp/cookies.txt');
 curl_setopt ($ch, CURLOPT_POST, 1);
 curl_setopt ($ch, CURLOPT_POSTFIELDS, $post);
 curl_setopt($ch, CURLOPT_FOLLOWLOCATION  ,1);
 $h = curl_exec($ch);
echo $h; 
```

$post= 数组（？）中应该有什么。我试过 $post= array(name => method)。不工作..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:30:59.577

您可以将`CURLOPT_POSTFIELDS`选项设置为数组本身：

```
$post = array(
    "method" => "Continue",
    "fname" => "show"
);

curl_setopt ($ch, CURLOPT_POSTFIELDS, $post); 
```

# jquery - 单击一个div后，如何在多个div上停止jquery单击功能？

> ID：11701034
> 
> 赞同：1
> 
> 时间：2012-07-28T12:29:07.853
> 
> 标签：jquery, ajax, scope, onclick

我有几个具有点击功能的 div，基本上可以为您选择的框“投票”。

在有人想选择第二个或第三个盒子之前，这很有效。单击功能与 div 的类相关联，因此我需要在单击一次后禁用单击功能。

```
$('.vote').on('click',function(){
    $(this).append('<div id="voted">Thanks!<form><input type="text" name="comment"></form></div>');
});

<div class="vote">Option A</div>
<div class="vote">Option B</div>
<div class="vote">Option C</div> 
```

我必须使用“一”功能来禁用当前 div 上的单击功能，以便用户可以单击表单输入。问题是其他选项仍然是“可点击的”。因此，用户可以根据需要对所有三个选项进行投票。我怎样才能将其限制为一票？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:38:59.517

虽然提供的两种解决方案都可以工作，但删除事件处理程序是有意义的，因为它无论如何都不会被使用。

我会建议这段代码

```
 $('.vote').on('click.vote', function () {
      $(this).append('<div id="voted">Thanks!<form><input type="text" name="comment"></form></div>');
      $('.vote').off('click.vote');
 }); 
```

使用命名空间事件，您将不会更改其他单击事件处理程序（如果有的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:33:02.670

课程不应以句点开头：

```
<div class="vote">Option A</div>
<div class="vote">Option B</div>
<div class="vote">Option C</div> 
```

使用标志使整个类只能点击一次：

```
var flag = true;

$('.vote').one('click',function(){
    if (flag) {
        $(this).append('<div id="vote">Thanks!<form><input type="text" name="comment"></form></div>');
        flag = false;
    }
}); 
```

[小提琴](http://jsfiddle.net/mbeyQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:34:24.720

```
var clicked=0;

$('.vote').on('click',function(){
    if(clicked==0){
        clicked=1;
            $(this).append('<div id="voted">Thanks!<form><input type="text" name="comment"></form></div>');
    }
}); 
```

使用变量。设置它的值

# symfony - 在 Symfony2 中从视图中获取 html

> ID：11701038
> 
> 赞同：-1
> 
> 时间：2012-07-28T12:29:59.943
> 
> 标签：symfony, twig

我创建了一个动作索引，它提供了一个完整的 HTML

```
public function newAction(Request $request)
{
    return $this->render('AcmeTaskBundle:Default:index.html.twig');  
} 
```

这是一个动态表单构建器，当我单击文本字段按钮时，会生成一个文本字段并相应地更改 html。现在我想在另一个动作中得到这个新的 html

```
public function subAction(Request $request)
{
    $this->container->get('templating')
        ->renderResponse('AcmeTaskBundle:Default:index.html.twig');
} 
```

当我使用这个东西时，它只会渲染旧的 html，但我需要新生成的 html。我该如何渲染这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:09:11.053

要在另一个视图中获取一个视图的完整 HTML，您可以使用[include](http://twig.sensiolabs.org/doc/tags/include.html)。

如果要嵌入整个动作输出，可以使用[render](http://symfony.com/doc/current/quick_tour/the_view.html#embedding-other-controllers)。

# javascript - 谷歌地图在 jquery 模态对话框中不可见

> ID：11701042
> 
> 赞同：0
> 
> 时间：2012-07-28T12:30:07.527
> 
> 标签：javascript, jquery, asp.net-mvc, google-maps, jquery-ui-dialog

我不想在 jquery ui 模式对话框中显示谷歌地图。我打开对话框，但地图不可见。但是它存在于那里只是不可见。

这是页面来源：

```
<div class="dialog ui-dialog-content ui-widget-content" id="photoLocation" style="padding: 0px; background-color: rgb(255, 255, 255); overflow: hidden; width: auto; min-height: 0px; height: 390px; background-position: initial initial; background-repeat: initial initial; " scrolltop="0" scrollleft="0">
    <div id="map" style="width: 300px; height: 300px;"></div>
</div> 
```

似乎 z-index 不知何故是错误的，但我试图在地图 div 上更改它，但这无济于事。当我打开模态对话框时，这是应该显示地图的代码。

```
<script>
    var map;
    var styleArray = [
                      {
                          featureType: "all",
                          stylers: [
                          { visibility: "off" }
                        ]
                      },
                      {
                          featureType: "road",
                          stylers: [
                          { visibility: "on" }
                        ]
                      },
                      {
                          featureType: "administrative",
                          stylers: [
                          { visibility: "on" }
                        ]
                      }
                    ];

    (function () {
        window.onload = function() {
            var mapDiv = document.getElementById('map');

            var latlng = new google.maps.LatLng('44.339565', '-114.960937');
            var options = { styles: styleArray,
                center: latlng,
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                mapTypeControl: false
            };
            map = new google.maps.Map(mapDiv, options);

            var marker = new google.maps.Marker({
                    position: latlng,
                    icon: '../Content/Pointer.png',
                    map: map,
                    draggable: true
                });
        };
    })();
</script>
<div id="map" style="width: 300px; height: 300px;"></div> 
```

![在此处输入图像描述](../Images/4fe3188f27ef17f169cea4dc2ec25e3e.png) 这就是我呈现模态对话框的方式：

```
$(".openDialog").live("click", function (e) {
        e.preventDefault();
        $("<div></div>")
                    .addClass("dialog")
                    .attr("id", $(this).attr("data-dialog-id"))
                    .appendTo("body")
                    .dialog({
                        title: $(this).attr("data-dialog-title"),
                        close: function () { $(this).remove() },
                        modal: true,
                        resizable: false,
                        show: 'fade',
                        width: 460,
                        height: 390,
                        create: function (event, ui) {
                            $(this).parents(".ui-dialog:first").find(".ui-dialog-titlebar").css("display", "none");

                            $(this).parents(".ui-dialog").css("padding", 0);
                            $(this).parents(".ui-dialog").css("border", 4);
                            $(this).parents(".ui-dialog:first").find(".ui-dialog-content").css("padding", 0);

                            $(this).parents(".ui-dialog:first").find(".ui-dialog-content").css("background", "#ffffff");
                            $(this).parents(".ui-dialog:first").find(".ui-dialog-content").css("overflow", "hidden");

                        }

                    })
                    .load(this.href);
    });

@Html.ActionLink("Title", "Method", "Controller", new {imageId = @Model.ItemId}, new {data_dialog_id = "plid", @class = "openDialog button"}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:44:11.607

尝试这个

**HTML：**

```
<div id="mymodal">
    <div id="map" style="width: 300px; height: 300px;"></div>
</div> 
```

**JS：**

```
$(function(){
    var map;
    var elevator;
    var latlng=new google.maps.LatLng('44.339565', '-114.960937');
    var styleArray = [
        {featureType: "all", stylers: [{ visibility: "off" }]},
        {featureType: "road", stylers: [{ visibility: "on" }]},
        {featureType: "administrative", stylers: [{ visibility: "on" }]}
    ];
    var myOptions = {
        styles: styleArray,
        zoom: 6,
        center: latlng,
        mapTypeId: 'terrain'
    };

    map = new google.maps.Map($('#map')[0], myOptions);

    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        icon: 'http://google-maps-icons.googlecode.com/files/walking-tour.png',
        draggable: true
    });

    $('#mymodal').dialog({width:335, height:355});
});​ 
```

[**一个工作示例**](http://jsfiddle.net/X5r8r/524/)。

# c# - C# Byte[] 转 BCD 和 BCD 转 INT

> ID：11701043
> 
> 赞同：5
> 
> 时间：2012-07-28T12:30:15.790
> 
> 标签：c#, arrays, byte, bcd

我有一个由 CashRegister Machine 创建的 Hex 文件。我必须读入这个文件。

文件使用下面详述的格式。它就像套接字数据包。

代码数据：2 字节
PLU 代码数据：7 字节
单价数据：5 字节
数量数据：5 字节
总金额数据：5 字节
PLU 名称数据：18 字节
税率数据：1 字节
长度：24 + 19 字节

*   PLU 代码格式为 BCD
*   单价 1-9999999999 (BCD)
*   数量 1-9999999999（BCD 后三位数字应为十进制）
*   总金额 1-9999999999 (BCD)

我用二进制阅读器读入十六进制文件，然后插入单位价格字节数组。

```
byte[] bytes = { data[21], data[22], data[23], data[24], data[25] }; // BCD Byte Array 
```

这个数组是单价。但是我怎样才能将这个数字转换为十进制。并且信息说对于数量：BCD最后一个数字应该是十进制 - 这是什么意思？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T13:03:19.537

BCD 数字将 0-9 的值编码为 4 位。在打包的 BCD 中（可能是您正在处理的内容），一个字节用于包含两个值 0-9，一个在字节的每个半字节（4 位）中。要转换为 int，您必须进行一些操作。例如，以下代码会将 BCD 字节数组转换为 int，最多可容纳 9 位数字。如果输入的位数超过 9 bcd，请使用 long。

```
// assume byte[] bcds is input
int result = 0;
foreach(byte bcd in bcds) {
    result *= 100;
    result += (10 * (bcd >> 4));
    result += bcd & 0xf;
} 
```

这假设每个字节都存储为大端 BCD，其中最高有效位在字节的最高有效半字节中。这就是在[BCD 的 Wikipedia 页面中](http://en.wikipedia.org/wiki/Binary-coded_decimal)描述的更常见的实现。如果您正在处理 little-endian BCD，则 for 循环中的转换代码将是

```
 result *= 100;
    result += (10 * (bcd & 0xf));
    result += bcd >> 4; 
```

您还需要确保您的数组具有正确的字节顺序，即数组中的第一个字节是否包含最高有效两位数字或最低有效两位数字。例如，数字 123456 使用打包的 BCD 将适合 3 个字节。12 是 byte[0] 还是 byte[2]？如果您的字节序与我的假设不同，则需要调整上面的循环以反转顺序。我假设 12 在 byte[0] 中（大端，最左边的字节中的最高有效数字）。

至于描述为 BCD 和小数的数量，我需要查看实际值才能理解他们在说什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-28T13:20:20.667

每个字节是两个十进制数字，每个半字节一个。如果将字节显示为十六进制，则可以轻松读取数字。

```
0x08 0x27 0x42 0x17 0x75 = 827,421,775 
```

你可以像这样得到高位和低位：

```
int high = currentByte >> 4;
int low = currentByte & 0xF; 
```

将每个字节转换为数字，如下所示：

```
int number = 10 * high + low; 
```

但请记住，每个字节比下一个字节大 100 倍。

数量有 3 位小数，只需将最终数字除以 1,000 即可得到实际值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-31T11:53:34.197

正确代码：

```
// assume byte[] bcds is input
int result = 0;
foreach(byte bcd in bcds) {
    result *= 100;
    result += (10 * (bcd >> 4));
    result += bcd & 0xf;
} 
```

您还可以通过创建公共静态类来创建 byte[] 的自定义扩展：

```
public static class BitConverterExtension
{
    public static UInt64 FromBCDToExtUInt64(this byte[] b, byte[] bcds, uint nBytes, uint startOf)
    {
        UInt64 result = 0;
        uint i = 0;

        for (i = 0; i < nBytes; i++)
        {
            result *= 100;
            result += (UInt64)(10 * (bcds[startOf + i] >> 4));
            result += (UInt64)(bcds[startOf + i] & 0xf);
        }

        return (result);

    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-08T19:43:13.513

我写了这段代码并为我工作：

```
 public uint BCD5ToInt(byte [] bcd)
{
uint outInt=0;

   for (int i = 0; i < bcd.Length; i++)
   {
       int mul = (int)Math.Pow(10,(i*2));
       outInt += (uint) (((bcd[i] & 0xF)) * mul);
       mul = (int)Math.Pow(10, (i * 2) + 1);
       outInt +=(uint)( ((bcd[i] >> 4) ) * mul);
   }

   return outInt;
} 
```

这是反向代码：

```
 // Convert an unsigned integer into 5 bytes of 
    public byte[] IntToBCD5(uint numericvalue, int bytesize = 5)
    {
        byte[] bcd = new byte[bytesize];
        for (int byteNo = 0; byteNo < bytesize; ++byteNo)
            bcd[byteNo] = 0;
        for (int digit = 0; digit < bytesize * 2; ++digit)
        {
            uint hexpart = numericvalue % 10;
            bcd[digit / 2] |= (byte)(hexpart << ((digit % 2) * 4));
            numericvalue /= 10;
        }
        return bcd;
    } 
```

这是测试代码：

```
 public void test()
    {
        uint firstInt = 987654321;
        var array = IntToBCD5(firstInt);
        var outInt = BCD5ToInt(array);
        MessageBox.Show(outInt.ToString());
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-09T10:53:29.580

我的回答可能有点晚了，但这是我解决问题的方法：

1-首先我需要找到数字的长度，例如：3422 -> 4, 100 -> 3

```
public static class NumbersUtility
{
    public static int FindNumberLength(int number)
    {
        return Convert.ToInt32( Math.Floor(Math.Log(number,10))+1);
    }

    public static int FindNumberDivisor(int number)
    {
        return Convert.ToInt32(Math.Pow(10, FindNumberLength(number)-1));
    }

    public static int[] FindNumberElements(int number)
    {
        int[] elements = new int[FindNumberLength(number)];
        int divisor = FindNumberDivisor(number);
        for (int i = 0; i < elements.Length; i++)
        {
            elements[i] = number/divisor;
            number %= divisor;
            divisor /= 10;
        }
        return elements;
    }
} 
```

之后，我将数字拆分为一个数组，这样可以更轻松地遍历和处理数字。但是有一个警告，如果数字是奇数长度，则必须将零添加到数组的开头。

```
 public static byte[] IntToBCD(int[] input, bool isLittleEndian = false)
    {
        byte[] outArr = new byte[Convert.ToInt32(Math.Ceiling((double) input.Length/2))];

        //Handle the case of an odd number in which a zero should be added at the beginning
        if (input.Length%2 != 0)
        {
            //Use a temp array to expand the old one, you can use lists or 
            //anyother datastructure if you wish to
            int[] newInput = new int[input.Length+1];
            Array.Copy(input,0,newInput,1,input.Length);
            newInput[0] = 0;
            input = newInput;
            //Dispose the temp array
            newInput = null;
        }

        for (int i = 0; i < outArr.Length; i++)
        {

            outArr[i]=(byte)(input[i*2]<<4);
            outArr[i]|=(byte)(input[i*2+1]);
        }
        return outArr;
    } 
```

# jquery - Jquery 的宽度和高度计算弄乱了我的响应式 CSS

> ID：11701046
> 
> 赞同：0
> 
> 时间：2012-07-28T12:30:39.490
> 
> 标签：jquery, css

我的网页上有一个 Jquery 滑块。现在滑块中的图像是 1024x500px。现在我使用@media 查询指定，每当视口大小低于 1024 像素宽度时，图像（以及整个滑块元素）都应该使用指定的窗口大小调整大小，如下所示：（注意 sliderContainer 只是一个示例名称）

```
.sliderContainer{
    max-width: 100%;
    height: auto;
    width: auto; /* for ie9 */ 
} 
```

现在调整图像的大小效果很好，但只有在不包含 jquery 滑块源文件的情况下，所以在 jquery 文件的某处有宽度和高度计算器会弄乱调整大小，我相信这是这部分：

```
_setImagesSize      : function() {

            // save ei-slider's width
            this.elWidth    = this.$el.width();

            var _self   = this;

            this.$images.each( function( i ) {

                var $img    = $(this);
                    imgDim  = _self._getImageDim( $img.attr('src') );

                $img.css({
                    width       : imgDim.width,
                    height      : imgDim.height,
                    marginLeft  : imgDim.left,
                    marginTop   : imgDim.top
                });

            });

        }, 
```

Jquery 文件： http: [//lamininbeauty.co.za/js/jquery.eislideshow.js](http://lamininbeauty.co.za/js/jquery.eislideshow.js)

现在这里是我的网页示例，因此您可以看到它的作用。将窗口大小调整到 1024 像素以下以了解我的意思：[我的页面](http://lamininbeauty.co.za/index4.html) 注意：每当我删除 jquery 部分时，图像的大小调整工作在 1024 像素以下，并且图像会随着浏览器窗口调整大小。

现在这里是功能基本标记：

HTML：

```
<div id="ei-slider" class="ei-slider">
                <ul class="ei-slider-large">
                <li>
                    <img src="images/large/sunbed.jpg" alt="Vertical Sunbed TanCan"/>
                    <div class="ei-title">                  
                        <h2>Vertical Sunbed</h2>
                        <h3>(TanCan)</h3>             
                    </div>
                </li>
                <li>
                    <img src="images/large/makeup.jpg" alt="Vertical Sunbed TanCan"/>
                    <div class="ei-title">                  
                        <h2>Vertical Sunbed</h2>
                        <h3>(TanCan)</h3>             
                    </div>
                </li>
                <li>
                    <img src="images/large/sunbed.jpg" alt="Vertical Sunbed TanCan"/>
                    <div class="ei-title">                  
                        <h2>Vertical Sunbed</h2>
                        <h3>(TanCan)</h3>             
                    </div>
                </li>
                <li>
                    <img src="images/large/makeup.jpg" alt="Vertical Sunbed TanCan"/>
                    <div class="ei-title">                  
                        <h2>Vertical Sunbed</h2>
                        <h3>(TanCan)</h3>             
                    </div>
                </li>
                <li>
                    <img src="images/large/sunbed.jpg" alt="Vertical Sunbed TanCan"/>
                    <div class="ei-title">                  
                        <h2>Vertical Sunbed</h2>
                        <h3>(TanCan)</h3>             
                    </div>
                </li>
                <li>
                    <img src="images/large/makeup.jpg" alt="Vertical Sunbed TanCan"/>
                    <div class="ei-title">                  
                        <h2>Vertical Sunbed</h2>
                        <h3>(TanCan)</h3>             
                    </div>
                </li>
                <li>
                    <img src="images/large/makeup.jpg" alt="Vertical Sunbed TanCan"/>
                    <div class="ei-title">                  
                        <h2>Vertical Sunbed</h2>
                        <h3>(TanCan)</h3>             
                    </div>
                </li>
                </ul>
</div> 
```

CSS：

```
.ei-slider{
    position: relative;
    width: 1024px;
    height: 500px;
    margin: 0 auto;
}
.ei-slider-large{
    height: 100%;
    width: 100%;
    position:relative;
    overflow: hidden;
}
.ei-slider-large li{
    position: absolute;
    top: 0px;
    left: 0px;
    overflow: hidden;
    height: 100%;
    width: 100%;
}
.ei-slider-large li img{
    width: 100%;
}

/*The part that governs the resizing below 1024px*/

@media screen and (max-width: 1023px){           
    .ei-slider{
        position: relative;
        max-width: 100%;
        height: auto;
        width: auto; /* for ie9 */
    }   
    .ei-slider-large{
        position: relative;
        max-width: 100%;
        height: auto;
        width: auto; /* for ie9 */
    }
    .ei-slider-large li{
        position: static;
        top: 0px;
        left: 0px;
        overflow: hidden;
        height: 100%;
        width: 100%;
}
    .ei-slider-large li img{
        max-width: 100%;
        height: auto;
        width: auto; /* for ie9 */

    }
} 
```

我怎样才能解决这个问题？

谢谢你！

# c# - 在 C# 中连接一个字符串和一个数字

> ID：11701051
> 
> 赞同：2
> 
> 时间：2012-07-28T12:31:00.683
> 
> 标签：c#, asp.net

我正在使用 SQL 作为后端在 C# 中做一个项目。

我想在 SQL 中插入一个代码，例如 ABC001，其中 ABC 来自 COMPANY 表，并且`001`是`emp_id`从`EMPLOYEE`表中完成的，即最后`ID+1`但以`001,002...999`.

我该怎么做`ID+1`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:36:37.900

不要这样做。这以通常不需要的方式违反了规范化。相反，将这两个字段存储为单独的列，如果您使用它来提供人类可读的标识符，请使用您的映射层来查询复合键而不是存储它。

计算很便宜，并且不构建自己的密钥生成函数的简化是真正的胜利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T12:58:38.430

> 如何在 C# 中连接字符串和数字？

```
string result = string.Format("{0}{1:000}", comp, emp_id+1); 
```

或者

```
string result = comp + (emp_id+1).ToString("000"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:39:23.243

不知道你在追求什么。但如果你正在寻找从格式 ABC001 更新为 ABC002、ABC003 等的字符串，下面的 C# 代码会假设你想增加最后 3 的数字部分原始字符串的字符。（你提到了 0 到 999）

```
 string sourceString = "ABC001";
        string numberPart = sourceString.Substring(sourceString.Length - 3, 3);
        string firstPart = sourceString.Substring(0, sourceString.Length - 3);
        int newNumber = Convert.ToInt32(numberPart);
        newNumber++;
        string resut = firstPart + String.Format("{0:000}", newNumber); 
```

**编辑：**根据评论，

如果您正在寻找一种以 ABC001 的形式连接 ABC 和 1 的方法，则可以这样做

```
string firstPart="ABC";
int number=1;
string result=firstPart + String.Format("{0:000}", number); 
```

# jquery - jQuery 从 XML 加载图像

> ID：11701054
> 
> 赞同：0
> 
> 时间：2012-07-28T12:32:11.267
> 
> 标签：jquery, xml, image, flash, load

我不想问你，prettyphoto 可以从 xml 文件中加载图像吗？

这是我在 html 文件中的函数：

```
 jQuery(window).ready(function($) {
$.fn.prettyPhoto();
});

function openLightbox(path) {

api_images=[path,'zdjecia/galeria/kategoria1/duze/image2.jpg','zdjecia/galeria/kategoria1/duze/image3.jpg'];
$.prettyPhoto.open(api_images);

} 
```

这是一个 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<images>
<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image1.jpg" 
lightbox="Zdjecia/Galeria/Kategoria1/Duze/image1.jpg"/>

<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image2.jpg" lightbox="Zdjecia/Galeria/Kategoria1/Duze/image2.jpg"/>

<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image3.jpg" lightbox="Zdjecia/Galeria/Kategoria1/Duze/image3.jpg"/>

<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image4.jpg" lightbox="Zdjecia/Galeria/Kategoria1/Duze/image4.jpg"/>

<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image5.jpg" lightbox="Zdjecia/Galeria/Kategoria1/Duze/image5.jpg"/>

<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image6.jpg" lightbox="Zdjecia/Galeria/Kategoria1/Duze/image6.jpg"/>

</images> 
```

是否有可能获得灯箱变种？谁能告诉我我该怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:02:25.553

[http://jsfiddle.net/jdLhR/4/](http://jsfiddle.net/jdLhR/4/)

检查这个小提琴......它将从 xml 文件加载图像。希望能帮助到你。

# android - 如何从以编程方式创建的微调器中获取位置

> ID：11701055
> 
> 赞同：1
> 
> 时间：2012-07-28T12:32:13.170
> 
> 标签：android, spinner

当用户在编辑文本中输入数字时，我的应用程序会创建并显示那么多微调器。然后，用户将从每个微调器中选择一个项目，然后单击保存按钮。我在互联网上查看过，但无法找到从微调器中检索位置的方法。这是我创建微调器的方法：

```
//numStockTanks is the number of spinners to be created
numStockTanks = Integer.parseInt(numOfStockTanks.getText().toString());             
    // creates all the fields
    for(int i = 1; i <= numStockTanks; i++) {
        TableRow tR = new TableRow(this);
        // creates the textView
        tV1 = new TextView(this);
        tV1.setText("Stock Tank #" + i + " size: ");

        // add spinner to row
        spinner = new Spinner(this);
        ArrayAdapter<CharSequence> adapterStockTankSize2 = ArrayAdapter.createFromResource(
                this, R.array.StockTankSize, android.R.layout.simple_spinner_item);
        adapterStockTankSize2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapterStockTankSize2);
        spinner.setId(1000 + i);

        // add the TextView and the editText to the new TableRow
        tR.addView(tV1);
        tR.addView(spinner);

        // add the TableRow to the TableLayout
        tL.addView(tR,new TableLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));    
    } // end for statement
} // end getNumberCreateSpinner () 
```

我尝试了几种不同的方法来获得微调器的位置，但我似乎无法弄清楚。这是我目前拥有的：

```
ArrayList<Integer> mArraySpinner = new ArrayList<Integer>();
for (int i = 0; i < numStockTanks; i++) {
           spinner = (Spinner) findViewById(1000 + i);
           if (spinner.getSelectedItemPosition() == 1) {
               mArraySpinner.add(100);
           } else if (spinner.getSelectedItemPosition() == 2) {
               mArraySpinner.add(200);
           } else if (spinner.getSelectedItemPosition() == 3) {
               mArraySpinner.add(210);
          } else if (spinner.getSelectedItemPosition() == 4) {
               mArraySpinner.add(295);
           } else if (spinner.getSelectedItemPosition() == 5) {
               mArraySpinner.add(400);
          } else mArraySpinner.add(0);
    } // end for statement 
```

谢谢你的帮助

编辑：在第一个答案后更新为我的最新尝试

编辑编辑：当我调试“spinner = (Spinner) findViewById(1000 + i);”行时 它说 null 所以我知道我没有正确指向我的微调器这是我需要帮助的

编辑：凹凸

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:38:53.970

您正在使用`1000++`微调器 ID。当你试图让微调器拥有你检查它时`100++`。

请更新您在代码中编写的 if 条件。更改`100`为`1000`

我已更改并将示例代码放在您的代码中。

```
spinner = (Spinner) findViewById(1000 + i);
       if (spinner.getId().equals("1000")) {
           mArraySpinner.add(spinner.getSelectedItemPosition());
       } 
       else if(....){....} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:49:53.637

我会`onItemSelectedListener`在您创建微调器时设置一个（在创建微调器的循环内），并使用它将值设置为一个类字段的数组。

```
mArraySpinner = new Array<Integer>[numStockTanks];
for(int i = 1; i <= numStockTanks; i++) { 

      // code to set spinner adapter, etc.

spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onNothingSelected(AdapterView<?> parent) {
    }
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
       mArraySpinner[i] = spinner.getSelectedItemPosition();
    }
}); 
```

# ios - ios外部显示以编程方式

> ID：11701058
> 
> 赞同：1
> 
> 时间：2012-07-28T12:32:34.567
> 
> 标签：ios, xcode4.2, external-display

我正在尝试在我的 iOS 应用程序上支持外部显示而不使用任何 .xib 文件。

现在我的代码包含这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ 
    if ([[UIScreen screens] count] > 1){
        externalScreen = [[UIScreen screens] objectAtIndex:1];
        UIScreenMode *current = [[[[UIScreen screens]objectAtIndex:1]availableModes]objectAtIndex:0];
        externalScreen.currentMode = current;
        externalWindow = [[UIWindow alloc] initWithFrame:[externalScreen bounds]];
        externalWindow.screen = externalScreen;
        externalWindow.clipsToBounds = YES;

        extController = [[ExternalController alloc] init];
        [externalWindow addSubview:extController.view];
        [externalWindow makeKeyAndVisible];
    }
    self.window = [[UIWindow alloc] initWithFrame:[[[UIScreen screens] objectAtIndex:0] bounds]];

    mainController = [[ViewController alloc] init];
    [self.window addSubview:mainController.view];
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
} 
```

当我运行它时，TV Out 屏幕将立即关闭。如果我评论这一行：

```
//self.window = [[UIWindow alloc] initWithFrame:[[[UIScreen screens] objectAtIndex:0] bounds]]; 
```

TV Out 屏幕将正常工作，但当然我在模拟器屏幕上看不到任何内容。

有谁知道我应该怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:45:36.620

我可以建议您尝试 GITHub 上的示例源代码 TVOut - [https://github.com/JohnGoodstadt/TVOut](https://github.com/JohnGoodstadt/TVOut)。

它使用与您类似的代码，但打包在一个类中，您可以复制并从您自己的代码中调用它。

它应该可以解决您的显示问题。顺便说一句，我不会早在“didFinishLaunchingWithOptions”中执行您的代码，而是稍后在第一个视图控制器中执行您的代码。

# ruby-on-rails - 在 Net::HTTP.get_response.body 中使用非拉丁（西里尔文）符号 RoR ASCII-8bit 到 UTF-8

> ID：11701062
> 
> 赞同：0
> 
> 时间：2012-07-28T12:33:29.550
> 
> 标签：ruby-on-rails, 8-bit

我需要通过 Net::HTTP 获取一些数据，我收到 ASCII-8bit 的响应后效果很好。问题是如何将其编码为 utf8 并保存所有非拉丁符号？

随着`@content.encode('utf-8', 'binary', :invalid => :replace, :undef => :replace, :replace => '')`我失去所有西里尔符号

随着`@content.encode('utf-8', 'binary')`我得到`"\xCB" from ASCII-8BIT to UTF-8`错误

我得到 ������ `@content.force_encoding("UTF-8)`而不是西里尔符号

我无法通过谷歌搜索找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:02:28.070

问题解决了

```
begin
    cleaned = response.body.dup.force_encoding('UTF-8')
    unless cleaned.valid_encoding?
       cleaned = response.body.encode( 'UTF-8', 'Windows-1251' )
    end
    content = cleaned
rescue EncodingError
    content.encode!( 'UTF-8', invalid: :replace, undef: :replace )
end 
```

[这里有更完整的数据](http://landrina.ru/development/ror-encoding-troubes-with-cyrillic/)

# c# - CIL 是汇编语言而 JIT 是汇编程序吗

> ID：11701063
> 
> 赞同：9
> 
> 时间：2012-07-28T12:33:30.330
> 
> 标签：c#, .net, assembly, cil

即时编译器是否`(JIT)`真的将程序中的每个通用中间语言`(CIL)` 指令映射到底层处理器的`opcodes`？

如果是这样**，我们可以称 CIL 为汇编语言而 JIT 为汇编器**

注意：维基百科在其汇编语言列表中没有将 CIL 列为[汇编语言](http://en.wikipedia.org/wiki/List_of_programming_languages_by_type#Assembly_languages)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T13:43:11.633

这个问题都是关于定义的，所以让我们正确定义这些术语。一、[汇编语言](http://en.wikipedia.org/wiki/Assembly_language)：

> 汇编语言是用于计算机、微处理器、微控制器和其他可编程设备的低级编程语言，其中每条语句对应于单个机器语言指令。与大多数高级编程语言相比，汇编语言特定于特定的计算机体系结构，后者通常可移植到多个系统。

现在，[CIL](http://en.wikipedia.org/wiki/Common_Intermediate_Language)：

> 通用中间语言是由通用语言基础结构 (CLI) 规范定义的最低级别的人类可读编程语言，由 .NET Framework 和 Mono 使用。以 CLI 兼容的运行时环境为目标的语言编译为 CIL，CIL 被组装成具有字节码样式格式的目标代码。

好吧，这部分在技术上是不正确的：例如 C# 编译器直接编译为字节码，它不通过 CIL（人类可读语言），但理论上，我们可以想象这是正在发生的事情。

有了这两个定义，CIL*就是*一种汇编语言，因为其中的每条语句都被编译成一条字节码指令。没有可以直接执行该字节码的物理计算机这一事实并不重要。

该定义说，每种汇编语言都是“特定于某种计算机体系结构的”。在这种情况下，体系结构是 CLR 虚拟机。

* * *

关于 JIT：不能将 JIT 编译器视为汇编程序：它不会将人类可读形式 1:1 转换为字节码，`ilasm`而是这样做的。

JIT 编译器是一个优化*编译器*，它可以从字节码编译为本机机器码（对于它运行的任何 ISA/CPU），同时进行优化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T15:54:16.513

汇编由特定处理器的机器代码指令的助记符组成。使核心执行代码的 1 和 0 的直接表示，但以文本形式编写以方便人类使用。这与 CIL 非常不同：

*   你不能购买执行 CIL 的处理器
*   CIL 不针对特定处理器，但抖动会
*   CIL 假定基于堆栈的执行模型，处理器主要基于寄存器
*   CIL 代码从其原始形式进行了优化
*   没有 CIL 指令到处理器指令的一对一翻译

最后一个要点是关键，使 CIL 与字节码截然不同的设计决策是 CIL 指令是无类型的。只有一条 ADD 指令，但处理器有很多版本。采用 byte、short、int、long、float 和 double 操作数的特定操作数。需要，因为处理器内核的不同部分用于执行添加。抖动会根据它从以前的 CIL 指令中推断出的操作数类型来选择正确的。

就像 C# 语言中的 + 运算符一样，它也可以处理不同的操作数类型。这确实使 CIL 中的 L 很重要，它是一种语言。一个简单的，但它只是简单地帮助为它编写一个抖动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-27T14:16:16.947

这条线实际上非常模糊......我所看到的反对调用`CIL`“汇编语言”的论点几乎同样适用于`x86`/`x86-64`在实践中。

几十年来（如果有的话），英特尔和 AMD 还没有制造出执行汇编指令的处理器，因此即使是所谓的“本机”代码也与在`x86`/中指定字节码的虚拟机上运行没有太大区别`x86-64`。

`x86`/`x86-64`是典型开发人员可以访问的最低级别的东西，所以如果我们不得不放下脚并在我们的生态系统中将某些东西称为“汇编语言”，那将获胜，因为`CIL`字节码最终需要`x86`/`x86-64`指令才能运行在该系列的处理器上，有一个非常有力的理由证明它确实“感觉”不应该算数。

所以**从某种意义上说**，也许两者都不能被认为是“汇编语言”。当提到`x86`/`x86-64`处理器时，我们几乎从不提到执行`x86`/`x86-64`而不将其转换为其他东西的处理器（即，无论微码做什么）。

再加上另一个问题，`x86`处理器`x86-64`执行给定指令序列的方式可以简单地通过更新微码来改变。快速搜索一下，Linux 甚至可以让您自己[在软件中](https://wiki.archlinux.org/index.php/microcode)轻松做到这一点！

所以我想，这里有一些标准可以证明将它们分为两个不同的类别：

1.  当前所有运行`CIL`字节码的机器都用软件实现是否重要？
2.  在软件中被指示这样做之后，相同的硬件可以以不同的方式解释相同`x86`/指令是否重要？`x86-64`
3.  我们目前没有办法绕过微码并直接向`x86`/`x86-64`处理器的物理单元发出命令，这有关系吗？

因此，关于“是`CIL`汇编语言”的问题，我能给出的最佳答案是“它取决于”（对于科学家）和“几乎”（对于工程师）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T12:39:28.943

CIL与其说是汇编语言，不如说是一种[字节码。](http://en.wikipedia.org/wiki/Bytecode)特别是，它不是人类可读的文本形式，不像汇编语言（可能 CIL 也定义了字节码文件的格式）。

MSIL JIT 是该字节码的[虚拟机实现。](http://en.wikipedia.org/wiki/Virtual_machine)实现（来自 Microsoft 或[Mono](http://mono-project.com/)）如何将 CIL 转换为机器代码是一个实现细节，这对您来说并不重要（并且鉴于 Microsoft VM 可能是专有的，因此不会告诉您它是如何完成的）。我认为 Mono（CIL 的免费软件实现）正在使用[LLVM](http://llvm.org/)，因此可能不会一次翻译每个字节码，但可能会翻译整个方法或函数。

# javascript - 在 Javascript Infovis Toolkit Treemap 中显示特定深度的标签

> ID：11701064
> 
> 赞同：2
> 
> 时间：2012-07-28T12:33:45.767
> 
> 标签：javascript, treemap, infovis

我正在[使用 Javascript Infovis Toolkit](http://thejit.org/static/v20/Docs/files/Visualizations/Treemap-js.html)创建一个具有 4 个级别（Olympics > Sport > Event > Medals）的树形图，并且我想一次显示三个 - 但只显示 2/3 的标签。

（例如：在顶视图中，我会显示所有不同的运动，以及运动中的所有事件，但不会显示事件的标签，因为太多了。）

我正在使用以下代码来尝试隐藏关卡，但是当我放大时它并没有取消隐藏它们。

```
onPlaceLabel: function(domElement, node){
    if (node._depth == 0) {console.dir(node);}
        if (node._depth > 1) {
            domElement.style.display = 'none';
        } else {
            domElement.style.display = '';          
        }
} 
```

当您放大/缩小时，_depth 似乎没有改变——它是每个节点的静态属性。

我也许可以编写一个条件，根据设置为父节点的深度**当前节点来更改要显示的深度级别。**有谁知道我在哪里可以找到那个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:29:07.393

弄清楚了！onBeforeComputer(); 方法在计算所有内容之前对所选节点执行操作。见下面的代码：

```
//sets the selected node depth as the .currentParentDepth
onBeforeCompute : function(node){
    if (typeof this.currentParentDepth === "undefined") {
        this.currentParentDepth = 0;
    }
    else {
        this.currentParentDepth = node._depth; 
    }
},

onPlaceLabel: function(domElement, node){
    if (this.currentParentDepth == 0) {
        if (node._depth > 1) {
            domElement.style.display = 'none';
        } else {
            domElement.style.display = '';          
        }
    } else if (this.currentParentDepth == 1) {
        if (node._depth > 2) {
            domElement.style.display = 'none';
        } else {
            domElement.style.display = '';          
        }           
    }
} 
```

# php - Zend 框架 notEmpty 验证器 setRequired

> ID：11701072
> 
> 赞同：4
> 
> 时间：2012-07-28T12:35:05.870
> 
> 标签：php, zend-framework, zend-form, zend-form-element

我看过其他[问题](https://stackoverflow.com/questions/3871460/zend-form-setrequiredtrue-or-addvalidatornotempty)/谷歌搜索了这个。我的问题是，当我提交带有`notEmpty`验证器的空文本框的表单时，它不会触发错误。

首先，我想看看我是否理解 和 之间的`notEmpty`区别`setRequired`。据我了解，`notEmpty`如果提交了元素并且值为空，则验证器会出错。也就是说，如果 POST 数据中不存在条目（对于表单），则如果该元素不是*必需*的，则不会生成错误。就像它只在元素被*设置*时运行。除非另有说明，否则该`setRequired`方法将自动`notEmpty`在幕后添加验证器。这确保了元素的条目必须存在并且不能为空。正确的？

现在，我尝试在我添加`notEmpty`验证器的表单中使用此逻辑，如下所示：

```
$username = new Zend_Form_Element_Text('txtUsername');
$username->addValidator(new Zend_Validate_NotEmpty(), true); 
```

其他文本字段也是如此。如果我在不输入值的情况下提交表单，我的 POST 数据如下所示：

```
(
    [txtUsername] => 
    [txtPassword] => 
    [txtRepeatPassword] => 
) 
```

但是，`isValid`仍然评估为`true`并且不会生成错误消息。为什么？由于元素在 POST 数据中有一个条目，验证器不应该`notEmpty`确定值是空的吗？如果我使用`setRequired(true)`，它会按我的意愿工作。当值为空字符串时，它确定用户名不为空，这让我感到很困惑。:-)

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T13:04:20.667

我同意这有点令人困惑。原因是所有表单元素都有一个`allowEmpty`标志（默认为 true），如果值为空则跳过验证。它以这种方式工作，因为否则，将验证器添加到可选元素将是一个真正的痛苦，例如：

```
$dateOfBirth = new Zend_Form_Element_Text('dob');
$dateOfBirth->setLabel('Date of birth (optional)');
$dateOfBirth->addValidator(new Zend_Validate_Date());
$form->addElement($dateOfBirth); 
```

如果用户选择不输入他们的出生日期，这将始终无法验证，因为 '' 不是有效日期。默认情况下，使用该`allowEmpty`标志，它可以按您预期的方式工作（它只验证输入日期的日期）。

调用`setRequired(true)`添加了一个`NotEmpty`验证器，但它也将`allowEmpty`标志设置为 false。我建议你坚持这种方法。或者，您也可以通过设置标志来工作：

```
$username = new Zend_Form_Element_Text('txtUsername');
$username->addValidator(new Zend_Validate_NotEmpty());
$username->setAllowEmpty(false); 
```

# c# - 如何在 C# 中调用泛型 T 类型方法

> ID：11701078
> 
> 赞同：0
> 
> 时间：2012-07-28T12:37:33.283
> 
> 标签：c#

我有方法

```
public static T GetUrlDataEntity<T>(){} 
```

我想在我的另一个类中调用这个方法我如何在 c# 中调用这个方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T12:38:47.757

您必须指定类型参数。例如：

```
string x = TypeDeclaringMethod.GetUrlDataEntity<string>(); 
```

有关泛型方法的[MSDN 文档](http://msdn.microsoft.com/en-us/library/twcad0zb.aspx)有更多详细信息。

请注意，在这种情况下，您*不能*使用类型推断，因为该方法没有使用`T`. 如果您的方法是：

```
public static T DoSomething<T>(T input) 
```

那么你就可以让编译器推断类型参数，例如

```
int x = 10;
int y = DoSomething(x); 
```

# android - Android 实现按钮回调的“最佳”方式（XML onClick、新 onClickListener、实现 onClickListener、为该按钮单独类）

> ID：11701086
> 
> 赞同：-1
> 
> 时间：2012-07-28T12:38:49.917
> 
> 标签：android, coding-style, android-fragments, android-activity

在您认为这是一项民意调查之前，请完整阅读此内容，我正在寻找信息和参考资料以做出明智的决定，而不是试图确定哪个最受欢迎（@PéterVarga）

这是我在这里的第一个问题，我终于注册了，因为我已经出现了很多次，我觉得我实际上让自己变得更糟。这个问题是非常开放的，是的，因为我想要利弊。我已经尝试过拥抱 Android 以及它是如何做这些事情（XML、活动、破坏活动）的东西，通常我是一个 WxWidgets 人，所以这感觉非常不同。我读得越多，它就越有意义。但是有一个问题，这个问题，它不仅适用于按钮，而且适用于所有回调。到目前为止，Android 教程和指南似乎（大部分）更多是关于让某些东西快速运行，正如我所说，我寻求拥抱 Android，而不是为它制作另一个 tat 应用程序。

因此，正如标题所示，我为此使用了按钮，但是是的，任何回调。

第一个用例“问题”考虑 2 个片段，A 和 B，以及 2 个活动，X 和 Y。现在假设 A 包含一个列表，B 包含该列表中项目的详细信息（通用设置）如果在横向模式活动X将在肖像模式下显示两种片段A和B，如果没有选择（以及通过任何方式存储的选择（随意提及潜在/体面的方式）片段A将在选择某物时显示A a将显示​​A（或者如果选择了某些东西）片段 B 将由 Activity Y 显示。如果它处于横向模式，则 Activity Y 将调用它的“finish（）”方法，我理解它开始破坏它。我可以凭经验验证这一点，但这意味着我的结论是从行为中推断出来的，而不是（尽管我可能正确推断）谷歌的实际意图。

如果我使用XML的onClick方法，B有时会得到那个回调，如果它完成了，它怎么会，它会转到A吗？我应该将逻辑添加到片段中吗？（通过内联一个新的onClickListener）我是否应该做我可能在WxWidgets中做的事情，在那里我为基本上所有的东西扩展了一个类，并有我自己的按钮类，它实现了onClickListener，因此可以有它自己的onClick方法？

如果它对我的作业有帮助，我了解到我可能不应该尝试捕获配置更改事件，我接受我的 Activies 将被关闭并重新启动，所以我可以在 onCreate 方法中检查方向，因为对于活动不会改变方向。这导致了我的最后一个问题，Bundle 是唯一的方法吗？我找到了另一个，但它已被弃用，仅用于配置更改。

谢谢，对不起，它很长，是的，相当广泛。我真的找不到任何地方对此进行辩论。（在今天的帖子中到达了 O'Reilly Android 书籍，我怀疑它们（O'Reilly 书籍）在这里很受欢迎，如果你知道的话，请给我一个页面参考，或者甚至这都叫什么。Wrox Android 4 Dev。书也到了，我有这个 PDF 格式，为了表示同意，再次购买，主题标题，这是第 4 版（或只有 4 版），所以我还没有阅读片段部分，但我怀疑这会带来很多启示)

顺便说一句，我可以在旁边看到类似的问题，当我点击这个帖子时，我一直在阅读它们，如果我这样做了，那是因为我仍然认为这是一个问题。

编辑1：（编辑是更新而不是澄清，基本上是新部分）对于阅读此内容的任何人（1在未回答的Q的第250页中，每页50个......）我会发表我的想法，所以你可以为了得到答案（如果我没有），我决定尝试这样的事情：

```
this.MemberOfClass = 0;
button.setOnClickListener(new View.OnClickListener() {            
    public void onClick(View v) {
        MemberOfClass++;        
        MethodOfClass();
    }
}); 
```

其中（我使用“this”来说明 MemberOfClass 的意思）MethodOfClass 不是 OnClickListener 的方法，而是发生在其中的类的方法（不确定我是喜欢还是讨厌 Java 的作用域），这创建了一种每个按钮都有多个按钮的方法片段（或活动），可以根据代码的确切位置精确控制调用哪个 MethodOfClass（活动 X 或 Y，以我自己的示例为例）。

在一个真正重视微小内存占用和在低规格系统软件上很好使用的平台上创建一个对象似乎非常浪费，但我还没有找到更好的方法，因此提出了这个问题。

编辑 2：我正在研究如何为每个按钮创建一个单独的按钮类，同时仍然保持 XML 部分整洁（使用按钮原语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:27:05.087

看，当您使用回调方法名称指定 XML onClick 属性时，它会尝试在当前保存您的片段的上下文中找到指定的方法。在这种情况下，最好将视图描述（XML 布局）与功能逻辑分开。所以我个人喜欢为每个片段实现不同的点击监听器（无论你将它们声明为匿名类还是单独的类）。

您可以为每个按钮创建自己的类，但恐怕从面向对象的范例 POV 来看这不是一个好主意。通常创建新类的原因是泛化一些常用的实体（由多个实例组成）。在所讨论的情况下，您的按钮可能仅特定于某些操作，因此没有必要为每种操作类型创建新类。

还有一种方法可以确定哪个 Activity 调用了您的侦听器的 onClick 方法。onClick() 内部的某个地方只需调用提供的视图参数的 view.getContext() 并使用 instanceof 运算符检查它的类，如果它是 ActivityA 实例或 ActivityB 实例。

此外，可能建议您尝试遵守 Java 编码约定，不要以大写开头命名类字段和方法。它只是帮助其他人更快、更清晰地阅读和理解你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T16:31:36.533

`Anonymous Class`是要走的路，因为大多数情况下你只需要`one instance`所以创建一个单独的类并实现 OnClickListener 是一种浪费，作为一个好习惯，我喜欢在 a 中创建这个匿名对象，`method`因为它更容易阅读`createRequestItemPositiveListner()`而不是在创建`Dialog`这样的方法中：

```
dialogBuilder.setPositiveButton("Yes",new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialogInterface, int i) {
            //do request item things...
        }
    }); 
```

我喜欢这个：

```
dialogBuilder.setPositiveButton("Yes", createRequestItemPositiveListener()); 
```

更易于阅读，如果您想查找在对话框的“PositiveButton”中完成的代码，则该方法比在对话框创建中某处的一段代码中更容易，如果`request item things`需要至少 30 个，情况会变得更糟-50 行代码，对话框的创建会变得一团糟，我建议你阅读`Clean Code`本书以`Uncle-Bob (Robert C. Martin)`获得更好的理解。

# opengl - glXCreateContextAttribsARB：fb 配置兼容性

> ID：11701088
> 
> 赞同：0
> 
> 时间：2012-07-28T12:38:56.310
> 
> 标签：opengl, configuration, framebuffer, openglcontext

OpenGL 文档指出

> 如果 glXCreateContextAttribsARB 成功，它将上下文初始化为 OpenGL 规范定义的初始状态，并返回一个句柄。此句柄可用于渲染到与 兼容的任何 GLX 表面（窗口、像素图或 pbuffer）`<config>`，但受 OpenGL API 版本的上下文施加的约束。

如何确定不同帧缓冲区配置的兼容性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:42:07.080

> 如何确定不同帧缓冲区配置的兼容性？

通过使用该帧缓冲区配置创建可绘制对象（窗口、像素图、pbuffer）。这不是您查询的内容，而是您在可绘制对象创建时定义的。

# sql-server - 了解 MVC 和 SQL Server

> ID：11701095
> 
> 赞同：0
> 
> 时间：2012-07-28T12:39:30.740
> 
> 标签：sql-server, asp.net-mvc

我正在关注一些教程，但我完全不了解 MVC/SQL Server 的连接方式。

我正在阅读一个教程，该人提到以下代码会自动为我创建一个数据库：

```
<connectionStrings>
   <add name="LibraryContext" 
        connectionString="Data Source = |DataDirectory|Library.sdf" providerName="System.Data.SqlServerCe.4.0"/> 
```

你能简单详细地告诉我上面的代码做了什么吗？什么`|DataDirectory|Library.sdf`和什么 SQL Server CE..等等......所有这些......请和谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T12:42:44.197

*   SQL Server CE 是 SQL Server 的**精简版**——基本上你的整个数据库在一个文件（`.sdf`文件）中，并且在一组 DLL 中访问它的代码——不需要服务器安装。

    它适用于大多数情况，但有局限性（没有存储过程等） - [ErikEJ 有一个很好的比较页面，将 SQL Server CE 与 Express 进行比较](http://erikej.blogspot.ch/2011/01/comparison-of-sql-server-compact-4-and.html)

*   连接字符串的`|DataDirectory|`一部分是指`App_Data`在您的网站中创建的目录

    所以最后，数据库连接到一个文件

    ```
    (your web site root)\App_Data\Library.sdf 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T12:47:00.923

MVC 实际上是一个分层的表示层——它可以单独运行，也可以与任何后端数据库一起运行。

您在上面发布的“代码”不是代码 - 它是从配置文件（在您的情况下为 web.config）读取的配置信息。配置文件用于存储和轻松更改应用程序中的设置。

连接字符串实际上只是一个包含数据库凭据的字符串。数据库需要已经存在于某个地方（除非您决定实现代码优先的 ORM，如实体框架代码优先）。在您的示例中，您尝试连接到现有的 SQL Server CE（精简版）文件。您需要在 App_Data 目录中创建一个 SQL Server CE 文件。恐怕我只使用完整的“服务器”版本的 SQL Server，所以我帮不了你，除非我查一下！

一旦您的数据库存在，您就可以通过许多不同的方式连接到它。我目前的偏好是实体框架，尽管从历史上看它是通过 ADO.Net。我会谷歌“Hello World SQL Server”，它应该可以帮助你找到一个关于从哪里开始的不错的教程。

# algorithm - 过滤和分组地质点的算法

> ID：11701096
> 
> 赞同：0
> 
> 时间：2012-07-28T12:39:35.017
> 
> 标签：algorithm, cluster-analysis

我有一些地质点，分布如下： ![初始点](../Images/384db61f424d230652f9bb1cd2fc9340.png)

我需要一种算法来过滤断断续续的/单点并将相邻的点分组。
我需要算法从以上几点为我创建类似以下的内容
![应用算法后](../Images/95fe8d6dfc7f32833e0ebcf84b5daee4.png)

因此，在对第一个图应用算法之后，我需要生成三个点集合，每个点都称为临界区。（如图2）

我知道一些算法，包括 Graph Partition、Convex Hull、Polygon Partitioning 算法，但通常没有人适合这个问题。

你知道这个问题的任何指定算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:41:17.880

**对我来说，这看起来像是基于密度的聚类**的典型示例。

在 Wikipedia 上查找 DBSCAN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:04:52.697

要从任意数量的点创建 3 个聚类或质心，您可以使用 K-means 方法。您可能会在不删除任何异常值的情况下获得很好的解决方案。

[https://github.com/reddavis/K-Means](https://github.com/reddavis/K-Means)

如果要删除异常值，则需要迭代删除每个点并重新计算 K-Means，以查看哪些点最具影响力并产生最多的错误。当心。这部分很困难，因为删除点的顺序与点本身一样重要。库克距离背后的最小二乘回归概念可能会激发您的思考。

[http://en.wikipedia.org/wiki/Cook's_distance](http://en.wikipedia.org/wiki/Cook%27s_distance)

祝你好运！如果您还有其他问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:54:54.213

您可能想要计算[最小生成树](http://www.cs.sunysb.edu/~algorith/files/minimum-spanning-tree.shtml)并删除其最长边，以便将您的集合拆分为集群。

# opengl - 表示真假的 GLboolean 值是什么？

> ID：11701099
> 
> 赞同：1
> 
> 时间：2012-07-28T12:40:39.143
> 
> 标签：opengl, haskell

我正在使用 Haskell 的 OpenGL.Raw 库，我希望将 GLboolean 值用于 true 和 false，但它们似乎没有在库中预定义。我如何自己定义这些价值观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:19:30.277

在 OpenGL 库中用于此的两个函数是（在内部模块 GLBoolean 中）

```
marshalGLboolean :: Num a => Bool -> a
marshalGLboolean x = fromIntegral $ case x of
   False -> gl_FALSE
   True -> gl_TRUE

unmarshalGLboolean :: (Eq a, Num a) => a -> Bool
unmarshalGLboolean = (/= fromIntegral gl_FALSE) 
```

`GLBoolean`是 Num 类型类的一个实例，但是您需要`Bool`在使用 OpenGL 函数的每个地方转换正常值。如果您不想在每个地方都转换它，那么您可以使用以下

```
gTrue, gFalse :: Num a => a
gTrue = fromIntegral gl_TRUE
gFalse = fromIntegral gl_FALSE 
```

但缺点是你不能使用像`&&`和这样的普通布尔运算`||`。或者你可以让 OpenGL 库为你做包装，这也带来了一些类型安全和一个可能更好一点的接口。

# php - MongoDB记录太多？

> ID：11701103
> 
> 赞同：4
> 
> 时间：2012-07-28T12:40:59.740
> 
> 标签：php, mongodb

我有一个与 MongoDB 交互的 PHP 应用程序。直到最近，该应用程序运行良好，但几天前我发现该应用程序开始响应非常缓慢。其中一个系列的记录已高达 500K+。因此，对该集合的任何查询的 MongCursor 都会超时。

我不认为 500K 记录太多了。其他使用 mongodb 的页面也开始变慢，但不如使用 500k 记录的集合的页面慢。不与 MongoDB 交互的静态页面仍然可以快速响应。

我不确定这里可能是什么问题。我已经索引了这些集合，所以这似乎不是问题。还有一点需要注意的是，服务器上的 RAM 规格是 512 MB，当 PHP 执行 Mongo 时，top 命令显示 15000k 内存可用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T15:09:26.787

总结聊天室的后续情况，这个问题实际上与 find() 查询有关，该查询正在扫描所有约 500k 文档以找到 15 个：

```
db.tweet_data.find({ 
    $or: 
    [ 
        { in_reply_to_screen_name: /^kunalnayyar$/i, handle: /^kaleycuoco$/i, id: { $gt: 0 } }, 
        { in_reply_to_screen_name: /^kaleycuoco$/i, handle: /^kunalnayyar$/i, id: { $gt: 0 } } 
    ], 
    in_reply_to_status_id_str: { $ne: null }
} ).explain() 
{ 
    "cursor" : "BtreeCursor id_1", 
    "nscanned" : 523248, 
    "nscannedObjects" : 523248, 
    "n" : 15, 
    "millis" : 23682, 
    "nYields" : 0, 
    "nChunkSkips" : 0, 
    "isMultiKey" : false, 
    "indexOnly" : false, 
    "indexBounds" : { 
        "id" : [ 
            [ 
                0, 
                1.7976931348623157e+308 
            ] 
        ] 
    } 
} 
```

This query is using [case-insensitive regular expressions](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions) which won't make efficient use of an index (though there wasn't actually one defined, in this case).

Suggested approach:

*   create lowercase `handle_lc` and `inreply_lc` fields for search purposes

*   add a [compound index](http://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeys) on those:

    `db.tweet.ensureIndex({handle_lc:1, inreply_lc:1})`

*   the order of the compound index allows efficient find of all tweets either by `handle` or by (`handle,in_reply_to`)

*   search by exact match instead of regex:

`db.tweet_data.find({ $or: [ { in_reply_to_screen_name:'kunalnayyar', handle:'kaleycuoco', id: { $gt: 0 } }, { in_reply_to_screen_name:'kaleycuoco', handle:'kunalnayyar', id: { $gt: 0 } } ], })`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:58:43.553

是的，500K+ 应该没问题..据我所知，集合中的文档数量没有真正的“限制”..可能是 _id 字段 MongoDB 可以生成的唯一组合的数量..但这会很多大于 500K ..在您的情况下，我怀疑是，您的查询可能不是很有选择性。因此，当集合中的文档较少时，您不会注意到该问题。但是随着增加，它似乎突然变得迟缓了..比如，MongoCursor 返回了多少文件？

# .htaccess - 如何使用 htaccess 获取查询并重定向到另一个 url（添加查询）？

> ID：11701106
> 
> 赞同：1
> 
> 时间：2012-07-28T12:41:10.267
> 
> 标签：.htaccess, redirect

我有一个网站，我们每月发送一份时事通讯。时事通讯订阅和取消订阅功能在另一个域上进行管理。

但是，为了保持时事通讯页脚“漂亮”，我希望取消订阅链接指示主域。

SO：从时事通讯页脚点击此链接：

```
http://maindomain.com/?email=some@email.com 
```

但真的需要：

```
http://maindomain.com/?noemail=some@email.com 
```

将用户重定向到：

```
http://listdomain.com/members/?p=blacklist&email=some@email.com 
```

这可能吗？

我一直在努力弄清楚如何：

```
RewriteRule ^(I HAVE NO IDEA*)$ /?email=$1&rewrite [L]
RewriteCond %{QUERY_STRING} email=(I HAVE NO IDEA*)$
GO TO THE OTHER URL SOMEHOW 
```

等等，但我一无所知，读了一整天。

非常感谢教这只老狗...

我可能越来越近了，但需要帮助：

```
RewriteCond %{QUERY_STRING} ^email=([^&]+)(&|$) [NC]
RewriteRule ^abc$ http://listdomain.com/members/?p=blacklist&email=%1? [R=301,L] 
```

我试过了，它奏效了，但恐怕它可能不是“最好的”方法。

```
RewriteCond %{QUERY_STRING} ^((?<!email=).*@.*)$
RewriteRule ^$ http://listdomain.com/members/?p=blacklist&%{QUERY_STRING} [R=301,L] 
```

以上适用于电子邮件查询，但需要将原始查询中的“noemail”重写为“email”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:40:56.440

您只需要添加`[QSA]`标志（查询字符串追加）即可将现有查询字符串添加到重定向中。IT 应附加在您添加的任何参数之后 ( `p=blacklist`)

```
RewriteRule ^abc$ http://listdomain.com/members/?p=blacklist [R=301,L,QSA] 
```

来自[Apache mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)：

> 默认情况下，查询字符串会原封不动地传递。但是，您可以在包含查询字符串部分的替换字符串中创建 URL。只需在替换字符串中使用问号来指示应将以下文本重新注入到查询字符串中。当您想删除现有的查询字符串时，只用问号结束替换字符串。**要组合新旧查询字符串，请使用 [QSA] 标志。**

### 更新：

如果这只能在 email= 存在时发生：

```
RewriteCond %{QUERY_STRING} email=(.+)
RewriteRule ^abc$ http://listdomain.com/members/?p=blacklist [R=301,L,QSA] 
```

## 更新 2：

如果我现在了解所有这些，您想要捕获`noemail`并将其传递给`email=`in `listdomain.com`。要重写`email`为`noemail`，您*确实*需要一个`RewriteCond`捕获参数的。

```
# capture email into %1
RewriteCond %{HTTP_HOST] ^maindomain.com$
RewriteCond %{QUERY_STRING} noemail=([^&]+)
RewriteRule ^$ http://listdomain.com/members/?p=blacklist&email=%1 [R=301,L] 
```

# jquery - Jquery FadeTo 显示隐藏的 div

> ID：11701108
> 
> 赞同：0
> 
> 时间：2012-07-28T12:41:23.060
> 
> 标签：jquery

当您将鼠标悬停在任何框上时，我想要类似[http://www.findawayworld.com/的效果。](http://www.findawayworld.com/)

这是我的代码：

```
 jQuery('.category-image-block').mouseover(function() {
                jQuery(this).stop().fadeTo(400, 0.9);
                jQuery(this).children(".category-image-block     div").stop().fadeTo(400, 1);

        });
        jQuery('.category-image-block').mouseout(function() {
            jQuery(this).stop().fadeTo(400, 1.0);
            jQuery(this).children(".category-image-block div").hide();
        });

        jQuery(".category-image-block div").hide(); 
```

效果即将到来，但它没有产生适当的效果。

我的“类别图像块”类的 div 包含图像和另一个带有“contenthover”类的隐藏 div。隐藏的 div 有 p 标签，其中包含文本。使用上面的代码，当我将鼠标悬停在 p 标签上时，会发生一些闪烁（不到 1 秒）。效果并不顺利。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:52:33.607

这是我解决它的方法：

[http://jsfiddle.net/6WSNq/8/](http://jsfiddle.net/6WSNq/8/)

拥有一个内部 div，这绝对是`category-image-block`让这个效果更容易获得。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:04:15.540

我会这样做：

```
$('.category-image-block').on('mouseenter mouseleave', function() {
    $(this).children(".category-hover-block").stop(true, true).fadeToggle(400);
}); 
```

[小提琴](http://jsfiddle.net/6WSNq/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T13:16:56.697

这几乎是他们所拥有的一个确切的例子。正如我之前在评论中指出的，请仔细注意 css 以及元素在布局中的位置。

> 另外：滚动到此答案的底部以获得纯 CSS 解决方案（节省您的时间和空间）
> 
> ### HTML

```
<div id="parent" class="parent">
    <img id="background" class="background" src="http://www.findawayworld.com/scraps/icecream1-310x180.jpg">
    <div id="child" class="child">
        <h3>Some Title Here</h3>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi posuere rutrum mollis. Vestibulum iaculis felis a felis interdum dictum. Duis quam ipsum, dictum in mollis nec, bibendum vel mauris.
        </p>
    </div>
</div>​ 
```

> ### CSS

```
.parent {
    -moz-border-radius: .5em;
    border-radius: .5em;
    border: 3px groove #33FFFF;
    height: 180px;
    margin: 1em auto;
    position: relative;
    width: 310px;
}
.background {
    left: 0px;
    height: 100%;
    position: absolute;
    top: 0px;
    width: 100%;
    z-index: -1;
}
.child {
    background: #fff;
    display: none;
    height: 100%;
    width: 100%;
    z-index: 1;
}
.child h3 {
    font-size: 1.3em;
    text-align: center;
}
.child p {
    margin: 1em auto;
    padding: 0px 1em;
    text-align: justify;
} 
```

> ### jQuery

```
$(function() {
    $("#parent").hover(function(eIn) {
        $("#child").stop(true, true).fadeIn("slow");
    },
    function(eOut) {
        $("#child").stop(true, true).fadeOut("slow");
    });
});​ 
```

> ## [jsFiddle](http://jsfiddle.net/SpYk3/nqtnn/)

# 然而

请记住，这种确切的效果可以在 css 中完全实现，从而为您的 javascript 创建一个更小的脚注。我将尝试尽快获得一个 CSS2 和 CSS3 示例。

> ### 纯 CSS 解决方案

我为这个解决方案使用了相同的 jsFiddle（我只是没有将修改设置为基础，所以你会在修改 22 下找到它）。所以有一行异常 css，如下面的 css 中所述。我还注释掉了 JavaScript 以表明它是一个纯 CSS 解决方案，甚至应该具有一些 IE 兼容性。

> ### CSS（*[仅更改]*）

```
/* Below used for pure CSS solution */
.child {
    display: block !important; /* simply to override previous css without making change for looking at js version */
    opacity: 0;
    transition: opacity 1s ease-in-out;
    -moz-transition: opacity 1s ease-in-out;
    -webkit-transition: opacity 1s ease-in-out;
}
.parent:hover .child {
    opacity: 1;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=100)"; /* IE 8 */
    filter:alpha(opacity=100); /* IE 4, 5, 6 and 7 */
}
/* End Solution */ 
```

> ## [jsFiddle](http://jsfiddle.net/SpYk3/nqtnn/22/)

# android - 使用多个复选框代替使用自定义列表视图来显示列表

> ID：11701110
> 
> 赞同：0
> 
> 时间：2012-07-28T12:41:29.797
> 
> 标签：android, android-listview, android-checkbox

如果我不想使用 ListView 的功能，那么使用多个复选框并自己形成列表是否是个好主意。我必须使用左侧的框创建自定义复选框，这在使用复选框时很容易。我知道这限制了我使用列表的功能，但这样做更容易，而不是每次都创建一个自定义布局。（我想处理时间会更少。）

如果我可以在左侧有复选框而不创建自定义列表，那将是解决此问题的最佳解决方案，但不幸的是列表视图没有该功能，您必须创建自定义列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:26:26.543

该决定取决于行数（在您的情况下为复选框）及其来源。

如果您必须从服务器获取不确定数量的复选框，或者它是用户可以增长到无限的复选框列表，您应该使用 ListView。

另一方面，如果事先知道行数，并且总是相同且不是很大，则不必使用 ListView。如果对您来说更容易，您可以使用 ScrollView，将其放置在您的自定义复选框中。

# c# - 正则表达式选择了一场比赛，但看不到另一场比赛

> ID：11701114
> 
> 赞同：0
> 
> 时间：2012-07-28T12:42:04.020
> 
> 标签：c#, windows, .net

我有一个正则表达式，它应该*拾取到一个字符串：

输入字符串：

```
Vmid        Name                             File                           Guest OS       Version   Annotation
3      TinyCore Linux   [datastore1] TinyCore Linux/TinyCore Linux.vmx   otherLinuxGuest   vmx-08
4      Debain6          [datastore1] Debain6/Debain6.vmx                 ubuntu64Guest     vmx-08 
```

正则表达式：

```
[]][ A-Za-z /.]+.vmx [ ] 
```

正则表达式匹配字符串的以下部分：

```
] TinyCore Linux/TinyCore Linux.vmx 
```

但也应该匹配：

```
] Debain6/Debain6.vmx 
```

我的代码如下：

```
private void regexTest_Click(object sender, EventArgs e)
{
    Regex regex = new Regex("[]][ A-Za-z /.]+.vmx [ ]");
    MatchCollection match = regex.Matches(input);

    foreach (Match matchvalue in match)
    {
        MessageBox.Show(matchvalue.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:46:53.507

你丢失了数字`\d`

你的正则表达式：`[]][\dA-Za-z /.]+.vmx [ ]`

和我的升级`\][\dA-Za-z\s/.]+\.vmx`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:52:58.877

尝试使用类似的东西，以下表达式将匹配 ] 和 .vmx 之间的每个类型字符

```
\](.+?)\.vmx 
```

或者对于像 ][word]/[word].vmx 这样的模式试试

```
\](.+)?\/(.+?)\.vmx 
```

或一般 (.) 替换为特定匹配字符

```
\]([a-z0-9A-Z-_\s\/]+)?\.vmx 
```

[您可以通过http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)轻松测试正则表达式输出

![在此处输入图像描述](../Images/eb641efa8752359aee51e5152740d8ae.png)

# php - 在 localhost 中使用 .htaccess 文件重写 url

> ID：11701115
> 
> 赞同：1
> 
> 时间：2012-07-28T12:42:08.243
> 
> 标签：php, apache, .htaccess, url, mod-rewrite

因此，我设法使用 .htaccess 文件重写了 url，但重定向弄乱了 url。例如我尝试重写这个：

```
localhost/mysite/public_html/class/5/ 
```

进入这个：

```
localhost/mysite/public_html/index.php?v=class&id=5 
```

我在 .htaccess 文件中使用以下行：

```
RewriteRule ^public_html/([A-Za-z]+)/([0-9]+)/?$ ./public_html/index.php?v=$1&id=$2 [L,R] 
```

但浏览器将我重定向到这里（我在 Windows 7 上使用**wamp ）：**

```
localhost/C:/wamp/www/mysite/public_html/index.php?v=class&id=5 
```

这是错误的，让我收到 403 错误。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T00:46:24.227

您的规则需要如下所示：

```
RewriteRule ^public_html/([A-Za-z]+)/([0-9]+)/?$ /public_html/index.php?v=$1&id=$2 [L,R] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T14:18:24.280

问题必须来自替换函数中的 ./ (./public_html/index.php)。重写规则匹配您放置在 ^ 和 $ 之间的正则表达式，然后仅用您的第二部分替换它。我假设您在规则之前已经有某种 rewritecond，所以请尝试删除“./”

尝试将您的 rewritecond 更改为：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

这意味着如果请求的 URL 不是文件或目录，那么它将继续执行并尝试您的 rewriterule

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T00:51:13.173

我不知道你以前有哪些规则，但你的最小 htaccess 应该是这个：

```
RewriteEngine On
RewriteBase /mysite/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^public_html/([A-Za-z]+)/([0-9]+)/?$ /mysite/public_html/index.php?v=$1&id=$2 [L,R] 
```

避免`./`在您的规则中使用，并且不要忘记位置路径必须包含您的`mysite`文件夹

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T11:51:20.140

这太不可思议了。该错误是 Firefox 缓存的结果。我用了 Chrome，没问题。所以我清除了 Firefox 的缓存，一切正常。

# frameworks - mvframework 中 FPC 中的 GetTypeData().FloatType 无法编译

> ID：11701116
> 
> 赞同：0
> 
> 时间：2012-07-28T12:42:24.980
> 
> 标签：frameworks, fpc

在[http://leonardorame.blogspot.com.ar/2009_11_01_archive.html](http://leonardorame.blogspot.com.ar/2009_11_01_archive.html)链接中讨论了如何实现兼容**FPC**的框架，但是单元 MvFrameworkSrvProvider.pas 的第 54 行，我无法解决以下问题：

`case GetTypeData(PropInfo^.PropType).**FloatType** of`

```
"MvFrameworkSrvProvider.pas (54.57) Error: Illegal qualifier" 
```

有人可以帮我吗？

提前致谢。加布里埃尔

完整代码在这里： PS：对不起，我尝试正确标记代码，但我不知道如何操作。

```
unit MvFrameworkSrvProvider;

interface

uses
  SysUtils,
  Classes,
  TypInfo,
  Variants;

type
  TMVSrvProvider = class
  public
    function GetValueFromProperty(AClass: TObject; APropertyName: string): Variant;
    procedure SetValueToProperty(AClass: TObject; APropertyName: string;
      const Value: Variant);
  end;

implementation

uses
  StrUtils;

function TMVSrvProvider.GetValueFromProperty(AClass: TObject;
  APropertyName: string): Variant;
(* Get property value *)
var
  PropInfo: PPropInfo;
  lFloatProp: Extended;
begin
  (* Get property info *)
  Result := Null;
  try
    PropInfo := GetPropInfo(AClass, APropertyName);
    if PropInfo <> nil then
    begin
      case PropInfo^.PropType^.Kind of
        (* String types *)
        tkChar:
          Result := Char(GetOrdProp(AClass, APropertyName));
{$IFDEF Unicode}
        tkUString: Result := GetUnicodeStrProp(AClass, APropertyName);
{$ENDIF}
        tkWString, tkLString, tkString:
          Result := GetStrProp(AClass, APropertyName);
        (* Float types *)
        tkFloat:
          begin
            (* Every float type has its own subtype ex. TDateTime *)

            lFloatProp := GetFloatProp(AClass, APropertyName);

            {$IFDEF fpc}
                   case GetTypeData(PropInfo^.PropType).FloatType of
            {$ELSE}
                   case GetTypeData(PropInfo^.PropType^).FloatType of
            {$ENDIF}

              ftSingle:
                Result := VarAsType(lFloatProp, varSingle);
              ftDouble, ftExtended, ftComp:
                Result := VarAsType(lFloatProp, varDouble);
              ftCurr:
                Result := FloatToCurr(lFloatProp);
            end;
              (* Hard format TDateTime *)
            if UpperCase(PropInfo^.PropType^.Name) = UpperCase('TDateTime')
              then
              Result := TVarData(Result).VDate
            else if UpperCase(PropInfo^.PropType^.Name) = UpperCase('TDate')
              then
              Result := StrToDate(DateToStr(TVarData(Result).VDate));
          end;
            (* Integer types *)
        tkEnumeration:
          Result := GetOrdProp(AClass, APropertyName);
        tkInteger:
          Result := GetOrdProp(AClass, APropertyName);
            (* Classes *)
        tkClass:
          Result := Integer(GetObjectProp(AClass, APropertyName));
      else
        Result := GetPropValue(AClass, APropertyName, False);
      end;
    end;
  except
    Result := Null;
  end;
end;

procedure TMVSrvProvider.SetValueToProperty(AClass: TObject;
  APropertyName: string; const Value: Variant);
(* Assign values to properties *)
type
  (* Method pointers *)
  TStringSetProc = procedure(const Value: string) of object;
  TShortStringSetProc = procedure(const Value: ShortString) of object;
  TIntegerSetProc = procedure(const Value: Integer) of object;
  TVariantSetProc = procedure(const Value: Variant) of object;
  TExtendedSetProc = procedure(const Value: Extended) of object;
  TSingleSetProc = procedure(const Value: Single) of object;
  TDoubleSetProc = procedure(const Value: Double) of object;
  TCompSetProc = procedure(const Value: Comp) of object;
  TCurrencySetProc = procedure(const Value: Currency) of object;
  TCharSetProc = procedure(const Value: Char) of object;
  TClassSetProc = procedure(const Value: Integer) of object;

type
  (* Index methods *)
  TVariantIndexedSetProc = procedure(Index: Integer; const Value: Variant)
    of object;
  TIntegerIndexedSetProc = procedure(Index: Integer; const Value: Integer)
    of object;
  TStringIndexedSetProc = procedure(Index: Integer; const Value: string)
    of object;
  TShortStringIndexedSetProc = procedure(Index: Integer;
    const Value: ShortString) of object;
  TSingleIndexedSetProc = procedure(Index: Integer; const Value: Single)
    of object;
  TDoubleIndexedSetProc = procedure(Index: Integer; const Value: Double)
    of object;
  TExtendedIndexedSetProc = procedure(Index: Integer; const Value: Extended)
    of object;
  TCompIndexedSetProc = procedure(Index: Integer; const Value: Comp) of object;
  TCurrencyIndexedSetProc = procedure(Index: Integer; const Value: Currency)
    of object;
  TCharIndexSetProc = procedure(Index: Integer; const Value: Char) of object;
  TObjectIndexSetProc = procedure(Index: Integer; const Value: Integer)
    of object;

type
  PUChar = ^Char;
{$IFNDEF DELPHI70}
  PInteger = ^Integer;
  PSingle = ^Single;
  PDouble = ^Double;
  PComp = ^Comp;
{$ENDIF}
const
{$IFDEF FPC}
  NilValue = Pointer($01);
{$ELSE}
  NilValue = nil;
{$ENDIF}
var
  M: TMethod;
  PProperty: Longint;
  PMethod: Longint;
  PropInfo: PPropInfo;
  P: Pointer;
  lValue: Variant;

begin
  (* First, get property info *)
  PropInfo := GetPropInfo(AClass, APropertyName);

  (* If we can't get property info, then exit *)
  if PropInfo = nil then
    Exit;

  (* Initialization *)
  PProperty := 0;

  // PMethod   := 0;

  (* Get memory addresses of SetProc and GetProc *)
  if PropInfo^.SetProc <> NilValue then
    PMethod := Longint(PropInfo^.SetProc)
  else
    Exit;

  if PropInfo^.GetProc <> NilValue then
    PProperty := Longint(PropInfo^.GetProc);

  (* Segun el tipo de datos procesamos primero los ReadOnly escribiendo en la variable *)
  (* Obtenemos el offset $00FFFFFF de la instancia + el desplazamiento de la variable *)
  (* Luego escribimos en la direccion obtenida en forma directa - si el metodo es una *)
  (* variable tambien los escribe = ((PMethod and $FF000000) = $FF000000)) *)
  (* Si es un metodo indexado tambien lo escribe aqui *)

  lValue := Value;

  if ((PropInfo^.SetProc = NilValue) and (PropInfo^.GetProc <> NilValue) and
    not ((PMethod and $FF000000) = $FF000000)) or (PropInfo^.SetProc = PropInfo^.GetProc) then
  begin
    (* Direccion de desplazamiento *)
    P := Pointer(Integer(AClass) + (PProperty and $00FFFFFF));

    (* Escribimos el valor *)
    case PropInfo^.PropType^.Kind of
      tkString: PShortString(P)^ := VarToStr(lValue);
      tkLString, tkWString: PString(P)^ := VarToStr(lValue);
{$IFDEF UNICODE}
      tkUString: PString(P)^ := VarToStr(lValue);
{$ENDIF}
{$IFDEF FPC}
      tkAString: PString(P)^ := VarToStr(lValue);
{$ENDIF}
      tkInt64, tkInteger, tkEnumeration:
        begin
          if VarIsNull(lValue) or VarIsEmpty(lValue) or (lValue = '') then
            lValue := 0;

          if UpperCase(PropInfo^.PropType^.Name) = 'BOOLEAN' then
            PByte(P)^ := lValue
          else
            PInteger(P)^ := lValue;
        end;

      tkVariant:
        begin
          if VarIsNull(lValue) then
            PVariant(P)^ := Null
          else
            PVariant(P)^ := lValue;
        end;
      tkClass: PInteger(P)^ := lValue;
      tkChar:
        begin
          if string(lValue) <> '' then
            PUChar(P)^ := string(lValue)[1]
          else
            PUChar(P)^ := #0;
        end;

      tkFloat:
        begin
          if VarIsNull(lValue) or VarIsEmpty(lValue) then //or (lValue = '')then
            lValue := 0;

        (* Cada tipo float tiene su formato especial asi com tipos ej. TDateTime ver TypInfo *)
        (* Aplicamos el tipo de float que corresponda *)
{$IFDEF fpc}
          case GetTypeData(PropInfo^.PropType).FloatType of
{$ELSE}
          case GetTypeData(PropInfo^.PropType^).FloatType of
{$ENDIF}
            ftSingle: PSingle(P)^ := VarAsType(lValue, varSingle);
            ftDouble: PDouble(P)^ := VarAsType(lValue, varDouble);
            ftExtended: PExtended(P)^ := VarAsType(lValue, varSingle);
            ftComp: PComp(P)^ := VarAsType(lValue, varSingle);
            ftCurr: PCurrency(P)^ := VarAsType(lValue, varSingle);
          end;
        end;
    end;
      (* All is ok *)
    Exit;
  end;

  (* Procesamos aquellos que posean un metodo convencional que no sean variable *)
  if not ((PMethod and $FF000000) = $FF000000) then
    //if (PropInfo^.SetProc <> NilValue) then
    begin
      (* Obtenemos la clase de matodo 1- Metodo virtual 2- metodo convencional *)
      (* Varian el primero del segundo en el desplazamiento VMT (Virtual method table ) *)
      if (PMethod and $FF000000) = $FE000000 then
        M.Code := Pointer(PInteger(PInteger(AClass)^ + SmallInt(PMethod))^)
      else
        M.Code := Pointer(PMethod);

      (* Completamos con la instancia *)
      M.Data := AClass;

      (* Dependiendo del tipo de datos lo ejecutamos el metodo *)
      if PropInfo^.Index = Integer($80000000) then // (* Si no posee indice *)
        case PropInfo^.PropType^.Kind of
          tkString:
            TShortStringSetProc(M)(VarToStr(lValue));
          tkLString, tkWString:
            TStringSetProc(M)(VarToStr(lValue));
{$IFDEF FPC}
          tkAString:
            TStringSetProc(M)(VarToStr(lValue));
{$ENDIF}
          tkInteger, tkInt64, tkEnumeration:
            begin
              if VarIsNull(lValue) then
                lValue := 0;
              TIntegerSetProc(M)(lValue);
            end;

          tkVariant:
            begin
              if VarIsNull(lValue) then
                TVariantSetProc(M)(Null)
              else
                TVariantSetProc(M)(lValue);
            end;

          tkChar:
            if string(lValue) <> '' then
              TCharSetProc(M)(string(lValue)[1])
            else
              TCharSetProc(M)(#0);

          tkClass:
            TClassSetProc(M)(Integer(lValue));
          tkFloat:
        (* Tipos de datos flotantes *)
{$IFDEF fpc}
            case GetTypeData(PropInfo^.PropType).FloatType of
{$ELSE}
            case GetTypeData(PropInfo^.PropType^).FloatType of
{$ENDIF}
              ftSingle:
                begin
                  if VarIsNull(lValue) then
                    lValue := 0;
                  TSingleSetProc(M)(lValue);
                end;
              ftDouble:
                begin
                  if VarIsNull(lValue) then
                    lValue := 0;
                  TDoubleSetProc(M)(lValue);
                end;

              ftExtended:
                begin
                  if VarIsNull(lValue) then
                    lValue := 0;
                  TExtendedSetProc(M)(lValue);
                end;

              ftComp:
                begin
                  if VarIsNull(lValue) then
                    lValue := 0;
                  TCompSetProc(M)(lValue);
                end;
              ftCurr:
                begin
                  if VarIsNull(lValue) then
                    lValue := 0;
                  TCurrencySetProc(M)(lValue);
                end;
            end; // case
        end // case
      else // if
        case PropInfo^.PropType^.Kind of
          tkString:
            TShortStringIndexedSetProc(M)(PropInfo^.Index, lValue);
          tkLString, tkWString:
            TStringIndexedSetProc(M)(PropInfo^.Index, lValue);
          tkInteger, tkInt64,
          tkEnumeration:
            TIntegerIndexedSetProc(M)(PropInfo^.Index, lValue);
          tkVariant:
            TVariantIndexedSetProc(M)(PropInfo^.Index, lValue);
          tkChar:
            TCharIndexSetProc(M)(PropInfo^.Index, string(lValue)[1]);
          tkClass:
            TObjectIndexSetProc(M)(PropInfo^.Index, Integer(lValue));
          tkFloat:
            (* Segun el tipo de real *)
{$IFDEF fpc}
            case GetTypeData(PropInfo^.PropType).FloatType of
{$ELSE}
            case GetTypeData(PropInfo^.PropType^).FloatType of
{$ENDIF}
              ftSingle:
                TSingleIndexedSetProc(M)(PropInfo^.Index, lValue);
              ftDouble:
                TDoubleIndexedSetProc(M)(PropInfo^.Index, lValue);
              ftExtended:
                TExtendedIndexedSetProc(M)(PropInfo^.Index, lValue);
              ftComp:
                TCompIndexedSetProc(M)(PropInfo^.Index, lValue);
              ftCurr:
                TCurrencyIndexedSetProc(M)(PropInfo^.Index, lValue);
            end; // case
        end // case
    end; // if
end;

end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:08:59.170

代码显然需要在 delphi 兼容模式下编译。`{$mode delphi}`在单元的开头添加或使用命令行开关进行编译`-Sd`。

# javascript - 获取特定类型的第一个子节点 - JavaScript

> ID：11701118
> 
> 赞同：84
> 
> 时间：2012-07-28T12:42:31.680
> 
> 标签：javascript, dom

是否有可能获得一个子 dom 元素，它将是特定类型的第一个子元素。

例如，在这两个示例中，我都想获取`img`元素：

```
<a id="mylink" href="#"><img src="myimage.jpg" /></a> 
```

对比

```
<a id="mylink" href="#"><span></span><img src="myimage.jpg" /></a> 
```

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-07-28T12:45:05.823

尝试这个

```
var firstIMG = document.getElementById('mylink').getElementsByTagName('img')[0]; 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-07-28T12:46:30.800

您还可以使用[`querySelector`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector)：

```
var firstImg = document.querySelector("#mylink > img:first-of-type"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T12:45:33.437

```
var anchor = document.getElementById('mylink');
var images = anchor.getElementsByTagName('img');
var image = images.length ? images[0] : null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T13:36:43.147

这是一个javascript函数

```
function getFirst(con,tag)
{
    return con.getElementsByTagName(tag)[0];
}

//html markup
<a id="mylink" href="#"><img src="myimage.jpg" /></a>
<a id="mylink1" href="#"><img src="myimage.jpg" /></a>

//test
var con=document.getElementById('mylink');
var first=getFirst(con,'img'); 
```

# python - 在此代码中，如何在使用 python 找到或未找到字符串后停止

> ID：11701122
> 
> 赞同：0
> 
> 时间：2012-07-28T12:43:27.827
> 
> 标签：python

```
import win32com.client
objSWbemServices = win32com.client.Dispatch(
    "WbemScripting.SWbemLocator").ConnectServer(".","root\cimv2")
for item in objSWbemServices.ExecQuery(
        "SELECT * FROM Win32_PnPEntity "):
    found=False
    for name in ('Caption','Capabilities '):
        a = getattr(item, name, None)
        if a is not None:
            b=('%s,' %a)
            if "Item" in b:
                print "found"
                found = True

            else:
                print "Not found"
                break 
```

我只想一次显示“找到”否则“未找到”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:32:17.323

另一种方法是使用一个函数并在你有 print 的地方替换 return。您可以利用 python 中的函数在返回时停止执行的事实。

```
def finder():
    objSWbemServices = win32com.client.Dispatch(
        "WbemScripting.SWbemLocator").ConnectServer(".","root\cimv2")
    for item in objSWbemServices.ExecQuery(
        "SELECT * FROM Win32_PnPEntity "):
        for name in ('Caption','Capabilities '):
            a = getattr(item, name, None)
            if a is not None:
                b=('%s,' %a)
                if "Item" in b:
                    return True # or return "Found" if you prefer
                else:
                    return False # or return "Not Found" if you prefer

found = finder()
print found
# or
print finder() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:51:11.443

您必须在“if”案例之后添加“break”，如下所示：

```
for name in ('Caption','Capabilities '):
    a = getattr(item, name, None)
    if a is not None:
        b=('%s,' %a)
        if "Item" in b:
            print "found"
            found = True

            #added here
            break

        else:
            print "Not found"
            break 
```

这将打破“（'Caption'，'Capabilities'）”的迭代

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:52:28.553

上移`break`一级缩进：

```
for name in ('Caption','Capabilities '):
    a = getattr(item, name, None)
    if a is not None:
        b=('%s,' %a)
        if "Item" in b:
            print "found"
            found = True
        else:
            print "Not found"

        break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T12:53:13.410

展示？你的意思是执行，我想。只需将 break 放在 else 语句之外（在里面 - 如果 a 不是 None -）。这样，如果 a 不是 none，则只要“Item”在 b 中，循环就会停止。

```
for name in ('Caption','Capabilities '):
    a = getattr(item, name, None)
    if a is not None:
        b=('%s,' %a)
        if "Item" in b:
            print "found"
            found = True

        else:
            print "Not found"
        break 
```

编辑：见warwaruk anser

# php - 如何将 file_get_content 与 php 包含一起使用

> ID：11701123
> 
> 赞同：0
> 
> 时间：2012-07-28T12:43:52.247
> 
> 标签：php, html

我在将 html 转换为 pdf 时遇到问题我正在使用 TCPDF，我正在尝试获取以下内容。它不工作:(

```
$html = htmlspecialchars_decode(file_get_contents('main.php')); 

$html = htmlspecialchars_decode(file_get_contents('main.php')); 

html = file_get_contents('main.php'); 
```

我的 main.php 包含以下代码。

```
<?php
include_once 'design/header.php';
include_once 'mainpage.php';
include_once 'design/sidemenu.php';
include_once 'design/footer.php';
?> 
```

有人可以帮我弄这个吗 ？

基本上我有一个使用php循环生成的HTML表格并从数据库中获取信息，用户可以对表格值进行更改，一旦完成，他们可以点击提交，它应该生成一个pdf文件。

有人可以帮我弄这个吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:51:20.423

[`file_get_contents()`](http://php.net/file_get_contents)从磁盘加载文件。它不会执行包含的 PHP 代码。它读出原始数据，并将其作为字符串返回。

您将需要使用[`ob_start()`](http://php.net/ob_start), then[`include("main.php")`](http://php.net/include)和的组合[`ob_get_contents()`](http://php.net/ob_get_contents)。或者在 URL[`file_get_contents`](http://php.net/file_get_contents)上[`curl`](http://php.net/curl)（这样您在 PHP 执行之后从网络服务器接收到完整的页面 html）。

# vba - vba countif 表达式

> ID：11701130
> 
> 赞同：0
> 
> 时间：2012-07-28T12:45:11.827
> 
> 标签：vba, excel, expression, countif

我需要计算数组顶部 1/3、中间 1/3 和底部 1/3 的整数个数（C6:C28 中的测试数组）。但我似乎无法`countif`上班。

```
Range("C1").Select
    ActiveCell.FormulaR1C1 = "=MAX(R[2]C:R[24]C)"
Range("D1").Select
    ActiveCell.FormulaR1C1 = "=RC[-1]/3"
Range("E1").Select
    ActiveCell.FormulaR1C1 = "=2*RC[-1]"
Range("C2").Select
  ActiveCell.FormulaR1C1 = "=COUNTIF(R[4]C:R[26]C,""<D1"")"
Range("C3").Select
  ActiveCell.FormulaR1C1 = "=COUNTIF(R[3]C:R[25]C,"">E1"")" 
```

* * *

```
185 
115 
208 
101 
2   
53  
348 
169 
10  
24  
243 
93  
357 
326 
17  
84  
253 
198 
250 
352 
51  
98  
216 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:00:13.530

一个可能的错误来源是`"=COUNTIF(R[4]C:R[26]C,""<D1"")"`- 您应该从字符串中提取单元格地址：

```
"=COUNTIF(R[4]C:R[26]C,""<""&D1)" 
```

下一个公式的相同评论。

# javascript - 需要通过 Javascript 代码应用样式的帮助

> ID：11701136
> 
> 赞同：1
> 
> 时间：2012-07-28T12:45:55.120
> 
> 标签：javascript, css

我想为可能包含多个单词的特定字符串中的匹配单词应用样式（蓝色字体）。该字符串也可以重复相同的单词。

例如：字符串段落=“这是将与子字符串匹配的字符串。匹配的子字符串可以是单个单词或多个单词组成的字符串。”

字符串匹配String = '字符串单词'

现在我想将蓝色粗体样式应用于字符串和段落字符串中单词的匹配单词。

你能帮我看看如何通过javascript做到这一点吗？

提前感谢罗伯特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:00:18.253

认为：

```
<div id="myDiv">This is the string which will be matched against substring. The matching substring can be a single word or multple words composed string.</div>

.some-class{
    color: blue;
    font-weight: bold;
} 
```

那么你可以这样做来替换单词：

```
var elem = document.getElementById('myDiv');
var phrase = 'string word';
var regex = new RegExp(phrase.split(' ').join('|'),"gi");
//result   =>    /string|word/g
elem.innerHTML = elem.innerHTML.replace(regex,'<span class="some-class">$&</span>'); 
```

[现场演示](http://jsfiddle.net/MtadV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:58:27.027

```
var text = "This is the string which will be matched against substring...";
var search = "string word";

var words = search.split(" ");
for (var i = 0; i < words.length; ++i) {
    text = text.replace(words[i], "<span style='color: blue;'>"+words[i]+"</span>");
}

document.write(text); 
```

在这里测试它：http: [//jsfiddle.net/Zh6t9/](http://jsfiddle.net/Zh6t9/)

# facebook - 如何使用 wordpress 和 share.php 在 Facebook 墙上显示文章的标题

> ID：11701140
> 
> 赞同：0
> 
> 时间：2012-07-28T12:46:26.713
> 
> 标签：facebook, wordpress

我的环境

*   PHP 5.3.2
*   WordPress 3.4.1

我管理着一个 wordpress 网站，我想在 facebook 上分享一个帖子链接。一页中有一些文章（index.php）。

然后我使用以下链接显示每个帖子的标题。

```
<?php while (have_posts()) : the_post(); ?>
(snip)
<a href="http://www.facebook.com/sharer/sharer.php?u=<?php the_permalink(); ?>&t=<?php the_title(); ?>" target="_blank">share</a>
(snip)
<?php endwhile; ?> 
```

但是，我单击链接，共享标题和链接是 wordpress 本身（不是文章的）。是facebook缓存的问题吗？我该如何解决？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:18:45.133

您需要在网站的每个页面上放置[开放图形元标记](http://ogp.me/)，以便 Facebook 正确显示标题等。Wordpress 默认不包含这些。在 Facebook 调试器中查看您的几个页面，您可能会因为缺少标签而看到一堆错误。 [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

有几个插件可以为你做到这一点。我个人喜欢[Yoast 的 Wordpress SEO](http://wordpress.org/extend/plugins/wordpress-seo/)。官方的[Facebook 插件](http://wordpress.org/extend/plugins/facebook/)也可以做到这一点，但仍有一些错误需要解决。如果你不喜欢这两个中的任何一个，还有几十个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:32:29.537

在你的 header.php 文件中，在结束`</head>`标记之前的某处添加这一行

```
<meta property="og:title" content="<?php bloginfo('name'); ?> - <?php wp_title(); ?>"/> 
```

这将构建在 Facebook 中显示的标题，例如 - 酷博客名称 - 很棒的帖子标题

此外，Facebook 可能会缓存已共享链接的值。如果您在此处输入网址[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)，您将看到 Facebook 将尝试使用的值，因此它有利于测试并且应该清除缓存的值。

# c# - 在 ASP.Net MVC 中创建 TCP 客户端连接

> ID：11701141
> 
> 赞同：0
> 
> 时间：2012-07-28T12:46:28.803
> 
> 标签：c#, asp.net, asp.net-mvc, iis, iis-7.5

我开发了一个简单的 MVC 页面，该页面创建一个到另一台服务器的 TCP 客户端连接以交换信息。当我使用本地 IIS Web 服务器处于调试模式时，它工作正常。但是，当我将它发布到远程服务器时，通过 TCP 客户端连接时出现错误。该错误只是一个简单的页面“对不起，处理您的请求时发生错误。”。

我认为这只是因为我的 IIS 7.5 的配置设置。如何允许我的网站通过 TCP 客户端连接到另一台服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:29:02.743

根据您在问题中提供的信息，很难说出问题可能是什么。确保没有防火墙阻止您的 Web 服务器和远程服务器之间的连接。这不太可能与 IIS 有关。请联系您的网络管理员以确保可以从 Web 服务器访问远程服务器。

# html - 在图像 onClick 事件上调用 bean 方法

> ID：11701143
> 
> 赞同：0
> 
> 时间：2012-07-28T12:46:49.117
> 
> 标签：html, image, jsp, jsf-2, onclick

我有图像，想调用一个存储在 bean 中的方法。我在想

```
<h:graphicImage value="DisplayImage?id=1&amp;stuff=photo&amp;mainID=main" 
 onclick="
          alert('clicked me 1');
          #{PersonalInformationDataBean.doSaveImage()};
          alert('clicked me 2');
         " styleClass="modal"/> 
```

我期待`#{PersonalInformationDataBean.doSaveImage()};`工作，但这不起作用。我只是变得警觉`clicked me 1`

知道如何完成这项工作吗？

## 更新 1

忘记更新我在**JSP Page**中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:03:19.767

这样的事情怎么样

```
<h:graphicImage value="DisplayImage?id=1&amp;stuff=photo&amp;mainID=main" 
 onclick="$('#myFormID\\:myButtonID').click();" styleClass="modal"/>
<h:commandButton id="myButtonID" action="#{PersonalInformationDataBean.doSaveImage()}" style="display:none">
    <f:ajax/>
</h:commandButton> 
```

您可能需要使用 jquery 选择器`$('#myFormID\\:myButtonID')`或`$('#myButtonID')`

或者

```
<h:commandLink>
    <f:ajax event="action" listener="#{PersonalInformationDataBean.doSaveImage()}"/>
    <h:graphicImage value="DisplayImage?id=1&amp;stuff=photo&amp;mainID=main" 
    styleClass="modal"/>
</h:commandLink> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:25:09.910

我假设`#{PersonalInformationDataBean.doSaveImage()}; 是您在服务器中定义的函数，而不是 javascript 对象方法。如我错了请纠正我。

这里的问题是您试图从客户端 javascript 访问服务器端方法。由于 HTTP 是无状态协议，因此您需要一些中间技术来访问这些方法。

DWR 是一个强大的工具，可以让您实现*这一*目标。查看[http://directwebremoting.org/dwr/documentation/index.html](http://directwebremoting.org/dwr/documentation/index.html)。我已经用过无数次了，它从来没有失败过。

# css - Chrome中不可点击的“之后”内容

> ID：11701145
> 
> 赞同：1
> 
> 时间：2012-07-28T12:46:54.047
> 
> 标签：css, google-chrome

 我`after`在 CSS 中使用内容，但`<a>`标签中的内容不能用作 Google Chrome 中的链接（不可点击）：

```
<a href="url"><label></label></a>

LABEL:after {content:"CLICK HERE"} 
```

它适用于火狐。有什么解决办法吗？

在 chrome 中检查一下： 

*   [http://jsfiddle.net/duuRk/](http://jsfiddle.net/duuRk/)（不可点击）
*   [http://jsfiddle.net/HMn4d/](http://jsfiddle.net/HMn4d/)（工作正常）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T13:18:28.737

如果你给你的'a'标签属性 display:inline-block 它应该适合你。

# mysql - 将 InactiveDt 更改为与产品 ID 中下一个最低 EffectiveDt 的日期相同

> ID：11701156
> 
> 赞同：0
> 
> 时间：2012-07-28T12:48:18.117
> 
> 标签：mysql, date, compare-and-swap

我有一张桌子：

```
CREATE TABLE ProductPrice
(
ProductId       INT             NOT NULL,
EffectiveDt     DATE            NOT NULL,
InactiveDt      DATE            NOT NULL,
Price           DECIMAL(10,2)   NOT NULL
) 
```

我想要做的是使用更新，以便将具有最低有效 dt 的记录的 inactivedt 更改为每个产品 id 的下一个最低有效 dt 的记录的有效 dt - 1。

所以说我们有：

```
21/07/2012  26/07/2012
24/07/2012  28/07/2012
27/07/2012  30/07/2012 
```

这将更改为：

```
21/07/2012  23/07/2012
24/07/2012  26/07/2012
27/07/2012  30/07/2012 
```

到目前为止，我有：

```
UPDATE pp 
SET    pp.InactiveDt = (SELECT pe.EffectiveDt
               FROM   ProductPrice pe 
               WHERE  pe.ProductId = pp.ProductId
               ) 
FROM   ProductPrice pp; 
```

但这并不能真正满足我的需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:28:21.773

我不认为你可以在一个大的更新查询中做到这一点，即使你能做到，那也会是一团糟的代码。

正确的方法是使用 MySQL 存储过程，它允许您使用 for 和 while 循环编写脚本，并且您可以随时通过简单的选择调用它。

[http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

# android - TextView 根据文本长度对齐

> ID：11701158
> 
> 赞同：0
> 
> 时间：2012-07-28T12:48:43.153
> 
> 标签：android, android-layout, textview

我需要这样的东西：

[http://i.stack.imgur.com/utQUq.png](http://i.stack.imgur.com/utQUq.png)

当 TextView 中的文本不是那么长时，它必须在父布局中居中。但是当文本变得更长以正确居中时，我们需要将其向左对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:57:32.103

您可以根据文本的大小编写if条件，并可以设置对齐方式。这是一个示例代码：

```
if(mytextview.getText.length() >10)
{
mytextview.setGravity("LEFT");
} 
```

保持默认重力居中。

# c# - 避免对同一个数据库表的并发读取重复

> ID：11701162
> 
> 赞同：1
> 
> 时间：2012-07-28T12:49:11.173
> 
> 标签：c#, sql-server, entity-framework, concurrency

避免对同一个数据库表的并发读取重复

我们有一个包含任务列表的表

```
Table RecordsTable  
    RecordID
    RecordName
    ...
    ...
    IsProcessed 
```

多台工作机器从表中读取，一旦任务被处理，将 IsProcessed 标记为 true。

因此，如果我们希望以下代码可以正常工作而不会重复

C#中的伪代码

```
//get first 10 records that are not processed based on some other conditions
var recordSet = objectontext.recordstable.Where(...).Where(c => c.IsProcessed == false).Take(10);
//loop through the recordset in a transaction 
foreach(record singleRecord in recordSet)
{
    bool result = ProcessRecord();
    //Mark isProcessed as true 
    if(result)
        singleRecord.IsProcessed = true;
    objectContext.Savechanges();
} 
```

我们希望避免重复处理记录（因为 ProcessRecords() 包含邮件等）。**如果我们将上面的整个代码包装在一个事务**中，这是否意味着来自两个不同工作人员的两次调用会导致不重复的记录？

如果workerA首先调用它得到的表，

```
var recordSetWorkerA = objectontext.recordstable.Where(somecondition...).Where(c => c.IsProcessed == false).Take(10); 
```

如果workerB 在worker A 已经在事务中之后发出调用，以下语句是否会因为试图读取锁定的行或移动到接下来的10 条记录而无法执行？

```
var recordSetWorkerB = objectontext.recordstable.Where(somecondition...).Where(c => c.IsProcessed == false).Take(10); 
```

有没有我们应该关注的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:01:11.300

一种选择是显式地使 isProcessed 成为 { 就绪、处理、处理 } 的三态枚举。我不知道如何在 ActiveRecord 中执行此操作，但您需要如下 SQL 语句：

```
UPDATE RecordsTable
SET ProcessedState = 'processing'
WHERE RecordId = 1
    AND ProcessedState = 'ready'; 
```

确保该语句只更新了一行。如果是零行，那么有人会击败您完成该任务。确保该语句在其自己的事务中执行，至少具有“读提交”隔离级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:08:15.783

仅将您的代码包装到事务中是不够的。你当然会得到例外`SaveChanges`，但为时已晚。

您真正需要的是将记录标记为*正在*处理，而不仅仅是*完成*处理。我看到两个解决方案：

1.  如果您的工作人员共享相同的状态（意味着它们是一个 AppDomain 中的线程，而不是多个并发工作人员服务），您可以使用`ConcurrentDictionary`来标记您正在处理的记录。

    ```
    foreach(record singleRecord in recordSet)
    {
        //RecordsInProcess is a globally-available ConcurrentDictionary<recordIdType, record
        if (!RecordsInProcess.TryAdd(singleRecord.RecordId, singleRecord))
           continue; //TryAdd will return false if such an element already exists

        bool result = ProcessRecord();
        //Mark isProcessed as true 
        if(result)
            singleRecord.IsProcessed = true;
        objectContext.Savechanges();
        record junk; // we don't need it
        RecordsInProcess.TryRemove(singleRecordId, out junk)
    } 
    ```

2.  如果您的工作人员是孤立的，或者您只是想要更强大的东西，那么您必须将记录标记为数据库中的处理并使用该信息进行过滤。这就是你必须使用事务的地方，并且非常小心地使用它们，因为很容易陷入僵局。从并发的角度来看，最有效的方法是始终从数据库中只获取一条未处理的记录，将其标记为`processing`在您执行任何操作之前，然后继续您的处理。

# ios5 - 似乎来自框架类的调试泄漏

> ID：11701164
> 
> 赞同：1
> 
> 时间：2012-07-28T12:49:30.770
> 
> 标签：ios5, uiscrollview, profiling, memory-leaks

我一直在分析我的应用程序，寻找漏洞。没多久我就找到了一些。我从与 UITableView 的交互中得到多个泄漏。我的第一个想法显然是我没有正确地重用单元，但是看看这个调用堆栈它看起来像别的东西，并在重用单元时检查它们的内存位置，我可以看到相同的单元正在被回收。

我接下来应该做什么来修复这个内存泄漏？我自己的代码中没有发生泄漏，那么我应该如何修复它？这很可能是我自己错误的间接结果，但是我应该如何找到这些错误在哪里呢？

请注意，无论是在模拟器还是设备上运行，我都有相同的泄漏。

![在此处输入图像描述](../Images/498c34853add367a0975e79b79258d30.png)

# meteor - node.js 错误找不到模块'optimist'

> ID：11701166
> 
> 赞同：2
> 
> 时间：2012-07-28T12:49:53.717
> 
> 标签：meteor

我已经将节点升级到 v0.6.18 然后我开始使用流星。每当我使用任何与流星相关的命令时，都会出现错误。

node.js:201 抛出 e；// process.nextTick 错误，或第一次滴答时的“错误”事件 ^ 错误：在 Function._resolveFilename (module.js:332:11) at Function._load (module.js:279:25) 找不到模块“optimist”在 Module.require (module.js:354:17) 在 require (module.js:370:17) 在 /usr/lib/meteor/app/meteor/meteor.js:596:18 在 Object. (/usr/lib/meteor/app/meteor/meteor.js:632:1) 在 Module._compile (module.js:441:26) 在 Object..js (module.js:459:10) 在 Module.在 Function._load (module.js:308:12) 处加载 (module.js:348:32)

为了解决这个问题，我使用了“npm install optimist”。它已成功安装。但这并没有解决我的问题。请为此问题提出一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T21:11:16.023

尝试将陨石与流星一起使用。

这个页面有一个关于如何添加 NPM 包的相当简单的指南。

# android - Android 中的数据安全性

> ID：11701168
> 
> 赞同：1
> 
> 时间：2012-07-28T12:50:13.230
> 
> 标签：android, security, encryption

我有一个字符串需要安全存储。我阅读了有关 SQLite 加密的信息，但我不想仅为一条数据创建数据库。是否有另一种方法来保护它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:53:11.130

您可以使用 SharedPreference。使用任何加密方法加密字符串并将其保存在应用程序的 SharedPreference 中。当您需要使用它时，只需检索它，解密并使用它。希望它会有所帮助。

[看看这里。](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:56:07.913

您可以使用 Java 中可用的许多选项中的任何一个来加密您的字符串，并将其存储在内部存储或共享首选项中

我在加密中发现的东西： [加密和解密 java 中的字符串](https://stackoverflow.com/questions/4487525/encrypt-and-decrypt-a-string-in-java)

Amdroid 存储选项：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

# css - CSS 伪元素

> ID：11701176
> 
> 赞同：1
> 
> 时间：2012-07-28T12:51:10.657
> 
> 标签：css, pseudo-element

这段代码解释了伪元素`first-letter`，`first-line`并且运行良好。

```
<html>
    <head>
    <title>Practice CSS :first-letter pseudo element </title>
    </head>

    <style type="text/css">
    <!--
    p:first-letter { font-size: 3em; text-color:red; }
    p.normal:first-letter { font-size: 40px; color:red; }

    p:first-line { text-decoration: none; }
    p.line:first-line { text-decoration: underline; }

    -->
    </style>

    <body>

    <p class="normal"> First character of this paragraph will 
    be normal and will have font size 40 px;</p>

    <p class="line">The first character of this paragraph will be 3em big
    and in red color as defined in the CSS rule above. Rest of the
    characters in this paragraph will remain normal. This example 
    shows how to use :first-letter pseudo element to give effect to
    the first characters of any HTML element.</p>

    </body>
</html> 
```

我可以同时在“p”标签上同时使用这个伪元素首字母和首行，如下面的代码所示？

```
<p class="normal"  "line"> First character of this paragraph will 
be normal and will have font size 40 px;</p> 

<p >The first character of this paragraph will be 3em big
and in red color as defined in the CSS rule above. Rest of the
characters in this paragraph will remain normal. This example 
shows how to use :first-letter pseudo element to give effect to
the first characters of any HTML element.</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:03:28.457

如果你想在 CSS 中拥有类“链接”，你必须将类名空间放在 quptation 标记中：

```
<p class="normal line">Blah 42</p> 
```

编辑：“链接”意味着第二个给定的类名可能会覆盖第一个给定类的属性。如果你想让它没有类名，你必须将你的 CSS 更改为：

```
p:first-line {blah...}
p:first-letter {blah..} 
```

我会建议你这样做。拥有一堆 css 类会让你的标记变得不可读。如果您想在特别是一个段落中使用它，您应该查看是否可以将特定的 CSS 定义添加到父元素：

```
p#myEmphasedParagraph:first-line {blah...}
p#myEmphasedParagraph:first-letter {blah...} 
```

在html中然后这个：

```
<p id="myEmphasedParagraph">blah</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:10:05.557

就像@wog 说的，你需要加入像`class="normal line"`. 这是一个 jsfiddle 来表明是的，你可以。[http://jsfiddle.net/3DnZD/](http://jsfiddle.net/3DnZD/)

# php - 为什么这个 `$_SESSION = $_POST` 会失败？

> ID：11701179
> 
> 赞同：0
> 
> 时间：2012-07-28T12:51:33.950
> 
> 标签：php, session, post

我在这里想念什么？这是我的 PHP 文件：

```
<?
session_start();

echo print_r($_SESSION);
echo "<br>";
echo print_r($_POST);

// Save input in session
$_SESSION = $_POST;
echo "test1";
?>

<br>
test2 
```

该文件是从表单提交访问的，我确定发布数据存在。输出是：

> 数组 ( [登录] => 1 ) 1
> 数组 ( [名称] => 测试 [类型] => 测试 ) 1
> test2

这对我来说毫无意义。内容`session`和`post`内容打印没有问题。

但是`$_SESSION = $_POST;`似乎失败了，脚本的其余部分直到`?>`没有给出任何响应，这很明显，因为`test1`没有打印文本。

我不知道`$_SESSION = $_POST;`. 我在 SO 和其他地方找到的所有问题都提供了这种在会话中存储帖子数据的方式。

我知道`session_start();`在任何输出之前都需要这样做。在这种情况下还需要其他东西吗？

我错过了什么？

* * *

**更新 - 测试文件**

完整测试文件的确切代码（*链接已删除*）是：

```
<?
session_start();
?>

<html>
<head>

</head>
<body>

<?

echo print_r($_SESSION);
echo "<br>";
echo print_r($_POST);

// Save input in session
$_SESSION = $_POST;
echo "test1";
?>

<p>test2</p>

<form method="post" action="test.php">
    Type something to test: <input type="text" name="testfield" id="testfield">
    <input type="submit" value="Submit">
</form>

</body>
</html> 
```

* * *

**更新 - 解决了吗？**

好的，现在解决了。但这很奇怪……

问题显然是由评论引起的。`//`停止脚本在括号`<?..?>`内运行。当我删除评论`// Save input in session`时，它会起作用......？

现在我在这里想念什么？它必须是一些php设置或其他东西。或者可能是某些已更改的文件或脚本数据。我想自从@CodeCaster 让它工作以来，我的电脑上发生了一些事情......但是评论在其他任何地方都有效吗？有没有人见过这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T13:00:48.800

您是否尝试过使用`$_SESSION['name'] = $_POST['name'];`？

在我用 PHP 编程的整个过程中，我从未使用过`$_SESSION = $_POST;`，也从未见过它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T13:01:08.467

我会改为`foreach`$_POST 并将其添加到`$_SESSION['mypostvars']`. 请记住，您应该在存储之前验证并验证 $_POST。

这是[PHP 合并 $_POST 到 $_SESSION的可能重复项](https://stackoverflow.com/questions/8570222/php-merge-post-into-session)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T13:57:06.813

使用 Xampp，该示例运行良好。'test1' 打印在成功发布之前和之后。使用 PHP 5.3.8。

在 Linux 上使用 PHP 5.3.6 进行测试，在两种情况下都可以很好地打印“test1”。

所以，似乎 PHP 不是这里的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-28T13:00:59.887

您可以修改 $_SESSION 但我不认为您可以像那样重新分配它。相反，将 $_POST 的成员复制到其中。尝试使用 array_merge() 但如果这不起作用，则编写一个 foreach 循环来执行此操作。

# gwt - 如何结合mgwt和mvp4g？

> ID：11701182
> 
> 赞同：0
> 
> 时间：2012-07-28T12:51:59.613
> 
> 标签：gwt, mvp, mvp4g, mgwt

有没有人有将 mvp4g 集成到 mgwt 的经验？由于 mgwt 似乎提供了特定的 ActivityManager/AnimationMapper 实现（请参阅[http://code.google.com/p/mgwt/wiki/GettingStarted](http://code.google.com/p/mgwt/wiki/GettingStarted)）我想知道您是否可以在 mvp4g 中获得相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:22:37.260

您可以将 mgwt 与任何 mvp 框架一起使用。它不对它做任何假设。

对于 GWT 中的活动和地点，尽管我们有一个特殊的实现。如果您想将它与另一个 MVP 框架一起使用，请使用 AnimationHelper，请参阅：

[http://code.google.com/p/mgwt/wiki/HelloWorldExample](http://code.google.com/p/mgwt/wiki/HelloWorldExample)

# android - 如何用 url 图片替换 R.drawable.*

> ID：11701183
> 
> 赞同：1
> 
> 时间：2012-07-28T12:52:02.987
> 
> 标签：android, android-imageview

```
private Integer[] ImgIds = { R.drawable.kk,
                            R.drawable.ww,
                            R.drawable.dd,
                            R.drawable.ee,
                            R.drawable.ff,
                            R.drawable.gg }; 
```

现在我想从 url 加载图像（例如`http://liquidcreativestudio.com/wp-content/uploads/2012/02/tv-icon.png`）

而且我仍然需要 Integer[] ImgIds.. R.drawable.* 并且 url 具有相同的图像有什么办法可以让我可以将来自 url 的图像的 id 放入我的数组中。而且我还需要使用这个 url images 来设置一些 imageviews ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:37:41.757

从 R.drawable id 设置 imageView 的图像（这是本地图像）和从 Internet 资源设置它是有区别的。在第二种情况下，您需要

*   获取 url 到 inputStream
*   将该 inputStream 转换为 Drawable
*   将该drawable设置为imageView

[在这里](http://bit.ly/LUAXcX)你可以找到一个很好的教程，可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:04:41.520

```
private Integer[] ImgIds = { R.drawable.kk,
                            R.drawable.ww,
                            R.drawable.dd,
                            R.drawable.ee,
                            R.drawable.ff,
                            R.drawable.gg };

String path = getResources().getString(ImgIds[i]);
                                       ^^^^^^^^^ 
```

# backbone.js - 不理解 Backbone 事件绑定的第三个参数

> ID：11701190
> 
> 赞同：1
> 
> 时间：2012-07-28T12:52:37.180
> 
> 标签：backbone.js

我正在阅读有关如何使用 Backbone.js 的信息，但与最新版本的 Backbone 库相比，似乎所有在线可用的文章都已过时？这没有帮助！

例如，我看到 nettuts 的一篇文章（首先出现在 Google 结果中）讨论了关于使用的讨论，`Backbone.Controller`但该文章已从 Backbone 中删除，因此难以发现。

但无论如何，我的问题是关于 Backbone 中的事件对象。

使用“视图”，您可以...

```
var ContactsView = Backbone.View.extend({
    initialize: function(){
        console.log('View initialized');
    },

    events: {
        'change select': 'displaySelected'
    },

    displaySelected: function (event) {
        console.log('get model data and display selected user', event);
    }
}); 
```

...但是您不能将`events`属性与 a 一起使用`Collection`，而是需要在方法中使用 jQuery 的 bind`initialize`方法...

```
var Contacts = Backbone.Collection.extend({
    model: Contact,

    initialize: function(){
        this.bind('add', this.model_added, this);
    },

    model_added: function(){
        console.log('A new model has been created');
    }
}); 
```

……首先，这是为什么呢？

但更重要的是，第三个论点`this`是为了什么？我查看了`bind`jQuery 文档（因为在 Backbone 网站上没有提及`bind`），它没有第三个参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:39:41.110

1)`Backbone.Controller`没有被删除，它被重命名为`Backbone.Router`，你可以在手册旁边查看[更改日志](http://backbonejs.org/#changelog)

2)`.bind`已重命名为，您可以检查[Backbone 文档](http://backbonejs.org/#Events-on)`.on`中的第三个参数（即`context`），在您已从[此处记录的文档](http://documentcloud.github.com/underscore/#bindAll)中，它分配给您指定的所有功能。`Backbone``_.bindAll``Underscore` `this`

3)`events`在 a 内部`View`是一些监听 DOM 事件（点击、鼠标悬停、鼠标按下等）的东西，当然你会知道触发了哪个 DOM 元素，`.bind`或者说`.on`当 an`.trigger`被调用时做了一些事情，整个 Backbone 代码充满了自定义触发器，以便您可以根据需要收到有关 model.add、model.remove、collection.reset 等的通知。另请查看[Backbone 文档](http://backbonejs.org/#View-delegateEvents)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T16:55:28.863

第三个参数是可选的——它提供了一种将上下文传递给处理函数的方法。

在 JavaScript 中，`this`是上下文相关的——它可以并且会根据你所在的对象而改变。通过传递`this`给可选`context`参数，您将传递您绑定事件的对象的范围。这样做可以让您在处理程序中使用相同的上下文。

# salesforce - 触发测试类

> ID：11701199
> 
> 赞同：0
> 
> 时间：2012-07-28T12:53:24.790
> 
> 标签：salesforce, apex-code

我正在为我的触发器编写一个测试类来检查帐户重复。但是我在测试类中收到以下错误：

> 错误：编译错误：比较参数必须是兼容类型：Schema.SObjectField，第 35 行第 42 列的字符串

测试类是：

```
@isTest

public class trg_AccountDuplicatePreventer_FinalTest{
    static testMethod void Test0_TestInsertWithValue()
    {

        //Set<Account> Accset = new Set<Account>();

        Account acc1 =  new Account(Name = 'Agency0', Phone='9811309977',Physical_Street__c = 'ABC0', Physical_State_Province__c = 'NY',Physical_Zip_Postal_Code__c = '2010',Physical_Country__c= 'USA');
        Account acc2 =  new Account(Name = 'Agency00', Phone='9811309988',Physical_Street__c = 'ABC00', Physical_State_Province__c = 'NY',Physical_Zip_Postal_Code__c = '2010',Physical_Country__c= 'USA');
        Account acc3 =  new Account(Name = 'Agency000', Phone='9811309999',Physical_Street__c = 'ABC000', Physical_State_Province__c = 'NY',Physical_Zip_Postal_Code__c = '2010',Physical_Country__c= 'USA');

        Account[] accs = new Account[]{acc1,acc2,acc3};
        insert accs;

        acc2.Phone='9811309999';
        acc3.Physical_Street__c='ABC0000';
        acc3.Phone='9811308888';
        update accs;

        Account dupe1 =  new Account(Name = 'Agency0', Phone='9811309977',Physical_Street__c = 'ABC0', Physical_State_Province__c = 'NY',Physical_Zip_Postal_Code__c =    '2010',Physical_Country__c= 'USA');

        try{
            insert dupe1;
            System.assert(false);
        }catch(DMLException e)
        {
            for (Integer i = 0; i < e.getNumDml(); i++)
            {
                 System.assert(e.getNumDml() == 1);
                 System.assert(e.getDmlIndex(i) == 0);
                 System.assert(e.getDmlFields(i).size() == 3);
                 System.assert(e.getDmlFields(i)[0] == 'Name');
                 System.assert(e.getDmlFields(i)[1] == 'Phone');
                 System.assert(e.getDmlFields(i)[2] == 'Physical_Street__c');
                 System.assert(e.getDmlMessage(i).indexOf('An account with this name, phone, street already exists.') > -1);
            }
        }
    }
} 
```

如何在我的测试代码中修复此错误？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:10:40.230

getDmlFields 返回 Schema.sObjectField 对象的列表，因此您需要将它们与其他 Schema.sObjectFields 进行比较，或者获取它们的名称以将它们与字符串进行比较。

```
System.assert(e.getDmlFields(i)[0] == Account.Name);
System.assert(e.getDmlFields(i)[1] == Account.Phone);
System.assert(e.getDmlFields(i)[2] == Account.Physical_Street__c); 
```

# ruby-on-rails-3 - 用样本（假）数据填充数据库

> ID：11701200
> 
> 赞同：2
> 
> 时间：2012-07-28T12:53:25.857
> 
> 标签：ruby-on-rails-3, populate

用示例数据填充开发数据库的最佳方法是什么？

FactoryGirl 似乎对测试有用，但不适合开发。Populator 未更新到 Rails 3。

我应该在 rake 任务中使用 Faker 或 Forgery 之类的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T17:33:41.110

我在 rake 任务中使用 ffaker 和 populator gems 在 Rails 3 项目中创建假数据。这是一个例子：

```
desc 'Create some fake tickets'
  task :tickets => :environment do
  Ticket.populate NUM_TICKETS do |t|
    t.title = Faker::Lorem.sentence(word_count=15)
    t.details = Faker::HipsterIpsum.paragraphs(sentence_count=3)
    t.group_id = rand(6)+1 # random group_id [1..6]
    t.status_id = 1
    t.priority_id = rand(3)+1 # random priority_id [1..3]
    t.contact_id = rand(NUM_CONTACTS)+1 # random contact_id [1..NUM_CONTACTS]
    t.creator_id = rand(6)+2 # random created_by [2..7]
    t.created_at = CREATION_PERIOD.sample
  end
end 
```

完整的 rake 任务： [https ://github.com/leesmith/ticket_mule/blob/edge/lib/tasks/faker.rake](https://github.com/leesmith/ticket_mule/blob/edge/lib/tasks/faker.rake)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T12:57:00.567

这看起来很有希望： [https ://github.com/paulelliott/fabrication](https://github.com/paulelliott/fabrication)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-08T19:18:45.357

在你的 Gemfile 中使用 faker gem，捆绑......然后......把它放在你的种子.rb

```
100.times do
  Post.create({
    title: Faker::Lorem.sentence(3),
    body: Faker::Lorem.paragraph,
    author_name: Faker::Name.name
    })
end 
```

$rake 数据库：种子

# jquery - 单击表格单元格内的链接时显示 div

> ID：11701205
> 
> 赞同：0
> 
> 时间：2012-07-28T12:54:39.423
> 
> 标签：jquery, toggle

可能很简单的事情，但我无法弄清楚。单击链接时，我想切换 div 的可见性。

所以这是我的情况

```
<table width="100%">
   <tr>
      <td>
         <a onclick='showDiv' />
      </td>
   </tr>
</table>
<div name='divToShow' style='display:none;' /> 
```

到目前为止我的代码：

```
// Then show the panel with substitute information
var control = $(parent).parent().parent().parent().find('div[name$="divToShow"]');
control.toggle(); 
```

所以我不确定如何实现这一点。任何人？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:59:05.973

为什么不给 div 分配一个 ID，然后使用 $('#id').toggle() 显示它？

基本示例：http: [//jsfiddle.net/fVXAC/](http://jsfiddle.net/fVXAC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:06:12.710

您可以使用 jQuery 的**toggle()**函数。

就像是;

```
$('#clickme').toggle(
function() {
    $('#mydiv').css({ 'display':'block' });
}, function() {
    $('#mydiv').css({ 'display':'none' });
}); 
```

这是工作演示：http: [//jsfiddle.net/CXHAW/](http://jsfiddle.net/CXHAW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T13:01:22.017

尝试这个

[http://jsfiddle.net/Eez4g/1/](http://jsfiddle.net/Eez4g/1/)

我认为这就是你想要做的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T13:14:19.093

元素 like`<a>`和`<div>`需要用`</a>`and关闭`</div>`，而不是自关闭。

一个`<a>`元素也应该有一个`href`属性，即使它只是`href="#"`.

```
$("a[onclick='showDiv']")​​​.on('click', function(e) { //find element based on onclick, would be better with an ID
    e.preventDefault(); //all <a> elements should have a href
    $(this).closest('table').next($("[name='divToShow']")).toggle();
})​​​​;​ 
```

[小提琴](http://jsfiddle.net/BnETg/)

如果您从了解 HTML 并编写正确的标记开始，那么使用 javascript 对您来说会变得容易得多。

# android - 多片段和活动交互设计

> ID：11701208
> 
> 赞同：0
> 
> 时间：2012-07-28T12:55:37.897
> 
> 标签：android, android-fragments

美好的一天，我有三个活动及其相应的片段`A`，`B`和`C`。片段`A`是静态片段，其他片段是动态的。

Activity`A`已经实现了 fragment 的监听器，用于横向`A`加载Fragment 或移动到单个窗格中的新屏幕。`B`

我想要的是当在片段中按下某个按钮`B`调用片段`C`时，我希望它被`C`横向的片段替换（片段`A`仍然存在）或在单窗格模式下显示一个新屏幕。`onCreate`我在活动 B方法中有这个简单的代码：

```
if (getResources().getConfiguration().orientation == 
            Configuration.ORIENTATION_LANDSCAPE) {
        finish();
        return;
    } 
```

我试图避免碎片到碎片的通信，因为它不受欢迎。那么这是否意味着我必须`B`在两个活动`A`中实现片段的侦听器`B`，我猜测当横向活动`A`会加载片段`C`和纵向时，`B`接管？有没有更好的办法？。我想只在活动中实现监听器并在横向时`B`传递给活动，但我认为由于上面的代码，它甚至在它通过之前就已经完成了。`A`有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:50:52.443

> ...所以这是否意味着我在活动 A 和 B 中都为片段 B 实现了侦听器，我猜测当在横向方向活动 A 会加载片段 C 和纵向时，B 接管还是有更好的方法？我想只在活动 B 中实现侦听器并在横向方向中传递给活动 A，但我认为由于上面的代码，它甚至在它通过之前就已经完成了。

您不能仅在`B`活动中实现侦听器，因为`A`活动必须能够以`C`横向显示片段。如果您担心代码重复，那么您可以实现一个基本活动，您可以为其实现回调以显示片段`C`并使您的两个活动从该基类扩展。

由于您没有发布任何有关如何管理这些片段的真实代码，请记住，如果您处于纵向（在`B`显示片段的活动中`B`）并且通过单击（或您所做的任何事情），您将用`C`此替换片段`A`如果您将方向切换为横向，则不会进行活动。

# python - 如何为美味派设置授权标头？

> ID：11701212
> 
> 赞同：2
> 
> 时间：2012-07-28T12:56:15.713
> 
> 标签：python, django, curl, tastypie

在请求中将值作为参数传递时，它可以工作：

```
curl "http://localhost:8080/wordgame/api/v1/rounds/?username=test_user&api_key=12345678907a9cb56b7290223165e0a7c23623df&format=json" 
```

但是，当我尝试将值作为标头传递时，它不起作用。这导致 401：

```
curl -H "Authorization: ApiKey test_user:12345678907a9cb56b7290223165e0a7c23623df" -H "Accept: application/json" http://localhost:8080/wordgame/api/v1/rounds/ 
```

我正在使用 Tastypie [ApiKeyAuthentication](https://django-tastypie.readthedocs.io/en/latest/authentication.html#apikeyauthentication)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T07:44:47.177

假设用户名/密钥正确，您的标题看起来正确..

尝试来自 github master 分支的版本，从 PyPI 安装的 pip 也不接受我的授权标头。

我这样做了：

`pip install https://github.com/toastdriven/django-tastypie/tarball/master --upgrade`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:56:43.237

很抱歉添加几乎重复的答案，但我还不能发表评论。我有同样的问题，正如另一个答案所提到的，我必须更新到最新的代码才能让它工作，因为它是在当前版本之后添加的。

需要注意的一点是，默认情况下，readthedocs 上的文档似乎跟踪最新的开发版本而不是特定版本。要更改此设置，您可以单击屏幕底部的“阅读文档”图像并选择您正在使用的版本。

# c - C 嵌入式系统堆栈和堆大小

> ID：11701215
> 
> 赞同：4
> 
> 时间：2012-07-28T12:57:08.803
> 
> 标签：c, embedded, heap-memory, system, stack-size

如何确定嵌入式系统上正在运行的 C 程序的当前堆栈和堆大小？另外，我怎样才能发现我的嵌入式系统允许的最大堆栈和堆大小？我考虑过线性调用 malloc() 并增加大小，直到找不到堆大小，但是我对堆栈的大小更感兴趣。

我正在使用 mbed NXP LPC1768，并且正在使用在 GitHub 上开发的名为 gcc4mbed 的离线编译器。

有更好的想法吗？非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T13:28:53.617

为此，请查看您的链接器脚本，这将定义您为每个脚本分配了多少空间。

对于堆栈大小的使用，请执行以下操作：

在内存初始化期间启动时（在 C main() 之前），将所有堆栈字节初始化为已知值，例如 0xAA 或 0xCD。运行你的程序，在任何时候你都可以停下来看看你还剩下多少魔法值。如果你没有看到任何魔法值，那么你的堆栈溢出了，奇怪的事情可能会开始发生。

在运行时，您还可以检查最后 4 个字节左右（可能是最后两个字，这完全取决于您）。如果它们与您的魔法值不匹配，则强制重置。这仅在您的系统在重置时表现良好并且最好快速启动并且没有执行“实时”或关键任务时才有效。

这是IAR关于该主题的一份[非常有用的白皮书。](http://www.iar.com/Global/Resources/Developers_Toolbox/Building_and_debugging/Mastering_stack_and_heap_for_system_reliability.pdf)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T13:03:47.817

在运行时测量当前堆栈大小的一种粗略方法是声明

```
 static void* mainsp; 
```

然后开始你`main` 的例如：

```
 int main(int argc, char**argv) {
    int here;
    mainsp = (void*) &here; 
```

然后在一些叶子例程中，当调用堆栈足够深时，执行类似于

```
 int local;
    printf ("stack size = %ld\n", 
            (long) ((intptr_t) &local - (intptr_t) mainsp)); 
```

从应用程序的完整源代码静态估计所需的堆栈大小通常是不可确定的（想想递归、函数指针），并且在实践中非常困难（即使在严格限制的应用程序类中）。看看[Couverture](http://libre.adacore.com/tools/coverage/)。你也可以考虑使用你的[插件定制一个最近的](https://gcc.gnu.org/onlinedocs/gccint/Plugins.html)[GCC](https://gcc.gnu.org/)编译器（可能是2021 年中期的[Bismon](https://github.com/bstarynk/bismon/)；给我发电子邮件），但这并不容易，而且会让你过于近似。`basile.starynkevitch@cea.fr`

如果使用 GCC 编译，您可能会使用[返回地址 bultins](http://gcc.gnu.org/onlinedocs/gcc/Return-Address.html)在运行时查询堆栈帧指针。在某些架构上，它不适用于某些优化标志。您还可以对最近的 GCC使用`-Wstack-usage=`*字节大小*和/或`-Wframe-larger-than=`*字节大小* [警告选项。](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)

至于堆和堆栈空间如何分布，这取决于系统。`/proc/self/maps`您可能会在 Linux 上解析文件。请参阅[proc(5)](https://man7.org/linux/man-pages/man5/proc.5.html)。[您可以使用setrlimit(2)](https://man7.org/linux/man-pages/man2/setrlimit.2.html)在用户空间中限制 Linux 上的堆栈空间。

但是请注意[赖斯定理](https://en.wikipedia.org/wiki/Rice%27s_theorem)。

对于多线程应用程序，事情可能会更加困难。阅读一些[Pthread 教程](https://computing.llnl.gov/tutorials/pthreads/)。

请注意，在*简单*的情况下，GCC 可能能够进行[尾调用](https://en.wikipedia.org/wiki/Tail_call)优化。您可以编译您`foo.c`的`gcc -Os -fverbose-asm -S foo.c`并查看生成的`foo.s`汇编代码。

如果您不关心可移植性，也可以考虑使用 GCC 的[扩展`asm`功能](https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)。

# c - 为什么 c-faq 16.7 解决方案不考虑填充字节？

> ID：11701216
> 
> 赞同：3
> 
> 时间：2012-07-28T12:57:18.203
> 
> 标签：c

[http://c-faq.com/strangeprob/ptralign.html](http://c-faq.com/strangeprob/ptralign.html)

在 16.7 中，作者解释说：

```
s.i32 = *(long int *)p;
s.i16 = *(int *)p; 
```

会遇到麻烦，因为这些强制转换的指针可能没有对齐。所以他改用字节操作来解决问题。

我的问题是，因为这段代码：

```
struct mystruct {
    char c;
    long int i32;
    int i16;
} s; 
```

在'char c;'之后会有填充字节，为什么作者在尝试获取'long int i32;'时没有跳过填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:27:47.600

请记住，这应该是一个常见问题列表。你必须阅读**Q**和**A**，就好像它们是由不同的人写的一样。从理论上讲，**Q**实际上是被不知道答案的人经常问到的东西。实际上，它可能不是直接引用实际问题，而是由常见问题列表维护者组成的问题的一种理想化版本。但是，在写**Q**部分时，作者采用了不同的角色。

在这种情况下，提问的角色不知道对齐或填充。他编写`char buf[7]`了结构定义并认为它们都应该是 7 个字节长。7 字节缓冲区是提问者试图解析的外部数据格式（在文件或网络协议流中），结构表示他想将其解析成的变量，而类似的语句`s.i32 = *(long int *)p;`是他的失败尝试正在做。

在**A**部分，我们的作者放弃了该角色，并给出了将数据从打包的 7 字节缓冲区传输到结构的正确方法。他没有解释应用于结构和字符缓冲区的对齐和填充规则的每个细节，因为他想保持答案简短。

您看到的是一个真正的老式新闻组常见问题解答列表，它旨在实际回答人们经常提出的问题，而不是企业网站样式的“常见问题解答”，其中营销团队编造虚假问题，旨在奉承公司，并避免回答任何投诉。（还有其他人记得当一个问题的常见问题解答和带有答案的常见问题解答列表的常见问题解答之间有区别吗？那去哪里了？）

# sql - 限制二进制哈希类型索引上的碎片

> ID：11701218
> 
> 赞同：2
> 
> 时间：2012-07-28T12:57:31.247
> 
> 标签：sql, sql-server, hash, indexing

我正在（实验性地）做一个项目，我必须将来自多个数据集的数据合并到一个 SQL Server 2012 数据库中。这些数据集中的一些数据是重复的，我正在研究一种检测和删除重复项的方法。我当前的测试是对数据项进行散列并检查重复的散列。到目前为止，这似乎工作得很好（如果有哈希冲突，这不是世界末日）。

我将此哈希作为“二进制（32）”存储在数据库中，每当我需要插入新行（我实际上正在使用 MERGE）时，我都会查找哈希值，如果不是则仅插入成立。我在哈希列上有一个索引来帮助这个搜索。

我遇到的问题是索引总是非常分散，我确信这一定会不必要地减慢速度。我认为这是由于二进制数据的近乎随机性。

是否有任何索引选项可以用来限制这种碎片？目前我只是使用默认值。任何线索将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T01:08:19.927

不幸的是没有答案，但我确实发现在插入阶段定期重建索引会有所帮助，但显然会带来额外的开销。这不是特别值得。我怀疑尝试填充因子也可能会有所帮助，但还没有时间对此进行全面调查。

# html - 边距顶部不起作用

> ID：11701222
> 
> 赞同：2
> 
> 时间：2012-07-28T12:58:03.353
> 
> 标签：html, css

当我使用左边距时，它可以工作。但边距顶部不起作用。任何人都知道为什么 on 起作用而另一个不起作用？

html代码

```
<div id="footer"> <!-- BEGIN FOOTER -->
<p class="copyright"> Copyright © </p>
</div> <!-- END FOOTER --> 
```

CSS

```
#footer {

background-image: url(../website/images/footer.png);
width: 1200px;
height: 100px;

}

p.copyright {

margin-top: 10px;
margin-left: 120px;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:22:20.033

这称为保证金崩溃。当一个块元素是另一个块元素的子元素时，就会发生这种情况。这里有几个方法来解决这个问题。

1-为元素添加边框

2-添加1px的填充

3-更改位置属性。绝对和相对定位框的边距不会塌陷。

我最近写了一篇关于此的博客文章以了解更多信息，请参阅[此处](http://www.eloux.com/css-margin-top-problem/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:20:45.630

试试[**这个**](http://jsfiddle.net/uttara/nFJgV/2/)

```
#footer {
    background-image: url(../website/images/footer.png);
    width: 1200px;
    height: 100px;
    position:absolute;
}

p.copyright {
    background-color:red;
    margin-top: 10px;
    margin-left: 120px;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T07:34:42.623

# 尝试这个：-

```
 #footer {
    background-image: url(../website/images/footer.png);
    width: 1200px;
    height: 100px;
    overflow:hidden; // add overflow
  }

  p.copyright {
    margin-top: 10px;
    margin-left: 120px;
  } 
```

# objective-c - 如何在 Cocoa WebView 中禁用 JavaScript？

> ID：11701232
> 
> 赞同：4
> 
> 时间：2012-07-28T12:59:38.500
> 
> 标签：objective-c, cocoa, webview

我想使用 Cocoa WebView 来显示电子邮件。[出于安全/隐私目的，我想禁用 JavaScript，但令人难以置信的是，在文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/DisplayWebContent.html#//apple_ref/doc/uid/10000164i)中找不到任何方法。

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:34:38.553

查看[-(WebPreferences *)preferences](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html#//apple_ref/doc/uid/20001903-BABGICHG)的`WebView`- [(void)setJavascriptEnabled:(BOOL)flag](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Classes/WebPreferences_Class/Reference/Reference.html#//apple_ref/doc/uid/20001900-BCICEJEF)选项。

# java - 进口、罐子和心痛

> ID：11701244
> 
> 赞同：3
> 
> 时间：2012-07-28T13:01:43.707
> 
> 标签：java

首先，让我先说我对 Java 完全陌生，但要让你知道它有多新；大约 2 个月前，我开始阅读大量书籍、示例等，并开始使用 Eclipse 编写 Java。但是，我发现了一个关于使用记事本和终端进行编程的非常酷的建议。新手走艰难的道路有点疯狂，但我喜欢挑战，而且我对学习很认真。

因此，在 Eclipse 中，我非常了解如何导入、添加 jar 编译等。当我开始使用 pico 并使用终端（我正在运行 ubuntu）进行编译时，一切都非常顺利，直到我想使用包。我花了两天时间把头发拔出来，因为无论我做什么，我都无法弄清楚。

我正在尝试使用 acm.jar（我在 Eclipse 中使用过很多次），但是在从终端中的 javac 编译时，我完全不知道如何使用它。

所以我要求的是有人解释让我的 jar 文件工作的过程。

我用来创建我的java程序的只是终端中的pico（或记事本）和javac。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:15:14.397

假设您的源文件位于`src`. 假设您希望编译的类位于`classes`. 假设您的源文件引用的类位于`lib/acm.jar`：

```
javac -cp classes:lib/acm.jar -d classes src/com/foo/bar/MyClass.java 
```

将编译该类`com.foo.bar.MyClass`并将生成的`MyClass.class`文件放入`classes/com/foo/bar`.

您需要`acm.jar`类路径中的文件。这就是`-cp lib/acm.jar`选项的作用。您还需要`classes`在类路径中，因为 MyClass 可能引用了您已经编译并且在您的`classes`目录中的其他类。

要运行你的类，它必须在类路径中，acm.jar 也是：

```
java -cp classes:lib/acm.jar com.foo.bar.MyClass 
```

如您所见，类路径包含 jar 文件，以及包含与包层次结构相匹配的文件夹层次结构的目录。

不过，我不会直接从命令行使用 javac。尝试使用真正的构建工具，它会一次构建所有类，例如 Gradle 或 Ant。Maven 也很受欢迎，但我非常讨厌它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:17:03.843

要使用外部库编译和运行 java 类，您必须将该库添加到类路径中。类路径是 java 编译器和 JVM 在编译/执行过程中查找所需的任何外部库/类的一组位置。

可以通过两种方式设置类路径：

1.  设置一个名为 CLASSPATH 的环境变量
2.  在运行 javac/java 时设置它

在运行 javac/java 时设置类路径如下：

```
javac -cp path/to/jar1:path/to/jar2:path/to/jar3:path/to/dirContainingClasses
yourMainClass.java 
```

跑步：

```
java -cp path/to/jar1:path/to/jar2:path/to/jar3:path/to/dirContainingClasses
yourMainClass 
```

: 在 Linux 上用作分隔符，供 windows 使用；

# javascript - @Html.ActionLink 中未调用 Javascript

> ID：11701247
> 
> 赞同：0
> 
> 时间：2012-07-28T13:02:13.147
> 
> 标签：javascript, jquery, asp.net-mvc-3, razor

我有以下 javascript test.js 文件：

```
$("#addItem").click(function () {
    alert("yup");
    $.ajax({
        url: this.href,
        cache: false,
        success: function (html) { $("#bandRows").append(html); }
    });
    return false;
}); 
```

我想用它来将一些 HTML 注入页面上的“bandRows”div。我在 MVC 3 应用程序中使用 Razor，如下所示：

**Index View**，其中包含在单击时注入部分视图 HTML 的链接：

```
@model IEnumerable<TariffBand>

        <script type="text/javascript" src="=@Url.Content("~/Scripts/jquery-1.3.2.js")"></script>
        <script type="text/javascript" src="=@Url.Content("~/Scripts/MicrosoftAjax.js")"></script>
        <script type="text/javascript" src="=@Url.Content("~/Scripts/test.js")"></script>

    <h2>Index</h2>

    @using (Html.BeginForm())
    {
    <div id="bandRows">
        @foreach (var band in Model)
        {
            Html.RenderPartial("BandEditorRow", band);
        }
    </div>

    @Html.ActionLink("Add band...", "Add", null, new { id = "addItem" })

    <input type="submit" value = "Done" /> 
```

目前，当我点击链接时，没有调用 javascript - 没有显示警报框 - 并且链接只是导航到“添加”部分视图，而不是将其注入到“bandRows”div 中。

谁能告诉我为什么？我以前没有使用过javascript，所以我显然做了一些愚蠢的事情，但我一生都无法解决。

**编辑**- 我已经修改了 .js 文件，所以处理程序是点击而不是点击。我还尝试将 html 助手修改为：

`@Html.ActionLink("add band...", "Add", null, new { onclick = "addItem" }`但仍然没有骰子。

谢谢大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:53:47.397

你有

```
$("#addItem").onclick(function () 
```

没有什么像`$.onclick`。

这将是

```
$("#addItem").click(function () 
```

# 编辑

`$().ajax({`应该`$.ajax({`

并且整个代码应该在`document.ready()`类似的范围内

```
$(document).ready(function(){
   $("#addItem").click(function (){
   .
   .
   .
}); 
```

# 编辑 - 2

正如您承认您对 javascript 世界非常陌生，我提供了详细代码：

```
<script type="text/javascript" src="=@Url.Content("~/Scripts/MicrosoftAjax.js")"></script>
@* <script type="text/javascript" src="=@Url.Content("~/Scripts/test.js")"></script> *@

<h2>Index</h2>

<script type="text/javascript">
    $(document).ready(function(){
        $("#addItem").click(function (){
            alert("yup");
            $.ajax({
                url: this.href,
                cache: false,
                success: function (html) { 
                    $("#bandRows").append(html); 
                }
            });
            return false;
        };  
    });
</script> 
```

`document ready`是入门时需要学习的非常初步的东西`jQuery`。[这](http://api.jquery.com/ready/)是`ready`事件的API文档。这是一个理解[教程](http://www.learningjquery.com/2006/09/introducing-document-ready)`document ready`。

# c# - Listview拖放 - 鼠标与触摸

> ID：11701251
> 
> 赞同：0
> 
> 时间：2012-07-28T13:02:40.867
> 
> 标签：c#, wpf, drag-and-drop, touch

我在 WPF 应用程序中遇到问题：将面板包装为列表框中的项目面板，它是 ScrollViewer 中的（列表框）。我也有很多可以拖放的按钮。问题是当我使用鼠标时它工作正常，但当我在触摸屏上运行应用程序时它不工作。我应该更改任何属性以便它可以在触摸屏上工作吗？

感谢您的任何回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:54:41.753

嗨，我从来没有这样做过，但我认为对于触摸屏，您将不得不使用 Stylus 事件。像 Drag 使用 StylusMove 等。我希望这会让你有所了解。

# android - Android：在我旋转移动设备而不是保持纵横比 4:3 后，所有 SurfaceView 都会全屏显示，

> ID：11701253
> 
> 赞同：1
> 
> 时间：2012-07-28T13:03:03.447
> 
> 标签：android, surfaceview

在我的 android 应用程序中，我正在使用 显示视频（逐帧）`SurfacView`，我在一个屏幕上显示 2、3、4 个 SurfaceView（视频）。视频 ( `Surfaceview`) 出现在远程用户启动他们的网络（桌面应用程序）时。我在 SurfaceView 中使用了 urfaceHolder.Callback。（工作完美）。当我旋转屏幕时，所有视频（Surface）彼此全屏显示，并且没有保持 4:3 分辨率的纵横比。我有 Override`onConfigurationChanged`方法来处理 SurfaceViews 的 UI 大小。当移动旋转时，我已经为所有方法`SurfacView`设置了布局。`onConfigurationChanged`全部`surfaceView`获取写入大小，我在`surfaceChanged`方法回调中检查了大小。但在此之后，所有表面都获得全屏尺寸，而不是我刚刚设置的。（我不会在我的移动旋转上重新创建活动，这是不可能的）。在此先感谢感谢和问候

# javascript - 如何在 .Net 中获取 javascript 的 Date.parse()？

> ID：11701254
> 
> 赞同：0
> 
> 时间：2012-07-28T13:03:03.820
> 
> 标签：javascript, .net, vb.net, json, datetime

我正在使用 .NET 生成一个包含许多`Date`s 的 JSON 文件。

对于压缩，我想将它们存储为自 1970 年 1 月 1 日以来的毫秒而不是字符串，然后将它们转换为 Javascript 日期。但是 .Net 自 1970-01-01 以来的毫秒概念与 Javascript 不匹配：

Javascript：

```
Date.parse("2012-05-15T13:57:57.0000000+00:00")
1337090277000 
```

VB.Net：

```
Date.Parse("2012-05-15T13:57:57.0000000+00:00").Subtract(New Date(1970,1,1)).TotalMilliseconds
1337101077000.0 
```

差别是`10800`秒。1970-01-01 的差异为 0，并随时间变化。

有没有一种方法可以从.Net 中计算 Javascript 的毫秒自纪元的概念？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T13:29:00.263

您正在将苹果与橙子进行比较。

这正是您在 UTC+3（以色列）中使用 javascript 时会得到的：

```
Date.parse("2012-05-15T13:57:57.0000000+00:00") - new Date(1970,1,1)
//1334419077000 
```

这是因为当您`new Date`使用 javascript 时，这是根据机器的时区。看起来对 vb.net 来说是一样的。

* * *

您将在 javascript 中获得正确的数字：

```
Date.parse("2012-05-15T13:57:57.0000000+00:00") - Date.UTC(1970,1,1)
//1334411877000 
```

在 VB.net

```
 Dim a As Date
    a = Date.Parse("2012-05-15T13:57:57.0000000+00:00").ToUniversalTime()
    Dim b As Date
    b = New Date(1970, 2, 1, 0, 0, 0, DateTimeKind.Utc)
    a.Subtract(b).TotalMilliseconds
    '1334411877000 Same as javascript
    'Note that in javascript, month as 1 is same as 2 in VB.net because months start at 0 in javascript 
```

# php - php变量中的逗号倒置

> ID：11701261
> 
> 赞同：-3
> 
> 时间：2012-07-28T13:04:14.510
> 
> 标签：php

我正在尝试将字符串分配给这样的变量

`$start "<?xml version="1.0" encoding="utf-8"?>"`

它给了我错误 PHP Parse 错误：语法错误，意外的 T_DNUMBER

我认为这是因为我在 and 之间插入了“也”？如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T13:05:23.610

用反斜杠转义它：

```
$start="<?xml version=\"1.0\" encoding=\"utf-8\"?>" 
```

或使用不同的报价：

```
$start='<?xml version="1.0" encoding="utf-8"?>'; 
```

有关详细信息，请参阅[*有关字符串的 PHP 手册页*](http://php.net/string)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:06:22.570

```
$start='<?xml version="1.0" encoding="utf-8"?>'; 
```

放单引号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T13:07:48.860

**反斜杠：**

```
$start = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" ; 
```

或者

使用**'**

```
$start = '<?xml version="1.0" encoding="utf-8"?>' ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T13:06:02.610

它应该是

```
$start = '<?xml version="1.0" encoding="utf-8"?>' 
```

# c# - tesseract 和 Tessnet 有什么区别？

> ID：11701264
> 
> 赞同：1
> 
> 时间：2012-07-28T13:04:34.550
> 
> 标签：c#, .net, ocr, tesseract, tessnet2

我一直在寻找关于如何设置 tesseract 或 tessnet 的教程或一些指导，而 tesseract wiki 只说关于训练 tesseract 3.01 或 2.0x。我能知道 tessnet 和 tesseract 有什么区别吗？我应该在 ac# 应用程序上使用哪一个？培训后，我应该将哪些文件用于 ocr 部分？

我真的很期待答案，因为我发布了一些关于此问题的问题，但我无法得到正确的答案，或者我无法找到有关此问题的完整指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T19:10:06.907

Tesseract 是一个用 C++ 编写的 OCR 引擎。Tessnet2 是 Tesseract 的 C# 包装器。我正在构建一个 WPF OCR 应用程序，并且我正在使用 Tessnet2，因此我可以用 C# 编写它而无需制作自己的包装器。

TessNet2 基于 Tesseract v2.04，自 2009 年 9 月以来一直没有更新。Tesseract 不断更新，现在是 3.01 版本（3.02 可用但未正式发布）。但是 TessNet2 包含了我需要的一切。

# memory-management - Boost::Python 对象与自定义删除器

> ID：11701273
> 
> 赞同：3
> 
> 时间：2012-07-28T13:05:19.097
> 
> 标签：memory-management, boost, boost-python

我正在尝试使用对 python 可见的工厂创建和删除一个对象。
该对象具有私有构造函数和析构函数，并且工厂生命周期必须大于它创建的对象。
看起来下面的代码应该做到这一点：

```
class_<Factory>("Factory")
    .def("CreateObject", &Factory::CreateObject,
         return_internal_reference<1, return_value_policy<manage_new_object>>());

class_<Object, boost::noncopyable>("Object", no_init); 
```

据我所知，它没有编译器或运行时错误。
问题是 boost 是如何知道如何销毁对象的？
我指定`manage_new_object`了它需要销毁它，但它不能调用析构函数，因为它是私有的，而且我没有提供工厂销毁方法的名称。
我该如何指定它？我可以添加另一个`def`，`Factory`但这意味着 python 代码将不得不处理对象的破坏并且可以有悬空的对象。
我想要做的是当这个对象的引用计数达到 0 时，要么`factory.DestroyObject(object)`会被自动调用，要么甚至会调用我只提供对象作为参数的静态函数（工厂可以从对象中恢复）。

# jquery - 使用 jquery 创建快速视图

> ID：11701275
> 
> 赞同：0
> 
> 时间：2012-07-28T13:05:28.260
> 
> 标签：jquery, html

我想为购物车创建快速视图，

问题1：当我将鼠标放在任何一个框上时，所有框上都会出现quickview，我怎样才能只在父节点中显示它。

问题 2：当我将鼠标放在快速查看链接上时，它一直在切换 .

这是我的代码

```
<html>
<title>Quick view </title>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<style type="text/css">
.quickview{
    margin:0px;
    position:absolute;
    margin-top:18%;
    margin-left:12%;
    border:1px;
    border-color:red;
    border-style:dotted;
    display:none;
}

.box{
    margin:10px;
    height:300px;
    width:400px;
    border:2px;
    border-color:green;
    border-style:solid;
    background-color:silver;
}
</style>

<script type="text/javascript">
    $(document).ready(function(){
                $(".box").bind('mouseover',function(event){
                        $(".quickview").stop(true,true).fadeIn(100);
        });
                $(".box").bind('mouseleave', function(e) {
                        $(".quickview").stop(true,true).fadeOut(100);
        });
    });
        </script>

</script>
</head>
<body>
<div style="margin:10px;">
<table>
    <tr>
        <TD>
            <div class="quickview">
                <a href="doo.php">Quick View</a>
            </div>
            <div class="box">
                <a href="foo.php">

                </a>
            </div>
        </TD>
        <TD>
            <div class="quickview">
                <a href="doo.php">Quick View</a>
            </div>
            <div class="box">
                <a href="foo.php">

                </a>
            </div>
        </TD>
    </tr>
    <tr>
        <TD>
            <div class="quickview">
                <a href="doo.php">Quick View</a>
            </div>
            <div class="box">
                <a href="foo.php">

                </a>
            </div>
        </TD>
        <TD>
            <div class="quickview">
                <a href="doo.php">Quick View</a>
            </div>
            <div class="box">
                <a href="foo.php">

                </a>
            </div>
        </TD>
    </tr>
</table>
</div>

</body>
</html> 
```

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:10:55.833

这是你想要的吗？

```
 $(".box").bind('mouseenter',function(event){
     $(this).prev(".quickview").stop(true,true).fadeIn(100);
 }).parent().bind('mouseleave', function(e) {
     $(this).find(".quickview").stop(true,true).fadeOut(100);
 });​ 
```

[演示](http://jsfiddle.net/qv8gX/2/)

# uml - OCL中方法的输入参数的测试类型

> ID：11701278
> 
> 赞同：2
> 
> 时间：2012-07-28T13:06:05.617
> 
> 标签：uml, ocl, magic-draw

我在UML中有一个看起来像这样的类（它是德语，但我认为没关系）：

![在此处输入图像描述](../Images/16aae5650720e788717df776831dd272.png)

第一种方法采用 4 个“ *Rohstoffkarte* ”的数组。那是一个抽象类，我有 5 个具体的子类。现在我想检查（使用 OCL）数组中的所有 4 个实例是否来自同一个子类。

知道怎么做吗？我正在使用 MagicDraw。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:42:34.783

您可以使用

`oclIsKindOf`,`oclIsTypeOf`检查类型一致性，并用于`oclType`获取对象的类型。

请参阅 OMG 对象约束语言规范版本 2.3.1，第 22 页

[http://www.omg.org/spec/OCL/2.3.1](http://www.omg.org/spec/OCL/2.3.1)

# c# - c# 引用引用

> ID：11701283
> 
> 赞同：-4
> 
> 时间：2012-07-28T13:06:30.717
> 
> 标签：c#, reference

有没有办法在 C# 中执行以下操作？

```
List<int> aList = new List<int>();
List<int> bList = new List<int>();
... // fill the list somehow
List<int> referece; //?????
if (doThis)
    referece = aList;
else
    referece = bList;

reference= .... assign another list to reference 
```

这在 C# 中可能吗？在 C++ 中，我会参考一个列表，但在 C# 中？

* * *

编辑：我纠正了我的例子。想法是，我想用新的/不同的列表替换列表，并且我想更改 aList 或 bList。当我分配一个新列表来引用时，aList 和 bList 不会改变。但这就是我真正想要的，更改 aList 或 bList。参考只是选择保存列表的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T13:09:49.027

问题出在哪里？

```
List<int> aList = new List<int>();
List<int> bList = new List<int>();
... // fill the list somehow
List<int> referece = null;
if (doThis)
    referece = aList;
else
    referece = bList;

if(reference != null)
    reference.DoSomethingWithSelectedList(); 
```

`List<T>`是 class （引用类型），因此任何类型的变量`List<T>`都是对 class 对象的引用`List<T>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:16:59.250

您需要一个扩展方法，`List<int>`如下所示：

```
 public static void DoSomethingWithSelectedList(this List<int> myList)
        {
            // your code
        } 
```

List 是 c# 中的引用类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T13:24:56.707

您应该设计自己的列表，而不是从 List 派生，而是实现 ICollection 接口添加您需要的所有方法

# backbone.js - 无法识别主干自定义事件触发器？

> ID：11701284
> 
> 赞同：6
> 
> 时间：2012-07-28T13:06:47.843
> 
> 标签：backbone.js

我是第一次学习 Backbone.js，我在尝试从触发中获取自定义事件（或从视图中识别它何时被触发）时遇到问题？

您可以在此处查看我的 Collection 代码：[https](https://github.com/Integralist/Backbone-Playground/blob/master/Assets/Scripts/App/main.js#L72-86) ://github.com/Integralist/Backbone-Playground/blob/master/Assets/Scripts/App/main.js#L72-86 ，它在初始化时会触发自定义`collection:init`事件。

```
var Contacts = Backbone.Collection.extend({
    model: Contact,

    initialize: function(){
        this.trigger('collection:init');
        this.bind('add', this.model_added, this);
    },

    model_added: function(){
        console.log('A new model has been created so trigger an event for the View to update the <select> menu');
    }
}); 
```

但稍后在我正在监听该事件的视图中，我无法`populate`触发该函数：[https://github.com/Integralist/Backbone-Playground/blob/master/Assets/Scripts/App/main。 js#L90-107](https://github.com/Integralist/Backbone-Playground/blob/master/Assets/Scripts/App/main.js#L90-107)

```
var ContactsView = Backbone.View.extend({
    initialize: function(){
        console.log(contacts.models, 'get initial model data and populate the select menu?');
    },

    events: {
        'collection:init': 'populate',
        'change select': 'displaySelected'
    },

    populate: function(){
        console.log('populate the <select> with initial Model data');
    },

    displaySelected: function (event) {
        console.log('get model data and display selected user', event);
    }
}); 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T16:04:33.650

视图中的事件哈希用于将*来自 DOM*的事件绑定到您的视图，例如由渲染视图中的元素引发的事件。要收听您的收藏引发的事件，您必须手动设置它们：

```
var ContactsView = Backbone.View.extend({
    initialize: function(){
        contacts.on("collection:init",this.populate,this);
    }
    ...
}); 
```

请注意，您使用的是全局联系人变量，我建议您使用 Backbone 机制并将您的集合传递给构造函数，就像使用 el 一样：

```
var ContactsView = Backbone.View.extend({
    initialize: function(){
        console.log(this.collection.models);
        this.collection.on("collection:init",this.populate,this);
    }
    ...
});

var contacts_view = new ContactsView({
    el: $('#view-contacts'),
    collection:contacts
}); 
```

正如@mu 在评论中所说，您的事件不会做任何事情，因为您在集合的初始化方法中触发它，该方法由集合的构造函数自动调用，因此在您可以绑定视图中的任何内容之前。请参阅此小提琴以可视化调用顺序：http: [//jsfiddle.net/yRuCN/](http://jsfiddle.net/yRuCN/)

在其他地方触发它，或者，如果我正确阅读了您的意图，您（可能）想要使用内置的重置事件：

```
var ContactsView = Backbone.View.extend({
    initialize: function(){
        this.collection.on("reset",this.populate,this);
    }
    ...
}); 
```

有关潜在用途的示例，请参见[http://jsfiddle.net/yRuCN/1/ 。](http://jsfiddle.net/yRuCN/1/)

# linux - Postfix 传输 - 收到邮件后调用脚本

> ID：11701285
> 
> 赞同：-1
> 
> 时间：2012-07-28T13:06:53.990
> 
> 标签：linux, postfix-mta

Debian Sid，来自 Sid 的最新后缀。

我需要在用户收到邮件后调用 bash 脚本。所以，我做了什么：

*   创建文件/etc/postfix/transport，例如：mail@domain.com myscript

*   运行命令创建数据库：postmap transport

*   添加到 main.cf：transport_maps = hash:/etc/postfix/transport

*   添加到master.cf：myscript unix - nn - - pipe user=michal flags=FR argv=/home/michal/test.sh

*   重新加载后缀

有什么问题？如果我这样配置，收到邮件后会执行脚本“test.sh”，但收到的邮件不会投递到邮箱，收到后会立即删除。

那么 - 如何避免这种情况？我需要执行脚本，但收到的邮件也应该发送到我的邮箱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:18:18.543

使用 Procmail。

```
:0c
| $HOME/test.sh 
```

该脚本接收标准输入的完整消息，但如果您不想自己解析消息，可以使用标准技术将标头值提取到 Procmail 变量中。您可以通过管道传输到`formail`：

```
SUBJECT=`formail -zcxSubject:` 
```

或者你可以进入 MATCH，它可以避免产生外部进程，但对于更复杂的任务来说有点棘手；

```
:0
* ^Subject:[  ]*\/.+
{ SUBJECT=$MATCH } 
```

（[ ] 内的空格应该是空格和制表符）；无论哪种方式，您现在都可以在命令行`$SUBJECT`上作为参数传入。`test.sh`显然，其他头值可以以类似的方式提取到变量中。

PS。您不能像这样内联 formail 调用，因为它会消耗来自管道的标准输入。

```
:0c
| $HOME/test.sh "`formail -zcxSubject:`"   # erroneous! 
```

相反，您需要将其拆分，如下所示：

```
:0
* ^Subject:[  ]*\/.+
{ SUBJECT=$MATCH }
:0c
| $HOME/test.sh "$SUBJECT" 
```

# css - div末尾逐渐透明的文本

> ID：11701289
> 
> 赞同：-1
> 
> 时间：2012-07-28T13:07:32.863
> 
> 标签：css

[我在这里](https://play.google.com/store/apps/details?id=com.aportela.diets.view)的描述文本末尾看到了一个简洁的效果，文本的最后一行逐渐变得越来越透明，我很好奇它是如何完成的。

已经就这个主题进行了[讨论](https://stackoverflow.com/questions/7069084/can-i-fade-text-out-at-the-end-of-a-div)，但我没有让 jsFiddle 按预期工作，而且许多其他回复似乎错过了 OP 的意图。

可行吗？如果是这样，没有供应商前缀是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:12:27.400

他们正在使用 CSS3 背景渐变，但您可以使用图像实现相同的效果。只需一个小png图像就可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:14:28.027

是的，您可以这样做，并且无需供应商前缀：将 a`div`放在文本区域上。在这里`div class="fadeout">`，您放置一个渐变为白色的图像，在该图像的顶部是透明的，在底部只有白色（或页面的背景色）。底层文本区域中的文本看起来像是淡出的。

图像可以用 CSS-Gradient 替换：

```
.fadeout {
    background-image: 
      -moz-linear-gradient(center top , rgba(255, 255, 255, 0) 20%, #FFFFFF 95%);
} 
```

但这有供应商特定的前缀。

# c# - 为什么这个字符串不能正确转义？

> ID：11701291
> 
> 赞同：0
> 
> 时间：2012-07-28T13:07:41.847
> 
> 标签：c#, .net, windows

我有一个如下字符串，虽然它在到达冒号时会引发错误，但我使用 @ 来转义所有内容：

```
string vmListCommand = @"vim-cmd vmsvc/getallvms | sed '1d' | awk '{if ($1 > 0) print $1":"$2}'"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:08:49.973

使用以下命令删除`@`和转义双引号`\`：

```
string vmListCommand = "vim-cmd vmsvc/getallvms | sed '1d' | awk '{if ($1 > 0) print $1\":\"$2}'"; 
```

你写了：

> 我用@来逃避一切

`@`是用来改变逃避的行为，而不是*逃避一切*。如果字符串带有前缀，`@`则转义序列 ( `\`) 将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:20:47.463

有一个字符需要在文字字符串中进行转义。双引号`"`。如果您不转义它，编译器如何知道哪些`"`是字符串的一部分，哪些会终止字符串？

`"`要在文字字符串中转义 a ，只需将其加倍：

```
 @"vim-cmd vmsvc/getallvms | sed '1d' | awk '{if ($1 > 0) print $1"":""$2}'" 
```

或者，您可以切换到正常的字符串语法，并使用`\`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T13:09:46.413

用于`\`字符串中的转义。

例子：

```
string str1 ="hello\\"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T13:12:12.410

您需要删除文字并转义

```
string vmListCommand = "vim-cmd vmsvc/getallvms | sed '1d' | awk '{if ($1 > 0) print $1\":\"$2}'"; 
```

# php - Facebook 重定向 ot url 而不是播放 swf

> ID：11701302
> 
> 赞同：0
> 
> 时间：2012-07-28T13:09:55.493
> 
> 标签：php, html, facebook, share

我对 Facebook 分享有一些奇怪的问题。我使用以下代码在 Facebook 上分享一个 swf 播放器。它共享播放器，并且可以在 Facebook 上使用，但仅限于我。对于其他用户，它只共享预览图像并单击它会重定向到 url，而不是附加播放器并播放它。

```
<meta property="fb:app_id" content="*****">
<meta property="og:title" content="Hallgassviccet"/>
<meta property="og:type" content="video"/>
<meta property="og:url" content="http://www.hallgassviccet.hu/index.php?id=1"/>
<meta property="og:video" content="http://www.hallgassviccet.hu/images/preview.swf?componentWidth=280&componentHeight=78&pathToFiles=http://www.hallgassviccet.hu/admin/player/&xmlPath=xml/settings.xml&artistName=Hallgass Viccet&songName=A szétvert budi&songURL=viccek/viccek_100907_a szetvert budi.mp3" />
<meta property="og:image" content="http://i1.ytimg.com/vi/H73O8zaHmAo/default.jpg">
<meta name="video_type" content="application/x-shockwave-flash" />
<meta property="og:video:width" content="280" />
<meta property="og:video:height" content="78" /> 
```

分享网址是：

```
<a title="Add a Facebook-hoz" onclick="window.open('http://www.facebook.com/share.php?u=http://www.hallgassviccet.hu/index.php?id=1');return false;" href="http://www.facebook.com/" target="_blank"><img border="0" src="images/facebook.png" onMouseOver="this.src='images/facebook_hover.png'" onMouseOut="this.src='images/facebook.png'" width="24" alt="Oszd meg Facebook-on" style="cursor:pointer;" /></a> 
```

这里有什么问题？为什么其他人不能在 Facebook 上使用 swf 播放器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:04:05.090

可能是因为其他人通过 HTTPS 登录，而您通过 HTTP 登录。Facebook 不会为通过 HTTPS 浏览的用户播放 SWF，除非 SWF 源也通过 HTTPS。

# c# - 泛型类型的特性/运算符重载在 C# 5.0 中是否得到改进？

> ID：11701304
> 
> 赞同：1
> 
> 时间：2012-07-28T13:10:21.473
> 
> 标签：c#, generics, types, type-conversion, constraints

我知道有很多这样的问题
`"Operator 'whatever' cannot be applied to operands of type 'T'`（可能是 ++、+= 或 <= 等等等。但请耐心等待，我想问一些不同的问题。

假设我有这个代码

```
public class GenericCls<T> where T : struct
{
    public static T AddValues(params T[] values)
    {
        T sum = default(T);
        if (values != null)
        {
            for (int i = 0; i < values.Length; i++)
            {
                sum += values[i];
            }
        }
        return sum;
    }
} 
```

即使我已经制作了我的类型结构和值类型，我也得到了错误 `Operator '+=' cannot be applied to operands of type 'T' and 'T'`

如果我尝试变得微妙并应用 ValueType 约束，它会说 `Constraint cannot be special class 'System.ValueType'`

如果我尝试将 for 循环中的参数转换为类型 T，然后执行此操作..

```
public class GenericCls<T> where T : struct, IComparable<T>, IEquatable<T>
{
    public static T AddValues(params T[] values)
    {
        T sum = default(T);
        if (values != null)
        {
            for (T i = default(T); i < values.Length; i++)
            {
                sum += values[i];
            }
        }
        return sum;
    }
} 
```

我仍然收到错误

`Operator '<' cannot be applied to operands of type 'T' and 'int'`
`Operator '++' cannot be applied to operand of type 'T'`
`Cannot implicitly convert type 'T' to 'int'`

无论如何，我无法让它工作。我正在使用 VS2010（C# 4.0、.NET 4.0）。所以我想知道 C# 5.0 何时最终与 VS2012 一起发布（据我所知它们仍处于 beta 阶段，对吗？）它会解决这些问题吗？还是我们再次对泛型的使用有如此多的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:34:06.747

没有语言改进是可能的，但是您必须使用一些技巧并且不能将其应用于现有的数字类型，而必须创建新的数字类型。其中之一是奇怪地反复出现的模式`class C<T> : where T : C<T>`。另一个技巧是使用静态委托进行操作。我定义了一个这样的数字类（为了简单起见，我只定义了加法）：

```
public abstract class Numeric<T>
    where T : Numeric<T>
{
    public static Func<T, T, T> Add;

    public static T operator +(Numeric<T> x, Numeric<T> y)
    {
        if (x == null) {
            return (T)y;
        }
        if (y == null) {
            return (T)x;
        }
        return Add((T)x, (T)y);
    }
} 
```

请注意，我们必须在重载运算符时指定至少一种类型`Numeric<T>`（一种类型必须始终是重载运算符的类）。另请注意，由于通用约束，我们可以强制`Numeric<T>`转换为`T``where T : Numeric<T>`

现在我们可以像这样声明一个计算器。由于`Numeric<T>`重载了`+`运算符，我们可以`+=`在这里使用。

```
public class Calculator<T> where T : Numeric<T>
{
    public static T AddValues(params T[] values)
    {
        T sum = default(T);
        if (values != null) {
            for (int i = 0; i < values.Length; i++) {
                sum += values[i];
            }
        }
        return sum;
    }
} 
```

现在让我们定义一个具体的 Numeric 类。在静态构造函数中，我们定义了静态`Add`委托。由于操作符是静态的，所以这个委托也必须是静态的，因为它是从操作符方法中调用的，而且由于静态成员不能是虚拟的，所以我们必须使用这个委托技巧。

```
public class Complex : Numeric<Complex>
{
    static Complex()
    {
        Add = (x, y) => new Complex(x.Re + y.Re, x.Im + y.Im);
    }

    public double Re { get; private set; }
    public double Im { get; private set; }

    public Complex(double re, double im)
    {
        Re = re;
        Im = im;
    }

    public override string ToString()
    {
        return String.Format("({0}, {1})", Re, Im);
    }
} 
```

现在让我们测试这个棘手的结构

```
static class Test
{
    public static void AddComplexNumbers()
    {
        // Using the calculator
        var numbers = new Complex[] { new Complex(2, 7), new Complex(6, -2) };
        var result = Calculator<Complex>.AddValues(numbers);
        Console.WriteLine(result); // ==> (8, 5)

        // Directly
        var c1 = new Complex(2, 7);
        var c2 = new Complex(6, -2);
        result = c1 + c2;
        Console.WriteLine(result); // ==> (8, 5)

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:11:57.840

不，它不会改善这个问题。C#5 将提供 async-await 和一些小功能。但不是与方法/运算符重载一起使用的泛型的扩展版本。

对于比较，您可以使用`IComparer<T>`and`IComparable<T>`作为解决方法，但对于算术，没有好的解决方案。有一些技术，但它们要么使 API 变得丑陋，要么很慢。

* * *

> 如果我试图变得微妙并应用 ValueType 约束，它会说“约束不能是特殊类`System.ValueType`”

此约束的等效项是`struct`关键字 ie `where T: struct`。但是限制到值类型并不会在这里为您带来任何好处。为什么会这样？有不支持算术的值类型，有支持的引用类型。因此，作为一个值类型与您的需求是正交的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T13:12:14.447

不幸的是，当前处于 RC 状态的 C# 5.0 没有任何变化。它主要关注异步编程。

# html - 徽标图像和 H1 标题在同一行

> ID：11701311
> 
> 赞同：72
> 
> 时间：2012-07-28T13:12:12.813
> 
> 标签：html, css, position, inline

我想创建我的第一个网页，但遇到了问题。

我有以下代码：

```
<img src="img/logo.png" alt="logo" />
<h1>My website name</h1> 
```

我想知道如何使徽标和 H1 在同一行。谢谢！

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-07-28T13:19:39.393

例如（[演示](http://jsfiddle.net/5Gy6K/)）：

HTML：

```
<div class="header">
  <img src="img/logo.png" alt="logo" />
  <h1>My website name</h1>
</div> 
```

CSS：

```
.header img {
  float: left;
  width: 100px;
  height: 100px;
  background: #555;
}

.header h1 {
  position: relative;
  top: 18px;
  left: 10px;
} 
```

[演示](http://jsfiddle.net/5Gy6K/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-28T13:15:08.133

试试这个：

1.  将这两个元素放在容器 DIV 中。
2.  给该容器属性溢出：自动
3.  使用 float:left 将两个元素都向左浮动
4.  给 H1 一个宽度，这样它就不会占据其父容器的整个宽度。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-28T13:15:15.710

如果您的图像是徽标的一部分，为什么不这样做：

```
<h1><img src="img/logo.png" alt="logo" /> My website name</h1> 
```

使用 CSS 更好地设置样式。

最好的做法是让您的徽标成为一个超链接，将用户带回主页。

所以你可以这样做：

```
<h1 id="logo"><a href="/"><img src="img/logo.png" alt="logo" /> My website name</a></h1> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-28T13:13:27.307

试试这个：

```
<img style="display: inline;" src="img/logo.png" alt="logo" />
<h1 style="display: inline;">My website name</h1> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-12T18:47:54.793

只需将 img 标签粘贴在 h1 标签内作为内容的一部分。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-28T13:24:33.647

你可以像比利护城河告诉你的那样做，将你的`<img>`and包裹`<h1>`在 a 中`<div>`并使用`float: left;`将你的图像浮动到左边，设置and 然后为你`<div>` `width`设置 a并使用来清除你的浮动元素。`line-height``h1``<div style="clear: float;"></div>`

**[小提琴](http://jsfiddle.net/bvGeG/1/)**

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-01-02T16:27:07.310

你可以通过只使用一行代码来做到这一点..

```
<h1><img src="img/logo.png" alt="logo"/>My website name</h1> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-08-07T15:32:12.687

我会使用引导程序并将 html 设置为：

```
<div class="row">
    <div class="col-md-4">
        <img src="img/logo.png" alt="logo" />
    </div>
    <div class="col-md-8">
        <h1>My website name</h1>
    </div>
</div> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-16T15:32:18.297

这是我的代码，标题标签中没有任何 div。我的目标/意图是用最少的 HTML 标记和 CSS 样式实现相同的行为。有用。

**whois.css**

```
.header-img {
    height: 9%;
    width: 15%;
}

header {
    background: dodgerblue;

}

header h1 {
    display: inline;
} 
```

**whois.html**

```
<!DOCTYPE html>
<head>
    <title> Javapedia.net WHOIS Lookup </title>
    <link rel="stylesheet" type="text/css" href="whois.css"/>
</head>
<body>
    <header>
        <img class="header-img" src ="javapediafb.jpg" alt="javapedia.net" href="https://www.javapedia.net"/>
        <h1>WHOIS Lookup</h1>
    </header>
</body> 
```

输出： [![结果](../Images/9ccbdb5b6cb7ba1b005cb4529f7b6598.png)](https://i.stack.imgur.com/SFeHF.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-28T13:13:21.897

在你的css文件中做`img { float: left; }`和`h1 {float: left; }`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-07-02T10:50:00.083

检查这个。

```
 .header{width:100%;
    }

    .header img{ width: 20%; //or whatever width you like to have

    }

    .header h1{

    display:inline; //It will take rest of space which left by logo.
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-20T06:36:52.830

```
<head>
<style>
header{
    color: #f4f4f4;
    background-image: url("header-background.jpeg");    
}

header img{
    float: left;
    display: inline-block;
}

header h1{
    font-size: 40px; 
    color: #f4f4f4;
    display: inline-block;
    position: relative;
    padding: 20px 20px 0 0;
    display: inline-block;
}
</style></head>

<header>
<a href="index.html">
    <img src="./branding.png" alt="technocrat logo" height="100px" width="100px"></a>
    <a href="index.html">
    <h1><span> Technocrat</span> Blog</h1></a>
</div></header> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-06-25T08:21:47.073

## 脚步：

1.  用容器 div 包围这两个元素。
2.  添加`overflow:auto`到容器 div。
3.  添加`float:left`到第一个元素。
4.  添加`position:relative; top: 0.2em; left: 24em`到第二个元素（顶部和左侧的值可能因您而异）。

# java - pendrive 的 JAVA 文件树模型慢

> ID：11701318
> 
> 赞同：1
> 
> 时间：2012-07-28T13:12:30.180
> 
> 标签：java, performance, scroll, treemodel, usb-drive

我正在开发一个应用程序，它将与通过 USB 访问的外部存储器一起工作。我已经实现了 TreeModel 来浏览磁盘上的目录。它适用于：

*   Ubuntu 上的本地磁盘
*   在 Ubuntu 上连接外部存储器
*   Windows 7 上的本地磁盘

但在 Windows 7 上连接的外部存储器很糟糕，我不知道为什么。以 pendrive 为根使用此模型滚动 JTree 非常有问题。一开始我认为`listFiles()`从 java.io.File 对于 pendrive 来说很慢，所以我在模型中添加了某种缓存，但它没有用 - 滚动仍然很糟糕。

我刚刚注意到它与 Look&Feel 有关。对于 Windows 上的系统 L&F，它很糟糕，对于 Nimbus L&F，它并没有那么糟糕，但仍然不完美。

文件树模型：

```
import java.io.File;
import java.io.FileFilter;
import java.io.Serializable;
import java.util.*;
import javax.swing.event.TreeModelEvent;
import javax.swing.event.TreeModelListener;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreePath;

public class FileTreeModel implements TreeModel {

    private File root;
    private boolean onlyFolders;
    private boolean showHidden;
    private final Object LEAF = new Serializable() {
    };
    private Map<File, Object> map;
    private LinkedList<TreeModelListener> listeners = new LinkedList<>();
    private FileFilter directoryFilter = new FileFilter() {

        @Override
        public boolean accept(java.io.File pathname) {
            return pathname.isDirectory();
        }
    };

    public FileTreeModel(File root, boolean onlyFolders, boolean showHidden) {
        this.root = root;
        this.onlyFolders = onlyFolders;
        this.showHidden = showHidden;
        this.map = new HashMap();
    }

    public FileTreeModel() {
    }

    public boolean isShowHidden() {
        return showHidden;
    }

    public void setShowHidden(boolean showHidden) {
        this.showHidden = showHidden;
    }

    @Override
    public Object getRoot() {
        return root;
    }

    public void setRoot(File root) {
        Object oldRoot = this.root;
        this.root = root;
        map.clear();
        TreeModelEvent event = new TreeModelEvent(root, new Object[]{root});
        for (TreeModelListener listener : listeners) {
            listener.treeStructureChanged(event);
        }
    }

    @Override
    public boolean isLeaf(Object node) {
        return ((File) node).isFile();
    }

    @Override
    public int getChildCount(Object parent) {
        if (parent instanceof java.io.File && ((java.io.File) parent).canRead()) {
            List<File> files = children(parent);
            int result = 0;
            for (java.io.File file : files) {
                if (((file.isDirectory() && onlyFolders) || !onlyFolders)
                        && ((!file.isHidden() && !showHidden) || showHidden)) {
                    result++;
                }
            }
            return result;
        }
        return 0;
    }

    @Override
    public Object getChild(Object parent, int index) {
        if (parent instanceof java.io.File) {
            List<File> files = children(parent);
            List<java.io.File> resultFiles = new LinkedList<>();
            for (java.io.File file : files) {
                if (((file.isDirectory() && onlyFolders) || !onlyFolders)
                        && ((!file.isHidden() && !showHidden) || showHidden)) {
                    resultFiles.add(file);
                }
            }
            return resultFiles.get(index);
        }
        return null;
    }

    @Override
    public int getIndexOfChild(Object parent, Object child) {
        if (parent instanceof java.io.File) {
            List<File> files = children(parent);
            List<java.io.File> resultFiles = new LinkedList<>();
            for (java.io.File file : files) {
                if (((file.isDirectory() && onlyFolders) || !onlyFolders)
                        && ((!file.isHidden() && !showHidden) || showHidden)) {
                    resultFiles.add(file);
                }
            }
            return resultFiles.indexOf(child);
        }
        return -1;
    }

    @Override
    public void valueForPathChanged(TreePath path, Object newvalue) {
    }

    @Override
    public void addTreeModelListener(TreeModelListener l) {
        listeners.add(l);
    }

    @Override
    public void removeTreeModelListener(TreeModelListener l) {
        listeners.remove(l);
    }

    //============================PRIVATE METHODS===============================
    protected List<File> children(Object node) {
        File f = (File) node;
        Object value = map.get(f);
        if (value == LEAF) {
            return null;
        }
        List children = (List) value;
        if (children == null) {
            File[] c = f.listFiles();
            if (c != null) {
                children = new ArrayList(c.length);
                for (int len = c.length, i = 0; i < len; i++) {
                    children.add(c[i]);
                    if (!c[i].isDirectory()) {
                        map.put(c[i], LEAF);
                    }
                }
            } else {
                children = new ArrayList(0);
            }
            map.put(f, children);
        }
        return children;
    }
} 
```

样品形式：

```
import folderlist.model.treemodels.FileTreeModel;
import java.io.File;
import java.util.Vector;
import javax.swing.DefaultComboBoxModel;

public class NewJFrame extends javax.swing.JFrame {

    public NewJFrame() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jComboBox1 = new javax.swing.JComboBox();
        jButton1 = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTree1 = new javax.swing.JTree();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jComboBox1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBox1ActionPerformed(evt);
            }
        });

        jButton1.setText("Refresh");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jTree1.setModel(new FileTreeModel());
        jScrollPane1.setViewportView(jTree1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jComboBox1, 0, 173, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jScrollPane1))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 189, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        DefaultComboBoxModel model = new DefaultComboBoxModel(getAvailableRoots());
        jComboBox1.setModel(model);
    }

    private void jComboBox1ActionPerformed(java.awt.event.ActionEvent evt) {
        File choosenRoot = (File) jComboBox1.getSelectedItem();
        if (choosenRoot != null) {
            FileTreeModel model = new FileTreeModel(choosenRoot, false, true);
            jTree1.setModel(model);
        }
    }

    public static void main(String args[]) {

        try {
//            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
//                if ("Nimbus".equals(info.getName())) {
//                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
//                    break;
//                }
//            }
            javax.swing.UIManager.setLookAndFeel(javax.swing.UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }

    private Vector<File> getAvailableRoots() {
        Vector<File> v = new Vector<File>(10, 1);
        File userHome = new File(System.getProperty("user.home"));
        if (userHome.isDirectory()) {
            v.addElement(userHome);
        }
        File[] roots = File.listRoots();
        for (File root : roots) {
            v.addElement(root);
        }
        String os = System.getProperty("os.name").toLowerCase();
        boolean isUnix = (os.indexOf("nix") >= 0 || os.indexOf("nux") >= 0);
        if (isUnix) {
            roots = new File("/media").listFiles();
            for (File root : roots) {
                v.addElement(root);
            }
        }
        return v;
    }

    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JComboBox jComboBox1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTree jTree1;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:37:30.790

两个问题（我可以看到）是：

1.  你没有缓存你的结果。文件列表是一项昂贵的操作，需要时间。在外部设备上更是如此。列出目录后，请维护该列表。如果您使用的是 Java 7，则可以使用[Fie Watcher Service](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)，否则，您将需要提供刷新选项。
2.  您应该将节点子节点的加载卸载到后台任务。看看[http://www.jroller.com/Thierry/entry/swing_lazy_loading_in_a](http://www.jroller.com/Thierry/entry/swing_lazy_loading_in_a)和[http://www.jroller.com/Thierry/entry/swing_lazy_loading_in_jtree](http://www.jroller.com/Thierry/entry/swing_lazy_loading_in_jtree)。虽然不完美，但尝试提供一个好主意

**更新**

当您查看代码时，会发生很多事情。对于单个节点，可能没什么大不了的，但是当您开始获得几个节点时，延迟将开始变得明显。

因此，每次树需要重新绘制时，它都会在每个单独的节点中爬行一个 call`getChildCount`和`getChildren`/或`getChildAt`. 这些方法中的每一种本质上都是一遍又一遍地做同样的事情。

```
@Override
public int getChildCount(Object parent) {
    if (parent instanceof java.io.File && ((java.io.File) parent).canRead()) {
        List<File> files = children(parent);
        int result = 0;
        for (java.io.File file : files) {
            if (((file.isDirectory() && onlyFolders) || !onlyFolders)
                    && ((!file.isHidden() && !showHidden) || showHidden)) {
                result++;
            }
        }
        return result;
    }
    return 0;
}

@Override
public Object getChild(Object parent, int index) {
    if (parent instanceof java.io.File) {
        List<File> files = children(parent);
        List<java.io.File> resultFiles = new LinkedList<>();
        for (java.io.File file : files) {
            if (((file.isDirectory() && onlyFolders) || !onlyFolders)
                    && ((!file.isHidden() && !showHidden) || showHidden)) {
                resultFiles.add(file);
            }
        }
        return resultFiles.get(index);
    }
    return null;
} 
```

最好有一个包含所有文件列表的子模型，然后基于属性 ( `showHidden`& `onlyFolders`) 生成一个缓存的子模型，然后可以使用该子模型生成每次调用的结果。

例如

```
@Override
public int getChildCount(Object parent) {
    int count = 0;
    if (parent instanceof java.io.File && ((java.io.File) parent).canRead()) {
        count = fileModel.getFilteredFiles().size();
    }
    return count;
} 
```

这只是一个暗示。

此外，根据最近的经验，`File.canRead()`&`File.canWrite()`可以在 UAC 处于活动状态的 Windows 7 机器上返回误报：P

# jasper-reports - 忽略碧玉报告中的字段

> ID：11701320
> 
> 赞同：0
> 
> 时间：2012-07-28T13:12:56.887
> 
> 标签：jasper-reports

我正在使用 jasper-reports 4.5.0。我有一个包含 4 个字段的 jrxml 文件。我对不同的不同实体类使用相同的 jrxml 文件。我的一个实体类只有三个字段。在这种情况下，它给出没有这样的方法异常。我怀疑具有三个字段的实体类，然后 jrxml 必须只使用三个字段并忽略第四个字段。我怎么能这样做。任何人对此有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T01:13:40.607

我不知道是否可以纯粹使用*JasperReports*，但我已经使用*DynamicJasper*完成了它。它在后台使用 JasperReports，但允许您动态创建报告。

# wolfram-mathematica - 我试图在 Mathematica 中用 NDSolve 求解一个非常简单的热传导微分方程，但我得到的解很奇怪……

> ID：11701327
> 
> 赞同：0
> 
> 时间：2012-07-28T13:14:34.313
> 
> 标签：wolfram-mathematica, precision, pde, deviation

这是一个非常简单的一维固相热传导微分方程，这是我的代码：

```
 a = NDSolve[{D[721.7013888888889` 0.009129691127380562` tes[t, x], 
     t] == 2.04988920646734`*^-6 D[tes[t, x], x, x], 
   tes[t, 0] == 298 + 200 t, tes[t, 0.01] == 298, 
   tes[0, x] == 298}, {tes[t, x]}, {t, 0, 0.005}, {x, 0, 0.01}]
Plot3D[tes[t, x] /. a, {t, 0, 0.005}, {x, 0, 0.01}, PlotRange -> All]
(Plot[(tes[t, x] /. a) /. t -> 0.0005, {x, 0, 0.01}, 
  PlotRange -> All]) 
```

运行后，您会看到：温度（在方程式中称为 tes）低于 298！太可笑了，这违反了热力学第二定律……这个错误是怎么来的？我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:45:39.330

我将只处理这个的数字方面。首先，缩放时间和空间，使您的方程在无量纲单位中变为 $\partial_t f=\partial_{x,x}f$。然后，例如，

```
a = NDSolve[{D[ tes[t, x], t] == D[tes[t, x], x, x], 
   tes[t, 0] \[Equal] 1,
   tes[t, 1] \[Equal] 1,
   tes[0, x] \[Equal] Cos[2 \[Pi]*x/2]^2},
  tes[t, x],
  {t, 0, 1},
  {x, 0, 1}
  ]

Plot3D[tes[t, x] /. a, {t, 0, .2}, {x, 0, 1}, PlotRange -> All, 
 AxesLabel \[Rule] {"t", "x"}] 
```

![数学图形](../Images/49c2dc0441186e2ee66d014d66db3d5b.png)

所以热量只是向内扩散（注意我改变了边界和初始条件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T13:00:55.907

这个问题在[这里](https://mathematica.stackexchange.com/a/10056/1871)解决了

我应该承认，在我发布这个问题的时候，我还没有抓住本质……</p>

# javascript - 如何使用 HTML5/JavaScript 检查连接类型（WiFi/LAN/WWAN）？

> ID：11701328
> 
> 赞同：29
> 
> 时间：2012-07-28T13:14:54.457
> 
> 标签：javascript, html, wwan

如果客户端通过 WWAN（计量）连接或其他方式连接，我希望将特定网站定制为低带宽版本。

连接类型对于站点了解它是否应该提供丰富的体验或带宽有效的体验很重要。我的桌面在计量连接上运行，并且在未来，更多的桌面将通过计量蜂窝网络（包括 Windows 8 平板电脑）连接，高效的网络应用程序应该尊重用户可能不需要在按次付费的高细节资产字节连接。

如何使用 HTML5/JavaScript 检查客户端是否通过 WiFi/LAN/WWAN 连接？

注意：我不希望明确检查浏览器标头（对于可以通过多种方法连接到 Internet 的桌面浏览器来说，这并不是真正的解决方案）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-28T13:43:59.363

见[`navigator.connection`](https://developer.mozilla.org/en/DOM/window.navigator.connection)（前缀）。此 API 公开有关客户端带宽的信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T13:20:37.570

你不能。关于客户端如何连接到服务器的信息（即，它使用哪些技术，是按字节付费还是按固定费率）是不公开的。如果这对您有帮助，您可能能够获得跟踪路线（与跟踪有关的所有问题），但该信息将无法通过 JavaScript 访问。

用 JS 可以做的就是简单的带宽测试。通过 XHR 下载一个已知大小的文件，并测量所需的时间。

连接的付费模式是绝对私人数据。它既不会被发送到互联网上的服务器，也不会被加载的网站使用。如果您需要此信息来为客户提供定制应用程序，请直接*询问用户*。如果他愿意，他会告诉你的。

* * *

然而，等等。可以设置最新的 Chrome 和 Firefox（用户偏好）以提供有关[实验`navigator.connection`对象](https://developer.mozilla.org/en/DOM/window.navigator.connection)的数据。

[`Windows.Networking.Connectivity`此外，对于开发 Metro 应用程序，Windows 提供了有关API](http://msdn.microsoft.com/en-us/library/windows/apps/br207308.aspx)的此类信息，请参阅[本教程](http://msdn.microsoft.com/en-us/library/windows/apps/hh750310.aspx)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T13:30:50.733

也许你以错误的方式接近它。看看 Gmail 模型。他们有一个富客户端，如果页面需要很长时间加载，用户可以选择退出。标准客户端更轻巧，并使用更“传统”的网页设计。
试图自动检测不应该存在的东西可能会让你陷入一个非常深的兔子洞。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-09T19:57:21.453

老问题，但在寻找自己的目的时，我发现了这个——我还没有尝试过，因此 YMMV：[https](https://github.com/ashanbh/detectClientSpeed) ://github.com/ashanbh/detectClientSpeed 。

测量下载资产的时间以获取带宽信息的基本概念是主观的，不一定一致，但缺少 iOS/Android 的原生平台 API，这不是一个坏选择。更轻松的替代方法可能是测量 google.com 之类的 ping 时间。

# php - 为什么这个 Symfony2 路由不起作用？

> ID：11701329
> 
> 赞同：1
> 
> 时间：2012-07-28T13:14:57.557
> 
> 标签：php, symfony

我在 Symfony2 中的路由有问题。

实际上我下载了最新版本并在我的服务器上运行它。该演示工作正常。

现在我想做以下事情：我想创建一个TestController，这个控制器应该有：

*   索引视图
*   像你好世界一样的景色
*   我可以传递2个参数的视图

所以我开始在`src\Acme\DemoBundle\Controller`名为`TestController`. 这是代码：

```
<?php

namespace Acme\DemoBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Acme\DemoBundle\Form\ContactType;

// these import the "@Route" and "@Template" annotations
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

class TestController extends Controller
{
    public function indexAction()
    {
        return array();
    }

    public function hello2Action($name1, $name2)
    {
        return array();
    }

    public function helloAction()
    {
        return array();
    }
} 
```

`src\Acme\DemoBundle\Resources\views\Test`然后我在一个名为的新文件夹中创建了 3 个视图`hello.html.twig`，`index.html.twig`并且`hello2.html.twig`

两个都有这样的内容

```
{% extends "AcmeDemoBundle::layout.html.twig" %}

{% block title "Symfony - Demos" %}

{% block content_header '' %}

{% block content %}
    foo!!!
{% endblock %} 
```

最后我编辑`routing.dev.yml`并添加了这样的东西：

```
_name1:
    resource: "@AcmeDemoBundle/Controller/TestController.php"
    type:     annotation
    prefix:   /test

_name2:
    resource: "@AcmeDemoBundle/Controller/TestController.php"
    type:     annotation
    prefix:   /test/hello

_name3:
    resource: "@AcmeDemoBundle/Controller/TestController.php"
    type:     annotation
    prefix:   /test/hello2/{name1}&{name2} 
```

当我想运行测试控制器时，我得到：

> 找不到“GET /test/”的路由

怎么了？是否可以为两个控制器功能提供一个视图？（比如 hello() 和 hello($foo)）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:01:11.680

你也可以这样做：

1.  在 routing_dev.yml 中，确保你有这个：

    ```
     _main:
         resource: routing.yml 
    ```

2.  在 routing.yml 中，添加如下内容：

    ```
     AcmeDemoBundle:
          resource: "@AcmeDemoBundle/Resources/config/routing.yml"
          prefix:   /test 
    ```

    您可以选择访问该特定捆绑包时所需的前缀。

3.  在 Acme/DemoBundle/Resources/config/routing.yml 你现在可以添加你的路由模式。

    ```
     name1:
          pattern: /
          defaults: { _controller: AcmeDemoBundle:Test:index }

      name2:
          pattern: /hello
          defaults: { _controller: AcmeDemoBundle:Test:hello }

      name3:
          pattern: /hello2/{name1}/{name2}
          defaults: { _controller: AcmeDemoBundle:Test:hello2 } 
    ```

您现在可以访问、路由**/test**、**/test/hello**和**/test/hello2/firstname/lastname'**。这只是在 symfony 2 中管理路由的一种方式。这可能会有所帮助：[http ://symfony.com/doc/current/book/routing.html](http://symfony.com/doc/current/book/routing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:20:57.593

两件事情：

*   您已经为“/test”定义了一个路由，但没有为“/test/”定义一个路由，这就是您收到第一条错误消息的原因（没有为“GET /test/”找到路由）。无论如何，最好按照另一个答案中的建议将路由定义为注释。

*   为了让控制器使用您正在使用的结构（返回和变量数组，在本例中为空数组），您需要使用“@Template”注释标记它们，如下所示：

> /*
> 
> ```
> * @Route("/hello/{name}", name="_demo_hello")
> * @Template()
> */    
> public function helloAction($name) 
> ```

这使得 Symfony 自动寻找相应的模板文件。如果您不这样做，则需要返回一个 Response 对象，指示应呈现的模板，如下所示：

```
return $this->render('AcmeDemoBundle:Test:index.html.twig'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T13:19:44.363

在您的路由中，您定义了前缀，但实际上没有定义路由。由于您使用的是注释 - 必须通过控制器中的注释定义路由。

请参阅这本[很棒的手册](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/routing.html)；）

你`routing_dev.yml`应该是这样的：

```
_name1:
    resource: "@AcmeDemoBundle/Controller/TestController.php"
    type:     annotation 
```

在你的控制器中，你应该为每个动作定义@Route：

```
/**
 * @Route("/hello")
 */
public function helloAction()
{
    return array();
} 
```

在此之后，您将能够通过路由`/hello`等访问您的操作。

干杯；）

# java - 在 Eclipse 中查看实时堆

> ID：11701337
> 
> 赞同：1
> 
> 时间：2012-07-28T13:15:41.100
> 
> 标签：java, eclipse, heap-memory

是否可以在执行时在 Eclipse 中看到程序的堆？有插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:31:46.397

我不知道是否有 Eclipse 插件，但如果重要的是获取信息而不一定是通过 Eclipse，那么您可以使用[JVisualVM](http://visualvm.java.net/)来做到这一点，并且有几个[插件](http://visualvm.java.net/plugins.html)可以提供您想要的所有详细信息。

它的[功能](http://visualvm.java.net/features.html)之一是您可以进行堆转储。

文档说：

> **获取并浏览堆转储。**当您需要浏览应用程序内存的内容或发现应用程序中的内存泄漏时，您会发现内置的 HeapWalker 工具非常方便。它可以读取以 hprof 格式编写的文件，还可以浏览由 JVM 在 OutOfMemoryException 上创建的堆转储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:17:47.247

Eclipse 确实有一个名为 Eclipse Memory Analyzer (MAT) 的插件。你可以在这里查看。我听说它对于堆分析和修复程序中的内存泄漏非常方便。

[http://www.eclipse.org/mat/](http://www.eclipse.org/mat/)

# actionscript-3 - 我的 AS3 项目需要预加载器吗？

> ID：11701338
> 
> 赞同：2
> 
> 时间：2012-07-28T13:15:55.403
> 
> 标签：actionscript-3, apache-flex

我刚刚开始使用命令行 Flex 4 编译器在 Linux 上开发 AS3/MXML 应用程序。运行时`mxmlc -source-path=. MyApp/Main.as`，我收到以下警告：

> /home/andreas/projects/as3/MyApp/src/MyApp/Main.as：警告：此编译单元没有在 Frame 元数据中指定 factoryClass 来加载配置的运行时共享库​​。要在没有运行时共享库​​的情况下进行编译，请将 -static-link-runtime-shared-libraries 选项设置为 true 或删除 -runtime-shared-libraries 选项。

另一个[SO 答案](https://stackoverflow.com/questions/3079112/compiling-with-flex4-sdk)说解决方案是链接到我的预加载器。我认为我的项目不需要预加载器，因为它很小；我可以忽略警告吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T21:21:01.150

如果您的项目非常小（例如小于 1 兆字节）并且您认为它不会被广泛使用，那么预加载器并不是完全必要的。正如 Zhafur 所说，拨号等连接速度较慢的人可能会感到困惑一段时间，但即便如此，小型应用程序也不应该花费太长时间。

但是，如果您对此感到困扰，对于嵌入网页中的任何 Flash 应用程序，预加载器可能是一个不错的选择。如果它很小，你不需要任何花哨的东西，只需一个简单的百分比计数就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:35:54.927

你应该做一个预加载器，即使你的文件非常小。如果你有一个预加载器最好，因为如果用户的互联网连接非常慢怎么办？或者加载时断开连接。

# jquery - jquery/livequery 在这种特殊情况下不起作用

> ID：11701340
> 
> 赞同：1
> 
> 时间：2012-07-28T13:16:11.623
> 
> 标签：jquery, livequery

使用 jquery，我的所有其他 livequery 功能都可以正常工作，我收到这个特定的错误...

```
$("[class*='welcome']").livequery("click", function(e){   etc....... 
```

错误是：

```
Uncaught TypeError: Object #<Object> has no method 'livequery' 
```

是因为通配符吗？还是一般的 jquery 错误？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T13:30:25.933

如果你想做的是

> 为现在和将来匹配当前选择器的所有元素附加一个事件处理程序

那么这是适当的语法：

```
$(document).on("click", "[class*='welcome']", function() {
    // do stuff
}); 
```

jQuery 的[`live()`](http://api.jquery.com/live/)函数曾经是要走的路，但从[`on()`](http://api.jquery.com/on/)jQuery 1.7 开始，它已被弃用，取而代之的是。

在这里演示：http: [//jsfiddle.net/zNXXk/](http://jsfiddle.net/zNXXk/)

# .net - Encoding.UTF8.GetString 不考虑 Preamble/BOM

> ID：11701341
> 
> 赞同：27
> 
> 时间：2012-07-28T13:16:38.267
> 
> 标签：.net, unicode, character-encoding, byte-order-mark

在 .NET 中，我正在尝试使用`Encoding.UTF8.GetString`方法，该方法采用字节数组并将其转换为`string`.

看起来此方法忽略了[BOM（字节顺序标记）](http://en.wikipedia.org/wiki/Byte_order_mark)，它可能是 UTF8 字符串的合法二进制表示的一部分，并将其视为字符。

我知道我可以`TextReader`根据需要使用 a 来消化 BOM，但我认为 GetString 方法应该是某种使我们的代码更短的宏。

我错过了什么吗？这是故意的吗？

这是一个复制代码：

```
static void Main(string[] args)
{
    string s1 = "abc";
    byte[] abcWithBom;
    using (var ms = new MemoryStream())
    using (var sw = new StreamWriter(ms, new UTF8Encoding(true)))
    {
        sw.Write(s1);
        sw.Flush();
        abcWithBom = ms.ToArray();
        Console.WriteLine(FormatArray(abcWithBom)); // ef, bb, bf, 61, 62, 63
    }

    byte[] abcWithoutBom;
    using (var ms = new MemoryStream())
    using (var sw = new StreamWriter(ms, new UTF8Encoding(false)))
    {
        sw.Write(s1);
        sw.Flush();
        abcWithoutBom = ms.ToArray();
        Console.WriteLine(FormatArray(abcWithoutBom)); // 61, 62, 63
    }

    var restore1 = Encoding.UTF8.GetString(abcWithoutBom);
    Console.WriteLine(restore1.Length); // 3
    Console.WriteLine(restore1); // abc

    var restore2 = Encoding.UTF8.GetString(abcWithBom);
    Console.WriteLine(restore2.Length); // 4 (!)
    Console.WriteLine(restore2); // ?abc
}

private static string FormatArray(byte[] bytes1)
{
    return string.Join(", ", from b in bytes1 select b.ToString("x"));
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-28T13:47:22.850

> 看起来此方法忽略了 BOM（字节顺序标记），它可能是 UTF8 字符串的合法二进制表示的一部分，并将其视为字符。

它看起来根本没有“忽略”它 - 它忠实地将其转换为 BOM 字符。毕竟就是这样。

如果你想让*你的*代码忽略它转换的任何字符串中的 BOM，这取决于你做...或使用`StreamReader`.

请注意，如果您*使用*`Encoding.GetBytes`后跟`Encoding.GetString` *或*使用`StreamWriter`后跟`StreamReader`，两种形式都将生成然后吞下或不生成 BOM 。只有当您将 a `StreamWriter`（使用`Encoding.GetPreamble`）与直接`Encoding.GetString`调用混合使用时，您才会得到“额外”字符。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-20T15:36:35.240

根据 Jon Skeet 的回答（谢谢！），我就是这样做的：

```
var memoryStream = new MemoryStream(byteArray);
var s = new StreamReader(memoryStream).ReadToEnd(); 
```

请注意，这可能只有在您正在读取的字节数组中有 BOM 时*才能可靠地工作。*如果没有，您可能需要查看[另一个 StreamReader 构造函数重载](https://msdn.microsoft.com/en-us/library/ms143456(v=vs.110).aspx)，它采用 Encoding 参数，以便您可以告诉它字节数组包含什么。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-12-12T10:32:50.220

对于那些不想使用流的人，我找到了一个使用 Linq 的非常简单的解决方案：

```
public static string GetStringExcludeBOMPreamble(this Encoding encoding, byte[] bytes)
{
    var preamble = encoding.GetPreamble();
    if (preamble?.Length > 0 && bytes.Length >= preamble.Length && bytes.Take(preamble.Length).SequenceEqual(preamble))
    {
        return encoding.GetString(bytes, preamble.Length, bytes.Length - preamble.Length);
    }
    else
    {
        return encoding.GetString(bytes);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T18:45:28.433

我知道我参加聚会有点晚了，但是如果您需要，这是我正在使用的代码（可以随意适应 C#）：

```
Public Function Serialize(Of YourXMLClass)(ByVal obj As YourXMLClass,
                                                      Optional ByVal omitXMLDeclaration As Boolean = True,
                                                      Optional ByVal omitXMLNamespace As Boolean = True) As String

    Dim serializer As New XmlSerializer(obj.GetType)
    Using memStream As New MemoryStream()
        Dim settings As New XmlWriterSettings() With {
                    .Encoding = Encoding.UTF8,
                    .Indent = True,
                    .omitXMLDeclaration = omitXMLDeclaration}

        Using writer As XmlWriter = XmlWriter.Create(memStream, settings)
            Dim xns As New XmlSerializerNamespaces
            If (omitXMLNamespace) Then xns.Add("", "")
            serializer.Serialize(writer, obj, xns)
        End Using

        Return Encoding.UTF8.GetString(memStream.ToArray())
    End Using
End Function

Public Function Deserialize(Of YourXMLClass)(ByVal obj As YourXMLClass, ByVal xml As String) As YourXMLClass
    Dim result As YourXMLClass
    Dim serializer As New XmlSerializer(GetType(YourXMLClass))

    Using memStream As New MemoryStream()
        Dim bytes As Byte() = Encoding.UTF8.GetBytes(xml.ToArray)
        memStream.Write(bytes, 0, bytes.Count)
        memStream.Seek(0, SeekOrigin.Begin)

        Using reader As XmlReader = XmlReader.Create(memStream)
            result = DirectCast(serializer.Deserialize(reader), YourXMLClass)
        End Using

    End Using
    Return result
End Function 
```

# javascript - 使用 Jquery 排列 html 表

> ID：11701343
> 
> 赞同：1
> 
> 时间：2012-07-28T13:16:58.337
> 
> 标签：javascript, jquery, html, html-table, jquery-selectors

假设我有这张桌子：

```
<table class="table table-striped table-bordered table-condensed">
    <tr>
        <th><h1>Tracks</td></th>
    </tr>
    <tr>
        <th>Track Id</th>
        <th>Artist</th>
        <th>Track Name</th>
        <th>Uploader</th>
        <th>Status</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Artist 1</td>
        <td>Track Name 1</td>
        <td>Uploader 1</td>
        <td>Blocked</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Artist 2</td>
        <td>Track Name 2</td>
        <td>Uploader 2</td>
        <td>Visible</td>
    </tr>
</table> 
```

通过 JQuery 如何根据值排列表行？假设我想显示仅包含表数据值的表行。我将如何通过 Jquery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:37:05.643

这是一个例子：

```
$('#search').on('keyup', function() {
    var val = $.trim(this.value).toLowerCase();
    $('table > tbody > tr:gt(1)').hide();
    if (val.length) {
        $('table > tbody > tr:gt(1) > td').filter(function() {
            return this.innerHTML.toLowerCase().indexOf(val) >= 0;
        }).parent().show();
    } else  $('table > tbody > tr:gt(1)').show();
}); 
```

*（这会给你一些指导）*

**[演示](http://jsfiddle.net/QK9Vy/3/)**

* * *

**相关参考：**

*   **[.gt()](http://api.jquery.com/gt)**

*   **[父>子选择器](http://api.jquery.com/child-selector/)**

*   **[。筛选（）](http://api.jquery.com/filter)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:45:56.997

***作为变体（[DEMO](http://jsfiddle.net/Y37Wu/3/)）：***

HTML

```
<input id="search" type="text">

<table id="table" class="table table-striped table-bordered table-condensed">
    <tr>
        <th>Track Id</th>
        <th>Artist</th>
        <th>Track Name</th>
        <th>Uploader</th>
        <th>Status</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Artist 1</td>
        <td>Track Name 1</td>
        <td>Uploader 1</td>
        <td>Blocked</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Artist 2</td>
        <td>Track Name 2</td>
        <td>Uploader 2</td>
        <td>Visible</td>
    </tr>
</table> 
```

​JavaScript

```
$(document).ready(function () {
    $('#search').keyup(function () {
        $('#table tr').show();
        var q = $(this).val().toLowerCase();

        $('#table tr:not(:first)').each(function () {
            var visible = false;

            $('td', this).each(function () { 
                var content = $(this).text().toLowerCase();                    
                if (content.indexOf(q) != -1) visible = true;
            });

            $(this).toggle(visible);
        });
    })
});​ 
```

[演示](http://jsfiddle.net/Y37Wu/3/)

# javascript - 为什么这个函数不给我它绑定的元素的名称？

> ID：11701346
> 
> 赞同：0
> 
> 时间：2012-07-28T13:17:32.943
> 
> 标签：javascript, jquery

我有一些用 class="tab" 定义的 html 元素。

在我的 jquery 文件中，我定义了以下函数：

```
 $('.tab').mouseleave( function() {
    alert($(this).name);
  }); 
```

当我触发 mouseleave 时，对于名为“Contact”的类“tab”的元素，我确实收到了警报 - 但它显示“未定义”。我期待看到“联系”。

$(this) 给了我什么 - 它实际上给了我 DOM 元素吗？

注意。最终，我希望能够计算出鼠标离开元素的哪一侧（北、南、东或西）。所以我正在做这个警报，以确保我实际上可以访问该元素的宽度和高度。到目前为止，我似乎无法访问该信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T13:22:50.077

`name`是一个原生 javascript 方法，你正在使用`$(this)`它，它是一个 jQuery 对象，而不是原生 DOM 元素，那就是`this`：

```
$('.tab').mouseleave( function() {
   alert(this.name);
});​ 
```

[小提琴](http://jsfiddle.net/cxdPK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:20:59.677

```
 $('.tab').mouseleave( function() {
    alert($(this).attr('name'));
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T13:19:20.987

`$(this)`给你一个包装原生 DOM 元素的 jQuery 对象。

`this`是您寻找的 DOM 元素。

[在这里](http://remysharp.com/2007/04/12/jquerys-this-demystified/)您可以找到更全面的描述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T13:19:57.443

名字是一个属性，对吧？所以检查 $(this).attr('name')

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-28T13:19:57.363

`$(this)`将为您提供 JQuery 对象。

`this`为您提供 DOM 元素。

`$(this).prop('name')`如果该 HTML 元素支持“名称”属性，您可以通过调用来获取名称。

“name”属性目前仅支持表单元素（input、select、textarea、form）；当 POST 动词发送到服务器时发送到服务器的名称-值对的“名称”部分（即，您使用“POST”方法发布表单）。

进一步阅读：

[http://forum.jquery.com/topic/please-explain-attr-vs-prop-change-in-1-6](http://forum.jquery.com/topic/please-explain-attr-vs-prop-change-in-1-6)

[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

[http://timmywillison.com/2011/When-to-use-.attr()-and-.prop().html](http://timmywillison.com/2011/When-to-use-.attr()-and-.prop().html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-28T13:19:57.643

jQuery 允许您像这样获取宽度和高度：

`$(this).height(); //is the computed height eg. 200 without the dimension`

对于您的特定代码示例，请尝试`$(this).prop('name');`或`$(this).attr('name'); //now deprecated`

这`foo`将从`<input name="foo" />`

如果您的元素具有 name 属性，您也可以尝试`this.name`，该属性只应用于`input`元素。但是，如果您没有该属性，它可能会返回 undefined 并引发错误。

`$(this)`是一个 jQuery 对象，其中包含 DOM 元素。`this`是直接的DOM元素。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-28T13:19:57.997

您正在使用 jQuery 对象、使用`attr`或`prop`函数来获取属性值：

```
$('.tab').mouseleave( function() {
    // either should work
    alert($(this).attr('name'));
    alert($(this).prop('name'));
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-28T13:38:46.087

这是因为 $ 给出了一个包装元素的数组。因此 $(this) 将是一个包含一个元素的数组。$(this).attr("name") 会给你名字，因为 attr 知道它是一个数组。如果您愿意，可以使用 $(this)[0].name 或简单地使用 this.name

# c# - ASP：我的数据字段自第二个 Page_Load() 以来为空

> ID：11701347
> 
> 赞同：0
> 
> 时间：2012-07-28T13:18:25.740
> 
> 标签：c#, asp.net

我的代码隐藏是：

```
public partial class Question2 : System.Web.UI.Page
{
    private SqlDataAdapter dataAdapter;
    private DataTable table;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            table = new DataTable();
            //And pull the data from my DB to the table
        }
    } 
```

我打算在单击页面的任何按钮后将我的数据（“表”）存储在班级的字段中。我发现再次调用 Page_Load() 并且我的所有数据字段都消失了。它们是“空的”。

我真的很困惑发生了什么O_O。我只需要存储我的表以供以后使用。但是为什么他们会迷路？什么时候丢的？请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:21:16.743

在 ASP.NET 中，对服务器的每个请求都会实例化（新）页面类，因此在您的第二个页面加载时，您将获得一个全新的对象，而不是您在第一个请求时拥有的对象。

如果数据在所有用户之间共享，您可以将数据存储在[应用程序状态字典中，如果不是，则可以将数据存储](http://msdn.microsoft.com/en-us/library/ms178594.aspx)[在会话状态字典](http://msdn.microsoft.com/en-us/library/ms178581.aspx)中。

```
// Store it:
Application["myTable"] = ...;

// Get it back on a new request:
DataTable table = (DataTable)Application["myTable"]; 
```

# android - Android - 如何设置相对于另一个控件的边距？

> ID：11701354
> 
> 赞同：0
> 
> 时间：2012-07-28T13:18:55.057
> 
> 标签：android, android-layout

我真的是 android 新手，非常感谢您的帮助。我有一个屏幕，上面有两种产品的不同模板。每个模板都是一个单独的 xml 文件，我在其中放置了一堆控件。每个控件在我用边距定义的屏幕中都有自己的确切位置。问题是我不知道上层TextView中的文本要多长时间。如果只有一行，一切看起来都很好，但是几行会破坏它。有什么方法可以拉伸上部文本视图，同时保持所有其余控件相对于该文本视图？代码是：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/regBackground"
    android:orientation="vertical" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/regBackground" >

        <TextView
            android:id="@+id/txtProductNameScreenD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="18dp"
            android:layout_marginTop="10dp"
            android:text="@string/empty"
            android:textColor="@color/_black"
            android:textSize="16sp"
            android:textStyle="bold"
            android:lines="1"
            android:ellipsize="end"
            android:scrollHorizontally="true"
            android:singleLine="true" >
        </TextView>

        <ImageView
            android:id="@+id/imgProductBcgD"
            android:layout_width="300dp"
            android:layout_height="263dp"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="40dp"
            android:src="@drawable/frame_product_screen" >
        </ImageView>

        <ImageView
            android:id="@+id/imgProductScreenD"
            android:layout_width="250dp"
            android:layout_height="260dp"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="42dp"
            android:background="@color/_white" >
        </ImageView>

        <ImageView
            android:id="@+id/imgProductScreendiscD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top|center"
            android:layout_marginTop="205dp"
            android:src="@drawable/discount_bkg_product_screen" >
        </ImageView>

        <TextView
            android:id="@+id/txtProdScreenPrice"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|top"
            android:layout_marginRight="45dp"
            android:layout_marginTop="220dp"
            android:ellipsize="end"
            android:lines="1"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="@string/empty"
            android:textColor="@color/_black"
            android:textSize="18sp" >
        </TextView>

        <TextView
            android:id="@+id/txtPriceShekelD1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|top"
            android:layout_marginRight="80dp"
            android:layout_marginTop="230dp"
            android:ellipsize="end"
            android:lines="1"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="@string/shekel_symbol"
            android:textColor="@color/_gray"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/txtBeforeDiscD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|top"
            android:layout_marginRight="25dp"
            android:layout_marginTop="237dp"
            android:ellipsize="end"
            android:lines="1"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="@string/before_discount"
            android:textColor="@color/_gray"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/txtProdScreenDiscount"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|top"
            android:layout_marginRight="140dp"
            android:layout_marginTop="220dp"
            android:ellipsize="end"
            android:lines="1"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="@string/empty"
            android:textColor="@color/_orange"
            android:textSize="18sp" >
        </TextView>

        <TextView
            android:id="@+id/txtDiscountD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|top"
            android:layout_marginRight="145dp"
            android:layout_marginTop="237dp"
            android:ellipsize="end"
            android:lines="1"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="@string/bonus"
            android:textColor="@color/_gray"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/txtProdScreenDiscountPrice"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left|top"
            android:layout_marginLeft="45dp"
            android:layout_marginTop="220dp"
            android:ellipsize="end"
            android:lines="1"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="@string/empty"
            android:textColor="@color/_black"
            android:textSize="18sp" >
        </TextView>

        <TextView
            android:id="@+id/txtPriceShekelD2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left|top"
            android:layout_marginLeft="30dp"
            android:layout_marginTop="230dp"
            android:ellipsize="end"
            android:lines="1"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="@string/shekel_symbol"
            android:textColor="@color/_gray"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/txtAfterDiscD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left|top"
            android:layout_marginLeft="30dp"
            android:layout_marginTop="237dp"
            android:ellipsize="end"
            android:lines="1"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="@string/after_discount"
            android:textColor="@color/_gray"
            android:textSize="10sp" />

        <Button
            android:id="@+id/btnShareFacebookD"
            android:layout_width="300dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="255dp"
            android:background="@drawable/facebook_button_product_screen" >
        </Button>

        <TextView
            android:id="@+id/txtDatePSDiscD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|center_horizontal"
            android:layout_marginRight="90dp"
            android:layout_marginTop="315dp"
            android:text="@string/exp_date"
            android:textColor="@color/_gray"
            android:textSize="14sp" >
        </TextView>

        <TextView
            android:id="@+id/txtDateProductScreenD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center_horizontal"
            android:layout_marginLeft="90dp"
            android:layout_marginTop="315dp"
            android:text="@string/empty"
            android:textColor="@color/_blue"
            android:textSize="14sp" >
        </TextView>

        <ImageView
            android:id="@+id/imgSeparatorProductScreenD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="345dp"
            android:src="@drawable/separator_product_screen" >
        </ImageView>

        <TextView
            android:id="@+id/txtDescriptionProductScreenD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="355dp"
            android:inputType="textMultiLine"
            android:text="@string/empty"
            android:textColor="@color/_black"
            android:textSize="12sp" >
        </TextView>
    </FrameLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:16:37.683

我可以使用以下参数将文本限制为单行

```
android:singleLine = "true" 
```

而且，你可以淡化它的边缘，只是为了让它看起来更好看

```
android:fadeScrollbars = "true" 
```

如果您希望用户能够阅读整个文本，您可以添加滚动效果。 [http://developer.android.com/reference/android/widget/TextView.html](http://developer.android.com/reference/android/widget/TextView.html)

# objective-c - 如果 NSString 为 NULL，则 NSInteger 返回 0

> ID：11701355
> 
> 赞同：1
> 
> 时间：2012-07-28T13:19:12.737
> 
> 标签：objective-c, ios, nsinteger

这可能是最简单的一个，但我无法找到确切的原因。下面是我的代码，而不是用文字来解释：

```
NSString *str = @"";
NSInteger tempInteger = [str integerValue];

if (tempInteger == 0)
{
  NSLog (@"do something");
} 
```

如果`NSString`返回`NULL`则`NSInteger`返回 0，如果`NSString`有一些值则`NSInteger`返回相同的值。

但是我想要什么时候`NSString`不应该返回0 但我无法验证为.`NULL``NSInteger``NULL``NSInteger``NULL`

如果为 NULL ，我如何获得`NULL`价值？`NSInteger``NSString`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T13:29:01.433

`NULL`是一个指针；NSInteger 是一个只能保存数字的 C 原语。NSInteger 不可能永远是`NULL`. （旁注：当我们谈到 Objective-C 对象指针时，我们使用`nil`而不是`NULL`.）

相反，如果您希望仅处理整数值为 0 而字符串*不是* `NULL`的情况，则应按如下方式更改条件：

```
if (tempInteger == 0 && str != nil) 
```

但是，在您的情况下，字符串不是`nil`; 它只是一个存在的——但空的——字符串。如果您还想检查这一点，您的情况可能会变成：

```
if (tempInteger == 0 && [str length] > 0) 
```

这会检查*这两种*情况，因为`nil`字符串将返回 length `0`。（实际上，发送到的任何方法`nil`都会根据返回类型返回`0`、`nil`、等。）`0.0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T13:40:06.280

实际上你可以实现这样的逻辑：

1.  检查您的字符串是否确实是整数
2.  尝试转换它
3.  如果它等于 0 做某事

像这样的东西可以解决问题：

```
NSString *str = @"";
NSInteger tempInteger = [str integerValue];
NSCharacterSet *cs = [NSCharacterSet decimalDigitCharacterSet];
BOOL safe = [cs isSupersetOfSet:[NSCharacterSet characterSetWithCharactersInString:str]] && str.length > 0;

if (safe && tempInteger == 0)
{
  NSLog (@"do something");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T13:22:34.417

一个整数只能保存一个坚果空值的数字。在这种情况下，您应该首先检查字符串的长度以检查它是否为空

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T13:31:03.477

`NSInteger`是标量变量类型。值`NULL`（实际上`nil`在 ObjectiveC 中），表示指向地址的指针`0`，当转换为 NSInteger 时将是`0`.

为了完成您的任务，您必须在将其转换为整数之前进行`NSString`比较。`nil`

```
if (str == nil)
{
   //our string is invalid
}
else
{
    tempInteger = [str integerValue];
} 
```

# php - 如何获取有关资源的更多信息？

> ID：11701356
> 
> 赞同：0
> 
> 时间：2012-07-28T13:19:14.807
> 
> 标签：php, file, resources

> **可能重复：**
> [在 PHP 中，使用 fopen() 将文件指针资源分配给变量后，如何从变量中获取文件名？](https://stackoverflow.com/questions/3621681/in-php-after-assigning-a-file-pointer-resource-to-a-variable-with-fopen-how)

例子：

`$this->resource = fopen('c:\wamp\www\some_file.txt', 'a');`

现在，如果我稍后尝试访问`$this->resource`，我会以不同的方法得到：

`Resource id #51: stream`

我也可以获得实际的文件路径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:33:09.857

除了使用 voodoo417 之外，您还可以像这样获取有关文件的信息

```
$infos = pathinfo('/www/htdocs/inc/lib.inc.php');

echo $infos ['dirname'], "\n";
echo $infos ['basename'], "\n";
echo $infos ['extension'], "\n";
echo $infos ['filename'], "\n"; 
```

- - - - - - - - - - - 输出 - - - - - - - - - - - - -

```
/www/htdocs/inc
lib.inc.php
php
lib.inc 
```

//来自 php.net

另见文件信息扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:27:15.180

这不是文件路径，这是打开文件的链接。它工作正常。现在您可以使用此资源（此上下文中的文件）。

# php - 什么时候在 PHP 和 MySQL 中使用“@”运算符

> ID：11701359
> 
> 赞同：1
> 
> 时间：2012-07-28T13:19:35.440
> 
> 标签：php, mysql, operators

> **可能重复：**
> [php中@符号的用途是什么？](https://stackoverflow.com/questions/1032161/what-is-the-use-of-symbol-in-php)
> [PHP 函数和@functions](https://stackoverflow.com/questions/3984864/php-functions-and-functions)
> [SQL 中的“@”符号有什么作用？](https://stackoverflow.com/questions/361747/what-does-the-symbol-do-in-sql)

在浏览本网站上的在线资源/问题（包括代码）时，我经常会遇到“@”运算符。

在我看到的 PHP 代码中，@ 运算符通常出现在诸如`@fread()`. 但是，从代码的外观来看，无论是否`fread()`在方法前面使用或不使用“@”来调用它实际上都不会产生影响。

在 MySQL 代码中，@ 运算符通常出现在列/字段名称之前。我相信 @ 用于访问用户在某个时候手动实例化的默认变量，就像`env`PHP 中的变量一样。

请你告诉我我的假设是否正确，如果不正确，何时以及为什么应该使用“@”符号或运算符？

谢谢，

最大限度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T13:21:30.440

在 PHP 中，这意味着抑制此函数引发的任何通知/警告，例如`mail()`，当它发送失败时会抛出错误。你可以做

`$Success = @mail(...)`

抑制错误并自己处理成功/失败。有关详细信息，请参阅[错误控制操作员](http://php.net/manual/en/language.operators.errorcontrol.php)页面。

在 MySQL 中，`@`用于为[用户定义的变量添加前缀](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:23:26.610

在 PHP 中，at 符号 (@) 表示该表达式可能生成的任何错误消息都将被忽略。

在 MySQL 中，名称前的 @ 表示本地的、用户定义的变量。

# c++ - 为什么一个函数的末尾有常量这个词，即使它确实改变了一个变量

> ID：11701375
> 
> 赞同：1
> 
> 时间：2012-07-28T13:20:36.443
> 
> 标签：c++

我对关键字“const”的理解是它告诉编译器，该函数不会修改任何变量，但在下面的示例中它会改变`b.d`。为什么？

```
myClass operator + (myClass b) const { b.d += d; return b; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:23:06.923

`const`函数不能修改`this`（调用对象）的变量（如果变量不是`mutable`）。在示例`this`中未修改。所以，这是正确的。

变量`b`是 class 的另一个对象`myClass`。

```
myClass operator + (myClass b) const 
```

是

```
myClass operator + (const myClass* this, myClass b) 
```

更好地使用`member-operator +=`and `not member operator +`，例如

```
myClass& myClass::operator += (const myClass& rhs)
{
    d += rhs.d;
    return *this;
}

myClass operator + (const MyClass& lhs, const MyClass& rhs)
{
   myClass tmp(lhs);
   tmp += rhs;
   return tmp;
} 
```

# java - Android 开发者 - TextView 不会显示

> ID：11701386
> 
> 赞同：2
> 
> 时间：2012-07-28T13:22:15.347
> 
> 标签：java, android

我刚开始尝试 Android 应用程序开发，所以我决定尝试一下 Android 自己的教程（这个：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)）

我的新活动中的文本视图不会显示。这是我的代码：

```
public class DisplayMessageActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /* Get the intent and the message sent with it */
        Intent intent = getIntent();
        String message = intent.getStringExtra(GoogleTutActivity.EXTRA_MESSAGE);

        /* Create a new textview where we can show the message the user sent */
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        setContentView(R.layout.activity_display_message);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:28:28.223

您没有将 textview 添加到布局中。
1\. `setContentView(textView);`
2\. 或者将textview添加到xmlactivity_display_message并设置id。然后

```
 TextView textView = (TextView) findViewById(R.id.your_textview_id);
 textView.setTextSize(40);
 textView.setText(message); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T00:08:25.433

我刚刚完成了本教程作为复习，并遇到了同样的问题。本教程没有明确声明要删除该行`setContentView(R.layout.activity_display_message)`，所以我最终有两次调用`setContentView()`. 这是不允许的。

两种解决方案将起作用。使此演示工作**的最简单方法**`setContentView(R.layout.activity_display_message)`是删除该行。那么活动将只有一个`setContentView()`，即`setContentView(textView)`在结束时声明`onCreate`。这将在其上方几行使用程序化 TextView。

**更好的解决方案**是在 res/layout 文件夹中为此活动创建一个布局，并将`TextView`详细信息放在那里而不是`onCreate()`.

# matlab - 获取包含两个数字之间的值的索引向量

> ID：11701389
> 
> 赞同：2
> 
> 时间：2012-07-28T13:22:36.753
> 
> 标签：matlab, vector, slice

我有一个名为 的向量`time`，其中包含时间值。我想获得一个索引向量，`time`其中的值在 threshold`x`和 threshold之间`y`。

这无疑是微不足道的，但我在这里有点用 Matlab 语法挣扎。任何帮助将不胜感激。

BLZ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:28:20.680

```
time=5:20
idx = find(time > 10 & time < 15) % indices
values=time(time(:)>10 & time(:)<15) % values 
```

这给

```
time =

     5     6     7     8     9    10    11    12    13    14    15    16    17    18    19    20

idx =

 7     8     9    10

values =

    11    12    13    14 
```

# mysql - 64 位 Mac OSX 上的 mysql 工作台

> ID：11701392
> 
> 赞同：1
> 
> 时间：2012-07-28T13:22:53.507
> 
> 标签：mysql, macos, mysql-workbench

我需要在 64 位 Mac OSX 上安装 mysql Workbench，但下载页面上似乎只有 32 位：http: [//dev.mysql.com/downloads/workbench/5.2.html](http://dev.mysql.com/downloads/workbench/5.2.html)

有谁知道有64位的吗？还是在 64 位 Mac 上安装 32 位版本可以吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:25:05.437

您可以安装 32 位版本，它会运行得很好，我是在我自己的 Mac 上安装的。

# jquery - 如何根据浏览器窗口宽度改变div的高度

> ID：11701395
> 
> 赞同：0
> 
> 时间：2012-07-28T13:23:17.070
> 
> 标签：jquery, gallery, fullscreen

我希望实现填充屏幕的“全屏”照片库的效果，但也允许上方固定高度的内容，以及可以滚动到下方的内容。

我知道这有点抽象，所以这里有一个例子： http: [//pixelthemes.net/immersion/](http://pixelthemes.net/immersion/)

*   请注意如何调整浏览器窗口的大小，但几乎全屏的画廊“粘”在浏览器窗口的底部，同时仍允许您使用滚动条查看其下方的内容
*   请注意，即使您调整浏览器窗口的大小，上述行为也是一致的

上面的示例使用 jquery 画廊“超大”，但我将使用 Galleria（最新版本有一个“响应”选项，允许动态调整画廊舞台的大小）。

当然，使用全屏画廊，总会有裁剪——但这对我来说不是问题。

我认为这对于纯 CSS 是不可能的，那么如何使用现有的 jquery 插件来实现呢？

更好的是，我觉得这可以使用 Galleria API (http://galleria.io/docs/api/methods/#display) 来完成，但我没有足够的经验来确切地知道如何操作。

# automated-tests - testNG 测试用例以特定顺序执行以及从特定测试用例开始的能力

> ID：11701397
> 
> 赞同：0
> 
> 时间：2012-07-28T13:23:25.567
> 
> 标签：automated-tests, testng

如何使 testNG 测试用例以特定顺序执行以及从特定测试用例开始执行的能力。

例如。如果您运行以下套件

```
@Test
public class Test1 {
@Test
public void test1() {
    System.out.println("test1");
}

@Test(dependsOnMethod = "test1")
public void test2() {
    System.out.println("test2");
}

@Test(dependsOnMethod = "test2")
public void test3() {
    System.out.println("test3");
}
} 
```

测试用例的执行顺序始终是 test1、test2、test3。但是说有时我想从 test2 而不是从 test1 开始执行，即我想运行 test2，然后是 test3，而不运行 test1。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T08:18:22.310

我的建议是将您的测试添加到组中，然后使用 testng.xml 从外部控制行为，方法是指定`<group>`让我知道您是否需要进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:30:45.167

您可以使用`IAnnotationTransformer`将 的`enabled`属性`@Test`转换为 的`false`。但是，您还必须调整依赖关系。

我认为将这个逻辑放入您的测试方法本身可能更简单（如果某个条件为真，则什么都不做，而不是运行测试及其断言）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-28T05:51:51.057

简单的想法是为不同的测试设置优先级；请记住，优先级的默认值 = 0。

```
@Test(priority=1)
public void t1(){}

@Test
public void t0(){}

@Test(priority=2)
public void t2(){}

@Test(priority=3)
public void t3(){} 
```

所以执行顺序将是 t0 -> t1 -> t2 -> t3。t0 首先执行，因为它的优先级默认设置为 0。

希望这可以帮助。

# java - 在java中四舍五入到小数点后2位？

> ID：11701399
> 
> 赞同：243
> 
> 时间：2012-07-28T13:23:42.057
> 
> 标签：java

我已经阅读了很多 stackoverflow 问题，但似乎没有一个对我有用。我`math.round()`用来四舍五入。这是代码：

```
class round{
    public static void main(String args[]){

    double a = 123.13698;
    double roundOff = Math.round(a*100)/100;

    System.out.println(roundOff);
}
} 
```

我得到的输出是：`123`但我希望它是`123.14`。我读到添加`*100/100`会有所帮助，但正如你所看到的，我没有设法让它工作。

输入和输出都必须是双精度的。

如果您更改上面代码的第 4 行并将其发布，那将有很大帮助。

* * *

## 回答 #1

> 赞同：517
> 
> 时间：2012-07-28T13:41:21.460

**好吧，这个工作...**

```
double roundOff = Math.round(a * 100.0) / 100.0; 
```

输出是

```
123.14 
```

或者正如@Rufein 所说

```
 double roundOff = (double) Math.round(a * 100) / 100; 
```

这也将为您完成。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2012-07-28T13:26:31.920

```
 double d = 2.34568;
     DecimalFormat f = new DecimalFormat("##.00");
     System.out.println(f.format(d)); 
```

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2012-07-28T13:40:56.487

```
String roundOffTo2DecPlaces(float val)
{
    return String.format("%.2f", val);
} 
```

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2012-07-28T13:26:10.813

```
BigDecimal a = new BigDecimal("123.13698");
BigDecimal roundOff = a.setScale(2, BigDecimal.ROUND_HALF_EVEN);
System.out.println(roundOff); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-07-28T13:26:21.680

返回您的代码，并替换`100`为`100.00`并让我知道它是否有效。但是，如果你想正式一点，试试这个：

```
import java.text.DecimalFormat;
DecimalFormat df=new DecimalFormat("0.00");
String formate = df.format(value); 
double finalValue = (Double)df.parse(formate) ; 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-03-10T07:24:25.307

`BigDecimal`我知道这是 2 岁的问题，但是每个人都面临着在某个时间点四舍五入的问题。我想分享一种不同的方式，它可以通过使用类为我们提供任何规模的四舍五入值。在这里我们可以如果我们使用`DecimalFormat("0.00")`或 using ，避免获得最终值所需的额外步骤 `Math.round(a * 100) / 100`。

```
import java.math.BigDecimal;

public class RoundingNumbers {
    public static void main(String args[]){
        double number = 123.13698;
        int decimalsToConsider = 2;
        BigDecimal bigDecimal = new BigDecimal(number);
        BigDecimal roundedWithScale = bigDecimal.setScale(2, BigDecimal.ROUND_HALF_UP);
        System.out.println("Rounded value with setting scale = "+roundedWithScale);

        bigDecimal = new BigDecimal(number);
        BigDecimal roundedValueWithDivideLogic = bigDecimal.divide(BigDecimal.ONE,decimalsToConsider,BigDecimal.ROUND_HALF_UP);
        System.out.println("Rounded value with Dividing by one = "+roundedValueWithDivideLogic);

    }
} 
```

这个程序会给我们下面的输出

```
Rounded value with setting scale = 123.14
Rounded value with Dividing by one = 123.14 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-03-16T05:13:14.663

尝试 ：

```
class round{
public static void main(String args[]){

double a = 123.13698;
double roundOff = Math.round(a*100)/100;
String.format("%.3f", roundOff); //%.3f defines decimal precision you want
System.out.println(roundOff);   }} 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2012-07-28T13:29:02.370

```
double roundOff = Math.round(a*100)/100; 
```

应该

```
double roundOff = Math.round(a*100)/100D; 
```

将 'D' 添加到 100 使其成为 Double 字面量，因此产生的结果将具有精度

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-03-13T12:57:49.170

**这是一个很长但完整的证明解决方案，永远不会失败**

只需将您的数字作为双精度数传递给此函数，它将返回您将十进制值向上舍入到最接近的值 5；

如果为 4.25，则输出 4.25

如果是 4.20，输出 4.20

如果是 4.24，输出 4.20

如果为 4.26，则输出 4.30

如果要四舍五入到小数点后 2 位，请使用

```
DecimalFormat df = new DecimalFormat("#.##");
roundToMultipleOfFive(Double.valueOf(df.format(number))); 
```

如果最多 3 个位置，则 new DecimalFormat("#.###")

如果最多 n 个位置，则 new DecimalFormat("#. **nTimes #** ")

```
 public double roundToMultipleOfFive(double x)
            {

                x=input.nextDouble();
                String str=String.valueOf(x);
                int pos=0;
                for(int i=0;i<str.length();i++)
                {
                    if(str.charAt(i)=='.')
                    {
                        pos=i;
                        break;
                    }
                }

                int after=Integer.parseInt(str.substring(pos+1,str.length()));
                int Q=after/5;
                int R =after%5;

                if((Q%2)==0)
                {
                    after=after-R;
                }
                else
                {
                   if(5-R==5)
                   {
                     after=after;
                   }
                   else after=after+(5-R);
                }

                       return Double.parseDouble(str.substring(0,pos+1).concat(String.valueOf(after))));

            } 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-07-28T13:28:30.407

似乎你被整数算术击中：在某些语言中， (int)/(int) 总是被评估为整数算术。为了强制浮点运算，请确保至少有一个操作数是非整数：

```
double roundOff = Math.round(a*100)/100.f; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-07-28T14:13:47.077

我刚刚修改了你的代码。它在我的系统中运行良好。看看这是否有帮助

```
class round{
    public static void main(String args[]){

    double a = 123.13698;
    double roundOff = Math.round(a*100)/100.00;

    System.out.println(roundOff);
}
} 
```

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2013-08-10T14:56:24.107

```
public static float roundFloat(float in) {
    return ((int)((in*100f)+0.5f))/100f;
} 
```

大多数情况下应该没问题。例如，如果您想符合双打，您仍然可以更改类型。

# c++ - 简化包装器的创建

> ID：11701406
> 
> 赞同：0
> 
> 时间：2012-07-28T13:24:31.993
> 
> 标签：c++

有时我发现自己在编写非常简单的包装器，其中包装器方法直接对应于适配类的一种方法，即：

```
class ToBeAdapted
{
    public:
    void a();
    void b(int arg);
};

class Wrapper
{
   public:
   void newA()
   {
      _adapted.a();
   }

   void newB(int arg)
   {
      _adapted.b(arg);
   }

   private:
   ToBeAdapted _adapted;
}; 
```

这（可能使用模板魔法和/或暗预处理程序？）是否可以概括一下，只是为了节省编写时间并让以后更容易切换包装界面？

像这样的东西会很酷：

```
wrap_around<ToBeAdapted>(ToBeAdapted::a, newA, ToBeAdapted::b,newB) Wrapper; //Creates the same wrapper class as specified above. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:28:51.287

考虑使用私有继承：

```
class Wrapper : ToBeAdapted
{
  public:
    void newA() { a(); }
    void newB(int arg) { b(arg); }
}; 
```

# iphone - 请解释这如何泄漏 - 字符串编码功能

> ID：11701413
> 
> 赞同：0
> 
> 时间：2012-07-28T13:26:16.660
> 
> 标签：iphone, objective-c, ios, xcode

我从我的分析仪那里得到了一份报告，该功能可能会泄漏。任何人都可以解释为什么？

```
- (NSString *)encodeString:(NSString *)string {

    NSString *newString = NSMakeCollectable([(NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)string, NULL, CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"), CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding)) autorelease]);

    return newString;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T13:33:22.620

分析器关于内存管理的建议不是 100% 准确的——这就是为什么它使用“可能泄漏”这个短语。不要忘记此分析在代码上运行，而不是运行时检查。如果您想确保这条线不泄漏，请在仪器中进行检查。

# fusioncharts - 在 FusionCharts 上使用带有 javascript 链接的 overlayButtons

> ID：11701417
> 
> 赞同：0
> 
> 时间：2012-07-28T13:27:11.327
> 
> 标签：fusioncharts

我想使用 javascript 函数链接，例如 'link:j-myJS-data' 用于向下钻取类型图表。我的一切工作都很好，但无法弄清楚如何在向下钻取时通过 configureLink 合并 overlayButton。目前，我可以向下钻取但无法返回。任何人都可以提供一个基本的例子来说明我可以如何去做吗？甚至可能吗？

我想我可以添加我自己的“返回”按钮来处理这个作为一个选项。我不想使用 jsonURL，因为有很多数据，并且需要通过长链接和 JSON 中的大量额外数据来传递许多参数。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:27:21.850

有多种选项可用于使用 FusionCharts XT 创建向下钻取图表。这是一张[表格](http://docs.fusioncharts.com/charts/contents/?DrillDown/LinkFormat.html)，它解释了所有这些，以及每个人的语法。

您使用的方法是 JavaScript 函数链接。使用这个，您将不会获得返回父图表的叠加按钮。

覆盖按钮仅在创建[LinkedChart](http://docs.fusioncharts.com/charts/contents/?DrillDown/LinkedCharts.html)时可用。

因此，您可以采用 2 种方法：

1.  您可以更改所有图表以使用 LinkedCharts 技术。这是一篇[博客文章，详细介绍了如何使用 PHP + MySQL 创建 LinkedCharts](http://blog.fusioncharts.com/2012/03/javascript-linkedcharts-in-php-and-mysql-using-fusioncharts-xt/)。如果您不使用 PHP，那么所示的一般概念仍然适用于任何服务器端环境。

2.  您可以在图表附近创建一个单独的按钮，该按钮将为您重新创建父图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:00:42.990

*单独使用LinkedCharts*可以使按钮（我们称之为“覆盖按钮”）自动可见。

但是，可以使用图表的私有 API 在内部调用覆盖按钮。由于这些 API 是私有的，因此它可能会在实现之间发生变化，并且在某些情况下可能无法按预期工作。我不建议你使用这个。如果您仍然有兴趣了解有关此 API 的更多信息，请发表评论，我会更新这篇文章。

# objective-c - Xcode4：分析单元测试

> ID：11701422
> 
> 赞同：4
> 
> 时间：2012-07-28T13:27:59.860
> 
> 标签：objective-c, xcode, unit-testing, profiling, xcode-instruments

我有一个带有框架目标和单独的单元测试目标的 Xcode 项目。由于没有可执行的目标，我无法在不创建新目标、链接框架并以这种方式对其进行分析的情况下运行分析工具。但是，这意味着我必须移动大量不可靠且烦人的代码。

有没有办法可以在我的测试目标上运行分析工具（主要是分配）？

# batch-file - 无法编辑主机文件权限

> ID：11701426
> 
> 赞同：1
> 
> 时间：2012-07-28T13:28:19.300
> 
> 标签：batch-file, cmd, hosts, cacls

我正在尝试编写一个批处理文件来编辑主机文件。当我尝试这样做时，我收到访问被拒绝：

> cacls 主机 /e /p %username%:w

我的命令应该是什么样的？我可以用手以图形方式完成，所以我知道它是可行的

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:39:07.577

您可能还需要执行以下操作：

*   在尝试更改 ACL 权限之前取得所有权。使用 takeown /F blah.txt
*   Windows 主机文件以只读方式启动。要将其取消设置为只读（以便写入），请使用 attrib -R blah.txt

不要忘记您可能需要在本地管理员的上下文中运行 takeown 才能使其工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:31:36.057

尽管上述内容已被接受为答案，但 UAC 很有可能会介入。

# javascript - Javascript propertyIsEnumerable - 有没有可枚举的方法？

> ID：11701441
> 
> 赞同：0
> 
> 时间：2012-07-28T13:29:29.040
> 
> 标签：javascript

读完后我有几个问题：[hasOwnProperty vs propertyIsEnumerable](https://stackoverflow.com/questions/10968962/hasownproperty-vs-propertyisenumerable/10968979#10968979)

我可以说对象中的所有方法都不可枚举吗？如果不是，你能举一个可枚举的方法的例子吗？如何创建可枚举的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:50:33.537

默认情况下，您添加到对象或其原​​型链的所有方法都是可枚举的。如果您查看任何调试工具，例如 firebug 或 webkit 检查器，您会注意到一些不会出现在任何`for in`循环中的属性。

此类属性例如`prototype`、`__proto__`等`isPrototypeOf`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:09:56.207

> 读完后我有几个问题：[hasOwnProperty vs propertyIsEnumerable](https://stackoverflow.com/questions/10968962/hasownproperty-vs-propertyisenumerable/10968979#10968979)

您似乎只阅读了这个问题:-)

> 我可以说对象中的所有方法都不可枚举吗？

首先，JavaScript 中没有“方法”。对象只能具有作为函数的属性。或者它可以从它的原型对象继承一个。

> 如果不是，你能举一个可枚举的方法的例子吗？

如果您从链接的问题中获取示例函数，并遍历一个实例，您将获得所有可编号的属性，包括继承的和直接的：

```
> for (var prop in new f) console.log(prop)
a
b
c
d
e
g 
```

它没有记录从[`Object.prototype`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object#Methods_2)、 like`toString`或继承的不可枚举的属性`isPrototypeOf`。

那么为什么`isEnumberable`返回false呢？[这在答案中](https://stackoverflow.com/a/10969058/1048572)[得到了](https://stackoverflow.com/a/10968979/1048572) 很好的解释：该函数只考虑**自己的**属性，而不是从原型继承的那些。

 **> 如何创建可枚举的方法？

问题应该是“如何创建*不可*枚举的方法？”。对于该任务，使用[`Object.defineProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty).

默认情况下，通过简单赋值创建的所有其他属性*都是可枚举的。*这适用于普通属性和从其原型继承的属性。**

# internet-explorer-8 - href链接在ie 8中不起作用

> ID：11701442
> 
> 赞同：3
> 
> 时间：2012-07-28T13:29:37.630
> 
> 标签：internet-explorer-8, hyperlink, href

我就是想不通。下面的链接在除 IE8 之外的所有浏览器中都可以正常工作。如果单击 IE8 中的元素，则该按钮会消失。如果您再次单击它重新出现的位置。但是没有多少点击实际上会引导您到 href 位置。谁能向我解释为什么会这样？我已经用尽了所有的想法，但它仍然不起作用。非常感谢您的所有想法！

html...

```
<div style="padding:0px 0px 30px 0px; clear: both;">
 <div style="width: 50%; display: block; float: left;">
  <a href="../index/features" class="big_button">Learn More</a>
 </div>
 <div style="width: 50%; display: block; float: left;">
  <a href="../index/signup" class="big_button">Get Started</a>
 </div>
</div> 
```

...和样式表...

```
 .big_button {
-moz-box-shadow: inset 0px 1px 0px 0px #bbdaf7;
-webkit-box-shadow: inset 0px 1px 0px 0px #bbdaf7;
box-shadow: inset 0px 1px 0px 0px #bbdaf7;
background: -webkit-gradient(linear, left top, left bottom, color-stop(0.05, #79bbff
    ), color-stop(1, #378de5) );
background: -moz-linear-gradient(center top, #79bbff 5%, #378de5 100%);
filter: progid : DXImageTransform.Microsoft.gradient (           
       startColorstr = '#79bbff', endColorstr = '#378de5' );
background-color: #79bbff;
-moz-border-radius: 6px;
-webkit-border-radius: 6px;
border-radius: 6px;
border: 1px solid #84bbf3;
display: inline-block;
color: #ffffff;
font-family: Arial;
font-size: 18px;
font-weight: bold;
padding: 15px 45px;
text-decoration: none;
margin-left: 130px;
}

.big_button:hover {
 background: -webkit-gradient(linear, left top, left bottom, color-stop(0.05, #378de5), color-stop(1, #79bbff) );
 background: -moz-linear-gradient(center top, #378de5 5%, #79bbff 100%);
 filter: progid : DXImageTransform.Microsoft.gradient (startColorstr = '#378de5', endColorstr = '#79bbff' );
 background-color: #378de5;
}

.big_button:active {
 position: relative;
 top: 1px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T09:18:26.567

这是因为您的CSS中的“过滤器：”部分，将其删除，然后它将起作用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:55:38.693

我刚刚想通了。IE8 似乎在 css 中存在 :active 的问题。因此，样式表的以下部分引起了问题：

```
.big_button:active {
  position: relative;
  top: 1px;
} 
```

当前的修复是排除按钮的 css 的 ':active' 部分，因为它不是必需的。如果有人对 IE8 为何存在 :active 问题有任何进一步的信息，我很想知道。

# android - Android模拟器文件读取权限

> ID：11701453
> 
> 赞同：1
> 
> 时间：2012-07-28T13:31:42.220
> 
> 标签：android, android-emulator

我需要从我的 android 模拟器目录 ('data\data\org.mypackage\file.dat') 将文件上传到远程服务器，但是当我尝试访问该文件时，它会出现类似“错误：权限被拒绝”的错误，我将我的 sqlite 数据库存储在 'data\data\org.mypackage\databases\' 文件夹中，在应用程序启动期间，如果该文件夹中没有 sqlite db，我将它从我的资产文件夹复制到该目录并从那里访问它工作完美，但在上传任务的情况下，它要求许可为什么会发生这种情况？以下是我的 uploadFile 方法

```
 private void uploadFile(){ 

    HttpURLConnection conn = null; 
    DataOutputStream dos = null; 
    DataInputStream inStream = null; 
    String existingFileName="/data/data/org.mypackage/file.dat";
    GeneralFunctions.comment(existingFileName);
    String lineEnd = "\r\n"; 
    String twoHyphens = "--"; 
    String boundary =  "*****"; 
    int bytesRead, bytesAvailable, bufferSize; 
    byte[] buffer; 
    int maxBufferSize = 1*1024*1024; 
    String responseFromServer = ""; 
    String urlString = "http://117.231.150.213:8080/upload.jsp"; 
    try 
    { 
     //------------------ CLIENT REQUEST 
    FileInputStream fileInputStream = new FileInputStream(new File(existingFileName) ); 
     // open a URL connection to the Servlet 
     URL url = new URL(urlString); 
     // Open a HTTP connection to the URL 
     conn = (HttpURLConnection) url.openConnection(); 
     // Allow Inputs 
     conn.setDoInput(true); 
     // Allow Outputs 
     conn.setDoOutput(true); 
     // Don't use a cached copy. 
     conn.setUseCaches(false); 
     // Use a post method. 
     conn.setRequestMethod("POST"); 
     conn.setRequestProperty("Connection", "Keep-Alive"); 
     conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary); 
     dos = new DataOutputStream( conn.getOutputStream() ); 
     dos.writeBytes(twoHyphens + boundary + lineEnd); 
     dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + existingFileName + "\"" + lineEnd); 
     dos.writeBytes(lineEnd); 
     // create a buffer of maximum size 
     bytesAvailable = fileInputStream.available(); 
     bufferSize = Math.min(bytesAvailable, maxBufferSize); 
     buffer = new byte[bufferSize]; 
     // read file and write it into form... 
     bytesRead = fileInputStream.read(buffer, 0, bufferSize); 
     while (bytesRead > 0) 
     { 
      dos.write(buffer, 0, bufferSize); 
      bytesAvailable = fileInputStream.available(); 
      bufferSize = Math.min(bytesAvailable, maxBufferSize); 
      bytesRead = fileInputStream.read(buffer, 0, bufferSize); 
     } 
     // send multipart form data necesssary after file data... 
     dos.writeBytes(lineEnd); 
     dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd); 
     // close streams 
     GF.showToast("File is written"); 
     fileInputStream.close(); 
     dos.flush(); 
     dos.close(); 
    } 
    catch (Exception ex) 
    { 
         GeneralFunctions.exception("error: " + ex.getMessage()); 
    } 

    //------------------ read the SERVER RESPONSE 
    try { 
          inStream = new DataInputStream ( conn.getInputStream() ); 
          String str; 

          while (( str = inStream.readLine()) != null) 
          { 
              GeneralFunctions.comment("Server Response "+str); 
          } 
          inStream.close(); 

    } 
    catch (Exception ioex){ 
          GeneralFunctions.exception("error: " + ioex.getMessage()); 
    } 
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:22:30.080

向您的清单添加[`INTERNET`](http://developer.android.com/reference/android/Manifest.permission.html#INTERNET)权限。

如果您可以提供 logcat，那么它将有更多帮助。

# ruby - ruby 元编程替代 eval

> ID：11701454
> 
> 赞同：0
> 
> 时间：2012-07-28T13:31:44.697
> 
> 标签：ruby, metaprogramming

我有以下语句，虽然它使用 eval，但它确实有效：

```
 def resource_name
    self.class.to_s.match(/(.+)Controller/)[1].singularize
  end

  def collection
    @collection ||= eval "#{resource_name}.all(sort: [[:name, :asc]])"
  end 
```

有没有更好的不使用 eval 的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T13:37:13.040

改用`Object#send`，在你固定资源名称后：[http ://ruby-doc.org/core-1.9.3/Object.html#method-i-send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T13:36:22.443

如果我理解正确，您正在尝试从字符串 'Product' 转到常量`Product`，因此您可以使用

```
Object.const_get(resource_name) 
```

如果您使用的是 Rails，您还可以使用`constantize`which 具有理解以下内容的优势`Module::SomeClass`

# c# - 一个后台工作线程和多个进度条

> ID：11701456
> 
> 赞同：1
> 
> 时间：2012-07-28T13:31:54.367
> 
> 标签：c#, multithreading, progress-bar, backgroundworker

我想向 WinForm 添加多个进度条，以监视嵌套循环中的三个可能很长的进程。我推测我应该只能使用一个后台工作线程，以下实现是否可以接受：

这是我正在完成工作的班级：

```
class Class1
    {
        public static void UpdatePB(BackgroundWorker worker)
        {
            for (int i = 1; i <= 10; i++)
            {
                for (int ii = 1; ii <= 10; ii++)
                {
                    for (int iii = 1; iii <= 10; iii++)
                    {
                        Thread.Sleep(10);
                        worker.ReportProgress(iii, "PB3");
                    }
                    Thread.Sleep(10);
                    worker.ReportProgress(ii, "PB2");
                }
                Thread.Sleep(10);
                worker.ReportProgress(i, "PB1");
            }
        } 
```

这是 backgroundWorker ProgressChanged 事件：

```
 private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        // Change the value of the ProgressBar to the BackgroundWorker progress.
        switch (e.UserState.ToString())
        {
            case "PB1":
                progressBar1.Value = e.ProgressPercentage;
                this.label1.Text = e.ProgressPercentage.ToString();
                break;
            case "PB2":
                progressBar2.Value = e.ProgressPercentage;
                this.label2.Text = e.ProgressPercentage.ToString();
                break;
            case "PB3":
                progressBar3.Value = e.ProgressPercentage;
                this.label3.Text = e.ProgressPercentage.ToString();
                break;
        }

        Application.DoEvents();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:03:38.070

好的，经过数小时的搜索，我找到了这个[LINK](http://ntsblog.homedev.com.au/index.php/2012/03/30/background-worker-thread-code-sample-event-handlers-cross-thread-invoke/) ，它使我能够弄清楚我做错了什么。基本上，我所做的是在 BackgroundWorker 线程上运行进度条，同时仍在主 UI 线程上运行进程。我意识到这不是我应该做的，所以我现在在 BackgroundWorker 线程上运行所有东西。此外，您将在我的代码示例中看到，我需要维护两个单独的进度条并使用状态信息更新一个富文本框。我能够很容易地实现这个功能。这是我的最终解决方案：

```
using System;
using System.ComponentModel;
using System.Windows.Forms;

namespace BackgroundWorkerThreadExample
{
    public partial class Form1 : Form
    {
        public delegate void ProgressUpdatedCallaback(ProgressUpdatedEventArgs progress);
        BackgroundWorker bw = new BackgroundWorker();

        public Form1()
        {
            InitializeComponent();
            bw.WorkerReportsProgress = true;
            bw.WorkerSupportsCancellation = true;
            bw.DoWork += new DoWorkEventHandler(backgroundWorker_DoWork);
            bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker_RunWorkerCompleted);
        }

        private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            DatabaseProcessor.ProgressUpdated += new DatabaseProcessor.ProgressUpdatedEvent(ProgressUpdated);
            DatabaseProcessor.GetData();
        }

        private void backgroundWorker_RunWorkerCompleted(object sender, System.ComponentModel.RunWorkerCompletedEventArgs e)
        {
            bw.Dispose();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            bw.RunWorkerAsync();
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (bw.IsBusy == true)
            {
                bw.CancelAsync();
            }
            bw.Dispose();
        }

        private void ProgressUpdated(ProgressUpdatedEventArgs progressUpdated)
        {
            if (InvokeRequired)
            {
                Invoke(new ProgressUpdatedCallaback(this.UpdateProgress), new object[] { progressUpdated });
            }
            else
            {
                UpdateProgress(progressUpdated);
            }
        }

        private void UpdateProgress(ProgressUpdatedEventArgs args)
        {
            ProgressBar pb = new ProgressBar();
            Label lb = new Label();

            if (args.Message == "")
            {
                if (args.PBNum == 1)
                {
                    pb = progressBar1;
                    lb = label1;
                }
                else if (args.PBNum == 2)
                {
                    pb = progressBar2;
                    lb = label2;
                }

                if (pb.Maximum != args.Total)
                {
                    // initial setup
                    pb.Minimum = 0;
                    pb.Maximum = args.Total;
                    pb.Style = ProgressBarStyle.Continuous;
                }

                pb.Value = args.Processed;

                if (args.Total > 0)
                {
                    double progress = args.Processed / (args.Total * 1.0);
                    lb.Text = progress.ToString("P2");
                }
            }
            else
            {
                this.richTextBox1.Text += args.Message;
                //Goto last line
                this.richTextBox1.SelectionStart = this.richTextBox1.Text.Length;
                this.richTextBox1.ScrollToCaret();
            }
            //Application.DoEvents();
        }
    }

    public static class DatabaseProcessor
    {
        public delegate void ProgressUpdatedEvent(ProgressUpdatedEventArgs progressUpdated);
        public static event ProgressUpdatedEvent ProgressUpdated;

        public static void GetData()
        {
            int total = 126;
            Random randomGenerator = new Random();
            for (int i = 0; i < total; i++)
            {
                // Do some processing here
                double delay = (double)randomGenerator.Next(2) + randomGenerator.NextDouble();
                int sleep = (int)delay * 1000;
                System.Threading.Thread.Sleep(sleep);
                RaiseEvent(1, total, i + 1);
                RaiseEvent(0, 0, 0, string.Format("Processing Item {0} \r\n", i + 1));

                for (int ii = 0; ii < total; ii++)
                {
                    // Do some processing here
                    double delay2 = (double)randomGenerator.Next(2) + randomGenerator.NextDouble();
                    int sleep2 = (int)delay2 * 10;
                    System.Threading.Thread.Sleep(sleep2);
                    RaiseEvent(2, total, ii + 1);
                }
            }
        }

        private static void RaiseEvent(int pbNum, int total, int current, string message = "")
        {
            if (ProgressUpdated != null)
            {
                ProgressUpdatedEventArgs args = new ProgressUpdatedEventArgs(pbNum, total, current, message);
                ProgressUpdated(args);
            }
        }
    }

    public class ProgressUpdatedEventArgs : EventArgs
    {
        public ProgressUpdatedEventArgs(int pbNum, int total, int progress, string message = "")
        {
            this.PBNum = pbNum;
            this.Total = total;
            this.Processed = progress;
            this.Message = message;
        }
        public string Message { get; private set; }
        public int PBNum { get; private set; }

        public int Processed { get; private set; }
        public int Total { get; private set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:47:35.030

好吧，您正在显示一个虚假的进度条...如果这是您想要的，那么这种通用方法就可以了。这里有两个改进：

1.  不要使用 DoEvents。相反，只需保持 UI 的消息循环畅通。事件账单将立即处理。
2.  有些人可能更喜欢以适当的时间间隔设置一个或三个计时器的解决方案。我认为这会更好，因为您不需要后台线程并且它们更精确。也就是说，我认为您的方法在这种情况下是可读的、可维护的并且通常很好。

# android - .mid 在 android 中播放时被截断

> ID：11701457
> 
> 赞同：2
> 
> 时间：2012-07-28T13:32:01.480
> 
> 标签：android, media-player, midi

我有 MIDI 文件，其中音乐从 1:30 开始。使用 Windows 播放器可以正常播放，但是当我尝试使用 android mediaPlayer 播放时，它只是将其截断，然后立即开始播放。没关系，我用原生 Player 玩，或者从我自己的应用程序玩。我认为这是已知问题，但我对此一无所知。

# javascript - 如何在运行时在 knockoutjs 对象中添加新的计算属性？

> ID：11701459
> 
> 赞同：0
> 
> 时间：2012-07-28T13:32:22.153
> 
> 标签：javascript, asp.net-mvc, knockout.js, knockout-2.0, sproutcore-2

我在淘汰赛js中有如下程序

```
<input type="text" data-bind="value:firstName" />
<input type="text" data-bind="value:lastName" />
<p data-bind="text:fullName"></p>
    <script type="text/javascript" language="javascript">
        // Here's my data model
        var Person = function (id, first, last) {
            this.id = ko.observable(id);
            this.firstName = ko.observable(first);
            this.lastName = ko.observable(last);

        };

        Person.prototype.fullName = ko.computed(function () {
            return this.firstName() + " " + this.lastName();
        }, Person);

        ko.applyBindings(new Person(1, "kapil", "Garg"));
    </script> 
```

我收到 this.firstName() 不是函数的错误。我怎样才能添加这样的新计算机属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:38:28.793

利用

```
 <input type="text" data-bind="value:firstName()" />

  <input type="text" data-bind="value:lastName()" /> 
```

您错过了括号，这就是淘汰赛抱怨的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:12:03.343

实例化 ViewModel 时错过了“new”关键字

# javascript - 将事件附加到 SVG 路径

> ID：11701461
> 
> 赞同：23
> 
> 时间：2012-07-28T13:32:39.780
> 
> 标签：javascript, jquery, svg

我的 html 中有一个带有`<svg>`标签的 SVG 地图。我想附加事件，以便我可以单击它们并触发一些事件。我知道我可以在多边形元素上使用 jQuery 附加点击事件。但是这张地图中的某些区域是使用路径制作的，当我在路径内部而不是路径上单击时，我想触发一些事件。

这样做的方法是什么？首选使用 jQuery。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-28T15:23:50.240

如果您`fill`在其中`<path>`单击（在填充上）将触发事件处理程序：

### 演示：http: [//jsfiddle.net/TmsrP/1/](http://jsfiddle.net/TmsrP/1/)

```
<path id="sauce" fill="#f00" … /> 
```

```
$('#sauce').on('click',function(){ … }); 
```

您可以选择使用颜色显式填充路径，`transparent`并且仍然会捕获鼠标事件：

### 演示：http: [//jsfiddle.net/TmsrP/2/](http://jsfiddle.net/TmsrP/2/)

```
<path fill="transparent" … /> 
```

# android - 致命异常：AsyncTask #1（进入 AsyncTask 后出错）

> ID：11701463
> 
> 赞同：0
> 
> 时间：2012-07-28T13:33:03.273
> 
> 标签：android, eclipse, crash, android-asynctask

**嗨，这段代码基本上是在程序加载时获取地图位置并输入地址（例如纬度、经度和地址显示）到数据库中。但是，我无法让程序工作，因为它在进入代码的异步部分后崩溃。**

```
public class LocationActivity extends MapActivity implements LocationListener{
        /** Called when the activity is first created. */
        MapView map;
        long start;
        long stop;
        MyLocationOverlay compass;
        MapController controller;
        List<Overlay> overlayList;
        int x, y;
        int lat = 0;
        int longi = 0;
        GeoPoint touchedPoint;
        Drawable d;
        LocationManager lm;
        String towers;
        String location_name1;
        String latitude1;
        String longtitude1;
        String location_description1;

        private ProgressDialog pDialog;

        JSONParser jsonParser = new JSONParser();

        private static String url_create_record = "http://localhost/android_connect/create_location.php";

        private static final String TAG_SUCCESS = "success";

        @Override
        public void onCreate(Bundle savedInstanceState){
            super.onCreate(savedInstanceState);
            setContentView(R.layout.location_layout);
            map = (MapView)findViewById(R.id.mvMain);
            map.setBuiltInZoomControls(true);

            Touch t = new Touch();
            overlayList = map.getOverlays();
            overlayList.add(t);
            compass = new MyLocationOverlay(LocationActivity.this, map);
            overlayList.add(compass);
            controller = map.getController();
            GeoPoint point = new GeoPoint(1367060, 103805416);
            controller.animateTo(point);
            controller.setZoom(6);

            d = getResources().getDrawable(R.drawable.songs_gray);

            //Placing pinpoint at location
            lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            Criteria crit = new Criteria();

            towers = lm.getBestProvider(crit, false);
            Location location = lm.getLastKnownLocation(towers);

            if(location !=null){
                Log.e("Activity", "Location is not null");
                lat = (int) (location.getLatitude()*1E6);
                longi = (int) (location.getLongitude()*1E6);
                GeoPoint ourLocation = new GeoPoint(lat, longi);
                OverlayItem overlayItem = new OverlayItem(ourLocation, "What's up", "2nd String");
                CustomPinpoint custom = new CustomPinpoint(d, LocationActivity.this);
                custom.insertPinPoint(overlayItem);
                overlayList.add(custom);

                latitude1 = new Integer(lat).toString();
                longtitude1 = new Integer(longi).toString();

                Log.e("Activity", "Latitude/ Longitutde " + latitude1 + longtitude1);
                Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
                try{
                    Log.e("Activity", "Try to get activity");
                    List<Address> address = geocoder.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
                    Log.e("Activity", "List Address: " + address);
                    if(address.size() > 0){
                        Log.e("Activity", "Address.size: ");
                        String display = "";
                        for (int i = 0; i <= address.get(0).getMaxAddressLineIndex(); i++){                     
                            Log.e("Activity", "Enter loop:");
                            display += address.get(0).getAddressLine(i) + "\n";
                        }
                        Log.e("Activity", "Display: " + display);
                        Toast s = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                        s.show();
                        location_name1 = display.toString();
                        Log.e("Activity", "Location_name1: " + location_name1);
                    }
                } catch (IOException e){
                    e.printStackTrace();

                }

                new CreateNewLocation().execute();

            }else{
                Toast.makeText(LocationActivity.this, "Couldn't get provider", Toast.LENGTH_SHORT).show();
            }

        }

        @Override
        protected void onPause() {
            // TODO Auto-generated method stub
            compass.disableCompass();
            super.onPause();
            lm.removeUpdates(this);

        }

        @Override
        protected void onResume() {
            // TODO Auto-generated method stub
            compass.enableCompass();
            super.onResume();
            lm.requestLocationUpdates(towers, 500, 1, this);

        }

        @Override
        protected boolean isRouteDisplayed() {
            // TODO Auto-generated method stub
            return false;
        }

        class Touch extends Overlay{
            public boolean onTouchEvent(MotionEvent e, MapView m){
                if(e.getAction() == MotionEvent.ACTION_DOWN){
                    start = e.getEventTime();
                    x = (int) e.getX();
                    x = (int) e.getY();
                    touchedPoint = map.getProjection().fromPixels(x, y);
                }
                if(e.getAction() == MotionEvent.ACTION_UP){
                    stop = e.getEventTime();                
                }
                if(stop -start > 1500){
                    //perform action if user hold down on the map
                    AlertDialog alert = new AlertDialog.Builder(LocationActivity.this).create();
                    alert.setTitle("Pick an Option");
                    alert.setMessage("Please select one of the options from below");
                    alert.setButton("Place a pinpoint", new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                            OverlayItem overlayItem = new OverlayItem(touchedPoint, "What's up", "2nd String");
                            CustomPinpoint custom = new CustomPinpoint(d, LocationActivity.this);
                            custom.insertPinPoint(overlayItem);
                            overlayList.add(custom);

                        }
                    });
                    alert.setButton2("Get Address", new DialogInterface.OnClickListener(){

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                            Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
                            try{
                                List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() / 1E6, touchedPoint.getLongitudeE6() / 1E6, 1);
                                if(address.size() > 0){
                                    String display = "";
                                    for (int i = 0; i <= address.get(0).getMaxAddressLineIndex(); i++){                     
                                        display += address.get(0).getAddressLine(i) + "\n";
                                    }
                                    Toast t = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                                    t.show();
                                }
                            } catch (IOException e){
                                e.printStackTrace();

                            }
                        }
                    });
                    alert.setButton3("Toggle View", new DialogInterface.OnClickListener(){

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                            if (map.isSatellite()){
                                map.setSatellite(false);
                                map.setStreetView(true);
                            }else {
                                map.setStreetView(false);
                                map.setSatellite(true);
                            }
                        }
                    });
                    alert.show();
                    return true;
                }
                return false;
            }
        }

        public void onLocationChanged(Location l) {
            // TODO Auto-generated method stub
            lat = (int) (l.getLatitude()*1E6);
            longi = (int) (l.getLongitude()*1E6);

            GeoPoint ourLocation = new GeoPoint(lat, longi);
            OverlayItem overlayItem = new OverlayItem(ourLocation, "What's up", "2nd String");
            CustomPinpoint custom = new CustomPinpoint(d, LocationActivity.this);
            custom.insertPinPoint(overlayItem);
            overlayList.add(custom);

        }

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

        //creating new location to database
        class CreateNewLocation extends AsyncTask<String, String, String>{
            protected void onPreExecute(){
                Log.e("Activity", "Enters Async: ");
                super.onPreExecute();
                pDialog = new ProgressDialog(LocationActivity.this);
                pDialog.setMessage ("Recording current location ...");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(true);
                pDialog.show();
            }

            //Creating record

            protected String doInBackground(String... args){
                Log.e("Activity", "Enters doinbackground: ");
                String location_name = location_name1 ;
                String latitude = latitude1 ;
                String longtitude = longtitude1;
                //String location_description = location_name1;

                List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair("location_name", location_name));
                params.add(new BasicNameValuePair("latitude", latitude));
                params.add(new BasicNameValuePair("longtitude", longtitude));
                //params.add(new BasicNameValuePair("location_description", location_description));

            //getting JSON Object
            //Note that create product url accepts POST method
                JSONObject json = jsonParser.makeHttpRequest(url_create_record, "POST", params);

            //check log cat for response
                Log.d("Create Response", json.toString());

            //check for success tag
                try{
                    int success = json.getInt(TAG_SUCCESS);

                    if (success == 1){
                        //successfully created record
                        finish();
                    } else {
                        //failed to create record
                    }
                }catch (JSONException e){
                    e.printStackTrace();
                }
                return null;
            }
            //After completing background task Dismiss the progress dialog
            protected void onPostExecute(String file_url){
                //dismiss the dialog once done
                pDialog.dismiss();
            }
        }
    } 
```

**LogCat 错误**

```
07-28 21:06:47.587: D/dalvikvm(29465): GC_CONCURRENT freed 230K, 45% free 3119K/5639K, external 0K/0K, paused 3ms+2ms
07-28 21:06:47.827: D/dalvikvm(29465): GC_CONCURRENT freed 308K, 44% free 3351K/5959K, external 0K/0K, paused 3ms+16ms
07-28 21:06:48.047: D/dalvikvm(29465): GC_CONCURRENT freed 628K, 48% free 3283K/6215K, external 0K/0K, paused 3ms+4ms
07-28 21:06:48.187: D/dalvikvm(29465): GC_CONCURRENT freed 503K, 48% free 3292K/6215K, external 0K/0K, paused 1ms+3ms
07-28 21:06:48.368: D/dalvikvm(29465): GC_CONCURRENT freed 331K, 45% free 3470K/6215K, external 0K/0K, paused 2ms+13ms
07-28 21:06:49.549: E/Activity(29465): Location is not null
07-28 21:06:49.549: E/Activity(29465): Latitude/ Longitutde 1433509103838336
07-28 21:06:49.549: E/Activity(29465): Try to get activity
07-28 21:06:49.739: E/Activity(29465): List Address: [Address[addressLines=[0:"589 Sembawang Close",1:"Singapore 760589"],feature=589,admin=null,sub-admin=null,locality=null,thoroughfare=Sembawang Close ,postalCode=760589,countryCode=SG,countryName=Singapore,hasLatitude=true,latitude=1.433459,hasLongitude=true,longitude=103.838868,phone=null,url=null,extras=null]]
07-28 21:06:49.739: E/Activity(29465): Address.size: 
07-28 21:06:49.739: E/Activity(29465): Enter loop:
07-28 21:06:49.739: E/Activity(29465): Enter loop:
07-28 21:06:49.739: E/Activity(29465): Display: 589 Sembawang
07-28 21:06:49.739: E/Activity(29465): Singapore 760589
07-28 21:06:49.769: E/Activity(29465): Location_name1: 589 Sembawang Close
07-28 21:06:49.769: E/Activity(29465): Singapore 760589
07-28 21:06:49.779: E/Activity(29465): Enters Async: 
07-28 21:06:49.979: D/WindowManagerImpl(29465): addView, new view, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@405953a0
07-28 21:06:50.019: D/ATRecorder(29465): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40623670
07-28 21:06:50.019: E/Activity(29465): Enters doinbackground: 
07-28 21:06:50.149: D/dalvikvm(29465): GC_CONCURRENT freed 761K, 50% free 3180K/6279K, external 0K/0K, paused 3ms+13ms
07-28 21:06:50.169: D/ATRecorder(29465): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@405425f8
07-28 21:06:50.239: D/SensorGUI(29465): SensorChannel(const Parcel& data): mSendFd = -1, mReceiveFd = 63
07-28 21:06:50.390: D/dalvikvm(29465): GC_FOR_MALLOC freed 49K, 50% free 3192K/6279K, external 0K/0K, paused 39ms
07-28 21:06:50.410: I/dalvikvm-heap(29465): Grow heap (frag case) to 5.445MB for 87396-byte allocation
07-28 21:06:50.470: D/dalvikvm(29465): GC_FOR_MALLOC freed 0K, 49% free 3277K/6407K, external 0K/0K, paused 27ms
07-28 21:06:50.470: D/WindowManagerImpl(29465): addView, new view, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@405266e8
07-28 21:06:50.540: D/dalvikvm(29465): GC_FOR_MALLOC freed 1K, 49% free 3280K/6407K, external 0K/0K, paused 59ms
07-28 21:06:50.570: I/dalvikvm-heap(29465): Grow heap (frag case) to 5.531MB for 87396-byte allocation
07-28 21:06:50.620: D/dalvikvm(29465): GC_FOR_MALLOC freed 0K, 49% free 3365K/6535K, external 0K/0K, paused 36ms
07-28 21:06:50.670: D/PhoneWindow(29465): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@40512458 has no id.
07-28 21:06:50.680: D/SensorManager(29465): unregisterSensor: mSensors = 128, legacyType = 128
07-28 21:06:50.680: D/SensorManager(29465): unregisterSensor: After modify mSensors = 0
07-28 21:06:50.700: D/WindowManagerImpl(29465): addView, new view, mViews[2]: android.widget.LinearLayout@405a72a8
07-28 21:06:50.800: W/NetworkConnectivityListener(29465): onReceived() called with UNKNOWN and Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000000 (has extras) }
07-28 21:06:51.531: E/JSON Parser(29465): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject
07-28 21:06:51.541: W/dalvikvm(29465): threadid=9: thread exiting with uncaught exception (group=0x4001d5a0)
07-28 21:06:51.621: E/AndroidRuntime(29465): FATAL EXCEPTION: AsyncTask #1
07-28 21:06:51.621: E/AndroidRuntime(29465): java.lang.RuntimeException: An error occured while executing doInBackground()
07-28 21:06:51.621: E/AndroidRuntime(29465):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-28 21:06:51.621: E/AndroidRuntime(29465):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
07-28 21:06:51.621: E/AndroidRuntime(29465):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
07-28 21:06:51.621: E/AndroidRuntime(29465):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
07-28 21:06:51.621: E/AndroidRuntime(29465):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
07-28 21:06:51.621: E/AndroidRuntime(29465):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
07-28 21:06:51.621: E/AndroidRuntime(29465):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
07-28 21:06:51.621: E/AndroidRuntime(29465):    at java.lang.Thread.run(Thread.java:1027)
07-28 21:06:51.621: E/AndroidRuntime(29465): Caused by: java.lang.NullPointerException
07-28 21:06:51.621: E/AndroidRuntime(29465):    at com.isec.leonard.LocationActivity$CreateNewLocation.doInBackground(LocationActivity.java:295)
07-28 21:06:51.621: E/AndroidRuntime(29465):    at com.isec.leonard.LocationActivity$CreateNewLocation.doInBackground(LocationActivity.java:1)
07-28 21:06:51.621: E/AndroidRuntime(29465):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-28 21:06:51.621: E/AndroidRuntime(29465):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
07-28 21:06:51.621: E/AndroidRuntime(29465):    ... 4 more
07-28 21:06:51.751: D/PhoneWindow(29465): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@40512458 has no id.
07-28 21:06:51.751: D/SensorManager(29465): unregisterSensor: mSensors = 128, legacyType = 128
07-28 21:06:51.751: D/SensorManager(29465): unregisterSensor: After modify mSensors = 0
07-28 21:06:51.771: W/NetworkConnectivityListener(29465): onReceived() called with UNKNOWN and Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000000 (has extras) }
07-28 21:06:51.831: D/Process(29465): killProcess, pid=29465
07-28 21:06:51.881: D/Process(29465): dalvik.system.VMStack.getThreadStackTrace(Native Method)
07-28 21:06:51.891: D/Process(29465): java.lang.Thread.getStackTrace(Thread.java:745)
07-28 21:06:51.891: D/Process(29465): android.os.Process.killProcess(Process.java:797)
07-28 21:06:51.921: D/Process(29465): com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException(RuntimeInit.java:108)
07-28 21:06:51.921: D/Process(29465): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:854)
07-28 21:06:51.921: D/Process(29465): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:851)
07-28 21:06:51.921: I/Process(29465): Sending signal. PID: 29465 SIG: 9
07-28 21:07:09.218: D/dalvikvm(29709): GC_CONCURRENT freed 230K, 45% free 3117K/5639K, external 0K/0K, paused 3ms+2ms
07-28 21:07:09.348: D/dalvikvm(29709): GC_CONCURRENT freed 299K, 45% free 3286K/5895K, external 0K/0K, paused 2ms+3ms
07-28 21:07:09.558: D/dalvikvm(29709): GC_CONCURRENT freed 592K, 48% free 3256K/6151K, external 0K/0K, paused 4ms+2ms
07-28 21:07:09.718: D/dalvikvm(29709): GC_CONCURRENT freed 412K, 46% free 3355K/6151K, external 0K/0K, paused 16ms+4ms
07-28 21:07:09.828: D/dalvikvm(29709): GC_CONCURRENT freed 362K, 43% free 3551K/6215K, external 0K/0K, paused 2ms+3ms
07-28 21:07:09.999: E/Activity(29709): Location is not null
07-28 21:07:09.999: E/Activity(29709): Latitude/ Longitutde 1433509103838336
07-28 21:07:09.999: E/Activity(29709): Try to get activity
07-28 21:07:10.159: E/Activity(29709): List Address: [Address[addressLines=[0:"237 Yishun Ring Rd",1:"Singapore 760237"],feature=237,admin=null,sub-admin=null,locality=null,thoroughfare=Yishun Ring Rd,postalCode=760237,countryCode=SG,countryName=Singapore,hasLatitude=true,latitude=1.433459,hasLongitude=true,longitude=103.838868,phone=null,url=null,extras=null]]
07-28 21:07:10.159: E/Activity(29709): Address.size: 
07-28 21:07:10.159: E/Activity(29709): Enter loop:
07-28 21:07:10.159: E/Activity(29709): Enter loop:
07-28 21:07:10.159: E/Activity(29709): Display: 237 Yishun Ring Rd
07-28 21:07:10.159: E/Activity(29709): Singapore 760237
07-28 21:07:10.179: E/Activity(29709): Location_name1: 237 Yishun Ring Rd
07-28 21:07:10.179: E/Activity(29709): Singapore 760237
07-28 21:07:10.189: E/Activity(29709): Enters Async: 
07-28 21:07:10.289: D/dalvikvm(29709): GC_CONCURRENT freed 586K, 47% free 3409K/6343K, external 0K/0K, paused 12ms+7ms
07-28 21:07:10.469: D/WindowManagerImpl(29709): addView, new view, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@406341a8
07-28 21:07:10.619: D/ATRecorder(29709): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40588420
07-28 21:07:10.619: E/Activity(29709): Enters doinbackground: 
07-28 21:07:10.659: D/ATRecorder(29709): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40520840
07-28 21:07:10.799: D/dalvikvm(29709): GC_FOR_MALLOC freed 238K, 49% free 3275K/6343K, external 0K/0K, paused 62ms
07-28 21:07:10.809: I/dalvikvm-heap(29709): Grow heap (frag case) to 5.526MB for 87396-byte allocation
07-28 21:07:10.849: D/dalvikvm(29709): GC_FOR_MALLOC freed 0K, 49% free 3360K/6471K, external 0K/0K, paused 25ms
07-28 21:07:10.859: D/SensorGUI(29709): SensorChannel(const Parcel& data): mSendFd = -1, mReceiveFd = 64
07-28 21:07:10.940: E/JSON Parser(29709): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject
07-28 21:07:10.950: W/dalvikvm(29709): threadid=9: thread exiting with uncaught exception (group=0x4001d5a0)
07-28 21:07:11.120: E/AndroidRuntime(29709): FATAL EXCEPTION: AsyncTask #1
07-28 21:07:11.120: E/AndroidRuntime(29709): java.lang.RuntimeException: An error occured while executing doInBackground()
07-28 21:07:11.120: E/AndroidRuntime(29709):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-28 21:07:11.120: E/AndroidRuntime(29709):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
07-28 21:07:11.120: E/AndroidRuntime(29709):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
07-28 21:07:11.120: E/AndroidRuntime(29709):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
07-28 21:07:11.120: E/AndroidRuntime(29709):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
07-28 21:07:11.120: E/AndroidRuntime(29709):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
07-28 21:07:11.120: E/AndroidRuntime(29709):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
07-28 21:07:11.120: E/AndroidRuntime(29709):    at java.lang.Thread.run(Thread.java:1027)
07-28 21:07:11.120: E/AndroidRuntime(29709): Caused by: java.lang.NullPointerException
07-28 21:07:11.120: E/AndroidRuntime(29709):    at com.isec.leonard.LocationActivity$CreateNewLocation.doInBackground(LocationActivity.java:295)
07-28 21:07:11.120: E/AndroidRuntime(29709):    at com.isec.leonard.LocationActivity$CreateNewLocation.doInBackground(LocationActivity.java:1)
07-28 21:07:11.120: E/AndroidRuntime(29709):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-28 21:07:11.120: E/AndroidRuntime(29709):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
07-28 21:07:11.120: E/AndroidRuntime(29709):    ... 4 more
07-28 21:07:11.220: D/WindowManagerImpl(29709): addView, new view, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@40526fa0
07-28 21:07:11.440: D/WindowManagerImpl(29709): addView, new view, mViews[2]: android.widget.LinearLayout@40630800
07-28 21:07:11.670: D/SensorManager(29709): unregisterSensor: mSensors = 128, legacyType = 128
07-28 21:07:11.670: D/SensorManager(29709): unregisterSensor: After modify mSensors = 0
07-28 21:07:11.900: I/MapActivity(29709): Handling network change notification:CONNECTED
07-28 21:07:11.900: E/MapActivity(29709): Couldn't get connection factory client
07-28 21:07:12.531: D/WindowManagerImpl(29709): finishRemoveViewLocked, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@40526fa0
07-28 21:07:12.631: E/WindowManager(29709): Activity com.isec.leonard.PhoneTrackingActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@406341a8 that was originally added here
07-28 21:07:12.631: E/WindowManager(29709): android.view.WindowLeaked: Activity com.isec.leonard.PhoneTrackingActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@406341a8 that was originally added here
07-28 21:07:12.631: E/WindowManager(29709):     at android.view.ViewRoot.<init>(ViewRoot.java:278)
07-28 21:07:12.631: E/WindowManager(29709):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:149)
07-28 21:07:12.631: E/WindowManager(29709):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
07-28 21:07:12.631: E/WindowManager(29709):     at android.view.Window$LocalWindowManager.addView(Window.java:433)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.Dialog.show(Dialog.java:265)
07-28 21:07:12.631: E/WindowManager(29709):     at com.isec.leonard.LocationActivity$CreateNewLocation.onPreExecute(LocationActivity.java:272)
07-28 21:07:12.631: E/WindowManager(29709):     at android.os.AsyncTask.execute(AsyncTask.java:391)
07-28 21:07:12.631: E/WindowManager(29709):     at com.isec.leonard.LocationActivity.onCreate(LocationActivity.java:132)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1692)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
07-28 21:07:12.631: E/WindowManager(29709):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:656)
07-28 21:07:12.631: E/WindowManager(29709):     at android.widget.TabHost.setCurrentTab(TabHost.java:326)
07-28 21:07:12.631: E/WindowManager(29709):     at android.widget.TabHost.addTab(TabHost.java:216)
07-28 21:07:12.631: E/WindowManager(29709):     at com.isec.leonard.PhoneTrackingActivity.onCreate(PhoneTrackingActivity.java:33)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.ActivityThread.access$1500(ActivityThread.java:135)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
07-28 21:07:12.631: E/WindowManager(29709):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-28 21:07:12.631: E/WindowManager(29709):     at android.os.Looper.loop(Looper.java:150)
07-28 21:07:12.631: E/WindowManager(29709):     at android.app.ActivityThread.main(ActivityThread.java:4385)
07-28 21:07:12.631: E/WindowManager(29709):     at java.lang.reflect.Method.invokeNative(Native Method)
07-28 21:07:12.631: E/WindowManager(29709):     at java.lang.reflect.Method.invoke(Method.java:507)
07-28 21:07:12.631: E/WindowManager(29709):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
07-28 21:07:12.631: E/WindowManager(29709):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
07-28 21:07:12.631: E/WindowManager(29709):     at dalvik.system.NativeStart.main(Native Method)
07-28 21:07:12.641: D/WindowManagerImpl(29709): finishRemoveViewLocked, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@406341a8
07-28 21:07:12.761: D/dalvikvm(29709): GC_CONCURRENT freed 231K, 46% free 3556K/6471K, external 0K/0K, paused 23ms+7ms
07-28 21:07:13.722: D/WindowManagerImpl(29709): finishRemoveViewLocked, mViews[0]: android.widget.LinearLayout@40630800
07-28 21:07:13.952: D/Process(29709): killProcess, pid=29709
07-28 21:07:13.952: D/Process(29709): dalvik.system.VMStack.getThreadStackTrace(Native Method)
07-28 21:07:14.033: D/Process(29709): java.lang.Thread.getStackTrace(Thread.java:745)
07-28 21:07:14.043: D/Process(29709): android.os.Process.killProcess(Process.java:797)
07-28 21:07:14.043: D/Process(29709): com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException(RuntimeInit.java:108)
07-28 21:07:14.053: D/Process(29709): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:854)
07-28 21:07:14.063: D/Process(29709): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:851)
07-28 21:07:14.063: I/Process(29709): Sending signal. PID: 29709 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:40:04.750

您在 LocationActivity.java:295 处有 NullPointerException

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:25:59.417

解析失败，因为您没有收到 JSON 对象（您收到的响应开始于`<BR`）

```
 Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject 
```

# windows - 我如何使输入文本必须至少包含 3 个字母，如果它们少则显示错误消息。As2

> ID：11701467
> 
> 赞同：-1
> 
> 时间：2012-07-28T13:33:23.073
> 
> 标签：windows, flash

好的，所以我正在尝试制作游戏，现在我可以制作它，所以如果他们不输入任何内容，则会显示错误，但问题是您仍然可以只输入一个字母，我需要他们在输入中至少包含 3 个字母文本字段少了，我的 error_txt 会说（“错误，您必须输入至少 3 个字母”）请帮助我找不到任何软件，否则任何帮助将不胜感激！

好的，我按钮上的代码是：

```
on (release) {
if (texter_txt.length == 0)
{
    error_txt.text = ("please enter a name.");

}
else
{

    _root.gotoAndStop(2);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:35:00.637

在（释放）{

如果 (texter_txt.length < 3) {

error_txt.text = ("错误必须输入至少 3 个字母");

}

别的 {

```
_root.gotoAndStop(2); 
```

}

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:09:54.313

这不行吗？：

```
on (release) {

if (texter_txt.length < 3)
{

 error_txt.text = ("please enter a name.");

}

else
{

    _root.gotoAndStop(2);
}

} 
```

# c# - 数据未正确保存在内存流 C# 中

> ID：11701469
> 
> 赞同：-3
> 
> 时间：2012-07-28T13:33:30.670
> 
> 标签：c#, file-io, html-agility-pack

我正在使用 HtmlAgilityPack 并在 MemoryStream 中保存一个 html 文档：

```
 MemoryStream ms = new MemoryStream();
       HtmlDocument doc = new HtmlDocument();
       doc.load(path);
       . 
       .
       doc.Save(ms); 
```

现在的问题是，有时文档完全保存，有时文档的某些内容（从结尾）丢失，它没有与文档一起保存。谁能告诉我为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:51:23.513

保存后尝试添加

```
memoryStream.Seek(0, System.IO.SeekOrigin.Begin) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T14:02:42.930

使用流（或任何实现 IDisposible 的东西）时，请确保有效地管理内存。.Net 垃圾收集可以随时启动，结果可能无法预测。

这有时就像将变量包装在 using() 语句中一样简单：

```
 using(var ms = new MemoryStream()) {
            var doc = new HtmlDocument();
            doc.Load(path);
            doc.Save(ms);
        } 
```

# android - 在数据库 sqlite 中创建新表

> ID：11701473
> 
> 赞同：0
> 
> 时间：2012-07-28T13:34:19.613
> 
> 标签：android, sqlite, version

我想每次向只有一列“名称”的数据库添加新行时都会创建一个具有该名称的新表，我做不到，我对整个数据库感到非常困惑数据库版本的想法。

我尝试手动更改版本，但在关闭应用程序后，它会返回到第一个版本并删除存储在其中的所有信息，我什至尝试创建 2 个不同的数据库，一个用于带有名称的表，一个用于表和我也无法让它工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:52:45.340

每次插入一行时创建一个表是一个糟糕的设计，可以以更有效的方式完成。

一个更好的主意是创建两个表。第一个将有 2 列：一个带有“名称”，另一个将包含此购物清单的唯一标识符 (ID)，它引用第二个表（每个产品）中的一个或多个行。

因此，第二个表将包含一`ID`列和其他列，以存储有关添加到列表中的每个产品的附加数据。您可以在此处链接您的表格，而无需为每一行创建新表格。

只需在第二个表中使用特定购物清单的 ID 创建新行，然后使用正确的 SQL 查询，您就可以轻松获取包含其产品的特定购物清单。

# regex - 名称服务器正则表达式改进

> ID：11701475
> 
> 赞同：0
> 
> 时间：2012-07-28T13:34:52.463
> 
> 标签：regex

我有以下简单的名称服务器正则表达式：

```
^[a-zA-Z0-9]+\.[a-zA-Z0-9]+\.[a-zA-Z0-9\.]+ 
```

我想通过以下方式改进这一点

*   限制数量。在最后一部分中最多为 1（以允许 .co.uk，但限制无效域）
*   不允许第一部分是 www

任何人都可以提供一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:40:58.380

`^([a-zA-Z0-9]+|[a-zA-Z0-9]*\*[a-zA-Z0-9]*)(\.[a-zA-Z0-9]+){2,3}$`将匹配：

*   3 或 4 个组件由`.`
*   每个组件由一个或多个字母数字字符组成
*   第一个组件也可以包含最多一个`*`

不允许第一部分是 www 是在同一个正则表达式中做所有事情的麻烦，并且可能更好地作为前/后步骤完成，相当于`if (!string.startsWith("www"))`你正在使用的任何内容。

# sql - jar 和数据存储（excel、mssql 或 mysql）

> ID：11701477
> 
> 赞同：0
> 
> 时间：2012-07-28T13:35:01.627
> 
> 标签：sql, database, excel, jar, store

我正在编写一个 jar 文件，该文件将计算特定压力、温度和干度下蒸汽的焓值。
我将不得不在蒸汽表中搜索相应的焓。

简单地说，将有**三个参数**，**第四个参数**将从**蒸汽表数据库或任何其他存储中选择**。

但是，如果我将**steam 表存储在 sql 中**，并创建 jar 文件，那么该 jar 文件是否可以移植？数据库会嵌入到jar中吗？它会在没有在其他计算机上安装 sql 的情况下运行吗？

将**表格存储在excel中**是个好选择吗？我将如何从 excel 中选择所需的值？我肯定做不到

```
select * from steam_table where pressure=$a 
```

或类似的东西在excel中......那么人们如何将数据存储在jar文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:34:58.297

我确实在**没有**任何 apache poi 的情况下将 java 与 excel uing odbc 连接起来。您只需使用控制面板将 excel 作为数据源。

（控制面板/管理工具/数据源（ODBC））并添加excel作为数据源。

然后像对 sql 所做的那样与 excel 建立正常连接。

甚至在excel中获取元素要传递的查询也与sql相同。

干杯!

# c# - 如何从 Combobox 更改 HTML 标签

> ID：11701481
> 
> 赞同：0
> 
> 时间：2012-07-28T13:35:32.553
> 
> 标签：c#, javascript, jquery, asp.net, html

我有一个 aspx 页面。很快：

```
<html>
<head>
</head>
<body>
<h1> Stack Overflow </h1>
</body>
</html> 
```

还有 RadCombobox；

```
 RadCombobox1.Items.Add(new RadComboBoxItem(){ Text = "Stack", Value = "1" });
 RadCombobox1.Items.Add(new RadComboBoxItem(){ Text = "Overflow", Value = "2" });
 RadCombobox1.Items.Add(new RadComboBoxItem(){ Text = "Stack Overflow", Value = "2" }); 
```

当我在示例中选择“溢出”的第二个项目时，如何更改 <h1> 标记？我想在 <h1> 标签中显示我从组合框中选择的内容..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:39:21.140

您可以使用客户端 (jquery) 来处理事件或 Telerik 处理程序 (http://demos.telerik.com/aspnet-ajax/combobox/examples/populatingwithdata/autocompletesql/defaultcs.aspx)。RadComboBox 支持许多客户端事件： OnClientSelectedIndexChanging OnClientSelectedIndexChanged 或者因为 Radcombobox 通常呈现为输入 type=text 您可以按照 ClarkeyBoy 的建议使用其 on("change" 事件，或 onchange 事件（同样的事情）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:49:44.567

在您的 RadComboBox 标记上，为`onSelectedIndexChanged`as添加一个处理程序

```
<telerik:RadComboBox ID="RadComboBox1" runat="server" onclientselectedindexchanged="OnClientSelectedIndexChanged" .../>

<script>

  function OnClientSelectedIndexChanged(sender, eventArgs) {
     var selectedItem = eventArgs.get_item();
     var selectedItemText = selectedItem != null ? selectedItem.get_text() : sender.get_text();

      //now that you have the text, change H1's text via jQuery
     $('h1').text(selectedItemText);
  }

</script> 
```

# closures - 闭包和延续的区别

> ID：11701486
> 
> 赞同：8
> 
> 时间：2012-07-28T13:36:25.830
> 
> 标签：closures, continuations

有人可以解释闭包和延续之间的区别吗？维基百科中的相应文章并没有真正比较两者之间的差异。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T13:47:44.963

闭包是一个从声明它的环境中捕获数据的函数。

```
int myVar = 0;
auto foo = [&] () { myVar++; }; <- This lambda forms a closure by capturing myVar
foo();
assert(myVar == 1); 
```

延续是一个更抽象的概念，指的是之后应该执行的代码。它可以使用闭包来实现。

```
myTask = Task([] () { something(); });
myTask.then([=] () { myFoo.bar(); }); // This closure is the continuation of the task
myTask.run(); 
```

# python - 从 html 内容中提取数据

> ID：11701490
> 
> 赞同：1
> 
> 时间：2012-07-28T13:36:47.890
> 
> 标签：python, django, beautifulsoup

我想下载一些 html 页面并提取信息，每个 HTML 页面都有这个`table tag`：

```
<table class="sobi2Details" style='background-image: url(http://www.imd.ir/components/com_sobi2/images/backgrounds/grey.gif);border-style: solid; border-color: #808080' >
    <tr>
        <td><h1>Dr Jhon Doe</h1></td>
    </tr>
    <tr>
        <td></td>
    </tr>
    <tr>
        <td></td>
    </tr>
    <tr>
        <td>
          <div id="sobi2outer">
             <br/>
             <span id="sobi2Details_field_name" ><span id="sobi2Listing_field_name_label">name:</span>Jhon</span><br/>
             <span id="sobi2Details_field_family" ><span id="sobi2Listing_field_family_label">family:</span> Doe</span><br/>
             <span id="sobi2Details_field_tel1" ><span id="sobi2Listing_field_tel1_label">tel:</span> 33727464</span><br/>
          </div>
        </td>
    </tr>
</table> 
```

我想访问 name ( `Jhone`) 、family ( `Doe`) 和 tel( `33727464`)，我使用[beausiful soup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)通过 id 访问这些 span 标签：

```
name=soup.find(id="sobi2Details_field_name").__str__()
family=soup.find(id="sobi2Details_field_family").__str__()
tel=soup.find(id="sobi2Details_field_tel1").__str__() 
```

但我不知道如何将数据提取到这些标签中。我尝试使用`children`和`content`属性，但是当我使用主题作为`tag`它返回时`None`：

```
name=soup.find(id="sobi2Details_field_name")
for child in name.children:
    #process content inside 
```

但我收到此错误：

```
'NoneType' object has no attribute 'children' 
```

而当我在它上面使用**str** () 时，它不是`None`！任何想法？

**编辑：我的最终解决方案**

```
soup = BeautifulSoup(page,from_encoding="utf-8")
name_span=soup.find(id="sobi2Details_field_name").__str__()
name=name_span.split(':')[-1]
result = re.sub('</span>', '',name) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:13:42.447

我找到了几种方法来做到这一点。

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(open(path_to_html_file))

name_span = soup.find(id="sobi2Details_field_name")

# First way: split text over ':'
# This only works because there's always a ':' before the target field
name = name_span.text.split(':')[1]

# Second way: iterate over the span strings
# The element you look for is always the last one
name = list(name_span.strings)[-1]

# Third way: iterate over 'next' elements
name = name_span.next.next.next # you can create a function to do that, it looks ugly :) 
```

告诉我它是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:22:01.867

如果您熟悉 xpath，请改用 lxml 和 etree：

```
import urllib2
from lxml import etree

opener = urllib2.build_opener()
root = etree.HTML(opener.open("myUrl").read())

print root.xpath("//span[@id='sobi2Details_field_name']/text()")[0] 
```

# c++ - LNK1104：无法打开文件“msvcprt.lib”

> ID：11701492
> 
> 赞同：0
> 
> 时间：2012-07-28T13:36:56.180
> 
> 标签：c++, visual-studio-2010

我在 Window 7 机器上使用 Visual Studio 2010 Express。两天前，我的项目编译得很好，但是突然出现这个链接器失败：

> LNK1104：无法打开文件“msvcprt.lib”

在这期间，我在那台机器上安装了 MS Office 2010，Windows 安装了一堆更新，仅此而已。好像Windows / VS“丢失”了一个文件！？（这怎么可能发生？）我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:40:42.227

~~似乎[这些人能够](http://www.ogre3d.org/forums/viewtopic.php?f=2&t=15131)通过安装 .NET 1.1 SDK 来解决它。这是一个相当愚蠢的修复，但也许它比重新安装 Visual Studio 更简单......~~

也许值得尝试为 VS2010 安装 SP1。你可能会很幸运，它会解决问题。否则，您可能需要重新安装该死的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:57:21.507

最简单的方法可能就是重新安装 VS。它将为您获取所有资源，并且只要您备份项目（或者如果它们位于与默认文件夹不同的文件夹中），您就不会丢失任何东西。这将比尝试查找该特定文件更快。

# git - Git：了解接收后

> ID：11701496
> 
> 赞同：2
> 
> 时间：2012-07-28T13:37:27.170
> 
> 标签：git, githooks, git-post-receive

最近从 SVN 迁移后，我对 Git 世界还很陌生，我正试图理解这个`post-receive`钩子。

希望我说这是一个服务器端钩子是正确的，但是我将如何使用该`post-receive`钩子在客户端运行命令，或者是否有另一个钩子来实现这一点？

* * *

例如。

`post-receive`钩子在服务器上运行。向客户端/提交者发送命令并且该命令在他们的计算机上运行（例如收到回显提交。）

* * *

对不起，如果我完全错了 - 我是 Git 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:38:27.450

我不是 git hooks 方面的专家，因为我只是在学习自己使用它们，但我建议阅读这个以了解 hooks 的一些背景/上下文：

[http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

在回答您的具体问题时，您不会使用接收后挂钩在客户端运行命令，而是使用客户端挂钩之一，例如：

提交后

我相信客户端相当于接收后（即在整个提交过程完成之后）。

# encoding - base64 的替代编码功能

> ID：11701499
> 
> 赞同：0
> 
> 时间：2012-07-28T13:37:44.270
> 
> 标签：encoding

有谁知道类似于 base64_encode/decode 的编码/解码功能，但它只输出数字和/或字母，因为 base64 有时会输出 =，这会弄乱我的代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:42:59.370

Base64 不是加密。我建议您了解加密的含义。但无论如何，听起来你想要的是 Base32 编码。在 Python 中，你可以通过做得到它

```
base64.b32encode(data) 
```

编辑：base32 编码默认也使用 = 填充，但如果它导致问题，您可以简单地省略填充。

```
base64.b32encode(data).rstrip('=') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:45:47.400

这是我为自己编写的 owncloud 应用程序创建的算法。您可以指定自己的字母表，因此可能值得一试。该实现是在 php 中，但可以很容易地移植。

```
 /**
   * @method randomAlphabet
   * @brief Creates a random alphabet, unique but static for an installation
   * @access public
   * @author Christian Reiner
   */
  static function randomAlphabet ($length)
  {
    if ( ! is_integer($length) )
      return FALSE;
    $c = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxwz0123456789";
    return substr ( str_shuffle($c), 0, $length );
  } // function randomAlphabet

  /**
   * @method OC_Shorty_Tools::convertToAlphabet
   * @brief Converts a given decimal number into an arbitrary base (alphabet)
   * @param integer number: Decimal numeric value to be converted
   * @return string: Converted value in string notation
   * @access public
   * @author Christian Reiner
   */
  static function convertToAlphabet ( $number, $alphabet )
  {
    $alphabetLen = strlen($alphabet);
    if ( is_numeric($number) )
         $decVal = $number;
    else throw new OC_Shorty_Exception ( "non numerical timestamp value: '%1'", array($number) );
    $number = FALSE;
    $nslen = 0;
    $pos = 1;
    while ($decVal > 0)
    {
      $valPerChar = pow($alphabetLen, $pos);
      $curChar = floor($decVal / $valPerChar);
      if ($curChar >= $alphabetLen)
      {
        $pos++;
      } else {
        $decVal -= ($curChar * $valPerChar);
        if ($number === FALSE)
        {
          $number = str_repeat($alphabet{1}, $pos);
          $nslen = $pos;
        }
        $number = substr($number, 0, ($nslen - $pos)) . $alphabet{(int)$curChar} . substr($number, (($nslen - $pos) + 1));
        $pos--;
      }
    }
    if ($number === FALSE) $number = $alphabet{1};
    return $number;
  } 
```

# google-maps - 在 JQuery Mobile Map 中的两个标记之间画线

> ID：11701500
> 
> 赞同：1
> 
> 时间：2012-07-28T13:38:01.327
> 
> 标签：google-maps, jquery-mobile

我在 JQuery Mobile 应用程序中使用 Google Map 插件。此应用程序目前正在特定纬度/经度点添加标记。我需要在这些点之间画一条线。有没有办法用谷歌地图插件做到这一点？如果是这样，怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:04:34.763

假设您需要在markerA和markerB之间有一条线，以下应该可以工作：

```
$('#map_canvas').gmap('addShape', 'Polyline', { 
    'strokeColor': "#FF0000", 
    'strokeWeight': 2, 
    'path': [markerA.getPosition(), markerB.getPosition()]
  }); 
```

如果您已经在某些变量中拥有标记的 LatLng，当然您可以直接将它们放入路径数组中。

# sencha-touch-2 - 在 Sencha 2 存储中添加客户端和服务器数据

> ID：11701508
> 
> 赞同：0
> 
> 时间：2012-07-28T13:39:21.133
> 
> 标签：sencha-touch-2

我有以下商店：

```
Ext.define('Sencha.store.AdultMenuStore', {
extend: 'Ext.data.Store',

config: {
    onItemDisclosure: true,
    fields: ['id', 'name','icon_url','xtype'],
    data: [
        {
            id:   'child1',
            name: 'Thomas',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-profile.png',
            xtype: 'childmenu'
        },{
            id:   'addChild',
            name: 'Add child',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-plussign.png',
            xtype: 'addchildform'
        },{
            id:   'share',
            name: 'Share',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-shareicon.png',
            xtype: 'childmenu'
        },{
            id:   'myProfile',
            name: 'My Profile',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-profile.png',
            xtype: 'childmenu'
        },{
            id:   'help',
            name: 'Help',
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-question.png',
            xtype: 'childmenu'
        }]
}
}); 
```

我还想将一些 json 数据从服务器添加到这个商店，我怎样才能 contatinate 客户端和服务器数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:00:12.503

即使我不确定，但您可以使用 store 的 data 属性，如下所示：

```
storeObj.data.addAll(newData); 
```

假设这`newData`是一个包含服务器共享数据的数组。但是你需要看一下 ExtJS 的 API 文档。抱歉，为这个问题设置一个测试环境很费时间，现在我没有那么多。我只是希望我能给你指出正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:06:15.140

使用上述模型创建商店。商店应设置代理服务器数据

```
Store.load(function (store) {
    store.add(data)// data is an array with you local data
}) 
```

# python - OpenGL Framebuffer with more than one texture

> ID：11701523
> 
> 赞同：3
> 
> 时间：2012-07-28T13:40:56.127
> 
> 标签：python, opengl, framebuffer

I want to render n texture in my program and store them for later usage. Therefore I use the OpenGL FramebufferObject.

At first I create an array with 128 textures like this

```
self.textures = glGenTexture(128) 
```

The second step is a loop with 128 iterations in which I bind the texture at position i and render into it.

```
 glBindTexture(GL_TEXTURE_2D, self.texture[i])
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER, GL_NEAREST)
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_NEAREST)
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8,  width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, None);
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT,  GL_TEXTURE_2D, self.texture[i], 0);
    renderScene() 
```

The last step is another loop, the MainGameLoop in which I render a plane with one texture from the texture array.

```
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)
    glMatrixMode(GL_MODELVIEW)
    glLoadIdentity()
    gluLookAt(0,0,1,0,0,0,0,1,0)
    glEnable(GL_TEXTURE_2D)

    glBindTexture(GL_TEXTURE_2D, self.texture[i])

    glBegin(GL_QUADS)

    glNormal3f(0.0, 1.0, 0.0)
    glTexCoord2f(0.0, 0.0)
    glVertex3f(-1, 1, -1)
    glTexCoord2f(1.0, 0.0)
    glVertex3f(1, 1, -1)
    glTexCoord2f(1.0, 1.0)
    glVertex3f(1, -1, -1)
    glTexCoord2f(0.0, 1.0)
    glVertex3f(-1, -1, -1)

    glEnd();

    glDisable(GL_TEXTURE_2D) 
```

But something went wrong, the screen stays black.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T14:38:53.073

A texture **must not** be bound when used as a color attachment to a framebuffer object. You however are binding it before attaching which of course breaks the whole thing.

The correct code would iterate through all multitexturing units and make sure the texture is not bound in any of them.

### Update due to comment:

In your code you bind a texture name and set parameters for it

```
glBindTexture(GL_TEXTURE_2D, self.texture[i])
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER, GL_NEAREST)
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_NEAREST) 
```

Then you initialize the texture object with null data

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8,  width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, None); 
```

and finally attach it as a framebuffer attachment.

```
glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT,  GL_TEXTURE_2D, self.texture[i], 0); 
```

The problem is, that now the texture is still selected as a data source, because it is bound. The texture must not be bound to any texturing unit, to work as a framebuffer color attachment. Also the FBO must be bound as render target somewhere.

```
renderScene() 
```

Here's a small helper function that makes sure, a given texture object is not bound in any texturing unit:

```
def glhelperUnbindTexture(target, name):
    max_units = max(glGetInteger(GL_MAX_TEXTURE_UNITS),
                    glGetInteger(GL_MAX_TEXTURE_IMAGE_UNITS),
                    glGetInteger(GL_MAX_TEXTURE_COORDS))
    current_unit = glGetInteger(GL_ACTIVE_TEXTURE)

    for i in range(max_units):
        glActiveTexture(GL_TEXTURE0 + i)
        binding = glGetInteger( {GL_TEXTURE_1D: GL_TEXTURE_BINDING_1D,
                                 GL_TEXTURE_2D: GL_TEXTURE_BINDING_2D,
                                 GL_TEXTURE_3D: GL_TEXTURE_BINDING_3D,
                                 GL_TEXTURE_CUBE_MAP: GL_TEXTURE_BINDING_CUBE_MAP}[target])
        if binding == name:
             glBindTexture(target, 0) # this unbinds the texture from the texturing unit

    glActiveTexture(current_unit) 
```

# semantic-web - 使用耶拿的基本猫头鹰推理

> ID：11701530
> 
> 赞同：0
> 
> 时间：2012-07-28T13:42:09.980
> 
> 标签：semantic-web, jena, owl, semantic-analysis

我是本体新手，有一个关于 OWL 推理的基本问题。这个问题可能看起来很啰嗦，对此感到抱歉..

考虑具有以下公理 (owl:class C1) 和 (owl:class P) 的本体，具有对象属性 (rdfs:domain observes C1)(rdfs:range observes P)，以及个体 (rdf:type p P )

然后我通过创建具有限制的类 C2 (rdfs:subClassOf C2 C1) 来限制类 C1（观察 C2 p）

现在，当我创建一个新个体 (rdf:type x owl:Thing)（观察 xp）时，推理器会推断出 (rdf:type x C1)。然而，个体 x 的定义似乎更接近于 C2，所以推理者不应该推断 x 属于 C2 类型吗？

请帮忙！

我正在尝试使用 Jena 框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:59:28.487

没有发生这种情况的原因是您已经使用子类创建了限制，这意味着您已经创建了必要（但不充分）条件。换句话说，你对推理者这么说：

“如果一个人是 C2 类型，那么它必须有一个属性‘观察’”

但是您并*没有*反过来说：

“如果一个人有一个属性‘观察’，那么它必须是 C2 类型的”

为了让推理者能够推断出您的个人属于 C2 类型，您还必须具备第二条规则（充分条件）。您可以在 OWL 中通过`owl:equivalentClass`对您的限制使用关系（而不是`rdfs:subClassOf`关系）来执行此操作。

# css - 如何在整个标题部分制作背景？

> ID：11701531
> 
> 赞同：1
> 
> 时间：2012-07-28T13:42:09.607
> 
> 标签：css, background

我想将我的页面分为 3 个部分，具有 3 种不同的背景
`top_bg`：`middle_bg`和`bottom_bg`.

问题是背景有填充。我希望它从页面的开头显示到下一个 500 像素的高度。

这是我的 HTML：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title></title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <header>
    <div class="top_part">
      <img src="images/logo.png" alt="logo" />
      <h1>My website name</h1>
    </div>
  </header>
</body>
</html> 
```

这里是我的 CSS：

```
header {
    background-image: url(images/top_bg.gif) ;
    height: 500px;
}

.top_part img {
    float: left;
    width: 80px;
    height: 80;
}

.top_part h1 {
    position: relative;
    top: 18px;
    left: 10px;
} 
```

看我的意思，如果你不明白：[图片](http://i.imgur.com/qmXiW.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T13:45:16.110

浏览器默认样式导致HTML 元素`margin`，`padding`你需要重置那些..

采用

```
* { /* This resets all elements default margins and paddings */
margin: 0px;
padding: 0px;
} 
```

否则使用 CSS**[重置](http://meyerweb.com/eric/tools/css/reset/)**样式表来重置具有**默认值** `margins`和`padding`

# web2py - 在共享主机上获取 FCGI web2py 的 PID

> ID：11701533
> 
> 赞同：0
> 
> 时间：2012-07-28T13:42:26.733
> 
> 标签：web2py, pid, fastcgi

我按照[此页面](http://webcache.googleusercontent.com/search?q=cache%3aobLFODvKZ2YJ%3awww.web2pyslices.com/slice/show/1401/web2py-on-shared-hosting-hostmonster-with-fastcgi+&cd=1&hl=en&ct=clnk&gl=us)上的说明操作，并让 web2py 在我的 Hostmonster 共享主机上与 FCGI 一起运行。但是，我找不到我正在运行的这个 web2py 服务器的 PID。（在我运行服务器之后，我忘了写下它的 PID。）我正在尝试`ps aux | grep web2py`按照一些人的建议去做，但什么也没得到。也没有 /var/run/web2pyd.pid 文件，或 /var/run 中包含 web2py 的任何 .pid 文件。

有人对如何找到PID有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T00:30:07.253

事实证明，当 ssh 会话结束时，web2py 服务器进程也结束了，因为我没有将进程与 ssh 会话分离。您可以通过以下方式查看属于您的用户的进程：

```
 ps aux | grep `whoami` 
```

# c# - Skydrive API change permission of folder?

> ID：11701534
> 
> 赞同：1
> 
> 时间：2012-07-28T13:42:34.267
> 
> 标签：c#, windows-phone-7, onedrive

I'm trying to change the access permissions of a folder on skydrive, but it isn't working.

```
Dictionary<string, object> folderData = new Dictionary<string, object>();
folderData.Add("shared_with", "Everyone (public)");
LiveConnectClient client = new LiveConnectClient(session);
client.PutAsync(folderId, folderData); 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:53:17.353

权限是只读的。像这样，文件夹的读取权限。

```
...
    void Properties_Completed(object sender, LiveOperationCompletedEventArgs e)//completed
    {
        if (e.Error == null)
        {
            IDictionary<string,object> result = e.Result;
            object shr = result["shared_with"];
            IDictionary<string, object> permission = shr as IDictionary<string, object>;
            string access = permission["access"].ToString();
        }
    { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T23:28:36.740

请记住，您需要激活**wl.skydrive_update**范围才能更新与 SkyDrive 实体相关的数据。此外，权限是只读的（详见[此处](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx)）。

# xml - Dynamical enumeration in XSD

> ID：11701535
> 
> 赞同：2
> 
> 时间：2012-07-28T13:42:41.647
> 
> 标签：xml, xsd

I have such xml structure:

```
<main>
  <objects>
    <object name="book" />
    <object name="table" />
  </objects>
  <actions>
    <action input="book" />
    <action input="table" />
    <action input="book" />
  </actions>
</main> 
```

This is a simplified example.

I want to create xsd schema which invalidates such xml:

```
<main>
  <objects>
    <object name="book" />
    <object name="table" />
  </objects>
  <actions>
    <action input="book" />
    <action input="table" />
    <action input="fruit" />
  </actions>
</main> 
```

because of there is no object item with the name "fruit" into list of objects.

I can't simply create `<xsd:enumeration>` because object names are always different and I don't know all of them. It seems to be a list of possible values of action's names should be created dynamically.

It would be wonderful to create enumeration dynamically for IntelliSense support (`<xsd:assert>` can't provide it).

Is it possible?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:15:22.033

从生成的 XSD 开始，然后对其进行调整以引入所需的约束。Intellisense 部分高度依赖于编辑器。即使推断“智能”智能感知的元数据在那里（通过 key/keyref），我怀疑市场上的编辑器会利用它。下面的 XSD 将验证您提供的 XML 并使其失败。

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="main">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="objects">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element maxOccurs="unbounded" name="object">
                                <xsd:complexType>
                                        <xsd:attribute name="name" type="xsd:string" use="required"/>
                                </xsd:complexType>
                            </xsd:element>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
                <xsd:element name="actions">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element maxOccurs="unbounded" name="action">
                                <xsd:complexType>
                                        <xsd:attribute name="input" type="xsd:string" use="required"/>
                                </xsd:complexType>
                            </xsd:element>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:key name="Objects">
            <xsd:selector xpath="objects/object"/>
            <xsd:field xpath="@name"/>
        </xsd:key>
        <xsd:keyref name="ActionToObjects" refer="Objects">
            <xsd:selector xpath="actions/action"/>
            <xsd:field xpath="@input"/>
        </xsd:keyref>
    </xsd:element>
</xsd:schema> 
```

示意图：

![QTAssistant 显示具有 key/keyref 功能的 XSD 图](../Images/96952048355ecc790c488e1f18ec4eff.png)

# android - 如何在android中使用蓝牙并将数据发送到其他设备

> ID：11701540
> 
> 赞同：0
> 
> 时间：2012-07-28T13:43:08.217
> 
> 标签：android, android-emulator, bluetooth, file-sharing

我正在开发一个 android 应用程序，它将通过蓝牙将文件发送到移动设备，请任何人都可以帮助我了解如何在 android 模拟器上使用蓝牙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:51:26.913

我的经验是标准的SDK模拟器不支持蓝牙。我最终购买了一台用于蓝牙开发的二手平板电脑。

# php - 使用 MySQL LIKE 在数据库中选择转义字符串

> ID：11701542
> 
> 赞同：3
> 
> 时间：2012-07-28T13:43:18.927
> 
> 标签：php, mysql, string, escaping

我在放入我的数据库中的东西上使用 mysql_real_escape_string，所以类似的东西`Bob's Shop`会变成`Bob\'s Shop`. 而且，例如，如果我尝试选择包含 的所有条目`Bob\'s`，我的选择语句如下所示：

```
SELECT * FROM tbl WHERE name LIKE '%Bob\\\'s%' 
```

无论出于何种原因，它都不起作用，即使它完全可以起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:57:28.830

如果该撇号被`mysql_real_escape_string`函数转义，则在 DB 中输入的值将不包括反斜杠，这仅是出于安全目的。所以你的数据库中的最终值应该是`Bob's`. 这就像在用引号括起来的字符串中转义相同的引号，例如`"double \"quotes\""`and `'single \'quotes\''`。

您是否尝试`%Bob\'s%`按原样查询？**name**列的数据类型是什么？我无法复制您的问题，它适用于您和我的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:41:19.827

我修复了它（感谢迈克尔向我展示了如何）。我正在发布我所做的事情，以防其他人遇到这个问题。

从来没有想出如何正确地将转义字符放在 LIKE 中，但问题是我打开了魔术引号，所以每当我使用 mysql_real_escape_string 时，它都会添加额外的转义字符，以便它不是存储为 Bob 的，而是存储为 Bob \的。这是禁用魔术引号的文档：[http](http://www.php.net/manual/en/security.magicquotes.disabling.php) ://www.php.net/manual/en/security.magicquotes.disabling.php 对我来说，将`php_flag magic_quotes_gpc Off`或`php_value magic_quotes_gpc Off`放入 .htaccess 不起作用，因为我使用的是购买的主机并且主机不允许这样的设置。因此，我放入`magic_quotes_gpc = Off`了一个名为 php.ini 的文件，并将其放入我需要的每个目录中。

因为我的 MySQL 数据库中已经有很多行包含额外的反斜杠，所以当我关闭魔术引号时，我需要删除它们。您可以通过发出这样的查询轻松地做到这一点：`UPDATE tbl SET col=REPLACE(col,'\\\'','\'') WHERE col LIKE '%\'%'`将 tbl 替换为您的表名，将 col 替换为您正在使用的任何列。如果您需要修复其他转义字符，只需更改 REPLACE 和 LIKE 以反映这一点。可能有更好的代码可以一次性完成所有列和所有转义字符，但出于我的目的，我不需要它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-24T12:37:21.493

嗨，我认为这可以为您的 mySQL 和 Java 提供帮助，

在 Java 中

```
char quotes ='"';

String sql =" SELECT * FROM tb1 where name LIKE "+quotes+"%Bob's%"+quotes+" ;"; 
```

mySQL 查询

```
SELECT * FROM tbl WHERE name LIKE "%Bob's%" 
```

# android - android中的应用程序级变量为空

> ID：11701545
> 
> 赞同：1
> 
> 时间：2012-07-28T13:44:27.403
> 
> 标签：android

我开发了一个 Android 应用程序。为了让用户保持登录状态，我将他们的用户名和密码存储在扩展的类中`Application`。如果用户在未注销的情况下退出应用程序，则会启动一个后台服务，该服务将使用存储在应用程序上下文中的用户凭据（用户名和密码）。

这对我来说效果很好。但现在我已经在我的手机（三星 Galaxy Ace）中安装了 facebook。它有一项占用 37 MB RAM 的服务。现在当我运行我的应用程序的后台服务时。当我玩游戏或有时甚至在我锁定屏幕时（用户名和密码变为空），应用程序级别变量会被杀死。
怎么了？还有什么其他方法可以让用户保持登录状态？我不想使用 sqlite 数据库来存储用户名/密码。您可以轻松查看表格的值。

**请注意**
，即使这个 facebook 正在运行，我仍然有 38 MB 的 RAM 可用。我的应用程序仅使用 544kb 的内存。

**EDIT1**
这可能看起来令人惊讶，但我没有对我的代码进行任何更改。但是现在，即使我打开三个或四个应用程序，应用程序变量（用户名和密码）仍然存在。在上面的问题中，我说`Application`一旦我锁定屏幕，变量就会变为空。但是现在，即使我玩游戏（打开另一个应用程序！），它们似乎仍然存在。`Application`很明显，杀死变量的不是内存限制。
这是什么原因？是什么决定了应用级变量的查杀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:56:10.453

您可以使用 SharedPreferences 来完成您正在寻找的内容。

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);
Editor editor = preferences.getEditor();
editor.putBoolean("user_logged_in", true);
// ... anything else you want
editor.commit(); 
```

您也可以执行相同的操作来检索您的偏好。

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);
boolean userLoggedIn = preferences.getBoolean("user_logged_in", false); 
```

如何确保您的数据安全是故事的另一部分。这些方法适用于未植根的设备。安全性取决于加密您的凭据（最好使用非对称加密算法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:19:14.817

您只能对用户名/密码使用加密。四处搜索将为您提供一些示例代码。如果用户关闭他的设备，您的应用程序也会停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:19:44.577

在您的后台服务 oncreate 中，调用 setForeground 方法：

```
public void onCreate() {
super.onCreate();
...
this.setForeground(true);
...
} 
```

setForeground 方法可以保护你的服务不被系统杀死。我认为这可以帮助你。^-^

# c# - 将多个 LINQ 查询转换为 1？

> ID：11701549
> 
> 赞同：0
> 
> 时间：2012-07-28T13:45:00.820
> 
> 标签：c#, linq

是否可以将此代码转换为一个 LINQ 查询。我本可以发誓我以前做过类似的事情，但我不知道我可能在哪里代码。如果一个列表具有来自另一个列表的值，我想执行子查询并修改所选项目的值。

```
var selectInstructors = _instructorService.GetAllNonGuestInstructors()
                                          .Select(i => new SelectListItem()
                                                       {
                                                           Text = i.User.ToFullName(),
                                                           Value = i.Id.ToString() 
                                                       }).ToList();

var selectedItems = schedule.Instructors
                        .Select(instructior1 => selectInstructors.FirstOrDefault(s => s.Value == instructior1.Id.ToString()))
                        .Where(selectedItem => selectedItem != null);

foreach (var selectedItem in selectedItems )
{
    selectInstructors.Remove(selectedItem);
    selectedItem.Selected = true;
    selectInstructors.Add(selectedItem);
} 
```

所以让我们假设在`selectInstructors`列表中我有这些值：John Smith，1 Jane Doe，2 Dave Ritter，3（在我们迭代持久化的讲师之前，`selected`布尔值默认为 false）

班级有该`schedule.Instructors`时间表的持续教师名单：John Smith，1 Dave Ritter，3

现在，我想做的是设置值等于的任何`Selected`属性`selectInstructors``schedule.Instructors`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:35:38.057

```
var selectedIds = schedule.Instructors.Select(i => i.Id.ToString()).ToList();    

var instructors = (from instructor in _instructorService.GetAllNonGuestInstructors()
                   let value = instructor.Id.ToString()
                   select new SelectListItem()
                   {
                       Text = instructor.User.ToFullName(),
                       Value = value,
                       Selected = selectedIds.Contains(value)
                   }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:33:07.287

```
 var allInstructors = _instructorService.GetAllNonGuestInstructors();
        if(allInstructors!=null)
            allInstructors.Select(i =>
                    new SelectListItem() { Text = i.User.ToFullName(), Value = i.Id.ToString() }).
                    Zip(schedule.Instructors,(selectedItems,instructor)=>
                    {var item = selectedItems.FirstOrDefault(s => s.Value == instructior.Id.ToString());
                        if(item!=null)
                            item.Selected=true;});
      //Now use allInstructors collection further it will have Selected true according to your conditions. 
```

我不明白为什么 selectedItem 被删除然后添加的一件事。无论如何，我希望这会有所帮助。

# java - Spring Controller/Service/Repository 中的泛型

> ID：11701556
> 
> 赞同：0
> 
> 时间：2012-07-28T13:46:45.400
> 
> 标签：java, spring, hibernate, generics

我想精简我的代码以仅使用一个函数进行过滤。过滤应该使用 3 个不同的类：com.example.model.Category、com.example.model.Tag、java.util.Calendar。

这是我的控制器

```
@Controller
@RequestMapping( "/blog" )
public class BlogController
{
    @Autowired
    private ArticleService articleService;

    @Autowired
    private CategoryService categoryService;

    @Autowired
    private TagService tagService;

    private static final int PER_PAGE = 5;

    private static final int ARCHIVE_MONTHS = 12;

    @ModelAttribute
    public void addGlobalObjects( Map<String, Object> map )
    {
        map.put( "section", "blog" );

        SortedMap<Category, Integer> categories = new TreeMap<Category, Integer>();
        for ( Category category : categoryService.list() )
        {
            categories.put( category, articleService.size( category, Category.class ) );
        }

        Calendar cal = Calendar.getInstance();
        cal.set( Calendar.DAY_OF_MONTH, 1 );

        cal.add( Calendar.MONTH, ARCHIVE_MONTHS * -1 );

        SortedMap<Date, Integer> archive = new TreeMap<Date, Integer>();
        for ( int i = 0; i < ARCHIVE_MONTHS; ++i )
        {
            cal.add( Calendar.MONTH, 1 );
            archive.put( cal.getTime(), articleService.size( cal, Calendar.class ) );
        }

        SortedMap<Tag, Integer> tags = new TreeMap<Tag, Integer>();
        for ( Tag tag : tagService.list() )
        {
            tags.put( tag, articleService.size( tag, Tag.class ) );
        }

        map.put( "categories", categories );
        map.put( "archive", archive );
        map.put( "tags", tags );

        map.put( "categoriesSize", categoryService.size() );
        map.put( "tagsSize", tagService.size() );

        map.put( "date", new Date() );
    }

    @RequestMapping( "/index.html" )
    public String index( HttpServletRequest request, Map<String, Object> map )
    {
        return list( request, map, null, null );
    }

    @RequestMapping( "/archive/{date}.html" )
    public String archive( @PathVariable( "date" ) @DateTimeFormat( iso = ISO.DATE, style = "yyyy/MM" ) Date date, HttpServletRequest request, Map<String, Object> map )
    {
        Calendar cal = Calendar.getInstance();
        cal.setTime( date );

        return list( request, map, cal, Calendar.class );
    }

    private <T> String list( HttpServletRequest request, Map<String, Object> map, Object filterObject, Class<T> clazz )
    {
        int page = ServletRequestUtils.getIntParameter( request, "page", 1 );
        map.put( "articles", articleService.list( page * PER_PAGE - PER_PAGE, PER_PAGE, filterObject, clazz ) );
        map.put( "numPages", Math.ceil( articleService.size() / PER_PAGE ) );
        map.put( "currentPage", page );
        return "articles";
    }
} 
```

现在在我的 ArticleDAO 中，我需要实现方法列表/大小：

```
@Repository
public class ArticleDAO extends BaseDAO<Article>
{
    public <T> List<Article> list( int offset, int limit, Object filterObject, Class<T> clazz )
    {
        Criteria c = doFilter( filterObject, clazz );

        if ( limit > 0 )
        {
            c.setFirstResult( offset );
            c.setMaxResults( limit );
        }

        return c.list();
    }

    public <T> Integer size( Object filterObject, Class<T> clazz )
    {
        Number ret = ( Number ) doFilter( filterObject, clazz ).setProjection( Projections.rowCount() ).uniqueResult();
        return ret.intValue();
    }

    private <T> Criteria doFilter( Object filterObject, Class<T> clazz )
    {
        Criteria criteria = sessionFactory.getCurrentSession().createCriteria( Article.class );

        if ( filterObject != null && clazz != null )
        {
            T filter = clazz.cast( filterObject );

            if ( filter instanceof Calendar )
            {
                // The method set(int, int) is undefined for the type T
                filter.set( Calendar.DAY_OF_MONTH, 1 );
                filter.set( Calendar.HOUR_OF_DAY, 0 );
                filter.set( Calendar.MINUTE, 0 );
                filter.set( Calendar.SECOND, 0 );
                // The method getTime() is undefined for the type T
                Date d1 = filter.getTime();

                // The method getActualMaximum(int) is undefined for the type T
                filter.set( Calendar.DAY_OF_MONTH, filter.getActualMaximum( Calendar.DAY_OF_MONTH ) );
                filter.set( Calendar.HOUR_OF_DAY, 23 );
                filter.set( Calendar.MINUTE, 59 );
                filter.set( Calendar.SECOND, 59 );
                Date d2 = filter.getTime();

                criteria.add( Restrictions.between( "creationDate", d1, d2 ) );
            }

            if ( filter instanceof Category )
            {
                // The method getId() is undefined for the type T
                criteria.createCriteria( "categories" ).add( Restrictions.eq( "id", filter.getId() ) );
            }

            if ( filter instanceof Tag )
            {
                // The method getId() is undefined for the type T
                criteria.createCriteria( "tags" ).add( Restrictions.eq( "id", filter.getId() ) );
            }
        }

        return criteria;
    }
} 
```

ArticleDAO.doFilter 应该是什么样子？我想我不明白泛型的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:36:38.193

我不认为仿制药在这里给你买任何东西。这甚至不会编译 b/c T 未知并且您正在尝试调用特定方法（例如 getId()）。

有几种方法可以在没有泛型的情况下做到这一点。最简单的方法是

```
 if ( filterObject instanceof Calendar ) {
   Calendar filterCal = (Calendar) filterObject;

   filterCal.set (Calendar.DAY_OF_MONTH, 1); // ... and so on 
```

如果你这样做，你可以从你的方法中删除 clazz 参数。你不需要那个 clazz.cast() 调用。

只是关于泛型的一句话，当我做同样的事情时，我通常会发现自己使用泛型，而不管类型如何。例如，看起来您正在为 BaseDAO 成功使用泛型。无论类型如何，BaseDAO 都会保存、更新、删除等。在上述情况下，您正在尝试根据类型执行不同的操作。它并不真正适合泛型。事实上，对每种类型做不同的事情通常意味着你可以用多态性很好地做到这一点。

# android - Android：旋转地图视图->计数器旋转触摸->奇怪的问题

> ID：11701557
> 
> 赞同：0
> 
> 时间：2012-07-28T13:47:03.563
> 
> 标签：android, rotation, android-mapview, touches

我在我的 MapView 中添加了旋转，除了触摸之外它运行良好。

我按照这个代码[链接](http://code.google.com/p/cameralert/wiki/RotateTouches)旋转视图和计数器旋转触摸。

现在我的问题。

即使当前没有旋转，触摸位置的计算也是错误的。例如，在 roation = 0 期间，y 坐标向下移动。

原因是 canvas.getMatrix().invert(mMatrix);
即使我不旋转画布，似乎也得到了错误的倒置矩阵。

```
@Override
protected void dispatchDraw(Canvas canvas)
{
    canvas.save(Canvas.MATRIX_SAVE_FLAG);
    //canvas.rotate(rotation, getWidth() * 0.5f, getHeight() * 0.5f);
    canvas.getMatrix().invert(mMatrix);     
    Log.d("matrix", mMatrix.toString());
    super.dispatchDraw(canvas);
    canvas.restore();
} 
```

日志说矩阵是：（在没有旋转期间） Matrix{[1.0, -0.0, 0.0][-0.0, 1.0, -38.0][0.0, 0.0, 1.0]}

那么问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:50:47.650

我为解决此问题所做的工作如下：

```
 private Matrix invertedMatrix = new Matrix();
    private float[] tempLocation = new float[2];

    @Override
    protected void dispatchDraw(Canvas canvas) {
        canvas.save(Canvas.MATRIX_SAVE_FLAG);
        canvas.rotate(mHeading, getWidth() * 0.5f, getHeight() * 0.5f);
        canvas.getMatrix().invert(invertedMatrix);
        mCanvas.delegate = canvas;
        super.dispatchDraw(mCanvas);
        canvas.restore();
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        centeringAllowed = false;

        float[] location = tempLocation;
        location[0] = ev.getX();
        location[1] = ev.getY();
        invertedMatrix.mapPoints(location);
        ev.setLocation(location[0], location[1]);
        return super.dispatchTouchEvent(ev);
    } 
```

# php - 为什么以下 php 代码不起作用？

> ID：11701558
> 
> 赞同：-1
> 
> 时间：2012-07-28T13:47:11.843
> 
> 标签：php, web

错误说 Parse error: syntax error, unexpected T_STRING, expecting T_VARIABLE on line 11 我以前也使用过相同的代码，它在那里工作正常

```
class connection{

// variables for cms login

var $admin_name1 = "name";
var $admin_passwd1 = "passwd";
// variable to recieve data from form 

var rename;    //********** this line is giving error
var repasswd;

function cms_login()
{
if(($this->rename == $this->admin_name1) && ($this->repasswd == $this->admin_passwd1)){ // access granted 
echo 'Access granted<br>';
echo 'Please wait while you are being redirected';
session_start();
$_SESSION['piratica']="active";
$redirect = "Location: landing.php";
echo header($redirect);
}
else { // access denied
echo 'WARNING  !!';
echo '<br>Wrong login details.';

}

} // function cms_login ends here 

} // class connection ends here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T13:48:14.950

您忘记了`$`变量名前面的符号。

```
var $rename;    //********** this line is giving error
var $repasswd; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:50:11.067

php中的所有变量都以$开头

您忘记添加 rename 和 repasswd 变量

# ruby-on-rails - 在 Rails 3.2.3 服务器中，我收到错误 304 Not Modified (5ms)

> ID：11701559
> 
> 赞同：2
> 
> 时间：2012-07-28T13:47:16.710
> 
> 标签：ruby-on-rails, ruby, http-status-codes, http-status-code-304

我是 ruby​​ 和 rails 的新手几个月了。我参加了 ruby​​ 和 rails 的课程，这使我能够创建一个餐厅博客网站。好吧，我最近开始改造该网站以供我的朋友使用。所以它只是改变了一些关于图片、措辞等的东西。当我完全创建另一个博客时，我注册了一个登录页面，他们需要创建一个登录页面才能创建和发表评论等。一切似乎当我为本地主机服务器运行 rails 时工作正常，但是当我为站点创建登录以确保一切正常时。它不允许我创建登录，并且我的 Rails 服务器中不断出现错误。见下文！我已经搜索和搜索，似乎无法找到解决方案。我唯一真正改变的是一些图片和一些措辞。我没有' 不要乱用登录编码，创建登录代码等。任何帮助都会很好，同时我会继续搜索。在此之前，我遇到了内容长度错误，所以我关注了这个网站[http://theresa.multimediatechnology.at/webrick-warnings-in-ruby-1-9-3/](http://theresa.multimediatechnology.at/webrick-warnings-in-ruby-1-9-3/)。这似乎解决了这个问题，但现在我得到了以下信息。谢谢！

```
 whitey7@whitey7:~/poe$ rails s
 => Booting WEBrick
=> Rails 3.2.3 application starting in development on
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-07-28 08:59:58] INFO  WEBrick 1.3.1
[2012-07-28 08:59:58] INFO  ruby 1.9.3 (2012-04-20) [x86_64-linux]
[2012-07-28 08:59:58] INFO  WEBrick::HTTPServer#start: pid=4690 port=3000

Started GET "/reviews/register" for 127.0.0.1 at 2012-07-28 09:00:04 -0400
Processing by ReviewsController#register as HTML
  Rendered reviews/register.html.erb within layouts/application (5.9ms)
Completed 200 OK in 75ms (Views: 73.8ms | ActiveRecord: 0.0ms)

Started GET "/assets/reviews.css?body=1" for 127.0.0.1 at 2012-07-28 09:00:04 -0400
Served asset /reviews.css - 304 Not Modified (5ms)

Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2012-07-28 09:00:05 -0400
Served asset /scaffolds.css - 304 Not Modified (2ms)

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2012-07-28 09:00:05 -0400
Served asset /jquery.js - 304 Not Modified (3ms)

Started GET "/assets/reviews.js?body=1" for 127.0.0.1 at 2012-07-28 09:00:05 -0400
Served asset /reviews.js - 304 Not Modified (1ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2012-07-28 09:00:05 -0400
Served asset /jquery_ujs.js - 304 Not Modified (2ms)

Started GET "/assets/images/images.jpeg" for 127.0.0.1 at 2012-07-28 09:00:05 -0400
Served asset /images/images.jpeg - 304 Not Modified (9ms)

Started GET "/assets/images/wisdom1.jpeg" for 127.0.0.1 at 2012-07-28 09:00:05 -0400
Served asset /images/wisdom1.jpeg - 304 Not Modified (4ms)

Started GET "/reviews/register" for 127.0.0.1 at 2012-07-28 09:00:24 -0400
Processing by ReviewsController#register as HTML
  Rendered reviews/register.html.erb within layouts/application (1.2ms)
Completed 200 OK in 9ms (Views: 8.6ms | ActiveRecord: 0.0ms)

Started GET "/assets/reviews.css?body=1" for 127.0.0.1 at 2012-07-28 09:00:24 -0400
Served asset /reviews.css - 304 Not Modified (1ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2012-07-28 09:00:24 -0400
Served asset /jquery_ujs.js - 304 Not Modified (1ms)

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2012-07-28 09:00:24 -0400
Served asset /jquery.js - 304 Not Modified (5ms)

Started GET "/assets/reviews.js?body=1" for 127.0.0.1 at 2012-07-28 09:00:24 -0400
Served asset /reviews.js - 304 Not Modified (0ms)

Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2012-07-28 09:00:24 -0400
Served asset /scaffolds.css - 304 Not Modified (0ms)

Started GET "/assets/images/wisdom1.jpeg" for 127.0.0.1 at 2012-07-28 09:00:24 -0400
Served asset /images/wisdom1.jpeg - 304 Not Modified (3ms)

Started GET "/assets/images/images.jpeg" for 127.0.0.1 at 2012-07-28 09:00:24 -0400
Served asset /images/images.jpeg - 304 Not Modified (3ms)
^[[B 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T15:27:33.873

HTTP 状态代码不表示错误。它只是意味着资产文件（图像、css、javascript）不需要再次传输，因为浏览器已经缓存了最新版本。

请参阅[HTTP 3xx 状态代码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection)

# xquery - xquery初学者-如何在包含文本以及包含更多文本的“p”标签的div中选择第n个节点

> ID：11701561
> 
> 赞同：1
> 
> 时间：2012-07-28T13:47:33.207
> 
> 标签：xquery

下面给出了一些与网页中的 div 对应的 HTML 代码——

```
<div id="1">
    Text #1
    <p> Text #2 </p>
    Text #3
</div> 
```

我感到困惑的是，在 id=1 的 div 中，我是否将“Text #1”视为第一个子节点，将“Text #3”视为第三个子节点？因为“Text #1”和“Text #2”没有包含在任何 HTML 结构中，而“Text #2”包含在“p”结构中。

从上面的表达式中检索文本“Text #3”的 Xquery 表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:56:55.467

应用该`descendant::text()`步骤以检索所有文本节点并选择第三个节点：

```
(<div id="1">
    Text #1
    <p> Text #2 </p>
    Text #3
</div>//text())[3] 
```

# android - 如何在gridview中做翻转动画？

> ID：11701565
> 
> 赞同：2
> 
> 时间：2012-07-28T13:48:31.760
> 
> 标签：android, animation, gridview

我想制作gridview的两个图像（项目）的翻转动画，可以吗？

# wix - 如何在我的托管引导程序中显示本地化的 WiX UI？

> ID：11701566
> 
> 赞同：1
> 
> 时间：2012-07-28T13:48:53.850
> 
> 标签：wix, bootstrapper, wix3.6, burn, wix-extension

当我使用 MSI 包 UI 时，我使用了 WixUIExtension 和“WixUI_ErrorProgressText”集。但是当我使用托管引导程序和 ExecuteMsiMessage 事件来显示进度文本时，它没有任何效果，我看到类似“Action 6:43:04: ...”的文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:25:29.507

尝试这个：

```
private void ExecuteMsiMessage(object sender, ExecuteMsiMessageEventArgs e)
{
    lock (_lock)
    {
        if (e.MessageType == InstallMessage.ActionStart && e.Data != null && e.Data.Count > 1 && !string.IsNullOrWhiteSpace(e.Data[1]))
        {
            Message = e.Data[1];
        }
        e.Result = Canceled ? Result.Cancel : Result.Ok;
    }
} 
```

# java - OpenGL 高度图加载器

> ID：11701567
> 
> 赞同：0
> 
> 时间：2012-07-28T13:49:01.207
> 
> 标签：java, opengl, heightmap

我检查了一个 LibGDX 高度图加载器[并找到了一个](http://code.google.com/p/libgdx/source/browse/trunk/tests/gdx-tests/src/com/badlogic/gdx/tests/TerrainTest.java)，但我不太确定 buildIndices() 代码是如何工作的。我也不确定为什么它只生成一个 128*x*128 的高度图块，任何大于 128（例如 1024）的东西都会使加载器像这样混乱：

***1024 块*** ![1024 块](../Images/80e3a26588cd67f5bb034a4a96b87a9e.png)

如您所见，山上有洞，块形状呈现为 128*1024 网格

***128块*** ![128块](../Images/0885ae0d27ffe2274abbcc3a5ddc2816.png)

128*128 的块完全没问题

这是我的代码：

```
package com.amzoft.game.utils;

import java.util.Arrays;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.files.FileHandle;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.Pixmap;

public class HeightmapConverter {

    public int mapWidth, mapHeight;
    private float[] heightMap;
    public float[] vertices;
    public short[] indices;
    private int strength;
    private String heightmapFile;
    private float textureWidth;

    public HeightmapConverter(int mapWidth, int mapHeight, int strength, String heightmapFile)
    {
        this.heightMap = new float[(mapWidth+1) * (mapHeight+1)];
        this.mapWidth = mapWidth;
        this.mapHeight = mapHeight;
        this.vertices = new float[heightMap.length*5];
        this.indices = new short[mapWidth * mapHeight * 6];
        this.strength = strength;
        this.heightmapFile = heightmapFile;

        loadHeightmap();
        createIndices();
        createVertices();
    }

    public void loadHeightmap()
    {
        try{
            FileHandle handle = Gdx.files.internal(heightmapFile);
            Pixmap heightmapImage = new Pixmap(handle);
            textureWidth = (float)heightmapImage.getWidth();
            Color color = new Color();
            int indexToIterate = 0;
            for(int y = 0;  y < mapHeight + 1; y++)
            {
                for(int x = 0; x < mapWidth + 1; x++)
                {
                    Color.rgba8888ToColor(color, heightmapImage.getPixel(x, y));
                    heightMap[indexToIterate++] = color.r;
                }
            }
            handle = null;
            heightmapImage.dispose();
            heightmapImage = null;
            color = null;
            indexToIterate = 0;
        }catch(Exception e){
            e.printStackTrace();
        }
    }

    public void createVertices() 
    {
        int heightPitch = mapHeight + 1;
        int widthPitch = mapWidth + 1;

        int idx = 0;
        int hIdx = 0;

        for(int z = 0; z < heightPitch; z++)
        {
            for(int x = 0; x < widthPitch; x++) 
            {
                vertices[idx+0] = x;
                vertices[idx+1] = heightMap[hIdx++] * strength;
                vertices[idx+2] = z;
                vertices[idx+3] = x/textureWidth;
                vertices[idx+4] = z/textureWidth;
                idx += 5;
            }
        }
    }

    public void createIndices() 
    {
        int idx = 0;
        short pitch = (short)(mapWidth + 1);
        short i1 = 0;
        short i2 = 1;
        short i3 = (short)(1 + pitch);
        short i4 = pitch;

        short row = 0;

        for(int z = 0; z < mapHeight; z++) 
        {
            for(int x = 0; x < mapWidth; x++) 
            {
                indices[idx++] = (short)(i1);
                indices[idx++] = (short)(i2);
                indices[idx++] = (short)(i3);

                indices[idx++] = (short)(i3);
                indices[idx++] = (short)(i4);
                indices[idx++] = (short)(i1);

                i1++;
                i2++;
                i3++;
                i4++;
            }

            row += pitch;
            i1 = row;
            i2 = (short)(row + 1);
            i3 = (short)(i2 + pitch);
            i4 = (short)(row + pitch);
        }
    }

    public String getHeightmapFile()
    {
        return heightmapFile;
    }

} 
```

为什么更大的块不起作用？createIndices()（在 LibGDX 代码中称为 buildIndices()）如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:37:54.170

解决方案在这里：[http ://badlogicgames.com/forum/viewtopic.php?f=11&t=4918#p23683](http://badlogicgames.com/forum/viewtopic.php?f=11&t=4918#p23683)

> Java short 只能保存值 [-32768 .. 32767] 地形网格使用的索引比这更多。256*256 太多了（大约 65k），所以你只能看到高度图的一小部分。

感谢 kalle_h 的解决方案。

# php - 正则表达式/php改变url格式

> ID：11701572
> 
> 赞同：0
> 
> 时间：2012-07-28T13:50:24.307
> 
> 标签：php, regex, preg-replace

我的任务是更新一个相当丑陋、过时的网站，该网站包含数百个城市的信息，所有这些城市都位于它们自己的子域中，例如：

> london.sitedomain.com

计划是摆脱所有这些子域并将站点正确设置为页面，格式如下：

> sitedomain.com/london

不幸的是，有一个大量的硬编码列表组成了一个下拉菜单，看起来像这样（但有数百个）：

```
<a href="http://sydney.sitedomain.com">Sydney</a>
<a href="http://auckland.sitedomain.com"> Auckland</a>
<a href="http://melbourne.sitedomain.com"> Melbourne</a>
<a href="http://perth.sitedomain.com"> Perth</a>
<a href="http://wellington.sitedomain.com"> Wellington</a> 
```

如果我将这个巨大的列表设置为 php 字符串，是否有一种体面的方法可以将每个子域子字符串批量更改为正确的格式，如上所述？或者你能想到更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:59:12.607

我认为您最好在 Notepad++ 或 Sublime Text 等程序中使用搜索和替换。两者都可以进行正则表达式搜索和替换文件夹（和子文件夹）。我不认为 PHP 将是一堆硬编码链接的最佳解决方案（它可以完成，但更容易和更可靠这边走。）

使用以下正则表达式：

```
search:  http://(.*?)\.sitedomain.com
replace: http://sitedomain.com/\1 
```

您*可以*在 PHP 中使用这些搜索和替换字段来执行此操作，但如果您只需要更改一堆 HTML 文件，那么我认为使用文本编辑器会好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:59:10.530

如果您的链接是动态的（即不是硬编码的），请更改它们分配给 HTML 模板的方式。以下应该有效：

```
$newurl = preg_replace("#(?:https?://)?(\w+)\.sitedomain\.com/(.*)#i", "sitedomain.com/$1/$2", $oldurl); 
```

如果您的链接是静态的，请使用任何高级文本编辑器（Notepad++、Gedit、TextMate 等）并选择`Search and Replace`. 上面的第一个参数`preg_replace`是 for`Search`字段，第二个参数是 for `Replace`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T13:54:19.240

您可以做的一件事是，分解并获取第一个字符串并将其附加到其余的字符串中，包括 /

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T14:19:01.957

我建议您使用 .htaccess 中的 reg exp 进入不同的路线并自动化该过程。这样你甚至不需要写那么大的清单

像这样的东西：

```
RewriteCond %{HTTP_HOST} ^((www\.)?[^.]+)\.sitedomain\.com.*$
RewriteRule (.*) http://sitedomain.com/%1 [L] 
```

这将获取 www（如果有），然后是子域并将子域附加到 url

# c++ - 为什么两个几乎相同的实现有很大的执行时间差异？

> ID：11701573
> 
> 赞同：0
> 
> 时间：2012-07-28T13:50:26.870
> 
> 标签：c++, c, performance, execution-time, knights-tour

我正在尝试使用[本网站上](http://www.geeksforgeeks.org/archives/12916)给出的回溯解决[骑士巡回赛问题](http://en.wikipedia.org/wiki/Knight%27s_tour)。

在 ideone上给出的实现 [大约需要 0.49 秒](http://ideone.com/qfsf3)。

```
int solveKTUtil(int x, int y, int movei, int sol[N][N], int xMove[N],
                int yMove[N])
{
   int k, next_x, next_y;
   if (movei == N*N)
       return true;

   /* Try all next moves from the current coordinate x, y */
   for (k = 0; k < 8; k++)
   {
       next_x = x + xMove[k];
       next_y = y + yMove[k];
       if (isSafe(next_x, next_y, sol))
       {
         sol[next_x][next_y] = movei;
         if (solveKTUtil(next_x, next_y, movei+1, sol, xMove, yMove) == true)
             return true;
         else
             sol[next_x][next_y] = -1;// backtracking
       }
   }

   return false;
} 
```

而我实现的几乎相同的一个是[在 ideone 上显示超出时间限制（超过 5 秒）](http://ideone.com/RP068)。

```
int generateMoves(int x, int y, int moveNum, int soln[][N], int xMoves[], int yMoves[])//making move number 'moveNum' from x and y.
{
        if(moveNum == N*N){
                return 1;
        }
        else{
                int i, nextX, nextY;
                for(i=0; i<8; ++i){
                        nextX = x + xMoves[i];
                        nextY = y + yMoves[i];

                        if(isSafe(nextX, nextY, soln)){
                                soln[nextX][nextY] = moveNum;
                                if( generateMoves(nextX, nextY, moveNum+1, soln, xMoves, yMoves) ){
                                        return 1;
                                }
                                else{
                                        soln[nextX][nextY] = -1;
                                }
                        }
                }
                return 0;
        }
} 
```

**什么在我的代码中执行了这么长时间？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T14:01:14.813

更改 xMoves/yMoves 似乎有效：[ideone](http://ideone.com/5ITjU)。它可能只是导致它更早找到解决方案的搜索顺序。

有太多可能的 63、62、61 等长度的旅行无法到达最后剩余的方格。在最坏的情况下，暴力搜索将不得不遍历所有这些。有效的算法很幸运，它尝试了一系列动作，并尽早找到了解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:30:42.830

您的帖子没有显示您的代码与原始代码之间的区别。
事实上，如果您仔细查看您的代码，您的代码和正确的代码之间的唯一区别是：

```
int xMoves[] = {  2, 1, -1, -2, -2, -1,  1,  2 };//{2, 2,  1,  1, -1, -1, -2, -2};  
int yMoves[] = {  1, 2,  2,  1, -1, -2, -2, -1 };//{1, -1, -2, 2, -2, 2, -1,  1}; 
```

顺序不同。你在一张纸上画出可能的动作，你会发现右边的顺序是逆时针的，而你的完全是无序的。
那一定是导致您的问题的原因。

# php - bcmath 有时返回浮点数，有时返回舍入结果

> ID：11701576
> 
> 赞同：1
> 
> 时间：2012-07-28T13:51:03.420
> 
> 标签：php, bcmath

我有一个变量`$newTime`，它是以秒为单位的时间`mktime()`，我想将它转换为天数。

在这种情况下，它结束了`86.400`（这是一天中的秒数），我尝试将它除以`86.400`得到天数（四舍五入）。

但有时我会得到：

```
Case 1: 87951 / 86400 = 1.0179513888 (1 day ago)
Case 2: 156257 / 86400 = 1.8085300925 (2 days ago) 
```

而有时：

```
Case 1: 87986 / 86400 = 1 (Should be 1 day ago)
Case 2: 156292 / 86400 = 1 (Should be 2 days ago) 
```

这是代码：

```
$newTime = round(bcdiv($newTime, bcmul("24", bcmul("60", "60"))),0); 
```

当我不使用 bcmath 时，只使用常规数学 ( `$newTime / (60*60*24)`)，我每次都会得到浮动结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T13:59:30.413

您是否使用 设置了比例`bcscale`？如果设置为`0`，它可以解释行为。请在计算之前尝试调用`bcscale(100)`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:56:34.387

你可以使用：

```
$newTime = round( $newTime / (60 * 60 * 24)); 
```

请完全没有bcmath。

例子：

```
$newTime = 156292;
$newTime = round( $newTime / (60 * 60 * 24));
echo $newTime; //2 Always

$newTime = 87986;
$newTime = round( $newTime / (60 * 60 * 24));
echo $newTime; //1 Always 
```

# html - JQuery mobile 从数据标签中获取信息

> ID：11701577
> 
> 赞同：0
> 
> 时间：2012-07-28T13:51:03.187
> 
> 标签：html, jquery-mobile

```
 echo <<<_END
           <pre>
           <a href="#home" data-rel="dialog" data-num="$row[1]" data-id="myid">$row[1]</a>
           </pre>
           _END;

            <script>
    var b = $('a#myid').data('num');
    document.write(b);
    </script> 
```

跟踪链接后，如何从标签中获取数据编号信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:53:50.480

`=`在属性的名称和值之间添加“ ”：

```
 <a href="#home" data-rel="dialog" data-num="$row[1]">$row[1]</a>
 //                                        ^---here it is 
```

然后像这样检索它：

```
$('a').data('num') 
```

# c# - 移位位。这段代码发生了什么？

> ID：11701587
> 
> 赞同：1
> 
> 时间：2012-07-28T13:52:50.113
> 
> 标签：c#, arrays, boolean, bit-manipulation, bit-shift

我已经很努力了，但我似乎无法理解这段代码中发生了什么。任何人都可以阐明一下吗？

```
public class BitArrary
{
    private Byte[] m_byteArray;
    private Int32 m_numBits;

    public BitArrary(Int32 numBits)
    {
        if (numBits <= 0)
            throw new ArgumentOutOfRangeException("Must be greater then 0");

        m_numBits = numBits;
        m_byteArray = new Byte[(numBits + 7) / 8];
    }

    public Boolean this[Int32 bitPos]
    {
        get
        {
            if ((bitPos < 0) || (bitPos >= m_numBits))
            {
                throw new ArgumentOutOfRangeException("bitPos");
            }
            else
            {
                return (m_byteArray[bitPos / 8] & (1 << (bitPos % 8))) != 0;
            }
        }
        set
        {
            if ((bitPos < 0) || (bitPos > m_numBits))
                throw new ArgumentOutOfRangeException("bitPos");
            if (value)
            {
                m_byteArray[bitPos / 8] = (Byte)(m_byteArray[bitPos / 8] | (1 << (bitPos % 8)));
            }
            else
            {
                m_byteArray[bitPos / 8] = (Byte)(m_byteArray[bitPos / 8] & ~(1 << (bitPos % 8)));
            }
        }
    }

} 
```

我没有得到对位进行操作的部分（三行）。据我所知，在第一个中，它`ANDing`是位数组的值，以查找该位是否打开。在第二个中，它`ORing`，在第三个`ANDing`中`NOT`，我认为这三行中发生的事情是正确的吗？

这是在做什么，真正伤害我的大脑的是什么`1 << (bitPos % 8)`？以及它`ANDing`的作用是什么`ORing`？我所知道的是，您可以左右拉屎某物的价值（或其他，我对此不是很清楚。）那么这是做什么的呢？是转移还是什么？`ANDing``NOT``1`

谁能解释一下？

**编辑：编辑完整代码...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:02:41.303

好的看起来是一个包含字节（m_byteArray）的私有字段，它从字节数组中获取一点（我假设字节数组是连续的，这试图从某个位置获取位 - 例如假设有 3字节，位置 13 将从字节 2 获得位 5)

编辑：更好地总结

图像我们在字节数组中有 3 个字节

```
00101011 00101010 01000010 
```

如果我们想要第 13 位，我们会将“12”传递给索引器**重要的是要记住！！**

```
00101011 00101010 01000010
-------------^
(Remember it's 0 based) 
```

我们去

```
m_byteArray[12 / 8] (12 / 8 = 1 so we know we want byte number two at index 1 - byte array is also zero based!) 
```

所以我们有第二个字节（在索引 1 处）

```
00101010
----^ 
```

现在我们去

```
00101010 & (1 << (12 % 8)) 
```

这相当于

```
00101010 & 00000001 << 4 
```

哪个是

```
00101010 & 00001000 
```

所以这掩盖了

```
1 & 1 
```

返回 1 :)

对于最终成为

```
1 & 0 
```

逻辑上返回 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:03:10.627

该行：

```
return (m_byteArray[bitPos / 8] & (1 << (bitPos % 8))) != 0; 
```

返回是否设置了字节数组中的第 n 位。

`bitPos / 8`

找到索引位所在的字节，并且

```
1 << (bitPos % 8)) 
```

为相关字节创建一个位掩码。

例如，如果要查找第 10 位是否已设置，则为`bitPos`9. `bitPos / 8`= 1，因此相关位位于数组中的第二个字节中。 `bitPos % 8`= 1，因此表达式 (1 << (bitPos % 8)) 创建了`00000010`. 如果设置了第二个位，则应用此掩码`byteArray[1]`将返回 1，否则返回 0。

设置器的逻辑是相似的，除了

```
m_byteArray[bitPos / 8] | (1 << (bitPos % 8)) 
```

将在相关位置设置位，而

```
(m_byteArray[bitPos / 8] & ~(1 << (bitPos % 8)) 
```

将清除它。

# xquery - xquery-如何选择文本occ。在第 n 次出现分隔符之后/如何提取前 n 个句子/最后 n 个句子

> ID：11701588
> 
> 赞同：1
> 
> 时间：2012-07-28T13:52:49.740
> 
> 标签：xquery

在网页中，有一个包含以下内容的 div——

```
<div id="test">
    <p> This is first sentence. This is second sentence. This is third sentence. This is 4th sentence. </p>
</div> 
```

现在，如何从上面的 HTML 片段中获取文本“This is second sentence”？我了解如何到达该文本所在的 div/p，但如何仅提取该特定句子？

同样，我如何提取前 3 个句子？还有，我如何选择最后两句话？最后，您的 Xquery 表达式应该适用于任何类型的分隔符，例如“.”。/ "," / ";" ETC...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:27:06.527

## 在点分割

用于[`fn:tokenize`](http://www.xqueryfunctions.com/xq/fn_tokenize.html)解构字符串。

```
fn:tokenize(//p, "[\.,;]")[2] 
```

该模式可以是任何有效的正则表达式，您可以很容易地适应您的需要。注意正则表达式特殊字符。

对于前三个句子，使用`fn:position`：

```
tokenize(//p, "[\.,;]")[position() le 3] 
```

对于更一般的分析，您可以使用范围表达式：

```
tokenize(//p, "[\.,;]")[position() = (2 to 3)] 
```

## 更好的句子识别

并非所有点都结束句子。为了更好的句子检测（虽然仍然不是在所有情况下都保存），你可以做一些 regex-foo：

```
tokenize(//p, '(?<=[\.,;])\s+(?=\p{Lu})')[2] 
```

这将拆分所有空格字符（或多个字符，如果它们彼此跟随），其前面是上面列表中的一个字符，后面是一个大写字母。

***注意事项**： Lookahead and -behind 不包括在 XQuery 标准中，因此每个实现都支持。即使支持它也可能不安全，因为这违反了标准并且可能会被删除。我为此使用了 BaseX 7.1.1。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T21:34:25.627

> 现在，如何从上面的 HTML 片段中获取文本“This is second sentence”？

```
tokenize(/div/p, '\\.')[2] 
```

> 同样，我如何提取前 3 个句子？

```
tokenize(/div/p, '\\.')[position() le 3] 
```

> 还有，我如何选择最后两句话？

```
tokenize(/div/p, '\\.')[position() gt last() -2] 
```

> 最后，您的 Xquery 表达式应该适用于任何类型的分隔符，例如“.”。/ "," / ";" ETC...

`tokenize()`用作字符串的第二个参数，例如：`'[.,;]'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T09:16:36.163

如何将正则表达式与 fn:replace 和捕获组一起使用？

它的优点是通过使用正则表达式而不是手动标记字符串 =D 让你感觉更糟糕

```
let $s := 'This is first sentence. This is second sentence. This is third sentence. This is 4th sentence.'

let $adjust-this-regex-as-needed := '([\w\s]+)\.([\w\s]+)\.([\w\s]+)\.([\w\s]+)\.'
return (
    fn:replace($s, $adjust-this-regex-as-needed , '$1'),     (: first sentence :)
    fn:replace($s, $adjust-this-regex-as-needed , '$2  $3')  (: last two sentences :)
) 
```

([\w\s]+)\. --> 表示匹配所有字母和空格直到一个句点

# actionscript-3 - Flex selecteditem 获取下一项

> ID：11701589
> 
> 赞同：0
> 
> 时间：2012-07-28T13:53:10.813
> 
> 标签：actionscript-3, apache-flex, flex4.5

所以我使用从 xml 中获取的列表来加载 mp3 文件，您可以通过单击它来启动 mp3 文件。然后我像这样点击该项目：

```
var mp3Url:String = trackListList.selectedItem.@url; 
```

我对 flex 还是很陌生，我想知道是否有办法根据这个来选择下一个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:30:32.967

一个简单的方法是这样的：

```
var selIndex:int=trackList.dataProvider.getItemIndex(trackListList.selectedItem);
if(selIndex != -1) {
    selIndex++;
    nextMP3:String=trackList.dataProvider.getItemAt(selIndex).@url;
} 
```

**编辑**

```
var selIndex:int=trackList.selectedIndex;
if(selIndex != -1) {
    selIndex++;
    nextMP3:String=trackList.dataProvider.getItemAt(selIndex).@url;
} 
```

`selIndex`是在数据提供者中选择的项目的索引。-1 表示未选择任何内容

# sql - 仅协调 RoR 3 中的用户地理位置

> ID：11701590
> 
> 赞同：0
> 
> 时间：2012-07-28T13:53:11.767
> 
> 标签：sql, ruby-on-rails, geolocation

我正在寻找一种解决方案来构建非常简单的基于地理位置的应用程序。它应该保持当前用户位置，并选择特定坐标附近的用户。所以我不需要基于foursquare或google map api的解决方案，我需要更简单的东西。

现在我有模型用户，它有 :lat 和 :long 字段，查询如下：

```
"SELECT lat, long FROM users WHERE long < :lolow AND long > :lohigh AND lat < :lalow AND long > :lahigh" 
```

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:03:04.633

这对我来说似乎并不优雅。也许你觉得这更美观：

```
SELECT lat, long
FROM users
WHERE long not between :lolow AND :lohigh AND
      lat not between  :lalow AND :lahigh 
```

“不在之间”是几乎从未在 SQL 中使用过的东西之一，但它是可以使用的。你也可以说“不（长在 :lolow 和 :lohigh 之间）”

实际上，我怀疑您的意思根本不是介于两者之间，而是真正的意思是“介于”之间：

```
SELECT lat, long
FROM users
WHERE long between :lolow AND :lohigh AND
      lat between  :lalow AND :lahigh 
```

当“低”值在数值上小于“高”值时，您的原始查询将不返回任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:22:07.943

我找到了一个很好的解决方案。我使用位置 => 类型：点。和 SQL 代码：

```
def self.next_to_me(coordinates, distance)
where( "circle :which @> location AND updated_at > :time",
                                                   :which => "<(#{coordinates}),#{distance}>",
                                                   :time => 20.minutes.ago ).limit(100)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:20:30.983

根据您使用的数据库引擎 - 我使用 MySQL。你应该看看“空间”字段类型。您可以将经纬度存储为一个点，然后查询它是否属于多边形。例如，我有一个 5000 点的多边形，我查询它以查看是否有任何点落在其中。

# ruby-on-rails - 来自数据库的 Rails 用户列表

> ID：11701594
> 
> 赞同：4
> 
> 时间：2012-07-28T13:54:02.680
> 
> 标签：ruby-on-rails

我在 ruby​​.railstutorial.org 上关注 mhartl 的教程，但我遇到了 users_controller 的索引功能的问题。在控制台中，我可以输入以下代码：

```
@users = User.all 
```

它可以正确访问 SQL 数据库并显示所有用户的列表。但是，当我尝试加载页面时，我会收到各种错误，具体取决于我在索引文件中使用列表的方式，但所有错误都涉及列表为零。例如，如果我的索引页面包含以下内容：

```
<% @users.each do |user| %>
    <li>
        <%= link_to user.name, user %>
    </li>
<% end %> 
```

服务器吐槽：

```
undefined method `each' for nil:NilClass 
```

像这样的东西`render @users`给了我错误`'nil' is not an ActiveModel-compatible object that returns a valid partial path.`

如果它在控制台中工作，我真的很困惑为什么我会收到这个错误。如果您需要我提供的其他代码，请告诉我。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T14:23:12.113

所有这些错误消息都表明 @user 在您的视图中为零。假设视图是views/users/index.html.erb，你*有没有*像这样在你的users_controller 索引操作中初始化@users？

```
def index
  @users = User.all
end 
```

# javascript - 谷歌浏览器元素仍然存在 :hover 即使从光标移开

> ID：11701599
> 
> 赞同：3
> 
> 时间：2012-07-28T13:54:27.917
> 
> 标签：javascript, css, hover, chromium

你可以在这个小提琴中自己尝试。当您将光标移动到绿色方块时，它会将颜色变为红色。尝试单击，但不要移动鼠标指针。广场飞走了，但仍然是红色。

[http://jsfiddle.net/Rq6Vt/](http://jsfiddle.net/Rq6Vt/)

任何想法，我能用这个做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T13:57:42.373

在某些浏览器中，`:hover`只有在鼠标移动时才会重新计算，以提高效率。

不幸的是，您对此无能为力，只能自己动手并在鼠标进入时使用 JavaScript 更改框的颜色。

# javascript - 在新选项卡中打开链接 - 让 JQuery 在同一个 div 中加载内容

> ID：11701601
> 
> 赞同：0
> 
> 时间：2012-07-28T13:54:41.173
> 
> 标签：javascript, jquery, html, hyperlink

我有这段代码，它将我的内容加载到同一个 div 中，当我单击菜单时淡入和淡出不同的部分。但我不能使用任何指向另一个网站的链接。当我单击我创建的那种链接时，它会清除其内容的 div 并且不会打开链接。

有什么解决办法吗？我也尝试添加一个目标属性，它不起作用。

这里是 JQuery 和 HTML 部分。

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
  document.documentElement.className += " js";   
  $(function(){
    var $containers = $("#animators > div").hide();
    $containers.eq(0).show();

    $('a').each(function(i,el){
      var idx = i;
      $(this).click(function(e){
        var $target = $containers.filter(':eq(' + idx + ')');
        if($containers.filter(':visible').not($target).length){
          $containers.filter(':visible').fadeOut(400, function(){
            $target.not(':visible').fadeIn(400);
          });
        } else {
          $target.not(':visible').fadeIn(400);
        }

        e.preventDefault();
      })
    })
  });
</script>

<div id="animators">
    <div class="container">
    <p><a class="content" href="http://www.google.com" title="Google>Google</a></p>
Text and content here #1
    </div>
    <div class="container">
Text and content here #2
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:44:06.730

您`e.preventDefault();`在 CLICK 事件处理程序中有这意味着它可以防止`<a>`标签的默认行为 - 打开链接。如果您出于某种原因需要此预防措施，请使用`document.location = link`或`window.open()`功能打开新标签。

# binary-search-tree - 字符串的有序二叉树

> ID：11701602
> 
> 赞同：1
> 
> 时间：2012-07-28T13:54:42.493
> 
> 标签：binary-search-tree

这些值被输入到有序二叉树中：`Mercury`、`Venus`、`Earth`、`Mars`、`Jupiter`和。`Saturn``Uranus`

生成的二叉树应该是这样的。

```
 Mercury
        /         \
    Earth         Venus
       \           /
      Jupiter   Saturn
         \        \
        Mars     Uranus 
```

这个命令有什么理由吗？木星不应该在金星分支下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:08:14.120

通过“有序二叉树”，我假设您的意思是二叉搜索树。只要树满足以下条件：

```
1\. The key in a node is greater than (or equal to) any key stored in its left subtree.
2\. The key in a node is less than (or equal to) any key stored in its right subtree. 
```

那么树的确切结构取决于添加键的顺序和用于构造树的确切算法。

但是，您表示您认为木星应该出现在金星的子树中。您的订购标准是什么？如果按字母顺序比较名称，则显示的树是有效的。

# extjs4 - Ext JS 4 TreePanel - 根显示为双

> ID：11701604
> 
> 赞同：1
> 
> 时间：2012-07-28T13:55:01.830
> 
> 标签：extjs4, extjs4.1, treepanel

我的树网格的根显示为双倍。[如屏幕截图所示] 在这种情况下，**DRIVE**将是我的根，我希望它可见。

如果有人可以帮助我，我会很高兴。

提前致谢..

![在此处输入图像描述](../Images/484f89c9cfb1b531861677b68772db75.png)

* * *

**这是我的树视图定义：**

```
Ext.define(appName + '.view.document.FolderTree', {    
    extend        : 'Ext.tree.Panel',
    alias        : 'widget.foldertree',
    requires: [
        'Ext.grid.plugin.CellEditing',
        'Ext.tree.plugin.TreeViewDragDrop',
        'Ext.grid.column.Action'
    ],
    title       : 'Folders',
    iconCls     : 'icon-folder',
    store       : 'FoldersTreeStore',
    rootVisible : false,
    folderSort  : true,
    animate        : true,
    autoScroll    : true,
    hideHeaders : true,
    viewConfig: {
        plugins: {
            ptype: 'treeviewdragdrop',
            dragText: 'Drag to reorder',
            ddGroup: 'task'
        }
    },
    initComponent: function() {
        var me = this;

        me.plugins = [me.cellEditingPlugin = Ext.create('Ext.grid.plugin.CellEditing')];

        me.columns = [
            {
                xtype: 'treecolumn',
                dataIndex: 'folderName',
                flex: 1,
                editor: {
                    xtype: 'textfield',
                    selectOnFocus: true,
                    validator: function(value){
                        value = Ext.String.trim(value);
                        return value.length < 1 ? this.blankText : true;
                    }
                }
            },
            {
                xtype: 'actioncolumn',
                width: 24,
//                icon: 'resources/images/cross-script.png',
//                iconCls: 'x-hidden',
                iconCls: 'icon-close',
                tooltip: 'Delete'
            }
        ];

        this.btnCreateFolder = Ext.create('Ext.button.Button', {
            iconCls    : 'icon-new-folder',
            tooltip    : '<b>Create new folder</b>',
            action    : 'create-folder'
        });

        this.btnDeleteFolder = Ext.create('Ext.button.Button', {
            iconCls    : 'icon-delete-folder',
            tooltip    : '<b>Delete folder</b>',
            action    : 'delete-folder',
            disabled: true
        });

        this.dockedItems = [{
            xtype    : 'toolbar',
            dock     : 'bottom',
            items    : [ me.btnCreateFolder, '-', me.btnDeleteFolder ]
        }];

        me.callParent(arguments);
    }
}); 
```

**树店：**

```
Ext.define(appName + '.store.FoldersTreeStore', {    
    extend        : 'Ext.data.TreeStore',
    model        : appName + '.model.Folder',
    autoLoad    : false,
    autoSync    : false,
    proxy        : {
        type    : 'ajax',
        api        : {
            read    : 'folder/load.ajax',
            create    : 'folder/saveOrUpdate.ajax',
            update    : 'folder/saveOrUpdate.ajax',
            destroy    : 'folder/delete.ajax'
        },
        reader    : {
            type    : 'json',
            root    : 'data',
            successProperty : 'success',
            totalProperty    : 'totalCount'
        },
        writer    : {
            type    : 'json',
            writeAllFields : true,
            encode    : true,
            root    : 'data'
        },
        listeners: {
            exception: function(proxy, response, operation){
                Ext.MessageBox.show({
                    title: 'REMOTE EXCEPTION',
                    msg: operation.getError(),
                    icon: Ext.MessageBox.ERROR,
                    buttons: Ext.Msg.OK
                });
            }
        }
    },
    sorters: [
        {
            property : 'order',
            direction: 'ASC'
        }
    ]
}); 
```

**我从服务器获得的数据：**

```
{    "data": {
        "leaf": false,
        "folderId": 1,
        "order": 1,
        "expanded": true,
        "iconCls": "icon-drive",
        "folderName": "DRIVE",
        "data": [{
            "folderId": 2,
            "folderName": "ggg",
            "order": 2,
            "leaf": true,
            "iconCls": "icon-folder"
        }]
    },
    "success": true,
    "totalCount": 1
} 
```

# ruby - 解析链接数组并使用 Ruby 下载它们

> ID：11701606
> 
> 赞同：1
> 
> 时间：2012-07-28T13:55:09.870
> 
> 标签：ruby, mechanize

> **可能重复：**
> [如何使用 Ruby 通过 HTTP 下载二进制文件？](https://stackoverflow.com/questions/2263540/how-do-i-download-a-binary-file-over-http-using-ruby)

我有一个名为的数组，`pdf_links`其中包含 Mechanize gem 收集的 PDF 文件的链接。

```
http://site/file1.pdf
http://site/file2.pdf
http://site/file3.pdf
http://site/file4.pdf
http://site/file5.pdf
http://site/file6.pdf
http://site/file7.pdf

```

我需要将所有 PDF 文件保存到我的目录中。

用 Ruby 做这件事的最好方法是什么？

我尝试使用 *nix 字符串执行此操作，但收到错误消息：

```
pdf_links.each 做 |d|
    系统 %x{ wget #{d} }
结尾

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:12:21.773

mechanize中有一个save方法来存储它

[使用 FileUtils 将 WWW::Mechanize::File 保存到磁盘](https://stackoverflow.com/questions/1898257/save-wwwmechanizefile-to-disk-using-fileutils)

[http://mechanize.rubyforge.org/Mechanize/File.html#method-i-save](http://mechanize.rubyforge.org/Mechanize/File.html#method-i-save)

或者你可以使用 ruby​​ lib 'open-uri'

```
 require 'open-uri'
 pdf_links.each do |link|
  File.open(file_path_to_store, 'wb') {|f| f.write(open(link).read)}
 end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T14:06:25.333

机械化可以做到：

```
agent.get(d).save 
```

# objective-c - 尝试使用 set 和 segue 来设置属性

> ID：11701607
> 
> 赞同：0
> 
> 时间：2012-07-28T13:55:13.157
> 
> 标签：objective-c, ios, storyboard

我正在尝试在我的类 IDViewController 中设置 bigImage、cadImage 和数字。但是当我使用下面的代码时，这些永远不会设置。显然，这些属性是正确合成的，并且在我的故事板上的一个场景中。我在这里错过了什么吗？

视图控制器.m

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"leftMainSegue"])
    {
        IDViewController *vc = [segue destinationViewController];

        [vc.bigImage setImage:[UIImage imageNamed:@"1.png"]];
        [vc.number setText:@"01"];

    }
} 
```

IDViewController.h

```
@interface IDViewController : UIViewController
{
    UIImageView *bigImage;
    UIImageView *cadImage;
    UILabel *number;

}
@property (nonatomic) UIImageView *bigImage;
@property (nonatomic) UIImageView *cadImage;
@property (nonatomic) UILabel *number;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:04:00.077

即使`IDViewController`在调用时已初始化`prepareForSegue:`，它也可能尚未加载其视图，因此也没有加载您尝试更新的子视图。

您最好将图像和文本设置为控制器直接拥有的属性，然后将它们设置为`viewDidLoad:`.

像......（警告！编译器未检查！）

在 IDViewController.h 中：

```
@property (nonatomic, strong) UIImage *inputImage;
@property (nonatomic, strong) NSString *inputString; 
```

在 IDViewController.m 中：

```
@synthesize inputImage = _inputImage;
@synthesize inputString = _inputString;
...
- (void)viewDidLoad {
...
    self.bigImage.image = self.inputImage;
    self.number.text = self.inputString;
...
} 
```

在 ViewController.m 中：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
...
    vc.inputImage = [UIImage imageNamed:@"1.png"];
    vc.inputString = @"01";
...
} 
```

# google-app-engine - Google App Engine 流量拆分似乎没有生效

> ID：11701612
> 
> 赞同：0
> 
> 时间：2012-07-28T13:56:16.003
> 
> 标签：google-app-engine

我正在尝试在 Google App Engine 上使用流量拆分，但它似乎没有生效。我已经尝试过 IP 地址拆分和 cookie 拆分，并且我已将非默认版本的流量设置为 99.9%，但我仍然看到所有流量都流向了我的应用程序的默认版本。

谁能建议我在这里可能做错了什么？

一些可能有帮助的事情：

*   我希望流量拆分立即生效。生效前是否有数小时/数天的延迟？

*   我在尚未迁移到高复制数据存储的应用程序上使用它。这可能是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T00:40:41.700

看起来这是一个影响具有自定义域的应用程序的错误。

[http://code.google.com/p/googleappengine/issues/detail?id=7813](http://code.google.com/p/googleappengine/issues/detail?id=7813)

# java - 在java中复制文件

> ID：11701614
> 
> 赞同：-3
> 
> 时间：2012-07-28T13:56:41.783
> 
> 标签：java, file-io, copy

我有一个 XML 文件，如下所示

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<CATALOG>
    <food>
        <name>Strawberry Belgian Waffles</name>
        <price>$7.95</price>
        <description>light Belgian waffles covered with strawberries and
            whipped cream
        </description>
        <calories>900</calories>
    </food>
</CATALOG> 
```

我需要使用`java`编程将此文件复制到另一个文件。以下是我复制文件的java代码

```
 try {
        File f1 = new File("source.xml");
        File f2 = new File("destination.xml");
        InputStream in = new FileInputStream(f1);
        OutputStream out = new FileOutputStream(f2);

        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        in.close();
        out.close();
        System.out.println("File copied.");
    } catch (FileNotFoundException ex) {
        System.out
                .println(ex.getMessage() + " in the specified directory.");
        System.exit(0);
    } catch (IOException e7) {
        System.out.println(e7.getMessage());
    } 
```

这段代码确实复制了文件，但问题在于将源文件的所有内容都复制到了一行中，我需要保持源文件的原始结构。任何人有更好的想法来复制文件并保持其原始结构？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:05:06.333

尝试使用**BufferedReader使用****readLine()**函数逐行读取。然后使用 BufferedWriter 写入该行，然后使用其**newLine()**函数附加一个换行符。

这应该够了吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:58:32.807

Java 有一个名为[NIO](http://docs.oracle.com/javase/tutorial/essential/io/copy.html)的新包，它将为您简化很多事情。还有[Apache Commons IO](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyFile%28java.io.File,%20java.io.File%29)。出于性能问题和更简单的代码，我建议您切换到其中任何一个。

例子：

```
import java.io.File;
import java.nio.file.Path;
...
String orig ="file.xml";
String dest = "file.xml.bak";
File f = new File (orig);
Path p = f.toPath();
p.copyTo(new File (dest).toPath(), REPLACE_EXISTING, COPY_ATTRIBUTES); 
```

或者

```
import java.file.io;
import org.apache.commons.io.FileUtils;
....
String orig ="file.xml";
String dest = "file.xml.bak";
File fOrig = new File(orig);
File fDest = new File(dest);
FileUtils.copyFile(fOrig, fDest); 
```

# java - 如何在 Windows 上远程调试 tomcat 7.0？

> ID：11701616
> 
> 赞同：1
> 
> 时间：2012-07-28T13:56:55.227
> 
> 标签：java, debugging, tomcat

没有 catalina.bat 所以我不能通过调试器端口。也很难在 apache 网站上找到帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-06T06:27:30.737

*您可以使用JvmOptions*参数传递 JVM 选项：

```
tomcat.exe //TS// ++JvmOptions -Xdebug;-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=1044 
```

或者

```
tomcat.exe //RS// ++JvmOptions -Xdebug;-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=1044 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:14:45.957

我不确定这是否完全解决了您的问题，但是[Apache Tomcat Windows Service HOWTO](http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html)解释了如何使用 Tomcat7.exe 和 Tomcat7w.exe，以及命令行参数是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:34:51.493

你试过在tomcat监控托盘工具中设置参数吗？有一个带有“Java”和“启动”选项卡的配置对话框，可以将参数传递给服务。

# ios - Xcode iOS：如何与其他控制器通信？

> ID：11701617
> 
> 赞同：0
> 
> 时间：2012-07-28T13:57:02.827
> 
> 标签：ios, xcode, ipad, events, communication

我有以下问题，需要一个模式来解决它：

为了简单起见，我有两个视图，MasterViewController 和 PreferencesController，最后一个是第一个的弹出窗口。PrefController 已将一些方法委托给 MasterController。

但是现在我想从 PreferencesController 中捕获一个 Popover-Event 并通知 MasterController。

最好的方法是什么？我现在也不想在另一个方向使用代表，这似乎是一个很好的解决方案。我考虑过为此创建一个事件，但您可能对这种情况有更好的建议/解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:17:37.613

您可以查看[NSNotificationCenter 参考指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)，也许这可以完成这项工作？它非常适合控制器之间的通信，最好的是它们不必相互了解。否则，您可能必须声明用于在控制器之间传递数据的协议。

# macos - PyQt4：为什么我得到“ImportError：没有名为 QtWebkit 的模块”？

> ID：11701619
> 
> 赞同：1
> 
> 时间：2012-07-28T13:57:22.410
> 
> 标签：macos, python-3.x, pyqt4

我已经在 Mac OSX 10.7.5 上为 Python 3.2.3 安装了 Qt 2.4.1、SIP 4.13.3 和 PyQt4 4.9.4。

当我尝试时`from PyQt4.QtWebkit import QWebPage`，我得到：`ImportError: No module named QtWebkit`。

但其他模块工作正常，例如`from PyQt4 import QtGui`.

我不知道为什么。我错过了哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:34:55.177

检查系统中安装的 webkit，以查找路径

```
>>> import PyQt4
>>> print PyQt4.__path__
['/usr/lib/python2.7/dist-packages/PyQt4'] 
```

检查你那里有 QtWebkit。并[检查这个](https://stackoverflow.com/questions/2922711/importerror-no-module-named-qtwebkit)

# python - 将while循环转换为函数

> ID：11701622
> 
> 赞同：-3
> 
> 时间：2012-07-28T13:57:31.737
> 
> 标签：python, python-2.7

如何将此 while 循环转换为函数，以便可以多次调用它。

```
i = 0
numbers = []
while i < 6:
    print "At the top of i is %d" % i
    numbers.append(i)

    i = i + 1
    print "Numbers now: ", numbers
    print "At the bottom i is %d" % i

print "The numbers: "

for num in numbers:
    print num 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:03:02.667

```
def fun_name():
    i = 0
    numbers = []
    while i < 6:
        print "At the top of i is %d" % i
        numbers.append(i)
        i = i + 1
    print "Numbers now: ", numbers
    print "At the bottom i is %d" % i

    print "The numbers: "

    for num in numbers:
        print num 
```

您可以添加、删除您需要的部分代码。您还可以返回一些值以在主程序中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:07:03.430

```
def get_numbers(N):
  numbers = []
  while i < N:
    print "At the top of i is %d" % i
    numbers.append(i)
  print "Numbers now: ", numbers
  print "At the bottom i is %d" % i 
```

但是在 python 中已经有这样的函数了，这个函数是`range`.

# xampp - 找不到本地主机 (xampp)

> ID：11701624
> 
> 赞同：14
> 
> 时间：2012-07-28T13:57:40.437
> 
> 标签：xampp, localhost

在全新安装 Windows 7 和 Xampp 时，我无法访问`localhost`. 它只是说没有找到，即使 Apache 和 MySQL 运行良好。到目前为止我尝试了什么：

*   检查`hosts`此行的文件：`127.0.0.1 localhost`
*   检查 Skype（完全删除它）。
*   检查其他任何可能导致问题的东西，例如 Skype
*   关闭病毒扫描程序和防火墙

我在这里迷路了，有人知道问题可能是什么吗？

**[编辑]**

我解决了这个问题。出于某种原因，Apache 使用的是 port`85`而不是`80`. 我从 Apache 更改`Listen 85`为`Listen 80`在配置文件中。现在一切都很好。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-10-02T12:23:36.383

我面临同样的问题。打开具有特定端口号的 localhost 可以解决问题。就我而言，我已将侦听端口从默认的 80 更改为 8081。因此浏览[http://localhost:8081](http://localhost:8081)对我来说效果很好。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-23T18:51:56.917

我找到了解决这个问题的方法。通常因为 Skype 和 VMware 等应用程序，我们将 Apache 的侦听端口从 80 更改为 81 或其他。

然后在启动 apache 后，进入网络浏览器并输入 localhost:XX

eg：如果端口是81，输入

本地主机:81

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-26T14:49:24.557

> 可能的原因：一个程序正在使用端口 80 运行！

*在另一个端口下运行 XAMPP (=> Apache)：*

**将文件中所有*80*的端口**重命名**为**8080**`httpd.conf`。**

 ***您使用的 Windows：*使用 notpad 或编辑器`Ctrl+H`替换“80”。

> 好吧，您现在将其更正为端口 85。;-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-16T16:10:47.040

when you run Xampp, check the apache port no. ex: if it is displaying port 80, then type [http://localhost:80/phpmyadmin/](http://localhost:80/phpmyadmin/)**

# javascript - 遍历对象数组

> ID：11701628
> 
> 赞同：4
> 
> 时间：2012-07-28T13:57:58.223
> 
> 标签：javascript, jquery

我有一个这样的 JSON 字符串

```
 var json =  '{ "Comments": 
    [
      { "Id" : 1,"Comment" : "Test comment","Name" : "Yogesh","Child" : 0},
      { "Id" : 2,"Comment" : "Test comment II","Name" : "Yogesh","Child" : 0}
    ] 
    }'; 
```

我正在尝试像这样迭代对象：

```
var parsedJSON = $.parseJSON(json);

var html = "";    
for (comment in parsedJSON.Comments) {
  html += "Id: " + comment.Id;
  html += "Comment: " + comment.Comment;
  html += "Name: " + comment.Name;
  html += "Child: " + comment.Child;
  html += "<br/>";
} 
```

但是`comment`在 for 循环中，我的意思不是一个对象，`0`而`1`只是一个字符串，我如何迭代这个数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T14:03:04.413

```
var json = '{ "Comments": [{ "Id" : 1,"Comment" : "Test comment","Name" : "Yogesh","Child" : 0},{ "Id" : 2,"Comment" : "Test comment II","Name" : "Yogesh","Child" : 0}] }';

var parsedJSON = $.parseJSON(json), // jsonData should json
    html = "",
    comments =parsedJSON.Comments; // keeping reference of parsedJSON and its an Array

// Here key will give 0, 1 etc ie. index of array

for (var key in comments) {
    html += "Id: " + comments[key].Id;
    html += "Comment: " + comments[key].Comment;
    html += "Name: " + comments[key].Name;
    html += "Child: " + comments[key].Child;
    html += "<br/>";
} 
```

**[演示](http://jsfiddle.net/Jrg2k/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T14:03:13.603

您似乎误解了`for..in`循环的工作原理。`comment`将迭代地成为数组的键。在任何情况下，您都不应该`for..in`在数组上使用，只能在对象上使用——即使这样也要小心。

```
var l = parsedJSON.Comments.length, i, comment;
for( i=0; i<l; i++) {
    comment = parseJSON.Comments[i];
    // do stuff with comment
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:06:26.830

你可以试试这个：

```
 var JsonData =  { "Comments":
        [
          { "Id" : 1,"Comment" : "Test comment","Name" : "Yogesh","Child" : 0},
          { "Id" : 2,"Comment" : "Test comment II","Name" : "Yogesh","Child" : 0}
        ]
        };

    var html = "";    
    for (var i = 0; i < JsonData.Comments.length; i++) {
      comment = JsonData.Comments[i];
      html += "Id: " + comment.Id;
      html += " Comment: " + comment.Comment;
      html += " Name: " + comment.Name;
      html += " Child: " + comment.Child;
      html += "<br/>";
    }

alert(html); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T14:07:59.760

您可以使用`$.each`：

```
var html = ""; 
$.each(parsedJSON.Comments, function(i, comment) {
   html += "Id: " + comment.Id;
   html += "Comment: " + comment.Comment;
   html += "Name: " + comment.Name;
   html += "Child: " + comment.Child;
   html += "<br/>";
} 
```

或者，您可以使用`$.map`：

```
var html = $.map(parsedJSON.Comments, function(comment, i) {
   return "Id: " + comment.Id +
          "Comment: " + comment.Comment +
          "Name: " + comment.Name +
          "Child: " + comment.Child + 
          "<br/>";
}).join(''); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T14:08:38.063

Comments 包含一个包含两个元素的数组。

```
{ "Comments" : [ { 1 }, { 2 }]  ... 
```

所以你可以访问它

```
for (var i = 0, len = parsedJSON.Comments.length; i < len; i++) {
    html += "Id: " + parsedJSON.Comments[i].Id;
    html += "Comment: " + parsedJSON.Comments[i].Comment;
    html += "Name: " + parsedJSON.Comments[i].Name;
    html += "Child: " + parsedJSON.Comments[i].Child;
    html += "<br/>";
} 
```

# jquery-ui - Eric Martin 的 SimpleModal 在关闭模式后会破坏 jquery ui 选项卡

> ID：11701631
> 
> 赞同：0
> 
> 时间：2012-07-28T13:58:23.177
> 
> 标签：jquery-ui, jquery-ui-tabs, simplemodal

我在这个项目中使用[了 simpleModal和 jquery-ui 选项卡。](http://www.ericmmartin.com/projects/simplemodal/)我在表单上有一个名为“Filter”的链接，它将调用 FilterModal() 来显示模式。

```
function FilterModal() {
   $('#divFilterModal').modal();
} 
```

div #divFilterModal 在 _Filter.cshtml 中。

```
<div">@Html.Partial(MVC.Sample._Filter)</div> 
```

在**_Filter.cshtml**内，我有两个链接按钮，一个是**“运行”**，它将从选定的选项中执行过滤器，然后发回结果并关闭模式，第二个是**“取消”**，它将关闭弹出窗口。我也在这个控件上使用了 jquery ui 选项卡。

```
 $(document).ready(function () {
    $('#FilterModalTabs').tabs();
 }); 
```

因此，当我单击过滤器链接时，会弹出模式并且选项卡运行良好。如果我单击“运行”按钮，一切都很好。但是当我单击“取消”按钮时，当我再次打开模式时，选项卡正在分解。每次我单击另一个选项卡时，前一个选项卡都不会取消选择/取消焦点，从而打开更多选项卡。

我检查 jquery ui 脚本是否在模式关闭时被删除，但它仍然存在。对此有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:24:01.603

这个我已经解决了。诀窍是您应该在 onShow 中初始化选项卡。这是代码。

```
$('#divFilterModal').modal({
    onShow: function (dialog) {
        $('#FilterModalTabs').tabs();
    },
    onClose: function (diag) {
        $.modal.close();
    }
}); 
```

谢谢

# delphi - 过滤多列列表视图

> ID：11701634
> 
> 赞同：0
> 
> 时间：2012-07-28T13:58:37.920
> 
> 标签：delphi, listview, filter

以下代码将`TListView`根据在控件中键入的内容过滤控件的项目，`TEdit`如果 ListView 由单列组成，它可以正常工作，但是如果您有超过 1 列，那么其他列中的项目是在应用过滤器时被销毁，所以我希望有人可能知道在过滤 ListView 时需要将什么添加到下面的代码中以保留这些列。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, strutils, StdCtrls, ComCtrls;

type
  TForm1 = class(TForm)
    ListView1: TListView;
    Edit1: TEdit;
    procedure Edit1Change(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  StrList : TStringList;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
var
   Index : Integer;
begin
     StrList := TStringList.Create;
     for Index := 0 to ListView1.Items.Count -1 do
        StrList.Add(ListView1.Items[Index].Caption);
end;
procedure TForm1.Edit1Change(Sender: TObject);
var
   Index : Integer;
begin
   ListView1.Clear;
   for Index := 0 to StrList.Count - 1 do
     if Pos(Edit1.Text, StrList.Strings[Index]) > 0 then
        ListView1.AddItem(StrList.Strings[Index], nil);
   if Edit1.Text = '' then
     for Index := 0 to StrList.Count - 1 do
       ListView1.AddItem(StrList.Strings[Index], nil);
end;

end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:20:43.073

您正在清除列表视图，然后将其添加到其中- 这就是其他列为空的原因[`Items`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TListView.Items)。[`SubItems`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TListItem.SubItems)

[要过滤列表视图的内容，在虚拟模式](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TListView.OwnerData)下使用列表视图可能更容易，您可以在其中设置计数并在回调中按需提供数据。这是一个简单的例子：

表格：

```
object Form1: TForm1
  Left = 0
  Top = 0
  Caption = 'Form1'
  ClientHeight = 282
  ClientWidth = 418
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  OnCreate = FormCreate
  OnDestroy = FormDestroy
  PixelsPerInch = 96
  TextHeight = 13
  object ListView1: TListView
    Left = 8
    Top = 39
    Width = 402
    Height = 235
    Columns = <
      item
        Caption = 'Name'
        Width = 80
      end
      item
        Caption = 'Title'
        Width = 160
      end
      item
        Alignment = taRightJustify
        Caption = 'Age'
        Width = 80
      end>
    OwnerData = True
    SortType = stText
    TabOrder = 0
    ViewStyle = vsReport
    OnData = ListView1Data
  end
  object Edit1: TEdit
    Left = 8
    Top = 12
    Width = 121
    Height = 21
    TabOrder = 1
    OnChange = Edit1Change
  end
end 
```

编码：

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, System.Contnrs,
  Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Grids, Vcl.ComCtrls;

type
  TDataItem = class
  private
    FAge: Integer;
    FFirstName: string;
    FLastName: string;
  public
    property Age: Integer read FAge;
    property FirstName: string read FFirstName;
    property LastName: string read FLastName;
  end;

  TForm1 = class(TForm)
    ListView1: TListView;
    Edit1: TEdit;
    procedure ListView1Data(Sender: TObject; Item: TListItem);
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure Edit1Change(Sender: TObject);
  private
    FActiveItems: TList;
    FItems: TObjectList;
    procedure AddTestData;
    procedure ApplyFilter(const S: string = '');
  public
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.AddTestData;
  procedure AddDataItem(const FirstName, LastName: string; Age: Integer);
  var
    DataItem: TDataItem;
  begin
    DataItem := TDataItem.Create;
    try
      DataItem.FFirstName := FirstName;
      DataItem.FLastName := LastName;
      DataItem.FAge := Age;
      FItems.Add(DataItem);
    except
      DataItem.Free;
      raise;
    end;
  end;
begin
  AddDataItem('John', 'Doe', 26);
  AddDataItem('Jane', 'Warwick', 29);
  AddDataItem('Stephen', 'Marley', 33);
  AddDataItem('Alice', 'Connoly', 48);
  AddDataItem('Adam', 'Spears', 63);
end;

procedure TForm1.ApplyFilter(const S: string);
var
  I: Integer;
begin
  ListView1.Items.BeginUpdate;
  try
    ListView1.Clear;
    FActiveItems.Clear;
    for I := 0 to FItems.Count - 1 do
      if (S = '') or (Pos(UpperCase(S), UpperCase(TDataItem(FItems[I]).FirstName)) <> 0) then
        FActiveItems.Add(FItems[I]);
    ListView1.Items.Count := FActiveItems.Count;
  finally
    ListView1.Items.EndUpdate;
  end;
end;

procedure TForm1.Edit1Change(Sender: TObject);
begin
  ApplyFilter((Sender as TEdit).Text);
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  FItems := TObjectList.Create;
  FActiveItems := TList.Create;
  AddTestData;
  ApplyFilter(Edit1.Text);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FActiveItems.Free;
  FItems.Free;
end;

procedure TForm1.ListView1Data(Sender: TObject; Item: TListItem);
var
  DataItem: TDataItem;
begin
  DataItem := FActiveItems[Item.Index];
  Item.Caption := DataItem.FirstName;
  Item.SubItems.Add(DataItem.LastName);
  Item.SubItems.Add(IntToStr(DataItem.Age));
end;

end. 
```

# windows - 在 Visual Studio 中使用 FFmpeg

> ID：11701635
> 
> 赞同：23
> 
> 时间：2012-07-28T13:58:41.927
> 
> 标签：windows, visual-studio, ffmpeg

我正在尝试在 Visual Studio 2010 的 C++ 项目中使用 FFmpeg。我想将库作为静态链接文件包含在内。[像libavcodec/api-example.c](http://cekirdek.pardus.org.tr/~ismail/ffmpeg-docs/api-example_8c-source.html)这样的简单程序编译时没有错误，并且在启动它们时错误视图中不会出现链接器错误。但是，启动应用程序后会出现一个消息框，提示缺少 avutil-51.dll。你对如何解决这个问题有任何提示吗？

[我使用了来自http://ffmpeg.zeranoe.com/builds/](http://ffmpeg.zeranoe.com/builds/)的最新开发版本。然后我将 include 指定为附加包含目录，将 avcodec.lib;avfilter.lib;avformat.lib;avutil.lib 指定为附加依赖项，将 lib 指定为附加库目录。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-28T14:11:40.150

使用 FFmpeg，您可以：

1.  使用预构建的 .lib/.dll 文件，使用 Visual Studio 生成的二进制文件将依赖于 av*.dll 文件
2.  使用非 Microsoft 编译器将 FFmpeg 从源代码编译成静态库，然后链接到您的 Visual Studio 项目（在这种情况下请注意 LGPL/GPL 许可证）

您按照上面的第 1 项构建了您的项目。您必须使用和重新分发 av*.dll 依赖文件和您的二进制文件才能使其正常工作。

[Zeranoe](http://ffmpeg.zeranoe.com/builds/)上的“静态”意味着库静态链接到二进制文件中，例如`ffmpeg.exe`. 不要将此与`.lib`链接到您的二进制文件的静态库混淆。Zeranoe 不提供此类服务。

在[Zeranoe 上](http://ffmpeg.zeranoe.com/builds/)，您会找到这样的档案：

*   “共享”ffmpeg-20120726-git-236ecc3-win32-shared.7z：
*   `bin/avcodec-54.dll`
*   `bin/avutil-51.dll`
*   ETC
*   “开发” ffmpeg-20120726-git-236ecc3-win32-dev.7z：
*   `lib/avcodec.lib`
*   `lib/avutil.lib`

“共享”存档具有 FFmpeg 构建的动态链接到 DLL 库。“Dev”存档具有 lib 文件，您可以在项目中使用这些文件链接到它们，以及 ffmpeg.exe 在共享存档中所做的方式。

因此，您的 Visual Studio 项目可以像这样简单（[在此处浏览完整源代码](http://www.alax.info/trac/public/browser/trunk/Utilities/FFmpeg/FFmpegApp)）：

```
extern "C" 
{
        // NOTE: Additional directory ..\zeranoe.com\dev\include gets to the files
        #include "libavcodec\avcodec.h"
}

// NOTE: Additional directory ..\zeranoe.com\dev\lib gets to the files
#pragma comment(lib, "avcodec.lib")

// NOTE: Be sure to copy DLL files from ..\zeranoe.com\shared\bin to the directory of 
//       the FFmpegApp.exe binary
int _tmain(int argc, _TCHAR* argv[])
{
        _tprintf(_T("Trying avcodec_register_all... "));
        avcodec_register_all();
        _tprintf(_T("Done.\n"));
        return 0;
} 
```

您将“Dev”存档解压缩到`dev`Visual Studio 项目的子目录中，并添加`dev\include`额外的包含路径。这足以构建二进制文件，它将取决于`av*.dll`：

![在此处输入图像描述](../Images/7d3fbbe679c75bcbde06e2fe208b28b0.png)

这是您提取“共享”存档并将 DLL 从其复制`bin`到二进制目录的时候。您的应用程序将从那里开始工作：

```
C:\FFmpegApp\Release>FFmpegApp.exe
Trying avcodec_register_all... Done. 
```

**2016 年 1 月 20 日更新**：存储库中的项目已升级到 Visual Studio 2013（较旧的 VS 2010 代码）并针对当前的 Zeranoe 构建进行检查。样品和说明保持良好状态。

请注意，`Win32`Visual Studio 中的构建假定您使用来自 Zeranoe 的 32 位文件。要构建 64 位版本，请分别下载相应的文件并设置 Visual C++ 项目，以进行构建`x64`（或者，最好同时下载，设置两个配置并分别配置 include/lib 路径）。不匹配位数会导致错误，在下面的评论中提到。

**2021 年 7 月 20 日更新**：（从下面的评论中提取）Zeranoe 版本不再可用。一个好的且官方认可的替代方案是[BtbN 构建的 Windows](https://github.com/BtbN/FFmpeg-Builds/releases)。本教程需要一个`(...)-win64-gpl-shared.zip`or`(...)-win64-lgpl-shared.zip`文件。

# javascript - 用Javascript提取复选框的值？

> ID：11701637
> 
> 赞同：0
> 
> 时间：2012-07-28T13:58:44.390
> 
> 标签：javascript, jquery, html, forms, checkbox

我正在构建一个包含很多复选框的动态表单。由于表单的复杂性，普通的表单提交是不合适的，并且由于表单意味着一次对多个用户有效，我正在做的是在序列化之前提取表单值并将它们存储在 JavaScript 对象中它们作为要在服务器端发送和处理的批量数据。

到目前为止效果很好，但我遇到了复选框输入的问题。尽管没有被选中，但无论复选框是否被实际选中，它们的`value`属性总是会返回。`$('input[name=checkbox_name]').val();`

**到目前为止，我已尝试通过以下方式解决此问题：**

*   添加默认值以外的值（即`on`）
*   添加一个`checked`属性，但我不完全确定哪些值是有效的，哪些不是；例如，使用 Google Chrome 的控制台，我添加了一个`checked="checked"`属性/值，它应该实时选中该框，但它没有
*   [根据http://bit.ly/MLxCht](http://bit.ly/MLxCht)在复选框输入之前放置具有与`name`复选框相同属性的隐藏输入元素`value=0`

任何详细说明如何提取复选框的当前值（未选中/选中）的答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:01:06.503

```
$('input[name=checkbox_name]').prop('checked') 
```

（您也可以使用`.is(':checked')`简洁，但速度较慢。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:01:56.253

尝试：

```
$('input[name=your_name]').is(':checked'); 
```

得到实际检查或不值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:02:55.830

试试这个

```
$(...).is(":checked") 
```

或者

```
$(...).attr('checked') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T14:07:51.213

而不是其他人的建议，为什么不只是：

```
$('input[name=your_name]:checked') 
```

# ruby-on-rails - 如何在我的 ec2 实例中使用 git 部署我的 ruby on rails 应用程序？

> ID：11701639
> 
> 赞同：3
> 
> 时间：2012-07-28T13:59:03.980
> 
> 标签：ruby-on-rails, git, deployment, amazon-ec2, push

我是**ruby​​ on rails 的**新手，我想使用**git**来**更新**我的**应用程序**等……问题是有太多教程，每个教程都不一样，这让我感到困惑……

那么，是否可以在我的**ec2 实例中****添加**一个**git 服务器**并在我想要推送新代码并自动在站点中看到时从我的**本地计算机****管理它？**

 ******如果没有这种方法的任何解决方法？

有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T15:46:52.743

我建议您首先设置 Capistrano 以使您能够自动化部署应用程序的过程：

[https://github.com/capistrano/capistrano](https://github.com/capistrano/capistrano)

一旦您设置了 Capistrano 并验证它可以成功地将您的应用程序正确部署到您的 EC2 实例，那么您有很多选择。最简单的方法是在您推送并想要部署到 EC2 实例时运行 cap deploy。

您不需要在 EC2 实例上托管 git 服务器，但没有什么能阻止您这样做。如果您确实在 EC2 实例上托管 git 服务器，那么您可以在推送时使用 git 挂钩自动运行 capistrano 部署：

[http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

如果您将其设置为在推送时自动部署，那么我会确保您在与设置 Capistrano 进行部署的分支/主服务器不同的分支中进行开发工作，这样您就不会意外地将不稳定/错误的开发代码部署到您的现场直播。

对于较大的项目，我建议设置一个 CI 服务器来运行项目的单元测试，自动部署应用程序。******

# javascript - jQuery 图像（产品）滑块

> ID：11701641
> 
> 赞同：0
> 
> 时间：2012-07-28T13:59:10.193
> 
> 标签：javascript, jquery, html

我一直在努力解决这个问题，但似乎有点困难。我有一个包含`<li>`一些产品（10）的图像列表（在 a 内）。但是，我想要的是从左到右滑动的图像，显​​示图像滑过（不间断）和最后一次图像显示，第一个将再次显示。因此，永远不会有图像的间隙/暂停只是在 10 种产品上一直滑动。

有这方面的教程吗？或者我可以查看的任何插件？

注意：我不想要带有“箭头”和“下一步”按钮的滑块，这应该会自动发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:06:20.280

[基本的 jQuery 滑块](http://www.basic-slider.com/)提供了这一点。自动滑动、动画效果、配置。

# asp.net - 跨服务器场的 Web 用户的 WF 工作流？

> ID：11701643
> 
> 赞同：2
> 
> 时间：2012-07-28T13:59:12.737
> 
> 标签：asp.net, workflow-foundation-4

我们希望使用 Windows Workflow 来引导我们的 Web 用户沿着导航路径前进。

我们有一个服务器场，因此这转化为每个用户的长时间运行的工作流；多个服务器必须知道的。

到目前为止，我们的原型是使用 WorkflowApplication 和 SQL Persistence Provider。这可行，但我们担心所有 SQL Server 活动及其性能。

我们发现有人创建了一个 AppFabric 缓存持久性提供程序（[此处为博客文章](http://blogical.se/blogs/mikael/archive/2011/02/01/using-appfabric-cache-as-wf-persistence-store.aspx)），这对我们很有吸引力，因为这意味着将我们的工作流水合到 RAM 而不是 SQL；但他们明确表示它没有经过生产测试。

有什么建议、想法或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:20:06.983

不幸的是，与大多数与性能相关的问题一样，除了：用您的真实场景进行测试并查看之外，没有其他好的答案。

我们将纯 SQL 持久性用于购物车风格的工作流程，并且其性能没有问题。我们甚至提取了几个提升的属性，这增加了一些存储开销。但是，我的负载不是您的负载，我的工作流程也不是您的工作流程，因此这并不意味着它适用于您的场景。

对于网络农场场景，我将给出的一个建议是，您确保将[sqlWorkflowInstanceStore/@instanceLockedExceptionAction](http://msdn.microsoft.com/en-us/library/system.servicemodel.activities.description.sqlworkflowinstancestorebehavior.instancelockedexceptionaction.aspx)属性设置为`AggressiveRetry`. 这样做的原因是，在农场场景中，通常您具有将请求路由到 diff 的模式。因此，如果两个调用连续快速进入，则工作流的第一个请求可能会发送到服务器 A，第二个请求可能会发送到服务器 B。服务器 A 可能已经响应，但由于持久性与响应异步，它可能当第二次调用进入服务器 B 时，服务器 B 仍然保持不变。服务器 B 第一次可能不会获得锁，因为服务器 A 正在完成持久性，因此它将进入重试例程。如果你不指定`AggressiveRetry`，那么`BasicRetry`将被使用，并且使用一种非常缓慢的线性算法，这将表现为您的工作流程看起来很糟糕的服务性能。`AggressiveRetry`另一方面，将使用一种算法，它会“退避”更多的失败。由于服务器 A 很可能很快就会完成，因此您通常会在前几次尝试中获得锁定。

就 AppFabric Cache 实现而言，我个人不会使用该确切实现，因为它不能保证任何持久性。缓存可能会关闭，缓存可能需要清除其 LRU 对象，其中可能包括您的工作流实例等。如果有的话，我建议使用缓存通读实现，其中所有写入/锁定调用都是针对 SQL 完成的，但是用于反序列化工作流的实际数据可能来自缓存。这显然不会产生那么大的影响，但是......仍然比从 SQL 服务器读取要好。另一种可能性是 AppFabric Cache 1.1 添加了缓存读/写提供程序。

# javascript - KnockoutJS 中的后期可观察数组绑定

> ID：11701646
> 
> 赞同：0
> 
> 时间：2012-07-28T14:00:00.510
> 
> 标签：javascript, knockout.js, javascriptserializer

我的 MVC 剃刀视图呈现此标记：

```
function existingNamingsViewModel() {
            var self = this;
            var initialData = @Html.Raw(new JavaScriptSerializer().Serialize(Model));
            self.ExistingNamings = ko.observableArray(initialData);
        }
        ko.applyBindings(new existingNamingsViewModel(), document.getElementById("namings-control")); 
```

进入正确的 JS 序列化代码，`initialData`变量初始化为：

```
var initialData = [{"TypeName":"Orders","NameBlocks":["{intInc_G}","/","{intInc_D}","/02/-","{yy}"],"ParamBlocks":["2296","","1","",""]}]; 
```

在应用 ko 绑定后，生成的 html 采用可编辑网格的形式： ![在此处输入图像描述](../Images/179e17a8212d4ac5eee4b670f8581915.png)

每当用户更改这些输入字段中的数据时，我需要 knockoutJS 能够自动更新视图模型。但由于视图模型是从简单的 JSON 对象初始化的，`NameBlocks`而`ParamBlocks`不是`ko.observableArray`. 我需要他们。我如何实现这一目标？

PS 一个想法是进行更复杂的初始化，其中 razor 仅序列化`Name`/`ParamBlocks`数组，并`ExistingNamings`通过 javascript 代码手动填充数组，创建一个自定义命名类对象，该对象`Name`/`ParamBlocks`包装到`ko.observableArray`. 但这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:54:04.150

有一个可用的[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)可以为您解决问题，但您可能需要更改数据传递的方式。

映射插件提供了一个将 JSON 对象映射到视图模型的函数：

```
var viewModel = ko.mapping.fromJS(data); 
```

但请注意，在文档中（链接到上面），JSON 对象中的所有属性都被命名。

`initialData`您在示例中提供的数组包含只是值的集合，而不是命名值的集合。

此外，`initialData`是一个包含单个对象的数组。如果这种情况总是需要一个对象，那么这个解决方案就更容易了。

假设您能够以`initialData`以下格式交付：

```
var initialData = {
    "TypeName":"Orders",
    "NameBlocks": [
        {"block":"{intInc_G}"},
        {"block":"/"},
        {"block":"{intInc_D}"},
        {"block":"/02/-"},
        {"block":"{yy}"}
    ],
    "ParamBlocks":[
        {"block":"2296"},
        {"block":""},
        {"block":"1"},
        {"block":""},
        {"block":""}
    ]
}; 
```

然后创建视图模型将像下面这样简单：

```
var viewModel = ko.mapping.fromJS(initialData);

$(function() {
   ko.applyBindings(viewModel); 
}); 
```

这是我设置的小提琴，因此您可以看到它的实际效果：http: [//jsfiddle.net/jimmym715/qUjLQ/](http://jsfiddle.net/jimmym715/qUjLQ/)

希望您的解决方案将像一些数据格式更改和映射插件的使用一样简单。

无论如何，映射插件应该会引导您朝着正确的方向前进。

# javascript - Grails：AJAX onSuccess 方法未触发

> ID：11701649
> 
> 赞同：0
> 
> 时间：2012-07-28T14:00:32.440
> 
> 标签：javascript, jquery, ajax, grails, groovy

我正在使用带有 grails remoteFunction 标记的 jquery 库在鼠标悬停时进行 AJAX 调用。从我写的 println 中我知道正在调用指定的操作，但永远不会触发 onSuccess 函数。我检查了萤火虫，我收到了 404 错误。我一般是 AJAX 和 JS 的新手，所以我现在可能忽略了一些非常明显的东西。这是我的代码片段。

普惠制：

```
<script type="text/javascript">

function change()
{

document.getElementById('changer').src='${resource(dir: "images/images", file: "heart_red.png")}';
}

function onSuccess(data){

    alert("Has hearted:");

} 
```

```
<img class="user_profile_pic" src="${user.profilePicture}" onmouseover="${remoteFunction(controller:'user', action: 'hasHearted', onSuccess: 'onSuccess(data)', params:[userID: user.id])}"/> 
```

时髦的：

```
 def hasHearted = {
    println "Recieved user ID: $params.userID" 
    if(some condition...){
        [hasHearted: true] as JSON
    }
    else{
        [hasHearted: false] as JSON
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:57:50.573

尝试在控制器中使用*渲染*方法：

```
render ([hasHearted: true] as JSON) 
```

# c# - 获取正则表达式以匹配字符串中的句子

> ID：11701650
> 
> 赞同：0
> 
> 时间：2012-07-28T14:00:42.703
> 
> 标签：c#, .net, regex, windows

我正在尝试提取这个（“5013a27a-3e44d69d-4120-080027a10080”不同）

```
/vmfs/volumes/5013a27a-3e44d69d-4120-080027a10080 
```

出这个（这是一个字符串）：

```
name                 datastore1
url                  /vmfs/volumes/5013a27a-3e44d69d-4120-080027a10080
capacity             123480309760
freeSpace            96355745792
accessible           1
type                 VMFS
multipleHostAccess   <unset> 
```

所以我做了以下，但它不工作：

```
Regex regex = new Regex(@"[/][A-Za-z0-9/-][/] [ ]");
MatchCollection match = regex.Matches(input); 
```

我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:04:23.727

试试这个正则表达式：

```
@"/([A-Za-z0-9/-]+)" 
```

获取组 1 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:22:42.250

```
string url = Regex.Match(text, @"url\s+(.+)").Groups[1].Value; 
```

我相信这比寻找斜线更可靠。`\s`匹配任何空白字符，它将处理“url”和值之间的空白。

# google-apps-script - 从 Google Drive 中的文件中删除默认域查看器

> ID：11701651
> 
> 赞同：0
> 
> 时间：2012-07-28T14:00:48.670
> 
> 标签：google-apps-script

我正在编写一个非常简单的脚本，它将更新文档的查看者。在我的 Google Apps 域中，默认共享权限已更改。我的管理员想返回并更改所有现有文档的共享设置。在我的 POC 上工作时，我遇到了一个错误，我想知道我是否应该使用不同的 GAS。

问题是由于“无效电子邮件”错误，我无法将域用户删除为文档的查看者。

消息是：`Exception: Invalid email: MyDomain.com`

提前感谢您的任何帮助。

[我从以下代码中删除了日志记录和错误捕获。]

```
function removeDomainUser()
{
  DocsList.getAllFiles().forEach(
    function (file,i ,array)
    {

        //--Always pick the Domain Viewer--//

        var toRemove = -1;
        file.getViewers().forEach(
          function(user,i)
          {
            toRemove = user.getEmail() == "MyDomain.com" ? i : toRemove;
          }
        );

        //--If there is a Domain viewer, remove it--//

        toRemove > -1 ? file.removeViewer(file.getViewers()[toRemove]) : '';
    }
  );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:19:58.613

不幸的是，使用 DocsList 服务无法做到这一点。有一个[开放的功能请求](http://code.google.com/p/google-apps-script-issues/issues/detail?id=904)来添加此功能。您应该能够通过使用 UrlFetchApp调用[Documents List API来完成此操作。](https://developers.google.com/google-apps/documents-list/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:11:20.910

我还没有弄清楚您的代码中的错误，但我已经能够使用以下代码实现相同的目标

```
function removeDomainUser(user){
  //User is your domain user
  // e.g user = email@mydomain.com
  var files = DocsList.getAllFiles();
  for(var i in files){
    var viewvers = files[i].getViewers();
    for(var j in viewvers){
      if(viewvers[j] == user) files[i].removeViewer(user);
    }
  }
} 
```

# url - url jstl 数据库

> ID：11701652
> 
> 赞同：0
> 
> 时间：2012-07-28T14:01:04.237
> 
> 标签：url, jstl

我是 Java Servlet 的新手。我在数据库中放了一个文本，这是对课程的描述，带有可点击的 url。我通过连接池连接到数据库。它工作正常。我使用以下代码（荷兰语）。

```
<c:forEach items="${cursussen}" var="cursus"> //an arraylist of courses
 <tr>
   <td>
      <c:out value="${cursus.cursusNaam}" /></td> //course name
         <td><c:out value="${cursus.niveau}" /></td> //course level
         <td><c:out value="${cursus.beschrijving}" /></td> //course description with links
          </tr>
 </c:forEach> 
```

链接将转换为 asci 字符。如何获取原始链接以使其仍然是可点击的 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:23:18.350

如果`beschriving`包含有效的 HTML 代码，并且您不担心任何 XSS 攻击，您只需禁用`c:out`标签的 XML 转义：

```
<c:out value="${cursus.beschrijving}" escapeXml="false" /> 
```

但这相当于更简单的

```
${cursus.beschrijving} 
```

`<c:out>`精确地用于确保所有特殊的 HTML 字符 ( `<, >, ", ', &`) 都被转义。如果您不想要这个，则无需使用`<c:out>`标签。它有一个 escapeXml 属性只是因为在 EL 的第一个版本中，它只能在标签内使用，而不能直接在 JSP 代码中使用。

# sql - where count sql语句

> ID：11701658
> 
> 赞同：0
> 
> 时间：2012-07-28T14:01:30.303
> 
> 标签：sql, vb.net

我已将 count(ProductQuantity) 存储到列表中。由于每个 ProductID 都有不同的计数（ProductQuantity），我试图根据计数（ProductQuantity）检索 ProductID。

```
 For Each i In sumofpquantity()

    Dim sq As String = "SELECT ProductID From OrderDetail Where COUNT(ProductQuantity)= " & i & ""
        Dim cmd2 As SqlCommand = New SqlCommand(sq, connection12)
        Dim reading As SqlDataReader = cmd2.ExecuteReader()
        While reading.Read()

            list.Add(reading.GetInt32(reading.GetOrdinal("ProductID")))

        End While
        reading.Close()
    Next i 
```

sumofpquantity() 是存储计数的方法(ProductQuanity)

根据计数（ProductQuantity）检索productid的正确sql语句是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:03:38.057

所以你想要给定数量的记录，然后简单地删除`COUNT`：

```
Dim sq = "SELECT ProductID From OrderDetail Where ProductQuantity = " & i 
```

`COUNT`是一个聚合函数。所以你需要一个`GROUP BY ProductID`例子。您不能计算已经是单个数值的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:07:23.287

您可以使用`having`子句搜索具有特定出现次数的产品。例如，这将查找具有 42 个销售额的产品：

```
select  ProductID 
from    OrderDetail 
group by
        ProductID 
having  SUM(ProductQuantity) = 42 
```

要将数字 42 传递给数据库，请考虑使用参数：

```
Dim sq As String = _
    "select  ProductID" & _
    "from    OrderDetail" & _
    "group by" & _
    "        ProductID" & _
    "having  SUM(ProductQuantity) = @cnt"
Dim cmd2 As SqlCommand = New SqlCommand(sq, connection12)
cmd2.Parameters.AddWithValue("@cnt", 42);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:07:26.597

好吧，使用参数化查询是一个好习惯，如下所示：

```
Dim sq as String = "SELECT ProductID " & _
                   "FROM OrderDetail " & _
                   "WHERE ProductQuantity = @DesiredQuantity"
Dim cmd2 as SqlCommand = New SqlCommand(sq, connection12)
cmd2.Parameters.AddWithValue("@DesiredQuantity", i) 
```

通过此查询，SQL 查找 ProductQuantity = @DesiredQuantity 的产品，并为 @DesiredQuantity 分配变量 i 的值。参数可防止 SQL 注入以及其他潜在问题。

# javascript - 包括滚动的元素偏移

> ID：11701659
> 
> 赞同：2
> 
> 时间：2012-07-28T14:01:46.717
> 
> 标签：javascript, dom, scroll, offset

要获得元素偏移量，我使用：

```
function(el) {
    if(el && el.parentNode) {
        var x = 0;
        var y = 0;
        while(el) {
            x += el.offsetLeft;
            y += el.offsetTop;
            el = el.offsetParent;
        }
        return {x: x, y: y};
    }
    return null;
} 
```

并获得它的滚动偏移量，我使用：

```
function(el) {
    if(el && el.parentNode) {
        var x = 0;
        var y = 0;
        while(el) {
            if(el && el.parentNode) {
                x += el.scrollLeft;
                y += el.scrollTop;
                el = el.parentNode;
            } else {
                el = null;
            }

        }
        return {x: x, y: y};
    }
    return null;
} 
```

问题是我不知道如何将这两个函数合并在一起，所以我可以获得一个元素偏移量，包括在页面上完成的任何滚动。在设置元素位置时，我通常只需要引用这两个函数，但似乎只在一个函数中获取总偏移量是有意义的。我怎样才能做到这一点？在一个函数中完成这一切是否是一个好主意，或者是否有特定的用例在没有滚动的情况下获得偏移量是个好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:13:34.213

*你的意思是这样的？*

```
function f (el) {
  var offset = (function(el) {
    if(el && el.parentNode) {
      var x = 0;
      var y = 0;

      while(el) {
        x += el.offsetLeft;
        y += el.offsetTop;
        el = el.offsetParent;
      }

      return {x: x, y: y};
    }

    return null;
  })(el);

  var scroll = (function(el) {
    if(el && el.parentNode) {
      var x = 0;
      var y = 0;

      while(el) {
        if(el && el.parentNode) {
          x += el.scrollLeft;
          y += el.scrollTop;
          el = el.parentNode;
        } else {
          el = null;
        }
      }

      return {x: x, y: y};
    }

    return null;
  })(el);

  return { x: offset.x + scroll.x, y: offset.y + scroll.y }
} 
```

# c# - Java - java有没有类似C#的struct自动构造函数的东西

> ID：11701662
> 
> 赞同：3
> 
> 时间：2012-07-28T14:02:10.273
> 
> 标签：c#, java, constructor

我已经使用 C# 很长时间了，现在我需要用 Java 做一些事情。

java中是否有类似C#的struct自动构造函数？

我的意思是在 C#

```
struct MyStruct
{
    public int i;
}
class Program
{
    void SomeMethod()
    {
        MyStruct mStruct; // Automatic constructor was invoked; This line is same as MyStruct mStruct = new MyStruct();
        mStruct.i = 5;   // mStruct is not null and can i can be assigned
    }
} 
```

是否可以强制 java 在声明时使用默认构造函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T14:22:25.843

不——Java 根本不支持自定义值类型，构造函数总是被显式调用。

但是，无论如何，您对 C# 的理解是不正确的。从你原来的帖子：

```
// Automatic constructor was invoked
// This line is same as MyStruct mStruct = new MyStruct();
MyStruct mStruct; 
```

这不是真的。您可以在此处不进行任何显式初始化的情况下*写入*，但除非编译器知道所有内容都已被赋值，否则`mStruct.i`您无法从中*读取：*

```
MyStruct x1; 
Console.WriteLine(x1.i); // Error: CS0170: Use of possibly unassigned field 'i'

MyStruct x1 = new MyStruct();
Console.WriteLine(x1.i); // No error 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T14:08:04.477

不，您总是需要在 Java 中显式调用构造函数。

由于可能有多个构造函数，因此显式调用特定构造函数可能是一种好习惯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T14:05:35.850

Java 不支持 Struct 关键字（请参阅：http: [//msdn.microsoft.com/en-us/library/ms228600](http://msdn.microsoft.com/en-us/library/ms228600(v=VS.90).aspx) (v=VS.90).aspx ），因此您需要使用只有公共的类对象（并且没有函数）。您总是需要初始化类。

# php - 类似 Laravel 的 MVC 架构

> ID：11701668
> 
> 赞同：0
> 
> 时间：2012-07-28T14:02:42.963
> 
> 标签：php, oop, routing, laravel

最近我开始学习 Laravel，它是一个非常好的 PHP 框架。目前我正在尝试使我自己的 MVC 类似于 Laravel 的工作方式。

**我的逻辑**

我们设置路由，然后检查当前 URL 是否存在，然后我们将设置控制器和方法 from `'uses'`，如果不存在，我们将控制器设置为`ERROR`。问题是我无法访问 $routes 变量。

如果我尝试`static::$routes = ..`php 显示错误，但 Lavarel 工作正常，即使我的 PHP 版本是**5.2**。我不明白整个事情是如何运作的。另外，如果您对如何构建架构有任何建议:)

**索引.php**

```
include 'router.php';
include 'route.php';

Route::get('about',array('uses'=> 'about@index'));
Route::get('about2',array('uses'=> 'about@index')); 
```

**路由器.php**

```
class Router {

    public static $routes = array(
        'GET'    => array(),
        'POST'   => array(),
        'PUT'    => array(),
        'DELETE' => array(),
        'PATCH'  => array(),
        'HEAD'   => array(),
    );

    public $valid = false;

    public static $methods = array('GET', 'POST', 'PUT', 'DELETE', 'HEAD');

    public static function register($method, $route, $action)
    {       

        if (ctype_digit($route)) $route = "({$route})";

        if (is_string($route)) $route = explode(', ', $route);

        foreach ((array) $route as $uri){
            if (is_array($action)){
                $routes[$method][$uri] = $action;
            }
        }

        $request = $_SERVER['REQUEST_URI'];
        $request = trim($request, '/');

        $exist = array_key_exists($request, $routes[$method]);

        if($exist){
            $valid = true;
        } 

        echo $valid;

        // print_r($routes);
    }

} 
```

**路由.php**

```
class Route {

    public static function get($route, $action)
    {
        Router::register('GET', $route, $action);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T23:14:38.833

如果您打算复制和粘贴作品，请先了解整个过程，然后再假设一切都是静态的，请阅读：

*   [工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)
*   [立面图案](http://en.wikipedia.org/wiki/Facade_pattern)
*   [多点模式](http://en.wikipedia.org/wiki/Multiton_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:58:07.250

这是因为您只使用局部变量。在处理类时，对象变量是通过`$this->`静态变量访问的 - 使用`self::`或`static::`。

> **[[http://codepad.org/F7UWmOSb](http://codepad.org/F7UWmOSb)]**

```
class Foo
{
    protected static $bar = 'lorem';
    protected $buz = 'ipsum';

    public function test()
    {
        var_dump( $this->buz );
        var_dump( self::$bar );
    }

}

$instance = new Foo;
$instance->test(); 
```

另外，正如*@PeeHaa*提到的：停止使用静态变量。这不是面向对象的。静态结构只是包装在命名空间中的全局变量/函数，它恰好看起来像`class`定义。

并了解依赖注入，这些讲座可能会有所帮助：

*   [继承、多态性和测试](http://www.youtube.com/watch?v=4F72VULWFvc)
*   [全局状态和单例](http://www.youtube.com/watch?v=-FRm3VPhseI)
*   [不要找东西！](http://www.youtube.com/watch?v=RlfLCWKxHJ0)
*   [单元测试](http://www.youtube.com/watch?v=wEhu57pih5w)

# iphone - 应用程序进入后台时的popToRootViewController

> ID：11701670
> 
> 赞同：0
> 
> 时间：2012-07-28T14:03:00.513
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller, uinavigationcontroller

在`didFinishLaunchingWithOptions`我的应用程序中，代码是

```
 _homeViewController = [[HomeViewController alloc]init];
    UINavigationController*  _navigationController = [[UINavigationController alloc] initWithRootViewController:_homeViewController];
    [self.window setRootViewController:_navigationController];
    [_navigationController setNavigationBarHidden:YES];
    [self.window makeKeyAndVisible]; 
```

在中`HomeViewController`，我有两个按钮，如果按下按钮，我将展示 ViewController。如果 button1 被按下，代码是

```
if (_detailsViewController == nil)
            _detailsViewController = [[DetailsViewController alloc]init];

       [self.navigationController presentModalViewController:_detailsViewController animated:YES]; 
```

现在，当我在 detailsViewController 中并按下 iPhone Home 按钮时，在同一个类中，我正在使用`UIApplicationDidEnterBackgroundNotification`并调用一个方法来执行以下行

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

所以我想当我再次打开应用程序时，我可以看到 HomeViewController，但它不起作用。请帮我 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:06:09.670

当你进入后台时，保存一段状态信息，当你重新进入前台时，检查该信息，如果设置了标志，则在没有动画的情况下在那里弹出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:51:15.227

似乎我无法弹出到根视图的原因是，我在两者之间展示了 ViewController，如果 ViewController 与导航控制器一起出现，即，如果 ViewController 作为导航控制器被推送，那么我可以弹出到根视图控制器

# jquery - http://itstimefor.skype.com 背后的技术是什么

> ID：11701674
> 
> 赞同：1
> 
> 时间：2012-07-28T14:03:09.633
> 
> 标签：jquery, html, css

我真的很喜欢这个网站，我想知道这个网站背后的技术是什么？我真正想知道的是加载（索引页面）时元素的动态移动以及页面之间的恒定流动。似乎没有加载页面，您只需从一页上的一个位置移动到另一个位置。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:08:22.433

他们可能只使用 javascript 和 canvas 元素。

我之前在这里看到过类似他们的菜单的东西：http: [//jsfiddle.net/PeeHaa/SQF6X/](http://jsfiddle.net/PeeHaa/SQF6X/)

*不知道是谁做的，所以我不能给予信任（但我认为这很酷）*

# python - 使用 selenium 的单元测试在 python 中工作完美，但使用 django manage.py 测试会出现导入错误

> ID：11701677
> 
> 赞同：4
> 
> 时间：2012-07-28T14:03:19.120
> 
> 标签：python, django, selenium, functional-testing, importerror

我有这个文件，从 Selenium IDE 生成

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
import unittest, time, re

class Tcase(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "http://localhost:9999/"
        self.verificationErrors = []

    def test_tcase(self):
        driver = self.driver
        driver.get(self.base_url)
        # other things...

    def is_element_present(self, how, what):
        try: self.driver.find_element(by=how, value=what)
        except NoSuchElementException, e: return False
        return True

    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors)

if __name__ == "__main__":
    unittest.main() 
```

我正在开发一个 Django 项目（1.4）和 python 2.6，我想用 Selenium 进行测试。

如果我直接从 python 运行这个文件，它可以正常工作。

如果我这样做

```
python manage.py test myapp 
```

我收到导入错误

```
C:\web\opineo> python .\manage.py test core
Traceback (most recent call last):
  File ".\manage.py", line 14, in <module>
    execute_manager(settings)
  File "C:\Python26\lib\site-packages\django\core\management\__init__.py", line 459, in execute_manager
    utility.execute()
  File "C:\Python26\lib\site-packages\django\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python26\lib\site-packages\django\core\management\commands\test.py", line 49, in run_from_argv
    super(Command, self).run_from_argv(argv)
  File "C:\Python26\lib\site-packages\django\core\management\base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python26\lib\site-packages\django\core\management\base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "C:\Python26\lib\site-packages\south-0.7.3-py2.6.egg\south\management\commands\test.py", line 8, in handle
    super(Command, self).handle(*args, **kwargs)
  File "C:\Python26\lib\site-packages\django\core\management\commands\test.py", line 72, in handle
    failures = test_runner.run_tests(test_labels)
  File "C:\Python26\lib\site-packages\django\test\simple.py", line 380, in run_tests
    suite = self.build_suite(test_labels, extra_tests)
  File "C:\Python26\lib\site-packages\django\test\simple.py", line 264, in build_suite
    suite.addTest(build_suite(app))
  File "C:\Python26\lib\site-packages\django\test\simple.py", line 79, in build_suite
    test_module = get_tests(app_module)
  File "C:\Python26\lib\site-packages\django\test\simple.py", line 36, in get_tests
    test_module = import_module('.'.join(prefix + [TEST_MODULE]))
  File "C:\Python26\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\web\opineo\core\tests\__init__.py", line 3, in <module>
    from core.tests.func import *
  File "C:\web\opineo\core\tests\func.py", line 1, in <module>
    from selenium import webdriver
  File "C:\web\opineo\core\tests\selenium.py", line 3, in <module>
    from selenium import webdriver
ImportError: cannot import name webdriver 
```

怎么了？硒文件在那里！在 Python 2.6 的站点包中

**编辑：**

这行得通，正如预期的那样，它会打开 Firefox

```
PS C:\web\opineo> python.exe .\manage.py shell
Python 2.6.6 (r266:84297, Aug 24 2010, 18:46:32) [MSC v.1500 32 bit (Intel)] on win32
>>> from selenium import webdriver
>>> driver = webdriver.Firefox() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T12:29:21.993

最后我发现了问题：从 test 调用的文件被命名`selenium.py`，所以它覆盖了库；一个非常新手的错误。

这就是为什么它无法`webdriver`找到`selenium`！

# mysql - 显示来自 MySQL DB 的不同数量的行？

> ID：11701680
> 
> 赞同：0
> 
> 时间：2012-07-28T14:04:19.177
> 
> 标签：mysql

我想知道你能不能帮帮我？我正在建立一个食品网站，当您输入您的区号时，应显示在该区域提供的所有外卖的列表。到目前为止一切顺利，但应该显示这样的食物类型：

```
American(3)
Chinese(5)
French(10) 
```

等等。现在我的问题是如何从数据库中取出值并用 PHP 计算它们？

我在数据库中有这些列名：

ID、姓名、地址、邮政编码、城市、食品、交货时间、交货成本、徽标

请告诉我该怎么办！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:08:07.627

如果 column`food`定义了食物的类型（中式、美式），则使用 SQL 查询，如下所示：

```
SELECT food, COUNT(*) FROM mytable WHERE post_code = :code GROUP BY food 
```

# database - Sprintf 语言错误

> ID：11701684
> 
> 赞同：0
> 
> 时间：2012-07-28T14:04:35.063
> 
> 标签：database, printf

我想为我的语言做一个功能

我正在使用语言表格数据库系统

有些词我必须在脚本中重新定义，但我找不到方法

我的代码：

```
$str = "I'm %s from %s"; // string from database

$tre = 'ex3m,Albania';  // replacements
$tre = explode(',',$tre); // trying to convert replacements to strings separated with commas

sprintf($str, $tre); 
```

结果：

```
Warning: sprintf(): Too few arguments 
```

我想要的结果是：

```
I'm ex3m from Albania
I'm {ex3m} from {Albania} 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:06:55.597

[`sprintf`](http://php.net/sprintf)接受可变数量的参数，而不是数组。使用[`vsprintf`](http://php.net/vsprintf)：

```
$result = vsprintf($str, $tre); 
```

# java - 为什么以下向下转换在 Java 中不起作用：

> ID：11701685
> 
> 赞同：1
> 
> 时间：2012-07-28T14:05:00.420
> 
> 标签：java

```
 ArrayList<classA> aList = /*I then fill this array*/
    ArrayList<classB> bList = /* I then fill this array too*/

    /*Now put them both in the following ArrayList of Objects*/
    ArrayList<Object> myObjs =  new ArrayList<Object>();
    myObjs.add(aList);
    myObjs.add(bList);

    /*The following two lines however fails at run time*/
    ArrayList<classA> x = (ArrayList<classA>) myObjs.get(0);
    ArrayList<classB> x = (ArrayList<classB>) myObjs.get(1); 
```

我刚刚从另一个线程中读到“当有可能在运行时成功时允许向下转换”

谁能告诉我上面代码的问题？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:08:29.217

来自[Java 泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html)：

*考虑以下方法：*

```
public void boxTest(Box<Number> n) { /* ... */ } 
```

*它接受什么类型的论据？通过查看它的签名，您可以看到它接受一个类型为`Box<Number>`. 但是，这是什么意思？您是否可以通过`Box<Integer>`或`Box<Double>`，如您所料？答案是“不”，因为`Box<Integer>`并且`Box<Double>`不是`Box<Number>`.*

换句话说：即使`classA`是 的子类`Object`，`ArrayList<classA>`也不是**的**子类型`ArrayList<Object>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:08:40.043

问题是投射`Object`到`classA`与投射`ArrayList<Object>`到不同`ArrayList<classA>`。此外，您应该使用类名作为模板参数，而不是对象名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:58:01.067

我看到这是一个有趣的问题。我一直在摆弄一个示例代码，这很有效！[您可以在这个令人惊叹的在线 IDE 工具 - http://ideone.com/](http://ideone.com/)中试用此代码，该工具可以免费在线编译和显示您的代码输出。

```
import java.util.List;
import java.util.ArrayList;

class MyClass{

public static void main(String []args){

ArrayList<Integer> a = new ArrayList<Integer>();
a.add(10);
a.add(100);

ArrayList<String> b = new ArrayList<String>();
b.add("10");
b.add("100");

ArrayList<ArrayList> o = new ArrayList<ArrayList>();
o.add(a);
o.add(b);

a = o.get(0);
b= o.get(1);

System.out.println("int"+a.get(0));
System.out.println("string"+b.get(0));

System.out.println("Online IDE Works");
}

} 
```

问题是你有一个 ArrayLists 本身的 ArrayList。向下转换不适用于 ArrayLists 的对象。然而，就像上面的示例代码一样，如果您将参数作为 ArrayList 本身而不为内部 ArrayList 提供泛型类型，那么您将获得完美的输出！

# security - DevExpress XAF 应用程序的安全方法

> ID：11701687
> 
> 赞同：0
> 
> 时间：2012-07-28T14:05:09.390
> 
> 标签：security, devexpress, xaf

我正在使用 DevEx eXpressApp 框架开发项目管理类型的应用程序。我已经使用它将近一年了，但现在才开始使用它的安全模型，并且希望在定义实现需求的方法方面得到一些帮助。

我有两个课程：项目和任务。Project 包含一个子 XPCollection (Property) 的 Tasks（命名为 Tasks），这样我就可以输入 Project.Tasks.Add(Task t); 我需要做的就是想出一种方法，让用户能够查看和编辑任务集合中的特定任务。作为管理员用户，我需要一种将用户 1“分配”到项目 P1 的任务 1 和 3 以及项目 P2 的任务 4 的方法。然后我会 - 例如 - 将用户 2 分配给项目 P1 的任务 2 和 P2 的任务 1-3 将一直有新项目，所以我需要一种灵活的方式来临时分配/取消分配用户应用。

1.  项目一

    *   任务 1 - 用户 1
    *   任务 2 - 用户 2
    *   任务 3 - 用户 1
2.  项目 2

    *   任务 1 - 用户 2
    *   任务 2 - 用户 2
    *   任务 3 - 用户 2
    *   任务 4 - 用户 1

当用户 1 登录并单击项目 1（在 ListandDetailView 中）时，他们将只能看到分配给他们的任务。用户 2 也是如此。两个用户都不会看到任一项目的整个任务集。

我创建了一个虚拟项目，只能到达每个用户看到所有任务或看不到任何任务的地步。我认为对象权限（使用标准）方法是要走的路，但想不出要使用什么标准。

我对与安全模型相关的设计建议持开放态度。角色/组/新类等。

但请忽略此处未提及的任何可能的应用程序设计问题，例如“任务之间的依赖关系等……”我有一个非常具体的要求。

请帮忙！

额外的随机信息以防万一。

1.  你运行的是什么版本的软件？DevExpress 12.1 (vx2)
2.  你的操作系统是什么？视窗服务器 2008
3.  你到底想做什么却行不通？在应用程序中设置安全性以限制登录用户查看对象子集合中特定项目的能力
4.  问题是统一的还是不稳定的？制服
5.  确切的错误信息是什么？还没有错误；到目前为止，我已经弄清楚如何显示集合中的所有项目或不显示
6.  它是什么时候出现的？不适用
7.  你究竟没有“得到”什么？如何配置安全模型以实现我的要求
8.  您能否提供示例代码，最好是出现错误的行错误？还没有任何代码；只需选择各种读/写/导航等...复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:04:14.083

你有两个选择

*   [使用此处记录](http://documentation.devexpress.com/#Xaf/CustomDocument3366)的“新”安全性并使用“读取”对象权限（如您所建议的那样），其标准类似于`Task.User = CurrentUserId()`
*   [使用此处描述的方法](http://documentation.devexpress.com/#Xaf/CustomDocument2652)处理 ViewControllers 的过滤，该方法也具有与旧（11.2 之前）安全系统一起使用的优点。

第一种方法更可取，但第二种方法为您提供更多控制权，如果您确定任务“所有权”的规则过于复杂而无法通过简单标准来描述，则可能会更好。

# javascript - Javascript：connection.query 函数打破了我的 for 循环

> ID：11701699
> 
> 赞同：0
> 
> 时间：2012-07-28T14:07:18.810
> 
> 标签：javascript, node.js, loops

我在我的 for 循环的第一次（也是唯一一次）执行时评论了这些值。我做什么似乎并不重要......在connection.query之后，我的for循环总是被赋予一个逃避循环的值。不知道为什么。我可以提供更多的例子。任何人都知道可能发生了什么以及我如何解决这个问题？这是一个有这个问题的代码片段。我正在使用的 node.js 的 mysql 插件在这里

[https://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)

```
for (j=0;j<rows[i].movelimit;j++){
            //j=0
               sql2="SELECT x, y, land FROM map WHERE collision = 0 AND x>"+(lastX-55)+" AND x<"+(lastX+55)+" AND y>"+(lastY-55)+" AND y<"+(lastY+55)+" AND land='"+rows[i].land+"'"+restrictions;
               connection.query(sql2, function(err, move, fields) {
            //j=rows[i]movelimit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:21:42.033

它似乎是一个异步回调。因此，`j`超出回调函数范围的循环变量将始终计算为在循环结束之前分配的最后一个值。另请参阅[javascript 以了解循环意外行为](https://stackoverflow.com/q/3170589/1048572)或[循环内的 JavaScript 闭包——简单实用的示例](https://stackoverflow.com/q/750486/1048572)。

使用[闭包](https://stackoverflow.com/q/111102/1048572)：

```
function getCallbackFn(index) {
    return function(err, move, fields) {
        ....
        // "index" will always point to the function argument
    };
}
for (j=0;j<rows[i].movelimit;j++) {
    var sql2 = ...
    connection.query(sql2, getCallbackFn(j));
} 
```

更短的内联 IEFE：

```
for (j=0;j<rows[i].movelimit;j++) (function(j){
    var sql2 = ...
    connection.query(sql2, function(err, move, fields) {
        ....
        // "j" points to the function argument
    });
})(j); 
```

# c# - c#中的启动脚本

> ID：11701704
> 
> 赞同：0
> 
> 时间：2012-07-28T14:07:39.460
> 
> 标签：c#, c#-4.0, batch-file

我的应用程序需要在 Windows 启动时启动。所以我写了一个批处理文件来运行应用程序。

这是将批处理文件路径条目写入注册表的代码。

```
private void RegisterInStartup(bool isChecked)
{
    RegistryKey registryKey = Registry.CurrentUser.OpenSubKey
            ("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
    if (isChecked)
    {
        registryKey.SetValue("ApplicationName", Application.StartupPath+"\\autorun.bat");
    }
    else
    {
        registryKey.DeleteValue("ApplicationName");
    }
} 
```

这是我的批处理文件代码。

```
start File.exe
exit 
```

当我重新启动系统时，批处理文件正在执行，但应用程序 File.exe 没有执行。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:30:29.333

批处理文件不是从它所在的目录启动的。因此将找不到 File.exe。将批处理替换为 exe，或者也提供 exe 的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:16:24.320

1.  手动测试您的批处理文件。点击它。应用程序是否启动？
2.  在注册表中手动输入路径。注册表项是否有效？
3.  将注册表项导出到文件。删除注册表并再次将其添加到您的程序中，然后将其导出并比较两个文件。如果 1 和 2 在哪里工作，则注册表项必须有所不同，通过这种方式您会发现不同之处

# php - 如何在mysql的单行中显示多行中的多个数据

> ID：11701712
> 
> 赞同：1
> 
> 时间：2012-07-28T14:08:31.420
> 
> 标签：php

我有一个表，其中包含属于各个用户的多行数据。例如：

```
 regno         course      score         session     semester
          03/01/02        Mth111       60            2            3
          03/01/02        MTH222       50            2            3
          03/04/05        MTH333       40            2            3
          03/04/05        MTH111       30            2            3 
```

我希望以这种方式在每个 regno 的一行中显示特定会话和学期的值：

```
 regno                    
    03/01/02            MTH111         MTH222
                          60             50

   03/04/05             MTH333          MTH111
                          40             30 
```

我尝试使用 group by ....使用带有 mysql_fetch_assoc 的 foreach 循环来获取列标题和 group by 子句...但只显示了一行。我该如何解决。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:42:20.117

另一种解决方案是将这些记录拉入程序并按照您需要的方式对其进行格式化。

这样以后会更容易理解和调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:10:47.310

你可以使用以下

```
select regno, concat(course,'\n',score) as someName from table1 
```

或者

```
select regno, concat(course,'<br>',score) as someName from table1 
```

如果您要显示为 HTML。

编辑：Righto，我明白你现在的意思了。

```
select regno, group_concat(concat(course, '|', score)) as courses from table1 group by regno 
```

[SQLFiddle](http://sqlfiddle.com/#!2/ed555/2)的结果

```
03/01/02    Mth111|60,MTH222|50
03/04/05    MTH333|40,Mth111|30 
```

# javascript - 将 window.location.href 与 Jquery Mobile 和 RequireJS 一起使用时如何避免空白页？

> ID：11701717
> 
> 赞同：1
> 
> 时间：2012-07-28T14:08:43.213
> 
> 标签：javascript, ios, web-applications, jquery-mobile, requirejs

我正在使用 requireJS 和 Jquery Mobile。

我在我的应用程序的某些区域进行了整页刷新（例如登录/注销用户）。然而，有时我的普通香草

```
 window.location.href = 'index.cfm' 
```

我用来刷新的内容在 iPad（运行 iOS3）上不起作用。

很难确定和调试，因为我在 Mobile Safari 和桌面上没有收到**任何错误消息，这永远不会发生。**此外，它通常发生在我第一次启动应用程序时，所以我认为它与会话相关（运行 Coldfusion8/MySQL 后端）。但是由于一切都可以在桌面上运行（甚至是 IE8 ......），它不可能是一些后端问题，可以吗？

我唯一注意到的是，如果页面加载正常，标题会发生变化，然后微调器会显示正在加载页面内容。如果它不起作用，标题会改变并且微调器永远不会显示，所以我假设页面内容没有被加载。这似乎只在我登录/注销时发生，这是我使用**window.location.href的仅有的两个实例**

**问题**：
任何想法如何调试这个？这不起作用的原因可能是什么？我禁用了 pushstate 并且想知道是否仅仅是*index.cfm*与完整路径的问题，但我无法重现，所以也许有人可以给我另一个方向的提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:01:13.140

**任何想法如何调试这个？**

是的，你可以试试[weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/)。

> weinre 是一个网页调试器，例如 FireBug（用于 FireFox）和 Web Inspector（用于基于 WebKit 的浏览器），但它被设计为远程工作，特别是允许您在手机等移动设备上调试网页.

**这不起作用的原因可能是什么？**

原因不是很明显。但我建议你使用整个`href`而不是`index.cfm`. 如果您只想重新加载，请使用`location.reload([true/false])`. 或者您可以更改`pathname`. `location`查看[window.location](https://developer.mozilla.org/en/DOM/window.location)的文档以获取更多详细信息。

# javascript - Backbone.Model：多对多关系或将数组包装到集合

> ID：11701718
> 
> 赞同：0
> 
> 时间：2012-07-28T14:09:05.367
> 
> 标签：javascript, backbone.js

我有一个全局用户对象：

```
window.Session = new Session();
window.Session.fetch();
console.log(Session.toJSON()); 
```

输出：

```
{
    "username": "kyogron",
    "email": "some.email@example.org",
    "contacts": [
        { 
            "username": "joe",
            "email": "joe@example.org"
        },
        {
            "username": "george",
            "email": "george@example.org"
        }
    ]
} 
```

我现在将添加和删除联系人，就像我们使用 Backbone.Collection 一样。我是否有可能将“联系人”数组包装在提供相同方法但仍使属性可保存的集合中？

问候

**更新：**

目前，我试图弄清楚 Backbone 的“设置”是如何工作的。当我理解它时，我可以检查我们是否有一个数组，而不仅仅是创建一个新的 Backbone.Collection。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:58:51.750

我假设您在谈论嵌套集合。有关如何创建嵌套集合的选项，请参阅此[答案](https://stackoverflow.com/a/7289124/1043012)。

# c# - WPF DataGrid 中的某些列未绑定

> ID：11701719
> 
> 赞同：0
> 
> 时间：2012-07-28T14:09:06.453
> 
> 标签：c#, wpfdatagrid

我正在尝试将数据从 sql server 绑定到 WPF Datagrid，但不幸的是，有些列正确绑定，而有些则没有。我有这段用于数据绑定的代码..

```
 SqlConnection cn;
    SqlDataAdapter da;
    DataSet ds;

    public Window1()
    {
        InitializeComponent();
        cn = new SqlConnection ("Connection String");
        cn.Open();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        da = new SqlDataAdapter("Select * from table_1",cn);
        ds = new DataSet();
        da.Fill(ds);
        dataGrid1.ItemsSource = ds.Tables[0].DefaultView;
    } 
```

帮助 Pllllllllllllzzzzzzzz

这是XML

```
<Window
x:Class="Smart.Window1" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Smart"
Loaded="Window_Loaded"
Height="779"
Width="1180">
<Grid>
    <Grid.ColumnDefinitions></Grid.ColumnDefinitions>
    <DataGrid
        AutoGenerateColumns="True"
        Name="dataGrid1"
        IsReadOnly="True"
        Height="870"
        Width="1063"
        Margin="104.5,85,0,0"
        VerticalAlignment="Top"
        HorizontalAlignment="Left"
        Grid.Row="0"
        Grid.Column="0"
        FontSize="15" /> 
```

……

这是我的表单数据网格的图像预览

[数据网格](http://s13.postimage.org/g2926xgx3/image.jpg)

现在您可以看到除第 3,6 和 7 列之外的所有列都正确显示结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T21:24:05.400

我不知道解决方案，但是在遇到这样的问题后，我注意到列标题名称中带有“.”、“/”之类的符号，并且都消失了。摆脱这些符号将解决问题。

# javascript - 重用代码淡入淡出元素，这样我就不必重复我的代码

> ID：11701722
> 
> 赞同：2
> 
> 时间：2012-07-28T14:09:43.940
> 
> 标签：javascript, jquery, dialog

我有一个带有链接的 div，单击时应该在 div 本身上方/内部打开一个带有淡入和淡出的 jQuery 对话框。

我试图用这张图片来举例说明：http: [//img593.imageshack.us/img593/9852/exampled.jpg](http://img593.imageshack.us/img593/9852/exampled.jpg)

**HTML**

```
<div id="dialog" title="Basic dialog" style="display: none">Add to cart</div> 
```

**jQuery**

```
$('.div').click(function(){
   $('#dialog').fadeToggle();
}); 
```

**CSS**

```
.div{
    background-color: #fff;
    border: 1px solid #FFECA2;
    width: 123px;
    text-align: center;
    padding: 3px 9px;
    position:relative;
}

#dialog {
    display:block;
    position:absolute;
    display:none;
    left:0; top:0;
    width:100%; height:100%;
    background-color: #FFFEDF;
    border: 1px solid #FFECA2;
    width: 123px;
    text-align: center;
    padding: 3px 9px;
}​ 
```

到目前为止，我已经整理了一个小提琴：http: [//jsfiddle.net/725Me/](http://jsfiddle.net/725Me/)

现在，问题是：如果我有**很多 div 元素**，我是否必须定义

`<div id="dialog"> Add to cart </div>`每个div？是否可以只定义一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:13:01.757

ID 必须是*唯一的*，您可以改用类并尝试以下操作：

```
$('.div').click(function() {
    $(this).find('.dialog').fadeToggle();
}) 
```

[演示](http://jsfiddle.net/725Me/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:12:08.483

**更新答案：**

如果您不想`<div class="dialog">Add to cart</div>`为每个 div 定义标记，您可以使用 jQuery 在第一次单击每个 div 时应用它。（请注意，我将 ID 更改`dialog`为一个类`dialog`。ID 必须对每个元素都是唯一的，如果我们要为每个 div 重用此代码，这将不起作用）。

当一个 div 被点击时，我们检查这个`dialog`类是否已经被添加，否则我们追加它。然后我们`fadeToggle()`像往常一样。

像这样的东西：

```
$('.div').click(function() {
    if ($(".dialog", this).length === 0) {
        $("<div class=\"dialog\">Add to cart</div>").appendTo(this);
    }
    $(".dialog", this).fadeToggle();
})​; 
```

您的标记会更简单一些：

```
<div class="div">
    lorem ipsum dolor sit amete
</div>
<div class="div">
    lorem ipsum dolor sit amete
</div>
<div class="div">
    lorem ipsum dolor sit amete
</div>​ 
```

**一个工作示例：http:** [//jsfiddle.net/725Me/4/](http://jsfiddle.net/725Me/4/)

# android - SurfaceView - 检测输入时位图出现故障

> ID：11701723
> 
> 赞同：1
> 
> 时间：2012-07-28T14:09:46.727
> 
> 标签：android, multithreading, bitmap, surfaceview, android-canvas

我通过扩展`SurfaceView`类和`Thread`类似于 Android 示例中的月球着陆器示例的类，在 Android 中创建了一个游戏循环。现在我只是想找到一种方法让用户在屏幕上拖动位图，`onTouchEvent`以接收有关触摸位置的信息，然后查看它是否在我的一个位图的范围内并相应地移动该位图的 X 和 Y 位置. 这有时有效，但在其他时候它可能会将图像移动到我触摸的位置，即使它远远超出了它的范围，只要我按下靠近其他图像。

我不知道这种错误行为是从哪里来的，我还没有实现任何减慢线程速度的方法，以便它不使用最大 CPU - 这是否会导致产生这些结果的滞后？如果有人能对此有所了解，我将不胜感激。

我正在获取用户输入并传递给自定义方法`handleAction'(actionName)'`

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    // TODO Auto-generated method stub
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        thread.handleActionDown((int) event.getX(), (int)event.getY());
    }
    if (event.getAction() == MotionEvent.ACTION_MOVE) {
        if (thread.isTouched()) {
            thread.handleActionMove((int) event.getX(), (int) event.getY());
        }   
    }
    if (event.getAction() == MotionEvent.ACTION_UP) {
        if (thread.isTouched()) {
            thread.handleActionUp();
        }
    }       
    return true;
} 
```

这是我的处理程序方法：

`tizer`是位图，TizerX & Y 是其 X 和 Y 位置的类变量，对于`ball`.

```
public void handleActionDown(int eventX, int eventY) {
    if (eventX >= (TizerX - tizer.getWidth() / 2) && (eventX <= (TizerX + tizer.getWidth() / 2))) {
        if (eventY >= (TizerY - tizer.getHeight() / 2) && (TizerY <= (TizerY + tizer.getHeight() / 2))) {
            setTouched(true);
            if(getBitmapTouched() == "") {
                setBitmapTouched("tizer");
            }               
        } else {
            setTouched(false);
            setBitmapTouched(null);
        }
    } else if (eventX >= (BallX - ball.getWidth() / 2) && (eventX <= (BallX + ball.getWidth() / 2))) {
        if (eventY >= (BallY - ball.getHeight() / 2) && (BallY <= (BallY + ball.getHeight() / 2))) {
            setTouched(true);
            if(getBitmapTouched() == "") {
                setBitmapTouched("ball");
            }   
        } else {
            setTouched(false);
            setBitmapTouched("");
        }
    } else {
        setTouched(false);
        setBitmapTouched("");
    }
}

public void handleActionUp() {
    // TODO Auto-generated method stub
    setTouched(false);
    setBitmapTouched("");
}

public void handleActionMove(int eventX, int eventY) {
    if(isTouched()) {
        if(getBitmapTouched() == "tizer") {
            setTizerX(eventX);
            setTizerY(eventY);
        } else if (getBitmapTouched() == "ball") {
            setBallX(eventX);
            setBallY(eventY);
        }           
    } 
```

我的线程不断调用该`doDraw`方法：

```
private void doDraw(Canvas canvas) {
    // Draw the background image. Operations on the Canvas accumulate
    // so this is like clearing the screen.
    canvas.drawColor(Color.BLACK);
    canvas.drawBitmap(testBackgroundImage, 0, 0, null);
    canvas.drawBitmap(tizer, TizerX - (tizer.getWidth() / 2), TizerY - (tizer.getHeight() / 2), null);
    canvas.drawBitmap(ball, BallX - (ball.getWidth() / 2), BallY - (ball.getHeight() / 2), null);
} 
```

尽管通过互联网上的无数示例和 Stack Overflow 以正确的方式查看是否已触摸位图，但我仍然没有把它弄好，我在 LogCat 中没有收到错误，所以我没有其他任何东西展示一下，如果您设法在代码中发现一些奇怪的东西，请告诉我。

# c#-4.0 - 如何使用 c# 获取 visio 工作流程图中的线条样式？

> ID：11701725
> 
> 赞同：2
> 
> 时间：2012-07-28T14:09:57.077
> 
> 标签：c#-4.0, automation, visio

```
var line = shape.Cells["ConLineRouteExt"].FormulaU; //0：Default，1:Straight，2：Curved 
```

我可以获得线路路线，但我怎样才能获得线型属性？

例如：直角或直角，因为默认情况下我无法区分它们

谢谢你的帮助 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T17:41:13.997

这就是我设置它的方式：

```
connector.CellsU["ShapeRouteStyle"].ResultIUForce = (double)Visio.VisCellVals.visLORouteCenterToCenter;  // or .visLORouteRightAngle 
```

我想你可以这样读：

```
var lineStyle = shape.CellsU["ShapeRouteStyle"].FormulaU; 
```

请参阅[http://office.microsoft.com/en-us/visio-help/HV080950301.aspx](http://office.microsoft.com/en-us/visio-help/HV080950301.aspx)。

# android - ICS 中的 AsyncTask：java.util.concurrent.Rejected 执行异常

> ID：11701726
> 
> 赞同：1
> 
> 时间：2012-07-28T14:10:04.800
> 
> 标签：android, concurrency, android-asynctask

[我遇到了类似于AsyncTask、 RejectedExecutionException 和 Task Limit](https://stackoverflow.com/questions/2492909/asynctask-rejectedexecutionexception-and-task-limit)的此类异常，以及“获取代码并添加到我的包”。我的问题是：这是正确的答案，有人有其他官方解决方案吗？

java.util.concurrent.RejectedExecutionException：任务 android.os。**AsyncTask** $3@416cd2e0 从 java.util.concurrent.ThreadPoolExecutor@4101be78 被拒绝[正在运行，池大小 = 128，活动线程 = 128，排队任务 = 10，已完成任务 = 53]

```
 updateTimer.schedule(updateTask, 500, 3000); 
```

...

```
 updateTask = new TimerTask() {

        public void run()
        {
            updateHandler.sendMessage(msg);
        }

    }; 
```

...

```
 updateHandler = new Handler() {

        public void handleMessage(Message msg)
        {
            updateAsync();
        }

    }; 
```

...

```
 new AsyncTask<Void, Void, Void>() {

        protected Void doInBackground(Void... params)
        {
            retrieveStatus();
            return null;
        }

        protected void onPostExecute(Void result)
        {
            super.onPostExecute(result);
            updateStatusUi();// !!!?

        }

    }.execute(); 
```

* * *

```
 updateTask = new TimerTask() {

        public void run()
        {
                retrieveStatus();
                getActivity().runOnUiThread(new Runnable() {

                    public void run()
                    {
                        updateStatusUi();
                    }

                });
        }

    }; 
```

IN ICS：大约 10 次后，它不再更新。你能给我一个演示，这样我就可以通过一些严格的测试，比如： MainActivity: open(), close(), ...

PS myAsyncTask.executeOnExecutor(MyAsyncTask.SERIAL_EXECUTOR, [params] ); 将工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:23:51.360

首先，您每 500 毫秒分叉一个新线程。在任何操作系统上，在任何编程语言中，这都非常糟糕。

其次，您正在分叉另一个线程（您的`TimerTask`），即将消息发回主应用程序线程，即转身并分叉`AsyncTask`. 这是没有意义的。

如果您要使用 a `TimerTask`，只需`retrieveStatus()`从您的`run()`方法调用，然后用于在主应用程序线程上`runOnUiThread()`执行。`updateStatusUi()`现在您只使用一个后台线程 (the `TimerTask`) 并引入更少的开销来实现相同的目的。

或者，考虑实现自己的`ScheduledExecutorService`而不是使用`TimerTask`.

# php - XML 输出错误 - PHP

> ID：11701729
> 
> 赞同：0
> 
> 时间：2012-07-28T14:10:44.710
> 
> 标签：php, xml

我想在 php 文件（如 task.php）中创建一个 xml 文件（linkler.xml），并在这个 php 文件上为 android 应用程序读/写 xml。

但我收到错误：

![在此处输入图像描述](../Images/548401515e13db0882eb35bfff8905dd.png)

[http://i.stack.imgur.com/loumJ.png](https://i.stack.imgur.com/loumJ.png)

同样在xml文件错误中：

![在此处输入图像描述](../Images/0f4c04af7d328b54fdb53090b5a4c3af.png)

[http://i.stack.imgur.com/nWSwD.png](https://i.stack.imgur.com/nWSwD.png)

我该如何纠正这个？谢谢

```
<?php header('Content-type: text/xml'); 
        if(isset($_POST['url'])) { 
           include('curl.php'); 
           include('youtube.php'); 
           $tube = new youtube(); 
           $links = $tube->get($_POST['url']); 
           if($links) { 
              $dosya_adi = "linkler.xml"; 
              $dosya = fopen ($dosya_adi , 'w') or die ("Dosya yok");
              $xml = "<?xml version=\"1.0\" charset=\"utf-8\"?>\n";
              $xml.='<vidlinks>'; 
              $xml.='<tur>'.$links[0][ext].'</tur>'; 
              $xml.='<link>'.$links[0][url].'</link>'; 
              $xml.='<kalite>'.$links[0][type].'</kalite>'; 
              $xml.='</vidlinks>';
              fputs ( $dosya ,$xml ) ; 
              fclose ($dosya);  
              echo file_get_contents("http://tizentr.net/ara/linkler.xml");
        ?>
        <?php } else {
           echo $tube->error;
        } 
     }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:21:34.343

尝试总结所有代码：

```
<?php
ob_start(); 
<--code here--> 
$output = ob_get_contents();
ob_end_clean();
echo $output;
header('Content-type: text/xml');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:22:58.980

XML 声明中不应该有字符集字，而是编码字。所以你应该使用

```
<?xml version="1.0" encoding="utf-8"?> 
```

在您形成的 XML 中。

您也可以查看 XML 指南[http://xmlwriter.net/xml_guide/xml_declaration.shtml](http://xmlwriter.net/xml_guide/xml_declaration.shtml)

这应该可以修复您的 XML 错误；关于第一个错误检查是否在 curl.php 和 youtube.php 文件中有一些输出，如果有，请将其删除。

# java - 如何在 Java 中自动填写 PDF 表单

> ID：11701732
> 
> 赞同：27
> 
> 时间：2012-07-28T14:11:17.993
> 
> 标签：java, forms, pdf, itext

我正在为我住的地方附近的食品储藏室做一些“无偿”开发。他们被表格和文书工作所淹没，我想开发一个系统，该系统可以简单地从他们的 MySQL 服务器（我在以前的项目中为他们设置）读取数据，并将数据输入到他们需要的所有表格的 PDF 版本中填写。这将极大地帮助他们并节省大量时间，并消除填写这些表格时出现的许多人为错误。

对 PDF 文件的内部一无所知，*我*可以预见两种途径：

*   **更难的方法：可以扫描纸质文档，将其转换为 PDF，然后通过简单地说“将除***blah*之外的文本添加到以下 (x,y) 坐标...”来“填写”PDF 的软件。 ; 或者
*   **更简单的方法**：PDF 规范已经允许构建可以填写的“字段”；这样，我只需编写代码“将文本摘录添加到名为 * *address_value* *... 的字段中”等。

所以我的第一个问题是：我面临两种途径中的哪一种？PDF 是否有“字段”的概念，或者我是否需要通过告诉 PDF 库放置数据的像素坐标来“填写”这些文档？

其次，我显然需要一个开源（和 Java）库来做到这一点。iText 似乎是一个好的开始，但我听说它可能很难使用。任何人都可以在这里提出一些想法或一般性建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-28T15:26:41.397

您可以使用 FDF（表单数据格式）技术轻松地将数据合并到 PDF 的字段中。

Adobe 提供了一个库来做到这一点： [Acrobat Forms Data Format (FDF) Toolkit](http://www.adobe.com/devnet/acrobat/fdftoolkit.html)

也可以使用[Apache PDFBox来做到这一点。](http://pdfbox.apache.org/index.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-11T10:48:53.613

请查看[StackOverflow 上免费电子书 The Best iText Questions](http://pages.itextpdf.com/ebook-stackoverflow-questions.html)中有关交互式表单的章节。它捆绑了以下问题的答案：

*   [如何以编程方式填写pdf文件？](https://stackoverflow.com/questions/3108704/how-to-fill-out-a-pdf-file-programatically)
*   [如何使用 iTextSharp 展平 XFA PDF 表单？](https://stackoverflow.com/questions/27067250/how-can-i-flatten-a-xfa-pdf-form-using-itextsharp)
*   [使用 itextsharp 检查 pdf 复选框](https://stackoverflow.com/questions/19698771/checking-off-pdf-checkbox-with-itextsharp)
*   [如何在第二页上继续现场输出？](https://stackoverflow.com/questions/26853894/how-to-continue-field-output-on-a-second-page)
*   [找出填写pdf文件的必填字段](https://stackoverflow.com/questions/21838945/finding-out-required-fields-to-fill-in-pdf-file)
*   等等...

或者您可以观看[此视频](https://www.youtube.com/watch?v=6YwDME0Fl1c)，其中我将逐步解释[如何使用表格进行报告。](http://developers.itextpdf.com/examples/form-examples/using-forms-reporting)

参见例如：

```
public void manipulatePdf(String src, String dest) throws DocumentException, IOException {
    PdfReader reader = new PdfReader(src);
    PdfStamper stamper = new PdfStamper(reader,
            new FileOutputStream(dest));
    AcroFields fields = stamper.getAcroFields();
    fields.setField("name", "CALIFORNIA");
    fields.setField("abbr", "CA");
    fields.setField("capital", "Sacramento");
    fields.setField("city", "Los Angeles");
    fields.setField("population", "36,961,664");
    fields.setField("surface", "163,707");
    fields.setField("timezone1", "PT (UTC-8)");
    fields.setField("timezone2", "-");
    fields.setField("dst", "YES");
    stamper.setFormFlattening(true);
    stamper.close();
    reader.close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-14T18:54:52.823

```
public void fillPDF()
{

     try {
            PDDocument pDDocument = PDDocument.load(new File("D:/pdf/pdfform.pdf")); // pdfform.pdf is input file
            PDAcroForm pDAcroForm = pDDocument.getDocumentCatalog().getAcroForm();

         PDField field = pDAcroForm.getField("Given Name Text Box"); 

          field.setValue("Kalyan"); 
          field = pDAcroForm.getField("Family Name Text Box");
          field.setValue("Gutta");
          field = pDAcroForm.getField("Country Combo Box");
          field.setValue("India");
          System.out.println("country combo" );
          field = pDAcroForm.getField(" Driving License Check Box");

          field = pDAcroForm.getField("Favourite Colour List Box");
        System.out.println("country combo"+ field.isRequired());
          pDDocument.save("D:/pdf/pdf-java-output.pdf");
             pDDocument.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
} 
```

# ruby-on-rails-3.2 - 在 Mountain Lion 上升级后，postgresql 不起作用

> ID：11701735
> 
> 赞同：4
> 
> 时间：2012-07-28T14:11:32.133
> 
> 标签：ruby-on-rails-3.2, postgresql-9.1, osx-mountain-lion

我刚刚将我的 Macbook 更新为 Mountain Lion，但现在 postgresql 不起作用。当我让 rails 服务器运行时，我收到以下错误消息：

```
could not connect to server: No such file or directory (PG::Error)
        Is the server running locally and accepting
        connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

-UPDATE- 现在我收到以下错误消息：

```
$ rails s
=> Booting Mongrel
=> Rails 3.1.0 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server

Started GET "/" for 127.0.0.1 at 2012-07-29 11:54:46 +0200

PGError (could not connect to server: Connection refused
Is the server running on host "localhost" (::1) and accepting
TCP/IP connections on port 5432?
could not connect to server: Connection refused
Is the server running on host "localhost" (127.0.0.1) and accepting
TCP/IP connections on port 5432?
could not connect to server: Connection refused
Is the server running on host "localhost" (fe80::1) and accepting
TCP/IP connections on port 5432?
): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:19:30.900

您是否安装了 make、autconf、automake、binutils、bison、m4 或安装软件包以构建内核或重新安装 ruby​​: [pg gem '0.14.0' on Mountain Lion failed](https://stackoverflow.com/questions/11711394/pg-gem-0-14-0-on-mountain-lion-fails)。

# java - Java - 方法中的 NullPointerException

> ID：11701736
> 
> 赞同：0
> 
> 时间：2012-07-28T14:11:37.560
> 
> 标签：java, nullpointerexception

我正在编写一个可以管理大学学生的课程和科目的程序。我向您展示的课程的问题是，当方法

*公共 CorsoStudi（字符串 unNomeCorso，ArrayList unElencoMaterie，int unIdCorso）*

被称为它会在*elencoEsamiDati.add(q) 行抛出 NullPointerException；*. 所以，问题可能出在这一行和之后的行上：

*EsameDato q = new EsameDato(unElencoMaterie.get(contatore), 0);*

Eclipse 不建议编写代码时出错。

**创建者.java**

```
import java.util.ArrayList;
import java.util.Scanner;

public class Creatore {

int counterStudenti = 0;
int counterMaterie = 0;
int counterCorsi = 0;
//int counterEsami = 0;
ArrayList<Studente> listaStudenti = new ArrayList<Studente>();
ArrayList<Materia> listaMaterie = new ArrayList<Materia>();
ArrayList<CorsoStudi> listaCorsi = new ArrayList<CorsoStudi>();
//ArrayList<EsameDato> listaEsami = new ArrayList<EsameDato>();

public void iscriviStudente(String nomeStudente, String cognomeStudente, CorsoStudi corsoStudente){
    listaStudenti.add(new Studente(nomeStudente, cognomeStudente, counterStudenti, corsoStudente));
    counterStudenti++;
}

public void reimmatricolaStudente(int unaMatricola, int unIdCorso){
    int c = 0;
    CorsoStudi unCorso = null;
    for(c = 0; c < listaCorsi.size(); c++){
        if(listaCorsi.get(c).getIdCorso() == unIdCorso)
            unCorso = listaCorsi.get(c);
    }
    int contatore = 0;
    for(contatore = 0; contatore < listaStudenti.size(); contatore++)
        if(listaStudenti.get(contatore).getMatricola() == unaMatricola){
            iscriviStudente(listaStudenti.get(contatore).getNome(), listaStudenti.get(contatore).getCognome(), unCorso);
            rimuoviStudente(unaMatricola);
        };
}

public void rimuoviStudente(int matricola){
    int contatore;
    for(contatore = 0; contatore < listaStudenti.size(); contatore++){
        if(listaStudenti.get(contatore).getMatricola() == matricola)
            listaStudenti.remove(contatore);
    }
}

public Materia creaMateria(String nomeMateria, int crediti){
    listaMaterie.add(new Materia( nomeMateria, crediti, counterMaterie));
    counterMaterie++;
    return listaMaterie.get(counterMaterie - 1);
}

public void creaCorsoStudi(String nomeCorso, ArrayList<Materia> materieCorso){
    CorsoStudi q = new CorsoStudi( nomeCorso, materieCorso, counterCorsi);
    listaCorsi.add(q);
    counterCorsi++;
}

public ArrayList<Studente> cercaStudente(int opzione, String pattern){
    int contatore = 0;
    ArrayList<Studente> listaRicercati = new ArrayList<Studente>();
    //opzione 1 = ricerca per nome
    if(opzione == 1)
        for(contatore = 0; contatore < listaStudenti.size(); contatore++){
            if(listaStudenti.get(contatore).getNome().equalsIgnoreCase(pattern))
                listaRicercati.add(listaStudenti.get(contatore));
        };
    //opzione 2 = ricerca per cognome
    if(opzione == 2)
        for(contatore = 0; contatore < listaStudenti.size(); contatore++){
            if(listaStudenti.get(contatore).getCognome().equalsIgnoreCase(pattern))
                listaRicercati.add(listaStudenti.get(contatore));
    };
    //opzione 3 = ricerca per matricola
    if(opzione == 3)
        for(contatore = 0; contatore < listaStudenti.size(); contatore++){
            if(listaStudenti.get(contatore).getMatricola() == Integer.parseInt(pattern))
                listaRicercati.add(listaStudenti.get(contatore));
    };
    //opzione 4 = ricerca per corsoStudi
    if(opzione == 4)
        for(contatore = 0; contatore < listaStudenti.size(); contatore++){
            if(listaStudenti.get(contatore).getCorsoStudi().getIdCorso() == Integer.parseInt(pattern))
                listaRicercati.add(listaStudenti.get(contatore));
    };

    return listaRicercati;
}

public Materia materiaDaId(int id){
    int c = 0;
    Materia materiaDaRitornare = null;
    for(c = 0; c < listaMaterie.size(); c++){
        if(listaMaterie.get(c).getIdMateria() == id)
            materiaDaRitornare = listaMaterie.get(c);
    }
    return materiaDaRitornare;
}
} 
```

**CorsoStudi.java**

```
import java.util.ArrayList;
import java.util.Scanner;

public class CorsoStudi {

private String nomeCorso;
private int idCorso;
private ArrayList<Materia> elencoMaterie;
private ArrayList<EsameDato> elencoEsamiDati;

public CorsoStudi(String unNomeCorso, ArrayList<Materia> unElencoMaterie, int unIdCorso){
    nomeCorso = unNomeCorso;
    elencoMaterie = unElencoMaterie;
    idCorso = unIdCorso;
    int contatore = 0;
    //EsameDato q = null;
    for(contatore = 0; contatore < unElencoMaterie.size(); contatore++){
        EsameDato q = new EsameDato(unElencoMaterie.get(contatore), 0);
        elencoEsamiDati.add(q);
    };
}

public String getNomeCorso(){
    return nomeCorso;
}

public int getIdCorso(){
    return idCorso;
}

public ArrayList<Materia> getElencoMaterie(){
    return elencoMaterie;
}

public ArrayList<EsameDato> getElencoEsamiDati(){
    return elencoEsamiDati;
}

public String toString(){
    String s = "";
    s = s + "Ecco le materie di questo Corso di Studi:\n";
    int c = 0;
    for(c= 0; c < elencoMaterie.size(); c++){
        s = s + elencoMaterie.get(c).getIdMateria() + " "; 
        s = s + elencoMaterie.get(c).getNomeMateria() + " (";
        s = s + elencoMaterie.get(c).getCrediti() + " crediti)\n";
    }
    return s;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:14:36.697

您尚未初始化该字段`elencoEsamiDati`，因此实际值为`null`。

在向 an 添加元素之前，`ArrayList`您需要创建它：

```
private ArrayList<EsameDato> elencoEsamiDati = new ArrayList<EsameDato>(); 
```

您可能还需要初始化其他字段。

BTW it is not a good idea to use your own language when programming, use English instead.

# ipad - 在 touchend 中获取 jquery ui 对象的引用

> ID：11701743
> 
> 赞同：0
> 
> 时间：2012-07-28T14:12:57.920
> 
> 标签：ipad, jquery-ui, jquery-ui-draggable

我正在使用[https://github.com/furf/jquery-ui-touch-punch](https://github.com/furf/jquery-ui-touch-punch)来映射触摸事件。jQuery UI droppable 具有以下代码，其中自动传递事件和 ui 对象。我想编写一个自定义处理程序，我可以将相同的对象传递给它。有人能建议我如何在 IPAD 上的 touchend 事件中获取 ui 对象的引用吗？这样我就可以对桌面和 IPAD 使用相同的拖放功能。

```
drop: function(event, ui) {
        dropFunction(event, ui);
    } 
```

所以在 touchend 事件上我可以调用 dropFunction(event,ui)

附加信息：

我正在尝试实现从表行拖放到 jstree。如果我只使用 Touch Punch 而不进行修改，我也可以进行拖放操作。当我使用下面的代码读取值时，它适用于桌面浏览器，但不适用于 IPAD。

```
var newOrgId = $('#ohTreeDiv .jstree-hovered').find('span:last').text() 
```

使用桌面浏览器时，jstree-hovered 类会自动添加到悬停节点，但是这不会添加到 Ipad 上，所以我在 touchend 方法中手动添加这个类。在这一步之后，我什至添加了悬停类。当 touchend 发生时，看起来 drop 没有被调用。

在 jstree 的目标节点上拖动元素后，我必须点击它才能触发放置。@弗雷德里克哈米迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:34:05.477

下面是 touchend 代码，我必须对其进行一些修改以使其与 jstree 一起使用，以便我可以使用 jstree-hovered 类读取值。我想添加的一个提示是在测试时删除所有警报，因为它会干扰我们使用 jQuery 读取的值。

```
 c._touchEnd = function(f) {

    var i = f.originalEvent.changedTouches[0];
    var elementFromPoint1 = document.elementFromPoint(i.clientX, i.clientY);
    var id=elementFromPoint1.id;
    var str=new String(id);
    var pos=str.indexOf("dropTarget");
    if(pos>=0){
        elementFromPoint1.className="jstree-hovered";
        }
    if (!a) {
        return;
    }
    d(f, "mouseup");
    d(f, "mouseout");
    if (!this._touchMoved) {
        d(f, "click");
    }
    a = false;
}; 
```

# php - 如何从数据库中按类别显示数据？

> ID：11701746
> 
> 赞同：3
> 
> 时间：2012-07-28T14:13:02.383
> 
> 标签：php, mysql

所以我的网站允许用户创建联系人列表，现在我添加了用户命名的类别。我目前正在使用从我的 SQL 查询生成的关联数组的 while 循环显示联系人列表。

所以它看起来像这样：

```
Contacts:
Contact 1 
Contact 2
Contact 3 
```

现在我在数据库中有一个用于联系人类别的新列，我不知道如何对它们进行排序，并显示联系人类别的名称。我试图让它看起来像这样：

```
Contacts:
Category 1
Contact 1
Contact 2
Contact 3
Category 2
Contact 1
Contact 2
Contact 3 
```

如果您需要，我的实际代码：

```
<?php
                //START CONTACTS LOOP       
            $contacts_query = "SELECT id, name FROM contacts WHERE ownerid = '$userID' ORDER BY `name` ASC";
            $run_contacts_query = mysql_query($contacts_query);

            if($run_contacts_query){

                while($c_data = mysql_fetch_assoc($run_contacts_query)){
                    $id = $c_data['id'];
                    $name = $c_data['name'];
                    ?>
                    <li><a href="contact.php?id=<?=$id?>"><?=$name?></a></li>
                    <?php
                    }} //END CONTACTS LOOP 
            ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T14:28:11.640

只需检索类别并先按类别排序，然后按名称排序。并检查类别是否与上一个不同：

```
$contacts_query = "SELECT id, name, category";
$contacts_query.= " FROM contacts";
$contacts_query.= " WHERE ownerid = '$userID'";
$contacts_query.= " ORDER BY `category`, `name` ASC";

$run_contacts_query = mysql_query($contacts_query);

if($run_contacts_query) {
    $currentCategory = null;

    while($c_data = mysql_fetch_assoc($run_contacts_query)){
        if ($c_data['category'] != $currentCategory) {
            echo '<li>' . $c_data['category'] . '</li>';
            $currentCategory = $c_data['category'];
        }

        echo '<li><a href="contact.php?id=' . $id . '">' . $name . '</a></li>';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:27:54.333

我认为最好的方法是在架构中使用不同的表来存储联系人和类别。

```
 SELECT id, name FROM contact_categories WHERE ownerid = '$userID' ORDER BY `name` ASC; 
```

接着

```
 SELECT id, name FROM contacts WHERE ownerid = '$userID' and contact_categoryid = '$catid'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:29:59.143

您需要更改 sql 查询以通过其 ownerid 和类别获取联系人。

```
<?php
            //CHANGE QUERY TO       
        $contacts_query = "SELECT id, name FROM contacts WHERE ownerid = '$userID' AND category = '$category' ORDER BY `name` ASC";

        $run_contacts_query = mysql_query($contacts_query);

        if($run_contacts_query){
            //You need to echo category here
            print("<h3>".$category.</h3>");

            while($c_data = mysql_fetch_assoc($run_contacts_query)){
                $id = $c_data['id'];
                $name = $c_data['name'];
                ?>
                  <li><a href="contact.php?id=<?=$id?>"><?=$name?></a></li>
                <?php
                }} //END CONTACTS LOOP 
        ?> 
```

将类别字段添加到数据库并使用不同类别调用查询

# c# - 将孩子附加到网格，设置它的行和列

> ID：11701749
> 
> 赞同：22
> 
> 时间：2012-07-28T14:13:24.883
> 
> 标签：c#, wpf, xaml, gridview

如何将`Image`对象附加到 a`Grid`并将其设置为**Row**和**Column**？

网格是 3x3。

主文件：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="440" Width="400" ResizeMode="NoResize">
    <Window.Background>
        <ImageBrush ImageSource="C:\Users\GuyD\AppData\Local\Temporary Projects\WpfApplication1\AppResources\Background.png"></ImageBrush>
    </Window.Background>
    <Grid ShowGridLines="True" x:Name="myGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="42" />
            <RowDefinition Height="30*" />
            <RowDefinition Height="30*" />
            <RowDefinition Height="32*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="31*" />
            <ColumnDefinition Width="26*" />
            <ColumnDefinition Width="32*" />
        </Grid.ColumnDefinitions>
    </Grid>
</Window> 
```

文件后面的代码：

```
public MainWindow()
{
     InitializeComponent();
     for (int i = 0; i < 3; i++)
     {
          for (int j = 0; j < 3; j++)
          {
               Image Box = new Image();
               this.myGrid.Children.Add(Box);
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-28T14:24:13.000

Grid setter 方法是静态的。
要将它们放在第 1 行第 1 列中：

```
Image Box = new Image();
myGrid.Children.Add(Box);
Grid.SetRow(Box, 1);
Grid.SetColumn(Box, 1); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T14:24:02.130

您可以使用以下设置任何 UIElement

```
Grid.SetRow(Box, i);
Grid.SetColumn(Box, j); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T14:42:45.603

```
for (int i = 0; i < 4; i++)
      {
        for (int j = 0; j < 3; j++)
        {
           Image Box = new Image();
           this.myGrid.Children.Add(Box);
           Grid.SetRow(Box, i);
           Grid.SetColumn(Box, j);
        }
     } 
```

是的，网格是 4X3 而不是 3X3 尺寸。我希望这将有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T15:02:06.997

尝试这个：

```
public MainWindow() {
 InitializeComponent();
 for (int i = 0; i < 3; i++)
 {
      for (int j = 0; j < 3; j++)
      {
           Image Box = new Image();
           Grid.SetRow(Box, i);
           Grid.SetColumn(Box, j);
      }
 }
} 
```

# php - php中使用多维数组的递归循环

> ID：11701752
> 
> 赞同：0
> 
> 时间：2012-07-28T14:13:41.763
> 
> 标签：php

我以这种方式有一个数据库结构。

```
stopid  | parentid
2       |        1
3       |        1
5       |        2
9       |        2
8       |        2
11      |        3
11      |        9 
```

我想搜索起点和终点。那是某种排序或以编程方式搜索的东西。我有第一站作为父母身份证。最后一站为stopid。因为我必须从 1 到 11 搜索第一站，所以我将逻辑设置为从最后一站 11 开始，然后递归循环。是他们的任何逻辑。我已经尝试过但没有成功。它不需要最终所有根。我只想要任何兼容的第一个根。喜欢..

1 -> 3 -> 11 或 1 -> 2 -> 9 ->11 以这种方式...

```
extract($_POST);
echo "From :$from to $to".'<br/>';
$sql="select parentid, stopid from routes WHERE stopid = '".$to."' ";
echo $sql.'<br/>';
$result = mysql_query($sql) or die(mysql_error());
$count = mysql_num_rows($result) or die( mysql_error());
$stopid = array(); 
while( $row = mysql_fetch_array($result)) {
    $stopid[$row['stopid']][] = $row['parentid'];
}
echo '<pre>';

$countarray = count($stopid); 
while($countarray >= 1){
    foreach($stopid as $finalstop_value){
        foreach($finalstop_value as $finalstop_ky => $finalstop_vl){
            $query = "SELECT * FROM routes WHERE stopid = '".$finalstop_vl."'";
            $sql = mysql_query($query) or die(mysql_error());
            echo $query. ' Gives '.mysql_num_rows($sql).' rows...<br/>';
            while( $row = mysql_fetch_array($sql))  { 
                $new_stopid[$finalstop_vl][$row['stopid']][] = $row['parentid']; 
            }
            echo '<pre>';
            print_r($new_stopid);
                            // $stopid[$finalstop_vl][] = $new_stopid;
            $countarray--; 
        }
    }

}       
print_r($stopid);
exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:22:25.520

据我了解，您有一个 n-ary 树结构，您需要扫描它以寻找连接一些 2 个节点的路径。好吧，这是一个经典的算法问题，许多解决方案都在等着你;-)

如果您的树中没有您在帖子中未提及的特定属性，我建议您实施[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)。

# php - PHP - 将 12 小时格式时间转换为新时区时出错

> ID：11701757
> 
> 赞同：2
> 
> 时间：2012-07-28T14:14:58.357
> 
> 标签：php, time, timezone

**有时**在将 12 小时格式时间从时区转换为新时区时出现 错误

***错误：***

```
Fatal error: Uncaught exception 'Exception' with message 'DateTime::__construct(): Failed to parse time string (00:00:31 AM) at position 9 (A): The timezone could not be found in the database' in C:\xampp\php\udp.php:105
Stack trace:
#0 C:\xampp\php\udp.php(105): DateTime->__construct('00:00:31 AM', Object(DateTimeZone))
#1 {main}  thrown in C:\xampp\php\udp.php on line 105 
```

***我的代码：***

```
// $gps_time = "9:43:52"; 
$gps_time      = $time_hour.":".$time_min.":".$time_sec;
// $time_received = "01:45:04 2012-07-28"; 
$time_received = date('H:i:s Y-m-d');

$utc = new DateTimeZone("UTC"); 
$moscow = new DateTimeZone("Europe/Moscow"); 

//Instantiate both AM and PM versions of your time 
$gps_time_am = new DateTime("$gps_time AM", $utc); 
$gps_time_pm = new DateTime("$gps_time PM", $utc); 

//Received time 
$time_received = new DateTime($time_received, $moscow); 

//Change timezone to Moscow 
$gps_time_am->setTimezone($moscow); 
$gps_time_pm->setTimezone($moscow); 

//Check the difference in hours. If it's less than 1 hour difference, it's the correct one. 
if ($time_received->diff($gps_time_pm)->h < 1) { 

$correct_time = $gps_time_pm->format("H:i:s Y-m-d");
} 
else { 

$correct_time = $gps_time_am->format("H:i:s Y-m-d");
}

echo $correct_time; 
```

***问：***哪里有问题！！？
PS：上面的代码是我的 udp 套接字的一部分，从 php cli 运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T15:28:29.583

## 概括

简而言之，PHP 正在尝试（错误地，为了您的需要）读取`AM`为时区并且`AM`不是有效的时区。

* * *

## 细节

`10:39:6 AM`分成以下几部分

*   `10:39:6`它识别为`timelong24`（带秒的 24 小时格式时间）
*   `AM`它识别为`tz`（时区）。

相反，`10:39:06 AM`它正确地将整个字符串解析为`timelong12`（带秒和 AM/PM 的 12 小时格式时间）。

## 无聊的钻头

这种奇怪行为的原因在于日期解析逻辑（[source](http://lxr.php.net/xref/PHP_5_4/ext/date/lib/parse_date.re)）。相关模式是：

**时间长24**

```
't'?
[01]?[0-9] | "2"[0-4]              # hour24
[:.]
[0-5]?[0-9]                        # minute
[:.]
[0-5]?[0-9] | "60"                 # second; 
```

**时间长12**

```
"0"?[1-9] | "1"[0-2]               # hour12
[:.]
[0-5]?[0-9]                        # minute
[:.]
[0-5][0-9] | "60"                  # secondlz
[ \t]*                             # space?
([AaPp] "."? [Mm] "."?) [\000\t ]  # meridian; 
```

如您所见，为了匹配`timelong12`格式（这是我们真正想要的），时间的*秒*部分*必须*是两位数。

# c++ - c++引用函数内部函数

> ID：11701760
> 
> 赞同：0
> 
> 时间：2012-07-28T14:15:32.350
> 
> 标签：c++, scope

以下是我的场景的简化示例（这似乎很常见）；

```
#include <signal.h>

void doMath(int &x, int &y);
void signal_handler(int signal);

int main() {
  signal (SIGINT,signal_handler);
  int x = 10;
  int y;
  doMath(x,y);
  while(1);
  return 0;
}

void doMath(int &x, int &y) {
  for(int y=0; y<=x; y++) {
    cout << y << endl;
  } 
  return;
}

void signalHandler(int signal){
  doMath(x,y);
  exit(1);
} 
```

这个基本程序在屏幕上打印 1 到 10 并一直挂在那里，直到按下 CTRL+C。此时我希望 doMath() 函数再次运行。我能看到这种情况发生的唯一方法是，如果我将 x 和 y 传递给 signalhandler()，那么它就可以将它们传递给 doMath()，以及对 doMath() 函数的引用。

我的实际程序有两个 doMath() 函数和更多变量，我想要变量值的最终转储。因此，将所有这些变量传递给 signalHandler 然后传递给这两个函数似乎是一种低效的方式。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:50:15.967

我认为您需要使用全局变量。

虽然一般应避免使用全局变量，但有时别无选择。尝试尽可能少地使用并清楚地记录它们的使用：

```
#include <signal.h>

void signalHandler(int signal);
void doMath(int &x, int &y);

struct DoMathArgs {
  int x;
  int y;

  void callDoMath() { doMath(x,y); }
};

// We have to use this global variable to pass the arguments to doMath when
// the signal is caught, since the signal handler isn't passed any arguments
// that we can use for our own data.
DoMathArgs global_do_math_args;

int main() {
  signal (SIGINT,signalHandler);
  global_do_math_args.x = 10;
  global_do_math_args.callDoMath();
  doSomethingForever();
  return 0;
}

void signalHandler(int signal) {
  global_do_math_args.callDoMath();
  exit(1);
}

void doMath(int &x, int &y) {
  for(int y=0; y<=x; y++) {
    cout << y << endl;
  } 
  return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:18:33.633

一种更有效的方法是定义一个事件，在 main 中等待它，在信号中将其设置为关闭，然后在 main 中再次调用 doMath。

# asp.net-mvc-3 - 在 MVC3 中自定义布局模板

> ID：11701761
> 
> 赞同：0
> 
> 时间：2012-07-28T14:15:37.907
> 
> 标签：asp.net-mvc-3

我知道 Asp.net MVC 中有一个默认的 _Layout.cshtml 文件，就像 Asp.net 网站中的 MasterPage 一样。我可以在我的 MVC 应用程序中定义多个布局模板吗？如果是这样，如何制作？请给我一些代码示例。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:20:26.083

您可以创建多个布局页面并在不同的视图中使用它。您可以通过在视图中提及 Layout 属性来在视图中提及新的布局页面。

创建一个新的`View`并将其命名为文件夹`_AdminLayout.cshtml`下。`Views/Shared`您可以在那里为您的母版页模板创建 HTML 标记。确保您 `@RenderBody()`的布局页面中有部分，以便正常视图的内容在呈现时将在此处替换。

```
<html>
  <head>
  </head>
  <body>
      <h1>My new Layout</h1>
      @RenderBody()
  </body>
</html> 
```

如果你想在视图中使用这个布局，你可以这样做

```
@{
  Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<p>The content here will be present inside the render body section of layout</p> 
```

如果你想在默认情况下为所有视图使用新的布局而不像上面的代码那样明确提及，你可以在`Views/_ViewStart.cshtml`文件中进行

```
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
} 
```

# c++ - -pedantic 警告和 pthread_create

> ID：11701766
> 
> 赞同：1
> 
> 时间：2012-07-28T14:16:30.413
> 
> 标签：c++, pthreads, ansi, iso

我是 ansi 和 iso 世界的新手，我编译了我的程序：

```
-asni -pedantic -std=c++11 -std=c++98 
```

现在，我收到以下警告：

```
 warning: converting from 'void (NetworkSocket::*)()' to 'void* (*)(void*)' [-pedantic] 
```

对于以下行：

```
if (pthread_create(this->threadArray, NULL, (void*(*)(void*)) &NetworkSocket::threadProcedure  , (void *)this) != 0)
        { /* error */      } 
```

我怎样才能通过迂腐警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:27:21.003

pthread_create 是一个 C 函数，它期望 C 函数接受一个 void 指针，并返回一个 void 指针。因此，如果您使用 this 指针作为线程参数，您可以使用这样的 C 函数将调用分派给您的成员函数：

```
extern "C" void* startThread( void* p )
{
    static_cast< NetworkSocket* >( p )->threadProcedure();

    return 0;
} 

if ( pthread_create( this->threadArray, 0, startThread, this ) )
   ... 
```

# visual-studio-2010 - 水晶报表子报表

> ID：11701772
> 
> 赞同：0
> 
> 时间：2012-07-28T14:16:56.567
> 
> 标签：visual-studio-2010, report, subreport

我有这个疑问：

```
select idCustumer, Name, Address from Customer 
```

这给了我报告的标题，还有这个：

```
select idCustomer, Description, Sum(Total) as Total from Product group by Description 
```

第一个查询运行：

```
 idCustomer    Name     Address
     1        Phil       Fake Av. 1234
     2        John       Fake Av. 4321 
```

第二：

```
 idCustomer    Description    Sum(Total)
   1              PROD01          10
   1              PROD02          20
   2              PROD01          30 
```

当我使用一个客户生成报告时，没关系。问题在于同一报告中有 2 个或更多客户。

我做什么？

我创建了 1 个数据集，其中有 2 个表（每个查询 1 个）通过 idCustomer 链接它们。我使用这个数据集创建了一个报告，第一个表（标题）工作正常，它打印了我的四个测试客户。

然后我添加一个子报表。

```
rpt.Subreports(0).SetDataSource(subReportes.Tables(1)) 'Tables(1) is 2nd Query 
```

但这一次又一次地打印相同的信息。

我的报告：

```
 Customer: Phil  Address: Fake Av. 1234

 Order:
              PROD01          10
              PROD02          20
              PROD01          30

              Total           60

 Customer: John  Address: Fake Av. 4321

 Order:
              PROD01          10
              PROD02          20
              PROD01          30

              Total           60 
```

是否有指南或链接可以让我学习如何包含此子报告以便我得到（或者是否有另一种方法来完成此操作？）

```
 Customer: Phil  Address: Fake Av. 1234

 Order:
              PROD01          10
              PROD02          20

              Total           30    

 Customer: John  Address: Fake Av. 4321

 Order: 
              PROD01          10

              Total           10 
```

我正在使用 VS 2010 (VB)、SQL Server 2008 R2、Crystal Report 2010

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:48:19.840

你的设计是完全错误的。首先，您需要像这样在 TSQL 中编写一个过程

```
SELECT C.idCustomer CustomerId, C.Name Name, C.Address Address, P.Description Description, P.Total Total
FROM CUSTOMER C
INNER JOIN PRODUCT P
   ON C.idCustumer = P.idCustomer 
```

And add set this proc as the datasource for the report. Then you have to do a grouping for field, CustomerId in the report. After that you need to place the customer details in the group header section and the order details in the Details section. And also to get the total value for the you have to use the summary field in crystal reports

# java - Java - DefaultHighlighter.DefaultPainter 的 RGB 背景和前景色是什么？

> ID：11701775
> 
> 赞同：0
> 
> 时间：2012-07-28T14:17:16.920
> 
> 标签：java

我想知道 Java 中 DefaultHighlighter.DefaultPainter 的 RGB 背景和前景色或任何找到它们的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:21:34.050

下载一个颜色选择软件，启动你的程序，然后使用颜色选择器找出来。例如[彩色图片](http://www.iconico.com/colorpic/)

# android - android意图过滤器？

> ID：11701780
> 
> 赞同：0
> 
> 时间：2012-07-28T14:18:01.633
> 
> 标签：android, intentfilter

我感觉很愚蠢。这很清楚，但我无法解决我的问题。所以请原谅我的问题。
我的问题是关于 intenfilter。这是我的清单文件的应用程序标记：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".AlakyTestActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:label="reza"
            android:name=".A2" >
            <intent-filter >
                <action android:name="MAIN" />

                <category android:name="LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

这是我的按钮点击监听器：

```
b1 = (Button)findViewById(R.id.button1);
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent intent2 = new Intent();
                intent2.setAction("MAIN");
                intent2.addCategory("LAUNCHER");
                startActivity(intent2);
            }
        }); 
```

我认为一切都很好，但是当我运行我的代码并单击时`b1`，我得到了这个错误：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=MAIN cat=[LAUNCHER] } 
```

**编辑**：
这是 A2：

```
public class A2 extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        this.setContentView(R.layout.main2);
    }

} 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:26:11.510

请这样使用：

```
Intent intent2 = new Intent(context,A2.class);
startActivity(intent2); 
```

`android:name=".A2"`，你必须有`"A2"`活动类实现！

修改为`android:name=".A2"`，不行`android:name="A2"`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:27:46.710

```
<intent-filter>
<action android:name="com.blacky.basictutorial.TutorialTwo" />
<category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

尝试在您的第二个活动中使用它并通过以下代码调用：

```
startActivity(new Intent("com.blacky.basictutorial.TutorialTwo")); 
```

希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:42:53.880

您应该将第二个活动的 android:name 设置为（包名称）。（类）例如，假设第二个活动类是“com.my.app.reza”，您应该添加清单：

```
 <activity
        android:label="@string/app_name"
        android:name=".reza" >
        <intent-filter >
            <action android:name="com.my.app.REZA" />
            <category android:name="android.intent.category.DEFUALT" />
        </intent-filter>
    </activity> 
```

你应该像这样开始活动：

```
Intent intent = new Intent("com.my.app.REZA");
startActivity(intent); 
```

请注意，这不是最好的方法，您不应该过多地使用包名称我建议您按照以下方式进行操作：

```
 <activity
        android:label="@string/app_name"
        android:name=".reza" /> 
```

并像这样开始：

```
startActivity(new Intent( this.getContext() , reza.class ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T14:49:16.450

`A2`如果您只需要在应用程序内部调用，则无需指定类别。你应该设置一个唯一的动作名称，例如它可以是一个哈希字符串：

```
...
Intent intent2 = new Intent("a202bfa923069ee8e119205e3468ee131ceafda37");
startActivity(intent2); 
```

请注意，操作名称使用与包名称相同的规则。

# haskell - 是否有 F# 工具/库将值可视化为图形（如 Haskell 的真空）？

> ID：11701783
> 
> 赞同：3
> 
> 时间：2012-07-28T14:18:25.453
> 
> 标签：haskell, f#, visualization

是否有像 Haskell's [`vacuum`](http://hackage.haskell.org/package/vacuum)for F# 这样的工具/库将值可视化为图形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:38:26.630

没有类似于 Haskell 的[Vacuum](http://hackage.haskell.org/package/vacuum)的 F# 专用工具。

如果您使用 F# Interactive，[fseye](http://code.google.com/p/fseye/)值得探索。它通过便于调试的对象树检查器说明 FSI 会话中的值。

要分析 F# 应用程序，您可能需要查看[CLR Profiler](http://www.microsoft.com/en-us/download/details.aspx?id=16273)。该工具确实可视化了内存分配、垃圾收集和堆状态。不幸的是，它不是 F# 特定的，所以有些迹象不容易解释。

# ruby-on-rails - Rails：成功安装后找不到命令

> ID：11701784
> 
> 赞同：16
> 
> 时间：2012-07-28T14:18:26.003
> 
> 标签：ruby-on-rails, ruby, freebsd

所以我安装了 ruby​​、gems 和 rails - 但是每当我输入 rails 时都会`rails: Command not found.`出现错误。

我做了一个本地宝石的转储，我将在下面包括

```
*** LOCAL GEMS ***

actionmailer (3.2.7)
actionpack (3.2.7)
activemodel (3.2.7)
activerecord (3.2.7)
activeresource (3.2.7)
activesupport (3.2.7)
arel (3.0.2)
bigdecimal (1.1.0)
builder (3.0.0)
bundler (1.1.5)
daemon_controller (1.0.0)
erubis (2.7.0)
fastthread (1.0.7)
hike (1.2.1)
i18n (0.6.0)
io-console (0.3)
journey (1.0.4)
json (1.5.4)
mail (2.4.4)
mime-types (1.19)
minitest (2.5.1)
multi_json (1.3.6)
mysql (2.8.1)
passenger (3.0.14)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.7)
railties (3.2.7)
rake (0.9.2.2)
rdoc (3.12, 3.9.4)
sprockets (2.1.3)
thor (0.15.4)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33) 
```

我还检查了我的 gem 环境设置（下）

```
 - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2011-10-30 patchlevel 0) [x86_64-freebsd8.1]
  - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: /usr/local/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/local/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-freebsd-8
  - GEM PATHS:
     - /usr/local/lib/ruby/gems/1.9.1
     - /root/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

并回显了我的 $PATH 变量`/sbin:/bin:/usr/sbin:/usr/bin:/usr/games:/usr/local/sbin:/usr/local/bin:/root/bin`

我试图进入 whereis 命令告诉我安装 rails 的位置

```
whereis rails
rails: /usr/local/bin/rails 
```

并从那里再次执行 rails ，我得到了`rails: Command not found.`

我在 VPS 上运行 FreeBSD，并且想学习 PHP 以外的其他语言，但我似乎无法在我的一生中弄清楚这一点……任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-10-13T15:43:52.477

如果您仅通过 Bundler 安装 Rails，则`rails`只有在运行`bundle exec rails`.

仅当您直接没有 Bundler`rails`时，才会存在“裸”命令。`gem install rails`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-07-27T20:18:38.970

如果您正在使用`rbenv`，则可能需要`rbenv rehash`在为您的 rails 应用程序安装依赖项后运行。IE。`bundle install`

来自[数字海洋](https://www.digitalocean.com/community/tutorials/how-to-install-ruby-on-rails-with-rbenv-on-centos-7)：

> 每当您安装新版本的 Ruby 或提供命令的 gem 时，都应该运行 rehash 子命令。这将为 rbenv 已知的所有 Ruby 可执行文件安装 shim，这将允许您使用这些可执行文件：

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T07:11:25.933

我确定您的问题是由其他 gem 目录中的 gem 引起的，这里：

```
/root/.gem/ruby/1.9.1 
```

因此，对于未来的读者，请查看您的其他`GEM PATHS`.

（然后如果那是错误的，我会适当地更新这个答案。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T08:14:37.353

如果您的应用程序正在生产中运行，但在 root 上找不到 rails 命令，那么这可能会有所帮助：

跑

**脚本/rails c ENV**

代替

**导轨 c ENV**

我有同样的问题并以这种方式解决。该应用程序使用 nginx/passenger 运行，但无法在生产环境中运行 rails console/rails server。

# asp.net - 计时器控件在 5 秒内触发更新面板，我得到一个 sys.webforms,PageRequestManagerServerErrorException

> ID：11701788
> 
> 赞同：0
> 
> 时间：2012-07-28T14:19:16.463
> 
> 标签：asp.net

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ChatUserControl.ascx.cs"
    Inherits="MetamorphismApp.ChatUserControl" %>

<asp:Timer ID="timer1" runat="server" OnTick="timer1_Tick" Interval="5000">
</asp:Timer>
<div id="divChatWindow" class="clChatWindow">
    <div>
        <asp:Label runat="server" Text='<%# Eval("username") %>' class="divHeader" ID="lblChatFriend"></asp:Label>
        <asp:Image ID="imgFriend" runat="server" CssClass="classFriendImage" />
        <asp:LinkButton ID="lbClose" runat="server" CommandName="Close" CssClass="lbClose"
            OnClick="lbClose_Click">Close</asp:LinkButton></div>
    <div class="chatText" id="idChatText" runat="server">
        <asp:UpdatePanel ID="UpdatePanel" runat="server">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="timer1" EventName="Tick" />
                <asp:AsyncPostBackTrigger ControlID="btnSendChat" EventName="Click" />
            </Triggers>
            <ContentTemplate>
                <asp:Repeater runat="server" ID="rpChatMessages">
                    <ItemTemplate>
                        <asp:Image ID="imageForFriend" runat="server" CssClass="clFriendsImage" ImageUrl='<%# "HttpImageHandler.jpg?username=" +  DataBinder.Eval(Container.DataItem,"fromusername").ToString() %>' />
                        <asp:Label ID="chatMessage" runat="server" Text='<%# Eval("Message") %>'></asp:Label>
                        <br>
                    </ItemTemplate>
                </asp:Repeater>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    <asp:TextBox ID="txtChatMessage" runat="server" Width="142px" CssClass="clChatMessage" EnableViewState="true"
        TextMode="MultiLine"></asp:TextBox>
    <asp:LinkButton ID="btnSendChat" runat="server" CommandName="Insert" CommandArgument='<%# Eval("username") %>'
        OnClick="btnSendChat_Click" CssClass="btnSendChat">Send</asp:LinkButton>

</div> 
```

我想使用由计时器控件触发的 updatepanel，5 秒后出现 sys.webforms 错误。我不想使用要通过 jquery 调用的 web 服务来填充我的转发器并将数据绑定到转发器。我想使用更新面板进行数据填充。我已经阅读了几篇文章来避免这个错误，但还没有找到解决方案。如果我将 asyncpostback 触发器更改为 postbacktrigger，则页面会执行我不希望发生的回发。我想使用 updatepanel 来解决这个问题。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:12:06.517

我收到错误 503 状态代码。令我惊讶的是，如果您在服务器上遇到此错误问题，那么此问题是服务器问题，而不是您的编码问题。状态 503 表示服务器无法完成请求并给出此错误。尝试联系您的托管服务提供商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:28:46.850

看起来您忘记将 ScriptManager 控件放在页面上。

# javascript - 将我所有的 .js 分组到一个文件中 - 好主意吗？

> ID：11701789
> 
> 赞同：0
> 
> 时间：2012-07-28T14:19:33.007
> 
> 标签：javascript, jquery, html

[我的网站](http://purewords.com/site14/)上有几个脚本。将它们全部分组到一个文件中是否有意义？还是最好将它们分开？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T14:21:11.267

对于生产，我总是将它们分组到一个文件中并压缩和/或缩小它们。浏览器只能（曾经？）同时向同一个域发出 2 个请求。

如果这是一次性操作，您可以使用此[**网站**](http://refresh-sf.com/yui/)来缩小文件。否则，您将不得不考虑使该过程自动化。

但是，如果您想在某些时候进行更改，也请保留您的原始未压缩文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T14:33:16.193

最好的生产：

*   加载从谷歌 CDN 缩小的所有框架
*   将站点的所有脚本收集在一个文件中缩小/压缩它。
*   如果缩小文件大于 256kB 并且某些脚本不会在所有页面上使用，直到它将是 2 或 3
*   如果脚本文件超过 3 个则不好（大多数浏览器会逐步加载它并阻止用户页面）
*   在 html 代码的底部发布所有脚本

对于后备框架加载（谷歌也可以关闭）

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="js/jquery.min.js"><\/script>')</script> 
```

# asp.net-mvc - 使用自定义值渲染 Html.Hidden 助手

> ID：11701790
> 
> 赞同：10
> 
> 时间：2012-07-28T14:19:37.453
> 
> 标签：asp.net-mvc, razor

我有以下剃刀标记：

```
@{
    var initValue = @Html.Raw(new JavaScriptSerializer().Serialize(Model));
    @Html.Hidden("initial-namings-data", initValue.ToString());
} 
```

它给了我错误：

```
'System.Web.Mvc.HtmlHelper' has no applicable method named 'Hidden' but appears to have an extension method by that name. Extension methods cannot be dynamically dispatched. Consider casting the dynamic arguments or calling the extension method without the extension method syntax. 
```

我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-28T14:46:59.347

问题可能是编译器无法选择正确的类型。

也尝试更改它：

```
@Html.Hidden("initial-namings-data", (string)initValue.ToString()); 
```

看看这个stackoverflow问题：[https ://stackoverflow.com/a/3822588/950890](https://stackoverflow.com/a/3822588/950890)

# iphone - Theos 与 iOS SDK 5 和方法移植

> ID：11701791
> 
> 赞同：0
> 
> 时间：2012-07-28T14:19:40.660
> 
> 标签：iphone, ios, methods, sdk, makefile

所以我试图将 iOS 5 SDK 引入 Theos Makefile 系统。我有以下工作：私有框架，来自 UIKit 的多任务处理。由于 Theos 使用 SDK 3。这次跳转到 SDK 5 会破坏一些方法，因为它们已被弃用。请记住，我将为此使用 GitHub 上的 RPetrich 标头。考虑到这一点，我正在尝试将以下解除代码添加到 UIViewController 标头。

```
- (void)dismissViewControllerAnimated: (BOOL)flag completion: (void (^)(void))completion __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_5_0); 
```

这使我的编译器抱怨 (void (^) (void)) 部分。我试过用 BOOL 和普通的 void 替换它，然后在使用该方法时调用 nil 。那样不行。我想知道是否有一种方法可以使用此方法成功编译，或者我是否可以以某种方式再次使用dismissModalViewControllerAnimated:。出于某种原因，我仍然可以使用 presentModalViewController:animated: 并且它说它们都将被弃用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T04:31:03.193

将默认编译器 gcc/g++ 更改为苹果的 clang/clang++

# mysql - 如何用另一个mysql查询的结果更新一个表

> ID：11701793
> 
> 赞同：1
> 
> 时间：2012-07-28T14:19:48.860
> 
> 标签：mysql

我正在寻求帮助，以使用另一个查询的结果更新表中的一列。

表名：

```
saleitems - fields are (itemid,quantity,saledate) 
stockbuffers - fields are (itemid,bufferquantity) 
```

我从销售项目表中通过以下查询获取缓冲区数量：

```
SELECT (SUM(saleitems.quantity / 6)) * 6 FROM saleitems WHERE saleitems.saledate BETWEEN date_sub(curdate(),interval 180 day) AND NOW() GROUP BY saleitems.itemid 
```

我想从上述查询的结果中更新列缓冲区数量。谁能帮忙。非常欣赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:26:07.353

您可以将更新查询用作：

```
Update stockbuffers set bufferquantity =(SELECT (SUM(saleitems.quantity / 6)) * 6 FROM saleitems WHERE saleitems.saledate BETWEEN date_sub(curdate(),interval 180 day) AND NOW() GROUP BY saleitems.itemid) 
```

它只是一个样本，没有经过测试。

# javascript - 在 javascript 中检测 SNI（服务器名称指示）浏览器支持

> ID：11701800
> 
> 赞同：12
> 
> 时间：2012-07-28T14:20:27.900
> 
> 标签：javascript, ssl, ssl-certificate

我希望能够检测浏览器是否支持[SNI-Server Name Indication](http://en.wikipedia.org/wiki/Server_Name_Indication)。我希望将不合规的客户重定向到不同的地址。

我正在考虑通过 SSL 加载一些内容并确保它被安全传输。否则浏览器不支持 SNI。这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T15:15:09.390

您可以设置一个支持 SNI 的服务器，提供两个主机名，在您需要 SNI 的地方和一个作为后备解决方案的地方，都提供他们托管的名称。

类似于以下内容：

*   `https://www.example.com/name`返回一个表示说`I'm www.example.com`
*   `https://www.example.net/name`返回`I'm www.example.net`（并且需要 SNI）。

如果您发出 XHR 请求`https://www.example.net/name`并返回`www.example.com`，则浏览器不支持 SNI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T15:58:31.767

不确定这是否是想要的，但有这个

```
 RewriteEngine on

  # Test if SNI will work and if not redirect to too old browser page
  RewriteCond %{HTTPS} on
  RewriteCond %{SSL:SSL_TLS_SNI} =""
  RewriteRule ^ http://www.example.com/too-old-browser [L,R=307] 
```

如果旧浏览器尝试使用需要 SNI 的站点，则它将被重定向（在这种情况下返回 http 并且页面显示浏览器太旧）。但是你总是会得到一个错误。这是无法避免的。浏览器说你好 IP....，而 apache 回复你好，这里是我的证书。如果浏览器在 hello apache 中不提供 SNI，则只发送默认（即错误）证书。浏览器然后抱怨。

如果您想在切换到 https 之前从 http 获取它，那么您可以在 htaccess 中放置类似的内容

```
 #Set $_SERVER['SSL_TLS_SNI'] for php = %{SSL:SSL_TLS_SNI} or value
  SetEnv SSL_TLS_SNI %{SSL:SSL_TLS_SNI} 
```

然后在您的页面中从默认域执行 https 获取（默认因此浏览器不会说存在安全错误）。如果 SNI 正在工作，则 php $_SERVER['SSL_TLS_SNI'] 将具有域名，否则它将具有 %{SSL:SSL_TLS_SNI}。这段代码可以改进，但你明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-06T05:28:52.653

您只能在需要*之前测试 SNI 支持。*也就是说，您不能强制用户使用 SNI HTTPS，然后如果他们不支持它就回退，因为他们将收到这样的错误（来自 Windows XP 上的 Chrome）而无法继续。

![](../Images/e9e41b638d89e5b8c734a2e638c8bbe5.png)

因此（不幸的是）用户实际上必须从不安全的 HTTP 连接开始，然后只有在他们支持 SNI 时才进行升级。

您可以通过以下方式检测 SNI 支持：

1.  **远程脚本**
    从您的纯 HTTP 页面，`<script>`从您的目标 SNI HTTPS 服务器加载一个，如果脚本加载并正确运行，您就知道浏览器支持 SNI。

2.  **跨域 AJAX (CORS)**
    与选项 1 类似，您可以尝试执行从 HTTP 页面到 HTTPS 的跨域 AJAX 请求，但请注意 CORS[仅支持有限的浏览器](http://caniuse.com/#feat=cors)。

3.  **嗅探用户代理**
    这可能是最不可靠的方法，您需要决定是拥有一个已知不支持它的浏览器（和操作系统）的黑名单，还是一个已知支持它的系统的白名单。

    我们知道 Windows XP 及以下所有版本的 IE、Chrome 和 Opera 都不支持 SNI。有关支持的浏览器的完整列表，请参阅[CanIUse.com](http://caniuse.com/#feat=sni)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T19:20:19.120

自从 commercerack 为所有站点升级到 SNI 以来，我们遇到了同样的问题。（用户开始结帐并遇到令人讨厌的 SSL 问题）。

随意将此作为起点。随着浏览器列表的增长，我会更新，但它现在在 XP + Android 2.0-2.2 上运行 IE。

[https://github.com/brianhorakh/html-sni-useragent-sniffer-warning](https://github.com/brianhorakh/html-sni-useragent-sniffer-warning)

# relational-database - 用于调节内容更改的数据和关系的数据库修订

> ID：11701801
> 
> 赞同：2
> 
> 时间：2012-07-28T14:20:27.440
> 
> 标签：relational-database

**简短版本：**我正在寻找有关如何实现数据库版本控制系统的建议，该系统可以跟踪关系以及记录数据，以调节具有用户可编辑内容的社交网络应用程序。

**长版：**我正在开发一个所有用户都可以编辑内容的社交应用程序。举个例子，假设要编辑的项目的一种类型是`Book`. A`Book`可以有一个`title`和几个`authors`（与表的多对多关系`authors`）。当然这个例子比较简单；真实的物品会有更多的领域和关系，但规则应该是一样的。

现在，我需要实现一个版本控制系统来缓和用户所做的更改。假设有两组用户：*普通用户*和*受信任用户*。普通用户所做的更改会被记录，但在版主接受该特定更改之前不会提交。受信任用户所做的更改会立即提交，但仍会记录下来，以便随时恢复。

如果我要保留示例中的 a 的修订`Book`，我需要跟踪与`authors`. 我需要能够跟踪添加和删除关系，并能够恢复它们。因此，如果`title`修改了，我需要能够恢复更改。如果与 an 的关系`author`被删除，我需要能够恢复它，并且如果添加了一些关系，我也需要能够恢复它。

我只需要跟踪一个项目和它的关系，而不是它相关的任何东西。如果我们有表`foos`,`bars`和,`foos_bars`我只会对日志记录感兴趣`foos`,会非常独立。`foos_bars``bars`

我熟悉[这个伟大的问题](https://stackoverflow.com/questions/39281/database-design-for-revisions)，以及它是[一种对抗性的解决方案](https://stackoverflow.com/questions/9852703/store-all-data-changes-with-every-details-stackoverflow-like)，以及关于第二种方法及其[后续的](http://www.jasny.net/articles/versioning-mysql-data-multi-table-records/)[相当全面的文章](http://www.jasny.net/articles/versioning-mysql-data/)。但是，这些都没有特别考虑跟踪关系以及正常的表数据，这显然可以解决我的问题。

我喜欢一张表记录所有历史的方法，因为它可以轻松地只保留部分更改，并撤消其他更改。就像如果一个用户提交了字段`A`and `B`，然后第二个用户提交了`A`and `B`，那么很容易撤消第二个用户的`B`-change 并保留`A`. 与使用其他方法的许多表相反，为整个功能提供一个表也很好。它还可以很容易地查看谁做了什么（例如只修改了`foobar`字段） - 使用其他方法似乎并不容易。而且似乎使审核过程自动化会更容易——我们甚至不需要知道表名，因为所需的一切都存储在修订记录中。

如果我要使用一个修订表一个修订表的方法，在编写触发器方面的经验有限，我不知道是否有可能或相对容易实现一个自动记录编辑的系统，但除非设置了某些参数（例如`edit_from_trusted_user == true`），否则不会立即提交。它让我想到了当我真的不希望触发时调用的触发器（因为审核不适用于例如管理员所做的更改，或其他一些可能试图修改数据的“对象”）。

无论我选择哪种解决方案，似乎我都必须`id`为所有多对多关系表添加一个相当人为的方法（而不是`[book_id, author_id]`我本来应该的`[id, book_id, author_id]`）。

我考虑过在单表方法中实现关系，如下所示：如果我们有标准的修订表结构

```
[ID] [int]
[TableName] [varchar]
[RecordID] [int]
[FieldName] [varchar]
[OldValue] [varchar]
[NewValue] [varchar]
[EventType] [enum]
[EventDate] [datetime]
[UserID] [int] 
```

我们可以通过简单地将 and 设置为`RecordID`or和and来存储`FieldName`关系的外键。唯一的问题是，我的一些关系有一些额外的数据（比如图的边权重），所以我也必须将它存储在某个地方。话又说回来，添加新关系的操作可以分成2个事件序列：ADD和SET（权重），但是需要人工关系s，我不确定这样的解决方案是否不会有一些坏处对未来的影响。`NULL``EventType``ADD``DELETE``OldValue``NewValue``ID`

将有大约 5 到 10 个版本化表，每个表平均有 3 个多对多关系要跟踪。我在 InnoDB 上使用 MySQL，应用程序是用 PHP 5.3 编写的，并使用 PDO 连接到数据库。将版本控制放在应用程序逻辑中而不是数据库触发器中对我来说很好。我只需要整个工作，并且相当高效。与编辑相比，我希望还原很少发生，与内容视图的数量相比，编辑将很少。只有版主才能访问修订数据，以接受或拒绝最近的更改。

您有实施此类系统的经验吗？有什么建议的解决方案来解决这个问题？有什么考虑吗？

我在 SO 和网络上搜索了很长一段时间，但没有找到任何可以帮助我解决这个问题的东西。但是，如果我错过了什么，我将不胜感激任何链接/方向。

谢谢。

# php - 仅向用户显示一次警报

> ID：11701803
> 
> 赞同：2
> 
> 时间：2012-07-28T14:20:51.270
> 
> 标签：php, javascript, jquery, web, popup

我希望在我的网站的用户第一次访问时向他们显示弹出警报，但在以后的访问中不显示。

由于我只有基本的 HTML 和脚本知识，请解释我如何使用 cookie 或其他浏览器功能来实现这一点。

[您可以在http://www.hdfbcover.com/](http://www.hdfbcover.com/)查看我网站的当前状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:32:13.090

这是一个使用 cookie 的示例，您也可以使用 localStorage 而不是 cookie 做类似的事情。

```
// Check If Cookie exists and if it doesn't exists
if( $.cookie('example') == null ) {
    // Create cookie
    $.cookie( 'example', '1',  { expires: 7, path: '/' } );
    // Display popup
    // Your code here...
} 
```

参考：

*   [jQuery $.cookie](http://archive.plugins.jquery.com/project/Cookie)
*   [HTML5 本地存储](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:29:39.243

如果您有注册用户，您应该决定在本地或服务器上保存数据：

**在服务器上**

如果您有一个用户数据库，您可以存储并设置一个标志（布尔值），指示用户是否看到了该消息。这可以很容易地变得足够通用以显示不同类型的消息并在不同时间显示它们。这里的好处是您知道用户是否看到了消息，无论他从哪里连接。

**本地**

您可以使用本地存储，例如 HTML5 的 localStorage 或[jQuerys cookie 插件](http://archive.plugins.jquery.com/project/Cookie)。在那里，您将保存用户是否已看到消息的标志。显然，如果用户从新计算机连接，您不知道用户是否看到了该消息。

# javascript - YUI3 按钮单击事件的行为类似于提交类型而不是按钮类型

> ID：11701804
> 
> 赞同：1
> 
> 时间：2012-07-28T14:21:04.377
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, web-applications, yui

我正在`ASP.NET MVC 3`使用`Yahoo API version 3`. 当我点击它时，我试图让我`YUI3 button`重定向到另一个页面，这个按钮是我的取消按钮。取消按钮是普通按钮类型，但它被视为提交按钮。它不是重定向到正确的页面，而是像提交按钮一样，它像提交按钮一样启动我的页面验证。

我认为它可能与我的 HTML 有关，但我确实验证了它。它验证了 100% 正确。因此，我将整个页面精简到最低限度，但取消按钮仍然像提交按钮一样工作。这是我的 HTML 标记：

```
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
     <head>
          <title>Create2</title>
     </head>

     <body class="yui3-skin-sam">

          <h1>Test submit</h1>

          @using (Html.BeginForm())
          {
               <button id="SaveButton" type="submit">Save</button>
               <button id="CancelButton" type="button">Cancel</button>
          }

          <script src="http://yui.yahooapis.com/3.6.0pr4/build/yui/yui-min.js"></script>
          <script>
               YUI().use('button', function (Y) {
                    var saveButton = new Y.Button({
                         srcNode: '#SaveButton'
                    }).render();

                    var cancelButton = new Y.Button({
                         srcNode: '#CancelButton',
                         on: {
                              'click': function (e) {
                                   Y.config.win.location = '/Administration/Department/List';
                              }
                         }
                    }).render();
               });
          </script>

     </body>
</html> 
```

我不确定我在这里做错了什么？这可能是他们 API 中的错误吗？我正在 IE8 和最新版本的 FireFox 上进行测试。

**更新：**

我忘了提到，如果这些按钮不在表单标签之间，那么重定向工作正常。如果我将它们放在表单标签中，则重定向不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:26:11.580

我会使用链接，因为您正在重定向到另一个页面。这样做你不需要用 javascript 初始化它或注册 onClick 监听器。

```
<button id="SaveButton" type="submit">Save</button>
<a id="CancelButton" href='/Administration/Department/List'>Cancel</a> 
```

查看此链接以设置您的链接样式：http: [//yuilibrary.com/yui/docs/button/cssbutton.html](http://yuilibrary.com/yui/docs/button/cssbutton.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T00:01:11.013

小`Y.Button`部件正在`type`从“取消”按钮中删除该属性。这使得该按钮的行为类似于提交按钮。

有许多可能的途径来完成这项工作。我将从简单到复杂。首先是完全避免这个问题，根本不使用 JavaScript。只需使用链接：

```
<form action="/Administration/Department/Create2" method="post">
    <button class="yui3-button">Save</button>
    <a class="yui3-button" href="/Administration/Department/List">Cancel</a>
</form> 
```

毕竟，Button 小部件所做的只是为每个标签添加几个 css 类以及许多其他使更复杂的小部件成为可能的东西。正如您在[使用 cssbutton 的样式元素](http://yuilibrary.com/yui/docs/button/cssbutton.html)示例中看到的那样，即使`<a>`只使用 YUI css 样式，标签也可以看起来像漂亮的按钮。如果您不必使用 JavaScript，最好不要使用它。

第二种选择是避免使用`Y.Button`小部件并使用`Y.Plugin.Button`插件。它在 kb 和处理能力方面都更轻量级。而且它不会触及标签属性，因此您的位置代码将起作用。

```
YUI().use('button-plugin', function (Y) {
  Y.all('button').plug(Y.Plugin.Button);
  Y.one('#CancelButton').on('click', function () {
    Y.config.win.location = '/Administration/Department/List';
  });
}); 
```

`Y.Button`最后，您可以通过阻止按钮的默认操作来绕过小部件的行为：

```
var cancelButton = new Y.Button({
  srcNode: '#CancelButton',
  on: {
  'click': function (e) {
      e.preventDefault();
      Y.config.win.location = '/Administration/Department/List';
    }
  }
}).render(); 
```

# php - 会话在页面上消失

> ID：11701814
> 
> 赞同：1
> 
> 时间：2012-07-28T14:22:03.910
> 
> 标签：php, session

我在网站的主目录中保持会话处于活动状态时遇到问题。

我有一个名为`login.php`会话设置的文件。然后，如果我导航到`index.php`并执行`print_R($_SESSION)`，它会打印它。然后我去`gallery.php`，它就消失了。以相反的顺序也是如此：如果我先去，它就会出现`gallery.php`，然后消失在`index.php`.

我想这可能是`php.ini`相关的。

编辑：好的，我发现这是一个包含文件，它包含在两个页面上，名为“nav.php”

```
<?php 
session_start();
$logout = intval($_GET['logout']);
if(isset($logout)){
session_destroy();
//header('Location: '$_SERVER['PHP_SELF']);

}
echo '<a href="/index.php" title ="home" class="navbutton">home</a>

<a href="/gallery.php" title ="gallery"class="navbutton">gallery</a>
 <a href="/info.php"title ="info"class="navbutton">info</a>

<a href="/contact.php"title="contact"class="navbutton">contact</a>';

if(isset($_SESSION['names']) || isset($_SESSION['guestlogin'])){echo '<a href="'.$_SERVER['PHP_SELF'].'?logout=1" title="logout"class="navbutton">logout</a>';
echo'<a href="/gallery" title ="gallery"class="navbutton"> test gallery</a>';

}
else{echo '<a href="/login" title="login"class="navbutton">login</a>';
}
echo'<a href="/blog"title ="blog"class="navbutton">blog</a>

<a href="/prints"title ="prints"class="navbutton">prints</a>';?> 
```

可能是 b/c 它有 session_destroy 还是什么？是否所有包含的文件都应该有一个 session_start ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:00:49.033

```
$logout = intval($_GET['logout']);
if(isset($logout)) {
  session_destroy();  
} 
```

你看到这里有问题吗？`$logout`总*有*一些价值。不管价值是多少。`isset($logout)`总是如此`TRUE`。将其更改为：

```
if(isset($_GET['logout']) && $_GET['logout']) {
  session_destroy();  
} 
```

`logout=1`如果用户在查询字符串中跟随 URL，这将注销用户。

# r - 从 r 中的数据框中制作大小为 n/2 和 2 列的列表

> ID：11701817
> 
> 赞同：2
> 
> 时间：2012-07-28T14:22:28.570
> 
> 标签：r, list

这是数据：

```
myd <- data.frame (var1.1 = rnorm (10, 5,2), var1.2 = rnorm (10, 3,1),
                   varA.1 = rnorm (10, 5,2), varA.2 = rnorm (10,1,2), 
                    C.1 = rnorm (10, 3,1), C.2 = rnorm (10, 4,1)) 
```

我想创建一个大小为 3 的列表（n/2，如果 n 是数据框中的变量数）（每列有两列）

```
mylist <- as.list (myd) 
```

创建一个列表，其中每个变量作为组件。但我想在一个单元中创建一对变量列表 - var1.1 和 var1.2，类似地 varA.1 和 varA.2 或 C.1 和 C.2。因此，新的列表单元每个有 2 列。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T14:33:31.377

我认为这会给你你想要的：

```
lapply(seq(2, ncol(myd), by = 2), function(i) myd[, (i-1):i]) 
```

现在假设您想通过数据框的共享变量名称来命名列表中的每个元素：

```
X <- lapply(seq(2, ncol(myd), by = 2), function(i) myd[, (i-1):i])
names(X) <- sapply(X, function(x){
    strsplit(names(x)[1], '\\.')[[c(1, 1)]]
})
X 
```

# vim - 如果 n 或 ? 清除上次搜索突出显示 是不是被压了？

> ID：11701819
> 
> 赞同：3
> 
> 时间：2012-07-28T14:22:30.747
> 
> 标签：vim, macvim

所以我一直在想...我真的不喜欢 vim 在您搜索某些东西时突出显示...我在 2 种情况下使用它...查找单词和/或执行操作直到那个词。我很少需要突出显示这个词，除非我真的在四处寻找它，通常用 n （下一个）或 ? （以前的）。所以我想知道是否有办法让vim在搜索后理解，如果我不使用n或？，删除突出显示，如果输入了其他任何内容（如动作），那么就不要突出显示它。我在解释我想要什么时遇到问题，但希望你能理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:46:34.193

完成搜索后，我有以下映射来关闭突出显示：

```
map <silent> <leader>/ :noh<cr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:27:27.487

这对我有用`nmap n n:set hlsearch<cr>`。然后我设置`nnoremap <leader>n :set nohlsearch<cr>`在我想要的时候关闭它。你可以对`N`with做同样的事情`nmap N N:set hlsearch<cr>`。

# sql - oracle sql查询从两个相似类型的表中获取数据

> ID：11701821
> 
> 赞同：1
> 
> 时间：2012-07-28T14:22:37.417
> 
> 标签：sql, database, oracle, join

我有两个表 ACTUAL 和 ESTIMATE 具有唯一列（sal_id、gal_id、amount、tax）。

在 ACTUAL 表中，我有 actual_id、sal_id、gal_id、process_flag、amount、tax
1 111 222 N 100 1
2 110 223 N 200 2

在 ESTIMATE 表中，我有 estimate_id、sal_id、gal_id、process_flag、amount、tax
3 111 222 N 50 1
4 123 250 N 150 2 5 212 312 Y 10 1

现在我想要一个最终表，它应该有来自 ACTUAL 表的记录，如果 ACTUAL 中不存在 sal_id+gal_id 映射的记录但存在于 ESTIMATE 中，则填充估计记录（以及添加金额和税款）。

In FINAL table
id sal_id、gal_id、actual_id、estimate_id、total
**1 111 222 *1 null* 101**（因为实际表中存在 111 222 的记录）
**2 110 223 *2 null* 202**（因为实际表中存在 110 223 的记录）
**3 123 250 *null 4* 51**（因为实际表中不存在记录，但估计存在 123 250）

（估计为212 312组合，由于记录已经处理，无需再次处理）。

我正在使用 Oracle 11g。请帮助我在单个 sql 查询中编写逻辑？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:34:23.200

有几种方法可以编写此查询。一种方法是使用连接和合并：

```
select coalesce(a.sal_id, e.sal_id) as sal_id,
       coalesce(a.gal_id, e.gal_id) as gal_id,
       coalesce(a.actual_value, e.estimate_value) as actual_value
from actual a full outer join
     estimate e
     on a.sal_id = e.sal_id and
        a.gal_id = e.gal_id 
```

这假定 sal_id/gal_id 提供表之间的唯一匹配。

由于您使用的是 Oracle，这可能是一种更清晰的方法：

```
select sal_id, gal_id, actual_value
from (select *,
             max(isactual) over (partition by sal_id, gal_id) as hasactual
      from ((select 1 as isactual, *
             from actual
            ) union all
            (select 0 as isactual, *
             from estimate
            )
           ) t
     ) t
where isactual = 1 or hasactual = 0 
```

此查询使用窗口函数来确定是否存在与 sal_id/gal_id 匹配的实际记录。逻辑是取所有实际值，然后取所有与实际值不匹配的记录。

# facebook - Facebook：通过 url 识别对象 ID 和类型

> ID：11701823
> 
> 赞同：2
> 
> 时间：2012-07-28T14:22:44.177
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想根据其 URL 获取 Facebook 对象的 id 和类型。

我的目标是确定某个 URL 是否是 Facebook 事件（例如[https://www.facebook.com/events/258629027581347](https://www.facebook.com/events/258629027581347)）。

因此，如果我有该对象的对象 ID，我可以执行以下 FQL 查询并知道如果我得到结果，则该对象是一个事件：

```
select eid from event where eid = 258629027581347 
```

问题是仅根据 URL 获取对象 ID。我**不想**从 URL 中解析 id，因为不能保证 URL 的格式将来会保持不变。我想通过 Facebook 的 API 找到一种方法。

搜索了一段时间后，我发现了以下有关如何执行此操作的建议，但不幸的是，它们都不起作用：

1.  来自表的 FQL 查询`object_url`- 查询不产生任何结果：

    `SELECT url, id, type, site FROM object_url WHERE url = "https://www.facebook.com/events/258629027581347"`

2.  使用图形 API：

    `https://graph.facebook.com/https://www.facebook.com/events/258629027581347`

    这将返回一个仅包含 URL 的 JSON 对象 - 没有 id。

3.  像这样使用图形 api `?ids=`：

    `https://graph.facebook.com/?ids=https://www.facebook.com/events/258629027581347`

    这将返回以下 JSON，也没有 id：

    `{ "https://www.facebook.com/events/258629027581347": { "id": "https://www.facebook.com/events/258629027581347", "metadata": { "connections": { "comments": "https://graph.facebook.com/https://www.facebook.com/events/258629027581347/comments?access_token=AAACEdEose0cBADzSuuyJWohIwkXuvQGJUsIlSJz04J4nzKqqQXTvGiPXf4YDBPuh0rdyXgSWnWcJpN3X3GaATVLjG6UmZBiHKmcxCWwZDZD" }, "type": "link_stat" } } }`

我在这里想念什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:04:31.460

据我所知，目前还没有 API 方法可以获取 Facebook URL 并告诉您它是什么。解决这个问题的唯一方法是解析 URL 并查找最后一个元素并将其传递给`https://graph.facebook.com/258629027581347?metadata=1&access_token=XXXX`

您尝试构建一个面向未来的 Facebook 应用程序是一个崇高的目标，但我认为目前还不可能。Facebook 平台仍在不断发展。与 url 结构相比，api 方法将保持不变的保证更少。

# android - 长按安卓

> ID：11701826
> 
> 赞同：10
> 
> 时间：2012-07-28T14:23:13.690
> 
> 标签：android

我在自定义视图中检测长按时遇到问题。

这是与此问题相关的代码

```
final GestureDetector gestureDetector = new GestureDetector(new GestureDetector.SimpleOnGestureListener() {
    public void onLongPress(MotionEvent e) {
        Log.e("dbg_msg", "onLongPress");
    }
});

public boolean onTouchEvent(MotionEvent event) {
    return gestureDetector.onTouchEvent(event);
}; 
```

此代码将每次（短）单击检测为长按。

当我将此代码放在从 Activity 继承的类中时，它可以工作。

那么为什么它不能在自定义 View 中工作？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-28T16:04:17.503

所有这些代码都在您的自定义视图类中：

```
public static int LONG_PRESS_TIME = 500; // Time in miliseconds 

final Handler _handler = new Handler(); 
Runnable _longPressed = new Runnable() { 
    public void run() {
        Log.i("info","LongPress");
    }   
};

@Override
public boolean onTouchEvent(MotionEvent event) {
    switch(event.getAction()){
    case MotionEvent.ACTION_DOWN:
        _handler.postDelayed(_longPressed, LONG_PRESS_TIME);
        break;
    case MotionEvent.ACTION_MOVE:
        _handler.removeCallbacks(_longPressed);
        break;
    case MotionEvent.ACTION_UP:
        _handler.removeCallbacks(_longPressed);
        break;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T14:54:49.337

我不确定，但您`GestureDetector`的构造函数已弃用（[此处](http://developer.android.com/reference/android/view/GestureDetector.html#GestureDetector%28android.view.GestureDetector.OnGestureListener%29)）。您可以尝试其他需要上下文作为第一个参数的吗？

对不起，我是新人，所以我不能发表评论。

—*已编辑*—</p>

看来您使用了另一个侦听器，这[`View.OnTouchListener`](http://developer.android.com/reference/android/view/View.OnTouchListener.html)有其他[`onTouch()`](http://developer.android.com/reference/android/view/View.OnTouchListener.html#onTouch%28android.view.View,%20android.view.MotionEvent%29)方法。你能再试一次吗？

—*已编辑*—</p>

这是一个例子（为我工作）：

```
...
mAnotherView.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        return mGestureDetector.onTouchEvent(event);
    }
});

...
mGestureDetector = new GestureDetector(this, new GestureDetector.SimpleOnGestureListener() {

    @Override
    public void onLongPress(MotionEvent e) {
        // do your tasks here
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T15:16:53.600

您是否在 GestureDetector 上启用了长按？您可以使用适当的构造函数或调用[setIsLongpressEnabled](http://developer.android.com/reference/android/view/GestureDetector.html#setIsLongpressEnabled%28boolean%29)来启用它。例如，您可以这样做：

```
gestureDetector.setIsLongpressEnabled(true); 
```

在你的构造函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-10T19:19:04.310

我猜这样更好。。

```
public class Workflow extends View implements View.OnLongClickListener {

public Workflow(Context context, DisplayFeatures d) {
    super(context);

    setLongClickable(true);
    setOnLongClickListener(this);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    /* onTouchEvent should return super.onTouchEvent(event);, otherwise long click wouldn't be performed */
    return super.onTouchEvent(event);
}

@Override
public boolean onLongClick(View v) {
    Log.d("VIEW", "LONG CLICK PERFORMED!");
    return false;
}
} 
```

# javascript - 如何在另一个选项卡上加载响应

> ID：11701831
> 
> 赞同：-2
> 
> 时间：2012-07-28T14:23:34.503
> 
> 标签：javascript, security, jquery, networking

我有一个颜色框，其中有一个表单，该表单将提交到其他网站，我希望当来自该网页的响应加载时，应该在新选项卡中打开一个新的 url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:27:26.617

在`target="_blank"`您的`<form>`.

# python - 如果字典包含重复项，如何报告错误？

> ID：11701836
> 
> 赞同：0
> 
> 时间：2012-07-28T14:24:25.047
> 
> 标签：python

我的代码是这样的：

```
d = defaultdict(list)
for prod_no ,production in enumerate(productions):
    cp = Production(*productions[prod_no])
    count_yields = len(cp.pattern_list())
    #temp.setdefault(temp[cp.lhs()], []).append(count_yields)
    d[cp.lhs()].append(count_yields)

print d 
```

作为输出，我得到如下所示的内容：

```
defaultdict(<type 'list'>, {'A': [3, 3, 4, 3], 'S': [1], 'B': [4,5]}) 
```

现在我需要报告一个错误，因为键 'A' 具有不同的多个值，例如 3 和 4。键 'B' 也可以这样说。

如果我得到类似的输出，不应该有任何错误

```
defaultdict(<type 'list'>, {'A': [3, 3, 3, 3], 'S': [1]}) 
```

因为“A”和“S”始终具有相同的值......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:39:26.287

如果您不想重复值，则应该使用[集合而不是列表作为字典的值。](http://docs.python.org/library/stdtypes.html#set)在任何情况下，您都可以使用

```
dct = {'A': [4,3,3,3], 'S': [1]}
if any(len(v) != len(set(v)) for v in dct.values()):
   raise ValueError('Duplicate values in an item list') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T14:38:55.053

如果要检查列表中的重复项（根据标题），可以将其转换为集合并检查其长度（在本例中为 1）：

```
if not all(len(set(items))==1 for items in d.values()):
    #A list against some key does not have all-same elements. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:45:03.950

如果 d 是字典（它可以是任何字典，包括默认字典）。您可以使用以下代码。这将检查字典中的重复

```
for i in d.values():
    if len(set(i)) != len(i):
            print str(i) + " error" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T14:47:08.340

我无法完全理解您示例中的 Python 语法，因此我将根据两种不同的想法来回答您。

你想做什么取决于你什么时候想做。例如，如果您想防止重复值，那么这是一种方法：

```
x_set = {'A':[4, 3]}
incoming_val = 3
if incoming_val in x_set['A']:
  print("The incoming value already present.") 
```

如果您想在错误报告后消除重复值，您可以执行以下操作：

```
>>> x_set
{'A': [4, 3, 3]}
>>> list(set(x_set['A']))
[3, 4]
>>> 
```

您还可以将列表追加尝试放在 try .. catch 中并发出异常信号并捕获它。这也是 Pythonic 的事情。

# magento - Magento 如何在类别中的产品上添加展示等标签

> ID：11701838
> 
> 赞同：2
> 
> 时间：2012-07-28T14:24:41.870
> 
> 标签：magento

嗨，大家好...

知道这对某些人来说会显得非常新手……但我想知道如何将 SHOWCASE 或带有任何其他名称的图章添加到某个类别的产品中？

问题是我想在产品图像中添加一个图像（最好在右上角），用于我可以在后端设置的产品。跨越的图像必须在 GRID 显示以及单个产品页面上可见。

所以我基本上有两个问题：-

问。我是否必须在后端为产品添加特殊属性才能使此类事情成为可能？我想，从这个日期到那个日期，它可能必须类似于新的东西！！。任何指导都非常感谢...

而不是 Qs2。我如何实际调用 list.phtml 和 view.phtml 中的交叉图像？

我希望这是有道理的！！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T15:04:37.023

您不必为产品添加特殊属性，您可以根据“将产品设置为日期的新产品”和“将产品设置为日期的新产品”来完成。不过，您也可以使用布尔值来执行此操作，只需使用“是/否”输入类型创建一个属性并将其添加到您的默认属性集中。给它一个showcase的属性代码。

在您的模板文件（templates/catalog/product/list.phtml 和 templates/catalog/product/view/media.phtml，如果您希望它在产品视图页面上）中，您将添加一段条件代码，该代码在如果产品被标记为展示产品，则标记的额外绝对定位元素，

IE

```
<div class="product-image">

   <?php if($_product->getShowcase()) { ?>
       <div class="showcase"></div>
   <?php } ?>

   <?php 
       $_img = '<img id="image" src="'.$this->helper('catalog/image')->init($_product, 'image').'" alt="'.$this->htmlEscape($this->getImageLabel()).'" title="'.$this->htmlEscape($this->getImageLabel()).'" />';
       echo $_helper->productAttribute($_product, $_img, 'image');
   ?>

</div> 
```

然后您将创建如下所示的 css 以在顶角生成 wee 图标；

```
.products-grid .product-image { 
    position: relative;
    display: block; 
    width: 244px; 
    height: 156px; 
    margin: 0 0 10px;
 }

.showcase {
    position: absolute;
    right: 0;
    top: 0;
    width: 65px;
    height: 66px;
    display: block;
    z-index: 2;
    background: url(../images/showcase.png) no-repeat;
} 
```

这是我上周自己做的一个例子，所以它使用了我的图像尺寸，但你明白了。希望这可以帮助。

# ruby - 在 ruby 脚本中使用 rufus 调度程序

> ID：11701839
> 
> 赞同：1
> 
> 时间：2012-07-28T14:24:42.630
> 
> 标签：ruby, scheduler, rufus-scheduler

好。我正在尝试在 ruby​​ 中编写简单的调度程序，只是简单的脚本一旦启动就会为 ex。分钟做我想做的事。

我已经在 Ruby On Rails 中使用了 rufus-scheduler，但这次我并不需要所有框架，因为它只是简单的脚本。

所以，我写了这样的东西：

```
require 'rubygems'; require 'rufus/scheduler'

scheduler = Rufus::Scheduler.start_new

scheduler.every '5s' do
    puts "Helo"
end 
```

当我启动它时（我使用的是 Win Vista）它实际上什么也没做。

```
D:\>ruby scheduler.rb

D:\> 
```

我已经在 irb 中检查了这个，并且......它有效。

```
irb(main):002:0> require 'rubygems'; require 'rufus/scheduler'
=> true
irb(main):003:0> scheduler = Rufus::Scheduler.start_new
=> #<Rufus::Scheduler::PlainScheduler: [...]
irb(main):004:0> scheduler.every '5s' do
irb(main):005:1* puts "Hello"
irb(main):006:1> end
=> #<Rufus::Scheduler::EveryJob:0x2e6fcb0 @scheduler=#<Ruf [...]
irb(main):007:0> Hello
Hello
Hello 
```

有人可以帮我弄这个吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T15:19:47.947

最后，我想出了如何解决这个问题。简单的说

```
scheduler.join 
```

在脚本的末尾。

这是一个关于类似问题的线程:) [https://groups.google.com/forum/?fromgroups#!topic/rufus-ruby/37DLuN2W_0w](https://groups.google.com/forum/?fromgroups#!topic/rufus-ruby/37DLuN2W_0w)

# android - 如何修改列表视图同一行中的多个文本视图

> ID：11701842
> 
> 赞同：0
> 
> 时间：2012-07-28T14:25:31.407
> 
> 标签：android, android-widget

我正在使用具有自定义行的 ListView，其中包含 2 个 TextView。我已经制作了自己的适配器，它在我的列表中运行良好。现在，我希望用户输入 2 个文本，然后在我的 ListView 中插入一个新行（带有用户输入）。我尝试过使用 add 方法，但我得到了 UnsupportedOperationException。我是否也必须覆盖 add 方法？如果是这样，我需要在其中做什么？谢谢你。

我将粘贴一段代码。如果您需要更多信息，请告诉我。

```
public class ChatAdapter extends ArrayAdapter<ChatItems>{

Context context;
int textViewResourceId;
ChatItems[] objects;

public ChatAdapter(Context context, int textViewResourceId,
        ChatItems[] objects) {
    super(context, textViewResourceId, objects);

    this.context = context;
    this.textViewResourceId = textViewResourceId;
    this.objects = objects;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    ChatHolder holder = null;

    if(row == null){
    LayoutInflater inflater =  ((Activity)context).getLayoutInflater();
    row = inflater.inflate(textViewResourceId, null);

    holder = new ChatHolder();
    holder.user = (TextView) row.findViewById(R.id.textUser);
    holder.msg = (TextView) row.findViewById(R.id.textText);

    row.setTag(holder);

    }else
        holder = (ChatHolder) row.getTag();

    ChatItems items = objects[position];
    holder.msg.setText(items.msg);
    holder.user.setText(items.user);

    return row;

}
static class ChatHolder{
    TextView user;
    TextView msg;
} 
```

}

```
public class ChatItems {

String user;
String msg;

public ChatItems(String user, String msg){
    this.user = user;
    this.msg = msg;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:31:54.517

我猜您使用了一个不可变列表，因此[`UnsupportedOperationException`](http://developer.android.com/reference/java/lang/UnsupportedOperationException.html)当您尝试将元素添加到列表时会引发它。考虑使用`ArrayList`或可变的东西。

如果您可以提供 logcat，那么它将对（我们）有更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:35:30.187

如果您想添加其他项目而不是`ArrayAdapter`作为后端数据持有者。如果您正在使用，则将在内部使用，以后无法修改。`ArrayList``Array``Array``ArrayAdapter``List`

从`objects`您的`ChatAdapter`.

重写你的构造函数

```
public ChatAdapter(Context context, int textViewResourceId, List<ChatItems> objects) {
    super(context, textViewResourceId, objects);
    this.context = context;
    this.textViewResourceId = textViewResourceId;
} 
```

让项目`getView()`使用`ChatItems items = getItem(position)`而不是`ChatItems items = objects[position];`

最后创建您的适配器`adapter = new ChatAdapter(this, R.layout.chat_item, new ArrayList<ChatItems>());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:34:30.390

[http://developer.android.com/reference/android/widget/ArrayAdapter.html](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

" 但是，TextView 被引用，它将被数组中每个对象的 toString() 填充。您可以添加自定义对象的列表或数组。覆盖对象的 toString() 方法以确定将显示的文本列表中的项目。

"

您需要更多地使用适配器而不是列表视图本身，列表视图毕竟使用适配器。

该文档应包含您需要的所有信息。祝你好运！请记住发布您的解决方案。

# html - HTML 5 浏览器在输入时弹出 type="email"

> ID：11701844
> 
> 赞同：5
> 
> 时间：2012-07-28T14:25:57.653
> 
> 标签：html, input

当您在支持 HTML5 标记的较新浏览器版本中提交表单并且您的表单具有 `input type="email"`无效的电子邮件地址值时，该表单将不会被提交，这很好。您还会收到一个气泡警报，上面写着`"Please enter an email address"`

这里有一个简单的[DEMO](http://jsfiddle.net/SZmWg/4/)。

嗯，这在某些方面很好。在演示中，您将看到弹出窗口隐藏了我定义的错误。有没有办法防止泡沫出现？或者我可以覆盖气泡的样式吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T14:39:43.803

您可以使用以下属性停止浏览器的内置验证`novalidate`：

```
<form action="" novalidate></form> 
```

或者您可以使用此 JavaScript 属性和您自己的错误消息更改覆盖的内容：

```
var element = [selector that selects the input field];
element.setCustomValidity('This is not a valid e-mail'); 
```

但我认为你不能自己设置这个浏览器元素的样式。

# memory-management - 内存管理 xcode 4.4

> ID：11701850
> 
> 赞同：1
> 
> 时间：2012-07-28T14:26:16.933
> 
> 标签：memory-management, instruments, xcode4.4

今天我安装了新的 Mountain Lion 和新的 Xcode 4.4，所以我在新的 xcode 上导入了我刚刚开始的新项目，我意识到登录后，因为我的应用程序需要使用用户名和密码登录，登录我得到一个警告“内存不足”，然后它让我怀疑，我分析了仪器，我注意到当你打开应用程序时，已经有将近 2MB alocazione complessiava 的一部分然后如果我开始编辑每个字母中的文本字段我写了至少 0.5 MB，这是不可能的，我的应用程序中有奇怪的东西，如果你没有登录，就没有任何用处。我不使用ARC。可能是我从 xcode 4.3 导入到 4.4 并且不是 100% 兼容？我要做什么时量？验证设置是否正常。

# objective-c - 如何使用核心数据在 GUI 中实现一对多布尔关系？

> ID：11701852
> 
> 赞同：1
> 
> 时间：2012-07-28T14:26:35.863
> 
> 标签：objective-c, core-data, nsarray

我在核心数据模型中有很多人，并且有很多技能。我想要一个窗口，用户可以在其中添加或删除技能。这个窗口还有一张人桌，`NSCheckBox`旁边有一个。该复选框指示此人是否具有该技能。这些人员位于名为 PersonsList 的数组控制器中。这些技能位于一个名为 Skills 的阵列控制器中。我可以绑定一些东西，以便 PersonsList 中的每个“personName”都有一个与技能相关的“有能力”布尔值列表吗？该人与技能具有多对多的关系。

一个人可以拥有更多的技能，而一种技能可以被更多的人拥有。

我希望精通Core Data的人可以在这里帮助我。我希望它可以在没有一些`NSArray`持有布尔值的情况下完成。

# javascript - 具有 API 和高级文本处理支持（如单词检测）的 WYSIWIG JavaScript HTML 编辑器

> ID：11701853
> 
> 赞同：0
> 
> 时间：2012-07-28T14:26:39.140
> 
> 标签：javascript, html, api, wysiwyg, text-processing

我正在为我的应用程序寻找 WYSYWIG JavaScript HTML 编辑器。我已经尝试过其中一些，例如从[**这个**](http://www.queness.com/post/212/10-jquery-and-non-jquery-javascript-rich-text-editors)列表中，但有些太复杂，有些缺少基本功能......

要求：

*   它应该适用于最新的稳定版本：Mozilla Firefox、Google Chrome、Opera、Internet Explorer（以及 Apple Safari 支持会很好）。

*   它应该具有粗体、斜体、颜色更改、标题、段落、无格式、对齐等基本功能——这些是浏览器可以处理的基本选项（这是在大多数所见即所得编辑器中完成的）。

*   我不需要任何 UI - 所以如果它带有 UI - 我应该能够轻松删除它。我的意思是我不需要任何按钮、颜色选择器、图像插入对话框等 - 我将构建我自己的菜单

*   我需要复杂的 API 而不是 UI，例如，我可以在其中提取选定/全文/HTML、插入文本/HTML、替换文本/HTML。

*   我需要高级文本处理支持——这是我正在寻找的，但在任何地方都找不到——**我需要检测光标下的单词**。例如，我们有“这是示例文本”，用户点击“示例”——我需要知道它的位置、文本和 HTML。
    我发现了这样的东西：[Javascript Rich Text Editor with get AND set cursor position support](https://stackoverflow.com/questions/8131830/javascript-rich-text-editor-with-get-and-set-cursor-position-support) - 但它不是这个问题的完整答案。

*   如果它易于嵌入（文件不多），轻巧且快速，那就太好了。

*   它应该通过开源/GPL/或其他一些开放/免费许可证获得许可。

如果我错过任何信息 - 请告诉我，我会更新它们。

也许你们中的一些人知道一些不错的图书馆？或者也许还有其他不错的解决方案来实现我的目标？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:47:51.833

不是一个所见即所得的编辑器，但我的[Rangy](http://code.google.com/p/rangy)库可以帮助您构建一个简单的编辑器。特别是，新的[TextRange 模块](http://rangy.googlecode.com/svn/trunk/demos/textrange.html)提供了处理单词的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:35:00.403

你可以试试nicedit。[http://nicedit.com/index.php](http://nicedit.com/index.php)

# php - 如何在php中替换&到and

> ID：11701854
> 
> 赞同：-2
> 
> 时间：2012-07-28T14:26:58.717
> 
> 标签：php

我想将 &,%,$ 等特殊字符替换为字符串。

我有一个字符串 s1= Trinidad & Tobago，我想将 '&' 替换为 'and' 例如： s1 = Trinidad & Tobago 应该替换为 s1= Trinidad and Tobago。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:28:33.217

```
echo str_replace( "&", "and", 'Trinidad & Tobago');
//"Triniad and Tobago" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T14:28:21.997

使用[str_replace](http://php.net/str_replace)：

```
$s1 = str_replace('&', 'and', $s1); 
```

如果您需要替换多个字符，str_replace 接受一个数组作为输入（用于搜索和替换）：

```
$s1 = str_replace(array('&', '%', '$'), array('and', 'percent', 'dollar'), $s1); 
```

# java - Android：onTouchEvent 开始新的活动

> ID：11701857
> 
> 赞同：0
> 
> 时间：2012-07-28T14:27:10.410
> 
> 标签：java, android, android-intent, android-activity, touch-event

我已经搜索了一段时间，但找不到适用于我的 android 代码的有效解决方案。至少我能够实现一个。

我有一个带有一些动画的活动（StartActivity）。然后我有一个 onTouchEvent。这可以很好地提示更多动画，但是在此之后我想打开一个新活动。

这是我的代码：

```
public class StartActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.start);

    RunAnimations(R.anim.translate1, R.anim.translate2);
}

public void RunAnimations(int t1, int t2) {
    Animation a = AnimationUtils.loadAnimation(this, t1);
    a.reset();
    Animation b = AnimationUtils.loadAnimation(this, t2);
    b.reset();
    ImageView drop = (ImageView) findViewById(R.id.drop);
    ImageView iflush = (ImageView) findViewById(R.id.iflush);
    drop.clearAnimation();
    iflush.clearAnimation();
    drop.startAnimation(a);
    iflush.startAnimation(b);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        RunAnimations(R.anim.translate3, R.anim.translate4);
    }
    return true;
}
} 
```

在onTouchEvent中，调用RunAnimations后，我想启动一个新的Activity（TipActivity）。就这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:34:27.597

`AndroidManifest`像这样向您的文件添加另一个活动：

```
<activity
    android:label="YourActivity"
    android:name=".YourActivity" >    
    <intent-filter >
        <action android:name="net.learn2develop.YourActivity" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

然后你可以做类似的事情（在调用之后`RunAnimations()`）：

```
startActivity(new Intent("net.learn2develop.YourActivity")); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:37:59.887

使用它：

```
Intent intent=new Intent(context, TipActivity.class);  
startActivity(intent);    
overridePendingTransition(R.anim.translate3, R.anim.translate4); 
```

^-^

# ios - 设置 b2revolutejoint 的角度

> ID：11701858
> 
> 赞同：0
> 
> 时间：2012-07-28T14:27:10.973
> 
> 标签：ios, cocos2d-iphone, box2d-iphone

根据我的阅读，在 Box2d 中，您可以使用 GetJointAngle 函数获得旋转关节的角度，但是在尝试设置角度时，成员 m_referenceAngle 受到保护。不能以编程方式设置角度吗？

我发现我可以将一个关节的角度应用到另一个身体：

浮动 FirstAngle = firstArmJoint->GetJointAngle(); secondArmBody->SetTransform(b2Vec2((750.0/PTM_RATIO),(520.0f+100)/PTM_RATIO),hourAngle);

我把它放在 ccTouchesMoved 中，这样当用户拖动第一个对象（从中检索 FirstAngle）时，第二个对象（secondArmBody）也被移动。

发生的情况是第二个主体在图像顶部而不是在锚点处旋转。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:59:21.537

`SetTransform()`可用于设置物体的位置和旋转。这完全独立于身体上的任何关节发生。例如，如果您想确保身体在给定时刻完全直立，您可以调用

```
body->SetTransForm(body->GetPosition(), 0); 
```

传递 0 作为角度值（直立）。我从来没有在一个有关节的身体上试过这个，但我怀疑它是否能正常工作。

当我遇到必须在某个角度制作旋转关节点的问题时，我通过在关节上启用电机并调整电机速度直到角度与我想要的角度匹配来解决它。这模拟了关节的真实运动。例子：

## 创建关节

```
b2RevoluteJointDef armJointDef;
armJointDef.Initialize(body1, body2,
    b2Vec2(body1->GetPosition().x,
    ((body1->GetPosition().y/PTM_RATIO));
armJointDef.enableMotor = true;
armJointDef.enableLimit = true;
armJointDef.motorSpeed = 0.0f;
armJointDef.maxMotorTorque = 10000.0f;
armJointDef.lowerAngle = CC_DEGREES_TO_RADIANS(lowerArmAngle);
armJointDef.upperAngle = CC_DEGREES_TO_RADIANS(upperArmAngle);
_world->CreateJoint(&armJointDef); 
```

## 指向关节

```
float targetAngle = SOME_ANGLE;
b2JointEdge *j = body->GetJointList();
b2RevoluteJoint *r = (b2RevoluteJoint *)j->joint;
if(r->GetAngle() > targetAngle){
    r->SetMotorSpeed(-1);
} else { r->SetMotorSpeed(1); } 
```

基本上，您会看到目标角度在当前角度的哪一侧，然后设置电机速度以使关节朝正确的方向移动。希望有帮助！

[http://www.box2d.org/manual.html](http://www.box2d.org/manual.html)

# ruby-on-rails - Rails，设计邀请 406 STI 出现不可接受的错误

> ID：11701872
> 
> 赞同：2
> 
> 时间：2012-07-28T14:28:13.513
> 
> 标签：ruby-on-rails, devise, http-status-code-406

有类似的问题，但我已经研究过了，但没有一个申请过。

我正在使用[设计](https://github.com/plataformatec/devise)和[设计邀请](https://github.com/scambra/devise_invitable)。导轨 3.2.6。

棘手的是我有两个用户模型。用户和艺术家从用户继承的单表继承设置。我有两个邀请控制器允许分别向用户和艺术家发送邀请。

现在的问题是艺术家无法接受他们的邀请。在提交更新密码的表单后，他们会收到 406 不可接受的错误。

相关代码：

# 路由：

```
 devise_for :users,
             :class_name => User,
             :controllers => { :invitations => 'user/invitations' }

  namespace :artist do
    # Special route for devise, artists invitation
    devise_scope :user do
      resource :invitation, :controller => :invitations, :only => [:create, :new, :update] do
        get :accept, :action => :edit
      end
    end
  end 
```

# 艺术家邀请控制器

```
class Artist::InvitationsController < Devise::InvitationsController
  respond_to :html

  # PUT /resource/invitation
  def update
    self.resource = Artist.accept_invitation!(params[resource_name])

    if resource.errors.empty?
      resource.pending
      flash[:notice] = "Welcome, complete your artist agreement to get started"
      sign_in(:user, resource)
      respond_with resource, :location => after_accept_path_for(resource)
    else
      respond_with_navigational(resource){ render :edit }
    end
  end
end 
```

# 表格说明。编辑.html.erb。

```
<%= form_for resource, :as => resource_name, :url => artist_invitation_path(resource_name), :html => { :method => :put } do |f| %>
  <%= f.hidden_field :invitation_token %>
  <%= f.label :password, class: 'control-label' %>
  <%= f.password_field :password, :placeholder => 'Enter a password' %>
  <%= f.label :password_confirmation, class: 'control-label' %>
  <%= f.password_field :password_confirmation, :placeholder => 'Confirm your password' %>
  <%= f.submit "Set my password", :'data-disable-with' => "Hang on..." %>
<% end %> 
```

# 接受标头

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Content-Length:236
Content-Type:application/x-www-form-urlencoded 
```

# 退货

```
Request URL:http://localhost:3000/artist/invitation.user
Request Method:POST
Status Code:406 Not Acceptable 
```

我可以看到格式中的某些内容必须关闭，因为在该 .user 末尾添加了响应。我终其一生都看不到这种情况发生的原因或地点。如果我遗漏了任何可以提供帮助的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:45:38.303

终于明白了

关键是要准确查看整个表单和控制器操作中的 resource_name 为您提供了什么。在我的情况下，当它需要成为 :artist 时，它继续回退到 :user ，正如 Frost 在评论中提到的那样，如果您注意使用 resource_name 的位置，生成的表单 html 会发生很大变化。需要重写控制器中的更新操作才能直接使用 :artist 并且需要调整 form_for 以从参数和 :as 参数中删除 resource_name。

# iphone - 访问父视图控制器

> ID：11701875
> 
> 赞同：1
> 
> 时间：2012-07-28T14:28:29.520
> 
> 标签：iphone, objective-c, uiviewcontroller

我有一个取消按钮，当我按下取消按钮时，我会弹出我当前的视图控制器。在弹出我的控制器之前，我想访问前一个视图控制器的一个成员（这是一个学生类）。所以我这样做：

```
StudentProfileViewController *controller = (StudentProfileViewController*)self.parentViewController;
    NSLog(@"%@", controller.student); 
```

我的应用程序在 NSLog 线上崩溃，错误是这样的：

```
[UINavigationController student]: unrecognized selector sent to instance 0x6865180 
```

奇怪的部分是它说“[UINavigationController student]”，但我的控制器是 UIViewController。

任何人都可以对此有所了解。我知道正在犯一些愚蠢的错误。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:40:59.670

仅当您首先从该视图模态呈现时， parentViewController 才会返回您正在寻找的控制器。看起来您正在尝试引用堆栈中的前一个控制器，而不是当前视图。在您的情况下，如果您是这样呈现的，则 parentViewController 是 navigationController。您正在将其转换为您希望它成为的控制器类，但事实并非如此。更合适的方法是在 init 方法中传递您希望引用的对象，或者最好是创建一个委托方法来告诉前一个视图该控制器何时完成，然后让前一个视图按预期做出反应。

# ios - iPad 中的 IPP 请求用户名

> ID：11701878
> 
> 赞同：1
> 
> 时间：2012-07-28T14:29:21.733
> 
> 标签：ios, ipad, printing

当我使用 ipad 打印到 uniFlow 服务器时，ipp requesting-user-name 属性设置为 guest。有谁知道这是否可以在 ipad 中使用配置文件或任何其他选项进行修改，以便可以从她的 ipad 识别用户？

打印服务器和 ipad 位于不同的子网中，并且 DNS-SD 配置为使打印机在 ios 中可见，因此 mDNS 和反向查找不是获取主机名（身份）的选项。

亲切的问候//每

# javascript - 如何将形状细分为给定大小的部分

> ID：11701881
> 
> 赞同：4
> 
> 时间：2012-07-28T14:29:45.530
> 
> 标签：javascript, math, graphics, graph, charts

我目前正在尝试构建一种饼图/voronoi 图混合（在画布/javascript 中）。我不知道它是否可能。我对此很陌生，我还没有尝试任何方法。

假设我有一个圆圈和一组数字 2、3、5、7、11。

我想将圆圈细分为与数字相当的部分（很像饼图），但形成格子/蜂窝状的形状。

![在此处输入图像描述](../Images/c3ae3f158c5a57c24688f61b1f899846.png)

这甚至可能吗？这是否非常困难，尤其是对于只做了一些基本饼图渲染的人来说？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:22:05.130

给定一组 voronio 中心（即每个中心的坐标列表），我们可以计算最接近每个中心的区域：

```
area[i] = areaClosestTo(i,positions) 
```

假设这些有点错误，因为我们没有将中心放在正确的位置。因此，我们可以通过将区域与理想区域进行比较来计算当前集合中的误差：

```
var areaIndexSq = 0;
var desiredAreasMagSq = 0;
for(var i = 0; i < areas.length; ++i) {
    var contrib = (areas[i] - desiredAreas[i]);
    areaIndexSq += contrib*contrib;
    desiredAreasMagSq += desiredAreas[i]*desiredAreas[i];
}
var areaIndex = Math.sqrt(areaIndexSq/desiredAreasMagSq); 
```

这是区域和期望区域之间的差向量的向量范数。可以把它想象成衡量最小二乘拟合线的好坏。

我们还想要某种蜂窝状图案，所以我们可以称之为`honeycombness(positions)`，并获得事物质量的整体度量（这只是一个开始，它的权重或形式可以是任何漂浮的东西）：

```
var overallMeasure = areaIndex + honeycombnessIndex; 
```

然后我们有一个知道猜测有多糟糕的机制，我们可以将它与修改位置的机制结合起来；最简单的就是在每个中心的 x 和 y 坐标上添加一个随机量。或者，您可以尝试将每个点移向面积过高的相邻区域，并远离面积过低的相邻区域。

这不是一个直接的解决方案，但除了计算最接近每个点的区域之外，它需要最少的数学运算，而且它是平易近人的。困难的部分可能是识别局部最小值并处理它们。

顺便说一句，获得该过程的起点应该相当容易；饼片的质心不应该离真相太远。

一个明确的优点是您可以使用中间计算来动画从饼图到 voronoi 的过渡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:24:55.723

这是我快速浏览后对此的看法。

假设存在`n`具有顶点/边的多边形，一般解决方案`k`将取决于`n`方程的解，其中每个方程的变量不超过`2nk`, （但恰好`2k`非零）。每个多边形方程中的变量都是相同的`x_1, x_2, x_3... x_nk`和`y_1, y_2, y_3... y_nk`变量。对于每个多边形的方程，恰好四个`x_1, x_2, x_3... x_nk`具有非零系数，并且恰好四个`y_1, y_2, y_3... y_nk`具有非零系数。`x_i`并且`y_i`根据父形状有不同的界限。为了简单起见，我们假设形状是圆形。边界条件为：`(x_i)^2 + (y_i)^2 <= r^2`

注意：我说不超过`2nk`，因为我不确定下限，但知道它不能超过`2nk`。这是多边形作为要求共享顶点的结果。

这些方程是确定的但有界的积分的集合，表示每个多边形的面积，多边形的面积相等`ith`：

`A_i = pi*r^2/S_i`

其中`r`是父圆的半径，`S_i`是分配给多边形的数字，如您的图表中所示。

四对独立的`(x_j,y_j)`，在多边形方程中都具有非零系数，将产生多边形的顶点。

这可能被证明是相当困难的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:05:29.577

边界是从一开始就固定的，还是可以稍微变形一下？

如果我必须解决这个问题，我会将这些区域从大到小排序。然后，从最大的区域开始，我将首先生成一个具有所需大小的随机凸多边形（沿圆的顶点）。下一个区域将与第一个区域共享一条边，但在其他方面也是随机和凸的。之后的每个多边形将从已经存在的多边形中选择一条现有的边，并且还将共享从那里开始的任何“凸”边（其中“凸边”是一个，如果用于新多边形，将导致新的多边形仍然是凸的）。

通过评估“总边界接近所需边界”的不同预期多边形位置，您可能会为您的初始目标生成一个廉价的近似值。这与词云的作用非常相似：将事物从最大到最小递增地放置，同时试图填充或多或少的封闭空间。

# ruby-on-rails - 运行 rake gems:install 后出错

> ID：11701885
> 
> 赞同：0
> 
> 时间：2012-07-28T14:30:00.737
> 
> 标签：ruby-on-rails

我想安装 fedena 学校管理系统。当我键入时，`rake gems:install`我收到以下错误：

```
/usr/local/share/gems/gems/rake-0.8.7/lib/rake/alt_system.rb:32: Use RbConfig instead of obsolete and deprecated Config.
(in /var/www/html/fedena)
rake aborted!
undefined method `name' for "Ascii85":String

(See full trace by running task with --trace) 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:56:41.047

对于 fedena rake 0.8.7 需要所以打开命令提示类型 gem install rake v-0.8.7

# python - 如何使用不同的数据库设置（非默认）启动 Django 开发服务器

> ID：11701887
> 
> 赞同：5
> 
> 时间：2012-07-28T14:30:08.583
> 
> 标签：python, database, django, settings, local

我在设置中有不同的 django 数据库配置，一个名为“default”，一个名为“clean”。

我如何运行`python manage.py runserver ip:port`绑定“干净”数据库设置而不是默认值的开发服务器（）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T14:49:36.803

您可以保存 2 个不同的 settings.py 并在运行 manage.py 时执行：python manage.py runserver --settings=[projectname].[settingsfile]。

根据您的数据库更改设置文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T14:53:55.863

```
if DEBUG:
    DATABASES = {
        'clean': {
            'ENGINE': 'django.db.backends.',
            'NAME': '',
            'USER': '',
            'PASSWORD': '',
            'HOST': '',
            'PORT': '',
            },
        }
else:
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.',
            'NAME': '',
            'USER': '',
            'PASSWORD': '',
            'HOST': '',
            'PORT': '',
            },
        } 
```

# c++ - 汇编/__asm 内联

> ID：11701888
> 
> 赞同：1
> 
> 时间：2012-07-28T14:30:10.293
> 
> 标签：c++, optimization, assembly, inline-assembly

我正在学习汇编并在我的 Digital Mars C++ 编译器中进行一些内联​​。我搜索了一些东西以使程序更好，并使用这些参数来调整程序：

```
use better C++ compiler//thinking of GCC or intel compiler

use assembly only in critical part of program 

find better algorithm

Cache miss, cache contention.

Loop-carried dependency chain.

Instruction fetching time.

Instruction decoding time.

Instruction retirement.

Register read stalls.

Execution port throughput.

Execution unit throughput.

Suboptimal reordering and scheduling of micro-ops.

Branch misprediction.

Floating point exception. 
```

我理解除了“寄存器读取停顿”之外的所有内容。

问题：谁能告诉我这在 CPU 和“乱序执行”的“超标量”形式中是如何发生的？正常的“乱序”似乎合乎逻辑，但我找不到“超标量”形式的合乎逻辑的解释。

问题 2：有人能否提供一些 SSE SSE2 和较新 CPU 的良好指令列表，最好包含微操作表、端口吞吐量、单位和一些计算表，以便找到一段代码的真正瓶颈？

我会很高兴有一个像这样的小例子：

```
//loop carried dependency chain breaking:
__asm
{
loop_begin:
....
.... 
sub edx,05h //rather than taking i*5 in each iteration, we sub 5 each iteration
sub ecx,01h //i-- counter
...
...
jnz loop_begin//edit: sub ecx must have been after the sub edx for jnz
}
//while sub edx makes us get rid of a multiplication also makes that independent of ecx, making independent 
```

谢谢你。

电脑：奔腾-M 2GHz，Windows XP-32 位

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T15:00:28.793

您应该查看 Agner Fogs 优化手册：[Optimizing software in C++: An optimization guide for Windows, Linux and Mac platforms](http://www.agner.org/optimize/optimizing_cpp.pdf)或[Optimizing subroutines in assembly language: An optimization guide for x86 platforms](http://www.agner.org/optimize/optimizing_assembly.pdf)。

但要真正超越现代编译器，您需要对要优化[的架构有一些良好的背景知识： Intel、AMD 和 VIA CPU 的微架构：汇编程序员和编译器制造商的优化指南](http://www.agner.org/optimize/microarchitecture.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:56:24.997

我的两分钱：[英特尔架构开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html/) 非常详细，还有所有 SSE 指令，包括操作码、指令延迟和吞吐量，以及您可能需要的所有血腥细节：)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T12:26:48.743

“超标量”停顿是调度指令的一个附加问题。现代处理器不仅可以乱序执行指令，还可以使用并行执行单元一次执行 3-4 条简单指令。

但要真正做到这一点，指令必须彼此充分独立。例如，如果一条指令使用前一条指令的结果，它必须等待该结果可用。

在实践中，这使得手动创建最佳装配程序*变得极其*困难。你真的必须像一台计算机（编译器）来计算指令的最佳顺序。如果你改变了一条指令，你必须从头再来......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T19:31:49.100

对于问题 #1，我强烈推荐[Computer Architecture: A Quantitative Approach](https://rads.stackoverflow.com/amzn/click/com/012383872X)。它很好地解释了上下文中的概念，因此您可以看到全局。这些示例对于对优化代码感兴趣的人也非常有用，因为它们始终专注于*优化*和改进瓶颈。

# android - 我们是否需要为 IntentService 上的每个 startService 创建新的 Intent？

> ID：11701894
> 
> 赞同：0
> 
> 时间：2012-07-28T14:31:23.090
> 
> 标签：android, service, android-intent

正如问题所提到的，我正在重新使用相同的 Intent 对象，用不同的附加数据重新加载它，然后在 startService 中使用它。这个可以吗？还是我需要在每个 startService 之前执行“new Intent(context, ServiceClass)”？

我正在使用服务进行连续的处理流，所以如果每次需要将数据发送到服务时都必须创建一个新的 Intent，我会有点担心。

问题是目前，服务似乎只执行一次。所有后续的 startService 调用似乎都不会触发服务。可能是什么原因？

编辑：添加代码

这是主要活动：

```
public class Measurement extends Activity{

    AudioRecord recorder;   
    int iAudioBufferSize;
    boolean bRecording; 
    int iBytesRead;

    // UI stuff 
    Button bt_Measure;
    Button bt_Stop; 
    RadioButton rd_Live;
    RadioButton rd_DataCollection;
    RadioButton rd_SampleCollection;
    Thread recordThread;
    Intent sampleDataIntent;

    @Override
    public void onDestroy() {       
    super.onDestroy();
    if (recorder != null)
        recorder.release();     
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    bt_Measure = (Button) findViewById(R.id.bt_measure);
    bt_Measure.setEnabled(true);
    bt_Stop = (Button) findViewById(R.id.bt_stop);
    rd_Live = (RadioButton) findViewById(R.id.rd_live);
    rd_DataCollection = (RadioButton) findViewById(R.id.rd_datacollection);
    rd_SampleCollection = (RadioButton) findViewById(R.id.rd_samplecollection);
    rd_Live.setChecked(true);

    bRecording = false;
    int iSampleRate = AudioTrack
            .getNativeOutputSampleRate(AudioManager.STREAM_SYSTEM);
    iAudioBufferSize = AudioRecord.getMinBufferSize(iSampleRate,
            AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);
    recorder = new AudioRecord(AudioSource.MIC, iSampleRate,
            AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT,
            iAudioBufferSize);
    sampleDataIntent = new Intent(this, DetectionService.class);

    bt_Measure.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (rd_Live.isChecked()){ // radio button for Live processing
                if (!bRecording) {                  
                    bt_Measure.setEnabled(false);
                    bt_Stop.setEnabled(true);
                    try {
                        recorder.startRecording();
                        bRecording = true;

                        recordThread = new Thread() {
                            @Override
                            public void run() {
                                byte[] buffer = new byte[iAudioBufferSize];                                 
                                int iBufferReadResult;
                                int iBytesToRead = iAudioBufferSize;
                                iBytesRead = 0;
                                while (!interrupted()) {
                                    iBufferReadResult = recorder.read(buffer,
                                            0, iBytesToRead);                                                                                   
                                    sampleDataIntent.removeExtra("THE_DATA");
                                    sampleDataIntent.putExtra("THE_DATA", buffer);
                                    sampleDataIntent.putExtra("FRAME_SIZE", iBufferReadResult);
                                    startService(sampleDataIntent);                                                                                 
                                    iBytesRead = iBytesRead + iBufferReadResult;
                                }
                            }
                        };
                        recordThread.start();
                    } catch (Exception e) {
                        tv_Speed.setText(e.getLocalizedMessage());
                    }
                }
            }
        }
    });
    }
} 
```

这是检测服务：

```
public class DetectionService extends IntentService {

ByteArrayOutputStream baos;
byte[] sampleBuffer;
byte[] lastSampleBuffer;
PeakFilter peakFilter1;
PeakFilter peakFilter2;
PeakFilter peakFilter3;
PeakFilter peakFilter4;

float fSum = 0;
short sAvgAmpl = 0;
short sMaxAvg = 0;
short sPeakAmpl = 0;

public DetectionService() {
    super("DetectionService");
    baos = new ByteArrayOutputStream();
    peakFilter1 = new PeakFilter(260, 20, 44100);
    peakFilter2 = new PeakFilter(260, 20, 44100);
    peakFilter3 = new PeakFilter(260, 20, 44100);
    peakFilter4 = new PeakFilter(260, 20, 44100);
}

@Override
protected void onHandleIntent(Intent sampleDataIntent) {
    try {
        baos.write(sampleDataIntent.getByteArrayExtra("THE_DATA"));
    } catch (IOException e1) {          
        e1.printStackTrace();
    }
    if (baos.size() > 44100 * 5) // 5 second frame
        sampleBuffer = baos.toByteArray();
    else
        return;

    try {

            // NON THREAD IMPEMENTATION
            // Threaded implementation has the same Try..Catch executed in
            // separate thread. Neither seems to be running more than once.

        short[] preFilterBuffer = new short[sampleBuffer.length/2];
        int iSample = 0;

        for (int i = 0, j = 0; i < preFilterBuffer.length; i++, j+=2){                          
            preFilterBuffer[iSample] = (short) (sampleBuffer[j+1] << 8 | sampleBuffer[j]);
            iSample++;
        }

        short[] FilteredSamples = new short[preFilterBuffer.length];            
        // Filters are not spawning threads. Purely Math processing.
        peakFilter1.filter(FilteredSamples, preFilterBuffer, preFilterBuffer.length);
        peakFilter1.amplify(FilteredSamples, FilteredSamples, 3);
        peakFilter2.filter(FilteredSamples, FilteredSamples, FilteredSamples.length);
        peakFilter2.amplify(FilteredSamples, FilteredSamples, 3);
        peakFilter3.filter(FilteredSamples, FilteredSamples, FilteredSamples.length);
        peakFilter3.amplify(FilteredSamples, FilteredSamples, 2);
        peakFilter4.filter(FilteredSamples, FilteredSamples, FilteredSamples.length);

        // LOT OF MATH on filtered samples
        // ......
        // 
    } catch (Exception e) {         
        e.printStackTrace();            }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:35:19.007

您可以为您的服务添加方法，例如`putData(...)`... 启动服务后，如果它... 活着，我认为您只需将其用作对象。

# c - 将结构复制到另一个

> ID：11701895
> 
> 赞同：1
> 
> 时间：2012-07-28T14:31:25.663
> 
> 标签：c, struct, memcpy

我想将存储在结构中的一些数据复制到另一个结构中。下面的代码有用吗？？推荐还是不推荐？

```
#define SIZE 100
struct {
int *a;
int *b;
} Test;
Test t1;
t1.a = malloc(SIZE);
t1.b = malloc(SIZE);

Test t2;
memcpy(t2,t1,sizeof(Test)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T14:34:49.900

它是否有效取决于您打算做什么。`t1`它从to复制位`t2`，包括填充，但当然它复制指针，而不是指向的值。

如果你不关心填充位 - 为什么你应该 - 一个简单的分配

```
Test t2 = t1; 
```

是您复制指针所需的全部内容。

如果您希望复制和复制指向的值，您的代码和简单的赋值都不起作用。

要复制指向的内存块，首先必须知道它们的大小。没有（便携式）方法可以从指针中找出指向的内存块的大小。

如果大小由 a 给出`#define`，您当然可以重用它，否则您需要将已分配块的大小存储在某处。

但是由于新分配的内存块与要复制的块具有不同的地址，我们根本不需要复制指针 vlaues from `t1`to `t2`。

```
Test t2;
t2.a = malloc(SIZE);  /* be aware that this is bytes, not number of ints */
t2.b = malloc(SIZE);
if (t2.a == NULL || t2.b == NULL) {
    /* malloc failed, exit, or clean up if possible */
    fprintf(stderr,"Allocation failure, exiting\n");
    exit(EXIT_FAILURE);
}
/* malloc was successful in both cases, copy memory */
memcpy(t2.a, t1.a, SIZE);
memcpy(t2.b, t1.b, SIZE); 
```

# c# - C# 继承的方法或属性可以在不创建新方法的情况下使用派生类成员吗？

> ID：11701901
> 
> 赞同：1
> 
> 时间：2012-07-28T14:32:31.687
> 
> 标签：c#

我正在使用 C# 编写一个简单的游戏来帮助我学习基本的面向对象概念。

在下面的这段代码中：

```
class entity
    {
    int hp;
    string name;

    public entity()
    {
        hp = 1;
        name = "entity";
    }

    public string status()
    {
        string result;
        result=name + "#" + " HP:" + hp;
        return result;
    }

    class dragon : entity
    {

    new public string name;
    new int hp;

    public dragon()
    {
        hp = 100;
        name = "Dragon";

    }
} 
```

我为“龙”制作了一个对象

```
dragon mydragon = new dragon(); 
```

问题在于以下代码：

```
mydragon.status(); 
```

**这将返回一个字符串，但带有实体**类对象的“name”和“hp” （即 hp=1，name=entity）。

我想让它返回龙对象的值（hp=100，name=dragon）。我不确定我做错了什么，但看起来很简单。

在摆弄和挣扎了几个小时之后，我能想到的唯一解决方案就是简单地将**status()**方法复制并粘贴到 dragon 类。但我确信有更好的方法来做到这一点。

提前谢谢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T14:35:10.497

只需使用访问修饰符装饰字段`hp`和`name`类。这样，它们也将可供课堂使用，您不必重新定义它们。您可以保持' 的构造函数原样，因为它将在类中的构造函数之后运行，从而覆盖其字段的值。`entity``protected``dragon``dragon``entity`

它可能如下所示：

```
public class Entity
{
    protected int hp;
    protected string name;

    public Entity()
    {
        hp = 1;
        name = "entity";
    }

    public override string ToString()
    {
        string result = name + "#" + " HP:" + hp;
        return result;
    }
}

public class Dragon : Entity
{
    public Dragon()
    {
        hp = 100;
        name = "Dragon";
    }
} 
```

C# 中的类名习惯上以大写字母开头。此外，对于返回类的字符串表示之类的东西，`ToString()`通常会覆盖该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:42:45.560

我会在类中添加`virtual`关键字到方法和每个继承的类中。`entity``status``override`

编辑：如果您只想使用 Nikola 的代码`.ToString()`而不是`Status()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:43:00.453

进行以下更改...

```
class entity
    {
    protected int hp;
    protected string name;
...

class dragon : entity
    {

    // new public string name;  - you're creating new variables hiding the base ones
    // new int hp;              - ditto. Don't need them
.... 
```

# python - 范围内的列表

> ID：11701902
> 
> 赞同：-2
> 
> 时间：2012-07-28T14:32:36.477
> 
> 标签：python

如何将 for 循环中的所有数字输入到列表中？

例如：

```
for i in range(0, 5):
    # I want to produce this list: [0,1,2,3,4] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T14:41:39.993

打开python解释器，输入：

```
range(0,5) 
```

结果可能会让你大吃一惊。阅读[http://docs.python.org/library/functions.html#range](http://docs.python.org/library/functions.html#range)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:42:40.210

Felix 是对的，只需使用 range(N,M) 函数。从文档（[http://docs.python.org/library/functions.html#range](http://docs.python.org/library/functions.html#range)）中，第一句话说：

这是创建包含算术级数的列表的通用功能。

从您的示例代码中您已经知道如何使用它，只是没有意识到它返回一个列表并且它不是 for 循环本身的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T14:34:10.733

```
def naturalNumbers(n): 
  return range(1,n+1) 
```

对于python 3，

```
def naturalNumbers(n): 
  return list(range(1,n+1)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T15:00:09.770

> 问题是我不知道如何将这些数字输入到列表中

尽管该`list(range(1, n+1))`方法已经是您能做的最好的事情，但我仍然想回答这个问题，以便您以后可以构建不同的列表：

```
> myList = [] # create an empty list
> myList.append(2) # append 2 to the list
> myList
[2]
>>> myList += [1] # concat with a single-item list
>>> myList
[2, 1]
>>> for i in range(3, 10, 2): # add multiple items
        myList.append(i)

>>> myList
[2, 1, 3, 5, 7, 9] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T15:09:01.603

由于尚未明确给出答案：

```
myList = list(range(0,5)) 
```

# php - 这是关于 Jquery/JS，如果我更改元素的 HTML - 我是否能够对其执行其他 Jquery/JS 操作

> ID：11701904
> 
> 赞同：0
> 
> 时间：2012-07-28T14:32:58.363
> 
> 标签：php, javascript, jquery, ajax

我有一个脚本，在单击时执行 ajax 调用连接到数据库获取图像名称并在 < -img - > 内设置图像名称，并在其后添加一个隐藏的复选框，然后回显它。

然后我将返回的 ajax 消息作为 div 的 HTML。我的问题是我能否对插入的内容执行更多操作..

主要目标是能够像单击复选框一样单击图像（这部分已经为我排序）但是无论我尝试什么，我都无法使用 .click 功能..

这是代码。

这是与图像相呼应的 PHP 部分。

```
if($_POST['updateIgallery'] == 'ajax'){
    global $wpdb;
    $table_name= $wpdb->prefix . "table_T";
    $imagecounter = 1;
    $toecho = '';
    $currentselected = $wpdb->get_row("query");
    preg_match_all('/\/(.+?\..+?)\//',$currentselected ['image_gal'],$preresualts); // images are stored with /image/.
    foreach ($preresualts[1] as $imagename){
        $toecho .= '
        <img rel="no" id="JustantestID" class="JustaTestClass" src="'.site_url().'/wp-content/plugins/wp-ecommerce-extender/images/uploads/'.$imagename.'">
        <input name="DoorIMGtoDeleteIDcheck'.$imagecounter.'" style="display:none;" name="DoorIMGtoDelete['.$imagecounter.']" value="/'.$imagename.'/" type="checkbox">
        ';
        $imagecounter++;
    }
    echo $toecho;
} 
```

这是发送和接收 HTML 并将 HTML 插入 div 的 ajax 部分：

```
$.ajax({
        type: "POST",
        url: "/wp-content/plugins/wp-ecommerce-extender/DB_Functions.php",
        data: { updateIgallery: "ajax", CurrentDoorIDnum: $('#dooridforgallery').val()}
        }).success(function(insertID) {
                $("#ImgGalleryID").html(insertID);
            }); 
```

到目前为止，我遇到的问题如下：

```
$("#JustantestID").click(function() {
//DoorImageGallery($(this).attr('id')); // the function i will use if the alert actually works
    alert("kahdaskjdj");
    return true;
 }); 
```

我希望问题和代码是可以理解的。

先谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:38:41.777

当您替换元素的 html 时，其中的所有元素都会被删除并消失。这意味着附加到它们的事件处理程序也将被删除。

您可以尝试将事件处理程序附加到页面上静态且永久的更高级别元素。没有更多信息，我将使用`document`：

```
$(document).on( "click", "#yaniv", function() {
    alert("kahdaskjdj");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:39:24.853

由于元素是使用 ajax 动态插入到 DOM 中的，因此您必须将事件委托给绑定单击处理程序时实际存在的父元素，在这种情况下看起来是`#ImgGalleryID`

```
$('#ImgGalleryID').on('click', '#yaniv', function() {
    DoorImageGallery(this.id);
    alert("kahdaskjdj");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:39:15.610

```
$('img.JustaTestClass').bind('click', function() {
  var checkbox = $(this).siblings('input[type=checkbox]');
  if (!checkbox.is(':checked')) checkbox.attr('checked', true);
  else checkbox.attr('checked', false);
}); 
```

# c# - 根据当前用户是否是在 ListView 中发布评论的人删除评论

> ID：11701906
> 
> 赞同：0
> 
> 时间：2012-07-28T14:33:01.000
> 
> 标签：c#, asp.net

如何根据使用 ListView 发布特定评论的用户删除评论？我添加了一个按钮并将其设为 Visible false，以便在我的 .cs 代码中，当我检查当前登录用户是发布评论的用户时，删除按钮将可见。目前，我试过这个：

```
protected void PostCommentButton_Click(object sender, EventArgs e)
{
    if (!Page.IsValid)
        return;

    MembershipUser currentUser = Membership.GetUser();
    Guid currentUserId = (Guid)currentUser.ProviderUserKey;

    string connectionString = ConfigurationManager.ConnectionStrings["CommentConnectionString"].ConnectionString;
    string insertSql = "INSERT INTO Comments(Subject, Body, UserId) VALUES(@Subject, @Body, @UserId)";

    using (SqlConnection myConnection = new SqlConnection(connectionString))
    {
        myConnection.Open();

        SqlCommand myCommand = new SqlCommand(insertSql, myConnection);
        myCommand.Parameters.AddWithValue("@Subject", Subject.Text.Trim());
        myCommand.Parameters.AddWithValue("@Body", Body.Text.Trim());
        myCommand.Parameters.AddWithValue("@UserId", currentUserId);

        myCommand.ExecuteNonQuery();

        myConnection.Close();

        if (currentUser.UserName == Eval("UserName").ToString())
    {
        Control deleteButton = e.Item.FindControl("Button2");
        deleteButton.Visible = true;
    } 
```

}

但这给了我错误。它指出“System.EventArgs”不包含“Item”的定义，并且找不到接受“System.EventArgs”类型的第一个参数的扩展方法“Item”。我将此代码放在我的 PostComment 按钮中。我在哪里做错了吗？

这是显示的错误。

编译错误

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS1061：“System.EventArgs”不包含“Item”的定义，并且找不到接受“System.EventArgs”类型的第一个参数的扩展方法“Item”（您是否缺少 using 指令或装配参考？）

源错误：

```
Line 59:         TextBox2.Text = string.Empty;
Line 60: 
Line 61:         if (e.Item.ItemType == ListViewItemType.DataItem)
Line 62:         {
Line 63:             ListViewDataItem currentItem = (ListViewDataItem)e.Item; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:26:31.133

如果 Button2 位于页面上，那么您可以找到参考

```
Button btn = Page.FindControl("Button2"); 
```

如果它位于列表视图内，那么您可以找到它

```
if (e.Item.ItemType == ListViewItemType.DataItem)
{
   ListViewDataItem currentItem = (ListViewDataItem)e.Item;
   Button btn = (Button)currentItem.FindControl("Button2");
} 
```

# python - 金字塔子请求

> ID：11701920
> 
> 赞同：5
> 
> 时间：2012-07-28T14:35:00.250
> 
> 标签：python, pyramid

由于搜索，我需要向另一个 URI 调用 GET、POST、PUT 等请求，但我无法在金字塔内部找到一种方法。目前有什么办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T15:59:17.810

只需使用现有的 python 库来调用其他网络服务器。

在 python 2.x 上，使用[`urllib2`](http://docs.python.org/library/urllib2.html)，对于 python 3.x，使用[`urllib.request`](http://docs.python.org/py3k/library/urllib.request.html)。或者，您可以安装[`requests`](https://requests.readthedocs.io/).

请注意，在您自己提供请求的同时从您的服务器调用外部站点可能意味着您的访问者最终会等待停止响应的第 3 方 Web 服务器。确保设置适当的超时时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T22:53:49.107

金字塔使用 webob，它具有 1.2 版的客户端 api

```
from webob import Request
r = Request.blank("http://google.com")
response = r.send() 
```

通常，您想为请求覆盖的任何内容都将作为参数传入。

```
from webob import Request
r = Request.blank("http://facebook.com",method="DELETE") 
```

另一个方便的功能是您可以将请求视为通过网络传递的 http

```
print r

DELETE  HTTP/1.0
Host: facebook.com:80 
```

[文档](http://docs.webob.org/en/latest/reference.html#id1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T20:12:45.003

还要检查响应状态代码：response.status_int 例如，我使用它来检查我的内部 URI，并查看给定的相对 URI 是否真的由框架提供（例如生成面包屑并将中间路径作为链接仅当存在是后面的页面）

# objective-c - OCMock 无法识别被调用的选择器

> ID：11701924
> 
> 赞同：0
> 
> 时间：2012-07-28T14:35:20.017
> 
> 标签：objective-c, unit-testing, ocmock

我正在为使用 OCMock 的测试用例而苦苦挣扎。到目前为止，我在几个项目中使用了 OCMock，它总是按我的想法工作。我有以下方法来测试`[self setNeedsDisplay]`当我设置一个名为`image`.

```
- (void)testSetTapColorCallsDrawRect 
{
    SMColorButton *button = [[SMColorButton alloc] initWithImage:nil];
    id mock = [OCMockObject partialMockForObject:button];

    // Exptect setNeedsDisplay. 
    [[mock expect] setImage:OCMOCK_ANY];
    [[mock expect] setNeedsDisplay];

    button.image = [UIImage imageNamed:@"Button.png"];

    [mock verify];
} 
```

属性的设置器`image`看起来像这样。

```
- (void)setImage:(UIImage *)anImage
{
    // Set the image if it changed.
    if (anImage != image) {
        image = anImage;
        [self setNeedsDisplay];
    }
} 
```

你可以看到`[self setNeedsDisplay]`在setter中被调用。但是当我运行测试时，我收到以下错误：

`OCPartialMockObject[SMColorButton]: expected method was not invoked: setNeedsDisplay`

看起来好像没有调用该方法。但是，如果我在 setter 方法中设置断点，它会停止并显示该行已由应用程序执行。

你能帮我吗？我不明白我做错了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:02:52.447

问题是你在嘲笑你正在测试的方法，`setImage:`. 这种期望会拦截调用，因此它永远不会遵循被测类中的代码路径。尝试将您的测试更改为：

```
- (void)testSetTapColorCallsDrawRect 
{
    SMColorButton *button = [[SMColorButton alloc] initWithImage:nil];
    id mock = [OCMockObject partialMockForObject:button];    
    [[mock expect] setNeedsDisplay];

    button.image = [UIImage imageNamed:@"Button.png"];

    [mock verify];
} 
```

# c# - C#/ASP：如何处理母版页中的页面异常？

> ID：11701927
> 
> 赞同：0
> 
> 时间：2012-07-28T14:35:44.367
> 
> 标签：c#, asp.net, exception-handling, master-pages

我想知道是否有任何方法可以在母版页中处理异常。让我们假设这个非常简单的情况：

`Site.Master:`

```
protected void Page_Init(object sender, EventArgs e)
    {
        try
        {
            DoStuffFromChildPage(); 
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        }

    } 
```

`Default.aspx:`

```
protected void Page_Init(object sender, EventArgs e)
    {
        throw new Exception("Test Exception");
    } 
```

这只是对我的想法/概念的简单概述。我试图阻止在使用 master 的每个页面中编写 try..catch 代码块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:38:54.203

我不久前研究过这个问题，但从未找到任何真正的好方法。所有其他选项最终变得比它的价值更复杂。您可以考虑根本不使用 try/catch，而只使用自定义错误页面，但我不确定这是否是您想要的。

您还可以创建自己的中央异常处理程序，并且当您仍然在页面和母版页中放置 try/catch 时，至少它们将在同一个地方处理。

# linux - 将文件移动到自己的目录中

> ID：11701933
> 
> 赞同：1
> 
> 时间：2012-07-28T14:37:07.557
> 
> 标签：linux, bash, ubuntu

我有几百个rar文件。我想为每个 rar 文件创建一个目录，然后将文件移动到新创建的目录中。

这是我用来创建 rar 的代码

```
#!bin/bash
for f in *; do 
rar a -s -m5 "${f%.*}.rar" "$f";
done 
```

这是我用来移动文件的代码。

```
#!/bin/bash
for i in *.rar; do
dir=$(echo "$i" | \
sed 's/\(.\)\([^ ]\+\) \([^ ]\+\) - \(.*\)\.pdf/\1\/\1\2 \3/')
dir="DestinationDirectory/$dir"
mkdir -p -- "$dir" && mv -uv "$i" "$dir/$i"
done 
```

问题是它使用扩展名创建目录。

```
ie: file irclog3_26_198.rar is moved into folder /DestinationDirectory/irclog3_26_1988.rar/irclog3_26_1988.rar 
```

我希望创建该文件夹时忽略 .rar，而只使用文件名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T14:48:07.490

怎么样：

```
dir="${dir%.rar}"
mkdir -p -- "$dir" ... 
```

[在abs](http://tldp.org/LDP/abs/html/string-manipulation.html)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:57:27.540

```
dir=$(echo ${i[@]::-4}) 
```

`${name[@]:pos:len})`获取字符串/数组的子字符串/子数组，对于字符串，`[@]`可以避免。

```
dir=$(echo ${i::-4}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:00:08.950

您可以使用普通的 bash shell 参数扩展[https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html](https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)

FILE="测试.rar"

回声“${FILE%%.*}”

--> 测试

# jquery - 在 jquery mobile 中显示对话框时要调用的事件

> ID：11701935
> 
> 赞同：0
> 
> 时间：2012-07-28T14:37:19.500
> 
> 标签：jquery, jquery-mobile

我有一个 jquerymobile 应用程序，有些页面加载 ajax 网络调用很重，所以我想显示一个对话框。我已经设置好了，但由于某种原因它非常显示。所以看起来页面只是空的，没有做任何工作。我应该调用 pageinit 函数还是 pageshow？谢谢你的帮助。

```
 $('#MyAlbums').live('pagebeforeshow', function (event) {
             $.mobile.showPageLoadingMsg();
              var myselect = $("select#select-choice-1");
              myselect[0].selectedIndex = 0;
              myselect.selectmenu("refresh");
            GetMyAlbumInformation('full');
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:43:21.663

```
$(document).bind('mobileinit', function(){
  $('#MyAlbums').live('pagebeforeshow', function (event) {
    $.mobile.loadingMessage= ' The message I want to display ';
    $.mobile.showPageLoadingMsg();
    var myselect = $("select#select-choice-1");
    myselect[0].selectedIndex = 0;
    myselect.selectmenu("refresh");
    GetMyAlbumInformation('full');
   });
}); 
```

# c++ - 将鼠标事件连接到 wxStaticBitmap (wx 2.8)

> ID：11701937
> 
> 赞同：1
> 
> 时间：2012-07-28T14:37:41.513
> 
> 标签：c++, user-interface, wxwidgets, codeblocks

大家好，我是来打死马的。。

基本上我正在做的是将东西分配到地图上。

**地图**：一个 wxStaticBitmap 对象，背景由用户上传 **炸弹（lol）**：一个 wxStaticBitmap 对象

我现在设法使用 wxMemoryDC + wxDC 将炸弹合并到地图上的任意位置。

然而，我完全坚持用鼠标设置“炸弹”。我想点击地图上的某个地方，不知何故，炸弹会落在我刚刚点击的位置。

我对 wxMouseEvent 和 EVT_MOTION（嗯，就像在顶部声明的宏）进行了尝试，显然它们只适用于 wxWindow 或 wxFrame。

我想知道如何可能通过 Connect() 将鼠标事件绑定到 staticbitmap 但我没有找到关于炸弹分配的正确用法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-04T10:41:25.223

我发现的最好和最简单的解决方案是将自己的事件处理程序连接到 wxStaticBitmap，如下所示：

```
sb->Connect(wxID_ANY,wxEVT_MOTION,
    wxMouseEventHandler(MyFrame::OnMouse),NULL,this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:38:51.997

通常，最好创建一个单独的 wxPanel 作为框架的子级，然后将所有小部件创建为 wxPanel 的子级。这样一来，大多数事情都按您自然的预期工作，并且您遇到的问题更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-17T06:41:48.743

你可以这样做来连接鼠标移动，鼠标左键向下和鼠标左键向上：

```
thiri = new wxStaticBitmap(this, wxID_ANY, wxImage(966, 680), /*image start point*/wxPoint(0,0), /* canvas size to display*/ wxSize(966, 680));

// mouse event on image
thiri->Connect( wxEVT_LEFT_DOWN, wxMouseEventHandler(Panel::OnMouseLeftDown), NULL, this );
thiri->Connect( wxEVT_MOTION, wxMouseEventHandler(Panel::OnMouseMove), NULL, this );
thiri->Connect( wxEVT_LEFT_UP, wxMouseEventHandler(Panel::OnMouseLeftUp), NULL, this); 
```

# ruby-on-rails-3 - 在 VPS 上的轨道上安装 ruby

> ID：11701955
> 
> 赞同：2
> 
> 时间：2012-07-28T14:40:14.017
> 
> 标签：ruby-on-rails-3, rvm

我设法在本地安装它没有任何问题，但在我的 VPN 上我根本无法遵循指南。执行在 gem install rails -v 3.2.3 处停止，出现一个我在谷歌搜索数小时后似乎无法修复的错误。

```
gem install rails -v 3.2.3
========================================
Fetching: i18n-0.6.0.gem (100%)
Fetching: multi_json-1.3.6.gem (100%)
Fetching: activesupport-3.2.3.gem (100%)
Fetching: builder-3.0.0.gem (100%)
Fetching: activemodel-3.2.3.gem (100%)
Fetching: rack-1.4.1.gem (100%)
Fetching: rack-cache-1.2.gem (100%)
Fetching: rack-test-0.6.1.gem (100%)
Fetching: journey-1.0.4.gem (100%)
Fetching: hike-1.2.1.gem (100%)
Fetching: tilt-1.3.3.gem (100%)
Fetching: sprockets-2.1.3.gem (100%)
Fetching: erubis-2.7.0.gem (100%)
Fetching: actionpack-3.2.3.gem (100%)
Fetching: arel-3.0.2.gem (100%)
Fetching: tzinfo-0.3.33.gem (100%)
Fetching: activerecord-3.2.3.gem (100%)
Fetching: activeresource-3.2.3.gem (100%)
Fetching: mime-types-1.19.gem (100%)
Fetching: polyglot-0.3.3.gem (100%)
Fetching: treetop-1.4.10.gem (100%)
Fetching: mail-2.4.4.gem (100%)
Fetching: actionmailer-3.2.3.gem (100%)
Fetching: thor-0.14.6.gem (100%)
Fetching: rack-ssl-1.3.2.gem (100%)
Fetching: json-1.7.4.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
    ERROR: Failed to build gem native extension.

        /home/app-user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
creating Makefile

make
compiling generator.c
generator.c: In function 'isArrayOrObject':
generator.c:867:5: warning: suggest parentheses around '&&' within '||'
linking shared-object json/ext/generator.so

make install
/usr/bin/install -c -m 0755 generator.so /home/app-user/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.4/lib/json/ext
installing default generator libraries

Gem files will remain installed in /home/app-user/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.4 for inspection.
Results logged to /home/app-user/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.4/ext/json/ext/generator/gem_make.out 
```

我正在使用的指南：[http](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/) ://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/ 我也尝试了其他指南。弹出同样的错误。有任何想法吗？

# php - Zend_Dom_Query 如何获取当前节点的 html 代码

> ID：11701959
> 
> 赞同：0
> 
> 时间：2012-07-28T14:40:36.520
> 
> 标签：php, zend-dom-query

我有节点，并在循环中迭代它们。

```
$html = <<<HTML
    <div id="test">
    <span>1</span>
    <span>2</span>
    </div>
HTML;
$dom= new Zend_Dom_Query($html);
$results = $dom->query('span');
foreach($results as $node){
...
} 
```

如何获取节点的html代码？（不是innerHTML，完整的HTML代码`<span>1</span>`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:50:06.623

```
$htmlNode = iconv('UTF-8','ISO-8859-1',$results->getDocument()->saveXML($node)); 
```

Iconv 存在这里是因为我有俄语字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T13:40:22.003

我最近正在研究 Zend_Dom_Query。很难弄清楚这一点。终于得到了解决方案。所以这个答案是为那些仍在挣扎的人准备的。

```
$dom = new Zend_Dom_Query($html);
$results = $dom->query('div#test');
foreach($results as $node){
    if($node->hasChildnodes()) {
        $childNodes = $node->childNodes;
        $countOfNodes = $childNodes->length;
        $firstSpan = $childNodes->item(0)->C14N();
    }
} 
```

`$firstSpan`将包含`<span>1</span>`. 您还可以循环使用节点`$countOfNodes`来获取第二个跨度或第 n 个元素

请查看[PHP:DOMElement - Manual](http://php.net/manual/en/class.domelement.php)和[PHP:DOMNodeList](http://php.net/manual/en/class.domnodelist.php)了解更多信息。

# java - Java替换字符串

> ID：11701962
> 
> 赞同：0
> 
> 时间：2012-07-28T14:40:46.873
> 
> 标签：java, mysql

大家好，我的java应用程序中有以下代码

```
DROP TABLE IF EXISTS "countries";
CREATE TABLE "countries" (
  "CNT_ISO2" varchar(2) NOT NULL,
  "CNT_CODEN" int(11) NOT NULL,
  "CNT_NAME" varchar(100) NOT NULL,
  "CNT_NAME_SHORT" varchar(50) NOT NULL,
  "CNT_CONTINENT" int(11) DEFAULT NULL,
  PRIMARY KEY ("CNT_ISO2")
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

**使用java我想用另一个字符替换所有varchar说文本**

**例如：- varchar(2) 和 varchar(50) 都应该替换为文本**

谢谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:14:03.867

试试下面的代码：

```
stmt.replaceAll("varchar(\\(\\d+\\))?", "text"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:43:09.767

我认为您的解决方案可以像

```
stmt.replaceAll("varchar(\\(\\d+\\))?", "text") 
```

# vb.net - vb.net浏览文件夹描述空间不够

> ID：11701963
> 
> 赞同：1
> 
> 时间：2012-07-28T14:40:47.360
> 
> 标签：vb.net, folderbrowserdialog

我正在使用`FolderBrowserDialog`允许用户选择存储文件的文件夹。我还使用该`description`属性为用户提供有关放置此类文件夹的理想位置的提示。但是，描述文本的空间似乎只允许 3 行文本，这对我来说还不够。文本的其余部分被截断。有没有办法强制对话框允许更长的描述？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:16:16.160

**FolderBrowserDialog**是一个密封类。您不能从中派生新类。
如果你想将Description 标签放大到超过三行，你需要使用SubClassing 方法，这些方法涉及PInvoke 和大量的API Calls。这将很快变得非常复杂。

对于它的价值，我建议您尝试缩短描述。

# ssis - SSIS迁移：将一条记录拆分为多张表

> ID：11701964
> 
> 赞同：2
> 
> 时间：2012-07-28T14:40:54.123
> 
> 标签：ssis

我正在从将 BillingAddress 与送货地址相结合的模式中重构我的数据库的用户对象：

```
[BillingFirstName] [nvarchar](50) NOT NULL,
[BillinglastName] [nvarchar](50) NOT NULL,
[BillingAddress] [nvarchar](100) NOT NULL,
[BillingCity] [nvarchar](100) NOT NULL,
[BillingZip] [varchar](16) NOT NULL,
[BillingState] [nvarchar](2) NOT NULL,
[shippingFirstName] [nvarchar](50) NULL,
[shippingLastName] [nvarchar](50) NULL,
[shippingAddress] [nvarchar](100) NULL,
[shippingCity] [nvarchar](100) NULL,
[shippingState] [nvarchar](2) NULL,
[shippingZip] [nvarchar](20) NULL,
[shippingPhone] [nvarchar](30) NULL, 
```

重构为一个用于 User 的表和一个用于由外键 Users.ID => Addresses.idUser 绑定的地址的单独表

```
 CREATE TABLE [dbo].[Addresses](
[Id] [int] IDENTITY(1,1) NOT NULL,
[Type] [nchar](10) NOT NULL, // designates Billing or Shipping
[Formatted] [nchar](600) NOT NULL,
[Street] [nchar](100) NOT NULL,
[City] [nchar](100) NOT NULL,
[POBox] [nchar](50) NULL,
[Region] [nchar](50) NULL,
[PostalCode] [nchar](50) NULL,
[Country] [nchar](50) NULL,
[ExtendedAddress] [nchar](100) NULL,
[idUser] [int] NULL, 
```

如何告诉 SSIS 将记录导入简化的用户对象，然后创建 2 个地址记录；一个带有运输信息，另一个带有帐单？

我想保留现有的 ID 密钥。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:26:46.667

1.  Multicast your source data.
2.  Add a Derived Column component to each output stream. In your mind, designate one as the "Billing Address" stream and one as the "Shipping Address" stream.
3.  Add a new column named "Type", hardcoded to "Billing" and "Shipping", respectively.
4.  Add a destination component to each streams both pointing to your Address table.
5.  Map the appropriate columns in each stream (ie BillingCity to the City in the "billing address" stream, ShippingCountry to the Country in the "shipping address" stream, etc.)

# java - 一些好的 .jar 到 .exe 转换器？

> ID：11701966
> 
> 赞同：-2
> 
> 时间：2012-07-28T14:41:13.113
> 
> 标签：java, compilation

> **可能重复：**
> [如何将我的 Java 程序转换为 .exe 文件？](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)

我正在学习java，虽然我以前学过一些python，但我是一个初学者。对于一些知道python是什么的人来说，编译它完全是一件痛苦的事情。我使用了第 3 方软件 cx_freeze 来执行此操作，但所有代码都不会被编译。

虽然 python 编译不是这个问题的目的。我想要做的是将.jar 转换为.exe。现在我知道有一些可用的解决方案。但就兼容性而言，哪一个是最好的？我的意思是我可以导入大量模块并且仍然可以正常工作吗？我可以编译高级项目吗？

另外，有没有一个有gui的软件可以做到这一点？因为我必须完全手动在 python 中进行编译。

另外，有没有一种方法可以将 .class 转换为 .exe 而无需将其转换为 .jar

万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:46:48.750

您可能想测试不同的解决方案以找到真正适合您的解决方案。

根据我的（有限）经验，[`Spoon Studio`](http://spoon.net/)易于使用并提供良好的兼容性。

还有其他解决方案；看看[这个](https://stackoverflow.com/a/2011746/303270)答案。

# java - 数组初始化错误

> ID：11701968
> 
> 赞同：0
> 
> 时间：2012-07-28T14:41:21.857
> 
> 标签：java

我正在从网站上进行 Java 编程练习。我必须使用数组显示这个输出。

```
Enter the number of students: 3
Enter the grade for student 1: 55
Enter the grade for student 2: 108
Invalid grade, try again...
Enter the grade for student 2: 56
Enter the grade for student 3: 57
The average is 56.0 
```

到目前为止，这是我的源代码，它正在引发错误`The local variable grades may not have been initialized`。我该如何恢复？我必须使用数组来制作这个程序。

```
package array;

import java.util.Scanner;

public class GradesAverage {

    public static void main(String[] args) {

        int numStudents = 0;
        int[] grades;

        Scanner in = new Scanner(System.in);

        System.out.print("Enter number of students : ");
        numStudents = Integer.parseInt(in.next());

          for (int i = 0; i < numStudents; i++) {
              System.out.print("Enter grade of student "+i+" :");
              grades[i] = Integer.parseInt(in.next());
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:43:39.247

当你写

```
int[] grades; 
```

你声明了一个名为 的变量`grades`，它可以保存一个类型的值`int[]`。然而，在您使用它之前，您还必须对其进行**初始化**，例如创建实际的数据结构。这样做是这样的：

```
int[] grades = new int[numStudents]; 
```

请注意，您需要在声明 an 时事先知道大小`array`，因此您必须将数组的创建移到`for`循环之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:46:34.437

方法中声明的所有变量都必须在读取它们之前分配一个值，以避免垃圾值。

在 java 中，数组也是对象，这意味着您必须先创建一个数组实例`new`并将其分配给等级，然后才能在其中存储任何内容。

```
 grades = new int[numStudents]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:48:32.367

数组没有固定的内存分配，因此您必须为新数组分配内存。

例如

```
int[] grades = new int [numStudents] 
```

这当然应该在你知道 numStudents 的值之后才写

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T14:49:43.270

Keppil 已经说过的话并没有什么要补充的，但我想补充一点“为什么”。

你看，当 int[] grades 被创建时，它只不过是一个“空指针”，指向内存中的一个随机位置。

通过赋值'new int[numGrades]'的返回值，指针的值指向内存中已经赋值的位置。该内存的确切大小为“整数大小乘以等级数”，并且可以安全访问。

如果这个数组的尺寸太小（或根本没有），通常会触发内存冲突异常，因为您正在编写您无法访问的内存，这通常会导致您的程序崩溃或其他未定义的行为。

请记住：数组不同于普通变量。

所以，是的，简而言之：

成绩=新的int [numGrades]；就是你要找的。直线下方，您正在解析输入的学生人数。

作为附加建议：用户输入始终是错误的来源。确保包含无效输出的错误处理。（例如，如果某个聪明人决定输入“John Smith”而不是成绩。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T15:03:40.433

您必须在使用变量之前对其进行初始化。

请查看您的代码的正确版本之一：

```
package array;

import java.util.Scanner;

public class GradesAverage {

    public static void main(String[] args) {

        int numStudents = 0;
        int[] grades;

        Scanner in = new Scanner(System.in);

        System.out.print("Enter number of students : ");
        numStudents = in.nextInt();

        // this line was added
        grades = new int[numStudents];

        for (int i = 0; i < numStudents; i++) {
              System.out.print("Enter grade of student "+i+" :");
              grades[i] = Integer.parseInt(in.next());
        }

        // closing used resources is a good practice
        in.close();
    }

} 
```

# git - git log 显示最后一次提交

> ID：11701976
> 
> 赞同：1
> 
> 时间：2012-07-28T14:42:52.777
> 
> 标签：git, github

我在部署脚本中添加了一个 git log 行：

```
git pull origin master
git log -n 1 > lastcommit.txt
ant -f build.xml deploy 
```

保存上次提交的详细信息。这会产生一个输出文件（在撰写本文时）：

```
commit 3ced14ef1004287b55c21d384447c21cb58edfa6
Merge: 616a15e 5adc9c5
Author: www-data <www-data@backup.agilebase.co.uk>
Date:   Sat Jul 28 15:20:39 2012 +0100

Merge branch 'master' of github.com:okohll/agileBase 
```

但是，使用该提交代码[https://github.com/okohll/agileBase/commits/3ced14ef1004287b55c21d384447c21cb58edfa6](https://github.com/okohll/agileBase/commits/3ced14ef1004287b55c21d384447c21cb58edfa6)返回 404 not found 错误。

我一定误解了 git log，我想在 github 的 Web 界面中找到链接到最后一次提交的提交哈希。有没有办法做到这一点？3ced14ef1004287b55c21d384447c21cb58edfa6 指的是什么？

我注意到“合并”行的末尾有 5adc9c5，这是我正在寻找的实际代码的开始，在编写 5adc9c51326772318394fceb479a31e26306259b 时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T14:45:40.627

您`git pull`将 github 上的内容和存储库中的内容合并到一个新的提交中。那就是`3ced14ef1004287b55c21d384447c21cb58edfa6`。此合并提交不在 github 上（还）。如果你想引用它，你需要`push`回到 github。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:48:03.630

> [https://github.com/okohll/agileBase/commits/3ced14ef1004287b55c21d384447c21cb58edfa6](https://github.com/okohll/agileBase/commits/3ced14ef1004287b55c21d384447c21cb58edfa6)返回 404 not found 错误。

通常，URL 是`http://github.com/<user>/<project>/commit/<sha1>`，即单数`commit`

> 我想在 github 的 Web 界面中找到链接到最后一次提交的提交哈希。

你不需要先把它从你的存储库中拉出来，你可以链接到`HEAD`GitHub 上：[https ://github.com/okohll/agileBase/commit/HEAD](https://github.com/okohll/agileBase/commit/HEAD)

如果您仍然想找出您在 GitHub 存储库中的当前提交是什么，您可以简单地使用远程分支的日志，即`origin/master`：

```
git log -1 origin/master 
```

但是，这要求您最近从远程存储库中获取，因为它只会检查您在本地存储库中拥有的内容。

除此之外，剩下的唯一选择是直接检查 GitHub 以获取当前哈希，可能使用 GitHub API。

# php - 如何阅读文本文件和翻译文件

> ID：11701978
> 
> 赞同：0
> 
> 时间：2012-07-28T14:42:58.967
> 
> 标签：php, html, replace, translate

您好，如何使用 php 读取 txt 文件并用数组替换？我想读这样的文件：

```
 ||Search||,||s||---||Images||,||i|| 
```

这是我的 php 代码：

```
$f = fopen("test.txt", "r");
$image= "Imgaes";
// Read line by line until end of file
while (!feof($f)) { 
   // Make an array using comma as delimiter
   //   $arrM = explode("---",fgets($f)); 
   $arr = explode("||---||",fgets($f));
   // Write links (get the data in the array)
   $num = 1;
   while($num <= 30) {
       list($eng,$fa) = explode("||,||", $arr[$num]);
       foreach($html->find('html') as $full) {
           $all = $full->innertext;
       }
       $fe = str_replace($eng,$fa,$all);
       $num = $num+1;
   }
   echo $fe;
}    
fclose($f); 
```

但这不起作用:(！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:57:16.230

在爆炸之前，在这个函数中解析你的数据：

```
// Function arrayData   
function arrayData($data){
        # code...
        // Create an array out of each line
        $data_array=explode("\n", $data);
        // Find the last key in the array
        $last_key=count($data_array)-1;
        // If the last line is empty revise the last key downwards until there's actually something there
        while(empty($data_array[$last_key]))
        {
            $last_key-=1;
        }
        // Figure out the first key based upon the value set for the number of lines to display
        $first_key=$last_key-($this->num_lines-1);
        // Start a new array to store the last X lines in
        $final_array=array();

        // Work through the array and only add the last X lines to it.
        foreach($data_array as $key => $value)
        {
            if($key >= $first_key && $key <= $last_key)
            {
            $final_array[]=$value;
            }
        }
    return $final_array;
    } // end function 
```

# wcf - 通过代码添加 ServiceHost 扩展

> ID：11701981
> 
> 赞同：0
> 
> 时间：2012-07-28T14:43:13.107
> 
> 标签：wcf, web-services, webhttpbinding

我有一个`App.config`我[在这里找到](http://msdn.microsoft.com/en-us/library/ms751458.aspx)的 XML 剪辑：

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <extensions>
      <bindingElementExtensions>
        <add name="gzipMessageEncoding" type="Microsoft.Samples.GZipEncoder.GZipMessageEncodingElement, GZipEncoder, Version=4.0.0.0, Culture=neutral, PublicKeyToken=null" />
      </bindingElementExtensions>
    </extensions>
... 
```

由于某些原因，我不想对程序集进行硬编码，也不想为此使用 XML 文件。

目前我使用这段代码：

```
Uri baseAddress = new Uri("http://localhost:80/Test");
WebHttpBinding binding = new WebHttpBinding(
                                    WebHttpSecurityMode.TransportCredentialOnly);
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic;
ServiceHost host = new ServiceHost(typeof(ExampleWebService), baseAddress);
host.Extensions.Add(new GZipMessageEncodingElement()); 
```

但是最后一行不起作用，我该如何解决？我认为必须可以通过代码来做到这一点。

* * *

目前，我几乎找到了一个解决方案，当我尝试使用 JsonSerialisator 时，我遇到了一个问题，但是我现在使用这个绑定：

```
CustomBinding cb = new CustomBinding(binding);
MessageEncodingBindingElement inner = (MessageEncodingBindingElement)cb.Elements.ToArray()[0];
cb.Elements.RemoveAt(0);
cb.Elements.Insert(0, new GZipMessageEncodingBindingElement(inner)); 
```

`GZipMessageEncoder`稍作修改以使压缩成为可选：

```
public override ArraySegment<byte> WriteMessage(Message message, int maxMessageSize, BufferManager bufferManager, int messageOffset) {
    var req = WebOperationContext.Current.IncomingRequest;
    var encoding=req.Headers[HttpRequestHeader.AcceptEncoding]; // crash while debug
    //Use the inner encoder to encode a Message into a buffered byte array
    ArraySegment<byte> buffer = innerEncoder.WriteMessage(message, maxMessageSize, bufferManager, 0);
    if(encoding != null && encoding.ToLower().Contains("gzip")) {
        WebOperationContext.Current.OutgoingResponse.Headers[HttpResponseHeader.ContentEncoding] = "gzip";
        WebOperationContext.Current.OutgoingRequest.Headers[HttpResponseHeader.ContentEncoding] = "gzip";
        //Compress the resulting byte array
        return CompressBuffer(buffer, bufferManager, messageOffset);
    } else {
        return buffer;
    }
} 
```

但是我的代码在标记行中调试时让 Visual Studio 崩溃。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:51:17.680

这种方式行不通。`WebHttpBinding`永远不会使用您的绑定元素。`BindingElementExtensions`在配置文件中只定义了可用于在配置文件中定义的新元素`CutomBinding`。如果您需要在代码中执行此操作，您只需创建一个新实例`CustomBinding`并用您要使用的绑定元素（派生自 的类`BindingElement`）填充它 - 您将使用`GZipMessageEncodingBindingElement`. 链接的示例也描述了该代码：

```
ICollection<BindingElement> bindingElements = new List<BindingElement>();
HttpTransportBindingElement httpBindingElement = new HttpTransportBindingElement();
GZipMessageEncodingBindingElement compBindingElement = new GZipMessageEncodingBindingElement ();
bindingElements.Add(compBindingElement);
bindingElements.Add(httpBindingElement);
CustomBinding binding = new CustomBinding(bindingElements); 
```

# jquery - 使用 Twitter boostrap 关闭模式时如何清除 div？

> ID：11701985
> 
> 赞同：0
> 
> 时间：2012-07-28T14:43:51.593
> 
> 标签：jquery, twitter-bootstrap

假设我提交了表单，它会给我一个错误或成功消息。我关闭了模式，如果我再次点击打开它，消息仍然存在。我该如何清除它？

```
$("#JqAjaxForm").submit(function(e){                
        e.preventDefault();

        dataString = $("#JqAjaxForm").serialize();

        $.ajax({
            type: "POST",
            url: "update.php",
            data: dataString,
            dataType: "json",
            success: function(data) {
            //clearForm("#JqAjaxForm");

                if(data.email_check == "invalid"){ 
                    $("#message_ajax").html("<p class='alert alert-error'>Sorry " + data.name + ", " + data.email + " is NOT a valid e-mail address. Try again.</p>");
                } else {                        
                    $("#message_ajax").html("<p class='alert alert-success'>" + data.newpasswd + " is a valid e-mail address. Thank you, " + data.name + ".</p>"); 
                }     
            }                
        });                 
});

$('#chg_settings').modal({
  backdrop: 'static',
  keyboard: true,
  show: false
}); 
```

我通过调用模态

```
<a data-toggle="modal" href="#chg_settings">Settings</a> 
```

这是消息 div

```
<div id="message_ajax"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:03:10.270

您可以注册这样的[`hidden`](http://twitter.github.com/bootstrap/javascript.html#modals)活动

```
$('#chg_settings').on('hidden', function () {
  $("#message_ajax").html('');
}) 
```

> 当模式对用户完成隐藏时触发此事件（将等待 css 转换完成）​​。

# java - 自动裁剪图像边界

> ID：11701988
> 
> 赞同：1
> 
> 时间：2012-07-28T14:44:04.403
> 
> 标签：java, android

我正在寻找一种自动方式来抓取一张位图并提取其中的某个部分。让我解释一下：如果我有这张图片：http: ![蝴蝶](../Images/dd0bec0429e26fe2fc23b32f26f14eaa.png) [//imgur.com/B9U9E](https://imgur.com/B9U9E)

它有一个大的白色边框。（请参阅链接以获得更好的白色结果）我正在寻找一种仅获取上面对话框的方法。所以对话框周围没有白色边框。有没有办法通过代码或库来做到这一点？

您应该知道图像可以具有任何形式并位于白色对话框的任何位置。

因此，用户在白色面板上绘制了一些东西，我需要程序自动制作一个关于用户在画布上绘制位置的矩形，并保存用户在画布上绘制的位图（该矩形之间的所有内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:17:01.920

伪代码

1.  定义背景颜色。
2.  从左、右、下、上扫描并存储从背景到绘图的过渡位置。
3.  由 (left, bottom) 和 (right, top) 定义的矩形定义了裁剪区域

有关 Java 代码示例，请参阅：[如何在 Java 中自动裁剪图像白色边框？](https://stackoverflow.com/questions/10678015/how-to-auto-crop-an-image-white-border-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:48:51.727

调查[`Bitmap.createBitmap`](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.graphics.Bitmap,%20int,%20int,%20int,%20int%29)。

# list - 在 Prolog 中将数字拆分为数字列表

> ID：11701991
> 
> 赞同：6
> 
> 时间：2012-07-28T14:44:33.753
> 
> 标签：list, split, numbers, prolog

我在尝试使用 Prolog 将数字拆分为列表时遇到了麻烦，例如 123456 变为`[1,2,3,4,5,6]`.

你能帮我弄清楚怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T14:46:59.463

可用的内置函数是 ISO 标准：

```
?- number_codes(123456,X),format('~s',[X]).
123456
X = [49, 50, 51, 52, 53, 54].

?- number_chars(123456,X),format('~s',[X]).
123456
X = ['1', '2', '3', '4', '5', '6']. 
```

我还为我的解释器开发了一些*非常古老的代码。*`:=`必须重命名`is`才能使用标准 Prologs 运行。但是，最好从上面的内置函数中为您服务...

```
itoa(N, S) :-
    N < 0, !,
    NN := 0 - N,
    iptoa(NN, SR, _),
    reverse(SR, SN),
    append("-", SN, S).
itoa(N, S) :-
    iptoa(N, SR, _),
    reverse(SR, S).

iptoa(V, [C], 1) :-
    V < 10, !,
    C := V + 48.
iptoa(V, [C|S], Y) :-
    M := V / 10,
    iptoa(M, S, X),
    Y := X * 10,
    C := V - M * 10 + 48. 
```

**在此处编辑**获取号码所需的额外调用：

```
?- number_codes(123456,X), maplist(plus(48),Y,X).
X = [49, 50, 51, 52, 53, 54],
Y = [1, 2, 3, 4, 5, 6]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:40:36.923

您可以先创建一个反向列表：

```
//Base step
splitRev(0,[]).
//Recursive step
splitRev(N,[A|As]) :- N1 is floor(N/10), A is N mod 10, splitRev(N1,As). 
```

递归步骤的工作方式如下：

```
N1 is floor(N/10) 
```

将 N 除以 10 并向下舍入。所以 538 变成 53.8 变成 53。它切断了最后一位数字。

```
A is N mod 10 
```

取 N 的余数除以 10。538 mod 10 等于 8。所以你只得到最后一个数字。

现在要拆分列表，您只需反转由 splitRev/2 创建的列表。所以谓词 split/2 定义为：

```
split(N,L1) :- splitRev(N,L2), reverse(L1,L2). 
```

请注意， reverse/2 是一个内置谓词。

我希望这有帮助！

# linux - Linux：允许一个用户管理另一个用户/组的所有文件

> ID：11701993
> 
> 赞同：0
> 
> 时间：2012-07-28T14:44:49.780
> 
> 标签：linux, permissions, lamp, permission-denied, ubuntu-12.04

我刚刚安装`lamp-server^`在我家的 linux 机器上。现在我在目录（服务器根目录）中创建了一个`project`包含文件的新文件夹。`/var/www/`我将所有者用户/组设置为`www-data`via `sudo`。

现在我想通过文件资源管理器或通常通过文件资源管理器访问文件夹及其文件`cd`，但我收到错误消息，即我无权执行/访问该文件夹或其文件（使用我的普通用户帐户）。

是否可以授予我的用户帐户访问/修改`project`文件夹的权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:53:58.593

你可以

a+rwx 目录或

将自己包括在该组中，但从您的问题来看，您似乎不想这样做。它比允许任何人读取、写入和执行该目录更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:55:35.427

是的，有可能。只需将您的用户添加到 www-data 组。

```
useradd -G www-data {your_username} 
```

# php - PHP microtime 奇怪的行为

> ID：11701995
> 
> 赞同：1
> 
> 时间：2012-07-28T14:44:51.003
> 
> 标签：php, timer, eval, xmlreader, microtime

我正在查看一些函数的执行时间，但我发现 microtime 出错了，在一个`microtime()`

**实现№1**总是第一次总是比第二次`microtime()`执行更多，当我测试一个函数并看到一个案例比另一个更快，但是在地方替换之后（*第二个函数到第一个地方*），它无论如何都会变慢，即使它是快 3 倍...

```
function dotimes($times,$eval,$data=false) {for(;--$times;) eval($eval);}

$start = microtime(true);

dotimes(1000,'$i = $i?$times/2:1;');

printf(": executed : %f\n",microtime(true)-$start);

$start = microtime(true);

dotimes(1000,'$i = $i?$times/2:1;');

printf(": executed : %f\n",microtime(true)-$start);

// 1st case is always slower... 
```

**实施№2** iv有时`microtime()`作为静态数据存储，但在这种情况下，执行时间总是第二次比第一次慢（*与实施№1相反*）

```
function get_execution_time()
{
    static $microtime_start = null;

        return $microtime_start === null ? $microtime_start = microtime(true) : microtime(true) - $microtime_start;

}

function dotimes($times,$eval,$data=false) {for(;--$times;) eval($eval);}

get_execution_time();
dotimes(1000,'$i = $i?$times/2:1;');

printf(": executed : %f\n<br>",get_execution_time());
get_execution_time();
dotimes(1000,'$i = $i?$times/2:1;');
printf(": executed : %f\n<br>",get_execution_time());
//now 2nd case is faster.. 
```

*   有人能告诉我**发生了**什么吗？为什么这些微时间在一种情况下第一次总是较慢，并且通过静态存储第二次执行速度变慢，**为什么**？

ps如果有人需要微小的 mt 功能，这是我的**固定和工作正确**：

```
function get_mt() {static $mt; return $mt ? microtime(true)-$mt.$mt=null : $mt=microtime(true);} 
```

随附的 ：

```
function get_mt() {static $mt; return $mt?microtime(true)-$mt:$mt=microtime(true);}

function dotimes($times,$eval,$data=false) {for(;--$times;) eval($eval);}

$start = microtime(true);
get_mt();
dotimes(10000,'$i = $i?$times/2:1;');
printf(":clean executed : %f\n<br>",microtime(true)-$start);
printf(":static executed : %f\n<br>",get_mt());
$start = microtime(true);
get_mt();
dotimes(10000,'$i = $i?$times/2:1;');
printf(":clean executed : %f\n<br>",microtime(true)-$start);
printf(":static executed : %f\n<br>",get_mt()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:13:11.573

到目前为止，我看到实施 №1 是正确的。不知道您在第二次实施中尝试了什么。

这里的建议 - 永远不要在同一个脚本中测试两个案例。分别运行几次，然后找到平均时间。PHP 在需要时分配内存，这是一个缓慢的操作。第二种情况可能会重用已分配的内存并跳过此操作，您会得到错误的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:50:08.713

static 使该函数中的变量半全局相对于函数名称。

我会说延迟是因为需要检查静态数组以获取静态变量的先前值。

额外的工作==延迟

# java - HashMap 和 ArrayList 是什么，它们有什么用？

> ID：11701997
> 
> 赞同：-4
> 
> 时间：2012-07-28T14:45:30.443
> 
> 标签：java

我已经多次阅读 HashMap 和 ArrayList 是什么，但我仍然无法理解它们的用途以及它们与 Vector 有何不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:47:26.350

并且`ArrayList`是`List`s 族的一个容器，它存储一系列对象，例如“car1”、“car2”等...

A`HashMap`是将键映射到值的类型的容器`Map`，例如“car1 => red”、“car2=>blue”等...