# StackOverflow 问答 10325000-10325999

# php - 更短的 UUID，ASCII85 和 PHP

> ID：10325000
> 
> 赞同：2
> 
> 时间：2012-04-25T23:01:33.357
> 
> 标签：php, uuid, base85, ascii85

我读到了[UUID v4](http://en.wikipedia.org/wiki/Universally_unique_identifier)，它几乎是独一无二的，这就是我所需要的。问题是，这个数字太大了，是否有可能生成像 Facebook 或 Twitter 这样字符更少的 UUID？

我阅读了一些帖子，您可以在其中使用 Ascii85 将此代码缩小到 20，但没有看到可靠的 PHP 脚本可以完成这项工作。有人知道测试类吗？？对于随机 ID，这是存储这 20 个字符的最佳方式，对吗？

- - 编辑 - -

@大卫施瓦茨

谢谢。我需要一个服务器中的随机唯一标识符，介于 8 到 16 个字符之间（如果它是最低的，那么 20 就可以了）。它的想法是识别具有可读 ID 但不是增量的对象（第一个对象 10001，第二个 10002），542A4B243J、C63426KJ70、O30V4U1I9P 等方式很好。ID 必须是（至少）6 个 MySQL 表的主键。对象是使用 PHP 在同一服务器中创建的。

@ta.speot.is

我写了“没有看到可靠的 PHP 脚本来完成这项工作。有人知道经过测试的课程吗？？” 我认为谷歌中出现的所有代码都没有经过测试，你有没有测试过所有的链接？

@sarnold

谢谢，但我很抱歉，没理解好=（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:57:51.790

我正在处理的一个企业项目中遇到了同样的问题，我在 PHP 中找不到经过测试的合理且快速的解决方案。所以我决定编写一个 PHP 扩展，它可以用于使用 base85/ascii85 编码/解码数据。

你可以在这里查看：[https ://github.com/miezuit/php-base85](https://github.com/miezuit/php-base85)

它使用一组自动化测试进行测试。

# javascript - jquery 仅当父级更高时才滚动 div

> ID：10325001
> 
> 赞同：0
> 
> 时间：2012-04-25T23:01:43.930
> 
> 标签：javascript, jquery

如何计算父级的高度，以便左侧 div 仅在其下方有空白空间时才进行动画处理。我试图计算父母的身高大于问题高度+边距顶部。

这是代码的简化版本：以[http://jsfiddle.net/rewsn/6/](http://jsfiddle.net/rewsn/6/)为例。虽然在真实版本中，问题/答案是通过 AJAX 更改的，所以这就是我每次都需要计算高度的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:13:44.630

如果我理解正确，那么像下面这样的简单条件应该可以解决您的问题。

```
if ((y + el.outerHeight()) < $container.height()) { 
```

[**演示**](http://jsfiddle.net/rewsn/7/)

```
var el = $('.answer');
var elpos = el.offset().top;
var $container = $('.container');

$(window).scroll(function() {
    var y = $(this).scrollTop();
    var mTop = y - elpos;

    if ((y + el.outerHeight()) < $container.height()) {
        if (y < elpos) {
            el.stop().animate({
                'margin-top': 0
            }, 500);
        }
        else {
            el.stop().animate({
                'margin-top': y - elpos
            }, 500);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:16:59.917

不是 100% 确定你的意思 - 你想阻止“答案”低于“问题”吗？像这样的东西？ [http://jsfiddle.net/X3cbB/1/](http://jsfiddle.net/X3cbB/1/)

# java - 如何一遍又一遍地运行 AsyncTask？

> ID：10325004
> 
> 赞同：1
> 
> 时间：2012-04-25T23:02:01.073
> 
> 标签：java, android, android-asynctask

我有一个运行下面代码的 onCreate 方法。简而言之，代码从服务器检索数据并将其显示在消息传递程序的屏幕上。它只执行一次，但我希望它每 3 秒运行一次 AsyncTask（以尝试模拟聊天）。我很确定这不是拥有聊天系统的方法，但是，我只需要现在可以工作的东西（作为概念证明），稍后我将专注于实现它的正确方法。

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.chat_box);// sd

        final Functions function = new Functions();
        final SharedPreferences prefs = PreferenceManager
                .getDefaultSharedPreferences(getBaseContext());
        whatroom = prefs.getString("chat", "null");

        new AsyncTask<String, Void, String>() {
            @Override
            protected String doInBackground(String... args) {
                return function.getInbox(args[0]);
            }

            @Override
            protected void onPostExecute(String result) {
                TextView inbox = (TextView) findViewById(R.id.inbox);
                ProgressBar progressBar = (ProgressBar) findViewById(R.id.progressBar1);
                progressBar.setVisibility(View.GONE);
                inbox.setText(result);
            }

        }.execute(whatroom);
    } 
```

我尝试在 asynctask 周围放置一个简单的 while 语句，但是它只是强制关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:11:40.213

您不能重复使用`AsyncTask`实例。您需要在循环的每次传递中创建新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:07:08.167

没有额外的信息，很难给你一个具体的答案。[但是，请考虑使用Loader](http://developer.android.com/guide/topics/fundamentals/loaders.html)，使用 a`Service`等抽象所有内容

关于`Loaders`：

> *   它们适用于每个 Activity 和 Fragment。
> *   它们提供数据的异步加载。
> *   他们监控数据的来源，并在内容发生变化时提供新的结果。
> *   在配置更改后重新创建时，它们会自动重新连接到最后一个加载器的光标。因此，他们不需要重新查询他们的数据。

# c++ - 匹配来自不同图像的人脸

> ID：10325012
> 
> 赞同：-1
> 
> 时间：2012-04-25T23:03:15.223
> 
> 标签：c++, opencv

我是 OpenCV 的初学者。我已经成功检测到人脸，现在我要做的是匹配来自两个不同图像的人脸并返回真值或假值。我怎样才能在openCV中使用c++做到这一点请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:50:49.370

人脸识别是一种先进的方法。

有一个专门用于此的网站：http: [//www.face-rec.org/](http://www.face-rec.org/)

它包含许多研究论文、算法等来进行人脸识别。您可以通过谷歌搜索找到类似的网站。

用于此目的的两种流行方法是：

**1\. 特征面：**

要理解这一点，下面的维基百科段落很好：

`A set of eigenfaces can be generated by performing a mathematical process called principal component analysis (PCA) on a large set of images depicting different human faces. Informally, eigenfaces can be considered a set of "standardized face ingredients", derived from statistical analysis of many pictures of faces. Any human face can be considered to be a combination of these standard faces. For example, one's face might be composed of the average face plus 10% from eigenface 1, 55% from eigenface 2, and even -3% from eigenface 3\. Remarkably, it does not take many eigenfaces combined together to achieve a fair approximation of most faces. Also, because a person's face is not recorded by a digital photograph, but instead as just a list of values (one value for each eigenface in the database used), much less space is taken for each person's face.`

人脸的前 32 个特征面（从[http://www.shervinemami.info/faceRecognition.html](http://www.shervinemami.info/faceRecognition.html)获得）

![在此处输入图像描述](../Images/15350cb38fb8c7ee877e6ac4fb270607.png)

此方法的 C++ 实现可以在[http://www.shervinemami.info/faceRecognition.html](http://www.shervinemami.info/faceRecognition.html)找到。

**2\. 费雪脸：**

这使用了另一种称为线性判别分析的方法。欲了解更多详情，请访问：[http ://www.scholarpedia.org/article/Fisherfaces](http://www.scholarpedia.org/article/Fisherfaces)

例如：图像的前 4 个 Fisher 脸

![在此处输入图像描述](../Images/2859e77aad3edbe26ce998f2ab9211aa.png)

***最后，您可以从此 [pdf 中找到有关它们的所有详细信息代码。](http://www.bytefish.de/pdf/facerec_python.pdf)你可以在[这个 github repo](https://github.com/bytefish/facerecognition_guide)中找到它的 C++ 实现。***

供您参考，上述实现已从 2.4-beta 版开始添加到 OpenCV 主流（[在此处查看更改日志](http://code.opencv.org/projects/opencv/wiki/ChangeLog)）。甚至这些代码也包含在OpenCV 2.4-beta附带的[cpp 示例中。](http://code.opencv.org/projects/opencv/repository/raw/trunk/opencv/samples/cpp/facerec_demo.cpp)

# entity-framework-4.1 - 我如何通过我的 Ajax.actionlink 传递时间戳

> ID：10325016
> 
> 赞同：0
> 
> 时间：2012-04-25T23:03:46.187
> 
> 标签：entity-framework-4.1

我有以下索引视图，显示对象列表和每个对象旁边的 Delete Ajax.actionlink：-

```
<legend>@Model.Where(d => d.VisitStatu.Description.ToUpper().Equals("ASSINGED")).Count() @ViewBag.subtitle</legend>
<table>
    <tr>   
        <th>Patient Full Name </th>

         <th>Created BY</th>
        <th></th>
    </tr>

@foreach (var item in Model.Where(d => d.VisitStatu.Description.ToUpper().Equals("ASSINGED")))
{
    <tr id = @item.VisitID>           
        <td>@Html.DisplayFor(modelItem => item.Patient.FullName)</td>
        <td>@Html.DisplayFor(modelItem => item.CreatedBy)</td>
        <td>@Ajax.ActionLink("Delete",
       "Delete", "Visit",
      new { id = item.VisitID },
    new AjaxOptions
{
    HttpMethod = "Post",
    OnSuccess = "deletionconfirmation",
    OnFailure = "deletionerror"
}
</td>  </tr> 
```

Ajax.actionlink 将调用以下 Post Action 方法：-

```
 [HttpPost]
        public ActionResult Delete(int id)
        {            try
            {  var v = repository.GetVisit(id);
                if (!(v.Editable(User.Identity.Name)))
                {return View("NotFound");                }
                repository.DeleteVisit(v);
                repository.Save();
return Json(new { IsSuccess = "True", id = id, description = v.Date.ToString() }, JsonRequestBehavior.AllowGet);
            }
            catch (DbUpdateConcurrencyException)
            {
return Json(new { IsSuccess = "False" }, JsonRequestBehavior.AllowGet);

            }
            catch (OptimisticConcurrencyException)
            {
                return Json(new { IsSuccess = "False" }, JsonRequestBehavior.AllowGet);

            }} 
```

但是目前，如果用户单击“删除”链接并且记录被另一个用户修改，则不会`DbUpdateConcurrencyException`引发，因为我没有将时间戳传递给删除操作方法......所以我如何将时间戳值包含在删除 ajax.actionlink？//提示对象已经包含时间戳属性。BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:28:36.207

您可以将其作为查询字符串参数传递，就像传递 id 一样：

```
@Ajax.ActionLink(
    "Delete",
    "Delete", 
    "Visit",
    new { 
        id = item.VisitID,
        timestamp = item.Timestamp
    },
    new AjaxOptions
    {
        HttpMethod = "Post",
        OnSuccess = "deletionconfirmation",
        OnFailure = "deletionerror"
    }
) 
```

然后让 Delete 控制器操作带一个`timestamp`参数。

# php - Yii - 如果过滤器仅用于单个操作，它有什么好处？

> ID：10325020
> 
> 赞同：3
> 
> 时间：2012-04-25T23:04:12.287
> 
> 标签：php, yii

我正在阅读 Yii 教程书，目前正在学习过滤器。过滤器通常可以应用于控制器或仅应用于特定操作。

我正在处理的示例是创建一个新问题。每个问题都属于一个项目，因此我们添加了一个过滤器以确保将`project_id`其传递到`issue/create`页面。由于`issue/create`是唯一需要 的页面`project_id`，我们将过滤器应用于单个操作：

```
public function filters(){
    return array(
        'accessControl', // perform access control for CRUD operations
            'projectContext + create',//check to ensure valid project context
    );
} 
```

我的问题是：如果过滤器仅适用于控制器中的单个操作，为什么不直接将`filterProjectContext()`代码放入`actionCreate()`函数中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T23:48:58.717

根据[yii 文档](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter)以及我对其他框架的经验，过滤器并不意味着与动作相结合。相反，过滤器允许您在 PHP 全局变量（例如`$_REQUEST`值）到达任何操作之前访问它们。例如，我在一个项目中工作，如果 url 参数以特定值传递，我们希望突出显示所有翻译的文本。我们本可以在控制器中完成此操作，但认为在过滤器中实现业务规则会更好。过滤器最终看起来像：

```
// Symfony code, but should demonstrate the idea
if ($context->getRequest()->getParameter('highlightTranslations') === 'y') {
    // Tell translator API to highlight any subsequent translations
} 
```

过滤器的美妙之处在于，无论请求哪个操作，都会执行此代码。我的建议是不要将过滤器逻辑与操作逻辑混合在一起。

# javascript - JavaScript 数组切片与删除

> ID：10325026
> 
> 赞同：5
> 
> 时间：2012-04-25T23:05:05.440
> 
> 标签：javascript, arrays, slice

有什么理由为什么应该使用一个而不是另一个？

例如

```
var arData=['a','b','c'];
arData.slice(1,1);//removes 'b'

var arData=['a','b','c'];
delete arData[1];//removes 'b' 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-25T23:07:06.607

`delete`留给你`[ 'a', undefined, 'c' ]`

`splice`留给你`[ 'a', 'c' ]`

`slice`不对原始数组做任何事情:)但它会`[ 'b' ]`在您的代码中返回

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T23:08:19.650

[`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete#Deleting_array_elements)只制作数组的某个位置，`undefined`但数组仍然包含 3 个项目：`['a',undefined,'c']`

另一种方法是[`splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)而不是[`slice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)。splice 完全删除了该项目及其位置，因此您最终得到`['a','c']`

# java - 使用给定的随机路径构建图

> ID：10325028
> 
> 赞同：0
> 
> 时间：2012-04-25T23:05:13.597
> 
> 标签：java, graph, tree, binary-tree

假设我有一个字符串数组，它们表示 {"222/111"、"333/222"、"444/333"、"888/999"、"777/999"} 等路径。如何从上述路径项构建树/图，以便获得两个图：

444,333,222,111 和 888,777,999

（感谢伪代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:33:06.610

I suppose you should check [JGraphT](http://jgrapht.org/) project, which also has many graph-based algorithms and sample codes, also it generalize your vertex/edge object representation!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:12:09.357

```
while (strings not empty)
    path = strings.pop
    foreach (s:strings)
       if (s starts with path end)
          strings.remove(s)
          path.append(s)
          restart loop
       if (s ends with path start)
          strings.remove(s)
          path.prepend(s)
          restart loop
    paths.add(path) 
```

# mysql - MySQL查询其中a列中的项目选择b中的项目，反之亦然

> ID：10325031
> 
> 赞同：0
> 
> 时间：2012-04-25T23:05:27.630
> 
> 标签：mysql

我有两列数据

```
参考 > 目标
1 > 4
1 > 7
2 > 5
3 > 6
4 > 1

```

我想在 MySQL 中运行一个查询，该查询选择其目标也选择的每个引用。所以，1 > 4 和 4 > 1。

我能得到的最远的是：

```
SELECT refer FROM table WHERE refer IN
(SELECT target FROM table) 
```

但这只是列出了另一列中的内容，而不是匹配的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:10:08.563

```
SELECT DISTINCT t1.*
FROM myTable t1
JOIN myTable t2
  ON t1.Refer = t2.Target
  AND t1.Target = t2.Refer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:10:09.583

我认为没有必要使这个查询过于复杂

```
SELECT refer FROM TABLE WHERE (refer = '1' and target = '4') or (refer ='4' and target = '1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T23:10:16.310

您可以为此使用自联接：

```
SELECT a.refer, a.target FROM tbl a
INNER JOIN
(
    SELECT refer, target FROM tbl
) b

ON a.target = b.refer AND a.refer = b.target 
```

# c - 用 Visual Studio 编译 C 程序

> ID：10325034
> 
> 赞同：1
> 
> 时间：2012-04-25T23:05:52.113
> 
> 标签：c, visual-studio, debugging, compilation, header-files

我需要解释位于以下链接中的程序的作用：

[主程序](http://soundeliverance.com:8080/TinyServer/main.c)

[csapp.c](http://soundeliverance.com:8080/TinyServer/csapp.c)

[csapp.h](http://soundeliverance.com:8080/TinyServer/csapp.h)

我在linux中将以下代码编译为：

.................................................................. ![在此处输入图像描述](../Images/504723ee0584474dc721a5e6c348e8ef.png)_ …………

（请注意，所有三个文件都必须位于同一工作目录中才能进行编译。）

该命令是： `gcc main.c csapp.c`

当我执行该命令时，我得到了可执行文件： `a.out` **并且没有编译错误！**

可以从[此处](http://soundeliverance.com:8080/TinyServer/a.out)下载该可执行文件（我认为您不需要该文件，而且如果您在哪里，我将不会执行该文件）。

无论如何，我认为如果我可以调试程序，我将能够更好地理解发生了什么。结果，我在 Visual Studio 中创建了一个 C++ 控制台空控制台项目。我希望在其中包含相同的文件并能够编译它。我以前从未使用过 c++，而且我真的不明白在哪里放置头文件。这就是我所做的希望能够编译程序：

![在此处输入图像描述](../Images/8148a26acbcdedd337ad55fed08c6f2e.png)

如果我这样放置文件，程序将无法编译。

我也尝试将所有文​​件放在同一个目录中，就像在 linux 虚拟机上一样：

![在此处输入图像描述](../Images/3555c807aa6f50a0d3223ed4c3b874eb.png)

那也不编译。

我将如何使用 Visual Studio 编译该程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T23:11:30.130

如果您查看 csapp.h，您会注意到它会尝试包含以下标头：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <ctype.h>
#include <setjmp.h>
#include <signal.h>
#include <sys/time.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <errno.h>
#include <math.h>
#include <pthread.h>
#include <semaphore.h>
#include <sys/socket.h>
#include <netdb.h>
#include <netinet/in.h>
#include <arpa/inet.h> 
```

其中一些是标准 C 头文件，但其他一些特定于 POSIX/Linux/UNIX 风格的操作系统（例如 pthread.h）。您将无法在 Windows 或 Visual Studio 中使用这些库，除非您正在做一些不寻常的事情，例如针对[Cygwin](http://cygwin.com)库进行编译。

如果你想了解程序在做什么，你可以做很多事情。首先，只需通读代码并在记录这些函数的手册页中查找它调用的函数（如果你有 gcc，我猜你也有 man 吗？）其次，是的，你可以打印到控制台来弄清楚。你也可以使用像 gdb 这样的调试器来单步调试程序，它不像 VS 调试器那么直观，但它可以工作......

# javascript - 你如何检查一个 JavaScript 对象是否直接是一个 `{}` 实例，而不是一个子类？

> ID：10325035
> 
> 赞同：12
> 
> 时间：2012-04-25T23:05:56.507
> 
> 标签：javascript

在过去的一年里，我在这里和那里花了 10 或 20 分钟可能有十几次，但从未找到这个问题的万无一失的答案。

如何检查 JavaScript 对象是否是 的实例`Object`，而不是子类？

一个用例是检查是否`arguments[0]`是“选项”哈希与“模型”（MVC），两者都扩展了 native `Object`，但应该区别对待。

我试过这些：

```
// some helper to get constructor name
function klassName(fn) {
  if (fn.__name__) {
    return fn.__name__;
  }
  if (fn.name) {
    return fn.name;
  }
  return fn.toString().match(/\W*function\s+([\w\$]+)\(/));
};

var Model = function() {};

m = new Model;
o = {};

Object(o) === o; // true
Object(m) === m; // true, thought it might be false

klassName(o.constructor); // Object
klassName(m.constructor); // Model 
```

这`klassName(m.constructor)`在某些情况下不起作用（不记得确切，但可能是一个 regex.constructor，类似的东西）。也许确实如此，不确定。

有没有一种防弹的方法来判断某物是否是`{}`物体？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T23:41:53.503

可能像这样简单

```
function isObj( test ) {
    return test.constructor === Object;
} 
```

成为你正在寻找的东西？

[在 jsFiddle 中测试](http://jsfiddle.net/ukEEw/7/embedded/js%2Cresult/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:14:37.370

你是这个意思？[http://jsfiddle.net/elclanrs/ukEEw/](http://jsfiddle.net/elclanrs/ukEEw/)

```
var o = {};
var re = /\d/;
var f = function(){};
var d = new Date();

var isObj = function(e){
    return e.toString() === '[object Object]';
};

console.log( isObj(o) ); // True
console.log( isObj(re) ); // False
console.log( isObj(f) ); // False
console.log( isObj(d) ); // False 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T21:32:07.213

我只想改变一件事

```
var isObj = function(e){
    if(!e) return false; // change this line
    return e.toString() === '[object Object]';
}; 
```

# javascript - JavaScript 对象字面量的有趣问题

> ID：10325039
> 
> 赞同：0
> 
> 时间：2012-04-25T23:06:13.160
> 
> 标签：javascript, json, object-literal

尝试运行此代码：

```
var oObject = {"COL_SEQ":16,"SERVICE_CD":0.000000,"SERVICE_ID":0.000000,"COL_NAME":"","COL_OPTION":"nosort nofilter","COL_CLASS":"REMOVE_PATIENT","COL_TYPE":"","COL_LABEL":"","COL_OPTION":""};

alert(oObject.COL_SEQ);
alert(oObject.COL_OPTION);
alert(oObject.COL_CLASS); 
```

我希望第二个警报显示“nosort nofilter”，但事实并非如此；它会提示一条空白消息。

现场示例：http: [//jsfiddle.net/zD7Wm/](http://jsfiddle.net/zD7Wm/)

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T23:09:19.273

`COL_OPTION`您在对象的末尾有第二个（空的） ，它会覆盖您的初始对象。

如果您取出第二个，您的代码可以正常工作：

```
var oObject = {"COL_SEQ":16,"SERVICE_CD":0.000000,"SERVICE_ID":0.000000,"COL_NAME":"","COL_OPTION":"nosort nofilter","COL_CLASS":"REMOVE_PATIENT","COL_TYPE":"","COL_LABEL":""}; 
```

# c# - 在多个表单之间共享一个类

> ID：10325040
> 
> 赞同：2
> 
> 时间：2012-04-25T23:06:26.903
> 
> 标签：c#, winforms

我需要帮助解决这个问题。我试过搜索，我想我可能已经找到了使用单例设计模式的解决方案，但想确定一下。

我有一个用 Visual C# 编写的 Windows 窗体应用程序。我正在编写一个 SerialPort 类，以便可以通过所有形式共享它（我不需要多个串行端口实例）。这是为了将逻辑与 GUI 分开。所有形式都可以对 SerialPort 类进行各种更改，例如波特率、写入、读取等。

实施此解决方案的最佳方法是什么？我是 OOP 的新手，所以任何关于阅读的建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T23:14:44.503

正如你已经说过的，这个问题可以使用单例设计模式来解决。这是一个小样本：

```
public class MySingleton() {
    private static MySingleton instance = new MySingleton();

    //your attributes go here...
    private MySingleton() {
    //your logic goes here...
    }

    public static MySingleton getInstance() {
        return instance;
    }
} 
```

请注意，如果您的静态实例将用于多个线程，您的类应该锁定共享资源。我会让你参考[线程安全代码](http://www.codeproject.com/Articles/37976/Writing-Thread-Safe-Code-in-C)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:27:29.377

替代@Luiggi 的解决方案，这里有一点线程良心：

```
public sealed class SerialPort
{
  private static volatile SerialPort instance;
  private static object threadLock = new Object();

  /// <summary>Retrieve an instance of SerialPort</summary>
  public static SerialPort Instance
  {
    get
    {
      if (SerialPort.instance == null)
      {
        lock (SerialPort.threadLock)
        {
          if (SerialPort.instance == null)
          {
            SerialPort.instance == new Serialport();
          }
        }
      }
      return SerialPort.instance;
    }
  }

  private SerialPort(){}
} 
```

然后，在实践中：

```
SerialPort sp = SerialPort.Instance;
sp.MyMethod(...); 
```

有关[此单例模式](http://msdn.microsoft.com/en-us/library/ff650316.aspx)的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:49:53.910

实际上，我昨天刚刚遇到了同样的问题，我想我可能已经找到了一种更简单的方法来解决这个问题，而不是使用单例方法。我制作了一个类文件并创建了一个名为`public class Serial`. 在里面我将我的串行变量声明为`static SerialPort`（即`static SerialPort serial`）；如果您需要使用计时器，则与计时器相同。为 set 和 get 创建一个函数`serialStatus`，在其中设置 a `public static bool`。我真的很想在这里发布我的代码，但我真的不明白如何正确地做到这一点。在您的表单中，您将让第一个表单启动串行端口。对于另一种形式，您所要做的就是声明`Serial serial = new Serial();`提取方法，您就可以开始了。如果您需要更改串行设置，您可以创建一个带有 bool 输入的方法（即 if `true`,`serial.Close();`然后使用新设置重新启动串行。

# android - Android SharedPreferences 卷入选角

> ID：10325042
> 
> 赞同：0
> 
> 时间：2012-04-25T23:06:28.830
> 
> 标签：android, casting

我现在正在使用 Android 的`SharedPreferences`.

我已经设置了一些绑定到的首选项`EditTextPreference`- 所以内容是`String`类型，我们可以通过以下方式访问它：

```
String defaultValue = "1337";
String value = preferences.getString("key", defaultValue); 
```

但是我们想要使用`int`value 呢？

```
int defaultValue = 1337;
int value = Integer.parseInt(preferences.getString("key", String.valueOf(defaultValue))); 
```

有没有更好的办法 ？我可以以某种方式设置`EditTextPreference`为`int`输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:18:03.913

> 我可以以某种方式将 EditTextPreference 设置为 int 类型吗？

不，对不起。您可以创建自己的自定义子类`DialogPreference`，甚至可能是 的子类`EditTextPreference`（不确定这有多灵活），将值保存为`SharedPreferences`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:21:48.920

我不想将数值编辑为文本，除非作为辅助高级用户方法。您可能希望通过多种方式约束值（例如，最小值/最大值或枚举值），因此使用返回构造正确的结果的小部件是有意义的。无论是从编程的角度还是从用户体验的角度来看。

# php - Seach.php 不工作，不显示任何结果

> ID：10325055
> 
> 赞同：0
> 
> 时间：2012-04-25T23:07:15.873
> 
> 标签：php, mysql, forms, search, input

我试图弄清楚如何使我的 search.php 脚本与 mySQL 一起工作。我无法显示信息。不确定问题出在哪里。

第 1 页：

```
<form action="search_result.php" method="GET">
    <input type="text" name="reg" />
    <input type="submit" value="Search" />
</form> 
```

第2页：

```
<?php
$host="localhost";
$username="XXXXXXXXXXX";
$password="XXXXXXXXXXX";
$db_name="XXXXXXXXXXXX";
$tbl_name="reg_add";
mysql_connect("$host", "$username", "$password") or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$record = $_POST['record']; // if coming from e.g. a form
$result=mysql_query(" SELECT * FROM reg_add WHERE reg='" . mysql_real_escape_string($record) . "'");

$row = mysql_fetch_assoc($result);
$first_name = $row['first_name'];
$last_name = $row['last_name'];
$reg = $row['reg'];
?>

<input  name="reg" value="<? echo "$record" ?>">

<input  name="first_name" value="<? echo "$first_name" ?>">

<input  name="last_name" value="<? echo "$last_name" ?>"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:19:53.103

```
mysql_connect("$host", "$username", "$password") 
```

不是你的问题，但不需要在变量周围加上引号：

```
mysql_connect($host, $username, $password);
mysql_select_db($db_name); 
```

`$record`您应该在某处设置变量：

```
$record = $_POST['record']; // if coming from e.g. a form
$result=mysql_query(" SELECT * FROM reg_add WHERE reg='" . mysql_real_escape_string($record) . "'"); 
```

这是错误的：

```
$first_name=mysql_result($result,"first_name");
$last_name=mysql_result($result,"last_name");
$reg=mysql_result($result,"reg"); 
```

并且应该是：

```
$row = mysql_fetch_assoc($result);
$first_name = $row['first_name'];
$last_name = $row['last_name'];
$reg = $row['reg']; 
```

另外：你不应该再使用[`mysql_*`函数](http://us.php.net/manual/en/mysqlinfo.api.choosing.php)了。使用其中一个`mysqli_*`或 PDO。

请记住，如果某些东西不起作用，您可以检查查询是否[`mysql_error()`](http://nl3.php.net/manual/en/function.mysql-error.php)有任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:30:13.310

mysql_result() 的语法错误。按照[说明书](http://php.net/manual/en/function.mysql-result.php)，应该是

> 字符串 mysql_result ( 资源 $result , int $row [, mixed $field = 0 ] )

所以正确的使用方法是

```
mysql_result($result, 1, "first_name"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:30:33.977

您的表单是 GET 方法，在您的 PHP 中使用：

```
$record = $_POST['record']; // if coming from e.g. a form 
```

如果您的表单具有 GET 方法，您将如何获得 POST['record']？

我想您应该或将您的表格更改为：

```
method="POST" 
```

或将您的 $record 在 php 中更改为：

```
$record = $_GET['record']; 
```

试试这个版本：

你形成：

```
 <form action="search_result.php" method="POST">
    <input type="text" name="reg" id="reg" />
    <input type="submit" name="Submit" id="Submit" value="Search" />
</form> 
```

搜索结果.php：

```
<?php

$host       ="localhost";
$username   ="XXXXXXXXXXX";
$password   ="XXXXXXXXXXX";
$db_name    ="XXXXXXXXXXXX";
$tbl_name   ="reg_add";

/* Connect to MySQL database */
mysql_connect("$host", "$username", "$password") or die("Error connecting to database");
mysql_select_db("$db_name")or die("Error selecting database");

$error = '';

if (isset($_POST['Submit'])) {

    if (!empty($_POST['reg'])) {

        $record = $_POST['reg']; // if coming from e.g. a form

        $query = mysql_query("SELECT * FROM reg_add WHERE reg='" . mysql_real_escape_string($record) . "'");
        $result = mysql_num_rows($query);

        if ($result != 0) {

            $row = mysql_fetch_array($query);

            $first_name = $row['first_name'];
            $last_name = $row['last_name'];
            $reg = $row['reg'];

        } else {

            $error = 'No result have been found!';

        }

    } else {

        $error = 'You have not entered the search field, <a href="javascript:history.back(1)">Go back</a>.';

    }
}

if (!empty($error)) { echo $error; } 
?>

<input  name="reg" value="<? echo $record; ?>">

<input  name="first_name" value="<? echo $first_name; ?>">

<input  name="last_name" value="<? echo $last_name; ?>"> 
```

# xml - 使用 T-SQL 解析护理连续性文档 (CCD)

> ID：10325060
> 
> 赞同：4
> 
> 时间：2012-04-25T23:07:56.217
> 
> 标签：xml, tsql, ccd, c-cda

我已经想出了如何使用 T-SQL 对 CCD 进行一些基本解析，并认为我会分享结果。

如果有人知道更好的方法来做到这一点，请随时发表评论。我对减少与命名空间声明相关的文本特别感兴趣。

我知道我可以简单地从原始 xml 中删除名称空间 (xmlns="urn:hl7-org:v3")，但是，我不希望这样做。

```
DECLARE @ClinicalDocumentXml xml
-- Full document available from http://xreg2.nist.gov/cda-validation/downloads.html
SET @ClinicalDocumentXml = '<?xml version="1.0" encoding="UTF-8"?>
<ClinicalDocument xmlns="urn:hl7-org:v3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:hl7-org:v3 http://xreg2.nist.gov:8080/hitspValidation/schema/cdar2c32/infrastructure/cda/C32_CDA.xsd">
    <realmCode code="US"/>
    <typeId root="2.16.840.1.113883.1.3" extension="POCD_HD000040"/>
    <templateId root="2.16.840.1.113883.3.27.1776" assigningAuthorityName="CDA/R2"/>
    <templateId root="2.16.840.1.113883.10.20.3" assigningAuthorityName="HL7/CDT Header"/>
    <templateId root="1.3.6.1.4.1.19376.1.5.3.1.1.1" assigningAuthorityName="IHE/PCC"/>
    <templateId root="2.16.840.1.113883.3.88.11.32.1" assigningAuthorityName="HITSP/C32"/>
    <id root="2.16.840.1.113883.3.72" extension="MU_Rev1_HITSP_C32C83_4Sections_NoInformationEntries_NoErrors" assigningAuthorityName="NIST Healthcare Project"/>
    <code code="34133-9" displayName="Summarization of episode note" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC"/>
    <title/>
    <effectiveTime value="20101026130945"/>
    <confidentialityCode/>
    <languageCode code="en-US"/>
    <recordTarget>
        <patientRole>
            <id root="ProviderID" extension="PatientID" assigningAuthorityName="Provider Name"/>
            <addr use="HP">
                <streetAddressLine>First Address Line</streetAddressLine>
                <streetAddressLine>Next Address line</streetAddressLine>
                <city>CityName</city>
                <state>StateName</state>
                <postalCode>00000-0000</postalCode>
                <country>USA</country>
            </addr>
            <telecom value="tel:+1-(555)555-1212" use="HP" />
            <patient>
                <name>
                    <given>FirstName</given>
                    <given>MiddleNameorInitial</given>
                    <family>FamilyName</family>
                </name>
                <administrativeGenderCode code="F" displayName="Female" codeSystem="2.16.840.1.113883.5.1" codeSystemName="HL7 AdministrativeGender"/>
                <birthTime value="19840704"/>
                <maritalStatusCode code="S" displayName="Single" codeSystem="2.16.840.1.113883.5.2" codeSystemName="HL7 Marital status"/>
                <languageCommunication>
                    <templateId root="2.16.840.1.113883.3.88.11.83.2" assigningAuthorityName="HITSP/C83"/>
                    <templateId root="1.3.6.1.4.1.19376.1.5.3.1.2.1" assigningAuthorityName="IHE/PCC"/>
                    <languageCode code="en-US"/>
                </languageCommunication>
            </patient>
        </patientRole>
    </recordTarget>
</ClinicalDocument>'

SELECT
    Field.value('declare default element namespace "urn:hl7-org:v3";title[1]', 'varchar(255)') AS Title,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/id[1]/@extension', 'varchar(255)') AS InternalPatientID,
    Field.value('declare default element namespace "urn:hl7-org:v3";effectiveTime[1]/@value', 'varchar(255)') AS CreationDateTime,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/patient[1]/name[1]/name[1]', 'varchar(255)') AS FullName,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/patient[1]/name[1]/family[1]', 'varchar(255)') AS LastName,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/patient[1]/name[1]/given[1]', 'varchar(255)') AS FirstName,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/patient[1]/name[1]/given[2]', 'varchar(255)') AS MiddleName,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/patient[1]/birthTime[1]/@value', 'varchar(255)') AS DateOfBirth,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/patient[1]/administrativeGenderCode[1]/@code', 'varchar(255)') AS Gender,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/addr[1]/streetAddressLine[1]', 'varchar(255)') AS PatientAddress,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/addr[1]/streetAddressLine[2]', 'varchar(255)') AS PatientAddress2,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/addr[1]/city[1]', 'varchar(255)') AS PatientCity,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/addr[1]/state[1]', 'varchar(255)') AS PatientState,
    Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/addr[1]/postalCode[1]', 'varchar(255)') AS PatientZip,
    Replace(Field.value('declare default element namespace "urn:hl7-org:v3";recordTarget[1]/patientRole[1]/telecom[1]/@value', 'varchar(255)'), 'tel:', '') AS HomePhone
FROM @ClinicalDocumentXml.nodes('declare default element namespace "urn:hl7-org:v3"; ClinicalDocument') CCD(Field) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:45:40.897

一个可能至少有助于减少换行的微不足道的变化：

```
DECLARE @namespace varchar(75);
SET @namespace = 'declare default element namespace "urn:hl7-org:v3";';

SELECT 
   Field.value(@namespace + 'title[1]', 'varchar(255)') AS Title,
   ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:20:58.863

您可以使用[WITH XMLNAMESPACES](http://msdn.microsoft.com/en-us/library/ms177607.aspx)。

```
WITH XMLNAMESPACES(DEFAULT 'urn:hl7-org:v3')
SELECT
    Field.value('title[1]', 'varchar(255)') AS Title,
    Field.value('(recordTarget/patientRole/id/@extension)[1]', 'varchar(255)') AS InternalPatientID,
    Field.value('(effectiveTime/@value)[1]', 'varchar(255)') AS CreationDateTime,
    Field.value('(recordTarget/patientRole/patient/name/name)[1]', 'varchar(255)') AS FullName,
    Field.value('(recordTarget/patientRole/patient/name/family)[1]', 'varchar(255)') AS LastName,
    Field.value('(recordTarget/patientRole/patient/name/given)[1]', 'varchar(255)') AS FirstName,
    Field.value('(recordTarget/patientRole/patient/name/given)[2]', 'varchar(255)') AS MiddleName,
    Field.value('(recordTarget/patientRole/patient/birthTime/@value)[1]', 'varchar(255)') AS DateOfBirth,
    Field.value('(recordTarget/patientRole/patient/administrativeGenderCode/@code)[1]', 'varchar(255)') AS Gender,
    Field.value('(recordTarget/patientRole/addr/streetAddressLine)[1]', 'varchar(255)') AS PatientAddress,
    Field.value('(recordTarget/patientRole/addr/streetAddressLine)[2]', 'varchar(255)') AS PatientAddress2,
    Field.value('(recordTarget/patientRole/addr/city)[1]', 'varchar(255)') AS PatientCity,
    Field.value('(recordTarget/patientRole/addr/state)[1]', 'varchar(255)') AS PatientState,
    Field.value('(recordTarget/patientRole/addr/postalCode)[1]', 'varchar(255)') AS PatientZip,
    Replace(Field.value('(recordTarget/patientRole/telecom/@value)[1]', 'varchar(255)'), 'tel:', '') AS HomePhone
FROM @ClinicalDocumentXml.nodes('ClinicalDocument') CCD(Field) 
```

您也可以使用`cross apply`.

```
WITH XMLNAMESPACES(DEFAULT 'urn:hl7-org:v3')
SELECT
    CD.Field.value('title[1]', 'varchar(255)') AS Title,
    PR.Field.value('(id/@extension)[1]', 'varchar(255)') AS InternalPatientID,
    CD.Field.value('(effectiveTime/@value)[1]', 'varchar(255)') AS CreationDateTime,
    PR.Field.value('(patient/name/name)[1]', 'varchar(255)') AS FullName,
    PR.Field.value('(patient/name/family)[1]', 'varchar(255)') AS LastName,
    PR.Field.value('(patient/name/given)[1]', 'varchar(255)') AS FirstName,
    PR.Field.value('(patient/name/given)[2]', 'varchar(255)') AS MiddleName,
    PR.Field.value('(patient/birthTime/@value)[1]', 'varchar(255)') AS DateOfBirth,
    PR.Field.value('(patient/administrativeGenderCode/@code)[1]', 'varchar(255)') AS Gender,
    PR.Field.value('(addr/streetAddressLine)[1]', 'varchar(255)') AS PatientAddress,
    PR.Field.value('(addr/streetAddressLine)[2]', 'varchar(255)') AS PatientAddress2,
    PR.Field.value('(addr/city)[1]', 'varchar(255)') AS PatientCity,
    PR.Field.value('(addr/state)[1]', 'varchar(255)') AS PatientState,
    PR.Field.value('(addr/postalCode)[1]', 'varchar(255)') AS PatientZip,
    Replace(PR.Field.value('(telecom/@value)[1]', 'varchar(255)'), 'tel:', '') AS HomePhone
FROM
  (SELECT @ClinicalDocumentXml.query('/ClinicalDocument/*')) AS CD(Field)
CROSS APPLY
  (SELECT CD.Field.query('recordTarget/patientRole/*')) AS PR(Field) 
```

# css - CSS导致网页顶部出现奇怪的间距

> ID：10325063
> 
> 赞同：1
> 
> 时间：2012-04-25T23:08:27.187
> 
> 标签：css

在我正在构建的测试页面上，页面顶部出现了这个奇怪的间距，我不确定这是为什么。

从下面的 CSS 中可以看出，body 标签的边距和内边距设置为 0。

这是测试站点的 URL，看看我所说的间距是什么意思：http: [//s361608839.websitehome.co.uk/testsite/index.html](http://s361608839.websitehome.co.uk/testsite/index.html)

**CSS：**

```
body{
background: #4f6ca6;
margin: 0;
padding: 0;
}

#header{
background:url(../images/header_bg.jpg) no-repeat center top;
height: 328px;
width: 100%;
border-bottom: 1px solid #223c6d;
-webkit-box-shadow: 0 8px 6px -6px #254379;
-moz-box-shadow: 0 8px 6px -6px #254379;
box-shadow: 0 8px 6px -6px #254379;       
}

#slider{
width: 960px;
height: 328px;
margin: 0 auto;
} 
```

**HTML：**

```
 <div id="header">
 <div id="slider">
 <h1>Test Site</h1>
 <h2>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h2>
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T23:13:20.713

您的`<h1>`标签有`30px`边距。

这称为检查员：

![在此处输入图像描述](../Images/06388b4014a0352210af942be1726e77.png)

学习它，爱它，然后滥用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T23:10:20.550

那是`h1`元素的上边距。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T23:14:08.880

您应该考虑对大多数元素进行初始重置。这意味着您最初需要做更多的工作，但会给您更大的控制权并显着简化故障排除。

[Meyer 重置](http://meyerweb.com/eric/tools/css/reset/ "迈耶斯重置")是一个非常常见的起点。

# .net-4.0 - 在 .NET4 中为 System.dll、System.Xml.dll 生成痣时编译错误

> ID：10325066
> 
> 赞同：1
> 
> 时间：2012-04-25T23:08:40.227
> 
> 标签：.net-4.0, moles

为 .NET4 System.dll（内部版本 4.0.30310.261）和 System.Xml.Dll（内部版本 4.0.30319.233）生成痣时出现编译错误。System.Dll 的错误是：

```
m.g.cs(251449,33): error CS0115: 'System.Net.Moles.SFileWebResponse.Dispose(bool)': no suitable method found to override [c:\jin\moles\tmp\s\m.g.csproj]
m.g.cs(251650,30): error CS0115: 'System.Net.Moles.SFileWebResponse.SupportsHeaders': no suitable method found to override [c:\jin\moles\tmp\s\m.g.csproj]
m.g.cs(255339,33): error CS0115: 'System.Net.Moles.SHttpWebResponse.Dispose(bool)': no suitable method found to override [c:\jin\moles\tmp\s\m.g.csproj]
m.g.cs(255540,30): error CS0115: 'System.Net.Moles.SHttpWebResponse.SupportsHeaders': no suitable method found to override [c:\jin\moles\tmp\s\m.g.csproj]
m.g.cs(303198,33): error CS0115: 'System.Net.Moles.SWebResponse.Dispose(bool)': no suitable method found to override [c:\jin\moles\tmp\s\m.g.csproj]
m.g.cs(303399,30): error CS0115: 'System.Net.Moles.SWebResponse.SupportsHeaders': no suitable method found to override [c:\jin\moles\tmp\s\m.g.csproj]
Done Building Project "c:\jin\moles\tmp\s\m.g.csproj" (default targets) -- FAILED. 
```

System.Xml.Dll 的错误是：

```
m.g.cs(113977,17): error CS0205: Cannot call an abstract base member: 'System.Xml.XmlReader.Close()' [c:\jin\moles\tmp\s\m.g.csproj]
m.g.cs(116149,21): error CS0205: Cannot call an abstract base member: 'System.Xml.XmlResolver.Credentials.set' [c:\jin\moles\tmp\s\m.g.csproj]
m.g.cs(130559,17): error CS0205: Cannot call an abstract base member: 'System.Xml.XmlWriter.Close()' [c:\jin\moles\tmp\s\m.g.csproj] 
```

我在 VS2010 中使用 Moles 0.94。只有在安装 .NET 4 Service Pack 后，两个 DLL 的较新版本才会出现错误。在 .NET 4 服务包之前，两个 DLL 的 4.0.30319.1 版本生成的痣很好。

Moles 生成的代码似乎与最新的 .NET4 程序集不兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:32:05.340

请参阅以下问题：
[Moling System.dll](https://stackoverflow.com/questions/8144653/moling-system-dll)
[http://social.msdn.microsoft.com/Forums/en/pex/thread/446669dd-1d69-4020-9174-dc259a55b4b4](http://social.msdn.microsoft.com/Forums/en/pex/thread/446669dd-1d69-4020-9174-dc259a55b4b4)

基本上，更新 System.moles 如下：

```
<Moles xmlns="http://schemas.microsoft.com/moles/2010/">
  <Assembly Name="System" ReflectionOnly="true"/>
</Moles> 
```

# svg - SVG以em为单位翻译？

> ID：10325070
> 
> 赞同：14
> 
> 时间：2012-04-25T23:09:23.517
> 
> 标签：svg

有没有办法使用 em 作为 SVG 翻译的单位？如在

```
<rect height="10em" width="10em" transform="translate(0em, 10em)"
 style="fill:none;stroke-width:3;stroke:black/> 
```

除非我将 em 作为单位删除，否则矩形不会在 Firefox 中翻译。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-26T06:57:39.830

如果您将要翻译的元素包装在新的坐标系中，您可以这样做：

```
<svg>
  <svg width="1em" height="1em" overflow="visible" viewBox="0 0 1 1">
    <rect height="10" width="10" transform="translate(0, 10)" .../>
  </svg>
</svg> 
```

如果您只需要翻译并使用具有 x 和 y 属性（或等效）的元素，另一种选择是使用它们，如下所示：

```
<rect x="0" y="10em" height="10em" width="10em" 
 style="fill:none;stroke-width:3;stroke:black/> 
```

[CSS/SVG](http://dev.w3.org/csswg/css3-transforms/)中的转换的新规范目前正在制定中，它确实允许翻译中的单位，请参见[此处](http://dev.w3.org/csswg/css3-transforms/#svg-syntax)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T23:21:25.640

不幸的是，不是；

规范[明确允许将*用户单位*](http://www.w3.org/TR/SVG/coords.html#Units)（对应于 CSS 单位并在未指定时默认为像素单位）应用于坐标，而转换仅用于[SVGMatrix 接口](http://www.w3.org/TR/SVG/coords.html#InterfaceSVGMatrix)定义的浮点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T10:52:30.960

如果您使用 javascript 创建矩形，您可以做的另一件事是检索父元素的字体大小并将 em 值转换为 px。

使用 jQuery：

```
var one_em = +$("#parent").css("font-size").replace("px", "");
$("#parent").append("<rect transform=translate(0," + (10*one_em) + ") .../>") 
```

# python - 我可以将 python 与 giraph 一起使用吗？

> ID：10325072
> 
> 赞同：6
> 
> 时间：2012-04-25T23:09:58.407
> 
> 标签：python, graph, hadoop, graph-theory

Giraph 是否支持 python，如果支持，它是否像 Hadoop 上的 python 一样得到很好的支持，或者它导致性能比使用原始 Java 差得多？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-22T07:53:13.603

Giraph 现在在主干版本中支持通过 jython 编写 python 脚本。

这是相关问题： [https ://issues.apache.org/jira/browse/GIRAPH-683](https://issues.apache.org/jira/browse/GIRAPH-683)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T02:58:45.860

尚不支持流式传输到脚本语言，但肯定是一个很好的补充。欢迎补丁。

# python - 在 NumPy 中将元素乘法和矩阵乘法与多维数组相结合

> ID：10325078
> 
> 赞同：6
> 
> 时间：2012-04-25T23:10:11.653
> 
> 标签：python, multidimensional-array, numpy

我有两个多维 NumPy 数组，`A`and `B`， with `A.shape = (K, d, N)`and `B.shape = (K, N, d)`。我想在轴 0 ( `K`) 上执行元素操作，该操作是轴 1 和 2 (`d, N`和`N, d`) 上的矩阵乘法。所以结果应该是一个多维数组`C`，`C.shape = (K, d, d)`所以`C[k] = np.dot(A[k], B[k])`。一个简单的实现应该是这样的：

```
C = np.vstack([np.dot(A[k], B[k])[np.newaxis, :, :] for k in xrange(K)]) 
```

但是这个实现很*慢*。稍微快一点的方法如下所示：

```
C = np.dot(A, B)[:, :, 0, :] 
```

`np.dot`它使用多维数组的默认行为，给我一个 shape 的数组`(K, d, K, d)`。但是，这种方法会计算所需的回答`K`时间（沿轴 2 的每个条目都是相同的）。渐近地它会比第一种方法慢，但开销要少得多。我也知道以下方法：

```
from numpy.core.umath_tests import matrix_multiply
C = matrix_multiply(A, B) 
```

但我不保证此功能可用。因此，我的问题是，NumPy 是否提供了一种有效执行此操作的标准方法？通常适用于多维数组的答案将是完美的，但仅针对这种情况的答案也会很棒。

**编辑：**正如@Juh_ 所指出的，第二种方法是不正确的。正确的版本是：

```
C = np.dot(A, B).diagonal(axis1=0, axis2=2).transpose(2, 0, 1) 
```

但是增加的开销使它比第一种方法慢，即使对于小矩阵也是如此*。*最后一种方法是在我所有的时序测试中以远射获胜，无论是小型矩阵还是大型矩阵。如果没有更好的解决方案出现，我现在强烈考虑使用它，即使这意味着将`numpy.core.umath_tests`库（用 C 编写）复制到我的项目中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:44:39.810

您的问题的可能解决方案是：

```
C = np.sum(A[:,:,:,np.newaxis]*B[:,np.newaxis,:,:],axis=2) 
```

然而：

1.  仅当 K 远大于 d 和 N 时，它才比 vstack 方法快
2.  它们可能是一些内存问题：在上述解决方案中，分配了一个 KxdxNxd 数组（即在求和之前所有可能的产品对）。实际上，由于内存不足，我无法使用大 K、d 和 N 进行测试。

顺便说一句，请注意：

```
C = np.dot(A, B)[:, :, 0, :] 
```

没有给出正确的结果。它让我上当了，因为我首先通过将结果与这个 np.dot 命令给出的结果进行比较来检查我的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:21:35.497

我的项目中有同样的问题。我能想到的最好的方法是，我认为它比使用快一点（也许 10%）`vstack`：

```
K, d, N = A.shape
C = np.empty((K, d, d))
for k in xrange(K):
    C[k] = np.dot(A[k], B[k]) 
```

我很想看到一个更好的解决方案，我不太明白如何使用它`tensordot`来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-29T07:32:02.597

一个非常灵活、紧凑和快速的解决方案：

```
C = np.einsum('Kab,Kbc->Kac', A, B, optimize=True) 
```

确认：

```
import numpy as np
K = 10
d = 5
N = 3
A = np.random.rand(K,d,N)
B = np.random.rand(K,N,d)
C_old = np.dot(A, B).diagonal(axis1=0, axis2=2).transpose(2, 0, 1)
C_new = np.einsum('Kab,Kbc->Kac', A, B)
print(np.max(C_old-C_new))  # should be 0 or a very small number 
```

对于大型多维数组，可选参数`optimize=True`可以为您节省大量时间。您可以在这里了解*einsum*：

[https://ajcr.net/Basic-guide-to-einsum/](https://ajcr.net/Basic-guide-to-einsum/)

[https://rockt.github.io/2018/04/30/einsum](https://rockt.github.io/2018/04/30/einsum)

[https://numpy.org/doc/stable/reference/generated/numpy.einsum.html](https://numpy.org/doc/stable/reference/generated/numpy.einsum.html)

引用：

> 爱因斯坦求和约定可用于计算许多多维线性代数数组运算。**einsum**提供了一种简洁的方式来表示这些。这些操作的非详尽列表是：
> 
> *   数组的跟踪，**numpy.trace**。
>     
>     
> *   返回对角线**numpy.diag**。
>     
>     
> *   数组轴求和，**numpy.sum**。
>     
>     
> *   转置和排列，**numpy.transpose**。
>     
>     
> *   矩阵乘法和点积，**numpy.matmul** **numpy.dot**。
>     
>     
> *   矢量内积和外积，**numpy.inner** **numpy.outer**。
>     
>     
> *   广播，元素和标量乘法，**numpy.multiply**。
>     
>     
> *   张量收缩，**numpy.tensordot**。
>     
>     
> *   链式数组操作，以高效的计算顺序**numpy.einsum_path**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T10:57:39.440

你可以做

```
np.matmul(A, B) 
```

查看[https://numpy.org/doc/stable/reference/generated/numpy.matmul.html](https://numpy.org/doc/stable/reference/generated/numpy.matmul.html)。

应该比 einsum 快足够大`K`。

# c - 代码中的两个警告旨在使用链表实现堆栈

> ID：10325081
> 
> 赞同：0
> 
> 时间：2012-04-25T23:10:20.967
> 
> 标签：c

我有三个文件：stack2.h、stack2.c 和 main.c。

stack2.h 包含以下内容：

```
/* Define linked list structure */
typedef struct node {
    int val;
    struct Node *next;
} Node, *pNode;

/* Define stack structure */
typedef struct StackType {
    pNode top;
} Stack, *pStack;

/* Declare functions */
pStack InitStack( );

int IsEmpty( pStack pS );
int Pop( pStack pS );

void Push( pStack pS, int val );
void KillStack( pStack pS ); 
```

stack2.c 包含

```
pStack InitStack( ) {

    /* Declare variables */
    pStack pS = (pStack)malloc( sizeof(Stack) );

    /* Set first node to NULL */
    pS -> top = NULL;

    /* Return pointer to stack */
    return pS;

}

int IsEmpty( pStack pS ) {

    return ( pS->top == NULL );

}

int Pop( pStack pS ) {

    /* Declare variables */
    int ret = 0;
    pNode temp = NULL;

    /* Check if stack is empty */
   if( IsEmpty( pS ) ) {
        printf( "[ERROR] Pop operation on an empty stack.\n" );
        exit( 1 );
    }

    /* Find return value (last in) */
    ret = pS->top->val;
    temp = pS->top;

    /* Delete and kill node */
    pS->top = pS->top->next;
    free( temp );

    /* Return */
    return ret;

}

void Push( pStack pS, int val ) {

    /* Allocate memory for new node */
    pNode nnew = (pNode)malloc( sizeof(Node) );

    /* Initiate node */
    nnew->next = pS->top;
    nnew->val = val;

    /* Set structure's top to new node */
    pS -> top = nnew;

} 
```

我不会用 main.c 包含的内容给你带来负担。本质上，它包括正确的库和文件，并且只是简单地推送和弹出一些值。我收到这些警告：

```
assignment from incompatible pointer types 
```

在这两行：

```
 nnew->next = pS->top;
    pS->top = pS->top->next; 
```

我有点困惑。nnew 是指向节点的指针，因此 nnew->next 也是指向节点的指针。pS 是指向堆栈的指针，因此 pS->top 也是指向节点的指针。我不明白这些是如何不兼容的！

这是怎么回事？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T23:24:41.200

```
typedef struct node {
    int val;
    struct Node *next;
} Node, *pNode; 
```

您声明`struct node`但`struct Node *`在其中使用；C 区分大小写，因此指针*不是*同一类型。`struct`C，也许不幸的是，只要您不取消引用它们（这是用于“不透明指针”的成语），C 将很乐意让您操纵指向未知类型的指针，因此您得到的唯一警告是指针类型不匹配。

# xslt - XSLT 标记化 - 捕获分隔符

> ID：10325082
> 
> 赞同：1
> 
> 时间：2012-04-25T23:10:23.157
> 
> 标签：xslt, tokenize, separator

这是 XSL 中的一段代码，它将文本标记为由插值和类似字符分隔的片段。我想问一下是否有可能以某种方式捕获文本被标记的字符串，例如逗号或点等。

```
<xsl:stylesheet version="2.0" exclude-result-prefixes="xs xdt err fn" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:err="http://www.w3.org/2005/xqt-errors" xmlns:xdt="http://www.w3.org/2005/xpath-datatypes">
<xsl:output method="xml" indent="yes"/>
<xsl:template match="GENERUJ">
    <TEXT>
        <xsl:variable name="text">
            <xsl:value-of select="normalize-space(unparsed-text(@filename, 'UTF-8'))" disable-output-escaping="yes"/>
        </xsl:variable>
        <xsl:for-each select="tokenize($text, '(\s+(&quot;|\(|\[|\{))|((&quot;|,|;|:|\s\-|\)|\]|\})\s+)|((\.|\?|!|;)&quot;?\s*)' )">
            <xsl:choose>
                <xsl:when test="string-length(.)&gt;0">
                    <FRAGMENT>
                        <CONTENT>
                            <xsl:value-of select="."/>
                        </CONTENT>
                        <LENGTH>
                            <xsl:value-of select="string-length(.)"/>
                        </LENGTH>
                    </FRAGMENT>
                </xsl:when>
                <xsl:otherwise>
                    <FRAGMENT_COUNT>
                        <xsl:value-of select="last()-1"/>
                    </FRAGMENT_COUNT>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>
    </TEXT>
</xsl:template> 
```

如您所见，构建的标签 CONTENTS、LENGTH，如果您知道我的意思，我想添加一个名为 SEPARATOR 的标签。我在互联网上找不到任何答案，而且我只是 xsl 转换的初学者，所以我正在寻找一个快速的解决方案。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:17:44.827

tokenize() 函数不允许您发现分隔符是什么。如果您需要知道，则需要使用`xsl:analyze-string`。如果您使用与 tokenize() 相同的正则表达式，这会将“令牌”传递给`xsl:non-matching-substring`指令，并将“分隔符”传递给`xsl:matching-substring`指令。

# data-structures - XSB Prolog 中的 heaps.P 库在哪里？

> ID：10325085
> 
> 赞同：0
> 
> 时间：2012-04-25T23:10:37.807
> 
> 标签：data-structures, prolog, xsb

XSB 文档在手册卷 2 第 1.16.5 节中有一段关于堆数据结构库的内容。但是我在源代码或版本历史记录中或通过 Google 都找不到该库的任何迹象。如果这个库实际上仍然存在，有什么想法吗？

我唯一的线索是 logtalk 中的一个库，它显然来自同一个原件。但是我正在使用 Prolog，因此必须将 logtalk 移植回 Prolog。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:43:21.590

您可以将 XSB（或任何其他支持的 Prolog 编译器）中的 Logtalk 用作另一个库，并从普通 Prolog 或 Prolog 模块调用其资源。关于 Logtalk 的堆库支持，它确实基于（如其文档中所述）原始 Richard O'Keefe 代码，但经过增强以提供最小堆和最大堆。堆接口可以在这里浏览，例如：

[http://logtalk.org/library/heapp_0.html](http://logtalk.org/library/heapp_0.html)

[http://logtalk.org/library/heap_1.html](http://logtalk.org/library/heap_1.html)

一个简单的使用示例：

```
?- heap(<)::(new(Heap), insert_all([1-a,4-d,2-b,5-e,6-f,3-c,7-g], Heap, UpdatedHeap), top(UpdatedHeap, Key, Value)).
Heap = t(0, [], t),
UpdatedHeap = t(7, [], t(1, a, t(3, c, t(5, e, t, t), t(4, d, t, t)), t(2, b, t(6, f, t, t), t(7, g, t, t)))),
Key = 1,
Value = a.

?- heap(>)::(new(Heap), insert_all([1-a,4-d,2-b,5-e,6-f,3-c,7-g], Heap, UpdatedHeap), top(UpdatedHeap, Key, Value)).
Heap = t(0, [], t),
UpdatedHeap = t(7, [], t(7, g, t(4, d, t(1, a, t, t), t(3, c, t, t)), t(6, f, t(2, b, t, t), t(5, e, t, t)))),
Key = 7,
Value = g. 
```

然而，有一个警告。与普通 Prolog 相比， ::/2 调用仅在从 Logtalk 对象（或 Logtalk 类别）中进行时才提供性能。顶级解释器或 Prolog 模块中的查询被解释（意味着消息在运行时解析）而不是编译（消息将在编译时解析）。性能影响是否对您的应用程序有意义，只有您可以判断（在支持术语扩展的 Prolog 编译器中，很容易减少模块内 ::/2 调用的性能影响）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:15:18.003

谷歌显示了周围的几个地点：

[堆](http://anthonypenniston.com/grammarchecker/browser/GrammarChecker/prolog/library/heaps.pl)

[堆](http://www.j-paine.org/prolog/tools/files/heaps.pl)

# cocoa - 将 URL 拖入我的应用程序

> ID：10325089
> 
> 赞同：2
> 
> 时间：2012-04-25T23:11:09.087
> 
> 标签：cocoa, drag-and-drop, nstableview

我发布了[这个](https://stackoverflow.com/questions/10308008/nstableview-and-drag-and-drop-from-finder)关于将内容从 OS X Finder 拖入`NSTableView`. 现在这一切都很好。但是，如果我想将 URL 从浏览器地址栏中拖到我的应用程序中，我首先需要将它们拖到桌面（它们显示为 .webloc 文件），然后将它们拖到我的应用程序中。

有没有办法直接将它们从浏览器地址栏中拖到我的应用程序中，而不必先将它们拖到桌面？

我尝试注册`kUTTypeURL`，但这似乎不起作用，因为拖动的 URL 会反弹回其原点：

```
[[self sourcesTableView] registerForDraggedTypes:[NSArray arrayWithObjects: (NSString*)kUTTypeFileURL, (NSString*)kUTTypeURL, nil]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:56:26.200

在[我接受](https://stackoverflow.com/a/10309544/50122)的对您的其他问题的回答中，我提供的代码专门将您的应用可以接受的 URL 限制为文件 URL：

```
NSArray* urls = [pb readObjectsForClasses:[NSArray arrayWithObject:[NSURL class]]
 options:[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] 
                                     forKey: NSPasteboardURLReadingFileURLsOnlyKey]]; 
```

请注意包含布尔值的选项`YES`字典`NSPasteboardURLReadingFileURLsOnlyKey`。

如果您想接受任何 URL，只需执行以下操作：

```
NSArray* urls = [pb readObjectsForClasses:[NSArray arrayWithObject:[NSURL class]]
                                  options:nil]; 
```

或者更好的是，您可以要求您接受任何 URL，只要它是特定类型的，在本例中为图像：

```
NSArray* acceptedTypes = [NSArray arrayWithObject:(NSString*)kUTTypeImage];
NSArray* urls = [pb readObjectsForClasses:[NSArray arrayWithObject:[NSURL class]]
                                  options:[NSDictionary dictionaryWithObject:acceptedTypes 
                                   forKey:NSPasteboardURLReadingContentsConformToTypesKey]]; 
```

# asp.net - ASP.NET 按钮不运行相关功能

> ID：10325093
> 
> 赞同：0
> 
> 时间：2012-04-25T23:12:09.853
> 
> 标签：asp.net

我有一个`UpdatePanel`，里面有一个`GridView`，里面有一个`Repeater`。有一个按钮可以添加评论。这个按钮 post back 但 id 不运行后面的函数代码。这是我的代码

```
<updatepanel>
    <gridview>
        <repeater>
            <asp:Button ID="kitapVarYorumEkle" runat="server"  
                 CommandArgument='<%#Eval("id") %>' 
                 CommandName='<%# GridView1.Rows.Count.ToString() %>' 
                 Text="Yorum ekle" class="blueButton" 
                 OnClick="kitapVarYorumEkle_Click"  />
        </repeater>
    </gridview>
</updatepanel> 
```

js里面的代码是：

```
protected void kitapVarYorumEkle_Click(object sender, EventArgs e)
{
        kitapVarYorum temp = new kitapVarYorum();

        if (Session["id"] != null)
        {
            temp.uyeId = Convert.ToInt32(Session["id"]);
        }

        Button btn = (Button)sender;
        temp.kitapVarId = Convert.ToInt32(btn.CommandArgument);

        string text = "";

        GridViewRow row = GridView1.Rows[Convert.ToInt32(btn.CommandName)];

        if (row != null)
        {
            TextBox txt = row.FindControl("txtYorum") as TextBox;

            if (txt != null)
            {
                text = txt.Text;
            }
        }

        temp.icerik = text;
        var db = Tools.DBBaglanti();
        db.kitapVarYorums.InsertOnSubmit(temp);
        db.SubmitChanges();

        // Page.Response.Redirect(Page.Request.Url.ToString(), true);
    }
} 
```

我已经在控件之外尝试过它并且它有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:59:35.530

你试过这种`ItemCommand`方法吗？

```
<asp:Button  
     CommandArgument='<%#Eval("id") %>'
     CommandName="yourCommandNameOfChoice" 
     Text="Yorum ekle" 
     ID="kitapVarYorumEkle" 
     class="blueButton" runat="server"  
     OnClick="kitapVarYorumEkle_Click"  /> 
```

现在`ItemCommand`为您的中继器添加一个事件：

```
 protected void yourRepeater_ItemCommand(object source , RepeaterCommandEventArgs e)
 {
     switch(e.CommandName)
     {
           case "yourCommandNameOfChoice":
               // Your Code Here 
               break;
     }
 } 
```

# javascript - ThreeJS camera.lookAt() 没有效果，是不是我做错了什么？

> ID：10325095
> 
> 赞同：35
> 
> 时间：2012-04-25T23:12:32.050
> 
> 标签：javascript, macos, google-chrome, 3d, three.js

在 Three.js 中，我希望将相机指向 3D 空间中的某个点。

为此，我尝试使用如下`camera.lookAt`函数：

```
camera.lookAt(new THREE.Vector3(-100,-100,0)); 
```

但是，我发现调用没有任何效果。它什么都不做。我尝试更改向量中的数字，并且当它应该更改时，我总是在屏幕上看到相同的外观。

我现在才发现，如果我删除了`THREE.TrackballControls`我的代码中的内容，`camera.lookAt()`那么它应该可以正常工作。我使用 THREE.TrackballControls 的方式有问题吗？这就是我初始化它们的方式：

```
 controls = new THREE.TrackballControls( camera, renderer.domElement );

    controls.rotateSpeed = 10.0;
    controls.zoomSpeed = 1.2;
    controls.panSpeed = 0.2;

    controls.noZoom = false;
    controls.noPan = false;

    controls.staticMoving = true;
    controls.dynamicDampingFactor = 1.0;

    var radius = 5;
    controls.minDistance = radius * 1.1;
    controls.maxDistance = radius * 100;

    controls.keys = [ 65, 83, 68 ]; // [ rotateKey, zoomKey, panKey ]*/ 
```

然后在我的渲染函数中我做：

```
function render() {
  controls.update();
  renderer.render(scene, camera);
} 
```

关于 Three.js 的文档非常稀缺，所以我想我会在这里问。难道我做错了什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-26T16:33:05.323

查看 的源代码[`THREE.TrackballControls`](https://github.com/mrdoob/three.js/blob/master/src/extras/controls/TrackballControls.js)，我发现我可以通过设置`trackballControls.target`为`THREE.Vector3`我希望它看到的位置，然后重新渲染场景，让相机看到我想要的位置。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-20T23:54:02.933

是的，请注意......似乎拥有 THREE.TrackballControls 或 THREE.OrbitControls 似乎会覆盖 camera.lookAt 函数，因为您在实例化控件实例时正在传递您的相机。您可能希望摆脱控件，然后执行 camera.lookAt() 或以其他方式补间您的相机，以验证这些控件对您的相机具有压倒性的效果。我用谷歌搜索了一段时间，为什么 camera.lookat() 似乎没有效果。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-18T19:51:47.260

在我看来，我们不应该弄乱原始代码。我找到了一种方法来实现查看任何特定点的目标。在声明了“***控制***”变量之后，只需执行这两行代码：

```
// Assuming you know how to set the camera and myCanvas variables
control = new THREE.OrbitControls(camera, myCanvas);

// Later in your code
control.object.position.set(camX, camY, camZ);
control.target = new THREE.Vector3(targetX, targetY, targetZ); 
```

请记住，这会将焦点切换到您的新目标。换句话说，您的新目标将是相机所有旋转的中心。当您熟悉以默认中心操作相机时，某些部分将很难看清。尽量放大，你会明白我在说什么希望这有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-27T21:43:04.163

我想到了。为了防止`THREE.TrackballControls`或在初始化`THREE.OrbitControls`时覆盖`camera.lookAt`，您需要更改将控件`target`属性设置为等于*向量*`camera.position`和向量之和的行`camera.getWorldDirection()`，而不是当前使用 a 实现的方式`new THREE.Vector3()`（默认为`(0, 0, 0)`）。

因此，对于[`THREE.TrackballControls`](http://threejs.org/examples/js/controls/TrackballControls.js)，将第 39 行更改为：

```
this.target = new THREE.Vector3().addVectors(/*new line for readability*/
    object.position, object.getWorldDirection()); 
```

[`THREE.OrbitControls`](http://threejs.org/examples/js/controls/OrbitControls.js)第 36 行也一样。我实际上还没有测试过它，`TrackballControls.js`但它确实可以工作`OrbitControls.js`。希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-12T15:24:41.967

这是一个替代解决方案：创建一个具有 0 维的对象（即立方体）。

```
var cameraTarget = new THREE.Mesh( new THREE.CubeGeometry(0,0,0)); 
```

在渲染函数中，将 camera.lookAt 设置为 cameraTarget 的位置。

```
function render() {
    camera.lookAt( cameraTarget.position );
    renderer.render( scene, camera );
} 
```

然后随意移动cameraTarget。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-29T16:40:23.350

我遇到了同样的问题，并且能够通过使用 OrbitControls.target 使其工作。以下是我在声明控制器后所做的事情。

```
 controller = new THREE.OrbitControls(camera, renderer.domElement);
    controller.addEventListener('change', renderer.domElement);
    controller.target = new THREE.Vector3(0, 1, 0); 
```

# asp.net - ASP & IIS：你可以只为个别 URL 编译错误吗？

> ID：10325097
> 
> 赞同：0
> 
> 时间：2012-04-25T23:12:55.863
> 
> 标签：asp.net, .net, compilation, compiler-errors

假设我们有几个开发人员在 ASP 服务器上工作。偶尔页面会导致编译错误（但它是站点范围的）。如果我们中的一个人在去吃午饭之前点击了保存，而其他人无法在他们自己的 aspx 页面上工作，这尤其令人讨厌。

任何设置只允许特定于页面的编译，还是 w3c 服务的性质使得所有程序集都必须编译（应用程序范围）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:22:44.813

您已启用预编译。如果你把它关掉，页面只会在第一次请求时被解析和编译，我想这就是你想要的！

预编译由 AspNetCompiler 完成。如果这不是由自定义构建过程触发的，则可能在 .csproj 文件中。它的外观可能因项目类型而异。

以下是它在 MVC 3.0 Web 角色中的外观：

```
<!-- no precompilation here! -->
<MvcBuildViews>false</MvcBuildViews>

<!-- here's the setup for AspNetCompiler...-->
<Target Name="MvcBuildViews" AfterTargets="AfterBuild"
Condition="'$(MvcBuildViews)'=='true'">
<AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" /> 
</Target> 
```

有关 AspNetCompiler 的更多信息：http: [//msdn.microsoft.com/en-us/library/ms164291.aspx](http://msdn.microsoft.com/en-us/library/ms164291.aspx)

通常情况下，预编译默认是关闭的。如果您确实想要全面检查所有视图的代码，此设置也很有用。

# json - 通过创建不可评估（“不可解析的杂乱无章”）JSON来提高安全性？

> ID：10325100
> 
> 赞同：3
> 
> 时间：2012-04-25T23:13:21.797
> 
> 标签：json, security, parsing, taint

我们正在考虑对我们的 json 使用不可解析的 curft 方法作为额外的安全级别。

在查看这些方法时，我遇到了 google`while(1);`和 facebook 的`for(;;)`；然后再提到`{}&&`

我已经看到围绕 1 的评论`while(1);`说数字 1 可能会被破坏，所以我的方法将是`for(;;);`.

然后我遇到了`{}&&`，它使 json 无效，但它仍然可以被解析/评估。请参阅本文以供参考：[http ://www.sitepen.com/blog/2008/09/25/security-in-ajax/](http://www.sitepen.com/blog/2008/09/25/security-in-ajax/)

你的方法是什么？以及使用不可解析的曲线进行 ajax 调用的函数是什么样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:19:23.693

我总是使用根对象。如前所述：

> 只能使用一个数组的根来劫持 JSON 数据。当根是基元时，基元值不会触发构造函数。当根是对象时，它不是有效的 JavaScript 语法，因此无法解析。

请注意，具有根原语（例如，您的响应只是`5`）不是有效的 JSON。[RFC](http://www.ietf.org/rfc/rfc4627.txt)的第 2 节说：

> JSON 文本是一个序列化的对象或数组。
> 
> ```
>  JSON-text = object / array 
> ```

这不是太大的负担，因为我（和许多网站）通常使用信封格式。例如：

```
{
  "header": {...},
  "data": {...}
} 
```

或者：

```
{
  "status": {...},
  "data": {...}
} 
```

等等

在这种情况下，任何数组都只是数据的值，因此您可以提供语法上有效的 JSON，而没有任何劫持风险。

# jquery - 使用 jQuery 在父容器中查找元素

> ID：10325101
> 
> 赞同：15
> 
> 时间：2012-04-25T23:13:22.690
> 
> 标签：jquery

我试图在我的 LI 中定位一个元素，但我遇到了麻烦，我已经阅读了 jQuery 文档，但无法弄清楚我做错了什么？

在单击事件中，我想找到一个元素并更改其中的 html...

[http://jsfiddle.net/68ePW/3/](http://jsfiddle.net/68ePW/3/)

```
<li>
    <h2>400</h2>
    <form>
        <input type='submit' class='click' value='send'>                
    </form>
</li>

$('.click').click(function(){
    $(this).parent('li').closest('h4').html('asdasd');
}); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-25T23:23:46.607

基于以下 HTML（请记住，我必须用 包装`li`，`ul`因为未包装`li`的 HTML 是无效的）：

```
<ul>
    <li>
        <h2>400</h2>
        <form>
            <input type='submit' class='click' value='send'>                
        </form>
    </li>    
</ul>​​​​​​​​​​​​​​​​​​ 
```

以及以下 jQuery：

```
$('.click').click(function(){
    $(this).parent('li').closest('h4').html('asdasd');
}); 
```

看来您正试图`h4`在`li`. 您遇到的问题是多方面的：

1.  using`parent()`只查找当前元素的直接父元素；改为使用`closest()`，通过祖先查找，*直到*找到匹配的元素，
2.  `closest()`（如前所述）在您尝试在元素的后代中查找元素时查找祖先*元素*`li`。使用`find()`,
3.  您正在搜索一个`h4`不存在的元素。您需要（我假设）找到`h2`DOM 中存在的内容。

所以：

```
$('.click').click(function(){
    $(this).closest('li').find('h2').html('asdasd');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/68ePW/6/)。

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`find()`](http://api.jquery.com/find/).
*   [`parent()`](http://api.jquery.com/parent/).

# c# - 不要从序列化的 DateTime 对象中序列化或删除 TimeZone

> ID：10325108
> 
> 赞同：4
> 
> 时间：2012-04-25T23:14:28.543
> 
> 标签：c#, datetime, xml-serialization

给我的奇怪任务是使用 XML 序列化序列化 LARGE 对象。此对象包含多个嵌套的 UserDefined 类，以及多个 DateTime 字段。DateTime 数据的要求是它必须始终显示在最初创建和设置数据的用户的时区中。因此，我不能使用 UTC 或本地时间，因为在反序列化时，它们不会与原来相同。我也无法以 UTC 显示值，它们必须以当地时间显示。我需要的是一些奇怪的序列化格式，它代表“绝对本地时间”的概念......那就是“没有时区的本地时间”。

我可以使用正则表达式从日期字符串中删除 TZ，这很容易。但是我正在处理的对象的绝对大小意味着我经常会遇到 OutOfMemoryException。我看到它在没有调试的情况下运行一次，并且在操作过程中我使用的内存从 100k 飙升到 800k。不太好。那是较小的文件之一。

```
Doc.DocumentElement.InnerXML = Regex.Replace(Doc.DocumentElement.InnerXML, "(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2})(\\+|-)(\\d{2}:\\d{2})", "$1") 
```

到目前为止，我看到的唯一选择是创建所有 dateTime 字段的副本，将 DT 字段本身设置为“XmlIgnore()”，然后在重新加载文档后手动从序列化字符串数据中恢复所有日期. 这也不实用。请参阅[自定义 DateTime XML 序列化](https://stackoverflow.com/questions/306579/custom-datetime-xml-serialization)

有没有办法强制序列化引擎在没有 TimeZone 数据的情况下序列化 DateTime 对象？最好是不需要单独应用于对象中每个 DT 属性的通用内容？

！！编辑！！

我可能已经找到了部分解决方案。它至少可能有助于向前发展。DateTimeKind.Unspecified 在序列化时似乎没有附加任何 TimeZone 数据。这是我正在寻找的解决方案。使用 DateTime.SpecifyKind 强制转换我的所有 DateTime 数据？

```
public DateTime? StartDate
    {
        get 
        { return _StartDate; }
        set
        {
            if (_StartDate == value)
                return;

            if (value != null)
                _StartDate = DateTime.SpecifyKind(value.Value, DateTimeKind.Unspecified);
            else
                _StartDate = value;

            OnPropertyChanged("StartDate");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T23:38:39.700

我认为您需要重新评估您的要求或假设。

你写了：

> DateTime 数据的要求是它必须始终显示在最初创建和设置数据的用户的时区中。因此，我不能使用 UTC 或本地时间，因为当反序列化时，它们不会与它们相同。

我不认为你的分析是正确的。在我看来，您不必要地将序列化与存储与向用户“显示”混合在一起。但这两件事不应该相关。据我了解，要求是：

*   您想要序列化和反序列化许多不同的时间值。
*   在“显示”这些时间时，您希望显示使用原始时区。

这些是不同的要求。

序列化 DateTime 将及时存储一个时刻，但您会丢失 TimeZone 信息。在我看来，您需要单独序列化时区信息，每个 XML 文档一次。如果你这样做了，那么时间的反序列化就会自动工作——你总是能从你最初放入存储中的存储中*获得**准确*的时间。

 **显示*时间时，请使用单独存储在 XML 文档中的时区信息。如果原始对象中不存在包含 TimeZone 的属性，那么在我看来，您的对象模型不太适合应用程序的要求，在这种情况下，您需要修改对象定义以包含一个标识时区。（参见[http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)）

至于内存不足错误，这可能是一个无关的问题。这也可能是因为您使用大型 XmlDocument 对象。使用 Xml 序列化时，这应该是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:49:34.210

我建议创建自定义类型来保存这样的日期。它可以让你以任何你想要的方式处理序列化。作为更简单的方法，可以考虑将它们保存为 ISO8601 格式 (2012-05-04-26T12:57) 的字符串，而没有专门针对这种情况指定的时区。

批发从序列化数据中删除时区可能不是一个好主意，因为一旦您真正需要节省绝对时间，它就会引起有趣的问题。特别是如果代码是共享的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:45:16.653

找到了答案。这不完全是我想要的，但可以作为一种有效的解决方法。

```
private static readonly Regex DTCheck = new Regex(@"(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2})([\+|-]\d{2}:\d{2})");

    /// <summary>
    /// Removes any instances of the TimeZoneOffset from the RigX after it has been serialized into an XMLString ++ Called from the "Save" process
    /// </summary>
    /// <param name="rigx"></param>
    /// <returns>StringReader referencing the re-formatted XML String</returns>
    private static StringReader RemoveTZOffsetFromRigX(RigX rigx)
    {
        StringBuilder sb = new StringBuilder();
        StringWriter sw = new StringWriter(sb);
        XmlSerializer ser = new XmlSerializer(typeof(RigX));

        ser.Serialize(sw, rigx);

        string xmlText = sb.ToString();

        if (DTCheck.IsMatch(xmlText))
            xmlText = DTCheck.Replace(xmlText, "$1");

        StringReader Sreader = new StringReader(xmlText);

        return Sreader;
    }

    /// <summary>
    /// Removes the TimeZone offset from a RigX as referenced by stream.  Returns a reader linked to the new stream  ++ Called from the "Load" process
    /// </summary>
    /// <param name="stream">stream containing the initial RigX XML String</param>
    /// <returns>StringReader referencing the re-formatted XML String</returns>
    private StringReader RemoveTZOffsetFromXML(MemoryStream stream)
    {
        stream.Position = 0;
        StreamReader reader = new StreamReader(stream, Encoding.UTF8);

        string xmlText = reader.ReadToEnd();
        reader.Close();
        stream.Close();

        if (DTCheck.IsMatch(xmlText))
            xmlText = DTCheck.Replace(xmlText, "$1");

        StringReader Sreader = new StringReader(xmlText);

        return Sreader;
    } 
```

在从文件中读取 XML 之后，在通过序列化程序运行它之前，在裸 XML 文本上运行正则表达式以删除偏移量。该函数返回一个针对修改后的 XML 字符串运行的字符串读取器，然后可以通过反序列化将其运行到对象中。

与其使用序列化器将 xml 直接保存到输出流中，不如使用 stringBuilder 来截取序列化的 xml。然后使用与加载过程相同的过程，通过正则表达式删除 TimeZone 偏移量，然后返回链接到修改后的文本的 StringReader，然后用于将数据写回文件中。

有点骇人听闻的感觉，但很有效。虽然非常占用内存，但如果可以，请避免直接调试函数，或者如果必须，尽量不要评估字符串，上次我尝试它完全崩溃了我的 VS 实例。*

# java - (Java / Android) 计算两个日期之间的天数并以特定格式呈现结果

> ID：10325117
> 
> 赞同：10
> 
> 时间：2012-04-25T23:15:22.960
> 
> 标签：java, android, android-widget

我正在尝试计算两个日期之间的天数，如下所示：

1.  获取当前日期
2.  获取过去或未来的日期
3.  计算没有之间的差异。1和没有。2
4.  以下列格式显示日期
    *   如果结果是过去（2 天前）或将来（2 天后）
    *   格式将：天、周、月、年

我尝试了不同的方法，但无法得到我想要的结果。我发现**Android *DatePicker*对话框将日期转换为整数。**我还没有找到使 DatePicket 小部件返回日期变量而不是整数的方法。

```
private DatePickerDialog.OnDateSetListener mDateSetListener =
        new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, **int** year, 
                                  **int** monthOfYear, **int** dayOfMonth) {
                enteredYear = year;
                enteredMonth = monthOfYear;
                enteredDay = dayOfMonth;
            }
        }; 
```

根据上述内容，我尝试将系统日期转换为整数，但这在尝试计算两个日期之间的天数时实际上不起作用。

```
private void getSystemDate(){
     final Calendar c = Calendar.getInstance();

        mYear = c.get(Calendar.YEAR);
        systemYear = mYear;

        mMonth = c.get(Calendar.MONTH);
        systemMonth = mMonth + 1;

        mDay = c.get(Calendar.DAY_OF_MONTH);
        systemDay = mDay;

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T04:58:08.890

```
/** 
  *  Returns a string that describes the number of days
  *  between dateOne and dateTwo.  
  *
  */ 

public String getDateDiffString(Date dateOne, Date dateTwo)
{
    long timeOne = dateOne.getTime();
    long timeTwo = dateTwo.getTime();
    long oneDay = 1000 * 60 * 60 * 24;
    long delta = (timeTwo - timeOne) / oneDay;

    if (delta > 0) {
        return "dateTwo is " + delta + " days after dateOne";
    }
    else {
        delta *= -1;
        return "dateTwo is " + delta + " days before dateOne";
    }
} 
```

编辑：刚刚在另一个线程中看到了同样的问题： [如何使用 java 计算两个日期之间的差异](https://stackoverflow.com/questions/3491679/how-to-calculate-difference-between-two-dates-using-java)

Edit2：要获得年/月/周，请执行以下操作：

```
int year = delta / 365;
int rest = delta % 365;
int month = rest / 30;
rest = rest % 30;
int weeks = rest / 7;
int days = rest % 7; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:30:24.833

```
long delta = Date2.getTime() - Date1.getTime();

new Date(delta); 
```

从这里，您只需选择您的格式。也许使用日期格式化程序？至于确定未来的东西等等，你可以看看增量是正的还是负的。负增量表示过去的事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-17T20:21:25.467

好吧，java/android API 为您提供了所有答案：

```
 Calendar myBirthday=Calendar.getInstance();
    myBirthday.set(1980, Calendar.MARCH, 22);
    Calendar now = Calendar.getInstance();
    long diffMillis= Math.abs(now.getTimeInMillis()-myBirthday.getTimeInMillis());
    long differenceInDays = TimeUnit.DAYS.convert(diffMillis, TimeUnit.MILLISECONDS); 
```

# javascript - 添加文本值以动态创建文本输入

> ID：10325120
> 
> 赞同：0
> 
> 时间：2012-04-25T23:15:35.393
> 
> 标签：javascript, jquery, html-table

这就是一切，我试图提出一个建议，它可以改变行的颜色，但它只改变一次，之后的每一行都保持为 .odd 背景颜色。

基本上我正在尝试动态添加行，它可以工作，屏蔽输入文本字段，它可以工作，从 中获取值并在单击按钮时`endtime_1`将其放入`starttime_2(dynamic add)`下一个添加行的。然后在单击按钮时`addrow()`取值`endtime_2(dynamic add)`并将其放入，依此类推，依此类推……这是行不通的。我还想用背景样式为每个奇数行着色。`starttime_3(dynamic add)``addrow()`

```
<script type="text/javascript">
function maskInput(){
    $.mask.definitions['~'] = "[+-]";
    $(".time").mask("99:99 aa");

    $("input").blur(function() {
        $("#info").html("Unmasked value: " + $(this).mask());
    }).dblclick(function() {
        $(this).unmask();
    });
}
var clone;
function cloneRow(){
    var rows=document.getElementById('TimeCard').getElementsByTagName('tr');
    var index=rows.length-1;
    clone=rows[index-0].cloneNode(true);
    if (index % 2 !=0) { $(clone).addClass("odd"); }
    var inputs=clone.getElementsByTagName('input'), inp, i=0,n ;
    while(inp=inputs[i++]){
        inp.name=inp.name.replace(/\d/g,'')+(index+1);
        $('#starttime_'+index).attr('value',$('#endtime_'+index-1).attr('value'));
    }
    var select=clone.getElementsByTagName('select'), sel, i=0,n ;
    while(sel=select[i++]){
        sel.name=sel.name.replace(/\d/g,'')+(index+1);
    }
    maskInput();
    }
    function addRow(){
        var tbo=document.getElementById('TimeCard').getElementsByTagName('tbody')[0];
        tbo.appendChild(clone);
        cloneRow();
    }
    function checkDOM(){
        var rows=document.getElementById('TimeCard').getElementsByTagName('tr');
        for(var i=0;i<rows.length;i++){
        alert(rows[i].getElementsByTagName('input')[0].name);
    }
}
onload=cloneRow;
</script>

<style type="text/css">
.odd { background-color:#CCC; }
</style>

<table border='0' id='TimeCard' width='950'>
<tr class="odd">
    <td align="left" width="100"><b><i><u>Select Type</u></i></b></td>
        <td align="left" width="20">&nbsp;</td>
        <td align="left" width="100"><b><i><u>Select Property</u></i></b></td>
        <td align="left">&nbsp;</td>
        <td align="left" width="100"><b><i><u>Start Time</u></i></b></td>
        <td align="left" width="100"><b><i><u>End Time</u></i></b></td>
        <td align="left" width="20">&nbsp;</td>
</tr>
<tr class="even">
    <td align="left" width="100">
        <select name="type_1" id="type_1" class="validate[required]">
            <option selected value=''> -- Please Select -- </option>
            <option value="office">Office</option>
            <option value="work">Working</option>
            <option value="drive">Driving</option>
            <option value="break">Break</option>
            <option value="lunch">Lunch</option>
            <option value="personal">Personal</option>
    </select>
        </td>
        <td align="left" width="20">&nbsp;</td>
        <td align="left" width="100">
        <select name="propid_1" id="propid_1" class="validate[required]">
            <option selected value=''> -- Please Select -- </option>
        </select>
        </td>
        <td align="left">&nbsp;</td>
        <td align="left" width="100"><input type="text" class="time" id="starttime_1" name="starttime_1" size="10" /></td>
    <td align="left" width="100"><input type="text" class="time" id="endtime_1" name="endtime_1" size="10" /></td>
        <td align="center" width="20"><input type="button" value=' + ' onclick='addRow();' /></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:05:51.857

用纯 CSS 为表格行着色：

```
tr:nth-child(odd) {background-color:#CCC;} 
```

否则，请提出有针对性的问题。

# asp.net-mvc-3 - 使用多个实体保存视图的 MVC3 最佳实践

> ID：10325123
> 
> 赞同：1
> 
> 时间：2012-04-25T23:16:00.433
> 
> 标签：asp.net-mvc-3, entity-framework, repository-pattern, view-model-pattern

给定一个使用 ViewModel 模式和带有实体框架的 Repository 模式的 MVC3 应用程序。

如果我有一个由多个实体组成的创建和更新视图，那么保存数据的最佳做法是什么？

我应该使用抽象服务层保存日期，该服务层将使用其各自的存储库保存每个实体的数据，还是应该使用存储过程将数据保存在存储库中？

我愿意接受任何建议或建议。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:53:53.617

这是 DDD/CQRS 方法最有意义的情况之一。简而言之，您有一些对特定行为（聚合）进行建模的业务对象。chrage 中有一个对象称为聚合根 (AR)，它具有明确的边界。当你想保存它时，你将整个 AR 发送到存储库，然后将所有内容保存为事务。

**工作流程**

用户通过视图模型发送数据。然后控制器将从存储库中检索 AR，如果它是新的，则创建。输入数据通常通过 AR 方法映射到 AR。如果 AR 发现数据或其结果违反了某些业务规则，那么它应该抛出异常（我们假设基本验证已经由 asp.net mvc 自动执行）。

如果一切正常，控制器会将 AR 发送到 repo，然后它将继续将 AR 映射到 EF 实体，然后保存它，所有这些都在一个事务中。

简而言之，这就是我的做法。当然，我实际上会实现它有点不同，但概念是相同的。重要的部分是将所有数据发送到知道如何处理关系的 AR。

**要点**

请注意，我仅在 AR 进入 repo 之后才提到 EF。这意味着，AR 与 EF 实体无关，完全分离并服务于实际的业务模型。只有在模型更新后，我们才关心 EF，并且只在 repo 内（因为 EF 是 repo 的实现细节）。存储库仅将 AR 数据传输（基本上映射）到相关的 EF 实体，然后保存实体。

在业务（域）模型和持久性模型（EF 实体）之间有一个非常清晰的区别很重要。不要使用 EF 处理业务规则，仅使用它来查看/检索数据库中的数据。EF 仅用于抽象 RDBMS 访问，将其用作虚拟 OOP 数据库。

您提到了 ViewModel 模式。我还没有听说过这样的模式，每次您使用 MVC 时，您已经在使用 ViewModels。再一次，诀窍是不要将 EF 实体用作 ViewModel。使用适合视图的“哑”视图模型。通过专门的查询存储库填充 VM，该存储库将直接返回 VM 部件。存储库将查询 EF 实体，然后返回那些简单 DTO 的 VM 位。那是因为在显示数据时不需要验证和业务规则。

我认为保持层，尤其是每一层的模型分开是一个很好的做法。对于更新的东西，使用复杂的业务对象（域模型）来完成艰苦的工作，然后只将它们的状态转移到 EF（通过存储库）。要阅读内容，请查询 EF 并返回适合 VM 的简单 DTO。

这就是 CQRS 的真正意义：不要试图在单个模型中适应不同的职责（写入和读取）。

# php - 使用 PHP 对 Nestoria 结果进行分页

> ID：10325128
> 
> 赞同：0
> 
> 时间：2012-04-25T23:16:42.880
> 
> 标签：php, pagination

我正在使用 Nestoria API 来检索属性结果。一切运行良好，使用此方法最多可以返回 50 个属性。我想一次显示 10 个项目并允许用户对它们进行分页，但由于某种原因，我很难做到这一点。

控制此部分的代码片段如下：

```
$page = isset($_REQUEST["page"]) ? (int)$_REQUEST["page"] : 1;
$page = $page-1;

$pagination = new pagination;
$propertyResults = $pagination->generate($nestoria->decodedData->response->listings, 10);

foreach($propertyResults as $listing) {
    //do stuff
} 
```

数据数组的片段将是：

```
Array
(
    [0] => stdClass Object
        (
            [auction_date] => 
            [property_type] => house
            [summary] => Located in North Kingston a two double bedroom Victorian house presented in...
            [title] => York Road, Kingston, KT2 - Reception
            [updated_in_days] => 6.5
            [updated_in_days_formatted] => this week
        )

    [1] => stdClass Object
        (
            [auction_date] => 
            [property_type] => house
            [summary] => Fine home was built about 50 years ago and enjoys one of the best locations...
            [title] => Coombe Hill, KT2 - Conservatory
            [updated_in_days] => 2.5
            [updated_in_days_formatted] => this week
        )
    .... 
```

（由于数组元素的大小而减少了样本）

现在我已经盯着这个太久了，我已经画了一个空白。

这段代码可以正常工作，除非我尝试转到 1 以外的任何其他页面，然后页面没有完成加载，它只会继续，直到 Firefox 说：“页面没有正确重定向”。

所以基本上，分页能够正确切割我的数据数组，但无法正确“分页”。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:34:58.670

原来重定向的问题实际上是一个 .htaccess 问题，它使用了 $_GET["page"] 变量，因此感到困惑，所以我将所有对 $_GET["page"] 的引用重命名为 $_GET[" _page"] 在这个应用程序中。

# python - 在 Django 中向不是 Django User 实例的对象添加权限

> ID：10325131
> 
> 赞同：0
> 
> 时间：2012-04-25T23:17:06.390
> 
> 标签：python, django, django-models

我添加了一个包含以下权限的 Meta 类，但我不知道它是仅通过将它们放在 Meta 类中添加，还是我需要添加一些东西或以某种方式分配它们。这是我的代码：

```
class Contractor(models.Model): 
    contractor_verified = models.BooleanField(default=False)    
    Employer = models.OneToOneField(Employer)
    job_title = models.CharField(max_length=50)
    name = models.CharField(max_length=250)

    class Meta:
        permissions = (
        ("permission", "perm"),
        ("bid", "bid"),
        ("send_request_to_verifier", "send_request_to_verifier"),
        ("gain_points", "gain_points"),
        ("loose_points", "loose_points"),
        ) 
```

如果有任何不清楚的地方，我很抱歉。我只需要有关如何向不是 Django User 实例的对象添加自定义权限的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:58:01.590

django 权限系统开箱即用，仅支持用户和组模型权限。来自关于对象权限的 django 文档：[https ://docs.djangoproject.com/en/1.3/topics/auth/#handling-object-permissions](https://docs.djangoproject.com/en/1.3/topics/auth/#handling-object-permissions)

> Django 的权限框架为对象权限奠定了基础，尽管核心中没有实现它。这意味着检查对象权限将始终返回 False 或空列表（取决于执行的检查）。

如果您正在寻找通用的对象级权限，这里有大量可用的包：http: [//pypi.python.org/pypi ?%3Aaction=search&term=django+permissions&submit=search](http://pypi.python.org/pypi?%3Aaction=search&term=django+permissions&submit=search)

其中一些只是实现模型级别的权限，还有一些让您定义每个实例的权限。

# javascript - 为什么 $(document).blur() 和 $(document).focus() 不适用于 Safari 或 Chrome？

> ID：10325132
> 
> 赞同：4
> 
> 时间：2012-04-25T23:17:12.710
> 
> 标签：javascript, jquery, html

我正在制作一个计数器，当文档处于焦点时会倒计时。当它处于模糊状态时，它会停止倒计时。

它在 FF 中工作，但在 Safari 和 Chrome 中，计数器根本不起作用。

Safari/Chrome 是否存在兼容性问题？

我使用的是`$(document).blur()`and `$(document).focus()`，并且两者都在一个`$(document).ready()`块内。

```
var tm;
$(document).ready(function(){   

        var seconds = 50;
        $('#timer').html(seconds);
        countdown();

    $(window).focus(function(){
         function countdown(){ 
         if (seconds > 0) {
            seconds--; 
            $('#timer').text(seconds);
            tm = setTimeout(countdown,1000);
            }
        if (seconds<=0){ 
            $('#timer').text('Go');
            }   
        }); 

    $(window).blur(function(){
        clearTimeout(tm);
        seconds++;
        $('#timer').text(seconds);

    });
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T23:21:39.087

我一直用`$(window).focus()`和`$(window).blur()`。试试这些。

另外，请注意，在 FF 和 IE 中，“焦点”事件会在 ~document 加载时触发，而在 Chrome 和 Safari 中，它仅在窗口之前失去焦点并且现在重新获得焦点时才会触发。

**UPD：**现在，当您粘贴代码时，我对其进行了重新设计以（希望）符合您的目的：

```
var tm;
var seconds = 50;
var inFocus = true;

function countdown() {
    if (seconds > 0) {
        seconds--;
    }

    if (seconds <= 0) {
        $('#timer').text('Go');
    }
    else {
        $('#timer').text(seconds);
        tm = setTimeout(countdown, 1000);
    }
}

$(function() {
    $('#timer').html(seconds);
    countdown();

    $(window).focus(function() {
         if(!inFocus) {
             countdown();
         }
    });

    $(window).blur(function() {
        inFocus = false;
        clearTimeout(tm);
        seconds++;
        $('#timer').text(seconds);
    });
}); 
```

# actionscript-3 - 什么是 indexBuffer，什么可能导致我用完它们？

> ID：10325133
> 
> 赞同：0
> 
> 时间：2012-04-25T23:17:17.593
> 
> 标签：actionscript-3, stage3d, flare3d

我正在使用 Flare3D 制作一个 Flash 游戏，当我加载一个新场景时，它给了我这个错误：

```
Error: Error #3691: Resource limit for this resource type exceeded.
    at flash.display3D::Context3D/createIndexBuffer()
    at flare.core::Surface3D/upload()[Z:\projects\flare3d 2\src\flare\core\Surface3D.as:237]
    at flare.core::Mesh3D/upload()[Z:\projects\flare3d 2\src\flare\core\Mesh3D.as:130]
    at flare.core::Mesh3D/draw()[Z:\projects\flare3d 2\src\flare\core\Mesh3D.as:335]
    at flare.basic::Scene3D/render()[Z:\projects\flare3d 2\src\flare\basic\Scene3D.as:593]
    at flare.basic::Scene3D/enterFrameEvent()[Z:\projects\flare3d 2\src\flare\basic\Scene3D.as:461] 
```

我从错误中猜测它正在运行某些东西，但我不知道 Context3D.createIndexBuffer() 做了什么。由于flare3D 不是开源的，我无法在那里挖掘任何线索。

所以我想知道：什么是 Context3D IndexBuffer，什么可能让我用完该资源类型？

请不要只链接到这些课程的 ASDocs，我已经看过了，但他们没有回答这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:27:30.117

我可能是错的，但我猜他们谈论的是在 OpenGL 和 DirectX 中使用的相同索引缓冲区。它们是整数数组，是顶点数组的索引，因此在绘制多个共享顶点的多边形时，您不必每次都指定整个顶点。

这是一个比较好的解释： http: [//openglbook.com/the-book/chapter-3-index-buffer-objects-and-primitive-types/#toc-enter-index-buffers](http://openglbook.com/the-book/chapter-3-index-buffer-objects-and-primitive-types/#toc-enter-index-buffers)

我对 Flare3D 一无所知，但是您的场景是否有可能有太多复杂的网格并且索引缓冲区的内存不足？

# active-directory - 如何在 AD 中获取安全组的属性？

> ID：10325135
> 
> 赞同：0
> 
> 时间：2012-04-25T23:17:27.553
> 
> 标签：active-directory

我需要在 AD 中获取安全组的域名、范围（通用/本地）。

你能提供一些关于它的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:23:33.090

[如Microsoft 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675935%28v=vs.85%29.aspx)`groupType`中所述，该信息按属性给出。

# jquery - 通知实现，从当前范围之外引用 $(this)

> ID：10325136
> 
> 赞同：1
> 
> 时间：2012-04-25T23:17:38.513
> 
> 标签：jquery, scope, this

总的来说，我是 jQuery 和 web 开发的超级菜鸟，需要一些帮助来实现 apprise 警报系统。我意识到“验证”函数中的函数无法识别“this”选择器，我应该实现 $.proxy 以从当前范围之外获取“this”选择器。但无论我尝试什么，我都无法让它发挥作用

```
$('.closebtn').click(function(){

            apprise('<center>Are you sure you want to delete this section?<br>This action can not be undone!</center>',{'verify':true}, function(r){
                if(r){
                     $(this).remove();
                }
            })
 }) 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:20:03.337

很简单，存储`this`。

```
$('.closebtn').click(function(){
  var $button = $(this);

  apprise(...., function(r){
    if (r){
      // re-reference it
      $button.remove();
    }
  });
}); 
```

您可能会看到 javascript 中的“类”也执行与此类似的操作（通常命名为`self`）。例如

```
var myObject = function(){
  var self = this;

  var MyMethod = function(){
    // can use "self" in here to reference the object
  };
}; 
```

# android - OpenGL未将坐标正确映射到android屏幕

> ID：10325138
> 
> 赞同：0
> 
> 时间：2012-04-25T23:17:50.613
> 
> 标签：android, coordinates, opengl-es-2.0

我在将 OpenGL 坐标正确映射到我的 android 屏幕时遇到问题。由于某种原因，x 坐标不包含在屏幕中。当我尝试在屏幕中间绘制一个半径为 x 屏幕一半的圆时，这是可见的。圆圈应该足够大以适合屏幕的 x 边框，但它却超出了屏幕边框，实际上是在触摸屏幕的 y 边框。另外，如果我告诉圆在 0,0（左上角）处绘制，则在将其转换为 OpenGL 坐标后，中心实际上将绘制在 x 边界之外。

希望这是有道理的。

这是我的 DrawScreen 类：

```
public class DrawScreen implements GLSurfaceView.Renderer {

Ball ball;

public float mAngle;

private int mProgram;
private int maPositionHandle;

private int muMVPMatrixHandle;
private float[] mMVPMatrix = new float[16];
private float[] mVMatrix = new float[16];
private float[] mProjMatrix = new float[16];

private final String vertexShaderCode = 
        // This matrix member variable provides a hook to manipulate
        // the coordinates of the objects that use this vertex shader
        "uniform mat4 uMVPMatrix;   \n" +

        "attribute vec4 vPosition;  \n" +
        "void main(){               \n" +

        // the matrix must be included as a modifier of gl_Position
        " gl_Position = uMVPMatrix * vPosition; \n" +

        "}  \n";

private final String fragmentShaderCode = 
        "precision mediump float;  \n" +
                "void main(){              \n" +
                " gl_FragColor = vec4 (0.63671875, 0.76953125, 0.22265625, 1.0); \n" +
                "}                         \n";

public void onSurfaceCreated(GL10 unused, EGLConfig config) {

    ball = new Ball();

    // Set the background frame color
    GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);

    ball.initShapes(240, 360, 240);

    int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

    mProgram = GLES20.glCreateProgram();             // create empty OpenGL Program
    GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
    GLES20.glLinkProgram(mProgram);                  // creates OpenGL program executables

    // get handle to the vertex shader's vPosition member
    maPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

}

public void onDrawFrame(GL10 unused) {

    // Redraw background color
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);

    // Add program to OpenGL environment
    GLES20.glUseProgram(mProgram);

    // Prepare the circle data
    GLES20.glVertexAttribPointer(maPositionHandle, 3, GLES20.GL_FLOAT, false, 12, ball.ballVB);
    GLES20.glEnableVertexAttribArray(maPositionHandle);

    // Apply a ModelView Projection transformation
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);
    GLES20.glUniformMatrix4fv(muMVPMatrixHandle, 1, false, mMVPMatrix, 0);

    // Draw the circle
    GLES20.glDrawArrays(GLES20.GL_LINE_LOOP, 0, (int) ball.getNumSeg());

}

public void onSurfaceChanged(GL10 unused, int width, int height) {
    // Set the OpenGL viewport to the same size as the surface.
    GLES20.glViewport(0, 0, width, height);

    // Create a new perspective projection matrix. The height will stay the same
    // while the width will vary as per aspect ratio.
    final float ratio = (float) width / height;
    final float left = ratio;
    final float right = -ratio;
    final float bottom = 1.0f;
    final float top = -1.0f;
    final float near = 3.0f;
    final float far = 7.0f;

    //Matrix.frustumM(mProjMatrix, 0, left, right, bottom, top, near, far);

    Matrix.orthoM(mProjMatrix, 0, left, right, bottom, top, near, far);     

     muMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");

     Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

}

private int loadShader(int type, String shaderCode){

    // create a vertex shader type (GLES20.GL_VERTEX_SHADER)
    // or a fragment shader type (GLES20.GL_FRAGMENT_SHADER)
    int shader = GLES20.glCreateShader(type); 

    // add the source code to the shader and compile it
    GLES20.glShaderSource(shader, shaderCode);
    GLES20.glCompileShader(shader);

    return shader;

} 
```

这里是我将屏幕坐标转换为 OpenGL 坐标的地方：

```
 float numSegments = 360;

public void initShapes(float tx, float ty, float tr){

    cx = (tx / (480 / 2 )) - 1.f;
    cy = (ty /  (720 / 2 )) - 1.f;

    r = (tr / (480 / 2 )) ;

    System.out.println(r);
    System.out.println(cx);
    System.out.println(cy);

    float ballCoords[] = new float[(int) (numSegments * 3)];

    double theta = (2 * 3.1415926 / numSegments); 
    float c = (float) Math.cos(theta);//precalculate the sine and cosine
    float s = (float) Math.sin(theta);
    float t;

    float x = r;//we start at angle = 0 
    float y = 0; 

    for(int i = 0; i < (numSegments * 3); i = i + 3 ) {

        ballCoords[i] = (x + cx);
        ballCoords[i + 1] = (y + cy);
        ballCoords[i + 2] = (0);

        //apply the rotation matrix
        t = x;
        x = c * x - s * y;
        y = s * t + c * y;

    }

    // initialize vertex Buffer for triangle  
    ByteBuffer vbb = ByteBuffer.allocateDirect(
            // (# of coordinate values * 4 bytes per float)
            ballCoords.length * 4); 
    vbb.order(ByteOrder.nativeOrder());// use the device hardware's native byte order
    ballVB = vbb.asFloatBuffer();  // create a floating point buffer from the ByteBuffer
    ballVB.put(ballCoords);    // add the coordinates to the FloatBuffer
    ballVB.position(0);            // set the buffer to read the first coordinate

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:32:22.980

好的，所以我解决了它......虽然它看起来并不漂亮。

我基本上把 onSurfaceChanged 中的所有数字都翻到了他们的头上，它看起来就像我现在想要的那样。

这是我的新代码：

```
public void onSurfaceChanged(GL10 unused, int width, int height) {
    // Set the OpenGL viewport to the same size as the surface.
    GLES20.glViewport(0, 0, width, height);

    // Create a new perspective projection matrix. The height will stay the same
    // while the width will vary as per aspect ratio.
    final float ratio = (float) height / width;
    final float left = 1;
    final float right = -1;
    final float bottom = ratio;
    final float top = -ratio;
    final float near = 3.0f;
    final float far = 7.0f;

    //Matrix.frustumM(mProjMatrix, 0, left, right, bottom, top, near, far);

    Matrix.orthoM(mProjMatrix, 0, left, right, bottom, top, near, far);     

     muMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");

     Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

} 
```

# javascript - Coffeescript 没有正确转换

> ID：10325141
> 
> 赞同：1
> 
> 时间：2012-04-25T23:18:12.983
> 
> 标签：javascript, google-maps-api-3, coffeescript

我正在用 ruby​​ on rails 制作一个应用程序，这是我的咖啡脚本文件之一，
我相信我的代码已正确缩进，但我仍然遇到错误。
我用下面的评论标记了给我错误的行。
请帮忙！

```
jQuery ->

    today_date = new Date()
    month = today_date.getMonth()
    day = today_date.getDay()

    pkpstyle= [
        featureType: "landscape.natural"
        elementType: "geometry"
        stylers: [
            lightness: -29
        ,
            hue: "#ffee00"
        ,
            saturation: 54
         ]
    ,
        featureType: "poi.park"
        stylers: [
            lightness: -35
        ,
            hue: "#005eff"
         ]
    ,
        featureType: "road.arterial"
    ,
        featureType: "road.arterial"
        stylers: [ lightness: 45 ]
     ]

    tempDay = 4
    //I get an error here saying Uncaught TypeError: undefined is not a function
    today_latlng = getLatlng(stops[tempDay])

    markericon = new google.maps.MarkerImage("/assets/cycling.png")
    myOptions =
        center: today_latlng
        zoom: 12
        minZoom: 4
        styles: pkpstyle
        mapTypeId: google.maps.MapTypeId.ROADMAP

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions)
    for i of stops
        latlng = getLatlng(stops[i].latlng)
        marker = new google.maps.Marker(
            map: map
            icon: markericon
            position: latlng
        )

    getLatlng = (loc) ->
        loc_split = loc.split(", ")
        lat = loc_split[0]
        lng = loc_split[1]
        new google.maps.LatLng(lat, lng) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:57:41.537

这个咖啡脚本：

```
today_latlng = getLatlng(stops[tempDay])
getLatlng = (loc) ->
    loc_split = loc.split(", ")
    lat = loc_split[0]
    lng = loc_split[1]
    new google.maps.LatLng(lat, lng) 
```

或多或少与此 JavaScript 相同：

```
var today_latlng, getLatLng;
today_latlng = getLatLng(stops[tempDay])
getLatLng = function(loc) { ... }; 
```

因此，您确实有一个`getLatLng`变量，`getLatLng(stops[tempDay])`但是直到您尝试将其作为函数调用*之后才为其分配值。*在将其视为一个函数之前，您需要将其*定义* `getLatLng`为一个函数：

```
getLatlng = (loc) ->
    loc_split = loc.split(", ")
    lat = loc_split[0]
    lng = loc_split[1]
    new google.maps.LatLng(lat, lng)
#...
today_latlng = getLatlng(stops[tempDay]) 
```

此外，如果`stops`是一个数组，那么你不应该使用`of`循环，你应该使用[`in`循环](http://coffeescript.org/#loops)：

```
for p in stops
    latlng = getLatlng(p.latlng)
    #... 
```

`of`循环与 JavaScript 循环相同，它可以对`for ... in`数组做一些有趣的事情，循环在 JavaScript 中以`in`循环结束，`for(;;)`并且在数组中表现良好。我不知道是什么`stops`所以这可能不适用，我只是根据它的使用方式和`i`索引变量来猜测。

# c# - 如何将某些行为限制为特定类的实例子集？

> ID：10325142
> 
> 赞同：3
> 
> 时间：2012-04-25T23:18:14.770
> 
> 标签：c#, domain-driven-design, data-modeling

我正在研究配方应用程序的域模型并遇到问题。

该应用程序具有多个能够充当成分的实体，其中两个是：`Product`和`Recipe`（配方可以是其他配方中的成分）。通常，我会将与成分相关的功能封装到每个实体都可以实现的接口中。问题是，虽然所有 Product 实例都可以是成分，**但只有一部分 Recipe 实例可以是成分**。

```
interface IIngredient
{
    void DoIngredientStuff();
}

class Product : IIngredient
{
    void DoIngredientStuff()
    {
        // all Products are ingredients - do ingredient stuff at will
    }
}

class Recipe : IIngredient
{
    public IEnumerable<IIngredient> Ingredients { get; set; }

    void DoIngredientStuff()
    {
        // not all Recipes are ingredients - this might be an illegal call
    }
} 
```

我如何重构这个模型来支持只有*一些*Recipe 实例才能充当成分的要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:31:04.060

如果它在您的类树中为这两种类型的食谱具有单独的类，则另一种选择。请注意，如果您要区分对象的属性更多，则此方法效果不佳。

```
class Recipe {
    public IEnumerable<IIngredient> Ingredients { get; set; }

}

class UsefulRecipe : Recipe, IIngredient
{
    void DoIngredientStuff()
    {
        // not all Recipes are ingredients - this might be an illegal call
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T23:30:23.157

对我来说听起来像是一个设计问题。如果您必须开始为 IsIngredient 进行测试，我认为您的设计出了问题。当您遇到另一个特殊情况时会发生什么？然后另一个？你会继续添加特殊的 If 测试或大的 switch 语句吗？这打破了开闭原则。

喜欢组合而不是继承怎么样？您可能还想查看策略模式...

这里真正的核心问题是Recipe不应该实现IIngredient ...因为并非所有Recipe都实现IIngredient行为...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T23:23:03.413

```
interface IIngredient 
{ 
    bool IsIngredient { get; }
    void DoIngredientStuff(); 
} 

class Recipe : IIngredient 
{ 
    public IEnumerable<IIngredient> Ingredients { get; set; } 

    bool IsIngredient {
       get { return true; // true if it is, false if it isn't }
    }   

    void DoIngredientStuff() 
    { 
      if (IsIngredient) {
        // do whatever
      }
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T07:58:34.983

我可能会使用组合来创建一个`CompositeRecipe`可以组合 2 个（也许更多）食谱的。没有所有食谱都可以用作新食谱的基础的原因是什么？您始终可以添加一个布尔属性来*表明*该配方是一个完整的配方 ( `IsCompleteRecipe`)，然后取决于您如何构建应用程序和应用程序逻辑来确定该配方是否应该与其他配方组合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T02:15:19.103

如果只有一些食谱是成分，那么它似乎是继承的经典案例，`IIngredient`在子类上实现：

```
class Product : IIngredient
{
    void DoIngredientStuff();
}

class Recipe
{
    public IEnumerable<IIngredient> Ingredients { get; set; }
}

class IngredientRecipe : Recipe, IIngredient
{
    void DoIngredientStuff();
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-26T00:41:57.523

您可以使用[适配器](http://en.wikipedia.org/wiki/Adaptor_%28programming%29)使配方表现为成分：

```
class RecipeIngredient : IIngredient
{
    private readonly Recipe _recipe;

    public RecipeIngredient(Recipe recipe) {
        _recipe = recipe;
    }

    public void DoIngredientStuff() {
        // Do stuff with the recipe.
    }
} 
```

# ruby-on-rails - Rails 通过 knockout.js 提交表单

> ID：10325144
> 
> 赞同：2
> 
> 时间：2012-04-25T23:18:37.100
> 
> 标签：ruby-on-rails, knockout.js

我有一个 Rails 3.2 应用程序，我已经开始附加很多 knockout.js 绑定。我想将 JSON 格式的表单提交到我的 Rails 服务器。

我有一个有金额的交易表格

```
= form_for(@tran, :html => {"data-bind" => "submit: submitTrans"}) do |f|
    .field
        = f.label :date
        = f.date_select :date
    .field
        = f.label :voucher
        = f.number_field :voucher
    .field
        = f.label :amount
        = f.text_field :amount, "data-bind" => "value: amount, valueUpdate: 'afterkeydown', style: { background: amount() == 0 ? 'red' : 'white' }"
    .field
        = f.label :tax
        = f.text_field :tax, "data-bind" => "value: tax"
    .actions
        = f.submit 'Save' 
```

这是我的淘汰赛代码：

```
#= require knockout

TranViewModel = ->
  # Observables
  self.amount = ko.observable("0")

  # Computed values
  self.tax = ko.computed(
    read: -> (self.amount() / 10).toFixed 2
    write: (value) -> value
    owner: this)

tranViewModel = new TranViewModel()

# Submit through AJAX
self.submitTrans = (formElement) ->
  alert ko.toJSON(tranViewModel)

# Apply keybindings on page load
$(document).ready (event) ->
  ko.applyBindings(tranViewModel) 
```

当我像这样使用 ko.toJSON 时，我的警报框中返回了“未定义”。

我必须创建我的模型的实例吗？如何获取 JSON 格式的所有表单属性并将这些属性发布到我的 rails route '/transaction'？

淘汰赛文档描述了 pushJSON 功能，但该页面不再存在：http: [//knockoutjs.com/documentation/submit-binding.html](http://knockoutjs.com/documentation/submit-binding.html)

**更新#1**

我尝试手动发送 json，这让我可以创建一个对象

```
self.submitTrans = (formElement) ->
  json = JSON.parse('{"tran": {"amount": "9999"}}')
  $.post("/trans", json, (returnedData) ->
    alert returnedData) 
```

**更新#2**

我尝试了很多方法来将我的表单转换为 JSON 以便使用 $.post 提交

```
self.submitTrans = (formElement) ->
  json = ko.toJSON(tranViewModel)
  $.post("/trans", json, (returnedData) ->
    alert returnedData) 
```

这返回为未定义。我将什么传递给 ko.toJSON？

**更新#3**

我尝试了淘汰赛网站上的示例：

```
viewModel =
    firstName : ko.observable("Bert"),
    lastName : ko.observable("Smith"),
    pets : ko.observableArray(["Cat", "Dog", "Fish"]),
    type : "Customer"

self.submitTrans = (formElement) ->
  json = ko.toJSON(viewModel)
  $.post("/trans", json, (returnedData) ->
    alert returnedData) 
```

这会正确地将 viewModel 格式化为 JSON。这是因为 viewModel 是一个对象而不是一个函数。但是，如果我将我的 TranViewModel 从一个函数更改为一个对象，这会破坏我的很多绑定。哪种是设置绑定的正确方法？它们应该在对象还是函数中？

**更新#4**

我的示例：jsfiddle.net/p6Vcc/3 - 单击提交时，ko.toJSON 不会收集所有 formElements，我应该向所有字段添加 observable 吗？

jsfiddle.net/p6Vcc/4 - 与前面的示例相同，除了在咖啡脚本中重新编码，现在单击提交时，它只显示客户的姓氏，而没有其他字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:37:59.710

**更新 1** 因此，查看上面在 jsfiddle 中提供的咖啡脚本，咖啡脚本生成的 javascript 存在问题：

```
 viewModel = __bind(function() {
    this.firstName = ko.observable("Bert");
    return this.lastName = ko.observable("Smith");
  }, this); 
```

Coffeescript 总是返回最后一个语句，所以你必须在末尾添加一个 @ 来“返回这个”

```
viewModel = =>
  @firstName = ko.observable("Bert")
  @lastName = ko.observable("Smith")
  @ 
```

生成的 javascript

```
 viewModel = __bind(function() {
    this.firstName = ko.observable("Bert");
    this.lastName = ko.observable("Smith");
    return this;
  }, this); 
```

**原始答案**

我不确定你在哪里遇到麻烦。我将上面的代码放入 jsfiddle 中，它按预期工作。

[http://jsfiddle.net/JasonMore/p6Vcc/2/](http://jsfiddle.net/JasonMore/p6Vcc/2/)

您可以更新小提琴以反映您遇到的问题吗？

**Javascript**

```
var viewModel = function() {
    this.firstName = ko.observable("Bert");
    this.lastName =ko.observable("Smith");
    this.pets = ko.observableArray(["Cat", "Dog", "Fish"]);
    this.type = "Customer";
};

var myViewModelInstance = new viewModel();

var jsonToPost = ko.toJSON(myViewModelInstance);

//alert(jsonToPost );

console.log(jsonToPost); 
```

​</p>

# .net - 如何在 VC++ 中对日期数组进行排序？

> ID：10325145
> 
> 赞同：-1
> 
> 时间：2012-04-25T23:18:37.193
> 
> 标签：.net, visual-studio-2010, visual-c++, c++-cli

我需要创建一个表。一列表格计划日期和时间。我是 C++/CLI 的新手。我知道如何找到日期和时间的唯一方法是使用

```
 System::DateTime newDate 
```

我需要找出每一行的日程安排日期，并按即将发生的事情对其进行排序。如何将每个 DateTime 对象与当前时间进行比较并找出最快发生的时间？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:52:13.737

目前还不清楚您到底想要什么，但假设您有一组具有`Date`属性的对象，您可以执行以下操作：

```
IEnumerable<SomType^>^ items = …

DateTime now = DateTime::Now;

SomeType^ result = nullptr;

for each (SomeType^ item in items)
{
    if (item->Date > now && (result == nullptr || item->Date < result->Date))
        result = item;
} 
```

话虽如此，在 C++/CLI 中学习编程可能不是一个好主意，我认为如果你使用 C# 会更好，除非你有充分的理由使用 C++/CLI。

# parsing - 给 Kate 添加 gcc 错误文本解析？

> ID：10325149
> 
> 赞同：1
> 
> 时间：2012-04-25T23:19:09.453
> 
> 标签：parsing, gcc, message, kate

在 Kate 中，直接跳转到 gcc 错误消息中给出的错误位置似乎是一个明显的改进。如果它可以直接在 Kate 的终端中工作，那就太好了，但我会选择一个可以从 x 剪贴板上拉出文本的工具。如果做不到这一点，有没有办法为凯特写一个插件来做到这一点？

谢谢。麦克风。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:49:37.207

从终端我们可以运行这样的东西：

> $ kate source.cpp --line=45

您可以编写一个脚本来解析 gcc 输出并将 kate 重新打开到源代码中的该行。如果 kate 已经打开了源代码，它将简单地模拟跳转到该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T12:42:59.003

Kate有一个[“构建”插件](https://docs.kde.org/stable5/en/applications/kate/kate-application-plugin-build.html)，它也可以`stderr`解析和理解 GCC 错误语法。

因此，例如，您可以在 Kate 中轻松配置以使用 make 构建您的项目（KDevelop 共享这部分 Kate 源代码和插件，尽管 KDevelop 有额外的插件用于项目管理），您将在 Build plugin output 中看到解析错误，单击它们会将您定向到特定的源文件和行。

（但我只是环顾四周，如果它甚至可以在视觉上标记源代码中的错误行，实际上没有类似的东西吗？从我对 Kate 插件 API 的有限理解来看，我会有点担心这不是微不足道的添加到当前的构建插件，但我没有深入研究 Kate 的源代码以完全理解它的架构以及插件代码的真正限制是什么）。

# api - asana api 列出工作区中未分配的任务

> ID：10325150
> 
> 赞同：3
> 
> 时间：2012-04-25T23:19:20.477
> 
> 标签：api, asana

我想使用 asana API 列出给定工作区中所有未分配的任务。尝试使用“assignee=null”，如下所示：

```
curl -u <api-key>: "https://app.asana.com/api/1.0/tasks?workspace=<id>&assignee=null" 
```

但它返回以下错误：

```
{
  "errors": [
    {
      "message": "assignee: Not an email, ID, or \"me\": null"
    }
  ]
} 
```

实际上，任何在没有明确受让人（我或受让人 ID）的情况下访问工作区中的任务的尝试都会失败，示例

```
curl -u <api-id>: "https://app.asana.com/api/1.0/tasks?workspace=<wid>&due_on=null&opt_pretty" 
curl -u <api-id>: "https://app.asana.com/api/1.0/tasks?workspace=<wid>&opt_fields=name,notes,assignee" 
```

都返回这个错误信息

```
{
  "errors": [
    {
      "message": "assignee: Missing input"
    }
  ]
} 
```

当我列出未分配的任务时，它们确实有一个空的受理人，我可以为项目做，但不能为工作区做：

```
curl -u <api-key>: "https://app.asana.com/api/1.0/projects/<pid>/tasks?opt_fields=name,assignee,notes"

{
  "id": 123456789,
  "name": "watch asana vision talk",
  "assignee": null,
  "notes": "http://blog.asana.com/2011/02/asana-demo-vision-talk/"
} 
```

但我也无法从项目中列出它们，因为受让人选项被忽略（另请参阅[Asana API for Projects Assigned to Me](https://stackoverflow.com/questions/10274798/asana-api-for-projects-assigned-to-me)）

我错过了什么吗？帮助表示赞赏！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:01:23.407

你没有错过任何东西，阿达里亚。现在您无法在工作区中获取所有任务 - 它可能数据过多，而且我们在 API 中还没有任何分页。您不能同时按项目和受让人进行过滤的事实是我们希望尽快解决的问题。目前，我认为您最好的选择是逐个项目请求所有任务，确保您获得受理人字段（使用 opt_fields=assignee）并最终过滤掉分配的任务。

# javascript - 下拉菜单 javascript

> ID：10325153
> 
> 赞同：0
> 
> 时间：2012-04-25T23:19:31.947
> 
> 标签：javascript, jquery

我对 javacsript/jquery 完全陌生，并且正在开发一个用于浏览器的小型应用程序。我正在尝试包含下拉菜单，例如 Facebook 上的下拉菜单，用于通知或新消息。有没有人有任何好的入门建议或好的参考资料？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:23:10.820

好吧，基本上它只是一个在您单击时显示的 divd。因此，如果您使用 jQuery，您应该能够设置 div 的样式，然后`$("#div").show();`我会说它更像是子菜单而不是下拉菜单。

这应该是 [http://sammaye.wordpress.com/2010/01/23/facebook-style-css-jquery-drop-down-menus/](http://sammaye.wordpress.com/2010/01/23/facebook-style-css-jquery-drop-down-menus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:22:40.693

[Jquery 的 LightBox](http://leandrovieira.com/projects/jquery/lightbox/)在弹出菜单方面非常受欢迎。我个人更喜欢自己动手，但就插件而言，灯箱是养家糊口的人。

# android - Android - 打开相机活动而不是图片库

> ID：10325158
> 
> 赞同：0
> 
> 时间：2012-04-25T23:19:59.843
> 
> 标签：android, nullpointerexception, android-camera, android-gallery

我创建了一个活动，允许用户在该活动中向 ImageView 添加图片。我创建了一个按钮，用于打开活动的上下文菜单，并**为用户提供从图库中选择图片或使用相机拍照的选项**。

如果我选择第**一个选项 - 从图库中挑选图片**，它可以正常工作。图库打开，我选择了图片，我的活动被恢复，图片被添加到 ImageView。**选择第二个选项，拍照**并恢复我的活动

后，奇怪的事情开始发生：

 **1.  如果我再次打开上下文菜单并尝试打开图库，则会打开相机活动
2.  我关闭相机活动并恢复我的活动，显示“使用完成操作”对话框
3.  我打开图库，选择一张图片并抛出 NullPointerException

**为什么我有这种行为和异常？**我尝试搜索类似的主题，但没有找到解决方案。
以下是我的活动的方法

```
public boolean onContextItemSelected(MenuItem item) {
    super.onContextItemSelected(item);
    switch(item.getItemId()) {
    case R.id.cm_Select_picture: {
        // TODO open gallery
        Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(intent, ""), RC_SELECT_PICTURE);
    }
    case R.id.cm_Take_picture: {
        // TODO open camera 
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(cameraIntent, RC_TAKE_PICTURE);
    }
    default: return false;
    }
} 
```

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode == RESULT_OK) {
        switch(requestCode) {
        case RC_SELECT_PICTURE: {
            Log.d(TAG, "Case select picture");
            Uri selectedImageUri = data.getData();
            String[] filePathColumn = {MediaStore.Images.Media.DATA};

            Cursor cursor = getContentResolver().query(selectedImageUri
                    , filePathColumn, null, null, null);
            cursor.moveToFirst();
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);
            cursor.close();
            Bitmap pic = BitmapFactory.decodeFile(filePath);
            goodsImage.setImageBitmap(pic);
        }
        case RC_TAKE_PICTURE: {
            Log.d(TAG, "Case take picture");
            if(data.getExtras().get("data") != null) {
                Bitmap pic = (Bitmap) data.getExtras().get("data");
                goodsImage.setImageBitmap(pic);
            }
        }
        }
    }
} 
```

```
04-26 01:34:59.529: E/AndroidRuntime(20531): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=3, result=-1, data=Intent { dat=content://media/external/images/media/9 }} to activity {com.forestassistant/com.statistics.GoodsActivity}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:22:40.873

我曾经从我的活动中调用相机活动，并且效果很好，这是我的代码：

```
 setMediaUri(getNewMediaFilePath(actOwner.getContentResolver()));
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, getMediaUri());
                startActivityForResult(cameraIntent, CAMERA_CAPTURE_REQUEST_CODE); 
```

当结果回调

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK 
            && requestCode == CAMERA_CAPTURE_REQUEST_CODE) {
        Drawable toRecycle= imgView.getDrawable();
        if (toRecycle != null) {                
            ((BitmapDrawable)imgView.getDrawable()).getBitmap().recycle();
        }
        mImg = decodeFileIntoRequiredSize(getPath(getMediaUri(),this), requiredSizeForImage);
        imgView.setImageBitmap(mImg);           
    } 
public Bitmap decodeFileIntoRequiredSize(String filePath,int requiredSize){
    Bitmap b = null;
    try {
        File f = new File(filePath);
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;

        FileInputStream fis = new FileInputStream(f);
        BitmapFactory.decodeStream(fis, null, o);
        fis.close();
        int scale = 1;
        if (o.outHeight > requiredSize || o.outWidth > requiredSize) {
            scale = (int)Math.pow(2, (int) Math.round(Math.log(requiredSize / (double) Math.max(o.outHeight, o.outWidth)) / Math.log(0.5)));
        }

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        fis = new FileInputStream(f);
        b = BitmapFactory.decodeStream(fis, null, o2);
        fis.close();
    } catch (IOException e) {
    }
    return b;
}
public String getPath(Uri uri,Activity act) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = act.managedQuery(uri, projection, null, null, null);
    if (cursor != null) {       
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    } else
        return null;
}
public Uri getNewMediaFilePath(ContentResolver contentResolver) {
    ContentValues values = new ContentValues();

    //create the directory
    // /mnt/sdcard/DCIM/Camera/IMG_20111101_111922.jpg
    String cameraDir = "/Camera";
    //File dir1 = act.getExternalFilesDir(Environment.DIRECTORY_DCIM);
    File dir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).getPath()+cameraDir);
    if(!dir.exists()) dir.mkdir();

    //use date as filename
    String name = "IMG_" + (String) android.text.format.DateFormat.format("yyyyMMdd_hhmmss",new Date());
    String path = dir.getPath()+File.separator + name;
    values.put(MediaStore.MediaColumns.TITLE, name);
    values.put(MediaStore.MediaColumns.DATE_ADDED, System.currentTimeMillis());
    Uri base = null;
    path += ".jpg";
    base = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
    values.put(MediaStore.MediaColumns.MIME_TYPE, "image/jpeg");
    values.put(MediaStore.MediaColumns.DATA, path);
    return contentResolver.insert(base, values);
} 
```

希望这对您有所帮助。**

# javascript - 使用 nodejs 时的 JavaScript 命名约定

> ID：10325166
> 
> 赞同：4
> 
> 时间：2012-04-25T23:21:10.820
> 
> 标签：javascript, node.js, naming-conventions

我在 node.js 中更多地使用 JavaScript。我的应用程序使用了以下通用“类”。

服务器端：

*   图书馆
*   楷模
*   实用程序
*   路线

客户端（backbone.js）：

*   意见
*   楷模
*   收藏品

客户端非常简单。我命名所有与它们相关的文件，例如 UserModel.js、UserView.js、UserCollection.js 等。

然而，服务器端变得更加混乱。例如：

模型与 MongoDB 集合相关。每个模型只是各种功能的包装器。如果我有一个 users 集合，我有一个名为 的集合`users`，我的模型是`Users.js`。

例如，我也有`Users.js`与模型交互并包含大部分逻辑的库。

但是，这真的不应该被称为`Users`，主要是因为我现在很困惑。

路由只是与 URL 相关。因此，如果您有，`/account/`我将有一条`account.js`路线-全部小写。

实用程序 - 我只有一个 util.js，我用得不多，所以我不太担心，而且命名对于它的用途和大小来说似乎很好。

您如何建议命名像“库”这样的通用事物，以将它们与模型/路线区分开来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T01:39:04.010

命名约定中最重要的是一致性。你几乎可以找出任何命名约定，只要它是理智和一致的。

话虽如此，在这种情况下，我的名字可能会更冗长。路径可能已经足够好了，但我宁愿看到`UserRoutes.js`，`UserModel.js`甚至可能`UserLib.js`基于你的例子。

在我的一些 node.js 项目中，我什至不使用 .js 扩展名。例如，我的路线是`user.routes`. 根据不同的扩展名更改编辑器中的语法突出显示很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:25:37.183

助手、扩展、泛型、逻辑、存储库、管理器、调解器、通信器......其中任何一个？

我通常根据我用来实现它们的设计模式来命名事物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T23:29:45.403

我实际上正在做你现在正在做的事情。我有模型、路由、视图和控制器的文件夹。然后我在每个文件夹中有一个名为 user.js 的文件。当我需要修复错误或实现与用户有关的事情时，很容易找出我需要去哪里。

我认为，如果我在所有这些文件都实现相关事物的不同方面时试图为所有这些文件提出巧妙的名称，那将是令人困惑的。

# mysql - 将 SQL 中的两列合并为 WHERE 子句

> ID：10325170
> 
> 赞同：23
> 
> 时间：2012-04-25T23:21:43.197
> 
> 标签：mysql, sql

在我的 SQL 中，我使用`WHERE`and`LIKE`子句来执行搜索。但是，我需要对两列的组合值执行搜索 -`first_name`和`last_name`：

`WHERE customers.first_name + customers.last_name LIKE '%John Smith%'`

这不起作用，但我想知道我怎么能按照这些思路做点什么？

我试图通过两列分开搜索，如下所示：

`WHERE customers.first_name LIKE '%John Smith%' OR customers.last_name LIKE '%John Smith%'`

但显然这行不通，因为搜索查询是这两列的组合值。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-25T23:25:42.317

使用以下内容：

```
WHERE CONCAT(customers.first_name, ' ', customers.last_name) LIKE '%John Smith%' 
```

请注意，为了使其按预期工作，应该修剪名字和姓氏，即它们不应包含前导或尾随空格。在插入数据库之前，最好在 PHP 中修剪字符串。但是您也可以像这样将修剪合并到您的查询中：

```
WHERE CONCAT(TRIM(customers.first_name), ' ', TRIM(customers.last_name)) LIKE '%John Smith%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T23:30:49.490

我会从这样的事情开始：

```
WHERE customers.first_name LIKE 'John%' AND customers.last_name LIKE 'Smith%' 
```

这将返回如下结果：`John Smith`, `Johnny Smithy`, `Johnson Smithison`，因为百分号仅位于`LIKE`子句的末尾。不像`'%John%'`which 可能会返回类似的结果：`aaaaJohnaaaa`, `aaaSmithaaa`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T23:57:08.530

试试这个：

```
SELECT * 
FROM customers 
WHERE concat(first_name,' ',last_name) like '%John Smith%'; 
```

参考：
[MySQL 字符串函数](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)

# c++ - 如何将 std::string 用于 char* 输出参数

> ID：10325174
> 
> 赞同：0
> 
> 时间：2012-04-25T23:22:09.563
> 
> 标签：c++, parameters, stdstring

对于声明为采用 char***输出**参数的任何函数，有没有办法将 s std::string 的“char”部分指定为函数的输出？

我开始：

```
// EDIT:  ADDED THESE TWO LINES FOR CLARITY

sprintf(buf, "top -n 1 -p %s" , commaSeparatedListOfPIDs.c_str() );
fp = popen(buf, "r");

std::string  replyStr;
char         reply[100];

rc = scanf( fp, "%s", reply );
replyStr = reply; 
```

但这似乎有点笨拙。

那么，有没有办法说：

```
rc = scanf( fp, "%s", &replyStr.c_str() ); 
```

或类似的东西？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:35:28.350

Yes this is possible:

```
std::string  replyStr(100, '\0');
//Requires C++11 (to guarantee that strings hold their characters
//in contiguous memory), and some way to ensure that the string in the file
//is less than 100 characters long.
rc = fscanf( fp, "%s", &reply.front() );
replyStr.erase(replyStr.find('\0')); 
```

The second condition is very difficult to satisfy, and if it is not satisfied this program has undefined behaviour.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:45:54.343

在 c++0x 之前，&str[0] 不需要返回指向连续存储的指针。传统的方法是使用 std::vector，即使在 c++0x 之前，它也保证有连续的存储：

```
std::vector<char> reply(100);
rc = scanf(fp, "%s", &reply[0]); 
```

然而，在 c++0x 中，std::string 也可以保证工作，而不是 std::vector。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T23:28:17.680

如果你想使用字符串，为什么不使用 C++ 的 i/o 方式呢？看看[这个链接](http://www.cplusplus.com/doc/tutorial/basic_io/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T23:46:58.920

来自 std::String 的 char* 仅在字符串有效时才有效。如果 std::String 超出范围，则它不再是有效的 char 指针。

```
const char* bar;
{
    std::String foo = "Hello";
    bar = foo.c_str();
    printf("%s", bar); //SAFE since the String foo is still in scope
}
printf("%s", bar); //UNSAFE String foo is no longer in scope 
```

只要 std::String 变量存在，您就可以使用 const char* 如果它超出范围，则内存被释放并且 const char* 指针变成不再安全使用的悬空指针。

如果在 std::String foo 超出范围后需要它存在，则必须将字符串复制到 char*

```
char bar[100];
{
    std::String foo = "Hello";
    strncpy(bar, foo.c_str(), 100);
    bar[100] = '\0'; //make sure string is null-terminated
    printf("%s", bar); //SAFE
}
printf("%s", bar); //SAFE even though the std::String has gone out of scope. 
```

如果您的字符串在函数内部，则函数返回时它将不存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T23:28:25.007

`std::string replyStr(reply);`将制作您的 char 数组的字符串。

编辑：

但是......这并没有什么不同。

使用 c++ 样式输入/输出不必使用`char*`.

`cin >> replyStr;`将获得下一个字符串，直到空格。 `getline(cin,reply);`将字符串设置为整行输入

# algorithm - O(n) 的解决方案来解决 boggle

> ID：10325177
> 
> 赞同：7
> 
> 时间：2012-04-25T23:22:36.233
> 
> 标签：algorithm, time-complexity, boggle

解决 boggle 的函数的最佳时间复杂度 O(n) 是多少，其中 boggle 板是 n × n？

我觉得这是`n^2`因为对于每个角色，我们必须看看`2(n-1)`其他角色。面试官争辩说这不是`n^2`为了`O(1)`查字典。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:07:47.277

字典的功能还不是很清楚。

有点傻，但我认为正确的答案如下：

由于在 boggle 中，单词可以采用任意方式（从每个字符到该单词中尚未使用的任何相邻（水平、垂直或对角线）字符），对于长度为 的单词，单词的`L`组合最多可达 ，`8^L`除非您消除字符出现多次的组合。无论如何，考虑`L`到是常数（因为使用的字典是常数），这个值也是常数。总而言之，从给定位置开始查找单词的时间复杂度为`O(1)`.

所以剩下的是单词的起始位置，它在空间中`n^2`，所以你的 boggle 求解器的时间复杂度是`O(n^2)`，**你是对的**。

如前所述，我认为这种论证有点愚蠢。

问题可能是不想将字典视为常量，因为它非常大。假设它无限大，但它实现了对**现有单词**`O(1)`的查找（这是我们可以用于字典的唯一查询，特别是没有查找单词前缀），并进一步假设不是限制因素与字长相比，时间复杂度是指数级的。但我认为在本练习中，查找仅对现有单词成功的假设是错误的。**`n`**

 **另一个可能的假设是，字典查找单词前缀（返回*是否*存在以给定字符串开头但不一定等于字符串的单词）。在这种情况下，我们可以实现一个更好、**更复杂**的算法来搜索有限的搜索空间（每个字符最多使用一次）。字长的一个限制因素是`n^2`，因为没有一个字（包含在当前的 boggle board 中）可以比这个长（因为我们只能使用每个字符一次）。同样，起始位置在空间中`n^2`，因此基于路径的愚蠢算法的时间复杂度为**`O(n^4)`，所以你错了**. 目前，在这种假设下，我想不出具有更好时间复杂度的算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T18:08:55.513

看看[http://exceptional-code.blogspot.com/2012/02/solving-boggle-game-recursion-prefix.html](http://exceptional-code.blogspot.com/2012/02/solving-boggle-game-recursion-prefix.html)。动态规划解决方案是 O(D)，其中 D 是字典的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T21:53:06.137

我终于弄明白了。答案在时间上是指数级的。

想象一个 4X4 拼图网格

```
ABCD
EFGH
IJKL
MNOP 
```

那么例如，任何以`A`ABCDHGFEIJKLPONM 开头的有序子序列都是潜在词；`A`以 AEIMNOPLHDCBFJKG 或 AEIMNOPLHGFIK 或 ABCDHLPONMIEFGKJ开头的任何有序子序列也是如此。然后我们需要查看以 B 开头的潜在单词，然后是 C 等。

让我们以另一种方式来看待这个问题。假设我们只需要考虑 _ABCD，其中`_`代表一些起始字符，比如`X`; 那么属于幂集的潜在词是：

```
XD; XC; XCD; XB; XBD; etc. 
```

因此，仅考虑从每个字符开始的顺时针螺旋，我们已经在研究`n^2*2^(n-1)`. `n^2`因为网格是`n by n`，所以对于一个`4 by 4`网格，有 16 个可能的起始字符。并且`2^(n-1)`由于每个起始角色所领导的权力集。当然，顺时针螺旋并不是唯一可能的模式。但是我们已经可以看到第一个模式的时间复杂度：Big-Omega(2^n)，它是指数的。**

# sql-server - SQL Server CPU 与存储瓶颈

> ID：10325181
> 
> 赞同：0
> 
> 时间：2012-04-25T23:22:50.620
> 
> 标签：sql-server, performance

我已经阅读了很多关于使用 SSD 的 SQL Server 性能比传统硬盘驱动器好得多的文章。不过，在测试环境中使用我的应用程序进行负载测试时，我能够将我的测试数据库服务器 (SQL 2005) 的 CPU 使用率保持在 75% 到 100% 之间，而不会对磁盘​​访问造成太大压力（尽我所能告诉）。我的数据集仍然很小；数据库备份小于 100 MB。我使用的测试服务器不是新的，但也没有懈怠。

所以，我的问题：

1.  CPU 是否是瓶颈（而不是存储），因为数据集很小，因此适合内存？

2.  一旦数据集增长到需要分页，这种情况会改变吗？

3.  在 SQL Server 开始分页之前，数据集大约需要多大（占系统内存的百分比）？还是取决于很多其他因素？

4.  随着应用程序及其数据集的增长，除了 CPU、存储和缺乏适当的索引之外，是否还会出现其他瓶颈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:27:45.310

1.  是的

2.  是的

3.  如果您将 SQL Server 配置为使用尽可能多的内存，可能是在它超过最大系统内存时。但它的设置取决于导致分页的原因（正在执行的查询是最普遍的原因）。

4.  请求机器和服务器之间的 I/O 是我能想到的唯一一个，并且仅在您检索大型数据集时才重要。我也不会将缺少索引归为瓶颈，而是索引可以提高搜索性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:32:15.307

只要 CPU 是专用 SQL Server 机器上的瓶颈，您就不必担心磁盘速度（假设机器没有问题）。SQL-Server 将使用大量内存缓存。SQL-Server 具有内置策略，可在给定负载和可用资源下发挥最佳性能。别担心！

# c++ - 写出文件时出现奇怪的 glibc 错误

> ID：10325185
> 
> 赞同：1
> 
> 时间：2012-04-25T23:23:37.397
> 
> 标签：c++, glibc

我收到一个奇怪的错误：

```
*** glibc detected *** findbasis: free(): invalid next size (normal): 0x0000000006a32ce0 *** 
```

当我尝试关闭（）一个 std::ofstream 时：

```
void writeEvectors(int l, parameters params, PetscReal* evectors, int basis_size)
{
    for (int n = 1 + l; n <= params.nmax(); n++)
    {
        std::stringstream fname(std::ios::out);
        fname << params.getBasisFunctionFolder() << "/evectors_n" << std::setw(4) << std::setfill('0') << n << "_l" << std::setw(3) << std::setfill('0') << l;
        std::ofstream out(fname.str().c_str(), std::ios::binary);
        std::cerr << "write out file:" << fname.str() << " ...";
        out.write((char*)( evectors + n * basis_size),sizeof(PetscReal) * basis_size);
        std::cerr << "done1" << std::endl;
        if (out.fail() || out.bad())
            std::cerr << "bad or fail..." << std::endl;
        out.close();
        std::cerr << "done2" << std::endl;
    }
    std::cout << "done writing out all evectors?" << std::endl;
} 
```

运行时，该程序永远不会到达“done2”（或“bad or fail...”），但是会到达“done1”。此外，写出的数据也很好（正如我所期望的那样）*。*

老实说，我不知道为什么会发生这种情况，我想不出“close（）”会失败的任何原因。

谢谢你的帮助。

（我开始认为这是某种编译器错误/错误。我正在通过 mpicxx 运行 GCC 4.1.2（！）（我相信是 RHEL 5）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:28:44.593

glibc 错误听起来像是释放内存有问题。如果你在 Valgrind 中运行，一个免费的内存分析器，它应该会给你一个更有用的错误解释。

在 Valgrind 中运行相当轻松 - 只需使用 -g 选项编译可执行文件以添加调试标志（假设您使用的是 GNU 编译器），然后在您的 Linux 终端中输入`valgrind ./your_executable`并查看会发生什么。

# sql-server - 数据库备份和恢复到其他服务器的步骤

> ID：10325186
> 
> 赞同：0
> 
> 时间：2012-04-25T23:23:37.933
> 
> 标签：sql-server

我有几个数据库需要从生产服务器部署到实时服务器。

我正在做的是，在创建备份之前，我重建索引和更新统计信息，然后进行备份并将其发送到 Live。

这是一个好习惯吗，有人可以在这方面给我建议吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T22:53:22.273

重建索引和更新统计信息，然后收缩会使数据库服务器繁忙，这可能会在数据库服务器繁忙时响应您的用户，或者减慢他们的查询速度。现在空间不是问题，所以增加你的数据库服务器驱动器。

谢谢

# ios5 - iOS 5.1+ 使用什么规格/版本的 Websockets？

> ID：10325187
> 
> 赞同：1
> 
> 时间：2012-04-25T23:23:45.460
> 
> 标签：ios5, websocket

我一直在对我正在使用的 websocket 服务器进行调整，但我发现我的努力是徒劳的，因为我无法确定最新版本的 iOS 的 websockets 的哪个规范（hixie/hybi？）是使用。

是 Hixie 76 还是 Hybi？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:20:33.667

这是测试链接，使用任何设备/平台进行测试：[http ://websocketstest.com/](http://websocketstest.com/)

在 iPhone 4（5.0.1 版）上支持[drawft-76](https://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76)。

以下是不同浏览器/平台上技术可用性的总体支持统计：http: [//caniuse.com/#feat=websockets](http://caniuse.com/#feat=websockets)

# iphone - 检查 CoreData 属性是否为空

> ID：10325194
> 
> 赞同：11
> 
> 时间：2012-04-25T23:24:42.520
> 
> 标签：iphone, ios, core-data

我希望找到一种方法来检查 CoreData 属性是否为空。属性本身是二进制数据类型。如果该属性为空，那么我可以告诉我的班级下载并将一些数据保存到该属性中。

根据 CoreData 文档，您不应该继续获取以查看对象是否存在。我想知道是否有办法做到这一点？在不违反这条“法律”的情况下？

这是我第一次尝试使用 CoreData。之后我将它添加到我的代码中，这会稍微痛苦一些，但总的来说，到目前为止一切似乎都还不错。我只需要找出检查属性是否具有值的逻辑方法。如果不是，那么我需要下载并保存新数据，如果是，那么我只使用属性中的内容。

**更新 ：**

我刚刚在我一直在阅读的 CoreData 框架中找到了这个方法，虽然试图对此有所突破。不知道它是否会有所帮助..你们怎么看？

> [willAccessValueForKey](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/occ/instm/NSManagedObject/willAccessValueForKey:)：提供对键值观察访问通知的支持。
> 
> *   (void)willAccessValueForKey:(NSString *)key 参数 key 接收者属性之一的名称。讨论 请参阅 didAccessValueForKey：了解更多详细信息。您可以使用键值 nil 调用此方法，以确保已触发错误，如下例所示。
> 
> [aManagedObject willAccessValueForKey:nil];

不确定..我不明白的是**提供对键值观察访问通知的支持。**？？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T02:58:47.113

该通知用于何时访问该值。

如果我理解正确，您不想查看实体是否存在，而是要查看实体中的属性。因此，我假设您已将其标记为可选属性。

假设您有一个名为 rawData 的二进制数据属性。如果你想在数据库中找到所有没有为这个属性设置任何数据的@"MyEntity"对象，你可以发出这个获取请求。

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"MyEntity"];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"rawData = nil"];
NSArray *results = [managedObjectContext executeFetchRequest:fetchRequest error:0]; 
```

# python - Python差异中的潜在语义分析

> ID：10325197
> 
> 赞同：6
> 
> 时间：2012-04-25T23:24:46.817
> 
> 标签：python, numpy, nlp, scipy, latent-semantic-indexing

我正在尝试使用以下代码关注[关于 Python 中潜在语义索引的维基百科文章：](http://en.wikipedia.org/wiki/Latent_semantic_analysis)

```
documentTermMatrix = array([[ 0.,  1.,  0.,  1.,  1.,  0.,  1.],
                            [ 0.,  1.,  1.,  0.,  0.,  0.,  0.],
                            [ 0.,  0.,  0.,  0.,  0.,  1.,  1.],
                            [ 0.,  0.,  0.,  1.,  0.,  0.,  0.],
                            [ 0.,  1.,  1.,  0.,  0.,  0.,  0.],
                            [ 1.,  0.,  0.,  1.,  0.,  0.,  0.],
                            [ 0.,  0.,  0.,  0.,  1.,  1.,  0.],
                            [ 0.,  0.,  1.,  1.,  0.,  0.,  0.],
                            [ 1.,  0.,  0.,  1.,  0.,  0.,  0.]])
u,s,vt = linalg.svd(documentTermMatrix, full_matrices=False)

sigma = diag(s)
## remove extra dimensions...
numberOfDimensions = 4
for i in range(4, len(sigma) -1):
    sigma[i][i] = 0
queryVector = array([[ 0.], # same as first column in documentTermMatrix
                     [ 0.],
                     [ 0.],
                     [ 0.],
                     [ 0.],
                     [ 1.],
                     [ 0.],
                     [ 0.],
                     [ 1.]]) 
```

数学表明它应该如何工作：

```
dtMatrixToQueryAgainst = dot(u, dot(s,vt))
queryVector = dot(inv(s), dot(transpose(u), queryVector))
similarityToFirst = cosineDistance(queryVector, dtMatrixToQueryAgainst[:,0]
# gives 'matrices are not aligned' error.  should be 1 because they're the same 
```

什么有效，数学看起来不正确：（从[这里](http://www.gototheboard.com/articles/An_Example_of_Latent_Semantic_Indexing)）

```
dtMatrixToQueryAgainst = dot(s, vt)
queryVector  = dot(transpose(u), queryVector)
similarityToFirst = cosineDistance(queryVector, dtMatrixToQueryAgainsst[:,0]) 
# gives 1, which is correct 
```

当我能找到的关于 LSA 数学的所有内容都显示第一个正确时，为什么路由有效，而第一个无效？我觉得我错过了一些明显的东西......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T01:11:38.710

您的代码中有几个不一致的地方会在您混淆之前导致错误。这使得您很难准确理解您尝试了什么以及为什么感到困惑（显然您没有在粘贴代码时运行代码，否则它会更早抛出异常）。

也就是说，如果我正确地遵循了您的意图，那么您的第一种方法几乎是正确的。考虑以下代码：

```
documentTermMatrix = array([[ 0.,  1.,  0.,  1.,  1.,  0.,  1.],
                            [ 0.,  1.,  1.,  0.,  0.,  0.,  0.],
                            [ 0.,  0.,  0.,  0.,  0.,  1.,  1.],
                            [ 0.,  0.,  0.,  1.,  0.,  0.,  0.],
                            [ 0.,  1.,  1.,  0.,  0.,  0.,  0.],
                            [ 1.,  0.,  0.,  1.,  0.,  0.,  0.],
                            [ 0.,  0.,  0.,  0.,  1.,  1.,  0.],
                            [ 0.,  0.,  1.,  1.,  0.,  0.,  0.],
                            [ 1.,  0.,  0.,  1.,  0.,  0.,  0.]])
numDimensions = 4
u, s, vt = linalg.svd(documentTermMatrix, full_matrices=False)
u = u[:, :numDimensions]
sigma = diag(s)[:numDimensions, :numDimensions]
vt = vt[:numDimensions, :]
lowRankDocumentTermMatrix = dot(u, dot(sigma, vt))
queryVector = documentTermMatrix[:, 0]
lowDimensionalQuery = dot(inv(sigma), dot(u.T, queryVector))
lowDimensionalQuery
vt[:,0] 
```

你应该看到这一点`lowDimensionalQuery`并且`vt[:,0]`是平等的。将`vt`其视为低维子空间中文档的表示。首先，我们将查询映射到该子空间以获取`lowDimensionalQuery`，然后将其与 的对应列进行比较`vt`。您的错误是试图将转换后的查询与来自`lowRankDocumentTermMatrix`原始空间的文档向量进行比较。由于转换后的查询比“重构”文档的元素少，Python 抱怨道。

# html - 跨浏览器的麻烦。为什么会这样？

> ID：10325198
> 
> 赞同：-2
> 
> 时间：2012-04-25T23:24:55.163
> 
> 标签：html, css

请参考我的网站[http://www.vault-x.com](http://www.vault-x.com)

它在 Firefox 中看起来是正确的，但在 Chrome 中它已经消失了。

我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T23:29:05.257

您的 HTML 无效，这通常是当今跨浏览器呈现问题的主要原因。

[http://validator.w3.org/check?uri=http%3A%2F%2Fwww.vault-x.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http://www.vault-x.com/&charset=%28detect%20automatically%29&doctype=Inline&group=0)

具体来说，你`>`在这个`div`...

```
<div class="spacer"</div> 
```

# sql - 如何在plsql上编辑return语句的游标属性？

> ID：10325201
> 
> 赞同：0
> 
> 时间：2012-04-25T23:25:26.160
> 
> 标签：sql, database, oracle, plsql

我想从一个函数返回一个游标，我已经读过我可以使用：

```
return sys_refcursor 
```

进而

```
open curs for select* from mytable;
return curs; 
```

我试过 curs.att := 'something' 但我得到一个错误

另请阅读我可以做我自己的类型：

```
 TYPE type IS REF CURSOR RETURN mytable%ROWTYPE; 
```

然后

```
CURSOR cur IS
    SELECT* FROM mytable;
var cur%ROWTYPE;

BEGIN
OPEN cur;
FETCH cur INTO var;
var.att = 'something';
RETURN var; 
```

这次我没有在分配中得到错误，而是在返回语句中。

如果我将 var 类型更改为我的类型，我将无法获取该值。

我不想编辑光标，但不是表格，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:41:20.683

游标是只读结构。更改从游标中获取的数据的唯一方法是更改​​用于打开游标的 SQL 语句或更改基础表中的数据。

虽然可以将游标从一个 PL/SQL 块返回到另一个块，但它很少是合适的体系结构。`SYS_REFCURSOR`当您想要将结果返回给知道如何使用游标的客户端应用程序时，A通常是合适的。

但是，您真的要返回游标吗？还是要返回记录类型？您发布的第二个代码片段似乎试图返回一条记录——这当然是可能的，但您需要声明该函数返回一条记录而不是游标。也就是说，`RETURN`声明中的语句需要是`RETURN mytable%ROWTYPE`而不是`RETURN type`. 例如，如果要根据`EMP`表返回一条记录

```
create or replace function get_emp( p_empno in emp.empno%type )
  return emp%rowtype
is
  l_rec emp%rowtype;
begin
  select *
    into l_rec
    from emp
   where empno = p_empno;
  l_rec.sal := l_rec.sal + 100;
  return l_rec;
end; 
```

# java - ANTLR 语法中的无限递归

> ID：10325205
> 
> 赞同：6
> 
> 时间：2012-04-25T23:25:45.570
> 
> 标签：java, parsing, recursion, antlr

我写了一个简单的语法来识别一些表达式。在这里，我发布了一个更简单的版本，我写它只是为了简化我的解释。这个更简单的版本可以识别如下表达式：

1.  这是一个文本
2.  [n]这是另一个文本[/n]
3.  [n][n]这是一个复合表达式[/n][/n]

我的问题是当我总结一个表达式时：[i]这应该只生成一个识别异常[/n]

抛出识别异常，但解析器进入无限递归，因为它匹配'['，但是当它不匹配'i'时它会丢失自己。我认为这是因为我的语法文本组件不能包含方括号。所以，我发布了语法。

```
grammar ErrorTest;

expression
    :    rawText EOF
    |    command EOF
    ;

rawText
    :    word+
    ;

word
    :    ESPACE* TEXT ESPACE*
    ;

command 
    :    simpleCommand
    |    compoundCommand
    ;

simpleCommand
    :    HELP
    ;

compoundCommand
    :    rawText
    |    BEGIN compoundCommand END
    ;

HELP   : '[help]';

BEGIN  : '[n]';
END    : '[/n]';

ESPACE : ' ';
TEXT   : ~(' '|'['|']')*; 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T23:28:06.637

word 匹配空字符串，因为在

```
word
    :    ESPACE* TEXT ESPACE*
    ; 
```

TEXT 匹配导致的空字符串

```
rawText
    :    word+
    ; 
```

无限循环。

改变

```
TEXT   : ~(' '|'['|']')*; 
```

到

```
TEXT   : ~(' '|'['|']')+; 
```

## 这将使您的语法只有有限的模棱两可。

考虑这个的方法是rawText可以通过多种方式匹配空字符串

1.  零 TEXT 令牌
2.  一个长度为 0 的 TEXT 令牌。
3.  两个长度为 0 的 TEXT 标记。
4.  三个长度为 0 的 TEXT 标记。
5.  ...

这会在您遇到语法错误 ( `[i]`) 时表现出来，因为它会尝试这些替代方案中的每一个以查看它们中的任何一个是否解决了错误。

* * *

为了摆脱任何二次行为，你真的应该让它完全明确。

```
rawText : ign (word (ign word)*)? ign;
ign     : ESPACE*;
word    : TEXT; 
```

天真的修复的问题是 rawText 可以`"foo"`通过多种方式匹配：

1.  `TEXT("foo")`
2.  `TEXT("fo"), ESPACE(""), TEXT("o")`
3.  `TEXT("f"), ESPACE(""), TEXT("oo")`
4.  `TEXT("f"), ESPACE(""), TEXT("o"), ESPACE(""), TEXT("o")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:09:58.650

为什么不做这样的事情：

```
grammar Test;

expression
 : atom+ EOF
 ;

atom
 : TEXT
 | ESPACE
 | command
 ;

command 
 : simpleCommand
 | compoundCommand
 ;

simpleCommand
 : HELP
 ;

compoundCommand
 : BEGIN atom+ END
 ;

HELP   : '[help]';
BEGIN  : '[n]';
END    : '[/n]';
ESPACE : ' ';
TEXT   : ~(' '|'['|']')+; 
```

这会像输入一样

```
this is [n][n]a [help][n]compound[/n] expression[/n][/n] 
```

进入以下解析树：

[![在此处输入图像描述](../Images/1a35ad5c041bf34ef71fad3ef67ecdb2.png)](https://i.imgur.com/jUlzh.png)

*（点击图片放大）*

# android - 如何在 Eclipse 而不是 R.java 中跳转到 XML 资源

> ID：10325209
> 
> 赞同：14
> 
> 时间：2012-04-25T23:26:34.297
> 
> 标签：android, eclipse

*   Eclipse 版本：Indigo Service Release 2
*   ADT 版本：18.0.0.v201203301601-306762

我在 Eclipse 中有以下代码

```
View view = inflater.inflate(R.layout.somelayoutfile, parent, false); 
```

我想执行一些操作，例如 CTRL+单击“R.layout.somelayoutfile”并跳转到该 xml 文件。相反，它把我带到了“R.java”。

根据this the [Android Documentation](http://developer.android.com/guide/developing/tools/adt.html)，这应该受到支持，但它不起作用。有谁知道为什么，和/或如何启用此功能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-10T00:12:51.490

最有效的方式。
Eclipse设置`Hyperlinking`————`Open Declaration`取消勾选。

`CMD`+`Click`将开始将您直接导航到 XML 而不是 R 类。

![Eclipse 超链接设置](../Images/fc8b1635e0944cfe99b2eef805ebd499.png)

您仍然可以`Open Declaration`通过按来使用`F3`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-26T01:55:28.880

如果您按住 Ctrl 并将指针放在资源名称上（在您的示例中为 somelayoutfile），则应出现一个菜单，其中包含两个选项：

*   公开声明
*   在 layout/somelayoutfile.xml 中打开声明

这不适合你吗？或者您希望默认（直接单击资源名称）成为第二个选项？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-21T07:25:30.477

您可以使用 Ctrl+Alt+Shift 并单击 res

或在 Preferences -> General -> Editors -> Text Editors -> Hyperlinking 上，您可以更改快捷键

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T01:35:57.450

`CTRL + CLICK`是这样做的正确方法，但有时它不能正常工作，我不知道为什么。我知道，这很严重。如果我是你，我会尝试下面的一种或两种方法。

通常我会清理我的项目，如果不能修复它，我会重新启动 Eclipse，然后再次清理。这两个中的一个通常会为我解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-02T23:10:35.247

按住`ctrl`（或`command`在 Mac 上）然后将光标移到资源名称上。如果您将光标移动到资源名称，然后点击`ctrl`，它将不会在资源名称下划线，也不会提供链接。你必须点击`ctrl`然后移动光标。

# javascript - javascript if else 语句错误

> ID：10325212
> 
> 赞同：0
> 
> 时间：2012-04-25T23:27:00.140
> 
> 标签：javascript

我正在尝试检查名称文本字段是否为空。如果是，那么我想显示一个显示“请输入您的姓名”的 div。我做了一个测试，name='name'。但在那之后，没有其他弹出。

```
function validate(input, name) {
if(name=='name') {
        if(input==null || input=="") {
            name.style.visibility='visible';
            alert("please enter a value");
        } else {
            alert("valid entry.");
        }
    }
} 
```

当我使用警告框打印输入时，它不包含任何内容；所以我知道它要么是空的，要么是“”。我该如何解决这个问题以使其正常工作？

这是我的文本字段：

```
<input type="text" name="name" id="name" onblur="javascript: validate(this.value, this.id);" required />
    <div id="name" style="visibility:hidden; float:right;">Please fill in a name!</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:01:29.117

该`javascript:`协议仅在 URL 中有 Javascript 时使用，请勿在事件处理程序中使用它。

您不能有两个具有相同 id 的元素。id 必须是唯一的。

在 XHTML 中，没有没有值的属性。您应该使用`required="required"`而不仅仅是`required`.

您不必检查 null 的值。文本字段的值永远不会为空。

使用该`getElementById`方法从其 id 中查找元素。

```
function validate(input, name) {
  if (name == 'name') {
    if (input == '') {
      document.getElementById('nameInfo').style.visibility = 'visible';
      alert("please enter a value");
    } else {
      alert("valid entry.");
    }
  }
}

<input type="text" name="name" id="name" onblur="validate(this.value, this.id);" required="required" />
<div id="nameInfo" style="visibility:hidden; float:right;">Please fill in a name!</div> 
```

# r - 在编写自己的 R 包时，我似乎无法正确导入其他包

> ID：10325231
> 
> 赞同：37
> 
> 时间：2012-04-25T23:29:07.207
> 
> 标签：r, import, namespaces, roxygen

好吧，第一次尝试编写 R 包，我被卡住了。这是我创建包的方式：

```
package.skeleton("pkg",code_files=some.filenames)
roxygenize("okg") 
```

我正在使用 roxygen2 并在我的“pkg-package.R”文件中有以下导入：

```
@import data.table zoo lubridate 
```

然后从终端运行：

```
R CMD build pkg
R CMD check pkg
R CMD install pkg 
```

在检查阶段，我收到以下警告：

> ** 为延迟加载准备包
> 警告：加载“lubridate”时替换之前的导入“小时”<br> 警告：加载“lubridate”时替换之前的导入“mday”<br> 警告：加载“时”替换之前的导入“月” lubridate'<br> 警告：加载 'lubridate' 时替换之前的导入 'wday'<br> 警告：加载 'lubridate' 时替换之前的导入 'week'
> 警告：加载 'lubridate' 时替换之前的导入 'yday'<br>警告：在加载“lubridate”时替换之前的导入“年份”<br> ** 帮助
> ***安装帮助索引
> ** 构建包索引 ...
> ** 测试是否可以加载已安装的包
> 警告消息：
> 1：加载“lubridate”时替换之前的导入“小时”<br> 2：加载“lubridate”时替换之前的导入“mday”<br> 3：加载“lubridate”时替换之前的导入“月”<br> 4：加载“lubridate”时替换上一个导入“wday”<br> 5：加载“lubridate”时替换上一个导入“周”<br> 6：加载“lubridate”时替换上一个导入“yday”<br> 7：替换上一个加载“lubridate”时导入“年份”

我真的不知道该怎么做，但它们似乎是覆盖命名空间中的东西的典型警告。无论如何，我都可以安装该软件包，但是当我尝试使用它时会发生以下情况：

> > library(pkg)
> > 覆盖 POSIXt、Date 和 difftime 的 + 和 - 方法
> > 警告消息：
> > 1：加载“lubridate”时替换之前的导入“小时”<br> 2：加载“lubridate”时替换之前的导入“mday”<br> 3: 加载 'lubridate' 时替换之前的导入 'month'<br> 4: 加载 'lubridate' 时替换之前的导入 'wday'<br> 5: 加载 'lubridate' 时替换之前的导入 'week'<br> 6:加载“lubridate”时替换先前的导入“yday”<br> 7：加载“lubridate”时替换先前的导入“年”<br> d <- my.function(arg1, arg2)
> > MATCH(x, x) 中的错误：找不到功能“匹配”

使用 traceback()，我发现这是在调用 merge.zoo() 期间生成的。所以我尝试在我的 R 会话期间手动加载动物园，瞧，然后该功能正常工作而没有错误消息。

我已经尝试在“pkg-package.R”文件以及 NAMESPACE 中手动更改导入的顺序。但是，根据我在其他地方找到的内容，我没有添加任何 Imports 或 Depends 到DESCRIPTION。帮助？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-26T00:54:57.513

警告是因为 data.table 和 lubridate 都定义了一个符号`hour`等；见`data.table::hour`和`lubridate::hour`。您可以通过仅导入所需的 lubridate / data.table 函数而不是整个包来避免这种情况；一个标准的 NAMESPACE 文件将包含

```
importFrom(lubridate, hour) 
```

例如。在 roxygen2 中，您将使用标签：

```
@importFrom lubridate hour 
```

MATCH 问题可能是因为`merge`调度不正确，可能是因为 zoo 应该在其名称空间中`S3method(merge, zoo)`而不是`export(merge.zoo)`，如编写 R 扩展，1.6.2 中所述。这里的解决方案是联系 , 的维护者`zoo`（`packageDescription('zoo')$Maintainer`维护者非常精通 R，我觉得我误诊了......）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:12:08.107

作为 MATCH 错误的临时解决方法，我已经成功地在包文件`zoo`的`Depends:`部分下列出了包`DESCRIPTION`。

# html - DT右边有多个DD？

> ID：10325233
> 
> 赞同：4
> 
> 时间：2012-04-25T23:29:17.393
> 
> 标签：html, css

基本上我当然想在 HTML 中实现这样的目标：

```
 Description:  Element #1
                Element #2
                Element #3 [eventually bla bla bla]
                [...] 
```

用 table 这是一个笑话：

```
<table>
  <tr>
   <td>Description</td>
   <td>Element #1<br>Element #2<br>Element #3 [eventually bla bla bla]</td>
  </tr>
</table> 
```

但是我应该使用桌子还是？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T23:31:26.570

这并不难，只要记住你的组合器：

```
dt {
    float: left;
    width: 8em;
}

dd {
    margin-left: 9em;
}

dd + dd {
    margin-left: 9em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2nmrt/)。

参考：

*   [`E + F`，相邻兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-26T06:33:31.497

使用表格确实很容易，您还可以选择让每个元素成为自己的单元格：

```
<table>
  <tr>
   <td rowspan=3>Description
   <td>Element #1
  <tr>
   <td>Element #2
  <tr>
   <td>Element #3 [eventually bla bla bla]
</table> 
```

那时造型会很容易。（你可能会发现你想要`td { vertical-align: top}`的，也许是一些边框，也许是填充。）所以问题是：为什么不使用一个简单表格的变体，它几乎直接给你想要的外观？

使用定义列表标记`dl`要么强制猜测“描述”文本的宽度，要么使用无法跨浏览器稳定运行的 CSS 功能。

# android - Andengine Sprites 在数组中并触及了哪一个？

> ID：10325234
> 
> 赞同：2
> 
> 时间：2012-04-25T23:29:29.443
> 
> 标签：android, sprite, andengine, touch-event

我在场景中有 10 张图片作为精灵。它们在一个数组中。图片（精灵）通过 MoveModifier 在场景中移动。我想要这个：当我触摸任何图片时，我触摸的图片应该是不可见的。我的代码不起作用，因为 19\. line(circles[i].setVisible(false);) eclipse 说我将 i(variable) 作为 final。我不能这样做，因为我应该更改它的数组索引。什么我可不可以做？

```
 final int totalCircleNumber=10;
    int circleNumber=0;
    private Sprite[] circles = new Sprite[totalCircleNumber];
    private Runnable mStartCircle = new Runnable() {
    public void run() {
        int i=circleNumber++;
        Scene scene = Level1Activity.this.mEngine.getScene();
        float startX = randomNumber.nextFloat()*(CAMERA_WIDTH);
        float startY = -64.0f;
        float finishX= randomNumber.nextFloat()*(CAMERA_WIDTH);
        float finishY= CAMERA_HEIGHT+64.0f;
        int j= randomNumber.nextInt(50);
        circles[i] = new Sprite(startX, startY, textRegCircle[j]){
            @Override
            public boolean onAreaTouched(final TouchEvent pAreaTouchEvent,final float pTouchAreaLocalX, final float pTouchAreaLocalY) {

                if(pAreaTouchEvent.isActionDown())
                {                                       
                     circles[i].setVisible(false);

                }                   
                return true;
                }
        };

        scene.registerTouchArea(circles[i]);

        circles[i].registerEntityModifier(
                (IEntityModifier) new SequenceEntityModifier (
                            new MoveModifier(velocityOfCircle, circles[i].getX(),  finishX, 
                                    circles[i].getY(), finishY)));

        scene.getLastChild().attachChild(circles[i]);
        if (circleNumber < totalCircleNumber){
            mHandler.postDelayed(mStartCircle,second);
        }
    }
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:52:42.607

代替：

```
circles[i].setVisible(false); 
```

和

```
this.setVisible(false); 
```

# wordpress - 注意： register_uninstall_hook 被错误调用

> ID：10325238
> 
> 赞同：3
> 
> 时间：2012-04-25T23:30:10.900
> 
> 标签：wordpress, debugging

我自动将我的 wordpress 安装更新到最新版本。一切看起来都是正常的单位“更新数据库......”它卡住了。我等了很长时间，然后关闭了页面，因为什么都没有发生。

然后我收到一条关于维护的错误消息，我在删除维护文件后删除了它。

Wordpress 显示它运行最新版本，但是当我尝试重新安装时，我得到了同样的错误。我试过禁用所有插件并切换到默认主题，但没有运气。

我将调试设置为 true 并收到以下消息：注意：register_uninstall_hook 调用不正确。在卸载挂钩中只能使用静态类方法或函数。有关更多信息，请参阅 WordPress 中的调试。

除了首页上的图像破坏了布局之外，一切看起来都很正常。有小费吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T20:05:46.047

我解决此类问题的方法是在我的项目中对函数调用进行全局搜索。

已经安装了一些插件，它们的调用如下：

```
register_uninstall_hook(__FILE__, array($this,'uninstall_removedata')); 
```

但应该是这样的：

```
register_uninstall_hook( __FILE__, 'uninstall_removedata'); 
```

如果您看到错误调用某项的消息，则 Codex 会非常有助于确保您使用正确的语法。

在这种情况下，它在这里： [http ://codex.wordpress.org/Function_Reference/register_uninstall_hook](http://codex.wordpress.org/Function_Reference/register_uninstall_hook)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:11:11.590

您已安装的某些 WordPress 插件正在触发卸载挂钩并且未正确设置。

你能从错误信息中找到文件的路径吗？

# svn - 忽略SVN中的目录而不影响服务器上的svn：ignore？

> ID：10325240
> 
> 赞同：1
> 
> 时间：2012-04-25T23:30:15.040
> 
> 标签：svn, svnignore

我知道 svn:ignore 属性，但这并不能解决我的问题。

我有一个源目录。我想在其中创建一个名为“build”的目录，我将在其中构建。我不想将“build”放在 svn:ignore 中，因为使用同一存储库的其他人不需要忽略它，我可能希望为此使用不同的名称。

一般的问题是这样的：

给定一个颠覆目录的工作副本，我想创建一个将被 svn 忽略的子目录，而无需修改服务器上的任何内容。如果我可以创建一个目录并在其中粘贴一个空的“.svn_ignore_this_directory”文件或其他东西，那就太棒了。我认为在 git 中这就像只用“。”制作一个 .gitignore 文件。在里面，但也许那是不对的。svn能做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:27:30.897

您有一个[定义本地计算机配置的](http://svnbook.red-bean.com/en/1.7/svn.advanced.confarea.html)`.subversion`文件（此文件的位置取决于您的操作系统）。在该文件中，使用选项配置您希望本地 Subversion 忽略的文件或文件夹。对此文件所做的更改只会影响您的机器。`global-ignores`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:15:29.340

我不确定我是否了解您想要实现的目标，但是：

*   如果您希望 svn 忽略该文件夹，请不要对其进行版本控制。根据您使用的客户端，您可以从提交列表中隐藏未版本控制的文件/文件夹。
*   如果其他人不需要忽略它，他们需要版本化吗？如果这是真的，那么忽略它对您来说毫无意义。

对不起，如果我误解了你。

# asp.net - 具有业务逻辑的简单 asp.net 应用程序的设计模式？

> ID：10325241
> 
> 赞同：1
> 
> 时间：2012-04-25T23:30:23.183
> 
> 标签：asp.net, asp.net-mvc, design-patterns

我是来自 Windows 编程的 asp.net 世界的新手。会话、身份验证、页面生命周期对我来说仍然有些令人困惑的概念。

我目前正在设计一个简单的网站，只是为了学习 asp.net。（非常简单的带有标签的讨论板，有点像 stackoverflow，但简单了 100 倍）

我已经设计了数据访问层，现在开始设计业务逻辑。我的业务逻辑如下所示：

*   后端组件：规范化数据、复杂计算等。我的后端只有 2 个类，总共可能有 15~20 个成员。
*   供前端类访问的 Controller 静态类。

我的问题是：

*   控制器类是必需的吗？我应该直接在 asp.net 页面中实例化每个后端组件吗？
*   谁通常处理会话和身份验证？后端应该处理这个问题，还是应该 由前端的*经理类负责所有用户会话/身份验证？*
*   我理解每次访问页面都会重新实例化网页对象，如果前端控制后端真的是一种不好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:12:21.697

1.  这是 ASP.NET Web 表单还是 MVC？MVC 依赖于控制器来处理请求，但是如果你为 Web 表单构建了一个控制器类，它实际上取决于控制器在做什么以及它的用途。
2.  ASP.NET 使用页面上的 Session 属性或 httpcontext（如在 HttpContext.Current.Session 中）本机处理会话。这取决于您对“会话”的看法，因为这可能有多种含义。Membership API 可以很容易地处理身份验证（在线阅读更多信息）。
3.  理论上这不是一个糟糕的做法，但可能会根据其设计方式实施。某些对象也可以存储在静态级别，如果它们意味着每个请求都存在一次。

# memory - CUDA 合并访问全局内存

> ID：10325244
> 
> 赞同：8
> 
> 时间：2012-04-25T23:30:29.360
> 
> 标签：memory, cuda, copy, coalescing

我已经阅读了 CUDA 编程指南，但我错过了一件事。假设我在全局内存中有 32 位 int 数组，我想通过合并访问将它复制到共享内存。全局数组的索引从 0 到 1024，假设我有 4 个块，每个块有 256 个线程。

```
__shared__ int sData[256]; 
```

何时执行合并访问？

1.

```
sData[threadIdx.x] = gData[threadIdx.x * blockIdx.x+gridDim.x*blockIdx.y]; 
```

全局内存中的地址从 0 复制到 255，每个被 32 个线程在 warp 中复制，所以可以吗？

2.

```
sData[threadIdx.x] = gData[threadIdx.x * blockIdx.x+gridDim.x*blockIdx.y + someIndex]; 
```

如果 someIndex 不是 32 的倍数，它不会合并？地址错位？那是对的吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T05:29:46.480

您最终想要什么取决于您的输入数据是一维数组还是二维数组，以及您的网格和块是一维还是二维。最简单的情况都是一维的：

```
shmem[threadIdx.x] = gmem[blockDim.x * blockIdx.x + threadIdx.x]; 
```

这是合并的。我使用的经验法则是将变化最快的坐标（threadIdx）作为偏移量添加到块偏移量（blockDim * blockIdx）上。最终结果是块中线程之间的索引步长为 1。如果步长变大，那么您将失去合并。

简单的规则（在 Fermi 和更高版本的 GPU 上）是，如果一个 warp 中所有线程的地址落入相同的对齐 128 字节范围内，那么将产生单个内存事务（假设为负载启用缓存，即默认）。如果它们落入两个对齐的 128 字节范围内，则会产生两个内存事务，依此类推。

在 GT2xx 和更早的 GPU 上，它变得更加复杂。但是您可以在编程指南中找到详细信息。

其他示例：

未合并：

```
shmem[threadIdx.x] = gmem[blockDim.x + blockIdx.x * threadIdx.x]; 
```

未合并，但在 GT200 及更高版本上还不错：

```
stride = 2;
shmem[threadIdx.x] = gmem[blockDim.x * blockIdx.x + stride * threadIdx.x]; 
```

完全没有合并：

```
stride = 32;
shmem[threadIdx.x] = gmem[blockDim.x * blockIdx.x + stride * threadIdx.x]; 
```

合并的，2D 网格，1D 块：

```
int elementPitch = blockDim.x * gridDim.x;
shmem[threadIdx.x] = gmem[blockIdx.y * elementPitch + 
                          blockIdx.x * blockDim.x + threadIdx.x]; 
```

合并的 2D 网格和块：

```
int x = blockIdx.x * blockDim.x + threadIdx.x;
int y = blockIdx.y * blockDim.y + threadIdx.y;
int elementPitch = blockDim.x * gridDim.x;
shmem[threadIdx.y * blockDim.x + threadIdx.x] = gmem[y * elementPitch + x]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T03:17:53.340

您在 1 处的索引是错误的（或者故意如此奇怪，看起来是错误的），某些块在每个线程中访问相同的元素，因此无法在这些块中进行合并访问。

**证明：**

例子：

```
Grid = dim(2,2,0)

t(blockIdx.x, blockIdx.y)

//complete block reads at 0
t(0,0) -> sData[threadIdx.x] = gData[0];
//complete block reads at 2
t(0,1) -> sData[threadIdx.x] = gData[2];
//definetly coalesced
t(1,0) -> sData[threadIdx.x] = gData[threadIdx.x];
//not coalesced since 2 is no multiple of a half of the warp size = 16
t(1,1) -> sData[threadIdx.x] = gData[threadIdx.x + 2]; 
```

所以如果一个块被合并，它就是一个“运气”游戏，所以一般来说**没有**

但是合并内存读取规则对较新的 cuda 版本没有以前那么严格。
但是对于兼容性问题，如果可能的话，您应该尝试针对最低 cuda 版本优化内核。

这是一些不错的来源：

[http://mc.stanford.edu/cgi-bin/images/0/0a/M02_4.pdf](http://mc.stanford.edu/cgi-bin/images/0/0a/M02_4.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T23:53:57.973

可以合并访问的规则有些复杂，并且随着时间的推移而变化。每个新的 CUDA 架构在合并方面都更加灵活。我会说一开始不要担心。相反，以最方便的方式进行内存访问，然后查看 CUDA 分析器所说的内容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T03:00:35.087

如果您打算使用一维网格和螺纹几何，您的示例是正确的。我认为您打算使用的索引是`[blockIdx.x*blockDim.x + threadIdx.x]`.

我相信，对于 #1，warp 中的 32 个线程“同时”执行该指令，因此它们的请求是顺序的并与 128B (32 x 4) 对齐，在特斯拉和费米架构中合并。

对于＃2，它有点模糊。如果`someIndex`是 1，那么它不会在一个扭曲中合并所有 32 个请求，但它可能会进行部分合并。我相信 Fermi 设备会将线程 1-31 的访问合并为一个 128B 连续内存段的一部分（并且浪费了前 4B，不需要线程）。我认为特斯拉架构设备会由于未对齐而使其成为未合并的访问，但我不确定。

`someIndex`比如说 8，特斯拉将有 32B 个对齐的地址，费米可能会将它们分组为 32B、64B 和 32B 。但底线是，根据价值`someIndex`和架构，发生的事情是模糊的，不一定是可怕的。

# php - 如何区分 Google Bot 访问和 Bing Bot 访问

> ID：10325245
> 
> 赞同：-2
> 
> 时间：2012-04-25T23:30:38.750
> 
> 标签：php, seo, web-crawler, bing

我计划有一个页面的 2 个版本（A/B）。如果访问来自 Google Bot 访问，则响应应为 A 版本；如果访问来自 Bing Bot 访问，则响应应为 B 版本。我如何知道访问是来自 PHP 中的 Google Bot 还是 Bing Bot？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T23:36:54.807

首先通过访问此处了解机器人的用户代理字符串是什么：[http ://www.robotstxt.org/db.html](http://www.robotstxt.org/db.html)

接下来使用 PHP 检查用户代理：

```
if (strpos($_SERVER['HTTP_USER_AGENT'],"Googlebot")){
    //Show Page A 
}else if(strpos($_SERVER['HTTP_USER_AGENT'],"MSNBOT")){
    //Show Page B
} 
```

但为什么？机器人应该看到人们看到的东西，以便他们可以在搜索引擎上索引该网站。

# html - 带有 CSS 的图像上的标题

> ID：10325250
> 
> 赞同：1
> 
> 时间：2012-04-25T23:31:04.340
> 
> 标签：html, css

`<img>`我正在尝试使用一个对象和两个用 CSS 设置样式的对象来制作带有 CSS 的“meme”外观的字幕图像`<p>`。现在我有一个`<div>`包含 the`<img>`然后是两个`<p>`的。我想要做的是将图片定位在 div 的左上角，然后将其设置`z-index`为 -1，然后以某种方式将两个 p 对象定位在图像上，但相对于 div 的左上角定位.

这样我就可以设置 p 对象的`top: y`和`left: x`值，以便它们相对于 div 的左上角和图像相应地定位。

但是当我尝试`position: relative`为 p 对象设置时，会出现一个问题，即第一个 p 放置正确，但第二个 p 相对于第一个 p 定位，因此即使它位于`top: 0, left: 0`它仍然低于应有的位置。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T23:44:24.967

看看这个jsfiddle：

[http://jsfiddle.net/56J8y/1/](http://jsfiddle.net/56J8y/1/)

相关的 CSS

```
.meme_container {
 position: relative;   
}
.meme_container .top_meme {
    position:absolute;
    top:0;
    left:0;
}
.meme_container .bottom_meme {
    position:absolute;
    bottom:0;
    left:0;
} 
```

​</p>

和html

```
<div class="meme_container">
<img src="https://www.google.com/images/srpr/logo3w.png"/>
<p class="top_meme">This is a caption 1</p>
<p class="bottom_meme">This is a caption 2</p>
</div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:33:00.953

一种方法是使用伪元素，如`:after`和`:before`

例子：

```
img:after {
   content: "Hello, I am the caption";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T23:45:08.437

我认为您在谈论这种情况：

```
<div>
  <img />
  <p class="first">caption1</p>
  <p class="second">caption2</p>
</div> 
```

然后做你想做的事情，你需要将 div 的位置设置为某些东西（相对通常不会影响你的行为，所以它是一个不错的选择）。一旦完成定位绝对可以在里面使用。绝对是指下一个更高位置的元素！！

```
div{position:relative};
p{position:absolute};
p.first{top:10px};
p.second{top:20px}; 
```

# ios - 如何只让 YouTube 视频的音频运行？

> ID：10325251
> 
> 赞同：3
> 
> 时间：2012-04-25T23:31:04.637
> 
> 标签：ios, performance, cocoa-touch, youtube, video-streaming

我遇到了一个相当奇怪的问题。我现在要做的只是获取给定链接的 YouTube 视频的**音频**。我已经尝试了几件事，但它要么不起作用，要么效率不高。

因此，我决定在这里询问更有经验的 iOS 开发人员。提前致谢。

```
@implementation ViewController
@synthesize web;

- (void)embedYouTube:(NSString*)url frame:(CGRect)frame{
        NSString* embedHTML = @"<html><head> <style type=\"text/css\">body {background-color: transparent;color: white;}</style></head><body style=\"margin:0\"><embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" width=\"%0.0f\" height=\"%0.0f\"></embed></body></html>";
        NSString* html = [NSString stringWithFormat:embedHTML, url, frame.size.width, frame.size.height];

        UIWebView *webView =[[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
        [webView loadHTMLString:html baseURL:nil];
        [self.view addSubview:webView];
}

-(IBAction)play{

    [self embedYouTube:@"http://www.youtube.com/watch?v=iw1aT5c1Lus" frame:CGRectMake(0, 0, 320, 480)];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T23:32:31.967

just play the video with your media player, but dont give it a frame, this will play the audio, but not load the image

# django - django - 带有用户时区的日期时间字符串

> ID：10325252
> 
> 赞同：2
> 
> 时间：2012-04-25T23:31:04.963
> 
> 标签：django, timezone

我正在尝试构建一个最终会在 SMS 消息中发送的文本简介。简介包含以 UTC 作为时区的日期时间对象的文本，但需要将文本本地化为用户的时区。我将用户的时区存储在数据库中。

我知道我可以使用 timezone.activate() 和 timezone.deactivate() 来更改当前时区，但我不知道这是否是最好的事情，当我想要的只是打印出日期时间的文本时在用户的本地时区。我不知道更改当前时区是否会产生不必要的系统后果，即使只是很短的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T02:00:11.940

使用 timezone.activate() 激活时区只会影响当前请求，因此真的没有“不需要的系统后果”需要担心。

通过激活中间件中的时区：

```
from django.utils import timezone

class TimezoneMiddleware(object):
    def process_request(self, request):

        if request.user.is_authenticated():
            timezone.activate(request.user.get_profile().timezone) 
```

您将能够通过使用`{{ datatime }}`SMS 模板中的参数来呈现用户的本地时间。

# mysql - SELECT 命令拒绝用户

> ID：10325255
> 
> 赞同：0
> 
> 时间：2012-04-25T23:31:26.883
> 
> 标签：mysql

我得到一个有趣的 MySQL 错误。这是发生了什么：

询问：

```
SELECT COUNT(id) AS mycount FROM ip_protection.hits WHERE datetime_created>DATE_SUB(NOW(), INTERVAL 10 MINUTE) AND ip='166.248.6.19' 
```

错误：

```
SELECT command denied to user 'goatpric_db'@'166.248.6.19' for table 'hits' 
```

特权：

```
GRANT ALL PRIVILEGES ON `goatpric\_ip\_protection`.* TO 'goatpric_db'@'%' 
```

'hits' 是 ip_protection 中的一个表。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:37:52.617

您到处都在使用错误的数据库名称。使用正确的数据库，根据您的问题是`ip_protection`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-09T21:52:19.070

添加`Use Procedure Bodies = false;`到连接字符串。

例如：

```
server=localhost; user id=dbuser; password=password; database=dbname; Use Procedure Bodies=false; 
```

# php - 如何为数组的所有元素分配相同的值

> ID：10325257
> 
> 赞同：0
> 
> 时间：2012-04-25T23:31:43.603
> 
> 标签：php, file-type

对不起，我不知道如何准确地表达这个问题。我有一个应用程序，您可以在其中指定对某些用户隐藏的文件类型，如下所示：

```
$config['app']['custom_hidden_files']['users']['108'] = array("*.ftpquota", "*.FTPQUOTA"); 
```

上面的行将对用户#108 隐藏所有 .ftpquota 文件。我正在尝试对所有用户隐藏文件类型。我试过了：

```
$config['app']['custom_hidden_files']['users'][''] = array("*.ftpquota", "*.FTPQUOTA");
$config['app']['custom_hidden_files']['users'][] = array("*.ftpquota", "*.FTPQUOTA");
$config['app']['custom_hidden_files']['users']['*'] = array("*.ftpquota", "*.FTPQUOTA");
$config['app']['custom_hidden_files']['users'][*] = array("*.ftpquota", "*.FTPQUOTA");
$config['app']['custom_hidden_files']['users'] = array("*.ftpquota", "*.FTPQUOTA"); 
```

有人知道我如何指定所有用户吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T23:38:03.993

由于您不知道数组的所有索引是什么，您可以遍历所有值并使用[foreach](http://www.php.net/foreach)将它们全部设置为所需的值。

```
foreach($config['app']['custom_hidden_files']['users'] as $index => $value)
{
    $config['app']['custom_hidden_files']['users'][$index] = Array("*.ftpquota", "*.FTPQUOTA");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:36:11.373

```
 foreach ($config['app']['custom_hidden_files']['users'] as $user)
 {
    $user=array("*.ftpquota", "*.FTPQUOTA");
 } 
```

# java - 当运行带有额外条件的分页查询时，Hibernate 映射返回多个相同的对象

> ID：10325259
> 
> 赞同：1
> 
> 时间：2012-04-25T23:31:46.797
> 
> 标签：java, hibernate, jpa

所以我一直在做这件事，而且似乎无法让它正常工作。

当我使用**HibernateUtil.get(clazz, pkId)**方法时，事情似乎工作正常，但是当我尝试使用**HibernateUtil.pagedQuery(clazz, criteria, start, stop) 时，**我得到了多个相同的对象返回。

例如，如果有 3 名员工分配给角色 1，那么运行...

```
Role role = HibernateUtil.get(Role.class, new Integer(1)); 
```

...按预期工作。但是，如果我跑...

```
List<Criterion> c = new ArrayList();
c.add(Restrictions.eq("roleTypeSeqNo", new Integer(1)));
List<Role> roles = (List<Role>) phi.util.hibernate.HibernateUtil.pagedQuery(Role.class, c, 0, 50); 
```

... 返回一个包含 3 个相同角色的列表。所有这些都代表角色 1。

如果有人能引导我走上正确的道路，我将不胜感激。

提前致谢！

这是我的课程的缩写版本

```
@Entity
@Table(name="ASSIGNMENTS")
public class Assignment implements Serializable {
  @EmbeddedId
  private AssignmentPK pk;
  // After coming across many errors I finally caved and reverted roleTypeSeqNo back to just an Integer.
  private Integer roleTypeSeqNo;
  private String status;
  private String location;
}

@Embeddable
public class AssignmentPK implements Serializable {
  @ManyToOne
  @JoinColumn(name="EMPLID")
  private Employee employee;
  @Column(name="PRIORITY_NO")
  private String priorityNo;
}

@Entity
public class Employee implements Serializable {
  @Id
  private Integer emplId;
  private String name;
}

@Entity
public class Role implements Serializable {
  @Id
  private Integer roleTypeSeqNo;
  private Integer reportsToRole;
  @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER, mappedBy="roleTypeSeqNo")
  @JoinTable(
      name="ASSIGNMENTS"
      , joinColumns={@JoinColumn(name="ROLE_TYPE_SEQ_NO")}
      , inverseJoinColumns={
          @JoinColumn(name="EMPLID"),
          @JoinColumn(name="PRIORITY_NO")
      }
  )
  private List<Assignment> assignments;
}

public class HibernateUtil {
    public static Object get(Class clazz, Serializable pkId) {
        Session session = getSession();
        Transaction transaction = session.beginTransaction();

        Object obj = session.get(clazz, pkId);

        transaction.commit();
        session.close();

        return obj;
    }

    public static List pagedQuery(Class clazz, List<Criterion> criterion, Integer start, Integer size){
        Session session = getSession();
        try {
            Transaction transaction = session.beginTransaction();

            DetachedCriteria dCriteria = DetachedCriteria.forClass(clazz);
            for(Criterion c : criterion){
                dCriteria.add(c);
            }
            dCriteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY);
            dCriteria.setProjection(Projections.id());

            Criteria criteria=session.createCriteria(clazz);
            criteria.add(Subqueries.propertyIn("id", dCriteria));
            criteria.setFirstResult(start);
            criteria.setMaxResults(size);

            List records = criteria.list();

            transaction.commit();

            return records;
        } catch (Exception e) {
            Logger.getLogger("HibernateUtil").log(Level.SEVERE, "There was an EXCEPTION THROWN!!!", e);
            return null;
        } finally  {
            session.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T09:50:30.803

```
dCriteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY); 
```

应该是主要标准

```
criteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY); 
```

那里也不需要子查询。以下就够了

```
 Criteria criteria = session.createCriteria(clazz);

    for(Criterion c : criterions){
        criteria.add(c);
    }

    criteria.setFirstResult(start);
    criteria.setMaxResults(size);

    List records = criteria.list(); 
```

# spring - Map UnsupportedMediaTypeException using ExceptionMapper

> ID：10325262
> 
> 赞同：1
> 
> 时间：2012-04-25T23:32:14.707
> 
> 标签：spring, rest, jax-rs

Is there a place where it is clearly documented that I cannot map UnsupportedMediaTypeException (because it's a rest easy exception and not custom application exception) using the javax.ws.rs.ext.ExceptionMapper?

I want to prove that to my client. Or another thing I would like to do is map this exception to a Response that can be fetched at the client to show the error. Right now when this exception is thrown it provides no information to the client as the application ends abruptly.

Any help would be appreciated.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:12:44.373

您可以映射此异常。为什么不？你有错误吗？

这段代码应该可以完成这项工作

```
@Provider
public class EJBExceptionMapper implements ExceptionMapper<org.jboss.resteasy.spi.UnsupportedMediaTypeException>{

  Response toResponse(org.jboss.resteasy.spi.UnsupportedMediaTypeException exception) {
    return Response.status(415).build();
  }

} 
```

不要忘记在 Spring 配置文件中声明该提供程序。

如果您想向客户端创建类提供更多信息

```
@XmlRootElement
public class Error{
   private String message;
   //getter and setter for message field
} 
```

然后你可以

```
@Provider
public class EJBExceptionMapper implements ExceptionMapper<org.jboss.resteasy.spi.UnsupportedMediaTypeException>{

  Response toResponse(org.jboss.resteasy.spi.UnsupportedMediaTypeException exception) {
    Error error = new Error();
    error.setMessage("Whatever message you want to send to user");
    return Response.entity(error).status(415).build();
  }

} 
```

如果您不想使用错误实体，只需传递一个字符串即可`Response.entity()`调用。

如果您想捕获应用程序中抛出的任何内容，请创建通用异常映射器：

```
@Provider
public class ThrowableMapper implements ExceptionMapper<Throwable> {

    public Response toResponse(Throwable t) {

        ErrorDTO errorDTO = new ErrorDTO(code);
        return Response.status(500).build();
    }
} 
```

# c++ - using cin.get() function

> ID：10325265
> 
> 赞同：0
> 
> 时间：2012-04-25T23:32:19.643
> 
> 标签：c++, function, get

```
char arr[100];
cin.get(arr,100); 
```

1.  Is this safe? Will the null-character be appended at the end even if I type more than 100 chars? or should I use `cin.get(arr,99)`?
2.  When I type ENTER, is the end-of-line character part of the array or not?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:48:49.237

您的两个问题的答案都可以在[这里](http://en.cppreference.com/w/cpp/io/basic_istream/get)找到，但重申一下：

1.  该`get`方法最多读取`n - 1`字符。这意味着该方法需要*缓冲区*的大小而不是要读取的字符数。此方法自动在末尾附加一个空字符。

2.  换行符*不会*被提取或存储在数组中。

您可能还需要考虑使用[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)可以与`std::string`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:50:24.800

> 1）这安全吗？我的意思是最后会附加空字符。即使我输入了超过 100 个字符。或者它必须是 cin.get(arr,99)。

取自[这里](http://en.cppreference.com/w/cpp/io/basic_istream/get)。

您正在使用的签名`get`如下所示：

`basic_istream& get( char_type* s, std::streamsize count );`

它将`count - 1`从流中读取最多字符（在您的情况下为 99）或直到分隔字符，默认情况下为`\n`. 因此，如果您键入的字符超过 100 个，则调用`get`将读取其中的 99 个字符，然后`\0`在末尾附加空终止符。

> 2）当我输入 ENTER 时，也会传递一个换行符。所以这个字符是否真的是数组的一部分。

不，`get`一直读到定界字符，所以如果按 ENTER，`\n`将留在流中作为下一个要读取的字符。

建议：请使用我链接到的站点以了解这些功能的工作原理，以及`std::string`是否`std::getline`使用 C++ 编码。

# .net - How to use Email and .NET to conduct RESTful interactions

> ID：10325267
> 
> 赞同：0
> 
> 时间：2012-04-25T23:32:26.553
> 
> 标签：.net, asp.net-mvc-3, email

I'm refactoring an email-based order entry system where a WordPress-based order form generates an email that my .NET/IIS assembly parses and imports to my db. Currently, it's just one-way and works 95% of the time.

5% of the time, the form submission had invalid data and my boss's secretary (Sally) gets an email alerting her to the fact that a given transaction needs her attention. She fires up her browser and navigates to the site's admin page where she works her magic and updates are committed.

What Sally wants instead, is to be able to simply hit reply; edit a couple lines in the email body; and update the db without having to use her browser.

I'm looking for examples where this pattern (email-based updates) is explored as an alternative to conventional form's based interactions.

thx

# ruby-on-rails - undefined method `my_teas_path' for #<# :0xa578cf8>

> ID：10325271
> 
> 赞同：0
> 
> 时间：2012-04-25T23:32:49.957
> 
> 标签：ruby-on-rails, form-for

My current goal in my first rails project is to have a button that will create a `@my_tea` using the attributes of a `@tea` (show page). This is the error I am getting:

> 'undefined method `my_teas_path' for #<#:0xa578cf8>

I have tried having the form in a _new partial inside my_teas/ and inside teas/_add_tea both have given me the same error. Anyway here is my code as it stands. View:

```
<%= form_for([@user, @my_tea]) do |f| %>
    <%= f.hidden_field :name, :value => @tea.name %>
    <%= f.hidden_field :tea_type, :value => @tea.tea_type %>
    <%= f.hidden_field :store, :value => @tea.store %>
    <%= f.hidden_field :user_id, :value => current_user.id %>

    <%= fields_for [@user, @tea_relationship] do |r| %>
        <%= r.hidden_field :tea_id, :value => @tea.id %>
    <% end %>

<%= f.submit "Add Tea", class: "btn btn-large btn-primary" %>
<% end %> 
```

my_tea controller

```
def new
  @my_tea = MyTea.new
end

def show
  @my_tea = MyTea.find(params[:id])
end

def create
  @my_tea = MyTea.new(params[:my_tea])
  if @my_tea.save
    flash[:success] = "Tea added to your teas!"
  else
    redirect_to user_path
  end
end 
```

Teas controller:

```
def show
    @tea = Tea.find(params[:id])    
    @my_tea = MyTea.new
    @tea_relationship = TeaRelationship.new
end 
```

Routes

```
resources :users do
            resources :my_teas
    end
    resources :teas 
```

Models:

```
class User < ActiveRecord::Base
has_many :my_teas, :dependent => :destroy
has_many :tea_relationships, :dependent => :destroy

class MyTea < ActiveRecord::Base
belongs_to :user

class TeaRelationship < ActiveRecord::Base
  belongs_to :user, class_name: "User"
end 
```

Tea model doesn't belong to anything.

Please help rails community your my only hope :p

Update changing my form to this

```
<%= form_for([@user, @my_tea]) do |f| %>
    <%= f.hidden_field :name, :value => @tea.name %>
    <%= f.hidden_field :tea_type, :value => @tea.tea_type %>
    <%= f.hidden_field :store, :value => @tea.store %>
    <%= f.hidden_field :user_id, :value => current_user.id %>

    <%= fields_for @tea_relationship do |r| %>
        <%= r.hidden_field :tea_id, :value => @tea.id %>
    <% end %>

<%= f.submit "Add Tea", class: "btn btn-large btn-primary" %>
<% end %> 
```

it works and the @my_tea submits but the @tea_relationship doesn't.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:44:42.377

因此，从事物的外观和一瞥中，您似乎正在尝试做一些嵌套形式。看起来你也有一个多对多的关系（tea.rb <=> tea_relationship.rb <=> my_tea.rb）确保你的模型设置正确。

[多对多](http://railscasts.com/episodes/47-two-many-to-many)

我不确定你为什么要这样做`[@user, @my_tea]`

[嵌套表格](http://railscasts.com/episodes/196-nested-model-form-part-1)

应该更符合

```
<%= form_for @my_tea, :url => posting_path do |f| %>    
    <%= f.simple_fields_for :teas, @my_tea.teas.build do |x| %>
            ...
    <%end%>
    ...
<%end%> 
```

希望有帮助！

# ruby - 为什么我的程序找不到我要打开的文本文件？

> ID：10325276
> 
> 赞同：-3
> 
> 时间：2012-04-25T23:33:23.550
> 
> 标签：ruby

我正在为 Ruby 中的 CS 作业编写此代码。我刚开始使用 Ruby，所以我不太了解它，但我不断从这段代码中得到一个 no method 错误，如下所示：

```
V:\CS 300 RubyAssignment\lib\rubyAssignment.rb:13:in `categorize': undefined method `line' for #&lt;File:ruby1.txt (closed)&gt; (NoMethodError)
    from V:\CS 300 RubyAssignment\lib\rubyAssignment.rb:11:in `open'
    from V:\CS 300 RubyAssignment\lib\rubyAssignment.rb:11:in `categorize'
    from V:\CS 300 RubyAssignment\lib\rubyAssignment.rb:30 
```

代码如下，但我感觉我的文本文件放错了地方。我使用 NetBeans Ruby 插件，但我不知道我的文本文件是否应该在 netbeans 的项目源文件夹、测试文件夹或库文件夹中？可能就这么简单，有什么想法吗？

```
# This program reads a file line by line,
# separating lines by writing into certain text files.
# PPQ - Pangrams, Palindromes, and Quotes

class PPQ
  def categorize
    file_pangram = File.new('pangram.txt', 'w')
    file_palindrome = File.new('palindrome.txt', 'w')
    file_quotes = File.new('quotes.txt','w')

    File.open('ruby1.txt','r') do |file|
      while line = file.gets
        if(file.line.reverse == file.line)
          file_palindrome.write line
          if(file.line.contains('a'&&'b'&&'c'&&'d'&&'e'&&'f'&&'g'&&'h'&&'i'&&'j'&&'k'&&'l'&&'m'&&'n'&&'o'&&'p'&&'q'&&'r'&&'s'&&'t'&&'u'&&'v'&&'w'&&'x'&&'y'&&'z'))
            file_pangram.write "file.line"
          else
            file_quotes.write "file.line"
          end
        end
      end
      file.close
      file_pangram.close
      file_palindrome.close
      file_quotes.close
    end
  end
end
my_ruby_assignment = PPQ.new
my_ruby_assignment.categorize 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:43:41.367

线索在错误信息中！

`*undefined method* line`

在您的 while 循环中，您正在从`file`via读取一行`gets`，然后将其存储在`line`. 这段代码：

```
if(file.line.reverse == file.line) 
```

因此是不正确的——你不需要`file.`前缀！Ruby 认为您正在尝试调用它没有`line`的对象的方法。`file`这就是为什么它给你它所做的错误......</p>

# session - php/apache 垃圾回收会删除会话文件吗？

> ID：10325277
> 
> 赞同：1
> 
> 时间：2012-04-25T23:33:39.220
> 
> 标签：session, garbage-collection

我将 php.ini 中的会话文件设置为在一个月内到期（实际上它们在浏览器中保存了 30 天），但是在我重新打开一个页面的几个小时后，会话 cookie 仍然存在（在浏览器中）但是数据在会话消失了。PHP 是否正在删除会话文件？我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:35:38.097

好的，没关系的答案是[session.gc_maxlifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)

# physics - 获得将物体停止在该位置所需的恒定减速

> ID：10325279
> 
> 赞同：1
> 
> 时间：2012-04-25T23:34:11.343
> 
> 标签：physics, acceleration

我希望一个物体平稳地停在指定的点。我有`V0`对象的初始速度 、 结束速度（设置为 0）、`V1`以及`d`到达目的地所需的距离 。`V1`并`V0`以每帧的弧度为单位，`d`也以弧度为单位。

我尝试使用以下公式：

```
a = (V0*V0 - V1*V1) / (2.0 * d); 
```

但它似乎总是超出目标。

编辑：本质上，我有一个以初始速度开始旋转的轮子`V0`。在停在指定位置之前，车轮必须进行一定次数的旋转。距离`d`是执行指定数量的旋转并在指定位置停止所需的弧度。速度是每帧的弧度数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:42:21.533

我们现在有足够的信息进行有根据的猜测。

该公式是正确的，但仅适用于迭代时间非常短的理想情况。我的猜测是，在你的循环中，你在速度之前更新位置，这样在那个时间段内，车轮可以以不减速度前进，并且你过冲。（如果你在位置之前更新速度，你会下冲。）

您可以缩短帧，这将使过冲不那么严重，或者您可以修改公式以消除它：

a = (V [0] *V [0] ) / (2.0 * d - V [0] *t [delta] );

其中 t [delta]是单帧的时间长度。（我假设 V [1] =0。）

# grails - GORM：在刷新之前保存瞬态对象

> ID：10325286
> 
> 赞同：1
> 
> 时间：2012-04-25T23:35:33.503
> 
> 标签：grails, grails-orm, transient

我正在将 SpringSecurity 插件与应用程序集成。为此，我安装了插件并运行了 s2-quickstart 脚本，该脚本创建了三个域类：`SecUser`、`SecRole`和`SecUserSecRole`以及登录/注销控制器。

由于我已经有一个现有的 User 域类并想保留它，所以我修改了 User 以扩展 SecUser 并从 User 中删除了用户名和密码的重叠字段。此外，我还添加`tablePerHierarchy false`了 User 和 SecUser 映射部分。

在 BootStrap 中，我正在尝试创建一个管理员用户以在启动时存在。为此，我创建了一个新`SecRole`对象 adminRole，其权限设置为 ROLE_ADMIN。然后，我创建一个新的 User 对象并通过以下方式检查它是否包含管理员角色

```
def springSecurityService
def init {
    def adminUser = User.findByUsername('admin') ?: new User(
        username:'admin',
        password:'adminUser',
        userType:'Admin',
        enabled:true    
    ).save(failOnError:true)

    if (!adminUser.authorities.contains(adminRole))
        SecUserSecRole.create adminUser, adminRole, true

} 
```

我的问题是，无论 adminUser 是否被声明为 User 或 SecUser 实例，我都会不断收到瞬态实例异常。由于 userType 有一个空白约束：false，如果我在创建 User 实例时注释掉 userType 字段，我会得到一个异常，指出 null 不是 userType 的有效设置。当我包含它时，我得到了瞬态对象异常：**对象引用了一个未保存的瞬态实例 - 在刷新之前保存瞬态实例： books4africa.SecUser**，所以我知道我正在通过所有用户验证设置。

是什么导致在这种情况下无法保存有效的用户对象？

**编辑**

此问题的解决方案是删除现有的开发数据库文件并重新初始化应用程序。我的猜测是数据库和 Spring Security 与原始数据库之间存在某种冲突，因此使用新数据库重新启动应用程序解决了这个问题。

由于以下答案都没有解决确切的问题，因此在这种情况下我不会接受，但感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:21:18.143

您没有说瞬态实例是什么类型（用户或角色）。当您创建管理员角色时，您是否在尝试为新管理员用户提供此角色之前保存它？我在上面的代码中看不到那部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:23:37.350

对我来说，这似乎是域或创建它们实例的方式的问题。

你说：

> 我修改了 User 以扩展 SecUser 并从 User 中删除了用户名和密码的重叠字段。另外，我在 User 和 SecUser 映射部分都添加了 tablePerHierarchy false。

但也许你没有告诉插件你这样做了。请查看[有关域类的文档](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/4%20Required%20and%20Optional%20Domain%20Classes.html)。要使用您自己的域，您必须配置 SpringSecurity 插件（文档包含您需要的所有信息）。因此，例如，如果您想使用自己的*用户*类。你把这样的东西放在你的配置上：

```
grails.plugins.springsecurity.userLookup.userDomainClassName = 'your.package.NameOfYourClass' 
```

这将告诉插件它必须为用户使用的类是`NameOfYourClass`.

使用默认类很重要，例如，生成的快速入门是正确使用自定义用户和角色类的最简单方法（只需将每个属性复制到您自己的类中，并根据需要重命名）。

并查看[教程](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/23%20Tutorials.html)，了解如何正确保存用户和角色。

# ruby-on-rails - Paperclip change images path after upgrade to rails 3.2

> ID：10325288
> 
> 赞同：14
> 
> 时间：2012-04-25T23:35:38.940
> 
> 标签：ruby-on-rails, ruby, paperclip

i have a problem with paperclip (3.0.2) after upgrade to rails 3.2 (from 3.0.10).

Originally the path of one image was:

```
"http://localhost:3000/system/photos/94/small/AudiLogo.jpg?1335392139" 
```

and after the upgrade this kind of images never show again!, but if i upload a new picture this will display fine on page, but the new path that use is:

```
"localhost:3000/system/products/photos/000/000/094/smal/AudiLogo.jpg?1335392139" 
```

Whats happend in the upgrade ? There's any solution for convert the olds path to new ?

I try with "rake paperclip:refresh:missing_styles" but dosen't works.

The paperclip config section it's this.

```
has_attached_file :photo,
        :processors => lambda { |a|
                        if a.external?
                                [:thumbnail]
                        else
                                [:thumbnail,:watermark]
                        end
                        },
        :styles => {
                :slider => { :geometry => "350x312#", :format => :jpg, :watermark_path => "#{Rails.root}/public/images/watermark.png", :position => "NorthEast" },
                :small => "100x50>",
                :medium => "200>x200",
                :thumb => "100x100>",
                :big => { :geometry => "640x480>", :format => :jpg, :watermark_path => "#{Rails.root}/public/images/watermark.png" }
                },
        :default_url => "/images/noimage.png" 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T19:54:17.233

我有同样的问题。您可以通过创建一个像**config/initializers/paperclip.rb**这样的文件来解决这个问题，然后把

```
Paperclip::Attachment.default_options.merge!(
    :path => ":rails_root/public/system/:attachment/:id/:style/:basename.:extension", 
    :url => "/system/:attachment/:id/:style/:basename.:extension"
)
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T16:08:52.617

我刚刚进行了类似的升级并以这种方式解决了我的问题：

```
 has_attached_file :image,
    :url => "/images/photos/:id/:basename_:style.:extension",
    :path => ":rails_root/public/images/photos/:id/:basename_:style.:extension", 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:59:16.617

假设原始路径和当前路径之间的“小”与“小”差异是拼写错误，另一个明显的变化是在“/photos/”之后添加了两个数字段。

```
".../photos/000/000/094/smal/AudiLogo.jpg?1335392139" 
```

我怀疑这是来自用于路径的 id_partition。您是否在其他地方设置了不同的默认路径插值？

查看 Paperclip 的代码，我看到了负责此问题的[id_partition 方法](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/interpolations.rb)，但仍未找到任何指向默认行为更改方向的文档。我没有遵循 gem 中的代码来确定它是错误还是未记录的更改。

# c# - How to factorize an operator?

> ID：10325289
> 
> 赞同：0
> 
> 时间：2012-04-25T23:35:50.690
> 
> 标签：c#, refactoring, operators

This may be very simple, but it's late in the night... I have two methods:

```
public IQueryable<Post> GetNotSticky()
{
   return Get().Where(p => p.Type != PostType.Sticky);
} 
```

And the inverse

```
public IQueryable<Post> GetSticky()
{
   return Get().Where(p => p.Type == PostType.Sticky);
} 
```

As you can see, the operator is the only difference. How to factorize this DRY violation into a nice common method? It feels simple, but right now the solution eludes me.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T23:40:38.080

```
public IQueryable<Post> GetWithSticky(bool isSticky)
{
   return Get().Where(p => (p.Type == PostType.Sticky) == isSticky);
} 
```

# html - issue loading mobile widgets with dojo mobile and phonegap

> ID：10325290
> 
> 赞同：0
> 
> 时间：2012-04-25T23:35:52.730
> 
> 标签：html, cordova, dojo

I developed a form that should be running on an android device using phonegap and dojo mobile html5 so the page is runing with no issues but when I tested the page on my mobile I encountred some errors.

```
<div id="settings" dojoType="dojox.mobile.View" selected="true">

    <!-- a sample heading -->
    <h1 dojoType="dojox.mobile.Heading">Authentification</h1>
    <form id="loginForm">
        <div class="field-title">Login</div>
        <div class="fieldset">
            <div class="field-row">
                <span>Username*</span><input dojoType="dojox.mobile.app.TextBox" />
            </div>
            <div class="field-row">
                <span>Password*</span> <input type=password name="pass"
                    dojoType="dojox.mobile.app.TextBox"> </input>

            </div>
            <a class="link" href="#">New account</a><a class="link"href="#">Forgot your password?</a>
            <div style="text-align: center;">

            <button dojotype="dojox.mobile.Button" class="mblButton greyBtn baseBtn normalBtn">Connect</button>
                <button id="resetBtn" type=reset dojotype="dojox.mobile.Button"
                    class="mblButton greyBtn baseBtn normalBtn">Reset</button>
            </div>
    </form>
</div> 
```

> 04-26 00:11:28.909: D/PhoneGapLog(3029): failed loading dojo/../dojox/mobile/app/TextBox.js with error: Error: Could not load 'dojox.mobile.app._Widget'; last tried '../dojox/mobile/app/_Widget.js'
> 
> 04-26 00:11:28.909: D/PhoneGapLog(3029): : Line -2167 : failed loading dojo/../dojox/mobile/app/TextBox.js with error: Error: Could not load 'dojox.mobile.app._Widget'; last tried '../dojox/mobile/app/_Widget.js
> 
> 04-26 00:11:28.909: E/Web Console(3029): failed loading dojo/../dojox/mobile/app/TextBox.js with error: Error: Could not load 'dojox.mobile.app._Widget'; last tried '../dojox/mobile/app/_Widget.js' at :-2167

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:34:04.640

您遇到了这个问题：

[https://code.google.com/p/android/issues/detail?id=24067](https://code.google.com/p/android/issues/detail?id=24067)

最好的办法是在构建 Android 应用程序时将 Dojo Mobile 完全构建到单个文件中。

# c# - Rank System in Skype Application

> ID：10325291
> 
> 赞同：0
> 
> 时间：2012-04-25T23:36:06.217
> 
> 标签：c#, skype, bots, skype4com

So as some of you may know, I'm currently working on a Skype "bot" sort of application. As of now i have a lot of commands implemented and it's working wonderfully. I'm just trying to figure out how I can add a sort of "rank" system, and limit certain commands to specific users. What method does SKYPE4COM offer that I can use to check for a user's actual Skype username? Please help, S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:00:47.743

有`IUser.Handle`（来自 Skype4COM 文档）：

> 此命令查询/设置用户的 Skypename。

# php - How to loop through all values in the array

> ID：10325294
> 
> 赞同：-1
> 
> 时间：2012-04-25T23:36:18.030
> 
> 标签：php, javascript, loops

I am not very good with loops but I want to loop through every one of the session file values in the array. How is the foreach loop written in this situation and does it go in the php script or in the javascript code?

Below is the full php script where it uploads a file:

```
<?php

session_start();

$result = 0;
$errors = array ();
$dirImage = "ImageFiles/";

if (isset ( $_FILES ['fileImage'] ) && $_FILES ["fileImage"] ["error"] == UPLOAD_ERR_OK) {

    $fileName = $_FILES ['fileImage'] ['name'];

    $fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
    $fileExt = strtolower ( $fileExt );

    $fileDst = $dirImage . DIRECTORY_SEPARATOR . $fileName;
    $filePrifix = basename ( $fileName, "." . $fileExt );
    $i = 0;
    while ( file_exists ( $fileDst ) ) {
        $i ++;
        $fileDst = $dirImage . DIRECTORY_SEPARATOR . $filePrifix . "_" . $i . "." . $fileExt;

    }
    // Move the file

    if (count ( $errors ) == 0) {
        if (move_uploaded_file ( $fileTemp, $fileDst )) {
            $result = 1;

        }
    }

}

$_SESSION ['fileImage'][] = $_FILES ['fileImage']['name'];

?>

  <script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result;?>);</script> 
```

Below is the javascript function which contains the json code:

```
function stopImageUpload(success){

      var imageNameArray = <?php echo json_encode(isset($_SESSION ['fileImage']) ? $_SESSION ['fileImage'] : null); ?>;
      var result = '';

      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
            for (imagename in imageNameArray)
    {
         $('.listImage').append(imagename + '<br/>');

     }

      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

      $(sourceImageForm).find('.imagef1_upload_process').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_cancel').css('visibility','hidden');

      $(".sbtnimage").removeAttr("disabled");
      $(".sbtnvideo").removeAttr("disabled");
      $(".sbtnaudio").removeAttr("disabled");

      return true;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:27:04.560

```
$_SESSION ['fileImage'][] = $_FILES ['fileImage']['name']; 
```

把它放在 PHP 代码末尾附近的某个地方。

```
var imageNameArray = <?php echo json_encode(isset($_SESSION ['fileImage']) ? $_SESSION ['fileImage'] : null); ?>; 
```

将您的 Javascript 更改`imagename`为此。

然后做一个循环：

```
for (imagename in imageNameArray)
{
    if (success == 1)
    {
         result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
         $('.listImage').append(imagename + '<br/>');
      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }
} 
```

# javascript - Want to add Autoplay setting to Responsive Image Gallery.

> ID：10325304
> 
> 赞同：1
> 
> 时间：2012-04-25T23:37:35.197
> 
> 标签：javascript, jquery, html, slider

I have added this image gallery [http://tympanus.net/codrops/2011/09/20/responsive-image-gallery/](http://tympanus.net/codrops/2011/09/20/responsive-image-gallery/) to a site I am working on. Works flawlessly, the only thing is that there is no option to autoplay the slideshow.

[http://www.debellephotography.com/debelleslide/](http://www.debellephotography.com/debelleslide/)

Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:12:02.247

我在这里和那里拼凑起来，想出了一个办法，谢谢你的帮助。

```
var t;
var timer_is_on=0;

function timedCount()
{
$('.rg-image-nav-next').click()
t=setTimeout("timedCount()",1000);
}

function doTimer()
{
if (!timer_is_on)
{
timer_is_on=1;
timedCount(1000);
}
}

function stopCount()
{
clearTimeout(t);
timer_is_on=0;
} 
```

timeCount 函数每 1 秒激活下一个图像。doTimer 函数防止定时器被多次激活。stopCount 函数允许暂停幻灯片。

然后我添加了两个按钮来暂停和播放：

```
<div class="playbutton"><a href="javascript:doTimer();"><img src="images/play.png" width="24" height="24" alt="Play"></a></div>
<div class="pausebutton"><a href="javascript:stopCount();"><img src="images/pause.png" width="24" height="24" alt="Pause"></a></div> 
```

您可以在此处看到它的工作原理：[自动播放示例](http://debellephotography.com/debelleslide/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:55:12.190

您想创建一个新按钮来触发 setInterval 函数以循环播放幻灯片。它看起来像这样：

```
<button onclick="play()">slideshow</button>

function play() {
    setInterval(function() {
       // Do the code that triggers next image
    }, 1000);
} 
```

数字 1000 是正在运行的函数之间的毫秒数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T00:14:00.890

尝试这个

```
var current=1;
    function autoAdv()
    {
        if(current==-1) return false;

        $('.es-carousel a').eq(current%$('.es-carousel a').length).trigger('click',[true]);    // [true] will be passed as the contentScroll parameter of the click function
        current++;
        $('.rg-image-nav-prev').eq(current%$('.rg-image-nav-prev').length).trigger('click',[true]);    // [true] will be passed as the contentScroll parameter of the click function
        current++;
    }

    // The number of seconds that the slider will auto-advance in:

    var changeEvery = 10;

    var itvl = setInterval(function(){autoAdv()},changeEvery*1000);​ 
```

# jquery - 为什么没有将数据返回到 getJSON 成功处理程序？

> ID：10325310
> 
> 赞同：0
> 
> 时间：2012-04-25T23:38:12.433
> 
> 标签：jquery, json, codeigniter

我正在调用`getJSON`并遍历这样的结果，一切都很好：

```
$.getJSON( base_url + 'search/drill_down',{
        nextSelectName: nextSelectName,
        thisSelectName: thisSelectName,
        itemId: itemId
    }, function( r ) {
        $.each( r.items, function( k, v ) {
            //do stuff
        });
}); 
```

现在在某种情况下，我需要返回一些 HTML 数据，但我仍然需要 JSON 作为原始条件，所以我想我只是将我的 HTML 编码为 JSON，但数据永远不会返回！原始代码仍然可以正常工作，只有当我尝试返回编码为 JSON 的 HTML 时，事情才会崩溃。

```
$.getJSON( base_url + 'search/drill_down',{
        nextSelectName: nextSelectName,
        thisSelectName: thisSelectName,
        itemId: itemId
    }, function( r ) {

        alert('working!'); // Not hitting this!

        if(r.tabs){
            $.each( r.tabs, function( k, v ) {
            var html = v[ 'html' ];
                return $('#content').html(html); // No need to continue, there is only one HTML string and no items.
            });
        }

        $.each( r.items, function( k, v ) { 
            //do stuff
        });
}); 
```

我在服务器上有一个断点（使用 CodeIgniter），那里的一切看起来都很好。我检查了我编码为 JSON 的 HTML，它是有效的 JSON。为什么我的服务器生成的 JSON 没有返回到`getJSON`成功处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:57:19.840

唯一的解释是请求是有缺陷的，原因可能很多。一个人可能在错误的地方请求。检查使用

```
console.log(base_url + 'search/drill_down'); 
```

# .net - WinForms UserControl 版本的 Form.Closing

> ID：10325312
> 
> 赞同：0
> 
> 时间：2012-04-25T23:38:32.217
> 
> 标签：.net, vb.net, winforms, controls

我有一个带有子表单的 MDI 表单，我想将其重构为带有包含子控件的选项卡控件的单个表单，以便摆脱[MDI 的笨拙](https://stackoverflow.com/questions/8765088/maximize-mdi-child-form#comment10925195_8765088)。

在考虑将子窗体转换为子控件（或用户控件）时，我确实看到我会丢失`FormClosing`某些子窗体使用的事件。

我可以重写`Dispose`来处理一些功能，但在某些情况下我想取消关闭事件。另外，我希望在控件关闭之前调用此事件，即使它所在的窗体没有关闭，所以将控件连接到窗体的关闭事件不是一种选择。

是否有一种干净的方法可以`FormClosing`在控件类中重现事件，或者当我将子表单添加到选项卡控件时，我应该将它们保留为表单吗？

**编辑：** 为了更清楚一点，我正在寻找一种方法来`ControlClosing`在用户控件关闭之前（不一定是在主机表单关闭时）提出类似的内容，以便提示用户是否希望将更改保存到他们的数据，并允许用户选择标准是/否/取消。

我不希望覆盖托管控件的表单的关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:44:13.513

尝试[`ParentChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.parentchanged.aspx)，或者可能[`VisibleChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.parentchanged.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:09:33.673

只要您在选项卡控件中创建子表单（我假设您为每个 TagPage 放置一个子表单），您就可以删除整个 TabPage 或仅删除 TabPage 中的对象来处理您的子表单

```
TabControl1.TabPages.Remove(TabPage1) 
```

或者

```
TabPage1.Controls.Remove(ChildForm) 
```

# php - 查找引用页面 (php)

> ID：10325315
> 
> 赞同：2
> 
> 时间：2012-04-25T23:38:42.387
> 
> 标签：php, session, referrer

在我的工作中，我经常需要弄清楚我们的流量来自哪里。我们购买谷歌广告，然后通过 url 中的查询字符串识别流量。（mywebsite.com/?x="google_ad_group_4"）。

在每个页面上，如果有 $_GET['x']，我都会包含一些将 $_SESSION['x'] 设置为 $_GET['x'] 的会话内容。如果没有 $_GET['x'] 我会通过一些其他选项来查看它们的来源并将其设置在 $_SESSION['x'] 中：

```
$refurl = parse_url($_SERVER['HTTP_REFERER']);
$query = $refurl['query'];
parse_str($query, $result);

if (isset($result['q'])&& strstr($_SERVER['HTTP_REFERER'],'google')) {
    $_SESSION['x'] = 'G-'.str_replace('\\"',"X",$result['q']);
}elseif (isset($result['p'])&& strstr($_SERVER['HTTP_REFERER'],'yahoo')) {
    $_SESSION['x'] = 'Y-'.$result['p'];

//took out bing, aol, ask etc in the name of brevity

}else{
    if ($refurl['host']){
        $_SESSION['x'] = $_SESSION['x'].'_ref-'.$refurl['host'];
    }
} 
```

通过这种方式，我可以附加将用户带到网站的搜索查询以及他们使用的搜索引擎。我记录传入的 $_SESSION['x']'s。

许多用户使用“_ref-mywebsite.com”的 $_SESSION['x']'s 进入，这没有意义，如果他们来自我自己的域，他们已经有一个 $_SESSION[' x'] 设置在他们所在的任何页面上。这是因为他们将浏览器的安全性提高了还是什么？

我错过了一些明显的东西吗？有没有更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T23:43:23.050

您可以像这样获得推荐人

```
echo $_SERVER['HTTP_REFERER']; 
```

但正如评论中提到的，它很容易被操纵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:52:01.937

除非客户端（浏览器）将标题中的“HTTP_REFERER”传递给您，否则您将不会得到它。这取决于他们来自的网站。

我不知道您的工作流程是什么样的，但您可以做的一件事是使用 JavaScript 获取它并将其传递给您的 PHP 脚本。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T00:04:28.443

我认为可能的情况是：

*   新访问者以正常引荐来源访问网站；
*   他关闭了他的浏览器（这会清除他的会话 cookie）并打开网站的标签；
*   重新打开浏览器，网站在旧选项卡中恢复；
*   单击页面上的任何链接，并使用来自同一域的引用者和干净的会话进入另一个页面。

# jquery - 动画偏移（）。左

> ID：10325321
> 
> 赞同：2
> 
> 时间：2012-04-25T23:39:24.100
> 
> 标签：jquery

我到处找这个。那里有一些答案，但没有一个有效。

当用户在按钮上进行鼠标悬停时，我想要做的就是将 div 缓慢地向左移动。

这可以使 div 移动：

```
$("#myDiv").offset({left:-1000}); 
```

但是我所有为动作设置动画的尝试都会导致动作本身失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T23:47:32.580

您的元素的样式是否使其能够向左移动？以下对我来说很好。

`$("#myDiv").animate({left: '-=1000'});`​</p>

**[现场演示](http://jsfiddle.net/loktar/Zswg6/)**

就像上面的评论一样，向我们展示你在使用什么:)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T23:46:22.143

像这样使用 .animate() 函数

```
$("#myDiv").animate({ left: '-1000' }); 
```

**更新：** 由于您的分割向左浮动，您可以使用动画属性来`marginLeft`代替。

```
$("#myDiv").animate({ marginLeft: '-1000' }); 
```

### [演示](http://jsfiddle.net/Starx/jUsAL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T23:50:19.527

使用 jQuery 的 animate 函数来执行此操作。

```
$('button').mouseover(function () {
    $('#mydiv').animate({left: '100px'}, 'slow'); 
}); 
```

[http://jsfiddle.net/HPpEY/](http://jsfiddle.net/HPpEY/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T23:48:30.900

是的，答案中已经提供了正确的javascript解决方案。您还可以考虑使用 css3 过渡。看看我刚才写的一个[jsFiddle 。](http://jsfiddle.net/gopi1410/CAu7c/)

# c# - 按值和引用传递数组

> ID：10325323
> 
> 赞同：27
> 
> 时间：2012-04-25T23:39:43.827
> 
> 标签：c#, arrays

这些是我正在阅读的 ac# 书中的示例，只是在理解这个示例实际在做什么时遇到了一些困难，希望得到一个解释，以帮助我进一步了解这里发生的事情。

```
 //creates and initialzes firstArray
        int[] firstArray = { 1, 2, 3 };

        //Copy the reference in variable firstArray and assign it to firstarraycopy
        int[] firstArrayCopy = firstArray;

        Console.WriteLine("Test passing firstArray reference by value");

        Console.Write("\nContents of firstArray " +
            "Before calling FirstDouble:\n\t");

        //display contents of firstArray with forloop using counter
        for (int i = 0; i < firstArray.Length; i++)
            Console.Write("{0} ", firstArray[i]);

        //pass variable firstArray by value to FirstDouble
        FirstDouble(firstArray);

        Console.Write("\n\nContents of firstArray after " +
            "calling FirstDouble\n\t");

        //display contents of firstArray
        for (int i = 0; i < firstArray.Length; i++)
            Console.Write("{0} ", firstArray[i]); 

        // test whether reference was changed by FirstDouble
        if (firstArray == firstArrayCopy)
            Console.WriteLine(
                "\n\nThe references refer to the same array");
        else
            Console.WriteLine(
                "\n\nThe references refer to different arrays");

       //method firstdouble with a parameter array
       public static void FirstDouble(int[] array)
    {
        //double each elements value
        for (int i = 0; i < array.Length; i++)
            array[i] *= 2;

        //create new object and assign its reference to array
        array = new int[] { 11, 12, 13 }; 
```

基本上有代码我想知道的是，这本书说如果数组是按值传递的，而不是原始调用者不会被方法修改（据我了解）。因此，在方法 FirstDouble 结束时，他们尝试将局部变量数组分配给一组失败的新元素，显示时原始调用者的新值为 2、4、6。

现在我的困惑是方法 FirstDouble 中的 for 循环如何将原始调用者 firstArray 修改为 2,4,6 如果它是按值传递的。我认为该值应保持为 1,2,3。

提前致谢

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-25T23:43:06.717

理解这一点的关键是了解[值类型和引用类型](http://www.albahari.com/valuevsreftypes.aspx)之间的区别。

例如，考虑一个典型的值类型，`int`.

```
int a = 1;
int b = a;
a++; 
```

此代码执行后，`a`值为 2，`b`值为`1`。因为`int`是值类型，所以`b = a`获取 的值的副本`a`。

现在考虑一个类：

```
MyClass a = new MyClass();
a.MyProperty = 1;
MyClass b = a;
a.MyProperty = 2; 
```

因为类是引用类型，所以`b = a`只分配引用而不是值。so `b`and`a`都指的是同一个对象。因此，在`a.MyProperty = 2`执行之后，`b.MyProperty == 2`因为`a`和`b`引用同一个对象。

* * *

考虑到您问题中的代码，数组是引用类型，因此对于此函数：

```
public static void FirstDouble(int[] array) 
```

变量`array`实际上是一个引用，因为`int[]`是一个引用类型。*按值传递*`array`的*引用*也是如此。

 *因此，对函数内部所做的修改`array`实际上应用于所引用的`int[]`对象`array`。因此，这些修改对引用同一对象的所有引用都是可见的。这包括调用者持有的引用。

现在，如果我们看一下这个函数的实现：

```
public static void FirstDouble(int[] array)
{
    //double each elements value
    for (int i = 0; i < array.Length; i++)
        array[i] *= 2;

    //create new object and assign its reference to array
    array = new int[] { 11, 12, 13 };
} 
```

还有一个更复杂的问题。`for`循环只是将传递给函数的每个元素加倍`int[]`。这就是调用者看到的修改。第二部分是将新`int[]`对象分配给局部变量`array`。这对调用者是不可见的，因为它所做的只是更改引用的目标`array`。而且由于引用`array`是按值传递的，调用者看不到那个新对象。

如果函数是这样声明的：

```
public static void FirstDouble(ref int[] array) 
```

那么引用`array`将通过引用传递，调用者将`{ 11, 12, 13 }`在函数返回时看到新创建的对象。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-09-01T06:14:28.377

术语的使用多么令人困惑！

澄清，

1.  对于方法`foo(int[] myArray)`，*“按值传递引用（对象）”*实际上意味着“传递对象地址（引用）的副本”。这个“副本”的价值，即。`myArray`, 最初是原始对象的地址（引用），意味着它指向原始对象。因此，对 所指向的内容`myArray`的任何更改都会影响原始对象的内容。

    但是，由于`myArray`它本身的“值”是一个副本，因此对该“值”的任何更改都不会影响原始对象或其内容。

2.  对于方法`foo(ref int[] refArray)`，*“通过引用传递引用（对象）”*意味着“传递对象的地址（引用）本身（而不是副本）”。这意味着`refArray`实际上是对象本身的原始地址，而不是副本。因此，对 的“值”`refArray`或指向的内容的任何更改`refArray`都是对原始对象本身的直接更改。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-26T01:07:02.767

`ref`除非您特别看到或，否则所有方法参数都是按值传递的`out`。

数组是引用类型。这意味着您正在按值传递引用。

仅当您为其分配新数组时，引用本身才会更改，这就是为什么这些分配不会反映在调用者中的原因。当您取消引用对象（此处为数组）并修改基础值时，您并没有更改变量，只是它指向的内容。即使变量（即它指向的内容）保持不变，调用者也将“看到”这种变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-10T00:48:58.967

为您提供具有 .net 开源知识以实现逻辑的想法；

```
//Sample Code, Illustration;
Method1(params dynamic[] var1) {
  var1[0]=new dynamic[3] { 1,2,3 }
} 
```

var1 未指定或不能为 ref ？一个使用场景是......

```
//Sample Code, Illustration;
dynamic[] test = new dynamic[];
Method1( ref test,x,x,x,x  );
System.Windows.MessageBox.Show( test[2].ToString() ); 
```

仅在何时指示 ref，而不是特定于参数；和数组项的引用；

```
//result is IndexOutOfBounds; 
```

这只是一个说明，它可以通过返回一个数组来完成，并使用如下：

```
test = Method1( test,... ); 
```

代替 ：

```
Method1( ref test,x,x,..., ref test[x], ref test2, ... ); 
```*

# ruby-on-rails - Ruby on Rails 和 PostgreSQL 扩展和负载平衡（硬件和设置建议）？

> ID：10325324
> 
> 赞同：2
> 
> 时间：2012-04-25T23:39:50.050
> 
> 标签：ruby-on-rails, ruby, postgresql, cloud, scalability

**我们想要什么：**

我正在寻找硬件、ruby 版本和 postgresql 复制方法建议，以扩展当前位于 1 台服务器上的 ruby​​ on rails 应用程序。

**我们用它来做什么：**

我工作的公司目前有 1 台服务器来处理数据库和我们的 ruby​​ on rails 应用程序。我们的应用程序以大约每 5 秒的速率接收来自许多不同位置（移动设备等）的 GPS 和其他数据。经过广泛的测试，我们准备好部署它，但要准备好几百/几千台设备向服务器发送数据。就用户交互而言，我们有基于发布数据的报告等。

我目前倾向于使用 postgresql 主-主复制和 jruby，为 postgresql 和 ruby​​ 使用单独的服务器。

我知道这已经被问了很多，但我认为我应该采取所有可能的研究路径。我计划记录整个过程以与他人分享，因此您可以提供的任何输入都会很棒。

# haskell - Haskell HDBC 内存泄漏

> ID：10325325
> 
> 赞同：4
> 
> 时间：2012-04-25T23:40:02.857
> 
> 标签：haskell, memory-leaks, hdbc

前几天我尝试将资源池和 HDBC 放在一起，但注意到每个查询的内存都在不断增加。然后我用尽可能少的函数组合了一个简单的测试代码，得到了这个：

```
data SQL = SQL (Pool Connection)
check :: SQL -> IO ()
check (SQL pool) = do res <- query' pool "show status like 'Threads_conn%'" []
                      threadDelay 100000
                      check (SQL pool) 
```

完整代码： [http ://upaste.me/40f2229cef7157f](http://upaste.me/40f2229cef7157f)

对于检查函数的每次递归，程序使用的内存越来越多。结果不应该在新的递归调用中被垃圾收集，还是会留在内存中，直到程序退出该函数以防“我们需要它”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:09:03.810

后期跟进，但根据您使用的池版本，它可能是池实现本身的错误：[https ://github.com/bos/pool/pull/4](https://github.com/bos/pool/pull/4)

# asp.net - NavigateUrl 中的希伯来文文本

> ID：10325327
> 
> 赞同：0
> 
> 时间：2012-04-25T23:40:34.020
> 
> 标签：asp.net, utf-8, hebrew

似乎当我在 asp:HyperLink 中的 NavigateUrl 属性中输入希伯来语文本时，它被编码为 UTF8 编码，而不是仅仅向我显示希伯来语单词（就像在同一页面上的常规非 runat 服务器链接上一样）。

因此对于

```
<asp:HyperLink ID="hypID" runat="server" NavigateUrl="שלום" /> 
```

我明白了

```
<a id="cphMiddle_repRightCol_hypCat_0" href="%d7%a9%d7%9c%d7%95%d7%9d">text</a> 
```

在页面上输出，而不是

```
<a id="cphMiddle_repRightCol_hypCat_0" href="שלום">
text</a> 
```

这可以避免吗？

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:08:35.550

作为一种解决方法，您可以尝试使用限制较少的 HTML 控件等效项：

```
<a runat="server" href="שלום" .. 
```

**编辑**：另外，您是否为整个网站设置了正确的编码？通过：http: [//msdn.microsoft.com/en-us/library/39d1w2xf.aspx](http://msdn.microsoft.com/en-us/library/39d1w2xf.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T01:44:11.517

你是对的，`NavigateUrl`将以 UTF8 对 url 进行编码。
您可以做的是完全省略 NavigateUrl 并使用 href 标记：

```
<asp:HyperLink ID="hypID" runat="server" href="שלום" Text="Link" /> 
```

这将使它像这样：

```
<a id="hypID" href="שלום">Link</a> 
```

希望它有所帮助... ובהצלחה

# c++ - 具有精心设计的异常机制的 C++ 项目

> ID：10325330
> 
> 赞同：7
> 
> 时间：2012-04-25T23:41:27.813
> 
> 标签：c++, exception

有谁知道一个具有良好设计/强大异常机制的开源 C++ 应用程序，所以我可以获得一些灵感？我看到的大多数代码/示例都有问题，例如：

1.  以消息字符串作为参数抛出对象。似乎是错误的，因为它将异常标记为致命的，可以向更高层的用户显示的错误消息为尝试处理异常的客户端代码留下了很小的空间。即使异常是致命的，诸如不同的语言环境（语言）之类的东西也会使在抛出点格式化消息对我来说似乎是个坏主意。
2.  使用从基异常类派生的大量不同异常类。为每件可能出错的事情（打开文件、读取文件、写入文件、创建线程等）引入一个新的类/类型是错误的。使用基本类型在最高级别捕获所有未处理的异常会丢失显示有意义的错误消息所需的类型信息。
3.  为每个组件/库使用一个从基异常类派生的异常类，并给它一个错误代码作为参数以指示确切的错误。捕捉基本类型会导致歧义。（我们发现了谁的错误代码“3”？）...

欢迎一些正确方向的指示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T00:00:07.893

为了解决所有这三个问题，我发现对我来说最好的方法是抛出我自己的自定义异常，该异常源自`std::runtime_error`. 像这样：

```
#include <exception>

class ChrisAException : public std::runtime_error
{
      /// constructor only which passes message to base class
      ChrisAException(std::string msg)
      : std::runtime_error(msg)
      {

      }
} 
```

它允许接受一个字符串，我总是把它放在下面的格式中（假设`x`否定不是一个有效的输入并且意味着调用它的东西是错误的）：

```
#include "ChrisAException.h"

void myfunction(int x)
{

    if(x < 0) 
    {
        throw ChrisAException("myfunction(): input was negative!");
    }

    // rest of your function
} 
```

对于这一点，请记住，这些异常中的字符串更多的是为程序员而不是最终用户。当出现故障时，界面的程序员的工作是在语言环境中显示一些有意义的东西。异常中的字符串可以在调试时记录或查看（最好！）

这样，您最终可以通过以下方式捕获它：

```
try
{
      // high level code ultimately calling myfunction

}
catch(ChrisAException &cae)
{
       // then log cae.what()
}
catch(std::runtime_error &e)
{
       // this will also catch ChrisAException's if the above block wasn't there
}
catch(...)
{
      // caught something unknown
} 
```

我个人不喜欢派生太多类型的异常，或者给出错误代码。我让字符串消息进行报告。

通常，我使用 C++ 异常来表示“程序出了问题”，而*不是*处理正常的用例。因此，对我来说，算法执行期间抛出的异常要么意味着“标记用户出现问题”或“不告诉用户”（取决于代码对他们所做的事情的重要性），但肯定会记录它并以某种方式让程序员知道。

我不使用 C++ 异常来处理本质上不是编程错误的情况，例如，某种不正确的逻辑或被称为错误的东西。例如，我不会使用 C++ 异常来处理正常的程序情况，例如空 DVD 不在 DVD 写入程序的驱动器中。为此，我有明确的返回码，允许用户知道是否有空 DVD（可能带有对话框等）

请记住，C++ 异常处理的一部分是将堆栈展开为一个`try-catch`块。对我来说，这意味着中止程序中正在发生的事情并清理堆栈。对于像我的 DVD 示例这样的情况，您不应该真的想展开很多堆栈。这不是灾难性的。您应该简单地让用户知道，然后让他们再试一次。

但同样，这是我使用 C++ 异常的首选方式，基于经验和我的阅读。我对其他意见持开放态度。

编辑：更改`std::exception`为`std::runtime_error`基于评论者的建议。

# xcode - XCODE 从 TableViewCell 播放视频

> ID：10325332
> 
> 赞同：0
> 
> 时间：2012-04-25T23:41:41.340
> 
> 标签：xcode, viewdidload

我在 XCODE4 中使用故事板。

我目前能够使用从 tableview 控制器到 viewcontroller 的 push segue 从表格单元格启动视频。当 segue 被调用时，视图控制器立即使用 viewdidload 中的标准媒体播放器代码启动视频。我的问题是视频结束后，应用程序不会返回表格单元格，而是停留在空白表格视图控制器，直到用户单击“返回”。任何人都知道让视频结束并切换回 TableViewController 的简单方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:46:23.813

苹果并没有让这件事变得容易。我的假设是他们希望用户在他/她感觉足够舒服时选择退出电影播放器​​（然后用户可以选择重播或跳回他们可能想再次看到的部分）。

但是捕捉电影结束的一种方法是注册[“ `MPMoviePlayerPlaybackDidFinishNotification`”通知](https://developer.apple.com/library/ios/documentation/MediaPlayer/Reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/c/data/MPMoviePlayerPlaybackDidFinishNotification)（为您链接的文档），然后退出和/或删除 MPMoviePlayerController。

注意：如果在加载影片时出现任何错误，也会触发此通知（请参阅文档`initWithContentURL:`）。

# sql - 考虑空值/转换为“x”长度的空间

> ID：10325334
> 
> 赞同：1
> 
> 时间：2012-04-25T23:41:42.580
> 
> 标签：sql, sql-server-2008

```
SELECT
CONVERT(CHAR(10), Title)
+ CONVERT(CHAR(75), FirstName)
+ CONVERT(CHAR(75), LastName)
+ CONVERT(CHAR(100), EmailAddress)
FROM
AdventureWorks.Person.Contact 
```

如果一个值为空，在这种情况下我将如何适应？

**我的最终目标：创建一个固定长度的输出。**

*理想情况下：如果它是空值，则 make 是指定长度的空白。*

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T01:20:56.030

您还可以使用 CAST CHAR 技术而不是通过复制填充字符串：

```
create table Person
(Firstname varchar(50) not null,
 Lastname varchar(50) not null,
 Email varchar(50));

insert into Person values
('John Winston','Lennon', 'jwl@beatles.com'),
('James Paul','McCartney', null),
('George','Harrison', 'g@beatles.com'),
('Ringo','Starr', 'rstarkey@beatles.com');

select 
Fullname = 
     CAST(Lastname, AS CHAR(50))
     + CAST(Firstname AS CHAR(50))
     + CAST(COALESCE(Email,'') AS CHAR(50)) 
from person 
```

[http://www.sqlfiddle.com/#!3/bb771/1](http://www.sqlfiddle.com/#!3/bb771/1)

注意，SQL Fiddle 没有错误，也没有上面的查询，只是浏览器将多个空格渲染为一个，您可以通过在网格上使用 Inspect Element（如果您使用的是 Google Chrome）看到它的 50 个字符。每个 CAST 显示 50 个字符

当然你也可以使用 CONVERT [http://www.sqlfiddle.com/#!3/bb771/3](http://www.sqlfiddle.com/#!3/bb771/3)

```
select 
    Fullname = 
        CONVERT(CHAR(50), Lastname)
        + CONVERT(CHAR(50), Firstname)
        + CONVERT(CHAR(50), COALESCE(Email,'')) 
from person 
```

当然你也可以使用 ISNULL [http://www.sqlfiddle.com/#!3/bb771/4](http://www.sqlfiddle.com/#!3/bb771/4)

```
select 
    Fullname = 
        CONVERT(CHAR(50), Lastname)
        + CONVERT(CHAR(50), Firstname)
        + CONVERT(CHAR(50), ISNULL(Email,'')) 
from person 
```

只是为了验证事情是否按预期工作，可视化空间：

```
with a as
(   
    select 
        Fullname = 
            CONVERT(CHAR(50), Lastname)
            + CONVERT(CHAR(50), Firstname)
            + CONVERT(CHAR(50), COALESCE(Email,''))  
    from person
) 
select replace(Fullname,' ','.') from a

Lennon............................................John.Winston......................................jwl@beatles.com...................................
McCartney.........................................James.Paul..........................................................................................
Harrison..........................................George............................................g@beatles.com.....................................
Starr.............................................Ringo.............................................rstarkey@beatles.com.............................. 
```

[http://www.sqlfiddle.com/#!3/bb771/8](http://www.sqlfiddle.com/#!3/bb771/8)

另一个提示，应避免任何性能杀手，例如[不必要的函数调用，以使您的查询更快。](http://en.wikipedia.org/wiki/Cargo_cult_programming)在这种情况下，如果 Firstname 和 Lastname 在输入中拒绝 NULL，则无需在它们周围放置 COALESCE 或 ISNULL，在这种情况下，我们只需在 Email 上放置 COALESCE 或 ISNULL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:45:33.750

```
SELECT  COALESCE( CONVERT(CHAR(10), Title),         REPLICATE(' ', 10)),
        COALESCE( CONVERT(CHAR(75), FirstName),     REPLICATE(' ', 75)),
        COALESCE( CONVERT(CHAR(75), LastName),      REPLICATE(' ', 75)),
        COALESCE( CONVERT(CHAR(100), EmailAddress), REPLICATE(' ', 100))
FROM    AdventureWorks.Person.Contact 
```

您正在寻找的是[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)（[`REPLICATE`](http://msdn.microsoft.com/en-us/library/ms174383.aspx)并使您的生活更轻松）

或者，您可以[`CONCAT`](http://msdn.microsoft.com/en-us/library/hh231515.aspx)使用[`LEFT`](http://msdn.microsoft.com/en-us/library/ms177601.aspx)它：

```
SELECT LEFT(CONCAT( Title,        REPLICATE(' ',10) ), 10) AS Title,
       LEFT(CONCAT( FirstName,    REPLICATE(' ',75) ), 75) AS FirstName,
       LEFT(CONCAT( LastName,     REPLICATE(' ',75) ), 75) AS LastName,
       LEFT(CONCAT( EmailAddress, REPLICATE(' ',100) ), 100) AS FirstName
FROM   AdventureWorks.Person.Contact 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T01:02:28.703

我完成此操作的最简单方法是使用 ISNULL 语句。我通常会写出 ISNULL(Field,' ') 或我会为空值传递的任何值，例如 N/a。此 ISNULL 命令接受一个值，如果该值为 null，则返回第二个参数，否则返回第一个参数的值。

# wcf - 如何使用 Silverlight 实现 ChannelFactory 和 WCF 程序集共享？

> ID：10325335
> 
> 赞同：1
> 
> 时间：2012-04-25T23:41:47.393
> 
> 标签：wcf, silverlight, .net-4.0, channelfactory

首选的 WCF 实现是程序集共享和 ChannelFactory - 合同的单个实例意味着任何服务更改只需要在一个地方进行，没有更新或维护的代理等。

我想用 Silverlight 实现 ChannelFactory。我已经受够了 RIA 域服务等。

我的 Silverlight 应用程序只能引用 Silverlight 程序集——这很公平。所以我把`ServiceContract`接口放在一个 Silverlight 程序集中，并从我的服务器和客户端引用它。

问题是当我去运行我的服务器（在这种情况下是 IIS 托管）时，我得到

> 无法加载文件或程序集“System.ServiceModel，Version=2.0.5.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

包含 的 Silverlight 程序集是使用与我的服务器使用`ServiceContract`的版本不同的版本`System.ServiceModel`（即 .NET 4.0）构建的。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:25:27.847

这种与 silverlight 和 .net 的不兼容性是部分人为的，如果您知道如何操作，则可以解决。

[http://www.netfxharmonics.com/2008/12/Reusing-NET-Assemblies-in-Silverlight](http://www.netfxharmonics.com/2008/12/Reusing-NET-Assemblies-in-Silverlight)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:10:02.663

简单地，

使用[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)；

# sql - 将表中的 blob 导出到单个文件的最快方法

> ID：10325338
> 
> 赞同：34
> 
> 时间：2012-04-25T23:42:11.357
> 
> 标签：sql, sql-server-2008-r2, blob

将存储在 SQL Server 表中的文件 (blob) 导出到硬盘驱动器上的文件的最快方法是什么？我有超过 2.5 TB 的文件（平均 90 kb）存储为 varbinary，我需要尽快将每个文件提取到本地硬盘驱动器。BCP 似乎可以工作，但以我所看到的速度需要超过 45 天，而且我担心我的脚本会在某个时候失败，因为 Management Studio 会耗尽内存。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-27T17:54:06.783

我尝试使用 CLR 函数，它的速度是 BCP 的两倍多。这是我的代码。

**原始方法**：

```
SET @bcpCommand = 'bcp "SELECT blobcolumn FROM blobtable WHERE ID = ' + CAST(@FileID AS VARCHAR(20)) + '" queryout "' + @FileName + '" -T -c'
EXEC master..xp_cmdshell @bcpCommand 
```

**CLR 方法**：

```
declare @file varbinary(max) = (select blobcolumn from blobtable WHERE ID = @fileid)
declare @filepath nvarchar(4000) = N'c:\temp\' + @FileName
SELECT Master.dbo.WriteToFile(@file, @filepath, 0) 
```

**CLR 函数的 C# 代码**

```
using System;
using System.Data;
using System.Data.SqlTypes;
using System.IO;
using Microsoft.SqlServer.Server;

namespace BlobExport
{
    public class Functions
    {
      [SqlFunction]
      public static SqlString WriteToFile(SqlBytes binary, SqlString path, SqlBoolean append)
      {        
        try
        {
          if (!binary.IsNull && !path.IsNull && !append.IsNull)
          {         
            var dir = Path.GetDirectoryName(path.Value);           
            if (!Directory.Exists(dir))              
              Directory.CreateDirectory(dir);            
              using (var fs = new FileStream(path.Value, append ? FileMode.Append : FileMode.OpenOrCreate))
            {
                byte[] byteArr = binary.Value;
                for (int i = 0; i < byteArr.Length; i++)
                {
                    fs.WriteByte(byteArr[i]);
                };
            }
            return "SUCCESS";
          }
          else
             "NULL INPUT";
        }
        catch (Exception ex)
        {          
          return ex.Message;
        }
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-07-06T20:41:20.210

我来这里是为了以最少的努力将 blob 导出到文件中。CLR 函数不是我所说的最省力的东西。[这里](http://www.jitendrazaa.com/blog/sql/sqlserver/export-documents-saved-as-blob-binary-from-sql-server/)描述了一个懒惰的，使用 OLE 自动化：

```
declare @init int
declare @file varbinary(max) = CONVERT(varbinary(max), N'your blob here')
declare @filepath nvarchar(4000) = N'c:\temp\you file name here.txt'

EXEC sp_OACreate 'ADODB.Stream', @init OUTPUT; -- An instace created
EXEC sp_OASetProperty @init, 'Type', 1; 
EXEC sp_OAMethod @init, 'Open'; -- Calling a method
EXEC sp_OAMethod @init, 'Write', NULL, @file; -- Calling a method
EXEC sp_OAMethod @init, 'SaveToFile', NULL, @filepath, 2; -- Calling a method
EXEC sp_OAMethod @init, 'Close'; -- Calling a method
EXEC sp_OADestroy @init; -- Closed the resources 
```

您可能需要允许在服务器上运行 OA 存储过程（完成后将其关闭）：

```
sp_configure 'show advanced options', 1;  
GO  
RECONFIGURE;  
GO  
sp_configure 'Ole Automation Procedures', 1;  
GO  
RECONFIGURE;  
GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-23T07:40:46.347

对我来说，通过结合我读过的所有帖子来起作用的是：

1.启用 OLE 自动化 - 如果未启用

```
sp_configure 'show advanced options', 1;  
GO  
RECONFIGURE;  
GO  
sp_configure 'Ole Automation Procedures', 1;  
GO  
RECONFIGURE;  
GO 
```

2.创建将存储生成文件的文件夹：

```
C:\GREGTESTING 
```

3.创建将用于文件生成的DocTable并将blob存储在Doc_Content中
[![在此处输入图像描述](../Images/022685e0f2d730d0ecc923205580db98.png)](https://i.stack.imgur.com/97WmU.png)

```
CREATE TABLE [dbo].[Document](
    [Doc_Num] [numeric](18, 0) IDENTITY(1,1) NOT NULL,
    [Extension] [varchar](50) NULL,
    [FileName] [varchar](200) NULL,
    [Doc_Content] [varbinary](max) NULL   
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 

INSERT [dbo].[Document] ([Extension] ,[FileName] , [Doc_Content] )
    SELECT 'pdf', 'SHTP Notional hire - January 2019.pdf', 0x....(varbinary blob) 
```

****重要的提示！****

不要忘记在 Doc_Content 列中添加您要生成的文件的 varbinary！

4.运行以下脚本

```
DECLARE @outPutPath varchar(50) = 'C:\GREGTESTING'
, @i bigint
, @init int
, @data varbinary(max) 
, @fPath varchar(max)  
, @folderPath  varchar(max)

--Get Data into temp Table variable so that we can iterate over it 
DECLARE @Doctable TABLE (id int identity(1,1), [Doc_Num]  varchar(100) , [FileName]  varchar(100), [Doc_Content] varBinary(max) )

INSERT INTO @Doctable([Doc_Num] , [FileName],[Doc_Content])
Select [Doc_Num] , [FileName],[Doc_Content] FROM  [dbo].[Document]

SELECT @i = COUNT(1) FROM @Doctable   

WHILE @i >= 1   

BEGIN    

SELECT 
    @data = [Doc_Content],
    @fPath = @outPutPath + '\' + [Doc_Num] +'_' +[FileName],
    @folderPath = @outPutPath + '\'+ [Doc_Num]
FROM @Doctable WHERE id = @i

EXEC sp_OACreate 'ADODB.Stream', @init OUTPUT; -- An instace created
EXEC sp_OASetProperty @init, 'Type', 1;  
EXEC sp_OAMethod @init, 'Open'; -- Calling a method
EXEC sp_OAMethod @init, 'Write', NULL, @data; -- Calling a method
EXEC sp_OAMethod @init, 'SaveToFile', NULL, @fPath, 2; -- Calling a method
EXEC sp_OAMethod @init, 'Close'; -- Calling a method
EXEC sp_OADestroy @init; -- Closed the resources
print 'Document Generated at - '+  @fPath   

--Reset the variables for next use
SELECT @data = NULL  
, @init = NULL
, @fPath = NULL  
, @folderPath = NULL
SET @i -= 1
END 
```

5.结果如下图： [![在此处输入图像描述](../Images/f93777d834af2e6afcd7f2f62eb8fafd.png)](https://i.stack.imgur.com/u44XE.png)

# c - 使用 time_t 检查 C 中最后修改时间的问题

> ID：10325348
> 
> 赞同：1
> 
> 时间：2012-04-25T23:43:06.737
> 
> 标签：c, linux, time, compiler-errors

所以我在 C 中实现 mtime 结构时遇到了麻烦，我试图检查文件的最后修改时间。编译时，我收到此错误：

`pr8.1.c:246: error: incompatible types when assigning to type struct timespec from type time_t make: *** [pr8] Error 1`

我为此使用的代码如下：

```
static struct timespec mtime(const char *file)
{
    struct stat s;
    struct timespec t = { 0, 0 };

    if (stat(file, &s) == 0)
#if     defined(MTIME) && MTIME == 1    // Linux
    { t = s.st_mtime; }
#elif   defined(MTIME) && MTIME == 2    // Mac OS X
    { t = s.st_mtimespec; }
#elif   defined(MTIME) && MTIME == 3    // Mac OS X, with some additional settings
    { t.tv_sec = s.st_mtime; t.tv_nsec = s.st_mtimensec; }
#else                                   // Solaris
    { t.tv_sec = s.st_mtime; }
#endif

    return t;
} 
```

和结构统计：

```
struct stat
{ time_t        st_mtime; }; 
```

PS对格式感到抱歉，我不确定为什么格式会这样。在 Linux 上运行它。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:53:44.503

编译器告诉你这些类型是不兼容的，他们显然是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:53:48.893

在 linux 和第一个 mac os x 版本中，您从 int (time_t) 分配给结构。在其他两个版本中，您正确地将 s 的成员分配给 t 的成员。如果你改变这个，你得到正确的操作吗？

```
static struct timespec mtime(const char *file)
{
    struct stat s;
    struct timespec t = { 0, 0 };

    if (stat(file, &s) == 0)
#if     defined(MTIME) && MTIME == 1    // Linux
    { t.tv_sec = s.st_mtime; }
//     ^^^^^^^ 
#elif   defined(MTIME) && MTIME == 2    // Mac OS X
    { t.tv_sec = s.st_mtimespec; }
//     ^^^^^^^ 
#elif   defined(MTIME) && MTIME == 3    // Mac OS X, with some additional settings
    { t.tv_sec = s.st_mtime; t.tv_nsec = s.st_mtimensec; }
#else                                   // Solaris
    { t.tv_sec = s.st_mtime; }
#endif

    return t;
} 
```

# css - 具有边框半径和阴影的输入字段集未在 IE9 中显示所有文本

> ID：10325350
> 
> 赞同：1
> 
> 时间：2012-04-25T23:43:14.053
> 
> 标签：css, internet-explorer-9, fieldset

我有以下CSS：

```
fieldset ul li input {
  width: 96%;
  margin: 0;
  padding: 6px;
  font-size: 13px;
  border: 1px solid #CCC;
  -moz-border-radius: 6px;
  -webkit-border-radius: 6px;
  border-radius: 6px;
  -moz-box-shadow: 0 2px 2px white, inset 0 1px 3px #EEE;
  -webkit-box-shadow: 0 2px 2px white, inset 0 1px 3px #EEE;
  box-shadow: 0 2px 2px white, inset 0 1px 3px #EEE;
} 
```

在 Firefox 和 Chrome 下运行。但是在 IE9 中，当我插入一些文本时，我无法完全看到它。如您所见，它隐藏在其中的一半中：

![IE9 字段集输入问题](../Images/218d33b245ba573c679d21e4f71829f9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:59:00.633

增加高度或填充。

```
input {
    padding: 10px;
} 
```

# mysql - 作为计数操作的结果创建表的 SQL 语句？

> ID：10325352
> 
> 赞同：1
> 
> 时间：2012-04-25T23:43:30.350
> 
> 标签：mysql, sql, count, recordset

假设你有一张这样的桌子

```
id   terms    
1    a       
2    c       
3    a       
4    b       
5    b       
6    a       
7    a
8    b
9    b
10   b 
```

你想得到这样的报告；

```
terms  count
a      4
b      5
c      1 
```

所以你在第一张桌子上运行它

```
SELECT terms, COUNT( id) AS count 
    FROM table 
GROUP BY terms 
ORDER BY terms DESC 
```

到现在为止还挺好。

但是上面的 SQL 语句将报表视图放在了浏览器上。好吧，我想将该数据保存到 SQL 中。

那么，我需要什么 SQL 命令将该报告的结果插入到表中？

假设您已经创建了一个`reports`用这个调用的表；

```
create table reports (terms varchar(500), count (int)) 
```

让我们假设`reports`表格是空的，我们只想用以下视图填充它 - 使用单线。我要问的问题是如何？

```
 terms  count
    a      4
    b      5
    c      1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T23:47:14.287

就如此容易：

```
INSERT INTO reports
SELECT terms, COUNT( id) AS count 
FROM table 
GROUP BY terms 
ORDER BY terms DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:47:34.833

如果表已经存在：

```
Insert reports
SELECT terms, COUNT(*) AS count 
FROM table 
GROUP BY terms 
```

如果不：

```
SELECT terms, COUNT(*) AS count 
into reports
FROM table 
GROUP BY terms 
```

# mysql - Rails 3.2.3 想要在 mysql 生产环境中使用 sqlite3 gem

> ID：10325360
> 
> 赞同：0
> 
> 时间：2012-04-25T23:44:18.947
> 
> 标签：mysql, ruby-on-rails, sqlite, rake, capistrano

我有一个使用 Capistrano 部署的 Rails 3.2.3 应用程序。到目前为止，这个工作流程已经完美运行了几个月。但是自从上次部署最新更改以来，该`rake db:migrate`操作挂起，因为它找不到 SQLite3 gem 和适配器。

```
executing "cd /home/*/*/*/releases/20120425232058 && bundle exec rake RAILS_ENV=production  db:migrate"
executing command
rake aborted!
Please install the sqlite3 adapter: `gem install activerecord-sqlite3-adapter` (sqlite3 is not part of the bundle. Add it to Gemfile.) 
```

问题是，应用程序正在 MySQL 上运行。我的 Gemfile 中有：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'jquery-rails'
gem 'omniauth-openid'
gem 'will_paginate'
gem 'pusher'
gem 'carrierwave'
gem 'capistrano'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

group :development, :production do
  gem 'mysql2'
end

group :production do
  gem 'unicorn'
end 
```

和 database.yml 文件：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: *****_development
  pool: 5
  username: *****
  password: *****
  host: localhost

production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: *****_production
  pool: 5
  username: *****
  password: *****
  host: localhost 
```

该应用程序在我的本地计算机上以生产模式运行而没有问题。

为什么 Rails 试图安装 SQLite ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:58:34.710

我相信您在 config/database.yml 中指定了 sqlite

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:08:09.517

我的坏人。Capistrano 食谱出了点问题。谢谢你的回答！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:34:13.507

您可以发布新部署中的更改列表吗？也许这是也使用的宝石之一的问题`ActiveRecord`？

# android - 方法调用崩溃“无法执行活动的方法”

> ID：10325364
> 
> 赞同：0
> 
> 时间：2012-04-25T23:44:45.120
> 
> 标签：android, sql, crash

我正在尝试实现从我的 Android 应用程序到存储在 MS SQL Server 2008 中的数据库的登录系统。与服务器的连接有效，当我调用 logIn 方法让用户连接连接帮助程序类以比较密码匹配时出现问题.

这是单击登录按钮时执行的函数：

```
public void onLogInButtonClicked(View v){
        final EditText login = (EditText) findViewById(R.id.login);
        final EditText password = (EditText) findViewById(R.id.password);

        String userName = login.getText().toString();
        String pass = password.getText().toString();
        System.out.println("Pass Entered:" + pass);
        System.out.println("User Entered" + userName);

        if (connector.logIn(userName, pass)){

            //Creates Intent from new Activity to be launched
            Intent k = new Intent(this, MainActivity.class);

            //Sends login name to activity k
            k.putExtra("loginName", userName);
            //Starts new Activity
            startActivity(k);

        }
        else
        {
            //toast log in unsuccessful
        }
    } 
```

Connector 类的 logIn 方法如下：

```
boolean logIn(String name, String password){
        System.out.println("I'm in LogIn method");
        java.sql.ResultSet result = null;
        boolean log = false;
         try {
             connection = this.getConnection();
             if (connection != null) {

                    //String for the login query
                    String statement = "SELECT Password FROM Users WHERE UserName = '" 
                                    + name + "'";      
                    System.out.println(statement);

                    Statement select = connection.createStatement();
                    result = select.executeQuery(statement);
                    System.out.println(result.getString(1));
                    if(result.getString(1) == password) log = true;

                    result.close();
                    result = null;
                    closeConnection();
             } 
             else {
                    System.out.println("Error: No active Connection");
                    return log;
             }
         }  catch (Exception e) {
             e.printStackTrace();
            }
        return log;
    } 
```

我什至没有在控制台中看到“我正在使用 logIn 方法”，这让我猜测应用程序在进入它之前就崩溃了，尽管崩溃发生在调用该方法的行中。

这是日志：

```
04-25 23:32:45.855: E/AndroidRuntime(795): FATAL EXCEPTION: main
04-25 23:32:45.855: E/AndroidRuntime(795): java.lang.IllegalStateException: Could not execute method of the activity
04-25 23:32:45.855: E/AndroidRuntime(795):  at android.view.View$1.onClick(View.java:2144)
04-25 23:32:45.855: E/AndroidRuntime(795):  at android.view.View.performClick(View.java:2485)
04-25 23:32:45.855: E/AndroidRuntime(795):  at android.view.View$PerformClick.run(View.java:9080)
04-25 23:32:45.855: E/AndroidRuntime(795):  at android.os.Handler.handleCallback(Handler.java:587)
04-25 23:32:45.855: E/AndroidRuntime(795):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-25 23:32:45.855: E/AndroidRuntime(795):  at android.os.Looper.loop(Looper.java:123)
04-25 23:32:45.855: E/AndroidRuntime(795):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-25 23:32:45.855: E/AndroidRuntime(795):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 23:32:45.855: E/AndroidRuntime(795):  at java.lang.reflect.Method.invoke(Method.java:507)
04-25 23:32:45.855: E/AndroidRuntime(795):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-25 23:32:45.855: E/AndroidRuntime(795):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-25 23:32:45.855: E/AndroidRuntime(795):  at dalvik.system.NativeStart.main(Native Method)
04-25 23:32:45.855: E/AndroidRuntime(795): Caused by: java.lang.reflect.InvocationTargetException
04-25 23:32:45.855: E/AndroidRuntime(795):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 23:32:45.855: E/AndroidRuntime(795):  at java.lang.reflect.Method.invoke(Method.java:507)
04-25 23:32:45.855: E/AndroidRuntime(795):  at android.view.View$1.onClick(View.java:2139)
04-25 23:32:45.855: E/AndroidRuntime(795):  ... 11 more
04-25 23:32:45.855: E/AndroidRuntime(795): Caused by: java.lang.NullPointerException 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:56:09.900

听起来您的连接器对象为空。您是否忘记对其进行初始化或范围不正确？如果还不足以帮助您找到连接器，请张贴初始化连接器的位置

# mongodb - Morphia 和对象图

> ID：10325365
> 
> 赞同：1
> 
> 时间：2012-04-25T23:44:55.590
> 
> 标签：mongodb, morphia

我还没有使用 Morphia，但我正在考虑将它用于当前项目。

假设我有一个带有许多 @Reference 注释的 POJO，并且我要求 Morphia 从数据库中获取对象图。如果我然后进行另一个 DAO 或 DataStore 调用并要求 Morphia 获取一些已经在第一个图中实例化的对象，Morphia 会返回对已经实例化的对象的引用还是会创建一个新实例？

如果 Morphia 每次都返回一个新的对象实例，是否有人建议如何最好地创建一个不会复制已实例化对象的 Morphia 支持的存储库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T06:01:54.643

正如我在 Morphia 中看到的那样，它会重新阅读所有参考资料。这是我创建[Morphium](http://code.google.com/p/morphium/)的问题之一。我在那里集成了一个缓存层，因此如果您阅读参考，则不会再次阅读此参考（至少，如果您按 ID 搜索...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T22:19:05.727

我们在生产中使用吗啡，有两种方法可以确保您不加载引用，这也是我们遇到的问题。

一种是在主类中定义 @Reference 元素时使用延迟加载选项。这当然意味着这种行为对于该对象是“全局的”。

更好的方法是不使用 Morphia 定义 @Reference，而是自己管理引用。如果您需要代码示例，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T20:59:07.760

我也停止使用@Reference，而是声明如下：

```
 ObjectId itemId 
```

而不是有一个字段项。这有两个好处：（1）它允许我通过我用对象缓存编写的帮助器 getObject(...) 方法定义一个 getter；（2）它在 Mongo 对象中存储一个简单的 ObjectId 而不是完整的 DBRef包括集合名称，因此大约是数据大小的两倍。

# php - 将 URI 段传递给 Codeigniter 函数

> ID：10325375
> 
> 赞同：1
> 
> 时间：2012-04-25T23:45:49.367
> 
> 标签：php, codeigniter

假设我有一个`view`通过 URI 接收变量的方法。

前任。[http://www.domain.com/item/view/200](http://www.domain.com/item/view/200)

将传入的变量转换为正确的类型是否有意义？在这种情况下，制作`$item_id`成`int`哪个是预期的。

例如，在控制器中...

```
function view($item_id) {
    if ( $this->item_model->checkItem( (int) $item_id )) {
    ...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:51:31.077

### 是的，像你一样将变量转换为整数是可以的。

将段传递给函数的方式就像

```
$segment = $this->uri->segment(2); //get the second segmention
           // ^ You can send a default Values as well if itemid is not set
           // Like: $this -> uri -> segment(2, '0')
//now pass it to the function you need 
```

# sql - 在数据库中存储发票

> ID：10325386
> 
> 赞同：8
> 
> 时间：2012-04-25T23:48:09.023
> 
> 标签：sql, database, normalization

我正在制作一个发票软件，我希望它可以保存每张发票。

用户通过选择客户来创建发票，以及向客户计费的许多项目。鉴于大多数发票都会有多个项目，将它们保存到数据库而不是令人难以置信的冗余的最佳方法是什么？如果需要，我愿意重新排列我的整个数据库。

我的表如下所示：

客户表：

```
Id        / Primary key
FullName
Address
Phone 
```

项目表（提供的产品表）：

```
Id        / Primary key
ItemName
Price
Description 
```

发票表（已保存的发票）：

```
Id        / Primary key
CustId    / Foreign key is Id in Customer table
ItemId    / Foreign key is Id in Item table
Notes 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T23:52:55.280

您需要另一个表来存储发票（您`Invoices`现在所说的实际上是存储*发票项目*）。

```
Customer
    id
    name
    etc.

Item
    id
    name
    etc.

Invoice
    id
    cust_id
    date

InvoiceItem
    id
    inv_id
    item_id 
```

这是使用联结表（即）建模[*多对多*关系的经典方法。](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)`InvoiceItem`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T23:53:43.940

看起来你实际上想要第四张桌子加入他们。要规范化您的数据，请仅在每一行保留该发票特定的内容

发票表

```
Id        / Primary key
CustId    / Foreign key is Id in Customer table
Notes 
```

发票项目表

```
InvoiceId
ItemId 
```

# c# - 在 struct c# 中填充数组

> ID：10325388
> 
> 赞同：0
> 
> 时间：2012-04-25T23:48:28.660
> 
> 标签：c#, arrays, struct, assign

我正在尝试用一些值填充包含在结构中的数组，但无论我尝试什么，我都会遇到错误。

我的结构看起来像这样

```
public struct boardState
    {
        public int structid;
        public char[] state;
    } 
```

在初始化程序下面我正在创建一个新的 boardState 并尝试用一些像这样的值填充它

```
boardState _state_ = new boardState();
        _state_.structid = 1;
        _state_.state[9] = {'o','-','-','-','o','-','-','-','-','o'}; 
```

structid 似乎工作正常，但我在 {'o','-' etc etc} 告诉我'; 预期的'。我已经浏览了上面的代码，并确保没有 ;'s 丢失（由运行没有此行的程序确认）所以我猜你不能以这种方式分配给数组。如何分配给状态数组？

编辑： - 添加了我错过但仍然出现相同错误的逗号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:51:22.763

您缺少逗号并且语法已关闭。

**从：**

```
_state_.state[9] = {'o','-','-','-','o','-','-','-','-''o'}; 
```

**到：**

```
_state_.state = new char [] {'o','-','-','-','o','-','-','-','-','o'}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T23:54:19.573

你不需要`[9]`。它尝试将数组分配给单个字符。相反，只需使用这个：

```
_state_.state = new char [] {'o','-','-','-','o','-','-','-','-','o'}; 
```

# wpf - 无法共享 ValidationRules 时在 DataTemplates 中重复使用的绑定实例

> ID：10325407
> 
> 赞同：5
> 
> 时间：2012-04-25T23:51:09.303
> 
> 标签：wpf, data-binding, datatemplate, validationrules

我正在寻找解决方案和/或为什么在 DataTemplate 中共享 Binding 实例的合理性。这最终归结为这样一个事实，即在 DataTemplate 中，似乎无法为生成的每个控件强制在 DependencyProperty 上创建一个新的绑定实例。在所有情况下，这可能是一个公平且良好的假设，除非有 ValidationRules 表示该控件实例的特定内容。

详细说明（我可以提供代码，但我认为没有必要），我使用 IsEnabled 上的 DependencyPropertyDescriptor 来更新属于 TextBox.Text 绑定、DatePicker.Text 绑定或 ComboBox.SelectedValue 绑定的一个或多个 ValidationRules等。这个想法是，当未启用控件时，验证将不同或不受欢迎。

因此，ValidationRule 的 IsEnabled 状态特定于单个控件，并且因为 ValidationRule 集合是 Binding 的一部分并且正在共享 Binding 实例 - 每个最终共享该绑定的控件都将更新/覆盖之前的 IsEnabled 值由先前生成的控件的 IsEnabled 值应用。

IsEnabled 只是 ValidationRule（另一个自定义 IsRequired DependencyProperty）中的至少两个属性之一，它们表示应用了 Binding 的控件的状态。在 DataTemplate 之外工作时（IE：Binding 实例不共享），这非常有效，并且可以根据控件的状态忽略/更改验证逻辑。我并没有拒绝替代方案，但确实觉得这一直是（抛开这个问题）一个非常灵活和动态的选项，它允许 Binding 实例 ValidationRule 和规则的控制更改状态毫不费力地发展。这也使我能够避免其他明显但更丑陋的选项，例如创建多个绑定，每个绑定代表 ValidationRule 的组合之一*颤抖*

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T13:25:04.360

我建议您在 DataTemplate 定义中使用[x:Shared 属性。](http://msdn.microsoft.com/en-us/library/aa970778%28v=vs.110%29.aspx)

```
<DataTemplate x:Key="DataTemplateKey" DataType="{x:Type YourType}" x:Shared="False">
    ...
</DataTemplate> 
```

由于您使用它，WPF 将在每个请求上创建一个新的 DataTemplate 实例。

# python - 设置一个全局变量来做一个功能

> ID：10325417
> 
> 赞同：2
> 
> 时间：2012-04-25T23:52:29.977
> 
> 标签：python, python-3.x

我正在尝试设置一个全局变量“帮助”来显示我在代码中拥有的函数。目标是只要用户输入“帮助”一词，我就可以显示我创建的表格。该函数称为我要显示的 table()。我的代码如下：

```
def table():
    header=(" Operation      Command-line Format")
    underline=("_________      ___________________")
    meat=("Union                   set1&set2 \n Intersection            set1|set2 \n Difference              set1-set2 \n Symmetric difference    set1 ^ set2 \n Cartesian product       set1 X set2 \n Subset                  set1<=set2 \n Proper subset           set1<set2 \n Super set               set1=>set2 \n Proper super set        set1>set2 \n Cardinality             card set1 \n Membership-in           xE set1      where x is single element\n Membership-not-in       x!Eset1      where x is single element\n Power set               power set1\n Display this table      help") 
    print(header, "\n",underline,"\n",meat) 

def intro():

    firstChoice=input("Would you like to get the sets from a file or input your own? \n Press 1 for from file \n Press 2 to input your own")
    if input is 'help':
        table()

    if firstChoice== '1':
        fileChoice=input("Please enter the fle you would like to open")

        with open(fileChoice, 'r+') as f:

            z=f.readlines()
            length=len(z)
            try:
                if z != len(z):
                    fileSet1=z[length-length]
                    if length-length != " ":
                        fileSet1=fileSet1.strip('\n')
                        fileSet1=str(fileSet1)
                        fileSet1.split(',')
                        fileSet1=set([fileSet1])
                    fileSet2=z[length-length+1]
                    if length-length+1 != " ":
                        fileSet2=fileSet2.strip('\n')
                        fileSet2=str(fileSet2)
                        fileSet2.split(',')
                        fileSet2=set([fileSet2])
                    fileSet3=z[length-length+2]
                    if length-length+2 != " ":
                        fileSet3=fileSet3.strip('\n')
                        fileSet3=str(fileSet3)
                        fileSet3.split(',')

                        fileSet3=set([fileSet3])

                    fileSet4=z[length-length+3]
                    if length-length +3 != " ":
                        fileSet4=fileSet4.strip('\n')
                        fileSet4=str(fileSet4)
                        fileSet4.split(',')

                        fileSet4=set([fileSet4])

                    print ("This is fileSet1 \n",fileSet1)
                    print ("This is fileSet2 \n",fileSet2)
                    print ("This is fileSet3 \n",fileSet3)
                    print ("This is fileSet4 \n",fileSet4)

            except:
                try:
                    print ("This is fileSet1 \n",fileSet1,"\nThis is fileSet2 \n",fileSet2,"\nThis is fileSet3 \n",fileSet3)
                except:
                    print ("This is fileSet1 \n",fileSet1,"\nThis is fileSet2 \n",fileSet2)

            f.close()

    elif firstChoice== '2':
        keep_going= 'yes'
        userSet=input("Please enter the set you would like to use. " )
        userSet1=userSet.split(',')
        userset1=set(userSet1)

        print("User set 1 ", userset1)
        keep_going=input("would you like to go again? Please respond with yes or no")
        while keep_going == 'yes':
            userSet=input('what other set would you like to use? ')
            userSet2=userSet.split(',')
            userset2=set(userSet2)

            print ("user set 2 ", userset2)
            keep_going=input ("Would you like to use another set too? ")
            if keep_going== 'yes':
                userSet=input("Th other set you would like to use?")
                userSet3=userSet.split(',')
                userset3=set([userSet3])
                print("user set 3 ", userset3)
                keep_going=input("would you like to keep going? ")
                if keep_going== 'yes':
                    userSet=input("Th other set you would like to use?")
                    userSet4=userSet.split(',')
                    userset4=set([userSet4])
                    print("user set 4 ", userset4)
                    keep_going==input("Another one?")
                    if keep_going == 'yes':
                        print ("i don't think we need another set")
                        keep_going='no'

    firstSet=input("which set would you like to use for operations \nplease type in userset1,userset2, userset3, userset4 or \n                fileSet1,fileSet2,fileSet3 or fileSet4  ")
    if firstSet == "userset1":
        set1=userset1

        print ("this is set1",set1)
    elif firstSet =="userset2":
        set1=userset2

        print ("this is set1",(set1))
    elif firstSet =="userset3":
        set1=userset3

        print ("this is set1",(set1))
    elif firstSet =="userset4":
        set1=userset4

        print ("this is set1",(set1))
    elif firstSet =="fileSet1":
        set1=fileSet1

        print ("this is set1",(set1))
    elif firstSet =="fileSet2":
        set1=fileSet2

        print ("this is set1",(set1))
    elif firstSet =="fileSet3":
        set1=fileSet3

        print ("this is set1",(set1))
    elif firstSet =="fileSet4":
        set1=fileSet4

        print ("this is set1",(set1))
    else:
        print ('your bad')

    secondSet=input("What other set would you like to use for operations \n please type in userset1,userset2, userset3, userset4, setFile ")
    if secondSet == "userset1":
        set2=userset1

        print ("this is set2",set2)
    elif secondSet =="userset2":
        set2=userset2

        print ("this is set2",(set2))
    elif secondSet =="userset3":
        set2=userset3

        print ("this is set2",(set2))
    elif secondSet =="userset4":
        set2=userset4

        print ("this is set2",(set2))
    elif secondSet =="fileSet1":
        set2=fileSet1

        print ("this is set1",(set1))
    elif secondSet =="fileSet2":
        set2=fileSet2

        print ("this is set1",(set1))
    elif secondSet =="fileSet3":
        set2=fileSet3

        print ("this is set1",(set1))
    elif secondSet =="fileSet4":
        set2=fileSet4

        print ("this is set1",(set1))

    else:
        print ('your bad')

    table()

    commandinput=input("please select the operation you would like to do")
    commandinput=commandinput.split()
    if '&' in commandinput:
        union=set1.union(set2)
        print(union)
    elif '|' in commandinput:
        intersetction=set1.intersection(set2)
        print(intersection)
    elif '-' in commandinput:
        difference=set1/difference(set2)
        print(difference)
    elif '^' in commandinput:
        symmetric=set1.symmetric_difference(set2)
        print(symmetric)
    elif 'X' in commandinput:
        print ("HIGH")

    elif '<=' in commandinput:
        subset=set2.issubset(set1)
        print(subset)
    elif '<' in commandinput:
        print ("HIGH")
    elif '=>' in commandinput:
        subset=set2.issuperset(set1)
        print(subset)
    elif '>' in comandinput:
        print ("HIGH")
    elif 'card' in commandinput:
        length=len(set1)
        print(length)
    elif 'E' in commandinput:

        x=input("what would you like to search for")
        if x in set1:
            print ( "It is in here!!")
        else:
            print("It isn't in here")

    elif '!E' in commandinput:
        x=input("what would you like to search for ")
        if x in set1:
            print ("It is in here")
        else:
            print ("Not here!")
    elif "power" in commandinput:
        print ("HIGH")
    elif 'help' in commandinput:
        print(table())

intro() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T00:15:09.967

你应该使用`==`，而不是`is`。 `is`测试字符串是否是内存中完全相同的对象，它们可能不是。

`if firstChoice == 'help':`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:02:34.627

我认为您正在检查错误的变量名。

> ```
> firstChoice=input("Would you like to get the sets from a file or input your own? \n Press 1 for from file \n Press 2 to input your own")
> if input is 'help':
>     table() 
> ```

应该

> ```
> firstChoice=input("Would you like to get the sets from a file or input your own? \n Press 1 for from file \n Press 2 to input your  own")
> if firstChoice is 'help':
>     table() 
> ```

# python - 跳过多边形/地板碰撞检测

> ID：10325418
> 
> 赞同：0
> 
> 时间：2012-04-25T23:52:42.283
> 
> 标签：python, collision-detection, pygame

我正在尝试在 pyGame 中实现一个 Mario 类型的平台。我有使用多边形的碰撞检测没问题。我很好奇如何让玩家能够跳过他上方的地板，这是一个漂浮在空中的多边形。

关于如何处理的理论是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:49:13.903

你可以这样做，当你的角色撞到一个方块时，它们会以当前速度向上移动，直到它们不再与多边形碰撞。这样，当你从上面撞到地面时，你不会向下穿过它，但当你撞到底部时，你会穿过它。我建议将 while 循环设置为 collide 函数。

# java - 使用 xpath 或 cssSelector 解析 HTML？

> ID：10325425
> 
> 赞同：0
> 
> 时间：2012-04-25T23:53:32.787
> 
> 标签：java, html, parsing, selenium

如何仅解析这些代码块的文本部分？我在 java 中使用 Selenium 客户端驱动程序。

```
<li id="NOT_PUT_PREF_STORE" style="">
<span id="STORE_AVAIL" class="BodyLBoldGrey StockStat">Out of stock</span> <span id="InYourLocal">in your local</span> <span id="storeRollover_2"><span id="STORE_CITY" class="BodyLBoldLtgry VIBSStore1">West Hills</span></span> store<span id="notSelectOptionSOI">.</span>
</li> 
```

或者

```
<li id="NOT_PUT_PREF_STORE" style="">
<span id="STORE_AVAIL" class="BodyLLtgry StockStat">Not carried</span> <span class="BodyLLtgry" id="InYourLocal">in your local</span> <span id="storeRollover_2"><span id="STORE_CITY" class="BodyLBoldLtgry VIBSStore1">West Hills</span></span> store<span id="notSelectOptionSOI">.</span>
</li> 
```

或者

```
<li id="NOT_PUT_PREF_STORE" style="">
<span id="STORE_AVAIL" class="BodyMBold StockStatGreen">In stock</span> <span id="InYourLocal">in your local</span> <span id="storeRollover_2"><span id="STORE_CITY" class="BodyLBoldLtgry VIBSStore1">West Hills</span></span> store<span id="notSelectOptionSOI">.</span>
</li> 
```

我正在尝试解析 web 元素中每个变体中的文本部分（即：未携带、有货、缺货）。我是 selenium 和 html 解析的新用户，所以这对我来说很难发挥作用。

我在想它会是这样的

```
WebElement driver = new FirefoxDriver(profile);
driver.get(Url);
System.out.println(driver.getElement(By.id("STORE_AVAIL").getText()); 
```

不知道如何使用 cssSelector 做到这一点，但人们告诉我这更快。这行得通吗？

```
driver.getElement(By.xpath("//li[@id='NOT_PUT_PREF_STORE']./span[@id='STORE_AVAIL']").getText() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:07:08.050

当您“查看页面源代码”时，它只会显示原始 HTML 源代码。它**不会**显示 AJAX 调用所做的更改，这看起来就像沃尔玛页面正在更新该部分/元素。这个[问题](https://stackoverflow.com/questions/1750865/best-way-to-view-generated-source-of-webpage)提供了更好的解释。

假设您使用的是 Firefox（基于您使用的驱动程序），您可以转到该页面并单击 Ctrl+Shift+I 以调出 Inspector 工具。选择您感兴趣的元素。然后单击 [HTML] 按钮（在 Inspector 菜单中）以查看当前源。

请注意，当您使用 selenium webdriver 获取元素时，它将获取当前值而不是页面源中看到的原始值。因此，您不必担心在页面源中看到的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:24:52.763

当我尝试在页面上查找元素时，我总是通过以下方式构建定位器：

1.  身份证=`driver.getElement(By.id("STORE_AVAIL").getText());`
2.  CSS 选择器 =`driver.getElement(By.css("span#STORE_AVAIL").getText());`
3.  xpath =`driver.getElement(By.xpath("//span[@id='STORE_AVAIL']").getText());`

对于 webdriver 和我来说，id 似乎是最快和最简单的。id 在页面上应该是唯一的。

CSS 需要我做更多的调查工作，但 webdriver 处理得很好。

最后，xpath 有时是不可避免的（除非你给开发者买了一杯啤酒并很好地要求更改为应用程序以便你可以更快地找到它——毕竟，无论如何你都是在为它们进行测试）。使用 IE 通过 xpath 定位非常慢，编写复杂的 xpath 很麻烦。

Xpath 也很脆弱，对 dom 的一个小改动可能会使您的 xpath 无法使用。然后你可以调试/重写你的 xpath（听起来很有趣）。

我的建议是使用 Firefox 的 Firebug 和 FirePath 插件来帮助您制作定位器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T04:55:40.143

我尝试使用以下 html 代码片段

```
<li id="NOT_PUT_PREF_STORE" style="">
<span id="STORE_AVAIL" class="BodyLBoldGrey StockStat">Out of stock</span> <span id="InYourLocal">in your local</span> <span id="storeRollover_2"><span id="STORE_CITY" class="BodyLBoldLtgry VIBSStore1">West Hills</span></span> store<span id="notSelectOptionSOI">.</span>
</li>
```

我正在使用以下代码来解决它。我使用 XPath 获取 span 元素树，并解析其中的每一个以获取元素的文本。

```
driver.navigate().to("file:///C:/Users/abc/Desktop/test.html");
    List<WebElement> spanEle = driver.findElements(By.xpath("//li/span"));
    for (int i = 0; i < spanEle.size(); i++) {
             System.out.println(spanEle.get(i).getText()); 
```

# lua - “ '}' 预期在 '=' 附近出现”错误出现在原本看起来很完美的行中

> ID：10325444
> 
> 赞同：8
> 
> 时间：2012-04-25T23:56:17.293
> 
> 标签：lua

当我尝试运行我的脚本时，我收到一个返回变量赋值的错误。我已经多次重新检查我的语法，这似乎不是我在那里犯的错误——我什至让其他人查看它以防万一。但是，不断返回的错误将我指向语法，我似乎无法找到解决此问题的方法。

这是整个麻烦的功能：

```
 function registerquestlines()
       if player["testline"] == nil then
            player["testline"] = {"prog" = {true,false,false}, "quests" = {"testline1", "testline2", "testline3"}, "prog#" = 1}
       end
    end 
```

同样，我得到的错误是：在我将值分配给播放器 [“testline”] 的行上的 '=' 附近应该有 '}'。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T00:08:47.933

表初始值设定项使用不带引号的名称或带括号的表达式，而不是带引号的名称。

```
{prog = {true,false,false}}
{["prog"] = {true,false,false}} 
```

# java - 关于在 JGAP 中使用多线程，我应该知道任何“陷阱”吗？

> ID：10325446
> 
> 赞同：4
> 
> 时间：2012-04-25T23:56:33.010
> 
> 标签：java, multithreading, synchronization, genetic-programming, jgap

我正在从事一个遗传编程项目，该项目试图生成代表图像的 GP。我的方法是将图像分成不同的独立部分，并让单独的线程对它们进行进化工作。

由于事情将是异步的，自然你也希望对象是独立的。问题是我注意到 JGAP 中的某些对象实际上是共享变量，因此它们将在线程之间共享，这会导致很多问题。例如，我注意到所有具有相同名称的[变量](http://jgap.sourceforge.net/javadoc/3.4.4/org/jgap/gp/terminal/Variable.html)都是相同的，这意味着如果我想同时评估多个 IGPProgram，我必须锁定该变量，这确实会影响性能。

我还注意到，如果您尝试创建多个 GPConfiguration，程序会抱怨您必须先重置它。所以在我看来，所有 GPConfigurations 都是共享的（即你不能让多个线程同时创建多个配置），这是一个问题，因为创建 GPProblems 可能需要很多时间，而我正在创建很多 GPProblems ，所以我希望通过将工作分成多个线程来减少所花费的时间。

在使用 JGAP 和线程时，我需要了解任何“陷阱”吗？不幸的是，JGAP 文档中没有过多地涉及多线程，我希望我能从可能有 JGAP 经验的人那里得到一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:55:47.930

根据[常见问题解答](http://jgap.sourceforge.net/doc/faq.html)，JGAP“确实支持多线程计算”。然而，这并不意味着整个 API/对象图是完全线程安全的。您是否有演示您遇到的问题的代码示例？我认为如果不稍微完善您的问题，您将不会得到规范的答案。

[在 JGAP发行版](http://sourceforge.net/projects/jgap/files/latest/download?source=files)zip中有一个线程示例`examples/src/examples/simpleBooleanThreaded`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T05:05:06.483

如果您希望某些变量不要跨线程共享，并进行细微更改以让代码支持多线程。您可以使用[ThreadLocal。](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)

[我应该何时以及如何使用 ThreadLocal 变量？](https://stackoverflow.com/questions/817856/when-and-how-should-i-use-a-threadlocal-variable)

# php - 在 Google Analytics 目标中跟踪表单输入

> ID：10325453
> 
> 赞同：1
> 
> 时间：2012-04-25T23:57:21.793
> 
> 标签：php, javascript, magento, google-analytics

我有一个帐户注册表单，用户可以在其中选择他们的帐户类型。我在谷歌分析中设置了一个目标，它有一个注册漏斗，从注册表格开始，到感谢页面结束。我还希望能够跟踪目标或另一个目标中的帐户类型数量。

在下面的代码中，我有一些单选按钮来选择帐户类型，然后在各种其他表单字段之后显然有一个提交按钮。

我的网站是 Magento/PHP。

```
<label><input type="radio" name="account_type" value="personal">Personal</label>
<label><input type="radio" name="account_type" value="business">Business</label>
[...]
<button role="button" title="Apply" type="submit">Apply</button> 
```

我将不胜感激任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:16:56.207

在您的“谢谢”页面上，除了常规的页面代码外，您还可以使用信息设置[自定义变量](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)。或者，您可以在访问者进行选择时（在单击事件期间）或在表单提交（提交按钮上的 js 回调函数）时弹出它，但理想情况下，因为您只想在成功的表单提交时弹出它，最好的方法是在感谢页面上跟踪它。

示例“谢谢”页面代码：

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', '[your account id here]']);
  _gaq.push(['_setCustomVar',1,'Account Type','[radio button value here]',2]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

编辑：

上述方法是使用所需信息设置自定义变量。这将引入新的维度和指标以在您的报告中使用。IMO 以上是跟踪此类事情的最佳方式。

但是，在下面的评论中，greg 提到您可能会问如何将其作为目标的一部分进行跟踪。您可以做的一件事是使用自定义 URL 在其上调用 _trackPageview。例如（这只是一个示例，用于演示原理......理想情况下，您可能希望在其他地方调用它，例如在获取表单值的包装函数中......）

`<button onclick="_gaq.push(['_trackPageview','/forms/accountType/[radio button value here]']);" role="button" title="Apply" type="submit">Apply</button>`

如果您像这样跟踪它，那么您将能够将此虚拟页面名称作为一个步骤包含在您*当前*的目标漏斗中。但是，请注意，此方法会增加您的页面浏览量并与您的其他指标挂钩；您必须记住从所有其他报告中排除这些页面浏览量！

另一种选择是将[其作为事件进行跟踪](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)，您可以根据事件制定*单独*的目标。例子：

`_gaq.push(['_trackEvent', 'Forms', 'Account Type', '[radio button value here]']);`

你可以像上面的第二个代码示例那样把它放在一个 onclick 中，或者你可以把它放在“谢谢”页面上，就像上面的第一个代码示例一样（我建议把它放在谢谢页面上）。

# php - 将列值存储在数组中

> ID：10325458
> 
> 赞同：0
> 
> 时间：2012-04-25T23:57:43.177
> 
> 标签：php, mysql

我正在尝试将事件的标题（摘要）和日期（创建）存储在数组中。但我认为我在循环中遗漏了一些东西。

```
<?php
$summary = array();
$date = array();

mysql_connect('mysql.server', 'myUsername', 'myPass') or die('Could not connect: ' . mysql_error());
mysql_select_db("mxgsite") or die(mysql_error());
$query_summary = mysql_query('SELECT summary FROM event_info') or die(mysql_error());
$query_date = mysql_query('SELECT created FROM event_details') or die(mysql_error());

$row_summary = mysql_fetch_array($query_summary);
$row_date = mysql_fetch_array($query_date);

$i = 0;
while(($row1 = mysql_fetch_array($query_summary))) {
    $row2 = mysql_fetch_array($query_date);
    $summary[] = $row['summary'];
    $date[] = $row['created'];
    echo $summary[$i] . " " . $date[$i] . "<br ?>";
    $i++;
} 
```

我知道我正在获取值，因为我可以回显 1 个值，但是如果我想将所有值放在一个数组中并尝试回显该数组，我会不断得到空白值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T00:05:22.133

在我看来，您在这里尝试做的事情太多了。由于 2 组值没有以它们相互关联/链接的方式存储，因此您不妨在单独的 while 循环中处理它们。尝试这样的事情：

```
 while ($row = mysql_fetch_array($query_summary)){
     $summary[] = $row[0];
 }
 while ($row = mysql_fetch_array($query_date)){
     $date[] = $row[0];
 } 
```

如果您想关联表格，根据上面的评论，您可以尝试更多类似的东西：

```
$result = mysql_query('SELECT a.eventid, a.summary, b.created 
                         FROM event_info a 
                         join event_details b 
                         on a.eventid = b.eventid');

$events = array();

while ($row = mysql_fetch_array($result)){
    $event = array();
    foreach ($row as $key=>$value){
      $event[$key]=$value;
    }
    $events[] = $event;
} 
```

# html - 水平导航栏...垂直对齐元素

> ID：10325461
> 
> 赞同：5
> 
> 时间：2012-04-25T23:57:58.783
> 
> 标签：html, css, layout, vertical-alignment

我目前有以下代码。我试图让第二个、第三个和第四个“li”元素在导航栏的中间垂直对齐。第一个“li”是图像，第二个到第四个都是文本。

这是当前的屏幕截图。

[http://i49.tinypic.com/bfesl3.png](http://i49.tinypic.com/bfesl3.png)

我尝试过使用“vertical-align:middle”和填充。请注意，如果在 Firefox 中而不是在其他浏览器中查看，第二个、第三个和第四个“li”元素会在中间垂直对齐。

这是我的代码。

```
<ul class = "nav">

<li><a href="index.html" style="border-right:1px #FFFFFF solid; padding-top:4.6px; padding-bottom:17.3px;"><img src="img/randomtitle.png" style="padding-left:8px;padding-top:8px;"/></a></li>
<li><a href="aboutme.html" style="vertical-align:middle;padding-top:32px;margin-left:-15px;padding-bottom:14px;padding-right:20px;border-right:1px #ffffff solid;">about me</a></li>
<li><a href="films.html" style="vertical-align:middle;padding-top:32px;margin-left:1px;padding-bottom:14px;padding-right:30.5px;border-right:1px #ffffff solid;">films</a></li>
<li><a href="contactme.html" style="vertical-align:middle;padding-top:32px;margin-left:-20px;padding-bottom:14px;padding-right:11px;border-right:1px #ffffff solid;">contact me</a></li>

<span class="navlinkimages">
<li><a href=  target="_blank"><img src="social/social_vimeo.png" height = "30px" style = "margin-right:-14px;"/></a></li>
<li><a href= target="_blank"><img src="social/social_youtube.png" height = "30px" style = "margin-right:-14px;"/></a></li>
<li><a href= target="_blank"><img src="social/social_facebook.png" height="30px" style = "margin-right:-14px;"/></a></li>
<li><a href=  target="_blank"><img src="social/social_twitter.png" height = "30px" style = "margin-right:-14px;" /></a></li>
</span>
</ul>` 
```

CSS 代码：

```
.nav {
    list-style-type:none;
    padding-left:0;
    margin-left:0;
    font-family:DinC;
    padding-bottom:5px;
    background-color: #000000;
    border-radius:5px;
    height:35px;
}

.navlinkimages {
  float:right;
  padding-top:5px;
}

.nav li {
  display:inline;
  vertical-align:middle;
}

ul.nav a:hover {
  color:#FA4B2A;
}

.nav li img {
  vertical-align:middle;
}

ul.nav a{
  text-decoration:none;
  margin-right:27px;
  color:#FFFFFF;
} 
```

有没有办法让它在所有浏览器上垂直对齐？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T23:59:24.443

试试这个：

```
.nav li {
  display:inline;
  vertical-align:middle;
  line-height:35px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:02:03.563

给每个人`li a`上课`middle`：

```
<li>
    <a class="middle" href="aboutme.html" style="REDACTED">about me</a>
</li> 
```

定义`middle`如下：

```
.middle {
    line-height: 35px; /** or same as ul height */
} 
```

内联元素始终在其行高内垂直居中。

[**演示**](http://jsfiddle.net/paislee/3NVhw/)

# colors - 将 CMYK 中的颜色转换为十六进制的公式是什么？

> ID：10325469
> 
> 赞同：4
> 
> 时间：2012-04-25T23:59:09.803
> 
> 标签：colors, hex, cmyk

将 CMYK 编码的颜色转换为其十六进制等效值的公式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T00:11:08.573

我要告诉你一个坏消息：没有简单的公式。青色、品红色和黄色是复杂的墨水颜色，转换为 RGB 取决于[颜色配置文件](https://en.wikipedia.org/wiki/ICC_profile)。更糟糕的是，CMYK 颜色空间小于 RGB 颜色空间。关于色彩理论的一些提示：

*   [手印：存在“原色”吗？](http://www.handprint.com/HP/WCL/color6.html)
*   [在计算机屏幕上正确绘制颜色](http://casa.colorado.edu/~ajsh/colour/rainbow.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-29T10:39:56.903

它可以用javascript完成：

```
//converts cmyk to hex
function cmykToHex(c,m,y,k) {
    var hex,
        rgb;
    //convert cmyk to rgb first
    rgb = cmykToRgb(c,m,y,k);
    //then convert rgb to hex
    hex = rgbToHex(rgb.r, rgb.g, rgb.b);
    //return hex color format
    return hex;
}
//converts cmyk color to rgb
function cmykToRgb(c, m, y, k) {
var rgb_r,
    rgb_g,
    rgb_b,
    cyan = 100 *Number(c),
    magenta = 100 * Number(m),
    yellow = 100 * Number(y),
    black = 100 * Number(m);
    0 < cyan ? cyan /= 100 : 0 < magenta ? magenta /= 100 : 0 < yellow ? yellow /= 100 : 0 < black && (black /= 100);
    rgb_r = 1 - Math.min(1, cyan * (1 - black) + black);
    rgb_g = 1 - Math.min(1, magenta * (1 - black) + black);
    rgb_b = 1 - Math.min(1, yellow * (1 - black) + black);
    rgb_r = Math.round(255 * rgb_r);
    rgb_g = Math.round(255 * rgb_g);
    rgb_b = Math.round(255 * rgb_b);
    return {r: rgb_r, g: rgb_g, b: rgb_b};
}
//converts rgb to hex
function rgbToHex(r, g, b) {
    return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
    function componentToHex(c) {
        var hex = c.toString(16);
        return hex.length === 1 ? "0" + hex : hex;
    }
} 
```

# php - 将项目循环到不同的div中

> ID：10325478
> 
> 赞同：0
> 
> 时间：2012-04-26T00:00:40.713
> 
> 标签：php, random, html

我的 css 中有十个跨度，它们都有不同的宽度：span1、span2、span3...、span10。

我想循环一系列帖子并以随机跨度名称显示每个帖子......

如果没有在 html 中硬编码跨度并使用多个查询，我怎么能实现这样的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:09:06.220

```
<?php

$posts=array('a','b','c');

$rand=range(1,10);
shuffle($rand);
$count=current($rand);
foreach($posts as $p){
    echo '<span style="css'.$rand[$count].'">'.$p.'</span>';
    $count=next($rand);
} 
```

# javascript - 将 JSON 数据附加到自定义 JQuery 函数中

> ID：10325483
> 
> 赞同：0
> 
> 时间：2012-04-26T00:01:14.873
> 
> 标签：javascript, jquery, json

我正在尝试将一些 json 数据加载到自定义 JQuery 函数中。我承认我在学习的过程中可能有一个简单的解决方案。请告知我是否只是以错误的方式进行。

到目前为止，我只是将它附加到正文中，以确保我实际上正确地找到了数据。我也试图使用 append() 将其添加到函数中，但没有得到任何地方。

```
$.getJSON("designs/new.json",function(result){
        $.each(result, function(i, field){
            $("body").append(field['hex'] + " ");
        });
}); 
```

基本上我想做的是用我上面的 json 数据中的十六进制代码替换这个 colorPicker 函数的十六进制数据值。我已经搞砸了一段时间，似乎找不到正确的方法。

```
$.fn.colorPicker.defaults.colors = ['000', '000', 'fff', 'fff']; 
```

我提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:21:16.723

如果我理解正确：

1）您的 JSON 返回一个对象数组（大概四个？），每个对象都有一个“十六进制”属性。2）您想根据这四个十六进制属性设置颜色选择器的默认颜色。

因此，假设我的假设是正确的并且您的数组已正确排序，您可以执行以下操作：

```
$.getJSON("designs/new.json",function(result){
        $.fn.colorPicker.defaults.colors = $.map(result, function(i) {
            return i.hex;
        });
}); 
```

我已将十六进制属性映射到一个数组并将其直接分配给颜色。同样，这是假设您的结果对象中有一个由四个对象组成的数组，每个对象都有一个 hex 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T00:21:26.627

尝试使用 alert(JSON.stringify(result)) 来查看您的 json 数据是否正确加载。此代码应该可以工作：

```
$.getJSON("t.json", function (result) {
  //alert(JSON.stringify(result));
  $.fn.colorPicker.defaults.colors = result.colors;
}); 
```

其中 t.json 具有以下内容：

```
{
  "colors": ['00a', '00b', 'ffa', 'ffb']
} 
```

# c# - InsertFile 的 OpenXML SDK 替代方案是什么？

> ID：10325487
> 
> 赞同：2
> 
> 时间：2012-04-26T00:01:33.757
> 
> 标签：c#, ms-word, openxml, openxml-sdk

我目前正在做一个需要我能够合并两个 word 文档的项目。现在我正在使用自动化并让 Word 通过`InsertFile`. 尽管在服务器上自动化 Word 是不好的做法，但我注意到了这一点。那么我将如何使用 OpenXML SDK 或类似的东西来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:54:33.533

围绕 open xml有一个很好的包装 API（**Document Builder 2.2**），专门用于合并文档，可以灵活地选择要合并的段落等。您可以从[这里](http://powertools.codeplex.com/releases/view/74771)下载。

有关如何使用它的文档和屏幕截图在[这里](http://openxmldeveloper.org/wiki/w/wiki/documentbuilder.aspx)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:57:39.113

[您可以按照@ http://blogs.msdn.com/b/ericwhite/archive/2008/10/27/how-to-use-altchunk-for-document-assembly.aspx](http://blogs.msdn.com/b/ericwhite/archive/2008/10/27/how-to-use-altchunk-for-document-assembly.aspx)的说明使用 AltChunk

# macos - OSX：如何强制多文件复制操作来克服错误

> ID：10325489
> 
> 赞同：2
> 
> 时间：2012-04-26T00:01:40.833
> 
> 标签：macos, file, copy

这是大错特错了。

我想执行一个大的复制操作；将 250 GB 从我的笔记本电脑硬盘移动到外部驱动器。

OSX Lion 声称这将需要大约五个小时。

经过几个小时的反复，它报告无法复制一个特定文件（无论出于何种原因；我不记得了，我现在没有耐心重复实验）。

在那张纸条上，它保释了。

坦率地说，我感到震惊。

这个问题在这个时代仍然存在，这对我来说几乎是难以置信的。我记得 20 年前在 Windows 3.1 中遇到过同样的情况。

对于苹果（或微软）的人来说，以跳过失败的方式实现文件复制，将失败的操作列表即时写入标准错误有多难？该实现会有多大用处？（顺便说一句，这两个问题都是修辞性的；只是表达了我完全的困惑；请不要回答它们，除非通过评论或对实际问题的回答进行补充，如下：）。

更重要的是（这是我的实际问题），我如何在 OS X 中自己实现这个？

PS我对这里的所有解决方案持开放态度：程序化/脚本/第三方软件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T00:06:35.823

我听到并理解你的咆哮，但这几乎是一个超级用户类型的问题，而不是一个编程问题（只有你说你想自己实现这个事实才能保存）。

从描述来看，当 Finder 无法复制一个特定文件时，它听起来像是被保释了（我的猜测是它正在为某些特权文件夹寻找管理员和/或 root 权限）。

对于像这样的大量副本，您可以使用终端命令行：

例如

```
cp 
```

或者

```
sudo cp 
```

使用“-R”（即使检测到错误也会继续复制 - 除非您使用“传统”模式）或“-n”（如果文件已存在于目的地，则不要复制）之类的选项。`man cp`您可以通过在终端命令行输入“”来查看所有可能的选项。

如果您*真的*想以编程方式执行此操作，则在`NSWorkspace`（[`performFileoperation:source:destination:files:tag:`方法](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWorkspace/performFileOperation:source:destination:files:tag:)（为您链接的文档，查看常量）中有选项。您还可以通过“ ”和它的方法`NSWorkspaceCopyOperation`做更多低级的事情，但这真的很残酷-力量接近那里。`NSFileManager`[`copyItemAtPath:toPath:error:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/copyItemAtPath:toPath:error:)

# python - 有没有一种优雅的方法可以通过迭代循环遍历列表 N 次（如 itertools.cycle 但限制循环）？

> ID：10325494
> 
> 赞同：13
> 
> 时间：2012-04-26T00:02:11.557
> 
> 标签：python, iterator

我想通过迭代器重复（N次）循环遍历列表，以免实际将列表的N个副本存储在内存中。有没有内置的或优雅的方法可以在不编写我自己的生成器的情况下做到这一点？

理想情况下， itertools.cycle(my_list) 会有第二个参数来限制它循环的次数......唉，没有这样的运气。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-26T00:08:35.440

```
import itertools
itertools.chain.from_iterable(itertools.repeat([1, 2, 3], 5)) 
```

Itertools 是一个很棒的库。:)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-26T00:26:30.267

所有其他答案都很好。另一种解决方案是使用`islice`. 这使您可以随时中断循环：

```
>>> from itertools import islice, cycle
>>> l = [1, 2, 3]
>>> list(islice(cycle(l), len(l) * 3))
[1, 2, 3, 1, 2, 3, 1, 2, 3]
>>> list(islice(cycle(l), 7))
[1, 2, 3, 1, 2, 3, 1] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-26T00:07:23.660

```
itertools.chain.from_iterable(iter(L) for x in range(N)) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-26T00:14:06.613

对于需要多次迭代列表的特殊情况，这还不错。

它确实创建了一个`n`引用列表`my_list`，所以如果`n`非常大，最好使用 Darthfelt 的答案

```
>>> import itertools as it
>>> it.chain(*[my_list]*n) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-26T01:36:25.967

您说您不想编写自己的生成器，但是生成器表达式可能是完成您所追求的最简单和最有效的方法。它不需要任何函数调用或任何模块的导入。`itertools`是一个很棒的模块，但在这种情况下可能没有必要？

```
some_list = [1, 2, 3]
cycles = 3
gen_expr = (elem for _ in xrange(cycles) for elem in some_list) 
```

要不就

```
(elem for _ in xrange(3) for elem in [1, 2, 3]) 
```

或者

```
for elem in (e for _ in xrange(3) for e in [1, 2, 3]):
    print "hoo-ray, {}!".format(elem) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-08-22T20:55:11.870

@Darthfett 的答案被记录为[itertools recipes](https://docs.python.org/3/library/itertools.html#itertools-recipes)：

```
from itertools import chain, repeat

def ncycles(iterable, n):
    "Returns the sequence elements n times"
    return chain.from_iterable(repeat(tuple(iterable), n))

list(ncycles(["a", "b"], 3))
# ['a', 'b', 'a', 'b', 'a', 'b'] 
```

为方便起见，我补充说该[`more_itertools`](https://github.com/erikrose/more-itertools)库为您实现了这个秘诀（以及许多其他秘诀）：

```
import more_itertools as mit

list(mit.ncycles(["a", "b"], 3))
# ['a', 'b', 'a', 'b', 'a', 'b'] 
```

# gcc - 如何使用 gdb 读取所有寄存器的值？

> ID：10325498
> 
> 赞同：9
> 
> 时间：2012-04-26T00:02:35.700
> 
> 标签：gcc, assembly, linux-kernel, gdb, cpu-registers

我正在汇编中调试 ac 程序以了解 gcc 编译器的工作原理。我想读取我的 $fs 段寄存器，所以我使用 x/x $fs，但是它告诉我它无法访问内存。如何读取 i386:86_64 上包括段、通用和控制寄存器的任何寄存器？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T00:13:34.150

`info registers`为我打印出寄存器值，这就是您所要求的，我认为：

```
(gdb) info registers
rax            0x7ffff7731ec8   140737344904904
rbx            0x0  0
rcx            0x0  0
rdx            0x7fffffffd618   140737488344600
rsi            0x7fffffffd608   140737488344584
rdi            0x1  1
rbp            0x0  0x0
rsp            0x7fffffffd528   0x7fffffffd528
r8             0x7ffff7730300   140737344897792
r9             0x7ffff7dec250   140737351959120
r10            0x7fffffffd390   140737488343952
r11            0x7ffff73d0b50   140737341360976
r12            0x400be0 4197344
r13            0x7fffffffd600   140737488344576
r14            0x0  0
r15            0x0  0
rip            0x402330 0x402330 <main>
eflags         0x246    [ PF ZF IF ]
cs             0x33 51
ss             0x2b 43
ds             0x0  0
es             0x0  0
fs             0x0  0
gs             0x0  0
(gdb) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-15T13:56:38.830

```
info all-registers 
```

为您提供所有寄存器值，包括 FPU 寄存器堆栈、xmm 寄存器。

```
(gdb) i all-r
rax            0x2aaaaace62ce   46912498459342
rbx            0x2aab18e71290   46914345570960
rcx            0x2aaab2020d60   46912619285856
rdx            0xffffffffffd934ee       -2542354
rsi            0x2aab18ec7a40   46914345925184
rdi            0xa      10
rbp            0x2aab18e6f000   0x2aab18e6f000
rsp            0x2aab18e6f000   0x2aab18e6f000
r8             0xe      14
r9             0x2aab18eb1f08   46914345836296
r10            0x2aaab9085000   46912737136640
r11            0x0      0
r12            0x2aab18ec7170   46914345922928
r13            0x477f3280       1199518336
r14            0x7      7
r15            0x2aaada787000   46913298132992
rip            0x2aaaaae3b18e   0x2aaaaae3b18e <flt_fadd+4>
eflags         0x283    643
ds             0x0      0
es             0x0      0
fs             0x0      0
gs             0x0      0
st0            10       (raw 0x4002a000000000000000)
st1            3        (raw 0x4000c000000000000000)
st2            0        (raw 0x00000000000000000000)
st3            0        (raw 0x00000000000000000000)
st4            0        (raw 0x00000000000000000000)
st5            0        (raw 0x00000000000000000000)
st6            0        (raw 0x00000000000000000000)
st7            0        (raw 0x00000000000000000000)
fctrl          0x137f   4991
fstat          0x7000   28672
ftag           0xc0     192
fiseg          0xaae3afe5       -1427918875
fioff          0x2aaa   10922
foseg          0x18e6ee48       417787464
fooff          0x2aab   10923
fop            0x704    1796
xmm0           {f = {0x0, 0x6, 0x0, 0x0}}       {f = {0, 6.48876953, 0, 0}}
xmm1           {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm2           {f = {0x0, 0x1c0, 0x0, 0x0}}     {f = {0, 448, 0, 0}}
xmm3           {f = {0x0, 0x1, 0x0, 0x0}}       {f = {0, 1.75, 0, 0}}
xmm4           {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm5           {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm6           {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm7           {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm8           {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm9           {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm10          {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm11          {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm12          {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm13          {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm14          {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
xmm15          {f = {0x0, 0x0, 0x0, 0x0}}       {f = {0, 0, 0, 0}}
mxcsr          0x1fa0   8096 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T00:05:46.867

您必须使用`p`和`set`命令来读取/设置寄存器。每台机器的寄存器名称不同；使用信息寄存器查看您机器上使用的名称。有关示例的详细信息，请参阅GDB 手册的[寄存器](http://web.mit.edu/gnu/doc/html/gdb_10.html#SEC63)部分。

要打印`$fs`寄存器的值，您可以这样做：

```
(gdb) p/x $fs
$1 = 0x0 
```

命令所做的是`x`检查内存。但是，在某些情况下，您无法做到。例如，如果某个地址指向的内存受到保护。因此，如果您尝试检查虚拟地址处的内存`0x0`，gdb 显然拒绝这样做，例如：

```
(gdb) x/x $fs
0x0:    Cannot access memory at address 0x0 
```

希望能帮助到你。祝你好运！

# javascript - bootstrap.css 无法正确呈现部分标签

> ID：10325499
> 
> 赞同：1
> 
> 时间：2012-04-26T00:02:39.443
> 
> 标签：javascript, html, css, twitter-bootstrap

我试图弄清楚为什么我的引导程序中的滚动间谍不起作用。我发现部分标签是堆叠的，并且不能与它们的子元素一起正常工作。

Chromes计算样式（连同其他浏览器）如下：

```
background-color: transparent;
color: #333;
display: block;
font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
font-size: 13px;
height: 0px;
line-height: 18px;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 0px;
margin-top: 0px;
width: 940px; 
```

但是其中的数据`<section>`计算为：

```
background-color: transparent;
color: #333;
display: block;
float: left;
font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
font-size: 13px;
height: 317px;
line-height: 18px;
margin-bottom: 0px;
margin-left: 20px;
margin-right: 0px;
margin-top: 0px;
width: 780px; 
```

如果我注释掉 bootstrap.css （我没有编辑过），这些部分就是它们应该的样子。bootstrap 做的唯一事情是它设置`section`为`block`.

我想知道我的 HTML 是否会导致问题。我的页面布局是：

```
<body>
<div class="container">
    <header>
        <h1>HEADER</h1>
        <nav>
          <div class="subnav">
            <ul class="nav nav-pills">
              <li><a href="#overview">Introduction</a></li>
              <li><a href="#begin">The Beginning</a></li>
                  ...
            </ul>
          </div>
      </nav>
    </header>
    <section id="overview">
      <div class="span10">
        <h2>Introduction</h2>
        <hr class="full">
        <p> text text text text </p>
      </div>
    </section>
    <section id="begin">
      <div class="span10">
        <h2>The Beginning</h2>
        <hr class="full">
        <p> text text text text </p>
      </div>
    </section>
    ...
  </div>
  <script>..</script>
</body> 
```

所有部分仅以 1px 的间距相互堆叠。bootstrap.css 是什么导致了这个问题。这个还是我的布局？我已经用 javascript 样式编辑了每个变量，它直接指向 bootstrap.css。请帮我。

**更新**

我写了一个简单的页面，但它仍然不能`<section>`正确计算标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T01:01:53.673

答案很简单，但我花了几个小时才弄清楚。

对于`<section>`您需要在指定`<div class="row">`之前指定`<div class="span'somenumber'>`的每个标签，并且部分标签将正确计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:07:24.603

可能尝试`<section id="overview" class="row">`

# clojure - Clojure 中的标记和类似 Erlang 的引用

> ID：10325500
> 
> 赞同：0
> 
> 时间：2012-04-26T00:02:54.677
> 
> 标签：clojure

我正在寻找具有以下功能的数据结构或在 Clojure 中模拟它的方法（通过[http://www.erlang.org/course/advanced.html#refs](http://www.erlang.org/course/advanced.html#refs)）：

> 引用是具有两个属性的 erlang 对象：
> 
> 它们可以由程序创建（使用 make_ref/0），并且可以比较它们是否相等。
> 
> Erlang 引用是唯一的，系统保证通过对 make_ref 的不同调用创建的两个引用永远不会匹配。保证不是 100% - 但与 >100% 相差很小:-)。

尤其是来自 Oz 语言的 Name 数据类型 (http://www.mozart-oz.org/documentation/tutorial/node3.html)：

> 创建名称的唯一方法是调用过程 {NewName X}，其中 X 被分配 >一个保证在全球范围内唯一的新名称。姓名不能伪造或印刷。

虽然“不可伪造”的值听起来很可疑，尤其是在像 Clojure 这样的动态语言中，这正是我要寻找的。Van Roy 在 CTM 中使用此功能来创建所谓的“安全数据结构”，然后在代码中用于在受信任实体之间共享的安全令牌：

```
declare NewWrapper in
proc {NewWrapper ?Wrap ?Unwrap} 
    Key={NewName} 
in 
    fun {Wrap X} 
            fun {$ K} if K==Key then X end end
    end 
    fun {Unwrap C} 
            {C Key}
    end 
end

% A secure declarative unbundled Stack
declare NewStack Push Pop IsEmpty in
local Wrap Unwrap in
    {NewWrapper Wrap Unwrap}
    fun {NewStack} {Wrap nil} end
    fun {Push S E} {Wrap E|{Unwrap S}} end
    fun {Pop S E}
        case {Unwrap S} of X|S1 then E=X  {Wrap S1} end
    end
    fun {IsEmpty S} {Unwrap S}==nil end
end 
```

可以在 Clojure 中模拟这种行为吗？这样我可以保证，例如，当且仅当我授予他令牌时，程序员才能解开数据结构。我知道它可能是不安全的，但我想找到在功能上与 Van Roy 相同的解决方案，并且至少很难被程序员规避。

下一个要求是基于纯 Clojure 而不是 JVM 魔术 - 所以没有“token = new Object()”等。例如，函数值看起来像一个很好的候选者，因为 AFAIK after (defn f [] nil) then (identical ? fx) 仅在 x=f 时计算为真，并且 f 不像函数式语言中的其他构造那样受到内存优化的影响（或者是吗？）。但是，这种方法可能会产生我不知道的进一步后果。上面示例中的 {NewName} 是否可以只替换为新的匿名函数（提供非分布式环境）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T00:19:51.390

`gensym`保证产生可用于命名事物的唯一符号。

```
user> (gensym 'token)
token3783
user> (gensym 'token)
token3788
user> (gensym 'token)
token3793
user> (gensym 'token)
user> (def mine (gensym 'token))
#'user/mine
user> (def yours (gensym 'token))
#'user/yours
user> (= mine yours)
false
user> (= mine mine)
true 
```

# php - 基于两个日期创建包含日期信息的数组

> ID：10325503
> 
> 赞同：0
> 
> 时间：2012-04-26T00:03:02.397
> 
> 标签：php, arrays, date, loops, for-loop

我手动创建了以下数组（底部），我希望仅使用两个可以轻松分解的字符串（explode（））以编程方式创建它。

```
$min_date = '2012-03-01 00:00:00';
$max_date = '2012-04-25 00:00:00'; 
```

我已经对字符串进行了explode()，并找出了两个日期之间的月数

```
 $min_date = explode('-',$min_date);
    $min_date['year'] = intval($min_date[0]);
    $min_date['month'] = intval($min_date[1]);
    $min_date['day'] = intval($min_date[2]);

    $max_date = explode('-',$max_date);
    $max_date['year'] = intval($max_date[0]);
    $max_date['month'] = intval($max_date[1]);
    $max_date['day'] = intval($max_date[2]);

$months_between = ($max_date['month'] - $min_date['month']) + 12 * ($max_date['year'] - $min_date['year']); 
```

返回 1

`cal_days_in_month()`功能似乎也很有用，我只是不知道如何......

```
$days_in_month = cal_days_in_month(CAL_GREGORIAN, $month, $year) 
```

这是我手动创建的数组！

```
$periods = array(
  '0' => array(
    'month'=>'march',
    'week'=>'1',
    'days'=>'4',
    'readable'=>' Thurs Mar, 01, 2012 - Sun Mar, 04, 2012',
    'created_at_min'=>'2012-03-01 00:00:00',
    'created_at_max'=>'2012-03-04 24:00:00'
  ),
  '1' => array(
    'month'=>'march',
    'week'=>'2',
    'days'=>'7',
    'readable'=>' Mon Mar, 05, 2012 - Sun Mar, 11, 2012',
    'created_at_min'=>'2012-03-05 00:00:00',
    'created_at_max'=>'2012-03-11 24:00:00'
  ),
  '2' => array(
    'month'=>'march',
    'week'=>'3',
    'days'=>'7',
    'readable'=>' Mon Mar, 12, 2012 - Sun Mar, 18, 2012',
    'created_at_min'=>'2012-03-12 00:00:00',
    'created_at_max'=>'2012-03-18 24:00:00'
  ),
  '3' => array(
    'month'=>'march',
    'week'=>'4',
    'days'=>'7',
    'readable'=>' Mon Mar, 19, 2012 - Sun Mar, 25, 2012',
    'created_at_min'=>'2012-03-19 00:00:00',
    'created_at_max'=>'2012-03-25 24:00:00'
  ),
  '4' => array(
    'month'=>'march',
    'week'=>'5',
    'days'=>'6',
    'readable'=>' Mon Mar, 26, 2012 - Sun Mar, 31, 2012',
    'created_at_min'=>'2012-03-26 00:00:00',
    'created_at_max'=>'2012-03-31 24:00:00'
  ),
  '5' => array(
    'month'=>'april',
    'week'=>'1',
    'days'=>'1',
    'readable'=>' Sun Apr, 1, 2012',
    'created_at_min'=>'2012-04-01 00:00:00',
    'created_at_max'=>'2012-04-01 24:00:00'
  ),
  '6' => array(
    'month'=>'april',
    'week'=>'2',
    'days'=>'7',
    'readable'=>' Mon Apr, 2, 2012 - Sun Apr, 8, 2012',
    'created_at_min'=>'2012-04-01 00:00:00',
    'created_at_max'=>'2012-04-08 24:00:00'
  ),
  '7' => array(
    'month'=>'april',
    'week'=>'3',
    'days'=>'7',
    'readable'=>' Mon Apr, 9, 2012 - Sun Apr, 15, 2012',
    'created_at_min'=>'2012-04-09 00:00:00',
    'created_at_max'=>'2012-04-15 24:00:00'
  ),
  '8' => array(
    'month'=>'april',
    'week'=>'4',
    'days'=>'7',
    'readable'=>' Mon Apr, 16, 2012 - Sun Apr, 22, 2012',
    'created_at_min'=>'2012-04-16 00:00:00',
    'created_at_max'=>'2012-04-22 24:00:00'
  ),
  '9' => array(
    'month'=>'april',
    'week'=>'5',
    'days'=>'3',
    'readable'=>' Mon Apr, 23, 2012 - Wed Apr, 25, 2012',
    'created_at_min'=>'2012-04-16 00:00:00',
    'created_at_max'=>'2012-04-25 00:00:00' // note last day timestamp needs to be 00:00:00
  ),
); 
```

**在我深入研究之前，PHP 提供的任何东西都可以提供极大的帮助吗？**

```
$weeks = array(
  'may' = array(1,2,3,4,5),
  'april' = array(1,2,3,4,5),
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:54:56.577

```
$min_date = new DateTime('2012-03-01 00:00:00');
$max_date = new DateTime('2012-04-25 00:00:00');
$numOfWeeks = ceil($min_date->diff($max_date)->days / 7.0);

$baseDate = $min_date->getTimestamp();
$startOfWeek = 'Mon';
for ($i = 0; $i <= $numOfWeeks + 1; $i++)
{
    $weekRangeStart = date('D M, d, Y', $baseDate);
    if (date('M', strtotime("Next Sunday", $baseDate)) == date('M', $baseDate))
    {
        $weekRangeEnd = date('D M, d, Y', strtotime("Next Sunday", $baseDate));
        $nextDateObject = new DateTime(date('r', strtotime('Next Monday', $baseDate)));
    }
    else
    {
        $weekRangeEnd = date('D M, d, Y', strtotime("last day of this month", $baseDate));
        $nextDateObject = new DateTime(date('r', strtotime("last day of this month", $baseDate)));
    }

    $baseDateObject = new DateTime(date('r', $baseDate));

    $daysInWeek = $baseDateObject->diff($nextDateObject)->days;

    $periods[] = array('month' => date('F', $baseDate), 'days' => $daysInWeek, 
                'readable' => $weekRangeStart . ' - ' . $weekRangeEnd);

    if (date('D', $baseDate) != $startOfWeek)
        $baseDate = strtotime("Next Monday", $baseDate);
    else
        $baseDate = strtotime("+1 week", $baseDate);
}

var_dump($periods); 
```

做这样的事情。你会得到一个像这样的数组：

```
 array
  0 => 
    array
      'month' => string 'March' (length=5)
      'days' => int 4
      'readable' => string 'Thu Mar, 01, 2012 - Sun Mar, 04, 2012' (length=37)
  1 => 
    array
      'month' => string 'March' (length=5)
      'days' => int 7
      'readable' => string 'Mon Mar, 05, 2012 - Sun Mar, 11, 2012' (length=37)
  2 => 
    array
      'month' => string 'March' (length=5)
      'days' => int 7
      'readable' => string 'Mon Mar, 12, 2012 - Sun Mar, 18, 2012' (length=37)
  3 => 
    array
      'month' => string 'March' (length=5)
      'days' => int 7
      'readable' => string 'Mon Mar, 19, 2012 - Sun Mar, 25, 2012' (length=37)
  4 => 
    array
      'month' => string 'March' (length=5)
      'days' => int 5
      'readable' => string 'Mon Mar, 26, 2012 - Sat Mar, 31, 2012' (length=37)
  5 => 
    array
      'month' => string 'April' (length=5)
      'days' => int 7
      'readable' => string 'Mon Apr, 02, 2012 - Sun Apr, 08, 2012' (length=37)
  6 => 
    array
      'month' => string 'April' (length=5)
      'days' => int 7
      'readable' => string 'Mon Apr, 09, 2012 - Sun Apr, 15, 2012' (length=37)
  7 => 
    array
      'month' => string 'April' (length=5)
      'days' => int 7
      'readable' => string 'Mon Apr, 16, 2012 - Sun Apr, 22, 2012' (length=37)
  8 => 
    array
      'month' => string 'April' (length=5)
      'days' => int 7
      'readable' => string 'Mon Apr, 23, 2012 - Sun Apr, 29, 2012' (length=37)
  9 => 
    array
      'month' => string 'April' (length=5)
      'days' => int 0
      'readable' => string 'Mon Apr, 30, 2012 - Mon Apr, 30, 2012' (length=37) 
```

编辑：代码已更新，因此几周不会跨越几个月。

# objective-c - objective-c union "->" vs "."

> ID：10325505
> 
> 赞同：5
> 
> 时间：2012-04-26T00:03:03.217
> 
> 标签：objective-c, c

首先让我说我对整个结构和联合的事情都很陌生。在发布此内容之前，我已经完成了我的功课，并诚实地试图得到合法的澄清。如果这是错误的方法，请告诉我。首先，我试图创建一个联合，因为我正在组合不同的数据类型。我唯一真正的问题/问题是点运算符与->。我可以使用

```
-> 
```

但不是

```
. 
```

我只是好奇为什么？iv 阅读堆栈上的一堆帖子，这些帖子使用“。”显示示例或“答案”，但在现实世界中没有运气。我玩过“typedef”之类的......

```
typedef union _myUnion
{
     int intValue;
     bool boolValue;
}myUnion; 
```

但这似乎并没有什么不同。如果有人解释我做错了什么，将不胜感激。这是我正在尝试做的一个快速示例。为了简单起见，我将只发布一些结构/联合语法，并且不会添加任何子类代码，因为这不是问题。

例子.h

```
#import "<Foundation/Foundation.h"

union myUnion
{
   int intValue;
   bool boolValue;
};

@interface MyClass : NSObject
{
    union myUnion *someProperty;
}

@property (nonatomic, assign) union myUnion *someProperty;

-(void)doSomething;

@end 
```

例子.m

```
#import "MyClass.h"

@implementation MyClass

@synthesize someProperty = _someProperty;

- (id)init
{
//Some init method...
}

- (void)doSomething
{
    NSLog(@"I Did Something...");
}

@end 
```

所以现在在我的另一堂课上这行得通......

```
MyClass *newObject = [MyClass alloc] init];
newObject.someProperty->intValue = 6; 
```

但这并不...

```
MyClass *newObject = [MyClass alloc] init];
newObject.someProperty.intValue = 6; 
```

在这个时间点上，我更感兴趣的是为什么后者不起作用？有趣的是，如果我在 .h 文件中删除该属性的指针。

```
@interface MyClass : NSObject
    {
        union myUnion someProperty;
    }

@property (nonatomic, assign) union myUnion someProperty; 
```

这 ”。” 代替“->”工作，但现在它不可分配。

作为旁注，如果我将 bool 更改为 int 并使其成为结构，则会发生同样的事情。不幸的是，我首先精通了objective-c，并且随着我的学习逐渐掌握了严格的c。所以我对 c 的理解有点薄弱，但这就是 obc 的美妙之处，我可以以一种语言的价格学习两种语言！如果你不计算open-gl。

我会问，是否有人可以发布一个代码的工作示例，然后我可以找出我做错了什么，或者彻底解释我做错了什么以及我错过的一些基本概念。从那里我可以弄清楚如何编写自己的工作代码。我不需要两者，也不指望伸出援助之手，但我想学习，这样我就可以解决自己的问题，而不仅仅是在不了解它的工作原理或原因的情况下修补有缺陷的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T00:35:07.727

`a->b`运算符是简写-这`(*a).b`就像使用`.`但首先进行取消引用。当`a`是一个指针是合适的。

由于在您的原始示例`someProperty`中是指向联合的指针，因此您需要首先取消引用该指针。这意味着您需要使用：

```
(*newObject.someProperty).intValue // confusing! 
```

或者

```
newObject.someProperty->intValue // much better 
```

访问它。

当然，一旦您更改`someProperty`为联合而不是指向联合的指针，您就可以使用 the`.`代替。所以：

*   `a->b`: 访问指针上的结构/联合成员
*   `a.b`: 访问原始结构/联合上的结构/联合成员

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T00:34:59.983

在这种情况下，您很可能希望联合作为一个值——而不是指向外部内存位置的指针：

```
@interface MyClass : NSObject
{
    union myUnion someProperty; // << no '*'
}

@end 
```

然后您使用期限进行会员访问：

```
someProperty.intValue = 6; 
```

*如果它是*一个指针：

```
someProperty->intValue = 6; 
```

但是，还有另一个问题。您有两个（主要）选项可以将联合用作属性。值或指针。这通常由值处理，特别是当所有字段都引用结构/联合本地的内存时，并且当字段 id 不大时。在这种情况下，您通常会返回并按值设置。这意味着您的程序将编写如下：

```
@interface MyClass : NSObject
{
    union myUnion someProperty;
}

@property (nonatomic, assign) union myUnion someProperty; // << by value

@end 
```

然后客户端可以按值访问和设置它，如下所示：

```
union myUnion p = obj.someProperty;
++p.intValue;
obj.someProperty = p; 
```

这就是它*通常*通过不引用共享资源的小型结构来完成的方式。

当然，当您的实例可以直接访问它时，您将不需要副本，如果您选择直接访问该字段：

```
- (void)doSomething
{
  ++someProperty.intValue;
} 
```

*如果这变得复杂，那么抽象*方法背后的数据可能是个好主意，并将访问和变异留给`MyClass`持有联合的实例。

# javascript - Chrome 扩展程序/Javascript 问题

> ID：10325509
> 
> 赞同：0
> 
> 时间：2012-04-26T00:03:51.890
> 
> 标签：javascript, google-chrome

我一直在研究 Chrome 扩展程序并且遇到了问题。我正在尝试做的事情：当您单击搜索栏右侧的图标时，会出现一个搜索栏，您可以在其中输入查询并按 Enter。然后它将转到[http://dev.bukkit.org/search/?search=](http://dev.bukkit.org/search/?search=(whatever) （无论输入什么）。这就是我所拥有的，但它不起作用。

```
<scriptLANGUAGE="JavaScript">
function whatURL() {
window.location= 'http://dev.bukkit.org/search/?search=' + document.form1.url.value;
}
</SCRIPT>

<FORM name=form1>
<inputtype="text"id="url">
<inputtype="button"id="btnSearch"value="Search"onClick="return whatURL()"/>
</FORM> 
```

谢谢:) 注意：我有清单和所有东西，它只是 javascript 部分不起作用。编辑：重写它现在它的工作！

```
<html>
<head>
  <script>
    function onLoad() {
      document.getElementById("mytextfield").focus();
    }

    function onKeyPress(e) {
      if (e.keyCode == 13) {
        openResults();
      }
    }

    function openHomePage() {
      window.open("http://dev.bukkit.org/");
    }

    function openResults() {
      window.open("http://dev.bukkit.org/search/?search=" + encodeURIComponent(document.getElementById("mytextfield").value));
    }
  </script>
</head>
<body onload="onLoad();">
  <img src="png-3.png" onclick="openHomePage();" style="border-width: 0px; cursor: pointer" /><br>
  <div name="myFormDiv" style="center: 6px;">
  <br>
    <input type="search" id="mytextfield" name="mytextfield" value="Search..." onkeypress="onKeyPress(event);" />

  </div>
 </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:06:17.187

换个试试...

```
<inputtype="button"id="btnSearch"value="Search"onClick="return whatURL()"/> 
```

至..

```
<inputtype="button"id="btnSearch"value="Search"onClick="whatURL()"/> 
```

`window.location`不需要返回任何东西。执行时，您已经将窗口指向给定的 url`window.location = "http://myurl.com"`

# python - python 2.7没有安装matplotlib

> ID：10325512
> 
> 赞同：6
> 
> 时间：2012-04-26T00:04:16.993
> 
> 标签：python, matplotlib, python-2.7

嗨，我正在尝试在我的 mac 上安装 matplotlib。我有狮子 OS X。

我的python版本是`2.7.1`（这是我从终端运行它时所说的）

每次我安装 matplotlib 时，它都会引发这个错误

```
matplotlib 1.1.0 cannot be installed on this disk. matplotlib requires System python 2.7 to install. 
```

我是 python 世界的新手，我需要一个工具来绘制一些东西......所以非常感谢一个清晰的解释。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T18:03:52.350

您正在安装一个二进制包，它需要一个特定的系统 python。你最好从源代码构建。

只需尝试从 pip 安装它：

```
pip install numpy 
pip install matplotlib 
```

如果你还没有 pip，你可以像这样安装它：

```
wget "http://peak.telecommunity.com/dist/ez_setup.py"
python ez_setup.py
easy_install pip 
```

如果其中任何一个失败，请遵循他在评论中提到的[@Nolen Royalty 的指南](https://stackoverflow.com/questions/10183144/installing-build-matplotlib-in-mac-osx-lion/10183340#10183340)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T15:59:33.503

我尝试以各种不同的方式安装 python 以使 numpy、scipy 和 matplotlib 一起工作，这是一个巨大的痛苦。您的确切 python 版本将决定适合您的 numpy、scipy 和 matlplotlib 版本。

到目前为止，我发现的最简单的解决方案是使用预构建的包 Enthought。它通过一个简单的安装程序解决了所有这些问题。您可能会安装一些额外的软件，例如 mayavi（一种交互式 3d 绘图工具），但数量不多。

[如果您是一名学生（或自电子邮件诞生以来一直是一名学生），您可以在此处](http://www.enthought.com/products/getepd.php "深思熟虑")免费下载整个 Enthought 软件包。或者，您可以访问 www.enthought.com 上的 Enthought[主页](http://www.enthought.com)。您所要做的就是选择学术许可证，然后插入一封以 .edu 结尾的电子邮件。

我什至认为有免费试用版可以解决这个问题。我从未尝试过任何试用版，但即使是限时试用，您也应该可以使用试用版，然后准确查看需要安装的每个软件包的哪些版本。它有点迂回，但它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:58:44.470

我多次尝试在运行 Lion 的 Mac Book Pro 上安装 numpy、scipy 和 matplolib，但都失败了。Nolen 的食谱非常接近，但一些 matplotlib 测试以奇怪的方式失败。对我有用的方法可以在页面上找到[在 Lion 上安装 Python、virtualenv、NumPy、SciPy、matplotlib 和 IPython](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T20:06:55.293

由于您列出您是 Python 新手，因此我建议您使用 MacPorts 安装 matplotlib。首先安装macports [http://www.macports.org/install.php](http://www.macports.org/install.php) 然后执行port install py27-matplotlib

几年前有一些额外的步骤，但现在就是这么简单。您需要确保为 macports python 设置环境，但文档中提供了该环境。

玩得开心！

# javascript - 在 asp.net webform 中添加一个 jquery 表单，该表单需要使用 php 重定向到站点

> ID：10325513
> 
> 赞同：1
> 
> 时间：2012-04-26T00:04:17.873
> 
> 标签：javascript, jquery, asp.net, .net

我不想使用后面的代码来使用查询字符串进行重定向，因为将使用所见即所得编辑器来执行此操作。提交后，希望它重定向到[http://abc.somedomainname.com?first=var1&last=var2](http://abc.somedomainname.com?first=var1&last=var2)

姓名

专家请建议我如何能够使用 javascript 或 jquery 使用查询字符串进行重定向。请写详细信息，因为我在这方面是全新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:17:06.847

## 第1步：将两个方法放入`<HEAD></HEAD>`：

```
<script type="text/javascript" language="javascript">
// return the value of a parameter based on the name you pass in
function getParameterByName(name) { 
    // use regular expression to replace [ with \[, and replace
    //   ] with \], you get this if you
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");

    // make a new regex that strips out the querystring parameters
    // the [\\?&] looks for the beginning ? or & characters,
    // then the name of the parameter (you passed it in to the method)
    // then the "=([^&#]*)" is looking for = followed by any character
    // except & or #. Because there are parentheses around this part
    // it will remember the match in a match group.
    var regexS = "[\\?&]" + name + "=([^&#]*)"; 

    // this converts the regular expression string into a RegExp object
    var regex = new RegExp(regexS); 

    // execute the regular expression against the URL
    var results = regex.exec(window.location.search); 
    if(results == null) {
        // it didn't find the parameter you passed in
        return ""; 
    } else {
       // we got a match! The value of your parameter is in the 
       // results array (parentheses in the regexS above told the
       // regex to store it there. We do a quick replace at the end
       // to convert the + character to a space, because it is URLEncoded
       return decodeURIComponent(results[1].replace(/\+/g, " ")); 
    }
}

// call this method to do the redirect
function redirectBasedOnParameters() {
    // read the value of the parameter named 'first'
    var var1 = getParameterByName('first');

    // read the value of the parameter named 'last'
    var var2 = getParameterByName('last');

    // redirect the browser
    window.location = "http://abc.somedomainname.com?first=" + var1 + "&last="+ var2

}
</script> 
```

## 第 2 步：使用`Body.onLoad`事件强制触发 JavaScript

将脚本放入网页`<head></head>`标签后（见下文）。然后你可以强制脚本在 body 加载时执行，如下所示：

```
<html>
<head>
<script type="text/javascript">
  // put the JavaScript code mentioned above inside here 
</script>
</head>

<body onload="redirectBasedOnParameters()">
    <h1>Hello World!</h1>
</body>
</html> 
```

# objective-c - NSDate 的意外输出

> ID：10325515
> 
> 赞同：-1
> 
> 时间：2012-04-26T00:04:30.020
> 
> 标签：objective-c, ios, xcode, nsdate

当我尝试注销当前日期时，我得到的日期与实际日期不同：

NSLog(@"日期 %@",[NSDate 日期]);

输出 2012-04-25 23:59:28 +0000

我的机器时间 2012-04-26 2:02 AM

任何人都知道如何解决这个问题？谢谢

**编辑**

这是我在使用 nsdataformatter 时得到的

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
[formatter setTimeZone:[NSTimeZone defaultTimeZone]];
NSDate *date =[formatter dateFromString:[NSString stringWithString:@"2012-04-26 01:00:00"]];
 NSLog(@"date %@",date); 
```

输出：2012-04-25 23:00:00 +0000 令人困惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:14:43.290

没有什么可修复的。NSLog 以 GMT/UTC 格式输出日期。如果您想在本地时区使用它，则需要使用 NSDateFormatter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T01:08:34.207

这应该可以帮助您打印当地时间和 GMT 时间

```
 // gmt
  NSTimeZone *aTimeZone1 = [NSTimeZone localTimeZone];
  NSInteger aTimeInterval1 = -[aTimeZone1 secondsFromGMTForDate: [NSDate date]];
  NSLog(@"GMT: %@", [NSDate dateWithTimeInterval: aTimeInterval1 sinceDate: [NSDate date]]);

  // local
   NSTimeZone *aTimeZone2 = [NSTimeZone localTimeZone];
   NSInteger aTimeInterval2 = [aTimeZone2 secondsFromGMTForDate: [NSDate date]];
   NSLog(@"Local: %@", [NSDate dateWithTimeInterval: aTimeInterval2 sinceDate: [NSDate date]]); 
```

**和**

如果你想使用 NSDateFormatter 那么试试这个怎么样：

```
 NSDateFormatter *aDateFormatter = [[NSDateFormatter alloc] init];
  [aDateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
  [aDateFormatter setDateFormat:@"dd:MM:yyyy HH:mm:ss"];
  NSLog(@"GMT: %@", [aDateFormatter stringFromDate:[NSDate date]]);

  [aDateFormatter setTimeZone:[NSTimeZone defaultTimeZone]];
  NSLog(@"Local: %@", [aDateFormatter stringFromDate:[NSDate date]]); 
```

# php - 如何使用一系列下拉列表显示mysql数据库中的数据

> ID：10325516
> 
> 赞同：-2
> 
> 时间：2012-04-26T00:04:34.687
> 
> 标签：php, jquery, mysql, ajax, menu

需要一些建议。

我想在网站上包含 4 个下拉列表，它们都包含来自 mysql 表中不同字段的数据。

然后我希望能够按下提交按钮并在网页上显示所需的数据。

我不知道要使用哪种编程语言，也很难找到任何教程。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:30:00.700

您的意思是 HTML 下拉列表还是表单中的选择下拉列表？

如果您的意思是表单中的选择下拉菜单，您可以执行以下操作：

```
<?PHP

$query = mysql_query("SELECT value FROM table ORDER BY value ASC") or die(mysql_error());
$result = mysql_num_rows($result);

// If no results have been found or when table is empty?
if ($result == 0) {

    echo 'No results have been found.';

} else {

    // Display form
    echo '<form name="form" method="post" action="your_result.php">';
    echo '<select name="list" id="lists">';

    // Fetch results from database and list in the select box
    while ($fetch = mysql_fetch_assoc($query)) {

        echo '<option id="'.$fetch['value'].'">'.$fetch['value'].'</option>';
    }

    echo '</select>';
    echo '</form>';

}

?> 
```

然后在 your_result.php 中，您应该根据以下值从 MySQL 数据库中获取数据（当您获取时使用 mysql_real_escape_string）：

```
<?PHP $_POST['list']; ?> 
```

您也可以在一个文件中完成所有操作，但这取决于您。尝试使用谷歌，那里有几十个教程。

# ruby-on-rails - Carrierwave - 具有 default_url 问题的多态性

> ID：10325521
> 
> 赞同：0
> 
> 时间：2012-04-26T00:05:24.263
> 
> 标签：ruby-on-rails, paperclip, carrierwave, polymorphic-associations

我有一个将成为多态模型的照片模型。如果我提交我的父模型并保存它。如果它没有任何照片，当我显示照片的 default_url 时，它不会显示任何内容，因为没有照片。当照片附加到模型时，意味着只有一个，当字段为空时它将返回一个 default_url，但当没有结果时，它不返回一个 default_url。我不想输入空记录只是为了解决 default_url 问题。

我发现如果我执行以下操作，它将返回 default_url 但不确定这是最好的

```
ImageUploader.new.default_url(:small) if @photos.blank? 
```

这行得通，但它很草率..我认为。有人有更好的主意吗？也许是照片模型上的 find 方法或更好的方法，它将返回一个对象，该对象将具有有效的 url，无论是否存在某些东西。

```
class Photo < ActiveRecord::Base
  # Concerns
  include Guidable

  default_scope :order => 'photos.order DESC'

  belongs_to :attachable, :polymorphic => true      
  mount_uploader :image, ImageUploader

  def attachable?
    !!self.attachable
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:05:00.333

我要回答我自己的问题，但仍然不相信这是最好的选择

```
module PhotosHelper

  def photo_url(photo, size)
    defined?(photo.image) ? photo.image.url(size) : ImageUploader.new.send(size).default_url
  end

end 
```

如果没有图像，希望模型只返回一些东西。

# go - Go中的“net”包导入错误

> ID：10325525
> 
> 赞同：0
> 
> 时间：2012-04-26T00:05:56.843
> 
> 标签：go

我正在尝试运行我在网上找到的示例 Go 程序，如下所示：

```
/* IP */

package main

import (
    "net"
    "os"
    "fmt"
)

func main() {
    if len(os.Args) != 2 {
        fmt.Fprintf(os.Stderr, "Usage: %s ip-addr\n", os.Args[0])
        os.Exit(1)
    }
    name := os.Args[1]

    addr := net.ParseIP(name)
    if addr == nil {
        fmt.Println("Invalid address")
    } else {
        fmt.Println("The address is ", addr.String())
    }
    os.Exit(0)
} 
```

然后我尝试使用以下方法编译它：

```
6g ip.go 
```

我收到以下错误：

```
ip.go:7: can't find import: net 
```

我的go版本没有net包吗？还是我使用了错误版本的编译器？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T00:22:39.223

如果您仍在使用`6g`编译器命令，那么我假设您没有使用[最近的 Go1 稳定版本](http://golang.org/doc/install)？这取决于您实际运行的版本。“net”是一个有效的包： http: [//golang.org/pkg/net/](http://golang.org/pkg/net/)

建议您安装最新的 Go。

```
$ go run ip.go 127.0.0.1
The address is  127.0.0.1 
```

您可以看到使用 Go 1 的 go playground 可以正常工作：
[http ://play.golang.org/p/rXSep9GH-U](http://play.golang.org/p/rXSep9GH-U)

# php - 删除重复项并在一个语句中更新唯一的一个？

> ID：10325526
> 
> 赞同：4
> 
> 时间：2012-04-26T00:06:04.840
> 
> 标签：php, mysql, duplicates, sql-update

```
CREATE TABLE hostname_table
(
id INT NOT NULL AUTO_INCREMENT,
hostname CHAR(65) NOT NULL,
interval_avg INT,
last_update DATETIME NOT NULL,
numb_updates INT,
PRIMARY KEY (id)
) 
```

我有这张表，我将 500-600k 行数据导入其中。写入数据库时​​我不检查重复项，因为我想知道每个主机有多少个重复项，并且我还想知道每次更新所述主机名之间的间隔。

hostname_table 中的示例值：

```
id  hostname          interval_avg  last_update          numb_updates
1   www.host.com      60            2012-04-25 20:22:21  1
2   www.hostname.com  10            2012-04-25 20:22:21  5
3   www.name.com      NULL          2012-04-25 20:22:21  NULL
4   www.host.com      NULL          2012-04-25 20:22:26  NULL
5   www.host.com      NULL          2012-04-25 20:22:36  NULL 
```

我希望它在清理后的样子示例：

```
id  hostname          interval_avg  last_update          numb_updates
1   www.host.com      25            2012-04-25 20:22:36  3
2   www.hostname.com  10            2012-04-25 20:22:21  5
3   www.name.com      NULL          2012-04-25 20:22:21  NULL 
```

有了这样一个庞大的数据库，我不想发送太多查询来实现这个目标，但我相信这样的操作最少需要 3 个查询（如果我错了，请纠正我）。每小时将有约 500k 新行，其中约 50% 或更多将是重复的，因此尽可能有效地消除这些重复，同时仍记录重复发生的次数和频率至关重要（因此 interval_avg和 numb_update 更新）。

这是一个三步问题，我希望这里的社区能提供帮助。

# 所以总结一下伪代码，我需要帮助优化这些查询；

1.  **选择**所有 last_update 和 interval_avg 值，获取 sum(numb_update)，获取每个主机名的 count(duplicates)，
2.  **更新**min(id) 中的 interval_avg，更新 min(id) 中的 numb_updates，使用 max(id) 中的值更新 min(id) 中的 last_update，
3.  **删除**除 min(id) 之外的所有重复项

[解决了](https://stackoverflow.com/a/10338807/1248273)。在几天的研究过程中，我将一部分优化了 94%，另一部分优化了约 97%。我真的希望这将有助于其他人寻找相同的解决方案。如果您选择了错误的解决方案，mySQL 和大型数据库可能会成为一个大问题。（我将 last_update 列从 DATETIME 更改为 INT(10)，并且我将格式化时间更改为时间戳作为最终解决方案中的值，以便能够获取 max(last_update) 和 min(last_update) 值）

*（感谢 GolezTrol 帮助解决部分问题）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:10:13.173

如果要按该主机名进行聚合，则无法获取该主机名的每个不同的 interval_avg 和 numb_updates 值。你的意思是他们`SUM`还是`AVG`他们？还是只想保留最低id的值？

在下面的查询中，我总结了它们。

```
SELECT 
  MIN(id) as id, 
  hostname, 
  SUM(interval_avg) as total_interval_avg,
  SUM(numb_updates) as total_numb_updates,
  COUNT(*) as hostname_count
FROM
  hostname_table
GROUP BY 
  hostname 
```

在此之后，您需要使用 和 的正确值更新每个找到的`interval_avg`id `numb_updates`。

之后，您将需要删除此查询未找到的每个 id。

```
DELETE FROM hostname_table
WHERE
  id NOT IN
    (SELECT 
      MIN(id)
    FROM
      hostname_table
    GROUP BY 
      hostname) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:56:04.900

# 我选择了这个解决方案

# --------------------------------

**1\. 选择**所有 min+max last_update、sum(interval_avg)、sum(numb_update) 和 count(duplicates) foreach 主机名

```
//This will get the interval_avg value
//(summarize is ok, since all except min(id) will be zero), 
//give a count of how many duplicates there are per hostname, 
//and will also summarize numb_updates
SELECT 
  MIN(id) as id, 
  hostname, 
  SUM(numb_updates) as total_numb_updates,
  SUM(interval_avg) as total_interval_avg,
  MAX(last_update) as last_update_max,
  MIN(last_update) as last_update_min,
  COUNT(*) as hostname_count
FROM
  hostname_table
GROUP BY 
  hostname
HAVING 
  COUNT(*)>1 
```

```
//Get all last_update from each duplicate hostname(including the original)
//Dont do this in a seperate query, you only need first+last+rowcount to figure
//out the interval average. It took me a while to realize this, so I tried many
//varieties with little success(took too long with +600k rows) 
//
// --- I will include the solution I didn't go for, ---
// --- so others wont do the same mistake ---
//
// START DONT USE THIS
// 2.63sec @ 10000 rows
$sql = "SELECT
  id, 
  ".$db_table.".hostname, 
  last_update 
FROM 
  ".$db_table." 
INNER JOIN (
  SELECT 
    hostname, 
    COUNT(*) 
  FROM 
    ".$db_table." 
  GROUP BY 
    hostname 
  HAVING 
    COUNT(*)>1
) as t2
ON 
  ".$db_table.".hostname = t2.hostname";

$resource = mysql_query($sql,$con);
// END DONT USE THIS (below is a 94% improvement)
//
// START THIS IS BETTER, BUT DONT USE THIS
// 0.16 sec @ 10000 rows
//Select everything from the table
$sql = "SELECT id 
    FROM ".$db_table;
$resource = mysql_query($sql,$con);
$array_id_all = array();
while($assoc = mysql_fetch_assoc($resource)){
    array_push($array_id_all, $assoc['id']);
}

//This will select the ID of all the hosts without duplicates
$sql = "SELECT 
  MIN(id) as id, 
  hostname
FROM
  ".$db_table."
GROUP BY 
  hostname
HAVING 
  COUNT(*)=1";

$resource = mysql_query($sql,$con);

$array_id_unique = array();
while($assoc = mysql_fetch_assoc($resource)){
    array_push($array_id_unique, $assoc['id']);
}

$array_id_non_unique = array_diff($array_id_all, $array_id_unique);
$id_list_non_unique = implode(", ", $array_id_non_unique);

//Select everything from the table when the IDs are IN $id_list_non_unique
$sql = "SELECT * 
    FROM ".$db_table." 
    WHERE id IN (".$id_list_non_unique.")";
$resource = mysql_query($sql,$con);

$array_duplicates = array();
$i=0;
while($assoc = mysql_fetch_assoc($resource)){
    $array_duplicates[$i] = array($assoc['id'], $assoc['hostname'], $assoc['interval_avg'], $assoc['last_update'], $assoc['numb_updates']);
    $i++;
}
// END THIS IS BETTER, BUT DONT USE THIS 
```

*（感谢 Nick Fortescue @ [https://stackoverflow.com/a/877051/1248273](https://stackoverflow.com/a/877051/1248273)）*

**2.更新min(id)中的interval_avg，更新min(id)中的numb_updates**，用max(id)中的值更新min(id)中的last_update

```
//update the interval_avg, last_update and numb_update value of the min(id)
//of each duplicate hostname.
// --- I will include the solution I didn't go for, ---
// --- so others wont do the same mistake ---
//
// START DONT USE THIS
// 167 secs @ 500k rows
UPDATE hostname_table
  SET interval_avg = CASE id
    WHEN 1 THEN 25
    //etc
  END,
  last_update = CASE id
    WHEN 1 THEN "2012-04-25 20:22:36"
    //etc
  END,
  numb_update = CASE id
    WHEN 1 THEN 3
    //etc
  END
WHERE id IN (1)
// END DONT USE THIS
//
// START USE THIS
// 5.75 secs @ 500k rows (96.6% improvement)
INSERT INTO hostname_table (id,interval_avg,last_update,numb_updates)
  VALUES 
    ('1','25','2012-04-25 20:22:36','3'), 
    //etc
ON DUPLICATE KEY UPDATE 
  interval_avg=VALUES(interval_avg), 
  last_update=VALUES(last_update), 
  numb_updates=VALUES(numb_updates)
// END USE THIS 
```

*（感谢 Michiel de Mare @ [https://stackoverflow.com/a/3466/1248273](https://stackoverflow.com/a/3466/1248273)）*

**3.**删除除min(id)之外的所有重复项

```
//delete all duplicates except min(id)
ALTER IGNORE TABLE hostname_table ADD UNIQUE (hostname)
ALTER TABLE hostname_table DROP INDEX hostname 
```

*（感谢 GolezTrol 在选择我需要的第一个信息时朝着正确的方向努力）*

# ios5 - dyld`dyld_fatal_error，iOS 上不兼容的 api 的原因是什么？

> ID：10325529
> 
> 赞同：18
> 
> 时间：2012-04-26T00:06:33.373
> 
> 标签：ios5, ios4, crash, xcode4.2, automatic-ref-counting

我正在将我的部分项目转移到 iOS 5 / ARC。最古老的项目之一（iOS 4.2，用于支持 iPod Touch 2g 的 armv6）给了我：

```
dyld`dyld_fatal_error:
0x8feb1070:  int3   
0x8feb1071:  nop 
```

就在启动图像之后但在进入主之前。必须将一些库/代码更新到 iOS 5，但是哪一个？有可能使用比猜测更好的方法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-02T17:20:01.143

我自己尝试使用带有 SDK iOS5.1 的 Xcode4.3.2重现[这个项目时遇到了这个问题。](http://rawrwarbear.com/2011/08/21/hijack-in-the-box-part-2/)问题是 Xcode4.3.2 上的标准项目模板是为 iOS5 配置的，它有一些早期 iOS 版本不支持的功能。在我的例子中，GLKit 框架被引入，并且在我运行 iOS4.2 的 iPhone3G 上不受支持。我得到的错误就像你的一样：

```
dyld`dyld_fatal_error:
0x2fe01080:  trap   
0x2fe01084:  mov    r0, r0 
```

仔细查看控制台输出后，您可以看到导致应用程序崩溃的原因：

```
dyld: Library not loaded: /System/Library/Frameworks/GLKit.framework/GLKit
Referenced from: /var/mobile/Applications/A60A53B1-F87D-467D-BB0B-82C603049202/HiJackInTheBox.app/HiJackInTheBox
  Reason: image not found
(lldb) 
```

该错误意味着在安装应用程序的目标上的 iOS 中找不到 GLKit 框架。该框架被拉入 Project->BuildPhases->LinkBinaryWithLibraries 下的构建中。

所以为了纠正这个问题，我需要删除 GLKit 框架和所有引用它的代码。然后构建成功并在目标设备上运行。希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-23T23:28:05.227

如果您转到*控制台输出*，您会看到一个错误，告诉您设备中缺少哪个框架并导致问题（就像 grundyso 在他的回答中所说的那样）。

因此，为了解决此问题，您可以转到目标的*General选项卡并在****Embedded Binaries***部分添加缺少的框架。

这会将框架复制到应用程序，因此在任何设备上都不会丢失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-17T14:06:45.890

我遇到了同样的问题，当我在我的 iPhone 6s 上运行该应用程序时发生了这种情况，并且它以前可以工作..

只需转到 Product -> Clean 并再次运行它...

我希望这有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-23T06:59:03.623

我对 Reachability.framework 有同样的问题。它在 iPhone 5 上运行良好，但在为 iPhone 7S Plus 运行相同的代码时，它显示错误。

此问题的解决方案是： 1\. 转到 General -> Embedded Binaries。2\. 添加相同的框架（在我的例子中是 Reachability.framework） 3\. 然后，在 Linked Frameworks and Libraries 中添加 libc++.tbd。

希望它对你有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T15:03:06.957

当我在装有 iOS 4.2 的 iPhone 3GS 上进行测试时，我的**xCode 4.3（基于 cocos3d）**项目也遇到了同样的问题。

转到您的项目设置并更新：
**Target** (s) **| 总结 | 链接的框架和库 | GLKit.framework**为*Optional*
（而不是*Required*），然后再次测试。

进行此更改后，现在对我来说一切似乎都很好。

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-05T01:38:59.193

如果您使用 Carthage，您可能忘记将框架添加到“复制框架”转到目标 -> 构建阶段 -> 复制框架 -> 将框架添加到列表中。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-08-15T11:19:41.873

看起来您的主要目标正在链接到 XCTest.framework 但失败了。

1) 转到项目设置 -> 2) 转到您的应用程序主要目标 -> 其他链接器标志 3) 删除“-framework XCTest” 4) 确保您的测试目标的“其他链接器标志”字段仍然包含“-framework XCTest '

2）检查Images.xcassets和其他资源，在文件检查器（右面板）中，查看“目标成员资格”，检查是否选择了测试目标。

3）尝试在您的项目中搜索 XCTest 并查看您设置的内容。

或者

尝试删除测试

# java - 替代调度程序/算法

> ID：10325533
> 
> 赞同：0
> 
> 时间：2012-04-26T00:06:43.887
> 
> 标签：java, algorithm, constraints

我现在正在为一个客户解决以下问题，该客户将创建最经济的时间表（使用最少的替代品），因为：

*   替代者应尽可能连续地代替老师工作（*不是一个大问题）
*   潜艇只能工作 6 个时期

到目前为止，我有一个教师类（如下所示）和一个组织者类，它们实际上创建了最佳时间表。现在我只是让程序在网格中循环填充每个替代品。

```
Teacher[] t= new Teacher[14];
Organizer o = new Organizer(t);         
o.sort();

int[][] g = o.getGrid(); 
```

示例输入：

```
t[0] = new Teacher("Teacher 1", "Mr", new int[]{1,0,1,0,0,0,0});
t[1] = new Teacher("Teacher 2","Mr", new int[]{1,1,0,1,1,0,1});
t[2] = new Teacher("Teacher 3","Mr", new int[]{0,1,1,1,1,1,0});
t[3] = new Teacher("Teacher 4","Mr", new int[]{1,1,0,1,1,0,1});
t[4] = new Teacher("Teacher 5","Mr", new int[]{1,1,0,0,1,1,1});
t[5] = new Teacher("Teacher 6", "Mr", new int[]{1,1,1,0,0,1,1});
t[6] = new Teacher("Teacher 7", "Mr", new int[]{0,0,1,0,1,1,1});
t[7] = new Teacher("Teacher 8", "Mr", new int[]{1,1,0,0,1,1,1});
t[8] = new Teacher("Teacher 9", "Mr", new int[]{1,1,1,1,1,0,0});
t[9] = new Teacher("Teacher 10", "Mr", new int[]{0,0,0,1,1,1,0});
t[10] = new Teacher("Teacher 11", "Mr", new int[]{0,0,1,0,0,1,1});
t[11] = new Teacher("Teacher 12", "Mr", new int[]{0,0,1,1,0,1,0});
t[12] = new Teacher("Teacher 13", "Mr", new int[]{1,1,1,1,0,0,0});
t[13] = new Teacher("Teacher 14", "Mr", new int[]{1,1,0,1,1,0,1}); 
```

以上的输出（使用我正在使用的算法）：

```
 P1  P2  P3  P4  P5  P6  P7
Teacher 1           1   -   1   -   -   -   -
Teacher 2           2   1   -   1   1   -   1
Teacher 3           -   2   2   2   2   2   -
Teacher 4           3   3   -   3   3   -   3
Teacher 5           4   4   -   -   4   3   4
Teacher 6           5   5   4   -   -   4   5
Teacher 7           -   -   5   -   5   5   6
Teacher 8           6   6   -   -   6   6   7
Teacher 9           7   7   6   7   7   -   -
Teacher 10          -   -   -   8   8   7   -
Teacher 11          -   -   8   -   -   8   8
Teacher 12          -   -   9   9   -   9   -
Teacher 13          8   9   10  10  -   -   -
Teacher 14          9   10  -   11  9   -   10 
```

如您所见，程序只是循环遍历有效空间，用 subs 填充它们，直到 sub 达到其最大教学周期，然后开始一个新的 sub。问题是，我已经能够在手动操作时将使用的潜艇数量减少到 10 个，所以我一直在尝试寻找更有效的算法，但无济于事。

对于此输入，使用的最小潜艇数量为 9（受 P2 列约束），所以我想看看是否有任何可能的方法可以完成该数字，或者至少 10 个潜艇。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:37:51.407

对于每一列，计算出有多少空地。

首先将每个子放入具有最多开放空间的列中，然后随机放置。该算法将使用 10 个潜艇解决您给定的问题。

在您的具体示例中，有 59 个空格。鉴于每个 sub 只能填充 6 个空格，因此 10 是可以工作的最小 subs 数。我相信它总能找到最佳解决方案。

（我忽略了您的连续天数规则。“然后随机”规则可以替换为试图优化它的东西......）

# sql-server - 如何用零替换数据透视输出中的 NULL 值？

> ID：10325538
> 
> 赞同：0
> 
> 时间：2012-04-26T00:07:50.323
> 
> 标签：sql-server, matrix

[按照上一个问题](https://stackoverflow.com/questions/10321404/convert-vertical-to-horizontal-layout-sql)的答案，当我在某些情况下没有数字时，我想摆脱一些 NULL 值

我有以下查询

```
CREATE TABLE [MYTABLE]
  (
      [A] int
    , [B] int
    , [VAL] float
  );

INSERT INTO [MYTABLE] ([A], [B], [VAL]) VALUES
    (1, 1, -218.46),
    (1, 2, -2.1846000000000e+02),
    (2, 1, 6.4000000000000e+01),
    (2, 2, -218.46),
    (2, 3, 6.4000000000000e+01),
    (3, 2, -2.1846000000000e+02),
    (3, 3, -218.46),
    (4, 3, 6.4000000000000e+01),
    (4, 4, -218.46),
    (4, 5, 6.4000000000000e+01),
    (5, 4, 6.4000000000000e+01),
    (5, 5, -218.46),
    (5, 6, 6.4000000000000e+01),
    (6, 5, 6.4000000000000e+01),
    (6, 6, -218.46),
    (6, 7, 6.4000000000000e+01),
    (7, 6, 6.4000000000000e+01),
    (7, 7, -218.46),
    (7, 8, 6.4000000000000e+01),
    (8, 7, 6.4000000000000e+01),
    (8, 8, -218.46),
    (8, 9, 6.4000000000000e+01),
    (9, 8, 6.4000000000000e+01),
    (9, 9, -218.46),
    (9, 10, 6.4000000000000e+01),
    (10, 9, 6.4000000000000e+01),
    (10, 10, -218.46);

SELECT [1],[2],[3],[4],[5],[6],[7],[8],[9],[10]
FROM
(   SELECT  x = a
        ,   y = b
        ,   v = (CASE WHEN IsNumeric(val)=0 THEN 0 ELSE val END)
    FROM    MYTABLE
) AS T
PIVOT
(
    min( v)
    FOR y IN ([1],[2],[3],[4],[5],[6],[7],[8],[9],[10]) 
) AS pvt
order by x 
```

我得到以下结果：

```
 1       2      3       4       5       6       7       8       9       10
------- ------- ------- ------- ------- ------- ------- ------- ------- ------- 
-218.46 -218.46   NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL  
64      -218.46    64     NULL    NULL    NULL    NULL    NULL    NULL    NULL  
  NULL  -218.46 -218.46   NULL    NULL    NULL    NULL    NULL    NULL    NULL 
  NULL    NULL     64   -218.46    64     NULL    NULL    NULL    NULL    NULL 
  NULL    NULL    NULL     64   -218.46    64     NULL    NULL    NULL    NULL  
  NULL    NULL    NULL    NULL     64   -218.46    64     NULL    NULL    NULL  
  NULL    NULL    NULL    NULL    NULL     64   -218.46    64     NULL    NULL  
  NULL    NULL    NULL    NULL    NULL    NULL     64   -218.46    64     NULL  
  NULL    NULL    NULL    NULL    NULL    NULL    NULL     64   -218.46    64
  NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL     64   -218.46 
```

但我需要以下结果

```
 1       2      3       4       5       6       7       8       9       10
------- ------- ------- ------- ------- ------- ------- ------- ------- ------- 
-218.46 -218.46   NULL    NULL     0       0       0       0       0       0    
64      -218.46    64      0       0       0       0       0       0       0    
   0    -218.46 -218.46    0       0       0       0       0       0       0   
   0       0       64   -218.46    64      0       0       0       0       0   
   0       0       0       64   -218.46    64      0       0       0       0    
   0       0       0       0       64   -218.46    64      0       0       0    
   0       0       0       0       0       64   -218.46    64      0       0    
   0       0       0       0       0       0       64   -218.46    64      0    
   0       0       0       0       0       0       0       64   -218.46    64
   0       0       0       0       0       0       0       0       64   -218.46 
```

如何用 0 替换所有 NULL 值？

# 编辑

关注@Siva 回答

```
CREATE TABLE [dbo].[Matrix]
(
        [A]     INT
    ,   [B]     INT
    ,   [VAL]   FLOAT
);

INSERT INTO [dbo].[Matrix] ([A], [B], [VAL]) 
    VALUES
        (1, 1, -218.46)
    ,   (1, 2, -2.1846000000000e+02)
    ,   (2, 1, 6.4000000000000e+01)
    ,   (2, 2, -218.46)
    ,   (2, 3, 6.4000000000000e+01)
    ,   (3, 2, -2.1846000000000e+02)
    ,   (3, 3, -218.46)
    ,   (4, 3, 6.4000000000000e+01)
    ,   (4, 4, -218.46)
    ,   (4, 5, 6.4000000000000e+01)
    ,   (5, 4, 6.4000000000000e+01)
    ,   (5, 5, -218.46)
    ,   (5, 6, 6.4000000000000e+01)
    ,   (6, 5, 6.4000000000000e+01)
    ,   (6, 6, -218.46)
    ,   (6, 7, 6.4000000000000e+01)
    ,   (7, 6, 6.4000000000000e+01)
    ,   (7, 7, -218.46)
    ,   (7, 8, 6.4000000000000e+01)
    ,   (8, 7, 6.4000000000000e+01)
    ,   (8, 8, -218.46)
    ,   (8, 9, 6.4000000000000e+01)
    ,   (9, 8, 6.4000000000000e+01)
    ,   (9, 9, -218.46)
    ,   (9, 10, 6.4000000000000e+01)
    ,   (10, 9, 6.4000000000000e+01)
    ,   (10, 10, -218.46);

    SELECT  COALESCE([1], 0)    [1]
        ,   COALESCE([2], 0)    [2]
        ,   COALESCE([3], 0)    [3]
        ,   COALESCE([4], 0)    [4]
        ,   COALESCE([5], 0)    [5]
        ,   COALESCE([6], 0)    [6]
        ,   COALESCE([7], 0)    [7]
        ,   COALESCE([8], 0)    [8]
        ,   COALESCE([9], 0)    [9]
        ,   COALESCE([10], 0)   [10]
    FROM
        (   
            SELECT  x = a
                ,   y = b
                ,   v = val
            FROM    [dbo].[Matrix]
        ) AS dataToPivot
        PIVOT
        (
            MIN(v)
            FOR y IN ([1], [2], [3], [4], [5], [6], [7], [8], [9], [10])
        ) AS pivoted
    ORDER BY x; 
```

在动态中做到这一点的最佳方法是什么，我想在第一部分做......：

```
DECLARE @sql  nvarchar(max);
DECLARE @Flag INT;
DECLARE @Size INT;
SET @Flag = 1   
SET @Size = 10 ;
SET @sql = 'SELECT '+ CHAR(13); 
WHILE (@Flag <= @Size) BEGIN
  SET @sql =  @sql + ' COALESCE([' + cast( @Flag as varchar(10))  + '], 0)    ['+ cast( @Flag as varchar(10))+'],'+ CHAR(13)  ;
  SET @Flag = @Flag + 1;  
END
SET @sql = LEFT(@sql, LEN(@sql) - 2)
SET @sql =  @sql + '
 FROM
        (   
            SELECT  x = a
                ,   y = b
                ,   v = val
            FROM    [dbo].[Matrix]
        ) AS dataToPivot
        PIVOT
        (
            MIN(v)
            FOR y IN (';
SET @Flag = 1   
WHILE (@Flag <= @Size) BEGIN
  SET @sql =  @sql + ' [' + cast( @Flag as varchar(10))  + '],';
  SET @Flag = @Flag + 1;  
END 
SET @sql = LEFT(@sql, LEN(@sql) - 1);
SET @sql =  @sql +             
            ')
        ) AS pivoted
    ORDER BY x;'
   print  @sql
exec(@sql); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:13:49.017

IsNull 怎么样？

```
SELECT 
isnull([1], 0) as [1],
isnull([2], 0) as [2],
isnull([3], 0) as [3],
isnull([4], 0) as [4],
isnull([5], 0) as [5],
isnull([6], 0) as [6],
isnull([7], 0) as [7],
isnull([8], 0) as [8],
isnull([9], 0) as [9],
isnull([10], 0) as [10] 
FROM 
(SELECT x=a, y=b, v= CASE WHEN IsNumeric(val)=0 THEN 0 ELSE IsNull(val, 0) END FROM MYTABLE)
as T
PIVOT
( 
min(v)
FOR y IN ([1],[2],[3],[4],[5],[6],[7],[8],[9],[10])  
) AS pvt 
ORDER BY x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T00:17:28.367

你可以使用`COALESCE`来达到效果。

[**SQL小提琴**](http://sqlfiddle.com/#!3/20d43/1)

```
CREATE TABLE [dbo].[Matrix]
(
        [A]     INT
    ,   [B]     INT
    ,   [VAL]   FLOAT
);

INSERT INTO [dbo].[Matrix] ([A], [B], [VAL]) 
    VALUES
        (1, 1, -218.46)
    ,   (1, 2, -2.1846000000000e+02)
    ,   (2, 1, 6.4000000000000e+01)
    ,   (2, 2, -218.46)
    ,   (2, 3, 6.4000000000000e+01)
    ,   (3, 2, -2.1846000000000e+02)
    ,   (3, 3, -218.46)
    ,   (4, 3, 6.4000000000000e+01)
    ,   (4, 4, -218.46)
    ,   (4, 5, 6.4000000000000e+01)
    ,   (5, 4, 6.4000000000000e+01)
    ,   (5, 5, -218.46)
    ,   (5, 6, 6.4000000000000e+01)
    ,   (6, 5, 6.4000000000000e+01)
    ,   (6, 6, -218.46)
    ,   (6, 7, 6.4000000000000e+01)
    ,   (7, 6, 6.4000000000000e+01)
    ,   (7, 7, -218.46)
    ,   (7, 8, 6.4000000000000e+01)
    ,   (8, 7, 6.4000000000000e+01)
    ,   (8, 8, -218.46)
    ,   (8, 9, 6.4000000000000e+01)
    ,   (9, 8, 6.4000000000000e+01)
    ,   (9, 9, -218.46)
    ,   (9, 10, 6.4000000000000e+01)
    ,   (10, 9, 6.4000000000000e+01)
    ,   (10, 10, -218.46);

    SELECT  COALESCE([1], 0)    [1]
        ,   COALESCE([2], 0)    [2]
        ,   COALESCE([3], 0)    [3]
        ,   COALESCE([4], 0)    [4]
        ,   COALESCE([5], 0)    [5]
        ,   COALESCE([6], 0)    [6]
        ,   COALESCE([7], 0)    [7]
        ,   COALESCE([8], 0)    [8]
        ,   COALESCE([9], 0)    [9]
        ,   COALESCE([10], 0)   [10]
    FROM
        (   
            SELECT  x = a
                ,   y = b
                ,   v = val
            FROM    [dbo].[Matrix]
        ) AS dataToPivot
        PIVOT
        (
            MIN(v)
            FOR y IN ([1], [2], [3], [4], [5], [6], [7], [8], [9], [10])
        ) AS pivoted
    ORDER BY x; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-22T16:47:14.470

我在这个 SO 问题中使用了动态枢轴技术[Simple way to transpose columns and rows in Sql?](https://stackoverflow.com/questions/13372276/simple-way-to-transpose-columns-and-rows-in-sql)

将 NULL 放入我的数据透视报告中，如下所示。不过确实会更乱。

```
CREATE TABLE [MYTABLE]
(
    [A] int
    , [B] int
    , [VAL] float
);

INSERT INTO [MYTABLE] ([A], [B], [VAL]) VALUES
(1, 1, -218.46),
(1, 2, -2.1846000000000e+02),
(2, 1, 6.4000000000000e+01),
(2, 2, -218.46),
(2, 3, 6.4000000000000e+01),
(3, 2, -2.1846000000000e+02),
(3, 3, -218.46),
(4, 3, 6.4000000000000e+01),
(4, 4, -218.46),
(4, 5, 6.4000000000000e+01),
(5, 4, 6.4000000000000e+01),
(5, 5, -218.46),
(5, 6, 6.4000000000000e+01),
(6, 5, 6.4000000000000e+01),
(6, 6, -218.46),
(6, 7, 6.4000000000000e+01),
(7, 6, 6.4000000000000e+01),
(7, 7, -218.46),
(7, 8, 6.4000000000000e+01),
(8, 7, 6.4000000000000e+01),
(8, 8, -218.46),
(8, 9, 6.4000000000000e+01),
(9, 8, 6.4000000000000e+01),
(9, 9, -218.46),
(9, 10, 6.4000000000000e+01),
(10, 9, 6.4000000000000e+01),
(10, 10, -218.46);

DECLARE @Sql nvarchar(max), @PvtCols nvarchar(max), @PvtSelect nvarchar(max)

SELECT @PvtSelect = Stuff(
                (
                    SELECT ',IsNull(' + Quotename(B) + ',0) as ' + Quotename(B)
                    FROM MYTABLE mt
                    GROUP BY B
                    ORDER BY B
                    FOR XML PATH(''), TYPE
                    ).value('.', 'NVARCHAR(MAX)') 
                ,1,1,'')

SELECT @PvtCols = Stuff(
                    (
                    SELECT DISTINCT  ',' + Quotename(B) 
                    FROM MYTABLE mt
                    FOR XML PATH(''), TYPE
                    ).value('.', 'NVARCHAR(MAX)') 
                ,1,1,'')

SET @Sql =
'SELECT ' + @PvtSelect + ' 
FROM
(   SELECT  x = a
        ,   y = b
        ,   v = (CASE WHEN IsNumeric(val)=0 THEN 0 ELSE val END)
    FROM    MYTABLE
) AS T
PIVOT
(
    min( v)
    FOR y IN (' + @PvtCols + ') 
) AS pvt
order by x'

EXEC(@SQL) 
```

# ios - 返回一个 NSManagedObject

> ID：10325539
> 
> 赞同：0
> 
> 时间：2012-04-26T00:07:56.133
> 
> 标签：ios, core-data, memory, memory-leaks, automatic-ref-counting

我正在通过仪器分配工具运行我的应用程序。拍摄快照并比较哪些内存被搁浅。

有时我会找到对此方法的引用：

```
-(Book *) getBook {    
    return (Book *)[[AppDelegate getCoreDataContext] existingObjectWithID: book_id error:nil];
} 
```

这会导致返回的 Book 对象泄漏吗？

注意：我正在使用 ARC 并为 4.2+ iPad 编译

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:24:41.407

那里没有泄漏。这只是意味着该物体仍然存在。可能在 ManagedObjectContext 缓存中。请记住，除非您手动重置上下文，否则 Core Data 将保留 NSManagedObjects 引用作为快速访问机制。那里不用担心。如果它们变得太多，它会自行清理。

# android - 尝试从 Android 中的远程服务器解析 Xml 时出现 SAXParser 错误

> ID：10325542
> 
> 赞同：0
> 
> 时间：2012-04-26T00:08:29.030
> 
> 标签：android, xml, xml-parsing, sax, saxparser

我正在尝试`xml`从远程[服务器](http://www.connectingtomorrow.co.uk/xmlFiles/accounts.xml)解析。

我的 3 个`java`程序的代码如下： **1\. BillScreen.java：**

```
package cc3012n.kalrashid;

import java.net.URL;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class BillScreen extends Activity implements OnClickListener {

     String baseURL = "http://www.connectingtomorrow.co.uk/xmlFiles/accounts.xml";
     TextView tv;

     @Override
     protected void onCreate(Bundle savedInstanceState) {
         // TODO Auto-generated method stub
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

         Button b = (Button) findViewById (R.id.bGo);
         tv = (TextView) findViewById (R.id.tvXML);

         b.setOnClickListener(this);
     }

     @Override
     public void onClick(View v) {
         try {
             URL website = new URL(baseURL);
             SAXParserFactory spf = SAXParserFactory.newInstance();
             SAXParser sp = spf.newSAXParser();
             XMLReader xr = sp.getXMLReader();
             HandlingXMLStuff doingWork = new HandlingXMLStuff();
             xr.setContentHandler(doingWork);
             xr.parse(new InputSource(website.openStream()));
             String information = doingWork.getInformation();
             tv.setText(information);
         } catch(Exception e){
             tv.setText("error");
         }
     }  
} 
```

**2\. 处理 XML 的东西：**

```
package cc3012n.kalrashid;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class HandlingXMLStuff extends DefaultHandler {

    XMLDataCollected info = new XMLDataCollected();

    public String getInformation() {
        return info.dataToString();
    }

     @Override
     public void startElement(String uri, String localName, String qName,
         Attributes attributes) throws SAXException {
         // TODO Auto-generated method stub
         if (localName.equals("customer_id")) {
          String customer = attributes.getValue("data");
          info.setCustomer(customer);
      } else if (localName.equals("table_id")) {
          String table = attributes.getValue("data");
          info.setTable(table);
      }
    }
} 
```

**3\. XMLDataCollected.java：**

```
public class XMLDataCollected {

    String customer = null;
    String table = null;

    public void setCustomer (String ac){
        customer = ac;
    }

    public void setTable(String tbl){
        table = tbl; 
    }

    public String dataToString(){
        return customer + " In table Number " +table;
    }
} 
```

但它返回一个错误..所以它无法读取`xml`文件..你能告诉我我做错了什么吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:52:58.027

我想你忘了添加访问互联网的权限。尝试在您的 AndroidManifest.xml 中添加以下行

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# javascript - 使用 iOS 的 UIAutomation Instruments 时，有没有办法让我的应用在测试之间保持打开状态？

> ID：10325548
> 
> 赞同：1
> 
> 时间：2012-04-26T00:08:39.877
> 
> 标签：javascript, instruments, ios-ui-automation

到目前为止，我已经成功地从 Instruments GUI 运行了 iOS 自动化，并且还在命令行上使用了 Instruments。作为测试的一部分，我没有找到任何允许我手动打开或关闭我的应用程序的选项。相反，运行仪器似乎总是在开始时启动应用程序并在结束时关闭它。

我希望我的应用程序保持打开状态的原因是因为我的部分测试涉及与桌面浏览器的配对过程。理想情况下，在 osx 上的 jenkins 中，我会有一系列 shell 命令：

1.  运行使应用程序进入“显示密码”状态的仪器测试。
2.  运行另一个在我的浏览器组件中输入密码的命令。
3.  运行另一个仪器测试，验证我的应用已成功配对。

如果我的应用程序在第 1 步后自动关闭，那么该序列的其余部分将不起作用。

或者，我检查了是否有办法从检测测试中执行 shell 命令，但似乎 js 不允许这样的事情，因为这会带来安全风险。我对 osx 特定的命令很满意，因为我不打算在 Windows 上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:28:09.340

唉，当 Instruments 完成后，没有办法让应用程序进程继续运行。但是，您可以使用`target.delay()`等到应用程序处于您正在寻找的状态。我不太确定您的第 2 步是什么意思。您是否在模拟器之外操作“浏览器组件”？或者这一切都在同一个应用程序中？

# eclipse - Jersey + Spring 3 + Maven 3 + Tomcat 7 @Component 类中的 @Resource 始终为空

> ID：10325550
> 
> 赞同：5
> 
> 时间：2012-04-26T00:08:49.513
> 
> 标签：eclipse, spring, tomcat, maven, jersey

我已经搜索并尝试了所有我能想到的解决此问题的方法，但 TestService 类中的 Dao 始终为空。我看到 Spring 日志显示注入了 Dao 以及 TestService 类。我曾尝试在 WTP 下运行 Eclipse 以及直接在 Tomcat 中运行。两者都会导致相同的错误。任何人都可以帮助破译导致 TestService 类中 Dao 为空的错误在哪里。

版本：

```
Jersey 1.8
Spring 3.0.5Release
Tomcat apache-tomcat-7.0.27 
Maven  3.0.3 (r1075438; 2011-02-28 12:31:09-0500)
Java 1.6.0_31

Eclipse Java EE IDE for Web Developers. 
Version: Indigo Service Release 2
Build id: 20120216-1857 
```

记录 - 显示正在发生的注入（为简洁起见，切断 DEBUG 和 ClassNames）

```
 Creating shared instance of singleton bean 'dataSource' 
 Creating instance of bean 'dataSource' 
 Eagerly caching bean 'dataSource' to allow for resolving potential circular references 
 Finished creating instance of bean 'dataSource' 
 Creating shared instance of singleton bean 'jdbcTemplate' 
 Creating instance of bean 'jdbcTemplate' 
 Eagerly caching bean 'jdbcTemplate' to allow for resolving potential circular references 
 Returning cached instance of singleton bean 'dataSource' 
 Invoking afterPropertiesSet() on bean with name 'jdbcTemplate' 
 Finished creating instance of bean 'jdbcTemplate' 
 Creating shared instance of singleton bean 'testClassDao' 
 Creating instance of bean 'testClassDao' 
Found injected element on class [test.dao.TestClassDao]: AutowiredMethodElement for public void test.dao.TestClassDao.setDataSource(javax.sql.DataSource) 
 Eagerly caching bean 'testClassDao' to allow for resolving potential circular references 
Processing injected method of bean 'testClassDao': AutowiredMethodElement for public void test.dao.TestClassDao.setDataSource(javax.sql.DataSource) 
 Returning cached instance of singleton bean 'dataSource' 
 Autowiring by type from bean name 'testClassDao' to bean named 'dataSource' 
 Finished creating instance of bean 'testClassDao' 
 Creating shared instance of singleton bean 'testService' 
 Creating instance of bean 'testService' 
Found injected element on class [test.service.admin.TestService]: AutowiredFieldElement for test.dao.TestClassDao test.service.admin.TestService.dao 
 Eagerly caching bean 'testService' to allow for resolving potential circular references 
Processing injected method of bean 'testService': AutowiredFieldElement for test.dao.TestClassDao test.service.admin.TestService.dao 
 Returning cached instance of singleton bean 'testClassDao' 
Autowiring by type from bean name 'testService' to bean named 'testClassDao' 
 Finished creating instance of bean 'testService' 
```

错误 - TestService.java 中出现空指针异常，因为 TestClassDao 为空

```
Apr 25, 2012 9:07:04 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [jersey] in context with path [/test-service]     threw exception
java.lang.NullPointerException
at test.service.admin.TestService.createCompanyProfile(TestService.java:35) 
```

TestClassDao.java

```
package test.dao;
import javax.sql.DataSource;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;
import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
import org.springframework.stereotype.Repository;

import test.domain.TestClass;

@Repository
public class TestClassDao {

    private NamedParameterJdbcTemplate namedParamJdbcTemplate;
    private DataSource dataSource;

    @Autowired 
    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
        this.namedParamJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
    }

    public void insertTestClass(TestClass testClass)
    {       
        String query = "INSERT INTO TEST_CLASS_TABLE(NAME) VALUES (:NAME)";

        MapSqlParameterSource namedParams = new MapSqlParameterSource();

        mapParams(namedParams, testClass);

        namedParamJdbcTemplate.update(query, namedParams);
    }

    private void mapParams(MapSqlParameterSource  namedParams, TestClass testClass)
    {

            namedParams.addValue("NAME", testClass.getName());

    }
} 
```

测试类.java

```
 package test.domain;
 import java.util.Date;
 import java.util.HashSet;
 import java.util.Set;

public class TestClass  implements java.io.Serializable {
    private String name;

    public TestClass(String name){
        this.name = name;

    }

    public String getName() {
        return this.name;
    }
} 
```

测试服务.java

```
package test.service.admin;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.Request;
import javax.ws.rs.core.UriInfo;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import test.dao.TestClassDao;
import test.domain.TestClass;

@Path("/resttest")
@Component
public class TestService {
    @Context
    UriInfo uriInfo;
    @Context
    Request request;
    @Autowired 
    TestClassDao dao;

    static Logger log = Logger.getLogger(TestService.class);

    @GET
    @Path("/test")
    public String createCompanyProfile() {

        TestClass test = new TestClass("MyTestName");

        dao.insertTestClass(test);

        return "test done";
    }
} 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:1234/testClassDatabase" />
        <property name="username" value="user" />
        <property name="password" value="password" />
    </bean>

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource">
            <ref bean="dataSource" />
        </property>
    </bean>
    <context:component-scan base-package="test"/>
</beans> 
```

web.xml

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >
<web-app>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>
    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <servlet>
        <servlet-name>jersey</servlet-name>
        <servlet-class>
            com.sun.jersey.spi.container.servlet.ServletContainer
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>jersey</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>  
</web-app> 
```

更新：为网络应用添加了这个，但它没有改变任何东西

```
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"> 
```

pom.xml - 我认为问题可能出在哪里，依赖关系或其他东西

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>test-service</groupId>
    <artifactId>test-service</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>Test Service</name>
    <url>http://maven.apache.org</url>
    <dependencies>
        <!-- Jersey -->
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.19</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-server</artifactId>
            <version>${jersey.version}</version>
        </dependency>

        <!-- Spring 3 dependencies -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Jersey + Spring -->
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-spring</artifactId>
            <version>${jersey.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-core</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-web</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-beans</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-context</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
    </dependencies>
    <build>
        <finalName>test-service</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <properties>
        <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
        <jersey.version>1.8</jersey.version>
    </properties>
</project> 
```

更新已修复：我的朋友看了看，发现我没有为 com.sun.jersey.config.property.packages 设置参数，一旦我们添加了它，一切都会自动运行。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:server-context.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>
    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <servlet>
        <servlet-name>jersey-serlvet</servlet-name>
        <servlet-class>
            com.sun.jersey.spi.spring.container.servlet.SpringServlet
        </servlet-class>
        <init-param>
            <param-name>
                                 com.sun.jersey.config.property.packages
                        </param-name>
            <param-value>service</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jersey-serlvet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>  
</web-app> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T03:51:07.277

Spring 正在使用 DAO 注入TestService**的**实例，但该实例不是请求所要发送的实例。您正在使用 Jersey 的[ServletContainer](http://jersey.java.net/nonav/apidocs/1.8/jersey/com/sun/jersey/spi/container/servlet/ServletContainer.html)来托管您的 Jersey 应用程序，它不会以任何方式与 Spring 集成。它将根据需要自行创建实例，这显然不会由 Spring 注入（无论如何都不会进行一些字节码编织）。我建议使用[SpringServlet](http://jersey.java.net/nonav/apidocs/1.8/contribs/jersey-spring/com/sun/jersey/spi/spring/container/servlet/SpringServlet.html)，它是一个 ServletContainer ，它知道如何从 Spring 上下文中获取资源类。那会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T02:08:18.613

正如 Ryan 指出的那样 - 您的`ServletContainer`servlet 不了解 Spring 容器，因此您的`@Resource`/`@Autowired`永远不会注入依赖项。

改用`SpringServlet`，要么将其添加到 web.xml`，要么将其添加到 Spring WebInitializer 中，而不是两者兼而有之。请参阅下面的示例。

这是代码示例`web.xml`：

```
<servlet>
    <servlet-name>jersey-spring</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>jersey-spring</servlet-name>
    <url-pattern>/resources/*</url-pattern>
    <load-on-startup>1</load-on-startup>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>phonebook.rest</param-value>
    </init-param>
</servlet-mapping> 
```

这是您自定义的代码示例`WebInitializer`：

```
public class PhonebookApplicationWebInitializer implements WebApplicationInitializer {

    @Override
    public void onStartup(ServletContext container) throws ServletException {

        AnnotationConfigWebApplicationContext factory = new AnnotationConfigWebApplicationContext();
        // factory.scan("phonebook.configuration");
        factory.register(PhonebookConfiguration.class);

        ServletRegistration.Dynamic dispatcher = container.addServlet("jersey-spring", new SpringServlet());
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/resources/*");
        dispatcher.setInitParameter("com.sun.jersey.config.property.packages", "phonebook.rest");

        container.addListener(new ContextLoaderListener(factory));

    }

} 
```

你可以在这里看到一些关于 Spring+Jersey 集成的好例子： [http ://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/](http://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/)

# javascript - 如何使用 jQuery 切换选项卡，而不关闭相邻的选项卡。

> ID：10325552
> 
> 赞同：1
> 
> 时间：2012-04-26T00:09:24.713
> 
> 标签：javascript, jquery, toggle, jquery-animate

很难弄清楚这一点。我在页面顶部有 3 个标签。在页面加载时，它们是隐藏的。每个选项卡都包含一段内容。我想单击选项卡 1 并显示选项卡 1 的内容，当我单击选项卡 2 时，我想显示选项卡 2 的内容等。但是，我还希望能够再次单击每个相应的选项卡以隐藏相关的内容。

所以我想要的效果是：点击标签1，显示标签1的内容，点击标签2，显示标签2的内容，再次点击标签2，隐藏标签2的内容。我已经包含了我当前使用的代码；这会正确隐藏选项卡，正确展开它们，但如果我以我想要的方式单击其锚元素，则不会切换每个选项卡。任何帮助是极大的赞赏。

```
$('.tabs').hide();
    $('ul.tabs li a').click(function () {
        $('.content').show();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:19:22.643

在选项卡本身的单击事件中，您希望为随后的单击执行类似的操作，因此当单击活动选项卡时它会隐藏/显示：

```
if ( $(this).hasClass("ui-state-active") ) {
    $(this).toggle();
} 
```

（此解决方案假定您使用的是 jQuery UI 选项卡。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:13:18.620

在我看到 HTML 之前我不能确定，但`$('.content').toggle();`​​应该可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T00:14:48.290

也可以使用`.toggle()`

```
$('.tabs').hide();
$('ul.tabs li a').click(function () {
    $('.content').toggle();
}); 
```

如果您的选项卡在页面加载时隐藏，您应该将其放在 CSS 中，`display: none;`然后使用 click 事件

```
$('ul.tabs li a').click(function () {
    $('.content').toggle();
}); 
```

如果在使用切换时仍有问题，请为每个选项卡创建一个唯一的 ID 并执行此操作。问题出在查询中：

```
$('ul.tabs li a').click(function() {
    $(this).toggle;
}); 
```

通过使用`.content`，您正在激活父元素而不是其子元素

# ios - 同一屏幕上的子视图控制器之间的 IOS 转换

> ID：10325554
> 
> 赞同：0
> 
> 时间：2012-04-26T00:09:38.107
> 
> 标签：ios, uiviewcontroller, xamarin.ios, uiviewanimationtransition

我正在尝试让新的 IOS 5 Container viewControllers 正常工作，但我在它们之间设置动画时遇到了问题。

我有一个“rootViewController”。在这个控制器中，我添加了 2 个子视图控制器。这个功能几乎就像一个 splitViewController。在左边我有一个处理导航的 VC，在右边我有一个显示特定内容的 VC。

我正在尝试在右侧的 VC 和将替换它的新 VC 之间设置动画。

这是我的动画代码：

```
public void Animate(UIViewController toController) {
    AddChildViewController(toController);
    activeRightController.WillMoveToParentViewController(null);
    toController.View.Frame = activeRightController.View.Frame;
    Transition(activeRightController, toController, 1.0, UIViewAnimationOptions.TransitionCurlUp, () => {},
        (finished) => {
        activeRightController.RemoveFromParentViewController();
        toController.DidMoveToParentViewController(this);
        activeRightController = toController;
    });
    activeRightController = toController;
} 
```

几乎一切正常，它使用 CurlUp 转换转换到我的新视图，但是转换本身跨越整个屏幕......不仅仅是我想要转换的单个视图。它“卷曲”父视图，而不是子视图。然而，它确实只替换了它下面的子视图。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T05:35:31.633

我创建了一个新的 UIViewController 类，它是右侧控制器的瘦容器并处理交换动画。请参阅下面的示例。

```
using System;
using MonoTouch.Foundation;
using MonoTouch.UIKit;
using System.Drawing;

namespace delete20120425
{
    [Register ("AppDelegate")]
    public partial class AppDelegate : UIApplicationDelegate
    {
        UIWindow window;
        MainViewController mvc;

        public override bool FinishedLaunching (UIApplication app, NSDictionary options)
        {
            window = new UIWindow (UIScreen.MainScreen.Bounds);

            mvc = new MainViewController ();

            window.RootViewController = mvc;
            window.MakeKeyAndVisible ();

            return true;
        }
    }

    public class MainViewController : UIViewController
    {
        SubViewController vc1;
        ContainerViewController vc2;

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            vc1 = new SubViewController (UIColor.Blue);
            this.AddChildViewController (vc1);
            this.View.AddSubview (vc1.View);

            UIButton btn = UIButton.FromType (UIButtonType.RoundedRect);
            btn.Frame = new RectangleF (20, 20, 80, 25);
            btn.SetTitle ("Click", UIControlState.Normal);
            vc1.View.AddSubview (btn);

            SubViewController tmpvc = new SubViewController (UIColor.Yellow);
            vc2 = new ContainerViewController (tmpvc);

            this.AddChildViewController (vc2);
            this.View.AddSubview (vc2.View);

            btn.TouchUpInside += HandleBtnTouchUpInside;
        }

        void HandleBtnTouchUpInside (object sender, EventArgs e)
        {
            SubViewController toController = new SubViewController (UIColor.Green);
            vc2.SwapViewController (toController);
        }

        public override void ViewWillLayoutSubviews ()
        {
            base.ViewDidLayoutSubviews ();

            RectangleF lRect = this.View.Bounds;
            RectangleF rRect = lRect;

            lRect.X = lRect.Y = lRect.Y = 0;

            lRect.Width = .3f * lRect.Width;
            rRect.X = lRect.Width + 1;
            rRect.Width = (.7f * rRect.Width)-1;

            this.View.Subviews[0].Frame = lRect;
            this.View.Subviews[1].Frame = rRect;
        }

        public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
        {
            return true;
        }
    }

    public class ContainerViewController : UIViewController
    {
        UIViewController _ctrl; 
        public ContainerViewController (UIViewController ctrl)
        {
            _ctrl = ctrl;   
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            AddChildViewController (_ctrl);
            View.AddSubview (_ctrl.View);
        }

        public void SwapViewController (UIViewController toController)
        {
            UIViewController activeRightController = _ctrl;

            AddChildViewController(toController);
            activeRightController.WillMoveToParentViewController(null);
            toController.View.Frame = activeRightController.View.Frame;
            Transition(activeRightController, toController, 1.0, UIViewAnimationOptions.TransitionCurlUp, () => {},
                (finished) => {
                activeRightController.RemoveFromParentViewController();
                toController.DidMoveToParentViewController(this);
                activeRightController = toController;
            });
            activeRightController = toController;   
        }

        public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
        {
            return true;
        }

        public override void ViewWillLayoutSubviews ()
        {
            base.ViewWillLayoutSubviews ();
            RectangleF tmp = this.View.Frame;
            tmp.X = tmp.Y = 0;
            _ctrl.View.Frame = tmp;
        }
    } 

    public class SubViewController : UIViewController
    {
        UIColor _back;
        public SubViewController (UIColor back)
        {
            _back = back;
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();
            this.View.BackgroundColor = _back;
        }

        public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
        {
            return true;
        }
    }
} 
```

# jquery - jQuery 脚本在 IE7 中不起作用（HTML5 Doctype）

> ID：10325557
> 
> 赞同：0
> 
> 时间：2012-04-26T00:10:00.087
> 
> 标签：jquery

以下图像交换器代码在 IE7 中不起作用。我尝试了所有我能想到的都无济于事。

此处的工作示例：[http ://www.bcsstaging.com/lamaze-intimates/bras.php](http://www.bcsstaging.com/lamaze-intimates/bras.php)

**这是 jQuery**

```
 $(document).ready(function() {

    //Setup each produce switcher on the page
    $(".item").each(function(){
        $(this).find(".preview .thumbnails").show();
        var imgTitle = $(this).find(".thumbnails img:first-child").attr("title");   
        $(this).find("a:first").addClass("active");
        $(this).find(".caption").html(imgTitle);        
    });

    //Update Image on Click
    $(".thumbnails a img").click(function(){            
        var navParent = $(this).parent().parent();
        var itemParent = $(this).parent().parent().parent();
        var imgTitle = $(this).attr("title");
        var previewImg = $(itemParent).find("img.main");            
        var link = $(this).parent();    
        var linkHref = link.attr("href");           
        var linkAlt = link.attr("alt");         

        if( $(link).hasClass("active") == false)
        {
            $(navParent).find("a").removeClass("active");
            link.addClass("active");                                            
            $(previewImg).animate({
                opacity: 0.8,
            }, 300, function() {
                if(imgTitle != "") $(itemParent).find(".caption").html(imgTitle);
                previewImg.attr("src", linkHref);               
                previewImg.attr("alt", linkAlt);                
                $(this).animate({
                    opacity: 1,
                    }, 300
                );                          
            });         
        }
        return false;
    });
    $("input").click(function(){
        $("p.more").fadeIn("slow");
    })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:47:25.793

最后是实际的 CSS 不透明度语法。

**IE8 及更早版本需要这样：**

```
filter:alpha(opacity=80); /* For IE8 and earlier */ 
```

# asp.net - 为特定页面指定 MaxHttpCollectionKeys？

> ID：10325558
> 
> 赞同：4
> 
> 时间：2012-04-26T00:10:02.933
> 
> 标签：asp.net, exception, web-config

我想知道是否有办法为特定页面更改此值，而不是为整个项目设置它。我们遇到了限制，但只有几页。我们的项目使用 .NET 3.5。

对于那些不知道这个变量是什么的人，可以解决这个问题：http: [//support.microsoft.com/kb/2661403](http://support.microsoft.com/kb/2661403)

本质上，如果您有很多表单键（超过 1000 个），则在回发到页面时会出现异常。您可以通过在 web.config 中指定来解决此问题：

关于这个限制有几个问题，比如这个： ['Operation is not valid due to the current state of the object' error during postback](https://stackoverflow.com/questions/8832470/operation-is-not-valid-due-to-the-current-state-of-the-object-error-during-pos)

但是，我还没有看到与为特定页面设置此相关的任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T11:44:58.183

不，那是不可能的。它总是检查 appSetting `aspnet:MaxHttpCollectionKeys`，如果缺少它，它将被设置为 1000。您不能覆盖它，因为设置和默认值的读取是在内部类中完成的。

也许更好的方法是构建一个少于 1000 个项目的表单。也许是以巫师的形式。或者可能通过将多个值组合成一个数据结构并在服务器上反序列化它。

# objective-c - NSMutableArray initWithCapacity 失败

> ID：10325562
> 
> 赞同：0
> 
> 时间：2012-04-26T00:10:11.030
> 
> 标签：objective-c, nsmutablearray, init

我正在尝试初始化 NSMutableArray，但它无法正常工作。对数组的后续访问会引发异常，提示“空数组的索引 0 超出范围”。初始化行后面的断点表示我的数组在内存中有一个位置，但它有 0 个对象

这是我目前的尝试：

在我的.h

```
@interface SomeInterface : NSObject 
{
@private
    NSMutableArray *myArr;
} 
```

在我的.m

```
- (id) initWithHeight: (int) height
{
    self = [super init];
    if (self) 
    {
        self->myArr = [[NSMutableArray alloc] initWithCapacity:height];
    }
    return self;
} 
```

断点显示 myArr = (NSMutableArray *) 0x######## 0 个对象

有谁知道如何正确初始化 NSMutableArray？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:18:47.767

`initWithCapacity:`不会在您的数组中创建对象，因此调试器不会说谎 - 您的数组是空的，直到您向其中添加对象，无论是使用`addObject:`对象还是首先使用对象对其进行初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:25:56.117

正如yonix指出的那样，您没有创建任何对象，这里有一个添加对象的示例：

。H

```
#import <Foundation/Foundation.h>

@interface Ssuti : NSObject 
{
    NSMutableArray *_myArr;
}

@property (nonatomic, assign) NSMutableArray *myArr;

- (id) initWithHeight: (int) height;

@end 
```

.m

```
#import "Ssuti.h"

@implementation Ssuti

@synthesize myArr = _myArr;

- (void)dealloc {
     [super dealloc];
}

- (id) initWithHeight: (int) height
{
    self = [super init];
    if (self) 
    {
        self.myArr = [NSMutableArray array];

        [self.myArr addObject:[NSNumber numberWithInt:height]];

        NSLog(@"myArr :: %@", self.myArr);
    }
    return self;
}

@end 
```

然后在 ViewController 中调用它：

```
Ssuti *mySssuti = [[Ssuti alloc]initWithHeight:345];

    [mySssuti release]; 
```

;)

# javascript - mootools 和精灵菜单

> ID：10325564
> 
> 赞同：1
> 
> 时间：2012-04-26T00:10:40.960
> 
> 标签：javascript, mootools, css-sprites

我有一个精灵选项卡菜单，我想在用户单击时更改图像，问题是我无法弄清楚如何正确地做到这一点，这就是我所拥有的：

```
<ul id="addCategoryList">
    <li  id='task' class="sprite-add-task-category-tasks menu-task "></li>
    <li  id='grades' class="sprite-add-task-category-tasks menu-grades-inactive">   </li>
    <li  id='results' class="sprite-add-task-category-tasks menu-results-inactive"></li>
    <li  id='other'  class="sprite-add-task-category-tasks menu-other-inactive"></li>
</ul> 
```

这是javascript：

```
var getCategory = $('addCategoryList').getChildren();
getCategory.each(function(li){
    li.addEvent('click', function(){
        this.removeClass('menu-'+this.id+'-inactive').addClass('menu-'+this.id);
    });
}); 
```

问题是，当我单击它时，它会显示两个与被单击的类别相反的类别。我这样命名它们是因为它们都共享一个共同的精灵，并且“menu-id-inactive”和“menu-id”之间的唯一区别是背景位置，它使图像在用户单击时显示为突出显示/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:32:23.067

Dimitar 我几乎同意一切，但我觉得这种方法更好：

[http://jsfiddle.net/z3nuq/2/](http://jsfiddle.net/z3nuq/2/)

基本区别？无需测试类活动，只需切换它。

2nd 使用事件委托。附加一个事件而不是几十个

第三，随意将项目动态添加到您的列表中！事件已经存在

第四少代码，我讨厌打字，尽管这篇冗长的帖子可能会暗示什么

:)

代码差异仅在 JS 中

```
var cList = $$('#addCategoryList');
cList.addEvent('click:relay(li)', function(e,el){
    el.toggleClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:42:49.190

这并不理想，因为它不能很好地呈现模式。你真的想扭转它，`.addClass('active')`而不是带走一个非通用的非活动类。

如果你的非活动类是通用的，它仍然可以工作。就目前而言，您需要保持活动状态，并且在交换新活动上的类之前，您需要先撤消旧活动。

[http://jsfiddle.net/dimitar/z3nuq/](http://jsfiddle.net/dimitar/z3nuq/)

```
<ul id="addCategoryList">
    <li  id='task' class="sprite-add-task-category-tasks menu-task active">one</li>
    <li  id='grades' class="sprite-add-task-category-tasks menu-grades">two</li>
    <li  id='results' class="sprite-add-task-category-tasks menu-results">three</li>
    <li  id='other'  class="sprite-add-task-category-tasks menu-other">four</li>
</ul> 
```

然后声明：

```
(function() {
    var cList = $('addCategoryList'),
        active = cList.getElement('li.active');

    cList.getElements('li').each(function(li){
        li.addEvent('click', function(){
            active && active.removeClass('active')
            active = this.addClass('active');
        });
    });

})(); 
```

虽然严格来说 - 在`cList.getElements('.active').removeClass('active')`将活动类添加到单击的 el 之前，您只需单击即可。

# tokenize - 标记源代码

> ID：10325565
> 
> 赞同：3
> 
> 时间：2012-04-26T00:10:44.020
> 
> 标签：tokenize

是否有任何可用的库可以标记用不同编程语言（java/C/C++）编写的源代码？（可以识别其中的一部分，例如函数的开始和结束，它们是标识符）。我不想解析源代码，这可能过于复杂。此外，源代码可能不是没有错误的。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T00:27:55.437

您可以使用flex（在 C 下）或 JLex（在 Java 下）之类的[词法分析器](http://en.wikipedia.org/wiki/Lexical_analysis)（或简称词法分析器）对源代码进行标记。获取语​​法以标记 Java、C 和 C++ 的最简单方法可能是使用（根据许可条款）来自开源编译器的代码，使用您最喜欢的词法分析器。即使您发现许可条件过于繁琐，它们也应该具有教育意义...

但是，如果不进行解析，您仍然无法识别函数的开头和结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T00:25:08.737

并非在所有情况下。例如，考虑在存在`typedef`;的情况下解析 C 或 C++ 代码是如何变化的。最初是标识符的标记随后必须被识别为类型名，如果不这样做，那么您将无法正确识别使用`typedef`. 某些语言允许您定义任意运算符（新标记）。有些只是病态的（尝试设计一个 Perl 解析器，或带有损坏的大括号插入规则的 Haskell '98）。

# android - Android OpenGL 简单精灵闪烁问题

> ID：10325566
> 
> 赞同：0
> 
> 时间：2012-04-26T00:10:47.393
> 
> 标签：android, opengl-es, sprite

谢谢您的回复。下面是一个没有纹理的 java/windows 版本，只是为了打折任何与 Android 相关的问题。我按照建议修改了 Move() 并且精灵仍然很紧张。毕竟它只有 1 个四边形，它看起来应该让丝绸光滑 - 不是很密集。

```
import java.awt.Frame;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;

import javax.media.opengl.GL2;
import javax.media.opengl.GLAutoDrawable;
import javax.media.opengl.GLEventListener;
import javax.media.opengl.awt.GLCanvas;
import javax.media.opengl.fixedfunc.GLMatrixFunc;
import javax.media.opengl.glu.GLU;

import com.jogamp.opengl.util.Animator;

public class Practice implements GLEventListener, MouseMotionListener {

    static GLCanvas canvas = new GLCanvas();
    static Animator anim = new Animator(canvas);
    static Frame frame = new Frame();
    private GLU glu;
    private FloatBuffer vertBuff;
    private ByteBuffer indBuff;
    private static float[] color = new float[]{1,1,1,1};
    private static float xpos;
    private static float vel = 100f;
    private static long lastTime = -1;

    @Override
    public void display(GLAutoDrawable drawable) {
        GL2 gl = drawable.getGL().getGL2();
        gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);

        gl.glEnableClientState(GL2.GL_VERTEX_ARRAY);
        gl.glVertexPointer(3,GL2.GL_FLOAT,0,vertBuff);

        gl.glMatrixMode(GLMatrixFunc.GL_MODELVIEW);
        gl.glLoadIdentity();
        gl.glColor4fv(color,0);
        Move(gl);
        gl.glDrawElements(GL2.GL_TRIANGLES,6,GL2.GL_UNSIGNED_BYTE,indBuff);

    }

    private void Move(GL2 gl){

        long time = System.currentTimeMillis();
        long timeStep = 0;
        if(lastTime != -1){
            timeStep = time - lastTime;
        }
        if(timeStep < 20){
            try {Thread.sleep(20-timeStep);} catch (InterruptedException e) {e.printStackTrace();}
        }
        lastTime = time;

        xpos += vel * timeStep/1000f;
        if(xpos>500){
            xpos = 500;
            vel *= -1;  
        }
        if(xpos<-500){
            xpos = -500;
            vel *= -1;  
        }
        gl.glTranslatef(xpos,0.0f,0.0f);
        gl.glScalef(50.0f,50.0f,1.0f);
    }

    @Override
    public void dispose(GLAutoDrawable arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void init(GLAutoDrawable drawable) {
        GL2 gl = drawable.getGL().getGL2();

        gl.glClearColor(0,0,0,1);
        glu = new GLU();

        float[] verts =     {
                                -0.5f, -0.5f, -1.0f,
                                0.5f, -0.5f, -1.0f,
                                0.5f, 0.5f, -1.0f,
                                -0.5f, 0.5f, -1.0f
                            };
        byte[] inds =       {
                                0,1,3, 1,2,3
                            };

        ByteBuffer  bb = ByteBuffer.allocateDirect(48);
        bb.order(ByteOrder.nativeOrder());
        vertBuff = bb.asFloatBuffer();
        vertBuff.put(verts);
        vertBuff.position(0);

        indBuff = ByteBuffer.allocateDirect(6);
        indBuff.order(ByteOrder.nativeOrder());
        indBuff.put(inds);
        indBuff.position(0);

    }

    @Override
    public void reshape(GLAutoDrawable drawable, int x, int y, int width,
            int height) {
        GL2 gl = drawable.getGL().getGL2();
        if(height <=0)height=1;
        float aspect = (float)width/height;
        gl.glMatrixMode(GLMatrixFunc.GL_PROJECTION);
        gl.glLoadIdentity();
        float[] ortho = {
                            (float)1/width,0,0,0,
                            0,(float)1/width*aspect,0,0,
                            0,0,1,0,
                            0,0,0,1
                        };
        //gl.glLoadMatrixf(ortho,0);
        glu.gluOrtho2D(-width,width,-height,height);
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseMoved(MouseEvent e) {
        // TODO Auto-generated method stub
        float R = (float)1/frame.getWidth()*e.getX();
        float B = (float)1/frame.getHeight()*e.getY();
        color = new float[]{R,.2f,B,1.0f};
    }

    public static void close(){
        anim.stop();
        frame.dispose();
        System.exit(0);
    }

    public static void main(String[] args) {
        canvas.addGLEventListener(new Practice());
        canvas.addMouseMotionListener(new Practice());

        frame.add(canvas);
        frame.setSize(500,300);

        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e){
                close();
            };
        });

        frame.setVisible(true);
        anim.start();
        canvas.requestFocus();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:19:41.500

试过这个（Viewpad 10s，VegaComb 3.2）；它大部分时间运行平稳，但每 3 秒就会出现一次明显的故障。与GC没有任何关系。我把所有静态的东西都移到`onSurfaceCreated`了几乎没有影响的地方。代码中没有任何内容可以解释这种行为。

( `GLES20TriangleRenderer`API-Demos) 运行更流畅，但也会出现故障。请注意，这个示例做了更多的工作，但仍然没有任何东西可以解释任何帧时间问题。该`Kube`示例（旋转 Rubics Cube）*似乎*没有故障，也许这是一个感知问题。

我认为没有任何办法可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:05:07.067

您可能会发现绘制始终与像素边界对齐的精灵很有帮助，否则，如果它位于随机子像素位置，则每帧的采样结果将有所不同，从而使您的纹理外观略有不同（这可以解释为闪烁）。

最简单的方法是使用 gluOrtho 来匹配您的视口宽度和高度（即`gluOrtho2D(0,width,0,height)`，然后仅在整数位置绘制精灵。如果您想保留“-5 到 5”投影矩阵，您将拥有进行数学计算以找出如何将精灵纹素与屏幕像素完全对齐。

另一种选择可能是尝试从`LINEAR`采样更改为`NEAREST`采样，这可能会有所帮助，但如果 GPU 中存在一些舍入误差，可能仍会偶尔闪烁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:07:21.493

在 HTC Desire S 上对其进行了测试。除了偶尔出现故障外，工作正常。

仍然限制帧率可以使它更好。您可以将“移动”方法更改为：

```
long lastTime = -1;
private void Move(GL10 gl) {
    gl.glTranslatef(xpos,0.0f,0.0f);

    long time = System.currentTimeMillis();
    long timeStep = 0;
    if(lastTime != -1){
        timeStep = time - lastTime;
    }
    if(timeStep < 20){
        try {Thread.sleep(20-timeStep);} catch (InterruptedException e) {e.printStackTrace();}
    }
    lastTime = time;

    xpos += vel * timeStep/1000.0f;
    if(xpos>5*aspect){
        xpos = 5*aspect;
        vel *= -1;  
    }
    if(xpos<-5*aspect){
        xpos = -5*aspect;
        vel *= -1;  
    }
} 
```

# java - 更改 JLabel 中某些文本的颜色

> ID：10325568
> 
> 赞同：6
> 
> 时间：2012-04-26T00:11:04.230
> 
> 标签：java, swing, jlabel

我有一个带有文本的 JLabel，我想在其中添加另一段文本，但后者的颜色与前者的颜色不同（例如红色）。我试过了：

```
statusLabel.setText(statusLabel.getText() +
  " <html><span style\"color: red\">" + message + "</span></html>"); 
```

但它不起作用。它只显示 HTML 标签，但不呈现它们。有什么建议么？是否可以更改 JLabel 中某些文本的颜色？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T00:16:42.430

试试这个：

```
setText("<html>Some text <font color='red'>some text in red</font></html>"); 
```

或者对于您的情况，您可以像这样构建字符串：

```
statusLabel.setText(String.format("<html>%s<font color='red'>%s</font></html>", 
        statusLabel.getText(), message)); 
```

# iphone - iAD 内存泄漏

> ID：10325571
> 
> 赞同：0
> 
> 时间：2012-04-26T00:11:25.837
> 
> 标签：iphone, objective-c, memory-leaks, iad

此代码正在泄漏：

```
 self.adView = ADBannerView* tempAddBannerView = [[ADBannerView alloc] initWithFrame:CGRectZero];
self.adView.frame = CGRectOffset(adView.frame, 0, 416);
self.adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifier320x50];
self.adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifier320x50;
[self.view addSubview:adView];
self.adView.delegate = self;
self.bannerIsVisible = NO; 
```

显然是因为 adView 从未被释放。最好的释放地点在哪里？

我修复它的尝试崩溃了：

```
 ADBannerView* tempAddBannerView = [[ADBannerView alloc] initWithFrame:CGRectZero];
    tempAddBannerView.frame = CGRectOffset(adView.frame, 0, 416);
    tempAddBannerView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifier320x50];
    tempAddBannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifier320x50;

self.adView = tempAddBannerView;
[tempAddBannerView release];
[self.view addSubview:adView];
self.adView.delegate = self;
self.bannerIsVisible = NO; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:01:16.030

代码`[self.view addSubview:adView];`保留了，`UIView`所以你应该在该行**之后**安全地释放它。

# python - 通过 Python 脚本更新以前打开的 LibreOffice 电子表格而不关闭 LibreOffice

> ID：10325575
> 
> 赞同：1
> 
> 时间：2012-04-26T00:12:20.787
> 
> 标签：python, csv, libreoffice

我有一个 LibreOffice 电子表格 (data.ods)，其中包含 30 列中大约 500 行逗号分隔值。第一行包含列标题。

Data.ods 通过脚本在一天中定期更新。然后，我在另一个电子表格 (main.ods) 中有几个指向 data.ods 中单元格的链接。

我目前正在执行以下操作：

1) 使用 Python 脚本生成 data.ods。

2) 打开 data.ods，以便 LibreOffice 对逗号分隔值进行文本导入以填充行。

3) 打开 main.ods（它会自动更新链接）。

我目前无法简单地让 main.ods 保持打开状态，因为即使在关闭 data.ods 之后，LibreOffice 似乎仍然对文件有某种锁定，并且在我完全关闭 LibreOffice 之前不允许我的脚本编辑 data.ods（要求我关闭 main.ods）。

我想做以下事情：

1) 打开 main.ods。

2) 通过脚本生成 data.ods。

3) 使用 Edit...Links...Update Values 将更新的值导入 main.ods。

4) 让 main.ods 保持打开状态。

5）通过脚本生成新的data.ods。

6) 使用 Edit...Links...Update Values 将更新的值导入 main.ods。

7) 必要时重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:56:58.463

您可能知道有一些方法可以通过 Python 脚本处理 Open/Libre Offie。它甚至附带了自己的 Python 解释器。

问题是关于如何做到这一点的文档很糟糕——但其中一项功能就是让一个外部运行的 Python 脚本来访问在界面上打开的文档（如电子表格），并为其添加值。

它很慢，但效果很好——因为你说的只有几百行，所以速度无关紧要。

现在，让我尝试查找相关文档并为您提供有关从何处开始的链接： [http ://www.openoffice.org/udk/python/python-bridge.html#modes](http://www.openoffice.org/udk/python/python-bridge.html#modes)

如果您将示例代码粘贴到 Python 交互式提示中（需要是随 LibreOffice 安装的 Python），您将能够使用 Python 内省可用的方法和属性，`dir`并找出方法调用以从脚本编辑单元格内容.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:12:44.540

正如 jsbueno 所提到的，您可以使用 uno 模块在文档打开时（并且它不会阻止手动编辑文档）在文档上运行 Python。

同意该文档目前是垃圾。我正在尝试在[www.documenthacker.com](http://www.documenthacker.com) / [http://documenthacker.wordpress.com](http://documenthacker.wordpress.com)上做一些事情，但专注于 Writer。然而，这些程序是相似的，您可能会发现打开文档、导航文档等的方法很有用——一旦您开始使用 Python 编程 LibreOffice/OpenOffice，解决下一个问题就变得相当容易。

在互联网上，Java 中的示例通常比 Python 中的示例多，不幸的是，如何在示例之间进行翻译只是半清楚的（在我的文档的待办事项列表中）。好消息是 Python 方式通常要简单得多。

# javascript - addClass removeClass w/jQuery 用于动画

> ID：10325579
> 
> 赞同：2
> 
> 时间：2012-04-26T00:12:53.323
> 
> 标签：javascript, jquery, dom, css-transitions

[**在下面查看我的答案**](https://stackoverflow.com/a/10336991/742030)

我正在使用 jQuery 使用 CSS 实现我自己的滑动页面转换，并遇到以下问题：

我正在使用 addClass 方法，它在第一次触发链接以将页面动态加载到 div 时起作用。当另一个链接被触发时，页面加载没有过渡。我认为我需要使用 removeClass 方法，但这可以防止转换根本不触发。我尝试了使用这两个类的各种方法，但每次链接被触发时我都无法让它工作。

知道我有什么错误/遗漏吗？

编辑对于那些不理解 CSS 子类的人：

> 一次可以将多个类添加到匹配元素的集合中，用空格分隔，如下所示：

```
$("p").addClass("myClass yourClass"); 
```

[取自 jQuery 文档](http://api.jquery.com/addClass/)

谢谢。

```
/* --------------- Handle Page Body Loading ----------------- */

function loadBody(target, gotoURL)
{
    $('#' + target)
    .addClass('slide out')
    .load(gotoURL, function (response)
    {
        iniScroll('scrollBody', 'bodyScrollContainer');
    })
    .addClass('slide in')
    removeSlideClass();//WITHOUT THIS, IT FIRES ONLY THE FIRST USE!!
};

function removeSlideClass()
{
    $('#bodyContent').removeClass('slide in');
    $('#bodyContent').removeClass('slide out');
}; 
```

如果我编写如下所述的代码，它的工作原理完全相同（jQuery 101）；

```
function loadBody(target, gotoURL)
{
    $('#' + target).addClass('slide out');
    $('#' + target).load(gotoURL, function (response)
    {
        iniScroll('scrollBody', 'bodyScrollContainer');
    });
    $('#' + target).addClass('slide in');
    $('#' + target).removeSlideClass();
};

function removeSlideClass()
{
    $('#bodyContent').removeClass('slide in');
    $('#bodyContent').removeClass('slide out');
}; 
```

的CSS：

```
.out, .in {
    -webkit-animation-timing-function: ease-out;
    -webkit-animation-duration: 650ms;
}
.slide.out {
    -webkit-transform: translateX(-100%);
    -webkit-animation-name: slideouttoleft;
}

.slide.in {
    -webkit-transform: translateX(0);
    -webkit-animation-name: slideinfromright;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:54:36.080

我想到了：

`.addClass('slide out')`将方法与事件绑定`webkitAnimationEnd`，后跟 return 语句，当第一个转换完成时触发第二个转换。当此事件触发时，它会从原始页面中删除所有类。记住取消绑定`webkitAnimationEnd`事件可以防止向新页面添加额外的处理程序，以便在我们需要时可以重新开始该过程。`removeClass()`因此不需要jQuery 的方法。

新的页面转换方法。

```
/* --------------- Handle Page Body Loading ----------------- */

function loadBody(target, gotoURL)
{
    $('#' + target)
    .addClass('slide out')
    .bind('webkitAnimationEnd', function(){
        $(this).load(gotoURL, function (e)
        {
            iniScroll('scrollBody', 'bodyScrollContainer');
            $('#' + target)
            .toggleClass('slide in')
            .unbind('webkitAnimationEnd');
        });
    });
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-26T01:26:44.497

CSS 类不应包含任何空格...

IE：

slide out，应该是slide-out，或者slide_out或者slideOut

尝试删除空格并修复 css 中的类以匹配。

# java - 二分搜索输出错误

> ID：10325581
> 
> 赞同：0
> 
> 时间：2012-04-26T00:13:21.793
> 
> 标签：java, binary-search

我正在对 String 进行二进制搜索，它显示输出错误。我不知道我错过了什么，我需要一些建议。

**这是我的代码：**

```
public static final int Not_Found = -1;

    public static int BS( String[][] record, String x )
{
int low = 0;
int high = record.length - 1;
int mid;

while( low <= high )
{
mid = ( low + high ) / 2;

if( record[ mid ].compareTo( x ) < 0 )
low = mid + 1;
else if( record[ mid ].compareTo( x ) > 0 )
high = mid - 1;
else
return mid;
}

return Not_Found;
    } 
```

是我遗漏了什么吗？或者我必须使用其他方式找到它？

**这里的错误：**

错误：找不到符号 if(record[ mid ].compareTo( x ) < 0 ) ^ 符号：方法 compareTo(String)

错误：找不到符号 else if(record[ mid ].compareTo( x ) > 0 ) ^ 符号：方法 compareTo(String)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:20:53.263

Well`record`是一个二维数组，所以`record[j]`会给出一个数组而不是字符串。您是否可能打算改用一维数组？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:28:21.840

您正在使用“String[][]”表示 2D 记录。因此，record[j] 给出了对应的第 j 列字符串数组。这不能与字符串进行比较。因此，如果是 1d 记录，请使用“String[] 记录”。

# php - 在代码的开头还是结尾定义类和函数更可取？

> ID：10325584
> 
> 赞同：1
> 
> 时间：2012-04-26T00:13:50.980
> 
> 标签：php, javascript, coding-style

我遵循的 Javascript 教程总是在使用之前定义，但我的 PHP 书总是在最后定义，实际上指出这被认为是好的做法。

有理由这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T00:19:55.097

如果您正在执行内联代码（例如在加载时执行），则必须在使用它们的代码之前定义全局变量。

可以按照您认为使代码最整洁和最容易阅读的任何顺序来定义函数。

例如，在这段代码中：

```
foo();

function foo() {
    alert(x);
}

var x = 4;
​ 
```

调用`foo()`会提醒`undefined`，因为 x 在调用时还没有值`foo()`，但是您会注意到`foo`可以在出现在函数定义之前的代码中调用它，因为所有函数都在任何代码实际执行之前加载。

至于最佳实践，我认为以您能找到的将相关功能模块放在一起的最佳方式组织代码是有意义的，但顺序通常并不重要。我相信您意识到 javascript 没有任何实际上是类的东西。它可以使用函数对象和原型来模拟其他语言所具有的类类行为，但它实际上并没有类，因为它的对象基于原型，而不是类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T00:25:46.727

在 Javascript 中，通常的做法是在闭包内声明所有内容，可以是对象或函数，因此您不会污染全局范围。在定义变量时，通常建议在它们作用域的函数顶部声明它们。

Javascript 没有类，但只要记住*函数声明*与*函数表达式*不同，就可以在任何地方定义对象字面量或构造函数：

```
function foo () { ... } // Declaration, works anywhere
var foo = function () { ... } // Expression, works only after the assignment 
```

更多信息在这里[http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/](http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T00:41:43.123

在 Javascript 中，必须先定义一个函数才能使用它。所以函数定义必须在使用函数的代码之前。

一些提高页面速度的建议告诉我们将 Javascript 执行放在 HTML 页面的末尾。这样做，当页面和所有元素完全加载时，Javascript 将启动。（[见这里的文章](http://betterexplained.com/articles/speed-up-your-javascript-load-time/)）

尽管如此，Javascript 的其余用法是将函数声明放在`<header>`节中，以便定义的函数可以立即在正文的任何​​元素中运行，包括`<body>`元素本身。您始终可以将引导程序或其他函数执行放在 HTML 页面的末尾。

对于 PHP，它是不同的。

在 PHP 脚本中，您可以在代码中的任何位置定义函数，甚至在使用函数的代码之后。这是可能的，因为 PHP 必须在运行第一行代码之前读取完整的脚本。

此外，为了代码的可读性，PHP 的剩余用途是从算法开始，并将函数定义放在脚本的末尾（或者更常见的是，将函数放在单独的脚本中）。

# git - 如何嵌套 git 存储库；获取并合并

> ID：10325586
> 
> 赞同：10
> 
> 时间：2012-04-26T00:14:03.527
> 
> 标签：git, version-control, git-merge, git-fetch

所以我有两个 git repos。第一个是我们的框架（想想 db 抽象、函数），然后是我们新项目的另一个 git repo。

我想将框架 git repo 包含到项目 git 中，根据 GitHub 帮助，这应该可以工作：

```
 cd /project
 git remote add framework git://github.com/username/Framework.git
 git fetch framework
 git merge framework/master 
```

问题是，当我进行合并时，它会从框架中获取所有文件，并将它们简单地转储到项目的根目录中。相反，我们如何将框架文件合并到子目录中，例如`/project/framework/`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-26T00:15:45.390

您可能想查看 Git 的[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)支持。子模块允许您将一个 git 存储库嵌入到另一个 git 存储库中。这类事情有[替代解决方案，但我自己没有使用过。](https://github.com/apenwarr/git-subtree)

一个示例可能如下所示：

```
$ git clone git://github.com/username/project.git
$ cd project
$ git submodule add git://github.com/username/framework.git framework
$ git commit -m "added framework submodule" 
```

如果要克隆带有子模块的存储库，则需要使用以下`--recursive`选项：

```
$ git clone --recursive git://<repository-with-submodules>.git 
```

或者，您可以定期克隆，然后运行：

```
$ git submodule init
$ git submodule update 
```

阅读链接文档（和`git submodule --help`）了解更多信息。

如果对子模块进行了更改，您可以像这样将它们引入：

```
# first update the submodule just like any other git repository
$ cd project/framework
$ git pull

# now you have to record the new commit in the parent repository
$ cd ..
$ git commit -m "updated framework submodule" 
```

最后一步是必要的，因为 git 会记录与给定子模块关联的特定提交（这样当任何人克隆父模块时，他们将获得该子模块的版本，而不是其最新版本，这可能已经经历了破坏性的更改，这将阻止它按预期与父存储库一起工作）。所以如果你更新子模块，你需要在父模块中记录新的提交。

如果您在`framework`子模块中进行更改，您将再次`git push`像对任何其他存储库一样进行更改。然后，您必须在父模块中提交新修订。

# java - 冒号分隔值正则表达式验证

> ID：10325592
> 
> 赞同：1
> 
> 时间：2012-04-26T00:14:43.563
> 
> 标签：java, regex

我诚然不是正则表达式专家，但想验证输入字符串并为各种验证编写 if/else 语句并不是这样做的方法。我正在使用 Java。

输入将采用冒号 (:) 分隔的三个值元组的形式。第一个值将是一个整数（在大小/长度方面可能是一个长整数），其他两个值是数字或字符串。

例如，以下值将是有效的：

*   1:x:456
*   2:2:3
*   3:abc:123

..这些不会：

*   x:1:2
*   1::2
*   1:3::x
*   1:2
*   fyz::2:1
*   1:3::3

是否有一种相对简单的方法可以使用正则表达式验证此输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:17:46.580

对于可以混合第二个和第三个值的情况：

```
/^[0-9]+:[0-9a-zA-Z]+:[0-9a-zA-Z]+$/ 
```

对于它们只能是字符串或数字的情况：

```
/^[0-9]+:([0-9]+)|([a-zA-Z]+):([0-9]+)|([a-zA-Z]+)$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:25:46.523

我建议如下：

```
 ^[0-9]+:[^:]+:[^:]+ 
```

行首，后接数字，后接冒号，后接任意数量的非冒号字符，后接冒号，后接非冒号字符。

这应该是最灵活的以数字开头的冒号分隔格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T00:36:27.743

## 匹配`Numbers:(letters OR numbers):(letters OR numbers)`

如果您希望它只能是数字或字母用于第二和第三部分，您可以使用以下模式：

```
String pattern = "^\\d+(:([A-Za-z]+|\\d+)){2}$"; 
```

基本上，它会查找一个数字序列 ( `\\d+`)，然后是一个重复两次的字符序列：

*   以 aa 开头`:`，然后是
    *   一个字母序列（英文），即`[A-Za-z]`, OR
    *   一串数字

和字符是锚点，表示“字符串开头”`^`和`$`“字符串结尾”

例子：

```
public class RegexTest {
    public static void Main(String[] args) {
        String pattern = "^\\d+(:([A-Za-z]+|\\d+)){2}$";
        String example = "333:abc:123456";
        if (example.matches(pattern)) {
           System.out.println("Matches");
        }   
    }
} 
```

## 匹配`Numbers:(both letters and numbers:(both letters and numbers)`

为此，您可以使用以下模式：

```
String pattern = "^\\d+(:[A-Za-z0-9]+){2}$"; 
```

哪个将匹配：

*   一系列数字，后跟
*   冒号，后跟字母或数字的任意组合
    *   重复此序列两次

* * *

```
 public class RegexTest {
        public static void Main(String[] args) {
            String pattern = "^\\d+(:[A-Za-z0-9]+){2}$";
            String example = "333:a3b4c:12adf3456";
            if (example.matches(pattern)) {
               System.out.println("Matches");
            }   
        }
    } 
```

这个例子将匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T00:19:40.883

```
 /\d+:\[a-zA-Z0-9]+:\[a-zA-Z0-9]+/ 
```

如果你知道你可以做的最大长度

```
 /\d{1,X}:[a-zA-Z0-9]{1,Y}:[a-zA-Z0-9]{1,Z}/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T01:29:48.257

如果您的字符串可能在带引号的字符串中包含冒号，如下所示：

```
1234:"Ratio is 1:20":"Fuel:Oil" 
```

然后你需要解决字符串中的冒号。基于 Barton Chittenden 的回答，您可以使用：

```
^(\d+):(".+?"|[^"][^:]*):(".+?"|[^"][^:]*)$ 
```

[在 regexr 上查看](http://regexr.com?30p43)。它会因为一些愚蠢的事情而崩溃`123:":"`，但您也可以修改正则表达式来处理这些边缘情况。

# iphone - 在一对多关系Coredata中检索特定对象的信息

> ID：10325596
> 
> 赞同：1
> 
> 时间：2012-04-26T00:15:01.997
> 
> 标签：iphone, ios, core-data, nspredicate

任何人都可以帮我找到这个问题的解决方案，我有这个核心数据模型：

![在此处输入图像描述](../Images/7d20b4f4bb9caa2c25353efb62bff9f8.png)

编辑：我制定了更好的问题，我想检索具有 taskes.isView = NO 和任务日期 = 今天的实体 MyDate 的特定名称的所有任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:31:01.377

我会`Task`用谓词获取实体

```
[NSPredicate predicateWithFormat:@"taskDate.name == %@ && isView == NO", taskName] 
```

找出`Tasks`谁的 taskDate 有名字`taskName`并且`isView`是`NO`.

相反，如果您需要找到具有给定名称的`Tasks`hava a`taskDate`和*任何*`taskDate`[ `taskes`sic] have `isView==NO`，那么您需要（获取`MyDate`实体）：

```
[NSPredicate predicateWithFormat:@"name == %@ && ANY taskes.isView == NO"] 
```

从`resultSet`获取的结果中，您可以获得所有`Tasks`使用键值编码[集合运算符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html#//apple_ref/doc/uid/20002176-BAJEAIEE)：

```
[resultSet valueForKeyPath:@"@distinctUnionOfSets.taskes"]; 
```

# git - 删除所有超过 X 天/周的分支

> ID：10325599
> 
> 赞同：62
> 
> 时间：2012-04-26T00:15:14.780
> 
> 标签：git, shell

我发现下面的脚本按日期列出了分支。如何过滤它以排除较新的分支并将结果提供给 Git 删除命令？

```
for k in $(git branch | sed /\*/d); do 
  echo "$(git log -1 --pretty=format:"%ct" $k) $k"
done | sort -r | awk '{print $2}' 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-26T00:38:10.510

使用`--since`and怎么样`--before`？

例如，这将删除一周内未收到任何提交的所有分支：

```
for k in $(git branch | sed /\*/d); do 
  if [ -z "$(git log -1 --since='1 week ago' -s $k)" ]; then
    git branch -D $k
  fi
done 
```

如果要删除超过一周的所有分支，请使用`--before`：

```
for k in $(git branch | sed /\*/d); do 
  if [ -z "$(git log -1 --before='1 week ago' -s $k)" ]; then
    git branch -D $k
  fi
done 
```

请注意，这也会删除未合并到 master 或任何签出分支的分支。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-04-24T09:37:33.060

*穷人的方法：*

按上次提交日期列出分支：

```
git branch --sort=committerdate | xargs echo 
```

这将列出分支，而 `xargs echo`管道使其内联（*谢谢[Jesse](https://stackoverflow.com/questions/10325599/delete-all-branches-that-are-more-than-x-days-weeks-old/49998249#comment96947958_49998249)*）。

您将在开始时看到**所有带有旧分支的分支**：

```
1_branch 2_branch 3_branch 4_branch 
```

复制**前 n 个**，它们已过时并粘贴在批量删除命令的末尾：

```
git branch -D 1_branch 2_branch 
```

这将仅删除选定的那些，因此您可以更好地控制该过程。

*要按创建日期列出分支，请使用[Amy](https://davidwalsh.name/sort-git-branches#comment-502442)`--sort=authordate:iso8601`建议的命令*

### 删除远程分支

使用 `git branch -r --sort=committerdate | xargs echo` *（说 [kustomrtr](https://stackoverflow.com/questions/10325599/delete-all-branches-that-are-more-than-x-days-weeks-old/49998249#comment103834030_49998249)）*查看远程分支，而不是`git push origin -d 1_branch 2_branch`删除合并的 分支*（谢谢[Jonas](https://stackoverflow.com/questions/10325599/delete-all-branches-that-are-more-than-x-days-weeks-old/49998249#comment114742932_49998249)）*。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-01T17:03:32.147

这对我有用：

```
for k in $(git branch -r | sed /\*/d); do 
  if [ -z "$(git log -1 --since='Aug 10, 2016' -s $k)" ]; then
    branch_name_with_no_origin=$(echo $k | sed -e "s/origin\///")
    echo deleting branch: $branch_name_with_no_origin
    git push origin --delete $branch_name_with_no_origin
  fi
done 
```

关键部分是分支名称（变量 $k）包含`/origin/`部分例如`origin/feature/my-cool-new-branch` 但是，如果您尝试 git push --delete，它将失败并出现错误，例如：
无法删除 'origin/feature/my-cool- new-branch'：远程引用不存在。
所以我们使用 sed 删除`/origin/`部分，这样我们就剩下一个分支名称`feature/my-cool-new-branch`，现在 git push --delete 可以工作了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-20T06:29:16.573

这类似于**Daniel Baulig**的回答，但也考虑了**本**的评论。它还通过给定的模式过滤分支，因为我们使用 try-XX 约定进行分支。

```
for k in $(git branch -r | awk -F/ '/\/YOUR_PREFIX_HERE/{print $2}' | sed /\*/d); do
   if [ -z "$(git log -1 --since='Jul 31, 2015' -s origin/$k)" ]; then
     echo deleting "$(git log -1 --pretty=format:"%ct" origin/$k) origin/$k";
     git push origin --delete $k;
   fi;
done 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-10-31T14:46:00.523

仅显示一个月前最后一次提交合并到主分支的本地分支的删除命令的安全方法。

```
for k in $(git branch --format="%(refname:short)" --merged master); do 
  if (($(git log -1 --since='1 month ago' -s $k|wc -l)==0)); then
    echo git branch -d $k
  fi
done 
```

这除了输出如下*内容外什么也没做：*

```
git branch -d issue_3212
git branch -d fix_ui_search
git branch -d issue_3211 
```

我直接复制粘贴（去掉echo直接删除）

这是非常安全的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-16T18:24:56.910

上面的[代码](https://stackoverflow.com/a/10325758/537998)对我不起作用，但很接近。相反，我使用了以下内容：

```
for k in $(git branch | sed /\*/d); do 
  if [[ ! $(git log -1 --since='2 weeks ago' -s $k) ]]; then
    git branch -D $k
  fi
done 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-19T20:59:25.627

```
for k in $(git branch -r | sed /\*/d); do 
  if [ -n "$(git log -1 --before='80 week ago' -s $k)" ]; then
    git push origin --delete "${k/origin\//}"
  fi
done 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-23T15:27:28.830

删除 5 个最旧的远程分支

```
git branch -r --sort=committerdate | head -n 5 | sed 's/  origin\///' | xargs git push origin --delete 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-17T12:10:28.263

git 分支 --sort=committerdate | 头-n10 | xargs git 分支 -D

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-26T01:21:28.587

我假设您只想删除 refs，而不是分支中的提交。要删除除最新分支之外的所有合并分支`__X__`：

```
git branch -d `for k in $(git branch | sed /\*/d); do
  echo "$(git log -1 --pretty=format:"%ct" $k) $k"
done | sort -r | awk 'BEGIN{ORS=" "}; {if(NR>__X__) print $2}'` 
```

删除时间戳之前的所有分支`__Y__`：

```
git branch -d `for k in $(git branch | sed /\*/d); do
  echo "$(git log -1 --pretty=format:"%ct" $k) $k"
done | sort -r | awk 'BEGIN{ORS=" "}; {if($1<__Y__) print $2}'` 
```

如果您还想删除尚未合并的分支，请将`-d`选项替换为...但要小心，因为这会导致悬空提交在某些时候被垃圾收集。`-D`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-07T18:20:15.460

基于@daniel-baulig 的回答和我提出的评论：

```
for k in $(git branch -r --format="%(refname:short)" | sed s#^origin/##); do
   if [ -z "$(git log -1 --since='4 week ago' -s $k)" ]; then
    ## Info about the branches before deleting
    git log -1 --format="%ci %ce - %H $k" -s $k;
    ## Delete from the remote
    git push origin --delete $k;
    ## Delete the local branch, regardless of whether it's been merged or not
    git branch -D $k
  fi;
done 
```

这可用于删除所有旧分支（合并或不合并）。这样做的动机是，一个月内未触及的分支不太可能腐烂并且永远无法掌握。自然，修剪旧分支的时间范围取决于主分支移动的速度。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-01T15:09:57.227

有时它需要知道一个分支是否已合并到主分支。为此，可以使用以下脚本：

```
#!/usr/bin/env bash

read -p "If you want delete branhes type 'D', otherwise press 'Enter' and branches will be printed out only: " action
[[ $action = "D" ]] && ECHO="" || ECHO="echo"

for b in $(git branch -r --merged origin/master | sed /\*/d | egrep -v "^\*|master|develop"); do
  if [ "$(git log $b --since "10 months ago" | wc -l)" -eq 0 ]; then
    $ECHO git push origin --delete "${b/origin\/}" --no-verify;
  fi
done 
```

在 Ubuntu 18.04 上测试

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-29T15:11:52.623

实际上，由于本的评论，我发现接受的答案对我来说不够可靠。我一直在寻找清理旧的发布分支，所以有可能顶部提交已经被挑选出来并且有一个旧的提交日期......这是我的看法：

```
REMOTE_NAME=origin
EXPIRY_DATE=$(date +"%Y-%m-%d" -d "-4 week")

git fetch $REMOTE_NAME --prune
git for-each-ref --format='%(committerdate:short) %(refname:lstrip=3) %(refname:short)' --sort -committerdate refs/remotes/$REMOTE_NAME | while read date branch remote_branch; do
    # protected branch
    if [[ $branch =~ ^master$|^HEAD$ ]]; then
        printf "%9s | %s | %50s | %s\n" "PROTECTED" $date $branch $remote_branch
    elif [[ "$date" < "$EXPIRY_DATE" ]]; then
        printf "%9s | %s | %50s | %s\n" "DELETE" $date $branch $remote_branch
        #git push $REMOTE_NAME --delete $branch
    fi
done 
```

您可以根据需要轻松调整删除命令。小心使用它。

输出示例： [![在此处输入图像描述](../Images/fd78431ece260486dd1df786d7e55da3.png)](https://i.stack.imgur.com/mPNLi.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-21T13:36:02.690

关于如何使用**PowerShell：**

*   **删除除 notMatch 模式之外的**所有合并分支****

 **```
git branch -r --merged | Select-String -NotMatch "(^\*|master)" | %{ $_ -replace ".*/", "" } | %{ git push origin --delete $_ } 
```

*   **列出txt文件中**所有合并的分支****

 **```
git branch -r --merged | Select-String -NotMatch "(^\*|master)" | %{ $_ -replace ".*/", "" } | Set-Content -Path .\deleted-branches.txt 
```****

# python - 在 PyWin 中运行文件时遇到问题

> ID：10325600
> 
> 赞同：0
> 
> 时间：2012-04-26T00:15:25.750
> 
> 标签：python, pywin32, robot

因此，当我尝试在 PyWin 中运行文件时，它会打开一个编辑窗口。第一次这样做，我认为这是由于文件中的一些语法错误，但在我修复它们之后，它每次都继续打开一个编辑窗口。如果有帮助的话，这个特定的文件中有很多定义的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:27:07.280

你运行的每个 Python 都会出现这个问题吗？根据您的问题描述，不确定此问题是特定于您尝试运行的脚本还是一般问题。

我要做的是首先尝试运行内置演示脚本来测试并验证您是否安装了全套库并且运行良好。一旦您验证了演示脚本确实按预期运行，那么您可以查看您的测试文件以查看问题所在。如果您无法成功运行演示脚本，那么您需要完全重新安装 PyWin 才能使其完全正常运行。

# c++ - Networking message formatting a lot of char, int, converting in C\C++

> ID：10325607
> 
> 赞同：1
> 
> 时间：2012-04-26T00:16:16.777
> 
> 标签：c++, c, bit-manipulation

I am doing networking programming in C\C++ and the assignment asks me to send a formatted message.

The format is below:

```
bits:    0.....15 16....31  
          update#  port#           
             Sever-IP 
```

As you seen first line ask me to:

1.  Convert int into 16 bits so 2 ints make up 32 bits.

2.  Convert xxx.xxx.xxx.xxx into 32 bits.

I am using [UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol), so I need get these info into a char[], and that is the hard part. In my program, I have the update# and port # as int, and server IP address as a string. How could I convert them into these bits?

Here is what I have tried:

1.  Casting them into char. But, I need get one int into two char.

2.  Convert them into a string, and then string.c_str(), but it gives me a 4 bytes pointer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:09:14.227

The easiest way to do this is to create a struct for your header like this:

```
#pragma pack(push,1)

struct header
{
    unsigned short updateNumber;
    unsigned short port;
    unsigned long ip;
};
#pragma pack(pop) 
```

And use it like this:

```
char *buffer = new char[sizeof(header)+sizeOfRemainingMessage];
header *head = (header*)buffer;
head->update = 1;
head->port = 80;
head->ip = // convert ip string to unsigned long*
send(buffer); 
```

*To convert the ip string to the unsigned long refer to [inet_addr()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738563%28v=vs.85%29.aspx "inet_addr()").

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T00:28:16.320

An int or long int in C++ is 4 bytes (32 bits), but it can depend on the implementation. Check the sizes of your types with the sizeof operator.

You can then put the update and port values in it, one after the other, with the use of the shift operators.

For the string it is basically the same thing: You have to break it into four segments, convert each of them into an integer, and shift each segment of the right amount inside a long int.

# javascript - 测试站点+实时站点的分析

> ID：10325610
> 
> 赞同：0
> 
> 时间：2012-04-26T00:16:33.513
> 
> 标签：javascript, html, google-analytics

我们正在`.war`测试和实时部署 servlet。

我不介意将条件代码包含或不包含分析，我可以在两个站点上使用相同的代码吗，分析是否只显示实时站点的统计信息？（因为那是注册域）

它会排除测试命中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:56:05.403

我建议您离开您的分析测试站点：您必须测试跟踪是否有效。

传统方法是创建一个分析[配置文件](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55486)，该配置文件仅考虑测试版本和排除此版本的其他版本。[借助 Analytics 界面中的过滤器](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55494)（基于您的主机或 IP），您可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:20:42.530

您可以使用 location.host 来确定该站点是否正在开发中。

```
if(location.host=='mysite.com') {
    _gaq.push(['_trackPageview']);
} 
```

或者也许是该代码的逆：

```
if(location.host!='localhost') {
    _gaq.push(['_trackPageview']);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:29:29.413

是的，只需比较主机名。像这样：

```
<script>if ('example.com' === window.location.hostname){
    // Google Analytics - mathiasbynens.be/notes/async-analytics-snippet - Change UA-XXXXX-X to your ID:
    var _gaq=[["_setAccount","UA-XXXXX-X"],["_trackPageview"]];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";s.parentNode.insertBefore(g,s)}(document,"script"));
}</script> 
```

如果你正在使用`www.`，那么也检查一下。

# java - 如何将 C 应用程序嵌入到 Java 小程序中

> ID：10325614
> 
> 赞同：1
> 
> 时间：2012-04-26T00:17:00.900
> 
> 标签：java, jvm, embed, win32com

我看到 vizzed.com 成功地将 zSnes 嵌入到 Web 浏览器中。我想对另一个 C 应用程序做同样的事情。有没有人知道如何做同样的事情？我想这很复杂，但我需要一两个提示。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:24:06.843

vizzed.com 不使用 zsnes。它使用基于 Java 的模拟器[VirtualNES 。](http://www.virtualnes.com/)您不能在 Java Applet 中嵌入本机代码。

调用本机代码的唯一选择是使用 JNI（Java 本机接口），但它对于 Web 来说还不够跨平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:05:00.547

使用 Java 原生接口（JNI），学习 JNI[点击这里](http://java.sun.com/docs/books/jni/)

# android - 如何使用 AutoFitTextView

> ID：10325618
> 
> 赞同：0
> 
> 时间：2012-04-26T00:17:29.530
> 
> 标签：android, resize, textview

前几天，我发现这段代码可以调整 TextView 中的文本大小。但是，我如何使用它并将其调用到我的项目中。我是新手:)

```
public class AutoFitTextView extends TextView {

public AutoFitTextView(Context context) {
    super(context);
    init();
}

public AutoFitTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

private void init() {

    maxTextSize = this.getTextSize();
    if (maxTextSize < 35) {
        maxTextSize = 30;
    }
    minTextSize = 20;
}

private void refitText(String text, int textWidth) {
   if (textWidth 0) {
       int availableWidth = textWidth - this.getPaddingLeft()
               - this.getPaddingRight();
       float trySize = maxTextSize;

       this.setTextSize(TypedValue.COMPLEX_UNIT_PX, trySize);
       while ((trySize minTextSize)
               && (this.getPaint().measureText(text) availableWidth)) {
           trySize -= 1;
           if (trySize <= minTextSize) {
               trySize = minTextSize;
               break;
           }
           this.setTextSize(TypedValue.COMPLEX_UNIT_PX, trySize);
       }
       this.setTextSize(TypedValue.COMPLEX_UNIT_PX, trySize);
   } }

@Override
protected void onTextChanged(final CharSequence text, final int start, final int before,
        final int after) {
    refitText(text.toString(), this.getWidth());
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    if (w != oldw) {
        refitText(this.getText().toString(), w);
    }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int parentWidth = MeasureSpec.getSize(widthMeasureSpec);
    refitText(this.getText().toString(), parentWidth);
}

public float getMinTextSize() {
    return minTextSize;
}

public void setMinTextSize(int minTextSize) {
    this.minTextSize = minTextSize;
}

public float getMaxTextSize() {
    return maxTextSize;
}

public void setMaxTextSize(int minTextSize) {
    this.maxTextSize = minTextSize;
}

private float minTextSize;

private float maxTextSize;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:27:55.317

在您的布局中，您可以像使用典型一样使用它，`TextView`只是您指向`AutoFitTextView`班级的位置。

```
 <com.your.package.name.AutoFitTextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content" /> 
```

在代码中：

```
AutoFitTextView foo = (AutoFitTextView) findViewById(id); 
```

您真正需要做的就是在布局中使用它。如果你不在你的布局中使用它，那么也不要在你的代码中使用它。所以，要么在你的布局和代码中使用它，要么只使用布局，要么根本不使用。

此外，在您的布局中，请确保您指向正确的位置。我不知道您的`AutoFitTextView`课程在哪个包中，所以我仅用`com.your.package.name`作示例。

就是这样，很容易做到。

# java - Hibernate - How to order result based on the property of another object

> ID：10325620
> 
> 赞同：0
> 
> 时间：2012-04-26T00:17:46.907
> 
> 标签：java, hibernate, spring-mvc

Im new to java and hibernate.

**`ExpenseType.java`**

```
public class ExpenseType extends BaseDomain {
  private int companyId;
  private String name;
  private String description;
  private Company company;

  // Getters and Setters
} 
```

**`Company.java`**

```
public class Company extends BaseDomain {
  private String name;
  private String address;
  private String contactNumber;
  private String emailAddress;

  // Getters and Setters
} 
```

I have 2 ojects ExpenseType and Company. They have a `many-to-one` relationship. The mapping is in this file `expenseType.hbm.xml`.

**`expenseType.hbm.xml`**

```
<hibernate-mapping>
   <class name="bp.ar.domain.hibernate.ExpenseType" table="EXPENSE_TYPE">   
      .
      .
      <property name="companyId">
        <column name="COMPANY_ID"/>
      </property>

      <many-to-one name="company" class="bp.ar.domain.hibernate.Company" fetch="select" insert="false" update="false" lazy="false">
        <column name="COMPANY_ID" not-null="true" />
      </many-to-one>
   </class>
</hibernate-mapping> 
```

I have COMPANY_ID foreign key in my ExpenseType table.

In my implementation in the file **`ExpenseTypeDaoImpl.java`** I do something like

```
@Override
public Collection<ExpenseType> getAll(int companyId, Collection<Company> companies,
     ExpenseTypeField orderBy) {
  DetachedCriteria dc = getDetachedCriteria();
  dc.addOrder(Order.asc("company"));
  dc.addOrder(Order.asc(orderBy.name()));
  return getAll(dc);
} 
```

What I really want to happen is that the result for ExpenseType will be ordered based on the company name. What happens with code above is that it orders the ExpenseType based on tbe COMPANY_ID. I tried to use `dc.addOrder(Order.asc("company.name"));` but I get an error.

I have this error:

`org.hibernate.QueryException: could not resolve property: company.name of: bp.ar.domain.hibernate.ExpenseType`

Please help. Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:24:31.377

You need to create an alias to the relation before you can sort on its properties. This is analogous to a SQL JOIN.

```
DetachedCriteria dc = getDetachedCriteria();
dc.createAlias("company", "company");
dc.addOrder(Order.asc("company.name"));
return getAll(dc); 
```

# iphone - 重新加载表格视图数据并取消选择单元格

> ID：10325621
> 
> 赞同：4
> 
> 时间：2012-04-26T00:18:06.660
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我有一个表格视图，我想在从详细视图返回时取消选择先前选择的单元格，或者在用户创建项目时取消选择新添加的单元格。

`reloadData`但是，由于有时会添加新项目，因此通过调用来刷新表格`viewWillAppear:`。这意味着当视图出现时没有选择任何单元格，即使我有`self.clearsSelectionOnViewWillAppear = NO`.

通过在表格视图出现*后*选择和取消选择单元格（在 中`viewDidAppear:`），取消选择动画的时间对用户来说是明显不同的（自己试试，它更慢并且感觉不光滑）。

即使在表格视图刷新后，我应该如何保留选择？（请记住，根据情况，我希望取消选择先前选择的单元格或新创建的单元格。）或者我应该以不同的方式重新加载表中的数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T00:59:13.130

您可以保存`NSIndexPath`from`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`方法，并在视图重新加载时取消选择该行。

执行此操作的另一种方法是将 the`NSIndexPath`和 current传递`UITableViewController`给`UIViewController`您正在创建的，当它`UIViewController`被弹出时，您取消选择特定的行。

创建新项目时，将一个添加到 indexPath 的行元素以取消选择右行。

您还可以仅重新加载已更改的行：

```
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                      withRowAnimation:UITableViewRowAnimationNone];

[self.tableView selectRowAtIndexPath:indexPath 
                            animated:NO
                      scrollPosition:UITableViewScrollPositionNone];

[self.tableView deselectRowAtIndexPath:indexPath animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-31T08:36:03.610

更高级的解决方案：

*   它适用于`[self.tableView reloadData]`.
*   重新加载后缺少所选行时，它不会崩溃。

示例中的部分代码`MyViewController.m`：

```
@interface MyViewController ()
{
    MyViewModel* _viewModel;
    NSString* _selectedItemUniqueId;
}

@property (nonatomic, weak) IBOutlet UITableView* tableView;

@end

@implementation MyViewController

#pragma mark - UIViewController methods

- (void)viewDidLoad
{
    [super viewDidLoad];
    _selectedItemUniqueId = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.tableView reloadData];
}

#pragma mark - UITableViewDelegate

- (void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(nonnull NSIndexPath *)indexPath
{
    // Get data for selected row.
    Item* item = _viewModel.data.sections[indexPath.section].items[indexPath.row];

    // Remember selection that we could restore it when viewWillAppear calls [self.tableView reloadData].
    _selectedItemUniqueId = item.uniqueId;

    // Go to details view.
}

- (void)tableView:(UITableView*)tableView willDisplayCell:(nonnull UITableViewCell *)cell forRowAtIndexPath:(nonnull NSIndexPath *)indexPath {

    // Get data for row.
    Item* item = _viewModel.data.sections[indexPath.section].items[indexPath.row];

    // Bring back selection which is destroyed by [self.tableView reloadData] in viewWillAppear.
    BOOL selected = _selectedItemUniqueId && [item.uniqueId isEqualToString:_selectedItemUniqueId];
    if (selected) {
        _selectedItemUniqueId = nil;
        [self.tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
        [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
    }
}

@end 
```

# java - 将“x == (x/10)*10;” 被优化掉

> ID：10325622
> 
> 赞同：4
> 
> 时间：2012-04-26T00:18:08.797
> 
> 标签：java

上下文：我们有业务要求以 3 或 4 位字符串报告值。如果字符串是 3 位数字，它的值实际上是 *10。

例如 123 代表 1230，而 4567 代表 4567。

从存储的整数转换回字符串时，上述代码被视为确定这一点的一种方法。我们的问题是优化器会为 x（整数和浮点数）删除此代码。特别关注 Java，但接下来的问题是其他语言的行为方式

另一个明显的方法是使用 Mod (x%10)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:49:10.357

> 接下来的问题是其他语言会如何表现？

在 C 中使用 gcc 在各种优化级别进行了一些快速测试，并查看了生成的代码。不，它不会被优化掉。即使编译器可以`x == (x/10)*10`在编译时进行评估（因为 *x*是一个常量），它仍然会被正确评估。

更新：如果您考虑一下，这是一个明显的结果。编译器不应该`(x/10)*10`仅`x`针对整数“优化” `x`，因为它仅适用于整数集的 1/10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T01:45:19.623

`(x/10)*10`您的问题做出了必然等于的错误假设`x`。一般来说，只要满足 Java 语言规范的要求，Java 编译器和虚拟机就可以按照他们想要的任何方式优化任何东西。

If `x`is a `float`or a `double`then`x == (x/10)*10`如果没有浮点舍入误差。但是，10 是 an`int`并且 if`x`是 an `int`or`long`然后表达式使用整数除法。Java 语言规范非常清楚[除法运算符](http://www.cs.cornell.edu/andru/javaspec/15.doc.html#5047)对整数的作用。即它向零舍入。因此，Java 编译器可能会将该表达式优化为除除后乘之外的其他内容，但无论优化器做什么，它都必须产生正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T01:31:16.903

> 上面的代码被视为确定这一点的一种方法

我不知道为什么，因为它没有。如果它还不是零，它所做的就是将最后一位数字更改为零。

不允许编译器和 JVM 对其进行优化，因为这不会给出相同的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T05:28:55.790

我不确定我是否完全理解这些要求。你当然可以做类似的事情

`String s = x < 1000 ? String.valueOf(10*x) : String.valueOf(x);`

优化器不可能删除您拥有的代码，因为整数除法不是一个身份，但它似乎是一种非常复杂的方法。

顺便说一句，如果您的值肯定会达到 9999，并且速度很重要，那么可以通过静态初始化程序或惰性创建一个包含 10,000 个字符串的静态数组。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-26T01:12:17.320

正如已经解释的那样，这无法优化，但你为什么不使用

```
(x%10 == 0) ? x/10 : x 
```

转换回来？

# javascript - 将 CSS 样式规则转换为 HTML 元素（反之亦然）

> ID：10325624
> 
> 赞同：1
> 
> 时间：2012-04-26T00:18:15.997
> 
> 标签：javascript, html, css, svg

我正在使用一个名为[FresherEditor](https://github.com/mquan/freshereditor)的实用程序，它使用 jQuery 的 ContentEditable 插件在浏览器窗口中创建一个可编辑的文档。然后，我需要获取该输出并根据通过将 HTML 管理的样式解析为 CSS 获得的规则生成 SVG 图形。

Freshereditor 将生成类似于以下内容的输出：

```
<div>
  <p>
   <i>
    <u>
     <b>
      <font face="Verdana">
       Hello, World!
      </font>
     </b>
    </u>
   </i>
  </p>
</div> 
```

当我更喜欢看起来像这样的东西时：

```
<div>
 <p style="font-weight: bold; font-style: italic; text-decoration: underline; font-family: Verdana;">
  Hello, World!
 </p>
</div> 
```

任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:56:26.903

这是一个非常有趣的问题；谢谢！以下是添加`html2style()`和`style2html()`方法的脚本。测试用例表明您可以在两者之间进行转换，而不会发生视觉变化（尽管元素嵌套的顺序在往返之后可能会有所不同）。

### 显示这些工作的测试用例

**[http://jsfiddle.net/GaPBS/](http://jsfiddle.net/GaPBS/)**

## 将嵌套的 HTML 短语元素转换为样式属性

```
(function(scope){
  var HTML2CSS = {
    strong: function(e){ this.style.fontWeight = "bold";                  },
    b:      function(e){ this.style.fontWeight = "bold";                  },
    em:     function(e){ this.style.fontStyle = "italic";                 },
    i:      function(e){ this.style.fontStyle = "italic";                 },
    font:   function(e){ this.style.fontFamily = e.getAttribute('face');  },
    u:      function(e){ this.style.textDecoration += ' underline';       },
    strike: function(e){ this.style.textDecoration += ' line-through';    }
  };
  scope.html2style = function(root){
    for (var name in HTML2CSS){
      var elements = root.querySelectorAll(name);
      var styler   = HTML2CSS[name];
      for (var i=elements.length;i--;){
        var toKill = elements[i],
            parent = toKill.parentNode;
        // Only swap out nodes that are the sole element child of the parent
        if (!toKill.nextElementSibling && !toKill.previousElementSibling){
          parent.removeChild(toKill);
          // Move contents into the parent
          for (var kids=toKill.childNodes,j=kids.length;j--;){
            parent.insertBefore(kids[j],parent.firstChild);
          }
          // Merge existing styles from this node onto the parent
          parent.style.cssText += toKill.style.cssText;  
          // Hard set the style for this node onto the parent
          styler.call(parent,toKill);
        }
      }
    }
  }
})(this); 
```

## 将样式属性转换为嵌套的 HTML 短语元素

```
(function(scope){
  var CSS2HTML = {
    "fontWeight:bold":             "b",
    "fontStyle:italic":            "i",
    "textDecoration:underline":    "u",
    "textDecoration:line-through": "strike",
    "font-family:*":                function(value){ var e=document.createElement('font'); e.setAttribute('face',value); return e; }
  };
  scope.style2html = function(root){
    var leaf = root;
    for (var style in CSS2HTML){
      var elName = CSS2HTML[style],
          parts  = style.split(':'),
          name   = parts[0],
          wild   = parts[1]=="*",
          regex  = !wild && new RegExp("(^|\\s)"+parts[1]+"(\\s|$)"),
          before = root.style[name];
      if (before && (wild || regex.test(before))){
        var el = (typeof elName==='function') ? elName(before) : document.createElement(elName);
        for (var kids=leaf.childNodes,j=kids.length;j--;){
          el.insertBefore(kids[j],el.firstChild);
        }
        leaf = leaf.appendChild(el);
        root.style[name]=wild ? "" : before.replace(regex,"");
      }
    }
    if (root.getAttribute('style')=="") root.removeAttribute('style');
  }
})(this); 
```

# python - 您如何使用 reddit api 投票功能？

> ID：10325625
> 
> 赞同：0
> 
> 时间：2012-04-26T00:18:35.683
> 
> 标签：python, api, module, target, reddit

帮助我卡住了！突然间我得知我不知道如何使用 upvote/downvote 功能时，只是使用 reddit api wrapper 编写 python。我只需要知道如何定位帖子或评论。它在 item 中指定（见下文），我认为它是在变量中声明的。

```
item.upvote() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T00:53:00.557

`item`可以是 a`submission`或 a `comment`。

您可以使用 获得个人提交[`r.get_submission`](https://github.com/mellort/reddit_api/blob/master/reddit/__init__.py#L692)，或使用类似`r.get_subreddit('python').get_top(limit=10)`. 提交的评论列表位于`submission.comments`

（未经测试）示例：

```
r = reddit.Reddit(user_agent='example')
r.login('username', 'password')
submission = r.get_submission('http://www.reddit.com/r/pics/comments/92dd8/test_post_please_ignore/')
submission.upvote()
submission.comments[0].upvote() 
```

# javascript - 以统一大小调整多个图像的大小并保持比例

> ID：10325629
> 
> 赞同：1
> 
> 时间：2012-04-26T00:18:54.087
> 
> 标签：javascript, css, image, crop

我有多个宽度不同的图像，我想调整它们的大小以适合一个盒子，我想保持比例，并希望图像看起来仍然很好。

是 400 像素 x 400 像素。我有 8 张不同尺寸的图片。我想在第一行放 4 张图像，在最后一行放另外 4 张。所以每张图片的大小是 50px x 50px 我需要这些图片的比例与原始大小相同。

[http://deadwoodfilms.com/jquery/gallery/gallery.html](http://deadwoodfilms.com/jquery/gallery/gallery.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:04:51.287

如果我理解正确，您可以简单地执行以下操作：

```
#resizable img {
    min-width: 100%;
    min-height: 100%;
} 
```

这使得所有图像都填充它们的父框，同时保持它们的纵横比。显然有些图像会被裁剪。如果这是您所追求的，则无需使用 JS 或其他任何东西。

小提琴：http: [//jsfiddle.net/5HXGf/1/](http://jsfiddle.net/5HXGf/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:54:59.577

未来将与 css3 一起出现，还有另一种使用背景图像的解决方案：

[http://jsfiddle.net/UVk4Z/3/](http://jsfiddle.net/UVk4Z/3/)

HTML：

```
<div class="first">
</div>
<div class="second">
</div> 
```

CSS：

```
div {
    width :76px;
    height:76px;
    overflow:hidden;
    margin: 2px;
    float:left;
}

    .first {
            background-image:url(http://www.kulturundkontext.de/img/medien/100BestePlakate/Loesch_Eigensinn_macht_Spass_Copyright_100_Beste_plakate_e.V.jpg);
        background-position: center;
        background-size: cover ;
    }
    .second {
            background-image:url(http://www.wetter-grafik.ch/Design/Grafik-Design/Img-Grafik-Design/LfW_Inserate-Plakate_Detail-1.jpg);
        background-position: center;
        background-size: cover ;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T00:31:05.133

如果你想保持比例，只强制图像的一个维度，宽度或高度 - 而不是两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T00:42:15.320

这看起来像是[imagemagick](http://www.imagemagick.org/script/index.php)的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T00:48:33.040

这取决于如何填充盒子。您可以通过缩小比例来裁剪图像或适合框，以便出现边框。无论如何，如果可以在服务器上渲染这些图像以满足您的需求，然后交付它们。如果不是......有趣的开始，我想只有 js 可以帮助导致一些计算是必要的：

1\. 将图像比率与框比率进行比较，这可以更高或更低，这会告诉您将哪个边缘用作变换宽度或高度的领导者。

2\. 以相同的比例计算适合的新宽高

3.将这些值作为css属性添加到您的图像中......

裁剪示例：http: [//jsfiddle.net/gn2NY/7/](http://jsfiddle.net/gn2NY/7/)

HTML：

```
<div>
  <p>
    <img src="http://www.wetter-grafik.ch/Design/Grafik-Design/Img-Grafik-Design/LfW_Inserate-Plakate_Detail-1.jpg" >
  </p>
  <p>
    <img src="http://www.kulturundkontext.de/img/medien/100BestePlakate/Loesch_Eigensinn_macht_Spass_Copyright_100_Beste_plakate_e.V.jpg" >
  </p>
  <p>
    <img src="http://www.weltform.at/wp-content/uploads/2010/10/100bp09_035_02_04.jpg" >
  </p>
  <p>
    <img src="http://upload.wikimedia.org/wikipedia/commons/6/61/Broadway-Plakate.JPG" >    
  </p>
  <p>
    <img src="http://www.wiedenmeier.ch/wordpress/wp-content/uploads/2009/10/lenin_plakate.jpg" >    
  </p>
  <p>
    <img src="http://www.wetter-grafik.ch/Design/Grafik-Design/Img-Grafik-Design/LfW_Inserate-Plakate_Detail-1.jpg" >
  </p>
  <p>
    <img src="http://www.kulturundkontext.de/img/medien/100BestePlakate/Loesch_Eigensinn_macht_Spass_Copyright_100_Beste_plakate_e.V.jpg" >
  </p>
  <p>
    <img src="http://www.weltform.at/wp-content/uploads/2010/10/100bp09_035_02_04.jpg" >
  </p>
  <p>
    <img src="http://upload.wikimedia.org/wikipedia/commons/6/61/Broadway-Plakate.JPG" >    
  </p>
  <p>
    <img src="http://www.wiedenmeier.ch/wordpress/wp-content/uploads/2009/10/lenin_plakate.jpg" >    
  </p> 
```

CSS：

```
div{
  width:320px;
} 
p{
  position relative;
  display:inline-block;
  float:left;
  overflow: hidden;
  width: 80px;
  height:80px;
}

img{
  position:relative;
} 
```

JS：

```
var targetHeight = 80;
var targetWidth = 80;
var targetRatio = targetWidth/targetHeight;

function resizeByWidth(obj){
    var oldWidth = obj.width;
    var newWidth = targetWidth;

    var oldHeight = obj.height;
    var newHeight = oldHeight/ ( oldWidth/newWidth );

    var strWidth = newWidth +'px';
    var strHeight = newHeight +'px';
    var strTop = - (newHeight - targetHeight) /2;

    $(obj).css({width: strWidth, height: strHeight, top: strTop});
}
function resizeByHeight(obj){

    var oldHeight = obj.height;
    var newHeight = targetHeight;

    var oldWidth = obj.width;
    var newWidth = (oldWidth / (oldHeight/newHeight) );

    var strWidth = newWidth +'px';
    var strHeight = newHeight +'px';
    var strLeft = - (newWidth - targetWidth) /2 ;

    $(obj).css({width: strWidth, height: strHeight, left: strLeft});
    console.log('By Width done');
}

$('img').each(
    function resize(){    
        imgRatio = this.width / this.height;
        if(imgRatio > targetRatio){
            resizeByHeight(this);            
        }
        else{
            resizeByWidth(this);                    
        }
    }
); 
```

# javascript - 从服务器端 Actionscript 或其他东西调用 PowerShell 脚本

> ID：10325632
> 
> 赞同：0
> 
> 时间：2012-04-26T00:19:06.613
> 
> 标签：javascript, actionscript, powershell, ssas

我有一个问题困扰了我好几个星期。

基本上，以一种或另一种方式，我需要调用一个运行 avconv / ffmpeg 的 powershell 脚本，从 1）服务器端动作脚本，或 2）当网页加载（例如 Javascript）时。

第一个是理想的，因为我可以监听一个事件并触发命令行来调用powershell，但我不知道这是否可能，从我的研究来看，a）你不能或b）没有很多有关 SSAS 的信息。

请记住，我所说的 SSAS 是 Fl​​ash 媒体服务器的服务器端 Actionscript (JS 1.5)

第二个似乎可以工作，但我预见到了许可问题以及其他问题 - 但如果可能的话，我很想知道。

另一个想法是NodeJS或其他东西，Python，我不知道，但我需要一种方法来在某个事件之后触发服务器端的脚本。在这种情况下，我无法真正监听 powershell 中的事件，因为我需要在将流发布到 fms 应用程序时调用它

我最后的努力是让 SSAS 在向其发布流信息时使用流信息更新 xml 树，并让 powershell 每隔一段时间读取一次，并在 xml 中填充流信息时触发。

任何帮助或指示方向将不胜感激！

谢谢你们

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:39:07.680

这听起来像是应该由服务器上的脚本语言处理的事情，例如 php、python、ruby 等。它应该是通过 javascript 和 Ajax 或通过客户端 Actionscript 的客户端，因为它听起来取决于某些活动在客户端。服务器上的大多数脚本语言都可以访问命令行，并能够执行其他程序。

例如，在 php 中，您可以调用像 do-ffmpeg.php 这样的脚本，该脚本将调用 exec() [http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)。exec 可以在您的服务器上运行任何类型的命令。所以，我会坚持你的答案#2。

# javascript - 如何显示与所选数字相对应的多个表单字段？

> ID：10325633
> 
> 赞同：0
> 
> 时间：2012-04-26T00:19:17.717
> 
> 标签：javascript, html, google-chrome, xhtml

换句话说，假设有一个表格询问您有多少兄弟，您从下拉列表中选择一个数字。在我选择一个数字后，它会显示一些与我选择的数字相对应的字段。如何使用 Javascript 执行此功能？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:23:09.043

对于下拉列表中的每个数字，创建`input`并隐藏它们，根据用户选择的数字，显示许多输入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:38:54.350

在这里，基于**@Anurag Uniyal 的**回答这样的事情应该可以工作，只需用您自己的变量替换变量：

```
var total = $select.find('option').length,
    inputs = [];

for (var i = 0; i < total; i++) {
    inputs.push('<input class="myinput" type="text"/>');
}

$(inputs.join('')).hide().appendTo($form);

$select.change(function () {
    var n = $(this).val();
    $('.myinput').hide().slice(n - 1, total).show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T00:47:02.870

```
 <!DOCTYPE html>
 <html lang="en">
 <head>
   <meta charset="utf-8">
 </head>
 <body>

   <select id="numbers" onchange="numberSelected()">
       <option value="1">1</option>
       <option value="2">2</option>
       <option value="3">3</option>
      <option value="4">4</option>
   </select>

   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
   <script>
     $(document).ready(function(){

       $('#numbers').change(function() {
           var selectedNum = $('#numbers').val();
           for(var i=0; i<selectedNum; i++) {
              $('#numbers').after('<input></input>');
           }           
       });

     });
   </script>
 </body>
 </html> 
```

# c++ - 在 Eclipse（或 Xcode）中链接 Boost 程序选项

> ID：10325635
> 
> 赞同：1
> 
> 时间：2012-04-26T00:19:37.827
> 
> 标签：c++, xcode, eclipse, boost, linker

我放弃了在 Xcode 中链接到 Boost Program Options，因为我无法让它工作。我想出了如何让标头被识别，但我对如何设置要在 Xcode 中链接的库的路径还不够熟悉。

去年我在大学里使用了 Boost 和 Eclipse，所以我想如果我只是在这个项目中使用 Eclipse，我可以更容易地解决它。我的程序看起来很像他们提供的示例（first.cpp）。如果您觉得需要查看源代码，我已将其加载到[github 上](https://github.com/paulrehkugler/FizzBuzz/tree/master/C++/class-based-solution)。

别担心，我在 /usr/local/boost 中安装了 Boost：

```
new-host-2:$ ls | grep program_options
libboost_program_options.a
libboost_program_options.dylib
new-host-2:$ pwd
/usr/local/boost_1_49_0/stage/lib 
```

我在项目 > 属性 > C/C++ 常规 > 路径和符号下通过以下方式为 Boost 配置了我的项目设置：包括：/usr/local/boost_1_49_0/ 库：boost_program_options 库路径：/usr/local/boost_1_49_0/stage/库

基于 Eclipse 控制台，您会认为它正确链接，因为我最后得到这个输出：

```
Building target: FizzBuzz
Invoking: Cross G++ Linker
g++ -L/usr/local/boost_1_49_0/stage/lib -o "FizzBuzz"  ./Fizzbuzz.o ./main.o -lboost_program_options
Finished building target: FizzBuzz

**** Build Finished **** 
```

但是，当我运行我的程序时，我得到一个对话框，上面写着：“无法启动” 选择无法启动，并且最近没有启动。

我尝试从命令行运行它，但没有运气：

```
new-host-2:$ ./FizzBuzz 
dyld: Library not loaded: libboost_program_options.dylib
  Referenced from: /Users/per001/Documents/workspace/FizzBuzz/Debug/./FizzBuzz
  Reason: image not found
Trace/BPT trap: 5 
```

如何设置它以在 Eclipse 中正确链接？或者甚至更好，Xcode？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:00:31.367

我已经设法从指定的 github 存储库链接并运行您的代码。

这是一个过程，因为我的做法有点不同。

首先，我在我的 mac boost 上重新安装了如下。

1.  我已经从[这里](http://www.macports.org/)安装了最新的 macport 。

2.  然后我安装了最新的命令行工具，因为我有 xcode 4.3 并且命令行工具不再作为默认从[这里](https://developer.apple.com/downloads/index.action#)提供。

3.  之后，我按如下方式安装了 boost：

    ```
    sudo port install boost
    ```

    在这里我遇到了一些问题，因为 Xcode 与以前的位置不同，所以我必须执行以下命令来解决这个问题：

    ```
    sudo xcode-select -switch /Applications/Xcode.app
    ```

    为了验证这是否已完成工作，我执行了以下操作：

    ```
    xcode-select -print-path
    ```

    我有预期的结果：**/Applications/Xcode.app**

    之后文件的位置如下：

    ```
    macpro:local ervinbosenbacher$ locate libboost_program_options.a
    /opt/local/lib/libboost_program_options.a

    macpro:local ervinbosenbacher$ locate program_options
    /opt/local/include/boost/program_options
    /opt/local/include/boost/program_options/cmdline.hpp
    /opt/local/include/boost/program_options/config.hpp
    /opt/local/include/boost/program_options/detail
    ... 
    ```

4.  在此之后，我启动了 XCode 并创建了一个全新的项目，并将您的代码文件包含在项目中。

5.  已修改设置如下：

    ```
    Build Settings->All->Search Paths->Always Search User Paths: Yes.

    Build Settings->All->Search Paths->Library Search Paths->Debug->Any Architecture|Any SDK:/opt/local/lib
    Build Settings->All->Search Paths->Library Search Paths->Release->Any Architecture|Any SDK:/opt/local/lib

    Build Settings->All->Search Paths->User Header Search Paths->Debug->Any Architecture|Any SDK:/opt/local/include
    Build Settings->All->Search Paths->User Header Search Paths->Release->Any Architecture|Any SDK:/opt/local/include

    Build Settings->All->Linking->Other Linking Flags->Debug->Any Architecture|Any SDK: -lboost_program_options
    Build Settings->All->Linking->Other Linking Flags->Release->Any Architecture|Any SDK: -lboost_program_options
    ```

然后我已经成功地从 Xcode 构建并运行了该应用程序：

```
Allowed options:
        --help                produce help message
        --begnum arg          set beginning number
        --endnum arg          set ending number
        --fizznum arg         set fizznum (default: 3)
        --buzznum arg         set buzznum (default: 5)
        --fizzword arg        set fizzword (default "Fizz"
        --buzzword arg        set buzzword (default "Buzz" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T00:35:50.400

以下是我如何使用 shell 中的普通 g++ 在 Linux 上链接 Boost 程序选项：

```
g++ -static main.cpp -o program \
-I/usr/local/include/boost/ \
/usr/local/lib/libboost_program_options-s.a 
```

在 cpp 源代码中，我有以下内容：

```
#include <boost/program_options.hpp> 
```

我不确定如何在 Xcode 中添加到 Eclipse 的路径，但是您可以尝试从 shell 中使用普通的 g++ 来查看它是否正确编译和链接，然后从那里开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:08:21.270

你试过了吗

```
export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:/usr/local/boost_1_49_0/stage/lib 
```

在同一终端中启动 Eclipse 之前，看看它是否修复了错误？

贝努瓦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T23:38:54.900

使用以下命令调整 dyn 库的路径`install_name_tool`：（
`$ otool -L /path/to/your/binary`将列出共享库 dep）
`$ install_name_tool -change libboost_foo.dylib /path/to/boost/stage/lib/libboost_foo.dylib /path/to/your/binary`（将更改 dyn 库的位置）
`$ otool -L /path/to/your/binary`
`$ /path/to/your/binary`

# jquery - 触发模糊后元素保持焦点

> ID：10325641
> 
> 赞同：1
> 
> 时间：2012-04-26T00:20:18.140
> 
> 标签：jquery, blur, preventdefault

我有一个跨度和一个文本输入，分别命名为“一”和“二”；一次只显示一个。当您双击“一”时，它会在显示和聚焦“二”时变为隐藏状态。当“二”模糊时，它隐藏并显示“一”。很简单，当我按下回车键时尝试模糊“两个”时，问题就显现出来了。这是我所拥有的：

```
.bind({'blur keyup': (function(e){
  if(e.type === 'keyup' && e.keyCode !== 10 && e.keyCode !== 13) return;
  $([this,$(this).prev()]).toggle(); })
 }) 
```

当按下回车键时，切换会发生，但当您单击任意位置时会再次触发。所以它似乎模糊了火，但“两个”保持了焦点。 [这是一个将两个听众分开（keyup 和 blur）的小提琴，以及一些额外的帮助突出正在发生的事情。](http://jsfiddle.net/F3R7w/)

我试过了

*   添加`e.preventDefault()`
*   添加`return false`（在模糊之前）-> 杀死函数的其余部分（如预期的那样）
*   添加`return false`（模糊后）-> 禁用回车键 (??) 或之后：
    *   keyup: `(return function(e){`--> jQuery 不喜欢这种语法
*   在不同的函数中执行 .toggle() --> 没有区别，除非：
    *   `setTimeout`（即使时间为 0）-> 问题消失了
*   使用不同的监听器（key[down/press]）--> 没有区别
*   调用单独的函数 -> 没有区别

**问题：我该如何解决这个问题？预期的行为是*按下回车键产生与 blur 相同的动作*。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:47:19.873

虽然我不知道为什么，但我被 jQuery 的 blur 方法杀死了。我能够通过分离两个处理程序并使用 JavaScript 的本机模糊方法来解决我的问题。

```
keyup: (function(e){
  if(e.keyCode===10 || e.keyCode===13){ this.blur(); }
}),
blur: (function(){
  $([this,$(this).prev()]).toggle();
}) 
```

在我或其他人能够确定为什么 jQuery 的模糊会以这种方式运行之前，我将保持打开状态。

# mysql - SQL - 根据另一列的内容查找最大值

> ID：10325642
> 
> 赞同：2
> 
> 时间：2012-04-26T00:20:19.297
> 
> 标签：mysql, sql, function, aggregate

必须有一种优雅的方式来做到这一点，但我被困住了。

我有一张包含化学数据的表格。有些值“等于”，有些“小于”报告值，这在相邻列中表示（带有“<”或“=”）。我在下面插入了一个示例。

我需要一个查询，该查询将返回与“=”相关联的每个元素的最大值（如果有），即使有与“<”相关联的更高值也是如此。或者如果最大值与'='相关联，或者如果所有值都是'<'，则只返回最大值。在下面的示例中，我需要返回铜 = 10，镍 = 10，但铅 = 9。

看起来很简单，但我就是做不出来。一如既往，非常感谢任何帮助。

```
------------------------------
-- Table structure for `chem`
------------------------------
DROP TABLE IF EXISTS `chem`;
CREATE TABLE `chem` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`Element` varchar(12) DEFAULT NULL,
`Value` tinyint(4) DEFAULT NULL,
`Qualifier` varchar(2) DEFAULT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=32 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of chem
-- ----------------------------
INSERT INTO `Chem` VALUES ('2', 'Copper', '1', '=');
INSERT INTO `Chem` VALUES ('3', 'Copper', '1', '=');
INSERT INTO `Chem` VALUES ('4', 'Copper', '3', '=');
INSERT INTO `Chem` VALUES ('5', 'Copper', '4', '=');
INSERT INTO `Chem` VALUES ('6', 'Copper', '5', '=');
INSERT INTO `Chem` VALUES ('7', 'Copper', '6', '=');
INSERT INTO `Chem` VALUES ('8', 'Copper', '7', '=');
INSERT INTO `Chem` VALUES ('9', 'Copper', '8', '=');
INSERT INTO `Chem` VALUES ('10', 'Copper', '9', '=');
INSERT INTO `Chem` VALUES ('11', 'Copper', '10', '=');
INSERT INTO `Chem` VALUES ('12', 'Nickel', '1', '<');
INSERT INTO `Chem` VALUES ('13', 'Nickel', '2', '<');
INSERT INTO `Chem` VALUES ('14', 'Nickel', '3', '=');
INSERT INTO `Chem` VALUES ('15', 'Nickel', '4', '<');
INSERT INTO `Chem` VALUES ('16', 'Nickel', '5', '=');
INSERT INTO `Chem` VALUES ('17', 'Nickel', '6', '=');
INSERT INTO `Chem` VALUES ('18', 'Nickel', '7', '=');
INSERT INTO `Chem` VALUES ('19', 'Nickel', '8', '=');
INSERT INTO `Chem` VALUES ('20', 'Nickel', '9', '=');
INSERT INTO `Chem` VALUES ('21', 'Nickel', '10', '=');
INSERT INTO `Chem` VALUES ('22', 'Lead', '1', '<');
INSERT INTO `Chem` VALUES ('23', 'Lead', '2', '<');
INSERT INTO `Chem` VALUES ('24', 'Lead', '3', '=');
INSERT INTO `Chem` VALUES ('25', 'Lead', '4', '=');
INSERT INTO `Chem` VALUES ('26', 'Lead', '5', '=');
INSERT INTO `Chem` VALUES ('27', 'Lead', '6', '<');
INSERT INTO `Chem` VALUES ('28', 'Lead', '7', '=');
INSERT INTO `Chem` VALUES ('29', 'Lead', '8', '=');
INSERT INTO `Chem` VALUES ('30', 'Lead', '9', '=');
INSERT INTO `Chem` VALUES ('31', 'Lead', '10', '<'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:34:02.117

另一种解决方案是在 MAX 语句中使用 CASE 语句。这是在 SQL 中执行 SUMIF、COUNTIF 等类型语句的常用方法。这个技巧将意志扩展到您想要过滤正在聚合的值的许多情况。

该解决方案非常有效，因为它只需要对数据集进行一次扫描，这与具有连接或联合的解决方案不同。

例如：

```
SELECT Element
       ,COALESCE(MAX(CASE WHEN Qualifier = '=' THEN Value ELSE NULL END), MAX(CASE WHEN Qualifier = '<' THEN Value ELSE NULL END))
FROM chem
GROUP BY Element 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:25:26.420

```
 SELECT Element, MAX(Value) FROM Chem WHERE Qualifier = '=' GROUP BY Element
 UNION ALL
 SELECT Element, MAX(Value) FROM Chem C1 WHERE
   NOT EXISTS (SELECT * FROM Chem WHERE Element = C1.Element AND Qualifier = '=')
   GROUP BY Element 
```

这将执行两个查询并将结果组合成一个结果集。

第一个查询查找每个具有“=”限定符的元素的最大值。第二个查询处理另一种情况，其中没有“=”限定符，并返回这组元素中每个元素的最大值。

# jsp - 在jsp代码中调用javaScript函数，还是在jsp代码中关闭窗口？

> ID：10325647
> 
> 赞同：0
> 
> 时间：2012-04-26T00:21:22.893
> 
> 标签：jsp

这是我尝试的代码

```
 <%
 ....jsp code
call javascript function close()?????
 %>

 <script type="text/javascript">
 function close()
{
 window.close();  
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:31:38.157

可能有更好的方法来做到这一点...但是如果您使用 scriptlet 输出一个元素，然后查看该元素是否存在...

```
<% out.println( "<div id='close'>Can you see this</div>" ); %>

<script type="text/javascript">

     alert( document.getElementById("close").innerHTML );

     if ( document.getElementById("close") )
     {
         window.close();
     }
</script> 
```

# javascript - 你如何在for循环中创建变量？

> ID：10325651
> 
> 赞同：2
> 
> 时间：2012-04-26T00:22:09.870
> 
> 标签：javascript, variables, for-loop

我正在尝试在 for 循环中动态创建变量。错误。我要做的是：获取 32 个文本字段的值并尝试将这些值存储到变量中。

```
for (i = 1; i<=32;i++){
   q[i] = document.getElementById('qty[i]').value;
} 
```

但这会产生：

> 错误：“q”未定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T00:23:24.530

```
var q = [];

for (var i = 0; i < 32; i++){
    q[i] = document.getElementById('qty[i]').value;
} 
```

`q`将包含您的所有值。您应该在 for 循环之外声明数组`q`，因为这是公认的最佳实践。如果您根本不声明`q`，它将成为一个隐含的全局变量，您可能希望避免这种情况。如果您`q`在循环内声明，它将在每次迭代时被覆盖，因此您需要确保在外部声明它。

另外，你会注意到我改变了你的`for`循环：

```
for(i = 1; i <= 32; i++) { 
```

对此：

```
for (var i = 0; i < 32; i++){ 
```

你从 1 循环到 32；这是不正确的，因为 Javascript 中的数组是 0 索引的；换句话说，它们从零开始计数。既然是这种情况，您的`for`循环也需要从零开始计数，并在 31 结束。此外，您需要`i`在 for 循环中声明 var；否则，它将成为一个全局变量。

* * *

现在，如果你真的不想`q`在你的 for 循环之外声明，你可以做 Kirian 演示的事情；也就是用一个`if`语句判断是否`q`已经声明过，如果没有声明过。看起来像这样：

```
for (var i = 0; i < 32; i++){
    if(!q) q = [];
    q[i] = document.getElementById('qty[i]').value;
} 
```

* * *

另一个注意事项，如果`qty`你的代码中有一个数组，那么你可能想要这个：

```
var q = [];

for (var i = 0; i < 32; i++){
    q[i] = document.getElementById(qty[i]).value;
} 
```

如果相反`qty`是一组看起来像的 ID 的一部分`qty[1], qty[2], qty[3]...`，那么你想要*这个*：

```
var q = [];

for (var i = 0; i < 32; i++){
    q[i] = document.getElementById('qty[' + i + ']').value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:23:32.250

你有没有尝试过：

```
var q = [];
for (var i = 0; i < 32; i++){
  q.push(document.getElementById('qty[i]').value);
} 
```

该语法`q.push(x)`将 x 附加到数组的末尾。

# xml - PowerShell 从 XML 属性编辑 #text

> ID：10325652
> 
> 赞同：0
> 
> 时间：2012-04-26T00:22:23.813
> 
> 标签：xml, powershell

问题如下：

```
$xml = [xml](Get-Content $USSExternalContentTypeFile)   
$xml.Model.Properties.Property. ....
$xml.Save($USSExternalContentTypeFile) 
```

名称 类型 #text
---- ---- -----
连接集成安全系统。字符串 textxtxtxtxtxtxt

```
<Property Name="Connect Integrated Security" Type="System.String">SSPI</Property> 
```

帮助多个xml属性替换#text？

完成：Property[2].'#text' = 'foo'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T00:28:53.977

尝试以这种方式访问​​ #text 属性：

```
PS> $xml = [xml]'<Property Name="Connect Integrated Security" Type="System.String">SSPI</Property> '
PS> $xml.Property

Name                                    Type                                    #text
----                                    ----                                    -----
Connect Integrated Security             System.String                           SSPI

PS> $xml.Property.'#text' = 'foo'

PS> $xml.Property

Name                                    Type                                    #text
----                                    ----                                    -----
Connect Integrated Security             System.String                           foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:58:55.713

作为 PowerShell 的 XML 节点自动 NoteProperties 的替代方法，您还可以使用 XPath 来获取所需的节点。假设您希望所有属性节点的名称属性为“Connect Integrated Security”，您可以使用：

```
$nodes = $xml.SelectNodes("//Property[@Name='Connect Integrated Security']")
$nodes | % {
    $_."#text" = "SomeNewValue" # Changes SSPI to this.
} 
```

如果您想坚持使用 NoteProperties，这可能会起作用：

```
$xml.Model.Properties.Property | % {
    $_."#text" = "SomeNewValue" # Changes SSPI to this.
} 
```

# asp.net - 从 powerpoint 超链接打开 asp.net 站点时总是要求提供表单凭据

> ID：10325653
> 
> 赞同：0
> 
> 时间：2012-04-26T00:22:29.017
> 
> 标签：asp.net, forms-authentication, powerpoint

相当简单的问题-我将带有表单身份验证的asp.net网站的超链接放入PowerPoint中。单击链接，它会询问我的 uname/pwd。我把它放进去，说'下次记住我'，关闭浏览器，再次点击PowerPoint中的链接，登录页面再次出现。

如果我只是打开浏览器并访问该站点，它不会要求我提供我的凭据。它知道我已经要求它记住它们。就像 powerpoint click 在第一次访问时以某种方式禁用 cookie 一样？

有任何想法吗？

**编辑**：我也可以确认此操作发生在 word 中，但不在 Outlook 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:35:34.480

这是因为 powerpoint 首先尝试打开文件，没有网络浏览器的 cookie，获取密码/登录页面，**然后**将其重定向到网络浏览器。

有一个注册表修复。见下文：

[http://support.microsoft.com/kb/899927](http://support.microsoft.com/kb/899927)

[http://support.microsoft.com/kb/218153](http://support.microsoft.com/kb/218153)

# java - Android 上的 HtmlUnit：依赖项

> ID：10325654
> 
> 赞同：4
> 
> 时间：2012-04-26T00:22:37.140
> 
> 标签：java, android, htmlunit, noclassdeffounderror

该代码在一个普通的 Java 项目中工作，但如果我在 Android 上尝试它，复制库（.jar）依赖项，它将无法构建：

> 警告：忽略不带有关联 EnclosureMethod 属性的匿名内部类 (org.apache.commons.collections.BeanMap$1) 的 InnerClasses 属性。此类可能是由不针对现代 .class 文件格式的编译器生成的。推荐的解决方案是从源代码重新编译类，使用最新的编译器并且不指定任何“-target”类型选项。忽略此警告的后果是此类上的反射操作将错误地指示它*不是*内部类。

它最后说：

> 6 个警告 1 个错误；aborting /home/kp/android-sdk-linux/tools/ant/build.xml:818：执行此行时出现以下错误：/home/kp/android-sdk-linux/tools/ant/build.xml： 820：执行此行时出现以下错误：/home/kp/android-sdk-linux/tools/ant/build.xml:832：执行此行时出现以下错误：/home/kp/android-sdk- linux/tools/ant/build.xml:278: null 返回: 1

我添加了所有库：

*   commons-codec-1.4.jar
*   commons-collections-3.2.1.jar
*   commons-io-2.0.1.jar
*   commons-lang-2.6.jar
*   commons-logging-1.1.1.jar
*   cssparser-0.9.5.jar
*   htmlunit-2.9.jar
*   htmlunit-core-js-2.9.jar
*   httpclient-4.1.2.jar
*   httpcore-4.1.2.jar
*   httpmime-4.1.2.jar
*   nekohtml-1.9.15.jar
*   sac-1.3.jar
*   序列化程序-2.7.1.jar
*   xalan-2.7.1.jar
*   xercesImpl-2.9.1.jar
*   xml-apis-1.3.04.jar

如果我删除一些依赖项，它会构建，但是当它尝试执行我的代码时，`_client = new WebClient();`我会收到 noClassDefFoundError 错误。

我还没有找到解决方案，所以如果你有解决方案，请分享！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:00:55.653

我通过选中我在 Eclipse 构建路径对话框的“Order and Export”选项卡中添加的所有库旁边的框解决了 noClassDefFoundError 错误。我认为这包括 .apk 中的 .jar，以便您可以在设备上使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:05:16.710

我的猜测是您的 HTMLunit jar 没有放在 Android 项目的 libs 文件夹中。

您应该在项目的根目录下创建一个 libs 文件夹（使用准确的拼写），并将所有 HTMLUnit jar 放在该文件夹下。

IE

项目/库/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-02T23:27:54.820

对我有用的是删除以下内容：xalan-2.7.1.jar xercesImpl-2.9.1.jar xml-apis-1.3.04.jar

# stored-procedures - 存储过程未在 Crystal 报表中显示字段

> ID：10325657
> 
> 赞同：2
> 
> 时间：2012-04-26T00:23:21.600
> 
> 标签：stored-procedures, crystal-reports, sql-server-2008-r2

使用：VS2010中的CR，SQL Server 2008R2

我有一个在 SQL Server 中运行时返回结果的 SP，但是当我将它添加到 CR 时，它不会在字段资源管理器中显示任何字段。但如果我尝试任何其他 SP，它工作正常，我可以看到它的字段。我正在执行的步骤：

1.  打开现有的 CR
2.  右键单击数据库字段 --> 数据库专家 --> 删除旧 SP --> 添加新 SP
3.  弹出一个带有 Enter Values 的窗口，我将所有设置为 NULL 并单击 OOK
4.  新 SP 显示在右侧的数据库专家中
5.  我可以在字段资源管理器的数据库字段部分中看到新的 SP。
6.  但是它旁边没有加号+符号。这意味着它不显示其字段。

事实上，新 SP 和旧 SP 都具有相同数量的字段。只是一些sql改变了。

对这个很生气..请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-24T11:53:50.267

如何在更改数据库中的存储过程后更新 Crystal Report 中的存储过程。

当您将参数添加到数据库中的存储过程时，也可以使用此过程。

1.  确保您的 SP 不是通过您的 SP 中的另一个 SP 返回数据集。

    前任。这不起作用：@sql = 'select * from sometable' exec(@sql)

    如果是这种情况，请在您的 SP 末尾临时添加一条 select 语句

    @sql = '从 table1 中选择 column1，column2' exec(@sql)

    从 table1 中选择 column1、column2

2.  在 Crystal Report 的字段资源管理器中，右键单击您的 SP 并设置数据源位置。填写与数据库的连接详细信息。

    *   从新的数据库连接中选择现有的 SP 和 SP，然后单击更新按钮。
3.  在 CR 菜单中，Database->Verify Database

4.  验证数据库后，从 Step1 中删除临时 select 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:49:49.543

我通过不接受左侧子报告链接中的默认选择水晶得到它。我不得不将其更改为我自己的并且不使用默认值。

那行得通。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-14T05:29:02.043

我有同样的问题，几乎花了1天时间寻找水晶报告的不同方面，然后我发现

1.  存储过程中存在问题，我更正了字段编辑器仍然不可见。
2.  然后我发现 Crystall 报告安装的版本已损坏，因此再次重新安装它并且它工作。

# ruby-on-rails - 学习postgresql：下载它，设置它，尝试在rails中连接它但失败-用户名，密码

> ID：10325661
> 
> 赞同：0
> 
> 时间：2012-04-26T00:23:40.250
> 
> 标签：ruby-on-rails, postgresql

我尝试将 rails 与 postgresql 一起使用，并通过下载和 gems 正确设置了所有内容。

我使用以下命令使用 postgresql 生成了一个新的 rails 项目：

```
rails new demo_app -d postgresql
rake db:create all 
```

这是我的 databse.yml 文件内容：

```
development:
adapter: postgresql
encoding: unicode
database: demo_app_development
pool: 5
username: 
password: guess_password 
```

这不起作用：出现以下错误

```
AM @~/Documents/RailsWS/demo_app >rake db:create:all
FATAL:  password authentication failed for user "AM" 
```

所以问题是用户名和密码组合。但是，我不记得我在下载和设置 postegresql 时输入了什么。无论如何我可以重置用户名和密码并从头开始使用新的用户名和密码吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:48:52.963

我在 Rails 中设置 postgres 时遇到了问题，这个[railscast](http://railscasts.com/episodes/342-migrating-to-postgresql?autoplay=true)帮助了我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:11:47.250

安装后可以在终端运行以下命令：

```
createuser -P 
```

（-P是添加密码）

它会询问您的姓名、密码、他们是否是超级用户、是否可以创建新角色以及是否可以创建新数据库。对于 Rails，您可能不需要任何这些权限。

然后创建数据库以使用您创建的以下角色运行：

```
createdb -O ROLE_NAME_FROM_PREVIOUS_STEP NEW_DATABASE_NAME 
```

和中提琴，你应该很高兴。

# java - 仅在必要时显示滚动条

> ID：10325670
> 
> 赞同：2
> 
> 时间：2012-04-26T00:24:19.313
> 
> 标签：java, swing, scroll

我想做类似以下的事情：

```
 public class MyCustomDialog extends JDialog 
    {

       public MyCustomDialog()
       {
          if (getClientVertScreenSize() < 800)
          {
            // Set the vertical size as 600, and give them a scroll pane to navigate to the bottom of the gui.
          }
          else
          {
             setSize(600, 800); // No need to add a scroll pane.
          }
       }

    } 
```

问题是我不知道如何检查客户端的屏幕大小，所以我不知道如何编写我的构造函数所依赖的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T00:27:21.240

请参阅 Toolkit.getDefaultToolkit().getScreenSize()

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T00:42:25.097

您可以做的只是将您的组件放入 a`JScrollPane`并将[水平](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setHorizontalScrollBarPolicy%28int%29)和[垂直](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setVerticalScrollBarPolicy%28int%29)滚动条策略设置为`[VERTICAL|HORIZONTAL]_SCROLLBAR_AS_NEEDED`. 这样，滚动条只会在`JScrollPane`的大小小于组件的首选大小时出现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T03:15:36.773

该类`java.awt.Toolkit`有一个名为 的实例方法`getScreenSize()`，它返回一个类型为 的对象`java.awt.Dimension`。A`Dimension`是一个不可变对象（不能更改），具有两个公共的 final 字段：`width`和`height`. 您可以获得一个实例`java.awt.Toolkit`并执行您的

您应该使用以下代码：

```
import java.awt.Dimension;
import java.awt.Toolkit;

public class MyCustomDialog extends javax.swing.JDialog {
    public MyCustomDialog() {

        super(); // Invoke any JDialog initialization code.

        Toolkit t = Toolkit.getDefaultToolkit();
        if (t.getScreenSize().height < 600) {
            setSize(getWidth(), 600);
            // Add your scrollpane, etc.
        } else {
            setSize(600, 800); // No need to add a scroll pane.
        }
    }
} 
```

# google-maps-api-3 - 间歇性地图 API 错误

> ID：10325673
> 
> 赞同：2
> 
> 时间：2012-04-26T00:24:54.933
> 
> 标签：google-maps-api-3

我们已经在我们的网站上使用 Google Maps API v3 几个月了，一切正常。然后，突然之间，今天我们开始看到间歇性错误说：

“Google 已禁用此应用程序的 Maps API。提供的密钥不是有效的 Google API 密钥，或者未授权此站点上的 Google Maps Javascript API v3。”

我回去检查了 API 控制台，一切看起来都很好，以及我们第一次设置它时我是如何离开它的。鉴于间歇性，我怀疑谷歌服务器存在一些暂时性问题。

有没有人见过这种行为，或者碰巧知道是什么原因造成的？

# css - 取消选中 Extjs4 Grid 中的检查列

> ID：10325677
> 
> 赞同：1
> 
> 时间：2012-04-26T00:25:11.337
> 
> 标签：css, grid, extjs4

功能是有一个弹出窗口，其中包含选定的基本网格行：基本网格包含检查列，如下所示：

```
{
        xtype: 'checkcolumn',
        text: 'Select',
        dataIndex: 'active',
        itemId: 'checkcolumnId',
        width: 55
     } 
```

选中或取消选中复选框时调用的控制器：

```
'#checkcolumnId' : {
        checkchange : function(column, recordIndex, checked) {
          if(checked){
            var rec = statusStore.getAt(recordIndex);
            reassignStore.add(rec);
          }else if(statusStore.getAt(recordIndex)!=null){
            var indexNumber = reassignStore.findExact('taskId', statusStore.getAt(recordIndex).data.taskId, 0);
            reassignStore.removeAt(indexNumber);
          }
          return false;
        }
     } 
```

reassign store 是弹出式存储，它显示基本网格的选定（检查）记录。

当我检查基本网格中一行的复选框时，我可以看到该记录显示在重新分配网格中，但问题是当我再次单击复选框（基本网格的检查列）时，它不会显示未选中状态，尽管它执行取消选中操作，即它进入上述 checkchange 方法的错误条件。

此功能可在 ext-4.0.7-gpl/examples/grid/row-editing.html 使用 chrome 调试器我发现当我尝试取消选中基本网格中的行时，它不会调用 CheckColumn.js 的渲染器方法，即负责更改检查列的css。

CheckColumn.js

```
renderer : function(value){
        var cssPrefix = Ext.baseCSSPrefix, cls = [cssPrefix + 'grid-checkheader'];
        if (value) {
            cls.push(cssPrefix + 'grid-checkheader-checked');
        }
        return '<div class="' + cls.join(' ') + '">&#160;</div>';
    } 
```

如果我评论 reassignStore.add(rec); 或 reassignStore.removeAt(indexNumber); 我能够正确取消选中的 checkChange 方法行（即应用了 css，因此我可以直观地看到未选中的框）

这是一个错误吗？为什么我取消选中时没有看到 css 应用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:44:28.387

包含复选框的此列的数据类型是什么？如果它不是布尔值，则可能存在这样的问题。因为在***CheckColumn.js***中，有这样的语句：

```
checked = !record.get(dataIndex); 
```

因此，如果`record.get(dataIndex) == false`, checked 应该为真，但例如 , `record.get(dataIndex) == "false"`checked 仍然是假的。在这种情况下，渲染器永远不会被调用。

# css - CSS3 标签标签朝右并使用位置或 :after

> ID：10325678
> 
> 赞同：2
> 
> 时间：2012-04-26T00:25:15.477
> 
> 标签：css, shapes, css-shapes

我正在尝试在 CSS 中构造这个形状：

![在此处输入图像描述](../Images/a2382b0c7335811b9eacd016ed838d40.png)

但我不知道如何将三角形（考虑到标签的“主体”有一个矩形，尖端有一个三角形）朝向右侧。因为我正在处理位置，当标签都可以有不同的大小时，我怎么能告诉三角形出现在矩形之后？我就是搞不定。

您可以检查小提琴： http: [//jsfiddle.net/ExZFe/](http://jsfiddle.net/ExZFe/)，其标签与我正在制作的标签相似。这个例子只使用了位置，所以给三角形一个固定的位置是没有用的。由于同样的原因，我尝试了 :after 但也被卡住了。我错过了什么？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T00:55:52.087

`right`只需使用属性（从矩形的右侧开始）而不是`left`（从矩形的*左侧*开始，在这里没用，因为你不知道标签的宽度）来定位三角形： [http:// jsfiddle.net/Gv3rf/](http://jsfiddle.net/Gv3rf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T00:40:34.530

只需在 .tag 中添加一个 line-height

```
.tag {
line-height: 10px;
/* the rest of your styles here */
} 
```

[http://jsfiddle.net/ExZFe/3/](http://jsfiddle.net/ExZFe/3/)

# jquery - jQuery location.reload() 未在我的 ASP.NET MVC Web 应用程序中执行

> ID：10325679
> 
> 赞同：0
> 
> 时间：2012-04-26T00:25:16.167
> 
> 标签：jquery, asp.net-mvc-3, reload

我在 ASP.NET MVC 应用程序中定义了以下 JavaScript：

```
function reloadpage() {
    $(document).ready(function () {
        setInterval("location.reload(true)", 60000);
    });
} 
```

我在我的视图中调用上面的 JavaScript：

```
<script src="@Url.Content("~/Scripts/reloadpage.js")" type="text/javascript"></script> 
```

但是，网页不会在 1 分钟后重新加载。我可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:39:48.140

如果文件 reloadpage.js 中的函数 'reloadpage' 没有在任何地方调用，那么加载将不起作用。

在文件中尝试以下代码：

```
$(document).ready(function () {
    setInterval("location.reload(true)", 60000);
}); 
```

或者

```
function reloadpage(min) { 
   setInterval("location.reload(true)", min*1000);
}

$(document).ready(function () {
    reloadpage(60);
}); 
```

# android - Android选择layout-large？

> ID：10325682
> 
> 赞同：1
> 
> 时间：2012-04-26T00:25:27.087
> 
> 标签：android, layout, grid

我正在构建一个 Android 应用程序，对于大屏幕，我想用图像填充 6x6 网格；在较小的屏幕上，我想填充一个 4x4 网格。我的问题是，在代码中，我需要知道屏幕布局是大还是大 - 以适当地填充网格。

那么，我如何判断 Android 是否选择了 layout-large 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:43:25.543

好吧，您可能会考虑进行设置，以便无论大小如何，您的网格都会填满，但简短的回答：

```
 getResources().getConfiguration().isLayoutSizeAtLeast(Configuration.SCREENLAYOUT_SIZE_LARGE); 
```

请注意，上述 API 调用适用于 Honeycomb 或更新版本。如果您的目标比这更早，则必须使用：

```
getResources().getConfiguration().screenLayout == Configuration.SCREENLAYOUT_LARGE; 
```

有关更多信息，请参阅[文档`Configuration`](http://developer.android.com/reference/android/content/res/Configuration.html)。

# sqlite - 我可以从多个连接同时读取和写入 SQLite 数据库吗？

> ID：10325683
> 
> 赞同：107
> 
> 时间：2012-04-26T00:25:39.503
> 
> 标签：sqlite

我有一个由两个进程使用的 SQLite 数据库。我想知道，对于最新版本的 SQLite，当一个进程（连接）启动一个事务以写入数据库时​​，另一个进程能否同时从数据库中读取？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-04-30T17:21:53.357

我从各种来源收集信息，主要来自 sqlite.org，并将它们放在一起：

首先，默认情况下，多个进程可以同时打开同一个SQLite数据库，可以并行满足多个读访问。

在写入的情况下，对数据库的一次写入会在短时间内锁定数据库，没有任何东西，甚至读取，都可以访问数据库文件。

从版本 3.7.0 开始，可以使用新的[“预写日志记录”(WAL)](https://www.sqlite.org/wal.html)选项，其中可以同时进行读取和写入。

默认情况下，WAL 未启用。要打开 WAL，请参阅 SQLite 文档。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-04-28T20:39:41.850

SQLite3 明确允许[多个连接](http://sqlite.org/faq.html#q5)：

> (5) 多个应用程序或同一应用程序的多个实例可以同时访问一个数据库文件吗？
> 
> 多个进程可以同时打开同一个数据库。多个进程可以同时执行 SELECT。但是，任何时候只有一个进程可以对数据库进行更改。

对于共享连接，使用[SQLite3 共享缓存](http://www.sqlite.org/sharedcache.html)：

> 从 3.3.0 版本开始，SQLite 包含一个特殊的“共享缓存”模式（**默认禁用**）
> 
> 在 3.5.0 版本中，修改了共享缓存模式，以便可以在整个进程中共享相同的缓存，而不仅仅是在单个线程中。
> 
> 5.0 启用共享缓存模式
> 
> 共享缓存模式是在每个进程的基础上启用的。使用 C 接口，可以使用以下 API 来全局启用或禁用共享缓存模式：
> 
> int sqlite3_enable_shared_cache(int);
> 
> 每次调用 sqlite3_enable_shared_cache() 都会影响使用 sqlite3_open()、sqlite3_open16() 或 sqlite3_open_v2() 创建的后续数据库连接。已经存在的数据库连接不受影响。对 sqlite3_enable_shared_cache() 的每次调用都会覆盖同一进程中的所有先前调用。

# orchardcms - 角色和权限问题

> ID：10325690
> 
> 赞同：1
> 
> 时间：2012-04-26T00:26:40.703
> 
> 标签：orchardcms

我正在使用果园 1.3。我创建了一个名为“产品”的内容类型和另一个名为“公司”的内容类型。现在，我想允许一些用户登录仪表板并创建新公司和产品，并仅编辑他们创建的公司和产品。

所以，我创建了一个角色，只授予“编辑公司”和“编辑产品”的权限。（例如：） ![在此处输入图像描述](../Images/3228d330f0fe2033e1d21a3d9095d571.png) 还授予“访问管理面板”权限。我创建了一个用户并将新创建的角色分配给他。

但是当我以该用户身份登录时，我可以看到完整的导航。导航不应该仅限于用户有权访问的内容项吗？此外，该用户不仅可以访问创建新的“产品”和“公司”，还可以访问我未授予任何权限的其他内容类型。

请建议我如何将此角色的访问权限限制为仅两种内容类型？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:24:10.237

请在 CodePlex 上提交错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T23:48:52.793

您应该升级到 1.4。这个问题已被解决。

# java - 如何通过 ThreadId 检测线程的结束？

> ID：10325691
> 
> 赞同：3
> 
> 时间：2012-04-26T00:26:54.120
> 
> 标签：java, servlets

在这里谈论 Java Servlet... 我正在创建自己的“每个请求上下文”，并且希望将“每个请求上下文”对象与 Thread.currentThread().getId() 值联系起来。

我计划在用户调用基于 Per Request 的函数并自动从该 threadId 的哈希表中获取 Context 对象时检查当前 threadid，而不是到处传递这个 context 对象。

我会使用这样的代码..

```
public void doPost(HttpServletRequest request, HttpServletResponse response) 
throws ServletException, IOException
{
    MyFramework.EnterContext();
    try {
        // do stuff here that leads to other classes on the same thread
        // Access current context via static MyFramework.getCurrentContext()
    }
    finally { MyFramework.ExitContext(); }
} 
```

但是，我想自动保护我的应用程序免受任何不调用 ExitContext() 的潜在用户的影响。~~在 C# 中有一个用于 onexit 的线程对象上的事件处理程序...~~（认为我错了）有没有办法在线程退出时检测或轮询？我目前只存储threadId（长）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:42:13.517

[ThreadLocal](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html)似乎非常适合您的使用。ThreadLocal 对象可以提供一种方法来存储每个线程的变量。此类的内部工作原理与您所描述的非常相似，它使用映射来提供线程局部变量。

这样的事情应该可以解决问题：

```
private static final ThreadLocal<UserContext> userContext = new ThreadLocal<UserContext>();

public void doPost(HttpServletRequest request, HttpServletResponse response) 
              throws ServletException, IOException {
    MyFramework.EnterContext();
    try {
       UserContext context = userContext.get();
       //if you used the set method in this thread earlier
       //a thread local context would be returned using get
    }
    finally { MyFramework.ExitContext(); }
} 
```

至于您的其他问题，您可以使用观察者模式并在线程完成其任务时通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:49:46.930

不幸的是，Java 中没有为线程内置这样的特性。此外，线程 id 只保证在任何时候都是唯一的，但最终可以在线程死亡时重用（来自文档）。但是，您使用的 servlet 框架可能正在实现此类功能（只是推测）。

我建议您实现一个 servlet 过滤器，并告诉您的用户将其包含在他们的`web.xml`. 有了这个，您可以确保客户端代码始终正确地包装在您的线程上下文中。

# c - MinGW 64位安装问题

> ID：10325696
> 
> 赞同：4
> 
> 时间：2012-04-26T00:27:29.800
> 
> 标签：c, installation, mingw, windows-7-x64

您好，我正在尝试安装 MinGW 的 64 位编译器，以便我可以在 c 64 位中编程，但我不确定如何完成此操作。我已经下载了 64 位 zip 文件并将其解压缩到我想要的文件夹中，但不知道如何让编译器工作。我的命令行似乎仍然可以识别我正在使用的 64 位程序。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T04:36:26.990

分步说明：

[1) 从mingw-builds](http://code.google.com/p/mingw-builds/)下载并解压 mingw 包：

*   [适用于 32 位主机操作系统的 GCC 4.7 - i686 和 x86-64 目标](http://code.google.com/p/mingw-builds/downloads/detail?name=i686-mingw32-gcc-4.7.0-release-c,c%2b%2b,fortran-sjlj.zip&can=2&q=)
*   [适用于 64 位主机操作系统的 GCC 4.7 - i686 和 x86-64 目标](http://code.google.com/p/mingw-builds/downloads/detail?name=x86_64-mingw32-gcc-4.7.0-release-c,c%2b%2b,fortran-sjlj.zip&can=2&q=)

（实际上第一个应该在两个主机平台上都可以正常工作）

2) 假设目标目录是 c:\mingw

将下面的代码复制到 test.cpp

```
#include <cstdio>
int main() {
    printf("sizeof(void*)=%d bytes\n", sizeof(void*));
    return 0;
} 
```

3）编译32位目标：

```
c:\mingw\bin\i686-w64-mingw32-c++.exe -m32 -o test.exe test.cpp
OR
c:\mingw\bin\x86_64-w64-mingw32-c++.exe -m32 -o test.exe test.cpp 
```

4）编译64位目标：

```
c:\mingw\bin\i686-w64-mingw32-c++.exe -m64 -o test.exe test.cpp
OR
c:\mingw\bin\x86_64-w64-mingw32-c++.exe -m64 -o test.exe test.cpp 
```

# html - 为什么我不应该在代码/HTML 文档中使用奇怪的字符？

> ID：10325708
> 
> 赞同：4
> 
> 时间：2012-04-26T00:29:00.647
> 
> 标签：html, unicode, ascii

我想知道在我的代码中使用奇怪的字符是否是个坏主意。我最近尝试使用它们创建小点来指示您正在使用哪张幻灯片并轻松更改幻灯片：

![在此处输入图像描述](../Images/ab9b830a5ff83106f5d2ae61a8676cec.png)

这些类型的字符有很多，在许多情况下，它们似乎可以用来代替图标/图像，它们具有样式和可缩放性，并且屏幕阅读器能够理解它们。

但是，我没有看到任何人这样做，而且我觉得这是一个坏主意，我无法确定为什么。我想这似乎太容易了。有人可以告诉我为什么这样可以或不可以吗？以下是我正在谈论的角色的更多示例：

↖ ↗ ↙ ↘ ㊣ ◎ ○ ● ⊕ ⊙ ○ △ ▲ ☆ ★ ◇ ◆■ □ ▽ ▼ § ￥ 〒 ￠ ￡ ※ ♀ ♂ &⁂ ℡ ↂ░ ▣ ▤ ▥ ▦ ▧ ✐✌✍✡✓✀✌✍✡ ♡ ☜ ☞ ☎ ☏ ⊙ ◎ ☺ ☻ ► ◄ ▧ ▨ ♨ ◐ ◑ ↔ ↕ ♥ ♡ ▪ ▫ ☼ ♦ ▀ ▄ █ ▌ ▐ ░ ▒ ▬ ♦ ◊

PS：我也欢迎有关这些字符的一般信息，它们的名称和内容（ASCII，Unicode）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:09:47.847

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:33:51.957

我以前见过这样做（星星），我认为这是一个很棒的主意！使用充满图标的字体（带有@font-face）也变得非常流行，例如：http: [//fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)

我看不出使用像“font awesome”这样的字体有任何缺点（只有你提到的优点，比如可伸缩性和使用 CSS 改变颜色的能力）。也许使用您提到的特殊字符有一个缺点，但我不知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T00:38:07.950

使用这些字符的问题在于，并非所有字符都适用于所有用户使用的所有字体，这意味着您的应用程序可能看起来很奇怪，或者在最坏的情况下无法使用。也就是说，假设某些常见字体（Apple/Microsoft 的 Arial、Bitstream Vera）中可用的字符变得越来越普遍。您甚至不能假设您可以下载字体，因为某些用户可能会使用 Instapaper 或 Read It Later 等服务捕获内容以供离线阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T00:39:24.683

有很多问题：

可移植性：在代码中使用 7 位 ASCII 字符以外的任何字符都会降低您的代码的可移植性，因为接收者可能使用了错误的编码。您可以做很多事情来缓解这种情况（例如，使用 UTF16 或至少使用 UTF-8 编码的文件）。大多数语言允许您使用某种形式的转义符号（例如，C# 中的“\u1234”）在字符中指定字符串，这样可以避免该问题，但会失去一些优势。

字体依赖性：依赖于字体中可用特殊字符的用户界面元素可能更难国际化，因为这些字形可能不在您希望/需要用于特定受众的字体中。

没有颜色，艺术选择有限：虽然字体字形对程序员来说似乎很有用，但对于 UI 设计师来说，它们可能看起来很糟糕。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T06:20:40.317

The question is very broad; it could be split to literally thousands of questions of the type “why shouldn’t I use character ... in HTML documents?” This seems to be what the question is about—not really about code. And it’s about characters, seen as “weird” or “uncommon” or “special” from some perspective, not about character encodings. (None of the characters mentioned are encoded in ASCII. Some are encoded in ISO-8895-1\. All are encoded in Unicode.)

The characters *are* used in HTML documents. There is no general reason against not using them, but loads of specific reasons why some specific characters might not be the best approach in a specific situation.

For example, the “little dots” you mention in your example (probably not dots at all but circles or bullets), when used as control elements as you describe, would mean poor usability and poor accessibility. Making them significantly larger would improve the situation, but this more or less proves that such text characters are not suitable for controls.

Screen readers *could* make sense of special characters if they used a database of various properties of characters. Well, they don’t, and they often fail to read properly even the most common special characters. Just reading the Unicode name of a character can be cryptic or outright misleading. The proper reading would generally depend on meaning and context.

The main issue, however, is that people do not generally recognize characters in the meanings that you would assign to them. How many people know what the circled plus symbol “⊕” stands for? Maybe 1 out of 1,000, optimistically thinking. It might be all right to use in on a page about advanced mathematics or physics, especially if the notation is defined there. But used in general text, it would be just… a weird character, and people would read different meanings into it, or just get puzzled.

So using special characters just because they look cool isn’t a good idea. Even when there is time and place for a special character, there are *technical* issues with them. How many fonts do you expect to contain “⊕”? How many of those fonts do you expect Joe Q. Public to have in his computer? In this specific case, you would find the font coverage reasonably good, but you would still have to analyze it and write a longish list of font names in your CSS code to cover most platforms. In the pile of poo case (♨), it would be unrealistic to expect most people to see anything but a symbol for unrepresentable character. Regarding the methods of finding out such things, check out my [Guide to using special characters in HTML](http://www.cs.tut.fi/~jkorpela/html/characters.html).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T08:13:31.590

I've run into problems using unusual characters: the tools editor, compiler, interpreter etc.) often complain and report errors. In the end, it wasn't worth the hassle. Darn western hegemony, or homogeneity, or, well, something!

# javascript - Node.js 与 Javascript 闭包

> ID：10325711
> 
> 赞同：2
> 
> 时间：2012-04-26T00:29:43.730
> 
> 标签：javascript, node.js, closures

我正在阅读 Eloquent JavaScript Book，其中包含以下代码：

```
function createFunction(){
  var local = 100;
  return function(){return local;};
} 
```

当我通过调用 createFunction() 通过节点控制台（从命令提示符运行节点）运行它时，我得到 [Function] 作为返回值。但是，根据这本书，我应该得到 100。

所以我的两个问题：为什么会这样？其次，在节点控制台中运行这些小示例是不是测试 JS 代码的坏主意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T00:30:58.187

您需要调用 的响应`createFunction()`。

```
createFunction()(); 
```

第一次调用 ( `()`) 调用`createFunction()`并返回内部函数，第二次调用执行并返回`local`被关闭的变量。

在节点控制台（或任何其他）中运行小示例很好，只要您知道环境，例如浏览器的控制台通常是`eval()`'d，这会产生副作用，例如如何`delete`明显*删除*变量，而不仅仅是对象属性.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T00:31:13.017

您可以`100`通过调用 的返回值来获得`createFunction`，它本身就是一个函数。

```
createFunction()(); 
```

...或者也许更清楚...

```
var new_func = createFunction();

new_func(); 
```

* * *

```
function createFunction(){
  var local = 100;

 //  v---v-----------------------v return a function from createFunction
  return function(){return local;};
}

  //  v------- the returned function is assigned to the new_func variable
var new_func = createFunction();

 //   v------- the returned function is invoked
new_func(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T00:31:16.943

对于那些有类似问题的人，我完全错过了双 ()，所以调用看起来像 createFunction()()。

# c - 为什么这个内存地址 %fs:0x28 ( fs[0x28] ) 有一个随机值？

> ID：10325713
> 
> 赞同：47
> 
> 时间：2012-04-26T00:30:46.060
> 
> 标签：c, gcc, x86-64, buffer-overflow, disassembly

我已经编写了一段 C 代码，并对其进行了反汇编并读取了寄存器以了解程序在汇编中是如何工作的。

```
int test(char *this){
    char sum_buf[6];
    strncpy(sum_buf,this,32);
    return 0;
} 
```

我一直在检查的代码是测试功能。当我反汇编输出我的测试功能时，我得到...

```
 0x00000000004005c0 <+12>:        mov    %fs:0x28,%rax
=> 0x00000000004005c9 <+21>:        mov    %rax,-0x8(%rbp)
... stuff ..
   0x00000000004005f0 <+60>:        xor    %fs:0x28,%rdx
   0x00000000004005f9 <+69>:        je     0x400600 <test+76>
   0x00000000004005fb <+71>:        callq  0x4004a0 <__stack_chk_fail@plt>
   0x0000000000400600 <+76>:        leaveq 
   0x0000000000400601 <+77>:        retq 
```

我想知道的`mov %fs:0x28,%rax`是真正在做什么？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-26T01:03:02.440

`FS`和寄存器都`GS`可以用作基指针地址，以便访问特殊的操作系统数据结构。因此，您所看到的是加载的值与寄存器中保存的值的偏移量`FS`，而不是对`FS`寄存器内容的位操作。

具体来说，`FS:0x28`Linux 上正在存储一个特殊的哨兵堆栈保护值，并且代码正在执行堆栈保护检查。例如，如果您进一步查看代码，您会发现 at 的值`FS:0x28`存储在堆栈中，然后调用堆栈的内容并`XOR`使用原始值 at 执行an `FS:0x28`。如果两个值相等，这意味着已经设置了零位，因为`XOR`'ing 两个相同的值会导致零值，然后我们跳转到`test`例程，否则我们跳转到一个特殊函数，该函数指示堆栈以某种方式损坏，并且存储在堆栈中的标记值已更改。

如果使用 GCC，[可以使用以下命令禁用](https://stackoverflow.com/a/2340455/124486)：

```
-fno-stack-protector 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-08T04:56:15.550

```
glibc:
  uintptr_t stack_chk_guard = _dl_setup_stack_chk_guard (_dl_random);
# ifdef THREAD_SET_STACK_GUARD
  THREAD_SET_STACK_GUARD (stack_chk_guard); 

the _dl_random from kernel. 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-26T00:43:17.170

查看[http://www.imada.sdu.dk/Courses/DM18/Litteratur/IntelnATT.htm](http://www.imada.sdu.dk/Courses/DM18/Litteratur/IntelnATT.htm)，我认为`%fs:28`实际上是从`%fs`. 所以我认为它将一个完整的寄存器大小从位置加载`%fs + 28`到%rax。

# jquery - 创建后立即将列表项移动到文件夹

> ID：10325717
> 
> 赞同：0
> 
> 时间：2012-04-26T00:30:58.820
> 
> 标签：jquery, wss-3.0

添加新列表项时，我试图覆盖 SharePoint Services 3.0 表单中的保存按钮。我认为使用 jQuery 会很容易，但我的表单中有太多字段和各种类型（文本、单选、复选框、日期和时间等），并且疯狂地试图获取所有值。我知道应该有一个更简单的方法来破解这个坚果。

首先，我使用 jQuery、SPServices 和 PreSaveAction 函数在提交项目之前创建一个文件夹。这工作正常。

其次，我不知道如何在最近创建的文件夹中创建/移动项目。我知道使用 BaseName 或 RootFolder 可以解决问题，但在提交项目之前我无法编辑它们。

有人知道如何克服这个问题吗？正如您可能想象的那样，我迫切希望找到解决方案，因为我已经查看了太多博客和论坛，无法继续碰壁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:27:05.243

我首先登陆到创建文件夹的页面，然后再进入 SharePoint 表单页面，从而解决了我的问题。在表单页面上，我在查询字符串参数中收到文件夹名称。我想最简单的选择最终成为最好的解决方案。

# php - Redbean PHP 中的验证

> ID：10325720
> 
> 赞同：5
> 
> 时间：2012-04-26T00:31:10.293
> 
> 标签：php, validation, exception-handling, redbean

我喜欢在 RedbeanPHP 中使用 FUSE 模型进行验证的想法。

我的应用程序有时需要通过多个来源（表单、文件等）接受数据，因此将验证放在实际的类更新上是有意义的。

查看 Redbean 站点上的示例，验证似乎基于抛出异常。

当然，你只能抛出一个异常，所以我假设我需要在我的 FUSE 类中创建一个“数组”类型的附加属性来保存与各个字段关联的验证消息。

有没有人有更好的想法？这是我迄今为止一直在尝试的...

```
<form action="" method="post">
    <p>your name: <input name="name" type="text"></p>

    <p>your email: <input name="email" type="text"></p>

    <p>your message:</p>
    <textarea name="message" id="" cols="30" rows="10"></textarea>
    <input name="send" value="send message" type="submit">
</form>

<?php

/**
 * @property $name string
 * @property $email string
 * @property $message string
 */
class Model_Comment extends RedBean_SimpleModel{
    public $invalid = array();
    public function update(){
        if(empty($this->name)) $this->invalid['name'] = "field is empty";
        if(empty($this->email)) $this->invalid['email'] = "field is empty";
        if(empty($this->message)) $this->invalid['message'] = "field is empty";
        if(count($this->invalid) > 0) throw new Exception('Validation Failed!');
    }
    public function getInvalid(){
        return $this->invalid;
    }
}

if(isset($_POST['send'])){

    $comment = R::dispense('comment');
    /* @var $comment Model_Comment */
    $comment->import($_POST,'name,email,message');

    try{
        R::store($comment);
    }
    catch(Exception $e){
        echo $e->getMessage();
        $invalid = $comment->getInvalid();
        print_r($invalid);
        exit;
    }
    echo '<p>thank you for leaving a message.</p>';
}
echo "<h2>What people said!</h2>";

$comments = R::find('comment');
/* @var $comments Model_Comment[] */

foreach($comments as $comment){
    echo "<p>{$comment->name}: {$comment->message}</p>";
}

?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T19:44:18.037

您可以扩展`RedBean_SimpleModel`类以向其中添加您自己的方法和字段，因此它将适用于您的所有模型。然后，您可以使用事务来管理您的验证。它可能看起来像这样（代码未测试）：

```
class RedBean_MyCustomModel extends RedBean_SimpleModel {
  private $errors = array();
  public function error($field, $text) {
    $this->errors[$field] = $text;
  }
  public function getErrors() {
    return $this->errors;
  }
  public function update() {
    $this->errors = array(); // reset the errors array
    R::begin(); // begin transaction before the update
  }
  public function after_update() {
    if (count($this->errors) > 0) {
      R::rollback();
      throw new Exception('Validation failed');
    }
  }
} 
```

然后，您的模型可能如下所示：

```
class Model_Comment extends RedBean_MyCustomModel {
    public function update(){
        parent::update();
        if(empty($this->name)) $this->error('name', 'field is empty');
        if(empty($this->email)) $this->error('name', 'field is empty');
        if(empty($this->message)) $this->error('name', 'field is empty');
    }
    public function getInvalid(){
        return $this->invalid;
    }
} 
```

# iphone - 监控应用程序利用率

> ID：10325729
> 
> 赞同：0
> 
> 时间：2012-04-26T00:33:42.033
> 
> 标签：iphone, ios, xcode, app-store, viewwillappear

有没有办法跟踪 iPhone 应用程序的使用情况？我想知道每次用户打开我的应用程序或与我的应用程序交互时。我不想要有关用户或其设备的任何其他信息。我什至不需要识别用户。我只想监控使用频率和不活动频率。

我想可能会使用以秒为单位的时间创建一个唯一 ID，然后在 viewWillAppear 中编写一些代码，以发送包含唯一 ID 的电子邮件。但我什至不知道我的应用程序是否会通过此功能在 AppStore 中获得批准销售。

欢迎提出任何建议 - 非常感谢您为回答这个问题所付出的任何努力......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T00:46:14.593

只需在您的应用程序中使用[Flurry](http://www.flurry.com/)

Flurry Analytics 提供了有关消费者如何与您的移动应用程序实时交互的强大洞察力。超过 60,000 家公司选择 Flurry Analytics 用于 iOS、Android、Blackberry、Windows Phone、JavaME 和 HTML5 的 150,000 多个应用程序。

Flurry Analytics 帮助移动应用程序开发人员制作更好的应用程序、加深消费者参与并提高其应用程序的盈利能力。该服务是免费的、跨平台的、易于集成的，能够处理任何规模的应用程序的数据负载，并经常更新新的高级功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T00:46:53.953

您可以使用 Google Analytics 来跟踪这些数据。

[https://developers.google.com/analytics/devguides/collection/ios/](https://developers.google.com/analytics/devguides/collection/ios/)

# java - Text.getBytes() 返回意外结果

> ID：10325733
> 
> 赞同：1
> 
> 时间：2012-04-26T00:33:50.863
> 
> 标签：java, serialization, unicode, encoding, hadoop

我从 Text 构造函数中得到了一些没有任何意义的行为。基本上，如果我从 String 构造一个 Text 对象，它不等于我从字节构造的另一个 Text 对象，即使 getBytes() 为这两个对象返回相同的值。

所以我们得到了这样奇怪的东西：

```
//This succeeds
assertEquals(new Text("ACTACGACCA_0"), new Text("ACTACGACCA_0")); 
//This succeeds
assertEquals((new Text("ACTACGACCA_0")).getBytes(), (new Text("ACTACGACCA_0")).getBytes()); 
//This fails.  Why?
assertEquals(new Text((new Text("ACTACGACCA_0")).getBytes()), new Text("ACTACGACCA_0")); 
```

这在我尝试访问哈希图时表现出来。在这里，我试图根据 org.apache.hadoop.hbase.KeyValue.getRow() 返回的值进行查找：

```
//This succeeds
assertEquals((new Text("ACTACGACCA_0")).getBytes(), keyValue.getRow()); 
//This returns a value
hashMap.get(new Text("ACTACGACCA_0"));  
//This returns null.  Why?
hashMap.get(new Text(keyValue.getRow())); 
```

那么这里发生了什么，我该如何处理呢？这与编码有关吗？

## 更新：问题已解决

感谢克里斯为我指明了正确的方向。所以，有一点背景：keyValue 对象是从调用 htable.put() 中捕获的（使用 Mockito ArgumentCaptor）。基本上，我有这段代码：

```
byte[] keyBytes = matchRow.getKey().getBytes();
RowLock rowLock = hTable.lockRow(keyBytes);                         

Get get = new Get(keyBytes, rowLock);               
SetWritable<Text> toWrite = new SetWritable<Text>(Text.class);
toWrite.getValues().addAll(matchRow.getMatches(hTable, get));

Put put = new Put(keyBytes, rowLock);
put.add(Bytes.toBytes(MatchesByHaplotype.MATCHING_COLUMN_FAMILY), Bytes.toBytes(MatchesByHaplotype.UID_QUALIFIER), 
        SERIALIZATION_HELPER.serialize(toWrite));               
hTable.put(put); 
```

其中 matchRow.getKey() 返回一个文本对象。你看到这里的问题了吗？我正在添加所有字节，**包括无效字节。** 所以我创建了一个很好的辅助函数来做到这一点：

```
public byte[] getValidBytes(Text text) {
    return Arrays.copyOf(text.getBytes(), text.getLength());
} 
```

并将该块的第一行更改为：

```
byte[] keyBytes = SERIALIZATION_HELPER.getValidBytes(matchRow.getKey()); 
```

问题解决了！回想起来：哇，多么讨厌的错误！我认为归结为 Text.getBytes() 的行为非常不友好。它不仅返回您可能不期望的内容（无效字节），而且 Text 对象没有仅返回有效字节的函数！你会认为这将是一个常见的用例。也许他们将来会添加这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T02:11:23.707

出于同样的原因，以下失败：

```
Assert.assertEquals((new Text("ACTACGACCA_0")).getLength(), (new Text("ACTACGACCA_0")).getBytes().length); 
```

`getBytes()`返回后备字节数组，但根据 API，字节仅有效`Text.getLength();`

*   [文本.getBytes()](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/io/Text.html#getBytes%28%29)

是的，这确实与编码有关 - CharsetEncoder.encode 方法使用 ByteBuffer，其大小最初分配为 12 * 1.1 字节（13）的长度，但实际有效的字节数仍然只有 12（如您使用仅 ASCII 字符）。

# javascript - 从另一个 .js 文件调用一个 .js 文件中的函数时的命名空间问题

> ID：10325736
> 
> 赞同：0
> 
> 时间：2012-04-26T00:33:57.290
> 
> 标签：javascript, callback, javascript-namespaces

为了为许多图像制作可滑动的幻灯片，我试图将两个插件[Swipe.js](http://swipejs.com/)和[lazyloader.js](http://www.appelsiini.net/projects/lazyload)拼接在一起。我想让 Swipe 插件中的幻灯片计时器事件调用 Lazyloader 内部的更新函数。[从研究来看，我的问题似乎是 namespace 之一](https://stackoverflow.com/questions/5137371/problem-calling-namespaced-function-from-javascript-function-in-another-js-file)；也就是说，Swipe 不知道 Lazyloader 内部的东西，因此无法调用该函数。

1.  鉴于以下代码，我是否正确理解我的问题？
2.  如果是这样，我怎样才能让 Swipe 访问 Lazyloader 的功能？

谢谢你。

跟进：在与 Cheeso 进行问答之后，我现在发现我问错了关于我最终需要发生什么的问题。我添加此评论是为了避免让任何未来的读者因为我的坏问题而感到困惑。这与命名空间无关，甚至与访问[不应做](https://stackoverflow.com/questions/6229501/overriding-a-function-defined-in-jquery-closure)的私有函数无关。如果您真的不知道自己在做什么，那么这个线程最终是关于尝试和 frankenstein 库一起可能是多么不可取。; ) 结束跟进

swipe.js 中的回调：

```
this.callback = this.options.callback || function() { 
```

在 html 中调用的脚本：

```
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/jquery.lazyload.js" type="text/javascript"></script>
<script src='js/swipe.js' type="text/javascript"></script>

<script type="text/javascript">$(document).ready(function() {

    function myAlert(){
        //call a function from inside jquery.lazyload.js
        alertMe();
    }

    //instantiate a swipe object and pass in a bunch of 
    //options, especially "callback" which fires on every slide change
    window.mySwipe = new Swipe(document.getElementById('slider1'), {
        startSlide: 0,
        speed: 1000,
        auto: 5000,
        callback: function(){
            myAlert();
        }
    });
    // run lazyload on every VISIBLE image with the class "lazy" on load, and on every click
    $("img.lazy").lazyload({event: "click", effect : "fadeIn", threshold: 0,});
    }); 
</script> 
```

jquery.lazyloader.js：

```
 //outside of the container below, I can be called by myAlert()
 function alertMe() {
        alert("it worked!");
    }

(function($, window) {

    $window = $(window);

    $.fn.lazyload = function(options) {

    ///
    ///Here be a bunch of lazyloader stuff
    ///

    //I work when above, but once I am inside this container, I cannot be called by myAlert(), 
    //and I will error as 'not a valid function'
    function alertMe() {
        alert("it worked! Even inside of this container! ");
    }

})(jQuery, window); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:52:04.987

可以这么简单：将`callback`Swipe 实例上的选项设置为指向执行 LazyLoader 操作的函数。这只是一个猜测，因为我不知道 swipe，但是我查看了代码转储并看到了那个回调函数；它似乎是 Swipe 扩展的关键点。

如果我是正确的，那么这根本不是命名空间问题。这正是您所说的 -*将不同的库或模块编织在一起*。通常，一个 js 模块会有一个或两个扩展点来实现这一点。我猜 Swipe 的扩展点就是回调。

也许是这样的：

```
function myFn() {
  // do whatever lazyload thing you want to do, here. 
}

$(document).ready(function() { 
    var slider1 = new Swipe(document.getElementById('slider1'),
                            {startSlide: 0,
                             speed: 1000,
                             auto: 10000,
                             callback:myFn}); 
    $("img.lazy").lazyload({event: "click"}); 
}); 
```

您可能必须重构以使其中一个`slider1`或其他一些变量成为全局变量，以便可以在 doc.ready 函数之外访问它们。

**跟进**

你有这个：

```
<script type="text/javascript">
    $(document).ready(function() {   
        function myAlert(){   
            //call a function from inside jquery.lazyload.js   
            alertMe();   
        }   

        //instantiate a swipe object and pass in a bunch of    
        //options, especially "callback" which fires on every slide change   
        window.mySwipe = new Swipe(document.getElementById('slider1'), {   
            startSlide: 0,   
            speed: 1000,   
            auto: 5000,   
            callback: function(){   
                myAlert();   
            }   
        });   
        $("img.lazy").lazyload({event: "click", effect : "fadeIn", threshold: 0,});   
    });    
</script> 
```

该代码有几个问题。它应该更接近于：

```
<script type="text/javascript">
    function myThing(){   
        // ** Do something useful here. This may involve calling
        // ** other functions.  Those functions need not be defined
        // ** within jquery.lazyload.js.
    }   

    $(document).ready(function() {   
        //instantiate a swipe object and pass in a bunch of    
        //options, especially "callback" which fires on every slide change.

        // ** There is no need, as far as I can tell, to assign the
        // ** output to a global variable. (window.mySwipe).  In fact, given
        // ** the code you have, there is no need to retain the output at all. 
        new Swipe(document.getElementById('slider1'), {   
            startSlide: 0,   
            speed: 1000,   
            auto: 5000,   
            // ** Just use the function name. You don't need to define
            // ** a new anonymous function to wrap around it. 
            callback: myThing
        });   
        $("img.lazy").lazyload({event: "click", effect : "fadeIn", threshold: 0,});   
    });    
</script> 
```

* * *

**更多的**

我想您想要的是延迟加载“接下来的几个”图像，以便用户在列表中滑动时可以使用它们。从我读到的内容（简要地），`lazyload()`对于页面上的所有图像，您只需要调用一次。如果您的图像位于“容器”内，则 `container`在延迟加载时指定选项。（参见 [http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)）插件然后监视该容器的视口并根据需要加载图像。无需再次调用“lazyload”，无需回调。

如果这不起作用，则 Swipe 和 jquery.lazyload.js 可能无法一起使用，因为在延迟加载中做出了假设。在这种情况下，您仍然可以进行延迟加载，但您需要自己进行。

为此，请*完全消除lazyload.js*。然后，在 Swipe 回调中，执行您希望延迟加载完成的操作：`src`在“下一个”图像上设置属性。设置该属性将导致网页加载图像。要获得延迟加载，在原始状态下`src`，所有图像的属性必须为空白，或者设置为某个固定的图像 URL，然后才开始滑动。现在，您可能会问：在回调中您如何知道要加载哪个图像？以及将哪个 URL 设置到 src 属性中？这由你来决定。我认为有某种方法可以在该回调中从 Swipe 获取适当的信息。

如果你不明白这一点，那么你需要一些指导或进一步阅读，以建立对浏览器如何处理图像的基本理解。根据我的阅读，您不需要 Swipe 来调用lazyload 的`update()`.

一些一般性建议：

*   对于任何模块，您都不应该尝试调用该模块内部定义的函数。出于某种原因，它们是内部的。

*   对于任何模块，除非您非常确定自己知道自己在做什么，否则不应修改其源代码。如果您正在四处寻找和尝试，请将代码放入您自己的模块中。您自己的 javascript 代码属于网页，或网页引用的单独模块。

*   `$(document).ready()`除非您有充分的理由，否则您可能不应该在其中定义函数 。

*   阅读文档。在今天之前，我从未听说过 Swipe 或lazyload。我在这里提出的关于它们的建议——特别是关于 Swipe 上的回调和延迟加载上的容器选项——来自我 *阅读*文档以了解如何使用它们。

# java - Java：构造Locale对象时NullPointerException导致的ExceptionInInitializerError

> ID：10325744
> 
> 赞同：2
> 
> 时间：2012-04-26T00:35:44.717
> 
> 标签：java, object, nullpointerexception, locale, static-initializer

我正在为我与其他几个人编写的程序进行本地化。大多数字符串现在从 ini 文件以适当的语言加载。我正在尝试对程序中的货币格式做同样的事情。但是，一旦我尝试启动应用程序，就会遇到运行时异常。

我使用 Locale 对象作为几个 NumberFormat.getCurrencyInstance() 的参数，如下所示：

```
private static final NumberFormat decf;
static 
{
    decf = NumberFormat.getCurrencyInstance(Lang.cLocale);
    decf.setRoundingMode(RoundingMode.HALF_UP);
} 
```

Lang 是包含所有本地化内容的类。IDE 在尝试运行时抱怨的代码是`public static Locale cLocale = new Locale(GUI.DB_info[19],GUI.DB_info[20]);`

GUI 是包含 GUI 的类，我们决定在其中构造 DB_info 数组（它本身只包含从另一个类中的远程数据库加载的信息）。DB_info[19] 是语言代码（现在），DB_info[20] 是国家代码（美国）。数组元素正在被正确填充——或者，我现在无法深入了解程序；但是填充 DB_info 的代码没有任何改变。

完整的例外情况如下：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
at greetingCard.GUI.<clinit>(GUI.java:118)
Caused by: java.lang.NullPointerException
at java.util.Locale.<init>(Unknown Source)
at java.util.Locale.<init>(Unknown Source)
at greetingCard.Lang.<clinit>(Lang.java:13)
... 1 more 
```

GUI 中引用的行是: `static String welcome = Lang.L_WELCOME + ", " + empName;`，而 Lang.java 基本上是这样的：

```
// Set locale for currency display
public static Locale cLocale = new Locale(GUI.DB_info[19],GUI.DB_info[20]); // language, country

// Employee specific strings
public static String L_AMT_REMAIN = "";
public static String L_AMT_TEND = "";
public static String L_APPROVED = "";
public static String L_ARE_YOU_SURE = "";
[...]

public static void Main(String emp_lang)
{
    String header = "";

    if (emp_lang.equals("ENG"))
    {
        header = "ENG";
    }
    else if (emp_lang.equals("SPA"))
    {
        header = "SPA";
    }
    else if (emp_lang.equals("FRE"))
    {
        header = "FRE";
    }
    else if (emp_lang.equals("GER"))
    {
        header = "GER";
    }
    else
    {
        header = "ENG";
    }

    try 
    {
        Ini ini = new Ini(new File("C:/lang.ini"));

        L_AMT_REMAIN = ini.get(header, "L_AMT_REMAIN");
        L_AMT_TEND = ini.get(header, "L_AMT_TEND");
        L_APPROVED = ini.get(header, "L_APPROVED");
        L_ARE_YOU_SURE = ini.get(header, "L_ARE_YOU_SURE");
                    [...]
                                L_WELCOME = ini.get(header, "L_WELCOME");
        L_WELCOME2 = ini.get(header, "L_WELCOME2");
        L_XACT_CHNG = ini.get(header, "L_XACT_CHNG");  
        L_YES = ini.get(header, "L_YES");

        System.err.println("Employee Language: " + header);
    } 
    catch (InvalidFileFormatException e) 
    {
        e.printStackTrace();
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    }
} // end public static void main 
```

这是为了让大多数字符串以不同的语言显示。Lang 内部还有另一种方法可以加载其他一些字符串，与第一组无关。我不相信它会导致这个问题，但如果需要我可以发布它。

这些类/方法的启动顺序如下： GUI.Main 调用 Login 类，该类调用 CreateLogin 方法。该方法调用 Clients.main，它从 GUI 中获取传递给它的 DB_info 数组。客户端填充 DB_info 数组。然后调用 Lang.other（为登录页面获取特定于语言的字符串），并创建登录按钮和标签。一旦登录成功，员工登录的首选语言（从数据库）被传递给 Lang.main 以加载其他字符串（因此 emp_lang 在上面的代码中被传递）。

直到我添加了 Locale 对象的代码，所有这些都运行良好。现在我得到 ExceptionInInitializerError 异常。有谁知道发生了什么？

顺便说一句，为了从我使用 ini4j 的 ini 文件加载。我在谷歌搜索时发现的一些论坛帖子表明这是一个问题，但我看不出它与 Locale 对象的问题有何关系。ini 的东西工作（工作）很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T00:54:44.363

听起来你的静态初始化器中有一个循环，所以有些东西还没有初始化。

`GUI``Lang`在获取`Lang.L_WELCOME`. `Lang`在第 2 行调用s 静态初始化程序。由于某种原因，`GUI`您的异常跟踪使它看起来像`GUI`调用s 静态初始化程序。`Lang`

总之，像这样的循环意味着某人将引用一个静态初始化的对象并得到`null`而不是他们期望得到的。在这种情况下，我怀疑`Lang.java`第 2 行将两个`null`指针传递给`Locale`构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T05:00:04.710

正如 Keith 所说，您有一个静态初始化程序循环。为了帮助未来的读者...

为了最大限度地减少这些错误，请在（复杂）*变量*之前初始化（简单）*常量*（没有或使用最少的构造函数） ，因此在此之前- 更少的循环空间导致问题。*`String``Locale`*

 *Debugging-wise, `NullPointerException` on a static field and 2 `<clinit>` in stack trace, with the earlier class appearing in the failing line, are the clues that this is an *uninitialized field* caused by a *static initializer cycle*.*

# jquery - JQuery：悬停时动态图像替换？

> ID：10325746
> 
> 赞同：0
> 
> 时间：2012-04-26T00:35:58.000
> 
> 标签：jquery

我想要一个带有 img 元素的 Jquery 函数，当它悬停时，它会像这样替换 img： myimage.png 替换为 myimage2.png

这是我想出的，但它不起作用：

```
 $("#menu img").hover(function(){
        var split = $(this).attr("src").split(".png");
        $(this).attr("src", split[0]+"2.png");
    }, function(){
        var split = $(this).attr("src").split(".png");
        $(this).attr("src", split[0]+".png");
    }); 
```

我相信退伍军人可以想出一个更好的方法，所以请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:45:04.243

您的第二个函数根本不会更改`src`属性，因为您所做的只是删除“.png”位然后重新添加它。您还需要删除“2”。我想你可以`split('.png')`改成`split('2.png')`.

但在大多数情况下，CSS 是一个更好的解决方案。除非您真的想显示图像（例如在画廊中），否则您可以在其他元素上设置背景图像并在悬停时交换它们。更好的是，使用图像精灵将 HTTP 请求降至最低：

```
#menu a {
    background: url(menu.png) no-repeat; /* menu.png contains ALL the images used in the menu */
    display: block;
    width: 80px;
    height: 20px;
    text-indent: -1000000px; /* Remove text */
}

#menu a:hover {
    background-position: left -20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T00:42:05.517

希望这会有所帮助，如果您有任何问题，请告诉我。

jsFiddle( [http://jsfiddle.net/ZWxEg/12/](http://jsfiddle.net/ZWxEg/12/) )

```
<script type='text/javascript'>

    var split = new Array();

    split[0] = "http://www.google.com/logos/2012/sundback12-hp.jpg";
    split[1] = "http://www.google.com/logos/2012/sovereignty12_hp.jpg";

    $(document).ready(function()
    {
        $(".button").hover( function ()
        {
             $(this).attr( "src" , split[1] );
        },
        function ()
        {
             $(this).attr( "src" , split[0] );
        });
    });
</script>

<div id="menu">
    <img src="http://www.google.com/logos/2012/sundback12-hp.jpg" alt="My button" class="button" />
</div>
​ 
```

# ruby-on-rails - Sqlite 数据库在 OSX 中的位置

> ID：10325752
> 
> 赞同：1
> 
> 时间：2012-04-26T00:37:20.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite, sqlite3-ruby

我正在学习 Ruby on Rails 3，并希望查看由 Sqlite3 中的各种 Scaffold 命令创建的数据库结构，以便更多地了解该过程。

在 OSX Snow Leopard 中，输入：

`which sqlite3`

产量：

“/usr/local/bin/sqlite3”

但是似乎找不到数据库！指向该位置只会产生以下错误消息：

> 连接失败。文件已加密或不是数据库

要查看 dbs im 使用：

[Navicat for Sqlite](http://www.navicat.com/en/products/navicat_sqlite/sqlite_detail_mac.html)

任何人都告诉我dbs实际驻留在哪里？“/usr/local/bin/sqlite3”似乎是一个符号链接：/usr/local/Cellar/sqlite/3.7.10/bin/sqlite3s

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T00:42:57.337

SQLite 实际上是无服务器的，因此默认情况下 DB 文件位于您的 rails 目录中。

例如：

/db/development.sqlite3

您可以检查所有 sqlite 环境数据库的位置`config/database.yml`

# python - TypeError：“pygame.Surface”对象不可调用

> ID：10325755
> 
> 赞同：1
> 
> 时间：2012-04-26T00:37:57.537
> 
> 标签：python, pygame

当我想进入游戏结束屏幕时，我遇到了这个问题。

```
Traceback (most recent call last):
  File "C:\Users\MO\Desktop\Twerk\ballbounce_changed.py", line 215, in <module>
   game()
File "C:\Users\MO\Desktop\Twerk\ballbounce_changed.py", line 191, in game
  text("Game Over",30,white,300)
TypeError: 'pygame.Surface' object is not callable 
```

这是存在屏幕的代码部分：

```
while finish == True:
 screen.blit(menu,[0,0])
 text("Game Over",30,white,300)
 text("Instructions",310,white)
 text("-----------------------------------------------------",320,white)
 text("Avoid the the enemies",340,white)
 text("Last as long as you can!",360,white)
 text("Press space to start",420,white)

# display.update()
pygame.display.update()

 for event in pygame.event.get():
 if event.type == pygame.QUIT:
   repeat = False

 if event.type == pygame.KEYDOWN:
   if event.key == pygame.K_SPACE:
     repeat = True

if repeat == False:
pygame.quit()

else:
 game()

game() 
```

如果我删除游戏结束屏幕中的文本，它确实有效。我一介绍文字就会收到上述错误消息

（缩进不正确）我在这里有 inden 的完整代码[http://pastebin.com/VBkhX4kt](http://pastebin.com/VBkhX4kt)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:09:04.130

错误是因为在第 93 行，您覆盖了`text`从函数到任何 font.render() 返回的变量的绑定。

```
93: text = font.render('Starting Twerk... ', True, (100,100,100)) 
```

因此，稍后，当您调用`text(...)`它时，它并没有调用您之前定义的函数，而是试图将其`text`视为可调用的（它不是，因为它现在是一个 pygame.Surface 对象）。

解决方案是更改该行而不是覆盖您的`text`功能。

# jquery - JQuery，可拖动和可放置，我错过了什么？

> ID：10325756
> 
> 赞同：0
> 
> 时间：2012-04-26T00:38:00.760
> 
> 标签：jquery, draggable, droppable

我希望能够将事件拖到此处的空 div 中。

这是我的小提琴：http: [//jsfiddle.net/Yc9WY/6/](http://jsfiddle.net/Yc9WY/6/)

如果你将一个事件拖到一个空的 div 中，你会发现它并没有消除第一个，并且我不能再将新附加的 href 拖到一个新的 div 中。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:12:25.703

与其创建新的锚点并克隆被拖动元素内的数据，不如直接*移动*元素本身？

```
$(this).append(ui.draggable); 
```

您还需要重置位置以删除可拖动添加的左侧/顶部属性（可能有一个功能/选项，但您可以查看文档）。

示例：http: [//jsfiddle.net/Yc9WY/27/](http://jsfiddle.net/Yc9WY/27/)

# iphone - UIScrollView 类型访问 UIWebView

> ID：10325760
> 
> 赞同：0
> 
> 时间：2012-04-26T00:38:37.043
> 
> 标签：iphone, ios, uiwebview, uiscrollview

我想知道 UIWebView 的 contentOffset，和/或从中获取 didScroll 类型的通知。我错过了什么，或者那是不可能的。

我想要的是一个一半是信息面板，一半是 UIWebView 的 UI。当应用程序发现用户想要查看更多 Web 视图时，我想使用更小的信息面板和更大的 Web 视图来重新构建框架。当用户想要少看时，重新构图到一半一半。

问题是界面几乎没有按钮空间。如果 web 视图是滚动视图，我可以使用滚动动作来辨别意图。（向下滚动表示放大，向上滚动表示缩小）。有什么想法可以通过网络视图实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:53:42.357

UIWebView 由 UIScrollView 组成。

要访问 ScrollView，您可以使用以下两种方式之一：

```
UIWebView *aWebView; // Initialization code 
UIScrollView *aScrollView;
for (UIView *aView in [aWebView subviews]) {
    if ([aView isKindOfClass:[UIScrollView class]]) {
        aScrollView = (UIScrollView *)aView;
    }
} 
```

或者

```
aScrollView = [[aWebView subviews] objectAtIndex:0]; 
```

Option-1 是获取 UIScrollView 实例的更安全方法...

和....

如果你正在为 iOS5 构建你的应用程序，你可以调用..

```
aScrollView = aWebView.scrollView; 
```

**编辑**

如果你仔细检查 UIWebView，你应该已经注意到它符合 `UIScrollViewDelegate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T00:59:04.477

如果您的主要目的是在 UIWebView 之上提供自定义手势类型的操作，您可以尝试 UIGestureRecognizer。

（别忘了提供UIGestureRecognizerDelegate的gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer实现，让webview自带的手势识别器正常工作）

# c# - C# - 快速反转图像字节？

> ID：10325761
> 
> 赞同：3
> 
> 时间：2012-04-26T00:38:50.440
> 
> 标签：c#, image, bytearray, reverse

我正在尝试确定在 Y 轴上翻转图像的最佳方式。对于每个像素，有 4 个字节，每组 4 个字节需要按顺序保持在一起，但要移位。这是迄今为止我想出的最好的。

对于 1280x960 图像，这只需要 0.1-.2 秒，但对于视频，这样的性能是严重的。有什么建议么？

**初步实施**

```
 private void ReverseFrameInPlace(int width, int height, int bytesPerPixel, ref byte[] framePixels)
    {
        System.Diagnostics.Stopwatch s = System.Diagnostics.Stopwatch.StartNew();

        int stride = width * bytesPerPixel;
        int halfStride = stride / 2;
        int byteJump = bytesPerPixel * 2;
        int length = stride * height;
        byte pix;

        for (int i = 0, a = stride, b = stride - bytesPerPixel;
            i < length; i++)
        {
            if (b % bytesPerPixel == 0)
            {
                b -= byteJump;
            }
            if (i > 0 && i % halfStride == 0)
            {
                i = a;
                a += stride;
                b = a - bytesPerPixel;
                if (i >= length)
                {
                    break;
                }
            }

            pix = framePixels[i];
            framePixels[i] = framePixels[b];
            framePixels[b++] = pix;
        }

        s.Stop();
        System.Console.WriteLine("ReverseFrameInPlace: {0}", s.Elapsed);
    } 
```

**修订 #1**

根据 SLaks 和 Alexei 使用索引和 Buffer.BlockCopy 进行了修订。还添加了 Parallel.For 因为索引允许它。

```
 int[] pixelIndexF = null;
    int[] pixelIndexB = null;
    private void ReverseFrameInPlace(int width, int height, int bytesPerPixel, byte[] framePixels)
    {
        System.Diagnostics.Stopwatch s = System.Diagnostics.Stopwatch.StartNew();

        if (pixelIndexF == null)// || pixelIndex.Length != (width * height))
        {
            int stride = width * bytesPerPixel;
            int length = stride * height;

            pixelIndexF = new int[width * height / 2];
            pixelIndexB = new int[width * height / 2];
            for (int i = 0, a = stride, b = stride, index = 0;
                i < length; i++)
            {
                b -= bytesPerPixel;
                if (i > 0 && i % (width / 2 )== 0)
                {
                    //i = a;
                    i += width / 2;
                    a += stride;
                    b = a - bytesPerPixel;
                    if (index >= pixelIndexF.Length)
                    {
                        break;
                    }
                }
                pixelIndexF[index] = i * bytesPerPixel;
                pixelIndexB[index++] = b;
            }
        }

        Parallel.For(0, pixelIndexF.Length, new Action<int>(delegate(int i)
        {
            byte[] buffer = new byte[bytesPerPixel];
            Buffer.BlockCopy(framePixels, pixelIndexF[i], buffer, 0, bytesPerPixel);
            Buffer.BlockCopy(framePixels, pixelIndexB[i], framePixels, pixelIndexF[i], bytesPerPixel);
            Buffer.BlockCopy(buffer, 0, framePixels, pixelIndexB[i], bytesPerPixel);
        }));

        s.Stop();
        System.Console.WriteLine("ReverseFrameInPlace: {0}", s.Elapsed);
    } 
```

**修订 #2**

```
 private void ReverseFrameInPlace(int width, int height, System.Drawing.Imaging.PixelFormat pixelFormat, byte[] framePixels)
    {
        System.Diagnostics.Stopwatch s = System.Diagnostics.Stopwatch.StartNew();

        System.Drawing.Rectangle imageBounds = new System.Drawing.Rectangle(0,0,width, height);

        //create destination bitmap, get handle
        System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(width, height, pixelFormat);
        System.Drawing.Imaging.BitmapData bitmapData = bitmap.LockBits(imageBounds, System.Drawing.Imaging.ImageLockMode.ReadWrite, bitmap.PixelFormat);
        IntPtr ptr = bitmapData.Scan0;

        //byte[] to bmap
        System.Runtime.InteropServices.Marshal.Copy(framePixels, 0, ptr, framePixels.Length);
        bitmap.UnlockBits(bitmapData);

        //flip
        bitmap.RotateFlip(System.Drawing.RotateFlipType.RotateNoneFlipX);

        //get handle for bitmap to byte[]
        bitmapData = bitmap.LockBits(imageBounds, System.Drawing.Imaging.ImageLockMode.ReadWrite, bitmap.PixelFormat);
        ptr = bitmapData.Scan0;
        System.Runtime.InteropServices.Marshal.Copy(ptr, framePixels, 0, framePixels.Length);
        bitmap.UnlockBits(bitmapData);

        s.Stop();
        System.Console.WriteLine("ReverseFrameInPlace: {0}", s.Elapsed);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:32:39.583

我遇到了几乎相同的问题，但在我的情况下，我需要翻转图像以将其保存到 .avi 容器中。我改用了 Array.Copy() 方法，令人惊讶的是，它似乎比其他方法更快（至少在我的机器上）。我使用的源图像是 720 x 576 像素，每像素 3 个字节。此方法花费了 0.001 - 0.01 秒，而您的两个修订版都花费了大约 0.06 秒。

```
 private byte[] ReverseFrameInPlace2(int stride, byte[] framePixels)
    {
        System.Diagnostics.Stopwatch s = System.Diagnostics.Stopwatch.StartNew();
        var reversedFramePixels = new byte[framePixels.Length];
        var lines = framePixels.Length / stride;

        for (var line = 0; line < lines; line++)
        {
            Array.Copy(framePixels, framePixels.Length - ((line + 1) * stride), reversedFramePixels, line * stride, stride);
        }

        s.Stop();
        System.Console.WriteLine("ReverseFrameInPlace2: {0}", s.Elapsed);
        return reversedFramePixels;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T00:41:38.977

尝试调用[`Buffer.BlockCopy`](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx)每个 4 个字节的范围；那应该更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T03:01:31.147

您可以使用任何技术在 CPU 上并行执行，或者使用像素着色器并在 GPU 上执行。如果您这样做只是为了显示翻转的视频 - 您最好使用 DirectX 并简单地在 GPU 上进行转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T02:12:27.753

使用 .NET 库提供的众多转换之一：

[http://msdn.microsoft.com/en-us/library/aa970271.aspx](http://msdn.microsoft.com/en-us/library/aa970271.aspx)

编辑：这是另一个例子：

[http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-rotate](http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-rotate)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T00:57:24.463

尝试和测量更多随机的东西：

*   预构建索引数组以复制到一行（如 [12,13,14,15, 8,9,10,11, 4,5,6,7, 0,1,2,3] 而不是一些在每一行上执行复杂的 ifs。
*   尝试复制到新目的地而不是就地。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T04:34:27.227

另一种选择可能是使用 XNA 框架对图像进行操作。有一个[如何在 XNA 中调整和保存 Texture2D 的小例子？](https://stackoverflow.com/questions/664279/how-to-resize-and-save-a-texture2d-in-xna). 我不知道它有多快，但考虑到这些功能应该在高 fps 的游戏中使用，我可以看到它应该有多快。

# html - html5 链接预取是否会影响 Google Analytics？

> ID：10325769
> 
> 赞同：6
> 
> 时间：2012-04-26T00:39:29.397
> 
> 标签：html, google-analytics, meta-tags, prefetch

[html5 链接预取属性](http://davidwalsh.name/html5-prefetch)是否会导致在 Google Analytics 中的预取页面上计算访问？

`<link rel="prefetch" href="http://someurl.com/page.htm" />`

这个[关于跟踪预取 AJAX 内容](https://stackoverflow.com/questions/2705389/does-preloading-content-from-a-page-skew-my-google-analytics-stats)的 SO 问题类似，但该`<link>`标签是没有任何 Javascript 的浏览器解释，它是按浏览器实现的。

我正在开发具有逻辑上一页和下一页内容的网站。该应用程序通过网站、培训课程或在线手册依次浏览。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T00:47:53.417

预取只下载资源，不执行代码，也不触发 DOM 事件等。

鉴于 Google Analytics 依赖于运行 JS，我预计它不会受到影响。

但是，任何跟踪对给定资源的请求的服务器端分析都会受到影响。

# c - GCC 错误：预期的 ')' 之前 范围

> ID：10325770
> 
> 赞同：2
> 
> 时间：2012-04-26T00:39:48.807
> 
> 标签：c, gcc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:42:20.977

Looks to me like you're using a variable as a type name. What does the declaration of `communicationBlock_t` look like?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:46:23.757

Sorry, folks. It was, as I suspected a deady embrace in #include files

# c# - 我是否需要在我的 .NET Regex 模式中转义匹配替换？

> ID：10325771
> 
> 赞同：1
> 
> 时间：2012-04-26T00:40:09.537
> 
> 标签：c#, .net, regex

我正在将一些代码从 Perl 转换为 .NET。我有这个 s/// 模式替换：

```
$text =~ s/<A HREF="([^"]+)">\Q\1\E</A>"/$1/gi; 
```

我使用 Perl \Q 和 \E 来转义我在第一次捕获中匹配的文本，即 HREF 属性的 URL 部分。

我如何在 .NET 中做同样的事情？我已经阅读了有关使用 Regex.Escape() 转义正则表达式文本的信息，但是如何在执行匹配的正则表达式中使用它？（或者我什至需要这样做？）

所以现在我没有做任何特别的事情，并且想知道这是否会像我的 Perl 正则表达式一样继续工作：

```
text = Regex.Replace(text, @"<A HREF=""([^""]+)"">\1</A>", "$1", RegexOptions.IgnoreCase); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:08:27.690

您不需要 Perl 中的 \Q...\E。事实上，它会阻止你的 Perl 工作，因为这意味着 '\1' 是按字面意思使用的，而不是被第一个匹配项的内容替换。

\Q...\E 用于引用正则表达式中的特殊字符。用反向引用替换的字符串已经按字面意思表示，而不是重新评估为正则表达式语法。

插入替换字符串的任何内容也是如此。您只需要 \Q...\E 或 Regex.Escape()，如果您有一个来自 regex-land 之外的变量，其中包含您想要插入*到*正则表达式中的文本，而不会意外地将其部分视为正则表达式表达式元字符。

# cakephp - 是否可以使用谷歌驱动 API 从我的 SAAS 网站中提供类似于 Yousendit 的服务

> ID：10325772
> 
> 赞同：0
> 
> 时间：2012-04-26T00:40:12.843
> 
> 标签：cakephp

我想从云帐户中提供文件发送服务，用户可以通过下载链接向他们的客户发送任何类型的大文件。当他们单击链接时，他们会看到用户徽标等，以投射专业图像和下载文件的控件。API 是否允许这种类型的集成。该站点是使用 Cakephp 构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:09:32.677

CakePHP 可以做到这一点。这个问题……很笼统。您可以实现任何存储提供程序。我编写[了一个 CakePHP 插件](https://github.com/burzum/FileStorage)，它使用 Gaufrette 存储库作为基础，使其可以通过 CakePHP 方式访问，并添加了一些附加功能。[目前还没有 Google Drive 适配器](https://github.com/KnpLabs/Gaufrette/tree/master/src/Gaufrette/Adapter)，但它很容易编写适配器。

但我不认为谷歌驱动器是你正确的选择：

> Drive API 是受欢迎的，但它非常受限制。这些限制在一定程度上是必要的，以确保用户数据的安全，但它们也有助于限制滥用谷歌云存储的可能性。例如，如果可以进行快速编程访问，您可以创建一个应用程序，自动将多个 Drive 帐户合并在一起，以提供（可能免费的）聚合存储空间。这些限制似乎限制您创建使用 Drive 作为其文档存储的 Web 应用程序，并且不允许您构建存储实用程序，这是真正创新的空间。

[资源](http://www.i-programmer.info/news/141-cloud-computing/4117-google-drive-api-an-opportunity.html)

# c++ - 带有向量指针的迭代器

> ID：10325774
> 
> 赞同：2
> 
> 时间：2012-04-26T00:40:40.860
> 
> 标签：c++, vector, iterator

我创建了一个指针向量

```
vector<Person*> *personVec = new vector<Person*>(); 
```

人包含：

```
getName();
getAge(); 
```

如果我尝试使用迭代器它不起作用..这是我使用它的方法：

```
 vector<Person>::iterator it;
    for(it = personVec->begin() ;
        it != personVec->end() ;
        ++it)
    {
        cout << it->getName() << endl;
    } 
```

我试过`vector<Person*>::iterator it;`了，但也没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T00:43:08.820

迭代器需要与容器的类型相同：

```
vector<Person>::iterator it; 
```

应该：

```
vector<Person*>::iterator it; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T00:48:29.460

```
 vector<Person*> *personVec = new vector<Person*>(); 
```

这是指向人员指针向量的指针

```
vector<Person>::iterator it;
for(it = personVec->begin() ; it != personVec->end() ; ++it)
{
    cout << it->getName() << endl;
} 
```

您的迭代器声明不正确您需要一个指向人员指针向量的迭代器

你有一个指向 person 向量的迭代器

```
vector<Person*>::iterator it;
for(it = personVec->begin() ; it != personVec->end() ; ++it)
{
    cout << (*it)->getName() << endl;
} 
```

[http://www.cplusplus.com/reference/std/iterator/](http://www.cplusplus.com/reference/std/iterator/)

和

[http://www.cplusplus.com/reference/stl/vector/begin/](http://www.cplusplus.com/reference/stl/vector/begin/)

# wcf - WCF CFClientBase 序列化 Stackoverflow 异常？

> ID：10325775
> 
> 赞同：0
> 
> 时间：2012-04-26T00:40:51.940
> 
> 标签：wcf, compact-framework, wcf-client, windows-mobile-6.5

当在 windows mobile 6.5 设备上运行在 CF 3.5 中的客户端代码尝试调用我们的 wcf 服务时，会发生以下错误......甚至在它发出调用之前。

奇怪的是，在 VS 中的调试器下运行并且手机通过 USB 电缆连接到 PC 时不会发生异常......调用按预期工作......数据按预期来回移动。 ..

但是当单独运行时，CFClientBase 代码会生成以下 Stackoverflow 异常？

所有服务调用都会发生这种情况，而不仅仅是一个......有什么想法吗？

```
StackOverflowException

   at System.Reflection.CustomAttribute.GetObject()
   at System.Reflection.CustomAttribute.CheckConsistencyAndCreateArray(CustomAttribute caItem, Type caType)
   at System.Reflection.CustomAttribute.GetCustomAttributes(MemberInfo member, Type caType, Boolean inherit)
   at System.Reflection.CustomAttribute.GetCustomAttributes(Type type, Type caType, Boolean inherit)
   at System.RuntimeType.GetCustomAttributes(Boolean inherit)
   at System.Xml.Serialization.TypeAttributes..ctor(ICustomAttributeProvider prov)
   at System.Xml.Serialization.TypeAttributes..ctor(ICustomAttributeProvider prov, XmlAttributes xmlAtts)

at System.Xml.Serialization.XmlSerializationReflector.AddType(Type type, Boolean encoded, String defaultNS, Boolean genericNullableArg)
   at System.Xml.Serialization.XmlSerializationReflector.FindType(Type type, Boolean encoded, Boolean genericNullableArg, String defaultNamespace)
   at System.Xml.Serialization.XmlSerializationReflector.FindType(Type type, Boolean encoded, String defaultNamespace)
   at System.Xml.Serialization.XmlSerializationReflector.ResolveLiteralTypeUsingDeclaredType(Type memberType, String defaultNS, LogicalType& type, LogicalType& elementType, Boolean& isArray)
   at System.Xml.Serialization.XmlSerializationReflector.ResolveLiteralType(String attrDataType, Type attrType, Type memberType, String defaultNS, Boolean& isArray, LogicalType& type, LogicalType& elementType)
   at System.Xml.Serialization.XmlSerializationReflector.ReflectXmlElementAttributes(Type memberType, LogicalMemberValue memberValue, String memberName, LiteralAttributes attrProv, AccessorCollection memberAccessors, String defaultName, String defaultNS, Type& serializingType, Boolean& shouldBeOrdered)
   at System.Xml.Serialization.XmlSerializationReflector.ReflectLiteralMemberValue(Type memberType, String memberName, LiteralAttributes attrProv, String defaultName, String defaultNS, IEntityFinder memberFinder, Boolean canRead, Boolean canWrite, Boolean& shouldBeOrdered)
   at System.Xml.Serialization.XmlSerializationReflector.ReflectMemberValue(Type memberType, ICustomAttributeProvider attrProv, String defaultName, String defaultNS, IEntityFinder memberFinder, Fetcher fetcher, Fixup fixup, MemberValueCollection members, Boolean encoded, Boolean canRead, Boolean canWrite, Byte& specialType, Boolean& shouldBeOrdered)
   at System.Xml.Serialization.XmlSerializationReflector.addComplexTypeMemberHelper(Type type, MemberInfo member, Boolean encoded, String defaultNS, Boolean& shouldBeOrdered, IEntityFinder choiceFinder, MemberValueCollection members, String typeNS, String defaultMemberNS, Int32& sequenceId)
   at System.Xml.Serialization.XmlSerializationReflector.AddComplexType(Type type, TypeAttributes attrs, String typeName, String typeNS, Boolean typeIsNullable, Boolean encoded, String defaultNS, Boolean genericNullableArg)
   at System.Xml.Serialization.XmlSerializationReflector.AddType(Type type, Boolean encoded, String defaultNS, Boolean genericNullableArg)
   at System.Xml.Serialization.XmlSerializationReflector.FindType(Type type, Boolean encoded, Boolean genericNullableArg, String defaultNamespace)
   at System.Xml.Serialization.XmlSerializationReflector.FindType(Type type, Boolean encoded, String defaultNamespace)
   at System.Xml.Serialization.XmlSerializationReflector.ReflectIncludedTypes()
   at System.Xml.Serialization.XmlSerializer..ctor(Type type, XmlAttributeOverrides overrides, Type[] extraTypes, XmlRootAttribute root, String defaultNamespace)
   at Microsoft.Tools.ServiceModel.CFClientBase`1.CFContractSerializer.createSerializer(XmlQualifiedName wrapper)
   at Microsoft.Tools.ServiceModel.CFClientBase`1.CFContractSerializer..ctor(CFContractSerializerInfo info)
   at Microsoft.Tools.ServiceModel.CFClientBase`1.GetContractSerializer(CFContractSerializerInfo info)
   at Microsoft.Tools.ServiceModel.CFClientBase`1.Invoke[TREQUEST,TRESPONSE](CFInvokeInfo info, LogIntoServerRequest request)
   at WCFService.WOService.WOServiceClient.LogIntoServer(LogIntoServerRequest request)
   at WCFService.WOService.WOServiceClient.LogIntoServer(SmartPhoneLoginCredentials creds)
   at RescoMobileApp.Common.Classes.loginClass.LogIntoServer() 
```

编辑

看来，即使我使用 DTO 来通过网络进行序列化......不知何故，我的 EF 实体类正在架构中发送？

并且由于某种原因，在进行服务调用时试图构建这些类型？

如何将类排除在架构之外？如果有对实体命名空间的引用，WCF 是否足以将这些类拉入架构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:24:16.100

通常，当您的对象图中存在递归问题时，会在序列化期间发生 stackoverflow 异常 - “无限查找”。所以，例如，你有一个`Class`，它有一个集合`Student`; 每个`Student`都有一些`Classes`，每个`Class`都有一个集合`Student`，以此类推。

在调试器下运行时不会出现您的问题，因此它可能不是我所描述的场景，但是有一个类似的场景，您有一个大型对象图并试图序列化整个图。我对紧凑型框架了解不多，但堆栈可能更小（因此设备上的 stackoverflow 而不是 Visual Studio 中的）。

你提出什么样的要求？显然您正在序列化大量数据；它有多深？您能否使请求使用较小的数据集？

我建议先尝试一个小得多的请求，然后检查您是否通过网络（或“空中”）发送了比所需更多的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:47:49.087

事实证明，一个实体类型暴露给了 WCF 服务接口，并且它没有用任何 DataContract 或 DataMember 属性修饰，因此 WCF 服务显然通过实体本身的导航属性拉入了命名空间中的每个实体。 .

将 DataContract 应用于类，然后仅在标量属性上应用 DataMembers，这让我得到了我所追求的东西，并省略了我不想序列化的所有其他类型

谢谢 ！

# ios - 调用 touchescancelled 而不是 touchesended

> ID：10325776
> 
> 赞同：2
> 
> 时间：2012-04-26T00:40:52.017
> 
> 标签：ios, cocoa-touch, uiview

我试图在触摸时点亮一个视图，并在触摸结束时取消它。在执行此操作时，我注意到当我从视图中抬起手指时，`- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event`不会调用方法，而是`- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event`在视图上调用方法。这是正常的行为吗？`touchesCancelled`如果由于系统问题（如内存不足警告）而取消触摸，我认为会调用它。我通过使用 touchesCancelled 完成了我的工作，但我想知道为什么它不能正确调用`touchesEnded`. 它是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-05-27T13:32:18.957

这不是正常行为。抬起手指时，应该调用 touchesEnded。

当您的视图在触摸期间被移除或发生系统事件（例如，当您的手指触摸屏幕时锁定手机）时，应该调用 touchesCancelled

请参阅[touchesEnded](https://developer.apple.com/documentation/uikit/uiresponder/1621084-touchesended)和[touchesCancelled](https://developer.apple.com/documentation/uikit/uiresponder/1621116-touchescancelled)的文档。

没有您的代码，就不可能知道发生了什么。但是，即使您设法按应有的方式调用了 touchEnded，您似乎也希望对这两种情况都做出响应。迅速：

```
class MyView: UIView {
    override func touchesEnded(_ touches: Set<UITouch>, with event: UIEvent?) {
        stopGlow()
    }

    override func touchesCancelled(_ touches: Set<UITouch>, with event: UIEvent?) {
        stopGlow()
    }

    private func stopGlow() {
        //Your code here...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:39:29.877

当您触摸该视图并抬起手指时，不应拖动手指。如果你这样做了，那么`touchesCancelled:`方法将被调用。所以我认为你的观点太小而无法触及。如果是，则制作一个大视图并重试。那时它会为你工作。

将此视为`comment`..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-16T06:06:24.847

您遗漏了太多信息，无法回答这个问题。重做或扔掉。同时，任何遇到此问题或其他与 touchesBegan/Moved/Ended/Cancelled 相关的意外行为的人都应该查看他们提取接触点的视图。如果您的接触点数据来自，比如说，，请`[touches.anyObject locationInView:touches.anyObject.view]`使用另一个对视图的引用，比如`self.view`或类似的。这将解决一大堆问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-25T11:20:02.273

我有一种情况，使用自动 UIModalPresentationOverFullScreen 呈现文档窗口会导致一个窗口可以上下移动一点，即使它是模态的。当我通过跟踪其父视图的触摸来移动子视图时，调用 touchesCancelled 就足够了。如果我抓住子视图的边缘并且手指移动得太快，显示的窗口会移动一点，它会取消触摸，这又称为 touchesCancelled。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-24T09:30:33.997

如果触摸在开始后的第一秒左右没有移动足够远，则看起来像 touchesCancelled 被调用而不是 touchesEnded。如果我做了一个小而快的动作，touchesCancelled 会触发，因为总动作不够大；如果我慢慢地做一个小动作，touchesCancelled 将在动作完成之前触发，因为 iOS 放弃等待看我是否会进一步移动。显然，iOS 正在对有多少移动是“重要的”做出一些判断，并将小移动视为取消的触摸。

如果有帮助，您可以简单地从 touchesCancelled 调用 touchesEnded。但是在非常快速的移动的情况下，直到超时时间才会调用它，因此在移动实际结束和触发 touchesCancelled 的时间之间可能会有延迟。

顺便说一句，我还注意到，如果你做了一个小的、快速的动作，然后抬起手指，然后开始另一个动作，在触发 touchesCancelled 之前，这不被认为是一个新的动作，并且 touchesBegan 不会触发。这使我的应用程序中的手写功能变得复杂，因为手写都是关于小而快的动作。

# javascript - 在 Nowjs 中传递带有回调参数的对象

> ID：10325778
> 
> 赞同：0
> 
> 时间：2012-04-26T00:41:18.087
> 
> 标签：javascript, node.js, nowjs-sockets

我读到 nowjs 支持传递对象以及字符串，但由于某种原因，我遇到了问题。这是他们网页中的 nowjs 示例，只有一个字符串被解析并且对我来说工作正常，

客户端

```
 now.test('foo', function(msg){
       console.log(msg);
  }); 
```

服务器端

```
everyone.now.test = function(val, callback){
  callback(val + ' bar!');
} 
```

下面的代码我尝试传递并反对 val ，

客户端

```
now.test('default', function(msg){
       console.log(Object.keys(msg));
       console.log(msg.GetEthernet());
  }); 
```

服务器端

```
everyone.now.test = function(val, callback){
    var profile = honeydConfig.GetProfile(val);
    console.log("Got eth " + profile.GetEthernet() + " for profile " + profileName);
    callback(profile);
} 
```

在服务器端，它打印 GetEthernet 函数的正确输出。在客户端，它只是说，“未捕获的 TypeError：Object # has no method 'GetEthernet'”并为 Object.keys 返回一个空数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:30:29.223

我没有使用 nowjs，但如果它可以在服务器和客户端之间发送*完整*的 JavaScript 对象，我会感到非常惊讶——即具有原型链和方法的对象。无论您使用什么框架，客户端和服务器之间传递的对象都需要序列化为字符串；对于 JavaScript，这通常意味着 JSON 序列化。如果 nowjs 文档说你可以传递一个对象，他们可能是指一个普通的 JavaScript 对象，一个 JSON 可序列化的对象。否则，您必须序列化对象方法并将它们发送给客户端重新解释，除了最琐碎的方法之外，这对所有方法都没有任何意义。

长话短说，尝试传递 的输出`profile.GetEthernet()`，而不是传递`profile`和调用方法。如果您需要传递更多关于 的数据`profile`，您可以创建一个具有各种方法输出的对象并将其发送。

# android - 在 2.2 上动画 ExpandableListView 孩子

> ID：10325792
> 
> 赞同：1
> 
> 时间：2012-04-26T00:42:44.883
> 
> 标签：android, listview, animation, expandablelistview

我正在尝试让我的 ExpandableListView 的孩子显示动画。由于我使用的是 Android 2.2 API，因此无法使用**expandGroup(int groupPos, boolean animate)**方法

我正在使用从这里获得的动画：[Android animate drop down/up view proper](https://stackoverflow.com/questions/9248930/android-animate-drop-down-up-view-proper)

我在我的 ExpandableListView 适配器的 getChildView 方法中将它设置为我的 convertView，如下所示：

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
        View convertView, ViewGroup parent) {

           ...

    ExpandCollapseAnimation animation = new ExpandCollapseAnimation(convertView, 500, 0);
    convertView.setAnimation(animation);
    return convertView;
} 
```

当我单击 ExpandableListView 的一个组时，它首先显示所有没有动画的子项，然后立即对所有子项执行我想要的展开动画。

我需要它来显示动画。任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:13:51.873

简而言之，它非常困难，很多人说它不可能做到这一点。这是android ListView/ExpandableListView 的少数缺点之一。如果您注意到，当您在 ExpandableListView 上调用 expandGroup(int groupPosition) 方法时，有一个方法具有第二个参数，即是否为它设置动画的布尔值。这第二种动画方法自 api 级别 14 以来就已经存在，这对我们这些想要在 android 2.3.3 及更低版本上为子视图设置动画的人没有多大帮助。

它显示孩子然后为它们设置动画的原因是因为在 Java 中，每一行都是逐行运行的。因此，您正在扩展组视图，然后下一行是动画行。java就是这样。但是要正确地为组视图的子视图设置动画，您必须覆盖 ExpandableListView 类本身中的一个方法。我不推荐它，因为它的工作量很大

我遇到的最好的解决方法是最初将孩子的高度设置为 0 像素。这样，当 android 操作系统展示您的视图时，它似乎不存在。然后你动画你的孩子从 0 像素高度到你想要的高度。希望有帮助！

# wpf - {binding} 和 {binding Account} 有什么区别？

> ID：10325794
> 
> 赞同：4
> 
> 时间：2012-04-26T00:42:57.543
> 
> 标签：wpf, mvvm-light

在这里，我对 {binding} 和 {binding Account} 感到困惑。何时仅使用简单的 {binding} 并且在下面的代码绑定中与属性名称绑定发生为 :Content="{Binding}"

```
 <Border Grid.Row="1" Grid.Column="0"
         Style="{StaticResource MainBorderStyle}" 
         Background="{StaticResource ResourceListGradientBrush}"
         BorderThickness="0,0,1,1"
         Padding="0">
     <StackPanel>
         <HeaderedContentControl 
             Content="{Binding}"
             ContentTemplate="{StaticResource CommandsTemplate}"/>
     </StackPanel>
 </Border> 
```

下面的代码绑定发生在哪里

```
Text="{Binding Path=Name, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"/> 
```

所以我想知道它们的用途和它们的区别。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T00:54:02.563

`{Binding}`将简单地绑定到`DataContext`. `{Binding Account}`将绑定到该`Account`对象上的属性。

在您的情况下，如果您有一个`ViewModel`针对根级别的集合，`DataContext`那么`Account`将是一个`Account`在`ViewModel`

你在哪里

```
<HeaderedContentControl
            Content="{Binding}"
            ContentTemplate="{StaticResource CommandsTemplate}"/> 
```

这一切所做的就是将`Content`of设置`HeaderedContentControl`为，`ViewModel`前提是您在`Window`or`UserControl`

```
 DataContext = yourViewModel; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T00:54:11.190

`{Binding}`将绑定到当前`DataContext`

`{Binding Account}`将绑定到`Account`当前的属性`DataContext`

# php - 用逗号添加数字字符串

> ID：10325798
> 
> 赞同：0
> 
> 时间：2012-04-26T00:43:18.503
> 
> 标签：php, mysql, string, numbers, add

我有一个循环，它从我的数据库中添加结果。这些值是这种格式的数字字符串：$$$$$$.$$ 我无法将结果相加并以相同的格式显示：

```
function totals (){ 
    $result = mysql_query("SELECT meta_value FROM postmeta WHERE postmeta.meta_key = 'Value'");
    $value = 0;
    while( $row = mysql_fetch_array($result) ) {
        $value = $value + str_replace(',', '', $row['meta_value']);
    }
    echo "Worth $".$value."!";
}; 
```

使用上述内容，我得到了价值 653987.32 美元！现在我需要重新插入逗号，所以我试试这个：

```
$value = number_format($value, 2, '.', ','); 
```

但后来我得到了价值 10,000.00 美元！

按要求输出：

```
 original: 5,000.00   numeric: 5 
    original: 0.00   numeric: 0 
    original: 100.00   numeric: 100 
    original: 19.95   numeric: 20 
    original: 28.00   numeric: 28 
    original: 3,777.00   numeric: 3 
    original: 2,500.00   numeric: 2 
    original: 575.00   numeric: 575 
    original: 4,000.00   numeric: 4 
    original: 100.00   numeric: 100 
    original: 1,500.00   numeric: 1 
    original: 0.00   numeric: 0 
    original: 343.50   numeric: 344 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 1,070.00   numeric: 1 
    original: 305.00   numeric: 305 
    original: 1,000.00   numeric: 1 
    original: 0.00   numeric: 0 
    original: 50.00   numeric: 50 
    original: 1144.99   numeric: 1,145 
    original: 900.00   numeric: 900 
    original: 3,750.00   numeric: 3 
    original: 1,750   numeric: 1 
    original: 50.00   numeric: 50 
    original: 50.00   numeric: 50 
    original: 50.00   numeric: 50 
    original: 200.00   numeric: 200 
    original: 619.00   numeric: 619 
    original: 200.00   numeric: 200 
    original: 50.00   numeric: 50 
    original: 0.00   numeric: 0 
    original: 2,699.00   numeric: 2 
    original: 0.00   numeric: 0 
    original: 10,000.00   numeric: 10 
    original: 500.00   numeric: 500 
    original: 186.00   numeric: 186 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 39,000.00   numeric: 39 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 8,330.00   numeric: 8 
    original: 0.00   numeric: 0 
    original: 50.00   numeric: 50 
    original: 50.00   numeric: 50 
    original: 100.00   numeric: 100 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 4,875.00   numeric: 4 
    original: 1,000.00   numeric: 1 
    original: 3,135.00   numeric: 3 
    original: 15,000.00   numeric: 15 
    original: 400.00   numeric: 400 
    original: 75.00   numeric: 75 
    original: 100.00   numeric: 100 
    original: 6,893.00   numeric: 6 
    original: 330.00   numeric: 330 
    original: 484.96   numeric: 485 
    original: 8,600.00   numeric: 8 
    original: 2,500.00   numeric: 2 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 6,150.00   numeric: 6 
    original: 500.00   numeric: 500 
    original: 275.00   numeric: 275 
    original: 900.00   numeric: 900 
    original: 750.00   numeric: 750 
    original: 450.00   numeric: 450 
    original: 4,600.00   numeric: 4 
    original: 299.50   numeric: 300 
    original: 250.00   numeric: 250 
    original: 825.00   numeric: 825 
    original: 750.00   numeric: 750 
    original: 50.00   numeric: 50 
    original: 2,000.00   numeric: 2 
    original: 16,000   numeric: 16 
    original: 2,600.00   numeric: 2 
    original: 240.00   numeric: 240 
    original: 4,500.00   numeric: 4 
    original: 0.00   numeric: 0 
    original: 6,000.00   numeric: 6 
    original: 0.00   numeric: 0 
    original: 3,000.00   numeric: 3 
    original: 0.00   numeric: 0 
    original: 15,000.00   numeric: 15 
    original: 45,987.24   numeric: 45 
    original: 1,100.00   numeric: 1 
    original: 20,000.00   numeric: 20 
    original: 5,100.00   numeric: 5 
    original: 12,000.00   numeric: 12 
    original: 0.00   numeric: 0 
    original: 550.00   numeric: 550 
    original: 50.00   numeric: 50 
    original: 50.00   numeric: 50 
    original: 150.00   numeric: 150 
    original: 4,500.00   numeric: 4 
    original: 1,500.00   numeric: 1 
    original: 0.00   numeric: 0 
    original: 1,758.00   numeric: 1 
    original: 450.00   numeric: 450 
    original: 400.00   numeric: 400 
    original: 28.00   numeric: 28 
    original: 20.00   numeric: 20 
    original: 50.00   numeric: 50 
    original: 20.00   numeric: 20 
    original: 22.00   numeric: 22 
    original: 99.00   numeric: 99 
    original: 500.00   numeric: 500 
    original: 500.00   numeric: 500 
    original: 33,080.00   numeric: 33 
    original: 3,000.00   numeric: 3 
    original: 5,000.00   numeric: 5 
    original: 25,000.00   numeric: 25 
    original: 25,750.00   numeric: 25 
    original: 5,000.00   numeric: 5 
    original: 1,800.00   numeric: 1 
    original: 419.75   numeric: 420 
    original: 600.00   numeric: 600 
    original: 130.00   numeric: 130 
    original: 1,000.00   numeric: 1 
    original: 650.00   numeric: 650 
    original: 650.00   numeric: 650 
    original: 285.00   numeric: 285 
    original: 949.00   numeric: 949 
    original: 500.00   numeric: 500 
    original: 798.80   numeric: 799 
    original: 279.50   numeric: 280 
    original: 369.90   numeric: 370 
    original: 0.00   numeric: 0 
    original: 5,000.00   numeric: 5 
    original: 1,995.00   numeric: 1 
    original: 1,800.00   numeric: 1 
    original: 0.00   numeric: 0 
    original: 50.00   numeric: 50 
    original: 50.00   numeric: 50 
    original: 50.00   numeric: 50 
    original: 3,316.00   numeric: 3 
    original: 50.00   numeric: 50 
    original: 50.00   numeric: 50 
    original: 0.00   numeric: 0 
    original: 50.00   numeric: 50 
    original: 17,182.28   numeric: 17 
    original: 30,000.00   numeric: 30 
    original: 0.00   numeric: 0 
    original: 0.00   numeric: 0 
    original: 880.00   numeric: 880 
    original: 12.00   numeric: 12 
    original: 100.00   numeric: 100 
    original: 100.00   numeric: 100 
    original: 100.00   numeric: 100 
    original: 5,600.00   numeric: 5 
    original: 1,600.00   numeric: 1 
    original: 100.00   numeric: 100 
    original: 14.95   numeric: 15 
    original: 6,000.00   numeric: 6 
    original: 7,400.00   numeric: 7 
    original: 750.00   numeric: 750 
    original: 1,575.00   numeric: 1 
    original: 50.00   numeric: 50 
    original: 3,500.00   numeric: 3 
    original: 5,000.00   numeric: 5 
    original: 1,000.00   numeric: 1 
    original: 6,500.00   numeric: 6 
    original: 14,375.00   numeric: 14 
    original: 9,500.00   numeric: 9 
    original: 91,343.00   numeric: 91 
    original: 22,610.00   numeric: 22 
    original: 15,000.00   numeric: 15 
    original: 10,000.00   numeric: 10 
```

显然有些不对劲。任何人都可以帮忙吗？

```
numeric total: 661,379 Original total: 661379.32 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:49:10.560

它输出什么？听起来您的数字可能太大而无法容纳 31 位，但在我看到您的确切输出之前很难知道。

你确定你所有的`$row['meta_value']`值都是带逗号的直数吗？尝试这样做：

```
while($row = mysql_fetch_array($result)) {
    echo "Value: {$row['meta_value']}\n";
    $value += str_replace(',', '', $row['meta_value']);
}

echo "final value: $value\n";
echo "formatted: ".number_format($value, 2)."\n"; 
```

我想知道是否某些值不符合您的预期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:19:50.530

您也可以将值转换为浮点数：

```
(float)str_replace(',','',$row['meta_value']) 
```

**编辑：**

完整代码：

```
function totals () { 
    $result = mysql_query("SELECT meta_value FROM postmeta WHERE postmeta.meta_key = 'Value'");
    $value = 0;
    while ($row = mysql_fetch_array($result)) {
        $value += (float)str_replace(',', '', $row['meta_value']);
    }
    echo "Worth \$$value!";
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T01:24:05.570

您还可以从查询本身正确格式化它们并在您想要的字段上操作：

```
SELECT replace(meta_value, ',', '') as number_value, meta_value as original_value
FROM postmeta
WHERE postmeta.meta_key = 'Value' 
```

# php - php没有读取正确数量的空格，将1+压缩为1

> ID：10325800
> 
> 赞同：0
> 
> 时间：2012-04-26T00:43:31.157
> 
> 标签：php, spaces

我正在阅读在 php 脚本中使用 gzip 压缩的日志文件。文本中没有遗漏任何内容，但多个空格的所有实例都已减少为一个空格。

以下是输出示例：

```
+-----------------------------------------------------------------------------+
| Exit Status : 1 | 
```

当它应该看起来像这样时：

```
+-----------------------------------------------------------------------------+
| Exit Status : 1                                                             | 
```

这是我认为脚本的相关部分：

```
$lines = gzfile("$filename.gz");

# If the file is empty, say that to be more user friendly
if($lines == "") {
    echo "File empty";
} else {
    echo "<div style=\"font-family:courier new;font-size:12pt\">";
    foreach ($lines as $line) {
        echo nl2br($line);
    }
    echo "</div>";
} 
```

我也试过没有nl2br，只是作为一个测试，空格仍然减少到一个。该文件是完整的，因为我在终端中使用 zcat 查看它只是为了确保某些东西实际上并没有错误地写入文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:47:27.433

由于您正在输出 HTML 标记，我假设您正在 Web 浏览器中查看 PHP 脚本的输出。如果是这种情况，那么您鼓励的是 HTML，而不是 PHP。具体来说，Web 浏览器将任何一片空白都渲染为一个空格。这就是 HTML 的工作原理。

要查看所有空格，您需要将输出包装在`<pre></pre>`标签中。

# objective-c - UIButton：单击时拉伸的图像

> ID：10325804
> 
> 赞同：1
> 
> 时间：2012-04-26T00:44:02.713
> 
> 标签：objective-c, image, uibutton, imageview

我正在使用 EGOImageButton 来处理图像的异步下载。我使用 uibutton.imageView.contentMode 而不是 uibutton.contentMode 将 contentMode 设置为 Aspect Fit，因为它在 iPhone 上不起作用，所以我使用了前者。当我单击它时，按钮内的图像会拉伸到按钮的大小。有什么办法可以防止它被拉长？

请帮忙

# java - Android编程谷歌地图J2MEMapRouteAndroidEx代码——负纬度/经度错误

> ID：10325808
> 
> 赞同：1
> 
> 时间：2012-04-26T00:44:56.553
> 
> 标签：java, android, nullpointerexception

我下载了J2MEMapRouteAndroidEx的包（链接：http://code.google.com/p/j2memaprouteprovider/source/browse/trunk/J2MEMapRouteAndroidEx/src/org/ci/geo/route/RoadProvider.java）。

但是当我将纬度/经度重置为负值时它会报告错误。错误是NullPointException ...经过对Logcat的调查，我认为它表明Road类对象没有真正被赋值，因此它的数组变量是无效的。

有人可以帮忙吗？以前有人遇到过同样的问题吗？

# .net - DateTime.Parse DD/MM/YYYY 24 小时制

> ID：10325813
> 
> 赞同：12
> 
> 时间：2012-04-26T00:46:12.200
> 
> 标签：.net, datetime

DateTime.Parse 失败

```
 15/08/2000 16:58 
```

有什么想法吗？

我需要解析日期并获得一些国际数据。

DD/MM/YYYY 不会翻转到 24 小时制

MM/DD/YYYY 将接受 24 小时制

2000 年 8 月 15 日下午 4:58 将解析

从 Kibbee 的回答中，我看到了使用其他文化。我使用正则表达式来确定它是否是 dd/MM，如果是，则使用文化 fr-FR。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-26T00:51:47.860

尝试[`DateTime.ParseExact()`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)：

```
var result = DateTime.ParseExact(dateString,
                                 "dd/MM/yyyy HH:mm",
                                 new CultureInfo("en-US")); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-26T00:49:08.680

如果您知道您期望日期的确切格式，您可能应该使用[DateTime.ParseExact来解析日期。出于您的目的，以下内容可能会起作用。](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

```
string dateString, format;  
DateTime result;
CultureInfo provider = CultureInfo.InvariantCulture;

dateString = "15/08/2000 16:58"
format = "dd/MM/yyyy HH:mm"
result = DateTime.ParseExact(dateString, format, provider); 
```

改到上面。将 hh 更改为 HH 因为 HH 表示 24 小时制。如果您不使用前导零，则只需使用 H。有关创建格式字符串的更多信息，[请参阅本文](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.aspx)。

同样来自链接的 MSDN 文章，看起来格式“g”应该可以工作。

```
dateString = "15/06/2008 08:30";
format = "g";
CultureInfo provider = new CultureInfo("fr-FR");
DateTime result = DateTime.ParseExact(dateString, format, provider); 
```

# javascript - 估计浏览器 JS 引擎速度以有条件地禁用动画

> ID：10325821
> 
> 赞同：5
> 
> 时间：2012-04-26T00:47:48.063
> 
> 标签：javascript, performance, optimization, browser

是否有标准（接受/简单/高性能）方法来确定客户端机器呈现 javascript 的速度？

当我在其他选项卡上运行网络应用程序（视频等）时，我的 JS 动画会慢到爬行。

如果我能从我的 JS 中检测到缓慢，我会使用更简单的动画来提供更好的用户体验。

**更新：**

为所有人删除动画并不是答案。我说的是最简单的动画，它会根据浏览器/计算机而结结巴巴。如果我能检测到缓慢的程度，我会简单地禁用它们。

这与具有动态图形质量的视频游戏相同：您希望取悦使用旧电脑的人，而不是惩罚那些拥有额外处理能力的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T13:06:30.270

我知道这个问题很老，但我只是偶然发现了它。最简单的方法是执行一个长循环并测量开始和结束时间。这应该让您对机器的 Javascript 性能有所了解。

请记住，这可能会延迟页面加载，因此您可能希望将结果存储在 cookie 中，因此不会在每次访问页面时进行测量。

就像是：

```
var starttime = new Date();
for( var i=0; i<1000000; i++ ) ;
var dt = new Date() - starttime; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:02:28.830

一个技巧是禁用那些隐藏的动画。如果它们位于另一个未聚焦的选项卡上，那么保持它们动画有什么用？

另一个是将动画保持在最低限度。我假设您在 DOM 上，并且 DOM 操作很昂贵。也将它们保持在最低限度。

我在某处得到的一个提示是，如果您正在使用图像动画操作，请考虑使用画布代替，这样您就不会在 DOM 上进行操作。

另外，考虑渐进增强。保持您的功能简单，并逐步处理复杂的事情。每次添加新内容时，都使用简单的功能作为基准。这样，您可以轻松确定导致问题的原因并相应地修复它。

* * *

您应该首先解决的主要问题是*为什么*它很慢，而不是当它很慢时。

# objective-c - iTunes Connect 发送有关图标文件问题的电子邮件，如何解决？

> ID：10325839
> 
> 赞同：2
> 
> 时间：2012-04-26T00:49:54.820
> 
> 标签：objective-c, ios, app-store-connect

这是电子邮件：

*尊敬的开发人员， 我们发现您最近提交的“Bla”二进制文件存在一个或多个问题。在审核您的应用之前，必须更正以下问题： 图标文件损坏 - 图标文件 72 x 72.png 似乎已损坏。更正这些问题后，请转到“版本详细信息”页面并单击“准备上传二进制文件”。继续提交过程，直到应用程序状态为等待上传，然后使用 Application Loader 上传更正后的二进制文件。*

我已更改文件并重新上传应用程序，但我再次收到电子邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T01:20:57.393

您可以在预览中打开文件，然后选择“工具”->“显示检查器”吗？该文件可能使用了一些 Apple 不喜欢的 PNG 格式功能。他们想要 RGB，8 位深度，没有 alpha。请参阅[自定义图标和图像创建指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW2)。

为了比较，这里是预览检查器的屏幕截图，显示了被接受的应用程序的图标属性。如果您不确定，请为您的图片属性发布类似的屏幕截图。

![PNG预览检查器，显示“常规”选项卡](../Images/b0ef75274f1b504c5201118e4b6659b5.png)

![PNG预览检查器，显示PNG选项卡](../Images/cc611269e872e0c16a715957766288b3.png)

“每米像素数”部分可能会出现，也可能不会出现。五分钟前我第一次打开一些图标文件时它不存在，现在它出现在我打开的每个 PNG 文件中。诡异的。

**编辑**：还检查“Info.plist”中的图标条目，或目标的“信息”选项卡。（这些*不是*一回事，因为我花了几个小时才发现。“信息”选项卡中的设置会覆盖您的“信息.plist”。）从 iOS 5.1 SDK 开始，这些包括**图标文件**（字符串）、**图标文件**（一个数组）和**图标文件（iOS 5）**（包含至少一个包含数组的字典的字典）。XCode 似乎也将您的启动图像添加到此列表中。不要依赖它来保持列表整洁——我有时会在我的文件中发现过时的文件名。

为了进一步比较，下面是一个有效应用程序的 Info.plist 中的内容。您的文件名可能不同，只要它们与项目中的资源匹配即可。

![XCode Info.plist 图标条目](../Images/7e51a4025950cfb905d7102f622bca51.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T17:49:04.690

正如迈克尔·道特曼所说。

确保在构建设置中关闭“压缩 png”。

谢谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T05:43:20.910

我是应用 Pillboxie 的开发者。我和你有同样的问题，但我相信我终于找到了解决办法。

在继续我的建议之前，请确保您的 Info.plist 和所有图标文件名*完全*符合 Apple 的要求。继续检查文档以确保您是最新的，但 Dondragmer 的建议在我看来是正确的。

我在 Photoshop 中创建了所有图像资源，包括应用程序图标，并以 PNG-24 格式导出到网络。因为 Pillboxie 有很多图像，所以在构建设置中将“压缩 png”设置为 YES 可以帮助我节省几兆字节的空间。正如 Evaristoyok 建议的那样，在我尝试关闭此压缩之前，我遇到了与您相同的错误。但是，我的应用程序跃升了几个 mb。我希望找到更好的方法。

今晚我找到了以下链接：[文章](http://www.iphoneappdevelopment.hk/error-message-corrupt-icon-file-the-icon-file-appears-to-be-corrupt/)。在其中，作者建议确保在“保存为 Web 和设备”对话框窗口中导出图像时，不要在 Photoshop 中选择“隔行扫描”。我重新导出了禁用此功能的所有图标和启动图像，它解决了我的问题。我能够提交我的应用程序*并*仍然启用 png 压缩。

# r - 固化融化的数据框？

> ID：10325840
> 
> 赞同：7
> 
> 时间：2012-04-26T00:49:55.647
> 
> 标签：r, reshape2

假设我有一个`data.frame`看起来像这样的融化：

```
 variable       value
1         A -0.19933093
2         A -1.19043346
3         A -1.32248172
4         A -1.98644507
5         A -0.07930953
6         B -0.10074686
7         B  0.72451483
8         B -0.40914044
9         B  0.02913376
10        B  0.16062491 
```

我如何得到它：

```
 A       B
-0.19933093 -0.10074686
-1.19043346  0.72451483
-1.32248172 -0.40914044
-1.98644507  0.02913376
-0.07930953  0.16062491 
```

似乎微不足道，但我正在回答一个空白。`dcast`并且`acast`似乎没有这样做。我的目标是在更大的数据集上执行此操作，并将最终产品转换为`matrix`列名作为变量名的列名。我试着玩`daply`and `laply`（在融化之前）没有太多运气。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T01:10:07.003

尝试`unstack`：

```
dat <- read.table(text = "variable       value
1         A -0.19933093
2         A -1.19043346
3         A -1.32248172
4         A -1.98644507
5         A -0.07930953
6         B -0.10074686
7         B  0.72451483
8         B -0.40914044
9         B  0.02913376
10        B  0.16062491",sep = "",header = TRUE)

> unstack(dat,value~variable)

            A           B
1 -0.19933093 -0.10074686
2 -1.19043346  0.72451483
3 -1.32248172 -0.40914044
4 -1.98644507  0.02913376
5 -0.07930953  0.16062491 
```

但我应该补充一点，我很想知道如何使用 来做到这一点`dcast`，因为我也反复尝试过但无法做到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T02:06:43.583

好的，从包含 id 的宽格式数据框开始。`melt()`它给出长格式，然后`dcast()`返回原始数据框。

```
library(reshape2)
df = read.table(text = "id   A   B
1  1 -0.19933093 -0.10074686
2  2 -1.19043346  0.72451483
3  3 -1.32248172 -0.40914044
4  4 -1.98644507  0.02913376
5  5 -0.07930953  0.16062491", sep = "", header = TRUE)

df

df.melt = melt(df, "id")
df.melt

df.original = dcast(df.melt, id~variable)

df.original 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T01:48:31.907

用于`acast()`返回一个矩阵。它需要一个 id 变量。

```
library(reshape2)
dat <- read.table(text = "variable       value
1         A -0.19933093
2         A -1.19043346
3         A -1.32248172
4         A -1.98644507
5         A -0.07930953
6         B -0.10074686
7         B  0.72451483
8         B -0.40914044
9         B  0.02913376
10        B  0.16062491",sep = "",header = TRUE)

dat$id = rep(1:5, 2)
dat

acast(dat, id~variable) 
```

# forms-authentication - 通过 Web API 使用表单身份验证

> ID：10325841
> 
> 赞同：6
> 
> 时间：2012-04-26T00:50:03.960
> 
> 标签：forms-authentication, webforms, asp.net-web-api

我有一个 Web 表单应用程序，我正在尝试使用新的 Web API 测试版。我公开的端点应该只对站点的经过身份验证的用户可用，因为它们是供 AJAX 使用的。在我的 web.config 中，我将其设置为拒绝所有用户，除非他们经过身份验证。这与 Web 表单一样有效，但不适用于 MVC 或 Web API。

我已经创建了一个 MVC 控制器和 Web API 控制器来进行测试。我看到的是，在我进行身份验证之前，我无法访问 MVC 或 Web API 端点，但随后我可以继续访问这些端点，即使在关闭浏览器并回收应用程序池之后也是如此。但是，如果我点击了我的一个 aspx 页面，它会将我发送回我的登录页面，那么在我再次进行身份验证之前，我无法点击 MVC 或 Web API 端点。

会话失效后，MVC 和 Web API 无法像我的 ASPX 页面那样运行是否有原因？从外观上看，只有 ASPX 请求正在清除我的表单身份验证 cookie，我假设这是这里的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:52:02.963

如果您的 Web API 只是在现有的 MVC 应用程序中使用，我的建议是`AuthorizeAttribute`为您的 MVC 和 WebApi 控制器创建一个自定义过滤器；我创建了一个我称之为“AuthorizeSafe”的过滤器，它默认将所有内容列入黑名单，这样如果您忘记将授权属性应用于控制器或方法，您将被拒绝访问（我认为默认的白名单方法是不安全的）。

提供了两个属性类供您扩展；`System.Web.Mvc.AuthorizeAttribute`和`System.Web.Http.AuthorizeAttribute`; 前者与 MVC 表单身份验证一起使用，后者也与表单身份验证挂钩（这非常好，因为这意味着您不必为 API 身份验证和授权构建一个完全独立的身份验证架构）。这就是我想出的 - 默认情况下它拒绝访问所有 MVC 控制器/动作和 WebApi 控制器/动作，除非应用了`AllowAnonymous`or`AuthorizeSafe`属性。首先，一个帮助自定义属性的扩展方法：

```
public static class CustomAttributeProviderExtensions {
    public static List<T> GetCustomAttributes<T>(this ICustomAttributeProvider provider, bool inherit) where T : Attribute {
        List<T> attrs = new List<T>();

        foreach (object attr in provider.GetCustomAttributes(typeof(T), false)) {
            if (attr is T) {
                attrs.Add(attr as T);
            }
        }

        return attrs;
    }
} 
```

`AuthorizeAttribute`两个扩展都使用的授权助手类：

```
public static class AuthorizeSafeHelper {
    public static AuthActionToTake DoSafeAuthorization(bool anyAllowAnonymousOnAction, bool anyAllowAnonymousOnController, List<AuthorizeSafeAttribute> authorizeSafeOnAction, List<AuthorizeSafeAttribute> authorizeSafeOnController, out string rolesString) {
        rolesString = null;

        // If AllowAnonymousAttribute applied to action or controller, skip authorization
        if (anyAllowAnonymousOnAction || anyAllowAnonymousOnController) {
            return AuthActionToTake.SkipAuthorization;
        }

        bool foundRoles = false;
        if (authorizeSafeOnAction.Count > 0) {
            AuthorizeSafeAttribute foundAttr = (AuthorizeSafeAttribute)(authorizeSafeOnAction.First());
            foundRoles = true;
            rolesString = foundAttr.Roles;
        }
        else if (authorizeSafeOnController.Count > 0) {
            AuthorizeSafeAttribute foundAttr = (AuthorizeSafeAttribute)(authorizeSafeOnController.First());
            foundRoles = true;
            rolesString = foundAttr.Roles;
        }

        if (foundRoles && !string.IsNullOrWhiteSpace(rolesString)) {
            // Found valid roles string; use it as our own Roles property and auth normally
            return AuthActionToTake.NormalAuthorization;
        }
        else {
            // Didn't find valid roles string; DENY all access by default
            return AuthActionToTake.Unauthorized;
        }
    }
}

public enum AuthActionToTake {
    SkipAuthorization,
    NormalAuthorization,
    Unauthorized,
} 
```

两个扩展类本身：

```
public sealed class AuthorizeSafeFilter : System.Web.Mvc.AuthorizeAttribute {
    public override void OnAuthorization(AuthorizationContext filterContext) {
        if (!string.IsNullOrEmpty(this.Roles) || !string.IsNullOrEmpty(this.Users)) {
            throw new Exception("This class is intended to be applied to an MVC web API application as a global filter in RegisterWebApiFilters, not applied to individual actions/controllers.  Use the AuthorizeSafeAttribute with individual actions/controllers.");
        }

        string rolesString;
        AuthActionToTake action = AuthorizeSafeHelper.DoSafeAuthorization(
            filterContext.ActionDescriptor.GetCustomAttributes<AllowAnonymousAttribute>(false).Count() > 0,
            filterContext.ActionDescriptor.ControllerDescriptor.GetCustomAttributes<AllowAnonymousAttribute>(false).Count() > 0,
            filterContext.ActionDescriptor.GetCustomAttributes<AuthorizeSafeAttribute>(false),
            filterContext.ActionDescriptor.ControllerDescriptor.GetCustomAttributes<AuthorizeSafeAttribute>(false),
            out rolesString
        );

        string rolesBackup = this.Roles;
        try {
            switch (action) {
                case AuthActionToTake.SkipAuthorization:
                    return;

                case AuthActionToTake.NormalAuthorization:
                    this.Roles = rolesString;
                    base.OnAuthorization(filterContext);
                    return;

                case AuthActionToTake.Unauthorized:
                    filterContext.Result = new HttpUnauthorizedResult();
                    return;
            }
        }
        finally {
            this.Roles = rolesBackup;
        }
    }
}

public sealed class AuthorizeSafeApiFilter : System.Web.Http.AuthorizeAttribute {
    public override void OnAuthorization(HttpActionContext actionContext) {
        if (!string.IsNullOrEmpty(this.Roles) || !string.IsNullOrEmpty(this.Users)) {
            throw new Exception("This class is intended to be applied to an MVC web API application as a global filter in RegisterWebApiFilters, not applied to individual actions/controllers.  Use the AuthorizeSafeAttribute with individual actions/controllers.");
        }

        string rolesString;
        AuthActionToTake action = AuthorizeSafeHelper.DoSafeAuthorization(
            actionContext.ActionDescriptor.GetCustomAttributes<AllowAnonymousAttribute>().Count > 0,
            actionContext.ActionDescriptor.ControllerDescriptor.GetCustomAttributes<AllowAnonymousAttribute>().Count > 0,
            actionContext.ActionDescriptor.GetCustomAttributes<AuthorizeSafeAttribute>().ToList(),
            actionContext.ActionDescriptor.ControllerDescriptor.GetCustomAttributes<AuthorizeSafeAttribute>().ToList(),
            out rolesString
        );

        string rolesBackup = this.Roles;
        try {
            switch (action) {
                case AuthActionToTake.SkipAuthorization:
                    return;

                case AuthActionToTake.NormalAuthorization:
                    this.Roles = rolesString;
                    base.OnAuthorization(actionContext);
                    return;

                case AuthActionToTake.Unauthorized:
                    HttpRequestMessage request = actionContext.Request;
                    actionContext.Response = request.CreateResponse(HttpStatusCode.Unauthorized);
                    return;
            }
        }
        finally {
            this.Roles = rolesBackup;
        }
    }
} 
```

最后，可以应用于方法/控制器以允许特定角色的用户访问它们的属性：

```
public class AuthorizeSafeAttribute : Attribute {
    public string Roles { get; set; }
} 
```

然后我们从 Global.asax 全局注册我们的“AuthorizeSafe”过滤器：

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters) {
        // Make everything require authorization by default (whitelist approach)
        filters.Add(new AuthorizeSafeFilter());
    }

    public static void RegisterWebApiFilters(HttpFilterCollection filters) {
        // Make everything require authorization by default (whitelist approach)
        filters.Add(new AuthorizeSafeApiFilter());
    } 
```

然后打开一个动作到例如。匿名访问或仅管理员访问：

```
public class AccountController : System.Web.Mvc.Controller {
    // GET: /Account/Login
    [AllowAnonymous]
    public ActionResult Login(string returnUrl) {
        // ...
    }
}

public class TestApiController : System.Web.Http.ApiController {
    // GET API/TestApi
    [AuthorizeSafe(Roles="Admin")]
    public IEnumerable<TestModel> Get() {
        return new TestModel[] {
            new TestModel { TestId = 123, TestValue = "Model for ID 123" },
            new TestModel { TestId = 234, TestValue = "Model for ID 234" },
            new TestModel { TestId = 345, TestValue = "Model for ID 345" }
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:27:50.343

它应该在普通 MVC 控制器中工作。你只需要用 [Authorize] 属性来装饰动作。

在 web api 中，您需要具有自定义授权。您可能会发现以下链接很有帮助。

[http://www.codeproject.com/Tips/376810/ASP-NET-WEB-API-Custom-Authorize-and-Exception-Han](http://www.codeproject.com/Tips/376810/ASP-NET-WEB-API-Custom-Authorize-and-Exception-Han)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T10:39:14.690

如果您使用的是 MVC Authorize 属性，它对 WebAPI 的工作方式应该与普通 MVC 控制器的工作方式相同。

# gcc - operator= 的正确签名是什么？

> ID：10325842
> 
> 赞同：2
> 
> 时间：2012-04-26T00:50:11.307
> 
> 标签：gcc, g++

我已经将我的开发机器更新到刚刚发布的 Ubuntu 12.04 版本，这显然给了我一个新版本的 GCC (4.6.3)。现在，用于编译的源代码给了我关于编译器生成的赋值运算符的错误：

```
source/local.cpp:1185:59: 错误：'olddata = stype::block_t((*(const oc::json_t*)(& local::database_t::getData(const sdata) 中的 'operator=' 不匹配::uuid_t&, size_t*, sdata::override::type_t)((* & uuid), (& otype), (sdata::override::type_t)1u))), 0)'
来源/local.cpp:1185:59：注意：候选人是：
source/sdata/block.hpp:13:7: 注意: sdata::block_t& sdata::block_t::operator=(sdata::block_t&)
source/sdata/block.hpp:13:7: 注意：参数 1 没有从 'sdata::block_t' 到 'sdata::block_t&' 的已知转换

```

据我所知，编译器生成的`operator=`应该有签名`foo& operator=(const foo&)`，而不是`foo& operator=(foo&)`. 这是这个版本的 GCC 中的一个错误，还是我的理解错误？我在 GCC bug-tracker 上找不到任何对此的引用，而且我不敢相信没有其他人遇到过它。

（谷歌并没有让搜索包含等号的术语变得容易，但耐心地我在[这里](http://lists.freedesktop.org/archives/libreoffice/2011-December/022761.html)找到了一个对这个问题的引用，讨论 GCC 4.6.2。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:48:44.520

我曾经做过的一个字符串类的例子：

```
String& String::operator=(const String& other)  {       
    // checking for self-assignment (pointer-compare)       
    if(this != &other) {
        delete[] s_buffer;
        s_length = other.Length();
        s_buffer = new char[s_length+1];
        memcpy(s_buffer,other.c_str(),s_length+1);
    }
    return *this;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T01:37:15.613

我不知道什么是正确的，但 GCC 的行为肯定会导致问题。我称之为错误。

奇怪的是，似乎并不是每个班级都会发生这种情况，只有少数几个，所以在我想出一个简单的例子之前，我无法真正提交错误报告。

# windows - vb.net 窗口启动的代码是什么？

> ID：10325844
> 
> 赞同：0
> 
> 时间：2012-04-26T00:50:38.857
> 
> 标签：windows, vb.net

我用 vb.net 制作了一个程序，我希望该程序在 Windows 启动时运行。
我不知道代码。
我希望该程序在他/她安装程序时添加窗口启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:57:04.377

只需将程序的快捷方式添加到开始 -> 所有程序 -> 启动。

或者向注册表中的“运行”键添加一个条目 -有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/aa376977(v=vs.85).aspx 。](http://msdn.microsoft.com/en-us/library/aa376977(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T02:33:42.510

您可以使用以下代码将其添加到注册表

```
 My.Computer.Registry.LocalMachine.OpenSubKey("SOFTWARE\Microsoft\Windows\CurrentVersion\Run", True).SetValue(Application.ProductName, Application.ExecutablePath)
    End Sub 
```

你可以使用删除它

```
My.Computer.Registry.LocalMachine.OpenSubKey("SOFTWARE\Microsoft\Windows\CurrentVersion\Run", True).DeleteValue(Application.ProductName) 
```

上面的代码会将它添加到所有用户。您可以在以下键中将其添加到当前用户

```
HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Run 
```

# php - 如何匹配多个 ID 中的一个 ID？

> ID：10325845
> 
> 赞同：0
> 
> 时间：2012-04-26T00:50:42.243
> 
> 标签：php, security, matching, verification

我在下面有这个脚本，它扫描允许查看帖子的用户。我如何更新它，以便它将查看人员的 ID 与存储在该字段中的 ID 匹配。如果匹配，则有效，否则无效。存储的条目将类似于 99394david、324234smith、34343jane。所以我拥有的这个脚本不匹配它。

```
 $kit = mysql_real_escape_string($_GET['id']);

$sql="SELECT `Who_can_see` from `posts` where `post_id` = '$kit'";  
    $result=mysql_query($sql);

    $query = mysql_query($sql) or die ("Error: ".mysql_error());

    if ($result == "")
    {
    echo "";
    }
    echo "";

    $rows = mysql_num_rows($result);

    if($rows == 0)
    {
    print("");

    }
    elseif($rows > 0)
    {
    while($row = mysql_fetch_array($query))
    {
    $userallowed = htmlspecialchars($row['who_can_see']);
    }
    }

    //$personid is drawn from the database.  its the id of the
     person viewing the link.

    if ( $userallowed == $personid ) {
echo("allowed");
    } else {
echo("not allowed");
    die();
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:01:22.687

我会简单地将其添加到查询中（尽管我对您如何准确填写表格`$personid`有疑问...）：`posts`

```
$sql="SELECT `Who_can_see` from `posts`
      where `post_id` = '$kit'
        AND `Who_can_see` = '$personid'"; 
```

如果您的结果包含一行，则允许用户查看帖子。

顺便说一句，我还建议使用准备好的语句来避免任何潜在的 sql 注入问题。

**编辑：**基于`Who_can_see`可以包含逗号分隔的条目列表的事实，您可以使用原始脚本，并且只需更改匹配方式，例如使用[`stripos`](http://www.php.net/manual/en/function.stripos.php).

```
if ( stripos($userallowed, $personid) !== false ) {
    // $personid is found in $userallowed
    echo("allowed");
} else {
    echo("not allowed");
    die();
} 
```

# android - 从一组非常稀疏的 wifi 数据生成 3d 网格

> ID：10325847
> 
> 赞同：1
> 
> 时间：2012-04-26T00:51:06.127
> 
> 标签：android, android-wifi, google-fusion-tables, triangulation, android-location

我试图从一组非常稀疏的数据中绘制出无线网络的信号强度，并且想知道在数学上是否可以做到这一点。

想象一下，我们在手机上安装了一些应用程序，每部手机都将它们的位置和信号强度上传到某个中央数据库。目标是利用这个非常稀疏的图表并尝试绘制信号强度，然后能够在二维或三个维度上猜测无线网络的有用范围。我认为我们还应该想象没有人直接站在接入点旁边，因此中心将是未知的。非常粗略地说，在我们生成一个有用的无线网络网格以绘制多边形之前，我们需要什么密度的点？

您可以期望在 DBM 中测量的无线网络强度与距离成反比和线性关系。我想知道这是否可以用来帮助为 Delaunay 转换生成额外的点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:30:52.863

> 您可以期望在 DBM 中测量的无线网络强度与距离成反比和线性关系

实际上，在射频测试范围之外的任何情况下，您都不能期望无线强度与距离成正比。尤其是在室内，使用 2.4G RF，您将需要处理多径衰落和阴影衰落。

这里有一些信息。 [http://en.wikipedia.org/wiki/Fading](http://en.wikipedia.org/wiki/Fading)

# ios - 如果视图以编程方式离开屏幕，则不会出现最后一次触摸事件

> ID：10325852
> 
> 赞同：0
> 
> 时间：2012-04-26T00:52:18.667
> 
> 标签：ios, cocoa-touch, uiview, touch

我有一种情况，我在触摸开始时将效果应用于 UIView，并在触摸结束时反转该效果。所以基本上我在跟踪`touchesbegan`，`touchesEnded`和`touchesCancelled`UIView 的方法。但问题是当视图离开屏幕时，即当它或它的一个父视图从超级视图中移除时，它不再获得任何触摸事件。有没有办法将这个“最后”`touchesended`事件赋予视图？也许如果 UIView 收到关于不可见的通知，我也可以为此目的使用此事件。

好的，我将把评论中的答案移到原始问题上，以便很好地总结要点。

*   我跟踪触摸事件的原因是我想应用一些不错的效果，例如在触摸开始时发光并在触摸结束时移除这些效果。
*   我无法模拟`touchesEnded`删除这些视图的原因是我没有直接删除它们。相反，我删除了它们的祖先视图之一。我无法一直跟踪到 UIWindow 的祖先视图，我认为这在技术上是不可能的。相反，框架应该将其作为我认为的事件提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:58:04.527

我通过覆盖`-(void)willMoveToWindow:(UIWindow *)newWindow`方法并检查 if `newWindow`is解决了我的问题`nil`。

# c++ - 包括 在 Xcode 4.2 中找不到编译错误

> ID：10325853
> 
> 赞同：16
> 
> 时间：2012-04-26T00:52:31.080
> 
> 标签：c++, objective-c, xcode, string, header

我在 XCode 中遇到 include not found 编译错误。我有一个 iOS 应用程序项目，我使用 Objective-c 和 c++ 作为混合。

最初，我在我的 ios 项目中创建了一个 .h 文件和一个 .cpp 文件。然后，我将 .cpp 文件重命名为 .mm 文件。

这是我的 .h 文件；

测试日志.h

```
#ifndef CalculatorDemo_TestLog_h
#define CalculatorDemo_TestLog_h
#include <string>
using namespace std;

class TestLog
{
private:
    string logString;
public:
    void Log(string logMessage);
};

#endif 
```

测试日志.mm

```
#include "TestLog.h"

void TestLog::Log(string logMessage)
{
    //this->logString->append(logMessage);

} 
```

我错过了什么？我需要将 std c++ 库添加到我的 targetS 吗？与搜索标题路径相关的东西？

我只需要使用字符串类型。

非常感谢提前

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-25T07:38:06.653

选择项目 -> 构建设置 -> 苹果 LLVM 编译器 5.1 -> 语言

在`Compile Sources As`更改为`Objective-C++`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-24T03:33:48.743

XCode 中有一个怪癖。我在 7.3 中注意到了它。大多数项目都能识别 .mm 文件和 STL，而我没有一个项目。解决方法是我必须单击左上角的项目图标，然后单击 Targets > Build Phases > Link Binary with Libraries > 并添加 AppKit.framework。接下来，我必须单击 Targets > Build Settings > 在“Compile Sources”上搜索，然后在所有可能的列上将其设置为“Objective C++”。然后，从“产品”菜单中执行“清理”和“构建”。然后正确编译。然后，再次回到那个编译源并在所有可能的列上将其设置回“根据文件类型”。然后，再次从 Product 菜单中单击 Build。那时，它正确编译并允许我使用我更喜欢的“根据文件类型”选项。

哦，如果做 Cocoa 的事​​情，不要忘记在你的文件中添加以下标题：

```
#import <Cocoa/Cocoa.h> 
```

如果做命令行的事情，不要忘记添加以下内容而不是 Cocoa 标头：

```
#import <Foundation/Foundation.h> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T04:25:39.203

我相信你需要包括图书馆的整个路径。类似于说“基础”和“uiview”框架。

```
#import <Foundation/Foundation.h> 
```

或者

```
#import <UIKit/UIKit.h> 
```

是的，确保将库添加到目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-18T01:42:10.073

所以我在 Cocoapods 库绕过时遇到了这个问题，这些解决方案都没有做任何事情。问题出在 Cocoapods 创建的称为伞头文件的文件上。这位于`<POD_NAME>/Support Files/<POD_NAME>-umbrella.h`. 删除它，它应该构建得很好。

现在解释为什么这是必要的：伞头文件将 C++ 和 Objective-C 代码直接混合在一个头文件中，这显然是一个很大的禁忌，最终完全破坏了 C++ 导入。通过删除它（这似乎没有效果？）Cocoapods 在不知不觉中创建的这种冲突导入将消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-18T09:13:26.690

使用 xcode 12.4 和一个 Objective-c 项目遇到了这个问题，但我需要一个 C++ 模块。解决方案：将.h文件的内容包装在：

```
#if defined __cplusplus
  declarations
#endif 
```

显然 xcode 不擅长检测混合来源。

见[预期；在顶级声明符之后，xcode中的错误](https://stackoverflow.com/questions/17129698/expected-after-top-level-declarator-error-in-xcode)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-18T09:46:56.920

当 Xcode 不理解您导入到 Objective-C 的 C++ 头文件实际上是用于 C++ 代码时，通常会发生这种情况。

所以你可以通过找到导入C++代码的Objective-C文件来解决这个问题，只需将其扩展名从更改`.m`为`.mm`

# c++ - 使用不同的编译器时，我从 dynamic_cast 获得不同的结果

> ID：10325855
> 
> 赞同：0
> 
> 时间：2012-04-26T00:52:43.730
> 
> 标签：c++

以下程序中的断言根据所使用的编译器给出不同的结果：在 GCC 4.4 中断言失败，而在 CLang 中则没有。看起来 GCC 不喜欢 V 在 C 中是私有的。这是一个错误吗？

```
#include <cassert>

class V {
public:
    virtual ~V() { };
};

template<class T>
class C : public T, private V {
public:
    static V* new_() {
        return new C();
    }
};

struct MyT {
};

typedef C<MyT> C_MyT;

int main(int argc, char** argv) {
    V* o2 = C_MyT::new_();
    assert(dynamic_cast<C_MyT*> (o2)); // failure in GCC, success in CLang
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:05:20.853

g++ 似乎表现正确。请参阅[私有范围内私有继承的动态向下转换，](https://stackoverflow.com/questions/6927895/dynamic-downcast-on-private-inheritance-within-private-scope)其中有一个很好的答案来描述这一点。

# php - Cakephp - 按不同表的字段搜索

> ID：10325868
> 
> 赞同：0
> 
> 时间：2012-04-26T00:55:12.020
> 
> 标签：php, cakephp, search, cakephp-1.3

我有两张桌子：

1.  evaluation_employees 字段：id、用户名
2.  评估结果字段：id、等级、评估员工 ID

在评估结果视图中，我需要通过员工的用户名搜索结果（使用[cakephp 搜索插件](http://cakedc.com/downloads/view/cakephp_search_plugin)），但在评估结果表中，我有员工的 id（evaluation_employee_id），而不是用户名。我不知道如何在这些表之间建立链接以使其正常工作。

我认为的代码（evaluation_results/index.ctp）：

```
echo $this->Form->create('EvaluationResult', array(
            'url' => array_merge(array('action' => 'index'), $this->params['pass'])
            ));
echo $this->Form->input('username', array('div' => false, 'empty' => true)) . '<br/><br/>';
echo $this->Form->submit(__('Search', true), array('div' => false));
echo $this->Form->end(); 
```

我的控制器中的代码（evaluation_results_controller.php）：

```
var $components = array('Search.Prg');
    function index() {
        $this->Prg->commonProcess();
        $this->EvaluationResult->recursive = 0;
        $this->paginate = array(
                    'conditions' => $this->EvaluationResult->parseCriteria($this->passedArgs));
        $this->set('evaluationResults', $this->paginate());
    } 
```

我的模型中的代码（evaluation_result.php）：

```
public $actsAs = array('Search.Searchable');

    //Search fields data description for processing.
    public $filterArgs = array(
        array('name' => 'EvaluationEmployee.username', 'type' => 'query', 'method' => 'filterUsername')
    );

    //Method as decalred in $filterArgs to process the free form search.
    public function filterUsername($data, $field = null) {
        if (empty($data['EvaluationEmployee']['username'])) {
            return array();
        }
        $username = '%' . $data['EvaluationEmployee']['username'] . '%';
        return array(
                $this->alias . '.EvaluationEmployee.username LIKE' => $username
            );
    } 
```

请告诉我是否需要更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T23:54:47.217

如果您在模型中设置关联，它会在您搜索员工时自动查找所有相关记录。

[http://book.cakephp.org/1.3/en/view/1039/Associations-Linking-Models-Together](http://book.cakephp.org/1.3/en/view/1039/Associations-Linking-Models-Together)

# java - 如何计算 XML 文件的深度 - DOM

> ID：10325869
> 
> 赞同：1
> 
> 时间：2012-04-26T00:55:12.850
> 
> 标签：java, dom, xml-parsing, sax, jdom

我想像这样计算 XML 文件的深度：

```
 <?xml version="1.0"  encoding="iso-8859-1"?>
 <country> -----> Level 1
   <name> France </name> ----> Level 2
   <city> Paris </city>
   <region>
     <name> Nord-Pas De Calais </name> ---> Level 3
     <population> 3996 </population>
     <city> Lille </city>
   </region>
   <region>

   </region>
  </country> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T01:41:43.830

您可以使用它并根据您的需要进行自定义...使用 DOM 解析器

公共类测试{

```
public static void main(String[] args) throws SAXException, IOException, ParserConfigurationException {
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document dom = db.parse("country.xml");
    Element elem = dom.getDocumentElement();        
    int level = 1;
    System.out.println(elem.getNodeName() + "--->" + level);
    NodeList nl = elem.getChildNodes();
    displayLevel(nl,level);
}

/**
 * Recursive function to go through the nodes to display the level.
 * @param nl
 * @param level
 */
private static void displayLevel(NodeList nl, int level) {      
    level++;        
    if(nl != null && nl.getLength() > 0){
        for (int i = 0; i < nl.getLength(); i++) {
            Node n = nl.item(i);
            System.out.println(n.getNodeName() + "--->" + level);               
            displayLevel(n.getChildNodes(), level);             
        }
    }else{
        return;
    }

} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T01:07:46.567

您正在寻找树遍历

[http://en.wikipedia.org/wiki/Tree_traversal](http://en.wikipedia.org/wiki/Tree_traversal)

具体来说，您可以通过深度或广度两种方式做到这一点..

有多种 Java 技术可以做到这一点。

[http://www.java2s.com/Code/Java/XML/TraversetheDOMtreeusingTreeWalker.htm](http://www.java2s.com/Code/Java/XML/TraversetheDOMtreeusingTreeWalker.htm)

你具体想做什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T01:20:28.977

这都是关于关系的。在 JDOM 中，您想要的关系是父元素的数量。

另一方面，如果您想要的只是元素的级别，那么原始 SAX 解析会更快，并且会更好。

以防万一这是作业，我会指出正确的方向....

使用 JDOM，您可以在 Content 上使用 getParentElement() 函数，并在该函数上循环，直到有更多的父级。如果您计算每个循环，您将拥有级别....

使用 DOM 你也有一个 getParentNode()

使用 SAX，您可以在 startElement 和 endElement 方法中增加和减少“级别”。

# c - 为什么 struct stat 中的字段命名为 st_something？

> ID：10325870
> 
> 赞同：10
> 
> 时间：2012-04-26T00:55:26.330
> 
> 标签：c, struct, stat

这是参考[有关文件 inode 信息的结构](http://en.wikipedia.org/wiki/Stat_(system_call))：

```
 dev_t       st_dev;     /* ID of device containing file */
 ino_t       st_ino;     /* inode number */
 mode_t      st_mode;    /* protection */
 nlink_t     st_nlink;   /* number of hard links */
 uid_t       st_uid;     /* user ID of owner */
 gid_t       st_gid;     /* group ID of owner */
 dev_t       st_rdev;    /* device ID (if special file) */
 off_t       st_size;    /* total size, in bytes */
 time_t      st_atime;   /* time of last access */
 time_t      st_mtime;   /* time of last modification */
 time_t      st_ctime;   /* time of last status change */
 blksize_t   st_blksize; /* blocksize for filesystem I/O */
 blkcnt_t    st_blocks;  /* number of blocks allocated */ 
```

我只是在寻找任何类型的答案。我注意到所有字段都以开头`st_`并且在互联网上找不到很好的解释。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-26T01:07:26.207

这可以追溯到很久以前，一直到第一个 C 版本。他们没有单独的结构成员符号表，名称被添加到全局符号表中。伴随着明显的令人讨厌的全局命名空间污染。解决方法与您今天在枚举上使用的解决方法相同，在它们前面加上几个字母以避免名称冲突。

这有点像历史记录。当您看到具有此类成员名称的结构时，您就知道它是*old*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T06:32:30.490

除了汉斯的回答，我认为名字冲突的事情仍然是现实的。即使现代 C`struct`字段不在全局名称空间中，它们也可能与宏定义发生冲突。

这是每个人通常使用大写的宏和小写的其他标识符的原因之一，但不幸的是，这并不总是可能的。C 库本身有小写的宏：基本上库中的每个函数都可能有一个宏对应物，为了优化目的“重载”函数。在您的示例中，您可能很容易想象在 C（POSIX 等）中出现一个 function `blksize`。如果有一天您想要重载该功能`st_`的成员没有前缀，那么您将遇到麻烦。`stat`

对于 C11 及其类型，使用`_Generic`此类宏的通用宏将更加普遍。因此，如果您正在设计一个要在大量代码中使用的库，而您不知道如何选择标识符，那么使用这样的命名约定仍然会更好。

所有这些不仅适用于`struct`成员，还适用于`inline`函数的参数名称和变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T00:58:47.387

我假设这是一个命名约定，因此当您看到 st_... 时，您就知道它是 stat 结构的一部分（以 st 开头）。

# ruby-on-rails-3 - 在 devise/omniauth 中删除授权时如何允许用户输入密码

> ID：10325878
> 
> 赞同：0
> 
> 时间：2012-04-26T00:57:46.087
> 
> 标签：ruby-on-rails-3, devise, omniauth

我有一个 rais 3 应用程序，它使用 devise 和omniauth 来允许用户通过他们的 twitter 帐户和/或使用本地登录凭据注册/登录。注册和登录一切正常。当用户选择在没有首先建立本地密码的情况下销毁他们的 Twitter 授权时，就会出现我的问题。如果用户破坏了他们的授权，那么我想将他们路由到 new_password_path 以便他们可以为将来的登录选择密码。

这是控制器代码：

```
 class AuthenticationsController < ApplicationController
      before_filter :authenticate_user!, :except => [:create, :failure]

      def create
        omniauth = request.env["omniauth.auth"]
        authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
        if authentication #existing user is logging-in with existing authentication service
          flash[:notice] = "Signed in successfully."
          set_home_location_cookies(authentication.user, authentication.user.home_lat, authentication.user.home_lng)
          sign_in(:user, authentication.user)
          redirect_to root_path
        elsif current_user #existing user who is already logged-in is creating a new authentication service for future use
          current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'], :token => omniauth['credentials']['token'])
          current_user.update_posting_preferences(omniauth['provider'])
          flash[:notice] = "Successfully linked to your #{omniauth['provider'].titleize} account."
          redirect_to root_path
        else #new user is creating a new authentication service and logging in
          user = User.new
          user.apply_omniauth(omniauth)
          if user.save
            flash[:notice] = "Signed in successfully."
            sign_in(:user, user)
            redirect_to root_path
          else
            session[:omniauth] = omniauth.except('extra')
            session[:user_message] = {:success => false, :message => "userSaveError"}
            redirect_to new_user_registration_url
         end
        end
      end

      def failure
        flash[:alert] = "Could not authorize you from your social service."
        redirect_to root_path
      end

      def destroy
        @authentication = current_user.authentications.find(params[:id])
        current_user.update_posting_preferences(@authentication.provider)
        @authentication.destroy
        flash[:notice] = "You have successfully destroyed your link to your #{@authentication.provider.titleize} account."
        if current_user.authentications.empty? && current_user.encrypted_password.empty?
          sign_out
          flash[:alert] = "Alert: Your account does not currently have a password for account authorization.  You are in danger of losing your account unless you create a new password by using this form."
          redirect_to new_password_path(current_user) and return
        else
          redirect_back_or(root_path)
        end
      end 
```

`redirect_to new_password_path(current_user) and return`该代码导致由我的命令 触发的“找不到 nil 的有效映射”错误![在此处输入图像描述](../Images/06cc94eab9aab69553a1aa6bab567128.png)

我将非常感谢一些帮助解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:21:39.673

好的。我会承认的。我从教程中实现了身份验证控制器，而没有研究设计路由来了解幕后发生的事情。昨晚我查看了文档并找出了我的问题。有趣的是，上述例程确实适用于旧版本的设计，但不适用于设计 1.5.3。

在销毁操作中，我注销 current_user，然后尝试路由到 new_password_path，将“current_user”作为参数发送。毫不奇怪，此时“current_user”已被取消。所以，我得到了“找不到 nil 的有效映射”错误。这是我的简单修复：

```
 def destroy
    @authentication = current_user.authentications.find(params[:id])
    user = current_user
    current_user.update_posting_preferences(@authentication.provider)
    @authentication.destroy
    flash[:notice] = "You have successfully destroyed your link to your #{@authentication.provider.titleize} account."
    if current_user.authentications.empty? && current_user.encrypted_password.empty?
      sign_out
      flash[:alert] = "Alert: Your account does not currently have a password for account authorization.  You are in danger of losing your account unless you create a new password by using this form."
      redirect_to new_password_path(user) and return
    else
      redirect_back_or(root_path)
    end
  end 
```

# java - 从 Android 与远程 CouchDB 服务器通信

> ID：10325880
> 
> 赞同：3
> 
> 时间：2012-04-26T00:58:42.490
> 
> 标签：java, android, couchdb

我正在设计一个类似于*Words With Friends*的回合制游戏。我不需要将数据持久存储在本地 CouchDB 中的手机上。

我尝试了使用[`HttpPut`](http://developer.android.com/reference/org/apache/http/client/methods/HttpPut.html)/的 HTTP 请求[`HttpGet`](http://developer.android.com/reference/org/apache/http/client/methods/HttpGet.html)，[`HttpClient`](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)但没有成功。

从 Android 应用程序与 CouchDB 通信的最佳方式是什么？有哪些替代数据库后端可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:20:16.343

我会推荐[TouchDB-Android](http://github.com/couchbaselabs/TouchDB-Android)。我们一直在为我们的 iOS 应用程序使用[TouchDB-iOS](http://github.com/couchbaselabs/TouchDB-iOS)，并计划在开始 Android 开发时使用 TouchDB-Android。TouchDB 有一个活跃的开发社区——请参阅这个[google 组](http://groups.google.com/forum/#!forum/mobile-couchbase)。您可以使用 TouchDB 连接到本地或远程 CouchdB 数据库并在两者之间进行复制。

# java - 同步两个 Horizo ntalScrollViews Android

> ID：10325882
> 
> 赞同：3
> 
> 时间：2012-04-26T00:58:55.003
> 
> 标签：java, android, scroll, horizontal-scrolling

我的布局中有两个`HorizontalScrollView`s，我想同时移动它们。因此，如果我触摸滚动视图 a，我想同时移动滚动视图 b，反之亦然。我做了一些搜索，并没有找到一个好的解决方案。我已经通过设置一个`onTouchListener()`并尝试手动移动每个来关闭它，但我无法让它顺利移动。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:26:40.033

我能够弄清楚我需要做什么。我注意到`onScrollChanged()`在`ScrollView`and`HorizontalScrollView`类中调用了一个受保护的方法。所以我`HorizontalScrollView`手动子类化并实现了该方法。从那里我刚刚创建了一个回调，它在被调用时`onScrollChanged()`被调用。奇迹般有效。为什么谷歌没有公开这种方法是我无法理解的。

# ruby-on-rails - 我在哪里放置 Act-as-taggable-on 的配置？

> ID：10325888
> 
> 赞同：12
> 
> 时间：2012-04-26T00:59:49.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, acts-as-taggable-on

我正在阅读 act-as-taggable Github 文档 [https://github.com/mbleigh/acts-as-taggable-on](https://github.com/mbleigh/acts-as-taggable-on)，我想强制将标签保存为小写。配置部分中的说明说要添加该行

`ActsAsTaggableOn.force_lowercase = true`

但我不太确定这会去哪里。

我应该把这段代码放在什么文件中？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T11:25:01.163

您可以在其中创建一个自定义初始化程序`config/initializers`并将此行放在那里。

或者，您可以将其设置为`config/application.rb`：

```
module YourApp
  class Application < Rails::Application
    ActsAsTaggableOn.force_lowercase = true
  end
end 
```

# java - 为什么 System.out.print() 不起作用？

> ID：10325889
> 
> 赞同：7
> 
> 时间：2012-04-26T01:00:06.513
> 
> 标签：java, syntax, system.out

所以我正在编写我认为是一个相对简单的“读取文件”程序的代码。我得到了很多编译错误，所以我开始尝试一次编译一行，看看我在哪里被灌输了。这是我到目前为止的位置：

```
import java.nio.file.*;
import java.io.*;
import java.nio.file.attribute.*;
import java.nio.channels.FileChannel;
import java.nio.ByteBuffer;
import static java.nio.file.StandardOpenOption.*;
import java.util.Scanner;
import java.text.*;
//
public class ReadStateFile
{
    Scanner kb = new Scanner(System.in);
    String fileName;     /* everything through here compiles */
    System.out.print("Enter the file to use: ");
} 
```

注意：这是从另一个类中的方法调用的构造函数的前三行。构造函数的其余部分在下面继续......当然，上面没有第二个花括号......

```
fileName = kb.nextLine();
Path file = Paths.get(fileName);
//
final String ID_FORMAT = "000";
final String NAME_FORMAT = "     ";
final int NAME_LENGTH = NAME_FORMAT.length();
final String HOME_STATE = "WI";
final String BALANCE_FORMAT = "0000.00";
String delimiter = ",";
String s = ID_FORMAT + delimiter + NAME_FORMAT + delimiter + HOME_STATE + delimiter + BALANCE_FORMAT + System.getProperty("line.separator");
final int RECSIZE = s.length();
//
byte data[]=s.getBytes();
final String EMPTY_ACCT = "000";
String[] array = new String[4];
double balance;
double total = 0;
} 
```

编译后，我得到以下信息：

```
E:\java\bin>javac ReadStateFile.java
ReadStateFile.java:20: error: <identifier> expected
        System.out.print("Enter the file to use: ");
                        ^
ReadStateFile.java:20: error: illegal start of type
        System.out.print("Enter the file to use: ");
                         ^
2 errors

E:\java\bin> 
```

我到底错过了什么？有人可以向我拍摄一段代码以生成堆栈跟踪吗？我只是在阅读 java 文档时感到困惑，而 Java Tutotrials 甚至没有“stack”作为索引关键字。哼。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T01:01:52.217

声明类的属性/方法时不能使用方法。

```
public class ReadStateFile
{
    Scanner kb = new Scanner(System.in);
    String fileName;     /* everything through here compiles */
    System.out.print("Enter the file to use: "); //wrong!
} 
```

代码应该是这样的

```
public class ReadStateFile
{
    Scanner kb = new Scanner(System.in);
    String fileName;     /* everything through here compiles */

    public void someMethod() {
        System.out.print("Enter the file to use: "); //good!
    }
} 
```

编辑：根据您的评论，这就是您要实现的目标：

```
public class ReadStateFile
{

    public ReadStateFile() {
        Scanner kb = new Scanner(System.in);
        String fileName;     /* everything through here compiles */
        System.out.print("Enter the file to use: ");
        //the rest of your code
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T01:02:08.160

你不能让代码在这样的类中四处游荡。它要么需要在方法、构造函数或初始化程序中。您可能打算在 main 方法中包含该代码。

# cakephp - CakePHP：hasMany 与连接表

> ID：10325890
> 
> 赞同：0
> 
> 时间：2012-04-26T01:00:14.220
> 
> 标签：cakephp, relationship, cakephp-model

我有两个模型：`Store`和`Review`. 我网站的用户可以对商店发表评论。在我的数据库中，我有一个连接表，`reviews_stores`它将评论与商店相关联。

如何链接我的模型？我假设 a`Store`应该 haveMany `Review`，并且 a`Review`应该属于 a `Store`，但是连接表导致 CakePHP 出现问题，因为 CakePHP 假设我的`reviews`表有一个名为`store_id`.

我使用连接表的原因是我的网站的许多部分都可以查看。例如，品牌。将创建一条新`Review`记录，并将一条记录插入到`brands_reviews`表中以关联两条记录。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:23:00.533

为什么不简单地使用一个 Review 模型和一个带有字段“foreign_key”和另一个字段“model”的评论表？这样您就不需要复制表和继承或复制模型。这也将消除对连接表的需要。

如果您想继续使用您的数据库设计，那么您必须使用 HABTM 关联而不是 hasMany 关联。但即使在您想保持可连接的情况下，您也可以再次使用 foreign_key/model 并简单地拥有一个连接表和一个评论表。

顺便说一句，您的连接表 review_store 没有遵循约定，它应该是 reviews_stores。但它与您用于brands_reviews 的架构不同。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:25:24.713

您可以查看的每个模型都不需要所有连接表，只需将模型名称本身存储在`Review`表中的字段中即可。

像这样设置你的关系：

```
class Store extends AppModel {
    public $hasMany = array(
        'Review' => array('conditions' => array('Review.model' => 'Store')
     );
} 
```

然后，您可以使用任意数量的额外模型来执行此操作，而无需接触数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T06:40:29.590

在我看来，这不是多对多关系，而是分组的一对多关系。我会丢失连接表，而只是有一个额外的表来概述评论所属的“组”。所以评论表会有review_id、link_id（相关品牌或商店的外键）、review_type_id（描述评论是针对品牌还是商店的外键等）。那么review_type表只需要有review_type_id，review_type(varchar)。

# c - 包重传

> ID：10325891
> 
> 赞同：0
> 
> 时间：2012-04-26T01:00:16.140
> 
> 标签：c, linux, sockets, network-programming

我有一个场景，多个客户端连接到 TCP 服务器。当任何客户端向服务器发送数据包时，服务器应该有一个重传计时器并继续将该数据包发送到另一个服务器，直到它收到回复。我该如何设置这个重传机制？我正在用 C 语言在 Linux 上执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T01:04:08.050

如果您使用 TCP 套接字，将自动进行重新传输。诚然，如果您想要更多控制权，您需要使用 UDP 并自己处理重传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:11:51.580

IIRC，包含这些 TCP 配置参数的文件的位置取决于发行版。它们位于 Red Hat 和 Ubuntu 上的不同文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T05:50:27.407

我猜这是一个任务。我有类似的事情，我们的频道被故意破坏了。

我建议您遵循类似的方法。

1.  发送数据包。
2.  启动计时器。
3.  如果在一定时间内没有收到 ACK（确认），则返回步骤 1。

# python - 如何使用 Python 解析以 MARC21 格式存储的文档

> ID：10325895
> 
> 赞同：6
> 
> 时间：2012-04-26T01:00:36.497
> 
> 标签：python, parsing, marc

昨天，[哈佛发布](http://openmetadata.lib.harvard.edu/)了对其所有图书馆元数据（约 1200 万条记录）的开放访问

我正在寻找解析数据并使用它，因为发布的目标是“支持创新”

下载 12GB 压缩包，解压后找到 13 个 .mrc 文件，每个文件大约 800MB

[MARC21 格式](http://www.loc.gov/marc/bibliographic/ecbdhome.html)

当我查看前几个文件的头部和尾部时，即使阅读了一些关于 MARC21 的内容，它看起来也非常非结构化。

这是第一个文件的前 4k 的样子：

`$ head -c 4000 ab.bib.00.20120331.full.mrc`

```
00857nam a2200253 a 4500001001200000005001700012008004100029010001700070020001200087035001600099040001800115043001200133050002500145245011100170260004900281300002100330504004100351610006400392650005300456650003500509700003800544988001300582906000800595002000001-420020606093309.7880822s1985    unr      b    000 0 ruso   a   86231326   c0.45rub0 aocm18463285  aDLCcDLCdHLS  ae-ur-un0 aJN6639.A8bK665 198500aInformat︠s︡ii︠a︡ v rabote partiĭnykh komitetov /c[sostavitelʹ Stepan Ivanovich I︠A︡lovega].  aKiev :bIzd-vo polit. lit-ry Ukrainy,c1985\.  a206 p. ;c20 cm.  aIncludes bibliographical references.20aKomunistychna partii︠a︡ UkraïnyxInformation services. 0aParty committeeszUkrainexInformation services. 0aInformation serviceszUkraine.1 aI︠A︡lovega, Stepan Ivanovich.  a20020608  0DLC00418nam a22001335u 4500001001200000005001700012008004100029110003000070245004600100260006000146500005800206988001300264906000700277002000002-220020606093309.7900925|1944    mx           |||||||spa|d1 aCampeche (Mexico : State)10aLey del notariado del estado de Campeche.0 a[Campeche]bDepartamento de prensa y publicidad,c1944\.  aAt head of title: Gobierno constitucional del estado.  a20020608  0MH00647nam a2200229M  4500001001200000005001700012008004100029010001700070035001600087040001300103041001100116050003600127100004200163245004100205246005600246260001600302300001900318500001500337650004400352988001300396906000800409002000003-020051201172535.0890331s1902    xx       d    000 0 ota    a   73960310 0 aocm23499219  aDLCcEYM0 aotaara0 aPJ6636.T8bU5 1973 (Orien Arab)1 aUnsī, Muḥammad ʻAlī ibn Ḥasan.10aQāmūs al-lughah al-ʻUthmānīyah.3 aDarārī al-lāmiʻāt fī muntakhabāt al-lughāt.  c[1902 1973]  a564 p.c22 cm.  aRomanized. 0aTurkish languagevDictionariesxArabic.  a20020608  0DLC00878nam a2200253 a 4500001001200000005001700012008004100029010001700070035001600087040001800103043001200121050002300133245012800156246004600284260006300330300004800393500003300441610003200474650005000506700002400556710002300580988001300603906000800616002000004-920020606093309.7880404s1980    yu fa         000 0 scco   a   82167322 0 aocm17880048  aDLCcDLCdHLS  ae-yu---0 aL53.P783bT75 198000aTrideset pet godina Prosvetnog pregleda, 1945-1980 /c[glavni i odgovorni urednik i urednik publikacije Ružica Petrović].3 a35 godina Prosvetnog pregleda, 1945-1980\.  aBeograd :bNovinska organizacija Prosvetni pregled,c1980\.  a146 p., [21] p. of plates :bill. ;c29 cm.  aIn Serbo-Croatian (Cyrillic)20aProsvetni pregledxHistory. 0aEducationzYugoslaviaxHistoryy20th century.1 aPetrović, Ružica.2 aProsvetni pregled.  a20020608  0DLC00449nam a22001455u 4500001001200000005001700012008004100029245008200070260002800152300001100180440006600191700002600257988001300283906000700296002000005-720020606093309.7900925|1981    pl           |||||||pol|d10aZ zagadnień dialektyki i świadomości społecznej /cpod red. K. Ślęczka.0 aKatowice :bUŚ,c1981\.  a135 p. 0aPrace naukowe Uniwersytetu Śląskiego w Katowicach ;vnr 4621 aŚlęczka, Kazimierz.  a20020608  0MH00331nam a22001455u 4500001001200000005001700012008004100029100002200070245002200092250001200114260002800126300001100154988001300165906000700178002000006-520020606093309.7900925|1980    pl           |||||||pol|d1 aMencwel, Andrzej.10aWidziane z dołu.  aWyd. 1.0 aWarszawa :bPIW,c1980\.  a166 p.  a20020608  0MH00746cam a2200241 a 4500001001200000005001700012008004100029010001700070020001500087035001600102040001800118050002400136082001600160100001600176245008000192260007100272300002500343504004100368650003400409650004000443988001300483906000800496002000007-300000000000000.0900123s1990    enk      b    001 0 eng    a   90031350   a03910368230 aocm21081069  aDLCcDLCdHBS00aHF5439.8b.O35 199 
```

以前有人用过 MARC21 吗？它通常看起来像这样还是我需要以不同的方式解析它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-01T01:41:23.933

[pymarc](http://github.com/edsu/pymarc)是使用 Python 解析 MARC21 记录的最佳选择（完全披露：我是它的维护者之一）。如果您不熟悉使用 MARC21，请阅读您在国会图书馆网站上链接到的一些规范。我还通读了 Code4lib wiki 上的[使用 MARC](http://wiki.code4lib.org/index.php/Working_with_MARC)页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T07:07:19.633

您可能想检查一下 - [pymarc](http://pypi.python.org/pypi/pymarc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T17:04:19.837

免责声明：我是[marcx](https://github.com/miku/marcx)的作者。

[pymarc](http://github.com/edsu/pymarc)是一个很棒的库。对于一些我在 pymarc 中遗漏的操作，我将其实现为一个薄层：[marcx](https://github.com/miku/marcx)。

> `marcx.FatRecord`是 的一个小扩展`pymarc.Record`，它添加了一些快捷方式。要点是双胞胎`add`和`remove`，一个（子字段）值生成器`itervalues`和一个通用`test`函数。

它的主要好处是迭代字段（或子字段）值的更简单方法。例子：

```
>>> from marcx import FatRecord; from urllib import urlopen
>>> record = FatRecord(data=urlopen("http://goo.gl/lfJnw9").read())
>>> for val in record.itervalues('100.a', '700.a'):
...     print(val)
Hunt, Andrew,
Thomas, David, 
```

# apache-flex - flex 按钮栏最初选择的任何东西 flex 4

> ID：10325896
> 
> 赞同：0
> 
> 时间：2012-04-26T01:01:06.033
> 
> 标签：apache-flex, flex-spark, buttonbar

你好我有这个按钮栏：

```
<s:ButtonBar id="channelsBtnBar" requireSelection="true" width="100%" horizontalCenter="0"
                     skinClass="skins.TvButtonBarSkin"
                     change="channelsBtnBar_changeHandler(event)"> 
            <s:dataProvider>
                <s:ArrayList>
                    <fx:Object icon="@Embed('assets/ch1.png')"/>
                    <fx:Object icon="@Embed('assets/ch2.png')"/>
                    <fx:Object icon="@Embed('assets/ch3.png')"/>
                    <fx:Object icon="@Embed('assets/ch4.png')"/>
                    <fx:Object icon="@Embed('assets/ch5.png')"/>
                    <fx:Object icon="@Embed('assets/ch6.png')"/>
                    <fx:Object icon="@Embed('assets/ch7.png')"/>
                    <fx:Object icon="@Embed('assets/ch8.png')"/>
                    <fx:Object icon="@Embed('assets/ch9.png')"/>
                </s:ArrayList>
            </s:dataProvider>

</s:ButtonBar> 
```

我怎样才能在父组件的创建完成中选择任何项目？如果不将requireSelection设置为false并将selectedItem设置为-1，这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:05:46.227

在第一次单击时将属性 requireSelection 交换为“true”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:48:43.237

使用 ButtonBar 的 selectedIndex 属性。

如果您想选择任何项目，请使用 selectedIndex="2" ，其中 2 是您选择的 ButtonBar 索引。如果您不想选择任何东西，请使用 selectedIndex="-1"。

希望这可能会有所帮助....

# oledb - Visual FoxPro OleDB

> ID：10325897
> 
> 赞同：0
> 
> 时间：2012-04-26T01:01:11.447
> 
> 标签：oledb, foxpro

我有一个 Visual FoxPro 数据库，我可以使用 ODBC 在 Access 中很好地连接到该数据库。现在我已经“升级”到 Windows 7 并且无法找到获取数据的方法。我知道 ODBC 不起作用，所以我下载并安装了 FoxPro OleDB 提供程序。使用 Excel 中的 OleDB 连接向导，我完成了连接步骤，然后当它获取数据时，我收到一条错误消息“无法从数据库中检索数据”。在 Visual Web Developer 中，我完成了连接过程，但是当我单击数据链接按钮时，VWD 崩溃并退出。有没有一些非微软的解决方案，还是我必须去找一个 XP 盒子并将所有东西都转换成我可以使用的东西？

# macos - 子 QMainWindow 标题栏在 Mac OS X 上消失了（添加更多描述）

> ID：10325910
> 
> 赞同：1
> 
> 时间：2012-04-26T01:02:31.140
> 
> 标签：macos, qt4, titlebar, qmainwindow, qt4.8

我在 mac OS X 上使用 Qt 4.8 作为标题开发了一个程序。现在我面临一个我花了很多时间但仍然无法解决的问题。

我有一个 QWidget（称为 A），它会在一些操作后打开一个 QMainWindow（称为 B）。当B打开时，我需要A被B挡住，所以我将A设置为B的父级，并将B的窗口模态设置为Qt::WindowModal。

在其他平台上，它就像我想的那样工作，但是，在mac上，B没有自己的标题栏，它只是弹出并附加到A的标题栏上。还有，关闭按钮A 的标题栏是灰色的，这意味着我无法通过按钮关闭 B，我需要使用 QMenu 上的退出 QAction 来关闭它。

当我将 B 的父级设置为 0（NULL）而不是 B 时，它具有独立的标题栏，就像在 windows 或 linux 上一样，这就是我想要的。但是它失去了B被A阻挡的财产。

我尝试设置诸如 Qt::CustomizeWindowHint 之类的 Windows 标志，但没有人工作。

有什么办法可以保持A和B的层级关系，在Mac上给B一个独立的标题栏？感谢大家的帮助：）

附言。我尝试了小程序，发现这种情况只发生在 WindowModal 上（NonModal 和 ApplicationModal 工作正常）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:01:54.063

您所描述的行为在 Mac OS X 上称为工作*表*。正如您所怀疑的，窗口标志枚举有一个值，用于指定窗口是否为工作表。根据[文档](http://qt-project.org/doc/qt-4.8/qt.html#WindowType-enum)，似乎[`setWindowModality()`](http://qt-project.org/doc/qt-4.8/qwidget.html#windowModality-prop)在 OS X 上调用可能会将窗口默认为工作表——这可能是大多数开发人员想要的大多数对话框。您可以在设置模态后尝试测试并明确删除该标志，看看是否有帮助。或者，您可能想要检查设置了哪些标志，并查看这是否会导致解决方案。

# cocoa - NSDistributedNotificationCenter 和 iTunes

> ID：10325911
> 
> 赞同：0
> 
> 时间：2012-04-26T01:02:33.033
> 
> 标签：cocoa, itunes, nsnotifications

有没有办法向 iTunes 发送通知，所以它会告诉我当前的歌曲。我知道它会在歌曲更改时发送通知，但我想在我的应用程序打开时获取当前歌曲。我试图避免使用脚本桥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:53:27.860

不幸的是，您不能通过通知来做到这一点，您唯一的选择是脚本桥或其他与 Apple 事件相关的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:11:42.197

您可以使用**NSAppleScript**来运行 AppleScript。

示例：获取当前曲目的标题和艺术家

```
NSAppleScript* theScript = [[NSAppleScript alloc] initWithSource:
                       [NSString stringWithFormat:
                            @"tell application \"iTunes\" to if running then\n"
                            @"    try\n"
                            @"        tell current track to return name & return & artist\n"
                            @"    end try\n"
                            @"    return \"no track\"\n"
                            @"end if\n"
                            @"return \"iTunes is not open\"\n"]];
NSDictionary *errorDict;
NSAppleEventDescriptor *resultDescriptor = [theScript executeAndReturnError:&errorDict];
NSString *title_artist = [resultDescriptor stringValue];
// do something with title_artist 
```

示例：使用“资源文件夹”中的 AppleScript 文件

```
NSString *scriptPath = [[NSBundle mainBundle] pathForResource:@"theScriptName" ofType:@"scpt"];
NSAppleScript *theScript = [[NSAppleScript alloc] initWithContentsOfURL: [NSURL fileURLWithPath:scriptPath] error: nil]; 
```

另一种解决方案：您可以使用**NSTask**通过 osascript 运行 AppleScript

# android - 如何跨活动正确保存数据。savedInstanceState 总是显示为空

> ID：10325917
> 
> 赞同：0
> 
> 时间：2012-04-26T01:03:14.460
> 
> 标签：android

我有 2 个活动 A 和 B。

1.  我使用 startActivity(B) 从活动 A 调用活动 B；
2.  我在 B 中做一些操作并使用 startActivity(A) 回调活动 A；

我注意到 A 类中的实例变量被清除（重新初始化）。`onSaveInstanceState(Bundle)`在 A 停止之前使用正确的方法保存这些变量吗？

在我`onCreate(Bundle savedInstanceState)`的 A 类方法中，我尝试检索之前保存的数据`onSaveInstanceState(Bundle)`。但是该变量`savedInstanceState`始终为空，我无法检索任何数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T01:13:41.553

如果你想回到你之前的活动，你必须在活动B上调用finish()，然后在活动A中用onActivityResult()拦截它。

那是你试图完成的吗？

# bash - bash 进程数据

> ID：10325920
> 
> 赞同：2
> 
> 时间：2012-04-26T01:03:50.533
> 
> 标签：bash

原始文件 input_file.txt 是这样的：

```
A: 46274
B: 43274
C: 47242 
```

我想将所有这些数字减去某个数字，比如 40000，然后将结果输出到另一个文件 output_file.txt，如：

```
6274
3274
7242 
```

谁能帮我这个？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T01:07:18.833

你可以用`awk`它来做。例如：

```
$ cat in.txt 
A: 46274
B: 43274
C: 47242
$ awk '{ print $2-74 }' in.txt 
46200
43200
47168
$ 
```

如果只是为了实验，你想用 bash 本身而不是使用类似的工具`awk`，你也可以这样做：

```
$ while read a b; do echo $(($b - 74)); done <./in.txt 
46200
43200
47168 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:37:23.597

**输入.txt**

```
A: 46274 
B: 43274 
C: 47242 
```

**Unix 解决方案**

```
$> awk -F " " '{print $2-40000}' Input.txt > Output.txt 
```

**Perl 解决方案**

```
#!/usr/bin/perl
    my @a=`cat /home/Input.txt`;
    foreach my $b (@a)
    {
            chomp($b);
            my ($c1,$c) = split (':',$b);
            chomp($c);
            $d= $c - 40000;
            print "$d\n";
    } 
```

执行并将脚本的输出重定向到 Output.txt

**输出.txt**

```
6274
3274
7242 
```

# facebook-graph-api - Branchout 使用 Facebook API 的哪些功能？

> ID：10325921
> 
> 赞同：0
> 
> 时间：2012-04-26T01:04:05.977
> 
> 标签：facebook-graph-api

似乎 BranchOut 是唯一仍然能引起我和我的朋友注意的 Facebook 应用程序。他们使用 Facebook API 的哪些功能来访问我的主页，每天有 5 个新请求？他们如何避免被禁止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:56:25.950

BranchOut 是 Facebook 的合作伙伴，因此他们可以获得特殊访问权限，包括显示应用程序上下文的自定义请求。大多数应用程序会收到诸如“Bill Smith 在 [app name] 中向您发送请求”之类的文本，而 BranchOut 会收到诸如“Bill Smith 希望您加入他的专业网络”之类的请求。不幸的是，BranchOut 的策略无法轻易复制。

# api - 如何制作一个好的容器来拖放对象（corona SDK）？

> ID：10325924
> 
> 赞同：2
> 
> 时间：2012-04-26T01:04:43.850
> 
> 标签：api, drag-and-drop, lua, containers, coronasdk

我是 Corona SDK 的新手。

我正在为应用程序使用拖放实现测试。

我为一个“吸引”它附近的拖动对象的容器实现了下面的代码。

```
display.setStatusBar( display.HiddenStatusBar )

local posX, posY = 100, 200
local sizeX, sizeY = 150, 100

local container = display.newRect( posX, posY, sizeX, sizeY )
container:setFillColor( 255,0,0 )
container.strokeWidth = 3
container:setStrokeColor(100, 100, 100)

local myObject = display.newRect( 0, 0, sizeX, sizeY )
myObject.alpha = 0.6
myObject:setFillColor( 0,0,255 )

-- dcenter, d1, d2, d3, d4 are test points: IF THERE ARE AT LEAST 2 POINTS INSIDE THE TARGET CONTAINER, THAN THE OBJECT WILL BE ATRACTED INTO THE CONTAINER
-- uncomment the code bellow to see the test points

-- local dcenter = display.newCircle( (sizeX/2) - 1, (sizeY/2) - 1, 2 )
-- dcenter:setFillColor(120,120,120)
-- 
-- local d1 = display.newCircle( (sizeX/2) - (((1/3) * sizeX)/2) - 1, (sizeY/2) - (((1/3) * sizeY)/2) - 1, 2 )
-- d1:setFillColor(120,120,120)
-- 
-- local d2 = display.newCircle( (sizeX/2) - (((1/3) * sizeX)/2) - 1, (sizeY/2) + (((1/3) * sizeY)/2) - 1, 2 )
-- d2:setFillColor(120,120,120)
-- 
-- local d3 = display.newCircle( (sizeX/2) + (((1/3) * sizeX)/2) - 1, (sizeY/2) - (((1/3) * sizeY)/2) - 1, 2 )
-- d3:setFillColor(120,120,120)
-- 
-- local d4 = display.newCircle( (sizeX/2) + (((1/3) * sizeX)/2) - 1, (sizeY/2) + (((1/3) * sizeY)/2) - 1, 2 )
-- d4:setFillColor(120,120,120)

-- touch listener function
function myObject:touch( event )
    if event.phase == "began" then

        self.markX = self.x    -- store x location of object
        self.markY = self.y    -- store y location of object

    elseif event.phase == "moved" then

        local x = (event.x - event.xStart) + self.markX
        local y = (event.y - event.yStart) + self.markY

        self.x, self.y = x, y    -- move object based on calculations above

        -- uncomment the code bellow to see the test points (following myObject)
        -- dcenter.x, dcenter.y = x, y
        -- d1.x, d1.y = x - (((1/3) * sizeX)/2), y - (((1/3) * sizeY)/2)
        -- d2.x, d2.y = x - (((1/3) * sizeX)/2), y + (((1/3) * sizeY)/2)
        -- d3.x, d3.y = x + (((1/3) * sizeX)/2), y - (((1/3) * sizeY)/2)
        -- d4.x, d4.y = x + (((1/3) * sizeX)/2), y + (((1/3) * sizeY)/2)

        if (((x >= ((sizeX/2) + posX - ((2/3) * sizeX))) and (y >= ((sizeY/2) + posY - ((1/3) * sizeY))) and (x <= ((sizeX/2) + posX + ((2/3) * sizeX))) and (y <= ((sizeY/2) + posY + ((1/3) * sizeY)))) or ((x >= ((sizeX/2) + posX - ((1/3) * sizeX))) and (y >= ((sizeY/2) + posY - ((2/3) * sizeY))) and (x <= ((sizeX/2) + posX + ((1/3) * sizeX))) and (y <= ((sizeY/2) + posY + ((2/3) * sizeY)))) or ((x >= ((sizeX/2) + posX - ((1/2) * sizeX))) and (y >= ((sizeY/2) + posY - ((1/2) * sizeY))) and (x <= ((sizeX/2) + posX + ((1/2) * sizeX))) and (y <= ((sizeY/2) + posY + ((1/2) * sizeY))))) then
            container:setFillColor( 100,0,0 )
        else
            container:setFillColor( 255,0,0 )
        end

    elseif event.phase == "ended" then

        local x = (event.x - event.xStart) + self.markX
        local y = (event.y - event.yStart) + self.markY

        -- main condition: I calculated 3 areas to atract the object to the target container, 2 areas that atract it when it's 1/3 in the target and 1 area that atract it when it's 1/4 in the target
        if (((x >= ((sizeX/2) + posX - ((2/3) * sizeX))) and (y >= ((sizeY/2) + posY - ((1/3) * sizeY))) and (x <= ((sizeX/2) + posX + ((2/3) * sizeX))) and (y <= ((sizeY/2) + posY + ((1/3) * sizeY)))) or ((x >= ((sizeX/2) + posX - ((1/3) * sizeX))) and (y >= ((sizeY/2) + posY - ((2/3) * sizeY))) and (x <= ((sizeX/2) + posX + ((1/3) * sizeX))) and (y <= ((sizeY/2) + posY + ((2/3) * sizeY)))) or ((x >= ((sizeX/2) + posX - ((1/2) * sizeX))) and (y >= ((sizeY/2) + posY - ((1/2) * sizeY))) and (x <= ((sizeX/2) + posX + ((1/2) * sizeX))) and (y <= ((sizeY/2) + posY + ((1/2) * sizeY))))) then
            self.x, self.y = posX + (sizeX/2), posY + (sizeY/2);

            -- uncomment the code bellow to see the test points (following myObject)
            -- dcenter.x, dcenter.y = posX + (sizeX/2), posY + (sizeY/2)
            -- d1.x, d1.y = posX - (((1/3) * sizeX)/2) + (sizeX/2), posY - (((1/3) * sizeY)/2) + (sizeY/2)
            -- d2.x, d2.y = posX - (((1/3) * sizeX)/2) + (sizeX/2), posY + (((1/3) * sizeY)/2) + (sizeY/2)
            -- d3.x, d3.y = posX + (((1/3) * sizeX)/2) + (sizeX/2), posY - (((1/3) * sizeY)/2) + (sizeY/2)
            -- d4.x, d4.y = posX + (((1/3) * sizeX)/2) + (sizeX/2), posY + (((1/3) * sizeY)/2) + (sizeY/2)
        end

    end

    return true
end

myObject:addEventListener( "touch", myObject ) 
```

我只想知道是否已经有一些 api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:52:58.900

不，它没有 API。

另外我建议您使用焦点系统，因此在拖动您的对象时不要与其他对象的“触摸”事件进行交互...

例子：

```
local function myTouchListener(event)
    if event.phase == "began" then
        display.getCurrentStage( ):setFocus( event.target );
    elseif event.phase == "ended" then
        display.getCurrentStage( ):setFocus( nil );
    end
end 
```

# java - 如何从 MySQL 数据库中检索 TIMESTAMP 值

> ID：10325926
> 
> 赞同：1
> 
> 时间：2012-04-26T01:04:56.907
> 
> 标签：java, mysql, jsp, datetime, timestamp

我的模型中有这个：

```
public Timestamp getDateadded() {
    return dateadded;
}

/**
 * @param dateadded the dateadded to set
 */
public void setDateadded(Timestamp dateadded) {
    this.dateadded = dateadded;
} 
```

我的数据访问对象使用它从数据库中获取和设置时间：

```
while(rs.next())
         {
             comment = new Comment();
             comment.setDetails(rs.getString("details"));
             comment.setDateadded(rs.getTimestamp("dateadded"));
             comment.setUrgency(rs.getInt("urgency"));
             commentList.add(comment);
         } 
```

获取值后，将值设置为 arrayList，该 arrayList 被转发到页面并使用 JSTL 输出。

但是，我无法弄清楚为什么它没有显示任何结果。

调试尝试：我打印了一个非空数组列表并得到了类似 [Models.Project@17735867] 的内容，当我打印 COMMENT 的值（有错误的那个）时，打印的输出只是 []

所以这意味着arrayList中有错误。

你们中有人知道我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:49:13.763

进行调试`ResultSet`，确保它有数据或进入while循环代码？

# asp.net - 如何在 IIS 中关闭预编译？

> ID：10325928
> 
> 赞同：6
> 
> 时间：2012-04-26T01:05:23.157
> 
> 标签：asp.net, iis, precompile

我试图避免在开发过程中出现编译错误阻塞整个 ASP 站点。也就是说，我希望每个页面在第一次运行时编译而不是整个站点，这样编译错误就不会出现在全局范围内。当开发人员在使用 systnax bleherror 保存后起飞去吃午饭时，这可能会很烦人。

我尝试将此添加到您的旧网络配置（从默认的“始终”更改）：

```
<pages compilationMode="Auto" controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"> 
```

这没有达到预期的效果。我可以在 webconfig 中更改什么或使用 IIS 禁用预编译？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T01:36:57.210

## 网页配置

`<compilation batch="false" />`

指示是否支持批处理。如果为 True，则消除第一次访问文件时所需的编译导致的延迟。当此属性设置为 True 时，ASP.NET 会以批处理模式预编译所有未编译的文件，这会导致第一次编译文件时的延迟更长。然而，在这个初始延迟之后，编译延迟在随后的文件访问中被消除。默认值为真。

[https://msdn.microsoft.com/library/s10awwz0.aspx](https://msdn.microsoft.com/library/s10awwz0.aspx)

## 在 IIS 7 中

使用 UI 打开 IIS 管理器并导航到要管理的级别。有关打开 IIS 管理器的信息，请参阅打开 IIS 管理器 (IIS 7)。有关导航到 UI 中的位置的信息，请参阅 IIS 管理器中的导航 (IIS 7)。

在功能视图中，双击 .NET 编译。

在 .NET 编译页面上，根据需要编辑设置。

完成后，单击“操作”窗格中的“应用”。

[http://technet.microsoft.com/en-us/library/cc725812(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc725812(v=ws.10).aspx)

# android - 不支持 Android Linkify 电子邮件

> ID：10325929
> 
> 赞同：1
> 
> 时间：2012-04-26T01:05:25.877
> 
> 标签：android, linkify

我尝试在我的 Android 应用程序中链接电子邮件地址，但没有成功。

方法一：

```
<TextView
    android:id="@+id/email"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/email_address" 
    android:autoLink="email"/> 
```

方法二：

```
Linkify.addLinks((TextView)view.findViewById(R.id.email), Linkify.EMAIL_ADDRESSES); 
```

我使用这两种方法都得到了“当前不支持该操作”。它是一个错误吗？或者我只是无法尝试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:43:20.553

`Linkify`对电子邮件地址使用这两种方法。as

```
TextView textView = (TextView)findViewById(R.id.email);    
Linkify.addLinks(textView, Linkify.EMAIL_ADDRESSES); 
```

在布局 xml 中：

```
<TextView
    android:id="@+id/email"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/email_address" 
    android:autoLink="email"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:38:18.937

方法1就足够了。

如果 Android 确实识别并“链接”了电子邮件地址，但当您在模拟器中按下它时收到“当前不支持操作”消息，请确保您已在电子邮件应用程序中配置了电子邮件地址。

配置您的电子邮件地址后，按下这些链接之一应该会直接跳转到电子邮件撰写活动。

# c# - 使用 SQLdatasource 进行验证 - C#

> ID：10325933
> 
> 赞同：0
> 
> 时间：2012-04-26T01:06:34.397
> 
> 标签：c#, sql, visual-studio-2010, sqldatasource

我正在使用 Visual Studios 2010，我添加了一个数据库并使用 SQLdatasource 连接到它。我正在创建一个基本登录。我希望用户输入登录名，当他尝试登录时，我想通过数据库进行交互并检查登录名是否存在。我将如何从数据库中仅选择一列并遍历它。

我猜select SQL语句将是

> 从 tblUser 中选择用户名

其中用户名是列，tblUser 是表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:33:39.163

你得到了正确的 SQL 语句，最后你的 SQLDataSource 看起来像这样：

```
<asp:SqlDataSource
          id="SqlDataSource1"
          runat="server"
          DataSourceMode="DataReader"
          ConnectionString="Data Source=localhost;Integrated Security=SSPI;Initial Catalog=Northwind;"
          SelectCommand="SELECT userName from tblUser">
      </asp:SqlDataSource> 
```

注意：您可能希望使用位于配置文件中的连接字符串：

```
 ConnectionString="<%$ ConnectionStrings:MyNorthwind%>" 
```

此外，您还可以尝试在不使用 SQLDataSource 的情况下执行此查询，因为听起来您不会将结果绑定到控件。例如：

```
using (SqlConnection connection = new SqlConnection(
               connectionString))
    {
        SqlCommand command = new SqlCommand(
            "SELECT userName from tblUser", connection);
        connection.Open();
        SqlDataReader reader = command.ExecuteReader();
        try
        {
            while (reader.Read())
            {
               // check if reader[0] has the name you are looking for

            }
        }
        finally
        {
            // Always call Close when done reading.
            reader.Close();
        }
    } 
```

# linux - 将要在 EXT2 中打开文件时检查的 ACL 权限在哪里？

> ID：10325935
> 
> 赞同：3
> 
> 时间：2012-04-26T01:06:37.563
> 
> 标签：linux, filesystems, acl, ext2

在`EXT2 file.c`打开文件操作`(.open)`中被指向`dquot_file_open`哪个更进一步指向`generic_file_open`哪个存在于`fs/open.c`.

`generic_file_open`看起来它只有以下代码

```
int generic_file_open(struct inode * inode, struct file * filp)
{
    if (!(filp->f_flags & O_LARGEFILE) && i_size_read(inode) > MAX_NON_LFS)
        return -EOVERFLOW;
    return 0;
} 
```

**即将打开文件时在哪里检查 ACL 权限？**

我什么时候用谷歌搜索并使用 LXR 浏览了代码，我找到了以下路径。

**`do_sys_open -> do_filp_open -> path_openat -> do_last -> may_open -> inode_permission -> do_inode_permission -> generic_permission -> acl_permission_check -> check_acl -> posix_acl_permission`**

**但我不明白 EXT2 的 .open 是如何链接到 do_sys_open 的。**

任何帮助让我知道在文件打开期间检查 acl 权限的路径将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:17:42.627

您从错误的角度看待它：名称就像是系统调用入口点，并且在验证权限*后*`do_sys_open`最终会通过 VFS 层找到 ext2`open`例程。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T01:28:02.240

我认为您被 ACL 代码迷惑了；一旦获得许可，`nameidata_to_filp`请按照`__dentry_open`：

内`__dentry_open()`：

```
 f->f_op = fops_get(inode->i_fop);
    /* ... */
    if (!open && f->f_op)
            open = f->f_op->open;
    if (open) {
            error = open(inode, f);
            if (error)
                    goto cleanup_all;
    } 
```

这会将`inode->i_fop->open`函数指针保存到自动变量`open`，然后继续在`inode`and上调用它`f`。*

# wpf - 如何做数据网格的样式？

> ID：10325936
> 
> 赞同：0
> 
> 时间：2012-04-26T01:06:39.220
> 
> 标签：wpf, xaml, mvvm, wpfdatagrid, wpftoolkit

在这里，我想为网格行提供白色和灰色的交替颜色。我做了很多尝试，但我不能做网格的样式。代码在这里

```
<Style TargetType="{x:Type wpftoolkit:DataGrid}">
    <Setter Property="Margin" Value="0" />
    <Setter Property="BorderBrush" Value="#A6A6A6" />
    <Setter Property="BorderThickness" Value="0,1,0,0"/>
    <Setter Property="Background" Value="{StaticResource GridBgBrush}" />
    <Setter Property="RowBackground" Value="White" />
    <Setter Property="AlternatingRowBackground" Value="#FFF3F6FA" />
    <Setter Property="GridLinesVisibility" Value="Horizontal" />
    <Setter Property="HorizontalGridLinesBrush" Value="Transparent" />
    <Setter Property="RowHeaderWidth" Value="0" />
</Style> 
```

此处 StaticResource GridBgBrush 在此文件的前面定义为`

请给出适当的解决方案。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:01:01.493

您还需要设置 AlternationCount 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:40:24.780

确保您的样式是在 XAML 文件的资源部分中定义的（在您的 GridBgBrush 之后，以便它可以引用它），或者在您的应用程序中的某个 ResourceDictionary 中定义，使其可以从任何地方访问。没有看到更多，我不能告诉你你的问题来自哪里。这是定义你的风格的正确方法，如果你有兴趣看到它们，我有几个按预期工作的例子。

如果您不知道，另一件需要注意的事情是 DataGrid（连同 DatePicker）被引入 WPF v4.0。如果您可以针对该版本，这使得 WPF 工具包（至少对于 DataGrid 的目的）变得不必要。话虽如此，我想如果你不知道你正在使用一个然后设计另一个，你的风格就不起作用了。

```
<XmlDataProvider x:Key="myData" Source="Data.xml" IsAsynchronous="True" />
<Style TargetType="{x:Type DataGrid}" x:Key="myStyle">
    <Setter Property="AlternatingRowBackground" Value="Red"/>
</Style> 
```

```
<Grid>
<DataGrid ItemsSource="{Binding Source={StaticResource myData}, XPath=persons/person}" AutoGenerateColumns="False" Style="{StaticResource myStyle}">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding XPath=firstname}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding XPath=lastname}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

# python - python MySQLdb godaddy.com 托管

> ID：10325937
> 
> 赞同：0
> 
> 时间：2012-04-26T01:06:40.473
> 
> 标签：python

```
import MySQLdb
conn = MySQLdb.connect('localhost', 'user', 'pwd', 'sampledb')
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib/pymodules/python2.7/MySQLdb/__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
File "/usr/lib/pymodules/python2.7/MySQLdb/connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (110)") 
```

我如何连接，这里有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:37:10.690

您没有连接到 Go Daddy 共享主机上 localhost 上的数据库。您将需要找到正确的数据库主机。

1.  登录您的客户经理。
2.  单击虚拟主机。
3.  在您要使用的主机帐户旁边，单击启动。
4.  在 Hosting Control Center 的 Databases 部分中，单击 MySQL 图标。
5.  单击要为其获取连接字符串的数据库旁边的铅笔图标。

您的数据库主机名显示在主机名字段中。它将以“hostedresource.com”结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:25:52.560

请参阅 godaddy 的帮助页面：

[http://support.godaddy.com/help/39](http://support.godaddy.com/help/39)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-16T03:55:56.570

```
import MySQLdb

conn = MySQLdb.connect("host", "user", "password", "database") 
```

**host** : 进入 cPanel “网站 IP”。

[![在此处输入图像描述](../Images/f440ad1e07216f604b5457b498526ae9.png)](https://i.stack.imgur.com/keeSe.png)

**user**：此用户必须有访问权限（您可以在 cPanel 的*MySQL 数据库*菜单中添加此权限）。
**数据库**：名称数据库。

**注意**：在 cPanel的*远程 MySQL*菜单中为您的 IP 添加权限

您可以使用 sqlalchemy

```
from sqlalchemy import create_engine

engine = create_engine('mysql+pymysql://user:password@host/database')
conn = engine.connect() 
```

# c# - 如何在 Mono 中将 -pkg:dotnet 添加到 web.config

> ID：10325939
> 
> 赞同：0
> 
> 时间：2012-04-26T01:06:52.330
> 
> 标签：c#, .net, mono, xsp4

我得到了一个用 C# 编写的 Web 应用程序，如果可能的话，我想在 Mono 上部署它。为了让应用程序能够编译，我需要将 -pkg:dotnet 标志传递给编译器。

dmcs -pkg:dotnet

我目前正在使用 XSP4 进行测试，当它编译应用程序时，它会生成有关缺少程序集的编译器错误。我想知道我需要添加什么到 web.config 才能将 -pkg:dotnet 传递给编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:52:51.703

您应该安装附加软件包“libmono-cil-dev”。这个包需要其他包作为依赖。如果您使用 GNU/Lunux Debian，请以 root 用户身份使用命令：

```
apt-get install libmono-cil-dev 
```

# java - 短信支付系统

> ID：10325944
> 
> 赞同：0
> 
> 时间：2012-04-26T01:07:19.110
> 
> 标签：java, smslib

> **可能重复：**
> [使用“*”的字符串拆分问题](https://stackoverflow.com/questions/1308137/string-split-question-using)

我正在使用 Java 特别是 netbeans 开发短信支付系统。应用程序可以使用 smsLib 发送和接收消息。我的问题是，例如，我希望客户发送诸如 pay#merchant#amount 之类的消息，在我的代码中收到消息时如何拆分消息？

帮助将不胜感激

# java - 如果先使用 db.delete，Android db.update 不起作用

> ID：10325946
> 
> 赞同：1
> 
> 时间：2012-04-26T01:07:33.163
> 
> 标签：java, android, sqlite

我在更新数据库中的表时遇到了一个奇怪的问题...如果我不能很好地解释，请原谅我，但我有点困惑...问题是这样的：我创建了一个带有值的表，我在我的列表视图..现在一切正常..插入和删除值没有问题..现在在服务中创建了一个循环为什么我需要在我的数据库的值和字符串之间进行比较，当这个比较为真时，我需要更改表中的值..

真正的问题是：我的`db.update`作品只有在不使用的情况下......从不，命令`db.delete`......如果使用它，则`db.update`不再工作......为了让它再次工作，我需要制作一个新的 AVD。

这怎么可能？我`db.delete`和身份证是这样的：

```
item.getMenuInfo();
    id = getListAdapter().getItemId(info.position);

public void deleteReg(SQLiteDatabase db ,long id) 
        {
           db.delete(TabRegistry.TABLE_NAME, TabRegistry._ID + "=" + id, null);
        } 
```

关于活动：

```
 databaseHelper.deleteReg(db, id); 
```

我的 db.update 是这样的：（位置是一个值`getPositions()`，用于使用光标定位位置（始终有效，即使 db.update 失败））

```
public void updateReg(SQLiteDatabase db,int positions, String stat)
    {
        ContentValues v = new ContentValues();
        v.put(TabRegistry.STATUS, stat);
        db.update(TabRegistry.TABLE_NAME, v, TabRegistry._ID + " = " + positions, null);
    } 
```

在服务：

```
 databaseHelper.updateReg(db, positions, "SUCCESS"); 
```

如果您需要更多代码，请告诉我我现在添加的内容..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:19:49.873

您使用的 SQLite api 基于[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)操作（您应该阅读此内容）。

您正在从数据库中删除记录，因此当您尝试更新它时没有要更新的内容。如果您想创建一条新记录，或重新创建您删除的记录，那么您将执行 INSERT 而不是 UPDATE。

编辑：

看来您正在将位置编号传递给更新和删除。我假设您也使用此值将记录放在表中？是否有可能当您从表和数据库中删除记录时，其他记录现在的位置无效，因为它们也没有更新？这只是在黑暗中拍摄，我想我不妨问一下。

# java - 如何使字符串成为字符串数组？

> ID：10325947
> 
> 赞同：-5
> 
> 时间：2012-04-26T01:07:40.247
> 
> 标签：java, arrays

我想要做的是将这样的东西：`"The Three Pigs"`转换成这样的数组：

```
Array[0]="The"
Array[1]="Three"
Array[2]="Pigs" 
```

字符串类没有相应的方法，我自己也不知道该怎么做拆分似乎对我的目的不起作用。示例代码：

```
import java.util.Scanner;

public class Main {

/**
 * @param args
 */
public static void main(String[] args) {
    GetNumber();
}

private static void GetNumber() {
    System.out.println("Enter your words.");
    Scanner S=new Scanner(System.in);
    String O=S.next();
    String[] A=O.split(" ");
    for(int Y=0;A.length>Y;Y++){
        System.out.println(A[Y]);
    }
}

} 
```

此代码将输出 The if i put in The Little Pigs

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T01:08:57.627

```
String text = "The Three Pigs";
String[] array = text.split(" "); 
```

* * *

**编辑：**

如果你想让用户输入一行文本而不是一个单词，那么使用：

```
String O = S.nextLine(); 
```

代替：

```
String O = S.next(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T01:09:30.807

您可以使用拆分方法如下

```
String[] arrString = s.split(" "); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T01:09:38.433

请参阅String 类[的 split 方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-26T01:09:44.427

```
String[] theArray = "The Three Pigs".split(" "); 
```

至于您更新的问题，请将您的扫描仪从更改`.next()`为`.nextLine()`

```
import java.util.Scanner;

public class ArrayTest
{
    public static void main( String[] args )
    {
        System.out.println( "Enter your words." );
        Scanner scanner = new Scanner( System.in );
        String O = scanner.nextLine();
        System.out.println( O );
        String[] A = O.split( " " );
        for ( int Y = 0 ; A.length > Y ; Y++ )
        {
            System.out.println( A[ Y ] );
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T01:08:56.877

事实上，`String`该类*确实*有一个[方法](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)。

/edit
`Scanner#next`返回下一个输入标记。`Scanner`s 通过空格标记他们收到的输入，因此`"The Little Pigs"`将被标记为`"The"`，`"Little"`并`"Pigs"`通过调用`next`. 如果您想要整行，请尝试`Scanner#nextLine`.

# youtube - youtube 网址修饰符

> ID：10325955
> 
> 赞同：1
> 
> 时间：2012-04-26T01:08:50.667
> 
> 标签：youtube, http-headers

所以我目前正在编写一些脚本，这些脚本会自动将视频从我的博客上传到 youtube

问题是一些正在发送的标头真的很古怪

例如，几个 s.youtube.com 标头看起来像这样

```
https://s.youtube.com/s?tspne=0&md=1&len=349.115&csipt=watch5&el=detailpage&docid=suwLPxSNY1o&vid=eCiOBX5XBsoFE9Fx2fQ1mBZNDQGSG2gjC&hasstoryboard=1&nsivbblmax=110096.000&sd=B4A7D6725HH1335401360395385&volume=100&h=360&nsivbblmin=56688.000&bd=4876439&bt=40.967&nsivbblmean=84292.823&tabsb=1&nsivbblc=316&nsiabblmax=163000.000&w=480&nsiabblmin=143990.000&plid=AAS-ilsb9hm3dPf3&cfps=8.94454382826476&fmt=34&nsiabblmean=157694.108&screenh=768&nsiabblc=316&playerw=640&hl=en_US&screenw=1366&playerh=390&scoville=1&pd=0.710&mos=0&vtmp=1&fexp=904542,906030&referrer=None&fs=0&sendtmp=1&rt=112.686&vq=auto&lact=115762&vw=480&ns=yt&vh=360&et=109.9&rendering=software&st=70.304&decoding=accelerated&hbd=1188672&tsphab=1&hbt=0.778&nsidf=24&tspfdt=1158&bc=19023019&cr=US 
```

我知道一些基本的 url 修饰符，例如 len 指的是视频的长度 cr 指的是国家，但是有人可以了解这些 url 修饰符的其余部分可能意味着什么吗？（我有谷歌但没有找到任何信息）

谢谢！

# c++ - 为什么基类对象必须是调用派生虚函数的引用？

> ID：10325958
> 
> 赞同：2
> 
> 时间：2012-04-26T01:09:02.337
> 
> 标签：c++, class, reference, overriding, virtual

为什么基类对象必须是调用派生虚函数的引用？

```
 #include<iostream>
    using namespace std;

    class A {

    public:
        virtual void print() { cout << "Hello 1" << endl; }

    };

    class B : public A {

    public:
        int x;
        void print() { cout << "Hello " << x << endl; }

    };

    void main(){

        B obj1;
        A &obj2 = obj1;
        A obj3 = obj1; // Why it is different from obj2

        obj1.x = 2;

        obj1.print();
        obj2.print();
        obj3.print(); // ?

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T01:12:12.320

当您将派生对象分配给基变量时，它会被“[切片](https://en.wikipedia.org/wiki/Object_slicing)”到基类的实例中；它不再是派生的实例。这是必要的，因为基变量只为基类的实例保留了足够的空间；派生类的实例及其附加数据不适合。

使用引用时，不必将对象复制到更小的空间中，因此不会发生切片。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T01:11:27.617

```
A obj3 = obj1; // Why it is different from obj2 
```

**通过复制**构造 obj3 。在这种情况下，obj1 向上转换为 A 类型，其中 obj3 由 obj1 的“A”参数构造而成。这种现象称为[切片](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)。

```
A &obj2 = obj1; 
```

此行将引用 obj2 绑定到 obj1 的实例。通过将 obj2 指向它，您已将 obj1 向上转换为“A”。请记住，在 C++ 中，引用实际上只是一个别名。您刚刚为 obj1 指定了一个不同的名称，该名称绑定到一个基类类型。

因此`A obj3`，在堆栈上分配和构造一个全新的对象，同时`A &obj2`为已经存在的其他一些东西创建一个引用/别名。

# assembly - 如何从 MIPS 组件打印到屏幕

> ID：10325970
> 
> 赞同：1
> 
> 时间：2012-04-26T01:10:52.447
> 
> 标签：assembly, mips, mips32, mars-simulator

```
.text
emitchar:   

lui $t0,0xffff
polling:
lw  $t1,8($t0)  
andi    $t1,$t1,0x0001
beq $t1,$zero,polling
sw  $a0,0xc($t0)    

.data 
```

有人告诉我这是怎么做的，但是当我运行带有显示和键盘添加的模拟器时，屏幕上仍然没有输出。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:32:15.530

启动代码后，您是否在键盘窗口中单击“连接到 MIPS”？从帮助按钮：

> 重要提示：仅当您单击工具的“连接到 MIPS”按钮（独立版本中的“组装并运行”）或工具的重置按钮时，发送器控制器就绪位才设置为其初始值 1！如果您运行 MIPS 程序并在 MARS 中将其复位，控制器的就绪位将被清零！配置数据段窗口以显示 MMIO 地址范围，以便您可以直接观察存储在上面给出的 MMIO 地址中的值。

# matlab - MATLAB中的数值比较

> ID：10325972
> 
> 赞同：0
> 
> 时间：2012-04-26T01:11:26.790
> 
> 标签：matlab

我做了计算，得到了以下数字

0.739128438976901 0.739128438976900

我希望 MATLAB 认为它们是相等的，但 MATLAB 认识到第一个大于第二个。我怎样才能让 MATLAB 认为它们是平等的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T01:32:42.873

```
x = 42
y = 42.00001
if abs(x-y) < tolerance
    % do something
end 
```

的设置由`tolerance`您决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:16:27.573

我对 Matlab 不太了解（我自己更像是一个 Mathematica 人），但似乎有一个`roundn(x,n)`函数可以将元素四舍五入`x`到最接近的 10^ 倍数`n`。也许这可以在这里使用。

# hudson - 如何解决詹金斯“磁盘空间太低”的问题？

> ID：10325982
> 
> 赞同：52
> 
> 时间：2012-04-26T01:13:01.640
> 
> 标签：hudson, jenkins, centos, diskspace

我已经在我的*CentOS*机器上部署了 Jenkins，*Jenkins*运行了 3 天，但是昨天出现了`Disk space is too low. Only 1.019GB left.`问题。

我该如何解决这个问题，它使我的主人离线数小时？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-12-22T12:42:23.773

您可以从 jenkins UI 轻松更改阈值（我的版本是 1.651.3）：

[ ![詹金斯节点阻止监控页面](../Images/c61d3317d21bb19785dcac377e1d7c9c.png)]

* * *

# 更新：如何确保高磁盘空间

此功能旨在防止在可用磁盘空间不足的从站上工作。降低阈值并不能解决某些作业在完成后无法正确清理的事实。

根据您正在构建的内容：

1.  确保您了解构建的磁盘输出是什么 - 如果可能的话 - 将输出限制为仅发生在作业工作区。使用[工作区清理插件](https://plugins.jenkins.io/ws-cleanup)将工作区清理为后期构建步骤。
2.  如果该过程必须将一些数据写入外部文件夹 - 在构建后步骤中手动清理它们。

**Alternative1** - 为每个作业提供一个新的从属（使用现场从属 - 有许多插件与不同的云提供商集成以按需提供动态机器）

**Alternative2** - 在容器内运行构建。构建完成后，所有内容都将被丢弃

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-02-14T07:22:43.660

除了上述方案，还有一种更“常见”的方式——直接从Linux机器上删除最大的空间消耗者。您可以按照以下步骤操作：

1.  登录 Jenkins 机器 (Putty)
2.  cd 到 Jenkins 安装路径

> `ls -lart`用于列出隐藏文件夹，通常 jenkin 安装放在 .jenkins/ 文件夹中
> 
> [xxxxx ~]$ ls -lart
> 
> drwxrwxr-x 12 xxxx 4096 2 月 8 日 02:08 .jenkins/

3.  列出文件夹空间

> 用于`df -h`高级别显示磁盘空间
> 
> `du -sh ./*/`列出当前路径中每个子文件夹的总内存。
> 
> `du -a /etc/ | sort -n -r | head -n 10`将列出 /etc/ 中占用磁盘空间的前 10 个目录

4.  删除旧版本或其他大型文件夹

[![在此处输入图像描述](../Images/9c216eb142aed87a5da910c36fc7ceb5.png)](https://i.stack.imgur.com/uGcbX.png)

> 通常`./job/`文件夹或`./workspace/`文件夹可以是最大的文件夹。请进入并根据需要删除（不要删除整个文件夹）。
> 
> `rm -rf theFolderToDelete`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-17T22:16:52.577

您可以通过丢弃旧版本来限制磁盘空间的减少。在项目配置中有一个复选框。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-26T04:09:22.353

这实际上是一个合法的问题，所以我不理解反对意见，也许它属于超级用户或服务器故障。这是磁盘空间不足的软警告阈值，而不是硬限制。

*   对于 hudson，请参阅[在哪里配置 hudson 节点磁盘临时空间阈值](https://stackoverflow.com/questions/1923406/where-to-configure-hudson-node-disk-temp-space-thresholds)- 这是在谈论主机，而不是节点

詹金斯也是一样。结论是对于许多小型项目， 调用的[系统属性](https://wiki.jenkins-ci.org/display/JENKINS/Features+controlled+by+system+properties)`hudson.diagnosis.HudsonHomeDiskUsageChecker.freeSpaceThreshold`可以减少。

在说我没有测试它并且有一个免责声明

> **没有兼容性保证**
> 
> 一般来说，这些开关通常是实验性质的，如有更改，恕不另行通知。如果您发现其中一些有用，请提交一张票以将其推广到官方功能。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-25T05:15:52.920

我遇到了同样的问题。我的 jenkins 版本是 2.3，它的 UI 略有不同。把它放在这里，以便它可以帮助某人。将两个磁盘空间阈值都增加到 5GB 解决了这个问题。

[![在此处输入图像描述](../Images/d8c4646b8767ff7bf85e68bc6c1e72ad.png)](https://i.stack.imgur.com/u59bl.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-06T15:57:36.840

***要检查Jenkins Job***的可用空间：

# 参数

*   **`FREE_SPACE`**: 所需的可用空间（以*GB*为单位）。

# 工作

```
#!/usr/bin/env bash

free_space="$(df -Ph . | awk 'NR==2 {print $4}')"

if [[ "${free_space}" = *G* ]]; then
  free_space_gb=${x/[^0-9]*/}

  if [[ ${free_space_gb} -lt ${FREE_SPACE} ]]; then
    echo "Warning! Low space: ${free_space}"
    exit 2
  fi
else
  echo "Warning! Unknown: ${free_space}"
  exit 1
fi

echo "Free space: ${free_space}" 
```

# 插件

## 设置构建描述

### 构建后操作

*   **正则表达式**：`Free space: (.*)`
*   **说明**：`Free space: \1`

*   **失败构建的正则表达式**：`Warning! (.*)`

*   **失败构建的描述**：`\1`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-12T07:04:09.633

我有以下构建步骤的清理工作。你可以安排它@daily 或@weekly。

1.  `Execute system groovy script`清理旧作业的构建步骤：

```
 import jenkins.model.Jenkins
    import hudson.model.Job

    BUILDS_TO_KEEP = 5

    for (job in Jenkins.instance.items) {
      println job.name

      def recent = job.builds.limit(BUILDS_TO_KEEP)

      for (build in job.builds) {
        if (!recent.contains(build)) {
          println "Preparing to delete: " + build
          build.delete()
        }
      }
    } 
```

您需要安装[Groovy](https://plugins.jenkins.io/groovy/)插件。

2.  `Execute shell`清理缓存目录的构建步骤

```
rm -r ~/.gradle/
rm -r ~/.m2/

echo "Disk space"
du -h -s / 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-18T11:54:58.607

[对于不知道配置在哪里的人，请从https://updates.jenkins-ci.org/download/plugins/tmpcleaner/](https://updates.jenkins-ci.org/download/plugins/tmpcleaner/)下载 tmpcleaner

您将在此处获得一个 hpi 文件。转到 Manage Jenkins-> Manage plugins-> Advanced 然后在这里上传 hpi 文件并重启 jenkins

如果您转到管理节点，您可以立即看到不同之处。

由于我的 jenkins 安装在 debian 服务器中，因此我不理解与此相关的大多数答案，因为我找不到 /etc/default 文件夹或 jenkins 文件。如果有人知道 /tmp 文件夹在哪里或如何为 debian 配置它，请在评论中告诉我

[![在此处输入图像描述](../Images/278f082015c559270877fb753d02cbd7.png)](https://i.stack.imgur.com/ckSo6.jpg)

# php - 如何在 Zend Framework 中优先考虑一个助手？

> ID：10325985
> 
> 赞同：1
> 
> 时间：2012-04-26T01:13:30.690
> 
> 标签：php, zend-framework, action, helpers, zend-controller

我有以下代码：

```
 public function _setHelpers() {
        Zend_Controller_Action_HelperBroker::addPrefix('My_Controller_Action_Helpers');
        Zend_Controller_Action_HelperBroker::addPath ( APPLICATION_PATH . '/controllers/helpers' );
    } 
```

有了这个，我可以在 My/Controller/Action/Helpers/Helper.php 或 /application/controllers/helpers/Helper.php 中添加一个助手。没关系，但是我需要优先考虑 /application/ 中的那个，也就是说：如果我有两个助手加载 /application 中的那个而不是 My/Controller/ 中的那个...

**编辑**

我可以通过将代码更改为此来解决此问题：

```
 public function _setHelpers() {
    $prefix = 'My_Controller_Action_Helpers';
    Zend_Controller_Action_HelperBroker::addPrefix ( $prefix );
    Zend_Controller_Action_HelperBroker::addPath ( APPLICATION_PATH . '/controllers/helpers', 'My_Controller_Action_Helper' );
    return $this;
} 
```

您可能会注意到，它几乎相同，不同之处在于在添加路径时我还添加了前缀。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:52:51.183

添加到 Helper Broker 的插件路径`Zend_Loader_PluginLoader`使用 LIFO 堆栈作为路径，因此添加的最后一个路径是第一个检查的路径。鉴于您的代码，由于您`application`第二次添加路径，因此它应该优先于`My/Controller`（两者`addPrefix`并`addPath`调用相同的方法）中的文件，`Zend_Loader_PluginLoader`因此它们实际上是相同的东西。

这不是你要找的吗？

# php - 使用 javascript 和多个 html 字段的数学

> ID：10325987
> 
> 赞同：0
> 
> 时间：2012-04-26T01:13:38.830
> 
> 标签：php, javascript, jquery, sum

我有一个脚本，可以根据数据库查询动态创建具有不同数量的列和行的表。这在两个不同的数据库表上完成了两次。我在每个表的底部都有一行，输入的值是上列中单元格的总和。这些输入为第一个表和第二个表命名`itotal$m`（其中`$m`是一个递增的数字） 。`etotal$m`所以我最终得到的是一些输入字段，其中第一行总计的名称等，`itotal1`第二行的等。`itotal2``etotal1``etotal2`

我想用这些总数执行一些简单的数学运算，减去`etotal1`from `itotal1`，`etotal2`from`itotal2`等等，然后在另一个输入中显示结果。我想使用附加到`onChange`事件的 javascript 函数，以便用户可以更改输入框的值并查看结果。

不幸的是，我还没有设法弄清楚如何做到这一点。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:32:09.917

假设 ：

*   有两个表`id="iTable"`和`id="eTable"`,
*   要拥有的所有列总计字段`class="colTotal"`，
*   两个表要一致（即它们的列顺序相同），
*   要具有的目标输入元素`class="diffValue"`，则：

jQuery：

```
$(function(){
    var $iTableTotals = $("#iTable .colTotal");
    var $eTableTotals = $("#eTable .colTotal");
    var $diffValues = $(".diffValue");
    $(".colTotal").on('change keyup', function() {
        $iTableTotals.each(function(i){
            var diff = Number($iTableTotals.eq(i).val()) - Number($eTableTotals.eq(i).val());
            $diffValues.eq(i).val(diff);
        });
    });
    $iTableTotals.eq(0).change();
}); 
```

见[小提琴](http://jsfiddle.net/yHFwH/)

# html - a:active 选择器不适用于 ie 中的图像链接

> ID：10325994
> 
> 赞同：0
> 
> 时间：2012-04-26T01:14:06.337
> 
> 标签：html, css, internet-explorer

鉴于此超链接格式：

```
a        { display: block; margin: 10px; border: 2px solid black }
a:hover  { border-color: green }
a:active { border-color: red   }​ 
```

然后，有一些标记：

```
<a href="">text</a>
<a href=""><img src="http://dummyimage.com/300x20"/></a>
<a href="">text</a>​ 
```

**IE9，YU NO : 激活图像链接？**

（在这里试试：http: [//jsfiddle.net/Vutj8/8/](http://jsfiddle.net/Vutj8/8/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:17:33.230

尝试这个

```
a:active, a:focus { border-color: red   }​ 
```

# mysql - 获取用户好友、子查询、性能

> ID：10325995
> 
> 赞同：0
> 
> 时间：2012-04-26T01:14:24.230
> 
> 标签：mysql, sql, performance

我有两张桌子：`User`和`User2Friend`。我需要获取用户的朋友。查询应该处理两列作为 FriendId:`FriendId`并且`UserId`因为我们不知道谁添加了谁。结果两人都是朋友。

查询：

```
SELECT DISTINCT
    `Id`
    , `UserName`
FROM `User`
WHERE `Id` IN
    (SELECT
        IF(`UserId` = 25, `FriendId`, `UserId`) -- This important part - friends are always mutual
    FROM `User2Friend`
    WHERE `UserId` = 25
    OR `FriendId` = 25)
LIMIT 10 
```

架构：

```
CREATE TABLE `User` (
  `Id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `UserName` varchar(16) DEFAULT NULL,
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE `User2Friend` (
  `Id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `UserId` int(10) unsigned NOT NULL,
  `FriendId` int(10) unsigned NOT NULL,
  PRIMARY KEY (`Id`),
  UNIQUE KEY `UserIdFriendId` (`UserId`, `FriendId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

如果用户 A 将用户 B 添加为好友，则用户 B 会出现在用户 A 的好友列表中，之后用户 B 的好友列表中也必须有用户 A。我不太喜欢子查询方法，因为我不能在子选择中使用 LIMIT。

我预计会有几百万用户，所以性能很重要。

您认为将此查询拆分为两个单独的查询会更好吗？

或者也许我需要棘手的加入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:44:52.587

```
$sql1 = ("SELECT Id, UserName FROM User WHERE UserId = 25");
foreach($sql1 as $row){
    $id     = $row['Id'];
    $name   = $row['UserName'];
        $sql2 = ("SELECT * FROM User2Friend WHERE FriendId = $id LIMIT 10");
        foreach($sql2 as $row){
            $FriendId   = $row['FriendId'];
            $FriendName = $row['FriendName'];
        }
} 
```

我不知道我是否理解得很好，但看看这是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:17:45.357

您在 User2Friend 表中创建第三个字段（Accepted），使用默认值（N），当 A 添加朋友 B 时，它将能够列出该朋友并可以确认（S）并接受友谊。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T00:48:01.687

好的！我已将其拆分为两个查询...

# c# - 如何将表单值传递给控制器 并将值返回给 jQuery 数据表

> ID：10325996
> 
> 赞同：0
> 
> 时间：2012-04-26T01:14:32.857
> 
> 标签：c#, jquery, asp.net-mvc-3, datatables

我想做的就是这样。
在我提交表单后，表单中的值被传递给控制器​​，这些值被转换并返回到数据表中。

我知道如何将 json 数据从控制器返回到数据表。
我也知道如何通过 Ajax.BeginForm 将表单值传递给控制器​​。
但我不知道如何做到这两点。
这是我的代码，它只是将固定的 json 数据返回到数据表。

**看法**

```
 <script type="text/javascript">

        function PullIntoTable() {
            $('#example').dataTable({
                "bDestroy": true,
                "bAutoWidth": false,
                "aoColumns": [
                { sWidth: '30%' },
                { sWidth: '10%' },
                { sWidth: '20%' },
                { sWidth: '20%' },
                { sWidth: '20%' }, ],
                "sAjaxSource": '@Url.Action("Search", "SearchCompany")',
                "fnServerData": function (sSource, aoData, fnCallback) {
                    $.ajax({
                        dataType: 'json',
                        type: "POST",
                        url: sSource,
                        data: aoData,
                        success: function (json) {
                            fnCallback(json);
                        }
                    })
                }
            });
        };

    </script>

    <input type="submit" value="Search" onclick="PullIntoTable()" />

<table cellpadding="0" cellspacing="0" border="0" class="search_result" id="example" width="100%">
    <thead>
        <tr>
            <th>Company</th>
            <th>Location</th>
            <th>Address</th>
            <th>Status</th>
            <th>Inactive</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
    <tfoot>
        <tr>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
        </tr>
    </tfoot>
</table> 
```

**控制器**

```
public class SearchCompanyController : Controller
{
    [HttpPost]
    public ActionResult Search()
    {
        var Result = new List<Result>()
        {
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"},
            new Result{Name="DummyCompany", Location="DummyLocation", Address="DummyAddress", Status="SL", Inactive="Y"}
        };

        return Json(
            new { aaData = Result.Select(x => new[] { x.Name, x.Location, x.Address, x.Status, x.Inactive }) },
            JsonRequestBehavior.DenyGet
            );
    }
}

public struct Result
{
    public string Name { get; set; }
    public string Location { get; set; }
    public string Address { get; set; }
    public string Status { get; set; }
    public string Inactive { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:27:23.210

Datatables 需要[非常特定格式](http://datatables.net/usage/server-side)的数据。

[有一个使用 OpenSearch 的示例](http://datatables.net/plug-ins/server-data-formats)，您可以收集详细信息以用于您的特定实现（即，您在 javascript 中为回调构造 json 对象的非数据表特定实现）。这个解决方案对我最有吸引力，因为它将特定于数据表的实现细节保留在服务器端代码之外。

[datatables.net 站点上](http://datatables.net/forums/discussion/6678/serverside-processing-for-asp.net-c-with-sql-server/p1)已经有 asp.net示例，它们基本上可以为您提供所需的一切，尽管采用了相当丑陋的匈牙利符号格式。

我手头没有样本，但我确实获取了 c# 样本并将其转换为动作过滤器，因此我不必处理匈牙利符号。如果我把手放在它上面，并且你有兴趣，我会看看我是否可以把它贴在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:27:37.300

解决了。
我可以从控制器获取值并将它们拉入数据表，如下所示

**查看脚本**

```
function PullIntoTable(e) {
    $('#example').dataTable({
        "bDestroy": true,
        "bAutoWidth": false,
        "aoColumns": [
        { sWidth: '30%' },
        { sWidth: '10%' },
        { sWidth: '20%' },
        { sWidth: '20%' },
        { sWidth: '20%' }, ],
        "aaData": e.aaData
    });
}; 
```

# sql-server - 成功转换为十进制 (18,2) 后出现“将 varchar 转换为数据类型数字”错误

> ID：10325998
> 
> 赞同：0
> 
> 时间：2012-04-26T01:14:47.513
> 
> 标签：sql-server, sql-server-2008, type-conversion

我有一个用于解析的临时表，`#rp`.

`#rp`包含一`nvarchar(max)`列，`#rp.col8`，其中包含精确到小数点后两位的正数和负数，例如“1234.26”。

我可以运行以下查询并得到一组转换后的值：

```
select * from
(
    select CONVERT(decimal(18,2),rp.col8) as PARSEAMT
    from #rp

    where
    --#rp filtering criteria
)q 
```

但是，当我尝试以`PARSEAMT = 0`下列方式查询时，我得到标准的“8114，将数据类型 varchar 转换为数字时出错。”：

```
select * from
(
    select CONVERT(decimal(18,2),col8) as PARSEAMT
    from #rp

    where
    --#rp filtering criteria
)q  
where q.PARSEAMT = 0 
```

如果没有该`where`子句，查询运行良好并生成预期值。

我还尝试过其他子句，例如`where q.PARSEAMT = 0.00`and `where q.PARSEAMT = convert(decimal(18,2),0)`。

我在比较中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:20:24.887

我打算建议您将 PARSEAMT 选择到另一个临时表/表变量中，但我可以从您的评论中看到您已经这样做了。

出于兴趣，以下结果是什么？

```
select 
    col8
from
    #rp
where
    -- ISNUMERIC returns 1 when the input expression evaluates to a valid 
    -- numeric data type; otherwise it returns 0\. Valid numeric data types 
    -- include the following:
    isnumeric(col8) <> 1 
```