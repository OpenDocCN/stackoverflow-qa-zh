# StackOverflow 问答 10926000-10926999

# sql-server-2008 - 创建一个视图以获取在每门课程中获得最高分的学生的姓名

> ID：10926007
> 
> 赞同：0
> 
> 时间：2012-06-07T05:12:03.093
> 
> 标签：sql-server-2008, view

课程表：courseId，courseName，tutor
学生表：studentId，studentName
Marks 表：marksId，studentId，courseId，marks
如果需要更多信息请评论

![在此处输入图像描述](../Images/e7b7f0a256d37fd7f06d07a1e1eccaf0.png)

<\br>

```
CREATE VIEW maxmarks 
AS
SELECT b.studentName,courseId from [dbo].[zz_16_Marks_tbl] a,[dbo].[zz_16_Student_tbl] b
WHERE a.studentId=b.studentId AND marks in(
SELECT MAX(marks),courseId FROM [dbo].[zz_16_Marks_tbl] GROUP BY courseId) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:49:50.157

```
CREATE VIEW maxmarks 
AS
WITH CTE AS (SELECT MAX(marks),courseId FROM [dbo].[zz_16_Marks_tbl] GROUP BY courseId )
SELECT b.studentName,a.courseId 
from [dbo].[zz_16_Marks_tbl] a
INNER JOIN [dbo].[zz_16_Student_tbl] b ON a.studentId=b.studentId 
INNER JOIN CTE c ON a.courseId =c.courseId and a.marks=b.marks 
```

# javascript - 单击时旋转和居中地球

> ID：10926015
> 
> 赞同：1
> 
> 时间：2012-06-07T05:13:13.113
> 
> 标签：javascript, d3.js

我有这个代码：

```
 d3.json("world-countries.json", function(collection) {
      feature = svg.selectAll("path")
          .data(collection.features)
          .enter().append("svg:path")
          .on("mouseover", function(d) { d3.select(this).style("fill",
                "#ffffff"); })
          .on("mouseout", function(d) { d3.select(this).style("fill",
                "#000000"); })
          .on("click", click)
          .attr("d", clip); 
```

那么我的“点击”功能是

```
 function click() {
        var o1 = projection.invert(d3.mouse(this));
        var lat = o1[0]
        lon = o1[1];
        console.log([o1]);
        projection.origin([o1]);
        circle.origin([o1]);
        refresh();
    } 
```

这是演示[http://bl.ocks.org/2876083](http://bl.ocks.org/2876083)

当我点击 svg 时，地图消失了！

你将如何做到这一点，地球旋转并以“点击”点为中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-12T05:25:50.947

在您发布在 [http://bl.ocks.org/johan/1392560的示例中](http://bl.ocks.org/johan/1392560)

你可以找到：

```
function mousemove() {
    if (m0) {
        var m1 = [d3.event.pageX, d3.event.pageY]
          , o1 = [o0[0] + (m0[0] - m1[0]) / 8, o0[1] + (m1[1] - m0[1]) / 8];
        projection.origin(o1);
        circle.origin(o1);
        refresh();
    }
} 
```

你需要修改`o1`.

`event.pageX`是水平鼠标位置（用于计算水平变化）

`event.pageY`是垂直鼠标位置。

`o1`是地图的新中点，如*[horizo​​ntal,vertical]* 它是使用旧地图中点和鼠标位置的差异*（旧 - 新）计算得出的。*

```
var m1 = [d3.event.pageX, d3.event.pageY]
  , o1 = [o0[0] + (m0[0] - m1[0]) / 8, o0[1] + (m1[1] - m0[1]) / 8]; 
```

# javascript - CSS 不适用于（在第一页之后）尝试使用 javascript 打印 html 页面

> ID：10926017
> 
> 赞同：0
> 
> 时间：2012-06-07T05:13:45.983
> 
> 标签：javascript, html, css

我的 HTML 页面具有动态生成的内容，并在尝试打印时形成超过 1 页的长度。问题从第二页出现，其中 css 没有正确应用。HTML 表格行的边框线未完全显示。

我为 HTML 表格申请的 CSS 是

```
border: 1px solid #DADADB;
background:#F3F3F3;
text-align:center;
font-size:15px; 
```

FWIW，要打印的内容被放置在一个 HTML 表格元素中，该元素被放置在一个 DIV 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:29:23.840

在打印视图中，某些元素的某些样式（如果未在 CSS 中给出）成为默认样式。正因为如此 - 打印视图中的所有表单元素（输入和文本区域）都有覆盖表格边框的白色背景。解决方案 - 将输入和文本区域的背景设置为无。

```
input, textarea {
    background: none;
} 
```

并做了 ;）

# java - 如何从jsp设置动作变量值

> ID：10926019
> 
> 赞同：0
> 
> 时间：2012-06-07T05:14:04.063
> 
> 标签：java, jsp, struts2

我的代码是这样的：

```
public class CustoTypeAction extends ActionSupport{
   private ResultDto resultDto;
   //setter & getter resultDto
} 
```

配置：

```
<action name="listCustoType" method="listCustomerType" class="custoType">
  <result name="success">listCustoType.jsp</result> 
```

如何在页面加载时从 jsp 将 resultDto 值设置为 null？我应该使用什么 struts 标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:16:33.547

据我了解，您必须实现`Preparable`接口。它在`execute()`方法之前执行。

[http://struts.apache.org/2.1.6/struts2-core/apidocs/com/opensymphony/xwork2/Preparable.html](http://struts.apache.org/2.1.6/struts2-core/apidocs/com/opensymphony/xwork2/Preparable.html)

如果您只想显示一次对象，并且必须在用户重新加载页面后消失，则必须使用 session. 如果文件已经下雪，您可以更改会话中的值，使其在下次重新加载时不得显示。

您可以从此处查看使用会话的示例：

[http://www.roseindia.net/struts/struts2/struts2-login.shtml](http://www.roseindia.net/struts/struts2/struts2-login.shtml)

# css - CSS：图像周围的边框移动它

> ID：10926023
> 
> 赞同：0
> 
> 时间：2012-06-07T05:14:11.787
> 
> 标签：css, css-transitions

所以我的网页上有我的图片。在我的 css 代码中，我有一个过渡`:hover`（出现辉光），效果很好，我想在`:active`. 这是我的代码：

```
#bb
{
    top: 55%;
    left: 6%;
    opacity: 0.85;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
}
#bb:hover
{  
    opacity: 1;
    -webkit-box-shadow: 0px 0px 20px rgba(255,255,255,0.75);
    -moz-box-shadow: 0px 0px 20px rgba(255,255,255,0.75);
    box-shadow: 0px 0px 20px rgba(255,255,255,0.75);
}
#bb:active
{
    opacity: 1;
    border: 10px solid rgba(87,87,87,0.8);
} 
```

我的问题如下：如何让笔触出现*在图像周围*而不移动它，以及如何让它保持“活动”而不必按住图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:22:40.550

你可以使用 CSS **box-sizing:border-box;** . 像这样写：

```
#bb:active
{
    opacity: 1;
    border: 10px solid rgba(87,87,87,0.8);
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
} 
```

检查这个[http://jsfiddle.net/4g6d9/](http://jsfiddle.net/4g6d9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T05:23:10.823

边框占据空间，因此添加边框通常会替换元素。如果您使用该`outline`属性而不是`border`，则不会发生位移——但轮廓将出现在任何原本会出现在同一位置的内容之上，即可能覆盖其他内容。

的含义`:active`在不同的浏览器中有不同的解释。要使键盘或鼠标事件发生特定的事情（尽可能跨浏览器），您需要使用 JavaScript。

# javascript - JavaScript 中的“”到底是什么？

> ID：10926024
> 
> 赞同：5
> 
> 时间：2012-06-07T05:14:49.197
> 
> 标签：javascript

这个说`false`，意思是`""`是一个数字：

```
alert(isNaN("")); 
```

这个说`NaN`，意思`""`是 不是数字，不能转换：

```
alert(parseFloat("")); 
```

我期待第二个代码转换`""`为，`0`因为`""`在测试时是一个数字，`IsNaN`但我错了！我是疯了还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T05:19:32.620

`parseFloat`尝试从字符串中解析一个数字，其中 as在检查`isNaN` [参数](http://ecma-international.org/ecma-262/5.1/#sec-15.1.2.4)之前将其转换为数字：

```
Number("") //0 http://ecma-international.org/ecma-262/5.1/#sec-9.3.1
parseFloat("") //NaN http://ecma-international.org/ecma-262/5.1/#sec-15.1.2.3 
```

显然这是“破碎”或“令人困惑”，所以从规格来看：

> ECMAScript 代码测试值 X 是否为 NaN 的可靠方法是 X !== X 形式的表达式。当且仅当 X 为 NaN 时结果才为真。

```
0 !== 0 // false
NaN !== NaN //true

function isExactlyNaN(x) {
    return x !== x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:19:01.670

`isNaN`转换为 Number 类型并检查该值是否为特殊数字 NaN。

转换为数字的空字符串是`0`( `+"" === 0`)，因为`0`你`NaN`看不到`false`。

[然而parseFloat](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)比简单地转换为数字类型更复杂，它返回`NaN`空字符串 ( `parseFloat("") === NaN`)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T05:21:32.867

不是`NaN`不等于是一个数字。这只是意味着你不是很特别的价值`NaN`。

[或者任何可以`NaN`通过 JS 语言的神秘转换规则转换的东西。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T05:20:32.843

Javascript 将空字符串解释为 0 失败 isNaN 测试。至于 parseFloat 尝试解析失败并返回 NaN 的空字符串中的数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T16:25:03.000

要理解这种行为，理解语义很重要。

`isNaN`检查 value 是否不能**强制**为数字，如果在 value 上调用它返回 false，则表示`Number(value)`将返回有效数字。

`parseFloat` **从字符串中解析**数字，如果字符串不以任何数字开头，则返回`NaN`，因为没有找到要解析的数字。

程序员倾向于过度使用`parseInt`和`parseFloat`强制，而在大多数情况下他们应该使用`Number`，这更严格并且没有那么混乱。

# android - 当用户单击列表中的按钮时如何在展开的列表中展开列表

> ID：10926026
> 
> 赞同：2
> 
> 时间：2012-06-07T05:15:01.193
> 
> 标签：android, expandablelistview

我有一个包含组视图和子视图的 ExpandableListView。GroupViews 包含 3 个文本视图和 2 个图像视图。单击第二个图像视图时，组行应该被展开，并且应该显示子行。

我该怎么做..？谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:20:56.893

嗨，这是您问题的答案找到[链接](https://stackoverflow.com/questions/7514606/how-to-display-data-in-android-page-using-accordion)

有可能的。有很多方法可以做到这一点。例如访问 Android - 手风琴小部件

# c++ - 制作指针 const C++

> ID：10926027
> 
> 赞同：-1
> 
> 时间：2012-06-07T05:15:01.397
> 
> 标签：c++, pointers, constants

我有两个节点指针向量。

```
vector<Node*> tmp; 

vector<Node*> nodes; 
```

我说`tmp = nodes;`

如果 I `delete nodes`, then`tmp`也被删除。

有什么方法可以`tmp`在修改时不进行`nodes`修改，例如将其设为 const？

我基本上在运行 Dijkstra's。但该算法在确定最短路径时总是删除节点向量。这意味着我只能做一次从源到目的地的最短路径。

如果我有一个图表 0--->1--->2--->3 即

```
CGraph g;

g.Dijkstras(0);
g.PrintShortestRouteTo(2);
g.Dijktras(2);         
g.PrintShortestRouteTo(3);    <-- source is still 0 since nodes is deleted
                                  therefore I get the path from 0 to 2

  class Node
{
public:
    Node(int id)
        : id(id), previous(NULL),
        distanceFromStart(INT_MAX)
    {
        nodes.push_back(this);
    }
public:
    int id;
    Node* previous;
    int distanceFromStart;
};

vector<Node*> nodes;

void CGraph::Dijkstras(int source)
{

    nodes[source]->distanceFromStart =  0;   

    for (int i = 0; i < (int)nodes.size(); i++)
        cout << nodes[i]->distanceFromStart << " " ;

    cout << "------------------------" << endl;

    while (nodes.size() > 0)
    {
        Node* smallest = ExtractSmallest(nodes);
        //cout << "Smallest: " << smallest->id << " ";
        //Node* smallest = nnodes[1];
        vector<Node*>* adjacentNodes =
            AdjacentRemainingNodes(smallest);
        const int size = adjacentNodes->size();
        for (int i=0; i<size; ++i)
        {
            Node* adjacent = adjacentNodes->at(i);
            int distance = Distance(smallest, adjacent) +
                smallest->distanceFromStart;
            if (distance < adjacent->distanceFromStart)
            {
                adjacent->distanceFromStart = distance;
                adjacent->previous = smallest;
            }
        }
        delete adjacentNodes;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:22:02.990

你不能写`delete nodes`，因为`nodes`它不是一个指针。如果你这样写，代码将无法编译。

当你写这个：

```
vector<Node*> tmp = nodes; 
```

然后你制作一个向量对象的副本，而不是向量的内容。向量的两个副本中的向量内容相同。因此，如果您更改一个向量的内容，该更改也将反映在该向量的另一个副本中。

如果您还想复制内容，请写下：

```
std::vector<Node*> tmp;
tmp.reserve(nodes.size()):

//include <algorithm> for std::transform
std::transform(nodes.begin(),   
               nodes.end(),
               std::back_inserter(tmp),
               [](Node const *node) { return new Node(*node); }); 
```

[**注意：**上面的代码只能在 C++11 中编译，因为它使用 lambda 表达式。在 C++03 中，您可以使用函数或仿函数来代替它。]

考虑使用智能指针，例如`std::unique_ptr<Node>`或`std::shared_ptr<Node>`代替`Node*`. 智能指针管理内存本身，您需要担心它。但是，如果你使用智能指针，那么上面的代码会有点不同，但如果你想复制内容，基本思想是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:23:10.050

管理此问题的一种方法是改用共享指针

```
vector<shared_ptr<Node> > tmp; 
```

这样，即使 tmp/Nodes 在其他对象（Node* 指向的对象）之前超出范围，仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T05:24:24.240

如果它是一个类，您可能需要为 Node 实现一个复制构造函数，然后循环通过“节点”将每个项目复制到 tmp 中

```
tmp.clear();

for(vector<Node*>::iterator it = nodes.begin(); it != nodes.end(); it++)
{
    Node* copy = new Node((*it));

    tmp.push_back(copy);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:22:09.580

你的问题有点令人困惑，但我的解释是：

```
std::vector<Node *> *tmp;
std::vector<Node *> *nodes;

nodes = somehow_gets_dynamically_created_vector();
tmp = nodes;
// perhaps do other things with nodes
delete nodes; 
```

然后，代码保持`tmp`悬空状态（即，它指向已释放的内存）。但。这应该是安全的：

```
std::vector<Node *> tmp;
std::vector<Node *> *nodes;

nodes = somehow_gets_dynamically_created_vector();
tmp = *nodes;
// perhaps do other things with nodes
delete nodes; 
```

现在，在您的示例代码中，唯一看起来与您描述的内容模糊相似的代码是代码如何处理`adjacentNodes`变量。而且，我收集到`nodes`由于这`delete adjacentNodes`条线而发生了一些不好的事情。我会确保该`AdjacentRemainingNodes`功能正在执行您认为应该执行的操作。至少它应该返回由调用提供的值，该值`new std::vector<Node *>`在该函数主体内执行的代码中的某处。如果没有，则`delete`on`adjacentNodes`无效。

但也许你心里有不同的意思。相反，如果您的意思是在复制`nodes`到`tmp`之后`tmp`看到更新的值到`distantFromStart`，那么这是使用指针的结果。您可以通过不在向量中使用指针来避免该问题。

```
std::vector<Node> tmp;
std::vector<Node> nodes;

tmp = nodes; 
```

但是，您将需要定义一个复制构造函数或以其他方式弄清楚如何处理该`previous`成员。例如，复制构造函数可以只将`previous`成员设置为`NULL`而不是从 LHS 复制值。

```
Node::Node (const Node &lhs)
    : id(lhs.id), previous(NULL), distanceFromStart(lhs.distanceFromStart)
 {} 
```

但是你应该做任何合适的事情。

# iphone - NSTimer - 创建多个实例

> ID：10926032
> 
> 赞同：0
> 
> 时间：2012-06-07T05:15:35.457
> 
> 标签：iphone, ios, ipad, nstimer, polling

我有一个应用程序，它会定期轮询服务器。轮询是使用定时器任务执行的。定时器只需要在一个屏幕上使用，所以当我移动到另一个屏幕时，定时器无效。

我观察到有时计时器会失效，但有时不会。当它没有失效时，会继续创建多个实例。

我已按如下方式初始化计时器：

```
 timer = [NSTimer scheduledTimerWithTimeInterval: 2
                                         target: self
                                       selector: @selector(timerTask:)
                                       userInfo: nil
                                        repeats: YES]; 
```

并作废如下：

```
if(timer){

    [timer invalidate];
    timer = nil;

} 
```

请帮忙，在这种情况下需要做什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:04:20.927

您可能应该为`starting`和`stopping`计时器创建 2 种不同的方法，如下所示。

```
-(void)startTimer {

     if([timer isValid]) {
         [timer invalidate];
         timer = nil;
      }

     timer = [NSTimer scheduledTimerWithTimeInterval: 2
                                 target: self
                               selector: @selector(timerTask:)
                               userInfo: nil
                                repeats: YES];
}

-(void)stopTimer {

    if([timer isValid]) {
       [timer invalidate];
       timer = nil;
     }
  } 
```

这允许您`start`使用计时器，如果实例已经有效，它将使其无效并启动一个新实例。停止它会使它失效，并`timer`准备好在您下一次`startTimer`调用时进行初始化。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:20:41.653

您是否正在创建多个计时器？在上面发布的代码中，如果在执行时已经定义了计时器：

```
 timer = [NSTimer scheduledTimerWithTimeInterval: 2
                                     target: self
                                   selector: @selector(timerTask:)
                                   userInfo: nil
                                    repeats: YES]; 
```

对计时器的任何进一步引用只会为您提供最新创建的计时器，获得对原始计时器的引用的唯一方法是检查选择器中的参数并查看它是否与您定义的计时器实例变量不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:34:05.523

没有任何方法可以“恢复” NSTimer。您可以创建几个属性来跟踪创建计时器的日期（包括时间）以及调用屏幕 2 的时间。当您移至屏幕 2 时，使计时器无效，当您返回屏幕 1 时，获取 2 个日期对象之间的时间差，从轮询之间所需的时间中减去该时间差，然后使用该时间间隔创建一个新计时器。这对用户来说似乎是计时器的“恢复”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T06:46:39.350

我认为你应该对象`retain`。`NSTimer`

```
timer = [[NSTimer scheduledTimerWithTimeInterval: 2
                                          target: self
                                        selector: @selector(timerTask:)
                                        userInfo: nil
                                         repeats: YES] retain]; 
```

并使之无效

```
if(timer){

    [timer invalidate];
    [timer release];
    timer = nil;
} 
```

# c# - 使用 asp.net 从 LinkedIN 注销

> ID：10926037
> 
> 赞同：0
> 
> 时间：2012-06-07T05:16:05.747
> 
> 标签：c#, asp.net, dotnetopenauth

我在我的 asp.net 应用程序中使用 openid。对于 Linkedin，我使用了 javascript api 我可以登录我的网站，但我想知道如何从我的网站注销，这也会自动将我从linkedin 注销。请提出一些解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:27:12.087

该协议不允许您将用户从 LinkedIn 中注销。您只能将用户从您自己的站点中注销。这是设计使然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:51:07.530

Javascript函数

```
function logout() {
        IN.User.logout(function () {
            window.location.href = '/logout.aspx'; 
        });
    } 
```

适用于注销，但是当我们离开理想的网站一段时间后，它就不起作用了。

# java - 多个文件上传

> ID：10926044
> 
> 赞同：2
> 
> 时间：2012-06-07T05:16:50.403
> 
> 标签：java, extjs

我正在尝试使用`Extjs`and上传多个文件，`Java`并且我正在使用“application/x-www-form-urlencoded”内容类型并从中获取所有数据和文件的名称`HttpRequest`。我需要上传可能的文件。它可以是文档类型或图像类型。
我的问题如下：

1）在提供静态文件路径的同时，该静态位置的所有文件都将成功上传。但是我需要从不同的位置而不是一个静态位置上传多个文件，所以请尽快帮助我..

这是我的文件上传控制器代码

```
 @RequestMapping(value = "views/upload.action", method = RequestMethod.POST)
public @ResponseBody
Map<String, Object> create(HttpServletRequest request) throws IOException {
    Map<String, Object> fileUpload = new HashMap();
    boolean success = false;
    Enumeration headerNames = request.getHeaderNames();
    while (headerNames.hasMoreElements()) {
        String headerName = (String) headerNames.nextElement();
        if (headerName.equals("x-file-name")) {
            System.out.println("Header " + headerName);
            System.out.println(request.getHeader(headerName));
            BufferedReader reader = request.getReader();
            StringBuilder sb = new StringBuilder();
            String line = reader.readLine();
            while (line != null) {
                sb.append(line + "\n");
                line = reader.readLine();
            }
            reader.close();
            String data = sb.toString();
            success = copyFile(data, request.getHeader(headerName));
        }
    }
    fileUpload.put("success", success);
    return fileUpload;
}
// open file for input
private boolean openFileInput(File file) {
    try {
        fis = new FileInputStream(file);
        dis = new DataInputStream(new BufferedInputStream(fis));
        return true;
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        LOGGER.error("File Not Found...!");
        return false;
    }
}
// copies file
private boolean copyFile(String fileData, String fileName) {
    File file = new File("C://Documents and Settings/infosoft03/Desktop/"
            + fileName);
    //dis = new DataInputStream(new BufferedInputStream(inputStream));

    // File file = new File(fileName);
    boolean success = false;
    try {
        File dir = new File(PropertyReader.getValue("uploadpath"));
        if (!dir.exists()) {
            dir.mkdir();
        }
        // org.apache.commons.io.FileUtils.writeStringToFile(file,
        // fileData);
        //success = openFileInput(file);
        if (success) {
            success = true;
            fos = new FileOutputStream(
                    PropertyReader.getValue("uploadpath") + fileName);
            dos = new DataOutputStream(new BufferedOutputStream(fos));
            byte[] b = new byte[(int) file.length()];
            System.out.println("file length" + b.length);
            for (int i = 0; i < b.length; i++) {
                b[i] = dis.readByte();
            }
            dos.write(b);
        }
    } catch (IOException e) {
        System.out.println("IOException" + e.getMessage());
        e.printStackTrace();
        return success;
    } finally {
        if (dos != null) {
            closeOutputStream(dos);
        }
        if (fos != null) {
            closeOutputStream(fos);
        }
    }
    return success;
} 
```

# javascript - 循环通过类名索引不起作用...替代方案？

> ID：10926053
> 
> 赞同：0
> 
> 时间：2012-06-07T05:18:16.377
> 
> 标签：javascript, loops, for-loop, indexing

```
wins.push(document.getElementsByClassName("page")[x].attributes["id"].value); 
```

此代码来自 JavaScript 中的 for() 循环，使用变量“x”。与 Google Chrome 不同，FireFox 和 Opera 似乎并不理解变量是我希望从中获取属性“id”的类的索引这一事实。

这种方法有替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:48:10.873

我认为你应该这样解决

```
function findPageclasses()
   {
     var Pageclasses= document.getElementsByClassName("page");
     for(var i=0; i<Pageclasses.length; i++)
        {
          wins.push(Pageclasses[i].attributes["id"].value);
        }
    } 
```

# android - 在 android 中为 gridview 项目设置 bgcolor 的问题

> ID：10926057
> 
> 赞同：0
> 
> 时间：2012-06-07T05:18:53.610
> 
> 标签：android, android-layout, gridview

这可能很简单，但我找不到解决方案。问题是在 onitemlongclicklistener 方法中为 gridview 项目设置背景颜色。

我有两个线性布局，一个包含 textview 和 gridview，另一个包含一些按钮（我将此布局设置为屏幕顶部的菜单栏）。我使用 setVisibility(View.GONE) 从屏幕上隐藏第二个，当我对 gridview 项目执行 itemlongclick 时，第二个将同时使用 setVisibility(View.VISIBLE) 出现我想更改单击的 bgcolor /选定的项目。

一切正常，但只要第二个布局可见并且滚动gridview 时，单击/选择的bgcolor 就会消失。

我尝试了很多方法，但我无法解决这个问题。请查看我的编码并告诉我我做错了什么。

```
gv.setOnItemLongClickListener(new OnItemLongClickListener() {
          public boolean onItemLongClick(AdapterView<?> parent, View strings,
                          int position, long id) {
              final Option o = dir.get(position);
             //gv.performItemClick(gv, position,gv.getItemIdAtPosition(position));

              /* if(pos!=-1) 
              {
              gv.getChildAt(pos).setBackgroundColor(0xffffffff);

              }*/
              strings.setSelected(true);
             // TextView tx=(TextView)strings.findViewById(R.id.grid_item_label);
            //  tx.findViewById(id).setBackgroundColor(0xff0000ff);
             /*if(!o.getData().equalsIgnoreCase("o")){

                 //gv.getChildAt(position).setSelected(true);    
                 fill(new File(new File(o.getPath()).getParent()),position);

          }*/
             /*try
             {
                 gv.getSelectedView().setBackgroundColor(0xffcccccc);
             }
             catch(Exception e){
                Toast.makeText(FffsdActivity.this, "ok\n"+e,Toast.LENGTH_SHORT).show();

             }*/

             /*for(int i=0;i<nofifo;i++)

              {
                 try{
                 if(gv.getChildAt(i).isSelected())
                 {
                       gv.getChildAt(i).setBackgroundColor(0xffbbbbbb); 
                        // Toast.makeText(FffsdActivity.this, "yes ok\n"+i,Toast.LENGTH_SHORT).show();

                 }
                 else{
                           gv.getChildAt(i).setBackgroundColor(0xffffffff); 
                         //Toast.makeText(FffsdActivity.this, "no ok\n"+i,Toast.LENGTH_SHORT).show();

                 }
                 }
                 catch(Exception e)
                 {
                Toast.makeText(FffsdActivity.this, "i wanna e :"+e+"\n"+i,Toast.LENGTH_SHORT).show();

                 }
                try{
                 gv.getChildAt(i).setSelected(false);
                   //Toast.makeText(FffsdActivity.this, "gv ok\n"+i,Toast.LENGTH_SHORT).show();

                }catch(Exception e){
                      Toast.makeText(FffsdActivity.this, "i  wanna setselected e :"+e+"\n"+i,Toast.LENGTH_SHORT).show();

                }

              }*/

             // Toast.makeText(FffsdActivity.this, "i wanna c :"+gv.getChildAt(position).isSelected(),Toast.LENGTH_LONG).show();
             //gv.getSelectedView().setBackgroundColor(0xffcccccc);         
             pos=position;
            if(o.getData().equalsIgnoreCase("parent directory"))
            {
                fill(new File(o.getPath()),-1);
            }
             else if(o.getData().equalsIgnoreCase("folder"))
            {
                 llfftools.setVisibility(View.VISIBLE);
                 TranslateAnimation slide = new TranslateAnimation(0, 0,-llfftools.getHeight(),0 );   
                 slide.setDuration(100);   
                 slide.setFillAfter(true);   
                llfftools.startAnimation(slide); 
                //fill(new File(new File(o.getPath()).getParent()));

                onFolderClick(o);
                 //gv.getChildAt(position).setBackgroundColor(0xffaaaaaa);

            } 
```

我的baseadapter是：

```
 public class ImageAdapter extends BaseAdapter {
private Context context;
private final List<Option> mobileValues;

public ImageAdapter(Context context,List<Option> fofivalues) {
    this.context = context;
    this.mobileValues = fofivalues;
}

public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;
    //if (convertView == null) {

        gridView = new View(context);

        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.mobile, null);

    /*} else {
        gridView = (View) convertView;
    }*/
    // set value into textview

                TextView textView = (TextView) gridView.findViewById(R.id.grid_item_label);
                //to set the max no.of chararcters in textview
                String iname=(mobileValues.get(position).getName().length()>10)?mobileValues.get(position).getName().substring(0, 9)+"..":mobileValues.get(position).getName();
                if(mobileValues.get(position).getPosition()==position&&mobileValues.get(position).getPosition()!=-1)
                   {
                    textView.setText(iname);
                    textView.setTextColor(0xff0000ff);
                   }
                else{
                textView.setText(iname);
                }

                // set image based on selected text
                final ImageView imageView = (ImageView) gridView.findViewById(R.id.grid_item_image);
                /*gridView.setOnLongClickListener(new OnLongClickListener() {

                    public boolean onLongClick(View v) {
                        gridView.setBackgroundColor(0xffaaaaaa);
                        // TODO Auto-generated method stub
                        return false;
                    }
                });*/
                String mobile = mobileValues.get(position).getData();
                if(mobile=="o")
                {
                 //do nothing
                    imageView.setImageResource(R.drawable.white);
                }

                else if(mobile=="Parent Directory")
                {
                    imageView.setImageResource(R.drawable.parent);
                }
                else if (mobile=="Folder") 
                {
                    imageView.setImageResource(R.drawable.folderg);
                }
                else{
                    imageView.setImageResource(R.drawable.picicon);
                }

    return gridView;
}

public int getCount() {
    return mobileValues.size();
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

    } 
```

在此先感谢您，如果您还需要更多信息，请告诉我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:03:37.683

在您的 XML 中，将 android:background 属性设置为这样的 xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/home_btn_sessions_pressed"
    android:state_focused="true"
    android:state_pressed="true" />
<item android:drawable="@drawable/home_btn_sessions_pressed"
    android:state_focused="false"
    android:state_pressed="true" />
<item android:drawable="@drawable/home_btn_sessions_selected" android:state_focused="true" />
<item android:drawable="@drawable/home_btn_sessions_default"
    android:state_focused="false"
    android:state_pressed="false" /> </selector> 
```

这里不需要写Java代码。

# google-chrome-extension - 使用浏览器扩展预加载网页

> ID：10926063
> 
> 赞同：2
> 
> 时间：2012-06-07T05:19:47.873
> 
> 标签：google-chrome-extension, pageload, browser-extension

目前，我有一个 Chrome 浏览器扩展程序，可以在新选项卡中打开指定的网页。

我希望浏览器扩展能够完全预加载网页（包括图像和脚本），以便在新选项卡中打开时立即显示。

关于最好的方法的任何想法？如果 Chrome 可以在隐藏选项卡中加载网页，我会这样做，然后在单击新选项卡按钮时显示隐藏选项卡。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:12:37.277

正如我在评论中所说，您可以尝试使用 Chrome[背景页面](http://code.google.com/chrome/extensions/background_pages.html)来做您想做的事。使用您想要预加载的内容设置页面，然后您可以使用您想要的任何类型的请求打开并提供新内容。通读示例（或查看您喜欢的扩展程序的来源）以了解如何操作。

# menu - 根据渲染视图突出显示菜单/子菜单

> ID：10926071
> 
> 赞同：1
> 
> 时间：2012-06-07T05:20:42.507
> 
> 标签：menu, backbone.js, menubar

我有一个相当大的主干应用程序，其中菜单/子菜单是一个单独的视图。在菜单视图中，我有处理点击事件`li`并突出显示它的逻辑。`li`但是，当我从应用程序内导航到另一个视图时（例如，使用路由器），我被困在如何突出显示特定内容上。

可用选项：

1.  从每个视图`render()`中，访问菜单 div 并突出显示所需的`li`
2.  使用事件机制并从每个视图`render()`触发一个事件，例如`'CustomerUpdate::render'`.

我觉得 2] 是正确的方法。但我愿意接受建议。

你遵循什么技术？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T05:57:27.897

**(1)**有点讨厌，它会到处泄露菜单的内部状态和结构。你最终会得到你的主要视图与你的菜单紧密结合，这会导致一个小泥球，而小泥球总是会变成大泥球。

我认为**（2）**是在正确的轨道上，但我会把它拉开一点。当前视图是应用程序状态的一部分，通过路由器切换视图是应用程序状态的变化。我们在 Backbone 中使用什么来跟踪状态和状态变化？我们使用模型和`"change"`事件。如果您的应用程序状态有一个专用的全局模型：

```
AppState  = Backbone.Model.extend({});
app_state = new AppState; 
```

然后管理菜单的视图可以绑定到以下更改`app_state`：

```
initialize: function() {
    _.bindAll(this, 'change_current_view');
    app_state.on('change:current_view', this.change_current_view);
} 
```

并且事件处理程序可以处理`<li>`s：

```
change_current_view: function() {
    this.$('li').removeClass('current');
    // This selector is, of course, just for illustration
    this.$('#' + app_state.get('current_view')).addClass('current');
} 
```

然后您的路由器可以交换视图并`app_state.set({ current_view: '...'})`触发辅助操作。您甚至可以拥有一些东西，例如应用程序级别的视图，用于侦听`"change:current_view"`并让该侦听器处理交换视图；这将简化您的路由器。这是一个快速演示，以帮助说明我在说什么：

> [http://jsfiddle.net/ambiguous/fr8sG/](http://jsfiddle.net/ambiguous/fr8sG/)

这种“应用程序状态模型”方法通常非常有用；您可以轻松地向应用模型添加更多状态位、设置首选项编辑器等。您还将几乎免费获得持久性和应用程序初始化。

# mod-rewrite - mod_rewrite 以避免在干净的 url 之后出现重复的内容

> ID：10926072
> 
> 赞同：0
> 
> 时间：2012-06-07T05:20:51.953
> 
> 标签：mod-rewrite, duplicates, http-status-code-404

我有典型的 mod_rewrite 规则来使 url 更漂亮

```
RewriteRule ^most-viewed-([0-9]+)$ index.php?views=$1 
```

但不知何故，谷歌也设法获得了 index.php?views= 版本，所以现在，在谷歌搜索结果中，两个结果都显示，一个带有 mod_rewrite url，一个是“常规”。

由于内容重复，这对 seo 不利，而且我知道我可以使用规范标签，但我更愿意在访问 index.php 时显示 404，而不被重写规则调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:28:48.800

你应该在你的网站上检查你的页面，让谷歌在某个地方找到 index.php?views=。

您可以对此采取一些措施：

*   检查您的日志以准确了解 Google 爬虫的作用。
    *   如果只有几个页面，请在您的 htaccess 中手动阻止 403 或重定向 301。
    *   如果有很多页面，使用高级正则表达式规则阻止403 或重定向301 以匹配您在 htaccess 中看到的每个案例。
*   在您的重复页面上放置规范规则。
*   使用您的 robots.txt 禁止访问该页面。
*   禁止对webmastertools上的“views”参数进行爬取。

*   在完成每个步骤后检查您的日志，以确切了解 Google 爬虫仍然在做什么。

# cakephp - 如何检索保存（）函数中使用的插入查询

> ID：10926074
> 
> 赞同：3
> 
> 时间：2012-06-07T05:20:57.753
> 
> 标签：cakephp

我必须使用 save() 插入以下数据。数据来自html表。

```
Array
(
[Test] => Array
    (
        [1] => Array
            (
                [patient_id] => 58
                [dt_test] => 2012-06-04
                [name] => dfg
                [result] => 34
            )

        [2] => Array
            (
                [patient_id] => 58
                [dt_test] => 2012-06-18
                [name] => dsfg
                [result] => 76
            )

    ) 
```

) id 是 'test' 的主键

没有验证错误。但没有任何行插入到表“测试”中。如何检查用于插入数据的 sql 查询。我的数据库是 postgres，版本是 1.3

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T10:47:24.200

要查看查询，您需要启用调试模式。在**/cakephp/app/config/core.php**你必须设置调试级别：

```
Configure::write('debug', 2); 
```

然后您可以通过将此代码放在您的视图文件中来打印所有查询：

```
<?php echo $this->element('sql_dump'); ?> 
```

如果您更喜欢从控制器显示它们，则将此行放在 save() 之后：

```
debug($this->Test->getDataSource()->getLog(false, false)); 
```

# perl - 使用 Text::Wrap:wrap() 减少行首的空格

> ID：10926084
> 
> 赞同：-2
> 
> 时间：2012-06-07T05:21:58.610
> 
> 标签：perl

我想将列号限制为 45 个字符。我正在使用 Text::Wrap:wrap 如下。

```
$Text::Wrap::columns = 44;
print FOUT wrap('','' ,<FIN>); 
```

它将所有列制作为 44 个字符而不会损坏工作。但它在开始时减少了一些行的空间。

例如：使用 之前`wrap()`，如果一行开头有 5 个空格，使用 之后`wrap()`，空格变为 3。

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T14:49:05.297

我在 Text::Wrap 的 POD 文档中看到了这一点：

> `Text::Wrap::wrap()`通过将其输入中的所有选项卡展开为空格来开始其工作。它所做的最后一件事是将空格重新转换为制表符。如果您不希望结果中出现选项卡，请设置`$Text::Wrap::unexpand`为 false 值。同样，如果您不想使用 8 个字符的制表位，请将其设置`$Text::Wrap::tabstop`为您想要的制表位的字符数。

这可以解释在行首删除制表符的空格。您需要尝试一下`$Text::Wrap::tabstop`，`$Text::Wrap::unexpand`看看这是否能得到您想要的结果。

您可能想尝试[Text::Format](https://metacpan.org/module/Text%3a%3aFormat)或[Text::Wrapper](https://metacpan.org/module/Text%3a%3aWrapper)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:14:27.163

如果我正确理解您的问题， Text::Wrap 将（并非不合理地）删除字符串前面的额外空格。你不希望它发生

这是用下划线替换行前空格的解决方案，通过 wrap() 运行它，然后删除下划线

```
use Text::Wrap;

#test data, note the 5 spaces at the start of some lines
for (1..4) { push @a,"     hello I love you", "Won't you tell me your name? ";} 
push @a,"She's walking down the street","     Blind to every eye she meets","Do you think you\'ll be the guy", "To make the queen of the angels sigh?";

#make it longer with repeating
push @b,@a,@a,@a;

$Text::Wrap::columns = 44;

#show bad behaviour
print "VERSION 1\n";
print wrap("","",@b);

#fixup strings with leading underscores
map {s/^\s+/"_" x length(\1)/e} @b;

@z=wrap("","",@b);

#remove _
map{s/_+/" " x length(\1)/ge} @z;
print "\nVERSION 2\n";
print @z; 
```

# database - 用于高效用户访问权限查找的数据库选择

> ID：10926086
> 
> 赞同：1
> 
> 时间：2012-06-07T05:22:02.010
> 
> 标签：database, database-design, social-networking, user-permissions

我想创建一个方案，用于在社交网站的数据库中存储和访问查看权限。这个问题与这里的其他问题类似，例如[查看权限通常如何在关系数据库中实现？](https://stackoverflow.com/questions/3122772/how-are-viewing-permissions-usually-implemented-in-a-relational-database)在数据库中[指定用户权限的最有效方法是什么？](https://stackoverflow.com/questions/4391949/what-is-the-most-efficient-way-to-specify-user-permissions-in-a-database)，但主要有一个显着的区别：我**不会像这些人那样被迫使用关系数据库**，并且可以四处寻找其他解决方案。即使我最终选择了关系解决方案，我也可以使用**缓存**来存储我想要的任何类型的预先计算的结构，只要可以以合理的方式处理更新。

几个项目应该共享相似的访问权限设置（照片、状态更新等），这些是我现在要处理的主要设置：

*   私人的
*   上市
*   我的朋友可以使用
*   对我朋友的朋友可用
*   可用我的群组

前两个当然很简单，但后两个似乎很复杂。当前的实现使用关系数据库，每个项目都有标志，我想不出没有子查询或多个查询的方法来解决它。当然，我可以使用多对多表将项目与组甚至用户组合在一起，但我担心每次发生任何变化时都会导致大量更新。

现在，获取实际内容是轻而易举的事，但我花了很多时间检查权限。此外，我可以在一个请求中获得一堆照片，但我需要单独检查查看权限，因为可能适用不同的规则。该解决方案似乎根本无法扩展。

我还想为特定项目的特定用户或组处理异常。最重要的是，可能有一些情况应该根据项目类别进行不同的处理。例如，您可能希望授予在照片中被标记的用户查看该照片的权利（例如，为了抵制[网络欺凌](http://en.wikipedia.org/wiki/Cyberbullying)）。

*   其他人如何解决这个问题？
*   有没有聪明的方法可以使这个工作与关系数据库一起工作？
*   如果应该以类似方式处理许多类别的项目，我可以以 DRY 方式执行此操作吗？
*   我应该研究其他类型的数据库，例如图形数据库或其他什么？在这种情况下对特定软件有什么建议吗？

# javascript - Kadane 的 Max Sub Array 算法是否适用于所有正整数数组？

> ID：10926092
> 
> 赞同：4
> 
> 时间：2012-06-07T05:22:25.557
> 
> 标签：javascript, algorithm, arrays, kadanes-algorithm

我在 javascript 中实现了 Kadane 的 Max Sub 数组问题，但似乎我最终总是在控制台中得到 0，即使存在更高的数字（我知道它做了它正在做的事情，因为 for loop from `0 - size`where `size = subarray size`）。

*   那么如何正确实现算法呢？

*   它是否也适用于所有正整数数组？

### 杰宾

[http://jsbin.com/ajivan/edit#javascript,live](http://jsbin.com/ajivan/edit#javascript,live)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T05:36:48.940

当您的数组长度为 6 时，您将 n=3 作为参数传递。我将您的算法更改为使用`length`：

```
function SubSequence(a){
  var now = 0,prev =0;
  for(var i = 0;i < a.length;i++){  
    prev = Math.max(0,prev + a[i]);
    now = Math.max(prev,now);
  }
  return now;
}

console.log(SubSequence([-1,-2,-3,4,6,7])); 
```

它给出了 17。

> 它是否也适用于所有正整数数组？

是的，它将给出数组中所有元素的总和。

* * *

如果您想要长度为 3 的最大子序列，请使用

```
function SubSequence(a,n){
  var now = 0;
  for(var i = 0; i < n; i++) {
    now += a[i];
  }
  var best = now;
  for(var i = n;i < a.length;i++) {
    now += a[i] - a[i-n];
    best = Math.max(now,best);
  }
  return best;
}

console.log(SubSequence([-1,-2,-3,4,6,7,1,4],3)); 
```

最好是4+6+7，不允许4+6+7+1+4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T10:17:23.137

在计算机科学中，最大子数组问题是在具有最大和的一维数字数组（包含至少一个正数）中找到连续子数组的任务。

Kadane 算法是一种求解上述问题的方法。

Kadane 算法的简单想法是查找数组的所有正连续段（比如说 max_ending_here）。并跟踪所有正段之间的最大和连续段（比如说 max_so_far）。每次我们得到一个正和时，将其与 max_so_far 进行比较，如果它大于 max_so_far，则更新 max_so_far。

算法不适用于所有负数。如果所有数字都是负数，它只会返回 0。为了处理这个问题，我们可以在实际实施之前添加一个额外的阶段。如果所有数字都是负数，则该阶段将查看，如果它们是负数，它将返回其中的最大值（或绝对值的最小值）

您发布的是在数组中所有数字均为负数的情况下的实现。它不指实际算法，而只是一个额外的阶段。Kadane 的一维数组算法：

```
this is the general algorithm.
    Initialize:
    max_so_far = 0
    max_ending_here = 0

Loop for each element of the array
  (a) max_ending_here = max_ending_here + a[i]
  (b) if(max_ending_here < 0)
            max_ending_here = 0
  (c) if(max_so_far < max_ending_here)
            max_so_far = max_ending_here
return max_so_far 
```

希望这个解释对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-29T20:22:52.560

然而，这个问题在这里很晚，以防万一它对任何人有帮助，我尝试解决这个问题，包括数组的所有元素都是负数的情况。

```
let allPositives = arr => arr.every(n => n > 0)
let allNegatives = arr => arr.every(n => n < 0)
let sum = arr => arr.reduce((curr_max, max_so_far) => curr_max + max_so_far, 0)

var getMaxArrNumber = function (arr) {
    return Math.max.apply(null, arr);
}

var maxSequence = function(arr){
  if(arr.length === 0 ) return 0;
  if(allNegatives(arr)) return getMaxArrNumber(arr);
  if(allPositives(arr)) return sum(arr);

  var curr_max = 0, max_so_far = 0;

  for(var i = 0; i < arr.length; i++){  
    curr_max = Math.max(0, curr_max + arr[i]);
    max_so_far = Math.max(curr_max, max_so_far);
  }
  return max_so_far;
} 
```

# c++ - 使用长的一般规则

> ID：10926094
> 
> 赞同：0
> 
> 时间：2012-06-07T05:22:40.223
> 
> 标签：c++, c

一位经验丰富的程序员（spoj、codechef、topcoder 等）告诉我，一般来说，人们可以将 int 用于高达 10^9 的值。

使用有符号长整数、无符号长整数、有符号长整数、无符号长整数的一般规则是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T05:27:07.397

这个问题的答案取决于平台（因为不同的平台可能有不同大小的整数）。[您可以在http://en.cppreference.com/w/cpp/types/numeric_limits](http://en.cppreference.com/w/cpp/types/numeric_limits)找到相当完整的限制列表

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T05:27:08.863

使用的主要时间是当您与使用这些类型的 API 交互时`int`。`long`例如，错误代码和文件描述符具有类型`int`和`ftell`返回`long`。`int`当您知道要处理的数字非常小且有界（即不能与您完全控制之外的事物成比例地增长）时，您也可以将其用于索引/计数器。否则，您应该始终使用内存中对象的大小/索引/计数，以及当您需要能够存储特定已知大小的值时的`size_t`精确或至少大小类型。`stdint.h`

如果你不能使用`stdint.h`（例如，在 C89 或旧的 C++ 实现上），你可以使用普通的旧类型：

1.  `short`至少可以存储 -32767 到 32767 的范围。
2.  `unsigned short`至少可以存储 0 到 65536 的范围。
3.  `int`至少可以存储 -32767 到 32767 的范围（以及 -2147483647 到 2147483647 在符合 POSIX 的系统上）。
4.  `unsigned`至少可以存储 0 到 65536 的范围（以及 0 到 4294967295 在符合 POSIX 的系统上）。
5.  `long`至少可以存储 -2147483647 到 2147483647 的范围。
6.  `unsigned long`至少可以存储 0 到 4294967295 的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T05:27:00.637

您可以自己打开`limits.h`和推断规则：

```
#define LONG_MIN    (-2147483647L - 1) /* minimum (signed) long value */
#define LONG_MAX      2147483647L   /* maximum (signed) long value */
#define ULONG_MAX     0xffffffffUL  /* maximum unsigned long value */
#define LLONG_MAX     9223372036854775807i64       /* maximum signed long long int value */
#define LLONG_MIN   (-9223372036854775807i64 - 1)  /* minimum signed long long int value */
#define ULLONG_MAX    0xffffffffffffffffui64       /* maximum unsigned long long int value */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T05:27:24.300

根据您使用的 libc，通常有一些宏会告诉您 an `int`,等的限制值。对于可移植的示例，请查看[glib](http://developer.gnome.org/glib/2.28/glib-Limits-of-Basic-Types.html)`long int`提供的限制宏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T05:27:43.357

您可能想查看标准头文件[climits](http://www.cplusplus.com/reference/clibrary/climits/)或 limits.h

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T05:27:46.003

作为一般规则，对于任何带符号的类型，如果类型大小为 n 位，则

```
Max Positive Value = 2^(n-1)-1 <br>
Max Negative Value = -2^(n-1) 
```

同样，每个平台可能都有变化，您应该参考该平台中可用的 limits.h 以获得准确的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T07:50:09.883

这取决于您的可移植性限制。形式上，an`int`只保证支持范围内的值`[-32767,32767]`，所以当你需要更多时，你应该使用`long`. 实际上，很多程序不需要移植到 16 位机器（今天非常罕见），而在大多数现代 64 位平台上，`long`将是 64 位，这超出了需要，并且会减慢速度（如果只是因为地势较差）。如果您可以假设`int`至少是 32 位，那么您几乎应该在任何地方使用它，但以下情况除外：

*   如果您关心实际的按位表示，使用按位`&`、、`|`和`^`或`~`移位运算符，则默认情况下应使用`unsigned`类型`unsigned int`，但如果发生以下情况之一，则应使用其他大小。

*   如果您需要 的模运算`unsigned`，请使用无符号类型。这是非常非常罕见的，但确实发生在计算哈希码之类的事情中。

*   如果您有非常大的表（向量或任何其他连续表示），您可能会考虑`short`or 甚至`signed char`（或者`unsigned short`or `unsigned char`，如果您关心按位表示）。除了字符，我*不会*使用 plain ，因为它的符号是实现定义的。`char`

*   如果您需要表示大于 2^31 的值，请考虑`long long`. （然而，`long long`在这种情况下，通常甚至不够大，你需要某种`BigInteger`类。）

作为一般规则，任何事情都`int`应该是例外。

# android - android 应用程序中不安全的蓝牙连接（API 级别 8）

> ID：10926097
> 
> 赞同：1
> 
> 时间：2012-06-07T05:22:50.440
> 
> 标签：android, bluetooth, insecure-connection

我正在开发一个 android 游戏（Target API - 8），它可以通过蓝牙从两个 android 手机上播放。由于我的应用程序针对 API 级别 8（android 版本 2.2），我无法进行不安全的连接。但我不想让用户干预来配对设备。我找到了几个指向[http://mobisocial.stanford.edu/news/2011/03/bluetooth-reflection-and-legacy-nfc/](http://mobisocial.stanford.edu/news/2011/03/bluetooth-reflection-and-legacy-nfc/)的答案。但这真的有效吗？有些人在博客上评论说它仍然不适合他们。有没有更好的解决方案？

# mysql - Codeigniter SELECT 将检查超过 MAX_JOIN_SIZE 行

> ID：10926098
> 
> 赞同：2
> 
> 时间：2012-06-07T05:22:57.457
> 
> 标签：mysql, codeigniter

我已经开发了一个考勤管理系统，我想通过运行以下查询来生成报告，这将是大量的行，我在共享主机上并且出现以下错误：

**询问：**

```
SELECT 
 `attendance`.*, `users`.`id` AS user_id, 
CONCAT_WS(" ", `user_profiles`.`fname`, `user_profiles`.`lname` ) AS name,
`user_department`.`did`, `user_department`.`dep_name` FROM (`attendance`) 
    LEFT JOIN `users` ON `users`.`username` = `attendance`.`emp_code` 
    LEFT JOIN  `user_profiles` ON `user_profiles`.`user_id` = `users`.`id` 
    LEFT JOIN `in_department` ON `in_department`.`user_id` = `user_profiles`.`user_id`
    LEFT JOIN `user_department` ON `in_department`.`dep_id` = `user_department`.`did` 
WHERE `banned` = '0' 
   AND `for_date` >= '2012-05-28' 
   AND `for_date` <= '2012-06-28' 
ORDER BY `emp_code` asc, `for_date` asc 
```

**错误：**

SELECT 将检查超过 MAX_JOIN_SIZE 行；检查您的 WHERE 并使用 SET SQL_BIG_SELECTS=1 或 SET MAX_JOIN_SIZE=# 如果 SELECT 没问题

如何使用 codeigniter SET SQL_BIG_SELECTS=1 中的活动记录运行此查询

请帮忙，我需要索引我的表吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:42:35.407

您可以简单地发出包含以下`SET`命令的查询：

```
$this->db->query('SET SQL_BIG_SELECTS=1'); 
```

# jquery - 为什么我不能在 Knockoutjs 中使用 ko.computed()？

> ID：10926109
> 
> 赞同：0
> 
> 时间：2012-06-07T05:23:43.427
> 
> 标签：jquery, knockout.js, shopping-cart, unobtrusive-javascript, computed-observable

我是使用 knockoutjs 的新手，在使用 .computed() 时遇到了这个问题

这是我的 HTML 代码：

```
<table style="float:left;padding-right:250px" cellspacing="3">    
<tr>
    <td>Product Name</td>
    <td>Price</td>
    <td>Stocks</td>
</tr>
<tbody data-bind="foreach: Products">
    <tr>
        <td><a href="#" data-bind="text: Name, click:$root.addProduct, value: Name"></a></td>            
        <td><input  data-bind="value: Price" size="3"/></td>
        <td data-bind="text:Stocks"></td>
    </tr>
</tbody>
</table>

<table style="float:left">    
<tr>
    <td>SKU</td>
    <td>Product Name</td>
    <td>Price</td>
    <td>Qty</td>
    <td>Sub</td>
</tr>
<tbody data-bind="foreach: Cart">
    <tr>            
        <td data-bind="text: SKU"></td> 
        <td data-bind="text: Name"></td>            
        <td data-bind="text: Price"></td>
        <td data-bind="text: Quantity"></td>
        <td data-bind="text: SubTotal()"></td>
        <td><a href="#" data-bind="click: $root.removeProduct">Remove</a></td>
    </tr>
</tbody> 
```

​</p>

这是我的脚本代码：

```
var Product = function(data) {
var self = this;

self.SKU = ko.observable(data.SKU);
self.Name = ko.observable(data.Name);
self.Price = ko.observable(data.Price);
self.Stocks = ko.observable(data.Stocks);
self.Quantity = ko.observable(data.Quantity);

self.SubTotal = ko.computed(function() {
    return self.Quantity() * self.Price();
});
};

function ProductViewModel() {
var self = this;
var items = [{
    Name: "Crystalys",
    SKU: "00001",
    Price: 500,
    Stocks: 12,
    Quantity: 0},
{
    Name: "Aghanim's Scepter",
    SKU: "00002",
    Price: 4200,
    Stocks: 5,
    Quantity: 0},
{
    Name: "Vladmir's Offering",
    SKU: "00003",
    Price: 500,
    Stocks: 10,
    Quantity: 0},
{
    Name: "Pwer Threads",
    SKU: "00004",
    Price: 1450,
    Stocks: 20,
    Quantity: 0},
{
    Name: "Satanic",
    SKU: "00005",
    Price: 6150,
    Stocks: 5,
    Quantity: 0},
{
    Name: "The Butterfly",
    SKU: "00006",
    Price: 6000,
    Stocks: 4,
    Quantity: 0},
{
    Name: "Divine Rapier",
    SKU: "00007",
    Price: 6200,
    Stocks: 1,
    Quantity: 0},
{
    Name: "Iron Wood Branch",
    SKU: "00008",
    Price: 53,
    Stocks: 100,
    Quantity: 0}];

self.Products = ko.observableArray(items);
self.Cart = ko.observableArray();

// Operations
self.addProduct = function(Product) {
    self.Cart.push({
        Name: Product.Name,
        Price: Product.Price,
        Quantity: 1,
        SKU: Product.SKU
    });
}
self.removeProduct = function(Product) {
    self.Cart.remove(Product)
}

}
ko.applyBindings(new ProductViewModel());​ 
```

我真的不知道似乎是什么错误。请帮忙。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T05:59:38.277

您在名为“Product”的函数中定义了计算的 observable，因此它可用于该“类”的实例 - 但您从未实际使用它。可观察数组“Products”和“Cart”填充了普通的 javascript 对象，而不是“Product”类型的实例。

```
var items = [ new Product({
    Name: "Crystalys",
    SKU: "00001",
    Price: 500,
    Stocks: 12,
    Quantity: 0
}), new Product({ ... 
```

# java - 无法访问会话

> ID：10926111
> 
> 赞同：0
> 
> 时间：2012-06-07T05:23:49.707
> 
> 标签：java, http, session, servlets, zk

```
public class MyClass{

private String shared;

public String mySharedFun() {
    `Session session = Sessions.getCurrent();`
} 
```

在上述情况下，我得到 Http "session" null，我是否需要实现任何接口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:34:59.717

我想 Session 类取自 ZK。如何获得会话的正确方法是 `Executions.getCurrent().getSession();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:51:28.737

将请求传递给您的方法。然后 HttpSession session = (HttpSession)request.getSession(); 会给你会议。如果没有会话，那么它将为您创建一个会话。如果不需要创建新会话，则 if(session.isNew()) 将让您知道是否存在当前会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T11:18:18.243

如果它在 ZK 事件处理程序中运行，则此方法有效：

```
 SimpleSession s = (SimpleSession) Executions.getCurrent().getDesktop().getSession();
    HttpSession session = (HttpSession) s.getNativeSession(); 
```

似乎很难进入实际的 http 会话，但当您有使用 ZK 的经验时，这不是您通常会做的事情。更自然的放置数据的位置是 ZK 隐式范围对象，例如 desktopScope 或 sessionScope，它们只是 java.util.Map。

原因如下：用户可能会在两个浏览器选项卡中打开指向您网站的两个 URL，以便能够同时处理两个订单。每个打开的 url 都会创建一个 zk 桌面。在用户单击的每个选项卡中，事件处理程序（用户鼠标单击）应该与运行事件处理程序的桌面中的业务数据一起工作。如果您将业务数据放在 http 会话中，那么它对该用户来说是全局的；任何同时打开两个浏览器选项卡的用户尝试同时执行两项工作都会有一个浏览器选项卡破坏他们在另一个浏览器选项卡中所做的工作。如果你真的想让某些东西对用户来说是全局的，就把它放在 sessionScope 中。事物实际上保存在 http 会话中的地图中。

文档的基本概念页面在[http://books.zkoss.org/wiki/ZK%20Developer%27s%20Guide/Fundamental%20ZK/Basic%20Concepts/Page%20and%20Desktop](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Guide/Fundamental%20ZK/Basic%20Concepts/Page%20and%20Desktop)中介绍了这些想法，其中包含指向其他隐式对象，例如 requestScope、componentScope、pageScope、spaceScope（“ID 空间”）。

你通常不会使用诸如 requestScope 之类的作用域，因为 ZK 事件处理将你从 ajax 请求中抽象出来；让事件操纵桌面范围。当您来自 Http 请求/会话世界时，这似乎非常不自然，但是 ZK 是关于使用在桌面中的组件上触发的事件进行事件驱动的编程；所以我坚持使用在使用 ZK 时“自然”的 componentScope、desktopScope 和 sessionScope。

# iphone - 如何在文档目录的子文件夹中创建文件？

> ID：10926113
> 
> 赞同：7
> 
> 时间：2012-06-07T05:24:09.810
> 
> 标签：iphone, objective-c

我正在文档目录中创建一个名为 newFolder 的文件夹。所以现在我想知道如何在使用 newFolder 创建的文件夹中创建 txt 文件我现在如何在文档目录中创建文件但如何在我的文件夹中创建文件由我创建。我也想从 newFolder 中获取此文件并传递给 iPhone 中的邮件编辑器。

**这是在我的文件夹中创建文件夹，但现在我想在这个文件夹名称中创建文件 newFolder 帮助我。**

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsDirectory = [paths objectAtIndex:0]; 
    NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"newFolder"];
    NSError *error = NULL;
    if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
        [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error]; 
```

**我写了这段代码，但是我的 csv 文件是在 doument 目录文件夹中创建的，我想在我的文件夹中创建这个文件，该文件夹名为 newFolder**

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *docDir = [paths objectAtIndex:0];

        NSString *filename = [docDir stringByAppendingPathComponent:[NSString stringWithFormat:@"EmployeeBase.Csv"]];
            NSError *error = NULL;
            BOOL written = [csvString writeToFile:filename atomically:YES encoding:NSUTF8StringEncoding error:&error];
            if (!written)
                NSLog(@"write failed, error=%@", error); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T05:57:55.620

这是将图像保存在您自己文件夹中的文档目录中的示例...

```
UIImage *imageForShare = [UIImage imageNamed:@"anyImage.jpg"];
NSString *stringPath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0]stringByAppendingPathComponent:@"New Folder"];
// New Folder is your folder name
NSError *error = nil;
if (![[NSFileManager defaultManager] fileExistsAtPath:stringPath])
    [[NSFileManager defaultManager] createDirectoryAtPath:stringPath withIntermediateDirectories:NO attributes:nil error:&error];

NSString *fileName = [stringPath stringByAppendingFormat:@"/image.jpg"];
NSData *data = UIImageJPEGRepresentation(imageForShare, 1.0);
[data writeToFile:fileName atomically:YES]; 
```

**斯威夫特 4.0 版本**

```
guard let image = UIImage(named: "anyImage.jpg") else {return}
guard var stringPath = NSSearchPathForDirectoriesInDomains(FileManager.SearchPathDirectory.documentDirectory, FileManager.SearchPathDomainMask.userDomainMask, true).first else {return}
stringPath = stringPath + "New Folder"

// New Folder is your folder name
if !FileManager.default.fileExists(atPath: stringPath) {
      do {
          try FileManager.default.createDirectory(atPath: stringPath, withIntermediateDirectories: false, attributes: nil)
      } catch let error {
          print(error.localizedDescription)
          return
      }
 }

 let fileName = stringPath + "/image.jpg"
 let url = URL(fileURLWithPath: fileName)
 if let data = UIImageJPEGRepresentation(image, 1.0) {
      do {
            try data.write(to: url)
        } catch let error {
            print(error.localizedDescription)
       }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-27T06:05:12.383

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,    
    YES);
    NSString *documentsPath = [paths objectAtIndex:0]; //Get the docs directory
    NSString *myPath = [documentsPath stringByAppendingPathComponent:@"/MyDocuments"];

    //Create folder
    if (![[NSFileManager defaultManager] fileExistsAtPath:myPath])
    [[NSFileManager defaultManager] createDirectoryAtPath:myPath withIntermediateDirectories:NO 
    attributes:nil error:NULL];

    NSString *newStr=[[NSString alloc] initWithFormat:@"Sample.txt"];
    NSString *filePath = [myPath stringByAppendingPathComponent:newStr]; //Add the file name
    [pngData writeToFile:filePath atomically:YES]; //Write the file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T05:31:24.990

您可以像这样将 txt 文件（比如说 file.txt）写入特定目录（比如说 newFolder）：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0]; 
NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"newFolder"];
NSString *filePath = [dataPath stringByAppendingPathComponent:@"file.txt"];

NSString *str = @"THIS IS THE CONTENT OF THE TXT FILE";

[str writeToFile:filePath atomically:TRUE encoding:NSUTF8StringEncoding error:NULL]; 
```

我希望这会有所帮助；）

# ipad - JQuery jPlayer自动播放在ipad上不起作用如何显示控件

> ID：10926122
> 
> 赞同：2
> 
> 时间：2012-06-07T05:25:11.657
> 
> 标签：ipad, jplayer

我正在使用 jPlayer 在网页上播放视频，以使其与桌面浏览器和 iPad 兼容。

我正在使用以下代码

```
$("#jquery_videoPlayer").jPlayer({
    ready: function () {
        $(this).jPlayer("setMedia", {
            m4v: _mp4url,
            ogv: _oggurl,
            webmv: _webmurl,
            flv:_url
        }).jPlayer("play");
    },
    swfPath: "../js",
    supplied: "m4v, webmv, ogv, flv",
    preload:"auto",
    loop:true,
    solution: "html, flash",
    size: {
        width: "256px",
        height: "240px"
    }
}); 
```

它在所有浏览器上都可以正常工作，但是由于 iPad 不允许自动播放视频，因此我需要在视频 (HTML5) 上显示播放按钮。

我在文档中找不到任何选项。

有人可以帮助我在代码中进行哪些更改以在 jPlayer 的视频上显示 HTML5 播放按钮。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:18:39.940

您将无法从 $(document).ready() 或 jPlayer 的 ready 事件中播放视频。IOS专门防止它：

[http://roblaplaca.com/blog/2010/04/14/ipad-and-iphone-html5-video-autoplay/](http://roblaplaca.com/blog/2010/04/14/ipad-and-iphone-html5-video-autoplay/)

好消息是，在页面加载完毕并且用户确实点击了某些内容后，您可以随意播放。如果包含您的视频的页面不是用户将在您的网站上点击的第一页，那么您可以将此视频添加到上一页中的隐藏 div 中。当用户单击时，不是在新页面上自动播放视频，而是显示隐藏的 div 并在那里播放。

如果您只需要为特定用户找到一种播放方式，您可以使用不同的浏览器。例如，iSwifter Flash 网络浏览器将 jPlayer 置于 swf 模式，并自动播放。但它还有其他一些似乎是针对 Flash 游戏玩家的古怪行为。

如果您需要它在 safari 和大多数其他替代 IOS 浏览器上播放，那么您需要稍微改变您的工作流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T05:21:08.737

我使用以下方法仅在 ipad 上显示视频控件

var platformInfo = uaPlatform(navigator.userAgent); if(platformInfo.platform.toLowerCase() == "ipad" || platformInfo.tablet.toLowerCase() == "ipad") { $("#jquery_videoPlayer").jPlayer("option", "nativeVideoControls", {all : /./}); }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T19:37:43.857

您需要在单击或触摸事件上初始化 jPlayer。

```
// Note on the iPad you may want to use "touchstart" instead.
$('.play-button').on('click', function() {
    jplayer = $("#jplayer").jPlayer({
      swfPath: "http://f.ordify.net/assets/Jplayer.swf",
      ready: function () {
        $(this).jPlayer("setMedia", {
          mp3: "http://f.ordify.net/audio/alarm.mp3"
          });
      },
      solution: "html, flash",
      supplied: "mp3",
      preload: "auto"
    });
  }
})
setTimeout(function() { jplayer.jPlayer("play"); }, 5000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-31T23:44:22.843

`nativeVideoControls`是一个包含多个正则表达式值的对象，与浏览器的用户代理匹配。将此添加到您的选项中。这里有些例子。

```
nativeVideoControls: {
  ipad: /ipad/,
  iphone: /iphone/,
  android: /android/,
  blackberry: /blackberry/,
  iemobile: /iemobile/
}, 
```

# javascript - 理解 .call 和 .apply 在 Javascript 中的行为

> ID：10926125
> 
> 赞同：3
> 
> 时间：2012-06-07T05:25:30.947
> 
> 标签：javascript, function, this

我从 MDN 文档中读到 .apply 和 .call 的第一个参数是“this”对象，但是

```
var stringToEval = "console.log(this)";
eval.call(null, stringToEval);
eval.apply(null, [stringToEval]); 
```

在上面的代码中，两行最终都记录了 Window 对象（在浏览器中）。它不应该记录 null，这就是我在两种方法中作为第一个参数传递的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:28:01.353

来自[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call#Parameters)：

> 这为有趣的呼吁提供了价值。请注意，这可能不是方法看到的实际值：如果方法是非严格模式代码中的函数，null 和 undefined 将被替换为全局对象，原始值将被装箱。

全局对象是窗口。

**编辑**，因为无论您传入 null、未定义还是带有 eval 的对象都没有关系。内部`eval`,`this`将与`this`eval 调用之前相同。

根据 ECMA-262 5.1 的第 15.1.2.1 节，eval 接收一个字符串并将其解析为 ECMAscript。如果它是有效的 ECMAscript，那么它会在调用它的上下文中运行它。`console.log(this)`因此，在您的情况下，您可以将对 eval 的调用视为它们在运行时替换自己。有了这个替换，你最终得到了这个程序：

```
var stringToEval = "console.log(this)";
console.log(this);
console.log(this); 
```

这清楚地说明了为什么它`DOMWindow`两次输出对象。你可以像这样绕过它：

```
var stringToEval = "console.log(this)";
(function(str){ eval(str); }).call({not: "empty"}, stringToEval);
(function(str){ eval(str); }).apply({not: "empty"}, [stringToEval]); 
```

因为当 eval 用它替换自己时`console.log(this)`，它将在该匿名函数的上下文中，其中`this`将引用传入的对象。

[看到这个 JSFiddle](http://jsfiddle.net/Paulpro/u3VGh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:51:25.600

您`eval`使用显式设置`this`为调用`null`，这与`this`对象将在评估代码中的内容无关，没有任何地方说使用设置`eval`评估代码与您调用的代码`this`相同。事实上，这样做是[间接](http://ecma-international.org/ecma-262/5.1/#sec-10.4.2)调用，并导致 eval 代码在现代浏览器的全局上下文中运行。`this``eval``eval`

因此，您要使用正常功能进行测试：

```
function test() {
    console.log(this);
}

test.call({});
test.apply({}); 
```

# php - 如何使用 php 将用户本地时区转换为服务器时区？

> ID：10926128
> 
> 赞同：2
> 
> 时间：2012-06-07T05:25:58.887
> 
> 标签：php, timezone

我想创建一个 php 脚本来一次在世界各地进行在线比赛。

我的第一个问题..我真的可以在一个时间跨度内做到这一点，如果是，那么如何？

例如。假设我在 2012 年 6 月 10 日举办了一场比赛，时间是 IST 下午 2-4 点或服务器所在的任何地方。现在我希望来自世界各地的用户只能在这个时候参加比赛。我应该如何告诉用户他的转换后的本地时区？我不希望用户为时间转换而痛苦，我也不愿意为世界各地的用户提供转换工具。

我希望该用户应该在提到的当地时区日期和时间参加比赛！。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:34:33.447

通过设置 cookie 或使用 ajax 调用来获取客户端的时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:33:26.607

这很简单。将服务器时间发送给客户端（一些隐藏的跨度或输入。）

```
function getLocalTime(gmt)  {
       var min = gmt.getTime() / 1000 / 60; // convert gmt date to minutes
       var localNow = new Date().getTimezoneOffset(); // get the timezone 
                                                      // offset in minutes            
       var localTime = min - localNow; // get the local time
       return new Date(localTime * 1000 * 60); // convert it into a date
    }

//var strDate = [get text date sent from server here];
var dt = new Date(Date.parse(strDate));
var localDate = getLocalTime(dt);
//[Set value of your localTime here] 
```

使用 javascript 将此时间转换为用户本地时间。仅向用户显示用户本地时间。

```
Contest will be held at : <span id='localTime'></span> 
```

# android - 如何控制android中expandablelist的扩展？

> ID：10926129
> 
> 赞同：0
> 
> 时间：2012-06-07T05:26:11.077
> 
> 标签：android, expandablelistview

我只需要单击该列表中的一个按钮来扩展扩展列表视图，我希望该列表得到扩展。谁能指导我如何做到这一点。我在扩展列表上尝试了 setenable，但它不起作用。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:57:29.643

```
ExpandedListView expandedlist;

expandedlist.setenable(true);
expandedlist.setenable(false); 
```

非常抱歉，我没有正确检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:29:06.003

嗨，请在下面这样尝试

```
ExpandableListView Exlist;

Exlist.expandGroup(0);
Exlist.expandGroup(1); 
```

# actionscript-3 - AIR 3.1 应用程序无法连接到本地主机或本地 IP 地址

> ID：10926131
> 
> 赞同：0
> 
> 时间：2012-06-07T05:26:35.767
> 
> 标签：actionscript-3, security, air, localhost, sandbox

我正在使用 AIR 3.1 构建一个 AIR 应用程序，该应用程序尝试使用

```
 localhost:7676 
```

套接字正在从 AIR 应用程序尝试使用 localhost 连接的同一台计算机上的 OSX 应用程序运行。成功连接后，AIR 应用程序应该会接收到 JSON 数据字符串。

在浏览器中运行 swf 时，我使用 localhost:7676 连接没有问题，它成功连接到运行套接字的 OSX 应用程序。将FlashBuilder项目打包编译为AIR应用程序，使用同一个地址连接时，出现此错误，不知道如何解决...

*** 违反安全沙箱 *** 与 localhost:7676 的连接已停止 - 不允许从 app:/Matrx_Remote_App.swf SecurityError: 错误 #2147: URL localhost:7676 中的禁止协议

我在类中使用的代码只是一个简单的加载器类

```
 _loader = new URLLoader();

        var request:URLRequest = new URLRequest("http://localhost:7676");
        _loader.addEventListener(Event.COMPLETE, onComplete);
        _loader.addEventListener(IOErrorEvent.IO_ERROR, ioerrorHandler);
        _loader.addEventListener(flash.events.HTTPStatusEvent.HTTP_RESPONSE_STATUS, handleOnEventStatus);
        _loader.load(request); 
```

onComplete 方法如下所示：

```
 private function onComplete(e:Event):void {
        trace("e " + URLLoader(e.target).data +  _loader.data + " _loader.bytesTotal " + _loader.bytesTotal);
        var loader:URLLoader = URLLoader(e.target);
        var jsonData:Object  = JSON.parse(loader.data);
        trace(jsonData);

    } 
```

对此的任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:30:26.137

更新这个问题....事实证明，这是套接字编写方式的问题，与客户端无关，感谢所有花时间提供帮助的人

# c++ - 验证加载在 Char[] 中的 SSL 证书或 C/C++ 中的内存

> ID：10926132
> 
> 赞同：0
> 
> 时间：2012-06-07T05:26:39.077
> 
> 标签：c++, security, ssl, openssl, ssl-certificate

我在 char[] 中有服务器证书。现在我也可以访问 CA 证书文件了。如何验证 char[] 变量中加载的证书。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:46:37.720

我不确定这篇关于使用 OpenSSL[验证使用证书存储的](http://kahdev.wordpress.com/2009/02/15/verifying-using-a-certificate-store/)博客文章是否不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:53:05.333

我已经解决了这个问题。OpenSSL 中有许多功能没有正确记录。当证书加载到内存或 char[] 时，应使用以下 openssl 来验证证书：

```
int X509_verify(X509*, EVP_PKEY*); 
```

如果成功则返回 1，如果验证失败则返回 0。

X509* 是指向证书的指针。

```
BIO *bio;
X509 *peer_cert;
bio = BIO_new(BIO_s_mem());  
BIO_puts(bio, (const char*)peerCert_buf);
peer_cert = PEM_read_bio_X509(bio,NULL,NULL,NULL) ; 
```

peerCert_buf 是一个 char[] 包含证书文件的内容。

EVP_PKEY* 是指向证书中存在的公钥的指针。您可以使用它从 CA 证书中提取公钥。

```
EVP_PKEY* key = X509_get_pubkey(ca); 
```

ca 是包含 CA 证书的 X509*。

# c# - C# COM 互操作，尝试访问远程 COM 服务器得到 0x80070005 错误

> ID：10926134
> 
> 赞同：1
> 
> 时间：2012-06-07T05:26:58.933
> 
> 标签：c#, .net, com, com+, dcom

我有一个用 c# 编码的 WPFApplication 来访问 COM 组件。我从我的应用程序中添加了对 COM 组件的引用。当我在同一台机器上同时拥有客户端（我的应用程序）和服务器（com）时，它会按预期工作。问题是当它们在不同的机器上时。两台机器都是一样的，我的意思是有 Windows 7 操作系统。并且都在同一个域上。我试图用下面的代码创建一个 com 组件的实例，它没有给我任何错误

```
IPDSIntf test; 
string clsId = "85689616-277B-4E00-9A5E-19AD78E7E0E2";
var type = Type.GetTypeFromCLSID(new Guid(clsId), MachineName, true);
                var COMObject = Activator.CreateInstance(type);
                test = (IPDSIntf)COMObject; 
```

现在当我调用 COM 中的任何方法时。说**test.Connect(clientId, errorCode)**，我收到异常“访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）'。

设置了许多权限，在服务器机器上为我的用户帐户授予管理员权限，将我的帐户添加到“分布式 COM 用户”组等......但仍然遇到同样的问题。对于所有类型的用户（匿名、网络、每个人......），通过 DCOMCNFG 和谷歌搜索时看到的所有内容，在服务器计算机的 COM 安全选项中提供“本地和远程”访问权限。客户端和服务器中的防火墙均已关闭。

现在别无选择。我没有时间修复它，并且已经花了 4 天时间在谷歌上搜索。但没有运气。

还有一件事，我在 DCOMCNFG 中看不到我的 COM，是否意味着它没有注册？可能是什么原因。我相信机器中的所有 COM 组件都会在组件服务中注册。也需要对此进行一些澄清，因为我怀疑它与我的问题有某种关系。

提前致谢， Nishitha

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:00:28.763

嗨，这个错误是给我做同样的事情，但在 Excel 应用程序上。我发现 excel COM 实际上是 32 位的，需要访问 32 位的 DECOM 配置。

您可以通过在运行时输入“comexp.msc /32”命令来访问 32 位 DECOM 配置。

然后你会找到“Microsoft xxx 应用程序”。在我的例子中，它是 Microsoft Excel 应用程序，在 DECOM 配置下。在属性上，我已将“身份”选项卡中的“自定义”和“身份”设置为“交互式用户”。

然后它对我有用。希望这对你也有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:06:14.277

我已经回答了你问题的一部分。

您的组件未在 DCOM 中列出可能是因为它可能是 Activex dll。按照这些步骤使其在 dcom 中列出。

**Start-->Run-->oleview-->Object Classes-->All Objects (Expand)** 在左侧窗格中选择您的 COM。单击右窗格上的实施选项卡并选中“使用代理进程”关闭 oleview 和 opn dcomcnfg，您的 COM 可能会列在那里。

我有完全相同的设置并面临完全相同的错误**0x80070005**并尝试了所有可能的配置。请让我知道您是否找到了解决此访问被拒绝问题的根本原因。我已经在这上面花了 4 天 :-)

# permutation - 仅给定“文本/字符串的长度”，找到可能的排列数

> ID：10926138
> 
> 赞同：0
> 
> 时间：2012-06-07T05:27:12.210
> 
> 标签：permutation, string-length

例如，给定长度 = 4，可能的排列数/计数 = 24、12、6、4、1

1234 = 24 个排列
1123 = 12 个排列
1122 = 6 个排列
1112 = 4 个排列
1111 = 1 个排列

所以，

长度 4 = 24, 12, 6, 4, 1
长度 5 = ?
长度 6 = ?

我想强调的是，我只给了“字符串的长度”来置换，而不是给定实际的字符串本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:46:33.293

首先，如果我们知道字符串，我们可以将可区分排列的数量计算为 n!/(a!b!...m!)，其中 n 是字符串的长度，a, b, ..., m是每个字符在字符串中出现的次数。因此，要获得所有长度的列表，您首先需要计算 n 的分区数（即，您可以将 n 写为一个或多个不一定不同的正整数的无序和的方式数）然后，对于每个分区，创建相应的字符串并计算该字符串中字符的可区分排列数。

# cmake - 如何为库编写 CMake 安装？

> ID：10926139
> 
> 赞同：5
> 
> 时间：2012-06-07T05:27:22.023
> 
> 标签：cmake, installation, libraries, make-install, system-paths

这是我的尝试：

```
IF (NOT WIN32)
  #INSTALL_TARGETS(${LIB_INSTALL_DIR} ${tinyscheme-nix_BINARY_DIR}/libtinyscheme.so)
  #INSTALL(TARGETS ${tinyscheme-nix_BINARY_DIR}/libtinyscheme.so DESTINATION ${LIB_INSTALL_DIR})
ENDIF() 
```

两种变体都是错误的。我想`libtinyscheme.so`从`${tinyscheme-nix_BINARY_DIR}`到`/lib`或`/lib64`。基本上，我认为`${LIB_INSTALL_DIR}`可以处理它。

我怎样才能做到？我的错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:31:10.487

您可能想要这里的`FILES`版本`install`而不是`TARGETS`版本。

的`TARGETS`版本`install`用于已使用例如添加的实际 CMake 目标`add_library`。`add_library`在这种情况下，您将通过在命令期间分配的名称而不是其完整路径来引用目标。

因此，我认为在您的第二个命令中替换`TARGETS`为这里的方式。`FILES`

有关该`install`命令的完整详细信息，请运行：

```
cmake --help-command install 
```

# iphone - 在 iTunes Connect 团队中添加用户

> ID：10926150
> 
> 赞同：13
> 
> 时间：2012-06-07T05:28:04.240
> 
> 标签：iphone

我是过去几个月的 iphone 新手开发人员。我代表我的客户上传应用程序。所以我的一位客户在他的 iTunes 连接帐户中添加了我的电子邮件 ID。我完成了程序并成功登录到 itunesconnect.apple.com 并上传了应用程序。

但现在我有其他客户，他也希望我上传他的应用程序。我正在给他我的电子邮件，以便在 iTunes Connect 中将我添加到他的团队中，而不是在开发人员中。我在 developer.apple.com 收到了邀请。但是现在的问题是，当他将我添加为用户时，它会给出类似这样的错误“您输入的电子邮件地址已经属于 iTunes Connect 帐户。要继续，请输入不同的电子邮件地址。”

那么，如果这意味着我必须为不同的客户提供不同的用户 ID？我如何为不同客户的团队使用单个电子邮件 ID。任何关于它的建议。请注意，我在 itunesconnect 中遇到问题，而不是在开发人员中。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T05:37:16.813

我遇到了同样的问题，我现在要做的是：

A.) 告诉客户您需要登录凭据来提交应用程序。

*   如果他们对提供该信息有疑问，请要求他们暂时更改密码，直到您完成提交。

    **或者**

B.) 为该客户创建另一个电子邮件地址。

*   如果您的网站使用的是 Google Apps for Business/Domain，这很容易做到，因为您可以设置数十封电子邮件

选项**A**对我的大多数客户来说就足够了，只需要使用**B**一次或两次。这省去了处理多个电子邮件帐户、密码、iTunesConnect 等的麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T20:00:50.567

Apple 现在将允许将同一个电子邮件地址添加到多个帐户。

# php - 带有 png 扩展名的通用动态图像

> ID：10926153
> 
> 赞同：1
> 
> 时间：2012-06-07T05:28:13.837
> 
> 标签：php, mysql, dynamic, gd

我正在尝试为我的论坛生成动态签名。一切正常，我生成了它，但是我需要获取带有 .png 扩展名的图像，因为目前图像的链接如下所示：

这是我的代码，我尝试保存图像，您可以在最后的注释行中看到，但我无法显示 .png 图片。只显示用 php 生成的那个。我需要的是具有正常扩展但动态的图像。

我的代码：

```
<?  

$username="XXX"; //Your MySQL Username. 
$password="XXX"; // Your MySQL Pass. 
$database="XXX"; // Your MySQL database. 
$host="localhost"; // Your MySQL host. This is "localhost" or the IP specified by your hosting company. 

$player_name=$_GET['player_name']; // This gets the player his name from the previous page. 

/* Next, we will make a connection to the mysql.  
If it can't connect, it'll print on the screen: Unable to select database. Be sure the databasename exists and online is. */ 

mysql_connect($host,$username,$password); // Connection to the database. 
@mysql_select_db($database) or die( "Unable to select database. Be sure the databasename exists and online is."); //Selection of the database. If it can't read the database, it'll give an error. 

/* To protect MySQL injection. */ 
$player_name = stripslashes($player_name); 
$player_name = mysql_real_escape_string($player_name); 

$query="SELECT * FROM stats_dm WHERE account='".$player_name."' LIMIT 1;"; // Gets all the information about the player. 
$result=mysql_query($query); 
$i=mysql_num_rows($result); // Here we are counting how many rows this result gives us. 

/* We will now put the player's information into variables so we can use them more easily. */ 
/* DON'T FORGET: The names should be exact the same as in your mysql db.*/ 

if ($i == 1) // If the user has been correct, then it'll give us 1 row. If its 1 row, then it'll proceed with the code. 
{ 

    $Playername=mysql_result($result,0,"lastNick"); // Gets the username of the player and put it in the variable $Playername. 
    $Money=mysql_result($result,0,"Money"); // Gets the money of the player and put it in the variable $Money. 
    $Score=mysql_result($result,0,"points"); // Gets the score of the player and put it in the variable $Score. 
    $Mapsplayed=mysql_result($result,0,"MapsPlayed"); // Gets the played maps. 
    $Wins=mysql_result($result,0,"MapsWon"); // Gets the winned maps. 

    // Creating of the .png image.  
    header('Content-Type: image/png;'); 
    $im = @imagecreatefrompng('signature.png') or die("Cannot select the correct image. Please contact the webmaster."); // Don't forget to put your picture there. 
    $text_color_red = imagecolorallocate($im, 255,0,0); // RED, GREEN, BLUE --> Go to www.colorpicker.com, select a nice color. Copy the R/G/B letters provided by colorpicker and put them here. 
    $text_color_white = imagecolorallocate($im, 255,255,255); 
    $text_color_blue = imagecolorallocate($im, 0,100,255); 
    $text_color_black = imagecolorallocate($im, 30,30,30); 
    //$text_username = $Playername; // This gets the information about player name to be showed in the picture.
    $text_username = preg_replace("/#[a-f0-9]{6}/i", "", $Playername);
    $text_score = $Score; // Same as above ^^ 
    $text_money = $Money; // Same as above ^^ 
    $text_mapsplayed = $Mapsplayed; // Same as above ^^ 
    $text_wins = $Wins; // Same as above ^^

    // Set the enviroment variable for GD
    putenv('GDFONTPATH=' . realpath('.'));

    $font = 'impact'; //Upload your custum font to the directory where this file is placed. Then change the name here. 

    $dimensions = imagettfbbox(20, 0, $font, $text_username);
    $textWidth = abs($dimensions[4] - $dimensions[0]);
    $x = imagesx($im) - $textWidth;
    /* USAGE OF THE imagettftext: First ($im) shouldn't be changed. (16) is the text-size. (0) is the angle of your text. Change it, and you'll see what's going on. (20) is de X-coordinate of the text. 
    (36) is the Y-coordinate of the text. */ 
    //imagettftext($im, 16, 0, 230, 74, $text_color_red, $font, $text_username); // Prints the username in the picture.  
    //imagettftext($im, 14, 0, 301, 33, $text_color_blue, $font, $text_score); // Prints the score shadow in the picture.
    //imagettftext($im, 14, 0, 300, 32, $text_color_white, $font, $text_score); // Prints the score in the picture. 
    imagettfstroketext($im, 14, 0, 300, 33, $text_color_white, $text_color_blue, $font, $text_score, 1); // Print pretty points
    imagettftext($im, 10, 0, 50, 112, $text_color_white, $font, $text_money . "$"); // Prints the money in the picture. 
    imagettftext($im, 10, 0, 224, 112, $text_color_white, $font, $text_mapsplayed); // Prints maps played. 
    imagettftext($im, 10, 0, 328, 112, $text_color_white, $font, $text_wins); // Prints wins. 
    imagettfstroketext($im, 20, 0, $x, 74, $text_color_white, $text_color_black, $font, $text_username, 1);
    //imagepng($im); 
    //imagepng($im, "/tmp/hedede.png");
    //$save = strtolower($player_name) .".png";
    //imagepng($im, $save);
    //imagedestroy($im); 
    imagepng($im);
    //$save = strtolower($player_name) .".png";
    //chmod($save,0755);
    //imagepng($im, $save, 0, NULL);
    imagedestroy($im);
} else echo('Username is not in our database. Please try again.'); // If the username doesn't exist (so the row is 0) then it'll give en error. 

mysql_close(); 

function imagettfstroketext(&$image, $size, $angle, $x, $y, &$textcolor, &$strokecolor, $fontfile, $text, $px) {

    for($c1 = ($x-abs($px)); $c1 <= ($x+abs($px)); $c1++)
        for($c2 = ($y-abs($px)); $c2 <= ($y+abs($px)); $c2++)
            $bg = imagettftext($image, $size, $angle, $c1, $c2, $strokecolor, $fontfile, $text);

   return imagettftext($image, $size, $angle, $x, $y, $textcolor, $fontfile, $text);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:41:21.850

使用`.htaccess`文件`mod_rewrite`

类似的事情应该这样做：

```
RewriteEngine on  
RewriteRule /([0-9a-z]+)\.png /yourscript.php?img=$1 
```

然后你可以将人们指向 png，它将被重定向到 php 脚本。

`foobar.png`将重定向到`yourscript.php?img=foobar`

# java - 单向加密的更好方法

> ID：10926155
> 
> 赞同：2
> 
> 时间：2012-06-07T05:28:14.753
> 
> 标签：java, encryption, aes

我们需要单向加密。任何人都可以提出更好的方法

**AES、DSA 和 Dygest-salt**加密方法？

我认为 Dygest-salt 用于一种方式，另一种用于两种方式，但不确定哪种使用更安全。如果有人能指出这两者之间的**性能比较会更好。**随意建议另一种算法（特定于一种方式）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T18:19:50.160

术语“单向加密”具有误导性。

[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)是**对称加密算法**（准确地说是[分组密码）的一个示例。](http://en.wikipedia.org/wiki/Block_cipher)谁有密钥可以加密，谁也可以解密。您通常不是单独使用分组密码，而是使用一种[操作模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)。

[DSA](http://en.wikipedia.org/wiki/Digital_Signature_Algorithm)根本不是一种加密算法。它是一种**签名算法**（或者实际上是三种算法的捆绑：密钥生成、签名、验证），我可以用我的私钥对一条数据进行签名，每个人都可以用对应的公钥检查签名。我还需要在签名之前对我的数据应用哈希函数。

（加密）**散列算法**（也称为（加密）**消息摘要**）通常是一个无密钥函数，并将（或多或少）任意大小的数据减少为固定大小的散列，因此应该很难找到两个不同的导致相同哈希的输入（通常还有更多属性）。这是一种**单向函数**。

对于密码存储，我们不使用加密，而是一种散列形式，其中包括一个随机**盐**，因此具有不同盐的相同密码会产生不同的结果。salt 本身与哈希一起存储，因此可用于稍后检查密码。（可能这就是您所说的**Digest-Salt**。） [另外，您不应该使用普通的*快速*散列函数，而应该使用慢速散列函数。](https://crypto.stackexchange.com/questions/24/what-makes-a-hash-function-good-for-password-hashing)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T05:32:02.430

查看[这篇关于安全存储密码](http://throwingfire.com/storing-passwords-securely)的文章。（对于那些不想点击链接的人，请查看 PBKDF2 和 bcrypt。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T06:06:58.230

您正在寻找“单向”加密。您正在寻找性能特征。并且您正在调用 2 个实现和一个概念（Dygest-salt 是概念性的）

你需要问以下问题：

1.  你有没有想解密它
2.  你关心重复吗

普通加密是将已知数据片段转换为可以使用用于原始加密的密钥解密的等效数据集。尺寸（进）== 尺寸（出）

散列是将大量文本语料库缩减为比原始文本更容易比较的小字符串的概念。一般来说，这意味着源数据比散列数据大得多。

在密码学上，散列是将大量文本语料库缩减为一个小字符串，其中内容的变化会导致显着不同的散列，因此很难产生两个导致相同散列的源。

散列应该比完全加密“更快”，因为我们最终并不关心内容 - 事实上，您可以在[散列模式下](http://csrc.nist.gov/groups/ST/toolkit/BCM/documents/proposedmodes/aes-hash/aeshash.pdf)使用 AES ，这使您具有相同的特征，但最终产品是散列，而不是加密.

如果您从不想获得纯文本，那么您应该始终使用哈希函数——它们是为相对快速的操作而设计的——它们不是免费的，但这就是重点。

# android - 如何在 QCAR Android SDK 中渲染动画模型（例如 MD2）？

> ID：10926158
> 
> 赞同：1
> 
> 时间：2012-06-07T05:28:45.097
> 
> 标签：android, opengl-es, rendering, qcar-sdk

我知道围绕 QCAR SDK 有很多工作要做，我自己尝试了很多事情。谁能建议我如何在其中渲染像 md2 这样的动画模型？

我尝试了很多东西，比如在 QCAR 之上使用 3rd 方渲染库，但我没有成功。在这个方向上的任何帮助都将是一个很大的帮助。我在 QCAR 论坛上尝试过，但没有得到解决方案。希望你们已经尝试过类似的东西。感谢您的时间和帮助。

# css - 如何使用 CSS 将一组较小的 DIVS 与一个大的 DIVS 堆叠在一起

> ID：10926159
> 
> 赞同：0
> 
> 时间：2012-06-07T05:28:45.757
> 
> 标签：css

我正在尝试实现这样的布局。

```
啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊
 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊
     xxxxxx
     xxxxxx
 bbb xxxxxx cccc
 bbb xxxxxx cccc
     xxxxxx
     xxxxxx我曾尝试使用浮动和清除属性来放置 Div，但徒劳无功。请帮忙。

中心块将包含一个徽标，周围的四个 div 将具有导航按钮。您的帮助将不胜感激。

            回答 #1

赞同：0

时间：2012-06-07T06:19:23.893

尝试使用`position:absolute`？你也可以使用 a`<table>`来做同样的事情吗？

```

# java - ArrayList 查找第一个和最后一个元素

> ID：10926162
> 
> 赞同：13
> 
> 时间：2012-06-07T05:29:18.823
> 
> 标签：java, android

晚上好，

我有一个 ArrayList（实例化为 ld_data），我迭代向前和向后看/向用户显示元素数据。在这个过程中，我需要知道我何时处于第一个元素和最后一个元素。检测我何时处于最后一个元素时，我这样做：

```
if((index + 1) <= ld_data.size())
{
    ....
} 
```

这是因为 size 属性也是 ArrayList 的上限。然而，检测我何时处于第一个元素对我来说并不容易。我能弄清楚的最好的是这似乎很蹩脚....但它有效。

```
if((index - 1) >= (ld_data.size() - ld_data.size()))
{
    ....
} 
```

在 C# .NET 世界中，我们有 ArrayList.UpperBound 或 ArrayList.LowerBound 在 Java 中是否有类似的东西？

JB

编辑：更多细节。因此，有关更多信息，我将绑定到 ListView。因此，当用户滚动到列表的第一个元素时，我想显示一条消息“在列表的开头”，当他们到达末尾时显示“列表的结尾”。我知道有一个滚动条可以使这一点变得明显，我只是想举一个例子来说明我在做什么。所以这个检查发生在“OnScroll”事件中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T05:39:10.787

它总是建议使用`Iterators`或`ListIterator`遍历列表。当您修改列表数据（删除或插入元素）时，使用列表大小作为参考不会锻炼。

**迭代器**- 允许调用者在一个方向上迭代列表，并在迭代期间从底层集合中删除元素，并具有明确定义的语义

您可以使用 a`ListIterator`来遍历列表。A`ListIterator`允许程序员以任一方向遍历列表，在迭代过程中修改列表，并获取迭代器在列表中的当前位置。你可以参考下面的例子。

```
ArrayList<String> list = new ArrayList<String>();
    ListIterator<String> iterator = list.listIterator();
    while(iterator.hasNext()){
        System.out.println(iterator.next());
        ...
        ...
        System.out.println(iterator.previous());
        if(!iterator.hasPrevious()){
            System.out.println("at start of the list");
        }else if(!iterator.hasNext()){
            System.out.println("at end of the list");
        }

    } 
```

这只是一个显示 a 用法的示例`ListIterator`，请分析您的需求并根据需要实施。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-07T05:52:08.837

```
List<YourData> list = new ArrayList<YourData>();

for(int index=0; index < list.size(); index++) {

    YourData currElement = list.get(index);

    if(index == 0) {
        //currElement is the first element
    }

    if(index == list.size() - 1) {
         //currElement is the last element
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-30T12:20:06.673

我建议您为此使用[Google Guava](https://github.com/google/guava)。如果列表为空，该`getLast`方法将抛出：`NoSuchElementException`

```
lastElement = Iterables.getLast(iterableList); 
```

并获得第一个元素：

```
firstElement = Iterables.getFirst(iterable, defaultValue) 
```

有关 Java 集合的更多信息，[请查看](https://javatutorial.net/java-collection-tutorial)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T05:31:27.593

只需检查索引是否等于 0。第一个元素始终位于此索引中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T05:39:52.067

`ArrayList`s 的底部索引始终为 0。因此`if (index > 0) { // okay to decrement }`可以正常工作。

您还可以请求列表迭代器

```
ListIterator<Item> i = ld_data.listIterator();

if (i.hasNext()) {
    Item item = i.next();
}

// and

if (i.hasPrevious()) {
    Item item = i.previous();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-07T06:21:13.040

看来您想*抽象*出处理第一个、最后一个以及以不同方式出现在两者之间的任何事物的逻辑。

您可以通过定义*解构*类来做到这一点，如下所示：

```
import java.util.*;

abstract class EndsDestructurer<A, B> {
  public abstract B first(A a);
  public abstract B intermediate(A a);
  public abstract B last(A a);

  public List<B> apply(List<A> xs) {
    int i = 0;
    int lastIndex = xs.size() - 1;
    List<B> ys = new ArrayList<B>();
    for (A x : xs) {
      if (i == 0) ys.add(first(x));
      else if (i == lastIndex) ys.add(last(x));
      else ys.add(intermediate(x));
      i++;
    }
    return ys;
  }
} 
```

**采用：**

```
EndsDestructurer<Object, String> stringer = 
  new EndsDestructurer<Object, String>() {
    public String first(Object o) { return "first: " + o; }
    public String intermediate(Object o) { return "intermediate: " + o; }
    public String last(Object o) { return "last: " + o; }
  };

List<Object> xs = Arrays.<Object>asList(90, "hello", 5.6, 12, "namaste", false);
System.out.println(stringer.apply(xs)); 
```

以上打印：
`[first: 90, intermediate: hello, intermediate: 5.6, intermediate: 12, intermediate: namaste, last: false]`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T05:39:29.620

您的索引将始终为 0 - myList.size() -1。我怀疑也许我不理解你的问题，因为这似乎是不言而喻的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-07T05:43:46.023

AFAIK，`ArrayList`类没有这样的方法来给出`first and last element`它的对象。

* * *

您可以编写一些代码，例如，

```
ArrayList<String> arr = new ArrayList<String>();
int size = arr.size();
if(size==0)
{
    // no data
}
else if(size == 1)
{
    // first = arr.get(0);
    // last = arr.get(0);
}
else
{
    // first = arr.get(0);
    // last = arr.get(size-1);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-07T06:35:18.393

> 在 C# .NET 世界中，我们有 ArrayList.UpperBound 或 ArrayList.LowerBound 在 Java 中是否有类似的东西？

在 Java 世界中，任何可索引集合的第一个元素的偏移量始终为零，因此“下限”和“上限”方法将是多余的。

只需使用常量`0`。

# javascript - 如何将 jstl/JSP 变量转换为 javascript 变量？

> ID：10926164
> 
> 赞同：3
> 
> 时间：2012-06-07T05:29:28.753
> 
> 标签：javascript, json, google-maps-api-3, jstl

是否可以将 jstl/JSP 变量转换为 javascript 变量？

这是JSTL：

```
 <c:forEach var="responseString" items = "${responseString}">
     <c:out value="${responseString.response}" />  
 </c:forEach> 
```

我想将**${responseString.response}**中的值传输到 javascript **var 响应**

这是javascript函数：

> 方向Service.route（请求，功能（**响应**，状态）

我试过这个教程；

```
var response = {
<c:forEach var="responseString" items = "${responseString}">
    <c:out value="${responseString.response}" />
</c:forEach>
} 
```

显然它没有用，我有点搞砸了，请帮助。

添加信息， ${responseString.response} 实际上是`JSON`，我只是将其转换为`String`：

> {“路线”：[{“边界”：{“东北”：{“纬度”：14.650，“lng”：121.050610}，“状态”：“OK”}

这是一个深深嵌套的`JSON`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-15T20:37:31.480

做这样的事情：

```
 var availableTags = [
  <c:forEach items="${vendorMap}" var="vendor" varStatus="vendorStatus">
     '<c:out value="${vendor}" />'
     <c:if test="${!vendorStatus.last}">    
     ,    
     </c:if> 
  </c:forEach>
 ]; 
```

请注意，您不应为最后一个条目添加“，”以及单引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:49:25.200

由于您使用每个，我认为它将不止一个响应，因此`var response = {`您应该使用 array `[]`。尝试：

```
var response = [
<c:forEach var="responseString" items = "${responseString}">
    <c:out value="${responseString.response}" />,
</c:forEach>
]; 
```

注意`,`每个元素之后。

**根据要求编辑：**

```
for(var i in response){
   PUSH_TO_GOOGLE_MAPS_WIDGET(response[i]);
} 
```

`response[i]`会像`{"routes": [{"bounds" : {"northeast":{"lat":14.650,"lng":121.050610}, "status":"OK"}`。

# javascript - 我可以在 Javascript 的 if 语句中调用函数吗？

> ID：10926168
> 
> 赞同：1
> 
> 时间：2012-06-07T05:30:34.177
> 
> 标签：javascript

我有以下代码：

```
var rtn = getParams(entity)
if (rtn.rc == false) { return; }
parameters = rtn.param; 
```

有没有办法可以在 if 语句中调用 getParams ？我还需要把退货吗？用javascript大括号？我正在寻找一种清理此代码片段的方法。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:42:15.347

我想你追求的是这个...

```
if(getParams(entity).rc == false)
    return;

 parameters = getParams(entity).params; 
```

这是完全有效（且合法）的 Javascript。

假设 getParams 返回一个具有 rc 属性的对象，那么您就可以开始了。如果没有，您将因未定义字段（在本例中为 rc）的未捕获异常而失败。

另外，请记住，与其他一些语言不同的是 false != null 和 false != undefined 并且空字符串 "" 既不是 false 也不是 undefined，因此如果您希望此测试正常工作，请确保 rc 为 *actually false。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T05:45:18.917

还不如一次性完成

```
if ( (rtn = getParams(entity)).rc ) {
    parameters = rtn.param;
} else {
    return;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T05:49:16.710

> > 我还需要把退货吗？用javascript大括号？

没必要，但推荐。

> > 我正在寻找一种清理此代码片段的方法。用这个替换你的 3 行。

```
parameters = getParams(entity).rc ? getParams(entity).param : false;
return parameters; 
```

# perl - 通过 HTTP Auth 下载 Google Checkout 报告

> ID：10926170
> 
> 赞同：0
> 
> 时间：2012-06-07T05:30:59.590
> 
> 标签：perl, google-checkout

当我尝试自动化 google checkout 销售订单报告（为了跟踪我们的一个 Android 应用程序销售）时，我试图通过一个简单的 perl 脚本（使用 Mechanize）来实现这一点。

以下是我正在遵循的步骤：

1.  连接到我的 google checkout order 收件箱
2.  访问目标网址：[https ://checkout.google.com/cws/v2/AndroidMarket-1011/305286585299619/reportsForm?_type=order-list-request&column-style=&date-time-zone=America%2FLos_Angeles&end-date=2012 -05-30&query-type=&start-date=2012-05-29](https://checkout.google.com/cws/v2/AndroidMarket-1011/305286585299619/reportsForm?_type=order-list-request&column-style=&date-time-zone=America%2FLos_Angeles&end-date=2012-05-30&query-type=&start-date=2012-05-29)，登录后。我想利用这些参数和值，同时我正在自动化这个脚本。我将动态传递值。暂时，我已经对其进行了硬编码。
3.  将身份验证和 SID 令牌与标头一起传递
4.  读取响应并将其存储在 CSV 文件中。

注意：我的 Google 结帐帐户没有商家密钥功能，因为它是经典帐户。所以，我不能使用 API 来下载报告。

这是我正在使用的 Perl 脚本..

* * *

```
#!/usr/bin/perl -w
use CGI;
use CGI::Carp;
use CGI qw'standard';
use strict;
use LWP::UserAgent;
use WWW::Mechanize;
use HTTP::Cookies;
print "Content-type: text/html \n\n";
my $url = 'https://www.google.com/accounts/ServiceLogin';
my $username = 'xxx@yyy.com';
my $password = "123456";
my $cookie_jar = HTTP::Cookies->new(file => 'cookies', autosave => 1, ignore_discard => 1);
my $mech = WWW::Mechanize->new(cookie_jar => $cookie_jar, autocheck => 0);
$mech->get($url);
$mech->form_id('gaia_loginform');
$mech->field(Email => $username);
$mech->field(Passwd => $password);
$mech->submit();
$cookie_jar->save;
# Go to the Google checkout orer inbox
$url = 'https://checkout.google.com/sell/orders';
$mech->get($url);
print $mech->content();
#Retain the cookie through out the page
$cookie_jar->load;
print "This request is valid.";
$mech->form_name('dateInput');
$mech->field('start-date','2012-05-30');
$mech->field('end-date','2012-06-01');
$mech->field('date-time-zone','America/Los_Angeles');
$mech->field('_type','order-list-request');
$cookie_jar->load;
my $results = $mech->submit();
my $response = $mech->res();
my $filename = $response->filename;
if (! open ( FOUT, ">$filename" ) ) {
    die("Could not create file: $!" );
}
print( FOUT $m->response->content() );
close( FOUT );
print $results->content(); 
```

* * *

这是结果..

脚本显示“HTTP 错误 400：错误请求”。据我了解，我发送的 URL 格式没有产生我想要的输出，也没有提示错误。

只是想知道，是否已经有任何解决方法可以通过 HTTP 调用和查询字符串传递来实现这一点，就像我在脚本中所做的那样，因为我的帐户没有可用的商家密钥。

谢谢 - 期待收到您的来信。感谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:26:01.530

您似乎只有一个 Android In-App Billing Merchant 帐户，但没有 Google Checkout 商家帐户。

为了使用 Order API（或其他 Google Checkout API），您需要有一个商家密钥，如果您的帐户也是经典的 Checkout 商家帐户，您可以获得该密钥。

使用下面的 URL 注册 Checkout Merchant 帐户。确保使用与现有商家帐户相同的 Google 登录凭据：

[http://checkout.google.com/sell/signup](http://checkout.google.com/sell/signup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:32:58.793

您不能将 'financial-state' 参数留空。

设置一个有效值

```
$mech->field('financial-state', 'CHARGEABLE'); 
```

或者只是删除它。

# php - 如果你不在 PHP 中显式调用父构造函数会发生什么？

> ID：10926172
> 
> 赞同：7
> 
> 时间：2012-06-07T05:31:02.230
> 
> 标签：php

我想知道为什么我们必须在 PHP 中显式调用父构造函数？假设我们忘记在派生类中调用父构造函数会怎样？

我认为派生类将无法访问其父类的成员属性或方法，但是在我尝试不调用父构造函数之后，似乎子类仍然可以访问其父公共/受保护成员。

那么我们必须显式调用它的父构造函数吗？如果我们忘记这样做会有什么后果？

提前致谢。任何形式的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T05:43:32.447

这取决于您的代码。如果你不调用父构造函数，最简单的事情是什么都不会发生，但是如果你的父构造函数为父类做了一些初始化，那么所有这些都被遗漏了。考虑并玩这个：

```
<?php

class X {
    private $_a;

    public function __construct($a) {
        echo 'X::construct ';
        $this->_a = $a;
    }

    public function getA() {
        return $this->_a;
    }
}

class Y extends X {
    private $_b;

    public function __construct($a,$b) {
        echo 'Y::construct ';
        parent::__construct($a);
        $this->_b = $b;
    }

    public function getAB() {
        return $this->_b + $this->getA();
    }
}

$n = new Y(3,2);
echo $n->getAB(); 
```

很容易看出，如果你运行它，它会打印出 5（以及其他转储）。但是如果你评论`class Y`parent call `parent::__construct($a);`，你会得到 2。这就是这种情况下的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T05:43:12.657

因为如果子类定义了构造函数，则不会隐式调用父构造函数。如果子类假设父类已经初始化并做了一些工作，则需要确保进入父类构造函数。

例如，您可以扩展一个您不*希望*输入父构造函数的类。该行为只是允许设计中的更多灵活性。在大多数情况下，您*可能*希望调用父构造函数。

这一切都取决于你*为什么*扩展父母。您是否需要需要父级初始化的方法？如果是，请调用其构造函数。您可以在扩展后只注入某些特定的依赖项，还是需要一些简单的东西，比如常量？那么你可能不需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T05:41:49.837

结果实际上取决于父构造函数中发生的事情。即使不调用父构造函数，所有公共和受保护的成员属性和方法都可用，这是正确的。但是继承的类成员的值可能会在父构造函数中被修改/初始化——您需要决定是否希望发生这种情况。

总是添加对父构造函数的调用通常是一个不错的决定，即使那里没有发生任何事情（将来可能会改变）。省略此调用的唯一原因是当您需要覆盖在构造函数中执行的操作时。这是一个比你在Java中增加更多灵活性的特性，在Java中调用父构造函数是强制性的。

# c# - 如何在 PictureBox 中显示预览？

> ID：10926178
> 
> 赞同：0
> 
> 时间：2012-06-07T05:31:36.223
> 
> 标签：c#, directshow.net

我也使用 DirectshowLib 和 c# 从网络摄像头录制视频，但在视频重新编码期间，视频预览也会显示，因此我已完成以下步骤

1.我有可用的视频设备

1.  在里面。通过使用 IFilterGrapth2 对象`Graph = (IFilterGraph2)new FilterGraph();`

2.  在里面。ICaptureGraphBuilder2 对象通过使用`captureGraph = (ICaptureGraphBuilder2)new CaptureGraphBuilder2();`

4.filter graphth设置为ICaptureGraphBuilder2对象`captureGraph.SetFiltergraph(Graph);`

1.  然后添加了 soursefilterformoniker() 和 outputfilename()

完整代码如下。它没有任何错误，但它单独打开预览窗口；我想在图片框上显示预览..

**如何在图片框中预览窗口？**

这是我的完整代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using DirectShowLib;
using DirectShowLib.DMO;
using System.Runtime.InteropServices;
using System.Drawing.Drawing2D;
using System.IO;

namespace Cam_Recording_V1_directshow.net_
{
    public partial class Form1 : Form
    {
        string captureDeviceName = string.Empty;
        IFilterGraph2 Graph = null;
        IMediaControl m_mediaCtrl = null;
        public List<DsDevice> AvailableVideoInputDevices { get; private set; }
        IAMVideoProcAmp vpa;
        [DllImport("olepro32.dll", CharSet = CharSet.Unicode, ExactSpelling = true)]
        private static extern int OleCreatePropertyFrame(IntPtr hwndOwner, int x, int y,
            string lpszCaption, int cObjects,
            [In, MarshalAs(UnmanagedType.Interface)] ref object ppUnk,
            int cPages, IntPtr pPageClsID, int lcid, int dwReserved, IntPtr pvReserved);
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

            IBaseFilter capFilter = null;
            IBaseFilter asfWriter = null;
            IFileSinkFilter pTmpSink = null;
            ICaptureGraphBuilder2 captureGraph = null;
            object o;

            //
            //Get list of video devices
            //
            AvailableVideoInputDevices = new List<DsDevice>();
            DsDevice[] videoInputDevices = DsDevice.GetDevicesOfCat(FilterCategory.VideoInputDevice);
            AvailableVideoInputDevices.AddRange(videoInputDevices);
            if (AvailableVideoInputDevices.Count > 0)
            {
                //
                //init capture graph
                //
                Graph = (IFilterGraph2)new FilterGraph();
                captureGraph = (ICaptureGraphBuilder2)new CaptureGraphBuilder2();

                //
                //sets filter object from graph
                //
                captureGraph.SetFiltergraph(Graph);
                //
                //which device will use graph setting
                //
                Graph.AddSourceFilterForMoniker(AvailableVideoInputDevices.First().Mon, null, AvailableVideoInputDevices.First().Name, out capFilter);
                captureDeviceName = AvailableVideoInputDevices.First().Name;
                #region WMV
                //
                //sets output file name,and file type
                //
                captureGraph.SetOutputFileName(MediaSubType.Asf, /*DateTime.Now.Ticks.ToString()  +".wmv"*/ "test.wmv", out asfWriter, out pTmpSink);
                //
                //configure which video setting is used by graph
                //                
                IConfigAsfWriter lConfig = asfWriter as IConfigAsfWriter;
                Guid cat = new Guid("8C45B4C7-4AEB-4f78-A5EC-88420B9DADEF");
                lConfig.ConfigureFilterUsingProfileGuid(cat);
                #endregion                      
                captureGraph.RenderStream(PinCategory.Preview, MediaType.Video, capFilter, null, null);

                captureGraph.RenderStream(PinCategory.Capture, MediaType.Video, capFilter, null, asfWriter);
                m_mediaCtrl = Graph as IMediaControl;
                m_mediaCtrl.Run();
            }
            else
            {
                MessageBox.Show("Video Capture Device Not Found!!");
                button1.Visible = false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:43:23.457

我已经使用 VMR9 完成了这项工作。我在图表中添加了一个 VMR9 过滤器。还有很多。

# jar - 将 .jars 添加到 CLASSPATH？

> ID：10926179
> 
> 赞同：0
> 
> 时间：2012-06-07T05:31:38.590
> 
> 标签：jar, classpath

我正在尝试与非官方的 Android API 交互：[http](http://code.google.com/p/android-market-api/) ://code.google.com/p/android-market-api/ 。它包括我必须添加到我的类路径中的两个 .jar（我在 Windows 7 上）

我已将 .jars、androidmarket 和 protobuf 放入我的项目目录中，并编辑了我的 CLASSPATH 以包含这两个 .jars：

> C:\xxxxxxxxxx\JAVA 项目文件夹\protobuf-java-2.2.0.jar;C:\xxxxxxxxxx\JAVA 项目文件夹\androidmarketapi-0.6.jar;C:\Program Files (x86)\Java \jre6\lib\ext \QTJava.zip

但是，当我创建一个测试器类来尝试实例化一个新的 MarketSession 对象时，javac 拒绝编译！这是我的测试员课程：

```
public class Tester {
    public static void main (String[] args) {
        MarketSession session = new MarketSession(true);
            System.out.println("login...");
    }
} 
```

javac 抱怨它找不到 MarketSession 符号。有什么线索吗？我知道这是一个针对 API 的特定问题，但我想我可能遗漏了一些关于 .jars 和 CLASSPATH 的基本知识。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:41:18.107

你需要`import` `MarketSession`在你的`Tester`课堂上

```
import com.gc.android.market.api.MarketSession;
public class Tester {
    public static void main (String[] args) {
        MarketSession session = new MarketSession(true);
            System.out.println("login...");
    }
} 
```

# c# - 在 Windows 资源管理器 c#/vb .net 的命名空间扩展中选择文件/文件夹

> ID：10926180
> 
> 赞同：0
> 
> 时间：2012-06-07T05:31:41.793
> 
> 标签：c#, namespaces

我正在实现一个命名空间扩展，它在“我的电脑”中可见。我想编写自动化测试用例来浏览它们。我能够打开资源管理器窗口直到命名空间扩展。作为 -

```
Process.Start("explorer.exe", "shell:::{CLSID of my namespace }") 
```

接下来我想在打开的窗口中搜索特定的文件夹名称。例如，如果我输入“temp”，那么我的鼠标应该移动到命名空间资源管理器窗口中的“temp”文件夹。然后我双击鼠标的当前位置并进入该文件夹。接下来我输入“doc1.doc”，然后我的鼠标应该能够定位并移动到“doc1.doc”文件。getDirectory 或 GetFile 等 API 也不起作用，因为我没有与我的命名空间关联的标准驱动器，也没有相对路径。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:28:44.647

通过使用 sendkeys 命令，我能够实现我的命名空间扩展的浏览部分。我用它首先打开资源管理器窗口（Win + E）。接下来我尝试模拟按键，假设我必须双击一个名为“temp”的文件夹，我将“temp”作为击键发送并按“Enter”。事实证明，“[输入模拟器](http://inputsimulator.codeplex.com/)”对实现同样的目标非常有帮助。

从许多帖子中可以看出，进行鼠标模拟似乎非常棘手和冒险，因此避免了这种情况。

我不想直接执行我的代码（因为我已经编写了单元测试），但我想模拟用户的工作方式，这会在内部触发我的代码。

# sql-server-2008 - 这个“IN”sql 表达式有什么问题？没有按预期工作

> ID：10926183
> 
> 赞同：0
> 
> 时间：2012-06-07T05:31:58.590
> 
> 标签：sql-server-2008

在这里找到我的问题的最佳答案：[NOT IN 子句和 NULL 值](https://stackoverflow.com/questions/129077/sql-not-in-constraint-and-null-values)

以下两个查询均不返回任何结果：

```
select upc 
from   staging..posrecords 
where  upc not in (select upc from mrs..items)

select upc 
from   staging..posrecords 
where  upc in (select upc from mrs..items) 
```

以下两个查询都返回结果：

```
select upc from staging..posrecords

select upc from mrs..items 
```

鉴于后两个查询都返回结果，我不明白前两个查询怎么可能都不返回任何结果。也许已经晚了，我只是错过了一些非常明显的东西，但我现在已经被难住了。

此外，以下查询也确实返回结果

```
select upc 
from mrs..items 
where upc not in (select upc from staging..posrecords) 
```

既然如此，我更加困惑为什么上面的第一个查询没有返回任何结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:39:18.717

原因：当子查询在列中包含 NULL 值时，它总是返回 NULL。

```
1 OR 2 OR NULL
TRUE OR NULL
NULL 
```

更多细节与示例。

[http://explainextended.com/2009/09/15/not-in-vs-not-exists-vs-left-join-is-null-sql-server/](http://explainextended.com/2009/09/15/not-in-vs-not-exists-vs-left-join-is-null-sql-server/)

原因可能是您的 NULL 值`upc column in mrs...items table`，请尝试以下查询。

```
 select upc 
    from   staging..posrecords 
    where  upc not in (select upc from mrs..items where upc is not null)

    select upc 
    from   staging..posrecords 
    where  upc in (select upc from mrs..items where upc is not null) 
```

尝试使用`Not exists`

```
 select upc 
    from staging..posrecords 
    where not exists ( select upc from mrs..items 
    where mrs..items.ups = staging..posrecords.upc)

    select upc 
    from   staging..posrecords 
    where not exists(select upc from mrs..items 
    where mrs..items.upc=staging..posrecords.upc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:49:55.967

也许这只是你糟糕的一天。尝试使用 JOIN 来获取您的第一个 NOT IN 查询。像这样 -

```
SELECT sp.upc 
FROM staging..posrecords sp LEFT JOIN mrs..items mi 
 ON (sp.upc=mi.upc)
WHERE
 mi.upc IS NULL; 
```

# c++ - 我哪里错了？为 DATE 设置数据缓冲区

> ID：10926186
> 
> 赞同：2
> 
> 时间：2012-06-07T05:32:23.807
> 
> 标签：c++, oracle11g, occi

我想使用以下代码在 oracle 中为 DATE 进行数组获取。它可以正常编译并正确导出所有其他数据类型，但 DATE 类型除外。该程序说“ora-32146 无法在空日期执行操作”。

任何人都可以看到我错在哪里？

```
 Statement *stmt = conn->createStatement("SELECT AGE,CASH2, BIRTHDATE from myTable2"); /*, CASH1, CASH2, BIRTHDATE*/
    //stmt->setMaxParamSize(1,sizeof(Number));
    ResultSet *rs=stmt->executeQuery();
    string myName[400];
    int myAge[400];
    double myCash1[400];
    double myCash2[400];
    oracle::occi::Date myBirthDate[400];

    //rs->setDataBuffer(1,myName,OCCI_SQLT_STR,sizeof(string));
    rs->setDataBuffer(1,myAge,OCCIINT,sizeof(int));
    rs->setDataBuffer(2, myCash2, OCCIBDOUBLE, sizeof(double),NULL);
    rs->setDataBuffer(3, myBirthDate,OCCI_SQLT_DATE, sizeof(oracle::occi::Date),NULL);

    while (rs->next(200)==ResultSet::DATA_AVAILABLE)
    {
        //cout << "Exporting batch..." << endl;
        for(size_t i=0;i<rs->getNumArrayRows();i++)
        {
            //cout << myName[i] << endl;
            cout << myAge[i] << endl;
            //cout << myCash1[i] << endl;
            cout << myCash2[i] << endl;
            int y;
            unsigned int m,d,h,mm,s;
            myBirthDate[i].getDate(y,m,d,h,mm,s);
            cout << y <<"-"<<m<<"-"<<s << endl;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T03:48:18.320

弄清楚了。

使用 rs->setDataBuffer(3, myBirthDate,OCCI_SQLT_DAT, 7,NULL);

一切正常。

没有关于OCCI的好文档...

# tfs - TFS Express 中缺少什么？

> ID：10926189
> 
> 赞同：12
> 
> 时间：2012-06-07T05:32:49.587
> 
> 标签：tfs, version-control

我知道使用 TFS 的 express 版本有一些限制：只兼容 SQL Express，没有报告服务。谁能告诉我更多？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-07T05:38:23.863

我用谷歌搜索了“TFS Express 限制”

> Express 版与安装 TFS Basic 向导时获得的 TFS 基本相同，只是安装经过精简和简化，以使其非常快速和容易。除了正常的 TFS Basic 安装限制（无 Sharepoint 集成、无报告）之外，TFS Express：
> 
> *   仅限于不超过 5 个指定用户。
> *   仅支持 SQL Server Express Edition（如果您没有，我们将为您安装）
> *   只能安装在单台服务器上（不能多服务器配置）
> *   不包括 TFS 代理和新的抢占式分析插件。

# c# - Sql 二进制到 c# - 如何在 c# 中获取相当于二进制的 SQL 二进制

> ID：10926192
> 
> 赞同：1
> 
> 时间：2012-06-07T05:33:21.070
> 
> 标签：c#, sql-server-2008, binary

对你们来说，这可能是一个愚蠢的问题。我有一个带有一个二进制列的 SQL 表。它有一些二进制格式的数据。

例如`0x9A8B9D9A002020202020202020202020`

它的等效英文表示是`"test".`

是否可以将其转换`string`为等效`binary`形式`c#`？

```
string s = "test"; // C# code to convert s to it's equivalent SQL binary form. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:57:47.037

```
public static byte[] ConvertToBinary(string str)
{
    System.Text.ASCIIEncoding  encoding = new System.Text.ASCIIEncoding();
    return encoding.GetBytes(str);
} 
```

或者

```
Convert.ToByte(string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:09:10.850

这实际上取决于您最初从字符串转换为二进制时使用的编码：

```
 byte[] binaryString = (byte[])reader[1];

 // if the original encoding was ASCII
 string x = Encoding.ASCII.GetString(binaryString);

 // if the original encoding was UTF-8
 string y = Encoding.UTF8.GetString(binaryString);

 // if the original encoding was UTF-16
 string z = Encoding.Unicode.GetString(binaryString);

 // etc 
```

# solr - 如果指定的多值字段仅包含一个值，则过滤 doc

> ID：10926197
> 
> 赞同：1
> 
> 时间：2012-06-07T05:33:46.217
> 
> 标签：solr

如果指定的多值字段仅包含一个值，我们会遇到一个查询案例来过滤 doc。例如：我们有一个西装索引，包括衣服，裤子或其他东西。如果由于缺货而导致西装内只有一件产品，我们无法向用户展示该西装，因为它不是“西装”。这是我们的数据：

```
<doc>
    <int name="suitId">001</int>
    <arr name="productName">
        <str>T-shirt</str>
        <str>jeans</str>
    </arr>
</doc>
<doc>
    <int name="suitId">002</int>
    <arr name="productName">
        <str>T-shirt</str>
    </arr>
</doc> 
```

我们想要除了 suitId=002 的套装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:56:40.770

最好有一个单独的字段来维护西装的产品数量并使用它来过滤西装。

我认为您不能对文本多值字段使用范围查询。
您可能可以`productName:[* TO *]`用来选择至少有一种产品的西装，但不能选择数量。

# algorithm - 重量分布

> ID：10926198
> 
> 赞同：0
> 
> 时间：2012-06-07T05:33:59.960
> 
> 标签：algorithm, math, optimization

我目前正在处理具有 3 个目标的多目标问题，并且我正在使用加权求和方法，其中所有目标的权重总和应为 1，我也使用 0.1 作为一个步骤，例如，如果我有两个目标我的权重将会：

```
 0.9 0.1
 0.8 0.2
 0.7 0.3 
```

但目前我坚持 3 个目标，并试图找出一种算法，可以在 3 个目标之间进行类似的权重分布，如下所示：

```
 1obj       2obj               3obj
 1.0        0.0                0.0
 0.9     (0 ; 0.1)           (0.1 ; 0)
 0.8   (0 ; 0.1 ; 0.2)    (0.2 ; 0.1 ; 0) 
```

你能建议一个算法来获得所有可能的组合吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:39:44.057

恕我直言，在这种情况下获得所有组合的最简单方法是将问题建模为[图](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)并运行图发现算法，例如[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)。

该图将是`G=(V,E)`哪里`V = { (x1,x2,x3) | x1 + x2 + x3 = 1 }`和`E = { (v1,v2) | can get from v1 to v2 within a single change}`（例如`((1,0,0.0,0.0),(0.9,0.0,0.1))`是一条边 - 因为您可以通过一次更改从一个到另一个）。

现在，由于图是[强连接](http://en.wikipedia.org/wiki/Connectivity_%28graph_theory%29)的（说服自己为什么） - BFS 将发现该图中的所有顶点，从而发现所有可能的组合。

**注意**：可能性的数量是指数级的，因此对于大量对象或小步骤 - 发现整个图将需要很长时间。

**小优化：（**如果预计图大小不会太大，则不需要）：可以通过将图建模为[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)来优化此解决方案的空间消耗（不允许“后边”作为结构限制）。这也将产生正确的结果，因为仍然可以从单个（唯一）源访问所有顶点。
这节省了空间消耗，因为在 DAG 中运行 BFS 时 -`visited`不必维护一个集合。

# entity-framework - 实体框架代码优先现有数据库和新数据库维护

> ID：10926199
> 
> 赞同：1
> 
> 时间：2012-06-07T05:34:11.387
> 
> 标签：entity-framework, migration, initialization, code-first, maintenance

尝试首先自学 EF 代码，并且已经按照我现在想要的方式扩展了初始数据库创建设置以及数据库的初始创建，但试图弄清楚如何最好地处理和管理数据库的未来更新，但仍然与创建新数据库一起工作。

我想出了一个场景，我没有在网上找到任何好的例子或建议。我想要一个用户可以创建新数据库的应用程序，它根据当时代码中的POCO对象基于现有模型创建一个新数据库。正如我所说，到目前为止，这对我来说很好。稍后，程序更新出现了，通过程序集中的迁移对象，它知道要做什么，并使用 DbMigrator.Update() 方法使用 EF Code First 迁移更新数据库。到目前为止一切顺利，至少对于程序的初始版本而言。

现在，稍后，在更新的版本中，无论出于何种原因，他们都希望创建一个新数据库。所以他们是根据当时代码中的当前模型来做的，而且效果很好。但是，在装配之前的这些其他迁移根本不需要运行，因为模型已经有任何可能需要设置并准备就绪的更改，但新创建的迁移表没有至少据我所知，他们不知道。我不希望它们运行，但我希望将来的任何更新都应用于以后需要它们的任何数据库。

我的想法，从我目前所读的内容来看，我需要创建额外的逻辑来跟踪代码中最新的数据库迁移（使用某种时间戳属性来确定各种迁移的顺序），并且以某种方式告诉它不要实际执行该日期/版本之前的任何迁移更新，但 EF 迁移逻辑仍将使用告诉它特定迁移已运行的信息更新 __MigrationHistory 表。我想我将通过反射手动执行此操作，以获取迁移对象并通过在更新方法中指定迁移对象名称来按顺序运行它们，但有一些检查以防止在初始化期间实际运行数据库更改。然后，当代码更新后出现任何新的迁移时，旧的迁移将不会

在我花了很多时间弄清楚这个逻辑之前，我想确保文档中没有任何东西，或者我完全忽略或错过的管道中没有任何东西可以更好地处理这个已经内置和/或获得一些输入处理这种情况的最佳方法。在我看来，这似乎是一个相当普遍的场景，但我看不到使用基本 EF 逻辑处理它的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T23:15:22.777

您无需担心任何这些...如果您总是使用 DbMigrator.Update() 那么 Migrations 将负责跟踪哪些迁移已应用，哪些尚未应用。这仍然适用于您在第三段中提到的场景，您的项目中有许多迁移但您想创建一个新数据库，只需调用 DbMigrator.Update() 它将使用您的迁移和记录创建数据库它们已被应用的事实。

〜罗文

# iphone - 在 Objective-C 中“子类化”一个变量

> ID：10926200
> 
> 赞同：0
> 
> 时间：2012-06-07T05:34:12.370
> 
> 标签：iphone, objective-c, ios, cocoa-touch, design-patterns

> **可能重复：**
> [Objective C - 子类中的实例变量类型狭窄？](https://stackoverflow.com/questions/4248066/objective-c-narrow-instance-variable-types-in-subclasses)

我有一个名为的类`ParentClass`，它有一个`UIView`属性。我还有一个名为`ChildClass`的类，它是`ParentClass`. `ChildClass`显然继承了该`UIView`属性，但`ChildClass`我确定我只会将 a`UIScrollView`用于该属性。

我的问题是，是否有可能/可行以某种方式“子类化”该`UIView`属性，重命名它并使其只能是一个`UIScrollView`？合成时是否必须覆盖 .m 文件中的属性？

类似于 a`UITableViewController`的主视图属性是 a而`UITableView`不是 a `UIView`。`UIViewController`

更新：也许我不是指财产，而是变量本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:44:52.770

只需向您的子类添加一个同名的属性，但使用 UIScrollView 而不是`UIView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:46:25.733

如果您是子类`ParentClass`化，则它具有 a 的属性`UIView`并且您需要`ChildClass`继承 a `UIScrollView`.. 您应该只在其中创建一个`UIScrollView`属性，`ParentClass`以便`ChildClass`可以继承和使用它。

如果`ChildClass`不打算使用该`UIView`属性，如果您从不初始化它将保持不变，`nil`因此不会耗尽您的任何内存。如果您选择使用该`UIView`物业，也可以为您提供好处。

或者，如果您不想`UIScrollView`在其中声明一个新属性`ChildClass``ParentClass`

希望这是有道理的，并有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T05:46:46.243

属性被转换为方法，并且这些方法可以像任何其他方法一样被覆盖。你可以这样做：

```
@interface ParentClass {
    NSView* myView;
}
@property(retain) NSView* myView;
@end

@implementation ParentClass
@synthesize myView;
@end

@interface ChildClass
@end

@implementation ChildClass
-(void) setMyView:(NSView*)v;
{
    if([v isKindOfClass:[UIScrollView class]]){
        [super setMyView:v];
    } else {
        //do whatever error handling you want to here
    }
}
@end 
```

该`-setMyView:`方法是属性被转换成的方法之一，因此在其中定义它将`ChildClass`覆盖父类上的方法。

旁注：当您提到“子类化”属性时，正确的术语是“覆盖”。

# javascript - 如何在单击 Asp.Net 按钮单击事件时显示弹出窗口

> ID：10926205
> 
> 赞同：1
> 
> 时间：2012-06-07T05:35:03.050
> 
> 标签：javascript, asp.net, popup

我有一个弹出窗口，向用户显示一条消息，说明他们的信息已提交。弹出 div 的 id NewCustomerStatusPopUp，我希望在信息成功插入数据库时​​显示此弹出窗口，那么我该如何调用 javascript提交所有信息后显示弹出窗口的功能。任何人都可以让我知道我该怎么做。这是我的弹出窗口

```
<div id="NewCustomerStatusPopUp">
<asp:Label ID="lblStatus" Text="" runat="server"/>
</div> 
```

CSS：

```
#NewCustomerStatusPopUp
    {
    position: fixed;
    width: 300px;
    height: 250px;
    top: 50%;
    left: 50%;
    margin-left:-255px;
    margin-top:-150px;
    border: 10px solid #9cc3f7;
    background-color:White; 
    padding: 10px;
    z-index: 102;
    font-family:Verdana;
    font-size: 10pt;
    border-radius:10px;
    -webkit-border-radius:20px;
    -moz-border-radius:20px;

    } 
```

任何帮助深表感谢。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:43:49.150

要从服务器调用 javascript 函数，您可以使用`RegisterStartipScript`： 在您的
插入查询之后编写此代码

```
ClientScript.RegisterStartupScript(GetType(), "id", "callMyJSFunction()", true);

<script type="text/javascript">
function callMyJSFunction()
{
    alert("Record inserted sucessfully.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:46:22.570

如果您在执行插入后的代码中有一个单击事件处理程序，则不需要 JS，将 div 包装在面板中：

```
<asp:Panel ID="pnlStatus" Visible="false" >
    <div id="NewCustomerStatusPopUp">
      <asp:Label ID="lblStatus" Text="" runat="server"/>
    </div>
</asp:Panel> 
```

在您后面的代码中，一旦您断言新客户已成功添加，

将 pnlStatus 设置为可见。

```
pnlStatus.Visible = true; 
```

# php - PHP 邮件未从 mydomain.com 发送到谷歌应用程序电子邮件 myname@mydomain.com

> ID：10926206
> 
> 赞同：1
> 
> 时间：2012-06-07T05:35:04.830
> 
> 标签：php, email, google-apps

当我尝试使用
PHP 邮件功能从我的网站中的联系表单发送邮件时，它不会从 mydomain.com 发送到谷歌应用程序电子邮件 myname@mydomain.com。

请为该问题提出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-23T08:41:28.907

经过很长时间的研究，我找到了这个问题的答案。

对我来说，问题出在我的主机设置中。

您的主机将这些域地址视为在其自身而非 Google Apps 中注册的地址。因此，它将电子邮件路由到主机邮件服务器。

要通过 Google Apps (Gmail) 进行路由，您需要更改电子邮件路由设置。

在您的 cpanel 中找到“MX Entry”设置并优先添加新的 MX Record

> 0

和目的地

> gmail.com

并添加它。您还应该将现有的 MX 记录优先级更改为 1。

这些设置将允许您接收来自`php mail()`您的 Google Apps gmail 帐户的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T09:48:23.590

只需修改 /etc/hosts 文件并在下一行添加您的 IP 地址 mydomain.com mydomain，这应该可以通过将电子邮件路由到 google 的服务器来工作。我对我的网站做了同样的事情。

所以我的 /etc/hosts 文件看起来像这样：

127.0.0.1 localhost **IP** **mysite.com** **mysite**（这是一个别名，我想你可以随便称呼它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:25:44.443

要从 PHP 发送电子邮件，您必须安装 SMTP 服务器并将 PHP 配置为使用该服务器。如果您使用共享主机或进行了设置，您应该通过检查[文档](http://us3.php.net/manual/en/function.mail.php)来检查您是否正确调用了邮件功能。

这是如何使用它的示例：

```
$to = "name@example.com";
$subject = "Test Message";
$message = "Hello!";
$headers = "From: me@example.org";

mail($to, $subject, $message, $headers); 
```

# php - 如何使用 htaccess 为所有页面设置 favicon 默认值

> ID：10926207
> 
> 赞同：2
> 
> 时间：2012-06-07T05:35:30.513
> 
> 标签：php, .htaccess

我想使用 htaccess 为我的站点中的所有文件设置 Favicon ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T05:40:58.637

与其在 htaccess 中指定 Favicon，不如在每个页面的 HEAD 区域中使用以下 META 标签：

```
<link rel="shortcut icon" href="http://example.com/myicon.ico" /> 
```

如果这是不可能的（也许您有一个非常大的静态网站），您可以简单地将文件（将其命名为 favicon.ico）存储在您网站的根文件夹（例如 /public_html/）中，因为浏览器会自动先查找那里。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T05:39:14.753

未经测试，大致如下：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond favicon.ico 
RewriteRule .* path/to/shared/favicon.ico [L] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-12T07:32:09.143

受此线程的启发：[使用 htaccess 重写特定文件的路径](https://stackoverflow.com/questions/12699847/rewriting-path-for-a-specific-file-using-htaccess)并使用浏览器将在站点根目录中查找 favicon.ico 的事实：

```
RewriteEngine On 
Options +FollowSymLinks
RewriteRule ^favicon.ico path_to_favicon_folder/favicon.ico [L] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-19T08:24:06.233

添加此代码

```
RewriteEngine On 
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond favicon.ico 
RewriteRule .* favicon.ico [L] 
```

> 如果顶级代码不起作用，请使用它。

```
RewriteEngine On 
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule "^(.+)favicon\.ico(|\?.+)$"  "/favicon.ico" [PT] 
```

您必须将您的网站图标放在**public_html**目录中。

请**删除**浏览器的缓存或在新浏览器上测试。

我希望它有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-10T07:26:47.190

```
RewriteEngine on
RewriteBase /
RewriteRule "^(.+)favicon\.ico(|\?.+)$"  "/favicon.ico" [PT] 
```

# google-places-api - Google Place API 请求被拒绝问题

> ID：10926210
> 
> 赞同：2
> 
> 时间：2012-06-07T05:36:15.830
> 
> 标签：google-places-api

我正在尝试使用 Google Places api 来搜索位置。但不幸的是，我只收到一条响应请求被拒绝的消息。我创建了新的 API 密钥，但 API 访问菜单显示一些警告图标，如下图所示，它是否产生了任何问题或属于 API 密钥的任何其他问题？

请让我知道如何克服这个问题....提前谢谢！![在此处输入代码](../Images/7fe38e97c8b5355ee877c65abdfc0f7a.png)`

我的请求字符串是[这个](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&sensor=false&key=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:38:36.000

您也不应该像在上面的请求字符串中那样在 Internet 上发布您的 API 密钥，以防止您的密钥被滥用。您的 API 密钥应像密码一样保密，因为您的密钥的任何使用都将记录在您的帐户中。

上面的请求使用我的 API 密钥可以正常工作，我建议在 API 控制台的 API 访问页面上生成另一个 API 密钥。还要确保您已启用服务下的 Places API，说明在[此处](https://developers.google.com/maps/documentation/places/#Authentication)。

通知图标用于通知您尚未在您的帐户上启用计费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:11:44.183

我有同样的错误。该错误已通过`&sensor=false`在 API 末尾追加解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T11:59:45.397

我遇到了这个问题，结果证明使用 Android 应用程序的密钥（用于地图 API 的密钥）是错误的。我需要为浏览器应用程序创建一个密钥。一旦我使用浏览器键而不是 Android 键，一切正常。

# selenium - Selenium 2：如何保存包含所有引用资源（css、js、图像...）的 HTML 页面？

> ID：10926216
> 
> 赞同：4
> 
> 时间：2012-06-07T05:37:01.997
> 
> 标签：selenium, webdriver

在 Selenium 2 中，该`WebDriver`对象仅提供了一种`getPageSource()`保存原始 HTML 页面的方法，而无需任何 CSS、JS、图像等。

有没有办法在 HTML 页面中保存所有引用的资源（类似于 HtmlUnit 的`HtmlPage.save()`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-31T13:01:11.163

我知道我的答案已经很晚了，但是当我搜索自己时，我并没有真正找到这个问题的答案。所以我自己做了一些事情，希望我仍然可以帮助一些人。

对于 c#，我是这样做的：

```
using system.net;

string DataDirectory = "C:\\Temp\\AutoTest\\Data\\";
string PageSourceHTML = Driver.PageSource;

string[] StringSeparators = new string[] { "<" };
string[] Result = PageSourceHTML.Split(StringSeparators, StringSplitOptions.None);
string CSSFile;

string FileName = "filename.html";
System.IO.File.WriteAllText(DataDirectory + FileName, PageSourceHTML);

foreach(string S in Result)
{
    if(S.Contains("stylesheet"))
    {
        CSSFile = S.Substring(28); // strip off "link rel="stylesheet" href="
        CSSFile = CSSFile.Substring(0,CSSFile.Length-10); // strip off characters behind, like " />" and newline, spaces until next "<" was found. Can and probably will be different in your case.
        System.IO.Directory.CreateDirectory(DataDirectory + "\\" + CSSFile.Substring(0, CSSFile.LastIndexOf("/"))); //create the CSS direcotry structure
        var Client = new WebClient();
        Client.DownloadFile(Browser.Browser.WebUrl + "/" + CSSFile, DataDirectory + "\\" + CSSFile); // download the file and save it with the same filename under the same relative path.
    }
} 
```

我确信它可以改进以包括任何不可预见的情况，但对于我的测试网站来说，它总是会像这样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:35:05.567

没有。如果可以，请执行`HtmlUnit`此特定任务。

我认为，你能做的最好的事情是[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)。同时按`Ctrl`+ `S`，用 确认`Enter`。它是盲目的，不完美的，但它是最接近你需要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T19:26:44.260

您可以使用 selenium 交互来处理它。

```
 using OpenQA.Selenium.Interactions; 
```

也有几种方法可以做到这一点。我处理此类事情的一种方法是找到页面中心的项目，或您希望保存的任何区域，然后执行操作构建器。

```
 var htmlElement = driver.FindElement(By.XPath("//your path"));
    Actions action = new Actions(driver);
    try
    {
     action.MoveToElement(htmlElement).ContextClick(htmlElement).SendKeys("p").Build().Perform();
    }
    catch(WebDriverException){} 
```

这将简单地右键单击该区域，然后在右键单击时发送键“p”，这是 Firefox 中的“将页面另存为”热键。另一种方法是让构建器发送密钥。

```
 var htmlElement = driver.FindElement(By.Xpath("//your path"));
    action.MoveToElement(htmlElement);
    try 
    {
      action.KeyDown(Keys.Control).SendKeys("S").KeyUp(Keys.Control).Build().Perform();
    }
    catch(WebDriverException){} 
```

请注意，在这两种情况下，如果您离开驱动程序的范围，例如 windows 窗体，那么您将不得不切换您的案例/代码以在 windows 窗体弹出时对其进行处理。Selenium 也会在发送密钥后没有任何返回的问题，因此 Try Catches 就在那里。如果有人有办法解决这个问题，那就太棒了。

# c# - 从 HTTPRuntime 缓存中检索图像

> ID：10926217
> 
> 赞同：3
> 
> 时间：2012-06-07T05:37:14.063
> 
> 标签：c#, asp.net, asp.net-cache

我正在尝试从 HTTPRuntime 缓存中保存和检索图像，但出现异常。我可以将流保存到缓存，但是当我尝试检索它时，我得到一个异常说：

> 请求被中止。连接意外关闭

这是我的代码：

```
public void ProcessRequest(HttpContext context)
{   
    string courseKey = context.Request.QueryString["ck"];
    string objKey = context.Request.QueryString["file"];

    if(HttpRuntime.Cache[objKey] !=null)
    {
        using (Stream stream = (Stream)HttpRuntime.Cache[objKey]) // here is where I get an exception
        {
            var buffer = new byte[8000];
            var bytesRead = -1;
            while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) > 0)
            {
                context.Response.OutputStream.Write(buffer, 0, bytesRead);
            }
        }
        return;
    }
    var response = Gets3Response(objKey, courseKey, context);           

    if (response != null)
    {
        using (response)
        {
            var MIMEtype = response.ContentType;
            context.Response.ContentType = MIMEtype;
            var cacheControl = context.Response.CacheControl;
            HttpRuntime.Cache.Insert(objKey, response.ResponseStream, null, DateTime.UtcNow.AddMinutes(20), Cache.NoSlidingExpiration);
            using (Stream responseStream = response.ResponseStream)
            {
                var buffer = new byte[8000];
                var bytesRead = -1;
                while ((bytesRead = responseStream.Read(buffer, 0, buffer.Length)) > 0)
                {
                   context.Response.OutputStream.Write(buffer, 0, bytesRead);
                }
            }
        }
    }
} 
```

这是我得到的例外

![例外](../Images/0d4c22876404b9fc0545f0312cfd8478.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:24:26.257

这段代码很混乱。首先，您正在缓存`response.ResponseStream`，但它已被包装在一个`using`块中。因此，当您到达 HttpRuntime.Cache.Insert 时，response.ResponseStream 已经被释放并关闭。因此错误。

您不应该缓存流。一方面，一旦您部署了分布式缓存服务，您的方法将是不可能的。你需要重构这个。考虑：

```
public class CacheAsset
{
   public string FileName { get; set; }
   public string ContentType { get; set; }
   public byte[] Content { get; set; }
}

CacheAsset GetAsset(HttpContext context)
{
   string courseKey = context.Request.QueryString["ck"];
   string objKey = context.Request.QueryString["file"];

   var asset = context.Cache[objKey] as CacheAsset;

   if (asset != null) return asset;

   using (var response = Gets3Response(objKey, courseKey, context))
   using (var stream = new MemoryStream())
   { 
      var buffer = new byte[8000];
      var read = 0;

      while ((read = response.ReponseStream.Read(buffer, 0, buffer.Length)) > 0)
      {
         stream.Write(buffer, 0, read);
      }

      asset = new CacheAsset
              {
                 FileName = objKey,
                 ContentType = reponse.ContentType,
                 Content = stream.ToArray()
              };
       context.Cache.Insert(objKey, asset, null, DateTime.UtcNow.AddMinutes(20), Cache.NoSlidingExpiration);
   }

   return asset;
}

public void ProcessRequest(HttpContext context)
{
   var asset = GetAsset(context);

   context.Response.ContentType = asset.ContentType;
   context.Response.BinaryWrite(asset.Content);
} 
```

# java - 如何在 Java 中访问 WADL 文件中的方法？

> ID：10926219
> 
> 赞同：2
> 
> 时间：2012-06-07T05:37:19.867
> 
> 标签：java, methods, wadl

我有一个 REST 服务，我有一个 WADL 文件。我想引用这个文件并从中访问方法。WADL 文件内容如下：

```
<resource path="/loadPerson">
    <method id="loadPerson" name="GET">
        <request>
            <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="personId" style="query" type="xs:int"/>
        </request>
        <response>
            <ns2:representation xmlns:ns2="http://wadl.dev.java.net/2009/02" xmlns="" element="person" mediaType="application/xml"/>
            <ns2:representation xmlns:ns2="http://wadl.dev.java.net/2009/02" xmlns="" element="person" mediaType="application/json"/>
        </response>
    </method>
</resource> 
```

实际上我不知道如何处理它，因为我以前从未玩过 WADL 文件。我应该做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:31:43.287

标识您将以 RESTful 方式与之交互的 URL（相对于指定为您未显示的外部元素上`<resource>`的`base`属性的基本 URL）。`<resources>`具有GET 属性，这意味着要使用该特定操作，您需要对资源 URL 执行 GET `<method>`。`name`内部`<request>`有一个`<param>`，所以我们知道要在 GET URL 中添加一个查询参数；在这种情况下，它将是`personId=123`（或其他整数）。`<response>`告诉我们，我们可以返回 XML 或 JSON 的答案；我们应该使用 HTTP 内容协商来说明哪个。

WADL 中有一个小错误，因为它指定了`<resource>`带有前导的 URL `/`；这很可能会导致工具出现问题，因为它试图组装正确的 URL，但我们仍然可以说出 URL 将是什么（通过了解 RESTful webapps 的实现方式）。

假设外部`<resources>`说基本 URL 是`http://example.org/foobar`（并且没有中间`<resource>`元素；WADL 允许这样做），那么 WADL 是说，如果您`http://example.org/foobar/loadPerson?personId=123`使用配置为首选 XML 的 HTTP 客户端执行 GET，您将得到一个`<person>`元素作为HTTP 响应的正文（或错误，例如，如果没有匹配的 a`personId`或您无权查找）。

# php - 为什么这个 MySQL UPDATE 命令不起作用？

> ID：10926226
> 
> 赞同：1
> 
> 时间：2012-06-07T05:38:24.623
> 
> 标签：php, mysql

我已经尝试了我所知道的一切。我知道这不是数据库连接的事情，因为我以与 INSERT 数据相同的方式运行它，并且它位于同一个函数文件中。

```
function update($name, email, $id) {
    $in = "UPDATE tablename 
           SET (name, email) VALUES('$name', '$email')  
           WHERE id = '$id'";

    mysql_query($in);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T05:39:43.340

你的 SQL 应该是这样的

```
$in = "UPDATE tablename
       SET name='$name', email='$email'
       WHERE id='$id'"; 
```

正如@Falcon 所指出的，您`$`在函数参数中遗漏了 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:54:18.023

你的功能

```
function update($name, email, $id) { 
```

说电子邮件，里面正在使用 $email。将其更改为

```
function update($name, $email, $id) { 
```

并检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T05:40:54.503

正确的语法是：

```
UPDATE tablename 
           SET name='$name',email='$email'
           WHERE id = '$id' 
```

注意：确保清理输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T05:40:30.213

尝试

```
update table_name
set
col1 = val1
col2 = val2
..........where id = $id; 
```

# c# - 我收到 System.BadImageFormatException ：运行单元测试时操作系统无法运行异常

> ID：10926227
> 
> 赞同：1
> 
> 时间：2012-06-07T05:38:28.467
> 
> 标签：c#, .net, nunit, badimageformatexception

我正在开发一个 Winforms 项目。目前我面临一个运行一些测试用例抛出的问题

```
 System.BadImageFormatException : The operating system cannot run . 
(Exception from HRESULT: 0x800700B6) 
```

例外。仅当我通过 NUnit 运行测试时才会发生这种情况。但是，如果我通过代码运行应用程序，它工作正常。

应用程序中正在使用远程处理。这会是个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:40:00.183

确保 NUNIT 和您的代码都编译到相同的平台 - x86 或 x64。在代码上将平台设置为“任何 CPU”的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:59:23.107

我有类似的问题，但在我的情况下，应用程序的配置文件有帮助。该文件包含以下条目：

```
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <requiredRuntime version="v4.0" />
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
    </startup>
</configuration> 
```

# maven - 每次我创建插件时，JIRA 都会下载大量文件

> ID：10926228
> 
> 赞同：0
> 
> 时间：2012-06-07T05:38:45.357
> 
> 标签：maven, jira, jira-plugin

我是 JIRA 和 Maven 的新手。

每次我使用 . 创建一个新插件`atlas-create-jira-plugin`时，它都会下载大量文件，我相信它曾经做过一次。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:05:22.707

实际上，我认为 Maven 不会，除非您定期删除 ~/.m2。这是工件的默认目录。

但是您能否提供有关下载的堆栈跟踪/日志？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T17:49:24.120

那是 maven 下载构建插件所需的文件。在你第一次这样做之后，你应该能够使用 -o 选项离线并且它不会再下载了。

# javascript - 使用jquery通过鼠标在图像上绘制线条和矩形

> ID：10926229
> 
> 赞同：0
> 
> 时间：2012-06-07T05:38:46.793
> 
> 标签：javascript, jquery, jquery-plugins

我在以下教程的帮助下实现了从剪贴板到网页的复制图像：

[http://joelb.me/blog/2011/code-snippet-accessing-clipboard-images-with-javascript/](http://joelb.me/blog/2011/code-snippet-accessing-clipboard-images-with-javascript/)

演示：www.pasteshack.net

它工作正常。

现在我想使用 jquery 在该图像上实现绘制形状，如线条、矩形和圆形。我想要它通过鼠标，以便我可以将它拖放到图像上的任何位置。矩形和圆形必须是透明的，以便我可以将其放在图像上以识别图像中的错误或故障。

可以使用jquery或javascript吗？有没有可用的插件或教程。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:47:50.937

检查以下教程：

[https://github.com/websanova/wPaint](https://github.com/websanova/wPaint)

它肯定会帮助你。

# powershell - PowerShell 中的 Add-PSSnapin 和 Import-Module 有什么区别？

> ID：10926246
> 
> 赞同：6
> 
> 时间：2012-06-07T05:40:10.507
> 
> 标签：powershell, pssnapin, import-module

> **可能重复：**
> [Add-PsSnapIn 和 Import-Module 有什么区别](https://stackoverflow.com/questions/5038887/whats-the-difference-between-add-pssnapin-and-import-module)

PowerShell`Add-PSSnapin`和in有什么区别？`Import-Module`

最后，两者似乎都提供了相同的结果。

推荐的方法是哪一种？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T05:46:45.220

**PsSnapins**是添加 CmdLet 或 Providers 的老式方式（存在于 PowerShell V1 中）（但仍在使用）

*   他们需要注册（使用 installutil.exe 工具）
*   它们是用一种 .NET 语言编写的程序集

**模块**是添加 CmdLet 或提供程序的新方法（在 PowerShell V2 中添加）

*   它们只需要在文件系统上是可连接的（参见 $env:psmodulepath）
*   它们可能是用 PowerShell 编写的脚本（仅用于 CmdLet）或用于 CmdLet 的程序集和使用 .NET 语言之一编写的提供程序
*   它存在一个清单形式，允许指定有关创建者的许多信息，以及对 PowerShell 版本、框架版本或其他模块或程序集版本的依赖关系。

    我认为您可以使用模块，除非您必须支持现有的 PowerShell V1 计算机。

# android - 在使用 pdf 阅读器时获取重置密码请求标记异常

> ID：10926249
> 
> 赞同：0
> 
> 时间：2012-06-07T05:40:41.050
> 
> 标签：android, pdf, unsatisfiedlinkerror

我正在开发应用程序，我在其中使用 pdf 阅读器应用程序以及读取存储在 sdcard 内存中的 pdf 文件。
但是当我点击一个按钮时，它给了我一个重置密码请求标志的例外。
但是，如果我使用 PDF Viewer 应用程序打开我的 pdf 文件，那么代码就可以完美运行。

**pdf文件的功能：**

```
public void ReadMeFAQ(){
try{
File file = new File("sdcard/VSKServices(Modified).pdf");
PackageManager packageManager = getPackageManager();

Intent testIntent = new Intent(Intent.ACTION_VIEW);
testIntent.setType("application/pdf");

List list = packageManager.queryIntentActivities(testIntent, PackageManager.
            MATCH_DEFAULT_ONLY);

if(list.size() > 0 && file.isFile()) {

Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
Uri uri = Uri.fromFile(file);
intent.setDataAndType(uri, "application/pdf");
startActivity(intent);
}
startActivity(testIntent);
}catch(Exception e){
Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
 }
} 
```

* * *

**原木猫：**

```
FATAL EXCEPTION: main
java.lang.UnsatisfiedLinkError: resetPasswordRequestedFlag     at
com.adobe.reader.PageView.resetPasswordRequestedFlag(Native Method)
com.adobe.reader.PageView.resetPasswordRequestedFlag(Unknown Source)
com.adobe.reader.AdobeReader.dismissPasswdDialogAndResetPasswdAvailable(Unknown Source)
com.adobe.reader.AdobeReader.onResume(Unknown Source)
android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
android.app.Activity.performResume(Activity.java:3832)
android.app.ActivityThread.performResumeActivity(ActivityThread.java:2110)
android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2135)
android.app.ActivityThread$H.handleMessage(ActivityThread.java:957)
android.os.Handler.dispatchMessage(Handler.java:99)
android.os.Looper.loop(Looper.java:123)
android.app.ActivityThread.main(ActivityThread.java:3683)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:507)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
dalvik.system.NativeStart.main(Native Method)
Force finishing activity com.adobe.reader/.AdobeReader 
```

提前感谢您的任何建议或帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:14:51.660

我的问题现在解决了，它是 Adob​​e 阅读器的版本。首先，我使用了 Adob​​e reader.apk 版本 10.0.0，它不适用于 2.2 或更高版本，但现在我使用的是 adobe.reader_60548.apk 版本 10.2.1，它工作正常。

# c - 线程开始时的 Winapi 错误 87

> ID：10926254
> 
> 赞同：1
> 
> 时间：2012-06-07T05:41:13.110
> 
> 标签：c, multithreading, winapi

我有一个问题困扰了我一段时间。我的项目中的每个子线程都在正确运行，并且除了以设置为 87 的 Last Error 开始线程之外，它应该做它应该做的事情。

根据 Win32 系统错误，87 表示无效参数。由于 LastError 是特定于线程的，并且从 ThreadProc 函数的第一行开始，它似乎已被设置，我唯一能推断的是 ThreadProc 函数本身在语法上是错误的（？）。

我的操作系统是 Windows 7 x64，编译器是 gcc 版本 4.6.2 我做了一个小示例程序，它在我的系统中启动子线程并设置错误 87。

```
#include <windows.h>

DWORD WINAPI THREAD_FUNCTION(LPVOID t)
{
    printf("In the child thread: Last Error is %lu\n",GetLastError());
    return 0;
}

typedef struct thread_data
{
    //just an id for example's sake
    uint32_t id;
}thread_data;

int main()
{
    HANDLE thread;
    thread_data d;
    d.id = 1;
    printf("Main thread start:Last error is %lu\n",GetLastError());
    //create the thread
    thread = CreateThread(NULL,0, (LPTHREAD_START_ROUTINE) THREAD_FUNCTION,(LPVOID)&d,0, NULL);
    //wait for it
    WaitForSingleObject(thread,INFINITE);
    CloseHandle(thread);
    printf("Main thread finish: Last error is %lu\n",GetLastError());
    return 0;
} 
```

这输出：

```
Main thread start:Last error is 0
In the thread: Last Error is 87
Main thread finish: Last error is 0 
```

我认为这是我调用线程并将数据传递给它的方式的错误，但我无法通过阅读文档来推断此错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T05:48:47.913

您的示例中的返回值`GetLastError()`是没有意义的。调用`GetLastError()`仅在调用设置最后一个错误值的 Windows API 函数后立即有效（MSDN 文档说明给定函数是否这样做）。

在您的线程例程中，您在调用`GetLastError()`时没有调用任何会设置它的 Windows API 函数，因此它的返回值不会反映您的代码导致的任何错误，因此它对您没有任何意义。

可能`GetLastError()`是一个新启动的线程的值完全没有意义——它被设置为 87 只是随机的。更有可能是在线程设置期间执行的某些代码会生成 87 错误。如果此代码是在 Visual Studio 中构建的或在不同版本的 Windows 上运行，您可能会得到不同的值。但不管怎样，这都不是你可以控制、依赖甚至需要关心的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T05:48:50.937

您必须记住，最后一个错误只有在最后一个调用的函数返回错误时才是可靠*的*。

# java - 映射到带有“孩子”下的孩子的 JSON：[ .. ] JAVA

> ID：10926262
> 
> 赞同：1
> 
> 时间：2012-06-07T05:41:45.197
> 
> 标签：java, json

我有一张这样的地图：

```
 { 
     facility-1={facility-kind1={param1=XPath-1, param2=XPath-2}, 
            facility-kind2={param1=XPath-1, param2=XPath-2}
           },
    facility-2={facility-kind1={param1=XPath-1, param2=XPath-2}, 
            facility-kind2={param1=XPath-1, param2=XPath-2}
         }
  } 
```

我想将其格式化为`JSON`“孩子”下的孩子：[ .. ] 标签：

```
[
{"title": "Item 1"},

{"title": "Folder 2",
    "children": [
        {"title": "Sub-item 2.1"},
    {"title": "Sub-item 2.2"}
        ]
    },

{"title": "Folder 3",
    "children": [

        {"title": "Sub-item 3.1"},

        {"title": "Sub-item 3.2"}

        ]

    }
] 
```

当我使用时，`JSON`我没有得到孩子标签：

```
{
    "facility-1": {
        "facility-kind1": {
            "param1": "XPath-1",
            "param2": "XPath-2"
        },
        "facility-kind2": {
            "param1": "XPath-1",
            "param2": "XPath-2"
        }
    },
    "facility-2": {
        "facility-kind1": {
            "param1": "XPath-1",
            "param2": "XPath-2"
        },
        "facility-kind2": {
            "param1": "XPath-1",
            "param2": "XPath-2"
        }
    }
} 
```

这不是我想要的。

我怎样才能得到`JSON`我想要的格式？

# php - 如何使用 php ssh 连接将上传的文件从从服务器移动到主服务器？

> ID：10926268
> 
> 赞同：0
> 
> 时间：2012-06-07T05:42:24.913
> 
> 标签：php, ssh

我的应用程序在主从服务器中运行。如果文件上传请求将发送到从服务器，我需要将该文件移动到主服务器。现在它只是上传到奴隶。它不会与主服务器同步。

如何在 php 中使用 ssh 在文件上传期间将上传的文件从从属移动到主控？

服务器平台是带有apache和mysql的ubuntu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:53:42.000

我建议您在 cron 运行的 ssh 上使用 rsync。首先执行：

```
$ crontab -e 
```

并添加如下内容：

```
*/5 * * * * rsync -e 'ssh -i [identity_file]' [src_dir] [user]@[host]:[trg_dir] 
```

此命令将每 5 分钟同步一次您的目录。随意调整 '*/5 * * * *' 模式以满足您的需要。

最后：

```
$ man crontab 
```

和：

```
$ man rsync 
```

# ios - ios会在特定时间后终止在后台运行的应用程序吗？

> ID：10926269
> 
> 赞同：8
> 
> 时间：2012-06-07T05:42:30.633
> 
> 标签：ios, ios5, core-location, uiapplicationdelegate, background-task

我在我的应用程序中使用核心位置框架，并在 UIBackgroundMode 或必需的背景模式（在 Xcode 4.2 中）中设置位置字符串，以便`didUpdateToLocation`在应用程序在后台运行时从方法获取更新的位置，并通过点击发送这个更新的位置到服务器`didUpdateToLocation`核心定位框架方法内部的具体链接。

我的问题是应用程序在后台运行一段时间后是否会终止？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T05:49:04.027

不，没有为此定义具体时间。但应用程序肯定会根据某些参数终止 - 电池消耗、内存占用问题等。

在开发人员文档中明确提到 - “系统尽可能长时间地将暂停的应用程序保留在内存中，仅当可用内存量变低时才将其删除。保留在内存中意味着您的应用程序的后续启动速度要快得多。”

通过此了解完整的详细信息 - [http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-06-04T07:15:43.393

我确信这对作者没有用，因为这个问题是在 2012 年 6 月提出的，我在 2019 年 6 月给出了答案。这个答案可能对其他用户有用。

**我发布此答案是因为每个人都说这是操作系统的默认行为，我们无法更改它....bla ....bla。**

> 最近，我正在处理相同的要求。经过2-3周的努力，我做到了。对于其他用户，我为它创建了一个帮助类。在启用位置跟踪之前，我的应用程序永远不会被操作系统杀死。
> 
> 您还可以验证操作系统永远不会杀死[这个应用程序跟踪应用程序](https://apps.apple.com/us/app/capchur-journal-diary/id1440569415)

使用[HSLocationManager](https://github.com/IMHitesh/HSLocationManager)在活动和非活动状态下进行无限位置跟踪。

请参考我在应用商店中可用的应用（如果启用了位置跟踪，应用将永远不会被操作系统杀死）

> 位置管理器，允许每隔 n 秒以所需的位置精度获取后台位置更新。
> 
> **优势：**
> 
> *   如果位置管理器当前正在运行，操作系统将永远不会杀死我们的应用程序。
>     
>     
> *   需要时定期进行位置更新（范围在 2 - 170 秒之间（受允许的最大后台任务时间限制））
>     
>     
> *   可定制的定位精度和时间段。
>     
>     
> *   低内存消耗（单例类）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-17T10:50:50.677

由于以下原因，iOS 应用程序可能会终止：

1.  **看门狗超时**

> 您可能知道，从 iOS 4.x 开始，大多数情况下，当您退出 iOS 应用程序时，该应用程序并没有终止，而是被发送到后台。
> 
> ```
> However, there are times when the OS will terminate your app and
> generate a crash log if the app didn’t respond fast enough. These
> events correspond with the implementation of the following
> UIApplicationDelegate methods:
> 
>    - application:didFinishLaunchingWithOptions:
>    - applicationWillResignActive:
>    - applicationDidEnterBackground:
>    - applicationWillEnterForeground:
>    - applicationDidBecomeActive:
>    - applicationWillTerminate: 
> ```
> 
> 在上述所有方法中，应用程序获得有限的时间来完成其处理。如果应用程序耗时过长，操作系统将终止应用程序。

2.  **用户强制退出**

> iOS 4.x 支持多任务处理。如果应用程序阻止 UI 并停止响应，用户可以从主屏幕双击主页按钮并终止应用程序。
> 
> 注意：您可能已经注意到，当您双击 Home 按钮时，您还会看到您过去运行的所有应用程序的列表。这些应用程序不一定在运行，也不一定会暂停。
> 
> 通常，一旦用户点击 Home 按钮，应用程序会在后台停留大约 10 分钟，然后它会被操作系统自动终止。因此，您通过双击主页按钮看到的应用程序列表只是过去应用程序运行的列表。

3.  **低内存终止**

> 在继承 UIViewController 时，您可能已经注意到 didReceiveMemoryWarning 方法。
> 
> 任何在前台运行的应用程序在访问和使用内存方面都具有最高优先级。但是，这并不意味着应用程序会获得设备上的所有可用内存——每个应用程序都会获得一部分可用内存。
> 
> 当总内存消耗达到一定水平时，操作系统会发出 UIApplicationDidReceiveMemoryWarningNotification 通知。同时，为应用程序调用了 didReceiveMemoryWarning。
> 
> 此时，为了让您的应用程序继续正常运行，操作系统开始在后台终止应用程序以释放一些内存。终止所有后台应用程序后，如果您的应用程序仍需要更多内存，则操作系统将终止您的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T19:29:57.640

我已经看到后台位置更新将工作几个小时。但是，如果我去一个没有接收的地方，设备将停止发送 GPS 更新，当我去一个有接收的地方时它不会启动。这发生在大约 30 分钟后。

但是如果我添加这个，在 iOS6 中，应用程序不会终止

```
[locationManager setPausesLocationUpdatesAutomatically:NO]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T05:53:16.693

快速回答几乎是不。请阅读以下内容以深入了解。

由于 iOS 设备上已启用多任务处理，因此 a) 您的应用程序获得了分配的内存量，并且 b) 设备限制了在任何给定时间发生的任务量，即使用内存的应用程序。如果您使用 iOS 设备并打开多个应用程序，您会开始注意到您首先打开的应用程序*可能*已被终止并从`viewDidLoad`.

一般来说，如果您的应用程序是最近打开的应用程序（或者甚至在有人经常清除多任务菜单的手机上），可以肯定地说设备**不会**在后台终止您的应用程序。

# android - 使 Google Api 10 级项目在 android 2.3.4/6 上运行

> ID：10926275
> 
> 赞同：2
> 
> 时间：2012-06-07T05:43:26.227
> 
> 标签：android, eclipse, google-api, android-sdk-2.3

如何在 android 2.3.4 或 2.3.6 上运行使用 Google Api level 10 的 android 项目？？？

我有安卓设备，但项目没有运行？

我必须做一些特别的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:32:43.107

所以您正在使用 sdk 3.1.x 进行项目开发，并且想要测试它具有 2.3.x 的 Android 设备

不，你不能那样做，因为

```
project min target SDK should be less or equal (<=) to the device os version 
```

在清单文件中看到这一行（**API 8 是 sdk 2.2***）

```
<uses-sdk android:minsdkversion="8"> 
```

并且为了在真实设备上启用调试项目，请确保您应该在项目文件中定义它

```
android:debuggable="true" 
```

在您的应用程序标签中。像这样

* * *

```
<application android:debuggable="true" android:icon="@drawable/icon" android:label="@string/app_name">  
        <activity android:label="@string/app_name" android:name=".MainActivity">  
            <intent-filter>  
                <action android:name="android.intent.action.MAIN">  
                <category android:name="android.intent.category.LAUNCHER">  
            </category></action></intent-filter>  
        </activity> 
    </application> 
```

* * *

如果对此仍有疑问，请让我清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:59:40.993

要在您的设备上运行应用程序，您将需要设备的 USB 驱动程序并将您的设备置于开发模式。

# asp.net - asp.net 批处理

> ID：10926282
> 
> 赞同：0
> 
> 时间：2012-06-07T05:44:20.423
> 
> 标签：asp.net

我已经调查了一段时间的问题 - 任何帮助都会很棒。

简单地说，我必须在后台运行一个 asp.net 进程。所以目前当我回发时，它会处理几分钟。我尝试了标准方法，即在批处理的回发中分叉另一个进程并返回。但是我的批处理使用 ASP.NET 控件（特别是 ReportViewer）进行处理。这意味着它不能在另一个线程中运行。我们如何解决这个问题。这是否意味着无法在批处理模式下生成报告？。

作为妥协，如果回发等待工作完成，我很高兴。但我想在客户端显示状态。为此，在回发进行时，我尝试对服务器进行 ajax 调用以获取状态。但问题在于一个会话，你只能使用一个线程（UI）。因此，当我进行 ajax 调用时，它会等待回发完成并释放线程。

我束手无策，因为这是一个简单而明显的要求

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:30:29.027

![在此处输入图像描述](../Images/f644b09f0365e017e3d4018325ff4ef6.png)我的第一个想法。

你能分离出一个后台线程并将 HTTPContext 传递给它吗？然后你可以在主线程忙的时候向客户端发送响应？

但是这篇文章[Asynchronous Pages in ASP.NET 2.0](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)可能对您有更好的模式。

# jquery - 嵌套 ul 元素上的 jquery 委托展开/折叠功能

> ID：10926286
> 
> 赞同：2
> 
> 时间：2012-06-07T05:44:55.680
> 
> 标签：jquery, slidetoggle, nested-lists, event-delegation

我有一个嵌套的 ul “树”，为了这个问题，它只有顶部的几个级别和几个孩子，但是如果你可以假设从顶部 ul（以`id="group"`此处为目标）可能有几个嵌套元素，但它们将始终遵循此结构。目前我只有顶部元素在折叠时折叠它们的子 ul 元素。我想在所有 ul 元素中实现这种性质。此外，我还想折叠另一个单击的“同一级别”的打开元素，以便只有一个 ul 与另一个打开。我希望我已经解释了我想要完成的功能。我觉得我应该使用`slideToggle()`但每次尝试都以失败告终......我还应该说这是我实际使用的第一手`delegate()` 但我了解传播（“事件冒泡”），这也是我觉得这是完成此类任务的方式的部分原因。另一个是我可能需要在 ul 中添加新元素。所以这就是我目前所拥有的：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript">
    $(function(){
        $('ul#group').delegate('a', 'click', function(event) {
            if($(event.target).next().is(':visible')) {
                if($(event.target).next()) {
                    $(event.target).next().find('ul').slideUp(250, function() {
                        $(event.target).next().slideUp(250);
                    });
                }
            } else {
                $(event.target).next().slideDown(250);
            }
        });
    });
</script>
<ul id="group">
    <li>
        <a href="#" onclick="return false;">Foo Bar 1</a>
        <ul>
            <li>
                <a href="#" onclick="return false;">Foo 1</a>
                <ul>
                    <li>
                        <a href="#" onclick="return false;">Bar 1</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#" onclick="return false;">Foo 2</a>
                <ul>
                    <li>
                        <a href="#" onclick="return false;">Bar 2</a>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <a href="#" onclick="return false;">Bar Foo 2</a>
        <ul>
            <li>
                <a href="#" onclick="return false;">Bar 1</a>
                <ul>
                    <li>
                        <a href="#" onclick="return false;">Foo 1</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#" onclick="return false;">Bar 2</a>
                <ul>
                    <li>
                        <a href="#" onclick="return false;">Foo 2</a>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

这是测试用例的[jsfiddle 链接](http://jsfiddle.net/GSEDy/)。欢迎所有输入以实现这一目标的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:57:08.573

是这样的你所追求的：http: [//jsfiddle.net/GSEDy/3/](http://jsfiddle.net/GSEDy/3/)

我做了一些编辑。

```
$('ul#group').delegate('a', 'click', function(event) {
    if ($(event.target).next().is(':visible')) {
        $(event.target).next().find('ul').slideUp(250, function() {
            $(event.target).next().slideUp(250);
        });
    } else {
        $(event.target).parent().siblings().find("ul").slideUp(250);
        $(event.target).next().slideDown(250);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:16:33.853

更简单的一个：

```
$('ul#group').delegate('a', 'click', function(event) {
  $(this).parent().children('ul').slideToggle(250);  
});
// At beginning hide elements preferably with css
$('ul#group').find('ul').hide();​​​​​​​ 
```

没有折叠同一级别的元素。

[在这里](http://jsfiddle.net/CLhR5/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:28:05.713

虽然我更喜欢其他解决方案，但为了举例，我将提供一条替代路线。我制作了一个 jQuery 插件，它创建了一个 clickOut 伪事件，我在其中使用了缩小版本。这样做的好处是用户可以在菜单之外单击，菜单会折叠。[http://jsfiddle.net/GSEDy/7/](http://jsfiddle.net/GSEDy/7/)

```
$('#group li').click(function (event) {
    'use strict';
    $(this).children('ul').slideToggle(250, function () {
        $(this).find('ul').hide();
    });
    $(this).siblings().children('ul').each(function () {
        $(this).slideUp(250, function () {
            $(this).find('ul').hide();
        });
    });
    event.stopPropagation();
}).clickOut(function () {
    'use strict';
    $(this).children('ul').slideUp(250, function () {
        $(this).find('ul').hide();
    });
});​ 
```

# entity-framework - 无法让实体框架处理 GUID 关系

> ID：10926288
> 
> 赞同：0
> 
> 时间：2012-06-07T05:45:08.380
> 
> 标签：entity-framework

我正在努力实现以下最终结果。我的 Person 实体需要一个额外值的集合，并且这个值集合会因 Person 实例而异。我还有另一个 Contact 实体，它同样可以从实例到实例具有额外的值。

因此，我需要三个表，一个 Person、Contact 和一个 Extra，其中 Extra 为每个需要额外值的 Person 和 Contact 实例提供一组额外的值。通过为 Person 和 Contact 提供 GUID 字段，这意味着 GUID 值在两个表中都是唯一的，因此我可以将其用作要加入的字段。所以我希望定义看起来像这样......

```
Person
  Id - int - Primary Key
  Instance - GUID - Unique Constraint

Contact
  Id - int - Primary Key
  Instance - GUID - Unique Constraint

Extra
  Id - int - Primary Key
  Instance - GUID
  Value - string 
```

但我无法将其建模到实体框架中。我希望我的 Person 和 Contact 实体有一个集合，每个集合都是与该实体相关的一组 Extra 值。我用上面指出的列集创建了三个表。

但是我无法让关联按预期工作，它总是希望根据 Person 和 Contact 实体的主键向数据库添加额外的列。任何想法如何真正让它发挥作用？或者这在 EF 中是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:45:57.103

这对于 EF 是不可能的，因为它不支持唯一键。只有主键可以用作关系的主体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:57:31.667

正如已经回答的那样，EF 不支持唯一键。但是，如果您实际上不需要对该`Id`属性执行任何操作，则告诉 EF 这`Instance`是主键就足够了。EF 并不真正关心它是否是数据库级别的主键，它只需要知道它是否可以将其用作键本身。

*编辑*：实际上，那仍然行不通。除了不支持唯一键之外，您`Extra.Instance`不对应任何固定实体。为了使其正常工作，您需要将`Extra`表拆分为`PersonExtra`和`ContactExtra`表。无论如何，这可能是一个好主意，因为它允许您在数据库级别添加外键约束，这些约束与您希望在 EF 中看到的约束相对应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:06:12.763

执行此操作的 EF 方法是使用链接表 - 一个具有两列的简单表，在您的模型中直接不可见，但集合将可见。

例如

```
Person
  Id - int - Primary Key
  Instance - GUID - Unique Constraint

Contact
  Id - int - Primary Key
  Instance - GUID - Unique Constraint

Extra
  Id - int - Primary Key
  Instance - GUID
  Value - string

PersonExtra
  PersonId  - int
  ExtraId  - int

ContactExtra
  ContactId  - int
  ExtraId  - int 
```

或者如果您的模型允许，将您的主键更改为 GUID。

# android - Android 如何在 0 处添加 TableRows 而无需向上滚动 ScrollLayout

> ID：10926289
> 
> 赞同：0
> 
> 时间：2012-06-07T05:45:14.433
> 
> 标签：android, scroll

我的 UI 中有以下结构

```
 <ScrollView
        android:id="@+id/vscroll"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TableLayout
            android:id="@+id/table"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TableLayout>

    </ScrollView> 
```

我以编程方式用 TableRows 填充 TableLayout。

有时我需要在表格顶部添加行（在 child(0) 之前插入）。
问题是 ScrollView 跳起来了。
我可以告诉你，我在插入行之前和之后记录了 ScrollView 的**ScrollY()**位置。它保持**不变**（！！）

这就是导致跳转的原因，因为现在我有更多行并且滚动位置 Y= 234（例如）之前在 A 行上，现在相同的位置 Y 表示 Q 行。

行 A 是（比如说）第五行，现在插入行 Q 之后是第五行
所以你看，从 ScrollView 的角度来看，没有任何变化，但视图现在显示了不同的行。

如果此时您对我的解释并不完全感到困惑，那么也许您可以建议我如何在顶部插入行而不改变我在屏幕上看到的内容。
换句话说，我希望插入隐身而不影响用户看到的内容。

如果某些代码有助于清除图片，这是我在顶部插入 5 行的方法

```
table = (TableLayout) findViewById(R.id.table);
TableRow.LayoutParams params = new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.WRAP_CONTENT);
for(int i=0; i<5 ; i++) {   
    TableRow mr = new TableRow(getContext());
    // some stuff to set the row texts
    table.addView(mr, 0, params);
}

Before Insertion    After Insertion
Row 0               New Row 0
Row 1               New Row 1
Row 2               New Row 2
Row 3               New Row 3        <--- vscroll Y position stays the same
Row 4               New Row 4
Row 5               Old Row 0
Row 6               Old Row 1
Row 7               Old Row 2
Row 8               Old Row 3        (vscroll jumps up from here to new Row 3)
Row 9               Old Row 4
Row 10              Old Row 5
Row 11              Old Row 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:21:17.223

我还没有测试它，但你可以尝试`post()`一个`Runnable`你会得到新插入的行的高度的地方，然后滚动`ScrollView`那个量，使它保持在相同的位置：

```
final TableRow newRow = new TableRow(this);
        // add stuff to the row     
        tl.addView(newRow, 0, params);
        // sv is your ScrollView vscroll
        sv.post(new Runnable() {

            @Override
            public void run() {             
                int size = newRow.getHeight();              
                sv.scrollBy(0, size);
            }

        }); 
```

# sql-server-2008 - 得到减去工作日

> ID：10926292
> 
> 赞同：1
> 
> 时间：2012-06-07T05:45:43.127
> 
> 标签：sql-server-2008

我正在使用 SQL Server 2008，在这里我可以得到今天的工作日

```
select datepart(weekday, GETDATE()) WeekDay 
```

它将在`5`工作日返回。我需要从中减去`1`，即 5-1 = 4。

这是我尝试过的：

```
select dateadd(weekday, -1, datepart(weekday, GETDATE())) WeekDay 
```

但它正在回归`1900-01-05 00:00:00.000`

为什么我没有得到 4，为什么显示这个日期？谁能解释一下？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:47:03.597

这肯定会返回 4。

```
select  datepart(weekday,GETDATE())-1 WeekDay 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T06:04:14.423

这是你要找的吗

```
SELECT DATEPART(weekday, DATEADD(day, -1, GETDATE())) AS WeekDay; 
```

# struts2 - 使用 struts.xml 文件时收到警告。

> ID：10926293
> 
> 赞同：0
> 
> 时间：2012-06-07T05:45:44.833
> 
> 标签：struts2

我正在使用Struts2.0。当我编写程序时，在 struts.xml 文件中收到警告“**文件无法验证，因为存在连接问题**”在以下行：-“！DOCTYPE struts PUBLIC”-//Apache Software Foundation//DTD Struts Configuration 2.0 //EN" "http://struts.apache.org/dtds/struts-2.0.dtd" "

当我执行应用程序时，第一页已加载但提交后，下一页未加载并显示错误，例如：“**请求的资源（/TestProject/login）不可用**。”

我使用的是struts2.0，Tomcat6.0，包含的jar文件有：

1.  公共日志记录-1.1
2.  freemarker-2.3.8
3.  ognl-2.6.11
4.  struts2-core-2.0.6
5.  xwork-2.0.1

请帮助我为什么由于警告或其他原因而出现此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:37:32.727

第一个错误可能是因为您的项目无法找到 tld。

-检查你的 sturts-core.jar 包含 struts-2.0.dtd -你的 struts.xml 像这样开始

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd"> 
```

第二个错误是因为当您部署应用程序并且未部署 struts.xml 时，似乎您正在使用 eclipse 并且您的 struts.xml 位于资源文件夹中。

确保将资源文件夹添加到 src 目录中，

```
Project - > Build Path - > Configure Build Path - > Source (If resources is not present here click on Add Folder and select Resources. 
```

如果您刚开始使用 Struts，请升级到最新版本[Struts2.3](http://struts.apache.org/2.3.4/)

# c# - 将 OnClientClick 映射到 onClick - Ajax 服务器控件

> ID：10926294
> 
> 赞同：0
> 
> 时间：2012-06-07T05:45:47.580
> 
> 标签：c#, asp.net, asp.net-ajax, custom-server-controls

我有一个属性字符串 OnClientClick，它包含一个由我的 Ajax 服务器控件的用户提供的 javascript 字符串（这类似于将 OnClientClick 映射到实际 html 标记的 onClick 的 ImageButton）。

我的问题是：

1.  如何实现此映射并根据为 OnClientClick 提供的内容使我的标签输出 onClick？
2.  如果我的标签是一个 span 元素，当点击子元素时会触发 onClick（例如 input type="image" 标签）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:50:17.137

1.  尝试将属性添加`onclick`到您的服务器用户控件。

    Control.Attributes.Add("onclick","NameOfYourJSfunction or Javascript code here.")

2.  除非您在单击的元素和抑制传播的 span 元素之间有事件处理程序，否则单击事件将冒泡 dom

# php - json_encode，json_decode，数组？

> ID：10926297
> 
> 赞同：2
> 
> 时间：2012-06-07T05:46:19.853
> 
> 标签：php, json

我正试图`data`从

```
{
    "data": [{
        "media_count": 3045,
        "name": "snow",
    },
    {
        "media_count": 79,
        "name": "snowman",
    },
    {
        "media_count": 40,
        "name": "snowday",
    },
    {
        "media_count": 29,
        "name": "snowy",
    }]
} 
```

我一直在尝试，使用：

```
$obj = json_decode($res[0], true);
echo $obj['data']; //this returns an array 
```

我也试过这个：

```
$obj = json_encode($res[0], true);
echo $obj; // this returns json, but not inside `data`

"data": [{
"media_count":54373,
"name":"test"
}] 
```

我只想进去`data`。我该怎么做？

提前致谢！

更新：对不起，我想要这个 json 格式的

最终，我只想看到

```
{
    "media_count":54373,
    "name":"test"
} 
```

类似的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:55:41.847

用来`json_encode()`得到你想要的：

```
$obj = json_decode($res[0], true);
echo json_encode($obj['data']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:50:22.690

在您的第一个示例中，`$obj['data']`返回一个数组，因为这就是 JSON 的设置方式。根据 JSON，数据是元素的集合。

要在数组中访问，您可以这样做：

```
foreach($obj['data'] as $object) {
    print_r($object);
} 
```

您还可以根据需要对其进行索引：

`print_r($obj['data'][0]);`

**编辑**

如果我让您正确，您希望将第一个 JSON 转换为：

```
"data": [{
"media_count":54373,
"name":"test"
}] 
```

如果是这样，这是不可能的，因为第二个片段不是有效的 JSON。（使用[http://jsonlint.com](http://jsonlint.com)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T05:51:43.800

首先访问json数组的数据项；

```
 $obj1=$obj[item];
    $sizeobj=sizeof($obj1);

    for($i=0;$i<$sizeobj;$i++)
{
// your code to access the data items
// for eg $obj[item][$i][media_count}
} 
```

# azure - 调试 Azure：窗口弹出说 Web 浏览器无法启动

> ID：10926302
> 
> 赞同：1
> 
> 时间：2012-06-07T05:46:35.150
> 
> 标签：azure, azure-debugger

我有一个要部署到 Windows Azure 的 Web 应用程序 asp.net。此应用程序包含一个 Web 角色。我尝试先在本地运行它。但是在调试时，我从 VS2010 中捕获了这个错误：“Windows Azure Tools for Microsoft Visual Studio Web 浏览器无法启动。要解决此问题，您必须重新启动 Windows。”

我已经多次重新启动 Windows，但没有运气。！[在此处输入图像描述][1] 我已经很难找到解决此问题的方法，但似乎没有什么对我有用。我是 Windows Azure 的新手，这对我来说真的是个大麻烦。请帮我！非常感谢。此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:07:48.787

可能有两个问题：

1.  您的 IIS 设置问题：您的机器中的 IIS 可能存在问题，当 VS2010 想要运行它时无法重新启动。

    *   要验证您可以执行的操作，请使用“在浏览器中查看”设置启动您的 Web 角色并查看您的 Web 角色是否可以在 IIS 中运行，您将看到 Web 角色在 URL 中以 http:\localhost:XXXXX 开头，这将成为解决的第一步。
2.  问题将是您的 Windows Azure SDK 无法启动 WebBrowser 以在 IIS 中运行

    *   如果您在第 1 步中没有问题，那么 Windows Azure SDK 可能在尝试从外部进程启动 IIS 时遇到问题，这可能是由于 SDK 安装损坏或任何其他原因造成的。

如果是这种情况，请尝试：

1.  从您的计算机中删除所有 Windows Azure SDK 组件。
2.  重启机器，[从这里安装 Azure SDK for VS2010](https://www.windowsazure.com/en-us/develop/downloads/)
3.  SDK安装后，以管理员模式重新启动VS2010并尝试创建一个hello world webrole，看看会发生什么。

# iphone - 在 NSMutableArray 中添加 c++ 对象

> ID：10926310
> 
> 赞同：5
> 
> 时间：2012-06-07T05:47:12.047
> 
> 标签：iphone, objective-c, ios

我有 MeetingUser C++ 类；new_meetingUser 是它的对象。

我想将它添加到我使用 NSValue 所做的 NSMutableArray meetingUsersList。但是，我无法弄清楚如何处理对象的内存和 NSMutableArray 的所有权。

```
MeetingUser *new_meetingUser = new MeetingUser(userName, dispName );
[meetingUsersList addObject:[NSValue valueWithPointer:new_meetingUser]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:57:32.750

您可以像这样将 C++ 对象添加到数组中，但数组不会获得该对象的所有权。您必须确保对象在数组中时不会被删除，否则它将成为一个悬空指针。然后，当您知道这样做是安全的时，您必须稍后手动删除该对象。

如果您希望数组拥有该对象的所有权，那么您将不得不使用`CFMutableArray`. `CFMutableArray`允许您指定在从数组中删除对象或释放数组时调用的函数。在您的情况下，您希望设置`CFMutableArray`调用 `delete`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:58:04.710

本质上，你不能。C++ 对象和 Objective-C 对象是完全不同的东西，尽管它们都被称为“对象”。NSArray 只能保存 Objective-C 对象。它不能保存原语、结构、C++ 对象或任何不是 Objective-C 对象的东西。最好的解决方法是创建一个包含 C++ 类的 Objective-C 类并将其存储*在*数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T05:58:49.747

一种方法是编写一个小的 ObjC 类来包装您的 C++ 对象。这可以像您想要的一样简单或复杂 - 它需要做的唯一主要事情是将 C++ 对象存储在一个字段中，并将`delete`其存储在`dealloc`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-03T13:03:55.753

我有类似的问题

创建Objective C Wrapper类`MeshHolder.hh`

```
#import <Foundation/Foundation.h>

#include "Sculpt.h"

NS_ASSUME_NONNULL_BEGIN

@interface MeshHolder : NSObject

-(void) setupMesh:(Mesh_CPP *)mesh;
-(Mesh_CPP *)getMesh;

@end

NS_ASSUME_NONNULL_END 
```

和 .MM 文件

```
#import "MeshHolder.hh"

@implementation MeshHolder

Mesh_CPP * meshTEMP_;

-(void) setupMesh:(Mesh_CPP *)mesh {
    meshTEMP_ = mesh;
}

-(Mesh_CPP *)getMesh {
    return meshTEMP_;
}

@end 
```

如何使用它

```
@property(strong,nonatomic) NSMutableArray<MeshHolder*>  *arrMeshes;

 MeshHolder *meshH = [MeshHolder new];
 [meshH setupMesh:meshTemp];
 [_arrMeshes addObject:meshH]; 
```

希望它作为一个快速示例有所帮助

# entity-framework - 在 vs11 中修改数据库表结构后如何更新 ADO.NET 实体数据模型

> ID：10926313
> 
> 赞同：1
> 
> 时间：2012-06-07T05:47:59.993
> 
> 标签：entity-framework, visual-studio-2012

我正在从数据库的表中创建 ado.net 实体框架。因为我处于早期阶段，所以我需要经常更改表结构以添加或删除字段。

在 vs11 中修改数据库表结构后如何更新 ADO.NET 实体数据模型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:44:16.747

您将右键单击设计器窗格（不在实体上）并从上下文菜单中选择*从数据库中更新模型。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:13:26.290

打开你的项目...

转到工具菜单 > 库包管理器 > 包管理器控制台

要安装 EntityFramework，请运行以下命令

PM> Install-Package EntityFramework

希望这可以帮助你...

# javascript - 如何动态发布和订阅频道？

> ID：10926315
> 
> 赞同：1
> 
> 时间：2012-06-07T05:48:04.640
> 
> 标签：javascript, node.js, redis, socket.io

//服务器设置...

```
//Store using Redis ..

 this is the part of the code, now i have to send the stored data to other clients connected,the case is 'n' no.of application with 'n' no.of clients, so i have to create channels here dynamically. am asking u to help me by giving ideas for creating dynamic channel name for pub/sub. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:56:38.380

这不是 Redis 处理的事情。您需要通过应用层保护对 Redis 发布/订阅的访问。如果你想让人们*直接*连接到 Redis 并且仍然保护每个用户的频道，我相信你不走运。

# c# - C#从for循环打印数字

> ID：10926323
> 
> 赞同：0
> 
> 时间：2012-06-07T05:48:51.240
> 
> 标签：c#

我想通过在下拉列表中选择一个项目来显示数字 1 到 100。我的意思是，如果我选择 4 次，它应该算作 4 并显示。我已经尝试了下面的代码，但它不起作用。

```
//Method
public void cl()
{
    if (Catddl.SelectedIndex != 0)
    {
        for (int i = 1; i <= 100; i++)
        {
            Label12.Text = Convert.ToString(i);
        }
    }
}

//called the method
protected void Catddl_SelectedIndexChanged(object sender, EventArgs e)
{
    cl();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:55:39.910

如果您尝试计算用户从下拉列表中选择某项的次数，您可以执行以下操作：

```
int counter = 0;
private void Catddl_SelectedIndexChanged(object sender, EventArgs e)
{
    counter++;
    Label12.Text = counter.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:57:50.713

我解决了你的问题，这就是结果。它对我来说很好。希望它也对你有用。

```
 static int count = 0;
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        bind();
    }
}

private void bind()
{
    ArrayList ar = new ArrayList();
    ar.Add("first");
    ar.Add("Second");
    ar.Add("Third");
    ar.Add("Four");
    ar.Add("Five");
    ar.Add("Six");
    ar.Add("Seven");
    DropDownList1.DataSource = ar;
    DropDownList1.DataBind();
}
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    //string str = DropDownList1.SelectedValue;
    if (count == 0)
        count = 1;
    Label1.Text = count++.ToString();
} 
```

不过，如果您有任何疑问，请询问。

# python - 为什么我不能更新 wxPython 的 StaticText？

> ID：10926326
> 
> 赞同：0
> 
> 时间：2012-06-07T05:49:04.483
> 
> 标签：python, function, text, attributes, wxpython

我正在为 GUI 编写一个使用 wxPython 的计算器。我创建了一个名为 display 的类来使用 StaticText 来显示文本。无论如何，当我尝试更新屏幕时，它会引发异常。这是代码：

```
class display:
    def __init__(self,parent, id):
        print "display class is working"
        global string1
        self.view = wx.StaticText(frame, -1, "Waiting", (30,7), style = wx.ALIGN_CENTRE)

    @staticmethod
    def update(self):
        global string1
        self.view.SetLabel(string1) 
```

每当我尝试运行 Update() 函数时，它都会引发此异常：

```
AttributeError: 'function' object has no attribute 'view' 
```

当我写“self.view = wx.etc etc”时，我试图将 StaticText 设置为一个变量名，这样我就可以使用 SetLabel 函数。在我尝试更新之前，该文本似乎有效。为什么我不能更新它？我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:53:58.647

@staticmethods 不带任何参数......所以它实际上并没有得到自我......你需要让它成为一个获得 cls 的 @classmethod 或者你只需​​要让它成为一个普通的方法

```
class display:
    view = None
    def __init__(self,parent, id):
        print "display class is working"
        global string1
        display.view = wx.StaticText(frame, -1, "Waiting", (30,7), style = wx.ALIGN_CENTRE)

    @classmethod
    def update(cls):
        global string1
        cls.view.SetLabel(string1) 
```

# python - 使用 sleep() 时高效快速的 Python While 循环

> ID：10926328
> 
> 赞同：31
> 
> 时间：2012-06-07T05:49:15.190
> 
> 标签：python, while-loop, pyserial

我正在尝试使用 Pyserial 通过串行设备与设备通信。由于需要不断发送命令，因此必须将它们放在 Python 中的 while 循环中。

我目前正在使用此代码，并查看了[python 进程占用 100% CPU](https://stackoverflow.com/questions/9349588/python-process-takes-100-cpu)：

```
while True:
    #do some serial sending here
    time.sleep(0.2) 
```

此代码有效。但是，发送速度很慢。我试图通过减少间隔来使其更快`sleep`，但它似乎有点过多地加载 CPU。

简而言之，有没有什么方法可以有效地永远迭代 while 循环，同时仍然保持 CPU 资源的低消耗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-07T06:33:30.363

缓慢的 CPU 浪费部分是“做串行发送”。仅短暂睡眠的 while 循环将使用可忽略不计的 CPU。

你能显示串行发送代码吗？可能有一种方法可以加快速度。

在这个相当慢的 CPU 上，我看到了这个：

```
import time
while True: time.sleep(0.2)      # 0% CPU
while True: time.sleep(0.02)     # 0% CPU
while True: time.sleep(0.002)    # 0.5% CPU
while True: time.sleep(0.0002)   # 6% CPU
while True: time.sleep(0.00002)  # 18% CPU 
```

现在在循环中做一些额外的工作：

```
import time
while True: range(10000) and None; time.sleep(0.2)      # 1% CPU
while True: range(10000) and None; time.sleep(0.02)     # 15% CPU
while True: range(10000) and None; time.sleep(0.002)    # 60% CPU
while True: range(10000) and None; time.sleep(0.0002)   # 86% CPU 
```

我在解释器中运行了这些，并用 ctrl-C 停止了每个 while 循环。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T18:48:55.930

关于您对 Joachim 回答的评论：

然后您的微控制器代码需要重新设计。否则你只是把你的通用计算机变成了一个愚蠢的“微控制器”，它反复迭代不需要的代码，因此是 100% cpu。错误使用计算机的另一个症状是硬件电机的速度取决于您通过串行接口向其发送命令的速度。您需要使用将托管您的高级逻辑的计算机“命令”它。您的微控制器需要处理电机的低级重复控制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T05:59:36.253

您必须弄清楚您愿意在速度和 CPU 负载之间进行权衡。

如果您必须发送短时间的数据，而在消息之间没有做太多的事情，那么也许您可以在短时间内忍受高 CPU 负载，因为平均值可能仍然很低。

# python - 如何在python中左对齐UTF-8编码的字符串？

> ID：10926333
> 
> 赞同：1
> 
> 时间：2012-06-07T05:49:45.840
> 
> 标签：python, encoding, utf-8, format

我正在尝试将 UTF-8 编码的字符串与`string.ljust`. 引发此异常：`UnicodeDecodeError: 'ascii' codec can't decode byte 0xe5 in position 0: ordinal not in range(128)`. 例如，

```
s = u"你好"    // a Chinese string
stdout.write(s.encode("UTF-8").ljust(20)) 
```

我在正确的轨道上吗？或者我应该使用其他方法来格式化？

谢谢和最好的问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T06:08:14.610

您是否发布了确切的代码和收到的确切错误？`cp437`因为您的代码可以正常工作而不会在 a和`utf-8`终端上引发错误。在任何情况下，您都应该在将 Unicode 字符串发送到终端之前证明其合理性。请注意区别，因为 UTF-8 编码的中文在编码时的长度为 6 而不是长度为 2：

```
>>> sys.stdout.write(s.encode('utf-8').ljust(20) + "hello")
你好              hello
>>> sys.stdout.write(s.ljust(20).encode('utf-8') + "hello")
你好                  hello 
```

另请注意，中文字符比典型的固定宽度字体中的其他字符更宽，因此如果混合语言，事情可能仍然无法按照您的意愿排列（请参阅[此答案](https://stackoverflow.com/a/4632373/235698)以获得解决方案）：

```
>>> sys.stdout.write("12".ljust(20) + "hello")
12                  hello 
```

通常你可以跳过显式编码到`stdout`. Python 以终端的编码方式将 Unicode 字符串隐式编码到终端（请参阅 参考资料`sys.stdout.encoding`）：

```
sys.stdout.write(s.ljust(20)) 
```

另一种选择是使用`print`：

```
print "%20s" % s   # old-style 
```

或者：

```
print '{:20}'.format(s)  # new-style 
```

# android - Android 上所有控件的默认样式

> ID：10926334
> 
> 赞同：0
> 
> 时间：2012-06-07T05:49:53.020
> 
> 标签：android, styles, android-styles

是否有任何方法可以为**android****的控制组设置默认样式，例如如果我为****复选框**和**edittext**设置颜色，那么它就像在 css 中一样适用

 ******在我的应用程序中，我有条件`enabling`地`disabling`控制了一些控件，因此我想更改它们的颜色，我可以创建一种样式来更改所有控件的颜色，而无需应用于每个控件和特定控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:58:30.463

我不知道 Android 中有这样的事情，但你可以创建一个这样的自定义背景：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<gradient android:angle="1dp"
    android:centerColor="@color/sky_blue" 
    android:endColor="@color/white"
    android:startColor="@color/white" /> 
```

`backgrnd.xml`在文件夹中声明此文件`drawable`，当您想为任何视图提供背景时，只需使用：`android:background="@drawable/backgrnd"`

然后每个视图将具有相同的背景，就像这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:07:06.250

看看班级[**`ColorStateList`**](http://developer.android.com/reference/android/content/res/ColorStateList.html)******

# css - 有没有办法在块中的多行堆栈的当前行中选择最后一个元素？

> ID：10926342
> 
> 赞同：0
> 
> 时间：2012-06-07T05:50:25.163
> 
> 标签：css, css-selectors

例如，我有一些`<ul>`元素`<li>`向左浮动。如果我以这种方式调整大小，则`<li>`元素将连续放置 3 个。接下来，我调整窗口大小（例如通过鼠标），我`<ul>`得到了新的宽度，`<li>`元素现在连续放置 4 个。那么，如何`<li>`在元素堆栈的每一行中选择最后一个，为它们设置一些 CSS 规则（例如，margin-right）。

所以我需要知道，是否有任何 CSS 选择器或方法来选择此处解释的行为：http: [//jsfiddle.net/w7PDM/12/](http://jsfiddle.net/w7PDM/12/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:21:00.190

你必须计算最后一个，这很简单。

```
$('button').click(function(){
    $('ul').css('width','200px');
    $('.current-last-of-row').removeClass('current-last-of-row');
    var itemsPerRow = Math.floor(parseInt($('ul').css('width')) / 40);
    //$('li:nth-child(4n+4)').addClass('current-last-of-row');
    for(var i=1; i < $('ul li').length; i++)
    {
        if( i % itemsPerRow == 0 )
        {
            $('li').eq(i-1).addClass('current-last-of-row');
        }
    }
    $('h1').text('Now, every 4 element is a "last-of-a-row"');
});​ 
```

查看演示：http: [//jsfiddle.net/jun1st/hK9aZ/1/](http://jsfiddle.net/jun1st/hK9aZ/1/)

# mysql - Visual Web Developer 2010 - SQLDataSource - 无 MySQL 选项

> ID：10926344
> 
> 赞同：0
> 
> 时间：2012-06-07T05:50:33.683
> 
> 标签：mysql, odbc, visual-web-developer

使用 SQLdataSource 时是否无法在 Visual Web Developer 中选择使用 MySQl 数据库？

我正在使用 MySQL 5.5 和 Visual Web Developer express 2010 sp1。

从我正在阅读的书中看来，这在 2005 年可用，但在 2010 年被删除，我看不到连接选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T12:44:32.147

在SelectCommand 中必须去掉[ ]，不使用MySQL，但是Insert、Update、Delete Automatic 无法工作，同样是Select。如果有人知道使用插入、更新、删除自动放在这里给我们。

# android - 无法访问 jarfile lib\archquery.jar

> ID：10926345
> 
> 赞同：14
> 
> 时间：2012-06-07T05:50:46.723
> 
> 标签：android, sdk, installation

*问题：*

*   无法打开 SDK 管理器（仅闪烁一秒钟）
*   Eclipse 中没有构建路径目标

* * *

*路径：*

```
Android SDK: C:\Program Files\Android\android-sdk
JDK used for android: C:\Program Files\Java\jdk1.7.0_04 (There are other JDKs also in dir Java) 
```

* * *

*环境变量：*

```
ANDROID_SDK_HOME: C:\Program Files\Android\android-sdk
JAVA_HOME: C:\Program Files\Java\jdk1.7.0_04;C:\Program Files (x86)\Java\jre1.6.0;C:\Program Files\Java\jre7;
System Path: C:\Program Files\Java\jdk1.7.0_04\bin;C:\Program Files\Java\jdk1.7.0_01\bin;C:\Program Files (x86)\Java\jdk1.5.0\bin;C:\Program Files\Android\android-sdk\tools\ 
```

* * *

*错误：*

```
SDK Manager on cmd
Failed to execute tools\android.bat. 
The system cannot find the file specified

Android.bat on cmd
Unable to access jar file lib\archquery.jar
Invalid path

find_java on cmd
nothing returned 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-12T15:53:44.420

我有一个类似的问题 - 我必须编辑 android.bat （和 traceview.bat 当我需要它时）

在 android.bat 中寻找

```
for /f %%a in ('%java_exe% -jar %frameworkdir%archquery.jar') do set swt_path=%frameworkdir%%%a 
```

用。。。来代替

```
set swt_path=lib\x86 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-13T11:58:22.147

YMMV，但**除了**编辑 android.bat，如上一个答案中所述，我仍然无法让 SDK 管理器在 Windows 8 64 位上运行，直到我首先：

*   卸载所有版本的 Java
*   **重新启动***
*   仅安装了 X86 JDK（包括安装程序中的 Public JRE 选项）

我已经尝试了所有这些事情，而且之前还尝试过更多 *没有重新启动，这是我让 SDK 管理器运行的唯一方法。希望这些信息可以使您免于经历我所经历的一些彻底的挫败感和浪费的时间。只是让工具开箱即用是多么痛苦。糟糕的经历。

我会作为对上一个答案的评论进行回复，但显然我没有足够的代表来做到这一点： [https ://meta.stackexchange.com/questions/25725/how-do-you-comment-on-a -具体答案](https://meta.stackexchange.com/questions/25725/how-do-you-comment-on-a-specific-answer)

**编辑：下面更完整的答案。（我不认为重新启动与它有任何关系。）**

似乎有几种方法可以启动 SDK 管理器：

1.  `SDK Manager.exe`在 Android SDK 的根目录中。
2.  `SDK Manager.exe`在`sdk\tools\lib`Android SDK 中。
3.  `Window -> Android SDK Manager`Eclipse 中的菜单
4.  `android.bat`在`sdk\tools`Android SDK 中。

就我而言，它看起来像是`android.bat`失败了：

```
for /f %%a in ('%java_exe% -jar lib\archquery.jar') do set swt_path=lib\%%a 
```

至于那条线在做什么......如果我手动运行：`"[path_to_java]java" -jar lib\archquery.jar`

它成功返回：`x86_64`

但是当批处理文件运行相同的命令时，我不知道为什么但它失败并显示错误消息：

```
Unable to access jarfile lib\archquery.jar 
```

所以变量`swt_path`被设置为一个空字符串。一切都从那里崩溃。

批处理文件为变量设置正确的值`java_exe`。其他人通常将此报告为一个问题，但这些解决方法与我的情况无关。

人们建议通过将 REM 添加到问题行的开头来注释掉问题行，并添加一行来手动设置`swt_path`变量，这是一种有效的解决方法：

```
REM for /f %%a in ('%java_exe% -jar lib\archquery.jar') do set swt_path=lib\%%a
set swt_path=lib\x86 
```

**但是**，就我而言，关键问题是它选择从此处`lib\x86`的文件夹或`lib\x86_64`文件夹加载 jar 文件。在某些时候，BAT 文件错误、32 位 JDK 和 64 位 Android SDK 之间的关系变得混乱。

**所以**，在我的情况下，解决方法是：

1.  卸载所有版本的 Java
2.  安装 JDK
    *   您可以使用 32 位 Android SDK 并安装 32 位 JDK
    *   或者使用 64 位 Android SDK 并安装 64 位 JDK
    *   但是JDK的“位数”应该与Android SDK相匹配。看起来 32 位或 64 位都可以在 64 位计算机上运行，​​只要 JDK 位数与 Android SDK 位数匹配。
3.  编辑“android.bat”

    *   如果使用 32 位 Android SDK/JDK，请使用`lib\x86`：

        ```
        REM for /f %%a in ('%java_exe% -jar lib\archquery.jar') do set swt_path=lib\%%a
        set swt_path=lib\x86 
        ```

    *   如果使用 64 位 Android SDK/JDK，请使用`lib\x86_64`：

        ```
        REM for /f %%a in ('%java_exe% -jar lib\archquery.jar') do set swt_path=lib\%%a
        set swt_path=lib\x86_64 
        ```

完成此操作后，我可以通过运行`android.bat`或从 Eclipse 菜单成功运行 SDK 管理器（但仍不能通过`SDK Manager.exe`直接运行任何一个文件）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T16:22:18.363

至少在 Windows 7 上，批处理“FOR”循环在执行列表命令时不使用当前工作目录，而是使用根目录。在这种情况下，命令是“%java_exe% -jar lib\archquery.jar”。但是，它实际上是从根目录运行的，例如'C:\'。您可以通过命令行中的这个简单测试亲自看到这一点：

```
for /f %a in ('CD') do echo %a 
```

所以运行archquery的命令是寻找相对于根目录的jar，而不是你的ADT目录，因此找不到。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-15T16:04:28.130

I had similar issue and this is how it is solved.

1.  Open `android.bat` file from `\android-sdk-windows\tools` in an editor.

2.  Find the line

    ```
    for /f "delims=" %%a in ('"%java_exe%" -jar lib\archquery.jar') do set swt_path=lib\%%a 
    ```

    and add `rem` in front of this line.

3.  In the next line add `set swt_path=lib\x86` (if you are using a 32-bit system) or `set swt_path=lib\x86_64` (if you are using a 64-bit system).

4.  Save the file. Close the cmd if you have one open. Navigate to `android-sdk-windows\tools\` and run android. This should open SDK manager. But be sure to have `JAVA_HOME` defined in your environment variables and should point to JDK home.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-08T12:49:12.020

对 android.bat（如下）的更改为我解决了这个问题。我现在也可以从 Eclipse 启动 SDK 管理器。

```
for /f "delims=" %%a in ('"%java_exe%" -jar %~dp0\lib\archquery.jar') do set swt_path=lib\%%a 
```

请参阅[%~dp0 是什么意思，它是如何工作的？](https://stackoverflow.com/questions/5034076/what-does-dp0-mean-and-how-does-it-work)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-16T18:26:32.500

我通过替换解决了这个问题：

```
for /f "delims=" %%a in ('"%java_exe%" -jar lib\archquery.jar') do set swt_path=lib\%%a 
```

和

```
REM for /f "delims=" %%a in ('"%java_exe%" -jar lib\archquery.jar') do set swt_path=lib\%%a
set swt_path="lib\x86_64" 
```

请注意，我用于`"`变量`swt_path`。

希望可以帮助别人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-27T23:08:05.200

添加一个名为“ANDROID_SWT”的环境变量，指向保存 swt.jar 的目录，这对我有用。似乎比修改脚本更好。

# python - openERP中Excel报告中的图像

> ID：10926347
> 
> 赞同：0
> 
> 时间：2012-06-07T05:51:10.753
> 
> 标签：python, report, openerp

我正在使用带有**report_aeroo**模块的**Open ERP中的 excel 报告。**我想在我的 Excel 报告上放一张图片；有什么办法吗？

 **例如，我在 HR 模块中生成“员工详细信息”的报告，我想要报告中的员工图像；我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:39:29.650

我很久没有使用 aeroo/report_openoffice 了，但如果我没记错的话，你应该使用 'asimage'。[在这里](http://bazaar.launchpad.net/~kndati/aeroo/trunk/view/head:/report_aeroo/ExtraFunctions.py#L297)找到它的签名。请注意，该方法是“_asimage”，但作为“asimage”分配给报告，因此您必须执行“asimage(myobj.image_field,...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:10:14.060

您必须插入一个“框架”并将名称设置为“：image asimage（myobj.image_field，...）”，正如Alistek在这里解释的那样[http://www.alitek.com/forum/viewtopic.php?f =11&t=385](http://www.alistek.com/forum/viewtopic.php?f=11&t=385)**

# windows-8 - Windows Phone SDK 7.1.1 更新在 Windows 8 Release Preview 上冻结

> ID：10926349
> 
> 赞同：2
> 
> 时间：2012-06-07T05:51:25.900
> 
> 标签：windows-8, freeze, windows-phone-7.1.1

我无法安装 WinPhone 7 SDK 更新 v7.1.1。每次我尝试安装时它都会冻结我的计算机，鼠标仍然可以工作，但一段时间后整个系统锁定，我需要按住电源按钮将其关闭。查看任务管理器并在配置模拟器时看起来像冻结。尝试了几次，甚至重新安装 Windows 仍然没有运气。有人知道解决这个问题吗？我看到其他一些人面临这个问题，但没有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:42:54.087

当它冻结时（特别是当旋转图标冻结时），尝试按一次`Ctrl`+ `Alt`+ `Del`。可能会发生两件事：

首先是机器将在一两分钟内完全冻结，这将需要硬重启。

二是屏幕会快速闪烁，尝试显示“锁定/切换用户/退出/更改密码/任务管理器”屏幕，然后会跳回设置屏幕。然后你会看到进度图标再次开始旋转，但它会犹豫几次。它会再次冻结机器（如果是这样，请进行硬重启并重试），或者设置最终会完成（在我的机器上花费不超过 10 分钟）。

# c++ - 如何处理“类类型重新定义”

> ID：10926351
> 
> 赞同：0
> 
> 时间：2012-06-07T05:51:31.427
> 
> 标签：c++

我正在尝试使用开源 VC++ 代码。我正在尝试将一个新项目添加到现有的 VC++ 解决方案中，这变成了一场噩梦。我面临的问题之一是修复“类型重新定义”错误，我已经修复了一些，但现在我被其他一些错误所困扰。代码库很大，所以没有摘要......

我的问题是，是否有任何“最佳实践”来追踪这些错误？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:53:57.180

通过类型重新定义，我假设您的工作区项目中定义了相同的名称`class`es 或`typedef`s 并且它们在编译时导致问题（不要与多定义链接器错误混淆）。

最佳实践是始终将它们包含**`namespace`**在模块或项目库中。
例如

```
// project1.h
namespace project1 {
  class X {};
}

// project2.h
namespace project2 {
  class X {};
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:56:48.157

我的建议是将所有代码放在单独的项目中的单独名称空间中。这样你就不用担心冲突了。如果您有很多头文件和源文件，可能需要做很多工作，但从长远来看，这可能是值得的。

而且您不必将命名空间添加到所有函数/类，只需`namespace foo {`在所有头文件/源文件的顶部添加，并`}`在底部添加相应的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:25:37.670

当你试图在两个或多个不同的程序中包含同一个头文件时，比如 A 调用 B 和 B 调用 C，如果你在 A 和 B 中都包含 C，就会出现这种错误。我也发生了同样的事情，并解决了它。

# java - 如何使用简单的 JSON 库将 json 文件读入 java

> ID：10926353
> 
> 赞同：115
> 
> 时间：2012-06-07T05:51:37.847
> 
> 标签：java, json, parsing, json-simple

我想`JSON`使用 json 简单库用 java 读取这个文件。

我的`JSON`文件如下所示：

```
[  
    {  
        "name":"John",
        "city":"Berlin",
        "cars":[  
            "audi",
            "bmw"
        ],
        "job":"Teacher"
    },
    {  
        "name":"Mark",
        "city":"Oslo",
        "cars":[  
            "VW",
            "Toyata"
        ],
        "job":"Doctor"
    }
] 
```

这是我为读取此文件而编写的 java 代码：

```
package javaapplication1;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.Iterator;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

public class JavaApplication1 {
    public static void main(String[] args) {

        JSONParser parser = new JSONParser();

        try {     
            Object obj = parser.parse(new FileReader("c:\\file.json"));

            JSONObject jsonObject =  (JSONObject) obj;

            String name = (String) jsonObject.get("name");
            System.out.println(name);

            String city = (String) jsonObject.get("city");
            System.out.println(city);

            String job = (String) jsonObject.get("job");
            System.out.println(job);

            // loop array
            JSONArray cars = (JSONArray) jsonObject.get("cars");
            Iterator<String> iterator = cars.iterator();
            while (iterator.hasNext()) {
             System.out.println(iterator.next());
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ParseException e) {
            e.printStackTrace();
        }
    }
} 
```

但我得到以下异常：

> 线程“主”java.lang.ClassCastException 中的异常：org.json.simple.JSONArray 无法在 javaapplication1.JavaApplication1.main(JavaApplication1.java:24) 处转换​​为 org.json.simple.JSONObject

有人可以告诉我我做错了什么吗？整个文件是一个数组，文件的整个数组中有对象和另一个数组（汽车）。但我不知道如何将整个数组解析为 java 数组。我希望有人可以帮助我解决我的代码中缺少的代码行。

谢谢

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-07T05:54:54.350

> ***整个文件是一个数组，文件的整个数组中有对象和其他数组（例如汽车）。***

正如您所说，JSON blob 的最外层是一个数组。因此，您的解析器将返回一个`JSONArray`. 然后，您可以`JSONObject`从数组中获取 s ...

```
 JSONArray a = (JSONArray) parser.parse(new FileReader("c:\\exer4-courses.json"));

  for (Object o : a)
  {
    JSONObject person = (JSONObject) o;

    String name = (String) person.get("name");
    System.out.println(name);

    String city = (String) person.get("city");
    System.out.println(city);

    String job = (String) person.get("job");
    System.out.println(job);

    JSONArray cars = (JSONArray) person.get("cars");

    for (Object c : cars)
    {
      System.out.println(c+"");
    }
  } 
```

有关参考，请参阅[json-simple 解码示例](http://code.google.com/p/json-simple/wiki/DecodingExamples)页面上的“示例 1”。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-04-14T12:57:07.600

您可以使用 jackson 库并简单地使用这 3 行将您的 json 文件转换为 Java 对象。

```
ObjectMapper mapper = new ObjectMapper();
InputStream is = Test.class.getResourceAsStream("/test.json");
testObj = mapper.readValue(is, Test.class); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-03-27T11:32:01.457

添加杰克逊数据绑定：

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.9.0.pr2</version>
</dependency> 
```

创建具有相关字段的 DTO 类并读取 JSON 文件：

```
ObjectMapper objectMapper = new ObjectMapper();
ExampleClass example = objectMapper.readValue(new File("example.json"), ExampleClass.class); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-03-29T16:42:32.370

从 JsonFile 读取

```
public static ArrayList<Employee> readFromJsonFile(String fileName){
        ArrayList<Employee> result = new ArrayList<Employee>();

        try{
            String text = new String(Files.readAllBytes(Paths.get(fileName)), StandardCharsets.UTF_8);

            JSONObject obj = new JSONObject(text);
            JSONArray arr = obj.getJSONArray("employees");

            for(int i = 0; i < arr.length(); i++){
                String name = arr.getJSONObject(i).getString("name");
                short salary = Short.parseShort(arr.getJSONObject(i).getString("salary"));
                String position = arr.getJSONObject(i).getString("position");
                byte years_in_company = Byte.parseByte(arr.getJSONObject(i).getString("years_in_company")); 
                if (position.compareToIgnoreCase("manager") == 0){
                    result.add(new Manager(name, salary, position, years_in_company));
                }
                else{
                    result.add(new OrdinaryEmployee(name, salary, position, years_in_company));
                }
            }           
        }
        catch(Exception ex){
            System.out.println(ex.toString());
        }
        return result;
    } 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-02-24T13:38:34.777

使用 google-simple 库。

```
<dependency>
    <groupId>com.googlecode.json-simple</groupId>
    <artifactId>json-simple</artifactId>
    <version>1.1.1</version>
</dependency> 
```

请在下面找到示例代码：

```
public static void main(String[] args) {
    try {
        JSONParser parser = new JSONParser();
        //Use JSONObject for simple JSON and JSONArray for array of JSON.
        JSONObject data = (JSONObject) parser.parse(
              new FileReader("/resources/config.json"));//path to the JSON file.

        String json = data.toJSONString();
    } catch (IOException | ParseException e) {
        e.printStackTrace();
    }
} 
```

将 JSONObject 用于类似 JSON 的简单 JSON `{"id":"1","name":"ankur"}`，将 JSONArray 用于类似 .json 的 JSON 数组`[{"id":"1","name":"ankur"},{"id":"2","name":"mahajan"}]`。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-08-08T09:45:56.100

可能对面临相同问题的其他人有所帮助。您可以将文件加载为字符串，然后可以将字符串转换为 jsonobject 以访问这些值。

```
import java.util.Scanner;
import org.json.JSONObject;
String myJson = new Scanner(new File(filename)).useDelimiter("\\Z").next();
JSONObject myJsonobject = new JSONObject(myJson); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-05-13T10:10:05.573

```
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

public class Delete_01 {
    public static void main(String[] args) throws FileNotFoundException,
            IOException, ParseException {

        JSONParser parser = new JSONParser();
        JSONArray jsonArray = (JSONArray) parser.parse(new FileReader(
                "delete_01.json"));

        for (Object o : jsonArray) {
            JSONObject person = (JSONObject) o;

            String strName = (String) person.get("name");
            System.out.println("Name::::" + strName);

            String strCity = (String) person.get("city");
            System.out.println("City::::" + strCity);

            JSONArray arrays = (JSONArray) person.get("cars");
            for (Object object : arrays) {
                System.out.println("cars::::" + object);
            }
            String strJob = (String) person.get("job");
            System.out.println("Job::::" + strJob);
            System.out.println();

        }

    }
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-07-31T21:56:17.327

[Gson](https://github.com/google/gson)可以在这里使用：

```
public Object getObjectFromJsonFile(String jsonData, Class classObject) {
    Gson gson = new Gson();
    JsonParser parser = new JsonParser();
    JsonObject object = (JsonObject) parser.parse(jsonData);
    return gson.fromJson(object, classObject);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-24T07:50:49.603

希望这个例子也有帮助

对于下面的 json 数组示例，我以类似的方式完成了 java 编码，如下所示：

以下是 json 数据格式：存储为“EMPJSONDATA.json”

[{"EMPNO":275172,"EMP_NAME":"Rehan","DOB":"29-02-1992","DOJ":"10-06-2013","ROLE":"JAVA DEVELOPER"},

{"EMPNO":275173,"EMP_NAME":"GK","DOB":"10-02-1992","DOJ":"11-07-2013","ROLE":"WINDOWS 管理员"},

{"EMPNO":275174,"EMP_NAME":"Abiram","DOB":"10-04-1992","DOJ":"12-08-2013","ROLE":"项目分析员"}

{"EMPNO":275174,"EMP_NAME":"Mohamed Mushi","DOB":"10-04-1992","DOJ":"12-08-2013","ROLE":"PROJECT ANALYST"}]

```
public class Jsonminiproject {

public static void main(String[] args) {

      JSONParser parser = new JSONParser();

    try {
        JSONArray a = (JSONArray) parser.parse(new FileReader("F:/JSON DATA/EMPJSONDATA.json"));
        for (Object o : a)
        {
            JSONObject employee = (JSONObject) o;

            Long no = (Long) employee.get("EMPNO");
            System.out.println("Employee Number : " + no);

            String st = (String) employee.get("EMP_NAME");
            System.out.println("Employee Name : " + st);

            String dob = (String) employee.get("DOB");
            System.out.println("Employee DOB : " + dob);

            String doj = (String) employee.get("DOJ");
            System.out.println("Employee DOJ : " + doj);

            String role = (String) employee.get("ROLE");
            System.out.println("Employee Role : " + role);

            System.out.println("\n");

        }

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-10-23T11:47:29.560

```
package com.json;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.Iterator;

import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

public class ReadJSONFile {

    public static void main(String[] args) {

        JSONParser parser = new JSONParser();

        try {
            Object obj = parser.parse(new FileReader("C:/My Workspace/JSON Test/file.json"));

            JSONArray array = (JSONArray) obj;
            JSONObject jsonObject = (JSONObject) array.get(0);

            String name = (String) jsonObject.get("name");
            System.out.println(name);

            String city = (String) jsonObject.get("city");
            System.out.println(city);

            String job = (String) jsonObject.get("job");
            System.out.println(job);

            // loop array
            JSONArray cars = (JSONArray) jsonObject.get("cars");
            Iterator<String> iterator = cars.iterator();
            while (iterator.hasNext()) {
                System.out.println(iterator.next());
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ParseException e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-12T05:12:05.053

示例 Json

```
{
    "per_page": 3,
    "total": 12,
    "data": [{
            "last_name": "Bluth",
            "id": 1,
            "avatar": "https://s3.amazonaws.com/uifaces/faces/twitter/calebogden/128.jpg",
            "first_name": "George"
        },
        {
            "last_name": "Weaver",
            "id": 2,
            //"avatar": "https://s3.amazonaws.com/uifaces/faces/twitter/josephstein/128.jpg",
            "first_name": "Janet"
        },
        {
            "last_name": "Wong",
            "id": 3,
            //"avatar": "https://s3.amazonaws.com/uifaces/faces/twitter/olegpogodaev/128.jpg",
            "first_name": "Emma"
        }
    ],
    "page": 1,
    "total_pages": 4
} 
```

* * *

第一个 If 语句将转换正文中的单个数据 第二个 if 语句将区分 JsonArray 对象

```
public static String getvalueJpath(JSONObject responseJson, String Jpath ) {
        Object obj = responseJson;
        for(String s : Jpath.split("/"))
            if (s.isEmpty())
                if(!(s.contains("[") || s.contains("]")))
                    obj = ((JSONObject) obj).get(s);
                else
                    if(s.contains("[") || s.contains("]"))
                        obj = ((JSONArray)((JSONObject)obj).get(s.split("\\[")[0])).get(Integer.parseInt(s.split("//[")[1].replaceAll("]", "")));

        return obj.toString();
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-17T06:39:22.350

以下是您的问题陈述的有效解决方案，

```
File file = new File("json-file.json");
    JSONParser parser = new JSONParser();
    Object obj = parser.parse(new FileReader(file));
    JSONArray jsonArray = new JSONArray(obj.toString());
    for (int i = 0; i < jsonArray.length(); i++) {
      JSONObject jsonObject = jsonArray.getJSONObject(i);
      System.out.println(jsonObject.get("name"));
      System.out.println(jsonObject.get("city"));
      System.out.println(jsonObject.get("job"));
      jsonObject.getJSONArray("cars").forEach(System.out::println);
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-06T07:29:03.590

```
private static final JsonParser JSON_PARSER = new JsonParser();    
private static final String FILE_PATH = "configuration/data.json";

private JsonObject readJsonDataFromFile() {
    try {
        File indexFile = new File(FILE_PATH);
        String fileData = Files.toString(indexFile, Charsets.UTF_8);
        return (JsonObject) JSON_PARSER.parse(fileData);
    } catch (IOException | JsonParseException e) {
        String error = String.format("Error while reading file %s", FILE_PATH);
        log.error(error);
        throw new RuntimeException(error, e);
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-29T09:53:23.207

导入 org 时会出现此问题。JSONObject 类的 json 库。相反，您需要导入 org.json.simple 库。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-12-27T07:48:13.950

使用 Jackson 库的解决方案。通过验证 JSONLint.com 上的 json 然后使用 Jackson 对这个问题进行排序。下面是相同的代码。

```
 Main Class:-

String jsonStr = "[{\r\n" + "       \"name\": \"John\",\r\n" + "        \"city\": \"Berlin\",\r\n"
                + "         \"cars\": [\r\n" + "            \"FIAT\",\r\n" + "          \"Toyata\"\r\n"
                + "     ],\r\n" + "     \"job\": \"Teacher\"\r\n" + "   },\r\n" + " {\r\n"
                + "     \"name\": \"Mark\",\r\n" + "        \"city\": \"Oslo\",\r\n" + "        \"cars\": [\r\n"
                + "         \"VW\",\r\n" + "            \"Toyata\"\r\n" + "     ],\r\n"
                + "     \"job\": \"Doctor\"\r\n" + "    }\r\n" + "]";

        ObjectMapper mapper = new ObjectMapper();

        MyPojo jsonObj[] = mapper.readValue(jsonStr, MyPojo[].class);

        for (MyPojo itr : jsonObj) {

            System.out.println("Val of getName is: " + itr.getName());
            System.out.println("Val of getCity is: " + itr.getCity());
            System.out.println("Val of getJob is: " + itr.getJob());
            System.out.println("Val of getCars is: " + itr.getCars() + "\n");

        }

POJO:

public class MyPojo {

private List<String> cars = new ArrayList<String>();

private String name;

private String job;

private String city;

public List<String> getCars() {
    return cars;
}

public void setCars(List<String> cars) {
    this.cars = cars;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getJob() {
    return job;
}

public void setJob(String job) {
    this.job = job;
}

public String getCity() {
    return city;
}

public void setCity(String city) {
    this.city = city;
} }

  RESULT:-
         Val of getName is: John
         Val of getCity is: Berlin
         Val of getJob is: Teacher
         Val of getCars is: [FIAT, Toyata]

          Val of getName is: Mark
          Val of getCity is: Oslo
          Val of getJob is: Doctor
          Val of getCars is: [VW, Toyata] 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-12-07T06:53:18.160

```
public class JsonParser {

    public static JSONObject parse(String file) {
        InputStream is = JsonParser.class.getClassLoader().getResourceAsStream(file);
        assert is != null;
        return new JSONObject(new JSONTokener(is));
    }
}
// Read Json 
    JSONObject deviceObj = new JSONObject(JsonParser.parse("Your Json filename").getJSONObject(deviceID).toString()); 
```

执行逻辑迭代

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2020-09-29T09:36:23.557

**你的 json 文件看起来像这样**

[![在此处输入图像描述](../Images/f22e8d97cb305216cdd934ec76cdac2b.png)](https://i.stack.imgur.com/ySbGG.png)

```
import java.io.*;
import java.util.*;
import org.json.simple.*;
import org.json.simple.parser.*;
public class JSONReadFromTheFileTest {
   public static void main(String[] args) {
      JSONParser parser = new JSONParser();
      try {
         Object obj = parser.parse(new FileReader("/Users/User/Desktop/course.json"));
         JSONObject jsonObject = (JSONObject)obj;
         String name = (String)jsonObject.get("Name");
         String course = (String)jsonObject.get("Course");
         JSONArray subjects = (JSONArray)jsonObject.get("Subjects");
         System.out.println("Name: " + name);
         System.out.println("Course: " + course);
         System.out.println("Subjects:");
         Iterator iterator = subjects.iterator();
         while (iterator.hasNext()) {
            System.out.println(iterator.next());
         }
      } catch(Exception e) {
         e.printStackTrace();
      }
   }
} 
```

输出是

```
Name: Raja
Course: MCA
Subjects:
subject1: MIS
subject2: DBMS
subject3: UML 
```

[从这里拿走](https://www.tutorialspoint.com/how-can-we-read-a-json-file-in-java)

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2017-01-23T19:20:52.020

您可以使用 readAllBytes。

`return String(Files.readAllBytes(Paths.get(filePath)),StandardCharsets.UTF_8);`

# android - 如何在 android 中创建类似 iPhone 联系人列表的列表？

> ID：10926357
> 
> 赞同：0
> 
> 时间：2012-06-07T05:51:56.950
> 
> 标签：android, android-listview

我正在构建一个应用程序，在该应用程序上我想要一个类似 iPhone 中的联系人列表，如下所示：

![在此处输入图像描述](../Images/8fc43edda7f6d3eb0de3974fcb1ce674.png)

右侧带有字母的垂直导航条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:02:45.377

您可以在 FrameLayout 或 AbsoluteLayout 中设置 ListView 和自定义 TextView。您的 ListView 应该包含所有项目，没有字母表。然后，您可以将字母`A-Z`和 a`#`放在 TextView 中，并确保它在布局中与右侧对齐。

设置好布局后，您必须向 TextView 添加一些代码。在 Touch 或 Click 事件中，记录相对于顶部的 Y 值，并确定悬停在哪个字母上，然后您可以确定 ListView 的滚动位置。

如果这看起来工作量太大，那么这里有代码。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/7724107/android-listview-like-iphone-contacts-listalphabets-in-right-side-of-the-list)。

# asp.net-mvc-3 - 使用 MVC3 从表单登录中获取密码

> ID：10926360
> 
> 赞同：0
> 
> 时间：2012-06-07T05:52:21.817
> 
> 标签：asp.net-mvc-3, forms, login, passwords

我正在使用 MVC 表单登录，它工作正常，但我需要调用一个数据服务，该服务需要来自控制器内的相同用户名和密码组合。

使用 HttpContext.User.Identity.Name 我可以获得名称，但密码呢？用户登录后有什么办法可以找回吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:02:51.273

首先，您不应该在应用程序中存储密码。会员资格提供者不会在任何地方以明文形式存储密码。您在数据库中拥有的只是**salted hash**。用户登录后无法获取密码。

您需要从*Login*操作中获取密码或创建自定义`MembershipProvider`.

但如果可能，请考虑更改设计，这样您就不必保留明文密码。一旦用户通过身份验证，您就知道它是谁，并且应用程序中的较低层可以信任较高层，并将经过身份验证的主体传递给他们。否则他们为什么会信任传递正确的用户名/密码对？

# django - 如何在 django 中捕捉 harakiri

> ID：10926370
> 
> 赞同：4
> 
> 时间：2012-06-07T05:53:52.510
> 
> 标签：django, signals, uwsgi

我想在 django 应用程序中捕获“harakiri 信号”以记录一些信息。

此代码从 uwsgi 来源制作 harakiri：

```
if (uwsgi.workers[i].pid > 0) {
    kill(uwsgi.workers[i].pid, SIGUSR2);
    // allow SIGUSR2 to be delivered
    sleep(1);
    kill(uwsgi.workers[i].pid, SIGKILL);
} 
```

我试过捕捉 SIGUSR2 信号（views.py）：

```
import signal

def signalhandler(signum, frame):
    print "!!! harakiri"
    import logging
    logger = logging.getLogger("log")
    logger.error("harakiri !!!!!!!")

signal.signal(signal.SIGUSR2, signalhandler) 
```

但它不起作用。我的代码中没有看到日志:-(

# spring-integration - 链中的变压器可以调用通道进行日志记录吗？

> ID：10926380
> 
> 赞同：3
> 
> 时间：2012-06-07T05:55:00.397
> 
> 标签：spring-integration

```
<chain input-channel="afiHeadToHeaderChannel" output-channel="simResMsgOutBoundChannel">
    <transformer ref="afiHeadToHeaderTransform" />
    **<transformer ref="fixedToMapTransform"**  
    <transformer ref="simReqResTransform" />
    <transformer ref="mapToFixedTransform" />
    <transformer ref="headerToAfiHeadTransform" />
</chain> 
```

执行变压器“fixedToMapTransform”后，我想使用消息记录。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:53:45.387

没有 Spring Integration-“本机”方式来做到这一点（正如 Gary 指出的那样），但您可以编写自己的日志记录激活器。

```
<chain input-channel="afiHeadToHeaderChannel" output-channel="simResMsgOutBoundChannel">
    <transformer ref="afiHeadToHeaderTransform" />
    <transformer ref="fixedToMapTransform"/>
    <service-activator ref="loggingActivator" method="handleMessage" />
    <transformer ref="simReqResTransform" />
    <transformer ref="mapToFixedTransform" />
    <transformer ref="headerToAfiHeadTransform" />
</chain>

<beans:bean id="loggingActivator" class="com.mycompany.LoggingActivator" /> 
```

和激活码：

```
public class LoggingActivator {
  private static final Log LOG = LogFactory.getLog(LoggingActivator.class);

  public Message< ? > handleMessage(final Message< ? > message) {
    LOG.debug(message);
    return message;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:24:14.803

你不能；链中的端点与匿名通道相连。您必须将链分成两部分，第一个的输出通道是第二个的输入通道；然后，您可以窃听该通道。

链条是一个“黑匣子”。

# c++ - 使用 C/C++ 打开实时媒体流

> ID：10926383
> 
> 赞同：0
> 
> 时间：2012-06-07T05:55:08.070
> 
> 标签：c++, c, windows, streaming, media

谁能告诉我如何使用 C/C++ 打开 mms:// 实时媒体流。我试图这样做好几天。但找不到任何关于这些信息的书。请推荐任何书籍或任何有用的网站。或者如果你知道怎么做，请教我。

谢谢 一个测试流

mms://a1926.l1856941925.c18569.g.lm.akamaistream.net/D/1926/18569/v0001/reflector:41925

Stream 是由 akamai 提供的 NASATV。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:17:03.717

在 VLC 媒体播放器中有一个很好的例子来解决这个问题。[从http://download.videolan.org/pub/videolan/vlc/2.0.1/](http://download.videolan.org/pub/videolan/vlc/2.0.1/)下载源代码（它是 .xz 文件），然后从 .\vlc-2.0.1\modules\access\ 获取源代码mms\（如果您在 Windows 7z 上打开 xz 文件）。mmstu.c 文件是您的信息来源。

更多信息见：[http](http://get.to/sdp) : //get.to/sdp（地址取自 mms.c）

由于这是 Microsoft 特定的协议，可以在[http://msdn.microsoft.com/en-us/library/cc251059%28v=prot.10%29找到进一步阅读](http://msdn.microsoft.com/en-us/library/cc251059%28v=prot.10%29)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T05:57:37.477

检查 live555 项目，这可以完成这项工作。

# .net - 在 dotnet 中使用注解

> ID：10926385
> 
> 赞同：2
> 
> 时间：2012-06-07T05:55:21.050
> 
> 标签：.net, c#-4.0, annotations, custom-attributes

我从未使用过 C# 属性，但知道它们大致相当于 Java 注释。

如果我继续使用属性替换注释的端口，我需要知道什么？什么会是一样的？不同的？什么会咬我？

至于我的研究，我发现

> C# 使用由编译时符号驱动的**ConditionalAttribute属性**

我只想知道我们是否可以自己编写注释以及哪些版本的dotnet支持它？

如果我有任何要阅读的样本或文件，我们将不胜感激

等待您的宝贵回复和意见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:59:29.860

是的，您可以编写自己的属性 - 您只需继承自`Attribute`，即

```
public class FooAttribute : Attribute {
    public int Bar {get;set;}
} 
```

然后你可以附上：

```
[Foo(Bar=12)]
public int X {get;set;} 
```

（另请参阅`AttributeUsageAttribute`是否要限制它可以应用于的内容 - 例如类、字段、接口等）

请注意，虽然某些属性（`ConditionalAttribute`、`ObsoleteAttribute`等）对编译器有意义，但您**不能**使用属性编写自己的编译时功能，除非通过 PostSharp 等 3rd 方工具。您*可以*做的是在运行时通过反射检查属性（特别是`Attribute.GetCustomAttribute[s]`），并根据代码做出相应的反应。大多数属性都是通过反射以这种方式使用的。

```
foreach(var prop in type.GetProperties()) {
    var foo = (FooAttribute)Attribute.GetCustomAttribute(
                        prop, typeof(FooAttribute));
    if(foo != null) {
        Console.WriteLine("{0} has Foo.Bar: {1}", prop.Name, foo.Bar);
    }
} 
```

所有版本的 .NET 都支持属性，但在某些有限的框架中，您可能会发现某些 BCL 属性在不需要时会丢失。例如，`DataContractAttribute`在不支持 WCF via 的平台上不存在`DataContractSerializer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:01:49.467

.NET 属性和 Java 注释具有相似的用途。

从 v1.1 开始的所有版本都支持 .NET 中的属性。

有关某些历史的更多详细信息：[.NET 属性与 Java 注释：哪个先出现？](https://stackoverflow.com/questions/2807533/net-attributes-versus-java-annotations-which-came-first)

是的，您可以在 .NET 中编写自己的属性。（当然，您必须在自己的代码中处理它们 - 否则不会发生任何事情（除非您将现有属性之一子类化以修改它们的行为）。

# objective-c - 无法以编程方式为 UITabbarItem 设置操作

> ID：10926391
> 
> 赞同：1
> 
> 时间：2012-06-07T05:55:50.450
> 
> 标签：objective-c, ios, uitabbar, uitabbaritem

我需要为我的设置操作`UITabbar`，因为当我单击我的 tabbaritem 时，它应该转到我在另一个视图控制器中进行的操作。

但它正在重定向到`UITableview`

这是我的代码-

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

// create our table view controller that will display our store list    
FirstViewController *firstViewController = [[EzMasterViewController alloc] init];

// create the navigation controller that will hold our store list and detail view controllers and set the store list as the root view controller
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:firstViewController];
[navController.tabBarItem setTitle:@"Home"];
[navController.tabBarItem setImage:[UIImage imageNamed:@"53-house.png"]];

SecondViewController *secondViewController = [[SecondViewController alloc] init];

// create the navigation controller that will hold our store list and detail view controllers and set the store list as the root view controller
UINavigationController *navController1 = [[UINavigationController alloc] initWithRootViewController:secondViewController];
[navController1.tabBarItem setTitle:@"Scan"];
[navController1.tabBarItem setImage:[UIImage imageNamed:@"195-barcode.png"]];

ThirdViewController *thirdViewController = [[ThirdViewController alloc] init];

// create the navigation controller that will hold our store list and detail view controllers and set the store list as the root view controller
UINavigationController *navController2 = [[UINavigationController alloc] initWithRootViewController:thirdViewController];
[navController2.tabBarItem setTitle:@"Map"];
[navController2.tabBarItem setImage:[UIImage imageNamed:@"07-map-marker.png"]];

// add our view controllers to an array, which will retain them
NSArray *viewControllers = [NSArray arrayWithObjects:navController, navController1,navController2, nil];

// add our array of controllers to the tab bar controller
UITabBarController *tabBarController = [[UITabBarController alloc] init];
[tabBarController setViewControllers:viewControllers];

// set the tab bar controller as our root view controller    
[self.window setRootViewController:tabBarController];

// Override point for customization after application launch.
[self.window makeKeyAndVisible];
return YES; 
```

}

通过单击`SecondViewController`tabbaritem，它应该重定向到该操作所在的操作`FirstViewController`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:14:41.493

您应该考虑实现[UITabBarControllerDelegate 的](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html)两种方法：

```
– tabBarController:shouldSelectViewController:
– tabBarController:didSelectViewController: 
```

# payment-gateway - BillSAFE 不保证这笔交易，我的订单被拒绝

> ID：10926393
> 
> 赞同：3
> 
> 时间：2012-06-07T05:56:12.063
> 
> 标签：payment-gateway, prestashop, billing

我有一个在 prestashop 制作的电子商务网站，我使用 BillSafe 作为我的支付网关，但是每次我的订单在调试代码时被拒绝时，它都会在 BIllSafe 的响应后给我

```
[ANSWER] => Array
    (
        [ack] => OK
        [custom_0] => FOOO
        [custom_1] => FAAA
        [custom_2] => Muhahah
        [status] => DECLINED
        [declineReason_code] => 101
        [declineReason_message] => BillSAFE does not secure this transaction
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:18:38.083

你的dueReason_code 是101 这意味着`Auth failure`

请检查您的登录凭据和 API URL。

错误代码和原因列表。

```
100 No auth parameter is set
101 Auth failure
102 Not all auth parameters set
103 Invalid merchantId
104 Invalid merchantLicence
105 Invalid applicationSignature
106 Invalid applicationVersion
107 Merchant not found
108 Request to productive system not allowed yet
198 Error during application log 
199 Unknown error during authentication
2xx Mit „2“ beginnende Fehler-Codes behandeln Validierungs-Fehler
200 No transaction identifier set
201 Parameter transactionId is invalid
202 Transaction not found
203 Transaction does not belong to merchant
204 OrderNumber matched more than 1 order
215 Ein erforderlicher Parameter wurde nicht angegeben
216 Ein Parameter enthält einen ungültigen Wert
220 Encoding other than UTF8 detected
3xx Mit „3“ beginnende Fehler-Codes behandeln Ausführungs-Fehler
301 An execution error occurred
302 Transaction has a wrong status for this method
303 Customer has not yet completed the transaction
304 Frist für den Aufruf der Operation ist abgelaufen
305 No data to return
306 Transaction already has customer payments
399 Internal error in method
8xx Mit „8“ beginnende Fehler-Codes behandeln API spezifische Fehler
801 No Service found
802 No method set
803 Invalid method set
804 Invalid request
999 Unbekannter Fehler 
```

**沙盒**

支付网关：[https ://sandbox-payment.billsafe.de/V200](https://sandbox-payment.billsafe.de/V200)

NVP API-服务器：[https ://sandbox-nvp.billsafe.de/V208](https://sandbox-nvp.billsafe.de/V208)

**居住**

支付网关：[https ://payment.billsafe.de/V200](https://payment.billsafe.de/V200)

NVP API-服务器：[https ://nvp.billsafe.de/V208](https://nvp.billsafe.de/V208)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T08:59:07.220

在您的输出中，有一些测试数据可供查看。尝试使用一些真实数据 => 不是在某些 BillSAFE 指南中找到的“FAAA Muhahah”或“Paul Positiv”。即使您的商家帐户已激活，测试数据也未通过 BillSAFE 验证。

我建议您启用日志记录。日志文件将使您更深入地了解正在发生的事情。

# c - 用于简单 POS 标记的 NLP 库

> ID：10926398
> 
> 赞同：2
> 
> 时间：2012-06-07T05:56:38.210
> 
> 标签：c, nlp, artificial-intelligence, tagging

我是一名正在从事 NLP 暑期项目的学生。我对该领域相当陌生，所以如果有一个非常明显的解决方案，我深表歉意。该项目使用 C 语言，这既是由于我对它的熟悉，也是由于该项目的计算密集型性质（我的语料库是维基百科的明文转储）。

我正在研究一种关系提取方法，利用一致性原则来尝试学习（在某个错误阈值内）一组规则，这些规则指示哪些语法对象集群暗示了这些对象之间的连接。

该算法的第一步之一涉及找到给定单词可以引用的所有可能语法对象的集合（POS消歧由算法在后面的步骤中隐式完成）。我看过几个解析器，但他们似乎都自己做了消歧步骤，这（从我的角度来看）适得其反。我正在寻找现成的东西，（理想情况下）给我一种单一命令的方式来打开这些信息。

这样的事情存在吗？如果没有，是否存在包含这些信息的字典，这些信息很容易被机器解析？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:32:15.850

看看 CMU 狮身人面像。一个开源 NLP 项目。我认为它在 C++ 中，但您可以集成它，或者至少了解如何做事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:16:53.850

如果您觉得活泼，那么将外部 POS 标记器作为 shell 脚本调用或将其包装在 http 服务中怎么样？

Java 和 Python 拥有绝大多数 NLP 库，因此利用它是有意义的。如果您可以在脚本中使用 NLTK 来标记内容，请从 C 中调用此脚本，这样会更容易。

# php - 动态创建子域

> ID：10926406
> 
> 赞同：1
> 
> 时间：2012-06-07T05:57:04.033
> 
> 标签：php, dns, subdomain

我正在开发电子商务平台来建立自己的网站。在那里，当客户登录时，他将用他的商店名称填写表格。当他提交时，他将在这样的域中获得他的空间。**storename.domain.com**

我不知道如何实现这一目标。请建议

我有这个代码，但不知道如何修改它以从表单控件中获取子域名

```
function subd($host,$port,$ownername,$passw,$request) {

  //$sock = fsockopen('localhost',2082);
  $sock = fsockopen("www.mydomain.com", 80, $errno, $errstr, 30);
  echo $sock;

  if(!$sock) {
    print('Socket error');
    exit();
  }

  $authstr = "$ownername:$passw";
  $pass = base64_encode($authstr); 

  $in = "GET $request\r\n";
  $in .= "HTTP/1.0\r\n";
  $in .= "Host:$host\r\n";
  $in .= "Authorization: Basic $pass\r\n";
  $in .= "\r\n";

  fputs($sock, $in);

  while (!feof($sock)) {
    $result .= fgets ($sock,128);
  }

  fclose( $sock );
  return $result;
}
$domain='mydomain.com';

$subd="f1f1f1f1";

$request = "/frontend/$cpanel_skin/subdomain/doadddomain.html?rootdomain=$domain&domain=$subd"; 
```

# image - 图像作为提交按钮

> ID：10926408
> 
> 赞同：2
> 
> 时间：2012-06-07T05:57:20.130
> 
> 标签：image, form-submit

我有一个带有提交按钮的简单表单。我想使用类似图像的提交按钮，

```
<INPUT TYPE="image" SRC="images/submit.gif" HEIGHT="30" WIDTH="173" BORDER="0" ALT="Submit Form"> 
```

如何使用图像作为提交按钮？那么我想在jquery初始化中改变什么？

```
<form action='#' id='freeForm' method='post' autocomplete="off">
<a> 
<input style='border: none' type='submit' value='Submit' /> 
</a>
</form> 
```

jQuery

```
$("#freeForm").submit(function()
    {
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:00:03.537

jQuery 不是必需的，因为图像按钮[已经提交了表单](http://msdn.microsoft.com/en-us/library/ie/ms535836%28v=vs.85%29.aspx)。

```
<form>
    <input type="image" src="foo.png" />
</form> 
```

小提琴：http: [//jsfiddle.net/jonathansampson/AkR95/](http://jsfiddle.net/jonathansampson/AkR95/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:02:56.000

你可以做这样的事情

```
$("#image").onclick(function()
    {
$("#freeForm").submit();
    }); 
```

`#image`是包含您的图像的元素的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:05:48.137

试试这个：

```
<input type="submit" value="Enter" name="submit" style="background:url('/imgBG.jpg') no-repeat;width:100;height:50;border:none;"/> 
```

# javascript - 如何从反向地理编码结果中仅获取邮政编码？

> ID：10926420
> 
> 赞同：0
> 
> 时间：2012-06-07T05:58:32.760
> 
> 标签：javascript, jquery, google-maps-api-3, reverse-geocoding

我已经在整个互联网上寻找一个简单的答案，但我似乎无法在任何地方找到一个。我对纬度和经度进行了简单的反向地理编码，然后返回了巨大的结果对象。我从那里去哪里？这是我到目前为止所拥有的。目前邮政编码返回“未定义”。

```
geocoder.geocode( {'latLng' : event.latLng}, function(results, status) {
    for(var i; i < results.length; i++){
        for(var j=0;j < results[i].address_components.length; j++){
            for(var k=0; k < results[i].address_components[j].types.length; k++){
                if(results[i].address_components[j].types[k] == "postal_code"){
                    var zipcode = results[i].address_components[j].short_name;
                }
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T06:21:42.067

```
for(var i=0; i < results[0].address_components.length; i++)
{
    var component = results[0].address_components[i];
    if(component.types[0] == "postal_code")
    {
        console.log(component.long_name);
    }
} 
```

这就是我的工作。基本上它只是在第一个地址组件中搜索邮政编码，因为它包含所有信息。记住，console.log() 是你的朋友。

## 多年后编辑

感谢可爱的 ES6，支持移动浏览器，现在可以更轻松地完成此操作，让我们来看看一些更简单的方法。首先，我们可以这样简化循环

```
for(let component of results[0].address_components))
{
    if(component.types[0] == "postal_code")
    {
        console.log(component.long_name);
    }
} 
```

或者我们可以使用 find 方法

```
let postalCode = results[0].address_components.find(function (component) {
    return component.types[0] == "postal_code";
});
console.log(postalCode.long_name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-23T14:12:29.587

发现这个简洁的函数（[https://stackoverflow.com/users/638040/johann](https://stackoverflow.com/users/638040/johann)）作为另一个堆栈溢出问题的答案发布。

它会找到匹配您要求的类型并返回它。

```
function extractFromAdress(components, type){
 for (var i=0; i<components.length; i++)
  for (var j=0; j<components[i].types.length; j++)
   if (components[i].types[j]==type) return components[i].long_name;
  return "";
} 
```

用法：

```
var postCode = extractFromAdress(results[0].address_components, "postal_code");
var country = extractFromAdress(results[0].address_components, "country"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:17:26.380

您的问题是 zipcode 变量是函数的局部变量。我有一个关于这个[jsfiddle的工作示例](http://jsfiddle.net/AmeSr/)

```
 var zipcode = null;
function testFunct (results, status) {
for(var i in results){
    var result = results[i];
        for(var j in result.address_components){
            var address_component = result.address_components[j];
            for(var k in address_component.types){
                var addrtype = address_component.types[k];
                if(addrtype  == "postal_code"){
                    zipcode = results[i].address_components[j].short_name;
                    console.log(zipcode);
                    return;
                }

            }
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T06:19:12.083

您的代码执行以下操作：例如，如果有两个或三个答案；它将最后一个连续存储在 zipcode 变量中。即使它是未定义的。您应该检查邮政编码是否有效；并且您应该将其返回到您的邮政编码变量。并在函数外定义变量；否则会卡在函数中。

# httpwebrequest - HttpWebRequest.Proxy 为空 vs GetSystemWebProxy

> ID：10926421
> 
> 赞同：0
> 
> 时间：2012-06-07T05:58:36.230
> 
> 标签：httpwebrequest

我想知道设置 HttpWebRequest.Proxy 属性使用的 WebProxy 的正确方法是什么。

以下是可用的选项：

1.  将 Proxy 属性设置为 Null 或根本不设置该属性。这将使用 IE 的默认代理配置或 web 配置中的默认代理。

2.  将 Proxy 属性设置为 System.Net.GlobalProxySelection.GetEmptyWebProxy 以绕过任何代理。

3.  将 Proxy 属性设置为 WebRequest.GetSystemWebProxy。从 IE 代理设置中为当前用户设置代理。

在选项 1 和 3 之间，正确的方法是什么。为了获得最佳性能，默认代理应该是什么。它应该设置为 null 还是根本不设置任何值，或者它应该是 GetSystemWebProxy。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:43:54.087

我使用 Proxy = Nothing 与其他用户过去在需要身份验证的 IE 中使用 VPN / 代理时遇到的问题一样，并且当 IE 未打开时，程序将不允许连接。如果您要分发软件，您可以随时为用户提供选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:55:22.773

我个人使用选项 1，如果您不设置该值 - 代码将使用系统设置执行。在我看来，设置一个 null 值只是把你的其他代码弄得乱七八糟的无用代码。我不知道有一个“正确的方法”——但如果是这样，我会假设是这样。

# javascript - 使用javascript通过asp复选框使asp面板可见

> ID：10926424
> 
> 赞同：0
> 
> 时间：2012-06-07T05:58:51.873
> 
> 标签：javascript, asp.net, panel, checkbox

**应使用 java-script 函数通过 asp 复选框使 asp 面板可见**

我的公司希望我更改特定页面上的编码，要求是当您单击复选框时，面板应该变得可见，但不应回发。所以他们要求我使用 JavaScript 并实现这个要求。

我尝试了这段代码，正如我所见，JavaScript 函数找不到 id，因为面板将被动态创建。那么任何人都可以帮我做到这一点吗？

重要：它应该停止回发！！！

我的代码是：

```
<script type="text/javascript">
    function fun1()
    {
       if (document.getElementById("CheckBox1").checked == true)
       {
          document.getElementById("Panel3").visible = true;
       }
    }
</script>

<form id="form1" runat="server">
    <asp:Panel ID="Panel1" runat="server" Height="89px">
       <asp:CheckBox ID="CheckBox1" runat="server" OnClick="fun1()" />
    </asp:Panel>
    <br />
    <asp:Panel ID="Panel3" runat="server" Height="91px" Visible="False">
       <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
       <br />
       <br />
       <asp:Button ID="Button2" runat="server" Text="Button" />
    </asp:Panel>
    <br />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:20:01.647

它应该可以帮助你...

```
var panelControls = document.getElementById("<%=mypanel.ClientID%>").getElementsByTagName("input");

    for (var i = 0; i < panelControls .length; i++)
        panelControls [i].disabled = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:45:17.747

Panel 是一个服务器端控件，当它呈现给浏览器时，它呈现为 DIV HTML 元素，您应该使用

```
function toogleDisplay(sender)
{
if(sender.checked)
    document.getElementById('<%= Panel3.ClientID %>').style.display = 'block';
else
  document.getElementById('<%= Panel3.ClientID %>').style.display = 'none';
} 
```

对于您的 asp 复选框控件，您应该添加此代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
          checkbox1.Attributes.Add("onClick", "toogleDisplay(this);");
Panel3.Style.Add(HtmlTextWriterStyle.Display, "none");
    } 
```

# hibernate - 如何在使用 Hibernate 的服务器管理环境中实现连接池机制？

> ID：10926426
> 
> 赞同：0
> 
> 时间：2012-06-07T05:59:12.880
> 
> 标签：hibernate, tomcat, connection-pooling

作为我的 Web 应用程序的一部分，我想在带有 Hibernate 的 Apache Tomcat6 Web-Server 托管环境中实现 Jdbc 连接池机制。任何机构都可以建议我如何实施吗？我正在使用带有 Tomcat6 服务器的 struts-hibernate。

任何建议高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:14:14.613

这是您在谷歌搜索“tomcat 6 连接池”时出现的第一个结果页面：http: [//tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html)。它解释了如何在 tomcat 6 中设置和配置连接池，以及如何从您的应用程序访问它。

这里是 Hibernate 文档的部分，它解释了如何配置它以从应用服务器（如 tomcat）的 JNDI 数据源获取连接：http: [//docs.jboss.org/hibernate/core/3.6/reference/en-美国/html_single/#configuration-hibernatejdbc](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#configuration-hibernatejdbc)

# java - 如何在android中读取Epub文件的所有内容？

> ID：10926428
> 
> 赞同：3
> 
> 时间：2012-06-07T05:59:18.603
> 
> 标签：java, android, epub

我想阅读所有toc的所有内容。
你能告诉我如何阅读目录（toc）中的所有章节。
请发布修改后的代码，以便我们可以阅读所有内容或发布一些内容，以便我可以阅读内容。

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
       AssetManager assetsmanger=getAssets();

        try {                                   
             // find InputStream for book                   
                InputStream  epubInputStream=assetsmanger.open("books/INCOME-TAX-ACT-1961.epub");

              // Load Book from inputStream
              Book book = (new EpubReader()).readEpub(epubInputStream);

            // Log the book's authors                         
              Log.i("epublib", "author(s): " +book.getMetadata().getAuthors());

                // Log the book's title  
             Log.i("epublib", "title: " + book.getTitle());

        String data=new String (book.getContents().get(3).getData()); 
         String k=data;
                web1=(WebView)findViewById(R.id.webView1);    
//                txt1=(TextView) findViewById(R.id.textView1);
//                txt1.setText(k);
            web1.loadData(k," text/html", "utf8");

        Bitmap coverImage=BitmapFactory.decodeStream(book.getCoverImage().getInputStream());

         Log.i("epublib" , "Coverimage is " + coverImage.getWidth() + " by "
                  + coverImage.getHeight() + " pixels");
        // Log the tale of contents
         logTableOfContents(book.getTableOfContents().getTocReferences(), 0);

    //     list=(ExpandableListView)findViewById(R.id.expandableListView1);

//      img1=(ImageView)findViewById(R.id.imageView1);    
//            img1.setImageBitmap(coverImage);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                 Log.e("epublib", e.getMessage());
            }
            catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
        // TODO Auto-generated method stub

        if(tocReferences== null ){
            return;
        }
        for(TOCReference tocReference:tocReferences){
            StringBuilder tocstring=new StringBuilder();
            for(int i=0;i<depth;i++)
            {
                tocstring.append("\t");

            }
            HashMap<String, String> map = new HashMap<String, String>();

        String k=   tocstring.append(tocReference.getTitle()).toString();
        map.put("TOC",k);
        ArrayList<HashMap<String, String>> list1 = new ArrayList<HashMap<String, String>>();
        list1.add(map);
        String t=k;
             Log.i("epublib", tocstring.toString());
             logTableOfContents(tocReference.getChildren(), depth + 1);

        }           
    }                                     
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T06:08:34.753

如果您有必要的库并且`sampleepubfile.epub`在您的`assets`...

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.List;

import nl.siegmann.epublib.domain.Book;
import nl.siegmann.epublib.domain.TOCReference;
import nl.siegmann.epublib.epub.EpubReader;
import android.app.Activity;
import android.content.res.AssetManager;
import android.os.Bundle;
import android.text.Html;
import android.util.Log;
import android.webkit.WebView;
public class EPubDemo extends Activity {
    WebView webview;
    String line, line1 = "", finalstr = "";
    int i = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        webview = (WebView) findViewById(R.id.webview);
        AssetManager assetManager = getAssets();
        try {
            // find InputStream for book
            InputStream epubInputStream = assetManager
                    .open("sampleepubfile.epub");

            // Load Book from inputStream
            Book book = (new EpubReader()).readEpub(epubInputStream);

            // Log the book's authors
            Log.i("author", " : " + book.getMetadata().getAuthors());

            // Log the book's title
            Log.i("title", " : " + book.getTitle());

            /* Log the book's coverimage property */
            // Bitmap coverImage =
            // BitmapFactory.decodeStream(book.getCoverImage()
            // .getInputStream());
            // Log.i("epublib", "Coverimage is " + coverImage.getWidth() +
            // " by "
            // + coverImage.getHeight() + " pixels");

            // Log the tale of contents
            logTableOfContents(book.getTableOfContents().getTocReferences(), 0);
        } catch (IOException e) {
            Log.e("epublib exception", e.getMessage());
        }

        String javascrips = "";
        try {
            // InputStream input = getResources().openRawResource(R.raw.lights);
            InputStream input = this.getAssets().open(
                    "poe-fall-of-the-house-of-usher.epub");

            int size;
            size = input.available();
            byte[] buffer = new byte[size];
            input.read(buffer);
            input.close();
            // byte buffer into a string
            javascrips = new String(buffer);
        } catch (IOException e) {
            e.printStackTrace();
        }
        // String html = readFile(is);

        webview.loadDataWithBaseURL("file:///android_asset/", javascrips,
                "application/epub+zip", "UTF-8", null);
    }

    @SuppressWarnings("unused")
    private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
        if (tocReferences == null) {
            return;
        }

        for (TOCReference tocReference : tocReferences) {
            StringBuilder tocString = new StringBuilder();
             for (int i = 0; i < depth; i++) {
             tocString.append("\t");
             }
             tocString.append(tocReference.getTitle());
             Log.i("TOC", tocString.toString());

            try {
                InputStream is = tocReference.getResource().getInputStream();
                BufferedReader r = new BufferedReader(new InputStreamReader(is));

                while ((line = r.readLine()) != null) {
                    // line1 = Html.fromHtml(line).toString();
                    Log.v("line" + i, Html.fromHtml(line).toString());
                    // line1 = (tocString.append(Html.fromHtml(line).toString()+
                    // "\n")).toString();
                    line1 = line1.concat(Html.fromHtml(line).toString());
                }
                finalstr = finalstr.concat("\n").concat(line1);
                // Log.v("Content " + i, finalstr);
                i++;
            } catch (IOException e) {

            }

            logTableOfContents(tocReference.getChildren(), depth + 1);
        }
        webview.loadDataWithBaseURL("", finalstr, "text/html", "UTF-8", "");
    }
} 
```

# python - python & pyparsing newb：如何打开文件

> ID：10926433
> 
> 赞同：2
> 
> 时间：2012-06-07T05:59:42.887
> 
> 标签：python, pyparsing

pyparsing 的作者 Paul McGuire 对[我正在尝试解决的问题提供](https://stackoverflow.com/questions/10855951/pyparsing-extract-variable-length-variable-content-variable-whitespace-substr/10857305#10857305)[*了很多*](https://stackoverflow.com/questions/10855951/pyparsing-extract-variable-length-variable-content-variable-whitespace-substr/10857305#10857305)[帮助](https://stackoverflow.com/questions/10855951/pyparsing-extract-variable-length-variable-content-variable-whitespace-substr/10857305#10857305)*。我们落后一码，距离球门一码，但我什至无法将球踢过球门线。孔子说，如果他给了一个学生1/4的答案，而他没有带着另外的3/4回来，那么他就不会再教那个学生了。因此，在经历了将近一周的挫败感和极大的焦虑之后，我才提出这个问题……*

 *如何打开输入文件进行 pyparsing 并将输出打印到另一个文件？

这是我到目前为止所得到的，但这实际上是他的全部工作

```
from pyparsing import *
datafile = open( 'test.txt' )
# Backaus Nuer Form
num = Word(nums)
accessionDate = Combine(num + "/" + num + "/" + num)("accDate")
accessionNumber = Combine("S" + num + "-" + num)("accNum")
patMedicalRecordNum = Combine(num + "/" + num + "-" + num + "-" + num)("patientNum")
gleason = Group("GLEASON" + Optional("SCORE:") + num("left") + "+" + num("right") + "=" + num("total"))

patientData = Group(accessionDate + accessionNumber + patMedicalRecordNum)

partMatch = patientData("patientData") | gleason("gleason")

lastPatientData = None

# PARSE ACTIONS

def patientRecord( datafile ):
    for match in partMatch.searchString(datafile):
        if match.patientData:
            lastPatientData = match
        elif match.gleason:
            if lastPatientData is None:
                print "bad!"
                continue
            print "{0.accDate}: {0.accNum} {0.patientNum} Gleason({1.left}+{1.right}={1.total})".format(
                            lastPatientData.patientData, match.gleason
                            )

patientData.setParseAction(lastPatientData)

# MAIN PROGRAM

if __name__=="__main__":
    patientRecord() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:06:50.443

看起来您需要调用`datafile.read()`才能读取文件的内容。现在您正试图在文件对象本身上调用 searchString，而不是文件中的文本。你真的应该看看 Python 教程（特别是[本节](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)），以了解如何读取文件等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:46:13.493

看来您需要一些帮助才能将它们组合在一起。@BrenBarn 的建议很中肯，在将所有问题放在一起之前先解决简单复杂的问题。我可以通过使用更简单的语法为您提供一个关于您正在尝试做的事情的最小示例来提供帮助。您可以将其用作模板来[学习如何在 python 中读取/写入文件](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)。考虑输入文本文件`data.txt`：

```
cat 3
dog 5
foo 7 
```

让我们解析这个文件并输出结果。为了好玩，让我们将第二列乘以 2：

```
from pyparsing import *

# Read the input data
filename = "data.txt"
FIN      = open(filename)
TEXT     = FIN.read()

# Define a simple grammar for the text, multiply the first col by 2
digits = Word(nums)
digits.setParseAction(lambda x:int(x[0]) * 2)

blocks   = Group(Word(alphas) + digits)
grammar  = OneOrMore(blocks)

# Parse the results
result = grammar.parseString( TEXT )
# This gives a list of lists
# [['cat', 6], ['dog', 10], ['foo', 14]]

# Open up a new file for the output
filename2 = "data2.txt"
FOUT = open(filename2,'w')

# Walk through the results and write to the file
for item in result:
    print item
    FOUT.write("%s %i\n" % (item[0],item[1]))
FOUT.close() 
```

这给出了`data2.txt`：

```
cat 6
dog 10
foo 14 
```

分解每一部分，直到你理解为止。从这里开始，您可以慢慢地将这个最小示例调整到上面更复杂的问题。可以读取文件（只要它相对较小），因为[Paul 自己指出](http://pyparsing.wikispaces.com/message/view/home/40353237#40374337)：

> `parseFile`实际上只是 parseString 的一个简单快捷方式，几乎相当于`expr.parseString(open(filename).read())`.*

# c++ - DialogBox 消息是否发送到自定义消息循环？

> ID：10926435
> 
> 赞同：1
> 
> 时间：2012-06-07T05:59:50.583
> 
> 标签：c++, winapi

我有一个当前具有消息循环的应用程序。如果我要使用该方法创建一个模式对话框`DialogBox`，当前消息循环是否也会从对话框接收消息，或者它们是否会被运行时保留？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:10:00.463

[DialogBox](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645452%28v=vs.85%29.aspx)创建自己的消息循环，因此您的消息循环不会运行。从文档中：

> 该函数显示对话框（无论模板是否指定 WS_VISIBLE 样式），禁用所有者窗口，并启动自己的消息循环以检索和调度对话框的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:03:56.217

您现有的消息循环将不会接收对话框的消息。对话框的所有消息都将由您作为最后一个参数传递给*DialogBox*函数的*DLGPROC方法接收。*

# sql-server - 从 SQL 查询生成字符串

> ID：10926436
> 
> 赞同：0
> 
> 时间：2012-06-07T05:59:51.897
> 
> 标签：sql-server

我有以下查询：

```
SELECT ChallanNo+'-'+CONVERT(VARCHAR(12),ChallanDate,106) 
   FROM Challan WHERE ChallanID IN 
   (SELECT ChallanID FROM ChallanDetail WHERE PTUID=42192) 
```

此查询结果将是：

```
151468-29 May 2012
151591-31 May 2012 
```

现在我需要这样的字符串：

```
151468-29 May 2012, 151591-31 May 2012 
```

感谢您的回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:20:33.277

在 SQL Server < 2017 的版本上，您必须使用`STUFF`和`FOR XML PATH`子查询。

```
SELECT STUFF((SELECT ', ' + CONVERT(VARCHAR(32), ChallanNo) 
  + '-' + CONVERT(CHAR(11), ChallanDate, 106)  
  FROM dbo.Challan WHERE ChallanID IN 
   (SELECT ChallanID FROM dbo.ChallanDetail WHERE PTUID = 42192)
FOR XML PATH(''), 
TYPE).value(N'./text()[1]', N'varchar(max)'), 1, 2, ''); 
```

在 2017+ 年，您绝对应该切换到`STRING_AGG()`：

```
SELECT STRING_AGG(CONCAT(c.ChallanNo, '-',
    CONVERT(char(11), c.ChallanDate, 106)), ', ')
  FROM dbo.Challan AS c
  WHERE EXISTS 
  (
    SELECT 1 FROM dbo.ChallanDetail AS cd
    WHERE cd.ChallanID = c.ChallanID
    AND cd.PTUID = 42192
  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:06:28.657

```
declare @result varchar(max) = ''

select @result = @result + ChallanNo + '-' + 
                 CONVERT(VARCHAR(12),ChallanDate,106) + ','
from ...

-- remove trailing ,
select left(@result, len(@result) - 1) 
```

# android - 内核 menuconfig 中的专家是什么

> ID：10926441
> 
> 赞同：0
> 
> 时间：2012-06-07T06:00:40.553
> 
> 标签：android, configuration, kernel-module

我试图安装一个模块“eGalax，eTurboTouch CT-410/510/700 设备支持”并且它没有显示在我的内核配置菜单中，当我搜索它时，我怀疑它与专家选项有关下面，我该如何启用它？

```
 │ Symbol: TOUCHSCREEN_USB_EGALAX_REVERSE [=n]                                                                                                                   │  
     │ Type  : boolean                                                                                                                                        │  
     │ Prompt: eGalax Special reverse MSB / LSB Packet                                                                                                        │  
     │   Defined at drivers/input/touchscreen/Kconfig:553                                                                                                     │  
     │   Depends on: !S390 && INPUT [=y] && INPUT_TOUCHSCREEN [=y] && TOUCHSCREEN_USB_EGALAX [=n] && EXPERT                                                   │  
     │   Location:                                                                                                                                            │  
     │     -> Device Drivers                                                                                                                                  │  
     │       -> Input device support                                                                                                                          │  
     │         -> Generic input layer (needed for keyboard, mouse, ...) (INPUT [=y])                                                                          │  
     │           -> Touchscreens (INPUT_TOUCHSCREEN [=y])                                                                                                     │  
     │             -> eGalax, eTurboTouch CT-410/510/700 device support (TOUCHSCREEN_USB_EGALAX [=n]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:20:16.647

在内核 2.6.37 中，专家成为嵌入式。

# iphone - 使用泄漏仪器时仪器崩溃

> ID：10926443
> 
> 赞同：4
> 
> 时间：2012-06-07T06:00:43.493
> 
> 标签：iphone, objective-c, ios, xcode, instruments

好的，这就是问题所在。我正在尝试使用仪器调试应用程序，但每次我尝试使用泄漏仪器时，仪器都会崩溃大约 3 秒。这只发生在我尝试将它与实际设备一起使用时，它刚刚连接到模拟器时会运行良好。

我已经在 2 台不同的计算机上重新安装了 Xcode 和 Instruments，并且正在运行最新版本。这也不是该应用程序的问题，因为我已经使用其他 2 个应用程序进行了尝试，并且发生了同样的事情。另外，我已经用多种不同的设备尝试过这个，同样的事情正在发生。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T06:36:41.333

我刚刚在 Instruments 中经历了 100% 可重现的崩溃（效率不是很高），这似乎已通过重建聚光灯索引 ( `sudo mdutil -E /`) 得到修复，因此对于无法让 Instruments 运行超过几秒钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-18T12:47:37.870

在运行仪器之前，请访问：

```
File->Recording Options->disable "Record reference counts" 
```

# javascript - extjs - 从外部 Javascript 向 Store 添加数据

> ID：10926445
> 
> 赞同：0
> 
> 时间：2012-06-07T06:00:51.000
> 
> 标签：javascript, extjs, extjs4

我有一个使用 EXTJS4 MVC 结构的带有商店的图表，我通过另一个 javascript 文件从在线 api 获取数据，我想知道是否可以从外部将数据添加到商店，以便在我调用 store.load( ）。

外部js不是extjs或mvc的一部分，它运行在我图表后面的页面上。我是否必须将所有逻辑转移到 extjs 控制器中？有没有办法从外部 js 调用 extjs 方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:52:10.893

确实有一些方法可以从 ExtJS 特定代码之外调用 ExtJS 对象上的方法，毕竟它只是 JS。

您将需要从您的 ExtJS 代码中公开一个方法，该方法返回一个引用来说明图表，类似于以下内容（在 ExtJS 代码中）：

```
function getChart() {

    return Ext.getCmp('myChartID');

} 
```

然后在您的外部 JS 中，您可以执行以下操作：

```
var data = ...; // This is where you can get your external data

var chart = getChart();

chart.load(data); 
```

这取决于从 ExtJS 公开方法的能力，因此您需要能够引用。

尝试调用该方法从 ExtJS MVC 应用程序中检索数据可能会更容易。如果加载了您的外部 JS 文件，它可能会返回对自身的引用，您可以调用它的方法。因此，考虑到这一点，只需从 ExtJS 应用程序中调用您需要的方法作为替代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T22:10:14.040

最终使用以下内容访问本地 js 文件。

```
var url = "url.js";
var onload = function () {
    console.log('url loaded');
};
var onerror = function () {
    console.log('error loading analytics functions');
};
Ext.Loader.injectScriptElement(url, onload, onerror, scope); 
```

确保在您的 app.js 中启动 Ext.Loader，如下所示：

```
Ext.Loader.setConfig({enabled:true}); 
```

# jquery - 列表中的 jQuery Mobile 列表

> ID：10926446
> 
> 赞同：0
> 
> 时间：2012-06-07T06:00:59.757
> 
> 标签：jquery, list, mobile

我想在 jQuery mobile 上的列表项中创建一个列表，这是我的代码：

[https://gist.github.com/2886812](https://gist.github.com/2886812)

一切正常，除了顶部和底部的列表项被截断并如下所示：

[http://imgur.com/em37Y](http://imgur.com/em37Y)

我什至不知道我想做的事情是否可行。我是新手。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:23:27.983

看看这个[http://jsfiddle.net/7wzbR/](http://jsfiddle.net/7wzbR/)

# java - Spring 多个应用程序上下文与耳朵中的单个应用程序上下文

> ID：10926449
> 
> 赞同：0
> 
> 时间：2012-06-07T06:01:12.480
> 
> 标签：java, spring, jakarta-ee

我继承了一个应用程序，该应用程序被打包为里面的 ear 文件

```
 - ear :
        -APP-INF/lib (persitence.jar - hibernate+spring ... etc)
        -war (web-services)
        -jar (mdb)
        -jar (mdb) 
```

当我研究该应用程序时，注意到 jar 中的每个模块都创建了它自己的 Spring 应用程序上下文，该上下文在运行时加载。

它工作正常，但只有一个应用程序上下文不是更好吗？我想知道这种结构与仅使用单个应用程序上下文的结构相比有哪些优点和缺点？

为了在运行时更清楚，加载了 3 个应用程序上下文根。不仅有更多的应用程序上下文文件

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T06:14:16.923

首先：你确定它不是到处都是相同的应用程序上下文吗？你测试过这个吗？

如果它们都是独立的：优点是这些应用程序上下文相互屏蔽，您可以称之为松散耦合，这是一件好事；一个不能影响另一个，它让程序员更清楚。缺点是，从另一个应用程序上下文访问一个应用程序上下文可能会更困难，但您总能找到解决此问题的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T06:12:17.820

如果应用程序非常大，那么不同模块的应用程序上下文很容易管理并且不会产生任何开销。在应用程序启动时，所有上下文 xml 文件将被合并。

而且我也更愿意为单独的一组配置维护单独的应用程序上下文文件，例如。安全、数据源、aop 等应该放在单独的上下文文件中。

当应用程序较小时，您可以为整个应用程序获取单个应用程序上下文文件。否则，当您需要对其中任何一个进行更改时，可以轻松管理不同模块的不同应用程序上下文。如果您将所有这些结合起来，那么将很难对其进行任何更改。

希望这对您有所帮助。干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T06:12:24.830

我能想到的针对单个应用程序上下文文件的几点：

1.  一个文件会变得很大，这将是维护的噩梦。
2.  每个组件的开发人员都会修改，更新相同的文件可能会导致错误。
3.  一个组件的更改将导致一个集中文件的更改，再次可能导致问题。
4.  它为每个组件开发人员提供了“关注点分离”，他们在执行任务时不必看到、知道其他人的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T22:19:31.540

我偶然发现了这个寻求多租户应用程序解决方案的线程。大多数文章只是关于数据源（Spring HotSwapable 数据源目标）等，但您拥有的是战争级别的单独上下文。

这给了我另一个想法，即以一种使其成为多租户的方式捆绑我的应用程序。如果战争只是为了注入特殊的运行时并提供额外的上下文路径，这可能适用于大型多租户应用程序。公共类将在 EAR 级别和每次战争的应用程序上下文中加载。我想这对于少数租户来说应该没问题。

# java - 如何在 Java 中使用 JaxB 在 XML 中搜索和更新

> ID：10926452
> 
> 赞同：0
> 
> 时间：2012-06-07T06:01:20.887
> 
> 标签：java, xml, jaxb

我能够从 xml 模式创建 java 对象，并且创建新的 xml 也可以。

现在使用我的 java 对象，我如何搜索特定标签并将其更新回 xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:59:13.003

您可以使用 的实例`Marshaller`将对象写回 XML。如果要将更改应用回现有 DOM，则可以使用`Binder`. `Binder`当您希望保留文档中的未映射内容时，此功能很有用。

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-xml-infoset-preservation.html](http://blog.bdoughan.com/2010/09/jaxb-xml-infoset-preservation.html)

# paypal - 使用 django-paypal 实现 Paypal“_cart”

> ID：10926454
> 
> 赞同：1
> 
> 时间：2012-06-07T06:01:25.663
> 
> 标签：paypal, django-forms, django-paypal

我正在使用 django-paypal ipn.standard 并试图让它与 paypal 的“_cart”选项一起使用。但是，我不能让它工作。

我使用这本字典来初始化表单：

```
cart {
  'amount_1': '0.99',
  'amount_2': '0.99',
  'business': 'seller_436_biz@foo.com',
  'cancel_return': 'http://www.foo.com/ccled/',
  'cmd': '_cart',
  'invoice': '1',
  'item_name_1': 'Item 1',
  'item_name_2': 'Item 2',
  'notify_url': 'http://www.foo.com/ntfy/',
  'return_url': 'http://www.doo.com/done/'
}

form = PayPalPaymentForm(initial=cart) 
```

我也尝试将 "CMD_CHOICES":"_cart" 添加到上述字典中，但没有任何区别

但是，在使用 {{ form.render }} 时，我得到了带有以下 html 的 Buy-Now 按钮：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="business" value="seller_436_biz@foo.com" id="id_business" />
  <input type="hidden" name="notify_url" value="'http://www.foo.com/ntfy//" id="id_notify_url" />
  <input type="hidden" name="cancel_return" value="http://www.foo.com/ccled/" id="id_cancel_return" />
  <input type="hidden" name="return" value="http://www.foo.com/done/" id="id_return_url" />
  <input type="hidden" name="invoice" value="1" id="id_invoice" />
  <input type="hidden" name="cmd" value="_cart" id="id_cmd" />
  <input type="hidden" name="charset" value="utf-8" id="id_charset" />
  <input type="hidden" name="currency_code" value="USD" id="id_currency_code" />
  <input type="hidden" name="no_shipping" value="1" id="id_no_shipping" />
  <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="Buy it Now" />
</form> 
```

没有显示购物车项目。

我正在查看其他几个线程，例如[django-paypal 中的 Multiple Items](https://stackoverflow.com/questions/4011655/multiple-items-in-django-paypal)。为了尝试一下，我从该示例中剪切粘贴了“项目”字典，并将其传递给我的 PayPalPaymentForm。但是，再次，在表格中，我没有看到正在出售的物品。

请问我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:02:45.603

我想出了我错过了什么。应使用“购物车”选项创建表单：

```
form = PayPalPaymentForm(initial=cart, button_type="cart") 
```

# windows - 为什么VB6图像组合在Win 7中不显示图像

> ID：10926455
> 
> 赞同：0
> 
> 时间：2012-06-07T06:01:27.620
> 
> 标签：windows, vb6, controls

不幸的是，我需要对旧的 VB6 应用程序进行更改。我注意到 mscomctl.ocx 中的图像组合在 Windows 7 中无法正常工作。没有图像显示，即使它链接到图像列表控件，并且在 XP 中工作正常。

有谁知道为什么这可能在 Win 7 中损坏并建议修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:53:21.413

好吧，以下对我有用，其中 ImageCombo 是我的 ImageCombo 框，而 ImageList 是我的 Image List 控件！

```
Private Sub Command_Click()

    Set ImageCombo.ImageList = ImageList

    With ImageCombo.ComboItems
        .Add , "OPEN_FOLDER", "Open Folder", "IMG_OPEN_FOLDER"
        .Add , "CLOSED_FOLDER", "Closed Folder", "IMG_CLOSED_FOLDER"
        .Add , "NEW_DOCUMENT", "New Document", "IMG_NEW_DOCUMENT"
        .Add , "PLUS", "Plus", "IMG_PLUS"
        .Add , "MINUS", "Minus", "IMG_MINUS"
    End With

End Sub 
```

IMG_xxxx 是我的图像列表键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:53:24.160

MSCOMCTL.OCX

6.1.97.82 有效 6.1.98.33 无效

这是大版本

尝试使用 6.1.97.82

* * *

我得到了它！

在 6.1.98.33 版本中，当您向 comboitems 集合添加项目时，您必须设置第三个参数（“Text”）。然后将显示图像。您可以设置一个空字符串“”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:32:18.260

可能 MSCOMCTL.OCX 未正确注册或与您的 Windows 不兼容。请打开命令提示符并以管理员身份运行，然后键入以下命令：

```
Regsvr32 MSCOMCTL.OCX 
```

如果问题仍然存在，请下载新的 MSCOMCTL.OCX 并重新注册。您可以从以下链接下载 MSCOMCTL.OCX： [Mscomctl.zip](http://www.majorgeeks.com/files/mscomctl.zip)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T13:08:54.990

仅将图像列表分配给组合是不够的！还需要添加项目：

```
ImageCombo1.ComboItems.Add 1, "key1", "text1", 1
ImageCombo1.ComboItems.Add 2, "key2", "text2", 2 
```

然后你必须记住部署时二进制兼容性是什么。天哪，自 VB6 以来我们所取得的进步…….Net 万岁。

# javascript - javascript onload 事件不会在 iphone 上触发

> ID：10926461
> 
> 赞同：0
> 
> 时间：2012-06-07T06:02:32.840
> 
> 标签：javascript, iphone, html

`<body onload="javascript function">`在桌面浏览器上运行良好，但在 iPhone 上无法运行。我的 iPhone 似乎可以读取外部 CSS 文件和 JS 文件，因为当我从页面单击按钮时，它会触发 JS 函数。但奇怪`onload`的是，只有事件不起作用。我现在很无知。谁能告诉我为什么我不能在 iPhone 上触发 onload 事件？下面是我的代码。

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>HTML5 연습</title>
        <meta name="viewport" content="width=480, user-scalable=1"/>
        <link rel="stylesheet" href="../styles/test1.css" />
        <script type="text/javascript" src="../scripts/fbsdk.js"></script>
        <script type="text/javascript" src="../scripts/initcss.js"></script>
        <script>
            //document.addEventListener('DOMContentLoaded', checkLoginCase, false);
        </script>
    </head>
    <body onload="checkLoginCase()">
        <div id="wrap">
            <header id="top">
                <img src="../fbimg/logo.png" alt="상단이미지" title="상단이미지">
            </header>
        </div>
        <button onclick="checkLoginCase()"> check fxn1</button>
        <button onclick="checkAlert()"> check fxn2</button>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:06:54.393

它应该可以工作，但尽量避免使用内联 JavaScript。

试试这个：

```
window.onload = (function(){
    checkLoginCase();
});

//-or-

window.onload = checkLoginCase; 
```

# bash - OWA：通过脚本更改电子邮件密码

> ID：10926467
> 
> 赞同：0
> 
> 时间：2012-06-07T06:03:03.550
> 
> 标签：bash, outlook-web-app

有没有办法在 bash 脚本的帮助下更改我的 Outlook Web 应用程序客户端密码？如果是，那么请建议如何。我的公司实施了一项政策，每 21 天更改一次我的密码。我厌倦了这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:18:01.293

为自己准备一个 Firefox 网络浏览器并安装扩展“LiveHTTPHeaders”。它可以记录在您的网络浏览器和您的公司服务器之间发送的所有标头。然后你启动 wget`--save-cookies cookie_file`并尝试与你的服务器重复通信。从您使用的第一次呼叫开始`--load_cookies cookie_file`，服务器就知道您是谁。[您可以在此处](http://www.gnu.org/software/wget/manual/html_node/HTTP-Options.html)了解有关 wget 的更多信息。

如果您可以使用 perl/ruby/python，我建议您使用[mechanize](http://search.cpan.org/dist/WWW-Mechanize/)，它是一个解析器，可以帮助您找到网页中的所有链接。

# ios - 如何动画圆弧/甜甜圈段行程和长度变化

> ID：10926468
> 
> 赞同：9
> 
> 时间：2012-06-07T06:03:16.207
> 
> 标签：ios, cocoa-touch, core-animation, core-graphics

![草图](../Images/78db6bc0453fc6d6eb1d426f4cfc4589.png)

我需要在以下情况下为弧线（又名甜甜圈段）设置动画，其中弧线与假想的圆心保持恒定的半径 r（弧线正好位于圆外）。

1) 对从 x 到 y 的弧形笔划宽度进行动画处理，同时保持半径 r 和角度 alpha。

2) 将弧角从 alpha 设置为 beta，同时保持恒定的笔划宽度和半径。

3）一起做1和2，但可能有独立的动画/时间。

这是我到目前为止所拥有的：

我已经将圆弧绘制实现为一个自定义视图，它只需使用 CGContextAddArc 绘制圆弧。这对于静态弧来说很好，但它不会为任何东西设置动画。

另外，我知道如何使用 [UIBezierPath addClip] 之类的东西绘制剪辑图像。

后者很有趣，因为我认为对于场景 1，我可以通过两种方式达到预期的效果：要么继续绘制弧线并修改笔划和半径以保持相同的感知内圆半径（我对此并不乐观，我担心半径会“抖动”），或者绘制一个增大的圆的片段（可能通过仿射变换简单地修改比例），然后被静态圆形蒙版剪裁。

现在，我如何将所有这些概念确定为一些实际的绘图代码？我不需要真正的代码（虽然那也可以），但更像是一种概念方法，比如，我可以使用带有自定义绘图的 UIView 来完成这一切，还是我们需要谈论我理解的自定义键动画涉及CALayers等。换句话说，什么是正确的架构来做这一切，最容易编码，同时从合成的角度来看是高效的，以实现流畅的动画？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T06:43:49.287

您已经可以使用 CAShapeLayer 执行此操作，方法是为弧创建路径，然后为不同的笔划属性设置动画。您可以为整个圆创建路径，并使用 strokeStart 和 strokeEnd 属性仅描边圆的某个部分。值得注意的是，形状层是中心描边，因此当您增加线宽时，它们会向内和向外同样增加。为了解决这个问题，您可以使用相同的圆形对其进行遮罩并将线宽加倍，或者对路径进行动画处理，使半径增加线宽的一半，以便最里面的点始终与中心的距离相同.

第一个示例可以通过设置 lineWidth 属性的动画来完成，第二个示例可以通过设置 strokeStart 和 strokeEnd 属性的动画来完成

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T06:26:06.940

您应该使用 CALayer 子类上的自定义动画属性来实现这一点。[本教程](http://blog.pixelingene.com/2012/02/animating-pie-slices-using-a-custom-calayer/)（[此处](http://blog.pixelingene.com/2012/02/animating-pie-slices-using-a-custom-calayer/)提供源代码）用于创建动画饼图，看起来不错。您应该能够根据您的要求对其进行修改。

# javascript - 使用javascript在表格中动态添加一行onblur表格中的最后一行

> ID：10926469
> 
> 赞同：0
> 
> 时间：2012-06-07T06:03:16.753
> 
> 标签：javascript, html

我创建了一个表，在引用“http://stackoverflow.com/questions/9045940/dynamically-adding-table-row”时，每当我进入表的最后一行时，我需要在表中添加另一行动态底部，这是我尝试过的代码：

```
<table id="myTable" style="table-layout:auto">

   <tr>
   <td><input type="text" onblur="addRow('myTable')" /></td>
    <td><input type="text"/></td>
    <td><input type="text"/></td>
  </tr>

</table> 
```

和javascript如下：

```
<script>
function addRow()
{
   //add a row to the rows collection and get a reference to the newly added row
   var newRow = document.all("myTable").insertRow();

   var oCell = newRow.insertCell();
   oCell.innerHTML = "<input type='text' onblur='addRow();'>";

   oCell = newRow.insertCell();
   oCell.innerHTML = "<input type='text' name='title'>";

   oCell = newRow.insertCell();
   oCell.innerHTML = "<input type='text' name='title'>";   
}

</script> 
```

但是，这里在表格顶部添加了一个新行，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:17:59.380

改变`var newRow = document.all("myTable").insertRow();`

到

`var newRow = document.all("myTable").insertRow(-1);`

另外，在您的`onblur`事件中，为什么在`addRow`函数不带任何参数的情况下将参数传递给函数？

# rhomobile - 示例 rhomobile 应用程序

> ID：10926471
> 
> 赞同：0
> 
> 时间：2012-06-07T06:03:20.757
> 
> 标签：rhomobile, sample

我想查看 Rhomobile 应用程序中的一些功能并将它们与本机应用程序进行比较。尤其是，

> **基于位置的结果**：我们能否控制它在没有可用位置服务时的行为并执行不同的操作。

任何指向**已部署到应用商店或 Google play 的示例应用程序的**指针？我一直在搜索 rhomobile.com（[重定向](http://www.motorola.com/Business/US-EN/Business+Product+and+Services/Software+and+Applications/RhoMobile+Suite)）但找不到任何样本。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:59:44.957

我不知道任何示例应用程序，但是[这个示例应用程序采样本机系统功能](https://github.com/rhomobile/rhodes-system-api-samples)有帮助吗？

# php - mysql/php树形导航菜单

> ID：10926472
> 
> 赞同：-1
> 
> 时间：2012-06-07T06:03:27.793
> 
> 标签：php, mysql, menu, tree, navigation

需要的代码输出：

[![](../Images/e30aaba0881daa86df5ef81a1dba921f.png)](https://i.stack.imgur.com/zUSOw.jpg)

视觉输出：

[![](../Images/a224de096baf3a053a077cbf6a527a9a.png)](https://i.stack.imgur.com/eOWTy.jpg)

我的 sql 数据库“测试”

```
CREATE TABLE IF NOT EXISTS `menu` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `link` varchar(100) NOT NULL,
  `parrent_id` int(11) NOT NULL DEFAULT '0',
  `status` varchar(4) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

--
-- Dumping data for table `menu`
--

INSERT INTO `menu` (`id`, `name`, `link`, `parrent_id`, `status`) VALUES
(1, 'Home', '#home', 0, 'Show'),
(2, 'About', '#about', 0, 'Show'),
(3, 'Our services', '#service', 0, 'Show'),
(4, 'Get involved', '#getinvolved', 0, 'Show'),
(5, 'Donors', '#donors', 0, 'Show'),
(6, 'News', '#news', 0, 'Show'),
(7, 'Contact Us', '#contact', 0, 'Show'),
(8, 'Ourselves', '#ourselves', 2, 'Show'),
(9, 'Objectives', '#objectives', 2, 'Show'),
(10, 'Our Patrons', '#patrons', 2, 'Show'); 
```

我的 PHP 代码在这里....

```
<?php
  $dbuser="root";
  $dbpass="";
  $dbname="test";  //the name of the database
  $chandle = mysql_connect("localhost", $dbuser, $dbpass)
    or die("Connection Failure to Database");
  mysql_select_db($dbname, $chandle) or die ($dbname . " Database not found. " . $dbuser);

  function menu($parrent) {
    echo "<ul>";
    $sql = "SELECT * from menu where parrent_id=".$parrent;
    while($res = mysql_fetch_array(mysql_query($sql)))
    echo "<li><a href='".$res['link']."'>".$res['name']."</a></li>";
    echo "</ul>";
  }
  $sql = "SELECT * from menu where parrent_id =0";
  echo "<ul>";
  while($resnew = mysql_fetch_array(mysql_query($sql)))
  {
    $sql_sub = "SELECT * from menu where parrent_id=".$resnew['id']; 
    $count = mysql_num_rows(mysql_query($sql_sub));
    if($count>0)
    {
      echo "<li><a href='".$resnew['link']."'>".$resnew['name']."</a>";   
      menu($resnew['id']);
      echo "</li>";
    }
    else
    {
      echo "<li><a href='".$resnew['link']."'>".$resnew['name']."</a></li>";
    }
  }
  echo "</ul>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:26:29.787

试试这个查询，这称为半连接

```
select
  l.id,
  l.name,
  group_concat(r.name)
from menu l
inner join menu r
on r.parrent_id = l.id
group by l.name 
```

您还可以在这里根据您的要求提供一个 where 条件来获取结果，如果父 id 不为 0，它将带来所有结果。如何使用 Group Concat Value 使用 php explode 函数来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:48:33.903

菜单树

一种。创建表“类别列表”。

```
CREATE TABLE IF NOT EXISTS `categorylist` (
`id` int(5) NOT NULL auto_increment,
`cname` varchar(25) collate utf8_unicode_ci default NULL,
`pid` int(5) NOT NULL,
`url` text collate utf8_unicode_ci,
`status` int(1),
PRIMARY KEY (`id`),
KEY `pid` (`pid`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=9 ; 
```

* * *

湾。在“类别列表”中插入值

```
INSERT INTO `categorylist` (`id`, `cname`, `pid`, `url`, `status`) VALUES
(1, 'Entertainment', 0, '#',1),
(2, 'Movies', 1, 'http://example.com/movie.php',1),
(3, 'Drama', 1, 'http://example.com/drama.php',1),
(4, 'Sports', 0, '#',1),
(5, 'Football', 4, 'http://example.com/football.php',1),
(6, 'Cricket', 4, 'http://example.com/cricket.php',1),
(7, 'Politics', 0, '#',1),
(8, 'Politics news', 7, 'http://example.com/politics-news.php',1); 
```

* * *

C。样式表

```
.nav ul li { background:#f1f1f1; list-style: none;}
ul.dropdown { position:relative; width:auto; font:12px Arial, Helvetica, sans-serif; }
ul.dropdown li { float:left; zoom:1; height:30px; padding:6px 2px 0 2px; }
ul.dropdown li li { border-right:1px solid #ccc; border-left:1px solid #ccc; margin-left:-30px;}
ul.dropdown a:hover { color:#000; } ul.dropdown a:active { color:#ffa500; }
ul.dropdown li a { display:block; padding:4px 8px; color:#000; text-decoration:none; font:bold 12px Arial, Helvetica, sans-serif; }
ul.dropdown li:last-child a { border-right:none;} /* Doesn't work in IE */
ul.dropdown li:hover { color:#000; background:#e7e7e7; position:relative; }
ul.dropdown li.hover a { color:#000; }
ul.dropdown ul { text-align:left; visibility: hidden; position: absolute; left:-10px; top:36px; }
ul.dropdown ul li { background:#f1f1f1; border-bottom:1px solid #ccc; float:none; width:120px; height:25px; }
ul.dropdown ul li a { border-right:none; width:100%; display:inline-block; color:#000; }
ul.dropdown ul ul { left:100%; top:0; }
ul.dropdown li:hover > ul { visibility:visible; } 
```

* * *

d。菜单脚本代码

```
<?php

$con=mysql_connect("localhost", "root", "") or die('Server connexion not possible.');
mysql_select_db("newone",$con) or die('Database connexion not possible.');

$qry="SELECT * FROM categorylist" where status=1;
$result=mysql_query($qry,$con);

$arrayMenu = array();

while($row = mysql_fetch_assoc($result)){
$arrayMenu[$row['id']] = array("pid" => $row['pid'], "name" => $row['cname'], "url" => $row['url']);
}

//createTree($arrayCategories, 0);

function createTree($array, $curParent, $currLevel = 0, $prevLevel = -1) {

foreach ($array as $categoryId => $category) {

if ($curParent == $category['pid']) {

if($category['pid']==0) $class="dropdown"; else $class="sub_menu";
if ($currLevel > $prevLevel) echo " <ul class='$class'> ";

if ($currLevel == $prevLevel) echo " </li> ";

echo '<li id="'.$categoryId.'" >&lt;a href="'.$category['url'].'"&gt;'.$category['name'].'&lt;/a&gt;';

if ($currLevel > $prevLevel) { $prevLevel = $currLevel; }

$currLevel++;

createTree ($array, $categoryId, $currLevel, $prevLevel);

$currLevel--;
}
</pre>
}

if ($currLevel == $prevLevel) echo " </li> </ul> ";

}
?>

<div class="nav">

<?php
if(mysql_num_rows($result)!=0)
{
php createTree($arrayMenu, 0);
}
?>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T21:03:47.430

这是我在 Kohana 框架中使用 ORM 编码的。也许它有帮助。如果没有，请随时受到启发......

```
public function roleTree(){
    // find topmost nodes
    $roles = ORM::factory('Role')->where('parent_id', '=', '0')->find_all();
    $nodes = array('node' => NULL, 'depth' => 0, 'childs' => array());
    foreach($roles as $role){
        $nodes['childs'][] = array('node' => $role, 'depth' => 1, 'childs' => $this->_roleTree($role, 1));
    }
    return $nodes;
}

private function _roleTree($role, $depth){
    // add child nodes
    $depth ++;
    $roles = ORM::factory('Role')->where('parent_id', '=', $role->id)->find_all();
    $nodes = array();
    if(count($roles)){
        foreach($roles as $role){
            $nodes[] = array('node' => $role, 'depth' => $depth, 'childs' => $this->_roleTree($role, $depth));
        }
        return $nodes;
    }
    return array();
} 
```

它创建了一个结构精美但简单的数组......

# facebook - 将 Facebook 数据持久化到 Mongodb (Node.js + Express + jam)

> ID：10926474
> 
> 赞同：-2
> 
> 时间：2012-06-07T06:03:37.840
> 
> 标签：facebook, node.js, mongodb, express

我正在开发简单的网络应用程序，它要求 Facebook 访问令牌并检索登录用户的“发布”数据。

单击“登录”后，它会调用 FB.api 来检索用户帖子并在 javascript 中使用 innerHTML 来更新用户状态：

```
<div id="fb-root"></div>
<div id="user-info"></div>
<div id="user-email"></div>
<div id="user-status" name="post"></div>
<button id="fb-auth">Login</button> 
```

我的目标是将这些更新的数据保存到 mongodb 中。

我尝试的是在检索帖子时强制提交表单并将数据传递到'name="post"'中，但是，这会使页面再次刷新，并且值显示未定义。

Javascript：

```
FB.api('/me/posts', { limit: 100 }, function(response) {
            var userStatus = document.getElementById('user-status');
            for (var i=0, l=response.data.length; i<l; i++) {
              var post = response.data[i];
              if (post.message) {
                userStatus.innerHTML = userStatus.innerHTML + ' ' + post.message ;

                var form = document.createElement('form');
                form.setAttribute('method', 'post');
                form.style.display = 'hidden';
                document.body.appendChild(form);
                form.submit();

              } else if (post.attachment && post.attachment.name) {
                alert('Attachment: ' + post.attachment.name);
              }
            }             
          }); 
```

app.js(req.param('post') 未定义，因此 mongodb 注入未定义数据）：

```
app.post('/', function(req, res){
  postProvider.save({
    posts: req.param('post')
  }, function(error, docs){
    res.redirect('/')
  });
}); 
```

任何建议将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:47:10.630

要获取表单数据，您必须使用：

```
req.body.post 
```

# asp.net - URL 中的无效字符

> ID：10926475
> 
> 赞同：0
> 
> 时间：2012-06-07T06:03:48.793
> 
> 标签：asp.net, iis-7

HTTP 错误 400.0 - 错误请求 ASP.NET 在 URL 中检测到无效字符。这是我的网址： [http ://dev2.socialboards.no/demo/questions/&page=2](http://dev2.socialboards.no/demo/questions/&page=2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T06:06:01.287

您应该使用`?`而不是`&`：

```
http://dev2.socialboards.no/demo/questions/?page=2

```

如果您有多个参数，那么您可以将它们分开`&`：

```
http://dev2.socialboards.no/demo/questions/?page=2&foo=bar

```

# php - 将对象转换为数组时删除 _（下划线）

> ID：10926478
> 
> 赞同：2
> 
> 时间：2012-06-07T06:03:57.153
> 
> 标签：php, arrays, zend-framework, naming-conventions

根据 Zend 框架命名约定，私有变量应该以 _（下划线）开头。但是在将对象转换为数组（强制转换）时会导致问题。数组元素键以“_”开头。如何在将对象转换为数组时删除下划线？

例如

```
class Book {
     private _name;
     private _price;
} 
```

将转换为

```
array('_name' => 'abc', '_price' => '100') 
```

我想删除数组元素键中的“_”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:15:40.787

没有一个确切的例子有点困难，但这应该很接近。基本上循环，找到以_开头的元素，删除它们并在数组中插入一个无下划线的元素

```
$arr = array(
  'foo1' => 'bar1',
  '_foo2' => 'bar2',
  '_foo3' => 'bar3'
);

foreach ($arr as $key => $val) {
     if (substr($key,0,1) == '_') {
         unset($arr[$key]);
         $arr[substr($key,1)] = $val;
     }
} 
```

在此之后，`$arr`将看起来像

```
Array
(
    [foo1] => bar1
    [foo2] => bar2
    [foo3] => bar3
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:09:40.170

我想也许你想要这样的东西：

```
//because of variable scope this method must be in the class where the private propeties are.
public function toArray() {
        $vars = get_object_vars($this);
        $array = array();
        foreach ($vars as $key => $value) {
            $array[ltrim($key, '_')] = $value;
        }
        return $array;
    } 
```

这将允许您调用`->toArray()`模型、视图或控制器。

# php - 获取表前缀

> ID：10926483
> 
> 赞同：15
> 
> 时间：2012-06-07T06:04:17.463
> 
> 标签：php, mysql, database, wordpress

连接数据库后有什么方法可以获取表前缀？

我正在使用 wordpress，我需要在整个 wordpress 安装之外获取表前缀。目前我的脚本连接到数据库，但我需要将表前缀合并到脚本的某些部分。

任何的想法 ？

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-07T07:33:23.217

```
<?php
    $root = realpath($_SERVER["DOCUMENT_ROOT"]);
    require "$root/wp-blog-header.php";

    function get_table_prefix() {
        global $wpdb;
        $table_prefix = $wpdb->prefix . "outsider_plugin";
        return $table_prefix;
    }
    // echo get_table_prefix();
?> 
```

谢谢麦克，你的想法帮助我解决问题，使用类似的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T06:09:00.867

在 WordPress 之外创建任何 PHP 文件，

```
<?php
    require('wp-blog-header.php');
    echo $wpdb->base_prefix;
?> 
```

请使用正确的`wp-blog-header.php`路径`require`

# dns - 如何检查我的胶水记录 ip 更新是否成功？

> ID：10926487
> 
> 赞同：2
> 
> 时间：2012-06-07T06:04:36.047
> 
> 标签：dns, nameservers

我在我的域名注册商 (Moniker) 处更改了胶水记录的 IP 地址。但是名称服务器仍然指向旧服务器。如何验证更新是否成功？

我试过`dig NS mydomain.com @a.gtld-servers.net.`了，它返回了旧的 IP 地址。所有根名称服务器都返回旧的 IP 地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:40:27.830

你的支票没问题。Moniker 没有向 TLD 提交您的新记录。检查绰号，因为 .com TLD 最多应在 5 分钟内更新粘合记录。

# ruby - 为 VIM 安装 RSense

> ID：10926489
> 
> 赞同：0
> 
> 时间：2012-06-07T06:04:50.383
> 
> 标签：ruby, linux, vim, text-editor

我正在尝试[`RSense`](http://cx4a.org/software/rsense/manual.html)在 Fedora 中安装 vim。我读[了这本手册](http://cx4a.org/software/rsense/manual.html)。我下载了 rsense 的 tar 球并解压。然后我将它复制到`root/opt`该页面上给出的目录中。然后我`vim/plugin`在 opt 目录中创建了一个目录并将其复制`rsense.vim`到 plugin 目录中。但是当我`:RSenseVersion`在 vim 编辑器中编写时，我收到一条命令无法识别的消息。我错过了什么？

到目前为止，我还没有按照[文档页面](http://www.ruby-lang.org/en/documentation/)`vim-ruby`上的方式安装插件。这个插件是干什么用的？不能单独解决我编写带有自动完成、代码提示的简洁 ruby​​ 代码的目的吗？`RSense`

![复制了那个插件](../Images/4f540b0df50b43f87221b4eafcfdb113.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:15:23.877

不，您没有[阅读手册](http://cx4a.org/software/rsense/manual.html#Install_Vim_Plugin)。

处理完所有依赖项后，您必须将插件放入`~/.vim/plugin`.

至于 vim-ruby 和 RSense 之间的区别，我不做 Ruby 所以我不确定。快速查看他们的文档，看起来它们的范围非常不同，并且功能略有重叠。我会同时安装：vim-ruby 用于所有低级 Vim 调优，RSense 用于其所谓的代码智能。

但我有一种感觉，它们都不会帮助您编写“整洁”的 ruby​​ 代码。只有*你的*编程/红宝石技能会。

# c# - 无法设置 asp 的值属性：文本框

> ID：10926493
> 
> 赞同：0
> 
> 时间：2012-06-07T06:05:37.153
> 
> 标签：c#, asp.net

我正在使用asp文本框。在后面的代码中，即在cs页面中，无法通过 id.Value="xy" 设置值；

请帮帮我。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:07:30.973

`TextBox`类`Text`有财产。

尝试，标记：

```
<asp:TextBox id="txt1" runat="server"/>
<asp:TextBox id="txt2" runat="server" Text="Hello"/> 
```

后面的代码：

```
txt1.Text="Hello"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:17:50.470

您应该在 .aspx 页面中有您的文本框，如下所示：

```
<asp:TextBox runat="server" ID="TextBox1"></asp:TextBox> 
```

然后在你的页面后面的代码中，像这样：

```
TextBox1.Text = "your text here"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:12:09.310

看看它是否是标签它具有`value`显示文本的属性

```
 lbl.value ="labeltext" 
```

如果是 textBox 它具有`Text`显示文本的属性

```
 txt.Text ="textboxtext" 
```

# iphone - 如何限制 uilabel 仅在特定框架内拖动？

> ID：10926494
> 
> 赞同：1
> 
> 时间：2012-06-07T06:05:40.930
> 
> 标签：iphone, uilabel, uigesturerecognizer, pan, uipangesturerecognizer

我在 imageview 中添加了一个标签，并添加了用于拖动标签的 Pangesture。使用此代码标签在整体内拖动。但我只想将标签拖动限制在 uiimageview 的框架内。我怎样才能做到这一点？添加标签和手势的代码如下。

```
lblQuote=[[UILabel alloc]init];

        lblQuote.frame=CGRectMake(130,380, 400,100);
        lblQuote.userInteractionEnabled=TRUE;
        lblQuote.backgroundColor=[UIColor clearColor];
        lblQuote.userInteractionEnabled=TRUE;
        lblQuote.lineBreakMode=UILineBreakModeWordWrap;
        lblQuote.font=[UIFont systemFontOfSize:40.0];    
        lblQuote.tag=500;
        lblQuote.text=@"";

        CGSize maximumLabelSize = CGSizeMake(296,9999);

        CGSize expectedLabelSize = [strQuote sizeWithFont:lblQuote.font 
                                        constrainedToSize:maximumLabelSize 
                                            lineBreakMode:lblQuote.lineBreakMode]; 

        //adjust the label the the new height.
         int nooflines=expectedLabelSize.height/16.0;
        lblQuote.numberOfLines=nooflines;

        // CGRect newFrame = lblQuote.frame;
        //newFrame.size.height = expectedLabelSize.height;
        // yourLabel.frame = newFrame;

        lblQuote.textAlignment=UITextAlignmentCenter;

        UIPanGestureRecognizer *gesture = [[[UIPanGestureRecognizer alloc] 
                                            initWithTarget:self 
                                            action:@selector(labelDragged:)] autorelease];
        [lblQuote addGestureRecognizer:gesture];

- (void)labelDragged:(UIPanGestureRecognizer *)gesture
{
    UILabel *label = (UILabel *)gesture.view;
    CGPoint translation = [gesture translationInView:label];

    // move label
    label.center = CGPointMake(label.center.x + translation.x, 
                               label.center.y + translation.y);

    // reset translation

    [gesture setTranslation:CGPointZero inView:label];
} 
```

我尝试在触摸事件上移动标签。代码如下：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
     UITouch *touch = [touches anyObject];
    CGPoint pointMoved = [touch locationInView:imgView2];  
    lblQuote.frame=CGRectMake(pointMoved.x, pointMoved.y, lblQuote.frame.size.width, lblQuote.frame.size.height);

} 
```

但是移动不如平移手势识别器平滑。有时触摸是在另一个方向上，而在另一个方向上标记移动，有时或多或少的移动比触摸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:09:06.427

好吧，这完全取决于您的逻辑，尽管我为您编写了代码，希望这对您有所帮助！确保您的 UILabel UserIntraction 设置为 YES；并使用触摸开始和触摸移动方法而不是pangesture ....现在看这个

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  UITouch *touch = [[event allTouches]anyObject];
  if([touch view] == lblName)
  {
    NSLog(@"touch on label");
    CGPoint pt = [[touches anyObject] locationInView:lblName];
    startLocation = pt;
    // startLocation is a CGPoint declare globaly in .h..and lblName is your UILabel
  }
}

- (void) touchesMoved:(NSSet *)touches withEvent: (UIEvent *)event 
{
   UITouch *touch = [[event allTouches]anyObject];
   if([touch view] == lblName)
   {
     CGPoint pt = [[touches anyObject] previousLocationInView:lblName];
     CGFloat dx = pt.x - startLocation.x;
     CGFloat dy = pt.y - startLocation.y;
     CGPoint newCenter = CGPointMake(lblName.center.x + dx, lblName.center.y + dy);

    //now put if condition for dragging in specific area

    CGFloat min_X = lblName.center.x + dx - lblName.frame.size.width/2.0;
    CGFloat max_X = lblName.center.x + dx + lblName.frame.size.width/2.0;
    CGFloat min_Y = lblName.center.y + dy - lblName.frame.size.height/2.0;
    CGFloat max_Y = lblName.center.y + dy + lblName.frame.size.height/2.0;

    if((min_X >= imageView.frame.origin.x && max_X <=  imageView.frame.origin.x +  imageView.frame.size.width) && (min_Y >=  imageView.frame.origin.y && max_Y <=  imageView.frame.origin.y +  imageView.frame.size.height))
    {
        lblName.center = newCenter;
    }
  }
} 
```

# android - 如何连续运行 onLongClick 事件？

> ID：10926499
> 
> 赞同：2
> 
> 时间：2012-06-07T06:06:48.220
> 
> 标签：android, button, onclick, forward

是否可以使用 onLongClick 按钮事件实现快进按钮？

**编辑**

> 我在 onlongclicklistner 中使用了 runnable 并添加了代码以供需要的人参考:)

```
 Button.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {

            final Runnable r = new Runnable()
            {
                public void run() 
                {//do the forwarding logic here

                     if(Button.isPressed()){

                            Button.postDelayed(this, 1000); //delayed for 1 sec
                        }else{

                        Button.postInvalidate();
                        Button.invalidate();
                        }
                }
            };

            Button.post(r);

            return true;
            }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:21:00.203

1.  在您的`onLongClick`事件中，将成员变量（例如：）设置`mShouldFastForward`为`true`.

2.  在您的其余代码中（可能播放的每一帧？）检查是否`mShouldFastForward == true`；如果是这样，则对该帧执行快进。

3.  使用`onTouch`事件来捕获`MotionEvent.ACTION_UP`以设置`mShouldFastForward`为`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:23:16.303

我已经在这个项目中完成了（该项目尚未完成（即抛光）但快进工作）：

[https://bitbucket.org/owentech/epileptic-gibbon-android](https://bitbucket.org/owentech/epileptic-gibbon-android)

看看 playerfragment.java ：

我通过使用线程快进媒体播放器来处理这个问题。

项目中的示例代码：

```
/*******************************/
/* Fast-Forward button actions */
/*******************************/

ffbutton.setOnTouchListener(new View.OnTouchListener() {

@Override
public boolean onTouch(View arg0, MotionEvent event) {

   switch (event.getAction() ) { 

       case MotionEvent.ACTION_DOWN: 

           arrays.fastforwardpressed = true;
           FastForwardThread newFFThread = new FastForwardThread();
           arrays.fastforwardfrom = mp.getCurrentPosition();
           arrays.fastforwardto = arrays.fastforwardfrom;

           newFFThread.start();
           break;

       case MotionEvent.ACTION_UP:

           arrays.fastforwardpressed = false;
           mp.seekTo(arrays.fastforwardto);
           break; 

    }

    return true;
  }
});

public class FastForwardThread extends Thread
{
    public FastForwardThread()
    {
        super("FastForwardThread");
    }

    public void run()
    {
        while (arrays.fastforwardpressed == true)
        {

            arrays.fastforwardto = arrays.fastforwardto + 10000;
            int fastforwardseconds = arrays.fastforwardto / 1000;
            int hours = fastforwardseconds / 3600, remainder = fastforwardseconds % 3600, minutes = remainder / 60, seconds = remainder % 60;

            String Hours = Integer.toString(hours);
            String Minutes = Integer.toString(minutes);
            String Seconds = Integer.toString(seconds);

            if (Hours.length() == 1)
            {
                Hours = "0" + Hours;
            }

            if (Minutes.length() == 1)
            {
                Minutes = "0" + Minutes;
            }

            if (Seconds.length() == 1)
            {
                Seconds = "0" + Seconds;
            }

            arrays.formattedfftime = Hours + ":" + Minutes + ":" + Seconds;

            fastforwardHandler.sendEmptyMessage(0);

            try
            {
                sleep(100);
            } catch (InterruptedException e)
            {
                e.printStackTrace();
            }
        }
    }
    } 
```

# c# - 如何在wpf中获取当前应用程序路径

> ID：10926506
> 
> 赞同：10
> 
> 时间：2012-06-07T06:07:20.950
> 
> 标签：c#, wpf

```
public XML()
{
    this.InitializeComponent();

    XmlDocument document_name = new XmlDocument();       
    XmlElement student = document_name.CreateElement("Student");
    XmlElement name = document_name.CreateElement("Chandru");
    student.AppendChild(name);
    document_name.AppendChild(student);
    XmlAttribute id = document_name.CreateAttribute("ID");
    name.SetAttributeNode(id);
    id.Value = "sst5038";
    XmlElement fname = document_name.CreateElement("FName");
    fname.InnerText = "Anjappn";
    name.AppendChild(fname);
    XmlElement mname = document_name.CreateElement("MName");
    mname.InnerText = "Thaiyamuthu";
    name.AppendChild(mname);
    document_name.AppendChild(student);
    document_name.Save(@"D:\student.xml");
} 
```

使用上面的代码。我在 wpf 中创建了一个 xml 文件作为代码，并将此文件保存在我的本地磁盘 D:\student.xml

```
 document_name.Save(@"D:\student.xml"); 
```

但我想将此 xml 文件（student.xml）保存在我现在正在工作的项目文件中。

我该怎么做。

请帮我...

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-07T06:15:17.120

这是您要找的房产吗？

```
System.AppDomain.CurrentDomain.BaseDirectory 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T06:14:51.463

采用

```
Directory.GetCurrentDirectory(); 
```

它在 WPF 和 Winforms 中都有效，因为它是 C# 中的一个函数，并不特定于 WPF 或 Winforms。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T06:14:17.477

`System.IO.Directory.GetCurrentDirectory();`会帮助你。请注意，返回的字符串不以反斜杠结尾。

# java - java swing - 为面板和里面的所有面板设置背景

> ID：10926509
> 
> 赞同：1
> 
> 时间：2012-06-07T06:07:43.473
> 
> 标签：java, swing, transparency, jpanel

我有一个 jpanel 和内部 jpannels。
当我动态设置面板背景时，内部颜色不会改变。
初始化：

```
 myPanel.setOpaque(true) 
```

进而

```
 myPanel.setBackground(...) 
```

有没有一种解决方案可以在不循环或直接设置的情况下将背景设置为所有内部框架？
谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T06:09:49.510

不，但如果您将内部面板设置为不透明（透明），您可以直接更改外部面板：

```
inner.setOpaque(false); 
```

您始终可以创建一个可以使用的类，而不是`JPanel`：

```
class TransparentJPanel extends JPanel {
    {
        setOpaque(false);
    }
} 
```

* * *

完整示例：

```
static class TransparentJPanel extends JPanel {{
    setOpaque(false);
}}

public static void main(String... args) throws Exception {

    JFrame frame = new JFrame("Test");

    final JPanel panel;

    frame.add(panel = new JPanel() {{
        add(new TransparentJPanel());
        add(new TransparentJPanel());
        add(new TransparentJPanel());
    }}, BorderLayout.CENTER);

    frame.add(new JButton(new AbstractAction("Toggle") {

        @Override
        public void actionPerformed(ActionEvent e) {
            if (panel.getBackground().equals(Color.RED))
                panel.setBackground(Color.GREEN);
            else
                panel.setBackground(Color.RED);
        }
    }), BorderLayout.SOUTH);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400, 300);
    frame.setVisible(true);
} 
```

# php - 允许用户使用 PHP 下载外部图像

> ID：10926511
> 
> 赞同：1
> 
> 时间：2012-06-07T06:08:04.923
> 
> 标签：php, image, file, download, transfer

我进行了设置，因此如果图像托管在我的网站上，用户可以通过单击按钮下载图像，但它不适用于外部图像。是否可以使用外部图像（使用 URL）来执行此操作，而无需先将其复制到我服务器上的文件夹中？

这是我在我自己的网站上使用的图像。

```
$str = $_GET['image'];
$img_name = substr(strrchr($str, '/'), 1);
$image = "../u/i/".$img_name;

if (file_exists($image)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($image));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($image));
    ob_clean();
    flush();
    readfile($image);
    exit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:10:49.023

正如您在[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)上看到的，您可以使用外部 URL。

> 如果启用了[fopen 包装器](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)，则 URL 可以用作此函数的文件名。有关如何指定文件名的更多详细信息，请参阅[fopen() 。](http://www.php.net/manual/en/function.fopen.php)请参阅[支持的协议和包装](http://www.php.net/manual/en/wrappers.php)器以获取有关各种包装器具有哪些功能的信息的链接、有关其使用的说明以及有关它们可能提供的任何预定义变量的信息。

这是一个 PHP 设置：[http ://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

（代码不需要更改。）

# android - 如何找到安卓设备的IP地址？

> ID：10926513
> 
> 赞同：0
> 
> 时间：2012-06-07T06:08:25.640
> 
> 标签：android

> **可能重复：**
> [如何获取设备的 IP 地址？](https://stackoverflow.com/questions/6064510/how-to-get-ip-address-of-the-device)

是否可以使用某些程序？这是我的代码

```
TextView ip_address = (TextView) findViewById(R.id.tv1);
WifiManager wifimanager= (WifiManager) getSystemService(WIFI_SERVICE);
List<String> lsit =  wifimanager.getConfiguredNetworks(); 
WifiConfiguration wc = (String)lsit.get(0); 
ip_address.setText("\n"+ Formatter.formatIpAddress(wifimanager.getConnectionInfo().getIpAddress())); 
```

# xml - 使用 XSL 在第一个位置插入 XML 节点

> ID：10926518
> 
> 赞同：4
> 
> 时间：2012-06-07T06:09:10.070
> 
> 标签：xml, xslt, xmlstarlet

如果导入不存在，XSLT 当前将插入导入

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    ...
    ...
    <Import Project="$(SolutionDir)BuildShared.targets" />
</Project> 
```

我需要它作为第一个节点插入

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="$(SolutionDir)BuildShared.targets" />
    ...
    ...
</Project> 
```

模板.xsl;

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ms="http://schemas.microsoft.com/developer/msbuild/2003">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match='@*|node()'>
        <xsl:copy>
            <xsl:apply-templates select='@*|node()'/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/ms:Project[not(ms:Import[@Project='$(SolutionDir)BuildConfiguration.targets'])]">
        <xsl:copy>          
            <xsl:apply-templates select="node()|@*"/>
            <Import xmlns="http://schemas.microsoft.com/developer/msbuild/2003" Project="$(SolutionDir)BuildConfiguration.targets"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

交换 import 和 apply-templates 行给出；

`runtime error: file template.xsl line 9 element copy`

`Attribute nodes must be added before any child nodes to an element.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T06:22:34.817

只做你的`xsl:apply-templates`for`node()`和`@*`分开：

```
<xsl:template match="/ms:Project[not(ms:Import[@Project='$(SolutionDir)BuildConfiguration.targets'])]">
    <xsl:copy>          
        <xsl:apply-templates select="@*"/>
        <Import xmlns="http://schemas.microsoft.com/developer/msbuild/2003" Project="$(SolutionDir)BuildConfiguration.targets"/>
        <xsl:apply-templates select="node()"/>
    </xsl:copy>
</xsl:template> 
```

# c# - 使用 .Net 应用程序将数据推送到 Salseforce 应用程序

> ID：10926521
> 
> 赞同：0
> 
> 时间：2012-06-07T06:09:46.123
> 
> 标签：c#, salesforce

Net 应用程序将数据推送到销售人员应用程序。我没有找到可以帮助我实现这一目标的 dll 或插件。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:58:51.820

有很多不同的选择，这里有一些：

*   [SOAP API](http://www.salesforce.com/us/developer/docs/api/index.htm) - 通过转到设置 > 开发 > API > 生成企业 WSDL，从 Salesforce 获取您的组织的 enterprise.wsdl 文件。然后使用 Visual Studio 导入 wsdl 文件来创建代理类。
*   [REST API](http://www.salesforce.com/us/developer/docs/api_rest/index.htm)
*   [批量 API](http://www.salesforce.com/us/developer/docs/api_asynch/index.htm)
*   [数据加载器](http://wiki.developerforce.com/page/Data_Loader)（有助于从 .csv 文件进行更新）

# c# - 如何在 Java 和 C# 中捕获和处理语音？

> ID：10926525
> 
> 赞同：1
> 
> 时间：2012-06-07T06:09:56.487
> 
> 标签：c#, java

我计划从事一个项目，其中将有一个功能，如语音捕获并通过套接字发送并在另一端播放。现在我需要知道 Java 或 C# 中是否有关于处理原始格式的语音数据的 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:01:25.997

对于 C#，您可以使用 NAudio 库进行声音捕获和播放。对于 JAVA，您可以使用`javax.sound.sampled`Package 进行音频捕获和播放。如果要对其进行编码，请使用[jspeex 之](http://jspeex.sourceforge.net/)类的第三方库进行编码和解码。使用内置的网络库来发送它们。

**更新：**

对于 C# 尝试[SharpDX](http://sharpdx.org/)。这是 DirectX 的托管版本，并且具有您需要的所有功能（不知道它是否适合您的项目）。

# math - Cocos2D/Math - 干净的角度转换

> ID：10926528
> 
> 赞同：2
> 
> 时间：2012-06-07T06:10:04.093
> 
> 标签：math, cocos2d-iphone

早上好！

我只是想磨练我的数学能力，尤其是关于 Cocos2D 的一些问题。由于 Cocos2D 想要“简化”事物，所有精灵都有一个旋转属性，范围从 0-360（359？）CW。这迫使你在处理像 atan 这样的函数时做一些相当（对我来说）令人费解的转换。

所以 f.ex. 这种方法：

```
- (void)rotateTowardsPoint:(CGPoint)point
{    
    // vector from me to the point
    CGPoint v = ccpSub(self.position, point);

    // ccpToAngle is just a cute wrapper for atan2f
    // the macro is self explanatory and the - is to flip the direction I guess
    float angle = -CC_RADIANS_TO_DEGREES(ccpToAngle(v));

    // just to get it all in the range of 0-360
    if(angle < 0.f)
        angle += 360.0f;

    // but since '0' means east in Cocos..
    angle += 180.0f;

    // get us in the range of 0-360 again
    if(angle > 360.0f)
        angle -= 360.0f;

    self.rotation = angle;
} 
```

按预期工作。但在我看来，这似乎是一种蛮力。**有没有更清洁的方法来达到同样的效果？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:38:45.240

做就够了

```
float angle = -CC_RADIANS_TO_DEGREES(ccpToAngle(v));
self.rotation = angle + 180.0f; 
```

等价变换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:31:33.730

```
// vector from me to the point
    CGPoint v = ccpSub(self.position, point); 
```

实际上，这是从点到你的向量。

```
// just to get it all in the range of 0-360 
```

你不需要这样做。

# c# - 将gridview的单元格值与文本框值进行比较

> ID：10926534
> 
> 赞同：0
> 
> 时间：2012-06-07T06:10:57.247
> 
> 标签：c#, asp.net

我有一个带有 6 列 `(SAPUserID ,SAPDescription,SAPPassword,OSUserID,OSDescription,OSPassword)`和一个`CHANGE PASSWORD`按钮的 gridview。单击此按钮后`pnlChangePwd`，网格视图下方的面板 ( ) 变为可见，其中包含 3 个文本框`(User ID, New Password, Confirm Password)`和一个按钮。`Save`目前，如果我输入与旧密码相同的新密码，它会接受。如何`txtNewPassword`在网格视图中将值与 SAPPassword 或 OSPassword 的单元格值进行比较？

注意：根据用户想要的数据（SAP 或 OS），一次只能看到 3 列

网格视图的代码：

```
<asp:GridView runat="server" ID="gvPassInfo" AutoGenerateColumns="false" 
                          CellPadding="4" ForeColor="#333333" GridLines="Both" DataKeyNames="user_id" 
                          CssClass="Gridview"  OnRowEditing="gvPassInfo_RowEditing"
                          OnRowCommand="gvPassInfo_RowCommand"  OnRowDataBound="gvPassInfo_RowDataBound">
                <RowStyle BackColor="#EFF3FB" />
                <Columns>                                       
                    <asp:TemplateField HeaderText="User ID" Visible="false">
                        <ItemTemplate>
                            <asp:Label ID="lblSAPUserId" runat="server">
                            </asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="User ID" Visible="false">
                        <ItemTemplate>
                            <asp:Label ID="lblOSUserId" runat="server">
                            </asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Description" Visible="false">
                        <ItemTemplate>
                            <asp:Label ID="lblSAPDescription" runat="server">
                            </asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Description" Visible="false">
                        <ItemTemplate>
                            <asp:Label ID="lblOSDescription" runat="server">
                            </asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Password" Visible="false">
                        <ItemTemplate>
                            <asp:Label ID="lblSAPPassword" runat="server">
                            </asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Password" Visible="false">
                        <ItemTemplate>
                            <asp:Label ID="lblOSPassword" runat="server">
                            </asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Change Password">
                        <ItemTemplate>
                            <asp:ImageButton ID="ImgBtnChangePass" runat="server" ImageUrl="~/images/PW.jpg" CausesValidation="false"
                                             CommandName="Edit" />
                        </ItemTemplate>
                    </asp:TemplateField>

                </Columns>
                <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
                <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                <EditRowStyle BackColor="#2461BF" />
                <AlternatingRowStyle BackColor="White" />
            </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:03:26.043

这是保存按钮的代码

```
 var currentRow = gvPassInfo.Rows.OfType<GridViewRow>().Single(r => ((Label)r.FindControl("lblSAPUserId")).Text == txtUserId.Text);
    bool doesMatch = ((Label)currentRow.FindControl("lblOSPassword")).Text == "NewPassword"; 
```

但是，最好在您绑定到网格的集合中搜索密码。

# javascript - 在 Visio Web Access ASPX 中自动缩放以适应

> ID：10926535
> 
> 赞同：1
> 
> 时间：2012-06-07T06:11:16.110
> 
> 标签：javascript, asp.net, web-services, sharepoint-2010, visio

这个问题也在[sharepoint.stackexchange.com](https://sharepoint.stackexchange.com/questions/37588/automatically-zoom-to-fit-in-visio-web-access-aspx)上，但未能获得意见或回复，所以我在这里发布。

我正在尝试设置通过 Visio Web 服务显示的 Visio 文档的缩放级别。

`http://mysite/_layouts/VisioWebAccess/VisioWebAccess.aspx?id=/Shared%20Documents/MyDiagram.vdw`

我想使用通过按下工具栏右侧的按钮来实现的“适合页面”缩放级别。我的第一个想法是通过 javascript 单击按钮，但没有立即成功，还偶然发现了[有关 Visio Services JavaScript API 中的对象](http://msdn.microsoft.com/en-us/library/ff464325.aspx)、[Vwa.VwaControl.getActivePage 方法](http://msdn.microsoft.com/en-us/library/ff394630.aspx)和[Vwa.Page.setZoom 方法](http://msdn.microsoft.com/en-us/library/ff394610.aspx)的 MSDN 文章。

我可以成功构造一个`VwaControl`对象

```
vwaControl = new Vwa.VwaControl("ctl00_PlaceHolderMain_VisioWebAccess"); 
```

但是`null`当我调用`getActivePage()`这个控件时我得到了。

我尝试`VwaControl`使用页面中的其他 ID 构建其他 ID，但它们都不是有效的 - 我收到类似“ID {0} 的 VwaControl 不存在”的错误。我尝试从 vwaControl._control._zoomControl._fitButton._clickDelegate 遍历树，但我不知道如何触发该委托。

有没有人在页面中实现了“自动缩放以适应”功能`VisioWebAccess.aspx`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:34:55.060

[请参阅sharepoint.stackexchange.com](https://sharepoint.stackexchange.com/a/38795/7923)上的答案- 缩放和定位保存在文档中，因此请将其设置在那里。我无法使用 javascript 控制缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T01:54:54.997

如果您遵循[getZoom 文档](http://msdn.microsoft.com/en-us/library/ff394536.aspx)中的示例，即向“diagramComplete”添加处理程序，您可以获得对活动页面的有效引用......即

```
function zoomVWAControl()
{

    vwaControl= new Vwa.VwaControl("WebPartWPQ2");  
    vwaControl.addHandler("diagramcomplete", onDiagramComplete);
}

function onDiagramComplete()
{

 try{
        vwaPage = vwaControl.getActivePage();
        var zoomLevel = vwaPage.getZoom();
        vwaPage.setZoom(Number(200));
    }
    catch(err){
        alert(err);
    }
} 
```

# java - Hibernate Criteria API 结果缩小外键

> ID：10926536
> 
> 赞同：2
> 
> 时间：2012-06-07T06:11:23.720
> 
> 标签：java, hibernate, hibernate-criteria

我在我的网络项目中使用 Hibernate Criteria API。目前我陷入了一个严重的问题。我有以下情况。

![在此处输入图像描述](../Images/ceee03f9bf815018c1cc185ceab58e23.png)

我想获取特定学校的所有学生（例如 S_ID=1），但无法这样做。问题是我不知道要为标准添加什么限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:15:05.253

尝试：

```
 session.createCriteria(Student.class).createAlias("your_class_property", "class").createAlias("class.your_school_property", "school").add(Restrictions.eq("school.id", 1)).list() 
```

# c# - 使用多个参数从 c# 调用 Asp.net Web API

> ID：10926538
> 
> 赞同：2
> 
> 时间：2012-06-07T06:11:35.767
> 
> 标签：c#, asp.net

我有一个带有参数的 web api。我正在尝试从另一个应用程序调用 api。这在客户端使用不是问题，但我找不到在 C# 的服务器端执行此操作的方法。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:15:22.483

[您可以使用WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)从任何桌面或服务器端应用程序调用 Web API 。

```
var webClient = new WebClient();
webClient.Headers["Content-Type"] = "application/json";
webClient.Headers["X-JavaScript-User-Agent"] = "Google APIs Explorer";

var json = Newtonsoft.Json.JsonConvert.SerializeObject(new { longUrl = url });
var data = webClient.UploadString("https://www.googleapis.com/urlshortener/v1/url?pp=1", json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:41:05.927

[http://weblogs.asp.net/pglavich/archive/2012/02/18/mvc4-and-web-api-make-an-api-the-way-you-always-wanted-part-1.aspx](http://weblogs.asp.net/pglavich/archive/2012/02/18/mvc4-and-web-api-make-an-api-the-way-you-always-wanted-part-1.aspx)

上面的链接对我来说非常有用。

# javascript - 将标签附加 到文本区域 jquery 中的值

> ID：10926541
> 
> 赞同：3
> 
> 时间：2012-06-07T06:11:53.927
> 
> 标签：javascript, jquery

您如何在
文本区域内的值上附加标签，它仅在按下 SHIFT+ENTER 键后附加，

这是我要附加在文本区域的代码，但它不起作用？？

`$('#textarea').append("<br/>");`我认为还有一些不足之处。

[**演示**](http://jsfiddle.net/ctyQZ/32/)

谢谢你。. .

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T06:14:12.673

你真的想把字符放在值中吗？

```
​$("textarea").val(function(i,v){
    return v + "<br/>";
});​​​​ 
```

或者只是添加一个新行？

```
​$("textarea").val(function(i,v){
    return v + "\nfoo";
});​​​​​​​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/SNeyy/](http://jsfiddle.net/jonathansampson/SNeyy/)

如果您只想回复`shift`+ `enter`：

```
$("textarea").on("keypress", function(e){
    if ( e.which === 13 && e.shiftKey ) {
        $(this).val(function(i,v){
            return v + "<br/>"; // or return v + "\n"; (whatever you want)
        });
    }
});​​​​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/SNeyy/1/](http://jsfiddle.net/jonathansampson/SNeyy/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T06:13:42.207

您正在尝试更改`textarea`. 要添加字符串“<br/>”，您必须使用

```
$('#textarea').val($('#textarea').val() + '<br/>'); 
```

并添加一个新行，你必须使用

```
$('#textarea').val($('#textarea').val() + "\n"); 
```

Textarea 只能有一个文本节点作为其子节点。`<textarea><br/></textarea>`是不正确的用法。如果要添加字符串“<br/>”，html代码应该是

```
<textarea>&lt;br/&gt;</textarea> 
```

并添加一个新行，html代码应该是

```
<textarea>
</textarea> 
```

换句话说，您**不能**使用`<textarea><br/></textarea>`

# ios - 关闭全屏模式时，不会调用 viewWillLayoutSubviews 方法

> ID：10926543
> 
> 赞同：1
> 
> 时间：2012-06-07T06:12:09.647
> 
> 标签：ios, ipad, uikit

我正在尝试找出一个问题，即在关闭使用显示的控制器后没有调用`viewWillLayoutSubviews`(and ) 方法 -`viewDidLayoutSubviews`

```
[self presentModalViewController:controller animated:YES]; 
```

并解雇

```
[self dismissModalViewControllerAnimated:YES];. 
```

`UISplitViewController`作为在详细信息区域中按下按钮的结果，此视图控制器显示在顶部。当我旋转设备时，没有模式向上，我确实得到了`viewWillLayoutSubviews`回调。但是，问题是，当我在模型展示期间旋转时，它不会正确更新视图并在关闭它后重新计算视图边界。根据 IOS 5 发行说明，我应该`viewDidLayoutSubviews`在关闭模态视图控制器后得到一个。

作为比较，我创建了一个没有任何其他代码的简单应用程序，它的工作方式与文档一致，它会`viewWillLayoutSubviews`在模式被关闭后调用。

我一直在检查我的真实应用程序代码，找不到任何错误。我正在寻找可以帮助解决这个问题的建议。为什么回调会在旋转时起作用，但在模态消失时不起作用？这可能与我的视图层次结构有关吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:29:19.383

尝试使用委托方法`viewWillAppear`而不是`viewWillLayoutSubviews`. WillLayoutSubviews 仅在视图的边界发生变化时调用（当您旋转设备时会发生这种情况）。

# graphics - 旋转向量与四元数

> ID：10926546
> 
> 赞同：12
> 
> 时间：2012-06-07T06:12:30.553
> 
> 标签：graphics, matrix, rotation

旋转向量通过直接存储旋转轴和角度大小来表示旋转。

四元数似乎更多地用于表示旋转。为什么在计算机图形学中四元数比旋转向量更受欢迎？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-07T07:27:52.123

当然，对于计算机来说，四元数更容易计算（作为人类，你不应该为 3D 旋转而烦恼）：

*   当你想在向量表示中连接两个旋转时你会怎么做？您必须将它们转换为四元数或矩阵形式（使用昂贵的三角函数）才能做到这一点（并且可能再次返回），而四元数可以通过使用经典的四元数乘法有效地连接。

*   当您想使用矢量格式的旋转来旋转点/矢量或将其作为矩阵发送到 GL/D3D 时，您会怎么做？您将其转换为矩阵（再次使用昂贵的三角函数）。另一方面，四元数非常有效地转换为矩阵，因为它已经编码了所需的正弦和余弦。

所以矩阵和四元数是更合适的旋转表示。这两个四元数更加紧凑，并且它们也很容易转换为轴角表示（然后再转换回来），尽管使用三角函数。因此，如果您需要外围设备的轴角信息（只有我们人类有时需要实际的旋转轴和角度，计算机并不真正关心）您仍然可以使用它，但对于内部表示和计算，四元数或矩阵是一个更好的选择。

*如果四元数的“3维复数”*解释一开始看起来有点沉重，请不要理会它们的确切数学基础。刚开始了解它们是如何工作的以及如何使用它们。实际上，它们只是一种轴角表示，但具有隐式编码的正弦和余弦，这是高效转换和计算所必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:32:44.537

要很好地解释为什么使用四元数并且有时优于向量的潜在原因，请参阅[这篇非常有趣的文章](http://www.gamedev.net/page/resources/_/technical/math-and-physics/do-we-really-need-quaternions-r1199)。在[这个冗长但有见地的线程](http://www.gamedev.net/topic/25314-why-diana-grubers-wrong-about-quats/)中，您会发现关于四元数有用性的反对意见。

TL;DR - 作者的观点是，我们实际上并不需要四元数，但由于它们错综复杂的性质，它们似乎对程序员非常有吸引力。使用四元数表达的所有操作都可以使用向量来表达。不过这个观点颇有争议。

# html - 如何防止 TD 包装 2 个 div

> ID：10926547
> 
> 赞同：1
> 
> 时间：2012-06-07T06:12:32.157
> 
> 标签：html, css

我有一张有两个 div 的 td 表。我希望这两个 div 都排成一行，但是随着列数的增加，第二个 div 会被包裹起来。我不想为每列设置固定宽度。

HTML td 结构：

```
<td class="tableHead"> 
  <div class="tableHeadTxt">Lorem Ipsum</div> 
  <div class="toggler togglerImgCollapse"> </div>  
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:17:18.567

1.  `div.tableHeadTxt`应该得到一个`white-space: nowrap;`CSS。这将使它不换行文本，因此第二个`div`是强制的。

2.  `td.tableHead div.tableHeadTxt, td.tableHead div.toggler`应该得到一个`float: left;`CSS。这确保它将内联渲染。

3.  在另外两个之后，您需要第三个`div`，它附加了一个`clear: both; height: 0; width: 100%;`CSS。这确保了`td`尽管只有内联元素，但仍保持适当的高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:23:06.953

嘿，现在你可以这样做

**`white-space:nowrap;`在**您的 css中****使用**并给**父 div**这个属性**

 **和**子 div**`display:inline-block;`在您的**css 文件**中定义

 ****CSS**

```
.tableHead{
border:solid 1px red;
    white-space:nowrap;
}

td.tableHead > div{
border:solid 1px green;
    display:inline-block;
} 
```

**HTML**

```
<table>
    <tr>

<td class="tableHead">
  <div class="tableHeadTxt">Lorem Ipsum</div>
  <div class="toggler togglerImgCollapse">Lorem Ipsum </div>  
</td>
    </tr></table> 
```

现场演示[http://jsfiddle.net/2965K/](http://jsfiddle.net/2965K/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:25:52.160

在你的 div 中使用 float

```
<table>
    <tr>
        <td class="tableHead">
            <div class="tableHeadTxt" style="float:left">Lorem Ipsum</div>
            <div class="toggler togglerImgCollapse" style="float:left">pbaris</div>  
        </td>       
    </tr>
</table> 
```

[http://jsfiddle.net/gkzdG/](http://jsfiddle.net/gkzdG/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T06:06:04.360

我正在使用这些行：

```
<div style="background: transparent url("../Images/20_20.png") no-repeat center; height: 20px; width:80px; ">
        <span  style=" background: transparent url("../Images/ObjectType/10_10.png") no-repeat center; height: 20px; width:80px; height: 20px; width:20px; margin-left:40px; ">  &nbsp;</span>
</div> 
```

希望它可以帮助你。****

# javascript - 如何在 php 中使用 jquery 美化警报消息？

> ID：10926548
> 
> 赞同：1
> 
> 时间：2012-06-07T06:12:35.047
> 
> 标签：javascript, jquery, uialertview, alert

根据我的编程条件，我有太多的警报消息，我想美化它们，因为这看起来很正常和奇怪。

```
if(True)
{
   echo "<script>alert('blah blah blah');</script>";
}

if(False)
{
   echo "<script>alert('blah blah blah');</script>";
} 
```

我尝试了太多 jquery 插件，但它们可以处理一些特定事件，如 onclcik、onblur、onhover、onload、onsubmit ......

在上面的代码中，我如何在不使用任何事件的情况下自定义警报消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:16:18.677

使用 jQuery UI 对话框。

它可以像警报一样直接打开。只需将您的消息写到像 div 这样的元素，以及它是如何准备好的。

请参阅[jQuery ui 对话框](http://jqueryui.com/demos/dialog/)

示例代码：

js：

```
<script>
    $(function() {
        $( "#dialog" ).dialog();
    });
    </script> 
```

html:

```
<div id="dialog" title="My Alert">
    <p>Blah blah blah</p>
</div> 
```

尽可能避免使用模态消息。它们可能很烦人，因为你的整个屏幕都被锁定了。警报也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:19:35.297

调用alert函数时弹出的框，不能通过css自定义。它是一个浏览器组件，因此从浏览器而不是页面中获取样式。所以你必须使用像[jquery ui dialog这样的弹出对话框](http://jqueryui.com/demos/dialog/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T06:16:14.980

您可以将[jQuery UI](http://jqueryui.com/)用于自定义警报（模式对话框）。

在这里试试：http: [//jqueryui.com/demos/dialog/#modal-message](http://jqueryui.com/demos/dialog/#modal-message)

PS：`echo`JavaScript 中没有。

![在此处输入图像描述](../Images/7c57c057be2c705e5f08a785e008021b.png)

> 漂亮的模态对话框！

# 代码：

```
$( "#dialog-message" ).dialog({
    modal: true,
    buttons: {
        Ok: function() {
            $( this ).dialog( "close" );
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T02:14:00.003

你可以试试这个插件来美化警报： http: [//plugins.jquery.com/alert-beautifier/](http://plugins.jquery.com/alert-beautifier/)

# java - 调用 get 方法时来自 java.util.Hashtable 的 AbstractMethodError

> ID：10926549
> 
> 赞同：0
> 
> 时间：2012-06-07T06:12:47.560
> 
> 标签：java, hashtable

我们有一个 Object `CollectedInfo`，其中包含一个`Hashtable`. 在我们的应用程序中，我们填充 this `Hashtable`，然后对其进行迭代以执行插入操作。同时使用不同的线程来执行这个操作。

在从 中检索值时`Hashtable`，我们看到了`AbstractMethodError`异常，显示了来自 的 get 方法的跟踪`Hashtable`。一旦出现此异常，Java 应用程序就会崩溃。

我们无法重现异常，但是我们可以在一段时间内非常一致地在应用程序中看到相同的行为。

下面是跟踪：

```
SYS_ERR: Exception running task: java.lang.AbstractMethodError
SYS_ERR: java.lang.AbstractMethodError
SYS_ERR:     at java.util.Hashtable.get(Unknown Source)
SYS_ERR:     at poll.CollectedInfo.getValuesForColumn(CollectedInfo.java:1026)
SYS_ERR:     at poll.YYYMgr.saveData(YYYMgr.java:5346)
SYS_ERR:     at poll.YYYMgr.saveData(YYYMgr.java:2412)
SYS_ERR:     at poll.YYYMgr.saveData(YYYMgr.java:2250)
SYS_ERR:     at poll.CommonPollAPI.saveData(CommonPollAPI.java:579)
SYS_ERR:     at poll.XXXXData.run(XXXXData.java:76)
SYS_ERR:     at management.scheduler.WorkerThread.run(WorkerThread.java:70) 
```

我们使用的是 JRE 1.6.0，重现此问题的操作系统是 Linux Red Hat Enterprise Linux Server release 5.6 Beta (Tikanga)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:39:20.280

首先， a[`Hashtable`](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html)基本上是 a [`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)，所以...

你有：

*   一个`HashMap`
*   多个线程`HashMap`同时使用

需要的是为并发访问编码的*。*`HashMap`

幸运的是，已经存在一个：[`ConcurrentHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html). 您需要对代码进行的唯一更改是使用特殊的线程安全方法[`putIfAbsent(K, V)`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html#putIfAbsent%28K,%20V%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:29:50.453

获取一个 Iterator 类对象，然后尝试获取哈希值。

//宣言

```
 Iterator itr = hashtable.keySet().iterator(); 
```

// 加工

```
 while(itr.hasNext())
 { 
    String key = (String)itr.next();  
        String value = (String)hashtable.get(key); 

           // write your desired code
 } 
```

# python - pdf文件中表格内容的scrapy

> ID：10926554
> 
> 赞同：0
> 
> 时间：2012-06-07T06:13:26.557
> 
> 标签：python, pdf, web-scraping

我正在使用python对pdf文件中的表格进行网络抓取

有人可以建议我一个很好的模块，它可以获取唯一需要的表我已经尝试过 pypdf,pdf2html,ocr,slate 但没有任何效果

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:41:26.140

首先，将 PDF 转换为 HTML。请参阅[使用 Python 将 PDF 转换为 HTML](https://stackoverflow.com/questions/276434/converting-pdf-to-html-with-python)。

然后，使用 HTML 解析库，解析从 PDF 生成的 HTML。请参阅[BeautifulSoup HTML 表格解析](https://stackoverflow.com/questions/2059328/beautifulsoup-html-table-parsing)

# node.js - 在 nodejs 上运行 socket.io 客户端代码

> ID：10926556
> 
> 赞同：1
> 
> 时间：2012-06-07T06:13:30.677
> 
> 标签：node.js, socket.io

我正在使用服务器端的 nodejs/socket.io 开发一个聊天应用程序

现在，是时候测试它的可扩展性了

所以，我想我也可以使用 nodejs 有效地模拟大量 soket.io 客户端，但是这次运行客户端代码

问题是，如何在 nodejs 上运行 socket.io 客户端库？这可能吗？如果是这样，谁能提供一个简单的例子

我的代码在浏览器上运行良好，具有通常的开发负载，问题不在于代码是否运行，实际上我不打算运行相同的客户端代码，只是打开大量连接，并发送数千消息的数量以获得关于可扩展性和资源消耗的初步数字

此外，任何有关测试 socket.io 服务器可扩展性的建议都将不胜感激

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:24:55.147

您正在寻找的东西不会真正有帮助。即使您可以`socket.io`在`node`进程中模拟客户端，它也不具有与浏览器实际访问相同的动态属性。您将能够确定诸如您可以在不耗尽资源的情况下处理的最大连接数之类的事情，但是您的一般性能指标将是非常人为的并且不可推广。

# c# - 无法从表中删除行

> ID：10926560
> 
> 赞同：0
> 
> 时间：2012-06-07T06:13:48.820
> 
> 标签：c#, entity-framework

我正在尝试从表中删除一行，

我的代码：

```
var strUsername = GridMain.SelectedRows[0].Cells[0].Value.ToString().Trim();
Users selectedUser = _db.Users.First(usr => usr.UserName == strUsername);

_db.DeleteObject(selectedUser);
_db.SaveChanges();

LoadGrid(PresentationMode.Users); 
```

我的代码工作正常

但是对于只有一行数据库，会发生错误`SaveChanges()`

错误信息 ：

> 更新条目时出错。有关详细信息，请参阅 InnerException

发生错误的行：

![在此处输入图像描述](../Images/b89b5b694d4e3b14f6330485db287710.png)

内部异常：

> DELETE 语句与 REFERENCE 约束“FK_UserReport_Users”冲突。冲突发生在数据库“Reporter”、表“dbo.UsersReports”、列“UserName”中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:27:04.540

此行在 UserReport 表中可用/引用。因此，除非您启用了级联删除选项，否则您无法删除它。否则删除 UserReport 中的行并再次尝试删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:32:01.657

UserReport 表中存在引用。因此您无法删除父表值..首先您删除父子关系或使用级联删除选项

# php - 使用正则表达式在 codeigniter 中强制路由

> ID：10926561
> 
> 赞同：0
> 
> 时间：2012-06-07T06:13:49.370
> 
> 标签：php, regex, codeigniter

我在 codeigniter 的 route.php 中有以下路线

```
$route['^(?!login|signup|autos|jobs|jobwanted|admin).*'] = "pages/bpages"; 
```

它将所有内容重定向到页面/页面，除了 (login|signup|autos|jobs|jobwanted|admin )

```
eg www.mysite.com/sohailanwarpk 
```

由于 sohailanwapk 不在 (autos|jobs|jobwanted|admin) 中，它将重定向到页面/bpages 如果我的 url 类似，我面临的问题就是这种情况

```
eg www.mysite.com/autosss

eg www.mysite.com/jobs123 
```

它应该将 autosss 或 jobs123 指向“pages/bpages”；但它不是，所以我怎样才能精确匹配（autos|jobs|jobwanted|admin），以便重定向其他所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:02:27.723

将其拆分为 2 条路线：

```
$route['^(?!(login|signup|autos|jobs|jobwanted|admin)).*']  = "pages/bpages";
$route['^(login|signup|autos|jobs|jobwanted|admin)[^\/].*'] = "pages/bpages"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:23:55.777

只需写两条规则：

```
$route['^(login|signup|autos|jobs|jobwanted|admin)$'] = '$1';
$route['(:any)'] = 'pages/bpages'; 
```

# javascript - Fabric js取代了调整大小旋转控件

> ID：10926572
> 
> 赞同：2
> 
> 时间：2012-06-07T06:14:39.457
> 
> 标签：javascript, canvas, fabricjs

[![http://i.stack.imgur.com/MeJAo.jpg](../Images/86cc20945ee6dd4f87297b50c323e198.png)](https://i.stack.imgur.com/MeJAo.jpg)

我有一个简单的 fabric.canvas 元素，它有一个背景，我将它的宽度和高度设置为与上图相同。然后添加帽子图像。问题是调整大小控件被取代了。我在图像中也清楚地表明了这一点。

这就是我将画布添加到页面的方式

```
 $('#canvas_container').empty();
    canvas_el = document.createElement('canvas');
    canvas_el.id = "canvas";
    $('#canvas_container').append(canvas_el);
    canvas = new fabric.Canvas('canvas');

    var img = new Image();
    img.onload = function() {
      canvas.setWidth(this.width);
      canvas.setHeight(this.height);
      canvas.renderAll()
    }
    img.src =$(this).attr('picUrl');

    canvas.setBackgroundImage($(this).attr('picUrl'),function(){
      canvas.renderAll();
    }); 
```

这就是我添加图像的方式

```
 fabric.Image.fromURL('img/hat.png', function(img) {
        oImg = img.set({ left: 50, top: 50, angle: 0 })
        canvas.add(oImg);
        canvas.renderAll();
      }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:07:31.787

我在推特上得到了答案。

在更改画布的宽度和高度并添加图像之后，我立即添加了 canvas.calcOffset()。

有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:15:35.173

在 canvas.add(oImg) 之后尝试 oImg.setCoords();

# jquery - JQuery Datatable - 如何在渲染之前显示处理？

> ID：10926574
> 
> 赞同：0
> 
> 时间：2012-06-07T06:14:51.553
> 
> 标签：jquery, html, datatable

我正在使用 jquery 数据表插件。它工作正常。但问题是，我没有几个大号。来自服务器的表行数。所以在 datatable 渲染它之前，所有的行都显示为普通列表，这看起来不太好。渲染需要一些时间，然后它工作正常。那么，如何在数据表完全呈现之前显示某种加载图像而不是行列表。

HTML 包含一个普通表，其行是使用 for 循环生成的。

Jquery 代码如下，写在 document.ready() 方法中。

```
$("document").ready(function()
{
     $('#inbox_table').dataTable({
        "sPaginationType": "full_numbers"
    });
}); 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:23:41.250

尝试这个

```
$('#inbox_table').dataTable({
    "sPaginationType": "full_numbers",
    "oLanguage": {
        "sProcessing": "<img src='loading.gif'>"
    }
}); 
```

参考

```
http://datatables.net/usage/i18n#oLanguage.sProcessing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-29T13:30:04.137

var table = $('#mytable').DataTable({

语 ： {

sLoadingRecords：' [http](http://www.snacklocal.com/images/ajaxload.gif) ://www.snacklocal.com/images/ajaxload.gif '

}

})

# ios - iOS 应用程序发售，除了在香港以外都很好用

> ID：10926575
> 
> 赞同：1
> 
> 时间：2012-06-07T06:15:00.137
> 
> 标签：ios, localization

我为一个原为法语的客户端制作了一个 iOS 应用程序，并将其本地化，以便在手机不是法语时它可以显示英语。在我的 iphone 上效果很好（我已经用几种语言对其进行了测试）。

我的客户（在香港展示应用程序...）告诉我，在香港的 iPhone 上，应用程序在默认屏幕后立即崩溃。什么可能导致这种情况？我在这里问是因为我对此一无所知。对于信息，我确实实现了推送通知。

很抱歉，我没有更多信息，但由于我目前不在那里，所以我没有任何日志。

以前有人遇到过这个问题吗？是否知道某个应用程序可以在某些国家/地区运行而在其他国家/地区无法运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:26:20.490

您应该尝试通过更改应用程序来模拟问题：

1.  语言偏好。
2.  地区偏好。
3.  App Store Apple ID 到香港地区的 Apple ID（如果您已实施应用内购买）。
4.  将时间偏好更改为香港日期和时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T17:17:59.737

I had a problem with my app where it was only crashing when Hong Kong was simulated as the location. The problem turned out to be that the `locality` property of `CLPlacemark` was being returned as `(null)`.

I didn't have a check for that and was setting an attributed string based on the locality value returned, therefore causing the app to crash.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:19:00.737

如果存在一些特定于国家/地区的文件，这些文件在运行时根据国家/地区选择加载，则应用程序可能会崩溃，因为应用程序将无法找到香港特定文件（如果某些默认文件不存在） .)

休息我们只能在查看日志后才能知道，但以上是最可能的情况。

# mysql - 在 ASP.NET MVC3 中备份 MySQL 数据库

> ID：10926580
> 
> 赞同：0
> 
> 时间：2012-06-07T06:15:34.810
> 
> 标签：mysql, asp.net-mvc, asp.net-mvc-3

如何从 ASP.NET MVC3 备份 MySql 数据库。该项目位于本地网络服务器中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:20:52.560

您可以使用 MySqlBackup.NET 来执行任务

[http://mysqlbackupnet.codeplex.com/](http://mysqlbackupnet.codeplex.com/)

我是这个项目的作者之一。

# c# - 当 rk 为空或“”时，如何使用 substr 使这个函数工作

> ID：10926582
> 
> 赞同：0
> 
> 时间：2012-06-07T06:15:42.580
> 
> 标签：c#

我在 C# 中有以下函数：

```
 public string getRowKey(string topic, string rk)
    {
        return string.Join("", from s in topic.Split('.')
                               select s.PadLeft(2, '0')).PadRight(4, '0') +
                    rk.Substring(4);
    } 
```

我有一个问题，因为如果 rk 为 null 或等于 "" 则函数失败。有人可以解释我如何解决这个问题。我收到有关索引值的错误。请注意，如果 rk 为 null 或“”，那么我只是不希望添加 rk.Substring(4) 的最后一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:21:26.270

简单地使用三元运算符`?:`和函数`string.IsNullOrEmpty(string)`就足够了

```
public string getRowKey(string topic, string rk)
{
    return string.Join("", from s in topic.Split('.')
                           select s.PadLeft(2, '0')).PadRight(4, '0') +
    string.IsNullOrEmpty(rk) ? "": rk.Substring(4);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:22:35.357

尝试这个 -

```
 public string getRowKey(string topic, string rk)     {
    return string.Join("", from s in topic.Split('.')
        select s.PadLeft(2, '0')).PadRight(4, '0') +                     
   string.IsNullOrEmpty(rk)?"":rk.Substring(4);     
} 
```

请注意，您还需要检查 rk 的大小是否大于 4。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T06:23:14.140

```
public string getRowKey(string topic, string rk)
{
    return string.Join("", from s in topic.Split('.')
                           select s.PadLeft(2, '0')).PadRight(4, '0') +
                (string.IsNullOrEmpty(rk) ? "" : rk.Substring(4));
} 
```

# ssrs-2008 - SSRS 有哪些省时功能和表达式？

> ID：10926584
> 
> 赞同：1
> 
> 时间：2012-06-07T06:16:08.773
> 
> 标签：ssrs-2008, reporting-services, reportingservices-2005

您为 SSRS 编写或找到了哪些节省时间的功能？

我的主要功能是一个安全除法功能，我在任何我认为可能发生除以零错误的地方使用它：

```
Function SafeDivide(value1 As Decimal, value2 As Decimal) As Decimal

        If (value1 <> 0.0 And value2 <> 0.0) Then
            Return value1 / value2
        Else
            Return 0
        End If

End Function 
```

有没有其他你经常使用并且可以分享的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:20:01.583

像这样更简单。

```
Function SafeDivide(value1 As Decimal, value2 As Decimal) As Decimal
        If value2 = 0 return 0
        Return value1 / value2
End Function 
```

我们还有一个我们编写**的内部实用程序**，它可以从单个代码文件更新项目报告中的所有代码。

我的观点是您可以在 SSRS 中使用任何 .net 代码，因此您应该研究有用代码的通用库。

# android - Spinner 在向上滚动时重置其值

> ID：10926590
> 
> 赞同：0
> 
> 时间：2012-06-07T06:16:40.097
> 
> 标签：android, android-listview, android-spinner

我有一个`ListView`, 具有不同的自定义行。最后一行包含 a`TextView`和 a `Spinner`。工作正常（`Spinner`单击下拉列表时显示，当我选择一个选项时，它会出现在`Spinner`' 的提示中），但是当我向上滚动列表时，`Spinner`它的值将更改为第一个位置的值（即字符串位置 0)。

为什么会这样？我能做些什么来阻止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:18:00.267

它将其属性创建**custonbaseadapter**设置**getview**和**newview**方法

[预先清单](http://www.vogella.com/articles/AndroidListView/article.html#listadvanced_interactive)

[自定义适配器](https://codereview.stackexchange.com/questions/1057/android-custom-cursoradapter-design)

[看到这个](http://www.vogella.com/articles/AndroidListView/article.html)

# iphone - 如何启动一个新的基于导航的应用程序以仅在 Ipad 中工作？

> ID：10926591
> 
> 赞同：0
> 
> 时间：2012-06-07T06:17:14.177
> 
> 标签：iphone

我想创建一个新的基于导航的应用程序，只需要使用 ipad 吗？我该怎么做。当我启动基于导航的 iphone 应用程序，然后尝试将目标升级到 ipad。然后有两个目标文件，和两个主窗口 xib，这让我很困惑，我需要这个应用程序只能在 ipad 中工作。我将设备系列更改为 ipad？这些是我完成的步骤 1）在 3.2 中使用核心数据创建了一个新的基于导航的应用程序启用。2）将目标升级为ipad（不是通用的ipad）3）将设备系列更改为ipad。

但这会给我两个目标和两组 zib 文件，该怎么办？

够了吗？任何人都可以给出实现这一目标的确切步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:46:41.313

正如您所说，更改`Targeted Device Family`为 iPad 就足够了。

如果您仍然对 iPhone 的文件（例如主窗口 xib）感到不舒服，您可以删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:45:43.203

从单个视图模板开始，然后将初始视图控制器嵌入到导航控制器中。但是你看不到很多基于 iPad 原生全屏导航的应用程序。拆分视图更常见。

# c# - C# 中的唯一数字生成

> ID：10926599
> 
> 赞同：2
> 
> 时间：2012-06-07T06:17:57.007
> 
> 标签：c#, unique

我有大约 100,000 条记录的批量插入，这些记录将插入到具有一个唯一值列的 oracle 表中。这种批量插入将每天发生两次或三次，最长可达多年（永无止境）。

需要一个健壮的机制来生成唯一值列的唯一编号。我正在构建数据集以立即提交到数据库。

以前我在 oracle 中创建了序列，在构建数据集行时，访问数据库，获取新的序列号并放入该列。但它会带来性能问题，因为对于 100,000 条记录，需要 100,000 次数据库命中。

任何其他方法。此唯一值列是 varchar2，最大长度为 20

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:20:39.390

如果您只进行批量插入，为什么不使用触发器创建[自动编号序列？](http://www.adp-gmbh.ch/ora/misc/autonumber.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:31:24.713

您没有提到数字必须是连续的（1..n），所以也许您可以生成 GUID 并以紧凑的方式表示它们。从长远来看，您可能会遇到冲突，在这种情况下，您可以生成新的 GUID。

我看到的唯一问题是您需要 25 个字符来表示 Base64 中的 GUID（如果去掉填充，则需要 23 个字符）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-07T06:24:12.697

您可以生成新的序列 GUID 并取其 20 个字符而不是“-”符号并插入数据库。此 GUID 对用户不友好，因此没有人可以轻松记住这一点....

# php - cURL 在页面加载后提交 POST 字段（ curl_exec ）？

> ID：10926604
> 
> 赞同：0
> 
> 时间：2012-06-07T06:18:19.613
> 
> 标签：php, curl, html-parsing, captcha

我必须创建一个机器人来从我的大学网站收集一些数据，它使用带有 regno 和验证码字段的简单登录，他们不使用真正的验证码，它是假的（可以在页面源代码中看到）。所以我的想法是使用 DOM Parser 并从例如

我使用 PHP-Curl 来完成这项工作。我的代码：`

```
<?
$ch = curl_init();
$captch = i will get the value from DOM Parser ( But here is the problem , i have to get it before even executing the page !! ) 
$fields = "regno=11BTA00&captcha=$captcha";
curl_setopt($ch,CURLOPT_URL,$loginurl);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields);
$data = curl_exec($ch);
curl_close($ch);
?> 
```

问题是一旦我运行 curl_exec ，通过解析获取验证码，提交它我需要再次 curl_exec 导致重新加载验证码..

有什么解决方法吗？除了卷曲？我准备好使用另一个库

# memory - 在 Debian 上测试可用内存

> ID：10926606
> 
> 赞同：-1
> 
> 时间：2012-06-07T06:18:48.560
> 
> 标签：memory, vps

在我运行 Debian 的虚拟服务器上，我的印象是内存配置错误，即使我的提供商声称一切正常。

即使有 3GB 的 RAM，我仍然会耗尽内存，尽管 top 命令声称它仍然有足够的内存。

有没有办法测试空闲内存是否真的可用？例如，如果我有 1.5 GB 的内存，我想创建一个 1 GB 的块并查看一切仍然正常工作。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:25:05.177

您正在使用哪些应用程序？内存不足肯定是有原因的。

免费试用命令：

```
$ free -m
             total       used       free     shared    buffers     cached
Mem:          3022       2973         48          0        235       1948
-/+ buffers/cache:        790       2232
Swap:         3907          0       3907 
```

这将向您展示类似上面的内容（这是我自己的 3 GB 机器）。

如果您有内存问题，请务必检查机器的系统日志。

```
# tail /var/log/syslog 
```

# facebook-graph-api - 发生错误 [object Object] facebook Open Graph

> ID：10926607
> 
> 赞同：-1
> 
> 时间：2012-06-07T06:18:49.093
> 
> 标签：facebook-graph-api, facebook-opengraph

我这里有点麻烦...

我刚刚在我的网站上设置了一个 facebook opengraph api，当我使用我的 facebook 帐户时它运行良好，但是当我使用我的另一个帐户测试它时收到错误消息...

当我尝试访问[http://www.kiosban.com/jangan-nyalakan-lampu-hazard-dikala-hujan-lebat/](http://www.kiosban.com/jangan-nyalakan-lampu-hazard-dikala-hujan-lebat/)时出现错误 [object Object] ，当我尝试查看我的 GoogleChrome 控制台时，我得到了这个错误

```
Uncaught ReferenceError: jQuery is not defined /jangan-nyalakan-lampu-hazard-dikala-hujan-lebat/:1115
Uncaught ReferenceError: $ is not defined /jangan-nyalakan-lampu-hazard-dikala-hujan-lebat/:1716
Uncaught SyntaxError: Unexpected token < index.php:1
Please specify a ShareThis Publisher Key 
For help, contact support@sharethis.com buttons.js:1
Unknown RPC service: undefined apis.google.com/_/apps-static/_/js/gapi/plusone/rt=j/ver=l9xafNDlycA.en_US./sv=1/am=!PemfnfjrL2yI81ARQg/d=1/rs=AItRSTPblCJvoWHsMeVNOsKiKGakP1copQ/cb=gapi.loaded_0:206
Unknown RPC service: undefined apis.google.com/_/apps-static/_/js/gapi/plusone/rt=j/ver=l9xafNDlycA.en_US./sv=1/am=!PemfnfjrL2yI81ARQg/d=1/rs=AItRSTPblCJvoWHsMeVNOsKiKGakP1copQ/cb=gapi.loaded_0:206
Unsafe JavaScript attempt to access frame with URL http://www.kiosban.com/jangan-nyalakan-lampu-hazard-dikala-hujan-lebat/ from frame with URL http://www.facebook.com/plugins/login.php?add_to_profile=false&api_key=384945498218921&channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D6%23cb%3Df1382a12d%26origin%3Dhttp%253A%252F%252Fwww.kiosban.com%252Ff4bed3cb%26domain%3Dwww.kiosban.com%26relation%3Dparent.parent&extended_social_context=false&locale=en_US&login_text=&max_rows=1&one_click=false&sdk=joey&show_faces=true&show_login_face=false&size=small&tense=past&width=200\. Domains, protocols and ports must match.
 zYYvIvm5_Za.js:89
g.categories.(anonymous function).(anonymous function) zYYvIvm5_Za.js:89
(anonymous function) BOwYwRudgQC.js:5
n _xZSy89IRtb.js:22
h.inform _xZSy89IRtb.js:25
v zYYvIvm5_Za.js:27
p 
```

对我的问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:23:46.877

未捕获的 ReferenceError: jQuery 未定义 /jangan-nyalakan-lampu-hazard-dikala-hujan-lebat/:1115 未捕获的 ReferenceError: $ 未定义 /jangan-nyalakan-lampu-hazard-dikala-hujan-lebat/:1716

这些是因为 jQuery 没有正确加载，或者您试图使用 jQuery 相关的方法或选择而没有定义 jQuery。确保检查加载的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T01:34:29.410

“请指定 ShareThis Publisher Key 如需帮助，请联系 support@sharethis.com” 我之前也遇到过这个错误。请检查您是否定义

```
<script type="text/javascript">        stLight.options({ publisher: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" }); </script> 
```

在“xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx”中使用您的实际发布者密钥在我将其插入我的代码后，错误消失了。

# ruby-on-rails - 一对多关系 ruby on rails

> ID：10926612
> 
> 赞同：0
> 
> 时间：2012-06-07T06:19:11.297
> 
> 标签：ruby-on-rails

所以我有两张桌子：

```
class Applicant < ActiveRecord::Base
  set_table_name "applicant"
  belongs_to :specialization, :foreign_key => "id"
end

class Specialization < ActiveRecord::Base
  set_table_name "specialization"
  has_many :applicant, :foreign_key => "id"
end 
```

我正在尝试获取申请者 pr 专业化的总数。在 SQL 中会是这样的：

```
SELECT a.Name, COALESCE(b.total,0) AS "Total Applicants"
FROM specialization AS a
    LEFT JOIN ( SELECT specialization.Name, COUNT(*) as total
                FROM applicant
        JOIN specialization ON applicant.specialization = specialization.id
        GROUP BY specialization.name) AS b
ON a.name = b.name
ORDER BY a.name; 
```

我如何使用 RoR 做到这一点？到目前为止，我尝试过的是：

```
<% Specialization.includes(:applicant).all.each do |s| %>
    <tr>
        <td><%= s.name%></td>
        <td><%= s.applicant.count()%></td>
    </tr>
<% end %> 
```

不过，这似乎不起作用，因为我只计算了一些专业的 1 名申请人，我通过查看我的数据库得知某些专业有 4 名申请人。

编辑：这是一个 pg SQL 数据库，来自 SQL 文件的创建表命令是这样的：

```
CREATE TABLE Specialization (
    Id  SERIAL PRIMARY KEY,
    Name    TEXT
);

CREATE TABLE Applicant (
    Id              SERIAL PRIMARY KEY,
    FirstName       TEXT,
    MiddleInitial   TEXT,
    LastName        TEXT,
    Specialization  INTEGER REFERENCES Specialization (id) NOT NULL
); 
```

# cakephp - cakephp 处理在 url 中传递错误的参数

> ID：10926615
> 
> 赞同：0
> 
> 时间：2012-06-07T06:19:22.837
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0

如何处理带有错误参数的正确基本 url？

Cakephp 如果你传递了错误的控制器或动作名称，它将导致 404 页面。但是如果我用错误的参数输入正确的控制器/动作名称，我该如何处理这种情况。

例子：

正确： `http://localhost/controller/action?params=123` 错误：`http://localhost/controller/action?par23=123`

par23 是错误的名称。在这种情况下，我想重定向到某些页面，例如 404 页面。是否有任何方法或配置我不需要检查控制器中的参数并每次都重定向到某个页面。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:28:53.643

您需要在控制器中手动检查。

我不会寻找任何额外的*错误*参数，而是简单地检查您*需要*的参数是否在那里。如果没有，您可以抛出异常。

这就是 Cake 的烘焙代码如何做到的：

```
// MyModelController.php
public function view($id = null) {
        $this->MyModel->id = $id;
        if (!$this->MyModel->exists()) {
            throw new NotFoundException(__('Invalid thing'));
        }

        // ...
} 
```

所以这里需要一个ID。如果未给出（默认值`null`）或不存在具有此 Id 的记录，则会引发导致 404 的异常。

请注意，这有一个额外的好处：它不仅涵盖了缺少参数的情况，而且如果参数存在但引用不存在的项目，它也会正确返回错误`$id`。

# android - android中的球形过滤器

> ID：10926617
> 
> 赞同：5
> 
> 时间：2012-06-07T06:19:26.290
> 
> 标签：android, image-processing, opengl-es, geometry, raytracing

我必须在 android 中的图像上应用球形滤镜，我已经附加了输入和预期的输出图像。输出图像将从输入图像的平方中心区域处理，并将其映射到球体。知道如何在 Android 中执行此操作。我是否必须使用 openGL 来执行此操作，或者仅使用 2D 转换来完成该任务。

![输入图像](../Images/d6173e28ef29af4de476c38c7b8ab8d1.png)
![输出图像](../Images/c453496f3984bcf087fbc17bfbbf4fbe.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T00:09:54.010

我刚刚在 iOS 上使用 OpenGL ES 2.0 实现了这项工作：

![球面折射示例](../Images/d1c3ef3e507a009c945ce9256148a32b.png)

虽然这是在 iOS 上，但我使用的片段着色器可以直接带到 Android 上。球面折射部分是使用以下片段着色器完成的：

```
 varying highp vec2 textureCoordinate;

 uniform sampler2D inputImageTexture;

 uniform highp vec2 center;
 uniform highp float radius;
 uniform highp float aspectRatio;
 uniform highp float refractiveIndex;

 void main()
 {
     highp vec2 textureCoordinateToUse = vec2(textureCoordinate.x, (textureCoordinate.y * aspectRatio + 0.5 - 0.5 * aspectRatio));
     highp float distanceFromCenter = distance(center, textureCoordinateToUse);
     lowp float checkForPresenceWithinSphere = step(distanceFromCenter, radius);

     distanceFromCenter = distanceFromCenter / radius;

     highp float normalizedDepth = radius * sqrt(1.0 - distanceFromCenter * distanceFromCenter);
     highp vec3 sphereNormal = normalize(vec3(textureCoordinateToUse - center, normalizedDepth));

     highp vec3 refractedVector = refract(vec3(0.0, 0.0, -1.0), sphereNormal, refractiveIndex);

     gl_FragColor = texture2D(inputImageTexture, (refractedVector.xy + 1.0) * 0.5) * checkForPresenceWithinSphere;     
 } 
```

是球体中心的`center`归一化坐标（从两个维度的 0.0 - 1.0 空间），`radius`是归一化半径，`refractiveIndex`是球体的空气/材料指数，`aspectRatio`是图像的纵横比（以确保球体在归一化坐标空间中是圆形而不是椭圆形）。

这将使用提供的中心和半径计算球体的表面法线，并使用 GLSL`refract()`函数折射传入矢量并提供图像纹理中的查找坐标。

[使用我在此答案](https://stackoverflow.com/a/9592454/19679)中描述的可分离高斯模糊来模糊背景。

此过滤器的速度足以在 iPhone 上实时过滤实时视频，因此它在大多数 Android 设备上的性能应该相当不错。它的源代码可以在我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中的 GPUImageSphereRefractionFilter 中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T05:47:42.627

以下代码[Fish Eye lens](https://stackoverflow.com/questions/1927145/how-to-simulate-fisheye-lens-effect-by-opencv/6281006#6281006)用于创建球体并应用一些修改来缩放球体和背景生成，它主要适用于方形图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T18:57:20.493

这是一个光线追踪问题。OpenGL 很可能对您没有帮助，因为 OpenGL 不提供基于光线的 3D。但是，这可能是您正在寻找的。

[http://www1.cs.columbia.edu/CAVE/publications/pdfs/Garg_TR04.pdf](http://www1.cs.columbia.edu/CAVE/publications/pdfs/Garg_TR04.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T19:13:35.733

我同意蒂姆的观点。将一个位图转换为另一个位图不需要 3d 点，也不需要 Ray-trace，完全忘记它，它只是 2d。我不知道 opengl 是否内置了一些东西，但我有足够的 3d 经验来为您指明正确的方向。您必须迭代您选择的 *circle 区域内的所有点 *这是线索，并使用 FISH-EYE 变换找到颜色。你在网上有很多。希望这可以帮助

# c++ - thrift-cpp 的客户端是线程安全的吗？

> ID：10926621
> 
> 赞同：8
> 
> 时间：2012-06-07T06:19:38.320
> 
> 标签：c++, multithreading, thrift

我有三个问题。

1.  **thrift-cpp 的客户端是线程安全的吗？**
2.  **他们在 Thrift 上有某种连接池吗？**
3.  **任何使用 thrift-cpp-client 的好习惯。**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T02:31:17.933

Thrift 有 doxygen 文档，但它们似乎没有建立。他们不是很漂亮。要生成副本，请运行（在 thrift 源目录中）`doxygen -g Doxyfile`，将 RECURSIVE 更改为 YES，然后运行`doxygen Doxyfile`。

在回答您的问题时：

1.  哪个客户？有一大堆不同的节俭运输。一般来说，没有（AFAICT）任何全局状态，因此您可以在不同的线程中创建不同的客户端。如果您尝试在多个线程中使用相同的传输，您可能需要手动锁定，除非您已阅读代码并确认它没问题。

2.  我一个都没见过。AFAICT只有一堆你可以自己连接的传输。有 TSocketPool，但这是一个负载平衡工具，我认为这不是您要寻找的。

3.  我的建议：仅使用内存传输并建立自己的网络。Thrift 所做的可能不是您想要做的，即使是，他们的文档和包装也很糟糕。（或者使用协议缓冲区而不是 thrift ——这些天它们在 IMO 中得到了更好的维护。我认为这即使我是一个 thrift 贡献者。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-05T07:27:46.447

节俭 0.12。

1.  thrift-cpp 的客户端是线程安全的吗？ **YES** 这是来自 Thrift 编译器 (0.12.0) 自动生成的 .h/.cpp 文件

> “并发”客户端是一个线程安全的客户端，可以正确处理乱序响应。它比普通客户端慢，因此只应在需要在多个线程之间共享连接时使用

定义一个 ExampleService (example.thrift) 你应该有：

```
class ExampleServiceConcurrentClient : virtual public ExampleServiceIf {
} 
```

1.  他们在 Thrift 上有某种连接池吗？ **否**您可以为每个线程建立自己的连接，也可以为所有线程使用 connectionConcurrentClient，这取决于您。
2.  任何使用 thrift-cpp-client 的好习惯。可能在每次服务调用时至少捕获 apache::thrift:: **TException**

# ruby-on-rails - 确认后如何进行设计重定向

> ID：10926626
> 
> 赞同：43
> 
> 时间：2012-06-07T06:20:19.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

如何在设计中创建确认后重定向？

在我添加`confirmation module`自定义`after_sign_up_path`第一次工作正常之前，`login/signup`但现在当我单击电子邮件中的确认链接时，它会重定向到我为登录后路径（用户配置文件）设置的路径。

我的目标是创建一个表单向导和“入门”页面来收集更多信息。明显的警告是，这种重定向只会发生一次，在确认后。

我尝试了一些其他已在 Stack Overflow 上发布的解决方案，但它们似乎都不再起作用了。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-02-27T15:12:51.120

`after_confirmation_path_for`实现此目的的一种不那么侵入性的方法可能只是覆盖`Devise::ConfirmationsController`.

`confirmations_controller.rb`在`app/controllers`目录中新建一个：

```
class ConfirmationsController < Devise::ConfirmationsController

  private

  def after_confirmation_path_for(resource_name, resource)
    your_new_after_confirmation_path
  end

end 
```

在`config/routes.rb`中，添加这一行，以便设计将使用您的自定义`ConfirmationsController`。这假设设计在`users`桌子上运行（您可以编辑以匹配您的）。

```
devise_for :users, controllers: { confirmations: 'confirmations' } 
```

重新启动 Web 服务器，您应该拥有它。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-07T07:56:58.090

你检查过[设计维基](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-up-%28registration%29)吗？它解释了如何执行此操作，并`after_signup_path_for`在您的案例中定义路径。

来自维基：

> 制作一个新的控制器“registrations_controller.rb”并自定义适当的方法：
> 
> ```
> class RegistrationsController < Devise::RegistrationsController
>   protected
> 
>   def after_sign_up_path_for(resource)
>     '/an/example/path'
>   end
> end 
> ```

然后添加一个路由来使用它：

> 修改 config/routes.rb 以使用新的控制器
> 
> ```
> devise_for :users, :controllers => { :registrations => "registrations" } 
> ```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-02T18:40:32.387

本质上，您想在Devise 的[第 25 行](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/confirmations_controller.rb#L25)`ConfirmationsController`附近进行更改。

这意味着您需要覆盖将操作中该语句`show`的“快乐路径”修改为您的内容的操作：`if``show`

```
class ConfirmationsController < Devise::ConfirmationsController
  def new
    super
  end

  def create
    super
  end

  def show
    self.resource = resource_class.confirm_by_token(params[:confirmation_token])

    if resource.errors.empty?
      set_flash_message(:notice, :confirmed) if is_navigational_format?
      sign_in(resource_name, resource)
      respond_with_navigational(resource){ redirect_to confirmation_getting_started_path }
    else
      respond_with_navigational(resource.errors, :status => :unprocessable_entity){ render_with_scope :new }
    end
  end
end 
```

以及它的范围路由（我将视图和操作放在注册控制器中，但您可以将其更改为任何内容）：

```
devise_for :users, controllers: { confirmations: 'confirmations' }
devise_scope :user do
  get '/confirmation-getting-started' => 'registrations#getting_started', as: 'confirmation_getting_started'
end 
```

默认`show`操作是指受保护的`after_confirmation_path_for`方法，因此作为另一种选择，您可以只修改该方法返回的内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-18T03:28:52.167

@Lee Smith 给出的解决方案运行良好，但我想补充一点：在这种情况下，我们不需要在覆盖设计确认控制器时添加`new`and操作：`create`

```
class ConfirmationsController < Devise::ConfirmationsController
  def show
    self.resource = resource_class.confirm_by_token(params[:confirmation_token])

    if resource.errors.empty?
      set_flash_message(:notice, :confirmed) if is_navigational_format?
      sign_in(resource_name, resource)
      respond_with_navigational(resource){ redirect_to your_desired_redirect_path }
    else
      respond_with_navigational(resource.errors, status: :unprocessable_entity){ render_with_scope :new }
    end
  end
end 
```

然后在路由文件中，为确认控制器添加路由。

```
devise_for :users, controllers: { confirmations: "confirmations" } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-09T06:42:29.523

我刚刚经历了所有这些，其他答案都没有奏效（2015-04-09 与设计 3.4.1）。

注册后，我希望用户被重定向到登录页面，并显示有关确认电子邮件的消息。为了让它工作，这就是我必须做的：

```
class RegistrationsController < Devise::RegistrationsController

protected
  # This is the method that is needed to control the after_sign_up_path 
  # when using confirmable. 
  def after_inactive_sign_up_path_for(resource)
    new_user_session_path
  end

end 
```

* * *

我刚刚发现了这条评论，它可以准确地将我送到我需要更快到达的地方。

> 这是对提到 Niels 的 after_inactive_sign_up_path_for 的引用：[Devise wiki](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-up-(registration)) – marrossa 2012 年 11 月 13 日 3:38

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-05-19T17:43:11.023

在使用集成在 rails 应用程序中的**炼油厂cms**时，`confirmation_path`还必须进行配置

# android - 谁能说出 Android 2.2.1 中日历名称的列名？

> ID：10926628
> 
> 赞同：1
> 
> 时间：2012-06-07T06:20:26.137
> 
> 标签：android

2.3+ 中日历名称的列名是：displayName，4.0+ 是：calendar_displayName

但是，这两个不适用于 2.2.1。那么任何人都可以和我说同样的话吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:31:50.860

看看这个网站你可以找到解决方案[http://hanscappelle.blogspot.in/2011/03/android-calendar-api-glitches.html](http://hanscappelle.blogspot.in/2011/03/android-calendar-api-glitches.html)

# c# - 如何在 C# 中获取 Windows XP 产品密钥？

> ID：10926634
> 
> 赞同：8
> 
> 时间：2012-06-07T06:20:56.180
> 
> 标签：c#

如何在 C# 中获取 Windows XP 产品密钥？

我想从客户端获取一些像 Windows 密钥这样的密钥。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-21T11:52:37.577

Erij J. 和其他人在此提到的 Windows 产品密钥查找器和其他解决方案仅适用于 Windows XP 和 Windows 7。自 Windows 8 以来，Microsoft 已更改密钥加密算法。

我在这里的博客文章中找到了适用于 Windows 8 及更高版本的解决方案：http: [//winaero.com/blog/how-to-view-your-product-key-in-windows-10-windows-8-and-windows -7/](http://winaero.com/blog/how-to-view-your-product-key-in-windows-10-windows-8-and-windows-7/)

但是它是用 VBS 编写的，所以我将其重写为 C#。

您可以在 GitHub 上查看完整项目：[https ://github.com/mrpeardotnet/WinProdKeyFinder](https://github.com/mrpeardotnet/WinProdKeyFinder)

以下是如何在 Windows 8 及更高版本中解码产品密钥的代码：

```
 public static string DecodeProductKeyWin8AndUp(byte[] digitalProductId)
    {
        var key = String.Empty;
        const int keyOffset = 52;
        var isWin8 = (byte)((digitalProductId[66] / 6) & 1);
        digitalProductId[66] = (byte)((digitalProductId[66] & 0xf7) | (isWin8 & 2) * 4);

        // Possible alpha-numeric characters in product key.
        const string digits = "BCDFGHJKMPQRTVWXY2346789";
        int last = 0;
        for (var i = 24; i >= 0; i--)
        {
            var current = 0;
            for (var j = 14; j >= 0; j--)
            {
                current = current*256;
                current = digitalProductId[j + keyOffset] + current;
                digitalProductId[j + keyOffset] = (byte)(current/24);
                current = current%24;
                last = current;
            }
            key = digits[current] + key;
        }
        var keypart1 = key.Substring(1, last);
        const string insert = "N";
        key = key.Substring(1).Replace(keypart1, keypart1 + insert);
        if (last == 0)
            key = insert + key;
        for (var i = 5; i < key.Length; i += 6)
        {
            key = key.Insert(i, "-");
        }
        return key;
    } 
```

要检查 Windows 版本并获取 digitalProductId，请使用如下包装器方法：

```
 public static string GetWindowsProductKey()
    {
            var key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine,
                                          RegistryView.Default);
            const string keyPath = @"Software\Microsoft\Windows NT\CurrentVersion";
            var digitalProductId = (byte[])key.OpenSubKey(keyPath).GetValue("DigitalProductId");

        var isWin8OrUp =
            (Environment.OSVersion.Version.Major == 6 && System.Environment.OSVersion.Version.Minor >= 2)
            ||
            (Environment.OSVersion.Version.Major > 6);

        var productKey = isWin8OrUp ? DecodeProductKeyWin8AndUp(digitalProductId) : DecodeProductKey(digitalProductId);
        return productKey;
    } 
```

我已经在几台机器上对其进行了测试，它给了我正确的结果。即使在 Windows 10 上，我也能够获得通用的 Windows 10 代码（在升级的系统上）。

注意：对我来说，原始的 vbs 脚本返回了错误的 Win7 密钥，尽管原始博客文章指出该代码适用于 Win7 及更高版本。所以我总是回退到 Win7 及更低版本的众所周知的旧方法。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T06:25:33.173

查看 Windows 产品密钥查找器。

[http://wpkf.codeplex.com/](http://wpkf.codeplex.com/)

来源可用。

密钥存储在注册表中，需要使用源中可用的算法进行解码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T06:30:19.023

WMI 有一个名为的类，[`Win32_OperatingSystem`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394239(v=vs.85).aspx)其中包含一个名为**SerialNumber**的属性：

> 操作系统产品序列号。
> 
> 示例：“10497-OEM-0031416-71674”

[`System.Management`](http://msdn.microsoft.com/en-us/library/system.management(v=vs.110).aspx)命名空间包含允许 .NET 代码与 WMI 交互的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-30T23:39:57.373

与**mrpeardotnet的**答案一起去......

我遇到了`RegistryView.Default`无法转换为字符串的错误。我改变了这个：

```
var key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Default); 
```

对此：

```
var key = RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, Environment.MachineName); 
```

它似乎工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T06:27:07.987

使用此代码，您可以找到您的 Microsoft 产品的产品密钥。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Win32;
namespace MSKeyFinder
{
    public class KeyDecoder
    {
        public enum Key { XP, Office10, Office11 };
        public static byte[] GetRegistryDigitalProductId(Key key)
        {
            byte[] digitalProductId = null;
            RegistryKey registry = null;
            switch (key)
            {
                // Open the XP subkey readonly.
                case Key.XP:
                    registry =
                      Registry.LocalMachine.
                        OpenSubKey(
                          @"SOFTWARE\Microsoft\Windows NT\CurrentVersion",
                            false);
                    break;
                // Open the Office 10 subkey readonly.
                case Key.Office10:
                    registry =
                      Registry.LocalMachine.
                        OpenSubKey(
                          @"SOFTWARE\Microsoft\Office\10.0\Registration\" + 
                          @"{90280409-6000-11D3-8CFE-0050048383C9}",
                          false);
                    // TODO: Open the registry key.
                    break;
                // Open the Office 11 subkey readonly.
                case Key.Office11:
                    // TODO: Open the registry key.
                    break;
            }
            if (registry != null)
            {
                // TODO: For other products, key name maybe different.
                digitalProductId = registry.GetValue("DigitalProductId")
                  as byte[];
                registry.Close();
            }
            return digitalProductId;
        }
        public static string DecodeProductKey(byte[] digitalProductId)
        {
            // Offset of first byte of encoded product key in 
            //  'DigitalProductIdxxx" REG_BINARY value. Offset = 34H.
            const int keyStartIndex = 52;
            // Offset of last byte of encoded product key in 
            //  'DigitalProductIdxxx" REG_BINARY value. Offset = 43H.
            const int keyEndIndex = keyStartIndex + 15;
            // Possible alpha-numeric characters in product key.
            char[] digits = new char[]
      {
        'B', 'C', 'D', 'F', 'G', 'H', 'J', 'K', 'M', 'P', 'Q', 'R', 
        'T', 'V', 'W', 'X', 'Y', '2', '3', '4', '6', '7', '8', '9',
      };
            // Length of decoded product key
            const int decodeLength = 29;
            // Length of decoded product key in byte-form.
            // Each byte represents 2 chars.
            const int decodeStringLength = 15;
            // Array of containing the decoded product key.
            char[] decodedChars = new char[decodeLength];
            // Extract byte 52 to 67 inclusive.
            ArrayList hexPid = new ArrayList();
            for (int i = keyStartIndex; i <= keyEndIndex; i++)
            {
                hexPid.Add(digitalProductId[i]);
            }
            for (int i = decodeLength - 1; i >= 0; i--)
            {
                // Every sixth char is a separator.
                if ((i + 1) % 6 == 0)
                {
                    decodedChars[i] = '-';
                }
                else
                {
                    // Do the actual decoding.
                    int digitMapIndex = 0;
                    for (int j = decodeStringLength - 1; j >= 0; j--)
                    {
                        int byteValue = (digitMapIndex << 8) | (byte)hexPid[j];
                        hexPid[j] = (byte)(byteValue / 24);
                        digitMapIndex = byteValue % 24;
                        decodedChars[i] = digits[digitMapIndex];
                    }
                }
            }
            return new string(decodedChars);
        }
    }
} 
```

引用： http: [//www.codeproject.com/Articles/23334/Microsoft-Product-Key-Finder](http://www.codeproject.com/Articles/23334/Microsoft-Product-Key-Finder)

# tfsbuild - TFS 门控签入问题

> ID：10926637
> 
> 赞同：3
> 
> 时间：2012-06-07T06:21:02.197
> 
> 标签：tfsbuild, gated-checkin

我想知道我是否应该在这里发布这个，但后来我在 TFS 上看到了其他类似的帖子，他们没有解决我的问题，所以我决定继续发布它。

我正在尝试修复由前同事设置的 TFS 盒子。到目前为止，除了签入/签出文件之外，我还没有以任何其他身份使用过 TFS。出于本练习的目的，我创建了一个简单的 winforms 项目，其中只有一个表单和一个表单加载时的 hello world 警报，我是试图签入到 TFS。我们启用了门控签入，我们还禁止用户绕过构建验证，因为它可以在下面的红色框中突出显示。

![门控签到对话框](../Images/776f1cf1c17f135a20825881114bef76.png)

现在问题是所有门控签入尝试都失败并出现错误：

```
Access Denied: User 'myOrgDomain\user.name' needs Override check-in 
validation by build permission for the following build definition(s). DefnName 
```

我得到的消息提示说它是部分成功的 ![门控登记部分成功](../Images/3464129f7ebdda161bdcdfa68fc5084f.png)

当我打开构建时，我看到了这个 ![TFS 构建输出](../Images/cdf3fb17330f79bc63c2b17145e949d3.png)

当我在线检查时，我发现解决方案是允许用户通过启用灰色的复选框来绕过验证。我不希望出现这种情况。有没有一种方法可以让绕过验证保持禁用状态，并且仍然可以让我的门控签到工作？

这让我完全被难住了，我无法弄清楚可能出了什么问题。任何关于在我的日志中查看哪里以找出问题所在的指针也可能会有所帮助。日志确实表明构建成功，没有警告或错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:47:31.183

> [TestProject]Builders，[TestProject]Administrators & [TestProject]Contributors，我已经拒绝检查，对于 [TestProject]Readers 我把它留空..

由于拒绝会否决任何授权，并且由于几乎每个用户都是 Readers 或 Contributors 组的成员，因此您将遇到麻烦。由于用户只有在明确授予权限时才能绕过签入验证，因此无需设置任何拒绝规则。

所以要解决你的问题：

*   从这些组中删除拒绝检查。
*   设置“覆盖签入验证”以允许帐户应该能够绕过您的门控签入构建。

[从文档](http://msdn.microsoft.com/en-us/library/ms252587.aspx)：

> 您可以为 Team Foundation Server 中的权限指定两个显式授权设置：拒绝和允许。还有一个隐式授权，既不将权限设置为允许也不将权限设置为拒绝。此授权是一种隐含的拒绝设置，称为未设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:10:16.927

您的设置中发生了一些可疑的事情。对屏幕截图中显示的标志的访问由构建权限“通过构建覆盖签入验证”控制。由于它没有设置为权限，但显然设置为选项，因此您处于死锁状态。

我会尝试临时启用此标志（右键单击“构建”上的团队资源管理器，选择“安全”并为您的用户设置权限），然后复选框应该被启用并且我希望它被选中。我会手动取消选中复选框并让构建运行。然后我会禁用该权限。
希望现在 VS 将保留此选项。

如果这失败了，我会在 MS 中提交一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:00:17.803

![TFS 构建安全对话框](../Images/4d1f1e138c4cb4492baf76810ea0cd34.png)

我遇到了你提到的同样的问题。您要设置的安全设置是针对构建本身的，而不是针对 TFS 框上的任何内容。对我有用的是在 Visual Studio 中右键单击构建，然后选择 Security... 选项。然后，我确保我的构建服务帐户可以访问“覆盖构建时的签入验证”权限。这与允许 TFS 用户覆盖签入无关。该消息实际上是关于构建服务用户是否具有覆盖签入的能力。为此，您必须是**Project Collection Build Service Accounts**组的成员。

我想知道这是否会导致 TFS 每次都覆盖并签入（即使构建失败），所以我故意破坏了我的构建并使用此权限集进行了尝试。它不允许我继续办理登机手续（即适当失败）。

就我而言，我有多个构建。对于我正在使用的解决方案，仅允许“在构建时覆盖签入验证”是不够的。出于某种原因，我必须对所有其他构建做同样的事情。我无法找到有关为什么会这样的文档。

# iphone - 如何将表格单元格分隔符制作成我们想要的视图

> ID：10926644
> 
> 赞同：2
> 
> 时间：2012-06-07T06:21:39.617
> 
> 标签：iphone, ios, ios4

1.  嗨，我想将表格单元格分隔符设置为以下方式是否有任何编码

    手动制作

![在此处输入图像描述](../Images/98e36484d72eb7299f658c422810740a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T06:22:45.263

你不能。

但是，您可以隐藏单元格分隔符并在每个单元格的底部添加所需的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:28:32.233

您可以通过使用单元格的背景图像来实现这一点。使用页脚黑线为单元格制作图像并隐藏单元格分隔符，使其看起来像上图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T07:37:27.533

您可以将单元格分隔符样式设置为无并向自定义单元格添加图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T06:23:08.597

将部分页脚/标题视图设置为所需的分隔符视图并将单元格分隔符设置为无

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T09:19:32.890

在以下委托方法中，

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
   [cell setSeparatorStyle:UITableViewCellSeparatorStyleNone];
   [cell addSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourImg.png"]]];
} 
```

# ruby-on-rails - 使用 :reject_if 检查空字段

> ID：10926648
> 
> 赞同：0
> 
> 时间：2012-06-07T06:21:47.620
> 
> 标签：ruby-on-rails, model, ruby-on-rails-2

在我使用的 Rails 2.3.5 模型中

```
accepts_nested_attributes_for :questions, :reject_if => lambda { |a| a[:content].blank? } 
```

但是如果有文本框，它的拒绝不是空的。只有在文本框中没有输入任何内容时，我怎样才能让它拒绝？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:50:08.270

您是否将 reject_if 与记录验证混淆？如果条件为真，reject_if 只是告诉应用程序忽略该组嵌套属性。在您的情况下，如果问题的内容为空白，则问题的属性将被忽略。如果您想验证或以其他方式确保问题记录的内容具有非空白值，您可以将验证放入您的问题模型中。

*您也可以考虑将 lambda{} 更改为 proc{}。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:36:05.940

拒绝 if 将保存父对象和任何其他数量的子对象，仅拒绝那些不符合 reject_if 条件的对象。如果这是您想要的，那很好，我建议稍微调试一下，放入打印语句或其他东西，也许

λ { |a| 放 a.inspect; a[:content].空白？}

如果您希望一次性保存整个嵌套对象，请使用验证。

# git - 是否可以在 Windows7 上托管 git

> ID：10926649
> 
> 赞同：3
> 
> 时间：2012-06-07T06:21:50.053
> 
> 标签：git, windows-7

> **可能重复：**
> [在 Windows 上使用 msysgit 设置 Git 服务器](https://stackoverflow.com/questions/1482824/setup-a-git-server-with-msysgit-on-windows)

是否可以在 Windows7 上托管 git？

我想和我的朋友进行社交编码。因为我不想使用 github.com，所以我想知道如何在 windows7 上制作 git 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:40:25.030

Here are some git server You can use, [Bonobo Git Server](https://github.com/jakubgarfield/Bonobo-Git-Server/wiki)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:22:23.610

虽然我*是*一个顽固的 Git 爱好者，但对于这种特殊情况，我宁愿推荐[Fossil](http://fossil-scm.org)的[`fossil server`](http://fossil-scm.org/index.html/doc/trunk/www/reference.wiki#server)or`fossil winserv`模式或[Mercurial](http://mercurial.selenic.com/)的[`hg serve`](http://mercurial.selenic.com/wiki/hgserve)模式。

另请注意，虽然@cen 为您指出[了正确的问题](https://stackoverflow.com/q/1482824/720999)（我也投票决定将这个答案作为完全重复的答案），但如果您所说的“社交编码”是指一群人坐在 LAN 上的代码冲刺之类的东西，那么您也可以不要乱设置复杂的方案，因为 Git 能够使用该`file://`模式通过共享访问 Windows 机器上的存储库。我的意思是，如果你想`C:\devel\project`在 machine上访问 repo `thebox`，你可以把那个文件夹变成一个共享，比如说，`project`然后通过其他机器访问它`file:////thebox/project`. 通常，您需要先在 Windows 资源管理器中访问该共享，以使 Windows 对您进行身份验证并缓存您的凭据。当然，主机也必须正确设置身份验证。无论如何，哪种方式让我们回到我的第一点。;-)

# javascript - 是否有可通过 CORS 访问的 UnicodeData.txt 的官方副本？

> ID：10926654
> 
> 赞同：4
> 
> 时间：2012-06-07T06:22:15.783
> 
> 标签：javascript, unicode, xmlhttprequest, cors

我想回到 JavaScript Unicode 编程。

事实上，我想用 JavaScript 做所有事情，因为我可以在任何有浏览器的地方做。

低级 Unicode 最重要的资源是机器可读文件`UnicodeData.txt`，它可以通过以下方式正式获得`FTP`：

> [ftp://ftp.unicode.org/Public/UNIDATA/UnicodeData.txt](ftp://ftp.unicode.org/Public/UNIDATA/UnicodeData.txt)

但是，如果我在 JavaScript 中做所有事情，我将需要获取该文件以进行处理，因为我不知道有任何 JavaScript 库通过某些包装器等提供数据。

但是当然 JavaScript 只能使用`XMLHttpRequest`，不支持`FTP`.

我以为我也通过`HTTP`at找到了文件`unicode.org`，但它不支持**[CORS（跨域资源共享）](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)**，而且我认为它只是一个古老的 Unicode 1.0 版本。

**那么有人知道我可以`UnicodeData.txt`通过 JavaScript 获取最新的任何 HTTP URL 吗？**

也许谷歌、重症监护室或雅虎托管一些机器可读的文件？或者也许有人甚至制作了它的一个`JSON`版本，所以我可以`JSONP`用来获取它而不是需要它`CORS`？

* * *

^(我为什么要这样做？我想实现[Python 的`unicodedata`模块](http://docs.python.org/library/unicodedata.html)和[Perl 的`Unicode::UCD`模块](http://search.cpan.org/~zefram/perl/lib/Unicode/UCD.pm)所支持的各种功能。我以前做过，但无法访问我的旧代码。我的旧代码也使用 Perl 或 Python 来生成一些 JavaScript 代码和表格。现在作为一个学习练习，我想在 javaScript 中完成代码和表格生成。)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:28:27.847

虽然它不是“官方的”，虽然它提供的数据比原始`UnicodeData.txt`文件更高，但 Mathias Bynens 的[unicode-data](https://github.com/mathiasbynens/unicode-data)项目可能对您有用。它提供了一个 HTTP API，详细信息请参见 GitHub 上的 README 以及[此处](http://mathias.html5.org/data/unicode/)。

# facebook - 没有 ACS 的 Facebook STS

> ID：10926655
> 
> 赞同：0
> 
> 时间：2012-06-07T06:22:18.780
> 
> 标签：facebook, wif, claims-based-identity

是否可以在不使用 acs/azure 的情况下使用带有 WIF 的 facebook 身份验证？或者这是绝对必要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:26:50.357

是的，这是可能的，但您必须编写一些代码。有一个 WIF 扩展为框架添加了 OAuth 2.0 支持：

[https://connect.microsoft.com/site116​​8/Downloads](https://connect.microsoft.com/site1168/Downloads)

您可能会考虑的另一个选择：

[http://facebooknet.codeplex.com/](http://facebooknet.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:42:26.033

您也可以编写自己的 STS 并将[DotNetOpenAuth](http://www.dotnetopenauth.net/)添加到其中。

[IdentityServer](http://identityserver.codeplex.com/)在（隐藏的）页面中使用 OpenId 执行类似的操作。这是基于 Matias Woloski 的帖子，[在此处](http://blogs.southworks.net/mwoloski/2010/07/12/consumer-identities-for-business-transactions/)更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T16:48:05.420

The [Facebook Platform uses OAuth 2.0](http://developers.facebook.com/docs/authentication/) for authentication and authorization. So when you try to build an authentication application for Facebook you are actually looking for a provided which supports Claim Based authentication. WIF does provide ASP.NET and WCF based framework for you to authenticate your application with Facebook through a claim based Identity Framework. ([Windows Azure ACS](http://msdn.microsoft.com/en-us/library/windowsazure/gg185937.aspx) simplify this process to bare minimum level and that is what you pay for.)

# java - 如何解决这个 java.lang.ClassCastException: org.apache.tomcat.dbcp.dbcp.BasicDataSource 不能转换为 org.apache.tomcat.jdbc.pool.DataSource？

> ID：10926659
> 
> 赞同：4
> 
> 时间：2012-06-07T06:22:38.457
> 
> 标签：java, servlets, jndi, tomcat7

我正在尝试使用池在 tomcat 中进行数据库连接，这就是我的上下文：

```
<Resource name="jdbc/slingemp" auth="Container" type="javax.sql.DataSource"
               maxActive="100" maxIdle="30" maxWait="10000"
               username="root" password="root" driverClassName="com.mysql.jdbc.Driver"
               url="jdbc:mysql://localhost:3306/slingemp"/> 
```

这就是我的 web.xml ：

```
<description>MySQL JNDI Test</description>
  <resource-ref>
    <description>DB Connection</description>
    <res-ref-name>jdbc/slingemp</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref> 
```

这就是我连接数据库的方式：

```
 package org.slingemp.jnditest;

import java.io.IOException;
import java.sql.Connection;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.tomcat.jdbc.pool.DataSource;

/**
 * Servlet implementation class JNDILookUpServlet
 */
@WebServlet("/JNDILookUpServlet")
public class JNDILookUpServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public JNDILookUpServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        try {
            Context initContext = new InitialContext();
            Context envContext  = (Context)initContext.lookup("java:/comp/env");
            DataSource ds = (DataSource)envContext.lookup("jdbc/slingemp");
            Connection conn = ds.getConnection();
            if(conn != null)System.out.println("Connected..");
            else System.out.println("Not connected...");
        } catch (Exception e) {
            e.printStackTrace();
        }
        response.sendRedirect("index.jsp");
    }

} 
```

但它给了我以下例外：

```
java.lang.ClassCastException: org.apache.tomcat.dbcp.dbcp.BasicDataSource cannot be cast to org.apache.tomcat.jdbc.pool.DataSource 
```

请帮我解决这个问题，

问候

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-07T06:24:53.713

您只是使用了错误的导入。

替换这个：

```
import org.apache.tomcat.jdbc.pool.DataSource; 
```

有了这个：

```
import javax.sql.DataSource; 
```

`javax.sql.DataSource`是所有`DataSource`实现必须继承的基本接口。通常不建议针对除此接口之外的任何东西进行开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-20T02:13:52.700

有两种选择

1.  更改导入

代替

```
import org.apache.tomcat.jdbc.pool.DataSource; 
```

和

```
import javax.sql.DataSource; 
```

2.  将 DataSourceFactory 添加到`Context.xml`

```
factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-10-23T10:30:34.197

如果您收到此错误，如何解决此*java.lang.ClassCastException*：

> org.apache.tomcat.dbcp.dbcp.BasicDataSource 无法转换为 org.apache.tomcat.jdbc.pool.DataSource

尝试替换：

```
import org.apache.tomcat.jdbc.pool.DataSource; 
```

和：

```
import javax.sql.DataSource; 
```

# php - 从自己的方法调用 PHP 构造函数

> ID：10926669
> 
> 赞同：6
> 
> 时间：2012-06-07T06:23:42.430
> 
> 标签：php, class, methods, constructor, extends

我一直在寻找一种方法来调用类似于“parent::_ *construct”但用于类本身的类的构造函数（类似于“self::* _construct”，尽管这不起作用）。为什么要这样做？考虑以下（这不起作用，顺便说一句）......

```
class A {
  var $name;
  function __construct($name) {
    $this->name = $name;
  }
  function getClone($name) {
    $newObj = self::__construct($name);
    return $newObj;
  }
}

class B extends A {
} 
```

在实际实现中，还有其他属性可以区分 B 类和 A 类，但两者都应该具有“getClone”方法。如果在 A 类的对象上调用它应该产生另一个 A 类的对象，如果在 B 类上调用它应该产生另一个 B 类的对象。

当然，我可以通过在 B 类中重写“getClone”并将类名硬编码到方法中来做到这一点（即，$newObj = new B($name)），但是只对方法进行编码会更好一次，告诉它实例化自己类的对象，无论该类是什么。

PHP会让我这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:30:52.013

您可以使用

```
 $clsName = get_class($this);
 return new $clsName(); 
```

但 niko 的解决方案也有效，对单例模式有用[http://php.net/manual/en/language.oop5.static.php](http://php.net/manual/en/language.oop5.static.php)

从 php 5.3 开始，您可以使用`static`关键字的新功能。

```
<?php

abstract class Singleton {

    protected static $_instance = NULL;

    /**
     * Prevent direct object creation
     */
    final private function  __construct() { }

    /**
     * Prevent object cloning
     */
    final private function  __clone() { }

    /**
     * Returns new or existing Singleton instance
     * @return Singleton
     */
    final public static function getInstance(){
        if( static::$_instance == null){
            static::$_instance = new static();
        }
        return static::$_instance;
    }

}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:35:34.437

您不仅可以使用变量，还可以使用与类相关的特殊关键字，例如“self”或“static”来创建新实例：`$newObj = new static($name);`- 这将创建当前类的新实例。

您可能应该考虑使用对克隆对象的内置支持：`$copy = clone $instance;`- 您可以通过指定魔术方法 __clone() 轻松扩展该运算符在类实例上的行为。

```
class A {
  var $name;
  function __construct($name) {
    $this->name = $name;
  }
  function getClone($name) {
    $newObj = new static($name);
    return $newObj;
  }
}

class B extends A {
}

$tmp = new A('foo');
$a = $tmp->getClone('bar');
// $a instanceof A => true, $a instanceof B => false

$tmp = new B('foo');
$b = $tmp->getClone('bar');
// $b instanceof A => true, $b instanceof B => true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:29:11.580

你想要做的是使用内置的对象克隆功能[http://php.net/manual/en/language.oop5.cloning.php](http://php.net/manual/en/language.oop5.cloning.php)

但是对于您关于调用构造函数的直接问题，您应该做的是创建一个 init() 函数，并将所有 __constructor 代码放入 init() 并让 __constructor 调用 init()

# iphone - Facebook分享窗口问题

> ID：10926672
> 
> 赞同：0
> 
> 时间：2012-06-07T06:24:05.507
> 
> 标签：iphone, ios, facebook, ios4, sharekit

我在我的 iPhone 应用程序上使用 Sharekit 进行 Facebook 共享。我曾使用以下代码在共享窗口中设置应用程序图标。除了第一次登录 Facebook 时，它工作正常。

```
NSURL *url = [NSURL URLWithString:@"http://google.com"];

shareScore_ = [SHKItem URL:url title:[NSString stringWithFormat:@"Share Message" contentType:SHKURLContentTypeUndefined];

shareScore_.facebookURLSharePictureURI = @"http://edibleapple.com/wp-content/uploads/2009/04/apple_rainbow_logo.jpeg";

[SHKFacebook shareItem:shareScore_]; 
```

在第一次登录时，它会在[http://google.com](http://google.com)中显示图像，如果用户已经登录，它会在 icon_url 中显示正确的图像。有什么解决办法吗？

首次登录截图： ![在此处输入图像描述](../Images/0fe600b19a14486b32c6e2b220bfffcf.png)

已经登录截图：

![在此处输入图像描述](../Images/90bf462640716c34baf9d739e3336c93.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:41:23.053

这是 ShareKit 中的一个错误 - 现在已修复。请更新。

# f# - 书上的 AF# 示例，但我什至无法编译

> ID：10926683
> 
> 赞同：2
> 
> 时间：2012-06-07T06:25:13.063
> 
> 标签：f#

我正在阅读“Beginning F#”一书，有一个简短的示例代码列表，用于演示惰性评估，如下所示：

```
lazyValue = lazy ( 2 + 2 )
let actualValue = Lazy.force lazyValue
printfn "%i" actualValue 
```

看起来很简单，但对我来说有一个错误，说函数力没有定义？？？

我对此感到困惑。从msdn搜索，似乎没有答案。

谁能告诉我发生了什么？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T07:47:16.800

出于某种原因，[Lazy.force](http://fsharppowerpack.codeplex.com/SourceControl/changeset/view/68767#685028)现在在 F# PowerPack 中。

由于这个函数没有依赖，建议你从[F# PowerPack](http://fsharppowerpack.codeplex.com/)中拷贝过来，方便使用：

```
module Lazy =
    let force (x: Lazy<'T>) = x.Force() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T14:56:41.183

作者写`Lazy.force`是因为作者之前可能用过OCaml。随着时间的推移，F# 从 OCaml 风格的 API 转向 C# 风格的 API。现在人们写`x.Value`或`x.Force()`。反而。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T06:55:55.217

你的代码应该是

```
 let lazyValue = lazy ( 2 + 2 )
    let actualValue = lazyValue.Force()
    printfn "%i" actualValue 
```

# android - Android ListView 无法点击Item

> ID：10926687
> 
> 赞同：0
> 
> 时间：2012-06-07T06:25:38.760
> 
> 标签：android, android-listview

我有一个列表视图。我实现了 OnItemClickListener 以在单击项目时打开 ContextMenu。

```
lv = getListView();
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            showMenu(view);
        }
    }); 
```

以及创建菜单的代码。

```
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.layout.friend_list_menu, menu);
}

public void showMenu(View v) {
    registerForContextMenu(v);
    openContextMenu(v);
} 
```

我的问题是，当我单击 ListView 的一项时，它确实打开了菜单。但是如果我回到 ListView，我就不能再点击那个项目了。其他项目同理，关闭菜单后无法点击。谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:35:10.743

你设置不正确。设置适配器时注册上下文菜单，而不是单击按钮。

它应该如下所示：

```
setListAdapter(lists);
registerForContextMenu(getListView()); 
```

然后你有你的`onCreateContextMenu`和`onContextItemSelected`方法（我以编程方式创建我的，但你的膨胀的方法也一样）：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.setHeaderTitle("List Operations");
    menu.add(0, v.getId(), 0, "Edit List");
    menu.add(0, v.getId(), 0, "Delete List");
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();
    if (item.getTitle() == "Edit List") {
      //  Do your edit stuff here
    } else if (item.getTitle() == "Delete List") {
      // Do your delete stuff here
    }
    return super.onContextItemSelected(item);
} 
```

`onItemClick`除非您想在短按项目上做某事（上下文菜单是长按），否则您不需要使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:39:16.177

The following code will works.

code:

```
 ListView listview=(ListView)findViewByid(R.id.listview);

   /**** here write appending data to listview*******/
     ArrayAdapter<String> adp=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,/**your list items**/);
     listview.setadapter(adp);
     registerForContextMenu(listview);

   //listview item click listener
  listview.setOnItemClickListener(new OnItemClickListener(){

@Override
public void onItemClick(AdapterView<?> arg0, View v, int p, long arg3) {
    // TODO Auto-generated method stub

 Toast.makeText(getApplicationContext(), "selected" + p, 30).show();
}});

   /****do your context menu code here*******/ 
```

# javascript - 如何在javascript中设置键码组合

> ID：10926691
> 
> 赞同：0
> 
> 时间：2012-06-07T06:25:55.920
> 
> 标签：javascript, jquery

我使用此代码将`Enter`key替换为`TAB`key ：

```
function EnterTab() { if (event.keyCode == 13) event.keyCode = 9; return false; } 
```

我想知道如果我想用`SHIFT`+替换右箭头键该怎么办`TAB`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:29:50.613

```
if(event.keyCode == 39){
    event.shiftKey = true;
    event.keyCode = 9;
    return false;
} 
```

# javascript - Google Feed API 超时

> ID：10926696
> 
> 赞同：1
> 
> 时间：2012-06-07T06:26:31.713
> 
> 标签：javascript, timeout, feed

我已经看到它在一些地方断言[Google Feed API](https://developers.google.com/feed/v1/devguide)的超时时间非常短，因此对慢速外部 Feed 的调用会相对较快地返回错误。

超时时间有多短？

[源代码](https://www.google.com/uds/api/feeds/1.0/77f89919ef841f93359ce886504e4e3f/default+en.I.js)没有迹象表明我已经能够找到。我也尝试在调试器中设置断点，但到目前为止都失败了。

# android - 按下主页按钮后，如何在 android 中启动应用程序

> ID：10926699
> 
> 赞同：0
> 
> 时间：2012-06-07T06:27:09.380
> 
> 标签：android, android-layout

嗨，我正在做一个 android 应用程序。在应用程序用户的中间单击主页按钮，该时间应用程序关闭，然后 agian 用户打开相同的应用程序意味着在之前的活动中，我按下主页按钮打开页面。但我需要我的应用程序每次单击主页按钮后我还需要关闭应用程序，然后用户再次打开应用程序，我每次都需要打开第一页。我使用一些代码但这里主页按钮像后退按钮一样工作。如果有人有想法建议我...

```
 @Override
public void onAttachedToWindow()
{  
    Log.i("TESTE", "onAttachedToWindow");
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();  
}
 public boolean onKeyDown(int keyCode, KeyEvent event) {
     if (keyCode == KeyEvent.KEYCODE_HOME) {
         Log.i("TESTE", "BOTAO HOME");

         finish();

         return true;
     }
     return super.onKeyDown(keyCode, event);    
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:35:25.783

每当您按下主页按钮活动时覆盖该活动的 onPause 方法，并且当您打开应用程序时使用您的 onResume 功能。如果您愿意从某个特定点启动您的应用程序，请使用 Preferences 变量，在主要活动中检查首选项值以从特定点启动您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:31:51.923

只需覆盖您的`onResume()`方法即可启动您的第一个`Activity`应用程序。

```
@Override
protected void onResume() {
    super.onResume();
    // Start your first Activity as you would normally do
} 
```

你现在不需要覆盖你的`Home`按钮。

* * *

编辑：

由于`onResume()`在调用 an 时也是第一次`Activity`调用，因此，您需要有一个计数器来了解应用程序是第一次运行还是在暂停后实际恢复。

```
int counter = 1;

@Override
protected void onResume() {
    super.onResume();
    if(counter == 1)
      counter++ ;
    else
      //Start your first Activity as you would normally do
} 
```

# php - PHP MySQL，带有页面的嵌套/线程注释，LIMIT 10 OFFSET 等

> ID：10926701
> 
> 赞同：0
> 
> 时间：2012-06-07T06:27:18.647
> 
> 标签：php, mysql, comments, threaded-comments

我一直在寻找答案，但似乎无法弄清楚，所以我希望这里的人可以提供帮助。我只是想找出一种方法，只在一个页面上显示 XX 评论，允许这个过程嵌套/线程评论，当用户可能有超过 1,000 条评论时，不必在一页上显示所有评论。如果我尝试使用一个 mysql 查询而不是 2 个来执行此操作我必须这样做。

这是我的 MySQL 表（它是一个尚未发布的新表，因此我可以根据需要进行更改）

```
CREATE TABLE IF NOT EXISTS `comments_threaded` (
`id` bigint(255) NOT NULL AUTO_INCREMENT,
`toUid` bigint(255) NOT NULL,
`fromUid` bigint(255) NOT NULL,
`Pid` bigint(255) NOT NULL,
`Puid` bigint(255) NOT NULL,
`Pseen` int(2) NOT NULL,
`seen` int(2) NOT NULL,
`comment` text NOT NULL,
`tim` int(20) NOT NULL,
`Pip` varchar(30) NOT NULL,
PRIMARY KEY (`id`),
KEY `toUid` (`toUid`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ; 
```

id = 评论的 id 自动增加
toUid = 是针对哪个个人资料/用户的
fromUid = 评论来自谁
Pid = 父 id 的 id..
Puid = 父 id 的用户 id 编号
Pseen = 如果是父user has seen the comment
seen = if the toUid has seen the comment
comment = fromUid 留下的评论
tim = 留下的时间（）
Pid = 人的 ip

无论如何，我正在尝试对用户个人资料发表评论，如果他们想回复他们，他们会在其中嵌套对上一个/父评论的回复。
我想将页面上的评论数量限制为 10 或 20，无论我觉得合适，这个数字还包括嵌套评论。

例如，如果我想在第 1 页上发表 10 条评论

```
comment 1
--comment 2 replied to comment 1
--comment 3 replied to comment 1
----comment 4 replied to comment 3
------comment 5 replied to comment 4
comment 6
--comment 7 replied to comment 6
--comment 8 replied to comment 6
comment 9
--comment 10 replied to comment 9 
```

然后在第 2 页，如果第一条评论是对另一条评论的回复，它将从他们回复的原始父评论开始，如果仍然只能在该页面上保留 10 条评论，如果不是的话可以在顶部显示额外的评论，或者可能在底部显示第 1 页的额外评论。我不确定哪个会更容易。

```
comment 9
--comment 10 replied to comment 9
----comment 11 replied to comment 10
----comment 12 replied to comment 10
--comment 13 replied to comment 12
comment 13
comment 14
--comment 15 replied to comment 14
--comment 16 replied to comment 14
----comment 17 replied to comment 16
----comment 18 replied to comment 17
--comment 19 replied to comment 17
comment 20 
```

我在想一个 MySQL IN 子句会这样做，但我得到一个错误..“试过 -

```
SELECT id, fromUid, Pseen, seen, comment, tim 
FROM comments_threaded 
WHERE toUid = '".mysql_real_escape_string($toUid)."' 
    OR Pid IN (
        SELECT id, fromUid, Pseen, seen, comment, tim 
        FROM comments_threaded 
        WHERE toUid = '".mysql_real_escape_string($toUid)."'
    ) 
LIMIT 10 
```

并且得到

```
Operand should contain 1 column(s) 
```

这是我以前从未见过的..

如果可以的话，感谢您的寻找和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:45:01.773

If you use a subquery in `IN()`, that subquery must select 1 and only 1 column. Yours is selecting 6\.

Also, for this kind of nested content, you may want to consider using the nested set model.

# ios - 点击按钮时如何弹出EditText框，objective c，ios

> ID：10926705
> 
> 赞同：-2
> 
> 时间：2012-06-07T06:27:42.580
> 
> 标签：ios, button, popup, tap

如何在使用目标 c 点击按钮时弹出“编辑文本”框。我正在尝试做，但我需要一些帮助。有人可以为我提供一些示例吗。我进行了谷歌搜索，但无法找到解决方案。请一些身体帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:04:32.257

好的，如果我正确理解了您的需求，这将相当容易。

首先，你需要创建一个新的 UIViewController，比如说 TextViewController

在 TextViewController 中放置你的 UITextView，让它尽可能大，改变字体或任何你可能需要/想要的东西。

在此之后，您需要做的就是在 UIPopoverController ( [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html) ) 中显示 TextViewController 代码应该类似于这

> TextViewController* textViewController = [[TextViewController alloc] init];
> 
> UIPopoverController* aPopover = [[UIPopoverController alloc] initWithContentViewController:textViewController];
> 
> aPopover.popoverContentSize = CGSizeMake(320.0,110.0); //设置弹出框的大小
> 
> [aPopover presentPopoverFromRect:yourButton.frame inView:self allowedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

其中 textViewController 是带有 UITextView 的视图控制器，而 yourButton 是您点击的圆形按钮。

This tutorial should also be useful: [http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial](http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial)

# php - 使用 PHP GD 对另一张图像进行屏蔽

> ID：10926712
> 
> 赞同：0
> 
> 时间：2012-06-07T06:28:29.493
> 
> 标签：php, transparency, gd

请看这个问题：[PHP GD Use one image to mask another image, including contrast to](https://stackoverflow.com/questions/7203160/php-gd-use-one-image-to-mask-another-image-including-transparency) the rules around here say for users to create new questions rather than revisited old questions and ask for support

我一直在使用这个脚本来启用透明遮罩 - （可能的）区别是源图像具有透明度，但似乎下面的代码仅在输入 PNG 没有透明度时才有效。有人可以看看我是否做错了什么？

我在下面尝试做的事情： 1\. 抓取一个 $source 图像 2\. 调整它的大小并将其保存为 pjg.png，保持透明度（这工作正常） 3\. 用另一个 PNG 掩盖结果图像。

信息：

*   image.png 具有透明度。
*   mask1.png 是黑色背景上的白色椭圆，没有透明度
*   最后保存的图像上有黑色，此时它应该始终保持透明度。

    ```
    <?php
    $data       = file_get_contents('assets/img/image.png');
    $source     = imagecreatefromstring( $data);

    // Set the percentage resize

    $percent = 0.5;

    // Get new dimensions
    list($width, $height) = getimagesize('assets/img/image.png');
    $new_width = $width * $percent;
    $new_height = $height * $percent;

    $image_p = imagecreatetruecolor($new_width, $new_height);
    imagealphablending($image_p, false);
    imagesavealpha( $image_p, true );

    imagecopyresampled($image_p, $source, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

    imagepng($image_p, "assets/img/pjg.png");

    $mask_id = 1;

    create_mask( $image_p, $mask_id ); 

    function create_mask( &$picture, $mask_id) {
    // Image masking using PHP
    // https://stackoverflow.com/questions/7203160/php-gd-use-one-image-to-mask-another-image-including-transparency

    $mask = imagecreatefrompng( 'assets/img/masks/mask'.$mask_id.'.png' );   // The mask is a white-on-black png

    // Get sizes and set up new picture
    $xSize = imagesx( $picture );
    $ySize = imagesy( $picture );
    $newPicture = imagecreatetruecolor( $xSize, $ySize );

    imagesavealpha($newPicture, true);  
    imagefill( $newPicture, 0, 0, imagecolorallocatealpha( $newPicture, 0, 0, 0, 127 ) );

    // Resize mask if necessary
    if( $xSize != imagesx( $mask ) || $ySize != imagesy( $mask ) ) {
        $tempPic = imagecreatetruecolor( $xSize, $ySize );
        imagecopyresampled( $tempPic, $mask, 0, 0, 0, 0, $xSize, $ySize, imagesx( $mask ), imagesy( $mask ) );
        imagedestroy( $mask );
        $mask = $tempPic;
    }

    // Perform pixel-based alpha map application
    for( $x = 0; $x < $xSize; $x++ ) {
        for( $y = 0; $y < $ySize; $y++ ) {
            $alpha = imagecolorsforindex( $mask, imagecolorat( $mask, $x, $y ) );
            $alpha = 127 - floor( $alpha[ 'red' ] / 2 );
            $color = imagecolorsforindex( $picture, imagecolorat( $picture, $x, $y ) );
            imagesetpixel( $newPicture, $x, $y, imagecolorallocatealpha( $newPicture, $color[ 'red' ], $color[ 'green' ], $color[ 'blue' ], $alpha ) );
        }
    }

    $salt = random_string('alnum', 8); // Another function generating a string, not important
    $now = time();
    $new_filename = $now."_".$salt .".png";

    // Save it Locally using a unique name
    imagepng($newPicture, "assets/img/uploads/cropped/".$new_filename);

    // Copy back to original picture
    imagedestroy( $picture );
    $picture = $newPicture;

    } 
    ```

如果有人能指出为什么输出图像没有保持其透明度，那么它会为您提供一杯不错的冰镇啤酒。

谢谢！

PJG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:37:06.823

我已经解决了。原始脚本没有检查源图像的透明度。下面的脚本检查源图像的像素透明度，并采取相应措施。以下脚本在 PNG 图像上执行 shap 遮罩，并保持源图像的透明度。

```
<?php
$data       = file_get_contents('assets/img/image.png');
$source     = imagecreatefromstring( $data);

// Set the percentage resize

$percent = 0.5;

// Get new dimensions
list($width, $height) = getimagesize('assets/img/image.png');
$new_width = $width * $percent;
$new_height = $height * $percent;

$image_p = imagecreatetruecolor($new_width, $new_height);
imagealphablending($image_p, false);
imagesavealpha( $image_p, true );

imagecopyresampled($image_p, $source, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

imagepng($image_p, "assets/img/pjg.png");

$mask_id = 1;

create_mask( $image_p, $mask_id ); 

function create_mask( &$picture, $mask_id) {
// Image masking using PHP
// http://stackoverflow.com/questions/7203160/php-gd-use-one-image-to-mask-another-image-including-transparency

$mask = imagecreatefrompng( 'assets/img/masks/mask'.$mask_id.'.png' );   // The mask is a white-on-black png

// Get sizes and set up new picture
$xSize = imagesx( $picture );
$ySize = imagesy( $picture );
$newPicture = imagecreatetruecolor( $xSize, $ySize );

imagesavealpha($newPicture, true);  
imagefill( $newPicture, 0, 0, imagecolorallocatealpha( $newPicture, 0, 0, 0, 127 ) );

// Resize mask if necessary
if( $xSize != imagesx( $mask ) || $ySize != imagesy( $mask ) ) {
    $tempPic = imagecreatetruecolor( $xSize, $ySize );
    imagecopyresampled( $tempPic, $mask, 0, 0, 0, 0, $xSize, $ySize, imagesx( $mask ), imagesy( $mask ) );
    imagedestroy( $mask );
    $mask = $tempPic;
}

// Perform pixel-based alpha map application
for( $x = 0; $x < $xSize; $x++ ) {
    for( $y = 0; $y < $ySize; $y++ ) {
         $alpha = imagecolorsforindex( $mask, imagecolorat( $mask, $x, $y ) );

            if(($alpha['red'] == 0) && ($alpha['green'] == 0) && ($alpha['blue'] == 0) && ($alpha['alpha'] == 0))
            {
                // It's a black part of the mask
                imagesetpixel( $newPicture, $x, $y, imagecolorallocatealpha( $newPicture, 0, 0, 0, 127 ) ); // Stick a black, but totally transparent, pixel in.
            }
            else
            {

                // Check the alpha state of the corresponding pixel of the image we're dealing with.    
                $alphaSource = imagecolorsforindex( $picture, imagecolorat( $picture, $x, $y ) );

                if(($alphaSource['alpha'] == 127))
                {
                    imagesetpixel( $newPicture, $x, $y, imagecolorallocatealpha( $newPicture, 0, 0, 0, 127 ) ); // Stick a black, but totally transparent, pixel in.
                } 
                else
                {
                    $color = imagecolorsforindex( $picture, imagecolorat( $picture, $x, $y ) );
                    imagesetpixel( $newPicture, $x, $y, imagecolorallocatealpha( $newPicture, $color[ 'red' ], $color[ 'green' ], $color[ 'blue' ], $color['alpha'] ) ); // Stick the pixel from the source image in
                }

            }
    }
}

$salt = random_string('alnum', 8); // Another function generating a string, not important
$now = time();
$new_filename = $now."_".$salt .".png";

// Save it Locally using a unique name
imagepng($newPicture, "assets/img/uploads/cropped/".$new_filename);

// Copy back to original picture
imagedestroy( $picture );
$picture = $newPicture;

}
?> 
```

为阅读干杯——看来我以后要给自己买杯啤酒了：）

PG

# iphone - 如何删除 iCloud 键值数据

> ID：10926715
> 
> 赞同：4
> 
> 时间：2012-06-07T06:28:47.877
> 
> 标签：iphone, ios, sdk, icloud

我正在使用 iCloud 键值数据存储解决方案，所以我不使用文档 (UIDocument)。我已经实现了同步，它似乎运行良好。但是，我现在需要做一些更详细的测试，我不知道如何强制删除 iCloud 上的数据。

如何从我的 iCloud 帐户中删除数据以进行测试？

我试过这个：

```
[[NSUbiquitousKeyValueStore defaultStore] setArray:[[NSArray alloc] init] forKey:@"iCloud_BG_KEY"]; 
```

我也试过这个：

```
[[NSUbiquitousKeyValueStore defaultStore] setArray:nil forKey:@"iCloud_BG_KEY"]; 
```

以及关闭我的应用程序的 iCloud 备份（设置 > iCloud > 存储和备份 > 管理存储 > [my_backup_device] > 显示所有应用程序 > [我的应用程序]）。

当然，我正在删除我的应用程序并重新构建和运行 xcode。

如何强制删除 iCloud 文件（同样，用于键值数据存储）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T06:39:05.503

怎么样

```
[[NSUbiquitousKeyValueStore defaultStore] removeObjectForKey:@"key"]; 
```

?

# php - 在php中的2个页面之间为单个变量传递多个值

> ID：10926716
> 
> 赞同：0
> 
> 时间：2012-06-07T06:28:55.717
> 
> 标签：php, session, web

我正在为手机开发一个 php 网站。它的主页上有几部手机的图片，都有一个唯一的 ID。（1,2,3，...）。所以当我点击一个图片时，页面应该被重定向到另一个页面（Details.php）和显示与我刚刚单击的图像相关的图像和信息。我尝试使用会话变量来执行此操作，但如果是这样，我将不得不对每部手机使用单独的会话变量。我该如何解决这个问题。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:32:53.840

您可以在每个链接的末尾`details.php`添加类似于`$phoneId = $_GET["id"]`并附加`?id=#`（`#`电话 ID 在哪里）的代码。

## 例子

`$phones`列出电话，这假设您有一个包含数据的数组

```
foreach ($phones as $phone) {
    echo "<a href='details.php?id=" . $phone["id"] . "'><img src='images/phone" . $phone["id"] . ".png'></a>";
} 
```

确定用户选择的电话（在 中`details.php`），还假设您有一个`$phones`数组

```
// Check if an ID was sent
if (empty($_GET["id"])) {
    // The user didn't select a phone
} else {
    // Get the phone ID
    $phoneID = $_GET["id"];

    // Check if the ID is valid
    if (array_key_exists($phoneID, $phones)) {
        // Select the phone
        $phone = $phones[$phoneID];
    } else {
        // The ID is invalid
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:52:09.677

您可以使用 GET 变量来传递这些信息。

index.php 或列出电话的任何位置

```
<a href="details.php?phoneid=1"><img src="phone01.jpg"></a>
<a href="details.php?phoneid=2"><img src="phone02.jpg"></a>
<a href="details.php?phoneid=3"><img src="phone03.jpg"></a> 
```

在 details.php 中。你可以用这个

```
if(isset($_GET['phoneid'])) {
    $phoneid = $_GET['phoneid'];
    switch ($phoneid) {
        case '1':
            echo 'Phone 1';
            break;
        case '2':
            echo 'Phone 2';
            break;
        case '3':
            echo 'Phone 3';
            break;
    }
} else {
    // no value of phoneid
} 
```

另一种更简单的方法是使用 mySQL 列出所有电话。

# c# - 从 C# 下拉列表中查询 SQL 表

> ID：10926717
> 
> 赞同：0
> 
> 时间：2012-06-07T06:28:57.067
> 
> 标签：c#, sql, visual-studio-2010, ssms

我在一个表单上有一个下拉列表，它从 sql 表中填充拼图 id 代码。当用户选择一个拼图代码说“puzzle2”时，我想要下一个表单（播放：表单）来显示这个拼图。目前我只能让它在页面上显示第一个拼图“puzzle1”。

该数据库由作为谜题类型的puzzleID 和作为谜题问题本身的puzzle 组成。

```
public partial class Play : Form

{

    public Play()
    {
        InitializeComponent();

        SqlConnection conn = new SqlConnection("Data Source=LAURA-PC;Initial Catalog=Sudoku;Integrated Security=True");
        conn.Open();

        SqlCommand command = conn.CreateCommand();
        command.CommandText = "Select puzzle from Puzzle";
        command.CommandType = CommandType.Text;

        SqlDataReader reader = command.ExecuteReader();
        if (reader.Read())
        {
            string[] tokens = ((string)reader[0]).Split(';');

            textBox1.Text = tokens[0];
            textBox2.Text = tokens[1];
            textBox3.Text = tokens[2];
            textBox4.Text = tokens[3];
            textBox5.Text = tokens[4];
            textBox6.Text = tokens[5];
            textBox7.Text = tokens[6];
            textBox8.Text = tokens[7];
            textBox9.Text = tokens[8];
            textBox10.Text = tokens[9];
            textBox11.Text = tokens[10];
            textBox12.Text = tokens[11];
            textBox13.Text = tokens[12];
            textBox14.Text = tokens[13];
            textBox15.Text = tokens[14];
            textBox16.Text = tokens[15];
        }
        conn.Close();

    } 
```

我知道我需要从前一种形式的下拉列表中实现某种全局变量，然后尝试将该变量过滤到 Where 语句中？但我没有运气。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:34:03.527

您可以将静态类作为共享对象的公共场所。所有类都可以看到这个类并使用它的成员。

```
public static class CommonClass
{
   public static String puzzleCode ;
} 
```

您也可以在第二个表单上有一个属性来接受拼图 id。像这样 ：

```
public class SecondForm : Form
{
   private String _puzzleId ;

   public String PuzzleId
   {
      get { return _puzzleId ; }
      set { _puzzleId = value ; }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:50:56.733

**1\. 将变量传递给表单。**

```
Play frmPlay = new Play(puzzleId);
frmPlay.Show();

your Play class will be changed by this

public Play(int puzzleId)
{ 
 //Unchanged code
 command.CommandText = "Select puzzle from Puzzle where puzzleId = "+puzzleId;

 //Unchanged code
} 
```

**2.通过delegate传递数据**

**将委托签名添加到 form1，如下所示：**

```
public delegate void delPassData(int puzzleId);

Play frmPlay= new Play ();
delPassData del=new delPassData(frmPlay.SetPuzzleId);
del( Convert.ToInt32(cmBxPuzzleId.SelectedValue));
frmPlay.Show();

**In Play form write this code**

private int m_PuzzleId;
public void SetPuzzleId(int puzzleId )
{
    m_PuzzleId = puzzuleId; 
} 
```

# c#-3.0 - 错误 C#.NET 3.0：'CreatePageSection(ref string, ref string, ref object)' 的最佳重载方法匹配有一些无效参数

> ID：10926725
> 
> 赞同：1
> 
> 时间：2012-06-07T06:29:22.667
> 
> 标签：c#-3.0

我有以下问题。我遇到了有关默认参数的错误。我为重载添加了一段简单的代码。现在我进入新代码（第 3 行：CreatePageSection(sItemID, "", null);) 给出了标题中提到的错误。

我在其他主题中寻找答案，但我找不到问题。有人能帮我吗？

代码可以在这里找到：

```
public void CreatePageSection(ref string sItemID)
    {
        CreatePageSection(sItemID, "", null);
    }

public void CreatePageSection(ref string sItemID, ref string sFrameUrl, ref object vOnReadyState)
    {

        if (Strings.InStr(msPresentPageSections, "|" + sItemID + "|", 0) > 0) {
            return;
        }
        msPresentPageSections = msPresentPageSections + sItemID + "|";

        string writeHtml = "<div class=" + MConstants.QUOTE + "PageSection" + MConstants.QUOTE + " id=" + MConstants.QUOTE + "Section" + sItemID + "Div" + MConstants.QUOTE + " style=" + MConstants.QUOTE + "display: none;" + MConstants.QUOTE + ">";
        this.WriteLine_Renamed(ref writeHtml);
        //UPGRADE_WARNING: Couldn't resolve default property of object vOnReadyState. Click for more: 'ms-help://MS.VSCC.v90/dv_commoner/local/redirect.htm?keyword="6A50421D-15FE-4896-8A1B-2EC21E9037B2"'
        //UPGRADE_NOTE: IsMissing() was changed to IsNothing_Renamed(). Click for more: 'ms-help://MS.VSCC.v90/dv_commoner/local/redirect.htm?keyword="8AE1CB93-37AB-439A-A4FF-BE3B6760BB23"'
        writeHtml = "  <iframe id=" + MConstants.QUOTE + sItemID + "Frame" + MConstants.QUOTE + " name=" + MConstants.QUOTE + sItemID + "Frame" + MConstants.QUOTE + " frameborder=" + MConstants.QUOTE + "0" + MConstants.QUOTE + (!string.IsNullOrEmpty(sFrameUrl) ? " src=" + MConstants.QUOTE + sFrameUrl + MConstants.QUOTE : "") + ((vOnReadyState == null) ? "" : " onreadystatechange=" + MConstants.QUOTE + Convert.ToString(vOnReadyState) + MConstants.QUOTE) + ">";
        this.WriteLine_Renamed(ref writeHtml);
        writeHtml = "  </iframe>";
        this.WriteLine_Renamed(ref writeHtml);
        writeHtml = "</div>";
        this.WriteLine_Renamed(ref writeHtml);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:42:29.373

你必须通过引用传递参数

```
public void CreatePageSection(ref string sItemID)
{
    var missingString = String.Empty;
    object missingObject = null;
    CreatePageSection(ref sItemID, ref missingString, ref  missingObject);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:35:39.157

由于您没有操作`sFrameUrl`and ，请从这些参数`vOnReadyState`中删除关键字。`ref`

请参阅：http: [//msdn.microsoft.com/en-us/library/14akc2c7 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/14akc2c7(v=vs.71).aspx)

hth

马里奥

# javascript - onclick 复选框不起作用

> ID：10926729
> 
> 赞同：1
> 
> 时间：2012-06-07T06:30:00.363
> 
> 标签：javascript

我制作了一个显示/隐藏下拉列表的脚本， `onClick`这里是代码。

**HTML：**

```
 <input type="checkbox" name="user_choice" id="user_choice" onclick="checktoggle();"/>
 <label for="user_choice">Show Map</label>
 </br>
 <select name="radius_out_map" id="radius_out_map" style="display:none">
     <option value="0">-- Select Distance Radius --</option>
     <option value="10">10 Km.</option>
     <option value="20">20 Km.</option>
     <option value="50">50 Km.</option>
     <option value="100">100 Km.</option>
     <option value="300">300 Km.</option>
     <option value="500">500 Km.</option>
 </select> 
```

**JAVASCTIPT：**

```
<script language="javascript">
    function checktoggle() {
        var textboxid = document.getElementById('radius_out_map');
     if (textboxid.style.display == 'none') {
         textboxid.style.display = 'show';
     }
     else {
         textboxid.style.display = 'none';
     }
}
</script> 
```

为什么这个脚本不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T06:32:26.243

代替

```
textboxid.style.display = 'show' 
```

用这个：

```
textboxid.style.display = 'block' 
```

show 不是有效的显示选项，请使用内联或块显示元素。

[在此处](http://www.w3schools.com/cssref/pr_class_display.asp)检查有效值列表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:32:34.417

“显示”无效。您将需要使用“内联”或“阻止”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:34:29.547

改变

```
textboxid.style.display = 'show' 
```

到

```
textboxid.style.display = 'block' 
```

显示无效。

# ios - 需要将 NSMutableString 对象从视图控制器传递给 AppDelegate

> ID：10926733
> 
> 赞同：0
> 
> 时间：2012-06-07T06:30:41.233
> 
> 标签：ios, delegates, pass-data

我已经挣扎了 6 个小时，试图将可变字符串对象从视图控制器传递到 AppDelegate。我已经看到很多关于在视图控制器之间传递数据的评论，并且已经完成了其中一些教程，但似乎无法弄清楚如何将数据传递给 AppDelegate。

感谢您的任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:33:05.603

```
MyApplication *appDelegate = (MyApplication *)[[UIApplication sharedApplication] delegate];
[appDelegate appDelegateFunction:myString]; 
```

[在此处](https://stackoverflow.com/questions/5082738/ios-calling-app-delegate-method-from-viewcontroller)的 SO 问题上 找到

# zip - 在 Windows 8 上解压缩存档

> ID：10926734
> 
> 赞同：8
> 
> 时间：2012-06-07T06:30:42.120
> 
> 标签：zip, microsoft-metro, zlib, c++-cx

我以前使用过 MiniZip（zlib 包装器）来解压缩档案。MiniZip 不能用于 Metro 应用程序，因为它使用“iowin32.c”中已弃用的 API -- CreateFile() 和 SetFilePointer()。

我认为这将是一个简单的修复，并使用 CreateFile() 和 SetFilePointer() 创建了“iowinrt.c”，并用 CreateFile2() 和 SetFilePointerEx() 替换。虽然通过这种方式我获得了一个仅使用经过批准的 Win8 API 的 MiniZip 版本，但它仍然没有用——我忘记了沙盒。如果我使用 FileOpenPicker() 选择一个文件并将其路径传递给我修改后的 MiniZip，我仍然无法打开它—— CreateFile2() 将失败并显示“访问被拒绝”。信息。

因此，现在用于文件访问的旧 C API 似乎几乎没用了；我的理解是，为了解决这个问题，我需要使用新的异步文件访问在 C++/CX 中重新实现我的“iowinrt”。还有其他选择吗？我想我在某处看到 WinRT 确实具有压缩/解压缩功能，但它仅适用于单个文件，而不适用于存档。

附加要求，我需要它在内存中工作。

有一刻我以为我有一个通过 .NET Framework 4.5 的解决方案：

1.  我找到了有关如何创建可从 C++/CX 使用的 .NET 类的以下信息：http: [//social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/3ff383d0-0c9f-4a30- 8987-ff2b23957f01](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/3ff383d0-0c9f-4a30-8987-ff2b23957f01)

2.  .NET Framework 4.5 在 System.IO.Compression 中包含 ZipArchive 和 ZipArchiveEntry 类：http: [//msdn.microsoft.com/en-us/library/system.io.compression.ziparchive%28v=vs.110%29.aspx# Y0](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive%28v=vs.110%29.aspx#Y0) http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchiveentry%28v=vs.110%29.aspx#Y0

我想我可以创建带有 WinMD 输出类型的 C# Metro 类库，公开 ZipArchive 和 ZipArchiveEntry，然后在我的 C++/CX 项目中使用它。但是，即使它起作用，它也不会在内存中起作用；似乎 ZipArchive 和 ZipArchiveEntry 仅适用于文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T23:44:56.380

从存档工作中读取。下面的解释和代码，但在这一点上实际上只是一个 hack，看看它是否可能。我只是一直在修改东西，直到我得到一些工作为止；这只是一个有效的例子，绝不是生产质量代码（它不能重新进入开始）。毫无疑问，有很多事情是不好的/不必要的/wtf，所以请随意使用评论来帮助清理。

如前所述，将路径传递到库已不再足够——除非文件位于 KnownFolders（文档、家庭、媒体、音乐、图片、可移动或视频）之一中，否则您最终会收到“拒绝访问”消息。相反，库必须能够接受从 FileOpenPicker 返回的 StorageFile^。至少我还没有找到任何其他方法来做到这一点，也许有人知道更好？

MiniZip 通过 iowin32.h/.c 为 zlib 提供 Windows 文件系统访问层。这仍然适用于旧式应用程序的桌面模式，但不适用于 Metro 应用程序，因为它使用已弃用的 API 并依赖于路径。要让 MiniZip 在 Windows 8 上运行，需要完全重写 iowin32。

为了让事情再次运行，首先要找到一种方法将 StorageFile^ 一直传递到 iowinrt（Windows 8 替换 iowin32）。幸运的是，这不是问题，因为 MiniZip 提供了两种风格的打开文件函数——一种接受指向 char 的指针，另一种接受指向 void 的指针。由于 ^ 仍然只是一个指针，因此将 StorageFile^ 转换为 void* 而不是返回 StorageFile^ 可以正常工作。

现在我能够将 StorageFile^ 传递给我的新 iowinrt，下一个问题是如何使新的异步 C++ 文件访问 API 与 Zlib 一起工作。为了支持非常旧的 C 编译器，Zlib 是用旧的 K&R 风格的 C 编写的。VisualStudio 编译器将拒绝将其编译为 C++，它必须编译为 C，而新的 iowinrt 当然必须编译为 C++ - 保持这一点创建项目时请牢记。关于 VS 项目需要注意的其他事项是，我将它作为 Visual C++ Windows Metro 风格的静态库，虽然 DLL 也应该可以工作，但是你还必须定义宏来导出 MiniZip API（我没有尝试过，不知道是哪个宏你必须使用）。我想我还必须设置“使用 Windows 运行时扩展”（/ZW），设置“不使用预编译头文件”

至于 iowinrt 本身，我把它分成了两个文件。一个拥有两个密封的 ref 类——读取器和写入器对象；他们接受 StorageFile^。Reader 实现了 Read、Tell、SeekFromBeginning、SeekFromCurrent 和 SeekFromEnd（3 个 Seek 方法的原因是因为 ref 密封类必须坚持使用 RT 类型，并且显然不包括枚举，所以我只是采取了简单的方法）。Writer 目前只实现了 Write，还没有使用过。

这是 FileReader 代码：

```
 #include "pch.h"
    #include "FileAccess.h"  // FileReader and FileWriter

    using namespace Concurrency;
    using namespace Windows::Security::Cryptography;
    using namespace CFileAccess;

    FileReader::FileReader(StorageFile^ archive)
    {
        if (nullptr != archive)
        {
            create_task(archive->OpenReadAsync()).then([this](IRandomAccessStreamWithContentType^ archiveStream)
            {
                if (nullptr != archiveStream)
                {
                    _readStream = archiveStream;
                }
            }).wait();
        }
    } // end of constructor

    int32 FileReader::Read(WriteOnlyArray<byte>^ fileData)
    {
        int32 bytesRead = 0;

        if ((nullptr != _readStream) && (fileData->Length > 0))
        {
            try
            {
                auto inputStreamReader = ref new DataReader(_readStream);
                create_task(inputStreamReader->LoadAsync(fileData->Length)).then([&](task<unsigned int> dataRead)
                {
                    try
                    {
                        bytesRead = dataRead.get();
                        if (bytesRead)
                        {
                            inputStreamReader->ReadBytes(fileData);
                        }
                    }
                    catch (Exception^ e)
                    {
                        bytesRead = -1;
                    }

                    inputStreamReader->DetachStream();
                }).wait();
            }
            catch (Exception^ e)
            {
                bytesRead = -1;
            }
        }

        return (bytesRead);
    } // end of method Read()

    int64 FileReader::Tell(void)
    {
        int64 ret = -1;

        if (nullptr != _readStream)
        {
            ret = _readStream->Position;
        }

        return (ret);
    } // end of method Tell()

    int64 FileReader::SeekFromBeginning(uint64 offset)
    {
        int64 ret = -1;

        if ((nullptr != _readStream) && (offset < _readStream->Size))
        {
            _readStream->Seek(offset);
            ret = 0;
        }

        return (ret);
    } // end of method SeekFromBeginning()

    int64 FileReader::SeekFromCurrent(uint64 offset)
    {
        int64 ret = -1;

        if ((nullptr != _readStream) && ((_readStream->Position + offset) < _readStream->Size))
        {
            _readStream->Seek(_readStream->Position + offset);
            ret = 0;
        }

        return (ret);
    } // end of method SeekFromCurrent()

    int64 FileReader::SeekFromEnd(uint64 offset)
    {
        int64 ret = -1;

        if ((nullptr != _readStream) && ((_readStream->Size - offset) >= 0))
        {
            _readStream->Seek(_readStream->Size - offset);
            ret = 0;
        }

        return (ret);
    } // end of method SeekFromEnd() 
```

iowinrt 位于 MiniZip 和 FileReader（和 FileWriter）之间。在这里给出所有内容太长了，但这应该足以重建其余部分，因为它与不同的函数名称基本相同，加上一堆很明显的 fill_winRT_filefuncxxx()：

```
 #include "zlib.h"
    #include "ioapi.h"
    #include "iowinrt.h"
    #include "FileAccess.h"

    using namespace Windows::Security::Cryptography;
    using namespace Platform;
    using namespace CFileAccess;

    static FileReader^ g_fileReader = nullptr;
    static FileWriter^ g_fileWriter = nullptr;
    static StorageFile^ g_storageFile = nullptr;

    [...]

    static voidpf winRT_translate_open_mode(int mode)
    {
        if (nullptr != g_storageFile)
        {
            if ((mode & ZLIB_FILEFUNC_MODE_READWRITEFILTER)==ZLIB_FILEFUNC_MODE_READ)
            {
                g_fileWriter = nullptr;
                g_fileReader = ref new FileReader(g_storageFile);
            }
            else if (mode & ZLIB_FILEFUNC_MODE_EXISTING)
            {
                g_fileReader = nullptr;
                g_fileWriter = ref new FileWriter(g_storageFile);
            }
            else if (mode & ZLIB_FILEFUNC_MODE_CREATE)
            {
                g_fileReader = nullptr;
                g_fileWriter = ref new FileWriter(g_storageFile);
            }
        }
        return (nullptr != g_fileReader ? reinterpret_cast<voidpf>(g_fileReader) : reinterpret_cast<voidpf>(g_fileWriter));
    }

    voidpf ZCALLBACK winRT_open64_file_func (voidpf opaque,const void* storageFile,int mode)
    {
        g_storageFile = reinterpret_cast<StorageFile^>(const_cast<void*>(storageFile));
        return (winRT_translate_open_mode(mode));
    }

    [...]

    Long ZCALLBACK winRT_read_file_func (voidpf opaque, voidpf stream, void* buf,uLong size)
    {
        uLong bytesRead = 0;
        if (nullptr != g_fileReader)
        {
            auto fileData = ref new Platform::Array<byte>(size);
            bytesRead = g_fileReader->Read(fileData);
            memcpy(buf, fileData->Data, fileData->Length);
        }
        return (bytesRead);
    }

    uLong ZCALLBACK winRT_write_file_func (voidpf opaque,voidpf stream,const void* buf,uLong size)
    {
        uLong bytesWritten = 0;
        if (nullptr != g_fileWriter)
        {
            auto bytes = ref new Array<uint8>(reinterpret_cast<uint8*>(const_cast<void*>(buf)), size);
            IBuffer ^writeBuffer = CryptographicBuffer::CreateFromByteArray(bytes);
            bytesWritten = g_fileWriter->Write(writeBuffer);
        }
        return (bytesWritten);
    }

    long ZCALLBACK winRT_tell_file_func (voidpf opaque,voidpf stream)
    {
        long long ret = 0;
        if (nullptr != g_fileReader)
        {
            ret = g_fileReader->Tell();
        }
        return (static_cast<long>(ret));
    }

    ZPOS64_T ZCALLBACK winRT_tell64_file_func (voidpf opaque, voidpf stream)
    {
        ZPOS64_T ret = 0;
        if (nullptr != g_fileReader)
        {
            ret = g_fileReader->Tell();
        }
        return (ret);
    }

    [...]

    long ZCALLBACK winRT_seek64_file_func (voidpf opaque, voidpf stream,ZPOS64_T offset,int origin)
    {
        long long ret = -1;
        if (nullptr != g_fileReader)
        {
            switch (origin)
            {
            case ZLIB_FILEFUNC_SEEK_CUR :
                ret = g_fileReader->SeekFromCurrent(offset);
                break;
            case ZLIB_FILEFUNC_SEEK_END :
                ret = g_fileReader->SeekFromEnd(offset);
                break;
            case ZLIB_FILEFUNC_SEEK_SET :
                ret = g_fileReader->SeekFromBeginning(offset);
                break;
            default:
                // should never happen!
                ret = -1;
                break;
            }
        }
        return (static_cast<long>(ret));
    }

    int ZCALLBACK winRT_close_file_func (voidpf opaque, voidpf stream)
    {
        g_fileWriter = nullptr;
        g_fileReader = nullptr;
        return (0);
    }

    int ZCALLBACK winRT_error_file_func (voidpf opaque,voidpf stream)
    {
        /// @todo Get errors from FileAccess
        return (0);
    } 
```

这足以让 MiniZip 运行（至少对于阅读而言），但您必须注意如何调用 MiniZip 函数——因为 Metro 是关于异步的，并且阻塞 UI 线程最终会出现异常，您必须将访问权限包装在任务中：

```
 FileOpenPicker^ openPicker = ref new FileOpenPicker();
    openPicker->ViewMode = PickerViewMode::List;
    openPicker->SuggestedStartLocation = PickerLocationId::ComputerFolder;
    openPicker->FileTypeFilter->Append(".zip");
    task<IVectorView<StorageFile^>^>(openPicker->PickMultipleFilesAsync()).then([this](IVectorView<StorageFile^>^ files)
    {
        if (files->Size > 0)
        {
            std::for_each(begin(files), end(files), [this](StorageFile ^file)
            {   // open selected zip archives
                create_task([this, file]()
                {
                    OpenArchive(file);
                    [...]
                });
            });
        }
        else
        {
            rootPage->NotifyUserBackgroundThread("No files were returned.", NotifyType::ErrorMessage);
        }
    });

    [...]

    bool OpenArchive(StorageFile^ archive)
    {
        bool isArchiveOpened = false;

        if (nullptr != archive)
        { // open ZIP archive
            zlib_filefunc64_def ffunc;
            fill_winRT_filefunc64(&ffunc); 

            unzFile archiveObject = NULL;
            create_task([this, &ffunc, archive]()
            {
                archiveObject = unzOpen2_64(reinterpret_cast<const void*>(archive), &ffunc);
            }).wait();

            if (NULL != archiveObject)
            {
                [...] 
```

# svn - 获取错误 SVN E175002 意外返回值

> ID：10926736
> 
> 赞同：2
> 
> 时间：2012-06-07T06:31:14.647
> 
> 标签：svn, repository

当我尝试从 SVN 存储库中读取数据时，出现以下错误：

```
svn: E175002: Server sent unexpected return value (500 Internal Server Error) 
in response to REPORT request for '/!svn/vcc/default' 
```

有人可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:06:46.007

这可能是由于不授予您的 Web 服务器访问存储库的权限而触发的。试试`chown -R apache:apache <path to svn repos>`。

# ruby-on-rails - 在 webrick 服务器的生产模式下运行 rails

> ID：10926737
> 
> 赞同：7
> 
> 时间：2012-06-07T06:31:17.640
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我当前的 ruby​​ on rails 项目中，我使用 webrick（默认）服务器进行开发。我有一个单独的服务器来测试应用程序，我想将环境设置为其中的产品。我使用以下行在生产模式下运行服务器。

```
rails s -e production 
```

问题是，如果它处于开发模式，它可以完美运行，但在服务器模式下，我收到以下错误：

```
Started GET "/" for 172.20.7.94 at Thu Jun 07 10:35:45 +0530 2012
  Processing by FrontendController#dashboard as HTML
Rendered frontend/dashboard.html.erb within layouts/frontend (3.0ms)
Completed 200 OK in 50ms (Views: 22.0ms | ActiveRecord: 0.0ms)

Started GET "/assets/frontend-datauri.css" for 172.20.7.94 at Thu Jun 07 10:35:4
6 +0530 2012
  Processing by Jammit::Controller#package as HTML
  Parameters: {"extension"=>"css", "package"=>"frontend-datauri"}
Completed 500 Internal Server Error in 190ms

NameError (uninitialized constant POpen4::Open4):

Started GET "/assets/frontend.js" for 172.20.7.94 at Thu Jun 07 10:35:46 +0530 2
012
  Processing by Jammit::Controller#package as
  Parameters: {"extension"=>"js", "package"=>"frontend"}
Completed 500 Internal Server Error in 105ms

NameError (uninitialized constant POpen4::Open4): 
```

我正在使用 Jammit 和 POpen4，我的 rails 版本是：3.0.9。红宝石版本 1.8.7。我目前无法升级版本，因为该项目涉及其他几个开发人员。谁能给我一个解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:56:06.707

非常感谢所有试图帮助我解决这个问题的人。我安装了 CentOS，一切都已修复且运行顺利。

这可能是我之前使用的 Windows server 2008 的一些问题

非常感谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:27:35.990

最佳实践是在 Gemfile 中指定依赖项。

宝石文件：

```
...
gem 'popen4'
... 
```

然后运行`bundle install`为您的应用程序创建特定的 gem 包。

否则，您的应用程序依赖于您在计算机上本地安装的内容（我想是通过`gem install popen4`）。

在这里，您的生产机器上没有安装 gem POpen4 ......所以另一个快速（但不推荐）的解决方案是在您的生产机器上手动安装 gem `gem install popen4`。

# mysql - 如何获取两个日期之间的时差（以小时为单位）

> ID：10926739
> 
> 赞同：10
> 
> 时间：2012-06-07T06:31:29.333
> 
> 标签：mysql, sql, oracle

我正在尝试获取 2 个用户之间的时差，我需要小时差。

我尝试使用 DATEDIFF 函数，但它是错误的。

这是我的代码：

```
SELECT DATEDIFF(*,  
(SELECT max(u1.time_c)
FROM users u)
,
(SELECT max(u2.time_c)
FROM users u2) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-07T06:37:28.227

来自[MySQL DATEDIFF 文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)：

```
Only the date parts of the values are used in the calculation. 
```

你会想看看[`TIMEDIFF`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)

这将为您提供时间差的小时数（假设您的`time_c`字段是 DATETIME 或类似的）

```
SELECT HOUR(TIMEDIFF(  
  (SELECT max(u1.time_c) FROM users u),
  (SELECT max(u2.time_c) FROM users u2)
)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T06:39:13.163

您的 select 语句中必须有一个`from`子句。就像是

```
Select date1 - date2 from dual 
```

返回 date1 和 date2 之间的天数。

如果你想要小时数：

```
Select (date1 - date2)*24 from dual; 
```

*（这仅适用于甲骨文）*

# javascript - 检测是否存在带有属性 [itemtype='http://schema.org/Offer'] 的标签的最快方法

> ID：10926746
> 
> 赞同：1
> 
> 时间：2012-06-07T06:31:55.660
> 
> 标签：javascript

`[itemtype='http://schema.org/Offer']`如果当前页面中存在带有属性的 HTML 标记，我希望以最快的方式使用 Javascript 进行检测。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:36:06.460

```
if(document.querySelectorAll("*[itemtype='http://schema.org/Offer']").length){
    alert("It is there!");
} 
```

对[IE 7 及以下](http://caniuse.com/queryselector)版本使用[Sizzle](http://sizzlejs.com/)。它与 jQuery 的 CSS 选择器引擎相同，但没有那些花哨的东西。

```
document.querySelectorAll = document.querySelectorAll || Sizzle; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:37:33.180

下面是一些关于 jQuery[选择器速度](http://www.componenthouse.com/article-19)的相关信息。显然，在您的选择器中使用 ID 似乎是最快的，但如果您不能这样做，将范围限制为特定的标签组也会有所帮助

..edit.. 如果您只需要选择元素，您可以使用[嘶嘶声](https://github.com/jquery/sizzle/wiki/Sizzle-Home)引擎。它是 jquery 内部使用的，您不必担心任何 jQuery 膨胀。

# xml - XSL 的相关性如何

> ID：10926748
> 
> 赞同：-1
> 
> 时间：2012-06-07T06:32:17.233
> 
> 标签：xml, ajax, xslt

有没有更好的方法来统一格式化数据，而不是将数据作为 XML 存储在数据库中，然后使用 XSL 文档异步检索它以使用 ajax 请求格式化和显示它？

我已经有一段时间没有真正需要使用 XSL 了，最近我正在做一个项目，我认为它会很有用。我去寻找一个 Aptana Studio 插件，它可以通过给我代码完成建议让我作弊。在查找时，我发现了几个论坛，其中评论说不再有很多人使用 XSL，这让我思考：这是一项相关的技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:02:07.367

人们总是发表诸如 XSLT 不再相关之类的评论，这意味着“我不需要 XSLT”。目前有 8,371 个关于 SO 标记为 XSLT 的问题，所以是的，这似乎非常相关。

我以前的工作主要是作为 XSLT 样式表设计师，我做了 8 年（我也做过 java、C++ 和 C#），我在那里做的东西是用于显示的 html 格式，我很难用其他方法做. 显然这不是不可能的，但它是完成这项工作的最佳工具。我也在那里做了 XSLT-FO，这又会以另一种方式更难，我能想到的唯一方法是 css3，它也需要 XSLT。

所以是的，这与我非常相关。如果你不需要它，它与你无关。就像很多事情一样，这是一个视角问题

# javascript - 我可以在 for 循环中设置多个 window.setTimeout 事件吗？

> ID：10926749
> 
> 赞同：0
> 
> 时间：2012-06-07T06:32:21.483
> 
> 标签：javascript

[这是我从http://www.schillmania.com/content/projects/javascript-animation-1/demo/](http://www.schillmania.com/content/projects/javascript-animation-1/demo/)复制的一段代码
非常简单的 JS 动画：

```
function doMove() {
  foo.style.left = parseInt(foo.style.left)+1+'px';
  setTimeout(doMove,20); 
} 
```

这工作正常。但是，如果我像这样更改它：

```
function doMove() {
   for (var i=0; i<1000; i++) {
       setTimeout(function(){foo.style.left = parseInt(foo.style.left)+1+'px';},20*i);
   }
} 
```

因此根本没有动画。据我所知，只要调用 setTimeout，JS 引擎就会将这些事件推送到队列中。所以我只是不明白为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:39:15.313

Wrap it in a closure to preserve the value of `i` "at that time"

```
for (var i=0; i<1000; i++){
    (function(i){
        setTimeout(function(){
            foo.style.left = parseInt(foo.style.left)+1+'px';
        },20*i);
    }(i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:42:48.100

```
function doMove() { for (var i=0; i<1000; i++)
setTimeout(function(){foo.style.left = parseInt(foo.style.left)+1+'px';},20*i); } 
```

after for loop, there is Unnecessary semicolon;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:43:56.290

You had a semi-colon after the for loop. Hence the loop runs for 1000 times and the setTimeout for one time.

```
// Runs for 1000 times
for (var i=0; i<1000; i++);

// Runs one time moving foo by 1px
setTimeout(function(){foo.style.left = parseInt(foo.style.left)+1+'px';},20*i); 
```

Lack of proper indentation :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T07:07:01.953

您的 for 循环行以分号结尾，它不是循环的。如果你修复它，它应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T06:41:51.167

```
function doMove() {
  foo.style.left = parseInt(foo.style.left)+1+'px';
  setTimeout(doMove,20); 
} 
```

回调函数只会被执行一次`setTimeout`，上面的代码是有效的，因为回调函数是它自己的函数，所以它被称为递归。

# azure - 如何在 Windows azure 管理门户中查看 .svclogs

> ID：10926755
> 
> 赞同：1
> 
> 时间：2012-06-07T06:32:44.430
> 
> 标签：azure, azure-storage, azure-table-storage

我正在使用 Windows azure 并且我在 Windows azure 管理门户上托管了我的应用程序，我还在 web.config 文件中启用了跟踪，即 .svc 日志，我能够在本地系统中检查 .svc 日志，但是如何检查 .svc 登录Windows Azure 管理门户？请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:42:30.773

You can't see the *.svc logs in the management portal. What you can do is write those logs to a local resource and configure the diagnostic manager to pick up these files and write them to a storage account.

Christian Weyer explains in a blog post how you can do this by extending the existing XmlWriterTraceListener: [Writing trace data to your beloved .svclog files in Windows Azure (aka ‘XmlWriterTraceListener in the cloud’)](http://weblogs.thinktecture.com/cweyer/2010/12/writing-trace-data-to-your-beloved-svclog-files-in-windows-azure-aka-xmlwritertracelistener-in-the-cloud.html)

Then I suggest you take a look at Neil's blog post for setting up custom logs (directories): [http://convective.wordpress.com/2009/12/08/custom-diagnostics-in-windows-azure/](http://convective.wordpress.com/2009/12/08/custom-diagnostics-in-windows-azure/)

# php - 如何在 YII 中使用 ajaxvalidation 实现弹出登录表单？

> ID：10926761
> 
> 赞同：0
> 
> 时间：2012-06-07T06:33:09.907
> 
> 标签：php, javascript, jquery, yii

我的 yii 登录表单`ajaxvalidation`在正常模式下完美运行，但在弹出模式下无法正常运行，我使用

`$this->renderPartial('login',array('model'=>$model));`而不是`$this->render('login',array('model'=>$model));`.

我认为问题出在部分渲染上，它没有加载必要的 java 脚本来进行 ajax 验证。如何使用 ajaxvalidation 实现弹出登录表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:18:42.723

不能说没有看到整个视图文件。无论如何尝试以下代码来加载javascripts`renderPartial`

```
$this->renderPartial('login',array('model'=>$model),false,true); 
```

# jasper-reports - Jasper 中的向下钻取报告

> ID：10926762
> 
> 赞同：0
> 
> 时间：2012-06-07T06:33:12.337
> 
> 标签：jasper-reports, jasperserver

我是 jasper 的新手，我正在创建一个向下钻取报告。

我按照以下步骤操作：

1.  创建了具有饼图的主报告。
2.  在超链接部分添加`_report`和`TITLE_ID`参数。
3.  创建了一个子报告并添加了参数`TITLE_ID`。
4.  在主报告中添加了子报告。
5.  将报告上传到 jasper 服务器并添加输入控件。

运行报表时，主报表正确呈现。当我单击主报表饼图中的一个切片时，子报表正在使用空数据呈现。

关于我可以做些什么来解决这个问题的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:59:56.580

您需要将数据参数传递给您的子报表，以使其检索数据。子报表的参数是什么？这些需要在超链接中指定。

对于我的子报表，我使用空白的超链接目标、参考的超链接类型和参考表达式，如下所示：

```
"./ReportController?reportName=ValidationDetailsChart&hasCSV=true&reportTitle=Validation%20Details&nParms=4&parmName_1=ORD_NUMBER&parmValue_1=" + $F{ORDER_NUMBER} + "&parmName_2=USER_NAME&parmValue_2=" + $F{USERNAME} + "&parmName_3=START_TIME_MS&parmValue_3=" + $F{START_TIME_MS} + "&parmName_4=END_TIME_MS&parmValue_4=" + $F{START_TIME_MS}" 
```

当然，您的情况可能会有很大不同，但是无论您怎么做，您都需要将数据参数传递给子报表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-15T19:07:31.600

> 从一个报表钻取到另一个报表是通过 **ReportExecution**超链接类型处理的，当从报表转到仪表板时，您将使用超链接类型**Reference**。

参考：[Jasper Wiki：如何钻取到仪表板？](http://community.jaspersoft.com/wiki/how-do-i-drill-through-dashboard)

# android - 在用户本地设备上保存 requestToken 和 accessToken 是否安全

> ID：10926763
> 
> 赞同：0
> 
> 时间：2012-06-07T06:33:16.163
> 
> 标签：android, security, oauth, oauth-2.0

比如说，我正在实现一个已安装的应用程序（桌面应用程序和 Android 应用程序），它将访问 Google 服务。我为了避免用户必须多次登录，我决定将其保存`requestToken`到`accessToken`他的本地设备。

在我浏览了几个教程后，例如[http://blog.doityourselfandroid.com/2011/08/06/oauth-2-0-flow-android/](http://blog.doityourselfandroid.com/2011/08/06/oauth-2-0-flow-android/)，我发现这是大多数人正在做的事情。

但是，我担心的是，这样做安全吗？如果黑客从用户本地设备中获取了保存`requestToken`的内容怎么办？`accessToken`安全性会受到损害吗？黑客可以伪装成真正的用户吗？

请注意，因为该应用程序将是开源的。因此，任何人都可以访问`clientID`和`clientSecret`使用特定的 Google API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:41:14.517

I have also used app token in my application. I have saved it to SharedPrefs with Private mode as:

```
final SharedPreferences prefs = getSharedPreferences(
                "app token", Context.MODE_PRIVATE); 
```

When you save a sharedPref with Private mode, it can only be accessed by the calling application (or all applications sharing the same user ID). And whenever user logs out, clear all the sharedPrefs, so that, there will not be any copy of your app token saved in local storage of the device. This should be safe to use, and security will be ensured.

**Update:** App token should not be stored in SharedPreference since if the device is rooted, the sharedPrefs file can be exposed. [AccountManager](https://developer.android.com/reference/android/accounts/AccountManager.html) can be used to store token but again it can also be exposed if device is rooted. Best way is to encrypt a token with a strong encryption algo and then save it into AccountManager. The key used for encryption should be unique with every user and device combination so that even if key is compromised, hacker would be able to retrieve only data for that specific user and not all.

# c# - 如何检索向网页发出请求的客户端的 ipv4 和 ipV6 地址

> ID：10926765
> 
> 赞同：0
> 
> 时间：2012-06-07T06:33:29.933
> 
> 标签：c#, .net, ip, httprequest

如何检索向 C# 中的网页发出请求的客户端的 ipv4 和 ipV6 地址？

假设用户请求`pageA.aspx`，那么在`Page_Load`该 C# 代码隐藏文件的情况下我应该使用什么代码来获取此信息？

我还需要客户端端口号，服务器端口号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:15:25.937

ipv6 还没有完全取代 ipv4 ，所以在所有设备和软件（当然还有 .net 框架）都支持之前，你不需要它，但如果你渴望更进一步；您可能会编写一个将 ipv4 转换为 ipv6 的函数，例如尝试克隆它： [http ://www.subnetonline.com/pages/subnet-calculators/ipv4-to-ipv6-converter.php](http://www.subnetonline.com/pages/subnet-calculators/ipv4-to-ipv6-converter.php)

# c++ - iOS：使用示例 Poco::BinaryReader & Poco::BinaryWriter

> ID：10926767
> 
> 赞同：0
> 
> 时间：2012-06-07T06:33:36.487
> 
> 标签：c++, objective-c, ios, poco-libraries

有人可以告诉我在 iOS 5.x -> Objective-C++ 上使用二元流的[Poco::BinaryReader](https://github.com/openframeworks/openFrameworks/blob/master/libs/poco/include/Poco/BinaryReader.h)和[Poco::BinaryWriter的用法示例吗？](https://github.com/openframeworks/openFrameworks/blob/master/libs/poco/include/Poco/BinaryWriter.h)

昨天我发送了关于“[如何创建和使用 C++ 类](https://stackoverflow.com/questions/10910408/ios-define-and-use-c-in-objective-c/10911383)”的问题，但它没有回答我上面的问题。

Poco 社区论坛和 OpenFrameworks 论坛看起来像死了，所以我在这里。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:24:05.400

好吧，没有人愿意帮忙。

在上帝的帮助下，我自己做到了。

> 下载[OpenFrameworks](https://github.com/openframeworks/openFrameworks/)并配置到您的目标项目；

代码示例：

```
#import "AppDelegate.h"
#import "Poco/MemoryStream.h"
#import "Poco/BinaryWriter.h"
#import "Poco/BinaryReader.h"

@implementation AppDelegate{
    Poco::BinaryWriter *_myBinaryWriter;
    Poco::BinaryReader *_myBinaryReader;
}

@synthesize window = _window;

- (void)dealloc
{
    [_window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.window.rootViewController = [[UIViewController new] autorelease];

    int bufferSize = 512;    
    char *_buffer = (char *)malloc(bufferSize);

    // >> WRITE BLOCK <<   
    Poco::MemoryOutputStream *outStream = new Poco::MemoryOutputStream(_buffer, bufferSize);

    _myBinaryWriter = new Poco::BinaryWriter(*outStream);
    (*_myBinaryWriter) << 1234567890;
    (*_myBinaryWriter) << (std::string)"some string";
    (*_myBinaryWriter) << 3.14f;
    delete(_myBinaryWriter);
    delete(outStream);

    // >> READ BLOCK <<   
    Poco::MemoryInputStream *inStream = new Poco::MemoryInputStream(_buffer, bufferSize);

    _myBinaryReader = new Poco::BinaryReader(*inStream);

    int i = 0;
    std::string s;
    float f = .0f;

    (*_myBinaryReader) >> i >> s >> f;
    delete(_myBinaryReader);
    delete(inStream);

    NSLog(@"ReadInt = '%i'", i);
    NSLog(@"ReadString = '%@'", [NSString stringWithUTF8String:s.c_str()]);
    NSLog(@"ReadFloat = '%f'", f);

    [self.window makeKeyAndVisible];
    return YES;
}

@end 
```

我有美好的一天吗:)

# sql - SQL 导入大型 CSV，内存不足错误

> ID：10926768
> 
> 赞同：1
> 
> 时间：2012-06-07T06:33:50.583
> 
> 标签：sql, memory, csv, import

我正在尝试将大型 (65mb) CSV 文件导入 SQL 表。我正在使用 phpMyAdming 和 xampp。我在 php.ini 中更改了以下设置：

```
memory_limit = 6000M
post_max_size = 128M
upload_max_filesize = 128M 
```

当我尝试这个时，我收到错误“致命错误：第 294 行 C:\xampp\phpMyAdmin\libraries\import.lib.php 中的内存不足（分配 1852047360）（试图分配 262145 字节）”

我能做些什么来解决这个错误？我还想导入一个更大的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:36:36.980

你能把文件分成几块吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:41:05.657

您可以编写 Python/PHP/Ruby 脚本来读取文件并解析数据，并逐行运行 INSERT 语句。

# audio - 语音/音乐分类

> ID：10926769
> 
> 赞同：2
> 
> 时间：2012-06-07T06:33:56.787
> 
> 标签：audio, signal-processing, speech

我想确定音频文件的哪一部分包含语音或音乐。

我希望有人制作了这样的东西，或者可以告诉我从哪里开始。您能否建议一些方法/教程来做同样的事情。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-22T14:17:24.100

查看[pyAudioAnalysis](https://github.com/tyiannak/pyAudioAnalysis/) python 库。其中，它有一个预训练的语音音乐分类器和两种分割分类方法（一种基于固定大小的窗口，另一种基于 HMM）。

您可以很容易地提取录音的语音和音乐部分，例如：

`from pyAudioAnalysis import audioSegmentation as aS [flagsInd, classesAll, acc] = aS.mtFileClassification("data/scottish.wav", "data/svmSM", "svm", True, 'data/scottish.segments')`

结果就是[这张图片中的那个](https://raw.githubusercontent.com/wiki/tyiannak/pyAudioAnalysis/mtFileClassificationExample.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:37:41.767

这方面有很多现有技术，但我建议浏览[Dan Ellis 的](http://www.ee.columbia.edu/~dpwe/)一些论文。[这次演讲](http://www.ee.columbia.edu/~dpwe/talks/ASA-austin-2003-11.pdf)的幻灯片有一些很好的背景。简而言之，这一切都取决于选择正确的特征向量。

# java - 从 Weblogic 迁移到 Apache Tomcat

> ID：10926770
> 
> 赞同：4
> 
> 时间：2012-06-07T06:33:58.330
> 
> 标签：java, tomcat, servlets, migration, weblogic

我正在将基于 Weblogic 10c 构建的项目（使用 servlets/jsp/jdbc/jndi）迁移到 Apache Tomcat 7.0.22。我设法配置了 ldap 身份验证服务器，并替换了 weblogic 使用的 xxx-jdbc.xml。现在我的问题是我正在尝试迁移在 web Content/WEB-INF 目录中找到的 weblogic.xml 文件。xml文件的内容如下：

```
<?xml version = '1.0' encoding = 'UTF-8'?>
<weblogic-web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://www.bea.com/ns/weblogic/weblogic-web-app http://www.bea.com/ns/weblogic/weblogic-web-app/1.0/weblogic-web-app.xsd"
              xmlns="http://www.bea.com/ns/weblogic/weblogic-web-app">
  <security-role-assignment>
    <role-name>REGISTERED_USER</role-name>
    <principal-name>GROUP_NAME_FROM_LDAP</principal-name>
  </security-role-assignment>
  <session-descriptor>
    <debug-enabled>false</debug-enabled>
    <tracking-enabled>true</tracking-enabled>
    <cookie-name>nameOfCookie</cookie-name>
    <cookie-max-age-secs>-1</cookie-max-age-secs>
    <url-rewriting-enabled>false</url-rewriting-enabled>
    <encode-session-id-in-query-params>false</encode-session-id-in-query-params>
    <sharing-enabled>false</sharing-enabled>
  </session-descriptor>
  <context-root>my_app_context_root</context-root>
  <servlet-descriptor>
    <servlet-name>FileDownload</servlet-name>
  </servlet-descriptor>
</weblogic-web-app> 
```

从上到下，我有安全角色分配，它将 ldap 组中的用户映射到 REGISTERED_USER。我认为标签会话描述符是自我解释的。然后是我的应用程序上下文根上下文根。然后是一些用于将 servlet 注册到 Weblogic 的 servlet 定义（这也在 web.xml 中定义，我认为这不需要更多处理）。

那么在我的应用程序中迁移这个 weblogic.xml 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T15:53:39.977

在 Tomcat 中，这些东西可以在几个不同的地方定义。

对于`security-role`重新映射，使用`<security-role-ref>`web.xml 中的标准重新映射角色名称。

如果您使用的是 servlet-3.0-spec webapp，那么您的许多与会话和 cookie 相关的项目都可以通过 web.xml 获得：

```
<session-config>
  <cookie-config>
    <name>nameOfCookie</name>
    <max-age>-1</max-age>
  </cookie-config>
  <!-- just don't use "URL" to disable rewriting -->
  <tracking-mode>COOKIE</tracking-mode>
</session-config> 
```

否则，你将不得不求助于一些杂技。首先，我假设您正在使用`META-INF/context.xml`webapp 中的文件来部署到 Tomcat。

1.  会话 cookie 名称

    ```
    <Context sessionCookieName="nameOfCookie" /> 
    ```

2.  Cookie max-age
    使用`<session-config><session-timeout />`web.xml 中的标准。（从技术上讲，这配置了会话的max-age，但效果是一样的：会话过期后cookie本质上会失效。如果您确实需要cookie max-age，请阅读此线程：[http://markmail。组织/线程/u2ysiz3uxays2w4i](http://markmail.org/thread/u2ysiz3uxays2w4i)）

3.  配置不支持 Cookie 调试/跟踪。您将不得不编写自己的`Filter`（s）来复制这些功能。

4.  禁用 URL 重写将要求您编写一个`Filter`覆盖它们的参数`HttpServletResponse.encodeURL`并且`HttpServletResponse.encodeRedirectURL`对其`String`参数不执行任何操作。

# ubuntu - 为什么 Tomcat SSL 在 Ubuntu EC2 实例上的端口 443 上不起作用

> ID：10926771
> 
> 赞同：0
> 
> 时间：2012-06-07T06:33:59.007
> 
> 标签：ubuntu, amazon-ec2

我已经在 ubuntu EC2 实例上安装了 openjdk+tomcat7。在 8443 上做一些测试 http 和 https 后确实有效。我已经将安全组配置为允许 8080/443/8443。当我尝试在端口 443 上配置 SSL 时，它会在启动 Tomcat 时提示“权限被拒绝”。但是我已经用root prev启动了tomcat：

```
sudo /etc/init.d/tomcat7 start 
```

你对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T17:59:07.953

这个问题在[别处](https://stackoverflow.com/questions/12464926/linux-in-ec2amazon-cannot-use-port-80-for-tomcat)得到解决。出于安全原因，将用户 tomcat 在 root 下运行并不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:16:55.340

在 /etc/default 中查找名为“tomcat7”的文件。在那里更改用户名和密码。

```
# Run Tomcat as this user ID. Not setting this or leaving it blank will use the
# default of tomcat6.
TOMCAT7_USER=root

# Run Tomcat as this group ID. Not setting this or leaving it blank will use
# the default of tomcat6.
TOMCAT7_GROUP=root 
```

# javascript - 在 razor foreach 语句中调用 JS 函数

> ID：10926780
> 
> 赞同：1
> 
> 时间：2012-06-07T06:35:08.673
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我有一个`Model`with`LevelInfo`属性：

```
public IEnumerable<Tuple<string, string, string>> LevelInfo { get; set; } 
```

在视图中我有一个 JS 函数：

```
function fillPath(level, color) {
        $('[level=' + level).attr({ 'fill': color });
    } 
```

现在我想遍历`LevelInfo` 并调用`fillPath`函数：

```
$(document).ready(function() {

        @foreach (var info in Model.LevelInfo)
        {
            // How can I call JS function from here?
            // i.e,  fillPath(info.Item1, info.Item2)
        }
    }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T06:36:57.617

请记住，`@foreach`是在服务器端执行的，并为 和 之间的内容发出`{`HTML `}`。

只需在括号之间写 JavaScript。

```
$(document).ready(function() {

    @foreach (var info in Model.LevelInfo)
    {
        fillPath(info.Item1, info.Item2) // Assumes this is a function defined in JavaScript elsewhere
    }
}); 
```

Razor 有时对识别从服务器端代码到客户端代码的转换有点挑剔。您可能需要包装 JavaScript 代码`<text>`以帮助 Razor。

# visual-c++ - VC++ 中 DLL 库中的 Dllmain

> ID：10926782
> 
> 赞同：5
> 
> 时间：2012-06-07T06:35:14.077
> 
> 标签：visual-c++, dll

我正在浏览我的项目代码库，它由库和应用程序组成。一些库是 Dll 的。代码是使用 MS VS 2010 用 C++ 为 Windows 编写的。

我教 Dll 我们应该编写 DllMain 函数，它是 DLL 应用程序的入口点。但在我的 DLL 项目中，“DllMain”函数不存在。

我的问题是什么时候需要 DllMain 什么时候不需要？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T07:36:10.530

`DllMain`不是强制性的。如果您在加载 dll 时需要运行一些初始化代码，您应该创建一个`DllMain`函数，并在那里处理初始化。否则不需要。

请参阅[此处](http://social.msdn.microsoft.com/Forums/en/vclanguage/thread/12be0e20-98de-4193-8d9a-84d598752819)了解更多信息。

# linux - 在匹配行下方打印行

> ID：10926783
> 
> 赞同：0
> 
> 时间：2012-06-07T06:35:14.790
> 
> 标签：linux, perl

目前我正在从匹配模式中获取第 3 行。在这种情况下`q33BDrP9007220`是匹配的模式并且将打印第 3 行，我也想打印第 4 行和第 5 行，但前提是第 4 行和第 5 行的模式与第 3 行模式匹配。并在一行中打印这 3 个电子邮件 ID用“，”分隔。

```
open (MYFILE,<$mailqdir);
while(<MYFILE>)
if(/(\w{14})/){
next unless \w{14})/ % 2;
$temp = scalar <MYFILE>;
$rf_id = $temp;
} 
```

- - - - - - - 输入 - - - - - - - - -

```
q33BDrP9007220    50153 Tue Apr  3 16:43 <mohitnegi@yahoo.com>
                 (Deferred: 451 4.2.1 mailbox temporarily disabled: paond.tndt)
                                         <tarunsharma@yahoo.com>
                                         <tararma@yahoo.com>
                                         <tarsharma@yahoo.com>
q33BDrP9007220    50153 Tue Apr  3 16:43 <mohitnegi@yahoo.com>
                 (Deferred: 451 4.2.1 mailbox temporarily disabled: paond.tndt)
                                         <tnsharma@yahoo.com>
                                         <tama@yahoo.com>
                                         <harma@yahoo.com>
q33BDrP9007220    50153 Tue Apr  3 16:43 <mohitnegi@yahoo.com>
             (Deferred: 451 4.2.1 mailbox temporarily disabled: paond.tndt)
                                     <tarunrma@yahoo.com>
                                     <taarma@yahoo.com>
                                     <tsharma@yahoo.com> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:14:00.407

这个例子可能会帮助你：

```
#!/usr/bin/perl

use warnings;
use strict;

my @emails;
while (<DATA>) {
    if (/^\w{14}\s/) {
        <DATA>;              # skip one line
        output(@emails);
        undef @emails;       # forget emails
    } elsif (/^\s+<([^>]+)>$/) {
        push @emails, $1;    # remember the email
    }
}

# Print the last rememberd emails
output(@emails);

sub output {
    print join(',', @_), "\n" if @_;
}

__DATA__
q33BDrP9007220    50153 Tue Apr  3 16:43 <mohitnegi@yahoo.com>
                 (Deferred: 451 4.2.1 mailbox temporarily disabled: paond.tndt)
                                         <tarunsharma@yahoo.com>
                                         <tararma@yahoo.com>
                                         <tarsharma@yahoo.com>
q33BDrP9007220    50153 Tue Apr  3 16:43 <mohitnegi@yahoo.com>
                 (Deferred: 451 4.2.1 mailbox temporarily disabled: paond.tndt)
                                         <tnsharma@yahoo.com>
                                         <tama@yahoo.com>
                                         <harma@yahoo.com>
q33BDrP9007220    50153 Tue Apr  3 16:43 <mohitnegi@yahoo.com>
             (Deferred: 451 4.2.1 mailbox temporarily disabled: paond.tndt)
                                     <tarunrma@yahoo.com>
                                     <taarma@yahoo.com>
                                     <tsharma@yahoo.com> 
```

另外，请在 StackOverflow 上阅读[Parsing the file perl](https://stackoverflow.com/q/10876911/1030675) here - 也许是您的同事或同学发布的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:14:47.863

我不确定我是否完全理解您的问题，但还是试了一下。

在您的 while 循环中，在第一个正则表达式之后，将电子邮件地址存储在一个变量中。例如`my $addressList = $1;`并设置一个临时变量 my `$temp = 1;`。稍后您可以执行 a `if ($temp)`，如果下一行与您的正则表达式匹配，您将继续附加到 $addressList 变量，直到标记 (q33BDrP9007220) 被命中。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:05:20.643

这就是我要走的路

```
use strict;
use warnings;

my $file="input_file.txt";

open (FILE,"<$file") or die "Can't open $file: $!";

my $contents = do { local $/; <FILE> };

my @arr=split('q33BDrP9007220', $contents);

foreach my $ele(@arr)
{

    $ele =~ s/([a-zA-Z0-9_.]+@[a-zA-Z]+\.[a-zA-Z]{2,4})//;

    $ele =~ s/.*?([a-zA-Z0-9_.]+@[a-zA-Z]+\.[a-zA-Z]{2,4})/$1 ,/sg;

    print $ele;

} 
```

`([a-zA-Z0-9_.]+@[a-zA-Z]+\.[a-zA-Z]{2,4})`您可以使用自己的电子邮件地址更改正则表达式。

# .net - 缺少 Visual Studio MSVCP110D.dll

> ID：10926790
> 
> 赞同：1
> 
> 时间：2012-06-07T06:35:40.063
> 
> 标签：.net, windows, visual-studio, dll, frameworks

我最近下载并安装了 Visual Studio 2012 RC 并用它制作了一个程序。但是，如果我尝试在另一台计算机上运行编译后的二进制文件，我会收到一条错误消息

> 程序无法启动，因为您的计算机缺少 MSVCP110D.dll。尝试重新安装程序以解决此问题。

我的电脑上没有错误。我假设是因为 Visual Studio 为我安装了该文件。如何编译该程序，以便它可以在没有该 DLL 文件的计算机上运行？

我发现（如果我错了，请纠正我）这个 DLL 文件是 .NET Framework 4 或 4.5 Beta 的一部分。所以我开始想，如果我使用更早版本的框架编译程序，比如 2.0 甚至 1.0，我将能够解决这个错误。

好吧，我能够使用框架的 2.0 和 1.0 版本对其进行编译，但我仍然收到此错误消息。如何编译无需该 DLL 文件即可运行的程序？

哦，我在编译的任何程序上都会遇到这个错误。甚至是一个简单的“Hello World”程序。同样，我没有在我的机器上收到此错误，因为 Visual Studio 为我安装了该文件，只是在我尝试运行程序的其他机器上。

哦，我可能还应该提到我在 Windows 7 Ultimate 64 位机器上运行 Visual Studio，但我在 Win32 平台上编译程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:48:23.967

实际上 Dll 是 C++ 运行时的调试版本。如果你搜索你的错误并删除 110D，你会从早期版本中得到很多类似的错误。你是在编译`Release Mode`还是`Debug Mode`

# android - cfheader cfcontent 手机浏览器下载不成功

> ID：10926792
> 
> 赞同：1
> 
> 时间：2012-06-07T06:35:55.883
> 
> 标签：android, iphone, ipad, coldfusion

我正在提供一个 .ePub 文件以供下载，而不向客户端显示 url。下面的代码适用于 PC/Mac 上的任何浏览器，但不适用于移动浏览器，至少在我目前测试的 Android 中是这样。我每次都会收到“下载失败”的消息。有任何想法吗？？？

代码：

```
<cfheader name="content-disposition" value="attachment;filename=#authStuff.lastname#-#theTitle#.ePub" /><cfcontent type="application/unknown" file="d:\home\sample.net\bookSource\#book.ePub#"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:55:34.897

尝试对您的代码进行以下两项更改：

1）将内容处置文件名用引号括起来（使用双引号来转义它们，或者**#Chr( 34 )#**这样它们就不会与您的值属性引号混淆）。

2) 使用**application/octet-stream**作为内容类型（应该是 application/epub+zip 但 Android 似乎无法识别它）。

这似乎至少适用于 Android 2.3.5。

```
<cfheader name="content-disposition" value="attachment; filename=#Chr(34)##authStuff.lastname#-#theTitle#.ePub##Chr(34)#">
<cfcontent type="application/octet-stream" file="d:\home\sample.net\bookSource\#book.ePub#"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:15:08.890

我见过和使用过的所有例子在附件之间都有一个空格；和文件名，所以你可以尝试：

```
<cfheader name="content-disposition" value="attachment; filename=#authStuff.lastname#-#theTitle#.ePub" /> 
```

此外，使用 FireBug 或 Fiddler 确保标头未更改。桌面浏览器会提示您使用正确的文件名进行保存吗？

编辑：刚刚在 ios 上使用 pdf 尝试了您的代码，并且愉快地使用了 pdf，所以空间可能是一个红鲱鱼，但是它让我认为可能值得尝试下面的代码来尝试看看它是否是一个 ePub 的东西或标题的东西：

```
<cfheader name="content-disposition" value="attachment;filename=something.pdf" />
<cfcontent type="application/unknown" file="#expandpath('something.pdf')#"> 
```

# c# - 正则表达式完整日期验证

> ID：10926793
> 
> 赞同：1
> 
> 时间：2012-06-07T06:36:00.463
> 
> 标签：c#, regex, validation, date

**请注意，这不是关于使用代码进行日期验证的最佳方式的问题，而是关于通过一些试验和错误了解更多关于正则表达式的问题以及其他人在此感谢您。**

我最近一直在使用正则表达式做很多工作（坦率地说，我很讨厌它们）虽然我学到了很多东西，但我想知道是否有人可以就特定的正则表达式给出他们的专家意见。

现在我正在迁移一个相当大的项目以使用 .NET 4.0 它在许多类和命名空间中有很多解析和数据操作方法......但是大部分解析和验证已经完成带有大量 IndexOf() 调用的大笨重的 for 循环。

我一直在非常成功地使用正则表达式、LINQ 和扩展方法的组合来极大地简化和阐明解析和验证方法。

反复试验和 RegexBuddy 极大地帮助了学习曲线。

现在谈谈我的实际问题。

我正在努力更新一个简单的日期验证，尽管它是一个非常松散的验证

```
private static bool isLikeVCardDate(string value_Renamed)
{
  if (value_Renamed == null)
  {
    return true;
  }
  // Not really sure this is true but matches practice
  // Mach YYYYMMDD
  if (isStringOfDigits(value_Renamed, 8))
  {
    return true;
  }
  // or YYYY-MM-DD
  return value_Renamed.Length == 10 && value_Renamed[4] == '-' && value_Renamed[7] == '-' && isSubstringOfDigits(value_Renamed, 0, 4) && isSubstringOfDigits(value_Renamed, 5, 2) && isSubstringOfDigits(value_Renamed, 8, 2);
} 
```

如果我想匹配该功能一个简单的正则表达式

```
private static bool isLikeVCardDate(string value_Renamed)
{
  return Regex.IsMatch(value_Renamed, @"\d{4}-?\d{2}-?d{2}");
} 
```

会满足要求

但这让我开始思考我将如何验证日期是完全有效的日期，闰年，整个九码的月份中的几天

知道还有其他关于使用正则表达式进行日期验证的帖子我对有人直接给我答案不感兴趣我已经得到它的工作我想知道是否有任何人可以向我传授有关如何做得更好的知识或改进它。

请注意，我知道这可能不是使用正则表达式的实际应用的最佳示例，请记住我正在尝试在这里学习并希望得到一些帮助

这是我想出的正则表达式

一些注释我将它粘贴在“选项卡式”视图中只是为了便于阅读，实际的正则表达式没有空格或换行符。

此外，不是命名捕获组的所有内容都是非捕获组（我将其省略以节省空间，因为我只想让人们对正则表达式进行分析）

```
(
 (?<YEAR>((([0][48])|([13579][26])|([2468][048]))00)|(\d{2}(([0][48])|([13579][26])|([2468][048]))))
 -?
 (
  (
   (?<MONTH>(0[13578])|( 1[02]))
   -?
   (?<DAY>(0[1-9])|([12][0-9])|(3[01]))
  )
  |
  (
   (?<MONTH>(0[469])|11)
   -?
   (?<DAY>(0[1-9])|([12][0-9])|30)
  )
  |
  (
   (?<MONTH>02)
   -?
   (?<DAY>(0[1-9])|([12][0-9]))
  )
 )
)
|
(
 (?<YEAR>\d{4})
 -?
 (
  (
   (?<MONTH>(0[13578])|(1[02]))
   -?
   (?<DAY>(0[1-9])|([12][0-9])|(3[01]))
  )
  |
  (
   (?<MONTH>(0[469])|11)
   -?
   (?<DAY>(0[1-9])|([12][0-9])|30)
  )
  |
  (
   (?<MONTH>02)
   -?
   (?<DAY>(0[1-9])|(1[0-9])|(2[0-8]))
  ) 
 )
) 
```

这是我的思考过程

1.  天数相对于月份 4,6,9,11 是 30 天 | 1,3,5,7,8,10,12 有 31，2 有 28 或 29

2.  闰年可以被四整除，除非它可以被 100 整除，那么只有当它也能被 400 整除

    1.  基于此，如果作为数字的最后 2 位数字可以被 4 整除，那么任何数字都可以被 4 整除

    2.  写出 4 - 96 的数字 我使用了 0(4,8)、{even > 0}(0,4,8) 和 {odd}(2,6) 的重复模式

    3.  由于对 400 年闰年的测试为我们提供了适用年份的前 2 位数字，我们可以使用上面 #2 中的相同模式

3.  由于闰年的要求，正则表达式需要 2 次单独捕获闰年的日期和非闰年的日期。

现在我所有的假设都可能是错误的，只是简单明了，但这是我能想出的，到目前为止我对正则表达式的理解程度

同样，我只是在寻求帮助以改进正则表达式，因为我迫切需要了解它。

非常感谢任何花时间阅读这个问题的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:30:11.860

我知道您这样做是为了学习正则表达式，因此您可能会喜欢了解这些其他问题的答案中的示例如何工作：

*   [C# 正则表达式来验证日期？](https://stackoverflow.com/questions/1359188/c-sharp-regular-expression-to-validate-a-date)

*   [检查格式为“yyyy/mm/dd”的字符串是否为有效日期的正则表达式，包括月份范围](https://stackoverflow.com/questions/669741/regex-that-checks-if-string-in-format-yyyy-mm-dd-is-a-valid-date-including-mo)

当然，学习正则表达式的最重要的一课是什么时候不使用它们。因此，我认为您可能很难获得有关您发布的示例的详细反馈。带回家的教训是，虽然有些人喜欢编写复杂的正则表达式，但很少有人喜欢阅读（或扩展或修复）它们。

# android - 从菜单中按下

> ID：10926800
> 
> 赞同：0
> 
> 时间：2012-06-07T06:36:38.113
> 
> 标签：android, android-layout

我有一个设置菜单，用于应用程序的所有屏幕。现在，当我单击菜单并转到特定屏幕编辑时，设置并按回，然后我无法知道从哪个屏幕单击了菜单项。我试图将活动名称放在意图中，但这听起来不是个好主意..请帮忙。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.propsmain);
    setTitle("Settings");
    prev_screen = getIntent().getStringExtra("prev_screen");
    try {
        final ArrayList<Properties> propsList = getProperties();
        if (propsList == null || propsList.size() == 0) {
                       // show alert
        } else {
            setListAdapter(new PropertyAdapter(this, R.layout.props,
                    propsList));
        }
        final ListView lv = getListView();
        lv.setOnItemClickListener(new OnItemClickListener() {

            // @Override
            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                Properties prop = propsList.get(arg2);
                Bundle b = new Bundle();
                b.putString("prop_name", prop.getName());
                b.putString("prop_value", prop.getValue());

                Intent intent = new Intent(SetProperties.this,
                            EditPropertyActivity.class);
                    intent.putExtras(b);
                    startActivity(intent);
                }
        });

    } catch (PropertyFileMissing e) {
        AlertDialog dialog = new AlertDialog.Builder(SetProperties.this)
                .create();
        dialog.setTitle("Failure");
        dialog.setMessage(e.toString());
        dialog.setIcon(R.drawable.error);
        dialog.setButton("Ok", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
            }
        });

        dialog.show();
    } 
} 
```

// EditProperty 类在我的清单中有一个对话框主题

```
 ublic class EditPropertyActivity extends Activity {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.dialog);
    setTitle("");
    TextView propName = (TextView) findViewById(R.id.tv_propName);
    final String tagName = getIntent().getExtras().getString("prop_name");
    final String value = getIntent().getExtras().getString("prop_value");

    propName.setText(getIntent().getExtras().getString("prop_label"));

    final EditText ed_propValue = (EditText) findViewById(R.id.ed_propValue);
    ed_propValue.setText(value);
    if (tagName.equals("timeout")) {
        ed_propValue.setInputType(InputType.TYPE_CLASS_NUMBER);
    }
    Button btn_save = (Button) findViewById(R.id.btn_save);
    btn_save.setOnClickListener(new View.OnClickListener() {

        // @Override
        public void onClick(View v) {
            String newValue = ed_propValue.getText().toString().trim();
            if ((tagName.equals("timeout") || tagName.equals("serverUrl") || tagName
                    .equals("channelName")) && (newValue.equals(""))) {
                Toast.makeText(getApplicationContext(),
                        getResources().getString(R.string.NOT_NULL),
                        Toast.LENGTH_LONG).show();
                return;
            }

            editFile(tagName, newValue);
            finish();
        }
    });

    Button btn_cancel = (Button) findViewById(R.id.btn_cancel);
    btn_cancel.setOnClickListener(new View.OnClickListener() {

        // @Override
        public void onClick(View v) {
            finish();
        }
    });
} 
```

}

——阿毗拉沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:17:33.290

很抱歉延迟发布答案。我在使用以下方法解决问题时遇到了问题。

```
public void onBackPressed() {
    super.onBackPressed();
    if(count == 0){
        super.onBackPressed();
    }else{
    for (int i = 0; i < count; i++) {
        super.onBackPressed();
    } 
```

而且在我单击对话框活动上的保存按钮后，我添加了下面的代码来更新所选项目的值。而不是用新的意图再次启动活动，我只是按照 Waqas 的建议调用“finish();”。

```
 SetProperties.propsList = getProperties();
    PropertyAdapter adapter = (PropertyAdapter) SetProperties.listview.getAdapter();
    adapter.notifyDataSetChanged();
    finish(); 
```

感谢大家的帮助和指导：）

# c# - 如何将 Textbox1 值设置为 Cystal 报告的公式字段

> ID：10926803
> 
> 赞同：3
> 
> 时间：2012-06-07T06:36:50.470
> 
> 标签：c#, visual-studio, crystal-reports

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:39:48.140

```
Dim RptForm As CrystalDecisions.CrystalReports.Engine.ReportDocument

Dim T As CrystalDecisions.CrystalReports.Engine.TextObject

RptForm = New MyCrystalReport()

T = RptForm.ReportDefinition.Sections(0).ReportObjects("TXTCNAME")

T.Text = DTPTDate.Value 
```

Here TXTCNAME is the name of textbox present in Sections(0) of Crystal Report

MyCrystalReport is the crystal Report you want to use.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T14:45:56.593

当 Crystal 报表**公式字段**为**DateTime**时，以下代码将为您提供帮助：

```
CrystalDecisions.CrystalReports.Engine.ReportDocument rd = new ReportDocument();
rd.Load("AgedItems_3.rpt");
try
{
string datetext = RunDate.ToString("dd/MM/yyyy HH:mm");
rd.DataDefinition.FormulaFields["ProcessDate"].Text = "#"+datetext+"#";
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
}

crystalReportViewer2.ReportSource = rd; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T06:20:57.530

首先创建报表类的实例，然后访问成员变量并在主界面中使用该变量。

假设我有一个名为 ReportView() 的报表类，在那里我声明了一个成员变量，例如

```
public CrystalDecisions.CrystalReports.Engine.ReportDocument rptDocument; 
```

现在在您的报告显示界面中，创建一个 ReportView 实例并执行以下操作：

```
ReportView rptView = new ReportView();
rptView.rptDocument.DataDefinition.FormulaFields["formulaName"].Text = "'" + txt.Text + "'"; 
```

这里，`txt`是一个包含值的文本框，`formulaName`是在报表设计中创建的公式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-14T13:13:24.987

`reportDoc.DataDefinition.FormulaFields("NameOfFormula").Text = "'Value'"` 只需在文本值 ex:之间添加 '' 这必须正常工作。

# c# - 串口读取问题

> ID：10926806
> 
> 赞同：0
> 
> 时间：2012-06-07T06:36:59.843
> 
> 标签：c#, serial-port

我必须创建一个应用程序，它每 200 毫秒从 PLC 读取寄存器。为此，我正在使用类似的东西：

```
SerialPort port = new SerialPort();

private void Form1_Load(object sender, EventArgs e)
{
   port.ReceivedBytesThreshold = 21;
   timer1.Interval = 200;
   timer1.Start();
}

private void ProcessTimer_Tick(object sender, EventArgs e)
{
   if (dataReceived)
   {
        dataReceived = false;
        port.Read(buffer_rx, 0, 21);
        TranslateValues();
   }

   if (port.IsOpen && connectected)
   {  
      // sends command for a new reading
      port.Write(buffer_tx, 0, length);
   }
}

private void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
   Invoke(new EventHandler(DoUpdate));
}

void DoUpdate(object sender, EventArgs e)
{
   dataReceived = true;
} 
```

问题是我的应用程序不时冻结。当我调试它时，调试器将我指向 port.Read()，但不会抛出任何异常。

我曾尝试使用 try-catch 块，但没有被捕获，并且也没有被捕获，`time1.Interval = 2000`但它也没有工作。

我的问题是，为什么我的应用程序在 port.Read() 处冻结，但没有捕获任何异常？我怎样才能解决这个问题？

# javascript - .live() 中的 jQuery .select() 在 IE7 和 IE8 上不起作用

> ID：10926808
> 
> 赞同：3
> 
> 时间：2012-06-07T06:37:03.587
> 
> 标签：javascript, javascript-events, jquery

```
jQuery(document).ready(function($) {
    $('input[type="text"]').live('focus', function() {
        if (this.value == 'someValue') {
            this.select();
        }
    });
}); 
```

.delegate() 和 .on() 的结果相同。

我错过了什么？

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:47:03.937

`focus`它确实有效，文本在使用事件时一旦被选中就会被取消选择

使用`on()`和其他事件`focus`似乎效果更好

[看到这个小提琴](http://jsfiddle.net/t2Pvz/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:41:40.350

对我来说很好用`.on`。也许您希望它在单击时选择文本？

```
$("form").on("click", ":text", function(){
    if ( $(this).val() === "someValue" ) {
        $(this).select();
    }
});​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/nfKm7/](http://jsfiddle.net/jonathansampson/nfKm7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:40:42.940

DEMO: [http://jsfiddle.net/hjgZ3/](http://jsfiddle.net/hjgZ3/)

remove `$` from `function($)`

```
<input type="text" value="someValue" />  

       $(function(){
          $('input[type="text"]').live('focus', function() {
                if (this.value == 'someValue') {
                   alert('hi');                
                   //this.select();
                }
            });
        }) 
```

# clearcase - 如果文件夹名称以大写字母开头，添加到源代码管理无法显示活动列表

> ID：10926809
> 
> 赞同：1
> 
> 时间：2012-06-07T06:37:13.987
> 
> 标签：clearcase, clearcase-ucm

今天我们在 Clearcase UCM 中遇到了奇怪的问题。

我们试图添加一个名为“Common”的文件夹（其中包含许多子文件夹和文件元素）。

当我们点击 add to source control 时，它不会显示活动列表框。（它显示好像我们试图在基本 clearcase 中添加到源代码控制）。

当我们取消它时，它会抛出异常并首先将文件夹名称更改为小写字母（普通）。如果我们尝试将此添加到源代码控制，它会显示活动列表。（就像普通的 UCM 添加到源代码控制对话框一样）。

我们检查了 cc.cpl 中的案例保存复选框，然后重新启动了服务。但我们仍然面临同样的问题。

我们使用的是最新的 clearcase，操作系统是 Windows 7。我不知道为什么会这样。它阻止了我们添加名为“Common”的源代码控制。

可能是什么问题 ？如果您遇到此问题并解决了，请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:24:23.250

每当通过 GUI 发生奇怪的错误时，通常的建议是回退到 CLI。

看：

*   "[从命令行将元素（文件和目录）添加到源代码管理](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/to_add_src_control.htm)"
*   [`cleartool mkelem`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkelem.htm)

你可以做：

```
# go to the parent directory of Common
cd <view/path/to/Common>/..
# check there is a current activity set
cleartool lsact -cact
# checkout the parent directory
cleartool checkout -nc .
# add to source control Common (not its content, just the directory)
cleartool mkelem –nc -ci -ptime –eltype directory
# checkin the parent directory
cleartool checkin -nc . 
```

# java - How to remove all the punctuation except whitespaces or numbers in java

> ID：10926810
> 
> 赞同：-1
> 
> 时间：2012-06-07T06:37:21.763
> 
> 标签：java

How to remove all the punctuation *except* whitespaces or numbers in Java.

```
"\\p{Punct}|\\d", "" //THIS WORKS BUT IT REMOVES THE NUMBERS AND I DONT WANT IT TO REMOVE THE NUMBERS... 
```

I am reading text and I need to remove punctuation.

```
String[] internal;
char ch = 'a';
int counter = 1;
int count;
int c;
Map<String, Set> dictionary = new HashMap<String, Set>();
BufferedReader in = new BufferedReader(new FileReader("yu.txt"));
while (in.ready()) {
    internal = (((in.readLine()).replaceAll("\\p{Punct}|\\d", "")).toLowerCase()).split(" ");//this does not work in my case cause it removes numbers... and makes them whitespaces but other than that this one works I JUST dont want it to remove numbers and keep whitespaces...
    for (count = 0; count < internal.length; count++) {
        if (!dictionary.containsKey(internal[count])) {
            dictionary.put(internal[count], new HashSet());
        }
        if (dictionary.get(internal[count]).size()<10)
        {
        dictionary.get(internal[count]).add(counter);
        }
    }
    counter++;
}
Iterator iterator = dictionary.keySet().iterator();  
while (iterator.hasNext()) {  
String key = iterator.next().toString();  
String value = dictionary.get(key).toString();  
System.out.println(key + ": " + value );  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:42:49.447

I am unaware of an existing class (default) which can do so.

You will need to write a logic that goes through the String character by character and check if the character is a punctuation. If its is, then cut the String one char before and append the remaining part (effectively removing that char/punctuation).

Prefer using a StringBuilder or StringBuffer instead of directly manipulating the String.

Use the String.substring() method to cut the string.

* * *

Else use the String.replace()/String.replaceAll() method to replace all punctuation (you will need to escape certain characters) with "".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:41:31.120

str = str.replaceAll("[^0-9a-zA-Z\s]", "X");

# eclipse-plugin - Coverity Prevent Plugin for Eclipse

> ID：10926811
> 
> 赞同：2
> 
> 时间：2012-06-07T06:37:25.090
> 
> 标签：eclipse-plugin, static-analysis

Can anybody let me know the link of Coverity Prevent Plugin (Static analysis tool)for Eclipse(Android Development Environment) and its usage in Eclipse?

Regards,

Bhavani

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T16:39:49.630

自 5.5 版（当前版本为 6.0 版）以来，Coverity Integrity Manager 将 Eclipse 插件与它捆绑在一起。

安装 Integrity Manager 后，引导您的用户`http://<your-host>:<your-port>/downloads`查看 Eclipse 的更新 URL，并下载其他插件的包和本地运行分析所需的包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:47:31.393

大部分信息都在仅限客户的链接中，但在 Coverity 的新公共支持论坛[https://communities.coverity.com/thread/1887](https://communities.coverity.com/thread/1887)上有一些信息。

# xml - xml 声明的大写

> ID：10926812
> 
> 赞同：2
> 
> 时间：2012-06-07T06:37:25.197
> 
> 标签：xml, xslt, namespaces

只是在 XML 大写方面遇到了一些问题。我需要使用 XSLT 文件生成以下 xml 命名空间：

```
<?xml version="1.0" encoding="ISO-8859-1" ?> 
```

但是，在我的 XSLT 引擎处理后，声明将 ISO 的大写更改为 iso。

```
<?xml version="1.0" encoding="iso-8859-1" ?> 
```

我的问题是：

```
 1). Is/Are there any significant difference between these two declarations?
  2). Is is possible to retain the capitalization of ISO? 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:06:23.087

由于您的问题 1) 的一部分已经被 Tangelo 评论中引用的问题回答，我将只讨论第 2) 部分。

您**应该**能够使用该元素通过“编码”属性来控制编码。属性的值**应该**完全按照您在样式表中指定的大小写来发出。

例子：

```
<xsl:output method="xml" version="1.0" encoding="ISO-8859-1" /> 
```

然而，话虽如此，请注意 XSLT 1.0 规范中的这段摘录......

> *   encoding：指定 XSLT 处理器用于将字符序列编码为字节序列的首选字符编码；属性的值应该不区分大小写；该值必须仅包含 #x21 到 #x7E 范围内的字符（即可打印的 ASCII 字符）；该值应该是在 Internet Assigned Numbers Authority [IANA]、[RFC2278] 注册的字符集或以 X- 开头

这意味着没有绝对保证的方法可以在所有 XSLT 处理器上通用地控制这种情况，所以现在问题归结为您的 XSLT 处理器是什么？答案将是特定于供应商的。

# ruby-on-rails - Rename directory from app [Rails, Carrierwave]

> ID：10926815
> 
> 赞同：0
> 
> 时间：2012-06-07T06:37:30.583
> 
> 标签：ruby-on-rails

Is there a possibility to rename directory from app?

I'm uploading files via FTP (cause it's a lot of files and it's weight) and naming directory with theme {model.title}-{model.place}. When I change the subject title or place in app, the directory name now is wrong and I must rename it by connecting to FTP. I want to automatically rename this dir when i hit "edit" in my app.

Got app in rails 3.1.3 with carrierwave.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:10:12.417

[您可以使用FileUtils](http://apidock.com/ruby/FileUtils/mv)重命名 Ruby 中的目录

```
require 'fileutils'
FileUtils.mv old_directory_name, new_directory_name 
```

您可以使用模型回调来实现这一点：

```
class MyModel < ActiveRecord::Base
  # Callback triggered by a changed place or title
  before_save :change_directory_names

  private

  # Method that changes directory names
  def change_directory_name
    if self.title_changed?
      title = self.title.changes.flatten.drop(1)
      # Code here to change the directory name
      # Old title: title.first
      # New title: title.last
    elsif self.place_changed?
      place = self.place.changes.flatten.drop(1)
      # Code here to change the directory name
      # Old place: place.first
      # New place: place.last
    end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:29:51.747

我认为用不变的东西命名你的目录会更有意义。为什么不直接使用 Model.id？

# java - 我应该使用 ExecutorService 吗？

> ID：10926818
> 
> 赞同：1
> 
> 时间：2012-06-07T06:38:00.757
> 
> 标签：java, multithreading, concurrency, parallel-processing, executorservice

在我的应用程序中，我正在执行一堆 SQL 查询，例如作业和执行的详细信息，它们被插入到表中。插入任何记录后，侦听​​器应立即将其拾取并开始监视执行状态并更新同一表中的状态。

我的前端已准备就绪，直到现在我能够执行作业（多个查询）并将详细信息插入表中。现在我想捕获执行状态，并且我应该能够结束、暂停、重新启动执行。

当我经历多线程部分时，我遇到了 ExecutorService。

***我的问题是我应该使用 ExecutorService 执行此操作吗？还是有其他方法？***

请分享任何教程链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:07:12.850

在您的情况下，我认为您可以使用 ExecutorService 并在[Callable](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)对象中创建作业，这将帮助您以[Future 对象](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)的形式获取正在运行的作业的状态。

对于教程，我更喜欢[这个](http://tutorials.jenkov.com/java-util-concurrent/executorservice.html)，它有关于并发包的基本信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:09:40.773

我使用 ExecutorService 来运行并行单元测试。并发现它非常成功。所以我建议你使用它。参考[这个](https://stackoverflow.com/questions/10141648/concurrent-junit-tests-with-parameters/10239869#10239869)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:04:21.660

也许我在这里的问题的答案可以帮助捕获任务的状态。

[如何获得未来任务执行状态](https://stackoverflow.com/questions/6933219/how-to-get-to-futuretask-execution-state)

虽然 Executors 框架非常强大，几乎可以在任何情况下使用，但也许你应该看看[Quartz](http://quartz-scheduler.org/)之类的并发库，如果使用 Executors 已经解决了你会遇到的很多问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-13T09:22:00.173

是的。您可以`ExecuteService`，`Callable`并`Future`实现这一目标。

示例代码：

```
import java.util.concurrent.*;
import java.util.*;
import java.util.Random;

public class CallableDemo{
    public CallableDemo(){
        System.out.println("creating service");
        ExecutorService service = Executors.newFixedThreadPool(10);

        System.out.println("Start");
        List<MyCallable> futureList = new ArrayList<MyCallable>();
        for ( int i=0; i<10; i++){
            MyCallable myCallable = new MyCallable();
            Future future = service.submit(myCallable);
            try{
                System.out.println("future.isDone = " + future.isDone());
                /* You can use future.get() blocking call set time out*/
                System.out.println("future: call ="+future.get());
            }
            catch (CancellationException ce) {
                ce.printStackTrace();
            } catch (ExecutionException ee) {
                ee.printStackTrace();
            } catch (InterruptedException ie) {
                Thread.currentThread().interrupt(); // ignore/reset
            }
        }       
        service.shutdown();
    }
    public static void main(String args[]){
        CallableDemo demo = new CallableDemo();
    }
    class MyCallable implements Callable<Long>{
        Long result = 0L;

        public MyCallable(){

        }
        public Long call(){
            // Add your business logic
            // set the result
            return result;
        }
    }
} 
```

关键说明：

1.  future.get() 在 Callable 任务计算后返回。您可以阻止直到 Callable 完成，也可以为其设置超时。
2.  如果得到`InterruptedException`，请中断当前线程并继续。
3.  别忘了打电话`shutdown()`

# c - 函数 fmax 的隐式声明

> ID：10926819
> 
> 赞同：2
> 
> 时间：2012-06-07T06:38:02.590
> 
> 标签：c, ansi, c89

我有以下代码：

```
#include <stdio.h>
#include <math.h>

int main(void) {
    printf("%f\n", fmax(1.2, 3.4));
    return 0;
} 
```

如果我编译：

```
gcc a.c -o a && ./a 
```

然后我得到预期的输出：

```
3.400000 
```

如果我尝试启用警告并以 C89 为目标，则无法编译：

```
$ gcc -Wall -Wextra -std=c89 -pedantic -Wstrict-prototypes a.c -o a
a.c: In function ‘main’:
a.c:5:5: warning: implicit declaration of function ‘fmax’ [-Wimplicit-function-declaration]
a.c:5:5: warning: format ‘%f’ expects argument of type ‘double’, but argument 2 has type ‘int’ [-Wformat]
/tmp/cc8d2iQl.o: In function `main':
a.c:(.text+0x1d): undefined reference to `fmax'
collect2: ld returned 1 exit status 
```

```
$ gcc -Wall -Wextra -std=c89 -pedantic -Wstrict-prototypes a.c -lm -o a
a.c: In function ‘main’:
a.c:5:5: warning: implicit declaration of function ‘fmax’ [-Wimplicit-function-declaration]
a.c:5:5: warning: format ‘%f’ expects argument of type ‘double’, but argument 2 has type ‘int’ [-Wformat] 
```

我发现它`fmax()`仅由 C99 标准定义，而不是 C89。所以问题是：为什么这些完全相同的命令可以在 Mac 上运行而不会发出任何警告，而在 Linux 机器上却不行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T06:43:53.817

我认为您需要使用 -std=c99 构建（请参阅 fmax 的手册页）.. 看到[这个](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=31422)

来自[fmaxf 手册页](http://linux.die.net/man/3/fmaxf)

```
fmax(), fmaxf(), fmaxl():
_XOPEN_SOURCE >= 600 || _ISOC99_SOURCE || _POSIX_C_SOURCE >= 200112L;
or cc -std=c99 
```

看来**fmax也需要C99**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:47:19.537

来自 gcc[文档](http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/Other-Builtins.html#Other-Builtins)：

> 5.44 GCC提供的其他内置函数
> 
> GCC 提供了大量除上述之外的内置函数。其中一些是在处理异常或可变长度参数列表时内部使用的，并且不会在此处记录，因为它们可能会不时更改；我们不建议一般使用这些功能。
> 
> 其余函数用于优化目的。
> 
> GCC 包括标准 C 库中许多函数的内置版本。即使您指定了 -fno-builtin 选项，带有 _ *builtin*前缀的版本将始终被视为与 C 库函数具有相同的含义。（请参阅 C 方言选项）其中许多功能仅在某些情况下进行了优化；如果它们在特定情况下未优化，则会发出对库函数的调用。
> 
> 在严格的 ISO C 模式（-ansi、-std=c89 或 -std=c99）之外，函数 _exit、alloca、bcmp、bzero、dcgettext、dgettext、dremf、dreml、drem、exp10f、exp10l、exp10、ffsll、ffsl、 ffs, fprintf_unlocked, fputs_unlocked, gammaf, gammal, gamma, gettext, index, isascii, j0f, j0l, j0, j1f, j1l, j1, jnf, jnl, jn, mempcpy, pow10f, pow10l, pow10, printf_unlocked, rindex, scalbf, scalbl、scalb、signbit、signbitf、signbitl、significandf、significandl、significand、sincosf、sincosl、sincos、stpcpy、strdup、strfmon、toascii、y0f、y0l、y0、y1f、y1l、y1、ynf、ynl和yn作为内置函数。所有这些函数都有相应的版本前缀*_builtin*，即使在严格的 C89 模式下也可以使用。
> 
> ISO C99 函数 _Exit, acoshf, acoshl, acosh, asinhf, asinhl, asinh, atanhf, atanhl, atanh, cabsf, cabsl, cabs, cacosf, cacoshf, cacoshl, cacosh, cacosl, cacos, cargf, cargl, carg, casinf, casinhf, casinhl, casinh, casinl, casin, catanf, catanhf, catanhl, catanh, catanl, catan, cbrtf, cbrtl, cbrt, ccosf, ccoshf, ccoshl, ccosh, ccosl, ccos, cexpf, cexpl, cexp, cimagf, cimagl, cimag, conjf, conjl, conj, copysignf, copysignl, copysign, cpowf, cpowl, cpow, cprojf, cprojl, cproj, crealf, creall, creal, csinf, csinhf, csinhl, csinh, csinl, csin, csqrtf, csqrtl, csqrt, ctanf, ctanhf, ctanhl, ctanh, ctanl, ctan, erfcf, erfcl, erfc, erff, erfl, erf, exp2f, exp2l, exp2, expm1f, expm1l, expm1, fdimf, fdiml, fdim, fmaf, fmal, **fmaxf** , fmaxl, **最大**, fma, fminf, fminl, fmin, hypotf, hypotl, hypot, ilogbf, ilogbl, ilogb, imaxabs, isblank, iswblank, lgammaf, lgammal, lgamma, llabs, llrintf, llrintl, llrint, llroundf, llroundl, llround, log1pf, log1pl ，log1p，log2f，log2l，log2，logbf，logbl，logb，lrintf，lrintl，lrint，lroundf，lroundl，lround，nearthintf，nearthintl，nearthint，nextafterf，nextafterl，nextafter，nexttowardf，nexttowardl，nexttoward，residualf，remainderl，residual , remquof, remquol, remquo, rintf, rintl, rint, roundf, roundl, round, scalblnf, scalblnl, scalbln, scalbnf, scalbnl, scalbn, snprintf, tgammaf, tgammal, tgamma, truncf, truncl, trunc, vfscanf, vscanf, vsnprintf和 vsscanf 作为内置函数处理，除了严格的 ISO C90 模式（-ansi 或 -std=c89）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:47:31.773

它由 C99 定义，但不是 C89。

在 man 中搜索“C99”以 [查找 fmaxf](http://linux.die.net/man/3/fmaxf)

# java - download as .html file using AbstractExcelView

> ID：10926821
> 
> 赞同：3
> 
> 时间：2012-06-07T06:38:41.553
> 
> 标签：java, spring, export-to-excel

When i create and download file using AbstractExcelView in spring application, it will download as .html file.But when i change its extension as .xls manually ,it shows expected result. My code for AbstractExcelView is :

public class ExcelRevenueReportView extends AbstractExcelView {

```
@Override
protected void buildExcelDocument(Map model, HSSFWorkbook workbook,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    Map<String, String> revenueData = (Map<String, String>) model
            .get("revenueData");

    // create a wordsheet
    HSSFSheet sheet = workbook.createSheet("Revenue Report");

    HSSFRow header = sheet.createRow(0);
    header.createCell(0).setCellValue("Month");
    header.createCell(1).setCellValue("Revenue");

    int rowNum = 1;
    for (Map.Entry<String, String> entry : revenueData.entrySet()) {
        // create the row data
        HSSFRow row = sheet.createRow(rowNum++);
        row.createCell(0).setCellValue(entry.getKey());
        row.createCell(1).setCellValue(entry.getValue());

    }

} 
```

}

The context configuration file :dispatcher-servlet.xml is

```
<beans:bean name="/index.html" class="com.my.report.HomeController">    
</beans:bean>

 <beans:bean class="org.springframework.web.servlet.view.XmlViewResolver">
  <beans:property  name="location" value="/WEB-INF/spring-excel-views.xml" />
       <beans:property  name="order" value="0" />
</beans:bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:20:33.490

当涉及到 HTTP 和 Web 应用程序（spring 与否）时，有很多选择。

一些想法：

1 - 强制显示“另存为”对话框，使用户能够根据需要保存文件（可能重命名它们及其扩展名）。

这可以通过将 HTTP“content-type”标头设置为“application/octet-stream”来实现。这实际上告诉浏览器数据是未知类型的字节流。这使浏览器“理解”它将由另一个应用程序打开/处理。因此，浏览器继续允许您保存文件。

您只提供了 buildExcelDocument 视图管理器代码。虽然不能真正说明在此方法之前或之后执行了哪些代码，但设置此 HTTP 标头的一种方法是简单地使用“HttpServletResponse”对象：

```
response.setHeader("Content-Type", "application/octet-stream"); 
```

另一种（更丑陋的）方法是将其硬编码到 XML/HTML 视图中：

```
<meta http-equiv="Content-Type" content="application/octet-stream /> 
```

如果您的系统有一个页面，其唯一目的是下载文件，这可能会很好。如果您从块中构建视图并且只有一个主 http 页面，则强制元标记会与其他视图混淆。

2 - 您还可以通过强制给定文件名来设置扩展名。

您可以通过与第一个建议相同的方式完成它：通过设置特定的 content-disposition HTTP 标头：

```
// Set file name and extension
response.setHeader("Content-Disposition", "inline; filename=yourExcelFile.xls"); 
```

这会将流设置为正确下载为您声明的文件名和扩展名。

同样，这可以直接放在 HTML/XML/JSP/JSF（或任何技术）本身中，但这不是最好的解决方案。

我会采用“setHeader”的方式，我会同时使用这两种想法：

```
// Force save-as dialog:
response.setHeader("Content-Type", "application/octet-stream");

// Set file name and extension
response.setHeader("Content-Disposition", "inline; filename=yourExcelFile.xls"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T07:25:00.510

尝试这个：

```
response.setHeader("Content-Disposition", "attachment; filename=\"yourFile.xls\""); 
```

# .net - .NET Project Platform

> ID：10926822
> 
> 赞同：1
> 
> 时间：2012-06-07T06:38:42.723
> 
> 标签：.net, asp.net-mvc, silverlight

I am a sole developer (experienced in web development) in the company (a newly established one). I received a project to develop an ERP system from ground-up. Naturally, my platform of choice would be ASP.NET. I started the project, fully written in MVC but as I progress further, I find that it is getting increasingly hard to manage.

Despite having a good architecture, Repository, DI, MVC-VM, the system itself is hard to maintain. The stateless nature of HTTP requires me to write a lot of javascript / jQuery to plug holes such as maintaining state, which consumed a lot of my time. Also, since it's a fairly large application, design can sometimes be restrictive which I ended up using javascript to resolve. Think about having a form within a form. This is the kind of problem I've been facing.

Then, I came across Silverlight LOB applications while browsing and wow, I was impressed. Very impressed with the UI and fluidity. So now, I need an advice. Should I take on Silverlight? Or should I stay with MVC? Can Silverlight reduce development time significantly? What is the learning curve like?

Edit: I forgot to mention that this application is strictly for internal staffs only. The only component that interacts with the outside world is the catalog and CMS component.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:27:50.203

一年前，我们/我面临一个类似的决定：我们必须将桌面 LOB（复杂性与 ERP 相似）移植到 Web。我们研究了可能的选项：Silverlight、Flash (Air) 和 HTML 5 (javascript)。

由于我们都有 .net 背景，在 Web 开发方面经验很少，我们选择了 Silverlight。在我们切换到 HTML 5 9 个月后 :)。发生了什么：

*   SL 和 HTML 5 都能够完成工作
*   如果您有 .net (win forms, wpf) 背景，SL 学习曲线会更小。
*   从桌面到网络的学习曲线很高——所以无论你选择什么，你都会头疼
*   SL 也是无状态的（或者更好——我们使用的启用 SL 的 WCF 服务是无会话的）所以我们必须自己编写整个状态管理逻辑（实际上并不难）
*   在 Silverlight 中管理大型项目的复杂性也相当困难 - 我们使用 Prism、MEF 和其他几个库来更好地组织代码并完成工作，但项目只是很大 - 加上一些“不那么幸运” " 决策（缺乏 Web 开发技能的后果）使在项目中导航成为问题
*   （好）SL 开发人员很难找到——我们找了 6 个月，但找不到任何人来帮助我们进行架构/设计。在这方面，更容易找到（优秀的）ASP.net 开发人员——这是考虑增加团队或维护时需要考虑的事情
*   连接到前一点——我们从 SL 切换到 HTML 5 的主要原因是管理压力——HTML 5 是当今的流行词，而 SL 被视为“相当死”的技术（我不想进入讨论关于这个声明——它只是描述了管理层是如何看待事情的）。当你告诉他们你想用 SL 开发时，他们会问你“为什么要使用 SL，而其他人都在使用 HTML 5”？- 很难找到好的理由...
*   我还在 SL 中看到了不错的 LoB 应用程序——我们投入的 9 个月也带来了一个相当不错的应用程序——但是通过切换到 MVC 4，我们可以让更多人参与该项目，我不得不承认 MVC 应用程序看起来和 SL 一样漂亮。当然，习惯 javascript（及其所有库）需要一些时间，但作为一名前 winforms/wpf/SL 开发人员，我开始欣赏它的美丽。
*   注意：使用一些 js 库（淘汰赛，甚至可能是其他库），您可以获得 SL 中令人敬畏的“绑定”功能（我认为 XAML 和 ExpressionBlend 是 SL 中最好的东西）

加起来：

*   如果您已经开始使用 ASP.net MVC，我的建议是坚持使用它 - 维护/让人们相信您在正确的技术船上会更容易。您可以量化现在切换到 SL 的成本（2-3 个月来习惯 SL 和各种 SL 库 - PRISM、MVVM light 等 + 几个月的开发才能达到您现在所在的位置) 并且有了这笔钱，您可以获得另一双手来帮助您开发 MVC 应用程序。

*   如果您想要流畅/响应性，请获取一些 js 库 -[剑道](http://www.kendoui.com/)（来自 Telerik）非常好 - 看起来很棒并且移动速度很快

    希望这对您有所帮助 - 如果您有任何其他问题 - 发表评论。

# c# - 在 Web 应用程序 (.net) 中使用静态方法是否有潜在的陷阱？

> ID：10926828
> 
> 赞同：3
> 
> 时间：2012-06-07T06:39:05.750
> 
> 标签：c#, asp.net, static-methods

从 Web 应用程序调用 Web 服务，然后调用一些静态帮助程序类来过滤和排序数据 - 如果我将与多个用户发生意外行为，请提前考虑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:40:57.180

确保您的静态方法是线程安全的。

线程安全从根本上处理确保两个线程不会以冲突的方式访问共享资源。

[Wikipedia](http://en.wikipedia.org/wiki/Thread_safety)上有一个很好的概述。

我找到的关于 .NET 环境中的线程的最好的教程是[Joe Albahari 的](http://www.albahari.com/threading/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:40:53.367

不，只要这些方法不共享访问任何共享资源。这可能是：

*   磁盘上的文件
*   一些静态数据
*   另一个外部资源

您只需要确保您不会无意中共享任何资源/静态数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T06:40:43.800

使用静态方法没有问题。除非您可以同步访问并保持性能，否则不要使用静态状态

# java - How to clear browser cache using java

> ID：10926833
> 
> 赞同：0
> 
> 时间：2012-06-07T06:39:31.693
> 
> 标签：java, guice-servlet

I have a problem in sessions. When ever I logout the session is ended but then when the browsers back button is pressed I am getting the previous page. I am using jsp servlet technology and my code for logout is given below

```
 request.getSession().invalidate();
        response.setHeader("Cache-Control","no-cache"); 
        response.setDateHeader("Expires", 0);
        response.setHeader("Pragma","no-cache"); 
        response.sendRedirect("home.jsp"); 
```

can anybody tell me where is the problem and what will be the solution for this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:06:18.033

您是否仅在注销页面上设置缓存标头？如果是这样，您需要将它们放在每个页面上，因为您来自的页面没有它们并且将被缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:46:56.097

写下你的代码，

```
 //...
     response.setHeader("Cache-Control","no-cache"); //Forces caches to obtain a new copy of the page from the origin server
     response.setHeader("Cache-Control","no-store"); //Directs caches not to store the page under any circumstance
     response.setDateHeader("Expires", 0); //Causes the proxy cache to see the page as "stale"
     response.setHeader("Pragma","no-cache"); //HTTP 1.0 backward compatibility

     //can check userId or something likes this.In this sample, i checked with userName.
     String userName = (String) session.getAttribute("User");
     if (null == userName) {
         request.setAttribute("Error", "Session has ended.  Please login.");
         RequestDispatcher rd = request.getRequestDispatcher("login.jsp");
         rd.forward(request, response);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:51:31.877

```
<script>
    history.forward();
 </script> 
```

将此javascript添加到该注销页面之前的页面并调用。在标签上添加以下代码

```
onLoad="if (location.href.indexOf('reload')==-1) location.replace(location.href+'?reload')" 
```

它将解决您的后退按钮问题。

# php - How to Convert Zend_Db_Rable_Row to object

> ID：10926836
> 
> 赞同：0
> 
> 时间：2012-06-07T06:39:48.457
> 
> 标签：php, zend-framework, zend-db, zend-db-table

How to Convert Zend_Db_Rable_Row to object. Assume the database table has same column names as the variables in the object except the '*' (private variables in the object are starting with '*' (underscore))

for example database table column is username and variable name in the object is _username

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:35:38.910

如果您的私有变量以下划线开头，那么您很可能有这些的 getter 和 setter。例如`private $_myVar`将有 setter `setMyVar()`。此代码将为行中的每个字段调用正确的设置器：

```
public function convertToObject($row) 
{
    $myObject = new MyObject();

    foreach ($row->toArray() as $key=>$value) {
        // find out the name of the setter to call
        $setterName = 'set' . ucfirst($key);
        $myObject->$setterName($value);
    }

    return $myObject;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:15:24.423

Zend_Db_Table_Row 是一个对象。如果你调用 fetchAll() 它将返回一个 Zend_Db_Table_Row 类型的 Objects 数组（列名是受保护的变量，访问 $row->column）。如果你调用 fetchRow() 它将返回一个 Zend_Db_Table_Row 对象。

例如：

```
//assume we are working inside a Application_Model_DbTable_
public function fetch() {
$select = $this->select();
//here $result would return an array of Row objects that can be iterated over using a foreach
$result = $this->fetchAll($select);
//here we would return a single Row Object
$select->where('id = ?', $id);
$result = $this->fetchRow($select);
//you can call toArray() on these objects if you need an array
$array = $result->toArray();

}
//if you are using these objects in your application you can always access any of the
//columns using normal object syntax, without the underscores.
$id = $result->id;
$name = $result->name; 
```

如果您使用 Zend_Db_Adapter 或 Zend_Db_Statement 进行查询，您可能会有一些不同的行为。

我希望我正确理解了你的问题。

# java - New Jedis Client Does Not Work In Static Java Method

> ID：10926837
> 
> 赞同：1
> 
> 时间：2012-06-07T06:39:56.150
> 
> 标签：java, redis, jedis

Why does this same piece of code have different results?

I'm using Jedis 2.1.0 to create connections to Redis.

**METHOD A:**

```
private static Jedis getNewJedis() {
        return new Jedis(hostname,port);
    }

.....
public static main(String[] args){
     getNewJedis().ping();
} 
```

**METHOD B:**

```
public static main(String[] args){
     new Jedis(hostname,port).ping();
} 
```

I'm thinking the difference is Method A has been tucked away in a static method for ease of reuse, and hence should have the same effect as Method B when invoked.

Instead, I get an exception when I use Method A. Method B works fine!

**METHOD A Exception**:

> Exception in thread "main" redis.clients.jedis.exceptions.JedisConnectionException: java.net.ConnectException: Connection refused: connect at redis.clients.jedis.Connection.connect(Connection.java:134) at redis.clients.jedis.BinaryClient.connect(BinaryClient.java:69) at redis.clients.jedis.Connection.sendCommand(Connection.java:86) at redis.clients.jedis.BinaryClient.ping(BinaryClient.java:82) at redis.clients.jedis.Jedis.ping(Jedis.java:34) at org.tripodwire.esme.receiver.ReceiverProducer.produceTestJedis(ReceiverProducer.java:168) at org.tripodwire.esme.entry.Entry.main(Entry.java:25)

# jquery - Trying to simulate label click

> ID：10926839
> 
> 赞同：3
> 
> 时间：2012-06-07T06:40:12.987
> 
> 标签：jquery, jquery-events, event-capturing

Why doesn't this work? The label is inside the `.item` parent. I don't want to put it outside of block elements as it wouldn't be valid.

So I'm trying to simulate a label click:

```
$(".item").click(function(){
    $(this).find("label").click();
}); 
```

Edit: It's supposed to trigger the label and check a radio.

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".item").click(function() {
            $(this).find("label").click();
        });
    }); 
</script>

<div class="item">
    <h4>Item</h4>
    <ul>                
        <li>Description</li>
    </ul>
     <div class="radio-container">
        <div class="radio-stack">
            <input type="radio" class="styled" id="item1">
        </div>
        <label for="item1">$100</label>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T06:46:11.613

由于此标签附加到某些输入（使用`for`属性），您可以尝试以下操作：

```
var inputID = $(this).find("label").attr("for");
$('#' + inputID).click(); 
```

但是您应该小心：由于您的输入**在**类的 div内，因此`.item`在收音机中模拟单击将再次触发您的自定义处理程序，从而导致无限循环。如果可能，只需将 radio`checked`属性设置为`true`而不是模拟点击：

```
$('#' + inputID).attr("checked",true); 
```

[（在jsFiddle](http://jsfiddle.net/mgibsonbr/X7AR4/)的工作示例）

否则，您需要找到一种方法从`.item`选择器中排除该无线电以避免无限循环。

**更新：**在与选择器有点挣扎之后`not`，我想出了一个快速而肮脏的技巧：使用全局（到`ready`闭包）变量来控制是否发生模拟点击：

```
var updating = false;
$(".item").click(function() {
    if ( !updating ) {
        var inputID = $(this).find("label").attr("for");
        updating = true;
        $('#' + inputID).click();
        updating = false;
    }
}); 
```

[这里](http://jsfiddle.net/mgibsonbr/X7AR4/2/)的工作示例。IMO Ayman Safadi 的答案更好，但如果您无法使其跨浏览器工作，则可以使用此替代方法作为起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:08:29.487

要严格回答您的问题，它不起作用，因为它会导致“点击”的无限循环，并且您的浏览器只是默默地杀死了该事件。

运行这个演示，看看你的 JS 控制台：http: [//jsfiddle.net/bRyR3/](http://jsfiddle.net/bRyR3/)

`div`正在[捕获](http://www.quirksmode.org/js/events_order.html#link2)`label`点击事件。换句话说，JavaScript 会这样解释你的逻辑：

> 当你点击时`.item`，触发`label`“ `click`”事件。
> 
> `label`是在里面`.item`，所以如果`label`被点击，也是`.item`。
> 
> 当你点击时`.item`，触发`label`“ `click`”事件。
> 
> `label`是在里面`.item`，所以如果`label`被点击，也是`.item`。
> 
> 当你点击时`.item`，触发`label`“ `click`”事件。
> 
> `label`是在里面`.item`，所以如果`label`被点击，也是`.item`。
> 
> ETC...

致力于实际解决方案。

* * *

## 解决方案

```
$('.item').on('click', function(e) {
    console.log('click');
    $('label', $(this)).trigger('click');
});

$('.item label').on('click', function(e) {
    e.stopPropagation();
}); 
```

​这将停止`.item`捕获`label`的`click`事件。

工作演示：http: [//jsfiddle.net/bRyR3/1/](http://jsfiddle.net/bRyR3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-17T09:50:39.467

由于在寻找解决方案时会弹出此问题和答案，因此有第三种方法可以解决此问题：

JQuery 允许通过使用 trigger() 将自定义参数发送到 on() 事件处理程序

见[https://api.jquery.com/trigger/](https://api.jquery.com/trigger/)

这意味着，可以通过简单地告诉事件处理程序当前事件是“人为的”来避免无限循环：

```
$( document ).on( 'click touch', '.item', function( event, artificial ) {
     if( artificial ) return;

     $(this).find("label").trigger( 'click', [ true ] );
} ); 
```

这具有不停止传播（或依赖传播）的优点，同时也不会摸索不同的输入类型（复选框、收音机、文本等）。它只是模拟对标签的点击，无需我们进行任何额外的工作或任何无休止的循环。

# sql - Sql Server 2012 比 2005 慢？

> ID：10926841
> 
> 赞同：0
> 
> 时间：2012-06-07T06:40:25.847
> 
> 标签：sql, performance, sql-server-2005, sql-server-2012

我们已部署 SQL Server 2012 Enterprise，但存在性能问题：

*   相同的数据（从我们的 SQL Server 2005 Enterprise 备份并在 2012 年恢复）
*   3200条sql SELECT语句的测试脚本

我们使用 Management Studio 进行测试：

1.  结果为纯文本
2.  结果是一个文件

在同一台计算机上：

1.  2005 年：15 秒，2012 年：2 分钟
2.  2005 年：14 秒，2012 年：30 秒

即使使用更强大的计算机，2012 年仍然比 2005 年慢。

有什么问题？我们安装 SQL Server 2012 的方式和默认参数？我们恢复备份的方式？我们能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:37:50.563

当我看到这样的变化时，我的第一个想法是确保您已为所有表重新生成统计信息。网上有很多脚本可以做到这一点，并且有很多关于是否使用内置存储过程、是否进行全扫描等的讨论。这是一个快速而肮脏的脚本，我会在进行比较之前运行它。

```
CREATE  PROCEDURE sp_UtilityUpdateStats AS
SET NOCOUNT ON

DECLARE @iCounter       INT
DECLARE @iCounterMax    INT

DECLARE @TableList TABLE
(
    iTable INT IDENTITY(1,1) PRIMARY KEY,
    szTableName VARCHAR(128)
)

INSERT @TableList (szTableName)
SELECT [name] FROM sysobjects
WHERE [type] = 'u'
ORDER BY [name] DESC

SET @iCounterMax = (SELECT MAX(iTable) FROM @TableList)
SET @iCounter = 0
DECLARE @szTableName VARCHAR(128)

RAISERROR(N'------STARTING sp_UtilityUpdateStats------', 10, 1) WITH LOG
WHILE @iCounter < @iCounterMax
BEGIN
    SET @iCounter = @iCounter + 1

    SELECT  @szTableName = szTableName
    FROM @TableList
    WHERE iTable = @iCounter

    RAISERROR(N'UPDATE STATISTICS YourDB.dbo.%s', 10, 1, @szTableName) WITH LOG
    EXEC ('UPDATE STATISTICS YourDB.dbo.' + @szTableName)

END
RAISERROR(N'------FINISHING sp_UtilityUpdateStats------', 10, 1) WITH LOG

SET NOCOUNT OFF
GO 
```

# php - Adding reccuring events in google calendar with time

> ID：10926842
> 
> 赞同：0
> 
> 时间：2012-06-07T06:40:31.100
> 
> 标签：php, google-api, google-calendar-api, google-apps

I need to add recurring events with start time and end time. I used the code like

```
$recurrence = "DTSTART;VALUE=DATE:{$start}\r\n" .
            "DTEND;VALUE=DATE:{$start2}\r\n" .
            "RRULE:FREQ=WEEKLY;BYDAY={$dtString};UNTIL={$end}\r\n"; 
```

Where `$start = '20120601', $end = '20120630', $dtString = 'Fr'`

i need to add events which start from 08:00 to 09:00 which repeat every Friday. Please help me to find-out a solution

Regards, NisanthKumar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:30:36.130

向您发送页面以帮助您。

[https://developers.google.com/google-apps/calendar/recurringevents](https://developers.google.com/google-apps/calendar/recurringevents)

毛里西奥。

# android - 登录失败：invalid_key：Android 密钥不匹配

> ID：10926847
> 
> 赞同：2
> 
> 时间：2012-06-07T06:40:54.207
> 
> 标签：android, facebook

当我在我的 android 应用程序中单击 facebook 的登录按钮时出现此错误

“登录失败：invalid_key：Android 密钥不匹配。您的密钥“YLYMBqpjl/OenePeQNf4DORUfR8”与您的应用程序设置中指定的允许密钥不匹配，请在 www.facebook.com/developers 检查您的应用程序设置”

我浏览了链接：[http](http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/) ://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/ 等等，发现在使用 android-facebook sdk 时设备（在模拟器上运行良好）如果该设备上已经安装了 facebook 应用程序，则会出现此错误。为了解决这个问题，生成一个哈希键并将其添加到我正确执行的 facebook 应用程序设置中，但我仍然得到相同的错误。

这个键 - “YLYMBqpjl/OenePeQNf4DORUfR8”在我的错误消息中来自哪里？

它在模拟器上运行良好，我可以登录并在墙上发帖并获取用户 ID、电子邮件等...但在设备上我收到此错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:04:32.763

您的密钥是：“ **YLYMBqpjl/OenePeQNf4DORUfR8** ”

将此密钥粘贴到标记为绿色边框的本机 Android 应用程序中。

![在此处输入图像描述](../Images/131184a6654396d9602e715bb04a7e6e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:09:13.233

@archie.bpgc 这是因为您使用的密钥与 tute 用于通过 facebook 验证您的应用程序的密钥相同。如果您在 facebook 上注册了您的应用程序，那么您将在注册应用程序的主页上找到您的应用程序的密钥。检查它显示在顶部应用程序 ID 上的这张图片

[http://i48.tinypic.com/2nas9i0.png](http://i48.tinypic.com/2nas9i0.png)

# algorithm - Run length encoding using O(1) space

> ID：10926851
> 
> 赞同：3
> 
> 时间：2012-06-07T06:41:11.257
> 
> 标签：algorithm, run-length-encoding

Can we do the run-length encoding in place(assuming the input array is very large) We can do for the cases such as AAAABBBBCCCCDDDD A4B4C4D4

But how to do it for the case such as ABCDEFG? where the output would be A1B1C1D1E1F1G1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-14T19:58:10.710

我的第一个想法是从末尾开始编码，所以我们将使用空闲空间（如果有的话），然后我们可以将编码后的数组移到开头。这种方法的一个问题是它不适用于`AAAAB`，因为没有可用空间（A4B1 不需要它），我们将尝试在第一次迭代时编写 AAAAB1。

下面是更正的解决方案：（假设序列是 AAABBC）

1.  用两个或更多元素对所有组进行编码，其余的保持不变（这不会增加数组的长度）-> A3_B2C
2.  第一步后将所有内容向右移动以消除空格-> _A3B2C
3.  从头开始编码数组（当然重用已经编码的组）-> A3B2C1

每一步都是 O(n)，据我所知，只需要恒定的额外内存。

限制：

1.  不支持数字，但是正如 Petar Petrov 提到的那样，无论如何都会产生解码问题。
2.  我们需要某种“空”字符，但这可以通过添加零来解决：A03 而不是 A3_

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-29T18:51:06.633

C++ 解 O(n) 时间 O(1) 空间

```
string runLengthEncode(string str)
{
    int len = str.length();
    int j=0,k=0,cnt=0;
    for(int i=0;i<len;i++)
    {
        j=i;
        cnt=1;
        while(i<len-1 && str[i]==str[i+1])
        {
            i++;
            cnt++;
        }
        str[k++]=str[j];
        string temp =to_string(cnt);
        for(auto m:temp)
            str[k++] = m;
    }
    str.resize(k);
    return str;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:45:01.080

null 用于指示哪些项目是空的，将被忽略进行编码。您也不能对数字进行编码（AAA2222 => A324 => 324 乘以 'A'，但它是 A3;24）。您的问题会引发更多问题。

这是 C# 中的“解决方案”

```
public static void Encode(string[] input)
{
    var writeIndex = 0;

    var i = 0;
    while (i < input.Length)
    {
        var symbol = input[i];
        if (symbol == null)
        {
            break;
        }

        var nextIndex = i + 1;

        var offset = 0;
        var count = CountSymbol(input, symbol, nextIndex) + 1;
        if (count == 1)
        {
            ShiftRight(input, nextIndex);
            offset++;
        }

        input[writeIndex++] = symbol;
        input[writeIndex++] = count.ToString();

        i += count + offset;
    }

    Array.Clear(input, writeIndex, input.Length - writeIndex);
}

private static void ShiftRight(string[] input, int nextIndex)
{
    var count = CountSymbol(input, null, nextIndex, (a, b) => a != b);
    Array.Copy(input, nextIndex, input, nextIndex + 1, count);
}

private static int CountSymbol(string[] input, string symbol, int nextIndex)
{
    return CountSymbol(input, symbol, nextIndex, (a, b) => a == b);
}

private static int CountSymbol(string[] input, string symbol, int nextIndex, Func<string, string, bool> cmp)
{
    var count = 0;

    var i = nextIndex;
    while (i < input.Length && cmp(input[i], symbol))
    {
        count++;
        i++;
    }

    return count;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-14T14:45:13.257

第一种解决方案不处理单个字符。例如 - “嗨！” 不管用。我使用了完全不同的方法，使用 'insert()' 函数就地添加。这会处理所有事情，无论总“相同”字符是 > 10 还是 > 100 还是 = 1。

```
#include<iostream>
#include<algorithm>
using namespace std;

int main(){
    string name = "Hello Buddy!!";
    int start = 0;
    char distinct = name[0];
    for(int i=1;i<name.length()+1;){
        if(distinct!=name[i]){
            string s = to_string(i-start);
            name.insert(start+1,s);
            name.erase(name.begin() + start + 1 + s.length(),name.begin() + s.length() + i);
            i=start+s.length()+1;
            start=i;
            distinct=name[start];
            continue;
        }
        i++;
    }
    cout<<name;
} 
```

如果您发现任何不正确的地方，请建议我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-03T11:44:53.097

O(n)，就地 RLE，我想不出比这更好的了。如果字符出现仅 1，则不会放置数字。如果字符出现 11 次，也会放置 a9a2。

```
void RLE(char *str) {
int len = strlen(str);
int count = 1, j = 0;
for (int i = 0; i < len; i++){
    if (str[i] == str[i + 1])
        count++;
    else {
        int times = count / 9;
        int rem = count % 9;
        for (int k = 0; k < times; k++) {
            str[j++] = str[i];
            _itoa(9, &str[j++], 10);
            count = count - 9;
        }
        if (count > 1) {
            str[j++] = str[i];
            _itoa(rem, &str[j++], 10);
            count = 1;
        }
        else 
            str[j++] = str[i];
    }
}
cout << str; 
```

}

I/P => aaabcdeeeefghijklaaaaa

O/P => a3bcde4fghijkla5

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-10T01:54:43.033

```
 Inplace solution using c++ ( assumes length of encoding string is not more than actual string length):

    #include <bits/stdc++.h>
    #include<stdlib.h>
    using namespace std;

    void replacePattern(char *str)
    {
        int len = strlen(str);
        if (len == 0)
        return;

        int i = 1, j = 1;
        int count;

        // for each character
        while (str[j])
        {
            count = 1;
            while (str[j] == str[j-1])
            {
                j = j + 1;
                count++;
            }

            while(count > 0) {
                int rem = count%10;
                str[i++] = to_string(rem)[0];
                count = count/10;
            }
            // copy character at current position j
            // to position i and increment i and j
            if (str[j])
                str[i++] = str[j++];
        }

        // add a null character to terminate string
        if(str[len-1] != str[len-2]) {
            str[i] = '1';
            i++;
        }
        str[i] = '\0';
    }

    // Driver code
    int main()
    {
        char str[] = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabccccc";
        replacePattern(str);
        cout << str;
        return 0;
    } 
```

# javascript - Best Way for Conditional Variable Assignment

> ID：10926853
> 
> 赞同：54
> 
> 时间：2012-06-07T06:41:16.750
> 
> 标签：javascript

Which is the better way for conditional variable assignment?

1st method

```
 if (true) {
   var myVariable = 'True';
 } else {
   var myVariable = 'False';
 } 
```

2nd Method

```
 var myVariable = 'False';
 if (true) {
   myVariable = 'True';
 } 
```

I actually prefer 2nd one without any specific technical reason. What do you guys think?

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-07T06:45:28.730

try this

```
var myVariable = (true condition) ? "true" : "false" 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-03-19T11:03:48.160

我知道有两种方法可以通过条件声明变量的值。

方法 1：如果条件评估为真，则将列左侧的值分配给变量。如果条件评估为假，则右侧的条件将分配给变量。您还可以将许多条件嵌套到一个语句中。

```
var a = (true)? "true" : "false"; 
```

方法 1 的嵌套示例：将变量 A 的值更改为 0、1、2 和负值，以查看语句将如何产生结果。

```
var a = 1;
var b = a > 0? (a === 1? "A is 1" : "A is not 1") : (a === 0? "A is zero" : "A is negative"); 
```

方法二：在这个方法中，如果||的左边的值 等于零、假、空、未定义或空字符串，则右侧的值将分配给变量。如果 || 左边的值 不等于 0、false、null undefined 或空字符串，则左侧的值将赋给变量。

虽然左边的值可以是一个未定义的值，供 JS 评估条件，但必须声明变量，否则会产生异常。

```
var a = 0;
var b = a || "Another value"; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-02-27T15:58:08.020

另一种方法是利用逻辑运算符返回值的能力。

```
let isAnimal = false;
let isPlant = true;

let thing = isAnimal && 'animal' || isPlant && 'plant' || 'something else';

console.log(thing);
```

在上面的代码中，当其中一个标志为 true`isAnimal`或`isPlant`时，将返回它旁边的字符串。这是因为两者`&&`和`||`导致它们的操作数之一的值：

*   如果 A 可以强制为 false，则 A && B 返回值 A；否则，它返回 B。
*   一个 || 如果 A 可以强制为真，则 B 返回值 A；否则，它返回 B。

受本文启发的答案：[https ://mariusschulz.com/blog/the-and-and-or-operators-in-javascript](https://mariusschulz.com/blog/the-and-and-or-operators-in-javascript)

PS：仅供学习之用。在您的生产代码中使用此方法不会使您和您的同事的生活更加艰难。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-07T06:44:54.750

You could do a ternary, which is a lot shorter (and no darn curly braces):

```
var myVariable = (true) ? 'True' : 'False'; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-06T17:31:21.383

另一个很酷的事情是，您可以根据条件进行多项分配：

```
let [long_str, short_str] = a.length > b.length ? [a, b] : [b, a] 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-06-07T06:46:15.900

当您在变量中仅存储真假时的第三种方式，然后使用

```
 var myVariable =(condition_written_in_if); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-10-19T11:24:40.337

为了完成，除了这里提到的所有其他方法之外，还有另一种方法，即使用查找表。

假设您有许多可能的值，您可以以声明方式配置 Map 而不是使用`if`, `switch`or`ternary`语句。

```
Object map = {
   key1: 'value1',
   key2: 'value2,
   keyX: 'valueX'
};

var myVariable = map[myInput]; 
```

这甚至适用于布尔值：

```
Object map = { true: 'value1', false: 'value2 };

var myVariable = map[myBoolean]; 
```

对于布尔值，尽管使用专门为此设计的逻辑运算符，但您可能会以“正常”方式进行操作。虽然有时它可能很有用，例如：

*   **便携性**：您可以传递地图
*   **可配置**性：可能值来自属性文件
*   **可读性**：如果您不在乎它是否为布尔值，您只想避免条件逻辑并以这种方式减少认知负担

请注意，使用查找映射的优势与使用函数变量（闭包）的优势之间存在一些重叠。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-06-07T06:44:46.870

The first solution uses only one assignment instead of 1,5 by average in the second code snippet. On the other hand the first code snippet is less readable as people not familiar with JavaScript might not realize that the scope of a variable is not block oriented by function oriented - on other languages with C-like syntax `myVariable` would not be accessible outside `if` and `else` blocks.

In other words both solutions have disadvantages. What about ternary operator:

```
var myVariable = condition? 'True' : 'False'; 
```

or if you don't care about the camel-case (although I understand this is just an example, not a real code);

```
var myVariable = (!!condition).toString(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-12T01:06:16.287

### 如果您厌倦了三元运算符，请使用 IIFE

另一种方法是使用[Immediately Invoked Function Expression](https://developer.mozilla.org/en-US/docs/Glossary/IIFE)。它的好处是它可以容纳一些逻辑，并且可以从外界封装。

```
const direction = "n";

const directionFull= (() => {
    switch(direction ){
        case "n": return "north";
        case "s": return "south";
        case "w": return "west";
        case "e": return "east"; 
    }
})()

console.log(directionFull);
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-07T06:44:03.687

I would prefer 2nd option too, no technical reason but for the sake of easy to read code, readability is very important in code.

If you see the second option, from processing point of view only one check will ever be executed, saved some very minute processing time, so there is only one check in second case.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-07T06:45:07.250

It depends on the use for me. If I have code that I only want to run if true, but with no extra code for false, I'll use the second. If I want to execute some code on true, and different on false, I use the first. It all depends on use, but the general rule for me is to write once. Keep it clean, keep it simple, and keep it short

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-25T11:57:06.703

也许您只需要`&&`运算符来检查布尔值是否为真，如果是，则将“myVariable”设置为真。

```
var myVariable = 'False';
true && myVariable = 'True'; 
```

# haskell - 捕获错误引发的错误？

> ID：10926855
> 
> 赞同：9
> 
> 时间：2012-06-07T06:41:30.143
> 
> 标签：haskell, exception-handling, either

有一些 stdlib 函数会在无效输入时引发错误。例如：

```
Prelude> read "1o2" :: Int
*** Exception: Prelude.read: no parse 
```

我想把它换成返回 a `Either e a`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T07:01:51.043

[没有勺子。](http://hackage.haskell.org/package/spoon)你没有从我这里听到。

但是，对于这个特定示例，您应该[`reads`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:reads)改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T12:12:01.913

我更喜欢将错误转化为值：

```
 maybeRead :: Read a => String -> Maybe a
 maybeRead s = case reads s of
      [(x, "")] -> Just x
      _         -> Nothing 
```

# c++ - 我可以将指针调试为数组吗？

> ID：10926858
> 
> 赞同：2
> 
> 时间：2012-06-07T06:41:34.240
> 
> 标签：c++, visual-studio-2010, debugging

例如，我想看 pA

```
int *pA = new int[LEN]; 
```

然后在视觉工作室中，我只能在观察窗口中看到 pA[0]

我尝试查看'(int (*)[LEN])pA'，但它不起作用

我不想做

```
int (*test)[LEN] = (int (*)[LEN])pA 
```

调试

如何在 VS2010 的调试器中将动态分配的指针视为静态数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T06:46:22.867

您可以在监视窗口中写入`pA,10`（或要查看多少元素）。

![在此处输入图像描述](../Images/cc2db6e3f5426fe3f023fa035fd35444.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:47:10.723

在快速观看中：

*   首先知道 的价值`LEN`。说，是100。
*   然后，键入`pA,100`以查看所有 100 个元素。

# html - 如何在 .gsp 文件中使必需的属性可配置

> ID：10926860
> 
> 赞同：1
> 
> 时间：2012-06-07T06:41:36.700
> 
> 标签：html, grails

在 Grails 应用程序中，我有域，它已经提交了“typeOfForm”。取决于 'typeOfForm' 的值，某些字段变为强制和禁止（typeOfForm 在创建期间设置且无法更改）。

现在在 gsp 文件中（例如在 g:textField 中）我需要设置属性 disabled 和 required

我已经实施

```
 <%
 def fieldRequired = ...
 def fieldProhibeted = ...
 %> 
```

和

```
<g:textField ...  disabled="${fieldProhibeted}" required="${fieldRequired}"/> 
```

我的问题是必需的属性。如果需要属性，则无论值如何，该字段都成为必需的。

我当前的解决方法/解决方案是“覆盖” g:textField 并创建 myTaglib 并在值为 false 时删除所需的属性。

你能建议任何好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:18:00.533

我相信一个简单的 if/elseif 会解决你的问题。

```
<g:if test="${fieldRequired}">
  <g:textField required="required" .... />
</g:if>
</g:elseif test="${fieldProhibeted}">
  <g:textField disabled="disabled" ... />
</g:elseif> 
```

# perl - 如何在 Windows 7 系统上运行我的第一个 Perl 代码？

> ID：10926864
> 
> 赞同：1
> 
> 时间：2012-06-07T06:42:00.503
> 
> 标签：perl

我已经运行了这个 Perl 代码：

```
#!/usr/bin/perl
print "content-type: text/html \n\n";
print "Hello World.\n"; 
```

我尝试了两种方式，第一种是[Testing your Perl installation](http://perl.about.com/od/gettingstartedwithperl/a/testperl_2.htm)，但是当我用这种方式运行时，它有一些麻烦，它要求我选择一个可以运行它的程序，但还没有运行。

第二种方法是使用 Perl IDE Padre 的[第一个脚本](http://www.tizag.com/perlT/perlfirstscript.php)，但是当我编写 Perl 代码并尝试保存它时，它没有显示 Perl 文件的扩展名，所以我无法将它保存为 Perl 文件，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:38:21.340

您的代码看起来像您想要一个[CGI](http://en.wikipedia.org/wiki/Common_Gateway_Interface)程序。CGI 意味着您通过网络浏览器调用您的程序并返回一个网站。虽然 vstm 的评论当然适用于非 cgi 程序，但您的示例需要更多的东西才能像那样工作。

您将需要安装一个 Web 服务器。看看[xampp](http://www.apachefriends.org/en/xampp-windows.html)。它易于安装和维护，并带有 mysql 和 apache 安装。我推荐精简版，因为它没有所有开销。

安装后，您需要进行一些配置，以便它可以运行您的 perl 脚本。我认为你已经安装了 Active Perl。然后，您需要调整 apache 配置。

在`c:\xampp\apache\conf\httpd.conf`你需要找到说

```
<Directory "C:/xampp/htdocs"> 
```

并阅读评论（标有`#`）。您必须`ExecCGI`在该`<Directory>`部分内添加。对您希望运行 perl 脚本的每个目录执行此操作。然后找一行写着

```
AddHandler cgi-script .cgi .pl .asp 
```

并确保它没有被注释掉。

完成后，将程序放在`c:\xampp\htdocs`文件夹中（`cgi-bin`应该也可以），并将[shebang-line](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)（第一行`#!`）更改为安装 Active Perl 的位置，例如`C:\perl\bin\perl.exe`. 它告诉 apache 它应该使用什么程序来执行 perl 脚本。

此外，在您的代码中添加更多行：

```
#!C:\perl\bin\perl.exe
use strict;
use warnings;
use CGI;
use CGI::Carp('fatalsToBrowser');
print "Content-type: text/html \n\n";
print "Hello World.\n"; 
```

现在您需要运行 apache Web 服务器。在 xampp 安装目录中有几个控制 apache 和 mysql 的批处理文件。还有一个`xampp-control.exe`。运行。在新窗口中，单击Apache 旁边的*开始按钮。*

在您的浏览器中，转到`http://localhost/<yourscript.pl>`。它现在应该说“Hello World！”。

如果没有，请确保您没有运行 Skype。它会阻止 apache 尝试在其上运行的端口 80。您需要将 apache 的端口更改为其他内容。请参阅[此视频](http://www.youtube.com/watch?v=f1qS5oiK-i0)。

* * *

关于我所做的代码更改及其作用的几句话：

*   `use strict;`应该始终在您的代码中。它迫使您遵守某些准则并编写更好的代码。*这在Hello World*程序中可能看起来很奇怪，但无论如何请这样做。
*   `use warnings;`告诉你可能出错的事情。警告不是错误，而是 perl 对您可能不了解的内容有所帮助。用它。
*   `use CGI`使程序的输出转到 Web 服务器。当您使用 CGI 程序时，您需要它。
*   `print "Content-type: text/html \n\n";`是必需的，因此浏览器知道会发生什么。在这种情况下，一个 HTML 网站。它被称为[HTTP](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol) -Header 并包含一个 mime 类型。
*   `use CGI::Carp('fatalsToBrowser');`使错误转到浏览器。没有它，除非你查看 apache 的错误日志，否则你永远不会知道它们。

# camera - 拍照后如何在 Sencha Touch 的布局中设置该图片？

> ID：10926865
> 
> 赞同：0
> 
> 时间：2012-06-07T06:42:01.693
> 
> 标签：camera, sencha-touch-2

我正在尝试使用相机 API 拍照并将其显示在屏幕上。我可以拍照。但不知道如何在我的屏幕上显示它。为此，我编写了以下代码：

```
Ext.define('MyApp.view.CameraPanel', {    extend: 'Ext.Panel',

config: {
    ui: 'light',
    layout: {
        type: 'card'
    },
    items: [
        {
            xtype: 'button',
            handler: function(button, event) {
                Ext.device.Camera.capture({
                    source: 'camera',
                    destination: 'data',

                    success: function(image) {

                        takenimage.setSrc(image);
                    },

                    failure: function() {
                        Ext.Msg.alert('Error', 'There was an error when acquiring the picture.');
                    },
                    scope: this
                });
            },
            height: 33,
            left: 60,
            top: 400,
            ui: 'decline-round',
            width: 200,
            text: 'Take a Photo'
        },
        {
            xtype: 'image',
            itemId: 'takenimage',
            src: 'image'
        }
    ]
} 
```

});

我是这个煎茶平台的新手。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:40:16.110

使用html标签，我能够解决这个问题..

# c# - UnitOfWork 与 Unity 和实体框架

> ID：10926873
> 
> 赞同：1
> 
> 时间：2012-06-07T06:42:31.223
> 
> 标签：c#, .net, entity-framework, dependency-injection, unity-container

嗨，我正在使用 Unity 来管理我的服务层，而后者又与管理所有存储库的 UnitOfWork 对话。

我的一些服务调用其他服务，我的问题是如何在服务层之间传递相同的 UnitOfWork？

在我的情况下，所有控制器操作都是从 GUI 对每个按钮操作或计时器上的事件启动的，这就是为什么我有一个工厂来按需创建 UnitOfWork，但这会导致问题，因为我不知道如何在服务之间传递这个 UnitOfWork .

尤其困难的是知道如何将这个特定的 UnitOfWork 实例注入到服务构造函数中。请注意，某些服务可能运行时间很长（后台线程上运行 10 分钟左右），我不知道这是否对设计有任何影响。

目前，从其他服务调用的服务正在创建自己的 UnitOfWork，这会导致事务设计和实体框架实体跟踪出现问题。

非常欢迎提出建议！

```
class OtherService : IOtherService
{
    public OtherService(IUnitOfWorkFactory unitOfworkFactory, 
        ISettingsService settingsService)
    {
        UnitOfWorkFactory = unitOfworkFactory;
        SettingsService = settingsService;
    }
    IUnitOfWorkFactory UnitOfWorkFactory;
    ISettingsService SettingsService;

    function SomeSeviceCall()
    {
        // Perhaps one way is to use a factory to instantiate a 
        // SettingService, and pass in the UnitOfWork here?
        // Ideally it would be nice for Unity to handle all of 
        // the details regardless of a service being called from
        // another service or called directly from a controller
        // ISettingsService settingsService = 
        //     UnityContainer.Resolve<ISettingService>();

        using (var uow = UnitOfWorkFactory.CreateUnitOfWork())
        {
            var companies = uow.CompaniesRepository.GetAll();
            foreach(Company company in companies)
            {
                settingsService.SaveSettings(company, "value");
                company.Processed = DateTime.UtcNow();
            }
            uow.Save();
        }
    }
}

class SettingsService : ISettingsService
{
    public SettingsService(IUnitOfWorkFactory unitOfworkFactory)
    {
        UnitOfWorkFactory = unitOfworkFactory;
    }
    IUnitOfWorkFactory UnitOfWorkFactory;

    // ISettingsService.SaveSettings code in another module...
    function void ISettingsService.SaveSettings(Company company, 
        string value)
    {
        // this is causing an issue as it essentially creates a 
        // sub-transaction with the new UnitOfWork creating a new 
        // Entiy Framework context
        using (var uow = UnitOfWorkFactory.CreateUnitOfWork())
        {
            Setting setting = new Setting();
            setting.CompanyID = company.CompanyID;
            setting.SettingValue = value;
            uow.Insert(setting);
            uow.Save();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:15:53.770

嗨，我一直在与这个问题作斗争，这就是我想出的......

```
public class UnitOfWorkFactory
{
    private static readonly Hashtable _threads = new Hashtable();
    private const string HTTPCONTEXTKEY = 
        "AboutDbContext.UnitOfWorkFactory";

    public static IUnitOfWork Create()
    {
        IUnitOfWork unitOfWork = GetUnitOfWork();

        if (unitOfWork == null || unitOfWork.IsDisposed)
        {
            unitOfWork = new UnitOfWork();
            SaveUnitOfWork(unitOfWork);
        }
        return unitOfWork;
    }

    public static IUnitOfWork GetUnitOfWork()
    {
        if (HttpContext.Current != null)
        {
            if (HttpContext.Current.Items.Contains(HTTPCONTEXTKEY))
            {
                return (IUnitOfWork)HttpContext
                    .Current.Items[HTTPCONTEXTKEY];
            }
            return null;
        }

        var thread = Thread.CurrentThread;

        if (string.IsNullOrEmpty(thread.Name))
        {
            thread.Name = Guid.NewGuid().ToString();
            return null;
        }

        lock (_threads.SyncRoot)
        {
            return (IUnitOfWork)_threads[Thread.CurrentThread.Name];
        }
    }

    private static void SaveUnitOfWork(IUnitOfWork unitOfWork)
    {
        if (HttpContext.Current != null)
        {
            HttpContext.Current.Items[HTTPCONTEXTKEY] = unitOfWork;
        }
        else
        {
            lock (_threads.SyncRoot)
            {
                _threads[Thread.CurrentThread.Name] = unitOfWork;
            }
        }
    }

    public static void DisposeUnitOfWork(IUnitOfWork unitOfWork)
    {
        if (HttpContext.Current != null)
        {
            HttpContext.Current.Items.Remove(HTTPCONTEXTKEY);
        }
        else
        {
            lock (_threads.SyncRoot)
            {
                _threads.Remove(Thread.CurrentThread.Name);
            }
        }
    }
}

public interface IUnitOfWork : IDisposable
{
    void Commit();
    bool IsDisposed { get; }
}

public class UnitOfWork : MyContext
{

}

public abstract class Repository<T>
    : IRepository<T>, IDisposable where T : class
{
    private UnitOfWork _context;

    private UnitOfWork Context
    {
        get
        {
            if (_context == null || _context.IsDisposed)
                return _context = GetCurrentUnitOfWork<UnitOfWork>();

            return _context;
        }
    }

    public TUnitOfWork GetCurrentUnitOfWork<TUnitOfWork>() 
        where TUnitOfWork : IUnitOfWork
    {
        return (TUnitOfWork)UnitOfWorkFactory.GetUnitOfWork();
    }

    public IEnumerable<T> Get(Expression<Func<T, bool>> predicate)
    {
        return Context.Set<T>().Where(predicate).ToList();
    }

    public bool Exists(Expression<Func<T, bool>> predicate)
    {
        return Context.Set<T>().Any(predicate);
    }

    public T First(Expression<Func<T, bool>> predicate)
    {
        return Context.Set<T>().Where(predicate).FirstOrDefault();
    }

    public IEnumerable<T> GetAll()
    {
        return Context.Set<T>().ToList();
    }

    public IEnumerable<T> GetAllOrderBy(Func<T, object> keySelector)
    {
        return Context.Set<T>().OrderBy(keySelector).ToList();
    }

    public IEnumerable<T> GetAllOrderByDescending(Func<T, object> keySelector)
    {
        return Context.Set<T>().OrderByDescending(keySelector).ToList();
    }

    public void Commit()
    {
        Context.SaveChanges();
    }

    public void Add(T entity)
    {
        Context.Set<T>().Add(entity);
    }

    public void Update(T entity)
    {
        Context.Entry(entity).State = EntityState.Modified;
    }

    public void Delete(T entity)
    {
        Context.Set<T>().Remove(entity);
    }

    public void Dispose()
    {
        if (Context != null)
        {
            Context.Dispose();
        }
        GC.SuppressFinalize(this);
    }
}

public class MyContext : DbContext, IUnitOfWork
{
    public DbSet<Car> Cars { get; set; }

    public void Commit()
    {
        SaveChanges();
    }

    protected override void Dispose(bool disposing)
    {
        IsDisposed = true;
        UnitOfWorkFactory.DisposeUnitOfWork(this);
        base.Dispose(disposing);
    }

    public bool IsDisposed { get; private set; }
} 
```

然后我可以这样做：

```
using (var unitOfWork = UnitOfWorkFactory.Create())
{
    _carRepository.Add(new Car
    {
        Make = "Porshe", Name = "Boxter"
    });

    _carRepository.Commit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:28:07.473

您可以使用某种与当前线程相关联并在服务代码中明确解析的“当前”工作单元。您需要类来保存 UoW 的线程静态实例来实现这一点。但是，这不是很好的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-28T20:25:48.373

你是法官......我认为你是双重的。

第 1 点： [http ://www.britannica.com/topic/Occams-razor](http://www.britannica.com/topic/Occams-razor)

第2点：从EF主对象的F2对象浏览器描述中，DBContext...

* * *

System.Data.Entity 的公共类 DbContext 成员

摘要：DbContext 实例代表了**工作单元** *和* **存储库**模式的组合，因此它可以用于从数据库中查询并将更改组合在一起，然后将这些更改作为一个单元写回存储。

# javascript - using javascript to detect whether the url exists before display in iframe

> ID：10926880
> 
> 赞同：47
> 
> 时间：2012-06-07T06:43:29.340
> 
> 标签：javascript, iframe, http-status-code-404

I'm using javascript to pass a dynamic url to iframe src. but sometimes the url does not exist, how could i detect the non-exist url beforehand, so that i can hide the iframe that with 404 error.

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2014-02-28T14:33:26.667

由于我的声誉很低，我无法评论Derek 朕会功夫的回答。我已经按原样尝试了该代码，但效果不佳。朕会功夫的密码一共有三个问题。

1.  首先是异步发送请求并更改其属性“状态”的时间比执行下一个表达式 - if(request.status === "404") 慢。所以 request.status 最终将由于互联网带宽，保持在状态 0（零），并且它不会实现下面的代码。要解决这个问题很容易：在 ajax 请求的方法打开时将“true”更改为“false”。这将导致您的代码出现短暂（或不是）阻塞（由于同步调用），但会在到达 if 测试之前更改请求的状态。

2.  第二个是状态是整数。使用 '===' javascript 比较运算符，您尝试比较左侧对象是否与右侧对象相同。要完成这项工作，有两种方法：

    *   去掉 404 周围的引号，使其成为整数；
    *   使用 javascript 的运算符 '==' 这样您就可以测试这两个对象是否相似。
3.  第三是对象 XMLHttpRequest 仅适用于较新的浏览器（Firefox、Chrome 和 IE7+）。如果您希望该片段适用于所有浏览器，您必须按照 W3Schools 建议的方式进行操作：[w3schools ajax](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)

真正对我有用的代码是：

```
var request;
if(window.XMLHttpRequest)
    request = new XMLHttpRequest();
else
    request = new ActiveXObject("Microsoft.XMLHTTP");
request.open('GET', 'http://www.mozilla.org', false);
request.send(); // there will be a 'pause' here until the response to come.
// the object request will be actually modified
if (request.status === 404) {
    alert("The page you are trying to reach is not available.");
} 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-06-07T06:50:42.810

[使用 XHR 并查看它是否响应 404。](https://developer.mozilla.org/en/DOM/XMLHttpRequest/Using_XMLHttpRequest#Handling_responses)

```
var request = new XMLHttpRequest();  
request.open('GET', 'http://www.mozilla.org', true);
request.onreadystatechange = function(){
    if (request.readyState === 4){
        if (request.status === 404) {  
            alert("Oh no, it does not exist!");
        }  
    }
};
request.send(); 
```

但请注意，它仅适用于同一来源。对于另一台主机，您将不得不[使用服务器端语言](https://stackoverflow.com/questions/270918/how-do-you-get-the-http-status-code-for-a-remote-domain-in-php)来执行此操作，您必须自己弄清楚。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-12-03T09:37:53.727

我发现这在我的场景中有效。

jQuery 1.5 中引入的 jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调方法自 jQuery 1.8 起已弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

```
$.get("urlToCheck.com").done(function () {
  alert("success");
}).fail(function () {
   alert("failed.");
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-01-11T18:38:04.593

我创建了这个方法，它非常理想，因为它在不完整下载的情况下中止连接，非常适合检查视频或大图像是否存在，减少响应时间和下载整个文件的需要

```
// if-url-exist.js v1
function ifUrlExist(url, callback) {
    let request = new XMLHttpRequest;
    request.open('GET', url, true);
    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
    request.setRequestHeader('Accept', '*/*');
    request.onprogress = function(event) {
        let status = event.target.status;
        let statusFirstNumber = (status).toString()[0];
        switch (statusFirstNumber) {
            case '2':
                request.abort();
                return callback(true);
            default:
                request.abort();
                return callback(false);
        };
    };
    request.send('');
}; 
```

使用示例：

```
ifUrlExist(url, function(exists) {
    console.log(exists);
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-07T06:50:56.587

您可以通过 AJAX 测试 url 并读取状态代码 - 也就是说，如果 URL 在同一个域中。

如果它是远程域，您可以在自己的域中[使用服务器脚本检查远程 URL。](https://stackoverflow.com/q/270918/575527)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-07T06:50:23.733

你可以尝试在页面上做一个简单的 GET，如果你得到 200 就意味着页面存在。试试这个（使用jQuery），该函数是页面加载成功时的成功回调函数。请注意，这仅适用于您域内的站点以防止 XSS。其他域必须在服务器端处理

```
$.get(
   yourURL,
   function(data, textStatus, jqXHR) {
      //load the iframe here...
   }
); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-26T10:19:58.333

无需单独发出 HTTP 请求进行*事先*检查。

您可以切换逻辑：仅在 iframe 已成功加载时才显示它。为此，您可以将`onload`事件侦听器附加到 iframe。

有关详细信息，请参阅此相关问题：[捕获 iframe 加载完成事件](https://stackoverflow.com/questions/3142837/capture-iframe-load-complete-event)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-23T15:03:02.757

使用`async/await`，这对我打开新标签很有用；出于与 OP 相同的原因，我需要检测 404：

```
openHelp : async function(iPossiblyBogusURL) {
    const defaultURL = `http://guaranteedToWork.xyz`;
    const response = await fetch(iPossiblyBogusURL);

    if (response.status == 200) {
        window.open(iPossiblyBogusURL, `_blank`);
    } else if (response.status === 404) {
        window.open(defaultURL, `_blank`);   
    }
}, 
```

# android - 在表中选择多行并插入到数组中

> ID：10926887
> 
> 赞同：0
> 
> 时间：2012-06-07T06:43:56.577
> 
> 标签：android, sqlite

我有一张桌子叫食物。我正在选择食物的“类别”，我想在列表视图中显示它。这是我尝试过的代码。

```
Cursor c = db.query(DATABASE_TABLE,
                new String[] { "category" }, null, null, null, null, null);
        ArrayList<ArrayList<String>> results = new ArrayList<ArrayList<String>>();           
        if(c.moveToFirst())
        {
            do
            {   ArrayList<String> recipe = new ArrayList<String>();
                recipe.add(c.getString(1));
                recipe.add(c.getString(2));
                recipe.add(c.getString(3));
                recipe.add(c.getString(4));
                results.add(recipe);
            }while(c.moveToNext());
            if(c != null && !c.isClosed())
               c.close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:50:13.207

现在试试，

```
Cursor c = db.query(DATABASE_TABLE,
                new String[] { "category" }, null, null, null, null, null);
        ArrayList<String> results = new ArrayList<String>();           
        if(c.moveToFirst())
        {
            do
            {   
             results.add(c.getString(0)); // instead of 0 Index of Category column in your case
            }while(c.moveToNext());
            if(c != null && !c.isClosed())
               c.close();
        } 
```

从您的数据库查询中您只选择**类别**列，因此光标中只有一列结果，并且它以 0 索引开始。所以`c.getString(1)`to`c.getString(4)`意义不大。如果您从表中选择所有数据，那么只有您获得所有列..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:54:05.227

我看到了您的问题，您只返回一列 ( `category`)，但您正在尝试访问几个不同的列。

您应该返回至少五个（因为您尝试访问最多 4 个并且游标列从 0 开始）。

如果您尝试提取具有特定类别的项目列表，则需要更改查询。像这样的东西：

```
String query = "SELECT * FROM " + DATABASE_TABLE + " WHERE category = " + category;
return mDb.rawQuery(query, null); 
```

这将选择具有与变量中包含的任何内容匹配的类别的所有项目`category`，并返回该行中的所有线圈。

# iphone - UIViewController 的两种方式关系

> ID：10926888
> 
> 赞同：0
> 
> 时间：2012-06-07T06:44:01.677
> 
> 标签：iphone, objective-c, ios, cocoa-touch, parent-child

我有一个容器视图控制器说 ContainerViewController 和另一个 UIViewController(PhotoViewcController)，我将其添加为 ContainerViewController 中的 childviewcontroller。因此该消息从 ContainerViewController 转发到 PhotoViewcController。但是如何在父子视图控制器中使用双向关系？这样消息就会从 PhotoViewcController 传递到 ContainerViewController。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:53:57.413

像这样在子类中创建一个属性

```
@property (assign) id pDelegate; 
```

并合成它，当您转到子视图控制器时，在推送/呈现为之前将委托设置为自我

```
childController.pDelegate = self; 
```

现在，当您要发送消息时，请执行此操作

```
if([self.pDelegate respndsToSelector:@selector(popedBackFromChild:)])
{
 [self.pDelegate popedBackFromChild:<some object>];
} 
```

告诉我你是否需要进一步解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:08:21.523

有两种方法可以做到这一点。在子类中为它定义一个协议并在父类中定义它，或者您可以发布和通知并将必要的信息作为字典传递。正如@The Saad 告诉您的，这是定义协议的最佳方式，但通知更易于管理。PS 父类是您将更新信息的类，而子类将提供它。

# android - How to define attributes in Activity -class itself without an XML file?

> ID：10926890
> 
> 赞同：1
> 
> 时间：2012-06-07T06:44:14.357
> 
> 标签：android, android-layout

I am creating my own UI component class by extending layout class. Now instead of adding my custom attributes like height , width etc in string xml resources as separate xml, I want to define in `Activity` class itself. I don't want to add in xml and then refer it from R class in my code. Is there any way to define and access attributes in code itself?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:13:11.453

这是来自 Pro Android 4 的代码示例：

```
import android.app.Activity; 
import android.os.Bundle; 
import android.view.ViewGroup.LayoutParams; 
import android.widget.LinearLayout; 
import android.widget.TextView; 
public class MainActivity extends Activity 
{ 
private LinearLayout nameContainer; 

private LinearLayout addressContainer; 

private LinearLayout parentContainer; 

/** Called when the activity is first created. */ 
@Override 
public void onCreate(Bundle savedInstanceState) 
{ 
    super.onCreate(savedInstanceState); 

    createNameContainer(); 

    createAddressContainer(); 

    createParentContainer(); 

    setContentView(parentContainer); 
} 

private void createNameContainer() 
{ 
    nameContainer = new LinearLayout(this); 

    nameContainer.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, 
            LayoutParams.WRAP_CONTENT)); 
    nameContainer.setOrientation(LinearLayout.HORIZONTAL); 

    TextView nameLbl = new TextView(this); 
    nameLbl.setText("Name: "); 

    TextView nameValue = new TextView(this);
    nameValue.setText("John Doe"); 

    nameContainer.addView(nameLbl); 
    nameContainer.addView(nameValue); 
} 

private void createAddressContainer() 
{ 
    addressContainer = new LinearLayout(this); 

    addressContainer.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, 
            LayoutParams.WRAP_CONTENT)); 
    addressContainer.setOrientation(LinearLayout.VERTICAL); 

    TextView addrLbl = new TextView(this); 
    addrLbl.setText("Address:"); 

    TextView addrValue = new TextView(this); 
    addrValue.setText("911 Hollywood Blvd"); 

    addressContainer.addView(addrLbl); 
    addressContainer.addView(addrValue); 
} 

private void createParentContainer() 
{ 
    parentContainer = new LinearLayout(this); 

    parentContainer.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, 
            LayoutParams.FILL_PARENT)); 
    parentContainer.setOrientation(LinearLayout.VERTICAL); 

    parentContainer.addView(nameContainer); 
    parentContainer.addView(addressContainer); 
} 
} 
```

另请参阅这些以获得更多功能：

[布局参数 线性布局](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)

[ViewGroup 布局参数](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)

[StackOverflow 设置布局参数](https://stackoverflow.com/questions/3299359/setting-layout-parameters)

# javascript - Is there a way to "stop script" from running using JavaScript?

> ID：10926891
> 
> 赞同：1
> 
> 时间：2012-06-07T06:44:17.320
> 
> 标签：javascript, html, xss

How can I stop script from execution in JavaScript? **In case of cross-site scripting (XSS) attacks, the fundamental requirements are injection + execution of script.**

Imagine a scenario where attacker is able to **inject JavaScript** in a page & our goal is to stop attacker's script from execution. The injection point as an example can be any user-supplied input area.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:58:30.317

您唯一的解决方案是防止脚本被注入。您可以做几件事来实现这一目标：

1.  永远不要相信用户的输入。这意味着表单输入、查询字符串参数、cookie 内容或从传入请求中获得的任何其他数据。
2.  消毒您渲染的所有内容，无论您在哪里渲染。我喜欢在模板中使用两个明确命名的渲染函数来实现这一点，`render`并且`render_unsafe`. Rails 自 3.0 以来有一个类似的界面，它会清理所有模板数据，除非您特别要求未清理的渲染。拥有一个明确命名的界面将使您更容易检查您的模板，并确保未清理的渲染是例外情况，这会迫使您在每次将数据转储到模板时做出决定。
3.  如果您必须允许用户直接运行函数，请始终通过白名单进行。让他们以字符串形式提供函数名称或其他标识符，并以 JSON 或其他可解析构造的形式提供参数。查看 Shopify 的[Liquid](http://liquidmarkup.org/)模板系统的设计，该系统使用类似的执行安全白名单模式。
4.  **永远不要相信用户的输入**。永远不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:48:41.960

总是总是逃避你的输入。对于 XSS，使用 htmlentities() 转义 HTML 和 JS。这是一篇关于 PHP 安全性的好文章

[http://www.phpfreaks.com/tutorial/php-security](http://www.phpfreaks.com/tutorial/php-security)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:02:05.790

在处理 XSS 时，基本上有两点需要注意：

1.  逃避你的输出。转义输入只会消耗更多资源。转义用户提交的内容输出。这也意味着非转义的内容在您的数据库中，这是一件好事（如果出现误报，您可以在不丢失内容的情况下修复它，如果是新的 XSS 策略，您不需要修改所有数据库， ETC）。
2.  保护您的 JavaScript 代码。要非常小心，不要包含一些使用缺陷`eval()`或类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:15:08.887

正如其他人所说，保护自己免受 XSS 攻击的最好和最简单的方法是验证输入并根据插入点正确转义输出（HTML，很可能，带有实体或 JavaScript / CSS 块 - 不太可能而且更难以正确转义）。

但是，如果您的用例正在输出应该包含任意 HTML 的原始用户输入，并且您只是想防止注入的 JavaScript 干扰您的网站，您可以：

1) 在不同的唯一域中构建内容（因此它不能与您的主文档共享 cookie），例如 xyz123.usercontent.com（对于任何用户，xyz123 都不同） 2) 等待和/或 CSP 的沙箱指令标准化在您支持的每个浏览器中（当然，拒绝访问不支持的浏览器）。

# java - how to run the same step again without datasource in soapui

> ID：10926893
> 
> 赞同：0
> 
> 时间：2012-06-07T06:44:27.943
> 
> 标签：java, soap

I don't have soap ui pro. I am testing the web service. The actual implementation is i need pass one error code on the request, and the corresponding error description should be displayed on the response. I need to add this assertion. Every time the description in the response varies.

Here is the thing i want exactly...

Every time i need to run the same request but the error code (which is input) only should be changed on each time and the description varies on the response. How to validate this? Is there any way to do this without data source.

Regards, Chandra

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T03:59:42.253

这就是我创建的方式..有没有办法改进代码以做得更好；

```
import java.io.File;
File file = new File('c:/customers.csv');
InputStream inputFile =  new FileInputStream(file);
String[] lines = inputFile.text.split('\n');
List<String[]> rows = lines.collect {it.split(',')}
log.info('There are ' + rows.size() + ' customers to be inserted');
for(int i = 0; i < rows.size(); i++) {
  String[] row = rows.get(i);
  String errorcode = row[0];
// log.info(errorcode)
 String errorDescription = row[1];
 //log.info(errorDescription)
testRunner.testCase.testSuite.project.setPropertyValue('errorcode', errorcode);
testRunner.testCase.testSuite.project.setPropertyValue('errorDescription', errorDescription);
testRunner.runTestStepByName("createCard-1");
log.info(errorcode +"Finsihed")
} 
```

# ios - 无法从设备读取

> ID：10926900
> 
> 赞同：29
> 
> 时间：2012-06-07T06:45:05.590
> 
> 标签：ios, xcode

我正在尝试通过 Xcode 在上一个版本的顶部安装我的应用程序的新版本。

每当我尝试使用相同的临时配置文件和详细信息安装它时，都会遇到这个问题。此问题发生在构建之后（复制文件时）。

有人遇到过这个问题吗？？

PS：我附上了错误截图：

！![错误](../Images/aa9cedc2d5e47feb97b8c3024a726cb2.png)

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-04T17:42:01.677

对我有用的是这些步骤：

1.  **删除您尝试从 iPhone/iPad 构建的现有应用程序**
2.  与 iTunes 同步
3.  彻底杀死 Xcode 和 iTunes
4.  打开 Xcode 并构建并运行

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T10:59:30.643

对我来说，只需从我的设备中删除应用程序并重新启动 Xcode 就足够了。重新启动 Xcode 似乎是这些天许多问题的解决方案......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T06:54:13.463

从设备中删除之前安装的构建，退出 Xcode，重新启动设备，然后在清除所有目标后安装应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T06:44:43.670

我得到了解决方案！

为避免此错误，只需添加用户定义的构建设置：

```
PREBINDING = NO 
```

这将在构建阶段的用户定义部分下添加。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-09T14:42:15.403

显然，这是一个[YMMV](https://en.wiktionary.org/wiki/YMMV)情况。我有一个非常顽固的案例，这对我有用：

1.  从设备中删除了应用程序
2.  *在 Xcode → Organizer*中查看了设备的配置文件
**   *我注意到有两个我正在签名的开发配置文件副本（设备上的所有配置文件都是有效的，包括这两个）**   删除了我正在签名的开发配置文件的所有实例（即两者）*   从 Xcode 构建和运行。重新安装了该应用程序以及一份开发配置文件，并且可以正常工作。*

 *基于此，我会尝试：从设备中删除您使用开发配置文件签名的开发配置文件的所有实例，然后再次尝试运行它。我不知道是否需要第 1 步；我怀疑可能不是。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T07:19:39.003

要修复它，请尝试以下几个步骤：

*   在 iTunes 中同步您的设备。（如果您真的想保存当前版本，请进行备份**`before`**。）

*   删除您要`update`覆盖的应用程序，然后从备份中恢复设备。

*   再次同步。

最后，在 Xcode 中，菜单*Build* → *Clean*并尝试安装。

我希望这有帮助！*

# wamp - Wamp Server Offline error

> ID：10926903
> 
> 赞同：8
> 
> 时间：2012-06-07T06:45:11.053
> 
> 标签：wamp

Some of you might get the “Server Offline” error after you install WAMP on your windows 7 system. This happens if IIS server was installed in the system prior to the installation of WAMP thus creating the clash of the port address where both the servers are trying to access

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T15:03:40.743

首先，如果您使用的是 SKYPE，请尝试通过打开 Skype 来更改端口，然后：

*   工具菜单
*   选项
*   高级选项
*   连接
*   然后取消选中“使用端口 80 和 443 ......”
*   节省
*   重新启动 Skype

其次，如果问题仍然存在，请尝试查找您是否正在使用 - 或正在使用 - 其他 Apache 服务器（例如 XAMPP 服务器），如果是，请尝试将其删除，并在删除后通过以下方式转到 regedit：

*   按键盘上的“windows”按钮+“r”按钮，这将打开运行命令
*   键入“regedit”（不带“”）
*   打开编辑菜单然后查找（您可以按“CTRL”按钮+“F”按钮）
*   搜索属于其他 apache 服务器的任何内容并将其删除（执行此步骤时应小心）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:06:14.670

不知道你是否找到了答案，但我的问题是 Skype 正在运行。我猜它在端口 80 上运行。关闭它解决了我的问题。

# iphone - Populating Data from NSMutableArray in iPhone

> ID：10926905
> 
> 赞同：0
> 
> 时间：2012-06-07T06:45:17.870
> 
> 标签：iphone, objective-c, uitableview, nsmutablearray

I have three arrays and I have copied all these arrays into a single array. All these three arrays are arrays of dictionaries.All arrays has a field called picture, but that pictures is coming from different sources- URL in one array, data in other and files in the third one.

Say, Array1 has dictionaries with a key - picture and its loaded from `NSURL`. Similarly, Array2 and Array3 has dictionaries with same key name - picture and loaded from `ContentofFiles` and `NSData`.

Now, I want to populate tableview, of course,m having `Custom UITableViewCell`, it has image view as its content view. To load that image, what should I do.

I was doing this thing..

```
NSURL *url  = [NSURL URLWithString:[[contactList objectAtIndex:indexPath.row] objectForKey:@"picture"]];
cell.contactImageView.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]]; 
```

But, this will crash if `cell.contactImageView.image` don’t receive image from NSURL.So, what should I do? Any help, will be appreciated

But,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:49:41.627

您只需检查接收到的图像是否为空，如果是，则在未选择个人资料图片时设置一个名为 no photo 的模板照片图像，如 facebook 上的照片

```
 UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];
    if (img)
       cell.contactImageView.image = img;
    else
       cell.contactImageView.image = [UIImage imageNamed:@"no_photo.png"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:12:38.863

如果这些图像是从网上检索到的，我建议不要使用`[NSData dataWithContentsOfURL:]`.

您应该使用异步加载图像的非阻塞方法。对表中的大量行使用此方法会导致性能问题。

这是我的建议，使用[SDWebImage 库](https://github.com/rs/SDWebImage)。易于使用，甚至更易于安装。

将库添加到项目后，下面就是`#import`类`UIImageView+WebCache.h`使用示例。

```
 [cell.contactImageView.image setImageWithURL:[NSURL URLWithString:[[contactList objectAtIndex:indexPath.row] objectForKey:@"picture"]]
               placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:53:25.327

您可以在字典中再添加一个键，该键将指定从哪里拍照，因此如果您想提供来自不同来源的图像，您可以将图像提供给 cell.contactImageView。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:34:57.613

非常感谢您的快速回复，尤其是@skram，由于您的建议，我的 tableview 性能提高了很多。我问过的问题，我想到的更好的答案是使用`iskindofClass`. 如果图像来自任何类，在某种条件下，我们可以检查该图像的来源并相应地填充我们的图像。

```
if ([[[contactList objectAtIndex:indexPath.row] objectForKey:@"picture"] isKindOfClass:[UIImage class]]) 
    {
        cell.contactImageView.image = [[contactList objectAtIndex:indexPath.row] objectForKey:@"picture"];
    }
    else if ([[[contactList objectAtIndex:indexPath.row] objectForKey:@"picture"] isKindOfClass:[NSString class]]) 
    {
        cell.contactImageView.image = [[contactList objectAtIndex:indexPath.row] objectForKey:@"picture"];
    }
    else if([[[contactList objectAtIndex:indexPath.row] objectForKey:@"picture"] isKindOfClass:[NSURL class]])
    {
        [cell.contactImageView setImageWithURL:[NSURL URLWithString:[[contactList objectAtIndex:indexPath.row] objectForKey:@"picture"]]placeholderImage:[UIImage imageNamed:@"placeholder.png"]];
    } 
```

现在，我可以正确填充表格视图了。再次感谢`scram`.

# jquery - how to add events to a class from data('events') in jquery

> ID：10926906
> 
> 赞同：0
> 
> 时间：2012-06-07T06:45:19.820
> 
> 标签：jquery

I'm using jquery to remove and add some class to a element as shown below

```
$("#"+obj.id+" div.treeclick").removeClass("ui-icon-radio-off").removeClass("tree-leaf").addClass("tree-minus").addClass("ui-icon-triangle-1-s"); 
```

now I want to bind events that are there for class tree-minus so I use the following line

```
$("#"+obj.id+" div.treeclick").removeClass("ui-icon-radio-off").removeClass("tree-leaf").addClass("tree-minus").addClass("ui-icon-triangle-1-s").bind($(".tree-minus").data('events')); 
```

but I got an error saying " Object has no method 'apply' " ,how can I add events that I'll get from $("tree-minus").data('events')

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:50:23.363

```
$("#" + obj.id + " div.treeclick")
    .removeClass("ui-icon-radio-off tree-leaf")
    .addClass("tree-minus ui-icon-triangle-1-s");

$("#" + obj.id).on($(this).data('events'), 'div.treeclick', function() {

}); 
```

或者

```
 $("#" + obj.id + " div.treeclick")
        .removeClass("ui-icon-radio-off tree-leaf")
        .addClass("tree-minus ui-icon-triangle-1-s")
        .on($(this).data('events'), 'div.treeclick', function() {
            alert('event binded');
        }); 
```

### 笔记

您不需要为每个类单独调用`addClass()`和`removeClass()`，只需使用逗号分隔值。

### 为什么需要`.on()`委托事件

因为，当您更改元素的类时，它会将其视为新元素，而不是以前存在于 DOM 中，因此它需要委托事件。

* * *

### 根据你的评论

```
$("#" + obj.id + " div.treeclick")
    .removeClass("ui-icon-radio-off tree-leaf")
    .addClass("tree-minus ui-icon-triangle-1-s");

$("#" + obj.id).on($('.tree-minus').data('events'), '.tree-minus.ui-icon-triangle-1-s', function() {

});
​ 
```

# iphone - 用于 iOS 的拆分翻盖样式动画

> ID：10926910
> 
> 赞同：1
> 
> 时间：2012-06-07T06:45:38.043
> 
> 标签：iphone, ios, ipad, animation

我需要在我的 iOS 应用程序中显示一些数字，其动画类似于[Split-flap 显示](http://en.wikipedia.org/wiki/Split-flap_display)

我找到了这个[带有 iOS 拆分翻盖示例的视频](http://www.youtube.com/watch?v=AkgT_Y1F3oM)

但如何做到这一点？有什么例子吗？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:50:58.850

我最近找到了一个关于动画和矩阵变换的教程。

[我认为您可以通过本](http://www.odysseyinc.com/Portfolio.html?section=enterthematrix)教程完成分瓣 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:52:52.173

搜索后，我遇到了这个翻转时钟动画教程。哪个应该完全符合您的需求。

[创建 iPad 翻转时钟 - 核心动画](http://www.voyce.com/index.php/2010/04/10/creating-an-ipad-flip-clock-with-core-animation/)

# c++ - 谁能解释我对项目 euler 15 的动态编程方法有什么问题？

> ID：10926912
> 
> 赞同：4
> 
> 时间：2012-06-07T06:45:49.167
> 
> 标签：c++, dynamic-programming

我正在学习动态编程，并尝试使用动态编程解决[Project Euler 的第 15 题](https://projecteuler.net/problem=15)。虽然我知道这个问题可以使用二项式系数来解决，但我想看看我学到了多少动态编程并因此尝试过。这是代码：

```
#include <iostream>
#include <cstdio>
#include <algorithm>
#include <cstdlib>

using namespace std;

int main()
{
    int gridsize;
    cin>>gridsize;

    int** grid = new int*[gridsize+1];
    for ( int i = 0; i < gridsize+1; i++) {
        grid[i] = new int[gridsize+1];
    }

    //Initialize the grid distances

    for ( int i = 1; i <= gridsize ; i++) {
        grid[i][0] = 1;
        grid[0][i] = 1;
    }
    grid[0][0] = 0;

    for ( int i = 1; i <= gridsize ; i++) {
        for ( int j = 1; j <= gridsize ; j++) {
            grid[i][j] = grid[i-1][j] + grid[i][j-1];
        }
    }
    cout<<grid[gridsize][gridsize]<<endl;
    delete(grid);   
    return 0;
} 
```

预期的答案是 137846528820，而我得到的答案是 407575348。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T06:59:18.600

您的逻辑是相当正确的，问题是您遇到了整数溢出的情况。这是您的代码的修改版本，可以完美运行。只需将 更改`int`为`long long unsigned`类型。

```
#include <iostream>
#include <cstdio>
#include <algorithm>
#include <cstdlib>

using namespace std;
typedef unsigned long long ull;
int main()
{
    ull gridsize;
    cin>>gridsize;

    ull** grid = (ull**) malloc((gridsize+1)*sizeof(ull*));
    for ( int i = 0; i < gridsize+1; i++) {
        grid[i] = (ull*) malloc((gridsize +1)*sizeof(ull));
    }

    //Initialize the grid distances

    for ( int i = 1; i <= gridsize ; i++) {
        grid[i][0] = 1;
        grid[0][i] = 1;
    }
    grid[0][0] = 0;

    for ( int i = 1; i <= gridsize ; i++) {
        for ( int j = 1; j <= gridsize ; j++) {
            grid[i][j] = grid[i-1][j] + grid[i][j-1];
        }
    }
    cout<<grid[gridsize][gridsize];
    free(grid);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:01:20.513

看来您溢出了`int`数据类型。根据[计算](http://www.google.gr/search?q=137846528820%20modulo%202%5E32)：

> 137 846 528 820 模 (2^32) = 407 575 348

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-23T17:53:34.823

电子表格似乎是一个方便的调试（或原始开发）工具：您可以按照您的算法快速构建一个来解决问题，它将在每个步骤中显示结果。这应该可以让您轻松识别网格右下方的溢出（从 grid[16][18] 开始）。

# c# - 如何使每个班级都可以进行控制？

> ID：10926915
> 
> 赞同：0
> 
> 时间：2012-06-07T06:46:07.307
> 
> 标签：c#, controls

就像标题说的：P 假设我有 10 个课程，我可以轻松访问一个文本框。如果我想制作一个全局整数，我使用了静态的。如何用控制做这样的事情？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:49:02.627

定义一个静态类 定义*该*控件，就像该类的静态成员一样

```
public static class SharedResources
{
    public static UserControl mySharedControl = ...
} 
```

在代码中使用此控件后，例如

```
SharedResources.mySharedControl 
```

也可以自然地定义静态*属性*而不是*字段。*

# ios4 - CGGradientCreateWithColors 不再适用于 iOS 4

> ID：10926919
> 
> 赞同：0
> 
> 时间：2012-06-07T06:46:15.183
> 
> 标签：ios4, gradient, drawrect

这是我在 UIView 子类中用来轻松添加渐变视图的代码：

```
#import "GradientView.h"

@implementation GradientView

@synthesize direction, startColor, endColor;

-(id)initWithFrame:(CGRect)frame startColor:(UIColor *)start_color endColor:(UIColor *)end_color direction:(GradientDirection)gradient_direction
{
  if((self = [super initWithFrame:frame]))
  {
    self.startColor = start_color;
    self.endColor = end_color;
    self.direction = gradient_direction;
  }
  return self;
}

- (id)initWithFrame:(CGRect)frame
{
    [self doesNotRecognizeSelector:_cmd];
  return self;
}

-(void)drawRect:(CGRect)rect
{
  CGColorRef start_color = [self.startColor CGColor];
  CGColorRef end_color = [self.endColor CGColor];

  NSArray *colors = [NSArray arrayWithObjects:(__bridge id)start_color, (__bridge id)end_color, nil];
  CGFloat locations[] = {0,1};
  CGGradientRef gradient = CGGradientCreateWithColors(CGColorGetColorSpace(start_color), (__bridge CFArrayRef)colors, locations);
  CGRect bounds = self.bounds;
  CGPoint start;
  CGPoint end;
  if(direction == GradientLeftToRight)
  {
    start = CGPointMake(bounds.origin.x, CGRectGetMidY(bounds));
    end = CGPointMake(CGRectGetMaxX(bounds), CGRectGetMidY(bounds));
  }
  else
  {
    start = CGPointMake(CGRectGetMidX(bounds), bounds.origin.y);
    end = CGPointMake(CGRectGetMidX(bounds), CGRectGetMaxY(bounds));
  }

  CGContextRef context = UIGraphicsGetCurrentContext();
  CGContextDrawLinearGradient(context, gradient, start, end, 0);
  CGGradientRelease(gradient);
}

@end 
```

它在早期的 xcode 版本中完美运行，但是当我在 iOS4.3 上运行它时，它现在只是显示为黑色。在 iOS 5 中它工作正常，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T02:53:15.757

在创建 RGBA 图像上下文时，我遇到了类似的问题`UIGraphicsBeginImageContextWithOptions(...)`。

在我的例子中，我使用渐变色标是用`[UIColor colorWithWhite:alpha:]`. 在 iOS 5 上运行良好，但在 iOS 4 上不行。当我创建渐变色标时`[UIColor colorWithRed:green:blue:alpha]`（以及应用于红色、绿色和蓝色通道的相同值），它开始在 iOS 4 上运行。

我怀疑它与 iOS 4 幕后的不兼容色彩空间有关。也许`colorWithWhite:alpha:`正在使用“灰色”色彩空间，当上下文位于 RGB 色彩空间中时，它无法工作。

# mdx - 在 Pentaho Mondrian 3.2 中过滤空结果

> ID：10926921
> 
> 赞同：0
> 
> 时间：2012-06-07T06:46:18.637
> 
> 标签：mdx, mondrian

我正在使用 Pentaho Mondrian 3.2。

我想计算特定范围内的天数`[Measures].[CNT] > 0`。以下 MDX 查询计算所有天数，包括 null 和空结果：

```
WITH
MEMBER [Measures].[numofday]
    AS Count( Filter( [Date].[1390].[3].[10] : [Date].[1391].[3].[10]
                    , [Measures].[CNT].Currentmember > 0 ))

SELECT [Measures].[numofday] ON AXIS(0)
  FROM [Cube] 
```

此外，非空函数在计算成员中不起作用。

如何修改此查询以获得正确的天数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:11:15.003

该`Count`函数默认包含空成员；在这种情况下，您必须使用`EXCLUDEEMPTY`参数：

```
WITH
MEMBER [Measures].[numofday]
    AS Count( Filter( [Date].[1390].[3].[10] : [Date].[1391].[3].[10]
                    , [Measures].[CNT].Currentmember > 0 )
            , EXCLUDEEMPTY )

SELECT [Measures].[numofday] ON AXIS(0)
  FROM [Cube] 
```

# java - 在 UiBinder 中的标签旁边显示我的星号

> ID：10926930
> 
> 赞同：1
> 
> 时间：2012-06-07T06:47:10.737
> 
> 标签：java, gwt, uibinder

一天前我问了一个关于星号和图像的问题，我想将它放在带有文本的标签旁边。然而，图像显示了两次，我仍在努力掌握这一点，因为我仍在学习 UiBinder 和 Gwt。

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent"> 
```

```
<ui:style type="com.equillore.mcmexternal.client.ui.IndicatorLabel.Style">
    @sprite .mySpriteClass {gwt-image: "imageAccessor"; other: property;}
    .required
     {
        gwt-image: 'requiredImage';
        width: 7px;
        height: 14px;
    }
    .labRequired
    {
        color:#303030;
        font-family: Tahoma, Geneva, sans-serif;
        font-size:10pt;
        font-style:normal;
        font-weight:lighter;
    }
</ui:style>
<g:SimplePanel width='90px' height='21px'>
<g:Grid>
    <g:row>
        <g:customCell>
            <g:Label ui:field="label" addStyleNames="{style.labRequired}"/>
        </g:customCell>
        <g:customCell>
            <g:Label addStyleNames="{style.required}"/>
        </g:customCell>
    </g:row>
</g:Grid>
</g:SimplePanel> 
```

如果我删除以下行

```
 <ui:image field="requiredImage" src="images/required_indicator.gif"/> 
```

如何在我的 java 文件中进行更改，以便正确显示星号的图像 这是 java 文件。

```
public class IndicatorLabel extends Composite implements HasText {

public interface Binder extends UiBinder<Widget, IndicatorLabel> {
}

private static final Binder binder = GWT.create(Binder.class);

public interface Style extends CssResource {

    String required();
}

@UiField Style style;
@UiField Label label;

public IndicatorLabel() {

    initWidget(binder.createAndBindUi(this));

}

public IndicatorLabel(String text) {

    this();
    setText(text);
} 
```

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:03:22.280

如果您只想显示不可点击的图像，更好的答案是仅使用 CSS 来设置标签的样式：

```
@sprite .requiredField 
{
  gwt-image: 'required';
  background-repeat: no-repeat;
  height: 12px;
  width: 150px;
  background-position: right top;
  padding-right:10px;
} 
```

但无论如何，您应该在 ResourceBundle 上以不同的方式定义图像，如下所示：

```
@Source("save.png")
public ImageResource required(); 
```

您甚至不需要为此使用 UIBinder，但如果您的目标是学习它，我建议您尝试更密切地关注此文档：[https ://developers.google.com/web-toolkit/doc/latest/ DevGuideUiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)

# php - 如何检测浏览器是否为 Firefox 3.6+

> ID：10926931
> 
> 赞同：-1
> 
> 时间：2012-06-07T06:47:14.627
> 
> 标签：php, browser, user-agent

我有一个 PHP 网页。我想检测浏览器是否是 Firefox 3.6 或更高版本。这可以通过我的浏览器代理嗅探来完成，还是有任何其他方式（因为可以自定义用户代理）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:51:43.923

您可以使用 jQuery 检查浏览器类型和版本

[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

或者，使用JS，你可以测试一下客户端是否有一定的能力。jQuery 内置了一些检查

[http://api.jquery.com/jQuery.support/](http://api.jquery.com/jQuery.support/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:53:03.183

有一种简单的浏览器检测方法。

看一看[_](http://php.net/manual/en/function.get-browser.php)

```
<?php   
$browser = get_browser(null, true);
print_r($browser);
?> 
```

并且输出将类似于

```
Array
(
    [browser_name_regex] => ^mozilla/5\.0 (windows; .; windows nt 5\.1; .*rv:.*) gecko/.* firefox/0\.9.*$
    [browser_name_pattern] => Mozilla/5.0 (Windows; ?; Windows NT 5.1; *rv:*) Gecko/* Firefox/0.9*
    [parent] => Firefox 0.9
    [platform] => WinXP
    [browser] => Firefox
    [version] => 0.9
    [majorver] => 0
    [minorver] => 9
    [cssversion] => 2
    [frames] => 1
    [iframes] => 1
    [tables] => 1
    [cookies] => 1
    /* some other infos */
) 
```

现在您可以将用户重定向到另一个页面或显示对话框/警告消息。

`[browser]`并且`[version]`会帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:57:44.450

由于您使用的是 PHP，因此已经有经常更新`PHP Class`。一定要看看它，因为它具有所有功能。

使用插件非常简单：

```
<?php
    require_once('Browser.php');
    $browser = new Browser();
    if( ! ( $browser->getBrowser() == Browser::BROWSER_FIREFOX && $browser->getVersion() >= 3 ) )
    {
        echo 'You have FireFox version 3 or greater';
    }
?> 
```

要获得它`Browser.php`，请从以下网址下载： http: [//chrisschuld.com/projects/browser-php-detecting-a-users-browser-from-php/](http://chrisschuld.com/projects/browser-php-detecting-a-users-browser-from-php/)

希望这可以帮助！:)

# javascript - javascript单选按钮

> ID：10926940
> 
> 赞同：0
> 
> 时间：2012-06-07T06:47:42.893
> 
> 标签：javascript, radio-button

我正在尝试制作一些项目，我希望在我选择专家按钮时显示一个文本框，而当我单击学习者按钮时不显示文本框....

我已经编写了这段代码，但无法解决问题...请帮助...

```
<html>
<head>
<script language="javascript"> 

function toggleContent(showHideDiv, switchTextDiv) {
    var text = document.getElementById(showHideDiv);
    var ele = document.getElementById(switchTextDiv);
    var rad_val='';
    for (var i=0; i < document.text.role.length; i++)
    {
        if (document.text.role[i].checked)
        {
            rad_val = document.text.role[i].value;
        }
    }   

    if(rad_val=='learner'){
            ele.style.display = "block";
    }
    else {
        ele.style.display = "none";
    }
}
</script>
</head>
<body>
<table>
  <tr >
    <td  ><option value="1"> 1 </option>
    </td>
    <td> Role </td>
    <form id="form1">
      <td><label>
        <input type="radio" name="role" value='learner' onClick="toggleContent('form1','div1')" >
        Learner </label>
      </td>
      <td><label>
        <input type="radio" name="role" value='expert' onClick="toggleContent('form1','div1')" >
        Expert </label>
    </form>
<td ><div ID="div1" align=right style="display:none;">
        <label class="labell labelUser" >why?</label>
        <textarea name="description" align="right" id="description"  cols="40" rows="5" class="inputbox">Why?</textarea>
        <span id="descriptionError" class="notifyForUser" spanError></span> </div></td>  
  </tr>
  <tr >
    <td  ><option value="2"> 2 </option>
    </td>
    <td> Role </td>
    <form id="form2">
      <td><label>
        <input type="radio" name="role" value='learner' onClick=toggleContent('form2','div2') >
        Learner </label>
      </td>
      <td><label>
        <input type="radio" name="role" value='expert' onClick=toggleContent('form2','div2') >
        Expert </label>
      </td>
    </form>
    <td ><div ID="div2" align=right style="display:none;">
        <label class="labell labelUser" >why?</label>
        <textarea name="description" align="right" id="description"  cols="40" rows="5" class="inputbox">Why?</textarea>
        <span id="descriptionError" class="notifyForUser" spanError></span> </div></td>
  </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:59:42.953

```
if(rad_val=='learner'){ 
        ele.style.display = "block"; 
} 
else { 
    ele.style.display = "none"; 
} 
```

没有值等于学习者，但学习者1或学习者2

试试这个：

```
function toggleContent(showHideDiv, switchTextDiv) {
    var text = document.getElementById(showHideDiv);
    var ele = document.getElementById(switchTextDiv);
    var rad_val = '';
    var pattern = /\d+/g;
    var a=pattern.exec(showHideDiv);

    for (var i = 0; i < document.forms[showHideDiv].role.length; i++) {
        if (document.forms[showHideDiv].role[i].checked) {
            rad_val = document.forms[showHideDiv].role[i].value;
        }
    }
    if (rad_val == 'learner' + a) {

        ele.style.display = "block";
    }
    else {

        ele.style.display = "none";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:09:49.770

你可以这样做：

```
<script language="javascript"> 
function toggleContent(showHideDiv, switchTextDiv) {
var text = document.getElementById(showHideDiv);
var ele = document.getElementById(switchTextDiv);
var rad_val='';
var obj=text.getElementsByTagName("input");
for (var i=0; i < obj.length; i++)
{
    if (obj[i].checked)
    {
        rad_val = obj[i].value;
    }
}  
if(rad_val.indexOf("learner")!=-1){
        ele.style.display = "block";
}
else {
    ele.style.display = "none";
}
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:15:38.050

您的代码逻辑和检索表单元素的方式存在一些错误。

我建议修改整个逻辑，而不是修复你的代码。

更好的做法是通过代码绑定点击事件，而不是从每个输入标签内联。此外，单击单选按钮后（也可以通过键盘选择触发），您可以确定整个单选组的选定值是单击按钮的值。

这是实现相同效果所需的代码：

```
window.onload = function() {
    var oDiv = document.getElementById("div2");
    var arrRoleButtons = document.getElementsByName("role");
    for (var i = 0; i < arrRoleButtons.length; i++) {
        var oCurrentRole = arrRoleButtons[i];
        oCurrentRole.onclick = function() {
            oDiv.style.display = (this.value === 'learner') ? "block" : "none"; 
        }
    }
}; 
```

有了这个，您不再需要`onclick`从标签中调用：

```
<input type="radio" name="role" value='learner' />
<input type="radio" name="role" value='expert' /> 
```

[现场测试用例](http://jsfiddle.net/pnXF5/1/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:33:05.363

这就是解决方案。感谢@dragon66 解决了我的问题。

```
function toggleContent(showHideDiv, switchTextDiv) {
    var text = document.getElementById(showHideDiv);
    var ele = document.getElementById(switchTextDiv);
    var rad_val='';
    for (var i=0; i < text.role.length; i++)
    {
        if (text.role[i].checked)
        {
            rad_val = text.role[i].value;
        }
    }   

    if(rad_val=='learner'){
            ele.style.display = "block";
    }
    else {
        ele.style.display = "none";
    }
}
</script>
</head>
<body>
<table>
  <tr >
    <td  ><option value="1"> 1 </option>
    </td>
    <td> Role </td>
    <form id="form1">
      <td><label>
        <input type="radio" name="role" value='learner' onClick="toggleContent('form1','div1')" >
        Learner </label>
      </td>
      <td><label>
        <input type="radio" name="role" value='expert' onClick="toggleContent('form1','div1')" >
        Expert </label>
    </form>
<td ><div ID="div1" align=right style="display:none;">
        <label class="labell labelUser" >why?</label>
        <textarea name="description" align="right" id="description"  cols="40" rows="5" class="inputbox">Why?</textarea>
        <span id="descriptionError" class="notifyForUser" spanError></span> </div></td>  
  </tr>
  <tr >
    <td  ><option value="2"> 2 </option>
    </td>
    <td> Role </td>
    <form id="form2">
      <td><label>
        <input type="radio" name="role" value='learner' onClick=toggleContent('form2','div2') >
        Learner </label>
      </td>
      <td><label>
        <input type="radio" name="role" value='expert' onClick=toggleContent('form2','div2') >
        Expert </label>
      </td>
    </form>
    <td ><div ID="div2" align=right style="display:none;">
        <label class="labell labelUser" >why?</label>
        <textarea name="description" align="right" id="description"  cols="40" rows="5" class="inputbox">Why?</textarea>
        <span id="descriptionError" class="notifyForUser" spanError></span> </div></td>
  </tr>
</table>
</body>
</html> 
```

# jquery - 创建基本的 Jquery 插件？错误：预期对象，为什么？

> ID：10926941
> 
> 赞同：0
> 
> 时间：2012-06-07T06:47:56.480
> 
> 标签：jquery, jquery-plugins

我正在尝试学习构建自己的 jquery 插件。用一个简单的例子，但我在执行它时遇到错误。计划构建插件

> 贷款计算器

可以帮助我解决错误“

> 预期对象

我在 index.html 中的 javascript 是这样的......

```
$(function(){
    $('#btn').click(function() {
     var roi=getie();  //  ROI - rate of interest - value of i receved from function getie()
    $("#i").val(roi);  // input type 'text ' to display Interest (i) value
    });

}); 
```

和用于自定义功能的插件 codgin

> 盖蒂（）

像这样分开

> 计算.js 文件

代码 ：

```
(function($){
    //Attach this new method to jQuery
    $.fn.extend({ 
            //This is where you write your plugin's name
       getie: function() {
            //Iterate over the current set of matched elements
            return this.each(function() {
             var  i=20;
             return i;
             });
        }
    });

})(jQuery); 
```

我正在使用 jquery-1.7.2.min.js 和 query-ui-1.8.20.custom.min.js 作为其他 js 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:54:51.640

你应该打电话

```
roi = $('someSelector').getie() 
```

“预期的对象”意味着您应该向函数传递一个对象，在这种情况下是 jQuery 对象或一些 jQuery 包装的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:55:40.283

随着`$.fn.extend`您扩展 jquery 并且不创建对象。所以你必须在一个 jquery 对象上调用它：

```
$(this).getie() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:14:37.667

为什么你需要 getie 成为一个 jQuery 插件？您使用它的方式和/或它的常规功能就足够了

```
function getie(){
} 
```

# qt - pyqt：当小部件变得可见/隐藏时接收信号

> ID：10926945
> 
> 赞同：19
> 
> 时间：2012-06-07T06:48:07.913
> 
> 标签：qt, pyqt, signals

我注意到当 QWidget 变得可见/不可见时没有信号/事件。还有什么我可以挂钩以获得大致相同的东西（轮询isVisible（）除外）？

如果显示数据的小部件不可见，我想关闭一些数据获取。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-07T07:11:48.000

一种解决方案是，您可以在小部件（[文档](http://qt-project.org/doc/qt-4.8/qwidget.html#showEvent)）中覆盖`QWidget::showEvent()`和运行。然后您自定义并捕获相应对象中的 a 。例如..`QWidget::hideEvent()``emit``signal``slot`

```
void MyWidget::hideEvent(QHideEvent *)
{
    // 'false' means hidden..
    emit widgetVisibilityChanged(false);
}

void MyWidget::showEvent(QShowEvent *)
{
    // 'true' means visible..
    emit widgetVisibilityChanged(true);
} 
```

现在，如果您无法覆盖您的小部件，您还可以使用`QObject::installEventFilter ( QObject * filterObj )`和`QObject::eventFilter ( QObject * watched, QEvent * event )`组合（[文档和示例](http://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)）在其父小部件中接收上述事件。

# apache-flex - Flex builder - 无法引入断点

> ID：10926946
> 
> 赞同：1
> 
> 时间：2012-06-07T06:48:22.270
> 
> 标签：apache-flex, debugging, breakpoints

如图所示，我无法在我的 flex 调试器中引入断点。实际上它说“*断点不能在这里设置，因为这一行没有可执行代码*”但据我所知，一切都很好。我做错了什么，请帮我解决这个问题。提前致谢。

![在此处输入图像描述](../Images/88bfb61bbc347170a9663d21c638b327.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:41:21.107

尝试单击项目 -> 清理。有时有些事情会挂断，这在很多情况下对我来说是解决问题的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T09:19:11.173

您正在代码中放置断点，但代码尚未构建，因此您想要放置断点的代码根本不存在于先前构建的 SWF 文件中。重新构建您的应用程序并确保通过检查时间戳生成新的 SWF。希望这有帮助谢谢！

# r - R中的自定义合并函数

> ID：10926948
> 
> 赞同：1
> 
> 时间：2012-06-07T06:48:25.510
> 
> 标签：r, merge, bioinformatics

我有一个大型数据集，我想编写一个自定义合并函数以与 apply 一起使用，但我无法解决某个问题。我不能使用循环，因为它会花费太长时间。数据大致是这样的；

```
#     [ Name, Strand, Start, End ]

R1 = c( 'GeneA', '+', 1000, 1500 )
R2 = c( 'GeneA', '+', 1510, 2000 )
R3 = c( 'GeneA', '+', 2001, 2500 )
R4 = c( 'GeneB', '-', 3100, 4000 ) 
```

数据是一个 data.frame 行 R1:R4

到目前为止，我可以得到一个比较 Ri 和 Rj (j = i +1) 的函数，如果 Name 相同，Strand 相同，并且它们之间的差距小于 100，则合并它们。

```
GAP = Ri[End] - Rj[Start] 
```

如果我将该函数应用于每一行并建立输出。然后应该创建函数输出

```
R1 = c( 'GeneA', '+', 1000, 2500 )
R4 = c( 'GeneB', '-', 3100, 4000 ) 
```

我可以获得一个工作函数，可以使用 apply 将两个连续的元素合并为一个，但我不知道如何合并三个连续的元素。一个丑陋的解决方案是运行两个连续的元素合并功能，直到没有进行额外的合并，但这不是有效的。我对想法有点坚持，任何见解都将不胜感激。

编辑：澄清一下，数据按连续染色体上的起始位置排序（未显示），每个基因名称在数据集中的不同位置多次出现（即 GeneA 可以是 1000-2500，然后再次出现在 4000-5000，而且我不想合并这两个基因，只有连续的基因）。

编辑 2：我在下面使用了 Tim P 解决方案。合并的效率出现了问题。还有一种方法可以将文本文件发布到堆栈溢出，这样我就可以显示数据的真实样子，然后发布我的脚本？

```
 # Let ValidMerge be a logical vector of MergeDown corresponding to the rows in the data
 # as defined by TimP below
 # The data.frame is called RMDB 
 # TeMerge function is previously defined to merge two rows Ri and Rj into one entry
 # which spans the start of Ri to the end of Rj (with same name and strand)

 COUNT = 0
 RMDB.OUT = 0

 while (COUNT < nrow(RMDB)) { # Cycle through all rows of RMDB
  COUNT = COUNT + 1

  # Is this position a merger start?
    # If yes, then returns position in startpt
    # which will be the end position in endpt
    # If no, returns 0

  Merge = match(COUNT,startpt,nomatch=0) 

  if ( Merge == 0 ){
    # No merge starts at this position
    RMDB.OUT = rbind(RMDB.OUT,RMDB[COUNT,]) # Append COUNT Row to output

  }else{
    # Merge COUNT row in RMDB to its endpoint 

      RMDB.OUT = rbind(RMDB.OUT,
                     TeMerge(RMDB[COUNT,],RMDB[endpt[Merge],]))

    #print(paste('Merging Row',COUNT,' and Row',endpt[Merge]))

    COUNT = endpt[Merge] # Move Count to the endpoint      
  }
} 
```

这个脚本给出了我感兴趣的结果，唯一的问题是我的 data.frame 有 5 000 000 个条目，我想使用 GAP 大小的几个参数来运行分析以比较结果。有没有办法可以重写这部分代码以提高效率？到目前为止，一切都在合理的时间内运行（大约几分钟）。这部分已经在 700 000 个数据子集上运行了 3 个多小时。

编辑 3：所有案例都位于顶部的尖峰数据（MIR3）。忽略列 1:4,8,11:15。

> dput(RMDB) 结构(列表(V1 = c(3612L, 318L, 318L, 318L, 318L, 318L, 318L, 318L, 318L, 318L, 318L, 318L, 318L, 318L, 741L, 444L, 741L, 407L, 2 407L, 656L, 2058L, 257L, 4051L, 456L, 351L, 850L, 335L, 1000L, 1566L, 236L, 588L, 3877L, 750L, 2292L, 783L, 747L, 666L, 260L, 1118L, 341L, 7010L, 320L, 7010L, 249L, 458L, 24L, 631L, 631L, 875L), V2 = c(11.4, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 18.7, 11.6, 24.9 , 28.8, 14.1, 28.8, 23.6, 18.3, 25, 7, 8.2, 23.6, 24.9, 29.5, 13.5, 19.4, 34.8, 17.4, 22.9, 27.6, 12, 26.6, 30.4, 39.2, 37..5, 19.2, 37.8, 1 , 0, 17.3, 21.2, 19.3, 0, 3.9, 26.6, 22.6), V3 = c(27, 3.8, 3.8, 3.8, 3.8, 3.8, 3.8, 3.8, 3.8, 3.8, 3.8, 3.8, 3.8, 3.8, 4.5, 0, 0, 7.3, 0.3, 7.3, 12.2, 4.9, 0, 0.4, 0, 1.8, 15.1, 12.7, 0, 3.6, 3, 7.5, 14, 9.4, 0, 14.1, 4.1, 4, 1.4, 9.4, 5.9, 2.7, 0, 9.3,1, 0, 0, 0, 1.8, 9.5), V4 = c(1.3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.1, 1.1 , 3, 0.3, 3, 3, 0, 0, 0, 0, 3.6, 0.8, 2.7, 0, 2.8, 0.4, 0.8, 1.6, 6.4, 0, 3.8, 3.7, 0, 0, 2.6, 1.5, 2.5 , 2.4, 1.4, 2, 5, 0, 0, 0.6, 0.5), V5 = 结构(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "chr1", class = "factor"), V6 = c(10469L, 20001L, 20210L, 21000L , 21201L, 22000L, 22201L, 23000L, 23201L, 20000L, 20001L, 24001L, 24205L, 24405L, 0L, 30855L, 30953L, 31293L, 31436L, 31734L, 32841L, 33048L, 33466L, 33529L, 34048L, 34451L, 34565L, 35217L, 35367L , 37045L, 37733L, 38059L, 38256L, 39465L, 39624L, 39925L, 40333L, 40629L,40736L, 41380L, 42370L, 43243L, 44836L, 44877L, 45887L, 46079L, 46217L, 46416L, 46553L, 46893L), V7 = c(11447L, 20200L, 20400L, 21200L, 21400L, 22200L, 22400L, 23200L, 23400L, 20001L, 20200L , 24200L, 24400L, 24600L, 0L, 30952L, 31131L, 31435L, 31733L, 31754L, 33037L, 33456L, 33509L, 34041L, 34108L, 34560L, 34921L, 35366L, 35499L, 37431L, 37861L, 38191L, 39464L, 39623L, 39924L, 40294L , 40626L, 40729L, 40878L, 42285L, 42504L, 44835L, 44876L, 45753L, 45987L, 46198L, 46240L, 46493L, 46722L, 47092L), V8 = structure(c(38L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 36L, 35L, 34L, 33L, 32L, 31L, 30L, 29L, 28L, 27L, 26L, 25L, 24L, 23L, 22L, 21L, 20L, 19L, 18L, 17L, 16L, 15L, 14L, 13L, 12L, 11L, 10L, 9L, 8L, 7L, 6L, 5L, 4L, 3L, 2L, 1L), .标签= c（“（249203529）”，“（249203899）”，“（249204128）”，“（249204381​​）”，“（249204423）”，“（249204634）”，“（249204868）”，“（249205745） ”、“(249205786)”、“(249208117)”、“(249208336)”、“(249209743)”、“(249209892)”、“(249209995)”、“(249210327)”、“(249210697)”、 “(249210998)”, “(249211157)”, “(249212430)”, “(249212760)”, “(249213190)”, “(249215122)”, “(249215255)”, “(249215700)”, “( 249216061)"、"(249216513)"、"(249216580)"、"(249217112)"、"(249217165)"、"(249217584)"、"(249218867)"、"(249218888)”, “(249219186)”, “(249219490)”, “(249219669)”, “(249219773)”, “(249235266)”, “(249239174)”), 类 = “因子”), V9 =结构（c（2L，1L，1L，2L，2L，2L，2L，2L，1L，2L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L , 2L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L , 1L, 2L), .Label = c("+", "C"), class = "factor"), V10 = structure(c(32L, 23L, 23L, 23L, 23L, 23L, 24L, 23L, 23L , 23L, 23L, 23L, 23L, 23L, 34L, 33L, 27L, 26L, 1L, 26L, 22L, 12L, 5L, 14L, 13L, 16L, 30L, 25L, 2L, 7L, 16L, 15L, 29L, 28L , 3L, 28L, 15L, 4L, 18L, 8L, 19L, 10L, 31L, 10L, 9L, 11L, 6L, 17L, 20L, 21L), .Label = c("AluJo",“AluJr”、“AluSx”、“AluSz6”、“AluYc”、“AT_rich”、“Charlie5”、“ERVL-E-int”、“L1M5”、“L1MA8”、“L1MA9”、“L1MB5”、“L1P1” ”、“L1PA6”、“L2a”、“L2c”、“LTR12F”、“LTR16C”、“MamRep1527”、“MER45A”、“MER58A”、“MIR”、“MIR3”、“MIR3a”、“MIRb”、 “MIRc”、“MLT1A”、“MLT1E1A”、“MLT1E1A-int”、“MLT1J2”、“(TAAA)n”、“TAR1”、“(TC)n”、“XXXXX”），类 =“因子” ), V11 = 结构(c(10L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 14L, 11L, 9L, 13L, 12L, 13L, 13L, 3升，12L, 3L, 3L, 4L, 9L, 13L, 12L, 1L, 4L, 4L, 9L, 9L, 12L, 9L, 4L, 12L, 8L, 8L, 6L, 3L, 11L, 3L, 3L, 3L, 5L, 7L, 2L, 1L), .Label = c("DNA/hAT-Charlie", "DNA/hAT-Tip100", "LINE/L1", "LINE/L2", "Low_complexity", "LTR", "LTR /ERV1"、"LTR/ERVL"、"LTR/ERVL-MaLR"、"Satellite/telo"、"Simple_repeat"、"SINE/Alu"、"SINE/MIR"、"XXXXXXXX")，class = "factor" ), V12 = 结构(c(19L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 2L, 9L, 8L, 25L, 2L, 10L, 9L, 23L, 2L, 1L, 15L, 12L, 1L, 6L, 2L, 11L, 16L, 13L, 7L, 2L, 2L, 8L, 14L, 1L, 3L, 26L, 17L, 18L, 9L, 21L, 22L, 24L, 2L, 4L, 27L, 20L), .Label = c("(0)", "1", "(113)”、“(115)”、“(119)”、“(13)”、“131”、“173”、“2”、“218”、“2234”、“(231)”、“ 2705”、“2923”、“2970”、“3242”、“359”、“3715”、“(399)”、“(4)”、“5306”、“5334”、“5746”、“6167” , "67", "(685)", "7"), class = "factor"), V13 = c(1712L, 143L, 143L, 143L, 143L, 143L, 143L, 143L, 143L, 143L, 143L, 143L ，143L，143L，162L，96L，349L，217L，298L，238L，216L，6174L，44L，44L，6154L，3030L，3156L，448L，448L，255L，133L，133L，133L，2623L，2623L，3375L，3375L，3375L，2846L，148.6L，1489016661616，302，302，302，302，302，302，302元，302，302元，302; , 312L, 376L, 4982L, 499L, 5305L, 41L, 6290L, 5433L, 6280L, 24L, 404L, 178L, 220L),V14 =结构（c（23L，24L，24L，24L，24L，24L，24L，24L，24L，24L，24L，24L，24L，24L，8L，1L，10L，25L，4L，13L，21L，1L， 11L, 26L, 15L, 14L, 20L, 30L, 5L, 2L, 1L, 27L, 1L, 18L, 3L, 4L, 7L, 6L, 9L, 19L, 22L, 29L, 1L, 2L, 28L, 16L, 1L, 17L, 1L, 12L), .Label = c(“(0)”, “(1)”, “(11)”, “(14)”, “(179)”, “208”, “(209) ”、“(212)”、“232”、“(25)”、“(255)”、“3”、“(30)”、“3049”、“(3116)”、“(32)”、 “327”、“(388)”、“4016”、“41”、“(46)”、“(470)”、“483”、“49”、“(51)”、“5640”、“( 573)"、"(691)"、"(838)"、"91")、类 = "因子"), V15 = c(2L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 22L, 23L, 22L, 24L, 25L, 24L , 26L, 27L, 28L, 29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 38L, 38L, 39L, 38L, 37L, 40L, 41L, 42L, 43L, 44L, 45L, 44L, 46L , 47L, 48L, 49L, 50L, 51L)), .Names = c("V1", "V2", "V3", "V4", "V5", "V6", "V7", "V8", “V9”、“V10”、“V11”、“V12”、“V13”、“V14”、“V15”），类 = “data.frame”，row.names = c（NA，-50L））40L, 41L, 42L, 43L, 44L, 45L, 44L, 46L, 47L, 48L, 49L, 50L, 51L)), .Names = c("V1", "V2", "V3", "V4", " V5”、“V6”、“V7”、“V8”、“V9”、“V10”、“V11”、“V12”、“V13”、“V14”、“V15”），class =“data.frame” ", row.names = c(NA, -50L))40L, 41L, 42L, 43L, 44L, 45L, 44L, 46L, 47L, 48L, 49L, 50L, 51L)), .Names = c("V1", "V2", "V3", "V4", " V5”、“V6”、“V7”、“V8”、“V9”、“V10”、“V11”、“V12”、“V13”、“V14”、“V15”），class =“data.frame” ", row.names = c(NA, -50L))

这是应用 ValidMerge 后的输出。

> dput(RMDB.OUT) 结构(列表(V1 = c(3612L, NA, NA, 318L, 318L, 318L, 318L, 318L, 318L, NA, 741L, 444L, 741L, 407L, 2059L, 407L, 656L, 2058L, 257L, 4051L, 456L, 351L, 850L, 335L, 1000L, 1566L, 236L, 588L, 3877L, 750L, 2292L, 783L, 747L, 666L, 260L, 1118L, 341L, 7010L, 320L, 7010L, 249L, 458L, 24L, 631L, 631L, 875L), V2 = c(11.4, NA, NA, 23, 23, 23, 23, 23, 23, NA, 18.7, 11.6, 24.9, 28.8, 14.1, 28.8, 23.6, 18.3, 25, 7 , 8.2, 23.6, 24.9, 29.5, 13.5, 19.4, 34.8, 17.4, 22.9, 27.6, 12, 26.6, 30.4, 12.9, 38.5, 35.4, 27.8, 19.2, 0, 17.3, 6, 21.2, 9, 19, 3.. , 22.6), V3 = c(27, NA, NA, 3.8, 3.8, 3.8, 3.8, 3.8, 3.8, NA, 4.5, 0, 0, 7.3, 0.3, 7.3, 12.2, 4.9, 0, 0.4, 0, 1.8, 15.1, 12.7, 0, 3.6, 3, 7.5, 14, 9.4, 0, 14.1, 4.1, 4, 1.4, 9.4, 5.9, 2.7, 0, 9.3, 1, 0, 0, 0, 1.8, 9.5) , V4 = c(1.3, NA, NA, 0, 0, 0, 0, 0, 0, NA,0, 3.1, 1.1, 3, 0.3, 3, 3, 0, 0, 0, 0, 3.6, 0.8, 2.7, 0, 2.8, 0.4, 0.8, 1.6, 6.4, 0, 3.8, 3.7, 0, 0, 2.6, 1.5, 2.5, 2.4, 1.4, 2, 5, 0, 0, 0.6, 0.5), V5 = 结构(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L , 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L , 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "chr1", class = "factor"), V6 = c(10469L, 20001L, 21000L, 22000L, 22201L, 23000L, 23201L, 20000L, 20001L, 24001L, 0L, 30855L, 30953L, 31293L, 31436L, 31734L, 32841L, 33048L, 33466L, 33529L, 34048L, 34451L, 34565L, 35217L, 35367L, 37045L, 37733L, 38059L, 38256L, 39465L, 39624L, 39925L, 40333L, 40629L, 40736L, 41380L, 42370L, 43243L, 44836L, 44877L, 45887L, 46079L, 46217L, 46416L, 46553L, 46893L), V7 = c(11447L, 20400L, 21400L, 22200L,22400L, 23200L, 23400L, 20001L, 20200L, 24600L, 0L, 30952L, 31131L, 31435L, 31733L, 31754L, 33037L, 33456L, 33509L, 34041L, 34108L, 34560L, 34921L, 35366L, 35499L, 37431L, 37861L, 38191L, 39464L, 39623L, 39924L, 40294L, 40626L, 40729L, 40878L, 42285L, 42504L, 44835L, 44876L, 45753L, 45987L, 46198L, 46240L, 46493L, 46722L, 47092L), V8 = structure(c(38L, 37L, 37L, 37L, 37L , 37L, 37L, 37L, 37L, 37L, 36L, 35L, 34L, 33L, 32L, 31L, 30L, 29L, 28L, 27L, 26L, 25L, 24L, 23L, 22L, 21L, 20L, 19L, 18L, 17L , 16L, 15L, 14L, 13L, 12L, 11L, 10L, 9L, 8L, 7L, 6L, 5L, 4L, 3L, 2L, 1L), .Label = c("(249203529)", "(249203899)" , “(249204128)”, “(249204381​​)”, “(249204423)”, “(249204634)”, “(249204868)”, “(249205745)”, “(249205786)”, “(249208117)"、"(249208336)"、"(249209743)"、"(249209892)"、"(249209995)"、"(249210327)"、"(249210697)"、"(249210998)"、"(249211157) )”、“(249212430)”、“(249212760)”、“(249213190)”、“(249215122)”、“(249215255)”、“(249215700)”、“(249216061)”、“(249216513)” , “(249216580)”, “(249217112)”, “(249217165)”, “(249217584)”, “(249218867)”, “(249218888)”, “(249219186)”, “(249219490)”, “ (249219669)”, “(249219773)”, “(249235266)”, “(249239174)”), 类 = “因子”), V9 = 结构(c(2L, 1L, 2L, 2L, 2L, 2L, 1L , 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,1L，1L，2L，1L，2L，2L，2L，1L，1L，1L，1L，1L，1L，1L，1L，1L，2L，2L，2L，1L，1L，1L，1L，1L，1L， 1L, 2L, 1L, 2L), .Label = c("+", "C"), class = "factor"), V10 = structure(c(32L, 23L, 23L, 23L, 24L, 23L, 23L, 23L, 23L, 23L, 34L, 33L, 27L, 26L, 1L, 26L, 22L, 12L, 5L, 14L, 13L, 16L, 30L, 25L, 2L, 7L, 16L, 15L, 29L, 28L, 3L, 28L, 15L, 4L, 18L, 8L, 19L, 10L, 31L, 10L, 9L, 11L, 6L, 17L, 20L, 21L), .Label = c("AluJo", "AluJr", "AluSx", "AluSz6", “AluYc”、“AT_rich”、“Charlie5”、“ERVL-E-int”、“L1M5”、“L1MA8”、“L1MA9”、“L1MB5”、“L1P1”、“L1PA6”、“L2a”、“L2c” ", "LTR12F", "LTR16C", "MamRep1527", "MER45A”、“MER58A”、“MIR”、“MIR3”、“MIR3a”、“MIRb”、“MIRc”、“MLT1A”、“MLT1E1A”、“MLT1E1A-int”、“MLT1J2”、“(TAAA)n ", "TAR1", "(TC)n", "XXXXX"), class = "factor"), V11 = structure(c(10L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L , 14L, 11L, 9L, 13L, 12L, 13L, 13L, 3L, 12L, 3L, 3L, 4L, 9L, 13L, 12L, 1L, 4L, 4L, 9L, 9L, 12L, 9L, 4L, 12L, 8L , 8L, 6L, 3L, 11L, 3L, 3L, 3L, 5L, 7L, 2L, 1L), .Label = c("DNA/hAT-Charlie", "DNA/hAT-Tip100", "LINE/L1" 、“LINE/L2”、“Low_complexity”、“LTR”、“LTR/ERV1”、“LTR/ERVL”、“LTR/ERVL-MaLR”、“卫星/telo”、“Simple_repeat”、“SINE/Alu", "SINE/MIR", "XXXXXXXX"), class = "factor"), V12 = structure(c(19L, NA, NA, 5L, 5L, 5L, 5L, 5L, 5L, NA, 2L , 9L, 8L, 25L, 2L, 10L, 9L, 23L, 2L, 1L, 15L, 12L, 1L, 6L, 2L, 11L, 16L, 13L, 7L, 2L, 2L, 8L, 14L, 1L, 3L, 26L , 17L, 18L, 9L, 21L, 22L, 24L, 2L, 4L, 27L, 20L), .Label = c("(0)", "1", "(113)", "(115)", " (119)”、“(13)”、“131”、“173”、“2”、“218”、“2234”、“(231)”、“2705”、“2923”、“2970”、“ 3242”、“359”、“3715”、“(399)”、“(4)”、“5306”、“5334”、“5746”、“6167”、“67”、“(685)”、“ 7"), 类 = "因子"),V13 = c(1712L, NA, NA, 143L, 143L, 143L, 143L, 143L, 143L, NA, 162L, 96L, 349L, 217L, 298L, 238L, 216L, 6174L, 44L, 6154L, 3030L, 36, 4 255L, 133L, 2623L, 3375L, 2846L, 1489L, 172L, 301L, 666L, 3217L, 312L, 376L, 4982L, 499L, 5305L, 41L, 6290L, 5433L, 6280L, 24L, 404L, 178L, 220L), V14 = structure (c(23L, NA, NA, 24L, 24L, 24L, 24L, 24L, 24L, NA, 8L, 1L, 10L, 25L, 4L, 13L, 21L, 1L, 11L, 26L, 15L, 14L, 20L, 30L , 5L, 2L, 1L, 27L, 1L, 18L, 3L, 4L, 7L, 6L, 9L, 19L, 22L, 29L, 1L, 2L, 28L, 16L, 1L, 17L, 1L, 12L), .Label = c (“(0)”、“(1)”、“(11)”、“(14)”、“(179)”、“208”、“(209)”、“(212)”、“232” , “(25)”, “(255)”, “3”, “(30)”, “3049”, “(3116)”, “(32)”, “327”、“(388)”、“4016”、“41”、“(46)”、“(470)”、“483”、“49”、“(51)”、“5640”、“(573) )", "(691)", "(838)", "91"), 类 = "因子"), V15 = c(2L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L , 22L, 23L, 22L, 24L, 25L, 24L, 26L, 27L, 28L, 29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 38L, 38L, 39L, 38L, 37L, 40L, 41L , 42L, 43L, 44L, 45L, 44L, 46L, 47L, 48L, 49L, 50L, 51L)), .Names = c("V1", "V2", "V3", "V4", "V5", “V6”、“V7”、“V8”、“V9”、“V10”、“V11”、“V12”、“V13”、“V14”、“V15”），class =“data.frame”，行.names = c(NA,-46L))

编辑 4：对不起，这是简化版本：Initial Data.frame

> 输入（RMDB.cut）
> 
> 结构（列表（染色体=结构（c（1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L） , .Label = "chr1", class = "factor"), Start = c(10469L, 20001L, 20210L, 21000L, 21201L, 22000L, 22201L, 23000L, 23201L, 20000L, 20001L, 24001L, 24205L, 24201L, 24205L, , 30953L, 31293L, 31436L, 31734L), End = c(11447L, 20200L, 20400L, 21200L, 21400L, 22200L, 22400L, 23200L, 23400L, 20001L, 20200L, 24200L, 24400L, 24600L, 0L, 30952L, 31131L, 31435L, 31733L, 31754L),`(Left)`=结构（c（38L，37L，37L，37L，37L，37L，37L，37L，37L，37L，37L，37L，37L，37L，36L，35L，34L，33L，32L，31L），.Label = c (“(249203529)”、“(249203899)”、“(249204128)”、“(249204381​​)”、“(249204423)”、“(249204634)”、“(249204868)”、“(249205745)”、“ (249205786)"、"(249208117)"、"(249208336)"、"(249209743)"、"(249209892)"、"(249209995)"、"(249210327)"、"(249210697)"、"(249210998) )”、“(249211157)”、“(249212430)”、“(249212760)”、“(249213190)”、“(249215122)”、“(249215255)”、“(249215700)”、“(249216061)” , "(249216513)", "(249216580)"、"(249217112)"、"(249217165)"、"(249217584)"、"(249218867)"、"(249218888)"、"(249219186)"、"(249219490)"、"(249219669) )”, “(249219773)”, “(249235266)”, “(249239174)”), 类 = “因子”), 链 = 结构 (c(2L, 1L, 1L, 2L, 2L, 2L, 2L, 2L , 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("+", "C"), class = "factor"), repName = 结构(c(32L, 23L, 23L, 23L, 23L, 23L, 24L, 23L, 23L, 23L, 23L, 23L, 23L, 23L, 34L, 33L, 27L, 26L, 1L, 26L), .Label = c(" AluJo”、“AluJr”、“AluSx”、“AluSz6”、“AluYc”、“AT_rich”、“Charlie5”、“ERVL-E-int”、“L1M5”、“L1MA8”、“L1MA9”、“L1MB5”、“L1P1”、“L1PA6”、“L2a”、“L2c”、“LTR12F”、“LTR16C”、“MamRep1527”、“MER45A”、“MER58A” "、"MIR"、"MIR3"、"MIR3a"、"MIRb"、"MIRc"、"MLT1A"、"MLT1E1A"、"MLT1E1A-int"、"MLT1J2"、"(TAAA)n"、"TAR1" , "(TC)n", "XXXXX"), class = "factor"), ValidMerge = c(FALSE, TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, TRUE,假，假，假，假，假，假，假）），.Names = c（“染色体”，“开始”，“结束”，“（左）”，“链”，“repName", "ValidMerge"), row.names = c(NA, 20L), class = "data.frame")

以及合并后的输出

> 输入（RMDB.out.cut）
> 
> 结构（列表（染色体=结构（c（1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L，1L），.Label =“chr1”，类=“因子”），开始= c（“10469”，“20001”，“21000”，“22000”，“22201”，“23000”，“23201”，“20000”，“20001”，“24001” ，“0”，“30855”，“30953”，“31293”，“31436”，“31734”），结束= c（“11447”，“20400”，“21400”，“22200”，“22400”， “23200”、“23400”、“20001”、“20200”、“24600”、“0”、“30952”、“31131”、“31435”、“31733”、“31754”），`(Left)`=结构（c（38L，37L，37L，37L，37L，37L，37L，37L，37L，37L，36L，35L，34L，33L，32L，31L），.Label = c（“（249203529）”，“ (249203899)"、"(249204128)"、"(249204381​​)"、"(249204423)"、"(249204634)"、"(249204868)"、"(249205745)"、"(249205786)"、"(249208117) )”、“(249208336)”、“(249209743)”、“(249209892)”、“(249209995)”、“(249210327)”、“(249210697)”、“(249210998)”、“(249211157)” , “(249212430)”, “(249212760)”, “(249213190)”, “(249215122)”, “(249215255)”, “(249215700)”, “(249216061)”, “(249216513)”, “ (249216580)", "(249217112)"、"(249217165)"、"(249217584)"、"(249218867)"、"(249218888)"、"(249219186)"、"(249219490)"、"(249219669)"、"(249219773) )", "(249235266)", "(249239174)" ), class = "factor"), Strand = structure(c(2L, 1L, 2L, 2L, 2L, 2L, 1L, 2L, 1L, 1L, 1L , 1L, 1L, 1L, 1L, 1L), .Label = c("+", "C"), class = "factor"), repName = structure(c(32L, 23L, 23L, 23L, 24L, 23L , 23L, 23L, 23L, 23L, 34L, 33L, 27L, 26L, 1L, 26L), .Label = c("AluJo", "AluJr", "AluSx", "AluSz6", "AluYc", "AT_rich" ，“查理5”，“ERVL-E-int”，“L1M5”，“L1MA8”，“L1MA9”，“L1MB5”、“L1P1”、“L1PA6”、“L2a”、“L2c”、“LTR12F”、“LTR16C”、“MamRep1527”、“MER45A”、“MER58A”、“MIR”、“MIR3”、“MIR3a” 、“MIRb”、“MIRc”、“MLT1A”、“MLT1E1A”、“MLT1E1A-int”、“MLT1J2”、“(TAAA)n”、“TAR1”、“(TC)n”、“XXXXX”)、类 = “因子”），ValidMerge = c（假，真，假，真，假，假，假，假，假，假，假，真，真，假，假，假）），.Names = c（ “染色体”，“开始”，“结束”，“（左）”，“链”，“repName”，“ValidMerge”），row.names = c（“2”，“3”，“4”，“6”、“7”、“8”、“9”、“10”、“11”、“111”、“15”、“16”、“17”、“18”、“19”、“20” " ), class = "data.frame")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:45:57.237

我认为策略应该是生成另一个名为 DoMerge 的列 - 对于每一行 R_i（其中 i 的范围为 1 到 n-1），如果名称和链在 R_i 和 R_{i+1} 之间匹配，则 DoMerge 为 TRUE，并且 End 为R_i 足够接近 R_{i+1} 的 Start （在 100 以内，如果这是正确的值）。按照惯例，第 n 行的 DoMerge 为 FALSE。直观地说，DoMerge 为 TRUE 意味着将该行与下一行合并是有效的。

然后，我们将所有存在连续 TRUE 字符串的行合并在一起。如果我们同意这是最好的策略，我可以为此编写一些快速代码！:)

**更新：**

这是任务的代码，假设 mydf 是信息的数据框，其中包含 Name、Strand、Start 和 End 列...下面的输出是您需要合并的起点和终点——尽管一旦你知道了什么需要合并它应该是小菜一碟:)

```
distanceThresh = 100
isSameName=(mydf$Name==c(mydf$Name[-1],"void"))
isSameStrand=(mydf$Strand==c(mydf$Strand[-1],"void"))
isWithinDistance=(c(mydf$Start[-1],max(mydf$End)+2*distanceThresh)
                  -mydf$End) <= distanceThresh
validMerge = isSameName & isSameStrand & isWithinDistance

fthent=which(!validMerge & c(validMerge[-1],FALSE))
tthenf=which(validMerge & !c(validMerge[-1],TRUE))
startpt = fthent+1; if (validMerge[1]) {startpt=c(1,startpt)}
endpt = tthenf+1

instructions=NULL
for (kk in seq_along(startpt)) {
instructions = c(instructions,
               paste("Merge",startpt[kk],"to",endpt[kk],"inclusive",sep=" "))
} 
```

让我知道这一切是否有意义！:)

**合并方法（6 月 8 日）：**

像这样的东西怎么样（已经进行了一些测试，但不是在真实数据上）......

```
doMerge = unlist(mapply(function(x,y) {seq(x,y,1)},startpt,endpt))
doNotMerge = setdiff(seq_along(validMerge),doMerge)
dataMerged=data.frame(Name=RMDB$Name[startpt], Strand=RMDB$Strand[startpt],
                      Start=RMDB$Start[startpt], End=RMDB$End[endpt],
                      stringsAsFactors=FALSE)
dataUnmerged=RMDB[doNotMerge,] 
```

基本上`doMerge`告诉你需要合并的行（只需设置一个从每个`startpt`行到相应行的序列`endpt`）。并且`doNotMerge`是所有其他行（假设长度`validMerge`是数据的长度）。

然后`dataMerged`直接构造合并后的数据应该是什么样子 - 显然`Name`，是从 row 继承的，并且`Strand`是从 row继承的。（如果还有其他感兴趣的列，您必须确定它们来自哪里，显然......） 当然，其中的行数与and的长度相匹配。最后，是所有不符合合并条件的行。`Start``startpt``End``endpt``dataMerged``startpt``endpt``dataUnmerged`

希望以上所有内容都有意义，并且很明显，如果您组合`dataMerged`并`dataUnmerged`重新排序以使所有内容恢复到原始序列中（大概有一个索引列可用于此），那么您将获得所需的结果。

而且我希望上面的内容确实会运行得非常非常快:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:38:09.750

这是[GenomicRanges](http://bioconductor.org/packages/2.10/bioc/html/GenomicRanges.html)解决方案。第一步，只有一次，是安装包及其依赖项

```
source("http://bioconductor.org/biocLite.R")
biocLite("GenomicRanges") 
```

然后加载包并`GRanges`从您的数据创建一个实例，我已将其放入名为`df`

```
library(GenomicRanges)
gr = with(df, GRanges(Chromosome, IRanges(Start, End), Strand, repName=repName)) 
```

您的数据实际上有点复杂，一个“GRanges 列表”，其中每个列表元素都由一个基因定义，所以

```
grl = split(gr, values(gr)$repName) 
```

您希望`reduce`逐个元素地这样做，当相邻元素之间的最小间隙宽度为 100 时允许减小。所以

```
merged = reduce(grl, min.gapwidth=100L) 
```

您可以将其强制转换为`data.frame`with `as(merged, "data.frame")`。强制之前的结果看起来像

```
> merged
GRangesList of length 8:
$AluJo
GRanges with 1 range and 0 elementMetadata cols:
      seqnames         ranges strand
         <Rle>      <IRanges>  <Rle>
  [1]     chr1 [31436, 31733]      +

$MIR3
GRanges with 7 ranges and 0 elementMetadata cols:
      seqnames         ranges strand
  [1]     chr1 [20001, 20400]      +
  [2]     chr1 [23201, 23400]      +
  [3]     chr1 [24001, 24600]      +
  [4]     chr1 [20000, 20001]      -
  [5]     chr1 [21000, 21400]      -
  [6]     chr1 [22000, 22200]      -
  [7]     chr1 [23000, 23200]      - 
```

并且作为`data.frame`

```
> as(merged, "data.frame")
   element seqnames start   end width strand
1    AluJo     chr1 31436 31733   298      +
2     MIR3     chr1 20001 20400   400      +
3     MIR3     chr1 23201 23400   200      +
4     MIR3     chr1 24001 24600   600      +
5     MIR3     chr1 20000 20001     2      -
6     MIR3     chr1 21000 21400   401      -
7     MIR3     chr1 22000 22200   201      -
8     MIR3     chr1 23000 23200   201      - 
```

对于一百万行，排列成 100000 个基因，我们有

```
> length(grl)
[1] 100000
> table(elementLengths(grl))
    10
100000
> system.time(reduce(grl, min.gapwidth=100))
   user  system elapsed
  9.468   0.064   9.553 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:54:12.213

我将首先重新矢量化数据框 ( `df`) 中的不同列。做如下必要的操作，然后把它们放在一个`data-frame`

```
name_strand=paste(df$Name,df$Strand,sep=",")  #for grouping
st=df$Start
en=df$End
unq=unique(name_strand) #get the unique Name+Strand tags
ls1=list()
for(i in 1:length(unq)){
  index=which(name_strand %in% unq[i]) #get the index ids or group by unique Name+Strand 
  un_ls=unlist(strsplit(unq[i],split=","))
  ls1[[i]]=list(Name=un_ls[1],Strand=un_ls[2],Start=min(st[index]),End=max(en[index]))
}
df=as.data.frame(do.call(rbind, ls1)) 
```

`Name`因此，这也可以解决当您`Strand`在`data-frame`.

**编辑**：

由于您的问题存在疑问，我有一个修改后的解决方案，以防您想要`gap_distance`<100 并且还考虑到`data-frame`行可能没有排序。所以我的解决方案将这两个考虑在内（如果行已经按 and 的降序排列，您可以修改`Start`它`End`：

```
for(i in 1:length(unq)){
  index=which(name_strand %in% unq[i]) #get the index ids or group by unique Name+Strand 
  un_ls=unlist(strsplit(unq[i],split=","))
  #previous sol: ls1[[i]]=list(Name=un_ls[1],Strand=un_ls[2],Start=min(st[index]),End=max(en[index]))

  new_st=st[index] #new Start vector from the "st" vector for this group by name_strand
  new_en=en[index]
  new_st=new_st[order(new_st)] #when data-frame rows are not ordered:
  new_en=new_en[order(new_en)]  #"order" method gives the index in ascending order of START

  #using embed method to lag and taking the diff for checking with gap distance considerations
  gap_diff=embed(new_st,2)[,1]-new_en[-length(new_en)]  #subtract from End vector except the last element of End  
  a_ind_st=1 #index of new_st (Start) vector
  b_ind_en=1 #index of new_en (End) vector     
  ls_ind=1  #index for list
  for (j in 1:(length(new_en)-1)){  #also acts as the index for gap_diff
      if (gap_diff[j] < gap_distance){ #where gap_distance = 100 (consideration #2) < or <=
          b_ind_en=j+1
           if (j + 1 > length(new_en)-1){  #special case for last element in vector
              ls1[[ls_ind]]=list(Name=un_ls[1],Strand=un_ls[2],Start=new_st[a_ind_st],End=new_en[b_ind_en]))
              ls_ind=ls_ind+1 #increment list index
           }
       }else{
          ls1[[ls_ind]]=list(Name=un_ls[1],Strand=un_ls[2],Start=new_st[a_ind_st],End=new_en[b_ind_en]))
          ls_ind=ls_ind+1 #increment list index
          a_ind_st=b_ind_en+1
          b_ind_en=b_ind_en+1
      }      
   }
}
df=as.data.frame(do.call(rbind, ls1)) 
```

此修改将考虑所有因素。如果您不需要任何限制，您可以修改解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-13T21:50:08.807

也可以使用 来执行此操作`dplyr`，这可能更容易被其他人理解并且仍然不使用循环。

1.  将行分成具有相同`Name`和`Strand`使用的组`group_by`
2.  使用以下方法确定每个潜在组中的哪些行在最小间隙范围内`mutate`
3.  `group_by`然后使用和“合并”相邻的行`summarize`

输出中一定有错字，`dput`因为我无法让它工作，所以我使用了较小的示例数据集。

```
library(dplyr)

X <- tibble(
    id = c("R1", "R2", "R3", "R4"),
    Name = c("GeneA", "GeneA", "GeneA", "GeneB"),
    Strand = c("+", "+", "+", "-"),
    Start = c(1000, 1510, 2001, 3100),
    End = c(1500, 2000, 2500, 4000)
)
print(X) 
```

来自帖子的示例数据

```
# A tibble: 4 x 5
  id    Name  Strand Start   End
  <chr> <chr> <chr>  <dbl> <dbl>
1 R1    GeneA +       1000  1500
2 R2    GeneA +       1510  2000
3 R3    GeneA +       2001  2500
4 R4    GeneB -       3100  4000 
```

`dplyr`解决方案：

```
# Set max distance between strands
max_gap <- 100

X %>%

    # consider row groups with the same Name and Strand
    group_by(Name, Strand) %>%

    # logically identify rows that meet the closeness criteria 
    mutate(group_id = (!is.na(lag(End)) & (lag(End) - Start) < max_gap)) %>%

    # Sum over the logical identifier to create a group identifier on every row
    ungroup() %>%
    mutate(group_id = cumsum(!group_id)) %>%

    # Merge rows that are in the same group
    group_by(group_id, Name, Strand) %>%
    summarize(id = min(id), Start = min(Start), End = max(End)) %>%
    ungroup() %>%

    # Keep only the desired columns
    select(id, Name, Strand, Start, End) 
```

结果

```
# A tibble: 2 x 5
  id    Name  Strand Start   End
  <chr> <chr> <chr>  <dbl> <dbl>
1 R1    GeneA +       1000  2500
2 R4    GeneB -       3100  4000 
```

# json - 如何在 UITableView 上显示 JSON 数组

> ID：10926949
> 
> 赞同：-1
> 
> 时间：2012-06-07T06:48:30.193
> 
> 标签：json, uitableview, nsarray, nsdictionary, nsjsonserialization

JSON数据是这样的......

```
{"order_list_1":[
{"name":"@SEVEN (7) OCLOCK BLADE PLATINUM","qty":1,"mrp":0.0},
{"name":"ACT 2 POPCORN BUTTER PEPPER","qty":2,"mrp":0.0},
{"name":"ACT 2 POPCORN CHILLY SURPRISE","qty":3,"mrp":0.0},
{"name":"@MAGGI SOUP HOT N SOUR(1 1)","qty":4,"mrp":0.0},
{"name":"ACT 2 POPCORN GOLDEN SIZZLE","qty":5,"mrp":0.0},
{"name":"AMCHUR AAKHA 1kg","qty":6,"mrp":0.0}] 
```

}

json 数据显示在控制台上，但不在 tableview 上。

这是我的代码片段...

```
-(void)fetchData{

dispatch_async(bKQueue, ^{
    NSData *data = [NSData dataWithContentsOfURL:latestURL];

    NSLog(@"LatestURL:%@",latestURL);       
    NSError* error=nil;  

    //Creating JSON Object
    NSDictionary *jsonDict= [NSJSONSerialization JSONObjectWithData:data                                                      options:kNilOptions error:&error];

    NSLog(@"JSON = %@", [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);

    //NSLog(@"dataaaa :%@",jsonDict);

    //[self performSelectorOnMainThread:@selector(fetchData:) withObject:data waitUntilDone:YES];

    dispatch_async(dispatch_get_main_queue(), ^{

     //[self fetchData:responseData];
     [self.tableView reloadData];
     //NSLog(@"Value :%@",data);
     });

    NSDictionary *statuses=[jsonDict objectForKey:@"order_list_1"];

    NSLog(@"SomeStatus :%@",statuses);

    if (!statuses)
     {
        NSLog(@"Error in Json :%@",error);
     }
    else
    {

        for(NSDictionary *newValu in statuses)
    {

            NSString *name=[newValu objectForKey:@"name"];

            NSString *qty=[newValu objectForKey:@"qty"];

            NSString *mrp=[newValu objectForKey:@"mrp"];

            NSLog(@"Name :%@    Quantity :%@    MRP :%@ ",name,qty,mrp);
        }
    }

}); 
```

}

这是我的 Tableview 代码..

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ static NSString *CellIdentifier = @"Cell";

    ```
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

     cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    } 

    NSError *error=nil;         
    NSDictionary *jsonDict=[NSJSONSerialization JSONObjectWithData:responseData      options:kNilOptions error:&error];         
    NSArray *statuses=[jsonDict objectForKey:@"order_list_1"];              
    for (int i=0; i<jsonDict.count; i++) {        
        NSDictionary *newDict=[statuses objectAtIndex:i];                 
    NSLog(@"name :%@",[newDict valueForKey:@"name"]);    
    }
    NSDictionary *text=[statuses objectAtIndex:indexPath.row];    
    cell.textLabel.text=[text objectForKey:@"name"];    

    [self.tableView reloadData];
    return cell; 
    ```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:40:42.187

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        UITableViewCell *cell = [[UITableViewCell alloc]init];

        NSArray *geomery = [res objectForKey:@"results"];
        NSDictionary *item = [geomery objectAtIndex:indexPath.row];
        NSString *name = [item objectForKey:@"name"];
        //NSLog(name);
        //cell.textLabel.text =@"test" ;
        cell.textLabel.text= name;

        return cell;
    } 
```

这对我有用，检查字典索引是否正确发送

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T08:47:42.380

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }
    dictJson = [self.aryJson objectAtIndex:indexPath.row];
    cell.textLabel.text = [dictJson objectForKey:@"title"];
    cell.textLabel.text = [dictJson objectForKey:@""];

    return cell;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-21T11:15:49.857

尝试这个。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {

         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        } 

        NSError *error=nil;         
        NSDictionary *jsonDict=[NSJSONSerialization JSONObjectWithData:responseData      options:kNilOptions error:&error];         
        NSArray *statuses=[jsonDict objectForKey:@"order_list_1"];              
        NSDictionary *text=[statuses objectAtIndex:indexPath.row];    
        cell.textLabel.text=[text objectForKey:@"name"];    
        return cell;

} 
```

# c - IAT 挂钩 Internet Explorer

> ID：10926956
> 
> 赞同：1
> 
> 时间：2012-06-07T06:48:48.710
> 
> 标签：c, internet-explorer, winapi, hook, portable-executable

我正在尝试在 Internet Explorer 8（未在保护模式下运行）、Windows 7 x64 上使用 IAT Hooking。该代码也不适用于 WinXP 上的 IE7。我已经获得了指向存储函数地址的位置的指针。我正在添加我的代码片段，以使事情变得简单。

```
typedef int (WINAPI *_MessageBoxW)(HWND,LPCWSTR,LPCWSTR,UINT);
int WINAPI TestMessageBox(HWND,LPCWSTR,LPCWSTR,UINT); 
```

I 获取导入地址表和存储MessageBoxW地址的地址。

```
PIMAGE_THUNK_DATA pThunk = MakePtr(PIMAGE_THUNK_DATA, hMod, pImportDesc->FirstThunk);

PROC *pLocation=(PROC*)&(pThunk->u1.Function);
_MessageBoxW testVar1=&MessageBoxW; 
```

这里 *pLocation 的值与 testVar1 相同，所以我假设我得到了正确的地址

```
_MessageBoxW testVar2=&TestMessageBox; 
```

现在我使用 VirtualProtect 更改地址 PROC 的权限。这样做后，我用新地址覆盖它。

```
*pLocation=(PROC)testVar2; 
```

**我已经验证地址已成功更改，尽管这样做我的函数没有被调用。我有什么遗漏的吗？我已经粘贴了注入的 dll 的整个代码**

```
// injected.cpp : Defines the entry point for the DLL application.
//

#include "stdafx.h"
#include "injected.h"

#ifdef _MANAGED
#pragma managed(push, off)
#endif

BOOL APIENTRY DllMain( HMODULE hModule,DWORD  ul_reason_for_call,LPVOID lpReserved)
{
switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:
case DLL_THREAD_ATTACH:
case DLL_THREAD_DETACH:
case DLL_PROCESS_DETACH:
    break;
}
return TRUE;
}
#ifdef _MANAGED
#pragma managed(pop)
#endif

extern "C"{

INJECTED_API LRESULT CALLBACK fninjected(int code,WPARAM wParam,LPARAM lParam)
{
    if(gdi32Handle==NULL){
        GetBaseAddressOfModulesLoaded(ModuleBaseAddresses);
        MessageBox(NULL,L"Press ok to Debug",L"Alert!",MB_OK);//Used for Attching Debugger to IE

        PROC* pPROC=(PROC*)GetAddress(ModuleBaseAddresses,"MessageBoxW");
        _MessageBoxW ddd=&MessageBoxW;
        mbOrig=(_MessageBoxW)*pPROC;
        _MessageBoxW mbNew=&AshishMessageBox;
        if(ManipulateAddressPointer(pPROC,(PROC)mbNew)){
        }else{
            MessageBeep(!0x0);
        }

        //////////////////////////////////////////////////////////////////////////

        MessageBoxW(NULL,L"Dummy",L"Heeeeee",MB_OK);
        isProcessed=TRUE;
    }else{
        //A test function Comes Here, to check if the hook has been set or not;
    }
    //MessageBox(NULL,L"Hello World",L"Test",MB_OK);
    return CallNextHookEx(NULL,code,wParam,lParam);
}
}

int GetBaseAddressOfModulesLoaded(std::vector<HMODULE> &MBAddressVect){
int count=0;
size_t bytesRead=sizeof(MEMORY_BASIC_INFORMATION);
MEMORY_BASIC_INFORMATION mbi;
HMODULE hModIter;
wchar_t imageName[1024];
hModIter=GetModuleHandle(NULL);
if(hModIter==NULL){
    MessageBox(NULL,L"Failed to get Handle of Current Module",L"Error message",MB_OK);
}else{
    MBAddressVect.push_back(hModIter);
}
for(size_t lpAddress=0;bytesRead==sizeof(MEMORY_BASIC_INFORMATION);lpAddress+=mbi.RegionSize){
    memset(&mbi,0x00,sizeof(MEMORY_BASIC_INFORMATION));
    memset(&imageName,0x00,sizeof(imageName));
    bytesRead=VirtualQuery((LPCVOID)lpAddress,&mbi,sizeof(MEMORY_BASIC_INFORMATION));
    if(mbi.AllocationBase!=mbi.BaseAddress)continue;
    else if(!(mbi.State&MEM_COMMIT))continue;
    if(!mbi.BaseAddress)continue;
    hModIter=(HMODULE)mbi.BaseAddress;

    if(hModIter && GetModuleFileName(hModIter,imageName,1023)>0){

        /*
            Push all the module handles into the vector
        */

        if(!wcsstr(wcslwr(imageName),L"user32.dll")&&!wcsstr(wcslwr(imageName),L"gdi32.dll"))continue;
        else{
            MessageBox(NULL,imageName,L"Loaded DLL",MB_OK);
            gdi32Handle=hModIter;//This is messy
            MBAddressVect.push_back(hModIter);
            count++;
        }
    }
}
return count;
}

void* GetAddress(std::vector <HMODULE> BaseAddresses,char *OrignalFunctionName){
PIMAGE_THUNK_DATA pThunk = NULL, pOrigThunk = NULL;
PIMAGE_IMPORT_BY_NAME pAddressOfData = NULL;

for (std::vector<HMODULE>::iterator it = BaseAddresses.begin(); it!=BaseAddresses.end(); ++it) {
    HMODULE hMod=*it;
    PIMAGE_DOS_HEADER pDOSHeader = (PIMAGE_DOS_HEADER)hMod;
    if(pDOSHeader->e_magic!=0x5A4D){
        MessageBox(NULL,L"Not a Valid DOS Image",L"Error",MB_OK);
        return NULL;
    }else{
        //MessageBox(NULL,L"Valid DOS Image",L"Message",MB_OK);
    }
    PIMAGE_NT_HEADERS pNTHeader=MakePtr(PIMAGE_NT_HEADERS,pDOSHeader,pDOSHeader->e_lfanew);
    if(pNTHeader->Signature!=0x00004550){
        MessageBox(NULL,L"Not a Valid NT Image",L"Error",MB_OK);
        return NULL;
    }else{
        //MessageBox(NULL,L"Valid NT Image",L"Error",MB_OK);
    }
    PIMAGE_IMPORT_DESCRIPTOR pImportDesc = MakePtr( PIMAGE_IMPORT_DESCRIPTOR, hMod,pNTHeader->OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_IMPORT].VirtualAddress);
    if(!pImportDesc){
        MessageBox(NULL,L"Failed to get Import Descriptors",L"Error",MB_OK);
    }else{
        //MessageBox(NULL,L"Obtained Import Descriptors",L"Success",MB_OK);
    }
    while (pImportDesc->FirstThunk){
        pThunk = MakePtr(PIMAGE_THUNK_DATA, hMod, pImportDesc->FirstThunk); // updated by loader
        pOrigThunk = MakePtr(PIMAGE_THUNK_DATA, hMod, pImportDesc->OriginalFirstThunk); // unmodified by loader

        while (pOrigThunk->u1.Function){
            pAddressOfData = MakePtr(PIMAGE_IMPORT_BY_NAME, hMod, pOrigThunk->u1.AddressOfData);
            if (!IsBadReadPtr(pAddressOfData, sizeof(IMAGE_IMPORT_BY_NAME))) {
                char* funcName=(char*)pAddressOfData->Name;
                if(funcName){
                    if(strstr(funcName,OrignalFunctionName)){
                        MessageBox(NULL,L"Found",L"Success",MB_OK);
                        return(&(pThunk->u1.Function));
                    }
                }
            }
            pThunk++;
            pOrigThunk++;
        }
        pImportDesc++;
    }
}
}
int WINAPI AshishMessageBox(HWND wHandle,LPCWSTR text,LPCWSTR title,UINT type){
return mbOrig(NULL,L"you will always see this",L"No Matter What you try",MB_OK);
}

BOOL AshishExtTextOut(HDC hdc,int X,int Y,UINT fuOptions,const RECT *lprc,LPCWSTR lpString,UINT cbCount,const INT *lpDx){
MessageBox(NULL,lpString,L"Intercepted Text",MB_OK);
return etoOrig(hdc,X,Y,fuOptions,lprc,lpString,cbCount,lpDx);
}

BOOL ManipulateAddressPointer(PROC* pAddress,PROC location){
BOOL rv=FALSE;
if(IsBadWritePtr(pAddress,sizeof(PROC))){
    DWORD oldProtect;
    if(VirtualProtect(pAddress,sizeof(PROC),PAGE_READWRITE,&oldProtect)){
        *pAddress=location;
        DWORD test;
        if(VirtualProtect(pAddress,sizeof(PROC),oldProtect,&test)){
            rv=TRUE;
        }
    }else{
        MessageBox(NULL,L"Fail",L"Error message",MB_OK);
    }
}
else{
    //MessageBox(NULL,L"Memory Is Writable",L"Error message",MB_OK);
    *pAddress=location;
}
return rv;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:35:39.610

IE7 可能会调用原始版本`MessageBoxW`而不会进入您的手中。这里是其中的一些：

1.  IE7 在由多个模块（EXE + DLL）组成的进程中运行。IAT 挂钩通过修补特定模块的导入表来工作。你确定你修补**了所有**的模块，没有任何例外吗？顺便说一句，某些模块可能会稍后加载（在您修补之后）。
2.  `MessageBoxW`可以不使用导入的符号进行调用。一个人可能会得到它的地址`GetProcAddress`。
3.  可以存储`MessageBoxW`（在某个变量中）的地址，并在以后使用它来调用它。因此，如果您在收到其地址后进行修补-它将无法正常工作。
4.  可以避免使用`MessageBoxW`. 相反，它可能会从 User32/64.dll 调用另一个较低级别的函数，该函数通常由 .dll 调用`MessageBoxW`。

首先你应该知道为什么你没有被叫到。运行 IE7，当它显示一个消息框时 - 通过调试器连接到它，然后执行“Break all”。然后查看调用堆栈。如果您在某个时候看到`MessageBoxW`- 第四种情况不相关。然后看看它是怎么称呼的。也许您会发现哪个模块（EXE 或 DLL）调用了它，以及如何调用它。

此外，为了避免 1 和 2 - 您应该始终修补以下功能：

*   `LoadLibraryA`
*   `LoadLibraryW`
*   `LoadLibraryExA`
*   `LoadLibraryExW`
*   `GetProcAddress`

# php - 致命错误：调用未定义的方法 stdClass::save()

> ID：10926957
> 
> 赞同：-4
> 
> 时间：2012-06-07T06:48:51.347
> 
> 标签：php, model, yii

当我需要更新时，我会收到这个答案。我该做什么？

```
public function actionUpdate($id)
{       
    if(isset($_POST['submit']))
    {
        $recruit = Recruit::model()->findByPk($_POST['pid']);
        $recruit->title = $_POST['title'];
        $test->save();
            $this->redirect(array('admin','id'=>$id));              
    }

    $this->render('update',array(
        'model'=>$this->loadModel($_POST['pid']),
        'id'=>$id,
        'pid'=>$_POST['pid'],
    ));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T06:49:49.863

没有`$test`创建类实例，我认为您必须使用`$recruit`

```
 $test->save();
 //to
 $recruit->save(); 
```

# android - 图像视图边框

> ID：10926960
> 
> 赞同：0
> 
> 时间：2012-06-07T06:49:03.203
> 
> 标签：android, android-imageview

我想为我从 sd 卡检索到的图像并显示在网格视图中的图像视图安排边框。我的默认应用程序看起来像这样没有边框的图像![在此处输入图像描述](../Images/25bce5dced7bdea4b3ed98005714b00a.png)

但我想为应该看起来像这样的屏幕修改它包括带边框的图像 ![在此处输入图像描述](../Images/c08c63becf55b3b9871a71c4ae96767c.png)

请给我解决方案。我已经为我的 ImageAdapter.java 发布了代码

导入 java.util.ArrayList；

```
public class ImageAdapter extends BaseAdapter 
{
    public static ArrayList<Images> array=new ArrayList<Images>();

    Context mContext; 
    private LayoutInflater mInflater; 

    public ImageAdapter(Context c,ArrayList<Images> arr) 
    {
        mContext = c;  
        array=arr;
        mInflater = LayoutInflater.from(mContext);
        Log.e("","adapter con");
    }

    public int getCount()
    {
        Log.e("Count",""+array.size());
        return array.size();
    }

    public Object getItem(int index)
    {
       // return 0;
        return array.get(index);
    } 

    public long getItemId(int index) 
    {

        return index;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        GridView.LayoutParams layoutParams = new GridView.LayoutParams(80, 80);

        ImageView imageView = new ImageView(mContext);

        Images i=array.get(position);
        imageView.setImageBitmap(i.getBitmap());

        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.animate();

        return imageView;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T06:51:07.387

可以尝试 .. setBackgroundResource of image view with padding 2dp ........ 看起来一样......

或者

根据下面的链接找到更标准的方式

view_default.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="#FFFFFF" />
<stroke android:width="1dp" android:color="#000000" />
<padding android:left="1dp" android:top="1dp" android:right="1dp"
    android:bottom="1dp" />
</shape> 
```

并将其也用于[将边框设置为动态图像视图](https://stackoverflow.com/questions/7084930/set-border-to-imageview-dynamically)

v.setBackgroundResource(R.drawable.view_default);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:51:57.027

您可以在 xml 中设置背景并最初为 ImageView 设置填充。稍后，只需调用 setBackground 即可按照您想要的方式设置背景。

```
 <ImageView  android:id="@+id/user_image"
    android:layout_width="75dip"
    android:layout_height="75dip"
    android:padding="2dip"
    android:background="ffffff"/> 
```

或者

```
 image.setPadding(2, 2, 2, 2);
    image.setBackgroundColor(Color.WHITE); 
```

然后

像这样设置比例类型，

```
image.setScaleType(ScaleType.FIT_XY);
image.setBackgroundResource(R.drawable.icon); 
```

# android - Android NDK 头文件不存在

> ID：10926961
> 
> 赞同：1
> 
> 时间：2012-06-07T06:49:04.683
> 
> 标签：android, header, android-ndk

我想通过使用 Android NDK 在 Android 上使用 GIO（它是 GLIB 的一部分）。GIO 的头文件似乎是 Android 源代码的一部分。但它们不随 NDK 一起提供。有没有办法将这些头文件带到 NDK。

换句话说，我的问题是。Android源代码有一个库的头文件。但是这些头文件在 Android NDK 中不存在。如何将这些头文件安装到 NDK 中。

ps：换安卓平台没问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:47:55.077

仅下载头文件是行不通的，因为您需要定义函数您需要做的是

-> 可以从[这里](https://github.com/ieei/glib)下载 GLIB for android 的源代码，将其放在 /PROJECT_HOME/jni 中，

-> 构建共享库并在构建主库时包含它（使用 LOCAL_SHARED_LIBRARIES。也不要忘记在主 Android.mk 中包含此包含 $(call all-subdir-makefiles)）

# c# - 文件上传控件在 ipad 上不起作用

> ID：10926963
> 
> 赞同：0
> 
> 时间：2012-06-07T06:49:28.130
> 
> 标签：c#, asp.net, ipad

我有一个网络应用程序，我想在其中上传图像。它在 Windows 上工作正常，但在 iPad 上无法访问文件上传控制。

你能告诉我什么是问题以及我如何解决这个问题..

```
 <input id="file3" type="file" runat="server" name="file3" class="textfield" style="WIDTH: 221px; HEIGHT: 20px;" size="17"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:54:26.350

IOS 不支持访问文件系统。因此，`<input type="file" />`Mobile Safari 将忽略您页面上的任何元素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T06:57:35.623

要访问 IOS 文件系统，请按照下列步骤操作：

1.)首先创建一个IOS应用程序。

2.）然后访问该特定应用程序并上传文件。

要遵循此程序，请参阅此[链接](http://picupapp.com/)

希望对您有所帮助。

# javascript - 从 jQuery 或 JS 中的 json 对象中提取数据

> ID：10926965
> 
> 赞同：11
> 
> 时间：2012-06-07T06:49:39.847
> 
> 标签：javascript, jquery, json

我想使用[https://raw.github.com/currencybot/open-exchange-rates/master/latest.json提供的货币数据](https://raw.github.com/currencybot/open-exchange-rates/master/latest.json)

作为初始测试，我创建了一个精简版作为内联对象：

```
var obj = [
{
    "disclaimer": "This data is collected from various providers and provided free of charge for informational purposes only, with no guarantee whatsoever of accuracy, validity, availability, or fitness for any purpose; use at your own risk. Other than that, have fun! More info: http://openexchangerates.org/terms/",
    "license": "Data collected from various providers with public-facing APIs; copyright may apply; not for resale; no warranties given. Full license info: http://openexchangerates.org/license/",
    "timestamp": 1339036116,
    "base": "USD",
    "rates": {
        "EUR": 0.795767,
        "GBP": 0.645895,
        "JPY": 79.324997,
        "USD": 1
    }
}]; 
```

我想要做的就是以某种方式查询/grep/过滤json对象，例如，“EUR”作为标准，并让它返回一个名为“rate”的变量，结果为“0.795767”。

我查看了 JQuery grep 和 filter 函数，但我不知道如何仅隔离对象的“rates”部分，然后获得我想要的速率。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-07T06:51:52.690

```
var obj = [
{
    "disclaimer": "This data is collected from various providers and provided free of charge for informational purposes only, with no guarantee whatsoever of accuracy, validity, availability, or fitness for any purpose; use at your own risk. Other than that, have fun! More info: http://openexchangerates.org/terms/",
    "license": "Data collected from various providers with public-facing APIs; copyright may apply; not for resale; no warranties given. Full license info: http://openexchangerates.org/license/",
    "timestamp": 1339036116,
    "base": "USD",
    "rates": {
        "EUR": 0.795767,
        "GBP": 0.645895,
        "JPY": 79.324997,
        "USD": 1
    }
}];

obj[0].rates.EUR; // output: 0.795767 
```

或者

```
obj[0].rates['EUR']; output: //0.795767 
```

**[演示](http://jsfiddle.net/2wadj/2/)**

如果您想在另一个变量中隔离费率并使用该变量，请尝试如下操作：

```
var rates = obj[0].rates; 
```

现在，

```
rates.EUR;
rates.GBP; 
```

等等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T07:02:00.737

您还可以使用`JSON.parse()`Javascript 的功能将 JSON 字符串转换为 Javascript JSON 对象。

```
var JSONObject = JSON.parse("{'value1' : 1, 'value2' : 2}");
console.log(JSONObject.value1);  // Prints '1'.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-25T07:42:48.267

数据包含 FRELD6 尝试：

```
var reldte;
var sdata = JSON.parse(data);
 $(sdata).each(function () {
        reldte = RefineDate(this.FRELD6.toString());
} 
```

# mp3 - MP3帧的标记？

> ID：10926967
> 
> 赞同：2
> 
> 时间：2012-06-07T06:49:47.697
> 
> 标签：mp3, file-format

我想问一下每个 MP3 帧的标记字节？我们如何知道它是来自 MP3 的帧？在一些文章中说每个帧头的标记是Hexa（FF FB）。这是真的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T16:47:12.640

所有 MP3 帧的开头都有一个同步字标记。该同步字长 11 位，全为 1。因此 MP3 帧将以 FFF 或 FFE 开头。有关MP3 帧结构的更多[详细信息](http://www.mp3-tech.org/programmer/frame_header.html)，请参见下面的链接

这并不意味着任何以 0xFFE 或 0xFFF 开头的字节序列都是 MP3 帧头。可能还有许多其他情况
(a) 其他格式，如 ADTS(AAC) 也有类似的同步字。ADTS 框架的更多细节在[这里](http://wiki.multimedia.cx/index.php?title=ADTS)。
(b) MP3 帧内的数据也可以包含 FFF/FFE 序列。

因此，确定字节序列是否为 MP3 的最佳方法是执行以下操作
(o) 搜索同步字 (FFF 或 FFE) 序列
(o) 通过在同步字之后解析头块来查找帧的长度
(o) 搜索按帧长度文件，看看是否有另一个同步字。
如果是 MP3 文件，那么您应该在将帧长度添加到当前同步字后找到另一个同步字。

# ios - 子视图调整为全屏

> ID：10926968
> 
> 赞同：0
> 
> 时间：2012-06-07T06:49:48.680
> 
> 标签：ios, uiview, uinavigationcontroller, uipinchgesturerecognizer

我在 UINavigationcontroller rootview 中有子视图，动画并将其调整为全屏的最佳方法是什么？我为此子视图和 [UIView animateWithDuration] 方法使用 UIPinchGestureRecognizer，但视图的大小没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:12:45.093

请执行下列操作

```
- (IBAction) didPinch:(UIButton*)button
{
    UIView *yourView; //this is the view you want to expand

    [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1];
    yourView.frame = [[UIApplication sharedApplication].windows.lastObject frame];
    [UIView commitAnimations];
} 
```

# css - impress.js demo的背景如何去掉圆圈

> ID：10926971
> 
> 赞同：0
> 
> 时间：2012-06-07T06:49:54.967
> 
> 标签：css, impress.js

我刚刚查看了 impress.js 演示，它似乎是一个强大的工具。我对 CSS 不是很有经验，我想使用附加的 CSS 作为模板。

但是演示文稿的背景中有一个黄色圆圈/椭圆，我无法弄清楚 CSS 的哪个部分对此负责。

那么如何删除/修改这个背景图呢？

**编辑（已解决）**

我试图附加截图。但是在上传的时候，截图中没有黄圈。原来是我的辅助屏幕有问题。在主屏幕上看起来很完美。

我的视频驱动程序/屏幕硬件似乎有问题。

对不起大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:02:29.130

假设您指的是中心的“聚光灯”，它是由应用于文档的 CSS 渐变生成的`body`：

```
body {
    /* ... */
    background: -webkit-gradient(radial, 50% 50%, 0, 50% 50%, 500, from(#F0F0F0), to(#BEBEBE));
    background: -webkit-radial-gradient(#F0F0F0, #BEBEBE);
    background: -moz-radial-gradient(#F0F0F0, #BEBEBE);
    background: -ms-radial-gradient(#F0F0F0, #BEBEBE);
    background: -o-radial-gradient(#F0F0F0, #BEBEBE);
    background: radial-gradient(#F0F0F0, #BEBEBE);
} 
```

省略这些规则，你就可以开始了。

**参考：**

*   [在 Mozilla 开发者网络上使用 CSS 渐变](https://developer.mozilla.org/en/Using_gradients)
*   [CSS-Tricks 上的示例](http://css-tricks.com/examples/CSS3Gradient/)
*   [CSS-Tricks 文章关于在图像上使用 CSS 渐变在性能方面的盈利能力](http://css-tricks.com/css3-gradients/)
*   [ColorZilla 上类似 Photoshop 的 CSS 渐变生成器](http://www.colorzilla.com/gradient-editor/)

# asp.net-mvc - 如何在分页中保留复选框：PagedList

> ID：10926976
> 
> 赞同：2
> 
> 时间：2012-06-07T06:50:25.183
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在我的控制器中，我有

```
 var myTempModel = (from f in db.BA_TEMP_RESHOP_IMPORT
                       where f.WCCR_ID == WccrId
                       select new DataImportViewModel
                       {
                        //Set properties…
                       });

return View(myTempModel.ToPagedList(currentPage,
               maxRecords)); 
```

任何我当前的 ViewModel

```
 public class DataImportViewModel
    {

        public string WccrId { get; set; }
        public string Status                { get; set; }
        public string Note { get; set; }

    } 
```

我的视图模型参考是。

```
@model  PagedList.IPagedList<Proj.ViewModels.DataImportViewModel> 
```

每个项目都使用 displayFor。这工作正常，但现在我需要添加一个复选框，在分页中保留它的值

我想在页面顶部添加一个复选框，而不是应用于从 DataImportViewModel 返回的每一行。

我认为有两种方法可以做到这一点，但不确定如何实现，也不确定哪种方法最好。是创建一个新的 viewModel 还是将复选框值传递给会话变量更好？

我尝试创建一个这样的新视图模型，但不知道如何更改我的返回 View(...) 代码，甚至不知道我应该在视图中为 @model 使用什么。

```
public class DisplayViewModel
{
    public IEnumerable<DataImportViewModel> dataImport { get; set; }
    public Boolean useDefault { get; set; }
} 
```

在此先感谢您的帮助。如果有任何我可能遗漏的有用信息，请告诉我。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:08:01.750

我做了类似的事情：
Exetnd你的PagedList实体（我想那是你存储数据的地方，如页码，每页记录的nr，排序方向等）与布尔字段......当你传递页面的nr时'在...您还将布尔版本发送回控制器，这样您就可以将值传递给复选框。
不要忘记更新目标 div（targetdiv= 您的实体在视图中显示的 div）。我的解决方案涉及到这样的事情：

```
public class GridModel<T> : GridOperations
    {
        // Constructor
        public GridModel()
        {
            // Define any default values here...
            this.PageSize = 20;
            this.NumericPageCount = 20;
        }
    public IEnumerable<T> Data { get; set; } 
```

并将数据传递给我的模型，如下所示：

```
@model  Proj.ViewModels.GridModel<Proj.ViewModels.DataImportViewModel> 
```

在网格操作类中，我实现了许多互补的值（例如搜索文本框的字符串，状态：活动/非活动......等）以及您看到的那些（页面大小，数字页面计数，排序方向，排序依据等）。从我的角度来看，这更有意义..但我可能有偏见:)。如果您无法在 DataImportViewModel 中传递该值，我建议您修改我的网格思维

# c# - ASP.NET 中的可编辑下拉列表

> ID：10926977
> 
> 赞同：1
> 
> 时间：2012-06-07T06:50:32.343
> 
> 标签：c#, asp.net, drop-down-menu

我正在寻找一个下拉菜单，其中将向用户显示一个下拉菜单，当用户从下拉菜单中选择一个值时，他/她可以编辑所选值的文本，有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:20:15.843

You can use J Query User interface library for that(http://jqueryui.com/demos/autocomplete/):

```
var list = [
        "To Print",
        "Test"
    ];

$("#RefrenceNo").autocomplete({
        source: list 
    });

<div class="field">
    <label id="RefrenceNo-label">Reference No</label>
    <input id="RefrenceNo" name="RefrenceNo"/>
</div> 
```

# android - Android 无法连接到 .net 网络服务

> ID：10926983
> 
> 赞同：0
> 
> 时间：2012-06-07T06:50:59.660
> 
> 标签：android, soap

我正在尝试将 Web 服务与我的 android 应用程序连接，但在声明 SoapObject 时出现错误。请帮我解决它们！非常感谢。这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final String Soap_Action = "http://huroid.com/AndroidGetAllUser";
    final String Soap_MethodName = "AndroidGetAllUser";
    final String Soap_NameSpace = "http://huroid.com/";
    final String Soap_URL = "http://huroid.com/UserService.asmx?op=AndroidGetAllUser";

    //CallService
    try{

        SoapObject request = new SoapObject(Soap_NameSpace, Soap_Action);
    }
    catch(Exception e){
        Toast.makeText(this, "Error", Toast.LENGTH_LONG);
    }

    adpUser.notifyDataSetChanged();

} 
```

并且在这一行发生错误：

```
SoapObject request = new SoapObject(Soap_NameSpace, Soap_Action); 
```

我不了解识别肥皂名称空间和方法的方法。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:11:04.633

输入 [http://huroid.com/UserService.asmx?wsdl](http://huroid.com/UserService.asmx?wsdl)

在任何网络浏览器中，您都会看到可用的方法和带有方法参数和返回类型的肥皂命名空间信息。

这是你要问的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:37:32.440

您可以尝试以下格式：

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
```

喜欢：

```
 SoapObject request = new SoapObject(Soap_NameSpace, Soap_MethodName); 
```

笔记：

```
+ replace Soap_Action with Soap_MethodName
+ Soap_Action = Soap_Namespace + Soap_MethodName 
```

# php - 使用zend_search_lucene 时何时调用优化函数？

> ID：10926985
> 
> 赞同：0
> 
> 时间：2012-06-07T06:51:09.270
> 
> 标签：php, symfony1, full-text-search, zend-search-lucene

我正在使用 zend_search_lucene 索引文档，并且在调用优化函数时陷入困境。

请让我知道是否要在索引后或搜索时调用优化功能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:44:37.163

你不需要那么频繁地调用它。根据您的索引更改的速度，您可以每隔几个小时或几天调用一次。我通常有一个每天一次的 cronjob 来进行索引优化。

# java - java中的打卡时钟

> ID：10926990
> 
> 赞同：0
> 
> 时间：2012-06-07T06:51:34.620
> 
> 标签：java, jdbc

我正在从事一个个人项目，在 java 中创建一个打卡钟。由于将有几个用户打卡进出我创建了一个`JTextField`用户将在其中键入他们的位置`ID number`以及当他们单击`button(jButton1)`程序时应该做两件事。

1.  应该通过数据库 JDBC 的列查找 ID 号和
2.  一旦找到 ID 号，程序应将当前时间复制到打卡或下班记录中，否则会显示错误消息，例如“找不到 ID 号”。

这是我的想法，我在谷歌的帮助下自己学到了一些东西。但是，我找不到这部分，任何帮助/方向都表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:58:13.047

您应该使用 a[`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)来执行数据库操作。由于您已经在使用 JDBC，因此请使用`PreparedStatement`并执行您的查询来获取结果。

如果发现结果用当前时间更新数据库，您可以通过调用以毫秒为单位获取当前时间`System.currentTimeInMillis()`

一旦您的工作人员完成其操作，然后向 UI 显示适当的消息。

1.[如何使用PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

2.[使用 SwingWorker 进行数据库操作的示例实现](https://stackoverflow.com/questions/10620448/most-simple-code-to-populate-jtable-from-resultset/10623543#10623543)

考虑到 ID 来自 a `JTextBox`，使用`PreparedStatement`如下：

```
String sql = "SELECT FIRST_NAME, LAST_NAME, HOURS FROM WORKERS WHERE ID= ?";
PreparedStatement pstmt = connection.prepareStatement(sql);
pstml.setInt(1, 007859378);
ResultSet rs = pstmt.executeQuery();

while(rs.next()){
   //Extract values from ResultSet
} 
```

这样您就可以防止自己遭受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，还可以阅读[Prepared Statement 如何帮助对抗 SQL 注入](https://stackoverflow.com/questions/678400/sql-injections-with-prepared-statements)

# android - 从 codeus.net 实现 DateSlider

> ID：10926994
> 
> 赞同：0
> 
> 时间：2012-06-07T06:51:45.467
> 
> 标签：android, android-widget

当我尝试导入项目时，它不起作用。没有找到项目文件。我接下来所做的是尝试构建自己的应用程序并包含此处提到的文件[https://github.com/bendemboski/DateSlider](https://github.com/bendemboski/DateSlider)但作为应用程序面临一些 xml 错误：无法识别。这个 DateSlider 看起来很酷，如果有人知道我该如何实现，那将是非常棒的帮助。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:29:25.673

我用过，它很流畅，但我不得不做出改变（我在第一次学习的时候就用过它，所以可能有更简单的方法，但我没有回去重新-访问它）。

1）将所有文件复制到自己的包中（src，res和values的内容到各自的文件夹中）。将所有`src`文件放入主包中（不包括 zip 文件中的所有子目录）。

2) 编辑所有布局*和*源文件以删除对旧包/应用程序名称的引用并将其替换为您的包。基本上用 替换任何`com.googlecode.android.widgets.DateSlider`出现`com.yourpackage.name`。

一个例子： `com.googlecode.android.widgets.DateSlider.SliderContainer`变得`com.yourpackage.name.SliderContainer`等等。

3) 检查演示并根据演示程序中的示例设置对话框。

这是在行动：

![在此处输入图像描述](../Images/631dd826a13962fe26a0892b01f0b0f4.png)