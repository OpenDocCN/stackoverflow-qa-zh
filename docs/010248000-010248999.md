# StackOverflow 问答 10248000-10248999

# java - Spring接口注入示例

> ID：10248000
> 
> 赞同：38
> 
> 时间：2012-04-20T14:16:01.807
> 
> 标签：java, spring, dependency-injection, interface

到目前为止，没有人能够在 Spring Framework 中提供一个正确的接口注入示例。

Martin Fowler 的文章不适合凡人，其他一切都只是以非常混乱的方式定位的文字。我浏览了 30 篇文章，人们要么告诉“Spring 不直接支持接口注入”（“而且因为我不知道我将如何仅描述 setter 和构造函数注入”）或者“我将讨论它”在我的其他线程中”或者下面很少有评论说这是错误的例子。我不要求解释，例如我BEG。

**注入分为三种类型：构造函数、设置器和接口。Spring 不直接支持最新的（正如我观察到人们所说的那样）。那么具体是怎么做的呢？**

谢谢你，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-07-06T11:41:09.910

根据[春季DI的变体](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-collaborators)

> DI 存在两种主要的变体，基于构造函数的依赖注入和基于 Setter 的依赖注入。

另请参阅[接口注入未在 Spring 中实现](http://www.springbyexample.org/examples/core-concepts-dependency-injection-to-the-rescue.html)明确说明。

所以DI只有两种变体。因此，如果文档没有说明接口注入，很明显它不存在。那些认为接口注入是通过在接口中提供setter方法来完成的人回答我：

1.  为什么 spring ref doc 提到了接口注入？
2.  为什么不能通过提供**不**被视为 setter 注入本身的 setter 方法来接口注入。为什么要在引入接口不影响任何东西时为此创建特殊术语，我的意思是它仍然以相同的方式配置。如果它们不同，那么如何通过查看配置找到它。在配置中并没有看到实际配置的类实现某个接口的 impl 不应该是透明的吗？
3.  就像[使用实例工厂方法的](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-class-instance-factory-method)实例化和[使用静态工厂方法](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-class-static-factory-method)的实例化一样，一些bean属性应该澄清接口注入？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-20T14:37:08.343

通过接口注入，接口显式定义了可以设置依赖项的点：

```
interface InjectPerson {
    public void injectHere(Person p);
}

class Company implements InjectPerson {
   Person injectedPerson; 

   public void injectHere(Person p) {
        this.injectedPerson = p;
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-04T10:14:32.407

嗨，我尝试了一种非常简单的方法，可以澄清您的答案。

以下是我使用两个接口和两个 bean 类构建的代码。

第一个名为 Job 的接口。

```
public interface Job {
    public void setmyJob(String myJob);
    public String getmyJob();
} 
```

和一个类来实现这个接口，名称为 MyJob

```
public class MyJob implements Job {
    public String myJob;

    public MyJob() {
        System.out.println("From MyJob default Constructor and the ID= "+this);
    }

    public void setmyJob(String myJob) {
        this.myJob=myJob;
    }

    public String getmyJob() {
        return myJob;
    }
} 
```

在下一步中，我创建了另一个名为 Service 的接口

```
public interface Service {
    public void setJob(Job job);
    public Job getJob();
} 
```

然后另一个类来实现这个服务接口。

```
public class MyService implements Service {

    public Job job;

    public void setJob(Job job) {
        this.job=job;
        System.out.println("Hello from Myservice: Job ID="+job);
    }

    public Job getJob() {
        return job;
    }
} 
```

然后我用 main 函数在主类上创建并编写代码如下：

```
import org.springframework.beans.factory.BeanFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
public class MainApplication {

    public static void main(String...a) {

        BeanFactory beanfactory=new ClassPathXmlApplicationContext("Beans.xml");

        MyService myservice=(MyService)beanfactory.getBean("myservice");
        System.out.println("Before print");
        System.out.println(myservice.getJob().getmyJob());
    }
} 
```

在我的 Beans.xml 文件中，我提到了如下代码并且它有效。

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
 http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="myjob" class="MyJob">
        <property name="myJob" value="My First String"/>
    </bean>

    <bean id="myservice" class="MyService">
        <property name="job" ref="myjob"/>
    </bean>
</beans> 
```

我也参考了另一个在线教程，然后得到了这种解决方案。如果您对此代码有任何问题，请告诉我。它对我有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-11T11:46:42.217

依赖注入有 3 种类型：-

```
1\. Constructor Injection(E.g Pico Container, Spring supports it).
2\. Setter Injection(E.g Spring supports it).
3\. Interface Injection(E.g Avalon, Spring does not support it). 
```

Spring 仅支持基于构造函数和设置器的注入。看起来你对不同的类型（3）和弹簧支持的东西（其中 2 个）感到困惑。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-23T11:19:49.713

我认为，围绕接口注入的混淆是由于误解了“接口注入”一词的实际含义。在我的理解中，接口注入描述了 bean 竞争者向 bean 注入新接口的能力，不管这个 bean 的类定义没有实现它。

这里介绍的所有示例都展示了如何从具体类中创建一个 bean，然后如何将它注入另一个 bean。事实上，在所有情况下，bean 都被注入到定义为接口的字段中，这并不重要——所有操作都是使用由具体实例创建的 bean 完成的。

我还可以提供另一个吸引人的例子：

```
package creditCards;

interface PaymentCard {
    Boolean isDebitAllowed();
}

   <bean id="card" class="creditCards.PaymentCard">
      <lookup-method name="isDebitAllowed" bean="boolValue"/>
    </bean>

    <bean id="boolValue" class="java.lang.Boolean">
        <constructor-arg type="boolean" value="true"/>
    </bean> 
```

正如您在此处看到的，甚至可以从接口创建一个 bean！尽管如此，它不是接口注入，因为 IoC 竞争者自己初始化了这个 bean 的实例。换句话说，`card`bean 是一个初始化的对象，而不是一个接口，这使得这个问题的选择答案是正确的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-28T13:29:47.397

[我想有人在这里](https://softwareengineering.stackexchange.com/questions/163175/difference-between-spring-setter-and-interface-injection)回答了你的问题 我也不知道接口注入是什么，直到我从“Pro Spring MVC with web flow book”中阅读了这个声明

“请注意，Spring 框架不支持基于接口的依赖注入。这意味着我们需要指定为某个接口注入哪个具体实现。”

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-15T06:17:57.393

请检查以下示例以进行 iterface 注入。

有一个形状接口和 2 个具体的类来实现形状，即正方形和矩形。

界面

```
package di.interfaceinjection;
public interface Shape {
    public String shapeName();
    public void displayName();
} 
```

2 实现类

```
package di.interfaceinjection;

public class Square implements Shape {

    @Override
    public String shapeName() {
        return "Square";
    }

    @Override
    public void displayName() {
        System.out.println("Square");       
    }

}

package di.interfaceinjection;

public class Rectangle implements Shape{

    @Override
    public String shapeName() {
        return "Rectangle";
    }

    @Override
    public void displayName() {
        System.out.println("Rectangle");        
    }

} 
```

现在，我们有一个设置形状的类。

```
public class ShapeSetter {

    private Shape shape;

    public Shape getShape() {
        return shape;
    }

    public void setShape(Shape shape) {
        this.shape = shape;
    }

} 
```

最后是配置

```
<bean id="shape1" class="di.interfaceinjection.ShapeSetter">
    <property name="shape" ref="square"></property>
   </bean>
    <bean id="shape2" class="di.interfaceinjection.ShapeSetter">
    <property name="shape" ref="rectangle"></property>
   </bean>
   <bean id="square" class="di.interfaceinjection.Square"></bean>
   <bean id="rectangle" class="di.interfaceinjection.Rectangle"></bean> 
```

这里，

我们正在注入不同的形状。

```
package di.interfaceinjection;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class InterfaceInjeection {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ApplicationContext appContext  = new ClassPathXmlApplicationContext("intro.xml");
        ShapeSetter shape = (ShapeSetter)appContext.getBean("shape2");
        shape.getShape().displayName();
    }

} 
```

# silverlight - windows phone 中如何让滑块控件直接跳转？

> ID：10248002
> 
> 赞同：1
> 
> 时间：2012-04-20T14:16:06.697
> 
> 标签：silverlight, windows-phone-7, slider

考虑一下，在 Windows Phone 中，我有一个滑块控件，Minimum=1，Maximum=10，SmallChange=1

可以说值= 5

现在，如果我点击滑块的右端，拇指将移动值 1。同样，单击滑块左侧的滑块会将拇指向左移动值 1。

我希望滑块直接跳到我点击滑块的位置。例如，拇指当前位于 5，我点击该值应该为 9 的位置附近的某个位置。而不是拇指移动到位置 6，我希望它直接跳到 9。

谢谢，萨德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:42:50.457

有一个 LargeChange 属性。此属性表示滑块的跳跃。用那个。 [http://msdn.microsoft.com/en-us/library/system.windows.controls.slider(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.slider(v=vs.95).aspx)

默认情况下，唯一的方法是将滑块拖动到位置。

# c# - foreach 比在 .cs 上构建字符串慢？

> ID：10248010
> 
> 赞同：3
> 
> 时间：2012-04-20T14:16:40.493
> 
> 标签：c#, .net, performance, foreach

今天的一位同事告诉我，在 ascx.cs 中使用 foreach 和 String Builder 更快地构建整个字符串（因此，在字符串中编写 html 代码）并将其最后发布在 ascx as 上`<%=myStringGenerateByStringBuilder%>`，而不是直接在 ascx 上使用 foreach ， 如 ：

```
<% foreach (var thing in things)
   { %>
   <div><p><%= thing.Description %></p></div>
<% }; %> 
```

这是因为打开`<%`和关闭`%>`非常昂贵。

这是真的吗？我不谈论管理代码（第二个方法是我使用的，非常干净和容易），我谈论生成代码的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:22:06.687

您需要在现场进行测试才能确定，因为有很多因素。

*   请记住，您不一定只是构建一个字符串并将其返回给浏览器。
*   如果您正在构建一个大文件，您可能会受益于 asp.net 的流式传输功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T14:56:25.623

好吧，一些测试：

```
void Main()
{
    var things = Enumerable
            .Range(1, 2000000)
            .Select(r => new Thing {Description = r.ToString()})
            .ToList();

    var times = Enumerable.Range(1, 10)
        .Select(t => new
            {   
                Method1 = Test(Method1, things),
                Method2 = Test(Method2, things),
            }
    ).ToList();
    var average = new {
            Method1 = TimeSpan.FromMilliseconds( times.Sum(t=>t.Method1.TotalMilliseconds) / times.Count),
            Method2 = TimeSpan.FromMilliseconds( times.Sum(t=>t.Method2.TotalMilliseconds) / times.Count),
    };
    average.Dump();
}

public TimeSpan Test(Action<IEnumerable<Thing>> action, IEnumerable<Thing> things)
{
    var stopWatch = new Stopwatch();
    stopWatch.Start();
    action(things);
    stopWatch.Stop();
    return stopWatch.Elapsed;
}

public void Method1(IEnumerable<Thing> things)
{
    var sb = new StringBuilder();
    using (var stringWriter = new StringWriter(sb) )
    {
        using (var htmlWriter = new HtmlTextWriter(stringWriter))
        {                   
            foreach (var thing in things)
            {
                htmlWriter.Write(thing.Description);
            }
        }
    }   
}

public void Method2(IEnumerable<Thing> things)
{
    var thingsBuilder = new StringBuilder();
    foreach ( var thing in things)
        thingsBuilder.Append(thing.Description);
    var thingsText = thingsBuilder.ToString();
    var sb = new StringBuilder();
    using (var stringWriter = new StringWriter(sb) )
    {
        using (var htmlWriter = new HtmlTextWriter(stringWriter))
        {           
            htmlWriter.Write(thingsText);                   
        }
    }   
}

public class Thing
{
    public string Description {get; set;}
}
// Define other methods and classes here

(use linq pad) 
```

![在此处输入图像描述](../Images/a8a6ee39580d47ae2c64a9fdaabbbb04.png)

但是，我怀疑有人会在网页中编写 20 亿个字符串。对于较小的列表，没有区别。即使我设置了 StringBuilder 的容量，它仍然会更慢。所以是的，使用 HtmlTextWriter 直接编写许多小字符串会比从这些字符串构建一个字符串然后编写它要快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:23:55.290

`<%= x %>`被编译为对有一些开销的 TextWriter 的调用。首先构建更大的字符串更快是合理的。反之亦然。

这需要测量任何没有测量的猜测都是没有根据的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T14:24:48.990

你的同事是对的，我尝试了同样的工作（例如，我在 word 中添加了文本）。我使用 Stringbuilder 和 foreach 制作了字符串，并且只有在添加到 word 之后它才能更快地工作，然后我尝试在 foreach 中添加字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T14:25:58.150

此外，这取决于该站点是否已预编译。

恕我直言，更重要的问题是缺乏可维护性，这将通过将演示文稿移到后面的代码来引入。例如，如果我必须向 div 添加一个类，我不应该去后面的代码来执行此操作。

# sql - 合并函数 SQL Clr 的用例是什么？

> ID：10248012
> 
> 赞同：1
> 
> 时间：2012-04-20T14:16:57.580
> 
> 标签：sql, sql-server-2008, sqlclr

我正在编写一个 CLR userdefinedAggregate 函数来实现中位数。虽然我了解我必须实现的所有其他功能。看不懂，merge函数有什么用。

我有一个模糊的想法，如果聚合函数被部分评估（即评估一些行与一组，其余在另一组），那么需要聚合这些值。如果是这种情况，有没有办法对此进行测试？

如果上述任何内容不清楚或您需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:27:49.953

你模糊的想法是正确的。
来自[CLR 用户定义聚合的要求](http://msdn.microsoft.com/en-us/library/ms131051.aspx)

> 此方法可用于将此聚合类的另一个实例与当前实例合并。查询处理器使用此方法来合并聚合的多个部分计算。

要合并的参数是聚合的另一个实例，您应该将该实例中的聚合数据合并到当前实例。
您可以查看示例[字符串 concatenate aggregate](http://technet.microsoft.com/en-us/library/ms131056.aspx)。merge 方法将连接的字符串从参数添加到聚合类的当前实例。

# iphone - UIImagePickerController 将视图向上推 20px

> ID：10248016
> 
> 赞同：3
> 
> 时间：2012-04-20T14:17:11.770
> 
> 标签：iphone, objective-c, cocoa-touch, uiimagepickercontroller, modalviewcontroller

我有一个模态视图控制器，其中包含：

```
 imagePickerController_ = [[UIImagePickerController alloc] init];
    imagePickerController_.delegate = (id)self;
    imagePickerController_.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePickerController_.view.frame = CGRectMake(0.0f, -20.0f, 320.0f, 480.0f);
    [self.view addSubview:imagePickerController_.view]; 
```

您会注意到我不得不手动将视图向上移动 20 像素，因为由于某种原因它坐得太低了。

当我关闭模态视图控制器时，下面视图控制器的视图中包含的所有视图都被推高 20 像素（即使视图本身保持相同的原始坐标）。

换句话说，我有一个`A`控制 view的视图控制器`A`。视图还`A`包含视图`B`和。然后我将模态视图控制器推到视图控制器上，以显示带有上述代码的图像选择器控制器。当模态视图控制器被关闭时，视图控制器再次显示，视图完好无损，但是 views和向上移动了 20px。**我怎样才能防止这种情况发生**？`C``D``X``A``X``A``A``B``C``D`

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:06:08.293

我发现了问题所在。不幸的是，很难从我的帖子中看到错误。

我将它`imagePickerController`放在另一个以模态方式呈现的视图控制器中。我现在***直接***以模态方式呈现`imagePickerController`.

```
imagePickerController_ = [[UIImagePickerController alloc] init];
imagePickerController_.sourceType = UIImagePickerControllerSourceTypeCamera;
imagePickerController_.delegate = (id)self;
[self presentModalViewController:imagePickerController_ animated:YES]; 
```

很抱歉给您带来麻烦。我希望这可以帮助其他人不要犯同样的错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:11:13.517

我想，当您添加时，`imagePickerController_`您需要将其框架设置为 A viewController 的边界。喜欢`imagePickerController_.view.frame = self.view.bounds`。

* * *

[您可以在View and Window Architecture](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW5)中找到有关视图坐标系的更多信息。

还阅读了有关[命名约定](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingIvarsAndTypes.html)的信息，命名`imagePickerController_`很奇怪。可能是你的意思`_imagePickerController`。我认为最好为此目的使用[属性。](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)所以用`self.imagePickerController`.

另请查看[Presenting View Controllers from Other View Controllers](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)。**

# xml - XML 开始和结束标记

> ID：10248019
> 
> 赞同：0
> 
> 时间：2012-04-20T14:17:17.140
> 
> 标签：xml, tags

在解析 xml 文件时，我需要在适当的位置显示开始标记和结束标记的名称。除了使用 startElement 和 endElement 函数之外，我还必须使用其他方法。下面是一个例子，我希望我的输出是这样的。

```
`<?xml version="1.0" encoding="ASCII"?>
<Employee-Detail>
<Employee>
  <Emp_Id>E-001</Emp_Id>
  <Emp_Name>
  <First_Name>Mani</First_Name>
  <Last_Name>Maran</Last_Name>
  </Emp_Name>
  <Emp_E-mail>Vinod1@yahoo.com</Emp_E-mail> 
  </Employee>
</Employee-Detail>
` 
```

输出： StartTag:Employee-Detail StartTag:Employee StartTag:Emp_Id Value:E-001 EndTag:Emp_Id StartTag:Emp_Name StartTag:First_Name Value:M​​ani EndTag:First_Name StartTag:Last_Name Value:M​​aran EndTag:Last_Name EndTag:Emp_Name StartTag:Emp_E-mail值：Vinod1@yahoo.com EndTag：Emp_E-mail EndTag：Employee EndTag：Employee-Detail

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-20T14:21:42.650

使用 SAX 解析器将允许您逐行解析 XML 并发出您想要的输出

# android - 从android数据库中删除一行

> ID：10248021
> 
> 赞同：2
> 
> 时间：2012-04-20T14:17:26.447
> 
> 标签：android, database

我目前正在研究在 android 数据库中添加、查看和删除值，但不幸的是，我所拥有的这本书只涵盖了添加和查看部分，所以我来这里寻求帮助。

我有一个名为 DeleteEntry 的类，您可以在其中输入一个变量 moduleDelete，该变量将传递给 DeleteEntryViewModule 类。然后，此类使用此值使用此 showEvent() 方法返回该行上的所有值

```
private void showEvents(Cursor cursor) {
StringBuilder builder = new StringBuilder("Saved Events:\n");
while (cursor.moveToNext()){
    long id = cursor.getLong(0);
    String module = cursor.getString(1);
    String day = cursor.getString(2);
    String starttime = cursor.getString(3);
    String duration = cursor.getString(4);
    String typeofsession = cursor.getString(5);
    String room = cursor.getString(6);
    builder.append(id).append(": ");
    builder.append(module).append(": ");
    builder.append(day).append(": ");
    builder.append(starttime).append(": ");
    builder.append(duration).append(": ");
    builder.append(typeofsession).append(": ");
    builder.append(room).append("\n ");
}
TextView text = (TextView) findViewById(R.id.text);
text.setText(builder);
} 
```

如何从构建器中获取值并将它们放入变量中，以便我可以执行此代码。

```
private void removeEvent (String module, String day, String starttime, String duration, String typeofsession, String room){
    try{
    SQLiteDatabase db = events.getWritableDatabase();
    ContentValues values = new ContentValues ();
    values.put(DAY, day);
    values.put(MODULE, module);
    values.put(STARTTIME, starttime);
    values.put(DURATION, duration);
    values.put(TYPEOFSESSION, typeofsession);
    values.put(ROOM, room);
    db.replaceOrThrow(TABLE_NAME, null, values);
    }catch(SQLiteException ex){
        Toast toast = Toast.makeText(this, "Broken", 10);
        toast.show();
    } 
```

}

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:35:24.500

尝试使用下面的代码而不是 db.replaceOrThrow

```
return db.delete(TABLE_NAME, MODULE + "="
            + module, null) > 0; 
```

您能解释一下为什么要使用 db.replaceOrThrow 吗？

# c# - 如何防止意外的 xaml 控件“选择”

> ID：10248030
> 
> 赞同：0
> 
> 时间：2012-04-20T14:18:06.530
> 
> 标签：c#, wpf, xaml, selection

使用 xaml 创建设计时，我注意到一个奇怪的错误：

有时我可以“选择”控制我选择文本的方式。

通常，控件看起来像这样：

![在此处输入图像描述](../Images/fe474b98340d4a756dc35a3909325f04.png)

而如果发生意外选择，它看起来像这样：

![在此处输入图像描述](../Images/11f5e94ad04937ffa8289d485f639b50.png)

为什么会发生这种情况，我该如何预防？

**更新**

这是我正在使用的控件：TreeView->Expander->StackPanel->DataGrid

根据答案，问题可能源于 TreeView。

如何防止 TreeView 项目被选中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:21:45.567

仅当控件位于诸如 a 之类的可选对象中时才应该是这种情况`ListBoxItem`，以防止该使用而不是（例如）[`ItemsControls`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)的子类。如果不是这样，我不知道发生了什么，因为我从未见过这样的事情。[`Selector`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.aspx)`ListBox`

* * *

从您似乎拥有的编辑来看`TreeViewItems`，您可以[覆盖相应的画笔键](https://stackoverflow.com/a/1398625/546730)以隐藏选择，或者添加一个`TreeView.ItemContainerStyle`将 更改为`Template`首先不会显示选择的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T14:22:35.840

看来您的控件基于支持能够以这种方式选择项目的列表框。也许将基础控件更改为基于“项目控件”。

编辑：

树视图具有相同的行为，允许选择一个项目。看到这个问题...

[禁用 WPF TreeView（或 TreeViewItem）选择？](https://stackoverflow.com/questions/4554298/disable-wpf-treeview-or-treeviewitem-selection)

# php - PHP 读取内容并进行 preg_match

> ID：10248031
> 
> 赞同：0
> 
> 时间：2012-04-20T14:18:07.230
> 
> 标签：php

我只有在选择器以 @font-face开头的情况下才能获得字体家庭，并且如果选择器不是从 @font-face开始的，则突破，但下面似乎不起作用。

### CSS文件内容：

```
@font-face {
  font-family: 'someFonts'; 
}

@font-face {
  font-family: 'someotherFonts';    
}

.style {
  font-family: 'someFonts';
} 
```

**PHP：**

```
$content = file_get_contents($file->uri);
if (!preg_match('#@font-face {([^;]+);#i', $content, $matches)) {
  break;
}

$fonts = array();
if (preg_match_all('#font-family:([^;]+);#i', $content, $matches)) {
  foreach ($matches[1] as $match) {
    if (preg_match('#"([^"]+)"#i', $match, $font_match)) {
      $fonts[] = $font_match[1];
    }
    elseif (preg_match("#'([^']+)'#i", $match, $font_match)) {
      $fonts[] = $font_match[1];
    }
  }
} 
```

非常感谢任何提示。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:31:04.850

你确定它不工作？我对以下代码没有问题-

```
$content = "@font-face {
  font-family: 'someotherFonts';    
}

.style {
  font-family: 'someFonts';
}";

if (!preg_match('#@font-face {([^;]+);#i', $content, $matches)) {
  echo "didnt find match";
}
else{
    print_r($matches);
} 
```

上面的代码对你有用吗？

可能的问题可能是 1\. 它没有从文件中正确读取。尝试回显 $content。2\. 有效，检查时有疏漏。尝试在 else 块中回显 $matches。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:33:52.897

我认为您对如何工作有误解`preg_match()`。您的`if()`条件始终评估为真，因为文件中确实存在`@font-face { .. }` *某处*。

您可以使用`preg_match_all()`在选择器中查找所有已定义的字体系列，`@font-face`如下所示：

```
$fonts = array();
$content = file_get_contents($file->uri);

if( preg_match_all('=@font-face\s*{.*font-family: (.*)[\s|;].*}=isU', 
       $content, 
       $matches) ) {
    $fonts = array_merge($fonts, $matches[1]);
}

print_r($fonts); 
```

结果：

```
Array ( 
       [0] => 'someFonts' 
       [1] => 'someotherFonts' 
) // the second "someFonts" from your class ".style" is not included in the list! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:44:14.217

您可以尝试使用正则表达式：

```
#@font-face\s*\{\s*(([^:]+)\s*:\s*([^;]+);\s*)+?\s*}#i 
```

它将匹配任何`@font-face`声明（单行或多行）

# titanium - Appcelerator Titan TableView 与 Android 4.x 缩小

> ID：10248032
> 
> 赞同：0
> 
> 时间：2012-04-20T14:18:09.557
> 
> 标签：titanium, tableview, appcelerator, android-4.0-ice-cream-sandwich

我正在研究加速器钛。在我在 KitchenSink 中复制几乎相同的代码来执行 tableview 之后，当我在我的设备中显示它时，我最终得到了一个缩小的 TableView（Galaxy Nexus 上的 android 4）。缩小意味着字体和图像非常小。奇怪的是：1-它在 android 模拟器中显示得恰到好处 2-它在我的 android 设备中显示得恰到好处，但使用 KitchenSink 可能是什么问题？这是该部分的代码：

```
 if (Ti.Platform.name == 'android') 
{
    Titanium.UI.currentWindow.backgroundColor = '#4e5c4d';
}
else
{
    Titanium.UI.currentWindow.backgroundColor = '#aebcad';
}

// create table view data object
var data = [

    {title:'Table View (Layout 2)', hasChild:true, test:'../main_windows/profile.js'}
];

// create table view
var tableViewOptions = {
        data:data,
        style:Titanium.UI.iPhone.TableViewStyle.GROUPED,
        headerTitle:'TableView examples and test cases',
        footerTitle:"Wow. That was cool!",
        backgroundColor:'transparent',
        rowBackgroundColor:'white'

    };

var tableview = Titanium.UI.createTableView(tableViewOptions);

// create table view event listener
tableview.addEventListener('click', function(e)
{
    if (e.rowData.test)
    {
        var win = Titanium.UI.createWindow({
            url:e.rowData.test,
            title:e.rowData.title
        });
        Titanium.UI.currentTab.open(win,{animated:true});
    }
});

// add table view to the window
Titanium.UI.currentWindow.add(tableview); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:19:51.467

解决了：

我不得不更改 tiapp.xml 文件并添加以下行：

```
 <supports-screens android:anyDensity="false"/> 
```

在 android mainfest 部分，现在是：

```
<android xmlns:android="http://schemas.android.com/apk/res/android">
    <manifest>
            <supports-screens android:anyDensity="false"/>

        </manifest>

</android> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:56:53.077

您应该小心，因为 google 的建议是仅将其用于 Android 1.4 及更低版本。更好的解决方案是创建适合屏幕尺寸的图像。

请参阅[http://developer.android.com/guide/topics/manifest/supports-screens-element.html#any](http://developer.android.com/guide/topics/manifest/supports-screens-element.html#any)

# c - 这两个声明有什么区别吗？

> ID：10248033
> 
> 赞同：4
> 
> 时间：2012-04-20T14:18:19.353
> 
> 标签：c

> **可能重复：**
> [将数组和数组指针传递给 C 中的函数之间的区别](https://stackoverflow.com/questions/5573310/difference-between-passing-array-and-array-pointer-into-function-in-c)

我一直在想这个问题，这两者之间有什么区别吗？

```
void f1(char *c);
void f2(char c[]); 
```

一个常见的例子是：

```
int main(int argc, char **argv);
int main(int argc, char *argv[]); 
```

除了艺术方面的原因之外，还有什么理由更喜欢其中一个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T14:21:18.473

没有区别。

从马口：

> （C99，6.7.5.3p7）“将参数声明为“类型数组”应调整为“类型限定指针”，其中类型限定符（如果有）是在数组的 [ 和 ] 中指定的限定符类型推导。”

关于偏爱一种形式而不是另一种形式的原因，这取决于人们。这是 H&S 所说的（切换到`T *array`from 时`T arr[]`）：

> （H&S，5.4.3 Array Bounds）“这将更准确地反映实施，但不太清楚地表明意图。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T14:19:58.343

不，在函数声明/定义中，使用数组作为参数只是语法糖。它仍然作为指针传递，并且`sizeof(theArgument)`仍然会给你`sizeof(TheType *)`而不是`sizeof(TheType) * sizeof(numElements)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:19:51.013

那么第一个表示这是一个指针，第二个表示这是一个数组。虽然没有有效的区别，但当您阅读代码时，您通常期望在第一种情况下是单个元素，而在第二种情况下是一个多于一个元素的序列。这有时可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T14:20:40.897

没有区别。C 和 C++ 中的每个 n 维数组都可以解释为 n 维数组和指向 (n-1) 维数组的指针（因为指针的`[]`语义与数组的语义相同）。

# objective-c - iOS 中的 Dropbox API：如何使用 DBRESTClient？

> ID：10248034
> 
> 赞同：0
> 
> 时间：2012-04-20T14:18:27.123
> 
> 标签：objective-c, ios, api, dropbox

我正在尝试按照 Dropbox 开发人员网站上的说明进行操作，但我不知道如何正确添加 DBRESTClient 对象。现在在@end 之后的.h 文件中，我有：

```
DBRestClient *restClient; 
```

在我的 .m 文件中，我有：

```
- (DBRestClient *)restClient {
    if (!restClient) {
        restClient =
        [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
        restClient.delegate = self;
    }
    return restClient;
} 
```

我认为这就是 Dropbox 页面告诉我的；但是，这会导致我的应用程序崩溃（我认为是因为它会在不应该的时候尝试释放 restClient）。我也尝试将 restClient 列为非原子属性，但上传等方法似乎不起作用。（上传方法现在正在运行，应用程序在完成上传后就会崩溃......）帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:26:12.547

Rupesh，基于蜜蜂在 4 月 20 日的评论的详细规范答案是`self`被解除分配。

这意味着必须有代码按顺序执行以下操作。

1.  `restClient`通过调用返回类型对象的函数创建的变量(DBRestClient*)
2.  该变量将其组件（@property？可能）`delegate`设置`self`为该函数（见上面的问题）
3.  后来，`self`指向的对象被释放，这意味着委托没有指向任何东西。
4.  再后来，一定有代码出于某种目的试图取消引用委托。

请记住，如果正在发送的消息是一个函数，那么向 nil objc 对象发送消息只会有效地导致没有任何事情发生或零赋值。因此，崩溃一定是由于某种其他类型的取消引用。

# php - zf2 解析模块查看路径

> ID：10248035
> 
> 赞同：4
> 
> 时间：2012-04-20T14:18:28.947
> 
> 标签：php, model-view-controller, dependency-injection, zend-framework2

从使用 beta3 的骨架应用程序开始，您将如何解析名为 Foo 的新模块的视图路径？

我已将以下添加到 di 配置中，现在两个模块操作都呈现 Foo 的视图。

```
'Zend\View\Resolver\TemplatePathStack' => array(
    'parameters' => array(
        'paths'  => array(
            'foo' => __DIR__ . '/../view',
        ),
    ),
), 
```

我希望`Application\Controller\IndexController::indexAction()`在 Application 中呈现视图并为`Foo\Controller\IndexController::indexAction()`呈现 Foo 的视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T20:08:36.577

请注意，此类问题有助于塑造稳定框架的方向。:)

我一直在玩弄的一个想法是将模块用作视图脚本解析的一部分。现在，默认使用的是“/”；我的建议是使用“//”，因为这有助于防止模块之间的命名冲突；如果您使用模板映射，它还可以更轻松地准确理解您要覆盖的视图脚本。

您现在可以使用这种方法，但它需要在您从控制器返回的视图模型上手动设置模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T19:11:11.220

This doesn't currently work in ZF2 as there is no concept of taking the namespace into account when resolving view scripts. Discussions are currently ongoing on how best to tackle this.

For the time being, you have to name each controller differently. In general, we are recommending that you name the "primary" controller within a module after the module name. That is, the primary controller in the `Foo` module would be `FooController`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T19:56:00.163

您实际上可以这样做；而且还不错....

Rob Allen 自己有一篇博客文章，基本上可以完成这项工作......请注意，您必须基本上将其作为基于模块的加载器来处理，它将大部分工作分开，这样我们就没有控制器使用它： [http://pastie .org/3824571](http://pastie.org/3824571)

# django - Django: How to position a page when using Django templates and links

> ID：10248039
> 
> 赞同：0
> 
> 时间：2012-04-20T14:19:00.663
> 
> 标签：django

I have this in my template:

```
<div id="comment-{{ post_comment.id }}">
<a title="Comment was useful" href="/useful-comment/{{ blog_post.id }}/{{ post_comment.id }}/"> 
```

When the user clicks on this link, the method useful_comment(blog_post_id, post_comment_id) is called and at when it returns it loads the same template again. I then want to scroll the page down to #comment-{{ post_comment.id }}, but how do I do that if I load my template like so:

```
arguments = dict(user = request.user, blog_post = blog_post)

t = loader.get_template('blog-post-template.html')
c = RequestContext(request, args)
return HttpResponse(t.render(c)) 
```

This is related to [Django: How do I position a page when using Django templates](https://stackoverflow.com/questions/3036273/django-how-do-i-position-a-page-when-using-django-templates/3036307#3036307), but in that question they are using forms and only scrolling down to a static section of the page.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T04:33:06.670

You should add an `#anchor` to your link's `href`. In your case there will be different anchors (`<a name="comment_123"></a>`, for example) for all your comments, so be sure link points to correct anchor.

This is nothing to do with Django, just old good HTML.

# android - Android Fragment 问题（转换我的应用程序）

> ID：10248041
> 
> 赞同：1
> 
> 时间：2012-04-20T14:19:05.080
> 
> 标签：android, list, dialog, android-alertdialog, fragment

我目前正在将我的应用程序转换为 Fragments，并且遇到了许多问题。我希望能够在您的帮助下解决所有问题，并在解决转换的某个部分后编辑我的帖子。

**第一个问题：** AlertDialogs。当用户点击一个按钮时，也许稍后是一个 ListView 项目，他们会看到一个 AlertDialog 来选择他们想要查看的帐户。我为 Facebook 和 Twitter 做这个。然而，双重结构让我感到困惑，ListDialog 似乎加载其内容的方式不同。

所以，我的活动代码：

```
package bas.sie.Antonius;

import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

import com.actionbarsherlock.app.SherlockFragment;

public class External extends SherlockFragment implements OnClickListener {

    Button mBtnOuderPortaal;
    Button mBtnTeletop;
    Button mBtnWebmail;
    Button mBtnInfobord;
    Button mBtnTwitter;
    Button mBtnFacebook;
    Button mBtnYouTube;
    String URLhome;
    String Title;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mBtnOuderPortaal = (Button) getActivity().findViewById(
                R.id.btnOuderPortaal);
        mBtnOuderPortaal.setOnClickListener(this);
        mBtnTeletop = (Button) getActivity().findViewById(R.id.btnTeletop);
        mBtnTeletop.setOnClickListener(this);
        mBtnWebmail = (Button) getActivity().findViewById(R.id.btnWebmail);
        mBtnWebmail.setOnClickListener(this);
        mBtnInfobord = (Button) getActivity().findViewById(R.id.btnInfobord);
        mBtnInfobord.setOnClickListener(this);
        mBtnTwitter = (Button) getActivity().findViewById(R.id.btnTwitter);
        mBtnTwitter.setOnClickListener(this);
        mBtnFacebook = (Button) getActivity().findViewById(R.id.btnFacebook);
        mBtnFacebook.setOnClickListener(this);
        mBtnYouTube = (Button) getActivity().findViewById(R.id.btnYouTube);
        mBtnYouTube.setOnClickListener(this);

    }

    void showDialog() {
        DialogFragment newFragment = MyAlertDialogFragment
                .newInstance(R.string.twitter_dialog_title);
        newFragment.show(getFragmentManager(), "dialog");
    }

    void showFBDialog() {
        DialogFragment newFragment = MyFBAlertDialogFragment
                .newInstance(R.string.facebook_dialog_title);
        newFragment.show(getFragmentManager(), "dialog");
    }

    public static class MyFBAlertDialogFragment extends DialogFragment {

        String URLhome;
        String Title;
        final CharSequence[] Facebook = { "Spot Antoniuscollege",
                "ACG Mediagroep" };

        public static MyAlertDialogFragment newInstance(int title) {
            MyAlertDialogFragment frag = new MyAlertDialogFragment();
            Bundle args = new Bundle();
            args.putInt("Kies Facebook-account", title);
            frag.setArguments(args);
            return frag;
        }

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            int title = getArguments().getInt("title");

            return new AlertDialog.Builder(getActivity())
            .setTitle(title)
            .setItems(Facebook, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int item) {
                    switch (item) {
                    case 0:
                        URLhome = "http://m.facebook.com/spotcarmelcollege";
                        Title = "Facebook ACG Spot";

                        Intent i = new Intent();
                        i.setClass(getActivity(), MyWebView.class);
                        i.putExtra("home", URLhome);
                        i.putExtra("title", Title);
                        startActivityForResult(i, 0);
                        break;
                    case 1:
                        URLhome = "http://m.facebook.com/pages/ACG-Media/128125633969183";
                        Title = "Facebook ACG Media";

                        Intent i1 = new Intent();
                        i1.setClass(getActivity(), MyWebView.class);
                        i1.putExtra("home", URLhome);
                        i1.putExtra("title", Title);
                        startActivityForResult(i1, 0);
                    default:
                        return;
                    }
                }
                getDialog.create();
            )
        }

    }

        public static class MyAlertDialogFragment extends DialogFragment {

            final CharSequence[] Twitter = { "@ACGouda", "@Spot_ACG",
                    "@ACGmediatheek" };
            String URLhome;

            public static MyAlertDialogFragment newInstance(int title) {
                MyAlertDialogFragment frag = new MyAlertDialogFragment();
                Bundle args = new Bundle();
                args.putInt("title", title);
                frag.setArguments(args);
                return frag;
            }

            @Override
            public Dialog onCreateDialog(Bundle savedInstanceState) {
                int title = getArguments().getInt("title");

                return new AlertDialog.Builder(getActivity())
                .setTitle(title)
                s.setItems(Twitter,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int item) {
                                switch (item) {
                                case 0:
                                    URLhome = "https://mobile.twitter.com/#!/ACGouda";

                                    Intent intent = new Intent(
                                            Intent.ACTION_VIEW);
                                    intent.setData(Uri.parse(URLhome));
                                    startActivity(intent);
                                    break;
                                case 1:
                                    URLhome = "https://mobile.twitter.com/#!/Spot_ACG";

                                    Intent intent1 = new Intent(
                                            Intent.ACTION_VIEW);
                                    intent1.setData(Uri.parse(URLhome));
                                    startActivity(intent1);
                                    break;
                                case 2:
                                    URLhome = "https://mobile.twitter.com/#!/ACGmediatheek";

                                    Intent intent2 = new Intent(
                                            Intent.ACTION_VIEW);
                                    intent2.setData(Uri.parse(URLhome));
                                    startActivity(intent2);
                                    break;
                                default:
                                    return;
                                }
                            }
                        });
                AlertDialog alert = builder.create();
                alert.show();
            }

        }

        @Override
        public void onClick(View v) {
            switch (v.getId()) {
            case R.id.btnFacebook:
                showFBDialog();
                break;
            case R.id.btnTwitter:
                showDialog();
                break;
            case R.id.btnInfobord:
                URLhome = "http://carmelcollegegouda.nl/site_ant/index.php?option=com_content&view=article&id=182&Itemid=131&lang=nl";
                Title = "Infobord";

                Intent bord = new Intent();
                bord.setClass(getActivity(), MyWebView.class);
                bord.putExtra("home", URLhome);
                bord.putExtra("title", Title);
                startActivityForResult(bord, 0);
                break;
            case R.id.btnOuderPortaal:
                URLhome = "https://portaal.mijnsom.nl/login/ccg";
                Title = "Onderwijsportaal";

                Intent portaal = new Intent();
                portaal.setClass(getActivity(), MyWebView.class);
                portaal.putExtra("home", URLhome);
                portaal.putExtra("title", Title);
                startActivityForResult(portaal, 0);
                break;
            case R.id.btnTeletop:
                URLhome = "http://antoniuscollege.teletop.nl/";

                Intent teletop = new Intent(Intent.ACTION_VIEW);
                teletop.setData(Uri.parse(URLhome));
                startActivity(teletop);
                break;
            case R.id.btnMail:
                URLhome = "https://webmail.carmelcollegegouda.nl/";
                Title = "Webmail";

                Intent mail = new Intent();
                mail.setClass(getActivity(), MyWebView.class);
                mail.putExtra("home", URLhome);
                mail.putExtra("title", Title);
                startActivityForResult(mail, 0);
                break;
            case R.id.btnYouTube:
                URLhome = "http://m.youtube.com/results?search_query=Antoniuscollege&oq=Antoniuscollege&aq=f&aqi=&aql=&gs_l=youtube-psuggest.3...4430l12422l0l12750l31l31l9l1l2l0l122l1657l20j1l21l0.";

                Intent YT = new Intent();
                YT.setClass(getActivity(), MyWebView.class);
                YT.putExtra("home", URLhome);
                startActivityForResult(YT, 0);
                break;
            }
        }
    }

} 
```

错误在：

-`.create();`在第一个对话框中，它说

`Syntax error on token "create", Identifier expected after this token`

`Syntax error, insert ";" to complete MethodDeclaration`

`Syntax error, insert ";" to complete ReturnStatement`

`Syntax error, insert ")" to complete MethodInvocation`

`Syntax error, insert "}" to complete ClassBody`

-`MyAlertDialogFragment`首先`showDialog();`，说`MyAlertDialogFragment`不能解决。

-在第二个Dialog的初始化中：

`Syntax error on token ".", delete this token`

`The method setItems(CharSequence[], new DialogInterface.OnClickListener(){}) is undefined for the type External.MyFBAlertDialogFragment.MyAlertDialogFragment`

`Type mismatch: cannot convert from AlertDialog.Builder to Dialog`

然后也`builder`从创建第二个 Dialog: 开始`builder cannot be resolved`。这显然是合法的，但我没有解决方案。

它还抱怨资源目录名称无效。

我刚刚解决的最后一个问题:)。

我正在使用 ABS，但这是 ABS 中的选项卡之一。这意味着它需要是一个 Fragment，但不显示 ActionBar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:33:56.563

您有多个语法错误。那是什么

> 此令牌之后需要的标识符

方法

您应该**将您的片段移动到自己的类文件**中，这样更容易维护。

我可以发现一个*我认为*的错误，但在浏览器中很难：

```
 default:
                    return;
                }
            }
            getDialog.create();
        )
    } 
```

应该：

```
 default:
                    return;
                }
            }
            getDialog.create();
        }
      );        
} 
```

（是的，少了一个分号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:19:56.753

您发布**活动**的代码，但您的约定继承自**SherlockFragment**而不是**SherlockFragmentActivity**。

您可能应该看看[Fragment](http://developer.android.com/guide/components/fragments.html) vs [FragmentActivity](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:52:28.327

感谢大家的帮助，但它已经解决了一段时间。

但是，这里发布的代码很多，所以如果有人想知道：给我发消息，我会尽力提供帮助！

# python - 修改 Django ModelForms 字段

> ID：10248044
> 
> 赞同：0
> 
> 时间：2012-04-20T14:19:17.230
> 
> 标签：python, django, django-forms, modelform

我有一个 Django 模型，它有一个外键`owner`，指的是拥有这个对象的用户。为了让其他用户编辑这些对象，我目前使用 a `forms.ModelForm`，到目前为止效果很好。

但是我知道要让所有者并且只有所有者更改他拥有的对象的所有者（多么具有所有权！:)。因此我尝试了以下方法：

```
class FolderForm(forms.ModelForm):
    def __init__(self, user, *args, **kwargs):
        if kwargs.get("instance", False):
            if user == kwargs["instance"].owner:
                self._meta.fields += ("owner",)

        super(FolderForm, self).__init__(*args, **kwargs)

    class Meta:
        model = Folder
        fields = (
            "name",
            "description",
        ) 
```

但这不起作用，因为 Django 使用一些元类魔法来设置模型上的字段，这似乎是在`__init__`调用我的子类之前完成的。

有人做过这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:38:26.530

我喜欢正常使用闭包

```
def make_form(exclude_user=True):
    class Form(forms.ModelForm):
        class Meta:
            model = Folder         
            exclude = ['user'] if exclude_user else None
    return Form

form_cls = make_form(request.user != folder.owner) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:27:44.477

为什么不创建两个表单：

一个排除不拥有数据的用户的所有者（满口）并在您的视图中执行一个简单的 if 语句：

```
if request.user == Model.owner:
    form = OwnerForm
else:
    form = OthersForm 
```

保持尽可能简单，这样才能赢得巨大的胜利。

# macos - 如何从命令行运行 Matlab？

> ID：10248049
> 
> 赞同：12
> 
> 时间：2012-04-20T14:19:40.167
> 
> 标签：macos, matlab

是否可以从 Mac 命令行运行 Matlab 命令？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T15:26:18.420

该`matlab`脚本位于`bin`MATLAB 应用程序包的子目录中。在我的机器上，这意味着我可以像这样运行它：

```
/Applications/MATLAB_R2012a_Student.app/bin/matlab 
```

如果您希望此 bin 目录位于您的路径中（以便您可以运行`matlab`、`mex`等），`.bash_profile`请使用以下行编辑或创建一个新的文本文件，该文件位于您的主目录的顶层：

```
export PATH=/Applications/MATLAB_R2012a_Student.app/bin:$PATH 
```

将“MATLAB_R2012a_Student”部分替换为您的实际 MATLAB 应用程序包的名称。这对于当前打开的终端不会生效，但新打开的终端应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:19:00.800

您需要 MATLAB 可执行文件的完整路径，并且可以根据[此处](http://www.mathworks.co.uk/help/techdoc/ref/matlabunix.html)`-r`的文档使用该选项在您启动的 MATLAB 中运行命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-03T02:28:38.763

如上所述，您需要首先通过添加以下行来编辑您的 .bash_profile 文件（将“MATLAB_R2020b”替换为您的 MATLAB 版本）

```
export PATH=/Applications/MATLAB_R2020b.app/bin:$PATH 
```

然后重新启动终端后，您可以通过插入命令打开 MATLAB

```
/Applications/MATLAB_R2020b.app/bin/matlab 
```

您还可以通过定义工作目录文件夹和可执行脚本及其路径来运行 .m 脚本。您只需要在上面添加更多命令。

```
/Applications/MATLAB_R2020b.app/bin/matlab -r "addpath(genpath('{Your working directory folder path}')); cd {Your working directory folder path}; {Your script name}; {Your other script name}; quit;" 
```

请从以下位置找到有关 MATLAB 命令行参数的更详细说明：

[https://www.mathworks.com/help/matlab/ref/matlabmacos.html#d122e801165](https://www.mathworks.com/help/matlab/ref/matlabmacos.html#d122e801165)

# macos - MAC OS X NSMutableDictionary writeToFile 失败

> ID：10248050
> 
> 赞同：0
> 
> 时间：2012-04-20T14:19:43.520
> 
> 标签：macos, cocoa, nsmutabledictionary, writetofile

我的代码是这样的。而且ret的值始终是NO，我认为写路径是不允许的。但是我可以在哪里为我的应用程序在 MAC OS X 上存储我的信息？你能帮我找到正确的路径来存储我的应用程序设置吗？非常感谢~：）

```
NSString* writePath = [[[NSBundle mainBundle] resourcePath]
                        stringByAppendingPathComponent:@"Brain.plist"];

NSLog(@"%@",writePath);
NSMutableDictionary* dictForRet = [[NSMutableDictionary alloc]init];
NSNumber* applicationNumber = [[NSNumber alloc]initWithInt:0];
NSMutableDictionary* root = [[NSMutableDictionary alloc]init];
NSArray* propertyArray = [[NSArray alloc]initWithObjects:kPropertyArrayApplicationPath,kPropertyArrayApplicationCS, nil];
NSMutableDictionary* brain = [[NSMutableDictionary alloc]init];
[root setObject:propertyArray forKey:kPropertyArrayName];
[dictForRet setObject:applicationNumber forKey:kPropertyKeyApplicationNumber];
[dictForRet setObject:root forKey:kPropertyArrayDictName];
[dictForRet setObject:brain forKey:kPropertyDictBrainName];
NSLog(@"%@",dictForRet);
ret = [dictForRet writeToFile:writePath atomically:YES];
NSLog(@"%d",ret); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:38:42.033

资源路径是指应用程序包中的 Resources/ 目录。您不想写入此路径，这通常是不允许的（尤其是在沙盒应用程序的情况下）。

要获取标准位置的路径，例如应用程序支持目录，请使用[NSSearchPathForDirectoriesInDomains](https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html)。

您可能正在寻找类似的东西：

```
NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES); 
```

这将返回一个（大小为 1 的数组）应用程序支持 URL，如果您的应用程序被沙盒化，则会自动选择正确的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:35:55.483

您无法写入当前应用的捆绑包。

相反，您可以将其填充到您的沙箱、in`~/Library/Application Support/YOUR_APP/`或用户指定的位置。

# adobe - Day CQ 的组件库

> ID：10248059
> 
> 赞同：1
> 
> 时间：2012-04-20T14:20:00.050
> 
> 标签：adobe, components, aem, day-cq

我正在 Adob​​e Day CQ 上开发一个网站。我的站点应该包含许多在标准库 Day CQ 中找不到的不同组件。此 CMS 是否有任何第三方组件库，或者我需要自己创建它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:53:11.053

令人惊讶的是，没有人们预期的那么多——至少目前是这样。这似乎是创业的沃土。但如果它们恰好符合您的特定需求，这里有一些：

*   视频组件 - [http://www.brightcove.com/en/partners/cq5](http://www.brightcove.com/en/partners/cq5) 和[http://blog.brightcove.com/en/2011/12/brightcove-integrates-video-cloud-adobe%E2%80%99s -cq5-cms](http://blog.brightcove.com/en/2011/12/brightcove-integrates-video-cloud-adobe%E2%80%99s-cq5-cms)和[http://coresecure.com/bc-cq5-component/](http://coresecure.com/bc-cq5-component/)
*   谷歌地图组件 - [http://blogs.adobe.com/livecyclepost/2011/09/google-maps-component-for-adep-wemcq5/](http://blogs.adobe.com/livecyclepost/2011/09/google-maps-component-for-adep-wemcq5/)
*   Adobe 第三方参考 - [http://dev.day.com/docs/en/crx/current/developing/developers_getting_started.html#Third%20Party%20Libraries](http://dev.day.com/docs/en/crx/current/developing/developers_getting_started.html#Third%20Party%20Libraries)

您还可以利用顾问来创建自定义组件。他们可能有一些他们已经开发的库，但还没有（还没有？）打包转售，他们可以利用：

*   [http://www.headstandmedia.com/what-we-do/cms/adobe-cq5/cq5-development/](http://www.headstandmedia.com/what-we-do/cms/adobe-cq5/cq5-development/)
*   [http://www.ensemble.com/expertise/digitalmarketing/cq5.shtml](http://www.ensemble.com/expertise/digitalmarketing/cq5.shtml)

# regex - RegEx 搜索和替换（通过 Dreamweaver CS5）

> ID：10248063
> 
> 赞同：0
> 
> 时间：2012-04-20T14:20:14.617
> 
> 标签：regex, search, replace, dreamweaver

我必须处理一个问题，也许你可以帮忙。

我接管了一个包含大量代码的网站，并希望它在 PHP 5.4 上运行。但是有很多这样的声明：

```
if($arrayname['keyname']>"") .... 
```

我想将它们全部替换为：

```
if(!empty($arrayname['keyname'])) .... 
```

手动操作将花费很长时间:-(

您知道如何使用 Dreamweaver 的 CS5 搜索和替换 RegEx 功能吗？不幸的是，我的 RegEx 知识有限。

当然，正则表达式必须是“可变的，因为数组名和键名总是变化的。

非常感谢任何有关找到正确 RegEx Stamtent 的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:31:44.990

正则表达式查找所有出现的`if($arrayname['keyname']>"")`, 不管`arrayname`和`keyname`是 , 如果只有字母 :

```
if\\(\\$[a-zA-Z]*\\[\'[a-zA-Z]*\'\\]>\"\"\\) 
```

您必须了解如何在 Dreamweaver 中使用[BackReferences](http://www.regular-expressions.info/brackets.html)。如果它使用标准的正则表达式，那么使用链接中的教程，对你会有很大的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:58:03.930

要完成并结束这个问题：

在 Dreamweaver 中搜索（代码中的正则表达式搜索）：

```
if\(\$(\w+)\[['"](\w+)['"]\]>""\) 
```

替换为：

```
if(!empty($$1['$2'])) 
```

# ruby-on-rails-3 - 使用 Rails 自动创建网站

> ID：10248065
> 
> 赞同：0
> 
> 时间：2012-04-20T14:20:27.840
> 
> 标签：ruby-on-rails-3, templates, code-generation, scaffolding

我正在寻找一个用于 rails 的模板生成器，很像脚手架，但包含预设页面和 css，所有内容都已经内置。

我不确定在哪里或如何搜索这个。

我想要这样的东西而不是自己创建一个的原因是我需要非常快速地创建一个具有某个预设主题的网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:33:46.033

我遇到了和你一样的问题，找不到解决办法。因此，我为它建造了一颗宝石。

```
https://github.com/bighostkim/simple-layout 
```

它仅适用于您的开发模式，它不使用资产使其变得简单。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:53:59.900

[Rails Yard](http://www.railsyardcms.org/)可能是您正在寻找的解决方案。它是用 Rails 编写的 CMS。

[Rails CMS WIKI FORUM](https://github.com/jlapier/Rails-CMS-Wiki-Forum)第二个选项

[Rails Admin](https://github.com/sferik/rails_admin)非常适合数据管理（创建、检索、更新、删除）。

# c# - 立即/按需发送电子邮件通知与通过调度程序/Cron 发送电子邮件通知

> ID：10248066
> 
> 赞同：1
> 
> 时间：2012-04-20T14:20:34.387
> 
> 标签：c#, php, email, cron, scheduled-tasks

在您看来（希望是基于事实而非情感形成的）从网站发送电子邮件通知的更好方法是什么？

例如，假设您网站上的用户 A 请求与用户 B 建立友谊，此时您将生成一封电子邮件以发送给用户 B。

问题是 - 发送电子邮件的最佳时间是什么时候？立即，作为同一执行路径的一部分，还是将电子邮件安排为批处理的一部分？

就像我说的，我的问题相当笼统，所以你可以假设不同的架构——一台服务器专用于托管，另一台专用于电子邮件，单台服务器，云托管等……我对所有答案都很好奇，真的。

照我看来：

使用即时电子邮件，您可以获得及时的电子邮件，但如果您的网站收到大量流量，您可能会发送过多的电子邮件，从而使服务器陷入困境。话虽如此，因为您没有发送一批电子邮件，所以它们都是一次性的。

如果您批量处理您的电子邮件并有一个计划任务或 cron 作业将它们拾取并发送，那么您的电子邮件不会立即发送 - 所以假设您减少了间隔，以便每 1 分钟发送一次批处理。在我看来，问题是并发性——如果另一批在第一批完成之前开始，如果您没有适当地标记或锁定您正在发送的内容，您可能会冒着发送双封电子邮件的风险。

以我个人的经验，当我在高流量网站上立即发送电子邮件时，性能并没有受到太大影响，尽管有一些电子邮件未能发送出去。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:27:30.313

我会说肯定*安排*他们。就用户请求和服务器操作而言，必须有一个容忍度，就好像有人能够与其他人成为朋友一样，它也（我希望）能够拒绝与同一个人建立友谊。如果是这样，如果我快速接受并拒绝点击您的网站怎么办。?

在这种情况下，您有 2 个选项，imo：

*   像 SO 一样，在用户点击时添加一些时间（你不能在 2 秒内接受和拒绝）

*   或者你*可以*，但是此时发送给接受/请求友谊的人的最终消息被安排在服务器上，并且会在 30 分钟后发送（或更短时间，取决于架构师的选择）

希望这可以帮助。

# git - IntelliJ IDEA - mac/PC 上的不同团队成员

> ID：10248068
> 
> 赞同：2
> 
> 时间：2012-04-20T14:20:38.653
> 
> 标签：git, intellij-idea

目前，我们正在与两个开发人员一起使用 IntelliJ IDEA，他们都使用 PC 版本的 IntelliJ IDEA 10.5。

我们中的一个人正在迁移到 Mac，因为 iOS 开发是一个问题。

我们在`.ipr`本地设置了每个文件，例如在`d:\ideaproject\projectroot`.

该项目由几个模块组成，这些模块的`.iml`文件位于网络驱动器上，例如：

```
k:\ideaprojects\project\module1.iml
k:\ideaprojects\project\module2.iml 
```

我们都有相同的驱动器号，所以这完美无缺。

当我们想要完全一样地设置 Mac 时，这是不可能的，因为在`.iml`文件中有对`k:\`其他网络驱动器号的引用。当然，Mac 不知道驱动器号。

我们如何以一种我们都可以在一个项目中工作的方式进行设置？我们考虑过设置 git，但在 IDEA 文档中他们提到该`.iml`文件必须在 CVS 中。所以存在同样的问题。该文档指出：

> 由于 *.iws 文件存储您的个人偏好，因此不应将其置于版本控制之下。相反，项目和模块文件（*.ipr 和 *.iml）存储项目范围的设置，应该共享。

谁能给我们一个想法，如何在不同平台上与团队成员一起设置团队项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:26:07.957

**永远不要**与网络驱动器共享代码。始终与您的版本控制软件共享它。

使所有路径相对。如果它是一个 java 项目，请使用像 maven 这样的依赖管理工具。所有开发人员都必须基于 maven 依赖项创建本地项目。

如果您使用相同的代码，请确保使用 unicode 文件编码，否则您可能会对*源*代码感到满意。

我不认为你可以用 IntelliJ 构建 iOS 应用程序，那你为什么要惹麻烦呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:39:31.397

您可以使用路径变量，有关详细信息，请参阅[http://www.jetbrains.com/idea/webhelp/paths-and-path-variables.html](http://www.jetbrains.com/idea/webhelp/paths-and-path-variables.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:57:47.423

只需将所有项目文件（*.ipr、*.iml）放入版本控制中。让您的版本控制系统忽略 *.iws。完毕。

较新版本的 IntelliJ 在 .idea 文件夹中使用基于目录的项目设置（因为我认为是 IntelliJ 9）。同样适用，只需将该目录放入版本控制中。您可以在 workspace.xml 上设置忽略。

# ruby-on-rails - 将 ror 1.8.7 更新到 1.9.3

> ID：10248071
> 
> 赞同：0
> 
> 时间：2012-04-20T14:20:45.097
> 
> 标签：ruby-on-rails, rvm

我是一个使用 macbook air 的初学者 ror 程序员。我刚刚设法将我的豹升级为狮子。下载了 codex 10.7 和 macport 以及 RVM。我现在要做的是将我的 ruby​​ 从 1.8.7 更新到 1.9.3，但这就是我得到的：

我输入：'rvm install ruby​​-1.9.2-p318"

Annie-Tungs-MacBook-Air:~ annietung$ rvm install ruby​​-1.9.2-p318 提取 yaml-0.1.4.tar.gz 到 /Users/annietung/.rvm/archives 提取 yaml-0.1.4.tar.gz到 /Users/annietung/.rvm/src 在 /Users/annietung/.rvm/src/yaml-0.1.4 中配置 yaml。运行'./configure --prefix="/Users/annietung/.rvm/usr"'时出错，请阅读/Users/annietung/.rvm/log/ruby-1.9.2-p318/yaml/configure.log 编译yaml在 /Users/annietung/.rvm/src/yaml-0.1.4。运行“make”时出错，请阅读 /Users/annietung/.rvm/log/ruby-1.9.2-p318/yaml/make.log 数据库文件 /Users/annietung/.rvm/config/packages 不存在。从源代码安装 Ruby 到：/Users/annietung/.rvm/rubies/ruby-1.9.2-p318，这可能需要一段时间，具体取决于您的 cpu... ruby​​-1.9.2-p318 - #fetching ruby -1.9.2-p318 - #提取到 /Users/annietung/.rvm/src/ruby-1.9。2-p318（已提取）ruby-1.9.2-p318 - #configuring Error running ' ./configure --prefix=/Users/annietung/.rvm/rubies/ruby-1.9.2-p318 --enable-shared - -disable-install-doc --with-libyaml --with-opt-dir=/Users/annietung/.rvm/usr'，请阅读/Users/annietung/.rvm/log/ruby-1.9.2-p318/ configure.log 运行配置时出错。停止安装。ls: /Users/annietung/.rvm/rubies/*/bin/ruby: 没有这样的文件或目录 Annie-Tungs-MacBook-Air:~ annietung$ 停止安装。ls: /Users/annietung/.rvm/rubies/*/bin/ruby: 没有这样的文件或目录 Annie-Tungs-MacBook-Air:~ annietung$ 停止安装。ls: /Users/annietung/.rvm/rubies/*/bin/ruby: 没有这样的文件或目录 Annie-Tungs-MacBook-Air:~ annietung$

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:30:49.700

看起来您需要下载并安装[Apple 的](https://developer.apple.com/downloads/index.action)OSX Lion 命令行工具，以便您可以正确构建 Ruby。

# mysql - 如何使用 MySQL Workbench 架构差异两个数据库？

> ID：10248072
> 
> 赞同：29
> 
> 时间：2012-04-20T14:20:45.943
> 
> 标签：mysql, database, schema, mysql-workbench

有谁知道如何使用 MySQL Workbench 为两个数据库提取数据库方案差异。v5.2 声明它具有此功能，但我似乎无法找到它。我必须使用 MySQL Workbench。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2017-07-20T09:39:09.753

如果您没有直接看到此选项，则必须：

1.  单击`File`并`New model`
2.  在已打开的新模型窗口中，单击`Database`和`Compare schemas`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-20T14:46:03.687

数据库差异工具是 MySQL 实用程序的一部分，您可以通过`Plugins -> Start Shell for MySQL Utilities`. 您可以在[此处找到相关文档](https://docs.oracle.com/cd/E17952_01/mysql-utilities-1.6-en/mysqldiff.html)。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-01-04T19:08:25.190

只需转到文件-> 新建模型，然后转到数据库-> 与任何源同步。您必须在模型视图中才能在“数据库”菜单中看到此选项。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-17T06:58:16.387

您可以打开“模型视图”

[![在此处输入图像描述](../Images/d9fdd556a304e048e2455e9e223b3ea2.png)](https://i.stack.imgur.com/BVSi0.png)

并选择“比较架构”选项

[![在此处输入图像描述](../Images/01e03913b5a5d2d6f4ae041669996758.png)](https://i.stack.imgur.com/QgM1J.png)

# iphone - iPhone Ad-hoc 分发同步错误

> ID：10248074
> 
> 赞同：0
> 
> 时间：2012-04-20T14:20:48.200
> 
> 标签：iphone, provisioning-profile, ad-hoc-distribution

我正在为客户开发 iPhone 应用程序。开发完成后，应用程序将在Apple Store上架，但在开发过程中，客户希望定期在自己的手机上查看和安装应用程序，以检查开发的当前状态。-我去供应门户注册了我客户的设备 udid 并添加到我的应用程序的供应配置文件中。-我下载了配置文件并安装了它。- 然后我构建了 ipa 并将其发送给我的客户。

这还不够吗？

客户正在试验同步错误。他可以在 iTunes 中导入 ipa，但在同步结束时，他在他的 iphone 上收到此错误警报。我在另外两部 iphone 上测试了这个 ipa 文件并且正在工作（都已注册，一个是 ios 5.1，另一个是 5.0.1） ..我应该在哪里检查配置错误？

我正在运行最新的 xcode 版本 4.3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:26:37.923

确保您使用分发条款进行构建。我为此使用了一个新的 Xcode 构建配置（称为 Ad Hoc），并确保我的存档构建使用这个新的构建配置。客户需要一份此分发条款的副本（他双击），然后您将 ipa 文件发送给他。他将它拖到他的 iTunes 库中，然后他就可以将应用程序安装到他的设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:26:58.653

有时需要在设备上单独安装配置文件。我曾经与拥有 Windows 的团队成员一起遇到过这个问题。

只需将配置文件发送给您的客户并要求将其安装在设备上。

您可能需要[iPhone 配置实用程序](http://www.apple.com/support/iphone/enterprise/)才能在设备上安装配置文件。

# javascript - 是否可以在 coucdhb 列表函数中包含外部 javascript 代码？

> ID：10248078
> 
> 赞同：2
> 
> 时间：2012-04-20T14:21:00.470
> 
> 标签：javascript, couchdb

...不再添加标题：

我有一个列表函数，它根据数组中包含的一些值格式化视图的结果

var 数组=[val1, val2, val3...]

由于这个数组也用于我的 javascript 客户端函数，并从服务器上的 globvar.js 文件中获取，是否可以将它包含在列表函数中？

如何？

我应该执行一个ajax请求吗？

谢谢回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:58:35.643

你可以把它放在一个 CommonJS 模块中：[http ://wiki.apache.org/couchdb/CommonJS_Modules](http://wiki.apache.org/couchdb/CommonJS_Modules)

您不能在 CouchDB 中执行 ajax 请求。

编辑：最新文档位于[http://docs.couchdb.org/en/latest/query-server/javascript.html#require](http://docs.couchdb.org/en/latest/query-server/javascript.html#require)

# joomla - 要在空白页面上呈现的 Joomla 模块或组件

> ID：10248080
> 
> 赞同：2
> 
> 时间：2012-04-20T14:21:04.870
> 
> 标签：joomla, joomla-module

我开发了一个 Joomla 模块，它确实提供了一个表单、处理其发布数据、进行一些计算并显示结果。

该模块包括一个用于打印结果的按钮。我目前正在使用 JavaScript 打开一个新窗口，粘贴相关的 HTML 并打开打印对话框。

而不是 JavaScript，我更愿意为打印视图提供一个单独的 URL，并在 _blank 目标中简单地打开它。这将使应用程序更适合使用屏幕阅读器或没有可用 JavaScript 的人。

有什么方法可以告诉 Joomla 不要将模板与我的模块一起呈现？我在想创建一个组件可以解决这个问题，但不得不发现组件也被渲染到模板中......

顺便说一句：我有 Joomla 1.5.22

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:59:08.993

要实现您想要的，您必须向`tmpl=component`请求 URL 添加额外的查询字符串参数。这将禁用模板和模块渲染。

您的 URL 将如下所示：`index.php?option=com_xxx&view=xxx&tmpl=component`

由于您使用的是 Joomla 1.5，您可以请求`index2.php?option=com_xxx&view=xxx`并且它只会呈现组件。Joomla 2.5 没有，`index2.php`因此如果您计划将来迁移，请不要使用此选项。

如果您使用的是 SEF，那么`?tmpl=component`在 URL 的末尾添加就可以了。

* * *

更深入一点......在您的模板目录中，您有`component.php`文件，即`tmpl`参数正在加载的文件。您可以复制`component.php`到`my_component.php`，进行必要的更改并加载您的自定义组件模板`index.php?option=com_xxx&view=xxx&tmpl=my_component`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:57:48.467

joomla 的做法是将你的输出设置为“原始”，见这个 tut：

[http://www.katcode.com/displaying-raw-output-in-joomla-by-setting-format-in-the-component/](http://www.katcode.com/displaying-raw-output-in-joomla-by-setting-format-in-the-component/)

# android - 通过 X 和 Y 连接器获取小部件

> ID：10248088
> 
> 赞同：0
> 
> 时间：2012-04-20T14:21:36.940
> 
> 标签：android, drag-and-drop, expandablelistview

好的，首先我不确定我做对了，所以我将解释我想要从我的应用程序中得到什么：

我有一个从左侧拆分为两个组的屏幕（更具体的是 ExpandableListView），在左侧我有各种可拖动的按钮。我想让用户将每个按钮拖到某个组，然后将按钮文本添加为​​该组的子项。

所以我试图做的是使用（setOnTouchListener）将touchListener添加到每个按钮并实现用户拖动它的位置，所以我现在有了用户释放btn的X和Y，我怎么知道哪个列表项在 (x,y) 点上？

如果这是正确的方法吗？

谢谢。

**编辑：** 好的，为了更清楚，我正在添加屏幕快照：

![屏幕快照](../Images/3443a138057aad11d2843305fe171d22.png)

我想要的是将按钮拖到列表中的某个项目并使用所选项目做一些事情（比如说 - 重命名它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:20:18.383

好的，我明白了——如果有人去过这里，这就是我解决它的方法——遍历所有列表子项并检查这个 p=(x,y) 是否在命中矩形中：

```
int count = draggTo.getChildCount();
for (int i = i; i < count; i--) {
    View child = draggTo.getChildAt(i);
    child.getHitRect(frame);
    if (frame.contains(x, y)) {
        return draggTo.getFirstVisiblePosition() + i;
    }
} 
```

# .net - WCF 是为 .NET 客户端托管复杂类库的正确架构服务选择吗？

> ID：10248089
> 
> 赞同：4
> 
> 时间：2012-04-20T14:21:42.423
> 
> 标签：.net, wcf, soa, class-library

我正在尝试将一个相当复杂的类库作为服务公开，我认为 WCF，但是非常环保，并且正在努力理解我在架构上能做什么和不能做什么。如果我的客户也是 .NET（比如说 WinForms、WPF 和/或 ASP.NET MVC3），那么编写一堆合同来重新公开公共类或序列化复杂对象似乎有点过头了。从那里的许多教程中很难知道，因为其中很多只适用于值/原始类型。

WCF是要走的路吗？如果是这样，如果类库将管理数据的所有方面并且只公开对象，那么哪种风格最容易实现？

一个简单的类比：一个`HumanBody`需要作为服务公开的类，允许多个用户，永远在线等。如果我有一个 .NET Applause 客户端，我想做类似的事情

```
ServiceName.HumanBody myBody = new HumanBody();
myBody.Parts.Hands.Clap(); 
```

我必须将这些对象转换为接口并编写一堆包装器方法，但这些对象是“完整的”，因为它们存在——这就是为什么我觉得它有点矫枉过正。（我知道我没有正确考虑这个问题——这就是问题的原因。如果这些问题太模糊，我会改进评论/答案。）

（另外，请注意，我*并不是*在问如何实际完成这个问题——这个问题已经有很多版本了，[这里](https://stackoverflow.com/a/1759470/409856)和[这里](https://stackoverflow.com/a/3042655/409856)有几个值得注意的好答案。还有一个非常有用的教程关于如何构建你自己的WCF 架构，[这里](http://www.dnrtv.com/default.aspx?showNum=122)没有 VS 自动添加的混乱。我正在自己完成构建。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:31:36.220

WCF 很可能是最适合您的途径。但是，在您开始考虑如何处理它之前，我认为我们需要稍微澄清一下服务是什么。

一项服务，无论它使用何种传输层（HTTP、HTTPS、TCP、UDP、MSMQ、运营商 pidgeons 等），都只是一个带有*参数的操作列表*。就其本身而言，您不能将“HumanBody”类作为服务公开。服务不是面向对象的；它们非常像程序化编程。

当然，您可以将复杂的对象图作为参数发送，或者将它们作为服务操作的返回值返回。您还可以编写您的客户端库，使您的服务接口是面向对象的，但您的实际服务命令不会这样。

要使用上面的示例，您可以将其作为服务接口：

```
public interface IHumanBodyService
{
    ClapHands(<parameters>);
} 
```

`<parameters>`这里将是发送到服务所需的任何识别信息，以便它知道要做什么。这可能是整个`myBody`对象图（当然是序列化的，但只要你的类被正确注释，WCF 就会为你处理好），或者它可能是像 a`BodyId`或`PersonId`value 这样简单的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T14:35:40.030

任何要在网络上运行的界面都应该尽可能地不说话。也就是说，它最好在网络上的一次往返中执行大多数操作。

您使用链接方法调用的示例是一个很好的面向对象的 API，但不幸的是，所有这些函数调用都非常健谈。要将其公开为良好的网络服务，必须将其包装在服务层中，该服务层包含客户端所需的每个基本功能的一种方法。必须将要传输的数据分组到数据传输对象中——只有属性而没有行为的类。

WCF 旨在支持这一设计原则。有一个仅操作服务合同接口和仅数据数据合同类。

我认为 WCF 是一个不错的选择，因为它可以帮助您将面向对象的设计包装在网络优化的服务层中。

# javascript - 如何将 JS 控制台注入任何页面？jsconsole.com

> ID：10248092
> 
> 赞同：2
> 
> 时间：2012-04-20T14:21:49.440
> 
> 标签：javascript, debugging

出于教育目的，我想**远程**调试在我无权访问源代码的移动设备上运行的应用程序，只要我了解通过[http://jsconsole.com](http://jsconsole.com)直接注入可以实现：

> [http://jsconsole.com/inject.html](http://jsconsole.com/inject.html)
> 
> [http://jsconsole.com/inject.html?javascript](http://jsconsole.com/inject.html?javascript:(function(s) :(function(s){s.src='http://jsconsole.com/inject.js';document.body.appendChild(s)})(文档.createElement('脚本'))

我尝试按照说明进行操作，在我的设备上创建了博彩公司以及所有内容，但我**不知道**如何使其工作，有人知道它是如何工作的吗？

> 此页面应立即重定向到正确的 url，一旦重定向，请在您的手机上进行书市，然后删除 [http://jsconsole.com/inject.html](http://jsconsole.com/inject.html)？（包括问号）部分让小书签工作。
> 
> 或者，要注入 JS 控制台，请在书市上购买：JS 控制台并同步到您的手机。

例如，我如何使用[http://jsconsole.com](http://jsconsole.com)远程调试这个 jQueryUI ???: [http://jqueryui.com/demos/resizable/default.html](http://jqueryui.com/demos/resizable/default.html)

谢谢！

PS，jsconsole 截屏[http://www.youtube.com/watch?v=Y219Ziuipvc](http://www.youtube.com/watch?v=Y219Ziuipvc)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:47:20.450

启动并运行 jsconsole 后，键入命令：

```
:listen 
```

开始远程调试。

这是我为使这项工作为我所做的工作：

1.  转到 JSConsole.Com 的控制台
2.  运行命令`:listen`- 这会为您生成一个带有 JS url 的唯一键。
3.  复制它为 JS 文件提供的 url，它看起来像： http://jsconsole.com/remote.js? [C180AA15-F9E3-406F-A8F5-F27267DE69C6](http://jsconsole.com/remote.js?C180AA15-F9E3-406F-A8F5-F27267DE69C6)
4.  打开一个新的浏览器窗口并转到您要调试的 URL
5.  将以下内容粘贴到浏览器中，替换上面生成的 URL：`javascript:(function(s){s.src='http://jsconsole.com/remote.js?C180AA15-F9E3-406F-A8F5-F27267DE69C6';document.body.appendChild(s)})(document.createElement('script'));`
6.  返回控制台窗口，它会告诉您它已连接：

> 与 [http://jqueryui.com/demos/resizable/default.html](http://jqueryui.com/demos/resizable/default.html) Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19 建立连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:56:02.563

右键单击书签。

单击上下文菜单中的编辑。

`http://jsconsole.com/inject.html?`从中删除。

现在转到您要分析的页面并左键单击书签。您将被重定向到[http://jsconsole.com/](http://jsconsole.com/)，现在您可以对所需的页面进行任何操作。例如，您可以通过键入`document.title`并按 Enter 来检查标题。

# javascript - 使用 Javascript/JQuery 枚举@font-face URL

> ID：10248100
> 
> 赞同：5
> 
> 时间：2012-04-20T14:22:47.627
> 
> 标签：javascript, jquery, font-face

有没有办法使用 JavaScript 或 JQuery 枚举给定 HTML 页面的所有 @font-face URL（网络字体 URL）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T09:26:31.833

是的，假设您的意思是要查找样式表中指定的所有 @font-faces，而不是 HTML 文档本身中实际使用的。

给定一个合理的标准样式表，如下所示：

```
@font-face {
    font-family: 'Lobster12Regular';
    src: url('fonts/lobster_1.2-webfont.eot');
    src: url('fonts/lobster_1.2-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/lobster_1.2-webfont.woff') format('woff'),
         url('fonts/lobster_1.2-webfont.ttf') format('truetype'),
         url('fonts/lobster_1.2-webfont.svg#Lobster12Regular') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'AllerRegular';
    src: url('fonts/aller_std_rg-webfont.eot');
    src: url('fonts/aller_std_rg-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/aller_std_rg-webfont.woff') format('woff'),
         url('fonts/aller_std_rg-webfont.ttf') format('truetype'),
         url('fonts/aller_std_rg-webfont.svg#AllerRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'AllerBold';
    src: url('fonts/aller_std_bd-webfont.eot');
    src: url('fonts/aller_std_bd-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/aller_std_bd-webfont.woff') format('woff'),
         url('fonts/aller_std_bd-webfont.ttf') format('truetype'),
         url('fonts/aller_std_bd-webfont.svg#AllerBold') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'AllerLight';
    src: url('fonts/aller_std_lt-webfont.eot');
    src: url('fonts/aller_std_lt-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/aller_std_lt-webfont.woff') format('woff'),
         url('fonts/aller_std_lt-webfont.ttf') format('truetype'),
         url('fonts/aller_std_lt-webfont.svg#AllerLight') format('svg');
    font-weight: normal;
    font-style: normal;

}

h1 {
    font-family: 'Lobster12Regular';
}

h2 {
    font-family: 'AllerRegular';
} 
```

那么下面的 HTML（带有内联 Javascript）或多或少会起到作用：

```
<html>

<head>

<link rel="stylesheet" href="test.css">

</head>

<body>

<h1>Hello</h1>
<h2>Hello</h2>

<script type="text/javascript">

var pattern=/url\(.*?\)/g;
for (var i=0;i<document.styleSheets[0].cssRules.length;i++)
{
    var urls=document.styleSheets[0].cssRules[i].cssText.match(pattern);
    if (urls)
    {
        for (var j=0;j<urls.length;j++)
        {
            alert(urls[j]);
        }
    }
}

</script>

</body>

</html> 
```

有一些警告：

首先，指定@font-face 的主要方法之一依赖于指定src 两次，这种技术只会选择第二个src。

我没有测试过这个跨浏览器，但它可以在我的浏览器上运行，并且会弹出一个带有每个字体 url 的警告框。

硬编码的 [0] 使其仅查看第一个样式表（在此示例中只有一个）。如果需要，编写另一个循环来遍历所有样式表是相当简单的，但对于这个例子来说似乎有点过分了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:31:13.810

不，不是。似乎只有这种技术： http: [//paulirish.com/2009/font-face-feature-detection/](http://paulirish.com/2009/font-face-feature-detection/)来检测是否`@font-face`可以使用，但不能检测正在使用的*字体*。没有解析所有的 CSS 代码服务器端（或至少服务器端协助）没有办法做你想做的事，而不仅仅是 JS 和 jQuery。对于那个很抱歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T07:56:28.633

这是我刚刚写的供自己使用的东西，在 Chrome 上运行良好，尚未在其他浏览器上测试过——但对我来说似乎相当标准。

它需要 jquery，并将识别所有正在使用的字体及其来源（如果是 webfonts）。

请注意，它不能充分处理字体的变化（不同的“粗体”版本），也不能处理定义了多种字体的样式（例如：font-family: fonta、fontb、fontc）。

```
jQuery.fn.elementText = function() {
    return $(this)  
            .clone()
            .children()
            .remove()
            .end()
            .text()
            .replace(/^\s\s*/, '').replace(/\s\s*$/, '')
            ;
};

Font = function(family, src) {
    // In order to properly categorise complex font setups, weight and style need to be 
    // considered as part of a unique font. (TODO)
    this.family = family;
    this.src = src;
    this.weight = null;
    this.style = null;
};

Font.prototype.toString = function() {
    return '[Font ' + this.family + ': ' + this.src + ']';
};

var fontNames = {};
var fontObjects = [];

$(':visible').each(function (k, v) {
    var $v = $(v);
    var font;
    if ($v.elementText().length) {
        font = $v.css('font-family');
        // TODO: seperate by comma, remove quotes
        fontNames[font] = font;
    }
});

for (var sheet=0; sheet < document.styleSheets.length; sheet++)
for (var i=0; i<document.styleSheets[sheet].cssRules.length; i++)
{
    var rule = document.styleSheets[sheet].cssRules[i];
    if (rule instanceof CSSFontFaceRule) {
        if (fontNames[rule.style.fontFamily])
            fontObjects.push(
                    new Font(rule.style.fontFamily, rule.style.src) );
    }
}

fontObjects.forEach( function(v) { console.log(v.toString()); }); 
```

示例输出（在这里您可以看到当您有不同的“粗体”、“斜体”等字体样式定义时会发生什么情况的示例）：

```
[Font 'ITC Legacy Sans Std': url(http://localhost/~admin/tmp/fonts/LegacySansStd-BookItalic.otf)]
[Font 'ITC Legacy Sans Std': url(http://localhost/~admin/tmp/fonts/LegacySansStd-Book.otf)]
[Font 'ITC Legacy Sans Std': url(http://localhost/~admin/tmp/fonts/LegacySansStd-MediumItalic.otf)]
[Font 'ITC Legacy Sans Std': url(http://localhost/~admin/tmp/fonts/LegacySansStd-Medium.otf)]
[Font 'ITC Legacy Sans Std': url(http://localhost/~admin/tmp/fonts/LegacySansStd-BoldItalic.otf)]
[Font 'ITC Legacy Sans Std': url(http://localhost/~admin/tmp/fonts/LegacySansStd-Bold.otf)]
[Font 'ITC Legacy Sans Std': url(http://localhost/~admin/tmp/fonts/LegacySansStd-Ultra.otf)]
[Font 'Ocean Sans Std': url(http://localhost/~admin/tmp/fonts/OceanSansStd-LightIta.otf)]
[Font 'Ocean Sans Std': url(http://localhost/~admin/tmp/fonts/OceanSansStd-Light.otf)]
[Font 'Ocean Sans Std': url(http://localhost/~admin/tmp/fonts/OceanSansStd-Book.otf)]
[Font 'Ocean Sans Std': url(http://localhost/~admin/tmp/fonts/OceanSansStd-SemiboldIta.otf)]
[Font 'Ocean Sans Std': url(http://localhost/~admin/tmp/fonts/OceanSansStd-Semibold.otf)]
[Font 'Ocean Sans Std': url(http://localhost/~admin/tmp/fonts/OceanSansStd-Bold.otf)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-18T20:07:00.147

您还可以获得带有变体和 URL 的字体系列。
以下是jQuery中的代码

```
var fontArray = [];
$.get("https://www.googleapis.com/webfonts/v1/webfonts?key={your key}&sort=popularity", {}, function (data) {
    var count = 0;
    $.each(data.items, function (index, value) {
        count++
        fontArray.push(value);
    });
}); 
```

# android - 容器“Android Dependencies”引用了不存在的库“facebook-android-sdk\facebook\bin\com_facebook_android.jar”

> ID：10248102
> 
> 赞同：27
> 
> 时间：2012-04-20T14:22:52.220
> 
> 标签：android, eclipse, facebook, sdk

我正在尝试在我的项目中使用 facebook sdk，但是不断收到以下错误：

```
The container 'Android Dependencies' references non existing library 'facebook-android-sdk\facebook\bin\com_facebook_android.jar' 
```

有没有人经历过/解决了这个问题？

谢谢

错误如下所示：

```
The container 'Android Dependencies' references non existing library
'C:\Users\Mandip\facebook-android-sdk\facebook\bin\com_facebook_android.jar'
 The method onClick(View) of type new View.OnClickListener(){} must
override a superclass
 method FbDialog.java   /com_facebook_android/src/com/facebook/android  line
 101    Java Problem

 The method onServiceConnected(ComponentName, IBinder) of type
 Facebook.TokenRefreshServiceConnection must override a superclass
 method Facebook.java   /com_facebook_android/src/com/facebook/android  line
 575

The method onServiceDisconnected(ComponentName) of type
Facebook.TokenRefreshServiceConnection must override a superclass
method  Facebook.java   /com_facebook_android/src/com/facebook/android  line
 581 
```

在解决构建路径错误之前，无法构建项目。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-21T00:53:56.140

com_facebook_android 项目中是否有 bin 文件夹？如果没有，则没有构建 Facebook SDK。转到项目-> 自动构建并启用它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-20T14:42:58.647

试试这个方法

![图书馆的制作方法](../Images/4d310545e72eebfc6f55e1736df816f9.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-24T07:31:46.297

对于遇到这种情况的任何人：

去：`Project > Clean > Clean all projects.`

这可能并不总是有效，但对我来说，每当出现某种依赖错误时，在项目加载期间（在创建新项目之后）我只是这样做并且令人惊讶的是它有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-09T07:54:44.583

就我而言，Eclipse .project 文件中缺少 APK Builder 构建命令：

```
<buildCommand>
    <name>com.android.ide.eclipse.adt.ApkBuilder</name>
    <arguments/>
</buildCommand> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-21T06:14:13.463

在 Eclipse 中为高级版本（比如 4.4）创建新项目时，我遇到了类似的问题。它会自动创建一个 appcompat 库并添加作为对新 Android 项目的引用以提供向后兼容性。新项目引用 bin 文件夹中的 appcompat.jar 并且它不存在，直到构建 appcompat 库。我按照以下步骤...

1.  清理并构建您的 appcompat 库项目。它创建 bin 文件夹并将 appcompat.jar 放入其中。
2.  清理并构建您的主要项目。错误已解决。

注意：如果您仍然没有得到 bin/appcompat.jar，则在项目属性中取消选中 IsLibrary 选项，然后构建，然后选中此选项并清理构建。它会创建 bin/appcompat.jar 并解决问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-20T00:17:19.010

这是可能发生的事情。你清理了很多项目，包括一些 Java 库。有时您可能会清除整个工作区。这将杀死它们 bin 目录中的 jar 文件。您可能只重建了您的项目。问题是您现在必须在您清除的工作区中重建库。之后您将看到 bin 文件夹不再为空。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-21T12:14:28.390

就我而言，这些文件位于 appcombat_v7/lib 文件夹中。

所以我所做的是右键单击 .jar 文件（将有两个文件选择 android-support-v4.jar），然后选择**Build Path > Add to Build Path**。

这样做是将此文件添加到构建路径（即，它将将此文件添加到“bin 文件夹”），这将解决问题。

# c# - 解决依赖关系和构建树的算法

> ID：10248104
> 
> 赞同：5
> 
> 时间：2012-04-20T14:22:58.823
> 
> 标签：c#, algorithm, generic-programming

谷歌搜索没有产生任何想法或解决方案，SO搜索也没有。（存在一篇标题相同但动机不同的帖子）。

### 是否有众所周知的算法、模式来解决依赖关系和构建对象层次结构。

1.  它必须能够构建依赖输出树
2.  处理循环依赖

注意：我可以构建一个参考现有产品构建的产品来执行此操作，但知道会发生什么，应该如何发生，我会比其他解决方案更快地完成它。

该算法的范围将是 java 脚本依赖管理器、家族树构建器以及更多可以从规范构建树或层次结构的东西。例如，在这里采用 javascript 依赖管理器是算法的工作方式。

```
Script a dependends

 1\. script b 
 2\. script c. 
```

和

```
Script b depends

 1\. Script x 
 2\. Script y 
```

和

```
Script x depends

1\. Script J 
```

所以这是加载脚本的顺序

```
Script j

  Script a

  Script x, Script y

          Script b 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T14:29:29.887

您正在寻找**拓扑排序**。你会在互联网上找到很多关于这方面的信息。

# php - 如何检查字符串是否仅包含特定字符

> ID：10248107
> 
> 赞同：11
> 
> 时间：2012-04-20T14:23:12.197
> 
> 标签：php, preg-match

我需要检查一个字符串以确定它是否包含除 之外的任何字符`|`，以便分配那些除了`|`NULL 值之外什么都没有的变量（理论上可以有任意数量的`|`字符，但可能不会超过 5-6 ）。像`||||`

我可以看到循环遍历字符串的每个字符或类似的东西，但我觉得必须有一种更简单的方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-20T14:26:05.283

```
if (preg_match('/[^|]/', $string)) {
    // string contains characters other than |
} 
```

或者：

```
if (strlen(str_replace('|', '', $string)) > 0) {
    // string contains characters other than |
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T14:27:11.823

是的，您可以使用正则表达式：

```
if(! preg_match('/[^\|]/', $string)) {
  $string = NULL;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-29T10:02:53.117

我想检查一个字符串是否只包含某些字符。为了防止双重否定（因为我发现它们更难阅读）我决定使用以下正则表达式：

```
preg_match('/^[|]+$/', $string) 
```

这会从头到尾检查一个字符串是否只包含`|`字符（至少一个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T14:40:08.973

最快和最简单的方法可能是 stripos 函数。它返回一个字符串在另一个字符串中的位置，如果找不到，则返回 false：

```
if (false === stripos($string, '|')) {
    $string = null;
} 
```

是严格类型比较所`false ===`需要的，因为 stripos 可以返回一个零，表明 | 在第一个字符上。

您可以使用更复杂的验证引擎，使阅读更容易。我推荐[Respect\Validation](http://documentup.com/Respect/Validation)。使用示例：

```
if (v::not(v::contains('|'))->validate($string)) {
    $string = null;
} 
```

# java - 调整大小会使事情出错

> ID：10248108
> 
> 赞同：2
> 
> 时间：2012-04-20T14:23:19.533
> 
> 标签：java, swing, jinternalframe

我想创建一个包含一些组件的 JInternalFrame。

我的目标是用 Java 设计一个 bash 控制台。

我的框架由 4 个组件组成：

*   JTextArea 包含在 JScrollPane 中
*   带有文本“Cmd：”的 JLabel
*   JTextField
*   带有文本“发送”的 JButton

我有以下代码：

```
Box box = Box.createHorizontalBox();
box.add(Box.createVerticalStrut(5));
box.add(this.cmd_label);
box.add(Box.createVerticalStrut(5));
box.add(this.cmd_input);
box.add(Box.createVerticalStrut(5));
box.add(this.submit);
box.add(Box.createVerticalStrut(5));

Box mainBox = Box.createVerticalBox();
mainBox.add(Box.createHorizontalStrut(5));
mainBox.add(this.result_scroll);
mainBox.add(Box.createHorizontalStrut(5));
mainBox.add(box);
mainBox.add(Box.createHorizontalStrut(5));
add(mainBox); 
```

所以当frame还没有被最大化的时候，我有一个正确的样子：

![非最大化帧](../Images/86c2e9969fade8efbf1dd953217c96cb.png)

但是当我最大化它时，所有组件的位置都不正确：

![最大化框架](../Images/9474d3b5e5772c903b6e5983d607077b.png)

所以，这是我的问题：如何为组件设置权重以每次都修复它们的位置，或者，我该如何修复它？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:30:43.537

我认为使用`BorderLayout`. 在 BorderLayout 中，指定为中心组件的组件将扩展以填充尽可能多的空间，而其他组件将保持其首选大小。

```
int hgap = 5;
int vgap = 5;
internalFrame.getContentPane().setLayout(new BorderLayout(hgap, vgap));
internalFrame.getContentPane().add(this.result_scroll, BorderLayout.CENTER);
JPanel bottomPanel = new JPanel();
bottomPanel.add(this.cmd_label);
bottomPanel.add(this.cmd_input);
bottomPanel.add(this.submit);
internalFrame.getContentPane().add(bottomPanel, BorderLayout.SOUTH); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T15:09:10.007

在这里尝试这段代码，这种行为是否异常：

```
import java.awt.*;
import javax.swing.*;

public class LayoutExample
{
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("LAYOUT EXAMPLE");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel centerPanel = new JPanel();
        centerPanel.setLayout(new BorderLayout(5, 5));
        centerPanel.setBorder(
                    BorderFactory.createEmptyBorder(2, 2, 2, 2));
        JTextArea tarea = new JTextArea(10, 10);
        tarea.setBackground(Color.DARK_GRAY.darker());  
        tarea.setForeground(Color.WHITE);
        tarea.setCaretColor(Color.WHITE);
        tarea.setLineWrap(true);

        JScrollPane scrollPane = new JScrollPane(tarea);
        centerPanel.add(scrollPane, BorderLayout.CENTER);

        JPanel footerPanel = new JPanel();
        footerPanel.setLayout(new BorderLayout(5, 5));
        footerPanel.setBorder(
                    BorderFactory.createEmptyBorder(2, 2, 2, 2));       
        JLabel cmdLabel = new JLabel("Cmd : ");         
        JTextField tfield = new JTextField(10);

        JPanel buttonPanel = new JPanel();
        buttonPanel.setBorder(
                    BorderFactory.createEmptyBorder(2, 2, 2, 2));
        JButton sendButton = new JButton("SEND");

        footerPanel.add(cmdLabel, BorderLayout.LINE_START);
        footerPanel.add(tfield, BorderLayout.CENTER);
        buttonPanel.add(sendButton);
        footerPanel.add(buttonPanel, BorderLayout.LINE_END);

        frame.getContentPane().add(centerPanel, BorderLayout.CENTER);
        frame.getContentPane().add(footerPanel, BorderLayout.PAGE_END);

        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {   
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new LayoutExample().createAndDisplayGUI();
            }
        });
    }
} 
```

输出 ：

![开始](../Images/942c720ed28b7812908df3ba7db076c2.png)

![最大化时](../Images/d94581d22074fe7f87951c578b99e509.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T10:24:28.870

这里的基本问题是我认为 JTextField 的最大布局提示中的一个错误：它在水平*和*垂直维度上都是无界的。后者对于为显示单行文本而设计的组件纯粹是胡说八道。要修复，子类化并让它返回其高度的首选项，例如：

```
JTextField cmdInput = new JTextField() {

    @Override
    public Dimension getMaximumSize() {
        Dimension max = super.getMaximumSize();
        max.height = getPreferredSize().height;
        return max;
    }

}; 
```

由于 BoxLayout 尊重 maxSize，现在多余的高度将仅提供给顶框。

从长远来看，考虑切换到第三方管理器，它允许在多合一面板方法中进行微调。是的，这是我目前最喜欢的：MigLayout。将以下几行与上面的所有嵌套和边框技巧进行比较，玩得开心:-)

```
MigLayout layout = new MigLayout("wrap 3, debug", 
        "[][grow, fill][]", // 3 columns, middle column filled and allows growing
        "[grow, fill][]"); // two rows, first filled and allows growing

JComponent content = new JPanel(layout);
// the scrollPane in the first row spanning all columns
// and growing in both directions 
content.add(new JScrollPane(new JTextArea(20, 20)), "span, grow");
// auto-wrapped to first column in second row
content.add(new JLabel("Cmd:"));
content.add(new JTextField());
content.add(new JButton("Submit")); 
```

# c# - 类语法与 C＃

> ID：10248109
> 
> 赞同：1
> 
> 时间：2012-04-20T14:23:24.437
> 
> 标签：c#, .net, class, generics

> **可能重复：**
> [“T”在 C# 中是什么意思？](https://stackoverflow.com/questions/400314/what-does-t-mean-in-c)
> [<T> 在 C# 中表示什么](https://stackoverflow.com/questions/9857180/what-does-t-denote-in-c-sharp)

我已经搜索过这个问题，但是因为我对该语法一无所知，所以我搜索得不够好。好吧，在简短的解释之后，我的问题是：

当我在寻找粒子效果库时，我遇到了这个：

```
[Serializable]
public class DPSF<Particle, Vertex> : IDPSFParticleSystem
  where Particle : global::DPSF.DPSFParticle, new()
  where Vertex : struct, global::DPSF.IDPSFParticleVertex
{
  // constructors, methods, parameters here ...
} 
```

这个符号在毯子（<...>）中是什么意思以及它是如何使用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:27:53.520

它们是可以传递到类定义中的泛型类型：

一个简单的例子：

```
public class Test<T>
{
   public T yourVariable;  
}

Test<int> intClass = new Test();
Test<string> stringClass = new Test();

intClass.yourVariable // would be of type int
stringClass.yourVariable // would be of type string 
```

其中 T 是您想要的类型（即另一个类，字符串，整数，任何通用的）

其中 Particle : global::DPSF.DPSFParticle - 表示 Particle 对象必须继承自 DPSF.DPSFParticle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:27:28.593

这意味着 DPSF 类是一个泛型类。<> 之间的 Particle 和 Vertex 是类型参数。这意味着 DPSF 获取两种类型作为参数并用作泛型类。

看看这里：[MSDN：泛型](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.80%29.aspx)

**编辑** Where 关键字允许您限制类型参数。where:class 表示参数必须是一个类才能使这个泛型类工作。

# extjs - ExtJS 滑块拇指在点击时一直向上

> ID：10248111
> 
> 赞同：0
> 
> 时间：2012-04-20T14:23:48.333
> 
> 标签：extjs, slider

正如标题所说，我有一个滑块（Ext.slider.Single），它的 minValue 为 0，maxValue 为 14。用户单击某个位置后，滑块的最小值和最大值分别更改为 15 和 26。

如果滑块在第一个配置中（0 - 14），我可以通过单击要设置的位置来移动拇指。但是如果滑块在第二个配置中，如果我单击滑块上的任何位置，拇指就会移动一路攀升。我只能通过拖动来移动它。

这些值设置正常，因为我在工具提示上显示它们并且它们显示正常。

有任何想法吗 ？

编辑：这就是我创建滑块的方式......

```
Ext.create('Ext.slider.Single', {
                                hideLabel: false,
                                name:'mySlider',
                                useTips: true,
                                increment:1,
                                vertical: true,
                                height:470,
                                minValue: 0,
                                maxValue: 14,
                                tipText: function(thumb){
                                        return Ext.String.format('<b>{0}</b>',thumb.slider.up('window').calculateValue(thumb.value));
                                    }
                            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:29:59.537

您需要使用 setMinValue/setMaxValue 方法，而不仅仅是设置 minValue/maxValue，以便控件可以处理新边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:04:19.733

我有同样的问题！

当我这样做`my_slider.setMinValue(min)`时，最小值会改变它，但拇指会变得疯狂。最后，我在 UnveN 的帖子和 JavaScript 函数的帮助下解决了这个问题。

```
min = Number(min);
my_slider.setMinValue(min); 
```

# c# - 从后面的代码调用 javascript 函数的框架

> ID：10248114
> 
> 赞同：1
> 
> 时间：2012-04-20T14:23:56.257
> 
> 标签：c#, javascript, .net

前段时间（1 个月左右）我看到了一个框架，它的主要功能之一是能够从后面的代码调用 javascript 函数，我的硬盘在一周前死在我身上，所以我丢失了书签，有人可以告诉我该框架的名称或具有该功能的另一个框架的名称？

因为我想保持我的代码干净并避免使用 RegisterClientScriptBlock 或 ClientScript.RegisterStartupScript，所以这些都是邪恶的......

编辑：这是第 3 方框架，因此与 Microsoft 框架无关

我想将框架与 Backbone.js 及其侦听器功能一起使用，因此我可以将 JSON 对象发送到 js 函数，它会轻松更新我的 html 模板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:26:07.503

只需使用 asp.net ajax [http://www.asp.net/ajaxlibrary/act.ashx](http://www.asp.net/ajaxlibrary/act.ashx)

# hibernate - Grails 的 MySQL 错误

> ID：10248115
> 
> 赞同：1
> 
> 时间：2012-04-20T14:24:02.183
> 
> 标签：hibernate, grails

添加新实体订单并运行应用程序时，我在我的 cmd 中收到此 MYSQL 错误消息，谁能告诉我为什么会收到这样的错误。

```
| Error 2012-04-21 00:03:28,002 [Thread-7] ERROR hbm2ddl.SchemaUpdate  - Unsucce
ssful: create table order (id bigint not null auto_increment, version bigint not
 null, customer_id bigint not null, item_id bigint not null, notes varchar(255)
not null, order_date datetime not null, order_price varchar(255) not null, qty v
archar(255) not null, taken_by varchar(255) not null, primary key (id)) ENGINE=I
nnoDB
| Error 2012-04-21 00:03:28,006 [Thread-7] ERROR hbm2ddl.SchemaUpdate  - You hav
e an error in your SQL syntax; check the manual that corresponds to your MySQL s
erver version for the right syntax to use near 'order (id bigint not null auto_i
ncrement, version bigint not null, customer_id b' at line 1
| Error 2012-04-21 00:03:28,008 [Thread-7] ERROR hbm2ddl.SchemaUpdate  - Unsucce
ssful: alter table item add index FK317B13A35B400E (order_id), add constraint FK
317B13A35B400E foreign key (order_id) references order (id)
| Error 2012-04-21 00:03:28,009 [Thread-7] ERROR hbm2ddl.SchemaUpdate  - You hav
e an error in your SQL syntax; check the manual that corresponds to your MySQL s
erver version for the right syntax to use near 'order (id)' at line 1
| Error 2012-04-21 00:03:28,011 [Thread-7] ERROR hbm2ddl.SchemaUpdate  - Unsucce
ssful: alter table order add index FK651874E47370946 (item_id), add constraint F
K651874E47370946 foreign key (item_id) references item (id)
| Error 2012-04-21 00:03:28,013 [Thread-7] ERROR hbm2ddl.SchemaUpdate  - You hav
e an error in your SQL syntax; check the manual that corresponds to your MySQL s
erver version for the right syntax to use near 'order add index FK651874E4737094
6 (item_id), add constraint FK651874E47370946 fo' at line 1
| Error 2012-04-21 00:03:28,016 [Thread-7] ERROR hbm2ddl.SchemaUpdate  - Unsucce
ssful: alter table order add index FK651874EF3CCBB66 (customer_id), add constrai
nt FK651874EF3CCBB66 foreign key (customer_id) references customer (id)
| Error 2012-04-21 00:03:28,019 [Thread-7] ERROR hbm2ddl.SchemaUpdate  - You hav
e an error in your SQL syntax; check the manual that corresponds to your MySQL s
erver version for the right syntax to use near 'order add index FK6

51874EF3CCBB6
6 (customer_id), add constraint FK651874EF3CCBB6' at line 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:30:23.783

您无法命名表`order`，因为它是 SQL 语法中的保留字：http: [//dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。但是，您可以使用映射将表名更改为订单：

```
class Order {
    static mapping = {
        table "orders"
    }
} 
```

# javascript - 如何防止浏览器使用 JavaScript 打开新的选项卡/窗口？

> ID：10248118
> 
> 赞同：1
> 
> 时间：2012-04-20T14:24:14.333
> 
> 标签：javascript, firefox, svg, mousedown

我在使用 JavaScript 和 SVG 时遇到问题。当我按下 CTRL（或 ALT）键在 SVG 元素上执行 mouseDown 事件时，浏览器（Firefox）会打开一个新选项卡/窗口。我想简单地调用一个函数来操作我的 SVG 文档，而无需打开任何新选项卡或窗口。我不关心浏览器的属性。我一直在处理我的另一个代码，即使我在相同条件下单击 SVG 元素也没有任何反应，但这是一个遗留代码，有超过 9000 行，我无法确定浏览器行为的原因不同。

所以，我想知道 SVG 文档是否有任何属性可以设置为避免新的选项卡/窗口。

实际上，我确实意识到这个问题与 svg 的 hte xlink 有关。我有一些定义为符号的项目

```
<symbol id="TANQs">
     <path d="m 97,42 a74,74 0 0,0 -94,0" />
     <rect x="3" y="42" width="94" height="26" />
</symbol> 
```

而且我也使用了元素，例如上面的示例：

```
<use id="TQ-43120" x="100" y="200" **xlink:href="#TANQs"** onmouseover="mouseOver(evt)" onmouseout="mouseOut(evt)" oculto="false">
      <lasca:segmento tag="2&quot;-HC-310-1702-Ba-V-B1-SEG1"/>
</use> 
```

当我单击使用元素时会出现我的问题，导致浏览器将它们视为普通链接，因此当我按下 hte ctrl 键单击时，它会打开一个新选项卡。我想知道是否有任何方法可以避免浏览器的这种行为。

正如建议的那样，命令 preventDefault() 和 stopPropagation() 似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:12:22.437

找到了一个简单的修复方法，就是将可信的“return false”添加到根 SVG 元素。
例如：

```
<svg ... onclick="return false;">...</svg> 
```

将成功停止浏览器打开新标签页或窗口。

# c# - 用于发送大型 HTTPWebRequest 的应用程序因内存不足异常而崩溃

> ID：10248119
> 
> 赞同：2
> 
> 时间：2012-04-20T14:24:18.793
> 
> 标签：c#, httpwebrequest

要求是为 Web 服务的压力测试创建一个应用程序。想法是将 1000K 大小为 4 KB 的 HTTPWebRequest 轰炸到 Web 服务为了实现这一点，我们创建了一个应用程序，其结构类似于几个线程正在添加要在队列中发送的数据，而线程池正在发送这些请求是异步的。 `Task responseTask = Task.Factory.FromAsync(testRequest.BeginGetResponse, testRequest.EndGetResponse, null);"`但是现在发生的事情是经过一段时间后，每秒请求数显着减少（可能是因为服务的响应时间增加了。但是如果我们再次异步发送请求，响应时间会很重要吗？ ）。除此之外，一段时间后，该工具崩溃并显示“应用程序已停止工作”消息，并且异常显示为内存不足异常。

我观察到的一件事是在应用程序崩溃之前，Web 服务的响应时间显着增加。它是坠机的间接原因吗？

它的补救措施是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:27:12.917

也许您正在排队任务而没有限制，因此未决请求的数量无限增加。即使使用异步行为，您也需要节流。

# ios - 有没有办法检测坐标源

> ID：10248122
> 
> 赞同：0
> 
> 时间：2012-04-20T14:24:28.277
> 
> 标签：ios, cllocationmanager, cllocation

为了改善我的地理位置，我想检查在委托方法 locationManager:didUpdateToLocation:fromLocation: 中收到的坐标是否来自 gps 信号或 wifi 信号。可能吗 ？

我知道如果坐标属性“verticalAccuracy”优于0，这是一种检测坐标是否来自gps信号的方法，但即使对于室内地理定位似乎也是如此（所以基于wifi的地理定位）

# php - 使用 SimpleXML 加载 XML 不会返回某些元素的属性

> ID：10248125
> 
> 赞同：6
> 
> 时间：2012-04-20T14:24:41.637
> 
> 标签：php, parsing, attributes, simplexml

我已经使用加载了一个 XML 文件

```
simplexml_load_file($filePath,'SimpleXMLElement', LIBXML_NOCDATA); 
```

对于大多数提供的 XML，它都可以正常工作。但是，对于 XML 中的某些元素，属性不会转换为“@attributes”数组，而是会从输出中丢失。这是一个示例：

```
<UI_DEFINITION>
<EDIT_PERMISSION>testPermission</EDIT_PERMISSION>
<DEFAULT_VALUES>
    <display>hidden</display>
    <css_class>generic_css_class</css_class>
    <title>{tag}</title>
    <type>string</type>
    <wrapper_format>{value}</wrapper_format>
    <full_path>false</full_path>
    <mandatory>false</mandatory>
    <edit_permission>testPermission</edit_permission>
    <max_length>0</max_length>
</DEFAULT_VALUES>
<LOOKUPS>
    <DB_LOOKUP name="test3">
        <VIEW>???</VIEW>
        <ID_FIELD>???</ID_FIELD>
        <DESCR_FIELD>???</DESCR_FIELD>
        <ORDER>??? asc</ORDER>
    </DB_LOOKUP>
    <DB_LOOKUP name="test1">
        <VIEW>???</VIEW>
        <ID_FIELD>???</ID_FIELD>
        <DESCR_FIELD>???</DESCR_FIELD>
        <ORDER>??? asc</ORDER>
    </DB_LOOKUP>
</LOOKUPS>
<AREA internal_name="main_details" title="" display="show">
    <FIELD lookup="test1" title="Title">Title</FIELD>
    <FIELD title="Name">Given_Name</FIELD>
    <FIELD title="Mid. Name(s)">Middle_Names</FIELD>
    <FIELD title="Family Name">Family_Name</FIELD>
    <FIELD title="Gender">Gender</FIELD>
    <FIELD title="Born" type="date">Date_of_Birth</FIELD>
    <FIELD max_length="20" title="ID">Unique_Identifier</FIELD>
</AREA> 
```

这给出了 print_r 的以下输出（我在问题所在的位添加了换行符）：

```
SimpleXMLElement Object ( [UI_DEFINITION] => SimpleXMLElement Object ( [EDIT_PERMISSION] => testPermission [DEFAULT_VALUES] => SimpleXMLElement Object ( [display] => hidden [css_class] => generic_css_class [title] => {tag} [type] => string [wrapper_format] => {value} [full_path] => false [mandatory] => false [edit_permission] => testPermission [max_length] => 0 ) [LOOKUPS] => SimpleXMLElement Object ( [DB_LOOKUP] => Array ( [0] => SimpleXMLElement Object ( [@attributes] => Array ( [name] => test3 ) [VIEW] => ??? [ID_FIELD] => ??? [DESCR_FIELD] => ??? [ORDER] => ??? asc ) [1] => SimpleXMLElement Object ( [@attributes] => Array ( [name] => test1 ) [VIEW] => ??? [ID_FIELD] => ??? [DESCR_FIELD] => ??? [ORDER] => ??? asc ) ) ) 
[AREA] => SimpleXMLElement Object ( [@attributes] => Array ( [internal_name] => main_details [title] => [display] => show ) [FIELD] => Array ( [0] => Title [1] => Given_Name [2] => Middle_Names [3] => Family_Name [4] => Gender [5] => Date_of_Birth [6] => Unique_Identifier ) ) ) ) 
```

如您所见，属性数组已正确添加到大多数元素中，但未正确添加到 FIELD 元素中。我试过重命名它们，但似乎没有什么不同。

编辑：我还应该补充一点，我已经尝试用 FIELDS 标签包围 FIELD 标签，但也无济于事。

编辑：

我极大地简化了 XML，但它仍然不返回 anny 属性：

```
<UI_DEFINITION>
                            <FIELD lookup="test1" title="Title">Title</FIELD>
                    </UI_DEFINITION> 
```

产生：

```
SimpleXMLElement Object ( [UI_DEFINITION] => SimpleXMLElement Object ( [FIELD] => Title ) ) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T14:35:43.897

属性是可访问的，例如：

```
$obj = simplexml_load_string($xml);

foreach($obj->AREA->FIELD as $field)
{
   echo $field->attributes()->title . '<br />';
} 
```

`print_r()`并不总是显示 SimpleXML 的完整结构，但属性是可以使用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T08:31:30.853

抱歉这么久才回来回答这个问题！

正如 MrCode 所建议的，这些属性**是**可以访问的。我的问题在于将 SimpleXML 对象序列化为另一种格式。在 while 对象上使用 printr 或 json_convert 导致属性在报告的情况下不可用。

我在这方面做得还不够深入，无法找到基于代码的解决方法来打印或转换这些对象（包括有问题的情况），我只是将其作为 XML 数据的一部分来解决：

```
<UI_DEFINITION>
        <FIELD lookup="test1" title="Title"><VALUEPATH>Title</VALUEPATH></FIELD>
 </UI_DEFINITION> 
```

将此额外级别添加到层次结构中会导致属性保留在顶层，并且文本值在子级别正确可用。

# .net - 无法从“M/yy/d”确定年、月和日期的顺序

> ID：10248136
> 
> 赞同：1
> 
> 时间：2012-04-20T14:25:07.283
> 
> 标签：.net, parsing, datetime, formatting, date-format

当我运行时：
`Date.Parse(Now.ToString("M/yy/d"), New Globalization.DateTimeFormatInfo() With {.ShortDatePattern = "M/yy/d"})`

我收到错误消息：

```
Could not determine the order of year, month, and date from 'M/yy/d'. 
```

这种（奇怪的）格式是否被禁止？它是一个错误吗？

注意
我不知道为什么需要这种格式。

**编辑**
建议`Date.ParseExact(Now.ToString("M/yy/d"), "M/yy/d",New Globalization.DateTimeFormatInfo() )` 给出：

```
String was not recognized as a valid DateTime. 
```

**Edit2**
我正在使用 NET Framework 4.0（Windows）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:12:49.307

问题是由两个组成部分造成的：

1.  您当前的文化使用与不变的文化默认值 ( ) 不同的日期分隔符`/`。
2.  when`/`用作格式字符串的一部分，`DateTime.Parse`或者`DateTime.ParseExact`它[不被翻译为文字正斜杠](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#dateSeparator)，而是*作为来自指定格式提供程序的日期分隔符，无论是什么*（如果你希望它按字面意思理解，你必须使用“转义序列” `%/`）。

所以有很多方法可以正确地做到这一点：

```
Date.ParseExact(Now.ToString("M/yy/d"), "M%/yy%/d", Nothing) 
```

这只是告诉`ParseExact`从字面上解释斜杠。

```
Date.ParseExact(Now.ToString("M/yy/d"), "M/yy/d",
              New Globalization.DateTimeFormatInfo() With {.DateSeparator = "/"}) 
```

这告诉`ParseExact`使用文字斜杠作为日期分隔符，更改其当前文化的默认行为。

顺便说一句：我使用`ParseExact`而不是`Parse`因为当您知道输入具有特定格式时它更适合；`Parse`尝试使用启发式方法自行确定格式，这在这种情况下是不合适的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-05T12:31:58.730

老问题，但代码已过时。接受的答案详细说明了为什么会发生这种情况+1。

```
DateTime.ParseExact("11/11/1997", "MM/dd/yyyy", null, System.Globalization.DateTimeStyles.None); 
```

# git - Git：如何列出此分支上的提交而不是合并分支上的提交

> ID：10248137
> 
> 赞同：102
> 
> 时间：2012-04-20T14:25:17.297
> 
> 标签：git, branch, git-branch, git-log

假设您的 git 提交历史如下所示：

```
A---B---C---D---E---F master
     \         /
      X---Y---Z topic 
```

是否有可能只列出主、AF 上的提交？换句话说，如果提交是在合并的分支上，我不希望它显示。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-04-20T14:44:08.080

`git log`有选项`--first-parent`，所以你不会得到`topic`历史。

从 合并时`master`，`master`提交是合并中的第一个父项。Git 日志允许仅显示带有 --first-parent 的那些提交，因此您得到了正确的东西。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-10-27T20:38:56.230

*TLDR*：`git log origin/master --no-merges`将为您提供主日志并排除任何合并的提交（在本例中为 x, y, z ）

**原始点**

还有另一种通用方法可以解决这个问题，它不依赖于`--first-parent`在某些情况下会有所帮助..使用分支排除过滤器

`git log origin/topic ^origin/master` 这将为您`origin/topic`提供所有已`origin/master`删除提交的日志。

您还可以添加`--no-merges`其中将隐藏您可能想要或可能不想要的合并提交。

另一个方便的技巧是使用它`shortlog`而不是`log`它会给你更多的简短摘要，可以方便地用于发布说明，或交流分支中的内容。

**更新**
重新阅读后，您实际上会想要与我发布的内容几乎相反的内容；但是它最终会排除 master 和 foo( `git log origin/master ^origin/foo`) 上的所有内容。但是，您也可以通过`git log origin/master --no-merges`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-27T07:40:39.110

查尔斯的回答对我有用。

```
git log has option --first-parent --no-merges, so you won't get topic history. 
```

但是，如果您在 Git 活动中使用任何图形用户界面，例如 Git Extension、SourceTree、Tortoise Git、

然后有直接选项可以检查工具中的第一个父级。我想将此答案添加到列表中，因为大多数人发现图形界面很容易。如果需要，您可以直接从工具中挑选来自该特定分支的所有提交。

我附上了两个工具的示例，其他工具也类似：[我已经模糊了用户名，git repo 名称，因为这是一个私有存储库，但您仍然可以了解如何使用工具中的第一个父级]

1.  Git 扩展
    *   打开 Git Extension -> Checkout the feature branch you want to see the commits，有一个选项可以选择第一个提交，如图所示：

[![在此处输入图像描述](../Images/44a82158ea184f485277a053cfa6d601.png)](https://i.stack.imgur.com/wrupa.jpg)

2.  乌龟 Git
    *   打开存储库文件夹 -> 单击从 Tortoise Git 显示日志 -> 签出分支并选择第一个提交，如图所示

[![在此处输入图像描述](../Images/3b9dcd24194c7892638b38f160595eb7.png)](https://i.stack.imgur.com/t7haP.png)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-04-20T14:28:23.537

这不起作用吗？

```
git log master
git log --stat master 
```

# ios - 如何在 Cocoa-Touch 中实现拖放 ImageView？

> ID：10248139
> 
> 赞同：0
> 
> 时间：2012-04-20T14:25:27.993
> 
> 标签：ios, drag-and-drop, uiimageview

我如何在我的应用程序中拖动图像（超过两个），因为它正在处理两个图像但想在同一个视图中拖动大约 20 个图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:46:03.340

最简单的方法是，为`UIPanGestureRecognizer`每个视图添加一个，它应该是可拖动的。

或者你可以写一个`UIView`-subclass 并覆盖`TouchesBegan, TouchesMoved and TouchesEnded`。因此，每个视图都处理自己的拖动操作。

如果你想看一个例子，也许我的`JDDroppableView`帮助：
[https ://github.com/jaydee3/JDDroppableView](https://github.com/jaydee3/JDDroppableView)

您还可以查看这些线程中的任何一个：
[https ://stackoverflow.com/search?q=drag+drop+ios](https://stackoverflow.com/search?q=drag+drop+ios)

# c++ - 设置 png++ 工作

> ID：10248145
> 
> 赞同：3
> 
> 时间：2012-04-20T14:25:39.470
> 
> 标签：c++, png

我正在尝试编译一些使用 png++ 加载/编写 .png 图像的基本示例（这是 libpng 的 c++ 包装器。使用 png++ 而不是替代方法对我来说非常重要。作为先决条件 png++ 需要我拥有的 libpng成功建造。

我试图弄清楚如何设置的示例位于以下链接。 [http://fedetft.wordpress.com/2010/10/05/handling-png-images-in-cpp/](http://fedetft.wordpress.com/2010/10/05/handling-png-images-in-cpp/) 它附带了一个 cmakelist，我正在使用 Cmake 构建这两个示例。

但是，当我构建它时，我收到以下错误：“无法检测到字节顺序。” 来自 config.hpp

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T14:42:02.907

我认为，libpng++ 不正确地定义了一个 WIN32 平台。

您可以尝试将config.hpp 文件中的**#elif defined(__WIN32)**替换为**#elif defined(WIN32)**。

PS我现在没有安装libpng++，所以我可能错了。

PSS 而且它只适用于 Windows，ofc。

# opencms - 无法在 openCMS 中使用站点地图编辑器

> ID：10248148
> 
> 赞同：1
> 
> 时间：2012-04-20T14:26:03.010
> 
> 标签：opencms

我是openCMS的新手。我无法使用站点地图编辑器，当我单击 .config 文件时，窗口打开并出现错误：

> “从路径“/.content/.config”读取资源时出错。原因：无法读取资源“/.content/.config”。

错误日志：

```
org.opencms.file.CmsVfsResourceNotFoundException: Error reading resource from path "/.content/.config".
    at org.opencms.file.CmsVfsResourceNotFoundException.createException(CmsVfsResourceNotFoundException.java:71)
    at org.opencms.db.CmsDbContext.throwException(CmsDbContext.java:334)
    at org.opencms.db.CmsDbContext.report(CmsDbContext.java:286)
    at org.opencms.db.CmsSecurityManager.readResource(CmsSecurityManager.java:4687)
    at org.opencms.file.CmsObject.readResource(CmsObject.java:2943)
    at org.opencms.file.CmsObject.readResource(CmsObject.java:2910)
    at org.opencms.file.CmsObject.readDefaultFile(CmsObject.java:2238)
    at org.opencms.main.OpenCmsCore.initResource(OpenCmsCore.java:1396)
    at org.opencms.main.OpenCmsCore.showResource(OpenCmsCore.java:1595)
    at org.opencms.main.OpenCmsServlet.doGet(OpenCmsServlet.java:153)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.opencms.file.CmsVfsResourceNotFoundException: Unable to read resource "/.content/.config".
    at org.opencms.db.generic.CmsVfsDriver.readResource(CmsVfsDriver.java:2163)
    at org.opencms.db.CmsDriverManager.readResource(CmsDriverManager.java:7310)
    at org.opencms.db.CmsSecurityManager.readResource(CmsSecurityManager.java:6922)
    at org.opencms.db.CmsSecurityManager.readResource(CmsSecurityManager.java:4685)
    ... 20 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:39:22.740

Are you under the right context? OpenCms cannot find `/.content/.config`... I guess you really want to access `/sites/default/.content/.config`? In that case, set the site context in your OpenCms explorer:

![Set site context](../Images/c2548c55c9514401c80cf215c26e9e79.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T19:42:09.313

你试过这样的东西吗？

1.  检查您是否在正确的站点
2.  检查您是否有正确的类型文件夹，这将是子站点地图
3.  检查您在“.content”中的类型是否正确，必须是“content_folder”，.config 的类型必须是“sitemap_config”
4.  检查您是否在元素类型容器页面上设置了标题

# c# - uplifting return value 错误报告给 Exceptions

> ID：10248153
> 
> 赞同：0
> 
> 时间：2012-04-20T14:26:08.557
> 
> 标签：c#, error-handling

在框架设计指南书中有一章是关于异常的，他们讨论了基于返回值的错误报告和基于异常的错误报告，以及我们在像 C# 这样的 OO 语言中应该避免基于返回值的错误报告和使用例外。考虑到这一点，我查看了八年前用 Visual Basic 编写的代码，去年使用自动工具转换为 C#！

所以这是我正在研究的一种方法，我想知道那本书中的建议是否适用于这种方法，如果是的话，那么重写这种方法的更好方法是什么？

```
public int Update(CaseStep oCaseStepIn)
{
    int result = 0;
    //Update the master object with the passed in object

    result = UCommonIndep.gnUPDATE_FAILED;
    if (Validate(oCaseStepIn) == UCommonIndep.gnVALIDATE_FAILED)
    {
        return result;
    }

    CaseStep oCaseStep = get_ItemByObjectKey(oCaseStepIn.CopyOfObjectKey);
    if (oCaseStep == null)
    {
        return result;
    }   

    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:34:26.727

尽可能抛出特定的异常。然后，在这种情况下您**不需要返回值。**

```
public void Update(CaseStep oCaseStepIn)
{
    //Update the master object with the passed in object
    if (Validate(oCaseStepIn) == UCommonIndep.gnVALIDATE_FAILED)
        throw new ValidationFailedUpdateException();

    CaseStep oCaseStep = get_ItemByObjectKey(oCaseStepIn.CopyOfObjectKey);
    if (oCaseStep == null)
        throw new KeyObjectNotFoundUpdateException();

    if (oCaseStep.Update(oCaseStepIn) != UCommonIndep.gnUPDATE_SUCCESSFUL)
        throw new UpdateFailedException();

    //*******************************
    //FYI - Insert code here to update any Key values that might have changed.
} 
```

*   UpdateFailedException 扩展异常
*   ValidationFailedUpdateException 扩展了 UpdateFailedException
*   KeyObjectNotFoundUpdateException 扩展了 UpdateFailedException

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:35:19.043

（至少）关于异常处理的意见与编码人员一样多，但一个好的经验法则是应该在异常情况下抛出异常。

那么，更新失败是例外情况吗？

# java - Jooq - 忽略重复

> ID：10248155
> 
> 赞同：2
> 
> 时间：2012-04-20T14:26:19.767
> 
> 标签：java, sql, database, jooq

我目前正在将 Jooq 用于一个项目，但我需要一种方法来忽略插入时的重复键。

我有一个要写入表的对象数组，但如果它们已经存在，由 START_TS 和 EVENT_TYPE 上的复合唯一索引确定，我希望插入静默失败。

我的代码看起来像这样：

```
InsertValuesStep<MyRecord> query = fac.insertInto(MY_REC,
                MY_REC.START_TS,
                MY_REC.STOP_TS,
                MY_REC.EVENT_DATA,
                MY_REC.EVENT_TYPE,
                MY_REC.PUBLISHED_TS,
                MY_REC.MY_ID
                );

        for(int i=0;i<recs.length;i++)
        {
            MyClass evt = recs[i]; 
            query.values(
                    new java.sql.Date(evt.startTS.getTime()),
                    (evt.stopTS == null) ? null : new java.sql.Date(evt.stopTS.getTime()),
                    evt.eventData,
                    evt.type.name(),
                    date,
                    id)

        }

        query.execute(); 
```

这样的解决方案将是理想的：[https ://stackoverflow.com/a/4920619/416338](https://stackoverflow.com/a/4920619/416338)

我想我需要添加如下内容：

```
.onDuplicateKeyUpdate().set(MY_REC.EVENT_TYPE,MY_REC.EVENT_TYPE); 
```

但是无论我添加什么，它似乎仍然会在重复项上引发错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:25:45.513

对 MySQL 语法的支持在[jOOQ 2.3.0](https://sourceforge.net/apps/trac/jooq/ticket/1295)[`INSERT IGNORE INTO`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)的路线图上。最近在[jOOQ 用户组](https://groups.google.com/d/topic/jooq-user/LvfNGIKpvn8/discussion)上讨论了这个问题。此语法将在支持 SQL语句的所有其他 SQL 方言中进行模拟。`MERGE`

同时，作为一种解决方法，您可以尝试一次插入一条记录

# javascript - 在html中获取标签内的文本

> ID：10248158
> 
> 赞同：0
> 
> 时间：2012-04-20T14:26:24.147
> 
> 标签：javascript, html, cakephp-2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:30:32.827

这将从带有`unassignedUsers`元素的锚点中获取文本：

```
var links_list = [];
var links = document.getElementById('unassignedUsers').getElementsByTagName('a');
for(var a in links) {
   if(typeof links[a] == undefined) continue;
   links_list.push(links[a].innerHTML);
} 
```

# java - 无法在本地通过 wifi 连接 PC/Android

> ID：10248160
> 
> 赞同：0
> 
> 时间：2012-04-20T14:26:30.810
> 
> 标签：java, android, sockets, wifi, lan

我正在开发一款需要在您的 PC 和 Android 之间交换消息的游戏。PC（192.168.2.104）和安卓（192.168.2.160）连接到同一个路由器，但不能互通消息。我可以使用 VM 运行它，但不能使用智能手机，连接超时并且应用程序停止。使用的版本是 Android 和 Windows 7 PC 的 2.3.4。这是关于连接的Android代码：

```
public class Connetti extends Activity {
EditText txtIp;
EditText txtNick;
TextView lblConferma;
Button btnConnetti;
static String serverIp;
static String nickname;
Socket socket = null;
DataOutputStream dataOutputStream = null;

public static String getIp(){
    return serverIp;
}

public static String getNick(){
    return nickname;
}

 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        /* fullscreen */
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.connetti);
        /* gui */
         txtIp= (EditText)findViewById(R.id.txtIp);
         txtNick= (EditText)findViewById(R.id.txtNick);
         btnConnetti=(Button)findViewById(R.id.btnConnetti);
         btnConnetti.setOnClickListener(btnConnettiOnClickListener);
         lblConferma = (TextView)findViewById(R.id.lblConferma); 
 }

 Button.OnClickListener btnConnettiOnClickListener= new Button.OnClickListener(){
        /* imposta le azioni al click del bottone */
         public void onClick(View arg0) {
             btnConnetti.setClickable(false);
             /* viene salvato come stringa il contenuto dell'area di testo */
             serverIp=txtIp.getText().toString();
             nickname=txtNick.getText().toString();
             /* imposta una stringa nell'area dedicata al messaggio di conferma */
             lblConferma.setText("In attesa che l'host avvii la partita...");

             /* Inizio Connessione */
             try {

                    /* imposta la connessione verso un certo IP, tramite la porta 8888 */
                    socket = new Socket(""+serverIp, 8888);
                    dataOutputStream = new DataOutputStream(socket.getOutputStream());
                    /* invia il nickname del giocatore al pc */
                    dataOutputStream.writeUTF(nickname);
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                finally{
                    /* chiude connessione e rimuove le strutture dati per l'I/O in uscita*/
                    if (socket != null){
                        try {
                            socket.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }

                    if (dataOutputStream != null){
                        try {
                            dataOutputStream.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }

                }

             return;
         }
     };} 
```

这是在 PC 上监听的线程代码：

```
public class ThreadConnection extends Thread{
JTextArea textGiocatore;
int maxGiocatore = 6;
public InetAddress[] arrayGiocatore = new InetAddress [maxGiocatore];
int contaGiocatore = 0;
InetAddress indirizzo;
String nome;
int i=0;
boolean ctrlFlag=false;
String eol=System.getProperty("line.separator");
//int porta=8888;
public FileWriter fileIndirizzi;

public ThreadConnection(JTextArea textGiocatore){
    this.textGiocatore=textGiocatore;
}

public void creaGiocatore(int contaGiocatore, String nome, InetAddress indirizzo,FileWriter fileIndirizzi){
    try {
        fileIndirizzi.append(nome+eol);
        fileIndirizzi.append(indirizzo.getHostAddress()+eol);
        fileIndirizzi.flush();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    textGiocatore.append("Nome del giocatore "+contaGiocatore+": "+nome+eol);
    textGiocatore.append("IP di "+nome+": "+indirizzo.getHostAddress()+eol); //se qualcosa non funziona guarda qua, indirizzo potrebbe dare problemi
    textGiocatore.append("_________________________________"+eol);
}

public void run(){
    ServerSocket serverSocket = null;
    Socket socket = null;
    DataInputStream dataInputStream = null;
//  DataOutputStream dataOutputStream = null;

    /* apertura di una connessione verso la porta 8888 */
    try {
        serverSocket = new ServerSocket(8888);
        //textArea.append("Listening :8888"+eol);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    /* creazione file in scrittura (INUTILE) */

        try{
            fileIndirizzi = new FileWriter("fileIndirizzi.txt");
        }
       catch (IOException e) {
            textGiocatore.append("Errore: " + e + eol);
            System.exit(1);
        }

    while(true){
        try {

            /* attesa di una connessione in entrata nella porta aperta in precedenza */
            textGiocatore.append("In attesa di giocatori sulla porta "+8888+eol);
            socket = serverSocket.accept();
            /* creazione strutture dati per I/O */
            dataInputStream = new DataInputStream(socket.getInputStream());
    //      dataOutputStream = new DataOutputStream(socket.getOutputStream());
            /* ottenimento IP del cellulare connesso */ 
            indirizzo=socket.getInetAddress();
            nome=dataInputStream.readUTF();

            /* inserimento e controllo degli IP nella combo box */
        if(contaGiocatore==0){
            arrayGiocatore[contaGiocatore]=indirizzo;
            creaGiocatore(contaGiocatore, nome, indirizzo, fileIndirizzi);
            contaGiocatore++;
        }
        else{
            ctrlFlag=false;
            for(i=0; i<contaGiocatore; i++){
                if((indirizzo.equals(arrayGiocatore[i])==true)){
                    ctrlFlag=true;
                }   
            }
            /* se questo flag è falso significa che l'IP non è presente nella combo box
             * e quindi viene inserito questo item
             */
            if(ctrlFlag==false){
                arrayGiocatore[contaGiocatore]=indirizzo;
                creaGiocatore(contaGiocatore, nome, indirizzo, fileIndirizzi);
                contaGiocatore++;
            }
        } 

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        finally{
            if ( fileIndirizzi != null)
                try {
                    fileIndirizzi.close();
                } catch (IOException e) {
                // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            /* vengono chiuse la connessione e le strutture dati per l'I/O */
            if( socket!= null){
                try {
                    socket.close();
                } catch (IOException e) {
                // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            if( dataInputStream!= null){
                try {
                    dataInputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

/*          if( dataOutputStream!= null){
                try {
                    dataOutputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } */
        } 
    }

}} 
```

Eclipse 不报告错误，并且使用 VM 一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:04:31.060

尝试添加：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

到您的 AndroidManifest.xml。例子：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="godard.tuatini"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/app_icon"
    android:label="@string/app_name" >
    <activity
        android:name=".activity.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

此外，您应该将应用程序的网络部分放在一个线程中。对于 android 使用 AsyncTask 来做到这一点。

# netbeans - 在 netbeans 中将 EJB 添加到 Web 应用程序

> ID：10248162
> 
> 赞同：0
> 
> 时间：2012-04-20T14:26:47.513
> 
> 标签：netbeans, java-ee-6, ejb-3.1

我正在学习如何使用 Java EE 6 在 netbeans 中创建 Web 应用程序的教程。导师通过右键单击项目名称->新建->会话 bean 添加了一个新 bean。当我尝试按照相同的说明进行操作时，我去 new 时没有找到会话 bean。我正在使用 netbeans 6.9.1。有没有办法添加它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:39:35.823

您可以使用左侧的项目窗格添加会话 bean。（如果未显示，请按`Ctrl + 1`或转到 windows -> 选择`Projects`）

然后添加会话bean

*   正确的项目
*   去新的
*   找 Session Beans，如果没有就去找别人
*   在那里找到一个名为“Enterprise JavaBeans”的类别
*   选择`Session Bean`
*   继续并完成向导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:56:12.573

（只是猜测，因为我用的是netbeans 7）项目名->new->other 在category中选择Enterprise JavaBeans，在file types中选择Session Bean :)

# php - 通过删除额外/冗余的格式化标签来清理 HTML

> ID：10248166
> 
> 赞同：36
> 
> 时间：2012-04-20T14:26:58.533
> 
> 标签：php, html, dom, html-parsing, bbcode

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T01:28:08.540

## 介绍

到目前为止，最好的解决方案是使用`HTML Tidy` [http://tidy.sourceforge.net/](http://tidy.sourceforge.net/)

> 除了转换文档的格式之外，Tidy 还能够通过使用 clean 选项自动将弃用的 HTML 标记转换为其级联样式表 (CSS) 对应项。生成的输出包含一个内联样式声明。

它还确保 HTML 文档`xhtml`兼容

## 例子

```
$code ='<p>
 <strong>
  <span style="font-size: 14px">
   <span style="color: #006400">
     <span style="font-size: 14px">
      <span style="font-size: 16px">
       <span style="color: #006400">
        <span style="font-size: 14px">
         <span style="font-size: 16px">
          <span style="color: #006400">This is a </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
    <span style="color: #006400">
     <span style="font-size: 16px">
      <span style="color: #b22222">Test</span>
     </span>
    </span>
   </span>
  </span>
 </strong>
</p>'; 
```

如果你跑

```
$clean = cleaning($code);
print($clean['body']); 
```

输出

```
<p>
    <strong>
        <span class="c3">
            <span class="c1">This is a</span> 
                <span class="c2">Test</span>
            </span>
        </strong>
</p> 
```

你可以得到CSS

```
$clean = cleaning($code);
print($clean['style']); 
```

输出

```
<style type="text/css">
    span.c3 {
        font-size: 14px
    }

    span.c2 {
        color: #006400;
        font-size: 16px
    }

    span.c1 {
        color: #006400;
        font-size: 14px
    }
</style> 
```

我们的完整 HTML

```
$clean = cleaning($code);
print($clean['full']); 
```

输出

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
    <style type="text/css">
/*<![CDATA[*/
    span.c3 {font-size: 14px}
    span.c2 {color: #006400; font-size: 16px}
    span.c1 {color: #006400; font-size: 14px}
    /*]]>*/
    </style>
  </head>
  <body>
    <p>
      <strong><span class="c3"><span class="c1">This is a</span>
      <span class="c2">Test</span></span></strong>
    </p>
  </body>
</html> 
```

## 使用的功能

```
function cleaning($string, $tidyConfig = null) {
    $out = array ();
    $config = array (
            'indent' => true,
            'show-body-only' => false,
            'clean' => true,
            'output-xhtml' => true,
            'preserve-entities' => true 
    );
    if ($tidyConfig == null) {
        $tidyConfig = &$config;
    }
    $tidy = new tidy ();
    $out ['full'] = $tidy->repairString ( $string, $tidyConfig, 'UTF8' );
    unset ( $tidy );
    unset ( $tidyConfig );
    $out ['body'] = preg_replace ( "/.*<body[^>]*>|<\/body>.*/si", "", $out ['full'] );
    $out ['style'] = '<style type="text/css">' . preg_replace ( "/.*<style[^>]*>|<\/style>.*/si", "", $out ['full'] ) . '</style>';
    return ($out);
} 
```

=================================================

## 编辑 1：肮脏的黑客（不推荐）

=================================================

根据您的最后评论，您希望保留贬值风格..`HTML Tidy`可能不允许您这样做，`depreciated`但您可以这样做

```
$out = cleaning ( $code );
$getStyle = new css2string ();
$getStyle->parseStr ( $out ['style'] );
$body = $out ['body'];
$search = array ();
$replace = array ();

foreach ( $getStyle->css as $key => $value ) {
    list ( $selector, $name ) = explode ( ".", $key );
    $search [] = "<$selector class=\"$name\">";
    $style = array ();
    foreach ( $value as $type => $att ) {
        $style [] = "$type:$att";
    }
    $replace [] = "<$selector style=\"" . implode ( ";", $style ) . ";\">";
} 
```

输出

```
<p>
  <strong>
      <span style="font-size:14px;">
        <span style="color:#006400;font-size:14px;">This is a</span>
        <span style="color:#006400;font-size:16px;">Test</span>
        </span>
  </strong>
</p> 
```

## 使用的类

```
//Credit : http://stackoverflow.com/a/8511837/1226894
class css2string {
var $css;

function parseStr($string) {
    preg_match_all ( '/(?ims)([a-z0-9, \s\.\:#_\-@]+)\{([^\}]*)\}/', $string, $arr );
    $this->css = array ();
    foreach ( $arr [0] as $i => $x ) {
        $selector = trim ( $arr [1] [$i] );
        $rules = explode ( ';', trim ( $arr [2] [$i] ) );
        $this->css [$selector] = array ();
        foreach ( $rules as $strRule ) {
            if (! empty ( $strRule )) {
                $rule = explode ( ":", $strRule );
                $this->css [$selector] [trim ( $rule [0] )] = trim ( $rule [1] );
            }
        }
    }
}

function arrayImplode($glue, $separator, $array) {
    if (! is_array ( $array ))
        return $array;
    $styleString = array ();
    foreach ( $array as $key => $val ) {
        if (is_array ( $val ))
            $val = implode ( ',', $val );
        $styleString [] = "{$key}{$glue}{$val}";

    }
    return implode ( $separator, $styleString );
}

function getSelector($selectorName) {
    return $this->arrayImplode ( ":", ";", $this->css [$selectorName] );
}

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T06:14:45.630

这是一个使用浏览器获取嵌套元素属性的解决方案。无需级联属性，因为 css 计算样式已准备好从浏览器读取。

这是一个例子：http: [//jsfiddle.net/mmeah/fUpe8/3/](http://jsfiddle.net/mmeah/fUpe8/3/)

```
var fixedCode = readNestProp($("#redo"));
$("#simp").html( fixedCode );

function readNestProp(el){
 var output = "";
 $(el).children().each( function(){
    if($(this).children().length==0){
        var _that=this;
        var _cssAttributeNames = ["font-size","color"];
        var _tag = $(_that).prop("nodeName").toLowerCase();
        var _text = $(_that).text();
        var _style = "";
        $.each(_cssAttributeNames, function(_index,_value){
            var css_value = $(_that).css(_value);
            if(typeof css_value!= "undefined"){
                _style += _value + ":";
                _style += css_value + ";";
            }
        });
        output += "<"+_tag+" style='"+_style+"'>"+_text+"</"+_tag+">";
    }else if(
        $(this).prop("nodeName").toLowerCase() !=
        $(this).find(">:first-child").prop("nodeName").toLowerCase()
    ){
        var _tag = $(this).prop("nodeName").toLowerCase();
        output += "<"+_tag+">" + readNestProp(this) + "</"+_tag+">";
    }else{
        output += readNestProp(this);
    };
 });
 return output;
} 
```

输入所有可能的 css 属性的更好解决方案，例如：
var _cssAttributeNames = ["font-size","color"];
是使用这里提到的解决方案： [Can jQuery get all CSS styles associated with an element?](https://stackoverflow.com/questions/754607/can-jquery-get-all-css-styles-associated-with-an-element)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-20T14:30:42.460

您应该研究[HTMLPurifier](http://htmlpurifier.org/)，它是解析 HTML 并从中删除不必要和不安全内容的好工具。查看删除空跨度配置和东西。我承认，配置它可能有点像野兽，但这只是因为它用途广泛。

它也很重，所以你想把它的输出保存到数据库中（而不是从数据库中读取原始数据，然后每次都用净化器解析它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T05:08:21.030

我没有时间完成这个......也许其他人可以提供帮助。这个 javascript 也删除了完全重复的标签和不允许的标签......

有一些问题/要做的事情，
1）需要关闭重新生成的标签
2）如果标签名称和属性与该节点子节点中的另一个相同，它只会删除一个标签，所以它不够“智能”删除所有不必要的标签。
3) 它将查看允许的 CSS 变量并从元素中提取所有这些值，然后将其写入输出 HTML，例如：

```
var allowed_css = ["color","font-size"];
<span style="font-size: 12px"><span style="color: #123123"> 
```

将被翻译成：

```
<span style="color:#000000;font-size:12px;"> <!-- inherited colour from parent -->
<span style="color:#123123;font-size:12px;"> <!-- inherited font-size from parent --> 
```

* * *

# 代码：

```
<html>

<head>
<script type="text/javascript">
var allowed_css = ["font-size", "color"];
var allowed_tags = ["p","strong","span","br","b"];
function initialise() {
    var comment = document.getElementById("comment");
    var commentHTML = document.getElementById("commentHTML");
    var output = document.getElementById("output");
    var outputHTML = document.getElementById("outputHTML");
    print(commentHTML, comment.innerHTML, false);
    var out = getNodes(comment);
    print(output, out, true);
    print(outputHTML, out, false);
}
function print(out, stringCode, allowHTML) {
    out.innerHTML = allowHTML? stringCode : getHTMLCode(stringCode);
}
function getHTMLCode(stringCode) {
    return "<code>"+((stringCode).replace(/</g,"&lt;")).replace(/>/g,"&gt;")+"</code>";
}
function getNodes(elem) {
    var output = "";
    var nodesArr = new Array(elem.childNodes.length);
    for (var i=0; i<nodesArr.length; i++) {
        nodesArr[i] = new Array();
        nodesArr[i].push(elem.childNodes[i]);
        getChildNodes(elem.childNodes[i], nodesArr[i]);
        nodesArr[i] = removeDuplicates(nodesArr[i]);
        output += nodesArr[i].join("");
    }
    return output;
}
function removeDuplicates(arrayName) {
    var newArray = new Array();
    label:
    for (var i=0; i<arrayName.length; i++) {  
        for (var j=0; j<newArray.length; j++) {
            if(newArray[j]==arrayName[i])
                continue label;
        }
        newArray[newArray.length] = arrayName[i];
    }
    return newArray;
}
function getChildNodes(elemParent, nodesArr) {
    var children = elemParent.childNodes;
    for (var i=0; i<children.length; i++) {
        nodesArr.push(children[i]);
        if (children[i].hasChildNodes())
            getChildNodes(children[i], nodesArr);
    }
    return cleanHTML(nodesArr);
}
function cleanHTML(arr) {
    for (var i=0; i<arr.length; i++) {
        var elem = arr[i];
        if (elem.nodeType == 1) {
            if (tagNotAllowed(elem.nodeName)) {
                arr.splice(i,1);
                i--;
                continue;
            }
            elem = "<"+elem.nodeName+ getAttributes(elem) +">";
        }
        else if (elem.nodeType == 3) {
            elem = elem.nodeValue;
        }
        arr[i] = elem;
    }
    return arr;
}
function tagNotAllowed(tagName) {
    var allowed = " "+allowed_tags.join(" ").toUpperCase()+" ";
    if (allowed.search(" "+tagName.toUpperCase()+" ") == -1)
        return true;
    else
        return false;
}
function getAttributes(elem) {
    var attributes = "";
    for (var i=0; i<elem.attributes.length; i++) {
      var attrib = elem.attributes[i];
      if (attrib.specified == true) {
        if (attrib.name == "style") {
            attributes += " style=\""+getCSS(elem)+"\"";
        } else {
            attributes += " "+attrib.name+"=\""+attrib.value+"\"";
        }
      }
    }
    return attributes
}
function getCSS(elem) {
    var style="";
    if (elem.currentStyle) {
        for (var i=0; i<allowed_css.length; i++) {
            var styleProp = allowed_css[i];
            style += styleProp+":"+elem.currentStyle[styleProp]+";";
        }
    } else if (window.getComputedStyle) {
        for (var i=0; i<allowed_css.length; i++) {
            var styleProp = allowed_css[i];
            style += styleProp+":"+document.defaultView.getComputedStyle(elem,null).getPropertyValue(styleProp)+";";
        }
    }
    return style;
}
</script>
</head>

<body onload="initialise()">

<div style="float: left; width: 300px;">
<h2>Input</h2>
<div id="comment">
<p> 
 <strong> 
  <span style="font-size: 14px"> 
   <span style="color: #006400"> 
     <span style="font-size: 14px"> 
      <span style="font-size: 16px"> 
       <span style="color: #006400"> 
        <span style="font-size: 14px"> 
         <span style="font-size: 16px"> 
          <span style="color: #006400">This is a </span> 
         </span> 
        </span> 
       </span> 
      </span> 
     </span> 
    </span> 
    <span style="color: #006400"> 
     <span style="font-size: 16px"> 
      <span style="color: #b22222"><b>Test</b></span> 
     </span> 
    </span> 
   </span> 
  </span> 
 </strong> 
</p> 
<p>Second paragraph.
<span style="color: #006400">This is a span</span></p>
</div>
<h3>HTML code:</h3>
<div id="commentHTML"> </div>
</div>

<div style="float: left; width: 300px;">
<h2>Output</h2>
<div id="output"> </div>
<h3>HTML code:</h3>
<div id="outputHTML"> </div>
</div>

<div style="float: left; width: 300px;">
<h2>Tasks</h2>
<big>
<ul>
<li>Close Tags</li>
<li>Ignore inherited CSS style in method getCSS(elem)</li>
<li>Test with different input HTML</li>
</ul>
</big>
</div>

</body>

</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T17:27:23.797

[清理 HTML](http://www.cleanuphtml.com/cleanup.html)折叠标签，这似乎是您所要求的。但是，它会创建一个经过验证的 HTML 文档，其中的 CSS 已移至内联样式。许多其他 HTML 格式化程序不会这样做，因为它会更改 HTML 文档的结构。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T05:39:41.357

它可能无法完全解决您的确切问题，但我会在您的位置上做的是完全消除所有 HTML 标记，只保留痛苦文本和换行符。

完成后，切换到 markdown 我们的 bbcode 以更好地格式化您的评论。WYSIWYG 很少有用。

这样做的原因是因为您说您在评论中所拥有的只是演示数据，坦率地说，这并不是那么重要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T17:27:20.647

尽量不要使用 DOM 解析 HTML，但可能使用 SAX (http://www.brainbell.com/tutorials/php/Parsing_XML_With_SAX.htm)

SAX 从开头解析文档并发送诸如“元素开始”和“元素结束”之类的事件以调用您定义的回调函数

然后你可以为所有事件构建一种堆栈如果你有文本，你可以保存你的堆栈对那个文本的影响。

之后，您处理堆栈以构建具有您想要的效果的新 HTML。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-20T14:55:14.497

我知道您正在寻找 HTML DOM 清理程序，但也许 js 可以提供帮助？

```
function getSpans(){ 
var spans=document.getElementsByTagName('span') 
    for (var i=0;i<spans.length;i++){ 
    spans[i].removeNode(true);
        if(i == spans.length) {
        //add the styling you want here
        }
    } 
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-25T17:13:39.467

如果你想使用 jQuery，试试这个：

```
<p>
<strong>
  <span style="font-size: 14px">
   <span style="color: #006400">
     <span style="font-size: 14px">
      <span style="font-size: 16px">
       <span style="color: #006400">
        <span style="font-size: 14px">
         <span style="font-size: 16px">
          <span style="color: #006400">This is a </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
    <span style="color: #006400">
     <span style="font-size: 16px">
      <span style="color: #b22222">Test</span>
     </span>
    </span>
   </span>
  </span>
 </strong>
</p>
<br><br>
<div id="out"></div> <!-- Just to print it out -->

$("span").each(function(i){
    var ntext = $(this).text();
    ntext = $.trim(ntext.replace(/(\r\n|\n|\r)/gm," "));
    if(i==0){
        $("#out").text(ntext);
    }        
}); 
```

你得到这个结果：

```
<div id="out">This is a                                                                    Test</div> 
```

然后，您可以根据需要对其进行格式化。希望能帮助你对它有一点不同的想法......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-22T17:26:53.067

与其浪费您宝贵的服务器时间来解析错误的 HTML，不如建议您解决问题的根源。

一个简单的解决方案是限制每个评论者可以包含的字符以包含整个 html 字符数，而不仅仅是文本数（至少这会阻止无限大的嵌套标签）。

您可以通过允许用户在 HTML 视图和文本视图之间切换来改进这一点 - 我相信大多数人会在 HTML 视图中看到大量垃圾，只需 CTRL+A 和 DEL 即可。

我认为如果你有自己的格式化字符，你会解析并替换为格式，例如 stack-overflow has `**bold text**`，对海报可见。或者只是 BB-code 可以，对海报可见。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-20T14:50:21.987

我记得 Adob​​e（Macromedia）Dreamweaver，至少稍微旧的版本有一个选项，“清理 HTML”，还有一个“清理 word html”，可以从任何网页中删除多余的标签等。

# c# - 加载图像时“GDI+ 中发生一般错误”

> ID：10248167
> 
> 赞同：1
> 
> 时间：2012-04-20T14:26:58.407
> 
> 标签：c#, gdi+, system.drawing

是的，其中另一个......堆栈跟踪（有意义的部分）：

```
System.Runtime.InteropServices.ExternalException: A generic error occurred in GDI+
   at System.Drawing.Image.FromStream(Stream stream, Boolean useEmbeddedColorManagement, Boolean validateImageData)
   at System.Drawing.Image.FromStream(Stream stream, Boolean useEmbeddedColorManagement)
   at System.Drawing.Image.FromStream(Stream stream) 
```

尝试打开最终用户上传的图像文件时会发生这种情况。代码大约是这个（精简到基本部分）：

```
HttpPostedFile file = Request.Files[name];
Stream stream = file.InputStream;
byte[] bytes = new byte[file.ContentLength];
stream.Read(bytes, 0, file.ContentLength);
return bytes; 
```

然后用于

```
MemoryStream stream = new MemoryStream(bytes);
return Image.FromStream(stream); 
```

所以本质上它放弃了尝试从内存流中加载图像。这并不总是发生。事实上，我自己无法重现该问题，但在过去 2 周内，几个不同的用户发生了大约 20 次。我无权访问触发问题的实际文件。

任何关于这里可能发生的事情的线索将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:32:56.887

`stream.Read(bytes, 0, file.ContentLength);`并不意味着它会准确读取`file.ContentLength`字节。读取的字节数可能会更少。您应该检查返回的值。你可能需要一个循环。

[Stream.Read 方法](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:56:37.710

让你的阅读看起来像这样：

```
HttpPostedFile file = Request.Files[name]; 
Stream stream = file.InputStream; 
byte[] bytes = new byte[ContentLength];
int bytesRead = stream.Read(bytes, 0, ContentLength);
int offset = bytesRead;
while(bytesRead > 0)
{
     bytesRead = stream.Read(bytes, offset, ContentLength - offset);
     offset += bytesRead;
} 
return bytes; 
```

# ruby-on-rails - 从作为引擎安装的 gem 重载 lib 文件

> ID：10248174
> 
> 赞同：2
> 
> 时间：2012-04-20T14:27:21.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, overloading

我正在使用作为引擎安装的 gem，并且想要自定义一些类。我要重载的文件位于我的本地 rvm 目录中

```
(rvmdir)/(gem)/lib/(modulename)/containers/file_to_override.rb 
```

我将文件复制到我的应用程序目录

```
(appdir)/lib/(modulename)/containers/file_to_override.rb 
```

并定制了一些输出。

该文件看起来类似于：

```
module (Modulename)
  module Containers
    class FileToOverride << xxx
    ...
    end
  end
end 
```

但它似乎并没有超载。是否可以在我自己的应用程序中覆盖 lib 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T17:12:54.793

如果我将文件`/config/initializer/file_to_override.rb`与上述内容一起放入它可以工作。

# java - 发送带有确认链接的 PHP 电子邮件，但确认链接不起作用

> ID：10248175
> 
> 赞同：0
> 
> 时间：2012-04-20T14:27:24.827
> 
> 标签：java, php, email

我在一个文件中生成并发送了一封电子邮件，该电子邮件中的一个链接链接到我的确认页面，然后应该根据他们所做的选择在数据库表中移动用户名。问题是我从确认页面中什么也得不到，即使我只使用了一个简单的打印语句而没有其他任何东西。我一直试图弄清楚但无济于事，错误报告也返回空白。在这两个文件中：

email.php（完全有效）

```
<?php 

$link= mysql_connect(...............); //Establish connection to the MySQL server

if (!$link) {
die('Could not connect: ' . mysql_error());
}

mysql_select_db(.....);

$confirm = md5(uniqid(rand()));
$position = $_POST['position'];
$team_name = $_POST['team_name'];
$zip_code = $_POST['zip_code'];
$userId = $_POST['userId'];

$s=mysql_query("SELECT Coach, TeamId FROM TEAM WHERE TEAM.Name = '$team_name' AND TEAM.Zip     ='$zip_code'") OR die ("Error 1"); //Get result from query

while($row=mysql_fetch_assoc($s))
{ 
$coachId = $row['Coach'];
$teamId = $row['TeamId'];   
}

$l=mysql_query("SELECT Name, Email FROM USER WHERE USER.UserId = '$userId'") OR die ("Error 3");     //Get result from query

while($row = mysql_fetch_assoc($l))
{
$user_name = $row['Name'];
$user_email = $row['Email'];
}

$q=mysql_query("SELECT Name, Email FROM USER WHERE USER.UserId = '$coachId'") OR die ("Error 4"); //Get result from query

while($coach=mysql_fetch_assoc($q))
{
 $to = $coach['Email']; 
 $name = $user_name;
 $subject = "Scoutlet $position Request for The $team_name"; 

 if($position == "Head Coach")
 {
    $message = "$name has requested to become the Head Coach for the $team_name."; 
    $message .= "\n\nClick on the following link to give $name permission to be the Head Coach of the $team_name (Located in the ZIP code $zip_code).\n\n";
    $message .="<a href=\"http://web.***.***/~***/confirmation.php?key=$confirm\">Click Here to make $name the Head Coach</a>";
 }
 else
 {
     $message = "$name has requested to become a Score Keeper for the $team_name.";
     $message .= "\n\nClick on the following link to give $name permission to be a Score Keeper for the $team_name (Located in the ZIP code $zip_code).\n\n";
     $message.="http://web.***.***/~***/confirmation.php?key=$confirm"; // way to prevent no spam, dont use txt

 }

 $headers = "From: ***"; 
 $headers .= 'MIME-Version: 1.0' . "\r\n";
 $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
 $sent = mail($to, $subject, $message, $headers) ; 

 if($sent)
 {
    print "sent"; 
 }
 else 
 {
    print "fail"; 
 }
 }
 $sql=mysql_query("INSERT INTO CONFIRMATION(ConfirmationNumber, UserId, Email, TeamId, TeamName, Position)VALUES('$confirm', '$userId','$user_email','$teamId', '$team_name', '$position')") OR die ("Error 2"); //Get result from query

 mysql_close();
 ?> 
```

确认.php

```
<?
  ini_set('display_errors',1); 
 error_reporting(E_ALL);
$confirm = $_GET['key'];

$link= mysql_connect(***********); //Establish connection to the MySQL server

if (!$link)
{
    die('Could not connect: ' . mysql_error());
}
echo "connect4e";

mysql_select_db(**********);

$sql1=mysql_query("SELECT * FROM CONFIRMATION WHERE ConfirmationNumber ='$confirm'") OR die ("Fail 1");

    while($row=mysql_fetch_assoc($sql1))
    {
        $userId= $row['UserId'];
        $user_email = $row['Email'];
        $teamId = $row['TeamId'];
        $team_name = $row['TeamName'];
        $position= $row['Position'];
    }

    $sql2= mysql_query("INSERT INTO USER (Role) VALUES ('$position') WHERE UserId ='$userId'") OR die ("Fail 2");

    if($position =="Head Coach")
    {
        $sql3= mysql_query("INSERT INTO TEAM (Coach) VALUES ('$userId') WHERE TeamId ='$teamId'") OR die ("Fail 3a");
    }
    else
    { // do a check earlier on to see if the user is already a score keeper for that team
        $sql3= mysql_query("INSERT INTO SCOREKEEPS_FOR (ScoreKeeper, Team) VALUES ('$userId', '$teamId')") OR die ("Fail 3b");
    }

    $to= $user_email;           
    $subject="Welcome to Our Site";
    $headers = "From: ******"; 
    $message="Congratulations, you have been confirmed as a $position for The $team_name.";

    $sent = mail($to,$subject,$message,$header);
    if(sent)
    {
        $sql4=mysql_query("DELETE FROM CONFIRMATION WHERE ConfirmationNumber = '$confirm'") OR die ("Fail 5");
    }
    else
    {
        print "fail";
    }

?> 
```

我已经浪费了很多时间来尝试错误检查，这是一种浪费，所以希望更多的眼睛能帮助更快地解决它。任何帮助或建议都会很棒。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:36:36.427

```
if(sent) >>should be>> if($sent) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:36:57.660

可能是您的服务器只执行带有起始标记的 php

```
<?php 
```

代替

```
<? 
```

[http://us2.php.net/manual/en/language.basic-syntax.phptags.php](http://us2.php.net/manual/en/language.basic-syntax.phptags.php)

PHP 还允许使用短标签（不鼓励使用短标签，因为它们只有在使用 short_open_tag php.ini 配置文件指令启用，或者 PHP 配置了 --enable-short-tags 选项时才可用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T14:38:12.153

在您的 Confirmation.php 中，您使用的是短打开标签`<? ... ?>`。确保您的 php 短打开标签已启用或直接使用`<?php ... ?>`。

# java - Java中的Scala元组类型推断

> ID：10248180
> 
> 赞同：11
> 
> 时间：2012-04-20T14:27:49.277
> 
> 标签：java, scala

这可能是一个非常愚蠢的问题，但我在玩 Scala/Java 交互，想知道 Tuples 玩得怎么样。

现在，我知道`(Type1, Type2)`语法只是 的语法糖`Tuple2<Type1, Type2>`，因此，当调用一个在普通 Java 类中返回 Tuple2 的 Scala 方法时，我期望得到一个返回类型`Tuple2<Type1, Type2>`

为清楚起见，我的 Scala 代码：

```
def testTuple:(Int,Int) = (0,1) 
```

Java代码：

```
Tuple2<Object,Object> objectObjectTuple2 = Test.testTuple(); 
```

似乎编译器希望这是参数化类型`<Object,Object>`，而不是在我的情况下`<Integer,Integer>`（至少这是我所期望的）。

我的想法是否存在严重缺陷，对此是否有完全合理的解释？

或者

我的 Scala 代码中是否存在问题，在我知道会为 Java 代码提供 API 的情况下，有一种更...明确的方法吗？

或者

这仅仅是一个限制吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T14:54:21.147

`Int`是 Scala 的整数类型，它[是一个值类](http://docs.scala-lang.org/tutorials/tour/unified_types.html)，所以它得到特殊处理。它不同于`java.lang.Integer`. `java.lang.Integer`如果这是您需要的，您可以具体指定。

```
[dlee@dlee-mac scala]$ cat SomeClass.scala 
class SomeClass {
  def testIntTuple: (Int, Int) = (0, 1)
  def testIntegerTuple: (java.lang.Integer, java.lang.Integer) = (0, 1)
}

[dlee@dlee-mac scala]$ javap SomeClass
Compiled from "SomeClass.scala"
public class SomeClass implements scala.ScalaObject {
  public scala.Tuple2<java.lang.Object, java.lang.Object> testIntTuple();
  public scala.Tuple2<java.lang.Integer, java.lang.Integer> testIntegerTuple();
  public SomeClass();
} 
```

# jquery - Codeigniter / jQuery 更新数据库，无需重新加载/重定向

> ID：10248189
> 
> 赞同：0
> 
> 时间：2012-04-20T14:28:30.713
> 
> 标签：jquery, database, codeigniter

我一直在尝试更新数据库行，而不必重新加载页面或重定向到另一个页面来提交查询。我已经尝试了我能做的任何事情，但没有运气。我有一个画廊页面。当用户提交艺术品时，默认情况下它没有被批准，并且可以由授权用户（例如版主）批准。版主页面列出了未经批准的艺术作品。数据库有一个名为approved 的列，其值为0 或1。

这是我的代码。

更新：

非常感谢您抽出宝贵时间。我做了你说的改变，但它仍然没有工作。诚然，我对 jQuery/Ajax 不是很擅长，所以我认为它为什么不起作用是我的错误。我的代码现在是这样的：

模型功能：

```
function approve($id)
{
    $this->db->where('id', $id);
    $this->db->update('galeri', array('approved' => '1')); 
    return TRUE;
} 
```

控制器

```
function approve($id)
{
    if ($this->galeri->approve($id)) {
        echo("VALID");
    }
} 
```

HTML

```
.
.
.
<script type="text/javascript">
        $(document).ready(function() {

            var test = $("a.approval").attr("id").replace('artid-','');
            $.ajax({
                  type: 'post',
                  url: 'approve',
                  data: test,
                  beforeSend: function() {
                    parent.animate({'backgroundColor':'#fb6c6c'},300);
                  },
                  success: function(data, textStatus, jqXHR) {
                    if (data == "VALID") {
                        parent.slideUp(300,function() {
                          parent.remove();
                        });
                    };
                  }
            });
          });
        });
    </script>
.
.
.
    <?php foreach ($query->result() as $list): ?>
        <span style="display: block">
            <?php echo $list->path; ?> -- <a href="javascript:void(0)" id="artid-<?php echo $list->id; ?>'" class="approval">Approve artwork</a>
        </span>
    <?php endforeach; ?>
.
.
. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:37:54.530

你没有回应任何东西，因此成功不是评估任何东西

尝试添加：

*PHP*

```
function approve($id) {
    $this->db->where('id', $id);
    $this->db->update('galeri', array('approved' => '1')); 
    return TRUE; // you could use several dif methods to check if updated
}

function approve($id) {
    if ($this->galeri->approve($id)) {
       echo("VALID");
    }
} 
```

*阿贾克斯*

```
$.ajax({
      type: 'post',
      url: 'approve',
      data: test, // Not sure what to put here. 
      beforeSend: function() {
        parent.animate({'backgroundColor':'#fb6c6c'},300);
      },
      success: function(data, textStatus, jqXHR) {
        if (data == "VALID") {
            parent.slideUp(300,function() {
              parent.remove();
            });
        };
      }
}); 
```

另外，出于多种原因，我建议您删除链接上的“e.preventDefault”

*   您不必在链接上放置点击命令
*   如果你这样做，将它的 href 设置为`javascript:void(0)`，与 e.preventDefault 一样好，但跨浏览器功能读取问题的可能性较小（组织？）
*   如前所述，某些浏览器的某些版本（咳嗽即咳嗽）不喜欢在函数开始时看到 e.preventDefault，我不记得是什么版本，但我曾经遇到过这个问题，几乎让我发疯了，我不得不删除我的阻止默认值！（哈哈）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:47:56.150

我认为您应该在某些事件上触发该 jquery/ajax 请求。因此，如果我认为您在用户单击批准链接时尝试执行该 ajax，请尝试以下操作：

```
<script type="text/javascript">
        $(document).ready(function() {

       $('.approval').each(function(){
                  $(this).click(function(){
               var test = $("a.approval").attr("id").replace('artid-','');
            $.ajax({
                  type: 'post',
                  url: 'approve',
                  data: test,
                  beforeSend: function() {
                    parent.animate({'backgroundColor':'#fb6c6c'},300);
                  },
                  success: function(data, textStatus, jqXHR) {
                    if (data == "VALID") {
                        parent.slideUp(300,function() {
                          parent.remove();
                        });
                    };
                  }
            });
          });

      });
    });

        });
    </script>
.
.
.
    <?php foreach ($query->result() as $list): ?>
        <span style="display: block">
            <?php echo $list->path; ?> -- <a href="javascript:void(0)" id="artid-<?php echo $list->id; ?>'" class="approval">Approve artwork</a>
        </span>
    <?php endforeach; ?>
.
.
. 
```

请检查您在 config.php 文件中的 global_csrf 保护是否设置为 true 或 false。

```
$config['csrf_protection'] = TRUE; 
```

如果它设置为 true，那么您还需要在您的 ajax 请求中传递 csrf 令牌，否则 codeigniter 将不会执行您的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T16:49:16.970

谢谢你们花时间回答。我发现问题出在 $.ajax 的“数据”属性上。这是我想出的解决方案（这正是我想要的方式）：

```
<script type="text/javascript">
        $(document).ready(function () {
            $('a.approval').click(function () {
                var test = $(this).attr('id');
                $.ajax({   
                    url: "site/approve/"+test, 
                    type: "POST", 
                    // data: test,
                    success: function(data) {

                        $('.asdf-'+test).css("background-color", "green");
                    }
                })
            });
        });
</script> 
```

这是一种使用 $.ajax 的健康方式吗，我想知道。

# wordpress - Buddypress 和 Headway 主题

> ID：10248191
> 
> 赞同：0
> 
> 时间：2012-04-20T14:28:44.193
> 
> 标签：wordpress, themes, buddypress

我正在使用 headway 主题和 buddypress 制作网站。我一直在看一些视频和所有这些东西。我正在使用 Headway 主题 3.1.1，问题是；我找不到任何“叶子”或无法添加主题。你能帮忙的话，我会很高兴 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:48:59.077

所以我想通了！您需要做的是从主题/buddypress 中的 bp-default 复制 sidebar.php。然后你可以编辑你想要的方式。如果您不想要任何 buddypress 侧边栏元素，只需制作一个空白的 sidebar.php 并将其放在 /headway/sidebar.php

希望这可以帮助。

# java - 在 Java 中捕获 Windows 审核失败事件

> ID：10248196
> 
> 赞同：0
> 
> 时间：2012-04-20T14:29:01.650
> 
> 标签：java, windows

我最近发布了同样的问题，但没有回答。现在我将解释我想要什么...

windows id: 4625 中有一个审核失败事件，当在 windows 登录屏幕中输入错误密码时触发它，我想在我的 java 应用程序中捕获该特定事件。我用谷歌搜索了很多次，但没有找到任何答案。

我发现了另一种方法，在 Windows 的事件策略设置中，我搜索审核失败事件，而不是手动将任务附加到该事件，因此每当发生该事件时，调度任务都会运行我的程序（附加到该审核失败事件） .

我想要那个，我可以在 java 中捕获该事件，或者是否可以在发生审计失败事件时在运行我的任务的计划任务中以编程方式添加条目。

任何帮助将不胜感激，我在这种情况下 1 年，没有找到任何解决方案..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:40:32.037

据我所知，Windows 事件日志是一个文本文件。看起来这是对文件格式的描述：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb309026%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb309026%28v=vs.85%29.aspx)

您可以使用现有的 Windows 库或工具来完成此操作。例如微软的日志解析器 - [http://www.microsoft.com/download/en/details.aspx?id=24659](http://www.microsoft.com/download/en/details.aspx?id=24659)

或者，看起来用纯 Java 编写解析器并不难。

要在事件发生时捕获事件，您可以在 Java 中编写一个文件观察器，它可以捕获文件更改通知（参见 Java 7`FileWatcher`类）或“跟踪”文件（参见 Apache commons`FileTailer`类）。

# c - 从外部摄像头捕获 OpenCV

> ID：10248201
> 
> 赞同：2
> 
> 时间：2012-04-20T14:29:35.610
> 
> 标签：c, macos, opencv, firewire

我目前正在使用 OpenCV 编写一个实时应用程序，在以下情况下：我正在尝试从插入 firewire 800 的 HDV 摄像机捕获图像。我试图循环使用 cvCaptureFromCam 上使用的索引，但没有摄像机可以'找不到（网络摄像头除外）。

有我的代码示例，它在索引上循环（转义 0 因为它是网络摄像头的索引）：

```
CvCapture* camera;
int index;
for (index = 1; index < 100; ++index) {
    camera = cvCaptureFromCAM(index);
    if (camera)
        break;
}    
if (!camera)
    abort(); 
```

在任何时候它都停止中止。

我正在 OSX 10.7 上编译并且我已经测试过：

*   OpenCV 1.2 私有框架
*   OpenCV 2.0 私有框架（可在此处找到：[OpenCV2.0.dmg](http://vislab.cs.vt.edu/~vislab/wiki/images/4/44/OpenCV2.0.dmg)）
*   自己编译的OpenCV（版本2）

我知道这个问题是已知的，并且对此有很多讨论，但我无法找到任何解决方案。

有没有人遇到过同样的情况？

问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:25:52.340

要明确选择火线，也许您可​​以尝试将 300 添加到您的索引中？至少在 OpenCV 2.4 中，每种类型的相机都有一个特定的域。例如，Video4Linux 的域是 200，所以 200 是第一个 V4L 摄像头，201 是第二个，等等。对于 Firewire，域是 300。如果您指定的索引小于 100，OpenCV 只会遍历其中的每个域顺序，可能不是您期望的顺序。例如，它可能会先找到您的网络摄像头，而永远不会找到火线摄像头。如果这不是问题，请接受我的道歉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T16:36:43.333

`index`应该从**0**而不是**1**开始。

如果这不起作用，可能 OpenCV 不支持您的相机。我建议你检查它是否在[兼容性列表中](http://opencv.willowgarage.com/wiki/Welcome/OS)。

# c# - 如何正确处理多个表单

> ID：10248202
> 
> 赞同：0
> 
> 时间：2012-04-20T14:29:40.177
> 
> 标签：c#

**问题**：如何正确处理方法中创建的 ScreenSaverForm(s) `ShowScreensaver`？

当我从 Visual Studio 运行代码分析时，它会报告以下内容：`In method 'Program.ShowScreenSaver()', call System.IDisposable.Dispose on object 'ssf' before all references to it are out of scope`.

我不明白该怎么做，因为应用程序在退出方法后进入匿名消息循环`ShowScreenSaver()`。只有屏幕保护程序本身可以通过调用`Application.Exit()`mousemove-event 来停止应用程序。**屏幕保护程序表单是否应该自行处理？**

```
static class Program
{
    [STAThread]
    static void Main(string[] args)
    {
                ShowScreenSaver();
                Application.Run();
    }

    /// <summary>
    /// Display the form on each of the computer's monitors.
    /// </summary>
    static void ShowScreenSaver()
    {
        ScreenSaverForm ssf;
        foreach (Screen screen in Screen.AllScreens)
        {
            ssf = new ScreenSaverForm(screen.Bounds);
            ssf.Show();
        }
    }
} 
```

屏幕保护程序类的简化代码

```
public partial class ScreenSaverForm : Form
{
    public ScreenSaverForm()
    {
        InitializeComponent();

        //Display pretty image
        ShowprettyImage();
    }
    private void ScreenSaverForm_MouseMove(object sender, MouseEventArgs e)
    {
        if (!mouseLocation.IsEmpty)
         {
             // Terminate if mouse is moved a significant distance
             if (Math.Abs(mouseLocation.X - e.X) > 25 ||
                 Math.Abs(mouseLocation.Y - e.Y) > 25)
                 Application.Exit();
         }

         // Update current mouse location
         mouseLocation = e.Location;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:46:28.117

要遵守代码分析，您可以这样做：

```
static void ShowScreenSaver() {
    foreach (Screen screen in Screen.AllScreens) {
        ScreenSaverForm form = new ScreenSaverForm(screen.Bounds);

        form.FormClosed += (sender, e) => {
            form.Dispose();
        };

        form.Show();
    }
} 
```

如果您知道什么时候可以使用它并且不再需要它，请摆脱它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:43:06.897

让他们自己处置。当屏幕保护程序停止并且可执行文件关闭时，它们将被释放。

如果您真的想要，您可以将 ssf 对象设置为类级别的字段，并在应用程序关闭时将其处理掉，这将是*最佳*实践。

您还可以`ShowScreenSaver`返回表单，并使用将`Application.Run`表单作为参数的 ，并将事件添加到将为您处理它的应用程序出口。

```
ScreenSaverForm form = ShowScreenSaver();
Application.ApplicationExit += (sender, e) => form.Dispose();
Application.Run(form); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T14:40:14.310

首先我会说将`ssf`变量带入循环

```
static void ShowScreenSaver()
{

    foreach (Screen screen in Screen.AllScreens)
    {
        ScreenSaverForm ssf = new ScreenSaverForm(screen.Bounds);
        ssf.Show();
    }
} 
```

这*可能*已经解决了一个问题。

*如果您需要，*管理表单本身内部的处理就足够了。

# android - 在 PC 上显示 Android 屏幕

> ID：10248207
> 
> 赞同：1
> 
> 时间：2012-04-20T14:29:55.990
> 
> 标签：android, streaming

我们需要在 PC 上显示我们的 Android 屏幕。我们**不想**远程控制设备。我们尝试了诸如等之类的应用程序`androidscreencast`。`droidAtScreen`但它们的应用程序`fps`非常少。有没有更好的应用程序可以做到这一点？你能建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:46:04.323

没有办法让你变得更高`FPS`。Android 有每秒屏幕截图的限制，它与请求 的时间有关`framebuffer`，因此实时屏幕应用程序不能超过该帧速率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:39:32.600

Android 中有一个内置功能，在 Eclipse 中使用 DDMS 透视图或 DDMS 应用程序本身，有一个“捕获屏幕”选项，它会给你屏幕截图而不是真正的实时 Android 屏幕。您必须刷新才能显示您的 android 屏幕的当前状态。看看有没有什么办法也可以实时捕获，我还没有找到。

# iphone - 比较 Cell 的 indexpath 和 uiButton 这可能吗？

> ID：10248211
> 
> 赞同：1
> 
> 时间：2012-04-20T14:30:10.617
> 
> 标签：iphone, ios

我在一个班级有一个 Uibutton，在不同班级有一个 Uitable ...

现在我想比较IndexPAth（特定单元格位置）和不同类的Uibutton......

实际上我想在特定单元格上打印不同的不同值，我从另一个类的不同 Uibutton 方法中获取这些值....

这是我的代码....

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath {
//- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle   reuseIdentifier:CellIdentifier] autorelease];
}

if(indexPath == btn1){   // This is the Line What i want , i am trying this but dont go inside the condition..

UILabel  *lbl = [[UILabel alloc] initWithFrame:CGRectMake(200, 5, 290, 60)];
lbl.backgroundColor = [UIColor clearColor];
//lbl.editable = NO;
lbl.font = [UIFont fontWithName:@"Helvetica-Bold" size:25];
//  txtView1.text= textviewstring;
// txtView1.text = @"Personal";

if([fetchFormArray222 count]<1){
lbl.text=@"";

}
else{

lbl.text = [fetchFormArray222 objectAtIndex:0];

}
//  [txtView1 setDelegate:self];
lbl.textColor = [UIColor blackColor];
lbl.textAlignment = UITextAlignmentLeft;
[[cell contentView] addSubview:lbl];    

}
else {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:41:17.153

您是否尝试使用其他类中的按钮在您关注的类中执行新的提取，以加载 fectFormArray222，然后重新加载 UITableView？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:25:06.233

查看 UITableView 的苹果文档。

# sql - IF / ELSE 取决于存储过程的结果

> ID：10248217
> 
> 赞同：5
> 
> 时间：2012-04-20T14:30:36.920
> 
> 标签：sql, sql-server, database, tsql, stored-procedures

我有以下存储过程：

```
ALTER PROCEDURE [dbo].[CheckAdminExists]
    @SID NVARCHAR(50),
    @AdminName NVARCHAR(MAX)
AS 
    SELECT
        Administrator.ID
    FROM
        Administrator
    WHERE
        Administrator.SID = @SID
        AND Administrator.Name = @AdminName
GO 
```

现在我想用这样的代码创建另一个 SP：

```
IF NOT NULL (EXECUTE CheckAdminExists 'S-1','Admin')
--do something
ELSE
--do something else 
```

这样做的正确语法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T14:42:43.870

您不应为此使用存储过程，而应使用函数来检查管理员是否存在。

然后在您的新存储过程中调用 CheckAdminExists 函数：

```
CREATE FUNCTION [dbo].[CheckAdminExists] (@SID NVARCHAR(50), @AdminName NVARCHAR(MAX))
RETURNS BIT
AS 
BEGIN
DECLARE @RetVal INT

SELECT @RetVal = COUNT(Administrator.ID)
FROM
    Administrator
WHERE
    Administrator.SID = @SID
    AND Administrator.Name = @AdminName

IF @RetVal > 0 
BEGIN
   RETURN 1
END
    RETURN 0
END

Then in your stored procedure call the function:

DECLARE @AdminExists BIT
SELECT @AdminExists = [dbo].[CheckAdminExists]

IF @AdminExists 
BEGIN
   -- your code 
END
ELSE
BEGIN
  -- your code
END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T14:45:29.533

确实，使用`FUNCTION`.

但是如果你需要返回超过1，使用`OUTPUT`参数。

# c# - 实体框架投影崩溃 VS

> ID：10248220
> 
> 赞同：0
> 
> 时间：2012-04-20T14:30:44.097
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我有一个行表和一个标签表。每行可能有来自标签表的多个标签。我试图建立一个包含所有标签的清单，并有一个复选框，显示该行是否具有该标签，如果它已检查。

我已经将数据网格视图设置为 2 列。一个绑定到 Name，另一个 checkboxcell 绑定到 IsTagged

我试图为此使用投影：

```
-> line comes into constructor
var tagsList = from t in rs.Tags select new { Name = t.Name, IsTagged = line.Tags.Where(x => x.Name == t.Name).Any() };
dgvTags.DataSource = tagsList; 
```

我的实体图如下：

![在此处输入图像描述](../Images/b2529a5ebd4e990bfdf131a0cfd03b37.png)

更新 ：

我重新做了整个事情，从 2005 年将后面的 db 升级到 2008r2，现在它似乎可以工作但给出以下错误......它不会崩溃但在数据网格中没有显示任何项目。

![在此处输入图像描述](../Images/dc1ba2cf3abb72a444c107016df4069b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T16:36:23.770

I think the problem is due to using the line parameter's collection in your linq-to-entities query.

I would try rewriting the query to only use the primitive types like this:

```
var tagNames = line.Tags.Select(x => x.Name).ToList();
var tagsList = from t in rs.Tags 
               join n in tagNames on t.Name equals n into tags
               select new 
               {
                 Name = t.Name, 
                 IsTagged = tags.Any() 
               }; 
```

# c# - 远程调试连接失败 =>“没有可用于服务登录请求的登录服务器”

> ID：10248221
> 
> 赞同：0
> 
> 时间：2012-04-20T14:30:45.097
> 
> 标签：c#, debugging, dns, offline

我相信我明白我为什么会得到这个 - 但可能是错的......我相信我正在运行 msvsmon.exe 的 PC（要调试的 PC）是一台域 PC，我已经被赋予它在没有的情况下工作它的域服务器，它与其域服务器脱机。我确实有本地管理帐户和权限 - 可以做所有事情 - 但没有将我的 VS 工作室附加到在这台 PC 上运行的 msvsmon....

我添加了第二个局域网适配器——并且有一个私人连接......仍然没有......

我可以使这个第二个局域网连接成为工作组吗？--- 从而绕过域服务器登录名要求....

MsVsMon.exe 是否有设置——说嘿——这是一个 LAB 环境——放弃并允许连接....

未经授权的连接有效.....但是 - 我了解到不允许 .PDB 文件匹配，因此没有符号！！！！！！！！！

所以无论如何 - 在所有?????

使用符号进行远程调试---任何可能的方式?????

提前致谢....

最好的问候，凯文·韦特

注意：===> 一个附加特性.....尽管正在调试的 PC 与其域控制器脱机。. . . 我可以创建一个新的管理员用户并成功远程桌面到这台电脑 - - 有人会认为如果我可以连接远程桌面我应该能够连接远程调试.....！@@@@！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:04:40.740

如果我在两台机器上使用完全相同的凭据登录，我通常只会成功进行远程调试。

如果我以两台机器上的同一用户身份登录到域，这（对我来说）有效。

如果我在两台机器上创建一个具有相同名称和密码的本地非域帐户，它也可以工作，并确保我在两台机器上都使用该帐户登录。

在所有其他情况下，我会遇到与您相同的问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:07:34.430

除非有人有办法让 LAN 适配器 #2 上的“工作组”连接通过其 LAN 适配器 #1 在受域控制的 PC 上共存。这似乎是不可能的。

回想一下，我正在尝试在与其域控制器脱机的域 PC 上进行调试，并且远程调试连接失败，没有可用于处理登录请求的服务....

因此，成功连接到这台 PC 的唯一解决方案是将其切换到工作组 PC 以进行远程调试连接。

使用 VS 2010 的 PC 和要调试的运行 MsVsMon.exe 的 PC 之间的凭据：用户名和密码必须相同。...

用户必须在已调试的 PC 上具有“登录到服务”设置的安全权限。

可以通过在切换到工作组配置之前强制执行 Windows 检查点来归档域配置以进行恢复。

最好的问候，凯文·韦特

# tsql - 如何重新排序 SQL 查询？

> ID：10248223
> 
> 赞同：3
> 
> 时间：2012-04-20T14:30:55.613
> 
> 标签：tsql, parameters, sql-server-2008

我正在为 SSRS 中的 SSMS 2008 R2 报告参数开发一个存储过程。我目前正在使用此脚本填充此参数：

```
Select
    Null As [program_id],
    '-All-' As [program_name]
UNION ALL
SELECT DISTINCT
    [program_info_id] AS [program_id],
    [program_name]
FROM [evolv_reports].[dbo].[programs_view]
Order By [program_name] 
```

但问题是现在有一个名为“(MS) Family Preservation Services”的新程序名称。该程序列在“-All-”之前，因此现在此报告参数不再默认为“-All-”。如何使“-All-”再次列为第一？这是我当前参数输出的一部分：

```
program_id  program_name
406B3C38-D8D3-4ED5-AC5B-9013D3662931    (MS) Family Preservation Services
NULL                                    -All-
F6E2C172-2BFB-45BC-B870-E7BC2414DD91    Adoptions - Agency
C766E084-AB03-41AD-92B9-494FF3975E10    Adoptions - Subcontract
C21DACE0-8F34-433D-BE24-A79DE322F7EF    AL Step down foster care 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:35:56.337

```
SELECT [program_id], [program_name] FROM 
(
   Select 
  Null As [program_id], 
  '-All-' As [program_name] ,
  0 as num1
  UNION ALL 
 SELECT DISTINCT 
  [program_info_id] AS [program_id], 
  [program_name] ,
  1 as num1
)a
ORDER BY a.num1, a.[program_name] -- or just by a.num1 if you don't need to sort by program_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:41:37.353

也许是这样的：

```
SELECT
    *
FROM
(
Select
    Null As [program_id],
    '-All-' As [program_name]
UNION ALL
SELECT DISTINCT
    [program_info_id] AS [program_id],
    [program_name]
FROM [evolv_reports].[dbo].[programs_view]
) AS T
Order By (CASE WHEN [program_id] IS NULL THEN 0 ELSE 1 END), [program_id] 
```

# java - 在 iText 中，如何设置右列表格单元格的行跨度？

> ID：10248227
> 
> 赞同：3
> 
> 时间：2012-04-20T14:31:20.620
> 
> 标签：java, itext

我需要像这样画一张桌子。

```
---------------
|  A   |   C  |
|------|      |
|  B   |      |
--------------- 
```

以下代码不起作用。它创建一个单行表，而不绘制“C”单元格：

```
PdfPTable table = new PdfPTable(2);
table.addCell("A");
table.addCell("B");
PdfPCell cell = new PdfPCell(new Phrase("C"));
cell.setRowspan(2);
table.addCell(cell); 
```

绘制对面的表格（左侧的行跨单元格）工作得很好。

我在[这里](https://stackoverflow.com/questions/8804585/itext-table-rowspan-for-right-to-left-directionarabic)注意到了一个类似的问题，但是上下文不同（我不是在开发国际应用程序），所以我想我可以再次改写这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:11:45.863

表格总是从左到右、从上到下绘制的，所以你需要添加`A`, then`C`和 finally `B`。

```
PdfPTable table = new PdfPTable(2);
table.addCell("A");
PdfPCell cell = new PdfPCell(new Phrase("C"));
cell.setRowspan(2);
table.addCell(cell);
table.addCell("B"); 
```

iText 要求计算表格中的所有单元格。如果缺少任何单元格，它将跳过整行。您的原始代码添加`A`到 R1C1，然后添加`B`到 R1C2，然后创建了一个新行并向其中添加了一个单元格，因为它是一个寡妇，所以被修剪掉了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T09:18:59.503

您应该使用嵌套表：

```
PdfPTable inner = new PdfPTable(1);
inner.addCell("A");
inner.addCell("B");

PdfPTable outer = new PdfPTAble(2);
outer.addCell(inner);
outer.addCell("C"); 
```

# iphone - 选项卡控制器中的导航控制器不显示后退按钮

> ID：10248228
> 
> 赞同：0
> 
> 时间：2012-04-20T14:31:22.567
> 
> 标签：iphone, objective-c, uinavigationcontroller, uitabcontroller

我有一个带有 2 个选项卡“我的信息”和“他们的信息”的选项卡控制器，这只是一堆文本框。我想在顶部有一个导航控制器，这样我就可以返回，但后退按钮不会出现......这是我的代码：

按下按钮以显示表格：

```
-(IBAction)onIncidentAidFormPressed:(id)sender {
    FormController *aidForm = [[FormController alloc] initWithNibName:@"formController" bundle:nil];
    aidForm.managedObjectContext = self.managedObjectContext;
    [self.navigationController pushViewController:aidForm animated:YES];
} 
```

在 FormController.m - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil:

```
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    self.title = NSLocalizedString(@"Aid Form", @"Aid Form title");
}
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
UIViewController *viewController1 = [[MyInformationController alloc] initWithNibName:@"MyInformationController" bundle:nil];
UIViewController *viewController2 = [[TheirInformationController alloc] initWithNibName:@"TheirInformationController" bundle:nil];
UINavigationController *navController = [[UINavigationController alloc] initWithNibName:@"navController" bundle:nil];

[navController pushViewController:viewController1 animated:YES];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:navController, viewController2, nil];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return self; 
```

选项卡正确显示，导航栏在那里，但没有显示返回按钮来返回。

**编辑：这里是文件： IncidentAidStartViewController.h**

```
#import <UIKit/UIKit.h>

@interface IncidentAidStartViewController : UIViewController {
    IBOutlet UIButton *incidentAidForm;
    IBOutlet UIButton *emergencyContacts;
}

-(IBAction)onIncidentAidFormPressed:(id)sender;
@property (strong, nonatomic) IncidentAidStartViewController *detailViewController;

@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@end 
```

**IncidentAidStartViewController.m**

```
#import "IncidentAidStartViewController.h"
#import "IncidentAidForm.h"
@implementation IncidentAidStartViewController

@synthesize detailViewController = _detailViewController;
@synthesize managedObjectContext = __managedObjectContext;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Incident Aid", @"Incident Aid title");
    }
    return self;
}

#pragma mark - Button handlers
-(IBAction)onIncidentAidFormPressed:(id)sender { 
    IncidentAidForm *aidForm = [[IncidentAidForm alloc] initWithNibName:@"IncidentAidForm" bundle:nil]; 
    aidForm.managedObjectContext = self.managedObjectContext; 
    self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:self action:nil]; 
    [self.navigationController pushViewController:aidForm animated:YES];

}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

**IncidentAidForm.h**

```
#import <UIKit/UIKit.h>

@interface IncidentAidForm : UIViewController <UITabBarControllerDelegate> {

}

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) UITabBarController *tabBarController;

@property (strong, nonatomic) IncidentAidForm *detailViewController;

@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@end 
```

**IncidentAidForm.m**

```
#import "IncidentAidForm.h"
#import "MyInformationController.h"
#import "TheirInformationController.h"

@implementation IncidentAidForm

@synthesize detailViewController = _detailViewController;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize window = _window;
@synthesize tabBarController = _tabBarController;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Incident Aid Form", @"Incident Aid Form title");
    }
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *viewController1 = [[MyInformationController alloc] initWithNibName:@"MyInformationController" bundle:nil];
    UIViewController *viewController2 = [[TheirInformationController alloc] initWithNibName:@"TheirInformationController" bundle:nil];
    UINavigationController *navController1 = [[UINavigationController alloc] initWithRootViewController:viewController1];
    UINavigationController *navController2 = [[UINavigationController alloc] initWithRootViewController:viewController2];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:navController1, navController2, nil];

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];

    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];    
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

**我的信息控制器.h**

```
#import <UIKit/UIKit.h>

@interface MyInformationController : UIViewController {

    IBOutlet UIScrollView *scrollView;
    IBOutlet UITextField *firstName;
    IBOutlet UITextField *lastName;
    IBOutlet UITextField *phoneNumber;
    IBOutlet UITextField *address;
    IBOutlet UITextField *carMake;
    IBOutlet UITextField *carModel;
    IBOutlet UITextField *carYear;
    IBOutlet UITextField *licensePlate;
    IBOutlet UITextField *insuranceCarrier;
    IBOutlet UITextField *insurancePolicy;
    IBOutlet UIButton *backgroundButton;

}

@property(nonatomic, retain) UIScrollView *scrollView;
@property (nonatomic, retain) IBOutlet UITextField *firstName;
@property (nonatomic, retain) IBOutlet UITextField *lastName;
@property (nonatomic, retain) IBOutlet UITextField *phoneNumber;
@property (nonatomic, retain) IBOutlet UITextField *address;
@property (nonatomic, retain) IBOutlet UITextField *carMake;
@property (nonatomic, retain) IBOutlet UITextField *carModel;
@property (nonatomic, retain) IBOutlet UITextField *carYear;
@property (nonatomic, retain) IBOutlet UITextField *licensePlate;
@property (nonatomic, retain) IBOutlet UITextField *insuranceCarrier;
@property (nonatomic, retain) IBOutlet UITextField *insurancePolicy;

- (void) animateTextField: (UITextField*) textField up: (BOOL) up;
-(IBAction)hideKeyboard;
@end 
```

**我的信息控制器.m**

```
#import "MyInformationController.h"

@implementation MyInformationController

@synthesize scrollView, firstName, lastName, phoneNumber, address, carMake, carModel, carYear, licensePlate, 
insuranceCarrier, insurancePolicy;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"My Information", @"My Information");
        self.tabBarItem.image = [UIImage imageNamed:@"first"];

    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationItem.leftBarButtonItem = self.navigationItem.backBarButtonItem;

    // Do any additional setup after loading the view, typically from a nib.
    firstName.delegate = self;
    lastName.delegate = self;
    phoneNumber.delegate = self;
    address.delegate = self;
    carMake.delegate = self;
    carModel.delegate = self;
    carYear.delegate = self;
    licensePlate.delegate = self;
    insuranceCarrier.delegate = self;
    insurancePolicy.delegate = self;

    [scrollView setContentSize:self.view.frame.size];
}

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    //[self animateTextField: textField up: YES];
    scrollView.frame = CGRectMake(0,44,320,200); //44:NavigationBar ; 200: Keyoard
    [scrollView scrollRectToVisible:textField.frame animated:YES];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    //[self animateTextField: textField up: NO];
    if (textField.tag == 10) {
        scrollView.frame = CGRectMake(0,44,320,416); //original setup
        // [textField resignFirstResponder];
    }
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    switch (textField.tag) {
        case 1:
            [lastName becomeFirstResponder];
            break;
        case 2:
            [phoneNumber becomeFirstResponder];
            break;
        case 3:
            [address becomeFirstResponder];
            break;
        case 4:
            [carMake becomeFirstResponder];
            break;
        case 5:
            [carModel becomeFirstResponder];
            break;
        case 6:
            [carYear becomeFirstResponder];
            break;
        case 7:
            [licensePlate becomeFirstResponder];
            break;
        case 8:
            [insuranceCarrier becomeFirstResponder];
            break;
        case 9:
            [insurancePolicy becomeFirstResponder];            
            break;
        case 10:
            [textField resignFirstResponder];
            break;
        default:
            break;
    }

    return TRUE;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (IBAction)hideKeyboard {
    [self.firstName resignFirstResponder];
    [self.lastName resignFirstResponder];
    [self.phoneNumber resignFirstResponder];
    [self.address resignFirstResponder];
    [self.carMake resignFirstResponder];
    [self.carModel resignFirstResponder];
    [self.carYear resignFirstResponder];
    [self.licensePlate resignFirstResponder];
    [self.insurancePolicy resignFirstResponder];
    [self.insuranceCarrier resignFirstResponder];
    scrollView.frame = CGRectMake(0,44,320,416); //original setup

}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];    
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:49:35.573

到目前为止，我知道这是将您的视图添加到标签栏的好方法。所以试试这个

```
UIViewController *viewController1 = [[MyInformationController alloc] initWithNibName:@"MyInformationController" bundle:nil];
UIViewController *viewController2 = [[TheirInformationController alloc] initWithNibName:@"TheirInformationController" bundle:nil];
UINavigationController *navController1 = [[UINavigationController alloc] initWithRootViewController:viewController1];
UINavigationController *navController2 = [[UINavigationController alloc] initWithRootViewController:viewController2];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:navController1, navController2, nil]; 
```

要添加后栏项，也使用下面的 ine。

```
self.navigationItem.leftBarButtonItem = self.navigationItem.backBarButtonItem; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:10:08.433

请像这样修改您的方法

```
-(IBAction)onIncidentAidFormPressed:(id)sender
 {
    FormController *aidForm = [[FormController alloc] initWithNibName:@"formController" bundle:nil];
    aidForm.managedObjectContext = self.managedObjectContext;
self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:self action:nil];
    [self.navigationController pushViewController:aidForm animated:YES];

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T14:56:42.133

你应该用以下代码替换你的代码：

```
UIViewController *viewController1 = [[MyInformationController alloc] initWithNibName:@"MyInformationController" bundle:nil];
UIViewController *viewController2 = [[TheirInformationController alloc] initWithNibName:@"TheirInformationController" bundle:nil];
UINavigationController *navController1 = [[[UINavigationController alloc] initWithRootViewController:viewController1] autorelease];
UINavigationController *navController2 = [[[UINavigationController alloc] initWithRootViewController:viewController2] autorelease];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:navController1, navController2, nil]; 
```

让我知道您还需要什么......

# android - Andengine MotionStreak示例和截图

> ID：10248232
> 
> 赞同：1
> 
> 时间：2012-04-20T14:31:38.367
> 
> 标签：android, screenshot, opengl-es-2.0, andengine

我想通过将场景渲染到 RenderTexture 来捕获屏幕，我尝试在[MotionStreakExample](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/MotionStreakExample.java)中执行此操作，一切正常，但是当我将代码复制到我的项目时，我有这张图片（也许纹理有一些问题......我无法理解）： ![在此处输入图像描述](../Images/e697eb64ec1a3ec55e234cf3496e7a0d.png)

```
@Override
public Engine onCreateEngine(EngineOptions pEngineOptions) {
    return new Engine(pEngineOptions) {

        private boolean mRenderTextureInitialized;

        private RenderTexture mRenderTextures ;
        private Sprite mRenderTextureSprites ;

        @Override
        public void onDrawFrame(final GLState pGLState) throws InterruptedException {
            final boolean firstFrame = !this.mRenderTextureInitialized;

            if(firstFrame) {
                this.initRenderTextures(pGLState);
                this.mRenderTextureInitialized = true;
            }

            final int surfaceWidth = WIDTH*2;
            final int surfaceHeight = HEIGHT;

            this.mRenderTextures.begin(pGLState, false, true);
            {
                /* Draw current frame. */
                super.onDrawFrame(pGLState);

                /* Draw previous frame with reduced alpha. */
            }
            this.mRenderTextures.end(pGLState);

            {
                pGLState.pushProjectionGLMatrix();
                pGLState.orthoProjectionGLMatrixf(0, surfaceWidth, 0, surfaceHeight, -1, 1);
                {
                    this.mRenderTextureSprites.setAlpha(1);
                    this.mRenderTextureSprites.onDraw(pGLState, this.mCamera);
                }
                pGLState.popProjectionGLMatrix();
            }

            if (needToSave)
            {
                needToSave = false;
                FSHelper.saveBitmapToFile(this.mRenderTextures.getBitmap(pGLState), SAVED_PATH+"/test.png");
            }

            /* Flip RenderTextures. */

        }

        private void initRenderTextures(final GLState pGLState) {
            final int surfaceWidth = WIDTH*2;
            final int surfaceHeight = HEIGHT;

            final VertexBufferObjectManager vertexBufferObjectManager = mEngine.getVertexBufferObjectManager();
                this.mRenderTextures = new RenderTexture(mEngine.getTextureManager(), surfaceWidth, surfaceHeight);
                this.mRenderTextures.init(pGLState);

                final ITextureRegion renderTextureATextureRegion = TextureRegionFactory.extractFromTexture(this.mRenderTextures);
                this.mRenderTextureSprites = new Sprite(0, 0, renderTextureATextureRegion, vertexBufferObjectManager);
        }
    };
} 
```

PS。这个带有红色背景的十字架是我场景中的一个精灵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:52:42.560

我找到了答案！纹理是动态加载的，在第一帧我根本没有加载纹理，因为我在那里有一个选择对话框并在它之后创建所有纹理。每次更改纹理时，我都需要调用 initRenderTextures。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T16:50:04.097

Andengine 已经有了截图的基础设施，你试过用吗？看一下例子： [https ://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/ScreenCaptureExample.java](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/ScreenCaptureExample.java)

# python - Python 传递对象作为函数的参数

> ID：10248233
> 
> 赞同：0
> 
> 时间：2012-04-20T14:31:41.273
> 
> 标签：python, object, dll, ctypes

1.  有一个来自 DLL（C 语言）的函数，`link("parameters", &connection);` 它接受一个字符串参数并初始化一个连接。

2.  有一个函数`connect(connection)`，其中连接 - 对象，通过调用初始化`link()`。

问题：如何将Python连接对象函数Connect()作为参数传递？

```
from ctypes import *
mydll = CDLL (link.dll)
# How define the connection object?
top = link ("localhost: 5412", connection)
top = connect (connection) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:00:16.687

我相信 winapi 句柄是 32 位长，但您可能需要确保它是真实长度。如果您没有以任何其他方式使用*连接*，也许您可​​以这样做：

```
connection_t = ctypes.c_uint32

link = mydll.link
link.argtypes=(ctypes.c_char_p, ctypes.POINTER(connection_t) )
connect = mydll.connect
connect.argtypes=(connection_t,)
...
connection = connection_t()
link ("localhost: 5412", ctypes.byref(connection))
... 
```

注意：

*   您可以使用另一种类型作为与 HANDLE 等效的不透明类型，只要它具有相同的字节长度即可。更好的是，您可以通过继承而不是仅仅分配来“保护”您创建的*连接_t 类型。*

# git - 从图创建虚假提交

> ID：10248234
> 
> 赞同：14
> 
> 时间：2012-04-20T14:31:42.130
> 
> 标签：git

考虑到我有以下 ASCII 图：

```
A---B---C---D---E---F master
     \         /
      X---Y---Z topic 
```

[（从最近但不相关的问题](https://stackoverflow.com/questions/10248137)中窃取）

是否有一个命令/脚本/工具接受这个作为输入并相应地创建虚拟提交？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T03:57:25.737

[好吧，我会咬...] 不，没有。

[编辑]所以你可能会问“你怎么能回答'不' - 你不能证明是否定的”。好吧，如果您可以定义“宇宙”并彻底搜索“宇宙”，那么您可以证明是否定的。对于我的“否”答案，我将“宇宙”定义为作为 git 分发的一部分提供的一组 git 实用程序。如果您将“宇宙”定义为“所有当前和未来的 git 实用程序”，那么答案可能不是“不”。

# c# - 如何在 C# 中将 nchar 转换为字符串？

> ID：10248238
> 
> 赞同：5
> 
> 时间：2012-04-20T14:31:58.683
> 
> 标签：c#, sql-server, visual-studio-2010, tostring

如果这个问题已经被问及并回答，请原谅我。我只是花了一些时间搜索我的问题，但我似乎找不到它。

无论如何，我正在使用 Visual Studio 2010 和 MS SQL Server。我已经制作了数据库，现在我正在处理前端的东西。无论如何，通过我的搜索，我已经看到 nchar 不是 C# 数据类型，这很好，但它似乎不会为我将它转换为字符串。

```
Convert.ToString(reader["SerialNum"].ToString().Trim()); 
```

这就是给我一个错误的部分。它的意思是“不能将'string'隐式转换为'int'。”

有人知道解决整个 nchar 问题的方法吗？

提前致谢！

艾莉

[编辑]：所以这是整个方法......虽然我认为这里的其他任何东西都不会真正有帮助。

```
private Row PopulateRow(SqlDataReader pReader)
    {
        Row CurrentRow = new Row();
        CurrentRow.sTransNum = Convert.ToInt32(reader["STransNum"].ToString().Trim());
        CurrentRow.serialNum = Convert.ToString(reader["SerialNum"].ToString().Trim());
        CurrentRow.itemTypeID = Convert.ToInt32(reader["ItemTypeID"].ToString().Trim());
        CurrentRow.fromLocation = Convert.ToInt32(reader["FromLocation"].ToString().Trim());
        CurrentRow.toLocation = Convert.ToInt32(reader["toLocation"].ToString().Trim());
        CurrentRow.units = Convert.ToInt32(reader["Units"].ToString().Trim());
        CurrentRow.serialMoveDate = Convert.ToDateTime(reader["SerialMoveDate"].ToString().Trim());
        CurrentRow.moveTypeID = Convert.ToInt32(reader["MoveTypeID"].ToString().Trim());
        CurrentKey.sTransNum = CurrentRow.sTransNum;
        CurrentRow.CompleteState = "OK";
        return CurrentRow;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:36:49.190

可能应该使用[reader.GetString(ordinal)](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getstring.aspx)

```
reader.GetString(reader.GetOrdinal("SerialNum")) 
```

如果结果中的值可以为 null，请使用 reader.IsDbNull(ordinal)

```
int ordinal = reader.GetOrdinal("SerialNum");
serial = reader.IsDbNull(ordinal) ? null : reader.GetString(ordinal); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:22:44.527

您正在尝试将收到的值分配给 int。检查要为其分配值的变量/属性的定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:39:18.987

```
Convert.ToString(reader["SerialNum"]) 
```

但您可能正在分配一个 int 变量。请提供更多代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T14:41:36.853

这里有一些问题。

1.  你投了两次。没有必要。
2.  C# 不是[弱类型](http://en.wikipedia.org/wiki/Weak_typing)语言，因此您必须将转换结果放入另一个字符串。

因此，请尝试以下任一方法

```
string strTmp = Convert.ToString(reader["SerialNum"]);
strTmp = strTmp.Trim(); 
```

或者

```
string strTmp = reader["SerialNum"].ToString().Trim(); 
```

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T14:41:50.863

这是给你一个错误的完整代码行吗？该错误表明您正在尝试转换为 int。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T14:48:54.120

> 整行是 CurrentRow.serialNum = Convert.ToString(reader....);

我打赌`CurrentRow.serialNum`是一个整数。

如果这是正确的，根据阅读器中数据的类型，其中之一将是您的解决方案：

```
CurrentRow.serialNum = Convert.ToInt32(reader["SerialNum"].ToString().Trim()); 
CurrentRow.serialNum = (int)reader["SerialNum"]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-22T01:36:46.933

这可能不是数据类型问题，而是 NULL 问题。验证 serialNum 是否可以为 NULL。如果是这样，您可能需要使用 GetSqlString 或其他可以处理 NULL 情况的代码。

# vb.net - 在 Windows 窗体应用程序内的 VB.NET 中将图标添加到上下文菜单

> ID：10248240
> 
> 赞同：1
> 
> 时间：2012-04-20T14:32:03.347
> 
> 标签：vb.net, icons, contextmenu

我在这里和谷歌上搜索了很多次，寻找一个不涉及利用某人的课程的解决方案。

弹出此上下文菜单，用户在 dataGridView 内单击鼠标右键

添加项目时，VB代码是

```
Dim m As New ContextMenu()
m.MenuItems.Add(New MenuItem("Disassociate *A* Device"))
m.MenuItems.Add(New MenuItem("Purge Device Assosciations")) 
```

是否没有简单的方法来引用资源以将图标添加到所述菜单项？

伪

```
m.MenuItem(0).Icon.Source = .... 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:13:42.823

假设这是针对 Windows 窗体应用程序的。

为什么不使用 ContextMenuStrip？

例子：

```
 Dim m As New ContextMenuStrip()

    Dim item As New ToolStripMenuItem("Click Me!")
    item.Image = My.Resources.image

    m.Items.Add(item)

    DataGridView1.ContextMenuStrip = m 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:04:40.507

我使用图像属性并为其分配一个 system.drawing.image 对象。您将无法在一行中完成，一旦设置了新菜单的所有属性，您就可以添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T15:46:48.863

您需要将[Owner Draw](http://msdn.microsoft.com/en-us/library/system.windows.forms.menuitem.ownerdraw.aspx)设置为 true 并自己实际绘制菜单项

[这是一个很好的详细示例](http://www.codeproject.com/Articles/5461/Working-with-OwnerDraw-Menus-in-VB-NET)

# facebook - Grails：run-war 和 run-app 之间的行为差 异

> ID：10248245
> 
> 赞同：2
> 
> 时间：2012-04-20T14:32:27.657
> 
> 标签：facebook, json, grails

我正在使用 FB cookie 并尝试将其解码为 json，代码看起来与此类似

```
 def value = cookie.value

    String[] tokens = value.split('\\.')
    String decodeToken = new String(Base64.decodeBase64(tokens[1].getBytes()), 
            'UTF-8')
    def jsonValue = JSON.parse(decodeToken) 
```

cookie 是 facebook 在使用登录插件时创建的。

现在，当我使用 run-app 运行它时，没有任何问题。但是，当使用 run-war 运行它时，当 JSON 解析器尝试从字符串创建 JSON 对象时会引发异常。

> 引起：org.codehaus.groovy.grails.web.json.JSONException：在 {"algorithm":"HMAC-SHA256","code":"AQCvjV... ...."user_id":...50089"\00\00

进一步调试它，似乎从解码调用创建的字符串在运行应用程序的上下文中运行时很好。但是当 run-war 完成时，String 的最后一个字符不是 '}' 而是一些乱码字符 - 这就是导致解析器抛出异常的字符。

这可能是什么原因？什么是开始进一步调试的好点？

我什至尝试使用特定的编码来调用 getBytes() - 但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:43:14.057

run-app 运行 grails 应用程序并允许从资源重新加载

run-war 生成一个war文件并运行war文件，所以不需要重新加载资源。

您可以手动执行 grails war，然后在本地 tomcat 实例上运行它。

# ajax - 使用表单验证 submitHandler 发送 2 个 AJAX 请求？

> ID：10248249
> 
> 赞同：1
> 
> 时间：2012-04-20T14:32:53.117
> 
> 标签：ajax, jquery

我对 php、html 和 css 有非常深刻的理解，但我才刚刚开始涉足 javascript 和 jQuery。

我面临的问题是我在页面上有一个表单，我想首先验证它，然后当它通过验证以提交 2 个 ajax 请求时；第一个将数据插入到我的数据库中的表中，第二个在另一个表上运行查询并返回结果。

我已经让后者工作得很好，使用 submitHandler 方法发送 ajax 请求并用它的结果更新我页面上的 div。当我在此之后或之前添加第二个 ajax 调用时，它似乎中断了......

**我的问题是**在 submitHandler 中有 2 个 ajax 调用是否存在问题，如下所示，如果是这样，正确的方法是什么，甚至是更好的方法？

```
$("#contactform").validate({
    rules: ...
    submitHandler: function() {
        // First to insert the contact details using input#firstname etc.
        var firstname = $("#firstname").value();
        var lastname = $("#lastname").value();
        var contactString = 'firstname='+ firstname + '&lastname=' + lastname;
        $.ajax({
            type: "POST",
            url: "insertcontact.php",
            data: quoteString,
            success: function(server_response){
                $('#yourquote').html(server_response).show();
            }
        });            
        // Second use width & height submitted from previous page for processquote.php
        var width =  <?php echo json_encode($cleanpost['width']); ?>;
        var height = <?php echo json_encode($cleanpost['height']); ?>;
        var quoteString = 'width='+ width + '&height=' + height;
        $.ajax({
            type: "POST",
            url: "processquote.php",
            data: quoteString,
            success: function(server_response){
                $('#yourquote').html(server_response).show();
            }
        });
    }
}); 
```

我正在使用[“jquery.validate.js”验证插件](http://docs.jquery.com/Plugins/Validation)。同样，我的目标是，一旦有人在我的表单上输入了有效的详细信息，使用 Ajax 将他们的联系数据插入到数据库中，然后使用上一页上提交的字段查询数据库以检索要显示在页面上的数字结果，而无需刷新。

您能给我的任何指示将不胜感激！

抢

**编辑：**同时学习 Javascript 和 Jquery 似乎不是一个好主意，我很困惑：如前 2`this.value = '';`个`$(this).val('');`变量声明所示，这就是导致问题的原因！无论如何，感谢您的有用帮助，将为您提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:49:05.683

在您的第一次`.ajax()`调用中，您尝试在`data:`尚未创建的参数中传递一个值。我相信您想要发送它`contactString`。

除非您的两个查询相互依赖于按顺序完成，否则您应该能够异步执行它们（基本上在同一时刻）。如果您希望在第一个 AJAX 调用之后发生第二个 AJAX 调用，您始终可以将所有数据参数传递给 insertcontact.php，一旦插入完成，使用您已经传递的值执行 processquote.php。

最后，我想知道您是否打算这样做，但是您的两个 AJAX 调用都会覆盖`#yourquote`DOM 元素中的任何内容并显示它。您可能希望提供一个单独的元素来为您的两个请求中的每一个提供响应。也许`#yourquoteinserted`和`#yourquoteprocessed`？

**编辑**：BigRob，从您的评论中听起来好像您想要进行同步 AJAX 查询，请查看您`.ajax()`调用的 async 属性。这是来自[`.ajax()`文档](http://api.jquery.com/jQuery.ajax/)：

> **异步**布尔值
> 
> 默认值：真
> 
> 默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求**可能会暂时锁定浏览器**，从而在请求处于活动状态时禁用任何操作。

（强调我的）

但是，我对此可能是错误的，但您实际上可能能够从另一个的成功函数中调用一个异步 AJAX 方法。如果它开始看起来对您来说过于复杂，您可能希望将内部调用提取到一个函数中。大概的样子：

```
$.ajax({url, data:contactString, 
    success: function(server_response) {
        extractedId = server_response; // you can return data many ways
        $.ajax({url2, data:quoteString+"&extra="+extractedId,...
        });
    }
}); 
```

如果您通过`async:false`在第一个 AJAX 调用中进行设置来执行同步调用，那么您可以将结果存储到外部（AJAX 调用）变量中（或者如果这不起作用，则将其临时存储在某个 DOM 元素中）。然后 javascript 将暂停执行并且在第一个返回之前不会触发您的第二个 AJAX 调用。

不过，目前这一切都是假设性的，只是基于我对它应该如何工作的理解。

# android - Android：将 Stack 对象传递给另一个 Activity 会导致 ArrayList

> ID：10248250
> 
> 赞同：0
> 
> 时间：2012-04-20T14:32:53.617
> 
> 标签：android

我正在尝试在 android 应用程序中将一个`java.util.Stack`对象从一个对象传递到另一个对象。`Activity`

`Stack`我这样做的方式是利用类实现`Serializable`接口并通过对象传递对象的事实`Intent`。

奇怪的是，当我`getSerializableExtra(...)`在我的 other中使用时`Activity`，对象的类已经从`Stack`变为`ArrayList`。

我在互联网上没有找到任何关于此的内容。你知道它这样做的原因吗？

谢谢

这是一个简单的代码来重现这个东西（我在 android 2.3.3 和 4.0.3 上试过）：

A类：

```
package my.test;

import java.util.Stack;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

public class A extends Activity {

    Stack<Integer> stack;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        stack = new Stack<Integer>();
        stack.push(42);
        stack.push(7);

        Log.i("Class of stack in A (1)",stack.getClass().getName());

        Intent i = new Intent(this,B.class);
        i.putExtra("stack", stack);

        Log.i("Class of stack in A (2)",i.getSerializableExtra("stack").getClass().getName());

        startActivity(i);

    }
} 
```

B类：

```
package my.test;

import java.io.Serializable;
import java.util.Stack;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

public class B extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Intent i = getIntent();
        Serializable s = i.getSerializableExtra("stack");

        Log.i("class of stack in B",s.getClass().getName());

        Stack<Integer> stack = (Stack<Integer>) s;
    }
} 
```

输出`Log.i(...)`：

```
04-20 15:36:56.596: I/Class of stack in A (1)(748): java.util.Stack
04-20 15:36:56.596: I/Class of stack in A (2)(748): java.util.Stack
04-20 15:36:56.736: I/class of stack in B(748): java.util.ArrayList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:09:45.770

谢谢艾丹克。似乎它正在触发这个错误：[http ://code.google.com/p/android/issues/detail?id=3847](http://code.google.com/p/android/issues/detail?id=3847)

# .net - 使用 Fitnesse 的 XML 输入/输出

> ID：10248251
> 
> 赞同：3
> 
> 时间：2012-04-20T14:32:55.047
> 
> 标签：.net, xml, fitnesse, acceptance-testing

我想创建接受 XML 的自动化测试，并验证返回的 XML 是否符合预期。此外，最终用户需要能够添加新数据（XML 输入 + 预期的 XML 输出），而无需进入代码。

看起来 Fitnesse 应该能够做到这一点，但我还没有想出一个好的方法来做到这一点。

有什么建议吗？Fitnesse 以外的其他工具会更好用吗？需要测试的代码在 .NET 中。

最终我想将这些测试结果集成到一个持续集成服务器中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T21:41:10.097

[`fitSharp`](http://fitsharp.github.com)有一个`XmlFixture`会将 Xml 结果与预期值进行比较。有关更多详细信息，请参见此处：http: [//fitsharp.github.com/Fit/XmlFixture.html](http://fitsharp.github.com/Fit/XmlFixture.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:24:53.793

我想我可能有一些有用的东西。我可以创建一个自定义 Web 界面，允许用户上传 XML 输入和预期的 XML 输出。将这些保存到数据库。

然后从数据库中提取这些数据并在 NUnit 测试套件中循环遍历它。然后我可以使用 XMLUnit 进行实际比较。传入 XML 输入并将输出与预期的输出 XML 进行比较。

# c++ - 模板类变量在检查时显示已损坏，但在打印时实际上是有效的

> ID：10248261
> 
> 赞同：1
> 
> 时间：2012-04-20T14:33:39.977
> 
> 标签：c++, visual-studio-2010

我的框架中有一个模板类，当在调试模式下检查时，它开始报告变量的无效/损坏/bad_ptr 值。然而，这些变量在打印到控制台时看起来是正确的。

我发现有四个因素对这种情况的发生至关重要：

*   使用 /MDd 运行时库内置调试（/MTd 似乎不受影响）
*   全部重建后运行
*   包含 #define _HAS_ITERATOR_DEBUGGING 0 宏
*   构造函数中的 ifstream 对象

在以下示例中，构造函数参数 str 在检查时应显示为损坏/无效/bad_ptr，但会正确打印到控制台。消除上述任何一项因素即可解决问题。

```
#define _HAS_ITERATOR_DEBUGGING 0

#include <iostream>
#include <string>
#include <fstream>

template <class T>
class Foo
{
public:
  Foo(std::string str)
  {
    std::cout << str << std::endl;
    std::ifstream in;
  }
};

int main()
{
   Foo<int> MyFoo("Hello World");
   return 0;
} 
```

我的问题是这仅仅是一个 VS2010 错误还是我正在做的事情导致了这个？

# java-me - 来电时恢复播放器

> ID：10248268
> 
> 赞同：0
> 
> 时间：2012-04-20T14:34:07.657
> 
> 标签：java-me, mmapi, nokia-s40

我希望在来电后跟踪从点停止继续

我使用这段代码：

```
public void playerUpdate(Player player, String event, Object data) {

    if(event == PlayerListener.DEVICE_UNAVAILABLE) {
        player.stop();
        isPause = true;     
    }
    if(event == PlayerListener.DEVICE_AVAILABLE) {

        if(isPause == true) {

            player.start();

        }
    }

} 
```

但这行不通。轨道重新开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:14:06.120

而不是更新 PlayerUpdate 中的代码，请使用布尔值，当调用自动中断时 midlet 转到 hideNotify() 并保存 mediaTime（可用）并使用 showNotify() 方法恢复播放器并更改布尔值并使用播放器启动播放器。开始（）; 和 player.setMediaTime(savedmTime);

这是一段代码。

```
protected void hideNotify() {        

    resume = false;
    paintMessage = false;

    mediaTime = player.getMediaTime();
}

// calls while resuming the application.

protected void showNotify() {
    if (mediaTime != 0) {
        if (pause) {

            resume = false;

            midlet.lcduiDisplay.callSerially(repainter);
            mediaTime = player.getMediaTime();
            pausePlayer();
        } else {

            resume = true;

            long med = mediaTime / 1000;
            med = med / 1000;
            message = "Resuming...from " + med;

            play(mediaTime);
        }
    }
} 
```

# android - EndlessAdapter 问题

> ID：10248272
> 
> 赞同：0
> 
> 时间：2012-04-20T14:34:31.460
> 
> 标签：android, commonsware-cwac

我正在尝试采用无尽的适配器。有一个活动 - 说 ClipsActivity 它扩展了抽象类，该抽象类扩展了 Activity。在一些例子中，我看到 Activity 是从 ListActivity 扩展而来的——这很重要吗？我还有一个扩展基本适配器的列表适配器，而在示例中使用了 ArrayAdapter。当我到达列表末尾时，我收到一个错误（下面的日志）

您是否介意指出问题可能是什么以及这种实施 Endless 的方式是否存在不确定性？另外，我将不胜感激有关详尽示例的链接。我看过演示 - 但对我来说还不够清楚。谢谢。

我的活动

```
public class ClipsActivity extends AbstractActivity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        try {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.clips);

            _init();
            ListView clipList = (ListView) findViewById(R.id.clipList);
            EndlessClipListAdapter endlessClipsList = new EndlessClipListAdapter(getApplicationContext(), new ClipListAdapter(this, _getClips()), R.id.downloadBar);
            clipList.setAdapter(endlessClipsList);
        } catch (HTTPFactoryException e) {
            e.printStackTrace();
        }
    } 
```

我的无尽适配器

```
public class EndlessClipListAdapter extends EndlessAdapter {

    private RotateAnimation rotate=null;

    public EndlessClipListAdapter(Context context, ListAdapter wrapped, int pendingResource) {
        super(context, wrapped, pendingResource);
        rotate=new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF, 
                0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
        rotate.setDuration(600);
        rotate.setRepeatMode(Animation.RESTART);
        rotate.setRepeatCount(Animation.INFINITE);
    }

    @Override
    protected boolean cacheInBackground() throws Exception {
        SystemClock.sleep(10000);
        return(getWrappedAdapter().getCount()<14);
    }

    @Override
    protected void appendCachedData() {
        if (getWrappedAdapter().getCount()<14) {
        }
    }

    @Override
    protected View getPendingView(ViewGroup parent) {
        //View row=getLayoutInflater().inflate(R.layout.row, null);
        //LayoutInflater inflater = (LayoutInflater) context.getSystemService( Context.LAYOUT_INFLATER_SERVICE );

        LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService( Context.LAYOUT_INFLATER_SERVICE );

        View row = inflater.inflate(R.layout.row, null);
        View child=row.findViewById(android.R.id.text1);

        child.setVisibility(View.GONE);

        child=row.findViewById(R.id.throbber);
        child.setVisibility(View.VISIBLE);
        child.startAnimation(rotate);

        return(row);
      }

} 
```

日志猫

```
04-20 13:41:43.083: W/dalvikvm(480): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-20 13:41:43.093: E/AndroidRuntime(480): FATAL EXCEPTION: main
04-20 13:41:43.093: E/AndroidRuntime(480): java.lang.IndexOutOfBoundsException: Invalid index 15, size is 15
04-20 13:41:43.093: E/AndroidRuntime(480):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
04-20 13:41:43.093: E/AndroidRuntime(480):  at java.util.ArrayList.get(ArrayList.java:311)
04-20 13:41:43.093: E/AndroidRuntime(480):  at ru.localhost.xxxx.android.view.ClipListAdapter.getItemId(ClipListAdapter.java:47)
04-20 13:41:43.093: E/AndroidRuntime(480):  at com.commonsware.cwac.adapter.AdapterWrapper.getItemId(AdapterWrapper.java:127)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.widget.AdapterView.getItemIdAtPosition(AdapterView.java:745)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.widget.AdapterView.setSelectedPositionInt(AdapterView.java:1088)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.widget.ListView.arrowScrollImpl(ListView.java:2324)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.widget.ListView.arrowScroll(ListView.java:2287)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.widget.ListView.commonKey(ListView.java:2089)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.widget.ListView.onKeyDown(ListView.java:2036)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.KeyEvent.dispatch(KeyEvent.java:1256)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.View.dispatchKeyEvent(View.java:3855)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:787)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.widget.ListView.dispatchKeyEvent(ListView.java:2021)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
04-20 13:41:43.093: E/AndroidRuntime(480):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1687)
04-20 13:41:43.093: E/AndroidRuntime(480):  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1120)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.app.Activity.dispatchKeyEvent(Activity.java:2073)
04-20 13:41:43.093: E/AndroidRuntime(480):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1663)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2560)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2535)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1867)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.os.Looper.loop(Looper.java:123)
04-20 13:41:43.093: E/AndroidRuntime(480):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-20 13:41:43.093: E/AndroidRuntime(480):  at java.lang.reflect.Method.invokeNative(Native Method)
04-20 13:41:43.093: E/AndroidRuntime(480):  at java.lang.reflect.Method.invoke(Method.java:507)
04-20 13:41:43.093: E/AndroidRuntime(480):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-20 13:41:43.093: E/AndroidRuntime(480):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-20 13:41:43.093: E/AndroidRuntime(480):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:47:19.083

> 在一些例子中，我看到 Activity 是从 ListActivity 扩展而来的——这很重要吗？

不，欢迎您使用`ListFragment`，或使用 . 的普通活动`ListView`。

> 我还有一个扩展基本适配器的列表适配器，而在示例中使用了 ArrayAdapter。

适配器需要支持附加附加数据的概念。`ArrayAdapter`做; `CursorAdapter`才不是。我不能说你的适配器是否会。

> 你介意指出问题可能是什么

我不确定。您实际上没有附加任何内容的事实`appendCachedData()`可能是候选人。请阅读[文档](https://github.com/commonsguy/cwac-endless)并按照说明进行操作。

> 另外，我将不胜感激有关详尽示例的链接。

[repo 中](https://github.com/commonsguy/cwac-endless)有`demo/`子项目。

> 我看过演示 - 但对我来说还不够清楚。

这种模式在其他地方还有其他实现；也许其中一个组件会更适合您。

# swing - 在可运行的 jar 中嵌入 GTK 外观

> ID：10248274
> 
> 赞同：0
> 
> 时间：2012-04-20T14:35:04.707
> 
> 标签：swing, executable-jar, look-and-feel

我有一个小问题。我制作了一个必须使用 GTK 外观的应用程序。但是用户将能够从不存在此 LaF 的 Windows 操作系统启动应用程序...谁能告诉我是否可以将 GTK LaF 嵌入我的可运行 jar 并在运行时加载它？

非常感谢！

问候，

偏执狂25

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:37:24.117

由于某些本机功能的使用，您将无法在其他操作系统上正确运行 GTK 外观（即使您成功地从您的操作系统标准 java 库中提取了它）。这适用于所有本地 LaF - windows/macos/GTK 和其他一些。

如果您要基于 Swing 创建一个漂亮的跨平台应用程序，我建议您研究一些用于 Swing 的跨平台 LaF 并使用它们而不是原生的。

# ruby-on-rails - Rails + Sunspot：多个模型搜索，但只有一个模型上的某些字段？

> ID：10248280
> 
> 赞同：4
> 
> 时间：2012-04-20T14:35:29.917
> 
> 标签：ruby-on-rails, full-text-search, sunspot

在我的 Rails 应用程序中，我使用 Sunspot 来索引几个不同的模型。然后我有一个返回混合结果的全局搜索表单。这工作正常：

```
Sunspot.search(Person, EmailAddress, PhoneNumber, PhysicalAddress) do
  fulltext params[:q]
  paginate :per_page => 10
end 
```

我想在这个搜索中添加一个额外的模型，比如 Project。项目模型有相当多的索引：

```
class Project < ActiveRecord::Base
  searchable do
    string :category do
      category.name.downcase if category = self.category
    end

    string :client do
      client.name.downcase if client = self.client
    end

    string :status

    text :tracking_number
    text :description

    integer :category_id, :references => Category
    integer :client_id, :references => Client
    integer :tag_ids, :multiple => true, :references => Tag

    time :created_at, :trie => true
    time :updated_at, :trie => true
    time :received_at, :trie => true
    time :completed_at, :trie => true
  end
end 
```

如何修改我的原始`Sunspot.search`调用以仅通过`tracking_number`字段而*不是*字段添加对项目记录的搜索`description`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:54:10.137

```
Sunspot.search(Person, EmailAddress, PhoneNumber, PhysicalAddress, Project) do
  fulltext params[:q] do
    fields(:tracking_number, :other_fields_outside_your_project_model)
  end

  paginate :per_page => 10
end 
```

这将对 tracking_number 字段和您指定的任何其他字段进行全文搜索，特别是在您的 Person、EmailAddress、PhoneNumber 和 PhysicalAddress 模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:43:20.420

您是否尝试过类似的方法：

```
Sunspot.search(Post) do
  keywords 'great pizza', :fields => [:title, :body]
end 
```

您可以为每个模型提出一个请求，然后将结果合并到一个列表中。我认为您无法一次搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:24:12.510

我认为您必须将您的 tracking_number 定义为文本字段而不是字符串字段。仅在“文本字段”上进行全文搜索。

你试过这个：

```
text:tracking_number 
```

你的太阳黑子搜索看起来像：

```
Sunspot.search(Person, EmailAddress, PhoneNumber, PhysicalAddress, Project) do
  fulltext params[:q]
  paginate :per_page => 10
end 
```

再见

# jquery - 从 jQuery 的表单中传递“this”

> ID：10248284
> 
> 赞同：0
> 
> 时间：2012-04-20T14:35:54.197
> 
> 标签：jquery, forms

我有一个功能，可以在提交表单时检查某种类型的所有元素，如果其中一个元素未验证，则阻止提交。我使用 jQuery 来查找页面中的所有表单，并将此函数附加到它们的“onsubmit”事件中。

这样做的问题是，当函数检查某种类型的**所有**元素时，如果另一个表单中有无效元素，它将阻止表单被提交，即使它没有被提交，所以它们无关紧要。

为了解决这个问题，我改变了我的函数来检查某种类型的所有元素以接受表单的参数，然后只验证该表单中的元素。到现在为止还挺好。

但是，当使用jQuery将函数附加到页面上的所有表单时，如何指定表单的参数？

这是目前的jQuery代码：

```
jQuery("form").submit(function() {
    return CheckElements();
}); 
```

我需要以 ID 或对象的形式传递当前表单。就像是：

```
jQuery("form").submit(function() {
    return CheckElements(SOME WAY OF PASSING THE FORM);
}); 
```

这是否可能，如果可以，如何执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:38:22.110

您可以简单地将其作为参数传递：`return CheckElements(this);`

然后，您的`CheckElements`函数可以如下所示：

```
function CheckElements(form) {
    $(':input', form).each(function() { /*do something*/ });
} 
```

如果您更喜欢`this`指向函数中的表单，您可以使用它`return CheckElements.call(this);`来调用您的函数；那么你不需要参数并且在函数内部你可以做例如`$(':input', this)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T14:42:04.887

```
$("form").submit(function() {
    return CheckElements(this);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:59:09.817

在这种情况下，您必须首先为表单分配一个类或 id。例如。

```
<div class='error' style="display:none; color:red;">the entry by you was invalid</div>
<form action="XXXX" method="XXXX" class='myForm'>
<!-- lets say you have following fields -->
name : <input type = 'text' name = 'name' class = 'field1'>
age : <input type = 'text' name = 'age' class = 'field2'>
<input type = 'submit' id='submit_btn'>
</form> 
```

现在，您可以执行以下操作来调用 JQuery 函数，而不是调用函数 onSubmit

```
$(function(){
$("#submit_btn").click(function(){
var msg = checkElement();// your function must return false on error
if(msg == FALSE)
{
$('.error').show(); //create a div with style dispay:none which contains error message to show on error
}
else
{
var field1 = $('.field1').attr('value');//fetching the field1 content
var field2 = $('.field2').attr('value');//fetching the field2 content

//submit via ajax
$.ajax({
url: 'relative path to the file eg. file.php',
dta: 'f1='+field1+'&f2='+field2,//placeyour own data here
type: 'get or post',
success:function()
{
alert('done');//perform your action
}
});
return false;
}
});
}); 
```

希望这对你有帮助

# android - Android http post不发送数据

> ID：10248297
> 
> 赞同：2
> 
> 时间：2012-04-20T14:36:38.120
> 
> 标签：android, json, post, web, http-post

首先，我收到状态代码 200。在 php 脚本中，我只是让代码将发送到服务器的内容发送给我（同时我尝试调试）。使用 var_dump $_POST 或 $_REQUEST 我收到一封空白电子邮件。如果我在 $_SERVER 上运行 foreach，我会得到一些数据，例如 HTTP_USER_AGENT：Apache-HttpClient/UNAVAILABLE (java 1.4) 和 CONTENT_LENGTH：9

我不明白为什么没有发布数据？我是 android 新手，我确实在学习。

```
HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(dest_url);
    //httppost.setHeader("Accept", "application/json");
    //httppost.setHeader("Content-type", "application/json");

//JSONObject json = new JSONObject();

        // Add your data
        //json.put("action", "login");
        //json.put("username", "kermit");
        //json.put("password", "123456");

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    //nameValuePairs.add(new BasicNameValuePair("myjson", json.toString()));
    nameValuePairs.add(new BasicNameValuePair("plswork", "hi"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));

    //StringEntity str_json = new StringEntity(json.toString());

    //httppost.setEntity(str_json);
    HttpResponse response;

    response = httpclient.execute(httppost); 
```

我的 manifestxml 有以下行；

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

这些是我的进口；

```
import java.io.IOException;
import java.util.ArrayList;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;
import org.json.JSONObject;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:55:24.797

很可能与您有关

```
httppost.setHeader("Content-type", "application/json"); 
```

`application/json`不是 HTTP POST 表单提交的正常内容类型。考虑到您不是真正发送 json 而是标准 POST 实体（nameString=valueString），请尝试将其更改为

```
httppost.setHeader("Content-Type", "application/x-www-form-urlencoded") 
```

看看这是否会解决您的问题。或者更好的是，将其全部删除。

我在我的应用程序中使用此代码 - 它工作得非常好：

```
HttpPost httppost = new HttpPost(SERVER_URL);
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
nameValuePairs.add(new BasicNameValuePair("REQUEST", req));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, "UTF-8"));
HttpResponse response = httpclient.execute(httppost); 
```

在这种情况下的反应是`text/xml`- 但这不重要。

# symfony - Symfony FormBuilder 中的 appendNormTransformer 是什么？

> ID：10248299
> 
> 赞同：1
> 
> 时间：2012-04-20T14:36:42.160
> 
> 标签：symfony

Symfony FormBuilder 中的 appendNormTransformer 是什么？我什么时候应该使用它而不是 appendClientTransformer 和 prependClientTransformer

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:43:47.837

[取自Form.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Form.php)的类文档块：

```
To implement your own form fields, you need to have a thorough understanding
of the data flow within a form field. A form field stores its data in three
different representations:

 (1) the format required by the form's object
 (2) a normalized format for internal processing
 (3) the format used for display

A date field, for example, may store a date as "Y-m-d" string (1) in the
object. To facilitate processing in the field, this value is normalized
to a DateTime object (2). In the HTML representation of your form, a
localized string (3) is presented to and modified by the user. 
```

`(1)`应用程序数据、`(2)`标准化数据和客户端数据也是如此`(3)`。

现在，对于您的问题，这取决于要转换哪些数据。如果是您需要转换的客户端数据（从`(2)`到`(3)`），那么您应该使用`appendClientTransformer`or `prependClientTransformer`。

相反，如果您想更改标准化数据（从`(1)`到`(2)`），那么您应该使用`appendNormTransformer`or `prependNormTransformer`。

因此，归一化转换器位于`(1)`和`(2)`( `(1)`normalizeTransformer -> `(2)`) 之间。客户端转换器位于( clientTransformer -> )`(2)`之间`(3)``(2)``(3)`

另外，请注意 append 和 prepend 方法（[append|prepend][Norm|Client]Transformer）可能会被 Symfony 2.1 中的 add 方法（add[Norm|Client]Transformer）替换，请参阅GitHub 上的[此拉取请求](https://github.com/symfony/symfony/issues/3855)以获取更多信息信息。

希望这会有所帮助，
马特

# java - Javamail html模板的电子邮件中未显示嵌入的图像

> ID：10248304
> 
> 赞同：0
> 
> 时间：2012-04-20T14:37:09.293
> 
> 标签：java, html, jakarta-mail

我已经成功地遵循了如何使用 javamail 将图像嵌入 HTML 的教程。但是，我现在正尝试从模板 html 文件中读取，然后在发送之前将图像嵌入其中。

我确信该代码适用于我使用时的嵌入图像：

```
bodyPart.setContent("<html><body><h2>A title</h2>Some text in here<br/>" +
               "<img src=\"cid:the-img-1\"/><br/> some more text<img src=\"cid:the-img-1\"/></body></html>", "text/html"); 
```

图像显示正常。但是，当我使用以下文件从文件中读取时：

```
readHTMLToString reader = new readHTMLToString();
String str = reader.readHTML();  
bodyPart.setContent(str, "text/html"); 
```

电子邮件发送时图像不显示。

我将 html 读取为字符串的代码如下：

```
public class readHTMLToString {
static String finalFile;

public static String readHTML() throws IOException{

//intilize an InputStream
    File htmlfile = new File("C:/temp/basictest.html");
    System.out.println(htmlfile.exists());
try {
  FileInputStream fin = new FileInputStream(htmlfile);

  byte[] buffer= new byte[(int)htmlfile.length()];
new DataInputStream(fin).readFully(buffer);
    fin.close();
    String s = new String(buffer, "UTF-8");
    finalFile = s;
}
catch(FileNotFoundException e)
{
  System.out.println("File not found" + e);
}
catch(IOException ioe)
{
  System.out.println("Exception while reading the file " + ioe);
}
return finalFile;
  }
} 
```

我发送电子邮件的完整课程如下：

```
package com.bcs.test;

import java.io.IOException;
import java.util.Properties;

import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.mail.BodyPart;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class SendEmail {

public static void main(String[] args) throws IOException {

    final String username = "usernamehere@gmail.com";
    final String password = "passwordhere";

    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");

    Session session = Session.getInstance(props,
      new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
        }
      });

    try {

        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress("from-email@gmail.com"));
        message.setRecipients(Message.RecipientType.TO,
            InternetAddress.parse("recepientemailhere"));
        message.setSubject("Testing Subject");

        //SET MESSAGE AS HTML
        MimeMultipart multipart = new MimeMultipart("related");  

        // Create bodypart.  
        BodyPart bodyPart = new MimeBodyPart();  

        // Create the HTML with link to image CID.  
        // Prefix the link with "cid:". 

        //bodyPart.setContent("<html><body><h2>A title</h2>Some text in here<br/>" +
              // "<img src=\"cid:the-img-1\"/><br/> some more text<img src=\"cid:the-img-1\"/></body></html>", "text/html");
        readHTMLToString reader = new readHTMLToString();
        String str = reader.readHTML();  

        // Set the MIME-type to HTML.  
        bodyPart.setContent(str, "text/html");  

        // Add the HTML bodypart to the multipart.  
        multipart.addBodyPart(bodyPart);  

        // Create another bodypart to include the image attachment.  
        BodyPart imgPart = new MimeBodyPart();  

        // Read image from file system.  
        DataSource ds = new FileDataSource("C:\\temp\\dice.png");  
        imgPart.setDataHandler(new DataHandler(ds));  

        // Set the content-ID of the image attachment.  
        // Enclose the image CID with the lesser and greater signs. 
        imgPart.setDisposition(MimeBodyPart.INLINE);
        imgPart.setHeader("Content-ID","the-img-1");
        //bodyPart.setHeader("Content-ID", "<image_cid>");  

        // Add image attachment to multipart.  
        multipart.addBodyPart(imgPart);  

        // Add multipart content to message.  
        message.setContent(multipart);  

        //message.setText("Dear Mail Crawler,"
        //  + "\n\n No spam to my email, please!");

        Transport.send(message);

        System.out.println("Done");

    } catch (MessagingException e) {
        throw new RuntimeException(e);
    }
}
} 
```

我已经阅读了很多关于这个的答案，但真的不知道为什么会这样。我认为这是因为我的 html 文件存在问题，但是我使用与上面初始 setContent 代码相同的内容创建了一个非常基本的文件，并且图片没有出现在这个基本示例中。

与读入字节数组有关吗？

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:53:28.020

电子邮件客户端解释 HTML 代码的方式不同于写入 HTML 模板文件。但是您可以确定的一件事是，一旦您获得模板，将图像的字节数组复制到 src 属性。您可以尝试使用内联图像作为浏览器解释 src 属性并发出另一个请求以获取数据。

让您更深入地了解这个概念。[HTML 中的内联图像](http://www.websiteoptimization.com/speed/tweak/inline-images/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:24:33.873

当然，您需要确保文件中的数据实际上是用 UTF-8 编码的，而不是您计算机的默认编码。如果您使用所有 ASCII 文本对此进行测试，则无关紧要。

假设文件中的文本与上面示例代码中的字符串中的文本相同，您可以比较两种情况（字符串、文件）以查看 JavaMail 发送的消息如何通过使用 message.writeTo(new FileOutputStream( “味精.txt”））；就在 Transport.send 调用之前或代替它。

# svn - CollabNet 预提交挂钩 - 新手

> ID：10248305
> 
> 赞同：1
> 
> 时间：2012-04-20T14:37:09.433
> 
> 标签：svn, tortoisesvn, svn-hooks, collabnet

我已经安装了 CollabNet SVN。它可以访问，我创建了一些存储库。我想添加两个钩子：

1) 一个预提交钩子，在提交时强制注释。钩子应该检查评论的长度。

2) 一个忽略 bin 和 obj 文件夹内容的钩子。

我希望这两个钩子都应该强制 SVN 的所有用户跟随它们，所以它们应该在服务器上，而不是在我本地的 Tortoise SVN 上。

如果您能告诉我如何做或指导我学习教程，我将不胜感激。这是我第一次从事与 SVN 相关的工作。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-21T23:35:25.917

我还没有尝试过这个特殊的包，但它看起来很像样：Prashanth Vakati 的这个[pre-commit hook](http://pvakati.blogspot.com/2010/01/subversion-pre-commit-hook-check-empty.html)提供了你正在寻找的两个检查以及更多：

*   检查空日志消息；
*   忽略目录/文件夹；
*   忽略文件扩展名；
*   检查锁是否存在。

在引用的网页上，您会找到该软件包的清晰、简洁的描述。不寻常的是，它以 zip 文件的形式出现，其中包含一个 exe 文件和一个配置文件（而不仅仅是一个脚本文件）。只需将它们解压缩到您的 hooks 目录中，然后编辑配置文件以指定您希望忽略的文件夹。请注意，如果尝试提交列表中的文件夹而不是静默过滤列表中的条目，则脚本会生成错误。我个人更喜欢这种方法，因为它让用户意识到某些事情不会被提交。

# css - CSS浮动问题被推到新行

> ID：10248306
> 
> 赞同：0
> 
> 时间：2012-04-20T14:37:14.560
> 
> 标签：css, css-float, smart-wizard

请参阅下面的我的 jsfiddle 示例。

谁能弄清楚我在这里做错了什么？

我正在尝试使用名为 Smart Wizard 的第三方插件，除了 jsfiddle 中显示的这一方面外，它都可以正常工作。

[X] 在新行上，它应该直接在错误消息的右侧。

[http://jsfiddle.net/jamesjw007/4wJv4/1/](http://jsfiddle.net/jamesjw007/4wJv4/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:42:00.503

只需添加

```
.content { width: 90%; float: left; } 
```

小提琴示例：http: [//jsfiddle.net/4wJv4/9/](http://jsfiddle.net/4wJv4/9/) - 根据您的喜好调整内容元素的宽度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:43:22.157

尝试将此添加到样式表..它的工作..

```
.swMain .msgBox .close {
    float: left;
} 
```

您必须将同一标签中的所有元素浮动到左侧才能使元素位于一行中。

只是“浮动”就可以了..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T15:35:34.097

您需要浮动内容 div 以及关闭图标。除此之外，您可能希望将关闭按钮浮动到消息框的右侧，而不是紧跟在文本之后。

```
.swMain .msgBox .content { float:left; width:auto; }
.swMain .msgBox .close { float: right; } 
```

我已经用这些变化更新了你的小提琴 - [http://jsfiddle.net/4wJv4/19/](http://jsfiddle.net/4wJv4/19/)

# sql-server - 如何将 Excel 文件从 WinForms 客户端传递到 WCF 服务并传递到 SQL Server 表中？

> ID：10248309
> 
> 赞同：-2
> 
> 时间：2012-04-20T14:37:26.147
> 
> 标签：sql-server, wcf, datacontract, binaryfiles, nettcpbinding

如何将 Excel 文件从 WinForms 客户端传递到 WCF 服务并传递到 SQL Server 表中？

任何人都可以提供任何指导、代码或建议吗？

1.  将 Excel 文件作为参数的 WCF 服务合同和实现
2.  合同实施应将该 Excel 文件插入到 SQL Server 中的 varbinary(MAX) 列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:58:39.780

*   这是一篇解决您问题的 WCF 部分的[帖子。](https://stackoverflow.com/questions/4725483/wcf-4-0-rest-upload-ms-excel-file)
*   将文件发送到服务器后，您可以使用[FileHelpers.net](http://filehelpers.net/)将该文件解析为对象。

我不在乎您的要求是什么，**不要**将 excel 文档插入到 sql server varbinary(max) 列中。要求应该说“上传一个 Excel 文档，将其内容插入数据库。但是，我们需要将原始 excel 文件与数据库中的数据相关联，这样我们就可以拒绝任何关于我们的过程失败的说法，并有一个验证机制。”

*   创建另一个名为 EXCEL_IMPORT 的表或具有
    或多或少以下列的表

检查我放在那里的扩展属性以获得列说明

```
create table EXCEL_IMPORT 
(
     ImportID   int identity(1,1) NOT NULL CONSTRAINT [PK_EXCEL_IMPORT] PRIMARY KEY,
     FileName_Incoming  varchar(max),
     FilePath_Internal  varchar(max),
     FileName_Internal  varchar(max),
     FileRowCount   int NOT NULL CONSTRAINT [CK_EXCEL_IMPORT_FileRowCount] CHECK  (FileRowCount >= 0),
     ImportDate datetime NOT NULL CONSTRAINT [DF_EXCEL_IMPORT_ImportDate] DEFAULT(getdate())
)

EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'The location on the client computer i.e. C:\Users\jimmy\Desktop\iHeartExcel.xls' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'EXCEL_IMPORT', @level2type=N'COLUMN',@level2name=N'FileName_Incoming'
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'The folder on your fileshare the file is in (this is incase you decide to change the fileshare name)' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'EXCEL_IMPORT', @level2type=N'COLUMN',@level2name=N'FilePath_Internal'
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'The unique filename that you decided on in the fileshare i.e. 2012_04_20_11_34_59_0_71f452e7-7cac-4afe-b145-6b7557f34263.xls' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'EXCEL_IMPORT', @level2type=N'COLUMN',@level2name=N'FileName_Internal' 
```

*   接下来，编写一个将 excel 文件复制到文件共享位置的过程，并创建一个唯一的文件名。此时，您有一个代表文件的对象、文件本身以及有关您放置文件的位置的所有信息。
*   创建一个模仿 excel 电子表格列的表，并在其末尾添加一个 ImportID，该表引用回上面定义的 excel_import 表以及一个身份主键。
*   之后，编写一个将对象插入到具有指定关系的数据库中的过程。这将根据您当前的设置而有所不同。
*   最后，您应该有一个包含所有 Excel 数据的键控表，该表引用导入表中指向磁盘上文件的行。

其他一些想法

*   我会考虑不允许修改表中的excel数据。将其以计算形式复制到另一个表中。有时这不会因为数据量大，但您在这里所做的是构建可证明的数据链回原始源，有时拥有未受污染的文件副本和 sql 副本是有意义的。
*   您的第一反应是“但是所有的 excel 文件都不一样！” 如果是这种情况，您只需创建指向磁盘上文件的导入表（假设它们应该不同）。如果它们应该是相同的，您只需要更多的错误检查。
*   将二进制文件保存在数据库中会产生后果。即备份大小和那个 sql 不能真正索引这些类型的列。每次插入文件时，您对该表的遍历也会变慢，并且通常您不希望这样。（你不能对磁盘上的文件做更多或更少的事情，而不是对二进制文件做更多或更少）
*   在共享的文件名中使用带有前置日期的 GUID。无论如何，您永远不会搜索这些文件，如果您需要按日期执行，您可以使用文件名。这使得名称全局唯一，以防其他进程也需要在此处写入。
*   我知道这不是你所要求的，但我以前曾走这条路，后果很严重。我已经使用上述方法导入了数百万个文件，并且没有出现重大的流程问题。
*   当要求不可行时说出来。建议更便宜或更容易做同样事情的替代方案（使用可测试/可扩展之类的词）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:17:17.953

我相信那里的专家可以对此进行改进，但这里是基础知识......

**在服务器上**

1a。将新的 OperationContract 添加到您的接口（例如 IService.cs）

```
[OperationContract]
string UploadBinaryFile(byte[] aByteArray); 
```

1b。在您的合同实施中插入 SQL Server 表（例如 Service.cs）

```
public string UploadBinaryFile(byte[] aByteArray)
{
    try
    {
        SqlConnection conn = new SqlConnection();
        conn.ConnectionString = MyConnectionString; // from saved connection string
        conn.Open();
        using (SqlCommand cmd = new SqlCommand("INSERT INTO MyTestTable(BinaryFile) VALUES (@binaryfile)", conn))
        {
            cmd.Parameters.Add("@binaryfile", SqlDbType.VarBinary, -1).Value = aByteArray;
            cmd.ExecuteNonQuery();
        }

        return "1"; // to me, this indicates success
    }
    catch (Exception ex)
    {
        return "0: " + ex.Message; // return an error indicator + ex.message
    }
} 
```

**在客户端**

2a. 使用 OpenFileDialog 组件通过大多数 Windows 应用程序使用的标准对话框浏览文件系统上的文件。

```
if (openFileDialog1.ShowDialog() == DialogResult.OK)
{
    txtUploadFilePath.Text = openFileDialog1.FileName;
} 
```

2b。将文件内容加载到字节数组中

```
var byte[] BinaryFile = System.IO.File.ReadAllBytes(txtUploadFilePath.Text); 
```

2c。调用你的 WCF 合约，传入字节数组

```
string UploadResponse = client.UploadBinaryFile(BinaryFile); 
```

它正在工作......是的:-)

# c - 如何将文件 fscanf 到链表中？

> ID：10248310
> 
> 赞同：0
> 
> 时间：2012-04-20T14:37:31.503
> 
> 标签：c

所以我有一个由整数组成的文件。我想使用 fscanf 将文件的整数读入链表。但是在编译期间，函数只是在那里等待输入（好像函数中的某处有一个 scanf ）。请帮我 ：（

代码

```
struct Node{
int data;
struct Node *next;
};

typedef struct Node Node;

void fillListFromFile(Node **head)
{
    FILE *f;
    if((f=fopen("/home/fileOints001.txt","r"))==NULL)
        printf("You cannot open");
    Node *newNode = malloc(sizeof(Node));
    while(fscanf(f, "%d", &(newNode->data)))
    {
    newNode->next = *head;
    *head = newNode;
    Node *newNode = malloc(sizeof(Node));

    }

}

fillListFromFile(&head); // in the main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:41:45.057

您的循环仅在无法转换输入时结束（即`fscanf()`在此处返回 0）。但是您不检查`EOF`. 因此，你转动你的轮子试图一遍又一遍地阅读。就像是：

```
int rc;

/* ... */

while ((rc = fscanf(...)) && rc != EOF) {
    /* ... */
} 
```

这样你检查文件结束条件，并在你点击它时终止循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:08:27.850

您需要进行一些错误检查以确保您的文件正确解析等。

此外，在成功读取数据之前不要分配节点可能是个好主意。

```
typedef struct Node {
    int data;
    struct Node *next;
} Node;

Node* fillListFromFile()
{
    FILE *f;
    if(!(f = fopen("/home/fileOints001.txt","r"))) {
        perror("/home/fileOints001.txt");
        abort();
    }

    Node *head = NULL, **tail = &head, *node;
    int n;
    while(1 == fscanf(f, "%d", &n)) {
        // allocate a new node
        node = malloc(sizeof(Node));
        if(!node) {
            fprintf(stderr, "failed to allocate memory");
            abort();
        }

        // and append it to the list
        node->data = n;
        node->next = NULL;
        *tail = node;
        tail = &node->next;
    }
    if(!feof(f)) {
            fprintf(stderr, "failed to parse the file");
            abort();
    }

    return head;
} 
```

# django - Django 在 ModelChoiceField 上形成 keyerror

> ID：10248312
> 
> 赞同：1
> 
> 时间：2012-04-20T14:37:50.460
> 
> 标签：django, forms

我有一个用于高级搜索的表格。其中一个字段`island_group`是一个 ModelChoiceField，我为其返回 a`values_list`作为查询集（以便只获取每个不同的值一次）。

**表格.py：**

```
class SearchForm(forms.Form):
    ...
    island_group = forms.ModelChoiceField(
        required=False,
        queryset=Locality.objects.values_list('islandgroup', flat=True).distinct('islandgroup')
    ... 
```

并且因为这会引发错误，`invalid choice`因为我使用的是值而不是对象，所以我覆盖了错误：

```
 def clean(self):
        cleaned_data = super(SearchForm, self).clean()

        if self._errors["island_group"]:
            del self._errors["island_group"]

        return cleaned_data 
```

但是，我不断收到`KeyError at /collections/ 'island_group'`错误。事实上，由于这些数据是从只读数据库中提取的，我只是希望能够以最小的麻烦将其传递到视图中。

任何帮助将非常感激。另外，这是回溯：

```
Traceback:
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/sam/django-projects/datazone/bin/datazone/cdrs/views.py" in cdrs_index
  59\.     return render(request, 'cdrs_index.html', context)    
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/shortcuts/__init__.py" in render
  44\.     return HttpResponse(loader.render_to_string(*args, **kwargs),
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/loader.py" in render_to_string
  188\.         return t.render(context_instance)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in render
  123\.             return self._render(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  57\.     return self.nodelist.render(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  127\.         return compiled_parent._render(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  57\.     return self.nodelist.render(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  64\.             result = block.nodelist.render(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  227\.                 nodelist.append(node.render(context))
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in render
  792\.             output = self.filter_expression.resolve(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in resolve
  510\.                 obj = self.var.resolve(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in resolve
  653\.             value = self._resolve_lookup(context)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/template/base.py" in _resolve_lookup
  683\.                         current = getattr(current, bit)
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/forms/forms.py" in _errors
  415\.         return self.form.errors.get(self.name, self.form.error_class())
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/forms/forms.py" in _get_errors
  112\.             self.full_clean()
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/forms/forms.py" in full_clean
  268\.         self._clean_form()
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/forms/forms.py" in _clean_form
  296\.             self.cleaned_data = self.clean()
File "/home/sam/django-projects/datazone/bin/datazone/cdrs/forms.py" in clean
  113\.         if self._errors["island_group"]:

Exception Type: KeyError at /collections/
Exception Value: 'island_group' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:54:39.657

*更新*

我想我知道你的例外，它可能看起来`Select a valid choice. That choice is not one of the available choices.`对吗？原因是`Locality.objects.values_list('islandgroup', flat=True).distinct('islandgroup')`您传递给 的`queryset=`，`ValuesListQuerySet`而不是`QuerySet`。该`ValueListQuerySet`实例不包含`_meta`信息并用作普通列表，这会导致`ModelChoiceField`生成不正确的表单选项。就像下面的人为示例

```
>>> from django import forms
>>> from django.contrib.auth.models import *

>>> class F(forms.Form):
...     user = forms.ModelChoiceForm(queryset=User.objects.values_list('username', flat=True))

>>> print F().as_p()
<p><label for="id_user">User:</label> <select name="user" id="id_user">
<option value="" selected="selected">---------</option>
<option value="okm">okm</option>
</select></p> 
```

但是，第二个选项的正确值应该是`pk`用户 okm，就像

```
>>> class F(forms.Form):
...     user = forms.ModelChoiceForm(queryset=User.objects)

>>> print F().as_p()
<p><label for="id_user">User:</label> <select name="user" id="id_user">
<option value="" selected="selected">---------</option>
<option value="1">okm</option>
</select></p> 
```

因此，您需要根据模型字段`island_group =`的类型更改代码中的行。`islandgroup`

除了上述问题，您的代码很好。因此，当 中没有其他`'island_group'`验证错误时`self._errors`，`self._errors["island_group"]`会引发 KeyError。

# vb.net - VB.net 中的 VB6 函数 AscB 等效

> ID：10248316
> 
> 赞同：1
> 
> 时间：2012-04-20T14:38:07.383
> 
> 标签：vb.net, vb6, vb6-migration

我正在尝试在 .net 应用程序中使用一些 VB6 代码。它使用了一个不再可用的函数 AscB。我需要在.net 中使用什么？

如何使用函数的摘录（函数在第三行从末尾开始）....

```
' Combine each block of 4 bytes (ascii code of character) into one long
' value and store in the message. The high-order (most significant) bit of
' each byte is listed first. However, the low-order (least significant) byte
' is given first in each word.
lBytePosition = 0
lByteCount = 0
Do Until lByteCount >= lMessageLength
    ' Each word is 4 bytes
    lWordCount = lByteCount \ BYTES_TO_A_WORD

    ' The bytes are put in the word from the right most edge
    lBytePosition = (lByteCount Mod BYTES_TO_A_WORD) * BITS_TO_A_BYTE
    lWordArray(lWordCount) = lWordArray(lWordCount) Or _
        LShift(AscB(Mid(sMessage, lByteCount + 1, 1)), lBytePosition)
    lByteCount = lByteCount + 1
Loop 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:06:37.107

AscB 函数仅适用于 8 字节字符串。但是，您可以（可能）通过编写自己的函数来绕过它。

```
Public Function AscB (value as Char) as Byte
    return System.Convert.ToByte(value)
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T15:52:55.813

来自 MSDN 库：

**AscB**函数用于字符串中包含的字节数据。

**AscB**不返回第一个字符的字符代码，而是返回第一个字节

所以以下应该工作：

```
Encoding.ASCII.GetBytes(value).First 
```

其中价值是`Char`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:49:18.167

绅士，非常感谢您的回复...我拥有的代码是用 VB6 编写的 MD5 加密类的一部分。上周末，我遇到了一个我不知道的 .net 类... System.Security.Cryptography 它为我提供了我需要的 5 行代码而不是 100 多行 VB6 代码的加密。非常感谢您的努力。

顺便说一句，您的两个答案都有效。尽管我需要更多地调整 VB6 代码。

# javascript - 如何从 .$getJSON 方法中的 jQuery 函数更新变量

> ID：10248328
> 
> 赞同：0
> 
> 时间：2012-04-20T14:38:48.517
> 
> 标签：javascript, jquery, string, getjson

给出这个方法，我声明了一个包含字符串值的变量“answer”。然后我调用一个 getJSON 方法。我想更新该方法中提到的变量：

```
function verificarRespuestasAjax(pregunta, pinId, respuesta, index){
        var answer = pregunta;
        $.getJSON("../usuarios/comparar_respuestas_JSON", {pinId: pinId, preguntaId: pregunta, respuesta: respuesta.val() }, function(verifRespuestas){
            if(verifRespuestas){
                $("#mensajeError"+index).remove();
                answer += 'true';
            }else{
                if (!$("#mensajeError"+index).length > 0)
                    $(respuesta).after('<em id="mensajeError'+index+'">*La respuesta no coincide</em>');
                answer += 'false';
            }

        });
        return answer;
    } 
```

我该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:44:26.693

AJAX 调用是异步的。在收到响应后应该运行的任何代码都需要在成功回调（或由该回调调用的函数）中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T14:46:31.187

您确实更新了变量。这里唯一的问题是`getJSON`调用是异步的。在执行时，尚未调用`alert()`函数回调。`getJSON`

您需要将`alert(answer)`代码放入从 JSON 回调调用的函数中。

```
function verificarRespuestasAjax(pregunta, pinId, respuesta, index){
  var answer = pregunta;
  $.getJSON("../usuarios/comparar_respuestas_JSON", {pinId: pinId, preguntaId: pregunta, respuesta: respuesta.val() }, function(verifRespuestas){
    // .... snip ....
    completed();
  });
  answer += 'true';
  function completed() {
    alert( answer );
  }
} 
```

# algorithm - 大整数的并行乘法

> ID：10248329
> 
> 赞同：1
> 
> 时间：2012-04-20T14:38:58.017
> 
> 标签：algorithm

执行大整数并行乘法的最佳算法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:52:31.340

我认为您最好的选择是使用[快速傅里叶](http://en.wikipedia.org/wiki/Multiplication_algorithm#Fourier_transform_methods)乘法。您可以使用[并行算法来计算 FFT](http://www.fftw.org/parallel/parallel-fftw.html)及其反向，也可以并行添加元素。

# jquery - 如何避免 jquery 使用 $('#selector').html() 将十六进制颜色值转换为 rgb

> ID：10248331
> 
> 赞同：3
> 
> 时间：2012-04-20T14:39:11.460
> 
> 标签：jquery, hex, rgb

我使用 TinyMCE（jquery 变体）作为编辑器。当用户单击一个按钮时，我读出了他输入的文本

```
editorValue = $('#tinyMceEditor').val(); 
```

例如，如果用户使用颜色设置文本样式，则返回可能类似于

```
"<p><span style="color: #888888;">hello</span></p>" 
```

然后将其放置在 <td> 中。

```
$('#myTd').html(editorValue); 
```

现在，当我读出 td 时

```
$('#myTd').html(); 
```

Internet Explorer 和 Firefox 返回我

```
"<p><span style="color: rgb(136, 136, 136);">hello</span></p>" 
```

当 Chrome 返回我时

```
"<p><span style="color: #888888;">hallo</span></p>" 
```

我做了一些研究并读到 Jquery 使用 rgb 值，因为它以这种方式计算动画。但是这样 .html() 选择器不会返回节点的真实内容。

有没有一种简单的方法可以避免这种转换并像 chrome 一样随处使用它。这对我的应用程序来说是必要的，因为它比较需要匹配的字符串。

# cakephp-2.0 - Cakephp 2.0 使用电子邮件而不是用户名进行身份验证

> ID：10248333
> 
> 赞同：6
> 
> 时间：2012-04-20T14:39:16.637
> 
> 标签：cakephp-2.0, authentication

在我看来，我有：

```
<?php
echo $this->Form->create('User', array("controller" => "Users", "action" => "login", "method" => "post"));
echo $this->Form->input('User.email', array("label" => false));
echo $this->Form->input('User.password', array("label" => false, 'class' => 'password-input'));
echo $this->Form->end(); ?> 
```

在我的 AppController 中：

```
public $components = array(
        'Session',
        'Auth'
    );

    function beforeFilter(){
        $this->Auth->fields = array(
            'username' => 'email',
            'password' => 'password'
        );
    } 
```

在我的用户控制器中：

```
function beforeFilter(){
        $this->Auth->allow('sign_up', 'login', 'logout', 'forgot_password');
        return parent::beforeFilter();
    }
public function login() {
        if ($this->Auth->login()) {
            $this->Session->setFlash(__('Successfully logged in'), 'default', array('class' => 'success'));
            $this->redirect($this->Auth->redirect());
        } else {
            if (!empty($this->request->data)) {
                $this->Session->setFlash(__('Username or password is incorrect'), 'default', array('class' => 'notice'));
            }
        }
    } 
```

但是登录不起作用，我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-21T06:06:43.987

我相信问题是：

```
function beforeFilter(){
    $this->Auth->fields = array(
        'username' => 'email',
        'password' => 'password'
    );
} 
```

这就是在 CakePHP 1.3 中指定自定义登录字段的方式。CakePHP 2.0 要求您在`public $components = array(...);`. [1.3 API](http://api.cakephp.org/1.3/class-AuthComponent.html)显示Auth 有 $fields 属性，但[2.0 API](http://api.cakephp.org/2.0/class-AuthComponent.html)显示不再有 $fields 属性。所以你必须：

```
public $components = array(
    'Session',
    'Auth' => array(
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
); 
```

更多信息请访问：[http ://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)

请告诉我它是如何工作的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:24:01.047

我的问题的最终解决方案。谢谢你。

我遇到了 userModel 的问题，我写了这个：

```
'Auth' => array(
         'userModel' => 'Member'
      ) 
```

而不是这个：

```
'Auth' => array(
    'authenticate' => array(
        'Form' => array(
            'userModel' => 'Member'
        )
    )
) 
```

# field - 可以将四 (4) 个单个 VertexBuffer 关联到顶点属性寄存器的每个字段吗？

> ID：10248338
> 
> 赞同：0
> 
> 时间：2012-04-20T14:39:40.390
> 
> 标签：field, allocation, vertex-buffer, stage3d, agal

在`Stage3D`/`AGAL`中，是否可以通过以下方式将单个 VertexBuffers 指向相同`va0`的对象：

*   每个`VertexBuffer`数据都可以独立更改（假设在某些情况下这是很好的性能，是吗？）。

*   每个都`VertexBuffer`专注于`va0`（第一个顶点属性寄存器）的一个字段，以便 vertexbuffer1 操作`va0.x`、 vertexbuffer2 = `va0.y`、 vertexbuffer3 =`va0.z`和 vertexbuffer4 = `va0.w`；

由于您可以在将 VertexBuffer 分配给对象时指定“偏移量”和数据格式（例如：FLOAT_1、FLOAT_4）`Context3D`，我想这是可能的。

也许我的设置不正确，但是当我尝试这样做时，我无法实现。

每个 VertexBuffer 是否需要占用每个寄存器中的全部 4 个字段？如果是这样，我不确定我是否理解为什么存在 FLOAT_1 -to- FLOAT_3 值！:S

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:02:55.400

当您分配顶点缓冲区或常量时，您分配 128 位（即 4 x 32）。而且您将被完全限制在一个属性（va0，va1）上。所以我认为不可能将不同的缓冲区绑定到单个属性。而且如果你放FLOAT_1，你会浪费内存。

# android - 添加没有root的android.hardware.usb.accessory.xml？

> ID：10248340
> 
> 赞同：1
> 
> 时间：2012-04-20T14:39:50.017
> 
> 标签：android

我正在尝试在三星 Galaxy Note 上使用 Android 的 OpenAccessory。安装应用程序时出现错误。

> 安装错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY

挖掘后看起来我需要添加`android.hardware.usb.accessory.xml`到`/system/etc/permissions/`

我试过了：

```
adb push android.hardware.usb.accessory.xml /system/etc/permissions/ 
```

但我有一个“只读文件系统”，所以我尝试重新安装分区 rw：

```
$ mount -o rw,remount -t yaffs2 /dev/block/mtdblock3 /system 
```

但没有 root 访问权限，我会出现预期的“不允许操作”错误。

有没有办法在没有root的情况下做到这一点？还是我被迫扎根手机才能使其正常工作？

# build - 如何选择哪个 CMake 可执行目标将是默认目标？

> ID：10248342
> 
> 赞同：14
> 
> 时间：2012-04-20T14:40:00.087
> 
> 标签：build, cmake

我编写了一个`CMakeLists.txt`包含 2 个可执行文件（`target1`和`target2`）的文件：

```
ADD_EXECUTABLE(target1 ${CXX_FILES})
TARGET_LINK_LIBRARIES(target1 ${requiredlibs})

ADD_EXECUTABLE(target2 ${CXX_FILES} ${OTHER_CXX_FILES})
TARGET_LINK_LIBRARIES(target2 ${requiredlibs}) 
```

现在，每次我在没有任何参数的情况下运行 make 时，都会重建两个目标。但我想定义`target1`为默认可执行文件，以便只运行不带任何参数的 make `target1`。对于建筑`target2`，我会跑`make target2`。

这可能吗？

在 CMake 创建的 Makefile 中有如下定义： default_target: all

我想我需要一种方法将其设置`default_target`为`target1`.

我遇到的另一个问题是 make 总是重建目标，即使没有更改源文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T14:52:43.387

执行您要求的示例 CMakeLists.txt：

```
ADD_EXECUTABLE(target1 a.c)

ADD_EXECUTABLE(target2 EXCLUDE_FROM_ALL b.c) 
```

对我来说，如果源文件未更改（或修改时间未更改），它不会重建目标。我得到的输出：

```
$ make -f Makefile 
Scanning dependencies of target target1
[100%] Building C object CMakeFiles/target1.dir/a.c.o
Linking C executable target1
[100%] Built target target1
[$ make -f Makefile 
[100%] Built target target1 
```

请注意，第二个 make 不会重建任何内容。

（您可以阅读[CMake 手册](http://www.cmake.org/cmake/help/cmake-2-8-docs.html)了解此类信息）

# php - 动态添加到数组中并检索总和

> ID：10248343
> 
> 赞同：0
> 
> 时间：2012-04-20T14:40:06.160
> 
> 标签：php

```
foreach ($_POST['ECL'] as $lt) {

    //SQL select statements are run.  Each $lt is a where condition where results are obtained from the DB.
} 
```

我想计算每个结果并总结一下。总数将是获得的记录。我可以获得每个人 $lt 的记录数，但我无法对它们求和。所有帮助将不胜感激。

**[更新] $lt 的数量不固定。**$lt 可以是 1,2,3,4... $i++ 等计数器不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:41:36.170

在循环之前设置一个计数器，在循环期间将其递增，最后检索总和。简单的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:44:58.483

尝试使用[mysql_num_rows](http://php.net/manual/en/function.mysql-num-rows.php)或[mssql_num_rows](http://php.net/manual/en/function.mssql-num-rows.php) - 它们返回结果中的行数

```
$count = 0;  // setup count variable
foreach ($_POST['ECL'] as $lt) {

    //SQL select statements are run.  Each $lt is a where condition where results are obtained from the DB.
    $count += mysql_num_rows($result);  // add results count to our counter
}
echo $count; // this will be the total number of rows the queries returned 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:43:55.817

您的问题是您将每个 $lt 的结果行添加到一个数组中（虽然我在发布的代码中没有看到）。

如果是这种情况，并且您每行插入一个数组记录，则数组的长度应该作为您的计数。

# sockets - 套接字编程初学者

> ID：10248344
> 
> 赞同：1
> 
> 时间：2012-04-20T14:40:07.290
> 
> 标签：sockets, networking

假设我有一台运行 GUI 应用程序的平板电脑，以及一台运行后端核心内容的远程 PC（具有静态 IP）。

PC 上运行的应用程序应向服务器请求信息。

现在我正在考虑套接字编程，其中服务器将运行服务器套接字应用程序，而平板电脑将运行客户端套接字应用程序。

但是还有更简单的吗？我知道 ftp 协议用于传输文件，是否有像 ftp 这样的高级协议可用于传输小型二进制数据，每个请求 16 位？所以我不必做任何套接字编程？

如果答案只是使用套接字编程，那该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:06:01.330

套接字编程确实是你想要的。查看[Beej 的网络编程指南以](http://beej.us/guide/bgnet/output/html/multipage/index.html)开始学习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T17:17:02.460

如果我理解正确，您真正想要的是[Application Server](http://en.wikipedia.org/wiki/Application_server)。如果您选择使用套接字，您将不得不处理很多低级细节，例如编组/解组。您可以选择更高级别的解决方案：

*   [科尔巴](http://en.wikipedia.org/wiki/Corba)；
*   [基于PHP](http://en.wikipedia.org/wiki/PHP)的 Web 服务器，可能使用[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)传输请求/回复；
*   在此处添加您最喜欢的 RPC / RMI 框架。

# java - 事务/弹簧事务传播会解决这个并发问题吗？

> ID：10248347
> 
> 赞同：2
> 
> 时间：2012-04-20T14:40:09.273
> 
> 标签：java, spring, concurrency, transactions

如果可以的话，我有几个关于 Spring 事务的问题。假设我有这个 DAO 类：

```
public class MyDAO {

    /**
    * verifies if a certain record in DB contains 'True' in a certain Column named publishFlag
    */
    @Transactional
    public bloolean isBeingPublished(Long recordID){
    ...
    }

    /**
    * sets the record's publishFlag column to true indicating that it's being published
    */
    @Transactional
    public boolean setBeingPublished(Long recordID){
    ...
    }

} 
```

以及使用它的以下类：

```
public class MyClass {

    @Autowired
    MyDAO dao;

    public void publishRecords(List<Long> ids){

        for(Long id : ids){
            if(!dao.isBeingPublished(id)){
                dao.setBeingPublished(id);
                //do something to publish the record
            }
        }

    }
} 
```

我的问题是：

*   首先，`!dao.isBeingPublished(id)`and`dao.setBeingPublished(id)`会在同一个事务中执行还是在单独的事务中执行？

*   第二个问题是关于并发的，`MyClass`可以创建多个实例并且可以并发调用该`publishRecord`方法，因此两个并发调用`!dao.isBeingPublished(id)`可能都给出相同的结果，从而使记录**发布两次！** 我会考虑进行`publishRecords`同步，但应用程序可能部署在多个服务器上，这使得同步声明无用，因此我对事务的问题是，因为数据库是部署在这些服务器上的应用程序之间的唯一共享资源。

我的问题的解决方案到底是什么？我阅读了 spring 的事务传播并发现`REQUIRES_NEW`即使当前正在执行一个事务也会创建一个新事务，但是我仍然看不出这将如何解决我的问题。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:47:52.943

需要考虑的事情很少，DAO 是专注于对单个实体的操作，而 service 是专注于一个或多个实体的操作，所以事务应该放在服务层，这样你就可以在没有任何事务的情况下重用 DAO 的操作，而是让服务来决定何时开始和结束事务

1.  它不是在单个事务中，而是在两个单独的事务中。
2.  这是您当前设计的并发问题，请参阅以下建议。

**界面**

```
public interface MyClass {
    public void publishRecords(List<Long> ids);
} 
```

**执行**

```
@Service
@Transactional(readOnly = false)
class DefaultMyClass implements MyClass  {

    @Autowired
    MyDAO dao;

    // single transaction
    @Override
    public void publishRecords(List<Long> ids) {
        for(Long id : ids){
            if(!dao.isBeingPublished(id)){
                dao.setBeingPublished(id);
                //do something to publish the record
            }
        }
    }
} 
```

**道**

```
class MyDAO {

    public bloolean isBeingPublished(Long recordID){
        // bigbang
    }

    public boolean setBeingPublished(Long recordID){
        // bigbang
    }
} 
```

使用上述设计，这两个问题都得到了解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:47:50.983

> 首先，!dao.isBeingPublished(id) 和 dao.setBeingPublished(id) 是在同一个事务中执行还是在单独的事务中执行？

除非有一个方法`@Transactional`在堆栈中进一步注释，否则它们将在单独的事务中发生，所以是的，您将有可能出现竞争条件。

如果我是你，我会抛弃`isBeingPublished`and`setBeingPublished`支持一个`@Transactional` `publishIfPossible`返回布尔值的方法，它是否能够获取数据库行锁并执行发布操作。

# c++ - 在 Visual Studio 2008 C++ Express 中评估实例方法

> ID：10248351
> 
> 赞同：0
> 
> 时间：2012-04-20T14:40:15.827
> 
> 标签：c++, debugging, visual-studio-2008

我需要调试一个基于 Qt (QGis) 的相当复杂的应用程序的某些部分，并且我已经使用 VS 2008 C++ Express 来构建它，其中包含调试信息（使用 /Od 删除优化）。我可以检查简单的类型变量（如 int、string 等），但我无法评估实例方法，因为它会抛出错误，指出该方法不存在等（CXX0052 errcode）。

我是否必须在调试模式下编译才能获得更深入的了解？表达式评估器是否应该让我检查实例方法？或者，VS Express 调试器是否比完整的 VS 更受限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:48:08.273

如果您的方法是内联定义的，或者您的方法在另一个程序集中，您可能会收到这样的错误。我发现如果该方法不是内联的并且在同一个程序集中，我总是可以在即时窗口中像这样评估：

```
?myObject.myFunc() 
```

您可能会发现此线程很有用：[为什么在 VC++ 调试器上评估表达式时出现“成员函数不存在”错误？](https://stackoverflow.com/questions/1051611/why-do-i-get-a-member-function-not-present-error-when-evaluting-expressions-on)

# c - C中带索引的指针和数组

> ID：10248354
> 
> 赞同：-1
> 
> 时间：2012-04-20T14:40:23.233
> 
> 标签：c, arrays, pointers

我的代码中有这个

```
char *ch = &(string[i]);
printf(ch); 
```

并且您想在数组中打印某些元素，但是如果我将其更改为

```
char *ch = &(string[20]);
printf(ch); 
```

它打印空间 20 及以上的内容，为什么会这样，我该如何尝试解决这个问题？

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:47:02.073

`printf`on a`char *`将打印所有内容，直到它碰到一个`\0`字符，因为在 c 中，字符串是 char*s。

如果您只想打印一个字符，请执行以下操作：

```
printf("%c",ch[0]); 
```

# rules - 条件的替代品

> ID：10248356
> 
> 赞同：6
> 
> 时间：2012-04-20T14:40:33.940
> 
> 标签：rules, conditional

当我谈到“你的*工具包里*有什么？”时，我正在思考 Rich Hickey 的演讲，[Simple Made Easy 。](http://www.infoq.com/presentations/Simple-Made-Easy)滑动。复杂性和简单性之间有一系列对比，这引起了我的兴趣：

 *复杂性：*条件*，简单性：*规则*

有没有人知道 Rich 在这里提出了什么样的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:19:40.983

我猜他将[条件](http://en.wikipedia.org/wiki/Conditional_%28programming%29)语句称为编程语言中的布尔表达式。如果你有很多条件语句，比如循环和开关，它会很快变得复杂。更简单的方法是定义规则。规则采用更自然的语言，您可以以更抽象的方式处理它们来描述您的条件。

查看 Windows 访问管理，您可以在其中为用户分配有关他们拥有的权限的规则。就像更换桌面壁纸一样。这些规则很容易理解，如果应用规则，它是一个简单的布尔决策。但是，如果您提取规则后面的所有条件，它将变得非常复杂。因为在这种情况下，您必须关心可能影响壁纸的每一件事。

最后，两者都是描述条件的方法，但一个比另一个更简单。*

# c# - C# 中带有基数参数的 Java Integer.ValueOf 方法等价

> ID：10248358
> 
> 赞同：5
> 
> 时间：2012-04-20T14:40:52.893
> 
> 标签：c#, java, migration

我的任务是将此 Java 代码迁移到 C# 版本，但我在使用该`ValueOf`方法时遇到了问题，因为我似乎找不到 C# 的等效版本（因为`Radix`Java 上使用的参数，在这种情况下为 16） .

```
public String decrypt_string(String s) 
{
  String s1 = "";
  int i = s.length() / 2;
  int[] ai = new int[i];

  for (int j = 0; j < i; j++) 
  {
    // This is the "problematic" line \/
    ai[j] = Integer.valueOf(s.substring(j * 2, j * 2 + 2), 16).intValue();
  }

  int[] ai1 = decrypt_block(ai, i);

  for (int k = 0; k < i; k++) 
  {
    if (ai1[k] != 0)
      s1 = s1 + (char)ai1[k];
  }

return s1; 
```

}

这是我的尝试，但失败了：

```
public String decrypt_string(String s)
    {
        String s1 = "";
        int i = s.Length / 2;
        int[] ai = new int[i];

        for (int j = 0; j < i; j++)
        {
            int startIndex = j * 2;
            string tmp = s.Substring(startIndex, 2);
            ai[j] = Int32.Parse (tmp); 
        }

        int[] ai1 = decrypt_block(ai, i);

        for (int k = 0; k < i; k++)
        {
            if (ai1[k] != 0)
                s1 = s1 + (char)ai1[k];
        }
        return s1;
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T14:45:18.903

如果您尝试解析十六进制（base-16）数字，请使用以下命令：

```
int.Parse (tmp, NumberStyles.HexNumber); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T14:45:38.723

您需要将字符串转换为整数，因为该字符串位于特定的基数中。

```
int i = Convert.ToInt32(str, 16);
int j = Convert.ToInt32("A", 16); // 10 
```

所以：

```
 for (int j = 0; j < i; j++)
    {
        int startIndex = j * 2;
        ai[j] = Convert.ToInt32(s.Substring(startIndex, 2));
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:51:47.550

基数在 Integer.valueOf() 上，而不是您在那里显示的 java 代码中的 s.substring() 上，所以这将变为：

```
ai[j] = Int32.Parse(s.Substring(j * 2, j * 2 + 2), 16); 
```

# c# - 使用 Visual Studio 2010 Ultimate 模拟

> ID：10248360
> 
> 赞同：3
> 
> 时间：2012-04-20T14:40:55.890
> 
> 标签：c#, unit-testing, tdd, moq, rhino-mocks

我应该继续在 Visual Studio 2010 Ultimate 中使用 Mocks 吗？我的意思是，我收集的关于 mock 的所有信息都有些陈旧，从 2 或 3 年前开始，更具体地说，我正在收集有关下一个框架[Rhino Mocks](http://hibernatingrhinos.com/open-source/rhino-mocks)的信息和[最小起订量](http://code.google.com/p/moq/)。

但是，我不知道我是在寻找旧的或已弃用的东西，还是现在没有使用它......我正在制作一个新项目，我想使用最后的框架以最好的方式实现 TDD可能，而且由于我们最近获得了 VS2010 的 Ultimate 版本，其中包含很多关于测试的信息和实用程序，我想按照他们应该做的方式做事情。

哦，我差点忘了，我必须用VB，而且关于这些框架的大部分信息都是用C#写的，我不知道这是否相关......

谢谢指教！

**编辑**

起订量与[AutoFixture](http://autofixture.codeplex.com/)一起完成了这项工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:01:45.700

Moq 是我选择的模拟框架，但这只是个人喜好。示例通常用 C# 编写并不重要，只要您可以阅读 C#，因为您可以使用所有相同的方法，但语法略有不同。

Moq 或 RhinoMocks 都不会出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T15:10:55.783

Rhino 和 Moq 都能满足您的需求。如果钱不是问题，我也会建议[Typemock](http://www.typemock.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T16:05:14.867

Rhino、Moq 和（我最喜欢的）FakeItEasy 是很好的模拟/伪造框架。

您使用哪种语言进行测试（VB 或 C#）并不重要，但为了安全起见，请检查所有这些框架的文档。我知道 FakeItEasy 支持 VB.NET。您还应该查看 Roy Osherove 关于 .NET 中的单元测试的书，强烈推荐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T12:03:41.603

我倾向于查看托管源代码的网站上的活动，并尝试确定项目是否正在积极维护。如果开发人员的速度很好，那么这通常表明项目得到了很好的支持。这里提到的所有模拟框架都是相当不错的选择，我个人最喜欢的是 Moq，我喜欢将它与 MSpec (Machine.Specifications) 一起使用，但当然每个开发人员或团队都需要自己做出这些选择。

如果您还没有，请获取 Visual Studio 的[NuGet 插件](http://nuget.codeplex.com/)并使用它来安装您的所有框架。如果您正在使用 CI 构建并且不想将这些项目签入您的版本控制中，则使用 NuGetPowerTools 包的 NuGet 有一个“[无提交工作流](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)”。

关于 C# 中的示例，您可以使用[Telerik Code Converter](http://converter.telerik.com/)轻松地将它们转换为 VB。

# c# - C#将datagridview数据写入SQL表

> ID：10248361
> 
> 赞同：0
> 
> 时间：2012-04-20T14:40:56.943
> 
> 标签：c#, sql, datagridview

我在 SQL 数据库中有一个四列表。前三列的信息由另一个来源提供。coloum 4 默认设置为 null。

然后，我有一个带有数据表的 win 表单，该数据表使用以下代码填充来自 sql 数据库的信息：

```
 public DataTable populateFormList()
    {

            SqlConnection con = new SqlConnection(Properties.Settings.Default.sqlConnectionString);
            SqlCommand cmd = new SqlCommand("SELECT * FROM of_formlist_raw", con);
            con.Open();

            SqlDataReader reader = cmd.ExecuteReader();

            DataTable dt = new DataTable();
            dt.Load(reader);

            return dt;
}

datagridview2.DataSource = populateFormList();
datagridview2.Refresh(); 
```

现在，在获取我的数据方面效果很好。

然后，用户可以更改第 4 列中的空值。

如何轻松地将这些更改从数据表写回 SQL 表？

换句话说，一旦屏幕上的数据表有附加值，我如何才能将更新的信息存储回最初从中获取它的 SQL 数据中？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:59:40.183

`(DataTable)datagridview2.DataSource`尝试这样的事情并作为数据表传递：

```
private static void BulkInsertToSQL(DataTable dt, string tableName)
        {

                using (SqlConnection con = new SqlConnection(_DB))
                {
                    SqlBulkCopy sbc = new SqlBulkCopy(con);
                    sbc.DestinationTableName = tableName;

                    //if your DB col names don’t match your data table column names 100%
                    //then relate the source data table column names with the destination DB cols
                    sbc.ColumnMappings.Add("DBAttributeName1", "DTColumnName1");
                    sbc.ColumnMappings.Add("DBAttributeName2", "DTColumnName2");
                    sbc.ColumnMappings.Add("DBAttributeName3", "DTColumnName3");
                    sbc.ColumnMappings.Add("DBAttributeName4", "DTColumnName4");

                    con.Open();

                    sbc.WriteToServer(dt);
                    con.Close();
                }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:52:53.520

2 个选项，带或不带 TableAdapter。

我建议[在 MSDN](http://msdn.microsoft.com/en-US/library/0f92s97z%28v=vs.80%29.aspx)中为 TableAdapter阅读此内容

他们也在使用 BindingSources，它们是优秀的组件，易于使用。

如果没有 TableAdapter，[请阅读](http://msdn.microsoft.com/en-US/library/ms233819%28v=vs.80%29.aspx)“使用命令对象更新记录”部分。

# c# - Microsoft.Web.Administration.dll 是否可再发行？

> ID：10248365
> 
> 赞同：1
> 
> 时间：2012-04-20T14:41:10.757
> 
> 标签：c#, iis-7

我们正在客户机器中使用来自 IIS 的 ServerManager 类访问默认端口号。但是控制台没有运行某些机器并显示 Microsoft.Web.Administration.dll 是必需的。这个程序集是可再发行的吗？或者有没有其他方法可以获取默认端口号？我正在使用下面的代码来获取端口号。

```
using (ServerManager serverManager = new ServerManager())
        {
            SiteCollection allsites = serverManager.Sites;
            foreach (Site site in allsites)
            {
                if (site.Name == "Default Web Site")
                {
                    BindingCollection allBindings = site.Bindings;
                    foreach (Binding bind in allBindings)
                    {
                        if (bind.Protocol == "http")
                        {
                            PortNo = bind.BindingInformation.ToString();
                            int portNoLenth = PortNo.Length; PortNo = PortNo.Substring(2, portNoLenth - 3); break;
                        }
                    }
                }
            }
        } 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:53:02.763

不，它不是可再发行的，它应该安装在带有 IIS 的机器上。即使您这样做了，它也可能无法工作，因为它依赖于需要存在和注册的其他库（本机代码 DLL）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-25T13:51:35.027

我知道这是一篇较旧的帖子，但我相信它现在是可再分发的，因为如果您尝试添加对它的引用，它会在扩展下显示为一个程序集。

[![Microsoft.Web.Administration 参考](../Images/69db632c6ade8963a431ef5b15b169e3.png)](https://i.stack.imgur.com/NX0mO.png)

# java - 三星平板 7.0 plus 和 7.7 无法调试设备

> ID：10248368
> 
> 赞同：0
> 
> 时间：2012-04-20T14:41:22.550
> 
> 标签：java, android, adb, samsung-mobile

我在我的 ubuntu 上调试三星平板设备时遇到问题。就我而言，我正在使用：

1.  Ubuntu 11.04
2.  android-sdk 工具版本 17.0
3.  android-sdk 平台工具版本 11.0
4.  三星平板7.0 plus和7.7，android-os版本为3.2

当我将设备连接到我的 ubuntu 计算机时，命令“adb devices”显示为“??????????? device”，然后我无法在设备上调试或安装我的应用程序。它适用于三星平板电脑 8.9 和 10.1。我尝试执行以下操作：

1.  重启 adb 服务器 (adb kill-server && adb start-server)
2.  以 root 身份重新启动 adb 服务器（sudo adb kill-server && sudo adb start-server）
3.  检查 udev 和权限为“a+rx”然后重新启动 udev 并重新启动 adb
4.  停止 adb (adb kill-server) 以 USB 模式启动 adb (adb usb)
5.  将供应商 ID 添加到 ~/.android/adb_usb.ini

所有这些解决方案都不起作用，我注意到当设备在充电时关闭并连接到我的电脑时，命令“adb devices”像“2E83E ... device”一样正常列出，也与当我在设备处于引导加载程序时打开它时，设备准备好后，上面显示命令“adb devices”，我无法对该设备执行任何操作。

我想知道是否有任何技巧或我必须与 android-sdk 或我的 ubuntu 来解决这个问题。

非常感谢您的顾问。

谢谢维斯纳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:16:26.643

我最近不得不调试一个在 GT-P6200（应该是 7.0 Plus）上运行的应用程序并且遇到了同样的问题：它只是不会出现在 adb 中。

时不时地它*会*，没有我做任何特别的事情。有很多人在互联网上抱怨这一点，没有人有有效的解决方案或解决方法。

我怀疑这是三星固件中的某种错误，在三星确定开发人员很重要并修复该问题之前，我们无能为力。

（也许这会在他们发布该平板电脑的 ICS 升级时发生。）

# asp.net - DotNetNuke CustomValidator 奇怪的行为

> ID：10248375
> 
> 赞同：0
> 
> 时间：2012-04-20T14:41:44.070
> 
> 标签：asp.net, dotnetnuke, customvalidator

我正在开发的 dotnetnuke 模块有一个奇怪的问题。我想使用 asp 自定义验证器来验证一些输入。为简单起见，我将仅检查该字段是否为空且至少有几个字符长。（我知道我可以使用其他标准验证器）。

问题是我的代码在本地（开发）工作正常，但在生产中不行。我知道的唯一区别是我使用 DNN 6 而不是 DNN 5。

无论我在生产站点上输入什么，它总是向我显示验证错误消息。

这些是网页的相关部分：

**澳交所：**

```
<div>
<asp:UpdatePanel ID="UpdatePanelValidationSummaryHome" ChildrenAsTriggers="False"                          UpdateMode="Conditional" runat="server">
 <ContentTemplate>
        <asp:ValidationSummary ID="ValidationSummary1" CssClass="validationSummary" runat="server"
            EnableClientScript="False" ShowSummary="true" ShowMessageBox="false" />
        <asp:CustomValidator ID="CustomValidatorActiveTab" runat="server" Display="None"
            ErrorMessage="Error the field ... was not correct..." OnServerValidate="CustomValidatorActiveTab_ServerValidate"></asp:CustomValidator> 
```

```
<asp:Button ID="btnZoeken" CssClass="btnZoeken" CausesValidation="true" runat="server"    Text="<%$ Resources:GLOBAL, btnZoeken %>"
        OnClick="btnZoeken_Click" /> 
```

**背后的代码**

```
private bool ValidateTab_Ondernemingsnummer()
    {
        if (!String.IsNullOrEmpty(txtOndernemingsnummer.Text) &&  txtOndernemingsnummer.Text.Length >= 3)
        {
            return true;
        }
        return false;
    }

protected void CustomValidatorActiveTab_ServerValidate(object source, ServerValidateEventArgs e)
    {
        int activeTab = GetActiveIndexAccordion();

        switch (activeTab)
        {
            //Zoeken op ondernemingsnummer
            case 0:
                if (!ValidateTab_Ondernemingsnummer())
                {
                    e.IsValid = false;
                }
                else
                {
                    e.IsValid = true;
                }
                break;
} 
```

谢谢你的帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:20:06.223

解决了：

我使用 dotnetnuke 日志记录来查看 e.isValid 何时以及为何设置为 false。我的自定义验证器控件被调用了两次！！第一次验证没问题，第二次就不行了。

我的解决方案是禁用标记中的自定义服务器验证器控件，并在提交后启用它（并且不要忘记将其关闭）。

像这样：

```
<asp:UpdatePanel ID="UpdatePanelValidationSummaryHome" ChildrenAsTriggers="False"
    UpdateMode="Conditional" runat="server">
    <ContentTemplate>
        <asp:ValidationSummary ID="ValidationSummary1" CssClass="validationSummary" runat="server"
            EnableClientScript="False" ShowSummary="true" ShowMessageBox="false" />
        <asp:CustomValidator ID="CustomValidatorActiveTab" runat="server" Display="None"
            EnableClientScript="false" Enabled="false" ErrorMessage="ERROR ONDERNEMINGSNUMMER"
            OnServerValidate="CustomValidatorActiveTab_ServerValidate"></asp:CustomValidator> 
```

Enabled = false 在这里很重要！

然后在按钮中单击

```
protected void btnZoeken_Click(object sender, EventArgs e)
    {
        CustomValidatorActiveTab.Enabled = true;
        CustomValidatorActiveTab.Validate();

        if (Page.IsValid)
        {
            CustomValidatorActiveTab.Enabled = false; 
```

我仍然不知道为什么 CustomValidatorActiveTab_ServerValidate 被调用了两次。我想它与 DNN 5 有关（也许它已在 DNN 6 中修复）。

我希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:44:44.973

验证器被调用两次的原因是由于`link button`.
生成 GridView `onBubbleEvent`，这也会导致`validator`验证。

# c++ - 在调用 recv() 之前检查错误

> ID：10248380
> 
> 赞同：2
> 
> 时间：2012-04-20T14:41:46.573
> 
> 标签：c++, windows, sockets, recv

遇到以下问题：

我制作了一个能够使用**select** () 处理多个连接的服务器。但是，如果套接字刚刚收到诸如“客户端断开连接”或其他错误之类的错误，则 select 也会**返回**一个客户端（**FD_SET的索引）。**

是否可以在不调用**recv** () 的情况下检查套接字。因为要接收，我需要从我的“ **BufferPool** ”中获取一个缓冲区

**示例代码：**

```
int ret = recv(client, buffer_pool->get(), BUFFER_SIZE, 0);
if(ret == -1) ... // something went wrong 
```

那么我必须再次释放缓冲区，这几乎浪费了我池中的一个缓冲区。（很短的时间）

所以不调用**recv** () 就不能检查socket吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:44:21.757

我不确定 Windows，但`getsockopt()`在符合 POSIX 的系统上使用就像一个魅力。尽管在使用它之前 - 请确保从池中获取缓冲区比进行额外的系统调用更昂贵。这是一个代码片段：

```
int my_get_socket_error(int fd)
{
        int err_code;
        socklen_t len = sizeof(err_code);

        if (getsockopt(fd, SOL_SOCKET, SO_ERROR, &err_code, &len) != 0)
                err_code = errno;
        else
                errno = err_code;
        return err_code;
} 
```

**更新：**

根据[此文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738544%28v=vs.85%29.aspx)，Windows 似乎也支持它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T15:27:46.990

不，没有办法避免`recv()`来电。如果`select()`报告套接字是可读的，那么您必须从套接字读取以确定它的新状态。如果客户端正常断开连接，`recv()`将返回 0，而不是 -1。如果您不想浪费池化缓冲区，则必须先读入临时本地缓冲区，然后如果`recv()`返回任何数据，则可以检索池化缓冲区并将读取的数据复制到其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T15:38:47.130

调用 recv 和类似的功能不能直接与网络设备或类似的东西一起使用。当您发送或接收数据时，您所做的只是向操作系统询问可用数据，或者将数据放入队列中以进行发送。然后，当您的代码已经走得更远时，操作系统将完成另一项工作。这就是为什么您在下次调用将“联系”操作系统网络层的套接字函数后收到错误的原因。

在这一点上出现错误是正常的，你必须处理它们。

但是为了防止阻塞套接字和浪费缓冲区，请查看实现或准备好的库的在线技术，它们为您提供了使用套接字的异步方式，这样您就不需要在套接字触发接收回调函数之前定义任何东西，您必须这样做实际接收。

同样，一次性接收大量数据也不是什么好技术，因为您将面临通过 TCP 层合并或拆分数据的问题，因为它是基于流的层。建议在您的数据包中包含标头（几个字节）并接收它们，这样您就不需要为标头拉取，但只有在标头之后您才想根据标头中提供的长度读取消息的其余部分。这只是可能的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T11:44:23.983

经过几分钟的工作和您的帮助，我在收到全部金额之前只收到了 1 个字节：

```
SOCKET client = ...;

char temp = 0x00;
int len = recv(client, &temp, 1, 0);
if(len == 0)
{
    // .. client error handling
    return;
}

char* buffer = m_memory_pool->Get();
len = recv(client, buffer + 1, m_memory_pool->buffer_size() - 1, 0);
buffer[0] = temp;

// data handling 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-27T19:12:12.623

我还尝试为 recv() 设置超时，但似乎在 Windows 下它不起作用，这是我的代码：

```
...
long timeout_ms = 10;
struct timeval interval = {timeout_ms / 1000, (timeout_ms % 1000) * 1000};
if (interval.tv_sec < 0 || (interval.tv_sec == 0 && interval.tv_usec <= 0))
{
    interval.tv_sec = 0;
    interval.tv_usec = 10000;
}
setsockopt(s_sktIx, SOL_SOCKET, SO_RCVTIMEO, (char *)&interval, sizeof(struct timeval));
... 
```

# excel - 单元格范围到带有回车的单个单元格

> ID：10248384
> 
> 赞同：2
> 
> 时间：2012-04-20T14:41:53.253
> 
> 标签：excel, vba

我正在阅读我的第一本 VBA 书籍，如果有人能指出我正确的方向，我将不胜感激。如何将一系列行传输到带有回车的单个单元格中？然后，我想对列中的所有范围重复此操作。

我想我需要：

*   在列中找到第一个具有值的单元格
*   验证下一行不为空
*   找到范围内的最后一个单元格
*   在范围上执行“操作”

![开始](../Images/5e8cac33f917946019646701007b702d.png)

![在此处输入图像描述](../Images/b9412b7f2d14a89cb373184f7ac290c9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:33:32.103

跟进我的评论。这是实现您想要的非常简单的方法。

```
Option Explicit

'~~> You can use any delimiter that you want
Const Delim = vbNewLine

Sub Sample()
    Dim rngInput As Range, rngOutput As Range

    Application.ScreenUpdating = False

    Set rngInput = Range("A1:A5") '<~~ Input Range
    Set rngOutput = Range("B1")   '<~~ Output Range

    Concatenate rngInput, rngOutput

    Application.ScreenUpdating = True
End Sub

Sub Concatenate(rng1 As Range, rng2 As Range)
    Dim cl As Range
    Dim strOutPut As String

    For Each cl In rng1
        If strOutPut = "" Then
            strOutPut = cl.Value
        Else
            strOutPut = strOutPut & Delim & cl.Value
        End If
    Next

    rng2.Value = strOutPut
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:05:50.070

在工作表级代码的上下文中，以下将起作用。第 2 列是硬编码的，因此您可能需要传入一个值或以其他方式对其进行修改以满足您的需要。

```
Dim rng As Range
Set rng = Me.Columns(2)

Dim row As Integer
row = 1

' Find first row with non-empty cell; bail out if first 100 rows empty
If IsEmpty(Me.Cells(1, 2)) Then
    Do
        row = row + 1
    Loop Until IsEmpty(Me.Cells(row, 2)) = False Or row = 101
End If

If row = 101 Then Exit Sub

' We'll need to know the top row of the range later, so hold the value
Dim firstRow As Integer
firstRow = row

' Combine the text from each subsequent row until an empty cell is encountered
Dim result As String
Do
    If result <> "" Then result = result & vbNewLine
    result = result & Me.Cells(row, 2).Text
    row = row + 1
Loop Until IsEmpty(Me.Cells(row, 2))

' Clear the content of the range
Set rng = Me.Range(Me.Cells(firstRow, 2), Me.Cells(row, 2))
rng.Clear

' Set the text in the first cell
Me.Cells(firstRow, 2).Value2 = result 
```

# regex - 在 Perl 中，如何删除不在双引号“”内的所有空格？

> ID：10248386
> 
> 赞同：3
> 
> 时间：2012-04-20T14:41:59.890
> 
> 标签：regex, perl

我想提出一些正则表达式，只要它不在双引号（“）内，它就会从字符串中删除所有空格字符。

示例字符串：

**一些带有“引号中的文本”的字符串**

结果：

**somestringwith"引号中的文字"**

到目前为止，我想出了这样的事情：

```
 $str =~ /"[^"]+"|/g; 
```

但它似乎并没有给出预期的结果。

老实说，我是 perl 的新手，并且没有太多的正则表达式经验。因此，如果有人愿意回答，也愿意提供一些关于为什么以及如何做到这一点的见解！

谢谢！

**编辑**

字符串不会包含转义的“”

它实际上应该总是这样格式化：

**Some.String = "一些值"**

结果将是

**Some.String="一些值"**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T15:01:04.333

这是一种`split`用于分隔带引号的字符串的技术。它依赖于您的数据是一致的，并且不适用于松散的引号。

```
use strict;
use warnings;

my @line = split /("[^"]*")/;
for (@line) {
    unless (/^"/) {
        s/[ \t]+//g;
    }
}
print @line;  # line is altered 
```

基本上，您拆分字符串以隔离带引号的字符串。完成后，对所有其他字符串执行替换。由于数组元素在循环中具有别名，因此对实际数组执行替换。

你可以像这样运行这个脚本：

```
perl -n script.pl inputfile 
```

要查看输出。或者

```
perl -n -i.bak script.pl inputfile 
```

要在 上进行就地编辑`inputfile`，同时将备份保存在`inputfile.bak`.

话虽如此，我不确定您的编辑意味着什么。你想改变吗

```
Some.String = "Some Value" 
```

到

```
Some.String="Some Value" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T15:11:20.430

[Text::ParseWords](http://search.cpan.org/perldoc/Text%3a%3aParseWords)是为此量身定做的：

```
#!/usr/bin/env perl

use strict;
use warnings;
use Text::ParseWords;

my @strings = (
    q{This.string = "Hello World"},
    q{That " string " and "another   shoutout to my   bytes"},
);

for my $s ( @strings ) {
    my @words = quotewords '\s+', 1, $s;
    print join('', @words), "\n";
} 
```

输出：

```
this.string="你好世界"
那个“字符串”和“我的字节的另一个大喊”
```

`Text::ParseWords`如果您不得不处理带有转义引号的带引号的字符串，则使用手段，您已经准备好;-)

此外，这听起来像您有某种配置文件并且您正在尝试解析它。如果是这种情况，可能会有更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T15:10:55.997

我建议使用删除引用的子字符串`split`，然后`join`在从中间文本中删除空格后重新组合它们。

请注意，如果用于`split`包含捕获的正则表达式，则捕获的值也将包含在返回的列表中。

这是一些示例代码。

```
use strict;
use warnings;

my $source = <<END;
Some.String = "Some Value";
Other.String = "Other Value";
Last.String = "Last Value";
END

print join '', map {s/\s+// unless /"/; $_; } split /("[^"]*")/, $source; 
```

**输出**

```
Some.String= "Some Value";Other.String = "Other Value";Last.String = "Last Value"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T15:10:18.277

我会简单地逐个字符地遍历字符串。这样您也可以处理转义字符串（只需添加一个 isEscaped 变量）。

```
my $text='lala "some thing with quotes " lala ... ';
my $quoteOpen = 0;
my $out;

foreach $char(split//,$text) {
  if ($char eq "\"" && $quoteOpen==0) {
    $quoteOpen = 1;
    $out .= $char;
  } elsif ($char eq "\"" && $quoteOpen==1) {
    $quoteOpen = 0;
    $out .= $char;
  } elsif ($char =~ /\s/ && $quoteOpen==1) {
    $out .= $char;
  } elsif ($char !~ /\s/) {
    $out .= $char;
  }
}

print "$out\n"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T21:11:47.580

拆分双引号，仅从偶数字段中删除空格（即引号中的空格）：

```
sub remove_spaces {
    my $string = shift;
    my @fields = split /"/, $string . ' '; # trailing space needed to keep final " in output
    my $flag = 1;
    return join '"', map { s/ +//g if $flag; $flag = ! $flag; $_} @fields;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T15:10:03.803

可以用正则表达式完成：

```
s/([^ ]*|\"[^\"]*\") */$1/g 
```

请注意，这不会处理引号内的任何类型的转义。

# gcc - 禁用被视为错误的警告（cc1.exe）

> ID：10248393
> 
> 赞同：25
> 
> 时间：2012-04-20T14:42:35.297
> 
> 标签：gcc, gcc-warning, brew-framework

我正在开发一个 brew 应用程序。编译应用程序以获取 MOD 文件时，我不断收到此错误

> cc1.exe：被视为错误的警告

我想禁用此警告。我用谷歌搜索了它，很多人说禁用`-werror`会有所帮助，但我不知道该怎么做。编译器是 CodeSourcery ARM。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-20T14:51:20.523

您需要`-Werror`从`CFLAGS`等中删除`CPPFLAGS`；这些通常在 Makefile 或构建脚本中设置。

但是，我强烈建议改为修复实际警告，这将产生更稳定和无错误的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-30T07:50:04.953

在终端中运行此命令表示，不要将警告视为错误

```
make CFLAGS="-Wno-error=format-truncation" 
```

# c++ - 模板和非模板类的C++符号范围搜索顺序不同？

> ID：10248396
> 
> 赞同：16
> 
> 时间：2012-04-20T14:42:41.120
> 
> 标签：c++, templates, scope

```
#include <iostream>

void foo()
{
    std::cout << "global foo()" << std::endl;
}

struct A {
    void foo()
    {
        std::cout << "A::foo()" << std::endl;
    }
};

struct B : public A {
    void call()
    {
        foo();
    }
};

int main(int argc, char **argv )
{
    B b;
    b.call();
    return 0;
} 
```

这给出了[预期的结果](http://ideone.com/WHjpk)：

```
A::foo() 
```

然而，在改变两行（B类到模板）之后：

```
#include <iostream>

void foo()
{
    std::cout << "global foo()" << std::endl;
}

struct A {
    void foo()
    {
        std::cout << "A::foo()" << std::endl;
    }
};

template <typename T> // change here
struct B : public T {
    void call()
    {
        foo();
    }
};

int main(int argc, char **argv )
{
    B<A> b; // and here
    b.call();
    return 0;
} 
```

我得到[了意想不到的结果](http://ideone.com/2p4hR)：

```
global foo() 
```

并且使用`this->`不是一种选择，因为我正在尝试创建“后备”机制。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T14:54:47.133

你得到的是预期的结果。这在 C++ 标准中称为“两阶段名称查找”。

模板中的名称分为两种：

**Dependent** – 依赖于模板参数但未在模板中声明的名称。

**Non-dependent** – 不依赖于模板参数的名称，加上模板本身的名称和在其中声明的名称。

当编译器试图解析代码中的某个名称时，它首先判断该名称是否依赖，而解析过程源于这种区别。虽然“正常”解析非依赖名称 - 当定义模板时，依赖名称的解析发生在模板实例化的点。

`foo();`在`B::call`您的示例中，in 是一个非依赖名称，因此`foo()`在模板定义时它被解析为全局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T16:07:01.573

接受的答案解释了为什么你会看到这种行为，而不是如何实现你想要的“后备”行为。这可以使用[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)来完成，通过引入一对成员模板重载，其中一个仅在基类具有名为的成员函数时才存在`foo`。

```
template <typename T>
struct B : T {
    template <void (T::*)()> struct has_mem_fn {};

    template <typename U> void call(has_mem_fn<&U::foo>*) {this->foo();}
    template <typename U> void call(...) {foo();}

    void call() {call<T>(0);}
};

struct X {};

int main()
{
    B<A> ba;
    ba.call();  // A::foo()

    B<X> bx;
    bx.call();  // global foo()
} 
```

更新：我刚刚注意到您在另一个答案中的评论，您说您知道这种方法，但由于必须支持功能失调的编译器而无法使用它。在那种情况下，恐怕你想要的可能是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:54:09.890

~~您需要明确告诉使用 T 类方法。~~

 ~~```
template <typename T>
struct B : public T {
    void call()
    {
        T::foo();
    }
}; 
```~~  ~~* * *

但是对于回退机制，您可以检查这个问题：[是否可以编写模板来检查函数的存在？](https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-c-template-to-check-for-a-functions-existence)

使用**Substitution failure is not an error** (SFINAE)，您可以检查`foo`T 中的方法，然后运行正确的方法。~~

# python - python：如果finally块引发异常，则从try块中恢复异常

> ID：10248410
> 
> 赞同：14
> 
> 时间：2012-04-20T14:43:41.363
> 
> 标签：python, exception, exception-handling, try-catch, try-catch-finally

假设我有一些这样的代码：

```
try:
    try:
        raise Exception("in the try")
    finally:
        raise Exception("in the finally")
except Exception, e:
    print "try block failed: %s" % (e,) 
```

输出是：

```
try block failed: in the finally 
```

从该打印语句的角度来看，有什么方法可以访问 try 中引发的异常，还是它永远消失了？

注意：我没有考虑用例；这只是好奇。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-20T14:52:13.963

我找不到任何关于这是否已被反向移植并且没有方便的 Py2 安装的任何信息，但在 Python 3 中，`e`有一个名为 的属性`e.__context__`，因此：

```
try:
    try:
        raise Exception("in the try")
    finally:
        raise Exception("in the finally")
except Exception as e:
    print(repr(e.__context__)) 
```

给出：

```
Exception('in the try',) 
```

根据[PEP 3314](http://www.python.org/dev/peps/pep-3134/)，在`__context__`添加之前，有关原始异常的信息不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:45:46.333

```
try:
    try:
        raise Exception("in the try")
    except Exception, e:
        print "try block failed"
    finally:
        raise Exception("in the finally")
except Exception, e:
    print "finally block failed: %s" % (e,) 
```

但是，避免在块中使用可能引发异常的代码是一个好主意`finally`——通常你只是用它来做清理等。

# iphone - isBeingDismissed 未在 viewWillDisappear 中设置：

> ID：10248412
> 
> 赞同：16
> 
> 时间：2012-04-20T14:43:48.193
> 
> 标签：iphone, ios, uiviewcontroller, modalviewcontroller

我有一些代码要清理，`viewWillDisappear:`我只想在视图移回父视图控制器时使用。

```
- (void)viewWillDisappear:(BOOL)animated
{
    if ([self isMovingFromParentViewController] || [self isBeingDismissed]) {
        NSLog(@"isMovingFromParentViewController or isBeingDismissed");
        // clean up
    }
    [super viewWillDisappear:animated];
} 
```

视图可以通过两种方式呈现：它可以由导航控制器推送，或者呈现为模式视图控制器（来自同一个导航控制器）。如果它被按下，然后弹出（按下后退按钮），我的清理代码就会运行。如果它呈现为模态视图控制器，然后被解除，则代码不会运行。

我这样解雇：

```
[rootViewController dismissModalViewControllerAnimated:YES]; 
```

我的问题是：为什么`isBeingDismissed`我关闭视图控制器时没有设置？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-02-15T02:43:56.547

如果这是模式导航控制器中第一个被关闭的视图控制器，则调用`self.isBeingDimissed()`from`viewWillDisappear:`返回`false`。

但是，由于整个导航控制器都被解除了，实际工作的是`self.navigationController?.isBeingDismissed()`，它返回`true`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-06-07T09:02:23.523

正如@Yuval Tal 提到的，当您关闭嵌入在导航控制器中的控制器时，此标志不起作用。这是我使用的扩展：

```
extension UIViewController 
{
    var isAboutToClose: Bool {
        return self.isBeingDismissed ||      
               self.isMovingFromParent ||          
               self.navigationController?.isBeingDismissed ?? false
    }
} 
```

`.isBeingDismissed`当您发现标准不起作用的另一种情况时，可以轻松扩展它。如果你找到了，让我们在评论中告诉我。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-20T18:08:36.243

您的问题是您如何消除模态视图。rootViewController 是如何定义的？

当我打电话时`[self dismissModalViewControllerAnimated:YES]`，`[self isBeingDismissed]`评估结果为真。

当我调用`[parentViewController dismissModalViewControllerAnimated:YES]`then`[self isBeingDismissed]`评估为 true 时，parentViewController 是呈现模态视图的 UIViewController（注意：不是 UINavigationController）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-11T16:20:08.603

如果您有机会来到这里尝试`isBeingDismissed`在非模态呈现的视图控制器上使用，您可以随时检查`topViewController`您的属性`navigationController`，例如：

```
if navigationController?.topViewController != self {
    return
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-01T02:18:46.613

> ```
>  viewController.isBeingPresented == NO;
>         [rootVC presentViewController:viewController animated:NO completion:^{
>             viewController.isBeingPresented == NO;
>             viewController.isBeingDismissed == NO;
>             [viewController dismissViewControllerAnimated:NO completion:^{
>                 viewController.isBeingDismissed == NO;
>             }];
>             viewController.isBeingDismissed == NO;    // is not work
>         }];
>         viewController.isBeingPresented == YES;     // is work 
> ```

```
 viewController.isBeingPresented == NO;
        [rootVC presentViewController:viewController animated:NO completion:^{
            viewController.isBeingPresented == NO;
            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
                viewController.isBeingDismissed == NO;
                [viewController dismissViewControllerAnimated:NO completion:^{
                    viewController.isBeingDismissed == NO;
                }];
                viewController.isBeingDismissed == YES;    // is work
            });
        }];
        viewController.isBeingPresented == YES;     // is work 
```

# oracle - 页面锁与表锁 Oracle

> ID：10248414
> 
> 赞同：2
> 
> 时间：2012-04-20T14:43:56.477
> 
> 标签：oracle

Oracle中的pg和表锁有区别吗

做

```
select * from emp for update; 
```

结果表锁定？

和

```
select * from emp where deptno=10 for update; 
```

导致页面锁定？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T14:49:35.610

Oracle 中没有页锁之类的东西。Oracle 有行级锁和表级锁。

这两个语句都在查询返回的所有行上创建行级锁。`EMP`第一个在执行查询的 SCN的表中的每一行上创建一个行级锁。第二个在执行查询的 SCN的`EMP`表中为 10 的表中的每一行创建一个行级锁。`DEPTNO`这两个查询还将在表上创建一个共享锁，以防止其他会话对表执行 DDL，但这很少是人们在谈论表锁时谈论的内容。

# knockout.js - jsfiddle中的knockoutJS映射模板嵌套数组

> ID：10248420
> 
> 赞同：1
> 
> 时间：2012-04-20T14:44:06.443
> 
> 标签：knockout.js

我有这个小提琴：

[http://jsfiddle.net/gY2JV/63/](http://jsfiddle.net/gY2JV/63/)

数据怎么不显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:59:43.820

有几件事情需要改变：

```
vm = new DocsVM({
    MyDocs: ko.mapping.fromJS(jsonData)
}); 
```

DocsVM 做另一个映射的时候，为什么要在这里映射呢？

```
vm = new DocsVM(jsonData); 
```

* * *

模板名称需要用引号引起来：

```
template: {name: TrTemplate 
```

=>

```
template: {name: 'TrTemplate' 
```

* * *

这不是一个有效的绑定：

```
<a data-bind="html:  'DisplayName 
```

=>

```
<a data-bind="text: DisplayName 
```

* * *

另一个注意事项：为什么要使用 jQuery 绑定按钮的事件处理程序？为了一致性，使用淘汰赛。

[http://jsfiddle.net/gY2JV/64/](http://jsfiddle.net/gY2JV/64/)

# zend-framework - Zend Framework 验证：验证空字符串并且不验证空值

> ID：10248434
> 
> 赞同：0
> 
> 时间：2012-04-20T14:44:59.117
> 
> 标签：zend-framework, zend-form, zend-validate

在我的控制器中，我有一些数据集，有些值无法从客户端发送（这不是我的逻辑错误），并且我没有修改数据库中的相应字段。但是如果该值为空字符串，我想抛出一个错误。

我如何使用标准验证器来做到这一点？

例子：

我有两个字段的表用户：用户名和密码。用户在他的个人资料中可以更改其中任何一个或两者。Profile 是用 ExtJS 4 编写的，代理配置了 option `writeAllFields: false`，因此客户端仅将修改后的字段发送到服务器。

在服务器端，例如，如果未通过以下方式找到用户名

*   `$this->_request->getPost('username')`
*   `$this->_getParam('username')`

...或其他东西（它为空），我不想验证它并在数据库中修改它。

**但是**，如果用户在用户名字段中键入了一个空字符串，我想验证它并向用户显示错误，其中包含“用户名不能为空”之类的文本。

如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:23:07.760

我个人会过滤输入然后验证它。但是为了实现您的目标，这可能会成功，它直接来自[文档。](http://framework.zend.com/manual/en/zend.validate.set.html#zend.validate.set.notempty)

```
$valid = new Zend_Validate_NotEmpty();
$value  = '';
$result = $valid->isValid($value);
// returns false 
```

如果您使用 Zend Form 创建表单，draw010 提到的内容适用。在这种情况下，如果没有提供输入，则在元素本身上将 setRequired() 验证器设置为 true 将向用户显示错误。如果您不使用[Zend Form](http://framework.zend.com/manual/1.11/en/zend.form.quickstart.html#zend.form.quickstart.elements)，那么以上内容应该为您指明正确的方向。

# iphone - 课外KVO不起作用

> ID：10248435
> 
> 赞同：1
> 
> 时间：2012-04-20T14:45:07.687
> 
> 标签：iphone, objective-c, ios, key-value-observing

我有一个带有 NSString 属性 currentTag 的 MainViewController。所以我这样做：

```
[self addObserver:self forKeyPath:@"currentTag" options:NSKeyValueObservingOptionNew context:nil]; 
```

这很好用，并且更改确实得到了正确处理。但是，我有另一个类SecondViewController，我也想让它观察MainViewController的currentTag，所以在SecondViewController的viewDidLoad方法中，我这样做：

```
[self addObserver:self.mainViewController forKeyPath:@"currentTag" options:NSKeyValueObservingOptionNew context:nil]; 
```

但是，由于某种原因，这个没有得到处理。它永远不会被调用。我想确保我的语法和形式是正确的，然后再在我的代码中寻找问题的其他地方。这段代码看起来没问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T14:47:03.913

你做错了，你应该这样做：

```
[self.mainViewController addObserver:self forKeyPath:@"currentTag" options:NSKeyValueObservingOptionNew context:nil]; 
```

# java - 使用 Java 期货的线程安全收集收集操作

> ID：10248442
> 
> 赞同：2
> 
> 时间：2012-04-20T14:45:26.070
> 
> 标签：java, multithreading, thread-safety, future

我第一次尝试使用 java 期货。我设置了一个类来解压缩一些文件。想要递归解压缩，因为我有包含 zip 文件的 zip 文件。

我有一个驱动器类，它实例化一个实现可调用的 Uncompressor 类。Uncompressor 开始解压缩，如果遇到另一个 .zip，它会创建自己的一个实例，将其添加到池中，然后继续。

伪代码

```
From DriverClass:

.
.
.
ExecutorService pool = new Executors.newFixedThreadPool(4);
Uncompressor uc = new Uncompressor(pool, compressedFile);
Collection<File> files = uc.uncompress();
for(Future <Collection<File>> f : uc.futures)
    files.addAll(f.get());
// at the end of this loop, files doesnt seem to hold all of my files 
```

这是我的解压器类

```
public class Uncompressor implements Callable<Collection<File>>
{
    public Set<Future<Collection<File>>> futures = new HashSet<Future<Collection<File>>>();
    File compressedFile;
public Uncompressor(ExecutorService pool, File compressedFile)
{
    this.pool = pool;
    this.compressedFile = compressedFile;
}

public Collection<File> call() throws Exception[
   return uncompress();
}

public Collection<File> uncompress()
{
List<File> uncompressedFiles = new ArrayList<File>();
.
.Loop
.//Try to uncompress the file. If the archive entry is a zip file, do the following:

    Callable<Collection<File>> callable = new Uncompressor(this.pool, archiveFileEntry);
    Future f = pool.submit(callable);
    futures.add(f);

 //else, add files to a collection here for returning
 uncompressedFiles.add(archiveFileEntry);

.EndLoop

return uncompressedFiles;
.
.
} 
```

所以问题出在我的 DriverClass 中，我的文件集合应该包含来自递归潜水的所有未压缩文件，这里似乎没有包含所有文件。我认为我在从 Future 获取返回值方面做错了。是因为我`futures`定义了类成员变量的方式吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:56:32.243

如果嵌套深度大于 1，您的代码将无法工作，即顶层 zip 包含一个包含 zip 的 zip。在这种情况下，您的顶级 Uncompressor 不会有底层 zip 文件的未来。

[为此使用ForkJoinPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)会很酷，因为它更适合递归类型的任务分解。虽然 Java 7 不是一个选项，但我要做的是更改 Uncompressor，以便结果是期货和文件的元组，然后更改调用者以跟踪所有未完成的期货：

```
--Caller--

Collection<File> alluncompressedFiles = new HashSet<File>();
Collection<Future<UncompressorResult>> futures = new LinkedList<Future<UncompressorResult>>();
Future<UncompressorResult> future = pool.submit(new Uncompressor(pool, compressedFile));
futures.add(future);

while (!futures.isEmpty()) {
    Future<UncompressorResult> future = futures.poll();
    UncompressorResult result = future.get();

    futures.addAll(result.getFutures());
    uncompressedFiles.addAll(result.getFiles());
} 
```

并且解压缩器更改为：

```
public UncompressorResult call() throws Exception[
    List<File> uncompressedFiles = new ArrayList<File>();

    for (File entry : zipFiles) {
        if (entry is not ZIP) {
            uncompressedFiles.add(entry);
        } else {
            Callable<UncompressorResult> callable = new Uncompressor(this.pool, entry);
            Future<UncompressorResult> f = pool.submit(callable);
            futures.add(f);
        }
    }

    return new UncompressorResult(uncompressedFiles, futures;
} 
```

# mysql - 简单的 SQL 连接理解？

> ID：10248444
> 
> 赞同：8
> 
> 时间：2012-04-20T14:45:38.380
> 
> 标签：mysql, sql, sql-server, database, sql-server-2008

> **可能重复：**
> [显式与隐式 SQL 连接](https://stackoverflow.com/questions/44917/explicit-vs-implicit-sql-joins)
> [使用连接和从多表中选择有区别吗？](https://stackoverflow.com/questions/2592938/is-there-a-difference-using-join-andselect-from-multi-tables)
> [SQL 连接：SQL ANSI 标准的未来（where vs join）？](https://stackoverflow.com/questions/3684259/sql-joins-future-of-the-sql-ansi-standard-where-vs-join)

JOIN 和在 FROM 子句中声明多个表有什么区别？

如：

```
SELECT *
FROM  table1 AS t1,
      table2 AS t2
WHERE t1.id = t2.id 
```

相比：

```
SELECT *
FROM table1 AS t1
INNER JOIN table2 AS t2 ON t2.id = t1.id 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T14:52:37.690

第二个版本，具有显式`JOIN`和连接条件的是标准化的 SQL。

带有`WHERE`子句的隐式连接语法是不推荐使用的语法（或者，更确切地说，被认为是不好的） - 部分原因是很容易忘记`WHERE`子句并导致笛卡尔积。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T15:04:54.920

*为什么使用新语法？*

正如其他人所说，新语法已成为首选约定。在较大的查询中，新语法更易于阅读、调试并确保添加了连接条件（意味着没有意外`CROSS JOINS`的 .

*旧语法是否已弃用（用于内部连接）？*

不是根据 ANSI——两者都是有效的，即使第一个是不受欢迎的。虽然，在旧语法中执行外连接已被弃用——主要是因为它可能是模棱两可的。

*“使用新语法”观点的共识程度如何？*

*   Aaron Bertran[认为这是“踢球的坏习惯”](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)
*   SQL Server Central 的[共识是“Kill kill it with fire”](http://www.sqlservercentral.com/blogs/brian_kelley/2009/09/30/the-old-inner-join-syntax-vs-the-new-inner-join-syntax/)
*   Joe Celko -[嗯，但它更容易阅读](http://books.google.com/books?id=Hi9fMnOoRtAC&pg=PA351&lpg=PA351&dq=sql%20for%20smarties%20old%20vs%20new%20join%20syntax&source=bl&ots=tt7R-cW1Tq&sig=a3KpaTvHyUxfDX5V6IGwHw3PJ2Y&hl=en&sa=X&ei=CXqRT5X2Naaf6AHY2YGfBA&sqi=2&ved=0CB8Q6AEwAA#v=onepage&q&f=false)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:55:41.703

两者都将输出相同的内容，只是编写查询的不同变体。

```
SELECT *
FROM table1 AS t1
INNER JOIN table2 AS t2 ON t2.id = t1.id 
```

是首选连接方法，因为您明确说明您正在使用哪种连接类型，即 LEFT、OUTER、INNER。

# zend-framework - Zend Form Multicheck 动态

> ID：10248446
> 
> 赞同：0
> 
> 时间：2012-04-20T14:45:42.477
> 
> 标签：zend-framework, zend-form

嗨，我正在使用 zend 表单多复选框。

我有一个 $array，其中有一个用户的 'id' 'name' 'surname' 'address' 和 'city' 的列表。我需要创建一个复选框，我可以在其中选择姓名+姓氏+添加+城市，然后将所选姓名和姓氏的ID返回给控制器...

这是我的表格：

```
class Application_Form_MultiplaSelezione extends Zend_Form
{
public function init()
{
    /* Form Elements & Other Definitions Here ... */
}

public function selezione($array){
    $this->setMethod('post');       
    $count=count($array);       
    $multipla=new Zend_Form_Element_MultiCheckbox('scelta');        
    for($i=0;i<$count;$i++){            
        foreach ($array[$i] as $chiave=>$valore){
            if($chiave=='idnomeutente'){
                $nomeutente=$valore;
            }
            if($chiave=='nome'){
                $nome=$valore;
            }
            if($chiave=='cognome'){
                $cognome=$valore;
            }   
            if($chiave=='indirizzo'){
                $indirizzo=$valore;
            }   
            if($chiave=='residenza'){
                $residenza=$valore;
            }   

        }
        $val=$nome.' '.$cognome.' '.$indirizzo.' '.$residenza;
        $multipla->addMultiOption($nomeutente, $val);

        if($i==0){
            $iduser=$nomeutente;
        }
    }   

    $multipla->setValue($iduser);

    $submit= new Zend_Form_Element_Submit('submit');
    $submit->setLabel('Seleziona');

    $this->addElements(array($multipla,$submit));           
}
    } 
```

为什么它不起作用？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T21:09:50.633

尝试阅读并理解这一点：

```
<?php

class Application_Form_MultiplaSelezione extends Zend_Form
{
public function init()
{
    $this->setMethod('post'); 

    $multipla=new Zend_Form_Element_MultiCheckbox('scelta');
    $multipla->setMultiOptions($this->getOptionsToMultipla());

    /* some other fields */

    $this->addElements(array(
        $multipla,
        /* others fields */
        ));
}

public function getOptionsToMultipla()
{
    /* there you can use static or dinamic method which: 
        1\. select data from table
        2\. in foreach remake rows to your form, and add it to array ($array[] = "your string";)
        3\. return $array;
        TIP: you should make other array where you have id of the rows, with it you can decode the request (compare index given from form)
        (if you have problem with it I can help you in other thread :)*/

    /* for example of static method */
    return Your_Model::getOptionsToMultipla();
} 
```

对于此代码，您必须在模型和控制器中添加一些更改。祝你好运 ：）

# android - 在他的电话之外获取菜单

> ID：10248448
> 
> 赞同：3
> 
> 时间：2012-04-20T14:45:48.767
> 
> 标签：android, android-menu

我想动态更改我的菜单，所以我尝试了这个，但我的应用程序崩溃了：

在我的所有活动中获取我的菜单：

```
private Menu menu; 
```

然后在返回语句之前的 onCreateOptionsMenu 中：

```
this.menu = menu; 
```

然后在一个函数中：

```
MenuItem parent = menu.findItem(R.id.parent_menu);
parent.setTitle("test"); 
```

崩溃...我找到了相同的答案：[Android - 如何在 onOptionsItemsSelected 或 onCreateOptionsMenu 之外动态更改菜单项文本，](https://stackoverflow.com/questions/7066657/android-how-to-dynamically-change-menu-item-text-outside-of-onoptionsitemssele)但对我来说，不起作用。

提前致谢

PS：如果 MenuItem parent 和 setTitle 在评论中，它可以正常工作。

* * *

所以问题是 onCreateOptionsMenu 仅在我想第一次查看菜单时才被调用......我之前如何调用它？

```
04-20 17:00:19.170: D/dalvikvm(26887): GC_EXTERNAL_ALLOC freed 45K, 50% free 2729K/5379K, external 0K/0K, paused 27ms
04-20 17:00:19.230: D/dalvikvm(26887): GC_EXTERNAL_ALLOC freed 11K, 49% free 2747K/5379K, external 565K/576K, paused 33ms
04-20 17:00:19.300: D/dalvikvm(26887): GC_EXTERNAL_ALLOC freed 62K, 49% free 2787K/5379K, external 824K/1091K, paused 22ms
04-20 17:00:19.825: D/dalvikvm(26887): GC_CONCURRENT freed 314K, 50% free 2859K/5639K, external 1521K/1630K, paused 2ms+3ms
04-20 17:00:19.845: I/webclipboard(26887): clipservice: android.sec.clipboard.ClipboardExManager@40514930
04-20 17:00:20.145: D/WML_SISO(26887): InitPasteboardJni
04-20 17:00:20.185: D/dalvikvm(26887): GC_CONCURRENT freed 323K, 48% free 3062K/5831K, external 1591K/1630K, paused 3ms+2ms
04-20 17:00:20.210: D/CLIPBOARD(26887): Hide Clipboard dialog at Starting input: finished by someone else... !
04-20 17:00:20.340: D/dalvikvm(26887): GC_CONCURRENT freed 179K, 44% free 3423K/6087K, external 1425K/1630K, paused 1ms+2ms
04-20 17:00:21.935: D/AndroidRuntime(26887): Shutting down VM
04-20 17:00:21.935: W/dalvikvm(26887): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
04-20 17:00:21.940: E/AndroidRuntime(26887): FATAL EXCEPTION: main
04-20 17:00:21.940: E/AndroidRuntime(26887): java.lang.NullPointerException
04-20 17:00:21.940: E/AndroidRuntime(26887):    at p.NewsRecovery.AddWebsiteActivity$1.onClick(AddWebsiteActivity.java:133)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at android.view.View.performClick(View.java:2538)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at android.view.View$PerformClick.run(View.java:9152)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at android.os.Handler.handleCallback(Handler.java:587)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at android.os.Looper.loop(Looper.java:130)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at android.app.ActivityThread.main(ActivityThread.java:3691)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at java.lang.reflect.Method.invokeNative(Native Method)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at java.lang.reflect.Method.invoke(Method.java:507)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-20 17:00:21.940: E/AndroidRuntime(26887):    at dalvik.system.NativeStart.main(Native Method)
04-20 17:00:22.015: D/dalvikvm(26887): GC_EXTERNAL_ALLOC freed 586K, 50% free 3142K/6215K, external 1511K/1630K, paused 38ms
04-20 17:00:22.065: D/szipinf(26887): Initializing inflate state
04-20 17:00:22.065: D/szipinf(26887): Initializing zlib to inflate
04-20 17:00:22.170: D/dalvikvm(26887): GC_FOR_MALLOC freed 222K, 50% free 3282K/6535K, external 1933K/2370K, paused 17ms
04-20 17:00:22.170: I/dalvikvm-heap(26887): Grow heap (frag case) to 7.591MB for 129176-byte allocation
04-20 17:00:22.190: D/dalvikvm(26887): GC_FOR_MALLOC freed 18K, 50% free 3390K/6663K, external 1586K/2098K, paused 12ms
04-20 17:00:22.210: D/dalvikvm(26887): GC_FOR_MALLOC freed 134K, 51% free 3319K/6663K, external 1586K/2098K, paused 11ms
04-20 17:00:22.210: I/dalvikvm-heap(26887): Grow heap (frag case) to 7.412MB for 258336-byte allocation
04-20 17:00:22.230: D/dalvikvm(26887): GC_FOR_MALLOC freed 8K, 49% free 3563K/6919K, external 1586K/2098K, paused 11ms
04-20 17:00:22.255: D/dalvikvm(26887): GC_FOR_MALLOC freed 0K, 49% free 3563K/6919K, external 1586K/2098K, paused 12ms
04-20 17:00:22.255: I/dalvikvm-heap(26887): Grow heap (frag case) to 7.527MB for 129176-byte allocation
04-20 17:00:22.270: D/dalvikvm(26887): GC_FOR_MALLOC freed 253K, 52% free 3435K/7047K, external 1556K/2068K, paused 14ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-05T17:28:12.270

在将菜单设置为变量之前，您必须对其进行膨胀；

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_visit_profile, menu);
    mOptionsMenu = menu;
    return super.onCreateOptionsMenu(menu);
} 
```

然后你就可以使用它了。

```
MenuItem item = mOptionsMenu.findItem(R.id.visit_profile_hi);
item.setTitle("Remover hi"); 
```

# algorithm - 井字游戏的极小极大

> ID：10248451
> 
> 赞同：6
> 
> 时间：2012-04-20T14:46:04.937
> 
> 标签：algorithm, prolog

我正在尝试用一个简单的极小极大算法来解决井字游戏。简单，但应该涵盖很多语言。到目前为止我所拥有的：

该板表示为 9 个（未绑定）变量的数组，这些变量设置为`x`或`o`。

获胜条件基本上是：`win(Player, [X1,X2,X3|_]) :- X1==Player,X2==Player,X3==Player.`所有八个变体的等等。draw 只是一个简单的检查是否所有变量都被绑定。

move 子句也很简单：`move(Player, [X|_], 0, 0) :- var(X), X=Player.`，同样适用于所有可能的位置（我将为以后的程序保留代码重用 :) ）。

现在我可以通过简单的回溯生成所有可能的移动：`move(Player, Board, X, Y).`这基本上应该是我所需要的 minimax （显然是一个简单的实用函数，如果计算机获胜则返回 1，如果平局则返回 0，如果人类获胜则返回 -1，这就是简单的）。我只是不知道如何实现它，而且我在网上找到的所有示例都相当复杂并且没有得到很好的解释。

请注意，我对 n^2 或更差的运行时行为很好 - 这实际上与效率无关。是的，我确实知道如何在 lisp、python、java 中编写 minimax - 只是不知道如何将该代码“移植”到 prolog。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:48:45.870

好吧，既然你已经有了 move/4 谓词，我将从收集所有可能的移动开始：

`findall(X-Y, move(Player, Board, X, Y), Moves)`

然后只是评估每一步的问题，不是吗？为此，我会写一个这样的谓词`board_player_move_value/4`，给定一个棋盘和一个给定玩家的移动，确定该移动对这个玩家有多好。正是这个谓词可能取决于在这个阶段（对于其他玩家）可能的进一步移动，这就是极小极大发生的地方。例如，如果这一招赢得了比赛，那就是一个好招。如果另一个玩家可以在下一步中获胜，那么这是一个糟糕的举动等等。我会使用这个谓词来构建一个 Value-Move 形式的术语集合，使用 keysort/2 对它们进行排序，然后选择其中一个动作具有最佳价值，其中“最佳”取决于我是否正在尝试为最小化或最大化玩家找到移动。

# asp.net-mvc-2 - “合并”模型和 ViewModel 有或没有 AutoMapper？

> ID：10248456
> 
> 赞同：8
> 
> 时间：2012-04-20T14:46:30.443
> 
> 标签：asp.net-mvc-2, viewmodel, automapper

我目前正在使用 ViewModels 将我的视图与实际的模型结构分开。

例如，我有一个用户持久性实体和一个包含所有信息的 MyProfile ViewModel，用户可以自行更改这些信息。对于从 User 到 MyProfile 的转换，我使用的是 Automapper。

现在，在用户发回他的（更改的）信息后，我需要保存这些信息。但是 ViewModel 中的信息并不完整，当 AutoMapper 从 ViewModel 创建一个 User 持久化实体时，重要的信息就会丢失。

我不想将这些信息暴露给视图层，尤其是隐藏的表单元素。

所以我需要一种将 ViewModel 合并到持久性实体中的方法。我可以使用 AutoMapper 执行此操作，还是必须手动执行此操作？

例子：

我的用户类包含 ID、名字、姓氏、用户名和密码。用户应该只在他的个人资料中编辑他的名字和姓氏。因此，我的 ProfileViewModel 包含 ID、名字和姓氏。从表单回传信息后，Automapper 从传输的 ProfileViewModel 中创建一个 User 对象，在该对象中仅设置 ID、Firstname 和 Lastname。将此实体提供给我的存储库时，我丢失了用户名和密码信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T07:52:06.370

> 所以我需要一种将 ViewModel 合并到持久性实体中的方法。我可以使用 AutoMapper 执行此操作，还是必须手动执行此操作？

是的，您可以使用 AutoMapper 做到这一点。例如：

```
public class Model
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class ViewModel
{
    public string Name { get; set; }
}

class Program
{
    static void Main()
    {
        // define a map (ideally once per appdomain => usually goes in Application_Start)
        Mapper.CreateMap<ViewModel, Model>();

        // fetch an entity from a db or something
        var model = new Model
        {
            Id = 5,
            Name = "foo"
        };

        // we get that from the view. It contains only a subset of the
        // entity properties
        var viewModel = new ViewModel
        {
            Name = "bar"
        };

        // Now we merge the view model properties into the model
        Mapper.Map(viewModel, model);

        // at this stage the model.Id stays unchanged because
        // there's no Id property in the view model
        Console.WriteLine(model.Id);

        // and the name has been overwritten
        Console.WriteLine(model.Name);
    }
} 
```

印刷：

```
5
bar 
```

并将其转换为典型的 ASP.NET MVC 模式：

```
[HttpPost]
public ActionResult Update(MyViewModel viewModel)
{
    if (!ModelState.IsValid)
    {
        // validation failed => redisplay view 
        return View(viewModel);
    }

    // fetch the domain entity that we want to udpate
    DomainModel model = _repository.Get(viewModel.Id);

    // now merge the properties
    Mapper.Map(viewModel, model);

    // update the domain model
    _repository.Update(mdoel);

    return RedirectToAction("Success");
} 
```

# windows-phone-7 - WP7 - 单击后无法设置按钮的背景

> ID：10248464
> 
> 赞同：0
> 
> 时间：2012-04-20T14:46:52.017
> 
> 标签：windows-phone-7, xaml

我有这个正在开发的记忆游戏应用程序，正在尝试学习 WP7。想象一下屏幕上有 6 个颜色独特的按钮，用户必须重复这些按钮。

1.  第一遍，禁用所有按钮，更改Button1的背景
2.  启用所有按钮，用户单击按钮 1，游戏继续...
3.  第二遍，禁用所有按钮，按钮 1 和 3 将被突出显示
4.  仅更改了 Button3 的背景（调试显示更改 Button1 的背景的过程已运行）

按钮的突出显示只是更改为较浅的背景。无论单击什么按钮，都无法更改后续通道中的背景颜色。

样式 XAML：

```
<phone:PhoneApplicationPage.Resources>
        <Style x:Key="ButtonStyle1" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid Background="Transparent">
                            <VisualStateManager.VisualStateGroups>
                                <!--Define the states for the common states. The states in a 
                                        VisualStateGroup are mutually exclusive to each other.-->
                                <VisualStateGroup x:Name="CommonStates">
                                    <!--Define the VisualStates in this VistualStateGroup.-->
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="MouseOver" />
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ColorAnimation Duration="0" To="White" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" Storyboard.TargetName="ButtonBackground" d:IsOptimized="True"/>
                                        </Storyboard>                                        
                                    </VisualState>
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" Storyboard.TargetName="ContentContainer" Storyboard.TargetProperty="Opacity" To="1"/>
                                        </Storyboard>
                                    </VisualState>
                                    </VisualStateGroup>
                                <!--Define the states for the focus states. The states in a 
                                        VisualStateGroup are mutually exclusive to each other.-->
                                <VisualStateGroup x:Name="FocusStates">
                                    <!--Define the VisualStates in this VistualStateGroup.-->
                                    <VisualState x:Name="Focused" />
                                    <VisualState x:Name="Unfocused" />
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="0" Margin="{StaticResource PhoneTouchTargetOverhang}" Background="{TemplateBinding Background}">
                                <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Border>
                        </Grid>
                        <!--The parts of the button control will be defined here.-->
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </phone:PhoneApplicationPage.Resources> 
```

按钮：

```
<Button Height="121" HorizontalAlignment="Left" Margin="14,61,0,0" Name="but1" VerticalAlignment="Top" Width="197" Background="#FF7D0000" BorderBrush="Black" Foreground="Red" BorderThickness="0" Padding="0" Style="{StaticResource ButtonStyle1}" Click="but1_Click" /> 
```

我应该复制一个 StackPanel/Rectangle 来替换我的按钮吗？还是我缺少一种风格或基本的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:57:56.910

解决了。

我更改了按钮样式的按下状态 - 这是在比较了我的样式和按钮的默认样式之后。看来我错过了一些代码。

```
<VisualState x:Name="Pressed">
    <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

这是在黑暗中刺伤:)

# php - 如何获取任何 wiki 页面的第一张图片

> ID：10248475
> 
> 赞同：2
> 
> 时间：2012-04-20T14:47:41.127
> 
> 标签：php, mediawiki, wikimedia

我需要在任何给定的 wiki 页面中获取第一个图像/主图像。我可以使用抓取工具来做到这一点。但我正在使用 curl 来废弃页面。但可能是由于互联网连接速度较慢，仅废弃一个 wiki 页面需要很长时间。除此之外，我需要根据用户的查询同时显示至少 7-8 个不同的 wiki 图像。

因此，为此使用 curl 毫无意义。我试过wiki api

```
https://en.wikipedia.org/w/api.php?action=query&titles=India&prop=images&imlimit=1 
```

但是我没有其他参数可以给这个列表排序。通常，此 api 返回的第一张图片不是您在页面顶部看到的主图片。有时图像离页面上下文太远。

我只需要为每个 wiki 标题显示一张图片。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-08T03:20:50.737

要经常对“主图像”进行很好的猜测，请使用`prop=pageimages`由[MediaWiki 扩展“ **PageImages** ”](https://www.mediawiki.org/wiki/Extension:PageImages)提供的：

> PageImages 扩展收集有关页面上使用的图像的信息。
> 
> 其目的是返回与文章关联的最合适的单个缩略图，试图只返回有意义的图像，例如，不返回来自维护模板、存根或标志图标的图像。目前它使用页面中使用的第一个无意义的图像。
> 
> ^([（文字为[cc-by-sa 3.0](https://creativecommons.org/licenses/by-sa/3.0/)；[作者列表](https://www.mediawiki.org/w/index.php?title=Extension:PageImages&action=history)）])

## 用法

引用[MediaWiki API 文档](//en.wikipedia.org/wiki/Special:ApiHelp/query%2Bpageimages)：

```
返回有关页面上图像的信息，例如缩略图和
照片的存在。
参数：

piprop
    返回哪些信息：

    缩略图
        与页面关联的图像的 URL 和尺寸（如果有）。
    姓名
        图片标题。

    值（用“|”分隔）：缩略图、名称
    默认值：缩略图|名称

小拇指大小
    最大缩略图尺寸。
    默认值：50

限制
    返回多少页的属性。
    不超过 50 个（机器人为 100 个）。
    默认值：1

继续
    当有更多结果可用时，使用它继续。

```

## 例子

[https://en.wikipedia.org/w/api.php?action=query&titles=India&prop=pageimages&pithumbsize=300](https://en.wikipedia.org/w/api.php?action=query&titles=India&prop=pageimages&pithumbsize=300)

返回值：

```
{
    "query": {
        "pages": {
            "14533": {
                "pageid": 14533,
                "ns": 0,
                "title": "India",
                "thumbnail": {
                    "source": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/Political_map_of_India_EN.svg/256px-Political_map_of_India_EN.svg.png",
                    "width": 256,
                    "height": 300
                },
                "pageimage": "Political_map_of_India_EN.svg"
            }
        }
    }
} 
```

更多示例：

*   [文章“Barack Obama”的主图片，高度或宽度限制为 300 像素](https://en.wikipedia.org/w/api.php?action=query&prop=pageimages&titles=Barack%20Obama&pithumbsize=300)
*   [文章“德国”的主要图片](https://en.wikipedia.org/w/api.php?action=query&prop=pageimages&titles=Germany)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T15:58:16.507

```
api.php?action=query&titles=India&prop=images 
```

为您提供按字母顺序排序的所有图像的完整列表。您可以从非api页面上的文档顺序中检索第一张图像。可能如果你将两者结合起来，你会得到最大的好处：

```
$topic = 'India';
$url = sprintf('http://en.wikipedia.org/wiki/%s', urlencode($topic));
$options = array(
    'http' => array(
        'user_agent' => 'Mozilla/5.0 (iPad; U; CPU OS 3_2 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Version/4.0.4 Mobile/7B334b Safari/531.21.102011-10-16 20:23:50',
    )
);
$context = stream_context_create($options);
libxml_set_streams_context($context);
$doc = new DOMDocument();
$doc->loadHTMLFile($url);
$xp = new DOMXPath($doc);
$result = $xp->query('(//img[@class = "thumbimage"])[1]');
$image = ($result && $result->length) ? $result->item(0) : NULL;
echo $doc->saveXML($image), "\n"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T15:05:11.833

似乎图像是按字母顺序返回的……很奇怪。

无论如何，这可能会更好：

[https://en.wikipedia.org/w/api.php?action=parse&text={{Barack_Obama}}&prop=images](https://en.wikipedia.org/w/api.php?action=parse&text=%7B%7BBarack_Obama%7D%7D&prop=images)

不幸的是，只有第一张图像可用，但至少它是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T15:09:12.940

```
$wikipage = file_get_contents('http://en.wikipedia.org/wiki/Cats');
preg_match_all('/<img[^<]+?>/', $wikipage, $matches); 
```

通常，主图像将是锁定之后的第二个匹配项（http://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Padlock-silver.svg/20px-Padlock-silver.svg.png）

# regex - 这个正则表达式怎么写？

> ID：10248481
> 
> 赞同：2
> 
> 时间：2012-04-20T14:48:07.220
> 
> 标签：regex

这是一个包含公式和生物代码的巨大文件的样本。有些行**以**下列字符开头：

```
Sheep"-head`ed,   // followed by some normal words 
Mon`o*car*bon"ic,  // followed by some normal words 
mon`o*car"di*an,  // followed by some normal words 
Pol`y*chro"mate,   // followed by some normal words 
sheep"cot`,     // followed by some normal words 
baad,    // followed by some normal words 
```

我是正则表达式的新手。现在我正在尝试使用 TPerlRegEx（[PCRE 库的包装器](http://www.regular-expressions.info/delphi.html)）。我需要提取：

```
Sheep"-head`ed,   
Mon`o*car*bon"ic,  
mon`o*car"di*an,  
Pol`y*chro"mate,  
sheep"cot`,    
baad, 
```

你能帮我写一个正则表达式吗？

非常感谢。

编辑：

感谢大家的帮助。如果它们之间有法线：

```
Sheep"-head`ed,   // followed by some normal words 
Mon`o*car*bon"ic,  // followed by some normal words 
New test,   //I do not want two or more than two words that end with comma.   
mon`o*car"di*an,  // followed by some normal words 
Pol`y*chro"mate,   // followed by some normal words 
sheep"cot`,     // followed by some normal words 
baad,    // I want this one word that ends with comma 
```

我还想要：

```
Sheep"-head`ed,   
Mon`o*car*bon"ic,  
mon`o*car"di*an,  
Pol`y*chro"mate,  
sheep"cot`,    
baad,   // I want this ONE word that ends with comma. 
```

再次感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:50:53.397

原始正则`^[^,]+,`表达式是 perl 中的正则表达式：`/^[^,]+,/`

*   `^` 匹配行首
*   `[^ ,]+`匹配尽可能多的非逗号、非空格。
*   `,` 匹配逗号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:51:13.140

要匹配以给定值开头的行，正则表达式是：

```
/^startswith/ 
```

您将不得不转义特殊字符。例如：

```
/^Sheep\"\-head\`ed,/ 
```

（我永远记不清哪些字符需要转义，但通常你可以转义任何非字母字符，即使它不需要它。）

对于一个匹配您的任何示例的正则表达式，您可以像这样将`or`它们一起使用`|`：

```
/^(Sheep\"\-head\`ed,|Mon\`o\*car\*bon\"ic,|...)/ 
```

# asp.net - 如何在 WCF 服务中记录原始请求

> ID：10248482
> 
> 赞同：17
> 
> 时间：2012-04-20T14:48:08.863
> 
> 标签：asp.net, wcf, request, operationcontext

我有一个带有多种方法的 WCF 服务。我想记录来自客户端的原始请求，无论它是如何发送的。一种方法接受数据作为查询字符串（严格用于遗留支持），我可以使用以下方式记录：

```
OperationContext.Current.IncomingMessageHeaders.To.AbsoluteUri 
```

在这种情况下就足够了，但其他方法允许客户端使用由 svcutil.exe 生成的代理类将数据作为 XML 发送。在这种情况下，我在 s:Body 中找到了我想要的数据：

```
OperationContext.Current.RequestContext.RequestMessage 
```

不幸的是，无论我尝试什么，我都无法在读取之前创建消息的缓冲副本。这是一个例子：

```
public CascadeResponse SendCustomer(Customer c)
    {
        Message msg = OperationContext.Current.RequestContext.RequestMessage.CreateBufferedCopy(Int32.MaxValue).CreateMessage();
        LogMessage(msg);
        // Now that the request is logged, get on with the rest
    } 
```

但是，在 SendCustomer 的第一行，我收到以下错误：

**此消息无法支持该操作，因为它已被读取。**

这就是我创建缓冲副本的目的，确定吗？我猜我在这里做错了。

**编辑：**

好的，所以方法现在是这样的：

```
public CascadeResponse SendCustomer(Message requestMessage)
    {
        Message msg = OperationContext.Current.RequestContext.RequestMessage.CreateBufferedCopy(Int32.MaxValue).CreateMessage();
        LogMessage(msg);
        // Now that the request is logged, get on with the rest        
        Customer c = msg.GetBody<Customer>();
        string clientKey = "1111"; // This should be the clientKey string passed to the function along with the customer 
        return SendLead(c, clientKey);
    } 
```

我的问题是我不知道如何将 Customer 和 ClientKey 作为单独的实体发送。我可以使 clientKey 成为 Customer 的属性（或创建一个专门用于传入数据并包含 Customer 和 ClientKey 作为属性的自定义对象），但如果可能的话，我想避免这种情况，因为这是对遗留系统的升级已经这样工作了。

我也无法使用 svcUtil.exe 创建我的代理类 - 我假设具有上述方法签名意味着我的服务将不再宣传正确的签名来发送请求？不确定这是否足够清楚 - 如果我唯一的输入法接受 Message 对象，我的客户怎么知道要发送 Customer 和 ClientKey？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-23T16:11:12.717

我找到了一个其他人可能也会觉得有用的解决方案。创建 MessageInspector 允许您将代码附加到“AfterReceiveRequest”和“BeforeSendReply”事件，如下所示：

```
public class MessageInspector : IDispatchMessageInspector
{
    public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    {
        MessageBuffer buffer = request.CreateBufferedCopy(Int32.MaxValue);
        request = buffer.CreateMessage();
        LogMessage("Received:\n{0}", buffer.CreateMessage().ToString());
        return null;
    }

    public void BeforeSendReply(ref Message reply, object correlationState)
    {
        MessageBuffer buffer = reply.CreateBufferedCopy(Int32.MaxValue);
        reply = buffer.CreateMessage();
        LogMessage("Sending:\n{0}", buffer.CreateMessage().ToString());
    }
} 
```

这里有[设置 wcf 消息检查器的完整教程](http://weblogs.asp.net/paolopia/archive/2007/08/23/writing-a-wcf-message-inspector.aspx)。我会说，当您将行为扩展添加到 app.config/web.config 时，请小心检查您的完全限定程序集名称。

希望其他人觉得这很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T15:36:03.457

为了实现上述目标，您需要将方法更改为如下所示：

```
public CascadeResponse SendCustomer(Message requestMessage)
    {
        Message msg = OperationContext.Current.RequestContext.RequestMessage.CreateBufferedCopy(Int32.MaxValue).CreateMessage();
        LogMessage(msg);
        // Now that the request is logged, get on with the rest        
        Customer c = msg.GetBody<Customer>();
    } 
```

有关[使用消息类的更多信息](http://msdn.microsoft.com/en-us/library/ms734675.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-15T20:30:14.447

我认为您可以使用 ...`ToString()`方法，它会在内部重写消息：

```
string soap = OperationContext.Current.RequestContext.RequestMessage.ToString(); 
```

查看`ToString()`方法内部... ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-17T14:48:38.323

在 VS2015 上一个 WCF 服务项目，你可以右键单击 web.config 来编辑 WCF 配置。从这里您可以启用诊断以记录原始消息。

# c# - xsd 截断字符串 C#

> ID：10248484
> 
> 赞同：1
> 
> 时间：2012-04-20T14:48:20.720
> 
> 标签：c#, xml, truncate

我的程序可以生成一个 xml，这个 xml 文件必须服从一个 xsd 文件。在 xsd 文件中，大部分字段都有长度限制。有没有办法自动截断 xsd 文件中定义的 xml 字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:53:27.200

这是不可能的，你必须在你的程序中实现它。

# android - 筛选安卓市场上的手机型号

> ID：10248489
> 
> 赞同：0
> 
> 时间：2012-04-20T14:48:52.980
> 
> 标签：android, android-mediaplayer

我的应用程序有问题：我使用 MediaPlayer 从我的服务器下载音频。对于模拟器和大多数型号，一切正常，但对于摩托罗拉 Atrix 和一部华为手机，音频根本没有下载。远程用户在 google play 上发表评论时会发生这种情况，所以我不能向他们索要日志或类似的东西。此外，我通过 HttpClient 下载其他数据，并且在列出的手机上下载正常。

所以，2个问题：

1.  为什么 MediaPlayer 不会加载媒体文件？我能做些什么来检测它？
2.  如何过滤出故障的手机型号？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:59:56.510

第一个问题不确定，但是你可以在登录Android Market/Google Play时在开发者控制台中过滤掉特定的设备。转到您的应用程序页面，向下滚动到支持的设备，然后单击显示设备以获取允许您排除特定型号的设备列表。

# ruby-on-rails - HAML - 了解如何布局页面

> ID：10248492
> 
> 赞同：0
> 
> 时间：2012-04-20T14:49:01.610
> 
> 标签：ruby-on-rails, ruby, haml

我仍在学习 HAML，并且有一些我不清楚的语法。

当我看到这样的代码时：

```
-content_for :primary_content do
  .content_container 
```

content_for 块的作用和含义是什么？这是对特定布局的调用吗？还是 .content_container 是某个地方的类？

我问的原因是因为我有一些链接出现在页面上，我不确定它们为什么会出现在那里。我想知道 primary_content 是否获得了要渲染的代码块？如果是这样，我如何找到或查找此代码块？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:57:48.120

您的 HAML 大致相当于以下 ERB：

```
<%- content_for :primary_content do %>
    <div class='content_container'></div>
<%- end %> 
```

本质上，“ [content_for](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for) :symbol”定义了一段命名的内容，稍后将包含在布局或其他内容中。

`.something`是一种[HAML](http://haml-lang.com/docs/yardoc/file.HAML_REFERENCE.html)简写方式，表示“让我成为 CSS 类所在的 div `something`”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T14:57:42.840

首先：`content_for`不是Haml的功能。它是 Ruby on Rails 视图中可用的助手之一。您也可以在 ERb 中使用它。

此方法呈现给定块但不输出它。要查看渲染结果，您必须调用`= yield :key`where `:key`is the same symbol that was used for `content_for`。要检查是否生成了内容，请使用`content_for? :key`.

[细节](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:56:51.253

您使用 content_for 将内容放在位于布局中某处的名为 primary_content 的占位符中。

[http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for-3F](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for-3F)

# db2 - 如何将参数从 CICS-COBOL 传递到 COBOL-DB2 程序

> ID：10248495
> 
> 赞同：1
> 
> 时间：2012-04-20T14:49:09.987
> 
> 标签：db2, parameter-passing, cobol, cics

我有一张地图，用户在其中输入两个要在数据库表中更新的值。我编写了这两个程序，但我不知道如何将在地图中输入的两个字段值传递给另一个程序。我开始知道我可以使用链接部分。但不知道它的语法或任何细节。谁能帮我语法。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T16:16:19.577

程序中应该有一些`WORKING-STORAGE`保存从 CICS 映射中检索到的值。例如：

```
01 SCREEN-DATA.
    05 SOME-FIELD         PIC X(10).
    05 SOME-OTHER-FIELD   PIC 9(4).

77  PROGRAM-NAME          PIC X(8) VALUE 'PROG2'. 
```

假设调用了这个程序，`PROG1`并且您想将这些值传递给名为 的第二个 COBOL 程序`PROG2`。通常，这是在 COBOL 中使用动态子例程调用来完成的。完成动态调用的典型方法是将被调用程序的名称放入 WORKING-STORAGE 变量中。`PROGRAM-NAME`为此我宣布。数据可以作为单独的项目传递给被调用的程序：

```
CALL PROGRAM-NAME USING SOME-FIELD, SOME-OTHER-FIELD 
```

以上是通过引用`PROG2`传递`SOME-FILED`的动态调用。`SOME-OTHER-FIELD`

`PROG2`通过其链接部分接收这些数据，如下所示：

```
 LINKAGE SECTION.
  01 LINKAGE-DATA.
     05 FIELD1          PIC X(10).
     05 FILED2          PIC 9(4). 
```

的 PROCEDURE DIVISION`PROG2`看起来像这样：

```
 PROCEDURE DIVISION USING FIELD1, FIELD2. 
```

或者，您可以将整个记录作为单个参数传递`PROG1`：

```
 CALL PROGRAM-NAME USING SCREEN-DATA 
```

并且在`PROG2`

```
 PROCEDURE DIVISION USING LINKAGE-DATA. 
```

最后，当`PROG2`完成它的工作时，它应该以`GOBACK`or结束`EXIT PROGRAM`。不要使用`STOP RUN`，因为这也会退出主程序 ( `PROG1`)。

COBOL 调用约定类似于大多数其他过程语言。参数可以通过引用（默认）、值或内容传递。大多数 COBOL 供应商都支持所有这些参数传递机制，但在实现上可能存在细微差别。以上示例适用于 IBM Enterprise COBOL。如果您使用的是不同版本的 COBOL，最好查看您的 COBOL 参考指南和 COBOL 编程指南。

您可以在线获取 IBM Enterprise COBOL 指南：[Language Reference Guide](http://publibfp.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/IGY3LR31/CCONTENTS?DT=20060329140556) 和[Programming Reference Guide](http://publibfp.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/IGY3PG31/CCONTENTS?DT=20060329003636)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T07:59:15.340

您可以像在两个批处理 COBOL 程序之间传递参数一样。但是，您必须小心，您还必须传递两个强制参数，即 DFHEIBLK 和 DFHCOMMAREA。

实际上，在您的调用程序中，您可能会在编译器列表中看到这两个参数已添加到 PROCEDURE DIVISION 中，因此您需要在调用程序中使用它们。我建议您在源代码中明确编写它们以提高可读性。

最后，它看起来像这样：

调用程序：

```
PROCEDURE DIVISION USING DFHEIBLK DFHCOMMAREA PARM1 PARM2 ... PARMXX. 
```

调用程序：

```
WORKING-STORAGE SECTION.
01 PGM-NAME   PIC X(8).

PROCEDURE DIVISION.
     CALL PGM-NAME USING DFHEIBLK DFHCOMMAREA PARM1 PARM2 ... PARMXX
     END-CALL. 
```

# batch-file - cmd 行无法识别 adb .. 即使我无法更改目录

> ID：10248496
> 
> 赞同：-1
> 
> 时间：2012-04-20T14:49:14.323
> 
> 标签：batch-file, adb

这就是我得到的

```
C:\>cd e:>
The syntax of the command is incorrect.

C:\>cd E:
E:\

C:\> 
```

如果我说 cd e: 并输入它会在我按 Enter 时给出这两行

```
E:\

C:\> 
```

在e驱动器中，我有我的android sdk，我必须从那里访问adt ..

通过将 adb 设置为环境变量，还有另一种访问 adb 的方法。我也这样做了

单击我的计算机/属性/高级/环境变量/新我将名称设置为 adb，值为`E:\Amit_Software's\android-sdk_r18-windows\android-sdk-windows\platform-tools`

它仍然不识别 adb ..

如果有人能帮助我，我将不胜感激

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:16:24.747

`cd /d`您可以使用如下方式在命令行上将目录更改为另一个驱动器：

`cd /d E:`

# php - Xdebug 没有加载

> ID：10248497
> 
> 赞同：2
> 
> 时间：2012-04-20T14:49:14.617
> 
> 标签：php, xdebug

*   Windows 7 64 位

*   PHP 5.3.10

*   `php_xdebug-2.1.4-5.3-vc9-x86_64`

[我通过在此处](http://xdebug.org/wizard.php)粘贴 phpinfo() 的输出获得了正确的下载。这是我`php.ini`文件中的内容：

```
zend_extension = c:\php\ext\php_xdebug-2.1.4-5.3-vc9-x86_64.dll 
```

我试过有和没有`_ts`。我尝试过**32 位**和**64 位**（出于某种原因，向导实际上推荐了**32 位版本）。**

为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:56:54.860

您是否添加了一些基本配置？

```
[xdebug]
zend_extension = "c:\php\ext\php_xdebug-2.1.4-5.3-vc9-x86_64.dll"
xdebug.remote_enable=On
xdebug.remote_host="localhost"
xdebug.remote_port=9000
xdebug.remote_handler="dbgp"
xdebug.var_display_max_depth=15 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-08T05:33:56.750

我知道我参加这个聚会有点晚了，但我今天正在为此苦苦挣扎。

我按照 XDebug 向导的说明进行了 DLL 安装并正确设置了 INI 文件，但它仍然无法加载。

解决方案是我的 xdebug.*.dll 需要位于我在 INI 文件中设置为“extension_dir”的文件夹中。XDebug 向导告诉我把它放在'php/' 父目录中。

希望它可以帮助某人。

我的设置：Windows 7 x64、Apache v2.4.7 VC11、PHP v5.5.9、php_xdebug-2.2.5-5.5-vc11-x86_64.dll

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:29:47.963

如果向导说您需要使用 32 位版本，那么您需要使用 32 位版本。那一点它不会*出错*。但是否则，您没有提供足够的信息，您需要发布 phpinfo() 输出的第一块供人们查看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-16T22:05:13.270

对于从谷歌搜索来到这里的人。这是我的设置。

*   Windows NT MY-PC 10.0 build 18362 (Windows 10) AMD64
*   MSVC15 (Visual C++ 2017)
*   php 7.2.6
*   阿帕奇 2.4

我使用[xdebug 向导](https://xdebug.org/wizard)告诉我要下载哪个 dll。这是它想出的。

1.  下载php_xdebug-2.8.0-7.2-vc15-x86_64.dll

2.  将下载的文件移动到 ext

3.  更新 C:\php726\php.ini 并更改行

    zend_extension = ext\php_xdebug-2.8.0-7.2-vc15-x86_64.dll

4.  重启网络服务器

它肯定得到了正确的 dll，但指令最终并没有看起来那么简单，因为当我输入`php -m`powershell 时，它总是说`Failed load extension php_xdebug-2.8.0-7.2-vc15-x86_64`

首先，您需要确保您是否在 php.ini 中设置了扩展目录，所以在我的情况下是`extension_dir = "ext"`

如果您遇到上述情况，只需在 php.ini 中指定没有完整路径的 dll 即可。

```
[XDebug]
zend_extension = php_xdebug-2.8.0-7.2-vc15-x86_64.dll
xdebug.remote_enable = 1
xdebug.remote_autostart = 1 
```

您可以键入`php -m`以确认已加载 xebug，或者通过`phpinfo();`重新启动 Apache 并输入一个 php 文件并搜索 xdebug。

祝你好运！

# xslt - 如何通过第二个（未命名的）模板重新处理元素？

> ID：10248501
> 
> 赞同：1
> 
> 时间：2012-04-20T14:49:27.430
> 
> 标签：xslt, xpath

我已将某些语句分开，以应用于单独模板中的特定元素。
该元素在一个模板中处理，其中包含一个语句`<xsl:apply-templates/>`。
**有没有办法让第一个模板中刚刚处理的元素在第二个（未命名的）模板中重新处理？**
当然我知道我可以使用命名模板并从第一个模板中调用它，但我只是想知道是否可以这样完成。为了给你一些可以使用的东西，这里是我正在处理的东西的一个**高度简化的模型。**
我有一个包含表格的 html 输入文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<table>
    <tbody>
        <tr>
            <td>content</td>
            <td></td>
            <td/>
        </tr>
    </tbody>
</table> 
```

我希望`block`在每个`td`元素中都有一个元素，`td`如果有的话，它包含字符串内容，或者当`td`元素本身为空时为空。我尝试了以下方法（再次注意，我不希望对第一个模板进行重大更改！）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="*">
        <xsl:copy>
            <xsl:attribute name="test"><xsl:value-of select="local-name()"/></xsl:attribute>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="td/text()">
        <block><xsl:value-of select="."/></block>
    </xsl:template>
</xsl:stylesheet> 
```

添加的属性只是第一个模板中正在完成的内容的建模示例。

作为输出

```
<?xml version="1.0" encoding="UTF-8"?>
<table test="table">
    <tbody test="tbody">
        <tr test="tr">
            <td test="td">
                <block>content</block>
            </td>
            <td test="td"/>
            <td test="td"/>
        </tr>
    </tbody>
</table> 
```

我希望得到

```
<?xml version="1.0" encoding="UTF-8"?>
<table test="table">
    <tbody test="tbody">
        <tr test="tr">
            <td test="td">
                <block>content</block>
            </td>
            <td test="td">
                <block/>
            </td>
            <td test="td">
                <block/>
            </td>
        </tr>
    </tbody>
</table> 
```

很明显为什么它不起作用：空`td`元素中没有文本节点，因此第二个模板的 Xpath 表达式不匹配这些节点。
所以我开始思考如何`td`通过第二个模板重新处理元素本身。当然，我不能使用`match="td[some condition]"`，因为那样第一个模板将不会被应用。
而且我也不能使用`match= "self::td"`，因为`self`模板匹配属性中不允许使用轴（当然条件除外），或者更确切地说，它需要一个您在开始匹配时还没有的当前节点。
那么第二个模板是否有合适的 Xpath 表达式可以满足我的需求？
或者是否有另一种简单的方法可以为刚刚在一个模板中处理的元素触发另一个（未命名的）模板？
**注意：我不是在寻找在第二个模板上添加属性的简单更新。我希望第一个模板添加属性，第二个添加块元素。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T16:13:14.003

[`xsl:next-match`](http://www.w3.org/TR/2006/PR-xslt20-20061121/#element-next-match)在 XSLT 2.0 或[`xsl:apply-imports`](http://www.w3.org/TR/xslt#element-apply-imports)XSLT 1.0 中查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:21:53.497

尝试添加另一个“moded”模板。您应该可以使用`xsl:apply-templates`该模式。

示例 xsl：模板：

```
<xsl:template match="td" mode="test">
  <bar>test</bar>
</xsl:template> 
```

示例 xsl：应用模板：

```
<xsl:template match="td">
  <foo><xsl:apply-templates select="ancestor-or-self::td" mode="test"/></foo>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T23:51:28.467

**一个 XSLT 1.0 解决方案，它使用[`<xsl:apply-imports>`](http://www.w3.org/TR/xslt#element-apply-imports)**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:import href="block.xsl" />

    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="*">
        <xsl:copy>
            <xsl:attribute name="test"><xsl:value-of select="local-name()"/></xsl:attribute>
            <xsl:if test="self::td">
                <xsl:apply-imports/>
            </xsl:if>  
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

导入的样式表**block.xsl**：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:template match="td">
        <block><xsl:value-of select="."/></block>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

**一个 XSLT 2.0 解决方案，它使用[`<xsl:next-match>`](http://www.w3.org/TR/2006/PR-xslt20-20061121/#element-next-match)：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="*">
        <xsl:copy>
            <xsl:attribute name="test"><xsl:value-of select="local-name()"/></xsl:attribute>
            <xsl:if test="self::td">
                <!--apply the next template that would match this td element -->
                <xsl:next-match/>
            </xsl:if>  
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    <!--calculated priority of "td" would be higher than "*",
        so explicitly setting a lower priority -->
    <xsl:template match="td" priority="-1">
        <block><xsl:value-of select="."/></block>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T18:53:51.760

为了完整起见，我添加了我通过 DevNull 的回答得出的解决方案。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="*">
        <xsl:copy>
            <xsl:attribute name="test"><xsl:value-of select="local-name()"/></xsl:attribute>
            <xsl:apply-templates/>
            <xsl:apply-templates mode="td" select="self::td"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="td" mode="td">
        <block><xsl:value-of select="."/></block>
    </xsl:template>

    <xsl:template match="td/text()"/>
</xsl:stylesheet> 
```

这导致

```
<?xml version="1.0" encoding="UTF-8"?>
<table test="table">
    <tbody test="tbody">
        <tr test="tr">
            <td test="td">
                <block>content</block>
            </td>
            <td test="td">
                <block></block>
            </td>
            <td test="td">
                <block></block>
            </td>
        </tr>
    </tbody>
</table> 
```

注意添加的模板，以防止默认模板第二次处理 td 文本节点。

# iphone - 将图像设置为视图时，带有 ARC 和 Storyboard 的应用程序崩溃

> ID：10248502
> 
> 赞同：0
> 
> 时间：2012-04-20T14:49:28.737
> 
> 标签：iphone, objective-c, memory-management, ios5, automatic-ref-counting

我的应用程序由自动引用计数管理，使用 AVCaptureConnection 拍摄多张图片并将它们设置为 UIImageView，如下所示：

```
NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
UIImage *image = [[UIImage alloc] initWithData:imageData];
self.imageView1.image = image; 
```

设置完所有图像后，我会遍历每个图像视图并将其图像保存到磁盘。然后，在保存之后，打开第二个视图控制器（由故事板管理）并从磁盘加载图像，以便用户对它们进行操作。

无论如何，一旦我回到第一个视图控制器拍摄更多照片（我假设这个视图控制器由 ARC 管理，所有图像视图都发布旧图像）我在每个图像视图上设置新图像。并且在设置这些图像时应用程序崩溃的第四次重复步骤。

总结一下，我打开viewcontroller1，在每个image view中设置10张图片，进入viewcontroller2。我回到 viewcontroller1 将 10 个图像设置到相同的视图中，然后转到 viewcontroller2。我总共做了 4 次，应用程序因 gdb 消息而崩溃。

如何确保大量图像（在我的情况下最多 10 个）在使用 ARC 时不会使我的应用程序崩溃？

# asp.net - 无论如何，ASP CompareValidator 总是为两个日期返回 false

> ID：10248505
> 
> 赞同：1
> 
> 时间：2012-04-20T14:49:46.760
> 
> 标签：asp.net, asp.net-mvc

我有两个文本控件，一个是开始日期，一个是结束日期。我需要在这些日期验证用户输入，很简单，开始日期必须小于或等于结束日期。

我有以下代码：

```
<asp:TextBox ID="txtStartDate" runat="server" CssClass="calendar" TabIndex="5"></asp:TextBox>    

<asp:TextBox ID="txtEndDate" runat="server" CssClass="calendar" TabIndex="7"></asp:TextBox>

<asp:CompareValidator ID="cvDate" Operator="GreaterThanEqual" Type="Date" 
    ControlToValidate="txtEndDate" ControlToCompare="txtStartDate"
    ErrorMessage="End date must be greater than or equal to start date!" 
    runat="server" Display="None"/>

<asp:ValidatorCalloutExtender ID="cvDate_ValidatorCalloutExtender" runat="server"
    CloseImageUrl="images/close.gif" Enabled="True" HighlightCssClass="formFieldHighligherOnValidation"
    TargetControlID="cvDate" WarningIconImageUrl="images/warning.gif">
</asp:ValidatorCalloutExtender> 
```

问题是无论我在 UI 中选择什么日期，验证总是失败。我不明白为什么，我在这里和其他论坛查看了各种帖子，这似乎是正确的方法。想法？

编辑：

日期实际上只是文本框中的纯字符串。我正在使用 AjaxControlKit 日历。这就解释了为什么当我比较这些字符串时会得到如此奇怪的结果。我想保留当前的日历，因为它看起来比普通的 ASP 更好，但是我遇到了如何比较日期的问题。

# c# - 在 MVC 3 中将 Razor 视图字段绑定到模型

> ID：10248506
> 
> 赞同：2
> 
> 时间：2012-04-20T14:49:48.847
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我无法将视图（文本框和复选框）中的字段提交给我的模型，并且不确定如何继续。每次我点击应该提交给模型的按钮时，控制器都会检查应该由视图设置的字段，但一直返回 false。所以要么他们一开始就没有设置好，要么控制器读错了。无论哪种方式，我都不知所措。请帮助：X

查看（稍微简化）：

```
@model Model

@Html.ValidationSummary()

@{ Html.BeginForm("PrintReport", "Controller", FormMethod.Get, new {     @class = "form_ll" }); }

<h1>@ViewBag.Title</h1>

<div class="group">
    @Html.ValidTextBoxFor(Model => Model.ToDate) 
    @Html.ValidTextBoxFor(Model => Model.FromDate)

    @Html.CheckBoxFor(Model => Model.Geplakt)
    @Html.CheckBoxFor(Model => Model.Geparafeerd)
    @Html.CheckBoxFor(Model => Model.Verschreven)
    @Html.CheckBoxFor(Model => Model.Geannuleerd)
    @Html.CheckBoxFor(Model => Model.Vermist)
    @Html.CheckBoxFor(Model => Model.Vernietigd)
    @Html.CheckBoxFor(Model => Model.Onbruikbaar)
    @Html.CheckBoxFor(Model => Model.Misdruk)
    @Html.CheckBoxFor(Model => Model.Teruggevonden)
    @Html.CheckBoxFor(Model => Model.InOnderzoek)
</div>
<div class="button">
    @Html.Button("Print")
</div>
@{ Html.EndForm(); } 
```

模型：

```
[Serializable]
public class Model : DomainObject
{
    [DataType(DataType.Date)]
    public DateTime? FromDate { get; set; }
    [DataType(DataType.Date)]
    public DateTime? ToDate { get; set; }

    public bool Geplakt { get; set; }
    public bool Geparafeerd { get; set; }
    public bool Verschreven { get; set; }
    public bool Geannuleerd  { get; set; }
    public bool Vermist  { get; set; }
    public bool Vernietigd { get; set; }
    public bool Onbruikbaar { get; set; }
    public bool Misdruk { get; set; }
    public bool Teruggevonden { get; set; }
    public bool InOnderzoek { get; set; }

    public Model()
    {
        // Constructor
    }               
} 
```

控制器：

```
public class Controller : ModelController<Model>
{
    [HttpGet]
    public ActionResult Index()
    {
        Model = new Model();
        return InternalIndex();
    }

    [HttpGet]
    public ActionResult InternalIndex()
    {
        return View("Index", Model);
    }

    [HttpGet]
    public ActionResult PrintReport()
    {
        if (!Model.FromDate.HasValue || !Model.ToDate.HasValue)
            ModelState.AddModelError("Date", "At leaste one date is null");
        else {
            if (Model.FromDate.Value.CompareTo(Model.ToDate.Value) >= 0)
                ModelState.AddModelError("Date", "First date is later then the second one");
        }
        if(Model.IsAnythingChecked())
            ModelState.AddModelError("Checkboxes", "You haven't checked any checkboxes");

        if (ModelState.IsValid)
        {
            return View("PrintReport", Model);
        }
        else
        {
            return InternalIndex();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T14:58:34.657

您正在使用 GET 而不是 POST。您将模型发送到未接收信息的控制器。一行应该是这样的：

```
@{ Html.BeginForm("PrintReport", "Controller", FormMethod.Post, new {     @class = "form_ll" }); } 
```

您还需要将模型发送到控制器并将控制器中的方法设置为 HttpPost：

```
 [HttpPost]
public ActionResult PrintReport(Model m)
{
    if (!Model.FromDate.HasValue || !Model.ToDate.HasValue)
        ModelState.AddModelError("Date", "At leaste one date is null");
    else {
        if (Model.FromDate.Value.CompareTo(Model.ToDate.Value) >= 0)
            ModelState.AddModelError("Date", "First date is later then the second one");
    }
    if(Model.IsAnythingChecked())
        ModelState.AddModelError("Checkboxes", "You haven't checked any checkboxes");

    if (ModelState.IsValid)
    {
        return View("PrintReport", Model);
    }
    else
    {
        return InternalIndex();
    }
} 
```

试试看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T14:55:19.663

看起来您正在将表单数据发布到仅 GET 控制器。此外，您还没有告诉控制器期待一个模型。试试这个（注意删除 [HTTPGet 装饰器]：

```
public ActionResult PrintReport(Model m)
{
    if (!m.FromDate.HasValue || !m.ToDate.HasValue)
        ModelState.AddModelError("Date", "At leaste one date is null");
    else {
        if (m.FromDate.Value.CompareTo(m.ToDate.Value) >= 0)
            ModelState.AddModelError("Date", "First date is later then the second one");
    }
    if(m.IsAnythingChecked())
        ModelState.AddModelError("Checkboxes", "You haven't checked any checkboxes");

    if (ModelState.IsValid)
    {
        return View("PrintReport", Model);
    }
    else
    {
        return InternalIndex();
    }
} 
```

我目前没有可用于测试的设置，但这应该可以

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T14:57:18.690

您需要有两个`PrintReport`动作方法的重载。

*   一个有`[HttpGet]`属性的。这用于返回您的网页
*   一个带有`[HttpPost]`属性的，它接受一个类型的参数`Model`（你的模型类，它**真的**应该更新为有一个描述它是什么模型的名称）。这在您的表单将值提交回 Web 服务器时使用。

您的表单应该更新做一个 POST（更改`FormMethod.Get`为`FormMethod.Post`）。

然后，MVC 模型绑定应该为您整理其余部分，为您的`PrintReport`操作方法的第二次重载创建模型类型的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T14:55:52.700

您需要将模型作为控制器操作的参数传回，以查看视图中反映的更改，即

`public ActionResult PrintReport(Model model) {`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T15:00:43.150

你`ModelController<Model>`上课的内容是什么？我的怀疑是您在该类中创建了一个新模型，这就是您的代码在您编写`if (!Model.FromDate.HasValue`类似代码时所指的内容。

但是，您的控制器无法知道您的视图正在回发哪个模型。为了改变这一点，你需要做三件事：

1.  向您的方法添加一个参数来`PrintReport`表示您正在处理的模型，并`Model`在您的代码中使用它而不是。
2.  标记`PrintReport`方法，`[HttpPost]`以便模型可以传递给方法。
3.  更改您的表单以使用 Post 而不是 Get。

# javascript - 设置 mongo 的更好方法是什么？

> ID：10248520
> 
> 赞同：0
> 
> 时间：2012-04-20T14:50:52.810
> 
> 标签：javascript, node.js, mongodb

我有一组相同的文档，但可以根据使用情况分为两个不同的组。

其中一个组，我们将它们称为“当前”，有少量文档被大量查询。

另一组，我们将它们称为“积压”，是查询频率较低的大量文档。

我的想法是，不混合这两种类型的同一文档将允许我查询非常活跃的“当前”文档，而无需每次都筛选大量“积压”。

这些应该在两个不同的集合中还是在同一个“汽车”集合中？

```
mongo.collection('cars', function(err, cars){
    cars.find({type:'new', color:'blue'}).toArray(function(err, newBlueCars) {
        //do something with newBlueCars
    });
});

mongo.collection('cars', function(err, cars){
    cars.find({type:'used', color:'blue'}).toArray(function(err, usedBlueCars) {
        //do something with usedBlueCars
    });
}); 
```

或者

```
mongo.collection('cars.current', function(err, cars){
    cars.find({color:'blue'}).toArray(function(err, currentBlueCars) {
        //do something with newBlueCars
    });
});

mongo.collection('cars.backlog', function(err, cars){
    cars.find({color:'blue'}).toArray(function(err, backlogBlueCars) {
        //do something with usedBlueCars
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:25:41.123

您可以将类型和颜色索引在一起并获得良好的响应时间，无需将它们分成两个集合，这不是可维护性的好习惯。您可能需要对两者进行相同的操作，但这样一来，您将需要重复所有操作两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T07:43:44.383

我想我会发布一个实际的答案，因为它已经在评论中充分散列（另一个答案不够好）。

将它们全部保存在一个集合中的好处是：

*   可以在单个查询中查询所有记录
*   可以使用稀疏索引来有效地索引“当前”记录

将它们全部保存在一个集合中的缺点是：

*   索引可能需要有“当前”字段引导所有索引，这会占用额外空间并使查找速度变慢
*   无法使用稀疏索引索引多个字段

将它们分成两个集合的好处是：

*   您将获得一个免费索引，因此您无需使用“当前”字段引导所有索引
*   您的“当前”数据将具有更小的索引，可以轻松放入 RAM

将它们分成两个集合的缺点是：

*   您需要运行两个查询才能对整个数据集执行任何操作，并合并结果

# c# - 当我使用 context.table.attach() 时，为什么 Linq-To-Sql 抱怨记录已经存在？

> ID：10248522
> 
> 赞同：0
> 
> 时间：2012-04-20T14:51:11.063
> 
> 标签：c#, linq-to-sql

我正在尝试使用全新生成的 POCO 更新我的优化搜索记录的所有值，而无需手动重置我的 Linq-to-sql 对象中的所有值。为此，我设置了我想要不为空的任何值，然后调用：

```
 if (person.xosPodOptimizedSearch == null)
        {
            person.xosPodOptimizedSearch = record;
        }
        else
        {
            context.xosPodOptimizedSearches.Attach(record, true);
            context.Refresh(System.Data.Linq.RefreshMode.KeepCurrentValues, record);
        } 
```

此代码的目的是，如果我的`person`记录没有`xosPodOptimizedSearch`记录，则添加它。如果这个人已经有一个，我希望它更新为我刚刚创建的 POCO 中的任何值。

但是，当这个 runns 和`.attach(record, true)`is run Linq-to-sql 抛出一个`DuplicateKeyException occurred: Cannot add an entity with a key that is already in use`，这是愚蠢的，因为我知道存在一条记录，这就是为什么我`attach()`首先使用而不是`.InsertOnSubmit()`.

如何使用我生成的值来 100% 更新数据，而不使用该记录的数据库中的任何值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:12:18.760

没关系，这是我的错误。我对 Linq-to-sql 感到困惑，因为在我的代码前面有一个杂散`record.xosPerson = person;`调用，所以它只认为人员记录与新记录相关联而忘记了旧记录的存在。

# android - android edittext和多个复选框

> ID：10248525
> 
> 赞同：0
> 
> 时间：2012-04-20T14:51:18.753
> 
> 标签：android

我需要一个 editText 和 10 个复选框。在安卓手机上，我还需要有一个滚动视图。我的意思是我需要在滚动条中看到 checkboxez。怎么做？

有人可以发布布局示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:53:09.480

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical" android:layout_width="fill_parent"
 android:layout_height="fill_parent">
 <EditText id ="@+id/edittext1"
 android:text="EditText 1"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 />
 <ScrollView android:layout_width="fill_parent"
   android:layout_height="fill_parent">
 <LinearLayout 
  android:orientation="vertical" android:layout_width="fill_parent"
  android:layout_height="fill_parent">
 <CheckBox android:id="@+id/check" android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:text="@string/checkboxtest"/>
<CheckBox android:id="@+id/check" android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:text="@string/checkboxtest"/>
<CheckBox android:id="@+id/check" android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:text="@string/checkboxtest"/><CheckBox android:id="@+id/check" android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:text="@string/checkboxtest"/>
</LinearLayout>
</ScrollView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:57:17.383

将所有组件添加到滚动视图

```
<ScrollView....>
<LinearLayout..>
    <EditText />
    <CheckBox />
    <CheckBox />
    <CheckBox />
    <CheckBox />
    .
    .
    </LinearLayout..>
</ScrollView> 
```

# netbeans - Netbeans 7.1.1 部署到 Glassfish 3.1.2 的时间很长？

> ID：10248527
> 
> 赞同：0
> 
> 时间：2012-04-20T14:51:23.940
> 
> 标签：netbeans, ubuntu, glassfish

从 Netbeans 7.1.1 将一个包含两个会话 bean 的 EJB 的企业应用程序部署到 Glassfish 3.1.2 需要大约 2-3 分钟，这是否正常（右键单击 EE-app 并选择“部署”）？我能做些什么来加快这个过程？

我正在使用 JDK 1.6.0_30，Glassfish 在我的 LAN 上的远程机器上运行（已经尝试过 Ubuntu 10.04 和 11.10）。使用 Windows 7 作为 Glassfish 的主机没有问题（在 Netbeans 中按下“部署”大约需要 5 秒才能成功部署）。

任何帮助都非常感谢！提前谢谢了！

```
[#|2012-04-23T16:25:58.883+0200|INFO|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU|_ThreadID=22;_ThreadName=Thread-2;|EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461|#]

[#|2012-04-23T16:25:58.885+0200|INFO|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU|_ThreadID=22;_ThreadName=Thread-2;|file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU login successful|#]

[#|2012-04-23T16:25:58.885+0200|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU.server|_ThreadID=22;_ThreadName=Thread-2;|Multiple [2] JMX MBeanServer instances exist, we will use the server at index [0] : [com.sun.enterprise.v3.admin.DynamicInterceptor@50d420eb].|#]

[#|2012-04-23T16:25:58.885+0200|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU.server|_ThreadID=22;_ThreadName=Thread-2;|JMX MBeanServer in use: [com.sun.enterprise.v3.admin.DynamicInterceptor@50d420eb] from index [0] |#]

[#|2012-04-23T16:25:58.886+0200|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU.server|_ThreadID=22;_ThreadName=Thread-2;|JMX MBeanServer in use: [com.sun.jmx.mbeanserver.JmxMBeanServer@6e22f51b] from index [1] |#]

[#|2012-04-23T16:25:58.966+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=22;_ThreadName=Thread-2;|TopLevel AvailabilityService.getAvailabilityEnabled => true|#]

[#|2012-04-23T16:25:58.967+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=22;_ThreadName=Thread-2;|TopLevel EjbAvailabilityService.getAvailabilityEnabled => true|#]

[#|2012-04-23T16:25:58.967+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=22;_ThreadName=Thread-2;|**Global AvailabilityEnabled => true; isAppHAEnabled: false|#]

[#|2012-04-23T16:25:58.967+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=22;_ThreadName=Thread-2;|StatefulContainerBuilder AvailabilityEnabled for this app => false|#]

[#|2012-04-23T16:25:58.967+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=22;_ThreadName=Thread-2;|StatefulContainerBuilder.buildStoreManager() storeName: StatefulBean-87503047946600448-BackingStore|#]

[#|2012-04-23T16:25:58.968+0200|INFO|glassfish3.1.2|org.glassfish.ha.store.adapter.file.FileBackingStore|_ThreadID=22;_ThreadName=Thread-2;|[FileBackingStore::initialize] Successfully Created and initialized store. Working dir: /home/nicolas/glassfish3/glassfish/domains/domain1/session-store/StatefulBean-87503047946600448; Configuration: BackingStoreConfiguration{clusterName='null', instanceName='null', storeName='StatefulBean-87503047946600448-BackingStore', shortUniqueName='87503047946600448', storeType='file', maxIdleTimeInSeconds=-1, relaxVersionCheck='null', maxLoadWaitTimeInSeconds=0, baseDirectoryName='/home/nicolas/glassfish3/glassfish/domains/domain1/session-store/StatefulBean-87503047946600448', keyClazz=interface java.io.Serializable, valueClazz=class org.glassfish.ha.store.util.SimpleMetadata, synchronousSave=false, typicalPayloadSizeInKiloBytes=0, vendorSpecificSettings={start.gms=false, async.replication=true, key.transformer=com.sun.ejb.base.sfsb.util.SimpleKeyGenerator@75e1c7c0, local.caching=true, value.class.is.thread.safe=true, broadcast.remove.expired=false}}|#]

[#|2012-04-23T16:25:58.968+0200|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=22;_ThreadName=Thread-2;|StatefulContainerbuilder instantiated store: org.glassfish.ha.store.adapter.file.FileBackingStore@3a014ab6; ha-enabled: false ==> BackingStoreConfiguration{clusterName='null', instanceName='null', storeName='StatefulBean-87503047946600448-BackingStore', shortUniqueName='87503047946600448', storeType='file', maxIdleTimeInSeconds=-1, relaxVersionCheck='null', maxLoadWaitTimeInSeconds=0, baseDirectoryName='/home/nicolas/glassfish3/glassfish/domains/domain1/session-store/StatefulBean-87503047946600448', keyClazz=interface java.io.Serializable, valueClazz=class org.glassfish.ha.store.util.SimpleMetadata, synchronousSave=false, typicalPayloadSizeInKiloBytes=0, vendorSpecificSettings={start.gms=false, async.replication=true, key.transformer=com.sun.ejb.base.sfsb.util.SimpleKeyGenerator@75e1c7c0, local.caching=true, value.class.is.thread.safe=true, broadcast.remove.expired=false}}|#]

[#|2012-04-23T16:25:58.998+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=22;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB StatefulBean: [java:global/LawSuiteEE/LawSuiteEE-ejb/StatefulBean, java:global/LawSuiteEE/LawSuiteEE-ejb/StatefulBean!ch.lawsuite.services.StatefulBeanRemote]|#]

[#|2012-04-23T16:25:58.998+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=22;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB StatefulBean: [ch.lawsuite.services.StatefulBeanRemote#ch.lawsuite.services.StatefulBeanRemote, ch.lawsuite.services.StatefulBeanRemote]|#]

[#|2012-04-23T16:25:59.054+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=22;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB UserFacade: [java:global/LawSuiteEE/LawSuiteEE-ejb/UserFacade, java:global/LawSuiteEE/LawSuiteEE-ejb/UserFacade!ch.lawsuite.control.UserFacadeRemote]|#]

[#|2012-04-23T16:25:59.054+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=22;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB UserFacade: [ch.lawsuite.control.UserFacadeRemote, ch.lawsuite.control.UserFacadeRemote#ch.lawsuite.control.UserFacadeRemote]|#]

[#|2012-04-23T16:25:59.100+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=22;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB StatelessBean: [java:global/LawSuiteEE/LawSuiteEE-ejb/StatelessBean!ch.lawsuite.services.StatelessBeanRemote, java:global/LawSuiteEE/LawSuiteEE-ejb/StatelessBean]|#]

[#|2012-04-23T16:25:59.100+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=22;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB StatelessBean: [ch.lawsuite.services.StatelessBeanRemote, ch.lawsuite.services.StatelessBeanRemote#ch.lawsuite.services.StatelessBeanRemote]|#]

[#|2012-04-23T16:25:59.115+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=22;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB UpdateService: [java:global/LawSuiteEE/LawSuiteEE-ejb/UpdateService, java:global/LawSuiteEE/LawSuiteEE-ejb/UpdateService!ch.lawsuite.services.UpdateService]|#]

[#|2012-04-23T16:25:59.307+0200|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=22;_ThreadName=Thread-2;|LawSuiteEE was successfully deployed in 526 milliseconds.|#]

[#|2012-04-23T16:59:54.449+0200|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.com.sun.enterprise.container.common|_ThreadID=30;_ThreadName=Thread-2;|User [] from host localhost does not have administration access|#]

[#|2012-04-23T16:59:54.456+0200|SEVERE|glassfish3.1.2|org.glassfish.admingui|_ThreadID=19;_ThreadName=Thread-2;|RestResponse.getResponse() gives FAILURE.  endpoint = 'https://localhost:4848/management/domain/servers/server/server'; attrs = '{}'|#]

[#|2012-04-23T16:59:54.456+0200|INFO|glassfish3.1.2|org.glassfish.admingui|_ThreadID=19;_ThreadName=Thread-2;|Exception Occurred :java.lang.RuntimeException: Invalid user name or password.|#]

[#|2012-04-23T16:59:54.495+0200|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.com.sun.enterprise.container.common|_ThreadID=18;_ThreadName=Thread-2;|User [] from host localhost does not have administration access|#]

[#|2012-04-23T16:59:54.548+0200|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=20;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context , because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-04-23T16:59:54.575+0200|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.com.sun.enterprise.container.common|_ThreadID=30;_ThreadName=Thread-2;|User [] from host localhost does not have administration access|#]

[#|2012-04-23T16:59:54.588+0200|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=19;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context , because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-04-23T16:59:54.609+0200|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.com.sun.enterprise.container.common|_ThreadID=20;_ThreadName=Thread-2;|User [] from host localhost does not have administration access|#]

[#|2012-04-23T16:59:54.621+0200|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=18;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context , because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-04-23T16:59:54.637+0200|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=21;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context , because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-04-23T16:59:54.653+0200|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=30;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context , because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-04-23T17:00:00.675+0200|INFO|glassfish3.1.2|org.glassfish.admingui|_ThreadID=31;_ThreadName=Thread-2;|Redirecting to /common/appServer/serverInstGeneralPe.jsf|#]

[#|2012-04-23T17:00:00.702+0200|INFO|glassfish3.1.2|org.glassfish.admingui|_ThreadID=18;_ThreadName=Thread-2;|Admin Console: Initializing Session Attributes...|#]

[#|2012-04-23T17:03:41.290+0200|INFO|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU|_ThreadID=20;_ThreadName=Thread-2;|file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU logout successful|#]

[#|2012-04-23T17:04:51.864+0200|INFO|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU|_ThreadID=32;_ThreadName=Thread-2;|EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461|#]

[#|2012-04-23T17:04:51.866+0200|INFO|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU|_ThreadID=32;_ThreadName=Thread-2;|file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU login successful|#]

[#|2012-04-23T17:04:51.867+0200|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU.server|_ThreadID=32;_ThreadName=Thread-2;|Multiple [2] JMX MBeanServer instances exist, we will use the server at index [0] : [com.sun.enterprise.v3.admin.DynamicInterceptor@50d420eb].|#]

[#|2012-04-23T17:04:51.867+0200|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU.server|_ThreadID=32;_ThreadName=Thread-2;|JMX MBeanServer in use: [com.sun.enterprise.v3.admin.DynamicInterceptor@50d420eb] from index [0] |#]

[#|2012-04-23T17:04:51.867+0200|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU.server|_ThreadID=32;_ThreadName=Thread-2;|JMX MBeanServer in use: [com.sun.jmx.mbeanserver.JmxMBeanServer@6e22f51b] from index [1] |#]

[#|2012-04-23T17:04:51.952+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=32;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB UpdateService: [java:global/LawSuiteEE/LawSuiteEE-ejb/UpdateService, java:global/LawSuiteEE/LawSuiteEE-ejb/UpdateService!ch.lawsuite.services.UpdateService]|#]

[#|2012-04-23T17:04:52.028+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=32;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB UserFacade: [java:global/LawSuiteEE/LawSuiteEE-ejb/UserFacade, java:global/LawSuiteEE/LawSuiteEE-ejb/UserFacade!ch.lawsuite.control.UserFacadeRemote]|#]

[#|2012-04-23T17:04:52.029+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=32;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB UserFacade: [ch.lawsuite.control.UserFacadeRemote, ch.lawsuite.control.UserFacadeRemote#ch.lawsuite.control.UserFacadeRemote]|#]

[#|2012-04-23T17:04:52.076+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=32;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB StatelessBean: [java:global/LawSuiteEE/LawSuiteEE-ejb/StatelessBean!ch.lawsuite.services.StatelessBeanRemote, java:global/LawSuiteEE/LawSuiteEE-ejb/StatelessBean]|#]

[#|2012-04-23T17:04:52.076+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=32;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB StatelessBean: [ch.lawsuite.services.StatelessBeanRemote, ch.lawsuite.services.StatelessBeanRemote#ch.lawsuite.services.StatelessBeanRemote]|#]

[#|2012-04-23T17:04:52.109+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=32;_ThreadName=Thread-2;|TopLevel AvailabilityService.getAvailabilityEnabled => true|#]

[#|2012-04-23T17:04:52.109+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=32;_ThreadName=Thread-2;|TopLevel EjbAvailabilityService.getAvailabilityEnabled => true|#]

[#|2012-04-23T17:04:52.110+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=32;_ThreadName=Thread-2;|**Global AvailabilityEnabled => true; isAppHAEnabled: false|#]

[#|2012-04-23T17:04:52.110+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=32;_ThreadName=Thread-2;|StatefulContainerBuilder AvailabilityEnabled for this app => false|#]

[#|2012-04-23T17:04:52.110+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=32;_ThreadName=Thread-2;|StatefulContainerBuilder.buildStoreManager() storeName: StatefulBean-87503047946665985-BackingStore|#]

[#|2012-04-23T17:04:52.111+0200|INFO|glassfish3.1.2|org.glassfish.ha.store.adapter.file.FileBackingStore|_ThreadID=32;_ThreadName=Thread-2;|[FileBackingStore::initialize] Successfully Created and initialized store. Working dir: /home/nicolas/glassfish3/glassfish/domains/domain1/session-store/StatefulBean-87503047946665985; Configuration: BackingStoreConfiguration{clusterName='null', instanceName='null', storeName='StatefulBean-87503047946665985-BackingStore', shortUniqueName='87503047946665985', storeType='file', maxIdleTimeInSeconds=-1, relaxVersionCheck='null', maxLoadWaitTimeInSeconds=0, baseDirectoryName='/home/nicolas/glassfish3/glassfish/domains/domain1/session-store/StatefulBean-87503047946665985', keyClazz=interface java.io.Serializable, valueClazz=class org.glassfish.ha.store.util.SimpleMetadata, synchronousSave=false, typicalPayloadSizeInKiloBytes=0, vendorSpecificSettings={start.gms=false, async.replication=true, key.transformer=com.sun.ejb.base.sfsb.util.SimpleKeyGenerator@75e09c92, local.caching=true, value.class.is.thread.safe=true, broadcast.remove.expired=false}}|#]

[#|2012-04-23T17:04:52.111+0200|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=32;_ThreadName=Thread-2;|StatefulContainerbuilder instantiated store: org.glassfish.ha.store.adapter.file.FileBackingStore@6d4771b3; ha-enabled: false ==> BackingStoreConfiguration{clusterName='null', instanceName='null', storeName='StatefulBean-87503047946665985-BackingStore', shortUniqueName='87503047946665985', storeType='file', maxIdleTimeInSeconds=-1, relaxVersionCheck='null', maxLoadWaitTimeInSeconds=0, baseDirectoryName='/home/nicolas/glassfish3/glassfish/domains/domain1/session-store/StatefulBean-87503047946665985', keyClazz=interface java.io.Serializable, valueClazz=class org.glassfish.ha.store.util.SimpleMetadata, synchronousSave=false, typicalPayloadSizeInKiloBytes=0, vendorSpecificSettings={start.gms=false, async.replication=true, key.transformer=com.sun.ejb.base.sfsb.util.SimpleKeyGenerator@75e09c92, local.caching=true, value.class.is.thread.safe=true, broadcast.remove.expired=false}}|#]

[#|2012-04-23T17:04:52.127+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=32;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB StatefulBean: [java:global/LawSuiteEE/LawSuiteEE-ejb/StatefulBean, java:global/LawSuiteEE/LawSuiteEE-ejb/StatefulBean!ch.lawsuite.services.StatefulBeanRemote]|#]

[#|2012-04-23T17:04:52.128+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=32;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB StatefulBean: [ch.lawsuite.services.StatefulBeanRemote#ch.lawsuite.services.StatefulBeanRemote, ch.lawsuite.services.StatefulBeanRemote]|#]

[#|2012-04-23T17:04:52.194+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=32;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB AdressFacade: [java:global/LawSuiteEE/LawSuiteEE-ejb/AdressFacade, java:global/LawSuiteEE/LawSuiteEE-ejb/AdressFacade!ch.lawsuite.control.AdressFacadeRemote]|#]

[#|2012-04-23T17:04:52.194+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=32;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB AdressFacade: [ch.lawsuite.control.AdressFacadeRemote#ch.lawsuite.control.AdressFacadeRemote, ch.lawsuite.control.AdressFacadeRemote]|#]

[#|2012-04-23T17:04:52.430+0200|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=32;_ThreadName=Thread-2;|LawSuiteEE was successfully deployed in 661 milliseconds.|#]

[#|2012-04-23T17:06:54.436+0200|INFO|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU|_ThreadID=33;_ThreadName=Thread-2;|file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU logout successful|#]

[#|2012-04-23T17:08:10.014+0200|INFO|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU|_ThreadID=19;_ThreadName=Thread-2;|EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461|#]

[#|2012-04-23T17:08:10.015+0200|INFO|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU|_ThreadID=19;_ThreadName=Thread-2;|file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU login successful|#]

 [#|2012-04-23T17:08:10.016+0200|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU.server|_ThreadID=19;_ThreadName=Thread-2;|Multiple [2] JMX MBeanServer instances exist, we will use the server at index [0] : [com.sun.enterprise.v3.admin.DynamicInterceptor@50d420eb].|#]

[#|2012-04-23T17:08:10.016+0200|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU.server|_ThreadID=19;_ThreadName=Thread-2;|JMX MBeanServer in use: [com.sun.enterprise.v3.admin.DynamicInterceptor@50d420eb] from index [0] |#]

[#|2012-04-23T17:08:10.016+0200|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/nicolas/glassfish3/glassfish/domains/domain1/applications/LawSuiteEE/LawSuiteEE-ejb_jar/_LawSuiteEE-ejbPU.server|_ThreadID=19;_ThreadName=Thread-2;|JMX MBeanServer in use: [com.sun.jmx.mbeanserver.JmxMBeanServer@6e22f51b] from index [1] |#]

[#|2012-04-23T17:08:10.099+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=19;_ThreadName=Thread-2;|TopLevel AvailabilityService.getAvailabilityEnabled => true|#]

[#|2012-04-23T17:08:10.100+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=19;_ThreadName=Thread-2;|TopLevel EjbAvailabilityService.getAvailabilityEnabled => true|#]

[#|2012-04-23T17:08:10.100+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=19;_ThreadName=Thread-2;|**Global AvailabilityEnabled => true; isAppHAEnabled: false|#]

[#|2012-04-23T17:08:10.100+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=19;_ThreadName=Thread-2;|StatefulContainerBuilder AvailabilityEnabled for this app => false|#]

[#|2012-04-23T17:08:10.101+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=19;_ThreadName=Thread-2;|StatefulContainerBuilder.buildStoreManager() storeName: StatefulBean-87503047946731521-BackingStore|#]

[#|2012-04-23T17:08:10.102+0200|INFO|glassfish3.1.2|org.glassfish.ha.store.adapter.file.FileBackingStore|_ThreadID=19;_ThreadName=Thread-2;|[FileBackingStore::initialize] Successfully Created and initialized store. Working dir: /home/nicolas/glassfish3/glassfish/domains/domain1/session-store/StatefulBean-87503047946731521; Configuration: BackingStoreConfiguration{clusterName='null', instanceName='null', storeName='StatefulBean-87503047946731521-BackingStore', shortUniqueName='87503047946731521', storeType='file', maxIdleTimeInSeconds=-1, relaxVersionCheck='null', maxLoadWaitTimeInSeconds=0, baseDirectoryName='/home/nicolas/glassfish3/glassfish/domains/domain1/session-store/StatefulBean-87503047946731521', keyClazz=interface java.io.Serializable, valueClazz=class org.glassfish.ha.store.util.SimpleMetadata, synchronousSave=false, typicalPayloadSizeInKiloBytes=0, vendorSpecificSettings={start.gms=false, async.replication=true, key.transformer=com.sun.ejb.base.sfsb.util.SimpleKeyGenerator@7cfa3f14, local.caching=true, value.class.is.thread.safe=true, broadcast.remove.expired=false}}|#]

 [#|2012-04-23T17:08:10.102+0200|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers.builder|_ThreadID=19;_ThreadName=Thread-2;|StatefulContainerbuilder instantiated store: org.glassfish.ha.store.adapter.file.FileBackingStore@11437a26; ha-enabled: false ==> BackingStoreConfiguration{clusterName='null', instanceName='null', storeName='StatefulBean-87503047946731521-BackingStore', shortUniqueName='87503047946731521', storeType='file', maxIdleTimeInSeconds=-1, relaxVersionCheck='null', maxLoadWaitTimeInSeconds=0, baseDirectoryName='/home/nicolas/glassfish3/glassfish/domains/domain1/session-store/StatefulBean-87503047946731521', keyClazz=interface java.io.Serializable, valueClazz=class org.glassfish.ha.store.util.SimpleMetadata, synchronousSave=false, typicalPayloadSizeInKiloBytes=0, vendorSpecificSettings={start.gms=false, async.replication=true, key.transformer=com.sun.ejb.base.sfsb.util.SimpleKeyGenerator@7cfa3f14, local.caching=true, value.class.is.thread.safe=true, broadcast.remove.expired=false}}|#]

[#|2012-04-23T17:08:10.133+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=19;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB StatefulBean: [java:global/LawSuiteEE/LawSuiteEE-ejb/StatefulBean, java:global/LawSuiteEE/LawSuiteEE-ejb/StatefulBean!ch.lawsuite.services.StatefulBeanRemote]|#]

[#|2012-04-23T17:08:10.134+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=19;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB StatefulBean: [ch.lawsuite.services.StatefulBeanRemote#ch.lawsuite.services.StatefulBeanRemote, ch.lawsuite.services.StatefulBeanRemote]|#]

[#|2012-04-23T17:08:10.168+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=19;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB StatelessBean: [java:global/LawSuiteEE/LawSuiteEE-ejb/StatelessBean!ch.lawsuite.services.StatelessBeanRemote, java:global/LawSuiteEE/LawSuiteEE-ejb/StatelessBean]|#]

[#|2012-04-23T17:08:10.168+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=19;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB StatelessBean: [ch.lawsuite.services.StatelessBeanRemote, ch.lawsuite.services.StatelessBeanRemote#ch.lawsuite.services.StatelessBeanRemote]|#]

[#|2012-04-23T17:08:10.183+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=19;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB UpdateService: [java:global/LawSuiteEE/LawSuiteEE-ejb/UpdateService, java:global/LawSuiteEE/LawSuiteEE-ejb/UpdateService!ch.lawsuite.services.UpdateService]|#]

[#|2012-04-23T17:08:10.240+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=19;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB UserFacade: [java:global/LawSuiteEE/LawSuiteEE-ejb/UserFacade, java:global/LawSuiteEE/LawSuiteEE-ejb/UserFacade!ch.lawsuite.control.UserFacadeRemote]|#]

[#|2012-04-23T17:08:10.240+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=19;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB UserFacade: [ch.lawsuite.control.UserFacadeRemote, ch.lawsuite.control.UserFacadeRemote#ch.lawsuite.control.UserFacadeRemote]|#]

[#|2012-04-23T17:08:10.303+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=19;_ThreadName=Thread-2;|EJB5181:Portable JNDI names for EJB AdressFacade: [java:global/LawSuiteEE/LawSuiteEE-ejb/AdressFacade, java:global/LawSuiteEE/LawSuiteEE-ejb/AdressFacade!ch.lawsuite.control.AdressFacadeRemote]|#]

[#|2012-04-23T17:08:10.303+0200|INFO|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=19;_ThreadName=Thread-2;|EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB AdressFacade: [ch.lawsuite.control.AdressFacadeRemote#ch.lawsuite.control.AdressFacadeRemote, ch.lawsuite.control.AdressFacadeRemote]|#]

[#|2012-04-23T17:08:10.515+0200|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=19;_ThreadName=Thread-2;|LawSuiteEE was successfully deployed in 591 milliseconds.|#]

[#|2012-04-23T17:10:33.388+0200|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.com.sun.enterprise.container.common|_ThreadID=34;_ThreadName=Thread-2;|User [] from host localhost does not have administration access|#]

[#|2012-04-23T17:10:35.050+0200|INFO|glassfish3.1.2|org.glassfish.admingui|_ThreadID=31;_ThreadName=Thread-2;|Admin Console: Initializing Session Attributes...|#] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:00:22.027

除非您正在运行真正不典型的 EJB，否则它不应该（我每天都使用它没有问题）。所以我会做一个愚蠢的回答：检查：

1.  你的局域网
2.  您的远程机器负载（空闲/忙碌）
3.  你的防火墙

# wowza - 如何使用 Wowza 应用程序保护流媒体？

> ID：10248530
> 
> 赞同：2
> 
> 时间：2012-04-20T14:51:38.810
> 
> 标签：wowza

我只想在 Wowza 允许的情况下流式传输视频。如何在 Wowza 应用程序中配置它？如果没有 Wowza 允许流式传输视频，则应该禁用发布流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-09T10:15:14.703

这里有一个名为[Wowza Wrench](http://wowzatoolbox.com/user-authentication)的模块，它可以为您的流媒体应用程序提供简单的身份验证和授权解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T17:23:12.533

首先，在此处查看 Wowza 快速入门指南：[https](https://www.wowza.com/docs/quick-start-guides) ://www.wowza.com/docs/quick-start-guides 。如果您想控制客户端何时以及是否成功连接，例如使用您自己的身份验证方案，您将需要下载 Wowza IDE，创建一个模块，并提供以下方法：

```
public void onConnect(IClient client, RequestFunction function, AMFDataList params) { 
```

如果您还使用 http 流式传输到 iOS 客户端，请同时使用：

```
public void onHTTPSessionCreate(IHTTPStreamerSession session) { 
```

或者，当然，您可以停止将流发送到 Wowza。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:24:28.170

您可以尝试此开源包中使用的方法：[http](http://wmsauth.org/) ://wmsauth.org/ 。它适用于 Windows Media Server，但这个原则也适用于 Wowza。主要思想是修改媒体源的链接，从而控制服务器端的输出。

Wowza 的 WMSAuth 也计划在5 月初作为[https://wmspanel.com/的一部分推出。](https://wmspanel.com/)流保护将通过集中式 Web 界面进行控制。

# cocoa-touch - 以编程方式更改 ipad 上的屏幕分辨率

> ID：10248531
> 
> 赞同：0
> 
> 时间：2012-04-20T14:51:44.807
> 
> 标签：cocoa-touch, ipad, uikit, screen, resolution

我想知道如何更改 ipad3 上的屏幕分辨率，因为它是我正在创建的游戏中所需大小的两倍。我知道我不能直接设置[UIScreen mainscreen]。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:49:07.770

为什么？为什么不充分利用所有可用的像素？

我可以保证，如果您故意降低分辨率，新 iPad 用户会讨厌您的游戏并在评论中将其丢弃。即使你在做一个像素艺术游戏，你仍然可以使用额外的真实像素来更好地对齐你的风格像素，并用完整的细节渲染远处的物体（根本不缩放它们）。

如果你仍然真的想让你的应用看起来很丑，你可以尝试两件事。一种是设置屏幕的当前模式（您必须查看可用的模式，我不希望该数组包含多个对象）；另一种是设置窗口的内容比例因子。

# ruby-on-rails - Factory Girl 创建对象但在数据库中找不到对象

> ID：10248533
> 
> 赞同：4
> 
> 时间：2012-04-20T14:51:48.357
> 
> 标签：ruby-on-rails, factory-bot

我用黄瓜和工厂女孩，这是一个神秘的问题，

在我的黄瓜步骤中：

```
fact = Factory.create(:fact,
                   :factable_type => "type_#{i}",
                   :factable_id => i.to_s,
                   :factable_action => "action_#{i}",
                   :priority => "1"
    ) 
```

当我使用 ruby​​ mine 在调试模式下检查时，我有一个带有 ID 的事实，但是如果我检查 IRB 测试控制台：

```
ruby-1.9.2-p180 :011 > Fact.all
 => [] 
```

当然，当我想运行测试并检查数据库中是否存在对象时，我的测试会因此而失败。你有什么主意吗 ？

这是我的 env.rb 文件：

```
# IMPORTANT: This file is generated by cucumber-rails - edit at your own peril.
# It is recommended to regenerate this file in the future when you upgrade to a 
# newer version of cucumber-rails. Consider adding your own code to a new file 
# instead of editing this one. Cucumber will automatically load all features/**/*.rb
# files.

require 'cucumber/rails'
require 'fakeweb'
require "factory_girl"

# Add this to load Capybara integration:
require 'capybara/rspec'
require 'capybara/rails'

require File.expand_path('../../../spec/vcr_setup.rb', __FILE__)
require 'cucumber/rails'
require 'cucumber/rspec/doubles'

require 'email_spec'
require 'email_spec/cucumber'

# require 'cucumber/thinking_sphinx/external_world'
# Cucumber::ThinkingSphinx::ExternalWorld.new

# Capybara defaults to XPath selectors rather than Webrat's default of CSS3\. In
# order to ease the transition to Capybara we set the default here. If you'd
# prefer to use XPath just remove this line and adjust any selectors in your
# steps to use the XPath syntax.
Capybara.default_selector = :css

Capybara.run_server = true #Whether start server when testing
Capybara.default_selector = :xpath #default selector , you can change to :css
Capybara.default_wait_time = 2 #When we testing AJAX, we can set a default wait time
Capybara.ignore_hidden_elements = false #Ignore hidden elements when testing, make helpful when you hide or show elements using javascript
Capybara.javascript_driver = :culerity #default driver when you using @javascript tag

# By default, any exception happening in your Rails application will bubble up
# to Cucumber so that your scenario will fail. This is a different from how 
# your application behaves in the production environment, where an error page will 
# be rendered instead.
#
# Sometimes we want to override this default behaviour and allow Rails to rescue
# exceptions and display an error page (just like when the app is running in production).
# Typical scenarios where you want to do this is when you test your error pages.
# There are two ways to allow Rails to rescue exceptions:
#
# 1) Tag your scenario (or feature) with @allow-rescue
#
# 2) Set the value below to true. Beware that doing this globally is not
# recommended as it will mask a lot of errors for you!
#
ActionController::Base.allow_rescue = false

# Remove/comment out the lines below if your app doesn't have a database.
# For some databases (like MongoDB and CouchDB) you may need to use :truncation instead.
#begin
#  DatabaseCleaner.strategy = :transaction
#rescue NameError
#  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
#end

# You may also want to configure DatabaseCleaner to use different strategies for certain features and scenarios.
# See the DatabaseCleaner documentation for details. Example:
#
#   Before('@no-txn,@selenium,@culerity,@celerity,@javascript') do
#     DatabaseCleaner.strategy = :truncation, {:except => %w[widgets]}
#   end
#
#   Before('~@no-txn', '~@selenium', '~@culerity', '~@celerity', '~@javascript') do
#     DatabaseCleaner.strategy = :transaction
#   end
#

## Sets up the Rails environment for Cucumber
ENV["RAILS_ENV"] = "test"
require File.expand_path(File.dirname(__FILE__) + '/../../config/environment')
require 'cucumber/rails/world'
Cucumber::Rails::World.use_transactional_fixtures
#
##Seed the DB

Fixtures.reset_cache

fixtures_to_load = ['facts','roles', 'user_types']

fixtures_folder = File.join(Rails.root, 'features', 'fixtures')
fixtures = Dir[File.join(fixtures_folder, '*.yml')].map {|f| File.basename(f, '.yml') }
fixtures.delete_if { |fx| !fixtures_to_load.index(fx)}
Fixtures.create_fixtures(fixtures_folder, fixtures)

Before do
    Capybara.default_host = 'http://site.local'

  NetworkConfig.initialize(:id => 1)
end 
```

在我的 factory.rb 文件中：

```
require "factory_girl"

Factory.define :fact do |i|
  i.factable_type "Follow"
  i.factable_id   "1"
  i.factable_action     "create"
  i.is_processed  "false"
  i.processing_has_started "false"
  i.processing_has_ended "false"
  i.priority "1"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-09T04:47:57.890

如果您使用**rails 控制台**或**rails c**命令来检查工厂的数据。我认为您需要像这样切换环境：

```
$ rails c
irb(main):010>ActiveRecord::Base.establish_connection "test"
irb(main):010> Fact.all 
```

# javascript - 将 jQuery 对象扩展为我自己的对象

> ID：10248535
> 
> 赞同：0
> 
> 时间：2012-04-20T14:51:50.197
> 
> 标签：javascript, jquery, extend

我的问题是以下代码！我想将一个 jQuery 对象扩展到我的 XjQuery 对象，我似乎正在工作。但是在我将找到对象的每个函数中，函数 myfunc 未声明这里有什么问题？

欢呼和

对不起我糟糕的英语

```
 XjQuery = function()
    {           
        var jq = $("<div id=xjq>hallo</div>");
        $.extend(this, jq);
    }
    XjQuery.prototype.myfunc = function() {
        this.append("<p>myfunc called</p>");
    }
    xjq = new XjQuery();

    xjq.myfunc(); // this works
    $("#maindiv").append(xjq); // works also 
    $("#maindiv").find("#xjq").each(function() {
        $(this).myfunc(); // doesn't work
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:59:17.367

`each`,内部`this`是一个原生 DOM 元素，并且`$(this)`是一个 jQuery 对象。您需要将 jQuery 对象“转换”为您的`xjQuery`对象。

你为什么要首先制作一个`xJquery`对象？为什么不做一个[jQuery插件](http://docs.jquery.com/Plugins/Authoring)？

```
jQuery.fn.myfunc = function() {
    this.append("<p>myfunc called</p>");
}; 
```

然后你可以做`$("#maindiv").myfunc()`。

编辑：要将 jQuery 对象“转换”为`xjQuery`对象，您可以像这样修改构造函数：

```
XjQuery = function(jq)
{           
    jq = typeof jq === 'undefined' ? $("<div id=xjq>hallo</div>") : $(jq);
    $.extend(this, jq);
} 
```

然后你可以这样做：

```
$("#maindiv").find("#xjq").each(function() {
    new XjQuery(this).myfunc();
}); 
```

# ruby-on-rails - Rails 3.1 - Options_for_select 值

> ID：10248536
> 
> 赞同：0
> 
> 时间：2012-04-20T14:51:51.343
> 
> 标签：ruby-on-rails

我的观点应该是进行以下 mysql 查询：

```
SELECT `egress_transport_documents`.* FROM `egress_transport_documents`  WHERE month(date) = 4 
```

在同一个视图中，我有一个下拉菜单来选择你想要选择的一年中的女巫月份。我的问题是，Mysql 只接受月份（1..12）的数值，而我希望在下拉菜单中，用户可以在字符串值之间进行选择，例如 'January'、'February'.. 而不是在 '1' 之间， '2'....'12' 。我可以用女巫的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:54:42.707

您是否考虑过使用 select_month 助手：

[http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-select_month](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-select_month)

# sqlite - 为 iBooks Author 创建的 (javascript) 小部件可以使用 SQLite (HTML5 web) 数据库吗？

> ID：10248537
> 
> 赞同：1
> 
> 时间：2012-04-20T14:51:52.960
> 
> 标签：sqlite, widget, ibook-author

我正在为 iBooks Author 创建一个“测验”小部件，并希望该小部件在用户不在线时将学生的回答保存在 iBook 的 SQLite 数据库中，直到用户可以连接互联网。

iBooks 中是否可以使用 SQLite CRUD？iBook 小部件是否具有 Safari/Webkit 之类的功能？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:40:35.327

我不确定完整的 SQL CRUD 类型存储，但是如果您查看[https://github.com/widged/iBook-widgets/tree/master/widgets](https://github.com/widged/iBook-widgets/tree/master/widgets)上提供的示例小部件，您会看到有一个localStorage.wdgt，表示可以保存数据。

这可能会让你实现你所追求的。

# android - 打算将图片上传到 Picasa

> ID：10248538
> 
> 赞同：1
> 
> 时间：2012-04-20T14:51:56.180
> 
> 标签：android, android-intent, picasa

我想以最简单的方式将图片上传到 Picasa，所以我想使用这样的 Intent：

```
Intent temp = new Intent(Intent.ACTION_SEND);
  temp.setType("image/jpeg");
  temp.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
  temp.putExtra(Intent.EXTRA_STREAM, imageURI);
  temp.setComponent(new ComponentName(
  "com.google.android.apps.uploader",
  "com.google.android.apps.uploader.picasa.PicasaUploadActivity"));
  startActivityForResult(temp, 0); 
```

我一直在尝试找出如何创建相册或将图片放在某个相册中并重命名图片，有人知道这是否可行以及如何实现？

谢谢

# actionscript-3 - 命令模式和 AS3

> ID：10248539
> 
> 赞同：4
> 
> 时间：2012-04-20T14:51:58.753
> 
> 标签：actionscript-3, flash, design-patterns

只是好奇你们如何解决命令封装的问题。您是否为每个命令创建一个单独的类？或者还有另一种方式（没有大量的课程）？

请注意，我在操作脚本 3 上遇到了问题。

**Upd：**更准确地说，我想知道如何组织命令相关的机器（例如每个命令的类）。

先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T15:34:47.633

命令模式掩盖了 Java 缺乏高阶函数（无法传递对函数的引用）。在 AS / 其他 ES 语言中使用这种模式是没有意义的，因为那里不存在这个问题。

很不幸，如今学术界使用 Java 进行 CS 研究，尤其是如果您的专业不是 CS 的话。这将解释这个和其他 Java 主义在没有任何批判性分析的情况下被移植到其他语言中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T16:27:20.703

命令模式是关于分离三个不同类别的对象之间的关注点：

1.  *祈求*者
**   *接收者*_**   *命令*_**

 ***正如 wvxvw 所指出的那样，这通常意味着您有大量实现`ICommand`这些类的类实际上只是作为代理来调用*接收器*上的方法——这是 Java 所必需的。随着时间的推移，这*可能*会变得有点难以管理。

但是让我们看一些代码，我将按照示例代码介绍[此处](http://pv3d.org/2009/02/20/actionscript-3-command-pattern-and-interfaces/)找到的命令模式的基础知识，但为了清楚起见稍微简化了：

所以首先是*接收器*：

```
// Receiver
public interface IStarShip {
    function engage():void;
    function makeItSo():void;
    function selfDestruct():void;
}

public class Enterprise implements IStarShip {
    public function Enterprise() { }

    public function engage():void {
        trace(this, "Engaging");
    }

    public function makeItSo():void {
        trace(this, "Making it so");
    }

    public function selfDestruct():void {
        trace(this, "Self Destructing");
    }
} 
```

和调用者：

```
// invoker
public class CaptPicard {
    private var _command:ICommand;

    public function CaptPicard() { }

    public function set command(cmd:ICommand):void {
        this._command = cmd;
    }

    public function issueCommand():void {

    }
} 
```

最后是一些命令：

```
// command
public interface ICommand {
    function execute():void;
}

public class EngageCommand implements ICommand 
{
    private var receiver:IStarShip

    public function EngageCommand(receiver:IStarShip) {
        this.receiver = receiver;
    }

    public function execute():void {
        receiver.engage();
    }
}

public class SelfDestructCommand implements ICommand 
{
    private var receiver:IStarShip

    public function SelfDestructCommand(receiver:IStarShip) {
        this.receiver = receiver;
    }

    public function execute():void {
        receiver.selfDestruct();
    }
}   

public class MakeItSoCommand implements ICommand 
{
    private var receiver:IStarShip

    public function MakeItSoCommand(receiver:IStarShip) {
        this.receiver = receiver;
    }

    public function execute():void {
        receiver.makeItSo();
    }
} 
```

我们可以这样说：

```
var enterprise:Enterprise = new Enterprise;
var picard:CaptPicard = new CaptPicard();
picard.command = new SelfDestructCommand(enterprise);
picard.issueCommand(); 
```

到目前为止，它与示例代码非常接近，并且是 ActionScript 中命令模式的非常标准的实现。但是，现在我们有三个`ICommand`实现，并且随着接收者可以做的事情的数量增加，编排模式所需的命令数量也会增加。

如果我们开始检查命令本身，它除了告诉接收者做一些工作之外并没有做太多的事情。正如 wvxvw 所暗示的那样，actionscript 中已经有这样的功能：一流的功能。

让我们看一下可能的实现，以减少您需要浮动的 ICommand 实现的数量，而完全不改变您的模式。

假设我们创建了一个通用类型的命令，可以说：

```
public class GenericCommand implements ICommand {

    private var worker:Function;

    public function GenericCommand(worker:Function) {
        this.worker = worker;
    }

    public function execute():void {
        this.worker.call();
    }
} 
```

请注意，我们的新类型仍然实现了`ICommand`，但它不是直接绑定到某个实现，而是接受一个工作人员来做一些工作。它不会立即执行它，它只是抓住它并等待其他东西启动它。

然后我们可以把我们的代码改成这样：

```
var enterprise:Enterprise = new Enterprise;
var picard:CaptPicard = new CaptPicard();
picard.command = new GenericCommand(function() { enterprise.selfDestruct(); });
picard.issueCommand();
picard.command = new GenericCommand(function() { enterprise.engage(); });
picard.issueCommand();
picard.command = new GenericCommand(function() { enterprise.makeItSo(); });
picard.issueCommand(); 
```

有了这个`GenericCommand`，我们可以将所有命令展开到这个新模式中（或在它们之间混合和匹配）。

但是如果你仔细观察，你可以看到通过使用这个我们通过引用封闭变量将通用命令紧密耦合到 IStarShip `enterprise`，也许更令人担忧的是，如果我们不小心，我们可能会创建*大量*这样的命令关闭。它们都需要在某个时候进行垃圾收集，这可能会影响性能，或者更糟的是导致内存泄漏。

我们可以将这一层进一步解耦，使其更具动态性。`enterprise`我们可以使用工厂模式来帮助动态生成我们的命令，而不是直接使用对局部变量的关闭。考虑一下：

```
public class StarShipCommandFactory {
    private var worker:Function;

    public function StarShipCommandFactory(worker:Function) {
        this.worker = worker;
    }

    public function to(receiver:IStarShip):ICommand {
        return new GenericCommand(function() {
            worker.call(undefined, receiver);
        });
    }
} 
```

然后我们可以使用它来创建一个*命令工厂*来创建这些命令。就像是：

```
var enterpriseA:Enterprise = new Enterprise();
var enterpriseB:Enterprise = new Enterprise();
var picard:CaptPicard = new CaptPicard();

var selfDestuctor:StarShipCommandFactory = new StarShipCommandFactory(function(starShip:IStarShip):void {
    starShip.selfDestruct();
} );

var blowUpA:ICommand = selfDestructor.to(enterpriseA);
var blowUpB:ICommand = selfDestructor.to(enterpriseB);

picard.command = blowUpA;
picard.issueCommand();

picard.command = blowUpB;
picard.issueCommand(); 
```

这都将减少您需要生成的静态类的数量，以支持利用属性一等函数动态创建的对象，但仍应用相同的一般思想。

事实上，使用这种模式，您可以构建非常复杂的命令来代理多个接收器上的多个操作，这可能是一件非常强大的事情。

## 为什么要使用传统的实现`ICommand`呢？

坚持传统模式的最大原因之一是易于序列化。因为对象是显式的，所以它们很容易序列化。所以，假设你有一堆`Vector.<ICommand>`. 您可以轻松地将它们序列化，将它们写出来，然后再重新加载它们并按顺序重放它们，并且应该处于与您完全相同的状态。动态生成的对象，就像我之前描述的那样，要做到这一点有点棘手——并非不可能，只是更棘手。

如果您担心维护大量`ICommand`映射到接收器操作的 s，那么过去我使用元编程来解决这个问题。使用 ruby​​/python 解析一定数量的文件，并自动生成`ICommand`映射。很多时候，它们是相当幼稚的实现，是自动化的主要候选者。

* * *

无论如何，这些是我对这个主题的想法。你可以做更多的事情来帮助简化你的代码——我只是触及了表面。您的里程可能会有所不同——请记住：“找到解决问题的模式，而不是相反”——但也许您可以从中收集一些有用的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T13:46:04.590

我每个命令使用一个类。对于该模式为某些问题域提供的灵活性，大量的类是一个很小的代价。

使用一个游戏示例，带有一个名为 GameEntity 的自定义类 - 玩家、敌人等 - 我将首先定义一个命令接口

```
ICommand{
    function execute():void;
} 
```

然后每个命令类在注入构造函数的接收器上实现执行方法：

```
public class GoRight implements ICommand{

    _gameEntity:GameEntity

    public function GoRight(entity:GameEntity){
        _gameEntity = entity;
    }

    public function execute():void{
        _gameEntity.x++;
    }
} 
```

和

```
public class GoLeft implements ICommand{

    _gameEntity:GameEntity

    public function GoLeft(entity:GameEntity){
        _gameEntity = entity;
    }

    public function execute():void{
        _gameEntity.x--;
    }
} 
```

等等每个命令。

如果您使用堆栈，其中一个命令在另一个命令完成后被调用，您需要添加事件侦听器来侦听命令完成作为启动下一个命令的触发器。

但是恕我直言，如果您发现自己构建了一个命令模式成为关键架构解决方案的软件，我会认真考虑 actionscript 还是 Flash 播放器是否真的是正确的工具。对于任务队列和长命令链的执行/撤消，并发性（Flash 不提供的东西）对于良好的用户体验变得很重要。当然这只是我的看法...***

# facebook - 替换永久链接的功能

> ID：10248540
> 
> 赞同：0
> 
> 时间：2012-04-20T14:52:06.593
> 
> 标签：facebook, wordpress, wordpress-theming

如果启用了包含此功能的插件，我如何添加一个功能来替换任何`the_permalink()`功能`@$AWD_facebook→getLoginUrl();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:55:38.950

不太确定你想做什么，但我认为你的意思是这样的：

```
add_filter('the_permalink','fb_link');
function fb_link($permalink)
{
    global $AWD_facebook;
    include_once( ABSPATH . 'wp-admin/includes/plugin.php' );
    if(is_plugin_active('facebook-awd'))
        return @AWD_facebook->getLoginUrl();
    else
       return $permalink;
} 
```

**更新：**根据 Ahwebdev 的评论，在此函数中全球化 AWD_facebook 对象应该可以解决您的问题。

# jquery - 可以使用 imgAreaSelect 和 Google Maps 获得正方形坐标吗？

> ID：10248542
> 
> 赞同：0
> 
> 时间：2012-04-20T14:52:09.893
> 
> 标签：jquery, google-maps

我很久以前就看到一个网站这样做......

是否可以使用 imgAreaSelect (http://odyniec.net/projects/imgareaselect/) 或 jCrop 在 GoogleMaps 中“裁剪”一个区域并从中获取正方形的坐标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:18:32.860

使用我假设您正在使用的 Google Maps API 站点，使用[绘图工具库](https://developers.google.com/maps/documentation/javascript/overlays#drawing_tools)来绘制矩形并以这种方式获取坐标会更容易。

# visual-studio-2010 - TFS API DownloadFile( ) 函数在调试时导致异常

> ID：10248544
> 
> 赞同：2
> 
> 时间：2012-04-20T14:52:17.193
> 
> 标签：visual-studio-2010, tfs-sdk

每当我调用 Item.DownloadFile(string localFileName) 或 VersionControlServer.DownloadFile(string serverPath, string localFileName) 时，每当我尝试在 Visual Studio 中调试时都会收到 FileNotFoundException：找不到文件 'C:[Project Path]\bin\Debug\ [项目名称].vshost.exe.config'。

当我构建应用程序并在 Visual Studio 之外运行它时，调用这些函数没有问题。它工作得很好。有谁知道可能是什么原因造成的？

在你问之前，不，那个文件不存在。我没有对配置文件做任何事情，我不需要也不希望它存在。我不明白为什么在我调试时它甚至试图访问该文件。当我在 Visual Studio 之外运行应用程序时，.config 文件仍然不存在，但我没有例外，因为它没有尝试访问该文件。

此外，这也不是 vshost 问题。当我取消选中“启用 Visual Studio 托管进程”时，我得到相同的异常，但调试时除外，但文件名从“[ProjectName].vshost.exe.config”更改为“[ProjectName].config”

目前，当我想调试这个项目时，我必须在每次调用 DownloadFile() 之后立即放置一个 MessageBox.Show() 函数，并在 Visual Studio 之外运行我的应用程序。当显示该消息框时，我可以使用附加来处理并在该消息框之后的下一行放置一个断点，单击消息框上的“确定”，然后它将捕获断点。但是当我在循环中下载文件并想要调试循环时，在调用 DownloadFile 后附加到进程非常烦人和耗时，在调用下一个 DownloadFile 之前停止调试，在调用 DownloadFile 后再次附加到进程，并且一整天都在重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:15:58.040

我不完全确定，但看起来它与当前路径和您将文件下载到的工作区有关。

如果您没有明确指定工作区，TFS API 将尝试通过查看该路径是否在工作区中声明为映射来从应用程序的当前路径确定它。

如果我没记错的话，您可以从 Workspace 对象下载一个项目（或在操作中指定 Workspace），尝试修改您的代码以执行此操作，看看是否更好。

您还可以尝试将调试会话的当前路径更改为“工作空间内”的内容

# jquery - Jquery 第一次单击 addClass 选中第二次单击 removeClass 选中

> ID：10248547
> 
> 赞同：1
> 
> 时间：2012-04-20T14:52:27.867
> 
> 标签：jquery, bind, unbind

我有 4 个选项，我希望能够选择多个选项或通过第二次单击删除选定的类。

**jQuery**

```
$('.contact-method li a').click(function(e) {
        $('.contact-method li a').removeClass('selected');
        $(this).parent('a').addClass('selected');
        e.preventDefault();
}); 
```

**html**

```
<ul class="contact-method">
<li class="sms"><a href="javascript:void(0);">SMS</a></li>
<li class="telephone"><a href="javascript:void(0);">Telephone</a></li>
<li class="email"><a href="javascript:void(0);">Email</a></li>
<li class="post"><a href="javascript:void(0);">Post</a></li>
</ul> 
```

**演示** [http://jsfiddle.net/XeELs/97/](http://jsfiddle.net/XeELs/97/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T14:55:57.117

代替

```
 $('.contact-method li a').removeClass('selected');
    $(this).parent('a').addClass('selected'); 
```

只需使用

```
 $(this).toggleClass('selected'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T14:56:37.540

如果您只想在锚节点上切换选定的类，请尝试：

```
$('.contact-method li a').click(function(e) {
    e.preventDefault();            
    $(this).toggleClass('selected');
}); 
```

[http://jsfiddle.net/XeELs/99/](http://jsfiddle.net/XeELs/99/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:57:11.297

使用切换类

```
$('.contact-method li a').click(function() {
        $(this).toggleClass('selected');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T14:57:30.790

使用 toggleClass 方法。

```
$('.contact-method li a').click(function(e) {
    $(this).toggleClass('selected');
    e.preventDefault();
}); 
```

[http://jsfiddle.net/XeELs/100/](http://jsfiddle.net/XeELs/100/)

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

# iphone - iPhone在故事板中呈现和关闭导航视图控制器？

> ID：10248553
> 
> 赞同：1
> 
> 时间：2012-04-20T14:52:45.417
> 
> 标签：iphone, uinavigationcontroller, presentmodalviewcontroller, uistoryboard

我有根视图，它显示带有内容控制器的导航控制器，这就是它的样子： ![在此处输入图像描述](../Images/bd4df152903647082e6ec79fd10057e8.png)

NavigationController 以模态方式呈现，ProjectTypeSelectionView 是他的根控制器。当点击注销按钮时，我想关闭模式视图并返回 LoginScreenViewController。

所以我在 prepareSegue LoginScreen 中设置为委托：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

 UINavigationController *destination = segue.destinationViewController;

 if ([[destination ] respondsToSelector:@selector(setDelegate:)]) {
     NSLog(@"%@", destination);
     [destination setValue:self forKey:@"delegate"];
}
} 
```

然后在 ProjectTypeViewController 里面添加这个方法：

```
 - (IBAction)logout:(id)sender {
      [self.delegate projectTypeSelectionViewControllerDidFinish];
 } 
```

当点击注销按钮时调用它。令我惊讶的是，这并没有解雇控制器。什么都没有发生，即使你一切都已连接。

我已经跟踪到这个错误-当调用prepareSegue时，NavigationController的delagate设置为LoginScreenViewController，将ProjectTypeController的委托设置为LoginScreenViewController。

我该如何正确解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T15:05:01.027

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

 UINavigationController *destination = segue.destinationViewController;
UIViewController *vc = [[destination viewControllers] objectAtIndex:0];
vc.delegate = self;
} 
```

要使此代码更健壮，您可能需要检查 desitinationViewController 是否为 UINavigationController

# algorithm - 如何打印二叉搜索树？

> ID：10248555
> 
> 赞同：1
> 
> 时间：2012-04-20T14:52:55.697
> 
> 标签：algorithm, data-structures, assembly, binary-tree, binary-search-tree

嗨，我已经在 mips 中实现了一个 bst，我需要打印这棵树。每个节点有以下四个信息

*   它的价值

*   父母的地址

*   左孩子的地址

*   右孩子的地址

我应该按以下格式打印树。（x 表示没有孩子）

```
12

8-16

x-9  13-17

x-x  x-11 x-x  x-x 
```

您能否建议一种实现此打印方法的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:04:35.427

由于您需要逐级打印二叉树，因此打印信息最明显的方法是使用广度优先搜索方法遍历树。其余的很简单，应该不是问题。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:06:49.483

您打印树的顺序是广度优先（逐级）遍历。一种选择如下：维护一个工作列表，最初以树的根为种子。然后，反复从工作列表中出列，打印当前元素（如果不存在则打印 x），然后将两个子元素添加到工作列表中。当你完成遍历树时，你需要一些方法来跟踪，也许是先计算节点的数量，然后在你打印出那么多节点后停止。

也就是说，由于您在 MIPS 中执行此操作，因此一个更简单的选择是将树线性化为一个数组，然后打印该数组。如果以类似于在隐式二叉堆中对节点进行编号的方式对节点进行编号，则可以递归/迭代地遍历树，用树节点填充数组，然后遍历数组打印出所有内容。

希望这可以帮助！

# ruby-on-rails - Rails 3 + Tumblr API：如何使用一个表单同时编辑多个帖子？

> ID：10248557
> 
> 赞同：0
> 
> 时间：2012-04-20T14:53:15.800
> 
> 标签：ruby-on-rails, form-submit, omniauth, tumblr

我正在尝试编写一个 Rails 应用程序来获取符合特定条件的用户 Tumblr 帖子（例如，仅包含特定标签的帖子）。显示帖子后，我希望用户能够通过一个表单提交按钮一次编辑它们。

我正在通过 OmniAuth 对 Tumblr 进行身份验证，并使用 tumblr_client gem 进行 API 调用。在此处查看源代码：[https ://github.com/monfresh/Fix-my-Tumblr-tags](https://github.com/monfresh/Fix-my-Tumblr-tags)

到目前为止，我已经能够显示正确的数据，并且能够单独编辑每个帖子。我不知道该怎么做是将多个帖子 ID 作为数组传递，这样我就可以循环处理它们。有没有办法在不创建新的 Post 模型的情况下做到这一点，即不将用户的帖子保存到我的数据库中？现在，我只有一个用户模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:11:38.973

I think I figured it out.

In my `form_tag`, I collect the post IDs in an array via checkboxes:

```
<%= check_box_tag "post_ids[]", m["id"] %> 
```

and in my controller, I have an action that pulls in those post IDs like so:

```
def edit_tags
  @user = User.find(params[:id])
  @posts = params[:post_ids]
end 
```

# java - 从本机 API 检索时，来自加速度计的数据是否更准确？

> ID：10248559
> 
> 赞同：0
> 
> 时间：2012-04-20T14:53:18.687
> 
> 标签：java, c, accelerometer

我和一个朋友正在开发一个应用程序，它可以从加速度计中读取数据以供以后处理。我们正在使用 Blackberry Playbook（基于 Android）。

我们需要尽可能准确的数据。他说，与从 Java API 获得的读数相比，使用原生 C API 完成时，他从 Playbook 的加速度计获得的读数更准确。我想也许他从每个 API 读取数据的速度让他认为 C 代码读取更准确。

设置读取速率并在 C 中读取数据，如下所示：

```
/* 25000 microseconds  = 25 miliseconds */
static const int ACCELEROMETER_RATE = 25000;

sensor_set_rate(SENSOR_TYPE_ACCELEROMETER, ACCELEROMETER_RATE);
sensor_set_skip_duplicates(SENSOR_TYPE_ACCELEROMETER, true);

/* ...code ommited... */

/* gets the data */
sensor_event_get_xyz(event, &force_x, &force_y, &force_z); 
```

在Java中是这样的：

```
mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_UI);

/* ...code ommited... */

public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() != Sensor.TYPE_ACCELEROMETER)
    return;

mSensorX = event.values[0];
mSensorY = event.values[1];
mSensorZ = event.values[2];
} 
```

我之前读过 SensorManager.SENSOR_DELAY_UI 将读取速率设置为大约 20 毫秒，但我不确定。

这些 C 中的代码将获得比 Java 中的代码更准确的数据是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:58:35.903

Blackberry 开发人员可能也在使用包含 Java 实现中的 c 代码的库。

不，该语言不应该发挥任何作用，因为无论如何 c 和 java 都被简化为字节码。

# r - 崇高文本 2 和 R

> ID：10248565
> 
> 赞同：7
> 
> 时间：2012-04-20T14:53:58.937
> 
> 标签：r, sublimetext2

我正在尝试使用 Sublime Text 2 作为统计软件 R [更新/编辑：已解决！] 的接口。

在 Windows 上，我尝试了以下方法：

1.  安装 R 工具。原来只适用于 Macintosh 64。

2.  试图编写自定义构建文件。失败：没有返回输出。

    ```
    {
    "cmd": "C:/Program Files/R/R-2.9.2/bin/R.exe --no-save $File"
    } 
    ```

3.  安装了 SublimeREPL。失败：R 菜单选项已禁用...

4.  [更新/编辑] 试过这个（见 wuub 的回复）：

    ```
    {
        "default_extend_env": {"PATH": "{PATH};C:\\Program Files\\R\\R-2.9.2\\bin"}  
    } 
    ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T10:00:25.847

像这样打开 SublimeREPL 的用户设置：`Preferences -> Package Settings -> SublimeREPL -> Settings - User`

将 default_extend_path 设置为指向您的 R 安装：

```
{
    "default_extend_env": {"PATH": "{PATH};C:\\Program Files\\R\\R-2.14.2\\bin\\i386"}  
} 
```

运行`Tools -> SublimeREPL -> R`应该会按预期启动 REPL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:45:11.950

对于 Windows 系统，您可以为 R 添加一个新构建（工具 -> 构建系统 -> 新构建系统）并放入以下行。根据你的 R 安装目录修改路径。

```
{"cmd": ["Rscript.exe", "$file"],
"path": "C:\\Program Files\\R\\R-2.15.2\\bin\\x64\\",
"selector": "source.r"} 
```

您可以通过按 ctrl+B 而不是启动 SublimeREPL 来执行整个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T15:00:33.977

构建系统值需要是一个数组，所以你想要；

```
{
  "cmd": ["C:/Program Files/R/R-2.9.2/bin/R.exe", "--no-save", "$File"]
} 
```

[https://docs.sublimetext.io/guide/usage/build-systems.html#file-format](https://docs.sublimetext.io/guide/usage/build-systems.html#file-format)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-21T02:47:19.740

对于linux用户，看一下：

[Sublime Text 2 R 构建系统](https://codereview.stackexchange.com/questions/78181/sublime-text-2-r-build-system-source-file-send-selection-to-interactive-sessio)

它支持多选和交互式 R 会话。

# c++ - 访问冲突读取位置 0xcccccccc

> ID：10248566
> 
> 赞同：2
> 
> 时间：2012-04-20T14:54:01.127
> 
> 标签：c++, visual-studio-2008, opencv

我正在尝试在 openCV 2.2 中运行 squares.cpp 示例。代码在 Visual Studio 2008 中编译和构建没有错误。但是，当我运行可执行文件时（即在运行时），我收到一条错误消息

`Unhandled exception at 0x004ac363 in OpenCVRectangle.exe: 0xC0000005: Access violation reading location 0xcccccccc.`

这发生在定义中：
`vector<vector<Point> > squares;` 在 main 函数中

有人可以帮忙吗，为什么会这样？我发现值 0xcccccc 通常是一个未初始化或错误的变量，但不明白为什么我在这一行得到这个异常。

完整的示例代码可以在[http://pastebin.com/MTaXVcQz找到](http://pastebin.com/MTaXVcQz)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:02:47.617

`namedWindow`在您链接到的代码中是一个看起来没有在此范围内定义的函数。可能是它试图解释为尚未定义的变量，而不是函数。我会说它可能缺少某种图书馆？没有进一步的上下文很难说，但*不*`vector<vector<Point> > squares;`应该是违规行为。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:41:51.470

您的代码在带有 OpenCV 2.3.0 的 Mac OS X 上运行良好，但众所周知，OpenCV 在不同的操作系统中呈现不同的行为。

*   首先，检查您的代码在 Release 和 Debug 版本中是否存在此问题。

*   在 Windows 上升级到 OpenCV [2.3.1](https://stackoverflow.com/questions/7011238/opencv-2-3-c-visual-studio-2010/7014918#7014918)并查看问题是否消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T15:13:55.673

在VS中按Ctrl+Alt+E，启用所有异常检查，在调试模式下运行，查看异常出现的地方。这应该足以理解。*

# java - HTC Desire 停止录制

> ID：10248572
> 
> 赞同：0
> 
> 时间：2012-04-20T14:54:33.637
> 
> 标签：java, android

我正在编写一个长时间记录背景噪音的应用程序（长达 12 小时，主要是在晚上）。我正在使用 MediaRecorder 进行录制。问题是在 HTC Desire 设备上录制会在大约 1 小时甚至更短的时间后停止（没有崩溃）。在另一台设备 LG-P970h 上，这根本不会发生（即没有录制问题）。这是什么原因，我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:56:53.170

在这里做一些猜测，但您可能必须使用唤醒锁来让设备在录制期间保持活动状态。

# c# - 在 nHibernate Linq 语句中放置 Fetch 或 FetchMany 的最佳顺序

> ID：10248573
> 
> 赞同：2
> 
> 时间：2012-04-20T14:54:36.430
> 
> 标签：c#, linq, fluent-nhibernate

如果您执行 nHiberante Linq 查询并且想要预先加载相关对象。你把`Fetch`或放在哪里`FetchMany`？

像这样：

```
_session.Query<Entity>()
    .Where(x => x.IsSomething)
    .FetchMany(x => x.Children); 
```

或者像这样：

```
_session.Query<Entity>()
    .FetchMany(x => x.Children)
    .Where(x => x.IsSomething); 
```

我想知道放置`Fetch`或`FetchMany`（为了性能）的最佳顺序。或者顺序是否重要？当我使用实体框架时，我总是先编写包含，这在 nHibernate 中是否相同？

我们将规范模式与 nHibernate 一起使用。那么将`Fetch`or`FetchMany`放入规范中是否明智？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:25:00.263

没关系。IQueryable 只是一个查询语句和 Fetch()，FetchMany() 只是 Nhibernate 查询的一个设置，它放大查询以返回更多数据，这样您以后就不会执行延迟加载。在调用 ToList()、Single() 等之前，查询不会发送到数据库。然后将 linq 查询转换为包含更多连接和列的 sql 查询，然后将其发送到数据库服务器。

以下查询将在获取实体 + 子项时执行“类似”连接，但在这里我将其映射到匿名对象中：

```
_session
    .Query<Entity>()
    .Where(x => x.IsSomething)
    .Select(x => new { MyEntity = x, MyEntitiesChildren = x.Children }); 
```

# apache - Mercurial 在系统启动时不启动 [FreeBSD 9.0 Apache22]

> ID：10248576
> 
> 赞同：2
> 
> 时间：2012-04-20T14:54:43.370
> 
> 标签：apache, mercurial, apache2, freebsd

努力寻找 Apache22 和 mercurial 的问题根源。一切似乎都正常——制作存储库、正确配置 hgweb.cgi 的文件夹、设置权限等。

主要问题来了。*只有*当我手动（重新）启动 Apache 时，一切才有效，`/usr/local/etc/rc.d/apache22 restart`否则，使用`service apache22 restart`或在整个系统启动时，我正在启动并运行可访问网站的 Apache。但是，一旦尝试访问 Web 界面，它就会在浏览器中显示“内部服务器错误”，并在中显示下一条消息`http-error.log`

```
[Fri Apr 20 17:49:40 2012] [error] [client 10.20.30.34] env: 
[Fri Apr 20 17:49:40 2012] [error] [client 10.20.30.34] python
[Fri Apr 20 17:49:40 2012] [error] [client 10.20.30.34] : 
[Fri Apr 20 17:49:40 2012] [error] [client 10.20.30.34] No such file or directory
[Fri Apr 20 17:49:40 2012] [error] [client 10.20.30.34] Premature end of script headers: hgweb.cgi 
```

`service`我的猜测是这可能是环境变量的问题，但是从运行和直接调用脚本之间有什么区别`/usr/local/rc.d/`？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T16:22:58.780

检查 PATH，看起来 python 不在您的路径中。也许将 /usr/local/bin 添加到 www 用户的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T12:40:24.477

解决方案实际上是让用户运行 httpd （在我的情况下为**www ）以调整***$PATH*。但这对每个人来说可能并不明显，所以这就是我所做的：

使用内容创建*/usr/local/etc/apache22/envvars.d/path.env*

```
#!/bin/bash
export PATH=$PATH:/usr/local/bin:/usr/local/sbin 
```

这需要 Apache加载*env_module*，但这看起来像是在默认配置中加载的标准模块。

# salesforce - 当用户配置文件拒绝访问子对象时，在 Visualforce 页面中使用 apex:relatedList

> ID：10248579
> 
> 赞同：1
> 
> 时间：2012-04-20T14:54:52.657
> 
> 标签：salesforce, visualforce, force.com

我有两个自定义对象，约会和会话报告。会话报告是标准主从关系中 Appointment 的子项。此外，我有一个个人资料 Student，它对约会具有读取-创建-编辑-删除功能，而对会话报告没有权限。用例是学生可以创建约会，但无法查看导师为此约会创建的会话报告。

查看约会时，为约会对象使用标准布局可以按预期工作。即，学生可以看到约会字段，并且不会显示会话报告的相关列表。观察到的所有其他用户配置文件都可以看到会话报告的相关列表。

但是，在用 Visualforce 页面替换标准布局时遇到了一个问题：

```
<apex:page standardController="Appointment__c">
<apex:sectionHeader title="{!$ObjectType.Appointment__c.label}" subtitle="{!Appointment__c.Name}"/>
<apex:pageBlock title="{!$ObjectType.Appointment__c.label} Detail">
    <apex:pageBlockSection showHeader="false" columns="1">
        <apex:outputField value="{!Appointment__c.Tutor_Name__c}"/>
        <apex:outputField value="{!Appointment__c.Student_Name__c}"/>           
    </apex:pageBlockSection>
 </apex:pageBlock>    
 <apex:relatedList list="Session_Reports__r"/> 
```

这个新页面对至少对会话报告对象具有读取权限的所有用户都可以正常工作。学生用户对此对象无权并收到此错误消息

```
'Session_Reports__r' is not a valid child relationship name for entity Appointment 
```

显然，这种关系确实存在，因为页面可以为具有不同配置文件的用户正确显示。我一直无法解决标准布局和 VF 页面之间的差异，这会导致此失败。有人建议我可以在 VF 页面中识别用户配置文件并使用该信息来切换渲染。但是，这种方法违背了 Salesforce 安全模型的目的，我不会采用这种技术。

我应该能够以这种方式使用 apex:relatedList 吗？还是我错误地认为 VF 渲染引擎可以判断何时可以显示相关列表，何时不能显示相关列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T19:41:45.270

Salesforce 安全模型只会确保您不会显示特定用户无法访问的数据。它是如何通过抛出您看到的异常来实现的。如果您正在构建自定义 vf 页面，您有责任确保您不显示不允许用户看到的内容。请注意，这与用户没有适当的字段级别安全性时不显示的字段不同。

您需要添加检查以验证用户可以查看该对象。[幸运的是，他们在Describe Object Result](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_sobject_describe.htm)上有很多“is”方法（isAccessible、isCreatable、isDeletable 等），您可以确定当前用户对该对象的权限是什么，而无需将配置文件硬编码到您的代码中。对于您的特定情况，如果对象不可访问，您不会显示该相关列表。

视觉力量页面：

```
<apex:relatedList list="Session_Reports__r" 
                  rendered="{!$ObjectType.Session_Report__c.accessible}"/> 
```

# django - Django 表单验证模型选择

> ID：10248584
> 
> 赞同：-1
> 
> 时间：2012-04-20T14:55:21.197
> 
> 标签：django, forms, validation

我在验证 forms.ChoiceField 时遇到问题。我有两个表/模型

```
class City(models.Model):
    ...
    name = models.CharField(max_length=64)
    ...

class ShoppingCenter(models.Model):
    ...
    name = models.CharField(max_length=64)
    city = models.ForeignKey(City) 
```

人们可以在城市和购物中心登记他们的活动。但是因为有很多城市，甚至更多的购物中心，我想将购物中心的选择限制在选定的城市。我创建了一个带有城市名称的 CharField 和一个空的 ChoiceField 的表单。

用户在 CharField 中输入城市后，使用 ajax/jquery 自动完成，我使用 ajax/jquery 为 ShoppingCenter ChoiceField 填写值。

这一切似乎都奏效了。我输入了一个有效的城市，javascript 填写了 ShoppingCenter 选择字段的选项。

但是，当我想验证此表单时，它失败了。我正进入（状态：

表单错误

{'shopping_centre_id': [u'选择一个有效的选项。1 不是可用的选项之一。']}

尽管 1 是有效的购物中心 ID，但它是从数据库中选择的。

我有另一个 MultipleChoiceField 是相同的形式，并且工作正常。两者之间的唯一区别是 MultipleChoiceField 是使用标准 Django 生成的，而 ChoiceField 是使用 javascript (ajax + django) 创建的。

现在，我通过定义自己的 clean 方法找到了一种解决方法，在该方法中，我从 self._errors 中删除了错误并将 shopping_centre_id 值添加到cleaned_data。

有谁知道什么可能导致验证错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-21T04:30:09.493

在表格`choices`上填写。您可以从提供的城市名称，检索，过滤购物中心并将它们放入。`ChoiceField``__init__``data``City``choices`

但最好`ModelChoiceField`用于购物中心，因此您不必`choices`手动构建，只需将查询集传递给该字段。如果没有`data`- 它将是 `ShoppingCenter.objects.none()`，否则 - 按城市过滤。

# php - 使用 jQuery 访问 PHP 方法

> ID：10248587
> 
> 赞同：1
> 
> 时间：2012-04-20T14:55:26.600
> 
> 标签：php, jquery, oop, class, methods

我对 jQuery 和 Ajax 完全陌生，但我设法学习了如何做 Hello World、填充选择标签等等……问题是，我不喜欢使用结构化 PHP。我学到的方法是我必须用 $.getJSON 调用一些 PHP 文件，并且该文件必须“回显”我的结果。我想要的是能够调用一个 PHP 文件，该文件实际上是一个具有一些方法的类，并且该方法的返回将是 JavaScript 将接收的内容，而不仅仅是一个回显结果。

感谢您的关注。

Ps.：我在使用 Amfphp 的 PHP-OOP 和 Flex+PHP 方面有很多经验。我正在尝试构建不同版本的视图，并且我想重新使用 Flex 已经使用的类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:57:58.420

jQuery 在您的计算机上运行，​​PHP 在服务器上运行。PHP 和 jQuery 只能通过一系列精心设计的字符串进行通信。在服务器上，您可以自由地创建对象、运行方法、操作输出以及其他任何事情。但是，如果您要将这些数据反馈回您的 jQuery 应用程序（仍在客户端机器上运行），则需要回显（或输出）PHP 脚本的结果。

你可以考虑这样的事情：

```
$.post('server.php', { 'class':'foo', 'method':'bar' }, function( response ) {
  /* do something with the output of $foo->bar(); */
}); 
```

正如您在此处看到的，我可以定义我想在服务器上调用的类和方法。从 开始`server.php`，我们将查看`$_POST['class']`并`$_POST['method']`确定我们将实例化什么，以及我们将运行哪些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:05:49.617

AMF 在某种程度上与 HTTP 不同，它们是不同的协议。

当使用 AJAX（jQuery 与否）时，您在 URI 上调用 HTTP 方法，而不是 OOP 方法。所以一切都以至少两个映射结束：

*   您的应用程序逻辑映射到方法和 URI。
*   您的 Javascript 代码映射到方法和 URI。

这是使用[Respect\Rest](http://documentup.com/Respect/Rest)的示例：

```
$router->get('/users/*', function($userName) {
    return MyDatabaseLayer::fetchUser($userName); //Illustrative
})->accept(
    'application/json' => function($data) {
        header('Content-type: application/json');
        return json_encode($data);
    }
); 
```

现在是 jQuery 部分：

```
$.getJSON('/users/alganet', function(user) {
    alert(user.name);
}); 
```

您应该为不同的操作使用适当的 HTTP 方法。保存用户将类似于：

```
$router->post('/users/*', function($userName) {
    return MyDatabaseLayer::saveUser($_POST['user']); //Illustrative
}); 
```

jQuery：

```
$.post('/users', $("$userform").serialize()); 
```

有四种主要的 HTTP 方法：GET、POST、PUT 和 DELETE。GET 和 POST 是最常见的。

有一个很好的琐事：HTTP、REST 和 AMF 都是由同一个人编写的：Roy Fielding。

# java - Struts2 在 setter 看到之前捕获用户输入

> ID：10248589
> 
> 赞同：0
> 
> 时间：2012-04-20T14:55:41.380
> 
> 标签：java, jakarta-ee, struts2

第 1 部分：我正在尝试寻找一种以自动方式捕获和格式化用户输入的方法。我有很多字段，使用以下方法格式化所有内容变得庞大：

```
 <s:param name="value" value="thenumber == null ? '' : getText('{0,number,#,##0.00}',{thenumber})" /> 
```

有没有一种有效的方法来自动化这个？

第 2 部分：我想在将无效的用户输入传递给正确的设置器之前捕获并能够处理它，在本例中为 setTheNumber(Double theNumber)。最好使用来自页面本身的标签。因为插入 '10.00aaab' 会给我一个错误。

为我需要设置的每个数字创建一个临时字符串字段是一个无效选项，因为我需要为此创建大约 170 个设置器，并进行异常处理和字符串解析。

简短：我想在我的 Http 发布消息和我的 java 类设置器之间挂钩自己的代码。

以前我在 setter 和 getter 上使用了 @TypeConversion 注释，但我不能再使用它了，因为我的所有值的 java 类在另一个项目中，它不能依赖于 xwork2 包。

提前致谢，

# excel - VBA/VB 中的类方法

> ID：10248593
> 
> 赞同：1
> 
> 时间：2012-04-20T14:55:51.213
> 
> 标签：excel, vba

尝试在 VBA 中使用类时，我不断收到下标超出范围错误，可以在这里使用一些帮助！

这是课 -

```
Option Explicit
Private buildWs As String
Public Property Get affBuild() As String
    affBuild = buildWs
End Property

Public Property Let affBuild(value As String)
    buildWs = affBuild
End Property

Public Function activate()
    Sheets(buildWs).activate
End Function 
```

这是电话——

```
Sub SetWs()
    Dim current As CBuildSheet
    Set current = New CBuildSheet
    current.affBuild = "Resource Entry"
    current.activate
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:29:37.853

您的`Let`方法应该使用`value`参数：

```
Public Property Let affBuild(value As String)
    buildWs = value
End Property 
```

你`Public Function activate()`没有返回任何价值。

也许，您应该使用`Public Sub activate()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T15:03:10.563

这是错误的……

```
Public Property Let affBuild(value As String)
  buildWs = affBuild
End Property 
```

并且应该...

```
Public Property Let affBuild(value As String)
  buildWs = value
End Property 
```

看 。[http://ramblings.mcpher.com/Home/excelquirks/snippets/classes](http://ramblings.mcpher.com/Home/excelquirks/snippets/classes)开始学习课程。

布鲁斯

# ios - 错误“找不到此可执行文件的有效配置文件”

> ID：10248597
> 
> 赞同：0
> 
> 时间：2012-04-20T14:55:59.353
> 
> 标签：ios, xcode, ipad, provisioning, provisioning-profile

我无法在我的 Ipad 上安装配置文件，应用程序的包标识符是正确的，设备在配置门户中是正确的，但是每次我尝试在我的 Ipad 中构建调试时，它都会告诉我“此可执行文件的有效配置文件是未找到”，即使我尝试在 info.plist 上手动输入正确的包标识符，也不起作用。我已经尝试通过管理器重新授权设备，但也没有用。我多次重新安装并重新安装了配置文件，但总是遇到相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:44:09.567

确保 Xcode 中的代码签名设置正确。听起来您正在使用与您想象的不同的配置文件进行代码签名。您的调试签名应该使用您的开发配置文件完成，您的发布签名应该使用您的分发配置文件完成。

# lucene - 在 Hibernate Search 4.1 中清除 JUnit 测试之间的锁

> ID：10248598
> 
> 赞同：1
> 
> 时间：2012-04-20T14:55:59.897
> 
> 标签：lucene, hibernate-search

我们最近升级到 Hibernate Search 4.1，当我们基于 hibernate 对锁所做的更改运行 JUnit 测试时遇到错误。当我们使用*AbstractTransactionalJUnit4SpringContextTests*运行 Junit 测试时，我们经常会看到每次测试后都会留下锁。在审查（[如何处理 Hibernate-Search 索引恢复](https://stackoverflow.com/questions/9771127/how-to-handle-hibernate-search-index-recovery)）时，我们尝试了本机锁，但这并没有解决问题。

我们已经使用默认目录提供程序 (Filestore) 尝试了各种锁定机制（简单、单一和本机），并经常看到如下消息：

```
build   20-Apr-2012 07:07:53    ERROR 2012-04-20 07:07:53,290 154053 (LogErrorHandler.java:83) org.hibernate.search.exception.impl.LogErrorHandler  - HSEARCH000058: HSEARCH000117: IOException on the IndexWriter
build   20-Apr-2012 07:07:53    org.apache.lucene.store.LockObtainFailedException: Lock obtain timed out: NativeFSLock@target/indexes/Resource/write.lock
build   20-Apr-2012 07:07:53        at org.apache.lucene.store.Lock.obtain(Lock.java:84)
build   20-Apr-2012 07:07:53        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:1108) 
```

或者

```
build   19-Apr-2012 19:31:09    ERROR 2012-04-19 19:31:09,395 153552 (LuceneBackendTaskStreamer.java:61) org.hibernate.search.backend.impl.lucene.LuceneBackendTaskStreamer  - HSEARCH000072: Couldn't open the IndexWriter because of previous error: operation skipped, index ouf of sync! 
```

其中一些消息似乎显示了从一个测试级联到另一个测试的锁定问题，因此需要重置，有些可能是有效的，因为测试正在测试“无效”行为以及我们的应用程序如何对它们做出反应，但通常是因为ID 为 null 的情况

```
build   19-Apr-2012 19:31:11    Primary Failure:
build   19-Apr-2012 19:31:11        Entity org.tdar.core.bean.resource.CodingSheet  Id null  Work Type  org.hibernate.search.backend.PurgeAllLuceneWork 
```

*但是，无论如何，我们需要确保一项测试不会影响另一项测试。*

在阅读一些讨论（[关于目录提供程序的电子邮件讨论](http://web.archiveorange.com/archive/v/SMVGgfuj2b0mPjjC2Hk1)）时，有人建议基于 RAM 的目录提供程序可能是一个更好的选择，但我们更愿意尽可能使用与生产环境相同的提供程序。

我们应该如何在测试之间重置 HibernateSearch 以清理锁定文件并重置索引不同步或损坏的潜在问题？在测试套件开始时，我们擦除索引目录，是否建议在每次测试后擦除它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:47:40.820

如果您在目录中有过时的锁，则意味着 Hibernate Search 没有正确关闭，因为它肯定会关闭锁。

如果你在每个测试中启动一个新的 Hibernate SessionFactory，你应该确保它在测试运行后也被关闭：

```
org.hibernate.SessionFactory.close() 
```

（这在许多示例中经常丢失，因为忘记关闭 Hibernate SessionFactory 时没有明显的问题，但从来都不是可选的，并且可能会泄漏连接或线程）。

您链接到的 Hibernate 邮件列表中的线程最终将锁定更改为使用 Hibernate Search 4.1 中的本机句柄，以便在 JVM 崩溃或被杀死时自动清除锁定。但在你的情况下，我猜你并没有在测试之间杀死虚拟机，所以你只需要通过关闭服务来确保锁被正确释放。

**exclusive_index_use=false**隐藏了问题，因为 IndexWriter 将在每个事务结束时关闭。但是，这使它变慢了，因为重用 IndexWriter 的效率要高得多。升级到 Hibernate Search 4.1 后出现此问题的原因是此选项默认更改为*true*。但即便如此，您仍然应该正确关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T20:54:37.980

我的理解是 Spring 管理 SessionFactory 生命周期，所以没有必要随时调用 close()。

在测试运行期间加载了多个上下文时，我看到了这个锁定错误。例如，第一个上下文在索引文件上创建锁。第二个上下文尝试访问相同的索引，但由于第一个上下文中存在打开的 SessionFactory 而失败。

我已经通过使用@DirtiesContext 解决了这个问题，它在下一个实例化之前关闭上下文

# php - 损坏的 MySQL 数据库 - 数据未在一个表上的插入中存储或删除，但在更改该表名时代码有效

> ID：10248599
> 
> 赞同：2
> 
> 时间：2012-04-20T14:56:01.243
> 
> 标签：php, mysql, corruption

我有一个损坏的数据库，我不确定如何处理它。发生的事情是我有一个带有 PHP 后端的 Flex 应用程序，在某些部分我需要在一个表中进行多次插入，一切似乎都工作正常，没有错误。运行我的代码后，我在该表上进行了选择，并且表中没有显示任何内容。

我检查了一切，我的意思是一切：

我检查了登录信息。我将代码跟踪到最后，查询甚至显示在工作台中。我尝试使用我自己编写并在工作台 nada 中测试过的直接字符串插入。

如果我直接从工作台插入数据，它就可以工作。

从工作台插入数据后，我通过 php 运行它，而不是更新数据库，它删除了我之前在工作台中插入的内容。

所以我在想我的电脑设置可能有问题......所以我在另一台机器上设置了一个环境。这里没有成功，同样的事情也会发生。

然后我继续用不同的环境启动一台 AWS 机器，这里也是一样的。

我试图删除表并手动重新创建它，也没有成功。

**我做的最后一件事是创建一个不同名称的表，砰的一声在任何地方都有效。**

有没有人知道这里会发生什么以及解决这个问题的某种方法，我不想更改表名，顺便说一下，该表不是新表，它之前工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:38:12.860

如果你能给出表名那就太好了。也许是您在表名中使用的冲突关键字导致了您的麻烦？

# entity-framework-4 - 实体框架映射两个数据库中存在的同一个表

> ID：10248601
> 
> 赞同：1
> 
> 时间：2012-04-20T14:56:20.000
> 
> 标签：entity-framework-4

哪些选项可用于使用 Entity Framework 正确映射以下内容：

数据库 1 表：Foo、Foo_Assets、Assets

数据库 2 表：Bar、Bar_Assets、Assets

我考虑过将 Bar、Bar_Assets、Assets 映射为 SQL 视图，或者在从 Database 2 加载这些表时使用不同的数据库上下文。 

挑战在于，尽管 Foo、Bar 和它们的 _Assets 表可以独立处理，但两个数据库都有一个 Assets 表。这些表如何正确映射到资产实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:50:34.280

由于您有 2 个数据库，因此您将有 2 个 edmx 文件。只需在 edmx for Assets 表中使用不同的名称即可。这样可以确保没有冲突。

# android - 使用带有流的 android/httpclient 将 json 数据发布到 REST 服务

> ID：10248605
> 
> 赞同：0
> 
> 时间：2012-04-20T14:56:34.827
> 
> 标签：android, json, http, rest

我在将数据发布到我的 REST WCF 服务时遇到了一些困难。我需要向它发送一个 json 对象/数组，但是我的 POST 方法需要一个 Stream，然后将其分开以获取 JSON（不能更改这部分）。

我在 C# 中使用以下代码完成了此操作：

```
 public static string CallPostService(string url, string data)
    {
        url = Config.serviceAddress + url;
        string json = data;
        byte[] buffer = Encoding.UTF8.GetBytes(json);
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
        request.Method = "POST";
        request.Credentials = new NetworkCredential("user", "pass");
        request.ContentType = "application/x-www-form-urlencoded";
        using (StreamWriter sw = new StreamWriter(request.GetRequestStream()))
        {
            sw.Write(json);
            Console.WriteLine(json);
        }
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        using (StreamReader sr = new StreamReader(response.GetResponseStream()))
        {
            string res = sr.ReadToEnd();
            return res;
        }
    } 
```

我需要一些等效的 Java 代码来执行此操作，最好使用 Apache HttpClient。我是 http 库的新手，所以我会很感激一些方向。

编辑：

这是我的 WCF 服务中的方法标头。请求正文需要是一个流，以便服务可以处理它。

```
[WebInvoke(Method = "POST", UriTemplate = "person/delete", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    Person DeletePerson(Stream streamdata) { //bla } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:08:41.117

检查此代码段。我真的试过了，但它应该工作

```
public void postData() {
try {    
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");
String auth = android.util.Base64.encodeToString(
(username + ":" + password).getBytes("UTF-8"), 
android.util.Base64.NO_WRAP
 );
 httppost.addHeader("Authorization", "Basic "+ auth);

    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));
    nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:19:27.320

```
 String MyData;// Data need to post to server JSON/XML
      String reply;  
      try {

        URLConnection connection = url.openConnection(); 
        HttpURLConnection httppost = (HttpURLConnection) connection;
        httppost.setDoInput(true); 
        httppost.setDoOutput(true); 
        httppost.setRequestMethod("POST"); 
        httppost.setRequestProperty("User-Agent", "UA Here"); 
        httppost.setRequestProperty("Accept_Language", "en-US"); 
        httppost.setRequestProperty("Content-Type", "content type here"); 
        DataOutputStream dos = new DataOutputStream(httppost.getOutputStream()); 
        dos.write(MyData.getBytes()); // bytes[] b of post data 

        InputStream in = httppost.getInputStream(); 
        StringBuffer sb = new StringBuffer(); 
        try { 
            int chr; 
            while ((chr = in.read()) != -1) { 
                sb.append((char) chr); 
            } 
            reply = sb.toString(); 
        } finally { 
            in.close(); 
        } 

        Log.v("POST RESPONSE",reply);

    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    } 
```

# java - java : For 循环在达到特定条件后没有中断。

> ID：10248616
> 
> 赞同：0
> 
> 时间：2012-04-20T14:56:54.007
> 
> 标签：java

我正在使用 apache.commons jar 从文件夹中仅读取最新的 10 个文件（按创建日期）

这是列出所有文件，但我不知道为什么即使在完成读取 10 个文件后它也没有停止

这是我的代码，但我不知道为什么它没有停止

```
import org.apache.commons.io.comparator.LastModifiedFileComparator;
import java.io.File;
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        File dir = new File("D:\\MyFolder");
        File[] files = dir.listFiles();

        Arrays.sort(files, LastModifiedFileComparator.LASTMODIFIED_REVERSE);
        for (int i = 0; i < files.length; i++) {

             if(files.length==10)
             {
             // return;
                 break ; 
             }

            File file = files[i];
            System.out.printf(file.getName()+"\n");

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:58:07.243

改变

```
if(files.length==10) 
```

到

```
if(i == 10) 
```

您总是在比较 File 数组的长度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T14:58:13.797

错误的条件

```
for (int i = 0; i < files.length; i++) {

        File file = files[i];
        System.out.printf(file.getName()+"\n");
    } 
```

应该

```
for (int i = 0; i < files.length && i < 10; i++) {

        File file = files[i];
        System.out.printf(file.getName()+"\n");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:58:06.933

条件应该是`if (i == 10)`，因为`files.length`不会随着循环的每次迭代而改变。更好的是，更改您的代码如下：

```
int end = Math.min(files.length, 10);
for (int i = 0; i < end ; i++) {
    // ... your code
} 
```

这将计算一次结束索引，并避免在循环中重新计算。

# jquery - 将额外参数附加到 ajax 调用查询字符串

> ID：10248618
> 
> 赞同：1
> 
> 时间：2012-04-20T14:56:55.990
> 
> 标签：jquery

我正在尝试将额外的参数附加到每个 ajax 调用的查询字符串

假设原始 url 是: `/customer/search?sort=Id`，我希望处理后的 url 看起来像

```
/customer/search?sort=Id&criteria=abc 
```

这是代码

```
 $.ajaxPrefilter(function (options, originalOptions, jqXHR) {
        // Append the initial search criteria
        options.url += '&criteria=abc';
   }); 
```

问题是：一键点击后，url变成：`/customer/search?sort=Id&criteria=abc`

第二次点击后，网址变为：`/customer/search?sort=Id&criteria=abc&criteria=abc`

它不断增加

看起来 jQuery ajax 调用使用的是同一个`options`对象，所以我添加了一个自定义标志

```
 $.ajaxPrefilter(function (options, originalOptions, jqXHR) {
        // Append the initial search criteria
        if (!options.processed) {
            options.url += '&criteria=abc';
            options.processed = true;
        }
   }); 
```

问题是：`options.processed`总是`undefined`。看起来每个 ajax 调用都使用一个唯一的`options`对象。现在我很困惑:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:00:30.677

你不能简单地做

```
$.ajaxPrefilter(function (options, originalOptions, jqXHR) {
     //check if the new parameter has already ben added
     if(options.url.indexOf('&criteria') === -1){
        options.url += '&criteria=abc';
     }
}); 
```

# vba - 从 MS Access 中查找并选择 Outlook 电子邮件

> ID：10248625
> 
> 赞同：0
> 
> 时间：2012-04-20T14:57:07.743
> 
> 标签：vba, ms-access, outlook

我需要构建一个工具，允许用户从他的 Outlook 中选择一封电子邮件，这样我就可以将该电子邮件保存为 .msg 文件，或者仅将附件保存为文件。

我对允许搜索/过滤电子邮件的最简单和最好的方法有点磕磕绊绊。我需要给用户一个至少与 Outlook 稍微相似的视图（例如，文件夹应该是相同的顺序/层次结构。

Outlook 对象模型是否有某种我可以调用的 Explorer/Picker/Selection 对话框，在用户选择电子邮件后将返回 storeid 和 entryid？还是我需要自己动手？

我应该提到我已经知道如何保存电子邮件或附件，所以我的问题只是关于处理电子邮件的选择和过滤。

仅供参考，我正在使用 Outlook 2007 在 MS Access 2007 中对此进行编程。目标计算机具有 2007 或 2010 版本的 Access 和 Outlook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:59:23.807

我很少使用 Access 进行编程，但我从 Outlook 中移动了一些代码，稍微修改了一下，它似乎可以工作。这不是一个解决方案，但它应该向您展示如何访问您需要的所有信息。

我有一个问题。如果 Outlook 已经打开，也`Set OutApp = CreateObject("Outlook.Application")`不要创建新的 Outlook 实例。`Set OutApp = New Outlook.Application`因此`Quit`关闭 Outlook，无论它在宏启动之前是否打开。我建议你就这个问题发布一个新问题；我相信有人知道如何判断 Outlook 是否已经打开，因此不要退出它。

Outlook 中的文件夹结构有点尴尬，因为顶级文件夹是 type`Folders`而所有子文件夹都是 type `MAPIFolder`。一旦你过去了，它就相当简单了。

下面的代码包括功能`GetListSortedChildren(ByRef Parent As MAPIFolder) As String`。此函数查找 Parent 的所有子项并返回一个字符串，例如“5,2,7,1,3,6,4”，该字符串按名称按升序列出子项的索引。我会使用这样的东西通过根据用户需要扩展节点来填充 ListView。

我提供了一个子例程`CtrlDsplChld()`，它控制按顺序输出到所有文件夹的直接窗口。我相信这应该为您提供足够的指导来开始访问文件夹层次结构。

子例程`DsplChld(ByRef Parent As MAPIFolder, ByVal Level As Long)`包括查找带有附件的第一条消息的代码。这将告诉您如何在文件夹中查找特定消息。

最后，`CtrlDsplChld()`显示邮件的选定属性：主题、收件人、HTMLBody 和附件的显示名称。

希望这可以帮助。

```
Option Compare Database
Option Explicit
Dim ItemWithMultipleAttachments As Outlook.MailItem
Sub CtrlDsplChld()

  Dim ArrChld() As String
  Dim ListChld As String
  Dim InxAttach As Long
  Dim InxChld As Long
  Dim InxTopLLCrnt As Long
  Dim OutApp As Outlook.Application
  Dim TopLvlList As Folders

  Set ItemWithMultipleAttachments = Nothing

  Set OutApp = CreateObject("Outlook.Application")
  'Set OutApp = New Outlook.Application

  With OutApp

    Set TopLvlList = .GetNamespace("MAPI").Folders

    For InxTopLLCrnt = 1 To TopLvlList.Count
      ' Display top level children and their children
      Call DsplChld(TopLvlList.Item(InxTopLLCrnt), 0)
    Next

    If Not ItemWithMultipleAttachments Is Nothing Then
      With ItemWithMultipleAttachments
        Debug.Print .Subject
        Debug.Print .HTMLBody
        Debug.Print .To
        For InxAttach = 1 To .Attachments.Count
          Debug.Print .Attachments(InxAttach).DisplayName
        Next
      End With
    End If
    .Quit
  End With
  Set OutApp = Nothing

End Sub
Sub DsplChld(ByRef Parent As MAPIFolder, ByVal Level As Long)

  Dim ArrChld() As String
  Dim InxChld As Long
  Dim InxItemCrnt As Long
  Dim ListChld As String

  Debug.Print Space(Level * 2) & Parent.Name

  If ItemWithMultipleAttachments Is Nothing Then
    ' Look down this folder for a mail item with an attachment
    For InxItemCrnt = 1 To Parent.Items.Count
      With Parent.Items(InxItemCrnt)
        If .Class = olMail Then
          If .Attachments.Count > 1 Then
            Set ItemWithMultipleAttachments = Parent.Items(InxItemCrnt)
            Exit For
          End If
        End If
      End With
    Next
  End If

  ListChld = GetListSortedChildren(Parent)
  If ListChld <> "" Then
    ' Parent has children
    ArrChld = Split(ListChld, ",")
    For InxChld = LBound(ArrChld) To UBound(ArrChld)
      Call DsplChld(Parent.Folders(ArrChld(InxChld)), Level + 1)
    Next
  End If

End Sub
Function GetListSortedChildren(ByRef Parent As MAPIFolder) As String

  ' The function returns "" if Parent has no children.
  ' If the folder has children, the functions returns "P,Q,R, ..." where
  ' P, Q, R and so on indices of the children of Parent in ascending
  ' order by name.

  Dim ArrInxFolder() As Long
  'Dim ArrFolder() As MAPIFolder
  Dim InxChldCrnt As Long
  Dim InxName As Long
  Dim ListChld As String

 If Parent.Folders.Count = 0 Then
   ' No children
   GetListSortedChildren = ""
 Else
 'ReDim ArrName(1 To Parent.Folders.Count)
 'For InxChldCrnt = 1 To Parent.Folders.Count
 '  ArrFolder(InxChldCrnt) = Parent.Folders(InxChldCrnt)
 'Next
 Call SimpleSortMAPIFolders(Parent, ArrInxFolder)
   ListChld = CStr(ArrInxFolder(1))
   For InxChldCrnt = 2 To Parent.Folders.Count
     ListChld = ListChld & "," & CStr(ArrInxFolder(InxChldCrnt))
   Next
   GetListSortedChildren = ListChld
 End If
End Function
Sub SimpleSortMAPIFolders(ArrFolder As MAPIFolder, _
                                        ByRef InxArray() As Long)

  ' On exit InxArray contains the indices into ArrFolder sequenced by
  ' ascending name.  The sort is performed by repeated passes of the list
  ' of indices that swap adjacent entries if the higher come first.
  ' Not an efficient sort but adequate for short lists.

  Dim InxIACrnt As Long
  Dim InxIALast As Long
  Dim NoSwap As Boolean
  Dim TempInt As Long

  ReDim InxArray(1 To ArrFolder.Folders.Count)  ' One entry per sub folder
  ' Fill array with indices
  For InxIACrnt = 1 To UBound(InxArray)
    InxArray(InxIACrnt) = InxIACrnt
  Next

  If ArrFolder.Folders.Count = 1 Then
    ' One entry list already sorted
    Exit Sub
  End If

  ' Each repeat of the loop moves the folder with the highest name
  ' to the end of the list.  Each repeat checks one less entry.
  ' Each repeats partially sorts the leading entries and may result
  ' in the list being sorted before all loops have been performed.
  For InxIALast = UBound(InxArray) To 1 Step -1
    NoSwap = True
    For InxIACrnt = 1 To InxIALast - 1
      If ArrFolder.Folders(InxArray(InxIACrnt)).Name > _
         ArrFolder.Folders(InxArray(InxIACrnt + 1)).Name Then
        NoSwap = False
        ' Move higher entry one slot towards the end
        TempInt = InxArray(InxIACrnt)
        InxArray(InxIACrnt) = InxArray(InxIACrnt + 1)
        InxArray(InxIACrnt + 1) = TempInt
      End If
    Next
    If NoSwap Then
      Exit For
    End If
  Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:50:06.810

链接到 Outlook 表很好。问题是 Outlook 没有为每封邮件提供唯一的 ID，如果邮件从一个文件夹移动到另一个文件夹，其 ID 会更改。显然不是由了解数据库的人设计的。

更好的方法可能是创建一个在 Outlook 中运行的 Outlook 加载项，然后执行将信息发送到 Access 所需的任务。

# c# - 3级中继器

> ID：10248628
> 
> 赞同：-1
> 
> 时间：2012-04-20T14:57:16.373
> 
> 标签：c#, asp.net

我想使用中继器从数据库制作动态水平动态 3 级菜单我可以制作第一级然后卡住我不知道该怎么做以及获取子菜单和子子菜单的最佳要求是什么......从DB可以帮助我吗？我将它用于第一级...

```
 try
         {

             con.Open();
             reader = cmd1.ExecuteReader();

             List<menus> types = new List<menus>();

             while (reader.Read())
             {
                 types.Add(new menus() { ID = (int)reader["MenuID"], Name = reader["MenuName"].ToString(), page = reader["Page"].ToString(), Parent = (int)reader["Parent"],Order = (int)reader["Order"] });

             }
            rptlevel1.DataSource = types;
            rptlevel1.DataBind();
             con.Close();
         }
         catch (Exception)
         {
             if (reader != null)
             {
                 reader.Close();
             }
             if (con.State == System.Data.ConnectionState.Open)
             {
                 con.Close();
             }
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:05:05.677

您需要做的是如下所示：

```
repeater1_ItemDataBound
{
    //Get datasource for the current data item

    //Find child repeater control within this

    //Bind to the datasource
} 
```

对中继器的第二层重复此操作。

* * *

至于您的评论 - 在此 itemdatabound 中，找到您的第二个转发器并将其设置为 itemdatabound 事件，例如

```
rptOne.ItemDatabound += BindThirdRepeater; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:07:05.377

到目前为止，您所做的一切都很好。嵌套三个中继器并分别阅读菜单级别。

像以前一样只读取第一级菜单，然后在 rptLevel1 的 OnItemDataBound 方法中，再次读取第二级菜单项。再一次达到第三级，你就在那里。

```
1st level read

protected void rptLevel1_ItemDataBound(object sender, RepeaterItemEventArgs e) {
    2nd level read
}

protected void rptLevel3_ItemDataBound(object sender, RepeaterItemEventArgs e) {
    3rd level read
} 
```

# java - 无法使用 GAE 运行 Web 项目

> ID：10248642
> 
> 赞同：1
> 
> 时间：2012-04-20T14:57:52.330
> 
> 标签：java, eclipse, google-app-engine

我刚开始使用没有 GWT 的 GAE SDK 创建一个新的 Web 项目，但在控制台中我得到的只是：

```
WARNING: Failed startup of context com.google.appengine.tools.development.DevAppEngineWebAppContext@689a1f91{/,C:\Users\Mike\workspace\project\war}
java.lang.IllegalStateException: No such servlet: default
    at org.mortbay.jetty.servlet.ServletHandler.updateMappings(ServletHandler.java:1026)
    at org.mortbay.jetty.servlet.ServletHandler.setServletMappings(ServletHandler.java:1110)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.initialize(WebXmlConfiguration.java:306)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.configure(WebXmlConfiguration.java:222)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.configureWebApp(WebXmlConfiguration.java:180)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1247)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:196)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:173)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:120)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:96) 
```

这是 web.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
  <servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.png</url-pattern>
    <url-pattern>*.js</url-pattern>
    <url-pattern>*.css</url-pattern>
  </servlet-mapping>
  <filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <welcome-file-list>
    <welcome-file>dispatcher</welcome-file>
  </welcome-file-list>
  <session-config>
    <session-timeout>30</session-timeout>
  </session-config>
</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:19:58.397

如错误消息所示，您有一个到名为 default 的 servlet 的映射：

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.png</url-pattern>
    <url-pattern>*.js</url-pattern>
    <url-pattern>*.css</url-pattern>
</servlet-mapping> 
```

但没有 servlet 调用它。这是唯一定义的 servlet：

```
 <servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet> 
```

当您使用spring时，您可能不需要默认的servlet，因为spring可能会负责将您的请求分派给正确的处理程序。如果您删除上面的第一块代码，您应该没问题。

我假设您使用的是 Spring MVC。如果是这样，您要么需要设置 spring up 以扫描组件，以便它可以拾取带注释的控制器来处理请求，要么手动设置到控制器的映射。

# jquery - MVC 中的 Ajax @Ajax。助手和在 JQuery.Ajax 中

> ID：10248644
> 
> 赞同：2
> 
> 时间：2012-04-20T14:57:54.353
> 
> 标签：jquery, ajax, asp.net-mvc-2

我知道一点阿贾克斯。现在我正在学习 MVC + JQuery。我想知道 MVC Ajax.Helper 和 JQuery.Ajax 中的 2 个 Ajax 是否使用相同的基础？它们与我使用 XMLHttpRequest xhr 学习的普通 Ajax 相同吗？如果不是，那么首选的方法是什么？我是新手，有点困惑，所以如果我的问题对你没有意义，请不要介意。谢谢你，汤姆

（已编辑）我写了一些 mvc3 Razor：

```
<div id="MyAjaxDiv">@DateTime.Now.ToString("hh:mm:ss tt")</div>
@Ajax.ActionLink("Update", "GetTime", new AjaxOptions { UpdateTargetId = "MyAjaxDiv", InsertionMode = InsertionMode.Replace, HttpMethod = "GET" }) 
```

当我在记事本中打开源代码时，我得到：

```
<div id="MyAjaxDiv">06:21:10 PM</div>
<a data-ajax="true" data-ajax-method="GET" data-ajax-mode="replace" data-ajax-update="#MyAjaxDiv" href="/Home/GetTime">Update</a> 
```

所以，因为我只包含了 ~/Scripts/jquery.unobtrusive-ajax.min.js，所以 MVC 助手必须使用 JQuery 才能工作。我的印象是他们可能需要 MicrosoftAjax.js、MicrosoftMVCAjax.js ....等等，现在看起来不像了。它们适用于 MVC2 和 aspx 页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:25:37.433

这是一本MVC书的摘录，

> MVC 版本 3 引入了对 jQuery Validation 的支持，而早期版本依赖于 Microsoft 生产的 JavaScript 库。这些并没有受到高度重视，尽管它们仍然包含在 MVC 框架中，但没有理由使用它们。

JQuery 已经真正成为基于 ajax 的请求的标准。您仍然可以使用“XMLHttpRequest xhr”方式，但 Jquery 使执行相同的事情变得更容易。

# android - 在 Google 地图上使用对象类的纬度和经度绘制图钉/MapOverlays

> ID：10248648
> 
> 赞同：2
> 
> 时间：2012-04-20T14:58:10.103
> 
> 标签：android, google-maps

我在下面的这个`MapActivity`类中显示了一张地图并放置了用户当前位置的图钉。另一方面，我有一个对象类 VideoLocation，它具有从服务器的 JSON 文件中提取的某些地方的纬度和经度。我还想在地图上用大头针绘制位置。

我怎么能做到这一点？我需要在下面的课程中添加什么？

仅供参考，这就是我在我的 ListActivity 上调用对象的纬度和经度的方式：

```
VideoLocation vidLocation = videoLocations[position];

double lat2 = vidLocation.latitude;
double lng2 = vidLocation.longitude; 
```

这堂课：

```
public class MyMapActivity extends MapActivity implements OnClickListener {
        public static final String TAG = "GoogleMapsActivity";
        private MapView mapView;
        private LocationManager locationManager;
        Geocoder geocoder;
        Location location;
        LocationListener locationListener;
        CountDownTimer locationtimer;
        MapController mapController;
        MapOverlay mapOverlay = new MapOverlay();

        private VideoLocation[] videoLocations = null;

        @Override
        protected void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.my_map_activity);
            initComponents();

            JsonDB dbhelper = new JsonDB(MyMapActivity.this);
            SQLiteDatabase db = dbhelper.getWritableDatabase();

            db.beginTransaction();
            videoLocations = dbhelper.getVideoLocations(db);
            db.setTransactionSuccessful();//end transaction
            db.endTransaction();
            db.close();

            final ImageButton refresh = (ImageButton) findViewById(R.id.btn_nav_impressum);
            refresh.setOnClickListener(this);

            final ImageButton search =(ImageButton) findViewById(R.id.btn_nav_locater);
            search.setOnClickListener(this);

            locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
            if (locationManager == null) {
                Toast.makeText(MyMapActivity.this,
                        "Location Manager Not Available", Toast.LENGTH_SHORT)
                        .show();
                return;
            }
            location = locationManager
                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if (location == null)
                location = locationManager
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            if (location != null) {

                animateMap(location);
                List<Overlay> listOfOverlays = mapView.getOverlays();
                listOfOverlays.clear();
                listOfOverlays.add(mapOverlay);
            }
            locationListener = new LocationListener() {
                @Override
                public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                }

                @Override
                public void onProviderEnabled(String arg0) {
                }

                @Override
                public void onProviderDisabled(String arg0) {
                }

                @Override
                public void onLocationChanged(Location l) {
                    location = l;
                    locationManager.removeUpdates(this);
                    if (l.getLatitude() == 0 || l.getLongitude() == 0) {
                    } else {
                        double lat = l.getLatitude();
                        double lng = l.getLongitude();
                        showAddress(lat,lng);
                    }
                }
            };
            if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
                locationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER, 1000, 10f, locationListener);
            locationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER, 1000, 10f, locationListener);
            locationtimer = new CountDownTimer(30000, 5000) {
                @Override
                public void onTick(long millisUntilFinished) {
                    if (location != null)
                        locationtimer.cancel();
                }

                @Override
                public void onFinish() {
                    if (location == null) {
                    }
                }
            };
            locationtimer.start();
        }

        public void animateMap(Location location){
        double lat = location.getLatitude();
            double lng = location.getLongitude();

            GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
            GeoPoint point2 = new GeoPoint((int) (lat2 * 1E6), (int) (lng2 * 1E6));
            mapController.animateTo(point, new Message());
            mapOverlay.setPointToDraw(point);

        }

        public MapView getMapView() {
            return this.mapView;
        }

        private void initComponents() {
            mapView = (MapView) findViewById(R.id.mapView);
            mapView.setBuiltInZoomControls(true);
            mapController = mapView.getController();
            mapController.setZoom(16);
        }

        @Override
        protected boolean isRouteDisplayed() {
            return false;
        }

        class MapOverlay extends Overlay {
            private GeoPoint pointToDraw;

            public void setPointToDraw(GeoPoint point) {
                pointToDraw = point;
            }

            public GeoPoint getPointToDraw() {
                return pointToDraw;
            }

            @Override
            public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
                    long when) {
                super.draw(canvas, mapView, shadow);

                Point screenPts = new Point();
                mapView.getProjection().toPixels(pointToDraw, screenPts);

                Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                        R.drawable.pin_normal);
                canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 24, null);
                return true;
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:33:53.743

如果您想在地图顶部添加图钉（或图像），添加 ItemizedOverlay 类会更好。
包 com.android.testandroidmap；

```
import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class HelloItemizedOverlay extends ItemizedOverlay {

private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
private Context mContext;

public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    // TODO Auto-generated constructor stub
    mContext = context;
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return mOverlays.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return mOverlays.size();
}

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

@Override
protected boolean onTap(int index) {
  OverlayItem item = mOverlays.get(index);
  AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
  dialog.setTitle(item.getTitle());
  dialog.setMessage(item.getSnippet());
  dialog.show();
  return true;
}
} 
```

我从[Android Developer Official Guide](http://developer.android.com/resources/tutorials/views/hello-mapview.html)获得此代码，并且在您的代码中使用此类，您可以添加叠加层。

添加您需要的所有东西（容器、图钉的图像和图钉+坐标叠加）

```
List<Overlay> mapOverlays = mapView.getOverlays();
Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this); 
```

为了让您的图标被之前的类识别，并实例化坐标，将坐标添加到overlayItem + 使用您之前制作的HelloItemizedOverlay 注册overlayItem

```
GeoPoint point = new GeoPoint(19240000,-99120000);
OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!");
itemizedoverlay.addOverlay(overlayitem); 
```

完成将叠加层添加到 mapOverlay 中，它是叠加层的集合。

```
mapOverlays.add(itemizedoverlay); 
```

这会在我的地图顶部显示一个图钉，可以通过您想要的任何图像对其进行自定义。如果您还想为每个位置使用不同的图像，只需用您的图像实例化另一个 Drawable 并将该 Drawable 注册到其他 HelloItemizedOverlay。

# android - 通过 Android 手机中的耳机插孔发送数据

> ID：10248649
> 
> 赞同：14
> 
> 时间：2012-04-20T14:58:12.693
> 
> 标签：android, headphones

我目前正在处理一个新项目，我必须通过具有特定电压的耳机插孔发送数据，然后我才能在该电压下工作。

所以在这里我需要根据我的数据来编程特定的电压。是否有可能我可以在 android 中访问耳机的输出电压，然后创建一个应用程序来控制该电压？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T19:48:46.943

这是处理此问题的 HackADay 文章。 [http://hackaday.com/2010/02/01/android-audio-serial-connection/](http://hackaday.com/2010/02/01/android-audio-serial-connection/) 它提供的工作代码比我想象的要简单得多。

虽然，就像其他人建议的那样，包括[这个](https://stackoverflow.com/a/7956506/374866)非常相似的 SO 帖子，您可能会更轻松地使用 USB 端口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T15:07:58.513

从 android 或 iphone 中的音频插孔捕获输入数据的最简单方法是通过录制 [http://developer.android.com/reference/android/media/AudioRecord.html](http://developer.android.com/reference/android/media/AudioRecord.html)

想像播放线性 pcm 音频文件类似的东西，我没有尝试过，但我相信它应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T15:00:32.207

我相信您将不得不深入研究汇编类型语言，但是，为什么要使用耳机插孔？据我了解，只有混响和声音可以通过耳机插孔传输。我相信通过Mini-USB端口输出电压会更可行。

我认为这个网站可能对我的方法有一些帮助：

[http://pinouts.ru/Slots/USB_pinout.shtml](http://pinouts.ru/Slots/USB_pinout.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-01T18:30:13.140

您可以尝试将数据转换为二进制，例如，当您听音乐时，您的耳机插孔会发生变化 +- 振动以发出声音，这样您就可以使 +- = 0 和 -+ = 1

# google-analytics - pageTracker 不是使用 Google Analytics 中基于 cookie 的排除定义的

> ID：10248655
> 
> 赞同：0
> 
> 时间：2012-04-20T14:58:32.220
> 
> 标签：google-analytics

按照本[指南](http://www.eugenoprea.com/filter-admin-traffic-in-google-analytics/)过滤 Google Analytics 中的管理员流量

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Excluding traffic by Cookie Content</title>
<meta name=.robots. content=.noindex. />
<!-- Google Analytics Code -->
<script type="text/javascript">// <![CDATA[
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']); //use real profile ID here
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackPageLoadTime']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
// ]]></script>
<!-- Google Analytics Code -->
</head>
<body onLoad="javascript:pageTracker._setVar('filter');">
<h1>Excluding traffic by Cookie Content</h1>
<p>This page will set a cookie in your browser that will help Google Analytics filter the traffic that comes from your computer when using this browser.</p>
<p>Once you have this setup, don't forget to set a filter in Google Analytics.</p>
<p>You will need to visit this page only once.</p>
<p>However, if you clear your browser cookies, reinstall the browser or operating system, make sure that you revisit this page, so the cookie will be set again.</p>
</body>
</html> 
```

我得到错误：`pageTracker is not defined`在 Firebug 中。我拼凑了一个变体，它没有给出 pageTracker 错误，但我不确定我做对了。

```
<html>
<head>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);//use real profile ID here
  _gaq.push(['_trackPageview']);

 (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();

 </script>
 <script type="text/javascript">
 try {
   var pageTracker = _gat._getTracker("UA-XXXXXXX-X");//use real profile ID here
   pageTracker._trackPageview();
   pageTracker._setVar('founders');
 } catch(err) {}
</script>
</head>
</html> 
```

我上面的内容正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:47:11.053

看起来您将传统风格分析 ( `pageTracker._setVar...`) 与异步风格分析 ( `_gaq.push...`) 混合在一起。

您可以使用以下命令获取跟踪器对象的副本`_gat._getTrackerByName()`——尝试在您的正文 onload 中使用它：

```
_gat._getTrackerByName()._setVar('filter'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T21:21:45.860

@mike 是对的，我最终使用了异步技术，因为它有效；）

变种 _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']); _gaq.push(['_trackPageview']); _gaq.push(['_setVar','trackme']​​);

(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga .async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'ht tp://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.我 nsertBefore(ga, s); })();

# asp.net-mvc-3 - 剑道网格管道

> ID：10248657
> 
> 赞同：1
> 
> 时间：2012-04-20T14:58:35.807
> 
> 标签：asp.net-mvc-3, kendo-ui

我正在尝试在我的 MVC3 应用程序中连接 Kendo UI 网格，但没有显示任何数据。我认为它应该很简单，但我没有看到它。这是我的代码：

看法：

```
@model List<pests.web.com.Models.Workitem>

@{
    ViewBag.Title = "Worklist";
    ViewBag.CurrentPage = "Worklist";
}

    <div id="grid"></div>

    <script type="text/javascript">
        $("#grid").kendoGrid({
            dataSource: {
                type: "json",
                transport: {
                    read: {
                        url: "Home/GetWorklist",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        data: {}
                    }
                },
                columns: [
            {
                field: "PartNumber",
                width: 90,
                title: "Part Number"
            },
            {
                field: "ProcurementCode",
                width: 90,
                title: "Procurement Code"
            },
            {
                width: 100,
                field: "Priority"
            },
            {
                field: "Status"
            }
            ]
            }
        });
    </script>

<script type="text/javascript" src="../../Scripts/people.js"></script>
<script type="text/javascript" src="../../Scripts/kendo.web.min.js"></script>
<script type="text/javascript" src="../../Scripts/console.js"></script>
<link href="../../Styles/kendo.common.min.css" rel="stylesheet" />
<link href="../../Styles/kendo.default.min.css" rel="stylesheet" /> 
```

布局页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Styles/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
</head>

    <body>

        @RenderBody()

    </body>
</html> 
```

我试图从视图中调用的控制器代码：

```
 public class HomeController : Controller
    {
        [HttpPost]
        public ActionResult GetWorklist()
        {
            List<Workitem> worklist = PestsLogic.GetWorklist();
            return View("Home", worklist);
        }
    } 
```

GetWorklist() 正在返回一些项目。它们是具有一些属性的简单对象。这是它：

```
public class Workitem
{
    public string PartNumber { get; set; }
    public string ProcurementCode { get; set; }
    public int Priority { get; set; }
    public string Status { get; set; }
} 
```

有什么明显的地方我搞错了吗？没有错误消息，只有一个空白页（虽然有标题）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:27:43.350

问题很简单，在我尝试使用剑道网格之前，我需要将 JS 文件的引用移动到。

# django - Django Forms - 包含数组的字段

> ID：10248659
> 
> 赞同：1
> 
> 时间：2012-04-20T14:58:37.890
> 
> 标签：django, django-forms, django-validation

我想成为一个值数组的表单中有几个字段。我怎样才能实现类似

```
categories['sale']['price']
categories['sale']['currency']
categories['sale']['frequency'] 
```

和

```
image[0]
image[1]
image[2] 
```

这些包含数组的字段将是包含常规字段的表单的一部分。如果可能，如何处理验证？

额外的问题：如果我自己有动态字段，我会使用 Formset 吗？

# python - Python - 删除字符串中的空格

> ID：10248660
> 
> 赞同：1
> 
> 时间：2012-04-20T14:58:37.957
> 
> 标签：python

因此，我想在语句末尾打印一个带有感叹号的字符串，但在最后一个单词和感叹号之间没有任何空格。例如：

```
name = raw_input('Insert your name: ') 
```

现在，我希望 python 打印这样的东西：

> 你的名字是约翰！

所以，我输入：

```
print 'Your name is', name, '!' 
```

它返回给我：

> 你的名字是约翰！

我想要做的是删除“约翰”和感叹号之间的空格。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-20T14:59:19.943

使用字符串格式：

```
print 'Your name is {}!'.format(name) 
```

或者：

```
print 'your name is %s!' %name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T01:46:51.083

使用`+`代替`,`

```
print 'Your name is' + name + '!' 
```

但是，为什么要删除它们之间的空间，这不是一个好主意。

# wpf - 带加速键的图像按钮

> ID：10248662
> 
> 赞同：0
> 
> 时间：2012-04-20T14:59:00.160
> 
> 标签：wpf, xaml, styles

我正在尝试使用下面的 xaml 来定义一个 Button，它将：

*   有图像
*   具有连接文本，部分来自外部 resx，部分来自 vm 属性
*   有一个基于文本第一个字母的加速键

下面的标记为我提供了图像和文本，但不能用作加速键（“_”不会隐藏并且 Alt-A 不起作用）。

如何修复标记以获取加速键功能？

* * *

当前标记和行为

```
<Style x:Key="AddNewItemButtonStyle" BasedOn="{StaticResource blueButtonStyle}" TargetType="{x:Type Button}">
    <Setter Property="Content">
        <Setter.Value>
            <StackPanel Orientation="Horizontal" >
                <Image Source="{resx:Resx ResxName=Presentation.Resources.MasterDetail, Key=bullet_add}" Stretch="Uniform" />
                <TextBlock Text="_"/>
                <TextBlock Text="{resx:Resx ResxName=Presentation.Resources.MasterDetail, Key=Subject_AddNew}" />
                <TextBlock Text=" "/>
                <TextBlock Text="{Binding Subject}" />
            </StackPanel>
        </Setter.Value>
    </Setter>
    <Setter Property="Command" Value="{Binding AddNewItemCommand}" />
</Style> 
```

![在此处输入图像描述](../Images/59340fff797e09c3e993d804b190cbd9.png)

# 更新 w/HB 的代码

什么都没有，只有图像： ![在此处输入图像描述](../Images/af7f140785032d976e44447917bcf223.png)

```
<Style x:Key="AddNewItemButtonStyle" BasedOn="{StaticResource blueButtonStyle}" TargetType="{x:Type Button}">
    <Setter Property="Content" >
        <Setter.Value>
            <MultiBinding StringFormat="_{0} {1} {2}">
                <Binding Source="{resx:Resx ResxName=Presentation.Resources.MasterDetail, Key=Add}"/>
                <Binding Source="{resx:Resx ResxName=Presentation.Resources.MasterDetail, Key=New}"/>
                <Binding Path="Subject"/>
            </MultiBinding>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <StackPanel Orientation="Horizontal">
                    <Image Source="{resx:Resx ResxName=Presentation.Resources.MasterDetail, Key=bullet_add}" Stretch="Uniform" />
                    <ContentPresenter/>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Command" Value="{Binding AddNewItemCommand}" />
</Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:40:55.507

这看起来像[ContentPresenter.RecognizesAccessKey](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.recognizesaccesskey.aspx)设置为`false`。

[另外，有人在这里](http://blog.smoura.com/wpf-styled-button-does-not-display-access-key/)谈论它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:55:37.410

您可以将 AccessText 与多重绑定一起使用

```
 <Style x:Key="AddNewItemButtonStyle" TargetType="{x:Type Button}">
        <Setter Property="Content">
            <Setter.Value>
                <StackPanel Orientation="Horizontal" >
                    <Image Source="{... your image}" Stretch="Uniform" />

                    <AccessText>
                        <AccessText.Text>
                            <MultiBinding StringFormat="{}_{0} {1}">
                                <Binding Source="{... resources}"/>
                                <Binding Source="{Binding Subject}"/>
                            </MultiBinding>
                        </AccessText.Text>
                    </AccessText>
                </StackPanel>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T18:35:01.913

尝试使用标签控件。它专为您有两个控件的情况而设计，其中一个控件具有用于触发第二个控件的访问键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T06:24:26.643

您需要将 设置`Content`为该*组合*文本，这在模板中无法完成。

```
 <!-- (Resources changed for testing) -->
<Style TargetType="Button">
    <Setter Property="Content">
        <Setter.Value>
            <MultiBinding StringFormat="_{0} {1}">
                <Binding Source="{StaticResource Res_Add}"/>
                <Binding Path="Subject"/>
            </MultiBinding>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <StackPanel Orientation="Horizontal">
                    <Image Source="{StaticResource Res_Image}" Stretch="Uniform"/>
                    <ContentPresenter/>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# c# - 错误：该进程无法访问文件“...”，因为它正被另一个进程使用

> ID：10248664
> 
> 赞同：1
> 
> 时间：2012-04-20T14:59:08.960
> 
> 标签：c#, file, directory

我有一个总是创建一个目录并将一些文件（图像）放入其中的函数。当代码第一次运行时，没有问题。第二次（总是），当我必须删除目录时出现错误（因为我想重新创建它以将图像放入其中）。错误是“该进程无法访问文件'...'，因为它正在被另一个进程使用”。访问此文件的唯一进程是此函数。这就像“不离开”文件的功能。

如何通过明确的解决方案解决此问题？

这是代码的一部分：

```
String strPath = Environment.CurrentDirectory.ToString() + "\\sessionPDF";
if (Directory.Exists(strPath))
      Directory.Delete(strPath, true); //Here I get the error
Directory.CreateDirectory(strPath);
//Then I put the files in the directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:05:11.207

如果您的代码或其他进程正在提供图像，它们将被无限期锁定。如果是 IIS，它们会在服务期间被锁定一小段时间。我不确定这一点，但如果资源管理器正在为图像创建拇指，它可能会在执行此操作时锁定文件。这可能是一瞬间，但如果您的代码和该进程发生冲突，这是一个竞争条件。

确保完成后释放锁。如果该类实现了 IDisposable，如果您没有对该对象进行大量工作，请在其周围包装一个 using 语句：

```
using (var Bitmap = ... || var Stream = ... || var File = ...) { ... } 
```

...这将在之后关闭对象并且文件不会被锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:01:49.780

只是在没有看到转储文件的代码的情况下在这里冒险，但是如果您正在使用`FileStreams`或`Bitmap`对象，我会仔细检查以确保您在运行第二种方法之前正确处理所有这些对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T15:01:48.270

在这种情况下，唯一明确的解决方案是跟踪谁在处理对目录的访问并通过释放该访问来修复错误。

如果处理访问的对象/资源是第 3 方，或者以任何方式无法更改或访问，那么是时候修改架构，以不同的方式处理 IO 访问了。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T15:02:47.103

听起来您在创建文件时没有释放文件句柄。尝试在 using 语句中执行所有 IO，这样文件将在您完成后自动释放。

[http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T15:07:21.593

*   我见过**病毒扫描程序**会扫描新文件并阻止文件被删除的情况，尽管这种可能性很小。

*   确保`.Dispose`所有`IDisposable`对象都没有，并确保没有任何内容更改您`Environment.CurrentDirectory`要删除的目录。

# github - 如何在 GitHub 中查看行注释？

> ID：10248666
> 
> 赞同：9
> 
> 时间：2012-04-20T14:59:12.570
> 
> 标签：github, pull-request

我整个上午都在 GitHub 上审查一个拉取请求，`Diff`在拉取请求页面的视图中的多行上写下详细的评论。

我逐行保存了每条评论，它们都出现在正确的位置。我离开了拉取请求页面，当我回到它时，我所有的逐行评论都不见了！

我不知道他们为什么消失了，他们去了哪里，其他用户是否可以看到他们而我看不到，这意味着什么，以及我是否可以相信自己继续使用 GitHub，或者我是否只需要返回远程协作的电话和传真！

我进行了一些网络搜索，例如“如何在 GitHub 中查看行评论”以获取有关此信息的信息，但找不到任何可以缓解我恐慌的东西。我将不胜感激建议和线索。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-07-26T20:10:06.697

这是谷歌中“无法查看 github 评论”的最佳结果。

如果您在这里是因为您留下了评论，并且可以看到您自己的评论，但其他人*看不到*，那么请检查`pending`您的评论上的黄色标签。在您完成审核过程并选择是否要请求更改之前，其他人无法看到您的评论。单击完整评论后，其他人将看到您的评论。

注意：我回答的问题与 OP 略有不同，但我感觉有很多其他有此问题的开发人员都遇到了这个 stackoverflow 问题。我只是希望能帮助他们。我自己也有这个问题，找不到比这个线程更相关的答案。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T15:09:37.963

行注释取决于所做的提交。

如果提出拉取请求的人重新确定了该提交，那么您不会查看您之前查看的内容。这是一个不同的提交，因此没有评论。

查看“[您的操作](https://github.com/dashboard/yours)”选项卡并在操作历史记录中找到您对该提交发表评论的行，单击该提交，您会看到评论仍然存在。
如果提交被重新设置，您将不会发现它曾经是（某个分支）而不是任何 repo 上的提交（如果它不在另一个分支上）。它只是由 git 和 github 缓存，直到垃圾收集器启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-28T19:40:34.127

旧答案对我不起作用，因为我现在看不到您的操作或公共操作。

在我开始输入我认为是我打开进行编辑的评论后，我的待处理评论消失了。它没有打开，我的一个键可能是快捷方式。我仍然可以看到完成我的评论的按钮（包括我的待处理评论的数量），但评论已经消失了。

我最终通过导航到拉取请求将它们取回，然后导航到我正在审查的提交。

# webtop - Driod Bionic 上的 Webtop2sd

> ID：10248669
> 
> 赞同：0
> 
> 时间：2012-04-20T14:59:25.137
> 
> 标签：webtop, bionic

我无法启动自定义 Webtop。当我启动 webtop 时，我只是获得了无法安装程序、运行 LXTerm 等的标准版本......

我正在运行一个根深蒂固的 Bionic 902 我已经应用了 HDMI webtop hack 我运行了 webtop2sd 我运行了自定义的 busybox 安装程序我应用了 e mbm.tar.bz2 补丁我重新运行了 webtop2sd 安装程序。

在任何这些步骤之后启动的 webtop 没有变化。

我对 webtop2sd 的诊断是：版本：2.0.1 安装可执行版本 webtop2sd/2.0.0 安装了自定义busybox：Y Webtop 配置器版本：33 当前安装的 webtop：webtop，mmcblk0p2

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:56:57.260

mbm的补丁只是在Webtop中启用了gnome终端，这样你就可以通过命令行访问其他东西了。试试 Ctrl-alt-t。这应该会调出 Ubuntu 内置的终端。你能链接 mbm.tar.bz2 吗？如果你有一个工作的，你似乎，我在任何地方都找不到一个！谢谢！

# jquery - 选择器中的JQuery“OR”？

> ID：10248671
> 
> 赞同：2
> 
> 时间：2012-04-20T14:59:33.220
> 
> 标签：jquery, jquery-ui, jquery-selectors

好的，所以我使用 JQuery 已经有一段时间了，我正在处理一些代码并尝试使它更简写（我正在处理的一个 JS 文件是 2000 多行 JQuery 用于一页：S）。

这是我的问题，是否可以做类似`Or`选择器的事情？就像是：

```
$("#element1Id and #element2Id") 
```

我知道我可以使用它进行模式匹配

```
$("[id^=element][id&=Id]") 
```

但问题是，我在页面上有很多东西可以匹配我的 ID 选择器，我一直想知道你是否可以做这个或那个，我在其他情况下需要它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T15:00:48.560

```
$('#element1Id, #element2Id') 
```

* * *

**[多重选择器](http://api.jquery.com/multiple-selector/)**

> **描述：**选择所有指定选择器的组合结果。
> 
> 您可以指定任意数量的选择器组合成一个结果。这种多表达式组合器是选择不同元素的有效方法。返回的 jQuery 对象中的 DOM 元素的顺序可能不相同，因为它们将按文档顺序排列。此组合器的替代方法是[.add()](http://api.jquery.com/add/) 方法。

# facebook - FB.ui apprequests 对话框 - 弹出窗口变为空白且未发送邀请

> ID：10248675
> 
> 赞同：5
> 
> 时间：2012-04-20T14:59:46.150
> 
> 标签：facebook, facebook-javascript-sdk, facebook-apps, apprequests, fb.ui

初始化代码：

```
window.fbAsyncInit = function() {
    var bheight = $(document).height() + 50;
    FB.init({
        appId: appid,
        frictionlessRequests : true,
        status: true,
        cookie: true,
        xfbml: true,
        oauth: true});
    FB.Canvas.setSize({ width:760,height:bheight });
};

// Load the SDK Asynchronously
(function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "//connect.facebook.net/en_US/all.js";
   ref.parentNode.insertBefore(js, ref);
 }(document)); 
```

使用 onclick 调用以下代码：

```
function sendRequestViaMultiFriendSelector(msg){
    FB.ui({      
        method: 'apprequests',
        message: msg
    });
} 
```

显示弹出窗口，用户可以选择一些朋友，但提交或取消后，窗口变为空白。弹出窗口仍然存在，但白色和空的。Firebug 中没有记录错误。

如果我添加一个回调函数，它永远不会到达。

我尝试添加一个自关闭的redirect_uri（redirect_uri：' [http://.../self_close.html](http://.../self_close.html) '），但在提交弹出窗口后重定向到self_close.html，即使该html的内容只是 `<script type="text/javascript">window.close(); </script>`弹出窗口也不会' t 关闭或将请求发送给选定的朋友。

奇怪的是，几周前这还有效，您可以选择一些朋友并向他们发送邀请，然后弹出窗口就会关闭。

我的应用程序在 localhost 中运行，处于沙盒模式，并且我尝试过邀请其他应用程序的管理员、测试用户、普通用户等。过去它曾经可以工作。

现在可能发生什么？

我检查过的类似问题：

*   [FB.ui 弹出窗口没有关闭](https://stackoverflow.com/questions/8497217/fb-ui-popup-window-doesnt-close)
*   [Facebook 应用程序请求对话框未发送请求](https://stackoverflow.com/questions/9154589/facebook-app-request-dialog-not-sending-request)
*   [http://facebook.stackoverflow.com/questions/4646441/how-to-close-a-facebook-sdk-dialog-opened-with-fb-ui](http://facebook.stackoverflow.com/questions/4646441/how-to-close-a-facebook-sdk-dialog-opened-with-fb-ui)

提前致谢！

更新

我添加了一个使用 method:feed 而不是 method:apprequests 的测试方法

```
function feed_test() {
    // calling the API ...
    var obj = {
      method: 'feed',
      name: 'Feed test',
      caption: 'Test',
      description: 'Test'
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  } 
```

当我通过 onclick 调用此方法时，会显示弹出窗口，我输入我的评论，提交它并且弹出窗口也变为空白。弹出窗口没有关闭，但帖子发布在我的墙上。

更新 2

我已经意识到，如果我在浏览器中打开应用程序，在 Facebook 之外（使用[http://facebookapp.localhost/](http://facebookapp.localhost/)）apprequest 工作正常，它会打开没有禁用地址栏的弹出窗口。当我尝试在 FB 内邀请朋友时，弹出窗口会显示一个灰色地址栏，其中包含以下内容：

```
https://www.facebook.com/dialog/apprequests?api_key=XXXXXXXXXX&app_id=XXXXXXXXXX&display=popup&frictionless=true&locale=en_US&message=XXXX&next=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D5%23cb%3Df2b013bbfaa712%26origin%3Dhttp%253A%252F%252Ffacebookapp.localhost%252Ff3267a4c771122%26domain%3Dfacebookapp.localhost%26relation%3Dopener%26frame%3Df3ad1f46b651196%26result%3D%2522xxRESULTTOKENxx%2522&sdk=joey 
```

我想知道在FB内外使用该应用程序有什么区别，可能有一些js问题。

固定的

今天我再次尝试，问题消失了。即使弹出窗口没有关闭并且没有调用回调函数，也会发送邀请。我的测试用户忘记检查他们是否得到它们......无论如何，神秘的错误，神秘的修复。

# android - init.rc 没有在闪存后第一次启动时启动我的服务

> ID：10248676
> 
> 赞同：5
> 
> 时间：2012-04-20T14:59:55.543
> 
> 标签：android, permissions, boot, init

我有一项服务，我试图从 Android 中的 init.rc 文件开始。它看起来像这样：

```
service myapp /data/local/myapp --daemon  
 class core  
 user root  
 group root  
 oneshot 
```

问题是“myapp”在重新启动后可以正常启动，但在刷新设备映像后第一次启动时就不行。

从日志中，我注意到在第一个引导日志中，我从 /dev/log/system 下的应用程序收到了一个日志（我编辑的内核代码触发，检查以验证我的应用程序是否存在）

但是我没有收到显示我正在尝试实际运行它的日志（正如 init.rc 文件应该做的那样）

重新启动后，我在 /dev/log/main ... 下收到两个日志（--verify 和执行）

# c - MPI 'rc' 变量和 MPI_Get_Count() 的原因

> ID：10248679
> 
> 赞同：0
> 
> 时间：2012-04-20T14:59:59.313
> 
> 标签：c, mpi, message-passing

在下面*的乒乓*程序中，`rc`变量有什么用？它不断更新，但从未使用过。
加上做`MPI_Get_Count()`什么？

* * *

```
#include "mpi.h" 
#include <stdio.h>

int main(int argc, char * argv []) 

int numtasks, rank, dest, source, rc, count, tag=1;  
char inmsg, outmsg; 
MPI_Status Stat ;

MPI_Init (&argc,&argv); 
MPI_Comm_size (MPI_COMM_WORLD, &numtasks); 
MPI_Comm_rank (MPI_COMM_WORLD, &rank);

if (rank == 0) {
  dest = source = 1;outmsg=’x’;
  rc = MPI_Send (&outmsg, 1, MPI_CHAR, dest, tag, MPI_COMM_WORLD);
  rc = MPI_Recv (&inmsg, 1, MPI_CHAR, source, tag, MPI_COMM_WORLD, &Stat);
} 
else if (rank == 1) {
  dest = source = 0;outmsg=’y’;
  rc = MPI_Recv (&inmsg, 1, MPI_CHAR, source, tag, MPI_COMM_WORLD, &Stat);
  rc = MPI_Send (&outmsg, 1, MPI_CHAR, dest, tag, MPI_COMM_WORLD);
}

rc = MPI_Get_count (&Stat, MPI_CHAR, &count);
printf("Task %d: Received %d char(s) from task %d with tag %d \n", rank, count, Stat.MPI_SOURCE,Stat.MPI_TAG); 
MPI_Finalize ();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:50:56.743

`MPI_Get_count`“输出”部分中的文档回答了这一点，该部分位于该链接页面的下方。

至于`rc`，这是我能提供的最好的解释，无法访问此代码的作者或任何相关注释。C 绑定中的所有 MPI 例程都返回错误代码。一些编译器会检查是否有人在地板上丢弃返回值，因为这可能表明代码中有错误，并在他们看到发生的情况下生成警告。因此，为了防止出现这些警告，此代码将返回值分配给变量`rc`。

也就是说，许多编译器也会警告设置一个从未使用过的变量，这里就是这种情况。告诉编译器“是的，我知道我忽略了这个返回值，别管我”的成语是`(void)function_call(foo, bar, baz);`（即将返回值转换为`void`）。这在调用真正应该检查返回值的函数时最常见，例如`write()`. 在每个 MPI 调用上写它而不是消除一个有问题的警告会相当难看。

# matlab - matlab中的xpath xml文件

> ID：10248681
> 
> 赞同：0
> 
> 时间：2012-04-20T15:00:10.287
> 
> 标签：matlab

是否可以使用 Matlab 中的 xpath 读取、比较和查找 xml 文件中的特定字符串？我没有找到任何文档。

有人可以给我一个例子吗？

```
<?xml version="1.0" encoding="UTF-8"?> 
<address xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation='test.xsd'>
 <lists name="myState">
         <description name="-temp">-20</description>
         <description name="localization">north</description>  
         <description name="-state">false</description> 
  </lists>
</address>  
<language language="english" name=""> 
     <description name="population">5000</description> 
</language> 
```

在这里访问 description name="localization"> ，我做了：

```
docNode = xmlread(myXMLFILE);
factory = XPathFactory.newInstance;
xpath = factory.newXPath;

% compile and evaluate the XPath Expression
 expression = xpath.compile(adress/lists/description')
description = expression.evaluate(docNode, XPathConstants.NODE);
descriptionValue = phoneNumberNode.getTextContent  % this gives me -20 
```

我怎样才能得到价值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:38:37.537

Have you tried Google? One of the first link gave me a good example of using XPath on FileExchange:

[Using XPath from MATLAB](http://www.mathworks.com/matlabcentral/fileexchange/31382-using-xpath-from-matlab)

> An XPath package started shipping as part of Java 5, so we can use it from MATLAB. This is a simple example.
> 
> [The Java XPath API](http://www.ibm.com/developerworks/xml/library/x-javaxpathapi.html) tutorial on ibm.com is a good introduction to XPath in Java.

```
% Import the XPath classes
import javax.xml.xpath.*

% Construct the DOM.
doc = xmlread(which('demos/demos.xml'));

% Create an XPath expression.
factory = XPathFactory.newInstance;
xpath = factory.newXPath;
expression = xpath.compile('//demosection/label');

% Apply the expression to the DOM.
nodeList = expression.evaluate(doc,XPathConstants.NODESET);

% Iterate through the nodes that are returned.
for i = 1:nodeList.getLength
    node = nodeList.item(i-1);
    disp(char(node.getFirstChild.getNodeValue))
end 
```

* * *

Another good article is in Mike's blog - [XML and MATLAB: Navigating a Tree](http://blogs.mathworks.com/desktop/2010/11/01/xml-and-matlab-navigating-a-tree/). It has a part specifically on using XPath.

# wcf - 如何使用 Silverlight 正确处理 WCF 错误？

> ID：10248682
> 
> 赞同：1
> 
> 时间：2012-04-20T15:00:16.697
> 
> 标签：wcf, silverlight, wcf-ria-services, silverlight-5.0

无论我多么努力，我似乎​​都无法在 Silverlight 中处理 WCF 错误。事实上，错误似乎永远不会离开服务器！

例如，当我调试它时，它会停在我抛出 FaultException 说它没有被处理的那一行：

```
[SilverlightFaultBehavior]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class StoreService : IStoreContract
{
    public System.Collections.Generic.List<string> GetStoreDesignNames()
    {
        try
        {
            StoreDataContext swdc = new StoreDataContext();
            var query = from storeDesign in swdc.StoreDesignDBs select storeDesign.Name;
            return query.ToList();
        }
        catch (System.Data.SqlClient.SqlException sqlExcept)
        {
            throw new FaultException<SqlFault>(new SqlFault() { Message = sqlExcept.Message });
        }
    }
} 
```

实现此方法的类派生自合约接口：

```
[ServiceContract(Namespace = "Store")]
public interface IStoreContract
{
    /// <summary>
    /// Obtain the list of store design names.
    /// </summary>
    [OperationContract,
     FaultContract(typeof(SqlFault))]
    List<String> GetStoreDesignNames();
} 
```

SqlFault 类的定义如下：

```
public class SqlFault
{
    public String Message { get; set; }
} 
```

在客户端，我按如下方式处理错误：

```
 // swc is the client
        swc.GetStoreDesignNamesCompleted += new EventHandler<ServiceReference.GetStoreDesignNamesCompletedEventArgs>((obj, evt) =>
        {
            if (evt.Error == null)
            {
                // In case of success
                MessageBox.Show(evt.Result.First());
            }
            else if (evt.Error is FaultException<ServiceReference.SqlFault>)
            {
                FaultException<ServiceReference.SqlFault> fault = evt.Error as FaultException<ServiceReference.SqlFault>;
                Dispatcher.BeginInvoke(() =>
                {
                    ErrorWindow ew = new ErrorWindow(fault.Detail.Message, "No details");
                    ew.Show();
                });
            }
        });
        swc.GetStoreDesignNamesAsync(); 
```

我试图将 [SilverlightFaultBehavior] 属性放在界面上，但无济于事。即使我没有界面，我仍然有这个错误。

我还尝试在 web.config 中使用行为扩展，如此处[所述，](http://msdn.microsoft.com/en-us/library/ee844556%28v=vs.95%29.aspx)但我收到警告说扩展无效。

如何正确处理 Silverlight 中的 WCF 错误？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T01:43:40.507

我没有使用过 WCF（一直在使用 WCF RIA 服务），但不久前我确实看到了这篇文章。

[获得比“找不到服务器”更好的东西。来自 Silverlight 中的 WCF](http://mattduffield.wordpress.com/2011/04/06/getting-something-better-than-server-not-found-from-wcf-in-silverlight/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:40:13.937

在与这个斗争了几个小时之后，我终于一起破解了一些有效的东西。这真的是一个可怕的 hack，我更愿意使用 BehaviorExtension 来完成这项任务。诀窍是在 WCF 方法的主体中手动设置 HTTP 状态代码，如下所示：

```
 public System.Collections.Generic.List<string> GetStoreDesignNames()
    {
        try
        {
            StoreDataContext swdc = new StoreDataContext();
            var query = from storeDesign in swdc.StoreDesignDBs select storeDesign.Name;
            return query.ToList();
        }
        catch (System.Data.SqlClient.SqlException sqlExcept)
        {
            System.ServiceModel.Web.WebOperationContext ctx = System.ServiceModel.Web.WebOperationContext.Current;
            ctx.OutgoingResponse.StatusCode = System.Net.HttpStatusCode.OK;
            throw new FaultException<SqlFault>(new SqlFault() { Message = sqlExcept.Message });
        }
    } 
```

然后错误消息正确显示在客户端。如果有人有比这更好的解决方案，我想听听。

# asp.net - 如何自动清除 zedgraph 图像的临时目录？

> ID：10248684
> 
> 赞同：0
> 
> 时间：2012-04-20T15:00:25.263
> 
> 标签：asp.net, zedgraph

我们使用 zedgraph webcontrols 在我们的 asp.net (vb) web 应用程序中绘制图表。生成图像的临时目录已满，现在已达到 2GB+。

有没有办法自动清除这个目录，还是我必须实施一个讨厌的`HttpContext.Cache expired callback`黑客来从那里删除旧文件？

谢谢，弗洛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T20:45:14.383

因此，我没有亲自动手编辑和重新编译 zedgraphweb [http://sourceforge.net/projects/zedgraph](http://sourceforge.net/projects/zedgraph)，而是选择了一种更常见的方法，自己处理大量文件。我正在使用 Cache 的 CacheItemRemovedCallback 在 Web 应用程序中执行代码，例如使用计时器。此外，此代码会重新填充缓存项，因此会更新循环。瞧：**在 Web 应用程序中每 5 分钟清理一次磁盘。**

```
Public Module Maintenance
    Private Const triggerKey As String = "MaintenanceDiskCleaner"
    Friend Sub Run()
        Try
            SyncLock triggerKey
                If Hosting.HostingEnvironment.Cache(triggerKey) Is Nothing Then
                    Hosting.HostingEnvironment.Cache.Add(triggerKey, _
                                                  DateTime.Now, _
                                                  Nothing, _
                                                  DateTime.Now.AddMinutes(5), _
                                                  Cache.NoSlidingExpiration, _
                                                  CacheItemPriority.Default, _
                                                  AddressOf CacheItemRemovedCallback)
                End If
            End SyncLock
        Catch ex As Exception

        End Try
    End Sub

    Public Sub CacheItemRemovedCallback(ByVal key As String, ByVal value As Object, ByVal reason As CacheItemRemovedReason)
        Try
            Dim dir As String = Hosting.HostingEnvironment.MapPath("~\ZedGraphImages")
            If Directory.Exists(dir) Then

                SyncLock triggerKey
                    Dim di As DirectoryInfo = New DirectoryInfo(dir)
                    Dim files As FileSystemInfo() = di.GetFileSystemInfos()
                    For Each file As FileSystemInfo In From f In files Where f.CreationTime < CType(value, DateTime)
                        Try
                            WebTools.Files.TryDelete(file.Name, 50)
                        Catch ex As Exception

                        End Try
                    Next
                End SyncLock

            End If
            Run()
        Catch ex As Exception

        End Try
    End Sub
End Module 
```

# javascript - 创建仅刷新网页上 HTML 表格中的信息的 HTML 刷新按钮

> ID：10248686
> 
> 赞同：0
> 
> 时间：2012-04-20T15:00:31.450
> 
> 标签：javascript, html, sorting, knockout.js

* * *

更新：对不起，忘记包含一些代码（掌心）。我将它包含在提供的初始代码中，所以一切都会很清楚。我对这些东西真的很陌生，所以请原谅我现在没有时间学习 jsfiddle（虽然我知道它是什么并且做了什么）。

我已经发现每次表格更新时排序切换的问题。我放入代码中的sorting() 函数是新的并且调用method.sorting(); getEvents(method) 函数内部解决了这个问题。但是，我仍然坚持刷新按钮的概念。

我注意到但还没有弄清楚如何解决的另一个问题是，当我加载页面时，我必须等待第一个 setInterval 开始，直到表格填充。我该如何解决这个问题，以便在页面最初加载时，它会立即加载数据，而无需在 setInterval 内等待指定的时间？

最后一个问题：当表自动更新时，使用 addRow() 函数添加的任何行都会消失，因为它们不是来自服务器的信息的一部分（不，我不能将行填充到服务器）; 如何使自动更新保留添加的行，而不必将添加的行更新到服务器？

* * *

`$.getJSON(http://.....)`我有一个 HTML 表，它使用 knockoutjs 使用该方法从服务器动态地将数据绑定到列中。我希望能够创建一个刷新按钮来刷新/更新表格 - 并且只有表格（IE 不刷新整个页面）。

就像现在一样，表格使用`setInterval()`js 文件底部的函数进行更新，但会不断切换列排序。我不知道如何阻止这种情况。

这是此操作所需的代码片段：

HTML 文件：

* * *

```
<table border="6" id="widget"><thead>
    <tr>
        <th><a href=#" data-bind="click: SortByTimeObserved">TimeObserved</a></th>
    </tr></thead>

    <tbody data-bind="foreach: rows">
        <td><input data-bind="value: TimeObserved, valueUpdate: 'change' " /></td>
    </tbody>
</table>
<div>
    <button date-bind="click: addRow, enable: rows()">Add Row</button>
</div>
<script src="TableViewModel.js" type="text/javascript"></script> 
```

* * *

继承人的 javascript 视图模型文件：

* * *

```
function Event(TimeObserved){
    var self = this;
    self.TimeObserved = TimeObserved;
}

function TableViewModel(){
    var self = this;
    self.sortColumn = ko.observable("TimeObserved");
    self.sortAscending = ko.observable(true);

    self.addRow = function(){
        self.rows.push(new Event(""));
    }        

    self.SortByTimeObserved(){
        if(self.sortColumn == "TimeObserved")
            self.sortAscending = !self.sortAscending;
        else{
            self.sortColumn = "TimeObserved";
            self.sortAscending = true;
        }
        self.rows.sort(function(a,b){
            if(self.sortAscending == true)
                for(self.TimeObserved in self.rows)
                    return a.TimeObserved > b.TimeObserved ? -1 : 1;
             else
                 return a.TimeObserved < b.TimeObserved ? -1 : 1;
        });
    }
    self.sorting = function(){
        if(self.sortColumn() = "TimeObserved"){
            self.rows.sort(function(a,b){
                if(self.sortAscending() == true)
                  for(self.TimeObserved in self.rows)
                    return a.TimeObserved > b.TimeObserved ? 1 : a.TimeObserved < b.TimeObserved ? -1 : 0;
                else
                    return a.TimeObserved < b.TimeObserved ? 1 : a.TimeObserved > b.TimeObserved ? -1 : 0;
            }
        }
}
//Access the server and pulls the info from it.  I also apply my sorting() method to initially sort the info here.
function getEvents(model){
    $.getJSON("http://mywebpage.com", 
        function (data){
            model.rows([]);
            $.each(data.d, function(i,item){
                hendleEvent(item)
            });
            model.sorting();
        }
    );
}

//Populates the rows of the table with the info from the server I.E. item."infoIwant"
function handleEvent(item){
    var newEvent = new Event(item.TimeObserved);
    this.Model.rows.push(newEvent);    
}

this.Model = new TableViewModel();
var eventInterval = setInterval(function(){
    getEvents(this.Model);
    }, 5000);
ko.applyBindings(this.Model); 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:31:06.833

我通过使表格本身动态更新而不必依赖按钮来解决它。无论如何，该信息应该是只读的，因此编辑不是要考虑的因素。我也不知何故让它不撤消当前激活的排序。

通过将其添加到视图模型中，我将表设置为在给定的间隔时间后更新：

```
var eventInterval = setInterval(function(){
    getEvents(this.Model);
), 5000); //<-- in milliseconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:09:25.580

您应该看一下淘汰赛映射插件：

[http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

- 更新

还可以看看了解 MVVM 模式

[http://addyosmani.com/blog/understanding-mvvm-a-guide-for-javascript-developers/](http://addyosmani.com/blog/understanding-mvvm-a-guide-for-javascript-developers/)

# objective-c - 我是否需要删除启用 ARC 的项目中的所有内存管理方法？

> ID：10248689
> 
> 赞同：0
> 
> 时间：2012-04-20T15:00:37.657
> 
> 标签：objective-c, ios, xcode, automatic-ref-counting

我的应用程序从一开始就在禁用 ARC 的情况下开发，现在我决定利用 ARC 技术，当我尝试将项目转换为 ARC 时，无论是否存在发布自动释放方法，我都会遇到错误，这是否意味着我必须深入研究我的项目并摆脱与内存管理相关的任何方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:02:33.563

是的，您不能在 ARC 代码中使用`release`、`retain`或。`autorelease`如果太麻烦，您可以按此处所述在每个文件的基础上[禁用 ARC：如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:47:23.700

网上有很多很好的参考资料处理自动引用计数，例如

[http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

或者

[http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)

# javascript - jQuery 媒体播放器控件

> ID：10248698
> 
> 赞同：1
> 
> 时间：2012-04-20T15:01:13.933
> 
> 标签：javascript, jquery-ui

我有一些控制媒体播放器对象的javascript函数（如volumeUp（），play（），nextSong（）等......）。我想为这些功能创建一些 jQuery 控件 - 像滑块这样的控件来控制音量/时间、播放/暂停按钮等等。

如何使用 JQuery 设计或创建此类控件？我尝试了内置的 jQuery UI 滑块/按钮，但我真的不知道如何设计它（我知道 css）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:03:41.707

您可以从[http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)设计它或从这里下载单个主题[http://jqueryui.com/download](http://jqueryui.com/download)

# ios - 删除从以前的应用程序版本创建的本地通知

> ID：10248699
> 
> 赞同：0
> 
> 时间：2012-04-20T15:01:16.463
> 
> 标签：ios, uilocalnotification

我需要创建我的应用程序的新版本，但删除用户能够创建本地通知的部分。 `UILocalNotification`

我的疑问是，如果用户创建了重复的事件，通知中心仍然会启动警报。

我可以打电话`cancelAllLocalNotifications`确保之前创建的每个通知都会被删除吗？有没有更好的方法来获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:04:37.340

是的，您可以在应用首次启动时致电`cancelAllLocalNotifications`取消所有预定的通知。当然，您必须确定您的应用程序是否首次启动。

# asp.net-mvc-3 - 自定义错误适用于 HttpCode 403 但不适用于 500？

> ID：10248700
> 
> 赞同：5
> 
> 时间：2012-04-20T15:01:31.593
> 
> 标签：asp.net-mvc-3, custom-errors

我在我的 MVC3 应用程序中实现自定义错误，它在 web.config 中打开：

```
<customErrors mode="On">
  <error statusCode="403" redirect="/Errors/Http403" />
  <error statusCode="500" redirect="/Errors/Http500" />
</customErrors> 
```

我的控制器非常简单，对应正确命名的视图：

```
public class ErrorsController : Controller
{
    public ActionResult Http403()
    {
        return View("Http403");
    }

    public ActionResult Http500()
    {
        return View("Http500");
    }
} 
```

为了测试，我在另一个控制器中抛出异常：

```
public class ThrowingController : Controller
{
    public ActionResult NotAuthorised()
    {
        throw new HttpException(403, "");
    }

    public ActionResult ServerError()
    {
        throw new HttpException(500, "");
    }
} 
```

403 有效 - 我被重定向到我的自定义“/Errors/Http403”。

500 不起作用 - 我被重定向到共享文件夹中的默认错误页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T13:13:48.417

除了标准的 customErros 配置外，我还使用 httpErrors 启动并运行了 500 个错误：

```
 <system.webServer>
    <httpErrors errorMode="Custom" existingResponse="Replace">
      <remove statusCode="403" subStatusCode="-1" />
      <error statusCode="403" path="/Errors/Http403" responseMode="ExecuteURL" />
      <remove statusCode="500" subStatusCode="-1" />
      <error statusCode="500" path="/Errors/Http500" responseMode="ExecuteURL" />
    </httpErrors>
  </system.webServer> 
```

并从 global.asax 中*删除此行*

```
GlobalFilters.Filters.Add(new HandleErrorAttribute()); 
```

但是它并不完美，因为我正在尝试检索始终为空的最后一个错误。

```
Server.GetLastError() 
```

请参阅[https://stackoverflow.com/a/7499406/1048369](https://stackoverflow.com/a/7499406/1048369)，了解我发现的关于 MVC3 中自定义错误的最全面的文章，这对我很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:09:04.813

我遇到了同样的问题，在这种情况下，我直接在 Global.asax 中捕获了异常：

```
protected void Application_Error(object sender, EventArgs e)
        {
            Exception exception = Server.GetLastError();

            Response.Clear();

            HttpException httpException = exception as HttpException;

            var code = httpException == null ? 500 : httpException.GetHttpCode();

            // Log the exception.
            if (code == 500)
                logError.Error(exception);

            Server.ClearError();

            Context.Items["error"] = code;

            RouteData routeData = new RouteData();
            routeData.Values.Add("controller", "Error");
            routeData.Values.Add("action", "Index");
            routeData.Values.Add("code", code);

            IController errorController = new ErrorController();
            errorController.Execute(new RequestContext(new HttpContextWrapper(Context), routeData));

        } 
```

重定向到我的自定义错误 500：/Error/Index?code=500

# android - [Android]无需root手机即可确定wifi绑定设备的发射功率

> ID：10248702
> 
> 赞同：1
> 
> 时间：2012-04-20T15:01:33.870
> 
> 标签：android, wifi, transmission, iwconfig

我需要在 ad-hoc 模式下确定 aa tethered wifi 网络的传输功率值。

目前Android中的wifi tether应用主要是使用**iwconfig**来配置tethering，这是一个非官方的API。

使用此 API 可以获得传输功率，以及使用**iwconfig**配置系留的妻子网络。

但是，它需要手机植根，这并不适用于每部手机。

由于我对开发 wifi 系绳应用程序不感兴趣，我所需要的只是能够检查设备是否已经系绳时的发射功率。所以，我不在乎这个值是制造商给出的还是程序化的。

有没有人知道在没有手机植根的情况下做到这一点的方法？

# c# - 使用 CF 3.5 添加根证书

> ID：10248704
> 
> 赞同：2
> 
> 时间：2012-04-20T15:01:40.943
> 
> 标签：c#, compact-framework, x509certificate

我在将我的证书文件添加到 windows mobile x509 存储时遇到问题。我使用以下测试程序：

```
byte[] certifictateData = FileToByteArray(appPath + "cert.cer");
X509Certificate certificate = new X509Certificate(certifictateData);

X509Store store = new X509Store(StoreName.Root, StoreLocation.CurrentUser);
store.Open(OpenFlags.ReadWrite);
int i = store.Certificates.Add(certificate);
store.Close(); 
```

设备上安装了 28 个根证书。添加我的后，我收到 29 作为值。但是当我尝试打开 store.Certificates[28] 时，即使关闭后证书存储中也没有条目，也会出现 OutOfRangeException。

当我在移动浏览器中打开 cert.cer 文件时，它会在没有任何消息的情况下添加。

我能做些什么？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:30:03.693

这也是我对这个命名空间的体验。无论如何，您在小型设备框架方面做得很好。这是我快速且便宜的解决方案；）

```
ProcessStartInfo psi = new ProcessStartInfo(appPath + "cert.cer", "");
psi.UseShellExecute = true;
Process.Start(psi); 
```

唯一的缺点是会弹出一条消息并显示导入结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:19:34.550

我的经验是 Compact Framework 中的 X509Store（真的是整个命名空间）[完全没用](http://blog.opennetcf.com/ctacke/2011/11/22/X509CertificatesCompactFrameworkWTF.aspx)。我最终实现了用于导入证书和私钥的整套 API。我将这项工作放入[最新的 SDF](http://www.opennetcf.com/Products/SmartDeviceFramework.aspx)中，尽管 IIRC 有人在该代码中发现了一个错误，我在内部修复了该错误，但我不记得该修复是否已公开传播。

# c - 矩阵乘法时出现分段错误，c

> ID：10248705
> 
> 赞同：0
> 
> 时间：2012-04-20T15:01:43.933
> 
> 标签：c, matrix, segmentation-fault, malloc

尝试运行此代码时遇到分段错误问题：

```
#include<stdio.h>
#include<stdlib.h>

int mallocMatrix (int ***matrix, int A, int B) {
    int i;
    *matrix=(int**)malloc(sizeof(int*)*B);
        for(i=0;i<A;i++)
            (*matrix)[i]=(int*)malloc(sizeof(int)*A);
};

void fillMatrix (int ***matrix, int A, int B) {
    int i, j;
    for(i=0;i<B;i++)
    {
        for(j=0;j<A;j++)
            {
                 printf("Matrix[%d][%d]: ",i+1,j+1);
                 scanf("%d", &(*matrix)[i][j]);
            }
        }
};

void displayMatrix (int ***matrix, int A, int B) {
    int i, j;
    printf ("\n");
    for(i=0;i<B;i++)
    {
        for(j=0;j<A;j++)
        {
            printf ("%d ", (*matrix)[i][j]);
        }
    printf ("\n");
    }
};

int main(){
    int **matrix;
    int **matrix_two;
    int **matrix_three;
    int a, b, c, d;

    printf ("[1st matrix] number of columns:");
    scanf ("%d", &a);
    printf ("[1st matrix] number of rows:");
    scanf ("%d", &b);

        mallocMatrix (&matrix, a, b);
        fillMatrix (&matrix, a, b);

    printf ("[2nd matrix] number of columns:");
    scanf ("%d", &c);
    printf ("[2nd matrix] number of rows:");
    scanf ("%d", &d);

        if (a==d)
        {
            mallocMatrix (&matrix_two, c, d);
            fillMatrix (&matrix_two, c, d);
        }
        else
        {
            printf ("The number of columns of the 1st. matrix must be equal to the number of rows of the 2nd. matrix");
            return -1;
        }

    displayMatrix (&matrix, a, b);
    displayMatrix (&matrix_two, c, d);

    mallocMatrix (&matrix_three, b, c);

    /* multiplication */

    int i, j, k;
    for(i = 0; i < b; i++)
    {
        for(j = 0; j < c; j++)
        {
            for(k = 0; k < b; k++)
            {
                matrix_three[i][j] = matrix_three[i][j] + matrix[i][k] * matrix_two[k][j];
            }
        }
    }

    /* end of multiplication */

    displayMatrix (&matrix_three, b, c);
} 
```

*代码签名/乘法*/后弹出问题。例如： - 第一个矩阵是 2x2， - 第二个 3x2。我期望结果为 3x2 矩阵，但代码在尝试到达第三列时给了我 2x2 矩阵和分段错误。请指出错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:33:20.503

我想我在 mallocMatrix 中发现了你的错误：

```
 for(i=0;i<A;i++)
            (*matrix)[i]=(int*)malloc(sizeof(int)*A); 
```

循环条件是错误的，你说 B 是行数，所以对于每一行你必须分配一个 A 元素数组，所以循环应该是：

```
for(i=0;i<B;i++)
                (*matrix)[i]=(int*)malloc(sizeof(int)*A); 
```

因此，当您尝试 3x2 时，第三行永远不会初始化，因为您的循环仅迭代 2 次，并且当您尝试填充最后一行时崩溃

# xcode - 使用 setMovie 将后续视频加载到 QTMovieView 中：不起作用

> ID：10248707
> 
> 赞同：0
> 
> 时间：2012-04-20T15:01:45.950
> 
> 标签：xcode, cocoa, qtkit

我正在开发一个程序，该程序具有一组严格的视频录制“阶段”……可以将其想象成一个视频展台。我在 OSX Lion 上运行程序，完全用 Cocoa 编码。

“阶段”如下：

1.  欢迎屏幕
2.  开始录音
3.  播放视频
4.  确认保存/删除

阶段 1、2 和 4 每次都能完美运行。第 3 阶段第一次完美运行。

在第二次或更晚的时间通过该过程，视频播放（由`QTMovieView`嵌入在 NSPanel 中完成）仍设置为来自第一次运行的视频。

我设置了两种方法，一种是通过按下按钮激活，另一种是通过程序中的其他代码激活。这两种方法都有效，我很肯定。我不知道为什么`[mPlaybackView setMovie: lclMov]`不设置新电影...

澄清（基于下面的代码）：

*   在开始播放之前，我已经查看以确保文件`TEMP_STORE`确实存在（并且是新文件，而不是旧文件）
*   我也尝试过替换`[QTMovie movieWithFile:TEMP_STORE error:&err];`（`[[QTMovie alloc] initWithFile:TEMP_STORE error:&err]`根据我在某处网上看到的建议）
*   该文件`TEMP_STORE`是我程序中另一个代码段记录的“.mov”文件

任何和所有的帮助表示赞赏！！！

## 代码

```
- (IBAction) startPlayback: (id) sender {
    NSError *err;
    QTMovie *lclMov = [QTMovie movieWithFile:TEMP_STORE error:&err];

    [instrPlayback orderOut:nil];

    if (err != nil) {
        [errorMessage setStringValue:[NSString stringWithFormat:@"%@", [err localizedDescription]]];
        [errorDialog makeKeyAndOrderFront:nil];
    } else {
        [self writeString: CMD_PROCEED];

        [mPlaybackView setMovie:lclMov];
        [mPlaybackView gotoBeginning:nil];
        [playbackDialog makeKeyAndOrderFront:nil];
    }
}

- (void) stopPlayback {
    QTMovie *lclMov = [mPlaybackView movie];
    if ([lclMov canUpdateMovieFile]) {
        if (![lclMov updateMovieFile]) {
            [errorMessage setStringValue:@"Error Applying Updates to MOV File.\nAsk Lab Attendant for Help."];
            [errorDialog makeKeyAndOrderFront:nil];
            }
        }

        [playbackDialog orderOut:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:46:59.967

对于将来遇到此问题的人，这是我的解决方案：

我想我有点愚蠢......但我知道这与从内存中释放视频有关。我得到的解决方案是导入 QuickTime 框架（我不知道它与 QTKit 框架不同）并`DisposeMovie()`使用`Movies.h`

这么简单的解决方案，却给我带来了很多麻烦。

祝所有可能遇到同样问题的开发人员好运:)

# jquery - 在带有中继器控件的 ASP .NET 页面中使用 JQuery 进行展开/折叠

> ID：10248710
> 
> 赞同：1
> 
> 时间：2012-04-20T15:01:51.727
> 
> 标签：jquery, asp.net, html, css, .net

我的 ASP .NET 页面包含一个转发器控件。这是感兴趣的 HTML。请注意，我们在这里有一些自定义控件，但我认为这对我的问题并不重要。

```
<table style="border: 0px;" cellpadding="0" cellspacing="0">
   <tr>
      <td style="width: 150px;">
     <b>Topic</b>
      </td>
      <td style="width: 250px; padding-right:10px;">
     <b>Score</b>
      </td>
   </tr>
   <asp:Repeater ID="_prvCtlRepeaterSurveyTopics" runat="server">
      <ItemTemplate>
    <tr>
      <td style="width: 35%;">
         <div id="ClickToExplandDiv">
        <img id="_prvCtlImagePlusMinus" runat="server" alt="Expand/Collapse" src="" class="PlusMinus" />
        <customtagprefix:ctlEncodedLabel id="_prvCtlEncodedLabelTopicText" runat="server" CssClass="ECLink" />
        </div>
      </td>
      <td style="width: 30%;">
         <img id="_prvCtlImageTopic" runat="server" src="" alt="Score" />
      </td>
      <td style="width: 35%; white-space: nowrap;">
         <customtagprefix:ctlEncodedLabel id="_prvCtlLabelTopic" runat="server" />
      </td>
    </tr>
    <tr>
      <td style="padding: 3px 15px; width: 400px;" colspan="3">
        <div id="ExplandODiv">
        <customtagprefix:ctlRoundedGrayHeader id="_prvCtlRoundedGrayHeaderCF" runat="server" />
        <customtagprefix:ctlSummeryResultsList ID="_prvCtlSummaryResultsList" runat="server" />
        <customtagprefix:ctlRoundedGrayFooter id="_prvCtlRoundedGrayFooterCF" runat="server"/>
        </div>
      </td>
    </tr>                           
      </ItemTemplate>
   </asp:Repeater>
</table> 
```

我希望能够单击此代码创建的 DIV：

```
<div id="ClickToExplandDiv">
   <img id="_prvCtlImagePlusMinus" runat="server" alt="Expand/Collapse" src="" class="PlusMinus" />
   <customtagprefix:ctlEncodedLabel id="_prvCtlEncodedLabelTopicText" runat="server" CssClass="ECLink" />
</div> 
```

并使此段中显示的信息展开或折叠：

```
 <td style="padding: 3px 15px; width: 400px;" colspan="3">
    <div id="ExplandODiv">
    <ayco:ctlRoundedGrayHeader id="_prvCtlRoundedGrayHeaderCF" runat="server" />
    <ayco:ctlSummeryResultsList ID="_prvCtlSummaryResultsList" runat="server" />
    <ayco:ctlRoundedGrayFooter id="_prvCtlRoundedGrayFooterCF" runat="server"/>
    </div>
  </td> 
```

为此，我对 JQuery 不知所措。现在，我有以下成功隐藏了我最初想要隐藏的所有 DIV，然后只打开第一个隐藏的 DIV，无论我单击哪个展开链接 DIV。

```
<script type="text/javascript">
    var isInitialized = false;
    $(document).ready(function() {

        if (!isInitialized) {
            $('[id=ExplandODiv]').hide();
            isInitialized = true;
        }

        $('div[id=ClickToExplandDiv]').click(function() {
            $('#ExplandODiv:first-child').toggle();
        });
    });   
</script> 
```

我认为解决此问题的一种方法是在`ItemDatabound(...)`事件中运行元素时为元素分配一个“虚假类”。但是，我认为我应该能够使用某种 CSS 选择器来在我单击的链接下选择适当的 DIV。也许是“this”对象的一些派生词，但我很难弄清楚这一点。

我将不胜感激您对此提供的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:04:41.473

您在表中多次使用`id='ExplandODiv'`and 。`id='ClickToExplandDiv'`您应该将这些更改为类。

```
$(function(){
    $(".ExplandODiv").hide();    
    $(".ClickToExplandDiv").click(function(){
        $(this).closest("tr").find(".ExplandODiv").toggle();
    });
}); 
```

此外，您的`if (!isInitialized)`检查是不必要的。如果这解决了您遇到的某些问题，您可能在其他地方做错了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T20:40:11.733

在您的脚本区域中使用它，它应该可以工作。正如第一个答案指出的那样，您应该使用类而不是 id。您所要做的就是为 slideToggle 动画包含 Jquery 和 JqueryUI。

```
var isInitialized = false;

$('.ClickToExpandDiv').click(function(e) {
    e.preventDefault();
    $(this).parent().parent().next().find('.ExpandODiv').slideToggle();
    return false;
});

$(document).ready(function() {

    if (!isInitialized) {
        $('.ExpandODiv').hide();
        isInitialized = true;
    }

}); 
```

随时在这里检查测试[http://jsfiddle.net/vecalciskay/54HxU/5/](http://jsfiddle.net/vecalciskay/54HxU/5/)

希望能帮助到你。

# c++ - 有没有办法在我的应用程序中使用外语字符？

> ID：10248711
> 
> 赞同：0
> 
> 时间：2012-04-20T15:01:59.080
> 
> 标签：c++, visual-studio-2010, localization

我正在使用 Visual Studio 2010 C++ 开发 Windows 窗体应用程序，我希望在完成后分发这个应用程序。我想用我自己的语言编写它，但我有这样的字符 -> { ă , ş, ţ } 等等。我不能在标签等元素中使用它们而不会收到错误。

有什么解决办法吗？我见过用我的母语编写的带有这些字符的 C++ 应用程序，但我想不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:09:54.800

您必须为此使用本地化。我看到您正在将 C++ 与 Windows 窗体一起使用，因此您必须将 .Net 与 C++/Cli 一起使用。

在这种情况下，您可以从[“如何：设置 Windows 窗体全球化的文化和 UI 文化”](http://msdn.microsoft.com/en-us/library/b28bx3bh.aspx)和[“演练：本地化 Windows 窗体”](http://msdn.microsoft.com/en-us/library/y99d1cd3%28v=vs.100%29.aspx)开始。

这些在 VB/C# 中，但您应该可以轻松地将它们转换为 C++/Cli。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T15:53:54.003

您得到的对话框不会提示您错误。单击确定，源文件将以适合任何语言环境的 UTF8 格式保存。

请注意，您最好不要使用多字节字符集，否则您会在按钮或标签上看到有趣的字符。

# linux - svn 更新/结帐/提交失败

> ID：10248712
> 
> 赞同：1
> 
> 时间：2012-04-20T15:02:02.043
> 
> 标签：linux, apache, svn, ubuntu, tortoisesvn

## 环境：

客户端
windows 7 终极 x64
TortoiseSVN（最新）

服务器
ubuntu 10.4
svn（它是由另一个不是我的人安装的。他们称之为“svn”。我不是 linux 系统专家，所以我不知道服务器是什么。像 visualsvn、ubersvn ......）
apache
mysql
php
使用usvn 来管理svn。

## 问题：

在结帐/更新时，我可以看到以下消息：

> '/ ***/*** /!svn/vcc/default' 的报告：无法读取块大小：连接已被服务器关闭（http://***）

但实际更新或结帐成功。只是消息。
当我更新相同的版本时，没有错误。

这有点烦人，但我可以忍受。但真正的问题是当我尝试提交时。我不能答应。

当我尝试提交时，提交需要很长时间。最后，它失败了。与下一条消息。该消息显示我的语言，所以我不知道确切的消息。接下来我把它翻译成英文：

> 提交失败：服务器向 MERGE '/svn/***/trunk' 返回了一个意外的值（400 Bad Request）作为对该请求的响应。

此问题仅发生在此客户端 PC 上。
而另一台装有此 SVN 服务器的客户端 PC 则不会出现问题。
而且，与其他 SVN 服务器的客户端 PC 永远不会出现问题。
我一遍又一遍地重新安装 TortoiseSVN 并将其删除并清理注册表（使用 find Tortoise）并重新安装，但这个问题仍然存在。我不认为这个问题是由服务器或客户端引起的。

谁知道它的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:35:35.997

谢谢您的回答。
最后，我以其他方式解决了这个问题。
问题出在我的客户端计算机上。

我使用卡巴斯基安全软件我的防火墙。
我停止实时保护，提交/更新/签出成功。

但是一些问题仍然存在；为什么其他svn服务器没有问题？我不知道原因。

无论如何，我会尝试解决这个剩余的问题。因为我想在我的防火墙上使用 svn。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:41:03.057

如果您将新的工作副本检出到新目录中，是否会收到此错误？如果不是，那么问题可能是由于工作副本损坏。

如果一个新的WC仍然可以重现这个，那么问题可能出在服务器端。您对服务器有管理员访问权限吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T04:47:41.587

它在 subversion.conf 中的 Timeout 指令尝试将其设置为一些较低的值，例如从 3000000 到 3600。

# matlab - 洗牌列对

> ID：10248713
> 
> 赞同：0
> 
> 时间：2012-04-20T15:02:17.697
> 
> 标签：matlab

我有一个包含两列的数组，每一行都是唯一的对。当我洗牌时，我希望数组在成对之间洗牌，而不是两个单独的列。

这是数组

```
A=[2     1;
   2     1;
   2     2;
   2     2;
   2     3;
   2     3;
   2     4;
   2     4;
   1     5;
   1     6;
   1     7;
   1     8;
   1     9;
   1     9;
   1     9;
   1     9] 
```

所以在洗牌之后，我希望保留这些对，只有它们的顺序可以改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:13:42.667

因此`size(A) = [16, 2]`，您希望在不干扰对的情况下对行进行洗牌。尝试：

```
A = A(randperm(16), :); 
```

`randperm(16)`以随机顺序给出数字 1..16，这些用于索引 A 的行.

# html - 在容器中心画线，而不是屏幕？

> ID：10248717
> 
> 赞同：0
> 
> 时间：2012-04-20T15:02:35.607
> 
> 标签：html, css

我正在尝试制作类似于 FB 时间线的东西，我需要在容器的中心创建一条线。问题是它在屏幕中心创建线条，而不是容器。我需要它以容器为中心，因为我在右侧有侧边栏，这意味着它`.timeline`不在屏幕中心。

我想要实现的是在容器中心创建像素完美的线，即使我用浏览器放大，它也会保持在中心。

这是小提琴：http: [//jsfiddle.net/7Evzk/](http://jsfiddle.net/7Evzk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:07:05.523

要回答您问题的这两个部分，将您的内容设置为`position:relative;`将停止覆盖您的页脚的分隔线，并且还将使其成为内容而不是窗口的中心：

[http://jsfiddle.net/2CLQp/1/](http://jsfiddle.net/2CLQp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:07:12.177

只需将父容器位置设置为相对，

```
.content{
 float: left;
 width: 870px;
 background-color: green;
 position: relative;
 height: 300px;
} 
```

[http://jsfiddle.net/2CLQp/2/](http://jsfiddle.net/2CLQp/2/)

# c# - 如何在 jQuery/JavaScript 中编码 URL 并在 ASP.NET 中解码

> ID：10248722
> 
> 赞同：5
> 
> 时间：2012-04-20T15:02:48.273
> 
> 标签：c#, javascript, jquery, asp.net, urlencode

您如何使用 JavaScript 安全地对 URL 进行编码，以便可以将其放入 GET 字符串中？

这是我在 jQuery 中所做的：

```
var url = "mynewpage.aspx?id=1234";
$(location).attr('href', url); 
```

在 ASP.NET page_load 中，我正在阅读以下内容：

```
_string _id = Request.QueryString["id"].ToString(); 
```

如何在 jQuery/JavaScript 中编码 id 并在 ASP.NET (C#) 中解码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T15:06:37.343

`encodeURIComponent(str)`在 JavaScript 中使用进行编码，并使用HttpUtility.UrlDecode[对](http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode.aspx)ASP.NET 中的 URL 进行解码。

在 JavaScript 中：

```
var url = "mynewpage.aspx?id="+encodeURIComponent(idvalue);
$(location).attr('href', url); 
```

在 ASP.NET 中

```
_string _id = HttpUtility.UrlDecode(Request.QueryString["id"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T15:05:20.527

我一直发现[这个站点](http://www.the-art-of-web.com/javascript/escape/)对于确定我应该使用哪种编码（可能是`encodeURI`或`encodeURIComponent`）非常有用。你应该能够在那里找到你想要使用的东西。

我对 ASP.NET 方面不太熟悉。[这些家伙](https://stackoverflow.com/questions/1405048/how-to-decode-url-param-with-c-sharp)可能已经为您提供了很好的答案。

# objective-c - 了解简单的集合运算符

> ID：10248723
> 
> 赞同：0
> 
> 时间：2012-04-20T15:02:55.293
> 
> 标签：objective-c, kvc

我正在阅读 Apple 的 Key Value Programming Guide。在主题简单集合运算符中，我读到：

以下示例返回交易中对象的交易金额平均值： ￼NSNumber *transactionAverage=[transactions valueForKeyPath:"@avg.amount"];

我尝试编写一个可以使用上述内容的程序。以下是该程序的文件。我无法理解为什么上述内容对我不起作用。

事务.h

```
 #import <Foundation/Foundation.h>

@interface Transaction : NSObject
{
NSString *payee;
NSNumber *amount;
NSDate *date;
}
- (void) setPayee: (NSString *) aP 
    setAmount: (NSNumber *) aN
      setDate: (NSDate *) aD;

@end 
```

Transaction.m #import "Transaction.h"

```
@implementation Transaction
- (void) setPayee: (NSString *) aP 
    setAmount: (NSNumber *) aN
      setDate: (NSDate *) aD 
{
payee = aP;
amount = aN;
date = aD;
} 
@end 
```

事务数据库.h

```
#import <Foundation/Foundation.h>
#import "Transaction.h"
@interface TransactionDataBase : NSObject
{
NSMutableArray *tArray;
}
  - (id) objectInTArrayAtIndex: (NSUInteger) index;
- (void) insertObject: (Transaction *) tA
inTArrayAtIndex: (NSUInteger) index;
  - (NSUInteger) countOfTArray;
  @end 
```

事务数据库.m

```
 #import "TransactionDataBase.h"

   @implementation TransactionDataBase
  - (id) init
  {
self = [super init];
if (self) {
    tArray = [[NSMutableArray alloc] initWithCapacity:40];
   }
    return self;
  }

    - (id) objectInTArrayAtIndex: (NSUInteger) index
  {
  return [tArray objectAtIndex:index];
  }

  - (void) insertObject: (Transaction *) tA
    inTArrayAtIndex: (NSUInteger) index
 {
[tArray insertObject:tA atIndex:index];
   }

 - (NSUInteger) countOfTArray
  {
return [tArray count];
    }
   @end

  main.m:

  #import <Foundation/Foundation.h>
    #import "Transaction.h"
   #import "TransactionDataBase.h"

    int main(int argc, const char * argv[])
   {

      @autoreleasepool {

    Transaction *t1 = [[Transaction alloc] init];
    Transaction *t2 = [[Transaction alloc] init];
    Transaction *t3 = [[Transaction alloc] init];

    NSDate *nowDate = [[NSDate alloc]  initWithString:@"2.4.2012"];
    NSDate *nowDate2 = [[NSDate alloc] initWithString:@"2.4.2012"];
    [t1 setPayee:@"c" setAmount:[NSNumber numberWithInt:3000] setDate:nowDate];

    [t2 setPayee:@"c" setAmount:[NSNumber numberWithInt:5000] setDate:nowDate2];

    [t3 setPayee:@"y" setAmount:[NSNumber numberWithInt:1000] setDate:nowDate2];

    TransactionDataBase *db1 = [[TransactionDataBase alloc] init];
    [db1 insertObject:t1 inTArrayAtIndex:0];
    [db1 insertObject:t2 inTArrayAtIndex:1];
    [db1 insertObject:t3 inTArrayAtIndex:2];
    NSNumber *avgT = [db1 valueForKeyPath: "@avg.amount"];
    NSLog(@"%@", avgT);

}
return 0;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:49:29.663

您的`TransactionDataBase`类必须支持一个键路径，该路径返回一个包含其存储值的数组。此外，`Transaction`该类必须支持 key 的键值编码`@"amount"`。您必须为这些类添加适当的属性。

然后，您使用的键路径`[db1 valueForKeyPath: "t1.@avg.amount"]`必须考虑这些属性的名称，即使用您当前的代码，`TransactionDataBase`必须可以通过键访问项目数组`@"t1"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:51:25.417

我想你想要 NSNumber *avgT = [db1 valueForKeyPath:@"@avg.amount"]; 您想要对数组中的所有“数量”值进行平均，而不仅仅是在 t1 对象中——对一个值进行平均是没有意义的。

# php - 为什么我得到乱码字符？

> ID：10248724
> 
> 赞同：1
> 
> 时间：2012-04-20T15:03:04.623
> 
> 标签：php, unicode, substr, strlen, stripslashes

我正在制作一个 PHP 脚本来反转 HTML 文档中的文本，以处理转换严重的希伯来语 PDF。（叹气:)）

一切正常，但是脚本有一个非常奇怪的输出。只有一些字符，而不是保留希伯来字母，变成空白字符（那些带有问号的黑色菱形）。

我尝试了一些我可以在 SO 上找到的解决方案，但没有任何改变。也许你能启发我？

您可以在此处查看正在运行的脚本：pilau.phpnet.us/html_invert.php，这是完整的源代码：

```
<!DOCTYPE html>
<html lang="he-IL">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
    <form action="html_invert.php" method="post" enctype="application/x-www-form-urlencoded">
        <textarea id="html_code" name="html_code" rows="30" cols="80"><?php
            if (isset($_POST['html_code']))
            {
                function invert_string ($str) {
                        $new_str = '';
                        $i = strlen($str);
                        while ($i > 0) {
                            $new_str .= substr($str, --$i, 1);
                        }
                        return '>'.$new_str.'<';
                    }

                    echo htmlspecialchars(preg_replace('/>(\s*.*\s*)</imUue', 'invert_string("$1")', stripslashes($_POST['html_code'])));
            }
            else { echo 'paste your text here'; }
        ?></textarea>
        <br />
        <input type="submit" value="Process HTML" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:10:29.837

看起来我猜的字符集有问题。

在 php.ini 中查找 default_charset，这可能设置为 iso-8859-1。

编辑：现在我想到了，您也可以尝试发送此标头：

```
header('Content-Type: text/html; charset=utf-8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:13:22.427

我想将此问题标记为已回答，因此这是由 Wooble 和 Matthew 提供的解决方案，如上述问题的评论中所述：

我使用`mb_substr('UTF-8')`and `mb_strlen('UTF-8')`，以及替换`stripslashes()`为这个正则表达式：`preg_replace(array('/\x5C(?!\x5C)/u', '/\x5C\x5C/u'), array('','\\'), $_POST['html_code'])`.

因此完整的代码如下：

```
 <textarea id="html_code" name="html_code" rows="30" cols="80"><?php
        if (isset($_POST['html_code']))
        {
            function add_delimiters ($str, $deli, $optional_suffix) {
                return (isset($optional_suffix) ? $deli.$str.$optional_suffix : $deli.$str.$deli);
            }

            function reverse_string ($str) {
                $new_str = '';
                $i = mb_strlen($str, 'UTF-8');
                while ($i > 0) {
                    $new_str .= mb_substr($str, --$i, 1, 'UTF-8');
                }
                return $new_str;
            }

            function utf_stripslashes ($str) {
                return preg_replace(array('/\x5C(?!\x5C)/u', '/\x5C\x5C/u'), array('','\\'), $str);
            }

            function strip_blank_lines ($str) {
                return preg_replace("/(^[\r\n]*|[\r\n]+)[\s\t]*[\r\n]+/u", "\n", $str);
            }

            function reverse_html_content ($html) {
                return preg_replace('/>(\s*.*\s*)</imUue', 'add_delimiters(reverse_string("$1"), ">", "<")', utf_stripslashes($html));
            }

            function clear_unsupported_css ($style) {
                return preg_replace(array('/top:\s{0,1}([0-9]*(?!px));{0,1}/iu', '/left:\s{0,1}([0-9]*(?!px));{0,1}/iu'), array('top:$1px;', 'left:$1px;'), $style);
            }

            function process_inline_style ($html, $func) {
                return preg_replace('/style="[a-zA-Z0-9:;\s{0,1}]*"/imUue', $func.'("$0")', $html);
            }               

            echo strip_blank_lines(htmlspecialchars(process_inline_style(reverse_html_content($_POST['html_code']), 'clear_unsupported_css')));
        }
        else { echo 'paste your text here'; }
    ?></textarea> 
```

# c++ - 如何使用 C++ 查找最长公共子串

> ID：10248728
> 
> 赞同：20
> 
> 时间：2012-04-20T15:03:22.773
> 
> 标签：c++, algorithm, lcs

我在网上搜索了一个 C++ Longest Common Substring 实现，但没有找到一个像样的。我需要一个返回子字符串本身的 LCS 算法，所以它不仅仅是 LCS。

不过，我想知道如何在多个字符串之间执行此操作。

我的想法是检查 2 个字符串之间最长的一个，然后检查所有其他字符串，但这是一个非常缓慢的过程，需要在内存中管理许多长字符串，这使得我的程序非常慢。

知道如何加快多个字符串的速度吗？谢谢你。

**重要编辑** 我给定的变量之一决定了最长公共子字符串需要包含的字符串数量，因此可以给我 10 个字符串，并找到它们的 LCS（K=10），或 4 个的 LCS他们，但我不知道哪个 4，我必须找到最好的 4。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T18:24:45.213

这是一篇关于有效[查找所有常见子字符串](http://www.drdobbs.com/architecture-and-design/184404588)的优秀文章，其中包含 C 中的示例。如果您只需要最长的部分，这可能有点过分，但它可能比关于后缀树的一般文章更容易理解。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-20T16:58:10.823

答案是通用后缀树。[http://en.wikipedia.org/wiki/Generalised_suffix_tree](http://en.wikipedia.org/wiki/Generalised_suffix_tree)

您可以构建具有多个字符串的通用后缀树。

看看这个[http://en.wikipedia.org/wiki/Longest_common_substring_problem](http://en.wikipedia.org/wiki/Longest_common_substring_problem)

每个字符串可以在 O(n) 时间内构建后缀树，总共 k*O(n)。K 是字符串的总数。

所以解决这个问题非常快。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-25T04:13:06.557

这是一个动态规划问题，可以在 O(mn) 时间内解决，其中 m 是一个字符串的长度，n 是另一个字符串的长度。

像使用动态规划解决的任何其他问题一样，我们将问题划分为子问题。假设两个字符串是 x1x2x3....xm 和 y1y2y3...yn

S(i,j) 是 x1x2x3...xi 和 y1y2y3....yj 的最长公共字符串，则

S(i,j) = max { 以 xi/yj 结尾的最长公共子串的长度, if ( x[i] == y[j] ), S(i-1, j-1), S(i, j -1), S(i-1, j) }

这是Java中的工作程序。我相信您可以将其转换为 C++。：

```
public class LongestCommonSubstring {

    public static void main(String[] args) {
        String str1 = "abcdefgijkl";
        String str2 = "mnopabgijkw";
        System.out.println(getLongestCommonSubstring(str1,str2));
    }

    public static String getLongestCommonSubstring(String str1, String str2) {
        //Note this longest[][] is a standard auxialry memory space used in Dynamic
                //programming approach to save results of subproblems. 
                //These results are then used to calculate the results for bigger problems
        int[][] longest = new int[str2.length() + 1][str1.length() + 1];
        int min_index = 0, max_index = 0;

                //When one string is of zero length, then longest common substring length is 0
        for(int idx = 0; idx < str1.length() + 1; idx++) {
            longest[0][idx] = 0;
        }

        for(int idx = 0; idx < str2.length() + 1; idx++) {
            longest[idx][0] = 0;
        }

        for(int i = 0; i <  str2.length(); i++) {
            for(int j = 0; j < str1.length(); j++) {

                int tmp_min = j, tmp_max = j, tmp_offset = 0;

                if(str2.charAt(i) == str1.charAt(j)) {
                    //Find length of longest common substring ending at i/j
                    while(tmp_offset <= i && tmp_offset <= j &&
                            str2.charAt(i - tmp_offset) == str1.charAt(j - tmp_offset)) {

                        tmp_min--;
                        tmp_offset++;

                    }
                }
                //tmp_min will at this moment contain either < i,j value or the index that does not match
                //So increment it to the index that matches.
                tmp_min++;

                //Length of longest common substring ending at i/j
                int length = tmp_max - tmp_min + 1;
                //Find the longest between S(i-1,j), S(i-1,j-1), S(i, j-1)
                int tmp_max_length = Math.max(longest[i][j], Math.max(longest[i+1][j], longest[i][j+1]));

                if(length > tmp_max_length) {
                    min_index = tmp_min;
                    max_index = tmp_max;
                    longest[i+1][j+1] = length;
                } else {
                    longest[i+1][j+1] = tmp_max_length;
                }

            }
        }

        return str1.substring(min_index, max_index >= str1.length() - 1 ? str1.length() - 1 : max_index + 1);
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-31T16:57:51.143

对此有一个非常优雅的动态编程解决方案。

让成为和`LCSuff[i][j]`之间的最长公共后缀。我们这里有两种情况：`X[1..m]``Y[1..n]`

*   `X[i] == Y[j]`，这意味着我们可以扩展 和 之间的最长公共`X[i-1]`后缀`Y[j-1]`。因此`LCSuff[i][j] = LCSuff[i-1][j-1] + 1`在这种情况下。

*   `X[i] != Y[j]`, 因为最后一个字符本身是不同的，`X[1..i]`并且`Y[1..j]`不能有共同的后缀。因此，`LCSuff[i][j] = 0`在这种情况下。

我们现在需要检查这些最长公共后缀的最大值。

所以, `LCSubstr(X,Y) = max(LCSuff(i,j))`, 哪里`1<=i<=m`和`1<=j<=n`

该算法现在几乎可以自己编写。

```
string LCSubstr(string x, string y){
    int m = x.length(), n=y.length();

    int LCSuff[m][n];

    for(int j=0; j<=n; j++)
        LCSuff[0][j] = 0;
    for(int i=0; i<=m; i++)
        LCSuff[i][0] = 0;

    for(int i=1; i<=m; i++){
        for(int j=1; j<=n; j++){
            if(x[i-1] == y[j-1])
                LCSuff[i][j] = LCSuff[i-1][j-1] + 1;
            else
                LCSuff[i][j] = 0;
        }
    }

    string longest = "";
    for(int i=1; i<=m; i++){
        for(int j=1; j<=n; j++){
            if(LCSuff[i][j] > longest.length())
                longest = x.substr((i-LCSuff[i][j]+1) -1, LCSuff[i][j]);
        }
    }
    return longest;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-31T10:59:59.297

这是使用两个数组的动态编程找到最长公共子字符串的 C# 版本（您可以参考：[http](http://codingworkout.blogspot.com/2014/07/longest-common-substring.html) ://codingworkout.blogspot.com/2014/07/longest-common-substring.html了解更多详细信息）

```
class LCSubstring
        {
            public int Length = 0;
            public List<Tuple<int, int>> indices = new List<Tuple<int, int>>();
        }
        public string[] LongestCommonSubStrings(string A, string B)
        {
            int[][] DP_LCSuffix_Cache = new int[A.Length+1][];
            for (int i = 0; i <= A.Length; i++)
            {
                DP_LCSuffix_Cache[i] = new int[B.Length + 1];
            }
            LCSubstring lcsSubstring = new LCSubstring();
            for (int i = 1; i <= A.Length; i++)
            {
                for (int j = 1; j <= B.Length; j++)
                {
                    //LCSuffix(Xi, Yj) = 0 if X[i] != X[j]
                    //                 = LCSuffix(Xi-1, Yj-1) + 1 if Xi = Yj
                    if (A[i - 1] == B[j - 1])
                    {
                        int lcSuffix = 1 + DP_LCSuffix_Cache[i - 1][j - 1];
                        DP_LCSuffix_Cache[i][j] = lcSuffix;
                        if (lcSuffix > lcsSubstring.Length)
                        {
                            lcsSubstring.Length = lcSuffix;
                            lcsSubstring.indices.Clear();
                            var t = new Tuple<int, int>(i, j);
                            lcsSubstring.indices.Add(t);
                        }
                        else if(lcSuffix == lcsSubstring.Length)
                        {
                            //may be more than one longest common substring
                            lcsSubstring.indices.Add(new Tuple<int, int>(i, j));
                        }
                    }
                    else
                    {
                        DP_LCSuffix_Cache[i][j] = 0;
                    }
                }
            }
            if(lcsSubstring.Length > 0)
            {
                List<string> substrings = new List<string>();
                foreach(Tuple<int, int> indices in lcsSubstring.indices)
                {
                    string s = string.Empty;
                    int i = indices.Item1 - lcsSubstring.Length;
                    int j = indices.Item2 - lcsSubstring.Length;
                    Assert.IsTrue(DP_LCSuffix_Cache[i][j] == 0);
                    for(int l =0; l<lcsSubstring.Length;l++)
                    {
                        s += A[i];
                        Assert.IsTrue(A[i] == B[j]);
                        i++;
                        j++;
                    }
                    Assert.IsTrue(i == indices.Item1);
                    Assert.IsTrue(j == indices.Item2);
                    Assert.IsTrue(DP_LCSuffix_Cache[i][j] == lcsSubstring.Length);
                    substrings.Add(s);
                }
                return substrings.ToArray();
            }
            return new string[0];
        } 
```

**单元测试在哪里：**

```
[TestMethod]
        public void LCSubstringTests()
        {
            string A = "ABABC", B = "BABCA";
            string[] substrings = this.LongestCommonSubStrings(A, B);
            Assert.IsTrue(substrings.Length == 1);
            Assert.IsTrue(substrings[0] == "BABC");
            A = "ABCXYZ"; B = "XYZABC";
            substrings = this.LongestCommonSubStrings(A, B);
            Assert.IsTrue(substrings.Length == 2);
            Assert.IsTrue(substrings.Any(s => s == "ABC"));
            Assert.IsTrue(substrings.Any(s => s == "XYZ"));
            A = "ABC"; B = "UVWXYZ";
            string substring = "";
            for(int i =1;i<=10;i++)
            {
                A += i;
                B += i;
                substring += i;
                substrings = this.LongestCommonSubStrings(A, B);
                Assert.IsTrue(substrings.Length == 1);
                Assert.IsTrue(substrings[0] == substring);
            }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-07T18:36:00.380

我为此尝试了几种不同的解决方案，但它们似乎都很慢，所以我想出了下面的方法，并没有真正测试太多，但对我来说似乎工作得更快一些。

```
#include <iostream>

std::string lcs( std::string a, std::string b )
{
    if( a.empty() || b.empty() ) return {} ;

    std::string current_lcs = "";

    for(int i=0; i< a.length(); i++) {
        size_t fpos = b.find(a[i], 0);
        while(fpos != std::string::npos) {
            std::string tmp_lcs = "";
            tmp_lcs += a[i];
            for (int x = fpos+1; x < b.length(); x++) {
                tmp_lcs+=b[x];
                size_t spos = a.find(tmp_lcs, 0);
                if (spos == std::string::npos) {
                    break;
                } else {
                    if (tmp_lcs.length() > current_lcs.length()) {
                        current_lcs = tmp_lcs;
                    }
                }
            }
            fpos = b.find(a[i], fpos+1);
        }
    }
    return current_lcs;
}

int main(int argc, char** argv)
{
    std::cout << lcs(std::string(argv[1]), std::string(argv[2])) << std::endl;
} 
```

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2012-04-20T15:12:20.087

从所有考虑的字符串中找到最大的子字符串。从 N 个字符串中，您将有 N 个子字符串。选择这 N 个中最大的一个。

# oop - 在 Progress-4GL 中，如何设置对象以接受不同数量的输入？

> ID：10248731
> 
> 赞同：1
> 
> 时间：2012-04-20T15:03:41.443
> 
> 标签：oop, progress-4gl, openedge

使用openge 10.2.b ItemObj.cls

```
CLASS mystuff.ItemObj :
  METHOD PUBLIC CHARACTER GetItemDesc
  ( INPUT pcOne AS CHARACTER,
  INPUT pcTwo AS CHARACTER,
  INPUT piThree   AS INTEGER ) :

    RETURN pcOne pcTwo pcThree.

END METHOD. 
```

项目对象.p

```
USING mystuff.*.
DEFINE VARIABLE rItemObj AS CLASS mystuff.ItemObj NO-UNDO.
rItemObj = NEW mystuff.ItemObj( ).
MESSAGE "One : " rItemObj:GetItemDesc (1)       SKIP(1)
        "Two : " rItemObj:GetItemDesc (1, 2)    SKIP(1)
        "Three : " rItemObj:GetItemDesc (1, 2, 3) VIEW-AS ALERT-BOX INFO.
DELETE OBJECT rItemObj. 
```

我希望所有这些语句的输出都相同，这样如果用户只输入 1 输入，其他两个默认为 2 和 3，如果用户输入 1 和 2，则三个默认为 3。

如何在不出现参数不匹配错误的情况下执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:13:05.530

IIRC Progress 不允许在方法定义中使用可选参数，因此您必须为每个参数排列创建方法定义或接受将多个值作为参数处理的数据结构，如动态数组、临时表或自定义对象和解压它（但随后你将逻辑推给你的调用者）。

```
CLASS mystuff.ItemObj:
  METHOD PUBLIC CHARACTER GetItemDesc (INPUT pcOne   AS CHARACTER,
                                       INPUT pcTwo   AS CHARACTER,
                                       INPUT piThree AS INTEGER):
    RETURN pcOne pcTwo pcThree.
  END METHOD.

  METHOD PUBLIC CHARACTER GetItemDesc (INPUT pcOne   AS CHARACTER,
                                       INPUT pcTwo   AS CHARACTER):
    RETURN GetItemDesc(pcOne, pcTwo, 3).
  END METHOD.

  METHOD PUBLIC CHARACTER GetItemDesc (INPUT pcOne   AS CHARACTER):
    RETURN GetItemDesc(pcOne, "2").
  END METHOD.
END CLASS. 
```

# android - 如何从（简单）CursorAdapter 中的 2 个表中查询

> ID：10248733
> 
> 赞同：1
> 
> 时间：2012-04-20T15:03:43.303
> 
> 标签：android, sqlite

在一张桌子上，我这样做：

```
public static String[] FROM_Benzinarii_onList = {DBConstants.Denumire_Benzinarie, DBConstants.Adresa, DBConstants.Distance, _ID};

public Cursor getStations_List(){
        db = helper.getReadableDatabase();
        return db.query(DBConstants.TABELA_BENZINARII, FROM_Benzinarii_onList, null, null, null, null, null); 
```

然后构造适配器：

```
int[] values = {R.id.tv_benzinarie,R.id.tv_adresa,R.id.tv_dist}
Cursor cursor = getStations_List();
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(getBaseContext(), R.layout.item_list, cursor,FROM_Benzinarii_onList, values);
     setListAdapter(adapter); 
```

但是现在我需要一个额外的列，价格，来自另一个表，我无法获得游标。我已经尝试了下面的代码以及许多其他代码。

```
public static String[] FROM_Benzinarii_onList = {DBConstants.Denumire_Benzinarie, DBConstants.Adresa, DBConstants.Distance, DBConstants.Pret, _ID};

public Cursor getStations_List(){
        db = helper.getReadableDatabase();
        String sql = " select " + DBConstants.TABELA_BENZINARII + "." + DBConstants.Denumire_Benzinarie + "," + DBConstants.TABELA_BENZINARII + "." + DBConstants.Adresa 
                + "," + DBConstants.TABELA_BENZINARII + "." + DBConstants.Distance + "," + DBConstants.TABELA_PRETURI + "." + DBConstants.Pret 
                + " from " + DBConstants.TABELA_PRETURI + "," + DBConstants.TABELA_BENZINARII
                + " where " + DBConstants.TABELA_BENZINARII + "." + DBConstants.ID_Benzinarie + " = " + DBConstants.TABELA_PRETURI + "." + DBConstants.ID_Benz;
        return db.rawQuery(sql, null);
    } 
```

然后用同样的方法构造SimpleAdapter（不知道对不对！？）

```
int[] values = {R.id.tv_benzinarie,R.id.tv_adresa,R.id.tv_dist,R.id.tv_pret};

Cursor cursor = getStations_List();

SimpleCursorAdapter adapter = new SimpleCursorAdapter(getBaseContext(), R.layout.item_list, cursor,FROM_Benzinarii_onList, values);
        setListAdapter(adapter); 
```

我得到：

```
 Caused by: java.lang.IllegalArgumentException: column '_id' does not exist 
```

我不知道我的新光标是否与我有关，`FROM_Benzinarii_onList`但我不能`db.query`在这里使用请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:05:40.217

您绝对需要在结果 Cursor 中有一个 _id 列才能在（简单）CursorAdapter 中使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:12:48.213

看我的回答[Android专栏_id不存在问题](https://stackoverflow.com/questions/5825020/android-column-id-does-not-exist-problem/5825507#5825507)

尝试在我的答案中使用`alias`例如。`select oid as _id...`

# extjs4 - 如何更改面板 extjs4 中的可折叠位置？

> ID：10248734
> 
> 赞同：3
> 
> 时间：2012-04-20T15:03:45.040
> 
> 标签：extjs4

当我放弃`collapsible : true`面板时，可折叠图标（向上箭头）显示在最右侧。如何在面板左侧显示它？

```
Ext.create('Ext.panel.Panel', {
    title: 'New Section',
    height: 275,
    width: 530,
    margin: 3,
    collapsible : true
}); 
```

之后，我正在使用`setTitle(text)`方法动态编辑标题。标题将被更改，但可折叠不会显示。任何人都可以知道这里发生了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T12:52:56.040

```
.my-panel .x-tool
{
    left: 0 !important;
}
.my-panel .x-panel-header-text-container
{
    padding-left: 18px;
} 
```

在这里演示[http://ext4all.com/post/how-to-change-collapse-tool-position](http://ext4all.com/post/how-to-change-collapse-tool-position)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T18:35:02.963

**要在左侧**显示可折叠图标，您必须使用自定义 CSS，如下所示：

```
Ext.create('Ext.panel.Panel', {
    collapsible: true,
    cls: 'my-panel'
}); 
```

和CSS代码：

```
.my-panel .x-tool {
    left: 0 !important;
} 
```

更改标题后，是否出现任何错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-26T09:50:22.437

## 我们有工具位置。只需检查下面的标题 toolPosition :1

```
 Ext.create('Ext.panel.Panel', {
            title: 'New Section',
            height: 275,
            width: 530,
            margin: 3,
            collapsible : true, 
            header: {
                  titlePosition: 1,
        }
        }); 
```

# java - jsp渲染后的AOP切入点

> ID：10248735
> 
> 赞同：0
> 
> 时间：2012-04-20T15:03:54.793
> 
> 标签：java, spring, hibernate, jsp, aop

我有一个奇怪的问题。

我需要在服务器交互结束时真正执行代码。所以，如果我使用 jsp，我需要在页面渲染之后执行它。

有办法执行吗？

我在这个切入点之后尝试过

```
@Pointcut("@annotation(org.springframework.web.bin d.annotation.RequestMapping)") 
```

但它在“返回 ModelAndView”之后就离开了我。我需要结束服务器会话。

我想这样做是因为**我需要关闭 Hibernate 会话**，避免由于在 jsp 呈现视图后关闭会话而导致的延迟初始化异常，并且我想避免脚本让喜欢

```
<% HibernateManager.getSession().close() %> 
```

有效地将视图与模型耦合

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:45:52.637

你可以有一个 spring-mvc 拦截器 - implement`HandlerIntercepetor`的`afterCompletion(..)`方法。您也可以在过滤器中执行此操作。

但是你没有两个，原因有两个：

*   您不应该将未初始化的集合传递给您的视图。在服务层初始化你需要的一切，那么你就不会有 LazyInitializationException。事实上，[避免惰性集合](http://techblog.bozho.net/?p=645)
*   即使您决定使用惰性集合，而不是在服务中初始化它们，spring 也会为您提供`OpenEntityManagerInViewInterceptor`(and `Filter`) 和`OpenSessionInViewInterceptor`(and `Filter`) 来满足您的需求。

# linux - 如何通过头文件或函数名称检测库文件？反之亦然？

> ID：10248744
> 
> 赞同：0
> 
> 时间：2012-04-20T15:04:27.293
> 
> 标签：linux, function, header

我有一个头文件，例如“elf.h”或方法名称，例如“ElfData::addToSection()”。

我想知道相应的库文件——它的名称和它的位置，例如 /usr/lib/libelf.a 或 /usr/lib/libelf.so.0.8.13。有什么方法可以解决这个问题。什么是最好的方法。

另外我想知道哪些标题，函数与指定的库文件匹配。操作系统 = Ubuntu Linux。

可能是，这些问题很愚蠢:)但如果你能回复我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:22:44.300

对于较新的库，您可以经常使用该[`pkg-config`](http://www.freedesktop.org/wiki/Software/pkg-config/)工具。你给它你想要链接的包的名字，它给你适当的编译器/链接器选项：

```
$ pkg-config --cflags glib-2.0
-I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include
$ pkg-config --libs glib-2.0
-lglib-2.0 
```

这样你就可以把它放在你的`Makefile`：

```
LIBS = `pkg-config --libs glib-2.0` -lm      # link with glib and libm
CFLAGS = -O2 `pkg-config --cflags glib-2.0` 
```

（它不会为您找到标题，只是包含目录。）

对于不支持`pkg-config`的库，没有一种正确的方法可以找出库所属的标头，反之亦然。您通常要么将这些知识手动编码到构建系统中，要么使用诸如[GNU 自动工具](http://www.openismus.com/documents/linux/using_libraries/using_libraries)之类的东西，它允许检查多个库/头文件中的标识符或符号。

# windows - 访问远程计算机上的虚拟磁盘服务 - UnauthorizedAccessException

> ID：10248746
> 
> 赞同：0
> 
> 时间：2012-04-20T15:04:31.177
> 
> 标签：windows, com, windows-services, credentials

我尝试访问远程计算机上的虚拟磁盘服务 (VDS)。在解决了一些与缺少 Windows 防火墙规则（RPC 不可用）相关的问题后，我在查询服务时遇到了 UnauthorizedAccessException (E_ACCESSDENIED)。

这是我的代码：

```
 // Create the service loader
        VdsServiceLoader loaderClass = new VdsServiceLoader();
        IVdsServiceLoader loader = (IVdsServiceLoader)loaderClass;            
        Console.WriteLine("Got Loader");

        // Load the vds service
        try
        {
            loader.LoadService(<Hostname>, out service);
        }
        catch (UnauthorizedAccessException)
        {
            // E_ACCESSDENIED
            Console.WriteLine("Need admin rights");
            return;
        } 
```

如果我访问本地服务，当我没有以管理员权限执行时会引发此异常。如果我以管理员权限执行，一切都很好，我可以毫无问题地获得本地 VDS 信息。

我想我必须在某处指定用户名/密码才能访问该服务，但我不知道在哪里。或者在远程机器上授予对该服务的访问权限。

我也像这样尝试了建议的 ImpersonateUser

```
if (ImpersonationAPI.LogonUser(pUsername, pDomain, pPassword, LogonType.LOGON32_LOGON_NEW_CREDENTIALS, LogonProvider.LOGON32_PROVIDER_WINNT50, ref token) != 0)
{
    if (ImpersonationAPI.DuplicateToken(token, SecurityImpersonationLevel.SecurityImpersonation, ref tokenDuplicate) != 0)
    {
         tempWindowsIdentity = new WindowsIdentity(tokenDuplicate);
         LoadUserProfile(tokenDuplicate, pUsername);
         m_ImpersonationContext = tempWindowsIdentity.Impersonate();
         ...
     }
} 
```

我还尝试了标志 LOGON32_LOGON_INTERACTIVE、LOGON32_LOGON_NETWORK、LOGON32_LOGON_NETWORK_CLEARTEXT 和 LOGON32_LOGON_SERVICE。

两台机器都运行 Win 7。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:57:11.317

您需要登录到远程计算机并在该计算机上模拟具有适当权限的用户。为此，请使用`LogonUser`登录`LOGON32_LOGON_NEW_CREDENTIALS`类型，使用生成的令牌构造 Windows 标识并模拟它。例如，请参阅此问题[Get impersonated user name](https://stackoverflow.com/questions/5153161/get-impersonated-user-name)以获取示例。

# .net - 控制器中设置的模型属性未显示在视图中

> ID：10248757
> 
> 赞同：3
> 
> 时间：2012-04-20T15:05:05.577
> 
> 标签：.net, asp.net-mvc

这是一个非常简单的例子。

控制器

```
[httppost]
public ActionResult MyPage(MyModelClass myModel) {
    myModel.someProperty = "b";
    return view(myModel)
} 
```

类型化视图包含 someProperty 的隐藏字段

```
@Html.HiddenFor(model => model.someProperty) 
```

Get 控制器将 someProperty 设置为“a”

然而，在发布之后，视图中 someProperty 的值仍然是“a”

这对我来说似乎不正确。有什么见解吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:29:35.987

`ModelState`保持过帐值“a”。并且由于它在填充模型值方面具有更高的优先级（比模型本身），视图呈现“a”。您可以从 ModelState 中删除值并使用模型值

```
[HttpPost]
public ActionResult MyPage(MyModelClass myModel) {
    myModel.someProperty = "b";

    ModelState.Remove("someProperty");    

    return view(myModel);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T15:30:25.220

我实际上可以重现这一点（最初让我感到惊讶），但经过一番挠头后，我认为这是有道理的。

在行上设置断点`myModel.SomeProperty = "b";`确实表明该属性设置正确。这使我相信 MVC 是基于您将视图呈现为 POST 的直接结果（即存在现有模型状态）这一事实做出的假设。我想这是因为如果您在 POST 之后重新显示视图，则假设您这样做是因为表单包含错误。通过从模型状态中获取值，可以正确地重新填充表单以供用户重试。

编辑：当然，一旦我发布，我发现一篇文章比我能更好地描述它：http: [//blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net- mvc-s-html-helpers-render-the-wrong-value.aspx](http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx)

# spring - Managing multiple Java Applications

> ID：10248759
> 
> 赞同：0
> 
> 时间：2012-04-20T15:05:08.633
> 
> 标签：spring, spring-security, jms, rabbitmq

Right now we are looking into developing a live video chat applications that will consist of a video (wowza), web (spring mvc), chat(rabbitmq)... parts. I would like to divide each part into seperate application.

Whats the best way to have these applications communicate. I read about Rabbitmq as the messaging system, is a popular way to scale and connect applications. IS this something that the community regularly uses?

Also each application will need authentication, we would like to use Spring security for this, whats the best way to have all the different applications use one security point. Is Rabbitmq good for this, or stick with jms

I have been out of the Java world for a while, im a bit outdated, please help me with this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:02:47.853

Since you expect to implement using multiple languages, RabbitMQ sounds like a better choice since it is an AMQP implementation which alleges to support a more diverse language set. I mean, most JMS implementations have fairly rich language support (aside from Java) but it seems AMQP has more momentum in this area.

You might also consider [ZeroMQ](http://www.zeromq.org/). Based on your description, it seems you might not need as much on the backend (queueing, persistence etc.). You may also find it easier to implement your messaging in transport protocols that are simpler to manage for a distributed user community that might be stuck behind firewalls, need to use proxy servers etc.

//Nicholas

# java - 如何检查设备上是否存在特定传感器？

> ID：10248763
> 
> 赞同：4
> 
> 时间：2012-04-20T15:05:18.137
> 
> 标签：java, android, android-manifest, android-sensors, google-play

我正在开发一个使用传感器的 android 应用程序，我想知道检测设备是否具有特定传感器的最佳方法，比如接近传感器。

此外，是否有任何“过滤器”可以应用于清单，这样设备上没有接近传感器的用户将无法**安装该应用程序**？如果存在，此“过滤器”是否在 Google Play 上也有效，因此用户将无法**看到该应用**？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-20T15:17:27.430

这很可能是您在以编程方式检查功能时正在寻找的内容

```
PackageManager PM= this.getPackageManager();
boolean gps = PM.hasSystemFeature(PackageManager.FEATURE_LOCATION_GPS);
boolean acc = PM.hasSystemFeature(PackageManager.FEATURE_SENSOR_ACCELEROMETER); 
```

此链接说明了您可以采取哪些措施来过滤市场中的应用程序，具体请查看该部分

[市场过滤器](http://developer.android.com/guide/appendix/market-filters.html "市场过滤器")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-27T08:24:02.370

检查特定传感器：

```
public String getSystemInfo(PackageManager pm/* activity.getPackageManager() */) {
    return ""
    + "\nSDK: " + Build.VERSION.SDK_INT
    + "\nMODEL: " + Build.MODEL
    + "\nBrand: " + Build.BRAND
    + "\nManufacture: " + Build.MANUFACTURER
    + "\nAndroid Version: " + Build.VERSION.RELEASE
    + "\nSen-Fingerprint: " + hasFP()

    + "\nSen-Light: " + hasSen(pm, PackageManager.FEATURE_SENSOR_LIGHT)
    + "\nSen-Compass: " + hasSen(pm, PackageManager.FEATURE_SENSOR_COMPASS)
    + "\nSen-Proximity: " + hasSen(pm, PackageManager.FEATURE_SENSOR_PROXIMITY)
    + "\nSen-ECG(API 21): " + hasSen(pm, PackageManager.FEATURE_SENSOR_HEART_RATE_ECG)
    + "\nSen-Temp(API 21): " + hasSen(pm, PackageManager.FEATURE_SENSOR_AMBIENT_TEMPERATURE)
    + "\nSen-Accelerometer: " + hasSen(pm, PackageManager.FEATURE_SENSOR_ACCELEROMETER)
    + "\nSen-Humidity(API 21): " + hasSen(pm, PackageManager.FEATURE_SENSOR_RELATIVE_HUMIDITY)
    + "\nSen-Gyroscope(API 9): " + hasSen(pm, PackageManager.FEATURE_SENSOR_GYROSCOPE)
    + "\nSen-Barometer(API 9): " + hasSen(pm, PackageManager.FEATURE_SENSOR_BAROMETER)
    + "\nSen-HeartRate(API 20): " + hasSen(pm, PackageManager.FEATURE_SENSOR_HEART_RATE)
    + "\nSen-StepCounter(API 19): " + hasSen(pm, PackageManager.FEATURE_SENSOR_STEP_COUNTER)
    + "\nSen-StepDetector(API 19): " + hasSen(pm, PackageManager.FEATURE_SENSOR_STEP_DETECTOR);
} 
```

```
public boolean hasFP() {
    return (Build.FINGERPRINT != null && !Build.FINGERPRINT.equals(""));
} 
```

```
public boolean hasSen(PackageManager packageManager, String sensor) {
    try {
        return packageManager.hasSystemFeature(sensor);
    } catch (Exception ignored) {
        return false;
    }
} 
```

# c# - 实体框架 3 - 具有不同 Include() 的导航属性 Null

> ID：10248767
> 
> 赞同：1
> 
> 时间：2012-04-20T15:05:32.897
> 
> 标签：c#, entity-framework, linq-to-entities

我有一个查询方法，有时我会根据情况包括附加表“类别”和“制造商”。但是，每当我运行查询时，类别和制造商导航属性始终为空白。我究竟做错了什么？

```
private IQueryable<Item> GetQuery(ItemFilter filter, ItemCacheContainer context)
    {
        //Perform optional Joins
        ObjectQuery<Item> query = context.Items;

        if (filter.JoinCategory)
            query.Include("Category");

        if (filter.JoinManufacturer)
            query.Include("Manufacturer");

        return query.Where(i =>
              (!filter.ItemId.HasValue
              || i.ItemId == filter.ItemId.Value));
    } 
```

此外，这是我使用该`GetQuery`方法的方式，但是当我在其中放置断点时，`ConvertItemFromCache`我看到了那些空导航属性。

```
GetQuery(filter, context)
    .ToList()
    .ConvertAll(ConvertItemFromCache)
    .SingleOrDefault(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:08:19.787

您需要设置`query`为`query.Include("...")`

```
query = query.Include("Category"); 
```

所以在你的例子中：

```
if (filter.JoinCategory)
 query = query.Include("Category");

if (filter.JoinManufacturer)
 query = query.Include("Manufacturer"); 
```

# asp.net - 为什么在这个 RegEx 中顺序很重要？

> ID：10248776
> 
> 赞同：8
> 
> 时间：2012-04-20T15:06:20.370
> 
> 标签：asp.net, .net, regex

TextBox 控件的要求是接受以下作为有效输入：

1.  一串数字。
2.  文字字符串“房间数”。
3.  没有任何价值（留空）。根本不指定值应该允许 RegularExpressionValidator 通过。

遵循 RegEx 产生了预期的结果（成功验证了 3 种类型的输入）：

```
"Number of rooms|[0-9]*" 
```

但是，当一位同事询问为什么在指定字符串“房间数”时以下内容无法验证（要求＃2）时，我无法做出解释：

```
"[0-9]*|Number of rooms" 
```

关于为什么在这种情况下交替的顺序很重要的解释确实非常有见地。

更新：

第二个正则表达式成功匹配控制台应用程序中的目标字符串“房间数”，如下[所示](http://pastebin.com/yzr6Bqcd)。但是，当输入为“房间数”时，在 aspx 标记中使用相同的表达式不匹配。这是相关的 aspx 标记：

```
<asp:TextBox runat="server" ID="textbox1" >
</asp:TextBox>

<asp:RegularExpressionValidator ID="RegularExpressionValidator1" 
EnableClientScript="false" runat="server" ControlToValidate="textbox1" 
ValidationExpression="[0-9]*|Number of rooms" 
ErrorMessage="RegularExpressionValidator"></asp:RegularExpressionValidator>

<asp:Button ID="Button1" runat="server" Text="Button" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T15:12:39.673

顺序很重要，因为这是正则表达式引擎将尝试匹配的顺序。

情况1：`Number of rooms|[0-9]*`

在这种情况下，正则表达式引擎将首先尝试匹配文本“房间数”。如果失败，则将尝试匹配数字或不匹配。

案例2 `[0-9]*|Number of rooms`：：

在这种情况下，引擎将首先尝试匹配数字或不匹配。但没有什么会*永远*匹配。在这种情况下，它永远不需要尝试“房间数”

这有点像 || C# 中的运算符。一旦左侧匹配右侧将被忽略。

**更新：** 回答你的第二个问题。它与 RegularExpressionValidator 的行为不同，因为它不仅仅是检查匹配。

```
// .....
Match m = Regex.Match(controlValue, ValidationExpression);
return(m.Success && m.Index == 0 && m.Length == controlValue.Length); 
// ..... 
```

它正在检查匹配并确保匹配的长度是整个字符串。这排除了部分匹配或空匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T00:59:44.600

您可能想使用正则表达式`Number of rooms|[0-9]+`or `[0-9]+|Number of rooms`，因为模式`[0-9]*`（带星号）将始终至少匹配空字符串（`*`表示`{0,}`，因此“零或更多......”）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T15:13:11.490

关键是，`[0-9]*`如果您首先指定，则开头匹配空字符串。
如果您指定*整个字符串*应该是数字，那么它应该可以工作：

```
^[0-9]*$|Number of rooms 
```

除非您指定`^`and`$`来表示*整个字符串*必须匹配，否则将在“房间数”的开头匹配一个空字符串，此时将不会尝试第二种选择。
我希望这能在评论中回答您的问题，我不确定是否清楚...

# mysql - 使用 PERL 和 jquery-ajax 检索 mysql 数据

> ID：10248777
> 
> 赞同：0
> 
> 时间：2012-04-20T15:06:21.337
> 
> 标签：mysql, perl, html, jquery

我正在创建一个包含 3 个基本元素、选择框、按钮和表格的网页。从较高的层次来看，用户选择一个元素，然后单击按钮。单击该按钮时，将执行一个 PERL 脚本，该脚本将数据放入 mySQL 数据库中的表中。所有这些事情都成功了。

现在，我正在尝试使用动态表将数据库表值返回到我的 HTML 文件中。但是我找到的每个来源都有我的 CGI 文件编写 html 标签。我觉得这是不对的，因为我不明白我的 CGI 知道表 ID，即使我传递了值。另外，我知道我的 js 文件不正确，有两个单独的 AJAX 调用，但那是我在脑海中逻辑处理的家。

我不确定首先是什么，修复 CGI 或 JS 文件。

HTML 代码 (index.html):

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js" charset="utf-8"></script>
        <script type="text/javascript" class="jsbin" src="C:/xampp/DataTables/media/js/jquery.dataTables.js" charset="utf-8"></script>
        <script type="text/javascript" src="js/main.js" charset="utf-8"></script>
        <script type="text/javascript" src="js/RunPerlScript.js" charset="utf-8"></script>
        <script type="text/javascript" src="js/table.js" charset="utf-8"></script>
    </head>
    <body>
        <header>
            <h1></h1>
        </header>
        <form name="myForm" method="GET" action="">
            <select id="cdLDAP" >
                <option/>
            </select>
            <input type="button"  id="btn_run" name="btn_run" value="Run"></input>
        </form>
        <table id="results_table">
            <thead>
                <tr>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                </tr>
            </tbody>
        </table>
    </body>
</html> 
```

Perl (CGI):

```
 #!/usr/bin/perl -T
    use CGI;
    use DBI;
    use strict;
    use warnings;

    # read the CGI params
    my $cgi = CGI->new;
    my $inputselection = $cgi->param("cdLDAP");
    my $html_table = $cgi->param("html_table_results");
    my ($base_dn, $tblname);
    #my $password = $cgi->param("password");

    #my $inputselection = "Disabled Users";
    #LDAP Connection parameters
    if ($inputselection eq "Disabled Users") {
        $base_dn = "";
        $tblname = "disabled_user";
    } elsif ($inputselection eq "") {
        $base_dn = "";
        $tblname = "service_account";
    } elsif ($inputselection eq "") {
        $base_dn = "";
        $tblname = "";
    } else {
        die;
    }

    # connect to the database
    my ($platform,$database,$host,$port,$db_user,$pw) = ("mysql","results","localhost","3306","resultsuser","mysql123");
    my $dsn = "DBI:$platform:database=$database,host=$host,port=$port";
    my $connect = DBI->connect("DBI:mysql:database=$database;host=$host",$db_user,$pw,{RaiseError => 1});

    #query db to get results set for table output
    my $query_results = "SELECT * FROM " . $tblname;
    my $query_handle = "";
    $query_handle = $connect->prepare($query_results) or die $connect->errstr;
    $query_handle->execute() or die $query_handle->errstr;

    print header;
    # HTML for the beginning of the table
    # we are putting a border around the table for effect
    print "<table border=\"1\" width=\"800\"> \n";

    # print your table column headers
    print "<tr><td>User ID</td><td>Status</td><td>Last Password Reset</td><td>Reset Needed?</td></tr>\n";

    my (@data,$uid,$status,$pwlstset,$resetmsg);

    # retrieve the values returned from executing your SQL statement
    foreach (@data = $query_handle->fetchrow_array()) {
    $uid = $data[0];
    $status = $data[1];
    $pwlstset = $data[2];
    $resetmsg = $data[3];

    # print your table rows
    print "<tr><td>$uid</td><td>$status</td><td>$pwlstset</td><td>$resetmsg</td></tr>\n";

    }

    # close your table
    print "</table>\n";

    # exit the script
    exit; 
```

JS/JQuery/AJAX：

```
$(function() {
    $('#btn_run').click(function() {
        var tblname = $('#cdLDAP').val();
        var html_table = $('#results_table').attr('id');
        $.ajax({
            type: "GET",
            url: "/perl/cgitest.pl", // URL of the Perl script that queries LDPA and inputs to mySQL
            data: "cdLDAP=" +tblname,
            // script call was *not* successful
            error: function() { 
                alert("ERROR!");
            }, // error 
            // script call was successful 
            // data contains the JSON values returned by the Perl script 
            success: function(data){
                alert("success!");
            } // success
        }); // ajax
        $.ajax({
            type: "GET",
            url: "/perl/cgitest2.pl", // URL of the Perl script that retirves data from mySQL
            data: "cdLDAP=" +tblname +",html_table_results=" +html_table,
            // script call was *not* successful
            error: function() { 
                alert("ERROR!");
            }, // error 
            // script call was successful 
            // data contains the JSON values returned by the Perl script 
            success: function(data){
                alert("success!");
            } // success
        }); // ajax
    });
}); 
```

所以这里是我需要一些帮助的地方： 1) 我的 PERL 脚本是否应该编写 html 标签？如果是，我如何写入`index.html`而不是新的 html 文件？2）如果表结构是由 jquery 文件创建的，一个好的教学资源将不胜感激，因为我试图被教如何钓鱼，而不是给鱼。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:13:36.573

> 我的 PERL 脚本是否应该编写 html 标签？

没有[像 PERL 这样的东西](http://perldoc.perl.org/perlfaq1.html#What%27s-the-difference-between-%22perl%22-and-%22Perl%22%3f)。

如果您想使用 Ajax 动态更新页面（请注意，您应该使用[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)），那么您可以采用两种基本方法：

1.  服务器以干净的数据结构（可能是 JSON）返回数据
2.  服务器返回一段 HTML

我通常赞成前一种方法（在这种情况下，您将在 Perl 中构造一个 hashref 数组，通过[JSON 模块](https://metacpan.org/module/JSON)运行它，然后使用`application/json`Content-Type HTTP 标头输出它。

鉴于某些版本的 Internet Explorer 在尝试编辑`innerHTML`表格元素时存在问题，这使得第一个选项更好。

> 如果是，我如何写入 index.html 而不是新的 html 文件？

您根本不写入文件。您通过 STDOUT 返回数据，网络服务器将其传递回客户端。

> 如果表结构是由 jquery 文件创建的，那么好的教学资源将不胜感激

[http://api.jquery.com/category/manipulation/](http://api.jquery.com/category/manipulation/)

# r - 在 R 中使用 do 循环创建新变量

> ID：10248778
> 
> 赞同：2
> 
> 时间：2012-04-20T15:06:24.867
> 
> 标签：r, sas

我是一名长期的 SAS 程序员，希望跳转到 R。我知道 R 对于变量重新编码并不是那么好，但是有没有办法通过 do 循环来做到这一点。

如果我有很多名为 a_1 a_2...a_100、b_1 b_2 ... b_100 的变量，并且我想创建新变量 c_1 c_2 ... c_100，其中 c_i = a_i + b_i。有没有办法在没有 100 条语句的情况下做到这一点？

在 SAS 中，我会简单地使用：

```
%do i=1 %to 100;
c_&i = a_&i + b_&i;
%end; 
```

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-20T15:52:58.920

SAS 使用一种基本的宏语言，它依赖于文本替换，而不是像任何适当的编程语言那样评估表达式。您的 SAS 文件本质上是两件事：SAS 命令和宏表达式（以 '%' 开头的东西）。宏语言存在很大问题且难以调试（例如，表达式中的表达式是否会扩展？为什么必须使用“&&x”甚至“&&&x”？为什么这里需要两个分号？）。与基于单一语法的精心设计的编程语言相比，它笨拙且不优雅。

如果您的 a_i 变量是单个数字，那么您应该将它们作为向量 - 例如：

```
> a = 1:100
> b = runif(100) 
```

现在我可以轻松获取元素：

```
> a[1] 
```

并并行加起来：

```
> c = a + b 
```

你可以用一个循环来做，首先初始化 c ：

```
> c = rep(0,100)
> for(i in 1:100){
   c[i]=a[i]+b[i]
   } 
```

但这会很慢。

几乎每个 R 初学者都会问“我如何为 i 的某些值创建变量 a_i”，然后不久他们又问如何访问变量 a_i 以获得 i 的某些值。答案总是将 a 作为向量或列表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-21T12:05:54.960

这东西很琐碎。对我来说，您似乎想找到一种自动创建命令并执行它们的方法。十分简单。

例如，这分配给 中`C_i`的值`A_i`：

```
for(i in 1:100){
    tmpCmd = paste("C_",i,"= A_",i, sep = "")
    eval(parse(text = tmpCmd))
}
rm(i, tmpCmd) 
```

只要记住`eval(parse(text = ...)))`and `paste()`，您就可以开始创建要执行的命令循环了。

然后，您可以通过在此行中交换来添加您想要执行的操作，即用 求和`B_i`：

```
 tmpCmd = paste("C_",i,"= A_",i," + B_",i, sep = "") 
```

然而，其他人是对的，使用好的数据结构是一种避免做很多像这样乏味的事情的方法。然而，当您需要时，这样的重复代码并不难设计。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-20T15:07:47.713

我怀疑如果你有一百个变量`a_1, a_2, ..., a_100`，那么你所有的变量都是相关的。事实上，如果你想做

```
c_1 = a_1 + b_1 
```

那么`a`, `b`,`c`是相关的。因此，我建议您将所有变量组合到一个数据框中，其中一列是`a`，另一列是`b`。

问题是如何以合理的方式组合变量。但是，为了给出一个有用的答案，您能告诉我们这些变量是如何创建的吗？

* * *

也许这不适合您的情况。如果没有，更多信息会很有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-19T07:30:46.837

这真的很晚了，但实际上你可以在没有循环或 *apply 的情况下做到这一点。我假设变量是数据框中的列（如果 OP 熟悉 SAS 数据集和宏，这是有道理的）。

```
df[paste("c", 1:100, sep="_")] <- df[paste("a", 1:100, sep="_")] +
                                  df[paste("b", 1:100, sep="_")] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-22T23:42:53.110

这实际上是一个非常有趣的问题。从我的阅读和最近（强制）使用 SAS 来看，问题似乎是试图在一个`data`步骤中使用一些宏代码重新编码 SAS 数据集中的变量。否则，如果它们是创建的自由变量，它们将以`&`字符开头。我认为示例代码实际上会更好地表示为：

```
%macro recodevars;
data test;
  set test;

  %do i=1 %to 100;
  c_&i = a_&i + b_&i;
  %end;

run;
%mend recodevars;
%recodevars; 
```

你可以像这个例子一样在 R 中做类似的事情：

```
test <- data.frame(vara1=1:10,varb1=2:11,vara2=3:12,varb2=4:13)

test[paste0("varc",1:2)] <- test[paste0("vara",1:2)] + test[paste0("varb",1:2)] 
```

如果将其应用于数据框而不是自由变量，我很想知道其他人必须回答什么见解。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-20T15:21:03.933

R方式是使用列表。

```
> a_1 = 1
> a_2 = 2
> a_3 = 3
> a_4 = 4
> a_5 = 5

> b_1 = 1
> b_2 = 2
> b_3 = 3
> b_4 = 4
> b_5 = 5

> a.list <- ls(patter='a_*')
> a.list
[1] "a_1" "a_2" "a_3" "a_4" "a_5" 
```

并定义 blist 。

```
if(length(a.list)==length(b.list)){
   c.list <- lapply(1:length(a.list), function(x) eval(parse(text=a.list[x])) + eval(parse(text=b.list[x])))

   c.list.names <- paste('c', 1:length(a.list), sep='_')

   lapply(1:length(c.list), function(x) assign(c.list.names[x], c.list[x], envir=.GlobalEnv)) 
} 
```

除非您遵循csgillespie`eval(parse(yuk))`的`assign`建议（这是正确的方法！）

# ios - 栏按钮不显示

> ID：10248780
> 
> 赞同：1
> 
> 时间：2012-04-20T15:06:34.000
> 
> 标签：ios, uibarbuttonitem

我想使用会有一些图像的自定义 barbutton。我正在按照以下代码进行操作。但是 barbutton 没有显示。

```
 UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:[UIImage imageNamed:@"icon.png"] forState:UIControlStateNormal];

[button addTarget:self action:@selector(nowPlayingButtonClicked) forControlEvents:UIControlEventTouchUpInside];

nowPlaying = [[UIBarButtonItem alloc] initWithCustomView:button];
nowPlaying.action = @selector(nowPlayingButtonClicked);
nowPlaying.target = self;

self.navigationItem.rightBarButtonItem = nowPlaying; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:21:06.203

您必须为添加到 BarButton 的 Button 设置一个框架

```
 button.frame = CGRectMake(0, 0, 50, 30); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:14:02.823

您必须为选定状态和正常状态提供图像。那么它就会出现在你面前。这只是一个提示。但是试试看。

```
UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:[UIImage imageNamed:@"icon.png"] forState:UIControlStateNormal];
[button setImage:[UIImage imageNamed:@"icon_pressed.png"] forState:UIControlStateSelected];

[button addTarget:self action:@selector(nowPlayingButtonClicked) forControlEvents:UIControlEventTouchUpInside];

nowPlaying = [[UIBarButtonItem alloc] initWithCustomView:button];
self.navigationItem.rightBarButtonItem = nowPlaying; 
```

# java - Eclipse 条件断点损坏？

> ID：10248795
> 
> 赞同：10
> 
> 时间：2012-04-20T15:07:32.060
> 
> 标签：java, eclipse, debugging, breakpoints, decompiler

我正在尝试在反编译代码中设置条件断点，但 Eclipse 不断给我错误：

> 条件断点有编译错误
> 
> 原因：评估必须包含一个表达式或一组格式良好的语句

我的情况很简单，只是试图与字符串值进行比较。我已经尝试了以下所有方法，但每一个都出现错误：

```
myObj.toString() == "abc123"
myObj.toString().equals("abc123")
if(myObj.toString() == "abc123"){ return true; }
true == true 
```

我还尝试了在行尾有或没有分号的每种组合，以及间距和换行符的每种组合，以及在我的条件周围有或没有 {} 的每种组合。基本上，我不知道为什么这不起作用......

我试图调试的代码在一个用 JD-Eclipse 反编译的 jar 中。正常断点在此代码中工作正常。

有谁知道这里发生了什么？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:27:26.530

这个[Eclipse FAQ](http://wiki.eclipse.org/FAQ_How_do_I_set_a_conditional_breakpoint%3F)页面包含正确 CBP 定义的语法以及它们不起作用的最常见原因。在您的情况下，我认为以下适用：

> 如果您在类文件不包含局部变量表的类中设置断点，则可能会发生这种情况。例如，假设您要在 Class.forName(String) 上设置条件断点。如果您有 rt.jar 的源附件，则内容辅助将允许您通过变量名 className 来引用参数。但是，在调试运行时，只有在类文件包含局部变量表时才能知道变量名。根据编译时使用的选项，此信息可能已从类文件中删除。

JD 可能在反编译您的 jar 时伪造了变量名，因此在条件表达式中使用“myObj”会产生编译时错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:04:10.143

也许条件断点不如一般工作。例如，考虑：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=278146](https://bugs.eclipse.org/bugs/show_bug.cgi?id=278146)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T08:55:02.107

这可能是eclipse中的错误。eclipse 所做的是将新方法或类似方法编织到您设置断点的文件的源代码中并编译它。如果在此过程中出现问题，您的条件断点将神秘地失败。

您可以按照我在下面使用的方法，在调试中运行 eclipse 来尝试追踪问题：-

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=341232#c21](https://bugs.eclipse.org/bugs/show_bug.cgi?id=341232#c21)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-23T23:34:52.143

如果出现“true == true”条件，您只需添加 return 语句：

```
return true == true; 
```

对于缺少局部变量表的其余问题应该是解释。为此向 Mazaneicha +1。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-23T23:43:17.407

如果出现“true == true”条件，您只需添加 return 语句：

```
return true == true; 
```

对于缺少局部变量表的其余问题应该是解释。为此向 Mazaneicha +1。

如果您尝试通过名称引用方法参数，则只需尝试将名称更改为“arg0”、“arg1”等。

例如，您可以这样做：

```
arg0 == null 
```

很容易猜到变量名。只需放置无条件断点并在“变量”视图中查看变量列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-02T06:48:09.950

只是添加一些可能对其他人有帮助的东西，因为我在一段时间后刚刚解决了这个问题。当我遇到这个问题时，我也在使用 JD-Eclipse 进行调试。

确保所有必要的 jar 文件都在 Classpath 中。你的条件语句可能很简单，比如“return true”；但是一旦选中了“条件断点”复选框，则可能是（我也不能确定）Eclipse 调试器将针对更大范围检查 Eclipse 项目的类路径，而不仅仅是“返回真”行。

由于我使用的是 JD-Eclipse，所以我没有费心添加所有必要的 jar 文件。我在项目的类路径中添加了jar文件后问题解决了

如果您使用远程调试，您还可以尝试配置，使您的 Eclipse 项目的 JDK 与目标 JVM 的 JRE 兼容。

# python - pysmb 的例子

> ID：10248796
> 
> 赞同：13
> 
> 时间：2012-04-20T15:07:32.550
> 
> 标签：python, windows, samba

你能给我一个使用 pysmb 库连接到一些 samba 服务器的例子吗？我读过有类 smb.SMBConnection.SMBConnection(username, password, my_name, remote_name, domain='', use_ntlm_v2=True) 但我不知道如何使用它

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-05-08T14:25:58.130

我最近一直在使用 pysmb 进行网络共享枚举，发现找到好的/完整的例子并不容易。我建议您参考我为枚举 smb 与 pysmb 共享而编写的一个小脚本：[https ://github.com/n3if/scripts/tree/master/smb_enumerator](https://github.com/n3if/scripts/tree/master/smb_enumerator)

另外，为了完整起见，我在这里发布完成连接和枚举的代码片段：

```
from smb import SMBConnection

try:
    conn = SMBConnection(username,password,'name',system_name,domain,use_ntlm_v2=True,
                         sign_options=SMBConnection.SIGN_WHEN_SUPPORTED,
                         is_direct_tcp=True) 
    connected = conn.connect(system_name,445)

    try:
        Response = conn.listShares(timeout=30)  # obtain a list of shares
        print('Shares on: ' + system_name)

        for i in range(len(Response)):  # iterate through the list of shares
            print("  Share[",i,"] =", Response[i].name)

            try:
                # list the files on each share
                Response2 = conn.listPath(Response[i].name,'/',timeout=30)
                print('    Files on: ' + system_name + '/' + "  Share[",i,"] =",
                                       Response[i].name)
                for i in range(len(Response2)):
                    print("    File[",i,"] =", Response2[i].filename)
            except:
                print('### can not access the resource')
    except:
        print('### can not list shares')    
except:
    print('### can not access the system') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-25T04:57:14.723

SMBConnection 类将允许您以阻塞模式访问远程 Samba 服务器上的文件。

要检索远程服务器上共享文件夹中的文件列表，

```
from smb.SMBConnection import SMBConnection
conn = SMBConnection(userid, password, client_machine_name, remote_machine_name, use_ntlm_v2 = True)
conn.connect(server_ip, 139)
filelist = conn.listPath('shared_folder_name', '/') 
```

返回的文件列表将是`SharedFile`实例列表。

更多示例可以`tests/SMBConnectionTests`在 pysmb 源包中的文件夹中找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-27T07:04:56.337

例如，您想通过 pysmb 存储一个文件，如下所示：

```
from smb.SMBConnection import SMBConnection

file_obj = open('image.png', 'rb')

connection = SMBConnection(username=username,
                           password=password,
                           remote_name=remote_name,  # It's net bios  name
                           domain=domain,
                           use_ntlm_v2=True)

connection.connect(ip=host)  # The IP of file server

connection.storeFile(service_name=service_name,  # It's the name of shared folder
                     path=path,
                     file_obj=file_obj)
connection.close() 
```

# javascript - json - 自引用数据到树中

> ID：10248799
> 
> 赞同：0
> 
> 时间：2012-04-20T15:07:42.700
> 
> 标签：javascript, json, tree, hierarchy, hierarchical-data

我有表格中的项目列表

ID - 家长 ID - 姓名

该列表在 JSON 中，如下所示

```
[
    {
        "id": 1,
        "parent_id": 0,
        "name": "item 1"
    },
    {
        "id": 2,
        "parent_id": 0,
        "name": "item 2"
    },
    {
        "id": 3,
        "parent_id": 1,
        "name": "item 3"
    }
] 
```

如何使用 javascript 将其转换为这样的嵌套列表？（没有嵌套级别限制）

```
[
    {
        "id": 1,
        "parent_id": 0,
        "name": "item 1",
        "children": [
            {
                "id": 3,
                "parent_id": 1,
                "name": "item 3"
            }
        ]
    },
    {
        "id": 2,
        "parent_id": 0,
        "name": "item 2"
    }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:43:39.907

这几乎是 python 中的一个衬垫（假设每个父母只有一个孩子）

```
import json
from pprint import pprint

Data = '[{"id": 1,"parent_id": 0,"name": "item 1"},
         {"id": 2,"parent_id": 0,"name": "item 2"},
         {"id": 3,"parent_id": 1,"name": "item 3"}]'
List = json.loads(Data)
[[IItem.update({'children' : List.pop(List.index(Item))})  for IItem in List if Item['parent_id'] == IItem['id']] for Item in List]
Data = json.dumps(List)
pprint(Data) 
```

如果您需要多个孩子，这会稍微改变一些事情。

# java - 如何使用 Spring 的 JdbcTemplate 忽略数据库表名区分大小写？

> ID：10248812
> 
> 赞同：2
> 
> 时间：2012-04-20T15:08:29.397
> 
> 标签：java, spring, case-sensitive, jdbctemplate

我们的 Java (JDK6) 应用程序必须支持不同的数据库，例如 Oracle、SQL Server 和 DB2。我们使用 Spring 3.0 和 JDBCTemplate 进行数据库访问。我们的一位客户使用 SQL Server 2005 区分大小写并自动大写表名。

显然，诸如“select * from mytablename m”之类的查询不适用于所述客户端，因为他将拥有表 MYTABLENAME。

例如，对于以下代码，我得到了一个很好的异常：

```
this.jdbcTemplate.queryForOject("select * from mytablename m");
`Exception in thread "main" org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [select * from mytablename m]; nested exception is java.sql.SQLException: Invalid object name 'mytablename'.` 
```

我不得不修改代码——因为我无法更改客户的数据库选项——所以最明显的解决方案是将我们查询中的所有表名都大写。我知道这对这个客户有用，但是如果一个新客户有一个区分大小写和小写表名的数据库怎么办？

到目前为止，我还没有成功地找到更广泛的解决方案。我发现的大多数答案都需要更改数据库的区分大小写或重写查询。我试过使用：`this.jdbcTemplate.setResultsMapCaseInsensitive(true);`但如果我理解得很好，它只适用于我的查询结果，而不是查询本身。

有没有办法使用 Spring 的 JdbcTemplate 执行不区分大小写的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:35:14.907

如果您支持大量数据库，您可能会发现比区分大小写的名称更多的问题。这是一个很好的机会来强调使用接口抽象数据访问以及为每个受支持的数据库供应商编写实现的重要性。

在您的应用程序中，您应该对界面进行编码。当您使用 spring 时，您可以使用依赖注入在数据访问层中使用适当的 DB 实现；它只是对应用程序上下文配置文件的一个微不足道的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:21:50.400

我认为您的问题是这`user`是MS-SQL 服务器上的[reserverd 关键字。](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)

也看看这里：[SQL 语法是否区分大小写？](https://stackoverflow.com/q/153944/540286)

# r - 您将如何使用 R arules 包中的 read.transactions 处理这个问题？

> ID：10248816
> 
> 赞同：2
> 
> 时间：2012-04-20T15:08:50.740
> 
> 标签：r

我正在尝试使用函数读取 .txt 文件`read.transactions`。这是我的文件的结构：

```
1121,1141,1212,1311,1343,2111,2171,2213,2215,2311,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
1111,1112,1126,1145,1146,1181,1213,1441,2122,2322,3311,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
1172,2131,2173,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
1141,1223,1416,2322,2323,112701,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, 
```

我正在使用这行代码来执行此操作：

```
tr <- read.transactions("disco.txt", format = "basket", sep=',',rm.duplicates= TRUE) 
```

但我得到的是这样的（`inspect(head(tr))`）：

```
1 {,      
   1121,  
   1141,  
   1212,  
   1311,  
   1343,  
   2111,  
   2171,  
   2213,  
   2215,  
   2311}  
2 {,      
   1111,  
   1112,  
   1126,  
   1145,  
   1146,  
   1181,  
   1213,  
   1441,  
   2122,  
   2322,  
   3311} 
.
.
. 
```

我的问题是：如何从这些交易中删除“空”项目集？这个想法是稍后应用先验算法以获得有吸引力的规则。你知道那个算法是否可以`apriori`处理`R`这个问题？我已经将先验算法应用于我刚刚向您展示的事务，但其中许多在包含空项集方面是无用的。

提前谢谢了！问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:45:01.147

我认为尾随逗号是这里的问题。这就是为什么我认为如果你只修剪最后的“，”并使用`read.transactions()`

它不是特别优雅，但可以完成工作：

```
library("arules")

temp <- readLines("stack.dat")
for (i in 1:length(temp))
  temp[i] <- gsub(",*$", "", temp[i])
writeLines(temp, "stack_mod.dat")

tr <- read.transactions("stack_mod.dat", format = "basket", sep=',', rm.duplicates=TRUE) 
```

这个可以吗？

# wcf - 在 Metro Windows 8 应用程序开发中未显示 Web 服务已完成事件

> ID：10248819
> 
> 赞同：1
> 
> 时间：2012-04-20T15:09:09.713
> 
> 标签：wcf, windows-phone-7, asynchronous, wcf-data-services, windows-runtime

您好，这是我在这里的第一个问题，我创建了一个托管在 Azure 上的 Web 服务......我有一个 Windows 手机客户端应用程序和一个 Windows 8 Metro 客户端应用程序，现在当我连接 wp7 应用程序时，我使用这些方法来获取windows phone 上的服务中的一些东西：

```
 TimeTierBusiness.BusinessesClient client = new TimeTierBusiness.BusinessesClient();

        client.GetAllCompleted += new EventHandler<TimeTierBusiness.GetAllCompletedEventArgs>(client_GetAllCompleted);
        client.GetAllAsync(); 
```

为了得到结果，我只需转到 client_GetAllCompleted，如下所示：

```
 void client_GetAllCompleted(object sender, TimeTierBusiness.GetAllCompletedEventArgs e)
    {
        listNearbyBusinesses.ItemsSource = e.Result;
        myPopup.IsOpen = false;
    } 
```

现在在 Windows 8 Metro 上，没有可以添加的 GetAllCompleted 事件来获得结果，当我在 Windows 8 上调用客户端时，我得到的只是等待的 GetAllAsync() 方法......

任何帮助将不胜感激，因为我现在无法在我的 Metro 应用程序上使用此服务

谢谢 ：）

好的，所以解决方案是，要创建一个异步方法，请参见下面的代码：

```
 //My WCF Service Client
        TimeTierBusiness.BusinessesClient bClient = new TimeTierBusiness.BusinessesClient();
        //The list I am going to get from the service
        public List<TimeTierBusiness.BusinessRatingViewModel> listBusinessViewModel; 
```

此方法从服务中异步填充列表

```
 private async void GetAllAsyc()
    {

        System.Collections.ObjectModel.ObservableCollection<TimeTierBusiness.BusinessRatingViewModel> x = await bClient.GetAllAsync();
        listBusinessViewModel = x.ToList();
        ItemListView.ItemsSource = listBusinessViewModel;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:45:41.580

Windows 8（实际上是它附带的 .NET 4.5）具有有史以来最令人讨厌的特性之一。它基于 await/async 关键字，它本质上允许您编写异步代码，就好像它是同步的一样. 在工作和宠物项目中，我最终都编写了大量异步代码，在看到这个功能后，我决定将我的下一个孩子作为牺牲献给 .NET 人（因为这个功能就是很好，因为我已经有 3 个孩子，并且真的不想要另一个）。

它的要点是您编写用于调用异步服务的代码（在这种情况下），就像您使用常规方法一样，但不是挂钩事件以完成，您只需“等待”异步调用的结果并在在它下面的行，继续处理结果 - 编译器做了一些黑魔法（如果你曾经使用过 yield return，它是一种非常相似的黑魔法）并将你的方法变成一系列方法 + 一个状态机以正确的顺序调用。

[在此处阅读有关它的更多信息](http://msdn.microsoft.com/en-us/library/hh191443%28v=VS.110%29.aspx)

# java - 在没有 Apache POI 的情况下解析 Excel 文件

> ID：10248821
> 
> 赞同：5
> 
> 时间：2012-04-20T15:09:10.437
> 
> 标签：java, apache-poi

我知道我们可以使用 Apache POI 来解析 Excel 文件并获取数据。但我听说一个奇怪的事情是，excel 文件可以以类似于我们解析 CSV 的方式传递（就像只是从文件 Stream 中读取文件并用“逗号”分隔符分隔每个列值）。当我们解析 Excel 时，我们必须使用制表符作为分隔符。是否可以？如果是，那么为什么 Apache 会提出如此复杂的框架。我很困惑。有人能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T15:19:27.233

CSV 是一种文本格式，因此可以使用分隔符对其进行解析。旧 Excel 是一种二进制和专有格式，因此需要巧妙的解码。新的 Excel 格式是压缩的 XML，但在将其转换为像逐个读取单元格这样简单的东西之前，还应该了解该文档的结构。所以你的问题的答案是否定的，你需要使用 Apache POI，而且 - 这没有任何问题。

附带说明一下，在成为一名优秀开发人员的道路上，您需要在寻求帮助之前学会做一些自己的研究。弄脏你的手是学习东西的最好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T15:14:29.227

您可能对所听到的内容感到困惑，或者告诉您的人感到困惑。

Excel 文件的某些部分*可以*（某种程度上）存储为 CSV 文件，因为表格数据结构非常适合 CSV 文件格式。但是，如果您以 CSV 格式保存，那么您只会在每个单元格中获得纯文本 - 您会丢失所有格式信息、任何图表、多个工作表等。

本机 XLS excel 格式是 Apache POI 使用的，因此可以处理 excel 中的所有内容，而不仅仅是某些单元格中的限制性纯文本。CSV 文件有其用途，但它们绝对不是普通 Excel 文件的直接替代品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-03T21:08:14.380

我尝试在不使用任何外部 JAR（如 POI 或任何其他 JAR）的情况下读取/写入 excel 文件。我能够将文件写入 xls 格式。这是我的代码

```
FileWriter fwriter = new FileWriter(file,true);
writer = new BufferedWriter(fwriter);
writer.newLine();
writer.write("a"    + "\t");
writer.write("b"    + "\t");
writer.write("c"    + "\t");
writer.write("d"    + "\t");
writer.write("e"    + "\t");
writer.write("f"    + "\t"); 
```

在这里阅读文件是我的阅读代码

```
if(file != null) {
            BufferedReader reader = null;
            try {
                reader = new BufferedReader(new FileReader(file));
                String line;
                while((line = reader.readLine()) != null) {
                    String[] component = line.split("\\t");
                }
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                if(reader != null) {
                    try {
                        reader.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-08T07:46:47.577

```
InputStream is = new FileInputStream(new File(filepath));
        StreamingReader reader=null;
        try {
            reader = StreamingReader.builder()
                    .rowCacheSize(100)     
                    .bufferSize(4096)     
                    .sheetIndex(0)        
                    .read(is);
        } catch (Exception e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }finally{
            is.close();
        }
        //pass here to reader and itrate it 
          for (Row row : reader) {
            if (row.getRowNum()!=0){
                for (Cell cell : row) {
              // write ur logic to store ur value 
                }

            }
        } 
```

# android - 我无法使用 Intent 的 getSerializableExtra 恢复日历

> ID：10248823
> 
> 赞同：0
> 
> 时间：2012-04-20T15:09:21.053
> 
> 标签：android, android-intent, serializable

我把Extras放在活动A中：

```
notificationIntent.putExtra(KEY_ID, id);
notificationIntent.putExtra(KEY_CALENDAR, day);
A.logCalendar("calendar: ", day); // the Calendar is not null at this point 
```

I getExtras en 活动 B：

```
int id = intent.getIntExtra(Constantes.KEY_ID, 0);
A.b("My id: " + id); // The id is recovery
Calendar time = (Calendar) intent.getSerializableExtra(Constantes.KEY_CALENDAR);
if (time == null)
    A.b("null calendar"); // The calendar is always null, WHY? 
```

我做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:11:33.720

您不能序列化整个 Calendar 对象并使用 Extra 发送它。您只能发送原语、数组和字符串。您可能需要考虑像 Parcellable 这样的替代方案。

# java - 带有编译时检查的 l18n 框架

> ID：10248824
> 
> 赞同：5
> 
> 时间：2012-04-20T15:09:24.083
> 
> 标签：java, internationalization, translation

我目前正在开发一个更大的 Java 桌面应用程序，现在我想添加翻译。l18n 系统让我困扰的是，它不提供任何类型的编译时检查。

在java的系统中，你有类似a的东西`HashMap`，其中每个本地化字符串都有一个“Key”，翻译后的字符串就是“Value”。这看起来像这样（取自[教程示例](http://docs.oracle.com/javase/tutorial/i18n/intro/after.html)）：

```
Locale currentLocale;
ResourceBundle messages;

currentLocale = new Locale(language, country);

messages = ResourceBundle.getBundle("MessagesBundle", currentLocale);
System.out.println(messages.getString("greetings")); 
```

如果您有一个简单/小型的应用程序，这很好用。但是在一个包含数千个翻译字符串的大型应用程序中，您可能会在“Key”中出现拼写错误，从而得到一个空字符串或错误字符串。

运气好的话，应用程序会抛出一个`RuntimeException`告诉你它的信息，但即便如此，你也可能没有达到这一点，因为在某些情况下可能不会显示的对话框中使用了错误的“键” （说这是一个错误对话框）。

为了防止这种情况发生，使用提供编译时检查使用的“键”的系统会是更好的主意。这例如在 Android 中使用，您在 XML 文件中指定资源，然后将其索引并映射到类（包括要使用的“键”）。这样，你会得到这样的东西（来自[Android Docs](http://developer.android.com/guide/topics/resources/accessing-resources.html)）：

```
// Set the text on a TextView object using a resource ID
TextView msgTextView = (TextView) findViewById(R.id.msg);
msgTextView.setText(R.string.hello_message); 
```

如果你在那个“键”中有错字，你会在编译时得到一个错误（你的 IDE 也有“自动完成”）。

现在，要完成这样的工作，您需要一个小工具/脚本来执行索引部分并生成资源类 ( `R.java`)。在 Android 中，Eclipse 插件（或一般的 IDE）会为您执行此操作。

我现在的问题是：是否已经有一个系统可以用于 Java 中的普通桌面应用程序？还是我说的话大错特错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:27:32.993

这个问题有一个相当简单的解决方案。首先，不要使用魔术字符串作为代码，定义常量并引用它们。所以你改变..

```
messages.getString("greetings"); 
```

到

```
messages.getString(I18.GREETINGS_CODE); 
```

并有相应的班级；

```
public class I18 {

  public static final String GREETINGS_CODE = "greetings";

} 
```

接下来编写一个测试用例，`I18`在每个语言资源文件中查找类中的每个代码。如果任何资源文件缺少代码，则测试失败。它不是编译时间，但如果您有任何问题，您的项目将无法通过测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T08:05:17.520

我见过一些相当大的企业应用程序使用标准资源包并相信我，这不是问题。

成功的因素很少：

1.  资源组织
2.  资源助手
3.  资源工厂
4.  关键命名策略

广告 1\. 如果您决定使用单个资源包，您的问题将特别明显。不要走这条路。没有办法维护大的单个文件。您将面临密钥重复、密钥命名等问题。此外，对于大型应用程序，很少有人同时处理同一组文件是很常见的。在资源包的情况下，这意味着*大量*的合并和相互阻碍。这是常规编程团队的问题，但相信我，使用 Localizers 会**更糟**。
您需要的是多个小型资源文件。根据应用程序规模，它可能是每个模块一个文件，甚至每个对话框一个文件。如何拆分文件取决于实际应用程序，但我建议不要让资源文件长于两屏文本。
对于大量文件，问题在于如何组织它们 - 放入有效目录。我的建议是***分开***源代码中的资源文件（将它们放在名为 - 例如 - L10n 的单独目录中）。在资源文件根目录下，最好有语言文件夹（这样很容易将每种目标语言的翻译分开），尽管它需要弄乱 ResourceBundle.Control 类。然后在语言根目录下为每个模块创建子目录。在模块根目录下，您将拥有单独的子目录（具有非常大的应用程序），或者您将直接放置资源包。

广告 2.***没有办法***直接使用 ResourceBundle 类。如果文件中没有这样的键，或者没有您要查找的文件，则会引发[MissingResourceException](http://docs.oracle.com/javase/7/docs/api/java/util/MissingResourceException.html)问题之一。相反，您可能希望（在用户界面上）看到出现问题，例如感叹号之间的键名 (!the.key.does.not.exist!) - 这就是 Eclipse 的“外部化字符串” " 默认情况下。
您可能决定创建 Resource Helper，它可能是 ResourceBundle 的包装器，也可能是从它派生的。选择是你的（尽管像上面这样严肃的资源组织，合理的选择是派生，因为你需要创建自己的 ResourceBundle.Control 类）。除了简单的翻译处理之外，您还可以向 Resource Helper 添加其他功能，例如处理消息格式、复数形式等
。目前它不会处理您错误资源键名称的问题。您将需要实际的 UI 测试 - 拼写错误是可见的。如果使用错误的键（特别是对于使用复制粘贴设计模式的人；））我认为没有***任何***可以解决问题的技术。机器不思考。无论如何，您可以通过放置（例如）具有键常量或嵌套枚举的嵌套类来处理键问题。这种解决方案的问题是，每个模块都需要单独的资源助手，这不是好主意（尤其是在大型应用程序中）。这是可行的，但很麻烦。当然，IDE 用于外部化字符串的内置机制不适用于此解决方案。

广告 3\. 为了处理大量资源文件，您需要构建静态资源工厂（或工厂）来为您创建资源助手。我的策略是在工厂内嵌套一个公开可见的枚举，并将资源文件作为其常量。然后，我请求有效的捆绑包，例如：

```
ResourceHelper helper = ResourceFactory(
                          ResourceFactory.Bundles.ERRORS, Locale locale); 
```

Ad 4\. 为了避免混乱，团队必须决定单一资源键的命名策略。我对键名的建议（每个模块一个文件）是：

*   对话或单元
*   描述性名称
*   上下文

例如：

*   验证.invalid.username.error
*   验证.enter.pass.label
*   验证对话框标题
*   menu.main.file.open.item
*   login.dialog.ok.button

上下文（标签、dialog.title、item、error、message、pattern 等）对译者来说***非常重要***。翻译通常因上下文而异。这也是您不应该重复使用翻译的原因（除了非常常见的项目，如常见的按钮名称“OK”、“Cancel”、“Abort”、“Help”或常见的菜单名称和项目）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T15:22:12.157

我从不介意这样一个可以索引您的资源的工具。恕我直言，相当不寻常的要求。其中一种方法 - 不要在代码中使用字符串文字，而是将它们全部移动到一个类中，使用 static final 修饰符声明它们。将此常量用作资源映射的键。编写测试非常容易，使用反射将检查在单个类中声明的所有资源是否存在于资源文件中。这要容易得多，然后编写代码分析器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T09:21:39.427

我认为[c10n](https://github.com/rodionmoiseev/c10n/wiki/Overview)是您正在寻找的（正如@eee 所指出的那样，谢谢！）。

整个想法是让您免于编写容易出错的键，并用编译时检查的纯 Java 接口方法替换它们，并用翻译值进行注释。

例如：

```
public interface Bundle{
  @En("Hello, World!")
  @De("Hallo Welt!")
  String greeting();
}

// ... somewhere in your code
public class MyClass{
  private static final Bundle bundle = C10N.get(Bundle.class);

  public void myMethod(){
    System.out.println(bundle.greeting());
  }
} 
```

您可以对`Bundle`接口进行任何重构，重命名和移动方法，添加更多接口，扩展它们，组合它们。只要它使用*javac*编译，您就可以确定您会看到正确的翻译。

更多详细信息请参见[上面的链接](https://github.com/rodionmoiseev/c10n/wiki/Overview)。

# php - 日期出现意外错误？

> ID：10248827
> 
> 赞同：0
> 
> 时间：2012-04-20T15:09:36.900
> 
> 标签：php, date

我收到如下错误：

```
Parse error: syntax error, unexpected '(', expecting ',' or ';' in X:\xampp\htdocs\lib.php on line 15 
```

当我尝试将日期保存到变量时。这是我的代码...（PHP）

```
protected $title = date('D, d M Y'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:22:08.630

您应该在构造函数中设置属性默认值：

```
class Something
{
    protected $title;

    public function __construct()
    {
        $this->title = date('D, d M Y');
    }

} 
```

# php - php - 删除单页表单提交上的单条记录

> ID：10248828
> 
> 赞同：0
> 
> 时间：2012-04-20T15:09:37.807
> 
> 标签：php, forms

我对PHP很陌生，所以如果这个问题令人讨厌，请原谅我......

我有一个页面列出了来自数据库的近 150 条记录。我希望用户一次只能删除一条记录（没有复选框）。我希望每个名称旁边都有一个删除按钮，当用户单击它时，页面会刷新并显示更新的列表和上面的成功消息：“%Name% 已成功删除”。（其中 %Name% 是他们删除的实际名称）

我的问题是：我可以用表格做到这一点吗？如果是这样，我会将名称和删除按钮分配给哪个表单元素？

或者，我是否需要将删除按钮设置为锚元素，并将 URL 设置为可以处理删除请求的页面，然后将用户重定向回来（我担心只有这样我才能发送“成功”消息回来，我知道是通过 Session 变量，可以吗？）

或者，还有其他一些我完全不知道的方法吗？

任何反馈将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:25:33.820

PHP 会话是保存在用户身上并通过 cookie 跟踪的服务器端数据。除非您专门发送数据，否则数据不会发送给用户。

[http://www.php.net/manual/en/session.examples.basic.php](http://www.php.net/manual/en/session.examples.basic.php)

您可以为页面上的每条记录创建一个单独的表单，也可以通过 JavaScript 单击其中一条记录并提交一个表单。您可以重新加载页面并告诉用户他们是否成功，或者通过 ajax 发送并更新页面的各个部分。

[http://www.w3schools.com/ajax/ajax_intro.asp](http://www.w3schools.com/ajax/ajax_intro.asp)

您可以使用直接的 javascript 或在 js 之上开发的东西，如 jquery 或 moo 工具，以使事情变得更容易。这是jquery中ajax函数的一些数据：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

至于名称和删除。删除可以是输入、按钮、图像等。名称可以是已删除记录的用户 ID，它会发回名称，或者只是从表单的一部分中获取，以向用户显示删除了哪条记录。

有很多方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:26:17.547

你可以这样做...这里的关键概念是在数据库中有一个唯一的字段，比如 id 例如你在数据库表中有 id、name、username 和 password 字段，所以看看下面的两种方式

**1.使用超链接**

```
<?php
mysql_connect("fostname","username","password");
mysql_select_db("database_name");
$q = mysql_query("SELECT * FROM tbl_name");
if(mysql_num_rows($q)>0)
{
echo"<table>";
echo "<tr><td>name</td><td>action</td></tr>";
while($name = mysql_fetch_assoc($q))
{
?>

<tr><td><?php echo $name['name'];?></td><td><a href="delete.php?id=<?php echo $name['id'];?>">Delete</a></td></tr>
<?php
}

echo "</table>";
}
?> 
```

这就是您在列表页面中所做的......现在查看需要在超链接中定义的路径上的 delete.php

删除.php

```
<?php
mysql_connect("fostname","username","password");
mysql_select_db("database_name");
$id = $_GET['id'];
$q = mysql_query("delete from tbl_name where id = '$id'");
header("Location: list.php");
?> 
```

**2\. 使用表格**

```
<?php
    mysql_connect("fostname","username","password");
    mysql_select_db("database_name");
    $q = mysql_query("SELECT * FROM tbl_name");
    if(mysql_num_rows($q)>0)
    {
    echo"<table>";
    echo "<tr><td>name</td><td>action</td></tr>";
    while($name = mysql_fetch_assoc($q))
    {
    ?>

    <tr><td><?php echo $name['name'];?></td><td><form action='delete.php' method='post'> <input type='hidden' value='<?php echo $name["id"];?>'></form></td></tr>
    <?php
    }

    echo "</table>";
    }
    ?> 
```

删除.php

```
<?php
    mysql_connect("fostname","username","password");
    mysql_select_db("database_name");
    $id = $_POSTs['id'];
    $q = mysql_query("delete from tbl_name where id = '$id'");
    header("Location: list.php");
    ?> 
```

（注意：list.php 是您列出所有信息的页面）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T15:19:47.850

为什么它必须是一个/一个形式？您可以使用链接来删除单个条目，例如 href="#?job=delete&name=name 而不是提交按钮。另一种解决方案是为每个条目创建一个表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T15:19:06.633

您可以使用包含您的数据的页面（例如 A）。

当你拥有它时，你可以在每个元素的按钮上“锚定”一个链接（分配一个服装 ID 来识别它）。单击按钮后，您将在内置数组中添加`$_GET`已删除的记录的 id（obv。您必须删除它）。现在您可以重定向到同一页面 (A)。

在此页面（即您拥有初始数据的同一页面）上，您检查`$_GET`添加的字段。如果是，则意味着您在删除后到达那里，您可以显示该消息。否则是您第一次进入这里，所以您不必显示任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T15:20:16.547

见这里：[http ://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

在某个地方制作一个带有隐藏字段且没有提交按钮的表单，当表单提交时，它会删除具有给定值的行。然后在回显所有行时，在每个行旁边回显一个提交按钮，并带有“submitForm（x）”的onlick，其中“X”是可以确定要在数据库中删除哪一行的某个值。

# css - 最大高度不会缩放网站

> ID：10248830
> 
> 赞同：0
> 
> 时间：2012-04-20T15:09:41.883
> 
> 标签：css, html, scale, responsive-design

我能够缩放我的项目的宽度，但不能缩放高度（在 FireFox 和 Chrome 中尝试过，我知道 IE 不起作用）

这是我正在使用的 CSS：

```
section.main 
{
 max-height: 100%; 
 max-width: 100%; 
 border: 1px solid black; 
 width: 1000px; 
 height: 800px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:11:13.557

好吧，您指定高度为 800 像素。所以你的网站是 800px 高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:15:01.880

如果您想以 100% 扩展您的网站，您需要添加

```
section.main
{
  height:100%; width:100%
} 
```

或者

```
section.main
{
  min-height:100%; min-width:100%
} 
```

[http://jsfiddle.net/RQvLF/1/](http://jsfiddle.net/RQvLF/1/)

高度：100%；您需要一个以像素为单位指定高度的周围 div。或者你可以给你的 section.main 一个所需像素的高度。

最大高度：100%；而 max-width:100% 意味着这个 div 的高度和宽度不得大于 100%：

正如你可以说的： `max-width:600px;`这样你的内部内容就不会超过 600 像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T15:15:56.200

确保你有：

```
html, body
{
width : 100%;
height : 100%;
} 
```

要使 div 具有 % 高度，必须定义父级的高度。

请注意，您的边框会导致问题：该部分将是 100% 高度 + 2px。您可以使用：

```
section
{
box-sizing : border-box
} 
```

# objective-c - UIImage 上的人脸检测问题？

> ID：10248839
> 
> 赞同：0
> 
> 时间：2012-04-20T15:10:39.370
> 
> 标签：objective-c, uiimage

我正在尝试为我尝试过一个应用程序做一个面部检测应用程序，我从一个链接中获得了该参考，因为他们先转换`UIImageView`然后再转换窗口。默认情况下，检测是上下颠倒的，因此作为快速修复，他们翻转图像，然后将窗口翻转回来，使所有内容再次看起来正确。图像现在将位于屏幕底部，但我需要在不翻转图像和窗口的情况下检测面部。可能吗？如果是这样，请发布一些代码。

在这里，我放置了用于翻转图像的代码。

```
UIImageView* imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"steves.jpg"]];
[imageView setTransform:CGAffineTransformMakeScale(1, -1)];
[self.window setTransform:CGAffineTransformMakeScale(1, -1)];
[imageView setFrame:CGRectMake(0, 0, imageView.image.size.width, imageView.image.size.height)];
[self.window addSubview:imageView];
[imageView release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:21:27.757

显然有人很困惑。CIDetector 提供的人脸检测*不需要*图像倒置。您尝试使用的代码更有可能是出于其他原因翻转图像......或者根本没有充分的理由，这很常见。

[您可以在此处](http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/)找到使用 CIDetector 的简单教程示例。

# jquery - 使用 jQuery 在 IE7 中修改 STYLE 块

> ID：10248841
> 
> 赞同：1
> 
> 时间：2012-04-20T15:10:42.550
> 
> 标签：jquery, css, internet-explorer-7, styles, dhtml

我让用户更新其可定制小部件的样式，方法是为他们提供一个可编辑的文本区域，其中包含更新`<style>`元素的 CSS 代码`onchange`。

JS：

```
function updateWidgetStyling() {
    $("#stylePreview").html( $('#WidgetviewCustomCSS').val() );
} 
```

HTML：

```
<style id="stylePreview">
...
</style>

<textarea name="data[Widgetview][customCSS]" cols="30" rows="6" 
onchange="updateWidgetStyling()" id="WidgetviewCustomCSS">...</textarea> 
```

这适用于 Chrome、Firefox 和 IE9，但不适用于 IE7。

知道如何让它在那里工作吗？很不幸，但我们是 B2B，需要 IE7 支持。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:15:08.437

与其更新样式表，不如将其从 DOM 中移除并插入一个新样式表。这应该会触发页面的完全重新呈现。

# jquery - jQuery：捕获点击，但仍然允许选择文本

> ID：10248848
> 
> 赞同：1
> 
> 时间：2012-04-20T15:11:15.080
> 
> 标签：jquery, events, bind

我正在尝试创建一个内联文本区域，其中用户单击一段文本并且文本区域替换它。

一切顺利，但是当我尝试在该区域中选择/突出显示文本时，它会显示 textarea。

我注意到在 Trello 上，它设法避免了这种情况。

我的HTML如下：

```
<h2>Your Notes</h2>
<span id="notes_area" style="display: block;" data-entry-id="<%= @entry.id %>" title="Click to edit your notes.">
    <p><%= @entry.notes.present? ? "#{@entry.notes}" : "You have not added any notes for this episode." %></p>
</span> 
```

我的 CoffeeScript 如下（有很多删减）：

```
$("#notes_area").bind "mouseup", ->
    display_inline_note_form()

display_inline_note_form = ->
    # code goes here... 
```

我想这是一个已解决的问题，但我似乎在网上找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:37:17.263

您可以在调用“display_inline_note_form()”之前检查用户是否选择了任何文本。

```
$("#notes_area").bind "mouseup", ->
    var selectedTxtRange = getSelectedText();
    if(selectedTxtRange.toString().length == 0)
        display_inline_note_form() 
```

这是 getSelectedText() 定义，我[从 CodeToad 得到这个代码片段](http://www.codetoad.com/javascript_get_selected_text.asp)，

```
function getSelectedText()
{
    var txt = '';

     if (window.getSelection)
    {
        txt = window.getSelection();
             }
    else if (document.getSelection)
    {
        txt = document.getSelection();
            }
    else if (document.selection)
    {
        txt = document.selection.createRange().text;
            }

      return txt;    
} 
```

# entity-framework - 从自定义多项目解决方案模板创建 EDMX

> ID：10248851
> 
> 赞同：1
> 
> 时间：2012-04-20T15:11:27.340
> 
> 标签：entity-framework, project-template

我正在尝试为我工作时使用的解决方案结构创建一个多项目（解决方案）自定义模板。该结构由一个包含 .EDMX 的数据项目、一个包含我们的实体和规则的业务库项目以及 WCF 服务项目本身组成。我可以毫无问题地创建项目，但我希望能够打开实体数据模型向导，以便用户可以将 .EDMX 设置为模板执行的一部分。到目前为止，我已经在 Google 上花了几个小时寻找解决方案，甚至打开了 EDMX 的项目模板，并查看了 Reflector 中的 System.Data.Entity.Design dll。是否像在 EDMX 项目模板中那样将向导元素添加到我的模板中一样简单？还是我必须跳过其他的箍？

提前致谢！

# c - c - 取消引用指向不完整类型的指针 - 指向 char* 的指针出错

> ID：10248853
> 
> 赞同：0
> 
> 时间：2012-04-20T15:11:32.317
> 
> 标签：c, pointers, dereference

我在访问另一个结构中的 char* 时遇到问题，代码如下：

**用户网络.c：**

```
struct User_Networks_t {
    SocialNetwork network;
};

typedef struct User_Networks_t* User_Networks;

void aaa(User_Networks u1)
{
    u1->network->Name = "test";  /// ERROR: dereferencing pointer to incomplete type 
} 
```

这是我在**SocialNetwork.h**中的内容：

```
typedef struct SocialNetwork_t* SocialNetwork; 
```

**SocialNetwork.c**中的结构：

```
struct SocialNetwork_t {
    char *Name;
}; 
```

为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T15:16:12.843

当您`SocialNetwork_t`在实现文件**SocialNetwork.c中定义结构时，编译器在编译****User_Network.c**时无法知道结构的内容，如果您只使用`#include <SocialNetwork.h`那里。编译器解析头文件**SocialNetwork.h**并知道它应该`SocialNetwork_t`稍后找到结构的定义，但在编译 .h 中的取消引用时不会遇到该定义`void aaa(...)`。因此，将完整的结构定义放入**SocialNetwork.h**中。

[更新]我会详细说明这个答案。我猜你的文件**User_Network.c**看起来像这样：

```
#include "SocialNetwork.h"
struct User_Networks_t {
    SocialNetwork network;
};

typedef struct User_Networks_t* User_Networks;

void aaa(User_Networks u1)
{
    u1->network->Name = "test";  /// ERROR: dereferencing pointer to incomplete type 
} 
```

当您的编译器编译此文件时，预处理器将 `#include "SocialNetwork.h" 替换为该文件的内容，从而为您提供：

```
/* START content from the included file */
typedef struct SocialNetwork_t* SocialNetwork;
/* END */
struct User_Networks_t {
    SocialNetwork network;
};

typedef struct User_Networks_t* User_Networks;

void aaa(User_Networks u1)
{
    u1->network->Name = "test";  /// The struct SocialNetwork is not defined here
} 
```

当编译器开始实际编译时，这将是完整的文件。因此，当您尝试从 访问该`Name`字段时`struct SocialNetwork`，编译器看不到结构，而只看到指针类型的 typedef。因此，它无法知道您实际指的是哪种类型。

# ruby-on-rails - 在一个表单上为多个非嵌套模型运行验证

> ID：10248859
> 
> 赞同：0
> 
> 时间：2012-04-20T15:12:12.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个表格可以收集两个完全不相关的模型的数据。模型没有嵌套。我想知道执行验证和显示组合错误消息的最佳方法。

我假设我需要这样的视图，但我不确定如何组合错误消息并一次显示它们。

```
<%= form_for @first_model do |f| %>
    <%= render 'shared/error_messages', object: f.object %>

    <%= f.label :instructions %>
    <%= f.text_area :instructions %>

    <%= fields_for @second_model do |ff| %>
        <%= ff.label :quantity %>
        <%= ff.text_field :quantity %>
    <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:44:50.310

`fields_for`在你看来是错误的。如果`second_model`嵌套在`first_model`.

我相信你必须在这里改变你的方法。我的建议是你应该定义一个新`class`的作为一个无表模型来统一你的两个模型的属性。然后你应该发展你对这个新模型的看法。

顺便说一句，`active_attr`（在[此处](https://github.com/cgriego/active_attr)找到）gem 在让您定义此类模型方面做得非常出色。

# blackberry - 尝试设置查看相机视口

> ID：10248867
> 
> 赞同：1
> 
> 时间：2012-04-20T15:13:01.333
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-storm

我正在这个应用程序中创建一个黑莓相机应用程序我正在根据我的要求使用自动图像捕捉功能。但是我会在这里尝试一件事，但直到现在我还没有成功。我尝试第二件事是当相机运行时不显示他在屏幕上捕捉到的任何东西，但捕捉到那个特定的东西。我成功了，无法在屏幕上显示它，但在那之后，当我检查我的图片时，它不仅绘制了 0 kb .jpeg 文件。我尝试隐藏相机使用背景图像但无效。意味着当相机运行时，我想用其他图像覆盖我的屏幕，无法理解我的相机已打开但捕获图像。我正在浏览这段代码。

```
 public class ImageCaptureDemo extends UiApplication
{
public static void main(String[] args)
{
    ImageCaptureDemo app = new ImageCaptureDemo();
    app.enterEventDispatcher();

}

public ImageCaptureDemo()
{
    pushScreen(new ImageCaptureDemoScreen());

}

class ImageCaptureDemoScreen extends MainScreen
{   
    Timer timer ;
    Player _p;
    VideoControl _videoControl; 
    Bitmap back_ground=Bitmap.getBitmapResource("loadingImage.png");
    Field videoField=null;
    public ImageCaptureDemoScreen()
    {

        super();
        setTitle("Main Screen BackGround");

    try 
        {

            _p = javax.microedition.media.Manager.createPlayer("capture://video?encoding=jpeg&width=240&height=160");
            _p.realize();
            _p.prefetch();
            _videoControl = (VideoControl) _p.getControl("VideoControl");

            if (_videoControl != null)
            {

                 videoField = (Field) _videoControl.initDisplayMode (VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field");

               HorizontalFieldManager H=new HorizontalFieldManager()
               {
                   public void paint(Graphics graphics) {
                         //Draw the background image and then call paint.
                     graphics.clear();
                     graphics.drawBitmap(0, 0,480, 240, back_ground, 0, 0);
                     super.paint(graphics);

                 }            

                 protected void sublayout( int maxWidth, int maxHeight)
                  {
                  int width = 240;//240
                  int height = 180;//180
                  super.sublayout( width, height);
                  setExtent( width, height);
                  }

               };

               if(videoField != null)
               {
                     H.add(this.videoField);
                     add(H);
                     System.out.println("VideoField===="+videoField);
               }

                _p.start();

                System.out.println("VideoField"+videoField);

            } 
        }
        catch(Exception e)
        {

            Dialog.alert(e.toString());
        }

        timer = new Timer();
        timer.schedule(new CountDown(), 2000);

    }

    public class CountDown extends TimerTask {
      public void run() {
         DismissThread dThread = new DismissThread();

      }
   }
 public void dismiss() {
      timer.cancel();
     invokeAction(ACTION_INVOKE);

    _videoControl.setVisible(false);

   }
   public class DismissThread implements Runnable {
          public void run() {

             dismiss();
          }
       }

    protected boolean invokeAction(int action)
    {

        boolean handled = super.invokeAction(action); 

        if(!handled)
        {
            if(action == ACTION_INVOKE)
            {   
                try
                {   
                    String encoding1 = "encoding=jpeg&width=640&height=480&quality=normal";

                    byte[] rawImage = _videoControl.getSnapshot(encoding1);  

                    System.out.println("byte[]=="+rawImage);

                    FileConnection conn = (FileConnection)Connector.open("file:///SDCard/BlackBerry/pictures/"+System.currentTimeMillis()+".jpeg", Connector.READ_WRITE);
                    conn.create();
                    OutputStream out = conn.openOutputStream();
                    out.write(rawImage);
                    out.flush();
                    out.close();
                    conn.close();

                }
                catch(Exception e)
                {
                    _p.close();
                    Dialog.alert(e.toString());
                }
            }
        }           
        return handled;                
    }

}   
} 
```

请帮助我，这对我的项目是必要的。提前致谢

# android - 样式覆盖原生焦点矩形android

> ID：10248868
> 
> 赞同：0
> 
> 时间：2012-04-20T15:13:01.460
> 
> 标签：android, android-edittext, android-styles

对于我的项目，我有一个扩展 EditText 的自定义 EditText 视图。我也在对其应用样式..但是当我应用样式时，显示该字段集中的本机 RECTANGLE 似乎消失了.. 我的样式如下所示：

```
<style name="edit_text">
        <item name="android:layout_height">wrap_content</item>
        <item name="android:textColor">#000000</item>
        <item name="android:singleLine">true</item>
        <item name="android:cursorVisible">true</item>
        <item name="android:layout_marginBottom">20dip</item>
        <item name="android:background">@drawable/text_view_bg</item>
        <item name="android:focusable">true</item>
        <item name="android:focusableInTouchMode">true</item>

    </style>    
<style name="large_edit_text" parent="@style/edit_text">
            <item name="android:layout_width">740dip</item>
            <item name="android:focusable">true</item>
            <item name="android:focusableInTouchMode">true</item>
        </style> 
```

这显示了焦点矩形：

```
<medicalforms.form.FormEditText
        android:layout_width="580dp"
                        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:focusableInTouchMode="true"
        android:focusable="true"
        formview:form_id="first_name"

        formview:form_action="@string/action_property_change"
        /> 
```

这不会：

```
<medicalforms.form.FormEditText
        style="@style/large_edit_text"
        android:layout_weight="0"
        android:focusableInTouchMode="true"
        android:focusable="true"
        formview:form_id="first_name"

        formview:form_action="@string/action_property_change"
        /> 
```

有人能告诉我为什么吗？我想保持字段集中的原生矩形提示..但使用我的样式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:39:29.283

啊，就是这样：`<item name="android:background">@drawable/text_view_bg</item>`如果该可绘制对象只是一个普通图像，那么您将不会具有焦点、按下或选定状态。如果您查看用于默认 EditText 的可绘制对象，它由四个（或五个？）不同的状态图像组成。

# php - 使用 PHP 从我的网站发布到 Twitter

> ID：10248869
> 
> 赞同：1
> 
> 时间：2012-04-20T15:13:02.490
> 
> 标签：php, oauth, twitter

我正在查看 Twitter API，但我无法管理如何自动发布到我的 Twitter。

我想访问我网站上的一个页面，然后在我的 Twitter 上发布时间戳。

此代码运行一次，但之后不再生成推文：

```
<?php
$consumerKey    = 'myKey';
$consumerSecret = 'myConsumerKey';
$oAuthToken     = 'theToken';
$oAuthSecret    = 'theSecret';

require_once('twitteroauth.php');

// create a new instance
$tweet = new TwitterOAuth($consumerKey, $consumerSecret, $oAuthToken, $oAuthSecret);

//send a tweet
$tweet->post('statuses/update', array('status' => 'My awesome timestamp msg'));

?> 
```

有什么理由让它工作一次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:01:53.167

如果您尝试再次发布相同的消息，Twitter 会检测到您的推文何时与前一条相同并拒绝它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T08:31:18.807

新的 Twitter api 让这有点容易。Twitter 提供了一个专门用于放置在您的网页上[的 Twitter 按钮页面。](https://twitter.com/about/resources/buttons#tweet)

# python - 使用 Zeromq 的 Python 脚本停止接收消息

> ID：10248874
> 
> 赞同：3
> 
> 时间：2012-04-20T15:13:07.073
> 
> 标签：python, configuration, network-programming, zeromq

我有一个使用 zeromq 和 pyzmq 连接器的 python 脚本。脚本确实是一个基本的脚本，它使用 ZMQ_REP 套接字来接收消息，用它做一些小事情然后将其发送回来，所有这些都在无限循环中。没有多线程或其他任何东西。

问题是当我在我的服务器上运行该服务时，大约 15 小时后它停止响应，并且它仍在运行并且端口仍然绑定。因此，当我使用 ZMQ_REQ 套接字向该脚本发送消息时，我没有得到答案。当我重新启动脚本时，它会从 zmq 队列中获取所有未使用的消息，因此我怀疑问题出在 pyzmq 连接器或某些 python 或 zmq 套接字配置中。

我在 2 个不同国家/地区的 2 台不同服务器上尝试了该脚本，其中 1 台运行 ArchLinux，第二台 CentOS，在我的本地机器上，行为是相同的。此外，我尝试运行使用基本 python 套接字的 python 脚本，该套接字只接收字符串消息并将其发送回，它正在工作并在 10 天内毫无问题地发送回消息，而无需重新启动它。所以问题肯定出在 zmq/pyzmq 的某个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:45:25.513

消息多久发送一次？您可能需要实现心跳以保持可靠的连接。指南中列出的“[偏执海盗](http://zguide.zeromq.org/py%3aall#Robust-Reliable-Queuing-Paranoid-Pirate-Pattern)”模式效果很好。

# visual-c++ - Graphedit 生成非常大的 MP4 文件

> ID：10248876
> 
> 赞同：1
> 
> 时间：2012-04-20T15:13:18.980
> 
> 标签：visual-c++, directx, mp4, graphedit, mux

我使用 Graphedit 实用程序创建了一个用于实时流视频捕获的图表。我使用了来自 gdcl.co.uk/mpeg4 的 GDCL MP4 mux dll。它生成了 .mp4 文件，但大小非常大。如果我继续播放几秒钟，它会生成大小为 GB 的文件，比如 1.3 GB。我正在使用以下步骤生成图表

```
 Capture--> GDCL Mpeg-4 Multiplexor --> MP4 Writer 
```

谁能帮助我为什么会发生这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:56:37.033

多路复用器用于将不同的流多路复用到一个文件中。大多数情况下，这将是音频和视频流。但是多路复用器不编码音频或视频。如果需要 h.264 视频，则需要将 h264 编码器添加到图形中。例如，您可以为此使用[ffdshow](http://ffdshow-tryout.sourceforge.net/)。

[有关mp4 文件格式](http://en.wikipedia.org/wiki/MPEG-4_Part_14)、[H.264 视频压缩格式](http://en.wikipedia.org/wiki/Advanced_Video_Coding)和[mpeg4 的其他部分，](http://en.wikipedia.org/wiki/MPEG-4#MPEG-4_parts)另请参阅 wikipedia 。

# nosql - couchbase 和 couchdb 有什么区别？客户端是否完全可互操作？

> ID：10248878
> 
> 赞同：1
> 
> 时间：2012-04-20T15:13:37.047
> 
> 标签：nosql, couchdb, couchbase

相关：[CouchDB 和 Couchbase 之间的区别](https://stackoverflow.com/questions/5578608/difference-between-couchdb-and-couchbase)

目前尚不清楚客户端和库是否可互操作。

*   我可以将 jcouchdb 与 couchbase 一起使用吗？
*   我可以将 couchbase 客户端库与 couchdb 一起使用吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-20T18:24:54.460

CouchDB 是一个后端数据库解决方案。Couchbase 是一种缓存解决方案。

您遇到的困惑是 Couchbase 2.0 使用 CouchDB 作为数据库后端来代替 SQLite。

```
CouchDB: http://couchdb.apache.org/
Couchbase: http://www.couchbase.com/ 
```

# php - 在mysql中给出错误的过程

> ID：10248879
> 
> 赞同：0
> 
> 时间：2012-04-20T15:13:40.753
> 
> 标签：php, mysql, stored-procedures, phpmyadmin, procedures

我在 phpmyadmin 中尝试了以下带有和不带分隔符的代码。当我在场时，它似乎拒绝分隔符。

我正在使用 1 和 1 托管，`MySQL`版本是`5.0`

我具体得到的错误代码是**`#1064`**`- You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 3`

```
CREATE PROCEDURE add_person_type_procedure(Person_Type_Value_Description VARCHAR(150) , Create_Date DATETIME ,  Modify_Date DATETIME , Archive CHAR(1))
BEGIN
DECLARE ID VARCHAR(36);
SET ID = (SELECT UUID());
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:27:39.243

[http://dev.mysql.com/doc/refman/5.1/en/stored-programs-defining.html](http://dev.mysql.com/doc/refman/5.1/en/stored-programs-defining.html)

我认为您需要“设置@ID = ...”

# python - 确定哪个版本的 OpenCV

> ID：10248880
> 
> 赞同：20
> 
> 时间：2012-04-20T15:13:42.637
> 
> 标签：python, opencv

我想在 python 中编写短代码片段，以确定我的系统中安装了哪个版本的 OpenCV。我该怎么做 ？谢谢你。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-20T15:48:38.053

```
>>> from cv2 import __version__
>>> __version__
'$Rev: 4557 $' 
```

如果那不起作用，请使用`cv`而不是`cv2`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-27T07:08:47.133

一种方式可以如下所示： -

[![在此处输入图像描述](../Images/c2a35eceac12cb5fb8adfddd51d91eaa.png)](https://i.stack.imgur.com/i31Ph.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-01T22:00:13.363

在运行时检查 OpenCV 版本的便捷功能

```
def cv2():
    return opencv_version("2")

def cv3():
    return opencv_version("3")

def cv4():
    return opencv_version("4")

def opencv_version(version):
    import cv2
    return cv2.__version__.startswith(version) 
```

执行时很有用，`cv2.findContours()`因为返回签名因版本而异

```
# Using OpenCV 2.X or OpenCV 4
if cv2() or cv4():
    cnts, _ = cv2.findContours(image, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)

# Using OpenCV 3
elif cv3():
    _, cnts, _ = cv2.findContours(image, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-29T18:07:05.620

在终端写：

*   对于python 2.X`python2 -c 'import cv2; print cv2.__version__'`
*   对于python 3.X`python3 -c 'import cv2; print(cv2.__version__)'`

# c++ - 包含 0 个元素的数组

> ID：10248885
> 
> 赞同：8
> 
> 时间：2012-04-20T15:14:05.710
> 
> 标签：c++, arrays, pointers

具有 0 个元素的数组是否与未分配的指针相同？

是`int arr[0];`一样的`int* arr;`吗？

编辑：如果我做了类似的事情怎么办：

```
int x[0];
int* const arr = x; 
```

我尝试了这段代码并编译了它。据我所知， x 和 arr 都应该指向内存中的相同位置。在这种情况下会有什么不同？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T15:15:57.107

一点也不。

在 arr[0] 的情况下，**arr**有一个明确定义的地址。

在 *arr 的情况下，**arr**只是未初始化。

*在您 EDIT 之后*，您使用之前定义的数组初始化**const arr**：变量的内容没有区别，但您可以对它们执行的操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T15:27:20.737

本地声明的零长度数组在 C++ 中是非法的，因此它与未分配的指针不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T15:22:23.093

零长度数组指向特定地址，即数组的开头。在数组结束后，您将有未定义的数据，在这种情况下，在指向的地址处。

```
int arr[0];
int* ptr;

// arr is a reliable value;
// *arr is not;
// ptr is not; 
```

一种有用的方法：http: [//gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Zero-Length.html](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Zero-Length.html)

# wordpress - Wordpress 最近的评论在顶部，每页限制

> ID：10248886
> 
> 赞同：0
> 
> 时间：2012-04-20T15:14:05.723
> 
> 标签：wordpress, comments

我正在使用根 wordpress 框架。我需要按发布日期的 Desc 顺序显示帖子的评论，这意味着最近的节目在顶部。

如果我在我的 commnets.php 中使用它，它工作正常

```
 wp_list_comments(array('callback' = 'roots_comment','reverse_top_level'=>true,'reverse_children'=>true,'type'=>'comment')); 
```

但是如果我尝试限制评论的数量，那么它会忽略反向参数并从底部显示评论。

```
 wp_list_comments(array('callback' => 'roots_comment','reverse_top_level'=>true,'reverse_children'=>true,'per_page'=>3,'type'=>'comment')); 
```

现在这个显示了底部（3rd,2nd,1st）的前 3 条评论（表示顺序正确，但它计算的是底部的 3 条评论，而不是最近提交的 3 条评论）。

除了更改核心 wp-includes/comments-template.php 文件之外，有谁知道解决方案。我不能这样做，因为它是一个多站点，所以它会影响其他站点的评论顺序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:05:40.507

通过登录仪表板并检查设置->讨论，您应该可以更轻松地修改设置。

# ssl - CAsyncSocketEx + 控制台应用程序？

> ID：10248888
> 
> 赞同：0
> 
> 时间：2012-04-20T15:14:12.763
> 
> 标签：ssl, winsock

我有当前使用 CAsyncSocket 的控制台应用程序。我需要实现 SSL，所以经过一番搜索，我发现了这个项目： http: [//www.codeproject.com/Articles/3915/CAsyncSslSocketLayer-SSL-layer-class-for-CAsyncSoc](http://www.codeproject.com/Articles/3915/CAsyncSslSocketLayer-SSL-layer-class-for-CAsyncSoc)

出于某种原因，在 GUI 代码上运行良好的相同简单代码在控制台应用程序中不起作用。有没有人经验 使用 CAsyncSslSocketLayer 吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:06:23.543

自从我遇到同样的问题以来已经有一段时间了，但如果我没记错的话，要在控制台应用程序中使用 CAsyncSocket，您需要将 DECLARE_CONSOLEAPP（如下所示的前两个链接）之类的内容添加到控制台应用程序。这应该为您的控制台提供一个消息泵来生成套接字通知（OnReceive 等）。GUI 应用程序具有这些泵，但控制台应用程序通常没有。下面的第三个（msdn）链接也可能适用，它有更多信息和不同的方式。

如果这些仍然不起作用，您应该在套接字代码中放置断点，并确保您的套接字没有在主控制台应用程序（现在具有消息泵的应用程序）之外的线程或回调中实例化。

我认为搜索“CAsyncSocket WinApp”或“CAsyncSocket 控制台应用程序”会显示更多信息。

[http://www.codeguru.com/cpp/misc/misc/consoleapps/article.php/c243/Console-app-using-MFC.htm](http://www.codeguru.com/cpp/misc/misc/consoleapps/article.php/c243/Console-app-using-MFC.htm) http://troels.knakkergaard.dk/code.htm

[http://social.msdn.microsoft.com/forums/en-US/vcgeneral/thread/a6f1b72a-21d8-4046-a3dc-d7d29ece2ef6](http://social.msdn.microsoft.com/forums/en-US/vcgeneral/thread/a6f1b72a-21d8-4046-a3dc-d7d29ece2ef6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:51:34.477

CAsyncSocketEx 使用窗口作为一种廉价线程来处理来自 select() 的事件通知。不幸的是，如果您没有消息循环，那么它创建的窗口将不会接收这些事件。

[http://support.microsoft.com/kb/90975](http://support.microsoft.com/kb/90975)

本文解释了对 CreateWindow() 的调用需要从具有消息循环的线程中调用。如果你不这样做，那么通过 PostMessage() 发送的任何内容都不会到达那里。

我最近开始修改这个——我想删除烦人的隐藏窗口并用普通线程替换它。他们的代码依赖于 WSAAsyncSelect() 来接收套接字事件......到一个窗口。呸！

# ruby-on-rails - rake db:structure:dump 在 PostgreSQL / Rails 3.2 下失败

> ID：10248893
> 
> 赞同：4
> 
> 时间：2012-04-20T15:14:42.327
> 
> 标签：ruby-on-rails, postgresql, rake, ruby-on-rails-3.2

我收到此错误消息：

```
pg_dump：太多的命令行参数（首先是“demo_db”）
尝试“pg_dump --help”以获取更多信息。
耙中止！
转储数据库时出错

任务：TOP => db:structure:dump
（通过使用 --trace 运行任务查看完整跟踪）

```

这曾经在 Rails 3.1 下工作。我正在使用 Rails 3.2.3 和 PostgreSQL 9.0.5。其他任务，如 db:migrate 或 db:rollback 工作得很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T19:13:38.277

该`pg_dump`命令[在第 428 行的 activerecord/lib/active_record/railties/databases.rake 中](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/railties/databases.rake#L428)执行。

```
`pg_dump -i -s -x -O -f #{Shellwords.escape(filename)} #{search_path} #{Shellwords.escape(config['database'])}` 
```

尝试在那里设置断点并查看正在运行的实际命令。

所有这些选项都对 Pg9.0.x 有效，所以我怀疑有些有趣的东西`abcs[Rails.env]['schema_search_path']`会混淆 psql 的选项解析。请注意，该`search_path`构造不引用`--schema`参数，因此`search_path_part`带有嵌入空格的 a 将解析为部分模式名称，后跟一个不以选项开头的单词，因此 psql 会将其解释为数据库名称，然后在出现时抱怨稍后获取真实的数据库名称。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T21:50:25.623

感谢 dbenhur，我发现了这个问题。我的文件名路径中有一个空格。将第 392 行更改`activerecord/lib/active_record/railties/databases.rake`为

```
pg_dump -i -s -x -O -f '#{filename}' #{search_path} #{abcs[Rails.env]['database']} 
```

（在 周围添加单引号`#{filename}`）解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:06:40.500

我在设置中遇到了与 db:structure:dump 类似的问题。Rails 3.2.11 + JRuby 1.7.1[1.8 模式] Postgresql 9.1.7。

唯一真正有帮助的是将 activerecord_jdbc_adapter 从版本 1.2.5 降级到 1.2.2。

```
gem 'activerecord-jdbc-adapter', '1.2.2'
gem "activerecord-jdbcpostgresql-adapter", '1.2.2' 
```

希望它会帮助任何人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T17:59:31.370

我通过创建一个使用 postgresql 作为数据库 () 的新应用程序来解决这个（暗）问题`rails new MyApp -d postgresql`，然后将我所有的旧应用程序文件（/app 文件夹、迁移和一些 /config 文件）移动到新文件。现在当我运行 rake db:migrate 时，没有 pg_dump 错误。我希望这可以帮助别人。

# jquery - (jQuery + Mobile) 将 div 中的目标数据写入变量

> ID：10248894
> 
> 赞同：0
> 
> 时间：2012-04-20T15:14:51.990
> 
> 标签：jquery, jquery-mobile

是否可以通过单击在元素内找到特定数据，然后将该数据写入变量）？

例如，我有一个列表，其中包含导航到“#dataviewer”的类“datasource”的元素：

```
<ul>
   <li class="datasource">
      <a href="#dataviewer" >Get this data</a>
   </li>
</ul> 
```

我知道我可以使用以下内容定位特定的列表元素：

```
$(".datasource").click(function() {
        alert("Click!");
}); 
```

...但是我可以获取“获取此数据”并将其写入变量，以便在“#datasource”页面上使用该数据吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:42:14.413

使用这样的列表视图：

```
<div data-role="page">
<ul data-role="listview">
   <li class="datasource">
      <a href="#dataviewer" >Row A</a>
   </li>
   <li class="datasource">
      <a href="#dataviewer" >Row B</a>
   </li>

</ul>
</div>​​​​​​​ 
```

您可以使用这样的点击处理程序：

```
​$(".datasource").click (function () {
   alert( $(this).find('a').first().html() );
});​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:19:04.840

“获取此数据”可以由该`.html()`函数检索。关闭以下警报：

```
alert($("a").html()); 
```

显然，您可以根据页面的其余部分来选择“a”元素。

要将值存储到变量中，只需像这样存储输出：

```
// Probably not exactly what you want when there are many "a"nchor tags on a page.
var contentsOfElement = $("a").html();
// More selective based on an ID
var contentsOfElement = $("#oneParticularID").html();
// Then you can write that text, store it, or whatever you'd like 
```

使用您的代码作为模板，我创建了这个[运行示例](http://jsfiddle.net/zSg3K/)。

`.html()`的[文档](http://api.jquery.com/html/)。

# google-chrome-extension - 自动更新托管的 Google Chrome 扩展程序 - 没有随请求发送的附加标头

> ID：10248898
> 
> 赞同：1
> 
> 时间：2012-04-20T15:15:07.747
> 
> 标签：google-chrome-extension

注意：这不是问题，而是提示。除非有人知道或解决方法？

如果您在自己的服务器上托管 Google Chrome 扩展程序并且您有任何类型的身份验证，请注意更新检查和 .crx 请求不会发送任何额外的标头。根据您的身份验证过程，更新和 .crx 请求可能需要公开。

我觉得应该将此注释添加到此处的自动更新文档中： [http ://code.google.com/chrome/extensions/autoupdate.html](http://code.google.com/chrome/extensions/autoupdate.html)

提前知道这一点可以为我节省几个小时的调试和谷歌搜索，所以我想我会分享。

# android - 在自定义对话框中使用列表视图

> ID：10248901
> 
> 赞同：0
> 
> 时间：2012-04-20T15:15:18.147
> 
> 标签：android, listview

我将如何在此自定义对话中使用列表？我在 listview 的 .xml 中设置了一个列表，但不熟悉如何正确使用它（我希望列表的值来自字符串数组）

我的主要Java：

```
package custom.dialouge.list;

import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;

public class CustomDialougeListTestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final Context mContext = this;
    final Context context = this;
    Button button;

    button = (Button) findViewById(R.id.button01);

    // add button listener
    button.setOnClickListener(new OnClickListener() {

      @Override
      public void onClick(View arg0) {

        // custom dialog
        final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.list);
        dialog.setTitle("List");

        // set the custom dialog components - text, image and button
        TextView text = (TextView) dialog.findViewById(R.id.TextView01);
        text.setText("Test");

        Button dialogButton = (Button) dialog.findViewById(R.id.Button01);
        // if button is clicked, close the custom dialog
        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });
        dialog.show();
      }
    });

}
} 
```

我的自定义对话框 .xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

        <Button
        android:id="@+id/Button01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:text="Back" />

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="TextView" />

    <ListView
        android:id="@+id/listview1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/Button01"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/TextView01" >

    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:27:44.380

尝试这样的事情：

```
ArrayList<String> myStringArray = ... // insert your code to get/create the array here
ListView view = dialog.findViewById(R.id.listview1);
ArrayAdapter<String> listAdapter = new ArrayAdapter<String> ( this, android.R.layout.simple_list_item_1, myStringArray);
view.setAdapter(listAdapter); 
```

像这样：

```
public class CustomDialougeListTestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final Context mContext = this;
    final Context context = this;
    Button button;

    ArrayList<String> myStringArray = ... // insert your code to get/create the array here
    ArrayAdapter<String> listAdapter = new ArrayAdapter<String> ( this, android.R.layout.simple_list_item_1, myStringArray);

    button = (Button) findViewById(R.id.button01);

    // add button listener
    button.setOnClickListener(new OnClickListener() {

      @Override
      public void onClick(View arg0) {

        // custom dialog
        final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.list);
        dialog.setTitle("List");

        // set the custom dialog components - text, image and button
        TextView text = (TextView) dialog.findViewById(R.id.TextView01);
        text.setText("Test");

        ListView view = dialog.findViewById(R.id.listview1);
        view.setAdapter(listAdapter);

        Button dialogButton = (Button) dialog.findViewById(R.id.Button01);
        // if button is clicked, close the custom dialog
        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });
        dialog.show();
      }
    });

}
} 
```

# jquery - 搜索引擎会读取 $(document).ready() 或 body load() 中的 API 调用吗

> ID：10248905
> 
> 赞同：0
> 
> 时间：2012-04-20T15:15:47.710
> 
> 标签：jquery, ajax, api, seo

我正在设计一个网站，我们实际上是在创建一个 html 页面工厂。我们的数据库包含页面的静态内容，但所述页面将通过 API 调用对可公开访问的第 3 方站点进行扩充。例如 YouTube、Discogs、Wiki API、Last.FM 都有向网站管理员推销的 API。

对这些 API 的调用将是页面上静态内容的直接结果，并将用于自动使用来自所述 API 的最新信息来扩充这些页面。当下最大的问题是当页面加载和这些调用时，Google、Bing、Yahoo 等会检测到放置在 DOM 中的 API 结果还是只看到静态内容？

此外，您是否建议在页面生命周期中以事件方式进行这些调用的最佳位置 javascript/jquery，特别是 $(doc).ready() 如果它有所作为。

我看到了其他一些帖子，但他们似乎都认为 ajax 将由用户交互或查询参数驱动。我们的设计将使用实际的静态页面名称来对加载过程的某种风格进行 API 调用。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:00:09.357

一般来说，搜索引擎不执行 JavaScript，因此这些内容对他们来说是不可见的。（他们确实读取和执行基本的 JavaScript，但 Ajax 不是基本的）。

唯一的例外是[Google 的可抓取 Ajax](http://googlewebmastercentral.blogspot.com/2009/10/proposal-for-making-ajax-crawlable.html)提案。请记住，这仅适用于 Google，因此如果您这样做，其他所有搜索引擎都无法访问您的 Ajax 驱动的内容。

# javascript - 通过 JQuery 下载 .EXE 文件

> ID：10248909
> 
> 赞同：1
> 
> 时间：2012-04-20T15:15:57.920
> 
> 标签：javascript, jquery

如何执行允许在 C: 中下载文件的功能？

例如，当点击链接时，触发将打开文件或进行下载的 javascript 函数。

我正在尝试这个，

但它执行程序，我需要执行下载！

```
 if (url == "Supremo") {
       var oShell = new ActiveXObject("WScript.Shell");
       var prog = "C:\\inetpub\\wwwroot\\admin.redenetimoveis.com\\San\\up\\arquivos\\Supremo.exe";               
       oShell.run('"' + prog + '"', 1);
       return false;
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:19:49.423

要让用户下载 exe 文件，您只需将他们指向 url，例如

```
window.location = 'http://admin.redenetimoveis.com/Supremo.exe'; 
```

根据下面的评论，只需创建一个`anchor`指向该文件的标签：

```
<a href="http://admin.redenetimoveis.com/Supremo.exe">Download Executable</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:22:01.623

创建一个隐藏的 iframe，其 src 属性指向需要下载的文件。但是请记住，src 值必须是客户端可访问的文件，例如访问域。`http://www.somedomain.com/thefile.exe`

# objective-c - 目标 C：使用带双精度的 '%' 运算符

> ID：10248911
> 
> 赞同：0
> 
> 时间：2012-04-20T15:16:05.810
> 
> 标签：objective-c, xcode, math, operator-keyword

我今天遇到了一个有趣的问题。作为我熟练掌握 Objective-c 的练习的一部分，当我坐在数学课上时，我为板上完成的每个问题编写程序，以期提高我的数学和编程能力。

然而，今天我遇到了一个问题。其中一个问题类似于“找到 10564245（<-- 示例数）可被整除的最大素数”

所以，我进去制作了这个程序。我已经完成了要检查值的循环，然后开始编写它检查提醒的部分，如果它是 0，它会记录它，如果不是，它会跳过它。

但是，由于数字太大而不能成为`int`，所以它必须是`double`。当我尝试插入数字时，当我想将`%`运算符与双精度一起使用时，程序给了我错误。如果你有一个非常大的数字，有什么方法可以找到余数？

谢谢

错误：`Invalid operands to binary expression`

编辑：解决了！

我从每个答案中取了一点。我们有 fmod 功能，但我最终使用`long`而不是`int`，我不知道为什么我最初没有想到

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T15:17:40.597

使用 fmod()。

```
#include <stdio.h>
#include <math.h>

int main(int argc, char *argv[]) {
    double a = 77879878978942312315687897;
    double b = 10;
    printf("%.f",fmod(a, b));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:22:40.427

双精度值对于整数值并不精确，因此可能不应该用于此类事情。相反，您可以使用 long into 甚至 long long int 来进行计算

# java - 是否值得从 JBoss 5.1 升级到 JBoss 7.1

> ID：10248917
> 
> 赞同：8
> 
> 时间：2012-04-20T15:16:36.930
> 
> 标签：java, jakarta-ee, jboss, jboss5.x, jboss7.x

目前我们的生产环境运行 JBoss 5.1，我们一直在争论是否值得迁移到 JBoss 7.1。如果这是一个简单的服务器升级，那么它不会是一个问题。但是，不幸的是，我们将不得不更改配置，这需要一些努力。此外，我们的服务器在集群中运行，我了解到 JBoss 7.1 具有更多集群支持。

那么值得还是不值得？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T15:37:03.330

我们目前处于同样的情况。

似乎有很多积极的方面：

*   我们将不得不在某一时刻从 5.1 迁移出去。我们需要完整的配置文件，并且没有那么多 OSS 替代品（GlassFish 和 Geronimo）。由于 PCI-DSS 禁止我们使用 EoL 软件，仅这一点就可能会出售迁移。
*   配置更好，更简单。它不再分布在 20 个 XML 文件中，您可以在其中配置 XML 文件中的方面，而是一个中心位置。所有端口都配置在一个中心位置，不再有转换 server.xml 的 XSL 文件。您可以在不知道类的实现细节的情况下理解配置文件。如果您从未配置过 JBoss，就很难理解这一点。
*   EJB 远程处理不再对每个套接字使用一个线程。
*   删除不需要的子系统要容易得多。
*   类加载模型看起来很正常，您可以通过 jboss-deployment-structure.xml 获得很多控制权
*   EJB 客户端库看起来更加整洁。JAR 从 20 个减少到 10 个，其中一半甚至是 OSGi 包（我们的客户端是 Eclipse RCP 应用程序）。
*   虽然我们对 Java EE 6 用 @Singleton bean 替换我们的一些 SLSB 以及用计时器 EJB 替换我们的一些 SAR 并不感到太兴奋，但看起来确实很有趣。
*   更快的启动和更少的内存使用（至少对于空服务器或小型部署）。我们还没有测试过大型部署。
*   部署文件夹默认为空

我们仍然需要研究的事情：

*   我们有点担心 Infinispan 的性能。我们目前使用 JBoss Cache 的 TreeCache API。虽然有一个适用于 Infinispan 的适配器提供相同的 API，但一些理论测试表明写入性能更差。这仅适用于 Infinispan 的树 API。
*   不再支持 ExternalContext，我们目前使用它从 .bindings 文件中填充 JNDI 树
*   JMX 控制台不见了，如果您有任何基于此构建的内容，则需要对其进行调整，**编辑**实际上有一个可用的 JMX-Console 端口[AS7-2227](https://issues.jboss.org/browse/AS7-2227)

我们不在集群中运行，所以我无法对此发表评论。

对我们来说最大的努力可能是迁移所有与 JBoss 以一种或另一种方式交互的 shell 脚本（安装、集成测试……）。

**更新**

我们已经迁移，这绝对是值得的。以上几点的一些更新：

*   即使是大型部署也很快，只需最少的调整。
*   集中式日志记录（Slf4j、JUL、JCL、Log4j……）非常好。
*   7.1 有很多错误，我们无法使用，所以我们在 7.2 / EAP 6.1 并计划去 7.3 / EAP 6.2。仍然有相当多的错误，但我们可以解决它们。我们特别期待管理界面基于角色的访问控制，这将允许我们以最低权限运行我们的脚本。
*   GlassFish 4 将不会有一个受支持的版本，这会在生产使用上打上一个大大的问号。
*   EJB 远程安全性的灵活性要低得多。我们不得不采取一些变通方法，因为之前我们混合了经过身份验证和未经身份验证的 EJB 调用——这不再可能。
*   JBoss 的 JEE 6 BOM POM 好坏参半。理论上它很好，因为它管理所有 JEE 依赖项的版本。在实践中，artifactId 中的版本的坐标很糟糕，当我们迁移到 JEE 7 时这会很烦人。此外，当您想要包含用于测试的 JEE API 的实现时，它也不是很有帮助。
*   Infinispan 树 API 性能不是问题。
*   我们用 DMR 脚本替换了 JMX-Console 脚本。

**更新 2**

*   通过 SSL 使用 EJB 远程处理时会出现[死锁。](https://community.jboss.org/thread/237109)即使在 EAP 6.2 中也存在这种死锁。我们现在正处于从 WildFly 向后移植到 AS 7 的大量功能补丁集的阶段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:50:08.247

JBoss 5.1.0 上的一切都适合您吗？你的表现是你可以忍受的吗？

我目前正在从 JBoss 5.1.0GA 升级到 JBoss 7.1.1，这并不容易。您基本上是在升级到新的应用程序服务器。我猜你需要为这项工作预算很多美元。

话虽如此，与 5.1.0 相比，JBoss 7.1.1 非常快（至少启动时间）。我认为在接下来的 6 个月（左右）内，大多数“硬”迁移和过渡问题将在 jboss 论坛或通过错误修复得到充实。届时，您和您的团队可以重新评估是否要进行迁移。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T02:45:48.807

如果您使用 SSL，升级的一个好处是 JBoss 7.1.1 在 jdk 1.7 上运行，它支持 TLS 1.1 和 1.2，而 jdk 1.6 仅支持 TLS 1.0。JBoss 5 不会在 java 1.7 上运行，因此您很容易受到 BEAST 攻击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-08T18:43:45.990

无论如何，我会等一会儿。

AS 5 是 EE5 服务器，AS 7.1 是 EE6 服务器（EE6 规范于 2009 年发布）。因此，对于一个出色的新运行时环境来说，这是很多工作，但它不会为您提供任何热门的架构可能性。

WildFly 8.0.0.CR1 已经到期，这就是 EE7 服务器，它为您带来了许多新的有趣的开发可能性，例如 WebSockets 和 JAX-RS 2.0 ( [http://www.slideshare.net/dandreadis/2013-11devoxxwild-flybof](http://www.slideshare.net/dandreadis/2013-11devoxxwild-flybof) ) . 新的管理功能，例如单实例修补。并且不确定 AS7 到 WildFly8 是否会是一个超级简单的迁移，因为引入了一些主要的新东西，比如 Undertow 而不是 JBossWeb/Tomcat。

如果你必须去，你就必须去 - 如果你结束了死去的 7.x 路径，不要忘记得到大大改进的 7.2.0.Final 标签（比 7.1.1 好几百个问题）。但是，如果您认为您现在可以开始使用 Beta/CR 版本进行开发/迁移，并等待几个月以获得一个不错的生产稳定的 WildFly 8.xx 版本，那么您可能可以在下一次重大更新之前坐得更久。

兄弟，延斯

# c# - 实现类似的类（数据实体对象）

> ID：10248918
> 
> 赞同：0
> 
> 时间：2012-04-20T15:16:44.083
> 
> 标签：c#, .net, generics

我正在开发一个应用程序，该应用程序当前从 sql 查询的结果创建数据实体对象。在数据库中，表 3 非常相似，但有几个不同的属性。

我最初的计划是创建 3 个不同的类，尽管每个类都非常相似。然而，当我开始创建返回对象列表的方法时，我遇到了一个绊脚石，因为返回类型会根据应用程序所处的模式而有所不同。

例如

```
public class A
{
   public int Id {get;}
   public string Name {get;}
}

 public class B
 {
   public int Id {get;}
   public string Name {get;}
   public string ExtraInfo {get;}
 }

 public class MainScreen
 {
     ...
     this.resultsGrid.DataSource = LoadData();
 } 
```

我不希望编写一种方法来加载每种数据类型的列表。LoadData() 的返回类型应该是什么，以使其尽可能通用。

处理这种情况的最优雅的方法是什么？

谢谢，

肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:34:18.747

简单！

创建一个类`ListItem`（我想具有属性`Id`和`Name`）。在您的工厂类/方法中，将该类的实例从记录变为 a`List`并将数据源绑定到列表。

不要害怕为你的 UI 创建专门的类。

**更新：**忘了提。尽量避免继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:27:38.063

您应该具有允许多态性的继承，因此您将拥有一个基类，数据绑定中包含的所有实体都从它派生。

然后，您可以拥有一个中间基类来拥有一些共享属性，例如名称和 ID。

基类：

```
public abstract class Entity
{
} 
```

具有名称和 ID 的实体：

```
public class NameAndIDEntity : Entity
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

具有名称、ID 和 ExtraInfo 的实体：

```
public class NameIDAndExtraEntity : NameAndIDEntity
{
    public string ExtraInfo { get; set; }
} 
```

具有其他信息的实体（不能从 NameAndIDEntity 派生），从 Entity 派生，因此可以包含在数据绑定中：

```
public class OtherInformationEntity : Entity
{
    public int Age { get; set; }
} 
```

最后，您可以使 LoadData 返回类型实体。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T15:23:16.503

首先，您可以在项目中创建一个继承树，其中基类在一组不同类型之间保存一个共享/公共属性

其次，您可以从查询匿名类型中检索，然后通过将它们映射到*真实*类型来将其映射到已知类型，例如 Jon Skeet 的博客[Horrible grotty hack:returning an anonymous type instance](https://msmvps.com/blogs/jon_skeet/archive/2009/01/09/horrible-grotty-hack-returning-an-anonymous-type-instance.aspx)

这意味着您需要知道哪个查询返回什么类型（无法避免），但这可以减少您需要添加到代码中的分数，例如：

```
static class GrottyHacks
{
    internal static T Cast<T>(object target, T example) //CAST TO SPECIFIED TYPE
    {
        return (T) target;
    }
}

class CheesecakeFactory
{
    static object CreateCheesecake()
    {
        return new { Fruit="Strawberry", Topping="Chocolate" };
    }

    static void Main()
    {
        object weaklyTyped = CreateCheesecake(); //ANONYMOUS TYPE GENERATION
        var stronglyTyped = GrottyHacks.Cast(weaklyTyped,
            new { Fruit="", Topping="" }); //"MAPPING"

        Console.WriteLine("Cheesecake: {0} ({1})",
            stronglyTyped.Fruit, stronglyTyped.Topping);            
    }
} 
```

# asp.net-mvc-3 - 在 mvc 3 codefirst 中具有必需属性的 NotMapped 属性

> ID：10248919
> 
> 赞同：1
> 
> 时间：2012-04-20T15:16:50.147
> 
> 标签：asp.net-mvc-3, entity-framework

我在 EF CodeFirst mvc3 中有带有以下代码的用户模型。

```
[NotMapped]
[Required(ErrorMessage = "Please enter password.")]
[Display(Name = "Password")]
public string LoginPassword { get; set; } 
```

我对这个代码块有以下问题。

1.  它是 NotMapped，但仍然给 Modelstate.isvalid false 消息请输入密码。如何解决？
2.  我在这个密码字段上有 javascript 来显示指标（弱、中、强）。作为必需，当我单击提交按钮而不输入任何值时，它不会给我错误“请输入密码”。如何在客户端显示错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:28:29.067

您是否在视图中包含这两个文件？

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script> 
```

# android - 如何强制 Android 上的 webview 滚动到页面顶部？

> ID：10248920
> 
> 赞同：0
> 
> 时间：2012-04-20T15:16:57.373
> 
> 标签：android, webview

我在 Android 应用程序中有几个 html 表单。

为了在 webview 上隐藏应用程序的背景图像，html 页面的高度通过 CSS 设置为 1000px（它也通过 Java 为 webview 设置为 100%，但这并不总是有效）。

问题：第 1 页的表格 A 很长，提交按钮在页面末尾。第 2 页的表格 B 很短。发布表单 A 后，应用程序不会滚动到第 2 页的顶部，而是保持在同一位置。由于帖子 B 很短，用户只看到空的背景。不好。

我们尝试了以下方法：

*   pageUp（来自 Java SDK）
*   scrollTo()（来自 Java SDK）
*   `<a name="top"></a>`在表单的 html 代码中插入一个“ ”，并`"window.location.hash="top"`在应用程序中使用来处理锚点

最后一种方法几乎在任何地方都有效，但不适用于三星设备（据报道，三星 S2 和 Ace 已损坏）。还有其他我们可能错过的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:48:24.710

我们最终删除了 1000px css hack。

# git - Git filter-branch：可以更新提交消息以引用旧的提交 ID？

> ID：10248922
> 
> 赞同：9
> 
> 时间：2012-04-20T15:17:03.903
> 
> 标签：git

我可以成功运行`git filter-branch`一些代码，例如将另一个 repo 合并到子目录 [1]：

```
git filter-branch --index-filter '
  git ls-files -s |
  perl -pe "s{\t\"?}{$&helper/}" |
    GIT_INDEX_FILE=$GIT_INDEX_FILE.new git update-index --index-info &&
  mv $GIT_INDEX_FILE.new $GIT_INDEX_FILE
' remotes/helper/master 
```

但是现在，我也很想扩展每个提交的消息以包含其以前的 ID（SHA 哈希），因为这些提交可能在 GitHub 上有没有被转移的评论/对话。

例如添加这样的额外行（`bob/helpers`预先硬编码/已知的位置）：

```
[COPIED FROM bob/helpers@76c7c080b3bd2f93dc78e4864899d668a57cd9f9] 
```

据我所知，Git`msg-filter`只给了我原始消息，而 Git`env-filter`不包含提交 ID（SHA 有）作为输入变量。那么这可能吗？

谢谢！

[1] 通过[这篇很棒的文章，使用](http://zrajm.org/ref/git-repo-merging.html)[此电子邮件线程](http://git.661346.n2.nabble.com/Filter-branch-s-quot-move-tree-to-subdirectory-quot-example-fails-with-BSD-sed-td7466007.html)中的 Perl 过滤器来解决 Mac OS X 上的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T17:45:37.777

`--msg-filter`将在哪里进行，并且原始提交 ID 在 environment variable`$GIT_COMMIT`中，因此（未经测试）简单地制作消息过滤器：`cat; echo "[COPIED FROM bob/helpers@$GIT_COMMIT]"`.

# javascript - 如何检测浏览器是否支持闪烁标签？

> ID：10248923
> 
> 赞同：16
> 
> 时间：2012-04-20T15:17:07.320
> 
> 标签：javascript, html, dom

HTML`<blink>`标记在支持它的浏览器（即 Mozilla Firefox 和 Opera）中使其内容闪烁，类似于慢闪灯的效果。

我正在为非标准 HTML 编写一套 polyfill，包括`blink`标签。闪烁行为的实现非常简单

```
(function blink(n) {
    var blinks = document.getElementsByTagName("blink"),
        visibility = n % 2 === 0 ? "visible" : "hidden";
    for (var i = 0; i < blinks.length; i++) {
        blinks[i].style.visibility = visibility;
    }
    setTimeout(function() {
        blink(n + 1);
    }, 500);
})(0); 
```

（你可以[看到这个在行动](http://jsfiddle.net/s2Mgz/3/)）

但这并不会检测浏览器是否已经支持该`blink`标签，并且在已经支持它的浏览器中，会出现双闪效果。我需要一些功能检测来确定浏览器是否支持闪烁，如果不支持，则它会退回到我的 Javascript polyfill。

我不想进行浏览器检测，因为该解决方案不可扩展，而且由于人们可以`blink`在他们的 Firefox 偏好设置中禁用行为，因此该解决方案无效。

有没有办法检测对`blink`元素的支持？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T00:04:54.840

我只是对此事做了一些研究，*我想*我可能会找到答案......

我确定您知道 CSS 属性支持检测吗？嗯，有一个`text-decoration: blink`CSS 属性。因此，如果浏览器支持`<blink>`，它也必须支持 CSS 属性！

这是正常的 CSS 属性检测，即`textDecoration`支持检测：

```
if (document.createElement("detect").style.textDecoration === "") {  
    // textDecoration supported
} 
```

也许你可以尝试这样的事情：

```
if (document.createElement("detect").style.textDecoration === "blink") {  
    // textDecoration: blink supported ?
} 
```

或沿着那些路线......

# 更新

我有 4 个浏览器，所以用 4 个浏览器对此进行了测试。在这 4 个中，只有 FireFox 支持 blink 标签。`<blink>`在 HTML 文档中注册为 FF 中的“Span”元素，但在其他 3 个浏览器中它被注册为`unknown`元素。

```
<html>

<head>
<script type="text/javascript">
function investigate() {
    var blinker = document.getElementsByTagName("blink")[0];
    document.getElementById("monitor").innerHTML += blinker;
}
</script>
</head>

<body onload="investigate()">
<blink>Hello, blink!</blink>
<div id="monitor"> </div>
</body>

</html> 
```

# 输出

**不支持**Internet Explorer [7,8,9]

 **> 你好，眨眼！
> [目的]

**不支持**Chrome [18]

 **> 你好，眨眼！
> [对象 HTMLUnknownElement]

**不支持**Safari [5]

 **> 你好，眨眼！
> [对象 HTMLElement]

**支持**火狐[3.6]

 **> 你好，眨眼！
> [对象 HTMLSpanElement]********

# c# - 转换为 LINQ To 实体查询中的类型

> ID：10248924
> 
> 赞同：1
> 
> 时间：2012-04-20T15:17:12.343
> 
> 标签：c#, linq, casting

我有这个 LINQ 查询

```
var Cities= (from city in AllCities
    where (city.NumberOfCitizens > 1000)
    select new
    {
        Mayor= (from mayor in AllMayors where mayor.CityKey == city.Key select mayor),
        Name = city.Name,
        Country = city.Country,
        Key = city.Key
        }).ToList(); 
```

我从我拥有 > 1000 个公民的城市中选择市长、姓名、国家和密钥。

`Mayor`是一个类有 2 个属性`String FirstName`和`String LastName`

现在我想对`Cities`（这是第一个查询的结果）进行另一个查询，该查询提取具有键 > 20 的城市中的市长的`FirstName`和`LastName`

```
var Result= (from city in Cities
    where (city.Key> 20)
    select new
    {
        MayorFirstName = city.Mayor.FirstName,
        MayorLastName = city.Mayor.LastName,
        City = city.Name
        }).ToList(); 
```

问题是我得到一个构建错误 city.Mayor 不包含`FirstName`和的定义`LastName`

我试图将其转换为查询中的 Mayor 类型：

```
Mayor= (Mayor)(from mayor in AllMayors where mayor.CityKey == city.Key select mayor),
....... 
```

应用程序构建和启动正常，但我得到一个运行时错误，我无法转换为 LINQ 查询中的类型。

我怎么解决这个问题？有没有办法在查询中进行转换或者是否有其他解决方案。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T15:21:34.393

这部分查询的结果不是单个`Mayor`对象，而是`IEnumerable<Mayor>`

```
Mayor = (from mayor in AllMayors where mayor.CityKey == city.Key select mayor) 
```

将此行更改为：

```
Mayor= (from mayor in AllMayors where mayor.CityKey == city.Key select mayor).FirstOrDefault() 
```

那么 Mayor 属性将是一个`Mayor`实例。

请注意，如果没有找到市长，using`FirstOrDefault`将返回*null*，而如果没有找到市长，`First()`则会抛出异常。这些之间的选择取决于您的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T15:21:26.537

您不想分配`IEnumerable<Mayor>`给市长，而是选择一个项目。使用带有谓词的 Enumerable.First() 来做到这一点：

```
Mayor = AllMayors.FirstOrDefault(mayor => mayor.CityKey == city.Key) 
```

在你的例子中：

```
var Cities= (from city in AllCities
             where (city.NumberOfCitizens > 1000)
             select new
             {
               Mayor= AllMayors.FirstOrDefault(mayor => mayor.CityKey == city.Key),
               Name = city.Name,
               Country = city.Country,
               Key = city.Key
             }).ToList(); 
```

# python - 使课程自动记忆的最佳方法

> ID：10248925
> 
> 赞同：1
> 
> 时间：2012-04-20T15:17:13.147
> 
> 标签：python, memoization

我一直在开发一个测试框架（在 Selenium 和其他工具集之上，尽管这并不是特别相关），我决定让扩展框架变得更容易的组件之一将是一种简单的添加方法自动记忆的类成员（例如，从页面对象中提取的数据元素）。我想出的解决方案是一个重写的类，`__getattr__()`它可以用作每个需要自动记忆的类的父类。这个类的代码如下：

```
class SelfCachingGetters(object):

    def __getattr__(self, name):
        getter_string = '_get_%s' % name
        try:
            value = getattr(self, getter_string)()
            setattr(self, name, value)
        except AttributeError:
            raise AttributeError('%s is not a member of this class.' % name)
        return value 
```

这个类使得在任何子类中创建自动记忆成员所需要做的就是声明一个方法`_get_XXXX()`，其中 XXXX 是您希望类成员拥有的名称。我喜欢这个，因为它为实现此功能提供了一种简单而干净的方式，例如，每个页面对象中没有数十个带有装饰器的方法。

我的问题是，这是实现此行为的最佳（最 Pythonic）方式吗？对我来说，这似乎很不合时宜。我正在研究元类和类装饰器。有没有人有任何其他建议？

# node.js - node.js：来自主集群的控制

> ID：10248927
> 
> 赞同：1
> 
> 时间：2012-04-20T15:17:21.317
> 
> 标签：node.js, redis, cluster-computing

是否可以从主集群动态打开/关闭 redis 订阅？我问的原因是我只想一次订阅一个集群，但如果该集群死了，我需要让另一个集群订阅。

从根本上说，主集群是否可以仅通过 api 向分叉集群发送消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T16:12:18.137

在 master 中，您可以轻松地将消息发送到集群，您只需保存作为 fork() 调用的结果的 worker 对象。

```
var cluster = require("cluster");
worker = cluster.fork();
worker.on("message,function(msg){
  console.log("Master says:" + msg);
});
worker.send({message:'hello'}); 
```

# objective-c - ABAddressBook - 在 iOS 中从所有来源（Mail yahoo、Hotmail、ecc..）读取联系人

> ID：10248928
> 
> 赞同：2
> 
> 时间：2012-04-20T15:17:23.797
> 
> 标签：objective-c, ios, abaddressbook

如何从我的地址簿中读取电子邮件中不同来源类型的所有联系人？现在我只能读取所有组的本地联系人，但在我的 iPhone 中，如果进入联系人可以找到更多不同的组（所有联系人、所有来自 Mac、iCloud、所有雅虎、所有 Hotmail..）。

我的问题是： Source yahoo 有这个联系人：..... Source Hotmail 有这个联系人：..... 它是怎么做成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:59:26.660

用于`ABAddressBookCopyArrayOfAllGroupsInSource`获取组的数组。然后，`ABGroupCopyArrayOfAllMembers`您可以获得属于该组的所有成员。

# javascript - 带有对话框的jquery ui循环

> ID：10248930
> 
> 赞同：1
> 
> 时间：2012-04-20T15:17:34.897
> 
> 标签：javascript, jquery-ui, modal-dialog

我正在将我的代码从 fancybox 更改为 jquery ui，但我在这段代码中有一些错误：

```
<a class = "perfil_1"><h3>Luciana </h3></a>
<a class = "perfil_2"><h3>John</h3></a>
<a class = "perfil_3"><h3>Pedro </h3></a>

<div id="dialog_1">
<p>Lorem ipsum dolor sit amet</p>
</div>

<div id="dialog_2">
<p>Lorem ipsum dolor sit amet</p>
</div>

<div id="dialog_3">
<p>Lorem ipsum dolor sit amet</p>
</div>

  for (i = 1; i < 4; i++) {
            $('.perfil_'+i).click(function(){
                $('#dialog_'+i).dialog('open');
                return false;
            });
         }; 
```

有什么帮助吗，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:27:53.253

**编辑**注意您缺少`.dialog()`声明。没有它，您就没有创建对话框，因此它不会打开。将其称为`$("dialog_" + i).dialog().dialog("open");`See [Js fiddle](http://jsfiddle.net/4Qa8U/5/)以获取非样式对话框示例。

不要循环遍历每个为什么不向每个锚添加一个类，而是给它一个 index 属性，使用它来循环：

```
<H3><a class = "perfil" index=1>Luciana </a></h3>
<H3><a class = "perfil" index=2>John</a></h3>
<H3><a class = "perfil" index=3>Pedro</a></h3>

<div id="dialog_1">
<p>Lorem ipsum dolor sit amet</p>
</div>

<div id="dialog_2">
<p>Lorem ipsum dolor sit amet</p>
</div>

<div id="dialog_3">
<p>Lorem ipsum dolor sit amet</p>
</div>

$('.perfil').live("click", function(){
    var i = this.getAttribute("index");
    $('#dialog_'+i).dialog().dialog('open');
    return false;
}); 
```

附带说明一下，如果您的代码版本没有在`$(document).ready(function(){})`块内运行或不在 html 的末尾，则有可能在元素存在之前进行点击分配并且没有被绑定到您当前的锚点。这就是为什么我倾向于使用`live`or`delegate`所以你总是保证有约束力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:20:24.473

你的脚本代码错误..我想你忘了给'_'符号。把它改成

```
 for (i = 1; i < 4; i++) {
            $('.perfil_'+i).click(function(){
                $('#dialog_'+i).dialog('open');
                return false;
            });
         }; 
```

# php - 使用 PHP 和 mySQL 格式化搜索结果

> ID：10248933
> 
> 赞同：0
> 
> 时间：2012-04-20T15:18:05.510
> 
> 标签：php, mysql, html, phpmyadmin, echo

我现在正在调整网站的管理员端，允许网站管理员输入航班号，数据库将提取航班上所有人员的姓名。但是，目前我的结果看起来有点像这样：

`The following people are on this flight Joe BloggsThe following people are on this flight Gareth RobertsThe following people are on this flight Joe BloggsThe following people are on this flight Gareth RobertsThe following people are on this flight Joe BloggsThe following people are on this flight Gareth RobertsThe following people are on this flight Joe BloggsThe following people are on this flight Gareth RobertsThe following people are on this flight Joe BloggsThe following people are on this flight Gareth RobertsThe following people are on this flight Joe Bloggs`

你明白了……名字显然是出于 DPA 的原因 :)

我怎样才能让它说例如：

2021 号航班上的乘客是：

*   命名一个
*   命名两个
*   命名三

这是我的代码，我欢迎任何建议！

```
 <? 
     include("logon/include/session.php");
                $loggedinuser = $session->username;
    $passengerNo = $_POST['enteredPassNo'];
       $theflightno = $_POST['enteredflightNo'];
            $query1 = mysql_query("SELECT p.surname, p.forename,   p.passNo FROM PASSENGER p WHERE p.passNo = '$passengerNo'");
while($row = mysql_fetch_array($query1))
{
    echo "Welcome to the site"  . " " . $row['forename'] ." ";
        }
        echo mysql_error();
$query2 = mysql_query("SELECT    p.surname, p.forename, p.passNo, p.flightNo FROM PASSENGER p, FLIGHT_INFO f WHERE     p.flightNo = '$theflightno'");
while($row = mysql_fetch_array($query2))
{
    echo "The following people are on this flight" . "</ br> ";
    echo $row['forename'] ." " . $row['surname'];
    echo "</ br>";
        echo mysql_error();
        }
    echo mysql_error();
       ?> 
```

重点是 query2，query1 确实用于一些测试！澄清一下，存储在 $passengerNo 和 $theflightNo 中的值在从表单发布后被正确分配。

非常感谢，

汤姆

**编辑：关于格式的很好的建议，但它仍然是这样打印的：-**

以下人员在此航班上

*   加雷斯·罗伯茨
*   乔·博格斯
*   加雷斯·罗伯茨
*   乔·博格斯
*   加雷斯·罗伯茨
*   乔·博格斯

而不是打印，

以下人员在此航班上：-

*   加雷斯·罗伯茨
*   乔·博格斯

只有一次等:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:23:09.173

将之后的段更改为`$query2`：

```
$query2 = mysql_query("SELECT CONCAT(p.surname, p.forename) as name, p.passNo, 
         p.flightNo FROM PASSENGER p WHERE p.flightNo = '$theflightno' 
         GROUP BY name");
echo "Passengers on flight number {$theflightno} are:" . "<br /> <ul>";
while($row = mysql_fetch_array($query2)) {
  echo "<li>" . $row['name'] . "</li>";
  echo "</ br>";
}
echo "</ul>"; 
```

## *编辑*

我所做的基本编辑是：

*   添加了一个[`CONCAT`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)函数，以便名称将作为单个字符串返回（对于姓/名的重复值）。
*   更改查询以包含`GROUP BY`子句。这样重复的名称（姓名+姓氏）只会出现一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:23:13.477

```
echo "The following people are on flight " . $row['flightNo'] . "</ br> ";    
echo "<ul>";
while($row = mysql_fetch_array($query2))

{

echo "<li>" . $row['forename'] ." " . $row['surname'] . "</li>";

    }
 echo "</ul>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T15:27:27.927

你也在循环文本。所以

```
echo "Passenger's on flight number 2021 are:";
echo '</ br>';
echo '<ul>';
while($row = mysql_fetch_array($query2))
{
  echo '<li>';
  echo $row['forename'] ." " . $row['surname'];
  echo '</li>';
}
echo '</ul>'; 
```

# python - 字符串元组到 sqlite 列

> ID：10248934
> 
> 赞同：0
> 
> 时间：2012-04-20T15:18:07.477
> 
> 标签：python, sqlite

如何将字符串元组插入 sql 列？目前我将元组中的字符串与一个标记连接起来，然后当我再次读出该值时，我在这个标记上进行拆分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:32:38.530

或者您可以使用[pickle](http://docs.python.org/library/pickle.html#module-pickle)（或 cPickle）模块，它可能比滚动您自己的代码更容易：

```
import pickle

my_tuple = ('one', 'two', 'three')
pickle.dumps(my_tuple)  # <-- insert that into DB 
```

要读取它，只需将字符串从数据库中拉出并调用：

```
my_reconstituted_tuple = pickle.loads(data_from_db) 
```

# css - 使锚点悬停看起来像荧光笔文本的 CSS

> ID：10248937
> 
> 赞同：0
> 
> 时间：2012-04-20T15:18:20.003
> 
> 标签：css, anchor

我已经为此苦苦挣扎了好几天，只是无法得到它。是否可以让链接的悬停状态看起来像所附图片？所以看起来就像在文本上使用了荧光笔并且在行之间有空白

[http://krwilliams.com/lab/test/highlighterlinks.jpg](http://krwilliams.com/lab/test/highlighterlinks.jpg)

抱歉，它不会让我附上图片。

这是我能得到的最接近的 [http://krwilliams.com/lab/test/resources.html](http://krwilliams.com/lab/test/resources.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:21:40.290

在您的示例中，关闭`float:left`您的 A-tag。

# javascript - ExtJS XTemplate for 带有 json 的循环

> ID：10248942
> 
> 赞同：0
> 
> 时间：2012-04-20T15:18:33.337
> 
> 标签：javascript, json, templates, extjs

我想使用 Ext JS XTemplate 在屏幕上显示一个带有表格的列表。

这些是我的配置，

读者：

```
var readerX = new Ext.data.JsonReader({
successProperty : 'success',
root            : 'infoList',
fields          : [
                    {name: 'ID'},
                    {name: 'distance'},
                    {name: 'time'}
                ] 
```

});

店铺：

```
var storeX = new Ext.data.Store({
id      : 'idx',
reader  : readerX 
```

});

模板：

```
var templateX = new Ext.XTemplate(
'<tpl for=".">',
'<table class="tableTEXT" width="100%">',
    '<tbody>',
        '<tpl for="infoList">',
            '<tr>',
                '<th class="tableTEXT2" align="left" width="%15"><b>ID</b></th>',
                '<td class="tableTEXT" width="%35" align="left">{ID}</td>',
            '</tr>',
            '<tr>',
                '<th class="tableTEXT2" align="left" width="%15">Distance</th>',
                '<td class="tableTEXT" width="%35" align="left">{distance} km</td>',
                '<th class="tableTEXT2" align="left" width="%15">Time</th>',
                '<td class="tableTEXT" width="%35" align="left">{time}</td>',
            '</tr>',
        '</tpl>',
    '</tbody>',
'</table>',
'<hr>',
'</tpl>' 
```

);

JSON是：

```
{"success":true, "infoList":[{"ID":1,"distance":100,"time":10},{"ID":2,"distance":2100,"time":50},{"ID":3,"distance":150,"time":15}]} 
```

我在这样的面板中使用模板。

```
var reportPanel = new Ext.Panel({
            items: [
                {
                    id          : 'summaryPanel',
                    region      : 'center',
                    bodyStyle   : {
                        background: '#ffffff',
                        padding : '7px'
                    },
                    items: [
                            new Ext.DataView({
                                store       : storeX,
                                tpl         : templateX,
                                autoHeight  : true,
                                multiSelect : true,
                                overClass   : 'x-view-over',
                                itemSelector: 'div.thumb-wrap',
                                emptyText   : 'no record found!'
                            })
                       ]
                }
            ]
    }); 
```

发出 ajax 请求后，我将在模态窗口上显示结果，如下所示：

```
success: function (response) 
        {                   
            var resData = Ext.util.JSON.decode(response.responseText);
            storeX.loadData(resData);

            new Ext.Window({
                title       : 'Report',
                plain       : true,
                border      : false,
                modal       : true,
                autoHeight  : true,
                buttonAlign : 'center',
                items       : [reportPanel],
                height      : Ext.getBody().getViewSize().height - 100,
                width       : Ext.getBody().getViewSize().width*0.5 //90%
            }).show();
        }, 
```

如何将我的 json 迭代到模板中？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:01:23.133

看起来您在模板中有错字（ infList 而不是**infoList**）：

```
var templateX = new Ext.XTemplate(
    '<tpl for=".">',
    '<table class="tableTEXT" width="100%">',
        '<tbody>',
            '<tpl for="infoList">', //<-------- was infList
                '<tr>',
                    '<th class="tableTEXT2" align="left" width="%15"><b>ID</b></th>',
                    '<td class="tableTEXT" width="%35" align="left">{ID}</td>',
                '</tr>',
                '<tr>',
                    '<th class="tableTEXT2" align="left" width="%15">Distance</th>',
                    '<td class="tableTEXT" width="%35" align="left">{distance} km</td>',
                    '<th class="tableTEXT2" align="left" width="%15">Time</th>',
                    '<td class="tableTEXT" width="%35" align="left">{time}</td>',
                '</tr>',
            '</tpl>',
        '</tbody>',
    '</table>',
    '<hr>',
    '</tpl>'); 
```

将数据应用到模板后将正确加载

```
templateX.overwrite(Ext.getBody(), data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T19:48:48.853

[数据视图](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.view.View)是您所需要的。只需定义商店和模板。之后，就可以处理鼠标悬停、单击等事件。

# javascript - 导致浏览器重新验证（但不一定重新获取）图像

> ID：10248944
> 
> 赞同：4
> 
> 时间：2012-04-20T15:18:45.290
> 
> 标签：javascript, html

在我的 Web 应用程序中，我们提供所有带有 24 小时有效 HTTP 缓存标头的图像，以及 ETags。但有时 Javascript 客户端应用程序有理由怀疑图像可能已更新。在这些情况下，我想强制浏览器重新验证图像缓存，而不实际破坏缓存。

例如，我得到一个用户记录（JSON 格式），其中包含最近的 LastUpdated 日期。LastUpdated 日期更改的可能原因有多种：用户可能更改了昵称、加入了新版块或更改了图像。所以很有可能图像没有改变，但我们需要检查。

我知道我可以重新请求带有附加到 URL 的缓存中断器的图像。但这将强制图像重新加载，无论它是否已更改，导致浏览器缓存中有两个条目，并迫使我用新的 url 更新我的所有图像。我真正想要的是让浏览器重新请求相同的 URL，并在请求中发送正确的 If-None-Match 和/或 If-Modified-Since 标头，这样如果图像没有更改，它将获得 304 .

有没有办法在 Javascript 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T23:30:51.640

这实际上很容易实现。`Cache-Control`对标头设置为 的图像发出 AJAX 请求`max-age=0`。

服务器必须使用更新的图像（和一组新的缓存标头）**或****包含`Cache-Control`**类似`public, max-age=123`.

带有`Cache-Control`标头的 304 非常重要，因为它指示浏览器更新与资源关联的新鲜度信息。

当请求完成时，`<img>`从 DOM 中删除旧元素并重新插入一个指向相同的新元素`src`。

这是有效的，因为*请求* `Cache-Control`标头告诉浏览器忽略其缓存并转到网络。当浏览器收到响应时，它会更新它的缓存——即使您实际上并没有对 AJAX 结果做任何事情。

现在，当您删除旧元素并插入新元素时，浏览器会直接从其缓存中获取最近更新的图像。

在 Chrome 的网络检查器中，您会看到两个请求：AJAX 请求，然后是通过重新插入`<img>`元素生成的请求。但是，如果服务器`Cache-Control`正确设置了标头，则第二个“请求”将由浏览器的缓存完成，并且实际上不会通过网络发送任何内容。

```
function updateImage(el) {
    el = $(el);
    var src = el.attr('src');

    $.ajax({
        url: src,
        headers: {
            'Cache-Control': 'max-age=0'
        },
        success: function() {
            var parent = el.parent(); 
            el.remove();
            // this assumes that the <img> has no siblings and no attributes/classes/etc...
            parent.append('<img>').attr('src',src);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:51:43.793

由于图像存在于服务器中，在缓存中，服务器是需要进行查询的地方。我会在页面加载之前进行检查，如果需要，强制服务器更新缓存中的特定图像。“HTML”部分应始终假定所有 img-tags 等都是正确的。

更新服务器缓存中单个文件的最佳方法是 IMO 的另一头野兽。

# file-upload - 将 UploadedFile 转换为文件

> ID：10248952
> 
> 赞同：10
> 
> 时间：2012-04-20T15:19:21.893
> 
> 标签：file-upload, primefaces, javaw

我正在使用 PrimeFaces 3.2，我应该在文件系统上存储一个文件。现在，我知道 FileUploaded 类创建了一个临时文件，因此我将使用 java.io.File 将其转换为真实文件。

这是我的代码：

```
String fileName = "D:/upload/file.zip"; //--- this is an example, in my real code it is dynamic
UploadedFile uploadedFile;

//--- getters and setters
InputStream in = uploadedFile.getInputStream();
OutputStream out = new FileOutputStream(new File(fileName));

int read = 0;
byte[] bytes = new byte[1024];

while ((read = in.read(bytes)) != -1) {
    out.write(bytes, 0, read);
}

in.close();
out.flush();
out.close(); 
```

问题是应用程序在文件夹中创建了一个 .tmp 文件，但在它没有“转换”为我想要的文件之后！日志返回：

```
[#|2012-04-20T16:30:13.109+0200|SEVERE|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=114;_ThreadName=Thread-2;|java.io.FileNotFoundException: D:\upload\file.zip (Impossibile trovare il percorso specificato)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:165)
    at it.cyborg.cdg.jsfClasses.AbstractController.copyFile(AbstractController.java:240)
    at it.cyborg.cdg.jsfClasses.ProgettiController.create(ProgettiController.java:223)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:234)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:43)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:56)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at it.cyborg.cdg.logic.RolesFilter.doFilter(RolesFilter.java:122)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#] 
```

我也尝试了这个解决方案：

[如何从 Apache 的 UploadedFile 类中获取 java.io.File？](https://stackoverflow.com/questions/8469987/how-to-get-java-io-file-from-apaches-uploadedfile-class)

但我收到了同样的错误。感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T15:28:50.973

我之前遇到过类似的问题，很简单，你只需要为它创建一个新文件。但首先，您应该确认您要写入的路径可用。这是示例代码

```
//This is used for new file creation.
File f = new File(ParentPath, FileName);
FileOutputStream fos = new FileOutputStream(f); 
```

或者你可以只使用 java.nio.Files 。

```
Files.newOutputStream(path, options); 
```

请检查javadoc。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-28T15:09:36.370

```
try {
            moveFile(file.getInputstream(), file.getFileName());
        } catch (IOException e1) {
            System.out.println(e1);
        }

private Boolean moveFile(InputStream inputStream, String name) {

    OutputStream outputStream = null;
    String path = "/Users/barry/Desktop/";
    Boolean flag = false;
    try {

        outputStream
                = new FileOutputStream(new File(path + name));

        int read = 0;
        byte[] bytes = new byte[1024];

        while ((read = inputStream.read(bytes)) != -1) {
            outputStream.write(bytes, 0, read);
        }

        System.out.println("Done!");
        flag = true;
    } catch (IOException e) {
       flag = false;
    } finally {
        if (inputStream != null) {
            try {
                inputStream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        if (outputStream != null) {
            try {
                // outputStream.flush();
                outputStream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }

        }
    }
    return flag;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-06T14:48:08.657

来自 primefaces 示例。 [https://www.primefaces.org/showcase/ui/file/upload/basic.xhtml](https://www.primefaces.org/showcase/ui/file/upload/basic.xhtml)

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.context.FacesContext;

import org.primefaces.event.FileUploadEvent;
import org.primefaces.model.UploadedFile;

@ManagedBean
public class FileUploadView {

private UploadedFile file;

public UploadedFile getFile() {
    return file;
}

public void setFile(UploadedFile file) {
    this.file = file;
}

public void upload() throws IOException {
    if (file != null) {
        FacesMessage message = new FacesMessage("Succesful", file.getFileName() + " is uploaded.");
        FacesContext.getCurrentInstance().addMessage(null, message);

        System.out.println("Uploaded file now: " + file.getFileName());

        String name = file.getFileName();

        InputStream inputStream = file.getInputstream();
        OutputStream outputStream = null;
        String path = "/Users/daryl/Desktop/";

        File file = new File(path + name);

        outputStream = new FileOutputStream(file);

        int read = 0;
        byte[] bytes = new byte[1024];

        while ((read = inputStream.read(bytes)) != -1) {
            outputStream.write(bytes, 0, read);
        }

        System.out.println("Done!");

    }
}
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-22T10:26:37.053

您还可以使用此代码将 UploadedFile 转换为 java 文件。

```
File f = new File(uploadedFile.getFileName()); 
```

# c# - 将 UTC 时间转换为特定时区的问题

> ID：10248955
> 
> 赞同：0
> 
> 时间：2012-04-20T15:19:32.460
> 
> 标签：c#, .net

我有一个时间跨度值 1:00:00

我将其转换为 UTC 日期时间

```
DateTime dateTime = DateTime.UtcNow.Date.Add(timeSpan); 
```

然后将此 UTC 日期时间转换为 (UTC-05:00) 东部时间（美国和加拿大）

```
TimeZoneInfo.ConvertTimeFromUtc(dateTime, timeZoneInfo); 
```

但它返回我的日期时间为“21”，我期望它应该是“20”

因为（UTC-05:00）东部时间（美国和加拿大）它应该是 1:00:00 AM - 5 = 20:00:00

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:25:56.643

如果您只关心服务器时间

```
int dstOffset = 0;

if (System.TimeZone.CurrentTimeZone.IsDaylightSavingTime(DateTime.UtcNow))
   dstOffset = -1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:21:09.183

由于该时区是**夏令时**，目前（DateTime.UtcNow），它是一个小时的不同。

# android - 需要 InsertHelper 澄清

> ID：10248959
> 
> 赞同：0
> 
> 时间：2012-04-20T15:19:49.543
> 
> 标签：android, sqlite

从文档：

[http://developer.android.com/reference/android/database/DatabaseUtils.InsertHelper.html](http://developer.android.com/reference/android/database/DatabaseUtils.InsertHelper.html)

这条线是什么意思？

> 但只编译一次 SQL 插入语句，

请解释一下，我无法理解这一点。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:36:41.493

如果你这样做

```
SQLiteDatabase db = getDatabaseFromSomewhere();

db.insert("tableName", null, contentValues1);
db.insert("tableName", null, contentValues2);
db.insert("tableName", null, contentValues3); 
```

每次调用`insert`Android 都会创建一个新的 SQLiteStatement。如果您对 InsertHelper 执行相同操作，它只会创建 1 条语句并重用可能更快的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:35:57.320

InsertHelper 类采用 x 数量的 INSERT 语句（比如 5 个）并在一个语句中执行它们，因为 1 < 5 更快；

# php - PHP类函数命名

> ID：10248961
> 
> 赞同：2
> 
> 时间：2012-04-20T15:19:56.743
> 
> 标签：php, class, function, naming

我在命名函数时遇到了麻烦。我有一堂课，我需要 2 个函数，如下所示。

```
class myclass {
    public function tempclass () {
        echo "default";   
    }
    public function tempclass ( $text ) {
        echo $text;
    }
} 
```

当我打电话

```
tempclass('testing'); // ( called after creating the object ) 
```

`function tempclass()`被调用我如何才能拥有 2 个名称相同但参数不同的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T15:22:48.487

传统的重载目前在 PHP 中是不可能的。相反，您需要检查传递的参数，并确定您希望如何响应。

检查[`func_num_args`](http://www.php.net/manual/en/function.func-num-args.php)并[`func_get_args`](http://www.php.net/manual/en/function.func-get-args.php)在这一点上。您可以在内部使用这两种方法来确定您应该如何响应某些方法的调用。例如，在您的情况下，您可以执行以下操作：

```
public function tempclass () {
  switch ( func_num_args() ) {
    case 0:
      /* Do something */
      break;
    case 1:
      /* Do something else */
  }
} 
```

或者，您也可以为您的参数提供默认值，并使用这些值来确定您应该如何反应：

```
public function tempclass ( $text = false ) {
  if ( $text ) {
    /* This method was provided with text */ 
  } else {
    /* This method was not invoked with text */
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:25:26.003

重载在 PHP 中是不可能的。

但是，对于您上面的简单示例，这样的事情会起作用：

```
class myclass {
    public function tempclass ($text='Default') {
        echo $text;
    }
} 
```

# python - HTML 标记内内容的正则表达式模式

> ID：10248963
> 
> 赞同：3
> 
> 时间：2012-04-20T15:20:12.350
> 
> 标签：python, regex

我编写了简单的 Python 脚本，该脚本连接到特定网站并获取那里的所有链接。

```
import urllib2
import re

request = urllib2.urlopen('http://www.securitytube.net/')
content = request.read()
match = re.findall(r'<a href=".\w+.\d+">.+</a>', content)
if match:
    for i in match:
        print i + "\n"

else:
    print 'Not Found!' 
```

结果：

```
<a href="/video/3878"><img class="corner iradius20  ishadow33" width="100" heigh
t="75" src="http://videothumbs.securitytube.net.s3.amazonaws.com/3878.jpg"  alt=
"avatar" /></a>

<a href="/video/3878">NodeZero Linux Review</a>

<a href="/video/3877"><img class="corner iradius20  ishadow33" width="100" heigh
t="75" src="http://videothumbs.securitytube.net.s3.amazonaws.com/3877.jpg"  alt=
"avatar" /></a>

<a href="/video/3877">Post Attack Uploading Shell in Real Time</a>

<a href="/video/3867"><img class="corner iradius20  ishadow33" width="100" heigh
t="75" src="http://videothumbs.securitytube.net.s3.amazonaws.com/3867.jpg"  alt=
"avatar" /></a>

<a href="/video/3867">Using SQLMAP in Real Time (SQLinjection WEB)</a>

<a href="/video/3866"><img class="corner iradius20  ishadow33" width="100" heigh
t="75" src="http://videothumbs.securitytube.net.s3.amazonaws.com/3866.jpg"  alt=
"avatar" /></a>
....
...
... 
```

我正在尝试使用可理解的标题获取这些链接，例如`<a href="/video/3867">Using SQLMAP in Real Time (SQLinjection WEB)</a>`.

我的模式是：`<a href=".\w+.\d+">.+</a>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:35:06.233

如果您*真的*想使用正则表达式而不是适当的解析器，您可以`groups`稍后匹配和访问它们。

请参阅[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

```
(...) 
```

> 匹配括号内的任何正则表达式，并指示组的开始和结束；执行匹配后可以检索组的内容

尝试：

```
request = urllib2.urlopen('http://www.securitytube.net/')
content = request.read()
match = re.findall(r'<a href="(.*?)".*>(.*)</a>', content)
if match:
    for link, title in match:
        print "link %s -> %s" % (link, title) 
```

这输出：

```
link /video/3822 -> SecurityTube SpeakUp: Cloud Computing
link /video/3587 -> 
link /video/3587 -> Securitytube Speak Up: Antivirus Evasion attacks
link /video/3489 -> 
link /video/3489 -> SecurityTube SpeakUp: ThePirateBay LOSS
link /video/3375 -> 
link /video/3375 -> SecurityTube SpeakUp: .COM and .NET Domain Seizures
link /video/3130 -> 
link /video/3130 -> SecurityTube Speak Up: The MS12-020 Fiasco!
...etc 
```

您当然可以过滤链接，以便只考虑具有匹配标题的链接。你也会想丢弃以 开头的链接`#`......你看，一个合适的解析器会给你更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:26:38.590

永远不要用正则表达式解析 html。;-)

但是为了帮助您改进您的 regex-fu 可以针对未来**的非 HTML**工作进行改进，您的 regex 有两个地方失败：

*   `.\w+.\d+` （这与`/`in不匹配`/video/3877`。试试 `"[^"]+"
*   `.+`，这将匹配尽可能多的任何字符......尽可能少地尝试：`.+?`

# jquery - .ajax 方法的响应总是在单击按钮时替换以前的内容

> ID：10248964
> 
> 赞同：0
> 
> 时间：2012-04-20T15:20:12.763
> 
> 标签：jquery

**html代码**

```
 <table border="0"  class="commentbox">
    <tr>
      <td>Some Item text
      </td>
   </tr>
   <tr>
     <td>
          <div id="<%:containerid %>"></div>
          <input type="button" class='btnReply' id="<%:rid %>" value="Reply"/>

     </td>
   </tr>
 <tr>
   <td>
      <div id="replytopost">
     </div>
   </td>
  </tr>
</table> 
```

**jQuery代码**

```
 $(document).ready(function () {
    $(".commentbox .btnSave").live("click", function () {
        alert("hii");
        var itemId = $(this).attr("id").split("-")[1]
        var txt = $(this).parent().find(".txtCmnt").val();
        alert(itemId + txt);
        $.post("Handler/Topic.ashx", { reply: txt, id: itemId }, function (data) {
            alert(data);
            $("#replytopost").html(data);
            //do whatever with the response
        })
    });
}); 
```

每当我单击类 .btnSave 的动态创建按钮时，都会打印响应，但是如果我第二次单击响应，则会将其替换为新值。当我单击第二次响应时，不得覆盖。每次响应都必须出现在新的 div 中。这个怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:24:06.410

该`.html()`函数旨在完全替换元素的内容。如果要添加到它，请改用该`.append()`功能。

# c# - 将参数传递给 Web 服务

> ID：10248969
> 
> 赞同：0
> 
> 时间：2012-04-20T15:20:47.760
> 
> 标签：c#, asp.net, web-services, jquery

我有一个网络服务，代码：

```
[WebMethod]
public bool ValidateUserName()
    {
        string UserNameCreated = TextUserName.Text; // textbox string to be passed. 
```

如何将文本框控件的值 TextUserName.Text 传递给它？我要做一个 jquery ajax 调用这个 web 方法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:23:36.530

您应该在 javascript 中检索文本框的值，然后将字符串作为方法参数传递。

```
[WebMethod]
public bool ValidateUserName(String username)
{
    string UserNameCreated = username; // textbox string to be passed.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T15:30:39.137

看看这个

[http://midnightprogrammer.net/post/Calling-ASPNET-Web-Service-Using-Jquery-Part-II.aspx](http://midnightprogrammer.net/post/Calling-ASPNET-Web-Service-Using-Jquery-Part-II.aspx)

# php - 滚动时 IE 中的网站断断续续，但在 Firefox/Chrome/Safari 中没有

> ID：10248970
> 
> 赞同：3
> 
> 时间：2012-04-20T15:21:01.080
> 
> 标签：php, html, css, browser, scroll

我再次寻求集体的帮助。我创建了一个网站，当在 IE 中查看时滚动不稳定，但在所有其他浏览器中都非常流畅。我检查了两台不同的笔记本电脑，以确保它不仅仅是我的视频卡。

我还删除了所有图像，看看它是否是图像显示问题并且没有解决问题。有没有人有任何想法？

更新*：根据反馈，我还尝试了删除图像、框阴影和谷歌字体的页面，但我仍然得到不稳定的滚动。我现在也刚刚删除了导航和侧横幅......呃仍然没有好处。

*找到它*：好的，所以在基本上逐个 css 解构我的网站后，我发现屏幕不稳定的原因（主要）是由于使用了border-radius 属性（感谢您指出我的方向）。我的页面有两个容器 div，我将以下 css 应用于：-moz-border-radius: 10px; -webkit-border-radius：10px；边框半径：10px；

一旦我删除了这些，页面就平滑了 90%。由于它看起来像标题图像，我仍然会出现一些不稳定的滚动，但它要好得多。

**最终的解决方案是： 1\. 添加了条件 IE，专门用于在通过 IE 浏览器查看时禁用边框半径 2\. 删除最后一点不稳定 :) 我拍摄了我正在使用的所有图像，创建了一个精灵为他们在 Photoshop 中，然后使用 yahoo Smush-It 压缩该文件。该网站现在加载得很好。

感谢大家的投入！

我的网址是[http://monopolydealrules.com](http://monopolydealrules.com)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:31:53.187

**最终的解决方案是： 1\. 添加了条件 IE，专门用于在通过 IE 浏览器查看时禁用边框半径 2\. 删除最后一点不稳定 :) 我拍摄了我正在使用的所有图像，创建了一个精灵为他们在 Photoshop 中，然后使用 yahoo Smush-It 压缩该文件。该网站现在加载得很好。

谢谢大家的洞察力！

更新* 我在 iphone 上的 safari mobile 中也遇到了类似的问题，用于我的移动版本。从容器元素中删除边界半径属性也固定了我的移动网站的速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:39:21.563

很可能是您的盒子阴影导致了问题。那里没有大量文档，但通常建议不要使用那么大的 CSS 框阴影。

[http://nerds.airbnb.com/box-shadows-are-expensive-to-paint](http://nerds.airbnb.com/box-shadows-are-expensive-to-paint)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:49:55.097

我有一个复杂的布局，IE9 也为我结结巴巴地滚动。在我的情况下，具有完整布局的常规页面滚动良好，但是在同一布局中添加 ckeditor 时滚动变得非常不稳定。我猜 IE 不能同时渲染圆角和复杂的 UI。

我用它来修复它：

```
<!--[if lt IE 10]>
<style type="text/css">
* {
-webkit-border-radius: 0px !important; 
-khtml-border-radius: 0px !important; 
-moz-border-radius: 0px !important; 
border-radius: 0px !important; 
}
</style>
<![endif]--> 
```

# objective-c - uiwebview XMLHttpRequest 异常 101

> ID：10248974
> 
> 赞同：1
> 
> 时间：2012-04-20T15:21:05.497
> 
> 标签：objective-c, ios, ajax, webkit

我使用 uiwebview 在我的 iOS 应用程序中执行远程过程。这些远程过程可以向本地 http 服务器执行某些 ajax 请求，作为回报，它将执行正确的响应处理程序。这工作正常，直到我尝试再次运行整个脚本，这导致“xmlhttprequest Exception 101”

处理程序阿贾克斯：

```
NSString* makeHTMLwithRegisteredHandlers(NSString* serverurl)
{
NSMutableString* output = [NSMutableString new];
if(registeredHandlers != nil)
{
    for(int i=0;i<registeredHandlers.count;i++)
    {
        NSString* scriptfunc = [AbstractRemoteProcedure makeGetJSFromClass:[registeredHandlers objectAtIndex:i]];
        [output appendFormat:@"\nfunction %@(paramdata) { \n",scriptfunc];
        [output appendString:@"\t$.ajax({  \n"];
        [output appendString:@"\t\ttype: \"POST\",  \n"];
        [output appendFormat:@"\t\turl: \"%@/%@\",  \n",serverurl,scriptfunc];
        [output appendString:@"\t\tasync:false,  \n"];
        [output appendString:@"\t\tprocessData: false, \n"];
        [output appendString:@"\t\tdata: paramdata, \n"];
        [output appendString:@"\t\terror: function(xhr, ajaxOptions, thrownError) { \n"];
        [output appendString:@"\t\t\talert(\"runtime exception:\"+thrownError);\n"];
        [output appendString:@"\t\t\tbreakmyJS();\n"];
        [output appendString:@"\t\t},\n"];
        [output appendString:@"\t\tsuccess: function(data) { \n"];
        [output appendString:@"\t\t\tresult = data;  \n"];
        [output appendString:@"\t\t}\n"];
        [output appendString:@"\t});\n"];

        [output appendString:@"\treturn result;\n} \n"];

    }
}
return output;
} 
```

服务器端脚本：

```
function onConnect()
{
    //device just connected to network
}

function onRetrieve()
{

var req = new Object();
req.url = servertoRequestFrom;
req.usr = deviceIdentifier();
req.pwd = deviceSecret();
var res = HttpCrossDomainSend(jQuery.stringify(req));
var decoded = jQuery.parseJSON(res);
makeSheet(decoded);

}

function onSend()
{
}

function onAuthorize(action)
{
return false;
} 
```

调试日志：

```
 2012-04-20 17:03:37.290 myApplication[7066:707] server running:http://127.0.0.1:900/

    2012-04-20 17:03:39.464 myApplication[7066:707] InitializeRuntimeProcedure start
    2012-04-20 17:03:39.466 myApplication[7066:707] InitializeRuntimeProcedure done
    2012-04-20 17:03:39.492 myApplication[7066:707] DeviceTypeProcedure start
    2012-04-20 17:03:39.493 myApplication[7066:707] DeviceTypeProcedure done
    2012-04-20 17:03:39.515 myApplication[7066:707] DeviceVersionProcedure start
    2012-04-20 17:03:39.516 myApplication[7066:707] DeviceVersionProcedure done
    2012-04-20 17:03:39.537 myApplication[7066:707] DeviceNameProcedure start
    2012-04-20 17:03:39.539 myApplication[7066:707] DeviceNameProcedure done
    2012-04-20 17:03:39.560 myApplication[7066:707] DeviceIdentiferProcedure start
    2012-04-20 17:03:39.563 myApplication[7066:707] DeviceIdentiferProcedure done
    2012-04-20 17:03:39.583 myApplication[7066:707] DeviceSecretProcedure start
    2012-04-20 17:03:39.586 myApplication[7066:707] DeviceSecretProcedure done
    2012-04-20 17:03:39.608 myApplication[7066:707] CrossDomainRequest start
    2012-04-20 17:03:40.616 myApplication[7066:707] CrossDomainRequest done
    2012-04-20 17:03:40.653 myApplication[7066:707] MakeSheetProcedure start
    2012-04-20 17:03:40.662 myApplication[7066:707] MakeSheetProcedure done
    2012-04-20 17:03:51.841 myApplication[7066:575b] onRetrieve();
    onSend();
    2012-04-20 17:04:02.026 myApplication[7066:707] DeviceTypeProcedure start
    2012-04-20 17:04:02.028 myApplication[7066:707] DeviceTypeProcedure done 
```

# mysql - MySql 查询发送数据变慢

> ID：10248977
> 
> 赞同：0
> 
> 时间：2012-04-20T15:21:20.343
> 
> 标签：mysql, performance

我有一个查询，其中包含一些连接。我在此查询中加入的每个表都有一个外键。当我运行它时，执行时间很慢，大约 23 秒。主表有大约 50,000 行。

```
SELECT o.id, o.title, o.link, o.position_id, o.status, o.publish_date, o.archived_on, vos.name AS site_name, vorib.image AS ribbon, vop.picture,
             GROUP_CONCAT(DISTINCT CAST(voci.name AS CHAR)) AS cities,
             GROUP_CONCAT(DISTINCT CAST(vors.name AS CHAR)) AS regions,
             GROUP_CONCAT(DISTINCT CAST(voi.icon_id AS CHAR)) AS icons,
                 GROUP_CONCAT(DISTINCT CAST(voc.city_id AS CHAR)) AS cities_id,
             GROUP_CONCAT(DISTINCT CAST(vor.region_id AS CHAR)) AS regions_id,
             GROUP_CONCAT(DISTINCT CAST(vose.section_id AS CHAR)) AS sections,
             GROUP_CONCAT(DISTINCT CAST(vocat2.category_id AS CHAR)) AS categories,
             GROUP_CONCAT(DISTINCT CAST(vocategories.name AS CHAR)) AS categories_names,        
             (SELECT SUM(vocount.clicks) FROM vo_offers_counter AS vocount WHERE vocount.offer_id = vo.id) AS hits
        FROM vo_offers AS o 
                LEFT JOIN offers_pictures AS vop ON o.id = vop.offer_id AND vop.number = 1
                LEFT JOIN offer_sites AS vos ON o.site_id = vos.id
                LEFT JOIN offers_city AS voc ON o.id = voc.offer_id
                LEFT JOIN offers_category AS vocat ON o.id = vocat.offer_id
                LEFT JOIN offers_category AS vocat2 ON o.id = vocat2.offer_id
                LEFT JOIN offer_categories AS vocategories ON vocat2.category_id = vocategories.id
                LEFT JOIN offers_city AS voc2 ON o.id = voc2.offer_id
                LEFT JOIN offer_cities AS voci ON voc2.city_id = voci.id
                LEFT JOIN offers_region AS vor ON o.id = vor.offer_id
                LEFT JOIN offer_regions AS vors ON vor.region_id = vors.id
                LEFT JOIN offer_ribbons AS vorib ON o.ribbon_id = vorib.id
                LEFT JOIN offers_section AS vose ON o.id = vose.offer_id
                LEFT JOIN offers_icons AS voi ON o.id = voi.offer_id
                 WHERE o.id IS NOT NULL  AND o.status IN ('published','pending','xml')   
GROUP BY o.id  
ORDER BY CASE WHEN o.position_id IN('', '0') THEN ~0 ELSE 0 END asc, o.position_id asc, o.publish_microtime desc  
LIMIT 100 OFFSET 200 
```

这是查询的描述：

```
 +----+--------------------+--------------+--------+---------------------------+---------------------------+---------+--------------------------------------+------+----------------------------------------------+
  | id | select_type        | table        | type   | possible_keys             | key                       | key_len | ref                                  | rows | Extra                                        |
  +----+--------------------+--------------+--------+---------------------------+---------------------------+---------+--------------------------------------+------+----------------------------------------------+
  |  1 | PRIMARY            | o            | range  | PRIMARY,status            | status                    | 2       | NULL                                 | 3432 | Using where; Using temporary; Using filesort |
  |  1 | PRIMARY            | vop          | ref    | offer_id                  | offer_id                  | 5       | new_vsichkioferti.v.id               |    1 |                                              |
  |  1 | PRIMARY            | vos          | eq_ref | PRIMARY                   | PRIMARY                   | 4       | new_vsichkioferti.v.site_id          |    1 |                                              |
  |  1 | PRIMARY            | voc          | ref    | offer_id                  | offer_id                  | 5       | new_vsichkioferti.v.id               |    2 | Using index                                  |
  |  1 | PRIMARY            | vocat        | ref    | vo_offers_category_ibfk_1 | vo_offers_category_ibfk_1 | 5       | new_vsichkioferti.v.id               |    1 | Using index                                  |
  |  1 | PRIMARY            | vocat2       | ref    | vo_offers_category_ibfk_1 | vo_offers_category_ibfk_1 | 5       | new_vsichkioferti.v.id               |    1 |                                              |
  |  1 | PRIMARY            | vocategories | eq_ref | PRIMARY                   | PRIMARY                   | 4       | new_vsichkioferti.vocat2.category_id |    1 | Using index                                  |
  |  1 | PRIMARY            | voc2         | ref    | offer_id                  | offer_id                  | 5       | new_vsichkioferti.v.id               |    2 |                                              |
  |  1 | PRIMARY            | voci         | eq_ref | PRIMARY                   | PRIMARY                   | 4       | new_vsichkioferti.voc2.city_id       |    1 | Using index                                  |
  |  1 | PRIMARY            | vor          | ref    | offer_id                  | offer_id                  | 5       | new_vsichkioferti.v.id               |    1 |                                              |
  |  1 | PRIMARY            | vors         | eq_ref | PRIMARY                   | PRIMARY                   | 4       | new_vsichkioferti.vor.region_id      |    1 | Using index                                  |
  |  1 | PRIMARY            | vorib        | eq_ref | PRIMARY                   | PRIMARY                   | 4       | new_vsichkioferti.v.ribbon_id        |    1 |                                              |
  |  1 | PRIMARY            | vose         | ref    | offer_id                  | offer_id                  | 5       | new_vsichkioferti.v.id               |    1 | Using index                                  |
  |  1 | PRIMARY            | voi          | ref    | offer_id                  | offer_id                  | 5       | new_vsichkioferti.v.id               |    1 | Using index                                  |
  |  2 | DEPENDENT SUBQUERY | vocount      | ref    | offer_id                  | offer_id                  | 5       | func                                 |    1 | Using where                                  |
  +----+--------------------+--------------+--------+---------------------------+---------------------------+---------+--------------------------------------+------+----------------------------------------------+
  15 rows in set 
```

我该怎么做才能让它运行得更快？

[编辑]

问题在于这个连接：

```
LEFT JOIN offers_city AS voc2 ON o.id = voc2.offer_id
LEFT JOIN offer_cities AS voci ON voc2.city_id = voci.id 
```

主要在第一个中，表 offer_city 有 221339 行，但只有两列：offer_id 和 city_id 带有索引，两者都是外键

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:36:02.827

我看到在 WHERE 部分中您仅按主表 (vo_offers AS o) 列进行过滤。如果总是这样 - 您可以尝试使用子选择来加快速度。您的查询的问题是 - 它确实（可能，不是 100% 确定）首先连接来自连接表的所有其他记录，然后执行过滤。

所以你可以尝试这样的事情：

```
SELECT o.id, o.title, o.link, o.position_id, o.status, o.publish_date, o.archived_on, vos.name AS site_name, vorib.image AS ribbon, vop.picture,
             GROUP_CONCAT(DISTINCT CAST(voci.name AS CHAR)) AS cities,
             GROUP_CONCAT(DISTINCT CAST(vors.name AS CHAR)) AS regions,
             GROUP_CONCAT(DISTINCT CAST(voi.icon_id AS CHAR)) AS icons,
                 GROUP_CONCAT(DISTINCT CAST(voc.city_id AS CHAR)) AS cities_id,
             GROUP_CONCAT(DISTINCT CAST(vor.region_id AS CHAR)) AS regions_id,
             GROUP_CONCAT(DISTINCT CAST(vose.section_id AS CHAR)) AS sections,
             GROUP_CONCAT(DISTINCT CAST(vocat2.category_id AS CHAR)) AS categories,
             GROUP_CONCAT(DISTINCT CAST(vocategories.name AS CHAR)) AS categories_names,        
             (SELECT SUM(vocount.clicks) FROM vo_offers_counter AS vocount WHERE vocount.offer_id = vo.id) AS hits
        FROM (SELECT * FROM vo_offers WHERE id IS NOT NULL AND status IN ('published','pending','xml')) AS o
                LEFT JOIN offers_pictures AS vop ON o.id = vop.offer_id AND vop.number = 1
                LEFT JOIN offer_sites AS vos ON o.site_id = vos.id
                LEFT JOIN offers_city AS voc ON o.id = voc.offer_id
                LEFT JOIN offers_category AS vocat ON o.id = vocat.offer_id
                LEFT JOIN offers_category AS vocat2 ON o.id = vocat2.offer_id
                LEFT JOIN offer_categories AS vocategories ON vocat2.category_id = vocategories.id
                LEFT JOIN offers_city AS voc2 ON o.id = voc2.offer_id
                LEFT JOIN offer_cities AS voci ON voc2.city_id = voci.id
                LEFT JOIN offers_region AS vor ON o.id = vor.offer_id
                LEFT JOIN offer_regions AS vors ON vor.region_id = vors.id
                LEFT JOIN offer_ribbons AS vorib ON o.ribbon_id = vorib.id
                LEFT JOIN offers_section AS vose ON o.id = vose.offer_id
                LEFT JOIN offers_icons AS voi ON o.id = voi.offer_id
GROUP BY o.id  
ORDER BY CASE WHEN o.position_id IN('', '0') THEN ~0 ELSE 0 END asc, o.position_id asc, o.publish_microtime desc  
LIMIT 100 OFFSET 200 
```

因此，在这种情况下，您首先（在子选择中）找到您真正需要的记录，然后才加入所有其他表

不确定它是否会有所帮助，但您至少可以尝试一下...

# jsp - 在 Jsp 中处理异常

> ID：10248982
> 
> 赞同：0
> 
> 时间：2012-04-20T15:21:38.040
> 
> 标签：jsp, exception-handling, struts

在我的时区下午好。

我在我的 Web 应用程序开发中使用 struts 框架。我在 struts-config.xml 文件中对异常处理进行了参数化：

```
<global-exceptions>
    <exception key="sap-error" type="com.galpenergia.sgt.util.excepcoes.chained.user.UserException" path="/globalError.jsp"/>
    <exception key="global-error" type="java.lang.Exception" path="/globalError.jsp"/>
</global-exceptions> 
```

在 globalError jsp 中，我有以下页面指令

```
<%@page isErrorPage="true" %> 
```

当我尝试从异常对象获取消息时，它告诉我异常对象为空。

```
<% if(exception != null) {%>
    <%=exception.getMessage() %>
<%}else{ %>
<p>Exception object is null</p>
<% }%> 
```

为什么会这样？

提前致谢。最好的毕业生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:45:31.983

我不确定您使用的是哪个 Struts 版本。我正在使用 Struts 1.3.8。

如果您使用的是 Struts 1.X，您可能需要确保您的资源包中有两个异常键。就像是：

```
sap-error = Error in SAP.
global-error = Application crash! 
```

在您的 globalError.jsp 中，您必须添加：

```
<%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %>
...
<html:errors /> 
```

# regex - 如何编写一个 grep 正则表达式，使得某个字符串不会出现在当前行的匹配模式之前的任何位置？

> ID：10248983
> 
> 赞同：0
> 
> 时间：2012-04-20T15:21:39.573
> 
> 标签：regex, grep

我正在尝试查找语句的所有实例，例如

```
 ABCD.Transaction = GlobalCommArea 
      WXY.Transaction = GlobalCommArea 
         PQR.Transaction = LMN.Transaction
    DEF.XYZ(CStr(i)).Transaction = GlobalCommArea 
```

我唯一要避免的是在任何这些语句之前存在单引号。

所以，例如。

```
 ' PQR.Transaction = GlobalCommArea 
```

将是无效的，但是

```
 WXY.Transaction = GlobalCommArea ' 2012 
```

将是有效的，因为引号出现在匹配部分之后

如果不存在单引号问题，我可以编写一个简单的正则表达式，如下所示 -

```
 grep -nr  "\.Transaction" . 
```

如何编写一个正则表达式来确保在比赛前的任何地方都没有单引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:39:47.093

```
grep -nrE "^[^']+\.Transaction" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:32:42.323

不确定您使用的是哪种 grep，但 GNU grep 2.9（在我的 Ubuntu 机器上）会执行此操作（`-P`开关打开 PCRE，因此前瞻工作）：

```
grep -P "^(?! *').+Transaction.+$" file_to_search.txt 
```

解释：

```
^              # start at beginning of line
(?! *')        # negative lookahead for optional space and a single quote
.+Transaction  # one or more characters up to 'Transaction'
.+$            # all remaining character up to end of line 
```

**编辑：显示在 cygwin 上工作**

```
$ uname -r        
1.7.11(0.260/5/3)   # cygwin ver. 1.7.11

$ grep --version
GNU grep 2.6.3

$ cat foo.txt       # contents of the file I'm grepping
  ABCD.Transaction = ' GlobalCommArea
'   WXY.Transaction = GlobalCommArea
  PQR.Transaction = LMN.Transaction
     '  DEF.XYZ(CStr(i)).Transaction = GlobalCommArea

$ grep -P "^(?! *').+Transaction.+$" foo.txt
ABCD.Transaction = ' GlobalCommArea
PQR.Transaction = LMN.Transaction 
```

# php - 使用 PHP 远程更新页面状态

> ID：10248986
> 
> 赞同：3
> 
> 时间：2012-04-20T15:21:52.527
> 
> 标签：php, facebook, facebook-graph-api, auto-update, facebook-authentication

我有一个由我自己用 PHP 自定义编写的在线博客。文章和其他功能在预定义的日期自行发布，这意味着我可以有 2 个月的未来内容已经排列和编写，这意味着该网站在没有我帮助的情况下不断自我更新。

现在我希望能够自动更新与博客相关联的 Facebook 页面。是否有可能做到这一点？我想要的只是每次发布新文章时都可以创建一个新状态，而无需我手动完成。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:29:44.967

您需要设置一个 cron 作业（计划任务）才能实现这一点。这可以在管理面板中查看。

您需要分配一个 (cron) 文件，让您检查您的文章发布日期和今天的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:30:58.810

你有没有研究过[facebook 的 api](http://developers.facebook.com/docs/reference/api/)以及它可以用[facebook pages](http://developers.facebook.com/docs/reference/api/page/)做什么。我从未尝试过您想要做什么，但根据我的经验，这似乎很有可能。我知道您可以自动请求[access_token](http://developers.facebook.com/docs/authentication/)并使用它将更新发布到页面墙上。

我认为这两篇文章的组合是您正在寻找的内容： [如何使用 facebook api](http://highgroove.com/articles/2009/07/19/how-to-update-a-facebook-page-status-using-the-facebook-api.html) X [更新 Facebook 页面状态使用 PHP 和 Graph API 更新您的 Facebook 状态](http://www.digimantra.com/tutorials/update-facebook-status-php-graph-api/)

# java - android 的 URL 连接失败

> ID：10248991
> 
> 赞同：0
> 
> 时间：2012-04-20T15:22:13.137
> 
> 标签：java, android, urlconnection

我厌倦了oracle的示例，从带有android的URLConnection中读取这是代码

```
``try{
            URL oracle = new URL("http://www.oracle.com/");
            Proxy proxy = new Proxy(Proxy.Type.HTTP,newInetSocketAddress("192.168.3.254",3128)); // or whatever your proxy is
            URLConnection yc = oracle.openConnection(proxy);
            BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
            String inputLine;
            while ((inputLine = in.readLine()) != null) 
               Toast.makeText(this, inputLine, Toast.LENGTH_SHORT);
            in.close();
        }
    catch(IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

我注意到我的代理模拟器设置已配置我有这个日志错误

> >04-20 14:20:21.842: D/AndroidRuntime(988): 关闭 VM 04-20 14:20:21.842: W/dalvikvm(988): threadid=1: 线程退出但未捕获异常 (group=0x409c01f8) 04-20 14:20:21.862: E/AndroidRuntime(988): 致命异常: main 04-20 14:20:21.862: E/AndroidRuntime(988): java.lang.RuntimeException: 无法启动活动 ComponentInfo{connect. oracle.java/connect.oracle.java.ConnectActivity}: android.os.NetworkOnMainThreadException 04-20 14:20:21.862: E/AndroidRuntime(988): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 04 -20 14:20:21.862: E/AndroidRuntime(988): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 android.app .ActivityThread.access$600(ActivityThread.java:123) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 android.app。ActivityThread$H.handleMessage(ActivityThread.java:1147) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 android.os.Handler.dispatchMessage(Handler.java:99) 04-20 14:20: 21.862: E/AndroidRuntime(988): 在 android.os.Looper.loop(Looper.java:137) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 android.app.ActivityThread.main(ActivityThread .java:4424) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-20 14:20:21.862: E/AndroidRuntime(988) : 在 java.lang.reflect.Method.invoke(Method.java:511) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit .java:784) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 04-20 14:20:21.862: E /AndroidRuntime(988)：在 dalvik.system.NativeStart。main（本机方法）04-20 14:20:21.862：E/AndroidRuntime（988）：由：android.os.NetworkOnMainThreadException 04-20 14:20:21.862：E/AndroidRuntime（988）：在 android.os。 StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099) 04-20 14:20:21.862: E/AndroidRuntime(988): at java.net.InetAddress.getHostByAddrImpl(InetAddress.java:440) 04-20 14:20: 21.862: E/AndroidRuntime(988): 在 java.net.InetAddress.getHostName(InetAddress.java:313) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 java.net.InetSocketAddress.getHostName(InetSocketAddress .java:156) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 libcore.net.http.HttpConnection$Address.(HttpConnection.java:322) 04-20 14:20:21.862: E/ AndroidRuntime(988): 在 libcore.net.http.HttpConnection.connect(HttpConnection.java:96) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 libcore.net.http。HttpEngine.openSocketConnection(HttpEngine.java:308) 04-20 14:20:21.862: E/AndroidRuntime(988): at libcore.net.http.HttpEngine.connect(HttpEngine.java:303) 04-20 14:20: 21.862: E/AndroidRuntime(988): 在 libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 libcore.net.http.HttpEngine .sendRequest(HttpEngine.java:232) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273) 04-20 14:20:21.862 : E/AndroidRuntime(988): 在 libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 connect.oracle.java.ConnectActivity。 onCreate(ConnectActivity.java:22) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 android.app.Activity.performCreate(Activity.java:4465) 04-20 14:20:21.862: E/AndroidRuntime(988): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 04-20 14:20:21.862: E/AndroidRuntime(988): 在android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 04-20 14:20:21.862: E/AndroidRuntime(988): ... 11 更多

并提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:28:17.487

您开启了[严格模式](http://developer.android.com/reference/android/os/StrictMode.html)。当您阻止 UI 线程执行缓慢的 IO 操作时，它会抱怨。

要么关闭严格模式，要么——总是更好的选择——将你的 IO 代码移动到后台线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:32:49.653

将 IO 代码移动到后台线程（或）异步任务（如果符合您的要求）。在主线程上使用网络调用不是最佳实践。参考这篇[文章](http://www.techblogistech.com/2011/11/how-to-fix-the-android-networkonmainthreadexception/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T15:26:46.383

您是否在清单文件中添加了互联网权限？

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# windows - 将文件路径连接到批处理脚本中的变量

> ID：10248994
> 
> 赞同：0
> 
> 时间：2012-04-20T15:22:23.460
> 
> 标签：windows, batch-file

我有一个脚本，我放在一起应该将文件列表复制到一个变量，但我收到的唯一的东西是最后一个文件。换句话说，当我在 for 循环中回显变量时，我看到 20 个左右的文件，但只有最后一个文件被复制到我的变量中。我怎样才能让它们全部正确复制？

我正在使用 Windows 7。

```
@echo off
setlocal enabledelayedexpansion enableextensions

for /r %%x in (*) do (
    echo %%x
    SET PATH_VALUE=%%x;%PATH_VALUE%
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:33:37.967

一种方法是使用延迟扩展。您已启用它——完成了一半的工作。现在你只想*使用*它。用 s替换`%`周围`PATH_VALUE`的`!`s 就完成了：

```
@echo off
setlocal enabledelayedexpansion enableextensions

for /r %%x in (*) do (
    echo %%x
    SET PATH_VALUE=%%x;**!PATH_VALUE!**
) 
```