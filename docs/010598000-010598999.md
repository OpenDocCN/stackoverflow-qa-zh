# StackOverflow 问答 10598000-10598999

# c# - 生成的随机数总是相等的

> ID：10598000
> 
> 赞同：2
> 
> 时间：2012-05-15T09:38:20.380
> 
> 标签：c#, random

我有一堂课：

```
public class MyClass
{
    public int MyMethod()
    {
        Random rand = new Random();

        return rand.Next() % 10 + 1;
    }
} 
```

它的两个对象：

```
MyClass obj1 = new MyClass();
MyClass obj2 = new MyClass(); 
```

问题`obj1.MyMethod() == obj2.MyMethod()`总是这样。为什么会这样？避免它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T09:40:21.643

创建你的随机对象静态

```
public class MyClass
{
   public static Random rand = new Random();

   public int MyMethod()
   {
       return rand.Next() % 10 + 1;
   }
} 
```

随机作品`System.DatTime.Now.Ticks`。

如果我们这样做

```
Random rand = new Random(); 
```

在内部它发生在

```
Random rand = new Random(System.DateTime.Now.Ticks); 
```

想一想系统中唯一不变的就是系统时间。

曾经使用 Random 类时，创建它的对象一次，然后`Next()`在任何你想要的地方使用它的方法。当在循环内创建随机对象时，您会在循环中发现这种情况。

在您的代码中，它们是一个接一个地创建的，它们是由相同的 Ticks 种子值创建的。

创建您的随机对象静态，然后它们将不一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:40:32.777

`Random`你每次都在创造一个新的。当您创建一个新实例而`Random` 没有明确指定它`System.DatTime.Now.Ticks`用作种子的种子值时。由于调用速度很快，它们发生在相同的“滴答”处，因此使用相同的种子值。由于所有 Random 实例为相同的种子值生成完全相同的“随机”数序列，因此两个实例都会生成相同的“随机”值。

这已经在网站上多次介绍过，您应该搜索其中一个答案。

但基本上您需要创建`Random`一次对象并重用它。这可以静态完成，或者至少作为类变量。

您应该阅读[此问题](https://stackoverflow.com/questions/767999/random-number-generator-not-working-the-way-i-had-planned-c)及其答案以找到更好的方法。

# objective-c - 为按钮添加自定义功能

> ID：10598001
> 
> 赞同：-2
> 
> 时间：2012-05-15T09:38:21.720
> 
> 标签：objective-c, xcode, ios5

我是 iOS 和 Xcode 的新手。我在我的 iPhone 应用程序中添加了一些按钮，现在我想向它们添加功能。在 Xcode 上，我转到故事板文件，右键单击一个按钮，然后有故事板 segues 有服装。我点击+，没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:03:24.433

```
[yourButton addTarget:self action:@selector(yourButtonSelected) forControlEvents:UIControlEventTouchUpInside]; 
```

实现`-(void)yourButtonSelected`方法

```
-(void)yourButtonSelected{

// Write your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:52:44.983

```
[btn addTarget:self action:@selector(youFunction) forControlEvents:UIControlEventTouchUpInside]; 
```

# python - 如何使用 psycopg2 在 postgres 中获取表？

> ID：10598002
> 
> 赞同：74
> 
> 时间：2012-05-15T09:38:23.470
> 
> 标签：python, psycopg2, postgresql-8.4

有人可以解释一下如何获取当前数据库中的表吗？

我正在使用 postgresql-8.4 psycopg2。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2014-06-28T01:39:03.527

这对我有用：

```
cursor.execute("""SELECT table_name FROM information_schema.tables
       WHERE table_schema = 'public'""")
for table in cursor.fetchall():
    print(table) 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-06-03T06:58:12.460

pg_class 存储所有需要的信息。

执行以下查询将返回用户定义的表作为列表中的元组

```
conn = psycopg2.connect(conn_string)
cursor = conn.cursor()
cursor.execute("select relname from pg_class where relkind='r' and relname !~ '^(pg_|sql_)';")
print cursor.fetchall() 
```

输出：

```
[('table1',), ('table2',), ('table3',)] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-31T17:02:58.607

问题是关于使用 python 的 psycopg2 来处理 postgres。这里有两个方便的功能：

```
def table_exists(con, table_str):

    exists = False
    try:
        cur = con.cursor()
        cur.execute("select exists(select relname from pg_class where relname='" + table_str + "')")
        exists = cur.fetchone()[0]
        print exists
        cur.close()
    except psycopg2.Error as e:
        print e
    return exists

def get_table_col_names(con, table_str):

    col_names = []
    try:
        cur = con.cursor()
        cur.execute("select * from " + table_str + " LIMIT 0")
        for desc in cur.description:
            col_names.append(desc[0])        
        cur.close()
    except psycopg2.Error as e:
        print e

    return col_names 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-11T23:03:24.703

这是一个`Python3`包含`connect()`参数并生成`Python` `list()`输出的片段：

```
conn = psycopg2.connect(host='localhost', dbname='mySchema',
                        user='myUserName', password='myPassword')
cursor = conn.cursor()

cursor.execute("""SELECT relname FROM pg_class WHERE relkind='r'
                  AND relname !~ '^(pg_|sql_)';""") # "rel" is short for relation.

tables = [i[0] for i in cursor.fetchall()] # A list() of tables. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-26T06:20:26.893

虽然它已被 Kalu 回答，但提到的查询从 postgres 数据库返回表 + 视图。如果您只需要表格而不需要视图，那么您可以在查询中包含 table_type -

```
 s = "SELECT"
        s += " table_schema"
        s += ", table_name"
        s += " FROM information_schema.tables"
        s += " WHERE"
        s += " ("
        s += " table_schema = '"+SCHEMA+"'"
        s += " AND table_type = 'BASE TABLE'"
        s += " )"
        s += " ORDER BY table_schema, table_name;"

        db_cursor.execute(s)
        list_tables = db_cursor.fetchall() 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-15T11:06:09.880

如果你使用 psql，你可以输入：

```
\d 
```

[http://www.postgresql.org/docs/9.1/static/app-psql.html](http://www.postgresql.org/docs/9.1/static/app-psql.html)

如果您正在运行 SQL，则可以键入：

```
SELECT * FROM tables; 
```

[http://www.postgresql.org/docs/current/interactive/information-schema.html](http://www.postgresql.org/docs/current/interactive/information-schema.html)

如果您想要有关其使用情况的统计信息，您可以键入：

```
SELECT * FROM pg_stat_user_tables; 
```

[http://www.postgresql.org/docs/current/interactive/monitoring-stats.html](http://www.postgresql.org/docs/current/interactive/monitoring-stats.html)

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2018-09-22T18:51:51.800

您可以将此代码用于 python 3

```
import psycopg2

conn=psycopg2.connect(database="your_database",user="postgres", password="",
host="127.0.0.1", port="5432")

cur = conn.cursor()

cur.execute("select * from your_table")
rows = cur.fetchall()
conn.close() 
```

# python - 使用百分号的 Python 字典操作

> ID：10598003
> 
> 赞同：-2
> 
> 时间：2012-05-15T09:38:25.683
> 
> 标签：python, list, dictionary, percentage

我有一个包含 2 个字典的列表：

```
>>> x
[{'sby_0': 'sb0'}, {'sby_1': 'sb1'}] 
```

我想使用百分号获取第二个字典的项目：

```
i = 1
x[1]["sby_%s" %i] 
```

但它不起作用。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:40:16.723

您的代码没有任何问题：

```
In [6]: x = [{'sby_0': 'sb0'}, {'sby_1': 'sb1'}]

In [7]: i = 1

In [8]: x[1]['sby_%s' % i]
Out[8]: 'sb1' 
```

**编辑**您在评论中发布的错误消息说`x[1]["sby_%i", i]`。问题在于逗号；它应该用百分号替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:40:18.523

您的代码运行良好：

```
>>> x = [{'sby_0': 'sb0'}, {'sby_1': 'sb1'}]
>>> i = 1
>>> x[1]["sby_%s" %i]
'sb1' 
```

但是，我会使用`%d`而不是`%s`因为`i`是一个数字。

您未发布的代码中的错误是您使用`"sby_%s", i`而不是`"sby_%s" % i`. `%`在创建元组时执行字符串格式化（你想要什么）`,`（在这种情况下你不想要什么）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:41:17.240

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> x = [{'sby_0': 'sb0'}, {'sby_1': 'sb1'}]
>>> i = 1
>>> x[1]
{'sby_1': 'sb1'}
>>> x[1]['sby_%s' % i]
'sb1' 
```

它按预期工作。也许扩展您的问题并发布有关您的使用情况的更多信息。

# iphone - 有没有办法过滤 UIImagePickerController 相机输入？

> ID：10598004
> 
> 赞同：2
> 
> 时间：2012-05-15T09:38:31.440
> 
> 标签：iphone, ios, cocoa, uiimagepickercontroller, filtering

我的意思是，我需要实现一些能够使用过滤器的相机，比如 socialcam 或 viddy。我已经制作了一些用作 UIImagePickerController 类的组合的类，我已经自定义了它的 cameraOverlayView，现在我不知道如何过滤选择器的相机输入，然后显示过滤器预览并捕获它。我是否需要基于 GPUImage 示例实现自己的相机？

# eclipse-plugin - Eclipse中的不可见标记

> ID：10598006
> 
> 赞同：1
> 
> 时间：2012-05-15T09:38:33.717
> 
> 标签：eclipse-plugin

我遇到了一个不寻常的错误，我可能遗漏了一些东西——我编写了一个测试插件，它应该只在文件的第一行显示一个错误标记。我正在使用此代码，由按下按钮触发

```
public void createMarkerForResource(IResource resource) throws CoreException {
        HashMap map = new HashMap();
        MarkerUtilities.setLineNumber(map, 1);
        MarkerUtilities.setMessage(map, "HAZARD");
        map.put(IMarker.SEVERITY, IMarker.SEVERITY_WARNING);
        MarkerUtilities.createMarker(resource, map, IMarker.TEXT);
    } 
```

该代码似乎不起作用 - 但仔细检查时正在发生*一些*事情。标尺上现在有一个“可点击”区域，但没有图标...

前： ![在此处输入图像描述](../Images/9b2c62ef926e1dfb53ebe32f283403dd.png)

后： ![在此处输入图像描述](../Images/69500db279365bb19a6ac4af55f2fcf4.png)

有任何想法吗？

（我知道有一个类似的问题 - 但它是自我解决的，因为我们使用不同的方法并得到不同的响应，我认为值得打开这个问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:45:52.500

据我所知，您定义了一个`org.eclipse.core.resources.textmarker`. 但我找不到`org.eclipse.ui.ide.markerImageProviders`标记类型的图像。所以我只是相信，这种类型没有图像。

尝试使用不同类型的标记类型，定义您自己的标记类型或为标记类型定义您自己的图像`textmarker`（不推荐）。

# ios - 如何像在 facebook iPhone 应用程序中那样实现推送通知

> ID：10598007
> 
> 赞同：2
> 
> 时间：2012-05-15T09:38:36.137
> 
> 标签：ios, push-notification

我想知道如何实现像 facebook iPhone 应用这样的推送通知。意味着推送通知将出现在我的应用程序中的图像顶部位置。怎么做？应用程序图标上的推送通知已完成.. 给我你的想法..

# java - 将 Jquery 事件附加到 JSF 数据表

> ID：10598016
> 
> 赞同：0
> 
> 时间：2012-05-15T09:39:07.743
> 
> 标签：java, javascript, jquery, jsf, richfaces

由于我们可以将 JQuery 应用于任何 JSF 渲染的组件，如以下问题所示

[JSF 到 JQuery 组件集成](https://stackoverflow.com/questions/10515384/jsf-to-jquery-component-integration)

在尝试过之后，它确实有效，我可以成功地将 JQuery 集成到 JSF 中，但问题是每当我重新渲染 h:dataTable 时，JQuery 停止工作，顺便说一下，我正在使用 RichFaces 和 a4j -。

比如我有一个数据表如下

```
<h:dataTable id="someDataTable" value="#{backingBean.someDataModel}" var="item" styleClass="table">
   <h:column>
      <h:outputText value="#{item.text}"/>
   </h:column>
</h:dataTable> 
```

我有一个按钮，单击该按钮会重新呈现数据表，并用新数据重新填充它。

```
<a4j:commandButton value="Click" reRender="someDataTable"/> 
```

不要忘记我在页面中有这个脚本

```
<script>
  jQuery.noConflict();
   jQuery(document).ready(function () {
      jQuery('.table').dataTable({
    "bSort": false}); 
    });
</script> 
```

现在，当第一次加载页面时，排序工作正常，但是每当我单击按钮重新渲染表格时，表格都会成功地填充来自支持 bean 的新数据，但排序不再起作用。

从我的猜测来看，我认为这可能与

```
jQuery(document).ready() 
```

这适用于

```
jQuery.('.table').dataTable(); 
```

只有当文档准备好时，所以我想知道 jQuery 中是否有一些事件可以附加到 dataTable 重新渲染事件，因为我不是 JQuery 或 JS 的专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:20:01.647

只需在 ajax 请求完成后重新执行脚本即可。

首先将您的脚本重构为可重用的函数。

```
<script>
    jQuery.noConflict();
    jQuery(document).ready(function() {
        initDataTable();
    });
    function initDataTable() {
        jQuery('.table').dataTable({
            "bSort": false
        }); 
    }
</script> 
```

`oncomplete`然后在of 中调用相同的函数`<a4j:commandButton>`。

```
<a4j:commandButton ... oncomplete="initDataTable()" /> 
```

# php - 使用匿名函数的匿名函数

> ID：10598023
> 
> 赞同：-2
> 
> 时间：2012-05-15T09:39:40.363
> 
> 标签：php, function, anonymous

`Parse error: parse error` 使用此功能时出现此错误，

```
 $rows_tick = array_filter(
                $rows, 
                function ($element) use ($date_tick) { 
                    return ($element['ModTime'] <= $date_tick->format("His000"));
                }
               ); 
```

我想念什么吗？

将 wampp 服务器与 php v 5.3.x 一起使用时，它会正常运行，但在将 xampp 与 php 5.2.9 一起使用时则不会，

这是错的吗 ？在低于 5.3 的 php 中使用匿名函数时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:42:14.710

匿名函数来自 php 5.3。

您应该在 php < 5.3 的地方编写普通函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:42:11.327

从[手册](http://php.net/manual/en/functions.anonymous.php)：

> PHP 5.3.0 版匿名函数可用

# c# - 检查表中未读消息的数量？

> ID：10598024
> 
> 赞同：0
> 
> 时间：2012-05-15T09:39:41.207
> 
> 标签：c#, sql, database, razor, webmatrix

我以前做过，但这次它不起作用。

我要做的就是 COUNT() 表中未读消息的数量。

表定义：

```
UserId(int), From(int), Type(nvarchar), Message(nvarchar), Read(bit) 
```

Read 和`UserId`columns 是我要检查的内容。我尝试了以下方法：

```
 database.QuerySingle("SELECT COUNT(*) AS NumberOfNotifications FROM Notifications WHERE UserId = @0 AND Read = CONVERT(bit,0)", userid); 
```

我也尝试*了许多*其他版本，但结果总是相同。我总是收到以下错误：

> ## “/”应用程序中的服务器错误。
> 
> 关键字“读取”附近的语法不正确。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：关键字“读取”附近的语法不正确。

我正在尝试做的是： *“在 NOTIFICATIONSTABLE 中获取未读消息的数量，其中 USERID = @0 AND READ = FALSE”*

任何帮助都将不胜感激！

谢谢

# 更新

以下是我遇到问题的助手的完整代码。现在我已经修复了错误，我不知道为什么在我登录时它没有显示“您有新的通知消息” - 相应的表格中有 4 行。

```
@helper RetrievePhotoWithName(int userid)
{
    var database = Database.Open("DUDE");
    var name = database.QuerySingle("select FirstName, LastName, ProfilePicture from UserProfile where UserId = @0", userid);
    var notifications =  database.QuerySingle("SELECT COUNT(*) AS NumberOfNotifications FROM Notifications WHERE UserId = @0 AND [Read] = @1", userid, false);

    var DisplayName = "";
    if(notifications["NumberOfNotifications"] < 1)
    {
        DisplayName = name["FirstName"] + " " + name["LastName"];
    }
    else
    {
        DisplayName = name["FirstName"] + ", you have " + notifications["NumberOfNotifications"] + " new messages.";
    }
    <a href="@Href("~/Home")" title="My Account"><img src="@Href("~/Shared/Assets/Images/" + name["ProfilePicture"] + ".png")" id="MiniProfilePicture" />&nbsp;@DisplayName</a>

    database.Close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:42:39.200

尝试在`read`===> 周围加上方括号`[Read]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:45:04.630

您的错误表明这`READ`是一个关键字。它解释的是命令或类似命令，而不是字段名称。

不同版本的 SQL 您可以将字段名称括在不同的标记中以防止这种混淆。例如 SQL Server 会使用`[Read]`，MySQL 使用反引号，例如``Read``.

# scons - 斯康斯。使用 Glob 进行递归

> ID：10598026
> 
> 赞同：7
> 
> 时间：2012-05-15T09:39:49.937
> 
> 标签：scons

我使用了 scons 几天，有点困惑。为什么没有用于从给定根目录开始递归构建源代码的内置工具？让我解释一下：我有这样的来源处置：

```
src
    Core
       folder1
       folder2
           subfolder2_1
    Std
       folder1 
```

..等等。这棵树可能更深。

现在我用这样的结构来建造它：

```
sources = Glob('./builds/Std/*/*.cpp')
sources = sources + Glob('./builds/Std/*.cpp')
sources = sources + Glob('./builds/Std/*/*/*.cpp')
sources = sources + Glob('./builds/Std/*/*/*/*.cpp') 
```

这看起来并不完美。当然，我可以编写一些 python 代码，但是有更合适的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T17:50:08.077

正如 Torsten 已经说过的，SCons 中没有“内部”递归 Glob()。你需要自己写一些东西。我的解决方案是：

```
import fnmatch
import os

matches = []
for root, dirnames, filenames in os.walk('src'):
  for filename in fnmatch.filter(filenames, '*.c'):
    matches.append(Glob(os.path.join(root, filename)[len(root)+1:])) 
```

我想强调你在这里需要 Glob()（不是来自 python 的 glob.glob()），尤其是当你使用 VariantDir() 时。此外，当您使用 VariantDir() 时，不要忘记将绝对路径转换为相对路径（在示例中，我使用 [len(root)+1:] 实现了这一点）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T08:29:52.160

当然。您需要编写 python 包装器来遍历目录。你可以在 stackoverflow 上找到很多食谱。这是我的简单函数，它返回当前目录中的子目录列表（并忽略以“。”开头的隐藏目录 - 点）

```
def getSubdirs(abs_path_dir) :  
    lst = [ name for name in os.listdir(abs_path_dir) if os.path.isdir(os.path.join(abs_path_dir, name)) and name[0] != '.' ]
    lst.sort()
    return lst 
```

例如，我有包含 foo、bar、ice 的 dir 模块。

```
corePath = 'abs/path/to/modules'
modules = getSubdirs(corePath)
# modules = [bar, foo, ice]
for module in modules :
  sources += Glob(os.path.join(corePath, module, '*.cpp')) 
```

您可以改进 getSubdirs 函数，添加递归并深入到子目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T11:43:18.230

Glob() SCons 函数没有递归的能力。

如果您将 Python 代码更改为使用 list.extend() 函数，效率会更高，如下所示：

```
sources = Glob('./builds/Std/*/*.cpp')
sources.extend(Glob('./builds/Std/*.cpp'))
sources.extend(Glob('./builds/Std/*/*/*.cpp'))
sources.extend(Glob('./builds/Std/*/*/*/*.cpp')) 
```

与其像您一样尝试递归，而是在每个子目录中都有一个 SConscript 脚本，并在根 SConstruct 中使用 SConscript() 函数调用它们中的每一个，这很常见。这称为[SCons 分层构建](http://www.scons.org/doc/HTML/scons-user/c3186.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-23T17:30:43.040

我用这个：

```
srcdir = './'
sources = [s for s in glob2.glob(srcdir + '**/*.cpp') if "/." not in s] 
```

# wordpress - Wordpress，显示当前自定义帖子类型的当前类别

> ID：10598027
> 
> 赞同：0
> 
> 时间：2012-05-15T09:39:52.200
> 
> 标签：wordpress, custom-post-type

我有当前的自定义帖子类型“投资组合”，有 2 个类别“Cat1”和“Cat2”。

每个帖子都选择了一个类别。

```
例子：
标题：title1，类别：Cat1
标题：标题2，类别：Cat2

```

在查看前面的每个帖子时，我想知道这个帖子属于什么类别。

例如.. 我有一个页面**http://www.domain.com/portfolio/title1/** - 在这个页面中，我想知道这个当前帖子属于哪个类别。

应该有一个部分我可以显示**Cat1**。

我将使用什么 wordpress 功能来实现这一目标？

我有这个功能。

```
print_r($wp_query->get_queried_object()); 
```

但它没有显示此当前自定义帖子类型的当前类别。

我希望我解释清楚。任何帮助都非常感谢。

诺伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T10:31:57.830

这将返回当前帖子的当前分类的 ID：

```
$terms = wp_get_object_terms( $post->ID, 'custom-post-taxonomy', array('fields'=>'ids'));
$term_id = array_pop( $terms ); //gets the last ID in the array 
```

有关wp_get_object_terms() 的参考，请参阅[http://codex.wordpress.org/Function_Reference/wp_get_object_terms](http://codex.wordpress.org/Function_Reference/wp_get_object_terms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:46:00.440

尝试这个

```
<?php $cat_name = get_the_category( $post->ID );
 print_r($cat_name);
 ?> 
```

# javascript - markerclusterer 鼠标悬停不起作用

> ID：10598029
> 
> 赞同：3
> 
> 时间：2012-05-15T09:39:53.187
> 
> 标签：javascript, google-maps-api-3, mouseover, markerclusterer

我刚刚看了以下帖子：[markerclusterer info windows](https://stackoverflow.com/questions/7642728/markerclusterer-info-windows)

在这篇文章中我需要一个东西，markerclusterer 的 mouseover 事件。当鼠标悬停在图标上时，我需要更改图标。

我得到以下代码：

```
var clusterOptions = {
    zoomOnClick: false,
    styles: [{
        url: 'images/template/cluster.png',
        height: 68, 
        width: 57,
        textColor: '#FFF'
    }]
}
var markerClusterer = new MarkerClusterer(map, markers, clusterOptions);

google.maps.event.addListener(markerClusterer, "mouseover", function(cluster) {
    console.log('test');
});

// Listen for a cluster to be clicked
google.maps.event.addListener(markerClusterer, 'clusterclick', function(cluster) {

    var markers = cluster.getMarkers();
    var content = '';
    $.each(markers, function () {
        content += this.get('content');
    });

    // Convert lat/long from cluster object to a usable MVCObject
    var info = new google.maps.MVCObject;
    info.set('position', cluster.center_);

    var infowindow = new google.maps.InfoWindow();
    infowindow.close();
    infowindow.setContent(content);
    infowindow.open(map, info);

}); 
```

群集器工作正常，信息窗口也显示得很好。它结合了集群中标记的所有信息窗口。

我在鼠标悬停事件中做错了什么？我什至没有看到console.log！

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:11:09.433

我的解决方案是使用[markerclustererplus](https://github.com/googlemaps/v3-utility-library/tree/master/markerclustererplus)而不是markerclusterer。只需替换您的脚本`src`。这是一个[例子](https://github.com/googlemaps/v3-utility-library/blob/master/markerclustererplus/examples/events_example.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-24T22:54:18.383

您应该使用以下库：

[https://github.com/googlemaps/v3-utility-library/tree/master/markerclustererplus](https://github.com/googlemaps/v3-utility-library/tree/master/markerclustererplus)

它有鼠标悬停处理程序 [http://htmlpreview.github.io/?https://github.com/googlemaps/v3-utility-library/blob/master/markerclustererplus/docs/reference.html](http://htmlpreview.github.io/?https://github.com/googlemaps/v3-utility-library/blob/master/markerclustererplus/docs/reference.html)

# android - android中的KSOAP运行时异常

> ID：10598031
> 
> 赞同：0
> 
> 时间：2012-05-15T09:39:54.807
> 
> 标签：android, ksoap2

> **可能重复：**
> [无法在 android 中序列化 KSOAP 中的问题](https://stackoverflow.com/questions/10664051/cannot-serialize-issue-in-ksoap-in-android)

我在我的应用程序中调用一个 Web 服务，因为我正在为该 SOAP 请求设置输入，如下所示：

```
 PropertyInfo usrid =new PropertyInfo();
            usrid.setName("LoginID");
            usrid.setValue(userid);
            usrid.setType(String.class);
            authentication.addProperty(usrid);        

            PropertyInfo pass =new PropertyInfo();
            pass.setName("Password");
            pass.setValue(password);
            pass.setType(String.class);
            authentication.addProperty(pass);    

            request.addProperty("authentication", authentication);

            PropertyInfo no =new PropertyInfo();
            no.setName("No");
            no.setValue("28448347");
            no.setType(String.class); 
            request.addProperty("Str",no); 
```

但我收到错误：

```
java.lang.RuntimeException: Cannot serialize:no 
```

# asp.net - asp.net 1.1 重复提交条目

> ID：10598032
> 
> 赞同：0
> 
> 时间：2012-05-15T09:39:59.707
> 
> 标签：asp.net, duplicates

我有一个旧的框架 1.1 项目，有以下问题：如果用户提交一个页面，那么在数据库中可能会出现重复的记录。这个错误经常重复但并不一致：在大多数情况下没有重复的条目，但在某些情况下最多可以有 4 个。首次提交后，我们使用 JavaScript 禁用提交按钮。

可能这会有所帮助：有一个会话对象用于存储用户输入（已提交）。

您能想到为什么会发生重复记录的任何场景？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:51:04.273

最后，我发现一些移动浏览器忽略了禁用提交按钮的 JavaScript，并且用户设法多次重新提交表单。

最简单的（？）解决方案如下：

在数据库中创建一个表“SubmissionTokens”，其中包含两个字段：Token（唯一标识符）、DateCreated（日期时间）。然后，当加载提交表单的页面时，将令牌添加到数据库并将“id”值保存在同一页面的隐藏字段中。当用户提交表单时，然后从隐藏字段中读取令牌并查看表 SubmissionTokens 中是否存在令牌。如果确实存在，则在数据库中插入一条带有表单数据的新记录，并从 SubmissionTokens 中删除该令牌。您还可以使用 DateCreate 字段使令牌过期。

在工作中，我实现了一些不同的解决方案，只是在插入新记录之前在数据库中查找重复记录。但这是因为有一个特定要求，如果用户在浏览器中单击“返回”，则必须能够重新提交表单。在这种情况下，SubmissionToken 已被删除，第一个解决方案将不起作用。

# c# - 如何在 C# 中自动执行 ASP.NET 网站中的任务

> ID：10598033
> 
> 赞同：0
> 
> 时间：2012-05-15T09:40:02.930
> 
> 标签：c#, automation, asp.net-3.5, asp.net-2.0, asp.net-4.0

网。我想每年为我的 MYSQL 数据库中的所有帐户持有人修改一个字段“年龄”。有什么方法可以自动执行此任务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:49:21.633

我知道这并不能直接回答您的问题，但是如果您想`Age`每年更新，记录他们`DateOfBirth`然后从中计算他们的年龄不是更有意义吗？

但是，要回答您的问题，您可以查看使用[`TaskScheduler`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.aspx)该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:47:34.463

在Mysql中可以使用[事件调度](http://dev.mysql.com/doc/refman/5.1/en/events.html)器来实现上述目的。无需在前端写代码，在后端完成工作。

要创建事件，您可以使用 create event 语句。[这是一个](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)例子的解释。

像这样的东西：

```
CREATE EVENT CalculateAge_Event
     ON SCHEDULE EVERY 1 YEAR
     DO 
Update myschema.Employee Set Age = DATEDIFF(NOW(),DateOfBirth); 
```

# java - 使用 SAX 过滤器将新元素插入 XML 文件

> ID：10598035
> 
> 赞同：4
> 
> 时间：2012-05-15T09:40:11.713
> 
> 标签：java, xml, filter, sax

我有一个 XML 文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<game >
  <moves>
    <turn>2</turn>
    <piece nr="1" />
    <turn>4</turn>
    <piece nr="1" />

  </moves>
</game> 
```

我正在编写一个 Java 程序，它将 XML 文件作为输入，然后使用 SAX 和 SAX 过滤器对其进行解析并计算：

*   turn 元素内容的总和（这里=6）
*   块元素的数量（这里=2）

然后我想使用 SAX 过滤器来生成一个输出 XML 文件，该文件与输入文件相同，但带有一个附加元素，例如：

```
<s:statistics>
    <s:turn-total>6</s:turn-total>
    <s:piece-count>2</s:piece-count>
</s:statistics> 
```

前缀`s`是对[命名空间](http://www.oniel.com/ns/test/)的引用。

到目前为止，我的程序是：

```
 public class test{     
         public static void main(String[] args) throws Exception {
                if (args.length != 2) {
                System.err.println("error ");
                System.exit(1);
                }
                String xmlInput = args[0];
                String filteredXML = args[1];
                test test1 = new test();
                    test1.sax(xmlInput, filteredXML);
            }
    private void sax(String gameXML, String filteredGameXML)throws Exception{
        FileInputStream fis = new FileInputStream( gameXML);
        InputSource is = new InputSource(fis);
        XMLReader xr = XMLReaderFactory.createXMLReader();
        XMLFilter xf = new MyFilter();
        xf.setParent(xr);
        xr = xf;
        xr.parse(is);
        xr.setFeature("http://xml.org/sax/features/namespaces", true);
        DefaultHandler handler = new DefaultHandler();
        xr.setContentHandler(handler);
    }
    private class MyFilter extends XMLFilterImpl{
             StringBuffer buffer;
         int temp=0;
             int sum=0;
             String ff;
             int numof=0;
             private MyFilter() {}

            @Override
                public void startDocument() throws SAXException {
                     System.out.println( "START DOCUMENT" );
                    numof=0;        
                }

                public void startElement(String namespaceURI, String localName, String  name,   Attributes attributes) throws SAXException{
                    if(localName.equals("turn")){
                        buffer=new StringBuffer();
                        }
                    if("piece".equals(name)){
                        numof++;
                    }
                }

                public void characters(char[] ch, int start, int length) throws SAXException {
                    String s=new String(ch, start, length);
                    if(buffer!=null){
                        buffer.append(s);
                        }
                }

                public void endElement(String uri, String localName, String name)throws SAXException {
                    if(buffer!=null ){
                        ff=buffer.toString();
                        temp=Integer.valueOf(ff);
                        sum=sum+temp;
                        }
                        buffer=null;
                }
                public void endDocument() throws SAXException {
                    System.out.println( "END DOCUMENT" );
                    System.out.println("sum of turn: "+ sum);
                    System.out.println("sum of piece: "+ numof);
                }
         }

    } 
```

接下来我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:11:10.813

您`XMLFilter`应该委托另一个`ContentHandler`根据 sax 事件序列化文档的人。

```
SAXTransformerFactory factory = (SAXTransformerFactory)TransformerFactory.newInstance();
TransformerHandler serializer = factory.newTransformerHandler();
Result result = new StreamResult(...);
serializer.setResult(result);

XMLFilterImpl filter = new MyFilter();
filter.setContentHandler(serializer);

XMLReader xmlreader = XMLReaderFactory.createXMLReader();
xmlreader.setFeature("http://xml.org/sax/features/namespaces", true);
xmlreader.setFeature("http://xml.org/sax/features/namespace-prefixes", true);
xmlreader.setContentHandler(filter);

xmlreader.parse(new InputSource(...)); 
```

您的回调应委托给`super`实现，后者将事件转发给序列化`ContentHandler`.

```
public void startElement(String namespaceURI, String localName, String qName, Attributes atts) throws SAXException {
    super.startElement(namespaceURI, localName, qName, atts);
    ...
} 
```

在您的`endElement`回调中，您可以检查您是否位于最后的结束标记并添加其他 sax 事件。

```
public void endElement(String namespaceURI, String localName, String qName) throws SAXException {
    super.endElement(namespaceURI, localName, qName);
    if ("game".equals(localName)) {
        super.startElement("", "statistics", "statistics", new AttributesImpl());
        char[] chars = String.valueOf(num).toCharArray();
        super.characters(chars, 0, chars.length);
        super.endElement("", "statistics", "statistics");
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:14:16.923

使用上面的@Jorn Horstmann (http://stackoverflow.com/users/139595/jorn-horstmann) 答案，您可以轻松添加缺少的元素。但是要将结果写入 XML 文件，您应该使用 TransformerHandler。

只需创建一个非常基本的 ContentHandler 并使用它来代替 DefaultHandler。在 ContentHandler 中，您可以实现所有基本功能（startDocument、startElement 等）并将每个元素添加到新的 Transformer。例如在您的 startDocument 函数中：

```
Transformer t = hd.getTransformer();
t.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
t.setOutputProperty(OutputKeys.METHOD, "xml");
t.setOutputProperty(OutputKeys.INDENT, "yes");
hd.startDocument(); 
```

然后（在其他函数中）添加这个：例如对于startElement：

```
hd.startElement(uri,localName,name,attributes); 
```

最后，您可以在 endDocument 方法中将所有这些写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:30:18.850

如果我错了，请纠正我，但我认为 XMLReader 和 XMLFilter 真的不应该更改文档。我可以提供一种不同的方法，您也可以更改文档的内容：

```
public class ExtXMLConfig {
private JAXBContext context;
private Marshaller m;
private Unmarshaller um;
private Schema schema = null;

/**
 * Creates an ExtXMLConfig-object, which uses rootClass as object to parse
 * and save XML-files.
 * 
 * @param rootClass
 *            the class use create/parse xml-files from
 * @throws JAXBException
 */
public ExtXMLConfig(Class<?> rootClass) throws JAXBException {
    context = JAXBContext.newInstance(rootClass);

    init();
}

/**
 * Creates an ExtXMLConfig, which uses a classPath like javax.xml.bin to use
 * all classes in that path to parse and write xml-files
 * 
 * @param classPath
 *            the class path containing all needed java-objects
 * @throws JAXBException
 */
public ExtXMLConfig(String classPath) throws JAXBException {
    context = JAXBContext.newInstance(classPath);

    init();
}

/**
 * Parses a xml-file into a JavaObject.
 * 
 * @param file
 *            path to the xml-file
 * @return a java-Object
 */
public Object load(String file) {
    return load(new File(file));
}

/**
 * Parses a xml-file into a JavaObject.
 * 
 * @param xml
 *            File-object representing the xml-file
 * @return a java-Object
 */
public Object load(File xml) {
    um.setSchema(schema);

    if (xml.exists() && xml.isFile()) {
        try {
            return um.unmarshal(xml);
        } catch (JAXBException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } else {
        System.out.println("Failed to open file: " + xml.getAbsolutePath());
    }

    return null;
}

/**
 * Saves a object into a xml-file.
 * 
 * @param xml
 *            the object to save
 * @param file
 *            path to the file to save to
 */
public void save(Object xml, String file) {
    save(xml, new File(file));
}

/**
 * Saves a object into a xml-file.
 * 
 * @param xml
 *            the object to save
 * @param file
 *            File-object representing the file to save to
 */
public void save(Object xml, File file) {
    if (xml != null) {
        m.setSchema(schema);

        if (!file.isDirectory()) {
            try {
                if (!file.exists()) {
                    file.createNewFile();
                }

                m.marshal(xml, file);
            } catch (JAXBException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
}

/**
 * Returns a formatted string representation of a xml-file given as a
 * java-Object.
 * 
 * @param xml
 *            the java-object to parse the xml from.
 * @return a formatted string representation of the given object
 */
public String toString(Object xml) {
    StringWriter out = new StringWriter();
    try {
        m.setSchema(schema);
        m.marshal(xml, out);

        return out.toString();
    } catch (JAXBException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return null;
}

private void init() throws JAXBException {
    m = context.createMarshaller();
    m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
    m.setProperty(Marshaller.JAXB_ENCODING, "UTF-8");

    um = context.createUnmarshaller();
} 
```

使用这个类来解析你的 xml-Files 你只需要一个像这样的类：

```
@XmlRootElement // used to parse this class as xml-Root
public class Game {
   private Move moves;

   public Game() {};

   public void setMove(Move moves) {
      this.moves = moves;
   }

   public Moves getMoves() {
      return this.moves;
   }
} 
```

Move 是另一个类的实例，该类具有您需要的字段，并且还具有 XmlRootElement 的注释。

我希望这有帮助。

# iphone - setImage 或 setTitle ..只有一个在分段控制 iPhone 中工作

> ID：10598036
> 
> 赞同：0
> 
> 时间：2012-05-15T09:40:14.583
> 
> 标签：iphone, ios, ios4, cocos2d-iphone

当我尝试使用带有 4 个按钮的分段控件开发应用程序时，它无法同时设置标题和图像。对于每个我都设置了一个图像。当我尝试为每个设置一个标题而不是图像标题时替换。如何同时使用图像并在图像下方设置标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:49:43.127

一个段只能有一个图像或一个标题；它不能两者兼得。没有默认标题。

# sql - 从 Bridge 表中获取组 ID

> ID：10598037
> 
> 赞同：2
> 
> 时间：2012-05-15T09:40:15.543
> 
> 标签：sql

我正在尝试从如下所示的桥接表中获取组 ID 密钥：

```
GROUP_KEY  DIM_KEY
    1        11
    1        12
    1        13
    1        14
    2        11
    2        12
    3        11
    3        12
    3        13
    3        15
    4        11
    5        11
    5        12
    5        13 
```

我搜索了一下得到了这个查询：

```
SELECT b1.group_key
FROM BRIDGE b1
JOIN BRIDGE b2 ON (b1.group_key= b2.group_key)
JOIN BRIDGE b3 ON (b1.group_key= b3.group_key)
WHERE b1.dim_key = 11
  AND b2.dim_key = 12
  AND b3.dim_key = 13; 
```

但这让我得到 1,3 和 5，而我只想要 5，我可以用 aa count = 3 进一步过滤它，但我的问题是，有没有更好的方法？我正在使用 PL/SQL 顺便说一句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:16:14.397

**编辑**

如果您使用的是 Oracle 11g，请尝试以下操作

```
 SELECT group_key FROM (
 SELECT GROUP_KEY, listagg(DIM_KEY, ',') WITHIN GROUP(ORDER BY DIM_KEY) DIM_KEY
   FROM t
  GROUP BY GROUP_KEY) WHERE dim_key = '11,12,13' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:52:14.030

我真的不知道你想要什么。但是如果你想计数为 3。那么你可以这样做：

```
WITH CTE
(
    SELECT
        COUNT(GROUP_KEY) OVER(PARTITION BY GROUP_KEY) AS Counts,
        BRIDGE.*
    FROM
        BRIDGE
)
SELECT
    *
FROM
    CTE
WHERE
    CTE.Counts=3
    AND CTE.dim_key IN(11,12,13); 
```

# jquery - 像药丸一样制作精美的单选按钮

> ID：10598038
> 
> 赞同：3
> 
> 时间：2012-05-15T09:40:16.213
> 
> 标签：jquery, html, css, forms, radio-button

[我正在寻找一种解决方案，用更接近Bootstrap 中定义](http://twitter.github.com/bootstrap/components.html#navs)的“药丸”的形式替换老式单选按钮。

我想仅通过在 Radio Button 上使用 CSS 是不可能做到这一点的，但是您知道是否有类似的解决方案（例如使用 JQuery）？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:44:45.337

这是github中的两个按钮项目

[http://hellohappy.org/css3-buttons/](http://hellohappy.org/css3-buttons/)

[http://nicolasgallagher.com/lab/css3-github-buttons/](http://nicolasgallagher.com/lab/css3-github-buttons/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:03:37.903

github上有一个引导问题，正是关于这一点：

[https://github.com/twitter/bootstrap/issues/1161](https://github.com/twitter/bootstrap/issues/1161)

它包含几个解决方案，包括一个仅 CSS 的解决方案：http: [//jsfiddle.net/charettes/SauLj/](http://jsfiddle.net/charettes/SauLj/)

# c++ - 按值传递参数和按引用传递参数有什么区别？

> ID：10598043
> 
> 赞同：0
> 
> 时间：2012-05-15T09:40:32.823
> 
> 标签：c++, c, pass-by-reference, pass-by-value

> **可能重复：**
> [按引用传递与按值传递有什么区别？](https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value)

我读到在 C 中参数是按值传递的，但是按值传递参数（如在 C 中）或通过引用（如 C++ - C#）传递参数有什么区别？指针和引用有什么区别？

```
void with_ptr(int *i)
{ *i = 0; }

void with_ref(int &i)
{ i = 0; } 
```

在这些情况下是否修改了这两个值？如果是，为什么 C++ 允许通过引用传递参数？我认为函数内部不清楚 i 值是否可以修改。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T09:44:28.357

> 按值传递参数或按引用传递参数有什么区别

如果按值传递，则对变量的更改将是函数的局部变量，因为在调用函数时会*复制该值。*对引用参数的修改将传播到原始值。

> 指针和引用有什么区别？

正如您在代码中看到的那样，区别主要在于语法。此外，可以重新分配指针以指向其他内容（除非已声明`const`），而引用则不能；相反，分配给引用将分配给被引用的*值*。

> 我认为函数内部不清楚 i 值是否可以修改。

相反，它是绝对清楚的：函数签名告诉你。

实际上有一个案例是在函数*之外*并不清楚。`ref`这就是为什么例如 C# 的原始版本要求您使用（即`f(ref x)`，而不是 plain `f(x)`）显式注释任何引用调用。这类似于在 C++ 中调用函数`f(&x)`来明确传递一个指针。

但是在最近的 C# 版本中，使用`ref`for 调用是可选的，因为它毕竟没有提供足够的优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:46:10.437

考虑一下：

1) 通过引用传递提供了更简单的元素访问 `i`，而不是`*i`

2）通常你不能传递`null`对方法的引用，但可以传递一个`null`指针

3) 不能改变引用的地址，但可以改变它为一个指针（虽然，由于指针本身是按值传递的，这个改变会在函数退出时被丢弃）

希望，这有点帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:43:28.653

实际上，在第一种情况下，您不能修改参数。指针本身是不可变的，你只能修改它指向的值。

> 如果是，为什么 C++ 允许通过引用传递参数？

因为指针很容易被误用。几乎总是首选参考文献。对于您的情况，如果您通过`NULL`to`with_ptr`怎么办？您将获得未定义的行为，如果您使用`with_ref`.

> 我认为函数内部不清楚 i 值是否可以修改。

很**清楚**。如果您看到一个通过非引用获取参数的函数`const`，您可以假设它会被更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T09:43:55.960

我认为一个方法只能改变一个参数的值，如果这是通过引用传递的。如果您在方法中按值传递参数，那么无论您对其值进行什么更改，这在父方法中都将不可用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T09:53:24.517

据我所知，我认为引用在某种意义上更安全，因为它不能被修改（总是指向同一个东西），如果它是一个局部变量则应该被初始化。但是，指针可以更改为指向其他地方。

```
int x = 10;
int &y = x;
int *p = &x;
p++; //Legal if you know what's next
y++; // Increases the value of x. Now x = y = 11; 
```

作为我的两分钱，我认为引用变量只是初始化它的同一内存地址的替代名称。这也很好地解释了： [http ://www.dgp.toronto.edu/~patrick/csc418/wi2004/notes/PointersVsRef.pdf](http://www.dgp.toronto.edu/~patrick/csc418/wi2004/notes/PointersVsRef.pdf)

# javascript - 获取用户国家，详细信息 FQL facebook

> ID：10598046
> 
> 赞同：2
> 
> 时间：2012-05-15T09:40:44.483
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-fql

如何通过带有 FQL 的 javascript 获取用户国家/地区。

`FB.API("/me")`不包括国家信息[我认为]，那么如何在一次查询中获取国家和用户详细信息？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:56:21.230

您在 users 表中没有任何名为 country 的参数。但是您可以使用 user_location 或 user_hometown 或语言环境
[https://developers.facebook.com/docs/reference/api/user/获取用户的位置](https://developers.facebook.com/docs/reference/api/user/)

为此，您需要从用户（user_location 或 user_hometown）获得权限
[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

然后 FB.API("/me") 也会返回国家信息。这将返回位置字段为`Array ( [id] => 111227078906045 [name] => Some City, New York )`

所以你将永远收到这个国家。

**另一种方式**

```
$signed_request = $facebook->getSignedRequest();
  $country = $signed_request["user"]["country"]; 
```

现在 $country 有一个字符串，例如“us”代表美国，“gb”代表英国等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:22:06.237

修改查询：

```
FB.api('/me?fields=location,hometown');
      //with user_location,user_hometown access tokens 
```

# c# - 无法对不可搜索的输入流使用 PKZIP 加密

> ID：10598056
> 
> 赞同：0
> 
> 时间：2012-05-15T09:41:11.343
> 
> 标签：c#, zip

我使用 DotNetZip。

我收到错误

> 无法对不可搜索的输入流使用 PKZIP 加密

该怎么办

```
var outputStream = new MemoryStream();
using (var zip = new ZipFile())
{
    zip.Password = "123456!";
    var outputStreamFile = new MemoryStream();
    var userId = m_userRepository.GetuserByLogin(this.User.Identity.Name).UserId;

    using (var streamWriter = new StreamWriter(outputStreamFile))
    {
        streamWriter.WriteLine(m_kamikaze2Repository.GetGameById(gameId, userId).Result);

    }
    zip.AddEntry("result_" + gameId, outputStreamFile);
    zip.Save(outputStream);//error

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:55:15.237

问题是`outpuStreamFile`当您将其添加到`ZipFile`. `StreamWriter.Dispose`将处理流，因此只需移动`using`语句以确保`outputStreamFile`在调用时可用`zip.Save`。

此外，在添加之前`outputStreamFile`，`ZipFile`您需要倒带它。

```
using (var outputStreamFile = new MemoryStream()) {
  var userId = m_userRepository.GetuserByLogin(this.User.Identity.Name).UserId;
  var streamWriter = new StreamWriter(outputStreamFile);
  streamWriter.WriteLine(m_kamikaze2Repository.GetGameById(gameId, userId).Result);
  outputStreamFile.Seek(0, SeekOrigin.Begin);
  zip.AddEntry("result_" + gameId, outputStreamFile);     
  zip.Save(outputStream);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:18:40.603

试试这样：

```
using (var outputStream = new MemoryStream())
using (var zip = new ZipFile())
{
    zip.Password = "123456!";

    zip.AddEntry("result_" + gameId, "Some content");
    zip.Save(outputStream);

    byte[] zipFile = outputStream.ToArray();
    // TODO: do something with the zip
} 
```

# extjs - 如何为煎茶触摸轮播指示器设置背景图像

> ID：10598060
> 
> 赞同：1
> 
> 时间：2012-05-15T09:41:33.200
> 
> 标签：extjs, sencha-touch, sencha-touch-2, carousel

我有应用程序，我需要在轮播控件上隐藏默认点指示符，而对于默认指示符，我必须用自定义图像替换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:44:15.237

要隐藏组件中的默认点`indicator`，请`Ext.carousel.Carousel`使用它，

```
indicator: false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T23:20:04.490

我想您可以检查指示器对象的 CSS。例如，转到[Kitchen Sink > User Interface > Carousel](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/carousel)并检查其中一个点：

```
.x-carousel-indicator span {
  display: block;
  width: .5em;
  height: .5em;
  -webkit-border-radius: .25em;
  border-radius: .25em;
  margin: .2em;
} 
```

然后，您只需要覆盖该 CSS 类

# performance - 实体框架性能：SaveChanges 未缓存其执行计划/语句

> ID：10598063
> 
> 赞同：1
> 
> 时间：2012-05-15T09:41:52.140
> 
> 标签：performance, entity-framework, savechanges

我正在尝试对我的应用程序进行性能调整。进行了一些分析后，似乎每次我调用`SaveChanges()`我的数据上下文（每次执行 api 时我都会创建一个新的数据上下文）它会重新生成命令。`ProduceCommands`我可以看到它在运行表达式生成器等方面花费了很长时间。

阅读了 MSDN 文章后，我认为命令只创建一次然后重用，我错了吗？我已经开始对我的选择使用编译查询，但更新正在扼杀我的表现。

任何人都可以就如何加快速度提供任何建议吗？或者这只是 EF 的一个不幸的缓慢部分？

非常感谢您的任何建议。

# python - 带有 zeromq PUSH/PULL 的 Eventlet 未按预期工作

> ID：10598065
> 
> 赞同：0
> 
> 时间：2012-05-15T09:41:52.687
> 
> 标签：python, zeromq, eventlet

我正在尝试使用 eventlet 和 zeromq PUSH/PULL 套接字创建一个侦听器/发送器对。

这是代码：

```
import eventlet
from eventlet.green import zmq
from eventlet import sleep as gsleep

#===============================================================================
# config
#===============================================================================
ctx = zmq.Context()
adr = 'tcp://127.0.0.1:5558'

#===============================================================================
# listener
#===============================================================================
def listen(addr):
    l = ctx.socket(zmq.PULL)
    l.connect(addr)
    print 'listening on %s' % addr
    while True:
        data = l.recv()
        print 'something received : %s' % data

eventlet.spawn_n(listen, adr)

#===============================================================================
# sender
#===============================================================================
s = ctx.socket(zmq.PUSH)
s.connect(adr)
while True:
    gsleep(1)
    print "sending something"
    s.send('blabla') 
```

我得到输出：

```
listening on tcp://127.0.0.1:5558
sending something
sending something
sending something
sending something
sending something
sending something
... 
```

而不是预期的：

```
listening on tcp://127.0.0.1:5558
sending something
something received : blabla
sending something
something received : blabla
sending something
something received : blabla
... 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:35:14.217

您应该使用 bind 而不是 connect 作为发送方套接字，因此：

```
s.connect(adr) 
```

应改为：

```
s.bind(adr) 
```

# encryption - 使用公钥 (opensaml) 的 SAML2 断言加密

> ID：10598066
> 
> 赞同：4
> 
> 时间：2012-05-15T09:41:55.507
> 
> 标签：encryption, public-key-encryption, assertion, saml-2.0, opensaml

我最近尝试使用中继方服务公钥加密 Saml2 断言。不幸的是，我什至无法完成测试阶段

这是我的代码

```
public class EncryptionTest {

public static void main(String args[]){
    try {

    // The Assertion to be encrypted
        FileInputStream fis;
        DataInputStream in, in2;

        File f = new File("src/main/resources/AssertionTest");
        byte[] buffer = new byte[(int) f.length()];
        in = new DataInputStream(new FileInputStream(f));
        in.readFully(buffer);
        in.close();

        //Assertion = DataInputStream.readUTF(in);
        String in_assert = new String(buffer);  

        System.out.println(in_assert);

    org.apache.axiom.om.OMElement OMElementAssertion = org.apache.axiom.om.util.AXIOMUtil.stringToOM(in_assert);
    Assertion assertion = convertOMElementToAssertion2(OMElementAssertion);

    // Assume this contains a recipient's RSA public key
    Credential keyEncryptionCredential;

    keyEncryptionCredential = getCredentialFromFilePath("src/main/resources/cert.pem");

    EncryptionParameters encParams = new EncryptionParameters();
    encParams.setAlgorithm(EncryptionConstants.ALGO_ID_BLOCKCIPHER_AES128);

    KeyEncryptionParameters kekParams = new KeyEncryptionParameters();
    kekParams.setEncryptionCredential(keyEncryptionCredential);
    kekParams.setAlgorithm(EncryptionConstants.ALGO_ID_KEYTRANSPORT_RSAOAEP);
    KeyInfoGeneratorFactory kigf =
        Configuration.getGlobalSecurityConfiguration()
        .getKeyInfoGeneratorManager().getDefaultManager()
        .getFactory(keyEncryptionCredential);
    kekParams.setKeyInfoGenerator(kigf.newInstance());

    Encrypter samlEncrypter = new Encrypter(encParams, kekParams);
    samlEncrypter.setKeyPlacement(KeyPlacement.PEER);

    EncryptedAssertion encryptedAssertion = samlEncrypter.encrypt(assertion);

     System.out.println(encryptedAssertion);

    } catch (EncryptionException e) {
        e.printStackTrace();
    } catch (CertificateException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (KeyException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (XMLStreamException e2) {
        // TODO Auto-generated catch block
        e2.printStackTrace();
    }

}

  public static Credential getCredentialFromFilePath(String certPath) throws IOException, CertificateException, KeyException {
      InputStream inStream = new FileInputStream(certPath);
      CertificateFactory cf = CertificateFactory.getInstance("X.509");
      Certificate cert =  cf.generateCertificate(inStream);
      inStream.close();

      //"Show yourself!"
      System.out.println(cert.toString());

      BasicX509Credential cred = new BasicX509Credential();
      cred.setEntityCertificate((java.security.cert.X509Certificate) cert);
      cred.setPrivateKey(null);

      //System.out.println(cred.toString());

       return cred;

      //return (Credential) org.opensaml.xml.security.SecurityHelper.getSimpleCredential( (X509Certificate) cert, privatekey);
  }

  public static Assertion convertOMElementToAssertion2(OMElement element) {

        Element assertionSAMLDOOM = (Element) new StAXOMBuilder(DOOMAbstractFactory.getOMFactory(), element.getXMLStreamReader()).getDocumentElement();
        try {
          UnmarshallerFactory unmarshallerFactory = Configuration.getUnmarshallerFactory();
          Unmarshaller unmarshaller = unmarshallerFactory.getUnmarshaller(Assertion.DEFAULT_ELEMENT_NAME);

         return (Assertion) unmarshaller.unmarshall(assertionSAMLDOOM);      
        } catch (Exception e1) {
            System.out.println("error: " + e1.toString());
        }
        return null;
      }

} 
```

我不断收到空指针异常

```
 KeyInfoGeneratorFactory kigf =
        Configuration.getGlobalSecurityConfiguration()
        .getKeyInfoGeneratorManager().getDefaultManager()
        .getFactory(keyEncryptionCredential);
    kekParams.setKeyInfoGenerator(kigf.newInstance()); 
```

如何设置 GlobalSecurityConfiguration 或者是否有不同的加密断言方法可行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T10:30:20.320

这个问题被搁置太久了。问题是 OpenSaml 的初始化。简单的

```
DefaultBootstrap.bootstrap(); 
```

帮助并解决了问题。

# spring - 如何配置基于 Spring 3.0 注释的 xml 文件？

> ID：10598068
> 
> 赞同：-1
> 
> 时间：2012-05-15T09:41:59.857
> 
> 标签：spring

我是 Spring 新手，正在搜索如何配置它的 XML 文件，以便所有 bean 都将由容器创建？以及如何告诉应用程序在服务器启动时加载此文件？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:05:41.787

示例可在[https://anonsvn.springframework.org/svn/spring-samples/mvc-basic/](https://anonsvn.springframework.org/svn/spring-samples/mvc-basic/)获得。查看 .../WEB-INF/spring/appServlet/servlet-context.xml 中的 web.xml 和 spring 配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:57:28.233

如果您正在开发 Spring MVC 应用程序，请遵循 @Japan Trivedi 给您的指示。如果你正在开发一个独立的 Spring 应用程序，这里有一个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context 
                           http://www.springframework.org/schema/context/spring-context.xsd">

    <context:component-scan base-package="package.containing.your.bean.classes" />
</beans> 
```

假设这个配置文件名为“spring-config.xml” 只需将此文件放在应用程序的类路径中，然后在代码中初始化 Spring 应用程序上下文，如下所示：

```
ApplicationContext context = new ClasspathXmlApplicationContext("spring-config.xml"); 
```

然后，从上下文对象中，您将能够检索已由 Spring 自动实例化的 bean。

请注意，此解决方案并未完全应用 IOC 概念，因为您实际上明确地何时以及检索什么 bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:49:22.413

您应该以下列方式在 web.xml 中为 Spring 指定 servlet。

```
 <servlet>
            <servlet-name>dispatcher</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>
        <servlet-mapping>
            <servlet-name>dispatcher</servlet-name>
            <url-pattern>/</url-pattern>
        </servlet-mapping> 
```

您还需要创建名为**dispatcher-servlet.xml**的 xml 文件，您可以在其中指定希望 Spring 框架为您创建的 bean。

希望对您有所帮助。

干杯。

# windows - SVN+SSH 和 Sourceforge

> ID：10598069
> 
> 赞同：16
> 
> 时间：2012-05-15T09:42:00.547
> 
> 标签：windows, svn, sourceforge

我是 Sourceforge 和 SVN（Windows 上的 SilkSVN）的新手。

我设法使用

```
svn co --username=zeroth123 svn://zeroth123@svn.code.sf.net/p/stddecimal/code/trunk stddecimal-code 
```

但是，每次我尝试使用 ssh（例如，我可以签入）时，它都会失败

```
> svn co --username=zeroth123 svn+ssh://zeroth123@svn.code.sf.net/p/stddecimal/code/trunk stddecimal-code
svn: E720087: Unable to connect to a repository at URL 'svn+ssh://zeroth123@svn.code.sf.net/p/stddecimal/code/trunk'
svn: E720087: Can't create tunnel: The parameter is incorrect. 
```

我已经开始`SVN_SSH`指出我完全有资格`plink.exe`，这没有任何区别。我也尝试将其更改为`junk.exe`并没有得到任何不同，所以我认为我们甚至没有在看`SVN_SSH`，这用尽了我在 Sourceforge 和其他论坛上找到的所有建议。

作为记录，我是项目管理员，因此拥有写权限（或者至少我认为我有！）

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-15T22:18:38.083

`%SVN_SSH% 需要*正确*设置，并且需要在 Sourceforge 注册 SSH 密钥。

请注意，新的 Sourceforge 项目默认为*2.0 版*，而 Sourceforge 文档的 99% 是针对 1.0 版的，并且显得过时了。

这些说明假设您已经安装并安装`SVN`了`PuTTY`工具，并且您可以使用非安全协议成功访问您的项目，例如只读`svn checkout svn://USER@svn.code.sf.net/p/PROJECT/code/trunk PROJECT-code`样式命令应该可以工作。

这些说明解释了如何对`svn checkout svn+ssh://...`Sourceforge 进行写访问所需的相同操作。

1.  设置`%SVN_SSH%`为 SSH 客户端的标准路径。例如`setx SVN_SSH "C:/Program Files (x86)/PuTTY/plink.exe"`

    *   `svn`期望路径中有**正斜杠或双反斜杠**
    *   您可能需要重新打开一个`cmd`窗口
    *   通过在提示符下键入进行测试`%SVN_SSH%`并确认您获得了 ssh 程序帮助屏幕（或您期望在不带参数的情况下执行的任何行为）
2.  （可选？）缓存服务器 RSA 密钥。打开`PuTTY`，登录到`svn.code.sf.net`（或您项目的任何服务器）。将出现一个提示，询问您是否要缓存服务器 RSA 密钥 - 单击是。

    *   你可能不需要这样做，如果不是当你第一次使用 SVN 连接你的项目时，你会被问到同样的问题。键入`y`。
    *   但是，我这样做是因为我认为交互式提示可能是问题的一部分。
3.  创建公钥/私钥并将公钥注册到 Sourceforge。

    *   例如，在创建密钥时，请参阅[此处](http://the.earth.li/~sgtatham/putty/0.58/htmldoc/Chapter8.html)的更多信息。
    *   如果您使用`PuTTY`，请使用`PuTTYgen`来创建密钥，并确保将私钥加载到`pageant`. 具有讽刺意味的是， [Launchpad](https://help.launchpad.net/YourAccount/CreatingAnSSHKeyPair)有很好的说明。
    *   `Home > Account > Services`通过导航到并单击，可以在 Sourceforge 上注册公钥`Edit SSH Keys for Shell/CVS`。
4.  现在使用`svn+ssh`协议的结帐应该可以工作了！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-03T20:07:24.440

我按照[此处](http://ohadsc.wordpress.com/2012/09/30/working-with-the-new-sourceforge-svnssh-protocol-in-windows/)的说明进行操作，并且有效。它是一种更快的方法，不需要上传密钥等。

1.  `plink.exe`从[http://the.earth.li/~sgtatham/putty/latest/x86/plink.exe](http://the.earth.li/~sgtatham/putty/latest/x86/plink.exe)下载
2.  将`plink.exe`放在您的 Windows 安装目录 ( `%windir%`)
3.  使用记事本打开以下文件`%APPDATA%\Subversion\config`
4.  在该部分中添加或替换以下行`[tunnels]`（将 login 和 pwd 替换为您的 sourceforge 登录名和密码）

    ```
    ssh = c:\\windows\\plink.exe -batch -l <LOGIN> -pw <PWD> 
    ```

    （注意双反斜杠）

5.  保存并关闭文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T05:25:28.483

对我来说，问题是 Tortoise 最初安装在 D 盘上。我卸载它并在 C 上重新安装它，而没有更改相关设置。解决方案是将 TortoiseSVN 文件夹从 C 盘复制到 D 盘的原始位置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-10T11:51:46.107

对于使用 Tortoise SVN 的任何人（如我）使用 Tortoise SVN 但需要命令行访问以更轻松地进行批量分析......并且不想经历注册 SSH 密钥的麻烦。

1.  复制您在 Tortoise - 设置 - 网络 - SSH 客户端中使用的值（我的有用户名、密码参数）
2.  根据上面的答案编辑 %APPDATA%\Subversion\config 中的命令行配置 ssh 行，以使用您从 Tortoise 复制的行

这样，您可以使用带有用户名和密码参数的 Tortoise Plink.exe。

# javascript - IE8中关闭窗口的Java脚本

> ID：10598070
> 
> 赞同：2
> 
> 时间：2012-05-15T09:42:01.127
> 
> 标签：javascript, internet-explorer, browser

当浏览器关闭时，我已经实现了一些功能。

```
window.onbeforeunload = function (evt) {

    evt = (evt)? evt:event;
    clickY = evt.clientY;
    altKey = evt.altKey; 
    keyCode = evt.keyCode; 

if (altKey == true && keyCode == 0){ 
            //Make call to the server to clear the cache                   
    }else if(clickY < 0){
     //Make a call to the server to clear the cache
    }else {
        return;
    }             
}; 
```

现在，上面代码中的问题是，当我通过单击地址栏按 Enter 或使用刷新按钮刷新页面时，我的代码给了我警报（“21112”），这是我不想要的，因为调用只会触发如果浏览器关闭。所以有人可以帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T14:25:00.207

[**`window.onbeforeunload`**](https://developer.mozilla.org/en/DOM/window.onbeforeunload)事件是在您的页面被[`unload`](https://developer.mozilla.org/en/DOM/window.onunload)编辑之前调用。没有方法可以检查它是刷新还是浏览器窗口关闭事件。

它由不同的场景触发^([MSDN](http://msdn.microsoft.com/en-us/library/ms536907%28VS.85%29.aspx))：

*   关闭当前窗口。
*   通过输入新地址或选择收藏夹导航到另一个位置。
*   单击引用另一个文档的锚点。
*   调用`anchor.click`方法。
*   调用`document.write`方法。
*   调用`document.close`方法。
*   调用`window.close`方法。
*   调用`window.navigate`或 NavigateAndFind 方法。
*   调用`location.replace`方法。
*   调用`location.reload`方法。
*   `location.href`为属性指定一个新值。
*   通过 INPUT 控件向 ACTION 属性中指定的地址提交表单`type=submit`，或调用该`form.submit`方法。
*   调用该`window.open`方法，为`_self`窗口名称提供可能的值。
*   调用`document.open`方法。
*   单击“后退”、“前进”、“刷新”或“主页”按钮。

而你不能处理这个。

另请注意，`window.onbeforeunload`应该通知用户他离开页面的事件和处理函数应该`return`是字符串值，该值将包含在确认弹出窗口中（`Firefox 4+`见[bug](https://bugzilla.mozilla.org/show_bug.cgi?id=588292)除外）。

您不能强制用户停留在页面上。

注意：**您唯一可以做的`onbeforeunload`就是通知用户他正在离开您的页面** （这是因为一些*恶意*页面可以打开另一个页面等等......以及垃圾邮件用户。这是安全限制）。

如果要在卸载窗口之前进行 AJAX 调用，则需要使用`onunload`event. 请注意，您的 AJAX 调用必须是**同步**的。异步调用将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T16:46:00.867

我在同样的问题上工作了一段时间，所以我会向你解释我发现了什么。

1）`window.onbeforeunload`每个浏览器处理事件的方式略有不同 - 我已经看到，无论用户是否选择留在页面上，一旦事件触发，会话就会丢失。

2）Web应用程序根本没有能力阻止用户关闭浏览器或导航离开页面（出于明显的原因），但通过实现服务器端挂钩，我能够调用必要的清理代码只有在浏览器已关闭，所以我没有费心提示用户（这有点像劫持他们的浏览器）

如果您需要在关闭窗口之前提示用户，那么您也将在他们输入新 url 时提示他们。他们是一样的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:24:28.573

[这个](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/235886/warning-message-on-browser-close)线程中的人说他基于`onbeforeunload`事件的方法在 IE 中有效。

恕我直言，然而，你最好的（和跨平台的）机会做你想做的事是设置一个[Ajax 轮询请求](http://www.mccran.co.uk/index.cfm/2010/9/26/JQuery-AJAX-Http-polling-example)（[这里是一个很好的演示](http://www.mccran.co.uk/examples/jquery-polling/index.cfm)）来检查自上次用户活动以来已经过去了多少时间并相应地清除缓存。

# r - Emacs 中的 r-autoyas

> ID：10598076
> 
> 赞同：4
> 
> 时间：2012-05-15T09:42:12.563
> 
> 标签：r, ess, yasnippet

我正在尝试让 r-autoyas 在 Emacs 23.3.1 上工作

我已经安装了 yasnippet，它自己运行良好。例如：在 C++ 模式中，“for”之后的 TAB 会自动扩展。然后我继续让 r-autoyas 工作。我已按照 github 存储库中给出的说明进行操作，但无法让 TAB 扩展甚至是 R 缓冲区中的内置函数。

如果我输入 rnorm( 然后按 TAB 键，会打开一个小缓冲区，向我显示函数的各种参数。这是默认行为吗？还是应该将输入参数填充为默认值并让我一一更改？

我在网上搜索，看看有没有其他人遇到过这个问题。在一个论坛中，有人提到这可能是因为 Emacs 中的自动完成功能。

我的 init.el 文件中有以下几行，这些行在说明中给出：

（需要'r-autoyas）

(add-hook 'ess-mode-hook 'r-autoyas-ess-activate)

(add-hook 'ess-mode 'yas/minor-mode-on)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:23:36.350

您需要为 ESS/R 添加自己的 yasnippet，以使任何 yasnippet 扩展正常工作。默认情况下没有。

您在键入时看到的行为`rnorm(<TAB>`与 yasnippet 无关，这是 ESS 为使您的 R 编码生活更轻松而提供的行为。

所以 - 您必须为 R 创建自己的片段。您需要在`text-mode/ess-mode`yasnippets 所在的目录下执行此操作（您必须创建`ess-mode`目录）。

[这是我的一些 R 片段](https://github.com/lianos/my-emacs/tree/master/my/yasnippets/ess-mode)。我想我会更多地使用它们，但我只真正使用过`setGeneric`和`setMethod`片段......而且这些也不是所有的防弹。

# php - 如何使用 Yii 在函数中返回模型

> ID：10598079
> 
> 赞同：0
> 
> 时间：2012-05-15T09:42:27.893
> 
> 标签：php, model, yii

我想检查是否创建了具有指定 ID 的用户，如果没有，我将创建一个新用户并返回它。如果用户已经存在，我将返回它。当我这样做时，服务器无法加载。我有 2 个功能：

```
public function actionCreateNewUser() {
    $aID = "4324";
    $rs = $this->canCreateNewUser($aID);
}
public function canCreateNewUser($aID) {
    $rsUser = User::model()->find('AID=:aID', array('aID' => $aID));
    return $rsUser[0];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:49:45.773

`canCreateNewUser`实现是错误的，因为`find`返回`User`模型或`null`. 它应该这样写：

```
public function canCreateNewUser($aID) {
    return User::model()->find('AID=:aID', array('aID' => $aID)) === null;
} 
```

您还可以使用返回现有实例或当场创建新实例`User`的方法进行扩展：`findOrCreate`

```
public function findOrCreate($aID) {
    $existing = User::model()->find('AID=:aID', array('aID' => $aID));
    if (!$existing) {
        User::model()->insert(array('aID' => $aID));
    }

    return $existing ?: User::model()->find('AID=:aID', array('aID' => $aID));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:52:20.260

您可以这样做以避免为非对象返回无效索引

```
$result = User::model()->find('AID=:aID', array('aID' => $aID));

return ($result)?$result[0]:NULL; 
```

# wordpress - 如何用另一个导航菜单替换 wordpress 导航菜单？

> ID：10598085
> 
> 赞同：0
> 
> 时间：2012-05-15T09:42:58.880
> 
> 标签：wordpress, plugins, menu, filter, navigation

我正在开发一个导航菜单插件，我想用我的菜单自动替换默认菜单有一个过滤器，功能，wordpress中的东西我搞砸了？
谢谢先进，对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:36:29.867

在 wordpress 中，您可以通过此功能设置导航菜单`wp_nav_menu( $args );`

有关详细列表，请点击链接 -[链接](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

您需要为`menu`参数设置值。

让我知道这是您要问的还是其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:52:02.230

尝试 wordpress Mega Menu 插件[查看演示](http://wordpress.org/extend/plugins/jquery-mega-menu/)

# algorithm - 作业：递归函数的大哦

> ID：10598086
> 
> 赞同：2
> 
> 时间：2012-05-15T09:42:58.890
> 
> 标签：algorithm, recursion

这是我作业中的一个问题。我不太确定如何解决这样的问题。

`If T(n) = nT(n - 1) and T(1) = 3, then
a) T(n) = O(n^n)
b) T(n) = Ω(n!)
c) T(n) = O(2^(nlogn))
d) none of the above`

**我不需要这个问题的确切答案**（因为它的作业），但我想知道告诉递归函数边界的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:48:45.780

试着解决它。假设`n = 3`。会有多少次迭代？如果`n = 4`呢？当您增加时，迭代次数的增长速度有多快`n`？

另一种看待它的方式是：在公式中，函数如何“分支”？线性函数没有分支，它们只有简单的 1:1 递归。指数函数将分支多次。对数函数分支，但降低了它们操作的数据的复杂性......等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:03:16.993

```
 For n = 4:

   T(4) = 4 * T(4-1)
     T(3) = 3 * T(3-1)
       T(2) = 2 * T(2-1)
         T(1) = 3 
```

每次调用（乘法和递归调用）的执行时间为 2 步。对于给定的示例，对于 4 次调用，您将有 8 个线性执行的步骤（您没有任何组合或对数算法，因此您的函数以 O(n) 为界。

对于可能的选择，您的答案是：

```
a) T(4) = O(4^4) -> 256 

b) T(4) = Ω(4!) -> 24

c) T(4) = O(2^(4log4)) ~> 5.27

d) none of the above 
```

所以你的选择应该是d。希望它有所帮助。

# windows - Windows 窗体中的 webBrowser：如何从资源中加载 html 页面？

> ID：10598087
> 
> 赞同：0
> 
> 时间：2012-05-15T09:43:01.930
> 
> 标签：windows, forms, resources, browser

我有具有 webBrowser 组件的程序。我需要该组件导航到资源中的页面（“1.htm”）。有什么办法吗？我的一般愿望是调试后我只有一个 .exe 程序文件，所有的 htm 页面都会在其中构建（如图片和图标），或者这不是可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:24:07.150

您可以为此使用[DocumentText](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documenttext)属性

```
webBrowser1.DocumentText = WindowsFormsApplication1.Properties.Resources.1htm; 
```

或者

```
using (Stream stream = Assembly.GetExecutingAssembly() 
                           .GetManifestResourceStream("1.htm"))
{
   using (StreamReader reader = new StreamReader(stream)) 
   { 
       webBrowser1.DocumentText = reader.ReadToEnd(); 
   } 
} 
```

# python - 分箱数据和包含结果

> ID：10598088
> 
> 赞同：0
> 
> 时间：2012-05-15T09:43:05.603
> 
> 标签：python, combinatorics, itertools

假设我已经在这样的结构中分箱了一些数据：

```
data = {(1,1): [...] # list of float,
        (1,2): [...],
        (1,3): [...],
        (2,1): [...],
        ... } 
```

这里我只有两个轴用于分箱，但假设我有 N 个。现在假设例如我有 N=3 轴，我想要第二个 bin 为 1 的数据，所以我想要一个函数

```
(None, 1, None) -> [(1, 1, 1), (1, 1, 2), (1, 1, 3), ...
                    (2, 1, 1), (2, 1, 2), (2, 1, 3), ...] 
```

所以我可以使用`itertools.chain`结果

您知道每个轴的范围：

```
axes_ranges = [(1, 10), (1, 8), (1, 3)] 
```

其他例子：

```
(None, 1, 2) -> [(1, 1, 2), (2, 1, 2), (3, 1, 2), ...]
(None, None, None) -> all the combinations
(1,2,3) -> [(1,2,3)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:01:37.640

看起来很像你重新发明轮子。您可能想要使用的是 numpy.ndarray：

```
 import numpy as np
    >>> x = np.arange(0,27)
    >>> x
    array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
    17, 18, 19, 20, 21, 22, 23, 24, 25, 26])
    >>> x.reshape(3,3,3)
    array([[[ 0,  1,  2],
    [ 3,  4,  5],
    [ 6,  7,  8]],

    [[ 9, 10, 11],
     [12, 13, 14],
     [15, 16, 17]],

    [[18, 19, 20],
     [21, 22, 23],
     [24, 25, 26]]])

    >>> x[0]
    array([[0, 1, 2],
    [3, 4, 5],
    [6, 7, 8]])
    >>> x[:,1,:]
    array([[ 3,  4,  5],
    [12, 13, 14],
    [21, 22, 23]])
    >>> x[:,1,1]
    array([ 4, 13, 22]) 
```

这可以有 N 个维度。在示例中，索引是三维的，您可以将其视为具有 x[a,b,c] = x[layer,row,column] 的立方体。使用“：”作为索引仅表示“全部”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:58:34.847

嗯，怎么样：

```
import itertools

def combinations_with_fixpoint(iterables, *args):
    return itertools.product(*([x] if x else y for x, y in zip(args, iterables)))

axes_ranges = [(1, 7), (1, 8), (77, 79)]

combs = combinations_with_fixpoint(
    itertools.starmap(range, axes_ranges),
    None, 5, None
)

for p in combs:
    print p

# (1, 5, 77)
# (1, 5, 78)
# (2, 5, 77)
# (2, 5, 78)
# (3, 5, 77)
# (3, 5, 78)
# (4, 5, 77)
# (4, 5, 78)
# (5, 5, 77)
# (5, 5, 78)
# (6, 5, 77)
# (6, 5, 78) 
```

也许只是传递一个列表以允许多个“固定点”：

```
def combinations_with_fixpoint(iterables, *args):
    return itertools.product(*(x or y for x, y in zip(args, iterables)))

combs = combinations_with_fixpoint(
    itertools.starmap(range, axes_ranges),
    None, [5, 6], None
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:01:03.730

```
binning = [[0, 0.1, 0.2], [0, 10, 20], [-1, -2, -3]]
range_binning = [(1, len(x) + 1) for x in binning]

def expand_bin(thebin):
    def expand_bin_index(thebin, freeindex, rangebin):
        """
        thebin = [1, None, 3]
        freeindex = 1
        rangebin = [4,5]
        -> [[1, 4, 3], [1, 5, 3]]
        """
        result = []
        for r in rangebin:
            newbin = thebin[:]
            newbin[freeindex] = r
            result.append(newbin)
        return result

    tmp = [thebin]
    indexes_free = [i for i,aa in enumerate(thebin) if aa is None]
    for index_free in indexes_free:
        range_index = range(*(range_binning[index_free]))
        new_tmp = []
        for t in tmp:
            for expanded in expand_bin_index(t, index_free, range_index):
                new_tmp.append(expanded)
        tmp = new_tmp
    return tmp

inputs = ([None, 1, 2], [None, None, 3], [None, 1, None], [3, 2, 1], [None, None, None])
for i in inputs:
    print "%s-> %s" % (i, expand_bin(i)) 
```

# jquery - jquery淡出事件监听器

> ID：10598089
> 
> 赞同：1
> 
> 时间：2012-05-15T09:43:05.677
> 
> 标签：jquery, events, fadeout

我有一个现有的自编码手风琴，我现在需要将事件侦听器附加到现有的淡出事件。我可以将新的淡出监听器绑定到现有的监听器吗？这是如何完成的？[这是手风琴 ia jsFiddle](http://jsfiddle.net/designmode/AdPWv/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T10:00:31.573

正如其他人所说，没有`fadeout`事件-您可以创建自己的事件-您可以将其添加到回调中`fadeout`：

```
$(currentSlide).fadeOut("normal", function () {
    // your other code
    $(this).trigger('myFadeOutEvent');
}); 
```

那么你需要监听事件

```
 $('.class').on('myFadeOutEvent',function() {
    // do something
 }); 
```

[`.trigger()`](http://api.jquery.com/trigger/)有关详细信息[，请参阅文档](http://api.jquery.com/trigger/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:56:48.403

FadeOut 没有均匀的监听器。但是，它有一个回调，一个在淡出完成后触发的函数。这样做的缺点是您必须指定每次使用淡出时应该发生什么。

这早先给我带来了数英里的代码。

```
$('.element').fadeOut(400,function () {
    //Whatever you want to do after the fade
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:57:11.247

您可以将函数绑定到您想要收听的元素添加您的淡出调用您想要应用为回调函数的操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T09:59:16.957

参考文档 [http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

它说大约2种语法`.fadeOut( [duration] [, callback] )`和 `.fadeOut( [duration] [, easing] [, callback] )`

您可以应用任何回调函数

# wcf - Silverlight - DataContext、DataGrid、WCF 以及通过绑定以编程方式添加元素

> ID：10598090
> 
> 赞同：1
> 
> 时间：2012-05-15T09:43:05.320
> 
> 标签：wcf, silverlight, data-binding, silverlight-5.0

我对 Silverlight 很陌生。

我有一个带有数据网格和其他表单元素的用户控件。我正在尝试以编程方式实现绑定，从 WCF 服务加载数据。

这就是我所拥有的，我不确定如何使其真正起作用：

```
public class DepartmentObject
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public IEnumerable<Person> People { get; set; }
}    

public partial class DepartmentView : UserControl
{
    ObservableCollection<Person> LocalPeople { get; set; }
    Service1Client client = new Proj.ServiceReference1.Service1Client();

    public TemplateView(Guid departmentId)
    {
        InitializeComponent();

        client.GetDeptCompleted += (sender, e) =>
        {
            this.DataContext = e.Result; //DepartmentObject w/People member IEnumerable<Person>

            this.peopleList.SetBinding(DataGrid.ItemsSourceProperty, new Binding("People"));

            LocalPeople = new ObservableCollection<Person>(e.Result.People);
        };

        client.GetDeptAsync(departmentId);
    }

    private void Add_Person_Click(object sender, RoutedEventArgs e)
    {
        LocalPeople.Add(new Person() { Name = String.Format("Person [{0}]", LocalPeople.Count) });
    }
} 
```

现在，我明白为什么它不起作用了——可观察的集合和数据上下文之间没有“连接”，但是这样做的正确方法是什么？

`peopleList`是一个 DataGrid，当一个人被选中时，它将具有辅助绑定。

我希望最终能够点击“保存”并获得所有更改的`DepartmentObject`.

我浏览*了很多*示例，所有 SL 2-3-4 示例都不同且令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:59:42.447

我不确定 e.Result 是否会持续存在。以下应该可以工作：

```
client.GetDeptCompleted += (sender, e) =>
{
   LocalPeople = new ObservableCollection<Person>(e.Result.People);
   this.peopleList.DataContext = LocalPeople; //DepartmentObject w/People member IEnumerable<Person>
   this.peopleList.SetBinding(DataGrid.ItemsSourceProperty, new Binding("."));
}; 
```

在分配 LocalPeople 后设置断点以确保集合不为空。

# android - 如何从 Web 表单中拦截 http POST 数据

> ID：10598097
> 
> 赞同：5
> 
> 时间：2012-05-15T09:43:36.607
> 
> 标签：android, http, browser, intercept

我有一个网页（显示在浏览器中，而**不是 WebView**），我想将一些数据（例如使用 http POST）传递给常规的 android 应用程序。

我只需要启动应用程序并提供数据。我知道可以通过注册意图过滤器来启动该应用程序，但我在数据传递部分迷失了方向。

URL 不需要是真实的，假 URL 就可以了。

这可以在 BlackBerry 中使用 HTTP 过滤器完成。有没有办法在 Android 中做同样的事情？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:54:07.243

在您的网页中放置如下链接：

```
<a href="my.special.scheme://xyz.com/data1/data2"> 
```

在您的活动中`onCreate()`，您可以通过意图对象访问数据。

```
Uri data = getIntent().getData();
String scheme = data.getScheme(); // "http"
String host = data.getHost(); // "xyz.com"
List<String> params = data.getPathSegments(); 
String first = params.get(0); // "data1"
String second = params.get(1); // "data2" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:47:35.043

The approach I would investigate into is to implement a very simple HTTP server service as part of your application. Coding a small web server for your exact purpose would be extremely simple: Listen on TCP port 80, accept incoming connection, then keep reading from socket until `\r\n\r\n` is seen to skip the header, and then read the POST data. Your web page would presumably access it via 'localhost'. Whether there are any major hurdles with this method I don't know, but on doing a quick search I've seen there are already small Android web servers available, so technically it seems possible.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T09:01:04.137

这是我的两分钱：

虽然实际上不是拦截，但这种方法使用传统的 Intent Filter 机制完成了这项工作。

例子：

1.  浏览器打开指向 myownscheme://myfakeurl.fake/http%3A%2F%2Factualurl.com 的链接
2.  Android 应用程序匹配意图过滤器并启动。它解析 URL 中的参数并对其进行解码，从而获得“http://actualurl.com”
3.  android 应用程序与传递的 url 建立连接并获取数据。

    ```
     String encodedURL = getIntent().getData().getPathSegments().get(0); //Returns http%3A%2F%2Factualurl.com
        String targetURL = Html.fromHtml(encodedURL); //Returns http://actualurl.com
        //Now do the GET and fetch the data. 
    ```

# ios - iOS 按需更改屏幕方向

> ID：10598100
> 
> 赞同：0
> 
> 时间：2012-05-15T09:43:46.180
> 
> 标签：ios, orientation, landscape, portrait

`UITableView`我在主屏幕上有一个应用程序。我使这个视图始终处于横向。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
     return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

如果用户选择一行，他将被带到一个`UIPageViewController`视图。第二个视图可以旋转为横向和纵向。问题是当我处于纵向模式`UIPageViewController`并按下返回按钮时，现在应该始终处于横向模式的第一个视图是纵向的。在我旋转它之后，它进入风景并停留在那里。

我想知道是否有办法让我的主屏幕在我回到它时自动进入横向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:46:17.610

尝试以下

1.  在横向模式下的界面构建器中的应用程序中创建主屏幕的视图。
2.  在界面类中创建 uiview outlet 并将其连接到上面的视图。
    `IBOutlet UIVIew *myView;`
3.  然后在`viewDidLoad`方法中设置这个 `self.view = self.myView;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-24T12:43:54.017

如果您想以特定方向制作屏幕，则可以创建一个 CustomNavigation 控制器，然后将其呈现在您的应用程序中。您只需在此返回supportedInterfaceOrientations。如果您想了解更多详细信息和示例代码，[请单击此处](http://iosbucket.blogspot.in/2015/05/presenting-landscape-view-in-portrait.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:13:02.237

正如[视图控制器编程指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW1)中所说，您可以拥有一个备用横向界面，并且在从任何其他视图进入主屏幕之前，您可以检查方向并将相应的界面推送到屏幕上

阅读此[SO 问题](https://stackoverflow.com/questions/3402401/get-launch-orientation-of-ipad-app)和答案，以更好地了解在横向启动应用程序。还请阅读我指出的上述苹果编程指南。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:41:22.793

如果您使用`UINavigationViewController`方法（`pushViewController:animated:`和`popViewControllerAnimated:`），视图将继承前一个视图的方向。

另一方面，如果你使用`presentModalViewController:animated:`and`dismissModalViewControllerAnimated:`方法，一切都会完美运行。希望这有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T09:48:48.840

`shouldAutorotateToInterfaceOrientation`回去的时候手动打电话。你不能强迫“真正的”方向改变，这是操作系统的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-29T08:59:37.620

使用它，将 UIInterfaceOrientationLandscapeLeft 更改为所需的方向类型，如 UIDeviceOrientationPortrait、UIDeviceOrientationLandscapeLeft 等。

```
NSNumber *value = [NSNumber numberWithInt:UIInterfaceOrientationLandscapeLeft];
[[UIDevice currentDevice] setValue:value forKey:@"orientation"]; 
```

# generics - 如何创建 sortby 表达式 > 当你在编译时不知道 sortby 类型时

> ID：10598101
> 
> 赞同：1
> 
> 时间：2012-05-15T09:43:46.993
> 
> 标签：generics, c#-4.0, sorting, expression-trees

我在我的 asp.net 4.0 Web 应用程序中使用 JqGrid，我想实现列排序。我的问题是我的 repo 类中的 Get 方法需要一个 Expression> 类型的 sort by 参数：

```
public IEnumerable<TEntity> Get<TOrderBy>(Expression<Func<TEntity, bool>> predicate, Expression<Func<TEntity, TOrderBy>> orderBy, int pageIndex, int pageSize, out int totalNumberOfRecords, SortOrder sortOrder = SortOrder.Ascending)
        {
            IEnumerable<TEntity> list = null;
            int numberOfRecordsToSkip = CalculateNumberOfRecordsToSkip(pageIndex, pageSize);
            if (sortOrder == SortOrder.Ascending)
            {
                list = GetQuery().Where(predicate).OrderBy(orderBy).Skip(numberOfRecordsToSkip).Take(pageSize).AsEnumerable().ToList();            
            }
            else
            {
                list = GetQuery().Where(predicate).OrderByDescending(orderBy).Skip(numberOfRecordsToSkip).Take(pageSize).AsEnumerable().ToList();
           }

            totalNumberOfRecords = GetQuery().Count(predicate);
            return list;
        } 
```

当我只知道编译时实体的类型时，如何按表达式创建排序？我希望能够按任何列（或实体属性，如果您愿意）对网格进行排序。

应该创建按表达式排序的方法采用一个参数，即列名：

```
public Expression<Func<TEntity, TOrderBy>> CreateOrderByExpression(string sortColumn)
{

 // I don't know the TOrderBy type before this method is called. I know the TEntity type  // so getting the type of the sortColumn is easy. 
// But how do I create the Expression<Func<TEntity, TOrderBy>> from here ?

} 
```

因此，方法 CreateOrderByExpression 的结果应该用作我的 repo 类中 Get 方法的参数。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:16:50.423

您可以使用 DynamicLinq 库（实际上是 1 个 .cs 文件）：

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

我没有检查这个，但我相信它值得一看：[https ://nuget.org/packages/DynamicLINQ](https://nuget.org/packages/DynamicLINQ)

编辑：Nugget 包的示例：[http](http://weblogs.asp.net/davidfowler/archive/2010/08/19/dynamic-linq-part-2-evolution.aspx) ://weblogs.asp.net/davidfowler/archive/2010/08/19/dynamic-linq-part-2-evolution.aspx （看起来真的很好很容易！）

# java - 诺基亚浏览器看到很大的滚动部分

> ID：10598107
> 
> 赞同：1
> 
> 时间：2012-05-15T09:44:01.223
> 
> 标签：java, css, jsp, jquery-mobile, mobile-website

我有一个强制门户网站，它在三星手机上看起来不错，而在诺基亚它会显示浏览器的大空白部分，而不是需要内容。

有什么办法可以去掉那个大的空白部分吗？

我创建了一个测试页面并将我的内容页面包含在其中，它工作完美但是当我使用以下代码包含其他页面时，我的应用程序使用相同的它会产生同样的问题

代码

```
 <FRAMESET COLS="0,*" frameborder="no">
      <FRAME SRC="" NAME="livebar" SCROLLING="auto" border="0">
      <FRAME SRC="path of jsp to include" NAME="mail_main" SCROLLING="auto" border="0" />

    </FRAMESET> 
```

# zend-framework - 调用多个页面时zend表单不起作用

> ID：10598108
> 
> 赞同：1
> 
> 时间：2012-05-15T09:44:01.517
> 
> 标签：zend-framework

我有一个控制器动作

```
public function pagedetailAction(){

    $id  = $this->_getParam('id',0);
    $detail = new Application_Model_Page();
    $this->view->detail = $detail->findArr($id);
    //CALLING FORM WITH OTHER CONTENTS
    $form = new Application_Form_Request();
    $this->view->form = $form;

} 
```

要处理表格，我有这个功能

```
public function submitrequestAction(){

    if ($this->getRequest()->isPost()) {
        $formData = $this->getRequest()->getPost();
        if ($form->isValid($formData)) {

            $newsadd = new Application_Model_Request($formData);
            $newsadd->set_ID(null);
            $newsadd->save();

            $this->_helper->flashMessenger->addMessage(array('success'=>'Message Sent'));
            $this->_redirect('/index/frontmsg');
        } else {
            $form->populate($formData);
        }

    }

} 
```

当我单击提交时，我收到错误

```
Notice: Undefined variable: form in E:\xampp\htdocs\sandbox1\application\controllers\IndexController.php on line 84

Fatal error: Call to a member function isValid() on a non-object in E:\xampp\htdocs\sandbox1\application\controllers\IndexController.php on line 84 
```

请帮助我，以便我可以通过此表单将值发布到数据库。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:50:57.770

用这个

```
 public function submitrequestAction(){

    if ($this->getRequest()->isPost()) {
        $form = new Application_Form_Request();//added this
        $formData = $this->getRequest()->getPost();
        if ($form->isValid($formData)) {

            $newsadd = new Application_Model_Request($formData);
            $newsadd->set_ID(null);
            $newsadd->save();

            $this->_helper->flashMessenger->addMessage(array('success'=>'Message Sent'));
            $this->_redirect('/index/frontmsg');
        } else {
            $form->populate($formData);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:52:21.840

将 $form 初始化添加到您的 submitrequestAction：

```
$form = new Application_Form_Request(); 
```

# android - 对齐自定义视图的问题

> ID：10598110
> 
> 赞同：0
> 
> 时间：2012-05-15T09:44:11.497
> 
> 标签：android, android-layout, android-widget, android-view

我只是想从头开始实现 customView，即通过扩展视图类并覆盖 onDraw() 方法。只是试图建立一个简单的视图，一个现在只画一个圆圈的视图。我在对齐它时遇到了一些问题，我无法理解 android 是如何计算视图尺寸的。只有视图即 setContentView(new MyCustomView(this)) 工作正常......它占用了整个空间并绘制了圆圈。但是，如果我施加任何限制，即给予边距，或在 centerparent 中对齐它会使我的视图完全丢失并且它不会绘制任何东西。问题是视图被其父级剪裁但无法理解为什么它被剪裁。对此的任何帮助将不胜感激。这是我的代码。

这是我的自定义视图

```
 public class MyCustomView extends View {

    private Paint myPaint=null;
    private boolean useCenters;
    private float xCoordinate;
    private float yCoordinate;
    private float viewWidth;
    private float viewHeight;
    private int totalTime;
    private static float SWEEP_INC ;
    private RectF myRect;
    private boolean shouldInvalidate;
    private float mSweep;

    public MyCustomView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initPaintComponents();
    }

    public MyCustomView(Context context, AttributeSet attrs) {
        this(context, attrs,0);
    }

    public MyCustomView(Context context) {
        this(context,null);
    }

    private void initPaintComponents() {

        myPaint = new Paint();
        myPaint.setStyle(Paint.Style.STROKE);
        myPaint.setStrokeWidth(4);
        myPaint.setColor(0x880000FF);
        useCenters = false;
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        calculateCoordinates();
    }

    private void calculateCoordinates() {

        xCoordinate = getX();
        yCoordinate = getY();
        viewWidth = getWidth();
        viewHeight = getHeight();
        myRect = new RectF(xCoordinate+3, yCoordinate+3, xCoordinate+viewWidth-(viewWidth/10), yCoordinate+viewHeight-(viewHeight/10));
        Log.i("SAMPLEARC","xcoordinate: "+xCoordinate+" ycoordinate: "+yCoordinate+" view width:"+viewWidth+" view height:"+viewHeight+" measured width: "+getMeasuredWidth()+"measured height:"+getMeasuredHeight());
    }

    public int getTotalTime() {
        return totalTime;
    }

    public void setTotalTime(int totalTime) {
        this.totalTime = totalTime;
        SWEEP_INC = (float)6/totalTime;

    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawArc(myRect, 0, mSweep, useCenters, myPaint);

         mSweep += SWEEP_INC;
         if(mSweep > 280)
         {
             myPaint.setColor(0x888800FF);
         }

        invalidate();
    }
} 
```

我的活动：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        MyCustomView myView = (MyCustomView) findViewById(R.id.customimg);
        myView.setTotalTime(10);
    } 
```

主要的.xml

```
 RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/white"
   com.example.anim.MyCustomView android:id="@+id/customimg"
  android:layout_width="100dp"
  android:layout_height="100dp"
  android:layout_centerInParent="true" 
```

如果我在 xml 中删除该 centerInParent 它会被绘制。所以在 onMeasure() 中调用 setMeasureDimentions() 也没有任何影响。但是 xcoodinate、ycoordinate、viewWidth 和 viewHeight 似乎给出了正确的值。只需要了解视图被裁剪的原因以及 android 在运行时如何计算尺寸。以及在绘制这些自定义视图时如何考虑边距参数。任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:04:41.770

```
<resources>
   <declare-styleable name="CustomAttrs">
    <attr name="xattr" format="string" />
</declare-styleable>
</resources> 
```

在值/attrs.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:52:05.907

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:lib="http://schemas.android.com/apk/res-auto"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

  <com.ind.Custom_Attribute.LibView  
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"    
  android:text=""
  lib:xattr="Custom attribute APPLIED!"
  />

</LinearLayout> 
```

# php - Zend Form 在非英文字符上显示奇怪的字符

> ID：10598116
> 
> 赞同：1
> 
> 时间：2012-05-15T09:44:29.440
> 
> 标签：php, character-encoding, zend-form

我在网站上到处使用 UTF-8，数据也以 UTF-8 返回，它在页面上的任何地方都可以使用，除了一种情况：（zend）表单值。

我检查了所有内容，字符串是 utf-8，页面编码是 utf-8，Api 的结果是 utf8。

> ```
> (Margar\u00e9t\u00e1\u00f3\u0171\u00fa\u0151\u00fc\u00f6) 
> ```

这就是我在 div 以及标题中看到的内容：

```
Margarétáóűúőüö 
```

这是我在表格中得到的：

```
MargarÃ©tÃ¡Ã³Å±ÃºÅ‘Ã¼Ã¶ 
```

我已经尝试了很多事情，，，`utf8_encode`但`mb_convert_encoding`什么也没发生。

我使用了一个助手，$name 包含 'Margarétáóűúőüö' 值：

```
 $form = $this->_helper->form('user-settings');
    $form->addElement('text', 'name', array(
            'label'      => 'Name',
            'value'         => $name,
            'required'   => true,
            'autocapitalize' => 'off',
            'autocorrect' => 'off',
        )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:06:24.597

我刚刚意识到，我们使用了 partialLoop + form helper 来获取 a subform 。不幸的是，我们在其中使用了一个 DOM，其中的`saveHTML()`函数`DOM`有点错误，不能很好地处理 UTF-8 字符。

当我删除此子表单并使用 $form = new Form_UserSettingsForm($user); 直接，它工作得很好。

所以当你在代码的任何地方使用 $dom->saveHTML() 函数时要小心！

# google-analytics - GA 中的 rel nofollow 和直接视图

> ID：10598123
> 
> 赞同：0
> 
> 时间：2012-05-15T09:45:04.337
> 
> 标签：google-analytics

rel=nofollow 链接是否会导致谷歌分析将其视为直接视图？因为在我的测试中，我从 nofollow 链接到达我的页面，而 GA 没有显示推荐人

我想知道我的测试是否有问题，或者这是一个已知问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:47:12.657

这可能只是您的测试的问题。 `referer`信息由浏览器发送，而不是由包含`nofollow`链接的页面发送。因此，只要您的浏览器（或您的客户端浏览器）报告引用者信息，链接是否包含`rel=nofollow`.

查看 wiki 以获取有关 HTTP Referer 工作原理的更多信息：[http ://en.wikipedia.org/wiki/HTTP_referer](http://en.wikipedia.org/wiki/HTTP_referer)

具体来说，在 的部分下`Referer Hiding`，它显示：

> 大多数网络浏览器在被指示使用“刷新”字段进行重定向时不会发送引用字段。这不包括某些版本的 Opera 和许多移动网络浏览器

# java - Glassfish - EAR 包的 3.1.2 部署需要很长时间

> ID：10598126
> 
> 赞同：2
> 
> 时间：2012-05-15T09:45:26.680
> 
> 标签：java, jakarta-ee, deployment, glassfish

我们有一个耳包：

3个war包，77个ejb包，101个jar包

此耳包的部署大约需要 30 分钟。对于开发人员来说，时间太长了。我们如何分析 glassfish 上的部署时间？

当我在 logging.properties 中打开某些包的日志级别时，是否可以获得有关部署的更多信息？

当我将**javax.enterprise.system.tools.deployment.level**设置为 FINEST 时，我在开始时看到许多条目，例如：

```
*Fein: Adding jar to class path:file:/D:..../.jar*
*Fein: Adding jar to class path:file:/D:..../.jar* 
```

比

```
*Fein: FileArchive.getSubArchive for D:...* 
```

之后只有

```
Fein: Skipping D:\Glassfish_3.1.2_Developer\glassfish\domains\ascDomain\autodeploy\bundles because its name is in the list of files to ignore 
```

15-20分钟仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:18:09.240

固定使用：

[http://java.net/jira/browse/GLASSFISH-18875](http://java.net/jira/browse/GLASSFISH-18875)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:39:49.087

您可以使用为 java 执行此操作的各种程序之一进行一些分析，也许看看最慢的部分是什么。另外，为这个问题投票：http: [//java.net/jira/browse/GLASSFISH-16560](http://java.net/jira/browse/GLASSFISH-16560)

# c++ - 将 QModelIndex 转换为 QString

> ID：10598128
> 
> 赞同：5
> 
> 时间：2012-05-15T09:45:39.133
> 
> 标签：c++, qt, qstring, qmodelindex

有没有办法将 QModelIndex 转换为 QString？这背后的主要目标是我想使用动态生成的 QListView-Items 的内容。

```
QFileSystemModel *foolist = new QFileSystemModel;
    foolist->setRootPath(QDir::rootPath());
    foolistView->setModel(foolist);

[...]

QMessageBox bar;
QString foolist_selectedtext = foolistView->selectionModel()->selectedIndexes();
bar.setText(foolist_selectedtext);
bar.exec; 
```

这甚至是获取当前选定项目的正确方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:03:57.397

```
foolistView->selectionModel()->selectedIndexes(); 
```

将 QModelIndex 的 QList 发回给您（如果您在 QAbstractItemView::SingleSelection 中查看，则只有一个）

QModelIndex的[data](http://qt-project.org/doc/qt-4.8/qmodelindex.html#data)方法返回一个与该索引值对应的 QVariant。

[你可以通过调用toString](http://qt-project.org/doc/qt-4.8/qvariant.html#toString)来获取这个 QVariant 的字符串值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:02:32.463

不，是简短的答案。A`QModelIndex`是模型的索引，而不是模型中该索引处保存的数据。您需要使用您的 QModelIndex来调用`data( const QModelIndex& index, int role = Qt::DisplayRole) const`您的模型。`index`如果您只是处理文本，那么 DislayRole 就足够了。

是的，您获取所选项目的方式是正确的，但根据您的选择模式，它可能会返回多个`QModelIndex`（在 a 中`QModelIndexList`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:06:22.417

QModelIndex 是一些数据结构的标识符。您应该阅读 QModelIndex 文档。有一种`QVariant data(int role)`方法。在大多数情况下，您将需要 Qt::DisplayRole 来获取选定的项目文本。请注意，selectIndexes() 还会返回 QModelIndex 列表。它可能是空的或包含多个项目。如果您想获取（即逗号分隔）所有选定索引的文本，您应该执行以下操作：

```
QModelIndexList selectedIndexes = foolistView->selectionModel()->selectedIndexes();
QStringList selectedTexts;

foreach(const QModelIndex &idx, selectedIndexes)
{
    selectedTexts << idx.data(Qt::DisplayRole).toString();
}

bar.setText(selectedTexts.join(", ")); 
```

# c# - 使用 ASP.Net V3 的连接字符串

> ID：10598131
> 
> 赞同：0
> 
> 时间：2012-05-15T09:45:56.113
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller, database-connection

我是 MVC 3 的新手，并且学习了很多很酷的教程。热爱设计模式并享受生产力的提升。

我现在遇到的问题之一是我使用内置数据库来处理大多数教程中许多基本 MVC 应用程序背后的登录。我现在需要更改以访问现场制作系统的登录详细信息，但找不到在哪里做。

我最初教的是像更改连接字符串一样简单，但生产数据库与组成的示例完全不同。

对我来说，模型/控制器从哪里获取数据并不明显。例如，模型/控制器在哪里检索用户名或比较密码。如果我知道这一点，那么我可以更改我的解决方案以指向正确的数据库/表/字段。

此外，我的真实数据库是在 EF 中建模的，并且位于同一解决方案中的单独项目中。所以我有 MyProject.Data 和 MyProject.Web 最终会有 MyProject.Test 等。

这里的任何帮助将不胜感激。提前致谢。

编辑 1：真实数据库也有一个包含用户名和密码字段的登录表，就像 MVC 简单登录数据库一​​样。但是，数据库显然不像示例项目中那样是系统的一部分。相反，它位于服务器上等待访问。

我的问题是我不知道去哪里进行所需的更改。我在想这将是连接字符串，但这不起作用。即使是我得到的错误也只是让我回到连接字符串，而不是给我一行代码来查找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:22:19.397

默认情况下，框架拉取与 DbContext 派生类同名的连接字符串。所以找一个和这个类一样的连接字符串。话虽如此，此连接字符串与默认表单实现完全无关，因为它从 web.config 的成员资格部分中标识的连接字符串中提取。这应该看起来像这样：

```
 <membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" />
  </providers>
</membership> 
```

在那里，您会看到已识别的 connectionStringName。您当然可以简单地更改它，但如果您已经有一个现有的数据库，则很可能结构不正确。

Henk 的评论很可能是正确的，因为您将希望创建自己的成员资格提供程序（只需创建一个类并从 MembershipProvider 继承并实现 CreateUser、GetUser、ValidateUser 和 ApplicationName（或者我认为））。您需要确保注册此提供程序以代替 AspNetMembershipProvider。一旦你这样做了，你应该会看到断点在你的提供者上被击中，并根据你的需要为你的数据库/AD/...简单地实现它

# facebook - facebook user_id 总是返回 0

> ID：10598132
> 
> 赞同：1
> 
> 时间：2012-05-15T09:45:57.853
> 
> 标签：facebook, facebook-graph-api

请有人帮助我。我尝试了将近 1 个月...我想检索消息和数据。我使用最新的 FB API，我尽力了，我找不到它有什么问题。我也无法检索**user_id** .. 我需要对回调函数做任何事情吗？

应用网址：[https ://apps.facebook.com/greetingz/](https://apps.facebook.com/greetingz/)

这是我的全部代码

```
 <?php
    session_start();
    if(!empty($_REQUEST['request_ids'])) {
    require_once('src/facebook.php');

    $config = array();
    $config["appId"] = "XXXXXXXX";
    $config["secret"] = "XXXXXXXXXXXX";
    $config["fileUpload"] = false; // optional

    // Create our Application instance.
    $facebook = new Facebook(array(
      'appId'  => $config["appId"],
      'secret' => $config["secret"],
      'cookie' => true,
    ));

        $user_id= $facebook->getUser();

    if($user_id){
      try {

            $app_token = $facebook->getAccessToken();

            $requests = explode(',',$_REQUEST['request_ids']);
            foreach($requests as $request_id) {

            $data = $facebook -> api('/'.$user_id.'/apprequests?'.$app_token);

            //you will delete the request here
            $delete_url = "https://graph.facebook.com/".$request_id."_".$user_id."?".$app_token."&method=delete";
            $result = file_get_contents($delete_url);
        }

      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
    }else{
    ?>

    <script>
      var oauth_url = 'https://www.facebook.com/dialog/oauth/';
      oauth_url += '?client_id=XXXXXXXXXX';
      oauth_url += '&redirect_uri=' + encodeURIComponent('https://apps.facebook.com/greetingz/');
      oauth_url += '&scope=user_birthday,user_events'
      window.top.location = oauth_url;
    </script>

    <?php
    };
    }

    else{

    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <script src="js/jquery-1.6.2.min.js" type="text/javascript" ></script>
    <script src="Scripts/swfobject_modified.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <title>Greetings</title>

    </head>

    <body>

    <div align="center">
      <object id="FlashID" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="664" height="626">
        <param name="movie" value="flash/Candle_jey.swf" />
        <param name="quality" value="high" />
        <param name="wmode" value="opaque" />
        <param name="swfversion" value="6.0.65.0" />
        <!-- This param tag prompts users with Flash Player 6.0 r65 and higher to download the latest version of Flash Player. Delete it if you don't want users to see the prompt. -->
        <param name="expressinstall" value="Scripts/expressInstall.swf" />
        <!-- Next object tag is for non-IE browsers. So hide it from IE using IECC. -->
        <!--[if !IE]>-->
        <object type="application/x-shockwave-flash" data="flash/Candle_jey.swf" width="664" height="626">
          <!--<![endif]-->
          <param name="quality" value="high" />
          <param name="wmode" value="opaque" />
          <param name="swfversion" value="6.0.65.0" />
          <param name="expressinstall" value="Scripts/expressInstall.swf" />
          <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->
          <div>
            <h4>Content on this page requires a newer version of Adobe Flash Player.</h4>
            <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" width="112" height="33" /></a></p>
          </div>
          <!--[if !IE]>-->
        </object>
        <!--<![endif]-->
      </object>

    </div>
    <div class="main">

    <div style="margin-left:300px; width:540px; margin:auto;">

    <table>
    <tr>
        <td>
            <span style="font-size:18px;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#603;">Greeting :</span>
        </td>
        <td>
            <textarea type="text" name="message" id="msg" style="height:40px; width:350px;" ></textarea>
        </td>
        <td>
            <input type="submit" value="Send" id="one" style="color:#CCC; background-color:#603; border:none; width:80px; height:40px;"
            onclick="sendRequestViaMultiFriendSelector(); return false;"></span>
        </td>
    </tr>
    </table>
    </div>      

    <script>
      FB.init({
        appId  : 'XXXXXXXXXXX',
        status : true,
        cookie : true,
        frictionlessRequests: true,
        oauth: true
      });

      function sendRequestViaMultiFriendSelector() {

        FB.ui({method: 'apprequests',
          message: $("#msg").val(),

        },function getMultipleRequests(requestIds) {
            FB.api('', {"ids": requestIds }, function(response) {
            console.log(response);
             });
        }, requestCallback);
      }  

      function requestCallback(response) {
        // Handle callback here
        //var requestID = FB.api("/requestID", callback);   
        alert("Post was published.");
      }
    </script>

    <div id="fb">

    </div>
    <?php }?>
    </div>
    <script type="text/javascript">
    swfobject.registerObject("FlashID");
    </script>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:27:38.227

哥们详细阅读[了这篇](http://developers.facebook.com/docs/authentication/signed_request/)，它会解决你的问题，你需要解析signed_request，在signed_request中你得到user_id，你可以得到像这样的签名请求authResponse.signed_request

或者，您可以使用下面的 Facebook 图形 api 方法代替这一行“$user_id= $facebook->getUser();” 在你的代码中。

```
FB.login(function(loginResponse) {
    if (loginResponse.authResponse) {
        var userId = loginResponse.authResponse.userID;

        // Work with userId here
        var signed_request = loginResponse.authResponse.signedRequest;
        //Work with signed request here
    }
    else {
        //User cancelled login or did not fully authorize        
    }
}); 
```

# android - rawQuery（查询，selectionArgs）

> ID：10598137
> 
> 赞同：92
> 
> 时间：2012-05-15T09:46:05.483
> 
> 标签：android, sqlite

我想使用选择查询从表中检索数据。我找到了检索数据`rawQuery(query, selectionArgs)`的类方法。`SQLiteDatabase`但我不知道`query`and`selectionArgs`应该如何传递给`rawQuery`方法？

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-05-15T09:50:05.687

```
rawQuery("SELECT id, name FROM people WHERE name = ? AND id = ?", new String[] {"David", "2"}); 
```

您传递一个与“？”具有相同数量元素的字符串数组。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-15T10:05:12.940

也许这可以帮助你

```
Cursor c = db.rawQuery("query",null);
int id[] = new int[c.getCount()];
int i = 0;
if (c.getCount() > 0) 
{               
    c.moveToFirst();
    do {
        id[i] = c.getInt(c.getColumnIndex("field_name"));
        i++;
    } while (c.moveToNext());
    c.close();
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-15T09:48:59.353

rawQuery 的一个例子——`db.rawQuery("select * from table where column = ?",new String[]{"data"});`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T09:51:17.203

请参阅下面的代码，它可能会对您有所帮助。

```
String q = "SELECT * FROM customer";
Cursor mCursor = mDb.rawQuery(q, null); 
```

或者

```
String q = "SELECT * FROM customer WHERE _id = " + customerDbId  ;
Cursor mCursor = mDb.rawQuery(q, null); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-09T07:01:36.457

如果您的 SQL 查询是这样的

```
SELECT id,name,roll FROM student WHERE name='Amit' AND roll='7' 
```

那么 rawQuery 将是

```
String query="SELECT id, name, roll FROM student WHERE name = ? AND roll = ?";
String[] selectionArgs = {"Amit","7"} 
db.rawQuery(query, selectionArgs); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-25T11:13:34.837

为了完整性和正确的资源管理：

```
 ICursor cursor = null;
        try
        {

            cursor = db.RawQuery("SELECT * FROM " + RECORDS_TABLE + " WHERE " + RECORD_ID + "=?", new String[] { id + "" });

            if (cursor.Count > 0)
            {
                cursor.MoveToFirst();
            }
            return GetRecordFromCursor(cursor); // Copy cursor props to custom obj
        }
        finally // IMPORTANT !!! Ensure cursor is not left hanging around ...
        {
            if(cursor != null)
                cursor.Close();
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-26T10:52:29.850

```
String mQuery = "SELECT Name,Family From tblName";
Cursor mCur = db.rawQuery(mQuery, new String[]{});
mCur.moveToFirst();
while ( !mCur.isAfterLast()) {
        String name= mCur.getString(mCur.getColumnIndex("Name"));
        String family= mCur.getString(mCur.getColumnIndex("Family"));
        mCur.moveToNext();
} 
```

姓名和家庭是你的结果

# java - JMX 使用 Jetty 作为嵌入式服务器启用我的应用程序

> ID：10598141
> 
> 赞同：0
> 
> 时间：2012-05-15T09:46:14.893
> 
> 标签：java, jetty, jmx, embedded-jetty

我有一个 java 服务器应用程序，它想为管理任务提供 Http 接口，例如在运行时监视和配置它等。

我有一些想法，JMX 将为我提供一个简洁的标准接口，如果我实现它，我将提供一个很好的标准管理接口，所有类型的管理控制台应用程序都可以使用它来管理我的服务器应用程序。

我想知道 Jetty 是否在我的 Java 应用程序中所有这些正在运行的进程内（嵌入）中发挥作用？

您认为使用 Web 界面管理/监控我的 java 应用程序的最佳方式是什么？

感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:18:56.983

我们前段时间在 jetty 中添加了一个 jmx rest 接口选项，这可能在这里有用。

[http://webtide.intalio.com/2011/05/jetty-jmx-webservice/](http://webtide.intalio.com/2011/05/jetty-jmx-webservice/)

它可以很容易地从类似管理员的界面中提取出来，用于管理或演示目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:45:31.963

JMX 将允许您公开应用程序的配置点。如果您希望以编程/自动化的方式配置您的应用程序，这是必需的。天真的用户不希望使用 JMX 来配置应用程序。他们不太可能知道如何使用 JMX。相反，图形控制台会吸引他们。他们可以简单地查看需要配置的内容，参考任何参考资料或帮助，然后就可以进行操作。

最好有两种选择；Web 控制台以及用于编程访问的 JMX 方式。

其次，您不需要任何第三方服务器来为您的应用程序启用 JMX。您只需创建一个 MBeanServer 实例，它将托管您的 mbean。

# gwt - 如何将eclipse中现有的gwt应用程序转换为maven项目

> ID：10598142
> 
> 赞同：0
> 
> 时间：2012-05-15T09:46:17.363
> 
> 标签：gwt, maven, migrate

有没有参考网站或教程？我看到一些将 java 项目迁移到 maven 项目的网站，一些使用 maven 的新 gwt 应用程序的网站，但没有将 eclipse 项目中的现有 gwt 应用程序迁移到 maven 项目的网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:54:18.580

尝试这个。

1.  右键单击项目。
2.  专注于菜单中的**配置。**
3.  选择选项**Convert to Maven Project**。

如果这对你不起作用。我建议您创建新的 maven 项目，然后逐步将所有代码移到那里。

希望这对您有所帮助。

干杯。

# wpf - 如何验证虚拟化列表视图？

> ID：10598144
> 
> 赞同：3
> 
> 时间：2012-05-15T09:46:40.557
> 
> 标签：wpf, validation, listview, virtualization

我在 ItemTemplate 中有一些带有 userControl 的 listView。此 UserControl 包含一些我需要验证的文本框。在我为 ListView 启用虚拟化之前，一切正常。现在验证仅适用于可见项目。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:40:31.567

Because the UI virtualization recycles the visual containers, it will reset them, so the solution would be to manually bind to the some properties in the user control, and do your validation in the View Model. Then when it doesn't pass validation change the border color and size of the UserControl to red and a thicker border.

```
<UserControl...>
  <Grid>
    <Border BorderThickness="{Binding Path=Border_Thickness_property}" BorderBrush="{Binding Path=Border_brush_color}">

    <!-- Put your textboxes and such here... -->

    </Border>
  </Grid>
</UserControl> 
```

reference: [http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization)

OR

You could have your View Model implement IDataErrorInfo and use that interface to define your validation rules

[This](http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/) site has a nice example.

# oracle - 转换或删除 CLOB 的格式？

> ID：10598148
> 
> 赞同：0
> 
> 时间：2012-05-15T09:46:56.000
> 
> 标签：oracle, oracle11g

我需要`SELECT`som 数据，并且在 cols 上是一个`CLOB`.

我目前正在使用`TO_CHAR(DBMS_LOB.SUBSTR(T.Tekst, 4000, 1))`，但这会输出 clob、文本格式和所有内容，如下所示：

`{\rtf1\ansi\deff0\deftab254{\fonttbl{...`和那里的文字faaar。

有没有办法让我只得到文本，而不是所有的格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:33:55.407

是的：您可以[用 Java 编写存储过程](http://docs.oracle.com/cd/B28359_01/java.111/b31225/chfive.htm)。这将允许您将 RTF 解析器添加到数据库并将数据转换为 SQL 中的纯文本。

请注意，这需要一些爱心的关注。如果您计划在 a 中搜索许多 GB 的文本，`SELECT`更好的选择是在填充 的代码中解析 RTF 数据，`CLOB`或者创建一个新表，其中包含您需要的数据以及触发器以使它们保持最新。

# ios - 我在哪里填充和存储数组

> ID：10598151
> 
> 赞同：0
> 
> 时间：2012-05-15T09:47:24.633
> 
> 标签：ios, arrays, model-view-controller, uiviewcontroller, storyboard

我的问题很简单：**使用 MVC 模式**，**我应该在哪里保存一些数组**？

*   用户 --> 我的`NSObject`班级（模型）
*   联系人 --> 我的联系人类，带有一个(Controller)`TableViewController`数组`User`
*   查看 --> 我的`Storyboard`（查看）

好吧，我有一个有很多按钮的主屏幕：

*   1 --> 其中之一是“联系”。
*   2 --> 当我点击它时，`mainView`切换到`ContactViewController`（使用故事板推送）。
*   3 --> 这`ContactView`应该显示我的用户数组。

**考虑到我使用 MVC，我应该在哪里保存/初始化我的 Array ？**

*   在一个名为“UserList”之类的新类（模型）中，在 ContactViewController 中，还是在其他地方？

甚至我为此创建了一个新模型“UserList”，我应该在哪里调用它，以便它可以在我的视图 Load 时加载数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:54:30.233

您应该在“用户”类（用户->我的 NSObject 类（模型））中为该数组创建一个新字段。如果初始化它需要很多时间，那么你应该在你的 ContactViewController 的 ViewDidLoad 中初始化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:25:03.277

在你的模型中。将模型视为存储为 plist、sql db 等的数据的接口。当然，如果您的数据不可更改，那么模型实际上可能包含/创建数据本身。因此，通常模型会创建一个数组（或数组数组），该数组由数据库或 plist 中的数据填充。然后，ViewController 会从模型中请求一个或多个数组条目。

“联系人”按钮是主视图的一部分。它的显示由 mainViewController 控制，它将新的 ContactViewController 控制器推送到堆栈上。ContactViewController 应该在模型中创建或检索它的数据，这些数据将用于显示它的视图元素。

# ruby - 如何单独修改嵌套数组中的第二个元素？- 红宝石

> ID：10598153
> 
> 赞同：1
> 
> 时间：2012-05-15T09:47:27.020
> 
> 标签：ruby

所以说我有一个像这样的二维数组：

```
list = [["auburn", "http://auburn.craigslist.org"], ["birmingham", "http://bham.craigslist.org"], ["dothan", "http://dothan.craigslist.org"]] 
```

我希望它看起来像这样：

```
list = [["auburn", "http://auburn.craigslist.org/web/"], ["birmingham", "http://bham.craigslist.org/web/"], ["dothan", "http://dothan.craigslist.org/web/"]] 
```

所以我刚刚修改了每个嵌套数组中的第二个元素。

我如何在 Ruby 中做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:27:44.273

尝试这个

```
list.map!{|f,l| [f, l + "/web/"]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:04:46.933

`list.map! { |elem| [elem[0], elem[1] << '/web/'] }`

# batch-file - 命令行参数在批处理文件中不起作用

> ID：10598157
> 
> 赞同：0
> 
> 时间：2012-05-15T09:47:39.477
> 
> 标签：batch-file, command-line-arguments, default-value

我正在编写一个批处理文件程序，我可能/可能不会传递参数。如果我不传递参数，我希望考虑一个默认值。

我的代码在下面，它仍然不起作用：

```
IF "%1"=="" (
SET iterations=100
) ELSE (
SET iterations=%1

for /l %%n in (1,1,%iterations%) do ( . . . . . . 
```

谁能指出为什么它仍然不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:53:29.623

正如@jeb 指出的那样，缺少的只是右括号：

```
IF "%1"=="" (
     SET iterations=100
) ELSE (
     SET iterations=%1
)

for /l %%n in (1,1,%iterations%) do (
    echo %%n
) 
```

这行得通。

# linker - debian 上的链接器看不到符号化的共享库

> ID：10598159
> 
> 赞同：0
> 
> 时间：2012-05-15T09:47:43.067
> 
> 标签：linker, debian, eclipse-cdt, linker-errors, openscenegraph

我有这个错误：

/usr/bin/ld: 找不到 -llibosg

而 GCC C++ 链接器调用：

```
g++ -i -L/home/user/osg/lib -o"WCC"  [my files] -llibosg -llibOpenThreads -llibosgQt -llibosgViewer -llibosgText 
```

命令 locate libosg.so 返回：

```
/home/user/osg/lib/libosg.so
/home/user/osg/lib/libosg.so.3.1.3
/home/user/osg/lib/libosg.so.92
/usr/lib/libosg.so.28.3
/usr/lib/libosg.so.65
/usr/local/lib/libosg.so
/usr/local/lib/libosg.so.3.1.3
/usr/local/lib/libosg.so.92 
```

我已经从 Win 切换，一切正常。我正在使用 Eclipse。为什么链接器看不到那些库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:58:51.987

不应该这样`-losg`吗？从所有 -ls 中删除 lib 部分。

# javascript - Backbone js模型响应数组到Backbone集合

> ID：10598162
> 
> 赞同：0
> 
> 时间：2012-05-15T09:47:53.863
> 
> 标签：javascript, backbone.js

如果我有一个模型，其中一些参数是集合，例如：

```
var Mdl = Backbone.Model.extend({

  defaults:{
    test: new Backbone.Collection()
  }
}); 
```

现在假设我在这个模型上进行了一次获取，并且在我的服务器端响应中，我有一个名为“test”的属性，它是一个数组。我想将数组添加到我的集合中或使用此数组重置它，以便它仍然是主干集合，但是如果我在我的模型上运行重置，默认情况下不会这样做，正如预期的那样，它将覆盖“测试”属性与响应中的数组。

让它将响应属性“测试”视为主干集合而不是数组的最佳方法是什么？我基本上想检查该属性是否是一个数组，然后检查该属性是否已经在模型上定义为一个集合，如果是这样，那么用数组重置这个集合而不是覆盖它。

我可以通过创建自己的 Backbone Sync 来做到这一点，但我不确定这是否是最好的方法，你们怎么看？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:44:42.710

首先，如果您`Objects`在`Model.defaults` [检查中定义此答案](https://stackoverflow.com/a/10555420/316700)，您将遇到奇怪的问题。

如果您真的想这样做，请尝试在延迟函数中执行此操作：

```
// code no tested
var Mdl = Backbone.Model.extend({
  defaults:{
    test: function() { return new Backbone.Collection() }
  }
}); 
```

我仍然认为这不是一个好主意，我真的更喜欢在`Model.attributes`我认为是 Backbone 所期望的基础值。

在这种情况下，我所做的是让服务器 JSON 响应调用一个键`test_data`并在以下位置手动解析它`Model.initialize`：

```
// code no tested
var Model = Backbone.Model.extend({
  initialize: function(){
    this.test = new Backbone.Collection( this.get( "test_data" ) );
  }
}); 
```

[检查这个 SO 问题](https://stackoverflow.com/questions/9491902/how-can-i-correctly-implement-parse-in-a-backbone-model-to-include-collections/9547481#9547481)

看到这`Model.get("test_data")`是原始数据，而真正的 Object 是`Model.test`，最后一个不包含在`Model.attributes`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:11:34.340

我使用[Backbone Relational](https://github.com/PaulUithol/Backbone-relational)来解决这类问题。

您将编写这样的代码来定义关系。

```
Mdl = Backbone.RelationalModel.extend({
    relations: [{
            type: Backbone.HasMany,
            key: 'test',
            relatedModel: 'TestModel',
            collectionType: 'TestCollection',
            reverseRelation: {
                key: 'mdl'
            }
        }]
});

TestModel = Backbone.RelationalModel.extend({});

TestCollection = Backbone.Collection.extend({
    model: TestModel
}); 
```

然后它将您的测试属性转换为主干集合。

# air - 是否有任何工具可以将 Adob e AIR 打包为 exe？

> ID：10598166
> 
> 赞同：0
> 
> 时间：2012-05-15T09:48:11.333
> 
> 标签：air, installation, exe

我正在创建一个 adobe air 应用程序，我想将 AIR 文件打包成一个带有海关安装程序属性的 exe 文件。有没有可用的工具？？？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:50:14.627

Adobe AIR 应用程序旨在与 Adob​​e AIR Runtime 一起运行。如果您有原始的 FLA 文件，您可以将其打包`Publish Settings > Win Projector`成 Adob​​e Flash 中的 EXE ( in )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:04:12.313

WiXEdit 是用于 Windows Installer XML (WiX) 工具集的 XML 源文件的编辑器，用于构建 MSI 和 MSM 安装包

# php - Kohana 3 路由在格式控制器/操作中无法正常工作

> ID：10598167
> 
> 赞同：0
> 
> 时间：2012-05-15T09:48:17.397
> 
> 标签：php, .htaccess, kohana, kohana-3

我是Kohana的新手。我**在 Kohana 3.2 中使用默认路由，**即

```
Route::set('default', '(<controller>(/<action>(/<id>)))')
->defaults(array(
    'controller' => 'admin',
    'action'     => 'login',
)); 
```

**我的控制器**如下：

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_Admin extends Controller{

public function __construct($request, $response) {
    parent::__construct($request, $response);
}

public function action_login(){
    $session = Session::instance();
    if($session->get('admin_id')){
        //Session is set / Logged in
        $this->request->redirect('users/list');
        exit();
    }

    if($_POST){
       $user = ORM::factory('admin');
       $post = Validation::factory($_POST)
               ->rule('username', 'not_empty')
               ->rule('password', 'not_empty');
        if(!$post->check()){
            Message::error($post->errors('admin'));
        }
        else{
            $objUserDetails = $user->checkCredentials($_POST);
            if($objUserDetails->id){
                //Valid username and password
                $session->set('admin_id', $objUserDetails->id);
                $this->request->redirect('users/list');
                exit();
            }
            else{
                Message::error("Invalid username or password");
                $this->request->redirect('admin/login');
                exit();
            }
        }
    }

    $this->response->body(new View(
                'login',
                array('title'=>'Administrator login')
            ));
}

public function action_logout(){
    $session = Session::instance();
    $session->delete('admin_id');
    $session->destroy();
    $this->request->redirect('admin/login');
} 
```

}

**我的 .htaccess**如下：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

# Protect hidden files from being viewed
<Files .*>
Order Deny,Allow
Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT] 
```

当我打字`http://localhost`时，它工作正常。但是当我输入`http://localhost/admin/login` 或`http://localhost/admin/logout`显示 404 错误。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:14:15.767

你有你的`.htaccess`残疾人，所以你需要找到`AllowOverride`并设置它`All`在你的`httpd.conf`

# jquery - 在 jquery 中调用 Div 图像

> ID：10598170
> 
> 赞同：0
> 
> 时间：2012-05-15T09:48:43.337
> 
> 标签：jquery, jquery-ui, html

我想将内部的所有图像传递`<div id="supersized"></div>`给 jquery 超大插件。

我当前的实现如下，但这不起作用。

**查询代码**

```
 $(function(){
                $.fn.supersized.options = {  
                    startwidth: 640,  
                    startheight: 480,
                    vertical_center: 1,
                    slideshow: 1,
                    navigation: 1,
                    thumbnail_navigation: 1,
                    transition: 1, //0-None, 1-Fade, 2-slide top, 3-               slide right, 4-slide bottom, 5-slide left
                    pause_hover: 0,
                    slide_counter: 1,
                    slide_captions: 1,
                    slide_interval: 3000,
                    slides : [

  {image : 'slides/tower.jpg', title : 'City Clock Tower'},
  {image : 'slides/fence.jpg', title : 'Canal Park Fence'},  
  {image : 'slides/tracks.jpg', title : 'Old Train Tracks'}
                    ]
                };
                $('#supersized').supersized(); 
            }); 
```

**jsp代码**

```
<div id="supersized">

<IMG SRC="../img/nature/xyz.jpg'" WIDTH="150" HEIGHT="150" BORDER="0" ALT="">  

<IMG SRC="../img/nature/asaz.jpg'" WIDTH="150" HEIGHT="150" BORDER="0" ALT="">  

<IMG SRC="../img/nature/sun.jpg'" WIDTH="150" HEIGHT="150" BORDER="0" ALT="">  

</div> 
```

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:51:51.020

```
$('#supersized img').supersized(); 
```

如果我能让你好起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:54:28.960

```
$('#supersized img').each(function(){
  alert( "src is : " + $(this).attr('src') );
}); 
```

遍历图像集合并提醒 src 代码

# c - 如何生成 cvblob.lib？

> ID：10598176
> 
> 赞同：0
> 
> 时间：2012-05-15T09:48:55.680
> 
> 标签：c, opencv

当我尝试编译我的代码时发生了这些错误：

错误 LNK2019：未解析的外部符号 _cvFilterByArea 在函数 _main 中引用 错误 LNK2019：未解析的外部符号 _cvRenderBlobs 在函数 _main 中引用

我发现一篇帖子说我应该将 cvblob.lib 放在输入链接器中，但我在生成 cvblob.lib 时遇到了麻烦。我现在处于死胡同。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:16:10.703

[cvBlob](http://code.google.com/p/cvblob/)不是 OpenCV 的一部分。它是一个外部库，需要在您的系统上下载、编译和安装。

检查：[如何安装](http://code.google.com/p/cvblob/wiki/HowToInstall)和[如何使用](http://code.google.com/p/cvblob/wiki/HowToUse)。

# google-apps-script - Google 应用程序脚本：urlfetchapp - 服务调用次数过多

> ID：10598179
> 
> 赞同：3
> 
> 时间：2012-05-15T09:49:21.497
> 
> 标签：google-apps-script, google-sheets

我有一个谷歌电子表格，它在许多单元格中调用用户特定的功能。此函数获取 3-4 个特定的相对较短的网页并对其进行解析。页面每天只更改一次，但我不能/不知道如何强制我的电子表格每天只获取每个页面一次并使用缓存副本。我相信在 ~20 获取后刷新期间会发生 urlfetchapp 错误。“服务调用次数过多”。

我试图找到解决此问题的方法。我认为这个错误的发生是因为许多 URL-fetches（即使对于相同的 URL，内容不变），而不是因为许多解析。

如果这是真的，如何减少获取次数？例如，我可以在某处下载页面并在本地解析它们吗？我可以对谷歌电子表格中的网页使用某种缓存吗？如果我将此文件的副本保存在电子表格所在的谷歌驱动器中，它会有帮助吗？我可以增加 URLfetchapp 的限制吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T21:16:05.983

您应该考虑使用为此类用例创建的[缓存服务。](https://developers.google.com/apps-script/service_cache)[这篇介绍该服务的博客文章](http://googleappsdeveloper.blogspot.com/2011/11/caching-in-cloud-with-google-script.html)展示了一些基本用法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T10:47:21.050

为了避免类似的问题，我实施了一种解决方法。它不是很优雅，但它确实有效。它在循环中使用*Utilities.sleep() ：*

```
function urlFetchWihtoutError(url) {
  const NB_RETRY = 10;
  var nbSecPause = 1.5;
  var nbErr = 0;
  while (nbErr < NB_RETRY) {
    try {
      if (nbErr > 0) SpreadsheetApp.getActiveSpreadsheet().toast("Here we go again.");
      var res = UrlFetchApp.fetch(url).getContentText();
      return res;
    }
    catch (error) {
      nbErr++;
      SpreadsheetApp.getActiveSpreadsheet().toast("Let's pause the system during " + nbSecPause + " seconds. Loop number: " + nbErr);
      Utilities.sleep(nbSecPause * 1000)
      nbSecPause += 0.5;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-13T15:34:46.577

添加缓存正是我所需要的。所以我实现了一个使用缓存的函数 fetch(url)，这样可以避免复制调用。

```
function fetch(url) {
  var cache = CacheService.getScriptCache();
  var result = cache.get(url);
  if(!result) {
    var response = UrlFetchApp.fetch(url);
    result = response.getContentText();
    cache.put(url, result, 21600);
  }
  return result;
} 
```

# c++ - 使用 C++ builder 2010 从 Access 打开 DAO 记录集

> ID：10598182
> 
> 赞同：0
> 
> 时间：2012-05-15T09:49:23.223
> 
> 标签：c++, ms-access, dao, recordset, c++builder-2010

由于缺乏有关在 internetz 上使用 DAO 和 C++ 的信息，我感到非常恼火。因为我有事情要解决，所以我不得不摆弄它，我正在考虑跳出窗户：）

我发现的唯一例子是 VB6、VB.Net 和 VBA 相关的。我试图将它们应用于 C++ 并有以下内容

```
...    
WideString sqlQuery = WideString(
                "SELECT * "\
                "FROM NODES "\
                "WHERE ID = " + IntToStr(NODE_ID));

        Dao_2k::RecordsetPtr pNewRecord;
        pNewRecord = m_dbDatabase->OpenRecordset(sqlQuery.c_bstr(), OleVariant(RecordsetTypeEnum::dbOpenDynaset));
... 
```

但它只是不想工作。我首先尝试仅使用 sql 查询，然后添加`dbOpenDynaset`设置并尝试其他设置。但执行只是停止。我在想 C++ 中的函数可能需要更多变量，`OpenRecordset`但 IDE 没有关于它的文档，所以我有点摸不着头脑。

选择实际上将包含一些连接，但我将其剥离以查看是否是问题所在。但是这个简单和更复杂的查询都在 Access 中执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:11:26.200

我使用 VB 教程和其他一些资源中描述的一些原则让它工作。像这样的东西应该工作。

```
WideString sqlQuery = WideString(
            "SELECT * FROM NODES "\
            "WHERE ID = " + IntToStr(NODE_ID));

Dao_2k::RecordsetPtr pRecord;
pRecord = m_dbDatabase->OpenRecordset(sqlQuery.c_bstr(), OleVariant(RecordsetTypeEnum::dbOpenDynaset));

Dao_2k::FieldsPtr fs;
fs = pEntryRecord->get_Fields();

Dao_2k::FieldPtr nodeIdField;
nodeIdField = fs->get_Item(OleVariant(0)); 
```

尽管**Access**在处理 SQL 语法方面很糟糕。*JOINS*需要一组奇怪的括号，我还不能让它做一个*UNION* :)

# gwt - GWT 编辑器框架 - 未发布嵌套实体的约束违规

> ID：10598184
> 
> 赞同：0
> 
> 时间：2012-05-15T09:49:28.917
> 
> 标签：gwt, editor

我对 gwt 的编辑器框架有疑问。在执行 editorDriver.setConstraintViolations(errors) 时，错误不会发布到使用嵌套实体的字段

首先我有一个用户实体：

```
public class User extends BaseEntity {

@OneToOne
@JoinColumn(nullable = false)
private Contact contact;

@NotNull(message = "username must not be null")
@Column(nullable = false)
private String username;
.... 
```

现在在我的编辑器中，我有类似的字段

```
@UiField 
ValidationWidgetDecorator<String> username;

@Path("contact.title")
@UiField
ValidationWidgetDecorator<String> title; 
```

ValidatoinWidgetDecorator 类与 ValueBoxEditorDecorator 几乎相同

现在如果我在做

```
RequestContext context = editorDriver.flush();

    context.fire(new Receiver<Void>() {

         @Override
          public void onConstraintViolation(Set<ConstraintViolation<?>> errors) {
            editorDriver.setConstraintViolations(errors);
          }

    ... 
```

显示 Userproxy 的约束错误（例如用户名违规）并且一切正常，但如果违规发生在联系人中（例如在 contact.title 字段中），则错误不会在视图中发布（错误容器在showErrors（列表错误）为空）

现在我真的找不到其他人有这个问题，所以我想问题出在我这边，可能是因为我的编辑器实现了 Editor < UserProxy > 并且联系人是 ContactProxy？

其他一切似乎都正常

希望它有足够的代码，否则我会发布更多。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:03:20.453

我怀疑问题是`onConstraintViolation`不是为 general 调用的`context.fire`，而只是为保存项目的请求。当您在上下文中发出请求时，将`onConstrainViolation`覆盖移动到接收器（可能需要添加）。

# php - Python dbase 到 mysql

> ID：10598189
> 
> 赞同：-1
> 
> 时间：2012-05-15T09:49:49.837
> 
> 标签：php, python, ubuntu-11.04

我在 ubuntu 中有一个名为 school tool 的应用程序，它使用**zodb**。我想将数据库的格式更改为 csv 或者我想将结构导入 mysql

任何机构都知道如何做到这一点

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:57:44.180

您可以查看[SQLAlchemy](http://readthedocs.org/docs/sqlalchemy-migrate/en/latest/)文档`migrate`，也许这可以帮助您。

# database - 此数据库设计是否满足 2NF 或 3NF？

> ID：10598198
> 
> 赞同：0
> 
> 时间：2012-05-15T09:50:29.633
> 
> 标签：database, oracle, database-design, database-normalization

好的，所以我有 2 张桌子。第一个表的名称`owner`是

```
owner_id primary key
first_name
last_name 
```

我还有另一张`car`桌子

```
car_reg_no primary key
car_type
car_make
car_model
car_origin
owner_id foreign key 
```

这个设计是 2NF 还是 3NF 或者两者都不是？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:55:11.990

AFAIK，2NF，由于`car`表字段的相互依赖。您将需要第三张表，`car_type`其中列出了制造商、型号和原产地，以及表`car_type_id`中的外来物`car`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:16:40.280

3NF 意味着它在 2NF 中，并且没有[传递函数依赖](http://en.wikipedia.org/wiki/Transitive_dependency)。用一种更容易理解的术语来说：“所有属性都依赖于密钥，整个密钥，只有密钥”。

第一个表满足了所有这些，所以它在 3NF 中。

第二张表需要分析一下：非键是否存在函数依赖？具体来说，可以有属于不同品牌的相同车型吗？

*   如果是，那么函数依赖`car_model`->`car_make` **不存在**，并且该表在 3NF 中（除非其他一些依赖违反 3NF - 请参阅`car_origin`下面的评论）。
*   不，然后有`car_model`->`car_make`违反了 3NF。

还有，是什么意思`car_origin`？如果它在功能上依赖于非密钥，这也可能违反 3NF。

# php - 在 PHP 中将 cookie 数据插入 MySQL 数据库？

> ID：10598201
> 
> 赞同：-3
> 
> 时间：2012-05-15T09:50:44.393
> 
> 标签：php, mysql, database, cookies, insert

> **可能重复：**
> [如何使用 php 获取离线 cookie 数据并将其插入 mysql？](https://stackoverflow.com/questions/10578319/how-to-get-offline-cookies-data-with-php-and-insert-it-in-mysql)
> [在 php 中获取 cookie？](https://stackoverflow.com/questions/10579504/get-cookies-in-php)

我有一些用户信息保存在cookie中，用户信息是这样的，

**Fname:Muhammad,Lname:Riaz,title:Developer,org:MagicLamp,email:riaz@yaho.com Fname:Fraz,Lname:Khan,title:Developer,org:MagicLamp,email:riaz@yaho.com**

我想将这些信息插入 MySQL 数据库。问题是：如何从 cookie 中获取这些信息并插入数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:01:38.287

```
$str = "";

foreach ($_COOKIE as $key => $value)
{
    $str .= $key . ":" . $value . ",";
}

$str = substr($str, 0, -1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:53:50.177

请查看：[$_COOKIE](http://www.php.net/manual/en/reserved.variables.cookies.php)

获取 cookie 后，您可以使用[pdo](http://www.php.net/manual/en/pdo.prepared-statements.php)或[mysqli](http://www.php.net/manual/en/mysqli.quickstart.statements.php)将数据插入数据库。

确保在插入数据库之前清理数据。

# c# - nBuilder 测试数据生成器和反射

> ID：10598203
> 
> 赞同：2
> 
> 时间：2012-05-15T09:50:49.337
> 
> 标签：c#, reflection, entity-framework-4, test-data

我正在使用 nBuilder 为我的应用程序生成一些测试数据。首先我对其进行了测试，它运行良好。一个简单的例子：

```
Customer customer = Builder<Customer>
                   .CreateNew()
                   .Build(); 
```

创建一个对象并自动填充所有属性。例如，如果 customer 包含属性：**name**，它将用**name1**填充它 ，依此类推......

好吧，这一切都很好，但是我现在很难动态地完成整个事情。

我现在正在做的是反射，我正在遍历我的类中的所有实体，并且每个实体都应该生成一些测试数据，甚至应该填充查找和子列表，但这不是问题。我的问题是，我如何将*上述*代码用于**任何**类型？

`ANYTYPE object = Builder<ANYTYPE> ...`

我尝试了什么：

```
object entity = null; //The object/Entity
Assembly assembly = Assembly.GetAssembly(typeof(EMI_ERPContext)); //Getting Assembly
Type type = assembly.GetType(entityName); //I know the Type
//entity = Activator.CreateInstance(type); Do I must create an Instance here?
object entity = Builder<dynamic> //The above code.. Tried to put dynamic as Type, but doesnt work
               .CreateNew()
               .Build(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T22:30:04.660

我使用控制台应用程序（在此处完成）进行了测试，伪造了 nBuilder 的类/接口/方法。

所以这是可行的，但没有在实际环境中尝试过。

您可以重用的方法是“TryToReflectBuilder”。它可能不那么冗长，但我让“逐步”代码，因为它可能更明确。ReflectionConsole.Test 用作“要反映的实体”。

```
namespace ReflectionConsole {
    class Program {
        static void Main(string[] args)
        {

            object test = TryToReflectBuilder("ReflectionConsole.Test");
            Console.ReadKey();
        }

        public static object TryToReflectBuilder(string type)
        {
            //getting the assembly : not same as your way, but... that wasn't a problem for you
            var assembly = Assembly.GetAssembly(typeof(Test));

            //getting the entityType by name.
            var entityType = assembly.GetType(type);

            //The interesting (I hope) part is starting (yeah)
            //get the Builder<T> type
            var builderClassType = typeof(Builder<>);

            //create generic argument for Builder<T> will take the type of our entity (always an array)
            Type[] args = {entityType};

            //pass generic arguments to Builder<T>. Which becomes Builder<entityType>
            var genericBuilderType = builderClassType.MakeGenericType(args);

            //create a new instance of Builder<entityType>
            var builder = Activator.CreateInstance(genericBuilderType);

            //retrieve the "CreateNew" method, which belongs to Builder<T> class
            var createNewMethodInfo = builder.GetType().GetMethod("CreateNew");

            //invoke "CreateNew" from our builder instance which gives us an ObjectBuilder<T>, so now an ObjectBuilder<entityType> (well as an ISingleObjectBuilder<entityType>, but... who minds ;))
            var objectBuilder = createNewMethodInfo.Invoke(builder, null);

            //retrieve the "Build" method, which belongs to ObjectBuilder<T> class
            var buildMethodInfo = objectBuilder.GetType().GetMethod("Build");

            //finally, invoke "Build" from our ObjectBuilder<entityType> instance, which will give us... our entity !
            var result = buildMethodInfo.Invoke(objectBuilder, null);

            //it would be sad to return nothing after all these efforts, no ??
            return result;
        }
    }

    public  class Builder<T>
    {
        public static ISingleObjectBuilder<T> CreateNew()
        {
            Console.WriteLine(string.Format("{0} creating new",typeof(T)));
            return new ObjectBuilder<T>();
        } 
    }

    public interface ISingleObjectBuilder<T> : IBuildable<T>
    {
    }
    public interface IObjectBuilder<T> : ISingleObjectBuilder<T>
    {

    }
    public interface IBuildable<T>
    {
        T Build();
    }

    public class ObjectBuilder<T> : ISingleObjectBuilder<T>
    {
        public T Build()
        {
            Console.WriteLine(string.Format("{0} building myself", typeof(T)));
            return Activator.CreateInstance<T>();
        }
    }

    public class Test
    {
    }
} 
```

# android - 在 phonegap/cordova 项目的触摸设备上滚动

> ID：10598206
> 
> 赞同：0
> 
> 时间：2012-05-15T09:51:02.503
> 
> 标签：android, iphone, scroll, cordova

> **可能重复：**
> [Android + PhoneGap + jQuery Mobile 上的水平滚动图像](https://stackoverflow.com/questions/8303589/horizontally-scrollable-image-on-android-phonegap-jquery-mobile)

如何为 android/iphone 上的 phonegap 项目提供滚动效果。我已经尝试使用[Jquery](http://jquerymobile.com/)、[iscroll4](http://cubiq.org/iscroll-4)和 jquery 包用于 iscroll 但所有这些都有一些问题。在 Android 和 Iphone 触控设备上提供原生滚动效果还有其他更好的选择吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:06:03.363

iScroll4 尽可能接近使用 phonegap 进行的本机滚动，恕我直言。如果性能不佳，请考虑将列表项布局简化到可以接受滚动性能的水平，或者如果可能，找到一种对最终用户有意义的方法来限制用于每个列表的数据集。如果 iScroll4 的性能对于您的应用程序仍然不够好，您可能需要考虑为每个平台开发原生应用程序。

# ruby-on-rails - Carrierwave 多文件（照片）上传

> ID：10598208
> 
> 赞同：5
> 
> 时间：2012-05-15T09:51:15.267
> 
> 标签：ruby-on-rails, carrierwave, multifile-uploader

我有 Ruby on Rails 应用程序，我使用 Carrierwave 上传我的图像，但我需要一次上传多个图像。我找到了一些 jQuery 插件（uploadify、image-uplad），但我不知道如何在我的应用程序中实现它。我不需要一个巨大的应用程序/引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:55:37.207

检查它： http: [//lucapette.com/rails/multiple-files-upload-with-carrierwave-and-nested_form/](http://lucapette.com/rails/multiple-files-upload-with-carrierwave-and-nested_form/)

[使用 Carrierwave (HTML5) 一次将多个文件上传到 Rails 应用程序](https://stackoverflow.com/questions/6447278/uploading-multiple-files-at-once-to-rails-app-with-carrierwave-html5)

# java - 仅当存在时才包含 Maven 依赖项

> ID：10598211
> 
> 赞同：2
> 
> 时间：2012-05-15T09:51:20.853
> 
> 标签：java, maven

我有一个问题，我有一个基于包含模块的系统的项目。此模块是其他 maven 项目，并从系统 POM 中引用。我的问题是我与同事共享系统项目，我们有不同的模块。

那么，有没有办法告诉 Maven，只有当这个模块存在时，我才想在我的 POM 中包含一个引用的模块？我的意思是，没有编译失败。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:57:07.457

我建议使用[配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)`file/exists`并在选项上激活它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:21:59.357

有几种解决方案，具体取决于您可以做什么/想要实现什么。

一种方法是在您的公司（在您的本地 LAN 或您和您的同事共享的 LAN 中）安装一个 Maven 存储库服务器。构建系统，然后将模块[部署](http://maven.apache.org/plugins/maven-deploy-plugin/)到服务器。

在您的构建中，您可以像这样添加这个新服务器（[文档](http://maven.apache.org/guides/introduction/introduction-to-repositories.html)）：

```
<project>
  ...
  <repositories>
    <repository>
      <id>my-internal-site</id>
      <url>http://myserver/repo</url>
    </repository>
  </repositories>
  ...
</project> 
```

或者您可以同时复制基本系统并使用`mvn install`. 这会将所有工件复制到本地缓存中。

从那里，您可以照常引用它们。您不需要包含所有模块；只是你真正需要的。这样，您和您的朋友就不必使用相同的依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:55:15.043

使用dependencyManagementis 将所有依赖信息拉到一个通用的POM 文件中，简化子POM 文件中的引用。

# android - 在 Android 的 cordova-1.7 上不显示启动图像

> ID：10598215
> 
> 赞同：0
> 
> 时间：2012-05-15T09:51:42.083
> 
> 标签：android, cordova, splash-screen

我在现有的 Android 项目上将 cordova 从 1.6.0 升级到了 1.7.0，此后该应用程序的启动图像就没有显示出来。

我通过交换cordova.jar 和cordoba.js 升级了项目。初始图像 (splash.png) 分别位于 res/drawable-hdpi、res/drawable-ldpi 和 res/drawable-mdpi 下，它们在 Activity 的 onCreate() 中进行配置，如下所示。

```
super.setIntegerProperty("splashscreen", R.drawable.splash); 
```

什么可以被认为是原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:14:09.197

嗨，您是否提供了时间间隔。请检查语法

```
super.loadUrl("file:///android_asset/www/your1stpage.html",3000/*time interval*/);
super.setIntegerProperty("splashscreen", R.drawable.splash2x); 
```

试试看，你提供的信息不完整，所以如果问题重复，请发布一些代码

# php - Wordpress API：添加超级用户（站点管理员）

> ID：10598216
> 
> 赞同：1
> 
> 时间：2012-05-15T09:51:46.957
> 
> 标签：php, wordpress

我可以像这样添加管理员：

```
$password = wp_generate_password();
$userData = array(
    'user_pass'     => $password,
    'user_login'    => $email,
    'user_nicename' => sanitize_title($name),
    'user_email'    => $email,
    'display_name'  => $name,
    'role'      => 'administrator'
);
$user_id = wp_insert_user($userData); 
```

效果很好，但是如何添加超级用户？角色名称是什么？

我尝试了“角色”=>“超级用户”、“超级用户”、“超级用户”……但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-22T17:26:56.810

其他答案基本正确，但最好尽可能使用 WordPress 的内置函数。您正在寻找的功能是[`grant_super_admin()`](http://wpseek.com/grant_super_admin/).

根据您的示例代码：

```
$password = wp_generate_password();
$userData = array(
    'user_pass'     => $password,
    'user_login'    => $email,
    'user_nicename' => sanitize_title($name),
    'user_email'    => $email,
    'display_name'  => $name,
    'role'          => 'administrator'
);
$user_id = wp_insert_user($userData);

// Make the user a super admin.
grant_super_admin( $user_id ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:03:06.440

我快速浏览了 WordPress 代码，我相信您正在寻找的选项实际上是“site_admin”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:15:28.937

没有这样的角色。

如您在函数中所见，超级管理员存储为站点选项`get_super_admins`。`is_super_admin`检查用户的登录是否在前一个函数返回的数组中。

通常这只是登录名为 admin 的用户。你需要做的是

```
$admins = get_super_admins();
$admins[] = 'your_user_login@example.com';
update_site_option('site_admins', $admins); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:12:52.030

这看起来像是在工作：

1) 将用户角色设置为“site_admin”

2）为每个博客添加用户为管理员

```
$blogs = get_blog_list(0, 'all');
foreach ($blogs as $blog)
{
    add_user_to_blog($blog['blog_id'], $user_id, 'administrator');
} 
```

3）[正如亚历克斯所说](https://stackoverflow.com/a/10598578/956397)，添加到site_admins：

```
$admins = get_super_admins();
if (!in_array($email, $admins))
{
    $admins[] = $email;
    update_site_option('site_admins', $admins);
} 
```

# php - 在php中创建具有相同命名空间的多个xml节点

> ID：10598220
> 
> 赞同：0
> 
> 时间：2012-05-15T09:52:09.700
> 
> 标签：php, xml, domdocument, xml-namespaces

我有以下代码

```
 $dom = new DOMDocument('1.0', 'utf-8');        
    $headerNS = $dom->createElementNS('http://somenamespace', 'ttauth:authHeader');
    $accesuser = $dom->createElementNS('http://somenamespace', 'ttauth:Accessuser','aassdd');
    $accesscode = $dom->createElementNS('http://somenamespace', 'ttauth:Accesscode','aassdd');
    $headerNS->appendChild($accesuser);
    $headerNS->appendChild($accesscode);

    echo "<pre>";
    echo ($dom->saveXML($headerNS));
    echo "</pre>"; 
```

IT 将生成以下 xml 作为输出

```
<?xml version="1.0" ?>
<ttauth:authHeader xmlns:ttauth="http://somenamespace">
<ttauth:Accessuser>
    ApiUserFor136
</ttauth:Accessuser>
<ttauth:Accesscode>
    test1234
</ttauth:Accesscode>
</ttauth:authHeader> 
```

但我想要以下输出

```
<ttauth:authHeader xmlns:ttauth="http://somenamespace">

  <ttauth:Accessuser xmlns:ttauth="http://somenamespace">
    aassdd
  </ttauth:Accessuser>

  <ttauth:Accesscode xmlns:ttauth="somenamespace">
    aassdd
  </ttauth:Accesscode>

</ttauth:authHeader> 
```

看到**xmlns 不包含在根元素以外的元素中，但我希望 xmlns 包含在所有元素**中我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:02:35.100

PHP 解析器可能不会添加具有相同前缀“ttauth”的相同命名空间“http://somenamespace”的重命名，因为它是多余的。您显示的两个 xml（输出和预期）是等效的。如果您想确保拥有所需的命名空间属性，您应该使用 addAtribute - [http://www.php.net/manual/en/domdocument.createattribute.php](http://www.php.net/manual/en/domdocument.createattribute.php)手动添加它们。请参阅以下代码片段：

```
$domAttribute = $domDocument->createAttribute('xmlns:ttauth');
$domAttribute->value = 'http://somenamespace';
$accessuser->appendChild($domAttribute); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:53:57.323

而不是使用

```
$accesuser = $dom->createElementNS('http://somenamespace', 'ttauth:Accessuser','aassdd'); 
```

我用了

```
$accesuser = $dom->createElement('http://somenamespace', 'ttauth:Accessuser','aassdd'); 
```

进而

```
$accesuser->setAttribute('xmlns:ttauth', ('http://somenamespace'); 
```

它适用于任意数量的节点

# c - 将用户输入字符串与宏名称进行比较

> ID：10598222
> 
> 赞同：0
> 
> 时间：2012-05-15T09:52:17.877
> 
> 标签：c, database, string, macros, string-comparison

我正在尝试制作一个查找表。这是借口：

假设，以下是某些宏的定义列表。

```
#define ENTITY1 0x10001001
#define ENTITY2 0x10001002
.
.
. 
```

ENTITY_ 是其他无符号长整数类型值的用户可读字符串值，并且可以有任意数量的宏（比如大于 200，甚至 500）。

现在，有一个列表可以跟踪哪个实体存在于哪个文件编号中。像这样的东西：

```
 0x10001001 1
 0x10001002 2
 0x10001003 3
 .
 .
 . 
```

由于专有约定，必须为每个实体使用长无符号整数。

第一个列表已经存在，第二个列表需要通过程序在用户输入记录时使用第一个列表的#defines 中的宏字符串生成。由于此类条目的数量非常多，因此对每个值进行硬编码是一项繁重的任务。此外，如果第一个列表被更新，如果没有编码额外的 switch case，第二个列表将不会正确更新。

当用户输入一个条目时，他通过一个字符串变量告诉该条目将在 ENTITY3 中输入，系统应该查找名称为 ENTITY3 的宏是否存在。如果是，则打开编号为 3 的文件并进行必要的处理，否则，显示该条目不存在的警告。

那么，如何在不使用 SWITCH CASE 的情况下将用户输入的字符串变量与宏名称进行比较？

我正在使用 C 编程。GNU C 库。

* * *

编辑：这是场景。

名为 ENTITYn 的不同实体（n 可以是任意数字）可以存在于具有特定整数 1、2、3 的不同文件中......但是，专有环境已经建立了这些实体，以便使用某些无符号长识别它们整数，如 0x01001001 等。对于每个实体，宏已在与这些实体对应的一些头文件中定义，名称为 ENTITY1 ENTITY2... 现在，当某个经理想要更改某些内容或向特定实体输入某些数据时，他将使用名称 ENTITYn 来寻址，并且程序将在查找表中查找相应的条目。如果找到匹配项，它将使用该实体的无符号长整数代码进行专有系统内部的后续处理，

我需要用实体的无符号长整数及其对应位置填充第二个表（现在让它们都在一个文件 1 中）。我想规避这样的条件，即制作 LUT 的人必须知道相应的实体无符号长整数代码。该程序使用输入字符串即ENTITY1 并直接对其进行映射。

但现在我开始认为对 LUT 进行硬编码会是更好的选择。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:06:28.697

C 程序中不存在宏名称。预处理器已将宏名称的每个实例替换为其替换值。如果我正确理解您的问题，您可能需要某种查找表，例如：

```
#define ENTITY1 0x10001001
#define ENTITY2 0x10001002
#define STR(x) #x

struct lookup { char *name; unsigned value; } ;
struct lookup mylut[] = {
{ STR(ENTITY1), ENTITY1 }
, { STR(ENTITY2), ENTITY2 }
}; 
```

预处理器会将其扩展为：

```
struct lookup { char *name; unsigned value; } ;
struct lookup mylut[] = {
{ "ENTITY1", 0x10001001 }
, { "ENTITY2", 0x10001002 }
}; 
```

，您可以使用它来查找字符串文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:04:32.657

> 那么，如何将用户输入的字符串变量与宏名称进行比较呢？

你不能。宏仅在编译时存在（从技术上讲，仅在预处理时存在，这发生在编译时之前）。

在确定我正确理解您的情况之前，我不会提出解决方案（请参阅上面的评论）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:06:33.427

宏是预处理器功能，它们对 C 编译器不可见。所以你不能直接从代码中引用宏的“值”。

如果我正确理解，您似乎需要两个查找表：

1.  一个表将字符串（例如`ENTITY1`to）映射到唯一的无符号整数，例如`0x10001001`.
2.  一个表将一个无符号整数映射`0x10001001`到一个“文件号”，它看起来像一个（小）无符号整数，例如`1`.

这两个表都可以通过处理您似乎拥有的源代码来生成。我建议将`ENTITYn`字符串收集成这样的东西：

```
struct entity_info
{
  const char *name;
  unsigned int key;
}; 
```

然后让你的预处理代码构建一个排序数组：

```
const struct entity_info entities[] = {
{ "ENTITY1", 0x10001001 },
{ "ENTITY2", 0x10001002 },
/* and so on */
}; 
```

现在你可以像这样实现一个高效的函数：

```
unsigned int get_entity_key(const char *entity_name); 
```

它也许可以在内部使用二进制搜索。

然后你需要做第二步，很明显。我不确定这些值的确切细节（它们如何以及何时可以更改）；如果给定实体的“文件编号”是常数，它当然可以直接添加到`entity_info`结构中。

# windows - 不同 DLL 的通用运行时

> ID：10598223
> 
> 赞同：0
> 
> 时间：2012-05-15T09:52:17.923
> 
> 标签：windows, dll, runtime, msvcrt

我需要构建一个能够在运行时加载其他 DLL 的 DLL；这些其他 DLL 与主 DLL（这是 Python 和扩展）具有相当密切的关系，因此它们必须具有公共运行时。主 DLL*必须*是可以简单地复制到目标机器上的单个文件。辅助 DLL 将放置在不同的目录中。

所以：“通用运行时”意味着没有静态链接；“单个文件 + 简单副本”排除了共享的 MS 可再发行文件，尤其是与“不同目录”结合使用时。

我只看到以下选项：将所有 DLL 链接到`msvcrt.dll`; 将 current 嵌入`msvcrtXX`到主 DLL 中并重新导出其所有符号；使用`msvcrtXX`主机应用程序的。对我来说，第一个看起来最简单，因为它是一种常见的需求，并且有很多网页解释了如何去做。你会如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:00:57.387

我建议您重新架构，以便您的插件 DLL（主机应用程序显式加载的那个）只包含代理函数和文件管理逻辑。此 DLL 可以使用静态运行时，或根本不使用运行时。

将实际功能（尤其是所有需要与 Python 扩展共享运行时的代码）放在单独的（“主”）DLL 中，并将此 DLL 以及您选择的运行时放在与Python 扩展。

主 DLL 和运行时可以与核心扩展一起压缩到插件 DLL。（我*认为*这在运行时的可再发行许可范围内，因为它与大多数安装程序的工作方式基本相同，但您应该自己检查。）

由于必须通过代理 DLL，因此对插件的调用效率会稍低一些，但性能差异可能无法测量。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:50:15.903

另一种选择（在我看来，更好）是动态链接 - 也就是。LoadLibrary/GetProcAddress) main 启动时的依赖项。这将允许您支持缺少 DLL 的情况和/或支持您自己的内部版本方案。

# erlang - 我在这个模块代码中出错的地方

> ID：10598226
> 
> 赞同：1
> 
> 时间：2012-05-15T09:52:21.567
> 
> 标签：erlang

我用下面的代码创建了一个模块

```
 -module('calc') .
 -export([sum/2]) . (0)

 sum(L) -> sum(L,0);   (1)
 sum([],N) -> N;   (2)
 sum([H|T], N) -> sum(T, H + N) (3) . 
```

在 shell 中，当我编译时它返回如下错误

```
 calc.erl:5: head mismatch
 calc.erl:2: function sum/2 undefined
 error 
```

根据我对书中的理解，1 子句将收到列表并将其传递给 (3)。然后（3）将返回所需的结果。
但我不知道我在哪里犯了错误。请帮助我。

`And please help me to understand what is /2 in export statement.`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T10:14:37.477

第 (1) 行有语法错误。函数 sum/1 和 sum/2 不同，因此您的代码应如下所示：

```
sum(L) -> sum(L,0). %% notice the . instead of ;

sum([],N) -> N;
sum([H|T], N) -> sum(T, H + N). 
```

/2 是你的**函数**的数量，即它需要的参数数量。因此，在您的情况下，您要导出的函数是 sum/1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:04:55.080

检查此链接

[在 Erlang 中编写一个计算列表中整数和的函数](https://stackoverflow.com/questions/7408454/write-a-function-that-calculate-the-sum-of-integers-in-a-list-in-erlang)

导出语句中的 /2 表示函数 sum 的参数数量。

# c# - c# 从数据库中获取当前周出现的所有日期

> ID：10598228
> 
> 赞同：0
> 
> 时间：2012-05-15T09:52:34.257
> 
> 标签：c#, linq-to-sql

试图从数据库中获取本周内的所有日期

我有 email1DueDate、email2DueDate、email3DueDate

我想看看它们是否会在本周内发送

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T09:59:18.467

首先，您应该计算一周开始和一周结束的两个 DateTime 值，您可以这样做（假设星期一是第一天）：

```
DateTime startOfWeek = DateTime.Today;
int delta = DayOfWeek.Monday - startOfWeek.DayOfWeek;
startOfWeek = startOfWeek.AddDays(delta);

DateTime endOfWeek = startOfWeek.AddDays(7); 
```

接下来，您可以在 LINQ 查询中使用它来获得所需的结果，我假设您希望结果是您的任何截止日期都在一周内的行：

```
var results = DB.Table.Where(x =>
    (x.email1DueDate >= startOfWeek && x.email1DueDate < endOfWeek) ||
    (x.email2DueDate >= startOfWeek && x.email2DueDate < endOfWeek) ||
    (x.email3DueDate >= startOfWeek && x.email3DueDate < endOfWeek)
    ); 
```

如果这不是您所需要的，那么您需要澄清您的要求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:59:39.767

LINQ

```
listOfDates.Where(x => x.email1DueDate > beginOfWeekDate && x.email1DueDate < endOfWeekDate).ToList(); 
```

当然，您仍然需要弄清楚开始和结束日期

# c# - 列表框控件的 SortedOrder 枚举

> ID：10598229
> 
> 赞同：0
> 
> 时间：2012-05-15T09:52:43.023
> 
> 标签：c#, enums

我有一个包含以下内容的枚举（例如）：

```
clmn=543, 
tclk=432,   , 
tolf=876, 
frol=654 
```

我必须按排序顺序将此枚举键绑定到 ListBox 控件的 ItemsSource 属性。枚举应该按值排序。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:39:16.830

此代码获取 MyEnum 的值并对它们进行排序，希望对您有所帮助。

```
var values = typeof(MyEnum).GetEnumValues();
Array.Sort(values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:09:19.810

```
MemberInfo[] memberInfos = typeof(MyEnum)
                          .GetMembers(BindingFlags.Public | BindingFlags.Static);

mylistBox.ItemSource =  memberInfos.Select(x => x.Name).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:11:49.417

'对枚举进行排序的代码：

```
 public static SortedList<int, string> GetEnumDataSource<T>()
    {
        Type myEnumType = typeof(T);
        SortedList<int, string> returnCollection = new SortedList<int, string>();
        try
        {
            if (myEnumType.BaseType == typeof(Enum))
            {
                string[] enumNames = Enum.GetNames(myEnumType);
                int enumLength = enumNames.Length - 1;
                for (int i = 0; i <= enumLength; i++)
                {
                    returnCollection.Add(Convert.ToInt32(Enum.Parse(myEnumType, enumNames[i])), enumNames[i]);
                }
            }
        }
        catch (Exception exception1)
        {

            return null;
        }
        return returnCollection;
    } 
```

'将枚举绑定到下拉列表框的代码：

```
public void BindBox()
{
    SortedList<int, string> phoneTypes = null;
    phoneTypes = GetEnumDataSource<PhoneNumberType>();

    if ((phoneTypes != null)) {
        dropdownctrl.DataSource = phoneTypes;
        dropdownctrl.DataValueField = "Key";
        dropdownctrl.DataTextField = "Value";
        dropdownctrl.DataBind();
    }
} 
```

# wif - WIF、联合会和 STS

> ID：10598232
> 
> 赞同：1
> 
> 时间：2012-05-15T09:53:06.613
> 
> 标签：wif, federation

为了准备我的应用程序以使用 ADFS，我必须与联邦合作，现在我们有一个解决方案，该服务器具有使用 WIF 的联合服务以确保安全，有一个客户端使用此服务，我们有一个使用用户名密码的 STS 用于识别用户。

一切正常，我的所有声明都正确生成，我可以在我的应用程序中使用它们。

现在除了我们的 Internal IdentityProvider 之外，我们还必须使用 ADFS，我只需将我的 sts 分成两部分，一个由客户端调用并由服务器信任的“联合提供程序”，以及一个负责身份验证的部分为此我只是添加在 FederationProvider 中的 CustomSecurityTokenHandler 中的以下代码

```
UserNameSecurityToken userNameTokenFromRP = token as UserNameSecurityToken;
WSTrustChannelFactory stsClient = new WSTrustChannelFactory("IdentityConfiguration");
stsClient.Credentials.UserName.UserName = userNameTokenFromRP.UserName;
stsClient.Credentials.UserName.Password = userNameTokenFromRP.Password;

IWSTrustChannelContract stsProxy = stsClient.CreateChannel();
RequestSecurityToken rst = new RequestSecurityToken(WSTrust13Constants.RequestTypes.Issue, WSTrust13Constants.KeyTypes.Symmetric);
rst.AppliesTo = new System.ServiceModel.EndpointAddress("http://localhost:8010/FederationProvider.svc");
rst.Claims.Add(new RequestClaim("http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name", false));
rst.Issuer = new System.ServiceModel.EndpointAddress("http://localhost:8020/IdentityProvider.svc");
rst.Lifetime = new Lifetime(DateTime.Now, DateTime.Now + new TimeSpan(0, 30, 0));
rst.TokenType = Microsoft.IdentityModel.Tokens.SecurityTokenTypes.OasisWssSaml11TokenProfile11;
RequestSecurityTokenResponse rstr;
var stsToken = stsProxy.Issue(rst, out rstr); 
```

这在我的 Web.config 文件中：

```
<client>
  <endpoint name="IdentityConfiguration" address="http://localhost:8020/IdentityProvider.svc"
    binding="ws2007HttpBinding" bindingConfiguration="SecurityTokenBinding"
    contract="Microsoft.IdentityModel.Protocols.WSTrust.IWSTrustChannelContract">
    <identity>
      <certificate encodedValue="MyEncodedValue" />
    </identity>
  </endpoint>
</client> 
```

在身份方面，我继续以与之前相同的方式生成声明我遇到的问题是在我的 RSTR 中，令牌为空并且 tokenXML 已加密，我不明白在这种情况下如何使用联合？

如果有人可以帮助我？

谢谢你读我

安格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:08:49.303

最后，我明白缺少什么

我必须创建一个安全令牌处理程序和一个令牌解析器

```
 GenericXmlSecurityToken augmentedToken = (GenericXmlSecurityToken) stsToken;
            var tokenReader = new StringReader(augmentedToken.TokenXml.OuterXml);
            var reader = XmlReader.Create(tokenReader);

            SecurityTokenHandlerCollection handlers = SecurityTokenHandlerCollection.CreateDefaultSecurityTokenHandlerCollection();
            X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
            store.Open(OpenFlags.ReadOnly);
            X509Certificate2Collection certificates = store.Certificates;
            X509Certificate2 certificate = certificates.Find(X509FindType.FindByThumbprint, "MyThumbprint", true)[0];

            List<SecurityToken> serviceTokens = new List<SecurityToken>();
            serviceTokens.Add(new X509SecurityToken(certificate));
            SecurityTokenResolver serviceResolver = SecurityTokenResolver.CreateDefaultSecurityTokenResolver(serviceTokens.AsReadOnly(), false);
            handlers.Configuration.ServiceTokenResolver = serviceResolver;
            handlers.Configuration.AudienceRestriction.AllowedAudienceUris.
            Add(new Uri("http://localhost:8010/FederationProvider.svc"));
            var registry = new ConfigurationBasedIssuerNameRegistry();
            registry.AddTrustedIssuer("Thumbprint", "http://localhost:8020/IdentityProvider.svc");
            handlers.Configuration.IssuerNameRegistry = registry;

            var samlToken = handlers.ReadToken(reader);
            IClaimsIdentity identity = handlers.ValidateToken(samlToken)[0]; 
```

它工作正常，代码来自 [alexthissen](http://www.alexthissen.nl/blogs/main/archive/2011/07/18/using-active-profile-for.aspx)

# nginx - nginx server_name 顺序重写规则

> ID：10598234
> 
> 赞同：0
> 
> 时间：2012-05-15T09:53:32.540
> 
> 标签：nginx, rewrite

我正在使用`server`和玩弄 nginx 重写规则`server_name`。关于优先顺序，[文档](http://wiki.nginx.org/HttpCoreModule#server_name)听起来很简单和清楚，但我得到了一些有点奇怪的行为，并想检查我是否遗漏了任何东西。

我正在尝试将除`www.domain.com`（例如`www.domain.net`，`www.domain.info`）以外的任何内容重定向到`www.domain.com`. 除了`www.domain.de`重定向到`www.domain.com/de`.

我有以下规则：

```
server {
   server_name domain.de www.domain.de;
   rewrite ^(.*) http://www.domain.com/de$1 permanent;
}

server {
   server_name _;
   rewrite ^(.*) http://www.domain.com$1 permanent;
}

server {
   listen 80;
   server_name localhost domain.com www.domain.com;
   ...
} 
```

但是，似乎使用此规则集，它将始终将*所有*非`.com`域重定向到`www.domain.com/de`. 而如果我翻转前两个`server`部分，它工作正常。

难道我做错了什么？如果明确指定服务器名称，为什么规则的顺序很重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:31:00.093

用来`server_name _;`表示“这是默认服务器”是一个常见的错误。它没有特殊含义，您需要使用`default_server`listen 指令上的标志将第二个服务器标记为默认值：

```
server {
  listen 80 default_server;
  server_name _;
  rewrite ^ http://www.domain.com$request_uri? permanent;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:02:31.767

正确的配置是：

```
server {
   listen 80;
   server_name domain.de www.domain.de;
   return 301 http://www.domain.com/de$request_uri;
}

server {
   listen 80 default_server;
   server_name _;
   return 301 http://www.domain.com$request_uri;
}

server {
   listen 80;
   server_name "" localhost domain.com www.domain.com;
   ...
} 
```

`server_name _;`只是一个流行的存根。server_name 指令的默认值是“”，它处理没有“Host”标头的请求。如果客户端根本不发送它，那么`server_name ""`将导致像您这样的配置中的重定向循环。

请看一下：

*   [http://nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)
*   [http://nginx.org/en/docs/http/server_names.html](http://nginx.org/en/docs/http/server_names.html)
*   [http://nginx.org/en/docs/http/converting_rewrite_rules.html](http://nginx.org/en/docs/http/converting_rewrite_rules.html)

# java - 使用 DBUnit 在数据库中断言更新数据的好策略是什么？

> ID：10598243
> 
> 赞同：6
> 
> 时间：2012-05-15T09:54:19.693
> 
> 标签：java, unit-testing, dbunit

这里有一些（过度）简化的代码示例来描述我的单元测试方法。

## 公司数据集.xml

```
<dataset>
    <company company_key="100" company_name="OldName" />
</dataset> 
```

## CompanyDaoTest.java

```
@Test
public void testUpdateCompany() {
  CompanyDao companyDao = new CompanyDao();
  IDatabaseConnection dbConn = createConnection();

  IDataSet dataSet = createDataSet("CompanyDataSet.xml");
  DatabaseOperation.CLEAN_INSERT.execute(dbConn, dataSet);

  companyDao.updateCompany(100, "NewName");

  // What is a good way to assert updated company data ?
} 
```

* * *

我想出了两种断言公司数据的方法。

**创建另一个数据集 xml 作为预期的数据集。**

另一个 XML

```
<dataset>
    <company company_key="100" company_name="NewName" />
</dataset> 
```

Java中的断言部分

```
IDataSet actual = dbConn.createDataSet(new String[]{"company"});
IDataSet expected = createDataSet("CompanyDataSet_expected.xml");

Assertion.assertEquals(expected, actual); 
```

**只需通过 DAO 加载公司对象，并比较属性。**

你应该明白了。

* * *

## 我的问题

第一种方法很容易编写，但我必须为每种不同的更新方法创建另一个 XML 文件。创建这么多数据集 XML 文件听起来不是一个好主意。

第二种方法很简单，但是，当有不同的更新方法时，测试类将填充以不同值断言不同属性的方法。如果加载方法有问题，很多测试都会中断。

有没有断言数据的好方法？是否有可能避免我刚刚描述的问题（或者它并不重要）？

## 更新

由于没有人回答这个问题，我决定接受我的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:27:34.817

我在测试数据库方面苦苦挣扎了很长时间，我在几篇博文中整理了我的想法：

*   [测试不可能：经验法则](http://darkviews.blogspot.com/2008/11/testing-impossible-rules-of-thumb.html)
*   [使用数据库进行测试](http://darkviews.blogspot.com/2008/07/testing-with-databases.html)
*   [我所有与测试相关的博客文章](http://darkviews.blogspot.com/search/label/Testing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:11:02.133

这是另一种断言数据的方法。

由于我已经拥有`IDataSet`包含数据库当前数据的实际数据。我可以简单地从中检索数据。

我使用有问题的示例，这就是我所做的

```
@Test
public void testUpdateCompany() {
  CompanyDao companyDao = new CompanyDao();
  IDatabaseConnection dbConn = createConnection();

  IDataSet dataSet = createDataSet("CompanyDataSet.xml");
  DatabaseOperation.CLEAN_INSERT.execute(dbConn, dataSet);

  companyDao.updateCompany(100, "NewName");

  IDataSet actual = dbConn.createDataSet(new String[]{"company"});
  ITable companyTable = actual.getTable("company");

  assertEquals("NewName", companyTable.getValue(0, "company_name"));
} 
```

如果有很多属性要检查，这有点冗长，~~但它应该很容易处理~~

* * *

## 更新

虽然这种方式可以解决问题，但测试不会再结合无关的方法了。但是，在维护方面，前两种方式的开销实际上是相同的，甚至更糟。因为我必须在 java 代码中写列名（很多），并且没有办法验证这一点。

我们的团队决定尽可能使用数据集来断言数据。主要原因是我们希望让我们的测试数据尽可能小，并且易于断言。

所以问题的答案将是**使用数据集**

但是，也会有一些缺点，我们现在是这样处理的：

1.  组织 XML 文件：

    位置：数据集 XML 文件将位于测试类的同一包中。

    命名：XML 文件将以测试类名称开头，并在必要时添加方法/状态名称。例如：“companyDao-updateCompany-expected.xml”

2.  使 XML 与数据库同步。

    我们将使用[直到](http://www.unitils.org/)从[数据库动态生成 DTD 文件](http://www.unitils.org/tutorial-dbmaintain.html)，并使用它来验证 XML。我们很少更改列名，因此开销应该很低。

# html - Delphi中的HTML特殊字符转换

> ID：10598247
> 
> 赞同：2
> 
> 时间：2012-05-15T09:54:23.513
> 
> 标签：html, delphi, freepascal, character-encoding

> **可能重复：**
> [delphi html解码](https://stackoverflow.com/questions/1657105/delphi-html-decode)

有谁知道在哪里可以找到 Delphi 或 Freepascal 库来解码 HTML 中的特殊字符，以 HTML 实体（十进制、十六进制或名称）编码？

前任。O; 转换为 À

# java - 如何将字符串xml转换为地图

> ID：10598250
> 
> 赞同：2
> 
> 时间：2012-05-15T09:54:58.157
> 
> 标签：java, xml, map

如何将 xml 的元素和属性的所有值转换为字符串映射？是否有一些图书馆可以做到这一点？我找到了库 xStream 但我不知道如何配置它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T11:28:41.960

我只是想要这个：

```
public static Map<String, String> convertNodesFromXml(String xml) throws Exception {

    InputStream is = new ByteArrayInputStream(xml.getBytes());
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setNamespaceAware(true);
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document document = db.parse(is);
    return createMap(document.getDocumentElement());
}

public static Map<String, String> createMap(Node node) {
    Map<String, String> map = new HashMap<String, String>();
    NodeList nodeList = node.getChildNodes();
    for (int i = 0; i < nodeList.getLength(); i++) {
        Node currentNode = nodeList.item(i);
        if (currentNode.hasAttributes()) {
            for (int j = 0; j < currentNode.getAttributes().getLength(); j++) {
                Node item = currentNode.getAttributes().item(i);
                map.put(item.getNodeName(), item.getTextContent());
            }
        }
        if (node.getFirstChild() != null && node.getFirstChild().getNodeType() == Node.ELEMENT_NODE) {
            map.putAll(createMap(currentNode));
        } else if (node.getFirstChild().getNodeType() == Node.TEXT_NODE) {
            map.put(node.getLocalName(), node.getTextContent());
        }
    }
    return map;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-24T01:18:38.880

[Underscore-java](https://github.com/javadev/underscore-java)库可以将 HashMap 转换为 xml，反之亦然。

```
import com.github.underscore.U;
import java.util.*;

public class Main {

    public static void main(String[] args) {

        Map<String, Object> map = new LinkedHashMap<String, Object>();
        map.put("name", "chris");
        map.put("island", "faranga");

        System.out.println(U.toXml(map));

        Map<String, Object> newMap = U.fromXmlMap(U.toXml(map));

        System.out.println(newMap.get("name"));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:27:06.057

试试下面的代码：

```
try {
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document doc = db.parse("C://logs//XML.xml");
    NodeList nodeList = doc.getChildNodes();
    for (int i = 0; i < nodeList.getLength(); i++) {
        Node textChild = nodeList.item(i);
        NodeList childNodes = textChild.getChildNodes();
        for (int j = 0; j < childNodes.getLength(); j++) {
            Node grantChild = childNodes.item(j);
            NodeList grantChildNodes = grantChild.getChildNodes();
            for (int k = 0; k < grantChildNodes.getLength(); k++) {
                if(!StrUtl.isEmptyTrimmed( grantChildNodes.item(k).getTextContent() ) ) {
                    Map<String, String> map = new HashMap<String, String>();
                            map.put(grantChildNodes.item(k).getNodeName() , grantChildNodes.item(k).getTextContent());
                            System.out.println(map);
                }
            }
        }
    }
}catch (Exception e){
        e.printStackTrace();
} 
```

# c++ - 从 Char 数组中删除前两个字符

> ID：10598252
> 
> 赞同：0
> 
> 时间：2012-05-15T09:55:04.970
> 
> 标签：c++, arrays, char

我无法从我的 char 数组中删除前两个字符。

```
 input[MAXSIZE] = "./hello";

 for(int i = 2; i < MAXSIZE; i+=2)
 {
    strcpy(input[i-2],input[i]);
 } 
```

我收到以下错误：

```
 invalid conversion from ‘char’ to ‘char*’
 initializing argument 1 of ‘char* strcpy(char*, const char*)’
 invalid conversion from ‘char’ to ‘const char*’
 initializing argument 2 of ‘char* strcpy(char*, const char*)’ 
```

我知道这是一个非常基本的问题，但我对此相当陌生。此外，如果有更简单的方法来解决这个问题，请随时教育我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:56:15.357

`strcpy`复制以空字符结尾的字符数组，而不是字符。

你想要的是：

```
input[i-2] = input[i]; 
```

另外，你为什么不增加`i`with `1`but with `2`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:57:57.543

正如其他人所说，`strcpy`并不意味着那样使用，您可以通过

```
// loop step changed to 1; i += 2 is a mistake
for(int i = 2; i < MAXSIZE; ++i)
{
    input[i-2] = input[i];
} 
```

但是，您也可以简单地使用[`memmove`](http://www.cplusplus.com/reference/clibrary/cstring/memmove/)：

```
memmove(input, input + 2, (MAXSIZE - 2) / sizeof(input[0])); 
```

如果`input`保证是数组，`char`您也可以删除该`/ sizeof(input[0])`部分。

当然**更好**的方法是使用标准库的方式，使用[`std::copy_backward`](http://www.cplusplus.com/reference/algorithm/copy_backward/)（必要的，因为源和目标范围重叠）：

```
#include <algorithm>
std::copy_backward(input + 2, input + MAXSIZE, input + MAXSIZE - 2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:13:41.150

作为替代解决方案，您可以简单地使用指向 char 的指针来“跳过”数组中的前两个字符：

```
char input[MAXSIZE] = {0};
snprintf_s<MAXSIZE>(input, _TRUNCATE, "./hello" ); //MSVC only
char* noDotSlash = input + 2;
cout << noDotSlash << endl; //should print just hello. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T09:57:57.210

`strcpy`必须用于 char 数组而不是字符！

还要查看这个 Que [c 删除数组的第一个字符](https://stackoverflow.com/questions/5711490/c-remove-the-first-character-of-an-array)

# algorithm - R中的回溯线搜索

> ID：10598257
> 
> 赞同：-2
> 
> 时间：2012-05-15T09:55:24.007
> 
> 标签：algorithm, r, backtracking

为什么回溯（减半）行搜索失败？实际上，有时在我的 R 代码中，我有一个上升方向和步长 $t = 1e-21$，这意味着错误：行搜索失败（tol=1e-10）并且我选择了 alpha=0.3 和 beta=0.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:21:11.217

我要做一个疯狂的猜测，并说由于浮点舍入，你不能可靠地使步数变得那么小。

但我真的不知道。除非您按照建议向我们展示什么不起作用，否则其他人也不会这样做。

# hibernate - 如何使用会话策略来管理事务

> ID：10598259
> 
> 赞同：0
> 
> 时间：2012-05-15T09:55:27.277
> 
> 标签：hibernate, design-patterns, transactions

如何使用会话每个会话策略来管理跨 EJB 3.1 无状态 BeanManaged Transaction 的事务。

是否可以使用拦截器来管理跨 EJB 的事务？

我们是否需要为所有 EJB 使用相同的拦截器？

我们是否需要 SFSB 来存储断开连接的会话？如果是这样，我们是否需要在 Interceptor 或下一个 EJB 本身中获取会话？

有了这个，我们可以管理仅在会话中的最后一个方法提交的事务，从而维护 ACID 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:02:17.250

我认为您必须选择有状态会话 Bean，将事务配置为在 bean 级别进行管理，在对话的第一个方法中启动事务，然后在注释的方法中关闭它（提交/回滚） @消除。

# git - 带有 3 个分支建议的 git 工作流

> ID：10598262
> 
> 赞同：1
> 
> 时间：2012-05-15T09:55:37.580
> 
> 标签：git, version-control, git-branch, branching-and-merging

我正在做一个项目，我们试图以最有效的方式（对我们来说）掌握使用 git，并决定创建 2 个分支，供 2 个子团队在主分支旁边工作。

有时我们会提交到 master 如果它是通用的东西应该进入两个分支，然后我们希望在其他两个分支中进行这些更改。

1.  那应该是合并还是变基到其他两个分支？

2.  这是一个疯狂的工作流程吗？如果有，请给点建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:13:17.323

我看不出为两个团队创建两个分支的意义。工作应该根据它的*性质*而不是由谁来工作来分开。

这就是我的建议：

*   使用*功能*分支：你的大部分工作都应该在这些主题分支上，除了微小的提交（例如拼写错误等）。
    当您有需要处理的功能、错误修复或工单时：创建一个分支*feat-something*，并在那里工作。
*   使用*dev*或*release-X*（其中*X*是版本号）分支：当一个*特性*的分支工作完成、测试和工作时，将其变基为*dev*。
*   *永远不要在master*上提交，这个分支只能由首席开发人员、CTO 等重新建立。当您觉得需要时，将*dev*的工作重新设置为*master 。*

这（基本上）是我们在一个非常大的项目上工作的方式。如果您的项目不大 ，您可以在没有*dev分支的情况下工作。*

查看这篇著名的文章，它展示了一个非常出色的工作流程：[一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:06:47.213

这取决于这两个项目是否共享一些共同的东西；如果是这样，那么制作一个单独的库并使用子模块 - 而不是将所有东西都塞进一个仓库中。

否则，我会建议不要使用所描述的方法。这两个分支可能会出现如此大的分歧，以至于合并它们几乎是不可能的。由于`git`是一个分布式系统，所有主要开发都在 master 上进行，因此根据需要根据实现的功能创建分支并经常合并。使用标记来标记重要的开发里程碑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T02:35:05.870

倒车：

2）不，这不是一个疯狂的工作流程。您的子团队成员可能拥有自己的存储库和分支。当子团队有稳定的产品时，他们会将其推送到主存储库中的分支。然后，集成负责人将获取主存储库中子团队分支上的内容，并在适当的情况下合并/变基到主存储库中（正如您所说的要共享的内容）。

1）因此假设子团队 A 和 B 都从 Tag-M1 的 master 分支出来，并且子团队 A 的工作现在又回到了 Tag-M2 的 master 上。与此同时，小队 B 已移至 Tag-B2。你应该变基还是合并到分支-B。我认为您想避免从 Tag-M2 中重新设置分支 B。您的子团队 B 成员正在从分支 B 拉出；当您变基时，您将更改分支 B 上的历史记录，这将使子团队 B 的拉取复杂化。

请注意，从主存储库更新时，您的子团队可能更喜欢“git pull --rebase”。

# iphone - 如何使用按钮开发滚动功能

> ID：10598264
> 
> 赞同：0
> 
> 时间：2012-05-15T09:55:39.090
> 
> 标签：iphone

我正在开发一个应用程序。我正在使用 UIScroll 视图。当我对该滚动视图执行触摸操作时，它将垂直滚动。但我需要使用顶部和底部按钮执行顶部滚动和底部滚动操作。所以请告诉我如何使用该按钮执行此滚动操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:24:36.617

正如其他人所说，这不是真的推荐。不过，有可能...

对于“顶部”按钮，使用以下代码： `[scrollView scrollRectToVisible:CGRectMake(0, 0, 320, 20) animated:YES];`

考虑到滚动视图的高度，对“底部”按钮使用类似的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:08:57.417

而不是放置按钮并在这些按钮上添加滚动功能，只需使用动画向用户闪烁右/左指示图像，以便用户知道比当前页面更多的内容。

# linq-to-xml - 使用 xlinq 折叠列表（使用 Yield 返回）

> ID：10598268
> 
> 赞同：0
> 
> 时间：2012-05-15T09:55:54.777
> 
> 标签：linq-to-xml, yield

我有一个镜头问题...我有一个 xml 文件，我想将其存储在元素列表中。

我想扁平化这个列表，以便遵循另一个数据源给出的另一个模式。

这是一个xml示例

```
 <?xml version="1.0" encoding="utf-8" ?>    
   <Actors>
    <Actor FirstName="Will" LastName="Smith">
      <Movie name="Men in Black" Date="1999"/>
      <Movie name="Wild wild west" Date="1999"/>
      <Movie name="Ali" Date="2002"/>
    </Actor>
    <Actor FirstName="Jason" LastName="Statham">
     <Movie name="The Transporter" Date="2002"/>   
     <Movie name="Revolver" Date="2005"/>
     <Movie name="The Bank Job" Date="2008"/>
     <Movie name="Transporter 3" Date="2008"/>
    </Actor> 
 </Actors> 
```

然后，我创建了一个我的对象

```
public class Actors
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Name { get; set; }
    public string Date { get; set; }
} 
```

现在，我用 xlinq 读取了这个 xml，如下所示：

```
 private static void Read(string fileName)
    {
        XDocument testDoc = XDocument.Load(fileName);
        var reader = from c in testDoc.Root.Elements()
                     select c;

        var list = reader.ToList();

    } 
```

现在我想为每个项目填写一个列表，所有数据（名字、姓氏、姓名、日期）都必须存在。

我认为收益回报必须解决我的问题，但实际上我并不清楚它是如何工作的。（我想实现它）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:29:33.303

我想你只是想要

```
List<Actors> actors = (from movie in XDocument.Load(fileName).Descendants("Movie")
  select new Actors() {
    FirstName = (string)movie.Parent.Attribute("FirstName"),
    LastName = (string)movie.Parent.Attribute("LastName")
    Name = (string)movie.Attribute("name"),
    Date = (string)movie.Attribute("Date")
 }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:40:46.803

使用这个查询

```
var reader = from a in testDoc.Root.Descendants("Actor")
             from m in a.Descendants("Movie")
             select new Actors
             {
                FirstName = a.Attribute("FirstName").Value,
                LastName = a.Attribute("LastName").Value,
                Name = m.Attribute("name").Value,
                Date = m.Attribute("Date").Value
             }; 
```

# c++ - 如何在 Qt 中更改窗口的标题？

> ID：10598269
> 
> 赞同：84
> 
> 时间：2012-05-15T09:56:03.193
> 
> 标签：c++, qt, window, title

如何在 Qt 中更改窗口的标题？（对于`QDialog`和`QMainWindow`。）

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-05-15T09:59:38.653

```
void    QWidget::setWindowTitle ( const QString & ) 
```

编辑：**如果您使用 QtDesigner**，在属性选项卡上，有一个名为***windowTitle***的可编辑属性，可以在 QWidget 部分下找到。属性选项卡通常可以在设计器窗口的右下方找到。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-12-28T19:26:07.983

`.ui`对于新的 Qt 用户来说，这比使用 QT Designer 和文件时看起来更令人困惑。

最初我尝试使用`ui->setWindowTitle`，但那不存在。 `ui`不是 a`QDialog`或 a `QMainWindow`。

的所有者`ui`是`QDialog`or `QMainWindow`，`.ui`只是描述了如何布局。在这种情况下，您将使用：

```
this->setWindowTitle("New Title"); 
```

我希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-11-24T18:28:56.120

我知道这是几年后的事，但我遇到了同样的问题。我找到的解决方案是更改 main.cpp 中的窗口标题。我猜一旦`w.show();`被称为窗口标题就不能再更改了。就我而言，我只是想让标题反映当前目录并且它可以工作。

```
int main(int argc, char *argv[]) 
{
QApplication a(argc, argv);
MainWindow w;
w.setWindowTitle(QDir::currentPath());
w.show();

return a.exec();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-20T01:49:15.437

您还可以在 Qt Designer 中修改**windowTitle属性。**

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2017-05-26T23:38:11.317

```
system("title WhateverYouWantToNameIt"); 
```

# c# - 为什么 `Random` 默认不包含静态的 `Next` 方法？

> ID：10598271
> 
> 赞同：0
> 
> 时间：2012-05-15T09:56:06.387
> 
> 标签：c#, .net, random

> **可能重复：**
> [类 System.Random .. 为什么不是静态的？](https://stackoverflow.com/questions/4933823/class-system-random-why-not-static)

继[“生成的随机数总是相等”](https://stackoverflow.com/questions/10598000/generated-random-numbers-are-always-equal)之后，我想知道；

为什么该类不公开具有可选最小值和最大值`Random`的静态方法？`Next`这听起来可能是一个愚蠢的问题，但根据经验，10 次中有 9 次我想生成一个随机数，而不必明确指定种子？我是否遗漏了一些明显的东西，这是有原因的吗？或者实际上我正在解释一种我尚未发现的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:59:39.690

> 这听起来可能是一个愚蠢的问题，但根据经验，10 次中有 9 次我想生成一个随机数，而不必明确指定种子？

不过，您不应该为此使用静态方法。您应该在*确实*保持状态的事物上使用实例方法。如果您`Random`每次调用时都创建一个新实例，`Next`如果您快速连续多次调用它，最终会得到重复的数字。

您应该将“随机数的来源”视为与任何其他 IMO 一样的依赖项 - 可注入以便可测试。当然，如果你没有使用依赖注入，那么这个论点可能不适用……但是你还有其他问题。

您可能需要每个线程一个实例`Random`，因为`Random`它不是线程安全的。

有关更多详细信息和代码示例，请参阅我[关于随机数的文章。](http://csharpindepth.com/Articles/Chapter12/Random.aspx)

# android - AndEngine：SpriteGroup 列表。不要在现场画画

> ID：10598272
> 
> 赞同：0
> 
> 时间：2012-05-15T09:56:08.903
> 
> 标签：android, rendering, sprite, textures, andengine

如果我创建一个精灵列表并在场景中绘制它们 - 一切都很好，但是当我尝试制作 spriteGroups 列表并绘制它们时 - 只有黑屏。

```
private Queue<SpriteGroup> linesToDraw;

...

//when user touch the screen we add sprites to our collection
if (pSceneTouchEvent.getAction() == MotionEvent.ACTION_MOVE)
{
    linesToDraw.add(DrawHelper.getBrushLine(xStart, yStart, xEnd, yEnd, 5f,mBitmapTextureAtlas, mFaceTextureRegion, getVertexBufferObjectManager()));
}

...

//here we try to draw sprites
while (linesToDraw.size() > 0)
    //this code is reachable
    linesToDraw.poll().onDraw(pGLState, mCamera);

...

public static SpriteGroup getBrushLine(float xStart, float yStart,float xEnd, float yEnd, float size,BitmapTextureAtlas atlas, ITextureRegion mFaceTextureRegion, VertexBufferObjectManager manager)
{
    SpriteGroup result = new SpriteGroup(atlas, 40, manager);
    for (int i = 0; i < count ; i++)
    {
        Sprite part =new Sprite((float)(xStart + i * sLength * cos), (float)(yStart + i * sLength * sin), mFaceTextureRegion, manager);
        result.attachChild(part);
    }
    return result;
}

... 
```

当我使用单个 SpriteGroup 并将 ArrayList 放入其中时，一切都很好，我可以在场景中看到精灵，但 SpriteGroup 列表不起作用。使用相同的 Texture 和 TextureRegion 创建 SpriteGroup 可能是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:50:56.567

当我使用单个 spritegroup 时，一切都很好，如果是 spriteGroups 列表，我需要让孩子自己可见 =)

在 getBrushLine：result.setChildrenVisible(true)

# c# - 将 dll 作为另一个用户注册到 gac

> ID：10598277
> 
> 赞同：0
> 
> 时间：2012-05-15T09:56:31.993
> 
> 标签：c#, windows-7, uac, gac

我有一个应用程序，每次部署新的 dll 时，都需要将 dll 注册到客户端计算机上的 gac 中，问题是客户端计算机只有打开 UAC 的受限用户。

应用程序知道具有管理员权限的用户的凭据。

问题是，如果我有`processStartInfo.UseShellExecute = false;`然后我无法通过 UAC 得到错误“请求的操作需要提升”，如果我有， `processStartInfo.UseShellExecute = true;`那么它不允许以不同的用户运行整个事情：“进程对象必须有UseShellExecute 属性设置为 false，以便以用户身份启动进程”

```
 internal static void Register(String assemblyName)
    {
        ProcessStartInfo processStartInfo = new ProcessStartInfo(lcDir + "gacutil.exe", string.Format("/i {0}.dll", assemblyName));
        processStartInfo.UseShellExecute = false;
        processStartInfo.WorkingDirectory = lcDir;
        processStartInfo.UserName = lcUser;
        processStartInfo.Password = Password;
        processStartInfo.Domain = lcDomain;

        processStartInfo.Verb = "runas";

        Process process = Process.Start(processStartInfo);
        process.WaitForExit();
    } 
```

我想知道这种事情的“最佳实践”是什么？我知道 whoe 的概念在 Windows 中看起来像病毒。

我想实现以下目标：

*   用户不需要知道具有管理员权限的帐户
*   管理员用户的凭据保存在程序的数据库中
*   尽可能自动注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:31:54.950

您应该以管理员身份运行这部分代码。你需要的是模仿。

看这篇文章

[代码项目上的文章模仿](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T16:30:27.123

出于安全原因，您不应在应用程序中嵌入此类用户字符串。

设计理念是您使用系统管理服务或类似方式进行部署以管理部署（这很糟糕）。

我使用私有程序集解决了这个问题，这与 unix 的工作方式非常相似。

如果您希望在 SQL Native Client 中添加类支持，那么您会发现每次部署都是一项艰巨的任务。

如果您知道本地管理员名称和密码，则可以使用中央部署解决方案，而不是尝试让您的应用模拟管理员。

# wpf - List<> 集合不会更新 MVVM 中的视图

> ID：10598279
> 
> 赞同：3
> 
> 时间：2012-05-15T09:56:44.280
> 
> 标签：wpf, mvvm

我将`List<Person> collection`用作 DataGrid 控件的 ItemsSource。

但是，如果我从 List 集合中删除该项目，它不会更新视图。我为解决方案苦苦挣扎了很长时间。

然后代替`List<Person>`我的 ViewModel 中的集合。我把它改成了`ObservableCollection<Person> collection`. 现在它会在集合发生变化时更新视图。

我不知道为什么它只更新`ObservableCollection<Person>`？任何人 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T10:00:34.003

好吧，它的名字。一个简单的列表不会告诉 ui 更新，换句话说“视图无法观察列表”。数据绑定背后没有奇怪的魔法。WPF 和 DataBinding 需要 Data 模型告诉他们“这是新的”或“这是已更改的”，您可能已经看到[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)，[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)是相同的，但对于集合，并且`List<>`没有实现它，[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:00:45.223

[`ObservableCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)每次更改集合中的项目时都会触发更改事件。`List<T>`没有。这就是原因。

DataBinding 是惰性的。如果您不告诉您的视图某些内容发生了变化，它就不会打扰更新。在后台，WPF DataBinding 注册更改通知，以便您的 ViewModel 可以在视图发生更改时告知视图。它使用 和 之类的接口来做到这`INotifyPropertyChanged`一点`INotifyCollectionChanged`。

`ObservableCollection<T>`实现接口[`INotifyCollectionChanged`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)。此接口定义事件[`CollectionChanged`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.collectionchanged.aspx)，您的 View 基本上将其自己的事件处理程序附加到该事件。当集合引发事件时，该处理程序将更新视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:01:15.067

因为 List 没有实现[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T10:02:51.053

因为数据绑定的更新不是一种魔法，所以要使数据绑定正常工作有几个要求。如果您有单个属性要绑定在此属性上，则该属性必须是依赖属性或其父类必须实现 INotifyPropertyChanged 接口以通知 wpf 绑定系统有关属性值的更改。对于集合，有一个类似的机制：它必须实现 INotifyPropertyChanged 以通知 wpf 绑定系统有关已删除/已移动/已添加的项目。

有关更多详细信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)

# algorithm - 用户生成的内容视图验证

> ID：10598281
> 
> 赞同：0
> 
> 时间：2012-05-15T09:56:49.737
> 
> 标签：algorithm, security, theory, user-generated-content

我正在开发一个用户生成的内容网站。目标是，如果用户的内容被一定数量的人查看，用户就会得到奖励。虽然发布内容需要用户帐户，但查看内容不需要帐户。

我目前正在开发计算有效视图数量的算法，我担心用户创建机器人来错误地增加他们的视图数量的可能性。我会从内容生成器的 IP 中排除视图，但我不想从具有相同外部 IP 地址的其他用户中排除有效视图。实际上，相同的外部 IP 地址可能会在大学校园或公司环境中产生大量有效视图。

该站点是用 python 实现的，并托管在 apache 服务器上。这个问题在本质上更具理论性，因为我如何确定来自同一 IP 的流量是否合法。我找不到任何可以做到这一点的内容管理系统，我只是打算自己实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:27:44.720

你不能可靠地做到这一点。您创建的任何方法都可以自动化。

也就是说，你可以提高标准。例如，每个查看的页面都可以有一个随机数编码到一段 JavaScript 中，该 JavaScript 将提交一个 AJAX 请求。任何拥有相应 AJAX 请求的视图都可能是真正的浏览器，并且很可能是真正的人类，因为很少有机器人能够正确处理 JavaScript。但是绝对没有什么能阻止某人使用自动脚本来驱动真正的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:30:32.037

好吧...您可以让他们登录（如果您不想创建自己的基础架构，可以通过 facebook 或 google id 等）。这样就更容易跟踪收视率。

# jquery - backscore.js / underscore.js innerHTML 而不是 html()

> ID：10598283
> 
> 赞同：0
> 
> 时间：2012-05-15T09:56:56.937
> 
> 标签：jquery, backbone.js, underscore.js

我正在使用backbone.js、underscore.js 和jQuery。我从[http://jsfiddle.net/thomas/C9wew/6/](http://jsfiddle.net/thomas/C9wew/6/)获取了以下示例代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>backbone.js</title>
    </head>
    <body>
        <div id="search_container">
            Container
        </div>

        <script src="/js/jquery-1.7.2.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="/js/underscore-min.js" type="text/javascript" charset="utf-8"></script>
        <script src="/js/backbone-min.js" type="text/javascript" charset="utf-8"></script>

        <script type="text/template" id="search_template">
            <label>Search</label>
            <input type="text" id="search_input" />
            <input type="button" id="search_button" value="Search" />
        </script>

        <script type='text/javascript'>
            //<![CDATA[
            $(window).load(function() {

                SearchView = Backbone.View.extend({
                    initialize : function() {
                        this.render();
                    },
                    render : function() {
                        // Compile the template using underscore
                        var template = _.template($("#search_template").html(), {});
                        // Load the compiled HTML into the Backbone "el"
                        //this.el.html(template);
                        this.el.innerHTML = template;
                    },
                    events : {
                        "click input[type=button]" : "doSearch"
                    },
                    doSearch : function(event) {
                        // Button clicked, you can access the element that was clicked with event.currentTarget
                        alert("Search for " + $("#search_input").val());
                    }
                });

                var search_view = new SearchView({
                    el : $("#search_container")
                });

            });
            //]]>

        </script>
    </body>
</html> 
```

我希望“el”是一个 jQuery 包装元素，因为是通过 jQuery 选择器 $("#search_container") 选择的，但不是因为它没有像 html() 这样的函数。

如果我在 "el : $("#search_container")" 行设置断点，则 "el" 元素具有函数 html()，这是正常行为。当调用渲染函数时，“el”元素不再具有 html() 函数..任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:11:06.877

您链接的示例基于旧版本的骨干网（0.3.3）。您的示例可能使用最新版本 (0.9.2)，其中`this.el`DOM 元素`this.$el`是缓存的 jQuery|Zepto 元素，与`this.el`.

这意味着，如果您想使用该`html`方法，请使用`this.$el.html(template)`. 检查此 Fiddle [http://jsfiddle.net/gFcRR/1/](http://jsfiddle.net/gFcRR/1/)以获取更新的示例。

# javascript - JavaScript 在幕后创建 DOM 元素

> ID：10598287
> 
> 赞同：0
> 
> 时间：2012-05-15T09:57:12.140
> 
> 标签：javascript, html, dom

某些浏览器不支持或部分支持某些元素 (HTML5)。

我对`document.createElement()`使用时发生的事情感兴趣 - 创建一个元素，然后如果没有支持，它会变成文本，而不是呈现？

只是出于好奇，有没有办法通过使用 JavaScript 而不是通过兼容性表来查看支持哪些元素，比如它们的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:01:23.040

你可以看看这些页面： [http://html5accessibility.com/](http://html5accessibility.com/) http://wufoo.com/html5/

他们列出了支持和不支持的元素。如果不支持该元素会发生什么取决于浏览器。

你应该看看[http://modernizr.com/](http://modernizr.com/)。这是一个 js 项目，可帮助旧版浏览器呈现和显示 html 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:03:20.557

1) 该网站详细介绍了您当前浏览器支持的内容。

[http://html5test.com/](http://html5test.com/)

2) 为每个浏览器提供完整的细节，支持什么，不支持什么

[http://www.findmebyip.com/litmus](http://www.findmebyip.com/litmus)

# android - OsmDroid for Android 上的 ItemizedOverlay 和自定义标记，不再有触摸事件

> ID：10598295
> 
> 赞同：2
> 
> 时间：2012-05-15T09:57:40.797
> 
> 标签：android, touch, marker, osmdroid

我目前正在使用从 OsmDroid 上的 Drawable 扩展的类。在这堂课上，我为从互联网上收到的每辆车画了一个几何形状。我想在每辆车上添加一个监听器，以便在我们触摸汽车时提供一些信息。使用 OverlayItem 我们可以做到这一点：

```
ArrayList<OverlayItem> items = new ArrayList<OverlayItem>();
carOverlay.draw(new Canvas());
overlayItem = new OverlayItem("test", ""+i, geoPoint);
overlayItem.setMarker(carOverlay.getCurrent());
items.add(overlayItem);
ItemizedOverlay<OverlayItem> overlay = new ItemizedOverlayWithFocus<OverlayItem>(this.getApplicationContext(), items,
        new ItemizedIconOverlay.OnItemGestureListener<OverlayItem>() {

            @Override
            public boolean onItemSingleTapUp(final int index, final OverlayItem item) {
                Log.i("Touch","you just tap the car");
                return true;
            }

            @Override
            public boolean onItemLongPress(final int index, final OverlayItem item) {
                return false;
            }

        }); 
```

使用这段代码，我可以看到我刚刚绘制的图像，但是当我触摸汽车时没有任何事件，如果我删除线：

```
overlayItem.setMarker(carOverlay.getCurrent()); 
```

为了让显示默认标记而不是我的自定义标记，触摸事件发生。

那么我做错了什么？一定是一样的吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:50:01.093

这不是一个“正确”的答案，但由于我面临类似的问题，我同时使用了默认绘图和自定义。我只是在 ItemizedIconOverlay 上的自定义绘制方法结束时调用 super() 并且绘制了我的绘图和“默认”项目标记。也许可以调整默认标记以使其不可见（空位图）......实验。:)

```
 @Override
public void draw(Canvas canvas, MapView mv, boolean shadow) {
    if(!shadow) {
     //my draw code
         }

    super.draw(canvas, mv, shadow);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:23:19.843

鼠标是正确的。如果您要覆盖 ItemizedOverlayWithFocus.draw() 方法以使用画布绘制汽车，则需要添加：

```
super.draw(canvas, view, shadow); 
```

超级将设置并使用 OverlayItem 的热点（从我在源代码中可以看到）用作手势的可触摸区域。

但是，您仍然会看到原始标记和画布绘制的标记。另外，如果您移动汽车，可触摸区域将不会随之移动。（热点不会出现在您绘制的新位置）

只有两个真正的解决方案。

1）您在自己的 ItemizedOverlayWithFocus 类中重新实现 ItemizedOverlayWithFocus.draw() 和 ItemizedOverlayWithFocus.onDrawItem() 。（只有你会调用 onDrawItem()、onDrawCar()，然后从覆盖的 draw() 方法中调用它）

除非您想更改正在绘制的标记的偏移量，否则这是不值得的。例如，我有一个塔图标，我希望距离底部 10 个像素作为 Y 点，所以看起来塔站在 GeoPoint 上，而不是在它的边缘。

2）您首先从位图创建自己的标记，并在 OverlayItem.setMarker() 方法中将其设置为可绘制标记。尝试使用 Canvas 创建一个位图：

```
Bitmap bitmap = Bitmap.createBitmap(width, height, Config.RGB_565);
Canvas canvas = new Canvas(bitmap);
// Draw on your car on the canvas... 
```

然后尝试分配位图：

```
overlayItem.setMarker(new BitmapDrawable(bitmap)); 
```

不要覆盖 draw() 除非你想绘制一些其他的东西，如果你确实确保你 super.draw() 以便标记和它的热点与手势一起工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T03:17:55.897

您也可以尝试此代码

```
Drawable newMarker = this.getResources().getDrawable(R.drawable.ic_marker);

this.mMyLocationOverlay = new ItemizedIconOverlay<OverlayItem>(items,
            newMarker, "listener try null", new DefaultResourceProxyImpl(getActivity()));

mapView.getOverlays().add(mMyLocationOverlay); 
```

# php - 如何从数组中精确值

> ID：10598301
> 
> 赞同：0
> 
> 时间：2012-05-15T09:57:58.540
> 
> 标签：php, arrays

我的数组结构是

大批

(

```
[customer_id] => Array
    (
        [0] => Array
            (
                [customer_id] => 123
            )
    )
[menu_item_net_price] => 1700
[menu_item_tax_price] => 4%
[menu_item_gross_price] => 1700
[provider_id] => 123 
```

)

我需要得到`[customer_id] => 123`. 告诉我我该怎么做？

我的问题仍然没有解决，所以我发布代码：

```
$data['customer_id'] = $this->session->userdata('id');
            $data['menu_item_net_price']= $netPrice;
            $data['menu_item_tax_price']= '4%'; 
            $data['menu_item_gross_price']= $netPrice;
            $data['provider_id']= 123; 
            echo '<pre>';
            print_r($data);
            echo '</pre>';
            exit(0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:00:10.507

只需逐步检查您的数组，直到您到达所需的属性。

```
$arr[ 'id' ][ 0 ][ 'customer_id' ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:02:18.660

任何一个

```
$array["id"][0]["customer_id"] 
```

或者如果您想获取所有客户的 ID，请使用 foreach

```
foreach($array["id"] as $index => $data) {
    $customer_id = $data["customer_id"]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:06:02.713

有两种方法可以获取 customer_id 的值。
1\. 如果你的数组是动态的并且你不确定key值是什么，你可以使用php的[key](http://php.net/manual/en/function.key.php)或者[array_keys](http://php.net/manual/en/function.array-keys.php)函数。然后，您可以检索它。

```
array['id'][$key]['customer_id'] 
```

对于多个键，您可以使用 foreach 循环。

2.如果是静态数组，则可以直接获取。

```
 array['id'][0]['customer_id'] 
```

# c - 线程内的线程？

> ID：10598303
> 
> 赞同：5
> 
> 时间：2012-05-15T09:57:59.760
> 
> 标签：c, pthreads

我想使用 pthread 实现分而治之，但我不知道如果我在一个线程中创建更多线程会发生什么。

根据我的理解，如果机器有一个2核处理器，它只能同时处理2个线程。如果线程多于2个，其他线程要等待资源，所以如果我在深入的时候创建越来越多的线程，实际上可能不会提高算法的速度，因为只能处理2个线程同时。

我在网上做了一些研究，似乎上层的线程可能处于非活动状态，只有最深层次的线程保持活动状态。如何做到这一点？此外，如果面线保持不活动状态，是否会影响底线？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T10:06:46.720

有两种基本类型：分离式和可连接式。

可连接线程是您可以等待（或访问）终止使用的线程`pthread_join`。

使用多于内核的线程可能会有所帮助或有害 - 取决于您的程序！使用多线程来最小化或消除对资源的竞争通常是件好事。在程序中抛出太多线程实际上会减慢进程。但是，如果内核数与线程数匹配并且其中一个线程正在等待磁盘 IO（假设其他进程中没有发生任何重大事件），您可能会有空闲的 CPU 时间。

> 上层的线程可以不活动，只有最深的线程保持活动。如何做到这一点？

使用可连接线程，您可以完成您概述的嵌套线程方法，这在几个教程中进行了演示。基本流程是一个线程将创建一个或多个工作人员，并使用`pthread_join`. 但是，在大多数情况下，任务和线程池等替代方案更可取。

然而，这种方法不太可能是执行的最佳方法，因为它与硬件和调度操作没有关联（很好），特别是随着程序的深度和宽度的增长。

> 如果面线保持不活动状态，不会影响底线吗？

是的。然而，典型的问题是工作/线程不受限制。使用您概述的方法，很容易产生许多线程，并且为必须在有限数量的内核上执行的工作拥有大量不合逻辑的线程。因此，您的程序将浪费大量时间上下文切换和等待线程完成。创建许多线程也可能会浪费/保留大量资源，尤其是在它们短暂和/或空闲/等待的情况下。

> 因此，如果我在更深入的同时创建越来越多的线程，实际上它可能不会提高算法的速度，因为只能同时处理 2 个线程。

这表明使用这种方法创建线程是有缺陷的。您可能想要创建一些线程，并使用基于任务的方法——每个线程从集合中请求并执行任务。创建线程需要大量时间和资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:45:02.360

如果您尝试进行双向分而治之，产生两个孩子并等待他们完成，您可能需要类似的东西：

```
void *
routine (void * argument)
{
  /* divide */
  left_arg = f (argument);
  right_arg = f (argument);

  /* conquor */
  pthread_create (left_child, NULL, routine, left_arg);
  pthread_create (right_child, NULL, routine, right_arg);

  /* wait for 'children' */
  pthread_join (left_child, &left_return_val);
  pthread_join (right_child, &right_return_val);

  /* merge results & return */
} 
```

一个轻微的改进是，“父线程”不是休眠，而是同步地完成右子线程的工作，并产生更少的线程：

```
void *
routine (void * argument)
{
  /* divide */
  left_arg = f (argument);
  right_arg = f (argument);

  /* conquor */
  pthread_create (left_child, NULL, routine, left_arg);
  /* do the right_child's work yourself */
  right_return_val = routine (right_arg);

  /* wait for 'left child' */
  pthread_join (left_child, &left_return_val);

  /* merge results & return */
} 
```

但是，当你深入 N 级时，你有不少孩子。获得的加速实际上取决于 CPU 在实际处理上花费的时间，以及等待 I/O 的时间等。如果您知道在具有`P`内核的机器上，您只能通过`kP`线程获得良好的加速，然后您可以设置线程的“[工作池](http://en.wikipedia.org/wiki/Thread_pool_pattern)” `kP`，并继续重用它们，而不是像上面那样产生线程。这样，一旦`kP`产生了线程，就不会产生更多：

```
THREAD_POOL pool = new_thread_pool (k * P); /* I made this function up */

void *
routine (void * argument)
{
  /* divide */
  left_arg = f (argument);
  right_arg = f (argument);

  /* conquor */
  left_thread = get_worker (pool); /* Blocks until a thread is free  */
  /* get left_thread to do processing for you */

  right_thread = get_worker (pool); /* Blocks until a thread is free  */
  /* get right_thread to do processing for you */

  /* wait for 'children' */
  pthread_join (left_child, &left_return_val);
  pthread_join (right_child, &right_return_val);

  /* return the workers */
  put_worker (pool, left_thread);
  put_worker (pool, right_thread);

  /* merge results & return */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:10:36.653

您应该能够创建比系统中的内核更多的线程。操作系统将确保每个线程都获得 CPU 的一部分来完成其工作。

但是，您可以创建的线程数 [可能] 有一个上限（请查看您的操作系统文档）。

因此，如果您在具有 2 个内核的系统中创建 5 个线程，那么每个线程将获得大约 40% 的 cpu（平均）。这并不是说一个线程必须等到另一个线程完全完成。当然，除非你使用锁。

当您使用锁来保护数据不被多个线程更改或访问时，可能会出现许多问题。典型的问题是：

*   死锁：线程 1 等待被线程 2 锁定的东西；线程 2 等待被线程 1 锁定的东西
*   lock convoy：多个线程都在等待同一个锁
*   优先级反转：线程 1 对线程 2 具有优先级，但由于线程 2 大部分时间都有锁，所以线程 1 仍然要等待线程 2

我找到了这个页面（[http://ashishkhandelwal.arkutil.com/index.php/csharp-c/issues-with-multithreaded-programming-part-1/](http://ashishkhandelwal.arkutil.com/index.php/csharp-c/issues-with-multithreaded-programming-part-1/)），这可能是多线程编程的一个好的开始。

# css - 位置：固定，相对容器。固定高度设计

> ID：10598304
> 
> 赞同：1
> 
> 时间：2012-05-15T09:58:00.330
> 
> 标签：css

我遇到了一个令人沮丧和有趣的问题。

我正在进行的设计基于 100% 高度布局。
网站页面总是有图像。
高度只能是 800 像素。
在此图像上设置了 100% 的最大高度。

结果使网站在大型显示器上运行良好，但在较小的屏幕上，图像会调整，这意味着该网站总是很适合。

-

因为该站点使用水平滚动，所以我使用位置：固定，在#footer 导航上，将导航定位在右下角。

但是，当屏幕的高度大于 800 像素时，此页脚 #nav 仍保留在右下角。

我试图找到一个解决方案，允许这个固定元素相对于容器 div 的高度进行固定。这意味着导航始终位于站点布局底部上方 1em 处。

-

您可以在此处查看该网站 - [http://eastat1003.dev.voodoobytes.net/artists/bukanova/art-direction/idol-magazine-the-selected-ones/](http://eastat1003.dev.voodoobytes.net/artists/bukanova/art-direction/idol-magazine-the-selected-ones/)

*- 2012 年 5 月 17 日编辑 - 网站现已上线！[http://www.eastatheart.com/](http://www.eastatheart.com/)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:04:03.787

好的，得到你想要的，花了我几分钟！

我现在没有时间检查这个，但它应该（希望）工作。

创建一个容器元素，设置为固定位置。将其放置在屏幕的右上角。将宽度设置为 0，高度设置为 100%。还将最小高度设置为 800 像素。

现在，将您的导航设置为绝对位置。然后将其设置为底部 1em 右 0。

这应该可行，我想...

希望有帮助:)

# jquery - jQuery循环：循环div时生成寻呼机缩略图

> ID：10598306
> 
> 赞同：0
> 
> 时间：2012-05-15T09:58:07.673
> 
> 标签：jquery, jquery-cycle

我正在循环使用具有如下标记的动态生成的 div：

```
<div class="slider">

        <div class="servicesslider">    
               <a href="link1">
                <div class="slidertext">
                   <h1 class="sliderhead">Text1</h1>
                    <p>Body copy</p>
                </div>  
        <img width="450" height="270" src="imglink" class="attachment-front-page-services wp-post-image" alt="alt" title="title" />                     
                </a>

        </div>

       <div class="servicesslider"> 
          <a href="link2">
             <div class="slidertext">
            <h1 class="sliderhead">Text2</h1>
            <p>More body copy.</p>
             </div>
          <img width="450" height="270" src="imglink" class="attachment-front-page-services wp-post-image" alt="alt" title="title" />
           </a>

 </div> 
```

我设置了寻呼机功能，该功能为每个 div 生成 1、2、3、4 等链接。我正在尝试关注为每张幻灯片生成缩略图的高级寻呼机演示（见此处：http: [//jquery.malsup.com/cycle/pager2.html](http://jquery.malsup.com/cycle/pager2.html)）

我的 jQuery 看起来像这样，但回调函数破坏了效果。

```
<script type="text/javascript">
$(document).ready(function() {
$('.slider').cycle({
    fx:     'scrollHorz', 
    timeout: 4000,
    pager:  '#nav' 
    // callback fn that creates a thumbnail to use as pager anchor 
        pagerAnchorBuilder: function(idx, slide) { 
            return '<li><a href="#"><img src="' + slide.src + '" width="50" height="50" /></a></li>'; 
        }
});
});
</script> 
```

参考：http: [//jsfiddle.net/txhPK/6/](http://jsfiddle.net/txhPK/6/)

问题是我无法让寻呼机工作或使用该技术生成缩略图。我想这是因为在演示中他们只是在图像中循环，所以抓取幻灯片的 img src 很容易，在我的情况下，它需要从 div 中获取图像 src。我只是想知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:45:55.850

您需要进行修改并搜索图像。假设图像始终具有相同的类，并且您只需要一个是代码。

```
$('.slider').cycle({
    fx:     'scrollHorz', 
    timeout: 4000,
    pager:  '#nav' 
    // callback fn that creates a thumbnail to use as pager anchor 
        pagerAnchorBuilder: function(idx, slide) { 
            return '<li><a href="#"><img src="' + $('img.wp-post-image:eq(0)',slide).attr('src') + '" width="50" height="50" /></a></li>'; 
        }
}); 
```

类似 JSFiddle 示例：类似示例 [http://jsfiddle.net/lucuma/vKG55/1/](http://jsfiddle.net/lucuma/vKG55/1/)

# java - 数据类型转换的 Java 加密问题

> ID：10598309
> 
> 赞同：0
> 
> 时间：2012-05-15T09:58:31.353
> 
> 标签：java, type-conversion, encryption-asymmetric

我已经实现了使用字符串在客户端和服务器之间进行通信的 Web 服务。我遇到的问题是将加密字节数组转换为字符串，因为我无法将其转换回服务器端的原始内容。

```
KeyPairGenerator keyGen;
keyGen = KeyPairGenerator.getInstance("RSA");
keyGen.initialize(1024);
KeyPair key = keyGen.generateKeyPair();

String publicKeyPath = new String("publicKeys.txt");
publickey = key.getPublic()
byte[] pubEncoded = key.getPublic().getEncoded();
FileOutputStream fout = new FileOutputStream(publicKeyPath);
fout.write(pubEncoded);
fout.flush();
fout.close();

String privateKeyPath = new String("privateKeys.txt");
byte[] privEncoded = key.getPrivate().getEncoded();
fout = new FileOutputStream(privateKeyPath);
fout.write(privEncoded);
fout.flush();
fout.close();

cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding"); 
```

并在客户端的每个方法上：

```
cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
cipher.init(Cipher.ENCRYPT_MODE, publickey); 
byte[] cipherText = cipher.doFinal(str.getBytes());
port.callX(chiperText.toString()); 
```

在服务器端：

```
cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
cipher.init(Cipher.DECRYPT_MODE, privateKey);
byte[] newPlainText = cipher.doFinal(arg.getBytes()); 
```

这给出了“数据必须以零开头”的填充问题

只生成了一个 KeyPair，为了调试，我尝试对同一个函数进行加密和解密，问题取决于从 byte[] 到 String 的转换。

我真的不想将参数的传递更改为其他类型，因为操作是自动生成的，并且所有代码都是字符串。我尝试过使用不同的“UTF-8”和“UTF-16Le”，但都没有：S

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:16:36.563

直接使用非对称密钥加密数据不是一个好主意，而且它不起作用。RSA 密钥不能加密大于其密钥长度的数据。因此，正确的做法是生成对称密钥并使用对称密钥加密数据，然后使用非对称密钥加密对称密钥。因此，您需要将加密数据和加密密钥都发送给对方。

如果您尝试直接使用非对称密钥加密数据，那么您的 byte[] 可能不包含正确的数据，或者它可能根本不包含任何内容。如果您的数据大于密钥长度，则会发生这种情况。对于较小的密钥长度的数据，它可以正常工作，但不适用于较大的数据。

# jquery - 滑块覆盖菜单和切换

> ID：10598310
> 
> 赞同：0
> 
> 时间：2012-05-15T09:58:34.310
> 
> 标签：jquery, drop-down-menu, nivo-slider

我的 Nivo SLider 有问题。滑块可以正常工作，但我有一个下拉菜单和一个切换开关，当“激活”时，它必须位于滑块图像上方，而不是像现在这样位于下方。这是[我网站的链接][1]。

要查看问题，您必须通过菜单语音“PRODOTTI”或单击标签“CERCA”或“AREA RISERVATA”。我已经尝试修改 z-indexes 没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:07:06.600

它似乎与 Nivo Slider 无关。你有溢出：隐藏在 .header 和 .menu2 上，我相信这会导致问题。

# delphi - 通过 Delphi 与命令提示符通信

> ID：10598313
> 
> 赞同：5
> 
> 时间：2012-05-15T09:58:39.303
> 
> 标签：delphi, command, handle, prompt, createprocess

我曾尝试使用 delphi 将命令发送到命令提示符。但是，我无法这样做，因为我使用了 CreateProcess 方法来做到这一点。我试图更改 StdOutPipeWrite，但是，CreateProcess 似乎不允许通过来自 CreateProcess 的初始命令之后的命令。有没有办法利用句柄继续在命令提示符和delphi之间发送和接收命令和消息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T13:01:50.247

我来自 tek-tips.com 的同事 Glenn9999[就这个主题写了一篇很好的常见问题解答](http://www.tek-tips.com/faqs.cfm?fid=7402)。我不知道他是否在 SO，但他应该为此获得所有荣誉。我从此处复制了该页面的代码以供将来参考。他使用管道来做控制台和delphi之间的通信。

```
unit mcunit;

{ written by Glenn9999 @ tek-tips.com.  Posted here 6/21/2011 }
interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs,
  StdCtrls;

type
  monitor = class(TThread)  // pipe monitoring thread for console output
  private
    TextString: String;
    procedure UpdateCaption;
  protected
    procedure Execute; override;
  end;
  TForm1 = class(TForm)
    CommandText: TMemo;
    CommandRun: TComboBox;
    Button2: TButton;
    SaveDialog1: TSaveDialog;
    procedure FormDestroy(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    cmdcount: integer;
  end;

var
  Form1: TForm1;
  InputPipeRead, InputPipeWrite: THandle;
  OutputPipeRead, OutputPipeWrite: THandle;
  ErrorPipeRead, ErrorPipeWrite: THandle;
  ProcessInfo : TProcessInformation;
  myThread: monitor;

implementation

{$R *.DFM}

procedure WritePipeOut(OutputPipe: THandle; InString: string);
// writes Instring to the pipe handle described by OutputPipe
  var
    byteswritten: DWord;
  begin
// most console programs require CR/LF after their input.
    InString := InString + #13#10;
    WriteFile(OutputPipe, Instring[1], Length(Instring), byteswritten, nil);
  end;

function ReadPipeInput(InputPipe: THandle; var BytesRem: Integer): String;
  {
    reads console output from InputPipe.  Returns the input in function
    result.  Returns bytes of remaining information to BytesRem
  }
  var
    TextBuffer: array[1..32767] of char;
    TextString: String;
    BytesRead: Integer;
    PipeSize: Integer;
  begin
    Result := '';
    PipeSize := Sizeof(TextBuffer);
    // check if there is something to read in pipe
    PeekNamedPipe(InputPipe, nil, PipeSize, @BytesRead, @PipeSize, @BytesRem);
    if bytesread > 0 then
      begin
        ReadFile(InputPipe, TextBuffer, pipesize, bytesread, nil);
        // a requirement for Windows OS system components
        OemToChar(@TextBuffer, @TextBuffer);
        TextString := String(TextBuffer);
        SetLength(TextString, BytesRead);
        Result := TextString;
      end;
  end;

procedure monitor.Execute;
{ monitor thread execution for console output.  This must be threaded.
   checks the error and output pipes for information every 40 ms, pulls the
   data in and updates the memo on the form with the output }
var
  BytesRem: DWord;
begin
  while not Terminated do
    begin
      // read regular output stream and put on screen.
      TextString := ReadPipeInput(OutputPipeRead, BytesRem);
      if TextString <> '' then
         Synchronize(UpdateCaption);
      // now read error stream and put that on screen.
      TextString := ReadPipeInput(ErrorPipeRead, BytesRem);
      if TextString <> '' then
         Synchronize(UpdateCaption);
      sleep(40);
    end;
end;

procedure monitor.UpdateCaption;
// synchronize procedure for monitor thread - updates memo on form.
begin
  With Form1.CommandText.Lines do
    Add(TextString);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  WritePipeOut(InputPipeWrite, 'EXIT'); // quit the CMD we started
  MyThread.Terminate;
  // close process handles
  CloseHandle(ProcessInfo.hProcess);
  CloseHandle(ProcessInfo.hThread);
  // close pipe handles
  CloseHandle(InputPipeRead);
  CloseHandle(InputPipeWrite);
  CloseHandle(OutputPipeRead);
  CloseHandle(OutputPipeWrite);
  CloseHandle(ErrorPipeRead);
  CloseHandle(ErrorPipeWrite);
end;

procedure TForm1.Button2Click(Sender: TObject);
 { takes the input from the command edit box and processes it }
  var
    UpText: String;
  begin
    UpText := UpperCase(CommandRun.Text);  // done to eliminate case-sensitivity
    if UpText = 'CLR' then        // clear the memo
      begin
        CommandText.Clear;
        WritePipeOut(InputPipeWrite, #13);
      end
    else
    if UpText = 'SAVELOG' then    // save the memo box to a file.
      begin
        if SaveDialog1.Execute then
          begin
            CommandText.Lines.SaveToFile(SaveDialog1.FileName);
            CommandText.Lines.Add('Log file saved.');
          end
        else
          CommandText.Lines.Add('Log file not saved.');
      end
  // expand this, it needs to catch any variation where the command-interpreter
  // is called.  Any different ideas?
    else
    if UpText = 'CMD' then
       inc(cmdcount)
    else
    if UpText = 'COMMAND' then
       inc(cmdcount)
  // terminate app if user types exit, else let alone
    else
    if UpText = 'EXIT' then
      begin
        if cmdcount = 1 then
           Application.Terminate
        else
          dec(cmdcount);
      end
    else
      WritePipeOut(InputPipeWrite, CommandRun.Text);
    CommandRun.Items.Add(CommandRun.Text);
    CommandRun.Text := '';
    CommandRun.SetFocus;
  end;

procedure TForm1.FormCreate(Sender: TObject);
 { upon form creation, this calls the command-interpreter, sets up the three
   pipes to catch input and output, and starts a thread to monitor and show
   the output of the command-interpreter }
  var
    DosApp: String;
    DosSize: Integer;
    Security : TSecurityAttributes;
    start : TStartUpInfo;
  begin
    CommandText.Clear;
    // get COMSPEC variable, this is the path of the command-interpreter
    SetLength(Dosapp, 255);
    DosSize := GetEnvironmentVariable('COMSPEC', @DosApp[1], 255);
    SetLength(Dosapp, DosSize);

  // create pipes
    With Security do
      begin
        nlength := SizeOf(TSecurityAttributes) ;
        binherithandle := true;
        lpsecuritydescriptor := nil;
      end;
    CreatePipe(InputPipeRead, InputPipeWrite, @Security, 0);
    CreatePipe(OutputPipeRead, OutputPipeWrite, @Security, 0);
    CreatePipe(ErrorPipeRead, ErrorPipeWrite, @Security, 0);

  // start command-interpreter
    FillChar(Start,Sizeof(Start),#0) ;
    start.cb := SizeOf(start) ;
    start.hStdInput := InputPipeRead;
    start.hStdOutput := OutputPipeWrite;
    start.hStdError :=  ErrorPipeWrite;
    start.dwFlags := STARTF_USESTDHANDLES + STARTF_USESHOWWINDOW;
    start.wShowWindow := SW_HIDE;
    if CreateProcess(nil, PChar(DosApp), @Security, @Security, true,
               CREATE_NEW_CONSOLE or SYNCHRONIZE,
               nil, nil, start, ProcessInfo) then
      begin
        MyThread := monitor.Create(false);  // start monitor thread
        MyThread.Priority := tpHigher;
      end;
    Button2.Enabled := true;
    cmdcount := 1;
 end;

 end. 
```

**更新（2020 年 5 月 1 日）**

此答案仅适用于非 unicode 支持的 Delphi 版本。如果你有一个现代的 Delphi，你可以[在这里](https://stackoverflow.com/a/59604144/800214)找到一个工作版本

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-10-01T22:58:21.873

首先声明用途：

```
ShellAPI 
```

然后使用这个：

```
ShellExecute(0, nil, 'cmd.exe', '/c **YOUR_COMMAND_HERE**', nil, HIDE_WINDOW); 
```

# python - 使用 Django 从其他应用程序导入模型时遇到问题

> ID：10598317
> 
> 赞同：3
> 
> 时间：2012-05-15T09:58:48.997
> 
> 标签：python, django, model, import

我在尝试从另一个应用程序导入模型时遇到了麻烦。我有两个应用程序“主要”和“管理”。这里是代码，我去掉了一些冗长的描述：

“行政”模式：

```
from django.db import models
from django import forms
from django.forms import ModelForm

class Contract(models.Model):
    Code = models.CharField(max_length=50)
    Provider = models.CharField(max_length=30)
    Description = models.CharField(max_length=30)
    ActivationDate = models.DateField(blank=True, null=True)
    EndingDate = models.DateField(blank=True, null=True)
    Note = models.TextField(blank=True)
    Numbers = models.ManyToManyField('main.Number', through='Crefcontr2num')

def __unicode__(self):
    return u'%s %s' % (self.Provider, self.Description)

class Crefcontr2num(models.Model):
    Dateto = models.DateField()
    Datefrom = models.DateField()
    Contract = models.ForeignKey('Contract')
    Num = models.ForeignKey('main.Number') 
```

“主要”模型：

```
from django.db import models
from endusers.models import OrderedEndUser
from django import forms
from django.forms import ModelForm, Textarea, TextInput, HiddenInput
#from administrative.models import Contract

class Device(models.Model):
    Maker = models.CharField(error_messages={'required': 'need !'})
    Model = models.CharField(max_length=30, blank=True)
    Imei = models.CharField(max_length=15, unique=True)
    Note = models.TextField(blank=True)
    ActiveState = models.BooleanField()
    AcquisitionDate = models.DateField(blank=True, null=True)
    DismissionDate = models.DateField(blank=True, null=True)
    CodInv = models.CharField(max_length=15, blank=True)
    FK_Enduser = models.ForeignKey('endusers.OrderedEndUser',unique=False, blank=True, null=True, on_delete=models.SET_NULL)
    #   FK_Contract = models.ForeignKey(administrative.Contract, unique=False, blank=True, null=True, on_delete=models.SET_NULL) 
```

...请注意“#”在导入和模型“设备”中的 FK_Contract 前面，如果我只是尝试导入（不带 #）模型合同，我会收到此错误：

```
Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0xb6f69a6c>>
Traceback (most recent call last):
File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/runserver.py", line 88, in inner_run
self.validate(display_num_errors=True)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 249, in validate
num_errors = get_validation_errors(s, app)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/validation.py", line 35, in get_validation_errors
for (app_name, error) in get_app_errors().items():
File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 146, in get_app_errors
self._populate()
File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 61, in _populate
self.load_app(app_name, True)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 78, in load_app
models = import_module('.models', app_name)
File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)
File "/media/truecrypt1/develope/Django-1.3.1/dbMobile/../dbMobile/main/models.py", line 5, in <module>
from administrative.models import Contract #, Crefcontr2num
File "/media/truecrypt1/develope/Django-1.3.1/dbMobile/administrative/models.py", line 28, in <module>
class ContractForm(ModelForm):
File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py", line 205, in __new__
opts.exclude, opts.widgets, formfield_callback)
File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py", line 159, in fields_for_model
formfield = f.formfield(**kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/fields/related.py", line 1155, in formfield
'queryset': self.rel.to._default_manager.using(db).complex_filter(self.rel.limit_choices_to)
AttributeError: 'str' object has no attribute '_default_manager' 
```

到目前为止，我到处寻找并尝试了许多选项..但错误仍然存​​在...我无法理解...我阅读了有关循环导入等的信息...并尝试使用路径进行引用（如您所见），但是它也不起作用...

任何建议表示赞赏... thx

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T13:15:40.053

您的回溯显示错误与您在第 28 行`ContractForm`中定义的类有关`administrative/models.py`

```
...
File "/media/truecrypt1/develope/Django-1.3.1/dbMobile/../dbMobile/main/models.py", line 5, in <module>
from administrative.models import Contract #, Crefcontr2num 
File "/media/truecrypt1/develope/Django-1.3.1/dbMobile/administrative/models.py", line 28, in <module> 
class ContractForm(ModelForm):
... 
```

由于您没有在问题中包含这部分代码，因此我无法告诉您更多信息。但是，您应该知道 Python 中的导入是如何工作的。当你使用

```
from administrative.models import Contract 
```

Python 不只是从`administrative/models.py`文件中选择一个类。相反，Python 解释器读取整个文件，创建模块对象，在新模块命名空间中执行导入文件中的代码，然后将新模块命名空间中的名称复制`Contract`到当前命名空间。因此，尽管您似乎只从模块中导入了一个类，但该模块中**任何地方**的错误都可能阻止成功导入 - 在您的情况下，这是 class 的错误`ContractForm`。回溯的其余部分详细说明了该类到底出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:57:02.587

如果我没记错的话。如果您正在导入合同模型，并且这两个应用程序似乎保存在应用程序文件夹中，因此您必须在导入时添加应用程序

```
from apps.administrative.models import Contract 
```

你应该像下面这样直接使用这个模型

```
FK_Contract = models.ForeignKey(Contract, unique=False, blank=True, null=True, on_delete=models.SET_NULL) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T14:39:00.370

我只是希望您在此问题中发布的代码中的缩进问题实际上不会在您的真实代码中发生。

例如，您`administrative/models.py`应该如下所示：

```
class Contract(models.Model):
    Code = models.CharField(max_length=50)
    Provider = models.CharField(max_length=30)
    Description = models.CharField(max_length=30)
    ActivationDate = models.DateField(blank=True, null=True)
    EndingDate = models.DateField(blank=True, null=True)
    Note = models.TextField(blank=True)
    Numbers = models.ManyToManyField('main.Number', through='Crefcontr2num')

    def __unicode__(self):
        return u'%s %s' % (self.Provider, self.Description)

class Crefcontr2num(models.Model):
    Dateto = models.DateField()
    Datefrom = models.DateField()
    Contract = models.ForeignKey('Contract')
    Num = models.ForeignKey('main.Number') 
```

一些技巧：

1.  不要将您的模型字段命名为大写。Python 的最佳实践是`date_to`, `date_from`, `contract`, 等等。详情请查看[PEP 8](http://www.python.org/dev/peps/pep-0008/)。
2.  在 ForeignKey 字段之前加上“FK_”也是一种不好的做法。只是多余的。当然这只是我的看法。也许您正在使用一些命名标准....但是如果您可以避免这种情况，那就更好了。
3.  将`verbose_name`参数添加到您的字段定义中。
4.  为字段添加`default`值。`null=True, blank=True`
5.  对模型进行详细说明（给出有意义的名称）。`Crefcontr2num`是一个坏的。

希望能帮助到你。

# clojure - Amazon Elastic BeanStalk、WAR 文件、热重载

> ID：10598318
> 
> 赞同：3
> 
> 时间：2012-05-15T09:58:51.010
> 
> 标签：clojure, amazon-web-services, amazon-elastic-beanstalk

我喜欢 Amazon Elastic Beanstalk 的简单性。

然而，热重载代码似乎相当困难。特别是，在阅读[WAR 文件格式 (Sun)](http://en.wikipedia.org/wiki/WAR_file_format_%28Sun%29)时，它指出：

> 在非常动态的环境中使用 WAR 文件进行 Web 部署的一个缺点是在运行时无法进行微小的更改。任何更改都需要重新生成和重新部署整个 WAR 文件。

这是不好的。我喜欢在 Clojure 中编程，这涉及到大量的测试/代码重载。

我的问题：在 Amazon Elastic Beanstalk 中热代码重新加载的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T22:27:20.467

在 Tomcat 的本地实例上进行开发，像 IntelliJ 这样的 IDE 会自动更新您的更改。一旦你达到了一个合理的里程碑，例如完成一个故事，然后重新部署你的战争。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:53:44.693

我最终提供了 Amazon Elastic Beanstalk 路由，并最终设置了 EC2 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:54:32.693

通过弹性beantalk 创建的ami 上的tomcat 安装已关闭热重载。@Rob 的答案将是要走的路。老实说，我不确定您为什么要以其他方式进行操作。

# android - 如何获取另一个类的选定字符串微调器

> ID：10598320
> 
> 赞同：0
> 
> 时间：2012-05-15T09:58:57.227
> 
> 标签：android, string, if-statement, spinner, android-spinner

如何在另一个类中检索选定的字符串

吐司并显示是否可以选择相同的字符串

声明包含在按钮脚本 set.OnCLick ...

否则使用

```
if (
 getString(R.id.spin1, equals("Book") == 
 getString(R.id.spin2, equals("Book")){
     Toast.makeText(getBaseContext(), "error", Toast.LENGTH_SHORT).show();
     `enter code here`
} 
```

spin1 是 A 类的微调器，而 spin2 是 B 类的微调器，但这但脚本不是这样吗？请帮我....？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:04:51.050

您可以使用共享首选项来存储和检索值：

存储价值的简单演示是

```
SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit(); 
```

有关更多信息，请查看此链接：

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

# iphone - iPhone：如何在 MapKit 上的两点之间画线？

> ID：10598322
> 
> 赞同：17
> 
> 时间：2012-05-15T09:58:58.373
> 
> 标签：iphone, objective-c, ios, ipad, mapkit

我有两个点的纬度和经度，并且想在这两个点之间用 MapKit 上的 Pin 画线。

我已经用谷歌搜索但找不到一些合适的解决方案，因为我发现的一个是用数据点数组绘制叠加层，但我在这两个点之间没有任何点数组。

只有两点，想在这两点之间画线。

请帮忙。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-15T10:19:05.407

首先让你的视图控制器实现`MKMapViewDelegate`协议并声明你需要的属性：

```
@property (nonatomic, retain) MKMapView *mapView; //this is your map view
@property (nonatomic, retain) MKPolyline *routeLine; //your line
@property (nonatomic, retain) MKPolylineView *routeLineView; //overlay view 
```

然后在`viewDidLoad`（例如，或者你初始化的任何地方）

```
//initialize your map view and add it to your view hierarchy - **set its delegate to self***
CLLocationCoordinate2D coordinateArray[2];
coordinateArray[0] = CLLocationCoordinate2DMake(lat1, lon1); 
coordinateArray[1] = CLLocationCoordinate2DMake(lat2, lon2);

self.routeLine = [MKPolyline polylineWithCoordinates:coordinateArray count:2];
[self.mapView setVisibleMapRect:[self.routeLine boundingMapRect]]; //If you want the route to be visible

[self.mapView addOverlay:self.routeLine]; 
```

然后实现`MKMapViewDelegate`' 方法`-(MKOverlayView *)mapView:viewForOverlay:`

```
-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay
{
    if(overlay == self.routeLine)
    {
        if(nil == self.routeLineView)
        {
            self.routeLineView = [[[MKPolylineView alloc] initWithPolyline:self.routeLine] autorelease];
            self.routeLineView.fillColor = [UIColor redColor];
            self.routeLineView.strokeColor = [UIColor redColor];
            self.routeLineView.lineWidth = 5;

        }

        return self.routeLineView;
    }

    return nil;
} 
```

您可以调整代码以满足您的需要，但对于 2 点或更多点来说，这非常简单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-15T10:31:30.693

请参阅本教程以在 mkmapview 中绘制折线或路线

1>[使用mapkit绘制路线](http://spitzkoff.com/craig/?p=65)

2>从ios4.0以上的版本可以使用[MKOverlayPathView See Apple Docs](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKOverlayPathView_class/Reference/Reference.html)

示例代码：-

创建折线：-

```
 -(void) loadRoute
    {
    NSString* filePath = [[NSBundle mainBundle] pathForResource:@”route” ofType:@”csv”];
    NSString* fileContents = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];
    NSArray* pointStrings = [fileContents componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    MKMapPoint northEastPoint;
    MKMapPoint southWestPoint; 

   MKMapPoint* pointArr = malloc(sizeof(CLLocationCoordinate2D) * pointStrings.count);

    for(int idx = 0; idx < pointStrings.count; idx++)
    {
    NSString* currentPointString = [pointStrings objectAtIndex:idx];
    NSArray* latLonArr = [currentPointString componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@","]];

    CLLocationDegrees latitude = [[latLonArr objectAtIndex:0] doubleValue];
    CLLocationDegrees longitude = [[latLonArr objectAtIndex:1] doubleValue];

    CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(latitude, longitude);

    MKMapPoint point = MKMapPointForCoordinate(coordinate);

        if (idx == 0) {
    northEastPoint = point;
    southWestPoint = point;
    }
    else
    {
    if (point.x > northEastPoint.x)
    northEastPoint.x = point.x;
    if(point.y > northEastPoint.y)
    northEastPoint.y = point.y;
    if (point.x < southWestPoint.x)
    southWestPoint.x = point.x;
    if (point.y < southWestPoint.y)
    southWestPoint.y = point.y;
    }

    pointArr[idx] = point;

    }

        self.routeLine = [MKPolyline polylineWithPoints:pointArr count:pointStrings.count];

    _routeRect = MKMapRectMake(southWestPoint.x, southWestPoint.y, northEastPoint.x - southWestPoint.x, northEastPoint.y - southWestPoint.y);

        free(pointArr);

    } 
```

显示 PoluLine :-

```
[self.mapView addOverlay:self.routeLine]; 
```

单独添加叠加层不会在地图上呈现任何内容。您的 MKMapViewDelegate 实现必须为您刚刚添加的这条路线返回一个覆盖，因为简单地添加不会有帮助。

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id )overlay
{
MKOverlayView* overlayView = nil;

if(overlay == self.routeLine)
{
//if we have not yet created an overlay view for this overlay, create it now.
if(nil == self.routeLineView)
{
self.routeLineView = [[[MKPolylineView alloc] initWithPolyline:self.routeLine] autorelease];
self.routeLineView.fillColor = [UIColor redColor];
self.routeLineView.strokeColor = [UIColor redColor];
self.routeLineView.lineWidth = 3;
}

overlayView = self.routeLineView;

}

return overlayView;

} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-09-22T09:01:03.547

![在此处输入图像描述](../Images/a66759d0b2e3e99e0384365cd5112ccc.png)

```
#import <MapKit/MapKit.h>   

- (void)viewDidLoad
{
        [mapview setDelegate:self];
        mapview.showsUserLocation = YES; 
}

- (CLLocationCoordinate2D)coordinateWithLocation:(NSDictionary*)location
{
    double latitude = [[location objectForKey:@"lat"] doubleValue];
    double longitude = [[location objectForKey:@"lng"] doubleValue];

    return CLLocationCoordinate2DMake(latitude, longitude);
}

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation   *)userLocation
{

    MKCoordinateSpan span = MKCoordinateSpanMake(0.005, 0.005);
    MKCoordinateRegion region = MKCoordinateRegionMake(userLocation.location.coordinate, span);

    [mapview setRegion:region];

    [mapview setCenterCoordinate:userLocation.coordinate animated:YES];
    NSString *baseUrl = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%f,%f&destination=%@&sensor=true", mapview.userLocation.location.coordinate.latitude,  mapview.userLocation.location.coordinate.longitude, @"24.1620661,72.394131"];

    //http://maps.googleapis.com/maps/api/directions/json?origin=23.030000,72.580000&destination=23.400000,72.750000&sensor=true

    NSURL *url = [NSURL URLWithString:[baseUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    NSLog(@"%@",url);
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) {

    NSError *error = nil;
    NSDictionary *result = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];

    NSArray *routes = [result objectForKey:@"routes"];
        NSLog(@"%@",routes);

    NSDictionary *firstRoute = [routes objectAtIndex:0];

    NSDictionary *leg =  [[firstRoute objectForKey:@"legs"] objectAtIndex:0];

    NSDictionary *end_location = [leg objectForKey:@"end_location"];

       NSLog(@"dDDDDDD>>>>>>%@",leg);
    double latitude = [[end_location objectForKey:@"lat"] doubleValue];
    double longitude = [[end_location objectForKey:@"lng"] doubleValue];

    CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(latitude, longitude);

    MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
    point.coordinate = coordinate;
    point.title =  [leg objectForKey:@"end_address"];
    point.subtitle = @"I'm here!!!";

    [self.mapview addAnnotation:point];

    NSArray *steps = [leg objectForKey:@"steps"];

    int stepIndex = 0;

    CLLocationCoordinate2D stepCoordinates[1  + [steps count] + 1];

    stepCoordinates[stepIndex] = userLocation.coordinate;

    for (NSDictionary *step in steps) {

        NSDictionary *start_location = [step objectForKey:@"start_location"];
        stepCoordinates[++stepIndex] = [self coordinateWithLocation:start_location];

        if ([steps count] == stepIndex){
            NSDictionary *end_location = [step objectForKey:@"end_location"];
            stepCoordinates[++stepIndex] = [self coordinateWithLocation:end_location];
        }
    }

    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:stepCoordinates count:1 + stepIndex];
    [mapview addOverlay:polyLine];

    CLLocationCoordinate2D centerCoordinate = CLLocationCoordinate2DMake((userLocation.location.coordinate.latitude + coordinate.latitude)/2, (userLocation.location.coordinate.longitude + coordinate.longitude)/2);

}];
} 
```

然后实现 MKMapViewDelegate 的方法 -(MKOverlayView *)mapView:viewForOverlay:

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
    polylineView.strokeColor = [UIColor colorWithRed:204/255\. green:45/255\. blue:70/255\. alpha:1.0];
    polylineView.lineWidth = 1;

    return polylineView;
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString *annotaionIdentifier=@"annotationIdentifier";
    MKPinAnnotationView *aView=(MKPinAnnotationView*)[mapView dequeueReusableAnnotationViewWithIdentifier:annotaionIdentifier ];
    if (aView==nil) {

        aView=[[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:annotaionIdentifier];
        aView.pinColor = MKPinAnnotationColorRed;
        aView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        //        aView.image=[UIImage imageNamed:@"arrow"];
        aView.animatesDrop=TRUE;
        aView.canShowCallout = YES;
        aView.calloutOffset = CGPointMake(-5, 5);
    }

    return aView;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-18T09:01:57.723

[![在 mapview 中设置 Pin 和画线。](../Images/e6a1efda569aa48341cc9b69b177aa33.png)](https://i.stack.imgur.com/xfclT.png)

```
First of all Add frame work
    1 Foundation.framework
    2 CoreGraphics.framework
    3 CoreLocation.framework
    4 MapKit.framework 
```

然后创建 nsobject 文件 就像看到.... TrailsMap.h 文件

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>
@interface TrailsMap : NSObject<MKAnnotation>
{
    CLLocationCoordinate2D coordinate;

    NSString *title;
    NSString *image;
    NSString *subtitle;
}

@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic,copy) NSString *title;
@property (nonatomic,copy) NSString *image;
@property (nonatomic,copy) NSString *subtitle;

- (id)initWithLocation:(CLLocationCoordinate2D)coord; 
```

TrailsMap.m

```
#import "TrailsMap.h"

@implementation TrailsMap
@synthesize coordinate,title,image,subtitle;

- (id)initWithLocation:(CLLocationCoordinate2D)coord{

    self = [super init];
    if (self) {
        coordinate = coord;

    }
    return self;
} 
```

现在在主视图中创建编码请参阅..

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface ViewController : UIViewController<MKMapViewDelegate>

@property (strong, nonatomic) IBOutlet MKMapView *MapView;
@property (nonatomic, retain) MKPolyline *routeLine;
@property (nonatomic, retain) MKPolylineView *routeLineView;

-(void)LoadMapRoute;
@end 
```

最后在 mainview.m 文件中创建编码

视图控制器.m

```
#import "ViewController.h"
#import "TrailsMap.h"

@interface ViewController ()
{
    NSData *alldata;
    NSMutableDictionary *data1;

   NSMutableArray *RouteLocation;
   NSMutableArray *RouteName;
}
@end

@implementation ViewController
@synthesize MapView,routeLine,routeLineView;

- (void)viewDidLoad
{
   [super viewDidLoad];

   RouteName = [[NSMutableArray alloc] initWithObjects:@"Ahmedabad",@"Rajkot", nil];
   RouteLocation = [[NSMutableArray alloc] initWithObjects:@"23.0300,72.5800",@"22.3000,70.7833", nil];
   [self LoadMapRoute];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

//-------------------------------------
// ************* Map ******************
//-------------------------------------

-(void)LoadMapRoute
{
    MKCoordinateSpan span = MKCoordinateSpanMake(0.8, 0.8);
    MKCoordinateRegion region;
    region.span = span;
    region.center= CLLocationCoordinate2DMake(23.0300,72.5800);

    // Distance between two address
   NSArray *coor1=[[RouteLocation objectAtIndex:0] componentsSeparatedByString:@","];
   CLLocation *locA = [[CLLocation alloc] initWithLatitude:[[coor1 objectAtIndex:0] doubleValue] longitude:[[coor1 objectAtIndex:1] doubleValue]];

   NSArray *coor2=[[RouteLocation objectAtIndex:1] componentsSeparatedByString:@","];
   CLLocation *locB = [[CLLocation alloc] initWithLatitude:[[coor2 objectAtIndex:0] doubleValue] longitude:[[coor2 objectAtIndex:1] doubleValue]];
    CLLocationDistance distance = [locA distanceFromLocation:locB];
    NSLog(@"Distance :%.0f Meters",distance);

   NSString *baseUrl = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%@&destination=%@&sensor=true", [RouteLocation objectAtIndex:0],[RouteLocation objectAtIndex:1] ];

   NSURL *url = [NSURL URLWithString:[baseUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
   alldata = [[NSData alloc] initWithContentsOfURL:url];

    NSError *err;
    data1 =[NSJSONSerialization JSONObjectWithData:alldata options:NSJSONReadingMutableContainers|NSJSONReadingMutableLeaves error:&err];

    if (err)
    {
        NSLog(@" %@",[err localizedDescription]);
    }

    NSArray *routes = [data1 objectForKey:@"routes"];
    NSDictionary *firstRoute = [routes objectAtIndex:0];
    NSDictionary *leg =  [[firstRoute objectForKey:@"legs"] objectAtIndex:0];
    NSArray *steps = [leg objectForKey:@"steps"];

    int stepIndex = 0;
    CLLocationCoordinate2D stepCoordinates[[steps count]+1 ];

    for (NSDictionary *step in steps)
    {

        NSDictionary *start_location = [step objectForKey:@"start_location"];
        double latitude = [[start_location objectForKey:@"lat"] doubleValue];
        double longitude = [[start_location objectForKey:@"lng"] doubleValue];
        stepCoordinates[stepIndex] = CLLocationCoordinate2DMake(latitude, longitude);

        if (stepIndex==0)
        {
            TrailsMap *point=[[TrailsMap alloc] initWithLocation:stepCoordinates[stepIndex]];
            point.title =[RouteName objectAtIndex:0];
            point.subtitle=[NSString stringWithFormat:@"Distance :%.0f Meters",distance];
            [self.MapView addAnnotation:point];
        }
        if (stepIndex==[steps count]-1)
        {
            stepIndex++;
            NSDictionary *end_location = [step objectForKey:@"end_location"];
            double latitude = [[end_location objectForKey:@"lat"] doubleValue];
            double longitude = [[end_location objectForKey:@"lng"] doubleValue];
            stepCoordinates[stepIndex] = CLLocationCoordinate2DMake(latitude, longitude);

            TrailsMap *point=[[TrailsMap alloc] initWithLocation:stepCoordinates[stepIndex]];
            point.title = [RouteName objectAtIndex:1];
            point.subtitle=[NSString stringWithFormat:@"Distance :%.0f Meters",distance];

            [self.MapView addAnnotation:point];
        }
        stepIndex++;
    }

    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:stepCoordinates count: stepIndex];
    [MapView addOverlay:polyLine];
    [MapView setRegion:region animated:YES];
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
    polylineView.strokeColor = [UIColor colorWithRed:204/255\. green:45/255\. blue:70/255\. alpha:1.0];
    polylineView.lineWidth = 5;

    return polylineView;
} 
```

如果您想在地图中设置多个引脚，则只需添加此代码。Annotaion 是 Objectfile。

```
-(void)LoadMultiplePin
{
    RouteName = [[NSMutableArray alloc] initWithObjects:@"Ahmedabad",@"Rajkot",@"Limdi", nil];
    RouteLocation = [[NSMutableArray alloc] initWithObjects:@"23.0300,72.5800",@"22.3000,70.7833",@"22.5728,71.8114", nil];

    MKCoordinateSpan span = MKCoordinateSpanMake(2.9, 2.9);
    MKCoordinateRegion region;

    region.span = span;
    region.center= CLLocationCoordinate2DMake(22.5728,71.8114);

    int cnt=RouteLocation.count;

    for (int p=0 ; p<cnt ; p++ )
    {
        NSArray *coor=[[RouteLocation objectAtIndex:p] componentsSeparatedByString:@","];

        CLLocationCoordinate2D location=CLLocationCoordinate2DMake([[coor objectAtIndex:0] doubleValue],[[coor objectAtIndex:1] doubleValue]);

        Annotaion *point=[[Annotaion alloc] initWithLocation:location];
        point.title =[RouteName objectAtIndex:p];
        [Map addAnnotation:point];
    }
    [Map setRegion:region animated:YES];

} 
```

通过使用此代码，您可以轻松地放下两个引脚并在这两个引脚之间画线享受快乐编码...:)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-07-05T08:30:57.410

我从@graver 那里得到了很好的答案，并为 Swift 3 做了这个：

```
// Called from viewDidLoad
func setupMap() {
    mapView.delegate = self
    // BusStop implements the MKAnnotation protocol, I have an array of them
    let routeCoordinates = busStops.map({ $0.coordinate })
    let routeLine = MKPolyline(coordinates: routeCoordinates, count: routeCoordinates.count)
    mapView.setVisibleMapRect(routeLine.boundingMapRect, animated: false)
    mapView.add(routeLine)
}

// MARK: MKMapViewDelegate

func mapView(_ mapView: MKMapView, rendererFor overlay: MKOverlay) -> MKOverlayRenderer {
    if let polyline = overlay as? MKPolyline {
        let polylineRenderer = MKPolylineRenderer(overlay: polyline)
        polylineRenderer.strokeColor = .blue
        polylineRenderer.lineWidth = 3
        return polylineRenderer
    }
    return MKOverlayRenderer(overlay: overlay)
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-18T12:33:57.447

我在 swift 中创建了演示，并使用折线在地图上继续更新位置。

请按照以下步骤操作：

1）创建新项目并设置所需的东西。2）转到项目目标->构建阶段->将二进制文件与库链接并添加 **MapKit.framwork**，**CoreLocation.framework**。3）转到sotryboard并使用您的viewcontroller添加mapview和linkup。4）添加我在下面提供代码的属性和委托。

**视图控制器.Swift**

导入 UIKit

导入 MapKit

导入核心位置

类视图控制器：UIViewController，CLLocationManagerDelegate，MKMapViewDelegate{

```
@IBOutlet weak var mapView:MKMapView!
var locationManager: CLLocationManager!
var routeArr:[CLLocationCoordinate2D] = []
var isStarted:Bool = false

// MARK:- Life cycle
override func viewDidLoad() {
    super.viewDidLoad()

    locationManager = CLLocationManager()
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.delegate = self;
    locationManager.startMonitoringSignificantLocationChanges()
    locationManager.allowsBackgroundLocationUpdates = true
    locationManager.pausesLocationUpdatesAutomatically = false

    // user activated automatic authorization info mode
    let status = CLLocationManager.authorizationStatus()
    if status == .notDetermined || status == .denied || status == .authorizedWhenInUse {
           // present an alert indicating location authorization required
           // and offer to take the user to Settings for the app via
           // UIApplication -openUrl: and UIApplicationOpenSettingsURLString
           locationManager.requestAlwaysAuthorization()
           locationManager.requestWhenInUseAuthorization()
       }

    locationManager.startUpdatingLocation()
    locationManager.startUpdatingHeading()

    mapView.delegate = self
    mapView.showsUserLocation = true
    mapView.mapType = MKMapType(rawValue: 0)!
    mapView.userTrackingMode = MKUserTrackingMode(rawValue: 2)!
}

// MARK:- Button Actions

@IBAction func startBtnClick(_ sender: Any) {
    isStarted = true
}

@IBAction func endBtnClick(_ sender: Any) {
    isStarted = false
    routeArr.removeAll()
}

// MARK:- LocationManager Delegate

func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) {
    let location = locations.last

    if isStarted == true {
        if locations.count > 0 {
            let newLocation:CLLocationCoordinate2D = (location?.coordinate ?? nil)!
            routeArr.append(newLocation)
            DispatchQueue.main.async {
                if self.routeArr.count > 2 {
                    let route:[CLLocationCoordinate2D] = [self.routeArr[self.routeArr.count - 2] ,self.routeArr.last!]
                    print(route)
                    let polyline = MKPolyline(coordinates: route, count: route.count)
                    self.mapView.addOverlay(polyline)
                }
            }
        }
    }
}

func mapView(_ mapView: MKMapView, rendererFor overlay: MKOverlay) -> MKOverlayRenderer {
    if (overlay is MKPolyline) {
        let pr = MKPolylineRenderer(overlay: overlay)
        pr.strokeColor = UIColor.red
        pr.fillColor = .green
        pr.lineWidth = 5
        return pr
    }else {
      return MKOverlayRenderer()
    }
} 
```

}

运行您的项目并单击开始按钮进行跟踪，您可以在地图上看到折线。如果单击停止按钮，它将停止绘制折线。

谢谢

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-01T05:26:46.347

**传递你的地址**

```
-(NSArray*) calculateRoutesFrom:(CLLocationCoordinate2D) f to: (CLLocationCoordinate2D) t {
    NSString* saddr = [NSString stringWithFormat:@"%f,%f", f.latitude, f.longitude];
    NSString* daddr = [NSString stringWithFormat:@"%f,%f", t.latitude, t.longitude];

NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.google.com/maps?             output=dragdir&saddr=%@&daddr=%@", saddr, daddr];
//    NSString* apiUrlStr = @"http://maps.google.com/maps?output=dragdir&saddr=40.769264,-73.958995&daddr=47.286522,-122.312932";
NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];
NSLog(@"api url: %@", apiUrl);
NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl encoding:NSUTF8StringEncoding error:nil];
NSString* encodedPoints = [apiResponse stringByMatching:@"points:\\\"([^\\\"]*)\\\"" capture:1L];
return [self decodePolyLine:[encodedPoints mutableCopy]];
}

-(NSMutableArray *)decodePolyLine: (NSMutableString *)encoded {
    [encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\"
                                options:NSLiteralSearch
                                  range:NSMakeRange(0, [encoded length])];
    NSInteger len = [encoded length];
    NSInteger index = 0;
    NSMutableArray *array = [[NSMutableArray alloc] init];
    NSInteger lat=0;
    NSInteger lng=0;
    while (index < len) {
        NSInteger b;
        NSInteger shift = 0;
        NSInteger result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lng += dlng;
        NSNumber *latitude = [[NSNumber alloc] initWithFloat:lat * 1e-5];
        NSNumber *longitude = [[NSNumber alloc] initWithFloat:lng * 1e-5];
        printf("[%f,", [latitude doubleValue]);
        printf("%f]", [longitude doubleValue]);
        CLLocation *loc = [[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]];
        [array addObject:loc];
    }

    return array;
}

-(void) updateRouteView:(UIColor *)clr {
    CGContextRef context =CGBitmapContextCreate(nil,routeView.frame.size.width,routeView.frame.size.height,8,4 * routeView.frame.size.width,CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedLast);

    CGContextSetStrokeColorWithColor(context, clr.CGColor);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
    CGContextSetLineWidth(context, 3.0);

    for(int i = 0; i < routes.count; i++) {
        CLLocation* location = [routes objectAtIndex:i];
        CGPoint point = [mapView convertCoordinate:location.coordinate toPointToView:routeView];

        if(i == 0) {
            CGContextMoveToPoint(context, point.x, routeView.frame.size.height - point.y);
        } else {
            CGContextAddLineToPoint(context, point.x, routeView.frame.size.height - point.y);

        }
    }

    CGContextStrokePath(context);

    CGImageRef image = CGBitmapContextCreateImage(context);
    UIImage* img = [UIImage imageWithCGImage:image];

    routeView.image = img;
    CGContextRelease(context);

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-15T10:00:45.353

您可以使用 MKPolyline 在地图中绘制线条。

看到这个链接

[http://spitzkoff.com/craig/?p=136](http://spitzkoff.com/craig/?p=136)

还：

[https://github.com/kishikawakatsumi/MapKit-Route-Directions](https://github.com/kishikawakatsumi/MapKit-Route-Directions)

[http://cloudmade.com/](http://cloudmade.com/)

这些都是您可以轻松参考的教程和开源库。目前 MapKit**不**支持此功能...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-15T10:22:20.930

在这里，您必须计算路线的纬度和经度，然后在 MapView 上绘制折线......我在我的应用程序中做这些事情......我在 mapview 上用所有信息绘制路线......

在这里，如果您使用 MapKit 并且还使用 RagexKitLite，那么它对您来说太简单了，只需获得 RagexKitLite 的演示......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-24T04:18:11.170

[![在此处输入图像描述](../Images/fce0d0b9535d3c3353c34a3f5dbf1ae5.png)](https://i.stack.imgur.com/sX4O1.jpg)

获取完整代码：[https ://github.com/javedmultani16/MapKitWithPolyLine](https://github.com/javedmultani16/MapKitWithPolyLine)

画线如：

```
 directionsRequest.transportType = MKDirectionsTransportType.automobile

        //Draw polyline by using MKRoute so it follows the street roads...
        for (k, item) in arrayarrayPlacemarks.enumerated() {
            if k < (arrayarrayPlacemarks.count - 1) {
                directionsRequest.source = item
                directionsRequest.destination = arrayarrayPlacemarks[k+1]

                let directions = MKDirections(request: directionsRequest)
          directions.calculate { (response:MKDirections.Response!, error: Error!) -> Void in
                    if error == nil {
                        self.locRoute = response.routes[0] as? MKRoute
                        let geodesic:MKPolyline = self.locRoute!.polyline
                        self.mapView.addOverlay(geodesic)
                    }
                }
            }
        } 
```

委托方法：

```
 func mapView(_ mapView: MKMapView, rendererFor overlay: MKOverlay) -> MKOverlayRenderer {
        if overlay.isKind(of: MKPolyline.self){
                var polylineRenderer = MKPolylineRenderer(overlay: overlay)
                polylineRenderer.fillColor = UIColor.blue
                polylineRenderer.strokeColor = UIColor.blue
                polylineRenderer.lineWidth = 2

            return polylineRenderer
     }
        return MKOverlayRenderer(overlay: overlay)
    } 
```

# android - 找出 OSMdroid 中的当前位置

> ID：10598330
> 
> 赞同：4
> 
> 时间：2012-05-15T09:59:23.380
> 
> 标签：android, osmdroid

我想找到我当前位置的地图并在我通过在 OSMdroid 中显示图标移动时对其进行更新。在给出特定位置的纬度和经度以及绘图图标时我发现没有问题，但是当我给出当前位置的纬度和经度时有两个错误。

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    mResourceProxy = new DefaultResourceProxyImpl(getApplicationContext());
    setContentView(R.layout.main);        
    mMapView = (MapView) this.findViewById(R.id.mapview);
    mMapView.setTileSource(TileSourceFactory.MAPNIK);
    mMapView.setBuiltInZoomControls(true);
    mMapView.setMultiTouchControls(true);        
    mapController = this.mMapView.getController();
    mapController.setZoom(15);

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    String provider = mLocMgr.getBestProvider(criteria, true);
    Location location = mLocMgr.getLastKnownLocation(provider);
    GeoPoint mypoint = new GeoPoint(location.getLatitude(), location.getLongitude()); // centre map here
    GeoPoint mypointicon = new GeoPoint(location.getLatitude()+1000, location.getLongitude()+1000); // icon goes here
    mapController.setCenter(mypoint);            
    mLocMgr = (LocationManager) getSystemService(LOCATION_SERVICE);
    mLocMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 100,
            this);        
    ArrayList<OverlayItem> items=new ArrayList<OverlayItem>();
    items.add(new OverlayItem("Here", "Sample Description", mypointicon));
    this.mMyLocationOverlay = new ItemizedIconOverlay<OverlayItem>(items,
            new ItemizedIconOverlay.OnItemGestureListener<OverlayItem>() {
                @Override
                public boolean onItemSingleTapUp(final int index,
                        final OverlayItem item) {
                    Toast.makeText(
                            MapOverLayGiveActivity.this,
                            "Item '" + item.mTitle, Toast.LENGTH_LONG).show();
                    return true; // We 'handled' this event.
                }
                @Override
                public boolean onItemLongPress(final int index,
                        final OverlayItem item) {
                    Toast.makeText(
                            MapOverLayGiveActivity.this, 
                            "Item '" + item.mTitle ,Toast.LENGTH_LONG).show();
                    return false;
                }
            }, mResourceProxy);
    this.mMapView.getOverlays().add(this.mMyLocationOverlay);
    mMapView.invalidate();        
} 
```

错误：java.lang.NullPointerException
java.lang.RunTimeException

我的代码有什么问题，我该怎么做？谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T10:04:27.523

要跟踪位置变化，请按如下方式实现 LocationListener：

```
public class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {
        currentLocation = new GeoPoint(location);
        displayMyCurrentLocationOverlay();
    }

    public void onProviderDisabled(String provider) {
    }

    public void onProviderEnabled(String provider) {
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

在 onCreate 方法内部：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    locationListener = new MyLocationListener();        
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    if( location != null ) {
        currentLocation = new GeoPoint(location.getLatitude(), location.getLongitude());
    }
} 
```

和 displayMyCurrentLocationOverlay 方法：

```
private void displayMyCurrentLocationOverlay() {
    if( currentLocation != null) {
        if( currentLocationOverlay == null ) {
            currentLocationOverlay = new ArrayItemizedOverlay(myLocationMarker);
            myCurrentLocationOverlayItem = new OverlayItem(currentLocation, "My Location", "My Location!");
            currentLocationOverlay.addItem(myCurrentLocationOverlayItem);
            mapView.getOverlays().add(currentLocationOverlay);              
        } else {
            myCurrentLocationOverlayItem.setPoint(currentLocation);
            currentLocationOverlay.requestRedraw();
        }
        mapView.getController().setCenter(currentLocation);
    }       
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T09:29:47.327

如果您在模拟器上进行测试，请记住使用 DDMS 设置您当前的纬度和经度。如果不这样做，getLastKnownLocation 将返回 null

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T21:56:26.650

您使用 this.myLocationOverlay - 因此 osmDroid 绘制当前位置 - 但要更新位置，您必须使用位置侦听器。`mapView.getOverlays.clear()`此外，您必须使用函数从地图中删除以前的叠加层

好吧，假设您无法访问互联网或 GPS。在我看来，在地图上设置一个默认点是安全的。在这段代码中，我检查了一个有效的位置。如果为空，那么我使用 DEFAULT 值。在我的应用程序中，我没有问题。即使我的位置发生了变化，我也会在地图上绘制导航路径。

```
{
    Location location = null;

            for (String provider : locationManager.getProviders(true))
            {
                location = locationManager.getLastKnownLocation(provider);
                if (location != null)
                {
                    //location.setLatitude(MAP_DEFAULT_LATITUDE);
                    //location.setLongitude(MAP_DEFAULT_LONGITUDE);
                    locationManager.requestLocationUpdates(provider, 0, 0, mUpdateHandler);
                    break;
                }
            }

            //add car position
            if (location == null)
            {
                location = new Location(LocationManager.GPS_PROVIDER);
                location.setLatitude(MAP_DEFAULT_LATITUDE);
                location.setLongitude(MAP_DEFAULT_LONGITUDE);
                updateCarPosition(new GeoPoint(location));
            }

} 
```

# c# - 将 div 和其中的内容转换为图像

> ID：10598333
> 
> 赞同：3
> 
> 时间：2012-05-15T09:59:33.993
> 
> 标签：c#, javascript, jquery, vb.net

我有一个 DIV 容器，其中包含一些文本、背景图像、图像。我需要将整个 DIV 内容转换为图像并保存。

我用谷歌搜索了它，但找不到完美的答案。有些人给出了使用 Windows 应用程序的答案，但我需要在 Web 平台上使用它。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:05:43.527

据我了解，您必须在客户端执行此操作，因此您应该查看画布的 toDataURL 方法。

如果你不知道，画布支持文本和图像。

此链接上的示例和小库：http: [//www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:08:57.410

[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

不过不支持IE。除此之外看起来很坚固。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:11:14.140

这是可能的，通过修改此处的代码[http://html2canvas.hertzen.com/screenshots.html](http://html2canvas.hertzen.com/screenshots.html)您可以执行所需的`screenshot`:)

# iphone - 自定义单元格标签文本颜色

> ID：10598339
> 
> 赞同：0
> 
> 时间：2012-05-15T09:59:41.120
> 
> 标签：iphone, uitableview, uilabel, textcolor

我想在 UITableViewCell 的 initWithStyle 方法中更改 UILabel 文本颜色。但是颜色并没有改变。但是当在 cellForRowAtIndexPath 方法中完成颜色更改时，颜色会发生变化。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:20:54.023

根据您使用标签的方式，您只需要设置 textColor 属性：

为了在方法中创建 tableViewCell，`- (UITableViewCell*)tableView:(UITableView *)tableView`我认为您使用了如下方法：

```
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"]; 
```

`UITableViewCellStyleDefault`您的样式可能是`UITableViewCellStyleValue1 or`UITableViewCellStyleValue2 `or`UITableViewCellStyleSubtitle`。

现在，如果您添加自己的标签而不是使用，则无论您使用什么样式：

```
UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(10,10,100,25)];
lbl.text = @"your Text";
[lbl setTextColor:[UIColor greenColor]]; 
```

如果您没有添加自己的标签并使用对象`textLabel`或对象`detailTextLabel`的默认标签`UITableViewCell`：

```
[cell.textLabel setTextColor:[UIColor greenColor]];
[cell.detailTextLabel setTextColor:[UIColor greenColor]]; 
```

如果您在子视图中添加任何标签，例如：

```
UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(10,10,100,25)];
lbl.text = @"your Text";
[lbl setTextColor:[UIColor greenColor]]; 
```

你可以`greenColor`用你想要的颜色替换。希望这可以帮助 ：）

# eclipse - 指向 Eclipse 编辑器页面的超链接

> ID：10598342
> 
> 赞同：1
> 
> 时间：2012-05-15T09:59:50.447
> 
> 标签：eclipse, eclipse-plugin

我正在尝试在 Eclipse 中为具有多个页面的特定类型的文件编写一个编辑器，就像 PDE 编辑器一样。

如何在主概览页面中获得指向单个页面之一的超链接？

我已经绘制了超链接，但我不知道如何将其链接到实际页面，以便当用户单击它时，页面视图会发生变化。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:12:59.323

按照这个食谱：

*   创建主页面和所有子页面
*   添加链接
*   使用添加`HyperlinkAdapter`到链接`link.addHyperlinkListener()`
*   在`linkActivated()`你可以切换页面`formEditor.setActivePage(...)`

# javascript - 使用 Javascript 将 iframe 插入 div - 用于 Greasemonkey

> ID：10598345
> 
> 赞同：5
> 
> 时间：2012-05-15T10:00:07.993
> 
> 标签：javascript, dom, greasemonkey

我需要使用 javascript 将 iframe 插入到 div 中。我需要这个用javascript编写的，所以我可以在greasemonkey脚本中使用代码（并且greasemonkey只允许javascript）。

该greasemonkey 脚本将AOL 的搜索栏插入各种网站。我在下面包含了有效的 HTML 代码，因此您可以对其进行测试以查看其工作时的最终结果。

这正是我需要做的，用 HTML 编写：

```
<div style="overflow: hidden; width: 564px; height: 43px; position: relative;">
<iframe src="http://aol.com" style="border: 0pt none ; left: -453px; top: -70px; position: absolute; width: 1440px; height: 775px;" scrolling="no"></iframe>
</div> 
```

我需要使该 HTML 代码在greasemonkey 中工作，这需要它用javascript 编写。这是我到目前为止所得到的（我的最后一个问题在“伪代码”下面）：

```
var makeIframe = document.createElement("iframe");
makeIframe.setAttribute("src", "http://aol.com");
makeIframe.setAttribute("scrolling", "no");
makeIframe.setAttribute("border", "0pt");
makeIframe.setAttribute("border", "none");
makeIframe.setAttribute("left", "-453px");
makeIframe.setAttribute("top", "-70px");
makeIframe.setAttribute("position", "absolute");
makeIframe.setAttribute("width", "1440px");
makeIframe.setAttribute("height", "775px");
makeIframe.setAttribute("scrolling", "no");

var makediv = document.createElement("div");
makediv.setAttribute("height", "43px");
makediv.setAttribute("width", "564px");
makediv.setAttribute("position", "relative");
makediv.setAttribute("overflow", "hidden"); 
```

我已经知道如何插入 iframe 或将 div 插入我需要插入的网站的源代码中，方法是：

```
var getRef = document.getElementById("div-id-to-insert-element-before");
var parentDiv = getRef.parentNode;
parentDiv.insertBefore(iframe OR div, getRef); 
```

我不知道该怎么做，是如何将 iframe 写入 div，然后将该 div 插入到源代码中。最后一个代码片段可用于将 div 或 iframe 插入源代码，但我需要 div 内的 iframe，然后将该 div 插入源代码（使用最后一个代码片段）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T11:18:10.393

1-您可以使用[element.appendChild](https://developer.mozilla.org/en/DOM/element.appendChild)

```
makediv.appendChild(makeIframe); 
```

2-或者像这样将iframe作为html附加到div中，

```
makediv.innerHTML = '<iframe src="http://aol.com" style="border: 0pt none ;'+ 
                    'left: -453px; top: -70px; position: absolute;'+ 
                    'width: 1440px;'+ 
                    'height: 775px;" scrolling="no"></iframe>'; 
```

而不是将 makediv 插入到您想要的位置，

```
var getRef = document.getElementById("div-id-to-insert-element-before");
var parentDiv = getRef.parentNode;
parentDiv.insertBefore(makediv, getRef); 
```

**更新：**

你不能用`setAttribute`功能设置风格，

```
var makeIframe = document.createElement("iframe");
makeIframe.setAttribute("src", "http://aol.com");
makeIframe.setAttribute("scrolling", "no");
makeIframe.style.border = "none";
makeIframe.style.left =  "-453px";
makeIframe.style.top = "-70px";
makeIframe.style.position = "absolute";
makeIframe.style.width = "1440px";
makeIframe.style.height = "775px";

var makediv = document.createElement("div");
makediv.style.height = "43px";
makediv.style.width = "564px";
makediv.style.position = "relative";
makediv.style.overflow = "hidden"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-14T17:08:25.137

使用页面重新加载页面重定向到*iframe*的 src URL 。
为避免这种情况，请使用沙盒*iframe*，如下所示：

```
<pre>
<code>
<iframe sandbox="allow-forms allow-same-origin allow-scripts" src="https://yoururl.com/"></iframe>
</code>
</pre> 
```

# javascript - 从 json 插入数据到 sqlite

> ID：10598347
> 
> 赞同：0
> 
> 时间：2012-05-15T10:00:16.203
> 
> 标签：javascript, json, sqlite, cordova, jaydata

我是移动编程的新手，我想找到如何在 sqlite 中存储来自 json 的数据，json 文件将从服务器发送，所以我如何获取它并将数据插入到 sqlite 我正在使用 phonegap 和 jquerymobile 以及我的应用程序是混合的。我的 json 文件：

```
{
  "flux": {
    "typeflux": "virement",
        "contenu": {
      "cours": [
        {

        {
          "-date": "02/01/2011",
          "value": [
            {
              "-devise": "USD",
              "-achat": "2.2477",
              "-vente": "3.2477"
            },

            {
              "-devise": "EUR",
              "-achat": "2.2477",
              "-vente": "3.2314"
            }

          ]}
      ]}
  }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:45:09.390

我确实相信[JayData](http://jaydata.org)是您正在寻找的东西。它可以帮助您管理混合应用程序中有关 webSql/sqlite 数据或在线数据源的数据 - 全部使用 JavaScript。还有一个入门[教程](http://jaydata.org/tutorials/hybrid-mobile-development-with-jaydata)，展示了如何在 phonegap 应用程序中使用 sqLite 和 JayData。

# android - 使用 CAB 在自定义 ListView 中进行多项选择

> ID：10598348
> 
> 赞同：29
> 
> 时间：2012-05-15T10:00:20.183
> 
> 标签：android, android-listview

在阅读并尝试了几天后，我放弃并寻求帮助。

<编辑> 我正在使用 ActionBarSherlock。</编辑>

**我想要实现的目标：** 每行都有一个自定义布局的 ListView，用户可以在其中选择多个列表项。选定的列表项应具有不同的背景颜色。当至少选择了一项时，应显示上下文操作栏 (CAB)。它应该看起来或多或少像 GMail 应用程序中的多个电子邮件选择。唯一的区别是，在 gmail 应用程序中，选择是通过单击一行的复选框来完成的，而我不想有一个复选框，但是无论用户点击哪里，都应该选择一行。 ![Gmail 应用程序中的多项选择](../Images/257944341689d9935f6df260b57cd098.png)

**我尝试了什么：** 按照[本教程](http://www.marvinlabs.com/2010/10/custom-listview-ability-check-items/)，在切换检查状态时使用带有一些逻辑的可检查行布局来更改背景颜色，除了我无法在 ListView 上注册像 OnItemClickListener 这样的单击侦听器以显示 CAB 之外，我一切正常. 为每一行 View 提供单击侦听器都没有帮助，因为这阻止了更改所选项目的背景颜色。我也尝试像这样将 MultiChoiceModeListener 添加到 ListView

```
 listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
    listView.setMultiChoiceModeListener(new MultiChoiceModeListener() { //.. }); 
```

结果相同，背景颜色没有变化。

**我在找什么**：提示或教程或示例代码如何做到这一点。如果您需要一些代码片段来提供帮助，请告诉我。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-15T10:13:34.910

看看代码是否对你有帮助（它基本上是`ListActivity`一个自定义适配器来保存检查项目的状态（+不同的背景））：

```
public class CABSelection extends ListActivity {

    private ArrayList<String> mItems = new ArrayList<String>();
    private SelectionAdapter mAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        for (int i = 0; i < 24; i++) {
            mItems.add("Name" + i);
        }
        // R.layout.adapters_cabselection_row is a LinearLayout(with green
        // background(#99cc00)) that wraps an ImageView and a TextView
        mAdapter = new SelectionAdapter(this,
                R.layout.adapters_cabselection_row, R.id.the_text, mItems);
        setListAdapter(mAdapter);
        getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
        getListView().setMultiChoiceModeListener(new MultiChoiceModeListener() {

            private int nr = 0;

            @Override
            public boolean onCreateActionMode(ActionMode mode, Menu menu) {
                MenuInflater inflater = getMenuInflater();
                inflater.inflate(R.menu.cabselection_menu, menu);
                return true;
            }

            @Override
            public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
                return false;
            }

            @Override
            public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
                StringBuilder sb = new StringBuilder();
                Set<Integer> positions = mAdapter.getCurrentCheckedPosition();
                for (Integer pos : positions) {
                    sb.append(" " + pos + ",");
                }               
                switch (item.getItemId()) {
                case R.id.edit_entry:
                    Toast.makeText(CABSelection.this, "Edited entries: " + sb.toString(),
                            Toast.LENGTH_SHORT).show();
                    break;
                case R.id.delete_entry:
                    Toast.makeText(CABSelection.this, "Deleted entries : " + sb.toString(),
                            Toast.LENGTH_SHORT).show();
                    break;
                case R.id.finish_it:
                    nr = 0;
                    mAdapter.clearSelection();
                    Toast.makeText(CABSelection.this, "Finish the CAB!",
                            Toast.LENGTH_SHORT).show();
                    mode.finish();
                }
                return false;
            }

            @Override
            public void onDestroyActionMode(ActionMode mode) {
                nr = 0;
                mAdapter.clearSelection();
            }

            @Override
            public void onItemCheckedStateChanged(ActionMode mode,
                    int position, long id, boolean checked) {
                if (checked) {
                    nr++;
                    mAdapter.setNewSelection(position, checked);                    
                } else {
                    nr--;
                    mAdapter.removeSelection(position);                 
                }
                mode.setTitle(nr + " rows selected!");

            }

        });
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        l.setItemChecked(position, !mAdapter.isPositionChecked(position));
    }

    private class SelectionAdapter extends ArrayAdapter<String> {

        private HashMap<Integer, Boolean> mSelection = new HashMap<Integer, Boolean>();

        public SelectionAdapter(Context context, int resource,
                int textViewResourceId, List<String> objects) {
            super(context, resource, textViewResourceId, objects);
        }

        public void setNewSelection(int position, boolean value) {
            mSelection.put(position, value);
            notifyDataSetChanged();
        }

        public boolean isPositionChecked(int position) {
            Boolean result = mSelection.get(position);
            return result == null ? false : result;
        }

        public Set<Integer> getCurrentCheckedPosition() {
            return mSelection.keySet();
        }

        public void removeSelection(int position) {
            mSelection.remove(position);
            notifyDataSetChanged();
        }

        public void clearSelection() {
            mSelection = new HashMap<Integer, Boolean>();
            notifyDataSetChanged();
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = super.getView(position, convertView, parent);//let the adapter handle setting up the row views
            v.setBackgroundColor(Color.parseColor("#99cc00")); //default color
            if (mSelection.get(position) != null) {
                v.setBackgroundColor(Color.RED);// this is a selected position so make it red
            }
            return v;
        }

    }

} 
```

这`R.layout.adapters_cabselection_row`是具有绿色背景的行的自定义布局（一个非常简单的布局）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#99cc00" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/the_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#ffffff"
        android:textSize="17sp"
        android:textStyle="bold" />

</LinearLayout> 
```

`R.menu.cabselection_menu``Toast`是一个带有 3 个选项（编辑、删除、完成 CAB）的菜单文件，除了弹出一个关于所选行的消息之外什么都不做：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/edit_entry"
        android:icon="@android:drawable/ic_menu_edit"
        android:title="Edit!"/>
    <item
        android:id="@+id/delete_entry"
        android:icon="@android:drawable/ic_menu_delete"
        android:title="Delete!"/>
    <item
        android:id="@+id/finish_it"
        android:icon="@android:drawable/ic_menu_crop"
        android:title="Get me out!"/>

</menu> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-02T11:08:48.663

我认为最简单的方法是申请

`android:background="android:attr/activatedBackgroundIndicator"`

您将点击哪个布局。

选择使用时突出显示布局

```
listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL); 
```

反正为我工作

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-21T08:51:50.933

如果您想支持 API 级别 < 11 ，则使用 Luksprog 的答案中使用的 ActionBarSherlock`MultiChoiceModeListener`尚不可用。

一种解决方法是使用 onItemClickListener。

列表设置：

```
listView = (ListView) timeline.findViewById(android.R.id.list);
listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
listView.setItemsCanFocus(false);
listView.setAdapter(new ListAdapter(getActivity(), R.layout.cleaning_list_item, items)); 
```

ListFragment 或 ListActivity 的监听器：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    SparseBooleanArray checked = listView.getCheckedItemPositions();
    boolean hasCheckedElement = false;
    for (int i = 0; i < checked.size() && !hasCheckedElement; i++) {
        hasCheckedElement = checked.valueAt(i);
    }

    if (hasCheckedElement) {
        if (mMode == null) {
            mMode = ((SherlockFragmentActivity) getActivity()).startActionMode(new MyActionMode());
            mMode.invalidate();
        } else {
            mMode.invalidate();
        }
    } else {
        if (mMode != null) {
            mMode.finish();
        }
    }
} 
```

其中 MyActionMode 是 ActionMode.Callback 的实现：

```
private final class MyActionMode implements ActionMode.Callback { /* ... */ } 
```

# php - PHP 随机字符串生成器比预期的更随机

> ID：10598354
> 
> 赞同：3
> 
> 时间：2012-05-15T10:00:44.877
> 
> 标签：php, string, random, generator

我一直在使用它来对随机的 12 个字符串进行性别化：

```
//  lost-in-code.com/programming/php-code/php-random-string-with-numbers-and-letters
$ch = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@$%^&(){}[]+=-_/?|*#";
$sc = "";    
for ($p = 0; $p < 12; $p++) {
    $sc .= $ch[mt_rand(0,82)];  // 83 is the strlen of characters
} 
```

事实证明，它实际上可以在字符串中包含一个空格。这是没有预料到的！

为什么会这样？是否将下划线视为空格？它一直在导致随机（直到现在，无法追踪）错误。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:07:11.687

猜测（未经测试）将 $ch 字符串周围的引号更改为单引号。阻止大括号被“评估”

* * *

编辑：

只是在一些测试后更新 - 它不是“按原样”转换 - 所以代码中还有其他东西会导致问题。只运行了超过 100,000 次，没有空格。

仍然用单引号排除该问题（您可能还有其他正在评估的变量），但这并不是问题所在。

[此处](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)描述了危险字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:34:41.157

你的功能看起来不错。我认为可能的情况是您稍后在代码中对结果字符串应用一些解码功能。例如，urldecode 后的“M0i/%20=3ia5”看起来像“M0i/ =3ia5”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:43:42.673

您最终可能会生成 html 实体。想象一下，如果您的代码生成`&nbsp`，或者`&#160`例如，字符串中会出现一个空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-03T09:01:02.467

为什么不直接使用：

```
 $length = 12;
    $randomString = substr(str_shuffle("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"), 0, $length);
    echo $randomString; 
```

# java - SQL 请求类型

> ID：10598364
> 
> 赞同：0
> 
> 时间：2012-05-15T10:01:19.843
> 
> 标签：java, sql, jdbc

这个问题是这个问题的[延伸](https://stackoverflow.com/questions/10585144/sql-response-type)。我能得到元数据很好。但是，阅读文档后，我了解到此数据仅适用于 SELECT 类型的请求。我需要更多信息，是 UPDATE 还是 SELECT 等。我可以在不解析 SQL 请求的情况下获取这些信息吗？如果我使用 executeQuery() 或 getMetaData() 来更新或删除请求会怎样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:12:50.317

元数据仅适用于[`ResultSet`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getMetaData%28%29)和[`Database`](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#getMetaData%28%29)级别，但不适用于`Update`和`Delete`类型的查询。可[`Statement.execute( String sql )`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#execute%28java.lang.String%29)用于识别查询是否返回`ResultSet(s)`或受影响的整数数量的记录。

文档说：
*execute 方法执行一条 SQL 语句并指示第一个结果的形式。然后，您必须使用这些方法`getResultSet`或`getUpdateCount`检索结果，并`getMoreResults`移动到任何后续结果。*

该方法返回*`true if the first result is a ResultSet object; false if it is an update count or there are no results`*

没有任何直接的方法可以告诉您正在使用的查询是 an`Update`还是 a `Delete`。您需要对其进行显式解析并识别。

# delphi - 检查字符是否为换行符

> ID：10598365
> 
> 赞同：3
> 
> 时间：2012-05-15T10:01:22.983
> 
> 标签：delphi, pascal

你好，我有一个简单的程序，它在给定的文本中计算字符，直到行是空行，只有换行

```
var
  znaki: array['a'..'z'] of integer = (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);
  napis: String;
  maly: String;
  dlugosc: Integer;
  znak: char;

begin
napis := 'a';
while napis[1] <> '#13#10'do
begin
  readln(napis);
  maly:=LowerCase(napis);
  for dlugosc:=(length(maly)) downto 1 do
begin
znaki[maly[dlugosc]]:=znaki[maly[dlugosc]]+1;
  end;
  for znak:='a' to 'z' do
    writeln(znak, ' ', znaki[znak]);
  end;

end. 
```

它在条件下失败，我不知道为什么。请给我线索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:11:23.377

一个字符，napis[ **1** ]；不能是 2 个字符**#13**和**#10** ...

所以，我会这样做，例如：

```
var
  znaki: array['a'..'z'] of integer = (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);
  napis: String;
  maly: String;
  dlugosc: Integer;
  znak: char;

begin
napis := 'a';
while ((Length(napis) > 0)) do
begin
  readln(napis);
//  napis := StringReplace(napis, #13#10, #10, [rfReplaceAll]);  //useless for a console readln
  maly:=LowerCase(napis);
  for dlugosc:=(length(maly)) downto 1 do
  begin
    znaki[maly[dlugosc]]:=znaki[maly[dlugosc]]+1;
  end;
  for znak:='a' to 'z' do
    writeln(znak, ' ', znaki[znak]);
end;
end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:16:06.983

`#10`是换行

`#13`是回车（即移动到行首）

您只需要检查#10。

# php - 如何将n个值保存在数组中？

> ID：10598373
> 
> 赞同：0
> 
> 时间：2012-05-15T10:01:59.200
> 
> 标签：php, arrays, list, map

我的数据

```
1 : "aaa"
2 : "bbb"
2 : "ccc"
3 : "ddd"
4 : "eee"
4 : "fff"
4 : "ggg" 
```

我怎样才能将这些值保存在 PHP 数组中？是否有任何for循环实现示例？

[已编辑] 如何通过 for-loop php 从我的数据中创建这个数组？

```
$array = array(
   1 => array("aaa"), 
   2 => array("bbb", "ccc"), 
   3 => array("ddd"),
   4 => array("eee", "fff", "ggg")
); 
```

[edited#2] 我的真实代码：

```
$list = "SELECT.....";    
$root = retrieve($list);
// $root is a array of the data from PostgreSQL;
foreach($root as $i => $v){
    if(cond) {
        $q = "SELECT ...(use variables from $root)";
        $a = retrieve($q);  
        for($a as $j => $w) {
            echo $index." ".$v["aid"]." ".$w['new_geom']."<br />";
        }
        //what this line printed, i simplified to the sample data above
        $index++;           
    }   
} 
```

[edited#3] 这就是它打印的内容

```
...
23 33 "aaa"
24 34 "bbb" 
25 34 "ccc" 
26 35 "ddd" 
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:04:35.510

这很简单，只需使用嵌套的 foreach 循环

```
$array = array(
   1 => array("aaa"), 
   2 => array("bbb", "ccc"), 
   3 => array("ddd"),
   4 => array("eee", "fff", "ggg")
);

foreach($array as $num => $array2) {
    foreach($array2 as $str) {
      echo "\n".$num." : ".$str;
    }
} 
```

输出：

```
1 : aaa
2 : bbb
2 : ccc
3 : ddd
4 : eee
4 : fff
4 : ggg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:29:33.580

我猜这就是你想要的。我还猜测它`$v['aid']`包含您想要的新数组的索引并且包含`$w['new_geom']`值，例如：`aaa`等`bbb`

```
$list = "SELECT.....";    
$root = retrieve($list);

$theNewArray = array();
foreach($root as $i => $v){
    if(cond) {
        $q = "SELECT ...(use variables from $root)";
        $a = retrieve($q);  
        for($a as $j => $w) {
            if (!array_key_exists($v["aid"], $theNewArray)) {
                $theNewArray[$v["aid"]] =  array();
            }

            $theNewArray[$v["aid"]][] = $w['new_geom'];

            echo $index." ".$v["aid"]." ".$w['new_geom']."<br />";
        }
        //what this line printed, i simplified to the sample data above
        $index++;           
    }   
} 
```

# c# - winform 应用程序中的按钮文本

> ID：10598374
> 
> 赞同：1
> 
> 时间：2012-05-15T10:01:59.293
> 
> 标签：c#, winforms

我在 Winform 应用程序上有一些按钮，并使用以下代码更改了它们的背景颜色和文本。

```
List<Button> buttons = new List<Button>();

foreach (Button bt in panel1.Controls)
{
    if (bt is Button)
    {
        buttons.Add(bt);
    }

}

int btext = 1;
foreach (var button in buttons)
{

    button.Text = btext.ToString();
    button.BackColor = Color.White;
    btext++;
} 
```

但是在运行时查看表单时，按钮网格右下角的按钮显示文本“1”，网格左上角的按钮显示文本“36”。我希望并认为它应该是相反的。为什么它是这样的，我该如何改变它？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:17:59.730

我认为控件添加到`panel1.Controls`集合中的顺序在这里是相关的。您可以尝试为按钮设置 Tab 键顺序，然后按`TabIndex`属性对其进行排序。

```
foreach (var bt in panel1.Controls.OrderBy(c => c.TabIndex))
{
    if (bt is Button) 
    {
        buttons.Add(bt);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:06:33.013

尝试按控件位置排序

```
List<Button> buttons = new List<Button>();

foreach (var bt in panel1.Controls)
{
    if (bt is Button)
    {
        buttons.Add((Button)bt);
    }

}

var lst = buttons.OrderBy(x => x.PointToScreen(Point.Empty).Y).ThenBy(x => x.PointToScreen(Point.Empty).X);

int btext = 1;
foreach (var button in lst)
{

    button.Text = btext.ToString();
    button.BackColor = Color.White;
    btext++;
} 
```

![在此处输入图像描述](../Images/75ba53a90deabc354abac4125654cba3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:06:52.733

您可以尝试这种 LINQ 方法：

```
var buttons = panel1.Controls.OfType<Button>()
             .Select((b, i) => new { Button = b, Position = i + 1 });
foreach(var btn in buttons)
{
    btn.Button.Text = btn.Position.ToString();
    btn.Button.BackColor = Color.White;
} 
```

或者，如果您需要它，请使用`Reverse`：

```
foreach (var btn in buttons.Reverse())
{
    btn.Button.Text = btn.Position.ToString();
    btn.Button.BackColor = Color.White;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:57:50.593

如果您只需要更改文本标签的顺序，您可以这样做：

```
List<Button> buttons = panel1.Controls.OfType<Button>().ToList();
buttons.Reverse();

int btext = 1;
foreach (var button in buttons)
{
    button.Text = btext.ToString();
    button.BackColor = Color.White;
    btext++;
} 
```

# java - 为什么我的 JPQL 不工作？

> ID：10598378
> 
> 赞同：0
> 
> 时间：2012-05-15T10:02:12.110
> 
> 标签：java, jakarta-ee, websphere, jpql, rad

这个 JPQL 曾经可以工作，但后来无缘无故坏了。我现在得到这个奇怪的异常：

```
java.lang.IllegalArgumentException: Parameter "Parameter<LandKod>('landKod')" declared in "SELECT r FROM Region r WHERE r.landKod = :landKod" is set to value of "US" of type "java.lang.String", but this parameter is bound to a field of type "se.prv.pandora.arendeprocess.entity.LandKod". 
```

这似乎表明我的代码中名为landKod 的名称存在某种名称冲突。这是来源：

```
import java.io.Serializable;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;

@Entity(name = "Region")
@Table(name="TP197_REGION")

@NamedQueries({
    @NamedQuery(name = "getAllValidRegions", query = "SELECT r FROM Region r WHERE r.histKod = 'A'"), 
    @NamedQuery(name = "getRegionsByLandkod", query = "SELECT r FROM Region r WHERE r.landKod = :landKod")
})

public class Region implements Serializable {

    @Id
    private int regionId;

    @ManyToOne
    @JoinColumn(name="landKod", referencedColumnName="landKod")
    private LandKod landKod ;

    private String histKod ;
    private String regionForkort;
    private String regionRubrik;
    private String regionBeskr;

    public Region() {
        super();
    }

    public int getRegionId() {
        return regionId;
    }

    public void setRegionId(int regionId) {
        this.regionId = regionId;
    }

    public String getRegionForkort() {
        return regionForkort;
    }

    public void setRegionForkort(String regionForkort) {
        this.regionForkort = regionForkort;
    }

    public String getRegionRubrik() {
        return regionRubrik;
    }

    public void setRegionRubrik(String regionRubrik) {
        this.regionRubrik = regionRubrik;
    }

    public String getRegionBeskr() {
        return regionBeskr;
    }

    public void setRegionBeskr(String regionBeskr) {
        this.regionBeskr = regionBeskr;
    }

    public String getHistKod() {
        return histKod;
    }

    public void setHistKod(String histKod) {
        this.histKod = histKod;
    }

    public String getRegionFormatted() {
        if(regionForkort!=null && regionForkort.length()>0) {
            return regionForkort + " " + regionRubrik;
        } else {
            return regionRubrik;

        }
    }

    public LandKod getLandKod() {
        return landKod;
    }

    public void setLandKod(LandKod landKod) {
        this.landKod = landKod;
    }

} 
```

这是允许字符串作为参数的方法实现：

```
@Override
public List<Region> getRegionsByLandkod(String landKod) {

    List<Region> regionsList = null;

try {

    Query query = em.createNamedQuery("getRegionsByLandkod");
    query.setParameter("landKod", landKod);
    regionsList =  (List<Region>) query.getResultList();

} catch(Exception e){ 
    logger.info("Kunde inte hitta någon region med landkod: "+landKod, e);
}

return regionsList;
} 
```

你能帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:14:47.710

问题是这一行：

```
 public List<Region> getRegionsByLandkod(String landKod) { 
```

它应该是这样的：

```
 public List<Region> getRegionsByLandkod(LandKod landKod) { 
```

或者您应该将字符串转换为 LandKod 并将*其*用作查询参数。

（或者您可以更改 Region 类以使landKod 属性的类型为字符串。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:07:40.610

看来您正在`getRegionsByLandkod`使用字符串而不是`LandKod`对象进行调用。如果参数正确，请验证您在何处使用此查询。

# xslt - 如何获得一个转换后的xml文件，其中只有一个父标签下的每个父标签出现的所有子标签

> ID：10598386
> 
> 赞同：3
> 
> 时间：2012-05-15T10:02:30.170
> 
> 标签：xslt

我正在使用这个输入 xml 文件。

```
 <Content>
                <body><text>xxx</text></body>
                    <body><text>yy</text></body>
               <body><text>zz</text></body>
               <body><text>kk</text></body>
                   <body><text>mmm</text></body>
                        </Content> 
```

Xslt 转换后的输出应该是

```
 <Content>
                 <body><text>xxx</text>
                       <text>yy</text>
                           <text>zz</text>
                     <text>kk</text>
                   <text>mmm</text></body>
                     </Content> 
```

谁能提供其相关的 Xsl 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:24:07.720

**这个完整的转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="body"/>
 <xsl:template match="body[1]">
  <body>
   <xsl:apply-templates select="../body/node()"/>
  </body>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Content>
    <body>
        <text>xxx</text>
    </body>
    <body>
        <text>yy</text>
    </body>
    <body>
        <text>zz</text>
    </body>
    <body>
        <text>kk</text>
    </body>
    <body>
        <text>mmm</text>
    </body>
</Content> 
```

**产生想要的正确结果**：

```
<Content>
   <body>
      <text>xxx</text>
      <text>yy</text>
      <text>zz</text>
      <text>kk</text>
      <text>mmm</text>
   </body>
</Content> 
```

**说明**：

1.  **[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制每个节点。

2.  它被两个模板覆盖。第一个忽略/删除每个`body`元素`。

3.  覆盖身份模板的第二个模板也覆盖了第一个这样的模板（删除每个`body`元素），用于任何作为其父`body`元素的第一个子元素的模板。`body`仅对于第一`body`个子元素，会生成一个元素，并在其主体中处理作为其父元素（当前元素及其所有兄弟元素）`body`的任何子节点的子节点的所有节点。`body``body``body`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:42:38.983

```
 <xsl:template match="Content">
      <body>
            <xsl:apply-templates select="body/text"/>
      </body>
    </xsl:template>

  <xsl:template match="body/text">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template> 
```

# windows-phone-7 - Windows Phone 7.1 (Mango):: 页面析构函数未触发

> ID：10598389
> 
> 赞同：0
> 
> 时间：2012-05-15T10:02:43.960
> 
> 标签：windows-phone-7

Windows Phone 7.5 (Mango):: 在使用硬件键从一页导航回上一页时，假设从 Page2 到 Page1，Page2 的析构函数没有触发。所有遍历页面的析构函数在退出应用程序时触发。任何人，请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:47:27.273

您可以在您的站点上捕获 OnBackKey 事件以检查其是否导航回来。那么你应该拥有与你想要的析构函数相同的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:06:54.880

如果您的问题是垃圾收集器没有收集该页面，那更有可能是因为您没有取消订阅 on Navigationed from 事件中的每个事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:57:37.603

如果 destructopr 真的 NEVER (*) 被触发，那是因为某些东西持有对它的引用。就像伊戈尔说的，这可能是一个事件。

或者您覆盖 OnBackKeyPress，而不是返回，而是向前导航到 Page1。在这种情况下，backstack 将保留对 Page2 的引用。

(*) 请注意，在 GarbageCollector 运行之前不会调用析构函数。即使您的代码是完美的，您也可能需要几个 Page1->Page2 导航来实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T17:27:31.143

检查您是否没有任何具有静态字段的类实例。你最好的朋友是调试器。将此代码放在 backKeyPress 事件之上

```
if (Debugger.IsAttached)
{
    Debugger.Break();
} 
```

然后将 watch 添加到任何可以阻止调用析构函数的变量中。

# bash - bash ldap 输出太长

> ID：10598390
> 
> 赞同：1
> 
> 时间：2012-05-15T10:02:50.680
> 
> 标签：bash, ldap, openldap, ldif

在 Bash 中，我想做一个 ldap 查询。它进展顺利，但在输出中，当它是一条长线时，它会切断行尾。

例如它很好，它到达域组件：

```
# cn, ou4, ou3, ou2, ou1, dc 
```

当组织单位有很多孩子时，它会削减：

```
# cn, ou7, ou6, ou5, ou4, ou3 
```

我怎样才能每次都得到整条线？

是linux终端的问题还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:08:05.310

[在rfc2849](https://www.rfc-editor.org/rfc/rfc2849)中定义的 LDIF可以通过插入行分隔符和空格来折叠，多字节 UTF-8 字符的字节之间除外。客户端用于执行搜索的实用程序可能具有不折叠输出行的选项。

# asp.net-mvc-3 - asp.net mvc 3 razor 从 IEnumerable 获取一个元素

> ID：10598393
> 
> 赞同：15
> 
> 时间：2012-05-15T10:03:02.383
> 
> 标签：asp.net-mvc-3, razor

我的视图模型（LIST）如下所示：

```
public class ConversationModel 
    {
        public int ID { get; set; }
        public string Body { get; set; }
        public DateTime Datetime { get; set; }
        public string Username { get; set; }
        public string ImgUrl { get; set; }
        public string ToUserID{ get; set; }
    } 
```

这是我的看法

```
@model IEnumerable<NGGmvc.Models.ConversationModel> 
```

我如何在当前位置获取 ToUserID？像这样的东西

@Model[0].ToUserID

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-15T10:08:10.277

你应该能够做到：

```
@Model.First().ToUserID 
```

注意，您可能想先检查可枚举中是否有任何项目，就好像没有一样，然后 First() 将返回 null

（注意，因为您的问题中有 @Model[0]，我假设您是专门尝试获得第一个值。我可能有错误的一端，在这种情况下，Jakub 的回答应该可以解决您的问题！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:20:15.363

您应该能够使用以下内容：

```
@Model.First().ToUserID 
```

但是，如果您的模型只会引用视图中枚举的第一个元素，我建议您只将该元素传递给视图。

例如：

```
@model ConversationModel

@Model.ToUserID 
```

并且在控制器中只传递所需的第一个元素：

```
List<ConversationModel> conversationList = //your conversation model initialisation code
return View(conversationList.First()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:08:10.663

```
@foreach(var model in Model)
{
    @model.ToUserID
} 
```

# c# - VS2010 (C#) Environment.SpecialFolder.ProgramFiles 在解决方案项目中是哪里？

> ID：10598394
> 
> 赞同：1
> 
> 时间：2012-05-15T10:03:05.640
> 
> 标签：c#, visual-studio-2010, projects-and-solutions

我创建了一个 C# WinForms 应用程序。它有一些它使用的附加文件，例如帮助文件和一些外部数据文件。我想将这些文件放在`Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles)`路径下的文件夹中，以便应用程序可以找到并读取它们。

在安装应用程序之前不会创建此路径吗？那么我将这些文件放在我的 VS2010 项目中的什么位置，或者我如何告诉我的项目这些文件存在，以便当我从 VS 运行（调试）应用程序时它会找到这些文件。

谢谢

**编辑：** 我确实考虑将文件添加为资源文件，但不幸的是，在项目构建和部署后可能会添加一些文件。因此，我们决定让程序在特定位置搜索并查找数据文件（和相关的帮助文件），如果存在则加载它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:10:24.827

问题是您的应用程序不需要使用“Environment.SpecialFolder.ProgramFiles”。它“应该”与位置无关。对您的问题的快速回答是“从启动应用程序的文件夹中”。真正的答案是您如何引用这些文件。

您的帮助文件和数据文件需要部署到与应用程序具有已知关系的文件夹中。即同一个文件夹或子文件夹。考虑制作文件资源。

现在，如果文件是用户可配置的或运行时可写的，那么它们不应位于程序文件区域，而应位于应用程序数据区域。如果是这样，那么这就是你的道路！

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:08:19.430

您应该将这些文件添加到解决方案中的主 (exe) 项目中。
（右键单击项目名称，选择添加现有项目）

然后设置它的属性`Copy to Output Directory = Always`

（不确定翻译，因为我使用的是本地化版本的 VS）

当然，需要注意的是，当您将文件部署在 中时`Environment.SpecialFolder.ProgramFiles`，出于安全原因，您无法对其进行写入（Windows7、Vista）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:27:04.777

将文件添加为项目中的资源。看看这篇 MSDN[文章](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=vs.80%29.aspx)。您可以通过右键单击解决方案资源管理器中项目下的属性节点，单击打开，然后单击项目设计器中资源页面上的添加资源按钮，将资源添加到项目中。

您可以将资源添加到项目中，既可以作为链接资源（外部文件），也可以作为嵌入式资源（直接嵌入到 .resx 文件中）。

添加链接资源时，存储项目资源信息的 .resx 文件仅包含磁盘上资源文件的相对路径。如果您将图像、视频或其他复杂文件添加为链接资源，则可以使用与资源设计器中的该文件类型关联的默认编辑器对其进行编辑。

添加嵌入资源时，数据将直接存储在项目的资源 (.resx) 文件中。字符串只能存储为嵌入式资源。

![在 Visual Studio 中添加资源](../Images/fb189eb3429c8f6241f7e154d4124806.png)

# java - JPA 休眠类型定义

> ID：10598396
> 
> 赞同：0
> 
> 时间：2012-05-15T10:03:09.457
> 
> 标签：java, hibernate, jpa, orm

在项目中，我使用 JPA 和 Hibernate 实现。所有实体都基于注解并列在 persistence.xml 中。

所有实体都打包到 jar 中。

我需要为几个属性（在所有实体中）定义一个 typedef，这些属性是枚举类型的字符串。在 DB 中，列是 varchar。我怎样才能做到这一点？

我可以通过添加 hbm.xml 和 hibernate-cfg.xml 来实现这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:38:16.223

直接来自[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e6216)：

> @org.hibernate.annotations.TypeDef 和 @org.hibernate.annotations.TypeDefs 允许你声明类型定义。这些注释可以放在类或包级别。请注意，这些定义对于会话工厂是全局的（即使在类级别定义时也是如此）。如果该类型用于单个实体，您可以将定义放在实体本身上。否则，建议将定义放在包级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:17:04.797

如果您不能更改类但可以更改休眠配置，我认为您可以将 hibernate.mapping.precedence 更改为“hbm,class”，然后在相关类的注释中添加带有所有信息的 hbm 文件。有 hbm 语法来指定 UserType 或 EnumType。如果使用它，您还必须定义您的 UserType 类。

在接受我的话之前，您可能想在测试项目上尝试一下，我假设它会起作用，但我不确定。

将所有持久性信息从注释复制到 hbm 可能会很痛苦，并且会重复信息。如果可能，尝试找到一种方法将注释添加到类本身。

# android - 如何验证我的应用程序 apk 是否正确混淆？

> ID：10598404
> 
> 赞同：2
> 
> 时间：2012-05-15T10:03:55.797
> 
> 标签：android, obfuscation, proguard, deobfuscation

我在 Eclipse 上使用 Proguard 混淆了我的 android 应用程序，现在我必须验证它是否正确混淆了所有类、方法和成员。

有人可以给我一些输入如何进行此验证吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T10:07:36.350

您可以使用[apktool](http://code.google.com/p/android-apktool/)对您的应用程序进行逆向工程，并检查所有内容是否按预期进行了混淆。

# java - 一次初始化数据库连接对象并重用它 - jboss

> ID：10598409
> 
> 赞同：2
> 
> 时间：2012-05-15T10:04:17.917
> 
> 标签：java, servlets, jboss

我使用 jboss 服务器和 postgresql 作为数据库。现在我每次都在 servlet 中连接到数据库，如下所示：

```
public void doPost(HttpServletRequest req, HttpServletResponse resp)
{
Connection conn =null; // Create connection object
             String database = "jbossdb"; // Name of database
             String user = "qwerty"; //
             String password = "qwerty";
             String url = "jdbc:postgresql://localhost:5432/" + database;
             ResultSet rs = null;
             ResultSetMetaData rsm = null;
             ObjectInputStream in=new ObjectInputStream(req.getInputStream());
             String input=(String) in.readObject();
             String[] s_input=input.split(",");

              try{
                    Class.forName("org.postgresql.Driver").newInstance();
                    //.newInstance()
                 } catch(Exception e) 
                    {
                    System.err.println(e);
                    }

            try{
                conn = DriverManager.getConnection(url, user, password);

                }catch(SQLException se) 
                 {
                        System.err.println(se);
                 } 
```

此代码存在于我的每个服务器中。对于每个请求，都会创建一个新的连接对象。这会影响性能吗？在 jboss 中有什么方法可以只初始化一次连接（可能在启动时），然后在需要时传递给 servlet？我应该把它放在`init()`servlet的方法中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T10:14:32.910

一个更好的方法是使用连接池。您还需要确保正确关闭连接（如果发生这种情况，您的代码尚不清楚，仍然需要使用池来完成）。至于存储连接，这并不是一个好主意，因为您的 servlet 是多线程的（我很难学到这一点），并且您需要同步所有访问，这将是一场灾难。

[http://geekexplains.blogspot.co.uk/2008/06/what-is-connection-pooling-why-do-we.html](http://geekexplains.blogspot.co.uk/2008/06/what-is-connection-pooling-why-do-we.html)

[http://confluence.atlassian.com/display/DOC/Configuring+a+PostgreSQL+Datasource+in+Apache+Tomcat](http://confluence.atlassian.com/display/DOC/Configuring+a+PostgreSQL+Datasource+in+Apache+Tomcat)

[http://www.devdaily.com/blog/post/java/how-configure-tomcat-dbcp-connection-pool-pooling-postgres](http://www.devdaily.com/blog/post/java/how-configure-tomcat-dbcp-connection-pool-pooling-postgres)

--EDIT-- 为什么不在“init()”中做呢？

了解“servlet 的生命周期”。

init() 仅在容器设置 servlet 时调用一次。

每个请求都使用相同的 servlet，而不是每个请求的新实例。所以 init() 不会被请求调用。

由于每个请求都由同一个 servlet 实例处理，因此您的代码需要是多线程的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T10:19:39.417

您在这里可能不是一个好的解决方案。当您使用 servlet 来执行应用程序加载的操作时，您可以拥有侦听器。您要做的是，首先创建一个实现[ServletContextListener](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html)的类。

```
public class ContextListener implements ServletContextListener {

    public void contextInitialized(ServletContextEvent sce) {
        ServletContext context=sce.getServletContext();
        String dburl=context.getInitParameter("dbUrl");
        String dbusername=context.getInitParameter("dbUserName");
        String dbpassword=context.getInitParameter("dbPassword");

        DBConnector.createConnection(dburl, dbusername, dbpassword);
        System.out.println("Connection Establised.........");
    }

    public void contextDestroyed(ServletContextEvent sce) {
        DBConnector.closeConnection();
    }

} 
```

之后，您可以创建另一个类以在应用程序加载时创建连接。

```
public class DBConnector {

    private static Connection con;

    public static void createConnection(String dbUrl,String dbusername,String dbPassword){
        try {
            Class.forName("org.postgresql.Driver");
            con=DriverManager.getConnection(dbUrl, dbusername, dbPassword);     
        } catch (Exception ex) {
            ex.printStackTrace();
        }    
    }

    public static Connection getConnection(){
        return con;
    }

    public static void closeConnection(){
        if(con!=null){
            try {
                con.close();
            } catch (SQLException ex) {
                 ex.printStackTrace();
            }
        }

    }

} 
```

然后，当您想要获取数据库连接时，您可以调用静态 getConnection 方法并获取它。为了调用您的侦听器类，您必须在 web.xml 中添加侦听器标签。

```
<context-param>
    <param-name>dbUrl</param-name>
    <param-value>jdbc:postgresql://localhost:5432/jbossdb</param-value>
</context-param>
<context-param>
    <param-name>dbUserName</param-name>
    <param-value>qwerty</param-value>
</context-param>
<context-param>
    <param-name>dbPassword</param-name>
    <param-value>qwerty</param-value>
</context-param>
<listener>
    <listener-class>com.icbt.bookstore.listener.ContextListener</listener-class>
</listener> 
```

硬编码您的数据库用户名和密码不是一个好习惯。相反，您可以使用 web.xml 中的 servlet 初始化参数，如图所示。

希望，这回答了你的问题。

# android - Android Coverflow - 聚焦位置已知的图像

> ID：10598410
> 
> 赞同：2
> 
> 时间：2012-05-15T10:04:29.110
> 
> 标签：android, android-widget, coverflow

我已经实现了 Android Coverflow 示例。单击图像后，我可以检索其位置并在 ImageView 中显示图像。我的另一个要求是**在我传递 Id 时将图像聚焦在 coverFlow 中**。我应该把聚焦的图像带到中心。这是在转换过程中计算图像之间角度的代码。如何更改它以实现所需的输出？

```
 protected boolean getChildStaticTransformation(final View child, final Transformation t) {

    final int childCenter = getCenterOfView(child);
    final int childWidth = child.getWidth();
    int rotationAngle = 0;

    t.clear();
    t.setTransformationType(Transformation.TYPE_MATRIX);

    if (childCenter == mCoveflowCenter) {
        transformImageBitmap((ImageView) child, t, 0);
    } else {
        rotationAngle = (int) ((float) (mCoveflowCenter - childCenter) / childWidth * mMaxRotationAngle);
        if (Math.abs(rotationAngle) > mMaxRotationAngle) {
            rotationAngle = rotationAngle < 0 ? -mMaxRotationAngle : mMaxRotationAngle;
        }
        transformImageBitmap((ImageView) child, t, rotationAngle);
    }

    return true;
}

 private void transformImageBitmap(final ImageView child, final Transformation t, final int rotationAngle) {
    mCamera.save();
    final Matrix imageMatrix = t.getMatrix();

    final int height = child.getLayoutParams().height;

    final int width = child.getLayoutParams().width;
    final int rotation = Math.abs(rotationAngle);

    mCamera.translate(0.0f, 0.0f, 100.0f);

    // As the angle of the view gets less, zoom in
    if (rotation < mMaxRotationAngle) {
        final float zoomAmount = (float) (mMaxZoom + rotation * 1.5);
        mCamera.translate(0.0f, 0.0f, zoomAmount);
    }

    mCamera.rotateY(rotationAngle);
    mCamera.getMatrix(imageMatrix);
    imageMatrix.preTranslate(-(width / 2.0f), -(height / 2.0f));
    imageMatrix.postTranslate((width / 2.0f), (height / 2.0f));
    mCamera.restore();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T09:14:20.387

**您可以使用coverFlow**的setOnItemSelectedListener来实现此目的。请参阅下面的代码，您将在其中获得中心图像的位置。

```
int sel_pos;

coverFlow.setOnItemSelectedListener(new SelectListener(this));

    private class SelectListener implements AdapterView.OnItemSelectedListener {

            public SelectListener(Context c) 
            {

            }

            public void onItemSelected(AdapterView<?> parent, View v, int position,long id) 
            {

                Log.e("Changed----->", "" + position);

                // Zoom the new selected view
                try 
                {                               
                    sel_pos = position;             
                    coverImageAdapter.notifyDataSetChanged();

                } catch (Exception animate) 
                {

                }       

            }

            public void onNothingSelected(AdapterView<?> parent) {
            }

        } 
```

现在，您可以在适配器的 getview 方法中更改 coverFlow 中的图像焦点。

```
public View getView(int position, View convertView, ViewGroup parent)
    {
        // Use this code if you want to load from resources
        ImageView i = new ImageView(mContext);
        i.refreshDrawableState();
        Log.e("position==", ""+position);

        if(sel_pos==position)
        {
            i.setImageResource(selectedImage[position]);
        }
        else 
        {
            i.setImageResource(UnselectedImage[position]);

        }       

        i.setLayoutParams(new CoverFlow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        i.setScaleType(ImageView.ScaleType.CENTER_INSIDE);

        // Make sure we set anti-aliasing otherwise we get jaggies  
        BitmapDrawable drawable = (BitmapDrawable) i.getDrawable();
        drawable.setAntiAlias(true);
        return i;

    } 
```

跳这会帮助你。

# php - PHP json_decode()，与我定义的类一起使用，返回一个 stdClass

> ID：10598413
> 
> 赞同：-1
> 
> 时间：2012-05-15T10:04:38.233
> 
> 标签：php, json

如果我将相对于我定义的类的对象的 JSON 字符串传递给 json_decode() 函数，它会返回一个 stdClass 对象（然后丢失方法）而不是原始类对象......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:08:04.787

尝试序列化（）和反序列化（）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:08:32.317

JSON 是一种数据格式，而不是代码格式。您应该使用解码的 JSON 数据初始化您的对象，而不是期望直接创建它们。想想为什么 PHP 对象的序列化函数可以实现 __sleep 和 __wakeup 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:09:11.310

JSON 不携带有关对象类型（类）的信息，它是 Javacript 对象文字。它携带的唯一信息是属性的名称和值。

如果您想将 PHP 对象编码为字符串，以便可以将其转换回正确类型的 PHP 对象，您将需要[`serialize()`](http://php.net/manual/en/function.serialize.php)它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T10:11:04.470

PHP 如何知道您的 JSON 来自哪里或*您*打算如何使用它？JSON 本身不携带任何此类信息，`json_decode`也不提供任何此类功能。

如果您希望您的类实例可序列化为 JSON，您将需要手动填写空白，可能从以下内容开始：

```
class Foo {
    public function toJSON() {
        return json_encode($this);
    }

    public static function fromJSON($json) {
        $obj = json_decode($json);
        $foo = new Foo;
        foreach ($obj as $prop => $value) {
            $foo->$prop = $value;
        }

        return $foo;
    }
} 
```

# sql - 用于查找行的 SQL 查询

> ID：10598418
> 
> 赞同：4
> 
> 时间：2012-05-15T10:04:47.367
> 
> 标签：sql, database, oracle

我`mytable`在 ORACLE 数据库中有一个表，只有一列`Roll_no`，如下所示：

```
Roll_no
----------
CD01 0001
CD01 0002
CD01 0004
CD01 0005
CD01 0008 
```

这里`CD01`是固定的，在`CD01`一个空格之后，然后写数字，然后`0001`再写。

请在此处查看缺少`CD01 0003`, `CD01 0006`,`CD01 0007`这些是我需要的输出。

所需输出：

```
Roll_no
----------
CD01 0003
CD01 0006
CD01 0007 
```

如何编写 SQL 查询来找出这些缺失的字母数字字符？请有任何想法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T10:17:53.957

您可以生成完整的数字列表，然后使用 NOT EXISTS（或 NOT IN）过滤掉现有记录。例如：

```
SELECT new_roll_no
  FROM (SELECT 'CD01 ' || to_char(rownum, 'fm0000') new_roll_no FROM dual 
        CONNECT BY LEVEL <= (SELECT to_number(MAX(substr(roll_no, 6))) FROM T))
 WHERE new_roll_no NOT IN (SELECT roll_no FROM T)
 ORDER BY 1 
```

以下是它的工作原理：

*   CONNECT BY LEVEL 是一个有点技巧的查询，它会生成高达您指示的级别的行（在这种情况下，我从您的表中选择了最大值）。我认为这个查询首先出现在[askTom](http://asktom.oracle.com)网站上，现在已经很普遍了。
*   我已经生成了 8 行，接下来我将使用 TO_CHAR 函数使列看起来像您的主键（请参阅[TO_CHAR函数的](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions201.htm#i79330)[格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#SQLRF51073)文档）。
*   然后，我将这些生成的值与您的实际表值进行比较（NOT IN 是 ANTI-JOIN）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:25:56.047

```
select n
  from (select 'CD01' || to_char(rownum, '0009') n
          from dual
    connect by level <= (select max(substr(roll_no, 6)) from mytable))
where n not in (select roll_no from mytable) 
```

# linux-kernel - 设备驱动编译

> ID：10598423
> 
> 赞同：0
> 
> 时间：2012-05-15T10:04:53.753
> 
> 标签：linux-kernel

我在编译时遇到一些关于为 linux 编译设备驱动程序的问题，我收到以下错误

没有规则来制作目标`/root/aarif/mydev.c', needed by`/root/aarif/mydev.o'。停止

使用的 Makefile 是

```
obj-m=mydev.o

all:
        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean:
        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean

test:test.c
        cc -o test test.c 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:25:57.733

那么你有一个 mydev.c 文件吗？

或者，尝试添加`mydev-objs := test.o`，假设您的源文件是 test.c

# java - 字符串数组的 ArrayList

> ID：10598425
> 
> 赞同：4
> 
> 时间：2012-05-15T10:05:11.927
> 
> 标签：java, arrays, string, arraylist

下面定义的两种数据结构有什么区别？

第二个是 ArrayList，其元素的类型为“String”。但是第一个数据结构是什么？

初始化也会有所不同。谁能在这里举个例子？

```
 ArrayList<String>[] temp1;
    ArrayList<String> temp2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:17:15.870

`ArrayList<String>[] temp1;`: This is an Array of ArrayList's that are containing Strings

`ArrayList<String> temp2;`: This is an ArrayList containing Strings

If you want an ArrayList of Arrays of Strings, you would have to do a `ArrayList<String[]> temp3;`. Note the position of the different brackets.

To initialize:

```
// create an array with 10 uninitialized ArrayList<String>
ArrayList<String>[] temp1 = new ArrayList[10];
// create empty lists that can be filled
for (int i=0; i<temp1.length; i++)
  temp1[i] = new ArrayList<String>();

// create an empty list of Strings
ArrayList<String> temp2 = new ArrayList<String>();

// create an empty list of String arrays
ArrayList<String[]> temp3 = new ArrayList<String[]>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:40:00.767

I provide some example to differentiate the `Array of ArrayList` and `ArrayList of String`

```
public class ArrayOfArrayList {

    public static void main(String[] args) {
        // Declare the Array of ArrayList
        List<String>[] arrayOfList = new ArrayList[2];

        // Declare the Object of ArrayList
        for(int i = 0; i < arrayOfList.length; i++) {
            arrayOfList[i] = new ArrayList<>();
            arrayOfList[i].add("" + (i + 1));
            arrayOfList[i].add("" + (i + 2));
        }

        // Print out the result
        for(List<String> list : arrayOfList) {
            for(String str : list) {
                System.out.println(str);
            }
        }

        // Declare the Object of ArrayList
        List<String> arrayList = new ArrayList<>();
        arrayList.add("1");
        arrayList.add("2");

        // Print out the result
        for(String str : arrayList) {
            System.out.println(str);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:05:58.993

> 第二个是 ArrayList，其元素的类型为“String”。但是第一个数据结构是什么？

从表面上看，它似乎是一个列表数组（包含字符串）。但是数组和泛型[不能很好地结合在一起](http://www.ibm.com/developerworks/java/library/j-jtp01255/index.html)。来自文章：

> 数组是协变但泛型不是这一事实的另一个结果是，您不能实例化泛型类型的数组（new List<String>[3] 是非法的），除非类型参数是无界通配符（new List<? >[3] 是合法的）。让我们看看如果你被允许声明泛型类型的数组会发生什么：

```
List<String>[] lsa = new List<String>[10]; // illegal
Object[] oa = lsa;  // OK because List<String> is a subtype of Object
List<Integer> li = new ArrayList<Integer>();
li.add(new Integer(3));
oa[0] = li; 
String s = lsa[0].get(0); 
```

> 最后一行将抛出 ClassCastException，因为您已设法将 List<Integer> 塞入应该是 List<String> 的内容中。因为数组协变允许您破坏泛型的类型安全，所以禁止实例化泛型类型的数组（类型参数为无界通配符的类型除外，如 List<?>）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:06:45.770

第一个数据结构是一个包含字符串对象的 ArrayLists 数组

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T10:07:15.860

第一个是类型的类数组`ArrayList<String>`。第二个只是一个`ArrayList<String>`(ArrayList of Strings.)

在初始化方面：

```
ArrayList<String>[] lists = (ArrayList<String>[])new ArrayList[10];
ArrayList<String> temp2 = new ArrayList<String>(); 
```

The first initialisation has to specify a size for the array (note this is not a size for the `ArrayList`) and this is where the 10 comes from in my example. It can be any size you choose of course, 10 is just an arbitrary example. It will also generate a warning, but, if you really want an array of `ArrayList<String>` this is AFAIK the only way for now (the reason stems from the fact generics in Java aren't reified, but array types are.)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T10:03:48.737

Yes, first is the Array of ArrayList and will have strings value in it. second statement is only array list of Strings value.

# forms - 在 symfony2 中将数据从模板提交到控制器

> ID：10598428
> 
> 赞同：0
> 
> 时间：2012-05-15T10:05:18.583
> 
> 标签：forms, symfony, submit

除了使用表单之外，Symfony2 中是否有任何方法可以将数据从模板提交到控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:14:34.247

使用隐藏输入：

```
<input type="hidden" id="hiddenval" name="hiddenval" value=""/> 
```

jQuery :

```
$('#hiddenval').val('your new value'); 
```

然后提交表单时，您可以获得值...

[这是在 Symfony 中创建隐藏字段的文档](http://symfony.com/doc/current/reference/forms/types/hidden.html)

# git - 合并后如何rebase？

> ID：10598431
> 
> 赞同：12
> 
> 时间：2012-05-15T10:05:33.190
> 
> 标签：git, git-merge, git-rebase

我们有一系列这样的事件：

1.  创建分支 A，并向其添加一些提交
2.  时间流逝，数百个提交添加到 master
3.  Master合并到A
4.  时间过去了，也许另外 50 个提交添加到 master

是否可以将步骤 3 中的合并转换为变基？如果不出意外，它将使即将进行的合并更简单，因为可以查看的历史更少。

我们还没有启用 rerere。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2018-02-21T18:37:30.447

考虑以下 Git 图：

```
A...C...D...F
^       ^   ^ master
 \       \
  G...H...I...J
              ^ feature 
```

... 表示“大量提交”。

假设我们想从本质上进行变基，即获取特性历史中的提交，而不是主历史中的提交，并将它们修改为 master 中的线性提交序列。这与我们在提交时将 master 合并到 feature 的事实混淆了`I`。如果我们尝试 rebase，Git 会搞砸，因为它会尝试`C`在 master 之上应用例如并发现冲突。

`feature`我们可以通过从中获取实际更改并将它们打包到一个新的提交中来解决这个问题。这是一种仅使用非常基本的 Git 命令的方法：

```
(1) git checkout feature
(2) git merge master
(3) git reset A
(4) git add -A  # This stages all working copy changes
(5) git commit -m "Every change between A and J" 
```

在步骤 (2) 中，分支在和`feature`中都有所有变化。在第 (3) 步之后，HEAD 指向，但我们的工作副本具有来自和的所有更改，并且步骤 (4) 和 (5) 暂存并提交这些更改。`master``J``A``master``J`

此时我们的图表看起来像这样

```
A...C...D...F
^           ^ master
 \
  J'
  ^ feature 
```

请注意，它`J'`包含`A...F`. 现在我们做

```
git rebase master 
```

Git 很乐意将更改应用`J'`为新的提交`J''`，但要添加的唯一更改是那些更改，`G...J`因为其他更改已经在 master 中。所以现在我们有

```
 A...F<--J''
master^   ^feature 
```

我们分支中的所有更改都被`feature`压缩到 commit`J''`中。此时，您可以根据需要以更精细的方式（甚至使用）重置`F`并重新应用更改。`J''``git add --patch`

* * *

另一种做本质上相同的事情的方法是`read-tree`在[这个其他答案中解释](https://stackoverflow.com/a/6258664/2665591)

```
git checkout master
git read-tree -u -m feature 
```

* * *

[从这个答案](https://stackoverflow.com/a/43687128/2665591)中窃取的另一种做同样事情的方法是

```
git diff master > feature.patch
git checkout master
patch -p1 < feature.patch 
```

# unix - 无法加载由 PHP 生成的纯文本文件 - 使用 curl 实用程序的脚本

> ID：10598434
> 
> 赞同：0
> 
> 时间：2012-05-15T10:05:51.460
> 
> 标签：unix, curl, command-line, plaintext

我坐在 Mac OS X 系统上，我无法解决使用命令行领域的一个简单问题：使用该命令`curl http://mureakuha.com/dl.php?type=1&id=1234`我从（显然）生成纯文本文件的 PHP 脚本中没有得到任何数据。

我希望解决方案是将正确的标志传递给**curl**，但我不知道从哪里开始。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:18:40.840

试试`curl 'http://mureakuha.com/dl.php?type=1&id=1234'`。这里的问题是`&`url 中未引用的符号。

# crystal-reports - Crystal Reports：如何在子报表中显示主报表页码？

> ID：10598440
> 
> 赞同：0
> 
> 时间：2012-05-15T10:06:08.233
> 
> 标签：crystal-reports, numbers, report, subreport

我有很多主报告，我想通过创建特殊的子报告（模板）来统一所有主报告的页眉，该子报告应该显示页码、打印日期、公司名称等。我想避免放置所有这些信息每次我创建新的主报告时，在每个主报告中。1.是否可以在子报表中显示主报表页码N of M，而不在每个主报表中创建共享变量？2\. 我应该使用不同的方法来创建这样的模板吗？非常感谢你的帮助。B.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:52:58.760

不确定这是否可行，我个人会创建一个带有页眉和页脚的“主”报表，然后为实际数据创建一个子报表，子报表可以通过共享变量返回诸如标题之类的内容（希望比其他方式少）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:25:24.067

我建议使用“模板专家”（报告|模板专家...）来进行这种类型的格式化。

“模板”只是没有数据源的 RPT。添加“特殊”字段（例如第 N 页，共 M），应用字体和颜色等。

要使用它，请将 RPT 添加到模板目录；在 Crystal Reports 中，模板位于`C:\Program Files\Business Objects\Crystal Reports 12.0\Templates\en`目录中。

根据我的经验，模板“专家”在格式化报告页眉/页脚和页眉/页脚部分方面做得不错。

另一种选择是始终从预先格式化的报告开始，而不是空白报告。我通常遵循这种方法。

# objective-c - 从其调用方法中使 NSTimer 无效

> ID：10598441
> 
> 赞同：1
> 
> 时间：2012-05-15T10:06:12.803
> 
> 标签：objective-c, ios, multithreading, nstimer

我已经使用 [NSTimer scheduledTimerWithTimeInterval:target:selector:userInfo:] 安排了一个计时器，并希望在它触发时使其无效。

```
- (id)init
{
    [NSTimer scheduledTimerWithInterval:1 target:self selector:@selector(fired:) userInfo:nil repeats:YES];
}

- (void)fired:(NSTimer *)timer
{
    if (someCondition) {
        [timer invalidate];
    }
} 
```

这是允许的吗？该文件指出

> 您必须从安装了计时器的线程发送此消息。如果您从另一个线程发送此消息，与计时器关联的输入源可能不会从其运行循环中删除，这可能会阻止线程正确退出。

如果这不是完成此任务的正确方法：正确的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T10:22:00.623

从 fire 方法中调用`[timer invalidate]`就可以了，该代码将在与创建计时器时使用的线程相同的线程中执行。

您引用的 Apple Doc 仅警告您，如果您创建一个单独的线程并从中使计时器无效，那么，并且只有这样，应该预期不可预测的行为。

前任。

```
// Create the background queue
dispatch_queue_t queue = dispatch_queue_create("do not do this", NULL);

// Start work in new thread
dispatch_async(queue, ^ { 

         // !! do not do this  !!
         if (someCondition) {
                 [yourTimer invalidate];
         }
         // or this
         [self fire:yourTimer];
});

// won’t actually go away until queue is empty
dispatch_release(queue); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:15:07.337

可以从触发的方法中使其无效，因为触发的方法与计时器安排在同一线程上：

> scheduleTimerWithTimeInterval:target:selector:userInfo:repeats:
> 
> 创建并返回一个新的 NSTimer 对象，并以默认模式将其安排在当前运行循环中。

# html - 使用 div:after 清除元素

> ID：10598443
> 
> 赞同：1
> 
> 时间：2012-05-15T10:06:22.897
> 
> 标签：html, css, pseudo-class

在寻找[这个问题](https://stackoverflow.com/q/10584744/196838)的解决方案时，我尝试在`:after`伪类中添加一个清除元素。它做了我想要的，但不是出于我预期的原因 - 在缩小范围后，我发现定义以下内容可以清除元素：

```
.right_field > div:after
{
    content: "style=\"foo\"";
} 
```

我希望它做的是将文本附加到内元素`style="foo"`的末尾，但它不会添加任何视觉内容并清除元素，以便它们环绕它们的浮动子元素。`div``.right_field`

请参阅以下小提琴进行演示。尝试`foo`从 content 属性中删除 ，看看它如何不再清除元素，而是将文本附加到每个元素。 [http://jsfiddle.net/dNJxd/5/](http://jsfiddle.net/dNJxd/5/)

为什么会发生这种情况，这是一个值得信赖的功能吗？我在 Chrome、Firefox 和 IE7-9 上对其进行了测试，它们都以相同的方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:41:04.520

您的示例确实在元素`style="foo"`之后附加了文本。`div`唯一不会这样做的浏览器（从您的测试浏览器列表中）是 IE7，因为它不支持`::after`伪类。

也许您需要进一步扩展您的[JSFiddle 结果窗口](http://jsfiddle.net/dNJxd/5/embedded/result/)。

此外，这不会清除浮动 - 它只是给父 div 一些高度，因为附加的文本没有浮动。当内容的`div`高度大于附加文本时，仍然会发生边框折叠。

# firefox - 使用 Gecko 12.0 在 Firefox 上注册 XPCOM

> ID：10598466
> 
> 赞同：2
> 
> 时间：2012-05-15T10:07:41.160
> 
> 标签：firefox, firefox-addon, xpcom

我写了一个二进制 XPCOM 组件。它使用 XULRunner SDK 12.0 (Gecko 12.0) 成功编译，但在 Firefox 中注册失败！消息是：

> WARN addons.updates: testxp@meilijie.com 的更新清单不包含更新属性

我的`install.rdf`样子是这样的：

```
<?xml version="1.0"?>

<RDF xmlns="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:em="http://www.mozilla.org/2004/em-rdf#">

  <Description about="urn:mozilla:install-manifest">
   <em:id>testxp@meilijie.com</em:id>
   <em:unpack>true</em:unpack>
   <em:name>CTestXP</em:name>
   <em:description>Welcome to meilijie!</em:description>
   <em:version>0.1</em:version>
   <em:creator>wanyunxiao</em:creator>
   <em:homepageURL>https://meilijie.com/testxp</em:homepageURL>
   <em:type>2</em:type>
   <!-- Mozilla Firefox -->
   <em:targetApplication>
     <Description>
       <em:id>{9f748727-57a0-4f2d-8d24-b71212c18d32}</em:id> 
       <em:minVersion>4.0</em:minVersion>
       <em:maxVersion>12.*</em:maxVersion>
     </Description>
   </em:targetApplication>
 </Description> 
```

我的`chrome.manifest`：

```
binary-component components/TestXP.so

interfaces components/CTestXP.xpt

contract  @meilijie.com/newedu/CTestXP;1 {9f748727-57a0-4f2d-8d24-b71212c18d32} 
```

* * *

我用 firefox 工具检查组件：错误控制台。
当我输入这些代码时：

```
Components.classes["@meilijie.com/newedu/CTestXP;1"].createInstance(); 
```

错误信息是：

*错误：Components.com/newedu/CTestXP;1'] is undefined javascript:%20Components.classes["@meilijie.classes["@meilijie.classes['@meilijie.com/newedu/CTestXP;1'] com/newedu/CTestXP;1"].createInstance(); 行：1*

我用html和js代码检查它，html代码是：

```
<html>
  <SCRIPT SRC="MyComponentTest.js"></SCRIPT>
  <BODY>
    <BUTTON ONCLICK="MyComponentTestGo();">Go</BUTTON>
  </BODY>
</html> 
```

和下面的 js 文件 MyComponentTest.js：

```
function MyComponentTestGo() {
try {
    netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
    const cid = "@meilijie.com/newedu/CTestXP;1";
    obj = Components.classes[cid].createInstance();
    obj = obj.QueryInterface(Components.interfaces.IMyComponent);
} catch (err) {
    alert(err);
    return;
}
var res = obj.Add(3, 4);
alert('Performing 3+4\. Returned ' + res + '.'); 
```

# php - 使用 CodeIgniter 调度函数的执行

> ID：10598474
> 
> 赞同：2
> 
> 时间：2012-05-15T10:08:21.660
> 
> 标签：php, codeigniter, scheduled-tasks

我需要每隔几个小时执行一个函数，现在我通过以下方式手动执行它：

```
http://www.mywebsite.com/controller/function 
```

例如，有没有办法安排每四个小时执行一次此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:58:22.557

在最好的情况下，您应该在 *NIX 命令行中使用 wget 或 CURL 将 cron 作业设置为每小时请求该 URL：

```
0 1 * * * wget http://www.mywebsite.com/controller/function 
```

由于此 URL 可公开访问，因此使用[http://www.mywebsite.com/controller/function?key=my_secret_key_here之类的参数对其进行保护](http://www.mywebsite.com/controller/function?key=my_secret_key_here)

也看看这个在线服务：[http ://cronless.com/](http://cronless.com/)

# google-chrome - 基于云的“知识库”方法，带有 google chrome 的链接、片段和摘录

> ID：10598478
> 
> 赞同：2
> 
> 时间：2012-05-15T10:08:38.370
> 
> 标签：google-chrome, hyperlink, code-snippets, evernote, knowledge-management

我是一名网络开发人员，有很多（数百个）我不想记住的黑客、教程和代码片段的链接。我目前正在使用evernote 将链接的内容保存为片段，并使其可搜索且始终可用（即使源站点已关闭）。

我花了很多时间标记、排序、评估和保存东西到印象笔记，我对结果不太满意。我最终得到了大量标签，并在重新标记已保存文章的同时不断重新排序和重命名标签。

我的要求

*   基于网络
*   将 Web 内容保存为具有丰富样式的片段（代码部分等）
*   可能的相互关联的条目
*   用于访问内容的 chrome 插件
*   用于内容生成的 chrome 插件
*   用于更快排序/标记/批处理的网络应用程序或桌面客户端
*   良好且灵活的搜索机制
*   （奖金）谷歌搜索集成（谷歌搜索结果中来自知识库的搜索结果）

我看了一下 kippt 但这似乎不是我的解决方案。如果我没有找到更好的解决方案，我愿意继续使用印象笔记，因为它几乎可以满足我的所有需求，但我需要一个好的计划来整理我的链接/片段并整理它们。

您使用哪些解决方案以及如何管理您的知识库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:33:13.617

我是 Evernote 的忠实粉丝，但对我的所有工具都持严厉批评态度。我一直坚持使用 Evernote，因为我对它的基本信息结构感到满意。然而，我目前正在开发一些应用程序来提供可视化，并希望有更好的方式来导航复杂的笔记集。

基于多年使用 Evernote 和 wiki 进行协作和软件项目管理的一些技巧：

*   无论您使用哪种工具，您都无法摆脱整理事物的需要
*   不要过度考虑使用标签，标签与单词组合是一种很好的搜索方式（你知道你可以在搜索中说 tag:blah 以将其与单词搜索结合起来吗？）
*   为不同目的构建索引页面——我使用更多的内部笔记链接来将 Evernote 视为 wiki
*   如果您经常使用移动客户端，请重构为更小的笔记本，允许您选择在不同时间拥有不同的内容集合

# java - 在 Java 桌面应用程序中播放视频

> ID：10598482
> 
> 赞同：2
> 
> 时间：2012-05-15T10:09:06.140
> 
> 标签：java, video, jmf

我正在尝试 Java Media Framework，但我注意到它不支持许多视频格式，而且似乎更新不够。是否有适用于 Windows Java 桌面应用程序的 JMF 替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:17:51.513

是的，我绝对建议远离 JMF。我感受到了你的沮丧！我个人推荐[VLCJ](http://www.capricasoftware.co.uk/projects/vlcj/index.html)，特别是如果您需要对多种格式的支持 - 我在我的应用程序中使用它并且效果很好。

以下问题也可能是相关的：

[用 Java 处理视频（DVD、.avi .mkv）](https://stackoverflow.com/questions/4669384/dealing-with-video-dvds-avi-mkv-in-java)

[向 JavaFX 2.2 添加其他视频编解码器/DVD 支持](https://stackoverflow.com/questions/8153227/adding-other-video-codecs-dvd-support-to-javafx-2-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:13:26.220

简而言之，它看起来像一个死胡同。我会切换到 JavaFX 2.1——它得到了更好的支持，而且似乎也是“活的”。Stack Overflow 上还有更多信息：[Adding other video codecs / DVD support to JavaFX 2.2](https://stackoverflow.com/questions/8153227/adding-other-video-codecs-dvd-support-to-javafx-2-0)

# android - Android ListView 选择器无法正常工作

> ID：10598483
> 
> 赞同：1
> 
> 时间：2012-05-15T10:09:08.467
> 
> 标签：android, listview, selector

`我正在使用列表选择器，但它不能正常工作。单击列表项后我得到效果，但在单击项目之前没有效果。这是我的选择器代码：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
     android:state_selected="false"
        android:state_pressed="false"
        android:drawable="@drawable/ic_launcher" />

    <item android:state_pressed="true"
        android:drawable="@drawable/headerplain" />

    <item 
    android:state_focused="true" 
    android:state_pressed="false" 
    android:drawable="@drawable/headerplain" />

    <item android:state_selected="true"
     android:state_pressed="false"
        android:drawable="@drawable/headerplain" />
</selector>

and I have applied it to listView as 
 <ListView
        android:id="@+id/listView123"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"         
        android:listSelector="@drawable/list_selector"
        android:drawSelectorOnTop="true"
        android:focusable="true"
        >
    </ListView> 
```

请帮我解决这个问题提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:26:51.077

[这](http://android.cyrilmottier.com/?p=454)是一个很好的教程，很好地解释了选择器的工作原理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:13:48.760

我有`rowback`并且`rowback_selected`在我的可绘制文件夹中......

并使用`android:state_focused`, `android:state_selected`, `android:state_pressed`...

```
<item android:state_focused="true" android:drawable="@drawable/rowback" />
<item android:state_pressed="true" android:drawable="@drawable/rowback_selected" />
<item android:state_selected="true" android:state_focused="false"
    android:state_pressed="false" android:drawable="@drawable/rowback_selected" />
<item android:state_window_focused="false"
    android:drawable="@drawable/rowback" /> 
```

# cocos2d-iphone - 动画 CCSprite

> ID：10598484
> 
> 赞同：0
> 
> 时间：2012-05-15T10:09:10.413
> 
> 标签：cocos2d-iphone

我是 cocos2d 的新手，正在准备我的演示游戏。我只使用一个图像从右到左移动一个精灵，比如从左到右移动的鸟图像。但我想通过各种图像为该精灵设置动画，使其看起来像一只飞翔的鸟。我不知道如何做到这一点。

这是我的代码：

```
 CCSprite *target = [CCSprite spriteWithFile:@"Target.png" rect:CGRectMake(0, 0, 27, 40)]
id actionMove = [CCMoveTo actionWithDuration:actualDuration position:ccp(-target.contentSize.width/2, actualY)];
    id actionMoveDone = [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)];
    [target runAction:[CCSequence actions:actionMove, actionMoveDone, nil]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:59:02.593

对于动画特定精灵你需要精灵表在你的资源中。您可以使用我通常使用的[Texture Packer](http://www.texturepacker.com/download/)或[Zwoptex](http://zwopple.com/zwoptex/)工具创建 Sprite-sheet 。

接下来你可以实现下面的代码

```
 CCSpriteBatchNode *sheet = [CCSpriteBatchNode batchNodeWithFile:@"drawing1-i3.png"]; // Png File Name
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"drawing1-i3.plist"]; // Plist File Name
    [self addChild:sheet];

        //Generating the Animation 
    NSMutableArray *arr_anim =[NSMutableArray array];
    for(int i=1; i<30; i++) // i< number of frames in the plist File Name
    {
        NSString *str_fileNm = [NSString stringWithFormat:@"drawing1%d.png",i];
        CCSpriteFrame *frame = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:str_fileNm];
        [arr_anim addObject:frame];
    }

    CCSprite *startAnim = [CCSprite spriteWithSpriteFrameName:@"drawing11.png"];
    [startAnim setPosition:ccp(150,150)];
    [self addChild:startAnim];

    //Starting the Animation 
    CCAnimation *animation = [CCAnimation animationWithFrames:arr_anim delay:0.15f];
    // id action =[CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:animation restoreOriginalFrame:YES]];
    id action =[CCAnimate actionWithAnimation:animation restoreOriginalFrame:NO];   
    [startAnim runAction:action]; 
```

我认为它会帮助您创建动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:47:51.483

使用[CCAnimation 类。](http://www.cocos2d-iphone.org/api-ref/0.99.5/interface_c_c_animation.html)

特别是，使用类似`animationWithFrames:`的方法并将图像作为数组提供。

# obfuscation - 保护 PHP CLI 脚本

> ID：10598485
> 
> 赞同：1
> 
> 时间：2012-05-15T10:09:11.427
> 
> 标签：obfuscation, php, hiphop

我目前正在命令行中编写一个小型商业 PHP 脚本，它将成为 VPN (PPTP) 管理器。

实际上，它是一个套接字服务器，它正在等待诸如“create”、“suspend”、“unsuspend”、“changepassword”之类的命令……然后它会解析 PPTP 文件并修改它们。

问题是我必须提供非常简单的 PHP 文件，它们只需要安装 php5-cli（没有 apache，没有别的），我需要保护它不被读取（实际上，它只有 1 个文件，就是一整堂课，剩下的可以清楚了）。我希望系统尽可能轻，这就是为什么不需要 GUI、web-server、curl、*sql ......

我考虑过 IonCube，但它非常昂贵并且不能与 cli 脚本一起使用，因为它需要一个加载器，它是由 apache 加载的。这是我认为每个编码器的问题。

我想到了 HipHop PHP（来自 Facebook），但很难理解如何使用（因为我可以编译我的源代码，但用户指南说明了如何使用它启动我们的清晰源代码：/）。

所以，我是来寻求帮助的。我有一些 PHP-cli 脚本，它们必须在命令行中运行，它们不需要网络服务器来工作，而且我只需要（因为它是一个商业产品）来保护我的资源不被阅读和非法分发（这很容易绕过许可证系统）。该文件只是一个 PHP 类。

谢谢。

-- 编辑 -- 准确地说，我想按月、6 个月、年支付。如果清楚，那么每个人都可以评论许可证检查，并免费获得。我喜欢开源，为了证明，我为这个项目编写了 3 个类，一个带有输出处理（stdout/stderr/logfile）的调试/警告/错误管理器和一个 Socket 类，你只需要包含和扩展它，你有一个完整的服务器（你只需要实现所需的功能，服务器将调用“received commmand”（），我不想混淆这两个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:23:55.757

至于 ionCube，有一个[在线编码器](http://www.ioncube.com/online_encoder.php)可用，只需几美元就可以一次性编码您的脚本，具体取决于您的代码库的大小。如果您编写自己的许可机制，则可以使用它。此外，您关于ionclube loader的说法不正确，不需要apache，它只是一个可以在php.ini中加载的模块。在我看来，IonCube 是一个不错的选择。

请花点时间真正询问您需要多少保护。计算机将始终了解如何解释您的代码，因此最终人类将能够窥视内部，如果他真的想的话。

如果 ionCube 加载器在您的客户端上不是一个选项，那么有几个 PHP 的“混淆器”可能会阻止“快速浏览者”在不到一小时的时间内理解代码。这些混淆器不会加密您的代码，但它们会通过将所有变量、函数和类名更改为一些任意散列并删除所有注释和空格来降低代码的可读性。他们不需要在服务器上运行任何东西，但最终你的 PHP 代码仍然是一样的。

# blackberry - 如何在整个宽度和高度黑莓中显示具有背景的按钮？

> ID：10598488
> 
> 赞同：0
> 
> 时间：2012-05-15T10:09:21.830
> 
> 标签：blackberry

我在我的应用程序中动态显示按钮。当我确定要显示的按钮数量时，它工作正常。但是，现在我想更改单击按钮的背景颜色，我也可以这样做，但只有标签部分更改了颜色，其余部分仍然相同。

那么，我该如何解决这个问题呢？这是我到目前为止的代码：

```
btn = new ButtonField[Global.vec_locdisablecityname.size()];

for(int i=0;i<Global.vec_locdisablecityname.size();i++){
    btn[i] = new ButtonField("",ButtonField.CONSUME_CLICK |ButtonField.FOCUSABLE);
    btn[i].setLabel((String)Global.vec_locdisablecityname.elementAt(i));

    if(Global.flag == true){
        Global.flag = false;
        Bitmap bmp_backbtnclick=Bitmap.getBitmapResource("bg-btn-location.png");
        Background bg_backbtnclick=BackgroundFactory.createBitmapBackground(bmp_backbtnclick);
        btn[i].setBackground(bg_backbtnclick);
    }
    else {
        if(Global.selectedbutton == i){
            Bitmap bmp_backbtnclick=Bitmap.getBitmapResource("bg-btn-location.png");
            Background bg_backbtnclick=BackgroundFactory.createBitmapBackground(bmp_backbtnclick);
            btn[i].setBackground(bg_backbtnclick);
        }
        else {
            btn[i].setBackground(null);
        }
    }
    FieldChangeListener listener = new FieldChangeListener() {
        public void fieldChanged(Field field, int context) {
            if ( field instanceof ButtonField ) {
                for ( int i = 0; i <= 1; i++ ) {
                    if ( field == btn[i] ) {
                        System.out.println("CLicked::::---->>>" +i);
                        btn[i].setBackground(null);
                        Global.selectedbutton = i;
                        selectedcityid = Global.vec_locdisablecitycode.elementAt(i).toString();
                        System.out.println("value of selected city id:::-->>" +selectedcityid);
                        selectedcitycodeparse(selectedcityid);
                        selectedstartloading();
                        break;
                    }
                    else {
                        btn[i].setBackground(null);
                    }
            }
        }
        }
    };
    btn[i].setChangeListener(listener);
    hfmbuttons.add(btn[i]);
} 
```

# actionscript-3 - 如何在没有 FB.ui 或 PHP 的情况下使用 actionscript 发送 apprequest？

> ID：10598489
> 
> 赞同：0
> 
> 时间：2012-05-15T10:09:22.753
> 
> 标签：actionscript-3, facebook-graph-api, notifications

我正在使用图形 API 在 Flash 中构建一个应用程序，我想在应用程序书签旁边发布一个增加计数的请求（详见此处：http: [//developers.facebook.com/docs/requests/](http://developers.facebook.com/docs/requests/)），所有文档参考：

1.  服务器端（PHP SDK），使用“应用程序密钥”检索 app_access_token 没有问题，或

2.  使用需要用户交互的 FB.ui，这不是我想要做的。

有没有办法仅通过 JS SDK 发送应用请求（应用到用户）？

难道这个功能在沙盒模式下不起作用？

* * *

更新：解决了。解决了。

我使用服务器来检索 app_access_token（仅适用于有效的登录用户），一旦拥有 app_access_token，在 flash 中使用标准 api 调用就没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:02:53.113

更新：解决了。解决了。

我使用服务器来检索 app_access_token（仅适用于有效的登录用户），一旦拥有 app_access_token，在 flash 中使用标准 api 调用就没有问题。

# javascript - Run/fire/trigger javascript on button click?

> ID：10598490
> 
> 赞同：0
> 
> 时间：2012-05-15T10:09:24.297
> 
> 标签：javascript, jquery, onclick, onload

Well I don't know correct word for this so I wrote three of them, hope you wont mind...

Now, my question. I have javascript that is running on pageload as it's usual... The script hide specified id's and reveal them on click. Let's call this script "hide on load".

My problem here is, that another javascript, let's call it "news" is running as well on page load and I can see it only 1 second, until another script hide div id's.

Once I click on specified div that should run reveal "news", nothing happends. I can see that "hide on load" running fading (fadein) but nothing is being revealed.

Hide on Load script:

```
$(window).load(function(){
var activeElement;

function activateElement( eltSuffix ) {
    if( activeElement ) {
        activeElement.fadeOut( 500, function() {
            activeElement = $('#content-reveal-'+eltSuffix);
            activeElement.fadeIn( 500 );
        } );
    } else {
        activeElement = $('#content-reveal-'+eltSuffix);
        activeElement.fadeIn( 500 );
    }
}

$(document).ready( function() {
    $('#content div').hide();
    $('#info a').click( function() {
        activateElement('info');
    } );
    $('#search a').click( function() {
        activateElement('search');
    } );
    $('#music a').click( function() {
        activateElement('music');
    } );
    $('#socials a').click( function() {
        activateElement('socials');
    } );
} );
}); 
```

News script:

```
 $(document).ready(function () {
        $('#newsticker_1').newsticker({
            'style': 'fade',
            'showControls': false,
            'autoStart': true,
            'fadeOutSpeed': 'slow',
            'fadeInSpeed': 'slow',
            'transitionSpeed': '4000',
            'pauseOnHover': true
        });
})(jQuery); 
```

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:31:33.397

You can use onclick html on the div so....

```
<div id="whatyouwanttoclickon" onclick="news()"></div> 
```

But you would have to name the function news like this.

```
function news(){
        $('#newsticker_1').newsticker({
            'style': 'fade',
            'showControls': false,
            'autoStart': true,
            'fadeOutSpeed': 'slow',
            'fadeInSpeed': 'slow',
            'transitionSpeed': '4000',
            'pauseOnHover': true
        }); 
```

Or you could use jquery like this....

```
$('#divyouwanttoclickon').click(function(){//putyourfunctioninhere}); 
```

# titanium-mobile - 如何在pubnub上获取特定频道的订阅者列表

> ID：10598492
> 
> 赞同：0
> 
> 时间：2012-05-15T10:09:31.663
> 
> 标签：titanium-mobile, publish-subscribe, pubnub

我正在使用 pubnub 在钛中编写应用程序。我需要获取订阅特定频道的所有人的设备 ID 或任何特定详细信息。请让我知道如何将所有订阅者的设备 ID 获取到特定频道。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:10:53.417

Pubnub的整个文档中没有这样的功能。你必须实现一个像“whosthere()”这样的函数，它将消息发布到一个频道。然后，所有连接（订阅）的客户端都需要使用“imhere()”或类似的东西来回复该帖子。

*   [http://www.pubnub.com/devcenter](http://www.pubnub.com/devcenter)

# asp.net - ASP.NET MVC 4 WebGrid EF

> ID：10598493
> 
> 赞同：0
> 
> 时间：2012-05-15T10:09:32.553
> 
> 标签：asp.net, asp.net-mvc, entity-framework, webgrid

我有一些关于 Webgrid 的简短问题。

1.  如何将当前数字放入一列？（我正在使用 EF）

2.  如何显示字符串而不是整数？（假设我有一个 int 字段*高度*，如果它在 1.50- 1.60 之间，我希望在 webgrid 中看到*small*、 1.60-1.70 - *normal*、 1.7-1.8 - *big*、 >2 - *huge*）

铬。没有。身高老 | 新高度

1 | 1.55 | 小的

2 | 1.78 | 普通的

3 | 2.40 | 巨大的

```
@grid.GetHtml(tableStyle: "table",
          alternatingRowStyle: "alternate",
          headerStyle: "header",
          columns: grid.Columns(
          grid.Column(columnName: "?",header: "Crt. No.", canSort: true),
          grid.Column(columnName: "height", header: "height old", canSort: true),
          grid.Column(columnName: "height?", header: "height new", canSort: true))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:50:15.130

> 1）。如何将当前数字放入一列？（我正在使用 EF）

您可以使用视图模型，而不是将 WebGrid 绑定到`Model`，将其绑定到 a`Model.Select((item, index) => new { Index = index, Element = item })`甚至更好地使用拥有这两个属性的真实视图模型，而不是使用匿名对象。

> 2）。如何显示字符串而不是整数？（假设我有一个 int 字段高度，如果它在 1.50- 1.60 之间，我想在 webgrid 中看到 small ， 1.60-1.70 - normal ， 1.7-1.8 - big ， >2 - huge ）

您可以使用自定义`format`列。

这是一个例子：

```
@model IEnumerable<SomeModel>

@{
    var grid = new WebGrid(Model.Select((item, index) => new { Index = index, Element = item }));
}

@grid.GetHtml(
    tableStyle: "table",
    alternatingRowStyle: "alternate",
    headerStyle: "header",
    columns: grid.Columns(
        grid.Column(columnName: "Index", header: "Crt. No.", canSort: true),
        grid.Column(
            header: "height old", 
            canSort: true, 
            format: 
                @<text>
                    @item.Element.height
                </text>
        ),
        grid.Column(
            header: "height new", 
            canSort: true, 
            format: 
                @<text>
                    @Html.FormatHeight((double)item.Element.height)
                </text>
        )
    )
) 
```

如您所见，我们使用了`Html.FormatHeight`自定义扩展方法，如下所示：

```
public static class HtmlExtensions
{
    public static IHtmlString FormatHeight(this HtmlHelper htmlHelper, double height)
    {
        if (height < 1.5)
        {
            return new HtmlString("tiny");
        }
        if (height > 1.5 && height < 1.6)
        {
            return new HtmlString("small");
        }
        else if (height > 1.6 && height < 1.7)
        {
            return new HtmlString("normal");
        }
        else if (height > 1.7 && height < 1.8)
        {
            return new HtmlString("big");
        }

        return new HtmlString("huge");
    }
} 
```

# java - 阻塞队列设计

> ID：10598495
> 
> 赞同：0
> 
> 时间：2012-05-15T10:09:56.403
> 
> 标签：java, design-patterns, queue

n 个线程产生一个`BlockingQueue`。当队列已满时，消费者排空队列并进行一些处理。

我应该如何在以下两种实施选择之间做出决定？

选择A：消费者定期轮询队列以检查它是否已满，所有写入者都在等待（毕竟这是一个阻塞队列：）。

选择 B：我使用同步的“放置”方法实现了我自己的队列。在放置提供的元素之前，我测试队列是否接近满（满减 1 个元素）。然后我放置元素并通知我的消费者（正在等待）。

第一个解决方案是最简单的，但会轮询；这让我很恼火。在我看来，第二种解决方案更容易出错，并且需要更多的编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:53:58.640

我建议编写您的代理队列，该队列将在内部与 Exchanger 实例一起包装队列实例。您的代理方法将调用委托给您的内部队列。添加时检查内部队列是否已满，当已满时，与消费者线程交换内部队列。消费者线程将交换一个空队列以换取已填充的队列。您的代理队列将继续填充空队列，而消费者可以继续处理已填充的队列。这两个活动可以并行运行。当双方都准备好后，他们可以再次交换。

```
class MyQueue implements BlockingQueue{
    Queue internalQueue = ...
    Exchanger<Queue> exchanger;

    MyQueue(Exchanger<BlockingQueue> ex){
    this.exchanger = ex;
    }

     .
     .
     .

    boolean add (E e) {
      try{
        internalQueue.add(e);
      }catch(IllegalStateException ise){
        internalQueue = exchanger.exchange(internalQueue);
      }
      internalQueue.add(e);     
    }

}

class Consumer implements Runnable {
    public void run() {
        Queue currentQueue = new empty queue;
        while (...){
           Object o = currentQueue.remove();
           if (o == null){
              currentQueue = exchanger.exchange(currentQueue);
              continue;
           }
           //cast and process the element
        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:40:00.237

第二种解决方案显然更好。它并没有那么复杂。您可以继承或包装任何其他`BlockingQueue`方法并覆盖其方法`offer()`，如下所示：调用“真实”offer()。如果返回`true`，则退出。否则触发工作线程工作并立即`offer()`超时调用。

这是几乎伪代码：

```
public boolean offer(E e) {
    if (queue.offer(e)) {
        return true;
    }
    boolean result = queue.offer(e, timeout, unit); // e.g. 20 sec. - enough for worker to dequeue at least one task from the queue, so the place will be available.
    worker.doYouJob();
    return result; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:10:27.663

我不知道您是否需要这样的队列实现：消费者在队列变满时等待，并且只有当它完全耗尽并开始处理时。

您应该为消费者阻塞队列，直到它变满为止。认为您需要覆盖 drain() 方法以使其在队列已满时等待。比您的消费者只需调用并等待排水方法。不需要从生产者到消费者的通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T08:10:22.713

我使用了 CountdownLatch，它很简单，效果很好。感谢其他想法:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T11:17:02.013

使用观察者模式。让您的消费者向队列通知程序注册。当生产者进行放置时，队列将决定是否通知任何侦听器。

# jquery - 如何在设备的 sdcard 中部署 HTML5 应用程序并像 .apk 应用程序一样访问它

> ID：10598497
> 
> 赞同：0
> 
> 时间：2012-05-15T10:10:15.940
> 
> 标签：jquery, android, html

我有一些基于 HTML5 的页面，我希望它将其部署在设备的 sdcard 中并像普通的 .apk 应用程序一样访问它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:04:07.597

感谢每一位我得到解决方案的人从 sdcard 获取 html 页面，这可能是我使用以下代码的更好方法。下面的代码也使用完全激活 java 脚本设置和所有

```
package com.WebView.ebook;
import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.os.Environment; 
import android.view.Window;
import android.view.WindowManager;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class WebVieweBookActivity extends Activity {
WebView wvMain;

String urlfunBook="file://"+Environment.getExternalStorageDirectory()+"/test.html";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    setContentView(R.layout.main);

    wvMain=(WebView)findViewById(R.id.webView1);
    WebSettings webSettings8 = wvMain.getSettings();
    getWindow().setFlags(
            WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
            WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);

    wvMain.getSettings().setJavaScriptEnabled(true);
    wvMain.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    wvMain.getSettings().setPluginsEnabled(true);
    wvMain.getSettings().setSupportZoom(false);

    wvMain.getSettings().setCacheMode(wvMain.getSettings().LOAD_NO_CACHE);
    webSettings8.setPluginState(WebSettings.PluginState.ON);
    wvMain.setWebViewClient(new WebViewClient());

    wvMain.getSettings().setSupportMultipleWindows(true);
    wvMain.getSettings().setPluginsEnabled(true);
    wvMain.getSettings().setUseWideViewPort(true);
    wvMain.getSettings().setLoadWithOverviewMode(true);

    wvMain.setWebChromeClient(new WebChromeClient());
    wvMain.getSettings().setAllowFileAccess(true);
    wvMain.loadUrl(urlfunBook);

    wvMain.setWebViewClient(new WebViewClient() {

        @Override
        public void onReceivedError(WebView view, int errorCode,
                String description, String failingUrl) {
            // Handle the error
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    });

if(!Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){
        System.exit(4);
        } 
    else {
        wvMain.loadUrl(urlfunBook);
    }
   }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:20:23.783

除非您使用 web 视图创建应用程序并以这种方式加载 html 页面，否则您将无法像应用程序一样访问它。即使那样，这也可能行不通。

例如 -[如何在 android 上加载保存在 sdcard 中的 Html 页面？](https://stackoverflow.com/questions/4141506/how-to-load-html-page-saved-in-sdcard-on-android)

您可以使用浏览器并在本地访问文件。

例如 - [https://android.stackexchange.com/questions/4775/how-can-i-open-an-html-file-i-have-copied-from-pc-to-sd-card-of-phone](https://android.stackexchange.com/questions/4775/how-can-i-open-an-html-file-i-have-copied-from-pc-to-sd-card-of-phone)

[https://android.stackexchange.com/questions/8312/how-can-i-can-open-local-files-in-the-default-android-browser](https://android.stackexchange.com/questions/8312/how-can-i-can-open-local-files-in-the-default-android-browser)

或者您可以使用其中一种网络应用程序开发工具，例如 [http://phonegap.com/](http://phonegap.com/)

[http://incubator.apache.org/cordova/](http://incubator.apache.org/cordova/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T10:25:48.590

使用[PhoneGap API](http://phonegap.com/)或[SensaTouch API](http://docs.sencha.com/touch/2-0/)使用[jquery mobile](http://jquerymobile.com/)构建带有 html 页面的 Android 应用程序。然后可以使用[Eclipse](http://www.eclipse.org/)生成 apk 文件。

# javascript - 我在可拖动节点内更改了一些文本，然后将此节点拖动到另一个容器中，旧值又回来了

> ID：10598499
> 
> 赞同：0
> 
> 时间：2012-05-15T10:10:23.750
> 
> 标签：javascript, dojo, javascript-framework, drag-and-drop, dojo-dnd

我有一个 dojo.dnd 容器（UL 标签）。在它里面我有一个标签（在 LI 标签中），我在浏览器中更改这个 INPUT 的值，然后我把这个 LI 拖到另一个容器中。删除后，我在 INPUT 字段中看到旧值。你能帮我不要在输入字段中丢失新值吗

谢谢

拖动之前，更改值之后 ![拖动前，值改变后](../Images/4cf00a634f832ad443efe6b509a004b4.png)

掉落后 ![在此处输入图像描述](../Images/6881e958351747f89dfab2b16fbc1705.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:08:13.057

I'd guess that the space is breaking your code. Is the data URL encoded? Try replacing the space with "%20" and see if you still get the error.

# html - 有哪些方法可以关闭 void 元素（例如 HTML5）的自关闭标签？

> ID：10598501
> 
> 赞同：38
> 
> 时间：2012-05-15T10:10:24.743
> 
> 标签：html

`<br>`在 HTML5 中，用 关闭标签是否仍然合适`<br />`？

这显然也适用于所有其他单个标签。我意识到这实际上并不会影响事物的工作方式，但是这里的最佳实践是什么？

```
someLines of txt <br>            // How you see a lot of people doing it
and then some <br />             // XHTML style! Should I still be doing this? 
ow im not done yet.. <br> </br>  // No one does this right? RIGHT?! 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-15T10:40:42.373

来自[HTML 的 W3C 规范](http://www.w3.org/TR/html-markup/syntax.html#void-element)：

*   以下是 HTML 中 void 元素的完整列表：

    *   `area`, `base`, `br`, `col`, `command`, `embed`, `hr`, `img`, `input`, `keygen`, `link`, `meta`, `param`, `source`, `track`,`wbr`
*   void 元素只有一个开始标签；不得为 void 元素指定结束标记。

*   开始标签由以下部分组成，完全按照以下顺序：

    *   一个`<`字符。
    *   元素的标签名称。
    *   可选地，一个或多个属性，每个属性前面必须有一个或多个空格字符。
    *   可选地，一个或多个空格字符。
    *   可选地，一个`/`字符，仅当元素是空元素时才可能存在。
    *   一个`>`字符。

由此看来，我们可以使用`<br>`or 或`<br/>`。但是，结束标签**无效**`</br>`，所以不要使用.**`<br> </br>`**

 **[通过HTML Validation Service](http://validator.w3.org/)运行以下命令也表明了这一点。

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Testing void elements</title>
</head>
<body>
    some lines of txt <br>
    and then some more <br />
    I'm not done yet... <br> </br> <!-- This line generates an error -->
</body>
</html> 
```

所以使用`<br>`or `<br/>`，只要确保你始终如一地使用它们。

**编辑**：正如 Brad 所指出的，`<br />`它也是有效的 XHTML，所以也许最好选择这种形式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T10:27:05.400

`void`恕我直言，我认为最好遵守 XHTML 标准，甚至关闭@Alex 指出的所谓元素。如果您的代码也是有效的 XML，那么您*可能会*找到更好的工具支持来管理您的代码

```
<br>  // not valid XML without a closing tag

<br /> // valid XML and I prefer this

<br></br>  // valid XML but unnecessary clutter 
```

无论如何，如果您应该通过[HTML Validation Service](http://validator.w3.org/)运行您的代码。只要它是有效的，那么你就只处理编码风格，每个人都会对这个问题有自己的个人倾向。

**[编辑]**

为了澄清我的答案，我建议使用这些`XHTML`标题中的任何一个......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

如果您正在为 HTML5 编码，那么客户端/浏览器应该支持严格的标准

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T10:33:33.703

更重要的是，您要保持一致，如果您使用的`<!DOCTYPE html>`是 void 或自闭合的 then 标记，如某些人所说，解析器将为您处理。

决定采用一种方法并坚持下去，我们决定使用 xhtml 样式语法，但我们并不真正使用 xhtml。即使解析器对其他需要能够理解您的标记的人更加宽容，所以如果您有一个标准并且每个人都对此表示赞同，那么每个人都在同一张赞美诗中唱歌。

为什么我们需要约定？因为以下所有内容都是有效的：

```
<META CHARSET=UTF-8>        
<META CHARSET=UTF-8 />      
<META CHARSET="UTF-8">      
<META CHARSET="UTF-8" />        
<meta charset=utf-8>        
<meta charset=utf-8 />      
<meta charset="utf-8">      
<meta charset="utf-8" />        
<MeTa CHARset=utF-8> 
```

要考虑的另一件事是 html5 属性，我们决定在一组属性的末尾使用布尔样式属性，并始终在其他属性周围使用引号，例如：

```
<video id=“vid1” data-someting="my_val" controls> 
```

这样我们就不必使用冗余语法（在我看来）：

```
<video id=“vid1” controls="controls"> 
```

仅仅因为 html5 允许我们省略结束标记，甚至是`</p>`标记，它并没有使它正确。

我希望您决定使用 xhtml 'sytle' 语法来保持自己的理智！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T10:24:32.893

在html 5 中对于[void 元素](http://www.w3.org/TR/html-markup/syntax.html#void-element)`/`是有效且被忽略的，其中之一是，所以这完全取决于你，尽管我个人会摆脱这种习惯，因为它是一个遗留问题。（事实上​​它是一个空元素意味着正如你所说的那样；是荒谬的）`br``<br> </br>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-19T02:57:08.060

从链接的文章中了解了[自闭合标签](https://www.tutorialstonight.com/self-closing-tags-in-html.php)后，我知道`<br>`,`<br/>`或者`<br />`所有在 HTML5 中都是有效的。

但是如果你写`<br/>`，`<br />`它们最终会`<br>`被浏览器转换成 HTML5。

此外，如果您编写`<br></br>`它们的浏览器不会产生一些错误，但它会将其读取为 2 个`<br>`标签。

```
someLines of txt <br>            // This is completly valid and recommended
and then some <br />             // XHTML style! should be written like this in XHTML but in HTML5 you can just write <br>
ow im not done yet.. <br> </br>  // Even if you do this then no error will generate. Instead browser will read it as 2 <br> tags 
```

方法如下：

```
<p>This is paragraph with &lt;br&gt;<br> and &lt;br/&gt;<br/> and then &lt;br /&gt;<br />.</p>
<p>closing br is wrong way <br></br> but browser read it as 2 br.</p> 
```

它在浏览器中的外观：

[![在此处输入图像描述](../Images/1a34d2b47b5404627de6ce7dce2ea6bf.png)](https://i.stack.imgur.com/SQhJo.png)**

# asp.net - Google Maps API：setCenter 使用搜索关键字？

> ID：10598502
> 
> 赞同：0
> 
> 时间：2012-05-15T10:10:25.077
> 
> 标签：asp.net, google-maps, google-maps-api-2

我在我的 ASP.NET Web 应用程序上使用 Google Maps API。

目前，中心位置是使用 Lat/Long 值设置的，例如：

```
map = new GMap2(document.getElementById("map_canvas"));
map.addControl(new GLargeMapControl());
map.addControl(new GMapTypeControl());
map.setCenter(new GLatLng(<%=MapLat %>, <%=MapLong %>), <%=MapZoomLevel %>); 
```

我希望用户能够通过指定地址关键字（邮政编码等）来搜索地图。

是否可以`setCenter()`使用地址关键字进行设置，而不是指定 Lat/Long 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:29:03.340

您应该查看地理编码[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

您基本上所做的是将地址发送给 Google，它会为您返回正确的纬度/经度。

# android - 使用 AndAR 分析相机数据而不显示在屏幕上

> ID：10598503
> 
> 赞同：1
> 
> 时间：2012-05-15T10:10:32.297
> 
> 标签：android, artoolkit, andar

我正在使用一个代码，该代码使用有关 AR 标记的相机数据来使用 AndAR（基于 ARToolkit）计算 Android 设备位置。

关键是我想在打印另一个 3D 对象渲染时进行分析，ho 注意到相机和 AR 标签的共同点。

有人有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:38:08.690

回答我自己的问题，在输出图像时无法分析图像，因为 ARToolkit 使用的主要活动继承自 AndARActivity，继承自活动，因此它们需要布局。

我正在使用的解决方案是：

-我实现了 2 个应用程序，第一个应用程序从相机中获取图像并进行必要的分析，第二个应用程序使用第一个应用程序的数据

-我实现了一个用于在应用程序之间共享数据的 osc 传输

-我强制第一个应用程序继续运行，所以它在第二个应用程序启动时不断获取相机数据

我认为这不是最好的选择，但我需要结果并且它的工作方式。

# hibernate - 在 Eclipse Indigo 中配置休眠

> ID：10598504
> 
> 赞同：0
> 
> 时间：2012-05-15T10:10:33.423
> 
> 标签：hibernate, classnotfoundexception, eclipse-indigo, nhibernate-configuration

我正在开发一个基于 Web 的项目。

当我启动我的 tomcat 服务器时，它会重定向到登录 HTML 页面。单击登录链接时，将调用一个 JSP 页面。所有验证都在 JSP 页面中完成。这里使用 Hibernate 与数据库进行交互。

问题：

单击登录链接时，会引发 MetadataProvider 和 ReflectionManager 类的 ClassNotFoundException。这两个类都属于 hibernate-annotations-common jar。

我尝试通过更新我的 Eclipse 来安装休眠，通过手动下载 jar 文件并将其添加到 web-inf/lib 文件夹，但仍然会弹出相同的异常。

它与 eclipse indigo 64 位/windows 7 64 位/tomcat 7 有什么关系吗？我之前发现 32 位和 64 位的 eclipse 是不同的。休眠也是一样的吗？

* * *

将所有 jar 添加到项目的运行配置中，令我惊讶的是它起作用了。我认为这些罐子是从 web-inf 库中提取的。但是我从那里删除了所有 jar 并将其添加到运行配置中并且它可以工作。

在我工作的宝贵应用程序中，jar 位于 web-inf lib 文件夹中，运行配置只有 tomcat jar，它仍然可以工作。这怎么可能？

# c# - 如何以编程方式调用示例网页上的按钮

> ID：10598508
> 
> 赞同：0
> 
> 时间：2012-05-15T10:11:03.457
> 
> 标签：c#, .net, httpwebrequest, http-post

我确实尝试过像我在网页上所做的那样。我的意思是，在网页上，我单击按钮，发布事件从 ASP 页面请求我的查询结果。

在这里，我确实以编程方式尝试它；

```
string paramaters = "sql=select+%2A+from+hsp%5Fistanbul+u+where+u%2Ehsp%5Fhosdere%5Fno+%3D+28960099";
    string strResponse;

HttpWebRequest requestLogin = (HttpWebRequest)WebRequest.Create("http://10.1.20.39/query/query.asp");
requestLogin.Credentials = new NetworkCredential("xyz", "tyewrrf"); 
requestLogin.Method = "POST"; 
 requestLogin.ContentType = "application/x-www-form-urlencoded"; 
requestLogin.ContentLength = paramaters.Length; 
StreamWriter stOut = new StreamWriter(requestLogin.GetRequestStream(), System.Text.Encoding.ASCII);
stOut.Write(paramaters); 
stOut.Close();
HttpWebResponse responseLogin = (HttpWebResponse)requestLogin.GetResponse(); 
StreamReader stIn = new StreamReader(responseLogin.GetResponseStream());
strResponse = stIn.ReadToEnd();// here I want to get the the same html codes as if I do click on the web page...
stIn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:12:52.313

考虑使用[http://watin.org/](http://watin.org/)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:21:10.013

参数不好，这就是为什么我使用萤火虫查看帖子数据的原因。然后它开始工作了。

# python - 如何在python中压缩两个元组列表

> ID：10598516
> 
> 赞同：4
> 
> 时间：2012-05-15T10:11:29.233
> 
> 标签：python, list, tuples

我有两个元组列表，例如：

```
a = [(1,2,3),(4,5,6),(7,8,9)]
b = [(1,'a'),(4,'b'),(7,'c')] 
```

a 和 b 中每个元组的第一个元素是匹配的，我想得到一个这样的列表：

```
merged = [(1,2,3,'a'),(4,5,6,'b'),(7,8,9,'c')] 
```

也许我会有另一个清单，例如：

```
c = [(1,'xx'),(4,'yy'),(7,'zz')] 
```

稍后将其合并到“合并”列表中，我尝试了不适合这种情况的“zip”和“map”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T10:19:54.650

```
>>> a = [(1,2,3),(4,5,6),(7,8,9)]
>>> b = [(1,'a'),(4,'b'),(7,'c')]
>>> 
>>> [x + (z,) for x, (y, z) in zip(a, b)]
[(1, 2, 3, 'a'), (4, 5, 6, 'b'), (7, 8, 9, 'c')] 
```

检查第一个元素是否真正匹配，

```
>>> [x + y[1:] for x, y in zip(a, b) if x[0] == y[0]] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T10:14:56.890

```
def merge(a,b):
    for ax, (first, bx) in zip(a,b):
        if ax[0] != first:
            raise ValueError("Items don't match")
        yield ax + (bx,)

print list(merge(a,b))
print list(merge(merge(a,b),c)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:13:34.013

```
>>> [a[i]+(k,) for i,(j, k) in enumerate(b)]
[(1, 2, 3, 'a'), (4, 5, 6, 'b'), (7, 8, 9, 'c')] 
```

使用`timeit`这是返回合并列表的已发布解决方案中最快的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T18:04:16.970

```
[ (x,y,z,b[i][1]) for i,(x,y,z) in enumerate(a) if x == b[i][0] ] 
```

这可以确保值匹配然后合并。

# objective-c - Plist 到 ios 中的字符串类型

> ID：10598518
> 
> 赞同：0
> 
> 时间：2012-05-15T10:11:31.613
> 
> 标签：objective-c, casting, nsstring

我正在尝试从 plist 中获取数据。当在视图控制器中显示时，plist 中的一行在中间有“\n”的句子以更改行。但是当我将 plist 作为数组拾取时，在使用 NSString 将该元素转换为字符串时，它不会被读取为本地化字符串。没有换行。整个文本与中间的 '\n' 一起显示。我如何使 '\n' 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:47:17.387

这里发生的是 plist 文件转义反斜杠以确保它们将显示为键入的内容。这意味着`\n`您看到的内容存储`\\n`在文件中。如果您使用的是 XML 存储，请在文本编辑器中打开它来查看。

[在NSString: newline escape in plist](https://stackoverflow.com/q/2035567/1318452)中讨论了这个问题并提出了多种解决方案。

# php - 当我在 WAMP 上工作时使用命令行运行 php 文件

> ID：10598520
> 
> 赞同：1
> 
> 时间：2012-05-15T10:11:37.060
> 
> 标签：php, wamp

我的项目名称是一个水泵，我想使用命令行运行水泵项目 product.php 文件，那么我必须写什么？

我遵循以下步骤。运行 -> 输入 'cmd'</p>

将目录更改为 PHP 文件夹。你可能有不同的版本。cd C:\wamp\bin\php\php5.3.5

但是在将目录更改为 PHP 文件夹后我必须写什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:16:12.587

请查看以下链接。它可以帮助你

```
http://php.net/manual/en/install.windows.commandline.php 
```

在windows中试试这个..

对于 Linux 用户，则可以使用如下命令

php产品.php

# mysql - MySQL删除触发器不更新其他表列

> ID：10598522
> 
> 赞同：1
> 
> 时间：2012-05-15T10:11:44.733
> 
> 标签：mysql, triggers, sql-update, calculated-columns, cascading-deletes

我有一个产品表，其中有一`quantity_on_hand`列在插入/更新/删除事务时需要更新。在插入表中，我通过事务中的 qty 减少了字段，在更新中，我根据事务中的`NEW`and`OLD`值减少并添加了字段。在`DELETE`触发器中，我只是根据`OLD`交易价值添加了股票。

和触发器工作正常`INSERT`，`UPDATE`但`DELETE`触发器既没有正确更新也没有产生任何错误！这是代码：

**插入触发器（工作）**

```
CREATE TRIGGER `tr_stockout_ai` AFTER INSERT ON `stockout` 
FOR EACH ROW BEGIN
UPDATE stockin SET qoh = qoh - NEW.qty WHERE id_stockin = NEW.id_stockin;
END;
$$ 
```

**更新触发器（工作）**

```
CREATE TRIGGER `tr_stockout_au` AFTER UPDATE ON `stockout` 
FOR EACH ROW BEGIN
UPDATE stockin SET qoh = qoh + OLD.qty WHERE id_stockin = OLD.id_stockin;
UPDATE stockin SET qoh = qoh - NEW.qty WHERE id_stockin = NEW.id_stockin;
END;
$$ 
```

**删除未按预期工作的触发器**

```
CREATE TRIGGER `tr_stockout_ad` AFTER DELETE ON `stockout` 
FOR EACH ROW BEGIN
UPDATE stockin SET qoh = qoh + OLD.qty WHERE id_stockin = OLD.id_stockin;
END;
$$ 
```

谁能告诉我我在这里想念什么？请注意，没有语法错误，代码创建触发器很好，触发器执行时也没有显示错误，MySQL 没有报告任何错误代码！我试过从`AFTER`to改变，`BEFORE`但问题是一样的。删除一行后，in 的值`qoh`保持不变！

这个问题仍然存在。我在运行 MySQL 5.5 的基于 cPanel 的环境中的其他 MySQL 数据库服务器上对其进行了测试。我的开发服务器和此生产服务器上的环境或多或少相同，问题也相同。变量名值 innodb_version 1.1.8 version 5.5.22-cll version_comment MySQL Community Server (GPL)

**更新：**当直接在表上给出删除命令时，DELETE 触发器*执行得非常好*`stockout`，即`delete from stockout where id_stockout=12`. 但是，如果我们要删除该表上具有级联删除的表上的行，`stockout`则级联删除正在工作，但删除触发器`stockout`未执行。例如，表`salesinv_det_items`有它的主键作为外键，`stockout`并且关系是级联的。每当我们删除`salesinv_det_items`对应的外键行中的一行时，都会`stockout`删除其中的删除触发器，但`stockout`不会执行删除触发器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-21T22:46:27.037

OP写道：

> **回答：** MySQL 自 5.0 版以来存在一个错误，该错误到目前为止尚未解决，它不会触发外键级联操作的触发器。 [http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)
> 
> **它说：** *目前，级联外键操作不激活触发器。*
> 
> 看起来很神奇，但这是真的！
> 
> 那么答案不是让外键级联，而是编写触发器来完成这项工作。

# url - 如何检测url的路径是否以某个单词开头

> ID：10598525
> 
> 赞同：0
> 
> 时间：2012-05-15T10:11:52.877
> 
> 标签：url, preg-match

我试图弄清楚如何从 facebook 页面获取页面名称，虽然我已经知道如何从`http://www.facebook.com/pagename`版本中获取它，但我无法弄清楚如何测试并从看起来更长的版本中获取它像这样`http://www.facebook.com/pages/pagename/433425324544`。如何测试以查看路径是否以开头，`/pages`以及如何使用一个函数从中提取页面名称。这是我用来以标准形式获取页面名称的方法。

```
function get_facebook_username( $facebook_url ) { 
$url = $facebook_url;
$result = preg_match("/(https|http)?:\/\/(www\.)?facebook\.com\/?([^\/]*)/", $url, $matches);
$fb_username = 'default value';
if($result == 1){
    $fb_username = $matches[3];
} else {
    return;
}

echo "$fb_username";
} 
```

我找到了一种更好的方法来做到这一点，除非它会在 URL 位于其缩短版本中时从用户名中删除最后一个字母。例如。

```
//---short
$url = http://www.facebook.com/pagename
//---long
$url  = http://www.facebook.com/pages/pagename/7532527927346

<?php
  $url = $facebook_username;
  $path = parse_url($url, PHP_URL_PATH);
  $pathTrimmed = trim($path, 'pages/../0123456789');
  echo $pathTrimmed;
?>

//---short
 pagenam
//---long
 pagename 
```

为什么简短版本缺少最后一个字母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:04:44.830

我要解决的方法是`explode`使用以下代码将 url 放入数组中：

```
$url  = "http://www.facebook.com/pages/pagename/7532527927346";
$result = explode("/", $url); 
```

你得到以下数组：

```
array(6) {
  [0]=>
  string(5) "http:"
  [1]=>
  string(0) ""
  [2]=>
  string(16) "www.facebook.com"
  [3]=>
  string(5) "pages"
  [4]=>
  string(8) "pagename"
  [5]=>
  string(13) "7532527927346"
} 
```

然后一个简单的 if $result[3] == "pages" 将允许您检查 url 是否包含页面。

**Ninja Edit** 代替explode，您还可以使用`preg_split`which 将不返回空数组元素：

```
$result = preg_split("~/~", $url, -1, PREG_SPLIT_NO_EMPTY); 
```

# version-control - 版本控制概念和最佳实践

> ID：10598526
> 
> 赞同：3
> 
> 时间：2012-05-15T10:12:00.833
> 
> 标签：version-control

我曾使用过 VSS、TFS、ClearCase、SVN 等源代码控制软件，但我的工作主要集中在典型的源代码控制操作，如获取最新、添加新文件等。我想更深入了解基本的源代码控制概念，例如版本控制策略、主干和分支的概念、合并和分叉操作、标签和历史视图。这些应该与正在使用的包无关，并且应该讨论一般概念和最佳实践。任何人都可以指出一本好书或互联网资源来了解这些概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:42:36.267

请学习此链接，

1.  [http://www.ericsink.com/scm/source_control.html](http://www.ericsink.com/scm/source_control.html)
2.  [http://betterexplained.com/articles/a-visual-guide-to-version-control/](http://betterexplained.com/articles/a-visual-guide-to-version-control/)

他们可能对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:42:11.953

关于分支和合并工作流程的一个很好的介绍：

Practical Perforce 的第 7 章（Laura WINGERD - O'Reilly）是一个很好的介绍（VCS 不可知论者）在不同类型的分支之间合并工作流：“”**[软件如何演变](http://oreilly.com/catalog/practicalperforce/chapter/ch07.pdf)**“（pdf）。
我还在“[什么时候应该”中详细介绍了这些策略你分支](https://stackoverflow.com/a/2107672/6309)”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T21:52:27.003

ALM Rangers的[**VS 分支和合并指南**](http://vsarbranchingguide.codeplex.com/)是一个极好的资源。它以 TFS 为中心，但包含主要的 SCM 概念。

# c++ - 好友功能问题

> ID：10598527
> 
> 赞同：0
> 
> 时间：2012-05-15T10:12:08.683
> 
> 标签：c++, friend, preprocessor-directive

我在使用 C++ 中的友元函数时遇到了一些困难，但我怀疑这更多是我在使用预处理器指令和#include 时遇到的问题的症状。

这是我正在做的一个愚蠢的例子。五个文件：bobby.h、bobby.cpp、billy.h、billy.cpp 和 main.cpp。Billy 有一个名为 ReceiveMoney 的受保护函数。Bobby 有一个名为 bank 的函数，它调用 Billy 的 ReceiveMoney。也就是说，每次鲍比去银行，他都会和比利分钱。

比利.h

```
#ifndef BILLY_H
#define BILLY_H
#include "bobby.h"

class Billy
{
friend void Bobby::Bank(int, Billy &);
public:
    Billy();
protected:
    void ReceiveMoney(int inc);
private:
    int money;
};
#endif 
```

比利.cpp

```
#include "billy.h"

Billy::Billy()
{
    money = 0;
}

void Billy::ReceiveMoney(int inc)
{
    money+=inc;
} 
```

鲍比.h

```
#ifndef BOBBY_H
#define BOBBY_H

#include "billy.h"

class Bobby
{
public:
    Bobby();
    void Bank(int amount, Billy & b);
protected:
    int money;
};
#endif 
```

鲍比.cpp

```
#include "bobby.h"

Bobby::Bobby()
{
    money = 0;
}
void Bobby::Bank(int amount, Billy & b)
{
    b.ReceiveMoney(amount/2);
} 
```

主文件

```
#include "billy.h"
#include "bobby.h"

int main()
{
    Bobby bo;
    Billy bi;
    bo.Bank(150, bi);
    return 0;
} 
```

我收到大量错误，通常是错误 C2653: 'Bobby' : is not a class or namespace name or error C2653: 'Billy' : is not a class or namespace name

我在 VS0 的一个空控制台项目中执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:14:50.883

您有头文件的**循环依赖项。**
`billy.h`包括`bobby.h`，而`bobby.h`包括`billy.h`。
显然，由于这种循环依赖，编译器无法识别出类型。

最好的解决方案是重新考虑您的设计并避免循环依赖或
使用**[前向声明](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)**来打破循环依赖。

只需转发声明`Billy`类`bobby.h`

```
//#include "billy.h"     <-----  You don't need this include 
class Billy;             <-----  Just Forward Declaration should suffice 
```

您可以在此处使用前向声明，因为声明接受/返回不完整类型的函数或方法，在这种情况下`Billy`是编译器的不完整类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:23:53.857

你的#include 中有一个循环，你不能这样做。您必须在 billy.h 中使用 Bobby 的前向声明。比如`class Bobby;`。即使这样，您也无法声明朋友功能。

唯一真正的解决方案是避免使用`friend`. `ReceiveMoney`实际上应该是公开的：如果 Bobby 代表一个帐户之类的东西，那是合乎逻辑的。

上的约束`friend`使其仅对解决类的内部行为有用（例如，使用集合和实现它们的节点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:24:23.557

由于循环依赖，没有一个类是完全定义的。因此有大量错误。如果可能的话，改变你的设计并继承或只包括必要的东西。正如 Als 所提到的，前向声明可以是一种选择。循环依赖主要是由于设计错误而产生的。

# c# - 面向对象与基于参数的 WCF 调用？

> ID：10598529
> 
> 赞同：2
> 
> 时间：2012-05-15T10:12:20.337
> 
> 标签：c#, wcf, oop

不久前，我开始了一份新工作，他们一直在使用 WCF 处理 UI 和后端之间的所有数据/业务逻辑，这很棒。

我注意到，这些 WCF 服务调用中的绝大多数都包含各种参数。例如，假设您有一个名为 GetFoo 的服务调用。在这里，我们可能会使用如下签名：

```
public Foo GetFoo(int? ID, string Name, DateTime? fooDate) 
```

对于更面向对象的方法，您可以改为使用：

```
public Foo GetFoo(Foo foo) 
```

在这种情况下，代码从 POCO 对象中获取它需要的内容，`Foo`而不是依赖于从 UI 传入的一组特定参数。

一方面，这在 UI 和 WCF 服务之间提供了更灵活的契约。我们可以在不违反任何合同和更新引用的情况下对服务端的实现进行更改。此外，我们可以让业务对象直接作用于 POCO，而不是处理显式的参数列表。

另一方面，尚不清楚需要什么才能获取您想要的对象/数据。

哪种方法被认为是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:40:17.943

我总是选择单参数输入和输出。该参数定义了我期望的数据的消息（或至少是消息体），并且返回定义了我要发回的消息体

如果您使用多个参数，您几乎无法控制在线上的消息外观。

合同操作是 .NET 方法这一事实是一个实现细节。契约的目标是定义消费者和服务之间的消息结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:44:26.213

我建议第三种更详细的方法：

```
public Foo GetFooByName(string Name)
public Foo GetFooByIDAndName(int ID, string Name)
public Foo GetFooByNameAndDate(string Name, DateTime fooDate)
public Foo GetFooByIDNameAndDat(int ID, string Name, DateTime fooDate) 
```

等等等等。为了 DRY，您可能会提取公共代码并制作一些`private`方法。这导致了自我描述的代码，并且可以更准确地查明错误（更不用说您可以更改单个方法而其他方法不受影响，这总是好的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:31:24.367

OOP 是我们大多数人所追求的。如果你意识到，你需要在 Foo 对象上添加一个新属性，而 Foo 对象有 15-20 个方法，这些方法有子方法等等，这只是臭代码，它会节省你做正确事情的时间（哎呀imo :)）。

[多少参数太多了？](https://stackoverflow.com/questions/174968/how-many-parameters-are-too-many)更多信息

我建议你看看 Martin Fowlers 关于重构的书，他说了大多数程序员的想法，但出于某种原因我们不这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:28:05.413

您可以同时拥有两者，但应该清楚它们的含义。您现在拥有的两种方法都不清楚它们的作用。第一个：

如果我通过了会发生什么：

```
ID = 1
Name = "Name"
fooDate = NULL 
```

然后我要求 id = 1 和 name = "Name" 的项目，或者我要求 id = 1 和 name = "Name" 和 fooDate = null 还是要求 id = 1 或 name = "Name" ro fooDate =无效的。

在这种情况下，至少 Id 应该是一个单独的函数。

在您的第二个示例中，您创建了一个函数，我称之为 get by example。但是，您不能要求特定的 NULL 值。除此之外，我不会将其称为面向对象的方法，因为您传入了一个对象。OO 更多的是关于对象如何相互交互。

在选择一个方法时，要更明确地说明你的功能是做什么的。如果您确实需要一个可以传入对象并构建动态查询的函数。调用函数 GetFooByFooExample。但是，如果您只填写 id，请考虑使用 GetFooById 之类的函数，这会使您的代码更具可读性和自我解释性。

# php - Cron 作业和文件夹权限 - 权限被拒绝

> ID：10598530
> 
> 赞同：6
> 
> 时间：2012-05-15T10:12:22.070
> 
> 标签：php, permissions, cron

我在 webroot 上方有一个文件夹，用于临时存储由 php web 应用程序生成的用户文件。例如，这些文件可能是要附加到电子邮件的 PDF 文件。

文件夹权限设置为 rwxr-xr-x (0755)。从 Web 应用程序执行过程时，文件会毫无问题地写入此文件夹。

我现在还设置了一个 cron 作业，它调用 php 脚本来执行与上面完全相同的过程。但是，由于权限失败，无法将 PDF 保存到上述文件夹中 - cron 作业报告`permission denied`错误。

我尝试将文件夹权限设置为 0775，但仍然获得拒绝权限。但是，当权限为 0777 时，cron 作业就可以正常工作。

这对我来说似乎很奇怪 - 为什么 cron 在 0755 处获得了拒绝的权限，但它通过 Web 应用程序运行良好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T10:17:26.600

可能的答案是 cron 作业在您的用户下执行 - 并且该目录归 apache（或 www-data 或 nobody 或您的 Web 服务器运行的任何用户）所有。

要让它工作，您可以设置 cron 作业以作为 Web 服务器用户运行。像这样的东西：

```
su -l www-data -c 'crontab -e' 
```

或者，您可以将权限更改为 775（所有者和组的读写执行，其他人的读取执行）并将文件夹的组所有权设置为运行 cron 作业的用户。

但是，您必须确保如果您要删除某些内容或下降到由 apache 创建的文件夹中，您仍然可能会遇到问题（apache 会创建一个它自己拥有的文件，并且您的用户无法删除它，不管的目录权限。

您还可以查看 suphp 之类的东西或任何最新的东西 - Web 服务器进程在您的用户名下运行，具体取决于您的系统架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:15:43.670

权限授予用户组所有人。这就是3个字符的含义。

您的 php 脚本作为与 cron 作业不同的用户和组运行，因此它们观察到不同的权限。

检查`chown`和`chgrp`，或尝试使用同一用户运行 cron 作业。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:15:58.293

这取决于您定义了 cronjob 的用户。

如果您是 root（不推荐），它应该可以工作。如果您是网络用户（例如 ubuntu 上的 www-data），它也应该可以工作。

```
sudo su - www-data
crontab -e 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T04:03:18.737

如果您使用 cpanel 运行 php，您可以尝试这样的操作：“php /home/algo/public_html/testcron.php” ...只需编写：php（脚本的规则）/yourscritpt.php”

# xsd - 如何使用 xsd.exe 工具从 .cs 生成 .xsd？

> ID：10598531
> 
> 赞同：7
> 
> 时间：2012-05-15T10:12:31.647
> 
> 标签：xsd, xsd.exe

我有一个 .cs 文件，其中包含 XTypedElement 和 IXMetaData 的子类。Microsoft 有一个[工具可以从托管代码自动生成 XSD 文件](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.80%29.aspx)，但它不接受 .cs 文件。它只接受 .exe、.dll、.xdr、.xml 和 .xsd。

如何使用此工具将我的 .cs 文件转换为 .xsd 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-08T08:30:51.650

您首先需要将其编译成 dll 或 exe 文件，即 .NET 程序集，然后将其用作 xsd.exe 的输入

如果只想转换特定类，请使用以下命令：

```
xsd bin\Release\MyAssembly.exe /type:The.FullName.Of.YourType 
```

# jqgrid - JQGrid表单编辑div标签可以隐藏和显示吗？

> ID：10598533
> 
> 赞同：0
> 
> 时间：2012-05-15T10:12:32.057
> 
> 标签：jqgrid, expand

JQGrid 表单编辑输入屏幕，您能否给出一些关于如何隐藏选定区域以及在单击复选框时显示它的想法。

例如

我的表单编辑窗口有

显示完整详细信息复选框和名字、姓氏、年龄和地址、邮政编码、城市、州和国家

如果选中该复选框，则显示名字、姓氏、年龄和地址、邮政编码、城市、州和国家字段，否则将隐藏所有字段

可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:39:20.933

如果我理解正确您的问题，您想测试编辑表单中某些字段的值并隐藏表单的其他一些字段取决于测试值。

您可以在[beforeShowForm](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events)回调中实现该行为。例如，如果您`name: "sold"`在`colModel`which has中有列，`formatter: "checkbox"`那么您将在 id="sold" 的复选框中的编辑表单中找到相应的值。所以你可以`$("#sold").is(":checked")`用来测试值。您可以在回调内部进行此类测试，`beforeShowForm`该回调将在表单初始化之后但在显示之前调用。例如，要隐藏`"address"`列中的信息，您可以使用`$('#tr_address').hide();`. `$('#address')`表示地址的输入字段，并表示`$('#tr_address')`带有信息的编辑表单的整行。

[您可以在答案](https://stackoverflow.com/a/3405961/315935)中找到非常接近您需要的示例。

# c# - 我正在尝试从网站获取图像列表并将它们保存到硬盘但它不起作用

> ID：10598535
> 
> 赞同：0
> 
> 时间：2012-05-15T10:12:36.307
> 
> 标签：c#, html-agility-pack

我正在使用 HtmlAgilityPack。

在此函数`imageNodes`中，foreach 计数为 0

我不明白为什么列表计数为 0

该网站包含许多图像。我想要的是从站点获取图像列表并在其中显示列表，`richTextBox1`并且我还想将站点中的所有图像保存在我的硬盘上。

我该如何解决？

```
public void GetAllImages()
{
   // Bing Image Result for Cat, First Page
   string url = "http://www.bing.com/images/search?q=cat&go=&form=QB&qs=n";

   // For speed of dev, I use a WebClient
   WebClient client = new WebClient();
   string html = client.DownloadString(url);

   // Load the Html into the agility pack
   HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
   doc.LoadHtml(html);

   // Now, using LINQ to get all Images
   List<HtmlNode> imageNodes = null;
   imageNodes = (from HtmlNode node in doc.DocumentNode.SelectNodes("//img")
                 where node.Name == "img"
                    && node.Attributes["class"] != null
                    && node.Attributes["class"].Value.StartsWith("img_")
                 select node).ToList();

   foreach (HtmlNode node in imageNodes)
   {
      // Console.WriteLine(node.Attributes["src"].Value);
      richTextBox1.Text += node.Attributes["src"].Value + Environment.NewLine;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:23:03.880

正如我所见，必应图像的正确类别是`sg_t`. 您可以通过`HtmlNodes`以下 Linq 查询获得那些：

```
List<HtmlNode> imageNodes = doc.DocumentNode.Descendants("img")
    .Where(n=> n.Attributes["class"] != null && n.Attributes["class"].Value == "sg_t")
    .ToList(); 
```

此列表应填写所有`img`与`class = 'sg_t'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:25:01.080

快速查看代码中的示例页面/URL 表明您所追求的图像没有以“img_”开头的类类型。

```
<img class="sg_t" src="http://ts2.mm.bing.net/images/thumbnail.aspx?q=4588327016989297&amp;id=db87e23954c9a0360784c0546cd1919c&amp;url=http%3a%2f%2factnowtraining.files.wordpress.com%2f2012%2f02%2fcat.jpg" style="height:133px;top:2px"> 
```

我注意到您的代码仅针对缩略图。您还需要完整大小的图像 URL，它位于每个缩略图周围的锚点中。您需要从如下所示的 href 中提取最终 URL：

```
<a href="/images/search?q=cat&amp;view=detail&amp;id=89929E55C0136232A79DF760E3859B9952E22F69&amp;first=0&amp;FORM=IDFRIR" class="sg_tc" h="ID=API.images,18.1"><img class="sg_t" src="http://ts2.mm.bing.net/images/thumbnail.aspx?q=4588327016989297&amp;id=db87e23954c9a0360784c0546cd1919c&amp;url=http%3a%2f%2factnowtraining.files.wordpress.com%2f2012%2f02%2fcat.jpg" style="height:133px;top:2px"></a> 
```

并解码如下所示的位： `url=http%3a%2f%2factnowtraining.files.wordpress.com%2f2012%2f02%2fcat.jpg`

解码为： `http://actnowtraining.files.wordpress.com/2012/02/cat.jpg`

# javascript - Joomla yt megamenu 插件的 jQuery 幻灯片延迟

> ID：10598541
> 
> 赞同：0
> 
> 时间：2012-05-15T10:13:09.403
> 
> 标签：javascript, jquery

我有一个有效的 Joomla 扩展程序（YT Mega 菜单）。我想对现有代码进行一些更新。

这是和的`mouseenter`代码`mouseleave`：

```
 li.addEvent('mouseenter', function (e) {
        //if (objectReference.hasOpenning) return;
        log('enter parent of ' + (ul ? ul.id : 'li has not child'));
        li.addClass('hover');
        if (ulexists) {
            objectReference.showChild(ul);
        }
    });
    li.addEvent('mouseleave', function (e) {
        log('leave parent of ' + (ul ? ul.id : 'li has not child'));
        li.removeClass('hover');
        if (ulexists) {
            if (ul.pinned) return false;
            objectReference.hideChild(ul);
        }
    }); 
```

在`mouseleave`我想要隐藏之前延迟`ul`。有什么办法吗？

请帮忙。我是初学者，很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:23:56.297

改变

```
objectReference.hideChild(ul); 
```

至

```
setTimeout(function(){ 
    objectReference.hideChild(ul); 
},time); 
```

以毫秒为单位的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:16:57.750

在`mouseleave`添加一个[setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)如下

```
li.addEvent('mouseleave', function (e) {
    setTimeout(functio(){
        log('leave parent of ' + (ul ? ul.id : 'li has not child'));
        li.removeClass('hover');
        if (ulexists) {
         if (ul.pinned) return false;
         objectReference.hideChild(ul);
       }
   },TIME); 
}); 
```

您希望它在隐藏之前等待`TIME`的时间量在哪里。`milliseconds`

# java - 如何忽略 JUnit/easymock 中的意外方法调用？

> ID：10598543
> 
> 赞同：11
> 
> 时间：2012-05-15T10:13:12.240
> 
> 标签：java, junit, mocking, easymock

我只是想知道是否可以使用 Junit 和 easymock 来忽略​​意外的方法调用？

即，我希望能够说，而不是测试失败 - “此时 - 忽略任何意外的方法调用，并继续正常进行测试”

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-15T10:59:38.687

使用 EasyMock，您可以创建一个不错的模拟，与普通模拟对象不同，如果发生意外/记录的调用，它不会引发断言错误。引用easymock文档...

> 在 createMock() 返回的 Mock 对象上，所有方法的默认行为是为所有意外的方法调用抛出 AssertionError。如果您想要一个默认情况下允许所有方法调用并返回适当的空值（0、null 或 false）的“漂亮”模拟对象，请改用 createNiceMock()。

要创建一个漂亮的模拟，请在 Easymock 类上使用静态 createNiceMock(Class class) 方法...

```
SomeClass someClassNiceMock = EasyMock.createNiceMock(SomeClass.class); 
```

参考：[http ://easymock.org/user-guide.html#mocking-nice](http://easymock.org/user-guide.html#mocking-nice)

# maven - 包括 Maven Proguard 插件中的库

> ID：10598544
> 
> 赞同：1
> 
> 时间：2012-05-15T10:13:14.823
> 
> 标签：maven, proguard

我正在尝试通过 Proguard Maven 插件引用我的库 jar，我该如何包含它们？通常我在配置文件中指向我的库，当我过去使用 DOS 进行混淆时它可以工作。这是我的 Maven proguard 配置

```
<plugin>
            <groupId>com.pyx4me</groupId>
            <artifactId>proguard-maven-plugin</artifactId>
            <configuration>
                <options>
                    <option>-allowaccessmodification</option>
                </options>
                <obfuscate>true</obfuscate>
                <injar>{project.build.directory}/proj-SOC.jar</injar>
                <outjar>${project.build.finalName}-obfuscated.jar</outjar>
                <outputDirectory>${project.build.directory}</outputDirectory>
                <proguardInclude>src/main/ressources/projSOC-obfuscation-config.conf</proguardInclude>
                <libs>
                <lib>lib/rt.jar</lib>
                </libs>
            </configuration>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>proguard</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

# c# - 如何在 Caliburn Micro 中使用 IResult 的 Handle 实现中的协程

> ID：10598545
> 
> 赞同：2
> 
> 时间：2012-05-15T10:13:21.160
> 
> 标签：c#, wpf, caliburn.micro

我喜欢 Caliburn.Micro 中的 Coroutine/IResult 实现，它允许我使用 MVVM 逻辑来控制在视图上执行的几个操作。

但是，在处理来自 eventtaggregator 的消息时，我需要使用相同的方法。我的视图模型实现了 IResult，这导致了以下方法：

```
public void Handle(T message) { ... } 
```

我尝试更改方法以返回 IResult 或 IEnumerable，但当然不会编译，因为那时我没有遵循接口..

现在我正在使用一种方法来创建我需要的 IResults 列表，然后调用

> Caliburn.Micro.Coroutine.BeginExecute(routines.GetEnumerator())

但我不喜欢那个解决方案，我不确定执行在哪些线程上运行。此外，我的例程中没有任何上下文，但我理解上下文可能很困难，因为消息可能来自任何地方。但是，如果 viewmodel 是 ViewAware，可以获取上下文还是？

其他人在 Handle 实现的上下文中做了什么？有什么经验吗？

希望有一些很酷的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:23:42.277

一种选择是基于 Caliburn.Micro 创建您自己的 EA，它了解协程。我们已经考虑过开箱即用地添加它，但我还没有开始考虑它。

# java - 如何从另一个类（Android）设置 TextView

> ID：10598547
> 
> 赞同：0
> 
> 时间：2012-05-15T10:13:26.217
> 
> 标签：java, android

我有这个代码，但它不起作用（强制关闭），我在 C# 中使用它，但它在 java 中不起作用

ClassA c = new ClassA(); c.TextView1.setText("test");

我需要从 ClassB 设置文本视图，是否可以在不使用 Intent 的情况下完成，因为 Intent 需要重新启动 Activity，所有数据都将丢失

任何人都可以为此建议一个代码

我也可以从 ClassB 中设置 ClassA 中的 int x 值吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:18:35.123

是的，你可以做 -

```
Intent i = new Intent(classA.this, classB.class);
Bundle bundle = new Bundle();
bundle.putExtra("name For Identification", "Value);
i.putExtras(bundle);
startActivity(i); 
```

在你的第二班，我的意思是**B班**

```
Bundle bundle = getIntent().getExtras("name for Identification");
String text = bundle.getString("name For Identification"); 
```

只需将此文本设置为您的`TextView`And，**B 类**也应该扩展，`Activity`否则，`getIntent()`代码将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:39:17.837

要在两个活动之间传递价值，您可以使用共享首选项，如下所示

在活动 A 中：

```
public class activityA extends Activity{

private  final String MY_value = "value";//variable used for shared preference
@Override
    public void onCreate(Bundle savedInstanceState)
    {
SharedPreferences myPrefs = getBaseContext().getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
                    SharedPreferences.Editor prefsEditor = myPrefs.edit();
                    prefsEditor.putString(MY_value, "xyz");
                    prefsEditor.commit();
}
} 
```

在活动 B 中，您可以按如下方式检索该值：

```
public class activityB extends Activity{

    private  final String MY_value = "value";//variable used for shared preference
    @Override
        public void onCreate(Bundle savedInstanceState)
        {
    SharedPreferences myPrefs1 = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
                roadworthynumber = myPrefs1.getString(MY_value, "value");

    }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:29:59.513

从 A 类到 B 类的意图

```
Intent toClassB = new Intent(classA.this,classB.class);
toClassB.putExtra("StringId","value"); 
startActivity(toClassB);

//get value
Intent intent = getIntent();
String getValue = intent.getStringExtra("StringId");
//set text
textView.setText(getValue); 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:51:37.500

在 A 类中创建函数 returnThis()

```
ClassA returnThis()
{
  return this;
} 
```

在 classB 中调用此函数并使用返回的参考集 textView 的 classA

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T10:24:56.773

尝试这个

在活动 1 中添加此内容

```
Intent myIntent = new Intent(Activity1.this, Activity2.class);
       myIntent.putExtra("UserId",UserId);
       myIntent.putExtra("UserName",UserName);
       startActivity(myIntent); 
```

在活动 2 中添加此内容

```
Intent intent = getIntent();
UserId=intent.getStringExtra("UserId");
UserName=intent.getStringExtra("UserName"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T10:17:16.007

A类内

定义你的 TextView

```
private TextView1 txtView1; 
```

在 onCreate 期间加载它

```
txtView1 = (TextView) findViewById(R.id.txtView1); 
```

写一个二传手

```
public void setTextOnTextView1(String text) {
  txtView1.setText(text);
} 
```

在您的其他课程中，您现在可以

```
c.setTextOnTextView1("Hello"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T10:28:36.907

是的，它可以在不使用意图的情况下完成，使用静态方法/类成员

从 ClassA 的静态方法中获取 TextView 对象，同样在 ClassA 中定义静态方法 setX(int x) 方法

所以例如

```
class ClassA{

static TextView tv; //this should be intialized in your code via findViewByID or by code depneds

static int x;

static public TextView getTextView(){
return tv;
}

static public void setX(int xP){
x = xP;
}

} 
```

从 ClassB 你可以调用 ClassA.getTextView() 和 ClassB.setX(12)

# msmq - MSMQ 消息从出站队列中消失，但从未到达入站队列

> ID：10598550
> 
> 赞同：4
> 
> 时间：2012-05-15T10:13:32.833
> 
> 标签：msmq

在我们新的内部云上设置现有应用程序时，我遇到了一个奇怪的问题。

我有一个简单的消息传递系统，它将消息从一台服务器（Server1）推送到另一台服务器（Server2）上的 MSMQ。消息从出站消失，但从未出现在入站队列中。

当我使 Server2 msmq 脱机时，消息在 Server1 上建立。在 Server2 上重新启动 Msmq 会导致 Server1 上的出站队列中的消息消失 - 但消息仍然永远不会到达 Server2。

细节：

1.  MSMQ 在工作组模式下设置，因为这是虚拟网络的要求。
2.  队列是私有的。
3.  权限设置为允许某些用户访问。

有没有人知道为什么会发生这种情况或我如何追查这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:27:20.807

可能是远程专用队列是事务队列，而您将消息作为非事务性发送，反之亦然。如果队列上的事务设置和消息不匹配，消息就会消失！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T11:14:06.740

这听起来像是一个权限或解决问题。

尝试在*Applications and Services Logs* -> *Microsoft* -> *Windows* -> *MSMQ*下启用名为*End2End*的事件日志。

此日志应准确告诉您将消息传递到预期目标队列时出了什么问题。

不：对于每次成功交付，此日志中应该引发三个事件：

1.  带有 ID blah 的消息来自网络（即消息来自远程发送者）
2.  带有 ID blah 的消息被发送到队列 blah（即，消息转发到本地队列）
3.  ID blah 的消息被放入队列 blah（即消息到达本地队列）

假设您使用的是 Server 2008 及更高版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-20T17:39:11.793

我过去曾使用直接格式名称看到它，它被设置为类似

*直接=**操作系统**：192.16.8.0.1\PRIVATE$\MyQueue*

我应该在哪里指定*DIRECT= **TCP** :192.168.0.1\PRIVATE$\MyQueue*

请参阅：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms700996 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms700996(v=vs.85).aspx)

@John Breakwell 在这里指出[http://blogs.msdn.com/b/johnbreakwell/archive/2010/01/22/why-does-msmq-keep-losing-my-messages.aspx](http://blogs.msdn.com/b/johnbreakwell/archive/2010/01/22/why-does-msmq-keep-losing-my-messages.aspx)：

用于寻址消息的服务器名称与目标机器不匹配 当 MSMQ 通过网络接收到消息时，它总是验证这台机器是正确的接收者。这是为了确保诸如 DNS 错误配置之类的事情不会导致消息被传递到错误的位置。相反，除非正确设置了 IgnoreOSNameValidation 注册表值，否则这些消息将被丢弃。您可能希望使用面向 Internet 的 MSMQ 服务器来执行此操作，例如，在 Internet 上对 MSMQ 客户端可见的域和服务器名称通常与真实名称没有相似之处（出于良好的安全原因）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T06:09:06.660

消息是否到达服务器 2 上的死信队列？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T19:51:36.780

您可以将 Negative Source Journaling 添加到发送应用程序代码中，以准确找出根本原因。很可能是您已经收到的两个答案之一。

# android - Android Canvas 离屏绘图性能

> ID：10598551
> 
> 赞同：4
> 
> 时间：2012-05-15T10:13:33.123
> 
> 标签：android, performance, graphics, clipping, off-screen

我正在使用`Canvas`element 开发一个 Android 游戏。我在大型游戏地图上绘制了许多图形元素（精灵）。这些元素由标准图形函数绘制，如`drawLine`,`drawPath`等`drawArc`。

测试它们是否在屏幕上并不难。所以，如果他们不在屏幕上，我可能会完全跳过他们的绘图程序。但即使这样也有 CPU 成本。我想知道是否`Android Graphics Library`可以比我更快地做到这一点？

简而言之，我是否应该尝试绘制所有内容，即使它们完全超出屏幕坐标，相信`Android Graphics Library`会照顾它们并且不会花费太多 CPU 来尝试绘制它们，或者我应该自己检查它们的绘图区域矩形以及它们是否完全超出屏幕，跳过绘图程序？哪个是正确的方法？哪个应该更快？

ps：我的目标是Android v2.1及以上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T13:13:00.363

从一个不完全科学的测试中，我绘制了比屏幕更大的区域的位图，我发现事先检查位图是否在屏幕上似乎并没有太大的不同。

在一项测试中，我将一个 Rect 设置为屏幕大小，并将另一个 Rect 设置为位图的位置，并在绘制之前检查了 Rect.intersects() 。在另一个测试中，我只是绘制了位图。在 300 次以上的平局**之后，没有明显的趋势**——有些走一条路，有些走另一条路。我每帧都尝试了 300 次绘图测试，帧与帧之间的差异远大于检查和未检查绘图之间的差异。

我认为**可以肯定地说 Android 检查其本机代码中的边界**，或者您会期望有相当大的差异。我会分享我的测试代码，但我认为在你的情况下进行**自己的测试是有意义的。**点的行为可能与位图不同，或者您的绘画或画布的某些其他功能会改变事物。

希望能帮助你（或其他人偶然发现这个线程，就像我对同一个问题所做的那样）。

# javascript - 自动将相同的文本框聚焦在模糊上

> ID：10598560
> 
> 赞同：0
> 
> 时间：2012-05-15T10:14:03.077
> 
> 标签：javascript, jquery, autofocus

我需要将模糊的文本框聚焦到下一个框。但是，如果检测到错误，则需要再次聚焦。

这是我的代码

```
 <input type="text" id="error_code'" name="errorcode[]" onblur="validate_code(this.id)"/>

function validate_code(id){
var error_code=$("#"+id).val();

 if(isNaN(error_code))
    {
         $('#'+id).val("");  
         $('#'+id).focus();
    }
} 
```

但是这个 id 没有将焦点设置到同一个文本框。tnx。

编辑：我能够验证并获得结果。但是，如果返回错误，我的问题是重新聚焦文本框......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:52:56.410

尝试这样的事情..这非常有效：

**HTML：**

```
<input type="text" id="error_code"/> 
```

**Jquery模糊功能：**

```
$(document).ready(function(){
$("#error_code").blur(function(){
var error_code=$(this).val();
if(isNaN(error_code))     {  
$(this).val("");            
$(this).focus();    
}    
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T05:50:57.760

你需要尝试这样的东西。

```
<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>
<div id="example">
    <div>
        <input type="text" id="error_code" name="errorcode[]" onblur="validate_code(this.id)"/>
    </div>
    <script>
        function validate_code(id){
	       var error_code=$("#"+id).val();
               if(isNaN(error_code)) {
		  setTimeout(function() {
		     $('#'+id).val("");  
		     $('#'+id).focus();
		  }, 0);
	       }
	}
    </script>
</div>

</body>
</html>
```

在 jQuery 的情况下，它已经尝试将焦点设置到该字段。它将阻止该领域的进一步焦点事件。你需要用这样的东西破解它。

# php - 使用PHP执行终端命令

> ID：10598561
> 
> 赞同：0
> 
> 时间：2012-05-15T10:14:03.663
> 
> 标签：php, shell, command-line, terminal

如何使用 PHP 在终端中创建多个命令？例如，如果我想更改文件夹或文件的权限，我可能会运行

```
Sudo Chmod 777 FileName 
```

从命令行。我怎么能用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:19:52.397

看看`exec`，`system`等等：[http ://www.php.net/manual/en/book.exec.php](http://www.php.net/manual/en/book.exec.php)

显然，如果您要使用`sudo`root 访问权限（不推荐），那么您需要以某种方式提供密码或将运行 PHP 的用户设置为不需要密码。

最好为此`SSH`调用并提供要通过该命令执行的命令。

总而言之，我真的不建议使用 PHP（或任何语言）来运行一系列命令，然后使用`sudo`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-15T10:20:52.993

要在 php 中授予文件夹或文件的权限，请使用以下代码行

```
chmod($file,0777); 
```

这将更改文件或文件夹的权限。

# jquery-ui - Sonata Admin Bundle 错误打开 jQuery 对话框

> ID：10598563
> 
> 赞同：0
> 
> 时间：2012-05-15T10:14:12.053
> 
> 标签：jquery-ui, symfony, jquery-ui-dialog, symfony-sonata

我正在使用 Symfony2 和 SonataAdminBundle 创建一个 CMS。

当我把这个：

```
->add('tags', 'sonata_type_model', array('expanded' => true)) 
```

我得到 + 按钮，但是当我单击按钮时，我得到 JS 错误：“对象 [对象对象] 没有方法‘对话框’”

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T11:57:55.383

在我的情况下，这个问题的原因是在捆绑脚本文件之后包含 jquery 文件（jquery-2.0.2.min.js）。

尝试删除在奏鸣曲文件之后加载的额外 ui/jquery 核心文件：

```
 <script src="/bundles/sonatajquery/jquery-1.8.3.js" type="text/javascript"></script>
        <script src="/bundles/sonatajquery/jquery-ui-1.8.23.js" type="text/javascript"></script>
        <script src="/bundles/sonatajquery/jquery-ui-i18n.js" type="text/javascript"></script> 
```

希望这可以帮助

# url-rewriting - Tuckey URL 重写 => 问题？和 & 字符

> ID：10598571
> 
> 赞同：0
> 
> 时间：2012-05-15T10:14:39.440
> 
> 标签：url-rewriting, tuckey-urlrewrite-filter

我目前正在尝试使用 Tuckey 和 Tomcat 来重写 URL。

目前我正在尝试翻译

```
myapp.com/track/2340ddkef?dkfkeif&3434 
```

至

```
myapp.com?req=track&id=2340ddkef?dkfkeif&3434 
```

但在第一个之后？或 & 参数被截断且仅

```
myapp.com?req=track&id=2340ddkef 
```

发送到 servlet。我怎样才能改变这种行为？Tuckey 甚至可以做到这一点，还是我需要应用一些过滤器来确保字符不会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:40:33.830

Embedding ? and & in URLs like that really isn't valid. You should URL encode those strings. For example, in Java, use

```
URLEncoder.encode(id, "UTF-8") 
```

# mysql - 当我们在mysql查询中使用distinct时如何获取其他列

> ID：10598574
> 
> 赞同：0
> 
> 时间：2012-05-15T10:14:59.090
> 
> 标签：mysql

当我在 mysql 查询中使用 Distinct 函数时，我只能从表中获取一列。这是我正在使用的示例查询：

```
SELECT DISTINCT (subcategory.title), common_cat. * FROM `subcategory`
LEFT JOIN common_cat ON ( subcategory.title = common_cat.ctitle ) 
```

它返回如下记录：

```
 title     mid     wid     ctitle
      Tops           17       5     Tops
      Dresses   NULL    NULL    NULL
      Pants/Shorts  18  6   Pants/Shorts
      Skirts    NULL    NULL    NULL
      Swimwear  24  8   Swimwear
      Outerwear     21  9   Outerwear 
```

在来自子类别表的上述数据“标题”字段中。现在我还想从子类别表中获取 id 列。我怎么能得到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:25:07.913

DISTINCT 的工作原理是获取您在表行中提到的列的所有数据，然后过滤掉重复的行并在所有列中显示具有相同值的唯一行。

因此，您只需将列 subcategory.id 添加到列列表中即可。

```
SELECT DISTINCT subcategory.title, subcategory.id, common_cat.* FROM `subcategory`
JOIN common_cat ON ( subcategory.title = common_cat.ctitle ) 
```

请注意，在不同的命令中，不建议使用 * 来获取所有列，因为查询中的列数越多，数据库服务器上的负载就越大，因此输出速度就越慢。您可能只想提及不同列表中所需的列名，并从查询中删除 common_cat.*。

# ios - iOS UiTextField 限制输入导致键盘问题

> ID：10598575
> 
> 赞同：0
> 
> 时间：2012-05-15T10:15:05.277
> 
> 标签：ios, uitextfield

我试图限制用户可以输入的字符数量。我有这个工作，唯一的问题是它现在停止关闭键盘。例如，我想将输入限制为 3 个字符，我输入两个字符并在键盘上按完成，键盘关闭，但如果我输入 3 个字符并按完成，键盘不会关闭任何关于为什么的想法？

这是我的代码

```
 (void)viewDidLoad
{
    NSLog(@"%@", self.chosenTime);
    [self startGame];
    [super viewDidLoad];

    self.nameTextField.delegate = self;
      NSLog(@"%@", self.playerName);
    NSString *timeString =  self.chosenTime;
    self.timer = [timeString intValue];
    self.timeSelected = [timeString intValue];
    self.scoreTimer = 1000;
    self.countdown.text = timeString;

    // Do any additional setup after loading the view.
}

- (IBAction)hideKeyboard:(id)sender {
    NSLog(@"Hello");
    [self.nameTextField resignFirstResponder];
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    self.playerName = [textField.text stringByReplacingCharactersInRange:range withString:string];
    return !([self.playerName length] >= 4);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:25:43.707

试试这个，把最后两种方法改成这三种：

```
- (void)hideKeyboardAction {
    [self.nameTextField resignFirstResponder];
}

- (IBAction)hideKeyboard:(id)sender {
    NSLog(@"Hello");
    [self hideKeyboardAction];
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    self.playerName = [textField.text stringByReplacingCharactersInRange:range withString:string];

    BOOL shouldStayOpen = !([self.playerName length] >= 4); 

    if (!shouldStayOpen)
    {
        [self hideKeyboardAction];
    }

    return shouldStayOpen;
} 
```

# php - Paypal 网站上的浏览器关闭

> ID：10598577
> 
> 赞同：0
> 
> 时间：2012-05-15T10:15:23.100
> 
> 标签：php, asp.net, content-management-system, paypal

如何检查客户是否导航到贝宝网站。如果他关闭浏览器并且不返回主站点。那么我现在必须做我的代码..如果有任何想法。

是否可以将我的文本传递给贝宝网站以显示警告不要关闭页面等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:20:39.293

即使用户在重定向回您的站点之前关闭浏览器，您也可以使用 Paypal 的即时付款通知 (IPN) 功能来处理付款。

从您的问题标签中不清楚您是否需要 php 或 asp.net 解决方案，但下面的文章提供了有关如何将 PayPal 与 .net 网站集成的出色细分 -

[http://www.codeproject.com/Articles/42894/Introduction-to-PayPal-for-C-ASP-NET-developers](http://www.codeproject.com/Articles/42894/Introduction-to-PayPal-for-C-ASP-NET-developers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:19:57.593

解决方案是使用 Paypal 的[IPN（即时付款通知）](https://www.paypal.com/ipn)。

Paypal 将发布到您的 IPN 脚本，以通知您交易已受到影响。这是服务器到服务器完成的，因此比等待用户的浏览器返回您的站点更可靠。

# macos - 我在哪里可以找到 Cocoa 的 NSSearchField 和 NSTableView 教程？

> ID：10598579
> 
> 赞同：0
> 
> 时间：2012-05-15T10:15:38.760
> 
> 标签：macos

我只是 Cocoa 中的一个新生婴儿。但我在 iOS 方面有一些经验。

我想要 Mac OSX Lion 上的 Cocoa 类字典应用程序的 NSSearchField 和 NSTableView 教程。我在哪里可以找到它？

我已经用谷歌搜索了，但我什么也没找到。有这样的教程吗？如果请在那里指导我。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:25:22.843

第一次，您可以在 Apple 的开发者网站上找到示例 Cocoa 教程。

[这](https://developer.apple.com/library/mac/#samplecode/NSTableViewBinding/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010522)是 NSTableView 的示例教程

# javascript - 如何仅显示他们在 html 页面中上传的文件名的前 10 个字符

> ID：10598582
> 
> 赞同：-4
> 
> 时间：2012-05-15T10:15:44.703
> 
> 标签：javascript

打印文件名的代码是

```
<div id="file">'+filename+'</div> 
```

我只想要文件名的前 10 个字符，而不是全部。我可以使用什么 java 脚本函数，因为我不能使用 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:18:17.030

```
var str = "this is isdfisdf";
console.log(str.substr(0, 10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:57:34.167

不确定您是否也想要获取 DIV 内容的代码。完整示例如下：

```
<html>
<head>
<meta charset="utf-8">
<title>Demo</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  </head>
  <body>
    <div id="file">I want the first 10 characters</div> 

    <script>
    $(document).ready(function() {
        var div = $('#file');
        var str = div.text();
        var stripped = str .substr(0, 10);

        alert(stripped);
    });
    </script>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:17:56.133

要从 JavaScript 中的字符串中获取前 10 个字符，请使用[`substr()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substr)

```
var str = str.substr(0,10); 
```

或[`substr()`在 PHP 中](http://php.net/manual/en/function.substr.php)使用：

```
$str = substr(str,0,10); 
```

# ruby-on-rails - 模型和模块的多态性

> ID：10598584
> 
> 赞同：1
> 
> 时间：2012-05-15T10:15:51.400
> 
> 标签：ruby-on-rails, activerecord, module, polymorphism

可以说我有这个模块：

```
module Template

 def self.included(base)

    base.class_eval do
      before_validation(:on => :create) { sanitize_text! }
    end

    base.extend(ClassMethods)
 end

 module ClassMethods

   def sanitize_text!
     # some stuff
   end

 end

end 
```

然后我有一个这样定义的模型：

```
class Invitation < ActiveRecord::Base
  include Template
end 
```

请注意，我没有覆盖方法 sanitize_text！但是当我运行这个 Rails 时会给我一个错误：

未定义的方法“sanitize_text！” 为了 ＃

我不明白 - 是不是假设我的模型邀请已经从模块模板中包含了该方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:13:15.263

before_validation 将块称为实例，因此没有 sanitize_text！因为sanitize_text！是一个类方法。

定义 sanitize_text！在模块中，不作为类方法。

```
module Template
  ...
  def sanitize_text!
    # some stuff
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:18:25.057

您已将其作为*Class Method*包含在内，而不是作为该模型的任何特定实例的方法。

要使用它，您需要将其称为：

```
Invitation.sanitize_text! 
```

要在 Invitation 实例上调用它，请进行以下更改：

```
module Template

 def self.included(base)

    base.class_eval do
      before_validation(:on => :create) { sanitize_text! }
    end

    base.extend(ClassMethods)
 end

 def sanitize_text!
   # some stuff
 end

 module ClassMethods
 end

end 
```

然后您就可以在特定方法上调用它：

```
@invitation.sanitize_text! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:50:17.567

你这样做的方式是`Invitation`用 method 扩展类`sanitize_text!`，而不是`Invitation`.

如果您希望 instance 具有`sanitize_text!`，则最好将其重命名`ClassMethods`为`InstanceMethods`并更改`self.included`为具有此行：

```
base.send :include, InstanceMethods 
```

所以整个代码看起来像这样：

```
module Template
  def self.included(base)
    base.class_eval do
      before_validation(:on => :create) { sanitize_text! }
    end

    base.send :include, InstanceMethods
  end

  module InstanceMethods
    def sanitize_text!
      # method body
    end
  end
end 
```

# jquery - 将 jQuery.show() 和 jQuery.hide() 作为参数传递给元素

> ID：10598587
> 
> 赞同：2
> 
> 时间：2012-05-15T10:16:04.440
> 
> 标签：jquery, show-hide, function-parameter

正如标题所示，我想将 show() 和 hide() jQuery 函数作为参数传递给另一个函数。

```
function applyActionOnClass(attr, action) {
    $('#salesonhold_table tr').each(function () {
    if ($(this).attr('status') == attr)
        $(this).action;
    });
} 
```

这是我调用我的`applyActionOnClass`函数的时候：

```
$(document).on('change', '.checkboxes', function () {
    var attr = $(this).val();
    if ($(this).is(':checked'))
        applyActionOnClass(attr, show());
    else
        applyActionOnClass(attr, hide());
}); 
```

为了解释一下这样做的目的，我有一个表，每个表都有一个彼此`<tr>`不同的`status`属性。我在表格顶部有两个复选框，一个用于每个可能的`status`值，我想`<tr>`在触发复选框时隐藏/显示相应的值。

触发器和东西工作正常，但说到`$(this).action;`它说`hide is not defined`。知道我在那里做错了什么吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:18:58.247

您可以改为传递匿名函数（或委托）。此代码处理：

```
function applyActionOnClass(attr, func) {
    $('#salesonhold_table tr').each(function () {
    if ($(this).attr('status') == attr)
        func($(this));
    });
} 
```

此代码将委托传递给：

```
$(document).on('change', '.checkboxes', function () {
    var attr = $(this).val();
    if ($(this).is(':checked'))
        applyActionOnClass(attr, function(e) { e.show(); });
    else
        applyActionOnClass(attr, function(e) { e.hide(); });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T10:27:35.417

另一种解决方案是像这样改变你的功能

```
function applyActionOnClass(attr, action) {
    $('#salesonhold_table tr').each(function () {
    if ($(this).attr('status') == attr)
        $(this)[action]();
    });
} 
```

注意`$(this)[action]();`你可以在这里看到它[http://jsfiddle.net/t6rEE/](http://jsfiddle.net/t6rEE/)作为概念证明（我尝试了`hide`和`show`）

# forms - 在设计注册表单中添加蜜罐字段

> ID：10598593
> 
> 赞同：0
> 
> 时间：2012-05-15T10:16:16.087
> 
> 标签：forms, devise, registration, honeypot

我将在设计**注册表单中添加一个****蜜罐字段**（作为简单的验证码）。检查数据是否已输入此字段的最佳位置在哪里？

 **如果机器人在此字段中输入了某些内容，则应将其送回索引页面而无需通知。由于我还远未精通 Rails，因此了解它的语法也会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:07:41.107

我认为最好的地方是模型，因为仅接受来自“已验证人”的记录可能是一种业务逻辑。

您可以创建一个验证方法来执行此操作：

```
class Comment < ActiveRecord::Base
  validate :honeypot_absence

  def honeypot_absence
    record.errors.add :invisible_field, "You should not fill the invisible field" unless invisible.field.blank?
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-19T07:31:20.330

我在通过我的设计注册表格注册的机器人遇到了类似的问题，因此通过执行以下操作解决了这个问题：

1.  向视图添加了一个简单的蜜罐输入。（您需要先生成视图才能执行此操作 - `rails generate devise:views`）

```
# app/views/devise/registrations/new.html.erb

<div class="form__honeypot">
  If you see this, leave it blank. Only bots should see this
  <input type="text" name="body" value="" />
</div> 
```

2.  使用 CSS 隐藏字段。

```
.form {
  position: relative;

  &__honeypot {
    position: absolute;
    visibility: hidden;
    left: -5000px;
    top: -5000px;
  }
} 
```

3.  生成设计控制器，以便您可以利用该`create`方法。

`rails g devise:controllers users -c=registrations`

`-c`您可以使用该标志生成全部或仅生成您需要的一个。

4.  在新生成的控制器中，添加以下代码：

```
# app/controllers/users/registrations_controller.rb

class Users::RegistrationsController < Devise::RegistrationsController
  before_action :configure_sign_up_params, only: [:create]

  def create
    if params[:body].present?
      return redirect_to root_path
    end
    super
  end

  def configure_sign_up_params
    devise_parameter_sanitizer.permit(:sign_up, keys: [:body])
  end
end 
```

本质上，这会将填充表单上隐藏字段的任何人（希望是机器人）重定向回`root_url`

5.  最后在中`routes.rb`，添加了让 Devise 知道使用我们生成的控制器来处理的行`registrations`。

```
# config/routes.rb

Rails.application.routes.draw do
  devise_for :users, controllers: { registrations: 'users/registrations' }
end 
```**

# linux - 将某个日期之前创建的目录移动到另一个目录？

> ID：10598595
> 
> 赞同：0
> 
> 时间：2012-05-15T10:16:34.127
> 
> 标签：linux

在 Linux 中，是否有任何命令可以将日期之前创建的所有子目录移动到另一个目录？我有一个包含 3000 多个子目录和子子目录的大目录。有什么快速命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:24:06.180

您可以使用`find`该`atime`选项

```
 find * -type d -atime +number_of_days -exec mv {} /path/to/new_dir \; 
```

有关更多信息，请查看手册页`find`

# android - 如果您旋转，Android MapView 中的部分图块丢失 - 日志显示 DataInputStream.readFully 中的 IOException、EOFException

> ID：10598598
> 
> 赞同：4
> 
> 时间：2012-05-15T10:16:38.407
> 
> 标签：android, android-mapview, mapactivity

[首先，我的问题与各种与 API 密钥相关的 MapView 磁贴问题不同，它也与这个问题](https://stackoverflow.com/questions/7848024/android-mapview-parts-of-map-missing)或[那个](https://stackoverflow.com/questions/6772980/android-mapview-partially-loading-tiles)问题不匹配，尽管它确实有相似之处。

有时我遇到几个瓦片无法加载，在 Android MapView 上留下空白的灰色点。
LogCat 显示了这一点：

```
05-15 11:55:01.178: W/System.err(11978): IOException processing: 26
05-15 11:55:01.178: W/System.err(11978): java.io.EOFException
05-15 11:55:01.178: W/System.err(11978):    at java.io.DataInputStream.readFully(DataInputStream.java:267)
05-15 11:55:01.178: W/System.err(11978):    at java.io.DataInputStream.readFully(DataInputStream.java:212)
05-15 11:55:01.178: W/System.err(11978):    at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readImageData(BaseTileRequest.java:194)
05-15 11:55:01.178: W/System.err(11978):    at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:124)
05-15 11:55:01.178: W/System.err(11978):    at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
05-15 11:55:01.178: W/System.err(11978):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
05-15 11:55:01.178: W/System.err(11978):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
05-15 11:55:01.178: W/System.err(11978):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
05-15 11:55:01.188: W/System.err(11978):    at java.lang.Thread.run(Thread.java:1027) 
```

当您在地图上移动和缩放时旋转设备时，可以在仅包含 MapView 的准系统应用程序中重现这一点。不过，它并非一直都在发生。也许有某种竞争条件。

```
package my.TestApp;

import com.google.android.maps.*;

import android.os.Bundle;

public class MainActivity extends MapActivity  {

MapView mapView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
}

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainlayout"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:apiKey="MyApiKeyGoesHere"
    />

</RelativeLayout> 
```

# php - Googlecheckout，付款完成 XML

> ID：10598599
> 
> 赞同：-1
> 
> 时间：2012-05-15T10:16:54.487
> 
> 标签：php, xml, google-checkout

完成谷歌结帐付款后我得到一个xml。完成付款后我需要更新我的数据库，xml如下所示。在“商家-计算-回调”这样的阶段付款完成？

```
<?xml version="1.0" encoding="UTF-8"?>
<merchant-calculation-callback 
     xmlns="http://checkout.google.com/schema/2"
     serial-number="c2406a1f-6971-4c0f-899e-415ef621dfb46"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:29:32.687

`<merchant-calculation-callback />`在[Merchant Calculations API](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Merchant_Calculations_API)中使用- 它是**结帐**过程中的回调（也称为[Google Checkout API 中的](https://developers.google.com/checkout/)[**第 1 部分**](https://developers.google.com/checkout/)） - Google 将回调发送到您的系统，要求进行计算 - 例如运费、税金、促销，因此名称为*商家计算 -回调*。

**第 1 部分**/结帐 - 是**您将**数据发送到 Google 以进行结帐的部分。因此，它**不会**为您提供与*“完成付款后”相关的信息*

* * *

**第 2 部分/处理结帐订单**涵盖了可用于*“完成付款后”***获取**订单数据的 API——主要是[Notification API](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API)。这些 API 是您必须实现的，以便获取与您自己的订单处理系统集成的数据（例如订单状态、付款状态、保存订单数据、更新库存等）。

 **   订单处理[教程](https://developers.google.com/checkout/developer/Google_Checkout_Custom_Processing_How_To)

* * *

您似乎在问相同/相关的问题：

*   [在谷歌结账中获得价值回报](https://stackoverflow.com/q/5977151/304683)
*   [google checkout，如何在 API 回调中找到已完成的付款](https://stackoverflow.com/q/10595830/304683)*

# android - 锁定后应用程序未全屏 - 解锁

> ID：10598604
> 
> 赞同：1
> 
> 时间：2012-05-15T10:17:08.053
> 
> 标签：android, fullscreen

我注意到，当我打开我的应用程序并等待足够长的时间让我的手机自行锁定时，当我解锁它时，当前内容视图处于非全屏模式。它没有显示顶部栏，而是全是黑线...如果我去另一个活动并返回它会再次修复。我尝试过的事情：1.插入

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,  WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

分为 onCreate、onResume、onRestart 方法。

1.  插入

    android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"

进入 androidmanifest.xml

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:44:47.033

当我在模拟器上运行我的应用程序时遇到了同样的问题，这可能是由于模拟器本身的任何错误，尝试在真实设备上运行你的应用程序，希望你不会遇到这个问题

# scons - scons 检测依赖循环

> ID：10598605
> 
> 赞同：1
> 
> 时间：2012-05-15T10:17:10.893
> 
> 标签：scons

我有一个非常奇怪的依赖循环。它是这样的：

我在 some_library 中使用了一个 object_file，它由 Fred/Jim 目录中的 some_executable 使用，并且 scons 无法构建，说它找到了这个依赖循环：

object_file -> some_library -> some_executable -> Fred/Jim -> Fred -> 。-> 对象文件

对于该库中的几乎每个对象，但据我所知，对于该库的每个引用都不是。

更令人困惑的是，我们为 aix 和 solaris 架构都构建了这个，并且只有 solaris 构建这样做，aix 构建很好。

我正在迁移我们的构建系统，所以这可能是我最近更改的内容，但我不确定在哪里查看......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:12:48.723

啊，好的，我找到了。

这是由于python之间的细微差别

```
a = ('string') 
```

和

```
a = ('string', ) 
```

前者产生一个字符元组:-(

# objective-c - 将文件名放入从目录加载的 NSString

> ID：10598609
> 
> 赞同：0
> 
> 时间：2012-05-15T10:17:18.590
> 
> 标签：objective-c, ios

我已使用以下方法从本地目录加载图像文件：

```
fotosJugadores = [[NSFileManager defaultManager] contentsOfDirectoryAtPath: @"/Users/exular/Developer/GBC/exular/GBC/Caras/" error: &error]; 
```

如何将每个文件名加载到`NSString`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:21:11.600

从该`NSArray`方法返回的包含`NSString`对象，其中每个对象都是一个文件/目录/符号：

例如打印文件名：

```
fotosJugadores = [[NSFileManager defaultManager] contentsOfDirectoryAtPath: @"/Users/exular/Developer/GBC/exular/GBC/Caras/" error: &error];

for (NSString *file in fotosJugadores) {
    NSLog(@"File = %@", file);
} 
```

# iphone - 没有域名的 sip 设置

> ID：10598614
> 
> 赞同：1
> 
> 时间：2012-05-15T10:17:30.903
> 
> 标签：iphone, objective-c, sip, voip

我想为 iPhone 开发一个 VOIP 应用程序。我使用了 Linphone 的 Sip 库，但没有域名我无法注册。服务器没有域。

有没有办法让用户只使用用户名、密码和服务器 IP 进行注册？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-24T10:53:05.603

使用您的 IP 地址作为域名！在 Kamailio、Opensips 或 Asterisk 中，您只需设置 IP 和别名（通常是其他 IP 或域名）来监听 SIP 请求。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T09:13:19.867

是的，可以在没有域名的情况下注册。在 opensips sip 服务器中。您必须设置的配置：

```
modparam("auth_db", "use_domain", 0) 
```

如果为真（非 0），则在查找订阅者表时也将使用域。如果您有多域设置，强烈建议打开此参数以避免域之间的用户名重叠。

所以这取决于你的服务器配置是什么。基本上它要求您 sip 服务器域名。如果它没有任何域名，那么它必须启用域名查找。

# java - OnDelete 级联因违反约束错误而失败 () Hibernate

> ID：10598617
> 
> 赞同：0
> 
> 时间：2012-05-15T10:17:37.437
> 
> 标签：java, hibernate

```
 <id name="idInstance" type="java.lang.Integer">
        <column name="ID_INSTANCE" />
        <generator class="native" />
    </id>

    <property name="nom" type="string">
        <column name="NOM" length="50" not-null="true" />
    </property>

            <property name="description" type="string">
        <column name="DESCRIPTION" length="300" not-null="true" />
    </property>

    <set name="statistiques" cascade="all" lazy="false">
        <key column="ID_INSTANCE"></key>
        <one-to-many class="Statistique" />
    </set>
        </class> 
```

并且类 statistique 的 hbm 文件是：

```
<class name="Statistique" table="STATISTIQUE">

    <id name="idStatistique" type="java.lang.Integer">
        <column name="ID_STATISTIQUE"/>
        <generator class="native" />
    </id>

    <property name="tempsReponse" type="java.lang.Double">
        <column name="TEMPS_REPONSE"/>
    </property>

    <property name="date" type="timestamp">
        <column name="DATE"/>
    </property>

</class> 
```

如果统计列表为空，这似乎工作正常。它因外键违规错误而失败：

> 完整性约束违反 FKD18D3C4EDC6F4BFB 表：STATISTIQUE in statement [delete from INSTANCE_Monitor where (ID_INSTANCE) IN (select ID_INSTANCE from HT_INSTANCE_Monitor)]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:46:11.167

您可能在数据库中有一个约束，它要求 statistique 中的每一行都存在 instance_monitor 中的行。在您可以删除 instance_monitor 中的行之前，您必须删除 statistique 中的相关行。

该子句`cascade="all"`并不意味着数据库级别的级联删除。它只是强制休眠为子表（`statistique`在您的情况下）生成显式删除语句。问题是，删除语句可能以与您的数据库约束不兼容的顺序到达。这也可能是由于 hibernate 对数据库语句的重新排序而发生的。

您可以做什么：删除数据库约束（如果可能）或

1.  从 statistique 表中删除属于 instance_monitor 的行“手动”（“即使用单独的删除语句）
2.  调用 session.flush() （防止语句被休眠重新排序）
3.  删除 instance_monitor

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:35:00.473

> 如果统计列表为空，这似乎工作正常。它因外键违规错误而失败：

您似乎没有在数据库级别启用级联删除。

# google-chrome-extension - chrome.devtools.* 跨版本支持

> ID：10598625
> 
> 赞同：1
> 
> 时间：2012-05-15T10:17:59.847
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在编写一个使用 chrome.devtools 的扩展，特别是**chrome.devtools.inspectedWindow**和**chrome.devtools.network**，看来我的 chrome 版本 18.0.1025.151 不支持这些 api，我想知道在哪里可以找到支持哪些功能哪个版本？也许有人可以告诉我如何调试**devtools_page**？如果它崩溃了，我在任何地方都看不到任何迹象...在此先感谢。还 - 似乎存在 devtools api... [http://code.google.com/chrome/extensions/whats_new.html#18](http://code.google.com/chrome/extensions/whats_new.html#18)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:30:17.143

前段时间我找了同样的东西，我发现的最好的资源是这些：

*   [每个 Chrome 版本的新功能（关于扩展）](http://code.google.com/chrome/extensions/whats_new.html)

*   [当前稳定版本中所有可用 API 的列表](http://code.google.com/chrome/extensions/api_index.html)

*   [有关每个新 Chrome 版本的发布信息](http://googlechromereleases.blogspot.com/)

至于 devtools 调试：

*   取消停靠 devtools 窗口（左下角的按钮）

*   聚焦开发工具窗口

*   点击 F12

现在您正在使用 devtools 调试您的 devtools :) 查看[此](http://paulirish.com/2011/a-re-introduction-to-the-chrome-developer-tools/)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:39:01.443

好的，得到了​​我的解决方案，事实证明**manifest_version**字段设置为版本 2，这是阻止我的功能的原因，这看起来很奇怪，因为它在文档中说 v2 是 18 及以上而不是 19 及以上：-/

# emacs - Emacs：将光标移动到单词的最后一个字符

> ID：10598626
> 
> 赞同：1
> 
> 时间：2012-05-15T10:18:05.077
> 
> 标签：emacs, keyboard-shortcuts

是否有将光标移动到单词的最后一个字符的快捷方式？

如果没有，如何在 .emacs 中编写一些函数来拥有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:22:01.487

有`(forward-word)`那是必然的`M-f`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:20:59.747

`ESC f`会让你前进一个词，这是否足够接近你的需要？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:48:37.120

这个怎么样：

```
(defun my-end-of-word ()
  "Move to the next 'last character' of a word."
  (interactive)
  (forward-char)
  (re-search-forward "\\w\\b" nil t)
  (goto-char (match-beginning 0))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:00:43.967

如前所述，`forward-word`存在并移动指向下一个单词之后的字符。如果这对你有用，你就完成了。

如果您*真的*想将 point 移动到下一个单词的最后一个字符，则需要在之后将其移回，这意味着使用`backward-char`. 您已经可以使用 来执行此操作`M-f C-b`，但是如果您想要一个可以绑定到单个击键的功能，请使用类似

```
(defun last-in-word ()
   (interactive)
   (forward-word) 
   (backward-char)) 
```

然后像往常一样将其绑定到所需的键。

# html - 出现滚动条时，我的 HTML 页眉和页脚没有拉伸

> ID：10598627
> 
> 赞同：-1
> 
> 时间：2012-05-15T10:18:08.010
> 
> 标签：html, css

我正在开发一个网站，并且我在内容中有报告，当内容溢出时，无论分辨率如何，我都希望有一个滚动条。

我为页眉和页脚使用了 100% 的宽度，并且我有一个背景重复 1px 条。但是当内容溢出并且当用户滚动查看页眉和页脚部分的数据时，我会看到空白，因为它们没有伸展。

我要他们伸展到卷轴尽头

我该如何摆脱这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:34:45.453

`body`您可以通过设置to`position:relative`和来解决这个问题`float:left;`。

[这是一个工作示例](http://jsfiddle.net/sftTB/1/)。

```
body
{
    position:relative;
    float:left;
} 
```

# java - 如何在 JavaFX2 TableView 中禁用列重新排序？

> ID：10598639
> 
> 赞同：6
> 
> 时间：2012-05-15T10:18:41.140
> 
> 标签：java, user-interface, tableview, javafx-2

JavaFX2 的[TableView](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html)具有“用户在运行时对列重新排序”的功能。我想为我的应用程序中的一个特定表禁用此功能。

查看 API 文档，没有明显的 API 挂钩。但是，有`columns`- 属性。根据文档，它代表

> 作为此 TableView 一部分的 TableColumns。当用户重新排序 TableView 列时，此列表将更新以反映当前的视觉排序。

希望我至少能够在更改发生后重置更改，我尝试添加一个侦听器以在事后重置更改。

```
import javafx.application.Application;
import javafx.collections.ListChangeListener;
import javafx.scene.Scene;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.stage.Stage;

public class TableTest extends Application {

  public static void main(String[] args) {
    launch(args);
  }

  @Override
  public void start(Stage stage) {
    TableView tableView = new TableView();
    tableView.getColumns().setAll(new TableColumn(), new TableColumn());
    tableView.getColumns().addListener(new ListChangeListener() {
        @Override
        public void onChanged(Change change) {
            if (change.wasPermutated()){
               change.reset();
            }
        }
    });
    stage.setScene(new Scene(tableView));
    stage.show();
  }
} 
```

但是，`IllegalStateException`当我请求`wasPermutated`.
有没有办法防止重新排序，或者至少以编程方式恢复它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T10:40:58.923

请参见下面的 SSCCE，它显示侦听器被调用 - 但是`added`在移动列时该标志设置为。请注意，您需要`next()`在使用更改之前致电，否则您将获得一个`IllegalStateException`. 有关简单的规范示例，请参阅的[javadoc 。`ListChangeListener.Change`](http://docs.oracle.com/javafx/2/api/javafx/collections/ListChangeListener.Change.html)

```
import javafx.application.Application;
import javafx.collections.ListChangeListener;
import javafx.scene.Scene;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.stage.Stage;

public class TableTest extends Application {

  public static void main(String[] args) {
      launch(args);
  }

  @Override
  public void start(Stage stage) {
    final TableView tableView = new TableView();
    final TableColumn[] columns = {new TableColumn("1"), new TableColumn("2")};
    tableView.getColumns().setAll(columns);
    tableView.getColumns().addListener(new ListChangeListener() {
        public boolean suspended;

        @Override
        public void onChanged(Change change) {
            change.next();
            if (change.wasReplaced() && !suspended) {
                this.suspended = true;
                tableView.getColumns().setAll(columns);
                this.suspended = false;
            }
        }
    });
    stage.setScene(new Scene(tableView));
    stage.show();
  }
} 
```

# android - Android：将视图投射到视图

> ID：10598640
> 
> 赞同：1
> 
> 时间：2012-05-15T10:18:41.470
> 
> 标签：android

我有一个扩展视图的类（MyView 扩展视图）

在活动中，我有下一个：

```
 View view = (View)findViewById(R.id.relative_layout_view);

    //here I have error because of cast
    MyView myView = view; 
```

为什么它要求我添加演员表？

PS：我添加了演员表并且应用程序崩溃了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:20:50.887

`MyView`是 a `View`，但`View`不一定是 a `MyView`，因此您需要显式转换它。

如果它崩溃了，这意味着带有 ID 的视图`relative_layout_view`不是 type `MyView`，你需要确定它在布局 XML 中的类型是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:33:32.563

使用这种方式只需像添加xml一样

```
<YourPackage Name.MyView
android:layout_height="wrap_content"
android:layout_width="wrap_content"
android:id="@+id/myview"
android:layout_gravity="center"
>   
</YourPackage Name.MyView> 
```

然后在下面给出的活动中使用

```
 MyView view = (MyView)findViewById(R.id.relative_layout_view); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:22:00.560

为什么不只是做

```
MyView view = (MyView) findViewById(R.id.relative_layout_view); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:49:00.220

简单的答案是您将`view`实例向下转换为`MyView`.

将任何对象向下转换为其子类并不总是安全的，这就是编译器强制程序员将其对象显式类型转换为子类的原因。

在您的情况下，`view`不是 type `MyView`。这就是编译器给出的原因`classCastException`。

但如果`R.id.relative_layout_view`是 MyWiew 类型，它不会产生任何异常。

# python - Heroku 的 Python 找不到要导入的 redis(redistogo)

> ID：10598641
> 
> 赞同：3
> 
> 时间：2012-05-15T10:18:43.080
> 
> 标签：python, heroku, redis, redistogo

我已经在 Heroku 上添加了 Redistogo 插件，但我无法在控制台模式下对其进行测试。我已经按照[文档](https://devcenter.heroku.com/articles/redistogo#using_redis_from_python)做到了这一点。

```
$ heroku run python --app redis-to-go
Running python attached to terminal... up, run.1
Python 2.7.2 (default, Oct 31 2011, 16:22:04) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 
>>> f=open('requirements.txt', 'w')
>>> f.write('redis==2.4.12'+'\n' )
>>> f.close()
>>>
>>> f=open('store.py', 'w')
>>> f.write('import os'+'\n' ) 
>>> f.write('import urlparse'+'\n' ) 
>>> f.write('import redis'+'\n' ) 
>>> f.write("url = urlparse.urlparse(os.environ.get('REDISTOGO_URL', 'redis://localhost'))"+'\n' ) 
>>> f.write('redis = redis.Redis(host=url.hostname, port=url.port, db=0,     password=url.password)'+'\n' ) 
>>> f.close()
>>>
>>> from store import redis
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "store.py", line 3, in <module>
    import redis
ImportError: No module named redis 
```

Heroku 的 Python 找到：os,urlparse 但找不到 redis。
有人帮助我吗？我只需要 Heroku 的 Python 控制台模式！
使用本地 Python 和远程 REDISTOGO 我没有任何问题！

**更新：**

**从文档中：**

部署到 Heroku

要在 Heroku 上使用 Redis To Go，请安装 redistogo 插件：

```
$ heroku addons:add redistogo 
```

从 Heroku 控制台测试它是否可以工作：

```
$ heroku run python
Python 2.7.2 (default, Oct 31 2011, 16:22:04) 
>>> from store import redis
>>> redis.set('answer', 42)
True
>>> redis.get('answer')
'42' 
```

它在 Heroku 控制台上不起作用！

请分享你在这方面的实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T06:28:45.160

这些步骤应该在本地完成，提交到 git，然后推送到 heroku。当你这样做时：

```
heroku run python --app redis-to-go 
```

它启动了您的应用程序的一个隔离实例。这不是持久的，只存在于该测功机内部。如果你想在一个隔离的实例中完全测试它，你可以加载 virtualenv 然后：

```
pip install redis 
```

但是，当您下次运行应用程序时，这将不可用。相反，您应该检查所有文件然后推送。即使你只是简单地将 redis 添加到你的 requirements.txt 中，它也应该在一个独立的测功机中工作。

根据您的命令，这应该完全有效：

```
cat "redis==2.4.12" >> requirements.txt
git add requirements.txt
git commit -m 'adding redis'
git push heroku master
heroku addons:add redis-to-go
heroku run python --app redis-to-go 
```

你的python解释器内部：

```
import os
import urlparse

import redis

url = urlparse.urlparse(os.environ.get('REDISTOGO_URL', 'redis://localhost'))

redis = redis.Redis(host=url.hostname, port=url.port, db=0, password=url.password)
redis.set('answer', 42)
redis.get('answer') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T23:51:51.087

你们为什么要尝试使用远程控制台来制作所有内容？在本地执行应用程序（创建 store.py、requirements.txt）然后部署它！当您部署（或推送）您的应用程序时，Heroku 会看到 requirements.txt，它会添加必要的库。所以这就是它不起作用的原因，因为你的heroku dyno 上没有安装redis 库。

我不是 python 开发人员，但我做到了这一点没有问题

[https://github.com/ismaelga/python-redis-heroku](https://github.com/ismaelga/python-redis-heroku)

# javascript - Jquery -Validation，移动到 div 的不同部分

> ID：10598649
> 
> 赞同：0
> 
> 时间：2012-05-15T10:19:33.717
> 
> 标签：javascript, jquery

我在一个页面中有三个 div 标签。

```
<div id = '1'>

</div>

<div id = '2'>

</div>

<div id = '3'>

</div> 
```

当用户单击标签时，将加载相应的 div，它们都将在一个页面上，并带有一个提交按钮。

现在，如何验证 div，我必须知道用户点击了哪个 div。

**更新**

这是我的验证脚本

```
 function x()
{

 var x = true;

 some validation script

 return x;

 } 
```

在这里放一些光，它将帮助我前进。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:22:40.440

像这样的东西应该可以解决问题

```
var lastClickedId;

$('div').click(function()
{
    // Use a class to change appearance and track selected
    $('div').removeClass('selected');
    $(this).addClass('selected');

    // Or just track the id in a variable
    lastClickedId = $(this).attr('id');
});

function validate()
{
    alert('last clicked div ID was: ' + lastClickedId + ' aka: ' + $('div.selected').attr('id'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:23:18.783

正如我看到的那样，您使用带有数字的 id 属性 - 它在 HTML5 中无效。您可以为此使用 id。像这样的东西

演示：[JsFiddle](http://jsfiddle.net/pq4XE/)

```
 $('div').click(function()
    {
      alert('you clicked  ' + $(this).attr('id'));
    }); 
```

# jquery - 在 jQuery 上需要一个同时带有滚动条和箭头的滑块

> ID：10598650
> 
> 赞同：3
> 
> 时间：2012-05-15T10:19:38.530
> 
> 标签：jquery, jquery-slider

我需要一个同时带有滚动条和箭头的 jQuery 内容滑块。像 [这样的东西，但像](http://nettuts.s3.amazonaws.com/377_slider/slider_sourcefiles/slider.html)[这样](http://www.simplesli.de/)在侧面有箭头。箭头应出现在悬停父标签上。我在互联网上搜索。但是我找不到我需要的东西。有人知道这样的滑块吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T17:39:48.867

当按下下一页/上一页按钮时，使用[value方法将滑块的值设置为下一页/上一页。](http://jqueryui.com/demos/slider/#method-value)完成这需要大约 10 行带有 jQ​​uery 和 UI 的 JavaScript。

我根据您提供的链接中的滑块开发了它。JS 代码是这样的，可以在[这个 fiddle](http://jsfiddle.net/fYkyq/1/)中找到。

```
var max = , pageWidth = ; // see the fiddle for the full code
$('#prev, #next').click(function(){
    var current = $("#slider").slider('value');
    var to = $(this).is('#prev') ? current - pageWidth : current + pageWidth;
    $('#prev, #next').show();

    if(to <= 0)
        $('#prev').hide();
    else if(to >= max - pageWidth)
        $('#next').hide();

    $("#slider").slider('value', to);
    sliderOpts.slide(null, { value: to });
});
$('#prev').trigger('click'); // init​​​​​​​​ 
```

所以剩下的唯一事情就是应用你喜欢的任何 CSS 更改，如果你想将`#prev`和`#next`按钮移动到父元素，也可以使用提供的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:46:35.460

这个例子有帮助吗？

[http://manos.malihu.gr/tuts/custom-scrollbar-plugin/scroll_buttons_and_snap_scrolling_examples.html](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/scroll_buttons_and_snap_scrolling_examples.html)

try "view source" and grab those required *.js and *.css file, and tweak your CSS and scripts from there.

Good luck!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:53:59.207

试试 Jscrollpane：http: [//jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

我在十几个非常复杂的网站上使用过它，而且我总是设法用它做我想做的事。它也有很好的文档。

您可以选择水平或垂直滑块（或两者）、显示/隐藏箭头、转到特定的 html 元素、使用动画等。

看看这个！一旦你习惯了它，你将永远使用它！

希望能帮助到你！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-15T10:24:40.273

首先，你应该谷歌你的要求，那里有很多，[检查这些](http://www.stunningmesh.com/2010/11/100-jquery-plugins-for-image-galleries-with-source-files/)

# php - php 创建文件夹所有者/组

> ID：10598657
> 
> 赞同：1
> 
> 时间：2012-05-15T10:20:00.760
> 
> 标签：php, owner, chown

我将我的网站转移到 linux 主机，它在将图像上传到系统的自动创建文件夹时出现问题，该文件夹的权限是 chmod 0777，我发现它总是因为所有者/组在 www-data 中而导致上传失败，如何它可以将所有者/组更改为“root”以便将图像上传到文件夹中吗？

```
$media_path = "../upload/".$nextid;

if(file_exists($media_path)){
//do nuthing

}else{

mkdir($media_path, 0777);
chmod($media_path, 0777);
chown($media_path, "root");
chgrp($media_path, "root"); 
```

}

请指教。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:21:30.223

`chown`除非您是 root，否则您无法使用。但是创建文件夹`0777`就足以让任何人写入它们。

# actionscript-3 - 将 AS3 转换为 AS2

> ID：10598658
> 
> 赞同：0
> 
> 时间：2012-05-15T10:20:09.077
> 
> 标签：actionscript-3, actionscript-2

我有这个问题。有一个带有 AS3 代码的横幅，我们的系统只显示 Flash Player 9 的横幅。但是 Flash Player 9 不支持 AS3。那么有没有办法以简单的方式做到这一点？或者我必须在 AS2 上重写它？这是代码。

```
import flash.events.Event;
import flash.net.URLRequest;
import flash.events.MouseEvent;
import flash.media.SoundTransform;
import flash.media.SoundMixer;

cierre.gotoAndStop(1);
SoundMixer.soundTransform = new SoundTransform(0); 
    video_player.autoPlay = true;
video_player.source = "video_500x374.f4v";

video_player.addEventListener(Event.COMPLETE, finVideo);

stop();

b2_btn.buttonMode = true;

buttonclose.addEventListener(MouseEvent.CLICK,buttoncl);

function buttoncl(e:Event):void{
video_player.stop();
this.gotoAndStop(1);
}

var paramList:Object = this.root.loaderInfo.parameters;

b2_btn.addEventListener(MouseEvent.CLICK, openURL);

function openURL(evtObj:MouseEvent):void {
var request:URLRequest = new URLRequest(paramList["clickTag"]);
navigateToURL(request, "_blank");
}

function aBanner1(e:Event):void{
video_player.stop();
this.gotoAndStop(1);
}

function finVideo(e:Event):void{
video_player.stop();
cierre.play();
}

function setMute(vol) {
var sTransform:SoundTransform = new SoundTransform (0,1);
sTransform.volume = vol;
SoundMixer.soundTransform = sTransform; 
}
var Mute:Boolean = false;
mutebutton.addEventListener (MouseEvent.CLICK,toggleMuteBtn);

function toggleMuteBtn (event:Event) {
if(Mute) {
    Mute = false;
    setMute(0);

}else{
    Mute = true;
    setMute(1);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:52:19.843

您需要使用 AS2 FLV 播放组件。您应该从一个全新的 AS2 fla 开始，然后开始复制除组件之外的所有内容。

# c++ - C++ 代码转入 MIPS，MIPS 中的代码运行没有错误信息，但不显示结果

> ID：10598660
> 
> 赞同：0
> 
> 时间：2012-05-15T10:20:16.433
> 
> 标签：c++, floating-point, mips

作业要求我们在 MIPS 中完成一个代码。最初的 MIPS 代码需要一个我们必须从 C++ 代码转换的函数。我根据需要将该函数从 C++ 转换为 MIPS。

当我运行 MIPS 中的代码时，它不会显示任何错误。但是，代码不显示任何内容。

我试图调试它，但我仍然看不出问题出在哪里。我使用 Notepad++ 作为编辑器和 QtSpim 来运行 MIPS 代码。我在下面发布了代码（首先在 C++ 中，然后在 MIPS 中）。您的帮助将不胜感激。

```
//*************C++ Code***********************

 #include <stdio.h>
 void update(float *, float *);
 int main() 
 {
   float x[5] = {.1, .2, .4, .6, .85};
   float vx[5] = {-.2, -.15, .05, -.2, .2};
   int i, steps;

   for (i=0; i<5; i++) 
   {
      printf("%d %f %f\n", i, x[i], vx[i]);
   }

  for (steps=0; steps<3; steps++) 
  {
      update(x, vx);
      printf("Step %d\n", steps);
      for (i=0; i<5; i++) 
      {
        printf("%d %f %f\n", i, x[i], vx[i]);
      }
  }
}

void update(float pos[], float vel[]) 
{
  int i;
  for (i=0; i<5; i++) 
  {
    pos[i] += vel[i];
    if (pos[i] < 0.) 
    {
       pos[i] = 0.;
       vel[i] = - vel[i];
    }
    else if (pos[i] > 1.) 
    {
       pos[i] = 1.;
       vel[i] = - vel[i];
    }
  }
}

//************************End of C++ Code************************* 
```

```
//**************************Code Translated in MIPS*************

        .data
x:      .float  0.1
        .float  0.2
        .float  0.4
        .float  0.6
        .float  0.85
vx:     .float  -0.2
        .float  -0.15
        .float  0.05
        .float  -0.2
        .float  0.2
zero:   .float  0.
one:    .float  1.
space:  .asciiz " "
endl:   .asciiz "\n"
outStep:.asciiz "Step "

# i     $s0
# steps $s1
# &x[0] $s2
# &vx[0] $s3

        .globl  for

        .text
main:   la      $s2, x
        la      $s3, vx
        move    $t2, $s2
        move    $t3, $s3
        li      $s0, 0          #  for (i=0; i<5; i++) {
ploop:  move    $a0, $s0        #    printf("%d %f %f\n", i, x[i], vx[i]);
        li      $v0, 1
        syscall
        la      $a0, space
        li      $v0, 4
        syscall
        l.s     $f12, ($t2)
        li      $v0, 2
        syscall
        la      $a0, space
        li      $v0, 4
        syscall
        l.s     $f12, ($t3)
        li      $v0, 2
        syscall
        la      $a0, endl
        li      $v0, 4
        syscall
        addi    $t2, $t2, 4
        addi    $t3, $t3, 4
        addi    $s0, $s0, 1     #  }
        blt     $s0, 5, ploop

        li      $s1, 0          #  for (steps=0; steps<3; steps++) {
loop:   move    $a0, $s2        #    update(x, vx);
        move    $a1, $s3
        jal     update

        la      $a0, outStep    #    printf("Step %d\n", steps);
        li      $v0, 4
        syscall

        move    $a0, $s1
        li      $v0, 1
        syscall

        la      $a0, endl
        li      $v0, 4
        syscall

        move    $t2, $s2
        move    $t3, $s3
        li      $s0, 0          #    for (i=0; i<5; i++) {
ploop1: move    $a0, $s0        #      printf("%d %f %f\n", i, x[i], vx[i]);
        li      $v0, 1
        syscall
        la      $a0, space
        li      $v0, 4
        syscall
        l.s     $f12, ($t2)
        li      $v0, 2
        syscall
        la      $a0, space
        li      $v0, 4
        syscall
        l.s     $f12, ($t3)
        li      $v0, 2
        syscall
        la      $a0, endl
        li      $v0, 4
        syscall

        addi    $t2, $t2, 4
        addi    $t3, $t3, 4
        addi    $s0, $s0, 1
        blt     $s0, 5, ploop1

        addi    $s1, $s1, 1
        blt     $s1, 3, loop

        li      $v0, 10
        syscall

# void update(float pos[], float vel[]) {
# arg0 $a0
# arg1 $a1
# i $s0
update: l.s     $f30, zero
        l.s     $f31, one

# The function i translated in MIPS is right bellow

        addi    $s0,$s0,0      # i=0

        add.s $f0, $f0, $f1     # pos[i] += vel[i];
        c.lt.s $f0, $f30        # if (pos[i] < 0.) {
        bc1f    else           
        add.s   $f0, $f0, $f30   # pos[i]=0;
        sub.s   $f1, $f30 , $f1  
        sub.s   $f31, $f30, $f31 
        add.s   $f1, $f1, $f31   # vel[i] = - vel[i];          
        blt     $s0, 5, update

else :  c.lt.s  $f31, $f0      #else if (pos[i] > 1.) {
    bc1f    skip
        add.s   $f0, $f0, $f31
        sub.s   $f31, $f30, $f31
        sub.s   $f1, $f1, $f31
        blt     $s0, 5, update

skip :  add $s0, $s0, 0   
    addi $s0, $s0, 1
    slti $t1, $s0, 5
        blt  $s0, 5, update 

end:    jr      $31             #} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:41:48.210

我在 PCSpim 中尝试过，但更改`.globl for`为`.globl main`. 现在有输出，但您的更新功能尚未按预期工作。您使用`$f0`and `$f1`，但这些从未加载或存储，因此没有更新。

# java - 如何在 Windows 上禁用 SWT 树中的分层虚线？

> ID：10598663
> 
> 赞同：1
> 
> 时间：2012-05-15T10:20:25.510
> 
> 标签：java, user-interface, swt

我正在尝试隐藏 SWT 树视图的分层虚线。

![Windows 上带有分层虚线的 SWT 树](../Images/19cee921dc3ed50ea8b972cc806d2bea.png)

如何隐藏这些虚线？有什么特别的选择吗？最好和正确的方法是什么？

我发现使用 TableTree 可以做到这一点 - 在这个例子中：

[http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/DemostratesTableTreeTableTree.htm](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/DemonstratesTableTreeTableTree.htm)

我会使用 TableTree - 但现在已弃用。

**更新**

发现我可以使用`SWT.FULL_SELECTION`选项并且现在隐藏的行。

![使用 SWT.FULL_SELECTION 禁用虚线的 SWT 树](../Images/34529bcab74cb5bfb38fae0767e8149f.png)

现在的问题是这个选项是什么意思以及为什么我们得到隐藏线 - 它适用于所有 Windows 版本吗？

**参考**

[http://www.eclipsezone.com/eclipse/forums/t66912.html](http://www.eclipsezone.com/eclipse/forums/t66912.html)感谢@default 语言环境 [https://bugs.eclipse.org/bugs/show_bug.cgi?id=25071](https://bugs.eclipse.org/bugs/show_bug.cgi?id=25071)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:17:46.857

创建树时应使用 SWT.FULL_SELECTION。它的结果正是我们所需要的——在全选模式下没有分层虚线。

# c++ - 如何使用 C++ 加载用 C# 编写的 COM 服务器？

> ID：10598665
> 
> 赞同：2
> 
> 时间：2012-05-15T10:20:36.877
> 
> 标签：c++, .net, com

我正在尝试使用由 Visual Studio 2010 生成的 COM 服务器。当我运行 CreateInstance(..) 时，我收到错误代码 0x80040154 。我启用了融合日志并运行了 fuslogvw 。Fuslogvw 报告加载程序集（由未知调用程序程序集）

```
mscorlib.resources, Version=4.0.0.0, Culture=zh-HK, PublicKeyToken=b77a5c561934e089 
```

我已经为繁体中文和简体中文安装了 .net framework 4 语言包。

请帮忙 。提前致谢。

我的 C++ 代码如下：

```
#include "stdafx.h"
#import "/Project/TestCOM/MyProject.tlb"
#include <comutil.h>

int _tmain(int argc, _TCHAR* argv[])
{
    CoInitialize(NULL);

    MyProject::_PHPStarterPtr pCalc;

    HRESULT hRes = pCalc.CreateInstance(__uuidof(MyProject::PHPStarter));
    if(FAILED(hRes)) 
    {
        printf("MyProject::_PHPStarterPtr failed w/err 0x%08lx\n", hRes); // it printed MyProject::_PHPStarterPtr failed w/err 0x80040154
    }
    else
    {
        pCalc->AddRef();

        bstr_t s("hello");
        bstr_t outStr = pCalc->Echo(s);
        printf("outStr = %s\n", (const char *)outStr);

        pCalc->Release();
        printf("Dispose() done\n");
    }

    CoUninitialize();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:40:04.433

0x80040154 表示“类未注册”。要在 .NET 程序集中注册 COM 组件，请使用.NET 框架目录中的[regasm.exe 工具](http://msdn.microsoft.com/en-us/library/tzat5yw6.aspx)。它可以手动完成，也可以作为自定义的后期构建步骤。

# java - 这个错误是如何发生的

> ID：10598676
> 
> 赞同：-2
> 
> 时间：2012-05-15T10:21:15.630
> 
> 标签：java, class

大家好，我有以下代码会产生错误的原因。如果有人知道，请建议我。

```
public class Class {
    public static void main(String args[]) {
        public int i = 10;
        i = i++;
        System.out.println("Value of i=" + i);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:22:52.840

因为您不能在局部变量上指定访问说明符

```
public int i = 10; 
```

做了

```
int i = 10; 
```

也正如[assylias 评论](https://stackoverflow.com/questions/10598676/how-this-error-occure/10598697#comment13729097_10598697)的那样，如果你这样做，它不会对作业产生任何影响`i = i++;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:23:01.723

您正在`public`为局部变量使用可见性修饰符 , 。这是不允许的（并且没有意义），因为局部变量的范围总是局限于该方法内。

以下代码：

```
public class Class {
    public static void main(String args[]) {
        int i = 10;
        i = i++;
        System.out.println("Value of i=" + i);
    }
} 
```

...编译没问题。

请注意，您还可以将`i`方法外部移动到一个字段，这也可以：

```
public class Class {

    public int i = 10;

    public static void main(String args[]) {
        i = i++;
        System.out.println("Value of i=" + i);
    }
} 
```

请注意，这`i = i++`也可能导致与您期望的问题不同的问题，但如果没有更彻底的解释，很难说。你可能只是想`i++`在那条线上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:27:00.437

'i' 是一个局部变量。它不能是公共的/私有的/受保护的。您可以将其标记为最终版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:23:03.870

您应该只将 i 定义为“int i = 10”而不是“public int”，因为它不是类变量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T10:23:08.393

错误是`public`不能应用于局部变量。改变：

```
public int i = 10; 
```

至

```
int i = 10; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T10:23:18.753

`i`是`main`方法的局部变量。局部变量没有范围`public, private, protected`。只有现场成员才能拥有它们。所以去掉变量`public`前面的修饰符。`i`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T10:23:32.560

**公共int i = 10；**//*这将填充错误*

你不能用范围声明局部变量`public or private`

将其更改为`int i=10;`它将起作用。

谢谢

# sql - 在 SQL Server 中直接评估子查询

> ID：10598679
> 
> 赞同：0
> 
> 时间：2012-05-15T10:21:34.863
> 
> 标签：sql, sql-server, sql-server-2005, optimization

我有一个相当复杂的 SQL 查询，涉及多个子查询和联合。尽管很复杂，但子查询部分执行得非常快（编译后 < 1ms）。但是当我作为一个整体运行查询时，它需要超过 60 毫秒。

我使用了“set statistics time on”和“set statistics io on”来跟踪对基表的访问，并且 SQL 正在执行比必要更多的逻辑读取。当我自己运行子查询时，它只读取 10 次左右，但运行整个查询时大约是 1800 次。

我想鼓励 SQL 首先评估子查询 - 预期的行数是 1-5，因此数据集很小。然后它应该被内部连接到同一个基表，并拉回估计的 10-20 条记录。

有没有办法使用提示来确保 SQL 针对预期情况进行优化？查询逻辑对于优化器来说似乎太多了，它选择的执行计划只适用于比我的情况大得多的行集。

编辑：最终连接中的条件之一将过滤掉基表中 99.99% 的行。如果我可以强制 SQL 首先评估它，它应该可以解决问题。有没有办法做到这一点？

此处查询文字：http: [//pastebin.com/zVR91AP2](http://pastebin.com/zVR91AP2)

注释掉最后的 WHERE 子句后，查询返回 4 行并在 <1ms 内运行，对审计表进行了 33 次逻辑读取。但是，如果我取消注释 WHERE 子句，它会返回 3 行（过滤掉 1 行）并花费 50 毫秒，对审计表进行高达 1277 次逻辑读取。io stats 表明一个工作表在第一个实例中被使用，但不是在第二个实例中。我想鼓励 SQL 使用这个工作表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T23:56:05.057

解决了。解决方案是使用连接提示，强制在将内部查询连接到更大的表之前对其进行评估。

内部 REMOTE 加入 dbo.poAudit... 等

# google-maps-api-3 - Dojox 移动视图上的 Google 地图

> ID：10598680
> 
> 赞同：0
> 
> 时间：2012-05-15T10:21:47.453
> 
> 标签：google-maps-api-3, dojo

[在这篇文章](https://stackoverflow.com/questions/6642788/how-do-i-add-a-google-map-to-a-dojox-mobile-view)中提出了同样的问题，但接受的答案没有帮助（至少我）。

我使用 dojox.mobile.View 来显示两个看起来像[这样](http://demos.dojotoolkit.org/demos/mobileOpenLayers/demos.html)的视图。一切正常，除了地图容器没有正确显示。它在首页显示为一个小框。我错过了布局文件上的某些内容吗？谢谢！

```
<div id="view1" dojoType="dojox.mobile.View" selected="true">
    <h1 dojoType="dojox.mobile.Heading">View 1</h1>
    <ul dojoType="dojox.mobile.RoundRectList">
        <li dojoType="dojox.mobile.ListItem" icon="images/icon1.png" moveTo="view2" transition="slide">Go To View 2
        </li>
    </ul>
</div>

<div id="view2" dojoType="dojox.mobile.View" style="height:100%">
    <h1 dojoType="dojox.mobile.Heading" back="View 1" moveTo="view1">View 2</h1>
    <div dojoType="dojox.mobile.RoundRect" id="map_canvas" style="width:100% !important;height:100% !important;"></div>
</div> 
```

**更新：**

```
<body style="visibility: visible;">
<div id="view1" class="mblView" selected="true" style="visibility: visible; width: 100%; height: 100%; top: 0px; left: 0px; display: none;" dojotype="dojox.mobile.View" widgetid="view1">
<div id="view2" class="mblView" style="visibility: visible; width: 100%; height: 100%; top: 0px; position: relative; left: 0px;" dojotype="dojox.mobile.View" widgetid="view2">
    <h1 id="dojox_mobile_Heading_1" class="mblHeading mblHeadingCenterTitle" moveto="view1" back="View 1" dojotype="dojox.mobile.Heading" style="" widgetid="dojox_mobile_Heading_1">
    <div id="map_canvas" class="mblRoundRect" style="width: 100% ! important; height: 100% ! important; position: relative; background-color: rgb(229, 227, 223); overflow: hidden;" dojotype="dojox.mobile.RoundRect" widgetid="map_canvas">
        <div style="position: absolute; left: 0px; top: 0px; overflow: hidden; width: 100%; height: 100%; z-index: 0;"> 
```

[萤火虫日志](https://i.imgur.com/ENhvQ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:56:39.437

Dojo mobile + Google maps api version 3 有类似的显示问题。

西蒙斯的解决方案不起作用，但还有另一种方法。

我不创建新主题，只是给你这个简单的提示：总是检查谷歌地图是否在 DOM 之后加载（例如使用`require(["dojo/domReady!"], function(){ ... })`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:26:36.667

您用于地图视图的移动视图仅设置了高度：100%，例如，宽度 + 高度为 100%。

这可能会导致用于地图的 div 内部出现问题，因为它没有正确拾取宽度。（我以前见过类似的问题，但可能是别的）

编辑：

什么都没有出现在我身上。您是否尝试过使用脚本来修改它？就像是：

```
var div = dojo.byId("map_canvas");
div.style.height = window.innerHeight+"px";
div.style.width = window.innerWidth+"px"; 
```

# c++ - 带参数初始化的函数

> ID：10598681
> 
> 赞同：0
> 
> 时间：2012-05-15T10:21:54.473
> 
> 标签：c++, function

我的问题是基于句子的效果，`void print(const string& msg = "")`如果与，有什么区别`void print(const string& msg)`，

当我在中使用打印函数时`main()`，我可以在不传递函数参数的情况下调用该函数`print()`吗？喜欢`p.print()`？

```
class Point {
      int i, j, k;
    public:
      Point(): i(0), j(0), k(0) {}
      Point(int ii, int jj, int kk)
        : i(ii), j(jj), k(kk) {}
      void print(const string& msg = "") const {
        if(msg.size() != 0) cout << msg << endl;
        cout << "i = " << i << ", "
             << "j = " << j << ", "
             << "k = " << k << endl;
      }
    };

    int main() {
      Point p, q(1,2,3);
      p.print("value of p");
      q.print("value of q");
    } ///:~ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:23:03.493

是的，这是一个默认参数。如果您不提供，将使用一个空字符串。

所以， call`p.print()`相当于 call `p.print("")`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:24:39.260

是的，你可以这么做。它被称为参数的默认值。因此，调用`p.print()`与调用 p.print("") 相同。

[在 C++ 中通过引用传递时参数的默认值](https://stackoverflow.com/questions/1059630/default-value-to-a-parameter-while-passing-by-reference-in-c)也与您相关。

# wcf - WCF 服务中自定义类型的 XmlSerialization

> ID：10598689
> 
> 赞同：0
> 
> 时间：2012-05-15T10:22:33.993
> 
> 标签：wcf, c#-4.0, xml-serialization

我是 WCF 的新手。我为它开发了一个 WCF 服务和客户端。服务方法将检索使用自定义 XML 序列化程序的自定义数据。我读过，在这种情况下，合同方法应标有`[XmlSerializerFormat]`：

```
[ServiceContract]
[XmlSerializerFormat]
public interface ITSService
{
    [OperationContract]
    [XmlSerializerFormat]
    ProtocolDocument GetReferenceData(string referenceType, SerializableDictionary<string, string> args); 
```

`ProtocolDocument`实现`IXmlSerializable`：

```
[XmlRoot("protocol", Namespace = Protocol30Namespace)]
[Type(Name = "protocol", Namespace = Protocol30Namespace)]
public class ProtocolDocument : ProtocolElement, ICloneable, IXmlSerializable 
```

VS 2010`wsHttpBinding`默认选择。我不需要安全，所以我把它关了。

这是服务配置：

```
<services>
   <service name="MyNamespace.TSService" 
            behaviorConfiguration="MyNamespace.TSServiceBehavior">
      <host>
         <baseAddresses>
            <add baseAddress = "http://localhost:51944/TSService.svc" />
         </baseAddresses>
      </host>
      <endpoint 
          address="" 
          binding="wsHttpBinding" 
          bindingConfiguration="nonSecurityWSHttpBinding"
          contract="MyNamespace.ITSService">
         <identity>
            <dns value="localhost"/>
         </identity>
      </endpoint>
      <endpoint 
          address="mex" 
          binding="mexHttpBinding" 
          contract="IMetadataExchange"/>
   </service>
</services>
<behaviors>
   <serviceBehaviors>
      <behavior name="MyNamespace.TSServiceBehavior">
         <serviceMetadata httpGetEnabled="true" />
         <serviceDebug includeExceptionDetailInFaults="true" />
      </behavior>
   </serviceBehaviors>
</behaviors>
<bindings>
   <wsHttpBinding>
      <binding name="nonSecurityWSHttpBinding">
         <security mode="None">
            <transport clientCredentialType="None"/>
         </security>
      </binding>
   </wsHttpBinding>
</bindings> 
```

然后我为这个服务生成了客户端，但是结果无法反序列化。Fiddler 说 SOAP 将序列化数据包装到`GetReferenceDataResult`and中`GetReferenceDataResponse`：

```
 <s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
  <s:Header>
    <a:Action s:mustUnderstand="1">http://tempuri.org/ITourSystemService/GetReferenceDataResponse</a:Action>
    <a:RelatesTo>urn:uuid:3d7f6dc0-4961-4bc5-b1fc-c9997af9fbd4</a:RelatesTo>
  </s:Header>
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <GetReferenceDataResponse xmlns="http://tempuri.org/">
      <GetReferenceDataResult>
          <header version="3.0" language="Russian"/>
          <references/>
      </GetReferenceDataResult>
    </GetReferenceDataResponse>
  </s:Body>
</s:Envelope> 
```

但是缺少根元素！我应该怎么办？

PS序列化impl：

```
 void IXmlSerializable.ReadXml(XmlReader reader)
{
    var serializer = new ProtocolDocumentXmlSerializer();
    serializer.Deserialize(this, reader);
}

void IXmlSerializable.WriteXml(XmlWriter writer)
{
    //
    // Serialize everything except the root element, because it was already written by .NET XML-serialization mechanism
    var xmlSerializationFlags = XmlSerializationFlags.All & ~XmlSerializationFlags.IncludeRootElement;

    var serializer = new ProtocolDocumentXmlSerializer();
    serializer.Serialize(this, writer, xmlSerializationFlags);
} 
```

Xml 序列化效果很好。它已经在使用中。我想我的 WCF 配置有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:38:11.627

您似乎已经明确告诉它在您的 WriteXml 方法中忽略您的根元素 - 这就是为什么没有根元素

```
var xmlSerializationFlags = XmlSerializationFlags.All & ~XmlSerializationFlags.IncludeRootElement; 
```

如果您无法使反序列化工作，您始终可以在 XML 级别工作，方法是使用 Message 作为客户端合同中的返回类型，然后在消息上调用 GetReaderAtBody，将数据加载到 XElement 并使用 LINQ to XML 将 XML 转换为对象在客户端工作

# python - 如何访问 Scrapy CrawlSpider 中的特定 start_url？

> ID：10598691
> 
> 赞同：7
> 
> 时间：2012-05-15T10:22:42.267
> 
> 标签：python, django, scrapy

我正在使用 Scrapy，特别是 Scrapy 的`CrawlSpider`类来抓取包含某些关键字的网络链接。我有一个很长的`start_urls`列表，它从连接到 Django 项目的 SQLite 数据库中获取其条目。我想将抓取的网页链接保存在这个数据库中。

我有两个 Django 模型，一个用于起始 URL，例如`http://example.com`，一个用于抓取的 Web 链接，例如`http://example.com/website1`，等等。所有抓取的 Web 链接都是列表`http://example.com/website2`中起始 URL 之一的子站点。`start_urls`

网络链接模型与起始 url 模型具有多对一的关系，即网络链接模型具有起始 urls 模型的外键。为了将我抓取的网页链接正确保存到数据库，我需要告诉`CrawlSpider`'s`parse_item()`方法，抓取的网页链接属于哪个起始网址。我怎样才能做到这一点？Scrapy 的`DjangoItem`类在这方面没有帮助，因为我仍然必须明确定义使用的起始 url。

换句话说，如何将当前使用的起始 url 传递给该`parse_item()`方法，以便我可以将它与适当的抓取 Web 链接一起保存到数据库中？有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T17:35:13.323

默认情况下，您无法访问原始起始 url。

但是您可以覆盖[`make_requests_from_url`](http://doc.scrapy.org/en/latest/topics/spiders.html#scrapy.spider.BaseSpider.make_requests_from_url)方法并将开始 url 放入[`meta`](http://doc.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request.meta). 然后在解析中，您可以从那里提取它（如果您在该解析方法中产生后续请求，请不要忘记在其中转发该起始 url）。

* * *

我没有合作过`CrawlSpider`，也许 Maxim 的建议对你有用，但请记住，`response.url`在可能的重定向之后有 url。

这是我将如何做的一个例子，但这只是一个例子（取自scrapy教程）并且没有经过测试：

```
class MySpider(CrawlSpider):
    name = 'example.com'
    allowed_domains = ['example.com']
    start_urls = ['http://www.example.com']

    rules = (
        # Extract links matching 'category.php' (but not matching 'subsection.php')
        # and follow links from them (since no callback means follow=True by default).
        Rule(SgmlLinkExtractor(allow=('category\.php', ), deny=('subsection\.php', ))),

        # Extract links matching 'item.php' and parse them with the spider's method parse_item
        Rule(SgmlLinkExtractor(allow=('item\.php', )), callback='parse_item'),
    )

    def parse(self, response): # When writing crawl spider rules, avoid using parse as callback, since the CrawlSpider uses the parse method itself to implement its logic. So if you override the parse method, the crawl spider will no longer work.
        for request_or_item in CrawlSpider.parse(self, response):
            if isinstance(request_or_item, Request):
                request_or_item = request_or_item.replace(meta = {'start_url': response.meta['start_url']})
            yield request_or_item

    def make_requests_from_url(self, url):
        """A method that receives a URL and returns a Request object (or a list of Request objects) to scrape. 
        This method is used to construct the initial requests in the start_requests() method, 
        and is typically used to convert urls to requests.
        """
        return Request(url, dont_filter=True, meta = {'start_url': url})

    def parse_item(self, response):
        self.log('Hi, this is an item page! %s' % response.url)

        hxs = HtmlXPathSelector(response)
        item = Item()
        item['id'] = hxs.select('//td[@id="item_id"]/text()').re(r'ID: (\d+)')
        item['name'] = hxs.select('//td[@id="item_name"]/text()').extract()
        item['description'] = hxs.select('//td[@id="item_description"]/text()').extract()
        item['start_url'] = response.meta['start_url']
        return item 
```

询问您是否有任何问题。顺便说一句，使用 PyDev 的“转到定义”功能，您可以查看 scrapy 源并了解参数`Request`以及`make_requests_from_url`其他类和方法所期望的。进入代码有助于并节省您的时间，尽管一开始可能看起来很困难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T04:00:32.123

如果我正确理解了这个问题，您可以从中获取 url `response.url`，然后写入`item['url']`.

在蜘蛛中：`item['url'] = response.url`

并在管道中：`url = item['url']`.

或者像warvariuc写的那样投入`response.url`。`meta`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-06T05:53:29.900

从 Scrapy 1.3.3 开始，warvariuc 的答案似乎需要稍作修改：您需要覆盖`_parse_response`而不是`parse`. `make_requests_from_url`不再需要覆盖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-07T01:26:55.067

按照 Stephan Seyboth 的建议，对于 Scrapy 2.5.0，我`_parse_response`在`CrawlSpider`课堂上成功超越。查看[Scrapy 的 crawl.py](https://github.com/scrapy/scrapy/blob/master/scrapy/spiders/crawl.py)以了解需要修改的当前方法定义。我还将变量添加到 meta，在`make_requests_from_url`.

```
def _parse_response(self, response, callback, cb_kwargs, follow=True):
    if callback:
        cb_res = callback(response, **cb_kwargs) or ()
        cb_res = self.process_results(response, cb_res)
        for request_or_item in iterate_spider_output(cb_res):
            yield request_or_item
    if follow and self._follow_links:
        for request_or_item in self._requests_to_follow(response):
            request_or_item.meta['start_url'] = response.meta['start_url']
            yield request_or_item

def make_requests_from_url(self, url):
    return Request(url, dont_filter=True, meta = {'start_url': url}) 
```

然后我可以`response.meta['start_url']`在`parse_item`方法中访问。这将包含原始 start_url。

# android - SoundPool 错误“擦除无法获得锁”

> ID：10598693
> 
> 赞同：1
> 
> 时间：2012-05-15T10:22:46.283
> 
> 标签：android, soundpool

据我所知，我的应用程序运行良好，但我注意到 SoundPool 的这个错误经常在 logcat 中报告。

```
E/SoundPool(28182): 2 mChannels.erase can not get the lock 
```

关于什么会导致这种情况的任何想法？我尝试删除我的线程同步代码，但我仍然收到错误。

这是使用运行 Android 2.3.6 的 Galaxy S2 (SC-02C) 观察到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:10:54.063

我为您提出的另一个解决方案：

*   通过 maxStreams = 1 的声音创建 SoundPool 的实例
*   将音量 0 设置为仅由 play() 方法返回的一个 streamID

我同意这个解决方案不是很干净......

* * *

```
public class Sound {

    public final static int STREAM = AudioManager.STREAM_SYSTEM;

    private SoundPool pool;
    private int soundID;
    private int streamID;

    public Sound(Context context, int resID) {
        pool = new SoundPool(1, STREAM, 0);
        soundID = pool.load(context, resID, 1);
    }

    public final void play() {
        streamID = pool.play(soundID, 1, 1, 1, 0, 1);
    }

    public final void stop() {
        pool.setVolume(streamID, 0, 0);
    }

} 
```

* * *

```
public class MyActivity extends Activity {

    public static Sound alarm1;
    public static Sound alarm2;

    @Override
    public void onCreate(Bundle state) {
        super.onCreate(state);
        setContentView(R.layout.main);

        setVolumeControlStream(Sound.STREAM);
        if(alarm1 == null) alarm1 = new Sound(this, R.raw.alarm1);
        if(alarm2 == null) alarm2 = new Sound(this, R.raw.alarm2);

        findViewById(R.id.play_1).setOnClickListener( new OnClickListener() {
            @Override public void onClick(View view) { alarm1.play(); }
        });
        findViewById(R.id.stop_1).setOnClickListener( new OnClickListener() {
            @Override public void onClick(View view) { alarm1.stop(); }
        });
        findViewById(R.id.play_2).setOnClickListener( new OnClickListener() {
            @Override public void onClick(View view) { alarm2.play(); }
        });
        findViewById(R.id.stop_2).setOnClickListener( new OnClickListener() {
            @Override public void onClick(View view) { alarm2.stop(); }
        });
    }

} 
```

* * *

为了管理你所有的声音，我们可以想象一个这样的库：

* * *

```
public class Soundlib {

    private Context context;
    private HashMap<Integer, Sound> library;

    public Soundlib(Context context) {
        this.context = context;
        library = new HashMap<Integer, Sound>();
    }

    public final void add(int... rawID) {
        for(int id : rawID) library.put(id, new Sound(context, id));
    }

    public final void play(int... rawID) {
        for(int id : rawID) library.get(id).play();
    }

    public final void stop(int... rawID) {
        for(int id : rawID) library.get(id).stop();
    }

    public final void stopAll() {
        for(int id : library.keySet()) stop(id);
    }

} 
```

* * *

```
// to initilize sound library
if(soundlib == null) soundlib = new Soundlib(this){{
    // to add one or more sounds
    add(R.raw.alarm1, R.raw.alarm2);
}};

// to play one or more sounds
soundlib.play(R.raw.alarm1);

// to stop one or more sounds
soundlib.stop(R.raw.alarm1);

// to stop all sounds
soundlib.stopAll(); 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:44:37.800

我认为这个错误日志是由SoundPool 实例的**play()** / **stop()方法引起的。**

您是否尝试播放/停止音频流？

# sql - Access 2010：如何使查询结果可更新？

> ID：10598702
> 
> 赞同：3
> 
> 时间：2012-05-15T10:23:15.253
> 
> 标签：sql, ms-access, select, join, sql-update

我正在处理我的第一个 Access 2010 数据库，并且在编辑从查询返回的记录集时遇到了问题。

我有两张表，“drugs”和“warehouse_stock”。在“药物”中，我有药物的名称。在另一张表中，我有相应的信息。对于那些在“药品”表中的药品，药剂师将管理它们的数量和其他相对值，例如每种药品的输入数量和特定的有效期。药剂师可以将相同的药物信息导入“warehouse_stock”，但有效期不同。

“warehouse_stock”中的每一行数据都以active_substance/strength/strength_type/dosage_form为特征。这四个值在“药物”中的一行数据中必须相同。药剂师将能够更新现有行数据的 curr_date、in_quant、out_quant_expiry_date 和品牌（来自“warehouse_stock”）并导入“drugs”中存在的新数量的药物。

我现在的查询是：

```
SELECT warehouse.active_subs,
   warehouse.strength,
   warehouse.strength_type,
   warehouse.dosage_form,
   warehouse.curr_date,
   warehouse.in_quant,
   warehouse.out_quant,
   warehouse.expiry_date,
   warehouse.available_stock,
   warehouse.brand,
   warehouse.ID
FROM   drugs
       RIGHT JOIN warehouse
         ON ( drugs.active_substance = warehouse.active_subs )
            AND ( drugs.strength = warehouse.strength )
            AND ( drugs.strength_type = warehouse.strength_type )
            AND ( drugs.dosage_form = warehouse.dosage_form )
WHERE  ( ( ( warehouse.active_subs ) LIKE
"*" &
Forms!Pharmacy.form!pharmacy_warehouse_stock_Subform.form!warehouse_stock_act_sub & "*" )
AND ( ( warehouse.strength ) LIKE
"*" &
Forms!Pharmacy.form!pharmacy_warehouse_stock_Subform.form!warehouse_stock_strength & "*" )
AND ( ( warehouse.strength_type ) LIKE
"*" &
Forms!Pharmacy.form!pharmacy_warehouse_stock_Subform.form!warehouse_stock_strength_type & "*" )
AND ( ( warehouse.dosage_form ) LIKE
"*" &
Forms!Pharmacy.form!pharmacy_warehouse_stock_Subform.form!warehouse_stock_dosage_form & "*" ) ); 
```

有没有办法使结果可更新？

在此先感谢您的任何建议！

齐诺纳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:29:19.683

为了使该表可更新，您需要删除未在 From 或 Where 子句中使用的连接（直到现在）。但是，您提到您试图`warehouse`仅过滤具有`drugs`值的结果。为此，您应该使用 Exists 函数，它允许您传递相关子查询（因为内部查询中的项目与外部查询中的项目匹配）。

```
Select W.active_subs, W.strength, W.strength_type, W.dosage_form
    , W.curr_date, W.in_quant, W.out_quant, W.expiry_date
    , W.available_stock, W.brand, W.ID
From warehouse As W
Where  ( ( ( W.active_subs ) LIKE
"*" &
Forms!Pharmacy.form!pharmacy_warehouse_stock_Subform.form!warehouse_stock_act_sub & "*" )
AND ( ( W.strength ) LIKE
"*" &
Forms!Pharmacy.form!pharmacy_warehouse_stock_Subform.form!warehouse_stock_strength & "*" )
AND ( ( W.strength_type ) LIKE
"*" &
Forms!Pharmacy.form!pharmacy_warehouse_stock_Subform.form!warehouse_stock_strength_type & "*" )
AND ( ( W.dosage_form ) LIKE
"*" &
Forms!Pharmacy.form!pharmacy_warehouse_stock_Subform.form!warehouse_stock_dosage_form & "*" ) )
    And Exists  (
                Select 1
                From drugs As D1
                Where D1.active_substance = W.active_subs
                    And D1.strength = W.strength
                    And D1.strength_type = W.strength_type
                    And D1.dosage_form = W.dosage_form
                ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:24:21.243

尝试：

```
<...>
warehouse.ID
FROM  warehouse 
LEFT JOIN Drugs
     ON ( drugs.active_substance = warehouse.active_subs )
        AND ( drugs.strength = warehouse.strength )
        AND ( drugs.strength_type = warehouse.strength_type )
        AND ( drugs.dosage_form = warehouse.dosage_form ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:33:19.157

您的要求完全不明确，标题与您对问题的文字描述以及提供的查询有很大不同，甚至不同。

如果像 active_subs、strength、strength_type、dose_form 这样的字段在两个表中应该具有相同的值，那么你的设计可能有缺陷。您应该从其中一张桌子上摆脱它们。为什么不将这些字段放在一个表中并通过 id 连接它们？

**编辑：**经过无休止的讨论，这就是我的理解。存在很大的沟通差距，所以我确信 OP 对此并不满意 :)

```
SELECT warehouse.ID, drugs.quantity, warehouse.active_subs, warehouse.strength, 
       warehouse.strength_type, warehouse.dosage_form, warehouse.curr_date, 
       warehouse.in_quant, warehouse.out_quant, warehouse.expiry_date, 
       warehouse.available_stock, warehouse.brand --whatever values you want
FROM   warehouse
JOIN   drugs ON drugs.active_substance = warehouse.active_subs AND 
                drugs.strength = warehouse.strength AND 
                drugs.strength_type = warehouse.strength_type AND
                drugs.dosage_form = warehouse.dosage_form
WHERE  (....); --if ever there is one
UPDATE warehouse_stock SET curr_date=@curr_date, in_quant=@in_quant, 
                           out_quant=@out_quant, expiry_date=@expiry_date, 
                           brand=@brand; 
```

我不清楚 OP 想要更新什么价值观。在更新查询中使用合适的 where 子句。

# perl - 如何使用 Test::Class 执行一个测试

> ID：10598703
> 
> 赞同：2
> 
> 时间：2012-05-15T10:23:16.047
> 
> 标签：perl, automation

我有以下代码，其中包含许多测试功能

```
package A;
{
BEGIN { $ENV{DIE_ON_FAIL} = 1 }

    sub test_168 : Test(no_plan){
    print("168");
    }

    sub test_169 : Test(no_plan){
    print("169");
    }
1;
} 
```

如果使用 Test::Class 调用这个模块，所有的 testMethods 都会被执行。是否有任何解决方案只执行所需的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:02:43.470

您可以设置[TEST_METHOD](http://search.cpan.org/~adie/Test-Class-0.36/lib/Test/Class.pm#RUNNING_INDIVIDUAL_TESTS)环境变量以将测试限制为单个方法 ( ) 或匹配正则表达式 ( )`TEST_METHOD='test_168'`的所有方法`TEST_METHOD='test_16.'`

# websphere-portal - Websphere Portal Pagebuilder 主题从 6.1.5 迁移到 7.0.0.2

> ID：10598707
> 
> 赞同：0
> 
> 时间：2012-05-15T10:23:20.060
> 
> 标签：websphere-portal

我是 WebSphere 门户主题的新手。我们可以将 WebSphere 门户 6.1.5 页面构建器主题和皮肤迁移到 7.0.0.2 页面构建器主题和皮肤吗？如果是，您能否提供要遵循的主题迁移步骤。

谢谢， Haritha.S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:43:52.643

如果您没有以任何方式自定义主题，如果它只是一个开箱即用的 Page Builder 主题，那么升级应该不会影响它。如果主题有自定义，则必须更新任何硬编码的引用（工件或上下文根的路径）。在迁移过程中，您在 wps.ear 中存在的任何自定义主题都将移动到 MigratedThemes.ear。您必须扩展该 ear 文件，修改您的主题，然后将其打包备份并通过 WAS 控制台进行部署。以下是详细说明（尽管它们与 WAS 7 有关）：[http ://www-10.lotus.com/ldd/portalwiki.nsf/dx/Portal_V6.1.x_on_application_server_V7_Updating_custom_themes_and_skins_with_hardcoded_context_root_references_wp8](http://www-10.lotus.com/ldd/portalwiki.nsf/dx/Portal_V6.1.x_on_application_server_V7_Updating_custom_themes_and_skins_with_hardcoded_context_root_references_wp8)

# php - 在 php 中找不到这样的文件或目录

> ID：10598708
> 
> 赞同：0
> 
> 时间：2012-05-15T10:23:22.353
> 
> 标签：php

我一直在尝试使用代码包含文件：

```
define('IN_PHPBB', true);
$phpbb_root_path='./../../';
$iai_root_path = "./";
include($phpbb_root_path.'extension.inc');
include($phpbb_root_path.'common.'.$phpEx);
include($iai_root_path.'includes/constants.'.$phpEx);
include($iai_root_path.'includes/load_functions.'.$phpEx); 
```

我收到以下错误，现在我已经摸不着头脑了，不知道我是不是错了

```
Warning: include(./../../extension.inc) [function.include]: failed to open stream: No such file or directory in C:\xampp\htdocs\alice\mods\iai\install.php on line 33

Warning: include() [function.include]: Failed opening './../../extension.inc' for inclusion (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\alice\mods\iai\install.php on line 33

Notice: Undefined variable: phpEx in C:\xampp\htdocs\alice\mods\iai\install.php on line 34 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:26:47.260

您的 phpbb 是否安装在这里 "C:\xampp\htdocs\alice\" ？

如果你事实上设置`$phpbb_root_path='../../../';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:29:29.950

我通过包含 $_SERVER['DOCUMENT_ROOT'] 编写包含语句来对这个问题进行排序

```
include $_SERVER['DOCUMENT_ROOT'] . "includes/functions.php"; 
```

至于为什么会这样，我不太确定。

# php - 有没有一种快速、简单的方法来反转 PHP 中的嵌套数组？

> ID：10598711
> 
> 赞同：0
> 
> 时间：2012-05-15T10:23:31.430
> 
> 标签：php, arrays, multidimensional-array

逆我的意思是从以下几点：

```
$my_array = array(
    "header" => array(
        0 => "Header 1",
        1 => "Header 2"
    ),
    "paragraph" => array(
        0 => "Paragraph 1",
        1 => "Paragraph 2"
    )
); 
```

对此：

```
$my_new_array = array(
    0 => array(
        "header" => "Header 1",
        "paragraph" => "Paragraph 1"
    ),
    1 => array(
        "header" => "Header 2",
        "paragraph" => "Paragraph 2"
    )
); 
```

我知道我可以这样做：

```
$my_new_array = array();
foreach ( $my_array["header"] as $key => $header ){
    if ( !is_array( $my_new_array[ $key ] ) ){
        $my_new_array[ $key ] = array();
    }
    $my_new_array[ $key ]["header"] = $header;
}
foreach ( $my_array["paragraph"] as $key => $paragraph ){
    $my_new_array[ $key ]["paragraph"] = $paragraph;
} 
```

但我想知道是否有一个快速的 PHP 函数可以做到这一点或更优化的方式。我在 PHP 函数目录中找不到任何这样的函数，我想不出更优化的方法！

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:32:03.000

这将在不使用具体键的情况下工作：

```
$new = array();
foreach ($my_array as $key => $values) {
  foreach ($values as $idx => $value) {
    $new[$idx][$key] = $value;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:32:42.347

```
$my_new_array = array();
array_walk($my_array, function($innerArray, $key) use (&$my_new_array) {
  foreach ($innerArray as $index => $val) {
    $my_new_array[$index][$key] = $val;
  }
}); 
```

...是我能想到的最好的，虽然它基本上是相同的东西写不同。它确实具有更加动态的优点，因为没有明确指定键名。

[看到它工作](http://codepad.viper-7.com/LZKDH1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:36:54.510

不幸的是，没有内置功能可以做到这一点，但由于现有的答案似乎有利于`foreach`我让这个候选人进入`array_walk`议程上最大程度的竞赛：

```
$result = array();
array_walk($array, function($rows, $propKey) use (&$result) {
    array_walk($rows, function($val, $row) use($propKey, &$result) { 
        $result[$row][$propKey] = $val;
    });
}); 
```

[**看到它在行动**](http://codepad.viper-7.com/82mOgr)。

# android - 如何在 Android 中高效地检索和读取大文本文件

> ID：10598718
> 
> 赞同：0
> 
> 时间：2012-05-15T10:23:52.633
> 
> 标签：android, android-layout, android-ui, textview

我正计划创建一个圣经应用程序。如您所知，这将涉及大量文本文件。因此，如果实施不当，应用程序可能会非常低效。

我正在考虑将大文件存储在原始文件夹中，但由于内容繁重，我觉得这是违反直觉的。使用多行文本视图显示原始文件夹中的文本文件是否可行？

谁能指出我正确的方向？我真的很绝望，因为我已经研究这个问题好几天了！！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:48:30.733

如何将文本拆分为多个较小的 HTML 文件，然后将它们加载到`WebView`.

# jsf-2 - JSF2 渲染重新训练旧值

> ID：10598722
> 
> 赞同：1
> 
> 时间：2012-05-15T10:24:03.583
> 
> 标签：jsf-2

我正在使用带有 @ViewScoped 的**JSF2**

我有表格列表，单击行以禁用='true 模式'打开记录
2-打开名为“编辑”的禁用视图按钮中的弹出窗口
3-当用户单击编辑按钮时，表单上所有禁用的字段都将变为启用.

问题是在禁用模式下很好，但是当用户单击编辑按钮时，它开始显示正在单击的旧记录中的几个值。

它不是每次都发生，而是在您开始点击时随机发生。

当用户单击编辑按钮时，我不会重新加载任何数据，而是仅进行`ajax`调用并将`attrib`val 设置为`true`并在此基础上呈现模型值并显示启用的值。

是缓存问题还是别的什么？？？
需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:14:21.673

在你的 bean 中设置 enableStatus =0;
并在编辑按钮和所有文本字段中，设置您`disabled="#{bean.enableStatus==0}"`
何时单击编辑，然后`enableStatus = 1`在您的操作方法中设置并重新渲染它。
你会得到你想要的......

# windows - Windows 7 资源管理器中图标的透明度

> ID：10598725
> 
> 赞同：0
> 
> 时间：2012-05-15T10:24:20.240
> 
> 标签：windows, winapi, contextmenu, explorer, loadimage

我在 Windows 7 上，我试图在我的上下文菜单上显示一个透明的图标，但它不起作用。

我正在尝试像这样使用 LoadImage ：

```
 m_hMenuBmp = (HBITMAP)::LoadImage(g_hInst, L"C:\\Users\\nicolas\\AppData\\Roaming\\MyApp\\icon.bmp", IMAGE_BITMAP, 16, 16, LR_LOADFROMFILE | LR_LOADTRANSPARENT ); 
```

我的 icon.bmp 设置为 256 色，背景为白色（ 255, 255, 255 ）......我不知道为什么这不起作用......

我尝试了 Raymon Chen 的 ARGB 方法，但也没有用！

```
int cx = GetSystemMetrics(SM_CXSMICON);
int cy = GetSystemMetrics(SM_CYSMICON);

BITMAPINFO bmi = {0};
bmi.bmiHeader.biSize =sizeof(bmi.bmiHeader);
bmi.bmiHeader.biWidth = cx;
bmi.bmiHeader.biHeight = cy;
bmi.bmiHeader.biPlanes = 1;
bmi.bmiHeader.biBitCount = 32;
bmi.bmiHeader.biCompression = BI_RGB;

DWORD *pBits;
m_hMenuBmp = CreateDIBSection(NULL, &bmi, DIB_RGB_COLORS, (void **)&pBits, NULL , 0);

if (m_hMenuBmp)
{
    for (int y = 0; y < cy ; y++ )
    {
        for (int x = 0; x < cx; x++)
        {
            BYTE bAlpha = x * x * 255 / cx / cx;
            DWORD dv = (bAlpha << 24) | (bAlpha << 16) | bAlpha ;
            pBits[y *cx + x] - dv;
        }
    }
} 
```

而且我不知道为什么......我的图标没有用这种方法显示......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:41:26.303

我找到了一种轻松做到这一点的方法：

```
 HICON hIcon = (HICON)LoadImage( NULL,  L"icon.ico", IMAGE_ICON, 16, 16, LR_LOADFROMFILE );

HDC hDC = ::GetDC( NULL );
m_hMenuBmp = ::CreateCompatibleBitmap( hDC, 16, 16 );

HDC hDCTemp = ::CreateCompatibleDC( hDC );
::ReleaseDC( NULL, hDC );

HBITMAP hBitmapOld = ( HBITMAP ) ::SelectObject( hDCTemp, m_hMenuBmp );
::DrawIconEx( hDCTemp, 0, 0, hIcon, 16, 16, 0, ::GetSysColorBrush( COLOR_MENU ), DI_NORMAL );

::SelectObject( hDCTemp, hBitmapOld );
::DeleteDC( hDCTemp ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:11:42.167

我能够让它工作：

```
HBITMAP hBitmap = (HBITMAP)::LoadImage(NULL, "C:\\moo\\res\\bitmap1.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE | LR_LOADTRANSPARENT | LR_LOADMAP3DCOLORS);
m_pic.SetBitmap(hBitmap); 
```

诀窍是 LR_LOADMAP3DCOLORS 和 LR_LOADTRANSPARENT。顺便说一句，这是一个**对话框**。没有 LR_LOADMAP3DCOLORS，我的白色背景保持白色。

# mysql - mysql存储过程：流量控制

> ID：10598728
> 
> 赞同：0
> 
> 时间：2012-05-15T10:24:29.133
> 
> 标签：mysql, sql, stored-procedures, control-flow

我在 MYSQL 数据库上练习这个存储过程来在账户之间进行支付。它接受两个帐户（acct1，acct2）的输入，要支付的金额（amt）并输出确认消息（pmessage）

它应该只在以下情况下付款：(IF (balance1 >=amt) THEN ...)，但是当我输入任何大于可用余额的金额时，它仍然会继续付款。我不明白。请帮忙。

这是代码：

```
DELIMITER //
CREATE PROCEDURE `make_payment`(IN `acct1` int(4), IN `acct2` int(4), IN `amt` float(10,2) unsigned, OUT `pmessage` varchar(100))

BEGIN
    DECLARE balance1 FLOAT;
    DECLARE balance2 FLOAT;

    IF(acct1 !=acct2) THEN 
        SELECT balance INTO balance1 FROM mydb.accounts
            WHERE account_no =acct1
            ORDER BY balance DESC LIMIT 1;

        SELECT balance INTO balance2 FROM mydb.accounts
            WHERE account_no =acct2
            ORDER BY balance DESC LIMIT 1;

        IF (balance1 >=amt) THEN 
            begin
                SET balance1 =balance1-amt;
                SET balance2 =balance2+amt;

                INSERT INTO mydb.accounts(account_no, outflow, balance)
                    VALUES(acct1, amt, balance1);

                INSERT INTO mydb.accounts(account_no, inflow, balance)
                    VALUES(acct2, amt, balance2);

                SET pmessage ="payment was successful";
            END;

        ELSE SET pmessage ="insufficient balance";
        END IF;
    END IF;
END //
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:30:50.347

（*升级到答案*）

您`accounts`按降序对表格进行`balance`排序，因此您假设“可用余额”是该表格中给定帐户的最大余额。相反，您想要`ORDER BY`日期并选择最近的记录。

另请注意我在上面的评论中提出的其他观点，包括：

1.  您应该对货币使用定点数据类型（例如`DECIMAL`），而不是浮点类型；和

2.  您应该在事务中执行这些操作以防止并发问题。

# c# - 如何在 LINQ 中使用 WHERE？

> ID：10598731
> 
> 赞同：-6
> 
> 时间：2012-05-15T10:24:35.253
> 
> 标签：c#, linq

我正在尝试这个但没有成功

```
var v=ds.Table[0].AsEnumerable().Where<DataRow>(r=>r.Field<int>("productID")==23);
GridView1.DataSource=v;
GridView1.DataBind(); 
```

gridview 仅显示一行标题 RowError HasRrror 但我期待一行包含产品信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:51:05.050

试试这个。

```
var results = from myRow in ds.Table[0].Rows 
              where myRow.Field<int>("productID") == 23
              select myRow; 
```

这应该为您提供您正在寻找的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:59:01.387

我认为你应该尝试使用`CopyToDataTable`

```
ds.Table[0].AsEnumerable().Where<DataRow>(r=>r.Field<int>("productID")==23).CopyToDataTable(); 
```

当您将其转换为 Enumerable 时，过滤后的列表没有标识符，`ProductID`因此网格将无法映射列并失败。

或者，您也可以选择使用`AsDataView()`而不是`CopyToDataTable()`.

更详细的解释可以找到[Binding DataRows](http://blog.slaks.net/2011/01/binding-to-lists-of-datarows.html)

> 数据绑定由 ListBindingHelper 和 TypeDescriptor 类控制。绑定到列表时，会调用 ListBindingHelper.GetListItemProperties 方法来获取列表中的列。如果列表实现了 ITypedList 接口，则调用其 GetItemProperties 方法。否则，它将使用 TypeDescriptor 来获取列表中第一项的属性。（这使用反射）
> 
> DataView 类（DataTable 也通过它绑定，使用 IListSource）实现 ITypedList 并返回显示表中列的 DataColumnPropertyDescriptors。这就是您可以绑定到 DataView 或 DataTable 并查看列的原因。但是，当您绑定到列表时，没有可以将列作为属性返回的 ITypedList。因此，它依靠反射并显示 DataRow 类的物理属性。

# android - Android 中的 Web 服务 SOAP

> ID：10598734
> 
> 赞同：2
> 
> 时间：2012-05-15T10:24:39.383
> 
> 标签：android, web-services, ksoap2

我开始在 Android 中使用 Web 服务，并按照本教程进行操作：[使用 Apache Axis2 和 Eclipse 在 Java 中创建 Web 服务](http://blog.sencide.com/2011/06/create-web-service-using-apache-axis2.html)来创建和使用 Web 服务。本教程解释了 Java 中的客户端应用程序，但通过其他一些教程，我能够像这样在 Android 中使用 WS：

```
package com.android.webservices;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AddNumbersWSActivity extends Activity {
/** Called when the activity is first created. */

private String METHOD_NAME = "addTwoNumbers"; // our webservice method name
private String NAMESPACE = "http://sencide.com"; // Here package name in webservice with reverse order.
private String SOAP_ACTION = "http://sencide.com/addTwoNumbers"; // NAMESPACE + method name
private static final String URL = "http://192.168.1.214:8080/axis2/services/FirstWebService?wsdl"; // you must use ipaddress here, don’t use Hostname or localhost

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button addButton = (Button) findViewById(R.id.button1);

    addButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            try
            {
                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                EditText num1 = (EditText) findViewById(R.id.editText1);
                EditText num2 = (EditText) findViewById(R.id.editText2);
                request.addProperty("firstNumber", Integer.valueOf(num1.getText().toString()));
                request.addProperty("secondNumber", Integer.valueOf(num2.getText().toString()));
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
//                  envelope.dotNet = true;
                    envelope.setOutputSoapObject(request);
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                    androidHttpTransport.call(SOAP_ACTION,envelope);
                    Object result = envelope.getResponse();
                    System.out.println("Result : " + result.toString());
                    ((TextView) findViewById (R.id.textView4)).setText(result.toString());
                } catch (Exception E) {
                    E.printStackTrace();
                }
            }
        });

    }
} 
```

但是现在我有一些关于在 Android 中使用 WS 的问题：

1.  正如我[在这里](https://code.google.com/p/ksoap2-android/downloads/list?can=1&q=&colspec=Filename%20Summary%20Uploaded%20ReleaseDate%20Size%20DownloadCount)看到的，kSOAP2 库已被弃用......我应该继续使用这个库还是需要其他工具？如果是，是哪一个？
2.  是否可以仅使用服务的 WSDL知道`NAMESPACE`, `METHOD_NAME`, ？`SOAP_ACTION`
3.  我可以使用 WSDL 自动生成一些代码（例如用于 Java 应用程序的 WSDL2Java 工具）吗？
4.  在`addProperty(String name, Object value)`方法上，我可以使用任意`name`的还是应该遵循规则？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:40:02.940

Apache Axis 用于 Java，不适用于 Android 平台。Ksoap2 库是该库的替代方案，并且主要用于在 Android 中使用 Web 服务。对于您的问题：

1 - 今天 [15.5.2012] 我只能在[这里看到 4 天前的最后一次提交](http://code.google.com/p/ksoap2-android/source/list)

2 - 是的，这是可能的。命名空间描述如下：

```
<wsdl:definitions targetNamespace="http://tempuri.org/"> 
```

方法名称描述如下：

```
<s:element name="YourMethodName"> 
```

而 SOAP 动作一般由 NAMESPACE + METHOD_NAME 组成；

3 - 据我所知，目前还没有写得很好的项目。

4 - 它应该遵循必须与 WSDL 的属性名称和大小写敏感的规则

# php - 用户和公司——数据库方案

> ID：10598736
> 
> 赞同：0
> 
> 时间：2012-05-15T10:24:42.000
> 
> 标签：php, mysql

我正在开发一个项目管理应用程序，每个公司（使用我们的应用程序）都会有一个个人子域：company.domain.com。由于许多原因，我决定为每家公司使用单独的数据库。

公司可以邀请人们（通过电子邮件）共同开展项目。一个用户可以属于多个公司（因此应该出现在多个数据库中）。但是，用户数据和登录信息存储在单独的数据库中，因为每个公司的用户使用相同的用户名、密码以及他们的名字，每个公司的姓氏都相同。

我现在做的事情如下：

*   存在一个单独的数据库：用户、身份（user_id、用户名、密码）。
*   在每个公司的每个数据库中也存在一个*用户*表，包含关于用户的相同数据（实际上只有 3 个字段：名字、姓氏、时区）。

有没有更好的解决方案？如果您对此问题有疑问:) 请询问。

我正在使用 php + mysql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:38:59.467

我不认为在更多数据表中包含用户数据是正确的 - 考虑冗余......

如果您有一个包含用户数据的数据库，为什么不将公司数据库链接到该数据库以获取用户数据？

一个简单的图像： ![关于如何划分用户表的示例](../Images/7df45faa619e3d79f4d694453c055554.png)

在您的公司数据库中，然后您可以在用户表中拥有其他基于公司的用户数据，但公共数据应在每个存储中仅保留一次...

编辑：ORA 存储只是例如，您也可以使用 MySQL 数据库...

# tcl - TCL：获取对象的类名？

> ID：10598741
> 
> 赞同：3
> 
> 时间：2012-05-15T10:25:06.233
> 
> 标签：tcl, incr-tcl

如何获取itcl对象的类名或检查对象是否存在？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T10:51:31.480

尝试使用信息类，例如

```
objName info class 
```

**有关使用itcl::is**检查存在的更多信息，另请参阅[http://wiki.tcl.tk/12629](http://wiki.tcl.tk/12629)

 **```
itcl::is object objName 
```**

# javascript - javascript - 如何处理函数而不是一次全部

> ID：10598745
> 
> 赞同：0
> 
> 时间：2012-05-15T10:25:28.123
> 
> 标签：javascript, function, simultaneous-calls

我有以下问题：

假设我有一个函数可以处理数组以根据接收到的参数对其进行处理。所以像：

```
 var arr = [];

 function processArr(p1, p2, ....){}; 
```

从服务器接收到 p1、p2 等，因此我们可以：

```
processArr(<?php echo $p1; ?>, <?php echo $p2; ?>, ...)
processArr(<?php echo $p1; ?>, <?php echo $p2; ?>, ...)
processArr(<?php echo $p1; ?>, <?php echo $p2; ?>, ...)
processArr(<?php echo $p1; ?>, <?php echo $p2; ?>, ...)
processArr(<?php echo $p1; ?>, <?php echo $p2; ?>, ...) 
```

它实际上是一个 php，但并不重要。

问题：js同时处理调用（不完全同时但足够接近）而不是一个接一个。因此，如果在第一次调用中我向数组添加了一个元素（然后是其他一些处理），而在第二次调用中我尝试删除该元素，则在删除时该元素不存在，因为它尚未添加。

如何拨打第二个电话以等待第一个电话完成？

新增功能：

```
 function processSaved(act, params)
    {
        if (act == 1)
        {
            var newUser = params;
            if (user.id == newUser.id)
                user = clone(newUser);
            activeElementIndex = i;
            // Go to the next level from the active element level
            var newLevel = newUser.level;

            // Set current level
            currentLevel = Math.max(currentLevel, newLevel);

            // Create new object and push it to elements array
            var obj = newUser;
            elements.push(obj);
            activeElementIndex = newUser.parent;
            // Add element to order list
            if (orderElements.length + 1 > newLevel)
            {
                var added = 0;
                for (var i = 0; i < orderElements[newLevel - 1].el.length; i++)
                {
                    if (elements[activeElementIndex].column < elements[elements[orderElements[newLevel - 1].el[i]].parent].column)
                    {
                        orderElements[newLevel - 1].el.splice(i, 0, elements.length - 1);
                        added = 1;
                        break;
                    }
                }

                if (added == 0)
                    orderElements[newLevel - 1].el.push(elements.length - 1);
            }
            else
            {
                var tmp = new Array();
                tmp.push(elements.length - 1);
                var obj = {"el": tmp};
                orderElements[newLevel - 1] = obj;
            }

            flagCreate = 1;
            actions.push(newUser);
            // Call the rearange function
            rearangeElementsWithoutRedraw();
        }
        else if (act == 0)
        {
            activeElementIndex = params.index;
            deleteNode();
        }

        return true;                                                
    } 
```

第一次调用是使用 act = 1 进行的。第二次调用是使用 act = 0 进行的。如果我在第二次调用中添加超时，比如说 0.5 秒，一切正常。如果不是，我会在删除时出错，因为元素不存在。这表明第二次调用是在第一次完成之前进行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:27:34.433

JS 不会并行调用函数。您的`processArr`函数按顺序执行。

这显然假设您不只是在函数中启动例如 AJAX 请求 - 如果您执行下一个函数显然不会等待请求完成（直到它是同步的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:31:51.777

发现了问题。我正在使用的库（raphaeljs）进行了异步调用。抱歉浪费时间:)。

# parallel-processing - 基本并行编程概念：N 个处理器的搜索成本

> ID：10598746
> 
> 赞同：1
> 
> 时间：2012-05-15T10:25:35.847
> 
> 标签：parallel-processing

我问这个问题是为了确保一些并行计算概念的概念。

让我们举一个简单的例子：我们有一组`n`数字，如果我们至少有`n/3`并行计算机，那么从中搜索一个项目的最佳运行时间是多少？

我认为这仍然是`O(n)`，但不确定我是否正确。既然大哦表达式的常数部分可以抹去？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:40:20.020

它可以是 O(1) 或 O(ln n)。

给定您的每台 n/3 台计算机 n/(n/3) 个数字；他们基本上都得到了 3 个值。它们需要单独的恒定时间来搜索它们的恒定大小集并返回结果（“0 --> not found”，如果在数组中的第 k 个位置找到 k，如果每个给定 K*(n/3) 为要开始的数组中的索引）。因此，该值在时间 O(1)中*找到。*

问题在于报告答案。在 n/3 台机器的响应中进行了选择，以选择一个独特的结果。通常，这需要在机器子集之间进行“重复”选择，您可以在 O(n) 时间内完成，但在并行系统中，通常使用“归约”运算符（例如 SUM 或 MAX 或 ...）来完成。这样的归约算子可以（并且通常）使用归约*树*来实现，它是对数的。

一些并行硬件具有非常快的减少硬件，但它仍然是对数的。奇怪的是，如果你有 n/1000 个 CPU，你仍然会得到 O(1) 的搜索时间（一个很大的常数），以及 O(ln n) 的减少时间和一个非常小的常数。如果你忽略 O 符号，它会“看起来”像常数时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:58:20.187

这严格取决于底层并行模型。实际上，每个处理器定义一个标志*Found x*并且所有处理器执行并行归约的最终归约步骤可能具有不同的复杂性。特别参见 COMMON CRCW PRAM 案例。

对于消息传递设置：

*   T(n) = O(n/p + log p) 对于 p < n
*   T(n) = O(log n) 对于 p = O(n)

对于共享内存设置：

a) EREW 婴儿车

*   T(n) = O(n/p + log p) 对于 p < n
*   T(n) = O(log n) 对于 p = O(n)

b) 乘员婴儿车

并发读取无济于事：最终的缩减步骤仍然需要 O(log p) 时间

*   T(n) = O(n/p + log p) 对于 p < n
*   T(n) = O(log n) 对于 p = O(n)

c) 普通 CRCW 婴儿车

并发写入确实有帮助：最后的缩减步骤现在需要 O(1) 时间，那些带有*Found x*标志的处理器可以同时在共享位置写入相同的值

*   T(n) = O(n/p) 对于 p < n
*   T(n) = O(1) 对于 p = O(n)

# iphone - 如何知道uiprogressview的进度？

> ID：10598749
> 
> 赞同：0
> 
> 时间：2012-05-15T10:25:41.133
> 
> 标签：iphone

我正在制作一个应用程序，其中放置了一个进度条。

我只需要知道酒吧的进度...

我将如何知道进展..

即使我希望不时在标签中打印进度条..

这是我的代码

> ```
> [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(onTimer) userInfo:nil repeats:YES]; 
> ```

```
-(void) onTimer {

    [progressView setProgress:5 animated:YES];

    sliderLabel.text=[NSString stringWithFormat:@"%0.2f",progressView.progress *100];

} 
```

在这里，我在 viewdidLoad 中设置了一个计时器，当进度提高时，标签

应该更新。

请帮忙。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:33:33.753

你做错的第一件事。每次您的计时器调用您将progressView 的进度设置为5。所以它实际上不会进步。

现在，为了获取您的progressView 的实际进度，您可以使用`progress`UIProgressView 的属性。

【当前进度由一个介于 0.0 和 1.0（含）之间的浮点值表示，其中 1.0 表示任务完成。默认值为 0.0。小于 0.0 和大于 1.0 的值被固定到这些限制。]

见[UIProgressView](https://developer.apple.com/library/IOs/#documentation/UIKit/Reference/UIProgressView_Class/Reference/Reference.html)

UIProgressView 的进度在 0.0 到 1.0 之间。1.0 代表 100%，所以如果你想在某处设置进度，请将其设置在 0.0-1.0 之间。

**编辑：**

做一件你知道的关于定时器的事情。创建两个计时器一用于设置progressView 的进度。不要让它修复。第一次取一个全局浮点值 0.0。每次您的计时器调用时，都会在该值中添加一些东西，假设您每次都添加 0.1。因此，当您的 timere 第 10 次调用时，您的值将是 1.0。并且您的 progressView 将有进度增加。

```
- (void)onTimer {
    myValue += 0.1;
    [progressView setProgress:myValue];
} 
```

myValue 将是在 .h 文件中声明的浮点数。

在您的第二个计时器中，您可以像现在一样打印您的进度视图的进度。但不要在第二个视图中再次设置进度。

希望这可以帮助

# c# - 范围更改时的 ApplyCurrentValues 方法问题

> ID：10598750
> 
> 赞同：0
> 
> 时间：2012-05-15T10:25:42.303
> 
> 标签：c#, sql-server, entity-framework, windows-applications

我正在编写一个使用 EF 与 SQL Express 通信的 C#.Net windows 应用程序。我的应用程序中有一个联系人表。为了编辑联系人，我通过 ShowDialogue() 方法调用了一个新的窗口窗体并使用了 ApplyCurrentValue 方法。在此表单中，如果我获取联系人列表（使用 db.Contacts.ToList() 方法），可以看到更改，但是当我关闭表单并想要刷新主表单中存在的 gridview 时，我看不到除非我重新启动整个应用程序，否则更改。

这是显示新表单的代码：

```
NewContactForm contact = new NewContactForm();
        contact.TopLevel = true;
        contact.ShowInTaskbar = false;
        contact.ShowDialog();
        RefreshForm();
        FillGridView(); 
```

我已经更改了contactToEdit 对象的属性并希望保存更改。所以：

```
public void UpdateContact(Contact contactToEdit)
    {
        db.Contacts.ApplyCurrentValues(contactToEdit);
        db.SaveChanges();
    } 
```

现在我想使用 FillGridView() 中的这段代码显示联系人列表：

db.Contacts.ToList();

我错过了一些代码吗？我什至用过 db.AcceptAllChanges() 但没用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:43:14.293

好的..这是对我有用的解决方案

在我的主窗体（父范围）中，我使用以下简单代码刷新了修改后的对象：

```
db.Refresh(System.Data.Objects.RefreshMode.StoreWins, contactToEdit) 
```

以后一切都很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:41:17.520

这是您可能想尝试的一些代码。

```
db.Contacts.Single(Contact => Contact.ContactID == <lets say, 5>).Name = "Pete";
db.Contacts.Single(Contact => Contact.ContactID == <lets say, 5>).Surname = "Repeat";

db.SaveChanges(); 
```

这是我使用实体框架更新数据库中记录的方法。看看这是否有帮助。您可以使用您的`toList()`方法或查询联系人模型进行测试

```
var contactquery = (from x in db.Contacts where x.ContactID == <lets say, 5> select new {contactName = x.Name});

List<string> contactNames = new List();

foreach (var name in contactquery)
{
     contactNames.Add(name.contactName);
} 
```

**更新** 这只是一个澄清更新。在我说的地方，它可以是代表 Single() 方法中所述字段的任何值。single() 所做的是它只从查询中提取第一条记录，该查询由其中的 lambda 表达式确定。

**更新 2** 修复了我的代码中的一个错误。请修改你的

# android - startActivityForResult 在 android 中不起作用 TabGroupActivity

> ID：10598753
> 
> 赞同：1
> 
> 时间：2012-05-15T10:25:51.917
> 
> 标签：android, tabs, paypal, activitygroup

我[在 TabActivity 中使用 Experience - Multiple Android Activity](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)来实现选项卡。
我有以下情况。
**MainActivity 扩展 TabActivity** (Tab1,Tab2,Tab3)
**TabGroup1Activity 扩展 TabGroupActivity**（来自上述 url 的类）

在**TabGroup1Activity 中**：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    startChildActivity("MyActivity", new Intent(this,MyActivity.class));

} 
```

在我使用的**MyActivity.java**类中

```
 PayPalPayment payment = SimplePayment();
        Intent checkoutIntent = PayPal.getInstance().checkout(payment,
                MyActivity.this,new ResultDelegate());
        startActivityForResult(checkoutIntent, request); 
```

但它不执行**onActivityResult**方法。当我在另一个没有选项卡和活动组的项目中运行此代码时，它会转到**onActivityResult**，工作正常。
我应该怎么做才能让它在这里工作？
请帮忙 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:48:25.800

你`onActivityResult`被调用`ActivityGroup`而不是`subActivity`你的`tabgroupActivity`。

所以重写该方法`onActivityResult`，然后`abstract method`在你的母类上创建一个`SubActivities`（`TabActivityGroup`我认为），并在每个 subActivity 上重写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:30:44.720

```
 Intent intent = new        Intent(v.getContext(),PlayStation.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

      AppplicationData app1 = UrlSet.get(i);            
     intent.putExtra("Url", "" + app1.getUrlLink());
                        intent.putExtra("URLName", app1.getUrlName());
                        intent.putExtra("PrevActivity", "UserUrl");
                        View view = getLocalActivityManager()
                                .startActivity("PlayStaion", intent)
                                .getDecorView();
                        setContentView(view); 
```

# r - 将附加图例放置在 R 中现有图例的底部

> ID：10598758
> 
> 赞同：4
> 
> 时间：2012-05-15T10:26:17.510
> 
> 标签：r, plot

我有以下传说：

![在此处输入图像描述](../Images/ea788d3d97cadabfef76daa856634cd7.png)

如何使用“Mean and SD”定位中心文本，以便将其准确放置在“---emp”下。？

生成的代码是这样的：

```
L = list(bquote(Em.Mean ==.(new_avg)),
    bquote(Em.SD==.(new_std)), bquote(Th.Mean ==.(theor_avg)),
    bquote(Th.SD==.(theor_sd)))

legend("topright", c(kids,"emp."), cex=0.7, bty="n", col=c(cm.colors(6), "red"),
    pch=c(rep(19, 6), -5), lty = c(0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0), )

# How can I locate this    
legend("topcenter", cex=0.5, bty="n", legend=sapply(L, as.expression)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:11:04.667

`legend`坐标可以分配给一个对象。然后可以使用这些坐标来放置您的第二个图例。例如，

```
x <-10:1
y <-11:20
plot(x,y,type="h")
my.legend.size <- legend("topright",c("Series1","Series2","Series3"))
> my.legend.size
$rect
$rect$w
[1] 1.599609

$rect$h
[1] 1.506977

$rect$left
[1] 8.760391

$rect$top
[1] 20.36

$text
$text$x
[1] 9.266641 9.266641 9.266641

$text$y
[1] 19.98326 19.60651 19.22977 
```

使用 $rect$left、$rect$top 和 $rect$h，您可以为第二个图例提供新坐标。

```
#second legend
legend(x=my.legend.size$rect$left,y=my.legend.size$rect$top-    
my.legend.size$rect$h,c("Series4","Series5","Series6")) 
```

![在此处输入图像描述](../Images/2f6d77e0d7201f59e3cd3e34a19ac9a1.png)

我注意到你的第二个图例的宽度比第一个大。这里的技巧是获取第二个图例的坐标，但不使用`,plot = FALSE`第二个图例的 x 坐标来打印它`my.legend.size2$rect$left`。

```
x <-10:1
y <-11:20
plot(x,y,type="h")
my.legend.size <-legend("topright",c("Series1","Series2","Series3"))
my.legend.size2 <-legend("right",c("Long series name","Series5","Series6"),plot = FALSE)
legend(x=my.legend.size2$rect$left,y=my.legend.size$rect$top-
my.legend.size$rect$h,c("Long series name","Series5","Series6")) 
```

![在此处输入图像描述](../Images/b0ca6ab900e142a4159d138e41a42e9e.png)

PS：我在图例周围留下了方框以表明放置是完美的，但您可以使用删除它们`bty = "n"`

# javascript - Jeditable + Datepicker 查询插件来获取 div 元素上的数据

> ID：10598759
> 
> 赞同：1
> 
> 时间：2012-05-15T10:26:17.657
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

日期选择器与标准表单输入字段相关联。
我想使用 Jeditable 将 datepicker 绑定到 div 元素。一些提示如何制作它？

```
 //html code
   <input type="text" id="datepicker">
   <div id="datepickerDiv"> get date </div> 
```

--

```
 // javascript script code
    $(function() {
            $( "#datepicker" ).datepicker(); // it works
            $( "#datepickerDiv" ).datepicker(); // it does not work
    }); 
```

参考：
[Jeditable](http://www.appelsiini.net/projects/jeditable)
[Datepicker](http://jqueryui.com/demos/datepicker/)

# android - 如何创建额外菜单的点击“更多”菜单

> ID：10598761
> 
> 赞同：0
> 
> 时间：2012-05-15T10:26:27.110
> 
> 标签：android, menuitem, submenu, android-menu

我有超过 5 个菜单项，所以当我单击此菜单时，我添加了“更多”作为我的菜单项，我
希望生成更多菜单。

我怎样才能做到这一点 ？

这就是我添加的方式

```
<item android:id="@+id/a" android:title="a" />
<item android:id="@+id/b" android:title="b" />
<item android:id="@+id/c" android:title="c" />
<item android:id="@+id/d" android:title="d" />
<item android:id="@+id/e" android:title="e" />
<item android:id="@+id/more" android:title="More" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:31:17.330

您不需要创建`more`菜单项，android 系统会为您创建。

只需添加 10 个项目，它就会自动运行。

# ruby - 使用 NewRelic 时如何忽略对 Sinatra 中某个路由的请求？

> ID：10598764
> 
> 赞同：2
> 
> 时间：2012-05-15T10:26:37.477
> 
> 标签：ruby, sinatra, newrelic

我们正在使用 NewRelic 来监控 Sinatra 应用程序。我们不希望探测 URL varnish 用于检查应用程序是否在线以被 NewRelic 检测。我们如何告诉 NewRelic 忽略某个 Sinatra 路由？（文档似乎只涉及如何在 Rails 中执行此操作：[https](https://newrelic.com/docs/ruby/blocking-controller-instrumentation) ://newrelic.com/docs/ruby/blocking-controller-instrumentation ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:23:53.857

您可以尝试`NewRelic::Agent.abort_transaction!`在探测请求的代码路径中调用。[有关详细信息，请参阅 API 文档](http://newrelic.github.com/rpm/NewRelic/Agent.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T00:33:41.213

您是否尝试过他们的文档建议[https://newrelic.com/docs/ruby/sinatra-support-in-the-ruby-agent](https://newrelic.com/docs/ruby/sinatra-support-in-the-ruby-agent)

```
newrelic_ignore '/ping' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T16:50:04.057

从 NewRelic gem 的 3.6.3 版本开始，您~~应该~~ **能够**使用“newrelic_ignore”方法来忽略端点。~~如果您使用 Sinatra，您可能需要显式调用此类方法，如下所示：~~

 ~~```
NewRelic::Agent::Instrumentation::Sinatra::newrelic_ignore('/route/to/ignore') 
```~~  ~~但是，它没有按预期工作。我正在向 NewRelic 提交错误报告。~~

# c++ - 如何制作 QList 使用 indexOf() 和自定义 operator==()？

> ID：10598768
> 
> 赞同：2
> 
> 时间：2012-05-15T10:26:50.327
> 
> 标签：c++, qt, operator-overloading, qlist

给定以下代码：

```
QList<Vertex*> _vertices; //this gets filled

//at some other point i want to check if there's already
//a vertex with the same payload inside the list
Vertex* v = new Vertex(payload);
int result = _vertices.indexOf(v);
if (result == -1){
    //add the vertex to the list
} else {
    //discard v and return pointer to match
}

//overloaded Vertex::operator==
bool Vertex::operator==(Vertex* other){
    //i return true if my payload and the others
    //payload are the same
} 
```

据我所知，indexOf() 永远不会调用我的 operator==。我认为这是因为 QList 封装了一个指针类型和 indexOf() 比较指针。有没有办法在 QList 中保留 ponters 并且仍然使用我自己的 operator==()？

像`Vertex*::operator==(Vertex* other)`

相关问题：[删除指针类型 Qlists](https://stackoverflow.com/q/7539084/1387061) | [由于指针类型而无法工作](https://stackoverflow.com/q/8924606/1387061)

**编辑**：意图。

两个顶点被认为是相等的 iff。它们的有效载荷携带的标识符是相等的。

`Vertex`是`Graph`类的一部分。我希望该类的客户能够调用`Graph::addEdge(Payload,Payload)`以填充图表。然后，图形对象负责将有效负载包装在顶点对象中并构建边。因此 Graph 需要检查封装给定有效负载的 Vertex 是否不存在。在编写代码时，使用 QList 似乎是“可能工作的最简单的事情”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:19:02.757

> 有没有办法在 QList 中保留 ponters 并且仍然使用我自己的 operator==()？

不，您需要 QList 首先取消引用指针，而事实并非如此。您必须继承 QList 才能做到这一点。但是，`indexOf()`只要使用迭代和比较，`operator==()`就没有什么能阻止你手动做同样的事情。

但是，所有这些看起来都像是代码异味。尝试在无序/非散列容器中查找某些内容是线性时间 - 与 QMap/QHash 相比非常慢。请编辑您的问题，描述您*为什么*要这样做，以及`Vertex`包含哪些数据，我们将看看社区是否可以提供更好的执行机制。

# c# - 使用不同的内容动态创建 2 个选项卡 wpf

> ID：10598775
> 
> 赞同：0
> 
> 时间：2012-05-15T10:27:06.730
> 
> 标签：c#, .net, wpf, wpf-controls

以下代码在单击按钮时创建 2 个选项卡，但不显示任何内容。我还在学习这个，想知道错误是什么。

背后的代码

```
public void button2_Click(object sender, RoutedEventArgs e)
{
    popUp1.IsOpen = false;

    Canvas canvas4 = new Canvas();
    ScrollViewer viewer4 = new ScrollViewer();
    viewer4.Content = canvas4;

    string txtfl = File.ReadAllText(textBox1.Text);
    TextBlock txbl1 = new TextBlock();
    txbl1.Text = txtfl;
    canvas4.Children.Add(txbl1);

    TabItem newTab1 = new TabItem();
    newTab1.Header = "Text File";
    newTab1.Content = viewer4;
    tabctrl1.Items.Add(newTab1);

    tabctrl1.SelectedItem = newTab1;

    Brush br = new SolidColorBrush(Colors.White);
    Canvas canvas2 = new Canvas();
    canvas2.Background = br;
    ScrollViewer viewer2 = new ScrollViewer();
    viewer2.Content = canvas2;

    TabItem newTab2 = new TabItem();
    newTab2.Header = "Test";
    newTab2.Content = viewer2;
    tabctrl1.Items.Add(newTab2);
} 
```

TabControl 是使用 XAML 创建的

XAML

```
<Window ... >
    <Grid>
        <Popup Name="popUp1" Width="500" Height="300" Placement="Center" IsEnabled="False" IsOpen="False">
            <Canvas x:Name="myCanvas1" Width="500"  Height="300" Visibility="Visible">
                <Button Content="Button" Height="38" HorizontalAlignment="Left" Margin="12,71,0,0" Name="button1" VerticalAlignment="Top" Width="151" Click="button2_Click" />                            
            </Canvas>
        </Popup>

        <TabControl Name="tabctrl1" Width="1345" Height="28" Margin="0,24,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" BorderThickness="2">
            <TabControl.Background>
                <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                    <GradientStop Color="#FF3A60AD" Offset="0.528"/>
                    <GradientStop Color="#FF6A85D8" Offset="0.01"/>
                </LinearGradientBrush>
            </TabControl.Background>                   
        </TabControl>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:53:35.327

嗨，您的代码似乎不起作用的原因是选项卡控件的高度设置为 28。

尝试将其更改为 280，您应该能够看到内容。

```
 <TabControl Name="tabctrl1" Width="1345" Height="280" Margin="0,24,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" BorderThickness="2"> 
```

# oracle - 在 Oracle 转储导入期间避免错误行

> ID：10598778
> 
> 赞同：0
> 
> 时间：2012-05-15T10:27:21.587
> 
> 标签：oracle, dump

我正在使用 Oracle 的`imp/exp`实用程序将数据库传输到另一台服务器。首先，我创建了一个与源数据库具有相同表空间的空数据库。

当我使用`full mode`导入的结果很好时，数据库工作正常，但由于现有的系统对象，我得到了大量的错误。这相当令人不安，我无法检查是否存在“真实”错误消息。可以使用一个选项，`ignore=Y`但根据[文档](http://docs.oracle.com/cd/B10500_01/server.920/a96652/ch02.htm#1014036)，这意味着表数据可能会重复。这听起来不太好。或者如果我只导入一次就不会重复？

我也可以使用`user mode`import 但根据[此表](http://docs.oracle.com/cd/B28359_01/server.111/b28319/exp_imp.htm#i1004890)在我看来，重要的部分不会以这种方式导入，我认为它也应该避免。

有什么解决办法？

我应该`expdp/impdp`改用，他们能解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:56:01.680

You should definitely use `expdp`/`impdp` for many reasons (usability, performance, etc.). Of course, it can unload/load whole database. You can use `TABLE_EXISTS_ACTION` to control what should happen (`SKIP | APPEND | TRUNCATE | REPLACE`) in tables are already in the target database. You can also use `EXCLUDE` parameter to avoid import of unchanged/unwanted schema objects.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:53:23.027

通常你只对某些模式感兴趣并且你不想导入系统模式。如果您的转储文件包含完整导出，您可以导入您感兴趣的架构，如下所示：

```
imp system/<password>@<database> file=yourdump.dmp fromuser=<user1>,<user2>...<user_n> 
```

# ruby-on-rails - 从日期时间获取月份

> ID：10598779
> 
> 赞同：0
> 
> 时间：2012-05-15T10:27:27.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想搜索某个月份的所有声明。“declaration_date”是一个日期时间属性。我有这个，但它失败了，有什么想法吗？

```
declaration = Declarations.all(:conditions => ['declaration_date.strftime("%-m") = 2') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:07:23.270

我希望 strftime 返回一个字符串，并且您将它与整数 2 进行比较。尝试将其与字符串 '2' 进行比较。

```
declaration = Declarations.all(:conditions => ["'declaration_date.strftime("%-m") = '2'") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:51:30.107

您想在特定年份的一个月内进行申报吗？如果是这样，请尝试以下操作：

```
time_range = (DateTime.new(2001,2,3) - 1.month)..DateTime.new(2001,2,3)
declaration = Declaration.where( 'declaration_date' => time_range ) 
```

您可以按照此技术在几年内的同一个月内获得声明。

另请参阅 Active Record 查询接口文档[http://guides.rubyonrails.org/active_record_querying.html的第 11.3 节](http://guides.rubyonrails.org/active_record_querying.html)

# iphone - 是否可以在没有 APNS 的情况下进行推送通知

> ID：10598780
> 
> 赞同：9
> 
> 时间：2012-05-15T10:27:28.223
> 
> 标签：iphone, ios, web-services, push-notification, apple-push-notifications

我需要知道是否可以在不使用 APNS 的情况下进行推送通知。

如果可以做到，最好的选择是什么？

Web服务器->pushNotification->设备

VoIP 应用程序呢？-->[我们可以在不使用 APN 的情况下推送通知吗？](https://stackoverflow.com/questions/5945170/can-we-push-notification-without-using-apns)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:31:58.700

不，没有 APNS 就无法使用推送通知。这是来自 Apple 的限制，并[在此处记录](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:30:24.143

在不使用 Apple 推送通知服务的情况下，无法以与内置推送通知显示相同的方式为您的应用程序显示推送通知。

您可能可以设置某种基于 Web 套接字的解决方案，但是当您的应用程序在后台时，这将不起作用，从而使这一点落空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:29:38.880

不，您不能在不使用 Apple 的推送通知服务的情况下向设备推送通知。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-15T11:15:28.600

看看[城市飞艇](http://urbanairship.com/)

> Push Composer 让组织中的任何人都可以轻松发送推送通知。通过将参与的力量交到您的业务团队手中，您可以使他们能够快速接触您的客户，而不会增加您的工程团队的压力。由于您可以在编写消息时预览消息，因此您将确切地知道用户将如何看待您的消息并与之互动。

# magento - 如何在 Magento 集合中选择具有相同名称和相同类别的产品

> ID：10598784
> 
> 赞同：2
> 
> 时间：2012-05-15T10:27:37.717
> 
> 标签：magento

如何创建一个集合以获取同一集合中具有相同名称（按名称分组）和相同类别（按类别分组）的所有产品？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:27:18.163

我不确定我是否清楚你想要什么。您可以使用 groupByAttribute 方法按名称对产品进行分组：

```
$_collection = Mage::getModel('catalog/product')->getCollection();
$_collection->addAttributeToSelect('*');
$_collection->groupByAttribute('name'); 
```

但是按类别分组并不是那么简单，因为一个产品可以属于多个类别。所以我不确定是否可能，您可能必须编写一些检查脚本逻辑。

* * *

但也许，您只想按名称获取产品

```
$_collection->addAttributeToFilter('name', 'My product name') 
```

并按类别获取产品：[Magento 产品按类别](https://stackoverflow.com/questions/272818/magento-products-by-categories)

* * *

阅读更多关于 Magento 集合的信息：http: [//www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)

# mysql - 如何从远程文件加载文件

> ID：10598785
> 
> 赞同：2
> 
> 时间：2012-05-15T10:27:39.990
> 
> 标签：mysql, import

如何从远程服务器加载具有“MySQL LOAD FILE”功能的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:57:14.490

# php - 基于距离的查询建议

> ID：10598787
> 
> 赞同：1
> 
> 时间：2012-05-15T10:27:47.063
> 
> 标签：php

好吧，自从iv不得不做这种复杂的事情以来已经有一段时间了，我有点难过。

我有一个库类，它接收一个邮政编码，并在输入的邮政编码的半径内返回一个关联的邮政编码数组，其中邮政编码作为键，与原始邮政编码的距离作为值。

例如：FK27DJ => 0.094146570284875

Web 应用程序是一个外卖餐厅查找器，我需要运行一个查询，以查找与输入的邮政编码最接近的每种类型的外卖。

基于 takeaway_type_id 字段有 4 种类型的外卖。因此，如果用户输入他们自己的邮政编码，则会向他们显示每种类型的单个外卖，这也是该类型与输入的邮政编码最接近的外卖。

所以我需要从库类中传入邮政编码数组，并在外卖表中搜索每种类型的最接近的外卖。

这有意义吗？

外卖表包含以下相关字段：

id(int), takeaway_type_id(int), 邮政编码

这可以在单个查询中完成吗？该网站是基于 php 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:34:01.133

是的。由于这看起来像英国邮政编码，因此您需要另一个将邮政编码映射到 GPS 坐标（经度和纬度）的表。你可以从这里得到。[http://jamiethompson.co.uk/web/2008/07/24/full-uk-postcode-database-for-free/](http://jamiethompson.co.uk/web/2008/07/24/full-uk-postcode-database-for-free/) （其他地方也可能有，请查看[http://www.freepostcodes.org。英国/](http://www.freepostcodes.org.uk/) )

然后你需要在 SQL 中做一个“选择”，加入两个表，计算你可以在 SQL 中做的距离。"SQRT(POWER(Long1 - long2,2) + POWER(Lat1 - Lat2,2))" 将为您提供大约距离。警告：由于需要对每一行进行计算，因此将可能的结果限制为 Long+-range、Lat+-range。

要获得准确的距离，您确实需要一些触发。这是我在最近的一个应用程序中使用的一个功能类似的功能，您应该能够对其进行按摩以使其工作，甚至可以构建到其他 SQL 查询中。

```
function CalculateDistance($Longitude1, $Latitude1, $Longitude2, $Latitude2) {
    // Not perfect for curvature of earth on the diaganol, but it's close enough ;)
    $LatDiff = abs($Latitude1 - $Latitude2);
    $LongDiff = abs($Longitude1 - $Longitude2);
    // Convert to meters - 1 deg latitude = 111.12km
    $mLatDiff = $LatDiff * 0.11112;
    $mLongDiff = $LongDiff * 0.11112 * cos(($Latitude1 + $Latitude2) / 2);
    // Work out difference.
    $Diff = sqrt( ($mLatDiff * $mLatDiff) + ($mLongDiff * $mLongDiff) );
    return $Diff;
} 
```

* * *

编辑：添加代码示例

未经测试的代码，但从最近的项目中编辑。需要语法检查和调整，但会给出想法。

```
$UserPostcode = "AB1 2FG";

// Find the Long/Lat of the user (you don;t have to do this, but it saves a lot of DB stress)
// Postcodes is the table that links users to postcodes
$sql = 'SELECT long, lat FROM postcodes WHERE postcode="' . mysql_real_escape_string($UserPostcode) .'"';
// ... Missing a few lines of check row exists, error reporting etc
$UserLat = $row['lat'];
$UserLong = $row['long'];

// Next, come up with an acceptable range so as not to over-stress the DB:
// What are the acceptable limits?
// 1 deg latitude = 111.12km
// LATITUDE: 1km = 1/111.2 degrees of latitude = 0.0089992800575953923686105111591073
// LONGITUDE: 1km = 1/(111.2 * cos(LATITUDE))

$RangeLat = 8 * 1/111.2; // For 8km = 5 miles. Work out what you want here, the larger = more DB stress
$RangeLong = 8 * 1/(111.2 * cos(deg2rad($UserLat)); // For 8km = 5 miles. Work out what you want here, the larger = more DB stress

// Now the query you want.
// You'll need to change this to get restauants by group, but this gives you the essence of what you need:

$sql = 'SELECT r.restaurant_id, r.OtherDetails, r.postcode,
                  p.lat, p.long,
                  SQRT(POWER(p.lat-'.$UserLat.',2) + POWER(p.long-'.$UserLong.',2)) AS distance 
           FROM resturants r
             LEFT JOIN postcodes p ON r.postcode=p.postcode
           WHERE p.lat >='.($UserLat - $RangeLat).' AND p.lat <='.($UserLat + $RangeLat).' AND p.long>='.($UserLong-$RangeLong).' AND p.long>='.($UserLong+$RangeLong).'
           ORDER BY SQRT(POWER(p.lat-'.$UserLat.',2) + POWER(p.long-'.$UserLong.',2)) ASC';
if (!$result = mysql_query($sql)) { ExitError(4, $sql . '<br />' . mysql_error()); }
while ($row = mysql_fetch_assoc($result)) {
        // This is where you can count the 4 in each category, and disregard if you get more that 4.
        // If you get less than 4, offer to expand the range - or stick in a loop and do it automatically.

        // Also for efficienty, I'd suggest you remove the "distance" calculation from the SQL and use the function above
        // The function above it more accurate as it users cosine. Then simply sort by distance here instead on in SQL.

        // Also note the above function is written for the northern hemisphere. Also won't work across the date line ;)
        // But that shouldn't be a worry.

}
mysql_free_result($result); 
```

但是 - 它可以在一个查询中完成：当然，如果你想关闭 SQL 服务器

同样，未经测试，但会给你做什么的要点。不过，我强烈建议不要这样做！

```
$sql = 'SELECT r.restaurant_id, r.OtherDetails, r.postcode,
                  p.lat, p.long,
                  SQRT(POWER(p.lat-p2.lat,2) + POWER(p.long-p2.long,2)) AS distance 
           FROM resturants r
             LEFT JOIN postcodes p ON r.postcode=p.postcode
             LEFT JOIN postcodes p2 ON p2.postcode="' . mysql_real_escape_string($UserPostcode) .'"
           ORDER BY SQRT(POWER(p.lat-p2.lat,2) + POWER(p.long-p2.long,2)) ASC'; 
```

// 如果你走那条路，并且你想要超级准确，我会让你弄清楚如何在那里获得 COS :)。您需要的 mySQL 函数是 RADIANS() 和 COS()

# ruby-on-rails - Rails 3.1 - 在编辑时显示表单值？

> ID：10598789
> 
> 赞同：2
> 
> 时间：2012-05-15T10:28:01.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我觉得这应该真的很简单，但我完全卡住了！

在一个表单中，我可能有一个如下字段：

```
<%= f.text_field :name, :class => "text" %> 
```

在编辑时，这会撤回在创建时提交的值，这很好。但我想防止某些字段被编辑。我知道我可以禁用或隐藏该字段，但我希望能够提取值以以其他方式显示和使用。我如何访问它们？

在这种情况下，我尝试了以下方法：

```
<%= f.track.name %>

<%= track.name %>

<%= @track.name %> 
```

但以上都不起作用！

有什么想法吗？

编辑：（我为此使用嵌套表单）

```
<%= form_for(@release, :html => { :multipart => true }) do |f| %>
    <h3>Upload Tracks for <%= @release.title %></h3>

    <%= f.fields_for :tracks do |builder| %>
    <%= render 'upload_track_fields', :f => builder %>
    <% end %>

<%= f.submit "Upload Tracks", :class => "submit" %>    
<% end %> 
```

以及渲染的upload_track_fields：

```
<%= f.text_field :position, :class => "text" %>
<%= f.text_field :name, :class => "text" %>
<%= f.text_field :isrc, :class => "text" %>
<%= f.text_field :version, :class => "text" %>
<%= f.file_field :track, :class => "text" %>
<%= f.hidden_field :primary_genre_id %>
<%= f.hidden_field :secondary_genre_id %>
<%= f.hidden_field :alt_primary_genre %>
<%= f.hidden_field :alt_secondary_genre %>
<%= f.hidden_field :asset_tier %>
<%= f.hidden_field :preview_start %>
<%= f.hidden_field :parental_advisory %>
<%= f.hidden_field :available_separately %>
<%= f.hidden_field :_destroy %> 
```

我隐藏了大部分字段以防止编辑，但仍需要查看一些字段，以便将它们保留为文本字段。我试图禁用它们，但这会停止任何更改（特别是文件上传）的工作。

简而言之，我更愿意将以上大部分内容显示为文本而不是表单字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:48:46.460

正如那些评论过的人所说，`<%= @track.name %>`如果您`@track = @release.track`在控制器的编辑方法中有（例如），我认为应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:51:12.123

在主窗体中：

```
<% index = 0 %>
<% f.fields_for :tracks do |builder| %>
  <%= @release.tracks[index].name %>
  <%= render 'upload_track_fields', :f => builder %>
  <% index += 1 %>
<% end %> 
```

在嵌套形式中：

```
<%= f.text_field :position, :class => "text" %>
# Notice that there's no "name" attribute
<%= f.text_field :isrc,     :class => "text" %>
<%= f.text_field :version,  :class => "text" %>
<%= f.file_field :track,    :class => "text" %> 
```

我在第一个片段中所做的很脏，但我从未使用过`fields_for`，所以我不知道如何获取实际索引。我查了谷歌，但到目前为止我还没有找到解决方案。

我现在不能试试，等我回家再试试。
我建议在找到获取索引的方法时使用它。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T21:04:47.810

您可以通过构建器访问关联的对象，而不是跟踪索引，它实际上是一个跟踪

```
<% f.fields_for :tracks do |builder| %>
  <%= builder.object.name %>
  <%= render 'upload_track_fields', :f => builder %>
<% end %> 
```

# assembly - 为什么我的中断处理程序没有触发？

> ID：10598790
> 
> 赞同：4
> 
> 时间：2012-05-15T10:28:03.517
> 
> 标签：assembly, x86, interrupt, interrupt-handling, bochs

我正在尝试在[Bochs](http://bochs.sourceforge.net/)中安装中断处理程序，但由于某种原因，我的中断处理程序没有触发。

首先我设置了一个断点：

```
00036440222i[CPU0 ] [36440222] Stopped on MAGIC BREAKPOINT
(0) [0x0000000000703044] 0008:00000000c0003044 (unk. ctxt): int3 
```

然后我尝试执行`int 3`.

但是，当我这样做时，错误显示`int_trap_gate(): selector null`，这似乎告诉我某个表中的选择器为空。

但是，GDT 如下所示：

```
<bochs:2> info gdt
Global Descriptor Table (base=0x0000000000007c08, limit=23):
GDT[0x00]=??? descriptor hi=0x00000000, lo=0x00000000
GDT[0x01]=Code segment, base=0x00000000, limit=0xffffffff, Execute/Read, Accessed, 32-bit
GDT[0x02]=Data segment, base=0x00000000, limit=0xffffffff, Read/Write, Accessed 
```

IDT 也是如此：

```
<bochs:3> info idt
Interrupt Descriptor Table (base=0x00000000c0101020, limit=2047):
IDT[0x00]=32-Bit Interrupt Gate target=0x0001:0xc0004148, DPL=0
IDT[0x01]=32-Bit Interrupt Gate target=0x0001:0xc0004154, DPL=0
IDT[0x02]=32-Bit Interrupt Gate target=0x0001:0xc0004160, DPL=0
IDT[0x03]=32-Bit Interrupt Gate target=0x0001:0xc000416c, DPL=0
IDT[0x04]=32-Bit Interrupt Gate target=0x0001:0xc0004178, DPL=0
IDT[0x05]=32-Bit Interrupt Gate target=0x0001:0xc0004184, DPL=0
IDT[0x06]=32-Bit Interrupt Gate target=0x0001:0xc0004190, DPL=0
IDT[0x07]=32-Bit Interrupt Gate target=0x0001:0xc000419c, DPL=0
IDT[0x08]=32-Bit Interrupt Gate target=0x0001:0xc00041a8, DPL=0
IDT[0x09]=32-Bit Interrupt Gate target=0x0001:0xc00041b0, DPL=0
IDT[0x0a]=32-Bit Interrupt Gate target=0x0001:0xc00041bc, DPL=0
IDT[0x0b]=32-Bit Interrupt Gate target=0x0001:0xc00041c4, DPL=0
IDT[0x0c]=32-Bit Interrupt Gate target=0x0001:0xc00041cc, DPL=0
IDT[0x0d]=32-Bit Interrupt Gate target=0x0001:0xc00041d4, DPL=0
IDT[0x0e]=32-Bit Interrupt Gate target=0x0001:0xc00041dc, DPL=0
IDT[0x0f]=32-Bit Interrupt Gate target=0x0001:0xc00041e4, DPL=0
IDT[0x10]=32-Bit Interrupt Gate target=0x0001:0xc00041f0, DPL=0
IDT[0x11]=32-Bit Interrupt Gate target=0x0001:0xc00041fc, DPL=0
IDT[0x12]=32-Bit Interrupt Gate target=0x0001:0xc0004208, DPL=0
IDT[0x13]=32-Bit Interrupt Gate target=0x0001:0xc0004214, DPL=0
IDT[0x14]=32-Bit Interrupt Gate target=0x0001:0xc0004220, DPL=0
IDT[0x15]=32-Bit Interrupt Gate target=0x0001:0xc000422c, DPL=0
IDT[0x16]=32-Bit Interrupt Gate target=0x0001:0xc0004238, DPL=0
IDT[0x17]=32-Bit Interrupt Gate target=0x0001:0xc0004244, DPL=0
IDT[0x18]=32-Bit Interrupt Gate target=0x0001:0xc0004250, DPL=0
IDT[0x19]=32-Bit Interrupt Gate target=0x0001:0xc000425c, DPL=0
IDT[0x1a]=32-Bit Interrupt Gate target=0x0001:0xc0004268, DPL=0
IDT[0x1b]=32-Bit Interrupt Gate target=0x0001:0xc0004274, DPL=0
IDT[0x1c]=32-Bit Interrupt Gate target=0x0001:0xc0004280, DPL=0
IDT[0x1d]=32-Bit Interrupt Gate target=0x0001:0xc000428c, DPL=0
IDT[0x1e]=32-Bit Interrupt Gate target=0x0001:0xc0004298, DPL=0
IDT[0x1f]=??? descriptor hi=0x00000000, lo=0x00000000
<...>
IDT[0xff]=??? descriptor hi=0x00000000, lo=0x00000000 
```

在我看来，IDT 条目具有有效的 GDT 选择器，所以我不明白执行中断时导致问题的原因：

```
<bochs:5> s                   ; step
(0).[36440222] [0x0000000000703044] 0008:00000000c0003044 (unk. ctxt): int3
CPU 0: Interrupt 0x03 occured (error_code=0x0000)
00036440222e[CPU0 ] int_trap_gate(): selector null
CPU 0: Exception 0x0d - (#GP) general protection fault occured (error_code=0x0000)
CPU 0: Interrupt 0x0d occured (error_code=0x0000)
00036440222e[CPU0 ] int_trap_gate(): selector null
CPU 0: Exception 0x0d - (#GP) general protection fault occured (error_code=0x0000)
CPU 0: Exception 0x08 - (#DF) double fault occured (error_code=0x0000)
CPU 0: Interrupt 0x08 occured (error_code=0x0000)
00036440222e[CPU0 ] int_trap_gate(): selector null
CPU 0: Exception 0x0d - (#GP) general protection fault occured (error_code=0x0000) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:44:46.123

这里：

```
IDT[0x03]=32-Bit Interrupt Gate target=0x0001:0xc000416c, DPL=0 
```

0x0001 是一个选择器值。它的 2 个最低有效位是`RPL`位。其余位用作段描述符表（GDT 或 LDT）的索引。这些位为 0。出于所有意图和目的，这是一个 NULL 选择器。

很可能你想要 8 个，而不是 1 个。

请参阅 CPU 文档以了解如何使用选择器。

# ruby-on-rails - $PATH 混淆 OSX Lion 上的 Postgres 和 Rails

> ID：10598793
> 
> 赞同：3
> 
> 时间：2012-05-15T10:28:19.460
> 
> 标签：ruby-on-rails, postgresql, path, gem

到目前为止，Rails 和我所有的 gem 文件 + homebrew 安装都运行良好。

我跑了

```
homebrew install postgresql 
```

并且几乎按照[此视频](http://railscasts.com/episodes/342-migrating-to-postgresql)中的指示遵循提示，但它一直给我错误消息，说有一个服务器已经在运行。我检查了

```
which psql 
```

在终端中，它报告了一个

```
 usr/bin 
```

位置而不是

```
usr/local/bin 
```

表明我使用的是 osx 附带的 postgres，而不是新的自制软件安装。

当我尝试启动数据库服务器时，我收到一条错误消息，指出服务器已经在运行。postgres 帮助文档中提到了此错误消息，但没有真正的工作解决方案。

尝试 brew doctor 确认我需要在 .bash_profile 中更改我的 PATH。

我在 .bash_profile 编辑的堆栈溢出中遇到了这个小片段。

```
export PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin 
```

我保存了文件并设法让 postgres 正常运行，但是当我开始一个新的 rails 应用程序时。

```
rails new blog -d postgresql 
```

它说

```
Rails is not currently installed on this system. To get the latest version, 
simply type:

$ sudo gem install rails

You can then rerun your "rails" command. 
```

在我将 bash_profile 文件改回之前的状态之前，任何安装尝试都不起作用。

如果我把它改回来，postgres 会再次出现同样的问题，说已经有一个服务器在运行。

另外我认为它可能是一个启动代理或其他东西，但我认为没有任何设置。

我想要么是在错误的地方安装了一些东西，要么我必须在 .bash_profile 中添加一些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T10:37:53.747

不要明确设置您的 $PATH 。您应该改为附加或预先添加：

```
# In your .bash_profile
export PATH="/usr/local/bin:$PATH" 
```

我的猜测是您使用 RVM 或 rbenv。如果您将路径显式更改为 /usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin 则 RVM 或 rbenv 将不会在您的路径中。

# javascript - $(" ").text(value).html 不是函数错误

> ID：10598794
> 
> 赞同：0
> 
> 时间：2012-05-15T10:28:19.897
> 
> 标签：javascript, jquery, dom

我`$("<div/>").text(value).html is not a function`在下面的代码中收到错误：

```
function htmlEncode(value) { 
    return $('<div/>').text(value).html(); 
}

function startImageUpload(imageuploadform, imagefilename){

    $('.imagef1_cancel').eq(window.lastUploadImageIndex).html(
        '<div>' + 
        htmlEncode(imagefilename) + 
        '<button type="button" class="imageCancel" cancel_image_file_name="' + 
        imagefilename + 
        '">CANCEL</button></div>'
    );

    return true;
} 
```

如何修复此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:32:46.307

的输出

```
$('<div/>').text(value) 
```

是一个字符串而不是一个 Jquery 对象。

你试过这个吗

```
$($('<div/>').text(value)).html(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:58:11.733

该代码本身可以正常工作：

[http://jsfiddle.net/Guffa/aae24/](http://jsfiddle.net/Guffa/aae24/)

您应该检查发送给函数的字符串中是否有任何奇怪的东西，这可能会弄乱所创建的代码。虽然我尝试了一些不同的值，但您可以轻松地破坏生成的标记（因为您只在一个地方对值进行 html 编码，而不是在另一个地方），但是`htmlEncode`无论您向它抛出什么，该函数似乎仍然可以在没有错误消息的情况下运行。

您还可以检查该`$.html`属性实际上仍然是一个函数，这样您就不会在某处意外更改它。字符串值返回函数代码：

```
alert($().html); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:33:15.960

我不确定你想要什么，但错误肯定在这一行

```
 return $('<div/>').text(value).html(); 
```

如果您想将该图像值包装在一个 div 中，只需使用 |

```
function htmlEncode(value) { 
    return '<div><img src="'+value+'"/></div>'; //wrapping  it as an image most probably you want this
} 
```

# datepicker - Yii 问题中的 CJuiDatePicker 小部件

> ID：10598795
> 
> 赞同：2
> 
> 时间：2012-05-15T10:28:22.930
> 
> 标签：datepicker, yii, options

我正在尝试将 DatePicker 集成到编辑时生成的 CRUD 表单当我将名称作为数组（如 textField 生成）时，它不会弹出日历如果我使用简单的名称（非数组）它可以工作......如果我完全退出这个名字就行不通了

我正在使用 Yii 1.8

这是我的代码

```
 $this->widget('zii.widgets.jui.CJuiDatePicker', array(
    // 'name'=>'birthdate',
     'name'=>"MainVendorsInvoices[issued_date]", // the name of the field
     'value'=>$model->issued_date,  // pre-fill the value
     // additional javascript options for the date picker plugin
     'options'=>array(
            'dateFormat'=>'yy-mm-dd',
            'defaultDate'=>$model->issued_date,
            'buttonImage'=>Yii::app()->baseUrl.'/images/icons.date.png',
            'buttomImageOnly'=>true,
            'buttonText'=>'Select',
            'showAnim'=>'fold',
            'showOn'=>'button',
            'showButtonPanel'=>false,
            'yearRange'=>'1900',
     'debug'=>true,

    ),
     'htmlOptions'=>array(
     'style'=>'height:20px;'
     ),
     )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:37:39.827

查看页面上是否有同名的文本字段，例如。在高级搜索表单中。

如果您在同一页面上有两个名称相同的字段，则 datepicker 将仅显示其中一个字段。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:52:42.887

[让 yii 使用父 CJuiInputWidget 类](http://www.yiiframework.com/doc/api/1.1/CJuiInputWidget#model-detail "http://www.yiiframework.com/doc/api/1.1/CJuiInputWidget#model-detail")`model`的属性自动为您决定名称，因此您可以这样做：

```
$this->widget('zii.widgets.jui.CJuiDatePicker', array(
 'model'=>$model,
 // 'value'=>$model->issued_date,  // pre-fill the value
 // instead of 'value' use 'attribute'
 'attribute'=>'issued_date', 
 // additional javascript options for the date picker plugin
 'options'=>array(
        'dateFormat'=>'yy-mm-dd',
        'defaultDate'=>$model->issued_date,
        'buttonImage'=>Yii::app()->baseUrl.'/images/icons.date.png',
        'buttomImageOnly'=>true,
        'buttonText'=>'Select',
        'showAnim'=>'fold',
        'showOn'=>'button',
        'showButtonPanel'=>false,
        'yearRange'=>'1900',
 'debug'=>true,

),
 'htmlOptions'=>array(
 'style'=>'height:20px;'
 ),
 )); 
```

**编辑：**
由于您正在修改生成的表单，您可以将上面的部分放在 gii 生成的 textField 的位置，并让该字段的其他行保持不变，例如：

```
<?php echo $form->labelEx($model,'issued_date'); ?>
<?php $this->widget('zii.widgets.jui.CJuiDatePicker'), array(// your datepicker options
  );?>
<?php echo $form->error($model,'issued_date'); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:45:24.070

```
<?php
    $this->widget(
        'zii.widgets.jui.CJuiDatePicker',
        array(
            'name' => 'order_date',
            'value'=>Yii::app()->getRequest()->getParam("order_date"),
            'language' => Yii::app()->language == 'et' ? 'et' : null,
            'options' => array(
                'showAnim' => 'fold', // 'show' (the default), 'slideDown', 'fadeIn', 'fold'
                'showOn' => 'button', // 'focus', 'button', 'both'
                'buttonText' => Yii::t('ui', 'Select form calendar'),
                'buttonImage' => Yii::app()->request->baseUrl . '/images/calendar.png',
                'buttonImageOnly' => true,
            ),
            'htmlOptions' => array(
                'style' => 'width:80px;vertical-align:top'
            ),
        )
    );
?> 
```

# indexing - 我们怎么知道 monetDB 正在使用索引？

> ID：10598796
> 
> 赞同：2
> 
> 时间：2012-05-15T10:28:26.620
> 
> 标签：indexing, explain, monetdb

我已经将 1.5 亿条记录加载到 MonetDB 中。插入到单个表中的所有数据。该表没有任何约束（例如`UNIQUE`，..）。我自己没有创建任何索引。原始源 CSV 文件约为 7.2 GB，导入数据库后约为 8 GB。我跑了一个`COUNT(*)`with `WHERE`，它在 12 秒内返回。根据文档：

> SQL 标准中的索引语句是公认的，但其实现与竞争产品不同。MonetDB/SQL 将这些语句解释为建议，并且经常随意忽略它，依靠自己的决定来创建和维护索引以实现快速访问。

现在怎么知道 MonetDB 自己创建了索引呢？我用过`EXPLAIN`但我不明白输出：这是实际的查询：

```
EXPLAIN SELECT COUNT(*) FROM vbvdata WHERE vbvdata_speed > 80 AND vbvdata_lane_id = 2; 
```

这是`EXPLAIN`输出：

```
+--------------------------------------------------------------------------------+
| mal                                                                            |
+================================================================================+
| function user.s11_1{autoCommit=true}(A0:bte,A1:bte):void;                      |
|     X_4 := sql.mvc();                                                          |
|     X_46:bat[:oid,:bte]  := sql.bind(X_4,"sys","vbvdata","vbvdata_speed",0);   |
|     X_38:bat[:oid,:bte]  := sql.bind(X_4,"sys","vbvdata","vbvdata_speed",2);   |
|     X_48 := algebra.kdifference(X_46,X_38);                                    |
|     X_49 := algebra.kunion(X_48,X_38);                                         |
|     X_32:bat[:oid,:bte]  := sql.bind(X_4,"sys","vbvdata","vbvdata_speed",1);   |
|     X_50 := algebra.kunion(X_49,X_32);                                         |
|     X_18:bat[:oid,:oid]  := sql.bind_dbat(X_4,"sys","vbvdata",1);              |
|     X_19 := bat.reverse(X_18);                                                 |
|     X_51 := algebra.kdifference(X_50,X_19);                                    |
|     X_25:bat[:oid,:bte]  := sql.bind(X_4,"sys","vbvdata","vbvdata_lane_id",0); |
|     X_27 := algebra.uselect(X_25,A1);                                          |
|     X_23:bat[:oid,:bte]  := sql.bind(X_4,"sys","vbvdata","vbvdata_lane_id",2); |
|     X_28 := algebra.kdifference(X_27,X_23);                                    |
|     X_24 := algebra.uselect(X_23,A1);                                          |
|     X_29 := algebra.kunion(X_28,X_24);                                         |
|     X_21:bat[:oid,:bte]  := sql.bind(X_4,"sys","vbvdata","vbvdata_lane_id",1); |
|     X_22 := algebra.uselect(X_21,A1);                                          |
|     X_30 := algebra.kunion(X_29,X_22);                                         |
|     X_31 := algebra.kdifference(X_30,X_19);                                    |
|     X_52 := algebra.semijoin(X_51,X_31);                                       |
|     X_53 := algebra.thetauselect(X_52,A0,">");                                 |
|     X_55 := algebra.kdifference(X_53,X_38);                                    |
|     X_41 := algebra.semijoin(X_38,X_31);                                       |
|     X_42 := algebra.thetauselect(X_41,A0,">");                                 |
|     X_56 := algebra.kunion(X_55,X_42);                                         |
|     X_35 := algebra.semijoin(X_32,X_31);                                       |
|     X_36 := algebra.thetauselect(X_35,A0,">");                                 |
|     X_57 := algebra.kunion(X_56,X_36);                                         |
|     X_58 := algebra.kdifference(X_57,X_19);                                    |
|     X_59 := algebra.markT(X_58,0@0:oid);                                       |
|     X_60 := bat.reverse(X_59);                                                 |
|     X_12:bat[:oid,:lng]  := sql.bind(X_4,"sys","vbvdata","vbvdata_id",0);      |
|     X_10:bat[:oid,:lng]  := sql.bind(X_4,"sys","vbvdata","vbvdata_id",2);      |
|     X_14 := algebra.kdifference(X_12,X_10);                                    |
|     X_15 := algebra.kunion(X_14,X_10);                                         |
|     X_6:bat[:oid,:lng]  := sql.bind(X_4,"sys","vbvdata","vbvdata_id",1);       |
|     X_16 := algebra.kunion(X_15,X_6);                                          |
|     X_61 := algebra.leftjoin(X_60,X_16);                                       |
|     X_62 := aggr.count(X_61);                                                  |
|     sql.exportValue(1,"sys.vbvdata","L1":str,"wrd",64,0,6,X_62,"");            |
| end s11_1;                                                                     |
| # optimizer.mitosis()                                                          |
| # optimizer.dataflow()                                                         |
+--------------------------------------------------------------------------------+ 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-01T21:40:55.850

一般来说，您无法知道 MonetDB 何时创建/使用索引。这是根据每个运算符调用动态确定的。

# php - 命令行和 GUI 转换之间的差异（*.html、*.odt、*.doc）

> ID：10598801
> 
> 赞同：0
> 
> 时间：2012-05-15T10:28:55.203
> 
> 标签：php, html, file, type-conversion

我接手了一个应用程序的开发，使用户能够下载一些报告。
系统设置如下：

*   使用 php 检索的数据创建一个 *.html 文件。
*   将 *.html 文件的所有内容复制到 *.doc 文件中（不是真正的 *.doc 文件，只是扩展名为“.doc”的 *.html 文件）。
*   *.doc 可供下载。

我知道创建报告文件是一个奇怪的解决方案，而且我在设置 CSS 以在 *.doc 文件中正常工作时遇到了很多困难。
例如，现在我需要将边距设置为 0cm，但是当然，当我在 OpenOffice、LibreOffice、MSWord 等文本编辑器中打开生成的 *.doc 时，他在 WEB 模式下打开 CSS 边距设置为 0cm 工作正常。但是，用户需要在标准模式下打开文件（就像一个真正的 *.doc 文件）并且不想做一些操作来转换文档，或者将边距设置为 0 厘米（...）。

因此，我找到了在 *.odt 中转换 *.html 或 *.doc 文件、解压缩 *.odt 文件、修改文件“styles.xml”的解决方案，它允许我将“标准”边距设置为0cm，然后，重新保存为*.doc 格式。
这个解决方案效果很好，但是，我只在我的 PC 上使用 LibreOffice GUI 实现了这一点。

当我尝试使用命令行中的任何程序（甚至是 LibreOffice 转换模块）转换 *.odt 中的 *.html 或 *.doc 文件时，*.odt 文件与我使用 LibreOffice GUI 时的文件不同。所以我尝试了其他转换脚本，如：

*   潘多克
*   abiword
*   ooconvert

那么，有没有办法将我的 *.html 文件正确转换为 *.odt 文件？或者另一种让我做我想做的事的方式？
谢谢。

**编辑/解决：**

与[JODConverter](http://artofsolving.com/opensource/jodconverter/guide "JOD转换器")一起使用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:31:49.263

如果您想保留 HTML，我仍然会维护 LiveDocx 可能只是有用的。我做了更多的挖掘，偶然发现了[phpdocx](http://www.phpdocx.com/archives/2158)。在页面底部有一个链接，向您展示如何嵌入 HTML。
LiveDocX 和 phpdocx 都在各自的站点上提供了示例。我建议你浏览这些。

SO也出现了几次：有趣的问题可能是：

*   [OpenTbs 将 html 标签转换为 MS Word 标签](https://stackoverflow.com/questions/9315531/opentbs-convert-html-tags-to-ms-word-tags)
*   [如何使用 php 将 docx 文档转换为 html？](https://stackoverflow.com/questions/4587216/how-can-i-convert-a-docx-document-to-html-using-php)

我知道后者与你想要做的相反，但不要仅仅因为这个原因就把它写下来。通常，从另一个角度看待事物会很有帮助。

由于您的最后一条评论使我相信您实际上还没有开始编码（`I just need a script etc...`），所以我想说 SO 不是代码生成器。当您阅读完有关 phpdocx 和 livedocx 的内容后，也许您应该阅读[什么是好问题](https://stackoverflow.com/questions/how-to-ask)。

我想，我[在这里](http://corymathews.com/saving-a-php-file-as-a-word-document/)找到了你要找的东西。如果您想使用 php-cli，我的猜测是将您的脚本的输出流设置为一个文件，并使用下面找到的标头（从链接复制粘贴）。

```
 header("Content-type: application/vnd.ms-word");
    header("Content-Disposition: attachment; Filename=SaveAsWordDoc.doc"); 
```

抱歉，如果我遇到了有点苛刻的评论，关于 SO 不是代码生成器的评论，以及指向“什么是好问题”的链接。不是要揍你的。

**更新**

抱歉，前面的示例只能用作下载链接：下面是一个基于 html 字符串生成 .doc 文件的工作脚本：

```
#!/bin/php -n
<?php
    $opts = array('file'=>array('header'=>'Content-type: application/vnd.ms-word'."\r\n".'Content-type: application/vnd.ms-word'."\r\n"));
    $resource = stream_context_create($opts);
    $doc = fopen('asDoc.doc','w+',false,$resource);
    if (!$doc)
    {
        die('FFS');
    }
    $html='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">';
    $html .='<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=Windows-1252\"><title>Foo</title></head><body><h1>Hello, world</h1></body></html>';
    fwrite($doc,$html);
    fclose($doc);
    exit();
?> 
```

标头在上下文流中定义，因此前两行代码至关重要。与`<meta http-equiv=\"Content-Type\" content=\"text/html; charset=Windows-1252\">`元标记一样。其他都是很基本的。
您需要的所有功能都在这里，所以如果您想知道什么是什么，请参阅他们的手册页以获取更多信息......

祝你好运

# assembly - 引导过程中的 SP 应该使用哪个值？

> ID：10598802
> 
> 赞同：3
> 
> 时间：2012-05-15T10:28:58.557
> 
> 标签：assembly, x86, boot, bootloader

BIOS 中的引导程序会将它找到的第一个有效 MBR 加载到地址 0x7C00 处的计算机物理内存中。

引导过程中的 SP 应该使用哪个值？

```
org 7c00h      ; set location counter.
mov ax, XXX    ; What is XXX?
mov sp, ax
; Now PUSH an POP are safe 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T00:51:09.173

0000:0500 到 0007:FFFF 保证免费使用。正确的初始化如下所示：

```
org 0x0600
...

cli
xor ax, ax
mov ds, ax
mov es, ax
mov ss, ax
mov sp, 0x7C00

; relocate itself
mov si, sp
mov di, 0x0600
mov cx, 256
rep movsw

; make sure we'are at 0000:0600+x
jmp 0:.reloc
.reloc:
push 2
popf    ; flags with all off 
```

我使用 7C00，堆栈向下，代码向上。您可以将 7C00 替换为上述任何有效范围，只要确保不覆盖您自己的代码/数据。

顺便说一句，大多数 MBR 会按照传统将自身重新定位到 0000:0600，并将 VBR 链式加载到 7C00。

还要注意 jmp .reloc，一些有问题的 BIOS 以 07C0:0000 启动 MBR，所以那里的 jmp 确保 CS=0

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T14:29:42.327

任何值`SS:SP`只要有足够的堆栈空间供您的代码**和**中断服务例程使用即可。

而且，当然，您的堆栈不应与您的任何代码或其他数据发生冲突，也不应运行到 ROM 或内存映射的设备地址范围内。

BIOS 不保证`SS:SP`您的引导扇区会收到什么。所以，只改变`SP`是不对的。

例如，您可以这样做（如果此位置没有您的任何代码或数据）：

```
...
mov ax, 0
mov ss, ax
mov sp, ax
... 
```

这将设置`SS:SP`为 0:0。不要惊慌。下一次推送将首先`SP`从 0 递减到 0xFFFE 并写入 0:0xFFFE，而不是 0:0。

这将在引导扇区的末尾和最大堆栈指针地址之间为您提供 0x10000 - (0x7c00 + 0x200) = 33280 字节的空间。这是足够的堆栈空间。

另请注意，当同时更改`SS`and时`SP`，您要么必须在禁用中断的情况下执行此操作，要么先更改`SS`然后`SP`在紧随其后的指令中更改（如上所示）。

或者，您可以使用该`LSS SP, ...`指令，但它将远地址的地址作为参数，这意味着您的新`SS:SP`值首先需要位于内存中的某个位置。

`SS`改变and的另一种方法`SP`是使用`PUSH`and `RETF`。

# android - AsyncTask 从纵向更改为横向后无法修改 UIThread

> ID：10598808
> 
> 赞同：-1
> 
> 时间：2012-05-15T10:29:12.693
> 
> 标签：android, android-asynctask, ui-thread

在我的应用程序中，我开始`AsyncTask`下载一些数据，并在 UI 线程上启动`ProgressDialog`. 问题是当我从纵向更改为横向或反之亦然时，在`onPostExecute`任务中我无法关闭`ProgressDialog`. 该`dismiss()`函数在 的实例上调用`ProgressDialog`，但不会关闭。这是为什么？

谢谢

**编辑 ：**

我想我失去了 AsyncTask 线程中当前活动的引用。这可能吗？如果是，我该如何解决？

**编辑：** 我不能保留 asyncTask 的引用并将其放入包中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:41:00.813

在 onPostExecute 方法中单独使用 Handler 来关闭 ProgressDialog，如下所示：

```
 private Handler finishedHandler = new Handler()
{
    @Override 
    public void handleMessage(Message msg) {
        Progressdialog.dismiss();
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:37:28.357

尝试使用`android:configChanges`活动的属性使其在切换方向时不重新创建。

# macos - 如何在 OSX 10.7.4 中从显示器睡眠中唤醒？

> ID：10598809
> 
> 赞同：2
> 
> 时间：2012-05-15T10:29:15.623
> 
> 标签：macos, power-management

在最新版本的 OSX Lion 中，如何将机器从显示睡眠中唤醒？这是对网络活动的响应。

在 10.7.3 中，这可以通过以下调用实现：

```
IOPMAssertionID id = 0;
IOPMAssertionCreateWithName(kIOPMAssertionTypeNoDisplaySleep,
                            kIOPMAssertionLevelOn, reason, &id) 
```

但是，这在 10.7.4 中不起作用。可以做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T19:36:59.847

我尚未测试性能影响或与空闲计时器本身的交互，但是：

```
io_registry_entry_t regEntry = IORegistryEntryFromPath(kIOMasterPortDefault, "IOService:/IOResources/IODisplayWrangler");
if (regEntry != MACH_PORT_NULL) {
        IORegistryEntrySetCFProperty(regEntry, CFSTR("IORequestIdle"), kCFBooleanFalse);
        IOObjectRelease(regEntry);
} 
```

在 10.7.4 中工作以将屏幕从空闲状态唤醒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-15T18:58:22.570

从[文档](https://developer.apple.com/documentation/iokit/iopmlib.h)中可以看出，这些天“唤醒”显示器的方法是：

```
IOPMAssertionID assertionID2;
IOPMAssertionDeclareUserActivity(CFSTR("Your reasoning"),
       kIOPMUserActiveLocal, &assertionID2); 
```

*如果它已经打开，*那么问题的`IOPMAssertionCreateWithName(...)`原始方式只是“防止显示器进入睡眠状态” （尽管它确实有效并且也可以用来防止它在一段[时间内](https://stackoverflow.com/a/5596946/32453)*进入*睡眠状态）。

 **用于“保持”显示的 docs 方法的工作方式与`IOPMAssertionCreateWithName`

```
IOPMAssertionID m_disableDisplaySleepAssertion;    
IOReturn success2 = IOPMAssertionCreateWithDescription(
  kIOPMAssertionTypePreventUserIdleDisplaySleep, reasonForActivity, NULL, NULL, NULL, 0, NULL, &m_disableDisplaySleepAssertion); 
if (success2 == kIOReturnSuccess) {
    // screen will stay on, do you work
    success = IOPMAssertionRelease(m_disableDisplaySleepAssertion);
} 
```

如果你想“打开它并永远保持它”，然后`IOPMAssertionDeclareUserActivity`按照上面的方法，或者只是`IOPMAssertionDeclareUserActivity`以某种方式一遍又一遍地调用。

您还可以调用`caffeinate`我想的内置命令行实用程序:)**

# php - 使用 post 和响应将 NSMuatbleArray 从 iPhone 获取到 PHP

> ID：10598819
> 
> 赞同：0
> 
> 时间：2012-05-15T10:29:47.697
> 
> 标签：php, objective-c, ios, ipad

> **可能重复：**
> [使用 ASIFormDataRequest 将 json 发送到 php](https://stackoverflow.com/questions/10774201/send-json-to-php-using-asiformdatarequest)

我是 Objective-c 和 iOS 开发的新手。

我想`NSMutableArray`从 iPhone 向 PHP 发送一个，然后再次取回并使用 NSLog 打印它，以确保该数组已成功发送。

我使用了以下代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    NSString *phpUrl = @"http://dt-works.com/eman/bookMarks.php";

    NSMutableArray *arrayKey = [[NSMutableArray alloc] initWithObjects:@"one", @"two", @"three", nil];
    NSMutableArray *arrayValue1 = [[NSMutableArray alloc] initWithObjects:@"1", @"2", @"3", nil]; 
    NSMutableArray *arrayValue2 = [[NSMutableArray alloc] initWithObjects:@"11", @"22", @"33", nil]; 

    NSDictionary *theReqDictionary1 = [NSDictionary dictionaryWithObjects:arrayValue1 forKeys:arrayKey];
    NSDictionary *theReqDictionary2 = [NSDictionary dictionaryWithObjects:arrayValue2 forKeys:arrayKey];

    NSMutableArray *myArray = [NSMutableArray arrayWithObjects:theReqDictionary1,theReqDictionary2, nil];

    NSString *jsonString = [myArray JSONRepresentation];

    NSLog(@"%@", jsonString);

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:phpUrl]];

     NSString *post = [[NSString alloc] initWithFormat:@"jsonString=%@&submit=", jsonString];
    //NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:NO];

    [request setHTTPMethod:@"POST"];

    [request setHTTPBody:[post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:NO]];

    SBJsonParser *parser = [[SBJsonParser alloc] init];

    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];

    NSArray *statuses = [parser objectWithString:json_string error:nil];
    int arraySize = [statuses count];

    NSMutableArray *number = [[NSMutableArray alloc] init];

    for (NSDictionary *status in statuses)
    {

        NSString *onee = [status objectForKey:@"one"];
        NSString *twoo = [status objectForKey:@"two"];
        NSString *threee = [status objectForKey:@"three"];

        [number addObject:status];

        NSLog(@"------------------ from browser-----------------------------------");
        NSLog(@"myOne %@ - myTwo: %@ - myThree: %@ ",onee ,twoo, threee);

    }

    NSLog(@"size of array is: %d", arraySize);
    NSLog(@"size of them is: %d", [number count]);
} 
```

在 PHP 中，我编写了以下代码：

```
<?php
    header('Content-type:text/html;charset=utf-8');
    if (isset($_POST['submit'])) {
        $jsonString = $_POST['jsonString'];
        print_r($jsonString);
    }
?> 
```

输出是：

```
[{"one":"1","two":"2","three":"3"},{"one":"11","two":"22","three":"33"}]

size of array is: 0

size of them is: 0 
```

数组的大小应该是2，我的代码有什么问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:36:20.617

也许您应该在 print 之前使用 json_decode ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:40:45.870

从做一个开始[`var_dump`](http://se.php.net/manual/en/function.var-dump.php)PHP 而不是`print_r`. 然后[解码 JSON 对象](http://se2.php.net/manual/en/function.json-decode.php)！

*更新*
后

```
[...]
NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
[...] 
```

添加以下内容：

```
SBJSON *json = [SBJSON new];
NSError *jsonError;
NSDictionary *parsedJSON = [json objectWithString:json_string error:&jsonError];

int arraySize = [parsedJSON count];

NSMutableArray *number = [[NSMutableArray alloc] init];

for (NSDictionary *status in parsedJSON)
{

    NSString *onee = [status objectForKey:@"one"];
    NSString *twoo = [status objectForKey:@"two"];
    NSString *threee = [status objectForKey:@"three"];

    [number addObject:status];

    NSLog(@"------------------ from browser-----------------------------------");
    NSLog(@"myOne %@ - myTwo: %@ - myThree: %@ ",onee ,twoo, threee);

} 
```

我认为这可能会奏效。咬在我的头顶上，但试一试。

# emacs - minibuffer 输入：使用自定义词典完成单词

> ID：10598820
> 
> 赞同：5
> 
> 时间：2012-05-15T10:29:47.843
> 
> 标签：emacs, autocomplete, elisp

我正在尝试接受 emacs 中命令行实用程序的用户输入。我有一些可以在这个命令行中使用的单词（类似于 make 调用的可能目标列表），并且我希望能够自动完成我知道的单词，允许用户输入我的字典中有多个条目，并且还允许用户写不在我的字典中的东西。一些允许使用自定义字典在 minibuffer 中完成单词的库就是这样。

我不需要完整的解决方案，但非常感谢您提供一些关于从哪里开始寻找的指示。此外，我宁愿避免使用侵入性库，例如`icicles`或`ido`尽可能避免使用 - 我不希望此软件包的用户在配置其余设置的方式上受到限制。

到目前为止，我最好的解决方案是`completing-read`对每个目标多次使用，直到用户输入空字符串。

## 解决方案

event_jr 在下面的回答成功了。我使用的最终代码如下所示：

```
(require 'crm)
(let ((crm-separator " ")
      (crm-local-completion-map (copy-keymap crm-local-completion-map)))
  (define-key crm-local-completion-map " " 'self-insert-command)
  (completing-read-multiple "prompt: " '("foo" "foobar" "baz")))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T10:46:00.257

这个怎么样：

```
(completing-read-multiple ": " '("foo" "foo2" "foobar")) 
```

# ocaml - Ocaml 高效快速排序

> ID：10598823
> 
> 赞同：7
> 
> 时间：2012-05-15T10:29:54.923
> 
> 标签：ocaml, quicksort

我想知道如何编写一个高效的快速排序版本， **其中列表一次分区**。

我有这段代码，

```
 let rec quicksort' = function
[] -> []
| x::xs -> let small = List.filter (fun y -> y < x ) xs
           and large = List.filter (fun y -> y > x ) xs

in quicksort' small @ (x :: quicksort' large);; 
```

但在这里，我浏览列表不止 1 次（对小型和大型调用 2 次快速排序）。

我们的想法是**只需一步**即可完成，而不需要超过 1 次。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-15T11:06:44.967

[List.partition](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html)是要走的路：

```
let rec quicksort = function
    | [] -> []
    | x::xs -> let smaller, larger = List.partition (fun y -> y < x) xs
               in quicksort smaller @ (x::quicksort larger) 
```

请注意，这`List.partition`有助于避免一次冗余遍历`xs`. 您仍然必须递归地对较小的部分和较大的部分进行排序，因为这是快速排序的工作方式。

不得不说，这个版本的`quicksort`效率还差得很远。[快速排序算法](http://en.wikipedia.org/wiki/Quicksort)是一种固有的就地算法，它递归地改变输入数组。另一个因素是支点选择。选择第一个元素作为枢轴并不总是一个好主意。

这些因素导致效率的实现截然不同（可能使用`Array`和变异）。应该`List`使用快速排序来展示算法的思想及其递归的美妙之处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T20:46:24.570

如果您需要编写一个高效的排序函数，您可能需要阅读这篇有见地的论文：[Engineering a sort function](http://www.cs.fit.edu/~pkc/classes/writing/samples/bentley93engineering.pdf)。否则，我很确定[List.sort](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html)也写得很好。

# ios - 开发 iPhone 应用付费版的试用版

> ID：10598829
> 
> 赞同：1
> 
> 时间：2012-05-15T10:30:19.323
> 
> 标签：ios, iphone, app-store

我有一个 iPhone 应用程序，可在应用程序商店免费获得。现在我想制作相同的应用程序来付费。到那时没问题。但摆在我面前的挑战是发布同一应用程序的试用版，其中很少有功能被禁用或根本没有显示。我想要的是在试用应用程序上放置一个按钮，该按钮将用户带到付费版本的应用商店。

这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:34:11.977

```
- (IBAction) openPremierVersionAppStore {
  [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"itms://itunes.apple.com/us/app/shaifgupta/app_id"]];
} 
```

# jquery - 移动 HTML5 SVG 路径

> ID：10598830
> 
> 赞同：4
> 
> 时间：2012-05-15T10:30:22.517
> 
> 标签：jquery, html, svg, jquery-svg

我的应用程序中有一个 SVG 路径元素，例如：

```
<path d="M100,100 Q200,400,300,100"/> 
```

在按钮单击中，我必须将此路径向左移动，例如，从 100 到 200。我通过变换做到了：

```
$('.path').each(function () {
    $(this).attr('transform', 'translate(100, 0)');
}); 
```

但是，在下一次单击时它不会移动。如何让路径元素在每次点击时移动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T11:12:09.960

翻译将尝试再次做同样的事情。您需要将值存储在变量中并使用它：

```
var x=0;
$('.path').each(function () {
   x += 100;
   $(this).attr('transform', 'translate('+x+', 0)');
}); 
```

这个例子表明你可以在每次点击时将它向右移动 100，所以锻炼你想要应用到 x 的东西，你应该会笑。

# php - 根据下拉列表选择更新价格

> ID：10598833
> 
> 赞同：1
> 
> 时间：2012-05-15T10:30:37.057
> 
> 标签：php, sql, drop-down-menu

我有一个由 mysql 填充的下拉列表，工作正常，我也让它显示 mysql 设置的价格，到目前为止我很高兴。

问题是什么，因为它是一个多重下拉列表，它只会显示首先选择的内容，如果我选择 2 个或更多选项，则只显示第一个价格。

我的第二个问题是我希望价格加起来，即第一个选择的价格是 1.99 英镑，第二个选择的价格是 2.99 英镑，所以总价应该是 4.98 英镑

最后，一旦我完成了所有这些工作，我想将其继续到第二/第三/第四下拉框，以便所有框加起来给我一个总和。

**这是我的 html 代码，向您展示我正在使用的内容：**

```
<form method="post" action="" name="form1">
  <? 
  include 'classes.php';
  $query="SELECT * FROM Sex_Table";
  $result=mysql_query($query);
  ?>
  <select data-placeholder="Your Favorite Football Team"  class="chzn-select" multiple tabindex="6" id="Sexdiv" name="Sexdiv" style="width: 300px;" onChange="getClothing(this.value),changePrice()">
  <option>Select Colour Type</option>
  <? while($row=mysql_fetch_array($result)) { ?>
  <option value=<?=$row['ID']?> sex_price="<?=$row['Price']?>"><?=$row['Sex_Name']?>&nbsp;(£<?=$row['Price']?>)</option>
  <? } ?>
  </select><br /><br />
  <p id="Clothingdiv">
  <select style="width: 300px;" name="Clothing" disabled='disabled'>
  <option>Select Sex First</option>
  </select>
  </p><br />
  <script type="text/javascript"> $(".chzn-select").chosen(); $(".chzn-select-deselect").chosen({allow_single_deselect:true}); </script>
  </form> 
```

**这是我的js：**

```
function changePrice() {
 var sex_price = $("option:selected").attr("sex_price");
 $("#price_div").html("Price = £" + sex_price);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:10:58.150

下面是您尝试做的一个示例，我已经给出了`select`我想要计算的每个元素`total`，`class`以便它们不会与其他元素混合。

**jQuery**

```
<script>
$(document).ready(function() {
    $('.calculate').change(function() {
        var total = 0;
        $('.calculate').each(function() {
            if($(this).val() != 0) {
                total += parseFloat($(this).val());
            }
        });
        $('#total').text('£' + total.toFixed(2));
    });
});
</script> 
```

**HTML**

```
<select class="calculate" name="select-1">
    <option value="0">Please Select</option>
    <option value="1.99">£1.99</option>
    <option value="2.99">£2.99</option>
</select>

<select class="calculate" name="select-2">
    <option value="0">Please Select</option>
    <option value="1.99">£1.99</option>
    <option value="2.99">£2.99</option>
</select>

<select class="calculate" name="select-3">
    <option value="0">Please Select</option>
    <option value="1.99">£1.99</option>
    <option value="2.99">£2.99</option>
</select>

<span id="total">£0</span> 
```

当其中一个元素发生变化时，这将使用每个元素`total`的总价格更新 的内容。`select``calculate`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T11:10:29.113

1.  select with multiple 也应该设置 size 属性，如下所示：

    `<select data-placeholder="Your Favorite Football Team" class="chzn-select" multiple="multiple" tabindex="6" id="Sexdiv" name="Sexdiv" style="width: 300px;" onChange="getClothing(this.value),changePrice()" size="10">`

2.  你的 jQuery 脚本：

```
$('select#Sexdiv').change(function() { 
    var value = 0;
    $("select#Sexdiv option:selected").each(function(){
        value += parseFloat($(this).val());
    });
    $("#price_div").html("Price = £" + value);
}); 
```

唔？

# jquery - 使用 Jquery 禁用输入框使所有属性返回为 null

> ID：10598835
> 
> 赞同：0
> 
> 时间：2012-05-15T10:30:42.780
> 
> 标签：jquery, asp.net, .net, asp.net-mvc-3

使用 .NET MVC3 和 Jquery，我有一个复选框来切换输入框是否为只读。但是，当它设置为只读模式时，它会将字段的值作为 null 传递给控制器​​。我的 Jquery 代码如下：

```
$(document).ready(function () {
 if ($(this).attr('checked')) {
     $(":text").attr('readonly', true);
     $(":checkbox").not(this).attr('readonly', true);
 } else {
     $(":text").attr('readonly', false);
     $(":checkbox").not(this).attr('readonly', false);
 }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:46:25.837

试试这样

```
 <input type="checkbox" id="SomeID"/>
    <input type="text" id="txt"/> 
```

javascript代码：

```
$(function(){
    $('#SomeID').click(function() {
        $("#txt").attr('readonly',this.checked);
    });
}); 
```

演示：[JsFiddle](http://jsfiddle.net/Dtc4h/1/)

# php - 在特定条件下归档数据

> ID：10598836
> 
> 赞同：0
> 
> 时间：2012-05-15T10:30:43.267
> 
> 标签：php, mysql, archive

我有两个表，`projects`并且`archive`具有相同的列。`archive`如您所知，在某些条件下，我需要将项目存档在表中。

我写了两个请求，如果单独执行它们工作正常，但我想组装它们。

```
$sql = "INSERT INTO archive (idDocument,documentNumber,submissionDate,projectName)
        SELECT idDocument,documentNumber,submissionDate,projectName
        FROM projects
        WHERE id='".$id."'";

$sql = "DELETE FROM projects
        WHERE id='".$id."'"; 
```

1/首先，我怎样才能组装这两个请求？我不断收到语法错误。

2/ 现在，我在 PHP 中为项目分配了一个从“1”到“3”的状态（在名为 的列中`status`），我想在这些项目达到状态“3”两个月后归档这些项目。我该怎么做？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:53:13.607

不知道你的组装是什么意思，也许你想在一个简单的调用中查询这两个查询，那么每个查询应该以查询分隔符结束 - 一个分号`;`，像这样：

```
$sql = "INSERT INTO archive (idDocument,documentNumber,submissionDate,projectName)
    SELECT idDocument,documentNumber,submissionDate,projectName
    FROM projects
    WHERE id='".$id."';

    DELETE FROM projects
    WHERE id='".$id."';"; 
```

如果您想在两个月后归档+删除状态为 3 的项目，它们的状态为 3，您必须执行以下操作：

1.  将项目更新为状态 3 时，还设置`date_changed = NOW()`（或类似的表达式）
2.  写下一个 CRON 作业，假设每天凌晨 3:00 执行。
3.  CRON 作业将调用一个 PHP 脚本，该脚本将遍历`projects`表并归档 + 删除所有状态为 3`date_changed`且小于或等于`NOW() - INTERVAL '2' MONTHS`...的项目

这应该够了吧...

# matlab - 从 Matlab 中的 ACF/PACF 图中排除 0 处的滞后

> ID：10598838
> 
> 赞同：0
> 
> 时间：2012-05-15T10:31:03.923
> 
> 标签：matlab, time-series

我想知道是否有办法从 ACF/PACF 图中排除 0 处的滞后？因为人们只对积极的滞后感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:13:15.047

我不确定您为什么要这样做，因为任何人都希望零滞后系数存在，并且如果您排除它，可能会错误地读取该图。

在任何情况下，我都看不到*crosscorrelation*的简洁方法，因为您的输出通常不会是对称的，因此您不能只是省略信号中间的某些内容。但是，如果您正在执行*自相关*，并且我相信您来自您所写的内容，那么您只能保持*正*滞后，因为您的信号是对称的。这样做，我会写

```
%# Generate some signal
x = rand(1,10);

%# Compute its autocorrelation, whichever flavor you prefer
acf = xcorr(x);

%# Keep only the positive lags
acf = acf( length(x)+1 : end );

%# Plot your result
stem(acf); 
```

# c++ - 在 C++ 中使用指针的运行时多态性

> ID：10598841
> 
> 赞同：2
> 
> 时间：2012-05-15T10:31:16.123
> 
> 标签：c++, polymorphism, base, runtime.exec, derived

我遇到了在 C++ 中分配运行时指针的问题。我有一个 `base`有 2 个成员线程和线程的类。

```
class base {

    struct base_struct {
        int a;
    };
    base_struct thread;
    std::vector<base_struct> threads;

    void fn () {}

}; 
```

`derived1`派生自`base`并具有相同的两个成员 (`thread`和 `threads`) 但类型不同。

```
class derived1 : public base {
    struct derived_struct11 : public base_struct {
        int b;
    };
    derived_struct11 thread;
    std::vector<derived_struct11> threads;

    void fn () {
        printf();
    }

}; 
```

`derived2`也派生自`base`并具有相同的两个成员 (`thread` 和`threads`)，但类型不同。

```
class derived2 : public base {
    struct derived_struct22 : public base_struct {
        int c;
    };
    derived_struct22 thread;
    std::vector<derived_struct22> threads;

    void fn () {
        printf();
    }

}; 
```

只有在运行时我才能知道是否`derived1`或`derived2`应该使用。所以我通过以下方式做到了：

```
base base_obj;
derived1 derived1_obj;
derived2 derived2_obj;

base *ptr ; 
```

在运行时函数中：

```
{
    if (condition == yes)
        ptr = &derived1_obj;

    else
        ptr = &derived2_obj;
} 
```

问题是我可以用`this`指针直接访问这些函数。但是线程的值（例如：`threads.size()`始终显示为`base` 类的值。

我想知道一些更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:36:33.543

直接的问题是数据成员不能是虚拟的，因此您不能`threads`在派生类中覆盖。一种解决方案可能是在基类中只有一个`threads`，并将所有结构实例存储在其中。

但是，您会遇到*切片*问题：您将对象按值存储在`std::vector<base_struct>`. 这意味着无论何时你将一个对象放入其中，它都会被复制到向量中，使用`base_struct`. 这意味着原始对象的派生部分将被切掉，您只会得到一个`base_struct`元素。

要启用多态性，您应该只`base_struct`在向量中存储指向的指针：

```
std::vector<base_struct*> threads; 
```

另一种方法是为 提供一个虚拟 getter `threads`，然后您可以在派生类中覆盖它以返回所需的集合。但是，在类层次结构中拥有多个具有相同名称的数据成员不是 IMO 的好主意。它可能会使人们感到困惑并导致细微的错误。所以我更喜欢第一个解决方案，除非有非常紧迫的理由在每个类中保留一个单独的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:39:18.267

一种解决方法是

```
base_struct* thread;
std::vector<base_struct*> threads; // <- hmmmmmmm 
```

然后在您的派生类中，适当地设置基成员（而不是在派生类中定义两个新成员 - 我认为这不是您想要的）

# javascript - 如何实现这种双渐变菜单设计？

> ID：10598844
> 
> 赞同：2
> 
> 时间：2012-05-15T10:31:25.020
> 
> 标签：javascript, html, css

我正在尝试在网页上实现菜单设计，但我被卡住了。

概念是这样的：有两个垂直列，一个菜单和一个内容容器。菜单的背景是从白色到灰色的线性渐变。内容的背景是从灰色到白色的线性背景。菜单包含可变高度的导航列表。当一个导航项被选中时，它会采用一个与它旁边的内容容器的颜色混合的背景。

这是一张图片来说明我的意思：

![在此处输入图像描述](../Images/3289cea241211633606861de172eaf27.png)

以下是约束：

*   菜单中的某些元素可以扩展或收缩。我总是不知道菜单的大小

*   元素的数量可以改变

*   但确切的渐变颜色不会改变

*   不知道整个网页/内容区域的高度

*   未选择的菜单项不需要混合到导航容器的渐变中

是否可以单独使用 CSS 来做到这一点？我考虑使用 clip 属性，但它涉及到我绝对定位元素和其中的文本，我不能这样做，因为我不知道会有多少。我想不出任何符合约束的东西。

编辑：我们可以修改设计以将未选择的菜单项保持为白色，然后在菜单元素完成后启动白色到灰色的渐变。但我看不到这样做的方法，因为列的高度可能会有所不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:08:57.397

当你为整个 ul 设置背景时，你不能再让它对单个的透明。因此，您需要将其应用于每个 li 并将其设置`background-attachment`为`fixed`：

```
ul li{
   background: -webkit-linear-gradient(top, red 0%, blue 100%);
   background: -moz-linear-gradient(top, red 0%, blue 100%);
   background-attachment: fixed;
} 
```

我做了一个JSFiddle，它显示了这个实现：

[http://jsfiddle.net/kLD98/1/](http://jsfiddle.net/kLD98/1/)

请看`li.space`，这还不完美。也许其他人有解决这个问题的想法，因为我猜渐变看起来已经很好了。

附录：请查看@Bergis 评论和他附加的 JSFiddle ( [http://jsfiddle.net/kLD98/9/](http://jsfiddle.net/kLD98/9/) )，它把使用的需要`li.space`放在一边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:36:10.983

我担心没有绝对测量是不可能的。在元素上有背景，您不能在其中为具有纯 CSS 的子元素切割一个透明的洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:02:53.670

将菜单项渐变设置为与主块相同的渐变样式，并为菜单项样式添加-Xpx的垂直偏移量。

来自这个[Apple 开发者页面](http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Gradients/Gradient.html)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-15T10:35:07.150

这是 Chris 撰写的一篇关于 CSS 渐变的精彩文章

[http://css-tricks.com/css3-gradients/](http://css-tricks.com/css3-gradients/)

# .net - 如何确定该帐户是否为 Google Apps 帐户？

> ID：10598846
> 
> 赞同：3
> 
> 时间：2012-05-15T10:31:29.980
> 
> 标签：.net, google-docs-api, google-drive-api

我正在使用 .net V3（dll 版本 2.0.1.0）的 Google 文档列表 api。我正在使用此链接[https://developers.google.com/google-apps/documents-list/#authorizing_requests_with_clientlogin中所述的客户端登录身份验证](https://developers.google.com/google-apps/documents-list/#authorizing_requests_with_clientlogin)

我如何确定它是 Google Apps 帐户还是普通 Google 帐户？

谢谢，巴拉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:43:08.280

我认为没有很好的方法来检查帐户是否是 Google Apps 帐户。

检查电子邮件是否与@gmail.com 不同将不起作用，因为可以使用现有电子邮件地址创建 Google 帐户。

我想到的唯一方法是检查域的 DNS MX 记录，看看域的某些服务是否由 Google Apps 服务器提供（例如从 gmail 提供的电子邮件等......）但即使在那里你也可能需要检查更多而不是一项服务，因为某些 Google Apps 公司例如停用 Gmail（或其他服务）以使用自定义解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T23:40:14.433

如果您的目标是检查用户是否有权访问给定的功能，您可以向元数据提要发送请求并检查`<docs:feature>`元素。

例如，一个功能`<docs:featureName>upload_any</docs:featureName>`表明用户可以上传任何类型的文档：

[https://developers.google.com/google-apps/documents-list/#getting_general_information_about_a_users_account](https://developers.google.com/google-apps/documents-list/#getting_general_information_about_a_users_account)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:40:35.460

假设您包括：

```
https://www.googleapis.com/auth/userinfo.email 
```

在您的 OAuth 范围内，您可以提出以下请求：

```
https://www.googleapis.com/oauth2/v2/userinfo 
```

如果它是 Google Apps 帐户，则调用将返回一个“hd”参数（托管域？），并将 Google Apps 域作为其值。如果是消费者账户，无论是@gmail.com 还是潜在的“冲突账户”，都不会返回 hd 参数。请参阅下面的示例。admin@jay.powerposters.org 是 Google Apps 帐户，而 consumer@jay.powerposters.org 是消费者帐户。如果我在 Google Apps 域中创建消费者用户，它将成为一个冲突帐户，并且消费者帐户将被推出 @jay.powerposters.org 命名空间，但这还没有发生。

对于 admin@jay.powerposters.org：

```
GET https://www.googleapis.com/oauth2/v2/userinfo

HTTP/1.1 200 OK
Content-length: 99
X-xss-protection: 1; mode=block
...

{
 "email": "admin@jay.powerposters.org",
 "verified_email": true,
 "hd": "jay.powerposters.org"
} 
```

对于 consumer@jay.powerposters.org：

```
GET https://www.googleapis.com/oauth2/v2/userinfo

HTTP/1.1 200 OK
Content-length: 71
X-xss-protection: 1; mode=block

{
 "email": "consumer@jay.powerposters.org",
 "verified_email": true
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-05-15T16:03:15.690

Google 消费者帐户是`@gmail.com`或很少`@googlemail.com`，其余的将是 Google Apps 帐户。

# java - swt 或 swing 中的边框布局

> ID：10598858
> 
> 赞同：1
> 
> 时间：2012-05-15T10:32:21.673
> 
> 标签：java, swing, layout, swt, border-layout

我想如图所示排列组件。我可以通过使用 gridbaglayout 来做到这一点，但我想使用 borderlayout 来做到这一点。我尝试过，但无法达到我想要的效果。所以请在这里指导我。这里的黑色矩形是 JPanel、Button 等组件。

![在此处输入图像描述](../Images/9e1de0471e2c9f9f800fbffab7a7605a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:58:54.943

如果你只想用BorderLayout来做，你需要使用2个BorderLayout。如果您不能使用 2 个布局，那么您将被 GridBagLayout 困住。这是我所说的演示：

```
import java.awt.BorderLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    protected void initUI() {
        JFrame frame = new JFrame("test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new BorderLayout());
        JPanel panel2 = new JPanel(new BorderLayout());
        panel2.add(new JButton("NORTH"), BorderLayout.NORTH);
        panel2.add(new JButton("CENTER"));
        panel.add(panel2);
        panel.add(new JButton("SOUTH"), BorderLayout.SOUTH);
        panel.add(new JButton("EAST"), BorderLayout.EAST);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().initUI();
            }
        });
    }
} 
```

![例子](../Images/ce197603d0227ddafd71821fbfd369b2.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:39:06.247

边框布局不是这样工作的。这是边框布局示意图：

![在此处输入图像描述](../Images/3e68366bf01500a8c5d313c1d573016e.png)

您将无法将 EAST 布局放置在右上角 - NORTH 将始终浮动到右侧。

编辑：显示自从我使用 Swing 或 AWT 以来已经有多久了 - 当我使用时，它是 EAST、NORTH、WEST、SOUTH 和 CENTER。

# asp.net - 更新面板，更新方法不会更新控件

> ID：10598859
> 
> 赞同：0
> 
> 时间：2012-05-15T10:32:22.003
> 
> 标签：asp.net, ajax, updatepanel

我有一个形成为 Html 表的转发器。预览大概是这样的：

```
| No |    Name   |    Status   |
--------------------------------
| 1\. | Process A | In Progress |
| 2\. | Process B | In Progress |
| 3\. | Process C | In Progress |
| 4\. | Process D | In Progress |
...
| n. | Process N | In Progress |
-------------------------------- 
```

我将中继器放置在更新面板内。

当我点击一个按钮时，表单会调用这样一个发送过程函数。该函数将为每一行循环并将状态文本从“进行中”设置为“已发送”。假设这个过程大约是 2 秒，我想在分配状态文本后通过 UpdatePanel.Update() 更新中继器中的状态文本，但我的问题是状态不会更新。功能完成后更新。

发送函数是这样的：

```
protected void btnSend_Clicked(object sender, EventArgs e) 
    {
        foreach (RepeaterItem item in rptData.Items) 
        {
            UpdatePanel upnlStatus = (UpdatePanel)item.FindControl("upnlStatus");
            Literal litStatus = (Literal)item.FindControl("litStatus");
            System.Threading.Thread.Sleep(2000);
            litStatusText = "Sent";
            upnlStatus.Update();                
        }
    } 
```

我的问题是做这件事的最佳方法是什么？更新面板是否支持这种实时更新？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:16:34.990

更新面板的 AsyncPostback 模式是

1.  客户提出要求
2.  服务器做一个任务
3.  客户端已更新

因此，它在执行 3 之前等待 2 完成。您无法通过服务器上的任务执行来触发客户端的更新，因为服务器进程在每个 AsyncPostback 之间不再存在于服务器上。整个页面是从每个 AsyncPostback 之间的视图状态重新创建的。

要执行您想要执行的操作，您需要异步启动任务并稍后检索结果。这样做的常用方法是使用[Web 服务](http://msdn.microsoft.com/en-us/library/bb398898.aspx)。还要检查[这个](http://msdn.microsoft.com/en-us/magazine/cc163393.aspx)。

# web-services - Adobe Flex 4.6 WebService 请求超时

> ID：10598860
> 
> 赞同：0
> 
> 时间：2012-05-15T10:32:25.257
> 
> 标签：web-services, actionscript-3, apache-flex, timeout, flex4.6

连接到我的 WebService（Lotus Notes 数据库）的代码是由 Flash Builder 通过“Data/Connect with WebService...”创建的。一切正常，但我有一个增加请求超时的问题。API 说您可以像这样设置请求超时：

```
_serviceControl.requestTimeout = 300; 
```

在 iOS (iPad) 上似乎一切正常。但是，如果我在桌面或安卓智能手机上运行我的应用程序，这只有在我将请求超时设置为低于 ~30 秒时才有效。如果我没有设置请求超时或高于 30 并且我的应用程序需要超过 30 秒来等待答案/结果，“_serviceControl”会触发带有以下消息的 FaultEvent：

```
body = ""  
clientId = "DirectHTTPChannel0"  
correlationId = "CDED773E-34E5-56F8-D521-4FFC393D7565"  
destination = ""  
extendedData = (null)  
faultCode = "Server.Error.Request"  
faultDetail = "Error: [IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2032: Stream Error. URL: "http://...?OpenWebService" errorID=2032]. URL: "http://...?OpenWebService"  
faultString = "HTTP request error"  
headers = (Object)#1  
DSStatusCode = 0  
messageId = "91D11378-49D4-EDF7-CE7A-4FFCB09EBC47"  
rootCause = (flash.events::IOErrorEvent)#2  
bubbles = false  
cancelable = false  
currentTarget = (flash.net::URLLoader)#3  
bytesLoaded = 0  
bytesTotal = 0  
data = ""  
dataFormat = "text"  
errorID = 2032  
eventPhase = 2  
target = (flash.net::URLLoader)#3  
text = "Error #2032: Stream Error. URL: "http://...?OpenWebService"  
type = "ioError"  
timestamp = 0  
timeToLive = 0 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:52:44.830

我有同样的问题，requestTimeout 没有工作。

如果有人正在寻找答案，这个配置对我来说很好：

```
import flash.net.URLRequestDefaults;

URLRequestDefaults.idleTimeout = 120000; //note this value represents milliseconds (120 secs) 
```

在这里查看更多详细信息：[Flex HTTPService 仍然超时](https://stackoverflow.com/questions/8820715/flex-httpservice-times-out-anyway)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T22:03:34.213

尽管似乎假定 requestTimeout 不起作用。它实际上......第一次。

在第一个请求之后，requestTimeout 设置在

```
HTTPService.channelSet.currentChannel.requestTimeout 
```

如果你必须改变超时，你会想在那里做。

要查看具体的违规代码，请参阅 AbstractOperation.getDirectChannelSet()。即使对于不同的 HTTPService 实例，它也来自：

```
private static var _directChannelSet:ChannelSet; 
```

_directChannelSet 只实例化一次，并且它上面的 requestTimeout 只在创建时设置，所以即使你改变 HTTPService 上的 requestTimeout，它也不会反映在请求中。

# jquery - 使用 jQuery 获取特定图像元素的来源

> ID：10598861
> 
> 赞同：27
> 
> 时间：2012-05-15T10:32:32.113
> 
> 标签：jquery, jquery-selectors

我有很多图像元素，并且想要获取替代文本为*"example"*的特定图像的来源。

我试过这个：

```
var src = $('.conversation_img').attr('src'); 
```

但我无法得到我需要的那个。

如何根据替代文本选择特定的图像元素？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-15T10:36:19.113

要选择只知道属性值的元素，可以使用下面的 jQuery 脚本

```
var src = $('.conversation_img[alt="example"]').attr('src'); 
```

请参阅[jQuery 文档](http://api.jquery.com/attribute-equals-selector/)以获取属性等于选择器

也请参考[Demo中的例子](http://jsfiddle.net/SCqQg/)

以下是您无法访问演示的代码..

**HTML**

```
<div>
    <img alt="example" src="\images\show.jpg" />
    <img  alt="exampleAll" src="\images\showAll.jpg" />  

</div> 
```

**脚本查询**

```
var src = $('img[alt="example"]').attr('src');
alert("source of image with alternate text = example - " + src);

var srcAll = $('img[alt="exampleAll"]').attr('src');
alert("source of image with alternate text = exampleAll - " + srcAll ); 
```

**输出将是**

两个警报消息，每个都有值

1.  带有替代文本的图像源 = 示例 - \images\show.jpg
2.  带有替代文本的图像源 = exampleAll - \images\showAll.jpg

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T10:41:08.940

```
$('img.conversation_img[alt="example"]')
    .each(function(){
         alert($(this).attr('src'))
    }); 
```

这将显示 alt='example' 类“conversation_img”的所有图像的 src 属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T10:34:55.010

```
var src = $('img.conversation_img[alt="example"]').attr('src'); 
```

如果您有多个匹配元素，则只会返回第一个的 src。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-16T11:50:09.100

如果您并不特别需要图像的替代文本，那么您可以只定位图像的类/ID。

```
$('img.propImg').each(function(){ 
     enter code here
} 
```

我知道它并没有完全回答这个问题，尽管我花了很长时间试图弄清楚这个问题，这个问题给了我解决方案:)。在我的情况下，我需要隐藏任何带有特定 src 的图像标签。

```
$('img.propImg').each(function(){ //for each loop that gets all the images. 
        if($(this).attr('src') == "img/{{images}}") { // if the src matches this
        $(this).css("display", "none") // hide the image.
    }
}); 
```

# xpages - 更新 extlib 后无法在数据库中打开 Xpages

> ID：10598862
> 
> 赞同：1
> 
> 时间：2012-05-15T10:32:36.327
> 
> 标签：xpages, xpages-extlib

我使用 OpenNTF 的早期版本的 extlib 设计了一个应用程序。现在我更新了 extlib，当我尝试在数据库中打开 Xpage 时，我收到以下错误： *请注意，在 Designer 中打开 Xpage 时会发生这种情况。数据库在浏览器中完美打开。

```
Could not open the editor: An unexpected exception was thrown.

java.lang.NullPointerException
at com.ibm.designer.domino.xsp.editpart.XFacesEditPartFactory.createEditPart(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.createChild(Unknown Source)
at com.ibm.designer.domino.xsp.editpart.CustomRenderingElementEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at com.ibm.designer.domino.xsp.editpart.CallbackEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.DocumentEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.designer.domino.xsp.editpart.CustomRenderingElementEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.DocumentEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.designer.domino.xsp.editpart.CCCustomRenderingElementEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at com.ibm.designer.domino.xsp.editpart.CallbackEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.DocumentEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.designer.domino.xsp.editpart.CCCustomRenderingElementEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.ElementEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at com.ibm.etools.xve.editpart.XVENodeEditPart.refreshChildren(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.refresh(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractGraphicalEditPart.addNotify(Unknown Source)
at com.ibm.etools.xve.editpart.DocumentEditPart.addNotify(Unknown Source)
at org.eclipse.gef.editparts.AbstractEditPart.addChild(Unknown Source)
at org.eclipse.gef.editparts.SimpleRootEditPart.setContents(Unknown Source)
at org.eclipse.gef.ui.parts.AbstractEditPartViewer.setContents(Unknown Source)
at com.ibm.etools.xve.viewer.XMLGraphicalViewerImpl.setContents(Unknown Source)
at org.eclipse.gef.ui.parts.AbstractEditPartViewer.setContents(Unknown Source)
at com.ibm.etools.xve.editor.AbstractXMLVisualEditor.initializeGraphicalViewer(Unknown Source)
at com.ibm.designer.domino.xsp.editor.XFacesEditor.initializeGraphicalViewer(Unknown Source)
at com.ibm.etools.xve.editor.AbstractXMLVisualEditor.createGraphicalViewer(Unknown Source)
at org.eclipse.gef.ui.parts.GraphicalEditor.createPartControl(Unknown Source)
at com.ibm.etools.xve.editor.AbstractXMLVisualEditor.createPartControl(Unknown Source)
at org.eclipse.ui.part.MultiPageEditorPart.addPage(Unknown Source)
at com.ibm.etools.xve.editor.XVEMultiPageEditor.createPages(Unknown Source)
at com.ibm.designer.domino.xsp.editor.XFacesMultiPageEditor.createPages(Unknown Source)
at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(Unknown Source)
at org.eclipse.ui.internal.EditorReference.createPartHelper(Unknown Source)
at org.eclipse.ui.internal.EditorReference.createPart(Unknown Source)
at org.eclipse.ui.internal.WorkbenchPartReference.getPart(Unknown Source)
at org.eclipse.ui.internal.EditorReference.getEditor(Unknown Source)
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(Unknown Source)
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(Unknown Source)
at org.eclipse.ui.internal.WorkbenchPage.access$11(Unknown Source)
at org.eclipse.ui.internal.WorkbenchPage$10.run(Unknown Source)
at org.eclipse.swt.custom.BusyIndicator.showWhile(Unknown Source)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(Unknown Source)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(Unknown Source)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(Unknown Source)
at com.ibm.designer.domino.ui.dialog.DesignElementUtil.openEditorWithImplicitLock(Unknown Source)
at com.ibm.designer.domino.ui.dialog.DesignElementUtil.openEditorWithImplicitLock(Unknown Source)
at com.ibm.designer.domino.ui.dialog.DesignElementUtil.openDesignElement(Unknown Source)
at com.ibm.designer.domino.ui.dialog.DesignElementUtil.openDesignElement(Unknown Source)
at com.ibm.designer.domino.navigator.designtimemodelcontroller.DesignTimeModelWebPages.openDesignElement(Unknown Source)
at com.ibm.designer.domino.navigator.DesignEditor.openDesignElement(Unknown Source)
at com.ibm.designer.domino.navigator.DesignEditor.openSelectedDesignElement(Unknown Source)
at com.ibm.designer.domino.navigator.DesignEditor$13.mouseDoubleClick(Unknown Source)
at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)
at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source)
at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)
at org.eclipse.ui.internal.Workbench.runEventLoop(Unknown Source)
at org.eclipse.ui.internal.Workbench.runUI(Unknown Source)
at org.eclipse.ui.internal.Workbench.access$4(Unknown Source)
at org.eclipse.ui.internal.Workbench$5.run(Unknown Source)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Unknown Source)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Unknown Source)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(Unknown Source)
at com.ibm.rcp.personality.framework.internal.RCPApplication.run(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(Unknown Source)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(Unknown Source)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(Unknown Source)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(Unknown Source)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(Unknown Source)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Unknown Source)
at org.eclipse.equinox.launcher.Main.basicRun(Unknown Source)
at org.eclipse.equinox.launcher.Main.run(Unknown Source)
at com.ibm.rcp.core.internal.launcher.Main.startLaunch(Unknown Source)
at com.ibm.rcp.core.internal.launcher.Main.main(Unknown Source)
at com.ibm.rcp.core.internal.launcher.Main.run(Unknown Source) 
```

**更新**我发现这个自定义控件导致错误，但我不知道为什么！？

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xe="http://www.ibm.com/xsp/coreex" style="height:340px;"
    xmlns:xc="http://www.ibm.com/xsp/custom">

    <xe:djAccordionContainer id="djAccordionContainer1"
        style="height:345px;width:197px;">
        <xe:djAccordionPane id="djAccordionPane1" title="За нас"
            style="background-color:rgb(249,252,255)">

            <xe:this.dojoAttributes>
                <xp:dojoAttribute name="selected" value="false"></xp:dojoAttribute>
            </xe:this.dojoAttributes>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="За заводот" id="link1"
                value="/zazavodot.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>

            <xp:link escape="true" text="Координативно тело за ИС"
                id="link3" value="/koordinativnotelo.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Меѓународни изложби" id="link4"
                value="/megjunarodniizlozbi.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Промоција" id="link5"
                value="/promocija.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Патент на годината" id="link6"
                value="/patentnagod.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Годишна програма" id="link7"
                value="/godisnaprograma.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Годишен извештај" id="link8"
                value="/godisenizvestaj.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
        </xe:djAccordionPane>
        <xe:djAccordionPane id="djAccordionPane2" title="Легислатива"
            style="background-color:rgb(249,252,255)">
            <xe:this.dojoAttributes>
                <xp:dojoAttribute name="selected" value="false"></xp:dojoAttribute>
            </xe:this.dojoAttributes>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Национално законодавство"
                id="link9" value="/nacionalnozakon.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Eu Регулативи и Директиви"
                id="link10" value="/EuRegulativi.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Меѓународни Договори"
                id="link11" value="/megjunarodnidogovori.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" id="link12"
                text="Билатерални договори" value="/bilateralnidogovori.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
        </xe:djAccordionPane>
        <xe:djAccordionPane id="djAccordionPane3" title="Издаваштво"
            style="background-color:rgb(249,252,255)">
            <xe:this.dojoAttributes>
                <xp:dojoAttribute name="selected" value="false"></xp:dojoAttribute>
            </xe:this.dojoAttributes>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Гласник" id="link13"
                value="/glasnik.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Публикации" id="link14"
                value="/publikacii.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Архива" id="link15"
                value="/arhiva.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
        </xe:djAccordionPane>
        <xe:djAccordionPane id="djAccordionPane4"
            title="Корисни информации"
            style="background-color:rgb(249,252,255)">
            <xe:this.dojoAttributes>
                <xp:dojoAttribute name="selected" value="true"></xp:dojoAttribute>
            </xe:this.dojoAttributes>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Прашања" id="link16"
                value="/prashanja.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Линкови" id="link17" value="http://wipo.int/members/en/" target="_blank">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Статистика" id="link18"
                value="/statistika.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Новости" id="link19"
                value="/Novosti.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
        </xe:djAccordionPane>
        <xe:djAccordionPane id="djAccordionPane5"
            title="Пристап до информации"
            style="background-color:rgb(249,252,255)">
            <xp:panel styleClass="rowMargin"></xp:panel>
            <xp:link escape="true" text="Пристап до информации"
                id="link20" value="/pristapdoinfo.xsp">
            </xp:link>
            <xp:panel styleClass="rowMargin"></xp:panel>
        </xe:djAccordionPane>
    </xe:djAccordionContainer>
    <xp:panel styleClass="rowMargin"></xp:panel>
    <xp:panel>
        <xp:image url="/slika4.jpg" id="image1"></xp:image></xp:panel></xp:view> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T10:50:24.383

我在升级各种服务器和库等时不时得到这个。

通常我从应用程序列表中删除应用程序，关闭设计器，重新打开，再次打开应用程序并清理它。这对我一直有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:57:10.803

您可以通过打开数据库并选择“项目”和“清理...”来清理 Domino Designer 中的项目 - 选择“项目”（即您的数据库）并点击 [Ok]

# android - Android Context线程安全吗？

> ID：10598864
> 
> 赞同：6
> 
> 时间：2012-05-15T10:32:40.457
> 
> 标签：android

当我在 AsyncTask#doInBackground 中使用 Android 上下文时，它是线程安全的吗？上下文是通过构造函数或通过周围 Activity 的 getApplicationContext() 提供的。这个简单的问题在 stackoverflow 和其他地方被问了很多，但我发现没有一个明确的答案？

例如，在 doInBackground() 中，我使用上下文来实例化一个 DAO 类。

```
 @Override
 protected Void doInBackground(Void... params) {  

   ExampleDao dao = new ExampleDao(context);
   ...

 } 
```

我看到了几个这样做的例子，但我无法想象这是线程安全的，因为上下文现在由主线程（UI 线程）和工作线程访问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T11:01:52.507

只要您不更改某些内容并且仅通过上下文检索资源，您始终可以从不同的线程访问上下文我不认为线程安全有问题。

问题是只要线程运行，上下文就会留在内存中并处于活动状态。这对您来说是件好事，因为您可以一直依赖有效的上下文。不好的是，如果您将 Activity 作为上下文传递，则该 Activity 中的所有视图和成员变量也将保留在内存中，这可能会导致大量内存的垃圾收集很晚，就像 Waqas 建议的那样。

我不会从不同的线程做的事情是从 Context 子类（如[setTheme() ）](https://developer.android.com/reference/android/view/ContextThemeWrapper.html#setTheme%28int%29)访问方法，这将影响当前显示的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:35:38.470

如果您不需要对**Views**做任何事情，那么请始终尝试使用`getApplicationContext()`which 指的是应用程序的上下文（而不是活动的上下文），并且可以帮助您避免线程或方向更改时的内存泄漏。所以，我想它也适合您在 AsyncTask 中的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:36:01.040

上下文实际上不是线程安全的。但是可以传递一个应用程序上下文的实例来写入数据库，例如。

# git - 通过网络管理 Git 的最快方法是什么？

> ID：10598868
> 
> 赞同：4
> 
> 时间：2012-05-15T10:32:58.760
> 
> 标签：git, svn, version-control, samba, tortoisegit

我是一名 Web 开发人员和 Subversion/TortoiseSVN 用户，当我们开始需要分支时，我希望跳转到 Git，从我所读到的内容来看，Git 更快并且更好地管理分支。

**我们的 SVN 设置**

我们的 SVN 设置基于通过 Samba 共享访问的中央 Linux 服务器。它安装了 Apache、MySQL、PHP 等，允许我们在类似于我们在线实时服务器的环境上进行本地测试。我们已经建立了一个共享来托管 SVN 存储库和开发环境（存储库签出）。这使我们能够在提交之前通过本地网络实时开发、测试和查看彼此的开发环境。因此，所有签出/更新/提交/开发都是通过网络上的 Samba 共享完成的。没有在任何其他盒子上进行任何开发。我们注意到 TortoiseSVN/SVN 最近开始陷入困境，并且发现分支非常缓慢。因此，我们正在寻求迁移到 Git。

**设置 Git**

为了尝试设置与我们的 SVN 设置类似的环境，我在 Linux 服务器上安装了 Git，在我的 windows 7 机器上安装了 TortoiseGit。然后我继续按照[将 SVN 存储库克隆到 Git 的说明](http://jonmaddox.com/2008/03/05/cleanly-migrate-your-subversion-repository-to-a-git-repository/)进行操作。这进展顺利，并保持我的日志完好无损。

**设置 Git 开发环境**

然后我创建了一个开发环境并从 TortoiseGit 做了一个“Git Clone”，这花了几分钟（正如我所料）。*我是否正确地认为这与`svn checkout`TortoiseSvn 中的相同？*然后我对文件进行了一些更改并选择了“Git Comment -> master ...”。*我是否正确地假设这与 相同`svn commit`？*这是事情花了相当长时间的地方。

**Git 慢下来的地方**

首先，尽管我只更改了 2 个文件，但它需要很长时间才能显示已更改的文件（大约 45 秒）。这在 TortoiseSVN 上通常会在 2-3 秒内发生。然后我继续提交，这又花了大约 30 秒，而在 TortoiseSVN 上可能不到 5 秒。

有些人可能会问我为什么要搬家，因为上面的 SVN 时间还不错。请记住，这是一个简单的示例。正常使用会使 SVN 花费更长的时间。

**寻找解决方案**

我确实在 Stack Overflow 上找到了另一个人有一个非常相似的问题，但没有任何实际的解决方案。通过 ssh/commandline 做事不是一种选择，因为一些开发人员对这类东西不是很好，而且对 Linux 一无所知。

那么，我能做些什么来使这项工作在网络上更快吗？或者，也许是 TortoiseSVN 更好的替代方案来管理提交、分支等？我们正努力将我们必须采取的步骤保持在最低限度，以保持速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:18:30.250

如果您的工作副本在服务器共享上，不要指望 git 会很快。Git 旨在本地运行，并远程推送/拉取。

# javascript - 如何将动态增长的数组添加到另一个动态数组中

> ID：10598870
> 
> 赞同：0
> 
> 时间：2012-05-15T10:33:10.203
> 
> 标签：javascript

在我的项目中，我有 date1、date2 等最多一个月日期的数组，如下所示

```
var day1= [4,5,6,11];
var day2= [7,8,9,12];
var day3= [10,11,12,14];...

var day30= [1,2, 3, 4]; 
```

在上面每个数组的确切大小中，我们不知道可能会增加或减少，我需要将这些值传递给另一组数组，例如

```
var data1= [day1[0], day2[0], day3[0]];
var data2= [day1[1], day2[1], day3[1]];
var data3= [day1[2], day2[2], day3[2]];...

var data30= [day1[30], day2[30], day3[30]]; 
```

根据每天数组大小数据数组大小会增加。

如何解决这个问题任何帮助..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:39:52.030

考虑使用对象而不是变量：

```
var days = {
  day1: [4,5,6,11],
  day2: [7,8,9,12],
  ... 
  day30: [1,2, 3, 4]
}; 
```

然后您可以执行以下操作：

```
var data30 = [];
var i = 0;
while ( days.hasOwnProperty('day' + ++i) ){
  data30.push(days['day' + i]);
} 
```

尽管给出了示例数据，但`data30`不会有任何成员，因为第一个数组在 index 处没有成员`30`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:39:50.303

查看 JavaScript 的 push 方法。

```
http://www.w3schools.com/jsref/jsref_push.asp 
```

# c++ - 如何使用 C++ 从 CSV 文件中读取一些列？

> ID：10598872
> 
> 赞同：3
> 
> 时间：2012-05-15T10:33:13.337
> 
> 标签：c++, csv

我想知道如何从 Excel 文件（另存为 .csv）中读取信息，然后使用 C++ 将其打印到另一个文件中。

输入文件将数据分成列。每列的第一行是列的标签。比如这样：

```
|Column1|Column2|Column3|Column4|Column5|Column6
|char1.1|char2.1|       |       |       |char6.1
|char1.2|char2.2|int3.2 |char4.2|bool5.2|char6.2
|char1.3|char2.3|int3.3 |char4.3|bool5.3|char6.3
|char1.4|char2.4|       |       |       |char6.4
|char1.5|char2.5|       |       |       |char6.5
|char1.6|char2.6|int3.6 |char4.6|bool5.6|char6.6 
```

所以从这个表中，我想提取第 3、4 和 5 列（仅当有信息时，所以第 2,3 和 6 行）并将信息打印到另一个 csv 文件中，例如：

```
|Column3|Column4|Column5|
|int3.2 |char4.2|bool5.2|
|int3.3 |char4.3|bool5.3|
|int3.6 |char4.6|bool5.6| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:07:45.753

strtok 是执行此操作的标准函数。

```
#include <stdio.h>
#include <string.h>

int main ()
{
// Read the file ----------
  FILE* fp = fopen("toto.csv", "rb");
  if (fp == NULL) return 0;
  fseek(fp, 0, SEEK_END);
  long size = ftell(fp);
  fseek(fp, 0, SEEK_SET);
  char *pData = new char[size + 1];
  fread(pData, sizeof(char), size, fp);
  fclose(fp);
// Read the file ----------

// Parse the file content ----------
  char* pch;
  pch = strtok (pData, "|");
  while (pch != NULL)
  {
    printf ("%s\n", pch);
    pch = strtok (NULL, "|");
  }
// Parse the file content ----------  
  return 0;
} 
```

别客气 ！如果您想过滤某些列，那么，由于 strtok 不接受列号参数，您将不得不使用条件语句，如 if、switch（针对特定处理取决于列等）

以你为例：

```
 char* pch;
  pch = strtok (pData, "|");
  int iCpt = 1;
  while (pch != NULL)
  {
    if (iCpt == 3 || iCpt == 4 || iCpt == 5)
    {
      printf ("%s\n", pch);
    }
    pch = strtok (NULL, "|");
    iCpt++;
  } 
```

或使用 switch，允许对每一列进行特定处理：

```
 char* pch;
  pch = strtok (pData, "|");
  int iCpt = 1;
  while (pch != NULL)
  {
    switch(iCpt)
    {
      case 3:
      case 4:
      case 5: printf ("%s\n", pch);
              break;
      default: // Nothing;
    }
    pch = strtok (NULL, "|");
    iCpt++;
  } 
```

我希望你会对此感到满意；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-20T16:46:42.187

```
#include <iostream>
#include <string>
#include <fstream>
#include <stdio.h>
#include <sstream>
int main(int argc, char* argv[])
{  
    std::string csv_File_name = argv[1];
    std::ifstream  data(csv_File_name);
    int row_count =0 ;

    std::string line;
    while(std::getline(data,line))
    {   
        row_count +=1;

        std::stringstream  lineStream(line);
        std::string        cell;
        int column_count = 0 ;

        while(std::getline(lineStream,cell,','))
        {
            column_count+=1;
            // You have a cell!!!!
            if ( column_count == 3 || column_count == 4 || column_count == 5){
                std::cout << cell <<" row " << row_count << " column "  << column_count<< std::endl;
            }
        }
    }

} 
```

# sql - Ruby on Rails 中的单步批量删除

> ID：10598874
> 
> 赞同：9
> 
> 时间：2012-05-15T10:33:16.787
> 
> 标签：sql, ruby-on-rails, batch-file, rake-task

如何从 Rake 任务向数据库服务器发送这样的查询而不删除“每个”循环中的逐条记录？

```
delete from data
where uuid in (
    select uuid
    from data
    group by uuid, raw, recdate
    having count(*)>1
); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T11:57:33.293

ActiveRecord 有`delete_all`适合你的方法。请注意，它不会调用销毁回调。[http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-delete_all](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-delete_all)

# html - 表格单元格调整大小超过最大宽度

> ID：10598876
> 
> 赞同：6
> 
> 时间：2012-05-15T10:33:21.030
> 
> 标签：html, css, html-table, internet-explorer-8

我有一个表格，将显示相机的名称及其型号。问题是当名称/模型字符串太长时，单元格会被调整大小，因此会使表格主体与头部不同步。

```
<td>
    <div class="camera_details">
        <div class="camera_models">XXXCAMERAMODELXXX</div>
        <div class="camera_name">XXXCAMERANAMEXXX</div>
    </div>
</td> 
```

这有这样的CSS：

```
td{
    max-width: 144px;
}
.camera_details {
    max-width: 144px;
}
.camera_models {
    text-overflow: ellipsis;
    overflow: hidden;
}
.camera_name {
    text-overflow: ellipsis;
    overflow: hidden;
}
table {
    table-layout: fixed;
} 
```

该问题仅存在于 IE8 上，其中 div 由于 max-width 而受到限制，但 td 元素不存在，这仍然会导致表中的错位。

无论子 div 的宽度如何，我都可以强制 td 为某个宽度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:36:15.357

定义**表格布局：固定；**在你的`table`. 像这样写：

```
table{
 table-layout:fixed;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:39:42.493

您可以将以下样式应用于您`div`的：

```
overflow: hidden;
white-space: nowrap; 
```

您还需要指定一个`width`.

# vb.net - 通过动态读取文本文件添加数据行

> ID：10598882
> 
> 赞同：0
> 
> 时间：2012-05-15T10:33:52.107
> 
> 标签：vb.net, datarow

我有一个程序可以读取文本文件并根据文件中的列动态创建数据表。

这似乎工作正常。

然后我尝试读取文本文件的其余部分，创建一个数据行以添加到我的表中。我正在使用下面的代码，但它对我不起作用。

查看plaincopy到剪贴板打印？

```
 Dim strFieldData As New ArrayList  
            Dim obj As New Object()
            'this code give me 12 separate elements  
            strFieldData = SplitDelimitedLine(strLineOfFile, ",", "|")  

            Dim dr As DataRow  

            For i As Integer = 0 To strFieldData.Count - 1  
                dr = DataForSQLTable.NewRow()  
                dr.ItemArray(i) = strFieldData.Item(i)  
            Next
            'however when I look at the value of dr.itemarray I see System.DBNull for all the fields  
            DataForSQLTable.Rows.Add(dr) 
```

我显然错过了诀窍。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:39:38.477

看起来您只添加了最后一项。您需要在 for 循环内移动加法线。

```
For i As Integer = 0 To strFieldData.Count - 1
    Dim dr as DataRow = DataForSQLTable.NewRow() 
    dr.ItemArray(i) = strFieldData.Item(i)
    DataForSQLTable.Rows.Add(dr) 
Next 
```

# java - JBoss7：使用 ReastEasy 和使用自定义 HttpRequestInterceptor 的 httpclient 违反加载程序约束

> ID：10598889
> 
> 赞同：4
> 
> 时间：2012-05-15T10:34:44.867
> 
> 标签：java, classloader, jboss7.x, resteasy

我在`@Named @ViewScoped`带有 JBoss-7.1.1-Final 的 Bean 中使用 RestEasy 客户端框架，通过自定义从 REST 服务中检索数据`HttpRequestInterceptor`：

```
RegisterBuiltin.register(ResteasyProviderFactory.getInstance());

DefaultHttpClient httpClient = new DefaultHttpClient();
httpClient.addRequestInterceptor(new PreemptiveAuthInterceptor("test","test"), 0);

ClientExecutor clientExecutor = new ApacheHttpClient4Executor(httpClient); //<---

//The error occurs above, the code below is only for completeness
MyRest rest = ProxyFactory.create(MyRest.class,
                                    "http://localhost:8080/rest",clientExecutor); 
```

这在独立的客户端应用程序中运行良好（当我删除 时也可以`ClientExecutor`，但我需要它来验证 REST 服务）。该 bean 位于 a`WAR`内的一个模块中`EAR`，resteasy 的依赖层次结构解析为以下内容：

![Resteasy依赖](../Images/d909623c991a4e7abf171634b27080fb.png)

`httpclient`or`httpcore`中没有`WAR`or `EAR`。在 Bean 内部，我得到以下异常：

```
java.lang.NoClassDefFoundError: org/apache/http/HttpRequestInterceptor 
```

似乎很容易（尽管我想知道 resteasy 包装）并且我添加`org.apache.httpcomponents:httpclient`了*编译*范围：

![在此处输入图像描述](../Images/fc57a8b6e86608d49a69dc4509d338c3.png)

不，我得到他以下例外：

```
java.lang.LinkageError: loader constraint violation: when resolving method   
  "org.jboss.resteasy.client.core.executors.ApacheHttpClient4Executor.<init>    
  (Lorg/apache/http/client/HttpClient;)V"
  the class loader (instance of org/jboss/modules/ModuleClassLoader)
      of the current class, my/TestBean, and
  the class loader (instance of org/jboss/modules/ModuleClassLoader)
      for resolved class, 
  org/jboss/resteasy/client/core/executors/ApacheHttpClient4Executor,
  have different Class objects for the type org/apache/http/client/HttpClient
  used in the signature my.TestBean.init(TestBean.java:65) 
```

**更新**要重现这一点，您不需要 REST 接口，在实例化 时会发生错误`ApacheHttpClient4Executor`，但您可能需要自定义`PreemptiveAuthInterceptor`：

```
public class PreemptiveAuthInterceptor implements HttpRequestInterceptor
{
  private String username;
  private String password;

  public PreemptiveAuthInterceptor(String username, String password)
  {
    this.username=username;
    this.password=password;
  }

  @Override
  public void process(org.apache.http.HttpRequest request, HttpContext context) throws HttpException, IOException
  {
    AuthState authState = (AuthState) context.getAttribute(ClientContext.TARGET_AUTH_STATE);

    authState.setAuthScope(org.apache.http.auth.AuthScope.ANY);
    authState.setCredentials(new UsernamePasswordCredentials(username,password));
    authState.setAuthScheme(new BasicScheme());

  }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T14:10:44.903

为避免在 JBoss 上*部署*应用程序时出现链接错误，请在 JBoss 安装的 modules 文件夹中配置模块`org.apache.httpcomponents`，但避免将 HttpComponents 中的 JAR 包含在您的应用程序中：

1.  将来自 HttpComponents 的所需 JAR 放在`modules/org/apache/httpcomponents/main`.
2.  `module.xml`在此目录中列出这些 JAR 。
3.  添加`Dependencies: org.apache.httpcomponents`到`MANIFEST.MF`您的组件中。

请注意，步骤 1 和 2 中提到的模块已经存在。但是，您可能希望包含其他 JARS（例如`httpclient-cache-x.y.z.jar`）或不同版本。

*在您的开发环境*中解析类是另一回事。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-02T01:24:33.620

我在类似的情况下遇到了同样的问题。所需的 HttpComponents 模块已经在我的 JBoss (AS 7.1.1) 模块目录中。因此，为了解决这个问题，我所要做的就是添加一个如 Eustachius 所述的清单条目，在 Maven 中您可以这样做：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-jar-plugin</artifactId>
            <configuration>
                <archive>
                    <manifestEntries>
                        <Dependencies>org.apache.httpcomponents</Dependencies>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

maven-war-plugin 的配置相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T14:42:54.853

如果在 Arquillian 测试中需要一个模块...

使用以下内容在 src/test/resources 中创建 arquillian-manifest.mf：

```
Manifest-Version: 1.0
Dependencies: org.jboss.resteasy.resteasy-jaxrs,org.apache.httpcomponents 
```

然后当你收缩包装：

```
WebArchive war = ShrinkWrap.create...
    .addAsManifestResource("arquillian-manifest.mf", "MANIFEST.MF") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T02:09:49.077

但是将依赖项： org.apache.httpcomponents 添加到组件的 MANIFEST.MF 中。

导致异常 - 原因：java.lang.IllegalStateException: JBAS014744: No META-INF/services/org.jboss.as.controller.Extension found for org.apache.httpcomponents:main at org.jboss.as.controller.parsing .ExtensionXml.loadModule(ExtensionXml.java:191) [jboss-as-controller-7.2.0.Final-redhat-8.jar:7.2.0.Final-redhat-8]

# .net - 用于类似 Gmail 的搜索的正则表达式

> ID：10598891
> 
> 赞同：5
> 
> 时间：2012-05-15T10:34:50.443
> 
> 标签：.net, regex

我一直在尝试为类似 Gmail 的搜索找出一个正则表达式，即：

```
name:Joe surname:(Foo Bar) 
```

...就像在[**这个话题**](https://stackoverflow.com/questions/2328926/implementing-google-search-operators)中一样。但略有不同：如果有一个没有 a 的文本`key:`，它也会被拆分，所以：

```
foo:(hello world) bar:(-{bad things}) some text to search 
```

会返回：

```
foo:(hello world)
bar:(-{bad things})
some text to search 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T13:54:54.607

没有办法使用单个正则表达式来获取您需要的一切。问题是没有可靠的方法来获取非关键字文本。

但是，如果我们先抓取并存储所有的关键字文本，然后用一个空字符串进行正则表达式替换（使用相同的正则表达式），我们会突然得到搜索字符串本身！

1.  使用以下正则表达式获取关键字和相关文本（[参见 RegExr](http://regexr.com?312kj)）：

    ```
    ([a-zA-Z]+:(?:\([^)]+?\)|[^( ]+))
    ```

2.  然后使用空字符串对完整的搜索字符串进行正则表达式替换，使用相同的正则表达式。结果字符串将是非关键字搜索文本。类似于以下内容：

    ```
    Regex.Replace(searchtext, @"[a-zA-Z]+:(?:\([^)]+?\)|[^( ]+)", "");

    ```

3.  在搜索文本的开头和结尾执行空白修剪

4.  从搜索文本中删除双倍（或更多空格）（可以通过正则表达式替换完成，替换为单个空格）：

    ```
    Regex.Replace(searchtext, @" {2,}", " ");
                                ^-- 注意空格:)

    ```

5.  ？？？

6.  利润！！！

*完全可以在#2 的正则表达式中执行空格删除，但是在处理正则表达式时，我倾向于保持它尽可能干净。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T11:20:37.650

走正则表达式路线时遇到的问题是您遇到了空格问题。可能有一个非常复杂的正则表达式来执行此操作，但对于一个简单的正则表达式，您会发现您的搜索不能包含关键字空格，例如：

> **作品**：网站：我的网站用户：约翰
> **失败**：网站：“我的真棒网站”用户：约翰

这将失败，因为它是基于空格进行标记的。因此，如果需要空间支持，请继续阅读...

我建议要么使用 Lucene .NET 引擎的内置解析器为您提供标记，要么使用语法和解析器，例如 GoldParser、Irony 或 Antlr。

对于您想要的东西来说，这听起来可能太长太复杂，但是已经为[GoldParser](http://goldparser.org/builder/index.htm)编写了一个语法来完成您正在做的事情，一旦语法完成，它实际上很容易。下面是一个语法示例：

```
"Name"     = 'Spruce Search Grammar'
"Version"  = '1.1'
"About"    = 'The search grammar for Spruce TFS MVC frontend'

"Start Symbol" = <Query>

! -------------------------------------------------
! Character Sets
! -------------------------------------------------
{Valid} = {All Valid} - ['-'] - ['OR'] - {Whitespace} - [':'] - ["] - ['']
{Quoted} = {All Valid} - ["] - ['']

! -------------------------------------------------
! Terminals
! -------------------------------------------------
AnyChar    = {Valid}+
Or = 'OR'
Negate = ['-']
StringLiteral   = '' {Quoted}+ '' | '"' {Quoted}+ '"'

! -- Field-specific terms
Project     = 'project' ':'
...
CreatedOn   = 'created-on' ':'
ResolvedOn  = 'resolved-on' ':'
! -------------------------------------------------
! Rules
! -------------------------------------------------

! The grammar starts below
<Query> ::= <Query> <Keywords> | <Keywords>
<SingleWord> ::= AnyChar

<Keywords> ::= <SingleWord>
              | <QuotedString> 
              | <Or> 
              | <Negate> 
              | <FieldTerms>

<Or> ::= <Or> <SingleWord> 
        | Or Negate
        | Or <SingleWord>
        | Or <QuotedString>

<Negate> ::= <Negate> Negate <SingleWord>
            | <Negate> Negate <QuotedString>
            | Negate <SingleWord>
            | Negate <QuotedString>

<QuotedString> ::= StringLiteral

<FieldTerms> ::= <FieldTerms> Project | <FieldTerms> Description | <FieldTerms> State 
                | <FieldTerms> Type | <FieldTerms> Area | <FieldTerms> Iteration 
                | <FieldTerms> AssignedTo | <FieldTerms> ResolvedBy 
                | <FieldTerms> ResolvedOn | <FieldTerms> CreatedOn
                | Project 
                | <Description>
                | State 
                | Type 
                | Area 
                | Iteration 
                | CreatedBy
                | AssignedTo 
                | ResolvedBy
                | CreatedOn
                | ResolvedOn

<Description> ::= <Description> Description | <Description> Description StringLiteral
                | Description | Description StringLiteral 
```

这为您提供了对以下内容的搜索支持：

> 解决者：john 项目：“惊人的 tfs 项目”

如果您查看该`Keywords`标记，您会发现它需要一个单字、一个 OR、一个带引号的字符串或一个否定 (NOT)。当这个定义变得递归时，困难的部分就来了，你可以在这`<Description>`部分看到。

该语法称为[EBNF](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)，它描述了您的语言格式。您可以在其中编写一些简单的东西，例如搜索查询解析器，或整个计算机语言。Goldparser 解析标记的方式会限制您，因为它会提前查找标记 ( [LALR](http://en.wikipedia.org/wiki/LALR) )，因此 HTML 和 Wiki 语法等语言会破坏您尝试编写的任何语法，因为这些格式不会强迫您关闭标记/标记. [Antlr](http://en.wikipedia.org/wiki/Antlr)为您提供 LL(*)，它更能容忍丢失的开始标签/令牌，但对于搜索查询解析器来说，您不需要担心。

我的语法和 C# 代码的代码文件夹可以在这个[项目](https://bitbucket.org/mrshrinkray/spruce/src/5809d7787e29/Spruce.Core/Search)中找到。

[QueryParser](https://bitbucket.org/mrshrinkray/spruce/src/5809d7787e29/Spruce.Core/Search/QueryParser.cs)是解析搜索字符串的类，语法文件是 .grm 文件，2mb 文件是 Goldparser 如何优化您的语法以基本上创建自己的可能性表。Calitha 是 GoldParser 的 C# 库，很容易实现。如果不写一个更大的答案，很难准确描述它是如何完成的，但是一旦你编译了语法，它就相当简单了，而且 Goldparser 有一个非常直观的 IDE 用于编写语法和大量现有的语法，如 SQL、C#、我相信 Java 甚至是 Perl 正则表达式。

这不是一个 1 小时的快速修复，就像你从正则表达式中获得的那样，接近 2-3 天，但是你确实学习了“正确”的解析方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T18:42:47.577

You don't need to solve this problem using only one regular expression. You can re-use the answer that [you linked to](https://stackoverflow.com/questions/2328926/implementing-google-search-operators) that you indicated would partially work.

The last array element is the only one that needs to be corrected.

Using your example you'd initially get:

```
[
    "foo:(hello world)",
    "bar:(-{bad things}) some text to search"
] 
```

The last item needs to be split into text up to and including the first closing bracket and text following it. You'd then replace the last item with the text up to and including the bracket and then you'd append the text following it to the array.

```
[
    "foo:(hello world)",
    "bar:(-{bad things})",
    "some text to search"
] 
```

The following pseudo code should explain how this can be done:

```
array; // Array returned when string was split using /\s+(?=\w+:)/
lastPosition = array.length-1;

lastElem = array[lastPosition]; // May contain text without a key

// Key is followed by an opening bracket
//  (check for opening bracket after semi-colon following key)
if ( lastElem.match( /^[^:]*:(/ ) ) {
    // Need to replace array entry with key and all text up to and including
    // closing bracket.
    // Additional text needs to be added to array.

    maxSplitsAllowed = 1;
    results = lastElem.split( /)\w*/ , maxSplitsAllowed );
    // White space following the bracket was included in the match so it
    //  wouldn't be at the front of the text without a key

    lastKeyAndText = results[0] + ')'; // Re-append closing bracket
    endingTextWithoutKey = results[1];

    array[lastPosition] = lastKeyAndText; // Correct array entry for last key
    array.append( endingTextWithoutKey ); // Append text without key

// Key is not followed by a closing bracket but has text without a key
//  (check for white space following characters that aren't white space
//   characters)
} else if (lastElem.match( /^[^:]*:[^\w]*\w/ )) {
    // Need to change array entry so that all text before first space
    // becomes the key.
    // Additional text needs to be added to array.

    maxSplitsAllowed = 1;
    results = lastElem.split( /\w+/ , maxSplitsAllowed );

    lastKeyAndText = results[0];
    endingTextWithoutKey = results[1];

    array[lastPosition] = lastKeyAndText; // Correct array entry for last key
    array.append( endingTextWithoutKey ); // Append text without key
} 
```

I assumed that brackets are required when white space characters are to be included within text that follows a key.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T21:54:13.893

这里的一个简单方法是将字符串与此模式匹配：

```
\w+:(?:\([^)]*\)|\S+)|\S+ 
```

那将匹配：

*   `\w+:`- 关键。
*   `(?:)`- 其次是...
    *   `\([^)]*\)`- 括号
    *   `|`- 或者
    *   `\S+`- 一些不是空格的字符。
*   `|\S+`- 或者只匹配一个单词。

请注意，此模式将单词分成不同的匹配项。如果你真的无法处理，你可以使用类似的东西`|(?:\S+(\s+(?!\w*:)[^\s:]+)*)`而不是 last `|\S+`。

工作示例：http: [//ideone.com/bExFd](http://ideone.com/bExFd)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T21:57:10.087

另一种选择，更健壮一点：
在这里，我们可以使用 .Net 模式的一些高级功能 - 它们保留所有组的所有捕获。这是构建完整解析器的有用功能。在这里，我包含了一些其他搜索功能，例如带引号的字符串和运算符（`OR`或 range `..`，例如）：

```
\A
(?>
    \s                      # skip over spaces.
    |
    (?<Key>\w+):            # Key:
    (?:                     # followed by:
        \(                     
        (?<KeyValue>[^)]*)      # Parentheses
        \)
        |                       # or
        (?<KeyValue>\S+)        # a single word
    )
    |
    (?<Operator>OR|AND|-|\+|\.\.)
    |
    ""(?<Term>[^""]*)""     # quoted term
    |
    (?<Term>\w+)            # just a word
    |
    (?<Invalid>.)           # Any other character isn't valid
)*
\z 
```

您现在可以轻松获取所有令牌及其位置（您还可以压缩 Key 和 KeyValue 捕获以将它们配对）：

```
Regex queryParser = new Regex(pattern, RegexOptions.IgnorePatternWhitespace);
Match m = queryParser.Match(query); // single match!
// ...
var terms = m.Groups["Term"].Captures; 
```

工作示例：http: [//ideone.com/B7tln](http://ideone.com/B7tln)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T12:29:10.717

这可能对你有用

在 Java 中：

```
p = Pattern.compile("(\\w+:(\\(.*?\\))|.+)\\s*");
m = p.matcher("foo:(hello world) bar:(-{bad things}) some text to search");
while(m.find()){
    Log.v("REGEX", m.group(1));
} 
```

产生：

> > 05-25 15:21:06.242: V/REGEX(18203): **foo:(hello world)** 05-25 15:21:08.061: V/REGEX(18203): **bar:(-{坏事})** 05-25 15:21:09.761：V/REGEX(18203)：**一些要搜索的文本**

只要标签在前，自由文本在后，正则表达式就可以工作。
即使对于标签，您也可以获取内容`m.group(2)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-25T11:19:24.840

你可能想看看这个[问题。](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

它包含以下正则表达式示例：

```
^((?!hede).)*$ 
```

正如答案的作者所说，“上面的正则表达式将匹配任何字符串，或没有换行符的行，不包含（子）字符串'hede'。”

因此，您应该能够将其与您发布的[主题](https://stackoverflow.com/questions/2328926/implementing-google-search-operators)中的信息和上述正则表达式相结合来解决您的问题。

希望这可以帮助！！！

# asp.net - 如何生成站点地图？（asp.net mvc3）

> ID：10598893
> 
> 赞同：-2
> 
> 时间：2012-05-15T10:34:51.220
> 
> 标签：asp.net, asp.net-mvc-3, menu, sitemap

这是我的数据库表

[数据库表](http://ole.michelsen.dk/blog/wp-content/uploads/2011/10/Sql2Tree-SQL-table-data.png)

如何生成站点地图？

控制器是类别

动作是 Id

就是这样

[页](http://ole.michelsen.dk/blog/wp-content/uploads/2011/10/Sql2Tree-HTML-nested-list.png)

* * *

TreeMenu.cs：

```
using System;
using System.Collections.Generic;

namespace Pmvc.Models
{
    public partial class TreeMenu
    {
        public int TreeId { get; set; }
        public int TreeParentId { get; set; }
        public string TreeName { get; set; }
        public List<TreeMenu> Children { get; set; }
    }

} 
```

StoreDetailsDynamicNodeProvider.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using MvcSiteMapProvider.Extensibility;
using Pmvc.Models;

namespace Pmvc
{
    public class StoreDetailsDynamicNodeProvider : DynamicNodeProviderBase
    {
        PMVCEntities pmvcDB = new PMVCEntities();
        public override IEnumerable<DynamicNode> GetDynamicNodeCollection()
        {

            var nodes = new List<DynamicNode>();

            foreach (var treemenu in pmvcDB.TreeMenu)
            {
                nodes.Add(CreateNode(treemenu));
            }

            return nodes;
        }

        private DynamicNode CreateNode(TreeMenu treemenu)
        {

            DynamicNode node = new DynamicNode();
            node.Action = "ProductDetails";
            node.Controller = "Product";
            node.Title = treemenu.TreeName;

            if (treemenu.Children != null)
            {
                foreach (var child in treemenu.Children)
                {
                    node.Children.Add(CreateNode(child)); //This line is wrong!
                }
            }
            return node;

        }

    }

} 
```

错误的：

'MvcSiteMapProvider.Extensibility.DynamicNode' 不包含 'Children' 定义，并且找不到扩展方法 'Children'

* * *

```
public class StoreDetailsDynamicNodeProvider : DynamicNodeProviderBase 
    {
        PMVCEntities pmvcDB = new PMVCEntities();
        public override IEnumerable<DynamicNode> GetDynamicNodeCollection()
        {
            // Build value 
            var returnValue = new List<DynamicNode>();

            // Create a node for each album 
            foreach (var treemenu in pmvcDB.TreeMenu)
            {
                DynamicNode node = new DynamicNode();
                node.Action = "ProductDetails";
                node.Controller = "Product";
                node.Title = treemenu.TreeName;
                node.RouteValues.Add("id", treemenu.TreeId);
                returnValue.Add(node);
            }

            // Return 
            return returnValue;
        } 
    } 
```

这是我的桌子

TreeId TreeParentId 树名

1 0 类别 1

2 1 菜单项 X

3 1 菜单项 Y

4 1 菜单项 Z

5 0 类别 2

6 5 其他菜单 1

7 5 其他菜单 2

8 0 空类别

9 7 菜单 Lvl 3

如何编写子节点代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:36:35.133

查看[MvcSitemap 提供程序](https://github.com/maartenba/MvcSiteMapProvider/wiki)。编写从数据库读取的[动态提供程序](https://github.com/maartenba/MvcSiteMapProvider/wiki/Dynamic-sitemaps)非常容易。

编辑 - 您是否阅读过文档或尝试实施任何内容？从他们的网站上几乎逐字复制：

在站点地图配置文件中，在适当的位置添加动态节点：

```
<mvcSiteMapNode 
    title="Details" 
    action="Details"   
    dynamicNodeProvider="MyProjectName.MyDynamicNodeProvider, MyProjectName" /> 
```

然后，编写实际的节点提供程序：

```
public class MyDynamicNodeProvider
    : DynamicNodeProviderBase 
{
    public override IEnumerable<DynamicNode> GetDynamicNodeCollection() 
    {
        // Build value 
        var returnValue = new List<DynamicNode>();

        // ... Here, get values from your database and build up
        // the list of nodes.  They can be in a tree structure
        // too since it appears that's how your data is - just
        // build the nodes in that way with sub-lists.

        // Return 
        return returnValue; 
    } 
} 
```

就是这样。

编辑 2 - 解决其他答案。

您提供的代码使树结构变平。在您的原始帖子中，您表明您已经能够[打印树结构](http://ole.michelsen.dk/blog/wp-content/uploads/2011/10/Sql2Tree-HTML-nested-list.png)。无论您看到什么代码，都可以应用深度优先遍历的相同原则。

以防万一这是一个模型而不是实际代码，这里有一些快速的伪代码来演示深度优先遍历。

```
public override IEnumerable<DynamicNode> GetDynamicNodeCollection() 
{
    // Build value 
    var nodes = new List<DynamicNode>();

    // Get all categories without parents.
    var rootCategories = db.GetRootCategories();  

    // Loop all root level categories, creating a node for each and adding
    // to the return value.
    foreach (var category in rootCategories)
    {
        nodes.Add(CreateNode(category));
    }
    return nodes;
}

private DynamicNode CreateNode(Category category)
{
    // Create a new node for the category
    DynamicNode node = new DynamicNode();

    node.Name = category.Name;
    // ... set node properties here ...

    // If the category has children, then continue down the tree
    // and create nodes for them.  This will continue recursively
    // to the bottom of the tree.
    // Note that I'm just guessing on the property names because
    // you didn't show us the code for what your entity actually
    // looks like.  This is why you should always show what code
    // you've attempted - you can get better, more precise answers
    // instead of complete guesses.
    if (category.Children != null)
    {
        foreach (var child in category.Children)
        {
            // For each child, recursively branch into them.
            node.Children.Add(CreateNode(child));
        }
    }

    return Node;
} 
```

请注意，这没有经过测试或研究 - 它只是为了显示树遍历。

# java - Mockito NumberFormat 在 when() 方法中模拟 NullPointer

> ID：10598898
> 
> 赞同：4
> 
> 时间：2012-05-15T10:35:07.090
> 
> 标签：java, junit, mockito

所以我有这段代码给我一个 NullPointerException

```
NumberFormat formatterFake = mock(NumberFormat.class);  
when(formatterFake.format(1)).thenReturn("1"); 
```

问题是我在 when() 方法中遇到异常：

```
java.lang.NullPointerException
    at java.text.NumberFormat.format(NumberFormat.java:297) 
```

我还尝试模拟具体的课程，给我同样的结果。

```
NumberFormat formatterFake = mock(DecimalFormat.class); 
```

我对 Mockito 有点陌生，任何帮助都会非常有用。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:53:43.360

## 发生了什么

好的，所以你在这里做所有事情是为了在模拟上存根一个方法。

`NumberFormat`是一个抽象类。这通常很好，因为 Mockito 可以像普通类一样模拟抽象类。问题与`NumberFormat#format(long)`方法的实现有关。

查看我正在使用 Oracle jdk 1.7.0 update 2 的实现的源代码，您可以看到此方法的作用：

```
public final String format(long number) {
        return format(number, new StringBuffer(), DontCareFieldPosition.INSTANCE).toString();
    } 
```

您正在模拟的格式方法实际上是调用另一个格式方法：`NumberFormat#format(long, StringBuffer, FieldPosition)`它驻留在同一个抽象类中。然后它返回调用**该**`toString()`调用结果的结果。这是一个**FINAL**方法，Mockito 不能存根。

 ****当您使用 when-then 语法来存根方法时，Mockito 实际上会调用您正在存根的方法（如果它具有最终实现）。所以当你写：

```
when(formatterFake.format(1)) 
```

您实际上是在调用`format`抽象`NumberFormat`类中实现的方法的第一个重载。

第一次重载的最终实现`format`调用第二个`format`方法。第二个`format` **是**`NumberFormat`. 所以没有实现调用。

没问题，我们正在使用模拟。Mockito 为 mock 中每个未实现的方法提供一个 Default Stubbing。 [默认情况下，对于所有返回值的方法，mock 返回 null、空集合或适当的原始/原始包装器值（例如：0、false、...对于 int/Integer、boolean/Boolean、...）。](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html)

因此，当尝试对对 的调用进行存根时`NumberFormat#format(long)`，因为它有一个实现，您最终会调用`NumberFormat#format(long, StringBuffer, FieldPosition)`其返回的默认存根`null`，然后是`.toString()`-ed 并且您的 NPE 有原因。

## 解决方案

通常你会模拟一个接口，而不是直接模拟一个类，这将完全避免此类问题的可能性，因为没有最终的任何东西。但是，由于这里没有可模拟的接口，所以它不是一个选项。

您可以直接模拟 format 的 3-arg 重载：然后它应该允许您根据需要调用 format 的一个参数版本：

```
 @Test
  public void test() {
    final NumberFormat mockFormatter = mock(NumberFormat.class);

    final StringBuffer buffer = new StringBuffer("1");
    when(mockFormatter.format(anyLong(), any(StringBuffer.class), any(FieldPosition.class))).thenReturn(buffer);

    System.out.println("Result: " + mockFormatter.format(1));
  } 
```

但是，我不确定这是最好的解决方案。也许其他人会参与进来。

**编辑：**

在看到 Garrett Hall 的回答后，我更明确地说，当我谈论实施时，我的意思是**最终**实施。

正如他所建议的，如果您愿意走这条路，PowerMock 将允许直接模拟最终格式方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:46:06.793

您将需要使用[PowerMock](http://code.google.com/p/powermock/)来模拟最终方法。

我不确定你为什么需要在`NumberFormat`类上模拟 final 方法，这是一种测试气味。请同时发布您的测试。****

# html - 如何使用分组集合选择来显示多选？

> ID：10598901
> 
> 赞同：1
> 
> 时间：2012-05-15T10:35:16.560
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, grouped-collection-select

我正在使用以下代码显示类别的树视图选择框：

```
grouped_collection_select(:logic, :logic_id, Logic.top_level, :child, :name, :id, :name, :include_blank => true) 
```

如何更改它以允许多项选择？

另外，是否可以让它显示复选框而不是选择框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:31:04.137

为了在选择框中显示复选框[jquery multiselect](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)我没有尝试过，`grouped_collection_select`但使用 select/select_tag`option_groups_from_collection_for_select`更灵活。

# c# - 单个文本框样式以红色显示所有负数

> ID：10598902
> 
> 赞同：1
> 
> 时间：2012-05-15T10:35:19.643
> 
> 标签：c#, wpf, xaml, binding, datatrigger

乍一看，该任务类似于 [WPF TextBlock Negative Number In Red](https://stackoverflow.com/questions/3205096/wpf-textblock-negative-number-in-red)

在我的情况下，我必须显示一个`ItemsControl`点集合。每个 Point 都有几个 NumericValue 类型的属性，它们最终是`Nullable<double>`.

```
public class Point
{
    NumericValue Proposal { get; set; }
    NumericValue Accepted { get; set; }
    NumericValue Approved { get; set; }
    ... etc.
} 
```

我将 Point 的所有这些属性显示为 TextBoxes。NumericValue 类具有 IsNegative 属性，如果 IsNegative=True，我希望相应文本框的前景为红色。

但是，我不希望在每个单独的 TextBox 的样式中定义此规则，而是制作一个将 DataTrigger 绑定到 IsNegative的**单一样式。**

简化的 XAML 如下所示。

```
<ItemsControl ItemsSource="{Binding Path=Points}">
...
    <TextBox Text="{Binding Path=Data.Proposal.Value}" ... />
    <TextBox Text="{Binding Path=Data.Accepted.Value}" ... />
...
</ItemsControl> 
```

请帮我解决该单一样式的 DataTrigger 的绑定定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:44:37.443

像这样使用[WPF TextBlock Negative 中](https://stackoverflow.com/questions/3205096/wpf-textblock-negative-number-in-red)给出的红色红色转换器

```
 <ItemsControl ItemsSource="{Binding Path=Points}">
        ...
        <TextBox Text="{Binding Path=Data.Proposal.Value}" Foreground="{Binding Data.Proposal.IsNegative, Converter={StaticResource valueToBackground}}" />
        ...
    </ItemsControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:04:02.973

您可以遵循[How to: Conditional formatting using XAML in WPF](http://blog.clauskonrad.net/2011/04/how-to-conditional-xaml-in-wpf.html)。我想这对你会有帮助。

# php - 是否可以创建网页打印视图的 PDF？

> ID：10598907
> 
> 赞同：2
> 
> 时间：2012-05-15T10:35:30.977
> 
> 标签：php, css, pdf, printing, download

我有一个带有单独打印样式表的网页。当我查看打印预览时，它看起来正是我想要的样子。

有没有一种方法可以生成 PDF 并在单击/提交时开始下载该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:40:01.097

要在 PHP 中生成 PDF，您可以使用 FPDF。浏览以下链接以了解有关 fpdf 的更多信息

```
http://www.fpdf.org/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:51:47.613

您可以使用[freepdf](http://freepdfxp.de/) as pdf 打印您的网页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:43:53.397

我建议使用类似 wkhtmltopdf 的东西，它将 HTML 转换为 PDF 格式。您可能需要通过 http 读取您自己的站点，并在发送给用户之前将副本保存到磁盘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:48:01.317

您可以使用以下之一：

> [http://code.google.com/p/dompdf/](http://code.google.com/p/dompdf/)
> [http://www.tufat.com/docs/html2ps/](http://www.tufat.com/docs/html2ps/)
> [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

The first two are runnable directly from PHP, suggested if you do not have a Linux server where you can run shell commands. The last one is the best HTML->PDF converter, but it's not a PHP function, it's a Linux shell command. You can run it from PHP if your server allows it.

# xpath - XPath - 如何从一个文本节点中提取文本的特定部分

> ID：10598912
> 
> 赞同：3
> 
> 时间：2012-05-15T10:35:44.103
> 
> 标签：xpath

我只想从 td 中提取部分文本，例如“FLAC”。如何使用 XPath 完成？

我试过 //text()[contains(., 'FLAC')]，但它返回给我整个文本。

```
 <tr>
                        <td class="left">Format plików</td>
                        <td>
                                                                AVI, FLV, RM, RMVB, FLAC, APE, AAC, MP3, WMA, OGG, BMP, GIF, TXT, JPEG, MOV, MKV, DAT, DivX, XviD, MP4, VOB
                                                        </td>
                    </tr> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T12:21:57.477

您必须首先指定树中的位置，并且由于您有多个`<td>`元素，您首先要查找包含文本的节点。

```
substring(//tr/td[contains(@class, 'left')]/following-sibling::text()[1], startIndex, length) 
```

或者

```
substring(//tr/td[@class='left']/following-sibling::text()[1], startIndex, length) 
```

**根据评论**更新：****

 **T/F 包含(//tr/td[@class='left']/following-sibling::text()[1], 'FLAC')

这将为您提供同级元素的 T/F，其后有单词“FLAC”。您可以使用 substring() 来获取该字符串的子集，但这仅适用于静态情况。我建议使用不同的方法（例如 XSLT）来更改/分隔字符串。希望这可以帮助！

**更新 2**

```
substring('FLAC',1,4*contains(//tr/td[@class='left']/following-sibling::text()[1], 'FLAC')) 
```

如果您正在检查的节点中存在 FLAC，这将返回 FLAC，如果没有，则返回空白....

**分步分解：**

1.  `//tr/td[@class='left']`- 这将返回属性“class”设置为“left”的*所有节点* `<td>`

2.  `/following-sibling::text()`*- 这将返回上面节点之后*的所有节点的文本。

3.  添加 [1] 会返回上面列表中的**第一个**节点。

4.  如果文本中存在“FLAC”，则将其包装在 contains(aboveValue, 'FLAC') 中将返回 TRUE（或在此示例中为 1），否则返回 False(0)。

5.  将所有这些包装在 substring('FLAC',1,4*aboveValue) 中相当于 XPath 1.0 中的 If/Then/Else，因为没有内置函数可以这样做：如果 'FLAC' 是现在，拉取子字符串 1,4*(true=1)=4，也就是整个字符串。如果 'FLAC' 不存在，则拉取子字符串 1,4*(false=0)=0，它不是字符串。

还有一点需要注意，contains() 是区分大小写的，所以如果这个字段可以有“flac”，它将返回 false。要检查 FLAC 的所有大小写混合，请使用 translate()，[例如此处。](https://stackoverflow.com/questions/9804281/selectnodes-with-xpath-ignoring-cases/9805020#9805020)**

# javascript - 在 Leaflet.js 或非 Google 地图库中使用 Fusion Tables 磁贴？

> ID：10598914
> 
> 赞同：6
> 
> 时间：2012-05-15T10:35:47.787
> 
> 标签：javascript, google-maps, openstreetmap, google-fusion-tables, leaflet

我喜欢 Google Fusion Tables 可以有效地在地图上显示数千个标记的事实。

我的问题：在以下任一情况下，是否可以（在技术上和法律上）在 OpenStreetMap 地图图块上显示[Fusion Tables 图层：](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-fusiontables-simple)

1.  将[Leaflet.js](http://leaflet.cloudmade.com/)与 OSM 切片和 Fusion Tables 层一起使用。我不确定这在技术上是否可行，更不用说在法律上。
2.  将 Google Maps API 与[Fusion Tables 图层](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-fusiontables-simple)和[OpenStreetMap](http://www.openstreetmap.org/)图块一起使用。从技术上讲，这显然是可能的，但我不确定 Fusion Tables 结果是否必须显示在谷歌地图图块上（就像谷歌地理编码器结果一样）。

[我在服务条款](https://developers.google.com/fusiontables/terms)中看不到任何明确排除非 Google 地图图块的内容。我的首选选项是 Leaflet，但我不知道是否有办法使用 Leaflet 调用 Fusion Tables 图层。

注意：我不是在谈论对 Fusion Tables 进行 JSON 查询和渲染单个标记，我特别是在谈论可以让您显示数千个标记而无需单独渲染它们的图块层。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:38:55.137

@flossfan，查看[CartoDB.com](http://www.CartoDB.com)。你会得到一个很好的用于动态表和磁贴查询的 SQL API，以及非常好的样式选项。您可以将它与 OSM 或任何其他基本地图（包括 Google 地图）一起使用。他们实际上也有一个 CartoDB-Leaflet 库：

[https://github.com/Vizzuality/cartodb-leaflet](https://github.com/Vizzuality/cartodb-leaflet)

CartoDB 和 Fusion Tables 的比较（来自制作 CartoDB 的人）包括一个演示，其中显示了很多点：

[http://blog.cartodb.com/post/21264086445/comparing-fusion-tables-to-open-source-cartodb](http://blog.cartodb.com/post/21264086445/comparing-fusion-tables-to-open-source-cartodb)

如果您不需要 CartoDB 提供的动态查询和样式，请查看[MapBox.com](http://www.mapbox.com)和 TileMill。您可以使用任意数量的点来设计非常漂亮的地图，然后将它们烘焙到静态地图图块中。这个演示展示了很多要点：

[http://tiles.mapbox.com/dhcole/map/dots-and-lines](http://tiles.mapbox.com/dhcole/map/dots-and-lines)

CartoDB 和 TileMill 都是开源的，它们非常适合您的绘图工具箱。

我敢肯定，在 Fusion Tables、CartoDB 和 TileMill 之间，您会找到一些显示数据的方法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:53:34.657

不幸的是，没有记录对 Fusion Tables 磁贴的访问权限，因此根据[服务条款第 10.1 节](https://developers.google.com/maps/terms#section_10_1)：

> 您不得通过服务中提供的技术或方式以外的任何技术或方式或通过 Google 可能指定的其他明确授权方式访问或使用 Maps API 或任何内容。例如，您不得通过 Maps API 以外的接口或渠道（包括未记录的 Google 接口）访问地图图块或图像。

此外，`FusionTablesLayer`不仅仅是为了显示：它还提供点击事件。我绝对建议您使用 Google Maps Javascript API 来显示`FusionTablesLayer`.

# ios - 带有渐变背景的 iOS UITextField

> ID：10598915
> 
> 赞同：0
> 
> 时间：2012-05-15T10:35:52.393
> 
> 标签：ios, xcode, uitextfield, subclass

我想要一个带有渐变背景的 UITextField，以使我的项目的一个选项在视觉上更具吸引力。

我正在尝试继承 UITextField 类来覆盖 initWithFrame，但它不起作用。我以前从未尝试过对 UIControl 进行子类化，所以我想我错过了一些东西。

有人可以帮帮我吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:47:44.400

这应该有效：

```
textView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"gradient.jpg"]]; 
```

但是您必须将控件更改为 TextView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:46:18.760

`UITextField`has 属性，`background`它是 type `UIImage`。因此，您可以`UIImage`在运行时绘制或加载准备好的图像并将其设置为 UITextField 的背景。通过这种方式，您可以为文本字段实现任何您喜欢的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:57:28.353

你可以试试这个答案：[iPhone UITextField 背景颜色](https://stackoverflow.com/questions/1971598/iphone-uitextfield-controlling-background-color)

并使用 CAGradientLayer 添加渐变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T11:47:36.413

你就在它附近，对它进行子类化是最好的主意，但不要覆盖`initWithFrame`只是在你的子类化 .m 文件中使用下面的代码

```
 - (CGRect)textRectForBounds:(CGRect)bounds
{
    return CGRectInset(bounds, 5, 0);
}

- (CGRect)editingRectForBounds:(CGRect)bounds
{
    return CGRectInset(bounds, 5, 0);   
}

- (void)drawRect:(CGRect)rect
{
    UIImage *textFieldBackground = [[UIImage imageNamed:@"text_field_teal.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(15.0, 5.0, 15.0, 5.0)];
    [textFieldBackground drawInRect:[self bounds]];
} 
```

因为这对我有用，我认为它对你有用 快乐编码:) 享受这一天！

# networking - 从不在网络上的另一台计算机访问 localhost

> ID：10598926
> 
> 赞同：6
> 
> 时间：2012-05-15T10:36:29.027
> 
> 标签：networking, ip, localhost, lan, easyphp

在你说它是骗子之前，这与[this](https://stackoverflow.com/questions/9208472/connect-to-localhost-from-another-computer-in-network)、[this](https://stackoverflow.com/questions/3496165/how-to-access-http-localhost8080-from-another-computer-in-the-network)、[this](https://stackoverflow.com/questions/5524116/accessing-localhost-xampp-from-another-computer-over-lan-network-how-to)或[this](https://stackoverflow.com/questions/9682262/how-do-i-connect-to-this-localhost-from-another-computer-on-the-same-network)不一样。

我的问题是你如何在全球范围内做到这一点。

例如，考虑这个。我的电脑上运行着 EasyPHP。目前我的IP地址（全球）是223.231.178.118

现在，假设有其他人（可能完全在不同的国家）想要访问我的 ip (223.231.178.118)。我确实知道如何从同一个网络访问 192.168.xx。如果可能的话，我只想知道如何在全球范围内做到这一点。

PS 1：运行 EasyPHP 的计算机位于路由器后面。

PS 2：我的 IP（本地 IP 是，但全局 IP 不是）不是静态的。但是让我们假设想要访问我的本地主机的人确实知道我的动态 IP。例如，假设我告诉想要访问我的本地主机的人是我的朋友，然后我通过电话告诉他我的 IP 是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-15T07:40:45.717

您可以使用[ngrok](https://ngrok.com/)或[Forward之类的工具](https://forwardhq.com/)

这篇文章中有更多工具[从任何地方访问本地主机](http://www.sitepoint.com/accessing-localhost-from-anywhere/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:48:25.817

您的本地 IP 地址“192.168.xx”只有您的路由器知道，局域网外的每个人都不知道。全局 IP 地址（在您的示例中为 223.231.178.118）是路由器的全局地址。

为了能够访问本地计算机上的 EasyPHP 服务器，您需要将相应的端口（对于 http 网络服务器，默认值为 80，但对于 EasyPHP 可能不同）从您的路由器转发到您的本地 IP。您需要查看路由器手册以了解如何执行此操作。

完成后，您只需告诉想要访问您本地计算机的人您的路由器的全局 IP 地址，他将通过浏览该全局地址看到您的 EasyPHP 响应。

# php - 我需要获取数组的值

> ID：10598930
> 
> 赞同：-2
> 
> 时间：2012-05-15T10:36:36.353
> 
> 标签：php, arrays, codeigniter

我的数组结构是

```
Array
(

    [customer_id] => Array
        (
            [0] => Array
                (
                    [customer_id] => 123
                )
        )
    [menu_item_net_price] => 1700
    [menu_item_tax_price] => 4%
    [menu_item_gross_price] => 1700
    [provider_id] => 123
) 
```

我需要得到`[customer_id] => 123`. 告诉我我该怎么做？

我的问题仍然没有解决，所以我发布代码：

```
$data['customer_id'] = $this->session->userdata('id');
            $data['menu_item_net_price']= $netPrice;
            $data['menu_item_tax_price']= '4%'; 
            $data['menu_item_gross_price']= $netPrice;
            $data['provider_id']= 123; 
            echo '<pre>';
            print_r($data);
            echo '</pre>';
            exit(0); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T10:37:19.613

```
echo $data['customer_id'][0]['customer_id']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:44:02.297

如果你想保持数组的格式，你可以这样做：

```
<?php
$data['customer_id'] = $this->session->userdata('id');
$data['customer_id'] = $data['customer_id'][0]['customer_id'];
$data['menu_item_net_price']= $netPrice;
$data['menu_item_tax_price']= '4%';
$data['menu_item_gross_price']= $netPrice;
$data['provider_id']= 123;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:36:22.290

如果您更改数组的格式，这很简单：

```
<?php
$data[$this->session->userdata('id')]['menu_item_net_price']= $netPrice;
$data[$this->session->userdata('id')]['menu_item_tax_price']= '4%';
$data[$this->session->userdata('id')]['menu_item_gross_price']= $netPrice;
$data[$this->session->userdata('id')]['provider_id']= 123;

echo $data[$customer_id]['provider_id']; //echoes 123
?> 
```

# objective-c - 在某个日期或事件打开 iCal 应用程序的 URL 方案？

> ID：10598932
> 
> 赞同：5
> 
> 时间：2012-05-15T10:36:38.737
> 
> 标签：objective-c, cocoa-touch, calendar, icalendar, eventkit

[Apple URL Scheme Reference](https://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html)很好地概述了许多 URL 方案，您可以使用它们来打开带有一些参数的某些内置应用程序。

我知道这不是内置应用程序响应的所有可能 URL 方案的完整列表，因为还有一些方法可以在各个页面上[打开系统设置。](http://handleopenurl.com/scheme/apple-settings-app)网站[http://handleopenurl.com](http://handleopenurl.com)是收集所有可能的 URL 方案的一个很好的尝试，它上面有很多内置的应用程序。

我想使用 URL 方案打开的一个应用程序是日历应用程序（以前称为 iCal）。但是有方案吗？如果您知道有，请分享（可以先将其添加到 handleopenurl.com 吗？）。干杯!

*PS 是的，我知道 EventKit(UI) 框架的功能。但我想专门打开 iCal 应用程序。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:48:17.643

**`Probably the Answer is No`**. 您需要查看这个[类似的问题](https://stackoverflow.com/questions/1341627/is-there-an-iphone-url-shortcut-for-calendar)和其他[类似的问题](https://stackoverflow.com/questions/1752342/how-to-create-add-to-calendar-link-on-web-page-for-iphone)，这些问题被标记为已接受，因此希望是真的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-08T19:39:56.443

我找不到有关参数的任何文档，但`ical://`在打开的浏览器地址栏中键入会在 macOS Sierra 10.12.1 上打开 Calendar.app。

注意：就Apple应用程序而言，这也适用于`reminders://`......也许其他人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:39:36.883

你可以试试这段代码：

```
NSString* launchUrl = @"calshow://";
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: launchUrl]]; 
```

# python - SELECT EXISTS 与 LIMIT 1

> ID：10598935
> 
> 赞同：4
> 
> 时间：2012-05-15T10:36:52.107
> 
> 标签：python, sql, postgresql

我看到`SELECT EXISTS`很多使用：

```
 if db.query("""
        SELECT EXISTS (
            SELECT 1 FROM checkout
            WHERE checkout_id = %s
        )
    """ % checkout_id).getresult()[0][0] == 't': 
```

与我更喜欢的相比：

```
 if db.query("""
        SELECT 1 FROM checkout
        WHERE checkout_id = %s
        LIMIT 1
    """ % checkout_id).getresult(): 
```

哪个是首选，为什么？

PS 我正在使用 Python 和 PosgreSQL。

```
cert=> explain SELECT EXISTS (SELECT 1 FROM checkout WHERE checkout_id = 3);
                                      QUERY PLAN                                      
--------------------------------------------------------------------------------------
 Result  (cost=4.03..4.03 rows=1 width=0)
   InitPlan
     ->  Index Scan using checkout_pkey on checkout  (cost=0.00..4.03 rows=1 width=0)
           Index Cond: (checkout_id = 3)
(4 rows)

cert=> explain SELECT 1 FROM checkout WHERE checkout_id = 3 limit 1;
                                     QUERY PLAN                                     
------------------------------------------------------------------------------------
 Limit  (cost=0.00..4.03 rows=1 width=0)
   ->  Index Scan using checkout_pkey on checkout  (cost=0.00..4.03 rows=1 width=0)
         Index Cond: (checkout_id = 3)
(3 rows) 
```

我的意思是，为什么从结果中获取一行并检查它的第一列是否为真，如果我可以检查是否有任何行，意思相同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T10:47:26.300

在我看来，第二个语句是有问题的，如果条件不满足，它不会返回一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:44:20.497

当您使用时，`EXPLAIN`您可以看到第一条语句将执行额外的子查询，而第二条则不会。

这就是为什么我更喜欢使用`limit`而不是`exists`

例子：

```
explain SELECT EXISTS (SELECT 1 FROM checkout WHERE id = 3);
explain SELECT 1 FROM checkout WHERE id = 3 limit 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T11:45:18.003

正如您在执行计划中清楚地看到的那样，PostgreSQL 似乎足够聪明地对待这两个语句。

我对具有 ~150000 行的本地表和根据条件从中选择 ~100 行的测试也显示出相同的行为

底线是：使用哪一个并不重要，但您应该意识到其他 DBMS 的行为方式可能不同。

# sql - MS.Access VBA - 错误 3061：参数太少。预期 2

> ID：10598936
> 
> 赞同：2
> 
> 时间：2012-05-15T10:36:54.120
> 
> 标签：sql, ms-access, vba, crosstab

我是 VBA 新手。现在，我想使用临时表创建可编辑的交叉表。当我想根据编辑的数据更新规范化表时遇到问题。当我运行我的代码时，我收到此错误，错误 3061：参数太少。预期 2.有人可以帮我检查我的代码吗？提前致谢

```
Public Sub Normalize()
Dim rs As DAO.Recordset
On Error GoTo EH

'delete existing data from temp table
CurrentDb.Execute "DELETE * FROM tblNormalize;", dbFailOnError + dbSeeChanges

'get a recordset of the column headers
Set rs = CurrentDb.OpenRecordset("SELECT DISTINCT newvalue FROM Table1;")
Debug.Print
rs.MoveFirst
Do While rs.EOF = False

' "un" crosstab the data from crosstab table into Normalize table
CurrentDb.Execute "INSERT INTO tblNormalize (product, spec, descr,newvalue, Rate )" &  Chr(10) & _
"SELECT product,spec,descr, " & rs.Fields("newvalue") & ", [" & rs.Fields("newvalue") & "]" & Chr(10) & _
"FROM tblCrosstab;", dbFailOnError + dbSeeChanges

Debug.Print rs.Fields("newvalue")
rs.MoveNext
Loop
rs.Close
Set rs = Nothing

'update the original normalized dataset

CurrentDb.Execute "UPDATE tblNormalize INNER JOIN Table1 t1 ON (tblNormalize.newvalue = t1.newvalue) " & _
" AND (tblNormalize.product = t1.product) AND (tblNormalize.spec = t1.spec) " & _
" AND (tblNormalize.descr = t1.descr)" & _
" SET Table1.Rate = tblNormalize.Rate;", dbFailOnError + dbSeeChanges

Exit Sub

EH:
MsgBox "Error " & Err.Number & ": " & Err.Description, vbOKOnly, "Error"

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:03:18.553

你正在为自己创造一个受伤的世界。除此之外，这个：

```
"INSERT INTO tblNormalize (product, spec, descr,newvalue, Rate )" &  Chr(10) & _
"SELECT product,spec,descr, " & rs.Fields("newvalue") & ", [" & rs.Fields("newvalue") & "]" & Chr(10) & _
"FROM tblCrosstab;" 
```

一切都会出错。

尝试：

```
"INSERT INTO tblNormalize (product, spec, descr,newvalue, Rate )" & _
" SELECT product,spec,descr, " & rs.Fields("newvalue") & ", [" _
& rs.Fields("newvalue") & "] FROM tblCrosstab;" 
```

此外，使用 Debug.Print 将字符串写入即时窗口 (Ctrl+G) 并检查它是否在查询设计窗口中工作。该错误通常是由于缺少字段（列）的拼写错误。

# django - 如何在 Django 中重命名 values() 中的项目？

> ID：10598940
> 
> 赞同：151
> 
> 时间：2012-05-15T10:37:10.303
> 
> 标签：django, django-orm

我想[在 djangoproject.com 的这张票中](https://code.djangoproject.com/ticket/12222)做几乎相同的事情，但有一些额外的格式。从这个查询

```
>>> MyModel.objects.values('cryptic_value_name')
[{'cryptic_value_name': 1}, {'cryptic_value_name': 2}] 
```

我想得到这样的东西：

```
>>> MyModel.objects.values(renamed_value='cryptic_value_name')
[{'renamed_value': 1}, {'renamed_value': 2}] 
```

还有另一种更内置的方式还是我必须手动执行此操作？

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2015-09-15T08:14:11.860

从`django>=1.8`您可以使用注释和 F 对象

```
from django.db.models import F

MyModel.objects.annotate(renamed_value=F('cryptic_value_name')).values('renamed_value') 
```

也`extra()`将被弃用，来自[django 文档：](https://docs.djangoproject.com/en/1.8/ref/models/querysets/#django.db.models.query.QuerySet.extra)

> 这是一个旧的 API，我们的目标是在未来的某个时候弃用。仅当您无法使用其他查询集方法表达您的查询时才使用它。如果您确实需要使用它，请在您的用例中使用 QuerySet.extra 关键字提交票证（请先检查现有票证列表），以便我们可以增强 QuerySet API 以允许删除 extra()。我们不再改进或修复此方法的错误。

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2017-10-13T11:55:27.453

不使用任何其他管理器方法（在 上测试`v3.0.4`）：

```
from django.db.models import F

MyModel.objects.values(renamed_value=F('cryptic_value_name')) 
```

摘自[Django 文档](https://docs.djangoproject.com/en/3.0/ref/models/expressions/#f-expressions)：

> **F()**对象表示模型字段或注释列的值。它可以引用模型字段值并使用它们执行数据库操作，而无需将它们从数据库中拉出到 Python 内存中。

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2012-05-15T10:45:04.410

这有点hacky，但您可以使用以下[`extra`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra)方法：

```
MyModel.objects.extra(
  select={
    'renamed_value': 'cryptic_value_name'
  }
).values(
  'renamed_value'
) 
```

这基本上是`SELECT cryptic_value_name AS renamed_value`在 SQL 中完成的。

另一种选择，如果您总是想要重命名的版本但数据库具有神秘的名称，则使用新名称命名您的字段，但用于[`db_column`](https://docs.djangoproject.com/en/dev/ref/models/fields/#db-column)引用数据库中的原始名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T17:44:10.350

# 我正在使用 django 1.11.6

# （键：值对与接受的答案相反）

这就是我如何使它适用于我的项目

```
def json(university):
    address = UniversityAddress.objects.filter(university=university)
    address = address.extra(select={'city__state__country__name': 'country', 'city__state__name': 'state', 'city__name': 'city'})
    address = address.values('country', 'state', "city", 'street', "postal_code").get()
    return address 
```

请注意，同时添加 objects.filter().extra().values() 与上述相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-24T20:06:37.827

尝试作为 kwargs 传递：

```
MyModel.objects.annotate(**{'A B C':F('profile_id')}).values('A B C') 
```

在我的情况下，结果集中每个值的键中都包含空格和其他特殊字符，所以这起到了作用。

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2014-07-21T11:42:14.763

如果你想重命名模式的几个字段，它就更简单了。

## 尝试

```
projects = Project.objects.filter()
projects = [{'id': p.id, 'name': '%s (ID:%s)' % (p.department, p.id)} for p in projects] 
```

在这里，我的表中没有`name`字段，但稍作调整后我可以得到它。

# iphone - 输入某些字符后如何限制用户在文本字段中输入

> ID：10598943
> 
> 赞同：0
> 
> 时间：2012-05-15T10:37:15.743
> 
> 标签：iphone, objective-c, ios5

我在我的应用程序中使用文本字段，我想限制用户在文本字段中仅输入 15 个字符。之后，他/她**将无法**在文本字段中输入内容。

我该如何设置这种功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:15:24.277

//它的代码很大，但对我来说工作正常

//在此代码中输入您的文本字段名称而不是 YourTextFieldName

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range     replacementString:(NSString *)string

     {

      if (textField==YourTextFieldName)
      {

        NSString *text = nil;
        int MAX_LENGTH = 12;

        text = YourTextFieldName.text;
        if ([text length] <= 7)
         {
            NSString *separator = @"-";
            int seperatorInterval = 3;
            NSString *originalString = [textField.text         stringByReplacingOccurrencesOfString:separator withString:@""];

            if (![originalString isEqualToString:@""] && ![string isEqualToString:@""])
            {

                NSString *lastChar = [YourTextFieldName.text substringFromIndex:[YourTextFileName.text length] - 1];
                int modulus = [originalString length] % seperatorInterval;

                if (![lastChar isEqualToString:separator] && modulus == 0)
                {
                    YourTextFieldName.text = [YourTextFieldName.text stringByAppendingString:separator];
                }
            }
        }
        if ([text length] > 7)
        {
            NSString *separator = @"-";
            int seperatorInterval = 6;
            NSString *originalString = [textField.text stringByReplacingOccurrencesOfString:separator withString:@""];

            if (![originalString isEqualToString:@""] && ![string isEqualToString:@""])
            {

                NSString *lastChar = [YourTextFieldName.text substringFromIndex:[YourTextFieldName.text length] - 1];
                int modulus = [originalString length] % seperatorInterval;

                if (![lastChar isEqualToString:separator] && modulus == 0)
                {

                    YourTextFieldName.text = [YourTextFieldName.text stringByAppendingString:separator];
                }
            }
        }

           NSUInteger newLength = [textField.text length] + [string length] - range.length;
         return (newLength > MAX_LENGTH) ? NO : YES;
     }
    return YES;

     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:49:42.790

这有一点技巧，您需要先计算新字符串是什么，然后才能测试是否允许或拒绝更改

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

    if ([newString length] > 15) {
        return FALSE;
    } else {
        return TRUE;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:44:54.543

使用方法

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (([textField.text length] - range.length) == 15) {
        return NO;
    }
    return YES;
} 
```

希望能帮助到你。快乐编码:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:42:38.787

您可以检查是否输入和计数字符

```
(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range      replacementString:(NSString *)string
    {
    if (range.length > 15) {
        // delete
    }
    else
    {
        // add
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-15T10:42:44.087

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (textField.text.length >= 15)
    {
        return NO; //return NO to not change text
    }

return YES;

} 
```

# php - JQuery轮播幻灯片问题

> ID：10598947
> 
> 赞同：1
> 
> 时间：2012-05-15T10:37:30.033
> 
> 标签：php, jquery, joomla, internet-explorer-7, carousel

我完全被难住了……

谁能告诉我为什么以下轮播/幻灯片（在模板顶部）在 IE8 和 IE9 中有效，但在 IE7 中无效？在 IE7 中，出于某种原因，它只是将图像堆叠在一起。我是否有冲突或某些 JS 在 IE7 中不起作用？

(http://)212.113.141.98/~c2cj25v2

我需要这个才能在 IE7 中工作。

我在我的 Joomla 模板中使用[http://foundation.zurb.com 。](http://foundation.zurb.com)

任何建议/帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:43:40.323

您的 JavaScript 中有错误：

> 未捕获的异常：TypeError：'$('mcsignupSubmit7677').addEvent' 不是函数

修复它，它应该修复 IE7 问题。

# paypal - 整合贝宝循环

> ID：10598950
> 
> 赞同：1
> 
> 时间：2012-05-15T10:37:46.093
> 
> 标签：paypal, paypal-ipn, paypal-subscriptions

我是 PayPal 集成的新手，需要集成 PayPal 定期订阅。我用谷歌搜索，但我对以下问题感到困惑。

1.  我应该将哪个 API 用于 PayPal 定期结账、WPS 或 Paypal 快速结账？哪一个会好？
2.  有什么好的例子或帮助来整合它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:40:16.267

Good overview of recurring payments: [Handling recurring payments](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECRecurringPayments)

I'm using the [Lionite PHP Paypal class](http://www.binpress.com/app/php-paypal-api-class/20). It's not free, but even if you're not going to use it, read through that page because it contains some useful info that is omitted from the Paypal docs.

If I understand correctly, Express Checkout requires your customer to set up a Paypal account, so Website Payments Standard would be a better option.

Unfortunately the Paypal SDK only has code examples for direct payment. If you want to use Website Payments Pro with Direct Payment, be aware of PCI compliance (which can be expensive and time-consuming) and also be aware that services like [BrainTree](http://www.braintreepayments.com) exist which have transparent redirect, thus helping you to avoid PCI compliance (I haven't used this service however).

Express checkout code example: [https://github.com/hrendoh/PayPal-Recurring-Payment-example](https://github.com/hrendoh/PayPal-Recurring-Payment-example)

Set up your sandbox account at [http://developer.paypal.com](http://developer.paypal.com)

**Update**: IPN for recurring payments is a nightmare. Not only are the recurring payment IPN responses completely undocumented, but none of the support staff I talked to had a clue about them either (in some cases they gave me incorrect answers to questions). Here is a list that others have put together, but all of these resources are incomplete:

[https://www.x.com/developers/community/blogs/ppmacole/recurring-payments-ipns?page=1](https://www.x.com/developers/community/blogs/ppmacole/recurring-payments-ipns?page=1)

[http://docs.ipn-easy.com/html/T_Rolosoft_IpnEasy_Net_PayPal_TxnType.htm](http://docs.ipn-easy.com/html/T_Rolosoft_IpnEasy_Net_PayPal_TxnType.htm)

Unfortunately because of the limits placed on recurring payments with express checkout, direct payment was the only option for me. I **strongly** suggest that if you need to do direct payment with recurring payments that you find a different payment provider.

# jquery - Jquery 在 3 个 div 上切换

> ID：10598952
> 
> 赞同：0
> 
> 时间：2012-05-15T10:37:51.017
> 
> 标签：jquery, toggle

HTML：

```
<div id="bottomContent" class="bottom_content" > <p>First Content</p> </div>

<div id="bottomContent2" class="bottom_content" > <p>second Content</p> </div>

<div id="bottomContent3" class="bottom_content" > <p>Third Content</p> </div> 
```

JS：

```
 $("div.one").click (function(){
      $("#bottomContent2").hide();
      $("#bottomContent3").hide();
      $("#bottomContent").animate({width: "toggle"}, 1000);
    });

    $("div.two").click (function(){
       $("#bottomContent").hide();
       $("#bottomContent1").hide();
       $("#bottomContent2").animate({width: "toggle"}, 1000);
    });

    $("div.three").click (function(){
       $("#bottomContent").hide();
       $("#bottomContent2").hide();
       $("#bottomContent3").animate({width: "toggle"}, 1000);
    }); 
```

我有以下 jQuery 代码，当单击每个 div 时，它将为其自己的相应 div 项设置动画并关闭可能已经打开的任何其他 div，但我确信有更好的方法对其进行编码并使其更紧凑我已经做好了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T10:49:23.100

`data-*`我总是通过在被单击的元素上放置一些额外的元数据（使用属性）以关联它的内容来解决这个问题：

```
<div class="action" data-content="#bottomContent">
  Click me for bottom content
</div>
<div class="action" data-content="#bottomContent1">
  Click me for bottom content 1
</div>
<div class="action" data-content="#bottomContent2">
  Click me for bottom content 2
</div> 
```

请注意，我还为所有三个 div 赋予了相同的类，使我能够将相同的操作与所有三个相关联。

然后jQuery变成：

```
$("div.action").click (function(){
    var $this = $(this);

    $('div.action').not($this).each(function(){
       var $other = $(this);
       var otherTarget = $other.data('content');
       $(otherTarget).hide();       
    });

    var target = $this.data('content');        
    $(target).animate({width: "toggle"}, 1000);

}); 
```

现场示例：http: [//jsfiddle.net/rHKML/](http://jsfiddle.net/rHKML/)

# php - 如何在php中创建插件系统

> ID：10598957
> 
> 赞同：-4
> 
> 时间：2012-05-15T10:38:08.893
> 
> 标签：php

我如何在 php 示例中设计一个插件系统：我输入这个 url http://localhost/cms/admin/ 页面显示插件并使用选项启用这个插件禁用这个插件？

我需要一些东西来帮助管理员管理我的网站插件（插件管理器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:56:15.687

您可以创建一个像 cms/admin/plugins 这样的目录，然后像这样使用：

```
//read directory and get any plugins found
function get_plugins(){
    $plugins=array();
    if ($handle = opendir('cms/admin/plugins')) {
        $u=0;
        while (false !== ($entry = readdir($handle))) {
            //because we want to ignore non files
            if ($entry!='.' && $entry!='..'){ 
                //for each file we find, lets add it to our array
                $plugins[$u]=$entry;
                $u++;
            }
        }
        closedir($handle);
    }
    return $plugins;
}

//populate our list of plugins
$plugins=get_plugins();

foreach($plugins as $this_plugin){
   $r_check_if_installed=mysql_query("SELECT p.plugin_id FROM `plugins` p WHERE p.plugin_file='".mysql_real_escape_string($this_plugin)."' AND p.is_enabled='1'");
   if (mysql_num_rows($r_check_if_installed)){
      echo $this_plugin.' is installed.<br />';
   } else {
      echo $this_plugin.' not installed.<br />';
} 
```

你可以看到，在这个例子中，我检查了数据库是否安装。然后，您可以在这些结果中创建一个表单或链接，以允许用户激活或停用。

希望有帮助！

# java - Jasper 子报告错误

> ID：10598958
> 
> 赞同：0
> 
> 时间：2012-05-15T10:38:13.297
> 
> 标签：java, jasper-reports, subreport

```
com.hughes.exception.HughesException
    在 com.hughes.service.serviceImpl.HomeServiceImpl.sendTicketEmail(HomeServiceImpl.java:1094)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

..................................................... ......
………………………………………………………………………………………………………………………………………………

引起：net.sf.jasperreports.engine.JRException：资源未找到：nullinvoiceDetail.jasper
    在 net.sf.jasperreports.repo.RepositoryUtil.getResource(RepositoryUtil.java:155)
    在 net.sf.jasperreports.repo.RepositoryUtil.getReport(RepositoryUtil.java:126)
    在 net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateReport(JRFillSubreport.java:317)
    在 net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateSubreport(JRFillSubreport.java:347)
    在 net.sf.jasperreports.engine.fill.JRFillSubreport.evaluate(JRFillSubreport.java:275)
    在 net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:257)
    在 net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:473)
    在 net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2021)
    在 net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:755)
    在 net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:265)
    在 net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:128)
    在 net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:836)
    在 net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:765)
    在 net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:84)
    在 net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:624)
    在 com.hughes.service.serviceImpl.HomeServiceImpl.sendTicketEmail(HomeServiceImpl.java:1046)
    ... 81 更多

```

```
JasperReport jasperReport = JasperCompileManager.compileReport(hdnWebInfPath+seperator+"reports"+seperator+"invoice.jrxml");
                        JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, model, new JREmptyDataSource());
                        JasperExportManager.exportReportToPdfFile(jasperPrint, fPath+seperator+fileName); 
```

这在简单报告不适用于子报告时有效...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:45:04.890

我的 Jarper 知识是几个旧版本，但希望这会有所帮助。

这是因为 jasper 没有找到您的子报表。Jasper 可以编译您的报告，但是当您调用`compileReport`. 填写报告时找不到引用的子报告，因为它们在工作目录中不可用。

（每次请求时都编译报告是个坏主意（除非你有一些非常重要的理由这样做）。）

有几种方法可以解决这个问题。一种方法是确保路径正确并在应用程序部署之前预编译报告。Alex K 提供的链接是一个很好的来源。如果需要在应用程序中编译，则可以使用以下解决方案：

在 Web 应用程序中，我发现一种工作实践是处理编译和填充报告是手动管理它。这是我写的助手类。希望它有用（它使用弹簧，但这些部件很容易更换）。

```
public class ReportSource {

    // Key = document name, Value = path to .jrxml
    private Map<String, String> reports;
    private final Map<String, JasperReport> compiled;

    private final boolean lazy;

    private final Logger log = Logger.getLogger(ReportSource.class);

    public ReportSource(final boolean lazyBuild) {
        super();
        lazy = lazyBuild;
        compiled = new HashMap<String, JasperReport>();
    }

    public void setCompileTargets(final Map<String, String> targets) {
        reports = new HashMap<String, String>(targets);
        if (!lazy) {
            for (final String key : targets.keySet()) {
                compile(key);
            }
        }
    }

    public JasperReport getReport(final String reportName) {
        if (compiled.get(reportName) == null) { // not found or not compiled
            log.info("Lazily compiling: " + reportName);
            return compile(reportName);
        }
        return compiled.get(reportName);
    }

    private JasperReport compile(final String reportName) {
        final String path = reports.get(reportName);

        InputStream fis = null;
        JasperReport report = null;
        try {
            final FileSystemResourceLoader resourceLoader = new FileSystemResourceLoader();
            fis = resourceLoader.getResource(path).getInputStream();
            log.info("Compiling report: " + reportName + " (" + path + ")");
            report = JasperCompileManager.compileReport(fis);
        } catch (final IOException ioe) {
            throw new IllegalStateException("Configuration error file: " + path + " (for key: " + reportName +") not found.", ioe);
        } catch (final JRException jre) {
            throw new IllegalStateException("Configuration error file: " + path + " (for key: " + reportName +") not found.", jre);
        }

        compiled.put(reportName, report);
        return report;
    }
} 
```

在此类的帮助下，您可以参考以下文档中的子报表：

```
<subreport>
    <reportElement x="0" y="0" width="200" height="30"/>
    <subreportParameter name="data">
        <subreportParameterExpression><![CDATA[$P{data}]]></subreportParameterExpression>
    </subreportParameter>
    <subreportParameter name="REPORT_RESOURCE_BUNDLE">
        <subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
    </subreportParameter>
    <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.JREmptyDataSource()]]></dataSourceExpression>
    <subreportExpression class="net.sf.jasperreports.engine.JasperReport"><![CDATA[$P{data}.getSubreport("name_of_your_subreport")]]></subreportExpression>
</subreport> 
```

这`$P{data}`是作为文档参数提供的合适对象，`getSubreport()`最终调用`ReportSource.getReport()`. 当然可以是`$P{reportSource}.getReport("....")`if`ReportSource`直接作为参数提供。（我们使用 ReportModel 方法；简而言之，它是适合报告上下文的演示模型）。

# javascript - iPad禁用文档滚动但不是div溢出滚动

> ID：10598961
> 
> 赞同：6
> 
> 时间：2012-05-15T10:38:19.567
> 
> 标签：javascript, jquery, css, ipad, scroll

我正在开发具有可滚动能力的模态窗口，例如 pinterest 窗口。当它们被触发`overflow: hidden`时`body`，`overflow: auto`在模态框容器上定义。这在桌面浏览器上效果很好，但我在 iPad 上的第一次测试（我假设一般来说可能在 iOS 上）揭示了一个问题：

当模态的滚动结束时，如果文档比模态长，则滚动继续。

我尝试这样做的目的是仅在由模式或其容器触发时才接受滚动：

```
// Disable browser scrolling on iOS
$(document).on('touchmove',function(e) {
    if (($(e.target).attr('id') != id) &&
    ($(e.target).attr('id') != ('modal-'+id))) {
        e.preventDefault();
    }
}); 
```

严格来说，它确实有效。模态滚动，当它结束滚动页面时，只有在模态内部滚动时才可能。

你有什么主意吗？

如果你愿意，可以在你的 iPad 上试试（你必须点击模态按钮）：[http ://www.onebigrobot.com/beta/altair/transforms-so](http://www.onebigrobot.com/beta/altair/transforms-so)

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T11:28:03.597

小改变是强大的！

`position: absolute`通过改变`position: fixed`模态容器（如果需要，还可以在背景的深色蒙版上）解决所有问题。事实上，使用绝对定位时，模式仅起作用，因为按钮位于页面顶部。

使用固定定位的桌面浏览器可以完美运行，而在 ipad 上会发生一些有趣的事情。当模态的滚动结束时，页面的滚动开始工作，但模态始终处于最佳位置。

我希望这个问题对某人有用。

# android - android中的警报对话框

> ID：10598962
> 
> 赞同：1
> 
> 时间：2012-05-15T10:38:37.307
> 
> 标签：android

我在我的应用程序中使用了一个警报对话框，当出现警报对话框时，我的整个活动进入后台并出现黑色。我希望当对话框出现时，我的活动看起来像以前一样，我不想任何背景场景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:42:34.513

您需要为您的对话框使用透明标志。但可能您需要为其创建自定义对话框：

```
Dialog mDialog = new Dialog(mContext, android.R.style.Theme_Translucent); 
```

自定义对话框： [android 对话框透明](https://stackoverflow.com/questions/6059068/android-dialog-transparent)

AlertBox：[在 AlertDialog 框中设置透明窗口](https://stackoverflow.com/questions/5800334/set-transperent-window-in-alertdialog-box)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:49:07.780

尝试这个：

```
 public class CustomDialog extends Dialog implements OnClickListener {      
  Button button_home,button_cancel,button_resume;     
    public GamePauseMenu(Context context) {          
      super(context,R.style.Theme_Transparent);      
      }     

    public void show(int bg) {              
             super.show();         
           setContentView(R.layout.custdialog);       
            button_resume = (Button)findViewById(R.id.imageButton1);                  button_resume.setOnClickListener(this);    
     }     public void onClick(View v) {         cancel();      }   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T15:29:52.100

```
 b.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                AlertDialog.Builder alertDialog2 = new AlertDialog.Builder(
                        MainActivity.this);

// Setting Dialog Title
                alertDialog2.setTitle("Confirm Delete...");

// Setting Dialog Message
                alertDialog2.setMessage("Are you sure you want delete this file?");

// Setting Icon to Dialog
               // alertDialog2.setIcon(R.drawable.delete);

// Setting Positive "Yes" Btn
                alertDialog2.setPositiveButton("YES",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                                // Write your code here to execute after dialog
                                Toast.makeText(getApplicationContext(),
                                        "You clicked on YES", Toast.LENGTH_SHORT)
                                        .show();
                            }
                        });

// Setting Negative "NO" Btn
                alertDialog2.setNegativeButton("NO",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                                // Write your code here to execute after dialog
                                Toast.makeText(getApplicationContext(),
                                        "You clicked on NO", Toast.LENGTH_SHORT)
                                        .show();
                                dialog.cancel();
                            }
                        });

// Showing Alert Dialog
                alertDialog2.show();
            }
        }); 
```

# objective-c - UIStepper 只显示减号

> ID：10598964
> 
> 赞同：0
> 
> 时间：2012-05-15T10:38:45.887
> 
> 标签：objective-c, xcode, calayer, uistepper

我试图通过使用层，使用此代码仅显示 UIStepper 控件的一部分

```
UIStepper *testStepper = [[UIStepper alloc]init];
[testStepper setFrame:CGRectMake(120, 220, 94, 27)];
testStepper.maximumValue = 5;
testStepper.minimumValue = 1;
testStepper.value = 1;

testStepper.layer.cornerRadius =3;
testStepper.layer.bounds= CGRectMake(0, 0, 47, 27);
testStepper.layer.masksToBounds=YES;
testStepper.layer.opacity = 1;

[self.view addSubview:testStepper]; 
```

但它并不完全有效。UIStepper 现在只显示我想要的 UIStepper 的左侧（减号），但是当我按下减号的右侧时，它仍然添加一个值，当我按下左侧时它减去（我也想要左侧的东西）。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:21:11.213

您已将**makstoBounds**设置为**YES**。基本上你隐藏 UIStepper：

```
testStepper.layer.bounds= CGRectMake(0, 0, 47, 27);
testStepper.layer.masksToBounds=YES; 
```

如果您执行以下操作，您将看到整个 UIStepper。

```
testStepper.layer.bounds= CGRectMake(0, 0, 47, 27);
//testStepper.layer.masksToBounds=YES; 
```

# jquery - json jquery 迭代

> ID：10598967
> 
> 赞同：0
> 
> 时间：2012-05-15T10:38:52.027
> 
> 标签：jquery, json

我是新手。如果我在这里问错问题，请执行。我正在开发具有两个下拉框的动态页面，其中第二个下拉框根据从第一个下拉列表中选择的值自动刷新。iam 使用 jquery $.html 自动刷新第二个下拉框。

```
$("#subcategory").html('<select name="sub_category" class="valid" id="subcategory"><option>Art - Classes</option><option>Beautician Courses</option><option>Computer - Multimedia Classes</option><option>Cooking - Classes</option><option>Hobby - Classes</option><option>Language Classes</option><option>Motor driving - Classes</option><option>Music - Theatre - Dance Classes</option><option>Professional courses - tutions</option><option>Summer - Camps</option><option>Training Instutions</option><option>Tutoring - Private Lessons</option><option>Other Classes</option></select>').show(); 
```

而不是上面一个，我想尝试使用 json 对象并填充第二个下拉列表。我的 json 数据如下：

```
var data = {
  cat_1: {
    {"id": "1",
    "sub_cat": "sub1"},
   {"id":"2",
   "sub_cat":"sub2"}

  },
  cat_2: {
    {"id": "3",
    "sub_cat": "sub3"},
   {"id":"4",
   "sub_cat":"sub4"}
  }
}; 
```

如果用户选择类别 1，则下拉菜单应填充来自 cat_1 的值。

我使用下面的代码。但我不知道根据第一个下拉菜单的选择在哪里限制或过滤

```
 $.each(data, function(index, array,array1) {
               // options[options.length] = new Option(array['variety']);
            options[options.length] =new Option(array['id'],array['sub_cat']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:47:29.880

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var data = { 'cat_1': [{ "id": "1", "sub_cat": "sub1" }, { "id": "2", "sub_cat": "sub2"}],
                'cat_2': [{ "id": "3", "sub_cat": "sub3" }, { "id": "4", "sub_cat": "sub4"}]
            };
            //ggg

            $('#ddlCat').on('change', function (e) {
                $('#ddlSubCat').html('');
                if (data[$(this).val()] !== undefined) {
                    $.each(data[$(this).val()], function (i, entity) {
                        $('#ddlSubCat').append($('<option />', { 'value': entity.id, 'text': entity.sub_cat }));
                    });
                }
            });

            $('#ddlCat').trigger('change');
        });
    </script>
</head>
<body>
    <div id="subcategory">
        <select id="ddlCat">
            <option value="cat_1">cat_1</option>
            <option value="cat_2">cat_2</option>
        </select>
        <select id="ddlSubCat">
        </select>
    </div>
</body>
</html> 
```

# javascript - 在 JQuery 中添加类以链接

> ID：10598971
> 
> 赞同：0
> 
> 时间：2012-05-15T10:39:05.767
> 
> 标签：javascript, jquery, css

我有一个锚标记，想在我的文档就绪函数中添加一个类。我怎么做？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:39:37.957

```
$(function() {  
   /* domReady */
   $('a').addClass('yourclass');
}); 
```

当然，如果您的链接有一个 id，请使用更具体的选择器，例如

```
 $('#yourlink').addClass('yourclass'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:41:39.670

```
$(document).ready(function() {  
   $('#id1_of_a, #id2_of_a, #id3_of_a').addClass('myClass');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:41:44.083

```
$(function() {  
   $('a:first').addClass('yourclass'); // suppose add class to first <a>
}); 
```

或者

```
$('a:eq(1)').addClass('yourclass'); // suppose add class to second <a> and so on 
```

或者

```
$('a#some').addClass('yourclass'); // suppose add class to <a> have id 'some' 
```

# java - 将 c3p0 属性放在配置文件中的什么位置？

> ID：10598975
> 
> 赞同：1
> 
> 时间：2012-05-15T10:39:14.777
> 
> 标签：java, spring, hibernate, connection-pooling, c3p0

我正在使用`spring/hibernate`集成应用程序。我已经配置了`c3p0`连接池。问题是如果我`c3p0`在`hibernate`属性部分设置属性，则不考虑这些属性并采用默认配置。如果我为组合池数据源设置相同的属性，则考虑它们。哪里是放置`c3p0`房产的最佳地点。

**以下配置有效：**

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="${db.driverClassName}" />
        <property name="jdbcUrl" value="${db.url}" />
        <property name="user" value="${db.username}" />
        <property name="password" value="${db.password}" />

        <!-- c3p0  properties -->

        <property name="minPoolSize" value="5" />
        <property name="maxPoolSize" value="20" />
        <property name="maxStatements" value="0" />
        <property name="preferredTestQuery" value="select * from sometable" />
        </bean>

    <bean name="wygSessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="mappingLocations" value="classpath:hibernate/module/*.hbm.xml" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.cache.provider_class">org.hibernate.cache.NoCacheProvider</prop>
                <prop key="hibernate.connection.pool.size">20</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.OracleDialect</prop>
                 <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.format_sql">true</prop>

                        </props>
        </property>
    </bean> 
```

**这不起作用：**

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="${db.driverClassName}" />
        <property name="jdbcUrl" value="${db.url}" />
        <property name="user" value="${db.username}" />
        <property name="password" value="${db.password}" />

                </bean>

    <bean name="wygSessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="mappingLocations" value="classpath:hibernate/module/*.hbm.xml" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.cache.provider_class">org.hibernate.cache.NoCacheProvider</prop>
                <prop key="hibernate.connection.pool.size">20</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.OracleDialect</prop>
                 <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.format_sql">true</prop>
<!-- c3p0  properties -->
                <prop key="hibernate.c3p0.min_size">5</prop>
                <prop key="hibernate.c3p0.max_size">20</prop>
                <prop key="hibernate.c3p0.timeout">300</prop>
                <prop key="hibernate.c3p0.max_statements">0</prop>
                <prop key="hibernate.c3p0.preferredTestQuery">select * from sometable</prop>

                        </props>
        </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T09:42:33.450

我遇到了同样的问题，需要时间来找出解决方案。

我使用 Hibernate 4.0.1 和 mysql 5.1（没有 spring 框架），我遇到了这个问题。首先确保您正确配置了 c3p0 jar，这是必不可少的。

我在 hibernate.cfg.xml 中使用了这些属性

```
<property name="hibernate.c3p0.validate">true</property>
<property name="hibernate.connection.provider_class">org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider</property>
<property name="hibernate.c3p0.min_size">5</property>
<property name="hibernate.c3p0.max_size">20</property>
<property name="hibernate.c3p0.max_statements">50</property>
<property name="hibernate.c3p0.preferredTestQuery">SELECT 1;</property>
<property name="hibernate.c3p0.testConnectionOnCheckout">true</property>
<property name="hibernate.c3p0.idle_test_period">10</property>
<property name="hibernate.c3p0.acquireRetryAttempts">5</property>
<property name="hibernate.c3p0.acquireRetryDelay">200</property>
<property name="hibernate.c3p0.timeout">40</property> 
```

但这没有用，因为 C3p0 仍然采用默认属性，而不是我在 hibernate.cfg.xml 中设置的属性，您可以在日志中检查它。所以，我在很多网站上搜索了正确的解决方案，最后我想出了这个。删除 cfg.xml 中的 C3p0 属性并在根路径（以及 cfg.xml）中创建 c3p0-config.xml 并按如下方式设置属性。

```
<c3p0-config>
<default-config> 
<property name="automaticTestTable">con_test</property>
<property name="checkoutTimeout">40</property> 
<property name="idleConnectionTestPeriod">10</property> 
<property name="initialPoolSize">10</property>
<property name="maxPoolSize">20</property> 
<property name="minPoolSize">5</property> 
<property name="maxStatements">50</property>
<property name="preferredTestQuery">SELECT 1;</property>
<property name="acquireRetryAttempts">5</property>
<property name="acquireRetryDelay">200</property>
<property name="maxIdleTime">30</property>
</default-config>
</c3p0-config> 
```

但是如果你运行，ORM 使用 jdbc 连接而不是 C3p0 连接池，因为我们应该在 hibernate.cfg.xml 中添加这些属性

```
<property name="hibernate.c3p0.validate">true</property>

<property name="hibernate.connection.provider_class">org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider</property> 
```

现在一切正常（至少对我来说很好）并且问题已解决。

检查以下内容以获取参考。

[http://www.mchange.com/projects/c3p0/index.html#configuring_connection_testing](http://www.mchange.com/projects/c3p0/index.html#configuring_connection_testing)

[https://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool](https://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool)

我希望这能解决你的问题。

# ruby-on-rails - Rails：解决 Heroku 上的内存泄漏问题（可能是 Nokogiri）

> ID：10598981
> 
> 赞同：1
> 
> 时间：2012-05-15T10:39:21.550
> 
> 标签：ruby-on-rails, memory-leaks, heroku, nokogiri

我正在使用 Rails 3.1.1 并在 Heroku 上进行部署。我正在使用 open-uri 和 Nokogiri。

我正在尝试解决在尝试获取和解析 xml 文件时发生的内存泄漏 (?)。我正在获取并尝试解析的 XML 提要为 32 Mb。

我正在使用以下代码：

```
require 'open-uri'   
open_uri_fetched = open(feed.fetch_url)
xml_list = Nokogiri::HTML(open_uri_fetched) 
```

其中 feed.fetch_url 是一个外部 xml 文件。

似乎在使用 Nokogiri（我的代码中的最后一行）解析 xml_list 时，内存使用量激增至 540 Mb 使用量并继续增加。这似乎不合逻辑，因为 XML 文件只有 32 Mb。

我已经到处寻找更好地分析这一点的方法（例如[ruby​​/ruby on rails 内存泄漏检测](https://stackoverflow.com/questions/161315/ruby-ruby-on-rails-memory-leak-detection)），但我不明白如何使用它们中的任何一个。MemoryLogic 看起来很简单，但安装说明似乎缺少一些信息......

所以，请帮助我确定上面的代码是否应该使用那么多内存或（超级简单）关于如何找到内存泄漏的说明。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:41:06.043

解析大型 xml 文件并将其转换为文档树通常会在内存中创建一个比 xml 数据本身大得多的表示。考虑例如

```
<foo attr="b" /> 
```

它只有 16 个字节长（假设是单字节字符编码）。该文档的内存表示将包括一个表示元素本身的对象，可能是一个（空）子集合，该元素的属性集合，其中至少包含一个东西。元素本身具有属性，例如其名称、指向其父文档的命名空间指针等。这些东西中的每一个的数据结构可能会超过 16 个字节，甚至在它们被 nokogiri 包装在 ruby​​ 对象中之前（每个对象的内存占用几乎肯定 >= 16 个字节）。

如果您正在解析大型 xml 文件，您几乎肯定希望使用事件驱动的解析器，例如[SAX 解析器](http://nokogiri.org/Nokogiri/XML/SAX.html)，它在文档中遇到元素时对其进行响应，而不是在整个文档上构建树表示然后进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:21:02.067

你确定你没有遇到heroku允许“长时间运行的任务”的上限吗？

由于 heroku 对免费赠品的人施加的一些限制，我已经超时并且一直有东西在我身上失败。

我的意思是，你能在你的开发中复制这个吗？在你的机器上做你想做的事需要多长时间？

编辑1：

顺便说一句，这也是什么？

```
open_uri_fetched = open(feed.fetch_url) 
```

它正在获取的网址在哪里？它是在那里还是在真正的 Nokogiri 通话中出现问题。无论如何，这个提取需要多长时间？

# centos - RMySQL 错误“配置”存在但不可执行

> ID：10598982
> 
> 赞同：3
> 
> 时间：2012-05-15T10:39:30.933
> 
> 标签：centos, rmysql

我在 centos 上安装 RMySQL。有很多依赖项，我能够安装所有。

但是当我尝试安装时仍然出现一个错误。

我正在执行的命令如下：

> R CMD 安装 RMySQL_0.9-3.tar

我收到以下错误：

```
* installing to library /usr/lib64/R/library
* installing *source* package RMySQL ...
ERROR: 'configure' exists but is not executable -- see the 'R Installation and
* removing /usr/lib64/R/library/RMySQL 
```

有人用 Rphp 或 RMySQL 遇到过这种问题吗？

提前感谢您的回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:03:36.523

这是权限问题。

它是通过命令解决的

```
# chmod 777 /root/tmp/ 
# TMPDIR=$HOME/tmp 
# export TMPDIR 
```

我在这里发布我的答案，希望它对其他人也有帮助。

# c# - SelectSingleNode 在 foreach 上返回错误的结果

> ID：10598986
> 
> 赞同：7
> 
> 时间：2012-05-15T10:39:50.007
> 
> 标签：c#, .net-4.0, html-parsing, html-agility-pack

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(content);

var nodes = doc.DocumentNode.SelectNodes("//div[@class=\"noprint res\"]/div");
if (nodes != null)
{
    foreach (HtmlNode data in nodes)
    {
                  // Works but not what I want
                  MessageBox.Show(data.InnerHtml);

                  // Should work ? but does not ?
                  MessageBox.Show(data.SelectSingleNode("//span[@class=\"pp-place-title\"]").InnerText);
    }
} 
```

我正在尝试解析 HTML 的结果，foreach 的初始节点按预期工作，并为我提供了 10 个符合我需要的项目的结果。

当我进入 foreach 时，如果我输出数据项的内部 html，它会显示正确的数据，但如果我输出 SelectSingleNode，它将始终显示来自 foreach 的第一项的数据，**这是正常行为还是我做错了什么？**

为了解决这个问题，我必须在 foreach 中为每个数据项创建一个新的 html，如下所示：

```
HtmlAgilityPack.HtmlDocument innerDoc = new HtmlAgilityPack.HtmlDocument();
innerDoc.LoadHtml(data.InnerHtml);

// Select what I need
MessageBox.Show(innerDoc.DocumentNode.SelectSingleNode("//span[@class=\"pp-place-title\"]").InnerText); 
```

然后我得到正确的每项数据。

我试图从中获取数据的页面是[http://maps.google.com/maps?q=consulting+loc:+US](http://maps.google.com/maps?q=consulting+loc:+US)如果您想尝试看看自己会发生什么。

基本上我正在阅读公司名称的左侧栏，并且发生了上述情况。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T11:19:32.950

通过以 开头的 XPath 表达式`//`，您将在包含该`data`节点的整个文档中进行搜索。

您应该能够使用`".//[...]"`仅检查`data`.

# c# - SetWindowsHookEx 返回 0，GetLastWin32Error() 也返回 0

> ID：10598999
> 
> 赞同：1
> 
> 时间：2012-05-15T10:40:24.483
> 
> 标签：c#, windows, winapi

我面临的问题是，我无法获得 SetWindowsHookEx 返回的有效 hookID 并且 GetLastWin32Error() 也返回 0。我写了下面的代码：

```
_LowLevelhookID = SetWindowsHookEx((int)HookType.WH_KEYBOARD_LL, LowLevelKeyboardHookHandler, IntPtr.Zero, GetCurrentThreadId());

int errorCode = -1;

if(_LowLevelhookID == (IntPtr)0)
{
    errorCode = Marshal.GetLastWin32Error(); 
} 
```

实际上，我只想为我的应用程序创建一个低级键盘挂钩，根据 SetWindowsHookEx 参数描述，如果我想设置当前线程 ID 并仅捕获我的应用程序的键事件，我应将 hMod 参数设置为 null。

任何人都可以确认 GetCurrentThreadId() 是希望运行我的应用程序的 ThreadID 的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:49:23.653

`WH_KEYBOARD_LL`钩子是全局的，你不能只为你的应用程序安装它。

`Marshal.GetLastWin32Error()`不工作可能是因为你没有添加`SetLastError = true`到`DllImportAttribute`for `SetWindowsHookEx`。