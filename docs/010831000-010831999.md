# StackOverflow 问答 10831000-10831999

# c++ - 高效的升压分配使用

> ID：10831003
> 
> 赞同：2
> 
> 时间：2012-05-31T09:35:15.887
> 
> 标签：c++, boost, distribution

（改写问题）

我正在创建一个用于提升正态分布的包装类，并希望使其尽可能高效。

如果我使用：

```
double x = 0.0;
boost::variate_generator<boost::mt19937&,boost::normal_distribution<> > var_nor(rng, nd);
for (int i=0; i<20; i++) {
     double x = var_nor();
} 
```

循环工作正常。我担心的是我不想声明任何不必要的东西，因为该方法被多次调用。我尝试拆分代码并将这一行放在构造函数中：

```
boost::variate_generator<boost::mt19937&,boost::normal_distribution<> > var_nor(rng, nd); 
```

并有一个执行此操作的示例方法：

```
 double x = var_nor();
     return x; 
```

但在这种情况下，我收到一条错误消息，提示找不到 var_nor()（即没有参数）。谁能告诉我这些提升声明发生了什么，即。什么是

> boost:variate_generate 等

行实际上与**var_nor**一起做吗？以我有限的 C++ 知识，看起来好像 var_nor 是用两个不同的签名定义的。

谢谢大家皮特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:34:42.820

在您的代码中，`var_nor`是一个*变量*，而不是一个函数，因此它没有签名。它表示一个`variate_generator`可以*像*函数一样工作的对象，因为它支持`operator()`.

在您的代码中，您同时声明和初始化`var_nor`。和参数被传递给对象`rng`的*构造*函数。`nd`*`variate_generator`*

 *当您将声明移到类的构造函数中时，您在构造函数中声明`var_nor`为*局部变量*，因此难怪它在其他地方不可用。对于整个类中都可用的东西，它需要是一个*成员变量*。在类中将其声明为私有：

```
class NormalDistribution
{
  boost::random::mt19937 _rng;
  boost::variate_generator<boost::mt19937&,boost::normal_distribution<> > var_nor;
public:
  NormalDistribution();
}; 
```

然后在构造函数中初始化它：

```
NormalDistribution::NormalDistribution():
  _rng(), var_nor(_rng, boost::normal_distribution<>(0.0, 1.0))
{ } 
```

`_rng`需要先声明该成员，以便首先对其进行初始化。该`nd`参数可以省略并替换为`normal_distribution`直接传递给`var_nor`构造函数的临时对象，如上所示。

通过这些更改，您应该能够`normal_distribution`在多次调用您的`sample`函数或您的`NormalDistribution`类的任何其他用途时使用相同的对象。

在您从问题中删除的代码中，您将变量声明与函数声明混淆了。您声明`nd`为一个接收两个参数并返回一个`normal_distribution`. 同样与`var_nor`. 当你真的想要一个对象时，它是一个函数。你很困惑，因为它恰好是一个像函数一样工作的对象，但它仍然只是一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:53:08.163

好的，对于可能感兴趣的其他人，使用 Rob Kennedy 的答案工作最终版本：

```
// normaldistribution.h
#ifndef NORMALDISTRIBUTION_H
#define NORMALDISTRIBUTION_H

#include <boost/random.hpp>
#include <boost/random/normal_distribution.hpp>
class NormalDistribution
{
 public:
    NormalDistribution();
    double sample(void);
 private:
    // Use the boost random number generator
    boost::mt19937 rng;
    // Make a variate_generator OBJECT.
    boost::variate_generator<boost::mt19937&,boost::normal_distribution<> > var_nor;
};

#endif // NORMALDISTRIBUTION_H

// normaldistribution.cpp
NormalDistribution::NormalDistribution():
  rng(), var_nor(rng, boost::normal_distribution<>(0.0, 1.0))
{
    std::cout << "Called normal distribution constructor, passing up var_nor" << std::endl;
}

double NormalDistribution::sample(void) {
    double x = var_nor();
    return x;
}

// main.cpp
#include "normaldistribution.h"

int main(int argc, char *argv[])
{
    NormalDistribution *nd = new NormalDistribution();
    for (int i=0; i < 10; ++i)
    {
      double d = nd->sample();
      std::cout << d << std::endl;
    }
    return 0;
} 
```*

# python - Python：如何清理凌乱的弹出列表

> ID：10831004
> 
> 赞同：0
> 
> 时间：2012-05-31T09:35:20.363
> 
> 标签：python, module, popup, interactive, pyscripter

问题的快速演示：
定义一个模块并命名它`functions.py`包含：（**这只是一个例子**）

```
from __future__ import division
from scipy import *

def a():
    return sin(1) 
```

现在尝试在单独的文件中使用它，如下所示：

```
import functions as f 
```

如果您键入`f`弹出列表，则会显示所有`scipy`内容，而它应该只是`a`！看：
![在此处输入图像描述](../Images/57476895b16bf0938c28d857172597fc.png)

**如何解决这个问题？**

这个问题使得很难看到模块中`functions`存在什么。

**注意：**
**1）**认为模块`function`将有许多用户定义的功能。
**2)** scipy 函数为什么全局可用是没有问题的。没关系。问题是**为什么他们会出现为 f 的成员**？！
这可能是**Pyscripter**中的一个错误，我不确定！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:41:03.423

您的模块`functions`将包含对全局导入并在其范围内声明的所有内容的引用。

当您在`from scipy import *`模块内部进行操作时，它将导入所有内容，正如它应该的那样，您将能够`scipy`从您的功能模块访问所有功能。

如果您只想 `a()`在导入后查看`functions`，请将其更改为

```
# functions.py
def a():
    from scipy import sin
    return sin(1) 
```

这将确保导入您的模块的人不存在对您的导入的引用。

这里有一些你可以[阅读](http://effbot.org/zone/import-confusion.htm)的内容。`imports`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:45:41.430

首先，您应该避免`import *`，因此您的代码应如下所示：

```
from __future__ import division
from scipy import sin

def a():
    return sin(1) 
```

或者

```
from __future__ import division
import scipy

def a():
    return scipy.sin(1) 
```

另一种选择是将其添加到您的模块中：

```
__all__ = ['a'] 
```

# matlab - matlab：改变矩阵

> ID：10831005
> 
> 赞同：2
> 
> 时间：2012-05-31T09:35:26.350
> 
> 标签：matlab, matrix, number-formatting, floating-point-precision

我有一个加载单元格数组并将它们转换为矩阵的代码。现在这个矩阵在浮点数之后显示 4 个数字，例如

```
0   5   15  1   51,9000 3,4000
0   5   15  1   51,9000 3,4000
0   5   15  1   51,9000 3,4000 
```

如何将所有行更改为仅在浮点后显示 2 个数字？请考虑我想更改矩阵而不是在命令窗口中打印它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:46:14.210

如果您想在命令窗口/编辑器中查看它以进行调试，请使用银行格式：

```
format bank; 
```

例子：

```
A =[ 51.213123 6.132434]
format bank
disp(A); 
```

将导致：

```
A =    
         51.21          6.13 
```

此外，您可以使用`sprintf`

```
A = [51.900 3.4000];
disp(sprintf('%2.2f ',A)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:48:17.173

```
x = [0   5   15  1   51.9000 3.4000
     0   5   15  1   51.9000 3.4000
     0   5   15  1   51.9000 3.4000];

fprintf([repmat('%.2f ',1,size(x,2)) '\n'], x')

0.00 5.00 15.00 1.00 51.90 3.40 
0.00 5.00 15.00 1.00 51.90 3.40 
0.00 5.00 15.00 1.00 51.90 3.40 
```

# java - 同时逐行读取两个文本文件-java

> ID：10831007
> 
> 赞同：7
> 
> 时间：2012-05-31T09:35:34.263
> 
> 标签：java, io, text-files, readfile

我有两种不同语言的 2 个文本文件，它们逐行对齐。即textfile1 中的第一行应该等于textfile2 中的第一行，以此类推。

有没有办法同时逐行读取两个文件？

下面是文件应该是什么样子的示例，假设每个文件的行数约为 1,000,000。

文本文件1：

```
This is a the first line in English
This is a the 2nd line in English
This is a the third line in English 
```

文本文件2：

```
C'est la première ligne en Français
C'est la deuxième ligne en Français
C'est la troisième ligne en Français 
```

期望的输出

```
This is a the first line in English\tC'est la première ligne en Français
This is a the 2nd line in English\tC'est la deuxième ligne en Français
This is a the third line in English\tC'est la troisième ligne en Français 
```

目前，我可以使用它，但在 RAM 中保存几百万行会杀死我的机器。

```
String english = "/home/path-to-file/english";
String french = "/home/path-to-file/french";
BufferedReader enBr = new BufferedReader(new FileReader(english));
BufferedReader frBr = new BufferedReader(new FileReader(french));

ArrayList<String> enFile = new ArrayList<String>();
while ((line = enBr.readLine()) != null) {
    enFile.add(line);
}

int index = 0;
while ((line = frBr.readLine()) != null) {
    String enSentence = enFile.get(index);
    System.out.println(line + "\t" + enSentence);
    index++;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T09:40:45.207

将两个阅读器的调用`nextLine`放在同一个循环中：

```
String english = "/home/path-to-file/english";
String french = "/home/path-to-file/french";
BufferedReader enBr = new BufferedReader(new FileReader(english));
BufferedReader frBr = new BufferedReader(new FileReader(french));

while (true) {
    String partOne = enBr.readLine();
    String partTwo = frBr.readLine();

    if (partOne == null || partTwo == null)
        break;

    System.out.println(partOne + "\t" + partTwo);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:44:30.670

我会这样做：

```
List<String> strings = new ArrayList<String>();
BufferedReader enBr = ...
BufferedReader frBr = ...

String english = "";
String french = "";
while (((english = enBr.readline()) != null) && ((french = frBr.readline) != null))
{
    strings.add(english + "\t" + french);
} 
```

# recursion - 递归构建列表时，如何在头部使用已创建的列表元素？

> ID：10831010
> 
> 赞同：1
> 
> 时间：2012-05-31T09:36:00.483
> 
> 标签：recursion, f#, functional-programming

我正在尝试在 F# 中编写一个引导算法，该算法采用一组输入并创建一个输出列表。如果我只需要使用前一个元素，那么使用递归很简单：

```
let buildElement head previous =
    // do something to create new float 
    1.0

let buildList inputs =
    let rec bootstrap elements previous = 

        let addElement head tail =
            let newElement = buildElement head previous
            newElement :: bootstrap tail newElement   

        match inputs with
            | []    -> []
            | h::t  -> addElement h t
    bootstrap inputs 1.0 
```

但是，如果我想使用以前创建的元素（例如，我想将新值的平均值作为以前的值传递），我如何在内部函数中访问它们？我是否在外部函数中创建一个集合并在内部函数中填充它？如果是这样，我是否需要使其可变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:49:26.723

如果您需要根据过去值中的一些信息计算新值，您基本上会做与现在正在做的事情相同的事情 - 而不是传递 ingle last 值`previous`，`previous`参数可以是过去值的列表你在你去的时候重新计算。

我认为在不知道具体示例的情况下很难给出更好的答案。但是，假设您想计算浮动平均值 - 为此，您需要计数和所有先前值的总和。您可以使用递归直接对其进行编码，也可以使用`Seq.scan`：

```
[ 1.0 .. 100.0 ] 
|> Seq.scan (fun (count, sum) elem -> count + 1, sum + elem) (0, 0.0)
|> Seq.map (fun (count, sum) -> sum / float count) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:44:31.103

在平均函数的情况下，您可以传递部分总和和处理项目的数量并使用它来计算平均值。

对于一般解决方案，您可以将先前结果的列表作为参数，将下一个结果添加到它之前，`::`并在完成后反转整个事情。这具有使您的函数尾递归的额外好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:13:13.917

> 如果我想使用以前创建的元素（例如，我想将新值的平均值作为以前的值传递），我如何在内部函数中访问它们？

这是一个`fold`或`scan`（前缀折叠）。您正在将列表映射或折叠为新值，并累积影响结果的值。

# c# - 在 .NET 中，如何识别 C++ DLL 是在 DEBUG 还是 RELEASE 构建中？

> ID：10831011
> 
> 赞同：2
> 
> 时间：2012-05-31T09:36:01.767
> 
> 标签：c#, c++, dll, build, release

感谢网络上的一些资源，我制作了一个小工具来了解我的 .NET dll 是在调试还是在发布版本中；但我希望它也适用于 c/c++ DLL。

有没有人有一些关于这个的代码？DLL 是使用 Visual Studio 编译的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:40:59.963

据我所知，仅看 DLL 就无法说出这样的事情。在我们的工作中，我们使用不同的名称来调试 dll（在末尾添加一个 D）并使用预处理器的东西。

由于 Debug 或 Release 构建只是编译器的一组属性，您最终可能会得到一个 Debug 构建，它可以像 Release 一样编译，反之亦然。

总结一下，我觉得没办法，不好意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:45:16.797

这不是100％，但看看这个。

[http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.isdebug.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.isdebug.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:42:46.323

信息通常包含在[PE 头](http://www.skynet.ie/~caolan/pub/winresdump/winresdump/doc/pefile.html)中。您可以编写一些代码来解析它。

# extjs - EXTJS4 XML 存储 - XTemplate

> ID：10831015
> 
> 赞同：0
> 
> 时间：2012-05-31T09:36:06.893
> 
> 标签：extjs, extjs4

我有以下模板：

```
myStore.on('load', function(store, records, options) {
        console.log(records);
        alert("loaded.");
        var tpl = new Ext.XTemplate(
            '<tpl for=".">',
            '<h1>{name} test</h1>',
            '<h1>{origin}</h1>',
            '</tpl>'
        );

        tpl.append(Ext.get("output-body"), myStore);

 }); 
```

它遍历我的商店，其中有 3 条记录：

```
accounts { id="accounts-ext-record-1", internalId="ext-record-1"}   
name = "Network"    origin = "Support_4"    id = undefined
accounts { id="accounts-ext-record-2", internalId="ext-record-2"}   
name = "new"    origin = "nevil-nmshub" id = undefined
accounts { id="accounts-ext-record-3", internalId="ext-record-3"}   
name = "soap"   origin = "network"  id = undefined 
```

当我运行代码时，我得到：

```
test
test
test 
```

输出“名称”和“原点”的值我缺少什么？某些东西正在发挥作用，因为它很明显地看到了 3 个帐户，因此出现了 3 个“测试”打印件。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:52:30.227

我需要添加数据。在我的tpl。

```
var tpl = new Ext.XTemplate(
            '<tpl for=".">',
            '<h1>{data.name} test</h1>',
            '<h1>{data.origin}</h1>',
            '</tpl>'
        ); 
```

# c - 带无符号字符的模运算符

> ID：10831017
> 
> 赞同：2
> 
> 时间：2012-05-31T09:36:17.800
> 
> 标签：c, modulus

试图让一些代码工作并且模数不想做我想做的事......这意味着我错了。

我有`unsigned char`s 我试图将小时/分钟/秒分开，以便我可以在 Ascii 的屏幕上显示它们。

变量`secs`是一个`unsigned int`。其他一切都是`unsigned char`. 我想要`unsigned char`s 中的结果，以免浪费内存。在嵌入式环境中工作。

有人愿意看一下代码片段并告诉我我做错了什么吗？

```
hours   = secs/3600.0;
minutes =(secs/60.0)-(hours*3600);
seconds =secs-(hours*3600)-(minutes*60);

sec_ones    =(unsigned char)((seconds%10));
sec_tens    =(unsigned char)((seconds-sec_ones)%100);
min_ones    =(unsigned char)(minutes%10);
min_tens    =(unsigned char)((minutes-min_ones)%100);
hrs_ones    =(unsigned char)(hours%10);
hrs_tens    =(unsigned char)((hours-hrs_ones)%100); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:12:40.537

```
minutes =(secs/60.0)-(hours*3600); 
```

应该

```
minutes =(secs/60.0)-(hours*60); 
```

除此之外，它适用于足够小的输入：http: [//ideone.com/VPKP1](http://ideone.com/VPKP1)

不过，有些事情我会改变。例如，进行双除法然后将结果分配回是没有意义的`unsigned char`，您还不如只进行整数除法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:12:20.770

你提到它是一个嵌入式程序。

```
seconds = secs-(hours*3600)-(minutes*60); 
```

`hours`在表达式中是一个`unsigned char`提升到。`int``hours*3600`

如果您使用的是 16 位`int`，则上述行会有问题。在二进制补码系统上，16 位`int`范围从`-32768`to `32767`which 表示当 `hours`is时有溢出`>= 10`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:45:06.550

首先，您`double`使用`double`常量进行计算。

那么模数计算将不会进行，`unsigned char`因为它是一个窄类型。一般会先提升到`int`，再进行计算。

`unsigned int`通常，直接使用所有变量会更好。`char`类型仅在您想节省空间时才有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:09:56.813

你的程序写得不好，试着这样做，它运行正常

```
unsigned int secs = 5000;
unsigned char sec_ones,sec_tens,min_ones,min_tens,hrs_ones,hrs_tens, hours, minutes, seconds;

hours   = secs/3600.0;
minutes =(secs/60.0)-(hours*60);
seconds =secs-(hours*3600)-(minutes*60);

sec_ones    =(unsigned char)((seconds%10));
sec_tens    =(unsigned char)(seconds/10);
min_ones    =(unsigned char)(minutes%10);
min_tens    =(unsigned char)(minutes/10);
hrs_ones    =(unsigned char)(hours%10);
hrs_tens    =(unsigned char)(hours/100);

printf("%.1u%.1u:%.1u%.1u:%.1u%.1u\n",hrs_tens,hrs_ones,min_tens,min_ones,sec_tens,sec_ones ); 
```

# grails - 如何删除 Grails 2.0.4 中的工具提示？

> ID：10831021
> 
> 赞同：0
> 
> 时间：2012-05-31T09:36:32.490
> 
> 标签：grails, grails-2.0

有人知道如何删除 Grails 2.0.4 中的工具提示吗？目前我所有的必填字段都显示了一个工具提示。我正在尝试创建一个没有工具提示的 UI。我正在使用 jQuery 和 jQueryUI。

无论如何我可以删除工具提示吗？我认为工具提示是在 Grails 2.0.4 中默认设置的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:39:32.567

我认为这是与 html 5 相关的。标签中的字段是否有“必需”（我知道 grails 在执行脚手架时默认放入）？如果是这样，浏览器将检查这些字段是否已填写，并在提交之前提示用户是否未填写。这让我疯狂地试图弄清楚发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:04:13.130

你可以像这样使用jQuery来删除title属性......

```
$(document).ready(function() {
    $('[title]').removeAttr('title');
}); 
```

# sql - 优化具有多个连接的 SQL 查询

> ID：10831022
> 
> 赞同：3
> 
> 时间：2012-05-31T09:36:41.350
> 
> 标签：sql, sql-server, join, sql-server-2008-r2, query-optimization

我的数据库中有以下表格，我无法更改或修改。我使`Log`表格保持简单，但`LogDetail`与我的数据库中的相同。

**日志表**

```
 Id  User Department Service     Method

 21  John Sales      UserService GetUser 
```

**日志明细表**

```
Id LogRef ParamName  ParamValue

30 21     FirstName  Adam
31 21     LastName   Smith     
32 21     Age        35
33 21     Gender     M 
```

现在，我正在使用以下查询来获取搜索者（Adam，Smith，35，M）

```
SELECT 
L.*, D1.ParamName, D2.ParamName, D3.ParamName, D4.ParamName
FROM Log as L
INNER JOIN LogDetail as D1 on L.Id = D1.LogRef
INNER JOIN LogDetail as D2 on L.Id = D2.LogRef
INNER JOIN LogDetail as D3 on L.Id = D3.LogRef
INNER JOIN LogDetail as D4 on L.Id = D4.LogRef
WHERE
D1.ParamName='FirstName' and D1.ParamValue='Adam' and
D2.ParamName='LastName' and D2.ParamValue='Smith' and
D3.ParamName='Age' and D3.ParamValue=35 and
D4.ParamName='Gender' and D4.ParamValue='M' 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T09:41:14.193

这就是您使用[EAV](http://en.wikipedia.org/wiki/Entity-attribute-value_model)模式（基本上是键值对）时发生的情况

除了在`(ParamName, ParamValue)`for上添加索引之外，您无能为力`LogDetail`。这假设聚集索引保持为`LogRef`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:38:09.603

您可以做的一件事是`Index`在加入子句中使用的字段上使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:07:06.550

一种简化查询的方法是创建一个视图，将键值对聚合成更有用的东西：

```
CREATE VIEW ViewLogUsers
AS
SELECT UFN.LogRef, UFN.ParamName AS FirstName, ULN.ParamName AS LastName, UAG.ParamName AS Age, UGE.ParamName AS Gender
FROM LogDetail AS UFN
INNER JOIN LogDetail AS ULN ON UFN.LogRef = ULN.LogRef
INNER JOIN LogDetail AS UAG ON UFN.LogRef = UAG.LogRef
INNER JOIN LogDetail AS UGE ON UFN.LogRef = UGE.LogRef
WHERE UFN.ParamName = 'Firstname' AND ULN.ParamName = 'LastName' AND UAG.ParamName = 'Age' AND UGE.ParamName = 'Gender'
GO 
```

然后您的原始查询变为：

```
SELECT 
L.*, D1.FirstName, D1.LastName, D1.Age, D1.Gender
FROM Log as L
INNER JOIN ViewLogUsers as D1 on L.Id = D1.LogRef
WHERE D1.FirstName = 'Adam' AND D1.LastName = 'Smith' AND D1.Age = '35' AND D1.Gender = 'M' 
```

与使用与视图相同的结构的表相比，您的性能仍然会差得多（尽管如果您能够使用索引视图会有所帮助），但至少使用起来会容易得多.

# ios - 按下按钮时对象过度释放

> ID：10831025
> 
> 赞同：0
> 
> 时间：2012-05-31T09:36:48.050
> 
> 标签：ios, memory-leaks, cocos2d-iphone, release

这个问题让我困惑了好几天。我有一个 NSString，'spriteType'。它是使用属性和综合方法声明的。在创建字符串的层中，我还创建了一个 CCNode。该节点是在一个方法中创建的。

```
- (void) spritePick {

CCMenuItemImage *go = [CCMenuItemImage itemFromNormalImage:@"button_go.png" selectedImage:@"button_go_selected.png" target:self selector:@selector(test)];
spritePickMenu = [CCMenu menuWithItems:go, nil];
spritePickMenu.position = ccp(0,0);

spritePick = [CCNode node];
[spritePick addChild:spritePickMenu];
spritePick.position = ccp(240,160); 
[self addChild: spritePick];
} 
```

从按钮调用的“测试”方法很简单：

```
- (void) test {
NSLog(@"%@",spriteType);
} 
```

NSLog 行使我的游戏崩溃，并给出错误：EXC_BAD_ACCESS

除了“测试”方法之外的任何地方，代码都可以正常工作。为什么从节点调用该方法时它会给我错误，但从其他任何地方调用它时它不会给我它？

如果需要，我可以给你完整的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:53:43.733

您在`spriteType`属性声明中使用了哪些属性？

如果您的项目使用 ARC，则标题应如下所示：

```
@property (nonatomic, strong) NSString *spriteType; 
```

虽然实现应该如下所示：

```
@synthesize spriteType = spriteType_; 
```

如果您以这种方式声明/合成您的属性，则`NSLog(@"%@", self.spriteType)`只需将 (null) 写入控制台（我测试过以仔细检查）。

`self.`使用而不是尝试直接访问支持 ivar来访问您的属性是一个很好的做法。

由于您看到 EXC_BAD_ACCESS 我假设您没有保持对`self.spriteType.`

如果您的项目使用 ARC，则需要确保使用 LLVM 3.0 或更高版本进行编译，如[本答案中所述。](https://stackoverflow.com/questions/8584152/getting-expected-a-property-attribute-before-strong-when-compiling-an-arc-fi)

# asp.net - 带有可编辑外键下拉列的 ASP.NET MVC 3 Telerik Razor 网格

> ID：10831028
> 
> 赞同：1
> 
> 时间：2012-05-31T09:37:00.803
> 
> 标签：asp.net, asp.net-mvc-3, telerik, telerik-grid

我正在尝试在 Razor 中创建一个 Ajax Telerik 网格，该网格具有一个可更新的外键列，该列显示一个下拉列表。我已经像示例一样复制了我的页面，并且一切正常。我可以添加、删除和编辑新记录。唯一不起作用的是，当我更新网格中的记录时，我得到一个带有整数的文本字段，而不是一个包含外键表所有可能性的下拉列表。

有人对我如何解决这个问题有任何想法吗？请参阅下面的代码。

Telerik 网格：

```
@(Html.Telerik().Grid<EditableAccount>()
    .Name("Grid")
    .ToolBar(commands => commands.Insert().ButtonType(GridButtonType.Text).ImageHtmlAttributes(new { style = "margin-left:0" }))
    .DataBinding(dataBinding => dataBinding.Ajax()
        .Insert("InsertAccount", "Administration")
        .Update("SaveAccount", "Administration")
        .Delete("DeleteAccount", "Administration"))
    .DataKeys(keys => { keys.Add(a => a.AccountId); })
    .Columns(columns =>
    {
        columns.ForeignKey(b => b.BankId, (IEnumerable)ViewData["Banks"], "ID", "Name").Width(50);
        columns.Bound(a => a.AccountNumber).Width(110);
        columns.Command(commands =>
        {
            commands.Edit().ButtonType(GridButtonType.Image);
            commands.Delete().ButtonType(GridButtonType.Image);
        }).Width(16);
    })
    .Editable(editing => editing.Mode(GridEditMode.InLine))
    .Pageable()
    .Scrollable()
    .Sortable()
) 
```

控制器：

```
[GridAction]
public ActionResult Accounts()
{
    ViewData["Banks"] = db.Banks.Select(b => new { Id = b.BankId, Name = b.Name });
    return View(new GridModel(accountRepository.All()));
}

[AcceptVerbs(HttpVerbs.Post)]
[GridAction]
public ActionResult InsertAccount()
{
    //Create a new instance of the EditableProduct class.
    EditableAccount account = new EditableAccount();

    //Perform model binding (fill the product properties and validate it).
    if (TryUpdateModel(account))
    {
        //The model is valid - insert the product.
        accountRepository.Insert(account);
    }

    //Rebind the grid
    return View(new GridModel(accountRepository.All()));
}

[AcceptVerbs(HttpVerbs.Post)]
[GridAction]
public ActionResult SaveAccount(int id, int bankId)
{
    EditableAccount account = new EditableAccount
    {
        AccountId = id,
        Bank = db.Banks
                   .Where(b => b.BankId == bankId)
                   .Select(b => b.Name).SingleOrDefault(),
        BankId = bankId
    };

    TryUpdateModel(account);

    accountRepository.Update(account);

    return View(new GridModel(accountRepository.All()));
}

[AcceptVerbs(HttpVerbs.Post)]
[GridAction]
public ActionResult DeleteAccount(int id)
{
    //Find a customer with ProductID equal to the id action parameter
    EditableAccount account = accountRepository.One(a => a.AccountId == id);

    if (account != null)
    {
        //Delete the record
        accountRepository.Delete(account);
    }

    //Rebind the grid
    return View(new GridModel(accountRepository.All()));
} 
```

模型：

```
public class EditableAccount
{
    [ScaffoldColumn(false)]
    public int AccountId { get; set; }

    [Required]
    [UIHint("GridForeignKey")]
    [DisplayName("Bank")]
    public int BankId { get; set; }
    public string Bank { get; set; }

    [Required]
    [DisplayName("AccountNumber")]
    public int AccountNumber { get; set; }
} 
```

存储库：

```
public IList<EditableAccount> All()
{
    IList<EditableAccount> result =
            (from account in db.Accounts
             select new EditableAccount
             {
                 AccountId = account.AccountId,
                 Bank = account.Bank.Name,
                 BankId = account.BankId,
                 AccountNumber = account.AccountNr
             }).ToList();

    return result;
}

public EditableAccount One(Func<EditableAccount, bool> predicate)
{
    return All().Where(predicate).FirstOrDefault();
}

public void Insert(EditableAccount insertedAccount)
{
    Account account = new Account();
    account.BankId = insertedAccount.BankId;
    account.AccountNr = insertedAccount.AccountNumber;
    db.Accounts.InsertOnSubmit(account);
    db.SubmitChanges();
}

public void Update(EditableAccount updatedAccount)
{
    Account account = db.Accounts.SingleOrDefault(a => a.AccountId == updatedAccount.AccountId);
    account.BankId = updatedAccount.BankId;
    account.AccountNr = updatedAccount.AccountNumber;
    db.SubmitChanges();
}

public void Delete(EditableAccount deletedAccount)
{
    Account account = db.Accounts.SingleOrDefault(a => a.AccountId == deletedAccount.AccountId);
    db.Accounts.DeleteOnSubmit(account);
    db.SubmitChanges();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:02:53.280

有人在 Telerik 论坛上回答了我的问题： [http ://www.telerik.com/community/forums/aspnet-ajax/grid/asp-net-mvc-razor-grid-with-editable-foreign-key-dropdown-column .aspx](http://www.telerik.com/community/forums/aspnet-ajax/grid/asp-net-mvc-razor-grid-with-editable-foreign-key-dropdown-column.aspx)

# facebook - “流” FQL 查询中的多个 source_id

> ID：10831039
> 
> 赞同：1
> 
> 时间：2012-05-31T09:37:41.553
> 
> 标签：facebook, facebook-fql

一段时间以来，在对流表的 FQL 查询*中*使用多个 source_id 时，我遇到了不一致的行为。查询例如：

```
SELECT source_id, post_id, created_time, message, permalink, type, attachment 
FROM stream 
WHERE (created_time >= 1338444667) and 
      ((source_id = 74133697733  and actor_id = 74133697733) or 
       (source_id = 259126564951 and actor_id = 259126564951)) 
```

似乎返回帖子的时间跨度非常有限。但临界值是多少？有时我没有收到 30 分钟前的帖子，有时我收到了 2 到 3 小时前的多个帖子，只是为了在下一个查询中停止获取所有帖子。有规律吗？

[在https://developers.facebook.com/docs/reference/fql/stream/](https://developers.facebook.com/docs/reference/fql/stream/)中没有提到特殊的 multi-source_id 查询处理。

# javascript - Javascript，Jquery - 单击元素时，我在索引上获得两个值

> ID：10831044
> 
> 赞同：0
> 
> 时间：2012-05-31T09:37:57.367
> 
> 标签：javascript, jquery

HTML：

```
<div class="promo_tumbs col_12">
    <div data-dir="prev" class="prev"></div>
    <div data-dir="next" class="next"></div>
    <div class="promo_tumbs_centar">
        <a href="#first"><div class="promo_tumb promo_tumb_current">Test</div></a>
        <a href="#second"><div class="promo_tumb">Test</div></a>
        <a href="#thrid"><div class="promo_tumb">Test</div></a>
        <a href="#fourh"><div class="promo_tumb">Test</div></a>
        <a href="#fifth"><div class="promo_tumb">Test</div></a>
        <a href="#fifth"><div class="promo_tumb">Test</div></a>
        <a href="#fifth"><div class="promo_tumb">Test</div></a>
    </div>
</div> 
```

JavaScript：

```
function Slider(container, nav) {
    this.container = container;
    this.nav = nav;

    this.li = this.container.find('li');
    this.li_width = this.li.first().width();
    this.li_len = this.li.length;

    this.thumbs = this.nav.find('a');

    this.current = 0;
}

Slider.prototype.transition = function(coords) {
    this.container.stop().animate({
        'margin-left': coords || -(this.current * this.li_width)
    })
}

Slider.prototype.set_current = function(dir) {
    var pos = this.current;
    if (dir === 'next') {
        pos++
    }
    else if (dir === 'prev') {
        pos--
    }
    this.current = (pos < 0) ? this.li_len - 1 : pos % this.li_len;

    return pos;
}

var slider = new Slider($('div.promo_inner ul'), $('div.promo_tumbs'));
slider.nav.find('div').on('click', function() {
    if ($(this).attr("data-dir") === undefined) {
        var index = slider.thumbs.index($(this).parent('a'));

        console.log(index)
    } else {
        slider.set_current($(this).data('dir'));
    }
    slider.transition();
})​
​ 
```

[小提琴链接](http://jsfiddle.net/6R9Wg/)

当我单击元素时，我得到两个值-单击元素的索引和-1。这里发生了什么？我怎样才能松开 -1 并只获得索引值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:54:40.993

调用 event.stopPropagation(); 为了阻止事件[Demo在JsFiddle上的传播](http://jsfiddle.net/SvHMa/1/)

这将使您更多地了解导致双重事件的元素[多重事件的原因 JsFiddle](http://jsfiddle.net/SvHMa/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:42:09.573

`nav.find()`也匹配`<div class="promo_tumbs_centar">`。尝试`find(".promo_tumb")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:44:12.537

当点击 .promo_tumb div 时，您也点击了 .promo_tumbs_centar。

你应该使用这个：

```
slider.nav.find('.promo_tumb') 
```

代替

```
slider.nav.find('div') 
```

# c# - 如何从asp设计器页面检查值的存在？

> ID：10831045
> 
> 赞同：1
> 
> 时间：2012-05-31T09:37:59.483
> 
> 标签：c#, asp.net

我从数据库中得到一个字符串列表，例如：

```
AddCustomer,
AddUser,
ListCustomer,
ListUser 
```

这些是asp页面的前缀。我需要隐藏和显示页面中的某些页面。以下是html片段：

```
<li>Customer Management
                    <ul>
                        <%if (AddCustomer)  //how to check whether my string is present or not, is it possible?
                          { %><li><a href="AddCustomer.aspx">Add Customer</a></li><%} %>
                        <li><a href="ListCustomer.aspx">List Customer</a></li>
                    </ul>
                </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:09:49.483

您是否尝试过编写方法然后从 aspx 页面调用它？

```
<%# YourMethodName((string)Eval("AddCustomer")) %> 
```

# php - 多个window.open在IE中不起作用

> ID：10831049
> 
> 赞同：0
> 
> 时间：2012-05-31T09:38:17.523
> 
> 标签：php, html, hyperlink, href

我有一个 ahref，单击它会更改 3 个 iFrame 的内容。这是代码：

```
<a href='weekone.php' target='weekone' onclick='window.open("weektwo.php","weektwo"); window.open("weekthree.php","weekthree")'>Link</a> 
```

现在这在 Firefox、Safari 等中完美运行，但在 IE 中不起作用。任何人都可以为我解释一下这个问题吗？我不能使用 Javascript，因为我在 PHP 框架中工作，并且 iFrame 链接是从数据库中调用的。

**更新**

看来问题在于从 window.open 调用的 URL 中的空格！当我从数据库中调用信息时（即 - “weektwo.php?Name=Bob and Dave”），我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:52:25.800

在评论的后面，尝试添加“return true;” 到 onclick 的末尾（未经测试）...

```
<a href='weekone.php' target='weekone' onclick='window.open("weektwo.php","weektwo"); window.open("weekthree.php","weekthree"); return true;'>Link</a> 
```

**更新**

根据更新的问题，尝试使用 PHP 函数“htmlentities”对查询字符串进行“HTML 编码”。

我将以下内容基于您的原始（预编辑）代码。因此，在这种情况下，我很抱歉要求您对其进行编辑，但我*确实*要求您准确显示发送到浏览器的内容...

```
<a href='weekone.php?Name=<?=htmlentities($i[Name])?>' target='<?=$i[Name]?> weekone' onclick='window.open("weektwo.php?Name=<?=htmlentities($i[Name])?>","<?=$i[Name]?> weektwo"); window.open("weekthree.php?Name=<?=htmlentities($i[Name])?>","<?=$i[Name]?> weekthree")'>Link</a> 
```

**更新2**（因为我很愚蠢）

它不应该是“HTML 编码”，而应该是使用“urlencode”的“URL 编码”......

```
<a href='weekone.php?Name=<?=urlencode($i[Name])?>' target='<?=$i[Name]?> weekone' onclick='window.open("weektwo.php?Name=<?=urlencode($i[Name])?>","<?=$i[Name]?> weektwo"); window.open("weekthree.php?Name=<?=urlencode($i[Name])?>","<?=$i[Name]?> weekthree")'>Link</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:57:32.383

什么版本的IE？

在 IE 8 上测试，效果很好。

```
<a href='test.htm' target='weekone' onclick='window.open("test.htm","weektwo"); window.open("test.htm","weekthree")'>Link</a>

<iframe name='weekone' id='weekone' width=100 height=100></iframe>

<iframe name='weektwo' id='weektwo' width=100 height=100></iframe>

<iframe name='weekthree' id='weekthree' width=100 height=100></iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:07:10.373

如果您尝试在 中打开链接`<iframe>`，则可能更容易做到

```
document.querySelector('iframe[name="weekone"]').src='test.htm';
document.querySelector('iframe[name="weektwo"]').src='test.htm';
document.querySelector('iframe[name="weekthree"]').src='test.htm'; 
```

（我使用了[document.querySelector](https://developer.mozilla.org/En/DOM/Document.querySelector)因为它是最简单的，但当然您可以使用 document.getElementById 或任何您想要获取对 . 的引用的方式`<iframe>`。）

# android - Android：在启动器图标上显示通知

> ID：10831052
> 
> 赞同：2
> 
> 时间：2012-05-31T09:38:26.837
> 
> 标签：android, android-layout, android-intent, notifications

如何在 iphone 等 Android 中的启动器图标（如原生消息、电子邮件应用程序）上显示通知。

![在此处输入图像描述](../Images/668f6ce3cbcc2a62b129972746b1fd1f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:54:24.033

Android**没有**提供执行此操作的方法。当您将项目编译为 apk 时，它总是引用相同的应用程序启动器图标。以后没有**办法**改变这一点。小部件可以是替代方案。

# ios - iAd Producer - 如何在 Safari 中打开 URL？

> ID：10831053
> 
> 赞同：0
> 
> 时间：2012-05-31T09:38:31.860
> 
> 标签：ios, xcode, safari, iad

我只是对使用 iAd Producer 创建 iAd 进行初步研究，但我们希望将广告链接到外部网站，而不是 iTunes 列表。

这可能吗，如果可以，你会怎么做？理想情况下，单击广告会在 Safari 中打开链接，但如果有一个 UIWebView 等效项也可以（令人困惑的是，WebGL 视图控件似乎用于显示 3d 对象）。

提前谢谢了。

泰德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:15:26.587

我不熟悉 iAds，在 HTML 中指定时它是什么样的？

根据这个[http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html) 看起来它不会被识别。

（这是该领域的有用参考：[http](http://wiki.akosma.com/IPhone_URL_Schemes) ://wiki.akosma.com/IPhone_URL_Schemes ）

但是，如果您在 UIWebView 中加载页面，您可以拦截 shouldStartLoadWithRequest: 中的 iAds 链接，然后自己从那里启动 Safari。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:07:21.477

啊，我现在意识到我有些过于复杂了/错过了简单的答案。

iAd Producer 制作的 iAd 都是 HTML，添加了 Javascript 来处理页面/控制事件。这应该给了我他们自己在某种 UIWebView 控件中执行的线索。

因此，当我在按钮单击事件中添加以下 Javascript 时，会警告用户他们正在离开应用程序（他们在离开 iAd Tester 应用程序时也是如此），然后像我想要的那样被扔到 Safari 中查看网站沿着。简单的。我猜这并不是 Apple 希望人们用 iAds 做的事情（它不会把他们带到应用商店），因此它没有那么好记录。

```
this.onViewTouchUpInside = function (event) {
document.location = "http://www.google.co.uk"; 
```

};

# objective-c - 声明类属性 Objective-C

> ID：10831054
> 
> 赞同：2
> 
> 时间：2012-05-31T09:38:38.777
> 
> 标签：objective-c, class, properties, attributes

我开始学习Objective-C，我有一个问题：

当你声明一个类的属性时，这样做有什么区别？

第一种情况：

```
@interface ViewController : UIViewController 
{
 UILabel *label;
}
@property(nonatomic,retain) UILabel *label;
@end 
```

第二种情况：

```
@interface ViewController : UIViewController 
{

}
@property(nonatomic,retain) UILabel *label;

@end 
```

在第一种情况下，我声明了一个具有一个属性（UILabel *label）的类，然后，我声明了该标签的属性。

在第二种情况下，我只声明属性。我一直认为我应该声明类属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:56:39.547

> 在第一种情况下，我声明了一个具有一个属性（UILabel *label）的类，然后，我声明了该标签的属性。

不，你不是。在第一种情况下，您要声明一个名为的实例变量`label`和一对名为 and 的访问器方法`-setLabel:`（`-label`统称为属性）。您没有在属性和实例变量之间建立任何链接。在这一点上，它们是独立的实体。

如果你在实现中这样做：

```
@synthesize label = fooBar; 
```

您是说 label 属性的方法实际上使用完全不同的实例变量来支持该属性。

> 我一直认为我应该声明类属性

我以前也是这么想的，但实际上，如果你正在合成属性，那么单独声明 ivar 是没有意义的，因为 @synthesize 会为你做这件事（并且在 ARC 中会应用正确的所有权限定符）。我现在做这样的事情：

```
 @synthesize label = label_; 
```

所以当我打算使用该属性时，我不使用实例变量。例如`[label length]`，当我的意思是标记错误`[[self label] length]`

此外，如果您将属性的实现更改为不使用实例变量，如果您没有显式声明实例变量，它将消失并且意外使用它（+ 和 中的那些`init`）`dealloc`将被标记为错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:14:34.103

另一个没有提到的区别：

在您的第一种情况下，`label`具有受保护的访问权限。`@protected`如果未另行声明，则默认情况下实例变量。

另一方面，在第二种情况下，`label`是私有的（至少在我的编译器中）。

当您有子类时，这种差异很重要。

# python - Flask-SQLAlchemy - 按关注者数量排序显示

> ID：10831057
> 
> 赞同：4
> 
> 时间：2012-05-31T09:39:04.190
> 
> 标签：python, sqlalchemy, flask

我正在尝试创建一个查询，该查询将返回数据库中的所有节目，这些节目按收藏它的用户数量排序。

简化的**工作**代码：

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy
from sqlalchemy.sql import func
import logging

app = Flask(__name__)
db = SQLAlchemy(app)

logging.basicConfig()
logging.getLogger('sqlalchemy.engine').setLevel(logging.INFO)

favorite_series = db.Table('favorite_series',
        db.Column('user_id', db.Integer, db.ForeignKey('users.id')),
        db.Column('series_id', db.Integer, db.ForeignKey('series.id')))

class User(db.Model):
    __tablename__ = 'users'

    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String)
    favorite_series = db.relationship('Serie', secondary=favorite_series,
            backref=db.backref('users', lazy='dynamic'))

    def __repr__(self):
        return '<User {0}>'.format(self.name)

class Serie(db.Model):
    __tablename__ = 'series'

    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String)

    def __repr__(self):
        return '<Serie {0}>'.format(self.name)

u1 = User()
u1.name = 'user1'

u2 = User()
u2.name = 'user2'

u3 = User()
u3.name = 'user3'

s1 = Serie()
s1.name = 'Serie1'

s2 = Serie()
s2.name = 'Serie2'

s3 = Serie()
s3.name = 'Serie3'

s4 = Serie()
s4.name = 'Serie4'

s5 = Serie()
s5.name = 'Serie5'

u1.favorite_series.extend([s1, s3, s5])
u2.favorite_series.extend([s1, ])
u3.favorite_series.extend([s1, s2, s3])

u1.favorite_series.extend([s1, s2])
db.session.add(u1)
db.session.add(u2)
db.session.add(u3)
db.session.add(s1)
db.session.add(s2)
db.session.add(s3)
db.session.add(s4)
db.session.add(s5)
db.create_all()
db.session.commit() 
```

我尝试通过以下方式检索它们：

```
shows = Serie.query.join(Serie.users).order_by(func.count(Serie.users)).all()

print shows 
```

但这会在 SQL 语法中引发错误，我试图搜索一些东西但无法找到任何有用的东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:15:27.507

工作解决方案：

```
sub = db.session.query(favorite_series.c.series_id, func.count(favorite_series.c.user_id).label('count')).group_by(favorite_series.c‌​.series_id).subquery()
shows = db.session.query(Serie, sub.c.count).outerjoin(sub, Serie.id == sub.c.series_id).order_by(db.desc('count')).all() 
```

# c# - SQL Server CE 3.5 重复行

> ID：10831059
> 
> 赞同：1
> 
> 时间：2012-05-31T09:39:08.977
> 
> 标签：c#, sql, database, sql-server-ce

一直在做一些研究，以找到解决我的问题的方法，但运气不佳！

是否有一个 SQL 关键字可以让我轻松地从表中删除重复的行（与 SQL Server CE 兼容）？

如果没有，你们中的任何人都可能知道任何可以提供帮助的资源吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:46:30.067

1.  创建具有相同列的新表
2.  向要使其唯一的列添加唯一索引（防止重复）
3.  逐行复制记录，忽略任何错误
4.  清空原表并复制回记录；或删除旧表并将新表重命名为旧表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:46:42.990

是这样的陈述

```
select distinct x from t 
```

不支持？我相信 SQL Server CE 3.5 确实支持 DISTINCT 语句。

# android - 我的布局背景在 Android 中滚动

> ID：10831060
> 
> 赞同：0
> 
> 时间：2012-05-31T09:39:10.680
> 
> 标签：android, android-layout, background-image

我有一个 RelativeLayout 作为我的视图的主要布局。我已将图像设置为背景。我还在该视图上添加了几个 EditText。我的问题是，当我开始编辑 EditText 并显示键盘时，我的背景会向上滚动。我怎么能解决这个问题？这是我的 RelaviveLayout 定义：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutPrincipal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:focusable="true" 
    android:focusableInTouchMode="true"
    android:background="@drawable/ciudad_hd_1"
    android:orientation="vertical" > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:11:14.983

尝试在 AndroidManifest.xml 的活动标签中使用它

```
<activity android:windowSoftInputMode="stateVisible|adjustPan" . . . > 
```

# java - 为什么“客户端”包中的类在服务器上工作正常？

> ID：10831061
> 
> 赞同：0
> 
> 时间：2012-05-31T09:39:11.593
> 
> 标签：java, gwt

我不明白为什么位于“clent”包内的类（bean）在服务器端工作正常？在 GWT 模块“客户端”包中，我设置为 `<source path='client'/>`

我一直认为我需要将我的类定位到 Shared 包中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:41:52.147

这真的只是一个约定。如果这个类只是一个 bean 并且也可以在服务器上使用，那么当然，把它放在`shared`.

但是，在某些情况下，某些 bean 可能实际上并未在服务器上使用，因此将它们放在`shared`目录中可能是过早的优化。

# javascript - 使用 YQL 通过 jQuery 解析 XML（IE 问题）

> ID：10831063
> 
> 赞同：0
> 
> 时间：2012-05-31T09:39:14.437
> 
> 标签：javascript, jquery, yql

我制作了一个脚本来使用 jQuery 解析 XML 文件，因为它位于另一个域中，所以我使用 YQL 作为代理。

该脚本在 Chrome、Safari、FF 中运行良好。使用 IE Developer 工具时，我可以看到 XML 文件，但在第一次 ajax 调用之后它似乎没有运行任何东西。关于 Opera 如果有人有类似于 IE 的 XDomainRequest 的修复程序，那将是合适的，但不如为 IE 解决它重要。如果可能的话，我想通过不使用 jsonp-data 来解决这个问题。

```
$(document).ready(function() {

// detect IE CORS transport
if ('XDomainRequest' in window && window.XDomainRequest !== null) {

  // override default jQuery transport
  $.ajaxSettings.xhr = function() {
      try { return new XDomainRequest(); }
      catch(e) { }
  };

  // also, override the support check
  jQuery.support.cors = true;
    //runs in IE
    alert('hi1');
}
// ajax call to get the xml-data from the YQL console
$.ajax(
    //runs in IE
    alert('hi2'),
    {
    url: 'http://query.yahooapis.com/v1/public/yql?q=select%20*%20%0A%20%20%20from%20xml%20%0A%20%20where%20url%3D%22https%3A%2F%2Fwww.lightbet.com%2Fxmlfeeds.aspx%3Ftype%3DCasinoJackpots%22&diagnostics=true',
    type: 'GET',
    dataType: 'xml',
    success : function(xml) {

    //doesn't run in IE
    alert('hi3');

    // Run the function for each Game tag in the XML file
    $('Game',xml).each(function game(i) {
        var $this = $(this),
            game = $this.attr("name") 

    // appned all the game names to a div
    $("#game_name").append(game);
    //doesn't run in IE
    alert('hi4');

    });
}}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:19:38.613

我应该先去 jQuery 错误报告网站，因为有一张票[http://bugs.jquery.com/ticket/8283](http://bugs.jquery.com/ticket/8283)

jaubourg 这个很棒的插件使它非常流畅： [https ://github.com/tlianza/ajaxHooks/blob/master/src/ajax/xdr.js](https://github.com/tlianza/ajaxHooks/blob/master/src/ajax/xdr.js)

此外，如果有人获得了 Opera 的插件或某种修复程序，那将是非常受欢迎的。

# php - 致命错误：不能将 stdClass 类型的对象用作数组

> ID：10831065
> 
> 赞同：0
> 
> 时间：2012-05-31T09:39:21.243
> 
> 标签：php, arrays, codeigniter

我正在将数据从控制器发送到模型 var_dump

```
$score 
```

如图所示

```
Array
(
    [assessment_score] => Array
        (
            [0] => Array
                (
                )

            [1] => Array
                (
                    [0] => stdClass Object
                        (
                            [id] => 3
                            [score] => 4
                            [assessment_id] => 1
                            [assessor_id] => 24
                            [level_test] => 2
                        )

                    [1] => stdClass Object
                        (
                            [id] => 4
                            [score] => 5
                            [assessment_id] => 1
                            [assessor_id] => 24
                            [level_test] => 3
                        )

                )

            [2] => Array
                (
                )

            [3] => Array
                (
                )

        )

    [assessment_msg] => Array
        (
            [0] => Array
                (
                )

            [1] => Array
                (
                    [0] => stdClass Object
                        (
                            [id] => 1
                            [user_id] => 21
                            [start_time] => 2012-05-20 20:45:30
                            [status] => 0
                            [end_time] => 2012-05-21 20:45:30
                            [assessor1] => 25
                            [assessor2] => 24
                            [assessor3] => 0
                            [gd_msg] => 
                            [gd_pf] => 
                            [csgd_msg] => 
                            [csgd_pf] => 
                            [pi_msg] => 
                            [pi_pf] => 
                            [wr_msg] => 
                            [wr_pf] => 
                        )

                )

            [2] => Array
                (
                    [0] => stdClass Object
                        (
                            [id] => 4
                            [user_id] => 28
                            [start_time] => 2012-05-23 13:38:32
                            [status] => 0
                            [end_time] => 2012-05-24 13:38:32
                            [assessor1] => 23
                            [assessor2] => 0
                            [assessor3] => 0
                            [gd_msg] => 
                            [gd_pf] => 
                            [csgd_msg] => 
                            [csgd_pf] => 
                            [pi_msg] => 
                            [pi_pf] => 
                            [wr_msg] => 
                            [wr_pf] => 
                        )

                )

            [3] => Array
                (
                    [0] => stdClass Object
                        (
                            [id] => 3
                            [user_id] => 22
                            [start_time] => 2012-05-14 14:00:41
                            [status] => 0
                            [end_time] => 2012-05-17 14:00:41
                            [assessor1] => 25
                            [assessor2] => 0
                            [assessor3] => 0
                            [gd_msg] => 
                            [gd_pf] => 
                            [csgd_msg] => 
                            [csgd_pf] => 
                            [pi_msg] => 
                            [pi_pf] => 
                            [wr_msg] => 
                            [wr_pf] => 
                        )

                )

        )

) 
```

但是当我评估它时

```
$user_score = array();
if (count($score['assessment_score'][$i]) > 0) {
    foreach ($score['assessment_score'][$i] as $score) {
             $user_score[$score->level_test] = $score->score;
    }
} 
```

抛出错误

```
( ! ) Fatal error: Cannot use object of type stdClass as array
in C:\xampp\htdocs\ci\application\views\users\users_score_list.php 
```

到线

```
 if (count($score['assessment_score'][$i]) > 0) { 
```

如何解决？如何避免致命错误，因为它破坏了我的进一步处理。下面一个是 var_export

```
array (
  'assessment_score' => 
  array (
    0 => 
    array (
    ),
    1 => 
    array (
      0 => 
      stdClass::__set_state(array(
         'id' => '3',
         'score' => '4',
         'assessment_id' => '1',
         'assessor_id' => '24',
         'level_test' => '2',
      )),
      1 => 
      stdClass::__set_state(array(
         'id' => '4',
         'score' => '5',
         'assessment_id' => '1',
         'assessor_id' => '24',
         'level_test' => '3',
      )),
    ),
    2 => 
    array (
    ),
    3 => 
    array (
    ),
  ),
  'assessment_msg' => 
  array (
    0 => 
    array (
    ),
    1 => 
    array (
      0 => 
      stdClass::__set_state(array(
         'id' => '1',
         'user_id' => '21',
         'start_time' => '2012-05-20 20:45:30',
         'status' => '0',
         'end_time' => '2012-05-21 20:45:30',
         'assessor1' => '25',
         'assessor2' => '24',
         'assessor3' => '0',
         'gd_msg' => '',
         'gd_pf' => '',
         'csgd_msg' => '',
         'csgd_pf' => '',
         'pi_msg' => '',
         'pi_pf' => '',
         'wr_msg' => '',
         'wr_pf' => '',
      )),
    ),
    2 => 
    array (
      0 => 
      stdClass::__set_state(array(
         'id' => '4',
         'user_id' => '28',
         'start_time' => '2012-05-23 13:38:32',
         'status' => '0',
         'end_time' => '2012-05-24 13:38:32',
         'assessor1' => '23',
         'assessor2' => '0',
         'assessor3' => '0',
         'gd_msg' => '',
         'gd_pf' => '',
         'csgd_msg' => '',
         'csgd_pf' => '',
         'pi_msg' => '',
         'pi_pf' => '',
         'wr_msg' => '',
         'wr_pf' => '',
      )),
    ),
    3 => 
    array (
      0 => 
      stdClass::__set_state(array(
         'id' => '3',
         'user_id' => '22',
         'start_time' => '2012-05-14 14:00:41',
         'status' => '0',
         'end_time' => '2012-05-17 14:00:41',
         'assessor1' => '25',
         'assessor2' => '0',
         'assessor3' => '0',
         'gd_msg' => '',
         'gd_pf' => '',
         'csgd_msg' => '',
         'csgd_pf' => '',
         'pi_msg' => '',
         'pi_pf' => '',
         'wr_msg' => '',
         'wr_pf' => '',
      )),
    ),
  ),
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:51:47.073

不要在循环中使用相同的 var name ( `$score`) 两次！`foreach()`

解决方案：

```
if (count($score['assessment_score'][$i]) > 0) {
    foreach ($score['assessment_score'][$i] as $data) { // $data instead of $score
        $user_score[$data->level_test] = $data->score;  // $data instead of $score
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:48:43.287

似乎这`score["assessment_score"][$i]`是一个数组，因此要访问 1° 对象，您需要使用 s`core["assessment_score"][1][0]`

# boost - 如何从 boost::intrusive set 容器中分离元素

> ID：10831068
> 
> 赞同：4
> 
> 时间：2012-05-31T09:39:42.140
> 
> 标签：boost, boost-intrusive

我正在尝试从 boost::intrusive 集中分离元素并获得断言失败。当我从容器中分离后删除元素时。

该类派生自 set_base_hook。

类 fileXfer：公共 set_base_hook > 70 {

我正在使用“擦除”功能将对象从容器中分离出来。当我尝试删除对象时，我得到断言失败。断言失败发生在以下位置。

/usr/local/include/boost/intrusive/detail/utilities.hpp:344: void boost::intrusive::detail::destructor_impl(Hook&, boost::intrusive::detail::link_dispatch<(boost::intrusive: :link_mode_type)1u>) [with Hook = boost::intrusive::detail::generic_hook, boost::intrusive::default_tag, (boost::intrusive::link_mode_type)1u, 3>]: 断言 `!hook.is_linked （）' 失败的。中止（核心转储）

当我查看错误的位置时，我看到了这个命令。

341 { //如果这个断言提出，你可能已经销毁了一个对象 342 //当它仍然被插入到一个活着的容器中时。343 //如果是，在销毁之前从容器中移除对象。344（无效）钩子；BOOST_INTRUSIVE_SAFE_HOOK_DESTRUCTOR_ASSERT(!hook.is_linked()); 第345章

请指示

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T05:41:00.550

经过大量谷歌搜索后，我解决了这个问题。应该使用erase(Classname::s_iterator_to(value)) 而不是“erase(value)”。

# python - 如何使用 python 自动化 UI，请任何人都可以分享示例

> ID：10831075
> 
> 赞同：0
> 
> 时间：2012-05-31T09:40:21.957
> 
> 标签：python

我有一个 Web 应用程序，我需要使用 python 脚本自动化 UI 设计

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:43:20.373

你在寻找像[Selenium](http://seleniumhq.org/)这样的东西吗？它有python绑定。您可以编写 python 代码来驱动浏览器。

# mysql - MySQL如何在UTF-8中“不区分大小写”和“不区分重音”

> ID：10831076
> 
> 赞同：21
> 
> 时间：2012-05-31T09:40:27.920
> 
> 标签：mysql, utf-8, case-insensitive, non-ascii-characters

我在“utf8 - UTF-8 Unicode”中有一个模式作为字符集和“utf8_spanish_ci”的排序规则。

所有内部表都是 InnoDB，具有与提到的相同的字符集和排序规则。

问题来了：

像这样的查询

```
SELECT *
FROM people p
WHERE p.NAME LIKE '%jose%'; 
```

我得到 83 个结果行。我应该有 84 个结果，因为我知道。

更改位置：

```
WHERE p.NAME LIKE '%JOSE%'; 
```

我得到完全相同的 83 行。使用 JoSe、Jose、JOSe 等组合。报告所有相同的 83 行。

当重音在游戏中播放时，问题就来了。如果这样做：

```
WHERE p.NAME LIKE '%josé%'; 
```

我没有得到任何结果。0 行。

但如果我这样做：

```
WHERE p.NAME LIKE '%JOSÉ%'; 
```

我只得到一个结果行，所以 1 行。这是唯一带有重音“jose”并大写的行。

我已经尝试过使用 josÉ 或 JoSÉ 或我所做的任何组合，只要重音字母保持大写或不保持大写，因为它确实存储在数据库中并且它仍然返回唯一的行。如果我突然用 JOSE 中的大写字母组合将“É”更改为“é”，它不会返回任何行。

所以结论：

*   如果游戏中没有拉丁字符，则不区分大小写。
*   如果出现拉丁字符，则区分大小写。
*   口音敏感，好像我搜索 JOSE 或 jose，我只得到 83 行，而不是我需要的 84 行。

我想要的是？

*   要搜索“jose”、“JOSE”、“José”、“JOSÉ”、“JÒSE”、“jöse”、“JoSÈ”……必须返回我知道存在的 84 行。我如何将我的搜索变成不区分大小写和不区分“拉丁”的。

像`COLLATION`on这样的解决方案`LIKE`对我不起作用，不知道为什么......

我能做些什么？

**编辑：**

如果我这样做：

```
WHERE p.NAME LIKE '%jose%' COLLATE utf8_general_ci; 
```

我得到错误：

> COLLATION 'utf8_general_ci' 对 CHARACTER SET 'latin1' 无效

而且我也更改了列上所有可能的排序规则！

如果我做类似的事情：

```
WHERE p.NAME LIKE _utf8 '%jose%' COLLATE utf8_general_ci; 
```

报告了相同的 83 行，就好像我什么都没做一样……

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T11:44:27.887

您已经尝试使用不区分重音的排序规则进行搜索和排序。

[http://dev.mysql.com/doc/refman/5.0/en/charset-collat​​ion-implementations.html](http://dev.mysql.com/doc/refman/5.0/en/charset-collation-implementations.html)

问题是，您的`NAME`列似乎存储在 latin1（8 位）字符集中。这就是为什么 mySQL 会像这样对你发牢骚：

```
 COLLATION 'utf8_general_ci' is not valid for CHARACTER SET 'latin1' 
```

如果你尝试，你可能会得到你想要的结果

```
 WHERE CONVERT(p.NAME USING utf8) LIKE _utf8 '%jose%' COLLATE utf8_general_ci; 
```

但小心点！

当您在 WHERE 语句中的列上使用任何类型的函数（在此示例中为 CONVERT）时，您会挫败 MySQL 使用索引优化搜索的尝试。如果这个项目变得很大（也就是说，如果您的表中有很多行），您需要以 utf8 格式存储数据，而不是 latin1。（您可能已经知道您的`LIKE '%whatever%'`搜索词也会破坏 MySQL 的索引。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-19T15:39:27.120

以防万一其他人偶然发现这个问题，我已经找到了解决问题的方法，至少对我来说是这样。

我正在使用 PHP 从数据库中插入和检索记录。尽管我的数据库、表和列是 utf8 以及 PHP 文件的编码，但事实是 PHP 和 MySQL 之间的连接中使用的编码是使用 latin1 进行的。我设法找到这个使用

```
$mysqli->character_set_name(); 
```

`$mysqli`你的对象在哪里。

为了让搜索按预期开始工作，返回不区分重音和不区分大小写的字符的重音记录，我必须明确设置连接的字符集。

为此，您只需执行以下操作：

```
$mysqli->set_charset('utf8'); 
```

其中 $mysqli 是您的 mysqli 对象。如果您有一个包装数据库功能的数据库管理类，那么这很容易应用于完整的应用程序。如果没有，您必须在打开连接的任何地方显式设置它。

我希望这对某人有所帮助，因为我已经对此感到害怕了！

# ios - ld：警告：合并暂定定义_paused时对齐丢失

> ID：10831077
> 
> 赞同：0
> 
> 时间：2012-05-31T09:40:29.003
> 
> 标签：ios, xcode, cocos2d-iphone

当我在 iOS 目标上存档我的应​​用程序时收到此警告：3.0 可能是因为我修改了构建设置，我收到了警告。

```
Ld /Users/Benoit/Library/Developer/Xcode/DerivedData/NanoWar2-epaqhmmjlngxpwaedknxqymopqbj/Build/Intermediates/ArchiveIntermediates/NanoWar2/IntermediateBuildFilesPath/NanoWar2.build/Release-iphoneos/NanoWar2.build/Objects-normal/armv7/NanoWar2 normal armv7
    cd /Users/Benoit/Workshop/Dropbox/NanoWar2_Iphone
    setenv IPHONEOS_DEPLOYMENT_TARGET 3.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -L/Users/Benoit/Library/Developer/Xcode/DerivedData/NanoWar2-epaqhmmjlngxpwaedknxqymopqbj/Build/Intermediates/ArchiveIntermediates/NanoWar2/BuildProductsPath/Release-iphoneos -L/Users/Benoit/Workshop/Dropbox/NanoWar2_Iphone/NanoWar2/libs/TestFlightSDK1.0 -F/Users/Benoit/Library/Developer/Xcode/DerivedData/NanoWar2-epaqhmmjlngxpwaedknxqymopqbj/Build/Intermediates/ArchiveIntermediates/NanoWar2/BuildProductsPath/Release-iphoneos -F/Users/Benoit/Workshop/Dropbox/NanoWar2_Iphone/NanoWar2/Frameworks -filelist /Users/Benoit/Library/Developer/Xcode/DerivedData/NanoWar2-epaqhmmjlngxpwaedknxqymopqbj/Build/Intermediates/ArchiveIntermediates/NanoWar2/IntermediateBuildFilesPath/NanoWar2.build/Release-iphoneos/NanoWar2.build/Objects-normal/armv7/NanoWar2.LinkFileList -dead_strip -lz -miphoneos-version-min=3.0 -lz -framework GameKit -framework SystemConfiguration -framework BugSense-iOS -framework CFNetwork -framework QuartzCore -framework OpenGLES -framework OpenAL -framework AudioToolbox -framework AVFoundation -framework UIKit -framework Foundation -framework CoreGraphics -lTestFlight -o /Users/Benoit/Library/Developer/Xcode/DerivedData/NanoWar2-epaqhmmjlngxpwaedknxqymopqbj/Build/Intermediates/ArchiveIntermediates/NanoWar2/IntermediateBuildFilesPath/NanoWar2.build/Release-iphoneos/NanoWar2.build/Objects-normal/armv7/NanoWar2

ld: warning: alignment lost in merging tentative definition _paused
ld: warning: alignment lost in merging tentative definition _paused
ld: warning: alignment lost in merging tentative definition _paused 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:01:39.897

固定的

我从 .h 文件中删除了 external 关键字。

```
external BOOL paused 
```

到

```
BOOL paused 
```

# android - Onclick 线性布局，返回视图 id 总是 -1

> ID：10831078
> 
> 赞同：1
> 
> 时间：2012-05-31T09:40:33.860
> 
> 标签：android, view

在我的应用程序中，我尝试生成动态视图数组并尝试添加 onclick 侦听器，但 onclick 该视图返回 **java.lang.ArrayIndexOutOfBoundsException: length=5; index=-1**并且视图 id 总是返回-1，请帮助我如何解决它。以下是我的代码： -

```
private void setLayout() {
        layoutHeader = new LinearLayout[5];
        layoutTable = new LinearLayout[5];
        for (int i = 0; i <5; i++) {
            layoutHeader[i] = new LinearLayout(this);
            layoutHeader[i].setLayoutParams( new LayoutParams(LayoutParams.FILL_PARENT, 50));
            layoutHeader[i].setBackgroundColor(R.color.background);

            LayoutParams vName = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            TextView tv=new TextView(this);
            tv.setLayoutParams(vName);
            tv.setText("Reliance");
            layoutHeader[i].addView(tv);

            LayoutParams pts = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            TextView tvPts=new TextView(this);
            tvPts.setLayoutParams(pts);
            tvPts.setText("12345");
            tvPts.setGravity(0);
            layoutHeader[i].addView(tvPts);

            myWalletLayout.setId(i);
            myWalletLayout.addView(layoutHeader[i]);
            layoutHeader[i].setOnClickListener(onClickHeader);

            //////////////////////////////////////////////////////////////////////////////////////
            //////////SET CHILD VIEW/////////////////////////////////////////////////////////////
            //////////////////////////////////////////////////////////////////////////////////////

            layoutTable[i] = new LinearLayout(this);
            layoutTable[i].setLayoutParams( new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
            layoutTable[i].setId(12345);
            layoutTable[i].setVisibility(View.GONE);

                TableLayout MainLayout = new TableLayout(this);
                MainLayout.setVerticalFadingEdgeEnabled(true);
                MainLayout.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT));
                MainLayout.setStretchAllColumns(true);
                MainLayout.setFadingEdgeLength(4);

                //Create the first row and add two text views

                TableRow row = new TableRow(this);
                row.setPadding(1, 1, 1, 1);
                row.setBackgroundColor(Color.parseColor("#ABA8A8"));

                TextView txt1 = new TextView(this);
                txt1.setText("Card Number");
                txt1.setTextColor(Color.parseColor("#000000"));
                txt1.setGravity(android.view.Gravity.CENTER);

                TextView txt2 = new TextView(this);
                txt2.setText("1234545");
                txt2.setTextColor(Color.parseColor("#000000"));
                txt2.setGravity(android.view.Gravity.CENTER);

                row.addView(txt1);
                row.addView(txt2);
                MainLayout.addView(row);

                TableRow row1 = new TableRow(this);
                row1.setPadding(1, 1, 1, 1);
                row1.setBackgroundColor(Color.parseColor("#ABA8B8"));

                TextView txt3 = new TextView(this);
                txt3.setText(" Barcode");
                txt3.setTextColor(Color.parseColor("#000000"));
                txt3.setGravity(android.view.Gravity.CENTER);

                TextView txt4 = new TextView(this);
                txt4.setText("1234545");
                txt4.setTextColor(Color.parseColor("#000000"));
                txt4.setGravity(android.view.Gravity.CENTER);

                row1.addView(txt3);
                row1.addView(txt4);
                MainLayout.addView(row1);

                layoutTable[i].addView(MainLayout);
                layoutTable[i].setId(i);
                myWalletLayout.addView(layoutTable[i]);

        }

    }
    OnClickListener onClickHeader = new OnClickListener() {
        public void onClick(View v) {
            int currSelId = v.getId();
            System.out.println("=============================="+currSelId);
            if(layoutTable[currSelId].getVisibility()==8){
                layoutTable[currSelId].setVisibility(View.VISIBLE);
            }
            else{
                layoutTable[currSelId].setVisibility(View.GONE);
            }

        }
    }; 
```

# javascript - IE9 和 10 不反映 javascript 光标更改

> ID：10831081
> 
> 赞同：3
> 
> 时间：2012-05-31T09:40:47.073
> 
> 标签：javascript, internet-explorer, binding, keyboard, cursor

以下代码示例在单击按钮时添加半透明 100% 覆盖。覆盖一直存在，直到释放鼠标按钮。这是应该发生的事情：

*   单击按钮并按住鼠标。

*   当鼠标按下时，按下并释放 shift 键。

*   当它被按下时，一个 div 区域用文本“horizo​​ntal”指示这一点，并且光标变为 e-resize。释放 shift 时，div 指示“垂直”，光标变为 n-resize。

在 IE9/10 中，文本发生变化，但光标保持不变。我尝试将键绑定更改为主体级别和覆盖级别，但无济于事。

这是代码：（我尝试将其放入 jsfiddle 和 jsbin 但由于某种原因它们完全忽略了按键）。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <style type="text/css">
        .overlay {
            background-color: rgba(0, 0, 0, 0.3);
            top: 0; bottom: 0; left: 0; right: 0; position: fixed;
            z-index: 999;
        }
        .vertical { cursor: n-resize !important; }
        .horizontal { cursor: e-resize !important; }
    </style>

    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(function () {

            $("#button1").mousedown(onButtonMouseDown);

            function onButtonMouseDown(e) {

                var overlay;

                overlay = $("body").after("<div class=\"overlay\"></div>").next();
                overlay.addClass((e.shiftKey) ? "horizontal" : "vertical");

                $(document).bind("keydown.ntextbox", function (e) {
                    if (e.which === 16) {
                        overlay.removeClass("vertical").addClass("horizontal");
                        $("#div1").html("horizontal");
                    }
                });

                $(document).bind("keyup.ntextbox", function (e) {
                    if (e.which === 16) {
                        overlay.removeClass("horizontal").addClass("vertical");
                        $("#div1").html("vertical");
                    }
                });

                overlay.mouseup(function (e) {
                    overlay.remove();
                    $(document).unbind(".ntextbox");
                    return false;
                });

                return false;
            }

        });
    </script>

</head>

<body>
    <div id="div1">...</div>
    <button id="button1">Click me</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:45:48.380

这是一个相当奇怪的问题，但我已经瞄准了主要问题。与其重复你的逻辑，在已经设置了适当的样式后再次添加光标，你可以用它自己的克隆来替换按钮。让我解释。

当您`mousedown`点击按钮时，它将控制光标，不再允许您在 IE 中修改它。经过大约一个小时左右的尝试，*我终于**意识到*，如果你调用`$(this).remove()`按钮事件，UI不再被阻塞，你可以随意更新光标。然而，这确实让我们没有按钮。

最后，如果修改了按钮逻辑以用克隆替换自身。这有效地消除了阻止光标更改的按钮，尽管最终用户知道没有发生这样的切换。

此外，我更新了您的一些代码，因为它有一些非常严重的问题（例如在 body 标记之外添加覆盖元素等等）。

以下内容可以稍微清理一下：

```
var overlay = $("<div>", {
    'class':'overlay', 
    'mouseup':function(){ $(this).hide() } 
}).hide().appendTo("body");;

$("#button1").on("mousedown", function(){
    overlay.show();
    // Replacing this button permits the cursor
    // to be updated in IE
    $(this).replaceWith( $(this).clone(true) );
});

$(document).on('keydown keyup', function(e){
    if ( e.which === 16 && overlay.is(":visible") ) {
        if ( e.type === "keyup" ) {
            overlay.addClass("vertical").removeClass("horizontal");
        } else {
            overlay.addClass("horizontal").removeClass("vertical");
        }
    }
});​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/p6eZw/](http://jsfiddle.net/jonathansampson/p6eZw/)

值得注意的是，根据我的测试，Chrome 仍然会阻止用户更改光标的能力。我没有看过 Firefox、Safari 或 Opera。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:29:25.227

添加以下 jQuery 语句似乎可以修复它。

```
$(".overlay").css("cursor", "e-resize");
$(".overlay").css("cursor", "n-resize"); 
```

那么，也许是这样的？

```
 $(document).bind("keydown.ntextbox", function (e) {
       if (e.which === 16) {
           overlay.removeClass("vertical").addClass("horizontal").css("cursor", "e-resize");
           $("#div1").html("horizontal");
       }
  });

  $(document).bind("keyup.ntextbox", function (e) {
       if (e.which === 16) {
           overlay.removeClass("horizontal").addClass("vertical").css("cursor", "n-resize");
           $("#div1").html("vertical");
       } 
  }); 
```

# c++ - 在 Visual Studio 2010 项目中使用 OpenCV 2.4.0

> ID：10831088
> 
> 赞同：1
> 
> 时间：2012-05-31T09:41:05.597
> 
> 标签：c++, opencv

我问过一个关于[如何链接和使用 OpenCV 标头的类似问题？](https://stackoverflow.com/questions/10818437/how-to-link-and-use-opencv-headers)，但到目前为止还没有运气。所以我决定问一个新的、更具体的问题。

有人能告诉我我需要在我的 C++ 项目中包含哪些 OpenCV 特定的文件夹或文件——以及如何包含它们吗？我已经在我的 C:\ 驱动器上安装了 OpenCV 2.4.0。我查看了 openCV 网站上的教程，但它们适用于旧版本（OpenCV 2.1），并引用了现在不存在的文件，例如 objdetect.hpp（例如）。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:25:44.753

请参阅[http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to](http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to)

将这些添加到您的 stdafx.h

```
#include <opencv2/core/core.hpp>        // cv::Mat etc, always need this
#include <opencv2/imgproc/imgproc.hpp>  // all the image processing functions
#include <opencv2/highgui/highgui.hpp>  // Display and file I/O 
```

假设您已将 OPENCV_DIR 设置为放置 opencv 的位置，例如。`OPENCV_DIR=c:\opencv2.4\opencv`

然后将项目设置中的VC++目录设置为Include add`$(OPENCV_DIR)\include`和Library add`$(OPENCV_DIR)\lib`

然后在“链接器输入”中添加opencv_core240.lib（用于调试的opencv_core240D.lib）opencv_imgproc240.lib和opencv_highgui240.lib等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T07:04:34.423

OpenCV 的文件夹结构在 2.4 中发生了变化，因此您应该使用教程中没有提到的其他文件夹：

*   指向`OPENCV_DIR`构建目录（例如`C:\opencv\build`），而不是特定于平台的目录。
*   Path-Variable 必须指向特定于平台的 bin 目录（例如`%OPENCV_DIR%\x86\vc10\bin`）...
*   ...链接器属性相同（例如`$(OPENCV_DIR)\x86\vc10\lib`）

# android - 在 Android 应用程序中集成 PayPal(MECL) 库

> ID：10831103
> 
> 赞同：1
> 
> 时间：2012-05-31T09:42:04.963
> 
> 标签：android, paypal, paypal-sandbox

我正在尝试将 paypal_mecl 库集成到 android 应用程序中。我从[这里](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)下载了示例代码和 paypal_mecl 库。我只是通过演示应用程序，但我无法理解如何添加我的购买信息，例如不同的物品和这些物品的钱。在演示应用程序中，他们在 webview 中加载了 url (http://paydemo.sms4me.com/ ECDemo-server/cart.jsp？）那个cart.jsp页面包含什么？还是有其他方法可以通过 paypal_mecl 处理付款流程？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:48:02.067

使用 MECL（相对于 MPL），您必须拥有自己的网站。在 PayPal 示例中，cart.jsp 接收购物车信息（例如 size=Large&toppings=Peperoni 等）和设备令牌作为 URL 的一部分，并显示带有 Checkout with PayPal 按钮的移动购物车页面。稍后它将使用付款信息调用 SetExpressCheckout。

要查找所涉及的内容，paypal_nvp_java_sdk 将是最好的资源，因为它有一组 JSP 示例。

您可以将更多工作推送到 Android 客户端，但您仍然需要拥有自己的网站来处理手机和 PayPal 之间的三个请求和响应的转发。通过安全服务器的主要原因是防止您的 API 凭据被窥探。

# android - 广播接收器“赢死”

> ID：10831113
> 
> 赞同：0
> 
> 时间：2012-05-31T09:42:53.520
> 
> 标签：android, broadcastreceiver

我正在做一些测试，我认为 Android 正在杀死我的远程广播接收器。

现在我正在从一个活动启动我的广播接收器，然后让广播接收器每分钟设置一个警报以重新启动自己。这在几个小时（2-20 小时）内效果很好，然后它就会“赢得死亡”。

有谁知道我为什么会得到这个以及我可以做些什么来让它永久运行？

```
D/ShutMeUp AlarmReceiver(16161): ALARM TRIGGERED <br>
I/ShutMeUp AlarmReceiver(16161): Doing AWESOME stuff
<br>I/ShutMeUp AlarmReceiver(16161): Month:May Day:Monday Hour:0 Min:10
<br>D/ShutMeUp AlarmReceiver(16161): ALARM END
<br>D/ShutMeUp AlarmReceiver(16161): ALARM TRIGGERED
<br>I/ShutMeUp AlarmReceiver(16161): Doing AWESOME stuff
<br>I/ShutMeUp AlarmReceiver(16161): Month:May Day:Monday Hour:0 Min:11
<br>D/ShutMeUp AlarmReceiver(16161): ALARM END
<br>I/ActivityManager( 1904): Exiting application process se.davidsebela.ShutMeUp  
 (android.os.BinderProxy@4423b0b0)
<br>I/WindowManager( 1904): WIN DEATH: Window{4430bea8se.davidsebela.ShutMeUp/se.davidsebela.ShutMeUp.ShutMeUp paused=false}
<br>I/WindowManager( 1904): WIN DEATH: Window{441f17e8 se.davidsebela.ShutMeUp/se.davidsebela.ShutMeUp.Create paused=false}
<br>I/ActivityManager( 1904): Process se.davidsebela.ShutMeUp:remote (pid 16161) has died. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:13:37.550

我想我已经解决了我的问题`setRepeating()`

```
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), delayInMilli, pendingIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:57:07.913

![活动生命周期](../Images/1e0bc0875f8f2520d647a7981930fd2c.png)

您可能处于“具有更高优先级的应用程序需要内存”->“应用程序进程被杀死”的情况。

使用 Linux，您无法确定某个应用程序会永久运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:00:28.440

~~如果您的代码从活动中启动广播接收器，您还必须从活动中停止它（和警报管理器条目），因为 android 可能会像您经历的那样从内存中抛出您的活动。~~

我在 中注册`onResume()`和注销`onPause()`。

~~如果您希望您的 BroadCastReceiver 在内存不足时重新加载，我宁愿通过清单注册 BroadCastReceiver。在这种情况下，android 操作系统处理加载/卸载。~~

[更新]

```
 > I am starting my Broadcastreceiver from an activity 
```

我误解了您通过代码而不是清单注册 BroadCastReceiver 的声明。如果它在清单中注册，则 android 负责加载 Broadcastreceiver 代码。所以你的问题是不同的。

# windows - 插入 USB 闪存驱动器时如何防止自动播放并运行我自己的应用程序

> ID：10831114
> 
> 赞同：0
> 
> 时间：2012-05-31T09:42:58.567
> 
> 标签：windows, usb-drive, autoplay

插入 USB 闪存驱动器时，Windows 通常会打开自动播放对话框，提供浏览驱动器或如果有多媒体文件提供选择应用程序来打开它们。

我们开发了一个连接到 USB 驱动器并将自身注册为大容量存储设备的媒体播放器。

我需要的是，在插入播放器时，不会显示此对话框，而是启动我自己的应用程序。

理想情况下，该应用程序将位于闪存驱动器本身上，但据我了解，USB 驱动器禁用了自动运行。

如果启动预安装的应用程序就足够了。我已经尝试捕捉 WM_DRIVE_CHANGE 消息，但这仅在我的应用程序是最顶层的窗口时才有效，否则会显示自动播放对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:10:22.740

经过对谷歌的长期研究，我发现了这个论坛帖子：

[http://social.msdn.microsoft.com/Forums/uk-UA/windowssdk/thread/aef929cb-62ac-4371-b7de-2c07adf3c6a7](http://social.msdn.microsoft.com/Forums/uk-UA/windowssdk/thread/aef929cb-62ac-4371-b7de-2c07adf3c6a7)

我遵循了这个，这是工作代码：

```
[Flags()]
public enum AutorunContent : int
{
    AutorunInf = 2,
    AudioCD = 4,
    DVDMovie = 8,
    BlankCD = 16,
    BlankDVD = 32,
    UnknownContent = 64,
    AutoPlayPictures = 128,
    AutoPlayMusics = 256,
    AutoPlayMovies = 512
}

[ComImport]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
[Guid("DDEFE873-6997-4e68-BE26-39B633ADBE12")]
public interface IQueryCancelAutoPlay
{
    [PreserveSig]
    int AllowAutoPlay(
      [MarshalAs(UnmanagedType.LPWStr)] string pszPath,
      [MarshalAs(UnmanagedType.U4)] AutorunContent dwContentType,
      [MarshalAs(UnmanagedType.LPWStr)] string pszLabel,
      [MarshalAs(UnmanagedType.U4)] int dwSerialNumber);
}

public class RunningObjectTableEntry : IDisposable
{
    private int cookie;
    private IRunningObjectTable rot = null;
    private IMoniker monkey = null;

    private RunningObjectTableEntry() { }

    /// <summary>
    /// Creates a new entry for the given object
    /// </summary>
    /// <param name="obj">Object to make an entry for. Only one object per class should ever be registered.</param>
    public RunningObjectTableEntry(object obj)
    {
        int hr = GetRunningObjectTable(0, out rot);
        if (hr != 0)
        {
            throw new COMException("Could not retreive running object table!", hr);
        }

        Guid clsid = obj.GetType().GUID;
        hr = CreateClassMoniker(ref clsid, out monkey);
        if (hr != 0)
        {
            Marshal.ReleaseComObject(rot);
            throw new COMException("Could not create moniker for CLSID/IID \"" + clsid + "\"!", hr);
        }

        cookie = rot.Register(0x01, obj, monkey);   //weak reference, but allow any user
    }

    [DllImport("ole32.dll", ExactSpelling = true)]
    private static extern int GetRunningObjectTable([MarshalAs(UnmanagedType.U4)] int reserved, out IRunningObjectTable pprot);

    [DllImport("ole32.dll", CharSet = CharSet.Unicode, ExactSpelling = true)]
    private static extern int CreateClassMoniker([In] ref Guid g, [Out] out IMoniker ppmk);

    #region IDisposable Members

    /// <summary>
    /// De-registers the object and class from the Running Object Table
    /// </summary>
    public void Dispose()
    {
        Marshal.ReleaseComObject(monkey);
        rot.Revoke(cookie);
        Marshal.ReleaseComObject(rot);
    }

    #endregion
}

[ComVisible(true)]
[Guid("331F1768-05A9-4ddd-B86E-DAE34DDC998A")]
[ClassInterface(ClassInterfaceType.None)]
public class Autoplay : IQueryCancelAutoPlay, IDisposable
{
    private RunningObjectTableEntry rotEntry;

    public Autoplay()
    {
        rotEntry = new RunningObjectTableEntry(this);
    }

    #region IQueryCancelAutoPlay Members

    public int AllowAutoPlay(string pszPath, AutorunContent dwContentType, string pszLabel, int dwSerialNumber)
    {
        if (pszLabel == "FUNKEYPLAY")  //This is the name of my volume that should not call autoplay
        {

            return 1;
        }
        else
        {
            return 0;
        }
        //Console.WriteLine("QueryCancelAutoPlay:");
        //Console.WriteLine("   " + pszPath);
        //Console.WriteLine("   " + dwContentType.ToString("x"));
        //Console.WriteLine("   " + pszLabel);
        //Console.WriteLine("   " + dwSerialNumber.ToString());
    }

    #endregion

    #region IDisposable Members

    public void Dispose()
    {
        rotEntry.Dispose();
    }

    #endregion
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:36:38.663

尝试观看 USB 中的所有文件。从文件夹首选项中，您可以选择显示/隐藏隐藏文件。您的设备上有一个名为 autorun.inf 的文件，每次插入 USB 时都会应用该文件。因此，如果您打开文件并键入应用程序的名称，它会在您每次插入闪存时自动运行。

# playn - 无法运行 playn-showcase-java（playn 示例）

> ID：10831115
> 
> 赞同：0
> 
> 时间：2012-05-31T09:43:01.853
> 
> 标签：playn

我在做：[http ://code.google.com/p/playn/wiki/GettingStarted](http://code.google.com/p/playn/wiki/GettingStarted)

当我尝试这样做时：在 Package Explorer 中单击 playn-showcase-java 按 Command-Shift-F11 或右键单击并选择 Run as → Maven test

我得到这个：

结果 ：

```
Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-antrun-plugin:1.6:run (default) @ playn-showcase-java ---
[INFO] Executing tasks

main:
     [java] Exception in thread "main" java.lang.IllegalStateException: Function is not supported
     [java]     at org.lwjgl.BufferChecks.checkFunctionAddress(BufferChecks.java:58)
     [java]     at org.lwjgl.opengl.EXTFramebufferObject.glBindFramebufferEXT(EXTFramebufferObject.java:199)
     [java]     at playn.java.JavaGLContext.bindFramebufferImpl(JavaGLContext.java:150)
     [java]     at playn.core.gl.GLContext.viewWasResized(GLContext.java:250)
     [java]     at playn.java.JavaGLContext.initGL(JavaGLContext.java:174)
     [java]     at playn.java.JavaGraphics.init(JavaGraphics.java:155)
     [java]     at playn.java.JavaPlatform.run(JavaPlatform.java:218)
     [java]     at playn.core.PlayN.run(PlayN.java:37)
     [java]     at playn.showcase.java.ShowcaseJava.main(ShowcaseJava.java:28)
     [java] Java Result: 1
[INFO] Executed tasks
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] PlayN Showcase Metaproject ........................ SUCCESS [2.359s]
[INFO] PlayN Showcase Core ............................... SUCCESS [5.828s]
[INFO] PlayN Showcase Java ............................... SUCCESS [22.047s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 31.125s
[INFO] Finished at: Thu May 31 12:03:05 EEST 2012
[INFO] Final Memory: 6M/16M
[INFO] ------------------------------------------------------------------------ 
```

我没有更改代码中的任何内容。此演示有默认代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:02:27.250

您的显卡必须支持 OpenGL 2.0 才能播放。

# android - 在自定义对话框android上实现检查

> ID：10831117
> 
> 赞同：0
> 
> 时间：2012-05-31T09:43:15.900
> 
> 标签：android

我想在 android 上实现对自定义对话框的检查意味着我在自定义对话框上有“确定”和“取消”按钮现在我在自定义对话框上有 3 个编辑文本，当我点击确定时对话框会自动消失而无需签入编辑文本

代码如下：

```
 void openCustomDialog(){
     AlertDialog.Builder customDialog
      = new AlertDialog.Builder(orderDetails.this);
     customDialog.setTitle("Custom Dialog");

     LayoutInflater layoutInflater
  = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  View view=layoutInflater.inflate(R.layout.mylayout,null);

   et1 = (EditText)view.findViewById(R.id.et1);
   et2 = (EditText)view.findViewById(R.id.et2);
   et3 = (EditText)view.findViewById(R.id.et3);

  customDialog.setPositiveButton("OK", new DialogInterface.OnClickListener(){

   @Override
   public void onClick(DialogInterface arg0, int arg1) {
    // TODO Auto-generated method stub
System.out.println("######################3buton======="+et1.getText());     
System.out.println("@@@@@@@@@##############3buton======="+et2.getText());     

System.out.println("$$$$######3buton======="+et3.getText());    

if(et1.getText().equals("")){

}
else{

}

   }});

  customDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener(){

   @Override
   public void onClick(DialogInterface arg0, int arg1) {
    // TODO Auto-generated method stub

   }});

        customDialog.setView(view);
        customDialog.show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:29:46.157

使用`et1.getText().toString().equals("")`代替，`et1.getText().equals("")`您的检查将起作用。

# c# - 你如何加入/中止一组动态创建的线程？

> ID：10831118
> 
> 赞同：1
> 
> 时间：2012-05-31T09:43:18.150
> 
> 标签：c#, multithreading, dynamic, threadabortexception

我在结束一组动态创建的线程时遇到了一些麻烦。我需要在任何给定点结束所有这些的原因是我可以刷新表单的某些部分并创建新的部分。这是一个简单的场景来展示我的线程中发生的事情。

许多线程是根据就地某些变量动态创建的：

```
 for (int i = 0; i <= mDevices.Count; i++)
        {
            ThreadStart workerThread = delegate { pollDevices(mDevices[i - 2], this); };
            new Thread(workerThread).Start();
        }

  public void pollDevices(IDeviceInterface device, DeviceManager mainUI)
    {
       System.Timers.Timer timer = null;
        if (timer == null)
        {

            timer = new System.Timers.Timer(1000);
            timer.Elapsed += delegate(object sender, ElapsedEventArgs e) { timerElapsed(sender, e, device, mainUI); };

        }
        timer.Enabled = true;

 public void timerElapsed(object sender, ElapsedEventArgs e, IDeviceInterface device, DeviceManager mainUI)
    {

         device.connect(device, this);
        //wait till thread finishes and destroy
         Thread.CurrentThread.Abort();
    } 
```

然后这些线程从计时器工作，并触发一个事件，该事件处理 UI 更新等。但是，当我尝试刷新 UI 时（例如，如果需要考虑数据库中的任何更多条目），如果线程仍在运行，则删除表单上的按钮（这些按钮已分配给线程）会出错，所以之前我呼吁刷新我需要以这种方式停止所有当前线程。

所以我的问题是，如何在刷新 UI 之前中止这组线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:20:50.053

你有几个问题。

*   您正在[关闭一个循环变量](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。
*   您创建一个线程的唯一目的是启动计时器......为什么不在主线程中启动计时器？
*   您的计时器实例未植根，因此在您完成之前它可能有资格进行垃圾收集。
*   `System.Timers.Timer`事件处理程序将在一个线程上执行（`ThreadPool`至少在这种情况下），因此尝试中止这些线程之一不会很好地结束。

这里有足够多的问题，在我们回答您的主要问题之前，您将进行一些重大的重组。还有一个提示……不要尝试从主 UI 线程以外的线程访问或操作任何 UI 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:55:43.320

你为什么在你的线程过程中使用计时器？

```
ManualResetEvent exit = new ManualResetEvent(false);
for (int i = 0; i <= mDevices.Count; i++)
    {
        ThreadStart workerThread = delegate { pollDevices(mDevices[i - 2], this, exit); };
        new Thread(workerThread).Start();
    }

public void pollDevices(IDeviceInterface device, DeviceManager mainUI, ManualResetEvent exit)
{
    while(!exit.WaitOne(1000))
    {
         // do work
         device.connect(device, this);
    }
} 
```

然后如果你想停止所有线程，只需调用 exit.Set()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:56:01.440

我在我的一个解决方案中使用它[http://msdn.microsoft.com/en-us/magazine/cc163644.aspx](http://msdn.microsoft.com/en-us/magazine/cc163644.aspx)

它是 AbortableThreadPool。可能对你有用。

也有点困惑为什么你在 timerElapsed 中调用 Thread.Abort 在一个已经完成的线程上

# sql-server - 如何保护 SQL Server 与 AppHarbor 的连接

> ID：10831120
> 
> 赞同：1
> 
> 时间：2012-05-31T09:43:20.963
> 
> 标签：sql-server, appharbor

我正在尝试将我的数据库安全地导出到 AppHarbor。数据库中的数据未加密。以下是我对转账安全性的一些担忧。

1.  如何加密传输？当我在 SSMS 中选中加密连接复选框后尝试连接到服务器时，它不允许我。“证书链是由不受信任的机构颁发的。”

2.  关于通过 Internet 传输数据的一般性问题。我担心窥探吗？它是如何完成的，威胁有多大？数据不是那么重要，但由于它包含其他人的信息，我更喜欢具有某种程度的安全性。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T07:01:02.700

我们目前不提供加密连接。如果您愿意，您可以在美国东部 AWS 位置获取一台机器，在那里安全地传输您的数据，然后将您的日期从 AWS 机器移动到您的 AppHarbor SQL Server。AWS 保证在 AWS 机器之间传输的数据保留在其网络上。

# matlab - 带有 bsxfun 的用于结束循环的 matlab 复合体

> ID：10831122
> 
> 赞同：2
> 
> 时间：2012-05-31T09:43:24.060
> 
> 标签：matlab, for-loop, bsxfun

我有一个`double`s 的 2092x252 矩阵，需要创建一个`for`使用`bsxfun`. 让我们只说这个例子`bsxfun(@minus)`。我需要循环完成的是`bsxfun(@minus)`使用每一列作为索引来运行。例如，将第 1 列指定为索引会得到`bsxfun(@minus)`与第 2:252 列的差异（使用 ）。然后将第 2 列设置为索引并获得与第 3:252 列的差异（再次使用`bsxfun(@minus)`）。循环必须继续运行直到`bsxfun(@minus, 251, 252)`。

输出将是一个变量而不是 251 个变量。总共将有 31626 个数据点。

另外，请您解释一下代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:56:41.213

我不确定这是否正是你想要的，因为它会产生 31626x2092 数据点，但既然你说要取列的差异......

```
data=ceil(rand(7,5)*10); % some sample data, works with any matrix(at least 2 columns of course)

N = size(data,2);

%b=cell(N-1,1);
c=NaN(size(data,1),N*(N-1)/2); % preallocate result matrix

kk=0;
for ii=1:N-1
    %b{ii} = bsxfun(@minus,data(:,ii),data(:,ii+1:end));
    c(:,kk+(1:N-ii)) = bsxfun(@minus,data(:,ii),data(:,ii+1:end));
    kk=kk+N-ii;
end 
```

这里的关键是，在每个循环步骤中，您只选择要对其执行`minus`操作的矩阵部分，即：`data(:,ii)`（= 第 ii 列）和`data(:,ii+1:end)`（= 从第 ii 到第矩阵的末尾）

bsxfun[函数](http://www.mathworks.nl/help/techdoc/ref/bsxfun.html)描述说：
*Apply-by-element binary operation to two arrays with singleton expansion enabled*

单例扩展是我在这里使用的，bsxfun 看到两个输入是一列和一个具有相同大小列的矩阵，并将列扩展为与矩阵相同的大小（=单例扩展（行维度得到扩展））

因此，如果您希望将行相互减去，您只需提供一行和与以前相同的矩阵，它也会知道该怎么做，即沿列维度扩展行向量：

```
N = size(data,1);

%b=cell(N-1,1);
c=NaN(N*(N-1)/2,size(data,2)); % preallocate result matrix

kk=0;
for ii=1:N-1
    %b{ii} = bsxfun(@minus,data(ii,:),data(ii+1:end,:));
    c(kk+(1:N-ii),:) = bsxfun(@minus,data(ii,:),data(ii+1:end,:));
    kk=kk+N-ii;
end 
```

如您所见，所有矩阵的索引交换了位置：`A(i,j)`更改为`A(j,i)`.

在循环的每个步骤中使用单元格作为结果矩阵可以更轻松地访问结果，但是由于您希望将结果放在一个变量中（我假设是矩阵），所以我将它们注释掉了。

## **编辑**

关于预分配：http: [//www.mathworks.nl/help/techdoc/matlab_prog/f8-784135.html](http://www.mathworks.nl/help/techdoc/matlab_prog/f8-784135.html)

```
c(:,kk+(1:N-ii));
kk=kk+N-ii 
```

是索引，这是最棘手的：
当 ii=1 时，您有 251 列要插入：输出变量中的列 1->251
ii=2 -> 250 列，输出中的列 252->501
ii=3 -> 249 列，输出中的列 502->750
ii=4 => 248 列，输出中的列 751->999
等。

`kk+(1:N-ii)`本质上是这样做的：为`bsxfun`.
该变量`kk`是已保存到输出变量中的列数`c`，因此显然它从零开始。如果将其更改为另一个值，例如`kk_init`， 的第一`kk_init`列`c`将保持为空，并且生成的`c`矩阵将具有`N*(N-1)/2+kk_init`列而不是`N*(N-1)/2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T01:16:59.727

为了避免跟踪索引，您可以计算结果并将其存储在一个单元格数组中，然后将所有单元格连接到一个矩阵中：

```
data = rand(2092,252);
C = arrayfun(@(k) bsxfun(@minus, data(:,k), data(:,k+1:end)), ...
        1:size(data,2)-1, 'UniformOutput',false);
C = horzcat(C{:}); 
```

结果矩阵：

```
>> whos C
  Name         Size                   Bytes  Class     Attributes

  C         2092x31626            529292736  double 
```

# java - Java 并发/网络方法

> ID：10831125
> 
> 赞同：1
> 
> 时间：2012-05-31T09:43:45.887
> 
> 标签：java, networking, concurrency

我正在开发一个独立的 java 应用程序，它通过网络从大约 1000 个测量设备收集数据并将数据保存到数据库中。由于设备输出和/或网络速度较慢，每个设备的数据收集可能需要几分钟时间。数据收集必须在某个时间窗口内进行，所以我需要并行工作。

我的方法是为每个测量设备创建一个线程，将数据放入队列中，并在队列的另一端有一个或多个其他线程转换并保存数据。

这是一种可行的方法吗？现代机器是否能够处理那么多线程和网络连接？这是多么可扩展，在什么时候我需要在多台机器上工作？

如果您能就您推荐的并发类（即哪种队列、ThreadPoolExecutor 等——我还没有使用 java.util.concurrent，书在邮件中）给我指点，我也将不胜感激。

有没有更好的方法？

**更新：**

感谢您到目前为止的回答，这里是你们中的一些人要求的更多信息。

我从设备收到的数据是小于 1kb 的文件形式。我有可能在一次传输期间获得类似 25.000 个文件，尽管通常要少得多。

数据转换不是 cpu 密集型的，基本上是解析文件并将其转换为 java 数据类型（文件包含 c 数据类型，如 unsigned char 和 unix 时间戳），加上 CRC 计算。我创建了一个对象，其中包含一个文件的内容，我使用 JPA 将其保存到数据库中（我想我也可以在这种情况下使用纯 JDBC）。测量文件中没有顺序，因为它们包含设备序列号和时间戳。

稍后，当满足某些条件时，我将不得不添加某种警报，但这也不应该是 CPU 密集型的。

从到目前为止的答案中，我收集到网络连接和线程数应该不是问题。

我唯一想知道的是关于队列的方法。另一种方法是让数据收集线程也调用 DAO 方法来保存文件。我想我无论如何都必须使 DAO 线程安全，但我认为一些线程也可以完成这项工作，因为大部分时间将用于传输网络数据。

我还将研究异步 I/O 和一些提供它的框架。

再次感谢，稍后我会选择一个答案，也许我会得到更多的输入:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:50:11.343

对于现代操作系统和硬件，处理 1000 多个更改线程和网络连接应该不是问题。真正的问题是您收集了多少数据，以及转换的复杂程度——这可能会决定一台机器可以处理多少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:15:52.667

假设您在 64 位 Linux、Oracle jdk 上运行（在这样的平台上默认 threadstacksize 为 1Mb），使用默认设置，您最终将使用大约 1Gb 的内存用于线程堆栈。我认为对于 OpenJDK 来说是一样的。不计算 os 分配的缓冲区。. .

如果这对你的要求来说太多了，你可能想看看[http://netty.io](http://netty.io)。该框架在后台使用 java nio（可以配置为使用 bio，顺便说一句）。这样，您只需要少数线程来执行实际的 io（对给定的 tcp 连接执行读/写操作）。然后应将您的业务逻辑（更新数据库，计算一些测量值）卸载到单独的线程池中。Netty 也包括对此的支持。

如果您想为每个连接（每个测量设备？）使用 1 个线程，那么让另一组线程执行实际业务工作可能没有任何好处。我假设每个设备一个线程，因为您说设备可能很慢和/或网络可能很慢。如果您使用多个线程，则不会消除两个瓶颈（网络和设备）（可以预期相反）。

一般并发类：java.util.concurrent.* 是的，都竖起大拇指

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:15:40.647

IMO，您应该考虑使用异步 IO 从设备收集数据。一旦您从套接字读取了某些内容，将其发布到队列（并发或其他方式），并有一个线程池从该队列中读取项目。

唯一的复杂性是以设备的自然顺序维护数据，也许您可​​以为每个设备设置一个队列，并将某种令牌发布到线程池连接到的队列中，以指示哪个设备已准备好进行处理。然后一个线程将处理设备的队列并做必要的工作，如果它需要更多的数据，它不必从设备队列中消费，它可以把它留在那里，直到所有的数据都到达。

# c# - C# 在 Android 中的活动之间发送复杂数据

> ID：10831128
> 
> 赞同：0
> 
> 时间：2012-05-31T09:44:01.913
> 
> 标签：c#, android, object, serialization

我正在使用 Visual Studio 2010 C# 语言并尝试将一个对象从一个 Android Activity 发送到另一个，我未能通过全局配置将该对象存储在某个全局位置，并且也未能使用序列化方法

某些方法和函数无法识别并给我：找不到类型或命名空间名称“扩展”（您是否缺少 using 指令或程序集引用？）

我在关注这些文章

[全局变量扩展应用程序类](https://stackoverflow.com/questions/10059733/global-variable-extend-application-class) [如何使用 Intents 将对象从一个 Android Activity 发送到另一个？](https://stackoverflow.com/questions/2139134/how-to-send-an-object-from-one-android-activity-to-another-using-intents) [http://savagelook.com/blog/android/android-extending-application-to-handle-global-configuration](http://savagelook.com/blog/android/android-extending-application-to-handle-global-configuration)

如果有人有其他解决方案，请向我提供 C# 中的演示源代码或教程，用于 2 种方法：序列化和使用全局位置，以实现我的目标并使用 Adnroid c# 语言将对象从一个活动发送到另一个活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:50:07.080

.Net 中没有“扩展”。.Net 对 Java“扩展”的对应物是“：”。

例如（伪 Java）

```
class A extends B 
```

将是（伪 C# 作为 .Net）

```
class A : B 
```

# http - 嵌入式 HTTPS 服务器。应该如何处理重定向，我应该提供 HTTP 吗？

> ID：10831132
> 
> 赞同：2
> 
> 时间：2012-05-31T09:44:13.247
> 
> 标签：http, redirect, https, webserver, rfc2616

**背景**

我已经实现了一个 HTTPS 服务器，它位于一个硬件内部，用于设备的安全远程配置。为了实现这一点，我使用了现有的轻量级嵌入式 TCP/IP 堆栈以及开源 SSL 库。位于其之上的 Web 服务器完全由我从头开始编写。（这可能看起来像是对轮子的重新发明，但就我们的目的而言，它需要非常轻量级并且具有非常狭窄的特定功能集。例如，与我们正在使用的嵌入式 RTOS 以及 ROM“文件系统”的兼容性。这是一个只有几百 KB 可用于 HTTP(S) 会话和 SSL 上下文的系统，而不是多少兆字节。在考虑了所有因素并查看了各种其他产品之后，创建我自己的产品是有意义的）。该 Web 服务器只需要支持 5 到 10 个同时套接字连接（即 5 到 10 个并发或持久 HTTP 连接），这大约是硬件可以处理的数量。这很好，因为它是专为一两个人访问和管理盒子而设计的。

目前，它现在一切正常。我已经对其进行了编码，以实现我认为 HTTP 1.1 所必需的尽可能多的 RFC2616。目前，它只是监听五个 HTTPS 端口（443），我还没有实现任何从端口 80 重定向的东西。

**第一个问题 - 重定向**

我看过无数关于从 HTTP 重定向到 HTTPS 的文章，但我读到的所有内容都涉及如何配置现有的和传统的 Web 服务器来执行此操作。我想要解决的是在协议级别使用了哪些技术，因为我必须以编程方式实现这一点。

常见的方法似乎是发出 301 / 302 响应。所以，我想到的策略是，假设我有八个同时请求的资源：

*   在端口 443 上侦听 HTTPS 连接。最多可同时使用六个 HTTPS 连接（六个套接字）。

*   在端口 80 上侦听 HTTP 连接，最多有两个 HTTP 连接（因此端口 80 上有两个套接字）可用。对于端口 80 上的套接字，不会真正访问真正的 Web 服务器。相反，我会一直从套接字读取，直到看到`\r\n\r\n`或`\n\n`看到（指示请求标头结束），然后发回 301（或 302）响应，在我的代码中它几乎是一个硬编码`const char*`字符串。然后，关闭套接字。这两个端口 80 套接字的存在纯粹是为了重定向。

这个策略听起来合理吗？

目前我唯一不确定的是在 301 / 302 响应中包含重定向 URL。这个硬件“盒子”是一个可以放在房子里或路由器后面某处的设备，可能通过动态 DNS 服务等访问。那么，我将如何以编程方式确定它的“外部世界”等效 HTTPS URL？也许通过结合使用请求 URI 中的内容和`host:`原始 HTTP 请求标头的字段？

如果上面有任何问题，那么我的下一个最佳想法是返回一小段 HTML，其中包含一些 JavaScript，通过从浏览器获取 URL 来执行 HTTPS 重定向（特别是我会使用哪些 JavaScript 方法打电话来做这件事我不记得了，但我已经做了很久了）。（目前我还不确定 SSL 证书到底是如何工作的，因为没有可以指定的特定域，但我稍后会越过那座桥，也许在一个单独的 SO 问题中。）

**第二个问题 - 提供 HTTP 和 HTTPS**

这可能更像是一个设计问题，或者取决于客户想要什么，而不是一个编程问题——但我想我还是把它放在这里看看人们有什么意见。我的问题是客户只是简单地声明盒子“应该有 SSL”，但仅此而已。例如，我不知道他们是否期望能够为最终用户提供是否使用 SSL 的选择。现在在真正问他们之前，我只是在预测*可能*会被问到什么，我想事先用一些知识和答案武装自己。换句话说，写规范的人为这个“只想看挂锁”和“想要SSL”，这显然是件*好事*；

首先，我知道 SSL 没有半途而废的解决方案：你要么需要全部，要么什么都没有。换句话说，假设我决定尝试通过 HTTPS 提供重要的东西来减少我的小处理器必须做的工作，但我通过 HTTP 提供图像和 CSS 文件。在做了一些阅读之后，我现在确切地知道为什么这是一个绝对的禁忌，原因有很多。

但是，如果我让最终用户能够在某个初始登录页面选择 HTTPS 或 HTTP 会怎样？选择“HTTPS”将重定向到安全的 HTTPS 登录页面。例如，如果用户在从手机访问盒子时为了提高访问速度而选择牺牲安全性，这可能是一个有用的选项。此初始页面可能提供“安全登录”和“标准不安全登录 - 不建议”或类似内容。显然，就用户而言，这会带来一个漏洞，但它是否也会危及 SSL 连接？我的意思是，由于这个初始登录页面必须通过 HTTP 提供服务，因此理论上攻击者可能会破坏它，以便交换按钮——诸如此类。因此，HTTPS应该意味着HTTPS*从一开始就对*吗？鉴于我已经设法将 HTTPS 硬塞到这个东西中并使它工作，并且考虑到它是专门为与现代浏览器（IE8/9，FF）一起使用而设计的，那么正常的 HTTP 访问应该是什么实际的原因呢？作为替代方案提供？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:50:06.890

关于问题 1：我认为这两种技术都是合理的，商业网站经常使用，但是如果服务器端的空间真的如此有限，那么读取主机头并返回 301 绝对是更可取的。

关于问题 2，提供这两种协议的一个可能反对意见是，一些中间人攻击会在会话期间从客户端的角度将 https 请求/响应通信重新路由到 http。大多数浏览器通过警告消息防止会话中的重新路由，但如果攻击者提前知道目标站点，他可能能够欺骗用户，特别是如果用户期望站点可以在任何一种模式下运行。为此（可能还有很多我不知道的更好的原因），限制使用 https 可能是有意义的，因为无论如何您已经完成了这项工作。

# azure - Azure Web 角色和出站 url 重写导致 500 错误

> ID：10831134
> 
> 赞同：0
> 
> 时间：2012-05-31T09:44:19.627
> 
> 标签：azure, asp.net-mvc-4, cdn, url-rewrite-module

我目前正在将（工作）网站迁移到 Windows Azure 云，但遇到 UrlRewrite 模块问题。问题是出站规则导致内部服务器错误 - 如果我禁用规则，站点将正确加载。

我检查了 Azure 服务器上模块的顺序，它与我的本地计算机和托管服务器完全相同。我在 web.config 中使用以下行禁用了静态压缩：

```
<urlCompression doStaticCompression="false" doDynamicCompression="true" dynamicCompressionBeforeCache="false" /> 
```

以下是导致问题的重写规则示例：

```
<rule name="cdn rewrite" preCondition="text only">
   <match filterByTags="Img" pattern="^/Images/(.*)$" />
   <action type="Rewrite" value="http://cdn.website.com/{R:0}" />
</rule> 
```

我还定义了以下前提条件：

```
<preCondition name="text only">
   <add input="{RESPONSE_CONTENT_TYPE}" pattern="^text/.+$" />
</preCondition> 
```

不知道它是否相关，但该站点是在内部运行的 MVC4 和超小的 2008r2 实例（osFamily="2"）。

我目前有一个使用应用程序请求路由的解决方法，但我宁愿重写 URL，因为我们不打算将 Azure CDN 用于生产站点。

有人设法让这个在 Azure 上工作吗？

编辑 - 更多信息：

实际错误（在萤火虫中报告）说“NetworkError：500 URL Rewrite Module Error. - [http://website.cloudapp.net/](http://website.cloudapp.net/) ”

事件查看器或与此问题相关的实际日志文件中的日志中没有任何内容。

实际上在输入时修复了它 - 见下文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:31:55.517

正如 astaykov 所指出的，有一个注册表项也需要修改才能正常工作。

我会在这里添加它以供后代使用，但我想它已经在这里了：

```
reg add HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\InetStp\Rewrite /v LogRewrittenUrlEnabled /t REG_DWORD /d 0 
```

在更改生效之前，您必须发出 iisreset 命令或重新启动服务器。

原帖：

[http://forums.iis.net/p/1165899/1937454.aspx#1937454](http://forums.iis.net/p/1165899/1937454.aspx#1937454)

# c# - 一份报告中的日期仅在一台电脑上以 Hijri（日历的阿拉伯语系统）显示

> ID：10831140
> 
> 赞同：0
> 
> 时间：2012-05-31T09:44:31.470
> 
> 标签：c#, sql-server, rdlc, gregorian-calendar

使用 rdlc、SQL Server 和 C#，只有一个报告中的日期以回历显示（其他报告以公历显示），仅在网络中的 PC 上，而对于其他 PC，所有报告都以公历显示，

我试图卸载软件并重新安装，删除注册表值，

我不知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:52:45.140

猜测...

*   该报告的“语言”属性设置为“User.Language”
*   该 PC 上的浏览​​器/用户设置为阿拉伯语

如果报表属性保留为默认值，它将使用 SSRS 服务器设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:34:49.090

我认为以下链接将对您有所帮助：-

[SSRS 的多语言或全球部署](http://msdn.microsoft.com/en-us/library/ms156493%28v=sql.105%29.aspx)

# sharepoint - 条件格式，引用来自 14 hive 的图像

> ID：10831144
> 
> 赞同：0
> 
> 时间：2012-05-31T09:44:42.963
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

我在列上放置了条件格式，但它不允许我从 14Hive 中选择图像，只能从站点内的某个位置选择图像。

我曾尝试将 ~/layouts/ 等放在 baground 图像属性中，但无济于事！

想知道是否有人对此有解决方案。是的，我可以将图像放在站点中，但为什么要复制图像，因为它已经在 14 个蜂巢中！

干杯特鲁兹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:42:09.967

尝试使用以正斜杠开头的相对 URL，例如 /_layouts/images/image1.gif。图片文件夹没有权限，因此您可以从任何具有此 URL 的站点访问它。

# java - 从另一个获得一个新的旋转图像图标？

> ID：10831150
> 
> 赞同：0
> 
> 时间：2012-05-31T09:45:20.020
> 
> 标签：java, swing, graphics, imageicon

我的问题很简单：

我有一个 ImageIcon，我想获得另一个精确旋转 * 90° 次的图像图标。这是方法：

```
private ImageIcon setRotation(ImageIcon icon, int rotation); 
```

我宁愿不必使用外部类。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:34:14.017

# 从 ImageIcon 获取 BufferedImage

对图像的所有转换通常都对[BufferedImage](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)进行。[您可以从ImageIcon](http://docs.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html)获取 Image ，然后将其转换为 BufferedImage：

```
Image image = icon.getImage();
BufferedImage bi = new BufferedImage(
    image.getWidth(null), image.getHeight(null), BufferedImage.TYPE_INT_RGB);
Graphics bg = bi.getGraphics();
bg.drawImage(im, 0, 0, null);
bg.dispose(); 
```

# 旋转

然后您可以使用以下代码将其旋转 -90 到 90 度：

```
public BufferedImage rotate(BufferedImage bi, float angle) {
    AffineTransform at = new AffineTransform();
    at.rotate(Math.toRadians(angle), bi.getWidth() / 2.0, bi.getHeight() / 2.0);
    at.preConcatenate(findTranslation(at, bi, angle));

    BufferedImageOp op = 
        new AffineTransformOp(at, AffineTransformOp.TYPE_NEAREST_NEIGHBOR);
    return op.filter(bi, null);
}

private AffineTransform findTranslation(
                        AffineTransform at, BufferedImage bi, float angle) {
    Point2D p2din = null, p2dout = null;

    if (angle > 0 && angle <= 90) {
        p2din = new Point2D.Double(0, 0);
    } else if (angle < 0 && angle >= -90) {
        p2din = new Point2D.Double(bi.getWidth(), 0);
    }
    p2dout = at.transform(p2din, null);
    double ytrans = p2dout.getY();

    if (angle > 0 && angle <= 90) {
        p2din = new Point2D.Double(0, bi.getHeight());
    } else if (angle < 0 && angle >= -90) {
        p2din = new Point2D.Double(0, 0);
    }
    p2dout = at.transform(p2din, null);
    double xtrans = p2dout.getX();

    AffineTransform tat = new AffineTransform();
    tat.translate(-xtrans, -ytrans);
    return tat;
} 
```

这适用于从 -90 到 90 度的出色旋转图像，它不支持更多。您可以浏览[AffineTransform](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/AffineTransform.html)文档以获取有关使用坐标的更多说明。

# 将 BufferedImage 设置为 ImageIcon

最后，您使用转换后的 Image: 填充 ImageIcon `icon.setImage((Image) bi);`。

# android - 如何在android SQLite数据库中存储和检索图像并将它们显示在gridview上

> ID：10831151
> 
> 赞同：12
> 
> 时间：2012-05-31T09:45:23.467
> 
> 标签：android

我是安卓新手。我创建了一个包含 itemName、Price 和 image 的表。我正在尝试检索图像和名称字段并将它们显示在网格视图上

这是我的创建数据库语句：

```
 DBAdapter class onCreate()
 db.execSQL("CREATE TABLE "+ITEMS_TABLE+" ( "+ COLUMN_ITEM_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + COLUMN_ITEM_NAME +" TEXT, "+ COLUMN_ITEM_SPECS +" TEXT, " + COLUMN_ITEM_PRICE +
" NUMBER, " + COLUMN_ITEM_IMAGE + " BLOB, " + COLUMN_ITEM_QTY +" NUMBER)");

void AddItems(ItemsPojo itemsObj) 

{ 
     Log.i("in here", "item fields");           
     SQLiteDatabase db= DBHelper.getWritableDatabase(); 

    if (db==null) 
    { 
        Log.i("nulll", "mnllllsg"); 
    } 
    ContentValues cv=new ContentValues(); 
    cv.put(COLUMN_ITEM_NAME, itemsObj.getItemName()); 
    cv.put(COLUMN_ITEM_SPECS, itemsObj.getItemSpecs());
    cv.put(COLUMN_ITEM_PRICE, itemsObj.getItemPrice());
    cv.put(COLUMN_ITEM_QTY, itemsObj.getItemQty());
    cv.put(COLUMN_ITEM_IMAGE, itemsObj.getItemImg()); 

 long affectedColumnId = db.insert(ITEMS_TABLE, null, cv);
    db.close(); 

} 

public Bitmap  getAllImages() 
 { 
     SQLiteDatabase db=DBHelper.getWritableDatabase(); 

  //Cursor cur= db.rawQuery("Select "+colID+" as _id , "+colName+", "+colAge+" from "+employeeTable, new String [] {}); 
     Cursor cur= db.rawQuery("SELECT * FROM "+ITEMS_TABLE,null); 
     //if(cur.getCount() > 0){
         //Cursor c = mDb.query(" ... "); 
         cur.moveToFirst(); 

 ByteArrayInputStream inputStream = new ByteArrayInputStream(cur.getBlob(cur.getColumnIndex(COLUMN_ITEM_IMAGE))); 
         Bitmap b = BitmapFactory.decodeStream(inputStream); 
    // }
 return b;
 } 
```

在我的 Main Oncreate 中，我像这样填充我的数据库：

```
Bitmap image = BitmapFactory.decodeResource(getResources(), R.drawable.red_bn);       
        ByteArrayOutputStream out = new ByteArrayOutputStream();      
        image.compress(Bitmap.CompressFormat.PNG, 100, out); 

        byte[] b = out.toByteArray();   
        String name; 
        name="QUEEN_BED1"; 
        String specs = "blaBlaBla";
        double price = 5420;
        int qty = 10;
        ItemsPojo itemsObj = new ItemsPojo(name,specs,price,b,qty); 

    db.AddItems(itemsObj); 
```

我现在卡住了，请谁能帮我检索这张图片并将其显示在网格视图上？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T20:31:12.717

最有效（顺便说一句，最直接的方法）是将图像的字节数组保存在本地数据库中。为此，您只需要在数据库中使用 TEXT 数据类型。像这样：

```
CREATE TABLE IF NOT EXISTS Your_table ( id INTEGER PRIMARY KEY NOT NULL UNIQUE, someOtherField TEXT, pictureData TEXT); 
```

有一种无缝的方法可以避免处理转换：只需在您的 setter 和 getter 中转换为 Bitmap 并返回 bytearray，这样您就不需要在整个开发周期中关心它。让我们举个例子。假设你有一个对象用户，它存储在你的 localDB 中，你有一个头像。

```
public class User {

    private String email;
    private String name;
    private Drawable pictureDataDrawable;

    public User() {}

    public void setPictureData(byte[] pictureData) {
        pictureDataDrawable = ImageUtils.byteToDrawable(pictureData);
    }

    public byte[] getPictureData(){
        return ImageUtils.drawableToByteArray(pictureDataDrawable);
    }

} 
```

无论您在哪里从数据库中检索数据，添加类似的内容就足够了：

```
user.setPictureData(cursor.getBlob(cursor.getColumnIndexOrThrow(DB_PICTURE_DATA_KEY))); 
```

对于相反的方式（将drawable写入DB）：

```
ContentValues c = new ContentValues();
c.put(DB_PICTURE_DATA_KEY, user.getPictureData());
... 
```

最后，您的 ImageUtils 中有两个简单的方法可以来回转换：

```
public static byte[] drawableToByteArray(Drawable d) {

    if (d != null) {
        Bitmap imageBitmap = ((BitmapDrawable) d).getBitmap();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        imageBitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
        byte[] byteData = baos.toByteArray();

        return byteData;
    } else
        return null;

}

public static Drawable byteToDrawable(byte[] data) {

    if (data == null)
        return null;
    else
        return new BitmapDrawable(BitmapFactory.decodeByteArray(data, 0, data.length));
} 
```

你可以走了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:40:47.900

这取决于您要如何存储图像，因为您存储为字节数组，这里是如何检索它

```
 public Cursor fetchAll() {
            return databaseHelper.query(ITEMS_TABLE, new String[] { COLUMN_ITEM_ID,   COLUMN_ITEM_NAME, COLUMN_ITEM_SPECS,COLUMN_ITEM_PRICE, COLUMN_ITEM_IMAGE,COLUMN_ITEM_QTY},null, null, null, null, null);
        }
/*    this method will give you a cursor with all the records of your database table now you need to parse these records on to objects*/

private List<ItemsPojo> parse(Cursor cursor) {
     List<ItemsPojo> toReturn = null;
     toReturn = new ArrayList<SignImage>();
     ItemsPojo obj;
     if (cursor.moveToFirst()) {
          while (cursor.isAfterLast() == false) {
               obj = new ItemsPojo();
               obj.setId(cursor.getInt(0));
               obj.setItemName(cursor.getString(1));
               obj.setItemSpecs(cursor.getString(2));
               obj.setItemPrice(cursor.getDouble(3));
               obj.setItemImg(cursor.getBlob(4));
               obj.setItemQuantity(cursor.getInt(5));
               toReturn.add(obj);
               cursor.moveToNext();
               }
     }return toReturn;
} 
```

现在您的数据库中有一个包含所有记录的列表，现在您需要做的是创建一个 ListActivity 并在其上显示您的所有对象，如果您不知道如何执行此操作，请在此处发表您的评论或者如果您有任何疑问关于上述程序

# asp.net-mvc-3 - ASP .NET MVC 3 路由实现“即将推出”页面功能，隐藏某些区域和控制器

> ID：10831154
> 
> 赞同：1
> 
> 时间：2012-05-31T09:45:35.673
> 
> 标签：asp.net-mvc-3, routing, routes, url-routing, asp.net-mvc-routing

我没有实施的页面处于“即将推出”阶段。除信息部分外，某些元素尚不可用。我需要通过定义“ComingSoon”路由来导航到“ClientPanel”区域和 Account 控制器。

```
routes.MapRoute(
            "ComingSoon",
            "General/Home/ComingSoon"); 
```

我使用的默认路由是：

```
routes.MapRoute(
            "Default",
            "{area}/{controller}/{action}/{id}/{*catchall}",
            new { area = "General", controller = "Home", action = "Index", id = UrlParameter.Optional },
            new[] { "WebAccess.Areas.General.Controllers" }).DataTokens.Add("area", "General"); 
```

我需要两条路线通往“即将推出”页面：

```
"General/Account/{action}/{id}/{*catchall}" 
```

和

```
"ClientPanel/{controller}/{action}/{id}" 
```

我怎样才能做到这一点？

我需要指出我曾尝试使用 Route Magic 来做：

```
routes.Redirect(r => r.MapRoute("ClientPanel", "ClientPanel/{controller}/{action}/{id}")).To(comingSoon); 
```

但即使 Glimpse 告诉我 ClientPanel 路由已正确匹配，页面仍会转到 ClientPanel 区域。

# c - 在c中嵌入python时，什么会导致这个错误（“ImportError：No module name site”）？

> ID：10831159
> 
> 赞同：1
> 
> 时间：2012-05-31T09:46:09.247
> 
> 标签：c, python-embedding

我尝试运行[这个简单教程](http://www.codeproject.com/Articles/11805/Embedding-Python-in-C-C-Part-I)的第一个示例，以了解如何在 c 应用程序中嵌入 python，但它描述了 Windows 中的所有内容，并且我在 Ubuntu Linux 中工作。

在第一次尝试中，我遇到了分段错误并在 Py_Initialize() 之前添加了两行来克服这个错误：

```
char pySearchPath[] = ".:myhome";
Py_SetPythonHome(pySearchPath); 
```

现在，当它想要 Py_Initialize() 时出现此错误：“ImportError: No module named site”。

我找到了一些这样的解决方案[，](https://stackoverflow.com/questions/8232708/embedding-python-error-on-initialization)但它们不适合我吗？我能做些什么来解决这个问题？我也是 Python 的菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T14:32:20.867

1) 为什么不使用专门针对 Linux 的教程？您参考的文章中有[一个链接](http://www.linuxjournal.com/article/3641)。

2) 你确定你了解[Py_SetPythonHome 的](http://docs.python.org/2/c-api/init.html#Py_SetPythonHome)实际作用吗？它告诉 Python 标准 Python 库在哪里。您似乎不太可能将这些存储在“.:myhome”（如您所写）或“/home/xxx”中。如果您确实在那里有标准的 Python 库，请编辑您的问题并发布有关您的设置和实际代码的更多信息。

# iphone - pushViewController 导致黑屏

> ID：10831168
> 
> 赞同：1
> 
> 时间：2012-05-31T09:46:46.973
> 
> 标签：iphone, ios, pushviewcontroller

我有一个 iOS 项目（不使用 Storyboards），它有 2 个 UITextField 和 1 个按钮（一个登录屏幕）。当用户单击该按钮时，它会向服务器发起一个 POST，如果用户在数据库中，则返回“1”。然后，转到另一个屏幕。

问题是，屏幕显示为黑色。这是我的代码：

在 requestFinished 方法中：

```
if([responseString2 isEqualToString:(@"1")]){
termsViewController *termscreen=[[termsViewController alloc]init];
    [[self navigationController] pushViewController:termscreen animated:YES];
} 
```

在委托类中，在方法 initDddidFinishLaunchingWithOptions 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.viewController = [[firstViewController alloc] initWithNibName:@"firstViewController" bundle:nil];
self.window.rootViewController = self.viewController;
//
UINavigationController *navcontroller= [[UINavigationController alloc]initWithRootViewController:self.viewController];
[[self window]setRootViewController:navcontroller];
[self.window makeKeyAndVisible];    
return YES;

} 
```

它转到另一个屏幕，显示导航栏......但屏幕是黑色的。我是 iphone 开发的新手，所以可能会遗漏一些东西。

谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:55:21.243

我猜你没有用它分配 nib 文件。试试这个：

```
termsViewController *termscreen=[[termsViewController alloc] initWithNibName:@"termsViewController" bundle:nil]; 
```

我假设您的视图控制器变量的名称是`termsViewController`，您可以根据需要进行更改。我希望这有帮助。快乐编码:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T00:53:14.203

我认为这是因为您的第二个视图控制器不在导航控制器内。当你创建一个导航控制器时，你必须向它添加一个对象数组，所以它知道要推送什么。

代码片段：

```
UINavigationController *navContr = [[UINavigationController alloc]init];
FirstViewController *firstViewContr = [[FirstViewController alloc] init];
MapViewController *mapContr = [[MapViewController alloc] init];
NSArray *vcArray = [NSArray arrayWithObjects: mapContr, firstViewContr, nil];
[navContr setViewControllers:vcArray];
[self.window setRootViewController:navContr];
[self.window makeKeyAndVisible];
return YES; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-31T09:57:29.990

可能是您没有实施（或删除）

```
- (void)loadView
{
    // If you create your views manually, you MUST override this method and use it to create your views.
    // If you use Interface Builder to create your views, then you must NOT override this method.
} 
```

# javascript - 如何使用 javascript 或 jQuery 在浏览器中拖放交叉标签？

> ID：10831169
> 
> 赞同：4
> 
> 时间：2012-05-31T09:46:58.553
> 
> 标签：javascript, jquery

它看起来像谷歌搜索图像不仅是图像，还有选定的文本，......给我一些简单的例子，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:52:31.120

转到[jQuery UI “Draggable + Sortable”](http://jqueryui.com/demos/draggable/)并观看“Draggable + Sortable”，这与您想要完成的事情非常接近

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:51:27.860

这是你需要的吗？
[http://jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)

# autocomplete - 构建一个像谷歌这样的自动完成工具

> ID：10831171
> 
> 赞同：1
> 
> 时间：2012-05-31T09:47:07.237
> 
> 标签：autocomplete

我们所有人都看到了 Google 的自动补全功能，并意识到它不仅仅是基于“前缀”的补全。

例如，当我写“生命宇宙和一切pdf”时，它会给出这样的建议：-

*   生命“宇宙”和一切.pdf
*   '道格拉斯亚当斯'生活'宇宙和一切.pdf
*   '生命的答案'宇宙和一切.pdf

我知道使用 Trie 或三元搜索树来解决前缀匹配问题和建议自动补全问题的一般方法（其中一些已在[此处](http://dhruvbird.blogspot.in/2010/09/very-fast-approach-to-search.html)解释），但任何人都可以了解 Google 可能如何提供以下建议不只是前缀匹配（而不仅仅是后缀匹配）

如果您建议他们使用大量拼写错误等数据，请解释如何使用。

# c# - 使用 GDI+ 绘制文本时是否可以定义精确的字体大小？

> ID：10831173
> 
> 赞同：7
> 
> 时间：2012-05-31T09:47:18.350
> 
> 标签：c#, windows, gdi+

我正在使用以下代码在位图上绘制文本：

```
using (Font font = new Font("Arial", 10.0f, FontStyle.Bold, GraphicsUnit.Point))
{
    //draw the text
    graphics.DrawString("Some text", font, Brushes.White, rect, stringFormat);
} 
```

它工作得很好。这是呈现的文本：

![在此处输入图像描述](../Images/4e1b85e19a707ca617b98b556879d9eb.png)

我想让文字更大一点。如果我将 11 设置为字体大小，这就是我得到的：

![在此处输入图像描述](../Images/1819a46e981a75773ef6e85945629a57.png)

它对我想要的来说太大了。我尝试了 10.25、10.5 等，但结果与 10 相同。

我也尝试设置`GraphicsUnit`为，`Pixel`但它的行为相同（无法设置自定义字体大小）。

这是我的问题：

**使用 GDI+ (C#) 绘制文本时，是否可以“微调”渲染文本的大小？**

* * *

编辑：更完整的代码片段（根据要求）：

```
using (Bitmap bitmap = new Bitmap(width, height))
using (Graphics graphics = Graphics.FromImage(bitmap))     
using (Font font = new Font("Arial", 10.0f, FontStyle.Bold, GraphicsUnit.Point))
{
   graphics.SmoothingMode = SmoothingMode.AntiAlias;
   graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;

   Rectangle rect = new Rectangle(0, 0, width, height);

   //method 1
   StringFormat stringFormat = new StringFormat();
   stringFormat.Alignment = StringAlignment.Center;
   stringFormat.LineAlignment = StringAlignment.Center;
   graphics.DrawString("Some text", font, Brushes.White, rect, stringFormat);

   //method 2
   TextFormatFlags flags = TextFormatFlags.HorizontalCenter |
       TextFormatFlags.VerticalCenter | TextFormatFlags.WordBreak;       
   TextRenderer.DrawText(graphics, "Some text", font, rect, Color.White, flags);

   bitmap.Save(stream, ImageFormat.Png);          
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:26:05.767

Graphics.DrawString() 存在严重且无法解决的精度问题，仅适用于打印机等高分辨率设备。

请改用 .NET 2.0 TextRenderer.DrawText() 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T16:54:09.507

我不知道 C# 或 .Net 库，但是，查看[这个页面](http://msdn.microsoft.com/en-us/library/ssazt6bs.aspx)，似乎选择`AntiAlias`for`TextRenderingHint`应该关闭提示并打开抗锯齿。这会给你更多的中间尺寸，但可能是更模糊的文本。

问题是字体提示。当字体的细节（如衬线的笔划宽度或大小）与目标设备的分辨率处于同一顺序时，简单地将设计单位缩放到设备单位可能会导致不平衡、不均匀的文本，尤其是在没有任何抗锯齿的情况下种类。

为了避免这种情况，大多数字体都有“提示”，当分辨率有限时，这些提示给出了四舍五入的特殊规则。效果是您在尺寸上看到“台阶”。

如果你想避免这些步骤，你必须关闭“提示”。这将导致光栅化器忽略特殊的四舍五入规则，而只是将设计单位直接缩放到设备单位。这使您可以拥有真正线性缩放的文本。权衡是文本在小尺寸下可能看起来不太好。抗锯齿可以改善对称性，但对许多人来说，文本可能看起来很模糊。

# javascript - 查找具有特定字符串的 id

> ID：10831174
> 
> 赞同：0
> 
> 时间：2012-05-31T09:47:30.403
> 
> 标签：javascript, jquery

我正在尝试学习 JavaScript，并且想将我正在研究的内容更改为纯 JavaScript 解决方案。如何将其更改为 JavaScript：

```
var hrefs = $("a[id^=a_l_]").map(function() {
  return this.href;
}).get(); 
```

它基本上找到所有包含“a_l_”的id并将其放入一个数组中。

这是我尝试过的

```
var matches = [];
var elems = document.getElementsByTagName("a");
for (var i=0; i<elems.length; i++) {
  if (elems[i].id.indexOf("a_l_") == 0)
  matches.push(elems[i]);
  console.log(matches);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:58:10.567

始终使用括号`{}`表示条件！否则迟早你会犯错！

```
for (var i=0; i<elems.length; i++) {
    if (elems[i].id.indexOf("a_l_") == 0) { // <-- {
        matches.push(elems[i]);
        console.log(matches);
    }                                       // <-- }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:05:10.940

你可以先做一个过滤器，然后做一个地图。

```
var hrefs = Array.prototype.filter.call(document.getElementsByTagName("a"), function(node) { 
  return node.id.indexOf("a_l_") === 0;
}).map(function(node) {
  return node.href;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:10:16.103

您正在尝试查找 id 等于“a_l_”的所有元素并将它们添加到数组中。我建议您的 html 元素不应使用相同的 id。你应该让他们上课。无论如何，试试这个：

```
var matches = [];
var elems = document.getElementsByTagName("a");
for(var i=0; i<elems.length; i++) {
  if(elems[i].id.indexOf("a_l_") != -1) {
    matches.push(elems[i]);
    console.log(matches);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:13:01.177

假设 ES5 数组方法（如果不存在则使用 shim / polyfill）

```
var hrefs = [].filter.call(document.getElementsByTagName('a'), function(el) {
    return el.id.indexOf('a_l_') === 0;
}).map(function(el) {
    return el.href;
}); 
```

[在http://jsfiddle.net/alnitak/Zu3dJ/](http://jsfiddle.net/alnitak/Zu3dJ/)工作演示

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T10:16:48.153

纯 Javascript 的替代解决方案，适用于现代浏览器（`IE8+`包括）

```
var elems = document.querySelectorAll("a[id^='a_l_']"); 
```

`elems`是一个以 开头的`<a>`元素的集合。Indeed速度较慢，但​​可读性大大提高`id``a_l_``querySelectorAll`

# linux-kernel - CFS 调度程序：如何知道哪个任务分配给了 sched_entity？

> ID：10831175
> 
> 赞同：1
> 
> 时间：2012-05-31T09:47:33.400
> 
> 标签：linux-kernel, scheduling, kernel

我在 sched_fair.c 里面，我想记录一些东西.. 但我需要知道哪个任务 (pid) 与我看到的每个 sched_entity 相关联.. 在我没有看到的 struct sched_entity 的定义中对父结构 (task_struct) 的任何引用

这是 sched_entity 的代码：

```
struct sched_entity {
    struct load_weight  load;       /* for load-balancing */
    struct rb_node      run_node;
    struct list_head    group_node;
    unsigned int        on_rq;

    u64         exec_start;
    u64         sum_exec_runtime;
    u64         vruntime;
    u64         prev_sum_exec_runtime;

    u64         nr_migrations;

#ifdef CONFIG_SCHEDSTATS
    struct sched_statistics statistics;
#endif

#ifdef CONFIG_FAIR_GROUP_SCHED
    struct sched_entity *parent;
    /* rq on which this entity is (to be) queued: */
    struct cfs_rq       *cfs_rq;
    /* rq "owned" by this entity/group: */
    struct cfs_rq       *my_q;
#endif
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:07:17.613

给定 sched_entity *se ：

struct task_struct *p = task_of(se);

给你包含任务结构..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-24T07:52:43.370

```
 /* include/linux/kernel.h */
        #define container_of(ptr, type, member) ({              \
            void *__mptr = (void *)(ptr);                   \
            BUILD_BUG_ON_MSG(!__same_type(*(ptr), ((type *)0)->member) &&   \
                     !__same_type(*(ptr), void),            \
                     "pointer type mismatch in container_of()");    \
            ((type *)(__mptr - offsetof(type, member))); })

        /* kernel/sched/fair.c */
        static inline struct task_struct *task_of(struct sched_entity *se)
        {
            return container_of(se, struct task_struct, se);
        } 
```

方便但危险

# c++ - 如何使用函数初始化静态常量成员

> ID：10831181
> 
> 赞同：2
> 
> 时间：2012-05-31T09:48:06.640
> 
> 标签：c++, linux, static, constants

在一个非常简化的情况下，我有以下设置，我只是想从 A 类的函数初始化一个常量静态成员（类 foo）（单例和实例与这个问题无关）：

```
class A
{
public:

    static A instance;
    A & getInstance() { return instance; }
    int i(){ return 10;}
    int j(){ return 20;}
};

class foo {
public:

    static const int ii = A::getInstance().i() * A::getInstance().j(); 
};
const int foo::ii;

int main()
{
    foo f;
    return 1;
} 
```

目的是使用上述某些函数初始化成员 ii。但它会产生以下错误：

```
$ c++ static_constant.cpp 
static_constant.cpp:14:30: error: ‘A::getInstance()’ cannot appear in a constant-expression
static_constant.cpp:14:42: error: a function call cannot appear in a constant-expression
static_constant.cpp:14:44: error: ‘.’ cannot appear in a constant-expression
static_constant.cpp:14:46: error: a function call cannot appear in a constant-expression
static_constant.cpp:14:53: error: ‘A::getInstance()’ cannot appear in a constant-expression
static_constant.cpp:14:65: error: a function call cannot appear in a constant-expression
static_constant.cpp:14:67: error: ‘.’ cannot appear in a constant-expression
static_constant.cpp:14:69: error: a function call cannot appear in a constant-expression 
```

你能帮帮我吗？会欣赏它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:50:12.550

您正在使用`getInstance`作为静态函数，但它没有被声明`static`。

更改声明`getInstance`：

```
static A & getInstance() { return instance; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:52:07.593

代码有几个问题，但这里有一个完整的可编译示例：

```
class A
{
public:

    static A instance;
    static A & getInstance() { return instance; }
    int i(){ return 10;}
    int j(){ return 20;}
};

class foo {
public:

    static const int ii;
};
const int foo::ii = A::getInstance().i() * A::getInstance().j(); 
A A::instance; 
```

# java - java.io.FileNotFoundException：无法打开 ServletContext 资源 [/WEB-INF/final-servlet.xml]

> ID：10831185
> 
> 赞同：1
> 
> 时间：2012-05-31T09:48:16.943
> 
> 标签：java, eclipse, jakarta-ee, maven, spring-mvc

我正在创建简单的 Maven 项目插件。应用程序目录结构类似于标准的 maven 项目目录结构。

我在 src/main/java/resources 文件夹下放置了 application-context.xml 文件。

**问题 ：**

如何在 web.xml 文件中配置此路径？

我收到 java.io.FileNotFoundException：无法打开 ServletContext 资源`[/WEB-INF/final-servlet.xml]`错误

我必须在eclipse中配置我的项目属性吗？？？

任何人都可以指导我......？

提前谢谢..>！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:22:03.943

将 final-servlet.xml 放在 WEB-INF 文件夹下，它将起作用。您对 application-context.xml 的询问是这样的：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        WEB-INF/final-servlet.xml
        classpath:application-context.xml
    </param>
</context-param> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T21:58:50.347

/WEB-INF/final-servlet.xml - 在 DispatcherServlet 的上下文参数中

并将 final-servlet.xml 放在 your_web_app/WEB-INF 文件夹中。

应该管用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:17:36.837

资源目录中的文件部署到类路径，而不是`WEB-INF`. 如果您想要该文件，`WEB-INF`那么它需要在 中`src/webapp/WEB-INF`，就像在任何基于 Maven 的 Web 应用程序项目中一样。

否则 Spring 配置中引用的位置需要是类路径相关的。

# java - 在给定实例上覆盖 compareTo 方法的更简单方法

> ID：10831187
> 
> 赞同：0
> 
> 时间：2012-05-31T09:48:19.543
> 
> 标签：java, inheritance, overriding, anonymous

对我来说，一些外部函数给了我一个 java.io.File 实例，但我想即时更改该实例的 compareTo 的默认行为。最好的方法是什么？

我唯一能想到的就是将这个 File 实例包装成一个

```
public class FileWrapper extends File{   

    FileWrapper(File in){
        //Assign var to the global var      
    }

    @Overrides
    public compareTo(File in){ return whatever;}

} 
```

并让所有方法覆盖 File 的方法并将调用转发到通过构造函数传递的全局包装实例，但它非常难看......

也许我忘记了其他更简单的方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:54:42.713

您可能要使用该`compareTo`方法的唯一原因是对集合进行排序。

您始终可以创建 a`Comparator`并将其传递给`Collections.sort`调用。

```
Collections.sort(myList, new Comparator<File>() {
    public int compare(File file1, File file2) {
        // write your custom compare logic here.
    }
}); 
```

即使您使用诸如 的排序集合`TreeSet`，它也已经为您提供了一个重载的构造函数来传递`Comparator`.

```
/**
 * Constructs a new, empty tree set, sorted according to the specified
 * comparator.  All elements inserted into the set must be <i>mutually
 * comparable</i> by the specified comparator: {@code comparator.compare(e1,
 * e2)} must not throw a {@code ClassCastException} for any elements
 * {@code e1} and {@code e2} in the set.  If the user attempts to add
 * an element to the set that violates this constraint, the
 * {@code add} call will throw a {@code ClassCastException}.
 *
 * @param comparator the comparator that will be used to order this set.
 *        If {@code null}, the {@linkplain Comparable natural
 *        ordering} of the elements will be used.
 */
public TreeSet(Comparator<? super E> comparator) {
    this(new TreeMap<E,Object>(comparator));
} 
```

# forms - CakePHP：创建/更新记录（外键）

> ID：10831191
> 
> 赞同：0
> 
> 时间：2012-05-31T09:48:23.263
> 
> 标签：forms, cakephp, duplicates, record, cakephp-2.1

我是 CakePHP 的新手，希望有人能帮我解决这个问题。我一个人解决不了。

我有一个表“游戏”，包含以下列：

```
- id
- date 
```

第二个表“报告”，包含以下列：

```
- id
- report
- game_id (foreign key) 
```

游戏`hasOne`报告和报告`belongsTo`游戏。

我正在尝试构建一个向现有游戏添加报告的表单。每当我添加新报告时，它都会创建重复记录。我已经读过，如果 Cake 不知道 id，就会发生这种情况。当我调试时，id-field 是空的。

**这是我的目标：**如果还没有游戏的报告，则会出现一个添加链接，如果存在特定游戏的报告，则会出现更新链接。或者，根据是否有/没有，分别有一个指向添加或编辑报告的表单的链接。如何做到这一点？

我已经在`beforeSave()`-function 中阅读过，您可以指定何时创建和何时编辑记录。我不知道如何做到这一点。

目前我唯一的解决方案是验证表单并设置 game_id`isUnique`并通知用户已经有带有此 game_id 的报告。

非常感谢任何可以帮助我的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:34:59.913

你可以事先检查一下。

```
if ($this->Report->hasAny(array('game_id' => $this->data['Report']['game_id']))) {
  // update
  $existing = $this->Report->find('first', array(
    'conditions' => array(
      'game_id' => $this->data['Report']['game_id']
    )
  ));
  $this->Report->id = $existing['Report']['id'];
} else {
  $this->Report->create();
}
// save or update
$this->Report->save($this->data); 
```

# php - PHP 生成的内容 div 自动扩展以适应包装器 div 的宽度

> ID：10831192
> 
> 赞同：0
> 
> 时间：2012-05-31T09:48:30.017
> 
> 标签：php, html, css

我正在使用 PHP 生成包含文本的 div，这些文本适合固定宽度的包装 div

生成的 HTML

```
<div id="wrapper">
  <!-- PHP generated divs -->
  <div class="element">Home</div>
  <div class="element">Items</div>
  <div class="element">About</div>
  <div class="element">FAQ</div>
</div> 
```

CSS：

```
#wrapper {
  width: 600px;
  height: 100px;
  display: block;
}

.element {
  height: inherited;
} 
```

我想要完成的是让四个元素在包装器 div 的边界内拉伸，因此它们的宽度都相同，均为 150 像素。如果 PHP 生成 6 个 div，那么它们的宽度应该是 100px。我只是希望它们在包装内均匀分布。

整个问题源于未知数量的元素 div，因为它们是通过 php 生成的。它们的计数是可变的，所以我无法在 css 中预测这一点，这就是为什么我不能在元素 div 上放置固定宽度的原因。

有没有任何CSS解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:53:22.837

如果您使用 PHP 生成它，为什么不简单地为它们添加一个带有元素数量的特定类，并保留一个具有不同宽度的 CSS 类列表（跨浏览器需要）？

例如：

```
$menu = array('Home', 'Items', 'About', 'FAQ');
$count = count($menu);
foreach($menu as $item) {
    echo '<div class="element_'.$count.'">'.$item.'</div>';
} 
```

CSS

```
.element_4 { width: 150px; }
.element_6 { width: 100px; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:54:19.867

如果您可以仅支持 Internet Explorer 8 及更高版本（当然包括 Firefox、Chrome 和 Safari），我建议您使用`display: table`，`display: table-cell`就像我在这个小提琴中展示的那样 - [http://jsfiddle.net/Pharaon/ Dg4sz/](http://jsfiddle.net/Pharaon/Dg4sz/)

否则你将需要为旧的 IE搞乱`display: inline-block`和破解`zoom: 1`

# java - 使用 Apache Lucene 索引 MySQL 数据库，并使它们保持同步

> ID：10831195
> 
> 赞同：9
> 
> 时间：2012-05-31T09:48:43.477
> 
> 标签：java, mysql, lucene, synchronization, indexing

1.  在 MySQL 中添加新项目时，它也必须由 Lucene 索引。
2.  当从 MySQL 中删除现有项目时，它也必须从 Lucene 的索引中删除。

这个想法是编写一个脚本，通过调度程序（例如 CRON 任务）每 x 分钟调用一次。这是一种保持 MySQL 和 Lucene 同步的方法。到目前为止我所管理的：

1.  对于 MySQL 中每个新添加的项目，Lucene 也会对其进行索引。
2.  对于 MySQL 中每个已经添加的项目，Lucene 不会重新索引它（没有重复的项目）。

这就是我要求您帮助管理的重点：

1.  对于每个先前添加的项目，然后从 MySQL 中删除，Lucene 也应该取消索引它。

这是我使用的代码，它试图索引一个 MySQL 表`tag (id [PK] | name)`：

```
public static void main(String[] args) throws Exception {

    Class.forName("com.mysql.jdbc.Driver").newInstance();
    Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/mydb", "root", "");
    StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_36, analyzer);
    IndexWriter writer = new IndexWriter(FSDirectory.open(INDEX_DIR), config);

    String query = "SELECT id, name FROM tag";
    Statement statement = connection.createStatement();
    ResultSet result = statement.executeQuery(query);

    while (result.next()) {
        Document document = new Document();
        document.add(new Field("id", result.getString("id"), Field.Store.YES, Field.Index.NOT_ANALYZED));
        document.add(new Field("name", result.getString("name"), Field.Store.NO, Field.Index.ANALYZED));
        writer.updateDocument(new Term("id", result.getString("id")), document);
    }

    writer.close();

} 
```

PS：此代码仅用于测试目的，无需告诉我它有多糟糕 :)

**编辑：**

一种解决方案可能是删除任何预先添加的文档，并重新索引所有数据库：

```
writer.deleteAll();
while (result.next()) {
    Document document = new Document();
    document.add(new Field("id", result.getString("id"), Field.Store.YES, Field.Index.NOT_ANALYZED));
    document.add(new Field("name", result.getString("name"), Field.Store.NO, Field.Index.ANALYZED));
    writer.addDocument(document);
} 
```

我不确定这是最优化的解决方案，是吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T07:35:20.453

只要您让索引/重新索引与您的应用程序分开运行，您就会遇到同步问题。根据您的工作领域，这可能不是问题，但对于许多并发用户应用程序来说却是。

当我们有一个每隔几分钟运行异步索引的作业系统时，我们也遇到了同样的问题。用户会使用搜索引擎找到产品，然后即使管理员从有效产品堆栈中删除了产品，仍然会在前端找到它，直到下一个重新索引作业运行。这会导致向一级支持报告的非常混乱且很少可重现的错误。

我们看到了两种可能性：要么将业务逻辑紧密连接到搜索索引的更新，要么实现更紧密的异步更新任务。我们做了后者。

在后台，有一个类运行在 tomcat 应用程序内的专用线程中，它接受更新并并行运行它们。后台更新到前端的等待时间降至0.5-2秒，大大减少了一级支持的问题。而且，它尽可能地松散耦合，我们甚至可以实现不同的索引引擎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T07:25:47.583

看看 Solr DataImportScheduler 方法。
基本上，当 Web 应用程序启动时，它会生成一个单独的 Timer 线程，该线程会定期针对 Solr 触发 HTTP Post，然后使用您设置的 DataImportHandler 从 RDB（和其他数据源）中提取数据。

因此，由于您不使用 Solr，而仅使用 Lucene，因此您应该查看[DataImportHandler 源](http://svn.apache.org/viewvc/lucene/dev/trunk/solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/)以获得想法。

# sql-server-2005 - 从 SQL Server 2005 数据库中删除所有行

> ID：10831200
> 
> 赞同：1
> 
> 时间：2012-05-31T09:49:11.620
> 
> 标签：sql-server-2005

我想从 SQL Server 2005 数据库中删除所有行。

任何人都可以定义一个过程来轻松地从数据库中删除所有行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:43:16.157

在这种情况下，这将起作用：

```
EXEC sp_MSForEachTable 'ALTER TABLE ? NOCHECK CONSTRAINT ALL'
GO
EXEC sp_MSForEachTable 'DELETE FROM ?'
GO
EXEC sp_MSForEachTable 'ALTER TABLE ? CHECK CONSTRAINT ALL'
GO 
```

感谢你所做的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-20T21:03:38.777

使用这个命令：

```
 --Disable Constraints & Triggers
    EXEC sp_MSforeachtable 'ALTER TABLE ? NOCHECK CONSTRAINT ALL'
    EXEC sp_MSforeachtable 'ALTER TABLE ? DISABLE TRIGGER ALL'
    --Perform delete operation on all table for cleanup
    EXEC sp_MSforeachtable 'DELETE ?'
    --Enable Constraints & Triggers again
    EXEC sp_MSforeachtable 'ALTER TABLE ? CHECK CONSTRAINT ALL'
    EXEC sp_MSforeachtable 'ALTER TABLE ? ENABLE TRIGGER ALL'
    --Reset Identity on tables with identity column
    EXEC sp_MSforeachtable 'IF OBJECTPROPERTY(OBJECT_ID(''?''), ''TableHasIdentity'') = 1
    BEGIN DBCC CHECKIDENT (''?'',RESEED,0) END' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:59:21.893

也许这会有所帮助：

[http://vadivel.blogspot.se/2006/07/easyest-fastest-way-to-delete-all.html](http://vadivel.blogspot.se/2006/07/easiest-fastest-way-to-delete-all.html)

# selenium - 在 selenium IDE 上是否可以进行参数化？

> ID：10831205
> 
> 赞同：-1
> 
> 时间：2012-05-31T09:49:33.800
> 
> 标签：selenium, webdriver

是否可以在 selenium ide 中执行参数化，或者我们应该使用 Web 驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:45:50.670

您可以使用变量和`store`命令：[存储命令和 Selenium 变量](http://seleniumhq.org/docs/02_selenium_ide.html#store-commands-and-selenium-variables)。

但是，如果您尝试使用不同的数据对同一测试进行循环或多次迭代，那么您将需要改用 WebDriver。

或者，您可以将变量放在测试的顶部，然后复制粘贴 [原文如此] 测试并更改数据。如果您的测试需要更新，那将是一场维护噩梦。您还可以将部分测试存储在 javascript 文件中，以减少维护/重复。使用类似的格式`javascript {*yourCodeHere*}`- 请参阅[JavaScript 使用脚本参数](http://seleniumhq.org/docs/02_selenium_ide.html#javascript-usage-with-script-parameters)。

# ruby-on-rails - Pjax - 在 Pjax-Container 中打开 PDF 作为垃圾

> ID：10831206
> 
> 赞同：1
> 
> 时间：2012-05-31T09:49:34.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pjax

我已经让 Pjax 为我的网站加载了内部内容，但是对于 PDF，它失败了，并且似乎尝试读取容器中的内容，而不是强制它尝试其默认行为。导致这样的东西

> %PDF-1.4 %���� 74 0 obj <> endobj 外部参照 74...

[http://nti.mywellbeing.org/articles/prioritising-tools-and-techniques](http://nti.mywellbeing.org/articles/prioritising-tools-and-techniques)，然后单击“了解更多”按钮... [http://ogilvyeast.mywellbeing.org/ckeditor_assets/attachments/14/8C_johari_window.pdf](http://ogilvyeast.mywellbeing.org/ckeditor_assets/attachments/14/8C_johari_window.pdf)

如何使 pjax 失败/默认为标准行为？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:09:47.490

据我所知，您可能正在使用 pjax-rails gem。在这种情况下，只需`data-skip-pjax`在 PDF 链接上设置属性即可进行整页加载：

```
<a href="/ckeditor_assets/attachments/14/8C_johari_window.pdf" target="_blank" data-skip-pjax="true">Find out more...</a> 
```

或使用`link_to`：

```
link_to "Find out more...", whatever_path, :target => "_blank", :"data-skip-pjax" => true 
```

# python - 无法通过链接使用查找元素定位

> ID：10831207
> 
> 赞同：0
> 
> 时间：2012-05-31T09:49:36.077
> 
> 标签：python, unit-testing, testing, selenium, selenium-ide

测试中的新手。我使用 Selenium 生成了一个测试用例，然后将其导出为 Python 脚本。现在，当我尝试在终端中运行它时，出现以下错误：

```
raise exception_class(message, screen, stacktrace)
NoSuchElementException: Message: u'Unable to locate element: {"method":"link                                                                                               
text","selector":"delete"}' 
```

我正在使用 Selenium 生成的命令，即

```
driver.find_element_by_link_text("delete").click() 
```

我认为错误的原因是我的网页中的“删除”链接只有在我单击要删除的特定行时才能看到。所以我想它无法找到链接。请建议我可以使用什么替代措施来定位并单击“删除”链接。提前致谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:38:30.420

当 selenium 试图找到链接而您的应用程序尚未呈现它时，可能会发生这种情况。所以你需要让它等到链接出现：

```
browser.implicitly_wait(10) 
```

对我有帮助的答案就[在这里](https://stackoverflow.com/questions/6936149/selenium-python-find-element-by-link-text)。

# ms-access - Junit 测试失败返回 [Microsoft][Pilote ODBC Microsoft Access]

> ID：10831208
> 
> 赞同：0
> 
> 时间：2012-05-31T09:49:39.153
> 
> 标签：ms-access, junit, odbc

我正在为我的代码编写一组测试场景，目前我遇到了一个不是失败的失败。

让我解释。我正在测试将不正确的文件路径插入到类构造函数中的场景。

这应该会引发连接错误或找不到文件类型错误，但实际上会引发错误

```
[Microsoft][Pilote ODBC Microsoft Access] '(Inconnu)' n'est pas un chemin d'accès valide. 
```

所以这是意料之中的，但是我的单元测试失败了，因为我找不到代码

```
@test (expected=microsoft.odbc.error.class) 
```

这是我当前的代码块，非常感谢所有想法......

```
//test for a bad file name
    @Test (expected=java.sql.SQLException.class)
    public void failFileConnect()
    {
        this.reset();//reset and initialise our temp strings
        this.Report = new String();//initialise our report info string.

        //this file is imaginary, although it may look similar to the principle connect verstion it is not!
        MS_mdb tFile = new MS_mdb("c:\\path\\to\\non\\existant\\file\\will\\fail");

        File test = new File(tFile.getSchema());

        fail("cannot connect to imaginary file!");

    }//end test 
```

在类中，使用此代码初始化连接

```
schema = s; //the string file name passed into the method
String db = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ="+schema+";"; 
```

提前致谢...

大卫。

附言。我考虑过使用一个非常普遍的错误来捕获，但是想要这个，或者其他一些 JDBC/SQL 类型的错误，但是它们都不起作用，消息似乎不是来自任何一个。

D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:35:51.670

这是我的解决方案...

它可能不是非常优雅，但它有助于让我（或处于相同情况的用户）了解代码可能失败的原因。

我只是设置了一条日志输出消息，说明了可能的原因。

类似于...的东西

无法连接到指定的数据库。这可能是不正确的文件名（或路径）或其他一些奇怪的 SQL 问题（如果使用嵌入式数据库，则该文件当前是由另一个用户打开的）。确认文件的路径以及数据库上是否存在（或不存在）锁定文件。

至少它让我知道发生了什么......我想我可以用我自己的设计来设置一个奇怪的错误号；）

大卫

# android - 检查android库的测试覆盖率的正确方法是什么？

> ID：10831209
> 
> 赞同：2
> 
> 时间：2012-05-31T09:49:42.333
> 
> 标签：android, project, code-coverage, emma

我的主要项目是一个android库。我创建了一个包含一些单元测试的测试项目。测试运行良好，但我正在努力获得测试覆盖率。当我生成覆盖率报告时，我只得到测试用例的覆盖率，而不是库的覆盖率。所以它给了我几乎 100%，因为 100% 的测试正在运行。但这并不能帮助我判断图书馆的哪一部分已经过测试。

这就是我目前的做法：

```
0) my project looks like this:
myLibraryProject        <- this is my android library project
myLibraryProject/tests  <- this is my android test project

1) build.xml file : (from myLibraryProject/tests directory)
>android update test-project --path . -m ../

2) Modify the ant.properties file :
#tested.project.dir=../
android.library.reference.1=..

3) only then can I run :
ant emma debug install test 
```

如果我不执行步骤 2)，那么步骤 3) 将失败，因为无法安装库项目

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:38:11.347

所以这是我找到的解决方案：

在您的测试项目中创建一个新的 build.xml，从 android sdk build.xml 文件中复制“test”目标（我使用的是 sdk20 preview 2 版本）

修改源路径以指向报告部分中的库项目

这是我现在使用的：

```
 <!-- version-tag: custom -->
 <target name="test" depends="-test-project-check"
            description="Runs tests from the package defined in test.package property">
    <property name="test.runner" value="android.test.InstrumentationTestRunner" />

    <if condition="${project.is.test}">
    <then>
        <property name="tested.project.absolute.dir" location="${tested.project.dir}" />

        <!-- Application package of the tested project extracted from its manifest file -->
        <xpath input="${tested.project.absolute.dir}/AndroidManifest.xml"
                expression="/manifest/@package" output="tested.project.app.package" />
    </then>
    <else>
        <!-- this is a test app, the tested package is the app's own package -->
        <property name="tested.project.app.package" value="${project.app.package}" />
    </else>
    </if>

    <property name="emma.dump.file" value="/data/data/${tested.project.app.package}/coverage.ec" /> 

    <if condition="${emma.enabled}">
        <then>
            <echo>WARNING: Code Coverage is currently only supported on the emulator and rooted devices.</echo>
            <run-tests-helper emma.enabled="true">
                <extra-instrument-args>
                    <arg value="-e" />
                       <arg value="coverageFile" />
                       <arg value="${emma.dump.file}" />
                </extra-instrument-args>
            </run-tests-helper>
            <echo level="info">Downloading coverage file into project directory...</echo>
            <exec executable="${adb}" failonerror="true">
                <arg line="${adb.device.arg}" />
                <arg value="pull" />
                <arg value="${emma.dump.file}" />
                <arg value="coverage.ec" />
            </exec>
            <echo level="info">Extracting coverage report...</echo>
            <emma>
                <report sourcepath="../${source.dir}" verbosity="${verbosity}">
                    <sourcepath>
                      <dirset dir="${basedir}" >
                        <include name="../src" /> 
                        </dirset>
                    </sourcepath>
                    <infileset dir=".">
                        <include name="coverage.ec" />
                        <include name="coverage.em" />
                    </infileset>
                    <html outfile="coverage.html" />
                    <xml outfile="coverage/coverage.xml" />
               </report>
            </emma>
            <echo level="info">Cleaning up temporary files...</echo>
            <delete file="coverage.ec" />
            <delete file="coverage.em" />
            <echo level="info">Saving the report file in ${basedir}/coverage/coverage.html and ${basedir}/coverage/coverage.xml</echo>
        </then>
        <else>
            <run-tests-helper />
        </else>
    </if>
</target> 
```

# php - 在codeigniter中放置全局函数的位置

> ID：10831213
> 
> 赞同：25
> 
> 时间：2012-05-31T09:49:53.570
> 
> 标签：php, codeigniter, codeigniter-2

我创建了一些实用功能`h()`，例如充当`echo htmlentities($var)`. 我希望这些功能随处可用。所以我把它放在哪里。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-31T09:58:04.637

正如@david barker 所说，您可能会使用助手。创建一个名为“site_helper”的文件，其中包含所有功能。

但是请注意，您需要检查该函数是否已经存在，否则您将收到“函数已声明”错误。

所以，像：

文件`site_helper.php`（中`application/helpers/`）

```
if(!function_exists('h'))
{
  function h($value)
  {
   return htmlentities($value);
  }
}

if(!functin_exists('other_function')
//....etc. 
```

然后你可以在 config/autoload.php 中自动加载它：

```
$autoload['helpers'] = array('site'); 
```

^-- 注意你如何只使用下划线之前的部分来调用文件。此外，助手不是类，而是函数的集合。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T09:55:44.523

您应该在 /application/config/constants.php 文件中包含全局变量文件。然后将您的全局函数文件移动到 /application/helpers 文件夹。然后你应该自动加载全局函数文件。/application/config/autoload.php

```
$autoload['helpers'] = array('your-global-function-file.php'); 
```

我建议不要在系统文件夹项目中移动任何东西，因为升级绝对是一场噩梦。有时重构你的代码以符合 CI 逻辑，从长远来看可能更快，而不是试图在整个地方复制/粘贴东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T09:58:08.357

这正是 Helpers 的用途。

创建一个新的帮助程序（记得用 _helper.php 附加它）并将它放在您的帮助程序文件夹中。

您可以在配置中自动加载它（这样您就可以在任何地方使用它），也可以在需要时手动加载它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-12T11:56:30.343

使用[codeigniter-kint](https://github.com/virexmachina/codeigniter-kint)和全局函数的自定义文件。这将为您提供更有用和更漂亮的输出，例如： ![在此处输入图像描述](../Images/f5c27b9f197f2558d9312a65b80280e6.png)

**文件：application/helpers/globalfunctions_helper.php**

```
<?php
    /**
     * @file Global Helper Functions
     * 
     */

    if(!function_exists('pr'))
    {
      function pr($value=false){
       $CI = get_instance();
       $CI->load->library('kint');
       return @Kint::dump($value);   
      }
    }
    if(!function_exists('dp')){
      function dp($value=false)
      {
       $CI = get_instance();
       $CI->load->library('kint');
       Kint::dump($value);
       die();
      }
    } 
```

另见：[http ://raveren.github.io/kint/](http://raveren.github.io/kint/)

# linux - Mips 和 mipsel 工具链为同一可执行文件提供不同的堆栈信息

> ID：10831214
> 
> 赞同：1
> 
> 时间：2012-05-31T09:49:59.200
> 
> 标签：linux, mips, endianness, toolchain, gnu-toolchain

我有一个测试应用程序，我首先使用 'mips-linux-gnu-gcc -EL ' 编译以创建 "exec_sigma" ，然后使用 'mipsel-linux-uclibc-gcc' 来创建 "exec_bcm" 。

在对这些可执行文件进行了 readelf 之后，我有很多不同之处。我主要关心 .debug_info 部分的差异

在 elf_sigma ：它是：

[33] .debug_info MIPS_DWARF 00000000 01357b 02fa1e 00 0 0 1

[34] .debug_abbrev MIPS_DWARF 00000000 042f99 0040cd 00 0 0 1

在 elf_bcm 中：它是：

[32] .debug_info MIPS_DWARF 00000000 02329b 0058ba 00 0 0 1

[33] .debug_abbrev MIPS_DWARF 00000000 028b55 000619 00 0 0 1

这种差异（大小）导致我的应用程序中的错误进行堆栈跟踪。它适用于 mips-linux-gnu-gcc -EL，但不适用于 mipsel-linux-uclibc-gcc。我想知道为什么相同可执行文件的部分存在这种差异，这是否正常？

感谢您阅读问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:12:11.183

您实际上是在使用两个不同的编译器编译相同的代码，请确保编译器本身可能来自相同的源代码，但它们的构建是为了完成不同的工作并完成不同的工作。您不能期望可执行文件匹配，这里的错误是您的期望。

有人可能希望“您所要做的一切”是翻转一些地址并翻转所有字节和半字数据，但否则具有相同的二进制文件。这是该理论的一个非常简单的问题。假设编译器想要访问一个字节，它使用一个字节序位于地址 0x100000。一条指令 lui 可以将该地址加载到寄存器中，以便以后读取该字节。如果出于某种原因，字节序更改导致该地址需要较低的位，例如 0x100003，则现在需要两条指令将该地址加载到寄存器和/或内存位置以及对该内存位置的单次读取。应该有可能制作一个编译器，其目标是在最后一刻之前保持印度独立，生成无字节序代码（使用来自 . 文本不使用任何立即加载），然后以某种方式跟踪所有内容并在最后对其进行修补。您必须问为什么有人要制作这样的编译器，这是一个不花时间的小用例。通常，您希望编译器的性能不是这样的。

拿你编译的程序，反汇编或 objcopy 到二进制，然后比较两个二进制文件，你应该很快看到两者的分歧，然后使用反汇编我上面描述的东西的味道可能不是具体的例子，而是那种东西。一旦一个编译器而不是另一个编译器必须添加单个字节或字或指令（假设编译器在其他方面是相同的，但它们不是），寻址的变化可能并且将导致更多的指令差异，从而导致二进制文件继续发散。

# objective-c - UIScrollview 在 iphone sdk 中滚动时如何添加声音？

> ID：10831215
> 
> 赞同：-2
> 
> 时间：2012-05-31T09:50:04.287
> 
> 标签：objective-c, ios, uiscrollview, touch-event, audio

这是我在 iPhone SDK 中滚动 UIScrollview 时添加声音的代码。在这段代码中，如何在滚动中使用触摸事件时添加声音？请给我你的想法和建议或样品。

```
const CGFloat kScrollObjHeight  = 151.0;
const CGFloat kScrollObjWidth   =320.0;    
const NSUInteger kNumImages  = 5;

- (void)layoutScrollImages
{
  UIImageView *view = nil;
  NSArray *subviews = [scrollView1 subviews];
  CGFloat curXLoc = 0;
  for (view in subviews)
    {
      if ([view isKindOfClass:[UIImageView class]] &amp;&amp; view.tag &gt; 0)
       {
        CGRect frame = view.frame;
        frame.origin = CGPointMake(curXLoc, 0);
        view.frame = frame;
        curXLoc += (kScrollObjWidth);
       }
    }
   [scrollView1 setContentSize:CGSizeMake((kNumImages * kScrollObjWidth), [scrollView1 bounds].size.height)];
 }

- (void)viewDidLoad
 {
   self.view.backgroundColor = [UIColor clearColor];
   [scrollView1 setBackgroundColor:[UIColor whiteColor]];
   [scrollView1 setCanCancelContentTouches:NO];
   scrollView1.indicatorStyle = UIScrollViewIndicatorStyleWhite;
   scrollView1.clipsToBounds = YES; 
   scrollView1.scrollEnabled = YES;
   scrollView1.pagingEnabled = YES;
   NSUInteger i;
   for (i = 1; i &lt;= kNumImages; i++)
   {
     NSString *imageName = [NSString stringWithFormat:@&quot;snap%d.jpg&quot;, i];
     UIImage *image = [UIImage imageNamed:imageName];
     UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
     CGRect rect = imageView.frame;
     rect.size.height = kScrollObjHeight;
     rect.size.width = kScrollObjWidth;
     imageView.frame = rect;
     imageView.tag = i;
     [scrollView1 addSubview:imageView];
     [imageView release];
     [self layoutScrollImages];
   }
   [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:53:59.853

添加`UIScrollViewDelegate`到您的界面，然后在滚动处于任务状态时播放声音，并在`scrollViewWillBeginDragging`状态时停止滚动 `scrollViewDidEndDragging`。

您可以使用[AVAudioPlayer](http://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVAudioPlayerClassReference/)在 iOS 设备上播放声音

**更新：**

当滚动视图即将开始滚动内容时告诉委托。

`- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView`

此外，在滚动视图中拖动结束时告诉代理。

`- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate`

在您的代码中实现这些并放入您的自定义行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:42:53.763

你桅杆使用 UIScrollViewDelegate 方法

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
   //play sound here 
} 
```

# winforms - 防止 WinForms 中子控件引发的异常

> ID：10831223
> 
> 赞同：1
> 
> 时间：2012-05-31T09:50:12.987
> 
> 标签：winforms, exception-handling

我正在编写一个基于 WinForms 的 IDE 风格的应用程序。作为该应用程序的一部分，它会加载实现名为`IFeature`. 功能由主 IDE 框架通过 MEF 加载，然后要求实例化 的实例`Control`，然后将其添加到选项卡页以形成插件的主要工作表面。到目前为止，一切都很好。

我现在正在努力保护 IDE 免受实施不当的插件的影响，但我对如何做到这一点没有好主意。例如，如果插件是一个引发异常的按钮，那么 IDE 框架代码根本不涉及该调用堆栈，因此我没有地方可以注入 try-catch。我已经连接到`AppDomain.CurrentDomain.UnhandledException`and`Application.ThreadException`事件，它提供了针对以这种方式抛出的异常的顶级保护，但我希望能够在某些上下文中捕获它们，以便可以将异常绑定到`IFeature`负责的实例问题。

我确实有创建一个派生类的想法`Control`- 然后覆盖各种方法并实现 try-catch - 但是

一个。显得笨拙。
湾。不会防止控件反过来覆盖该方法。
C。将阻止使用任何非自定义控件（例如，`Panel`）

是否有任何其他方法可以用来为我的框架提供更接近原因的保护，或者我是否坚持处理上述范围非常广泛的事件。

谢谢

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:48:45.863

总的来说，我不会为此负担太多。

只需告诉插件开发人员，当您捕获到他们的控件漏掉的异常时，您将删除对该控件的所有引用。

做其他任何事情都太难了，因为您必须设想控件可能做错的所有事情。

对于非 UI 插件，我会杀死 appdomain。

删除所有引用可能不那么安全，这可能就是为什么许多允许 UI 插件的程序不允许插件绘制 UI，而是根据插件通过界面建议的内容为插件绘制 UI。

# java - Scanner.nextDouble : txt 文件正确加载但出现“InputMismatchException”

> ID：10831224
> 
> 赞同：2
> 
> 时间：2012-05-31T09:50:13.080
> 
> 标签：java, java.util.scanner, uncaught-exception

我有一个文本 (file.txt) 文件。该文件加载在扫描仪内。

在文件中有不同的行，每行有两个双精度值和一个整数值除以空格。

像这样：

```
1.0 1.2 2
0.9 1.0 10
50.4 9.2 20 
```

我需要完成三个数组。

每个数组对应一**列**。就像是：

```
double[] x = {1.0,0.9,50.4}
double[] y = {1.2,1.0,9.2}
double[] z = {2,10,20} 
```

我尝试使用此代码：

```
double x[]= new double [3];
double y[]= new double [3];
double z[]= new double [3];

File f = new File(ClassLoader.getSystemResource(file.txt).toURI());
Scanner sc = new Scanner(f);

for (int i=0;j<3;i++){
  x[i] = sc.nextDouble();
  y[i] = sc.nextDouble();
  z[i] = sc.nextDouble();
} 
```

但是当执行第一个 nextDouble() 时，会出现“未捕获”（java.util.InputMismatchException）异常。

我究竟做错了什么？

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:18:08.487

是否与`Locale`您正在解析相关的内容`doubles`？

[来自http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)的引用

> 此类的一个实例能够扫描标准格式以及扫描仪区域设置格式的数字。扫描仪的初始语言环境是`Locale.getDefault()`方法返回的值；它可以通过该`useLocale(java.util.Locale)`方法进行更改。

因此，例如，这可能会有所帮助：

```
scanner.useLocale(Locale.ENGLISH); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:08:09.233

如果`sc.next()`对您有用，您需要解析输出，因为它是类型`String`，因此是`InputMismatchException`.

尝试：

```
for (int i=0;j<3;i++) {
  String s;
  s = sc.next();
  x[i] = Double.parseDouble(s);
  s = sc.next();
  y[i] = Double.parseDouble(s);
  s = sc.next();
  z[i] = Double.parseDouble(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T21:25:15.930

执行程序时，请尝试使用逗号而不是点：

```
1,0 1,2 2

0,9 1,0 10

50,4 9,2 20 
```

# jakarta-ee - Java-EE6：使用什么类型的会话 Bean 作为 JMS 主题提供者？

> ID：10831226
> 
> 赞同：0
> 
> 时间：2012-05-31T09:50:27.850
> 
> 标签：jakarta-ee, singleton, jms, java-ee-6, ejb-3.1

我使用 MySQL 5.5、Glassfish 3.1.2 和一个独立的 Swing 客户端 (JRE 6_u32) 构建了一个 3 层应用程序。我计划在 Glassfish 服务器上运行一个 GUI 更新服务，以便当前连接到应用程序服务器的任何用户在另一个用户创建、修改或删除 @Entity 注释对象时得到通知。

为此，我计划在实体侦听器调用任何回调方法（@PostPersist、@PostUpdate、@PostRemove）时充当 JMS 主题生产者的会话 bean。因此，独立的 Swing 客户端充当主题的 JMS 消息消费者。

我的应用程序包含 3 个项目。首先，EJB 项目女巫在服务器容器中运行并持有外观会话 bean，这是一个类库项目，它持有 @Entity 注释类和远程外观接口（这个由 EJB 项目和独立的 Swing 客户端共享- 通信目的），最后是管理 GUI 的独立 Swing 客户端。@Singleton 类是 classlib 项目的一部分，因此我不能在那里使用依赖注入。此外，我认为这正是问题所在，@Singleton 类不是容器管理的，因为它被打包在自己的 jar-lib 中并被 EJB 项目引用（必须使用 JNDI 查找）。

你会推荐什么样的 Session Bean 来在应用服务器上实现主题消息生产者？单例、有状态、无状态、消息驱动？

这是我现在的singelton session bean。问题是，@PostConstruct 注释的 initConnection 方法没有被调用。调用 publishCreated() 时，“会话”和“发布者”字段为空...

任何想法如何解决这个问题？提前谢谢了！

```
@Singleton
public class UpdateService {

    private Destination topic;
    private ConnectionFactory factory;
    private Connection connection;
    private Session session;
    private MessageProducer producer;

    public UpdateService() { }

    @PostConstruct void initConnection() {
        try {
            InitialContext ctx = ServerContext.getInitialContext();
            factory = (TopicConnectionFactory)ctx.lookup("jms/TopicFactory");
            topic = (Topic)ctx.lookup("jms/TopicUpdate");
            connection = factory.createConnection();
            session = connection.createSession(true, Session.AUTO_ACKNOWLEDGE);
            producer = session.createProducer(topic);
        } catch (NamingException ex) {
            Logger.getLogger(UpdateService.class.getName()).log(Level.SEVERE, ex.getMessage(), ex);
        } catch (JMSException ex) {
            Logger.getLogger(UpdateService.class.getName()).log(Level.SEVERE, ex.getMessage(), ex);
        }
    }

    @PreDestroy void closeConnection() {
        try {
            session.close();
            connection.close();
        } catch (JMSException ex) {
            Logger.getLogger(UpdateService.class.getName()).log(Level.SEVERE, ex.getMessage(), ex);
        }
    }

    @PostPersist void publishCreated(IUpdateableEntity entity) throws JMSException {
        if(session!=null && producer!=null) {
            ObjectMessage message = session.createObjectMessage(new UpdateMessage(entity, UpdateType.CREATED));
            producer.send(message);
        }
    }

    @PostUpdate void publishUpdated(IUpdateableEntity entity) throws JMSException {
        if(session!=null && producer!=null) {
            ObjectMessage message = session.createObjectMessage(new UpdateMessage(entity, UpdateType.MODIFIED));
            producer.send(message);
        }
    }

    @PostRemove void publishRemoved(IUpdateableEntity entity) throws JMSException {
        if(session!=null && producer!=null) {
            ObjectMessage message = session.createObjectMessage(new UpdateMessage(entity, UpdateType.REMOVED));
            producer.send(message);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:40:12.373

它的服务器负责在初始化 bean 时注入依赖项。您可以尝试使用注解来注入这些 JMS 资源。

```
@Startup
@Singleton
public class UpdateService {

    @Resource(mappedName = "jms/TopicFactory")
    private ConnectionFactory connectionFactory;

    @Resource(mappedName = "jms/TopicUpdate")
    private Topic replyToTestQueue;

    @PostConstruct
    void initConnection() {

          //-- Messaging Configuration 
    }
} 
```

确保通过管理控制台正确配置了这些资源。我不习惯 Glassfish，但我已经尝试过并且它工作正常。

但是，默认情况下，所有单例方法都是事务性和线程安全的，您可以通过显式锁定来管理并发。否则，如果它适合，您可以使用无状态 bean。

# c# - 如何为 PDF 文件添加密码保护

> ID：10831227
> 
> 赞同：1
> 
> 时间：2012-05-31T09:50:35.677
> 
> 标签：c#, itextsharp

我使用以下代码：

```
string WorkingFolder = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
string InputFile = Path.Combine(WorkingFolder, "PSNOs.pdf");
string OutputFile = Path.Combine(WorkingFolder, "PSNOs_enc.pdf");
using (Stream input = new FileStream(InputFile, FileMode.Open, FileAccess.Read, FileShare.Read))
{
    using (Stream output = new FileStream(OutputFile, FileMode.Create, FileAccess.Write, FileShare.None))
    {
        PdfReader reader = new PdfReader(input);
        PdfEncryptor.Encrypt(reader, output, true, null, "secret", PdfWriter.ALLOW_SCREENREADERS);
    }
} 
```

但它正在创建另一个文件并向输出文件添加密码。但我不想像上面那样创建两个文件。我想在`PSNOs.pdf`不创建其他文件的情况下提供输入文件的密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:15:30.240

**根据[itextsharp](http://itextsharp.sourceforge.net/)文档，它可以在新创建的 pdf 中设置密码。它不能为现有的 pdf 文件提供密码。**

[因此，您希望通过使用itextsharp](http://itextsharp.sourceforge.net/)来保护密码而不创建新文件是不可能的。要制作受密码保护的 pdf，您必须使用输出文件（由 PdfEncryptor.Encrypt() 方法创建的密码保护）并删除输入的 pdf。

你也可以看到这个[链接](http://www.coderanch.com/how-to/javadoc/itext-2.1.7/com/lowagie/text/pdf/PdfEncryptor.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:58:04.413

It must be done this way unfortunately.

I would suggest you:

1.  Create the unsigned PDF in the system TEMP folder
2.  Sign it, outputting to the location and file name you want
3.  Clean up - delete the temp file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T04:50:24.653

使用 iTextSharp 创建受密码保护的 PDF

```
 string sourcePdf = @"D:\unsecuredfolder\unsecuredPage.pdf";
        using (Stream input = new FileStream(sourcePdf , FileMode.Open, FileAccess.Read, FileShare.Read))
               //Passowrd the pwd for PDF security                 

   string destPdf = @"D:\securedfolder\securedPage.pdf";

         /sourcePdf  unsecured PDF file
       //destPdf secured PDF file

        {
            using (Stream output = new FileStream(destPdf , FileMode.Create, FileAccess.Write, FileShare.None))
            {
                PdfReader reader = new PdfReader(input);

                string Password="abc@123";
                PdfEncryptor.Encrypt(reader, output, true, Password, Password, PdfWriter.ALLOW_PRINTING);
            }
        } 
```

# c - malloc 是否仅在线性区域结构 vm_area_t 中分配空间而不是实际内存

> ID：10831232
> 
> 赞同：2
> 
> 时间：2012-05-31T09:50:56.703
> 
> 标签：c, linux, linux-kernel

我在《理解linux内核》中读到，当malloc在用户空间被调用时，内核只是在vm_area_t结构中添加了一个线性区域，而不是在内存中分配空间，这就是所谓的ostponing分配，而这个空间是线性分配的region 只能在页面中断发生时使用。但是如果在页面中断期间不能分配页面，那么调用malloc时用户不是被骗了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:43:06.343

glibc 封装的 malloc() 调用将首先从 glibc 维护的堆内存中分配。（看看[malloc 期间内核中发生了什么？](https://stackoverflow.com/questions/5716100/what-happens-in-the-kernel-during-malloc)）如果 glibc 用完堆内存，则会调用 sys_brk 来分配更多内存。内核仅在第一次接触分配内存（主要是页面错误处理程序）时才将内存分配给用户请求。因此，我猜 calloc 将返回一个真正分配的，因为它将页面初始化为零（从手册页），它通过擦洗页面的内容来触及页面。如果在故障处理程序中无法分配新页面，这意味着系统内存非常低，要么处于大量交换中，要么将进入 OOM。

一件小事是Linux在分配给用户进程时总是清理内存，因为当页面返回给伙伴分配器时它不会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:39:18.887

[malloc](http://linux.die.net/man/3/calloc)分配的内存在写入之前不在实际内存中。另一方面，[calloc分配实际内存。](http://linux.die.net/man/3/calloc)

从 man 手册页：

> 默认情况下，Linux 遵循乐观的内存分配策略。这意味着当 malloc() 返回非 NULL 时，不能保证内存确实可用。这是一个非常糟糕的错误。如果发现系统内存不足，一个或多个进程将被臭名昭著的 OOM 杀手杀死。如果在不希望突然丢失一些随机选择的进程的情况下使用 Linux，而且内核版本足够新，可以使用如下命令关闭这种过度使用行为：
> 
> ```
>  # echo 2 > /proc/sys/vm/overcommit_memory 
> ```

在 glibc 的源代码中环顾四周，发现这是我认为是 calloc 的：

```
if (__builtin_expect (hook != NULL, 0)) {
    sz = bytes;
    mem = (*hook)(sz, RETURN_ADDRESS (0));
    if(mem == 0)
      return 0;
#ifdef HAVE_MEMCPY
    return memset(mem, 0, sz);
#else
    while(sz > 0) ((char*)mem)[--sz] = 0; /* rather inefficient */
    return mem;
#endif
  } 
```

# android - AndroidApplicationRecord 和谷歌分析

> ID：10831239
> 
> 赞同：2
> 
> 时间：2012-05-31T09:51:38.973
> 
> 标签：android, google-analytics, google-play, nfc, android-applicationrecord

我正在开发一个可以通过 AndroidApplicationRecord 安装和打开的应用程序（AAR，参见[http://developer.android.com/guide/topics/nfc/nfc.html](http://developer.android.com/guide/topics/nfc/nfc.html)）。

如果用户安装来自其他来源的应用程序，我将向 Google Play 链接添加 Google Analytics（分析）引荐来源网址，以跟踪安装来源。

有没有办法将此引用者添加到 AAR 或作为附加的 NDEFRecord 以便也可以跟踪此来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:16:24.037

AAR 背后的过程是完全自动的。AAR 包含应用程序的包名称，仅包含其他内容。然后，Android 将在 Play Store 应用程序中搜索该包名称。所以没有办法添加任何东西，据我所知。

除了共享 AAR，您可以尝试共享包含 Play 商店 URI 的 URI 记录，其中包含您的 Google Analytics（分析）引荐来源网址。我对 Google Analytics 了解不多，但在我看来，您可以在安装应用程序时捕获引荐来源网址，请参阅例如[Get Android Google Analytics referrer tag](https://stackoverflow.com/q/3817030/1202968)和[Get referrer after install app from Android Market](https://stackoverflow.com/q/4093150/1202968)。

另一种方法可能是在将 AAR 共享到另一台设备时，在已安装的应用程序中使用 Google Analytics 跟踪共享事件。

# ios - 如何为 iPhone 实现这个视图

> ID：10831247
> 
> 赞同：0
> 
> 时间：2012-05-31T09:52:16.833
> 
> 标签：ios, uiview, uiwebview

![在此处输入图像描述](../Images/d7a3e77cbacba497da8c08e6a3837873.png)

我期望的视图就像这个图像

主视图包含三个部分：一个标签，一个webview和一个tableview。但困难在于它们的大小不固定。我希望 webView 可以根据其内容自动拉伸高度；tableView 类似于 webView，它的高度应该由它的内容决定。

如果 webView 的高度大于屏幕的高度，我想滚动整个视图而不是 webView。

我尝试了很多方法，但无法获得预期的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:25:20.390

您可以通过使用 UITableView 在 UITableView 单元格上添加所有组件来实现，方法是使用 cell.contentView 并在 UIView 上添加表格。

# visual-c++ - 找不到#include“SDL.h”

> ID：10831250
> 
> 赞同：5
> 
> 时间：2012-05-31T09:52:22.050
> 
> 标签：visual-c++, compiler-errors, sdl

在构建之后，我一直在编译 Lazy Foo 教程 n 给出的代码，它显示：-

> 致命错误 C1083：无法打开包含文件：“SDL.h”：没有这样的文件或目录

接下来我该怎么办？我已按照教程给出的程序进行操作，我认为我没有遗漏任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T09:55:39.790

转到并向`http://www.libsdl.org/download-1.2.php`下滚动到“开发库”。得到你需要的那个，在这种情况下，我想你需要 SDL for Windows 吗？并将其放在 Visual Studio 的库中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-13T21:09:52.820

旧线程，但对于那些继续遇到此问题的人；当您设置 VC++ 目录时，我打赌窗口顶部的配置下拉菜单设置为“调试”（这就是发生在我身上的事情）。将其更改为“发布”，然后再次添加路径...

# asp.net-mvc-4 - MVC4如何调用以下控制方法？

> ID：10831254
> 
> 赞同：0
> 
> 时间：2012-05-31T09:52:29.667
> 
> 标签：asp.net-mvc-4

```
[HttpPost]
        public HttpResponseMessage<Response> Login(string username, string password) { ... } 
```

我想知道以下 WebAPI 方法。如何将参数传递给方法？我认为那些不是 POST 数据。由于当我从 Web 表单发送帖子数据时该方法没有响应。

```
<form action="/api/Authenticate/Login" id="loginForm" method="post">
    <fieldset>
    <legend>Userdata:</legend>
        <label for="username">Username</label>
        <input id="username" name="username" type="text" value="" />
        <label for="password">Password</label>
        <input id="password" name="password" type="password" value="" />
        <button type="submit">Login</button>
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:54:59.343

Web API 方法不打算用作 HTML 表单的操作，因为它们通常不返回 HTML。它们旨在从常规 ASP.NET MVC 控制器中使用。因此，虽然您可以使用 POST 动词调用此方法并将两个参数作为 POST 请求正文的一部分传递，但具体取决于您配置的媒体类型是 XML 还是 JSON。另一种可能性是使用客户端 javascript AJAX 调用来调用此方法。要考虑的另一件事是不标准的方法名称：`Login`. 如果您希望能够调用它，您将需要修改使用您的应用程序创建的默认路由并将`{action}`令牌包含到路由中。

所以：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

应该变成：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

你将发送一个 POST 请求到`/api/somecontroller/login`.

如果您想遵守约定，您将拥有以下内容：

```
public class LoginController : ApiController
{
    // POST /api/login
    public HttpResponseMessage<Response> Post(string username, string password)
    {
        ...
    }
} 
```

进而：

```
<form action="/api/login" id="loginForm" method="post">
    <fieldset>
    <legend>Userdata:</legend>
        <label for="username">Username</label>
        <input id="username" name="username" type="text" value="" />
        <label for="password">Password</label>
        <input id="password" name="password" type="password" value="" />
        <button type="submit">Login</button>
    </fieldset>
</form> 
```

# php - 使用正则表达式的javascript时间格式转换

> ID：10831259
> 
> 赞同：0
> 
> 时间：2012-05-31T09:52:40.110
> 
> 标签：php, javascript, regex

AM 使用正则表达式以**HH:MM格式检查给定时间**

例如。，

```
var re = /^\s*([01]?\d|2[0-3]):?([0-5]\d)\s*$/;
    if ((m = s.match(re))) {

result = (m[1].length == 2 ? "" : "0") + m[1] + ":" + m[2];
        } 
```

哪个工作正常。但我想将给定的数字转换并显示为给定的正则表达式格式。任何人都可以帮助我找到解决方案。

例子 ：

> 如果我们输入 1 它必须转换为 01:00 或 1.0 为 01:00

或者除了正则表达式还有其他方法可以转换吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:02:16.380

例如：

```
format2 = function(n) { n = parseInt(n, 10); return (n < 10 ? "0" : "") + n }

time = "1"
p = (time + ":0").split(":")
formattedTime = format2(p[0]) + ":" + format2(p[1]); 
```

这会将所有可能的数字输入转换为 HH:MM 格式

# tridion - 使用 SDL Tridion 2011 Core Service 以编程方式创建组件

> ID：10831260
> 
> 赞同：5
> 
> 时间：2012-05-31T09:52:42.133
> 
> 标签：tridion

我在这里看到了一些与此主题相关的问题/答案，但是我仍然没有得到我想要的建议。所以我再次在这里发布我的问题，我会感谢你宝贵的时间和答案。

我想通过在 SDL Tridion Content Manager 中以编程方式创建“组件、页面、SG、出版物、文件夹”，然后，我想在页面中添加以编程方式创建的组件并为该页面附加 CT、PT，最后将喜欢以编程方式发布页面。

我已经使用 TOM API（互操作 DLL）在 SDL Tridion 2009 中完成了这些所有活动，并使用 TOM.Net API 在 SDL Tridion 2011 中尝试了这些活动。它不起作用，后来我才知道，TOM.Net API 不支持这些类型的工作，它专门用于模板和事件系统。最后我开始知道我必须使用核心服务来做这些事情。

**我的问题：**

1.  当我创建控制台应用程序以使用核心服务以编程方式创建组件时，我必须添加哪些 DLL 作为参考？
2.  之前，我已经创建了exe并在TCM服务器中运行，exe创建了所有的东西，我也可以使用相同的方法使用核心服务吗？它会起作用吗？
3.  BC 是否仍然可用或核心服务已取代 BC？(BC-业务连接器)
4.  任何人都可以发送一些代码片段来创建组件/页面（完整的类文件将有助于更好地理解）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T10:38:14.997

1.  您只需要引用 Tridion.ContentManager.CoreService.Client.dll。您**可能**希望引用 Tridion.Common.dll 来访问一些有用的类，例如`TcmUri`，但这不是必需的。
2.  您的客户端程序将与您指定的机器上的核心服务建立显式连接。如果操作正确，您可以在与 Tridion Content Manager 相同的机器上或不同的机器上运行客户端。
3.  Business Connector 仍然可用，但已被核心服务取代。
4.  看看这些链接：

[使用 SDL Tridion 2011 中的核心服务更新组件](https://stackoverflow.com/questions/10069726/updating-components-using-the-core-service-in-sdl-tridion-2011/10073979#10073979)

[在 SDL Tridion 2011 中，如何使用核心服务处理项目的元数据？](https://stackoverflow.com/questions/9379562/in-sdl-tridion-2011-how-can-i-process-metadata-on-an-item-using-the-core-servic/9379653#9379653)

[以及关于从 .NET 连接到核心服务](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_B49EC308F06D48E19230A2EC6070E14E)的主题的标准文档。

如果您需要有关代码的更多帮助，我建议您向我们展示您已经编写的代码并解释什么不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T10:36:58.037

我将尝试回答您的问题：

1.  您必须引用 Tridion.ContentManager.CoreService.Client 并向 app.config 添加一些内容。[这里](http://sdllivecontent.sdl.com/LiveContent/web/ui.xql?c=t&action=html&resource=publist_home.html#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&lang=&action=search&query=Tridion.ContentManager.CoreService.Client&sid=lcSearch.runSearch1338460433722&eventType=lcContent.loadDoctask_B49EC308F06D48E19230A2EC6070E14E&pubid=SDL_Tridion_2011_SPONE&publang=en-US&resource=c3817be3-6322-460f-a776-095945670d97.xml&docid=task_B49EC308F06D48E19230A2EC6070E14E&filename=GettingTheDotNETClientUpAndRunning.xml&query=Tridion.ContentManager.CoreService.Client&scope=&tid=b0d2502a-9dfd-4b76-843b-d4e52c6f0919&inner_id=&addHistory=true)有描述

2.  它可以在 CM 服务器以及任何其他机器上工作，只要它可以访问 CoreService

3.  CoreService 是 BC 的替代品。BC 已弃用，很快将被删除
4.  您将从[这里](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=Tridion.ContentManager.CoreService.Client&sid=lcSearch.runSearch1338460671748&eventType=lcContent.loadDocconcept_25F3C706E3A945A89870045A9ECAC139&query=&scope=&filename=RetrievingItems.xml&docid=concept_25F3C706E3A945A89870045A9ECAC139&inner_id=&tid=&addHistory=true&resource=)获得所有基本信息。

这应该足以让您开始。如果您有具体问题 - 将它们作为单独的问题发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T10:03:59.703

从[我如何在我的控制台应用程序中使用引擎对象](https://stackoverflow.com/questions/11473513/how-can-i-use-engine-object-in-my-console-application/11501818)

从控制台应用程序中，您应该使用核心服务。我写了一个小例子，使用核心服务在内容管理器中搜索项目。

```
Console.WriteLine("FullTextQuery:");

var fullTextQuery = Console.ReadLine();

if (String.IsNullOrWhiteSpace(fullTextQuery) || fullTextQuery.Equals(":q", StringComparison.OrdinalIgnoreCase))
{
    break;
}

Console.WriteLine("SearchIn IdRef:");

var searchInIdRef = Console.ReadLine();

var queryData = new SearchQueryData
                    {
                        FullTextQuery = fullTextQuery,
                        SearchIn = new LinkToIdentifiableObjectData
                                        {
                                            IdRef = searchInIdRef
                                        }
                    };

var results = coreServiceClient.GetSearchResults(queryData);
results.ToList().ForEach(result => Console.WriteLine("{0} ({1})", result.Title, result.Id)); 
```

将对 Tridion.ContentManager.CoreService.Client 的引用添加到您的 Visual Studio 项目中。

核心服务客户端提供者代码：

```
public interface ICoreServiceProvider
{
    CoreServiceClient GetCoreServiceClient();
}

public class CoreServiceDefaultProvider : ICoreServiceProvider
{
    private CoreServiceClient _client;

    public CoreServiceClient GetCoreServiceClient()
    {
        return _client ?? (_client = new CoreServiceClient());
    }
} 
```

和客户本身：

```
public class CoreServiceClient : IDisposable
{
    public SessionAwareCoreServiceClient ProxyClient;

    private const string DefaultEndpointName = "netTcp_2011";

    public CoreServiceClient(string endPointName)
    {
        if(string.IsNullOrWhiteSpace(endPointName))
        {
            throw new ArgumentNullException("endPointName", "EndPointName is not specified.");
        }

        ProxyClient = new SessionAwareCoreServiceClient(endPointName);
    }

    public CoreServiceClient() : this(DefaultEndpointName) { }

    public string GetApiVersionNumber()
    {
        return ProxyClient.GetApiVersion();
    }

    public IdentifiableObjectData[] GetSearchResults(SearchQueryData filter)
    {
        return ProxyClient.GetSearchResults(filter);
    }

    public IdentifiableObjectData Read(string id)
    {
        return ProxyClient.Read(id, new ReadOptions());
    }

    public ApplicationData ReadApplicationData(string subjectId, string applicationId)
    {
        return ProxyClient.ReadApplicationData(subjectId, applicationId);
    }

    public void Dispose()
    {
        if (ProxyClient.State == CommunicationState.Faulted)
        {
            ProxyClient.Abort();
        }
        else
        {
            ProxyClient.Close();
        } 
    }
} 
```

当您想通过核心服务执行 CRUD 操作时，您可以在客户端中实现以下方法：

```
public IdentifiableObjectData CreateItem(IdentifiableObjectData data)
{
    data = ProxyClient.Create(data, new ReadOptions());
    return data;
}

public IdentifiableObjectData UpdateItem(IdentifiableObjectData data)
{
    data = ProxyClient.Update(data, new ReadOptions());
    return data;
}

public IdentifiableObjectData ReadItem(string id)
{
    return ProxyClient.Read(id, new ReadOptions());
} 
```

要构造例如 Component 的数据对象，您可以实现 Component Builder 类，该类实现为您执行此操作的 create 方法：

```
public ComponentData Create(string folderUri, string title, string content)
{
    var data = new ComponentData()
                    {
                        Id = "tcm:0-0-0",
                        Title = title,
                        Content = content,
                        LocationInfo = new LocationInfo()
                    };

    data.LocationInfo.OrganizationalItem = new LinkToOrganizationalItemData
    {
        IdRef = folderUri
    };

using (CoreServiceClient client = provider.GetCoreServiceClient())
{
    data = (ComponentData)client.CreateItem(data);
}

    return data;
} 
```

希望这能让你开始。

# entity-framework - 实体框架：多对多 .Include() 不起作用

> ID：10831263
> 
> 赞同：1
> 
> 时间：2012-05-31T09:52:52.023
> 
> 标签：entity-framework, linq-to-entities

我有以下表结构：

![实体框架模型](../Images/b3cfd05a6f1bb1e9efc320a1d23ce859.png)

也就是说，Supplier 与 People (of Person) 具有多对多的关系。

> 供应商 1--* SupplierPerson *--1 人

Person 与 EmaiLAddresses、TelephoneNumbers 和 WebResources 具有一对多的关系。

> 人 1--* 电子邮件地址
> 人 1--* 电话号码
> 人 1--* WebResource

我已经突出显示了导航属性。

给定 LINQ-to-Entities 使用 .Include() 加载依赖项并塑造结果集：

```
 ObjectQuery<Supplier> supplierQuery=((SopEntities)Context).Suppliers
                .Include("People")
                .Include("People.TelephoneNumbers")
                .Include("People.EmailAddresses")
                .Include("People.WebResources");
#if TRACE
            Trace.WriteLine(string.Format("GetAll(): {0}", supplierQuery.ToTraceString()));
#endif
            return supplierQuery; 
```

我得到了非常大而且相当无用的 SQL：

```
SELECT 
[Project5].[ID] AS [ID], 
[Project5].[Key] AS [Key], 
[Project5].[CompanyName] AS [CompanyName], 
[Project5].[AddressLine1] AS [AddressLine1], 
[Project5].[AddressLine2] AS [AddressLine2], 
[Project5].[TownCity] AS [TownCity], 
[Project5].[CountyState] AS [CountyState], 
[Project5].[Postcode] AS [Postcode], 
[Project5].[Country] AS [Country], 
[Project5].[C25] AS [C1], 
[Project5].[C2] AS [C2], 
[Project5].[C3] AS [C3], 
[Project5].[C4] AS [C4], 
[Project5].[C5] AS [C5], 
[Project5].[C6] AS [C6], 
[Project5].[C7] AS [C7], 
[Project5].[C8] AS [C8], 
[Project5].[C9] AS [C9], 
[Project5].[C10] AS [C10], 
[Project5].[C11] AS [C11], 
[Project5].[C1] AS [C12], 
[Project5].[C12] AS [C13], 
[Project5].[C13] AS [C14], 
[Project5].[C14] AS [C15], 
[Project5].[C15] AS [C16], 
[Project5].[C16] AS [C17], 
[Project5].[C17] AS [C18], 
[Project5].[C18] AS [C19], 
[Project5].[C19] AS [C20], 
[Project5].[C20] AS [C21], 
[Project5].[C21] AS [C22], 
[Project5].[C22] AS [C23], 
[Project5].[C23] AS [C24], 
[Project5].[C24] AS [C25]
FROM ( SELECT 
    [Extent1].[ID] AS [ID], 
    [Extent1].[Key] AS [Key], 
    [Extent1].[CompanyName] AS [CompanyName], 
    [Extent1].[AddressLine1] AS [AddressLine1], 
    [Extent1].[AddressLine2] AS [AddressLine2], 
    [Extent1].[TownCity] AS [TownCity], 
    [Extent1].[CountyState] AS [CountyState], 
    [Extent1].[Postcode] AS [Postcode], 
    [Extent1].[Country] AS [Country], 
    [UnionAll2].[C1] AS [C1], 
    [UnionAll2].[C2] AS [C2], 
    [UnionAll2].[C3] AS [C3], 
    [UnionAll2].[C4] AS [C4], 
    [UnionAll2].[C5] AS [C5], 
    [UnionAll2].[C6] AS [C6], 
    [UnionAll2].[C7] AS [C7], 
    [UnionAll2].[C8] AS [C8], 
    [UnionAll2].[C9] AS [C9], 
    [UnionAll2].[C10] AS [C10], 
    [UnionAll2].[C11] AS [C11], 
    [UnionAll2].[C12] AS [C12], 
    [UnionAll2].[C13] AS [C13], 
    [UnionAll2].[C14] AS [C14], 
    [UnionAll2].[C15] AS [C15], 
    [UnionAll2].[C16] AS [C16], 
    [UnionAll2].[C17] AS [C17], 
    [UnionAll2].[C18] AS [C18], 
    [UnionAll2].[C19] AS [C19], 
    [UnionAll2].[C20] AS [C20], 
    [UnionAll2].[C21] AS [C21], 
    [UnionAll2].[C22] AS [C22], 
    [UnionAll2].[C23] AS [C23], 
    [UnionAll2].[C24] AS [C24], 
    CASE WHEN ([UnionAll2].[C2] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C25]
    FROM  [dbo].[Supplier] AS [Extent1]
    OUTER APPLY  (SELECT 
        [UnionAll1].[C1] AS [C1], 
        [UnionAll1].[PersonID] AS [C2], 
        [UnionAll1].[SupplierID] AS [C3], 
        [UnionAll1].[SupplierID1] AS [C4], 
        [UnionAll1].[ID] AS [C5], 
        [UnionAll1].[Title] AS [C6], 
        [UnionAll1].[FirstName] AS [C7], 
        [UnionAll1].[Initials] AS [C8], 
        [UnionAll1].[LastName] AS [C9], 
        [UnionAll1].[Position] AS [C10], 
        [UnionAll1].[DepartmentID] AS [C11], 
        [UnionAll1].[ID1] AS [C12], 
        [UnionAll1].[Number] AS [C13], 
        [UnionAll1].[Name] AS [C14], 
        [UnionAll1].[PersonID1] AS [C15], 
        [UnionAll1].[TelephoneNumberTypeID] AS [C16], 
        [UnionAll1].[C2] AS [C17], 
        [UnionAll1].[C3] AS [C18], 
        [UnionAll1].[C4] AS [C19], 
        [UnionAll1].[C5] AS [C20], 
        [UnionAll1].[C6] AS [C21], 
        [UnionAll1].[C7] AS [C22], 
        [UnionAll1].[C8] AS [C23], 
        [UnionAll1].[C9] AS [C24]
        FROM  (SELECT 
            CASE WHEN ([Extent4].[ID] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1], 
            [Extent2].[PersonID] AS [PersonID], 
            [Extent2].[SupplierID] AS [SupplierID], 
            [Extent2].[SupplierID] AS [SupplierID1], 
            [Extent3].[ID] AS [ID], 
            [Extent3].[Title] AS [Title], 
            [Extent3].[FirstName] AS [FirstName], 
            [Extent3].[Initials] AS [Initials], 
            [Extent3].[LastName] AS [LastName], 
            [Extent3].[Position] AS [Position], 
            [Extent3].[DepartmentID] AS [DepartmentID], 
            [Extent4].[ID] AS [ID1], 
            [Extent4].[Number] AS [Number], 
            [Extent4].[Name] AS [Name], 
            [Extent4].[PersonID] AS [PersonID1], 
            [Extent4].[TelephoneNumberTypeID] AS [TelephoneNumberTypeID], 
            CAST(NULL AS int) AS [C2], 
            CAST(NULL AS varchar(1)) AS [C3], 
            CAST(NULL AS varchar(1)) AS [C4], 
            CAST(NULL AS int) AS [C5], 
            CAST(NULL AS int) AS [C6], 
            CAST(NULL AS varchar(1)) AS [C7], 
            CAST(NULL AS varchar(1)) AS [C8], 
            CAST(NULL AS int) AS [C9]
            FROM   [dbo].[SupplierPerson] AS [Extent2]
            INNER JOIN [dbo].[Person] AS [Extent3] ON [Extent3].[ID] = [Extent2].[PersonID]
            LEFT OUTER JOIN [dbo].[TelephoneNumber] AS [Extent4] ON [Extent3].[ID] = [Extent4].[PersonID]
            WHERE [Extent1].[ID] = [Extent2].[SupplierID]
        UNION ALL
            SELECT 
            2 AS [C1], 
            [Extent5].[PersonID] AS [PersonID], 
            [Extent5].[SupplierID] AS [SupplierID], 
            [Extent5].[SupplierID] AS [SupplierID1], 
            [Extent6].[ID] AS [ID], 
            [Extent6].[Title] AS [Title], 
            [Extent6].[FirstName] AS [FirstName], 
            [Extent6].[Initials] AS [Initials], 
            [Extent6].[LastName] AS [LastName], 
            [Extent6].[Position] AS [Position], 
            [Extent6].[DepartmentID] AS [DepartmentID], 
            CAST(NULL AS int) AS [C2], 
            CAST(NULL AS varchar(1)) AS [C3], 
            CAST(NULL AS varchar(1)) AS [C4], 
            CAST(NULL AS int) AS [C5], 
            CAST(NULL AS int) AS [C6], 
            [Extent7].[ID] AS [ID1], 
            [Extent7].[Email] AS [Email], 
            [Extent7].[Name] AS [Name], 
            [Extent7].[PersonID] AS [PersonID1], 
            CAST(NULL AS int) AS [C7], 
            CAST(NULL AS varchar(1)) AS [C8], 
            CAST(NULL AS varchar(1)) AS [C9], 
            CAST(NULL AS int) AS [C10]
            FROM   [dbo].[SupplierPerson] AS [Extent5]
            INNER JOIN [dbo].[Person] AS [Extent6] ON [Extent6].[ID] = [Extent5].[PersonID]
            INNER JOIN [dbo].[EmailAddress] AS [Extent7] ON [Extent6].[ID] = [Extent7].[PersonID]
            WHERE [Extent1].[ID] = [Extent5].[SupplierID]) AS [UnionAll1]
    UNION ALL
        SELECT 
        3 AS [C1], 
        [Extent8].[PersonID] AS [PersonID], 
        [Extent8].[SupplierID] AS [SupplierID], 
        [Extent8].[SupplierID] AS [SupplierID1], 
        [Extent9].[ID] AS [ID], 
        [Extent9].[Title] AS [Title], 
        [Extent9].[FirstName] AS [FirstName], 
        [Extent9].[Initials] AS [Initials], 
        [Extent9].[LastName] AS [LastName], 
        [Extent9].[Position] AS [Position], 
        [Extent9].[DepartmentID] AS [DepartmentID], 
        CAST(NULL AS int) AS [C2], 
        CAST(NULL AS varchar(1)) AS [C3], 
        CAST(NULL AS varchar(1)) AS [C4], 
        CAST(NULL AS int) AS [C5], 
        CAST(NULL AS int) AS [C6], 
        CAST(NULL AS int) AS [C7], 
        CAST(NULL AS varchar(1)) AS [C8], 
        CAST(NULL AS varchar(1)) AS [C9], 
        CAST(NULL AS int) AS [C10], 
        [Extent10].[ID] AS [ID1], 
        [Extent10].[Url] AS [Url], 
        [Extent10].[Name] AS [Name], 
        [Extent10].[PersonID] AS [PersonID1]
        FROM   [dbo].[SupplierPerson] AS [Extent8]
        INNER JOIN [dbo].[Person] AS [Extent9] ON [Extent9].[ID] = [Extent8].[PersonID]
        INNER JOIN [dbo].[WebResource] AS [Extent10] ON [Extent9].[ID] = [Extent10].[PersonID]
        WHERE [Extent1].[ID] = [Extent8].[SupplierID]) AS [UnionAll2]
)  AS [Project5]
ORDER BY [Project5].[ID] ASC, [Project5].[C25] ASC, [Project5].[C2] ASC, [Project5].[C3] ASC, [Project5].[C5] ASC, [Project5].[C1] ASC 
```

它使用人员填充供应商，而不是电话号码、电子邮件地址或 WebResources。

在 SQL Management Studio 中执行时，我得到不完整的记录集：

![SQL 结果截图](../Images/40ef46fc7161495129ada3d101bd08f8.png)

显然， .Include() 由于我对其功能的误解而无法正常工作。

我真的很想避免单独调用 People 模式。我怎样才能让它生成有用的 SQL？

# .net - 如何让我的 WCF 客户端加密我的请求的 SOAP 正文？

> ID：10831264
> 
> 赞同：2
> 
> 时间：2012-05-31T09:53:09.047
> 
> 标签：.net, soap, wcf-client, ws-security, public-key-encryption

如何对我的 WCF 客户端服务调用进行签名和加密（来自规范：所有消息都应根据 WS-Security X.509 令牌配置文件进行签名和加密。可以在[此处](http://www.oasis-open.org/committees/download.php/16785/wss-v1.1-specos-%20x509TokenProfile.pdf)找到规范）。

我必须使用 SOAP 1.1 和 WS-Security，该服务是由第 3 方提供的，我很确定他们是使用 Java (IBM DataPower) 编写的（反正不是 WCf）。

我尝试了以下方法，但我认为这是提出错误问题的情况，因为我读过的大部分内容都说客户端不会决定加密什么，这是由服务保护级别（SignAndEncrypt）定义的。我还看到了对我应该用来加密的 X509SecurityToken 的引用，但是我认为这是较旧的 .net。

无论如何，这就是我到目前为止所拥有的：

```
' Create the binding.
Dim myBinding As New BasicHttpBinding() ' FOR SOAP 1.1
myBinding.Security.Mode = BasicHttpSecurityMode.TransportWithMessageCredential
myBinding.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.Certificate
myBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Certificate

' Create the endpoint address. 
Dim ea As New EndpointAddress("https://removed")

' Create the client. 
Dim starClientProxy As New wcfStarServiceProxy.starTransportPortTypesClient(myBinding, ea)

' Specify a certificate to use for authenticating the client.
starClientProxy.ClientCredentials.ClientCertificate.SetCertificate(StoreLocation.CurrentUser, StoreName.My, X509FindType.FindBySubjectName, "removed")

'Cert used for encryption
starClientProxy.ClientCredentials.ServiceCertificate.SetDefaultCertificate(StoreLocation.CurrentUser, StoreName.AddressBook, X509FindType.FindBySubjectName, "removed") 
```

所以现在它应该自动加密它？我找不到任何需要设置的东西

```
'call the service    
Dim response As wcfStarServiceProxy.AcknowledgeRepairOrderPayload = starClientProxy.ProcessMessage(payload) 
```

所以，我认为我已经成功签署了请求，但是，正文没有加密。如何加密正文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:21:10.430

我创建了一个自定义绑定来实现 2 级安全性 - 证书和用户名密码。我是这样做的（代码摘录）：

```
 CustomBinding customBinding = new CustomBinding();
        // ...
        HttpsTransportBindingElement httpsBindingElement = new HttpsTransportBindingElement();
        httpsBindingElement.AllowCookies = false;
        httpsBindingElement.BypassProxyOnLocal = false;
        httpsBindingElement.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;
        httpsBindingElement.MaxBufferPoolSize = 20480000;
        httpsBindingElement.MaxBufferSize = 20480000;
        httpsBindingElement.MaxReceivedMessageSize = 20480000;
        httpsBindingElement.RequireClientCertificate = true;
        httpsBindingElement.UseDefaultWebProxy = true;
        TransportSecurityBindingElement transportSecurityElement = new TransportSecurityBindingElement();
        transportSecurityElement.EndpointSupportingTokenParameters.SignedEncrypted.Add(new UserNameSecurityTokenParameters());
        transportSecurityElement.EndpointSupportingTokenParameters.SetKeyDerivation(false);
        // ...
        customBinding.Elements.Add(transportSecurityElement);
        customBinding.Elements.Add(httpsBindingElement); 
```

这样，客户端使用用户名和密码对消息进行签名和加密，但是您可以修改此示例并完成您需要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:07:59.560

@Dejan 引导我回答：

```
Private Function GetCustomBinding2() As Channels.Binding

    Dim httpsBindingElement As New HttpsTransportBindingElement()
    httpsBindingElement.AllowCookies = False
    httpsBindingElement.BypassProxyOnLocal = False
    httpsBindingElement.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard
    httpsBindingElement.MaxBufferPoolSize = 524288
    httpsBindingElement.MaxBufferSize = 65536
    httpsBindingElement.MaxReceivedMessageSize = 65536
    httpsBindingElement.RequireClientCertificate = True
    httpsBindingElement.UseDefaultWebProxy = True

    Dim asbe As New Channels.AsymmetricSecurityBindingElement
    asbe.MessageSecurityVersion = MessageSecurityVersion.WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11
    asbe.InitiatorTokenParameters = New ServiceModel.Security.Tokens.X509SecurityTokenParameters
    asbe.RecipientTokenParameters = New ServiceModel.Security.Tokens.X509SecurityTokenParameters
    asbe.SecurityHeaderLayout = SecurityHeaderLayout.Strict
    asbe.DefaultAlgorithmSuite = Security.SecurityAlgorithmSuite.Basic128Sha256
    asbe.IncludeTimestamp = True
    asbe.SetKeyDerivation(False)
    'asbe.OnlySignEntireHeadersAndBody = True

    'asbe.EndpointSupportingTokenParameters.SignedEncrypted.Add(New ServiceModel.Security.Tokens.X509SecurityTokenParameters)
    'asbe.EndpointSupportingTokenParameters.SetKeyDerivation(False)

    Dim myBinding As New CustomBinding

    myBinding.Elements.Add(asbe)

    myBinding.Elements.Add(New TextMessageEncodingBindingElement(MessageVersion.Soap11, System.Text.Encoding.UTF8))
    'myBinding3.Elements.Add(New HttpsTransportBindingElement())
    myBinding.Elements.Add(httpsBindingElement)

    Return myBinding
End Function 
```

# asp.net - c#中委托的简单应用上手

> ID：10831265
> 
> 赞同：0
> 
> 时间：2012-05-31T09:53:19.967
> 
> 标签：asp.net, delegates

我正在尝试从这篇文章 [http://msdn.microsoft.com/en-us/library/aa288459(v=vs.71).aspx中学习 C# 中的代表](http://msdn.microsoft.com/en-us/library/aa288459(v=vs.71).aspx)

我能够稍微理解代码，但我无法理解开发人员在哪里以及为什么要使用委托。有人可以提供一个简单的场景来帮助我从代表开始吗？

**更新** 我到处读到这条语句，“然后可以将委托对象传递给可以调用引用方法的代码，而不必在编译时知道将调用哪个方法。”

但是为什么我希望编译器不知道我传递的函数呢？我可以在这里闻到抽象的味道，但有什么用？需要任何实时场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:05:25.730

看，在 Windows 窗体中，有按钮、图像、文本框等类......它们都有事件处理程序，如 button.click、textbox.texchange ......它们本身就是委托。当您想在按钮单击时执行某些操作时，您编写的函数是 void 并且有两个参数：**对象**类型和**EventArgs**。编写该按钮类的人不知道单击按钮时该做什么，但给了您委托：

```
public delegate EventHandler Click; 
```

您定义的方法在哪里，例如：

```
public void mymethod(object s, EventArgs e) 
```

或者每个方法都是无效的并且具有该参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:11:42.960

使用委托的一个很好的例子是回调。假设您有一个类*DbSearcher*。该类具有方法*Search(string q)*，当您调用此方法时，它需要 1 分钟才能返回。您希望最终显示搜索结果，但又不想让用户等待它们出现而无法再做任何事情。您所做的是将您的方法更改为例如*Search(string q, Action displayResults)*并在单独的线程中触发它。*这里的displayResults*是一个委托，一旦从数据库中检索到搜索结果，您将在 Search 方法中调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:13:09.520

您可以在网上找到很多示例和代码片段。这是我的示例，假设您的用户将在下面决定他/她将要执行的操作，

1.  添加两个数字
2.  减去两个数字
3.  多个两个数字
4.  将两个数字相除。

但是您有一种通用方法来执行所有这些操作

```
Operation(some delgate method)
{
   // do some operation
} 
```

u 您可以在运行时根据用户选择传递委托。

这只是一个例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:15:29.360

委托基本上是对方法的引用。

例如，您可以使用不同的方法来更改字符串：

```
public static string ChangeOne(string s) {
  return s.TrimStart();
}

public static string ChangeTwo(string s) {
  return s.TrimEnd();
} 
```

根据某些标准，您可以在它们之间进行选择，并将选择放在委托中：

```
Func<string, string> change;
if (DateTime.Today.DayOfWeek == DayOfWeek.Sunday) {
  change = ChangeOne;
} else {
  change = ChangeTwo;
} 
```

然后你可以使用委托只是一个常规方法。使用它的代码不必知道该方法的作用或原因：

```
string x = "  asdf  ";
x = change(x); 
```

* * *

例如，委托广泛用于泛型集合，其中库方法不必了解集合中的对象的任何信息。您只需为它提供一个委托给一个挑选相关信息的方法。

这里的`Where`方法对列表中的对象一无所知，它只获得一个方法的委托，该方法确定一个对象是否应该包含在结果中：

```
IEnumerable<obj> older = listOfObj.Where(o => o.Age >= 18); 
```

# php - 如何处理 $_GET 中的日文字符

> ID：10831268
> 
> 赞同：-1
> 
> 时间：2012-05-31T09:53:28.213
> 
> 标签：php, encoding, utf-8, get

我愿意

```
http://localhost/api/test2.php?id=jr-東北本線-荒川橋梁__35.79_139.72 
```

然后我做

```
$data=$_GET['id']; // Zend says that $data is jr-????-????__35.79_139.72
$encoding = mb_detect_encoding ($data); // $encoding is ASCII
$data= mb_convert_encoding($data,'utf-8'); //$data is still jr-????-????__35.79_139.72
$encoding2 = mb_detect_encoding ($data); // $encoding is still ASCII 
```

问题是我要$data是jr-东北本线-荒川桥梁__35.79_139.72

所以我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:14:44.630

如果 URL 数据（查询部分）的编码实际上是 UTF-8 编码的，则您根本不需要执行任何操作。由于它是二进制安全字符串，PHP 支持 UTF-8，然后开箱即用。

因此，您最好不要仅仅为了获得一些乐趣而进行任何转换（失败会浪费很多时间）。

# c# - 如何访问我的 aspx 页面上的 C# 字符串？

> ID：10831272
> 
> 赞同：0
> 
> 时间：2012-05-31T09:53:43.667
> 
> 标签：c#, asp.net, string

我已经在代码隐藏上声明了一个字符串，如下所示：

```
String myString = "Hi SO!"; 
```

然后如何在我的 aspx 页面上打印它？

`<%= myString %>`似乎没有工作。

**CS0103：当前上下文中不存在名称“myString”**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T09:56:04.933

这可能取决于您声明字符串的位置。

确保你没有在方法中声明你的字符串，字符串应该是类中的全局变量

还要确保字符串是`protected`或`public`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:56:23.783

确保您的字符串是**受保护**的或**公开**的，以便后代类可以看到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:56:42.510

[访问修饰符](http://msdn.microsoft.com/en-us/library/wxh6fsc7%28v=vs.100%29.aspx)至少需要是[`protected`](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.80%29.aspx).

```
protected String myString = "Hi SO!"; 
```

背后的原因是每个`.aspx`页面都继承自代码隐藏类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-20T17:30:56.940

我发现执行此操作的最简单方法是在页面后面的代码中创建字符串，然后在 aspx 页面上添加标签。在页面后面的代码中，您需要编写如下代码：

```
string myString = "some value";
label1.Text = myString; 
```

确保这是在页面背后代码的 Page_Load 事件中，具体取决于您要执行的操作。就我而言，我希望在页面加载时在运行时调用该字符串。

# jquery - Jquery遍历类，计算sting长度，如果短于X做某事

> ID：10831274
> 
> 赞同：1
> 
> 时间：2012-05-31T09:53:48.683
> 
> 标签：jquery, each

我有一个带有 x 个类实例的站点（它们是通过 php 动态加载的）。在类的每个实例中都有不同数量的字符，我希望所有少于 110 个字符的类实例都比其他实例更窄。

我已经做到了这一点，它与类的一个实例一起工作，但是当加载两个类时，它会计算类的所有实例的总长度。我已经研究了 Jquery 的 .each() ，但我似乎无法正确使用语法。

jQuery

```
if ($(".quotecontent").text().length < 110) {
        $(".quote").css("width", 500);
        //alert($(".quotecontent").text().length);
    } 
```

HTML

```
<div class="quote">
<div class="quotestart"></div>
<div class="quotecontent"><p>We have a new toy!</p>
<div class="author">- Fernando Alonso</div></div>
<div class="quoteend"></div>
</div>

<div class="quote">
<div class="quotestart"></div>
<div class="quotecontent"><p>Fight to fly, fly to fight, fight to win.</p>
<div class="author">- Motto of the U.S. Navy Fighter Weapons School, TOPGUN</div></div>
<div class="quoteend"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:55:38.493

**演示** [http://jsfiddle.net/B3Uwj/11/](http://jsfiddle.net/B3Uwj/11/)

如果我错过了什么，请告诉我。

希望这可以帮助。

**代码**

```
$(".quotecontent").each(function() {

    if ($(this).text().length < 110) {
        $(this).parent(".quote").css("width", 500);
        //alert($(".quotecontent").text().length);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:00:41.760

```
$(".quotecontent").filter(function() {
    return $(this).text().length < 110;
}).parent('.quote').css("width", 500); 
```

[​​​​​​​​​​​​​​​​​​​​​​​FIDDLE](http://jsfiddle.net/adeneo/kh8Hh/)

# java - Java Wicket - 在 AJAX 之前调用 javascript ( JQuery )

> ID：10831275
> 
> 赞同：0
> 
> 时间：2012-05-31T09:53:51.840
> 
> 标签：java, javascript, ajax, wicket

我得到了我要解决的问题：我得到了一个使用 Wicket ( 1.5 ) 创建的 ListView ，其中包含很多元素和一个滚动条。当有新项目可用时，系统会询问用户是否愿意通过 AjaxLink 支持的消息刷新列表：

```
public void onClick(AjaxRequestTarget ajaxTarget) {
  /* do something ... */                    
  ajaxTarget.addComponent(_list);
} 
```

因此，单击列表会重新加载，并且滚动位置会重置为零。有什么方法可以在列表重新加载保存滚动位置之前调用 JavaScript？

（我知道如何获取/保存滚动位置（ .scrollTop() ），我只是不知道如何在 AJAX 之前调用函数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:36:17.767

看看在`AjaxCallDecorator`ajax 调用之前和之后装饰脚本的类。

你可以看看我的答案：[https ://stackoverflow.com/a/10499868/722952](https://stackoverflow.com/a/10499868/722952)

# magento - MAGENTO 如何查看根类别中的所有产品，包括其子类别中的产品

> ID：10831278
> 
> 赞同：0
> 
> 时间：2012-05-31T09:54:13.330
> 
> 标签：magento, categories, product

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:10:19.163

实际上，这与类别设置无关。您描述的方法在这种情况下没有帮助。这取决于产品设置。当您在类别部分（左侧边栏）分配产品时，您需要勾选父类别及其子类别以显示在管理类别的类别产品中。然后，您可以通过 Is Anchor 控制前端的外观。

# actionscript-3 - Flex：用户在数据网格列中输入数字后立即触发哪个事件？

> ID：10831284
> 
> 赞同：1
> 
> 时间：2012-05-31T09:54:35.123
> 
> 标签：actionscript-3, apache-flex

我有一个数据网格，其中一些列是可编辑的。我有 3 列 available_quantity、sales_quantity 和 return_quantity，其中 sales_quantity 和 return_quantity 是可编辑的。我想要的是一旦用户输入 sales_quantity 和 return_quantity 并且如果总数大于 available_quantity 它应该立即显示警报。我写了keyup事件来处理这个..

```
protected function dataGrid_keyUpHandler(event:KeyboardEvent):void
        {
            // TODO Auto-generated method stub
            var avail_qty:int=parseInt(dataGrid.selectedItem.available_qty);
            var return_qty:int=parseInt(dataGrid.selectedItem.return_qty);
            var sales_qty:int=parseInt(dataGrid.selectedItem.sales_qty);
            var total:int=return_qty + sales_qty;
            if(total>avail_qty)
             Alert.show("hi");
        } 
```

但问题是当我第一次编辑值 sales_quantity 和 return_quantity 时，即使总数大于 available_quantity，它也不会向我显示警报。如果我再次单击任一列并按退格键，它会在警报中显示“嗨”。应该使用哪个事件来处理这个问题。按键事件在数据网格中不可用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:21:59.713

DataGrid 的帮助页面怎么样？

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/DataGrid.html#eventSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/DataGrid.html#eventSummary) ???

我会听这个事件“itemEditEnd”:)

* * *

**更新 - 星火数据网格**

请参阅 flex 手册中的以下事件描述。

```
gridItemEditorSessionCancel
Dispatched after the item editor has been closed without saving its data.   

gridItemEditorSessionSave
Dispatched after the data in item editor has been saved into the data provider and the editor has been closed.  

gridItemEditorSessionStart
Dispatched immediately after an item editor has been opened.    

gridItemEditorSessionStarting
Dispatched when a new item editor session has been requested. 
```

# windows - 使用 Copy in batch script 复制文件仅将第一个文件复制到目标文件夹

> ID：10831290
> 
> 赞同：0
> 
> 时间：2012-05-31T09:55:03.603
> 
> 标签：windows, windows-scripting

这是我的复制命令：

```
set POLL="C:\Documents and Settings\"
copy Register.class+Ca.class+pack %POLL% /-Y 
```

**pack**是这里的一个文件夹。
上述复制命令的结果是只有 Register.class 被复制到目标文件夹。我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:25:12.650

为复制命令命名多个源文件会将文件复制到一个文件中。

```
copy fileone + filetwo filethree 
```

将导致 filethree 包含 fileone 和 filetwo 的内容。您不能使用 copy 将多个文件复制到不同的位置。

然而，使用循环或 xcopy-command 很容易做到这一点：

```
set POLL="C:\Documents and Settings\"
FOR %%F IN (Register.class Ca.class) DO copy %%F %POLL% /-Y
xcopy pack %POLL% /-Y 
```

# indexing - UpdateDocument 后的 Lucene 网络 IndexWriter 即使使用优化也会使索引的大小翻倍？

> ID：10831309
> 
> 赞同：3
> 
> 时间：2012-05-31T09:56:17.873
> 
> 标签：indexing, lucene.net, lucene

我正在以正常方式创建索引：

```
var directory = FSDirectory.Open(...);
var analyzer = ...

var indexWriter = new IndexWriter(directory, analyzer, true, IndexWriter.MaxFieldLength.UNLIMITED);
indexWriter.SetWriteLockTimeout(30000);

indexWriter.AddDocument(doc1);
indexWriter.AddDocument(doc2);
indexWriter.AddDocument(...);

indexWriter.Commit();
indexWriter.Optimize();
indexWriter.Close(); 
```

这将创建一个 5.8mb 的索引

现在我需要准确地更新 2 个文档……每个文档中添加 1 个单词……所以索引的大小应该增加很小的量或根本不增加：

```
var indexWriter = new IndexWriter(directory, analyzer, false, IndexWriter.MaxFieldLength.UNLIMITED);
indexWriter.SetWriteLockTimeout(30000);

indexWriter.UpdateDocument(doc1);
indexWriter.UpdateDocument(doc2);

indexWriter.Commit();
**indexWriter.Optimize();**
indexWriter.Close(); 
```

此操作将索引的大小翻倍，使其保留**索引大小为 5.8mb 的****_0.cfs**文件……并在 _2.xxx 文件中创建一个相同大小的全新索引……所以对于一个两个文件一个词的变化，它加倍！

如果我重复该操作，它也会继续这样做……所以它只会永远加倍。

我的想法是**优化**调用应该优化它而不是导致这样的事情？

如何阻止它使我的索引翻倍？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T14:15:40.970

这通常是由于在优化时在索引上打开了 IndexReaders/IndexSearchers 造成的。IndexReaders 在打开时会看到索引的快照，因此它们会锁定文件，并且 IndexWriter 在关闭时无法删除它们。

在 optmize 之后，您应该通过重新创建 IndexReaders/IndexSearchers 或使用 IndexReader 上的 Reopen() 方法来刷新它们。刷新 IndexReaders/IndexSearchers 后，如果您创建一个 IndexWriter 并立即关闭它，您应该会看到文件消失。

话虽如此，如果您决定优化实时索引（只有在删除大量文档时才应该这样做），您应该始终期望索引暂时增长 3 倍它的“正常”大小。

# javascript - JavaScript 中通过字符串调用函数

> ID：10831311
> 
> 赞同：3
> 
> 时间：2012-05-31T09:56:29.373
> 
> 标签：javascript, function

好的，我有这个小代码

[http://jsfiddle.net/laupkram/yJtyD/](http://jsfiddle.net/laupkram/yJtyD/)

现在它并没有真正起作用。我一直在关注 SO 中所有现有的问题和答案，但我无法弥补。

我真的很想在不使用 eval() 的情况下调用函数

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:59:49.400

你有一个错字（`imafunc/iamfunc`），纠正它&你可以（假设全局范围）；

```
var fn = window["iamfunc"];

if (typeof fn === 'function') {
    fn("hello world");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:01:08.953

您不能直接执行字符串。如果字符串指定的函数是全局定义的，您可以通过以下方式访问该函数

```
window[ fn ](); 
```

因此，在您的情况下，这会将您的代码转换为以下内容：

```
var fn = "imafunc";
if (typeof window[ fn ] === 'function') {
     window[ fn ]("hello world");
}

function imafunc(str) {
    alert(str);
} 
```

如果该函数仅在另一个函数的范围内定义，则必须求助于`eval`，这有一些性能劣势并且通常被认为是不好的做法（[例如，参见 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval#Don%27t_use_eval!)）。

PS：这在 jsFiddle 中不起作用，因为他们使用沙盒，这就像`imafunc()`在另一个函数中定义一样。您必须更改包装以使用“无包装”。

# objective-c - 在后台更新 UITableView 的数据会中断动画

> ID：10831313
> 
> 赞同：2
> 
> 时间：2012-05-31T09:56:31.947
> 
> 标签：objective-c, ios, uitableview

我有一个 UITableViewController，它应该在后台获取数据，然后刷新 UITableView。但是，当我在后台运行 update 方法时，它会破坏整个应用程序中的所有过渡动画（将视图控制器推到导航堆栈时的幻灯片）。奇怪的是，完全相同的模型在与这个非常相似的其他类中工作。这是我用于后台更新的调用：

```
[self performSelectorInBackground:@selector(updateData) withObject:nil]; 
```

然而，这是可行的，但当然不是在后台完成的：

```
[self updateData]; 
```

最后运行的方法：

```
- (void)updateData{
    updating = YES;
    [progress show:YES];
    dataSource = [[NetworkHandler sharedInstance:self] getRaces];
    [progress hide:YES];
    updating = NO;
    [self.tableView reloadData];
} 
```

更新标志绝不是对信号量的尝试，只是一种确保在用户在视图之间来回切换时视图不会被更新两次的方法。;)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T09:58:42.900

`[self.tableView reloadData];`看起来它可能会导致某种线程问题。UI 的所有更新都应该在主线程中完成。所以这应该工作：

`[self.tableView performSelectorOnMainThread:@selector(reloadData)];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T14:25:47.517

截至 2015 年 2 月，上述答案中提到的方法已被弃用，取而代之的是：

```
[self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO]; 
```

# c# - DTO。属性或字段？

> ID：10831314
> 
> 赞同：15
> 
> 时间：2012-05-31T09:56:32.463
> 
> 标签：c#, wcf, soa, dto

我需要创建一些 DTO 类来跨 WCF 传输我们的业务对象。

由于这些只是没有功能的数据包，有什么理由我不能只使用字段，还是有充分的理由将它们作为属性正确公开？

```
//fields
[DataContract]
class CustomerDTO
{
    [DataMember] public int     Id;
    [DataMember] public string  Name;
}

//or properties?
[DataContract]
class CustomerDTO
{
    [DataMember] public int    Id               { get; set; }
    [DataMember] public string Name             { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2020-02-25T20:06:53.337

如果我可以摆脱它，我最喜欢具有只读字段的不可变 DTO：

```
public class CustomerDTO
{
    public CustomerDTO(int id, string name)
    {
        Id = id;
        Name = name;
    }

    public readonly int     Id;
    public readonly string  Name;

    // Override Equals and GetHashCode as well...
} 
```

不可变记录有很多优点，例如结构相等，这使得自动化测试断言更容易编写。它还[免除了编写和维护单独的测试数据构建器的需要](https://blog.ploeh.dk/2017/09/11/test-data-without-builders)。

不过，这取决于序列化程序。JSON.NET 可以处理不可变记录，但许多其他序列化程序不能。

对于那些处理公共字段的人，我更喜欢字段而不是属性，仅仅是因为它更诚实；[自动实现的读/写属性不提供封装](https://blog.ploeh.dk/2012/11/27/Encapsulationofproperties)。

一些序列化程序坚持使用公共属性，并且不序列化字段。如果是这样的话，你就必须顺其自然。

老实说，考虑到我为此付出了多少思考，这并不是让我夜不能寐的事情，因为最终，[在边界上，应用程序不是面向对象的](https://blog.ploeh.dk/2011/05/31/AttheBoundaries,ApplicationsareNotObject-Oriented)。因此，OOD 的规则并不真正适用于 DTO。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T10:02:49.173

> 由于这些只是没有功能的数据包，有什么理由我不能只使用字段

这里没有反对公共领域的强烈论据。但是请意识到这只是因为 DTO 内部没有逻辑（行为），因此封装的正常参数不成立。

我仍然更喜欢属性，但在这里它们并不是必需的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T10:34:10.823

你可以使用任何一个。由于它不会影响性能，因此如果遇到一些不适用于公共字段的序列化框架或类似框架，则使用属性会更安全。

请注意，WCF 代理生成将在客户端使用*公共属性*及其支持的私有字段创建这些 DTO，*即使您*在服务端使用公共字段也是如此。如果您不希望这样，您需要在服务和客户端之间共享一个 DTO 库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T10:09:06.960

该`DataMember`属性将与公共字段和属性一起使用，因此两者都是可能的。但是，我建议坚持使用属性。

特别是，如果您使用 StyleCop，那么您将违反[规则 SA1401](http://stylecop.soyuz5.com/SA1401.html)。

此规则存在的原因并不真正适用于您的情况，但如果您在持续集成服务器上运行 StyleCop 验证作为构建的一部分，它仍然是一个维护问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-02T02:50:04.393

这是我没有看到其他人提到的属性相对于字段的两个优点。

1.  语法中的摩擦正确匹配功能

我认为默认行为应该是更安全的选择。对于字段，默认行为允许可变性，这是更危险的选择。`readonly`必须添加关键字以使字段不可变（在构造函数之外）。相反，自动属性的默认状态是不可变的；`set;`必须添加语法才能使属性可变（在构造函数之外）。

2.  [Visual Studio 的 Code Lens](https://docs.microsoft.com/en-us/visualstudio/ide/find-code-changes-and-other-history-with-codelens?view=vs-2019#find-references-to-your-code)中给出的引用计数

与字段不同，在 Visual Studio 中查看属性有一个“代码镜头”，其中包括其引用计数。由于这些附加信息，我能够比字段更快地理解和重构属性。当然，可以使用 Shift+F12 在 Visual Studio 中搜索对字段和属性等内容的引用，但这是一个需要时间的额外步骤。此外，在极少数情况下，一些项目包括多个目标。这使得 Shift+F12 搜索结果更难使用，因为对每个目标都执行了搜索。在合同中，属性的代码 Len 中给出的引用计数与项目目标的数量无关。

### 结论

不过，为了直接回答这个问题，我更喜欢使用可变属性（并且没有显式构造函数），以确保我将在序列化库中使用最快乐的路径（[@ErenErsönmez 的答案中](https://stackoverflow.com/questions/10831314/dtos-properties-or-fields/10831891#10831891)提到了这一点）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T10:00:10.870

我永远不会直接公开字段，大多数公司在他们的标准中都禁止这样做。实际上，您完全抛弃了封装。DTO，作为更复杂事物的贫乏表示，是一个奇怪的情况，因为它们的属性几乎打破了封装。就个人而言，我会使用这些属性，因为这就是它们的用途。如果您需要，它还可以让您实现“脏”功能等，如果您直接调整字段，这并不容易。

# android - 一个选项卡中的多个活动

> ID：10831315
> 
> 赞同：0
> 
> 时间：2012-05-31T09:56:32.760
> 
> 标签：android

我想在一个选项卡中浏览多个活动。我看到的只是 ActivityGroup 的解决方案，但它已被弃用。如何用片段做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:24:47.907

ViewFlipper 是您情况下的最佳选择

花时间阅读[这篇](http://www.codeproject.com/Articles/69008/Android-ViewFlipper-Touch-Animation-like-News-Weat)文章。

在 ViewFlipper 中，您可以拥有多个页面，并且可以使用 ShowNext 和 ShowPrevious 方法在它们之间导航。

希望这可以帮助

# javascript - 网站在 Windows XP 上的 IE 中挂起

> ID：10831316
> 
> 赞同：0
> 
> 时间：2012-05-31T09:56:33.530
> 
> 标签：javascript, internet-explorer-8, internet-explorer-7, windows-xp

我有一个电子商务网站准备上线，但在 Windows XP 上的 IE 7/8 上遇到问题

该站点在 Windows 7 上的 IE 中加载良好，但在 XP 上，每个页面加载我都会在状态栏中看到“完成”文本，并且浏览器只会冻结 7 - 10 秒

我已经检查了我的 javascript 并确保所有 DOM 操作都在一个文档就绪函数中完成，并且我已经通过 W3C 验证器将该站点放入其中，它只是在抱怨 URL 中的几个未编码的 & 符号

以前有人经历过吗？你设法解决了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:47:28.717

对，在花了很长时间调试之后，我发现fancybox 1.3.4 是导致崩溃/挂起的原因！特别是这个 CSS 块：

```
.fancybox-ie #fancybox-bg-n { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_n.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-ne { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_ne.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-e { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_e.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-se { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_se.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-s { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_s.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-sw { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_sw.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-w { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_w.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-nw { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_nw.png', sizingMethod='scale'); } 
```

当这个 CSS 块被注释掉时，页面加载没有崩溃。

不知道为什么会导致它发生，但嘿，我很高兴它已修复！

# php - PHP XML 输出连接

> ID：10831318
> 
> 赞同：0
> 
> 时间：2012-05-31T09:56:42.183
> 
> 标签：php, xml

我正在使用 XPath 查询 xml 文档，然后将找到的节点复制到单独的结果 xml 文件中，但是我遇到的问题是每次将新节点添加到结果文件时都会添加顶部的 XML 声明。

这是我的php代码：

```
$allEventsForVenue = $xPath->query(
            "/Ticket/EventsPoints/Event[contains(PerformanceName,'$searchParam')]"
    );

    foreach ($allEventsForVenue as $event) {

         $dstDom = new DOMDocument('1.0', 'utf-8');
         $dstDom->appendChild($dstDom->createElement('EventsPoints'));
         $dstDom->documentElement->appendChild($dstDom->importNode($event, true));
         //echo $dstDom->saveXml();
         $dstDom->formatOutput = true;
         $strxml .= $dstDom->saveXML();
         $handle = fopen("/var/www/html/xml/searchresults$searchID.xml", "w");
         fwrite($handle, $strxml);
         fclose($handle); 
    } 
```

无效的 XML 文件（一个文件中有两个 xml 声明）：

```
->>         <?xml version="1.0" encoding="utf-8"?>
            <EventsPoints>
              <Event ID="17">
                    <PerformanceName>Bressie</PerformanceName>
                    <PresaleTime/>
                    <PriceRange>17 - 17</PriceRange>
                    <VenueID ID="19"/>
                </Event>
            </EventsPoints>
->>         <?xml version="1.0" encoding="utf-8"?>
            <EventsPoints>
              <Event ID="180">
                    <PerformanceName>U2</PerformanceName>
                    <PriceRange>20 - 20</PriceRange>
                    <VenueID ID="198"/>
                </Event>
            </EventsPoints> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:02:38.807

您正在`DOMDocument`循环中创建新实例。你也在每次迭代中写作。这会在每次迭代中创建新的 XML 文档，并将其附加到您的 xml 文件中。您需要做的是，**循环 XML 生成部分**。**不是全部**。

如果你只循环`appendChild`部分，你的问题将得到解决。

```
$dstDom = new DOMDocument('1.0', 'utf-8');
$dstDom->formatOutput = true;    

foreach ($allEventsForVenue as $event) {
     $dstDom->appendChild($dstDom->createElement('EventsPoints'));
     $dstDom->documentElement->appendChild($dstDom->importNode($event, true));
}

file_put_contents("/var/www/html/xml/searchresults$searchID.xml", $dstDom->saveXML()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:02:55.360

`DomDocument`允许您在没有 xml 声明的情况下输出特定节点。

只需在 saveXML 中包含一个节点，例如`saveXML($node)`，节点是一个`XMLNode`类型对象。

使用这种方法，我认为您可以通过直接在字符串中输出所需的节点来绕过整个“创建子 xmldocument/导入节点”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:05:08.347

使用这样的东西

```
enter <?php
 // Continued from example XML above.

 /* Search for <a><b><c> */
  $result = $xml->xpath('/a/b/c');

  while(list( , $node) = each($result)) {
    echo $node->asXML();
 }
?> 
```

# prolog - 如何在 ubuntu 中编译 prolog 代码？

> ID：10831323
> 
> 赞同：3
> 
> 时间：2012-05-31T09:57:07.750
> 
> 标签：prolog

如何在 gprolog 或 swi-prolog 下编译或运行这两个文件？

我有两个文件：

样品.pl：

```
foo ( arg1, arg2 ) :- !, a ( arg1 ). 
```

测试.pl：

```
a(1).
a(2).
a(3).
a(4).
a(5). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T10:00:19.720

You can use the "consult" command to load and compile files.

```
consult(test). 
```

In order to load several files, you need to consult each file in its own command. These commands should do the trick for you.

```
consult(sample).
consult(test). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T15:07:25.133

它只是语法糖，但您也可以使用

```
 ['file.pl']. 
```

这将编译一个 prolog 文件

# objective-c - 如何读取 IBAction 中的按钮标签？

> ID：10831328
> 
> 赞同：4
> 
> 时间：2012-05-31T09:57:39.343
> 
> 标签：objective-c, ibaction

我有按钮：

```
...

UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[rightButton setTitle:annotation.title forState:UIControlStateNormal];
rightButton.tag = myCustomNumber;
[rightButton addTarget:self action:@selector(showDetails:) forControlEvents:UIControlEventTouchUpInside];
... 
```

这是IBAction：

```
..
-(IBAction)showDetails:(id)sender{

    // here I want to NSLOG button tag

}
... 
```

怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T10:03:18.427

只需将您的发件人投射到 UIControl

```
-(IBAction)showDetails:(UIControl *)sender {

    // here I want to NSLOG button tag
    NSLog(@"%d",sender.tag);

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T10:04:15.920

如果总是从 a 调用 showDetails，`UIButton`您可以将方法的名称更改为：

```
- (IBAction)showDetails:(UIButton *)sender {
        NSLog(@"%i", (UIButton *)sender.tag);
} 
```

请记住在接口文件中也执行此更改

但是，如果您使用来自不同 IBAction 元素的 showDetails ，则必须自省并检查 sender 是否为 UIButton：

```
- (IBAction)showDetails:(id)sender {
       if ([sender isKindOfClass:[UIButton class]]
       NSLog(@"%i", (UIButton *)sender.tag);
} 
```

**编辑：**这样做的原因是在您编写代码的方式中，sender 具有动态类型`id`并且它没有任何`tag`属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T10:01:36.030

```
NSLog("%d", (UIButton *)sender.tag); 
```

sender 是一个 UIButton 对象。希望能帮助到你。快乐编码:)

# scala - 蛋糕图案和类型

> ID：10831329
> 
> 赞同：5
> 
> 时间：2012-05-31T09:57:43.150
> 
> 标签：scala, types, cake-pattern

`def someA`（in `trait B`）如何使用`trait A`与 in 相同`C#MyType`的`B`？（然后`A#MyType =:= B#MyType`）

```
trait C {
  type MyType
}

trait A {
  self: C =>
  def doSomething(s: MyType) { println(s.toString)}
}

trait B {
  self: C =>  

  def someA: A
  def myType: MyType

  def action = someA.doSomething(myType)
}

// Mix part

case class Ahoy(value: String)

trait ConcreteC extends C {  
  type MyType = Ahoy
}

class PieceOfCake extends B with ConcreteC {
  val someA = new A with ConcreteC
  val myType = Ahoy("MyType")

} 
```

它不编译：类型不匹配；

```
[error]  found   : B.this.MyType
[error]  required: _1.MyType where val _1: A
[error]   def action = someA.doSomething(myType)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:29:05.020

您可以声明`doSomething`并`myType`使用 , 的路径独立版本`MyType`：`SomeType#MyType`

```
trait SomeType {
  type MyType
}

trait A {
  self: SomeType =>
  def doSomething(s: SomeType#MyType) { println(s.toString)}
}

trait B {
  self: SomeType =>  

  def someA: A
  def myType: SomeType#MyType

  def action = someA.doSomething(myType)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:04:05.360

我很确定你不能这样做，因为路径无关类型就是这样 - 如果 A<>B 则 A#T 与 B#T 完全不同（即 A#T*永远不会*是 =:= B# T)。

话虽这么说，它是安全的，所以你总是可以做类似的事情`someA.doSomething(myType.asInstanceOf[someA#MyType])`。丑陋但有效。

# c# - How to maintain same session in two different sites

> ID：10831334
> 
> 赞同：1
> 
> 时间：2012-05-31T09:57:51.700
> 
> 标签：c#, sql-server, session, cross-domain

let suppose i have two domains

**1\. abc.com
2\. xyz.com**

now the thing i want to do that i have a index page on both sites and there is a image on both index page , but when i click next in `abc.com` and image changes on `abc.com` at the same time i made a session variable in sql server . Now leave `abc.com` and come to `xyz.com` the index page of `xyz.com` automatically gets refresh by ajax function after 2 second , now when page get refresh it will make a request to server and pick the next image name from session which we stored using `abc.com` and by getting the we will show the latest image on `xyz.com` .... Note . both sites are using the same server

can i do this ? . If yes then how ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:03:38.287

您可以使用 SQL Server 作为会话管理器在站点之间共享会话，我按照这些说明进行了操作，效果很好。

这些步骤取自：[在域之间共享 ASP.net 会话](http://code.msdn.microsoft.com/CSASPNETShareSessionBetween-021daa39)

> ASP.NET 应用程序：CSASPNETShareSessionBetweenSubDomains 项目概述
> 
> 概括：
> 
> Session 可以设置为不同的模式（InProc、SqlServer 和 StateServer）。使用 SqlServer/SateServer 模式时，Session 将存储在特定的 SQL Server/Sate Server 中。如果两个 ASP.NET Web 应用程序将同一个 SQL Server 指定为会话服务器，则所有会话都存储在同一个数据库中。总而言之，如果使用 SQL Server Session，则可以在不同的 ASP.NET 应用程序之间共享 Session。由于 ASP.NET 将 Session Id 存储到 cookie 中来指定当前的 Session，所以为了共享 Session，需要在 cookie 中共享 Session Id。
> 
> CSASPNETShareSessionBetweenSubDomains 示例演示了如何配置 SessionState Server，然后创建 SharedSessionModule 模块以实现子域 ASP.NET Web 应用程序之间的共享 Session。
> 
> 两个 ASP.NET Web 应用程序需要在同一个根域中运行（可以使用不同的端口）。脚步：
> 
> 1.  配置 SQL Server 以存储 ASP.NET 会话状态。
>     
>     
>     
>     运行 "C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regsql.exe -S localhost\sqlexpress -E -ssadd" 为 Sql Server Express [1](http://code.msdn.microsoft.com/CSASPNETShareSessionBetween-021daa39)添加会话状态支持。
>     
>     
>     
>     如果您尚未将会话状态添加到 SQL Server，当您将网站配置为使用 SQL Server 模式会话状态时，将抛出 System.Data.SqlClient.SqlException 说“无效的对象名称 'tempdb.dbo.ASPStateTempSessions'”。
>     
>     
> 2.  将 ASP.NET Web 应用程序配置为使用 SQL Server 存储会话并使用特定的解密密钥和验证密钥。
>     
>     
>     
>     将此设置添加到 web.config 文件以使用 SQL Server 会话状态：
>     
>     
>     
>     
>     将此设置添加到 web.config 以使用特定的解密密钥和验证密钥：
>     
>     
>     
>     如果您在 IIS 中托管应用程序，请在可以登录数据库的帐户下运行应用程序池。否则 System.Data.SqlClient.SqlException 将抛出“无法打开登录请求的数据库'ASPState'。登录失败。”
>     
>     
> 3.  编写SharedSessionModule模块实现共享Session的逻辑
>     
>     
>     
>     一个。实现 Init() 方法以设置从 web.config 读取的应用程序 ID。
>     
>     
>     
>     湾。实现 PostRequestHandlerExecute 事件以将 Session Id 存储到具有相同域和根路径的 cookie。
>     
>     
> 4.  将 ASP.NET Web 应用程序配置为使用 SharedSessionModule 模块。将此配置添加到 web.config 以使用 SharedSessionModule 模块：
>     
>     
>     
>     如果您在除 localhost 之外的自己的域中运行应用程序，
>     请不要忘记在发布后更改 RootDomain 的值。
>     
>     
> 5.  运行和测试 添加一个新的网页。湾。添加两个按钮（用于刷新页面和设置会话）和一个用于显示会话值的标签。C。在 Page_PreRender() 方法上，读取 Session 并将其显示在 Label 中。在按钮单击事件上，将值设置为会话。d。使用与网站 1 相同的配置创建一个新网站，但为会话 e 设置不同的值。现在在两个选项卡中打开两个站点。现在，如果您在站点 1 中设置会话值，您可以在站点 2 中检索相同的值。所以他们使用相同的会话。
>     
>     
> 
> [1](http://code.msdn.microsoft.com/CSASPNETShareSessionBetween-021daa39)从 Sql Server 中删除会话状态。运行“C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regsql.exe -S localhost\sqlexpress -E -ssremove”以从 Sql Server 中删除会话状态支持。

# iphone - 如何找到视图调整大小的位置/原因？

> ID：10831339
> 
> 赞同：1
> 
> 时间：2012-05-31T09:58:05.693
> 
> 标签：iphone, ios, animation, uiview, size

我有一个视图（实际上是一个 UIControl）作为我的 UIViewController 的一部分。这个视图是在 IB 中设计的，然后在代码中，基于一些用户的操作，我正在更改视图的框架。整个事情都发生在 CATransition 内部。代码如下所示：

```
CATransition *anim = [CATransition animation];
anim.type = kCATransitionFade;
anim.duration = 0.5;
anim.delegate = self;
anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];

[mainPanel.layer addAnimation:anim forKey:@"changeTextTransition"];

float totalHeight = ...; // this is the Y of the frame
float max_width = ...;   // this is the width of the frame
float bh = ...;          // this is the height of the frame

... //some computations to determine the frame for my view

[blockView setFrame:CGRectMake(0, totalHeight, max_width, bh)];

//This is for debugging
CGSize sg = answer1.frame.size;
NSLog(@"width: %f, height: %f", sg.width, sg.height);
//This outputs: width: 260.000000, height: 29.000000 
```

到目前为止一切都很好，在 NSLog 中我看到了正确的宽度和高度值。然而，当视图显示时，它的尺寸发生了变化。然后我添加了相同的调试`animationDidStop`- 并看到不同的结果：

```
- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag
{
    [scroll flashScrollIndicators];
    CGSize sg = answer1.frame.size;
    NSLog(@"width: %f, height: %f", sg.width, sg.height);
    //This outputs: width: 280.000000, height: 49.000000
} 
```

请注意，不知何故，视图的大小发生了变化。我无法理解这可能发生在哪里/为什么/如何发生。还有什么想法可以看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:01:38.037

要查找视图何时调整大小，您可以子类化 uiview 并覆盖以下内容

```
- (void)setFrame:(CGRect)frame
{
    [super setFrame:frame];
} 
```

现在每次视图改变它的大小时都会调用这个函数

# android - Curved buttons and a circle

> ID：10831344
> 
> 赞同：5
> 
> 时间：2012-05-31T09:58:17.497
> 
> 标签：android, button

Hey I was wondering if there is any way to do this without going insane with lil buttons built up to make it but basically what I want to do is make two curved buttons around a circle one, is there any way of doing this?

Hers an example of what I kinda want, sorry for how crude the drawing is.

![Curved buttons](../Images/a0d4179ff2710319eef40c6727f40504.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:05:46.710

回答这个问题有两个部分：如何让按钮看起来像这样，以及触摸您绘制的区域。

对于第一部分，您可以使用 FrameLayout 或相对布局将按钮精确地绘制在您想要的位置，并将自定义图像作为背景（也许对于圆形，您可以制作 ShapeDrawable）。

对于第二部分，它可以很简单：如果圆圈（最大的按钮）在其他两个之上，那么这可以。但我猜每个按钮上的可触摸区域将是一个矩形。

另一种方法是创建一个自定义视图，自己处理触摸事件并基于 X 和 Y，检测哪个部分被触摸

# nsdata - NSData initWithContentsOfURL stuck app running on iphone 4s

> ID：10831345
> 
> 赞同：0
> 
> 时间：2012-05-31T09:58:35.750
> 
> 标签：nsdata

When running on the simulater and on 4G iphone evering works great.

trying to init NSData with a spesific image from url stuck the app when i try to run it on iphone 4S

[[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:

anyone has any idea why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:10:13.290

应该是图的问题。。。

更改图像链接解决了问题

# sql - 为自定义 ChangeTable 创建数据库触发器

> ID：10831348
> 
> 赞同：0
> 
> 时间：2012-05-31T09:58:44.507
> 
> 标签：sql, sql-server-2008, triggers

我正在尝试在 SQL Server 2008 中为`tblCustomer`表创建数据库触发器。`tblChanges`每次在表中插入、更新或删除时，我都需要它向表中添加新行`tblCustomer`。

具体来说，我需要它插入`CustomerId (PK)`已更改的内容、已更改的`dateTime`内容以及更改的类型（插入、更新、删除）。

到目前为止，我已经有了这些方面的一些东西，但无法弄清楚其余的：

```
CREATE TRIGGER change_trigger
AFTER INSERT OR UPDATE OR DELETE
ON tblCustomer

   DECLARE log_action varchar(30)
BEGIN

   IF INSERTING THEN
      log_action := 'I';
   ELSEIF UPDATING THEN
      log_action := 'U';
   ELSEIF DELETEING THEN
      log_action := 'D';
   ELSE
      DBMS_OUTPUT.PUT_LINE('undefined');
   END IF;

   INSERT INTO tblChanges(ChanedPK, ChangedTime, ChangedType) 
   VALUES ... 
```

我不确定上述任何 SQL 是否正确，因为我还没有尝试运行它，而且我对 SQL 的了解有限。任何帮助完成代码和纠正错误将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:07:25.287

尝试以下方式：

```
CREATE TRIGGER change_trigger AFTER INSERT, UPDATE, DELETE
ON tblCustomer
AS
BEGIN
   DECLARE log_action varchar(30)

   IF EXISTS (SELECT * FROM INSERTED) AND NOT EXISTS(SELECT * FROM DELETED)
      SET log_action = 'INSERT'

   IF EXISTS NOT (SELECT * FROM INSERTED) AND EXISTS(SELECT * FROM DELETED)
      SET log_action = 'DELETE'

   IF EXISTS (SELECT * FROM INSERTED) AND EXISTS(SELECT * FROM DELETED)
      SET log_action = 'UPDATE'

   -- Your other code goes here

END 
```

也许您应该首先阅读 SQL Server 中的 T-SQL 和 DML 触发器。MSDN 和许多其他网站提供了关于如何做事的优秀示例。

# http - HTTP window authentication with LDAP using Zend

> ID：10831350
> 
> 赞同：1
> 
> 时间：2012-05-31T09:58:58.927
> 
> 标签：http, zend-framework, authentication, ldap

I need to implement LDAP authentication using zend. But for getting user credential, I need to user HTTP authentication method.

I have tried to User HTTP adapter provided by Zend, but in that, I am directly able to authenticate against file created with username:password. [http://framework.zend.com/manual/1.11/en/zend.auth.adapter.http.html](http://framework.zend.com/manual/1.11/en/zend.auth.adapter.http.html)

But I want to get entered username and password (in HTTP window popup) by user and validate it against LDAP using Zend.

Can anyone help me to get required credential in variable ?

Thanks!

# gtk - Gtk events differences

> ID：10831357
> 
> 赞同：0
> 
> 时间：2012-05-31T09:59:27.683
> 
> 标签：gtk

Can someone tell me the difference of the events in GTK:

```
on_treeview_button_press_event()

on_treeview_key_press_event()

on_treeview_cursor_changed() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T10:04:53.177

“区别？” 它们是不同的事件，即它们是出于不同的原因而产生的。

此外，这些名称令人困惑，因为只有最后一个是 GtkTreeView 小部件的本地名称，前两个是通用 GtkWidget 级别的信号。

该文档指出：

GtkWidget 的[按钮按下事件](http://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-button-press-event)：

> ::button-press-event 信号将在按下按钮（通常来自鼠标）时发出。

GtkWidget 的[按键事件](http://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-key-press-event)：

> ::key-press-event 信号在按键被按下时发出。

GtkTreeView 的[光标改变](http://developer.gnome.org/gtk3/stable/GtkTreeView.html#GtkTreeView-cursor-changed)：

> 光标（聚焦单元格）的位置已更改。

# java - How to put a static variable in a parent Object that is different between different children in Java

> ID：10831361
> 
> 赞同：0
> 
> 时间：2012-05-31T09:59:45.120
> 
> 标签：java, inheritance

Conider I have a Class called `Entity` that has 3 children :
`ClientEntity`, `EmployeeEntity` and `ProductEntity`
I want to have a static attribute `_nextId` (that gives the new id for a new record) `_nextId` has a different value in each entity, but its a common attribute to all Entity children.

So my question is how can I put `_nextId` in `Entity` class and have methods that change this value, while getting a different value for each child class.

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:01:55.440

假设`Entity`是抽象的，您可以创建一个：

```
protected abstract getNextId(); 
```

每个具体子类都需要实现的方法。例如，该实现可以依赖于静态计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:17:24.017

你将不得不隐藏它。这意味着您也需要在子类中具有相同的变量。

如果你在超类中声明一个静态变量，所有子类都会访问同一个变量，直到它们通过自己声明一个同名的变量来隐藏它。

# python - network proxy and python

> ID：10831362
> 
> 赞同：1
> 
> 时间：2012-05-31T09:59:48.230
> 
> 标签：python, networking, proxy

If I set network proxy in network settings on my computer (gnome 3 , fedora) when I do post get reuests in my python script will they go through the proxy or through direct connection?

what will python use? chrome browser gets proxified when I set proxy in neetwork, same for python?

if so how to use direct connection from python? like firefox does

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:04:10.837

这取决于您如何通过 Python 连接到远程服务器。`urllib`和`urllib2`库将尊重环境`*_PROXY`变量（例如`HTTP_PROXY`，`HTTPS_PROXY`等）。从[`urllib`文档页面](http://docs.python.org/library/urllib.html)：

> urlopen() 函数对不需要身份验证的代理透明地工作。在 Unix 或 Windows 环境中，在启动 Python 解释器之前，将 http_proxy 或 ftp_proxy 环境变量设置为标识代理服务器的 URL。

请注意，您还可以使用`NO_PROXY`环境变量列出异常。

您需要更具体地了解您的 Python 网络使用情况才能更具体。

# python - Behavior of close button in a WXPython frame?

> ID：10831363
> 
> 赞同：0
> 
> 时间：2012-05-31T09:59:49.020
> 
> 标签：python, wxpython

What is the default behavior of the close button and how do I customize it? Specifically, I want to exit from a main loop.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:12:49.660

您可以处理[wx.CloseEvent](http://www.wxpython.org/docs/api/wx.CloseEvent-class.html)。

# javascript - What is causing this Google Maps marker click error in Chrome?

> ID：10831365
> 
> 赞同：0
> 
> 时间：2012-05-31T09:59:56.877
> 
> 标签：javascript, google-chrome, google-maps-api-3

I wonder whether someone may be able to help me please.

[This](http://www.mapmyfinds.co.uk/development/allmyfinds.html) page allows users to filter (via checkboxes), markers which are placed on the map. Clicking on any marker performs a 'reverse geocode' action and in conjunction with selecting the 'Search Locations' button, the user can then see POI's within a given radius of the clicked marker.

For demo purposes, if you select the 'Coin' checkbox, click the green marker, then select the 'Search Locations' button, the marker will bounce and the right hand sidebar will be populated with POI's.

The problem I'm having is that in Internet Explorer everything works fine, but when I try to run this in Chrome, the marker looses the 'bounce' functionality, the 'reverse geocode' doesn't run and in the error console I receive the following error:

`Uncaught ReferenceError: reversegeocode is not defined` at line 55 of my code which is: `reversegeocode();` I've done some reading on this and other sites and from reading the guidance I've tried changing this part of my code to this:

```
function geocodePosition(pos) {
    var clickListener =
    document.getElementById('findosgb36lat').value = this.mylat;
    document.getElementById('findosgb36lon').value = this.mylon;
    document.getElementById('address').value = this.myaddress;
    if(bouncingMarker) 
        bouncingMarker.setAnimation(null); 
        if(bouncingMarker != this) { 
            this.setAnimation(google.maps.Animation.BOUNCE); 
            bouncingMarker = this; 
        }
        else bouncingMarker = null; 
    }

    geocoder.geocode({latLng: pos }, function(responses) {
        if (responses && responses.length > 0) {
            updateMarkerAddress(responses[0].formatted_address);
        } else {
            updateMarkerAddress('Cannot determine address at this location.');
        }
    });
}

function updateMarkerAddress(str) {
    document.getElementById('address').value = str;
}

function getAddress(latlng) {
    if (!geocoder) {
        geocoder = new google.maps.Geocoder();
    }

    geocoder.geocode({ 'latLng': latlng }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            // Looping through the result
            for (var i = 0; i < results.length; i++) {
                if (results[0].formatted_address) {
                    document.getElementById('address').value = 
                        results[0].formatted_address;
                } 
            }
        }
    }
)
} 
```

But unfortunately, this doesn't work and actually creates more problems with syntax errors.

I'm relatively new to Javascript, so perhaps I've totally misunderstood,. But I just wondered whether someone could possibly take a look at this please and let me know where I'm going wrong?

Many thanks and kind regards

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:15:27.713

代码反馈：

*   您的代码中的第二行是什么：`var clickListener =`打算做什么（缺少某些东西）？
*   您两次调用都`geocoder.geocode`传递了一个具有名为的属性的对象：`latLng`; 传递的对象应与`google.maps.GeocoderRequest`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#GeocoderRequest)的结构相匹配，该结构具有名为：`address`、`bounds`、`location`和`region`. 我建议您将这些属性的名称从:`latLng`更改为`location`.
*   我不确定所显示代码的上下文，但`this`在此代码部分中的用法看起来很可疑：

```
 if(bouncingMarker != this) { 
        this.setAnimation(google.maps.Animation.BOUNCE); 
        bouncingMarker = this; 
    } 
```

看起来你在一个全局函数中，所以看起来在`this`这里使用可能没有意义？

这就是我在第一次通过后看到的全部内容；希望这可以帮助你 -

# iphone - Converting in to JSON in objective c

> ID：10831369
> 
> 赞同：0
> 
> 时间：2012-05-31T10:00:01.557
> 
> 标签：iphone, objective-c, ios

I have following code to convert my employee object in to JSON file :

```
 NSDictionary *dict=[NSDictionary dictionaryWithObjectsAndKeys:emp.empName,@"name",emp.empId,@"empid",emp.empAddress,@"address",emp.mobile,@"mobile",nil];

    NSData *jsonData=[NSJSONSerialization dataWithJSONObject:dict options:NSJSONWritingPrettyPrinted error:&error];
    NSString *str=[[NSString alloc]initWithData:jsonData encoding:NSUTF8StringEncoding];
    NSLog(@"data =%@",str); 
```

by using this code i am getting the JSON file. But I want to send this json as a httprequest body i have following code for this:

```
 NSData *requestBody=[[NSString stringWithFormat:@"%@",str] dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPBody:requestBody];
NSURLConnection *conn=[[NSURLConnection alloc]initWithRequest:request delegate:self]; 
```

But i am getting wrong json at the server side which cannot be parsed. Please suggest some solution on this problem. If i send JSON Data directly i got following json at server side which is wrong:

```
{ '{\n  "name" : "vx",\n  "mobile" : "8888888",\n  "empid" : "96",\n  "address" : "addre"\n}': '' } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:18:39.417

1.  不要使用 NSJSONWritingPrettyPrinted，你不需要或不需要任何空格。

2.  利用...

> ```
> NSString *str=[[[NSString alloc]initWithData:jsonData encoding:NSUTF8StringEncoding] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
> ```

假设您的字典是正确的并且您的服务器端解析是正确的，这应该适合您。

另外，请在以后发布结果或调试日志......即您发送的实际请求和您从服务器获得的实际响应。

# objective-c - 如何检查接触点是否在 UIBezierPath (iOS)

> ID：10831370
> 
> 赞同：7
> 
> 时间：2012-05-31T10:00:07.900
> 
> 标签：objective-c, ios, touch, uibezierpath

我怎么知道触摸点 (touchesBegan) 是否在隐藏的 UIBezierPath 上？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T10:05:40.953

```
[bezierPath containsPoint:touchPoint]; 
```

只需确保您的触摸点与 bezierPaths 点位于相同的坐标系中，并且这些点位于相同的上下文中，即都在屏幕空间中。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:self.view];
    if ([self.bezierPath containsPoint:touchPoint])
    {
        // do stuff
    }
} 
```

另请注意：如果您在某些 CoreGraphics 绘图中使用 UIBezierPath，您将需要翻转 touchPoint 上的 y 轴，例如...

> touchPoint.y = self.view.bounds.size.height - touchPoint.y;

# java - why Interface methods will take object as parameter

> ID：10831371
> 
> 赞同：0
> 
> 时间：2012-05-31T10:00:08.743
> 
> 标签：java, android

let me take a interface in Android- **OnClickListener** and it's method is setonClickListener(), it takes object of View.OnClickListener or it takes as `this`

why it is taking parameters--that object or `this`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:07:48.893

您可以使用[setOnClickListener()](http://developer.android.com/reference/android/view/View.html#setOnClickListener%28android.view.View.OnClickListener%29)在视图上注册一个监听器。单击视图时，android 将调用此侦听器。侦听器可以是任何实现 OnClickListener 接口的对象。

android 在监听器上调用的方法将是[onClick()](http://developer.android.com/reference/android/view/View.OnClickListener.html#onClick%28android.view.View%29)。并且android会将被点击的视图传递给方法，让监听器知道哪个视图被点击了。这允许对多个视图使用相同的侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:02:07.320

实现事件回调方法的监听器对象。

# c++ - calculating collisions between 2 objects with known size and position

> ID：10831372
> 
> 赞同：0
> 
> 时间：2012-05-31T10:00:10.727
> 
> 标签：c++, graphics, collision

> **Possible Duplicate:**
> [Determine if two rectangles overlap each other?](https://stackoverflow.com/questions/306316/determine-if-two-rectangles-overlap-each-other)

Considering I have 2 squares for which I know the x and y positions and I also know the size, what would be the formula to use if I wanted to see if the objects collide with eachother.

```
if(   ((shapeA->getX() - shapeA->getSize()) > (player->getX() - player->getSize())
    && (shapeA->getX() + shapeA->getSize()) < (player->getX() + player->getSize()))
    && (shapeA->getY() - shapeA->getSize()  > player->getY() - player->getSize()
    && (shapeA->getY() + shapeA->getSize()) < (player->getY() + player->getSize()))
                ) 
```

This works, but it works strange (not all the time). I must be missing something

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T10:20:26.067

检查一个矩形是否与另一个矩形相交或接触非常容易。看看下面的图片：

![矩形交叉口](../Images/1810b7a80138dff2db24310441c64124.png)

如您所见，如果 ([x,x+a] 和 [X,X+A]) 和 ([y,y+b] 和 [Y,Y+B]) 之间的交点都不是，则两个矩形相交t 为空。

```
struct Rectangle{
    bool intersects(const Rectangle&);

    unsigned int a; //!< width of the rectangle
    unsigned int b; //!< height of the rectangle
    unsigned int x; //!< x position
    unsigned int y; //!< y position
};

bool Rectangle::intersects(const Rectangle& oRectangle){        
    return  (x < oRectangle.x + oRectangle.a) && // [x,x+a], [X,X+A] intersection
            (oRectangle.x < x + a)            && // [x,x+a], [X,X+A] intersection
            (y < oRectangle.y + oRectangle.b) && // [y,y+b], [Y,Y+B] intersection
            (oRectangle.y < y + b);              // [y,y+b], [Y,Y+B] intersection
} 
```

所以你的代码应该是

```
if(((shapeA->getX() + shapeA->getSize()) > (player->getX()) // x intersection
    && (shapeA->getX() < (player->getX() + player->getSize())) // x intersection
    && (shapeA->getY() < player->getY() + player->getSize()  // y intersection
    && (shapeA->getY() + shapeA->getSize()) > player->getY())  // y intersection
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:14:57.597

假设 getX/Y 给出正方形的左下角，

```
shapeMinX = shapeA; shapeMaxX = shapeB;
if (shapeA()->getX() > shapeB()->getX())
  swap (shapeMinX, shapeMaxX);
shapeMinY = shapeA; shapeMaxY = shapeB;
if (shapeA()->getY() > shapeB()->getY())
  swap (shapeMinY, shapeMaxY);

collision = (shapeMinX->getX()+shapeMinX->size() >= shapeMaxX()->getX) || (shapeMinX->getY()+shapeMinY->size() >= shapeMaxY()->getY); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T10:29:08.480

你做错了测试，试试这个：

```
int left_bound_A=  shapeA->getX()-shapeA->getSize();
int right_bound_A= shapeA->getX()+shapeA->getSize();
int top_bound_A= shapeA->getY()-shapeA->getSize();
int bottom_bound_A= shapeA->getY()+shapeA->getSize();

int left_bound_B=  shapeB->getX()-shapeB->getSize();
int right_bound_B= shapeB->getX()+shapeB->getSize();
int top_bound_B= shapeB->getY()-shapeB->getSize();
int bottom_bound_B= shapeB->getY()+shapeB->getSize();

if( left_bound_A < right_bound_B &&
    right_bound_A > left_bound_B &&
    top_bound_A > bottom_bound_B &&
    bottom_bound_A < top_bound_B ) colide(shapeA,shapeB); 
```

一般的方法是测试形状相交。如果您实现 Box 或 Rectangle 类，则代码简化为：

```
 Box colision= intersect( shapeA->getBoundBox(), shapeB->getBoundBox() );
 if( colision.have_positive_area() )
     colide(shapeA,shapeB,colision); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T11:01:38.157

是的，检查两个矩形的方法很简单。正如一个建议，如果您想计算矩形列表中矩形之间所有可能的交集，请通过增加其边界的 x 来对它们进行预排序，然后利用这种关系开始比较。这个问题可能会有所帮助

[交叉矩形的快速隐藏](https://stackoverflow.com/questions/9772268/fast-hiding-of-intersecting-rectangles/9772522#9772522)可能很有趣

# javascript - Save session on Facebook login

> ID：10831375
> 
> 赞同：0
> 
> 时间：2012-05-31T10:00:16.670
> 
> 标签：javascript, asp.net, facebook, asp.net-mvc-3, safari

In my mvc3 facebook application i detect user if login status = connected or let him to login by Facebook login popup.After login i save user Facebook id in session:

```
HttpContext.Current.Session["CurrentUserFacebookId"] = FacebookId; 
```

The problem is in safari browser. The default settings of safari is to "block cookies from third parties and advertisers". So session is not saved and user can't use my application, because all actions check the session.How to solve this problem?Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:49:57.343

[您可以尝试通过使用简单的P3P 策略](http://en.wikipedia.org/wiki/P3P)设置标头来执行此操作

> P3P: CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"

或者在 PHP 中：

> header('P3P: CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"');

或者在 ASP.NET 中：

> HttpContext.Current.Response.AddHeader("p3p", "CP=\""IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\""")

但我认为在 Safari 5.5.1 左右之后这个技巧不再起作用了。我认为 Safari 5.5.1 或更高版本中的唯一方法是通过将“首选项”->“隐私”中的“阻止 cookie”设置为“从不”来启用 3rd 方 cookie/会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T18:42:46.417

也许这个答案已经晚了。

但是，尝试在 web.config 中输入： "forms loginUrl="~/Account/Login" timeout="2880" **cookieless="UseCookies"** "

在身份验证标签内。那（**粗体部分**）启用cookie并为我工作。

也许这不是最好的解决方案，但它适用于 safari。并避免用户与偏好交互。

# php - JQuery 当数据从 .post 返回时做一些事情

> ID：10831385
> 
> 赞同：0
> 
> 时间：2012-05-31T10:00:45.567
> 
> 标签：php, jquery, return, .post

我有一个使用 JQuery 中的 .post 函数来运行 php 脚本的站点。此脚本将一些数据添加到数据库中，但如果数据已存在于数据库中，则不会添加数据。根据是否添加数据，我希望 javascript 做不同的事情。我不知道如何让 php 返回一个表示“输入数据”或“未输入数据”的值，以便 javascript 可以使用该值来决定下一步操作。

这是javascript，如果php返回数据已输入数据库，我只希望追加发生。

```
$('#addpios').click(function() {
  var scopesheetidvalue = $("#scopesheetid").val();
  var piovalue = $("#pioselected").val();
$.post("addpio.php", { scopesheetid: scopesheetidvalue, pionumber: piovalue },function(data){
$('#pioslist').append("<li><input class='removepio' type='submit' value='"+piovalue+"' /><span class='listitem'>PIO "+piovalue+"</span></li>");} 
    );   
}); 
```

这是PHP

```
$scopesheetid = $_POST['scopesheetid'];
$pionumber = $_POST['pionumber'];
$alreadyexisitssql = "SELECT * FROM [ScopesheetPIO] WHERE [ScopesheetID]='$scopesheetid' AND [PIONumber]='$pionumber'";
$alreadyexisits=odbc_exec($connection,$alreadyexisitssql);

if(odbc_fetch_row($alreadyexisits)){
//retrun a value that says the data already exists
}
else{
    $addpiosql = "INSERT INTO [ScopesheetPIO] ([ScopesheetID], [PIONumber]) VALUES ('$scopesheetid', '$pionumber')";
    $addpioresult=odbc_exec($connection,$addpiosql);
//retrun a vlaue that the data was added
} 
```

我真正想要的是一种将 PHP 脚本中的值传递回 Jquery 的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:11:32.087

在 PHP 中构建一个数组并将其输出为 JSON。然后检查脚本中返回的 JSON。

```
if(odbc_fetch_row($alreadyexists)){
    // Return a value that says the data already exists
    $result = array(
        "error" => "Data already exists"
    );
} else {
    // Database stuff goes here...
    // Return a value that the data was added
    $result = array(
        "success" => 1
    );
}
echo json_encode($result); 
```

JavaScript`$.post`回调：

```
function(data) {
    if(data.success) {
        // Append element to HTML
    } else {
        // An error occurred, inform the user
        // Don't actually use alert(), this is just for demonstrating purposes
        alert(data.error);
    }
} 
```

稍后，您可以使用额外数据创建更复杂的响应，只需将它们添加到数组并从JavaScript 中`$result`读取它们。`data`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:16:39.997

我会将您的 jQuery 修改为以下内容：

```
$.post('addpio.php', { ... }, function(data) {
    if (data.result) {
        $('#pioslist').append(...);
    }
}, 'json'); 
```

在您的 PHP 文件中，在插入数据时使用它：

```
echo json_encode(array(
    'result' => TRUE
)); 
```

当数据已经存在时使用：

```
echo json_encode(array(
    'result' => FALSE
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:11:57.990

在您的 PHP 中编写任何您将在回调函数中测试的内容：

PHP

```
if(odbc_fetch_row($alreadyexisits)){
 echo "ko";
}
else{
    $addpiosql = "INSERT INTO [ScopesheetPIO] ([ScopesheetID], [PIONumber]) VALUES ('$scopesheetid', '$pionumber')";
    $addpioresult=odbc_exec($connection,$addpiosql);
    echo "ok";
} 
```

JS

```
$.post("addpio.php", { scopesheetid: scopesheetidvalue, pionumber: piovalue },function(data){
    if( data == 'ok' ) {
        $('#pioslist').append("<li><input class='removepio' type='submit' value='"+piovalue+"' /><span class='listitem'>PIO "+piovalue+"</span></li>");
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:12:20.593

您可以轻松地将数据从脚本传递到 jQuery。IMO 我认为最好使用 JSON，因为它更整洁。

```
PHP (for example):
$arrayOfData=array("val1"=>"value","val2"=>"value");

//encode it
$arrayOfData=json_encode($arrayOfData);

//print it on screen
echo $arrayOfData; 
```

然后在 jQuery 中使用 . `getJSON`.

```
$.getJSON("url_of_php_fle",function(myData){

//now use myData as the array:
alert(myData.val1);//which will give you "value" as what you set in PHP

}): 
```

它真的很容易。

# wpf - 使用复杂的组合框 WPF

> ID：10831387
> 
> 赞同：0
> 
> 时间：2012-05-31T10:00:51.033
> 
> 标签：wpf, checkbox, consuming

我想要一个带有复选框、文本的复杂组合框，并且可能是一个缩略图。我已经查看了以下链接，这些链接在构建复杂的组合框时帮助了我很多。

[http://blogs.microsoft.co.il/blogs/justguy/archive/2009/01/19/wpf-combobox-with-checkboxes-as-items-it-will-even-update-on-the-fly。 aspx](http://blogs.microsoft.co.il/blogs/justguy/archive/2009/01/19/wpf-combobox-with-checkboxes-as-items-it-will-even-update-on-the-fly.aspx)

[寻找带有复选框的 WPF ComboBox](https://stackoverflow.com/questions/859227/looking-for-a-wpf-combobox-with-checkboxes)

但是，我找不到在我的应用程序中使用这些复杂用户控件的方法。我是 WPF 的新手，因此任何形式的演示支持都将受到高度赞赏。

院长，我正在寻找一个如何在文件后面的代码中绑定的解决方案，下面的示例在前面的 SO 帖子中提到。

```
<ComboBox.ItemTemplate>
<DataTemplate>
    <StackPanel Orientation="Horizontal">
        <CheckBox IsChecked="{Binding IsSelected}"
                   Width="20" />
        <TextBlock Text="{Binding DayOfWeek}"
                   Width="100" />
    </StackPanel>
</DataTemplate> 
```

所以问题是，我需要 DataTable 或其他东西来将我的复选框和标题列表与这个组合框模板绑定吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:43:07.640

组合框是一个 ItemsControl。所有 ItemsControls 都可以用项目或容器“硬编码”填充。

这会在组合框中添加一个新条目，并将字符串包装到一个 ItemsContainer 中，它是一个 ComboBoxItem。

```
<ComboBox>
    <sys:string>Hello</string>
<ComboBox> 
```

这里我们直接创建一个组合框项，并将其内容添加到值为“Hello”的字符串中

```
<ComboBox>
    <ComboBoxItem Content="Hello"/>
<ComboBox> 
```

两者在视觉上看起来相同。重要的是要理解，在第一种情况下，ComboBox 负责将我们的 ComboBox 未知类型字符串包装到 ComboBoxItem 中，并使用默认的 DataTemplate 来显示它。默认的 DataTemplate 将显示一个 TextBlock 并在给定的数据项上调用 ToString()。

现在要拥有动态数据，我们需要一个带有数据项的 ObservableCollection。

```
 class Employee
    {
        public BitmapSource Picture {get;set;}
        public string Name{get;set}
    }

ObservableCollection<Employee> employees;
myComboBox.ItemsSource = employees; 
```

我们有一个名为 Employee 的 DataClass，一个可观察的集合，其中包含我们的许多数据项，并将此集合设置为 ItemsSource。从此时起，我们的 Combobox 会监听这个集合的变化。就像添加和删除员工一样，并自动将新员工包装到 ComboBoxItem 中。一切都是自动完成的。我们唯一需要做的就是提供一个合适的 DataTemplate。组合框不知道如何“显示”员工，而这正是 DataTemplate 的用途。

```
<DataTemplate x:Key="employeeTemplate">
    <StackPanel Orientation="Horizontal">
        <Image Source="{Binding Picture}"/>
        <TextBlock Text="{Binding Name}"/>
    </StackPanel>
</DataTemplate> 
```

我们知道一个员工被包裹在一个 ComboBoxItem 中，并且 ComboBoxItem 使用提供的 Datatemplate 来显示其数据，这意味着在 DataTemplate 内部我们可以使用 Binding 来访问数据项上的所有属性。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:12:22.497

只是回答你的问题。您所需要的只是一个具有至少 2 个公共属性（IsSelected 为 bool，DayOfWeek 为字符串）的对象集合，并将这些集合设置为 itemssource。所以你只需要一个这样的对象的集合。如果您需要示例，请发表评论。

ps：请通读 wpf 的 www 和绑定以获取基础知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:19:15.013

您可以简单地直接添加项目

```
<ComboBox>
    <ComboBox.Items>
        <ComboBoxItem>
            <TextBlock Text="test text" />
        </ComboBoxItem>
        <ComboBoxItem>
            <CheckBox Content="test checkbox" />
        </ComboBoxItem>
        <ComboBoxItem>
            <Button Content="test button" />
        </ComboBoxItem>
    </ComboBox.Items>
</ComboBox> 
```

或者如果您想使用 ItemsSource，则需要 DataTemplateSelector

```
<ComboBox>
    <ComboBox.ItemTemplateSelector>
        <local:MyCustomTemplateSelector />
    </ComboBox.ItemTemplateSelector>
</ComboBox> 
```

这是一个解释 DataTemplateSelectors 的链接

[http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx)

# android - 由于计算位置之间的距离，滚动 ListView 滞后

> ID：10831389
> 
> 赞同：0
> 
> 时间：2012-05-31T10:01:14.653
> 
> 标签：android

我有一个`ListView`，它的每个条目都显示一些信息，包括用户当前位置与感兴趣的地方之间的距离。

不幸的是，因为我在列表中`getView()`进行距离计算（通过调用距离计算方法并返回字符串来设置`TextView`），所以滚动列表有点滞后。

任何人都可以给我一个解决方案，以便我可以更顺畅地滚动`ListView`吗？

这是我的`getView()`方法：

```
@Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            layoutInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            FeedViewHolder feedViewHolder = null;
            final VideoLocationDB vidLocation = videoLocationsDB[position];
            String url = vidLocation.documentary_thumbnail_url;
            String name = vidLocation.name;
            String title = vidLocation.name;
            String desc = vidLocation.text;
            double lat = vidLocation.latitude;
            double lng = vidLocation.longitude;
            String distance = calculateDistance(lat,lng);

            if (convertView == null) {

                convertView = layoutInflater.inflate(R.layout.listitems, parent,false);
                feedViewHolder = new FeedViewHolder();
                feedViewHolder.titleView = (TextView) convertView.findViewById(R.id.txt_title);
                feedViewHolder.descView = (TextView) convertView.findViewById(R.id.txt_list_desc);
                feedViewHolder.more = (TextView) convertView.findViewById(R.id.txt_more);
                feedViewHolder.distanceView = (TextView) convertView.findViewById(R.id.txt_distance);
                feedViewHolder.v  = (ImageView) convertView.findViewById(R.id.image);

                Typeface fontRegular = Typeface.createFromAsset(getAssets(),
                        "miso.otf");
                feedViewHolder.titleView.setTypeface(fontRegular);
                Typeface fontLight = Typeface.createFromAsset(getAssets(),
                        "miso-light.otf");
                feedViewHolder.descView.setTypeface(fontLight);
                feedViewHolder.more.setTypeface(fontLight);
                feedViewHolder.distanceView.setTypeface(fontRegular);

                convertView.setTag(feedViewHolder);

            } else
            {
                feedViewHolder = (FeedViewHolder) convertView.getTag();
            }

            feedViewHolder.v.setTag(url);
            loader.DisplayImage(url, LocationsListActivity.this, feedViewHolder.v, name);
            feedViewHolder.titleView.setText(title.toUpperCase());
            feedViewHolder.descView.setText(desc);  
            feedViewHolder.more.setText(getString(R.string.de_list_more));
            feedViewHolder.distanceView.setText(distance);

            return convertView; 
        } 
```

以下是距离计算方法：

```
public double countDistance(double lat1, double lng1, double lat2,
            double lng2) {
        Location locationUser = new Location("point A");
        Location locationPlace = new Location("point B");
        locationUser.setLatitude(lat1);
        locationUser.setLongitude(lng1);
        locationPlace.setLatitude(lat2);
        locationPlace.setLongitude(lng2);

        double distance = locationUser.distanceTo(locationPlace);

        return distance;
    }

    public String calculateDistance(double lat2, double lng2){

        String distance = null;

        if (location != null) {
            double lat = location.getLatitude();
            double lng = location.getLongitude();

            if (countDistance(lat, lng, lat2, lng2) >= 500) {
                double kilometer = countDistance(lat, lng, lat2, lng2) / 1000;
                int decimalPlaces = 1;
                BigDecimal decimal = new BigDecimal(kilometer);
                decimal = decimal.setScale(decimalPlaces,
                        BigDecimal.ROUND_HALF_UP);
                double new_km = decimal.doubleValue();
                distance = String.valueOf(new_km+ " km");
            } else {
                int decimalPlaces = 1;
                BigDecimal decimal = new BigDecimal(countDistance(lat, lng,
                        lat2, lng2));
                decimal = decimal.setScale(decimalPlaces,
                        BigDecimal.ROUND_HALF_UP);
                double meter = decimal.doubleValue();
                distance = String.valueOf(meter + " m");
            }
            videoLocationAdapter.notifyDataSetChanged();
        }
        return distance;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:31:27.823

Greendroid (https://github.com/cyrilmottier/GreenDroid) 正在使用 Future (http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html) 来异步加载图像在列表视图中从 Web 获取。即使列表包含数百个条目，它也非常有效。所以我认为这就是你正在寻找的东西。期货由处理池的执行程序管理，以便一切都在您的硬件限制内完成。

一些代码？Greendroid，这里有一个有趣的例子，您可以在其中找到更多信息。它在我的书签中，但我不知道它是否是最新的：http: [//blog.tomgibara.com/post/7665158012/android-adapter-view-rendering](http://blog.tomgibara.com/post/7665158012/android-adapter-view-rendering)

# java - ManyToOne 注释在 Hibernate 4.1 中失败：MappingException

> ID：10831390
> 
> 赞同：0
> 
> 时间：2012-05-31T10:01:17.820
> 
> 标签：java, hibernate

使用休眠 4.1.1.Final。

当我尝试添加@ManyToOne 时，架构创建失败并显示：org.hibernate.MappingException：无法实例化持久化器 org.hibernate.persister.entity.SingleTableEntityPersister

用户.java：

```
@Entity
public class User { 
 @Id
 private int id;
 public int getId() {return id;}
 public void setId(int id) {this.id = id;}
 @ManyToOne
 Department department;
 public Department getDepartment() {return department;}
 public void setDepartment(Department department) {this.department = department;}
} 
```

部门.java

```
@Entity
public class Department {
 @Id
 private int departmentNumber;
 public int getDepartmentNumber() {return departmentNumber;}
 public void setDepartmentNumber(int departmentNumber) {this.departmentNumber = departmentNumber;}
} 
```

休眠.属性：

```
hibernate.connection.driver_class=com.mysql.jdbc.Driver
hibernate.connection.url=jdbc:mysql://localhost:3306/dbname
hibernate.connection.username=user
hibernate.connection.password=pass
hibernate.connection.pool_size=5
hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect
hibernate.hbm2ddl.auto=create 
```

初始化（抛出异常）：

```
ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().buildServiceRegistry();
sessionFactory = new MetadataSources(
serviceRegistrY.addAnnotatedClass(Department.class).addAnnotatedClass(User.class).buildMetadata().buildSessionFactory(); 
```

初始化时抛出异常：

```
org.hibernate.MappingException: Could not instantiate persister org.hibernate.persister.entity.SingleTableEntityPersister
    at org.hibernate.persister.internal.PersisterFactoryImpl.create(PersisterFactoryImpl.java:174)
    at org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:148)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:820)
    at org.hibernate.metamodel.source.internal.SessionFactoryBuilderImpl.buildSessionFactory(SessionFactoryBuilderImpl.java:65)
    at org.hibernate.metamodel.source.internal.MetadataImpl.buildSessionFactory(MetadataImpl.java:340) 
```

我尝试添加一些其他注释，但默认值不应该起作用并创建表和外键吗？如果我从用户中删除部门，表格会生成得很好。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:49:32.627

您正在使用尚未完成的功能。org.hibernate.metamodel 中的所有内容都针对 5.0。

[http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/metamodel/package-summary.html](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/metamodel/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:37:41.367

我的例子：

用户.java

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

@Entity
public class User {
    private int id;
    private String userName;
    private String password;

    @Id
    @GeneratedValue
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    @Column
    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    @Column
    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

TraceLog.java

```
import java.util.Date;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.ManyToOne;

@Entity
public class TraceLog {
    private int id;
    private User user;
    private String tokenId;
    private String variable;
    private String value;
    private Date traceTime;

    @Id
    @GeneratedValue
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    @ManyToOne(cascade = CascadeType.ALL)
    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    @Column
    public String getTokenId() {
        return tokenId;
    }

    public void setTokenId(String tokenId) {
        this.tokenId = tokenId;
    }

    @Column
    public String getVariable() {
        return variable;
    }

    public void setVariable(String variable) {
        this.variable = variable;
    }

    @Column
    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

    @Column
    public Date getTraceTime() {
        return traceTime;
    }

    public void setTraceTime(Date traceTime) {
        this.traceTime = traceTime;
    }
} 
```

休眠.cfg.xml

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/sessiontest</property>
  <property name="hibernate.connection.username">root</property>
  <property name="hibernate.connection.password">mysql</property>
  <property name="hibernate.connection.pool_size">1</property>
  <property name="show_sql">true</property>
  <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
  <property name="hibernate.hbm2ddl.auto">update</property>

  <mapping class="com.cpviet.example.session.model.User" />
  <mapping class="com.cpviet.example.session.model.TraceLog" />

</session-factory>

</hibernate-configuration> 
```

HibernateUtil.java

```
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;

public class HibernateUtil {

    private SessionFactory sessionFactory = null;

    private static HibernateUtil instance = null; 

    private HibernateUtil() {
    }

    public static HibernateUtil getInstance() {
        if (instance == null) {
            instance = new HibernateUtil();
        }
        return instance;
    }

    public SessionFactory getSessionFactory() {
        if (sessionFactory == null) {
            Configuration configuration = new Configuration();
            configuration.configure();
            ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
            sessionFactory = configuration.buildSessionFactory(serviceRegistry);
        }
        return sessionFactory;
    }

} 
```

如何使用：

```
Session session = HibernateUtil.getInstance().getSessionFactory().openSession();
user = (User) session.get(User.class, (Integer)1);
session.close(); 
```

或者

```
Session session = HibernateUtil.getInstance().getSessionFactory().openSession();
Transaction transaction = session.beginTransaction();

TraceLog traceLog = new TraceLog();
traceLog.setTokenId(tokenId);
traceLog.setVariable("var1");
traceLog.setValue("val1");
traceLog.setUser(user);
traceLog.setTraceTime(new Date());

session.save(traceLog);

transaction.commit();
session.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:12:18.483

```
 @Entity
    public class User { 
     @Id
     private int id;
     public int getId() {return id;}
     public void setId(int id) {this.id = id;}

     @ManyToOne
     Department department;
     public Department getDepartment() {return department;}
     public void setDepartment(Department department) {this.department = department;}
    }

@Entity
public class Department {
 @Id
 private int departmentNumber;

 @OneToMany(mappedBy="department")
 private Set<User> user;
public Set<User> getUser() {
        return user;
    }
    public void setUser(Set<User> user) {
        this.user = user;
    }

 public int getDepartmentNumber() {return departmentNumber;}
 public void setDepartmentNumber(int departmentNumber) {this.departmentNumber = departmentNumber;}
} 
```

**您必须向 Department 实体添加一个集合并映射 OneToMany 与用户的关系**

# c# - 目录读取不正确

> ID：10831393
> 
> 赞同：0
> 
> 时间：2012-05-31T10:01:35.517
> 
> 标签：c#, asp.net

我有一个目录

C:\库尔迪普\kverma\kver\

之后它包含数千个不同名称的文件夹。每个文件夹包含不同的 Excel 文件。我需要阅读来自不同文件夹的每个文件。

我想从 C:\Kuldeep\kverma\kver\ 文件夹中读取所有文件夹路径。

我使用下面的代码来获取带有路径的文件夹名称..

```
 string path = @"C:\Kuldeep\kverma\kver\";
        DirectoryInfo dir = new DirectoryInfo(path);
        Console.WriteLine("File Name Size Creation Date and Time");
                                                                                                   Console.WriteLine("========");

        foreach (DirectoryInfo dirinfo in dir.GetDirectories())
        {
            String name = dirinfo.Name;
            String pth = dirinfo.FullName;
            Console.WriteLine( name, pth);
       } 
```

C:\Kuldeep\kverma\kver\ 目录中共有 10700 个文件夹，但它只读取 54 个文件夹..

请为我提供任何解决方案，以读取文件夹名称和位置以及从 Single Shot 中的每个文件夹中读取文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:07:18.907

您应该在 GetDirectories 调用周围放置一个 try catch 以处理以下帖子中的异常。

这可能会给你一个线索，说明为什么它没有正确枚举。

[http://msdn.microsoft.com/en-us/library/c1sez4sc.aspx](http://msdn.microsoft.com/en-us/library/c1sez4sc.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:57:53.720

如果要查看每个子目录的内容：

```
// Flatten out the directory structure in to a string array.
var directoryList = Directory.GetDirectories("<<RootPath>>", "*", SearchOption.AllDirectories);

foreach (var directory in directoryList)
{
  DirectoryInfo info = new DirectoryInfo(directory);
} 
```

用更新的问题代码编辑：

```
 string path = @"C:\Kuldeep\kverma\kver\";
    string[] directoryArray = Directory.GetDirectories(path, "*", SearchOption.AllDirectories);

    foreach (var directory in directoryArray)
    {
        DirectoryInfo dirinfo = new DirectoryInfo(directory);
        String name = dirinfo.Name;
        String pth = dirinfo.FullName;
        Console.WriteLine(name, pth);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:13:09.670

尝试递归方法：

```
namespace ConsoleApplication1
{
    using System;
    using System.Collections.Generic;
    using System.IO;

    class Program
    {
        public static IList<DirectoryInfo> dirs;

        static void Main(string[] args)
        {
            dirs = new List<DirectoryInfo>();

            var dir = new DirectoryInfo(@"c:\tmp");

            GetDirs(dir);
            Console.WriteLine(dirs.Count);
        }

        public static void GetDirs(DirectoryInfo root)
        {
            foreach (var directoryInfo in root.GetDirectories())
            {
                dirs.Add(directoryInfo);
                GetDirs(directoryInfo);
            }
        }
    }
} 
```

现在我不确定因为这个（堆栈溢出异常，访问被拒绝？）可能潜伏着什么隐患，所以我建议`try..catch`在循环中放置一个块`foreach`来帮助你。

# objective-c - 创建一个包含浮点数的全局数组

> ID：10831396
> 
> 赞同：0
> 
> 时间：2012-05-31T10:01:49.423
> 
> 标签：objective-c, ios, xcode, arrays, nsmutablearray

我想创建 2 个可以在程序运行期间更新的全局数组。在每次更新中，我将一个元素添加到第零位并删除了我创建数组的最后一个数字......在 .h 文件中...... ....... //////////////

```
@interface Shared : NSObject{
NSMutableArray *x;
NSMutableArray *y;
}

@property (nonatomic,retain) NSMutableArray *x;
@property (nonatomic,retain) NSMutableArray *y;
+(Shared*)sharedInstance;

@end 
```

在 .m 文件中

```
staticShared* sharedInstance;
@implementation Shared
@synthesize  x; 
@synthesize  y;

+(Shared*)sharedInstance
{
if (!sharedInstance) {
sharedInstance=[[Sharedalloc]init];
    }
returnsharedInstance;
}

-(Shared*)init
{
self = [superinit];
if(self)
    {
x=[[NSMutableArrayalloc] init];
x=[NSMutableArrayarrayWithObjects:@"0",@"0",@"0",@"0",@"0",@"0",@"0",nil];
y=[[NSMutableArrayalloc] init];
y=[NSMutableArrayarrayWithObjects:@"0",@"0",@"0",@"0",@"0",@"0",nil];
    }
returnself;
}
@end 
```

然后我用下面的代码调用它们并重新添加元素....

```
[[shared sharedInstance].y removeLastObject];
[[shared sharedInstance].y insertObject:new_element atIndex:0];

[[shared sharedInstance].x removeLastObject];
[[shared sharedInstance].x insertObject:new_element atIndex:0]; 
```

同时，我调用这些值并使用表达式计算算术值。

这似乎运作良好。但这似乎是一种处理我存储在其中的浮点数的低效方法。由于这些数组创建对象。有没有什么简单的方法可以创建一个包含指定数量的浮点数的全局数组，并在程序运行期间通过删除最后一个对象来更新它（数组大小是固定的），然后再调用它们进行计算？

请帮我！

编辑 1 致 deanWombourne 先生 .................... 我按照您的指示执行！你能不能帮我纠正我得到的 2 个错误。

在 .h 文件中

```
@interface Shared : NSObject{
@private
float input[7];
float output[6];

}
+(Shared*)sharedInstance;

-(void)addNewInput:(float)input1;
-(float *)input;
-(void)addNewOutput:(float)output1;
-(float *)output;

@end 
```

在.m 文件中............

```
@implementation Shared

-(id)init{
if((self =[superinit])){

for(int n=0; n<7 ;++n)
input[n]=0.00f;

for(int n=0; n<6 ;++n)
output[n]=0.00f;
    }
returnself;
}

-(void)addNewInput:(float)input1{
input[0]=input[1];
input[1]=input[2];
input[2]=input[3];
input[3]=input[4];
input[4]=input[5];
input[5]=input[6];
input[6]=input1;
}

-(float *)input {
returninput;
}

-(void)addNewOutput:(float)output1{
output[0]=output[1];
output[1]=output[2];
output[2]=output[3];
output[3]=output[4];
output[4]=output[5];
input[5]=output1;
}

-(float *)output {
returnoutput;
}
@end 
```

调用时

```
float reading=  (accel_reading)/(1.165969038*1e5f);
[[SharedsharedInstance] addNewInput:reading]; 
```

我遇到的问题 1\. 在实现中，它说不完整的实现（这是警告而不是错误） 2\. 我如何使用 for 循环来填充数组值或者这种方式可以吗？

我得到的主要问题，当我如上所示调用它时，由于未捕获的异常'NSInvalidArgumentException'，程序停止运行并告诉终止应用程序，原因'+ [SharedsharedInstance]：无法识别的选择器发送到类0x5780'

请帮助我完成这个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:23:22.800

你的代码有[味道](http://en.wikipedia.org/wiki/Code_smell)（我的意思是最好的方式！）

使用两个并行数组并保持同步是一种糟糕的设计模式（并且在很多方面都会影响性能！）。特别是因为已经有一个结构可以同时处理`x`和存储`y`- [CGPoint](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/doc/c_ref/CGPoint)）。

您正在通过转换您的NSString 对象来解决“*只有对象进入数组*`float' primitives to`”的问题，这是非常低效的 - 看看[NSValue](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsvalue_Class/Reference/Reference.html)类，它旨在将本机 C 原语放入对象中，而无需昂贵的解析操作:)

您可能还想研究[malloc](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/malloc.3.html)（`free`等等）并在 C 级别处理整个问题 - 这将意味着根本没有对象并且会非常快（以更复杂的代码为代价）。

希望这会有所帮助，如果您有任何问题，请在此答案中添加评论:)

* * *

编辑

如果您只想存储 4 个 x 和 y 值，那么这可能是最简单的方法：

```
@interface Shared : NSObject {
@private
    CGPoint points[4];
}

+(Shared *)sharedInstance;

- (void)addNewPoint:(CGPoint)point;
- (CGPoint *)points;

@end

@implementation

- (id)init {
    if ((self = [super init])) {
        // Start with 0,0 for all your points
        for (int n = 0; n < 4; ++n)
            points[n] = CGPointZero;
    }
    return self;
}

- (void)addNewPoint:(CGPoint)point {
    // Just move all the points along one and add the new one to the end
    // (yes, this could be done in a loop but there's not that much point for 4 points!)
    points[0] = points[1];
    points[1] = points[2];
    points[2] = points[3];
    points[3] = point;
}

- (CGPoint *)points {
    return points;
}

@end 
```

这为您提供了一种`addNewPoint`删除第一个点并将新点添加到数组末尾的方法。

您还将获得`points`返回 4 个点的方法。像这样使用它：

```
// To add a point
CGPoint newPoint = CGPointMake(100, 100);
[[Shared sharedInstance] addNewPoint:newPoint];

// To do something with the points (in this case, NSLog them)
CGPoint *points = [[Shared sharedInstance] points];
for (int n = 0; n < 4; ++n)
    NSLog(@" Point %i : %@", n, NSStringFromCGPoint(points[n])); 
```

* * *

编辑#2

根据您的评论，您需要两个数组，一个带有输入数据，一个带有输出数据。尝试这样的事情：

```
@interface Shared : NSObject {
    float inputs[4];
    float outputs[5];
}
... 
```

这将为您提供两个要读取/写入的数组 - 一个称为输入，另一个称为输出。访问它们的方式与我第一次编辑中的访问方式几乎相同：

```
float *inputs = [[Shared sharedInstance] inputs];
for (int n = 0; n < 4; ++n)
    NSLog(@" Input %i : %f", n, inputs[n]);

float *outputs = [[Shared sharedInstance] outputs];
for (int n = 0; n < 5; ++n)
    NSLog(@" Output %i : %f", n, output[n]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:20:46.890

如果你想要一个包含特定数量对象的数组，你可以使用 NSArray，它是静态的，与 NSMutableArray 相对。

至于数组是全局的，只需实现一个包含 2 个数组并提供相关方法的单例类。

在 Globals.h 中：

```
@interface Globals : NSObject

+ (Globals *) sharedGlobals;

@end 
```

在 Globals.m 中：

```
@implementation Globals

static Globals *sharedGlobals = nil;

+ (Globals *) sharedGlobals{
    @synchronized(self){
        if (sharedGlobals == nil){
            sharedGlobals = [[self alloc] init];
        }
    }
    return sharedGlobals;
} 
```

然后，您可以使用以下行访问数组（在实现它们之后）：

```
[[Globals sharedGlobals] getArrayX]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:18:31.707

对于您要实现的目标，链接列表是否会过大？它不像静态浮点数数组那么简单，但使最后一个对象的删除和第零个对象的插入相当简单和快速。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:22:55.057

这是一个草图，可以让你继续前进。

您的数组大小是固定的，仅包含浮点数，从 C 数组开始：

```
double x[] = {0, 0, 0, 0, 0, 0, 0};
double y[] = {0, 0, 0, 0, 0, 0}; 
```

这些数组中的元素数量可以计算而不是硬编码：

```
int xCount = sizeof(x)/sizeof(double);
int yCount = sizeof(y)/sizeof(double); 
```

现在将这些数组用作循环缓冲区，声明一个游标并初始化：

```
int xCursor = 0; 
```

队列前面的项目在光标处：

```
valueAtFrontOfQueue = x[xCursor];      // get the current front item 
```

要删除前面的值并在后面添加一个新值，请将光标处的值替换为新值并增加光标：

```
x[xCursor] = newValueForBackOfQueue;   // replace it with new item for back of queue
xCursor = (xCursor + 1) % xCount;      // and advance cursor using mod arithmetic to it cycles around 
```

没有包装双重作为对象，根本没有动态分配。

将以上内容按照您认为合适的方式进行总结，也许作为一个班级，您就完成了。

# sencha-touch - 圆角列表在sencha touch 2中不会滚动到结束

> ID：10831399
> 
> 赞同：0
> 
> 时间：2012-05-31T10:02:04.027
> 
> 标签：sencha-touch, sencha-touch-2

我想要 Sencha Touch 2 中的圆形列表视图。为此，我使用了 ui:round 属性。但它不起作用。现在左边，它是圆形的。但是对于右侧，它不能正常进行。我想要那个圆形边框内的列表。下面是我的代码：

这是我的代码：

```
Ext.define('MyApp.view.MyTabPanel', {
extend: 'Ext.tab.Panel',

config: {
    layout: {
        animation: 'fade',
        type: 'card'
    },
    items: [
        {
            xtype: 'container',
            draggable: true,
            styleHtmlContent: true,
            title: 'Artist',
            items: [
                {
                    xtype: 'list',
                    height: 696,
                    ui: 'round',
                    width: 325,
                    modal: true,
                    itemTpl: [
                        '{firstName}'
                    ],
                    store: 'name',
                    onItemDisclosure: true
                }
            ]
        },
        {
            xtype: 'container',
            styleHtmlContent: true,
            scrollable: true,
            title: 'Albums',
            items: [
                {
                    xtype: 'list',
                    height: 730,
                    ui: 'round',
                    width: 325,
                    modal: true,
                    itemTpl: [
                        '{albumlist}'
                    ],
                    store: 'albumstore',
                    onItemDisclosure: true
                }
            ]
        },
        {
            xtype: 'container',
            styleHtmlContent: true,
            title: 'Playlist',
            items: [
                {
                    xtype: 'list',
                    height: 700,
                    ui: 'round',
                    width: 325,
                    modal: true,
                    itemTpl: [
                        '{playlist}'
                    ],
                    store: 'playliststore',
                    onItemDisclosure: true
                }
            ]
        }
    ],
    tabBar: {
        docked: 'top',
        layout: {
            align: 'center',
            pack: 'center',
            type: 'hbox'
        }
    }
}

}); 
```

现在它出现在圆形列表中。但是滚动不正常。它不会直到列表的末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:27:18.127

您在组件中包含了一些冗余配置。

我只对**MyTabPanel.js**进行了更改（很多）。

这是编辑后的源代码，它适用于**Artist List**，它也适用于其他组件：

```
Ext.define('MyApp.view.MyTabPanel', {
    extend: 'Ext.tab.Panel',

    config: {
        layout: {
            animation: 'fade',
            type: 'card'
        },
        items: [
            {
                xtype: 'container',
                layout: 'card',
                //draggable: true,
                styleHtmlContent: true,
                title: 'Artist',
                items: [
                    {
                        xtype: 'list',
                        //height: 696,
                        ui: 'round',
                        //width: 325,
                        //modal: true,
                        itemTpl: [
                            '{firstName}'
                        ],
                        store: 'name',
                        onItemDisclosure: true
                    }
                ]
            },
            {
                xtype: 'container',
                layout: 'card',
                styleHtmlContent: true,
                //scrollable: true,
                title: 'Albums',
                items: [
                    {
                        xtype: 'list',
                        height: 730,
                        ui: 'round',
                        width: 325,
                        modal: true,
                        itemTpl: [
                            '{albumlist}'
                        ],
                        store: 'albumstore',
                        onItemDisclosure: true
                    }
                ]
            },
            {
                xtype: 'container',
                layout: 'card',
                styleHtmlContent: true,
                title: 'Playlist',
                items: [
                    {
                        xtype: 'list',
                        //height: 700,
                        ui: 'round',
                        //width: 325,
                        //modal: true,
                        itemTpl: [
                            '{playlist}'
                        ],
                        store: 'playliststore',
                        onItemDisclosure: true
                    }
                ]
            }
        ],
        tabBar: {
            docked: 'top',
            layout: {
                align: 'center',
                pack: 'center',
                type: 'hbox'
            }
        }
    }

}); 
```

# delphi - 如何包含 Jenkins Job (Delphi) 所需的文件

> ID：10831402
> 
> 赞同：4
> 
> 时间：2012-05-31T10:02:14.647
> 
> 标签：delphi, continuous-integration, jenkins, build-automation

正如我的标题中所述，基本上我正在努力解决如何包含 Delphi 程序编译所需的文件。我正在试验 Jenkins 并使用执行 Windows 批处理命令来构建 Delphi 程序（使用 Delphi 2006）。如果有某种通用方法来查找/包含所需文件会很好，因为手动包含它会破坏自动化点。这个事情谁有经验？或者可能知道可以包含所需文件的脚本或批处理？

如果有人可以提供帮助，请提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T16:10:14.143

当您直接使用 dcc32.exe 时，请确保在 dcc32.cfg (-I) 中正确设置了所有必需的包含路径。请参见[此处](http://docwiki.embarcadero.com/RADStudio/XE/en/DCC32.EXE,_the_Delphi_Command_Line_Compiler)。另一种选择是使用 msbuild 来构建您的项目。

# php - 代码格式化应用

> ID：10831405
> 
> 赞同：0
> 
> 时间：2012-05-31T10:02:38.130
> 
> 标签：php, variables, naming-conventions

我想改变我命名变量的方式，从`$var_name`to `$varName`（或`$_varName`某些受保护的变量）

是否有一个应用程序可以帮助我自动对旧代码进行这些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:09:44.700

您可以考虑使用[https://github.com/fabpot/PHP-CS-Fixer](https://github.com/fabpot/PHP-CS-Fixer) 它应该能够修复您当前代码库中的大部分编码标准问题。不过，我还没有尝试过自己动手，所以我没有这方面的经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:38:28.683

尝试在 Dreamweaver 或 notepad++ 上打开您的脚本，然后使用 find-replace/replace all。如果您只想更改这些变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:43:34.927

[Eclipse](http://eclipse.org/)具有良好的搜索和替换功能，带有预览...

检查本[教程](http://www.raymondcamden.com/index.cfm/2009/3/16/Multifile-search-and-replace-in-Eclipse)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T10:52:45.787

[http://www.jetbrains.com/phpstorm/](http://www.jetbrains.com/phpstorm/)有一个强大的重构引擎。虽然它不是免费的，但它确实提供了 30 天的评估。

我个人一直将 Eclipse 用于 Java、C++ 和 PHP。Eclipse 可以和 phpstorm 做同样的事情，但我发现 phpstorm 引擎更复杂，因为它是专门为 PHP 编写的

# jquery - 如何通过jquery从ahref点击事件中读取查询字符串值

> ID：10831407
> 
> 赞同：1
> 
> 时间：2012-05-31T10:02:41.103
> 
> 标签：jquery

我想通过 jquery 从这个锚标记中读取查询字符串值。

```
<td><a href="#?acckey={{user.key()}}" class="generate_url">Get URL</a></td> 
```

这是我写的，它不工作

```
$('.generate_url').each(function () {
    $(this).click(function () {
        alert(acckey)

    });

}); 
```

但这不起作用。有谁知道解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:06:29.923

```
$('.generate_url').on('click', function() {
    var m = this.href.match(/acckey=(.*)/),
    acckey = m ? m[1] : '';

    alert(acckey);
}); 
```

它将`href`值与正则表达式匹配并使用第一个内存组。如果未找到匹配项，`acckey`则将设置为空字符串。

**更新**

要获得整个匹配项（即“acckey=xxx”），您需要使用`m[0]`而不是`m[1]`.

顺便说一句，我已经删除了，`.each()`因为您只是添加了一个点击处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:11:02.310

基于[这里](https://stackoverflow.com/a/901144/1249581)的解析函数，我们可以做出通用的解决方案：

```
function getParameterByName(query_string, name) {
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(query_string);
    if (results == null) return "";
    else return decodeURIComponent(results[1].replace(/\+/g, " "));
}

$(".generate_url").click(function() {
    var query_string = this.href.substring(this.href.indexOf("?"));
    var acckey = getParameterByName(query_string, "acckey");
    alert(acckey);
});​ 
```

**演示：http:** [//jsfiddle.net/dQ8Z9/](http://jsfiddle.net/dQ8Z9/)

* * *

要获取查询字符串，您可以简单地使用：

```
$(".generate_url").click(function() {
    var query_string = this.href.substring(this.href.indexOf("?") + 1);
    alert(query_string);
});​ 
```

**演示：http:** [//jsfiddle.net/dQ8Z9/1/](http://jsfiddle.net/dQ8Z9/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:06:20.017

```
$('.generate_url').each(function () {
    $(this).click(function () {
        alert($(this).attr('href').replace(/^.*?\?/, ""));  
        /* return: acckey={{user.key()}} */
    });
}); 
```

小提琴示例：http: [//jsfiddle.net/f4vN7/](http://jsfiddle.net/f4vN7/)

# php - 使用 IIS URL 重写模块找不到文件时如何重写 URL

> ID：10831411
> 
> 赞同：0
> 
> 时间：2012-05-31T10:02:51.920
> 
> 标签：php, iis, url-rewrite-module

我需要在 IIS 上运行 PHP 应用程序，并且尝试移植如下所示的 htaccess 规则：

```
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)$ index.php?%{QUERY_STRING} [NE,L]
</IfModule> 
```

我对 htaccess 的经验为零，但有人告诉我，这些规则规定，如果找不到文件，则应将请求发送到 index.php，并且应保留查询字符串。请注意，这不是用户浏览器的重定向，而是传输所有发布数据的纯服务器操作。

那么如何使用 IIS URL Rewrite 模块创建这些规则呢？根据原始地址上丢失的文件，我应该使用什么规则来重写 URL？我正在尝试在 IIS7 上执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:05:15.600

如果您使用的是 IIS URL Rewrite 模块，您应该能够直接导入您的 .htaccess。

当您在 IIS 中需要此站点时，双击 URL 重写图标，然后在右侧有一个“导入规则...”链接。点击这个，在你的.htaccess中bosh，点击“导入”，一切都应该工作。

高温高压

# ios - iOS UIWebView - 捕获异常

> ID：10831415
> 
> 赞同：0
> 
> 时间：2012-05-31T10:03:05.113
> 
> 标签：ios, exception-handling, uiwebview

我在这篇文章“iOS UIWebView - 捕获加载无效文件格式的陷阱异常”中讨论了同样的问题，但那里没有解决方案。任何人都可以给我任何建议吗？我被这个问题困扰了一整天。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:28:48.577

你有没有测试过：

```
@try {
    <#statements#>
}
@catch (NSException *exception) {
    <#handler#>
}
@finally {
    <#statements#>
} 
```

# python - 从 numpy 数组中提取对角线块

> ID：10831417
> 
> 赞同：7
> 
> 时间：2012-05-31T10:03:18.020
> 
> 标签：python, numpy, scipy

我正在寻找一种巧妙的方法来提取大小为 2x2 的对角线块，这些对角线块位于 (2N)x(2N) numpy 数组的主对角线上（也就是说，将有 N 个这样的块）。这概括了 numpy.diag，它返回沿主对角线的元素，人们可能会将其视为 1x1 块（当然 numpy 不会以这种方式表示它们）。

为了更广泛地表达这一点，人们可能希望从 (MN)x(MN) 数组中提取 N MxM 块。这似乎是 scipy.linalg.block_diag 的补充，在[How can I transform blocks into a blockdiagonal matrix (NumPy)](https://stackoverflow.com/questions/4154253/how-can-i-transform-blocks-into-a-blockdiagonal-matrix-numpy)中巧妙地讨论过，将块从 block_diag 放置的位置拉出。

[从该问题的解决方案中](https://stackoverflow.com/a/4155943/1416544)借用代码，这是如何设置的：

```
>>> a1 = np.array([[1,1,1],[1,1,1],[1,1,1]])
>>> a2 = np.array([[2,2,2],[2,2,2],[2,2,2]])
>>> a3 = np.array([[3,3,3],[3,3,3],[3,3,3]])
>>> import scipy.linalg
>>> scipy.linalg.block_diag(a1, a2, a3)
array([[1, 1, 1, 0, 0, 0, 0, 0, 0],
       [1, 1, 1, 0, 0, 0, 0, 0, 0],
       [1, 1, 1, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 2, 2, 2, 0, 0, 0],
       [0, 0, 0, 2, 2, 2, 0, 0, 0],
       [0, 0, 0, 2, 2, 2, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 3, 3, 3],
       [0, 0, 0, 0, 0, 0, 3, 3, 3],
       [0, 0, 0, 0, 0, 0, 3, 3, 3]]) 
```

然后，我们希望有一个像

```
>>> A = scipy.linalg.block_diag(a1, a2, a3)
>>> extract_block_diag(A, M=3)
array([[[1, 1, 1],
        [1, 1, 1],
        [1, 1, 1]],
       [[2, 2, 2],
        [2, 2, 2],
        [2, 2, 2]],
       [[3, 3, 3],
        [3, 3, 3],
        [3, 3, 3]]]) 
```

为了继续与 numpy.diag 进行类比，人们可能还希望提取非对角块：在第 k 个块对角线上的 N - k 个。（顺便说一句，block_diag 的扩展允许将块放置在主对角线之外肯定会有用，但这不是这个问题的范围。）对于上面的数组，这可能会产生：

```
>>> extract_block_diag(A, M=3, k=1)
array([[[0, 0, 0],
        [0, 0, 0],
        [0, 0, 0]],
       [[0, 0, 0],
        [0, 0, 0],
        [0, 0, 0]]]) 
```

[我看到这个问题](https://stackoverflow.com/questions/8070349/using-numpy-stride-tricks-to-get-non-overlapping-array-blocks)中涉及的 stride_tricks 的使用旨在产生类似于此功能的东西，但我知道跨步在字节级别上运行，这听起来不太合适。

作为动机，这源于我希望提取协方差矩阵的对角元素（即方差）的情况，其中元素本身不是标量而是 2x2 矩阵。

**编辑**：根据[Chris 的建议](https://stackoverflow.com/a/10833362/1416544)，我做了以下尝试：

```
def extract_block_diag(A,M,k=0):
    """Extracts blocks of size M from the kth diagonal
    of square matrix A, whose size must be a multiple of M."""

    # Check that the matrix can be block divided
    if A.shape[0] != A.shape[1] or A.shape[0] % M != 0:
        raise StandardError('Matrix must be square and a multiple of block size')

    # Assign indices for offset from main diagonal
    if abs(k) > M - 1:
        raise StandardError('kth diagonal does not exist in matrix')
    elif k > 0:
        ro = 0
        co = abs(k)*M 
    elif k < 0:
        ro = abs(k)*M
        co = 0
    else:
        ro = 0
        co = 0

    blocks = np.array([A[i+ro:i+ro+M,i+co:i+co+M] 
                       for i in range(0,len(A)-abs(k)*M,M)])
    return blocks 
```

其中将针对上述数据返回以下结果：

```
D = extract_block_diag(A,3)
[[[1 1 1]
  [1 1 1]
  [1 1 1]]

 [[2 2 2]
  [2 2 2]
  [2 2 2]]

 [[3 3 3]
  [3 3 3]
  [3 3 3]]]

D = extract_block_diag(A,3,-1)
[[[0 0 0]
  [0 0 0]
  [0 0 0]]

 [[0 0 0]
  [0 0 0]
  [0 0 0]]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:12:28.083

作为起点，您可以使用类似的东西

```
>>> a
array([[1, 1, 1, 0, 0, 0, 0, 0, 0],
   [1, 1, 1, 0, 0, 0, 0, 0, 0],
   [1, 1, 1, 0, 0, 0, 0, 0, 0],
   [0, 0, 0, 2, 2, 2, 0, 0, 0],
   [0, 0, 0, 2, 2, 2, 0, 0, 0],
   [0, 0, 0, 2, 2, 2, 0, 0, 0],
   [0, 0, 0, 0, 0, 0, 3, 3, 3],
   [0, 0, 0, 0, 0, 0, 3, 3, 3],
   [0, 0, 0, 0, 0, 0, 3, 3, 3]]) 

>>> M = 3
>>> [a[i*M:(i+1)*M,i*M:(i+1)*M] for i in range(a.shape[0]/M)]
[array([[1, 1, 1],
   [1, 1, 1],
   [1, 1, 1]]), array([[2, 2, 2],
   [2, 2, 2],
   [2, 2, 2]]), array([[3, 3, 3],
   [3, 3, 3],
   [3, 3, 3]])] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T13:23:04.000

您也可以使用视图来执行此操作。这可能比索引方法更快。

```
import numpy as np
import scipy.linalg

a1 = np.array([[1,1,1],[1,1,1],[1,1,1]])
a2 = np.array([[2,2,2],[2,2,2],[2,2,2]])
a3 = np.array([[3,3,3],[3,3,3],[3,3,3]])

b = scipy.linalg.block_diag(a1, a2, a3)
b[1,4] = 4
b[1,7] = 5
b[4,1] = 6
b[4,7] = 7
b[7,1] = 8
b[7,4] = 9
print b

def extract_block_diag(a, n, k=0):
    a = np.asarray(a)
    if a.ndim != 2:
        raise ValueError("Only 2-D arrays handled")
    if not (n > 0):
        raise ValueError("Must have n >= 0")

    if k > 0:
        a = a[:,n*k:] 
    else:
        a = a[-n*k:]

    n_blocks = min(a.shape[0]//n, a.shape[1]//n)

    new_shape = (n_blocks, n, n)
    new_strides = (n*a.strides[0] + n*a.strides[1],
                   a.strides[0], a.strides[1])

    return np.lib.stride_tricks.as_strided(a, new_shape, new_strides)

print "-- Diagonal blocks:"
c = extract_block_diag(b, 3)
print c

print "-- They're views!"
c[0,1,2] = 9
print b[1,2]

print "-- 1st superdiagonal"
c = extract_block_diag(b, 3, 1)
print c

print "-- 2nd superdiagonal"
c = extract_block_diag(b, 3, 2)
print c

print "-- 3rd superdiagonal (empty)"
c = extract_block_diag(b, 3, 3)
print c

print "-- 1st subdiagonal"
c = extract_block_diag(b, 3, -1)
print c

print "-- 2nd subdiagonal"
c = extract_block_diag(b, 3, -2)
print c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:02:56.933

您不想使用直接方法的任何特殊原因？

```
>>> A=np.array([[1,1,1,1],[2,2,2,2],[3,3,3,3],[4,4,4,4]])
>>> M1s,M2s=0,2 # start from A[M1s,M2s]
>>> M=2  # extract an MxM block
>>> for a in A[M1s:M1s+M]:
...   print a[M2s:M2s+M]
... 
[1 1]
[2 2]
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-16T02:12:39.320

根据 unutbu 在[https://stackoverflow.com/a/8070716/219229](https://stackoverflow.com/a/8070716/219229)上的回答，我得到以下信息：（顺便说一句，在字节级别操作有什么问题？）

```
from numpy.lib.stride_tricks import as_strided

...

def extract_block_diag(A, M=3, k=0):
   ny, nx = A.shape
   ndiags = min(map(lambda x: x//M, A.shape))
   offsets = (nx*M+M, nx, 1)
   strides = map(lambda x:x*A.itemsize, offsets)
   if k > 0:
       B = A[:,k*M]
       ndiags = min(nx//M-k, ny//M)
   else:
       k = -k
       B = A[k*M]
       ndiags = min(nx//M, ny//M-k)
   return as_strided(B, shape=(ndiags,M,M),
                     strides=((nx*M+M)*A.itemsize, nx*A.itemsize, A.itemsize)) 
```

* * *

示例用法：

```
# a1, a2, a3 from your example
>>> bigA = scipy.linalg.block_diag(a1, a2, a3)
>>> extract_block_diag ( bigA, 3 )
array([[[1, 1, 1],
        [1, 1, 1],
        [1, 1, 1]],

       [[2, 2, 2],
        [2, 2, 2],
        [2, 2, 2]],

       [[3, 3, 3],
        [3, 3, 3],
        [3, 3, 3]]])
>>> extract_block_diag ( bigA, 3 )[2]
array([[3, 3, 3],
       [3, 3, 3],
       [3, 3, 3]])
>>> extract_block_diag(np.arange(1,9*9+1).reshape(9,9),3,1)
[[[ 4  5  6]
 [13 14 15]
 [22 23 24]]

[[34 35 36]
 [43 44 45]
 [52 53 54]]] 
```

* * *

请注意，上面的函数返回一个视图，如果您更改返回的数组数组中的任何内容，原始的也会受到影响。如有必要，请制作一份副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-16T17:30:33.663

将 numpy 导入为 np

def 提取块（数组）：

```
prev = -1
for i in xrange(len(array)-1):
    if array[i+1][i] == 0 and array[i][i+1] == 0:
        yield array[prev + 1: i + 1, prev + 1: i + 1]
        print prev + 1, i
        prev = i
yield array[prev + 1: len(array), prev + 1: len(array)] 
```

d = np.array([[4, 4, 0, 0, 0, 0, 0, 0, 0], [4, 4, 0, 0, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0, 0, 0, 0], [0, 0, 0, 2, 2, 2, 0, 0, 0], [0, 0, 0, 2, 2, 2, 0, 0, 0], [0, 0, 0, 2, 2, 2, 0, 0, 0], [0, 0, 0, 0, 0, 0, 3, 3, 3], [0, 0, 0, 0, 0, 0, 3, 3, 3], [0, 0, 0, 0, 0, 0, 3, 3, 3]])

对于 extract_blocks(d) 中的 h：

```
print h 
```

> > > [[4 4][4 4]]、[[1]]、[[2 2 2][2 2 2][2 2 2]]、[[3 3 3][3 3 3][3 3 3 ]]

# php - 如何使用 php 转义 sql 查询字符串以将其存储在 mysql 表中

> ID：10831419
> 
> 赞同：1
> 
> 时间：2012-05-31T10:03:23.853
> 
> 标签：php, mysql, escaping

我正在尝试将 sql 查询字符串存储在 MySQL 字段中，并且在正确转义字符串时遇到问题。

如果我使用 phpMyAdmin 将以下字符串插入到测试表的 sql varchar 字段中：

```
INSERT INTO `test` SET `test`.`sql`='{$_POST['sql']}' 
```

然后使用 phpMyAdmin 导出它，它给了我以下 sql 查询：

```
INSERT INTO  `test`.`test` (`sql`)
VALUES ('INSERT INTO `test` SET `test`.`sql`=''{$_POST[''sql'']}'''); 
```

如果我想要我自己的 php 脚本来执行此操作，我应该使用什么函数进行转义：

```
INSERT INTO `test` SET `test`.`sql`='{$_POST['sql']}' 
```

使它看起来像：

```
'INSERT INTO `test` SET `test`.`sql`=''{$_POST[''sql'']}''' 
```

我有大量的 sql 查询需要存储以进行检索。

phpMyAdmin 对创建的原始字符串做了什么：

```
INSERT INTO  `test`.`test` (`sql`)
VALUES ('INSERT INTO `test` SET `test`.`sql`=''{$_POST[''sql'']}'''); 
```

什么是函数 xyz 其中：

```
$a = "INSERT INTO `test` SET `test`.`sql`='{$_POST['sql']}'";
$b = "INSERT INTO  `test`.`test` (`sql`)
VALUES ('INSERT INTO `test` SET `test`.`sql`=''{$_POST[''sql'']}''')";
$b = xyz($a); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T10:12:19.780

你需要[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)：

```
$sql = "INSERT INTO `test` SET `test`.`sql`='" . mysql_real_escape_string($_POST['sql']) . "'"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T10:07:41.140

如果您不需要读取数据库中的代码（例如，通过 phpMyAdmin 访问并复制和粘贴代码）而只使用 PHP 来执行此操作，您可以使用 base64 系统对其进行编码。

用于编码（存储在数据库中）

```
base64_encode($your_query); 
```

用于解码（从数据库中检索）

```
base64_decode($your_result); 
```

假设您将所有查询放在一个不包含任何不同内容的文件中，您可以尝试这种方法

```
$queryString = file_get_contents("queries.sql"); //reads the file and stores it as a single String
$queries = explode(';', $queryString);
foreach ($queries as $query)
  mysql_query( ... $query ... ); //Store each query in the database 
```

# hibernate - 什么是休眠和n-休眠？

> ID：10831420
> 
> 赞同：5
> 
> 时间：2012-05-31T10:03:24.313
> 
> 标签：hibernate, visual-studio-2008, nhibernate-mapping, asp.net-3.5

什么是休眠和n-休眠？我可以在 Visual Studio 2008 中使用它进行 C# Web 应用程序开发吗？请给我建议...我是 asp.net Web 应用程序开发的新手。刚刚我听说过 Hibernate.. 我怎样才能以简单的方式学习和实施....

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T08:15:47.827

是的，您可以使用 C# 在 VS2008 中实现 NHibernate 应用程序。您需要从[http://nhforge.org/](http://nhforge.org/)下载 Nhibernate SDK并需要将其安装到您的系统中。

下面我提到了**Hibernate**和**NHibernate**的简单介绍。

**休眠：**

Hibernate 是 Java 语言的对象关系映射 (ORM) 库，提供了一个框架，用于将面向对象的域模型映射到传统的关系数据库。Hibernate 通过用高级对象处理函数替换直接与持久性相关的数据库访问来解决对象关系阻抗不匹配问题。

Hibernate 是根据 GNU 宽通用公共许可证分发的免费软件。

Hibernates 的主要特性是从 Java 类映射到数据库表（以及从 Java 数据类型到 SQL 数据类型）。Hibernate 还提供数据查询和检索工具。它还生成 SQL 调用并尝试将开发人员从手动结果集处理和对象转换中解脱出来，并使应用程序可移植到所有支持的 SQL 数据库，而性能开销很小。

更多详情请访问：[http ://www.hibernate.org/](http://www.hibernate.org/)

**休眠：**

NHibernate 是 Microsoft .NET 平台的对象关系映射 (ORM) 解决方案：它提供了一个框架，用于将面向对象的域模型映射到传统的关系数据库。其目的是使开发人员从与关系数据持久性相关的编程任务的重要部分中解脱出来。NHibernate 作为开源软件是免费的，根据 GNU 宽通用公共许可证分发。NHibernate 是流行的 Java O/R 映射器 Hibernate 到 .NET 的一个端口。

更多详情请访问： http: [//nhforge.org/](http://nhforge.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:09:40.373

它们是对象关系映射的框架，与关系数据库管理系统一起工作。Hibernate 是基于 java 的版本，nHibernate 是 .Net 等价物。它们使您能够以一种与供应商细节相当分离的方式以编程方式使用数据库，因此，一旦您告诉它它正在使用哪种方言，您就不必根据您是否在 MySQL 上做任何不同的事情， Oracle 或 SQL Server。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:07:59.110

阅读有关[Java 和 .Net 的关系持久性的信息](http://www.hibernate.org/)，我也会推荐[文档](http://www.hibernate.org/docs.html)

# c# - C#如何添加代码以在运行时执行

> ID：10831421
> 
> 赞同：2
> 
> 时间：2012-05-31T10:03:28.503
> 
> 标签：c#, .net, vb.net, reflection

我知道这个要求对你们中的许多人来说可能看起来很奇怪，但这是我的项目要求之一。是否可以在 Sp 中添加代码并在 .Net exe 中执行。就像单击按钮一样，我调用一个 SP，SP 返回几行代码，然后程序执行代码。

如果可以，那有可能吗？

我正在使用框架 1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:21:08.667

搜索“动态 c# 代码执行”，谷歌从 2002 年开始提出这个博客……这可能对你有用……

[http://www.west-wind.com/presentations/dynamiccode/dynamiccode.htm](http://www.west-wind.com/presentations/dynamiccode/dynamiccode.htm)

这篇文章引用了[System.CodeDom.Compiler](http://msdn.microsoft.com/en-us/library/system.codedom.compiler%28v=vs.71%29.aspx)来动态编译程序集，然后使用反射来执行该代码。听起来很有趣 ;）

编辑：正如 DaveL 建议的那样：[是否可以动态编译和执行 C# 代码片段？](https://stackoverflow.com/questions/826398/is-it-possible-to-dynamically-compile-and-execute-c-sharp-code-fragments)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:13:20.817

如果您正在谈论将 TSQL 编译到表中，然后稍后通过 C# 运行此 TSQL，是的，这是可能的。您需要做的是为 TSQL 脚本文件 (.sql) 编写一个简单的解析器。解析器将通读 SQL 脚本，并在每个`GO`语句中，将 TSQL 语句添加到相关的 SQL Server 表中（该表可能有两列 1.要运行的数据库/要运行的进程名称。2.查询本身。 ）。然后，您可以在运行时动态执行这些 TSQL 块。

如果您正在谈论运行编译到 SQL Server 数据表中的 C#，这是一个不同的球游戏，我不知道有一种简单的方法可以做到这一点（这是可能的）。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:27:41.723

另一种可能：

通过使用数据库中的某些二进制数据类型[`varbinary`](http://msdn.microsoft.com/en-us/library/ms188362%28v=sql.100%29.aspx)，您可以将程序集作为二进制数据存储在表中。然后，您可以从数据库中读取该二进制数据，将其存储在本地，通过 加载程序集[`Assembly.LoadFrom()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.loadfrom%28v=vs.71%29)，然后使用反射找到一些您可以使用的特殊类型或入口点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:14:38.070

您可能想要 DLR（其中 D 代表 Dynamic），不幸的是，这是 .NET 4.0 以上版本。

听起来你在一个可怕的遗留代码地狱中；而不是你而不是我。

您可以创建自己的脚本语言以在您的应用程序中运行，但这会很慢且不理想。像 YACC 这样的东西会让你分道扬镳，但这是一个坎坷的旅程（已经看到有人在 Java 中尝试这种行为）。

# ruby-on-rails-3 - 向haml列表项添加唯一ID

> ID：10831422
> 
> 赞同：1
> 
> 时间：2012-05-31T10:03:30.937
> 
> 标签：ruby-on-rails-3, attributes, haml, rspec-rails

我有以下代码行：

```
%li= link_to "Home", main_app.root_path 
```

我现在希望在迷你吧项目中包含一个用于自动化测试目的的 ID，但我不确定如何去做，我尝试了以下方法：

```
%li(id = "minibar_home")= link_to "Home", main_app.root_path 
```

但是通过firebug或查看源代码检查时似乎没有添加ID。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:11:39.973

```
%li{:id => "minibar_home"}= link_to "Home", main_app.root_path 
```

或者

```
%li#minibar_home= link_to "Home", main_app.root_path 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:09:16.903

```
%li#minibar_home= link_to "Home", main_app.root_path 
```

# android - android中的方向变化

> ID：10831429
> 
> 赞同：2
> 
> 时间：2012-05-31T10:03:58.050
> 
> 标签：android, android-orientation

我正在使用 getLastNonConfigurationInstance() 来保存对象，同时在我的活动中更改方向。现在它已被弃用。最好的替代方法是什么？文档说“使用片段”。但我需要使用活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:20:25.723

对于保存状态，使用`onSaveInstanceState(Bundle savedInstanceState)`. 您可以在`onCreate`或 中恢复保存的状态`onRestoreInstanceState(Bundle savedInstanceState)`。

```
 @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
      // Save UI state changes to the savedInstanceState.
      // This bundle will be passed to onCreate if the process is
      // killed and restarted.
      savedInstanceState.putBoolean("MyBoolean", true);
      savedInstanceState.putDouble("myDouble", 1.9);
      savedInstanceState.putInt("MyInt", 1);
      savedInstanceState.putString("MyString", "Hello Android");
      super.onSaveInstanceState(savedInstanceState);
    } 
```

[Bundle](https://developer.android.com/reference/android/os/Bundle.html)本质上是一种存储“键值对”映射的方式，它将被传递给 onCreate 和 onRestoreInstanceState，您可以在其中提取如下值：

```
 @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
      super.onRestoreInstanceState(savedInstanceState);
      // Restore UI state from the savedInstanceState.
      // This bundle has also been passed to onCreate.
      boolean myBoolean = savedInstanceState.getBoolean("MyBoolean");
      double myDouble = savedInstanceState.getDouble("myDouble");
      int myInt = savedInstanceState.getInt("MyInt");
      String myString = savedInstanceState.getString("MyString");
    } 
```

# asp.net - 未显示的点赞数

> ID：10831432
> 
> 赞同：0
> 
> 时间：2012-05-31T10:04:07.750
> 
> 标签：asp.net, facebook, facebook-like

我在我的网站上嵌入了一个类似 FB 的按钮，引用了我的 facebook 页面。但是，除非我登录到我的 FB 帐户，否则我的 Facebook 页面的点赞数不会显示？

如果我登录到我的帐户，按钮显示为（抱歉无法粘贴图像）：

**[LIKE] [F] 200 人喜欢这个 - 成为你的第一个朋友 - 管理页面 - 见解**

如果我没有登录，它会显示为：

**[LIKE] [F] 成为你的第一个喜欢这个的朋友**

不管我的登录状态如何，它不应该显示喜欢的数量吗？（我认为如果我登录 Chrome 浏览器但在 Firefox 中显示带有类似按钮的页面，我会有相同的行为）

谢谢您的帮助！

克里斯。

# javascript - javascript中的同源策略

> ID：10831444
> 
> 赞同：0
> 
> 时间：2012-05-31T10:04:54.930
> 
> 标签：javascript, same-origin-policy, cross-domain-policy

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script> 
```

在这里，我们也正在访问来自另一个域的资源。
但是在这里，由于相同的原产地政策，我们没有遇到任何问题。那么，**脚本**标签是否能够从其他域访问资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:08:20.250

SCRIPT 标签是 HTML，它本身与 JavaScript 没有任何关系。就像IMG标签一样，和同源策略无关

一旦你开始使用 JavaScript，你就会遇到一些源策略问题，然后你需要 API 端的 headers() 或 JSONP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:07:37.237

您可以包含几乎任何域的脚本文件。但是您不能从脚本文件中的不同域加载文件**。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:08:48.740

脚本标签的来源，如图像标签和其他资源可以托管在外部域上，同源策略适用于制作 XMLHTTPRequests，（ajax、json 等）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T10:09:51.657

是的，它有能力。因为`<script>`标签的功能仅限于加载可以解释为 JavaScript 的内容，并且除了自动运行它之外，您没有其他选项来解析收到的答案，因此它不会共享与能够运行任意请求的 AJAX 请求相关的许多安全问题如果不是 SOP，则以任意方式处理数据。

# scala - 分发 Play 2.0.1 框架应用程序

> ID：10831448
> 
> 赞同：4
> 
> 时间：2012-05-31T10:05:10.277
> 
> 标签：scala, playframework, playframework-2.0

最新版本的 play（我认为是 2.0.1）没有提供将应用程序打包到 Web 存档中的方法。有没有办法打包一个应用程序进行分发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:39:57.387

有一个插件，叫做[play2-war-plugin](https://github.com/dlecan/play2-war-plugin)。但是，请注意，本地播放的某些功能将无法从 servlet 容器访问。插件站点显示一个兼容性矩阵，显示当前状态和计划的改进。

正如 ron 在上面的评论中所说，您可以`play dist`在播放控制台中使用来生成独立的 jvm 应用程序。这是部署的推荐选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:41:24.820

WAR有一个模块，来自[它的公告](https://groups.google.com/forum/?fromgroups#!searchin/play-framework/war/play-framework/vYGI-JhT_lE/9gnP4nHjj7AJ)

> Play2War 是 Play 框架 2 的一个模块，用于将您的应用程序打包到标准 WAR 包中： [https ://github.com/dlecan/play2-war-plugin/](https://github.com/dlecan/play2-war-plugin/)
> 
> 以[http://servlet30.play-war.cloudbees.net/](http://servlet30.play-war.cloudbees.net/)为例（JBoss7 @Cloudbees）。
> 
> 与以前的版本一样，Play2War 插件仅支持 Servlet 3.x 容器，具有异步请求/响应模型（Tomcat7、JBoss 7、Jetty 8、...）
> 
> v0.3.2 修复了 WAR 文件中重复条目的问题（不修复“dist”任务的相同问题）。
> 
> 请记住，此插件仍处于 alpha 版本，项目需要测试人员（Weblogic、Websphere、...） [https://github.com/dlecan/play2-war-plugin/wiki/How-to-help](https://github.com/dlecan/play2-war-plugin/wiki/How-to-help)
> 
> 达米安

# android - 如何在 android 中删除共享偏好值？

> ID：10831451
> 
> 赞同：1
> 
> 时间：2012-05-31T10:05:18.850
> 
> 标签：android, sharedpreferences

我想清除存储在共享首选项中的值，我正在使用此代码。

```
/*  SharedPreferences myPrefs = this.getSharedPreferences("myPrefs",
            Context.MODE_PRIVATE);
            SharedPreferences.Editor editor = myPrefs.edit();
            editor.clear();
            editor.commit();   */ 
```

但得到这个错误。

```
The method getSharedPreferences(String, int) is undefined for the type new View.OnClickListener(){} 
```

private OnClickListener logoBarListener = new OnClickListener() { /* * (non-Javadoc) * * @see android.view.View.OnClickListener#onClick(android.view.View) */ public void onClick(View v) {

```
 if (v.getId() == R.id.img_bottom_home) {

            showProgressBar(MainScreen.class);

        } else if (v.getId() == R.id.img_bottom_basket) {

            showProgressBar(ShopBasketGet.class);

        } else if (v.getId() == R.id.img_bottom_notification) {

            showProgressBar(Notification.class);

        } else if (v.getId() == R.id.img_bottom_login) {
            SharedPreferences myPrefs = getSharedPreferences("myPrefs",
                    MODE_WORLD_READABLE);
            SharedPreferences.Editor editor = myPrefs.edit();
            editor.clear();
            editor.commit();   

            showProgressBar();
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:09:34.590

去掉`this`关键字（改成`this.getSharedPreferences()`.`getSharedPreferences()`指`this`的是内部类`View.onClickListener()`，而方法实际上是在Activity类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:25:04.570

试试这个方法

```
 SharedPreferences pref = YourActivityName.this.getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
 pref.edit().clear().commit(); 
```

我认为您尝试清除 onclick 事件而不是使用这种方式

```
SharedPreferences myPrefs = v.getContext().getSharedPreferences("myPrefs",Context.MODE_PRIVATE)
SharedPreferences.Editor editor = myPrefs.edit();
editor.clear();
editor.commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:25:57.577

使用以下代码片段

```
 Context context=YourActivityName.this;
    SharedPreferences myPrefs = context.getSharedPreferences("myPrefs",
    Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = myPrefs.edit();
    editor.clear();
    editor.commit(); 
```

希望这可以帮助，

维普尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:50:16.350

通过单击按钮调用 clearSharedPreferences() 方法并将类变量上下文传递给此方法

```
public class MyLinearLayout extends LinearLayout {
    SharedPreferences preferences;
    SharedPreferences.Editor editor;
    Context context;
    public MyLinearLayout(Context context) {
        super(context);
            this.context = context;
    }

    public MyLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context = context;
    }

    private void clearSharedPreferences(Context context) {
        preferences = context.getSharedPreferences("myPrefs",
                context.MODE_PRIVATE);
        editor = preferences.edit();
        editor.clear();
        editor.commit();
    }
} 
```

//你的代码会变成

```
if (v.getId() == R.id.img_bottom_home) {

            showProgressBar(MainScreen.class);

        } else if (v.getId() == R.id.img_bottom_basket) {

            showProgressBar(ShopBasketGet.class);

        } else if (v.getId() == R.id.img_bottom_notification) {

            showProgressBar(Notification.class);

        } else if (v.getId() == R.id.img_bottom_login) {
            clearSharedPreferences(context);
            showProgressBar();
        }
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T10:58:25.673

如果您在 Activity 类中创建 LinearLayout 类的对象，那么您应该在构造函数中传递 Context。

下面是狙击手

**活动课**

```
public class SampleActivity extends Activity
{
    public void onCreate(Bundle bundle)
     {
         MyLinearLayout layout = new MyLinearLayout(this); 
         -----
         -----
     }  
} 
```

**MyLinearLayout 类**

```
public class MyLinearLayout extends LinearLayout {
    private Context context;
    public MyLinearLayout(Context context) {
        super(context);
        this.context=context; 
        SharedPreferences preferences=context.getSharedPreference("pref",
                context.MODE_PRIVATE);

    } 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-07T11:33:30.700

```
Editor editor = getSharedPreferences("sharedPreferenceName", Context.MODE_PRIVATE).edit();
editor.clear();
editor.commit(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-05T17:48:47.170

删除 sharedPreference、一个 var 或所有 sharedPreference 的示例...

```
SharedPreferences sharedPreferences = getSharedPreferences("mysharedpreferences",MODE_PRIVATE);
                SharedPreferences.Editor editor = sharedPreferences.edit();
// a specific var of sharedPreference....
//Mark in the editor that a preference value should be removed, which will be done in the actual preferences once commit() is called.
editor.remove("mySharedVar");

//if you want remove all sharedPreference...
//Mark in the editor to remove all values from the preferences. Once commit is called, the only remaining preferences will be any that you have defined in this editor.
editor.clear();

editor.apply(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-05T09:42:09.313

你可以试试这堆代码。这些线条对我有用。希望它也对你有用。^_^

```
SharedPreferences preferences = getDefaultSharedPreferences(this);
SharedPreferences.Editor editor = preferences.edit();

editor.clear();
editor.apply(); 
```

# facebook - 关于 Facebook Score API 的一些问题

> ID：10831456
> 
> 赞同：2
> 
> 时间：2012-05-31T10:05:29.360
> 
> 标签：facebook, api

我使用 Score API 将分数上传到 facebook 并期待这样的东西[，](http://developers.facebook.com/attachment/cm_passing.jpg)或者[显示](http://developers.facebook.com/attachment/cm_high_score.jpg)在用户的墙上。但最终什么也没有发生。

下面的代码是使用 Facebook Android SDK 开发的

```
public void PostScore(int RequestID, int Score) {
    Bundle Parameters = new Bundle();
    Parameters.putString("score", String.valueOf(Score));

    try {
        this._AsyncRequest(String.format("/%s/scores", _UserProfile.getString("id")), Parameters, RequestID, "POST");
    }
    catch(Exception e) {

    }
} 
```

调用方法后，得到响应

```
true 
```

用 Open Graph Explorer 检查“/USER_ID/scores”，结果是

```
{  "data": [
    {
        "user": {
            "name": "XXX",
            "id": "###############"
        },
        "score": 1020,
        "application": {
            "name": "XXXXX",
            "namespace": "XXXXX",
            "id": "###############"
        }
    }]
} 
```

我想要的只是在用户的墙上用图片发布故事。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T07:23:22.550

分数不会自动发布。它们仅在特定条件下发布，即当用户：

获得新的高分（“高分故事”）。传递另一个朋友的分数（“传递故事”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T07:29:11.897

是的...分数不会自动发布。

如果他们只有在任何用户通过新用户通过之前的高分时才这样做。尽管人们总是可以在用户的​​活动记录或用户的游戏提要选项卡中检查这一点。

*`Note : one needs to give publish_actions permissions to post the score`*

# android - NFC typeb 卡未被任何 NFC 应用程序检测到（例如：nfctaginfo）

> ID：10831464
> 
> 赞同：1
> 
> 时间：2012-05-31T10:05:53.073
> 
> 标签：android, nfc

我正在研究 NEXSUS-S_4.0.4，需要读取 typeB(ISO 14443) 卡的数据并显示存储在卡上的一些信息。但是在我的应用程序或从 android-market 下载的任何其他设备上都没有检测到我的卡（例如：来自 NXP 的 NFC 标签信息）。所有其他卡都工作正常..

我提前谢谢你， 问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:18:20.713

这可能只是天线，它可能无法很好地调整您想要阅读的标签。（ISO14443-B 并不常见……）

为确保这不是软件问题，您可以尝试更换天线。为此：

*   取下 Nexus-S 的后盖。您应该看到天线和 NFC daugterboard 的触点。

*   取一根约 25 厘米长的隔离线。制作两个绕组，直径约为 4 到 6 厘米，并将其连接到天线引脚。

*   尝试阅读您的 B 标签。手机现在应该可以检测到标签，并且应该可以通过 IsoDep 进行 IO。

这种简易天线很可能比内置天线工作得更好，因为内置天线非常接近其他降低天线性能的金属部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T00:15:24.487

要对 B 类标签正确执行防冲突，您需要提供 AFI（或可能调用 AID）。它是一个单字节，用于定义您正在寻找的应用程序系列。否则标签将不会响应。

诚然，我不太了解 Android NFC 库，但可能有一种方法可以在尝试检测/读取标签时指定这一点。Android 4.4 有一种叫做 reader-mode 的东西，也许可以为给定的 AFI 设置为 Type-B 轮询模式。

# android - java.lang.IndexOutOfBoundsException：索引 11 无效，大小为 11

> ID：10831465
> 
> 赞同：0
> 
> 时间：2012-05-31T10:06:03.193
> 
> 标签：android, saxparser

我正在研究 sax XML 解析。

Logcat 错误如...

```
java.lang.IndexOutOfBoundsException: Invalid index 11, size is 11 
```

我得到了错误

```
map.put("pubdate", sitesList.getPubdate().get(i));

for (int i = 0; i < sitesList.getName().size(); i++) {
        System.out.println("value of i==============>"+i);
        HashMap<String, String> map = new HashMap<String, String>();

        System.out.println("\nvalue of title==============>"+ sitesList.getName().get(i));

        map.put("title", sitesList.getName().get(i));
        map.put("pubdate", sitesList.getPubdate().get(i));
        map.put("desc", sitesList.getDesc().get(i));

         items.add(map);

    } 
```

感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:10:23.130

您确定 sitesList.getName() 的大小与 sitesList.getPubdate() 的大小相同吗？

因为该异常的唯一原因是 sitesList.getName() 大于 sitesList.getPubdate() :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:09:04.047

我认为这里的站点列表大小，

使用`sitesList.size()` **代替** `sitesList.getName().size()`

```
for (int i = 0; i < sitesList.size(); i++) {

        System.out.println("value of i==============>"+i);
        HashMap<String, String> map = new HashMap<String, String>();

        System.out.println("\nvalue of title==============>"+ sitesList.get(i).getName());

        map.put("title", sitesList.get(i).getName());
        map.put("pubdate", sitesList.get(i).getPubdate());
        map.put("desc", sitesList.get(i).getDesc());

        items.add(map);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:33:28.660

谢谢大家，最后我得到了解决我的问题的解决方案，这里的 sitesList.getName() 比 sitesList.getPubdate() 大，所以现在我使用

for (int i = 0; i < sitesList.getPubdate().size(); i++) 代替
for (int i = 0; i < sitesList.getName().size(); i++)

```
for (int i = 0; i < sitesList.getPubdate().size(); i++) {
        System.out.println("value of i==============>"+i);
        HashMap<String, String> map = new HashMap<String, String>();

        map.put("title", sitesList.getName().get(i));
        map.put("pubdate", sitesList.getPubdate().get(i));
        map.put("desc", sitesList.getDesc().get(i));

         items.add(map);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:15:56.890

你的循环看起来像：

```
for (int i = 0; i < sitesList.size(); i++) {
        System.out.println("value of i==============>"+i);
        HashMap<String, String> map = new HashMap<String, String>();

        System.out.println("\nvalue of title======>"+ sitesList.get(i).getName());

        map.put("title", sitesList.get(i).getName());
        map.put("pubdate", sitesList.get(i).getPubdate());
        map.put("desc",sitesList.get(i).getDesc());

         items.add(map);

    } 
```

# mysql - 在 cakePHP 中使用 WHERE 等效的 SELECT 查询

> ID：10831467
> 
> 赞同：3
> 
> 时间：2012-05-31T10:06:17.397
> 
> 标签：mysql, cakephp

我的控制器上有这些代码，可以让用户将输入的值输入到文本框中：

```
$username = $this->request->data['employee_account']['username'];
$password = $this->request->data['employee_account']['password']; 
```

我希望使用 cakePHP 代码实现这种查询：

```
"SELECT * FROM accounts WHERE username = '$username' AND password = '$password'"; 
```

我如何使用 find() 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:56:10.887

StuR 几乎做对了，他只是在转义和绑定参数方面走错了路。

```
$this->EmployeeAccount->find('all', array(
    'conditions' => array(
        'accounts.username = ?' => $username,
        'accounts.password = ?' => $password
    )
)); 
```

此外，我不禁认为您正在尝试使用此登录某人？[CakePHP 有一个内置的身份验证组件](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)，这样就无需编写`find()`这样的组件了。此外，因为您需要帮助才能在 Cake 中编写一个非常基本的 SQL 查询，所以我建议您阅读手册中的[检索您的数据](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:25:25.520

假设您有名称帐户的模型

```
$login = $this->Account->find('first', array(
                        'conditions' => array(
                            'Account.email' => $username,
                            'Account.password' => $password
                        )
                    ));
    if ($login)
    {//do something}
    else
    {
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:20:38.873

首先，我会过滤您的请求数据并为您的 SQL 查询提取变量：

```
extract(array_map('mysql_real_escape_string', $this->request->data['employee_account'])); 
```

那么这应该做的工作：

```
$this->accounts->find('all', array('conditions' => array('accounts.username' => $username, 'accounts.password' => $password))); 
```

# php - 执行相同的 php 脚本，需要不同的内存

> ID：10831470
> 
> 赞同：2
> 
> 时间：2012-05-31T10:06:28.193
> 
> 标签：php, memory

当我运行以下 php 脚本在我的本地机器上做一些统计时，它适用于`init_set('memory_limit', 100M)`，

但是，当我在另一个 Web 服务器中执行相同的 php 脚本，处理相同的文件时（我确信这一点），它不起作用。

我将 memory_limit 更改为 1000M，它仍然不起作用，给出异常：“致命错误：允许的内存大小为 1048576000 字节已用尽（试图分配 32 个字节）”。最后我改为`init_set('memory_limit', 1300M)`，它的工作原理！

两台机器的php版本相同：

```
PHP 5.3.6 (cli) (built: Mar 28 2012 02:18:34) 
Copyright (c) 1997-2011 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies
    with eAccelerator v0.9.6.1, Copyright (c) 2004-2010 eAccelerator, by eAccelerator 
```

以下是主要脚本：

```
 protected function _insertTable($logType, $conf, $logFileName) {

        $logPath = $this->_getLogDirPath($logType, $conf) . DIRECTORY_SEPARATOR . $logFileName;
        $fileContent = file_get_contents($logPath);
        if ( !fileContent ) return;

        $fields = array_keys($conf['fields']);

        $dao = new dao\StatLogDao($this->_entities[$logType]);

        $lines = explode("\n", $fileContent);
$fileContent = null;
        unset($fileContent);
        foreach ( $lines as $line ) {
            $line = trim($line);
            if ( !$line ) continue;

            $lineData = explode($conf['glue'], $line);
            if ( !$lineData[0] ) continue;

            $entity = $this->_getEntity($logType);
            foreach ($fields as $k => $f) {
                $entity->$f = $lineData[$k];
            }

            try {
              $dao->replace($entity, $fields);
            } catch (Exception $e) {
                echo $e->getMessage() . "\n";
            }
$entity = null;
            unset($entity);
$line = null;

            unset($line);
        }
$lines = null;
        unset($lines);
$dao = null;
        unset($dao);
    } 
```

我很困惑，似乎“未设置”不会释放足够的内存，请帮帮我。非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:07:37.643

您可能安装了不同的模块...

还有很多事情会导致您的脚本崩溃（似乎是一个无限循环）：

*   执行脚本的网络服务器的不同用户权限
*   用于访问远程服务器的不同 PHP.ini 设置（安全模式...）
*   您要访问的文件具有不同的读取权限
*   不同的 MySQL 服务器版本
*   不同的 MySQL 用户/表/...权限

我很确定您收到的错误是因为您的脚本出错而不是因为不同的内存使用情况。您还应该检查允许的内存大小`memory_limit`是否真的可以通过`ini_set()`. `echo ini_get('memory_limit');`尝试设置后在两台机器上检查它。

要真正确保两台服务器“相同”，将输出转储`phpinfo();`到两个文件中并`diff`对其执行操作！只有服务器名称、唯一 ID 和某些日期应该不同......

# c# - 按钮中的 Html.ActionLink

> ID：10831472
> 
> 赞同：-5
> 
> 时间：2012-05-31T10:06:35.097
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3, razor

我正在尝试使用按钮连接到控制器中的方法。我可以通过此链接进行连接：

```
@Html.ActionLink("Print", "Print", new { id = Model.SalesContractId}) 
```

但我不想要一个链接，我希望我的对话框上的按钮来做到这一点。我尝试了以下方法：

```
$('#btnDialogPrint').click(function () {
        location.href = '<%= Url.Action("Print", "Print", new { id = Model.SalesContractId}) %>'; 

    }); 
```

但它只是将我重定向到一个说错误请求的页面。

```
namespace Contract.Controllers
{

    public class ContractController : Controller
    {

        CompassEntities db = new CompassEntities();

        public ActionResult Print(int id)
        {
            return View(""); // This can be removed and Print code may be added
        } 
```

不要担心里面的代码，一旦我进入这个方法，我就会得到它。

我可以在这里附上一个链接吗？

```
<input type="button" value="Print" id="btnDialogPrint" /> 
```

**我的视图编辑.cshtml**

```
@model Contract.Models.tbSalesContract
<!DOCTYPE html>
<html>
<head>
    <title>Edit Contract</title>
</head>
<!-- Script section -->
<script src="@Url.Content("~/Scripts/Views/Contract.js")" type="text/javascript"></script>
<!-- Templates -->
<script id="tmplDebtorList" type="text/x-jquery-tmpl">    
    <div class="DebtorResults">
    <span><div style="width:80px;float:left;">${CustomerAccNo}</div></span><span><a href="#" class="debtorLink" value="${DebtorId}">${CustomerName}</a></span>
    </div>
</script>
<body>
    @using (Html.BeginForm("Edit", "Contract", FormMethod.Post, new { id = "frmMain",name="frmMain" }))
    { 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T10:08:44.020

您在 jQuery 中的链接与链接不匹配`ActionLink`。另外，使用时`Url.Action`不要指定单词`Controller`，它会为您输入。

**编辑：看到您编辑的帖子后，您没有使用正确的控制器。**

尝试这个：

```
$('#btnDialogPrint').click(function () {
    location.href = '<%= Url.Action("Print", "Contract", new { id = Model.SalesContractId}) %>'; 
}); 
```

**Edit2：我知道问题所在！**您将 Razor 语法与 Web 表单语法混合在一起！尝试这个：

```
$('#btnDialogPrint').click(function () {
    location.href = '@Url.Action("Print", "Contract", new { id = Model.SalesContractId})'; 
}); 
```

**另一个问题是您尝试在 JavaScript 文件中执行此操作，您不能在必须位于视图中的 JavaScript 文件中使用 Razor 语法**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T11:04:27.007

波斯特; 你混淆了 Razor 和 aspx ..

使用 @Url.Action("Print", "Contract", new { id = Model.SalesContractId}) 创建您的链接，即

```
$('#btnDialogPrint').click(function () {
        location.href = '@Url.Action("Print", "Contract", new { id = Model.SalesContractId})';

    }); 
```

你在哪里做过这个？

此外，您的控制器是合同而不是打印

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T10:53:26.623

您在一个代码片段中使用 Razor，在下一个代码片段中使用 asp。这是故意的吗？

假设您只想调用控制器：

首先尝试在您的代码中更改以下内容：

```
$('#btnDialogPrint').click(function () {
        location.href = '@Url.Action("Print", "Contract", new { id = Model.SalesContractId})'; 

    }); 
```

或者

```
<%=Html.ActionLink("Print", "Contract", new { id = Model.SalesContractId})%> 
```

否则：

使用阿贾克斯：

体内：

```
<input type="button" value="Print" id="btnDialogPrint" onclick="print()"/> 
```

在脚本中：

```
<script type="text/javascript">
    function print() {
            $.get('@Url.Action("Print", "Contract", new { id = Model.SalesContractId})');
        }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T12:02:42.030

这就是我一直在寻找的，但谢谢大家。

```
$('#btnDialogPrint').click(function () {
       window.location = '../Print/' + $('#SalesContractId').val();
    }); 
```

# iphone - 如何让视图控制器在动画之前绘制其视图？

> ID：10831477
> 
> 赞同：2
> 
> 时间：2012-05-31T10:07:04.970
> 
> 标签：iphone, uiview, uiviewcontroller, uianimation

我有一个视图控制器，它的工作是显示一个大图像，最初的大小适合屏幕，用户可以平移和缩放。图像是用手机的相机拍摄的，然后保存到设备并使用`+[UIImage imageWithData:]`.

我在导航堆栈中显示控制器，但我使用这样的淡入淡出过渡：

```
SGBImageController *imageController = [[[SGBImageController alloc] init] autorelease];
imageController = <theImage>;
[imageController loadView];

[UIView transitionWithView:self.navigationController.view
                  duration:0.33
                   options:UIViewAnimationOptionAllowAnimatedContent
                          |UIViewAnimationOptionTransitionCrossDissolve
                animations:^{

    [self.navigationController pushViewController:imageController animated:NO];

} completion:nil]; 
```

淡入淡出动画应该是平滑的，但它很生涩，并且在查看乐器时我发现它的所有时间都在`CA::Layer::Render`. 我添加了这`loadView`条线以试图强制它显示它的视图，但它没有帮助。如何让视图控制器在动画之前自行绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:18:10.930

您不应该直接调用 loadView ，那是操作系统处理的事情。相反，只是`imageController.view`以任何方式引用都会开始加载。您可以使用委托回调或 NSNotification 在调用 SGBImageController 的`viewDidLoad`方法时通知您的类，然后从那里开始您的动画。

# c# - 使用 System.Diagnostics.Process 启动第三方应用程序

> ID：10831478
> 
> 赞同：1
> 
> 时间：2012-05-31T10:07:06.127
> 
> 标签：c#, process, singleton

所有，我正在开发一个需要在运行时启动另一个应用程序的应用程序。为了启动我正在使用的第三方应用程序`System.Diagnostics.Process`并确保我不会两次启动第三方应用程序，我采用了单例模式。

单例工作是必需的，但`Process.Start()`方法不是。那是虽然我得到了`Process`从单例返回的相同对象，但`Start()`正在启动第三方应用程序的另一个实例。

从[MSDN - Process.Start() 页面](http://msdn.microsoft.com/en-us/library/e8zac0ca.aspx)：

```
"Starts (or reuses) the process resource that is specified by the StartInfo property 
of this Process component and associates it with the component." 
```

建议它应该重用`Process`. 我错过了什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:19:17.487

这是我用来启动第三方应用程序的功能：

```
 public static void ProcessStart(string ExecutablePath, string sArgs, bool bWait)
    {
        System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.EnableRaisingEvents = false;
        proc.StartInfo.FileName = ExecutablePath;

        if(sArgs.Length > 0)
            proc.StartInfo.Arguments = sArgs;

        proc.Start();

        if(bWait)
            proc.WaitForExit();

        if(ProcessLive(ExecutablePath))
            return true;
        else
            return false;               

    } 
```

ExecutablePath：可执行文件的完整路径

sArgs：命令行参数

bWait：等待进程退出

在我的情况下，我使用辅助函数来确定进程是否已经在运行。这不完全是您正在寻找的，但它仍然可以工作：

```
 public static bool ProcessLive(string ExecutablePath)
    {
        try
        {

            string strTargetProcessName = System.IO.Path.GetFileNameWithoutExtension(ExecutablePath);

            System.Diagnostics.Process[] Processes = System.Diagnostics.Process.GetProcessesByName(strTargetProcessName);

            foreach(System.Diagnostics.Process p in Processes)
            {
                foreach(System.Diagnostics.ProcessModule m in p.Modules)
                {
                    if(ExecutablePath.ToLower() == m.FileName.ToLower())
                        return true;
                }
            }
        }
        catch(Exception){}

        return false;

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:14:39.077

也许您应该考虑使用`Process.GetProcessesByName`来了解您正在启动的应用程序是否已经在运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:20:46.120

如下使用它

```
Process[] chromes = Process.GetProcessesByName("ProcessName"); to check whether ur process is already running or not. Based on the u can use the process already running. 
```

# java - 如何从带有 GridLayout 的 JFrame 中获取组件？

> ID：10831480
> 
> 赞同：1
> 
> 时间：2012-05-31T10:07:09.937
> 
> 标签：java, swing, jframe, jbutton, grid-layout

我有一个关于 Java 的问题`JFrame`，特别是关于 Java 的问题。假设我有一个`JFrame`我正在使用的`GridLayout`. 假设我在`JButton`s 中添加了 s，`JFrame`我怎样才能使用它的位置访问我想要的那个（通过位置，我的意思是 ax 和 ay，用于定义网格上的确切位置）。例如，我尝试了几种方法，`getComponentAt(int x, int y)`并且发现这些方法在与 结合使用时不能按预期工作`GridLayout`，或者至少在我的情况下不能按预期工作。所以我尝试使用`getComponent()`，这似乎很好。

对我来说似乎在正确轨道上的最新方法是（假设我有 a`JFrame`有`GridLayout`7 行和 7 列，x 作为列，y 作为行）：

```
public JButton getButtonByXAndY(int x, int y) {
    return (JButton) this.getContentPane().getComponent((y-1) * 7 + x);
} 
```

[图片 http://www.freeimagehosting.net/newuploads/9d6hq.jpg](http://www.freeimagehosting.net/newuploads/9d6hq.jpg)

使用上面的方法，假设我想获取`JButton`at (4, 4)，即 中的第 25 个 JButton `JFrame`，我首先会索引前 21 个按钮，然后再添加 4 个，最后访问我想要的 JButton。问题是这仅在理论上起作用。有任何想法吗？

PS 很抱歉链接到外部网站，但堆栈溢出不允许我上传图片，因为我没有所需的声誉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:57:33.770

此[示例](https://stackoverflow.com/a/7706684/230513)比较了两种方法：

1.  维持 a`List<JButton>`并以代数方式计算指数。

2.  扩展`JButton`并允许每个按钮保持其自己的网格位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:55:45.143

GridLayout 从 0,0 开始，JButton 在（GridLayout 中的 4,4 位置）开始，这意味着 JFrame 中的第 32 个（4*7+4 不是 3*7+4）JButton。对不起，如果我误解了问题:(

你可以试试：

```
 public static JButton getButtonByXAndY(int x, int y) {
        return (JButton) f.getContentPane().getComponent(y * 7 + x);
    } 
```

# vaadin - 嗨，我想将 Birt 报告添加到 Vaadin Portlet

> ID：10831483
> 
> 赞同：0
> 
> 时间：2012-05-31T10:07:24.597
> 
> 标签：vaadin, birt

我是 Vaadin Portlets 的新手。我已经使用 Vaadin 开发了几个 Portlet，我现在想将 Birt 报告添加到 Vaadin portlet，但我不知道如何执行此操作，所以请你帮我解决这个问题，或者如果你有任何帮助文档，那么它会很有帮助的

提前致谢！

阿扎德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:42:09.383

Vaadin 与 Swing 几乎相同。然后我在 Internet [http://www.eclipse.org/forums/index.php/mv/msg/119253/721257/](http://www.eclipse.org/forums/index.php/mv/msg/119253/721257/)中找到了一段代码，并做了一些小的修改，只是为了在 Vaadin 窗口中运行：

```
package com.example.testejanelas;

import java.io.ByteArrayOutputStream;
import java.net.URL;
import java.net.URLClassLoader; 
import java.util.HashMap;

import org.eclipse.birt.core.framework.Platform;
import org.eclipse.birt.report.engine.api.EngineConfig;
import org.eclipse.birt.report.engine.api.HTMLRenderOption;
import org.eclipse.birt.report.engine.api.IReportEngine;
import org.eclipse.birt.report.engine.api.IReportEngineFactory;
import org.eclipse.birt.report.engine.api.IReportRunnable;
import org.eclipse.birt.report.engine.api.IRunAndRenderTask;

import com.vaadin.ui.Label;
import com.vaadin.ui.Window;

public class ViewParaBIRT extends Window {

private static final long serialVersionUID = 1L;

IReportEngine engine = null;
EngineConfig config = null;
Label label;

public ViewParaBIRT(){
    setSizeFull();
    startPlatform();
    System.out.println("Started");
    runReport();
    stopPlatform();
    System.out.println("Finished");
    center();
}

public void runReport() {
    try {
        IReportRunnable design = null;
        design = engine
                .openReportDesign("D:\\workspace.carlos\\TesteJanelas\\src\\com\\example\\birt\\new_report.rptdesign");
        IRunAndRenderTask task = engine.createRunAndRenderTask(design);
        HTMLRenderOption options = new HTMLRenderOption();
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bos.toString("ISO-8859-1");
        options.setOutputStream(bos);
        options.setOutputFormat("html");
        options.setEmbeddable(true);
        task.setRenderOption(options);
        task.run();
        task.close();
        label = new Label(bos.toString(),Label.CONTENT_XHTML);
        addComponent(label);
        System.out.println("Finished Gen");
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

public void startPlatform() {
    try {
        config = new EngineConfig();
        HashMap context = new HashMap();
        URLClassLoader cl = (URLClassLoader) TestBirtViewer.class
                .getClassLoader();
        URL[] myurls = cl.getURLs();
        Class cl1 = cl.loadClass("com.mysql.jdbc.Driver");
        context.put("PARENT_CLASSLOADER", cl);
        config.setAppContext(context);
        Platform.startup(config);
        IReportEngineFactory factory = (IReportEngineFactory) Platform
                .createFactoryObject(IReportEngineFactory.EXTENSION_REPORT_ENGINE_FACTORY);
        engine = factory.createReportEngine(config);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public void stopPlatform() {
    engine.destroy();
    Platform.shutdown();
}

} 
```

# blackberry - 从黑莓中的网址下载pdf文件？

> ID：10831486
> 
> 赞同：0
> 
> 时间：2012-05-31T10:07:30.743
> 
> 标签：blackberry, java-me, download

我正在开发一个黑莓应用程序，其中我从网络服务获得了一个 pdf-url。我需要使用该 URL 下载该 PDF 并将其保存到我的 SD 卡。

请让我知道，是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:45:12.913

很抱歉回复得很晚，我在这项任务中取得了成功。我知道这不是一项“费力的任务”，但这对我来说是一个教训。我为此任务使用了以下线程代码。

```
private class DownloadCombiner extends Thread {
        private String remoteName;
        private String localName;
        private int connection;
        private int chunksize;
        public DownloadCombiner(String remoteName, 
                String localName, int connection, int chunksize) {
            this.remoteName = remoteName;
            this.localName = localName;
            this.connection = connection;
            this.chunksize = chunksize;
        }
        public void run() {
            try {
                int chunkIndex = 0;
                int totalSize = 0;
                /*
                 * File connection
                 */
                 FileConnection file =(FileConnection)Connector.open(localName);
                 if (!file.exists()) {
                     file.create();
                 }
                 file.setWritable(true);
                 OutputStream out = file.openOutputStream();
                 /*
                  * HTTP Connections
                  */
                 String currentFile = remoteName + connectionType();
                 //log("Full URL: " + currentFile);
                 HttpConnection conn;
                 InputStream in;
                 int rangeStart = 0;
                 int rangeEnd = 0;
                 while (true) {
                     //  log("Opening Chunk: " + chunkIndex);
                     conn = (HttpConnection) Connector.open(currentFile, 
                             Connector.READ_WRITE, true);
                     rangeStart = chunkIndex * chunksize;
                     rangeEnd = rangeStart + chunksize - 1;
                     // log("Requesting Range: " + rangeStart + 
                     //      "-" + rangeEnd);
                     conn.setRequestProperty("Range", "bytes=" +
                             rangeStart + "-" + rangeEnd);
                     int responseCode = conn.getResponseCode();
                     if (responseCode != 200 && responseCode != 206)
                     {
                         // log("Response Code = " + conn.getResponseCode());
                         break;
                     }
                     // log("Retreived Range: " + conn.getHeaderField("Content-Range"));
                     in = conn.openInputStream();
                     int length = -1;
                     byte[] readBlock = new byte[256];
                     int fileSize = 0;
                     while ((length = in.read(readBlock)) != -1) {
                         out.write(readBlock, 0, length);
                         fileSize += length;
                         Thread.yield(); // Try not to get cut off
                     }
                     totalSize += fileSize;
                     // log("Chunk Downloaded: " + fileSize + " Bytes");
                     chunkIndex++; // index (range) increase
                     in.close();
                     conn.close();
                     in = null;
                     conn = null;
                     /*
                      * Pause to allow connections to close and other Threads
                      * to run.
                      */
                     Thread.sleep(1000);
                 }
                 // log("Full file downloaded: " + totalSize + " Bytes");
                 out.close();
                 file.close();
                 // log("Wrote file to local storage");
            } catch (Exception e) {
                System.out.println(e.toString());
            }
        }
        private String connectionType() {
            switch (connection) {
            case 1:
                return ";deviceside=false";
            case 2:
                return ";deviceside=true;interface=wifi";
            default:
                return ";deviceside=true";
            }
        }
    } 
```

# servlets - 是否可以在 servlet 中检测到用户使用 VPN 连接

> ID：10831492
> 
> 赞同：0
> 
> 时间：2012-05-31T10:07:47.473
> 
> 标签：servlets, vpn, jaas

我需要根据远程（VPN）或本地连接为用户提供对 Web 应用程序中特定功能的不同访问权限。是否可以？

我正在使用 Websphere 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:25:37.643

您可能有两个（或一个仅用于 VPN）单独的 servlet 来处理 VPN 和本地客户端。然后将请求转发到具有源标志属性的当前 servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:28:28.217

并不真地。大多数 VPN 为用户提供一个单独子网上的 IP 地址，因此您应该能够通过他们的 IP 地址告诉 VPN 用户。

# regex - 将 XForm 节点放入正则表达式

> ID：10831501
> 
> 赞同：0
> 
> 时间：2012-05-31T10:08:12.023
> 
> 标签：regex, validation, xpath, xforms

我正在尝试使用正则表达式比较 2 个 XForm 节点。例如，

*   节点 1 是 /data/Q1
*   节点 2 是 /data/Q2

我想要做的是在节点 2 中放置一个约束，说节点 2 的值不能大于节点 1 中的值。我将以下语句放在绑定元素中：

```
constraint=regex(/data/Q1 >= /data/Q2) 
```

但这不起作用。

无论如何我可以让正则表达式从以前的节点读取一个值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:46:11.547

`regex()`在 xpath 或 xforms 中没有定义命名的函数。因此，如果这不是特定于实现的功能（如果是 - 请将您正在使用的 xforms 引擎添加到您的问题中），即使使用有效的正则表达式，该约束也将不起作用。如果要检查节点的值是否与正则表达式匹配，则应使用[`matches()`](http://www.w3.org/TR/xpath-functions/#func-matches)XPath 中的函数。

有了这个`matches()`函数，应该可以使用 XPath 作为函数的参数。假设节点`/data/pattern`包含一个有效的正则表达式模式作为字符串，并且`/data/value`具有检查它是否与该模式匹配的值，`matches(/data/value, /data/pattern)`应该可以工作。您甚至可以将其放入:的`constraint`属性中。`xforms:bind``constraint="matches(/data/value, /data/pattern)"`

通常，正如 Martin 评论的那样，您不需要该`matches()`函数来进行两个节点的简单值比较。只需使用XPath 中可用的常用[比较表达式。](http://www.w3.org/TR/xpath20/#id-comparisons)

# ios - 如何解决错误（clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用））

> ID：10831506
> 
> 赞同：3
> 
> 时间：2012-05-31T10:08:34.487
> 
> 标签：ios

我从[这里](http://www.rewenderlich.com)下载了一个示例源代码，但是当我打开它时，我收到错误“Clang: E​​rror: Linker Command Failed With Exit Code 1 (Use -V To See Invocation)”

# wordpress - 通过 mod_rewrite 匹配并替换 2 个特定的 url

> ID：10831512
> 
> 赞同：0
> 
> 时间：2012-05-31T10:09:08.993
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite

我有一个有效的 WordPress 永久链接设置。我使用以下 .htaccess 在 Apache 上运行

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

现在我知道正在使用一些不再有效的旧链接：

```
http://server2.server.eu/~myclient/diensten/overzicht-diensten/
http://server2.server.eu/~myclient/werken-bij/vacatures/ 
```

我可以在 .htaccess 中添加什么以将它们写入（分别）

```
http://www.domain.nl/diensten/overzicht-diensten/
http://www.domain.nl/werken-bij/vacatures/ 
```

在不影响永久链接设置的情况下

PS：我已将主机名设为虚构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:09:18.267

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^~myclient/(.*)$ http://www.domain.nl/$1 [R=301,L]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

# vbscript - 通过 VBScript 访问文件夹时传递用户名/密码

> ID：10831515
> 
> 赞同：1
> 
> 时间：2012-05-31T10:09:15.477
> 
> 标签：vbscript, credentials, fso

我有一个脚本，旨在从服务器上的用户旧配置文件中检索一些文件并将其复制到新的配置文件中，但是用户在通过服务器连接时没有对相关文件夹/文件的访问权限。

有没有办法通过以下功能传递用户名/密码？谢谢。

```
objFSO.FolderExists(folder_path)
objFSO.CopyFolder(folder_path)
objFSO.CopyFile(folder_path) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:40:45.050

您必须先将共享映射到驱动器号，然后

```
persistent = false
set objNetwork = WScript.CreateObject("WScript.Network")
objNetwork.MapNetworkDrive "driveletter:", "\\server\sharename", persistent, "username", "password" 
```

然后使用普通的文件系统对象进行复制，使用驱动器号或不使用驱动器号。一旦通过这种方式进行身份验证，就可以使用这些凭据执行其他操作。

# backbone.js - 为什么在加载时在 jQuery 中定义 BackboneJS 模型和视图并将其连接到窗口对象？

> ID：10831519
> 
> 赞同：0
> 
> 时间：2012-05-31T10:09:23.153
> 
> 标签：backbone.js

我看到很多教程在加载 jQuery 后初始化主干模型/视图。这是为什么？不能先定义吗？

例如**[链接](http://adamjspooner.github.com/coffeescript-meet-backbonejs/02/docs/script.html)**

```
jQuery ->

  class ListView extends Backbone.View

    el: $ 'body'

    initialize: ->
      _.bindAll @
      @counter = 0
      @render() 
```

您可以在文档加载之前定义类并在文档加载之后初始化视图/模型吗？

* * *

我还看到`window`为什么会这样定义模型/视图？

```
window.TodoView = Backbone.View.extend
  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:57:41.723

**为什么要在 jQuery 之后初始化 View？**

从[主干网页面](http://backbonejs.org/)；

> Backbone 唯一的硬依赖是 Underscore.js (> 1.3.1)。对于 RESTful 持久性，通过 Backbone.Router 的历史支持和使用 Backbone.View 的**DOM 操作**，包括 json2.js，以及**jQuery** (> 1.4.2) 或 Zepto。

[强调我的]

这就是那里的依赖关系。

**下定义的模型/视图`window`？**

它简化了这些小教程示例 - 一切都可以访问`window`，因此它为全局变量（ctors、变量、函数等）提供了一个有用的（如果混乱的话）倾销场。

IMO，对于较大的（非演示）项目，您应该使用类似[RequireJS](http://requirejs.org/)的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:59:05.943

我敢肯定，这样做是为了简单。当然，您可以（并且可能应该）在`jQuery(document).ready()`. 您也可以（并且可能应该）使用一个您自己的全局对象，以免污染全局空间。

# c# - 2 小时在微秒内丢失

> ID：10831521
> 
> 赞同：1
> 
> 时间：2012-05-31T10:09:30.577
> 
> 标签：c#, datetime

自 1.1.1970 以来，我有一个以微秒为单位的时间戳。我试图将其转换为

```
 yyyy.MM.dd HH.mm.ss.ffffff 
```

使用日期时间。一个例子是：1337060932000000 微秒结果应该是 May 15 2012, 7.48

但我得到的结果是休息 2 小时。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:14:58.960

您最有可能获得 UTC 日期，因为 Unix 纪元就是这个时区。确保您这样创建基准日期：

```
var epoch = new DateTime(1970,1,1, 0,0,0, DateTimeKind.Utc); 
```

一旦你有了它，你可以做类似的事情：

```
var localTime = epoch.AddMilliseconds(microseconds / 1000).ToLocalTime(); 
```

如果`microseconds`是您在上面提供的值，那么您获得的值`15/05/2012 07:48:52`就是您所期望的值。

但是在使用时要小心`ToLocalTime`，因为您只能确定这将是您的软件正在运行的计算机的本地时区，并且根据经验，我可以告诉您它并不总是您认为的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:24:05.937

感谢您的提示。我这样解决了这个问题：

```
 int offset = 2;
    DateTime d = new DateTime(1979,1,1, offset,0,0); 
```

这个例子被简化了。偏移量是在外部文件中指定的，因此您可以针对不同的时区轻松修改它。

# portlet - Portlet 存储库

> ID：10831527
> 
> 赞同：0
> 
> 时间：2012-05-31T10:09:49.477
> 
> 标签：portlet

我正在寻找要嵌入到门户网站 ( [Liferay](http://www.liferay.com) ) 中的 portlet。

由于 portlet 是标准化的（JSR-168 或 JSR-286），我一直在寻找 web 上的 portlet 解决方案，但没有得到很多结果。目前，我正在寻找一种新闻管理器portlet。以下是我发现的一些 portlet：

*   [https://wiki.jasig.org/display/PLT/Announcements+Portlet+Administration+Guide](https://wiki.jasig.org/display/PLT/Announcements+Portlet+Administration+Guide)
*   [https://sourcesup.cru.fr/newsportlet/](https://sourcesup.cru.fr/newsportlet/)

但我也在寻找其他的 portlet，一个 portlets 存储库将是完美的！这是我知道的：

*   [https://wiki.jasig.org/display/PLT/Home](https://wiki.jasig.org/display/PLT/Home)
*   [http://www.liferay.com/downloads/liferay-portal/community-plugins](http://www.liferay.com/downloads/liferay-portal/community-plugins)
*   [http://www.jboss.org/portletswap/portlet_catalog.html](http://www.jboss.org/portletswap/portlet_catalog.html)

那么，如果您有任何链接或信息要分享？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:13:07.717

你也可以检查这个：

[我的办公室24X7](http://www.myoffice24x7.com/)

这是有很多portlet，但它们是付费的，您仍然可以尝试试用版。

# python - Python（初学者）：CSV 列写入，时间自相关函数的意外输出

> ID：10831532
> 
> 赞同：1
> 
> 时间：2012-05-31T10:09:56.527
> 
> 标签：python, csv

尝试将第四列写入一组数据，如下所示

```
 8000.5   16745     0.1257
 8001.0   16745     0.1242
 8001.5   16745     0.1565
 8002.0   16745     0.1595 
```

其中有第二个数字（即 16745）在该特定文件中被计算的次数（它确实发生了变化，列表有几千个条目）。即如果这是整个文件

```
 8000.5   16745     0.1257   4
 8001.0   16745     0.1242   4
 8001.5   16745     0.1565   4
 8002.0   16745     0.1595   4 
```

我的代码的问题似乎在编写阶段，字典可以工作，如果我打印它，csv.reader 正在读取文件，但是当涉及到附加它拾取的唯一字典键时（字段 [1]）似乎为 16745 为 -1 的位置，并且该计数打印在所有行的第四列中。我不明白为什么它只针对这个值而不是每行与字典交叉引用。

即我得到

```
 8000.5   16745     0.1257   [count of -1 in column 2]
 8001.0   16745     0.1242   [count of -1 in column 2]
 8001.5   16745     0.1565   [count of -1 in column 2]
 8002.0   16745     0.1595   [count of -1 in column 2] 
```

任何帮助将不胜感激！

```
import numpy
import string
import csv
import sys
import os

time = []
water = []
itemcount ={}

global filename
filename = sys.argv[1]

f1 = open(sys.argv[1], 'rt')
for line in f1:
    fields = line.split()
    time.append(fields[0])
    water.append(fields[1])
f1.close()

for x in water:
    a = water.count(x)
    itemcount[x] = a

writerfp = open('watout.csv', 'w')
writer = csv.writer(writerfp)
for row in csv.reader(open(filename, 'r')):
    fields = line.split()
    row.append(itemcount[fields[1]])
    writer.writerow(row)
writerfp.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:23:57.817

我不确定情况是否如此，但也许您在最后一个循环中使用了错误的循环变量。

```
fields = line.split() 
```

`line`在整个循环过程中不会改变，因此您最终会使用与字典相同的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:52:13.637

您的错误的原因是在最后一个循环中。你应该下线

```
fields = line.split() 
```

并将下一行更改为

```
row.append(itemcount[row[1]]) 
```

您的代码还有一些问题：

1.  `filename`您在全局范围内声明为全局。这是没有意义的，因为无论如何它都是全球性的。而且，代码中的下一行`sys.argv[1]`再次使用。

2.  您应该使用`with`语句来打开文件。

3.  `t`在 Python 2.x 中打开文件时没有模式。

4.  您确定计数的算法效率*非常*低。您正在为列表的每个条目迭代整个列表。您可以一次性完成。

清理所有这些问题并删除所有未使用的变量，您可以使用以下代码完成工作：

```
import collections
with open(sys.argv[1], "r") as input:
    counts = collections.Counter(line.split()[1] for line in input)
    input.seek(0)
    with open("watout.csv", "w") as output:
        for line in input:
            count = counts[line.split()[1]]
            output.write(line.rstrip("\n") + "\t" + str(count) + "\n") 
```

# linux - 如何比较两个大文件并将结果获取到第三个文件？

> ID：10831534
> 
> 赞同：2
> 
> 时间：2012-05-31T10:10:01.247
> 
> 标签：linux, bash, shell, unix

我有两个文件

第一个文件是这样的：

```
www.example.com
www.domain.com
www.otherexample.com
www.other-domain.com
www.other-example.com
www.exa-ample.com 
```

第二个文件是这样的（;;; 之后的数字在 0-10 之间）：

```
www.example.com;;;2
www.domain.com;;;5
www.other-domain;;;0
www.exa-ample.com;;;4 
```

我想比较这两个文件并输出到第三个文件，如下所示：

```
www.otherexample.com
www.other-example.com 
```

两个文件都很大（超过 500mb）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T10:55:42.310

用于`comm(1)`比较两个排序的文件并给出差异。使用`grep(1)`和`sort(1)`将您的文件转换为适合与`comm`. 使用*进程替换*将`bash`其绑定在一起：

```
comm -23 <(sort file1.txt) <(grep -o '^[^;]*' file2.txt | sort) 
```

`-23`参数`comm`表示忽略文件 ( ) 共有的行`-3`和文件 2 ( ) 特有的行`-2`。根据您的具体规格，您可以使用`-1`,`-2`或`-3`.

`grep -o '^[^;]*' file2.txt`只是去掉第一个分号后的所有内容。您可以使用`sed(1)`它，但如果您只提取一行的一部分而不添加任何其他内容，`grep`通常会更快。

`comm`需要对输入文件进行排序，因此`sort`用于执行此操作。输出将被排序。`sort`使用特定于语言环境的排序规则，因此您可能需要根据所需的确切排序规则设置 LC_ALL=C。

请注意，在您的问题中，文件 2 中有 www.other-domain，但文件 1 中有 www.other-domain.com。鉴于输出，我假设这是文件 2 中的错字。

这将并行运行所有进程并通过它们流式传输文件数据，因此即使文件很大，也不会占用大量内存或任何额外的磁盘空间来存储临时文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T10:56:50.667

如果输入中`file2`包含的内容的子集`file1`，您可以只

```
sed 's/;.*//' file2 | fgrep -vxf - file1 >not-in-file2 
```

相同的一般思想可以应用于`diff`或`comm`。但是，`comm`需要排序输入，但如果这不是问题（或者如果您的数据可以从开始排序），只需预处理来自`file2`.

```
sed 's/;.*//' file2.sorted | comm -12 - file1.sorted >cmp.out 
```

输入需要排序的约束是允许`comm`处理非常大的文件，因为它只需要随时将最新数据保存在内存中。您可以对自己的自定义`awk`脚本执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:13:21.047

您可以使用：

```
$ diff file1 file2 > file3 
```

但我觉得你想忽略`;;0`一部分，对吧？然后你需要逐行处理它，剥离最后一部分，最后，与`diff`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:13:51.083

您可以使用[diff](http://unixhelp.ed.ac.uk/CGI/man-cgi?diff)命令并将输出定向到第三个文件。例如， 

```
% diff data1.txt data2.txt > diffs 
```

[diff 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?diff)显示了许多选项，可让您控制比较（处理和输出）。

没有指定选项的基本交互操作，假设您在文件中显示了您在帖子中显示的数据`data1.txt`并`data2.txt`产生：

```
% diff data1.txt data2.txt 

1,6d0
< www.example.com
< www.domain.com
< www.otherexample.com
< www.other-domain.com
< www.other-example.com
< www.exa-ample.com 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T10:23:11.007

if`a`是第一个内容`b`的文件，是第二个内容的文件：

```
while read line; do grep -q $line b || echo $line; done < a 
```

它打印在第二个文件中找不到的内容。

# java - Netbeans 使用 Maven 为 Tomcat5 和 Tomcat7 构建 webapp

> ID：10831535
> 
> 赞同：2
> 
> 时间：2012-05-31T10:10:02.560
> 
> 标签：java, maven, tomcat7, netbeans-7, tomcat5.5

我有一个项目，其中包含许多 webapps 和 jsps，并且可以构建为 .war 文件。

我现在需要说服 Netbeans 和 Maven 同时构建 Tomcat-7 版本和 Tomcat-5 版本。有人能指出我正确的方向吗？

我还希望能够包含不同的 web.xml，具体取决于我为哪个客户构建，但我怀疑一旦上述问题得到解答，我可能会自己实现这一点。

我想我需要在我的 pom 文件中使用两个配置文件，但我不知道我需要在每个配置文件中选择什么：

```
a) The correct jdk to compile with (JDK 6 for TC-7 and JDK 5 for TC-5)
b) The correct version of the javax libraries. 
```

我正在使用 Netbeans 7.1.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:57:01.067

The optimal result would be having one war file that will work on both Tomcat 5 and Tomcat 7 and is the same for every customer.

You can use maven profiles to adopt the build for every customer but I recommend to externalize the individual config into JNDI or an external properties file read via some environment variable. Spring offers the PropertyResolverconfigurer to do that (for example)

Since you want to support Tomcat 5 I guess your project builds with Java 1.5? That should run on Tomcat 7 as well.

The javax dependencies should have scope provided in your pom.xml files. So they will not be deployed. If your application requires a specific version of a jar that is part of tomcat already you may be able to solve that with profiles as well. But this may conflict with per-customer profiles.

If there a big differences between your Tomcat 5 and Tomcat 7 version it may be an idea to create 3 modules - all using packaging "war". One containing the 'neutral' files, one containing the tomcat 5 files and one the tomcat 7 files. The tomcat projects would use the neutral module as war file dependency and maven will do a war overlay. So one build would produce both tomcat 5 and tomcat 7 version (and a neutral war file that is not used for deployment).

according to [http://tomcat.apache.org/whichversion.html](http://tomcat.apache.org/whichversion.html) the minimum java version from tomcat 5 is java 1.4\. But that relates to what the tomcat is running on. A tomcat 7 should be able to run Java 1.5 bytecode as well. Just its JDK is 1.6\. You could use 1.5 for the source and target version of the maven-compiler-plugin to target both version.

But I think it should be possible to create a tomcat 5 build that will run on tomcat 7 as well. Do you have any dependencies that conflict between the two versions? or do you pre-compile the jsp files?

For the maven build you will need just one jdk (1.6) to be able to compile sources for an older target version too.

# c# - 在浏览器中打开word文档

> ID：10831536
> 
> 赞同：3
> 
> 时间：2012-05-31T10:10:03.607
> 
> 标签：c#, asp.net

我已经成功完成了在浏览器中显示 pdf 文件的代码，而不是打开“打开/保存”对话框。现在我坚持在浏览器中显示 word 文档。我想在 Firefox、IE7+、chrome 等中显示 word 文档。

任何人都可以帮助。在浏览器中显示 word doc 时，我总是得到“打开/保存”对话框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:11:34.757

如果不为每个可以理解格式以及如何呈现它的浏览器编写插件，就无法在浏览器中内联显示 word 文档。

为每个浏览器编写这样的插件是*可能*的，但对于每个浏览器来说，这是一项很大的工作，更不用说实际的解析器和渲染引擎了。这很容易就是几年的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:37:10.753

可能这可以帮助你

[http://blogs.msdn.com/b/interoperability/archive/2009/05/17/openxml-document-viewer-v1-released-viewing-docx-files-as-html.aspx](http://blogs.msdn.com/b/interoperability/archive/2009/05/17/openxml-document-viewer-v1-released-viewing-docx-files-as-html.aspx)

# payment-gateway - PayWay 错误：IP 地址无效

> ID：10831537
> 
> 赞同：2
> 
> 时间：2012-05-31T10:10:04.807
> 
> 标签：payment-gateway, payment, payment-services

我正在为我们的澳大利亚客户使用 PayWay 支付网关和 Westpac 银行服务。我正在印度开发它的代码和初始测试。根据`PayWay Net Developer's Guide`我已经按照给定的方式编写了所有代码。现在我正在尝试支付测试金额，它给了我们一个错误：

```
java.lang.SecurityException: Invalid IP address 
```

如何解决此错误以及为什么会发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T05:15:18.850

作为一项安全措施，PayWay 仅接受来自您指定的 IP 地址的令牌请求。

该错误表明您的令牌请求来自不在列表中的 IP 地址。您可以通过以下方式将服务器的 IP 添加到列表中：-

*   登录 PayWay
*   点击**设置网络**
*   选择**购物车**作为您的集成类型
*   单击**下一步**，直到您到达安全页面（如下所示）
*   输入发送令牌请求的服务器的外部 IP 地址

如果需要，您可以输入多个 IP 地址并指定子网。

![PayWay 网络安全页面](../Images/8cadea32b2cd05b6e800bd0e46941498.png)

# facebook - IE 8/7 中的 Facebook JS SDK 问题

> ID：10831538
> 
> 赞同：0
> 
> 时间：2012-05-31T10:10:07.303
> 
> 标签：facebook, facebook-javascript-sdk

我目前正在开发 Facebook 画布应用程序，遇到了一个我似乎无法用 IE8/7 和 JS SDK 解决的问题

我正在尝试测试用户的当前状态，例如已连接，未授权。这在 Chrome、Firefox 中运行良好，但在 IE 中似乎没有触发。这是我的 Facebook JS 代码

```
window.fbAsyncInit = function() {
FB.init({
    appId: 'xxxxxxxxxxxx',
    channelUrl : '//www.mydomain.co.uk/channel.html', // Channel File
    cookie: true,
    xfbml: true,
    oauth: true,
    status: true
});

FB.getLoginStatus(function(response){

    if (response.status === 'connected'){
        alert('The status of the session is: ' + response.status);

        $('a#remove-app').click(function(){

        //var request = response.authResponse.accessToken;
        //console.log(request);

            $("#dialog:ui-dialog").dialog( "destroy" );

        $("#dialog-confirm").dialog({
                height:140,
                modal: true,
                position: [236,101],
                buttons: {
                    "Yes": function() {

                        if(request){
                            $.ajax({
                                type: 'get',
                                dataType: 'jsonp',
                                url: 'https://graph.facebook.com/me/permissions',
                                data: 'method=delete&access_token=' + request,
                                success: function(response) {
                                    top.location.href = 'http://facebook.com';
                                }

                            });

                        }

                    },
                    Cancel: function() {
                        $( this ).dialog( "close" );
                    }
                }
            });

            return false;
    }); 

    } else if( response.status === 'not_authorized') {

        var oauth_url = 'https://www.facebook.com/dialog/oauth/';
            oauth_url += '?client_id=xxxxxxxxx';
            oauth_url += '&redirect_uri=' + encodeURIComponent('https://apps.facebook.com/kaplan-acca-news/');
            oauth_url += '&scope=email'
        window.top.location = oauth_url;

    } else {

        //alert('user not logged in');
      var oauth_url = 'https://www.facebook.com/dialog/oauth/';
               oauth_url += '?client_id=xxxxxxxx';
               oauth_url += '&redirect_uri=' + encodeURIComponent('https://apps.facebook.com/kaplan-acca-news/');
               oauth_url += '&scope=email'
             window.top.location = oauth_url;   
    }

}, true);

$('a#invite-a-friend').click(function(){
    sendRequestViaMultiFriendSelector();
});

// Multi friend selector for Facebook
function sendRequestViaMultiFriendSelector() {

        FB.ui({method: 'apprequests',
           message: 'Come and join the app on Facebook',
        });

}

function requestCallback(response) {
    alert(response);            
}   

};
    // Load the SDK Asynchronously
    (function() {
    var e = document.createElement('script');
    e.async = true;
    e.src = '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
}()); 
```

有关解决此问题的任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:12:45.430

通过“JavaScript Lint”工具运行您的 JavaScript 代码。你的代码中可能有一些小的 JS 错误，Chrome / FF 会忽略，但 IE 不喜欢。

# java - java.lang.outofmemoryerror 创建位图

> ID：10831539
> 
> 赞同：0
> 
> 时间：2012-05-31T10:10:10.553
> 
> 标签：java, android

我收到大图像（png，>30Mb）并为其创建位图。并得到 java.lang.OutOfMemoryError。我试图捕捉这样的异常：

```
try {
    Bitmap bmp = BitmapFactory.decodeStream(someStream);
} catch (OutOfMemoryError e) {
    ;
} 
```

使用 2.2 SDK 它运行良好。但是使用 2.3 应用程序失败并出现未捕获的异常。我不明白，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T10:14:03.227

你并不是真的要捕捉错误：

从[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Error.html)：

> Error 是 Throwable 的子类，表示合理的应用程序不应尝试捕获的严重问题。大多数此类错误是异常情况。ThreadDeath 错误虽然是“正常”情况，但也是 Error 的子类，因为大多数应用程序不应该尝试捕获它。

如果你得到一个错误，尤其是一个 OutOfMemoryError，基本上已经太迟了，不能对此做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:21:27.050

您需要重新调整位图图像的大小，然后才能使用它们来显示。看看这个关于[如何调整位图大小的教程。](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

**编辑** 或者您可以尝试使用 FileOutputStream 将位图作为文件保存到文件系统。像这样的东西。

```
byte[] imageData;
FileOutputStream out = new FileOutputStream(file);
out.write(imageData, 0, imageData.length);
out.flush();
out.close(); 
```

像这样解码位图，并按照上面链接中的指定缩放/调整它的大小。

```
FileInputStream inputStream = new FileInputStream(file);
BitmapFactory.decodeStream(inputStream, null, options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:19:06.433

30 mb 太大了。我很惊讶您能够在 android 2.2 手机中创建位图。我的建议是使用**小得多的图像文件**。在许多手机中，24-30mb 是分配给整个应用程序的内存。

在您的情况下，您必须收到诸如 StackOverFlowError 之类的错误。你无法捕捉错误，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:20:18.000

将图像解码为较低的分辨率。你在android上只允许大约16mb。在最坏的情况下，您可以选择增加此设置。

此外，pre-gingerbread GC 与 post-gingerbread 不同。在它停止之前，世界 GC 使用完全垃圾收集，但在那之后，GC 变为并发，允许部分收集。

# xcode - 为 OSX 优化无响应（核心数据）应用程序

> ID：10831540
> 
> 赞同：0
> 
> 时间：2012-05-31T10:10:12.643
> 
> 标签：xcode, core-data, instruments, sorting, objective-c-2.0

对一个非常无响应（OSX）的应用程序有真正的问题。当使用大约 3K（核心数据）对象时，应用程序在启动和保存期间以及添加新托管对象时会冻结。

当我使用 (Instruments) Time Profiler 深入调用树时，大部分时间似乎都花在对数组控制器进行排序上。在启动期间，有一半时间用于 NSUndoManager，它会在阵列控制器设置其内容时观察通知...

在实例化新的托管对象时数组控制器是否排序？我需要暂停排序吗？NSUndoManager 会是罪魁祸首吗？

更重要的是，如何分析这样的事情？很可能我正在进行某种指数排序，我的意思是当一个数组控制器自行排序时，其他几个数组控制器也可能不必要地开始重新排序。

我使用的数据模型相当广泛。此外，我在 2 个 .xib 文件中有大约 30 个数组控制器，其中一些管理相同的类类型。

[Marcus Zarra](http://pragprog.com/book/mzcd/core-data)关于核心数据的书提供了非常丰富的信息，尤其是关于优化核心数据的章节。

此外， Matt Gallagher 的[这篇文章](http://cocoawithlove.com/2010/02/finding-cause-of-simple-performance.html)令人印象深刻，尽管我遇到的问题可能与需要优化的代码无关。

欢迎任何和所有提示，我在这里拉头发。你能指点我一些可以帮助我的教程或书籍吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:01:35.647

如果 undoManager 占用了一半的时间，但在删除 undo 管理器时没有看到性能改进，我会说你应该将 IO 视为潜在的瓶颈。

查看花费在 I/O 操作上的时间。

此外，当涉及到核心数据时，我会在后台线程中完成所有工作。让它挂起你的用户界面是没有意义的。希望您能够使用父/子 MOC，因为这大大简化了使用多个上下文的工作。

即使没有，值得额外的工作让它在一个单独的线程中工作。你的用户界面会感谢你的。

# php - Eclipse 代码格式化程序/解释器 5.4.3

> ID：10831542
> 
> 赞同：0
> 
> 时间：2012-05-31T10:10:15.147
> 
> 标签：php, eclipse

自从新的 PHP 5.4(.3) 发布以来，我的 eclipse 对我喜欢的新事物感到困惑：

```
$array =  []; 
```

我之前在 Eclipse 中更改了格式化程序/解释器，因为他无法处理函数中的函数，但我现在的问题是我从哪里获得新的格式化程序/解释器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:14:35.473

它已经添加到新的 Eclipse Zend PDT 中，所以它已修复

# mysql - MySQL JOIN 围绕子查询结果

> ID：10831548
> 
> 赞同：0
> 
> 时间：2012-05-31T10:10:25.143
> 
> 标签：mysql, join, subquery

我有这个查询（请注意，所有 3 个子查询都从同一行中选择不同的列）。本质上，我想在行`product_bid`旁边获得最大日期的`product`行。

```
SELECT 
p.product_id,
p.product_title, 
(SELECT b.bid_id FROM product_bids b WHERE b.bid_product_id=p.product_id ORDER BY b.bid_date DESC LIMIT 1) AS bid_id,
(SELECT b.bid_date FROM product_bids b WHERE b.bid_product_id=p.product_id ORDER BY b.bid_date DESC LIMIT 1) AS bid_date,
(SELECT b.bid_amount FROM product_bids b WHERE b.bid_product_id=p.product_id ORDER BY b.bid_date DESC LIMIT 1) AS bid_amount

FROM product p

WHERE p.product_auction_id=325 
```

有没有办法做一次子查询以获得 PK`product_bids`并加入它（子查询的结果）或任何干净的方式来做到这一点？

*旁注*：查询优化器是否会认识到这一点，使其不那么重要？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:17:38.617

您可以将表与为每个产品选择最新投标日期的子查询连接在一起：

```
SELECT p.product_id, b.bid_id, b.bid_date, b.bid_amount
FROM   product_bids AS b NATURAL JOIN (
         SELECT   bid_product_id, MAX(bid_date) AS bid_date
         FROM     product_bids
         GROUP BY bid_product_id
       ) AS t
  JOIN product AS p ON p.product_id = b.bid_product_id
WHERE  p.product_auction_id = 325 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:16:47.617

在一个 SQL 查询中执行此操作可能很困难，但我有这个建议。首先从 product_bids 中选择最大日期，然后进行第二次查询，如下所示：

```
select p.product_id, p.product_title, b.bid_id, b.bid_date, b.bid_amount
from product p
inner join product_bids b on b.bid_date = @yourselectedbiddate 
```

这应该获取完全相同的数据，但性能要高得多。请注意，@yourselectedbiddate 需要等于一个记录恰好具有的值，否则您将乘以您不想要的行。如果不是这种情况（这意味着您不能依赖一个是顶部），您的提案也会遇到类似的问题，因为您尚未定义具有最大日期的记录中的哪一个在前。

# c++ - 如果指定了参数，如何为函数指针分配地址？

> ID：10831550
> 
> 赞同：2
> 
> 时间：2012-05-31T10:10:33.100
> 
> 标签：c++, function-pointers

在那之前我用过这么大的东西：

```
int* ShowPopUpMessage = (int*)0x004837F0; //declare
((int (__cdecl*)(const char *, char))ShowPopUpMessage)("You see this message!", 0); //call 
```

嗯，我认为没有必要说这有点令人困惑。

现在我想像这样声明普通函数指针：

```
int *ShowPopupMessage(const char *, char); 
```

为了能够像这样调用该函数：

```
ShowPopupMessage("asd", 0); 
```

但我无法为该指针分配函数地址。我试过：

```
int *ShowPopupMessage(const char *, char) = (int*)0x004837F0; //error: function "ShowPopupMessage" may not be initialized

//then this
int *ShowPopupMessage(const char *, char);
ShowPopupMessage = 0x004837F0; //nope

ShowPopupMessage = (int*)0x004837F0; //nope

*ShowPopupMessage = 0x004837F0; //nope

*ShowPopupMessage = (int*)0x004837F0; //nope 
```

呃。还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:52:36.963

You really should read the compiler's diagnostics even with subsequent attempts of solving a compile error. I *really* doubt that it ever said "nope."

A `typedef` is especially useful when you want to declare a function (or a function pointer) returning a function pointer. In a simple function pointer type expression it doesn't buy you much, as you really only need to remember the parenthesis when you write one, like this:

```
int *ShowPopupMessage(const char*, char); // a function declaration
int (*ShowPopupMessage)(const char*, char); // a function pointer definition 
```

Both are an easy read for C++ programmers.

In your case, a `typedef` might be preferable (as you need to use the type twice), but as you seem to have trouble understanding acceptable implicit conversions, I'm not going to hide the problem behind a `typedef` curtain.

In the examples above, you're mostly only changing the left-hand side of things. C++ does not allow implicit conversions of integer types to (any) pointer types, and in a similar fashion, it doesn't allow implicit conversions of object pointer types to function pointer types. If you want to interpret an integer as a function pointer, you need a cast -- and not just any cast, but a `reinterpret_cast` to a function pointer type.

```
// this is OK (with the cast), but ShowPopupMessage is not a function pointer,
// but a pointer to int
int *ShowPopupMessage = (int*)0xDEADBEEF;

// this is incorrect, as C++ does not allow implicit conversions from
// object pointers to function pointers
int (*ShowPopupMessage)(const char*, char) = (int*)0xDEADBEEF;

// this is OK (assuming you know what you're doing with 0xDEADBEEF)
int (*ShowPopupMessage)(const char*, char) =
        (int(*)(const char*, char))0xDEADBEEF;

// this is preferable in C++ (but it's not valid C)
int (*ShowPopupMessage)(const char*, char) =
        reinterpret_cast<int(*)(const char*, char)>(0xDEADBEEF);

// (this is a possibility in C++11)
#include <functional>
std::function<int(const char*, char)> ShowPopupMessage =
        reinterpret_cast<int(*)(const char*, char)>(0xDEADBEEF);
// it's used in much the same way as function pointers are
// i.e. you call it like you always call them: ShowPopupMessage("", ' ') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T10:15:42.727

使用 typedef：

```
typedef int (*funptr)(const char *, char);
funptr ShowPopupMessage;

ShowPopupMessage = (funptr) your_address_goes_here;
ShowPopupMessage("hello", 0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T10:15:16.310

这应该有效：

```
{
    typedef int (*funcPtr)(const char *, char);

    funcPtr func = (funcPtr) 0x004837F0;

    func("asd", 0);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T10:19:19.490

这是一个函数声明，而不是函数指针声明：

```
int *ShowPopupMessage(const char *, char); 
```

使用 a`typedef`创建函数指针：

```
typedef int (*func_t)(const char*, char); 
```

可以使用：

```
int _my_pop_up_one(const char* a_msg, char a_ch)
{
    std::cout << "one: " << a_msg << ", " << a_ch << "\n";
    return 0;
}

int _my_pop_up_two(const char* a_msg, char a_ch)
{
    std::cout << "two: " << a_msg << ", " << a_ch << "\n";
    return 0;
}

func_t show = _my_pop_up_one;
show("hello", 'a');
show = _my_pop_up_two;
show("hello", 'a'); 
```

因为这是 C++，所以值得一提的是[函子](http://en.wikipedia.org/wiki/Function_object)的存在（而`std::string`不是`char*`），它允许一个对象像普通函数一样被调用：

```
struct func_t
{
    virtual int operator()(const std::string&, char) const = 0;
};

struct my_pop_up_one : func_t
{
    int operator()(const std::string& a_msg, char a_ch) const
    {
        std::cout << "one: " << a_msg << ", " << a_ch << "\n";
        return 0;
    }
};

struct my_pop_up_two : func_t
{
    int operator()(const std::string& a_msg, char a_ch) const
    {
        std::cout << "two: " << a_msg << ", " << a_ch << "\n";
        return 0;
    }
};

void display_pop_up(const func_t& a_func)
{
    a_func("hello", 'a');
}

display_pop_up(my_pop_up_one());
display_pop_up(my_pop_up_two()); 
```

# c# - 保存数据后如何更新gridview？

> ID：10831554
> 
> 赞同：0
> 
> 时间：2012-05-31T10:10:50.247
> 
> 标签：c#, asp.net, mysql

我有一个包含 4 列的网格视图（用户 ID、描述、密码、更改密码 [按钮]）。

当我单击更改密码时，会出现带有 3 个文本框（用户 ID、新密码、确认密码）的面板并显示保存按钮。

更改密码后，面板消失，但网格视图中的密码与以前相同。

我想更新密码列。

以下是我的保存按钮点击
代码

```
protected void BindGridView()
{
    try
    {
        DataTable dt = new DataTable();
        dt = (DataTable)Session["userinfo"];

        gvPassInfo.DataSource = dt;
        gvPassInfo.DataBind();
    }
    catch (Exception ex)
    {
        //lblMessage.Text = DataObjects.Error_Message();
    }  
 }
 protected void btnSave_Click(object sender, EventArgs e)
 {
    clsUser objuser = new clsUser();
    string user = txtUserid.Text;
    string NewPassword = txtNewPassword.Text;
    string ConfirmPassword = txtConfirmNewPassword.Text;
    objuser.UpdateSystemPassword(user, NewPassword);
    Response.Write("<script LANGUAGE='JavaScript' >alert('Password Changed   Successfully...'); document.location='" +ResolveClientUrl("~\\PasswordInformation_Details.aspx") + "'; </script>");
    BindGridView();
    panelChangePassword.Visible = false;

   }                                                                                     
protected void btnSearch1_Click(object sender, EventArgs e)
{
    try
    {
        using (MySqlConnection conn = new MySqlConnection(clsUser.connStr))
        {
            conn.Open();
            string strQuery = "select DISTINCT user_id,description,sap_system_password from sap_password_info where user_id is not null";
            if (txtSid.Text !="")
            {
                strQuery += " AND sid = '" + txtSid.Text + "'";
            }
            if (txtClient.Text != "")
            {
                strQuery += " AND client_no = '" + txtClient.Text + "'";
            }
            if (txtUser.Text != "")
            {
                strQuery += " AND user_id = '" + txtUser.Text + "'";
            }

            MySqlCommand cmd = new MySqlCommand(strQuery, conn);
            DataTable dt = new DataTable();
            dt.Load(cmd.ExecuteReader(CommandBehavior.CloseConnection));
            Session["userinfo"] = dt;
            Response.Redirect("~\\PasswordInformation_Details.aspx");
        }
    }
    catch (Exception ex)
    {
        //lblMessage.Text = DataObjects.Error_Message();
        lblMsg.Text = ex.Message.ToString();
    }

} 
```

代码在 C# 中，后端是 MySQL DB Server.. 请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:14:02.570

在 button_click 事件中，将您的 gridview 绑定到一个新列表。

```
List<something> k = //your sql stuff
GridView1.DataSource = k;
GridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:29:12.910

Read this [tutorial](http://www.dotnetcurry.com/ShowArticle.aspx?ID=107). And there are so many tutorials for the beginners of ASP.NET on internet. Google it..

**Edited:** After save of password ,load your `datatable` from database(not from session) and bind it again to your gridview.

like that

```
DataTable dt = new DataTable();
dt = //LoadFromDB();    // load data from database not session

gvPassInfo.DataSource = dt;
gvPassInfo.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:16:24.457

在更新**事件/保存**按钮单击事件`GridView`结束时更新

 **## 编辑

you are updating the record in the database but you are not fetching new data that's the reason you are getting old information

so after following statement fetch the data from database and update the session dataset with new data then your problem will solve...

```
 objuser.UpdateSystemPassword(user, NewPassword);
 //get the updated data from the database after this statement
 //don't forget to update the session with new data 
```

## Write this code in old page

```
Dictionary<string,string> infor = new Dictionary<string,string>();
infor["sid"] = txtSid.Text;
infor["client_no"] = txtClient.Text;
..
...
Session["queryInfo"] = infor; 
```

## In New File

```
GetDataFromDB()
{
Dictionary<string,string> infor = (Dictionary<string,string>)Session["queryInfo"];

try
{
    using (MySqlConnection conn = new MySqlConnection(clsUser.connStr))
    {
        conn.Open();
        string strQuery = "select DISTINCT user_id,description,sap_system_password from sap_password_info where user_id is not null";
        if (infor["sid"] !="")
        {
            strQuery += " AND sid = '" + infor["sid"] + "'";
        }
        //... do like above for remaining if conditions

        MySqlCommand cmd = new MySqlCommand(strQuery, conn);
        DataTable dt = new DataTable();
        dt.Load(cmd.ExecuteReader(CommandBehavior.CloseConnection));
        Session["userinfo"] = dt;
        //Response.Redirect("~\\PasswordInformation_Details.aspx");
    }
}
catch (Exception ex)
{
     throw;
}
} 
```**

# animation - 可视化词云随时间的变化？

> ID：10831558
> 
> 赞同：10
> 
> 时间：2012-05-31T10:11:13.897
> 
> 标签：animation, rendering, word-cloud

我正在寻找一种可以可视化文字云随时间变化的工具。

我有一个包含很多条目的数据库，我生成的词云帮助我的团队更好地了解产品的使用方式。

但我意识到，展示趋势如何随时间变化会更有趣。

# android - 相机始终将 resultCode 返回为 0

> ID：10831562
> 
> 赞同：12
> 
> 时间：2012-05-31T10:11:32.673
> 
> 标签：android

我正在尝试在我的 android 应用程序中使用相机进行开发。

问题是相机总是返回结果代码 0，不管我是按完成还是取消。我使用的代码片段如下：

```
protected void startCameraActivity()
{

    Log.i("MakeMachine", "startCameraActivity()" );

    File file = new File( _path );
    Uri outputFileUri = Uri.fromFile( file );

    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );
    startActivityForResult(intent, 0);
}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{   

    Log.i( "MakeMachine", "resultCode: " + resultCode );

    switch( resultCode )
    {
        case 0:
            Log.i( "MakeMachine", "User cancelled" );
            break;

        case -1:
            Log.i( "MakeMachine", "User done" );
            onPhotoTaken();
            break;
    }
} 
```

logcat 显示：

```
05-31 14:58:15.367: E/asset(29114): MAS: getAppPckgAndVerCode package: makemachine.android.examples === version 1
05-31 14:58:15.398: D/dalvikvm(29114): Trying to load lib lib_glossary.so 0x0
05-31 14:58:15.414: D/dalvikvm(29114): Added shared lib lib_glossary.so 0x0
05-31 14:58:26.125: I/MakeMachine(29114): ButtonClickHandler.onClick()
05-31 14:58:26.125: I/MakeMachine(29114): startCameraActivity()
05-31 14:58:26.507: W/IInputConnectionWrapper(29114): showStatusIcon on inactive InputConnection
05-31 14:58:36.375: I/MakeMachine(29114): User cancelled
05-31 14:58:36.375: I/MakeMachine(29114): resultCode: 0
05-31 14:58:50.945: I/MakeMachine(29114): ButtonClickHandler.onClick()
05-31 14:58:50.945: I/MakeMachine(29114): startCameraActivity()
05-31 14:58:51.429: W/IInputConnectionWrapper(29114): showStatusIcon on inactive InputConnection
05-31 14:59:01.554: I/MakeMachine(29114): User cancelled
05-31 14:59:01.554: I/MakeMachine(29114): resultCode: 0 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-02-18T00:17:40.463

问题（在 android >= 5.0 中）可能与`singleInstance`模式有关。

如果您将活动`launchMode`设置为`singleInstance`，那么在 android < 5.0 中，您将立即收到取消的结果。在 android >=5.0 中，您将拥有`resultCode == Activity.RESULT_CANCELED`.

尝试使用`launchMode = singleTask`. 它很像`singleInstance`，但允许在任务上启动其他活动。

更多信息在这里： [https ://developer.android.com/guide/topics/manifest/activity-element.html#lmode](https://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-02T13:23:32.370

根据评论部分，`resultCode`返回 0（意味着结果被取消）的原因是因为在拍照保存到 SD 卡时，您需要将`WRITE_EXTERNAL_STORAGE`权限添加到清单中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-21T18:23:20.107

我遇到了同样的问题。相机在 5.0+ 上工作，lauchmode=singleInstance 返回正确的“RESULT_OK”，但在 Android 4.0 上我得到了 0，直到：

> Android 4.0 切换到 AndroidManifest.xml 中的“launchMode=singleTask”，用于调用相机的 Activity 导致“RESULT_OK”== 1

这对于具有向后兼容性的应用程序很有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-09T13:10:40.193

此外，有时由于未亲自添加所需的子文件夹而导致问题。应用程序每次都会默默地崩溃，结果代码为 0。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-12T14:24:13.880

我通过进行以下更改解决了我的问题...

```
private void takePictureFromCamera() {
    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    // Ensure that there's a camera activity to handle the intent
    if (takePictureIntent.resolveActivity(activity.getPackageManager()) != null) {
        // Create the File where the photo should go
        File photoFile = null;
        photoFile = createImageFile();
        // Continue only if the File was successfully created
        if (photoFile != null) {
            Uri photoURI = FileProvider.getUriForFile(activity,
                    "com.example.provider",
                    photoFile);
            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI);

            //COMPATIBILITY
            if (Build.VERSION.SDK_INT>= Build.VERSION_CODES.LOLLIPOP) {
                takePictureIntent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION);
            } else {
                List<ResolveInfo> resInfoList = activity.getPackageManager().queryIntentActivities(takePictureIntent, PackageManager.MATCH_DEFAULT_ONLY);
                for (ResolveInfo resolveInfo : resInfoList) {
                    String packageName = resolveInfo.activityInfo.packageName;
                    activity.grantUriPermission(packageName, photoURI, Intent.FLAG_GRANT_WRITE_URI_PERMISSION | Intent.FLAG_GRANT_READ_URI_PERMISSION);
                }
            }
            //COMPATIBILITY
            startActivityForResult(takePictureIntent, CAMERA);
        }

    }
} 
```

我在以下位置找到了解决方案：

[关联](https://stackoverflow.com/questions/37835499/result-code-0-for-camera-intent)

# linq - LINQ 联合错误 - 无法推断类型

> ID：10831563
> 
> 赞同：1
> 
> 时间：2012-05-31T10:11:34.453
> 
> 标签：linq, types, union

我只是想对 2 个 linq 查询执行简单的联合，如下所示：

```
var results1 = from a in dt.AsEnumerable()
               where array1.Contains([COL_1])
               select new
               {
                  a = a.Key
               };

var results2 = from b in dt.AsEnumerable()
               where array2.Contains([COL_2])
               select new
               {
                  b = b.Key
               };

var concatResults = results1.Union(results2); 
```

但我收到以下错误：

> 无法从用法中推断方法“System.Linq.Enumerable.Union(System.Collections.Generic.IEnumerable, System.Collections.Generic.IEnumerable)”的类型参数。尝试明确指定类型参数。

谁能指导我如何解决这个问题？

提前致谢

厘米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:14:01.440

您正在尝试联合两种不同的（匿名）类型，这是不可能的。您可以创建自己的类型来存储您的 Key 值，以便两个查询都投射到相同的类型。

```
public class MyType
{
   string Key { get; set; }
}

var results1 = from a in dt.AsEnumerable()
                     where array1.Contains([COL_1])
                     select new MyType
                     {
                         Key = a.Key
                     }; 
```

ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:16:46.760

为了让编译器成功推断并集结果的类型，Query1 和 Query2 返回的两个匿名类型需要相同（实际上编译器生成的是单一类型）。

重命名匿名类型的属性，以便两者都使用`a`or `b`，不混用。`a.Key`并且`b.Key`还需要是同一类型。

```
var results1 = from a in dt.AsEnumerable()
             join arr1 in array1 on a.Field<int>("Col1") equals arr1 
             select new
             {
                 Key = a.Field<int>("Key")
             };

var results2 = from b in dt.AsEnumerable()
             join arr1 in array1 on b.Field<int>("Col2") equals arr1 
             select new
             {
                 Key = b.Field<int>("Key")
             };

var unioned = results1.Union(results2); 
```

# vim - 如何拆分 .vimrc 文件中的长行？

> ID：10831565
> 
> 赞同：41
> 
> 时间：2012-05-31T10:11:35.360
> 
> 标签：vim

我有一行`.vimrc`超过 80 个字符：

```
autocmd FileType python set smartindent cinwords=if,elif,else,for,while,try,except,finally,def,class,with 
```

我觉得这很烦人，所以我想把它分成多行，但我不知道该怎么做。我试过`\`了，因为这在 Python 和 Bourne shell 中可以解决问题，但显然这在 Vim 中不是有效的语法：

```
autocmd FileType python set smartindent \
    cinwords=if,elif,else,for,while,try,except,finally,def,class,with 
```

给

```
E492: Not an editor command 
```

谁能告诉我如何分割这条线？

（如果有人能告诉我如何添加`cinwords`而不是完全重置它，那么加分；我唯一想要实现的就是将`with`关键字添加到它。）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-31T10:15:42.330

打`:help line-continuation`。

基本上你必须`\`在续行的开头添加。

所以不要写

```
autocmd FileType python set smartindent \
    cinwords=if,elif,else,for,while,try,except,finally,def,class,with 
```

你必须写

```
autocmd FileType python set smartindent
       \ cinwords=if,elif,else,for,while,try,except,finally,def,class,with 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-05-31T10:17:44.343

```
autocmd FileType python set smartindent
    \ cinwords+=with 
```

# php - 将多维数组发送到 php

> ID：10831574
> 
> 赞同：0
> 
> 时间：2012-05-31T10:12:20.230
> 
> 标签：php, jquery, json, multidimensional-array

我有未知数量的输入，我想将它们写入数据库。我尝试了一些不同的方法，但没有任何效果。我不知道输入的数量，所以我需要像多维数组这样的东西

javascript:

```
var temp=new Array();
    var obj;
    $("#mitarbFuktionen fieldset").each(function(){
        i=$(this).parent().children().index($(this));
        if ($(this).hasClass("New")){
          temp[0]='New';
          temp[1]=$("legend",this).text();
          //.....
          obj+=JSON.stringify(temp)
        }else if ($(this).hasClass("Remove")){
          temp[0]='Remove';
          temp[1]=$("legend",this).text();
          //.....
          obj=$.toJSON(temp);
        }

    })
    $.post("ajax/MitarbSave.php",{
        anrede:$('input[name="neuMitarbAnrede"]:checked').val(),
        titel:$('#neuMitarbTitel').val(),
        nation:$('#neuMitarbNat').val(),
        //.....
        'kom[]': obj
    }, function(data){
        alert(data);
    }) 
```

PHP：

```
$output= json_decode($_POST["kom"], true);
echo var_dump($output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:41:16.260

只是为了回答我的评论：

```
$(document).ready(function()
{
    var test = [];
        test.push('a');
        test.push('b');

    $.post('ajax/script.php',
    {
        Param : test
    }, 
    function(resp)
    {

    }, 'json');
}); 
```

当作为参数传递给 Ajax 请求时，jQuery 会自动将数组转换为多维数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:48:34.763

你也可以只构建一个对象，一个传递：

```
var obj={};
$("#mitarbFuktionen fieldset").each(function(){
    var i=$(this).index();
    obj[i]={};
    obj[i][$(this).is(".New") ? 'New :' : 'Remove :'] = $("legend", this).text();
});

$.post("ajax/MitarbSave.php",{
    anrede:$('input[name="neuMitarbAnrede"]:checked').val(),
    titel:$('#neuMitarbTitel').val(),
    nation:$('#neuMitarbNat').val(),
    kom: obj
}, function(data){
    alert(data);
})​;​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:39:47.213

只需将数组添加到 HTML 中的输入字段中，例如：

```
<input type="text" name="neuMitarb[NUMBER][anrede]">
<input type="text" name="neuMitarb[NUMBER][titel]">
//... 
```

所以你让 html 创建你的数组。提交您的表单，如使用 ajax 提交的常规表单

# android - 如何以编程方式查找 Android 设备的 MAC 地址

> ID：10831578
> 
> 赞同：57
> 
> 时间：2012-05-31T10:12:28.287
> 
> 标签：android

如何以编程方式获取 android 设备的 Mac Id。我已经完成了 IMIE 代码，我知道如何手动检查设备上的 Mac id，但不知道如何以编程方式查找。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-05-31T10:16:32.750

```
WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
WifiInfo wInfo = wifiManager.getConnectionInfo();
String macAddress = wInfo.getMacAddress(); 
```

此外，在您的清单文件中添加以下权限

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

请参阅[Android 6.0 更改](https://developer.android.com/about/versions/marshmallow/android-6.0-changes.html#behavior-hardware-id)。

> 为了给用户提供更好的数据保护，从这个版本开始，Android 移除了对使用 Wi-Fi 和蓝牙 API 的应用程序的设备本地硬件标识符的编程访问。WifiInfo.getMacAddress() 和 BluetoothAdapter.getAddress() 方法现在返回 02:00:00:00:00:00 的常量值。
> 
> 要通过蓝牙和 Wi-Fi 扫描访问附近外部设备的硬件标识符，您的应用现在必须具有 ACCESS_FINE_LOCATION 或 ACCESS_COARSE_LOCATION 权限。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-22T08:22:29.993

[请参阅](https://stackoverflow.com/a/13007325/185565)我已提交 Utils.java 示例以提供纯 Java 实现并在没有 WifiManager 的情况下工作的这篇文章。某些 android 设备可能没有可用的 wifi 或正在使用以太网接线。

```
Utils.getMACAddress("wlan0");
Utils.getMACAddress("eth0");
Utils.getIPAddress(true); // IPv4
Utils.getIPAddress(false); // IPv6 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-05-06T13:22:31.780

使用此代码，您还可以在**Android 6.0中获取 MacAddress**

```
public static String getMacAddr() {
    try {
        List <NetworkInterface> all = Collections.list(NetworkInterface.getNetworkInterfaces());
        for (NetworkInterface nif: all) {
            if (!nif.getName().equalsIgnoreCase("wlan0")) continue;

            byte[] macBytes = nif.getHardwareAddress();
            if (macBytes == null) {
                return "";
            }

            StringBuilder res1 = new StringBuilder();
            for (byte b: macBytes) {
                //res1.append(Integer.toHexString(b & 0xFF) + ":");
                res1.append(String.format("%02X:", b));
            }

            if (res1.length() > 0) {
                res1.deleteCharAt(res1.length() - 1);
            }
            return res1.toString();
        }
    } catch (Exception ex) {}
    return "02:00:00:00:00:00";
} 
```

**编辑 1.** 这个答案有一个错误，其中十六进制形式的字节有一个数字，不会出现在它之前的“0”。对 res1 的附加已更改以处理它。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-06-15T12:05:58.903

**它正在工作**

```
 package com.keshav.fetchmacaddress;

    import android.support.v7.app.AppCompatActivity;
    import android.os.Bundle;
    import android.util.Log;

    import java.net.InetAddress;
    import java.net.NetworkInterface;
    import java.net.SocketException;
    import java.net.UnknownHostException;
    import java.util.Collections;
    import java.util.List;

    public class MainActivity extends AppCompatActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            Log.e("keshav","getMacAddr -> " +getMacAddr());
        }

        public static String getMacAddr() {
            try {
                List<NetworkInterface> all = Collections.list(NetworkInterface.getNetworkInterfaces());
                for (NetworkInterface nif : all) {
                    if (!nif.getName().equalsIgnoreCase("wlan0")) continue;

                    byte[] macBytes = nif.getHardwareAddress();
                    if (macBytes == null) {
                        return "";
                    }

                    StringBuilder res1 = new StringBuilder();
                    for (byte b : macBytes) {
                        // res1.append(Integer.toHexString(b & 0xFF) + ":");
                        res1.append(String.format("%02X:",b)); 
                    }

                    if (res1.length() > 0) {
                        res1.deleteCharAt(res1.length() - 1);
                    }
                    return res1.toString();
                }
            } catch (Exception ex) {
                //handle exception
            }
            return "";
        }
    } 
```

**更新 1**

这个答案有一个错误，十六进制形式的字节有一个数字，不会在它之前出现“0”。附加到`res1`已更改以处理它。

```
 StringBuilder res1 = new StringBuilder();
                for (byte b : macBytes) {
                    // res1.append(Integer.toHexString(b & 0xFF) + ":");
                    res1.append(String.format("%02X:",b)); 
                } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-01-07T11:19:49.037

这里 Kotlin 版本的 Arth Tilvas 回答：

```
fun getMacAddr(): String {
    try {
        val all = Collections.list(NetworkInterface.getNetworkInterfaces())
        for (nif in all) {
            if (!nif.getName().equals("wlan0", ignoreCase=true)) continue

            val macBytes = nif.getHardwareAddress() ?: return ""

            val res1 = StringBuilder()
            for (b in macBytes) {
                //res1.append(Integer.toHexString(b & 0xFF) + ":");
                res1.append(String.format("%02X:", b))
            }

            if (res1.length > 0) {
                res1.deleteCharAt(res1.length - 1)
            }
            return res1.toString()
        }
    } catch (ex: Exception) {
    }

    return "02:00:00:00:00:00"
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-03-17T18:31:55.960

来自 Developer.Android.com 的最新更新

> 不使用 MAC 地址 MAC 地址是全球唯一的，用户不可重置，并且在出厂重置后仍然有效。由于这些原因，一般不建议使用 MAC 地址进行任何形式的用户识别。运行 Android 10（API 级别 29）及更高版本的设备会向所有非设备所有者应用程序报告随机 MAC 地址。
> 
> 在 Android 6.0（API 级别 23）和 Android 9（API 级别 28）之间，无法通过第三方 API 获得本地设备 MAC 地址，例如 Wi-Fi 和蓝牙。WifiInfo.getMacAddress() 方法和 BluetoothAdapter.getDefaultAdapter().getAddress() 方法都返回 02:00:00:00:00:00。
> 
> 此外，在 Android 6.0 和 Android 9 之间，您必须拥有以下权限才能通过蓝牙和 Wi-Fi 扫描访问附近外部设备的 MAC 地址：
> 
> 需要方法/属性权限
> 
> ACCESS_FINE_LOCATION 或 ACCESS_COARSE_LOCATION

来源：[https ://developer.android.com/training/articles/user-data-ids.html#version_specific_details_identifiers_in_m](https://developer.android.com/training/articles/user-data-ids.html#version_specific_details_identifiers_in_m)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-18T20:07:16.167

```
private fun getMac(): String? =
        try {
            NetworkInterface.getNetworkInterfaces()
                    .toList()
                    .find { networkInterface -> networkInterface.name.equals("wlan0", ignoreCase = true) }
                    ?.hardwareAddress
                    ?.joinToString(separator = ":") { byte -> "%02X".format(byte) }
        } catch (ex: Exception) {
            ex.printStackTrace()
            null
        } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-05-01T12:23:23.367

有一个简单的方法：

**安卓：**

```
 String macAddress = 
android.provider.Settings.Secure.getString(this.getApplicationContext().getContentResolver(), "android_id"); 
```

**Xamarin：**

```
 Settings.Secure.GetString(this.ContentResolver, "android_id"); 
```

# javascript - 如何将 css 和 javascript 放在一个公共库/项目中

> ID：10831579
> 
> 赞同：0
> 
> 时间：2012-05-31T10:12:32.383
> 
> 标签：javascript, asp.net, css, asp.net-mvc, asp.net-mvc-3

我们有许多需要共享静态资源的 asp 和 asp mvc web 应用程序。我希望能够将这些放在一个可以跨站点共享的通用项目中，但我不确定如何做到这一点？我知道我们可以使用 CDN，但更喜欢通用的项目方法。任何例子将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:42:46.590

这里确实存在两个（或三个）问题，解决问题并不像应有的那么简单。

第一个问题是让共享资源在运行时可用——为此，将资源放在 CDN 上可能会起作用，但您可能需要在设计期间引用这些资源，并将它们包含在您的版本控制系统中。

第二个是跨 ASP.Net 项目和解决方案共享公共资源，遗憾的是，这样做的能力将取决于第三个项目，即您的源代码控制系统。

如果您使用的是 VSS，那么，我很同情您，但您现在被卡住了。无论如何，是时候升级了。

其他版本控制系统（包括 TFS）在项目和解决方案与存储库之间没有完全相同的不灵活链接。您应该能够有多个解决方案和项目重叠，类似于：

```
 Root
   Web\
      App1\
      App2\
      SharedResources\
   Class1\
   Class2\
   etc 
```

您可以有多个 Web 应用程序项目 - 一个可以引用 Web\App1 和 Web\SharedResources 中的资源，另一个 Web\App2 和 Web\SharedResources 中的重叠资源，然后将多个解决方案绑定到单个源代码控制存储库。不幸的是，我还没有找到一种方法来做到这一点，并将资源和应用程序放在不同的结构中。

根据您要保存 .sln 和 .proj 文件的位置，您可能必须手动编辑它们以更新路径 - Visual Studio 不会真正喜欢创建这种类型的重叠结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:06:00.170

您可以通过将这些静态文件托管在单独的 Web 服务器中来创建自己的 CDN。

# javascript - 自动完成以在 javascript 中选择选项

> ID：10831581
> 
> 赞同：7
> 
> 时间：2012-05-31T10:12:39.773
> 
> 标签：javascript, input

我正在尝试根据用户的输入自动完成以选择选项

就像是

```
 <input type=text onkeyup=findit()>

<select id="sel">
        <option value="s0001">Adams</option>
        <option value="s0002">Alder</option>
         .
         .
         .
<select> 
```

我找到了这段代码'但它只适用于页面中的一个选择（我需要多选）

```
<html>
<head>

 <script type="text/javascript">

 //initialize some global variables
var list = null;
function fillit(sel,fld) {

        var field = document.getElementById("entry");
        var selobj = document.getElementById("sel");
        if(!list)
        {
                var len = selobj.options.length;
                field.value = "";
                list = new Array();
                for(var i = 0;i < len;i++)
                {
                        list[i] = new Object();
                        list[i]["text"] = selobj.options[i].text;
                        list[i]["value"] = selobj.options[i].value;
                }
        }
        else
        {
            var op = document.createElement("option");
            var tmp = null;
            for(var i = 0;i < list.length;i++)
           {
                tmp = op.cloneNode(true);
                tmp.appendChild(document.createTextNode(list[i]["text"]));
                tmp.setAttribute("value",list[i]["value"]);
                selobj.appendChild(tmp)/*;*/
           }
        }
}

 function findIt(sel,field)
{
        var selobj = document.getElementById("sel");
        var d = document.getElementById("display");
        var len = list.length;
        if(field.value.length > 1)
        {
                if(!list)
                {
                        fillit(sel,field);
                }
                var op = document.createElement("option");
                selobj.options.length = 1
                var reg = new RegExp(field.value,"i");
                var tmp = null;
                var count = 0;
                var msg = "";
                for(var i = 0;i < len;i++)
                {
                        if(reg.test(list[i].text))
                        {
                               // d.childNodes[0].nodeValue = msg;
                                tmp = op.cloneNode(true);
                                tmp.setAttribute("value",list[i].value);
                                tmp.appendChild(document.createTextNode(list[i].text));
                                selobj.appendChild(tmp);
                        }
                } 
        }
        else if(list && len > selobj.options.length)
        {
                selobj.selectedIndex = 0;
                fillit(sel,field);
        }
}

 </script>

</head>
<body onLoad="fillit(sel,entry)">
<div>Enter the first three letters of a street and select a match from the menu.</div>
<form> 
Street
<input type="text" name="Street" id="entry" onKeyUp="findIt(sel,this)"><br>
  <select id="sel">
        <option value="s0001">Adams</option>
        <option value="s0002">Alder</option>
        <option value="s0003">bol</option>
        <option value="s0004">col</option>
        <option value="s0005">dol</option>
        <option value="s0007">Cooper</option>
<!--and so on and so forth-->
  </select> 
</form>
</body> 
```

任何想法如何使它在页面上的多选上工作？

谢谢

巴罗兹

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T10:22:45.543

不确定这是否适合你，但 selected.js 有一个非常好的自动完成多选

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:19:32.063

通常自动完成是针对单个值的，但[jQuery UI 自动完成](http://jqueryui.com/demos/autocomplete/#multiple)确实有一个多选功能。也许尝试一下？以这种方式为您编码最少的工作量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:36:49.187

一种奇怪的方法是更改​​脚本中的 ID 并将其复制到您希望在页面中使用此选项的次数。例如：

```
select id="sel1"
select id="sel2"
select id="sel3" 
```

接着。复制脚本并将每个 (sel) 替换为 sel1，然后将 (sel) 替换为 sel2，依此类推。不是最好的解决方案，但它会起作用。祝你好运

# javascript - 通过 javascript 将值从子页面返回到父页面时面临的问题。它正在返回对象，我想要这个值

> ID：10831592
> 
> 赞同：0
> 
> 时间：2012-05-31T10:13:12.737
> 
> 标签：javascript, asp.net

我有一个javascript函数，如果用户选择未来日期，则会出现一个弹出窗口，该弹出窗口将包含一个文本框和一个按钮。用户在文本框中输入值并单击子弹出按钮.我想在父窗口中捕获这些值，但我无法做到。

下面是我写的javascript：-

```
 function CheckDateEalier(sender, args)
     {
        var toDate = new Date();
        toDate.setMinutes(0);
        toDate.setSeconds(0);
        toDate.setHours(0);
        toDate.setMilliseconds(0);
        if (sender._selectedDate < toDate)
         {
            alert("You can't select day earlier than today! In Case if you are selecting Previous date then, By default it will take current Date.");
            sender._selectedDate = toDate;
            //set the date back to the current date
            sender._textbox.set_Value(sender._selectedDate.format(sender._format))
        }
        if (sender._selectedDate > toDate) {
            var timeSpent = window.open("EnterTimeSpent.aspx", "List", "scrollbars=no,resizable=no,width=320,height=100");
            document.getElementById('<%= hiddenFieldFutureDateSelectTimeSpent.ClientID%>').value = timeSpent;
        }
    } 
```

子页面上的javascript：-

```
<script language="javascript" type="text/javascript">
function Parent() {
    var timespent = Input.elements["timespent"].value; 
    //window.opener.UpdateValues(3);
    window.returnValue = timespent;
    self.close();
} 
```

后面的子页面代码：-

```
<form name="Input" method="post" action="">
     <table>
       <tr>
       <td><input type="text" name="timespent" style="font-size:small;font-weight:bold;"></input>
       </tr>
       <tr>
       <td>
       <input type="button" value="Submit"  class="button small green rounded"   onClick="Parent()"></input>
       </td></tr>
     </table>
</form> 
```

当我调试时，我发现在父页面上，我无法捕获从孩子发送的时间，它显示为对象。请帮我看看我在做什么错误以及我如何捕获文本框的值父页面中的子页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:19:03.950

为什么不使用已经具有此功能的“提示”？

var t=prompt("timespent","");

如果您需要样式，可以使用 jprompt(http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs)

# security - 我是否为 ONVIF 身份验证创建了有效的 WS-UsernameToken？

> ID：10831594
> 
> 赞同：1
> 
> 时间：2012-05-31T10:13:18.597
> 
> 标签：security, authentication, camera, video-streaming, onvif

我正在用 C 编写一个用于 ONVIF 身份验证的 API。我创建了 WS-UsernameToken，但它不起作用。这个 WS-UsernameToken 有什么问题吗？

```
 unsigned int nonce_int = 0, i = 0;
  time_t utcTime = 0;
  struct tm *timeInfo = NULL;
  char sha1_input[100] = { 0 };
  SHA1Context sha = { 0 }; 

  nonce_int = GetRandomNumber();
  encode_base64(sizeof(nonce_int), (char*)&nonce_int, nonceLen, noncestr);

  utcTime = time(NULL);
  timeInfo = localtime(&utcTime);
  strftime(timestr, timeLen, "%Y-%m-%dT%H:%M:%SZ", timeInfo);
  sprintf(sha1_input, "%d%s%s", nonce_int, timestr, password);

  SHA1Reset(&sha);
  SHA1Input(&sha, (const unsigned char*)sha1_input, strlen(sha1_input));

  if(!SHA1Result(&sha))
  {
    printf("\nERROR-- could not compute message digest");
  }
  else
  {
    int i = 0;
    memset(sha1_input, 0x00, sizeof(sha1_input));

    for(i = 0; i < 5; i++)
    {
      sha.Message_Digest[i] = ntohl(sha.Message_Digest[i]);
    }

   encode_base64(sizeof(sha.Message_Digest), (unsigned char*)sha.Message_Digest, digestLen, digeststr);        
  }

  return 0; 
```

但是当我使用这些值并发送 ONVIF 请求时。它回复“无法验证或授权安全令牌”。我想知道我在哪里犯错误。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:12:09.300

我解决了这个问题。我使用的是本地时间字符串而不是 utc 时间字符串。这解决了我的问题。谢谢

# delphi - Firemonkey：TSpeedButton IsPressed 没有可见的效果？

> ID：10831598
> 
> 赞同：2
> 
> 时间：2012-05-31T10:13:31.410
> 
> 标签：delphi, delphi-xe2, firemonkey

如何设置 TSpeedButton（在 TToolbar 上）看起来被按下？它仅在单击时突出显示，但在鼠标离开时恢复正常。我将属性 Stayspressed 设置为 True，实际上属性 IsPressed 变为并保持为 True，但此状态不可见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:16:43.703

你用的是什么风格？一些包含的没有包含所有的效果。

首先，恢复为 windows 样式。如果可行，那么这绝对是样式问题，而不是代码问题。

如果您想为另一种样式添加效果（实际上是动画）：

*   右键单击按钮并选择编辑默认样式。
*   找到要显示动画的 Rectangle 的 Fill.Color 属性。
*   单击动画图标并添加 TColorAnimation
*   设置：StartValue（现有值）。
*   停止值
*   触发器：IsPressed=True

*   重复上述操作以添加第二个动画，其中 Start 和 StopValues 反转并且 IsPressed=False 的 Trigger

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:24:56.463

这是一个艰难的 - 标准 TButton 样式包括有效的效果 - 当“IsPressed”为真时，按钮将看起来被按下。但是，其他样式（尤其是您自己的样式）可能会出现更多问题。我发现最好的解决方案是拥有 2 种样式并在按下按钮时更改样式。

我发现几乎不可能让“鼠标悬停”动画与按钮中的“按下”动画一起使用——通常你想在鼠标经过时稍微突出显示按钮，然后在按下时添加效果——尤其是当你不想要的时候默认阴影效果，但颜色效果（我更喜欢，我不喜欢默认按钮按下的内部阴影效果），但我似乎总是遇到问题。任何一种效果都不会触发，或者按钮状态不会返回到您所期望的状态（我的意思是视觉上）。

我的建议 - 添加一些额外的代码来更改按下按钮的样式，否则你可能会发疯:-)

# vb.net - 在运行时重置 Datagridview 组合框数据

> ID：10831599
> 
> 赞同：1
> 
> 时间：2012-05-31T10:13:39.350
> 
> 标签：vb.net, datagridview, datagridviewcombobox

我正在表单加载事件上创建网格。最初，我将 datagridview 组合框中的一些值设置为：

```
Dim dgvc As DataGridViewComboBoxCell

datagrigview1.Rows(0).Cells("Column1").Value = txtColumn1.Text \\setting selected item
datagrigview1.Rows(0).Cells("Column1").Value = txtColumn2.Text

dgvc = datagrigview1.Rows(0).Cells("Column1").Value
dgvc.Items.Add((" ")) \\adding blank
dgvc.Items.Add(txtColumn1.Text) \\then required value
dgvc = datagrigview1.Rows(0).Cells("Column1").Value
dgvc.Items.Add((" "))
dgvc.Items.Add(txtColumn2.Text) 
```

现在，当用户单击特定组合框时。我将其中的新值设置为：

```
// Resetting old values
If IsDBNull(dgvc) = False Then
  dgvc.DataSource = Nothing
  dgvc.Items.Clear()
End If
If DtTable.Rows.Count > 0 Then
  Dim k As Integer
  Dim dgvc1 As DataGridViewComboBoxCell
  dgvc1 = New DataGridViewComboBoxCell()
  For k = 0 To DtTable.Rows.Count - 1
     If DtItemCd.Rows(k)("ItemCd").ToString <> Current_Code Then

     datagrigview1.Rows(e.RowIndex).Cells("Column1").Value = DtTable.Rows(k)("Column1").ToString
     dgvc1 = datagrigview1.Rows(e.RowIndex).Cells("Column1")
     dgvc1.Items.Add(DtTable.Rows(k)("Column1").ToString)

     datagrigview1.Rows(e.RowIndex).Cells("Column2").Value = DtTable.Rows(k)("Column2").ToString
     dgvc1 = datagrigview1.Rows(e.RowIndex).Cells("Column2")
     dgvc1.Items.Add(DtTable.Rows(k)("Column2").ToString)

    End If
  Next
End If 
```

这显示了旧记录和新记录。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:37:07.230

可能你的代码在这里

```
If IsDBNull(dgvc) = False Then 
```

正在测试 DataGridViewComboBoxCell 是否为 Null，而不是 DataSource 是否为 null。
因此它永远不会进入下面的条件代码。

你能不能试着用这种方式改变，看看现在你是否进入了 if 条件？

```
If IsDBNull(dgvc.DataSource) = False Then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:08:30.897

我得到了以下解决方案：

```
If IsDBNull(dgvc) = False Then
   dgvc.Items.Clear()
   dgvc.DataSource = Nothing
   dgvc = dgvSO.Rows(e.RowIndex).Cells("Column1")
   dgvc.Items.Remove(" ")
   dgvc.Items.Remove(Current_Code)

End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T08:31:38.130

这有效

```
cb.SelectedItem = Nothing 
```

# iphone - UITextField 作为子层

> ID：10831601
> 
> 赞同：0
> 
> 时间：2012-05-31T10:13:51.363
> 
> 标签：iphone, ipad, calayer

我将 UITextField 的图层作为子图层添加到实际上是 UIImageView 的现有图层。我在图像视图上应用透视旋转，它工作正常。但是 UITextField 不会变为活动状态。发送给它的 beginFirstResponder 消息不显示键盘。点击它不起作用，它在用户交互中保持非活动状态。我还尝试为文本字段的图层设置 zPosition，使其位于 imageview 图层之上，并且是 zPosition。

```
 rightband = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"right-band.png"]];
    rightband.layer.frame = CGRectMake(623.5, 310.5, 624, 210);
    rightband.layer.zPosition = 40.0f;

    usernameField = [[UITextField alloc] initWithFrame:CGRectMake(10, 10, 260, 26)];
    usernameField.clearButtonMode = UITextFieldViewModeWhileEditing;
    usernameField.keyboardType = UIKeyboardTypeDefault;
    usernameField.autocapitalizationType = UITextAutocapitalizationTypeNone;
    usernameField.borderStyle = UITextBorderStyleNone;
    usernameField.backgroundColor = [UIColor clearColor];
    usernameField.font = [UIFont fontWithName:@"HelveticaNeue" size:17];
    usernameField.textColor = UIColorFromRGB(0x303030);
    usernameField.textAlignment = UITextAlignmentLeft;
    usernameField.placeholder = @"Username";
    usernameField.autocorrectionType = UITextAutocorrectionTypeNo;
    usernameField.returnKeyType = UIReturnKeyNext;
    usernameField.delegate = self;
    usernameField.layer.anchorPoint = CGPointMake(1.0f, 0.5f);
    usernameField.layer.zPosition = 100.0f;
    usernameField.layer.frame = CGRectMake(10, 10, 260, 26); 
    [rightband.layer addSublayer:usernameField.layer]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:17:02.383

您可以尝试将视图层次结构更改为以下

UIView -> UIImageView 和 UITextField 不要将 UITextField 作为子项添加到 UIImageView UITextField 和 UIImageView 将是 UIView 的子项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:33:09.340

您应该添加文本字段视图以使其响应触摸。这样做：

```
[rightband addSubview:usernameField]; 
```

# javascript - iframe src url 无意中更改了父 url

> ID：10831603
> 
> 赞同：1
> 
> 时间：2012-05-31T10:13:54.630
> 
> 标签：javascript, jquery, iframe, cross-domain

我们正在通过 iframe 从我们的网站 (www.example.com) 调用 api 服务器 (api.example.com)。

当我们进行调用时，iframe 源 url 将父窗口 url 更改为 iframe 源 url。下面给出的是 iframe 代码：

```
<iframe onload="iframeManager.tempIframeCallback()" id="xd_iframe" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" name="xd_iframe" style="position:absolute;top:-9999em;width:10px;height:10px;" src= "{{html on api server}}">
        </iframe> 
```

下面给出的是 api 服务器上的 html：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
        <title>xyz</title>

  <body>
    <script type="text/javascript" charset="utf-8">
        document.domain='example.com';
    </script>
  </body>
</html> 
```

参考： http: [//fettig.net/weblog/2005/11/28/how-to-make-xmlhttprequest-connections-to-another-server-in-your-domain/](http://fettig.net/weblog/2005/11/28/how-to-make-xmlhttprequest-connections-to-another-server-in-your-domain/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:57:48.593

您所指的文章是2005年写的！现在，大多数现代浏览器都支持 CORS，只要服务器允许，您就可以干净地进行跨源 AJAX。这是一篇解释如何的博客文章：[http ://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)

# jquery-ui - jquery移动弹出窗口不起作用

> ID：10831606
> 
> 赞同：0
> 
> 时间：2012-05-31T10:14:01.907
> 
> 标签：jquery-ui, jquery-mobile

> **可能重复：**
> [jquery 移动弹出窗口不起作用？](https://stackoverflow.com/questions/10147371/jquery-mobile-popup-not-working)

我正在尝试使用此代码创建一个简单的 jquery 移动弹出窗口

```
<a href="#popupBasic" data-rel="popup">popup</a>
    <div data-role="popup" id="popupBasic">
        <p>This is a completely basic popup, no options set.</p>
    </div> 
```

我使用的这些脚本

```
<script src="../jquery/jquery.mobile-1.1.0/jquery.js" type="text/javascript"></script>
<link href="jquery/jquery.mobile-1.1.0/css/jquery.mobile-1.1.0.css" rel="stylesheet" type="text/css" />
<script src="../jquery/jquery.mobile-1.1.0/jquery.mobile-1.1.0.js" type="text/javascript"></script> 
```

为什么我的弹出窗口不起作用？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T08:36:10.540

需要用这个j查询手机链接

```
http://code.jquery.com/mobile/latest/jquery.mobile.min.css
http://code.jquery.com/mobile/latest/jquery.mobile.min.js 
```

为我工作！！

# php - MySQL插入到子查询选择

> ID：10831610
> 
> 赞同：0
> 
> 时间：2012-05-31T10:14:11.230
> 
> 标签：php, mysql, insert, subquery

基本上，我想插入表中，从同一个表中获取值 id，像这样

```
$sql = ("INSERT INTO commande (idfichecmd,idproduit,idclt,qte,datecmd)
(SELECT MAX(idfichecmd)+1 ,'1' AS idproduit ,'$idC' AS idclt ,'$fb' AS qte,'$date' FROM commande),
(SELECT MAX(idfichecmd) ,'2' AS idproduit ,'$idC' AS idclt ,'$g' AS qte,'$date' FROM commande),
(SELECT MAX(idfichecmd) ,'3' AS idproduit ,'$idC' AS idclt ,'$pi' AS qte,'$date' FROM commande),
(SELECT MAX(idfichecmd) ,'4' AS idproduit ,'$idC' AS idclt ,'$ft' AS qte,'$date' FROM commande),
(SELECT MAX(idfichecmd) ,'5' AS idproduit ,'$idC' AS idclt ,'$sd' AS qte,'$date' FROM commande),
(SELECT MAX(idfichecmd) ,'6' AS idproduit ,'$idC' AS idclt ,'$ad' AS qte,'$date' FROM commande),
(SELECT MAX(idfichecmd) ,'7' AS idproduit ,'$idC' AS idclt ,'$vs' AS qte,'$date' FROM commande),
(SELECT MAX(idfichecmd) ,'8' AS idproduit ,'$idC' AS idclt ,'$wi' AS qte,'$date' FROM commande),
(SELECT MAX(idfichecmd) ,'9' AS idproduit ,'$idC' AS idclt ,'$equip' AS qte,'$date' FROM commande),
(SELECT MAX(idfichecmd) ,'10' AS idproduit ,'$idC' AS idclt ,'$fo' AS qte,'$date' FROM commande),
(SELECT MAX(idfichecmd) ,'11' AS idproduit ,'$idC' AS idclt ,'$fh' AS qte,'$date' FROM commande)")or die(mysql_error());
$result = mysql_query($sql) or die("Unable to add commande : ". mysql_error());   
mysql_close(); 
```

但是，这个不起作用，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:55:35.790

你*可以*使用[`UNION`](http://dev.mysql.com/doc/en/union.html)：

```
INSERT INTO commande (idfichecmd, idproduit, idclt, qte, datecmd)
  SELECT MAX(idfichecmd)+1,  1, '$idC', '$fb'   , '$date' FROM commande
UNION ALL
  SELECT MAX(idfichecmd)  ,  2, '$idC', '$g'    , '$date' FROM commande
UNION ALL
  SELECT MAX(idfichecmd)  ,  3, '$idC', '$pi'   , '$date' FROM commande
UNION ALL
  SELECT MAX(idfichecmd)  ,  4, '$idC', '$ft'   , '$date' FROM commande
UNION ALL
  SELECT MAX(idfichecmd)  ,  5, '$idC', '$sd'   , '$date' FROM commande
UNION ALL
  SELECT MAX(idfichecmd)  ,  6, '$idC', '$ad'   , '$date' FROM commande
UNION ALL
  SELECT MAX(idfichecmd)  ,  7, '$idC', '$vs'   , '$date' FROM commande
UNION ALL
  SELECT MAX(idfichecmd)  ,  8, '$idC', '$wi'   , '$date' FROM commande
UNION ALL
  SELECT MAX(idfichecmd)  ,  9, '$idC', '$equip', '$date' FROM commande
UNION ALL
  SELECT MAX(idfichecmd)  , 10, '$idC', '$fo'   , '$date' FROM commande
UNION ALL
  SELECT MAX(idfichecmd)  , 11, '$idC', '$fh'   , '$date' FROM commande 
```

但是首先`MAX(idfichecmd)`在 PHP 中获取，然后使用`INSERT ... VALUES`（记住在事务中执行操作以保持原子性）可能更容易：

```
INSERT INTO commande (idfichecmd, idproduit, idclut, qte, datecmd) VALUES
  ($id+1, 1, '$idC', '$fb', '$date'),
  ($id  , 2, '$idC', '$g' , '$date'),
  -- etc. 
```

或者，如果您只是想为每条新记录添加一个 incremented `idfichecmd`，请考虑制作该列[`AUTO_INCREMENT`](http://dev.mysql.com/doc/en/example-auto-increment.html)（MySQL 会自动为您完成所有这些操作）：

```
ALTER TABLE commande MODIFY idfichecmd INT AUTO_INCREMENT;
INSERT INTO commande (idproduit, idclut, qte, datecmd) VALUES
  (1, '$idC', '$fb', '$date'),
  (2, '$idC', '$g' , '$date'),
  -- etc. 
```

# php - Postgres 安装问题

> ID：10831615
> 
> 赞同：0
> 
> 时间：2012-05-31T10:14:47.327
> 
> 标签：php, postgresql, wamp

我已经使用 Wamp 服务器很长时间了。它与 MySQL 一起提供。今天我不得不从 mysql 更改为 PostgreSQL。我试过安装 Postgres，下载并完成安装。但是当我试图运行一个 php 程序来从表中获取一些数据时，

```
<?php
$link = pg_connect("host=192.168.2.43 dbname=DataFetcher user=postgres password=user");
echo "Connection Established";
?> 
```

它说`Call to undefined function pg_connect()`，这意味着没有检测到 Postgres。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:18:45.473

您需要启用扩展。

像左键单击 wamp 图标 goto - php > extensions 并单击 php_pgsql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:50:38.150

我遇到过同样的问题。我安装了 wamp，成功启用了 php_pgsql 和 php_pdo_pgsql。但是我仍然看不到 pgsql 安装在 apache 服务器上。[我在http://forum.wampserver.com/read.php?2,40270,40311](http://forum.wampserver.com/read.php?2,40270,40311)找到了@skoobiedu 提供的很好的解释和解决方案

PS我再次给出了这个答案，因为这是这个问题的正确答案，@Bill 删除了我的答案。我请求@user1371896 接受这个答案作为正确答案。我还要求@bill 不要删除这个答案，因为我已经从另一篇帖子中删除了相同的答案。

# c# - 在我的系统中找不到 InkAnalyzer (IAWinFX.dll)

> ID：10831616
> 
> 赞同：1
> 
> 时间：2012-05-31T10:14:56.787
> 
> 标签：c#, handwriting-recognition, ink-analyzer

我正在开发一个手写识别应用程序，并希望在其中使用 InkAnalyzer。我在 youtube 上看到了一个演示 Microsoft Ink 和 InkAnalyzer 的示例。但问题是我无法找到 InkAnalyzer (IAWinFX.dll) 的 dll。

这是我看过[这个样本](http://www.youtube.com/watch?v=ZbxmmOKBeoE)的视频链接。

在视频中显示此 dll 位于系统的以下路径：**C:\Program Files\Reference Assemblies\Microsoft\Tablet PC\v1.7\IAWinFX.dll**

但是我在我系统的平板电脑文件夹中只能找到名为v6.0的文件夹，没有v1.7文件夹。请让我知道如何安装此平板电脑 SDK 以便获取此 dll。

我已经尝试过 Tablet PC SDK 设置，但它们都没有给我那个 dll。

# f# - F# 和 MonoDevelop 的 F# 插件是否为 Linux 维护？

> ID：10831625
> 
> 赞同：3
> 
> 时间：2012-05-31T10:15:49.397
> 
> 标签：f#, mono, monodevelop

我想在我的 Linux 机器上使用 F#，但我很难找到相关文件的最新版本。F#[跨平台包](http://fsxplat.codeplex.com/)来自 2010 年，[插件](http://functional-variations.net/monodevelop/)似乎适用于 Monodevelop 2.4（我安装了 2.8，无论如何这不是最新的......）。项目还活着吗？我在看正确的地方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:34:16.190

F# 跨平台包已经过时了。根据您使用的 Linux 发行版，F# 可能与 Mono 2.10.x 一起分发（有关详细信息，请查看[Mono 主页](http://www.go-mono.com/mono-downloads/download.html)）。否则，您应该[从源代码构建 F# 编译器](https://github.com/fsharp/fsharp)以获取最新版本。

[原始 F# 绑定](http://functional-variations.net/monodevelop/)不适用于 MonoDevelop 2.8。[幸运的是， Scott Stephens](https://github.com/scottstephens/fsharpbinding)正在 Google Summer of Code 项目下积极开发 F# 绑定。[这里](https://groups.google.com/group/fsharp-opensource/browse_thread/thread/f75bac5cd2f2f9c8#)提到了第一个积极的景象。如需讨论，您可以在[F# 开源社区组](https://groups.google.com/group/fsharp-opensource)上发帖或在此处提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T21:46:05.063

Monodevelop 的 F# 插件截至 2014 年仍在开发，可从 addins.monodevelop.com 获得。

# java-me - 您如何控制 J2ME 手机上的警报行为？

> ID：10831631
> 
> 赞同：1
> 
> 时间：2012-05-31T10:15:57.183
> 
> 标签：java-me, timeout, alert, midp, lcdui

我正在 2 款不同的诺基亚型号手机上测试我的 midlet：7210 Supernova 和 6600 Fold。
两者都是 S40 5th ed SP1，但我仍然对警报有不同的行为，我想知道是否有办法解决这个问题。

在不同的时间，我的 MIDlet 会发出哔哔声并发出 n 秒的自我关闭警报（这意味着它会在 n 秒后消失，除非用户提前关闭它）。

如果在手机进入屏幕保护模式（变暗）后发生这种情况，则会发生以下情况：

*   在 7210 Supernova 上，屏幕亮起，您会看到警报，如果您不触摸它，它会在`n`几秒钟后自行消失，您可以看到背景屏幕 - 这是所需的行为。
*   在 6600 Fold 上，您会听到哔哔声，但屏幕仍然很暗。如果您现在按下某个按钮，手机会亮起，但只有这样它才会显示警报。其余部分类似。但这是个问题，因为整个 MIDlet 在用户按下某个键之前都处于停止状态。

所以我可以通过不在表现像我的 6600 的手机上显示此警报来修复它，但我仍然希望它在表现像我的 7210 的手机上。有没有办法以编程方式检查这个？你检查什么？

# ruby-on-rails - 在rails数组上循环遍历ruby的简单方法

> ID：10831633
> 
> 赞同：0
> 
> 时间：2012-05-31T10:16:02.983
> 
> 标签：ruby-on-rails, ruby

有人可以指出我关于循环遍历数组并提取所需值的正确方向吗？这让我无法理解它：

```
array = [{"response_message"=>nil, "response_client_message"=>nil, "response_customer_message"=>nil, "closed"=>true, "updated_at"=>2012-05-30 13:20:49 UTC, "created_at"=>2012-05-30 13:20:29 UTC, "token"=>"2fda85eab962fa6e27850605f2f948ca", "price"=>"$24.00", "amount"=>#<BigDecimal:7fa3f4485428,'0.24E2',9(18)>, "currency_code"=>"USD", "metadata"=>"{\"xxx\": 5, \"xxx\": 250, \"xxx\": true, \"support\": { \"email\": true, \"phone\": false } }", "line_items"=>[{"amount"=>#<BigDecimal:7fa3f4482fe8,'0.24E2',9(18)>, "notes"=>nil, "currency_code"=>"USD", "description"=>"1 day", "price"=>"$24.00", "feature_level"=>"{\"hotspots\": 5, \"vouchers\": 250, \"customizable_logins\": true, \"support\": { \"email\": true, \"phone\": false } }", "metadata"=>"{\"hotspots\": 5, \"vouchers\": 250, \"customizable_logins\": true, \"support\": { \"email\": true, \"phone\": false } }"}]}] 
```

其中一个每天都会生成，我需要循环并呈现一些值。我试过这个：

```
array.select{|elem| elem[:updated_at]} 
```

但这给了我一个[]。

如何循环并提取值？我还需要了解如何获取 line_items 数组。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:26:16.900

```
array.select{|elem| elem["updated_at"]} 
```

传递字符串不是符号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:28:30.297

尚不完全清楚您要做什么，但是如果您想从该数组中提取值，请尝试`map`：

```
array.map { |elem| elem["updated_at"] } 
```

这将为您返回所有“updated_at”值的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:33:00.853

如果你想遍历一个数组并收集 updated_at 值，那么你应该使用 collect/map 方法。在您的示例中，您引用的 elem[:updated_at] 与 elem["updated_at"] 不同

```
array.collect{|elem| elem["updated_at"]} 
```

# c1-cms - 在可视化编辑器的工具栏中启用 Tinymce 的 Text Color 插件

> ID：10831636
> 
> 赞同：2
> 
> 时间：2012-05-31T10:16:15.053
> 
> 标签：c1-cms

如何在可视化编辑器的工具栏中启用 Tinymce 的文本颜色插件？

通过编辑此文件，我能够在可视化编辑器中启用打印、搜索和替换插件

Composite/content/misc/editors/visualeditor/includes/toolbarsimple.inc

和

修改以下文件中的一行以包含搜索替换、打印插件

Composite/content/misc/editors/visualeditor/visualeditor.js

plugins: "compositelink,compositetable,compositeimage,compositerendering,compositecharmap,compositefield,compositetext,paste,lists,searchreplace,print",

同样，有没有办法在可视化编辑器的工具栏中启用 Tinymce 的内置功能，即文本颜色、字体大小、字体系列、表格、行、列，而无需通过编辑此文件完成的样式进行更改

前端/配置/可视化编辑器/common.xml

谢谢阿吉思

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T12:53:07.873

设法在 Composite C1 编辑器中启动并运行文本颜色、背景颜色、字体系列、字体大小。

为了他人的利益，列出以下步骤。

*   **将Website\Composite\content\misc\editors\visualeditor\tiny_mce\themes\advanced** 除了 editor_template.js 和 editor_template_src.js 的所有文件和文件夹复制到您的**Website\Composite\content\misc\editors\visualeditor\tiny_mce\themes\复合**文件夹。
*   编辑文件**Website\Composite\content\misc\editors\visualeditor\visualeditor.js**并在配置部分包含以下行。

    ```
    skin: 'default',
    theme_advanced_buttons1: "forecolor,backcolor,fontselect,fontsizeselect",
    theme_advanced_buttons2: "", 
    ```

    有关选项的完整列表，请访问[TinyMCE 链接](http://www.tinymce.com/tryit/full.php)并转到查看源代码。

    您可能还想在**plugins:行中****包含 inlinepopups**以正确呈现弹出窗口。任何其他插件，如*insertdatetime、media、print、searchreplace 等*也可以包含在同一行中。

****   要在现有工具栏行中包含 insertdatetime、media、print、searchreplace 等插件，请编辑**Website\Composite\content\misc\editors\visualeditor\includes\toolbarsimple.inc**文件并包含包含命令的相应标签。例如。

    ```
    <ui:toolbargroup>
        <ui:toolbarbutton cmd="mceSearch" tooltip="Search" image="${skin}/wysiwygeditor/search.png" isdisabled="false" />
        <ui:toolbarbutton cmd="mceReplace" tooltip="Replace" image="${skin}/wysiwygeditor/replace.png" isdisabled="false" />
    </ui:toolbargroup> 
    ```

    *   **将Website\Composite\content\misc\editors\visualeditor\tiny_mce\themes\advanced\editor_template_src.js**文件中的代码复制并合并到**Website\Composite\content\misc\editors\visualeditor\tiny_mce\themes\composite\editor_template .js**文件。大多数功能都可以照原样复制。只有像**renderUI**这样常见的需要特别注意。我直接调用了 simpleLayout 函数，而不是在 renderUI 中使用开关

    ```
    ic = t._simpleLayout(s, tb, o, p); 
    ```

    *   无法在编辑器中看到大型内容的全部内容可能存在一些问题，要解决此问题，请编辑**Website\Composite\content\misc\editors\visualeditor\tiny_mce\themes\composite\skins\default\ui .css**文件并修改**.defaultSkin iframe** css 以指定适当的高度或溢出滚动。*** 

 ***要在工具栏中包含更多功能，只需编辑**theme_advanced_buttons1**。

祝你好运..

阿吉特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:08:11.880

使用 Composite C1，您需要使用 CSS 类进行样式设置（如字体、字体大小、颜色和与表格相关的样式），并使这些类对最终用户可用。

前端开发人员在 CSS 中定义所需的类，然后将它们注册到工具栏配置文件中，最终用户可以从中选择样式。Composite C1 不提倡在内容 html 中包含字体标签或样式属性，因此如果这是您真正想要的，则需要对核心 javascript 进行更改。

您可以在此处阅读有关自定义可视化编辑器工具栏的信息[http://docs.composite.net/Console/CustomizingVisualEditor](http://docs.composite.net/Console/CustomizingVisualEditor)。***

# c# - 使用页面上一页获取 GridView 选定的行值

> ID：10831647
> 
> 赞同：2
> 
> 时间：2012-05-31T10:16:47.077
> 
> 标签：c#, asp.net, .net, vb.net, gridview

我在 ConsumerList 页面中有一个 gridView。单击编辑按钮时（在每一行中），它​​被导航到 EditConsumer 页面。在 EditConsumer 页面中，我需要使用**Page.PreviousPage**获取所选行的值。如何获得这些值？

```
 public void Consumer_RowCommand(Object sender, GridViewCommandEventArgs e)
    {

        if (e.CommandName == "CustomEdit")
        {
            int rowIndex = Convert.ToInt32(e.CommandArgument);
            string consumerID = grdConsumers.Rows[rowIndex].Cells[1].Text;
            string consumerName = grdConsumers.Rows[rowIndex].Cells[2].Text;
            string consumerUrl = grdConsumers.Rows[rowIndex].Cells[3].Text;
            string consumerStatus = grdConsumers.Rows[rowIndex].Cells[4].Text;

            Response.Redirect("EditConsumer.aspx?RowIndex=" + rowIndex);
        }
    } 
```

标记

```
 <asp:GridView ID="grdConsumers" runat="server" AutoGenerateColumns="False" CssClass="resultGridTable"
                GridLines="None" EnableViewState="True" AllowSorting="True" OnSorting="Consumers_Sorting" OnRowCommand="Consumer_RowCommand">
                <AlternatingRowStyle BackColor="#E5E5E5" />
                <Columns>

                   <asp:TemplateField HeaderText="Action">
                        <ItemTemplate>

                             <asp:Button ID="btnView" runat="server" CssClass="actionButtonView"
                                  Text="VIEW" Style="width: 40px" BackColor="Orange"
                                  Font-Bold="True" ForeColor="White" /> 

                             <asp:Button ID="btnEdit" runat="server" CommandName="CustomEdit" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>"
                              CssClass="actionButtonEdit"
                                  Text="EDIT" Style="width: 35px" BackColor="Orange"
                                  Font-Bold="True" ForeColor="White" /> 

                             <asp:Button ID="btnDelete" runat="server" CssClass="actionButtonDelete"
                                  Text="DELETE" Style="width: 55px" BackColor="Orange"
                                  Font-Bold="True" ForeColor="White" />

                             <asp:Button ID="btnPing" runat="server" CssClass="actionButtonPing"
                                  Text="PING" Style="width: 35px" BackColor="Orange"
                                  Font-Bold="True" ForeColor="White" />

                         </ItemTemplate>
                    </asp:TemplateField>

                    <asp:BoundField HeaderText="Consumer ID" DataField="ConsumerID" SortExpression="ConsumerID"></asp:BoundField>
                    <asp:BoundField HeaderText="Consumer Name" DataField="ConsumerName" SortExpression="ConsumerName"></asp:BoundField>
                    <asp:BoundField HeaderText="Consumer URL" DataField="ConsumerURL" SortExpression="ConsumerURL"></asp:BoundField>
                    <asp:BoundField HeaderText="Status" DataField="Status" SortExpression="Status"></asp:BoundField>

                </Columns>
            </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:35:25.267

**注意**：`PreviousPage`仅适用`!= null`于[跨页发布](http://msdn.microsoft.com/en-us/library/ms178139.aspx)，[Response.Redirect](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.redirect.aspx)将不起作用。因此，您可以例如使用[`Server.Transfer`](http://msdn.microsoft.com/en-us/library/y4k58xk7.aspx).

您可以提供一个公共属性`SelectedConsumer`，该属性返回`GridView`.

```
public Consumer SelectedConsumer
{
    get {
        if (grdConsumers.SelectedRow == null)
            return null;

        var c = new Consumer();
        c.consumerID = grdConsumers.SelectedRow.Cells[1].Text;
        c.consumerName = grdConsumers.SelectedRow.Cells[2].Text;
        c.consumerUrl = grdConsumers.SelectedRow.Cells[3].Text;
        c.consumerStatus = grdConsumers.SelectedRow.Cells[4].Text;

        return c;
    }
} 
```

现在您只需要将`PreviousPage`属性转换为正确的页面类型：

```
var consumerList = (ConsumerList)Page.PreviousPage;
var selectedConsumer = consumerList.SelectedConsumer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:30:39.080

检查[如何使用 Page.PreviousPage](http://msdn.microsoft.com/en-us/library/ms178139.aspx)。

# javascript - 在带有动画的jquery中自动滚动页面

> ID：10831655
> 
> 赞同：0
> 
> 时间：2012-05-31T10:17:07.243
> 
> 标签：javascript, jquery

如何使用 jquery 或任何其他插件添加此功能，例如自动向下滚动？

[http://www.nextbigsound.com/premier/beta](http://www.nextbigsound.com/premier/beta)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:21:41.910

使用 jQuery 动画，滚动

```
$('html, body').animate({
    scrollTop: 200
}, 400); 
```

这将在 400 毫秒内向下滚动 200 像素

# entity-framework - Protobuf 和实体框架 - 包含实体序列化

> ID：10831660
> 
> 赞同：1
> 
> 时间：2012-05-31T10:17:28.477
> 
> 标签：entity-framework, serialization, protobuf-net

我无法序列化嵌套实体。

这是我的转移对象

```
[ProtoContract]
[Serializable]
[DataContract]
public class MyClassTO
{
    [ProtoMember(1)]
    [DataMember]
    public List<MyEntity> ListOfMyEntities {get;set;};

} 
```

在我的后端，我触发以下 linq 到实体查询，填充传输对象并将其返回给客户端：

```
var myClassTO  = new MyClassTO();

myClassTO.ListOfMyEntities = Context.MyEntity.Include("ReferencedEntity.AnotherReferencedEntity").ToList;

return myClassTO; 
```

客户端收到 MyEntity 对象的列表，但包含的实体未序列化（它们都是空的）。有人对此有任何想法吗？

# visual-studio-2010 - Outlook 加载项清单和安装程序文件夹 VSTO

> ID：10831669
> 
> 赞同：0
> 
> 时间：2012-05-31T10:17:57.373
> 
> 标签：visual-studio-2010, outlook, vsto, outlook-addin

我正在使用 Visual Studio 2010 开发 Outlook 插件 vsto，

当我发布我的项目时，我在“Application Files\MyAddin_version\Installer\MyAddin.exe.deply”中找到了一个新的安装文件夹

这是一个带有部署的新文件，在我能够在没有此文件的情况下进行部署之前。

我的问题，我的构建中的什么设置生成了这个文件？

现在每次构建项目时都会出现问题，我在清单文件中发现了新条目：

我很确定在旧版本中找不到该条目，我没有更改代码，但我试图更改构建和发布，在本地发布和 UNC 和 http 之间切换。（需要删除这个新条目，每次构建时都不需要它，它会导致问题。）

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:58:50.190

抱歉，这是我的解决方案中的一个错误，一些文件在构建操作中被标记为内容。

# javascript - 使用javascript向服务器发送数据

> ID：10831672
> 
> 赞同：1
> 
> 时间：2012-05-31T10:18:10.147
> 
> 标签：javascript

如何在没有提交方法的情况下使用 java 脚本将字符串值发送到服务器？我知道我可以使用 jquery 或 ajax 但是没有任何库有没有其他方法可以做到这一点？我在 Google 中搜索并找到了一些很好的链接： [如何使用 Javascript](https://stackoverflow.com/questions/5049635/how-to-send-data-to-remote-server-using-javascript) [http://bytes.com/topic/html-css/answers/154271-post-data-server-javascript-client-side将数据发送到远程服务器](http://bytes.com/topic/html-css/answers/154271-post-data-server-javascript-client-side)

但他们都说我们应该使用 jquery 或 ajax

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:20:27.493

是的，如果您不想刷新页面，您必须这样做。虽然，您可以找到其他框架而不是 jQuery。那个框架里面还是使用了ajax技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:21:00.703

AJAX 不是一个库——它是内置在 Javascript 中的，并且可以在几乎所有浏览器上使用，甚至是 IE6 以后的浏览器。

您可以在此处找到完整的教程和说明：http: [//www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

# ios - 电影播放错误

> ID：10831673
> 
> 赞同：0
> 
> 时间：2012-05-31T10:18:14.227
> 
> 标签：ios, objective-c, mpmovieplayercontroller

我正在尝试在设备上播放视频。视频就是这个 [视频](http://easyhtml5video.com/images/happyfit2.mp4)

和我的代码：

```
 NSString *urlStr = @"http://easyhtml5video.com/images/happyfit2.mp4";
NSURL *url = [NSURL fileURLWithPath:urlStr];
  moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
[self.view addSubview:moviePlayer.view];
moviePlayer.view.frame = CGRectMake(0, 0, 320, 400);  
[moviePlayer play]; 
```

当我启动应用程序时，会看到一个电影屏幕，但没有播放电影。你能帮我看看错在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:21:10.207

尝试使用 `NSURL *url = [NSURL URLWithPath:urlStr];`

而不是 `NSURL *url = [NSURL fileURLWithPath:urlStr];` 它是一个网页网址而不是文件网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:47:25.323

检查此视频以供参考。这对我有用 -

```
- (IBAction)playMovie:(id)sender
{
    NSString *filepath   =   @"http://easyhtml5video.com/images/happyfit2.mp4";
    NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
    MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlaybackComplete:)
                                                               name:MPMoviePlayerPlaybackDidFinishNotification
                                                             object:moviePlayerController];

    [self.view addSubview:moviePlayerController.view];
    moviePlayerController.fullscreen = YES;
    [moviePlayerController play];
}

- (void)moviePlaybackComplete:(NSNotification *)notification
{
    MPMoviePlayerController *moviePlayerController = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                         name:MPMoviePlayerPlaybackDidFinishNotification
                                                                                object:moviePlayerController];

    [moviePlayerController.view removeFromSuperview];
    [moviePlayerController release];
} 
```

# javascript - Worklight - 打开本机应用程序

> ID：10831679
> 
> 赞同：3
> 
> 时间：2012-05-31T10:18:36.730
> 
> 标签：javascript, android, html, cordova, ibm-mobilefirst

在 Worklight 中，可以从 Android 的 Worklight 应用程序打开本机页面。是否可以从 Android 设备中 Worklight 开发的应用程序启动本机应用程序？如果可能，怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:41:11.460

是的，有可能。这是一个解释如何从 Worklight 应用程序打开本机活动的培训 - [http://worklight.com/download/get-started/4.2.1/module-9.1](http://worklight.com/download/get-started/4.2.1/module-9.1)

如果您想从您的应用程序中打开另一个活动（其他应用程序），您将需要创建一个 PhoneGap 插件，该插件会创建一个 Intent 对象来打开一个新应用程序。

此问题可能包含您要查找的内容[Open another application from your own (intent)](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)

在这里你可以看到如何为 Android 实现 PhoneGap 插件 - [http://worklight.com/download/get-started/4.2.1/module-9.3](http://worklight.com/download/get-started/4.2.1/module-9.3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:10:00.613

IBM Worklight 包含调用本机应用程序的示例，但这些示例是在 Worklight 本身中创建的。例如：`module_09_1_Android_CombiningNativeAndWebPages`在 Android 文件夹本身的这个示例中，他们创建了一个活动`com.AndroidShowNativePage.HelloNative`（包名称），该活动从该 JavaScript 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:45:24.300

是的，它与 Worklight 无关 :)

在 Worklight 的本机页面中（或者如果您愿意，您可以编写一个 phonegap 插件），您需要创建一个意图（参见[http://developer.android.com/reference/ android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)）。
这个意图可以打开一个外部应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T06:45:14.133

使用 Worklight，您可以调用本机页面，

代码：

WL.Nativepage.show("com.example.class",backtopage,parameter);

函数返回页（）

调用本机代码并返回网页的自定义参数。

如果您有疑问，请参考“Anton”链接。

# android - 如何使用我自己的代码从 vcf 文件中恢复联系人

> ID：10831682
> 
> 赞同：0
> 
> 时间：2012-05-31T10:18:46.550
> 
> 标签：android

我可以通过编写自己的代码将所有电话联系人备份到 vcf 文件中。但是如何使用我自己的代码将联系人从 vcf 文件恢复到 android 手机。有什么办法不使用android活动。

# java - 使用 Apache POI API 读取“.doc”文件时获取“java.lang.ArrayIndexOutOfBoundsException”

> ID：10831683
> 
> 赞同：1
> 
> 时间：2012-05-31T10:18:47.877
> 
> 标签：java, apache-poi

这是我得到的例外：

> org.apache.poi.hwpf.model.ListLevel.( ListLevel.java:120) 在 org.apache.poi.hwpf.model.ListFormatOverrideLevel.(ListFormatOverrideLevel.java:48) 在 org.apache.poi.hwpf.model.ListTables.(ListTables.java:88) 在 org.apache .poi.hwpf.HWPFDocument.(HWPFDocument.java:267) 在 org.apache.poi.hwpf.HWPFDocument.(HWPFDocument.java:157) 在 com.mahesh.MyFrame.readMSDocuments(MyFrame.java:301) 在 com。 mahesh.MyFrame.readALLDocuments(MyFrame.java:276) at com.mahesh.MyFrame.access$1(MyFrame.java:269) at com.mahesh.MyFrame$2.actionPerformed(MyFrame.java:231) at javax.swing.AbstractButton javax 的 .fireActionPerformed(Unknown Source)。swing.AbstractButton$Handler.actionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.setPressed(Unknown Source) at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source ) 在 java.awt.Component.processMouseEvent(Unknown Source) 在 javax.swing.JComponent.processMouseEvent(Unknown Source) 在 java.awt.Component.processEvent(Unknown Source) 在 java.awt.Container.processEvent(Unknown Source) 在java.awt.Component.dispatchEventImpl(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) at java. awt.LightweightDispatcher。processMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent( Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) ) 在 java.awt.EventDispatchThread.pumpEvents(Unknown Source) 在 java.awt.EventDispatchThread.pumpEvents(Unknown Source) 在 java.awt.EventDispatchThread.run(Unknown Source)dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters( Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) ) 在 java.awt.EventDispatchThread.run(Unknown Source)dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters( Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) ) 在 java.awt.EventDispatchThread.run(Unknown Source)EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread。 java.awt.EventDispatchThread.run（未知源）上的 pumpEvents（未知源）EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread。 java.awt.EventDispatchThread.run（未知源）上的 pumpEvents（未知源）

这是我的代码

```
private void readMSDocuments(String fileToRead) {

    boolean containsEditorAndMt = false;
    String fileEditorAndMt = null;
    dataArray = null;
    try {

        fis = new FileInputStream(new File(fileToRead).getAbsolutePath());
        fs = new POIFSFileSystem(fis);
        document = new HWPFDocument(fs);
        wordExtractor = new WordExtractor(document);
        dataList = new ArrayList();
        dataArray = wordExtractor.getParagraphText();//getParagraphText() reads paragraphs so problem is each paragraph is read a single line .u can see in console
        System.out.println(dataArray.length);
        if (dataArray.length >= 0) {

            for (int k = 0; k < dataArray.length; ++k) {

                if (dataArray[k].trim().length() > 0) {

                    dataList.add(dataArray[k].trim());
                    //System.out.println(fileToRead+" "+dataArray[k].trim()+"\n");
                }
            }
        }

    }
} 
```

谁能帮我找出引发异常的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:26:15.943

您正在使用 Apache POI API：
这是此域中的错误。

您可以阅读此错误并通过[此](https://issues.apache.org/bugzilla/show_bug.cgi?id=39526)进行分析。

# xsd - XS：任何模式验证

> ID：10831695
> 
> 赞同：0
> 
> 时间：2012-05-31T10:20:00.453
> 
> 标签：xsd

我在下面的 xsd 中收到验证错误。

cos-nonambig：“http://alert.schemas.tr.com/TriggerSynchronizationService/Data/2010-02-08/”：resyncRequestID 和 WC[##any]（或它们的替换组中的元素）违反“唯一粒子属性” ”。在针对此模式进行验证期间，将为这两个粒子创建歧义。

我想我没有正确声明 xs:any。

```
<xs:complexType name="GenerationTriggerData">
  <xs:sequence>
    <xs:element minOccurs="0" maxOccurs="1" name="resyncRequestID" type="xs:int" /> 
    <xs:element minOccurs="0" maxOccurs="1" name="userID" type="xs:string" />
    <xs:element minOccurs="0" maxOccurs="1" name="alertID" type="xs:string" />
    <xs:element minOccurs="0" maxOccurs="1" name="triggerID" type="xs:string" />
    <xs:element minOccurs="0" maxOccurs="1" name="logicalType" type="xs:string" />
    <xs:element minOccurs="0" maxOccurs="1" name="version" type="xs:string" />
    <xs:element minOccurs="0" maxOccurs="1" name="state"  type="q1:State_Enum" /> 
    <xs:element minOccurs="0" maxOccurs="1" name="criteria"     xmlns:q2="http://expressions.schemas.tfn.thomson.com/2006-09-04/" type="q2:ExpressionRoot"    /> 
    <xs:any namespace="##any" minOccurs="0" maxOccurs="unbounded" processContents="skip"/>                              
  </xs:sequence>
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:56:36.337

XSD 不允许有歧义的内容。UPA 是关于解析器能够明确地确定它相对于 XSD 的位置；甚至[超前](http://en.wikipedia.org/wiki/Look-ahead_%28backtracking%29)也是不允许的。

由于您**`xsd:any`**可以是 (##) 任何名称空间，因此`resyncRequestID`会匹配它；在这种情况下，是第一个（可选）还是通配符？这里的内容显然是模棱两可的，没有前瞻会有帮助。

一种方法是更改​​ xsd:any 定义，使其与之前的任何内容都不匹配。约束命名空间始终是一种简单的方法。

或者，在 xsd:any 之前使粒子成为强制性的。这样读者就会知道“狂野”从哪里开始......

如果这不是一个选项，请在 xs:any 之前引入一个特殊的“标记”标签；它必须是强制性的！

以上通常称为“重构 XSD”以满足 XSD 的 UPA 设计约束。

# r - 忽略 DF 中的 NA 列（用于计算）而不删除它

> ID：10831696
> 
> 赞同：1
> 
> 时间：2012-05-31T10:20:02.027
> 
> 标签：r

目前，我有一个函数可以为我的相关矩阵中的每个文件寻找最佳相关性。我正在处理 list.files。这是功能：

```
get.max.cor <- function(station, mat){
        mat[row(mat) == col(mat)] <- -Inf        
        which( mat[station, ] == max(mat[station, ],na.rm=TRUE) )
     } 
```

如果我有这样的相关矩阵（没有 NA 值）：

```
cor1 <- read.table(text="
ST208     ST209     ST210     ST211     ST212
ST208 1.0000000 0.8646358 0.8104837 0.8899451 0.7486417
ST209 0.8646358 1.0000000 0.9335584 0.8392696 0.8676857
ST210 0.8104837 0.9335584 1.0000000 0.8304132 0.9141465
ST211 0.8899451 0.8392696 0.8304132 1.0000000 0.8064669
ST212 0.7486417 0.8676857 0.9141465 0.8064669 1.0000000
", header=TRUE) 
```

它完美地工作。如果我有一个带有一些 NA（但不仅是 NA）的相关矩阵，如下所示：

```
cor2 <- read.table(text="
ST208     ST209     ST210     ST211     ST212
ST208 1.0000000 NA 0.9666491 0.9573701 0.9233598
ST209 NA 1.0000000 0.9744054 0.9577192 0.9346706
ST210 0.9666491 0.9744054 1.0000000 0.9460145 0.9582683
ST211 0.9573701 0.9577192 0.9460145 1.0000000 NA
ST212 0.9233598 0.9346706 0.9582683 NA 1.0000000
", header=TRUE) 
```

由于na.rm = TRUE，它仍然有效，但是当我有一个没有数据的文件时，因此只有这样的列中的NA：

```
cor3 <- read.table(text="
ST208     ST209     ST210     ST211     ST212
ST208 1.0000000 NA 0.8104837 0.8899451 0.7486417
ST209 NA NA NA NA NA
ST210 0.8104837 NA 1.0000000 0.8304132 0.9141465
ST211 0.8899451 NA 0.8304132 1.0000000 0.8064669
ST212 0.7486417 NA 0.9141465 0.8064669 1.0000000
", header=TRUE) 
```

它当然不起作用，因为没有非 NA 值，因此该文件没有最大相关性。这就是为什么我有这个错误：0 (non-na) 案例。我试图删除 NA 列，但是当我正在处理 list.files 时，列表和矩阵中的文件数将不一样。我在网上搜索，但只找到了一些关于删除 NA 列的主题。就我而言，我想忽略这些 NA 列而不删除它们。

我想对 R 说：当你在相关矩阵中寻找每个文件的最高相关性时，如果你看到一个没有相关系数的文件（只有 NAs 列），不要对它做任何事情，保持它喜欢这并转到下一个文件（下一列或下一行）。我还尝试使用 else {NA} 或 else {NULL} 来避免这个问题，但它仍然不起作用。

有人知道如何解决这个问题吗？非常感谢你。

最好的问候杰弗里

* * *

感谢您的所有回答。

我认为它现在适用于带有 Joran 代码的 NA 列。你也是真正的乔兰。我现在在用于处理 get.max.cor 输出的下一个函数上出现错误。

```
 na.fill <- function(x, y){        
            i <- is.na(x[1:8700,1])
            xx <- y[1:8700,1]        
            new <- data.frame(xx=xx)
            x[1:8700,1][i] <- predict(lm(x[1:8700,1]~xx, na.action=na.exclude), new)[i]
            x        
        }

process.all <- function(df.list, mat){

        f <- function(station)
             na.fill(df.list[[ station ]], df.list[[ max.cor[station] ]])

        g <- function(station){
        x <- df.list[[station]]
        if(any(is.na(x[1:8700,1]))){
            mat[row(mat) == col(mat)] <- -Inf
            nas <- which(is.na(x[1:8700,1]))
            ord <- order(mat[station, ], decreasing = TRUE)[-c(1, ncol(mat))]
            for(y in ord){
                if(all(!is.na(df.list[[y]][1:8700,1][nas]))){
                    xx <- df.list[[y]][1:8700,1]
                    new <- data.frame(xx=xx)
                    x[1:8700,1][nas] <- predict(lm(x[1:8700,1]~xx, na.action=na.exclude), new)[nas]
                    break
                }
            }
        }
        x
    }             

        n <- length(df.list)
        nms <- names(df.list)
        max.cor <- sapply(seq.int(n), get.max.cor, corhiver2008capt1)
        df.list <- lapply(seq.int(n), f)
        df.list <- lapply(seq.int(n), g)
        names(df.list) <- nms
        df.list
    }

    refill <- process.all(lst, corhiver2008capt1)
    refill <- as.data.frame(refill)
    capt1_hiver <- refill[1:8700,] 
```

此功能用于根据最佳相关文件（我之前选择它所做的）填充我的文件。我的错误是：

```
Error in model.frame.default(formula = x[1:8700, 1] ~ xx, na.action = na.exclude,  : 
  invalid type (NULL) for variable 'xx' 
```

这可能是由于我的相关矩阵的“NULL 列”。xx 文件中没有数据（没有相关性的文件）。如何在不修改数据维度（保留 NA 文件）的情况下继续计算并忽略（或什么都不做）NULL 文件？目前，它仅在我只选择带有数据的文件（而不仅仅是 NA）时才有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:38:06.413

所以我不完全确定你的示例代码在这里得到了什么，但我们开始吧。

`cor3`当我在所有缺失值的行上运行你的函数时，我得到了这个：

```
> get.max.cor("ST209",cor3)
[1] 2 
```

这既不是错误也不是警告，但它可能不是您想要的。如所写，您的函数将对角线元素替换为`-Inf`，因为每个站都可能与其自身完全相关，并且您不希望这是最大值。

这意味着下一行不是对*只有* `NA`值的行进行操作；里面有那个`-Inf`。所以`na.rm = TRUE`扔掉除了`-Inf`价值之外的所有东西，因为这就是剩下的，它是最大值。

显然，这不是你想要的。但是您还没有真正指定如何使用此函数来遍历行，所以我必须推测一下。如果您修改函数以检查最大值是否有限：

```
get.max.cor <- function(station, mat){
     mat[row(mat) == col(mat)] <- -Inf
     m <- max(mat[station, ],na.rm=TRUE)
     if (is.finite(m)) {return(which( mat[station, ] == m ))}
     else {return(NA)}
} 
```

`NA`当该行是所有`NA`值时，您可以让它返回。但是，您可能还需要`NA`使用您用来处理输出的任何代码来处理`get.max.cor`它（我无法真正提供帮助，因为您没有提供它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:22:15.947

正如 danas 所说，你得到了你可能想要的东西。但是，如果它证明有帮助，这是实现测试的一种方法。

```
if ( sum(!is.na(cor3[j,])) == 0 ) #all values in j-th row are NA {
   output(j)= NULL
} 
```

# ruby-on-rails - 带条件的 RoR 活动记录关联查询

> ID：10831698
> 
> 赞同：1
> 
> 时间：2012-05-31T10:20:11.397
> 
> 标签：ruby-on-rails, activerecord, conditional-statements

我要做的是以下内容：假设我们有一个帖子可能有很多问题和答案，其中问题和答案都属于给定的帖子。我想弄清楚的是如何将少于 5 个问题和答案的帖子放在一起。

就像是：

```
@posts = Post.where(post.questions + post.answers < 5) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:35:55.683

您可以在表格上创建一个新字段，用于保存帖子的问题和答案的总和。这可以使用这样的回调来完成：

```
 class Post < ActiveRecord::Base
    ...

    # After you've created the sum field (migration etc.)
    before_save do |post|
      post.sum = post.questions.count + post.answers.count
    end
  end 
```

然后在你的控制器中你可以做`@posts = Post.where('sum < 5')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:27:01.217

查看 Squeel： [http ://erniemiller.org/projects/squeel/](http://erniemiller.org/projects/squeel/)

允许在查询中遍历关联等。

# javascript - 如何获取加载的样式表的内容

> ID：10831703
> 
> 赞同：2
> 
> 时间：2012-05-31T10:20:31.200
> 
> 标签：javascript, css, ajax, stylesheet

我想从页面头部链接的 css 文件中获取样式表规则（或 css textContent）。`document.styleSheets`似乎适用于所有主要浏览器，但`styleSheets[0].cssRules`在 IE<9 中当然失败。此解决方案的正确方法是什么？使用 AJAX 加载文件？但是我只限于来自同一域的样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:56:21.900

对于 IE，您可以使用对象`rules`的属性`styleSheets`。

所以通用解决方案可以是：

```
var list = null;
with (document.styleSheets[0]) {
    if (typeof cssRules != "undefined")
        list = cssRules;
    else if (typeof rules != "undefined")
        list = rules;
}
console.log(list);​ 
```

**演示：http:** [//jsfiddle.net/tqgNb/](http://jsfiddle.net/tqgNb/)

# c# - C# 10gen 和 mongo：将成员反序列化为接口

> ID：10831706
> 
> 赞同：0
> 
> 时间：2012-05-31T10:20:44.480
> 
> 标签：c#, mongodb, 10gen-csharp-driver

全部

考虑这个例子：

```
 private class CollectionHolder
    {
        public ObjectId Id { get; set; }
        public MyCollection Collection { get; set; }
    }

    private class MyCollection : List<int>
    {
        public MyCollection(List<int> a)
        {
            this.AddRange(a);
        }
    }

    private static void CollectionTest()
    {
        var collection = database.GetCollection<MyCollection>("collectionTest");
        collection.RemoveAll();
        collection.Save(new CollectionHolder { Collection = new MyCollection(new List<int> { 1, 2, 3, 4, 5 }) });
        var x = collection.AsQueryable().First(); //exception!
        x.ForEach(Console.WriteLine);
    } 
```

标记的行抛出异常

> 反序列化 MongoDriverTest.Program+CollectionHolder 类的 Collection 属性时出错：反序列化 MongoDriverTest.Program+MyCollection 类的容量属性时出错：对象引用未设置为对象的实例。

我不确定，这是 10gen mongo 驱动程序中的错误，还是无法实现？你怎么看，这应该作为一个错误发布吗？

此外 - 避免此类错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T14:40:13.323

1.4.2 和更早版本中自定义集合的问题在于，由于没有为您的自定义集合注册序列化程序，C# 驱动程序尝试使用 BsonClassMapSerializer 对其进行序列化。但是 BsonClassMapSerializer 要求被序列化的类将所有要序列化的数据公开为公共 get/set 属性（您的基类 List<T> 没有）。

1.5 中唯一改变的是当 POCO 实现 IEnumerable 或 IDictionary 时驱动程序如何选择使用哪个序列化程序。

您可以通过为您的自定义集合显式注册一个序列化程序来使用 1.4.2 和更早版本中已经存在的自定义集合，如下所示：

```
BsonSerializer.RegisterSerializer(typeof(MyCollection), new EnumerableSerializer<int>()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:26:17.923

目前，不支持自定义集合。已经在 master 中实现，并将在 1.5 版中存在。在那之前，您不能使用自定义集合来获得您请求的行为。

# ios - 应用内购买问题 iOS

> ID：10831710
> 
> 赞同：0
> 
> 时间：2012-05-31T10:21:04.710
> 
> 标签：ios, in-app-purchase

我已经在应用程序购买中测试了很长时间。为了在应用程序购买中进行测试，我使用了我在 iTunes Conect 中创建的 TEST USER。

但是现在当我尝试使用我的 TEST USER 帐户登录时，我收到了这条消息（在这条消息没有出现之前）

![在此处输入图像描述](../Images/54adf92a0ec28afe6c4f334bbb65d9d0.png)

所以，这意味着我必须输入关于我自己的所有信息（银行账户等）。但我认为测试用户不需要这些项目。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:55:55.163

如果您不小心尝试与测试用户一起购买真实内容，这通常会发生。尝试定义一个新的测试用户并删除旧的。

# .net - 将音频引导到特定设备

> ID：10831711
> 
> 赞同：-1
> 
> 时间：2012-05-31T10:21:08.350
> 
> 标签：.net, wpf, audio, directshow

我正在开发一个基于 WPF 的应用程序，它也使用 DirectShow。我需要实现一个功能，我必须在其中一个选定设备上传输视频音频。为了澄清我的问题，假设我们有许多音频设备连接到系统，因此必须允许用户在他/她选择的设备上播放视频文件中的音频。另外，我如何枚举连接到系统的音频设备？我不知道如何将音频传输到不同的设备？我是 DirectShow 开发的新手，请帮我解决这个问题。欢迎任何想法建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:44:04.740

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375473%28v=vs.85%29.aspx)：

> **要枚举用户系统上可用的音频设备**，请使用带有音频渲染器类别 (CLSID_AudioRendererCategory) 的 ICreateDevEnum 接口。对于每个音频设备，音频渲染器类别包含两个过滤器实例。其中一个对应于 DirectSound Renderer，另一个对应于 Audio Renderer (WaveOut) 过滤器。DirectSound 实例具有友好名称“DirectSound: DeviceName”，其中 DeviceName 是设备的名称。WaveOut 实例具有友好名称 DeviceName。
> 
> 音频渲染器类别包含两个额外的过滤器实例，名为“默认 DirectSound 设备”和“默认 WaveOut 设备”。这些对应于用户通过控制面板选择的默认声音设备。它们实际上是到上一段中描述的一对的映射。例如，如果系统有两个音频设备，设备 A 和设备 B，则音频渲染器类别将包含以下内容：

在 .NET 中，您通过 [supposedly] DirectShow.NET 库对此 API 进行了包装。

# c# - 如何在c#中检查请求是从fancybox还是普通网页发送的

> ID：10831714
> 
> 赞同：0
> 
> 时间：2012-05-31T10:21:21.817
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0

我的网站中有两个表单，但都提交了相同的操作，
我的表单在花式框中打开，一个在普通页面中打开，
你可以知道请求是从花式框
或 noraml 页面发出的，因为如果由于验证，表单提交失败
我必须发回相同的视图，
其中包含用户提出请求的验证错误。

```
public ActionResult SubtmitForm(contact model)
{
 // here i will check whether request is from fancy-box form or from normal web page form 
} 
```

***注意*：我正在使用 asp.net mvc3**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:23:15.810

没有任何内容可以说明请求的来源，特别是浏览器如何请求它。

您需要将其构建到您的模型中并在 javascript（或其他方式）中填充数据。

类似于`public bool FromFancyBox { get; set;};`模型上的 a`HiddenFor`和视图上的 a 。

打开fancybox 时将值设置为`true`，关闭时将其设置为false（尽管还有其他机制）。

在控制器中，测试此属性。

# mysql - MYSQL 错误和连接语句

> ID：10831719
> 
> 赞同：1
> 
> 时间：2012-05-31T10:21:51.223
> 
> 标签：mysql, join

我正在使用以下 MYSQL 语句，但出现错误：'on 子句中的'ErrorUnknown column'property.id'

我四处搜索，我认为这与 JOIN 和 Mysql 5 有关？这是有道理的，因为以前的代码可以正常工作，因此 mysql 更新可能会破坏它

如何更改我的声明以阻止错误发生？

```
SELECT property.id, 
       Concat(IF (name = '', '', Concat(name, '<br />')), 
       IF (address = '', '', Concat(address, '<br />')), IF (city = '', '', 
                                                         Concat(city, '<br />')) 
       , IF ( 
       postcode = '', '', Concat(postcode, ', ')), property_region.region) AS 
       name, 
       property_type.type, 
       short_description, 
       property_tenure.tenure, 
       Format(sell_price, 0)                                               AS 
       sell_price, 
       Format(rent_price, 0)                                               AS 
       rent_price, 
       area, 
       CASE property.tenure 
         WHEN 1 THEN '' 
         WHEN 2 THEN 'display:none' 
         WHEN 3 THEN '' 
       end                                                                 AS 
       sell_display, 
       CASE property.tenure 
         WHEN 1 THEN 'display:none' 
         WHEN 2 THEN '' 
         WHEN 3 THEN '' 
       end                                                                 AS 
       rent_display, 
       IF (thumb_image_name = '', 'no_image.gif', thumb_image_name)        AS 
       thumb_image_name, 
       IF (bookmarks.property_id, 'checked=\"checked\"', '')               AS 
       bookmark_checked 
FROM   property, 
       property_tenure, 
       property_region, 
       property_type 
       LEFT JOIN bookmarks 
              ON property.id = bookmarks.property_id 
                 AND bookmarks.user_id = $user_id 
WHERE  property.featured = 1 
       AND property.active = 1 
       AND property.region = property_region.id 
       AND property.tenure = property_tenure.id 
       AND property.type = property_type.id 
ORDER  BY timestamp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:47:19.283

...试试这个 -

```
...
FROM property p
  JOIN property_tenure pt
    ON pt.id = p.tenure
  JOIN property_region pr
    ON pr.id = p.region
  JOIN property_type ptype
    ON ptype.id = p.type
  LEFT JOIN bookmarks b
    ON p.id = b.property_id AND b.user_id = $user_id 
WHERE
  property.featured = 1 AND property.active = 1
... 
```

# java - AsyncTask 在构造函数中被取消

> ID：10831722
> 
> 赞同：1
> 
> 时间：2012-05-31T10:22:20.960
> 
> 标签：java, android, multithreading, android-asynctask

我有一个异步任务 - 在执行时 - 立即被取消。

我的课看起来像这样：

```
public class JSONParser extends AsyncTask<String, Void, JSONArray> {
    private ListFragment fragment;
    @Override
    protected JSONArray doInBackground(String... strings) {
        JSONArray ja = null;
        String string = "";
        try {
            URL url = new URL(strings[0]);
            BufferedReader br = new BufferedReader(new InputStreamReader(url.openStream()));
            string = br.readLine();

            ja = new JSONArray(string);
        } catch (Exception e ) {
            Log.w("Special", e.toString());
        }
        return ja;
    }

    public JSONParser(ListFragment fragment) {
        this.fragment = fragment;
    }

    @Override
    protected void onPostExecute(JSONArray jsonArray) {
        try {
        ArrayList<HashMap<String ,String>> datalist = new ArrayList<HashMap<String, String>>();

        int i = 0;
        while (i < jsonArray.length()) {
            HashMap<String, String> map = new HashMap<String, String>();
            JSONObject tool = jsonArray.getJSONObject(i);

            map.put("id", tool.getInt("Id") + "");
            map.put("name", tool.getString("Name"));
            datalist.add(map);
            i++;
        }
        fragment.setListAdapter(new SimpleAdapter(fragment.getActivity(), datalist, R.layout.tools_list, new String[] {"name"}, new int[] {R.id.text}));
        } catch (Exception e) {
            e.getMessage();
        }
    }
} 
```

从我的片段中，我这样称呼它

```
AsyncTask task = new JSONParser(this).execute("http://10.0.2.2:1288/webservice/gettools.aspx"); 
```

使用调试器，我可以看到，只要调用构造函数，它就会跳到 onCancelled() 并返回。URL 有效且有效，我在日志中没有收到任何消息，并且 JSON 有效。

更新：我还拥有所需的权限，并且在进入 doInBackground() 之前调用了 OnCancelled()。doInBackground() 永远不会被调用。

有任何想法吗？

我正在使用 IntelliJ 和带有 Android 4.0.3 的 AVD。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:28:46.553

您是否在 AndroidManifest 中设置了 Internet 权限？您确定在 doInBackground 中没有触发异常吗？

也许将 while (i < jsonArray.length()) 部分放在 doInBackground 中可能是一个更好的主意 :) （为了性能）

读取字符串的代码：

```
BufferedReader reader = new BufferedReader(yourInputStreamReader,8);

        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:34:07.370

oehm ...您正在使用活动对象（this）（???）创建任务

```
AsyncTask task = new JSONParser(this).execute("http://10.0.2.2:1288/webservic /gettools.aspx"); 
```

但你的任务需要一个视图

```
public JSONParser(ListFragment fragment) { 
```

我很惊讶这不会引发异常

# postgresql - 无法正确启动 postgresql

> ID：10831723
> 
> 赞同：2
> 
> 时间：2012-05-31T10:22:30.517
> 
> 标签：postgresql

我不能“ `service postgresql start`”通过`root`：

> 启动日志：/usr/bin/postmaster：加载共享库时出错：libz.so.1：无法从共享对象映射段：权限被拒绝

我不能“ `service postgresql start`”通过`postgres`：

> 启动日志：运行用户：无法设置组：不允许操作

但我可以通过 postgres 用户使用以下命令启动它：

```
postmaster -D /usr/local/pgsql/data 
```

为什么？

当我安装时，我使用

```
initdb -D /usr/local/pgsql/data 
```

不是

```
service postgresql initdb 
```

`init.d/postgresql`所以我后来用新路径更改了脚本。这会导致问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-11T06:57:52.123

通过创建数据库为我造成的

```
/etc/init.d/postgresql-9.3 initdb 
```

重新创建

```
service postgresql-9.3 initdb 
```

解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:41:23.863

正如克雷格所说，这要么是文件权限问题，要么是 selinux 问题。如果是文件权限问题，则很容易修复（提供读取/执行权限）。

如果这是一个 selinux 问题，您最好的选择是运行`audit2allow`以识别问题并确保将 selinux 配置为允许正确访问。

# javascript - “自调用匿名函数”的目的

> ID：10831724
> 
> 赞同：8
> 
> 时间：2012-05-31T10:22:35.537
> 
> 标签：javascript, function, anonymous-function

> **可能重复：**
> [javascript中自执行函数的目的是什么？](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)

希望是一个非常直截了当的问题：

使用自调用匿名函数的目的是什么？是否只是为了防止变量等“污染”全局范围？或者使用它们还有其他好处吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T10:31:45.340

根据我的个人经验，除了使用匿名函数来诱导作用域外，我还在 for 循环中使用它来进行闭包。当 DOM 元素需要存储其计数并且您无权访问 jQuery 等库时，这可能很有用。

假设您有 100 个`DIV`元素。单击第一个`DIV`元素应该警报 1，类似地单击第 56 个 div 元素应该警报 56。

所以在创建这些元素时，你通常会做这样的事情

```
// Assume myElements is a collection of the aforementioned div elements

for (var i = 0; i < 100; ++i) {
    myElements[i].onclick = function() {
        alert( 'You clicked on: ' + i );
    };
} 
```

这将警告 99，因为计数器当前为 99。`i`此处不保留 的值。

但是，当使用匿名函数来解决问题时，

```
for (var i = 0; i < 100; ++i) {
    (function(count){
     myElements[count].onclick = function() {
         alert( 'You clicked on: ' + count );
     }; 
    })(i);
} 
```

此处`i`保持 的值并显示正确的计数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T10:26:15.637

> 是否只是为了防止变量等“污染”全局范围？

差不多。封装和尽可能多地避免全局状态本身就是很好的目标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T10:28:52.973

它是创建自己的范围。它不仅更好，因为您不再“污染”其他一些（例如全局）范围，它为您提供了保证名称冲突问题和防御程序员的安全性，这些程序员喜欢戳您的函数/对象/方法的内部在所有好处中。它还允许 GC 轻松理解当函数完成时您不再需要任何引用的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:28:53.937

[for 循环中的闭包](http://www.mennovanslooten.nl/blog/post/62)也使用自调用匿名函数。

```
function attachEventsToListItems( ) {
    var oList = document.getElementById('myList');
    var aListItems = oList.getElementsByTagName('li');
    for(var i = 0; i < aListItems.length; i++) {
        var oListItem = aListItems[i];
        // Watch this:
        oListItem.onclick = (function(value) {
            return function() {
                alert(value);
            }
        })(i);
    }
} 
```

# mysql - 在 MySql 存储过程中更新不止一次

> ID：10831727
> 
> 赞同：3
> 
> 时间：2012-05-31T10:22:50.573
> 
> 标签：mysql, sql, stored-procedures

**在 MySql 中**

```
UPDATE `inventoryentry` SET `Status` = 1 WHERE `InventoryID`=92 AND `ItemID`=28; 
```

它仅成功更新了一行，其中 inventoryID = 92 和 itemID=28 ，显示以下消息。

```
1 row(s) affected 
```

当我把它放在存储过程中时，如下

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `Sample`(IN itemId INT, IN itemQnty 
DOUBLE, IN invID INT)

BEGIN

DECLARE crntQnty DOUBLE;
DECLARE nwQnty DOUBLE;

SET crntQnty=(SELECT `QuantityOnHand` FROM `item` WHERE id=itemId);
SET nwQnty=itemQnty+crntQnty;
UPDATE `item` SET `QuantityOnHand`=nwQnty WHERE `Id`=itemId;

UPDATE `inventoryentry` SET `Status` = 1 WHERE `InventoryID`=invID AND 
`ItemID`=itemId;

END$$ 
```

**调用存储过程**

```
CALL Sample(28,10,92) 
```

它根据**InventoryID （即92）更新****inventoryentry**中的所有状态= 1，忽略ItemID，而不是只更新一行。显示以下消息！

 **```
5 row(s) affected 
```

为什么存储过程在更新语句中忽略 itemID？或者为什么存储过程更新不止一次？但是没有存储过程它工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T10:37:15.250

除了字段名称之外，您还需要使用不同的变量名称，还需要将表名称与列一起使用，以便更好地理解，如下所示：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `Sample`(IN itemID INT, IN itemQnty 
DOUBLE, IN invID INT)

BEGIN

DECLARE crntQnty DOUBLE;
DECLARE nwQnty DOUBLE;

SET crntQnty=(SELECT `QuantityOnHand` FROM `item` WHERE id=itemID);
SET nwQnty=itemQnty+crntQnty;
UPDATE `item` SET `QuantityOnHand`=nwQnty WHERE `QuantityOnHand`.`Id`=itemID;

UPDATE `inventoryentry` SET `Status` = 1 WHERE `InventoryID`=invID AND 
`inventoryentry`.`ItemID`=itemID;

END$$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:27:41.193

因为

```
update inventoryentry ... WHERE ... AND `ItemID`=itemId 
```

您是说该列`itemid`应与`itemid`始终相同的列`true`

尝试将参数重命名为与列名不同的名称

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:51:17.603

*[对列和变量名使用相同的名称有一些问题](http://bugs.mysql.com/bug.php?id=26394)*。

> 在创建时不检查存储过程代码的语义。在运行时，会检测到未声明的变量，并为每次引用未声明的变量生成错误消息。然而，SP 似乎相信任何引用都表示一列，即使句法上下文排除了这一点。这会导致程序出现非常混乱的错误消息。

您的列名`ItemID`与输入变量名匹配`itemId`，因此是问题所在。

请在***[此处](https://stackoverflow.com/questions/10673766/unknown-column-x-in-where-clause/10688275#10688275)***查看我对类似查询的回答。**

# html - HTML5画布全景效果

> ID：10831734
> 
> 赞同：0
> 
> 时间：2012-05-31T10:23:14.520
> 
> 标签：html, canvas, html5-canvas, panoramas

我想用 HTML5 制作一个全景查看器，我设法将图像放置在我的画布中，以便它们形成 360 度图像，并使用 jQuery 插件来制作横向滚动的效果。现在到我的“问题”，我想通过在旋转图像时拉伸画布中图像的边缘来使其更具球形感。就像谷歌在街景中所做的那样，以更好地感受图像的深度。

拉伸效果在 HTML5 画布中是否可以使用或不使用 JavaScript 插件（感觉就像有人可以制作这样的插件或除了谷歌之外也有同样的问题）。

希望我不会太糊涂...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:02:58.560

我相信您要问的是如何在 HTML5 画布上执行 3D 投影。您最好的方法是使用 wegGL。看看这个[例子](http://creativejs.com/2012/01/little-planet-street-view/)。和一个[美丽](http://www.clicktorelease.com/code/streetViewReflectionMapping/#39.36382677360614,8.431220278759724)的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T23:46:06.350

您也可以尝试查看 Gnome Software 的软件 Pano2VR。试用版的试用时间不受限制，它只是在您的全景照片上加盖印章。但它很容易定制。

# android - 摩托罗拉 Droid 3 相机应用杀死了背景应用

> ID：10831737
> 
> 赞同：2
> 
> 时间：2012-05-31T10:23:15.980
> 
> 标签：android, native, android-camera, motorola-droid

我有打开本机相机应用程序并获取捕获的图片的应用程序。我已经看到，当我的应用程序打开本机相机应用程序时，它会杀死所有后台运行的应用程序（包括我的应用程序）。

这个问题也在其他流程中进行了测试，例如：我打开了 3-4 个其他应用程序。之后，我直接从主屏幕打开了本机相机应用程序。在这种情况下，它也会杀死所有以前打开的应用程序。

我想让后台应用程序保持打开状态。任何人都可以在这里帮助我。

我用三星 Galaxy ACE 和 HTC Desire HD 测试了相同的场景。它工作正常。

设备配置：摩托罗拉Droid 3，安卓版本：2.3.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:52:28.867

是的，明白了。我已经找到了解决方案。我的问题就像当我打开 Motorola Droid 3 相机应用程序时，它会关闭所有后台运行的应用程序。在搜索博客并应用一些逻辑后，发现这是本机相机问题。

因此，对于解决方案，我已使用以下方法将我的应用程序状态保存为捆绑

> protected void onSaveInstanceState(Bundle outState)

并再次从 onCreate 方法检索保存的状态，它可以工作。现在我的应用程序不会崩溃。但是这里还有一个问题，就像我从本机相机捕获的任何图像都没有显示在我的屏幕上，因为它已经重新启动，因此不会调用 onActivityResult 方法。

为了解决这个问题，我们必须清除原生相机应用程序的数据，并且必须强制停止它一次。之后，我从我的应用程序中打开本机相机应用程序，它可以工作 2-3 次，然后再次停止工作。我再次清除数据并强制停止本机相机应用程序并且它可以工作。

其他解决方案是我已经安装了 Camera360 应用程序，它对我来说很好，不需要使用默认的相机应用程序。

我知道这又是一种解决方法，但是如果有人可以给我其他更好的解决方案，那很好。

享受。

# sql - 如何动态分配变量

> ID：10831741
> 
> 赞同：0
> 
> 时间：2012-05-31T10:23:27.457
> 
> 标签：sql, oracle, stored-procedures, plsql, oracle10g

```
 QL> desc newemp
    Name                                      Null?    Type
    ----------------------------------------- -------- ----------------------------
    EMPNO                                     NOT NULL NUMBER(4)
    ENAME                                              VARCHAR2(10)
    JOB                                                VARCHAR2(9)
    MGR                                                NUMBER(4)
    HIREDATE                                           DATE
    SAL                                                NUMBER(7,2)
    COMM                                               NUMBER(7,2)
    DEPTNO                                    NOT NULL NUMBER(2)

declare
    empsfile utl_file.file_type;
    cursor empscur is
    select * from newemp;
    begin
    empsfile := utl_file.fopen('DIPRJDIR','EMPS.TXT','W');
    for rec in empscur
    loop
    --utl_file.put_line(empsfile,rec.EMPNO||rec.ENAME||rec.JOB||rec.MGR||rec.HIREDATE||rec.SAL||rec.COMM||rec.DEPTNO);
    utl_file.put_line(empsfile,lpad(rec.EMPNO,4,'0')||Rpad(rec.ENAME,10,' ')||Rpad(rec.JOB,9,' ')||Rpad(rec.MGR,4,'0')||Rpad(rec.HIREDATE,10,' ')||lpad(rec.SAL,9,'0')||Lpad(rec.COMM,9,'0')||Lpad(rec.DEPTNO,2,'0'));

    end loop;
    UTL_FILE.FCLOSE(empsfile );
    EXCEPTION
     WHEN OTHERS THEN
       DBMS_OUTPUT.PUT_LINE( 'ERROR -->' ||  SQLERRM);
    END;
    / 
```

我已经编写了一个程序执行，但现在我的老板告诉我应该根据数据类型值进行填充，例如 empno number (4)，而不是填充应该由 4 来完成。但是在上面提到的代码中，我已经手动编写了值。现在我的老板告诉我我应该在填充时动态分配值，例如（rec.SAL，9，'0'），这 9 个值应该直接从表中获取。所以如果老板改变了表而不是上面的代码应该工作，我们不必再次编写代码。

请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:14:12.347

嗯，empno/deptno，我记得那些。不太确定您（或您的老板/老师）在寻找什么，但我认为她在说：

```
select column_name || ','
from all_tab_columns
where table_name = 'SOME_TABLE'
and owner = 'SOME_OWNER'
order by column_id; 
```

然后，您可以复制/粘贴到您的代码中，例如，这对于具有 100 列的表很有帮助。您当然可以根据您的特定需求进行修改，也许（未经测试）：

```
select
  case
    when data_type = 'NUMBER' then
        'lpad(rec.' || column_name || ',4,''0'') ||'
    when data_type = 'VARCHAR2' then
        'rpad(rec.' || column_name || ',10,'' '') ||'
    when data_type = 'DATE' then
        'rpad(to_char(rec.' || column_name || ',''MM/DD/YYYY''),10,'' '') ||'
    else
        'rpad(rec.' || column_name || ',10,'' '') ||'
  end val
from all_tab_columns
where table_name = 'SOME_TABLE'
and owner = 'SOME_OWNER'
order by column_id; 
```

# ios5 - StoryBoard iOS 5 - 自定义 UITableViewCell 崩溃向上滚动

> ID：10831744
> 
> 赞同：0
> 
> 时间：2012-05-31T10:23:50.973
> 
> 标签：ios5, uitableview, storyboard

我一直在编写带有自定义 UITableViewCell (PlayerCell) 的 UITableView 示例。一切正常，我可以看到表格中的元素并且可以选择它们，但是当我向上滚动时，应用程序崩溃了。我已经查看了标识符、控制器的类以及所有内容，但是当我使用自定义单元格时，它不起作用。如果我使用默认样式，它可以正常工作，包括向上滚动。

我认为我在这种方法中遇到了问题：`didSelectRowAtIndexPath`

但是调试器，不要给我一个错误，只有这样的东西：EXEC BAD ADRESSS（我这里没有电脑）

这是我的代码：

MyTeamViewController.h

```
#import <UIKit/UIKit.h>

@interface MyTeamViewController : UITableViewController

@property (nonatomic, strong) NSMutableArray *players;

@end 
```

MyTeamViewController.m

```
#import "MyTeamViewController.h"
#import "Player.h"
#import "PlayerCell.h"

@interface MyTeamViewController ()

@end

@implementation MyTeamViewController 
@synthesize players;
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    // Override point for customization after application launch.
    players = [NSMutableArray arrayWithCapacity:20];
    Player *player = [[Player alloc] init];
    player.name = @"Bill Evans";
    player.game = @"Tic-Tac-Toe";
    player.rating = 4;
    [players addObject:player];
    player = [[Player alloc] init];
    player.name = @"Oscar Peterson";
    player.game = @"Spin the Bottle";
    player.rating = 5;
    [players addObject:player];
    player = [[Player alloc] init];
    player.name = @"Dave Brubeck";
    player.game = @"Texas Hold’em Poker";
    player.rating = 2;
    [players addObject:player];

    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    //#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    //#warning Incomplete method implementation.
    // Return the number of rows in the section.
    NSUInteger numberCells = players.count;    

    return numberCells;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"PlayerCell";

    PlayerCell *cell = (PlayerCell *)[tableView
                                      dequeueReusableCellWithIdentifier:CellIdentifier];    

    if(cell == nil)
    {
        NSLog(@"Cell is NIL");
        //I don't know what put here <-- MY PROBLEM!!! :(

    }

    Player *player = [self.players objectAtIndex:indexPath.row];
    cell.nameLabel.text = player.name;
    cell.pointsLabel.text = player.game;
    cell.clubImageView.image = [self 
                                imageForRating:player.rating];

    // Configure the cell...
    return cell;

}

- (UIImage *)imageForRating:(int)rating
{
    switch (rating)
    {
        case 1: return [UIImage imageNamed:@"1StarSmall.png"];
        case 2: return [UIImage imageNamed:@"2StarsSmall.png"];
        case 3: return [UIImage imageNamed:@"3StarsSmall.png"];
        case 4: return [UIImage imageNamed:@"4StarsSmall.png"];
        case 5: return [UIImage imageNamed:@"5StarsSmall.png"];
    }
    return nil;
}

/*
 // Override to support conditional editing of the table view.
 - (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
 {
 // Return NO if you do not want the specified item to be editable.
 return YES;
 }
 */

/*
 // Override to support editing the table view.
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
 {
 if (editingStyle == UITableViewCellEditingStyleDelete) {
 // Delete the row from the data source
 [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
 }   
 else if (editingStyle == UITableViewCellEditingStyleInsert) {
 // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
 }   
 }
 */

/*
 // Override to support rearranging the table view.
 - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
 {
 }
 */

/*
 // Override to support conditional rearranging of the table view.
 - (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
 {
 // Return NO if you do not want the item to be re-orderable.
 return YES;
 }
 */

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     [detailViewController release];
     */
}

@end 
```

其他文件：

播放器.h

```
#import <Foundation/Foundation.h>

@interface Player : NSObject
@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) NSString *game;
@property (nonatomic, assign) int rating;
@end 
```

播放器.m

```
#import "Player.h"

@implementation Player

@synthesize name;
@synthesize game;
@synthesize rating;
@end 
```

播放器细胞.h

```
#import <UIKit/UIKit.h>

@interface PlayerCell : UITableViewCell

@property (nonatomic, strong) IBOutlet UILabel *nameLabel;
@property (nonatomic, strong) IBOutlet UILabel *pointsLabel;
@property (nonatomic, strong) IBOutlet UIImageView 
*clubImageView;

@end 
```

PlayerCell.m

```
#import "PlayerCell.h"

@implementation PlayerCell

@synthesize nameLabel;
@synthesize pointsLabel;
@synthesize clubImageView;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

太感谢了！！

**编辑：**我解决了它：`players = [[NSMutableArray arrayWithCapacity:20] retain];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:16:12.420

我会尝试删除

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
} 
```

在 PlayerCell.m - 你不需要它们。

# tfs - 在 TFS 2010 中标记工作项

> ID：10831746
> 
> 赞同：5
> 
> 时间：2012-05-31T10:23:53.087
> 
> 标签：tfs, tfs-workitem

在 TFS 2010 中是否有已知的方法来标记工作项？我需要添加什么类型的字段，用户可以从推荐标签列表中为工作项选择不同的标签并为该列表键入新标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:18:58.647

Stack Overflow 等其他产品不支持您所知道和喜爱的标签。虽然它在我们的愿望清单上很高......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-17T19:23:40.450

TFS 2013 中提供了标记工作项的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:07:57.993

[有人](http://elegantcode.com/2008/04/21/tagging-team-system-work-items/)建议使用空格分隔关键字的单个文本字段。这当然不如内置的标记支持，但它可能会。我也在寻找更好的解决方案。我想知道 TFS 2012 在这方面是否有什么新东西？

# sql-server-2005 - 使用单个查询从数据库中删除所有行？

> ID：10831753
> 
> 赞同：0
> 
> 时间：2012-05-31T10:24:32.030
> 
> 标签：sql-server-2005

> **可能重复：**
> [如何从 SQL Server 数据库中的所有表中删除所有行？](https://stackoverflow.com/questions/1899846/how-to-delete-all-rows-from-all-tables-in-a-sql-server-database)

我想从 SQL Server 2005 数据库中删除所有行。

任何人都可以定义一个过程以使用单个查询从数据库中删除所有行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:39:26.720

在这种情况下，这将起作用：

```
EXEC sp_MSForEachTable 'ALTER TABLE ? NOCHECK CONSTRAINT ALL'
GO
EXEC sp_MSForEachTable 'DELETE FROM ?'
GO
EXEC sp_MSForEachTable 'ALTER TABLE ? CHECK CONSTRAINT ALL'
GO 
```

谢谢@MAT

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-31T10:28:13.363

您是否尝试过：删除* FROM 数据库。*？

# javascript - 如何使在 ui-datepicer 中选择的日期依赖于其他 ui-date 选择器

> ID：10831754
> 
> 赞同：1
> 
> 时间：2012-05-31T10:24:43.283
> 
> 标签：javascript, jquery, html, jquery-ui-datepicker

我有两个 ui 日期选择器日历。

当我从第一个 ui-date 选择器中选择日期时，第二个将显示第一个 date+2 为选中

即我从第一个日历中选择了 07/02/2012，然后第二个日历选择了 07/04/2012

查看我的代码

```
$(function(){
                // Datepicker
                $('#datepicker_In').datepicker({
                    inline: true,
                    minDate: 0  
                });
                $('#datepicker_Out').datepicker({
                    inline: true,
                    minDate: 0
                });

                //hover states on the static widgets
                $('#dialog_link, ul#icons li').hover(
                    function() { $(this).addClass('ui-state-hover'); }, 
                    function() { $(this).removeClass('ui-state-hover'); }
                );

            }); 
```

请重播

我已经尝试了很多，但没有............

非常感谢

我需要显示下第二天而不是下个月请重播

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:30:50.857

这是假设您的日期格式是`MM/dd/yyyy`格式。您可以挂钩`datepicker_In`更改事件，并读取选定的值，将该值增加 2 个月（根据要求），然后将`datepicker_Out`值设置为增加的日期。

```
$('#datepicker_In').change(function() {
    var currentDate = $("#datepicker_In").val();

    var newDate = new Date(currentDate);
    var cDate = (newDate.getMonth() + 2) + "/" + newDate.getDate() + "/" + newDate.getFullYear(); 

   $('#datepicker_Out').val(cDate);
}); 
```

# css - CSS 中的百分比：它们是如何在内部计算的？

> ID：10831756
> 
> 赞同：2
> 
> 时间：2012-05-31T10:24:45.950
> 
> 标签：css, margin, percentage

即使经过多年的 CSS-ing，我也找不到任何关于如何将百分比计算为像素的解释（经过简单的观察后我自己也无法理解）。进一步说明：

为什么一个 div 中 2% 的 margin-left 最终是 20 像素，而另一个 30 像素？宽度是否起作用？在这种情况下，这意味着更宽的 div 有更大的余量，但根据我的观察，情况并非如此！

*检查这个：http: [//JSNAIL.IT/uLjeYSHx/](http://JSNAIL.IT/uLjeYSHx/)。col2 类的 div 比其他类大，但计算的边距右相同。（11 像素）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:30:17.657

边距百分比取决于缩放所在的相对框。

因此，如果你在整个页面上占一个百分比，那么如果你把它放在一个宽度为 200 像素的盒子里，它会更多。

最后一种情况下的 20% 最终会变成 40px。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:40:24.043

内部元素的百分比边距取决于外部容器的大小。例如，两个示例的内部 div 的左边距都设置为 20%

```
 _______________
|    ___        |
|20%|   |       |
|   |___|       |
|_______________|
 _______________________
|      ___              |
|20%  |   |             |
|     |___|             |
|_______________________| 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:56:52.960

这取决于。根据标准（[CSS2.1: 4.3.3 Percentages](http://www.w3.org/TR/CSS21/syndata.html#percentage-units)），每个属性的百分比值可以有不同的含义：

> 百分比值的格式（`<percentage>`在本规范中表示为）是`<number>`紧随其后的 '%'。
> 
> 百分比值总是相对于另一个值，例如长度。每个允许百分比的属性还定义了百分比所指的值。该值可以是同一元素的另一个属性的值、祖先元素的属性或格式化上下文的值（例如，包含块的宽度）。当为根元素的属性设置百分比值并将百分比定义为引用某个属性的继承值时，结果值是百分比乘以该属性的初始值。

例如，边距是通过其包含块的宽度计算的（[CSS2.1：边距属性](http://www.w3.org/TR/CSS2/box.html#margin-properties)）：

> 百分比是根据生成框的包含块的宽度计算的。请注意，“margin-top”和“margin-bottom”也是如此。如果包含块的宽度取决于此元素，则结果布局在 CSS 2.1 中未定义。

请注意，[quirksmode](http://www.quirksmode.org/css/quirksmode.html)会在 IE 中搞砸很多事情，因为会使用错误的框模型。

# ajax - 主干模型的 JSON 表示

> ID：10831757
> 
> 赞同：0
> 
> 时间：2012-05-31T10:24:54.957
> 
> 标签：ajax, json, backbone.js

使用 fetch 方法分叉 json 文件会在我的代码中触发错误。似乎服务器的响应不正确。进入细节，对于下面的广告模型

```
//Advertisement model
App.Tasks.Model.Ads = Backbone.Model.extend({
    url: "ads/ads.json",
    intialize: function () {

    },
    Next: function () {
        var ads = this.get("ads");
        return ads[Math.ceil(Math.random(0, ads.legth) * 10)];
    }
}); 
```

调用时服务器响应应该如何`fetch()`。现在如下

```
{ads: ["1.png", "2.png", "3.png"]} 
```

并且这样做会触发**错误**回调

```
//Advertisement model
App.Tasks.Ads = new App.Tasks.Model.Ads();
App.Tasks.Ads.fetch({
    success: function (model, response) {
        console.log("Success", arguments);
    },
    error: function (model, response) {
        console.log("Error", arguments);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:36:06.667

您的服务器以无效的 JSON 响应，名称/值对中的左侧部分必须是字符串，这意味着`ads`应该用双引号括起来：

```
{"ads": ["1.png", "2.png", "3.png"]} 
```

如需完整参考，请查看[http://www.json.org/](http://www.json.org/)

# php - 在 Javascript 中解析 PHP/JSON 数据

> ID：10831758
> 
> 赞同：9
> 
> 时间：2012-05-31T10:24:56.460
> 
> 标签：php, javascript, ajax, json

我正在尝试将 AJAX、JSON 传递给 PHP，然后 PHP 返回一些数据，我正在尝试用 Javascrpt 解析它。

从我返回的 php 服务器，

```
 echo json_encode($data); 

    // it outputs ["123","something","and more something"] 
```

然后在客户端，

```
success : function(data){

    //I want the data as following

    // data[0] = 123
    // data[1] = something
    // data[3] = and more something
} 
```

但是，它给出了；

```
 data[0] = [ 
        data[1] = " 
        data[2] = 1 
```

它正在读取每个字符，但我想要数组中的字符串，而不是单个字符。这里发生了什么？在此先感谢，我是 Javascript 和 JSON、AJAX 的新手。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T10:25:48.970

`JSON.parse(data)`应该做的伎俩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T10:27:03.723

将`dataType`ajax 调用的属性设置为`json`. 然后 jQuery 会自动将您的响应转换为对象表示。

```
$.ajax({
    url : ...,
    data : ...,
    dataType : "json",
    success : function(json) {
        console.log(json);
    }
}); 
```

另一种选择是在 PHP 中设置标头，以便 JQuery 了解您发送的是 JSON 对象。

```
header("Content-Type: application/json");
echo json_encode($data); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T10:30:03.547

**检查这个...应该工作**

成功：函数（数据）{

```
var result = data;

result=result.replace("[","");

result=result.replace("]","");

var arr = new Array();

arr=result.split(",")

alert(arr[0]); //123

alert(arr[1]); //something

alert(arr[2]); //......
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T10:30:50.650

您没有显示解析数据的函数。但你应该使用

```
JSON.parse 
```

如果 broser 不支持 JSON，则使用来自[https://github.com/douglascrockford/JSON-js的 json polyfill](https://github.com/douglascrockford/JSON-js)

```
dataArray = JSON.parse(dataFomXHR); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T10:44:50.040

我不确定这是否是您想要的，但您为什么不希望 php 以这种格式返回它：

```
{'item1':'123','item2':'something','item3':'and more something'} 
```

为了实现这一点，您需要确保您的数组`json_encode()`是关联的。它应该是下面的形式

```
array("item1"=>123,"item2"=>"something","item3"=>"more something"); 
```

`stripslashes()`如果数组中的某些值可能是 URL，您甚至可以继续执行

然后您可以`JSON.parse()`对 JSON 字符串执行 a 并访问这些值

跳这有帮助！

# javascript - 每 15 分钟打开一次覆盖弹出窗口

> ID：10831760
> 
> 赞同：0
> 
> 时间：2012-05-31T10:25:12.383
> 
> 标签：javascript, jquery, html, cookies

我希望像这个页面一样推荐代码：vozforums.com

他们每 15 分钟打开一个覆盖弹出窗口，使用 cookie。这是屏幕截图：

![在此处输入图像描述](../Images/57b749d4fedb2d21f2192090a1e206f1.png)

我正在查看他们的代码，他们使用这个弹出代码：[http ://defunkt.io/facebox/](http://defunkt.io/facebox/)

但我不知道如何每 15 分钟打开一次弹出窗口，并且每个会话只打开一次（使用 jquery 和 cookie）。所以请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:29:12.107

cookie 可以设置一段时间。您只需要检查 cookie 是否存在，您不应该显示弹出窗口，否则显示它并设置 cookie。

```
if(readCookie('popupshown') == null)
{
  //show popup
} 
```

读取和设置cookies的方法：

```
// Cookies
function createCookie(name, value, minutes) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (minutes * 60 * 1000));
        var expires = "; expires=" + date.toGMTString();
    }
    else var expires = "";

    name = name;

    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:29:10.867

setTimeout 和 jQyeryUI 模态对话框将为您解决问题。

```
window.setTimeout(function () {
    $("#myDialog").dialog("open");
}, numberOfMSToWaitBeforeOpening); 
```

如果您想要重复弹出窗口，您需要在他们关闭对话框时围绕超时管理进行一些编码。

# regex - 组合多个 sed 命令

> ID：10831764
> 
> 赞同：7
> 
> 时间：2012-05-31T10:25:17.743
> 
> 标签：regex, shell, sed

具有以下文件：

```
<tr class="in">
  <th scope="row">In</th>
  <td>1.2 kB/s (0.0%)</td>
  <td>8.3 kB/s (0.0%) </td>
  <td>3.2 kB/s (0.0%) </td>
</tr>
<tr class="out">
  <th scope="row">Out</th>
  <td>6.7 kB/s (0.6%) </td>
  <td>4.2 kB/s (0.1%) </td>
  <td>1.5 kB/s (0.6%) </td>
</tr> 
```

我想像这样获取每秒之间的值`<td></td>`（并将其保存到文件中）：

```
8.3
4.2 
```

到目前为止我的代码：

```
# get the lines with <td> tags
cat tmp.txt | grep '<td>[0-9]*.[0-9]' > tmp2.txt

# delete whitespaces
sed -i 's/[\t ]//g' tmp2.txt

# remove <td> tag
cat tmp2.txt | sed "s/<td>//g" > tmp3.txt

# remove "kB/s (0.0%)"
cat tmp3.txt | sed "s/kB\/s\((.*)\)//g" > tmp4.txt

# remove </td> tag and save to traffic.txt
cat tmp4.txt | sed "s/<\/td>//g" > traffic.txt

#rm -R -f tmp* 
```

我怎样才能以常见的方式做到这一点？这段代码真的很牛逼。。

提前致谢，马利

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T10:30:56.487

使用该`-e`选项（如果使用 GNU sed）。从[手册](https://www.gnu.org/software/sed/manual/sed.html#index-GNU-extensions_002c-subprocesses-1)：

> e [command] 此命令允许将来自 shell 命令的输入通过管道传输到模式空间。没有参数，e 命令执行在模式空间中找到的命令，并用输出替换模式空间；尾随换行符被抑制。
> 
> 如果指定了参数，则 e 命令将其解释为命令并将其输出发送到输出流。该命令可以跨多行运行，除了最后一行以反斜杠结尾。
> 
> 在这两种情况下，如果要执行的命令包含 NUL 字符，则结果是不确定的。
> 
> 请注意，与 r 命令不同，该命令的输出将立即打印；相反， r 命令将输出延迟到当前周期结束。

所以在你的情况下，你可以这样做：

```
cat tmp.txt | grep '<td>[0-9]*.[0-9]' \
| sed -e 's/[\t ]//g' \
-e "s/<td>//g" \
-e "s/kB\/s\((.*)\)//g" \
-e "s/<\/td>//g" > traffic.txt 
```

你也可以用另一种方式写成：

```
grep "<td>.*</td>" tmp.txt | sed 's/<td>\([0-9.]\+\).*/\1/g' 
```

匹配一个或多个实例，`\+`但它不适用于非 GNU 版本的 sed。（例如，Mac 有 BSD）

在下面@tripleee 评论的帮助下，这是我能得到的最精致的版本，它也适用于非 GNU 版本`sed`：

`sed -n 's/<td>\([0-9]*.[0-9]*\).*/\1/p' tmp.txt`

作为旁注，您还可以简单地通过每个 sed 管道输出，而不是保存每个输出，这是我看到人们通常为临时任务所做的：

```
 cat tmp.txt | grep '<td>[0-9]*.[0-9]' \
    | sed -e 's/[\t ]//g' \
    | sed "s/<td>//g" \
    | sed "s/kB\/s\((.*)\)//g" \
    | sed "s/<\/td>//g" > traffic.txt 
```

该`-e`选项更有效，但我猜管道选项更方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T12:02:24.170

这可能对您有用（GNU sed）：

```
 sed '/^<tr/,/^<\/tr>/!d;/<td/H;/^<\/tr/!d;x;s/\n//g;s/<td>/\n/2;s/.*\n\(\S*\).*/\1/' file 
```

解释：

*   关注开始`<tr>`和结束`</tr>`标签之间的行。`/^<tr/,/^<\/tr>/!d`
*   `<td>`在保持空间 (HS) 中存储行。`/<td/H`
*   删除范围内除最后一行之外的所有行。`/^<\/tr/!d`
*   换成 HS。`x`
*   删除所有换行符。`s/\n//g`
*   `<td>`用换行符替换 2nd 。`s/<td>/\n/2`
*   删除 HS 中的所有文本，除了插入的换行符之后的第一个非空格字段并打印。`s/.*\n\(\S*\).*/\1/`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T12:32:50.647

您可以使用大括号创建一个由一个地址或一组地址操作的块：

```
sed -n '/<td>[0-9]*.[0-9]/ {s/[\t ]//g; s/<td>//g; s/kB\/s\((.*)\)<\/td>//g;p}' tmp.txt 
```

我认为您可能可以使用 sed 的保持和模式空间做一些棘手的事情，以便获得第二行和第四行，（我已经看到可以通过这种方式撤消文件双间距的解决方案）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T10:42:25.803

[编辑] 感谢 Barton 指出错误。修正版：

```
cat tmp.txt | grep td | sed 's/<td>\([0-9]\.[0-9]\).*/\1/g' > newtmp.txt
sed -n '2,${p;n;n}' newtmp.txt > final.txt; rm newtmp.txt 
```

第一行将在每行的 td 之后挑选出 digit.digit 模式。

第二行从第二行开始每隔三行打印一次（这实际上为您提供了文件中每三行中的第二行）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T12:47:52.233

您关于运行多个 sed 的问题似乎已得到解答，但 sed 是错误的工具。假设输入格式是固定的，并且`<tr>`总是在一行的开头，并且您要查找的 td 标记总是在该行前面正好有 2 个空格（如果不是这种情况，可以轻松修改此解决方案），您可以做：

```
awk -F'</?td>' '/^<tr/{i=0} /^  <td/{i++} i==2{print $2}' input-file 
```

第一个参数告诉 awk 在`<td>`or上分割每一行`</td>`，因此您感兴趣的数据成为第二个字段。`<tr`每当出现在行首时，第二个参数的第一个子句将计数器 i 重置为零。`i`每次下一个增量`<td`出现在 2 个空格之后。最后打印第二`<td>`行的第二个字段。最后一个参数指定您的输入文件。

当然，这为您提供了`<td>`标签之间的所有内容，我认为这不是您想要的。`<td>`要获取和第一个空格之间的文本块，请尝试：

```
awk '/^<tr/{i=0} /^  <td/{i++} i==2{gsub( "<td>", ""); print $1}' input-file 
```

# c# - 从虚拟路径 URL asp.net 下载文件

> ID：10831765
> 
> 赞同：0
> 
> 时间：2012-05-31T10:25:22.483
> 
> 标签：c#, asp.net

我有一个虚拟路径 URL (http://xyz.com/eRoom/SPOmidrangesysdiv/EFT3%20Test%20Scorecard%20for%20Inyo.xlsx)。浏览此网址所需的凭据。我想使用 ASP.NET C# 从 url 下载文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:44:17.010

您可以使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)

```
WebClient client = new System.Net.WebClient();
// You might require some headers to be added for authentication
client.AddHeader("header", "header"); 
byte[] data = client.DownloadData("http://xyz.com/eRoom/SPOmidrangesysdiv/EFT3%20Test%20Scorecard%20for%20Inyo.xlsx")' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:09:49.723

您应该像上面提到的 Asif 一样使用[WebClient 。](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)将其分解为可以轻松替换同一基本位置中的备用文件。

```
string remoteUri = "http://xyz.com/eRoom/SPOmidrangesysdiv/";
string fileName = "EFT3%20Test%20Scorecard%20for%20Inyo.xlsx", myStringWebResource = null;
// Create a new WebClient instance.
WebClient myWebClient = new WebClient();
// Concatenate the domain with the Web resource filename.
myStringWebResource = remoteUri + fileName;
myWebClient.DownloadFile(myStringWebResource,fileName); 
```

您可以在方法的第二个参数中指定目录`DownloadFile`，只需确保您的 IIS 用户（通常为*SERVERNAME* \IUSR_ *SERVERNAME*）有权写入该目录。

# python - 你如何将值从 VBA 传递给 python

> ID：10831771
> 
> 赞同：1
> 
> 时间：2012-05-31T10:25:59.640
> 
> 标签：python, vba

我有一个我一直在研究的 VBA 工具栏。它有两个按钮，在进程接近尾声时，它调用了一个 python 脚本。我想要做的是取决于单击两个按钮中的哪一个，python 脚本的某个部分将运行，所以我想传递一个链接到按钮的值，然后将其发送到 python 脚本并运行。

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:42:34.500

您可以将命令行选项传递给 python 脚本，就像您可以使用其他命令行程序一样。根据按下的按钮，将不同的开关传递给您的程序。

在您的情况下，最简单的方法可能是根据按下的按钮在命令行中传入一个值，然后从[`sys.argv`](http://docs.python.org/library/sys.html#sys.argv)变量中选择：

```
import sys

def fooClicked():
    # Stuff to do when Foo was clicked

def barClicked():
    # Stuff to do when Bar was clicked

button = sys.argv[1]
if button == 'foo':
    fooClicked()
elif button == 'bar':
    barClicked() 
```

（您可以使用 dict 来查找方法，但这可能太高级了，不知道您对 Python 的熟悉程度）。

因此，如果您调用此脚本，`python.exe H:\Report_v7.py foo`该`fooClicked`函数将被调用。

如果这将增长到不仅仅是两个按钮，我将使用该[`optparse`](http://docs.python.org/library/optparse.html)模块来定义您的选项并根据所选选项运行不同的代码路径。

如果您升级到 Python 2.7，请改用新的（更好的）[`argparse`](http://docs.python.org/library/argparse.html)模块。

# php - 使用 curl 安装 zend php 53 时的 Apache 2 分段错误

> ID：10831772
> 
> 赞同：2
> 
> 时间：2012-05-31T10:26:00.663
> 
> 标签：php, apache, zend-framework, segmentation-fault

我花了很多时间来弄清楚 apache2 崩溃的原因。我的环境是：

*   Debian 测试
*   Apache 2（重写、ssl 等）
*   从 zend repo 安装的 PHP 5.3 Zend

没有什么不寻常的，但 dmesg 说：

```
apache2[xxxx]: segfault at 18 ip xxxx sp xxxx error 4 in libphp5.so[xxxxx] 
```

我发现的日志中没有其他内容，很难找到问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T10:26:01.100

我已经开始从 php 模块中发现问题，因为很多分段错误与 php 模块有关。经过几次测试，我发现禁用模块 curl 可以解决问题。但在我的情况下，卷曲是必需的，所以我必须继续调查。

一个重要的想法是启用 curl 的 php-cli 可以正常工作，并且 php -m 也可以。

所以肯定是apache的问题。一个小时后，我发现禁用 ssl 和启用 curl apache 可以工作。

两个模块（mod_ssl、php_curl）存在冲突。并`ldd mod_ssl.so`表明该库依赖于`libcrypto.so.1.0.0`. 实际上 aptitude 告诉我 openssl 的版本是 1.0.0-e。但是 phpinfo() 告诉我它是用`--with-openssl=/usr/local/openssl-0.9.8o`. **有冲突。有两个模块依赖于 openssl，但使用不同的版本构建：0.9.8o vs 1.0.0-e！**

我不得不将我的 apache2 和 openssl 版本降级到适当的版本，现在它可以工作了：ssl 和 curl 都可以。

因为很难弄清楚这个问题，所以我决定在这里发布这个提示。我希望这个小笔记可以帮助某人节省一些时间。

# bash - 如何替换包含字符串的整行？

> ID：10831775
> 
> 赞同：0
> 
> 时间：2012-05-31T10:26:07.317
> 
> 标签：bash

假设我有一个名为 file.txt 的文件，其中包含

```
abc
post_max_size = 100M
def 
```

我需要一个脚本来找到包含 post_max_size 的行并将整行替换为 post_max_size = 50M。所以它会导致：

```
abc
post_max_size = 50M
def 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:33:21.023

```
[me@home]$ cat file.txt 
abc
post_max_size = 100M
def

[me@home]$ sed -i 's/.*post_max_size.*/post_max_size = 50M/' file.txt 
[me@home]$ cat file.txt
abc
post_max_size = 50M
def 
```

# c# - 如何读取 xml 文件并写入列表，然后获取 txt 文件的路径并读取它

> ID：10831777
> 
> 赞同：-1
> 
> 时间：2012-05-31T10:26:08.017
> 
> 标签：c#, xml

我有一个 xml 文件。这有我的日志文件（txt）的路径。这个 xml 文件有一些模块，每个模块都有日志文件路径。所以我想读取 xml 并列出每个模块的详细信息然后我想要阅读 txt 文件（使用路径）。任何人都可以给出一些想法来做这些事情。

谢谢，这是我的xml文件

```
 <?xml version="1.0" encoding="utf-8" ?> 
   <Modules>    
    <ServiceHost>
     <LogType value="FatalErrorLog">
     <Fields>
      <FileName>ServiceWS.log</FileName>
      <FileLocation>\\10.8.8.21\lv0\Logs\Prod\Service\</FileLocation>
      <IsLogFilterAvailable value="true" />
      <IsDateFilterAvailable value="true" />
      <IsDownloadRawFile value="false" />
    </Fields>
  </LogType>
   <LogType value="DebugLog">
     <Fields>
      <FileName>ServiceDebugWS.log</FileName>
      <FileLocation>\\10.8.8.21\lv0\Logs\Prod\ServiceHost</FileLocation>
      <IsLogFilterAvailable value="true" />
      <IsDateFilterAvailable value="true" />
      <IsDownloadRawFile value="false" />
    </Fields>
  </LogType>
</ServiceHost>
<Product value="Debug">
   <LogType>
     <Fields>
      <FileName>Product.log</FileName>
      <FileLocation>\\10.8.8.21\lv0\Logs\Prod\Endor\</FileLocation>
      <IsLogFilterAvailable value="true" />
      <IsDateFilterAvailable value="true" />
      <IsDownloadRawFile value="false" />
    </Fields>
  </LogType>
</Product>
<Portal value="Debug">
   <LogType>
     <Fields>
      <FileName>Portal.log</FileName>
      <FileLocation>\\10.8.8.21\lv0\Logs\Prod\SupportPortal\</FileLocation>
      <IsLogFilterAvailable value="true" />
      <IsDateFilterAvailable value="true" />
      <IsDownloadRawFile value="false" />
    </Fields>
  </LogType>
</Portal>
<Modules> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:00:37.287

您可以使用 XmlDocument 作为点**nunespascal**或者使用更舒适的 XPath（尽管与 Xml 非常相似）

```
 XPathDocument xdoc = new XPathDocument(filename);
        XPathNavigator xnav = xdoc.CreateNavigator();
        // path in XML to file location
        XPathNodeIterator xiter = xnav.Select("/Modules/ServiceHost/LogType/Fields/FileLocation");
        foreach(var item in xiter)
        {
            Log(item.ToString());
        } 
```

您的 XML 文件中的 PS 未关闭 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:53:08.723

您可以使用[REGEX](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)在 xml 文件中查找任何内容。假设您想在数组中获取 txt 文件名，那么您可以按照以下方式进行......

```
// get the string start with <FileLocation> and end with </FileLocation> 
MatchCollection v = Regex.Matches(input_string, "<FileLocation>(.)*</FileLocation>", RegexOptions.IgnoreCase);

            string[] arr=new string[total_length];
            int counter = 0;
            foreach (Match i in v)
            {

                string s = i.Value;
                s= s.Replace("<FileLocation>", "");
                s=s.Replace("</FileLocation>","");
                arr[counter] = s;
                counter++;

            } 
```

您可以通过这种方式找到并提取任何字符串。

然后你可以使用 arr 数组打开 txt 文件或做任何你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:39:49.383

这应该让你开始：

```
XmlDocument xml_Document = new XmlDocument();
xml_Document.Load("C:\\settings.xml");
var list = xml_Document.SelectNodes("//LogType [@value='Debug']");
var logLocation = list.Item(0).SelectNodes("//FileLocation").Item(0).Value; 
```

# iphone - 在 UITableViewCell 中添加分隔符

> ID：10831783
> 
> 赞同：0
> 
> 时间：2012-05-31T10:26:27.583
> 
> 标签：iphone, ios

我怎么可能在表格单元格中添加这种分隔符？

![Apple 选择在 iPhone 的通讯录中添加新联系人](../Images/6c7238095b208c3eee8209f5ce7b2625.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:34:26.703

或者我建议您使用 1px 灰线图像在单元格中绘制这些线条，而不是在单元格中使用整个图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:29:28.947

使用图像作为单元格的背景。确保您返回图像的高度，`tableView:heightForRowAtIndexPath:`使其非常适合。

# php - cron 和浏览器的权限被拒绝 mkdir

> ID：10831785
> 
> 赞同：0
> 
> 时间：2012-05-31T10:26:35.420
> 
> 标签：php, browser, cron, mkdir, permission-denied

我们有一个 PHP XML 解析脚本，可以将照片上传到一个文件夹结构，例如`/content/images/2012/05/31/%object_id%/`. 此解析器主要作为 DirectAdmin cronjob 运行。在通过浏览器运行解析器时，我们在获取文件夹权限以启用该目录中的 cronjob 上传时遇到了许多问题。

根据`print_r(posix_getpwuid(fileowner($directory)));`目录的所有者是一样的`get_current_user()`。尽管如此，我还是收到：`Warning: mkdir() [function.mkdir]: Permission denied`通过浏览器运行脚本时。当它作为 cron 作业运行时，它工作正常。

所有文件夹都有 chmod 0777 并且新文件夹是这样创建的；

```
mkdir($path,0777,true); 
```

当然，我们在上传和/或删除文件本身时也会遇到同样的权限问题。

有没有办法启用所有作为 cron 作业和通过浏览器运行的文件操作？

我们正在使用 PHP 版本 5.2.17 运行 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:49:02.797

需要注意几点：get_current_user 获取 .php 文件（即脚本）的所有者，但不是运行 php 脚本的用户的名称。这些总是不同的，因为文件将由您（普通用户）上传，而 php/apache 将以不同的用户（通常称为“apache”或“www”）运行。您需要这两者中的后者。php手册中建议的片段是：

```
$processUser = posix_getpwuid(posix_geteuid());
print $processUser['name']; 
```

（http://php.net/manual/en/function.get-current-user.php - 见评论）

* * *

但是，为了解决您当前的问题，我强烈建议以与运行 php/apache 的用户相同的用户身份运行 cron（检查 crontab 上的手册页） - 用户应该是上面那个片段中的那个，CHOWN 文件和目录到同一用户（他们当前将是 root）以及在您和 FTP 客户端之间共享的组。然后确保用户和组具有读+写权限，以便您也可以从 ftp 进行编辑。确保在脚本创建目录 (775) 和文件 (644) 时更改它们的权限。

另请注意，如果您使用 mkdir()，那么上面的目录也必须对用户具有写入权限（这实际上可能是您最初的问题，以及为什么只有 root/cron 可以在那里写入）。

# android - DATE_CHANGED 广播没有被触发

> ID：10831789
> 
> 赞同：1
> 
> 时间：2012-05-31T10:27:20.857
> 
> 标签：android, broadcastreceiver

我的应用程序中有一个`DATE_CHANGED BroadcastReciever`，但它似乎没有在午夜启动，而是在白天 12 点启动 myreciever。

我已在清单文件中声明为

```
 <receiver android:name=".DateChangedReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.DATE_CHANGED" />
        </intent-filter>
    </receiver> 
```

我的 DateChangedReceiver.java 文件就像

```
 public class DateChangedReceiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context context, Intent intent) {

            if(intent.getAction().equals(Intent.ACTION_DATE_CHANGED)){
            //my task...
        }
    }

} 
```

知道为什么会这样。帮助伙计们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:51:24.070

android.intent.action.DATE_CHANGED 当用户手动更改手机**设置中的日期而不是更改日期时触发。**我遇到了这个问题，最后使用了 AlarmManager。

# c - 如何在 ARM 内联汇编程序中使用特定寄存器

> ID：10831792
> 
> 赞同：4
> 
> 时间：2012-05-31T10:27:24.883
> 
> 标签：c, gcc, arm, inline-assembly

我试图让内联汇编器将一些值复制到特定的寄存器中，但它只会抱怨。这是将触发错误的代码的简短版本：

```
asm("" :: "r0" (value));
asm("" :: "a1" (value)); 
```

两条线都会触发：

```
Error: matching constraint references invalid operand number 
```

那么如何指定寄存器直接取呢？我知道我可以为值引入名称，然后自己复制它们，但我想避免这种情况，因为这段代码会更短且更具可读性。

**为什么我要问** 目前我正在处理一些系统调用。我想使用这样的系统调用宏：

```
#define SYSCALL0(NUMBER) asm("swi #" STRINGIFY(NUMBER));
#define SYSCALL1(NUMBER, A) asm("swi #" STRINGIFY(NUMBER) :: "r0"(A));
#define SYSCALL2(NUMBER, A, B) asm("swi #" STRINGIFY(NUMBER) :: "r0"(A), "r1"(B));
... 
```

如您所见，这非常适合在线使用。当然我可以做类似的事情：

```
#define SYSCALL1(NUMBER, A) register type R0 asm("r0") = A;
                            SYSCALL0(NUMBER) 
```

**但是每次**我在不同的函数中使用宏时，我都必须转换`A`为`type`没有类型错误或`type`正确给出。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:30:40.800

使用 GCC，有一个捷径：

```
register long r0 asm ("r0"); 
```

然后`r0`“别名”该寄存器。

将它与[语句表达式](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)结合起来，你甚至可以得到`r0`一个“返回值”。

```
#define SYSCALL1(NUMBER,A) ({\
  register long r0 asm("r0") = (long) (A); \
  asm("swi #" STRINGIFY(NUMBER) : "=r"(r0) : "r"(r0) : "memory"); \
  r0; }) 
```

（我不知道 clobber 是否合法，但 uClibc 系统调用实现有。）

请参阅[扩展程序集](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)和[本地 reg vars](http://gcc.gnu.org/onlinedocs/gcc/Local-Reg-Vars.html#Local-Reg-Vars)。**

# css - 用于转换的转换属性是什么？

> ID：10831795
> 
> 赞同：8
> 
> 时间：2012-05-31T10:27:42.107
> 
> 标签：css, css-transforms

我不确定这是否是正确的方法，但我想旋转一个元素，
我知道`transform: rotate(90deg)`&`transition-property:all`会起作用，但我不想转换`all`转换
。我`transition-property`应该使用什么，有没有更好的方法来创建旋转动画？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-06T15:27:38.473

要定位`transform`s`transition-property`你应该使用：

```
-webkit-transition-property: -webkit-transform;
-moz-transition-property: -moz-transform;
-ms-transition-property: -ms-transform;
-o-transition-property: -o-transform;
transition-property: transform; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T14:22:38.760

也许不是更好的方法，但或者您可以使用动画关键帧（如果您想连续重复动画，这会更好）：

```
@keyframes rotateDiv {
   from { transform: rotateZ(0deg); }
   to   { transform: rotateZ(360deg); }
}

div {
   animation-name: rotateDiv;
   animation-duration: 1s;
   animation-timing-function: linear; /* For a steady rate loop */
   animation-delay: 0s;            
   animation-iteration-count: infinite; /* Use actual numbers for limited repeat */
} 
```

# php - PHP 深度克隆对象

> ID：10831798
> 
> 赞同：21
> 
> 时间：2012-05-31T10:28:01.130
> 
> 标签：php, object, clone

场景：从数据库中获取电子邮件模板，并遍历收件人列表，为每个收件人个性化电子邮件。

我的电子邮件模板作为嵌套对象返回。它可能看起来像这样：

```
object(stdClass) {
    ["title"] => "Event Notification"
    ["sender"] => "notifications@mysite.com"
    ["content"] => object(stdClass) {
        ["salutation"] => "Dear %%firstname%%,"
        ["body"] => "Lorem ipsum %%recipient_email%% etc etc..."
    }
} 
```

然后我遍历收件人，将此 $email 对象传递给 Personalise() 函数：

```
foreach( $recipients as $recipient ){
    $email_body = personalise( $email, $recipient );
    //send_email();
} 
```

当然，问题是我需要通过引用传递 $email 对象，以便它替换个性化标签 - 但如果我这样做，原始对象将被更改并且不再包含个性化标签。

据我了解，克隆在这里对我没有帮助，因为它只会创建一个浅拷贝：电子邮件对象中的内容对象不会被克隆。

我读过关于使用 unserialize(serialize($obj)) 解决这个问题的文章——但我读到的所有内容都表明这是一个很大的性能打击。

所以，两个终于解决了我的两个问题：

1.  unserialize(serialize($obj)) 在这里是一个合理的解决方案吗？
2.  还是我把这整件事都搞错了？是否有其他方法可以生成该电子邮件对象的个性化副本？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T10:33:37.677

您可以在电子邮件类中添加一个[`__clone()`](http://www.php.net/manual/language.oop5.cloning.php#object.clone)方法。当通过 clone() 克隆此类的实例时会自动调用它。在此方法中，您可以手动添加模板。

例子：

```
class email {
    __clone() {
         $this->template = new template();
    }
} 
```

.

```
unserialize(serialize($object)); // would be another solution... 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-04T09:53:32.203

另一个更通用和更强大的解决方案：**[MyCLabs\DeepCopy](https://github.com/myclabs/DeepCopy)**。

它有助于创建深层副本而不必重载`__clone`（如果您有很多不同的对象，这可能是很多工作）。

# java - 获取异常 java.security.InvalidKeyException：无效的 AES 密钥长度：29 字节？

> ID：10831801
> 
> 赞同：13
> 
> 时间：2012-05-31T10:28:09.953
> 
> 标签：java, encryption, aes

在程序下面运行时，我得到了这个异常。无法弄清楚 AES 允许 128 -256 位密钥的问题是什么？

```
 Exception in thread "main" java.security.InvalidKeyException: Invalid AES key length: 29 bytes
at com.sun.crypto.provider.AESCipher.engineGetKeySize(DashoA13*..)
at javax.crypto.Cipher.b(DashoA13*..) 
```

在第 20 行获取异常

**这是程序**

```
 import java.security.Key;

 import javax.crypto.Cipher;
 import javax.crypto.spec.SecretKeySpec;

 import sun.misc.BASE64Decoder;
 import sun.misc.BASE64Encoder;

 public class AESEncryptionDecryptionTest {

   private static final String ALGORITHM       = "AES";
   private static final String myEncryptionKey = "ThisIsSecurityKey";
   private static final String UNICODE_FORMAT  = "UTF8";

   public static String encrypt(String valueToEnc) throws Exception {
 Key key = generateKey();
 Cipher c = Cipher.getInstance(ALGORITHM);
 c.init(Cipher.ENCRYPT_MODE, key);  //////////LINE 20
 byte[] encValue = c.doFinal(valueToEnc.getBytes());
 String encryptedValue = new BASE64Encoder().encode(encValue);
 return encryptedValue;
   }

public static String decrypt(String encryptedValue) throws Exception {
Key key = generateKey();
Cipher c = Cipher.getInstance(ALGORITHM);
c.init(Cipher.DECRYPT_MODE, key);
byte[] decordedValue = new BASE64Decoder().decodeBuffer(encryptedValue);
byte[] decValue = c.doFinal(decordedValue);
String decryptedValue = new String(decValue);
return decryptedValue;
}

private static Key generateKey() throws Exception {
byte[] keyAsBytes;
keyAsBytes = myEncryptionKey.getBytes(UNICODE_FORMAT);
Key key = new SecretKeySpec(keyAsBytes, ALGORITHM);
return key;
}

public static void main(String[] args) throws Exception {

String value = "password1";
String valueEnc = AESEncryptionDecryptionTest.encrypt(value);
String valueDec = AESEncryptionDecryptionTest.decrypt(valueEnc);

System.out.println("Plain Text : " + value);
System.out.println("Encrypted : " + valueEnc);
System.out.println("Decrypted : " + valueDec);
}

} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-31T10:38:32.760

AES 允许 128、192 或 256 位密钥长度。即 16、24 或 32 字节。尝试仅将您的前 16 个字节`mEncryptionKey`作为`keyAsBytes`.

**编辑：**
虽然后来我想到了。我已经形成并且我推荐的一个习惯是获取密码/密码短语的 SHA 哈希，并将其用作密钥的源字节。采用散列可以保证密钥数据的大小正确，而与密码/密码的长度无关。您当前使用 String 字节的实现有两个问题；

*   如果有人使用短密码，它将破坏您的密钥生成。
*   前 16 个字节相同的两个不同密码将创建相同的密钥。

使用散列可以消除这两个问题。

看一下`buildKey()`这个类中的方法；[https://github.com/qwerky/DataVault/blob/master/src/qwerky/tools/datavault/DataVault.java](https://github.com/qwerky/DataVault/blob/master/src/qwerky/tools/datavault/DataVault.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:52:54.600

密钥使用随机性作为输入，但对它的组成方式仍有要求。您使用的`SecretKeySpec`构造函数用于将已生成的密钥加载到内存中。相反，使用[`KeyGenerator`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/KeyGenerator.html).

```
KeyGenerator kg = KeyGenerator.getInstance(ALGORITHM);
kg.init(128);
SecretKey k = kg.generateKey(); 
```

另请注意，现在实际上认为 AES-128 比 AES-256 弱。它可能并没有太大的不同，但是更长的密钥大小带来的好处可能会被其他地方的简化（更少的轮次）所抵消。

# c++ - 强制外部函数为 const

> ID：10831802
> 
> 赞同：2
> 
> 时间：2012-05-31T10:28:10.620
> 
> 标签：c++, constants, mutable, const-correctness, const-cast

这是我的问题。我创建了一个类，其成员函数声明为`const`使用我无法修改的外部函数（在其他人的代码中声明）并且未声明`const`。更确切地说

### 别人的代码

```
class B {
public:
    void foo();
}; 
```

### 我的代码

```
class A : public B {
public:
    void bar() const {
        this->foo();
    }
}; 
```

我知道对于成员数据，我们可以通过使用来强制 const 正确性`mutable`or `const_cast`。我怎样才能“破解”`foo`让我的编译器明白我想像使用它一样使用它，即使它没有在其他人的代码中声明？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T10:37:10.740

1.  不要那样做。

2.  不要这样做：

例子：

```
class A : public B { 
public: 
    void bar() const { 
        const_cast<B*>(static_cast<const B*>(this))->foo();
    } 
}; 
```

**编辑：**有效的用例是：

1.  该函数`B::foo()` **不会修改 state**，并且**可以声明`const`**，但是......
2.  写信的人`B::foo()`忘记将其声明为 const，并且...
3.  你不能改变它，因为它会破坏你无法控制的东西。

理论上这不可能发生，但实际上有时会发生。

正如其他回答者正确所说的那样，更好的答案是`B::foo()`修复，或者提供一个做同样事情的替代函数，**声明**为 const。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T10:29:52.953

只需使您的函数非常量。这是正确的做法。

这清楚地表明您将修改您的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:33:01.870

要么制作`B::foo()`const，要么制作`A::bar()`非常量。两者之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:38:10.103

您可以声明 bar() 如下：

```
void bar() const {
    B *that = (B *) this;
    that->foo();
} 
```

不确定是否有任何意外的副作用。

# android - 如何增加设备上aLogCat/Logcat的行数限制？

> ID：10831803
> 
> 赞同：0
> 
> 时间：2012-05-31T10:28:11.303
> 
> 标签：android, logcat

我正在尝试使用 aLogCat 在 Android 设备上记录一些调试内容。显然，日志可以包含的行数是有限的，所以在测试会话之后，我得到了一个截断的日志（第一条消息消失了）。

我不知道这个限制是系统本身施加的还是aLogCat施加的，但我需要增加限制。

[我在这里](https://stackoverflow.com/questions/6321555/what-is-the-size-limit-for-logcat)和[这里](https://stackoverflow.com/questions/10212805/debugging-with-logcat)找到了有关 logcat 的相关答案，但它们似乎都是关于连接到 PC 的设备，而我需要在字段中增加日志大小。

我知道 aLogCat 提供了一个自动保存选项，但是 15 分钟（这是最短的可用时间）对于我的用例来说太大了，因为在几分钟的测试后日志缓冲区会循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:47:58.443

LogCat 本身是一个 64KB 的环形缓冲区。除非通过构建自己的固件，否则无法增加。

如果您获得的历史记录少于 64KB，这可能是 aLogCat 施加的限制。

# android - USB系绳和同时调试

> ID：10831807
> 
> 赞同：13
> 
> 时间：2012-05-31T10:28:17.997
> 
> 标签：android, eclipse, debugging, usb

我需要在我的 Android 设备上连接网络来测试应用程序。我的笔记本 WiFi 适配器坏了，所以 2 小时后我通过 USB 设置了连接。但！当我在设备上启动“Wired Tether”以获得连接时，Eclipse 看不到该设备，并且我无法调试我的应用程序。

有谁知道如何解决这个问题？使用 USB 网络共享在手机上获取互联网连接并同时调试应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T00:53:11.610

我不知道同时使用 USB 调试和网络共享的方法。不过，这里有一些解决方法：

*   为您的计算机获取 USB 无线适配器（请参阅[http://www.amazon.com/gp/bestsellers/electronics/13983791/ref=pd_zg_hrsr_e_2_4_last](http://www.amazon.com/gp/bestsellers/electronics/13983791/ref=pd_zg_hrsr_e_2_4_last)）。我不知道在印度购买其中一个是否适合您。
*   将您的 apk 无线发送到您的手机以进行应用安装（请参阅[通过无线在基于 android 的设备上开发](https://stackoverflow.com/questions/4351942/developing-on-android-based-device-via-wireless)），然后直接在手机上查看 logcat 进行调试（aLogcat 似乎很流行，并允许您通过例如发送日志文件, 电子邮件，以便您可以在计算机上打开它们以在更大的屏幕上查看它们）

我知道这些解决方案涉及一些成本、工作量或不便，但希望其中一种对您有用。

编辑：

正如@shkschneider 和@CodeShane 的回答中所述，通过蓝牙进行互联网共享是可能的。CodeShane 的回答提到了 PdaNet（它显然也允许同时进行 USB 网络共享和调试），并包含一个链接。另一个解决方案是[OpenGarden](http://opengarden.com/ "开放花园")。这些解决方案为计算机提供了通过电话访问 Internet 的功能。如果需要相反的情况（并且从问题中并不完全清楚），反向网络共享似乎是答案（请参阅@NickL 的答案）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T16:11:03.617

长话短说：**你不能**。Android 根本不支持它（这更多是因为 USB 标准和网络共享操作而不是 AOSP 的错）。

* * *

所以要解决这个问题，你应该：

1.  **从另一个来源获取互联网**

    也许你可以有以太网连接？

2.  **以另一种方式将互联网从您的手机连接到您的上网本**

    由于您的 wifi 适配器坏了，您不能使用无线系绳，但也许您可以使用蓝牙进行系绳？

3.  **用另一种方式调试你的手机**

    也许您可以使用像 aLogCat 或类似的 Android 应用程序？

* * *

但是在手上，对不起，在上网本调试USB时，你不能将USB从手机连接到上网本。您的成功将取决于您找到替代解决方案的能力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T13:51:20.653

我想指出，我正在使用 PDANet*连接 USB*网络来输入此回复，同时我还通过 Eclipse Juno 在同一部手机上调试 android 应用程序。不知道哪一方解决了这个问题，但它太棒了！

至于为什么 Eclipse 没有看到您的设备，标准故障排除提示适用.. 确保启用 USB 调试和未知来源/3rd 方应用程序，尝试重新启动，检查 USB 驱动程序，更新驱动程序/eclipse ..

*   [使用 USB 电缆连接时在 Eclipse 中未检测到设备](https://stackoverflow.com/questions/8063147/device-not-detected-in-eclipse-when-connected-with-usb-cable)

*   [http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

*   [Eclipse 找不到手机](https://stackoverflow.com/questions/5211838/eclipse-not-finding-phone)

*   [掌上电脑 3.5](http://junefabrics.com/android/)

*   [Eclipse Juno 服务版本 1；版本号：20120920-0800](http://www.eclipse.org/downloads/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T10:28:41.133

您可以使用蓝牙网络共享来获得互联网连接并使用 USB 进行调试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-03T07:16:20.853

步骤 1\. 关闭 USB 网络共享 步骤 2\. 打开无线 USB 调试

*   通过 USB 连接到您的设备
*   输入“adb tcpip 5555”
*   拔下您的设备
*   在系统设置中查找您设备的 IP
*   输入“adb connect [ip 地址]:5555”

步骤 3\. 打开 USB 网络共享

现在您可以通过 USB 数据线使用互联网并在无线模式下调试应用程序就是这样！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T13:19:27.013

是的，有可能。下面的链接有一个 hack ！

**来源**：[HowToGeek](http://www.howtogeek.com/117118/how-to-connect-your-android-to-your-pcs-internet-connection-over-usb/)，[StackOverFlow](https://stackoverflow.com/questions/9441879/is-it-possible-to-share-my-internet-connection-from-pc-to-android-via-usb)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T07:37:47.347

如果我正确理解您的问题，您想通过 USB 将手机连接到 PC，并使用 PC 的（互联网）连接 + 仍然获得 logcat 输出？

那么是的，这当然是可能的。网络共享是当您的 PC 使用手机的互联网时，相反的方式称为反向网络共享。您的设备必须植根，然后您可以使用[此](http://forum.xda-developers.com/showthread.php?t=1371345)应用程序进行反向网络共享。

当您通过 USB 将手机连接到计算机时，您在应用程序中按“连接”。然后它会在您的手机上安装一个应用程序，该应用程序处理反向网络共享连接。它有效，有时我必须在连接时按“检查 DNS”才能使其正常工作.. 但它有效！通过 USB 调试也可以正常工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-02T15:38:04.307

您实际上可以通过 TCP 将 adb 连接到手机。不过，您可能需要一部有根电话才能正常工作

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-11T15:47:07.413

*   首先，您需要使用 USB 电缆调试您的设备，然后键入`adb tcpip 5555`它允许通过 TCP/IP 协议进行调试。

*   之后打开您的 USB 网络共享，现在您的计算机可以连接互联网，但丢失了 USB 调试。

*   现在您必须知道您的电话 IP 地址，以便您可以通过 TCP/IP 进行调试。您可以在终端中使用命令`arp -a`并查看网关地址。

*   最后是使用`adb connect yourphoneip:5555`例如连接到您的手机`adb connect 192.168.42.129:5555`

现在您可以同时获得调试和系绳

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2015-06-03T14:30:11.767

您可以使用

1.  **WiFi 网络共享**- 用于 Internet 连接
2.  为 adb连接**USB**。

# multithreading - 当我们确实有线程时，为什么要使用进程？

> ID：10831820
> 
> 赞同：2
> 
> 时间：2012-05-31T10:29:07.710
> 
> 标签：multithreading, operating-system

我们为什么要使用流程。我们不能建立一个所有事情都用线程完成的环境吗？我可能认为的一些原因是：

*   恶意阻塞线程可能会导致所有线程阻塞。
*   线程的安全问题，因为共享可能会导致更多的不一致，并且需要更多的同步。

除此之外，如果它们没有安全问题，我们可以转移到一个完全线程化的环境来使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:36:37.393

在操作系统级别迁移到完全线程化的环境（即所有进程都转换为共享相同虚拟地址空间的线程）的问题将是缺乏内存保护。我想不出一个流氓线程能够阻止其他线程，但它肯定会在不允许去的内存位置四处游荡。如果违反了保护，就会出现很多安全问题。但是，如果所有线程都表现良好，它会正常工作。然而，这类似于预先保护的内存操作系统，其中一个线程会使整个系统崩溃。

也就是说，这种系统的优势可以忽略不计。在当前系统中，两个进程已经可以请求一段共享内存进行合作（参见[此处](http://en.wikipedia.org/wiki/Shared_memory)）。我能想到的唯一其他优势是上下文切换可能会减少开销。在一个非常冒险的环境中，甚至可以完全关闭虚拟内存并运行内核空间中的每个线程，就像在[原始 xbox 操作系统中](http://www.xbox-linux.org/wiki/17_Mistakes_Microsoft_Made_in_the_Xbox_Security_System)一样（链接似乎已损坏，[此处为替代](http://events.ccc.de/congress/2005/fahrplan/attachments/591-paper_xbox.pdf)）。这将产生更快执行的效果，但即使是轻微的缓冲区溢出也可能会破坏一切。

总而言之，关于进程和线程的操作系统安全性已经有很多研究。进程的封装性和独立性的性质使它们非常适合并发。如果它们对您来说不够快，请为特定的用户应用程序编写具有多个线程的单个进程，但最好不要回到预保护计算的黑暗时代，将所有内容混合在一个内存空间中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:37:05.963

如果您的意思是“我们能否将基于多进程的应用程序重写为单进程多线程应用程序”，那么答案很可能是“是”。

如果您的意思是“我可以编写一个不再有进程而只有线程的操作系统”，那么答案是响亮的“不”。线程对程序状态的访问太多了。这使得它们非常高效，但也非常危险。故障是问题，故障是否是由于处理器故障导致线程硬崩溃引起的。或者像死锁这样的问题。目前不可能终止线程并对程序其余部分的状态没有影响。一个进程提供了隔离边界，允许行为不端的代码被终止，而不会影响机器上运行的其他进程的稳定性。它还提供了对安全性非常重要的特权边界。

# jquery - 如何制作一个可排序的项目当你用jquery拖动它时在上面带一个div？

> ID：10831825
> 
> 赞同：2
> 
> 时间：2012-05-31T10:29:24.583
> 
> 标签：jquery, z-index, jquery-ui-sortable

我想要一份清单

项目 1 向上 项目 2 向上

这将是短的，当您拖动第 2 项以使绿色 div 高于红色 div 时。意思是z-index会更高！

是我到目前为止看到它工作的链接.. [http://jsfiddle.net/2vgRY/](http://jsfiddle.net/2vgRY/)

提前谢谢大家！

编辑：

只有最后一件事！当我放置第三个项目并将其放在第二个上方时，我希望第一个仍然在顶部，然后是第三个，然后是第二个 .. [http://jsfiddle.net/2vgRY/3/](http://jsfiddle.net/2vgRY/3/)

它就像一个排序的东西，你将项目 3 向上拖动，然后 div 3 出现，你将项目 2 拖到项目 1 下方，然后 div 1 首先是 div 2，然后是 div 3 最后..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:46:20.603

如果我正确理解了您的问题，您可以使用 jQuery UI sortable() [start 事件](http://jqueryui.com/demos/sortable/#event-start)：

请参阅此工作[小提琴示例](http://jsfiddle.net/zuul/2vgRY/1/)！

**查询**

```
$(function() {
    $( "#sortable" ).sortable({
        start: function(event, ui) {
            // clear z-index
            $('span[class^="target_"]').css({
                "z-index" : '0'
            });

            // bring up the target
            var item = ui.item.attr('class').split(' ')[0];
            $('.' + item.replace("item", "target")).css({
                "z-index" : 10000
            });
        },
    });

    $( "#sortable" ).disableSelection();
}); 
```

**HTML**

```
<ul id="sortable">
  <li class="item_1 ui-state-default">
    <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 1 up
  </li>
  <li class="item_2 ui-state-default">
    <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 2 up
  </li>
</ul>
<span class="target_1" style="background:red;padding:30px; position:absolute; float:left;">1</span>
<span class="target_2" style="background:green; padding:30px; margin-left:10px; position:absolute; float:left;">2</span> 
```

**请注意**，我添加了类`item_x`和类`target_x`以允许元素识别。

# .net - XmlDocument.ImportNode 的 XDocument 等价物是什么？

> ID：10831826
> 
> 赞同：3
> 
> 时间：2012-05-31T10:29:26.417
> 
> 标签：.net, xml, xmldocument, linq-to-xml

我正在将一些代码从使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument)迁移到使用[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument)。作为此代码的一部分，我需要将一个文档中的元素添加到另一个文档中。使用 XmlDocument 我可以使用 ImportNode 执行此操作，如何使用 XDocument 执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T10:34:55.493

没有等价物，因为`XDocument`没有文档上下文的概念`XmlDocument`。

您可以简单地`XElement`在文档中添加一个，无论该元素来自何处。

请参阅MSDN 论坛上的[Alternative of 。`<XMLdocument>.ImportNode`](http://social.msdn.microsoft.com/Forums/en-US/xmlandnetfx/thread/0d4ebae8-1d99-49a3-a4d9-a3db0356d48b)

# tfs - 当一个设置为活动时，将所有工作项设置为非活动

> ID：10831828
> 
> 赞同：0
> 
> 时间：2012-05-31T10:29:31.173
> 
> 标签：tfs, tfs-workitem

我想知道当用户（贡献者）将其他任务设置为活动时，是否可以将其他任务设置为“待处理”或“非活动”。

我想知道我是否可以使用 Workflow 或 TFS 中的另一种自定义来做到这一点。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:12:25.273

如果您按原样使用产品，则无法做到这一点...

回到 TFS 2005/2008 的日子，我编写[了一个工具](http://wicreator.codeplex.com/)来完成您需要的工作项之间非常复杂的工作流可能性，但是我没有时间为 2010 年重写它（2010 年引入的类型化链接会改变很多东西）。

如果您不害怕编写自定义工具，您可以阅读[这篇文章](http://www.dotnetcurry.com/ShowArticle.aspx?ID=336)和我的 codeplex 项目的源代码。

# mysql - 使用带有 ejabberd 的 mysql 驱动程序，无需重新编译

> ID：10831830
> 
> 赞同：0
> 
> 时间：2012-05-31T10:29:38.890
> 
> 标签：mysql, erlang, ejabberd

我有 ejabberd 所需的所有 mysql .beam 文件。我通过 apt 安装了 ejabberd。但是，当我尝试将这些 .beam 文件复制到`/usr/lib/ebin`目录中并运行 ejabberd 时，它会向 ejabberd.log 回显以下内容：

> =INFO REPORT==== 2012-05-31 09:46:02 === 应用程序：ejabberd 退出：{bad_return,{{ejabberd_app,start,[normal,[]]}, {'EXIT',database_module_missing}} } 类型：临时

我做错了什么？

将mysql驱动程序添加到ejabberd apt安装的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:10:04.970

检查哪个触发此错误是直截了当的。它检查硬编码的模块列表是否在 Erlang VM 路径中。确保 odbc 文件存在并且它们具有正确的文件所有权。所需文件是：

```
check_database_module(odbc) ->
    check_modules(odbc, [odbc, odbc_app, odbc_sup, ejabberd_odbc, ejabberd_odbc_sup, odbc_queries]);
check_database_module(mysql) ->
    check_modules(mysql, [mysql, mysql_auth, mysql_conn, mysql_recv]);
check_database_module(pgsql) ->
    check_modules(pgsql, [pgsql, pgsql_proto, pgsql_tcp, pgsql_util]). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T23:13:40.677

ejabberd 使用的 BEAM 文件[位于不同的位置](http://packages.debian.org/squeeze/i386/ejabberd/filelist)— 尝试将文件放在那里。

附带说明：你确定那些 BEAM 文件真的没问题吗？*Erlang 在二进制*可移植性方面并不太宽松，因此始终建议使用与在目标机器上运行 ejabberd 相同的 Erlang 版本重新编译必要的代码。

# mysql - 为存储的数据增加一个 SQL 表键

> ID：10831831
> 
> 赞同：0
> 
> 时间：2012-05-31T10:29:39.947
> 
> 标签：mysql, sql

我正在尝试为数据库迁移构建脚本，但我有疑问。我有一个有很多寄存器和一个整数类型键的表。该键是自动增量的，现在从“1”索引开始。

问题是这个索引必须被新数据库中的默认值占用。所以我想循环数据库行以使每个索引递增一个，将第一个位置留空并将我的值插入其中。我试过这个说法：

```
UPDATE `tapp`, (
  SELECT @loop := id_App
  FROM
    tapp
  ) o
SET id_App = id_App + 1; 
```

但是，正在尝试从头开始更新每个索引，因此当它尝试将第一个索引转换为“2”时，它发现第二个索引已经被占用并且无法成功。

增加一个很重要，因为它是一个 MyIsam 数据库，我还必须一个一个地更新每个外键。我正在使用 MySQL。

请帮我一把！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:34:08.683

最简单的方法是双重的：将所有内容插入目标表后，进行 2 次更新。

首先，您检查表中的最大数字是多少，然后将其加一并记住它作为 topnumber。

然后，将所有内容更新为递增数字，从 topnumber 开始。最后，您更新所有内容，从初始种子开始，每条记录递增 1。

```
number data
1      "foo"
3      "bar"
10     "snafu" 
```

topnumber 变为 11

第一次通过后，数据如下所示：

```
number data
11     "foo"
12     "bar"
13     "snafu" 
```

第二遍之后（假设您的初始数字是 7），数据如下所示：

```
number data
7      "foo"
8      "bar"
9      "snafu" 
```

**更新**

或者，您可以在第一次通过时将记住的最高数字添加到每个初始值，而不是将数字更新为增量值（因此上述示例表在第一次更新后将如下所示：

```
number data
11     "foo"
13     "bar"
23     "snafu" 
```

)，并且在第二次通过时，您会将所有数字减去先前存储的顶部数字并将它们增加 1，对于我们的示例，这将导致以下结果：

```
number data
2      "foo"
4      "bar"
11     "snafu" 
```

使用代码片段中的名称，整个脚本可能如下所示：

```
/* remember the top ID */
SET @max_id = (SELECT MAX(ID) FROM tapp);

/* increment by the top ID */
UPDATE tapp SET id_App = id_App + @max_id;

/* decrement by the top ID and increment by 1 */
UPDATE tapp SET id_App = id_App - @max_id + 1; 
```

# google-analytics - 在 Google Analytics 中，区域设置“c”代表什么？

> ID：10831839
> 
> 赞同：21
> 
> 时间：2012-05-31T10:30:08.713
> 
> 标签：google-analytics, iso

谷歌分析根据用户的语言显示统计数据。

我有访问者的语言环境是`en-us`（英语）、`fr`（法语），还有`c`. 这个`c`语言代码代表什么？

[我在这里](http://en.wikipedia.org/wiki/ISO_639)和[这里](http://en.wikipedia.org/wiki/ISO_3166-1)查看了参考表，但找不到`c`。

提前致谢 ！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T10:32:44.970

您可以指望在所有操作系统上找到的唯一语言环境名称是以下三个标准名称：

*   “C”
    这是标准的 C 语言环境。它提供的属性和行为在 ISO C 标准中指定。当您的程序启动时，它最初默认使用此语言环境。
*   “POSIX”
    这是标准的 POSIX 语言环境。目前，它是标准 C 语言环境的别名。
*   ""
    空名称表示根据环境变量选择语言环境。请参阅[区域设置类别](http://www.gnu.org/software/libc/manual/html_node/Locale-Categories.html#Locale-Categories)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-22T08:17:34.850

就我而言，那是机器人。

网络域是 kimsufi、amazonaws 或未设置....

始终查看相同的页面，并始终引导流量。

如果我是你，我会检查这些其他维度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T10:51:53.597

语言代码由客户端发送给服务器，以便服务器可以根据此返回特定的页面信息（例如翻译的页面）。不过，谷歌分析似乎不会在将这些语言代码添加到图表之前检查它们的有效性。

例如，我的`*30789a483078979530789a5830789a2c307898a4`数据中至少有一种语言代码可见的形式。

进一步分析`c`我网站信息中可见的少数语言代码访问者，似乎他们都来自 Linux OS（或未定义），并且都使用 Safari 或者是从网页获取数据的脚本的一部分（一个在特别是[http://pagepeeker.com](http://pagepeeker.com)）

尽管语言不同，但请求来自世界各地。

总之，我认为发送给 GA 的只是无效数据，可能应该被忽略。

# sharepoint - 自定义 SharePoint 2010 文档集内容类型

> ID：10831845
> 
> 赞同：0
> 
> 时间：2012-05-31T10:30:44.487
> 
> 标签：sharepoint, sharepoint-2010, content-type

我正在处理 Documentset 类型的自定义内容类型。我想设置允许的内容类型，但这不起作用，它只显示默认文档。我阅读了几个博客，但找不到我的解决方案。

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <!-- Parent ContentType: Document Set (0x0120D520) -->
  <ContentType ID="0x0120D520008d2ff418027e4c31b54d155b98596748"
               Overwrite="True"
               Name="Custom Dossier"
               Group="Custom group"
               Description="Custom dossier"
               Inherits="True"
               Version="0">
    <FieldRefs>
            <FieldRef ID="{8D6C094C-3E1F-41f4-BEE3-25B27EE09702}" Name="Dossier_Nummer" DisplayName="Dossiernummer" Required="True"  />
    </FieldRefs>
    <XmlDocuments>
      <XmlDocument NamespaceURI="http://schemas.microsoft.com/office/documentsets/allowedcontenttypes">
        <act:AllowedContentTypes xmlns:act="http://schemas.microsoft.com/office/documentsets/allowedcontenttypes" LastModified="05/31/2012 08:46:56">
          <AllowedContentType id="0x0101" />
          <AllowedContentType id="0x0101000490d50c50624b6ca21c637ef39cd89b" />
        </act:AllowedContentTypes>
      </XmlDocument>
    </XmlDocuments>
  </ContentType>
</Elements> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-27T04:43:41.347

您是否尝试添加文档集模板所需的所有节点？一个很好的例子在这里：[http ://code.msdn.microsoft.com/office/Create-Custom-Document-Set-318393ce/sourcecode?fileId=57420&pathId=1173424883](http://code.msdn.microsoft.com/office/Create-Custom-Document-Set-318393ce/sourcecode?fileId=57420&pathId=1173424883)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:19:01.770

您可以使用[ContentType 绑定元素](http://msdn.microsoft.com/en-us/library/aa543598)将 CT 分配给文档库。

# asp.net - ASP.NET App 传递图像的最佳方式：使用 httphandler 或静态资源

> ID：10831852
> 
> 赞同：3
> 
> 时间：2012-05-31T10:31:12.683
> 
> 标签：asp.net, iis

在我们的网络服务器上，我们希望提供可用于 HTML 元素的 url，用于显示用户个人资料图片。

我可以通过两种方式做到这一点：

*   将图片作为静态资源放在网络服务器上：mysite.com/user1.jpg
*   实现一个 IHttpHandler：mysite.com/images?userid=1

一种方法比另一种方法有什么好处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T10:36:41.217

不通过 ASP.NET 处理图像，而是让 IIS 将它们作为静态内容处理并完全绕过 ASP.NET 管道将是最快的。

除了需要代码之外，实现`HttpHandler`.NET 还需要涉及 ASP.NET 管道——这需要服务器的更多资源。

基本上，如果内容是静态的，就让它是静态的，让 IIS 处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:50:49.640

虽然允许 IIS 处理图像会更容易，但这取决于您是否要在发送文件时对其进行压缩？

某些版本的 IIS 支持 GZIP 压缩，这意味着您可以在 IIS 为它们提供服务时压缩文件，但是，旧版本的 IIS 可能不支持，这意味着如果您需要压缩文件，则必须使用 HTTPHandler 或类似的压缩和为他们服务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T10:55:18.613

让 IIS 处理它们。从处理程序提供图像可能会占用大量资源。除非绝对必要，否则不要这样做。

如果您的站点有很多图像，这意味着 Asp.net 需要处理许多额外的请求。与 IIS 推出静态文件所需的资源相比，Asp.net 每个请求需要更多的资源。

# visual-studio - 关闭 Generate Serialization Assemblies 有什么好处？

> ID：10831854
> 
> 赞同：15
> 
> 时间：2012-05-31T10:31:20.480
> 
> 标签：visual-studio, build, xml-serialization, options

Visual Studio 中的 Generate Serialization Assemblies 选项会在构建我的项目时创建一个 MyAssembly.XmlSerializers.dll。这个问题（[https://stackoverflow.com/questions/934411/what-is-myassembly-xmlserializers-dll-generated-for](https://stackoverflow.com/questions/934411/what-is-myassembly-xmlserializers-dll-generated-for "MyAssembly.XmlSerializers.dll 是为了什么而生成的？")）指出了它首先存在的原因，一些答案提供了打开它的方法关闭，但我的问题是你为什么选择关闭它？在某些情况下打开它是否会导致问题（如果是，这些情况是什么）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-12T12:30:14.363

您可能面临的唯一问题是构建工具 - 例如 msbuild，因为如果您在显式为 x64 的程序集上使用 x32 SDK 中的 sgen，它将引发构建时错误（您可以通过设置正确的 SGenToolPath 路径来轻松克服这个问题 msbuild或以 MSIL 为目标）。恕我直言，最好处理构建时间问题并加快启动时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-20T18:35:52.167

将其关闭会停止由于将应用程序升级到 v4.0 而导致的构建和运行时错误。在尝试了许多在线发布的解决方案后，我遇到了 SGEN 错误。这样做解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-21T00:48:13.517

当我需要签署“ClickOnce”应用程序时，我不得不将其关闭。我无法在 Generate Serialization Assemblies 上成功部署它。清单文件中`MyAssembly.XmlSerializers.dll`有引用，但它不是部署包的一部分。

# objective-c - 滑动自定义UITableViewCell/自定义UITableViewController时内存泄漏

> ID：10831856
> 
> 赞同：1
> 
> 时间：2012-05-31T10:31:33.590
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我在我的 iPhone 4S 上运行我的应用程序，我正在使用自定义表格视图控制器和自定义表格视图单元格，当我将表格视图向上滑动到空白处并同样向下滑动到空白处时，我得到了内存泄漏，请参见附图 [![在此处输入图像描述](../Images/b9d19cc54ee36c271c4a355c1392e1e9.png)](https://i.stack.imgur.com/ybGJg.png)

我似乎无法确定问题出在哪里，或者即使是导致问题的细胞。

我有一个 SeasonTableViewController，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

static NSString *CellIdentifier = @"SeasonTableViewCell";

//SeasonTableViewCell *cell = (SeasonTableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
SeasonTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
NSLog(@"%@",[tableView dequeueReusableCellWithIdentifier:CellIdentifier]);
if(cell==nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"STableView" owner:self options:nil];

    //cell = [[[SeasonTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];

    cell = (SeasonTableViewCell*)[nib objectAtIndex:0];
}

Season *season = [seasonTableArray objectAtIndex:[indexPath row]];

cell.label1.text = [NSString stringWithFormat:@"%@",[season season_title]];

cell.contentView.backgroundColor = [UIColor redColor];

return cell;
} 
```

这是 NSLog@"%@",[tableview dequeResuableCellWithIdentifier:.....] 上 NSLog 的输出；

```
2012-05-31 11:26:10.799 myTVApp[1462:707] (null)
2012-05-31 11:26:10.804 myTVApp[1462:707] (null)
2012-05-31 11:26:10.809 myTVApp[1462:707] (null)
2012-05-31 11:26:10.813 myTVApp[1462:707] (null)
2012-05-31 11:26:10.817 myTVApp[1462:707] (null)
2012-05-31 11:26:11.185 myTVApp[1462:707] <SeasonTableViewCell: 0xfe24da0; baseClass =       UITableViewCell; frame = (0 44; 320 44); autoresize = W; layer = <CALayer: 0xfe24860>>
2012-05-31 11:26:11.187 myTVApp[1462:707] <SeasonTableViewCell: 0xfe25730; baseClass = UITableViewCell; frame = (0 132; 320 44); autoresize = W; layer = <CALayer: 0xfe244a0>>
2012-05-31 11:26:11.189 myTVApp[1462:707] (null)
2012-05-31 11:26:11.191 myTVApp[1462:707] (null)
2012-05-31 11:26:11.194 myTVApp[1462:707] (null) 
```

在上面.. 我有 5 个自定义 SeasonTableViewCells 显示在 myTableView 中，其余的只是正常的白色单元格，其中没有任何内容，

下面是 SeasonTableViewCell，

```
#import "SeasonTableViewCell.h"

@implementation SeasonTableViewCell
@synthesize label1;
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
}
return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
[super setSelected:selected animated:animated];

// Configure the view for the selected state
}  

-(void)dealloc
{
[super dealloc];
[label1 release];
//[label2 release];
} 
```

任何指示帮助表示赞赏，并在此先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:18:00.630

这是最新 iOS 中的一个已知错误。[在开发者论坛上](https://devforums.apple.com/message/630695#630695)查看这个帖子（在帖子底部附近，一位 Apple 员工解释道）。

# c# - 从 html 中删除节点

> ID：10831861
> 
> 赞同：0
> 
> 时间：2012-05-31T10:32:07.780
> 
> 标签：c#, asp.net-mvc-3

我正在使用`HtmlAgilityPack`解析 html 文档，现在当我替换或删除任何子元素时：

```
 string TargetPath = Path.Combine(Server.MapPath("/Views/SaveChange"),
        User.Identity.Name + "Test.cshtml");

        HtmlDocument ndoc = new HtmlDocument();
        ndoc.Load(TargetPath);

        ndoc.DocumentNode.RemoveChild(ndoc.GetElementbyId("id"), false);
        ndoc.save(TargetPath); 
```

这样做后，当我打开我的 Test.cshtml 文件时，所有结束标签都变得未关闭，比如

```
before removing child => <img .. />
after removing child => <img ..> 
```

任何人都可以告诉我这里有什么问题吗？

# c# - 在循环中创建动态名称

> ID：10831862
> 
> 赞同：3
> 
> 时间：2012-05-31T10:32:09.477
> 
> 标签：c#, asp.net, .net

```
for (int i = 0; i < DT1.Rows.Count; i++)
{
    PivotGridField field + i = new PivotGridField();
} 
```

当然，这段代码是行不通的，但是如何使它以这种方式工作，因为我需要创建未知数量的字段。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:34:31.243

您不能即时创建字段（或在本例中为变量）。你*可以*做的是有一个数组/列表/类似：

```
PivotGridField[] fields = new PivotGridField[DT1.Rows.Count];
for (int i = 0; i < DT1.Rows.Count; i++)
{
    fields[i] = new PivotGridField();
} 
```

现在，每当您想要“字段 n”时，请使用`fields[n]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T10:58:23.730

你可以用不同的方式来做。首先，您可以使用 Marc 建议的数组。另一种方法是使用字典：

```
Dictionary<string,PivotGridField> fields = new Dictionary<string, PivotGridField>();
for (int i = 0; i < DT1.Rows.Count; i++)
{
    fields["field"+i] = new PivotGridField();
}

fields["field1"] = ... 
```

第三种方法是使用[`ExpandoObject`](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.DYNAMIC.EXPANDOOBJECT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)：

```
dynamic fields = new ExpandoObject();
for (int i = 0; i < DT1.Rows.Count; i++)
{
    ((IDictionary<String, Object>) fields).Add("field" + i, new PivotGridField());
} 
```

然后，您可以访问您的字段，就好像它们是真正的成员字段一样：

```
fields.field1 = ...
fields.field2 = ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:51:32.993

您可以在 C# 中动态创建字段/属性，但仅限于特定类型的对象。使用[ExpandoObject](http://msdn.microsoft.com/en-us/library/System.Dynamic.ExpandoObject.aspx)，您可以这样做：

```
 ExpandoObject expando = new ExpandoObject();
    IDictionary<string, object> expandoAsDict = expando as IDictionary<string, object>;
    expando.Add("MyTotallyNewProperty", "MyTotallyNewPropertyValue");
    Console.WriteLine(expando.MyTotallyNewProperty); //this will print "MyTotallyNewPropertyValue" 
```

您可以通过继承来自定义动态对象的性质`DynamicObject`。[在此处](http://msdn.microsoft.com/en-us/library/System.Dynamic.DynamicObject.aspx)阅读此内容。

也就是说，在您的情况下，您应该改用其他建议。动态对象应该只在需要时使用，在你的情况下，动态数据结构会很好地完成这个技巧。请记住，仅仅因为“字段”一词出现在规范中，并不意味着您需要使用 C# 的字段概念来实现它。

注意：`DynamicObject`仅存在于 .NET 4.0 或更高版本中。在以前的版本中没有方便的方法来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:34:12.593

不，在 C# 中，您不能动态生成变量的名称。

但是您可以设置各种字段属性的值：

```
for (int i = 0; i < DT1.Rows.Count; i++)
{
    PivotGridField field = new PivotGridField();
    field.Name = "Name " + i;
    grid.Fields.Add(field);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T10:36:18.280

也许您可以改为创建一个 PivotGridField 类型的列表，并在每次迭代时添加到列表中。如果 PivotGridField 的属性之一类似于“名称”，则可以将其设置为“字段”+ i。

# python - 字典列表：get() 应该循环遍历列表

> ID：10831865
> 
> 赞同：0
> 
> 时间：2012-05-31T10:32:32.320
> 
> 标签：python, dictionary

我知道这很容易实现。

我想要一个类字典，它在构造函数中获取字典列表。

如果你从这个字典中按键读取，字典类应该检查字典列表并返回第一个值。如果没有包含这个键 KeyError 应该像普通的字典一样被抛出。

这个字典容器应该仅供我使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:39:42.297

您似乎在描述[`collections.ChainMap`](http://docs.python.org/dev/library/collections.html#collections.ChainMap)，它将出现在 Python 的下一个版本（3.3，预计将在今年晚些时候发布）中。[`collections`对于当前/早期版本的 Python，您可以从源代码](http://hg.python.org/cpython/file/default/Lib/collections/__init__.py)中复制实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:35:12.273

没有真正回答这个问题：如果您只是定义将所有字典合并为一个的方法怎么办？为什么要为它开设新课程？
如何合并：[如何在一个表达式中合并两个 Python 字典？](https://stackoverflow.com/questions/38987/how-can-i-merge-two-python-dictionaries-as-a-single-expression)
Varargs：[可以将可变数量的参数传递给函数吗？](https://stackoverflow.com/questions/919680/python-can-a-variable-number-of-arguments-be-passed-to-a-function)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:37:43.823

您可以使用此逻辑轻松实现这一点。

1.  遍历列表中的所有字典。
2.  `key in value`对于每个字典，通过 using语句查看它是否具有所需的键 。
3.  如果找到值，则从函数返回值。
4.  如果您遍历了所有字典，但未找到值，则引发 KeyError 异常。

# facebook - Facebook：按公司名称搜索人

> ID：10831866
> 
> 赞同：-2
> 
> 时间：2012-05-31T10:32:39.463
> 
> 标签：facebook, api, facebook-graph-api, search

有没有办法使用 Facebook API 按公司名称（工作场所）搜索人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:06:14.590

您可以进行的最接近的搜索是：

`http://graph.facebook.com/search?q={work}&type=user`

不幸的是，您不能直接搜索类型`work`或`employment`通过 Graph API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:53:38.483

有没有办法使用 Facebook API 按公司名称（工作场所）搜索人？

**不，没有任何方法可以按公司名称搜索人员。**

*但是，是的，您可以通过 fql 按公司名称搜索朋友。*

```
select name,work_history from user where uid in (SELECT uid2 FROM friend WHERE uid1=me()) and 'your company name' IN work_history.company_name 
```

# android - 清除默认 Android 应用程序

> ID：10831870
> 
> 赞同：1
> 
> 时间：2012-05-31T10:32:48.950
> 
> 标签：android

我们能否知道用户已为特定操作设置了默认应用程序？即 android.intent.action.CALL_PRIVILEGED

假设我的应用程序还提供了 Call_privilaged 的​​调用操作。但用户已将内置拨号器设置为 Call_privilaged 操作的默认启动器。

我的问题是我可以从程序上知道用户已将拨号器设置为 Call_privalged 操作的默认启动器。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:46:44.120

> 我们能否知道用户已为特定操作设置了默认应用程序？即 android.intent.action.CALL_PRIVILEGED

我不认为有一个简单的方法可以做到这一点。打电话`getPreferredActivities()`，`PackageManager`并筛选`List<IntentFilter>`你回来尝试找到适合你`Intent`可能工作的匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T20:13:18.093

您可以使用`resolveActivity()`Intent 或 PackageManager。

```
Intent intent = ...
ComponentName componentName = intent.resolveActivity(getPackageManager());
if (componentName.getPackageName().equals("android")) {
    // No default selected
    ...
} else if (componentName.getPackageName().equals(getPackageName())) {
    // We are default
    ...
} else {
    // Someone else is default
    ...
} 
```

如果您自己不处理意图，您可能还需要对没有应用程序能够处理意图的情况进行空检查。

不确定这是否适用于所有设备和所有版本的 Android。在 Nexus 设备上的 Android 4.1-4.3 上测试。

# .net - 未来的 MassTransit 流程消息

> ID：10831871
> 
> 赞同：1
> 
> 时间：2012-05-31T10:32:53.617
> 
> 标签：.net, rabbitmq, esb, masstransit

我正在为一个项目评估带有 RabbitMQ 的 MassTransit，我们希望能够将消息的处理延迟到某个时间。

目标如下：

*   一个用户做了一些影响其他用户的事情
*   **一小时后**会向公交车发送一条消息通知受影响的用户
***   用户做更多事情并发送更多通知*   一个小时过去了，然后：
    *   自上次摘要以来已经过去了一个多小时：消息已处理，收集每个用户的所有待处理通知，如果至少有一个，则向他们发送摘要。
    *   距离上次总结不到一小时：消息未处理，又排了一个小时。**

 **问题是可以通知很多事情，所以我们不想立即发送，而是稍后总结。这可以用 MassTransit 和 RabbitMQ 完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T17:27:36.320

我意识到这是一篇旧帖子，但任何想要解决这个问题的人都应该查看[https://github.com/MassTransit/MassTransit-Quartz](https://github.com/MassTransit/MassTransit-Quartz)。

本质上，您发布了一条延迟消息，它应该重新发布到总线上，并且 Quartz 服务（在项目中提供）负责将其持久化到临时存储，然后在时机成熟时将其发布出去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:21:12.137

我认为您希望将其分为两个阶段，以便消息在到达时进行处理，但直到需要时才采取行动。

1.  MassTransit 进程接收消息，并将通知保存在某种数据存储中。

2.  您还有一个汇总过程，它偶尔会运行，查看数据存储以查看未完成的内容，如果距离上次汇总超过一个小时，则将汇总通知发送给用户。

编辑：有可能破解 RabbitMQ 来做到这一点，请参阅[http://www.javacodegeeks.com/2012/04/rabbitmq-scheduled-message-delivery.html](http://www.javacodegeeks.com/2012/04/rabbitmq-scheduled-message-delivery.html)**

# properties - 使用推土机映射不同包中bean的属性

> ID：10831880
> 
> 赞同：0
> 
> 时间：2012-05-31T10:33:09.263
> 
> 标签：properties, javabeans, packages, dozer

我正在尝试使用推土机映射位于不同包中的bean的属性，例如：

```
<mapping> 
 <class-a>com.naeem.schema.basictypes.Birth</class-a> 
 <class-b>com.naeem.schema.forms.n840.DateStore</class-b> 
  <field>
   <a>countryOfBirth</a>
   <b>countryOfBirth</b> 
 </field> 
</mapping> 
```

这在推土机中可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:31:32.890

是的，它可以在推土机中使用。默认情况下，dozer 会将源对象中的所有属性映射到目标对象中的同名属性。所以在你的情况下，这两个类都有一个同名的属性 **countryOfBirth** 。所以你甚至不必编写映射文件。以下就足够了：

```
DozerMapper mapper = new DozerMapper();
Birth birth = new Birth();
//set different fields of birth object
DateStore dateStore =  new DateStore();
mapper.map(birth,dateStore); 
```

或者，或者，

```
DozerMapper mapper = new DozerMapper();
Birth birth = new Birth();
//set different fields of birth object
DateStore dateStore =  mapper.map(birth,DateStore.class); 
```

# python - Matplotlib 绘图未在 sublimetext 中显示

> ID：10831882
> 
> 赞同：18
> 
> 时间：2012-05-31T10:33:12.287
> 
> 标签：python, matplotlib, sublimetext2

我最近开始使用 sublimetext 2，但是我今天注意到该`plt.show()`函数在 sublimetext 中运行时似乎不起作用。

例如，如果我创建以下脚本：

```
import matplotlib.pyplot as plt
plt.plot([1,2,3,4])
plt.show() 
```

使用 IDLE 运行它会生成一个绘图，但是使用 sublimetext 不会生成任何输出。它只是一直在“思考”，直到我结束 python.exe 进程，然后输出 [Finished]。

我是否误解了 sublimetext 的使用方式？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-17T23:06:52.687

更合适的方法是在默认的 Python 构建系统文件中添加一行：

```
"shell": true 
```

或者使用以下命令制作额外的 Python 构建系统：

```
{
    "cmd": ["python", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python",
    "shell": true
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-31T11:23:17.130

我的猜测是 Sublime Text 2 在它自己的环境中启动你的代码，并且只捕获和显示控制台输出。使用 GUI 时也存在同样的问题，例如 wxPython。

另一种解决方法是打开命令提示符并手动启动它（python file.py）。

**编辑：** [这里](http://sublimetext.info/docs/en/reference/build_systems.html)声明“在 Windows 下，GUI 被抑制”。

**编辑2：** [这里](http://ptomato.wordpress.com/2012/02/09/geek-tip-running-python-guis-in-sublime-text-2/)它列出了一种修复它的方法，就在页面的底部。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-09-03T05:07:46.783

我按照上面的建议尝试了theta的答案。它工作正常。如果控制台像直接从文件资源管理器中运行 python 文件一样立即打开和关闭，只需在末尾添加以下行：

```
matplotlib.pyplot.show('hold') 
```

这是我第一次在这里回答。对不起，如果我没有遵守答案格式。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-12-24T12:57:04.923

sublime text 3中的注释（安装了anaconda包）

如 theta 所说，您需要通过以下方式添加自定义构建系统：

首先在其中添加一个名为 python 的文件夹`\path\to\Sublime Text Build XXXX\Data\Packages`

然后将一个名为的文件`python.sublime-build`放入该文件夹中。

```
{
    "cmd": ["python", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python",
    "shell": true
} 
```

并记得`plt.show()`像 Roald 所说的那样添加。

```
plt.imshow(image)
plt.show() 
```

演示：

[![在此处输入图像描述](../Images/81195e921314ddf79d20b48426415edf.png)](https://i.stack.imgur.com/uDPgd.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-15T20:15:14.407

我在 Ubuntu 下也有类似的问题。我试图绘制`pandas` `DataFrame`这样的图：

```
df = pandas.DataFrame([*range(5)])
df.plot() 
```

但是剧情没有显示。事实证明你需要这样做，正如[这里](https://stackoverflow.com/questions/34347145/pandas-plot-doesnt-show)`plt.show()`所讨论的。

# iphone - 拖动时为 UIView 设置动画

> ID：10831884
> 
> 赞同：0
> 
> 时间：2012-05-31T10:33:31.723
> 
> 标签：iphone, ios, animation, uiview, uipangesturerecognizer

我正在尝试在用户开始拖动 UIView 时为其展开动画，并在他们停止拖动时为其折叠动画。在 iOS5 中，这似乎可以工作，虽然并不完美 - 视图在展开时动画移动到当前手指位置（因此滞后），但在展开动画完成时工作正常。

在 iOS4 中它只是被破坏了 - 视图动画扩展，但在动画完成之前根本不会用用户的手指移动。

我能做些什么？

```
- (void)gestureRecognizerMoved:(id)sender
{
    [self.view bringSubviewToFront:[(UIPanGestureRecognizer*)sender view]];
    CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];
    NSLog(@"translated x %f y %f", translatedPoint.x, translatedPoint.y);

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan)
        {
        firstX = [sender view].center.x;
        firstY = [sender view].center.y;

        NSLog(@"first x %f y %f", firstX, firstY);
    }

    translatedPoint = CGPointMake([sender view].center.x, firstY+translatedPoint.y);
    [[sender view] setCenter:translatedPoint];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan)
    {
        [UIView animateWithDuration:0.8f animations:^(void)
         {
             CGRect frame = [sender view].frame;
             frame.size.width += 200.0f;
             [sender view].frame = frame;
         }];
    }

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded)
    {
        [UIView animateWithDuration:0.8f animations:^(void)
         {
             CGRect frame = [sender view].frame;
             frame.size.width -= 200.0f;
             [sender view].frame = frame;
         }];
    }
} 
```

编辑：使用 Core Graphics 仿射变换来调整视图大小（例如 CGAffineTransformMakeScale）而不是修改视图的框架摆脱了 iOS5 中的滞后，所以现在即使在动画期间它也会坚持用户的手指按压，而不是动画到按压位置， 完美的！但是在iOS4中仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:08:20.317

您可能应该包括`UIViewAnimationOptionBeginFromCurrentState`在您的动画选项中。

编辑：

您应该使用`UIViewAnimationOptionBeginFromCurrentState`，因为您的手势可以在动画结束之前结束。

改变视图`center`只是改变视图的另一种方式`frame`。这两个属性更改相同的数据。如果您正在为`frame`大小设置动画，然后直接通过`center`（覆盖动画所做的）更改帧，您将无法获得所需的内容。

我看到的最简单的解决方案是将您的视图放入透明容器中并更改容器的位置，同时视图仍然可以为其大小设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:35:44.750

尝试使用 UIViewAnimationOptionAllowUserInteraction 选项，它应该可以工作:)

# php - 如何使用用户名/密码（php）获取foursquare访问令牌？

> ID：10831886
> 
> 赞同：0
> 
> 时间：2012-05-31T10:33:48.603
> 
> 标签：php, oauth, foursquare

我正在开发一个社交中心页面，该页面汇总了来自所有社交网络的信息。目前我正在尝试从一个特定的四方场地获取信息。

为了获得我想要的信息，我必须使用访问令牌并因此对我的用户进行身份验证。在我的情况下，这将始终是相同的（我自己的）用户。

有没有办法使用我的用户名/密码获取访问令牌**而无需**重定向到身份验证页面？

到目前为止我在这里找不到任何答案，感谢您的帮助！

**更新：我刚刚在**[http://de.puma.com/creativefactory](http://de.puma.com/creativefactory) 上发现了我想要实现的东西——如果你向下滚动，你可以在右下角看到四方信息，这正是我想要的：显示有多少用户检查了进入我的场地和最后登记入住的人。他们是怎么做到的，不需要身份验证对话？再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:35:32.540

不幸的是，出于安全原因，这是明确不允许的。尽管在您的情况下看起来很安全，但我们通常不希望在 OAuth 不必要时支持处理我们用户密码的第 3 方应用程序。这与许多其他大型社交网络所采用的策略相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T03:49:11.577

如果您只是在寻找场地信息（例如，只是关于场地的信息而不是任何用户信息），那么您不需要授权用户。只能使用您的客户端 ID 和客户端密码访问场所 API。请参阅[Foursquare API 文档。](https://developer.foursquare.com/overview/auth#userless).

> 我们的一些与特定用户信息不相关的端点（例如场所搜索）启用了无用户访问（这意味着您无需让用户授权您的应用程序即可访问）。要发出无用户请求，请在请求 URL 中指定您的使用者密钥的客户端 ID 和机密，而不是身份验证令牌。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T13:05:49.787

您应该能够在没有用户授权的情况下获得所需的信息。

只需创建一个应用程序，您将获得一个客户端 ID 和客户端密码，然后您可以使用它们来访问 API。

这是所需的场地 API 字符串格式：

[https://api.foursquare.com/v2/venues/[VENUE_ID]?client_id=[CLIENT_ID]&client_secret=[CLIENT_SECRET]&v=20120101](https://api.foursquare.com/v2/venues/[VENUE_ID]?client_id=[CLIENT_ID]&client_secret=[CLIENT_SECRET]&v=20120101)

在返回的 json 中，您应该找到：

```
"hereNow":{"count":x,"summary":"x people here","groups":[]} 
```

# blackberry - 如何从第三方应用程序以编程方式关闭本机黑莓应用程序？

> ID：10831887
> 
> 赞同：2
> 
> 时间：2012-05-31T10:33:52.120
> 
> 标签：blackberry, java-me

我想开发一个应用程序，该应用程序可以在打开应用程序时“阻止调用某些黑莓本机应用程序”。

我的问题是，如何通过其他第三方应用程序的后台线程关闭任何本机应用程序？我试图传递“Escape”键事件，但它没有通过第三方应用程序的线程传递给本机应用程序。

有什么方法可以获取本机应用程序的菜单（从其他应用程序的后台线程）以执行该本机应用程序的“关闭”命令？

我已经尝试过来自 Blackberry 应用程序世界的 Mr. Safe 的免费版本。它成功阻止选定的应用程序。你可以在这里看到它：[http ://appworld.blackberry.com/webstore/content/63110/?lang=en](http://appworld.blackberry.com/webstore/content/63110/?lang=en)

所以我确信必须有一种方法可以从另一个第三方应用程序中关闭本机应用程序，但不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:55:46.273

我已经解决了我的问题 -
我的解决方案在 supportforums.blackberry.com 上给出 -[解决方案](http://supportforums.blackberry.com/t5/Java-Development/global-event-listener-is-not-called-instantly-and-properly-on/m-p/1741225#M200533)。

或者你可以直接进入主线程——[主线程从这里开始](http://supportforums.blackberry.com/t5/Java-Development/global-event-listener-is-not-called-instantly-and-properly-on/m-p/1730073)。

# multithreading - 如何在 gtk 中将小部件加载为不同的线程？（瓦拉）

> ID：10831889
> 
> 赞同：0
> 
> 时间：2012-05-31T10:34:07.127
> 
> 标签：multithreading, gtk, vala

我创建了这个类，并且出于效率原因，我想将缩略图作为不同的线程加载到 iconview 中，因为如果我在同一个线程中执行，gui 加载非常慢。但是当我创建线程时，它不起作用，它绘制了一些缩略图然后它们消失了。当我使用加入时，它可以工作。这是我的代码：

```
 public class FotoThumbnailPane : Gtk.ScrolledWindow{

private FotoThumbnailPane_i pane;   
private string namet;

public FotoThumbnailPane(string name){
    this.namet = name;
}

public void set_imagelist(fileutils.ImageList image_list){
    pane = new FotoThumbnailPane_i(image_list);
    this.add (pane);
    this.set_min_content_width(140);
    this.show_all();
}

    //This is my threaded function
    public void* load_thumbs(){

    pane.set_visible(false);
    pane.newmodel = new Gtk.ListStore (2, typeof (Gdk.Pixbuf), typeof (string));
    pane.set_selection_mode (Gtk.SelectionMode.SINGLE);
    pane.set_pixbuf_column (0);
    pane.set_model(pane.newmodel);

    string icon_style = """
            .thumbnail-view {
                background-color: #FFFFFF;
            }
            .thumbnail-view:selected {
                background-color: #9D9D9D;
                border-color: shade (mix (rgb (34, 255, 120), #fff, 0.5), 0.9);
            }
        """;

    var icon_view_style = new Gtk.CssProvider ();

        try {
            icon_view_style.load_from_data (icon_style, -1);
        } catch (Error e) {
            warning (e.message);
        }
        pane.get_style_context ().add_class ("thumbnail-view");
    pane.get_style_context ().add_provider (icon_view_style, Gtk.STYLE_PROVIDER_PRIORITY_THEME);

    //Add thumbnails to the iconview
    string buff;
    for(int i=1; i<pane.image_list.size; i++){
    buff = pane.image_list.get_full_filename(i);
    stdout.printf("Added %s to thumbnail\n", buff);
            var image = new Gdk.Pixbuf.from_file_at_scale(buff, 110, 80, false);
            // Add the wallpaper name and thumbnail to the IconView
            Gtk.TreeIter root;
            pane.newmodel.append(out root);
            pane.newmodel.set(root, 0, image, -1);
            pane.newmodel.set(root, 1, pane.image_list.get_filename(i), -1);

            // Select the thumbnail if it is the first in list
            if (i==0) {
                pane.select_path (pane.newmodel.get_path (root));
            }    
            pane.iters.append (root);
    }
    pane.set_sensitive(true);
    this.queue_draw();
return null;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:12:12.197

您实际上不需要处理程序中的线程——您可以使用[异步方法](https://live.gnome.org/Vala/Tutorial#Asynchronous_Methods)来加载内容。具体来说，[Gdk.Pixbuf.new_from_stream_at_scale_async](http://valadoc.org/gdk-pixbuf-2.0/Gdk.Pixbuf.new_from_stream_at_scale_async.html)。

这是一个例子：

```
public async void load (Gtk.Image img, string filename) {
  GLib.File file = GLib.File.new_for_commandline_arg (filename);
  try {
    GLib.InputStream stream = yield file.read_async ();
    Gdk.Pixbuf pixbuf = yield Gdk.Pixbuf.new_from_stream_at_scale_async (stream, 320, -1, true);
    img.set_from_pixbuf (pixbuf);
  } catch ( GLib.Error e ) {
    GLib.error (e.message);
  }
}

private static int main (string[] args) {
  GLib.return_val_if_fail (args.length > 1, -1);

  Gtk.init (ref args);

  Gtk.Window win = new Gtk.Window ();
  win.destroy.connect (() => {
      Gtk.main_quit ();
    });

  Gtk.Image image = new Gtk.Image ();
  win.add (image);

  load.begin (image, args[1], (obj, async_res) => {
      GLib.debug ("Finished loading.");
    });

  win.show_all ();

  Gtk.main ();

  return 0;
} 
```

# javascript - 为什么这个 JavaScript 会吃掉我所有的记忆？

> ID：10831899
> 
> 赞同：0
> 
> 时间：2012-05-31T10:34:35.223
> 
> 标签：javascript, memory-leaks

所以我有一个小的 javascript 应用程序，它每分钟（或其他）从服务器接收一对数字，并且在一分钟的过程中，它每秒（或其他）更新一个 div，以便 div 中显示的值逐渐从第一个值到第二个。它很短，我将在问题底部发布代码。

该函数包含两个子函数 - 其中一个执行 ajax 调用以更新两个值，其中一个使用两个值之间的某个值更新 div 内容。ajax 函数在收到服务器响应时使用 setInterval 来安排 div 更新函数，当 div 更新函数检测到需要更新这两个值时，它会清除设置的间隔并调用 ajax 函数。因此，这两个函数永远互相调用。

我在外部函数中声明了两个子函数使用的每个变量，因此两个子函数都不会创建任何新变量，并且无论如何都允许两个子函数每次都完全完成（感谢 ajax 函数中的 setInterval）。

内存使用量几乎每秒都在增加，这必须是每次调用 doDivRefresh 时，但我不明白每次调用它时它对新内存的作用 - 它不会创建任何变量。

帮助！

```
/**
 * 
 * Periodically gets the latest values for a stat and changes the contents of a
 * div so that is ticks up from the previous value to the latest value
 * 
 * @param divID
 *            The id of the div to update
 * @param URL
 *            The URL that provides the values
 * @param updateDivFrequency
 *            How often the value displayed in the div is updated, in
 *            miliseconds
 * @param updateDataFrequency
 *            How often the underlying data is updated from the server, in
 *            seconds
 * 
 */
function updateStatOverPeriod(divID, URL, updateDivFrequency, updateDataFrequency)
{
    var somethingDoer = new function()
    {
    };
    var request = new XMLHttpRequest();
    var currentValue = "";
    var previousValue = "";
    var latestValue = "";
    var it = 0;
    var currentTime = new Date();
    var endTime = new Date().getTime();

    function doDivRefresh(endTime)
    {
        if (currentValue != null)
        {
            currentValue = currentValue + it;
            document.getElementById(divID).innerHTML = addCommas(parseInt(currentValue));
        }
        else
        {
            document.getElementById(divID).innerHTML = "<DIV CLASS=\"error_message\">No data</DIV>";
        }
        // If it's time to refresh the data end this loop and call the starting
        // off method again
        currentTime = new Date();
        if (currentTime.getTime() >= endTime)
        {
            clearInterval(somethingDoer);
            doAJAX();
        }
    }

    function doAJAX()
    {
        // If browser supports javascript
        if (window.XMLHttpRequest)
        {
            // Connect to the server and get the new pair of values
            request = new XMLHttpRequest();
            request.open('get', URL);
            request.onreadystatechange = function()
            {
                // Once...
                if (request.readyState == 4)
                {
                    // we've got...
                    if (request.status == 200)
                    {
                        // the response
                        if (request.responseText)
                        {
                            // Parse the response and work out our iterator
                            previousValue = parseFloat(request.responseText.split("&")[0]);
                            latestValue = parseFloat(request.responseText.split("&")[1]);
                            if ((previousValue == 0) || (latestValue == 0))
                            {
                                it = parseFloat('0.00');
                            }
                            else
                            {
                                it = parseFloat((latestValue - previousValue) / (updateDataFrequency / updateDivFrequency));
                            }
                            // Set up the doRefreshDiv function in a loop that
                            // will exit and re-call this function
                            // once updateDataFrequency has elapsed
                            currentValue = previousValue;
                            endTime = new Date().getTime() + updateDataFrequency;
                            doDivRefresh(endTime);
                            somethingDoer = setInterval(function()
                            {
                                doDivRefresh(endTime);
                            }, updateDivFrequency);
                            alert("end of ajax response function()");
                        }
                        else
                        {
                            document.getElementById(divName).innerHTML = "<DIV CLASS=\"error_message\">Error - no data received from server</DIV>";
                        }
                    }
                    else
                    {
                        document.getElementById(divName).innerHTML = "<DIV CLASS=\"error_message\">Error - server returned " + request.status + "</DIV>";
                    }
                }
            };
            request.send(null);
        }
        else
        {
            console.error("No window.XMLHttpRequest, does this browser support AJAX?");
        }
        alert("end of doAJAX()");
    }

    // Start
    updateDataFrequency = updateDataFrequency * 1000;
    doAJAX();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:53:29.463

这些是根据[jslint.com](http://www.jslint.com/)更正的前四行：

```
function updateStatOverPeriod(divID, URL, updateDivFrequency, updateDataFrequency) {
    "use strict";
    var somethingDoer = function() {};
    var request = new XMLHttpRequest(); 
```

将您的代码粘贴到那里并检查常见的 JS 错误。看来这段代码要么是从其他语言转换为 JavaScript，要么是不熟悉 JavaScript 的人......

请参阅我的答案[javascript memory leak](https://stackoverflow.com/questions/2989279/javascript-memory-leak/2989314#2989314)以处理内存泄漏。我仍然认为[Drip](http://www.outofhanwell.com/ieleak/Drip-0.5.exe)是一个非常好的发现和理解内存泄漏的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:19:44.213

我同意这`new Date()`总是代价高昂。现在在这里，您只希望执行此代码以定期刷新值，您可以使用`setTimeout("doAJAX()",2000);`并且可以指定以毫秒为单位的间隔，而不是使用日期函数检查它。这应该会有所帮助，在另一种情况下，如果您有兴趣，您可以很好地使用 jquery.Ajax，因为在那里您将能够专注于您感兴趣的领域，而不是`XMLHttpRequest`自己处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:54:52.797

[拍头]

感谢您的回答，但真正的问题是调用脚本的元素中的拼写错误。由于 / 我打算放 * 的地方，脚本大约每毫秒调用一次，而不是按预期每分钟调用一次！

# vba - 如何使用 Google Earth API 截取彩色屏幕截图？

> ID：10831900
> 
> 赞同：0
> 
> 时间：2012-05-31T10:34:39.320
> 
> 标签：vba, google-earth

我在 Excel VBA 中使用 Google Earth API。屏幕截图是黑白的，而不是彩色的。请建议我在哪里做错了？

```
Dim ge As earthlib.ApplicationGE

Set ge = New ApplicationGE

Dim kmlString As Variant

kmlString = "C:\temp\test.kmz"

ge.OpenKmlFile (kmlString, 1)

Dim tPlace As earthlib.FeatureGE

Set tPlace = ge.GetTemporaryPlaces

Dim fldrPath As String, jpgName as String

fldrPath = "C:\temp\"

jpgName = fldrPath & "outJpg1.JPG"

ge.SaveScreenShot (jpgName, 100) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:19:32.763

[我在本文档](http://codeassemble.googlecode.com/svn/uCam/trunk/GoogleEarthDemo/earth.idl)中找到的评论表明这是设计使然。不过，我还没有找到任何建议该怎么做的东西。

> ```
> /// \brief Takes low quality black and white screen shot
> /// of the current camera view.
> ///
> /// This image is not meant to  be used for rapid capture and degrades
> /// in quality if used frequently.
> ///
> /// \param fileName Full path JPG filename of output screen shot.
> /// \param quality Quality factor of output image. Lowest quality is
> /// \c 0 and highest quality is \c 100\. Input quality is always clamped
> /// to (\c 0, \c 100) inclusive.
> ///
> /// \retval S_OK Successfully saved screen shot.
> /// \retval (other) Appropriate error code.
> [id(5), helpstring("method SaveScreenShot")]
> HRESULT SaveScreenShot([in] BSTR fileName, [in] long quality); 
> ```

# php - 如何在滑块中显示视频

> ID：10831901
> 
> 赞同：2
> 
> 时间：2012-05-31T10:34:40.453
> 
> 标签：php, javascript, jquery, iframe, jwplayer

我正在使用 Galleria 滑块作为 jquery 滑块和 jwplayer 来显示视频。问题是它没有在滑块中显示 jwplayer，它只显示一个黑色方块。我让它适用于图像，但不能让它适用于视频播放器 jwplayer。知道如何执行此操作的人可以修改下面的代码以使其在我的应用程序中运行吗？

画廊： http: [//galleria.io/docs/](http://galleria.io/docs/)

jwplayer：[http ://www.longtailvideo.com/jw-player/](http://www.longtailvideo.com/jw-player/)

```
<?php if(count($arrVideoFile[$key]) > 1){ ?>
    <style>
        #galleriavideo_<?php echo $key; ?>{ width: 500px; height: 300px; background: #000 }
    </style>
    <div id="galleriavideo_<?php echo $key; ?>">
        <?php foreach ($arrVideoFile[$key] as $v) { ?>
            <div id="myElement-<?php echo $key.'-'.$i; ?>">Loading the player...
                <script type="text/javascript">
                    jwplayer("myElement-<?php echo $key.'-'.$i; ?>").setup({
                        file: "<?php echo 'VideoFiles/'.$v; ?>",
                        width: 480,
                        height: 270
                    });
                    <?php $i++; ?>
                </script> 
            </div>
        <?php } ?>
    </div>      
    <script type="text/javascript">
        Galleria.loadTheme('jquery/classic/galleria.classic.min.js');
        Galleria.run('#galleriavideo_<?php echo $key; ?>');  
    </script>   
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T00:41:31.260

有点奇怪，另一位用户在这里发布了一个非常相似的问题：[使用 iframe时遇到问题](https://stackoverflow.com/questions/14883914/having-trouble-using-iframes)

无论如何，我会尝试在您的代码附近发布一个解决方案。我想您想要**一个带有多个视频的滑块**。

您需要两个文件：`video.php`，根据特定文件名显示视频`gallery.php`的页面和 ，包含滑块的页面。

`video.php`：

```
<?php
    $v = filter_input(INPUT_GET, "v", FILTER_SANITIZE_STRING);
?>

<div id="container"></div>
<script type="text/javascript" src="/path/to/jwplayer.js"></script>
<script type="text/javascript">
    jwplayer("container").setup({
        file: "VideoFiles/<?php echo $v; ?>",
        width: 480,
        height: 270
    });
</script> 
```

`gallery.php`：

```
<?php if(count($arrVideoFile[$key]) > 1){ ?>

     <div id="galleriavideo" style="width:500px; height:300px; background:#000;">
         <?php
             foreach($arrVideoFile[$key] as $v) { 
                 $vurl = "/path/to/video.php?v=".rawurlencode($v);?>
                 <a href="<?php echo $vurl; ?>"><img class="iframe"></a>
         <?php } ?> 
     </div>

    <script type="text/javascript" src="/path/to/jquery.js"></script>
    <script type="text/javascript" src="/path/to/galleria.js"></script>
    <script type="text/javascript">
        Galleria.loadTheme('/path/to/galleria.classic.min.js');
        Galleria.run('#galleriavideo');
    </script>

<?php } ?> 
```

# java - Java Swing 自动显示组合框弹出

> ID：10831902
> 
> 赞同：0
> 
> 时间：2012-05-31T10:34:41.163
> 
> 标签：java, swing, jython

我正在尝试使用自定义组合框作为表中列的编辑器。为此，我添加了一个自定义编辑器（我根据行填充组合框）。我希望在首次显示编辑器时打开组合框（显示下拉菜单）。

我添加了一个层次结构更改侦听器，如下所示（我用 Jython 编写，但将 Java 转换为 Jython 非常简单，反之亦然）：

```
class _comboboxShow(HierarchyListener):
    def hierarchyChanged(self, event):
        if event.changeFlags & HierarchyEvent.SHOWING_CHANGED and \
           event.component.isShowing():
                event.component.showPopup() 
```

但是我只看到短暂的闪烁，这意味着弹出窗口似乎已打开，然后立即再次关闭。我如何保持它在屏幕上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:46:00.903

添加一个 FocusListener 而不是

```
class _comboboxShow(FocusAdapter):
    def focusGained(self, event):
        event.component.showPopup() 
```

帮助。我猜重新聚焦关闭了弹出窗口？

# dialog - fb请求对话框出现在窗口外

> ID：10831903
> 
> 赞同：1
> 
> 时间：2012-05-31T10:34:44.860
> 
> 标签：dialog, request, facebook-canvas

我正在寻求帮助，我们的应用程序中有一个请求对话框，但它部分显示在屏幕之外，因此它在右侧被裁剪了一点。

我们想让它居中，这样它就不会被裁剪。请问有人知道如何解决吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:41:35.557

我有同样的问题。我不确定如何定位对话框本身。恕我直言，它也可能取决于点击事件的位置。无论如何，我发现了用 JavaScript 修复它的丑陋但功能强大的方法：

```
setInterval("$('.fb_dialog').css('left', '0');", 1500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:01:51.033

对话框本身无法重新定位。

您是否有机会在代码中使用 iframe？

尝试将 CSS 文件中的宽度更改为更小的宽度，看看是否有区别。请求对话框通常通过检测页面/框架的大小将自己定位在页面的中间。

# sql - Oracle SQL - 子查询

> ID：10831906
> 
> 赞同：-1
> 
> 时间：2012-05-31T10:34:53.203
> 
> 标签：sql, oracle, oracle11g

我在 EM 做报告，我需要在这里弄清楚

我有这个查询：

```
SELECT
*
FROM
(
    SELECT DISTINCT
    patch.host as "PHost",
    patch.home_location as "PDirectory",
    patch.home_name as "PHome",
    MAX(patch.INSTALLATION_TIME) as "Patched (Date)",
    MAX(patch.PATCH_RELEASE) as "PVersion",
    listagg(patch,',') WITHIN GROUP (ORDER BY patch) "Patches"
    FROM
    mgmt$applied_patches patch
    GROUP BY patch.host, patch.home_location,patch.home_name
    ORDER BY patch.host, patch.home_location
) "PCH",
(
    SELECT DISTINCT 
    T1.PROPERTY_VALUE as "MHost",
    T2.PROPERTY_VALUE as "MDirectory",
    T3.PROPERTY_VALUE as "MVersion",
    count(T4.PROPERTY_VALUE) as "Count of SID",
    listagg(T4.PROPERTY_VALUE,',') WITHIN GROUP (ORDER BY T4.PROPERTY_VALUE) as "SID"
    FROM
    MGMT$TARGET_PROPERTIES T1,
    MGMT$TARGET_PROPERTIES T2,
    MGMT$TARGET_PROPERTIES T3,
    MGMT$TARGET_PROPERTIES T4
    WHERE
    T1.TARGET_GUID = T2.TARGET_GUID
    and T1.TARGET_GUID = T3.TARGET_GUID
    and T1.TARGET_GUID = T4.TARGET_GUID
    and T1.PROPERTY_NAME = 'MachineName'
    and T2.PROPERTY_NAME = 'OracleHome'
    and T3.PROPERTY_NAME = 'Version'
    and T4.PROPERTY_NAME = 'SID'
    GROUP BY T1.PROPERTY_VALUE, T2.PROPERTY_VALUE, T3.PROPERTY_VALUE
) "MGM"
WHERE
PDirectory = MDirectory 
```

我收到错误 ORA-00904: "MDIRECTORY":....

我尝试了很多组合！(PCH.PDirectory = MGM.MDirectory, ......) 没有任何效果

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:43:09.153

Oracle 中的混合大小写名称令人讨厌，而您刚刚被它们咬了。

采用：

```
"PDirectory" = "MDirectory" 
```

.. 或者最好不要使用需要引用的特殊名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:43:13.777

好...

这不起作用：

```
SELECT * FROM
(SELECT DUMMY AS  "PDirectory" FROM DUAL) "PCH",
(SELECT DUMMY AS  "MDirectory" FROM DUAL) "MGR"
WHERE PDIRECTORY = MDIRECTORY 
```

但这有效：

```
SELECT * FROM
(SELECT DUMMY AS  "PDirectory" FROM DUAL) "PCH",
(SELECT DUMMY AS  "MDirectory" FROM DUAL) "MGR"
where "PCH"."PDirectory" = "MGR"."MDirectory" 
```

相应地更改您的查询。

# xmpp - 使用 XMPP - PEP/PubSub 获取传感器读数

> ID：10831907
> 
> 赞同：3
> 
> 时间：2012-05-31T10:34:53.330
> 
> 标签：xmpp, publish-subscribe

我计划为我正在进行的项目设置一些传感器。我计划在每个托管传感器的设备上使用一个简单的 xmpp 客户端，并通过 PEP/PubSub 发布读数。

我想运行一个程序，在收到来自传感器客户端的推送通知时动态显示此传感器数据。

我打算根据传感器位置的需要在具有 100Mbs 连接和多个 WIFI AP 的 LAN 上进行通信。

XMPP 是一个不错的后端选择吗？

如果 100 个设备运行 6-24 个传感器，每个设备每 15-30 秒更新一次，这是否可以很好地扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:37:28.390

XMPP 肯定能够处理这个用例，并且基于您所展示的一小部分需求，它似乎很合适。我假设传感器数据是少量的文本信息。

从我所见，我不会使用 PEP，只是直接使用单个节点的 pubsub 来让所有传感器发布到。非常简单。

我认为任何 XMPP 服务器都应该能够轻松处理该负载。我知道我能够在大约 5 分钟内将 800,000-1,000,000 个项目发布到[Openfire](http://www.igniterealtime.org/projects/openfire/index.jsp)中的持久节点（3.7.2 alpha 版本）。非持久节点可能会做得更好。

# sql - 包含运算符的 SQL 条件语句

> ID：10831909
> 
> 赞同：0
> 
> 时间：2012-05-31T10:35:01.180
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我将参数传递给存储过程。一个参数是 a `varchar(50)`，它可以是字符串，例如`" > 5000"`and `" <= 10000"`。

这是一些代码：

```
....
....
@colourid int = 0,
@regionid int = 0,
@sellingPrice varchar(50) = '-1'
AS
SELECT
....
....
WHERE
(dbo.tbl_Listings.fld_ColourID = CASE WHEN @colourid = 0 THEN dbo.tbl_Listings.fld_ColourID ELSE @colourid END)
AND (dbo.tbl_Listings.fld_RegionID = CASE WHEN @regionid = 0 THEN dbo.tbl_Listings.fld_RegionID ELSE @regionid END)
AND 
```

如何添加`@sellingPrice`到 WHERE？我无法模仿它是如何为 int 参数完成的，因为它并不总是会使用`=`. 我需要说“如果售价不是 -1，那么 fld_SellingPrice @ sellPrice”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:32:23.303

我会使用 from 和 to 变量。所以当你想要小于 5000 时，你设置为 variable = 5000 并留空

```
....
....
@colourid int = 0,
@regionid int = 0,
@fromsellingprice int = 5000
@tosellingprice int = null
AS
SELECT
....
....
WHERE
(dbo.tbl_Listings.fld_ColourID = CASE WHEN @colourid = 0 THEN dbo.tbl_Listings.fld_ColourID ELSE @colourid END)
AND (dbo.tbl_Listings.fld_RegionID = CASE WHEN @regionid = 0 THEN dbo.tbl_Listings.fld_RegionID ELSE @regionid END)
AND
sellingPrice >= coalesce(@fromsellingprice, sellingprice)
and sellingPrice <= coalesce(@tosellingprice, sellingprice) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:46:53.137

如果您知道要使用一组通用的比较，我会在您的 SP 中为每个比较创建一个参数并根据需要使用它们。所以你的 SP 可能有

```
 @greaterThan int,
 @lessThan int,
 @equalTo int 
```

然后在SP中你可以做

```
if @greaterThan IS NULL
    SELECT @greaterThan = MAX(field) FROM table -- or some arbitrary value that will always evaluate to true
if @lessThan IS NULL
    SELECT @lessThan = MIN(field) FROM table 
```

然后只需在 WHERE 子句中使用它们。否则，如发布的那样，您将不得不通过使用 WHERE 子句的片段构建 SQL 字符串来执行动态 SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:43:20.013

实现这一目标的唯一方法是使用动态 SQL，在局部变量中构建查询，然后通过 (preferably) 执行它`sp_executesql`。

所以像

```
DECLARE @sql nvarchar(MAX)

SET @sql = 'SELECT .... WHERE ' + @sellingPrice

sp_executesql @sql 
```

但是，这确实让您了解 SQL 注入的可能性，因此您必须要么

一个。确保该过程只会由您完全信任的调用者调用
b. 在程序中为格式错误的参数添加保护，这比听起来要困难得多
c. 找到一种完全解决问题的不同方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:42:38.453

您不能直接在 SQL 中执行此操作 - 参数不会被解析和解释为带有谓词的查询的一部分。

做到这一点的唯一方法（传入运算符）是使用[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)，它有自己的缺陷。

您可以考虑为要使用的运算符传递一个参数，并为每个支持的参数设置一堆`if`部分 - 这可能比动态 SQL 更糟糕。

# magento - 在 phtml 中显示静态块

> ID：10831910
> 
> 赞同：0
> 
> 时间：2012-05-31T10:35:02.803
> 
> 标签：magento, checkout, block

我想直接在模板中显示一个静态块。我知道我可以这样做：

```
$this->getLayout()->createBlock('cms/block')->setBlockId(6)->toHtml(); 
```

这调用了 ID 为 6 的静态块。但是这个块需要参数 product_id="product/1"。

我需要的：

```
<block type="test/test" product_id="product/1" block_id="8"/> 
```

我想在模板中设置产品 ID。可以直接在模板中设置产品id吗？

如

```
<block type="test/test" product_id="product/$currentProductId" block_id="8"/> 
```

（供您参考。该片段应放在结帐/购物车中）

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:37:50.783

块通过`Varien_Object::__call()`. 因此，您可以通过以下方式设置参数

```
$this->getLayout()->createBlock('cms/block')
                      ->setBlockId(6)
                      ->setProductId('product/1')
                      ->toHtml(); 
```

# php - Cakephp：语言翻译成德语所有字符都没有正确显示

> ID：10831914
> 
> 赞同：0
> 
> 时间：2012-05-31T10:35:25.663
> 
> 标签：php

我在 cakephp 有一个多语言网站（德语和英语）。但这里有一个问题，我无法正确显示德语特殊字符。

见下文德文版

> Verg�tung

即使我定义了字符集。

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:39:33.573

检查您的页面是否具有正确的 HTTP 标头！检查网络选项卡中的[Firebug](https://getfirebug.com/)是否以 UTF-8 传输！

# php - 通过免费主机远程连接mysql

> ID：10831915
> 
> 赞同：12
> 
> 时间：2012-05-31T10:35:27.267
> 
> 标签：php, mysql, hosting, web-hosting

我在 000webhost 上注册，我可以连接到通过以下方式上传的 mysql db 页面：

```
mysql_connect('localhost', 'user', 'pass') or die('Could not connect to database');
mysql_select_db('name') or die('Could not select database'); 
```

但它似乎[不允许远程连接](http://www.000webhost.com/faq.php?ID=27)。

是否有任何具有 mysql db 并允许远程连接的免费主机？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T10:51:23.923

试试[heliohost.org](http://heliohost.org)
我以前用过它，他们也得到了很好的服务。唯一的问题是注册填得太快了

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T04:53:38.353

000webhost 不提供免费帐户[的 MySQL 远程访问，看看](http://www.000webhost.com/faq.php?ID=27)，所以要么去升级

或者尝试[http://www.freemysql.net](http://www.freemysql.net)远程免费 mysql 服务器，但它又是免费的，因此非常慢，

```
mysql_connect('SQL**.FREEMYSQL.NET', 'USER', 'PASS') or die('Could not connect to database');
mysql_select_db('DBNAME') or die('Could not select database'); 
```

不要使用“本地主机”

# social-networking - 喜欢，分享和推特。是否需要 Facebook 和 Twitter 帐户？

> ID：10831916
> 
> 赞同：1
> 
> 时间：2012-05-31T10:35:28.247
> 
> 标签：social-networking

我计划在我的网站上使用以下社交网络元素：

*   脸书喜欢
*   脸书分享
*   鸣叫

我是否需要一个 facebook 和 twitter 帐户才能在我的网站上使用上述内容，以便用户可以喜欢、分享或推特？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:45:34.930

只有用户需要帐户才能喜欢，分享。

但是，您需要一个 apikey 供用户登录您的应用程序。

**对于脸书：**

您可以通过创建一个新应用程序@http [://www.facebook.com/developers](http://www.facebook.com/developers) -> 应用程序来获得此密钥

希望这可以帮助！

# asp.net-mvc-3 - 带有 SQLDependency 的输出捕获在 IIS 7 上不起作用

> ID：10831918
> 
> 赞同：1
> 
> 时间：2012-05-31T10:35:40.527
> 
> 标签：asp.net-mvc-3, iis-7, outputcache, sqldependency

[在本文](http://dotnetslackers.com/articles/aspnet/Cache-Exploration-in-ASP-NET-MVC-3-Part-1.aspx#s9-using-sqldependency-together-with-outputcache)的帮助下，我正在研究输出缓存 SqlDependency 。我已经遵循了所有给定的步骤，当我通过 VS2010 运行站点时它工作正常，但是在通过 IIS 发布站点后，似乎 SqlDependency 不起作用，因为它总是显示缓存页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:22:31.413

查看此链接 -[博文](http://sdeu.wordpress.com/2011/02/08/activate-asp-net-mvc3-caching-with-database-dependency/)。我在实现中绊倒了几次，但那是由于配置标签命名错误。

# javascript - Linear/Incremental rotation animation with transition

> ID：10831920
> 
> 赞同：3
> 
> 时间：2012-05-31T10:35:55.893
> 
> 标签：javascript, d3.js

I'm trying to get a SVG shape to rotate using the transform attribute and the transition method in D3\. Here is the jsfiddle containing an example: [http://jsfiddle.net/TJd2a/](http://jsfiddle.net/TJd2a/)

I'm using two buttons, Left and Right, to rotate the rectangle by incrementing by its angle by 45 or -45 degrees. When the shape reaches either 180 or -180 degrees, the transition rotates the shape the opposite way, rather than moving linearly to the next angle. Using console logging, I've found there is nothing wrong with the angles that my code is generating. It appears to be how D3 is dealing the transition, as the generated XML does not show the same angle as the current (eg. when at 225 degrees, D3 gives the rectangle a rotation of -135 instead).

From what I've read and understand from the documentation, I need to use a custom Tween, but I 'm not sure where to start with a custom tween as I cannot find any examples specific or similar examples to help me understand how it works.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T17:13:53.630

Correct; you can use a custom tween to change the interpolator. D3 has a special [interpolator for transforms](https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_interpolateTransform), but it's not doing the right thing in your case. (I think that's probably a bug which should be fixed, so I filed [issue 661](https://github.com/mbostock/d3/issues/661).) Here's an example using [interpolateString](https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_interpolateString) instead:

```
d3.select("rect").transition().attrTween("transform", function(d) {
  return d3.interpolateString(
    "rotate("+ d.a +")",
    "rotate(" + (d.a += 45) + ")"
  );
}); 
```

# java - java中的不可变字符串？

> ID：10831921
> 
> 赞同：1
> 
> 时间：2012-05-31T10:35:56.530
> 
> 标签：java, string, immutability

```
String s = "java";
s.substring(1); // ava 
```

考虑到字符串的不变性，编译器不会修改`'s'`而是创建一个新对象，或者您可以说`'java' as well as 'ava'`内存中有空间..

这会发生什么`'ava'`，因为没有任何东西指向它或者它没有被任何东西引用..

还有一个问题...如果我会写`String s = new String("java");`// 'java' is not in string literal pool....

那么'ava'是否会在字符串文字池中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:37:54.123

> 这个'ava'会发生什么，因为没有任何东西指向它或者它没有被任何东西引用..

新构造的`String`对象立即变得有资格进行垃圾回收。

至于您的第二个问题，就字符串文字池而言，我认为以下两个表达式之间没有*任何*区别：

```
String s = "java";
String s = new String("java"); 
```

在这两种情况下，文字`"java"`都在池中。（但在第二种情况下，`s`不会指代`"java"`池中的字符串，而是指另一个`String`也有字符的字符串`"java"`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:42:01.573

1）这个'ava'会发生什么，因为没有任何东西指向它或者它没有被任何东西引用..

由于您没有将“ava”分配给任何对象，因此任何对象都没有指向“ava”，因此它有资格进行垃圾收集。

2) 'ava' 是否会在字符串文字池中？

```
No it would be in string  literal pool. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:37:50.737

`s.substring(1)`创建一个`String`指向 . 的底层 char 数组的新指针`s`。这里要实现的重要一点是 char 数组在这两个对象之间共享。如果您使用`String(String)`构造函数，则会创建一个包含引用字符的*新char 数组。*

如果你放弃对 的引用`s`，如果你有对`substring()`操作结果的引用，那么你就有对*完整*底层 char 数组的引用。

在您的示例中，您没有存储对新创建的字符串的引用。所以这将很快被垃圾收集。然而，底层数组仍然被 引用`s`。

# php - php mysql 购物车使用二维数组更新商品的数量

> ID：10831923
> 
> 赞同：0
> 
> 时间：2012-05-31T10:36:07.350
> 
> 标签：php, mysql

我正在构建的购物车似乎只更新了数组第一个元素的数量。因此，例如，我购物车中的第一个项目的数量为 1，然后当我从产品页面添加另一个数量 2 时，总数变为 3，这就是我想要的。但是，如果我对另一个项目重复这些步骤，它将分别将它们添加到数组中，而不是将它们组合在一起

```
if(isset($_GET['add'])){
foreach ($_SESSION['cart'] as $key => $item){
            if ($item['id'] == $itemID) {

                $newQuan = $item['quantity'] + $quantity;

                unset($_SESSION['cart'][$key]);

                $_SESSION['cart'][] = array("id" => $itemID,"quantity" => $newQuan);
                header('Location:xxx');//stops user contsanlty adding on refresh
                exit;
            }
            else{
                $_SESSION['cart'][] = array("id" => $itemID,"quantity" => $quantity);
                header('xxx');//stops user contsanlty adding on refresh
                exit;
            }
        }
    } 
```

谁能帮我解释一下为什么只更新第一个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:06:50.200

首先，问题和代码似乎还不够清楚，但我会尽力提供我认为可能有帮助的建议（我会做出一些假设）。

这些变量从何而来？

```
$itemID, $quantity 
```

假设他们来了`$_GET`，我会说最好保存您的购物车信息，如下所示：

```
$itemCartIndex = strval($itemID);
//convert the integer item id to a string value -- or leave as string if already a string
$currentQuantity = (isset($_SESSION["cart"][$itemCartIndex]))? intval($_SESSION["cart"][$itemCartIndex]["quantity"]):0;
//set it by default if the index does not exist in the cart already
$currentQuantity += $quantity;
//update the quantity for this particular item
$_SESSION["cart"][$itemCartIndex] = array("quantity"=>$currentQuantity,...,"price"=>12.56);
//set up the index for this item -- this makes it easy to remove an item from the cart
//as easy as unset($_SESSION["cart"][$itemCartIndex] 
```

完成后，向所有者展示/展示购物车是微不足道的。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:44:42.450

我还没有测试过，但这可能会更简单一些：

```
if(isset($_GET['add']))
{
    if(!isset($_SESSION['cart'])) $_SESSION['cart'] = array();
    if(!isset($_SESSION['cart'][$itemID]))
    {
        $_SESSION['cart'][] = array('id' => $itemID, 'quantity' => $quantity);
    }
    else
    {
        $_SESSION['cart'][$itemID]['quantity'] += $quantity;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:40:38.437

您的问题是 foreach 循环中的 else-case 。第一个项目由 if 检查，然后 - 当第一个项目不匹配时 - else 案例激活并添加新项目。

```
else{
            $_SESSION['cart'][] = array("id" => $itemID,"quantity" => $quantity);
            header('xxx');//stops user contsanlty adding on refresh
            exit;
        } 
```

您想要做的是检查整个购物车，然后 - 如果未找到该文章 - 将其添加到购物车。为此，我建议使用一个变量来检查您是否在循环内找到了条目。为了获得灵感，我在下面插入了代码。只需要进行细微的更改：添加 found-variable 并将其初始化（未找到），在 if-case 中将变量设置为 found 并检查退出 foreach-loop 后是否设置了变量（如果不是，您确定要将商品添加到购物车）。

```
$foundMyArticle = 0;

foreach ($_SESSION['cart'] as $key => $item){
        if ($item['id'] == $itemID) {
            $foundMyArticle = 1;
            ... THE OTHER CODE
} //end of the foreach

if($foundMyArticle == 0)
{ //COPY THE CODE FROM THE ELSE-CASE HERE } 
```

# android - 如何编写 Twitter 推送通知

> ID：10831929
> 
> 赞同：1
> 
> 时间：2012-05-31T10:36:23.720
> 
> 标签：android, twitter

我开发了一个 Twitter 应用程序，它进入 Twitter 页面，但是当我单击复选框按钮时我需要推送通知。我还使用了“twitter4j-core-2.1 jar”文件。

如果有人知道，请帮助我提供示例代码。

提前谢谢你。

# php - 我想显示一个面板，就像 facebook 或验证码

> ID：10831933
> 
> 赞同：0
> 
> 时间：2012-05-31T10:36:49.840
> 
> 标签：php, javascript, jquery

我有一个简单的表单，当用户输入所有信息并点击提交按钮时，面板应该在同一个窗口内仅打开 200 像素的宽度和 100 像素的高度。它应该有两个字段，一个是验证码图像和一个文本框和一个复选按钮，如果验证码正确，则面板应该自动关闭并重定向到另一个页面，就像 facebook 一样。面板的所有细节都保存在另一个 php 文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:11:11.613

查看[recaptcha](http://recaptcha.com/)，阅读文档并了解它是如何工作的（只需几分钟）

你最终将如何实现它取决于你，但基本上要按照你想要的方式去做，你需要对 javascript 有一些了解（jQuery 或原型会使视觉效果更容易）。

更详细地说，验证码已经在表单上生成了，但是父容器应该被隐藏起来：

```
$('#captcha-container-id').slideUp(); 
```

填写表格后，您可以执行以下操作：

```
$('#captcha-container-id').slideDown(); 
```

剩下的就是纯 PHP

**注意：javascript 示例在 jQuery 中**

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:43:35.257

使用[recapcha](http://www.google.com/recaptcha)获取字幕。
您将需要学习 javascript 来处理窗口打开和关闭效果
，我希望您能处理其余的。

# jquery - jQuery面板 - 打开另一个时关闭一个

> ID：10831940
> 
> 赞同：0
> 
> 时间：2012-05-31T10:37:23.210
> 
> 标签：jquery, slider, panel

我在同一页面中有两个滑动面板。需要这样，当一个打开并且用户点击另一个时，同时打开第二个时关闭第一个。现在它们重叠了...

你能帮我吗？谢谢

这是我在页面上的内容：

我在同一页面中有两个滑动面板。需要这样，当一个打开并且用户点击另一个时，同时打开第二个时关闭第一个。现在它们重叠了...

你能帮我吗？谢谢

这就是我在页面上的内容

```
<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">

$(document).ready(function(){
$(".btn-slide").click(function(){
    $("#panel").slideToggle('fast');
  $("#panel2").slideToggle("fast");
  $(this).toggleClass("active");
});
});

$(document).ready(function(){
$(".btn-slide2").click(function(){
  $("#panel2").slideUp('fast');
  $("#panel").slideToggle("fast");
  $(this).toggleClass("active");
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:41:28.793

我的这可以帮助你

[http://jsfiddle.net/ipsjolly/m4BTd/](http://jsfiddle.net/ipsjolly/m4BTd/)

```
<div class="accordionButton">111111</div>
<div class="accordionContent">0000000</div>
<div class="accordionButton">222222</div>
<div class="accordionContent">99999999</div>
<div class="accordionButton">33333333</div>
<div class="accordionContent">88888888</div>
​

    $(document).ready(function() {

        $('div.accordionButton').click(function() {
            $('div.accordionContent').slideUp('slow');  
            if(!$(this).next().is(':visible')){
            $(this).next().slideDown('slow');
            }
        });
        $("div.accordionContent").hide();

    });​ 
```

# php - MYSQL 请求 | 按天分组

> ID：10831941
> 
> 赞同：-3
> 
> 时间：2012-05-31T10:37:33.363
> 
> 标签：php, mysql, request, grouping

我有一张桌子：订单，需要提出请求并获取其他桌子。我的数据库表：

```
id  close
1   2012-05-29 03:11:15
2   2012-05-30 03:11:40
3   2012-05-31 03:12:10
4   2012-05-31 03:14:13
5   2012-05-31 03:16:50
6   2012-05-31 03:40:07     
7   2012-05-31 05:22:18
8   2012-05-31 05:22:22
9   2012-05-31 05:22:50
... 
```

我需要提出请求并获取此表（GROUP BY DAY(close)）：

```
1   2012-05-29 03:11:15
2   2012-05-30 03:11:40
9   2012-05-31 05:22:50 /*This is a last record on this day (05-31)*/ 
```

谢谢！

如果我提出这个要求：

```
SELECT id, close
FROM `orders`
GROUP BY DAY(close)
ORDER BY id ASC 
```

我会得到这张桌子：

```
1   2012-05-29 03:11:15
2   2012-05-30 03:11:40
3   2012-05-31 03:12:10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:42:25.410

尝试：

```
select t1.* 
from orders t1
join (
    select max(close) as close
    from orders
    group by date(close)
) t2 on t1.close = t2.close 
```

工作示例：[http ://sqlfiddle.com/#!2/e799a/1](http://sqlfiddle.com/#!2/e799a/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:58:26.910

试试这个，这样就可以了。

```
SELECT 
    a.id,
    a.close
FROM
(
    SELECT 
        id,
        close
    FROM
        `orders`
    ORDER BY
        close DESC
) AS a
GROUP BY 
    DATE(a.close)
ORDER BY 
    a.id
ASC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:14:26.913

也许这有帮助：

```
SELECT temp.`close`
FROM (
SELECT `close`
FROM `orders`
ORDER BY `close` DESC
) AS temp
ORDER BY `close` ASC 
```

# c# - 带有匹配项的 C# 正则表达式模式

> ID：10831942
> 
> 赞同：0
> 
> 时间：2012-05-31T10:37:37.980
> 
> 标签：c#, regex

我正在研究需要从给定文本中找到频率的项目。我写了一个正则表达式来尝试检测频率，但是我对 C# 如何处理它以及我如何在我的软件中准确地使用它感到困惑

我的常规表达是`(\d*)(([,\.]?\s*((k|m)?hz)*)|(\s*((k|m)?hz)*))$`

我试图从中找到价值

*   23,2赫兹
*   24,4赫兹
*   25,0 Hzsadf
*   26赫兹
*   27Khz
*   28hzzhzhdhdwe
*   29
*   30.4赫兹
*   31.8赫兹
*   4343.34.234 赫兹
*   65SD

进一步说明：

1.  系统需要为美国和比利时文化工作，因此，23.2 (US) = 23,2 (Be)
2.  我试图找到一个数字，然后是 khz,mhz,hz 或空格或 , 或 .
3.  如果是，或。那么它应该有另一个数字，后跟khz，mhz，hz

有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:45:23.033

运行替换

```
(\d+(?:[.,]\d+)?)\s*([KkMm]?[Hh][Zz]) 
```

给`($1 $2)`_

```
(23,2 Hz)
(24,4 Hz)
(25,0 Hz)sadf
(26 Hz)
(27 Khz)
(28 hz)zhzhzhdhdwe
29
(30.4 Hz)
(31.8 Hz)
4343.(34.234 Khz)
65SD 
```

对所需行为的任​​何更正？

**upd**：这是负面的后视和单词边界：

```
(?<![.,0-9])(\d+(?:[.,]\d+)?)\s*([KkMm]?[Hh][Zz])\b

(23,2 Hz)
(24,4 Hz)
25,0 Hzsadf
(26 Hz)
(27 Khz)
28hzzhzhzhdhdwe
29
(30.4 Hz)
(31.8 Hz)
4343.34.234 Khz
65SD 
```

# java - 在 Spring 中尝试 Bean 定义继承，但没有按预期工作

> ID：10831945
> 
> 赞同：0
> 
> 时间：2012-05-31T10:37:42.313
> 
> 标签：java, spring

我只是涉足 Spring 框架。在这里，我尝试了 bean 声明中的“父”属性，

这是我下面的 CommonCar.java 代码：

```
package com.justPractise.ex01;

public class CommonCar {
    private String modelName;
    private String engine;

    public CommonCar(String modelName){
        this.modelName = modelName;
        System.out.println(" PARAMETERISED "+this.getClass().getName()+" INITIALISED..... ");
    }

    public CommonCar(){
        System.out.println(this.getClass().getName()+" INITIALISED..... ");
    }

    public String getModelName() {
        return modelName;
    }

    public void setModelName(String modelName) {
        this.modelName = modelName;
    }

    public String getEngine() {
        return engine;
    }

    public void setEngine(String engine) {
        this.engine = engine;
    }

    @Override
    public String toString(){
        StringBuffer strb = new StringBuffer();
        strb.append("\nDEFAULT CAR ");
        strb.append(this.modelName);
        strb.append("\nENGINE NAME ");
        strb.append(this.engine);
        return strb.toString();     
    }

} 
```

下面是 CustomCar.java 的代码：

```
package com.justPractise.ex01;

public class CustomCar {
    private String modelName;
    private String engine;

    public CustomCar(){
        System.out.println(this.getClass().getName()+" INITIALISED..... ");
    }

    public String getModelName() {
        return modelName;
    }

    public void setModelName(String modelName) {
        this.modelName = modelName;
    }

    public String getEngine() {
        return engine;
    }

    public void setEngine(String engine) {
        this.engine = engine;
    }

    @Override
    public String toString(){
        StringBuffer strb = new StringBuffer();
        strb.append("\nDEFAULT CAR ");
        strb.append(this.modelName);
        strb.append("\nENGINE NAME ");
        strb.append(this.engine);
        return strb.toString();     
    }
} 
```

这是 bean-jojo.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd" default-lazy-init="true">

         <bean class="com.justPractise.ex01.CommonCar" id="commonCAR">
            <constructor-arg value="TATA-SAFARI V30" />
            <property name="engine" value="2340 CC FOUR CYLINDER 1700 BHP ENGINE" />
         </bean>

         <bean class="com.justPractise.ex01.CustomCar" id="customCAR" parent="commonCAR">
            <property name="modelName" value="TOYOTA-INNOVA" />         
         </bean>                    

</beans> 
```

这是具有 main 方法的类，我从命令行运行：

```
package com.justPractise.ex01;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainPractise01 {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ApplicationContext ctx = null;  
        CustomCar obj = null;
        try{
            ctx = new ClassPathXmlApplicationContext("bean-jojo.xml");
            obj = (CustomCar) ctx.getBean("customCAR"); 
            System.out.println(obj);                        
        }catch(Exception e){
            e.printStackTrace();            
        }
    }

} 
```

现在，如果我运行上述程序，我会在命令提示符下收到此错误：

```
[java] org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customCAR' defined in class path resource
[bean-jojo.xml]: 1 constructor arguments specified but no matching constructor found in bean 'customCAR' (hint: specify index/type/name 
arguments for simple parameters to avoid type ambiguities) 
```

但是，如果我对 bean-jojo.xml 进行以下更改，我的程序运行良好：

```
 <bean class="com.justPractise.ex01.CommonCar" id="commonCAR">
            <property name="modelName" value="TATA-SAFARI V30" />
            <property name="engine" value="2340 CC FOUR CYLINDER 1700 BHP ENGINE" />
         </bean> 
```

这是通过在 xml 中进行上述更改得到的预期输出：

```
[java] com.justPractise.ex01.CustomCar INITIALISED.....
[java]
[java] DEFAULT CAR TOYOTA-INNOVA
[java] ENGINE NAME 2340 CC FOUR CYLINDER 1700 BHP ENGINE
[echo] Java running completed 
```

那么，你能告诉我为什么 bean-jojo.xml 中的 CommonCar 声明中的构造函数 args 不起作用吗？等待评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:43:14.217

异常可读性再好不过了。在您的 customBean 汽车中创建一个接受字符串的构造函数（Spring 将传递它`TATA-SAFARI V30`）

您的第二个示例有效，因为您不再引用`commonClass`超类，因此没有定义带参数的构造函数

# automation - Geb Navigator 缺少方法异常

> ID：10831947
> 
> 赞同：1
> 
> 时间：2012-05-31T10:37:44.650
> 
> 标签：automation, geb

我正在使用 Geb 框架来自动化一些浏览器任务。

这行代码：

!$("h4", 0, text:"建筑物").isEmpty()

正在抛出 groovy.lang.MissingMethodException：

groovy.lang.MissingMethodException：没有方法签名：geb.navigator.NonEmptyNavigator.$() 适用于参数类型：(java.util.LinkedHashMap, java.lang.String, java.lang.Integer) 值：[[text :Buildings], h4, 0] 可能的解决方案：tag(), tag(), any(), eq(int), is(java.lang.String), is(java.lang.String)

Geb 文档提供了一个示例，该示例应该执行与我的行相同的任务：

> 下面是一个具体的例子……</p>
> 
> $("h1", 2, 类："标题")
> 
> 这将找到第三个（元素索引为 0）h1 元素，其类属性正好是“标题”。

谁能解释为什么我的代码不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:40:00.423

api 中没有这样的方法，您可以在其中指定选择器、索引和属性映射。

另一方面，您可以使用以下方法获得您期望的结果：

```
$("h1", class: "heading").eq(2) 
```

# datacontext - Windows Phone 7.1 应用程序退出而不抛出任何异常

> ID：10831951
> 
> 赞同：1
> 
> 时间：2012-05-31T10:37:55.067
> 
> 标签：datacontext, async-ctp, windows-phone-7.1.1

目前正在开发一个多线程的 WP 7.1.1 应用程序，并且有一半以上的时间应用程序在“初始阶段”退出而没有抛出任何异常。它只是以所有线程返回 0x0 并且没有输入任何 Closing/Exit/Quit 事件结束。

```
...
The thread '<No Name>' (0xfde00d2) has exited with code 0 (0x0).
The thread '<No Name>' (0xe860116) has exited with code 0 (0x0).
The thread '<No Name>' (0xfdf00c6) has exited with code 0 (0x0).
The thread '<No Name>' (0xf8d012e) has exited with code 0 (0x0).
The thread '<No Name>' (0xfd5010e) has exited with code 0 (0x0).
The thread '<No Name>' (0xfbc011a) has exited with code 0 (0x0).
The thread '<No Name>' (0xf9900ee) has exited with code 0 (0x0).
The program '[268042506] UI Task: Managed' has exited with code 0 (0x0).
EOL 
```

“初始阶段”究竟是什么意思？我使用“Windows Phone 性能分析”对应用程序进行了概要分析，并结合了一些调试消息和一些日志记录，我估计它大约在启动后 3-4 秒。此时，GUI 已经在很短的时间内可见。

我几乎可以肯定问题是由于以下调用而发生的：

```
private static List<MyEntries> EntriesLoad()
{
    using(var context = Context.ReadOnly) // <- works
    {
        return context.MyEntries.Where(m => !m.Deleted).OrderBy(m => m.Name).ToList(); // <- problem
    }
}

private async void EntriesReload()
{
    EntriesLoaded = false; // <- called
    var entries = await TaskEx.Run<List<MyEntries>>(EntriesLoad); // <- called
    EntriesLoaded = true; // <- only get's called 50% of the time/ otherwise app quits
} 
```

为了防止 DataContext 出现任何多线程问题，每次调用都会创建一个新上下文：

```
public static Context ReadOnly 
{
    get { return new Context(ConnectionReadOnly); }
} 
```

我什至尝试了 BackgroundWorker 和 ThreadPool 而不是 Async CTP 3，但效果相同。我知道以前曾多次问过非常相似的问题[，](https://stackoverflow.com/questions/6100942/what-can-cause-a-wp7-app-to-crash-with-no-exception)但我根本找不到任何解决方案来解决我的问题。有什么方法/程序可以找到导致异常的确切方法（原因，位置）？可以创建多少个线程是否有任何限制？可以以这种方式安全地使用 DataContext 吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:09:23.313

当一个`async void`方法抛出异常时，该异常会直接传递到“上下文”——在本例中，是一个 UI 上下文。

所以——即使你`EntriesReload`在`try`/中调用`catch`——你也永远不会捕捉到任何由`EntriesReload`.

`async`方法应该总是返回`Task`or `Task<TResult>`，除非它们*必须*返回`void`（例如，`async`事件处理程序）。

然后当你打电话时`EntriesReload`，`await`结果。这不会修复崩溃，但它会让您看到异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:41:56.233

谢谢斯蒂芬的回复。对于您提出的更改，我仍然无法发现任何异常，但是，您的回答帮助我更好地了解幕后发生的事情。所以再次感谢。

我终于设法摆脱了所有导致应用程序 - 几乎一半时间 - 在启动后不久随机退出的“静默”异常。令我惊讶的是，它可能不是由我的任何代码引起的，但可能起源于 DataContext 类。怎么会？在我的应用程序中，我一直在使用两个不同的连接字符串：

```
/* with DeferredLoadingEnabled = false; ObjectTrackingEnabled = true; */
private const string Connection = "Data Source=isostore:/MyDatabase.sdf;max buffer size=1024;max database size=512;";

/* with DeferredLoadingEnabled = false; ObjectTrackingEnabled = false; */
private const string ConnectionReadOnly = Connection + "File Mode = read only;"; 
```

异常仅在使用 ReadOnly 连接字符串的 DataContext 上的读取操作期间（而不是在分配返回值之后、之前或期间）发生。摆脱 ReadOnly 属性，并且不更改任何其他代码行，完全解决了我的问题。那么可能在 DataContext 或其中一个库中存在线程问题？我无法真正判断弃权 ReadOnly 连接对性能的影响，但由于我只检索少量数据并且我以非常原子的方式使用 DataContext，我不介意我的可能开销特定用例。

# android - Android - 通过 ip 检测移动运营商

> ID：10831955
> 
> 赞同：-1
> 
> 时间：2012-05-31T10:38:15.503
> 
> 标签：android, ip, detection, carrier

我需要根据 IP 地址检测特定的移动运营商。

我有一个有效 IP 地址列表，我需要检查是否有任何连接正在使用其中一个。

知道如何检查任何 http 连接是否使用特定的 IP 地址吗？

BR，马尔辛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:03:36.897

我没有代码，但无论如何它都非常简单：

1.  连接到外部网页，例如我的 ip 网站或您自己的网站。
2.  然后此页面可以获取您的 IP 地址。检查这些服务的许可证或设置您自己的许可证并将您的 IP 写入页面。谷歌`PHP Get remote address`
3.  利润！！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T10:47:56.850

这将为您提供您的 android 设备已建立的任何连接的 IP 地址

```
public String getLocalIpAddress() {
try {
    for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
        NetworkInterface intf = en.nextElement();
        for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
            InetAddress inetAddress = enumIpAddr.nextElement();
            if (!inetAddress.isLoopbackAddress()) {
                return inetAddress.getHostAddress().toString();
            }
        }
    }
} catch (SocketException ex) {
    Log.e(LOG_TAG, ex.toString());
}
return null;
} 
```

如果此方法返回 null，则没有可用的连接。如果方法返回一个字符串，这个字符串包含设备当前使用的ip地址，独立于3G或WiFi

# jquery - jQuery $.Ajax 需要很长时间才能响应

> ID：10831956
> 
> 赞同：0
> 
> 时间：2012-05-31T10:38:16.533
> 
> 标签：jquery

我有一个简单的函数来处理行数据的提交（每个循环一个提交）。我不会详细介绍该函数的主要用途，但这里有一个简短的总结：我有很多数据循环遍历，并且在每个循环中我调用`upload()`具有 ajax 函数的函数。Ajax 将数据作为帖子提交，然后在成功调用`insert()`函数时继续通过循环并`upload()`再次调用，直到处理完所有数据。

```
upload: function( data ){
    var obj = this;
    if( data.post_code && data.post_code.length > 0 ){
        if( ajax_insert ){
            ajax_insert.abort();
        }

        try{
            ajax_insert = $.ajax({
                type    : 'POST',
                url     : '/submission/my-function?ajax',
                data    : $.param( data ),
                success : function( response ) {
                    obj.insert();
                },
                error: function(msg){
                    setInterval(function(){
                        obj.insert();
                    }, 2000);
                }
            });
        }catch(err){
            ajax_insert.abort();
            obj.insert();
        }
    }else{
        this.insert();
    }
} 
```

一些客户遇到的问题是一段时间后停止提交（有些在 60 之后提交，有些在 100+ 之后提交）。我不确定这是否是因为互联网连接速度慢，但我在 firebug 上使用控制台时注意到的是，当控制台中的提交停止时，它仍然显示 Ajax 正在尝试 su submit 但从未完成。并且没有显示 javascript 错误。

如果 Ajax 需要很长时间才能完成提交（假设它被卡住了将近 5 分钟）并使用`.abort()`重试，有没有一种方法可以解决？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:42:02.550

你可以用..

```
 timeout: 10000, //time in milliseconds. 
```

这至少会捕获一个停滞的脚本。

# java - 使用 play 应用程序配置 japid？

> ID：10831957
> 
> 赞同：2
> 
> 时间：2012-05-31T10:38:19.787
> 
> 标签：java, eclipse, playframework

我想在我的新游戏应用程序中使用 japid-0.9*。我已经为我的 exixtng 应用程序安装了 japid。我遵循了 japid 配置的所有步骤。

1.  在 application.conf 文件中进行更改。
2.  在类路径中添加 japid jar。

但是当我在eclipse中打开它时我仍然找不到japid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:47:35.287

添加行

`- play -> japid 0.9.3.4`

到你的 conf/dependencies.yml

跑`play install; play eclipsify`

最后在eclipse中刷新你的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:42:17.600

确保将 Japid 设置为依赖项后，`play eclipsify`再次运行以确保设置了所有新设置。

# java - 为什么我们在单个文件中声明公共类？

> ID：10831959
> 
> 赞同：0
> 
> 时间：2012-05-31T10:38:31.150
> 
> 标签：java, jakarta-ee

我是 Java 编程新手，我创建了一个名为 Demo 的类并保存为 sample.java，同时编译这个 java 程序它给出如下编译错误

```
 public class Demo {
        public static void main(String[] args) {
        System.out.println("This is year");
                }
            } 
```

**sample.java:3：Demo 类是公共的，应该在名为 Demo .java 的文件中声明**

为什么我们要在单个文件中声明公共类......

谢谢

穆克提尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:39:41.100

因为这就是 Java 规范所要求的（或者至少，它允许实现需要这个；请参阅下面 Jon 的评论）。

* * *

至于“为什么”，我只能假设。但是很明显，Java 的设计者非常热衷于清晰的编码约定等。每个源文件一个公共类意味着在哪里可以找到某些东西没有歧义。

（如果有技术原因，我不知道。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:45:52.337

@Oli Charlesworth 是对的：这是 Java 语言规范所要求的。你可能会问他们为什么需要这个？可能的答案是把事情弄清楚。根据定义，类是原子单位。你可以用其他版本替换类，如果公共接口没有改变，一切都会继续工作。

因此，Java 语言设计者决定强制我们将每个类存储在单独的文件中。

他们只是为非公共课程做了一些例外。多个非公共类可以保存在一个文件中。我认为原因是非公共类是一种可以由作者随时更改的实现细节。由于类是非公开的，因此这些更改不应影响任何 API 用户。

但我强烈建议您将每个类（即使它不是公开的）保存在单独的文件中。这提高了代码的可读性，并最终提高了它的质量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:40:18.183

TL;DR：降低软件的概念复杂性。

如果您有许多隐藏在名称不相关的文件中的公共类，那么仅通过查看包结构就更难看到程序的概念结构。

@因为java规范是这么说的-我认为真正的问题是规范背后的推理

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:41:21.507

这是为了阻止人们在非正交命名的文件中将包含数百个类的文件弄得乱七八糟。namespacepart/namespacepart/namespacepart/classname 结构用于提供标准且可持续的结构。

# c# - 用于渲染 PDF 和 OCR 生成图像的 C# 解决方案？

> ID：10831963
> 
> 赞同：4
> 
> 时间：2012-05-31T10:38:50.940
> 
> 标签：c#, pdf, ocr, pdf-rendering

我正在寻找一种 C# 解决方案，用于在商业应用程序中将 PDF 文档中的数据导入我们的数据库。我们的客户将希望导入任意文件。通常我会把它写成完全不可能的，但是他们正在导入的文档将在他们自己的设置布局中。

我的计划是将 PDF 呈现为静态图像，然后允许用户设置自己的模板，这些模板基本上使用 OCR 在 PDF 中以预定义的像素偏移量提取文本。对于表，它们定义了表的位置以及列和行大小的一系列进一步值。然后，我们可以将模板应用于该文档类型。

所以，我真正在寻找的是两个库：一个用于将 PDF 转换为图像，另一个用于对这些图像进行 OCR。

要求：

*   是纯 C# 或在本机 DLL 上具有受支持的 C# 包装器。
*   不派生进程 - 在这种情况下，不允许使用本质上只是创建命令行参数并启动外部可执行文件的包装器。
*   在 FOSS 的情况下，允许我们通过支付许可费来免除正常的 FOSS 许可要求（即发布我们的源代码）。

我们当然不介意为商业解决方案付费，但我们宁愿不拘泥于为软件的每个单独分发付费。

我知道这是一个非常具体的要求集 - 可能足以让某些人认为这个问题过于本地化，但我希望有人可以提出一种方法和一些对我以及未来其他人有帮助的库.

我在 PDF 方面研究过的东西：

*   iTextSharp - 文档是你必须买的书，不是一个好的开始。关于将 PDF 转换为公共领域的图像似乎没有太多有用的文档。许可是不透明的，看起来我们必须为我们分发给的每个客户付费。
*   Docotic.Pdf - 纯文本，对我们没用。
*   pdftohtml - 同样，不产生图像。移植到 C# 也会很麻烦。
*   PdfFileParser - 仍然不是我们需要的。
*   GhostScript - 几乎正是我们想要的，但需要分叉到一个程序。

对于 OCR 方面，我可能最终会使用 Tesseract，因为 Apache 许可证是宽松的，并且得到了很好的评价。如果有替代方案，我也会对此感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:30:51.563

我想推荐[Amyuni PDF Creator .Net](http://www.amyuni.com/en/developer/pdfcreator/features)来完成这项任务。

**第一种情况：**
如果您的 PDF 文件定义明确（没有丢失字体信息等），您可以通过在方法中指定一个矩形区域直接从 PDF 中提取文本[`GetObjectsInRectangle`](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacDocument/Methods/GetObjectsInRectangle_Method.htm)。您还应该使用以下选项`acGetRectObjectsOptimize`：

> 在返回之前优化文本对象。即，将彼此靠近的文本对象组合成一个文本对象。

**第二种情况：**
如果涉及的图像还包含文本，则将整个页面渲染为图像然后应用 OCR 可能是更好的选择。您可以通过使用方法[ExportToTiff](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacDocument/Methods/IacDocument.ExportToTiff_method.htm)、[ExportToJPeg](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacDocument/Methods/IacDocument.ExportToJPeg_Method.htm)或[RasterizePageRange](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacDocument/Methods/IacDocument.RasterizePageRange_Method.htm)使用 Amyuni PDF Creator .Net 执行此操作。

从文档中：

> *IacDocument.RasterizePageRange 方法*
> RasterizePageRange 方法将页面内容转换为彩色或灰度图像。在归档文档或执行 OCR 时，有时最好将所有页面存储为图像，而不是复杂的文本和图形操作。

然后您可以使用我们与 Tesseract OCR 集成的[OCR 插件，最后我们再次进入第一个场景 (GetObjectsInRectangle)。](http://www.amyuni.com/en/developer/ocrmodule)为了将 OCR 应用于您的文件，您可以使用该方法`OCRPageRange`。

> void OCRPageRange（int startPage，int EndPage，字符串语言，acOCROptions 选项）

关于许可，Amyuni PDF Creator .Net 提供（按应用程序）免版税许可。

*通常的免责声明适用*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:58:06.017

我想你可能想再给 Docotic.Pdf 一次机会。

该库可以提取文本块、单词甚至单个字符及其边界矩形。请查看[从 PDF 中提取单词](https://bitmiracle.com/pdf-library/help/extract-text-by-words.aspx)的示例。

此外，Docotic.Pdf 可以从 PDF 创建图像并在`System.Drawing.Graphics`. 请查看[Draw and print Pdf](https://bitmiracle.com/pdf-library/help/draw-and-print-pdf.aspx)样本组。

免责声明：我是该库的开发人员之一。

# c# - 使用 C# WebBrowser Control 时，如何将 javascript 注入所有页面，包括 iframe/frame？

> ID：10831964
> 
> 赞同：0
> 
> 时间：2012-05-31T10:38:51.577
> 
> 标签：c#, javascript, webbrowser-control

我知道有很多关于它的讨论，但我找不到我自己的问题的解决方案。

目前，我想在使用 C# WebBrowser Control 时注入所有页面，包括 iframe 或框架甚至 iframe 的 iframe。例如，我想在页面显示之前注入脚本，例如 alert("hello")。

当只有一个主页时，这很容易。

```
private void webBrowser1_Navigated(object sender, WebBrowserNavigatedEventArgs e)
{
    WebBrowser curWebBrowser = (WebBrowser)sender;            
    HtmlElement head = curWebBrowser.Document.GetElementsByTagName("head")[0];
    HtmlElement scriptEl = curWebBrowser.Document.CreateElement("script");
    IHTMLScriptElement element = (IHTMLScriptElement)scriptEl.DomElement;
    element.text ="alert('hello');";
    head.AppendChild(scriptEl);
} 
```

但是当发生将脚本注入所有页面时，我发现我不知道在 Navigated Event 中导航的是哪个 iframe。

有 e.URL 所以我知道它的主页与否。但是我找不到更多信息。

目前，我遍历浏览器中由 e.URL 过滤的所有帧（有时两个 iframe 具有相同的 URL），并尽量避免页面重复执行脚本。但是我认为我所做的真的很愚​​蠢，并且它不能完全工作，因为 iframe 中的页面会在显示页面“之后”发出警报消息。

有没有更好的建议？

# c# - 当 ContentControl.Content 改变时开始动画

> ID：10831965
> 
> 赞同：4
> 
> 时间：2012-05-31T10:39:16.740
> 
> 标签：c#, wpf, xaml

当 Button 或 ContentControl 等内容控件更改其内容时，我试图触发动画。我最初的想法是这样做：

```
 <ContentControl x:Name="ContentElement">
            <ContentControl.Style>
                <Style TargetType="ContentControl">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ContentControl">
                                <ContentPresenter x:Name="Content">
                                    <ContentPresenter.Triggers>
                                        <EventTrigger RoutedEvent="WHATGOESHERE">
                                            <BeginStoryboard Storyboard="{StaticResource MyAnimation}" Storyboard.TargetName="Content"/>
                                        </EventTrigger>
                                    </ContentPresenter.Triggers>
                                </ContentPresenter>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ContentControl.Style>

            <Button Content="Hello"/>
        </ContentControl> 
```

但是我不知道 ContentPresenter 更改/更新时会触发哪个事件。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-05-30T08:23:56.630

你可以只写一个附加属性：

```
using System;
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media.Animation;

static class ContentControlExtensions
{
    public static readonly DependencyProperty ContentChangedAnimationProperty = DependencyProperty.RegisterAttached(
        "ContentChangedAnimation", typeof(Storyboard), typeof(ContentControlExtensions), new PropertyMetadata(default(Storyboard), ContentChangedAnimationPropertyChangedCallback));

    public static void SetContentChangedAnimation(DependencyObject element, Storyboard value)
    {
        element.SetValue(ContentChangedAnimationProperty, value);
    }

    public static Storyboard GetContentChangedAnimation(DependencyObject element)
    {
        return (Storyboard)element.GetValue(ContentChangedAnimationProperty);
    }

    private static void ContentChangedAnimationPropertyChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
    {
        var contentControl = dependencyObject as ContentControl;
        if (contentControl == null)
            throw new Exception("Can only be applied to a ContentControl");

        var propertyDescriptor = DependencyPropertyDescriptor.FromProperty(ContentControl.ContentProperty,
            typeof (ContentControl));

        propertyDescriptor.RemoveValueChanged(contentControl, ContentChangedHandler);
        propertyDescriptor.AddValueChanged(contentControl, ContentChangedHandler);
    }

    private static void ContentChangedHandler(object sender, EventArgs eventArgs)
    {
        var animateObject = (FrameworkElement) sender;
        var storyboard = GetContentChangedAnimation(animateObject);
        storyboard.Begin(animateObject);
    }
} 
```

然后在 XAML 中：

```
 <ContentControl Content="{Binding SelectedViewItem}">
            <extensions:ContentControlExtensions.ContentChangedAnimation>
                <Storyboard>
                    <ThicknessAnimation To="0" From="30,0,-30,0" Duration="0:0:0.3" Storyboard.TargetProperty="Margin"/>
                </Storyboard>
            </extensions:ContentControlExtensions.ContentChangedAnimation>
        </ContentControl> 
```

它比新控件更容易和更短。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:11:56.747

不幸的是，ContentChanged 没有 CLR 事件（更不用说 EventTriggers 所需的 RoutedEvent）。但是，鉴于您正在处理自定义控件，您可以覆盖 Content 属性的元数据并在控件中提供您自己的回调。

这可能与您在[这里寻找的内容有关](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/5421e988-f729-4154-b1ab-e17e1b8b70d4/)

显然，他创建了一个 CLR 事件来在外部传播内容更改；您也可以只使用 RoutedEvent 来做同样的事情。

[此处](http://msdn.microsoft.com/en-us/library/ms597491.aspx)有关 OverrideMetadata 的补充阅读

# c - 使用双类型可变长度数组的 C 程序崩溃

> ID：10831966
> 
> 赞同：2
> 
> 时间：2012-05-31T10:39:17.780
> 
> 标签：c, arrays, floating-point, double, variable-length

这些天我正在阅读 C Primer Plus，这是我在第 10 章中为编程练习 No.4 编写的代码，该代码在双类型数组中查找最大数的索引。我使用可变长度数组来手动指定数组大小：

```
#include <stdio.h>
int findmax(const double array[], int s);
//find the index of the largest number in the array
int main(void)
{
    int size = 0; //size of the array
    int index = 0; //index of the largest number
    double num[size]; //the array holding double-type numbers

    printf("Enter the size of the array: ");
        scanf("%d", &size);
    printf("Enter %d numbers: ", size);
    for (int i = 0; i < size; i++)
        scanf("%lf", &num[i]);

    index = findmax(num, size);
    printf("The index of the max number in the array is: %d\n", index);
    return 0;
}

int findmax(const double array[], int s)
{
    int index = 0;
    double max = array[0];
    for (int i = 0; i < s; i++)
            if (array[i] > max)
            {
                max = array[i];
                index = i;
            }
    return index;
} 
```

这段程序可以正常编译，使用MinGW（假设程序文件名为prog.c）：

```
gcc prog.c -o prog.exe -std=c99 
```

当“大小”变量小于 5 时，程序运行良好。但是当我为“大小”变量输入 6 或更大的数字时，程序在运行时崩溃。

松散地翻译，错误信息是：

```
the memory 0x00000038 used by 0x77c1c192 could not be "written". 
```

我试图消除可变长度数组的使用，程序似乎工作正常。但是我还是不知道原版哪里出了问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:41:01.357

分配 num 时大小为 0。您稍后会遇到访问冲突，因为您尝试访问尚未分配的 num[0]。

编辑：我建议在读取大小后使用动态内存或声明 num 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:07:44.813

当您创建一个数组时，数组的大小将为零，正如其他人已经指出的那样。因此，当您尝试将元素填充到数组中时，没有可用的内存，它会覆盖到其他一些内存中，最终导致内存损坏。

您可以如下重写代码以避免该问题。

```
int size = 0; //size of the array     
int index = 0; //index of the largest number     
double *num = NULL; //Change it to a pointer      
printf("Enter the size of the array: ");         
scanf("%d", &size);     
num = malloc(size * sizeof(double));
if(NULL == num)
{
  printf("Malloc Failed\n");
  return 0;
}
printf("Enter %d numbers: ", size);     
for (int i = 0; i < size; i++)         
scanf("%lf", &num[i]); 
```

或者

```
int size = 0; //size of the array     
int index = 0; //index of the largest number     
printf("Enter the size of the array: ");         
scanf("%d", &size);     

double num[size]; //Now, num will have proper size
printf("Enter %d numbers: ", size);     
for (int i = 0; i < size; i++)         
scanf("%lf", &num[i]); 
```

这是关于 C99 的可变长度数组的内容丰富的文章的[链接](http://www.clarkcox.com/blog/2009/04/07/c99s-vlas-are-evil/)，其中讨论了 C99 的可变长度数组可能导致的一些潜在问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:44:10.060

`The program works fine when the "size" varialbe is less than 5.`这是最危险的一种编程错误——看起来工作正常，但实际上并没有。通过写入您的数组，您会立即写入出于其他目的而声明的内存，因为您的数组根本没有长度。您不能仅仅通过`size`事后更改变量来更改数组的大小。

一种选择是`size`在声明数组之前确定。另一种方法是使用 执行动态分配`new`，但我敢肯定，您将在几章中了解这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T10:46:44.433

```
int size = 0; //size of the array
    int index = 0; //index of the largest number
    double num[size]; //the array holding double-type numbers

    printf("Enter the size of the array: ");
        scanf("%d", &size); 
```

当您第一次声明`num array`时，它的大小将为零，因为这是执行该行时的大小值，尽管稍后您可能会再次读取大小的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T20:21:06.040

正如其他人所建议的那样，使用 malloc() 是正确的方法。除此之外，你可以让你的数组任意大，一旦它满了就停止接受输入。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-31T10:42:41.677

`double num[size];` 在从用户输入尺寸变量的尺寸后放置语句 。

# javascript - 上传 jQuery Handsontable 输入

> ID：10831969
> 
> 赞同：3
> 
> 时间：2012-05-31T10:39:28.170
> 
> 标签：javascript, jquery, spreadsheet, handsontable

将用户在*jQuery Handsontable*中输入的数据上传回服务器以保存到数据库中的最佳方法是什么？

现有`onChange`回调似乎非常冗长，无法使用 AJAX 保存输入数据，尤其是当用户在现有数据行上方插入新数据行时。*在使用Handsontable*或*jQuery*完成编辑后寻找上传输入数据的功能

 *这是使用 jQuery 循环输入数据并以 JSON 格式转储到文本框中然后提交到服务器的[完整代码。](http://jsfiddle.net/rYpGA/)这个过程看起来很难看。寻找更清洁的方式..

```
$('#btnGo').click(function() {

    var rowList = new Array();
    $("table tr").each(function() {
        var colList = new Array();
        $("td", this).each(function() {
            colList.push($(this).text());
        });
        rowList.push(colList);
    });
    $('#simple').val(JSON.stringify(rowList));
    console.log(rowList);
});​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T09:37:17.147

有一个用于获取整个表数据数组的内置方法：`.handsontable("getData")`

你可以像这样使用它：

```
$('#btnGo').click(function() {
  var rowList = $("#example9grid").handsontable("getData");
  $('#simple').val(JSON.stringify(rowList));
  console.log(rowList);
});​ 
```

工作示例：http: [//jsfiddle.net/warpech/bwv2s/20/](http://jsfiddle.net/warpech/bwv2s/20/)*

# iphone - IOS 从 MS Word 中读取文本

> ID：10831976
> 
> 赞同：4
> 
> 时间：2012-05-31T10:39:54.520
> 
> 标签：iphone, ios, ipad, ms-word

我正在尝试从 MS Word 文档（.doc、.docx、.docs）中读取文本。我从昨天开始一直在搜索，但没有找到任何解决方案。请任何人告诉我我该怎么办？我已经尝试过 UIWebview 从 javascript 获取文本，但效果不佳。

```
- (NSString *)textFromWordDocument:(NSString *)path {
    UIWebView *theWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [theWebView loadRequest:request ];
    NSString *document = [theWebView stringByEvaluatingJavaScriptFromString:@"document.documentElement.innerText"];
    [theWebView release];
    return document;
} 
```

如果有人能告诉我应该做什么或去哪里看看，那对我真的很有帮助，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T14:11:01.953

您加载 UIWebView 然后立即尝试访问 dom，它可能还没有准备好。

在调用 UIWebViewDelegate didFinishLoad: 之前，不要调用 stringByEvaluatingJavaScriptFromString:。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-25T11:07:05.430

下面的代码在启动时将 Word .docx 文件保存到应用程序的文档目录中。然后它在 viewDidLoad 期间将该文件读入 UIWebView。最后，它在从 UIWebView 获取文本之前等待 UIWebView 加载文档。不要忘记在视图控制器的头文件中遵守 UIWebViewDelegate 协议。当然，Word 文档必须包含在您的项目中。确保将文档添加到 Build Phases > Copy Bundle Resources。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    /* WRITE WORD FILE TO DOCUMENT DIRECTORY */
    NSString *docsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *path = [docsDirectory stringByAppendingPathComponent:@"Text.docx"];
    NSData *data = [NSData dataWithContentsOfFile:[[[NSBundle mainBundle] resourcePath] stringByAppendingString:@"/Text.docx"]];
    [data writeToFile:path atomically:YES];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

   /* READ WORD FILE FROM DOCUMENT DIRECTORY TO WEB VIEW */
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *wordFilePath = [documentsDirectory stringByAppendingPathComponent:@"Text.docx"];
    UIWebView *theWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
    NSURL *wordFileUrl = [NSURL fileURLWithPath:wordFilePath];
    NSURLRequest *request = [NSURLRequest requestWithURL:wordFileUrl];
    [theWebView loadRequest:request];
    theWebView.delegate = self;
    [self.view addSubview:theWebView];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    /* GET TEXT FROM WEB VIEW */
    NSString *text = [webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.innerText"];
} 
```

# c++ - C++ 中的 LNK2019 错误

> ID：10831979
> 
> 赞同：1
> 
> 时间：2012-05-31T10:40:12.313
> 
> 标签：c++

我收到了这个奇怪的链接器错误：

```
Error   1   error LNK2019: unresolved external symbol "public: virtual __thiscall Data::~Data(void)" (??1Data@@UAE@XZ) referenced in function "public: virtual __thiscall Job::~Job(void)" (??1Job@@UAE@XZ) C:\...\Job.obj

Error   2   error LNK2019: unresolved external symbol "public: __thiscall List::DataNode::DataNode(class List::DataNode const &)" (??0DataNode@List@@QAE@ABV01@@Z) referenced in function "public: __thiscall List::List(class List const *)" (??0List@@QAE@PBV0@@Z)    C:\...\List.obj 
```

从第一个错误描述来看，它可能与析构函数有关。

我有一个带有纯虚拟析构函数的空抽象数据类：

```
virtual ~Data()=0; 
```

和一个派生自数据的 Job 类，具有析构函数的简单实现：

```
Job::~Job()
{
} 
```

你能发现问题吗？我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T10:41:55.313

您需要为纯虚拟析构函数提供定义。

**C++03 12.4 析构函数**
**第 7 段：**

> **析构函数可以声明为虚拟（10.3）或纯虚拟（10.4）；如果在程序中创建了该类或任何派生类的任何对象，则应定义析构函数**。如果一个类有一个带有虚拟析构函数的基类，那么它的析构函数（无论是用户声明的还是隐式声明的）都是虚拟的。

# scala - 无法执行 scala^z3 斐波那契示例

> ID：10831982
> 
> 赞同：2
> 
> 时间：2012-05-31T10:40:23.053
> 
> 标签：scala, z3

我正在尝试在 MacOS 64 位上使用 Scala^Z3，设置如下：

res0: String = Z3 4.0 (build 0, rev. 0), ScalaZ3 3.2.c (in dev.)

现在，当我尝试从[ScalaZ3 主页](http://lara.epfl.ch/w/jniz3-scala-examples)执行斐波那契示例时，我得到以下输出，然后执行停止：

```
fib0 ::: (= (fib!0 0) 0)
fib1 ::: (= (fib!0 1) 1)
fibN ::: (forall (k!0 Int)
  (implies (> k!0 1) (= (fib!0 k!0) (+ (fib!0 (- k!0 1)) (fib!0 (- k!0 2)))))
  :pat {(fib!0 k!0)})
Query ::: (= x (fib!0 1)) 
```

我等了几个小时，但没有更多的事情发生；）有没有人有任何想法，我做错了什么？scala或z3版本太新？问候，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:40:08.640

（请注意，我们还没有机会使用最新版本的 Z3 测试 Scala^Z3。感谢您在这里破土动工。）

您尝试解决的问题包含通用量词并且可以满足。Z3 的过去版本将终止，`unknown`您可以要求一个暂定模型（如您链接到的文档页面上所示）。很可能是较新的版本被设置为非常努力地反驳公式而不是 return `unknown`，因此不会终止。

您可以尝试一个无法满足的查询，这应该会更好。例如尝试：

```
(= (fib 10) (fib 12)) 
```

Z3 应该能够多次实例化量词以得出公式不可满足的结论。

# ios - Xcode：在存档时生成自动评论

> ID：10831987
> 
> 赞同：8
> 
> 时间：2012-05-31T10:40:46.493
> 
> 标签：ios, xcode, comments, archive

**上下文：** 我的项目包含两台后端服务器，一台用于开发，一台用于生产。每次我为 QA 构建构建时，我都需要将构建所在的服务器放在 TestFlight 上（这没关系）。但是在我的 Xcode 存档列表中，我很容易获得 100 多个存档，如果它是 prod 或 dev 服务器，我必须手动放置。

这里的主要问题是当 QA 需要回滚到特定服务器上的特定版本时。

**问题：** 有没有一种自动的方法可以在构建时对存档发表评论？我想放一些类似的东西：

> [Build Number] - [Dev|Live] 服务器

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T09:06:42.263

我尝试了 Norman 的想法，但无法让语法起作用。最后我使用了：

```
ARCHIVE_DIR=$(ls -dt1 $HOME/Library/Developer/Xcode/Archives/*/*.xcarchive/Info.plist |head -n1)
/usr/libexec/PlistBuddy -c "Add :Comment string \"your comment goes here\"" "$ARCHIVE_DIR" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T14:03:05.880

嗨，根据其他答案，我做了类似的事情：

1.  单击项目图标选择“编辑方案...”
2.  选择“存档/后操作”
3.  按“+”“新建运行脚本动作”
4.  将“提供构建设置从”更改为所需的项目
5.  选择外壳
6.  粘贴此脚本（假设使用 git）：

```
cd "$PROJECT_FILE_PATH"
BRANCH=$(basename `git describe --all`)
COMMIT_HASH=$(git rev-parse HEAD | awk '{print substr($0,0,7)}')
ARCHIVE_PATH=$(dirname "$ARCHIVE_PRODUCTS_PATH")
ARCHIVE_NAME=${ARCHIVE_PATH}/Info.plist
DEST_DIR="<desired destination path>"

/usr/libexec/PlistBuddy -c "Add :Comment string \"${BRANCH}_${COMMIT_HASH}\""  "$ARCHIVE_NAME"

if [ -d "$DEST_DIR" ]; then
    PACKAGE_NAME=$DEST_DIR/${BRANCH}_${COMMIT_HASH}_${PRODUCT_NAME}

    xcodebuild -sdk $SDKROOT -archivePath "$ARCHIVE_PATH" -exportPath "$PACKAGE_NAME" -exportFormat ipa -exportArchive -exportProvisioningProfile "your provisioning profile name"
fi 
```

其他解决方案的优点是存档是基于 XCode 变量而不是基于搜索的本地化（不必要的开销）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:01:16.800

我们使用以下命令在构建之后直接向存档添加注释（xcodebuild）：

```
/usr/libexec/PlistBuddy -c "Add :Comment string \"your comment goes here\"" "$ARCHIVE_DIR/Info.plist" 
```

$ARCHIVE_DIR 是相关档案的目录，例如：

```
ARCHIVE_DIR=`ls -dt1 $HOME/Library/Developer/Xcode/Archives/*/*.xcarchive |head -n1` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-22T12:50:14.347

google了下找到这个老帖子，被主办方刷新问题搞的很恼火，刚刚有了一个很丑的想法。事实上，管理器会在 FS 更新时自动刷新。

所以我刚刚尝试在更新其 plist 后移动存档，然后将其移回其初始位置。像这样的东西：

```
ARCHIVE_PATH=$(dirname "$ARCHIVE_PRODUCTS_PATH")
ARCHIVE_PLIST=${ARCHIVE_PATH}/Info.plist

/usr/libexec/PlistBuddy -c "Add :Comment string \"your comment goes here\"" "$ARCHIVE_PLIST"

mv "$ARCHIVE_PATH" "$ARCHIVE_PATH"_TMP
sleep 1
mv "$ARCHIVE_PATH"_TMP "$ARCHIVE_PATH" 
```

睡眠对于让 OS X 刷新文件夹内容是必要的。您将看到存档消失，然后再次出现。

希望能帮助到你。

# ios - 带有 CABasicAnimation 的 iOS 5 exc_bad_access code=2

> ID：10831988
> 
> 赞同：0
> 
> 时间：2012-05-31T10:40:51.490
> 
> 标签：ios, uiview, exc-bad-access, cabasicanimation

我收到此错误：

![在此处输入图像描述](../Images/1b29814348c51f29b7d83aaa50925692.png)

使用此代码：

```
-(void)lowerGUI {
[mainGUI.layer addAnimation:guiLower forKey:@"transform.translation.y"]; 
```

}

我有一个 UIView，如果需要，我正在上下动画以将其移开。我在 viewDidLoad 中设置了动画：

```
guiLower = [CABasicAnimation animationWithKeyPath:@"transform.translation.y"];
guiLower.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
guiLower.duration = 1;
guiLower.fromValue = [NSNumber numberWithFloat:320];
guiLower.toValue = [NSNumber numberWithFloat:481]; 
```

代码构建并运行良好，但是当我单击按钮运行动画时，出现错误。

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:46:54.350

您可能应该持有对动画的引用：

```
guiLower = [CABasicAnimation animationWithKeyPath:@"transform.translation.y"]; 
```

在您的类的 ivar 或属性中，并确保您分配给它的对象被正确保留。实际上，`EXC_BAD_ACCESS`这通常是由访问已释放的对象实例引起的。

例子：

在 .h 文件中：

```
@property (nonatomic, retain) CABasicAnimation* guiLower; 
```

在 .m 文件中：

```
@synthesize guiLower;

...

self.guiLower = [CABasicAnimation animationWithKeyPath:@"transform.translation.y"];
... 
```

# solr - Solr-Sunburnt-Nutch。结果中缺少内容字段

> ID：10831989
> 
> 赞同：1
> 
> 时间：2012-05-31T10:40:56.503
> 
> 标签：solr, field, sunburnt

我在 django 中使用 solr-sunburnt。我使用 nutch 来抓取和索引我的网站。我将 nutch schema.xml 复制到 solr。

我面临的问题是，当我发送查询时，结果中没有内容字段。

无论我是从 sunburnt 还是直接从 solr（从浏览器，：8983/solr/select）查询，结果都是一样的。

我需要做什么才能在结果中获取内容字段

PS 在搜索和 solr 方面，我是菜鸟。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:58:42.070

感谢您的提示 aitchnyu22。

所以`content`结果中没有返回该字段的原因；是它一开始没有被索引。

它没有被索引的原因是因为从 nutch 复制到 solr的**schema.xml**文件的字段`stored`参数默认设置为。`content``false`

一旦您将其更改为`true`并从头开始重新索引，该`content`字段应该出现在您的结果中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T09:58:54.810

所以该领域应该是

```
<field name="content" type="text" stored="true" indexed="true"/> 
```

Nutch、Solr 或两者都设置为 true 吗？当然，这两个位置应该是相同的，但是哪个组件实际上使用了这个标志？

# django - Django反序列化器抛出KeyError

> ID：10831991
> 
> 赞同：0
> 
> 时间：2012-05-31T10:41:04.747
> 
> 标签：django

目前，我正在使用内置的 django 反序列化器反序列化对象模型，但我遇到了这个 KeyError 异常，我无法获得有关哪个键是问题的更多信息。我不确定如何进行调试。有人有想法么？

注意：我不能使用内置的 Django 调试页面。

这是我的代码的精简版：

```
try:   
        # loop over deserialised objects returned from 'deserializer'
        print "serialise 123"  
        for obj in serializers.deserialize(format, data):
            print "serialise 125"  
        return True 

    except DeserializationError:
        return -1

    except Exception as e:
        print "===================="
        print type(e)
        print "********************"
        print e.args
        print "!!!!!!!!!!!!!!!!!!!!"
        print e
        return False 
```

这是输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<django-objects version="1.0">
  <object pk="D5202F00-A8C7-11E1-B68A-00219B15530E" model="contacts.company">
    <field type="CharField" name="name">Company Name</field>
    <field type="CharField" name="internal_name">ComName</field>
    <field type="CharField" name="reference">NoRef</field>
    <field to="contacts.companystatus" name="company_status" rel="ManyToOneRel">9FBC97A3-2179-11E0-AEB7-005056C00008</field>
    <field type="CharField" name="vat_number">248053</field>
    <field type="CharField" name="registration_number">43905309</field>
    <field type="FloatField" name="discount">4.0</field>
    <field type="TextField" name="notes">gfhdfghdfghdfghdfgh</field>
    <field type="TextField" name="jms_code"><None></None></field>
    <field type="TextField" name="logo"><None></None></field>
  </object>
  <object pk="D53368E1-A8C7-11E1-AF74-00219B15530E" model="contacts.address">
    <field to="contacts.company" name="company" rel="ManyToOneRel">D5202F00-A8C7-11E1-B68A-00219B15530E</field>
    <field type="CharField" name="group_name">Company Name</field>
    <field type="CharField" name="line1">Address 1</field>
    <field type="CharField" name="line2">Address 2</field>
    <field type="CharField" name="line3">Address 3</field>
    <field type="CharField" name="town">Town</field>
    <field type="CharField" name="county">Country</field>
    <field type="CharField" name="postcode">BA13 3WQ</field>
    <field type="CharField" name="country_iso">GB</field>
    <field type="CharField" name="telephone">01225555555</field>
    <field type="CharField" name="fax">01225555555</field>
    <field type="CharField" name="email">Email@Addre.ss</field>
    <field type="CharField" name="website">www.si.te</field>
    <field type="CharField" name="description">Main</field>
    <field type="CharField" name="jms_code"><None></None></field>
    <field type="CharField" name="notes">Notes</field>
  </object>
  <object pk="D53D7B00-A8C7-11E1-A34B-00219B15530E" model="contacts.contact">
    <field to="contacts.address" name="address" rel="ManyToOneRel">D53368E1-A8C7-11E1-AF74-00219B15530E</field>
    <field to="generic.title" name="title" rel="ManyToOneRel">04CD69A1-7FD4-11E0-A8A3-7071BCB8D2AB</field>
    <field type="CharField" name="forename">Forename</field>
    <field type="CharField" name="surname">Surname</field>
    <field type="CharField" name="position">Position</field>
    <field type="CharField" name="mobile">07912345064</field>
    <field type="CharField" name="direct_line">01225555555</field>
    <field type="CharField" name="email">Email@Addre.ss</field>
    <field type="IntegerField" name="origin">1</field>
    <field type="IntegerField" name="lead_source">1</field>
    <field type="TextField" name="notes">Notes</field>
    <field to="contacts.contactstatus" name="contact_status" rel="ManyToOneRel">10293BF4-217A-11E0-AEB7-005056C00008</field>
    <field to="contacts.contactmethod" name="contact_method" rel="ManyToOneRel">C240965A-2179-11E0-AEB7-005056C00008</field>
    <field type="CharField" name="jms_code"><None></None></field>
  </object>
  <object pk="89E270EE-A8D3-11E1-AC38-00219B15530E" model="contacts.supplies">
    <field to="contacts.supplier" name="supplier" rel="ManyToOneRel">43D00F61-A8C8-11E1-ACFE-00219B15530E</field>
    <field to="boughtin.boughtincontrolpanel" name="bought_in_control_panel" rel="ManyToOneRel">4</field>
  </object>
  <object pk="89F0539E-A8D3-11E1-A7EE-00219B15530E" model="contacts.supplies">
    <field to="contacts.supplier" name="supplier" rel="ManyToOneRel">43D00F61-A8C8-11E1-ACFE-00219B15530E</field>
    <field to="boughtin.boughtincontrolpanel" name="bought_in_control_panel" rel="ManyToOneRel">5</field>
  </object>
  <object pk="43D00F61-A8C8-11E1-ACFE-00219B15530E" model="contacts.supplier">
    <field to="contacts.company" name="company" rel="ManyToOneRel">D5202F00-A8C7-11E1-B68A-00219B15530E</field>
    <field to="contacts.customercategory" name="category" rel="ManyToOneRel"><None></None></field>
    <field type="CharField" name="account_number">1</field>
    <field type="CharField" name="reference">NoRef</field>
    <field type="TextField" name="notes"><None></None></field>
    <field type="DateTimeField" name="date_created">2012-05-28 14:23:08</field>
    <field type="DateTimeField" name="date_modified">2012-05-28 15:43:50</field>
    <field to="auth.user" name="user" rel="ManyToOneRel">1</field>
    <field type="CharField" name="jms_code"><None></None></field>
  </object>
</django-objects> 
```

这是代码输出：

```
serialise 123
====================
<type 'exceptions.KeyError'>
********************
(u'<?xml version="1.0" encoding="utf-8"?>\n<django-objects version="1.0">\n  <object pk="D5202F00-A8C7-11E1-B68A-00219B15530E" model="contacts.company">\n    <field type="CharField" name="name">Compan
y Name</field>\n    <field type="CharField" name="internal_name">ComName</field>\n    <field type="CharField" name="reference">NoRef</field>\n    <field to="contacts.companystatus" name="company_statu
s" rel="ManyToOneRel">9FBC97A3-2179-11E0-AEB7-005056C00008</field>\n    <field type="CharField" name="vat_number">248053</field>\n    <field type="CharField" name="registration_number">43905309</field
>\n    <field type="FloatField" name="discount">4.0</field>\n    <field type="TextField" name="notes">gfhdfghdfghdfghdfgh</field>\n    <field type="TextField" name="jms_code"><None></None></field>\n
  <field type="TextField" name="logo"><None></None></field>\n  </object>\n  <object pk="D53368E1-A8C7-11E1-AF74-00219B15530E" model="contacts.address">\n    <field to="contacts.company" name="company"
 rel="ManyToOneRel">D5202F00-A8C7-11E1-B68A-00219B15530E</field>\n    <field type="CharField" name="group_name">Company Name</field>\n    <field type="CharField" name="line1">Address 1</field>\n    <f
ield type="CharField" name="line2">Address 2</field>\n    <field type="CharField" name="line3">Address 3</field>\n    <field type="CharField" name="town">Town</field>\n    <field type="CharField" name
="county">Country</field>\n    <field type="CharField" name="postcode">BA13 3WQ</field>\n    <field type="CharField" name="country_iso">GB</field>\n    <field type="CharField" name="telephone">0122555
5555</field>\n    <field type="CharField" name="fax">01225555555</field>\n    <field type="CharField" name="email">Email@Addre.ss</field>\n    <field type="CharField" name="website">www.si.te</field>\
n    <field type="CharField" name="description">Main</field>\n    <field type="CharField" name="jms_code"><None></None></field>\n    <field type="CharField" name="notes">Notes</field>\n  </object>\n
<object pk="D53D7B00-A8C7-11E1-A34B-00219B15530E" model="contacts.contact">\n    <field to="contacts.address" name="address" rel="ManyToOneRel">D53368E1-A8C7-11E1-AF74-00219B15530E</field>\n    <field
 to="generic.title" name="title" rel="ManyToOneRel">04CD69A1-7FD4-11E0-A8A3-7071BCB8D2AB</field>\n    <field type="CharField" name="forename">Forename</field>\n    <field type="CharField" name="surnam
e">Surname</field>\n    <field type="CharField" name="position">Position</field>\n    <field type="CharField" name="mobile">07912345064</field>\n    <field type="CharField" name="direct_line">01225555
555</field>\n    <field type="CharField" name="email">Email@Addre.ss</field>\n    <field type="IntegerField" name="origin">1</field>\n    <field type="IntegerField" name="lead_source">1</field>\n    <
field type="TextField" name="notes">Notes</field>\n    <field to="contacts.contactstatus" name="contact_status" rel="ManyToOneRel">10293BF4-217A-11E0-AEB7-005056C00008</field>\n    <field to="contacts
.contactmethod" name="contact_method" rel="ManyToOneRel">C240965A-2179-11E0-AEB7-005056C00008</field>\n    <field type="CharField" name="jms_code"><None></None></field>\n  </object>\n  <object pk="89E
270EE-A8D3-11E1-AC38-00219B15530E" model="contacts.supplies">\n    <field to="contacts.supplier" name="supplier" rel="ManyToOneRel">43D00F61-A8C8-11E1-ACFE-00219B15530E</field>\n    <field to="boughti
n.boughtincontrolpanel" name="bought_in_control_panel" rel="ManyToOneRel">4</field>\n  </object>\n  <object pk="89F0539E-A8D3-11E1-A7EE-00219B15530E" model="contacts.supplies">\n    <field to="contact
s.supplier" name="supplier" rel="ManyToOneRel">43D00F61-A8C8-11E1-ACFE-00219B15530E</field>\n    <field to="boughtin.boughtincontrolpanel" name="bought_in_control_panel" rel="ManyToOneRel">5</field>\n
  </object>\n  <object pk="43D00F61-A8C8-11E1-ACFE-00219B15530E" model="contacts.supplier">\n    <field to="contacts.company" name="company" rel="ManyToOneRel">D5202F00-A8C7-11E1-B68A-00219B15530E</fi
eld>\n    <field to="contacts.customercategory" name="category" rel="ManyToOneRel"><None></None></field>\n    <field type="CharField" name="account_number">1</field>\n    <field type="CharField" name=
"reference">NoRef</field>\n    <field type="TextField" name="notes"><None></None></field>\n    <field type="DateTimeField" name="date_created">2012-05-28 14:23:08</field>\n    <field type="DateTimeFie
ld" name="date_modified">2012-05-28 15:43:50</field>\n    <field to="auth.user" name="user" rel="ManyToOneRel">1</field>\n    <field type="CharField" name="jms_code"><None></None></field>\n  </object>
\n</django-objects>',)
!!!!!!!!!!!!!!!!!!!!
u'<?xml version="1.0" encoding="utf-8"?>\n<django-objects version="1.0">\n  <object pk="D5202F00-A8C7-11E1-B68A-00219B15530E" model="contacts.company">\n    <field type="CharField" name="name">Company
 Name</field>\n    <field type="CharField" name="internal_name">ComName</field>\n    <field type="CharField" name="reference">NoRef</field>\n    <field to="contacts.companystatus" name="company_status
" rel="ManyToOneRel">9FBC97A3-2179-11E0-AEB7-005056C00008</field>\n    <field type="CharField" name="vat_number">248053</field>\n    <field type="CharField" name="registration_number">43905309</field>
\n    <field type="FloatField" name="discount">4.0</field>\n    <field type="TextField" name="notes">gfhdfghdfghdfghdfgh</field>\n    <field type="TextField" name="jms_code"><None></None></field>\n
 <field type="TextField" name="logo"><None></None></field>\n  </object>\n  <object pk="D53368E1-A8C7-11E1-AF74-00219B15530E" model="contacts.address">\n    <field to="contacts.company" name="company"
rel="ManyToOneRel">D5202F00-A8C7-11E1-B68A-00219B15530E</field>\n    <field type="CharField" name="group_name">Company Name</field>\n    <field type="CharField" name="line1">Address 1</field>\n    <fi
eld type="CharField" name="line2">Address 2</field>\n    <field type="CharField" name="line3">Address 3</field>\n    <field type="CharField" name="town">Town</field>\n    <field type="CharField" name=
"county">Country</field>\n    <field type="CharField" name="postcode">BA13 3WQ</field>\n    <field type="CharField" name="country_iso">GB</field>\n    <field type="CharField" name="telephone">01225555
555</field>\n    <field type="CharField" name="fax">01225555555</field>\n    <field type="CharField" name="email">Email@Addre.ss</field>\n    <field type="CharField" name="website">www.si.te</field>\n
    <field type="CharField" name="description">Main</field>\n    <field type="CharField" name="jms_code"><None></None></field>\n    <field type="CharField" name="notes">Notes</field>\n  </object>\n  <
object pk="D53D7B00-A8C7-11E1-A34B-00219B15530E" model="contacts.contact">\n    <field to="contacts.address" name="address" rel="ManyToOneRel">D53368E1-A8C7-11E1-AF74-00219B15530E</field>\n    <field
to="generic.title" name="title" rel="ManyToOneRel">04CD69A1-7FD4-11E0-A8A3-7071BCB8D2AB</field>\n    <field type="CharField" name="forename">Forename</field>\n    <field type="CharField" name="surname
">Surname</field>\n    <field type="CharField" name="position">Position</field>\n    <field type="CharField" name="mobile">07912345064</field>\n    <field type="CharField" name="direct_line">012255555
55</field>\n    <field type="CharField" name="email">Email@Addre.ss</field>\n    <field type="IntegerField" name="origin">1</field>\n    <field type="IntegerField" name="lead_source">1</field>\n    <f
ield type="TextField" name="notes">Notes</field>\n    <field to="contacts.contactstatus" name="contact_status" rel="ManyToOneRel">10293BF4-217A-11E0-AEB7-005056C00008</field>\n    <field to="contacts.
contactmethod" name="contact_method" rel="ManyToOneRel">C240965A-2179-11E0-AEB7-005056C00008</field>\n    <field type="CharField" name="jms_code"><None></None></field>\n  </object>\n  <object pk="89E2
70EE-A8D3-11E1-AC38-00219B15530E" model="contacts.supplies">\n    <field to="contacts.supplier" name="supplier" rel="ManyToOneRel">43D00F61-A8C8-11E1-ACFE-00219B15530E</field>\n    <field to="boughtin
.boughtincontrolpanel" name="bought_in_control_panel" rel="ManyToOneRel">4</field>\n  </object>\n  <object pk="89F0539E-A8D3-11E1-A7EE-00219B15530E" model="contacts.supplies">\n    <field to="contacts
.supplier" name="supplier" rel="ManyToOneRel">43D00F61-A8C8-11E1-ACFE-00219B15530E</field>\n    <field to="boughtin.boughtincontrolpanel" name="bought_in_control_panel" rel="ManyToOneRel">5</field>\n
 </object>\n  <object pk="43D00F61-A8C8-11E1-ACFE-00219B15530E" model="contacts.supplier">\n    <field to="contacts.company" name="company" rel="ManyToOneRel">D5202F00-A8C7-11E1-B68A-00219B15530E</fie
ld>\n    <field to="contacts.customercategory" name="category" rel="ManyToOneRel"><None></None></field>\n    <field type="CharField" name="account_number">1</field>\n    <field type="CharField" name="
reference">NoRef</field>\n    <field type="TextField" name="notes"><None></None></field>\n    <field type="DateTimeField" name="date_created">2012-05-28 14:23:08</field>\n    <field type="DateTimeFiel
d" name="date_modified">2012-05-28 15:43:50</field>\n    <field to="auth.user" name="user" rel="ManyToOneRel">1</field>\n    <field type="CharField" name="jms_code"><None></None></field>\n  </object>\
n</django-objects>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:40:45.517

您的异常处理代码实际上是阻止您获取有用的调试信息的原因。只需删除所有这些无用的异常处理，您就会得到完整的错误消息和很好的回溯。

# android - 如何在安卓手机上模拟 nfc-tag

> ID：10831994
> 
> 赞同：13
> 
> 时间：2012-05-31T10:41:22.723
> 
> 标签：android, nfc

我有一个 android 手机（nexus s，sdk v15），它应该使用标签仿真将字符串发送到在 nfc-reader/writer-mode 下运行的开发板。我知道这不是 android 官方支持的，所以我可以通过直接访问驱动程序来本地完成（？）。

有没有任何人以前做过这个的例子，或者有一个做这个的应用程序（最好是开源的？）

我在谷歌上发现了一些通常建议不要这样做的东西，或者人们谈论它是如何可能的或者他们是如何（非常普遍地）做到这一点的，但我找不到任何代码或准确的建议。

我不想访问安全元素或做任何需要供应商/提供商批准的智能卡内容。我只想转移字符串。我也知道这可以通过 android api 方法通过 p2p 完成，但这不适用于董事会，所以我尝试这种方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T17:35:07.560

**对于运行库存 KitKat 4.4 的设备**

借助[Android KitKat 4.4](http://www.android.com/kitkat)，将手机作为 NFC*卡*的功能[内置于操作系统中](http://developer.android.com/guide/topics/connectivity/nfc/hce.html)，因此您不再需要依赖 Cyanogenmod 或自定义 ROM。它不会让手机本身充当 Mifare Classic 标签，但我在让我的手机与[ACR122 阅读器](http://www.acs.com.hk/en/products/3/acr122u-usb-nfc-reader/)通信方面取得了很好的效果，所以如果你可以在你的设备上获得 4.4，我肯定会推荐这个选项。

**如果您想在 4.4 以下运行并愿意使用 Cyanogenmod**

可以将[应用程序加载到您的设备上](http://nelenkov.blogspot.co.uk/2012/10/emulating-pki-smart-card-with-cm91.html)，并让它们通过 NFC 很容易地与阅读器通信，但是您必须运行[Cyanogenmod](http://www.cyanogenmod.org/)，此功能[从 CM 9.1 开始提供](http://www.cyanogenmod.org/blog/cyanogenmod9-1-and-simplytapp)。

**想要在 Gingerbread 上运行** *（旧答案）*

是的，这是可能的，并且已经为 2.3.4 发布了一个补丁来启用它，我将发布一些链接供您阅读。

他们确实需要将 2.3.4 Gingerbread ROM 连同其他一些补丁一起刷新到您的设备以启用卡仿真功能，所以如果您不愿意这样做，那么它们不会有太大用处，但就我而言意识到这是让它工作的唯一方法。我自己并没有实际测试过，但用户评论表明它有效。

这是一个描述整个过程的博客链接：http: [//techshek4u.blogspot.co.uk/2012/01/applying-card-emulation-patch-to_03.html](http://techshek4u.blogspot.co.uk/2012/01/applying-card-emulation-patch-to_03.html)

这是原始论坛帖子的链接，其中包含 2.3.4 的补丁以启用它： http:
[//forum.xda-developers.com/showthread.php?t=1281946](http://forum.xda-developers.com/showthread.php?t=1281946)

还有一个链接到各个开发人员试图让它工作的原始讨论，这取决于你对 Android 和 NFC 的技术知识，这可能或多或少有趣：[https ://groups.google.com/forum/#!msg/安卓开发者/1fw1qfFqpGc/6dlzvTqExN4J](https://groups.google.com/forum/#!msg/android-developers/1fw1qfFqpGc/6dlzvTqExN4J)

注意：根据 NFCGuy 的回答，“如果您的手机正在运行 ICS，请不要将手机降级到 GB。您无法将 NFC 固件降级为再次与 GB 兼容，因此如果您使用国标。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T21:30:19.930

If you root your device, it is possible to create an app that turns on the card emulation mode. It is not too difficult, see e.g. [https://stackoverflow.com/a/10506299/1202968](https://stackoverflow.com/a/10506299/1202968).

However, card emulation is completely handled by the Secure Element. Your app has no access to the data that is being transferred. The only way to get control over that would be to create and install a Java Card applet on the Secure Element. However, to be able to do that you need acces to secret authentication keys that are only known to Google.

PS: Don't bother with downgrading your phone to GB if it is running ICS. You cannot downgrade the NFC firmware to be compatible again with GB, so NFC will simply not work if you flash your device with GB.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-01T15:54:17.753

根据[http://developer.android.com/guide/topics/connectivity/nfc/hce.html，Android现在正式支持主机卡仿真](http://developer.android.com/guide/topics/connectivity/nfc/hce.html)

# perl - WWW::Selenium 不能作为普通浏览器工作

> ID：10831996
> 
> 赞同：0
> 
> 时间：2012-05-31T10:41:31.530
> 
> 标签：perl, selenium, checkbox, automation

我正在使用`WWW::Selenium`自动化网络流。当我选中一个复选框（全选）时，页面中存在的所有复选框都会被选中，并且链接会变为活动状态。

但是当我使用它时`WWW::Seleium::check()`，复选框被选中，但所有其他复选框和链接都没有效果。

有人可以指出问题所在吗？

**代码**

```
#!usr/bin/perl
use WWW::Selenium;
my $sel = WWW::Selenium->new( host => "localhost",
                              port => 5555,
                              browser => "*iexplore",
                              browser_url => "http://mygengo.com/string/p/demoproject-1/edit/slave/ui/de_de",
                            );

$sel->start;
$sel->open("http://mygengo.com/string/p/demoproject-1/edit/slave/ui/de_de");
$cook = $sel->get_cookie();

$sel->type("login_email", 'xxxxxxxxxxxxxx');
$sel->type("login_password", "xxxxxxxxx");
$sel->click("Submit");
$sel->wait_for_page_to_load(9000);
$sel->open("http://mygengo.com/string/p/demoproject-1/edit/slave/ui/de_de");

$sel->check('id=select-all-visible'); #ISSUE: This just checks the checkbox, but has no effect on other checkboxes & links, like it happens when done on the browser
$sel->click('id=show-order-translation');
$sel->wait_for_page_to_load(9000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:12:15.280

`WWW::Selenium::click()`我已经通过使用而不是解决了这个问题`WWW::Selenium::check()`。

如果选中复选框会导致某些页面操作，请`click`选择`check`.