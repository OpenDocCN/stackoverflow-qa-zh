# StackOverflow 问答 1000000-1000999

# vb6 - 处理时显示进度条

> ID：1000000
> 
> 赞同：19
> 
> 时间：2009-06-16T07:28:42.770
> 
> 标签：vb6, progress-bar

如果我从开始时间到结束时间从数据库中获取数据，在那段时间（处理/查询），我想显示一个进度条（类似于“处理中，请稍候”）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T09:55:57.320

从db获取数据的步骤：

1.  应用程序向数据库发送查询
2.  db 分析查询并准备结果
3.  db 将结果发送回应用程序

在大多数情况下，您无法说出需要多长时间，因此不要考虑进度条，而是考虑以下组合：

*   沙漏鼠标指针
*   状态栏中的“请稍候”
*   小动画（风车、旋转齿轮等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T12:34:22.643

虽然您无法确定查询将花费多长时间，但它可以让您的用户了解经过/剩余的时间。您可以使用 VB IDE 中的进度条控件。然后，您将其“最大”属性设置为您的查询记录数。当您遍历记录时，进度条的“值”属性会增加。这是一个例子；（'Rs' 是一个 ADODB 记录集）

```
 ProgressBar1.Max = Rs.RecordCount - 1

        For P = 0 To .RecordCount - 1
           ProgressBar1.Value = P

            'some process here
            Rs.MoveNext

        Next P 
```

# c++ - 描述符转换问题

> ID：1000001
> 
> 赞同：0
> 
> 时间：2009-06-16T07:28:52.333
> 
> 标签：c++, symbian

```
CRSAPublicKey* publicKey;

const CRSAPublicKey &iRSAPublicKey= *publicKey;

iEncryptor = CRSAPKCS1v15Encryptor::NewL(iRSAPublicKey); 
```

我的问题在第二行，因为我必须传递对函数的引用，因为我正在从指针创建引用。

我不知道我这样做是对还是错。第一行编译但在第二行它崩溃了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T07:50:54.450

如果您需要将 rfeference 传递给函数，则无需创建中间命名值：

```
CRSAPublicKey* publicKey = .... // initialise pointer somehow

iEncryptor = CRSAPKCS1v15Encryptor::NewL( * publickey ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T07:39:12.020

您正在声明`publicKey`变量，但您从未初始化它。使用未初始化的指针很容易导致 KERN-EXEC 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-04T12:54:42.657

为避免混淆，您应该只在成员变量前加上 i。它很重要，因为它允许您确保以适当的方式销毁它们（即在析构函数中而不是清理堆栈中）。

关于主题，您的第一行代码应该大致如下：

```
CRSAPublicKey* publicKey=CRSAPublicKey::NewLC(); 
```

# linux - 什么是 SEGV_MAPERR？

> ID：1000002
> 
> 赞同：103
> 
> 时间：2009-06-16T07:29:24.343
> 
> 标签：linux, posix, segmentation-fault, coredump

什么是`SEGV_MAPERR`，为什么总是想出来`SIGSEGV`？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2015-01-23T18:36:18.230

有两种常见的[SEGV](https://elixir.bootlin.com/linux/v5.15.8/source/include/uapi/asm-generic/siginfo.h#L228)类型，这是由无效内存访问导致的错误：

1.  访问了具有错误权限的页面。例如，它是只读的，但您的代码试图写入它。这将报告为[`SEGV_ACCERR`](https://elixir.bootlin.com/linux/v5.15.8/source/include/uapi/asm-generic/siginfo.h#L231)。
2.  访问的页面甚至根本没有映射到应用程序的地址空间。这通常是由于取消引用空指针或被小整数值损坏的指针造成的。这被报告为[`SEGV_MAPERR`](https://elixir.bootlin.com/linux/v5.15.8/source/include/uapi/asm-generic/siginfo.h#L230)。

某种文档（索引 Linux 源代码）在`SEGV_MAPERR`这里： http://lxr.free-electrons.com/ident?i= [SEGV_MAPERR](http://lxr.free-electrons.com/ident?i=SEGV_MAPERR)。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-06-16T07:33:12.713

这是一个分段错误。很可能是悬空指针问题，或某种缓冲区溢出。

`SIGSSEGV`是根据问题（分段错误）终止它的信号。

检查悬空指针以及溢出问题。

启用核心转储将帮助您确定问题。

# java - 从另一个程序集反序列化类型期间的类加载问题

> ID：1000004
> 
> 赞同：0
> 
> 时间：2009-06-16T07:30:22.533
> 
> 标签：java, .net, serialization, ikvm

有两个程序集：
1）包含序列化程序的程序集。这是序列化和反序列化开始的地方。
2) 包含序列化类型的程序集。这是从第一个程序集调用序列化程序的地方。
assembly1 中的序列化程序的想法很简单。它有两种方法用于将对象从字节数组转换为字节数组。该序列化程序的客户端代码如下所示：

```
 ISerializer serializer = ...

    MyClass my = new MyClass();
    byte[] data = serializer.Serialize(my);
    Console.WriteLine(Encoding.ASCII.GetString(data)); // dump serialized form
    MyClass another = (MyClass)serializer.Deserialize(data); 
```

MyClass 是在 assembly2 中定义的，因此 assembly1 对此一无所知。如果序列化器是用标准的 .Net 类实现的，那么该场景将起作用，如下所示：

```
public class DotNetSerializer : ISerializer
{
    public byte[] Serialize(object obj)
    {
        BinaryFormatter formatter = new BinaryFormatter();
        using (MemoryStream stream = new MemoryStream())
        {
            formatter.Serialize(stream, obj);
            byte[] result = stream.GetBuffer();
            Array.Resize(ref result, (int)stream.Length);
            return result;
        }
    }

    public object Deserialize(byte[] data)
    {
        BinaryFormatter formatter = new BinaryFormatter();
        using (Stream stream = new MemoryStream(data))
        {
            return formatter.Deserialize(stream);
        }
    }
} 
```

MyClass 的序列化形式将包含有关定义 MyClass 的程序集的信息。但是，如果序列化器将使用 Java 的类（使用 IKVM 转换）来实现，那么在反序列化期间将抛出 ClassNotFound 异常。这是一个使用 Java 类的序列化器实现：

```
public class JavaSerializer : ISerializer
{
    public object Deserialize(byte[] data)
    {
        ByteArrayInputStream stream = new ByteArrayInputStream(data);
        ObjectInputStream ois = new ObjectInputStream(stream);
        return ois.readObject();
    }

    public byte[] Serialize(object obj)
    {
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(stream);
        oos.writeObject(obj);
        stream.flush();
        return stream.toByteArray();
    }
} 
```

这在 .Net 中不起作用，但如果从 Eclipse 加载插件清单中的附加条目（例如 BuddyPolicy 和 RegisterBuddy），则在 Java 中可以正常工作。我不能只从 JavaSerializer 切换到 DotNetSerializer，因为在我的应用程序（主要用 Java 编写）中有很多 readObject、writeObject、readResolve 等......但我需要以某种方式解决这个问题，所以我寻求解决方案. 目前我看到了一些假设的解决方法：

*   重载 ObjectOutputStream 的某些方法，因此 MyClass 的序列化形式也将包含程序集名称，例如“MyClass，MyAssembly，...”。
*   重载 ObjectInputStream 中的某些方法，因此类将以某种不同的方式加载，也许应该在某些不同的程序集中进行搜索，等等。
*   向程序集清单添加一些信息，以便 IKVM 知道在哪里搜索 MyClass。这是真的吗？这个问题应该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T03:44:55.057

IKVM 团队的人给了我答案：

> 1）您可以子类 ObjectOutputStream 并覆盖 annotateClass 来编写程序集名称和子类 ObjectInputStream 并覆盖 resolveClass 来读取程序集名称。
> 
> 2) 将以下自定义属性添加到执行反序列化的程序集：[程序集：IKVM.Attributes.CustomAssemblyClassLoader(typeof(ikvm.runtime.AppDomainAssemblyClassLoader))]

我还发现我可以在应用程序配置文件中使用显式设置覆盖任何程序集的类加载器：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="ikvm-classloader:MyExampleAssembly" value="ikvm.runtime.AppDomainAssemblyClassLoader, IKVM.OpenJDK.ClassLibrary, Version=0.37.0.0, Culture=neutral, PublicKeyToken=null" />
  </appSettings>
</configuration> 
```

当使用-classloader 命令行参数时，它也可以在从java jar 转换过程中设置。

# c# - MDI Child.show() 以一种奇怪的方式显示表单

> ID：1000016
> 
> 赞同：1
> 
> 时间：2009-06-16T07:35:19.060
> 
> 标签：c#, .net, winforms, mdi

我有一个有 5 个 MDI 子级的主窗体。创建主窗体时，也会创建并显示 mdi 子窗体。

我在屏幕上为它们分配了不同的位置，但是当它们显示时，它们从默认位置开始，并以令人不安的方式移动到新位置。我试图在显示表单之前分配位置，但是在调用 the.Show() 之后，它们往往会转到某个默认位置。有没有办法避免显示从默认位置到新位置的这种移动？

这是一个代码片段

```
groupSettingsForm.Show();
        groupSettingsForm.Location = new Point(0, 0);
        dsForm.Show();
        dsForm.Location = new Point(groupSettingsForm.Width, 0);
        dPlots.Show();
        dPlots.Location = new Point(groupSettingsForm.Width, dsForm.Height);
        alertsForm.Show();
        alertsForm.Location = new Point(groupSettingsForm.Width, dsForm.Height + dPlots.Height);
        dataValuesForm.Show();
        dataValuesForm.Location = new Point(0, groupSettingsForm.Height); 
```

我试过这个，但它对我不起作用

```
 groupSettingsForm.Location = new Point(0, 0);
        groupSettingsForm.Show();

        dsForm.Location = new Point(groupSettingsForm.Width, 0);
        dsForm.Show();

        dPlots.Location = new Point(groupSettingsForm.Width, dsForm.Height);
        dPlots.Show();

        alertsForm.Location = new Point(groupSettingsForm.Width, dsForm.Height + dPlots.Height);
        alertsForm.Show();

        dataValuesForm.Location = new Point(0, groupSettingsForm.Height);
        dataValuesForm.Show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T09:04:33.693

我只是有类似的东西-[我的问题可以在这里找到](https://stackoverflow.com/questions/998675/how-can-i-control-the-location-of-a-dialog-when-using-showdialog-to-display-it)。

您需要将`StartPosition`属性设置为`FormStartPosition.Manual`：

```
form.StartPosition = FormStartPosition.Manual;
form.Location = new System.Drawing.Point(0, 0); 
```

# c# - Windows 服务与 Windows 应用程序 - 最佳实践

> ID：1000023
> 
> 赞同：30
> 
> 时间：2009-06-16T07:36:09.467
> 
> 标签：c#, windows, winforms, windows-services

我应该什么时候使用 Windows 服务，什么时候应该使用在通知区域中运行的“后台应用程序”？

如果我没记错的话，我的设计决定是，任何需要在用户登录计算机之前运行的应用程序都应该是一项服务。对于其他一切，请使用后台应用程序。我的决定对吗？

此外，如果我的后台应用程序需要“管理员权限”，我会使用清单进行升级。作为服务运行还有其他特定优势吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-06-16T07:43:54.197

我的一般经验法则如下

*   如果它需要始终运行，它就是一项服务。
*   如果它需要在特定的用户帐户、网络服务、本地系统下运行，通常它是一个服务（或 COM+ 应用程序）
*   如果用户需要对其进行一些控制，它通常是一个通知区域应用程序。
*   如果它需要通知用户某事，它是一个通知区域应用程序

当您需要将某些东西作为系统帐户运行并与之交互时，乐趣就来了。IIS 就是一个很好的例子，它是一个服务，但管理是一个应用程序 - 它需要在启动时运行，它需要访问用户无法正常访问的特定内容 (c:\inetpub)，但是用户需要能够启动、停止和配置它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T07:43:51.997

如果应用程序具有关键目的并且不应该（或很少）关闭，我会将应用程序设计为服务。Windows 服务提供了良好的崩溃恢复选项、良好的通知（请参阅服务属性中的恢复选项卡）。

使用服务的一个很好的理由是因为它们可以在任何用户下运行（因此，如果您将它们部署在远程服务器上，您可以在启动服务后安全地注销，而不必担心应用程序也会关闭）。

我还结合桌面应用程序设计服务，该应用程序可以与服务交互，并可用于在运行时监控或重新配置服务。这样，您就可以在服务中享受托盘应用程序的所有好处。

但是，您不应该滥用服务，而应该只将它们用于重要的应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-16T07:42:52.917

我相信您的决定几乎是正确的，但是，我还要添加一个条件。以 mysqld 服务为例（在这种情况下您可以选择，但大多数人将其作为服务运行）。它作为服务运行，因为您希望通过可能的多个应用程序随时访问该服务。重要的是，它响应所有调用它的应用程序，它本身并没有什么大不了的，除了等待为其他应用程序提供服务。

只是我在做决定时也会考虑的事情。

# javascript - 如何在 IE 中使用 Javascript 集中无线电控制？

> ID：1000028
> 
> 赞同：0
> 
> 时间：2009-06-16T07:38:33.703
> 
> 标签：javascript, internet-explorer

鉴于以下代码：

```
function test() {
    document.forms[0].TEST[0].focus();
}
```

```
<form>
    <input type="button" value="Test" onclick="test()" />
    <input type="radio" name="TEST" value="A">A
    <input type="radio" name="TEST" value="B">B
</form>
```

在 IE6 中，单击按钮不会使控件聚焦，除非我已经至少在收音机中切换过一次，在这种情况下它可以工作。=/

知道我应该如何集中控制吗？当然，上述方法在 FF 中效果很好。

编辑：我发现控件正在被聚焦，除了单选按钮周围的突出显示框没有被呈现。（我可以按空格来激活单选按钮，也可以使用箭头键来更改活动按钮）。所以问题就变成了：如何强制渲染焦点高亮框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T07:41:07.053

其实是对焦，你可以通过对焦第二项来测试，点击按钮点击空格后，可以看到第二项被选中。这表明项目正在获得焦点，但我认为您的意思是焦点后的虚线选择。我不知道该怎么做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T08:16:33.987

Internet Explorer 的辅助功能高级选项中有一个选项，上面写着“使用选择或焦点移动系统光标”。如果您有办法传播 IE 设置，这可能是一个解决方案。

编辑：它不起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T09:26:04.657

您可以为焦点轮廓强制使用任何样式

```
function test() {
    document.forms[0].TEST[0].focus();
}
```

```
/* if this CSS rule is overrode by another one, then strengthen the selector of this rule to make it more specific (or use "!important") */
input[name=TEST]:focus {
    outline: 1px dotted blue;
}
```

```
<form>
    <input type="button" value="Test" onclick="test()" />
    <input type="radio" name="TEST" value="A" />
    <input type="radio" name="TEST" value="B" />
</form>
```

# c - 你会使用什么分类技术？

> ID：1000036
> 
> 赞同：2
> 
> 时间：2009-06-16T07:40:16.557
> 
> 标签：c, algorithm, sorting, word

如果您有 65536 个随机英语单词，每个单词的长度为 1-32，您需要计算外观并根据字典或外观排名进行排序，您如何构建数据以及使用哪种排序技术来最快地处理它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-16T07:49:19.273

说真的，65,000 个单词是一个微不足道的排序问题。除非您必须每分钟重新排序*多次*，否则我建议您只使用`qsort()`语言内置的。毕竟，这就是它的目的。

我建议对 alpha 顺序使用一个简单的 char 指针数组。为了维护频率顺序，您可以使用以下结构：

```
typedef struct {
    char *word;      // points to one of the strings.
    int frequency;   // counts the number of occurrences.
} tFreq; 
```

在另一个数组中，您可以在创建或修改按 alpha 排序的指针数组时完全填充该数组（请参阅下文，了解为什么这个看似低效的过程是合适的）。

作为速度示例，请考虑以下代码：

```
#include <stdio.h>
#define MAXWDS 66000

static char *words[MAXWDS];

static int compFn (const void *p1, const void *p2) {
    return strcmp (*((const char **)p1), *((const char **)p2));
}

int main() {
    char *pWord;
    int i, j, sz;
    time_t t0, t1;

    srand (time (0));
    for (i = 0; i < MAXWDS; i++) {
        sz = rand() % 32 + 1;
        pWord = words[i] = malloc (sz + 1);
        for (j = 0; j < sz; j++)
            pWord[j] = 'A' + (rand() % 26);
        pWord[sz] = '\0';
    }

    t0 = time(0);
    qsort (words, MAXWDS, sizeof (char*), compFn);
    t1 = time(0);

    printf ("Time taken for %7d elements was %2d second(s)\n", MAXWDS, t1 - t0);
    return 0;
} 
```

在 3GHz 双核 Intel 芯片上，以下是 MAXWDS 的几个选定值的输出：

```
 MAXWDS   Output
---------   ------
   66,000   Time taken for   66000 elements was  0 second(s)
  100,000   Time taken for  100000 elements was  0 second(s)
  500,000   Time taken for  500000 elements was  0 second(s)
  600,000   Time taken for  600000 elements was  1 second(s)
1,000,000   Time taken for 1000000 elements was  1 second(s)
2,000,000   Time taken for 2000000 elements was  2 second(s)
3,000,000   Time taken for 3000000 elements was  5 second(s)
4,000,000   Time taken for 4000000 elements was  7 second(s)
5,000,000   Time taken for 5000000 elements was  9 second(s)
6,000,000   Time taken for 6000000 elements was 10 second(s)
7,000,000   Time taken for 7000000 elements was 11 second(s)
9,999,999   Time taken for 9999999 elements was 21 second(s) 
```

因此，如您所见，qsort 对于您正在谈论的数据集大小相当有效。

事实上，实现维护两个排序列表的整个过程，如下面的代码所示，向您展示了 66,000 个元素是多么微不足道。基本前提是：

*   根据需要修改 alpha 排序的字符串，然后对它们进行完整的 alpha 排序 ( `t0 to t1`)。
*   利用它们已排序的事实可以轻松地将它们转移到另一个数组，但每个单词只有一个元素，以及频率 ( `t1 to t2`)。
*   对该频率数组进行排序（`t2 to t3`）。

以下代码显示了这是如何完成的。唯一有点棘手的地方是从 alpha 阵列到频率阵列的传输。

```
#include <stdio.h>

#define MAXWDS 66000
typedef struct {
    char *word;
    int frequency;
} tFreq;
static char *words[MAXWDS];
static tFreq freq[MAXWDS];
static int numFreq;

static int compFn (const void *p1, const void *p2) {
    return strcmp (*((const char **)p1), *((const char **)p2));
}

static int compFn2 (const void *p1, const void *p2) {
    return ((tFreq*)p2)->frequency - ((tFreq*)p1)->frequency;
} 
```

```
int main() {
    char *pWord;
    int i, j, sz;
    time_t t0, t1, t2, t3;

    // Generate random words.
    srand (time (0));
    for (i = 0; i < MAXWDS; i++) {
        sz = rand() % 32 + 1;
        pWord = words[i] = malloc (sz + 1);
        for (j = 0; j < sz; j++)
            pWord[j] = 'A' + (rand() % 26);
        pWord[sz] = '\0';
    }

    t0 = time(0);

    // Alpha sort.
    qsort (words, MAXWDS, sizeof (char*), compFn);
    t1 = time(0); 
```

```
 // Pre-condition to simplify loop: make first word with zero frequency.

    freq[0].word = words[0];
    freq[0].frequency = 0;

    // Transfer to frequency array.

    for (i = numFreq = 0; i < MAXWDS; i++) {
        // If new word, add it and set frequency to 0.
        if (strcmp (freq[numFreq].word, words[i]) != 0) {
            numFreq++;
            freq[numFreq].word = words[i];
            freq[numFreq].frequency = 0;
        }

        // Increment frequency (for old and new words).
        freq[numFreq].frequency++;
    }
    numFreq++;
    t2 = time(0);

    // Sort frequency array.
    qsort (freq, numFreq, sizeof (tFreq), compFn2);
    t3 = time(0); 
```

```
 // Output stats.
    printf ("Time taken for      sorting %5d elements was %d seconds.\n",
        MAXWDS, t1 - t0);
    printf ("Time taken for transferring %5d elements was %d seconds.\n",
        numFreq, t2 - t1);
    printf ("Time taken for      sorting %5d elements was %d seconds.\n",
        numFreq, t3 - t2);
    printf ("Time taken for   everything %5s          was %d seconds.\n\n",
        "", t3 - t0);
    for (i = 0; i < 28; i++) {
        printf ("[%-15s] %5d\n", freq[i].word, freq[i].frequency);
    }

    return 0;
} 
```

66,000 个随机字符串的输出是（前几个字符串在那里，因此您可以看到排序有效）：

```
Time taken for      sorting 66000 elements was 0 seconds.
Time taken for transferring 62422 elements was 0 seconds.
Time taken for      sorting 62422 elements was 0 seconds.
Time taken for   everything                was 0 seconds.

[Z              ]   105
[H              ]    97
[X              ]    95
[P              ]    90
[D              ]    89
[K              ]    87
[T              ]    86
[J              ]    85
[G              ]    84
[F              ]    83
[Q              ]    83
[W              ]    81
[V              ]    81
[M              ]    80
[I              ]    79
[O              ]    78
[A              ]    78
[B              ]    75
[U              ]    74
[N              ]    73
[C              ]    73
[S              ]    70
[Y              ]    68
[L              ]    65
[E              ]    60
[R              ]    59
[NQ             ]     8
[XD             ]     8 
```

因此，即使您*每次插入或删除值时都*执行这些操作，它们也不会产生明显的影响（除非很明显，如果您每隔几秒钟执行一次以上，但您会考虑将改变效率）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-16T08:30:09.580

查看[http://www.sorting-algorithms.com/](http://www.sorting-algorithms.com/)以获得不同排序方法的良好视觉表示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T09:39:52.360

哦，天哪，这是一个措辞糟糕的家庭作业问题——导师应该比这更清楚。最后一部分是“以最快的速度处理它”。不幸的是，要确定一个算法需要多长时间执行是非常非常困难的。大 O 表示法没有帮助，因为它衡量的是复杂性，而不是速度（有关这方面的更多信息，[请参阅 Raymond Chen 最近的博客条目](http://blogs.msdn.com/oldnewthing/archive/2009/06/12/9728292.aspx)）。唯一实用的方法是实现算法，运行它并测量所花费的时间。此外，输入数据会影响执行时间 - qsort 和二叉树对于已经排序的数据不是最优的。

你可以写一篇关于“最快”的整篇论文，但仍然没有得到具体的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T07:49:57.213

[桶排序？](http://en.wikipedia.org/wiki/Bucket_sort)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T08:10:20.813

我会使用我的运行时库碰巧提供的任何排序算法。通常，sort() 使用快速排序。

不要担心排序算法的选择，直到你*知道你的标准算法***因为你已经测量过它**运行得不够好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T08:02:48.703

[合并排序](http://en.wikipedia.org/wiki/Merge_sort)应该可以很好地解决这个问题，并且很容易在 c 中工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T08:20:10.203

您可以使用

```
struct elem { char *word, int frequency; } // pointer to 'string' word
struct elem dict[1<<16]; // number of words 
```

使用标准 qsort 按单词或频率排序，或者如果您同时需要两个订单，请使用第二个数组。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-16T08:30:33.603

选择排序算法取决于您拥有的数据量（65k 并不多）以及您选择的时间和内存之间的权衡。如果要快速检索数据，则必须使用更多内存。另一方面，如果您决定节省内存，您将无法快速找到记录。

算法的选择非常简单——使用你的语言库提供的任何东西，除非你有证据证明这还不够好。

您需要按两个标准对数据进行排序，因此您实际上需要两个排序数组。它们都应该是某种指针数组。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-16T08:40:07.083

听起来好像您必须以两种不同的方式对其进行排序：

1.  在读取输入文件时，当您还不知道输入中的所有单词时：[二进制搜索](http://en.wikipedia.org/wiki/Binary_search)以测试该单词是否已经在表中，[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)，如果不是（对这两种算法都使用[词法顺序](http://en.wikipedia.org/wiki/Collation#Alphabetical_order).)
2.  列表和频率完成后，再次按词频排序（使用[快速排序](http://en.wikipedia.org/wiki/Quicksort)或可能的[合并排序](http://en.wikipedia.org/wiki/Merge_sort)）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-16T08:50:31.790

使用特里。这样，两个“排序”都将是图的简单遍历。

# big-o - 使用这两个函数的 big-Oh 表示法的增长率的最小上限是多少

> ID：1000038
> 
> 赞同：0
> 
> 时间：2009-06-16T07:40:56.073
> 
> 标签：big-o

我在 Big Oh Notation 上度过了最艰难的时光。我想知道你能不能帮帮我。使用这两个函数的 big-Oh 表示法，增长率的最小上限是多少？

```
n   f(n)
----------
5   18
10  35
15  53
20  70
25  88
30  105
35  123
40  140

n   g(n)
-----------
5   240
10  1990
15  6740
20  15990
25  31240
30  53990
35  85740
40  127990 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T07:45:12.320

n -> f(n) 看起来像 O(c*n) = O(n)

n -> g(n) ~ O(2*n^3) = O (n^3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:59:35.320

`f(n) = ceil(3.5*n)`它是 的成员`O(h(n))`，

`g(n) = 2*n^3-10`它是`O(h(n^3))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T07:50:55.383

第一个看起来很像 o(n)，因为 n 增加 8 倍会导致 f(n) 增加约 8 倍。

第二个看起来大约是 n^3

# c# - 数据绑定到 WPF 树视图中的 SelectedItem

> ID：1000040
> 
> 赞同：254
> 
> 时间：2009-06-16T07:41:35.650
> 
> 标签：c#, wpf, mvvm, treeview, selecteditem

如何检索在 WPF 树视图中选择的项目？我想在 XAML 中执行此操作，因为我想绑定它。

您可能认为它是`SelectedItem`但显然~~不存在~~是只读的，因此无法使用。

这就是我想要做的：

```
<TreeView ItemsSource="{Binding Path=Model.Clusters}" 
            ItemTemplate="{StaticResource ClusterTemplate}"
            SelectedItem="{Binding Path=Model.SelectedCluster}" /> 
```

我想将 绑定`SelectedItem`到我的模型上的属性。

但这给了我错误：

> “SelectedItem”属性是只读的，不能从标记中设置。

**编辑：** 好的，这就是我解决这个问题的方法：

```
<TreeView
          ItemsSource="{Binding Path=Model.Clusters}" 
          ItemTemplate="{StaticResource HoofdCLusterTemplate}"
          SelectedItemChanged="TreeView_OnSelectedItemChanged" /> 
```

在我的 xaml 的代码隐藏文件中：

```
private void TreeView_OnSelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
{
    Model.SelectedCluster = (Cluster)e.NewValue;
} 
```

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2011-02-25T14:29:47.633

我意识到这已经接受了一个答案，但我把它放在一起来解决问题。它使用了与 Delta 的解决方案类似的想法，但不需要子类化 TreeView：

```
public class BindableSelectedItemBehavior : Behavior<TreeView>
{
    #region SelectedItem Property

    public object SelectedItem
    {
        get { return (object)GetValue(SelectedItemProperty); }
        set { SetValue(SelectedItemProperty, value); }
    }

    public static readonly DependencyProperty SelectedItemProperty =
        DependencyProperty.Register("SelectedItem", typeof(object), typeof(BindableSelectedItemBehavior), new UIPropertyMetadata(null, OnSelectedItemChanged));

    private static void OnSelectedItemChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var item = e.NewValue as TreeViewItem;
        if (item != null)
        {
            item.SetValue(TreeViewItem.IsSelectedProperty, true);
        }
    }

    #endregion

    protected override void OnAttached()
    {
        base.OnAttached();

        this.AssociatedObject.SelectedItemChanged += OnTreeViewSelectedItemChanged;
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();

        if (this.AssociatedObject != null)
        {
            this.AssociatedObject.SelectedItemChanged -= OnTreeViewSelectedItemChanged;
        }
    }

    private void OnTreeViewSelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        this.SelectedItem = e.NewValue;
    }
} 
```

然后，您可以在 XAML 中将其用作：

```
<TreeView>
    <e:Interaction.Behaviors>
        <behaviours:BindableSelectedItemBehavior SelectedItem="{Binding SelectedItem, Mode=TwoWay}" />
    </e:Interaction.Behaviors>
</TreeView> 
```

希望它会帮助别人！

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2009-06-16T08:04:28.467

此属性存在：[TreeView.SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.treeview.selecteditem.aspx)

但它是只读的，所以你不能通过绑定来分配它，只能检索它

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2010-08-20T21:43:03.857

好吧，我找到了解决方案。它移动了混乱，使 MVVM 工作。

首先添加这个类：

```
public class ExtendedTreeView : TreeView
{
    public ExtendedTreeView()
        : base()
    {
        this.SelectedItemChanged += new RoutedPropertyChangedEventHandler<object>(___ICH);
    }

    void ___ICH(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        if (SelectedItem != null)
        {
            SetValue(SelectedItem_Property, SelectedItem);
        }
    }

    public object SelectedItem_
    {
        get { return (object)GetValue(SelectedItem_Property); }
        set { SetValue(SelectedItem_Property, value); }
    }
    public static readonly DependencyProperty SelectedItem_Property = DependencyProperty.Register("SelectedItem_", typeof(object), typeof(ExtendedTreeView), new UIPropertyMetadata(null));
} 
```

并将其添加到您的 xaml：

```
 <local:ExtendedTreeView ItemsSource="{Binding Items}" SelectedItem_="{Binding Item, Mode=TwoWay}">
 .....
 </local:ExtendedTreeView> 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2016-03-09T09:57:22.360

它的回答比 OP 所期望的要多一点……但我希望它至少可以帮助一些人。

如果您想`ICommand`在更改时执行 a `SelectedItem`，您可以在事件上绑定命令，并且不再需要使用 a`SelectedItem`中的属性。`ViewModel`

为此：

1-添加参考`System.Windows.Interactivity`

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

2-将命令绑定到事件`SelectedItemChanged`

```
<TreeView x:Name="myTreeView" Margin="1"
            ItemsSource="{Binding Directories}">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectedItemChanged">
            <i:InvokeCommandAction Command="{Binding SomeCommand}"
                                   CommandParameter="
                                            {Binding ElementName=myTreeView
                                             ,Path=SelectedItem}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <TreeView.ItemTemplate>
           <!-- ... -->
    </TreeView.ItemTemplate>
</TreeView> 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2011-02-04T14:15:19.370

这可以通过仅使用绑定和 GalaSoft MVVM Light 库的 EventToCommand 以“更好”的方式完成。在您的 VM 中添加一个命令，该命令将在所选项目更改时调用，并初始化该命令以执行任何必要的操作。在此示例中，我使用了 RelayCommand 并将仅设置 SelectedCluster 属性。

```
public class ViewModel
{
    public ViewModel()
    {
        SelectedClusterChanged = new RelayCommand<Cluster>( c => SelectedCluster = c );
    }

    public RelayCommand<Cluster> SelectedClusterChanged { get; private set; } 

    public Cluster SelectedCluster { get; private set; }
} 
```

然后在您的 xaml 中添加 EventToCommand 行为。使用 blend 真的很容易。

```
<TreeView
      x:Name="lstClusters"
      ItemsSource="{Binding Path=Model.Clusters}" 
      ItemTemplate="{StaticResource HoofdCLusterTemplate}">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectedItemChanged">
            <GalaSoft_MvvmLight_Command:EventToCommand Command="{Binding SelectedClusterChanged}" CommandParameter="{Binding ElementName=lstClusters,Path=SelectedValue}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</TreeView> 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2011-07-20T20:27:34.377

一切都变得复杂......使用 Caliburn Micro (http://caliburnmicro.codeplex.com/)

看法：

```
<TreeView Micro:Message.Attach="[Event SelectedItemChanged] = [Action SetSelectedItem($this.SelectedItem)]" /> 
```

视图模型：

```
public void SetSelectedItem(YourNodeViewModel item) {}; 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2011-06-13T04:48:04.487

我在此页面上寻找与原作者相同的答案，并证明总是有不止一种方法可以做到这一点，对我来说，解决方案比迄今为止提供的答案更容易，所以我想我不妨添加到堆。

绑定的动机是让它保持良好和 MVVM。ViewModel 的可能用法是拥有一个带有名称的属性，例如“CurrentThingy”，而在其他地方，其他事物上的 DataContext 绑定到“CurrentThingy”。

而不是通过所需的额外步骤（例如：自定义行为，第 3 方控制）来支持从 TreeView 到我的模型的良好绑定，然后从其他东西到我的模型，我的解决方案是使用简单的元素绑定其他东西TreeView.SelectedItem，而不是将其他东西绑定到我的 ViewModel，从而跳过所需的额外工作。

XAML：

```
<TreeView x:Name="myTreeView" ItemsSource="{Binding MyThingyCollection}">
.... stuff
</TreeView>

<!-- then.. somewhere else where I want to see the currently selected TreeView item: -->

<local:MyThingyDetailsView 
       DataContext="{Binding ElementName=myTreeView, Path=SelectedItem}" /> 
```

当然，这对于读取当前选择的项目非常有用，但不是设置它，这就是我所需要的。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2010-08-10T09:36:43.280

您也许还可以使用 TreeViewItem.IsSelected 属性

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-05-30T15:05:21.640

还有一种方法可以在不使用 Interaction.Behaviors 的情况下创建 XAML 可绑定 SelectedItem 属性。

```
public static class BindableSelectedItemHelper
{
    #region Properties

    public static readonly DependencyProperty SelectedItemProperty = DependencyProperty.RegisterAttached("SelectedItem", typeof(object), typeof(BindableSelectedItemHelper),
        new FrameworkPropertyMetadata(null, OnSelectedItemPropertyChanged));

    public static readonly DependencyProperty AttachProperty = DependencyProperty.RegisterAttached("Attach", typeof(bool), typeof(BindableSelectedItemHelper), new PropertyMetadata(false, Attach));

    private static readonly DependencyProperty IsUpdatingProperty = DependencyProperty.RegisterAttached("IsUpdating", typeof(bool), typeof(BindableSelectedItemHelper));

    #endregion

    #region Implementation

    public static void SetAttach(DependencyObject dp, bool value)
    {
        dp.SetValue(AttachProperty, value);
    }

    public static bool GetAttach(DependencyObject dp)
    {
        return (bool)dp.GetValue(AttachProperty);
    }

    public static string GetSelectedItem(DependencyObject dp)
    {
        return (string)dp.GetValue(SelectedItemProperty);
    }

    public static void SetSelectedItem(DependencyObject dp, object value)
    {
        dp.SetValue(SelectedItemProperty, value);
    }

    private static bool GetIsUpdating(DependencyObject dp)
    {
        return (bool)dp.GetValue(IsUpdatingProperty);
    }

    private static void SetIsUpdating(DependencyObject dp, bool value)
    {
        dp.SetValue(IsUpdatingProperty, value);
    }

    private static void Attach(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        TreeListView treeListView = sender as TreeListView;
        if (treeListView != null)
        {
            if ((bool)e.OldValue)
                treeListView.SelectedItemChanged -= SelectedItemChanged;

            if ((bool)e.NewValue)
                treeListView.SelectedItemChanged += SelectedItemChanged;
        }
    }

    private static void OnSelectedItemPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        TreeListView treeListView = sender as TreeListView;
        if (treeListView != null)
        {
            treeListView.SelectedItemChanged -= SelectedItemChanged;

            if (!(bool)GetIsUpdating(treeListView))
            {
                foreach (TreeViewItem item in treeListView.Items)
                {
                    if (item == e.NewValue)
                    {
                        item.IsSelected = true;
                        break;
                    }
                    else
                       item.IsSelected = false;                        
                }
            }

            treeListView.SelectedItemChanged += SelectedItemChanged;
        }
    }

    private static void SelectedItemChanged(object sender, RoutedEventArgs e)
    {
        TreeListView treeListView = sender as TreeListView;
        if (treeListView != null)
        {
            SetIsUpdating(treeListView, true);
            SetSelectedItem(treeListView, treeListView.SelectedItem);
            SetIsUpdating(treeListView, false);
        }
    }
    #endregion
} 
```

然后，您可以在 XAML 中将其用作：

```
<TreeView  helper:BindableSelectedItemHelper.Attach="True" 
           helper:BindableSelectedItemHelper.SelectedItem="{Binding SelectedItem, Mode=TwoWay}"> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-08-16T03:59:06.357

我尝试了这个问题的所有解决方案。没有人完全解决我的问题。所以我认为最好使用带有重新定义属性 SelectedItem 的继承类。如果您从 GUI 中选择树元素并且在代码中设置此属性值，它将完美运行

```
public class TreeViewEx : TreeView
{
    public TreeViewEx()
    {
        this.SelectedItemChanged += new RoutedPropertyChangedEventHandler<object>(TreeViewEx_SelectedItemChanged);
    }

    void TreeViewEx_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        this.SelectedItem = e.NewValue;
    }

    #region SelectedItem

    /// <summary>
    /// Gets or Sets the SelectedItem possible Value of the TreeViewItem object.
    /// </summary>
    public new object SelectedItem
    {
        get { return this.GetValue(TreeViewEx.SelectedItemProperty); }
        set { this.SetValue(TreeViewEx.SelectedItemProperty, value); }
    }

    // Using a DependencyProperty as the backing store for MyProperty.  This enables animation, styling, binding, etc...
    public new static readonly DependencyProperty SelectedItemProperty =
        DependencyProperty.Register("SelectedItem", typeof(object), typeof(TreeViewEx),
        new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, SelectedItemProperty_Changed));

    static void SelectedItemProperty_Changed(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
        TreeViewEx targetObject = dependencyObject as TreeViewEx;
        if (targetObject != null)
        {
            TreeViewItem tvi = targetObject.FindItemNode(targetObject.SelectedItem) as TreeViewItem;
            if (tvi != null)
                tvi.IsSelected = true;
        }
    }                                               
    #endregion SelectedItem   

    public TreeViewItem FindItemNode(object item)
    {
        TreeViewItem node = null;
        foreach (object data in this.Items)
        {
            node = this.ItemContainerGenerator.ContainerFromItem(data) as TreeViewItem;
            if (node != null)
            {
                if (data == item)
                    break;
                node = FindItemNodeInChildren(node, item);
                if (node != null)
                    break;
            }
        }
        return node;
    }

    protected TreeViewItem FindItemNodeInChildren(TreeViewItem parent, object item)
    {
        TreeViewItem node = null;
        bool isExpanded = parent.IsExpanded;
        if (!isExpanded) //Can't find child container unless the parent node is Expanded once
        {
            parent.IsExpanded = true;
            parent.UpdateLayout();
        }
        foreach (object data in parent.Items)
        {
            node = parent.ItemContainerGenerator.ContainerFromItem(data) as TreeViewItem;
            if (data == item && node != null)
                break;
            node = FindItemNodeInChildren(node, item);
            if (node != null)
                break;
        }
        if (node == null && parent.IsExpanded != isExpanded)
            parent.IsExpanded = isExpanded;
        if (node != null)
            parent.IsExpanded = true;
        return node;
    }
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-10-20T09:39:29.733

我的要求是基于 PRISM-MVVM 的解决方案，其中需要 TreeView 并且绑定对象的类型为 Collection<>，因此需要 HierarchicalDataTemplate。默认的 BindableSelectedItemBehavior 无法识别子 TreeViewItem。使其在这种情况下工作。

```
public class BindableSelectedItemBehavior : Behavior<TreeView>
{
    #region SelectedItem Property

    public object SelectedItem
    {
        get { return (object)GetValue(SelectedItemProperty); }
        set { SetValue(SelectedItemProperty, value); }
    }

    public static readonly DependencyProperty SelectedItemProperty =
        DependencyProperty.Register("SelectedItem", typeof(object), typeof(BindableSelectedItemBehavior), new UIPropertyMetadata(null, OnSelectedItemChanged));

    private static void OnSelectedItemChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var behavior = sender as BindableSelectedItemBehavior;
        if (behavior == null) return;
        var tree = behavior.AssociatedObject;
        if (tree == null) return;
        if (e.NewValue == null)
            foreach (var item in tree.Items.OfType<TreeViewItem>())
                item.SetValue(TreeViewItem.IsSelectedProperty, false);
        var treeViewItem = e.NewValue as TreeViewItem;
        if (treeViewItem != null)
            treeViewItem.SetValue(TreeViewItem.IsSelectedProperty, true);
        else
        {
            var itemsHostProperty = tree.GetType().GetProperty("ItemsHost", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
            if (itemsHostProperty == null) return;
            var itemsHost = itemsHostProperty.GetValue(tree, null) as Panel;
            if (itemsHost == null) return;
            foreach (var item in itemsHost.Children.OfType<TreeViewItem>())
            {
                if (WalkTreeViewItem(item, e.NewValue)) 
                    break;
            }
        }
    }

    public static bool WalkTreeViewItem(TreeViewItem treeViewItem, object selectedValue)
    {
        if (treeViewItem.DataContext == selectedValue)
        {
            treeViewItem.SetValue(TreeViewItem.IsSelectedProperty, true);
            treeViewItem.Focus();
            return true;
        }
        var itemsHostProperty = treeViewItem.GetType().GetProperty("ItemsHost", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
        if (itemsHostProperty == null) return false;
        var itemsHost = itemsHostProperty.GetValue(treeViewItem, null) as Panel;
        if (itemsHost == null) return false;
        foreach (var item in itemsHost.Children.OfType<TreeViewItem>())
        {
            if (WalkTreeViewItem(item, selectedValue))
                break;
        }
        return false;
    }
    #endregion

    protected override void OnAttached()
    {
        base.OnAttached();
        this.AssociatedObject.SelectedItemChanged += OnTreeViewSelectedItemChanged;
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        if (this.AssociatedObject != null)
        {
            this.AssociatedObject.SelectedItemChanged -= OnTreeViewSelectedItemChanged;
        }
    }

    private void OnTreeViewSelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        this.SelectedItem = e.NewValue;
    }
} 
```

这使得无论级别如何都可以遍历所有元素。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-07-12T01:38:48.643

我建议对 Steve Greatrex 提供的行为进行补充。他的行为并没有反映源头的变化，因为它可能不是 TreeViewItems 的集合。因此，需要在树中找到 TreeViewItem，其中 datacontext 是来自源的 selectedValue。TreeView 有一个名为“ItemsHost”的受保护属性，它包含 TreeViewItem 集合。我们可以通过反射得到它，然后遍历树搜索选定的项目。

```
private static void OnSelectedItemChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var behavior = sender as BindableSelectedItemBehaviour;

        if (behavior == null) return;

        var tree = behavior.AssociatedObject;

        if (tree == null) return;

        if (e.NewValue == null) 
            foreach (var item in tree.Items.OfType<TreeViewItem>())
                item.SetValue(TreeViewItem.IsSelectedProperty, false);

        var treeViewItem = e.NewValue as TreeViewItem; 
        if (treeViewItem != null)
        {
            treeViewItem.SetValue(TreeViewItem.IsSelectedProperty, true);
        }
        else
        {
            var itemsHostProperty = tree.GetType().GetProperty("ItemsHost", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);

            if (itemsHostProperty == null) return;

            var itemsHost = itemsHostProperty.GetValue(tree, null) as Panel;

            if (itemsHost == null) return;

            foreach (var item in itemsHost.Children.OfType<TreeViewItem>())
                if (WalkTreeViewItem(item, e.NewValue)) break;
        }
    }

    public static bool WalkTreeViewItem(TreeViewItem treeViewItem, object selectedValue) {
        if (treeViewItem.DataContext == selectedValue)
        {
            treeViewItem.SetValue(TreeViewItem.IsSelectedProperty, true);
            treeViewItem.Focus();
            return true;
        }

        foreach (var item in treeViewItem.Items.OfType<TreeViewItem>())
            if (WalkTreeViewItem(item, selectedValue)) return true;

        return false;
    } 
```

这种方式的行为适用于双向绑定。或者，可以将 ItemsHost 获取移至 Behavior 的 OnAttached 方法，从而节省每次绑定更新时使用反射的开销。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-05-26T14:34:08.410

[WPF MVVM TreeView SelectedItem](https://stackoverflow.com/questions/7153813/wpf-mvvm-treeview-selecteditem)

... 是一个更好的答案，但没有提到在 ViewModel 中获取/设置 SelectedItem 的方法。

1.  将 IsSelected 布尔属性添加到您的 ItemViewModel，并在 TreeViewItem 的样式设置器中绑定到它。
2.  将 SelectedItem 属性添加到用作 TreeView 的 DataContext 的 ViewModel。这是上述解决方案中缺少的部分。

```
    ' 项目虚拟机...
    公共属性被选为布尔值
        得到
            返回 _func.SelectedNode 是我
        结束获取
        设置（值作为布尔值）
            If IsSelected 值 Then
                _func.SelectedNode = If(value, Me, Nothing)
            万一
            提高属性更改（）
        结束集
    结束属性
    ' 树虚拟机...
    公共属性 SelectedItem 作为 ItemVM
        得到
            返回 _selectedItem
        结束获取
        设置（值作为 ItemVM）
            如果 _selectedItem 是值 那么
                返回
            万一
            暗淡上一个 = _selectedItem
            _selectedItem = 值
            If prev IsNot Nothing Then
                上一页.IsSelected = False
            万一
            If _selectedItem IsNot Nothing Then
                _selectedItem.IsSelected = True
            万一
        结束集
    结束属性

```

```
<TreeView ItemsSource="{Binding Path=TreeVM}" 
          BorderBrush="Transparent">
    <TreeView.ItemContainerStyle>
        <Style TargetType="TreeViewItem">
            <Setter Property="IsExpanded" Value="{Binding IsExpanded}"/>
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}"/>
        </Style>
    </TreeView.ItemContainerStyle>
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
            <TextBlock Text="{Binding Name}"/>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-04-19T14:38:22.023

在网上研究了一天后，我找到了自己在**普通**WPF/C# 环境中创建**普通**树视图后选择项目的解决方案

 **```
private void BuildSortTree(int sel)
        {
            MergeSort.Items.Clear();
            TreeViewItem itTemp = new TreeViewItem();
            itTemp.Header = SortList[0];
            MergeSort.Items.Add(itTemp);
            TreeViewItem prev;
            itTemp.IsExpanded = true;
            if (0 == sel) itTemp.IsSelected= true;
            prev = itTemp;
            for(int i = 1; i<SortList.Count; i++)
            {

                TreeViewItem itTempNEW = new TreeViewItem();
                itTempNEW.Header = SortList[i];
                prev.Items.Add(itTempNEW);
                itTempNEW.IsExpanded = true;
                if (i == sel) itTempNEW.IsSelected = true;
                prev = itTempNEW ;
            }
        } 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-02-13T16:10:42.823

也可以使用 TreeView 项的 IsSelected 属性来完成。这是我的管理方法，

```
public delegate void TreeviewItemSelectedHandler(TreeViewItem item);
public class TreeViewItem
{      
  public static event TreeviewItemSelectedHandler OnItemSelected = delegate { };
  public bool IsSelected 
  {
    get { return isSelected; }
    set 
    { 
      isSelected = value;
      if (value)
        OnItemSelected(this);
    }
  }
} 
```

然后在包含您的 TreeView 绑定到的数据的 ViewModel 中，只需订阅 TreeViewItem 类中的事件即可。

```
TreeViewItem.OnItemSelected += TreeViewItemSelected; 
```

最后，在同一个 ViewModel 中实现这个处理程序，

```
private void TreeViewItemSelected(TreeViewItem item)
{
  //Do something
} 
```

当然还有装订，

```
<Setter Property="IsSelected" Value="{Binding IsSelected}" /> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-07-05T11:30:59.507

我知道这个线程已有 10 年历史，但问题仍然存在......

最初的问题是“检索”所选项目。我还需要在我的视图模型中“获取”选定的项目（而不是设置它）。在此线程中的所有答案中，“Wes”的答案是唯一一个以不同方式解决问题的答案：如果您可以将“选定项目”用作数据绑定的目标，请将其用作数据绑定的源。Wes 对另一个视图属性执行此操作，我将对视图模型属性执行此操作：

我们需要两件事：

*   在视图模型中创建一个依赖属性（在我的“MyObject”类型的情况下，因为我的树视图绑定到“MyObject”类型的对象）
*   在 View 的构造函数中从 Treeview.SelectedItem 绑定到此属性（是的，这是后面的代码，但您很可能也会在那里初始化数据上下文）

视图模型：

```
public static readonly DependencyProperty SelectedTreeViewItemProperty = DependencyProperty.Register("SelectedTreeViewItem", typeof(MyObject), typeof(MyViewModel), new PropertyMetadata(OnSelectedTreeViewItemChanged));

    private static void OnSelectedTreeViewItemChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        (d as MyViewModel).OnSelectedTreeViewItemChanged(e);
    }

    private void OnSelectedTreeViewItemChanged(DependencyPropertyChangedEventArgs e)
    {
        //do your stuff here
    }

    public MyObject SelectedWorkOrderTreeViewItem
    {
        get { return (MyObject)GetValue(SelectedTreeViewItemProperty); }
        set { SetValue(SelectedTreeViewItemProperty, value); }
    } 
```

查看构造函数：

```
Binding binding = new Binding("SelectedItem")
        {
            Source = treeView, //name of tree view in xaml
            Mode = BindingMode.OneWay
        };

        BindingOperations.SetBinding(DataContext, MyViewModel.SelectedTreeViewItemProperty, binding); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-01-04T01:07:19.773

我提出了这个解决方案（我认为这是最简单且无内存泄漏的），它非常适合从 View 的选定项更新 ViewModel 的选定项。

*请注意，从 ViewModel 更改所选项目不会更新视图的所选项目。*

```
public class TreeViewEx : TreeView
{
    public static readonly DependencyProperty SelectedItemExProperty = DependencyProperty.Register("SelectedItemEx", typeof(object), typeof(TreeViewEx), new FrameworkPropertyMetadata(default(object))
    {
        BindsTwoWayByDefault = true // Required in order to avoid setting the "BindingMode" from the XAML
    });

    public object SelectedItemEx
    {
        get => GetValue(SelectedItemExProperty);
        set => SetValue(SelectedItemExProperty, value);
    }

    protected override void OnSelectedItemChanged(RoutedPropertyChangedEventArgs<object> e)
    {
        SelectedItemEx = e.NewValue;
    }
} 
```

XAML 使用

```
<l:TreeViewEx ItemsSource="{Binding Path=Items}" SelectedItemEx="{Binding Path=SelectedItem}" > 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-02-15T02:36:41.400

（让我们都同意 TreeView 在这个问题上显然被破坏了。绑定到 SelectedItem 会很明显。 *叹息*）

我需要解决方案与 TreeViewItem 的 IsSelected 属性正确交互，所以我是这样做的：

```
// the Type CustomThing needs to implement IsSelected with notification
// for this to work.
public class CustomTreeView : TreeView
{
    public CustomThing SelectedCustomThing
    {
        get
        {
            return (CustomThing)GetValue(SelectedNode_Property);
        }
        set
        {
            SetValue(SelectedNode_Property, value);
            if(value != null) value.IsSelected = true;
        }
    }

    public static DependencyProperty SelectedNode_Property =
        DependencyProperty.Register(
            "SelectedCustomThing",
            typeof(CustomThing),
            typeof(CustomTreeView),
            new FrameworkPropertyMetadata(
                null,
                FrameworkPropertyMetadataOptions.None,
                SelectedNodeChanged));

    public CustomTreeView(): base()
    {
        this.SelectedItemChanged += new RoutedPropertyChangedEventHandler<object>(SelectedItemChanged_CustomHandler);
    }

    void SelectedItemChanged_CustomHandler(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        SetValue(SelectedNode_Property, SelectedItem);
    }

    private static void SelectedNodeChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var treeView = d as CustomTreeView;
        var newNode = e.NewValue as CustomThing;

        treeView.SelectedCustomThing = (CustomThing)e.NewValue;
    }
} 
```

使用此 XAML：

```
<local:CustonTreeView ItemsSource="{Binding TreeRoot}" 
    SelectedCustomThing="{Binding SelectedNode,Mode=TwoWay}">
    <TreeView.ItemContainerStyle>
        <Style TargetType="TreeViewItem">
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
        </Style>
    </TreeView.ItemContainerStyle>
</local:CustonTreeView> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-05-24T14:27:11.537

我为您带来我的解决方案，它提供以下功能：

*   支持2种方式绑定

*   自动更新 TreeViewItem.IsSelected 属性（根据 SelectedItem）

*   没有 TreeView 子类化

*   绑定到 ViewModel 的项目可以是任何类型（甚至为 null）

1/ 在您的 CS 中粘贴以下代码：

```
public class BindableSelectedItem
{
    public static readonly DependencyProperty SelectedItemProperty = DependencyProperty.RegisterAttached(
        "SelectedItem", typeof(object), typeof(BindableSelectedItem), new PropertyMetadata(default(object), OnSelectedItemPropertyChangedCallback));

    private static void OnSelectedItemPropertyChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var treeView = d as TreeView;
        if (treeView != null)
        {
            BrowseTreeViewItems(treeView, tvi =>
            {
                tvi.IsSelected = tvi.DataContext == e.NewValue;
            });
        }
        else
        {
            throw new Exception("Attached property supports only TreeView");
        }
    }

    public static void SetSelectedItem(DependencyObject element, object value)
    {
        element.SetValue(SelectedItemProperty, value);
    }

    public static object GetSelectedItem(DependencyObject element)
    {
        return element.GetValue(SelectedItemProperty);
    }

    public static void BrowseTreeViewItems(TreeView treeView, Action<TreeViewItem> onBrowsedTreeViewItem)
    {
        var collectionsToVisit = new System.Collections.Generic.List<Tuple<ItemContainerGenerator, ItemCollection>> { new Tuple<ItemContainerGenerator, ItemCollection>(treeView.ItemContainerGenerator, treeView.Items) };
        var collectionIndex = 0;
        while (collectionIndex < collectionsToVisit.Count)
        {
            var itemContainerGenerator = collectionsToVisit[collectionIndex].Item1;
            var itemCollection = collectionsToVisit[collectionIndex].Item2;
            for (var i = 0; i < itemCollection.Count; i++)
            {
                var tvi = itemContainerGenerator.ContainerFromIndex(i) as TreeViewItem;
                if (tvi == null)
                {
                    continue;
                }

                if (tvi.ItemContainerGenerator.Status == System.Windows.Controls.Primitives.GeneratorStatus.ContainersGenerated)
                {
                    collectionsToVisit.Add(new Tuple<ItemContainerGenerator, ItemCollection>(tvi.ItemContainerGenerator, tvi.Items));
                }

                onBrowsedTreeViewItem(tvi);
            }

            collectionIndex++;
        }
    }

} 
```

2/ XAML 文件中的使用示例

```
<TreeView myNS:BindableSelectedItem.SelectedItem="{Binding Path=SelectedItem, Mode=TwoWay}" /> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-11-09T15:43:24.697

我意识到自发布以来已经有一段时间了，但是 FWIW 我正在使用 Telerik 的 RadTreeView，并且 SelectedItem 似乎工作正常 - 在此期间问题已经解决，或者 Telerik 已经为我们解决了这个问题。**

# c# - 从另一个绑定列表绑定到当前项的属性

> ID：1000041
> 
> 赞同：1
> 
> 时间：2009-06-16T07:42:20.267
> 
> 标签：c#, .net, data-binding

我有一个定义对象（定义）的列表，每个定义对象都有一个其参数和参数的列表。此代码工作正常：

```
private void BindDefinitions()
        {
            definitionsComboBox.DataSource = definitions;
            argumentsComboBox.DataBindings.Add("DataSource", definitions, "Arguments");
            parametersComboBox.DataBindings.Add("DataSource", definitions, "Parameters");
        } 
```

在其他地方，我有一个验证对象（验证）列表，每个验证对象都有一个参数字典和参数字典。为什么以下代码不起作用？

```
validationsListBox.DataSource = validations;
        argumentsDataGridView.DataBindings.Add("DataSource", validations, "Arguments");
        parametersDataGridView.DataBindings.Add("DataSource", validations, "Parameters"); 
```

编辑：重点是使dataGridViews中显示的数据依赖于validationsListBox中的选定项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T08:21:12.730

我找到了这样的答案：“您不能将字典绑定到 DataGridView，因为 DataGridView.DataSource 需要一个实现 IList、IListSource、IBindingList 或 IBindingListView 的对象。”。这大概就是原因。

# c# - Microsoft.WindowsCE.Forms 的奇怪行为

> ID：1000043
> 
> 赞同：6
> 
> 时间：2009-06-16T07:42:55.787
> 
> 标签：c#, visual-studio-2008, compact-framework

我有一个 Windows Mobile 应用程序，我想在其中检查设备方向。因此，我以我的一种形式编写了以下属性：

```
internal static Microsoft.WindowsCE.Forms.ScreenOrientation DeviceOriginalOrientation { get; private set; } 
```

奇怪的是，此后每当我打开 UserControl 时，即使该 UserControl 不使用该属性，设计器也会显示此警告：

**无法加载文件或程序集“Microsoft.WindowsCE.Forms，Version=3.5.0.0，Culture=neutral，PublicKeyToken=969db8053d3322ac”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）**

评论上述属性将解除警告并再次显示用户控件。该应用程序已成功构建，并且在这两种情况下都可以正常运行。

有谁知道为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-02-02T15:35:18.413

这个问题花了我几个小时。我通过使用 gacutil 将 Microsoft.WindowsCE.Forms.dll 添加到 GAC 来解决它。希望能帮助到你。罗宾

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T15:08:11.603

是的，这几乎是意料之中的。因为它是一个静态属性（我首先不同意），所以设计者必须对其进行初始化，这意味着加载 Microsoft.WindowsCE.Forms，这意味着加载特定于设备的入口点。诚然，错误消息很糟糕，但是设计师对设备的支持有[很多有趣的问题](http://blog.opennetcf.com/ctacke/2008/11/26/Studio08sToolboxAndCompactFrameworkAssemblies.aspx)，很难确定原因。

我会尝试将它移到另一个类或用检查包装它以查看您是否在设计器中。像这样的东西对我们有用：

```
protected bool IsDesignTime
{
    get
    {
        // Determine if this instance is running against .NET Framework 
        // by using the MSCoreLib PublicKeyToken
        System.Reflection.Assembly mscorlibAssembly = typeof(int).Assembly;
        if ((mscorlibAssembly != null))
        {
            if (mscorlibAssembly.FullName.ToUpper().EndsWith("B77A5C561934E089"))
            {
                return true;
            }
        }
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-06-07T23:30:13.977

例如，如果您将 Microsoft.WindowsCE.Forms.dll 复制到项目中的子文件夹，然后将以下内容添加到项目的预构建事件中，那么它也可以正常工作。重新安装您的电脑：

```
"C:\Program Files\Microsoft Visual Studio 8\SDK\v2.0\Bin\gacutil.exe" /i "$(ProjectDir)SubFolder\Microsoft.WindowsCE.Forms.dll" 
```

# json - mochijson2 例子！

> ID：1000046
> 
> 赞同：16
> 
> 时间：2009-06-16T07:43:01.763
> 
> 标签：json, erlang

关于 Erlang 和 Mochiweb，我是一个两周大的婴儿。早些时候我有一个在 PHP 上运行的系统，很快我意识到它无法处理我所期望的那种负载。所以我决定将后端切换到基于 Mochiweb 的服务器。现在我需要知道如何用 Mochiweb 实现 JSON。我完全了解 mochijson2 库的存在，但作为初学者，我无法弄清楚如何使用它。有人可以指出我可以找到在 erlang 中使用该库或任何其他 json 库的示例的地方吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-16T11:27:20.163

mochijson2 API 本质上只包含两个函数，（如果你已经下载了 mochiweb）可以直接从 Erlang shell 中使用，如下所示：

```
erl -pa path/to/mochiweb/ebin
...
1> mochijson2:decode(<<"[1,2,3]">>).
[1,2,3]
2> iolist_to_binary(mochijson2:encode([1,2,3])).
<<"[1,2,3]">> 
```

mochiweb/src/mochijson2.erl 的底部有一些测试用例，它们可能也有助于理解 JSON 术语和 Erlang 术语之间的映射。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-17T06:08:22.490

是的，我不得不在源代码中花费大量时间来弄清楚发生了什么。实际上，这描述了我使用 Erlang 的很多经验。这让我通过了，生成了我需要的 JSON。这是一个简单的例子。

```
ERL  :: {struct, [{strKey, <<"strVal">>}, {intKey, 10}, {arrayKey, [1, 2, 3]}]}
JSON :: {strKey:"strVal", intKey:10, arrayKey:[1, 2, 3]} 
```

因此，在该示例中，您可以看到如何创建对象（mochijson2 希望您调用结构）、字符串、整数和数组。祝你好运！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-16T08:22:28.673

我建议阅读/观看/下载[开始在 Erlang 上开发 Web 应用程序](http://beebole.com/en/blog/erlang/tutorial-web-application-erlang/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-27T22:22:34.727

除了@rik.the.vik 的评论，这里是等效的 erlang 命令：

```
erl -pa path/to/mochiweb/ebin
...
iolist_to_binary(mochijson2:encode({struct, [{strKey, <<"strVal">>}, {intKey, 10}, {arrayKey, [1, 2, 3]}]})).
mochijson2:decode(<<"{\"strKey\":\"strVal\", \"intKey\":10, \"arrayKey\":[1, 2, 3]}">>). 
```

# c# - MenuStrip 和 ToolStrip 上的“红十字”问题

> ID：1000052
> 
> 赞同：4
> 
> 时间：2009-06-16T07:44:25.443
> 
> 标签：c#, multithreading, toolstrip, menustrip

我有一个在许多机器上运行良好的软件，虽然在一台机器上偶尔会出现一个问题，MenuStrip 和 ToolStrip 都显示为空白的白色背景，上面有一个红色的叉号，作为自定义控件如果您创建了一个空对象。这在我调试时不会发生，我不知道如何使问题再次发生，但它确实发生了。我想知道是否有人知道可能是什么问题？

它会是 .NET 框架的版本吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T08:07:41.490

当存在 GDI+ 问题（“死亡的红色 X”）时，这种情况很常见。你在做任何自定义绘图`OnPaint`吗？或者可能存在损坏或处理不当的图形资源或字形。

**编辑：**我已经重新阅读了你的问题。您似乎仅在其中一台机器上拥有此功能。我为此搜索了一下，偶然发现了[这个旧线程](http://www.developmentnow.com/g/20_2006_2_0_0_689988/A-generic-error-occurred-in-GDI-exception-and-Red-X-displayed-on-Form.htm)。底部的帖子表明关闭虚拟内存可能存在问题：

> 我们确实设法解决了这个问题——我们在运行 XP Embedded 的设备上看到了这个问题。XPe 映像开发人员关闭了虚拟内存，我们一打开它，问题就消失了。我相信这只是系统显示图形内存不足的症状（尤其是如果您使用大量双缓冲）

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T07:45:58.607

对我来说，这听起来像是[内存不足异常](http://msdn.microsoft.com/en-us/library/system.outofmemoryexception.aspx)的症状。

**编辑：** 这有时会导致`System.InvalidOperationException: BufferedGraphicsContext`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T07:59:15.403

您是否尝试从 GUI 线程以外的线程更新 GUI 控件？将跨线程操作与吞没所有内容的异常处理程序结合起来，我们在我正在维护的应用程序上拥有您描述的行为（在网格控件上，而不是菜单栏上）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T08:08:14.263

绝对听起来像一个跨线程问题。

确保在访问控件和/或从不是主 UI 线程的线程触发事件时使用 Invoke。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-04T19:32:41.337

看到这发生在一台拥有我们产品的 1000 多台计算机上。在那台计算机上，我看到一个 .NET 3.5 程序偶尔会在其数据网格上显示红色 X。另一个更简单的 .NET 2.0 程序在其 menuStrip 上获得了红色 X。我只有更简单程序的源代码，但我可以说根本没有任何用户代码会影响该组件。没有跨线程的东西，因为没有更新它。它的内容是在开发时设置的，在程序加载时添加了一项。Red X 故障在程序​​加载后很好。

我很惊讶地在两个不同的框架和一个没有数据绑定的程序上看到了这个问题。我非常希望计算机关闭其虚拟内存。

如果不是这样，那么对于跨 .NET 2.0 和 .NET 3.5 共享的系统部件的任何指导将不胜感激。

更新：有问题的用户将计算机退役并更换（解决了问题）

# db4o - db4o 查询子对象

> ID：1000054
> 
> 赞同：0
> 
> 时间：2009-06-16T07:45:10.887
> 
> 标签：db4o

我刚开始使用 db4o，但偶然发现了一个问题。

我有一个带有子对象的对象（它可能不是正确的词，但我希望你明白我的意思）。

子对象包含两个日期，一个开始日期和一个结束日期。

如果主对象至少有一个 DateTime.Now 位于开始日期和结束日期之间的子对象，我想显示它。

我必须使用本机查询或 SODA（linq 在项目中不起作用）。

提前致谢！

/弗雷德里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-09-11T00:40:16.140

我会尝试这样的事情：

```
IQuery query = db.Query();
query.Constrain(typeof(YourObjectType));
IConstraint constr1 = query.Descend("enddate")
    .Constrain(DateTime.Now).Greater();
IConstraint constr2 = query.Descend("startdate")
    .Constrain(DateTime.Now).Smaller();
query.Constrain(constr1).And(constr2);
IObjectSet result = query.Execute(); 
```

# .net - Word 显示未安装的托盘时带有感叹号

> ID：1000056
> 
> 赞同：1
> 
> 时间：2009-06-16T07:45:20.807
> 
> 标签：.net, printing, ms-word, tray

在我的项目中，我试图到达已安装打印机的托盘并成功完成。如果未安装所选打印机的某些纸张来源，我不会在纸张来源组合中显示它们。同时，Word 也不会在打印对话框 - 纸张/质量选项卡中显示它们。但是当 Word 显示带有感叹号的未安装托盘时，我的组合也会显示它们（当然没有任何标记）。为什么 Word 会显示它们？那个感叹号是什么意思？我怎样才能避免那些托盘？

*   我正在使用 System.Drawing.Printing.PaperSource 来获取托盘。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-05-15T17:48:21.910

您使用的是什么版本的 Word，您还可以告诉驱动程序的版本吗？

通常，使用 Microsoft Unidrv 框架的打印驱动程序有一个选项可以为有限制的设置显示一个黄色感叹号。这适用于未安装的托盘。您可以通过转到驱动程序属性（打印机和传真文件夹 --> 驱动程序属性 --> 设备设置）并将托盘设置为已安装来解决托盘限制。

您无法真正避免使用这些托盘，因为驱动程序在请求托盘时主要将所有托盘报告回应用程序。您可以通过检查注册表来找出已安装和未安装的托盘的一种方法。

键：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Print\Printers((queue-name))\PrinterDriverData 目录中的键名：FeatureKeyword

希望这可以帮助。如果是这样，（+1）:)

# indexing - 使用 solr 索引不同类型的数据

> ID：1000058
> 
> 赞同：1
> 
> 时间：2009-06-16T07:45:39.277
> 
> 标签：indexing, lucene, solr

我正在考虑在一个新项目中使用[Apache solr](http://lucene.apache.org/solr/)来索引数据。数据由不同的独立类型组成，这意味着例如

*   植物药
*   动物
*   汽车
*   电脑

索引。我应该为每种类型使用不同的索引还是只使用一个索引更有意义？使用多个索引如何影响性能？或者还有其他可能实现这一目标吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-16T11:42:56.900

两者都是合法的方法，但需要权衡取舍。首先，你的数据集有多大？如果它足够大，您可能希望在多个服务器上对其进行分区，那么使用不同的索引可能是有意义的。

其次，性能有多重要——将它们全部编入索引可能会导致性能下降，但程度取决于数据量和查询的复杂程度。

三、是否有需要在同一个搜索中查询多种数据类型？如果是这样，将所有内容索引在一起可能是一种方便的方法。从技术上讲，这可以通过单独的索引来实现，但是获得与查询最相关的结果可能是一个挑战（并不是说还没有）

第四，具有单一模式和配置的单一索引可以简化部署和维护系统的任何人的生活。

要考虑的另一件事是 ID - 所有不同的对象是否在所有类型中都具有唯一标识符？如果没有，如果您想将它们索引在一起，您可能需要生成它。

# logout - 获得单点登录提供商身份验证后如何注销？

> ID：1000066
> 
> 赞同：3
> 
> 时间：2009-06-16T07:49:20.363
> 
> 标签：logout, rpxnow

我正在尝试通过像 rpxnow 这样的第三方单点登录提供商来提供身份验证工具。每次刷新页面登录后，我都无法检索提供商设置的 cookie，以便在用户希望注销时将其删除？有没有其他方法可以优雅地注销用户而不尝试搜索 cookie 等，或者在身份验证后释放他们提供的令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-02T10:03:07.663

我有一个解决方法。我存储了从站点上的单点登录检索到的令牌，并且单击注销删除了该令牌。每个页面的每个调用处理程序都是通过检查会话中的令牌变量来启动的。

# c++ - C++ 不是完全面向对象的语言吗？

> ID：1000069
> 
> 赞同：3
> 
> 时间：2009-06-16T07:50:05.980
> 
> 标签：c++

我知道在 OOP 中，我们必须在类中声明所有内容，例如变量、函数等，就像在 Java 中一样，但在 C++ 中，我们也可以在类外声明。

这就是 C++ 不完全 OOP 的原因吗？或者还有什么别的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-16T07:52:40.250

嗯？C++ 是一种混合的、多范式的语言。它当然不是一种“纯粹的”面向对象的语言，其中“一切都是对象”是正确的。C++ 支持类、对象、封装等，但由于它也（或多或少）向后兼容许多 C 代码，因此它不能“完全面向对象”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-16T07:59:59.690

面向对象编程不是语言的定义，它是*编程*的定义，一个程序。即C++ 中的一个程序可以是OOP，而另一个程序可以不是OOP。

您可以说的是，C++ 完全支持 OOP 范式中的编程方式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-16T07:52:30.717

完全定义 OOP？人们可能有很多意见

请注意，就纯度而言，IIRC 所有具有值类型的语言在严格意义上都不是“纯粹的”。不，拳击不算数。

多年来，在讨论中，我试图回到核心 OOP 特性：

*   身份
*   分类
*   多态性（不是继承，因为一些 OOP 没有继承）
*   封装

所以如果你能分辨出两个类是否不是同一个类（身份），你可以做经典的“鸭子嘎嘎”和“狗吠”的例子（演示继承/多态和分类），你可以隐藏字段，你很漂亮那里很多。

但是，将其应用于所有语言更加困难。虽然我确实粗略地进行了函数式编程，但我在他们近乎无限的行话方面的训练还不够，无法判断所有那些正在涌现的函数式-oop-命令式混合，

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-16T07:53:12.293

在 C++ 中，您不必使用**OOP**进行编码，您可以选择不使用它。话虽如此，它是“完全 OOP”，OOP 只是不是必需的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-16T08:11:29.453

甚至 java 都不是完整的 OOP 语言。
在*真正的*OOP 语言中，一切都是对象、条件、循环等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T08:20:49.673

尽管这个问题的措辞有些难看，但我对所提供的所有答案并不满意。我更倾向于将语言视为“支持范式”而不是“处于范式中”。那么，一种语言什么时候支持范式呢？当编写满足范式要求的代码很容易时。怎么得出这个结论？考虑实现风格的 linux 文件系统。显然具有 OO 属性的是 C 代码。那么，你会不会因为 C 不是 OOP 语言而认为这段代码是 OOP 的？我不这么认为。（我想有些人会不同意，因为这似乎是一种观点。）这对 C++ 意味着什么？嗯，C++ 有很多工具可以让 OO 风格的编程变得更容易，

我会得出结论，C++ 在某种程度上支持 OO 范式，但显然不如某些现代 OO 语言。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T07:54:24.147

该`main()`函数不在类中，因此，有人可能会争辩说 C++ 不完全是 OOP。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-16T08:00:54.933

C++ 不完全 OOP的*原因*之一是需要向后兼容许多 C 代码。内置类型不是 C++ 中的对象，因为如果是，则效率较低。请记住，C++ 的第一个目标受众是现有的 C 程序员，效率是（是）一个很大的问题。

但是，C++ 支持 OOP 的所有**重要**特性。

相关链接：[www.research.att.com/~bs/oopsla.pdf](http://www.research.att.com/~bs/oopsla.pdf)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-11-22T16:53:05.780

OOP 的主要概念是面向对象编程语言中的每个成员都应该在类内部定义，而在 c++ 中，`main`函数是在类外部定义的。这就是为什么 c++ 不是完全面向对象的编程语言。

# html - 内容加载

> ID：1000075
> 
> 赞同：0
> 
> 时间：2009-06-16T07:51:32.000
> 
> 标签：html, xhtml, stylesheet

我正在创建带有两个 div 的新页面。此页面在 iframe 中加载。

第一个 Div 从数据库中获取内容，然后加载。第二个 Div 仅包含保存和取消按钮。

在加载保存和取消按钮（Second Div）时首先出现。如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T07:57:05.717

通过 CSS 隐藏第二个 div。

然后添加一些 javascript 在从数据库加载完成时取消隐藏 div

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T08:31:35.850

准备好后，让第一个文档加载第二个文档。在第一个文档上使用*onload*处理程序设置第二个 iframe 的位置。

假设您的 iframe 有 2 个 id：“iframe1”和“iframe2”。您在 iframe1 中加载数据库内容，在 iframe2 中加载一个空页面。

这是 iframe1 中加载的文档的示例代码：

```
<html>
<head>
<script>
function init () {
   frameElement.ownerDocument.getElementById("iframe2").contentWindow.location = "/someurl/document2.html";
}
</script>
</head>
<body onload="init()">
<!-- iframe1 content -->
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T07:57:06.450

使用 JQuery 或 Prototype 等动态加载内容来控制 div 加载的时间和方式。

# java - 具有自定义 ssl 套接字工厂的 Websphere 中的 JAX-WS 客户端

> ID：1000077
> 
> 赞同：1
> 
> 时间：2009-06-16T07:51:43.653
> 
> 标签：java, web-services, websphere

我有 JAX-WS 生成需要使用 HTTPS 连接的客户端代理。证书处理需要自定义，因为我们将证书存储在数据库中。

我有一个 SUN JAXWS 实现的工作版本，但现在我需要在 WebSphere 7.0 中使用相同的客户端代码。

不幸的是，JAX-WS 标准在这方面有点弱。这是一个关于如何执行此操作的特定于实现的过程，如果是 WebSphere，我找不到很多信息。

我注意到似乎使用了 Axis2，但我发现在如何设置我在 SUN 实现中工作的自定义握手方面没有任何用处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-05-23T13:07:10.290

您可以使用静态方法 setDefaultSSLSocketFactory 为 HttpsURLConnection 设置默认 SSLSocketFactory。这将成为 HttpsURLConnection 的所有新实例的套接字工厂。我们让它在 SE 应用程序中工作，我认为它也适用于 Axis。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-30T08:54:34.263

甚至 IBM 也无法帮助我。所以我只是实现了我自己的 JAX-WS -> SOAP 转换。这花了 2 天时间，并支持我需要的一切。

# powershell - Powershell - 调用远程 WMI 对象 - RPC 错误 HRESULT：0x800706BA（RPC 服务器不可用）

> ID：1000084
> 
> 赞同：1
> 
> 时间：2009-06-16T07:54:17.143
> 
> 标签：powershell, wmi, rpc, remote-administration, win32-process

我在 Get-WmiObject 和这个对象的使用方面遇到了一些麻烦。

以防万一，我正在连接到远程计算机——它不在 AD 中，而是在互联网中。

我正在使用凭据，并且能够通过命令检索 WMI 类或对象（具体来说，我想使用 Win32_Process）列表：

```
$credential = Get-Credential
$class = Get-WmiObject -list -computer "xyz" -credential $credential | Where-Object {$_.Name -eq "Win32_Process" }
$object = Get-WmiObject -class Win32_Process -computer "xyz" -credential $credential 
```

当我更改主机名或凭据时，我收到“RPC 不可用”错误或未经授权的访问。因此，我假设 RPC 服务器和 WMI 对象和类的检索工作。

但是当我检索它们时，我无法使用它们。在任何尝试它的情况下（调用方法或 Get-Member）它都会抛出这个错误：

```
"Server RPC není k dispozici. (Výjimka na základě hodnoty HRESULT: 0x800706BA)"
(It's a czech localization of: Server RPC is not available. (Exception based on the value of HRESULT: 0x800706BA) 
```

我还没有找到任何其他类似错误的例子。我在 Vista Ent 上使用 PowerShell 1.0。机器。目标机器是 Win2003 R2（产品服务器将是 Win. Serv. 2008 - 尚未测试）。

我会很感激任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-19T19:02:31.573

> 我收到“RPC 不可用”错误或未经授权的访问。因此，我假设 RPC 服务器和 WMI 对象和类的检索工作。

不幸的是，这不是一个安全的假设。如果你尝试通过 WMI 连接到不存在的机器上的命名空间，例如 foo ("\foo\root\cimv2")，你会得到这个错误：

```
0x800706BA ("The RPC server is unavailable.") 
```

此外：

> 我正在连接到远程计算机——它不在 AD 中，而是在互联网中。

请注意，互联网上的 WMI 将很难开始工作。即使您可以 ping 目标计算机，这并不意味着您可以通过 WMI 连接到它。DCOM 使用了一堆端口，防火墙、NAT 路由器等会很高兴地阻止这些端口。如果您的完全相同的呼叫适用于本地主机但不能通过 Internet，那么您就有问题了。

如果您控制防火墙，您可以考虑限制 DCOM 使用的端口，然后打开这些端口。如果您只是在使用狂野的互联网，也许您可​​能想考虑设置一个 VPN，我认为这应该可以消除“互联网”问题？

# xml - 如何使用没有 xpath 的经典 asp(vbscript) 对 xml 数据进行排序？

> ID：1000089
> 
> 赞同：2
> 
> 时间：2009-06-16T07:55:08.543
> 
> 标签：xml, asp-classic, vbscript

```
 <rooms>     
        <room>
            <roomname>Single</roomname>
            <roomid>1</roomid>
            <Price>100</Price>
            <Adult>1</Adult>
            <child>0</child>
        </room> 
    </rooms>

    <rooms>
        <room>
            <roomname>Double</roomname>
            <roomid>2</roomid>
            <Price>200</Price>
            <Adult>2</Adult>
            <child>1</child>
        </room>
    </rooms>

    <rooms>
        <room>
            <roomname>Single</roomname>
            <roomid>3</roomid>
            <Price>150</Price>
            <Adult>1</Adult>
            <child>0</child>
        </room>
    </rooms>

</hotel> 
```

我需要像这样输出......（在经典asp中使用vbscript）

酒店：
单人100人，双人200人，共300人

单人150人，双人200人，共350人

概念是： 1\. 客户需要 2 个房间，第 1 个房间 1 个成人，第 2 个房间 2 个成人 + 1 个孩子（基于上述 xml） 2\. 客户最多可以选择 4 个房间，每个房间最多 4 个成人，最多 2 个孩子，因为每个客户请求 xml 都是这样生成的

例如：客户需要3个房间，1个房间1个大人，2个房间2个大人+1个小孩，3个房间3个大人，xml是这样的（房间是根据空房情况生成的）...

```
 <rooms>     
        <room>
            <roomname>Single</roomname>
            <roomid>1</roomid>
            <Price>100</Price>
            <Adult>1</Adult>
            <child>0</child>
        </room> 
    </rooms>

    <rooms>
        <room>
            <roomname>Double</roomname>
            <roomid>2</roomid>
            <Price>200</Price>
            <Adult>2</Adult>
            <child>1</child>
        </room>
    </rooms>

    <rooms>
        <room>
            <roomname>Single</roomname>
            <roomid>3</roomid>
            <Price>150</Price>
            <Adult>1</Adult>
            <child>0</child>
        </room>
    </rooms>

               <rooms>      
        <room>
            <roomname>Triple</roomname>
            <roomid>4</roomid>
            <Price>300</Price>
            <Adult>3</Adult>
            <child>0</child>
        </room> 
    </rooms>

</hotel> 
```

在这个原因中，我需要这样

酒店：
单人100人，双人200人，三人300人，共600人

单150，双200，三300，总计650

我尝试使用 vbscript 取出，但某些原因被接受但某些原因不被接受

```
<%@ Language="VBScript" CodePage="65001"%>  
<%   
Response.ContentType = "text/plain; charset=UTF-8"  
Dim doc   
Set doc = Server.CreateObject("Msxml2.DOMDocument.3.0")   
doc.async = False  
If doc.load(Server.MapPath("ee.xml")) Then   

  doc.setProperty "SelectionLanguage", "XPath"    

for i= 1 to 3 '2 is noofrooms

adult1 ="1"
child1 ="0"
adult2 ="2"
child2 ="1"
adult3 ="3"
child3 ="0"
'adult4 ="4"
'child4 ="0"

for d=0 to 4 ' total nodes ( /rooms)

' this for 2 room cause
'ds ="(//HotelDetails/hotel/rooms/room[Adult='"&adult1&"' and child='"&child1&"'])["&i&"]|(//HotelDetails/hotel/rooms/room[Adult='"&adult2&"' and child='"&child2&"'])["&d&"]" 

' this for 3 room cause
ds ="(//HotelDetails/hotel/rooms/room[(Adult='"&adult1&"' and child='"&child1&"') ])["&i&"]|((//HotelDetails/hotel/rooms/room[(Adult='"&adult2&"' and child='"&child2&"')])|(//HotelDetails/hotel/rooms/room[(Adult='"&adult3&"' and child='"&child3&"')]))["&d&"]"

' this for 4 room cause
'ds ="(//HotelDetails/hotel/rooms/room[(Adult='"&adult1&"' and child='"&child1&"') ])["&i&"]|((//HotelDetails/hotel/rooms/room[(Adult='"&adult2&"' and child='"&child2&"')])|(//HotelDetails/hotel/rooms/room[(Adult='"&adult3&"' and child='"&child3&"')])|(//HotelDetails/hotel/rooms/room[(Adult='"&adult3&"' and child='"&child3&"')]))["&d&"]"

Set colNodes=doc.selectNodes (ds)
For Each objNode in colNodes

  response.write objNode.Text & VbCrLf 

Next

next

next

Else   
  Response.Write doc.parseError.reason   
End If 
```

请帮我（输出）解决这个问题谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T08:00:48.800

这是重复：[在经典 ASP 中对 XML 数据进行排序](https://stackoverflow.com/questions/992425/sort-xml-data-in-classic-asp-using-vbscript)？

# c# - 命令行参数数组

> ID：1000091
> 
> 赞同：0
> 
> 时间：2009-06-16T07:55:34.287
> 
> 标签：c#, command-line

我有一个像这样的命令行参数我需要像这样得到这两个怎么可能

应用程序 ID = 1; 名称 =2

我喜欢在单个数组中获取两个值 1,2 如何执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-16T08:05:53.957

我并不完全清楚，但我会假设这些论点实际上是：

```
 ApplicationId=1 Name=2 
```

由于系统如何拆分参数，间距等很重要。在一个`Main(string[] args)`方法中，这将是一个长度为 2 的数组。您可以将其处理为例如字典：

```
 static void Main(string[] args) {
        Dictionary<string, string> options = new Dictionary<string, string>();
        foreach (string arg in args)
        {
            string[] pieces = arg.Split('=');
            options[pieces[0]] = pieces.Length > 1 ? pieces[1] : "";
        }

        Console.WriteLine(options["Name"]); // access by key

        // get just the values
        string[] vals = new string[options.Count];
        options.Values.CopyTo(vals, 0);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T08:03:22.680

[631410](https://stackoverflow.com/questions/631410/looking-for-a-command-line-argument-parser-for-net)和[491595](https://stackoverflow.com/questions/491595/best-way-to-parse-command-line-arguments-in-c)上提到了一些好的库。我个人使用了[Sixlettervariables](https://stackoverflow.com/questions/491595/best-way-to-parse-command-line-arguments-in-c/491730#491730)提到的 WPF TestAPI 库，它确实非常好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T08:03:38.593

尝试

```
string values = "ApplicationId =1; Name =2";
string[] pairs = values.Split(';');

string value1 = pairs[0].Split('=')[1];
string value2 = pairs[1].Split('=')[1]; 
```

当然，您需要更好的错误检查，但 value1 和 value2 应该分别为“1”和“2”

# iphone - Objective-C 和 ASIHTTPRequest - 响应字符串问题

> ID：1000094
> 
> 赞同：2
> 
> 时间：2009-06-16T07:57:21.317
> 
> 标签：iphone, objective-c, nsstring

我正在使用 ASIHTTPRequest 包将一些数据从 iPhone 发送到我的服务器，然后当保存在服务器上时，我收到一个响应（一个字符串），其中包含我想在 webview 中加载的 url。理论上这应该很简单，但实际上我根本无法完成这项工作。我猜字符串的编码似乎有一些问题。如果我 NSLog 退出响应，它似乎完全没问题，但它只是拒绝在 webview 中加载。

这是我的要求（一直在玩压缩和编码）：

```
NSURL *url = [NSURL URLWithString:@"xxx"];
ASIFormDataRequest *request = [[[ASIFormDataRequest alloc] initWithURL:url] autorelease];
[request setFile:imageData forKey:@"photo"];
[request setDelegate:self];
[request setDidFinishSelector:@selector(requestDone:)];
[request setDidFailSelector:@selector(requestWentWrong:)];
[request setAllowCompressedResponse:NO];
[request setDefaultResponseEncoding:NSUTF8StringEncoding];//NSISOLatin1StringEncoding   
[request start]; 
```

这是我的回复：

```
- (void)requestDone:(ASIHTTPRequest *)request{
    NSString *response = [request.responseString];
    NSLog(@"web content: %@", response);
    [webView loadSite:response];
} 
```

NSLog 看起来不错，但网站不会加载。尝试发送一个 NSString 变量，如 NSString *temp = @" [http://www.google.se](http://www.google.se) "; 到 loadSite 函数并且工作正常，所以问题不在于加载本身。

在 obj-c 丛林中将大大增加任何指针或帮助:)

/F

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T11:16:40.760

尝试执行以下操作：

```
NSString *response = [[request responseString] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

它将修剪所有空格和换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T09:59:09.887

事实证明，响应会自动以 \n （新换行符）结束。这在记录变量时没有出现，在将其写入文本字段时也没有出现，但在将其转换为 urlobject 并记录我找到它时。调试再次得到回报；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T08:07:07.247

woups，我的响应者当然是：

```
- (void)requestDone:(ASIHTTPRequest *)request{
    NSString *response = [request responseString];
    NSLog(@"web content: %@", response);
    [webView loadSite:response];
} 
```

# .net - .net 3.5 和 4.0 的基本区别

> ID：1000101
> 
> 赞同：18
> 
> 时间：2009-06-16T07:59:08.257
> 
> 标签：.net, comparison

请告诉我 dotnet 2008 和 2010（3.5 和 4.0）之间的基本区别

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-16T11:01:03.303

MSDN 有许多“新增功能”页面，包括：

*   “ [Visual Studio 2010 中的新增功能](http://msdn.microsoft.com/en-gb/library/bb386063(VS.100).aspx)”
*   “ [.NET Framework 4 中的新增功能](http://msdn.microsoft.com/en-gb/library/dd409230(VS.100).aspx)”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-05-07T15:40:31.580

我希望我没有错误地阅读 jignesh 的问题，但我不得不假设大量“新增功能”页面的链接可能不是他们想要的。我认为他们本可以进行搜索并拉出那么多。

我认为他们正在寻找的更多的是对人们可以为他们分解的东西作为选择或不使用特定版本的理由的感觉——个人经验，而不是新闻稿。

对我来说，我想说让 2010/4.0 值得一游的最重要的事情是允许我分发客户端应用程序而无需在机器上安装 dnFx、新的 GC、疯狂酷的“动态"，以及（可悲的是，是的）多显示器支持。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-16T08:06:39.697

呃，从哪里开始。这是我喜欢的：

*   关于并行计算的所有新事物
*   “动态”关键字和动态语言例程
*   代码合约
*   新的后台垃圾收集器
*   仅将主互操作程序集的必要部分编译到您的应用程序中，以及此基础架构允许纯 .NET 代码的兼容性/版本控制改进
*   关于异常处理的新内容（查找损坏的状态异常）
*   BigInteger 和 SortedSet 类之类的小东西
*   在托管代码中处理内存映射文件

可能其他人，在网上看看，已经有很多信息了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-16T08:01:45.103

一个简单的谷歌带来了...

[http://blogs.msdn.com/bclteam/archive/2009/05/22/what-s-new-in-the-bcl-in-net-4-beta-1-justin-van-patten.aspx](http://blogs.msdn.com/bclteam/archive/2009/05/22/what-s-new-in-the-bcl-in-net-4-beta-1-justin-van-patten.aspx)

可能还有很多东西，框架很大，所以对 x 人感兴趣的变化对 y 人可能不那么重要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-05-07T15:27:46.900

在 Visual Studio 2010 中内置 MVC ！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T10:27:52.103

在那种情况下（可能是 lance），我必须说我最喜欢的也是动态的，也是多线程的超级解决方案 - Parallel 库，它真的很棒而且速度很快！（嵌套并行并不总是更快 BTW）

但我觉得@jignesh 询问工程结构是否有真正的区别，它是如何从后面工作的，内部的人应该说，毕竟决定它足够不同，如果你想在同一台机器上安装 3.5 和 4，你需要安装它们。

无论如何，如果有的话，我会很乐意回答这个问题:)

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-09-14T17:11:23.660

`Framework 3.5`和之间的区别`Framework 4.0`：

1.  `EnableViewState - [true or false]` 在`Framework 3.5`

    `EnableViewState -[Enabled/Disabled/Inherits]`在`Framework 4.0`

2.  `Keyword`并在页面指令中不可用时`Description`添加。`Framework 4.0``Framework 3.5`

# visual-studio - Visual Studio：配置调试以附加到进程

> ID：1000104
> 
> 赞同：4
> 
> 时间：2009-06-16T07:59:39.363
> 
> 标签：visual-studio, visual-studio-2008, debugging

我正在使用 Visual Studio 2008；是否可以将项目调试选项配置为在按 F5 时自动附加到具有特定名称的进程？

编辑：实际宏，指定附加到托管代码：

```
Sub AttachToMyProcess()
    Try
        Dim dbg2 As EnvDTE80.Debugger2 = DTE.Debugger
        Dim trans As EnvDTE80.Transport = dbg2.Transports.Item("Default")
        Dim dbgeng(1) As EnvDTE80.Engine
        dbgeng(0) = trans.Engines.Item("Managed")
        Dim proc2 As EnvDTE80.Process2 = dbg2.GetProcesses(trans, "MyMachine").Item("MyProcess")
        proc2.Attach2(dbgeng)
    Catch ex As System.Exception
        MsgBox(ex.Message)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-16T09:27:49.483

有可能的。你可以写一个这样的宏

```
 DTE.Debugger.DetachAll()
    For Each proc As EnvDTE.Process In DTE.Debugger.LocalProcesses
        If proc.Name.IndexOf("processname") <> -1 Then
            proc.Attach()
        End If
    Next 
```

然后更改 VS 键绑定以在按下 F5 时执行此宏

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T08:04:22.803

尝试按 CTRL + ALT + P。如果你真的想的话，我想你可以重新映射 Debug.AttachtoProcess。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-29T08:48:01.210

我已经为此编写并[添加了插件](http://weblogs.asp.net/pabloretyk/archive/2009/02/12/attach-to-process-for-lazies.aspx)，您可能想尝试一下。

# reporting-services - 如何在 RDLC 中进行比较

> ID：1000111
> 
> 赞同：1
> 
> 时间：2009-06-16T08:02:11.780
> 
> 标签：reporting-services, reportviewer, rdlc

我要一份报告。报告格式如下：

```
Thana Good Removed NotFound

A     2     3        4

B      1     0       4

C      1     4       5

Total  4      7      13 
```

我的数据库数据上有三种类型`GOOD`, 。格式如下：`Removed``NotFound`

```
A GOOD
A GOOD
B NotFound
C Removed
B GOOD 
```

如何比较字符串？在比较之后如何计算`A` 类型`Good`是 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T14:04:33.807

您可以在表达式中使用 Iif 语句。

例如：

```
=Iif(Fields!Good.Value = 1, "GOOD IS 1", "GOOD IS NOT 1") 
```

或者

```
=Iif(Fields!Good.Value > Fields!Removed.Value, "Good is larger than removed", "Good is smaller or equal to removed") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T13:19:38.173

你应该看看这里：http: [//msdn.microsoft.com/en-us/library/ms159673 (SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms159673(SQL.90).aspx)

在你的情况下，如果我理解正确，你会想使用 Sum

# sql - SQL - 格式化 XML 响应值

> ID：1000117
> 
> 赞同：0
> 
> 时间：2009-06-16T08:03:43.210
> 
> 标签：sql, sqlxml

我想以以下格式接收我的响应 XML...

```
<PersonDetails>
    <Name>Ajay</Name>
    <Age>29</Age>
    <ContactDetails>
        <ContactDetail>
            <ContactType>Mobile</ContactType>
            <ContactValue>9565649556</ContactValue>
        </ContactDetail>
        <ContactDetail>
            <ContactType>Email</ContactType>
            <ContactValue>ajay@yahoo.com</ContactValue>
        </ContactDetail>
    </ContactDetails>
</PersonDetails> 
```

我在这里有 2 个不同的选择语句...

```
SELECT name, age FROM Person_Details
WHERE id = 12

SELECT Contact_Type, Contact_Value FROM Person_Contact_Details
Where id = 12 
```

这里有任何建议...我尝试了 FOR XML EXPLICIT/PATH 的组合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T08:19:24.730

`PATH`：

```
SELECT name AS Name
            , age AS Age
            , (SELECT Contact_Type AS ContactType
                , Contact_Value AS ContactValue
                FROM Person_Contact_Details c
                WHERE c.id = p.id
                FOR XML PATH('ContactDetail'), TYPE) AS ContactDetails
        FROM Person_Details p
        WHERE id = 12
        FOR XML PATH('PersonDetails') 
```

# winforms - 字体向后不兼容

> ID：1000129
> 
> 赞同：3
> 
> 时间：2009-06-16T08:08:41.207
> 
> 标签：winforms, fonts, windows-xp

我正在为我的 winforms 应用程序使用 Segoe UI。

在 XP 上，这种字体不存在，我想让我的应用程序改用 Verdana。

实现这一目标的最佳方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-21T10:17:19.417

最好使用默认（系统）字体来实现原生外观。因此，Vista 使用“Sergoe UI”作为默认字体，而 XP 使用“Tahoma”（不是“Verdana”）。要获取默认对话框字体，请使用 SystemFonts 类：

```
protected override void OnLoad(EventArgs e)
{
  base.OnLoad(e);
  Font = SystemFonts.DialogFont;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T08:16:59.507

你想要的是这样的：

```
Font GetUIFont()
{
    Font testFont = new Font("Segoe UI", 10f);
    if (testFont.Name == "Segoe UI")
        return testFont;
    else
        return new Font("Verdana", 10f);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T18:07:41.410

从 JasonH 的解决方案开始，包括从 Form 派生的部分。如果您对不自动继承表单字体的控件有问题，请在表单具有所有控件时调用此代码：

```
foreach (Control ctl in this.Controls)
{
    ctl.Font = GetUIFont();
} 
```

# ruby - 在组织内共享 ruby 代码

> ID：1000130
> 
> 赞同：4
> 
> 时间：2009-06-16T08:09:18.303
> 
> 标签：ruby, rubygems, jruby

我和我的团队开始构建一些可重用的脚本。仅当它们与专有应用程序和我们特定的服务器环境一起使用时，它们才能在我们的组织中重复使用。所以不太适合rubyforge或github等。

我的问题是，确保我们在所有用户中都使用最新最好的脚本的最佳做法是什么？我们几乎在一台服务器上运行这些脚本，但可能需要扩展到其他服务器。

我们应该将它们捆绑到 gem(s) 中并启动一个私有 gem 服务器吗？

或者更简单的东西，比如一个通用的、可共享的 lib 目录。也许使用脚本从我们的 SCM 下载/更新？

其他想法？

谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T08:44:01.740

这取决于一些因素，比如有多少人想要更改代码（只有你的团队，或者其他人），或者你有多少钱？

就我个人而言，我会创建一个 build+gem 服务器，您可以在其中使用一些版本控制系统（如 git 或 svn，取决于有多少人在项目上工作）上传脚本，然后创建一个 cron 作业，它会自动生成以通用间隔从源中获取 gem，并将它们存储为不同的版本。通过这种方式，您可以确保始终拥有存储应用程序 gem 的权威服务器，并且如果出现问题，您始终可以获得早期版本。您的脚本可能会创建单独的 gem 版本名称，例如“appserv-edge”或“appserv-stable”

如果您有钱，您可能还想查看 github 的封闭源代码选项。但是，我不知道他们是否有用于非开源程序的 gem 构建和托管设施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T18:59:19.130

我创建了一个私人 gemserver，这很容易。唯一棘手的一点是决定您希望用户如何上传 gem。就个人而言，我只是使用一个 PHP 上传表单，并让它检查以确保它没有掩盖任何现有的 gem。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T20:55:32.373

在我的办公室，我们对一些共享脚本和库使用了一些混合方法。我们确实将它们全部捆绑到一个 gem 中，但我们没有使用 gem 服务器，而是将它们保存在源代码控制中，然后构建 gem（使用 newgem）并根据需要在本地安装它。

这种方法的缺点是它需要两个命令而不是一个来安装 gem，但这在 qa 和生产环境中很大程度上得到缓解，因为我们使用 Capistrano 进行部署。

好处是它非常简单，并且在开发中，如果您正在处理需要更改 gem 的东西，那么编辑/构建/部署周期非常短。我目前正在将许多通用功能引入共享 gem，所以我真的很欣赏这方面。

# python - 是否有用于 ID3 元数据的 Perl 或 Python 库？

> ID：1000132
> 
> 赞同：1
> 
> 时间：2009-06-16T08:10:11.750
> 
> 标签：python, perl, id3

基本上，我有一堆从我兄弟的 iPod 中提取的音乐文件，它们保留了它们的元数据，但有 iPod 似乎喜欢将它们存储在下面的那些绝对可怕的四个字符名称。我想我会写一个不错的、快速的脚本来按我的意愿重命名它们，但我很好奇任何用于读取 ID3 元数据的好的库。我更喜欢 Perl 或 Python。我对 Perl 很满意，因为我在工作中使用它，而 Python 我需要更多的练习，它会让我的 Python 传道者朋友开心。

无论如何，缩短版：您能否为 Python 或 Perl 命名一个好的库/模块，让我可以轻松地从一堆 mp3 中提取 ID3 元数据？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-16T09:15:53.017

[当您搜索 ID3时，](http://search.cpan.org/search?query=ID3&mode=all) [CPAN Search](http://www.metacpan.org/)会出现几个 Perl 模块。几乎所有以“Is there a library...”开头的 Perl 问题的答案都是检查 CPAN。

我倾向于喜欢[MP3::Tag](http://www.metacpan.org/module/MP3::Tag/)，但像我这样的老年人倾向于找到合适的东西而忽略所有技术进步，直到我们被迫改变。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T08:17:17.527

这里有几个python库

[http://id3-py.sourceforge.net/](http://id3-py.sourceforge.net/)

[http://nedbatchelder.com/code/modules/id3reader.html](http://nedbatchelder.com/code/modules/id3reader.html)

[http://code.google.com/p/mutagen/](http://code.google.com/p/mutagen/) [更新网址]

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-16T08:12:50.623

[http://www.id3.org/Implementations](http://www.id3.org/Implementations)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-16T12:23:04.090

我对[MP3::Info](http://search.cpan.org/dist/MP3-Info)很幸运。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-17T02:10:19.087

[MP3::Tag](http://search.cpan.org/~ilyaz/MP3-Tag-1.11/lib/MP3/Tag.pm)也很棒。同样，如果您正在寻找 Perl 模块，请先访问 search.cpan.org。

```
 use MP3::Tag;

  $mp3 = MP3::Tag->new($filename);

  # get some information about the file in the easiest way
  ($title, $track, $artist, $album, $comment, $year, $genre) = $mp3->autoinfo();
  # Or:
  $comment = $mp3->comment();
  $dedicated_to
    = $mp3->select_id3v2_frame_by_descr('COMM(fre,fra,eng,#0)[dedicated to]');

  $mp3->title_set('New title');         # Edit in-memory copy
  $mp3->select_id3v2_frame_by_descr('TALB', 'New album name'); # Edit in memory
  $mp3->select_id3v2_frame_by_descr('RBUF', $n1, $n2, $n3);    # Edit in memory
  $mp3->update_tags(year => 1866);      # Edit in-memory, and commit to file
  $mp3->update_tags();                  # Commit to file 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T22:56:34.593

我认为这个片段：[Rename MP3 files from ID3 tags](http://code.activestate.com/recipes/576811/) from python recipies 可能会有所帮助。它使用[id3reader](http://nedbatchelder.com/code/modules/id3reader.html)库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T03:06:53.027

[Python 包索引有一个与](http://pypi.python.org/pypi)[此处](http://pypi.python.org/pypi?%3Aaction=search&term=id3&submit=search)搜索“id3”匹配的 python 包列表，其中前几个似乎与您的需求有关。与上面布赖恩的回答一样，任何“是否有一个 python 模块......”的答案可能从 PyPI 开始。

# c# - DTE.ExecuteCommand 并等待

> ID：1000137
> 
> 赞同：9
> 
> 时间：2009-06-16T08:11:57.627
> 
> 标签：c#, visual-studio, automation, macros, envdte

我想使用宏来发布我的 web 应用程序项目。小问题是，DTE.ExecuteCommand 异步运行，我需要等到命令完成。

例子：

```
 DTE.Windows.Item(Constants.vsWindowKindSolutionExplorer).Activate()
    DTE.ActiveWindow.Object.GetItem("04 - Products\04 - Products.WSS").Select(vsUISelectionType.vsUISelectionTypeSelect)
    DTE.ExecuteCommand("ClassViewContextMenus.ClassViewProject.Publish")
    '// now I want copy (and overwrite) some files, but AFTER the publish 
```

是否有一些同步对象或有关已执行命令状态的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-10-06T02:35:24.710

如果你还在寻找这个问题的答案，试试这个。

绑定到发布事件并在成功推送时调用您的外部命令。我正在做类似的事情来构建解决方案，然后触发 MSpec 测试运行器（[博客文章](http://kylefinley.net/archive/2009/10/05/1337.aspx)）。

为此，您需要为 PublishEvents_OnPublishDone 添加一个挂钩。通过转到 EnvironmentEvents 模块并添加以下内容来执行此操作：

```
<System.contextStaticAttribute()> Public WithEvents PublishEvents As EnvDTE80.PublishEvents

Private Sub PublishEvents_OnPublishDone(ByVal Success As Boolean) Handles PublishEvents.OnPublishDone
    'call custom module sub here.
End Sub 
```

如果您只想运行外部命令，有时可以这样做。像这样创建你的宏：

```
Public runExternalCommandOnComplete As Boolean = False

Sub PublishAndRunExternalCommand()

    DTE.Windows.Item(Constants.vsWindowKindSolutionExplorer).Activate()
    DTE.ActiveWindow.Object.GetItem("04 - Products\04 - Products.WSS").Select(vsUISelectionType.vsUISelectionTypeSelect)
    DTE.ExecuteCommand("ClassViewContextMenus.ClassViewProject.Publish")

    runExternalCommandOnComplete = True

End Sub 
```

然后在 EnvironmentEvents 中添加：（注意：CustomMacros 是您放置上面代码的模块的名称）

```
<System.contextStaticAttribute()> Public WithEvents PublishEvents As EnvDTE80.PublishEvents

Private Sub PublishEvents_OnPublishDone(ByVal Success As Boolean) Handles PublishEvents.OnPublishDone
   CustomMacros.runExternalCommandOnComplete = False
   'Where ExternalCommand1 matches the command you want to run
   DTE.ExecuteCommand("Tools.ExternalCommand1")  
End Sub 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-27T13:57:38.610

以下是如何编译单个文件，然后链接整个解决方案，例如：

```
Dim WithEvents t As Timers.Timer

Sub test()
    DTE.ExecuteCommand("Build.Compile")
    t = New Timers.Timer
    t.Interval = 0.05
    t.Start()
End Sub

Sub t_Elapsed(ByVal ee As Object, ByVal dd As Timers.ElapsedEventArgs) Handles t.Elapsed

    If DTE.Solution.SolutionBuild.BuildState <> vsBuildState.vsBuildStateInProgress Then
        t.Stop()
        DTE.ExecuteCommand("Build.Link")
    End If

End Sub 
```

# c# - ASP.net 页面加载弹出窗口

> ID：1000141
> 
> 赞同：1
> 
> 时间：2009-06-16T08:13:29.623
> 
> 标签：c#, asp.net, ajax

我想知道是否有可能在页面加载时显示模态弹出窗口，表示页面正在加载。我有一个从外部源获取大量数据的页面，这意味着在实际填充任何控件之前需要一些时间。我想要一个弹出窗口或类似的东西来告诉用户页面正在加载。

我试过这个：

```
<ajax:ModalPopupExtender ID="mpeLoader" runat="server" TargetControlID="btnLoader"
    PopupControlID="pnlLoading" BackgroundCssClass="modalBackground" />
<asp:Panel ID="pnlLoading" runat="server" Width="100px" Style="display: none;">
    <div class="detailspopup">
        <table>
            <tr>
                <td><asp:Image ID="imgLoader" runat="server" ImageUrl="~/App_Themes/Main/img/loading.gif" /></td>
            </tr>
            <tr>
                <td>Loading...</td>
            </tr>
        </table>
    </div>
</asp:Panel> 
```

使用虚拟按钮 btnLoader 允许我访问节目并隐藏后面的代码。我一直在玩页面生命周期中的 .show 方法，但我似乎找不到在页面加载时显示 poopup 的方法（加载完成后消失）。在过滤数据时也需要这样做，从而根据过滤数据获取新数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T08:21:08.580

如果没有更多信息，很难说最好的解决方案是什么，但一种可能的方法是让第一页充当一个“加载器”，其中包含对话框和一些将使用 ajax 加载实际页面的 javascript。

就像我之前写的那样，这在很大程度上取决于您要完成的工作:-)！

但是使用 jQuery 的一种方法是，如果您尝试加载的页面非常简单，例如没有任何状态/回发控件的列表，则创建一个“加载器”页面，如代码 belov 并使用**UrlToLoad**查询参数页面动态加载。

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>

    <script src="jquery.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(function()
        {
            $("form").load("<%= this.Request["UrlToLoad"] %> form");
        });
    </script>
</head>

<body>
    <form runat="server">           
        Loading...
    </form>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T08:22:41.573

你考虑过使用 jQuery 吗？有一些优秀的模态对话框插件可用。我过去广泛使用过 Eric Martin 的[SimpleModal](http://www.ericmmartin.com/projects/simplemodal/)，并且对它非常满意。它在显示对话框之前和之后都有回调挂钩，因此您可以执行使用函数所需的任何检查。

使用 jQuery 路由 - 您可以有一个 div 包围所有仍在加载的内容，并通过显示“页面加载”消息的模式对话框变暗/禁用。然后，您可以利用 jQuery 中的[$document.ready()](http://www.learningjquery.com/2006/09/introducing-document-ready)功能来确定页面何时完成加载。此时，您可以删除对话框并淡入页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-22T08:40:35.803

我所做的是制作一个 PreLoader.aspx 页面，该页面将“保持”直到我们想要的页面被加载：

```
<script type="text/javascript" language="javascript">
window.onload=function()
{
    $get("ctl00_ContentPlaceHolder1_btnNav",document).click();
    setTimeout('document.images["Loader"].src="App_Themes/Main/img/loading.gif"', 200);         
}
</script> 
```

该按钮实际上进行了转移

```
<asp:Label ID="lblLoading" runat="server" Text="Loading the requested page. Please wait ..." />
            <asp:Button ID="btnNav" Style="display: none;" runat="server" OnClick="NavTo" />

protected void NavTo(object sender, EventArgs e)
    {
        Response.Redirect(Request.QueryString["url"].ToString());
    } 
```

我喜欢这个，因为它可以重复用于每个繁重的数据页面......

# haskell - 将“为什么函数式编程很重要”翻译成 Haskell

> ID：1000145
> 
> 赞同：15
> 
> 时间：2009-06-16T08:15:45.563
> 
> 标签：haskell, functional-programming

为了丰富文化和知识，我决定学习一点 Haskell。我一直在阅读[Hughes 的“为什么函数式编程很重要”](http://www.cs.chalmers.se/%7Erjmh/Papers/whyfp.html)，并试图将其代码翻译成真正的 Haskell。我在下面附上了我的一些尝试（对于论文的数字部分；alpha-beta 算法更有趣，但我还必须从头开始编写一个游戏评估器！）。

在这一点上，它更像是对 Haskell 语法的练习，而不是其他任何东西。我已经做了一些简单的事情，比如翻译`repeat`成原生的 Haskell `iterate`，翻译一些使用大量括号的函数来组合函数（使它们在过程中更加无点）等等。

但我的代码确实有效，我想知道它是否足够“Haskell-ish”。有哪位高手可以给我一些提示吗？

```
-- 4.1 Newton-Raphson square roots
next n x = (x + n/x)/2.0

-- -- this is "iterate::(a->a)->a->[a]"
-- repeat f a  = a : iterate f (f a)

within eps (a:b:rest) = 
  if abs(a-b) <= eps 
    then b
    else within eps (b:rest)

sqroot a0 eps n = within eps (iterate (next n) a0)

relative eps (a:b:rest) = 
  if abs(a-b) <= eps*abs(b)
    then b
    else relative eps (b:rest)

relativesqrt a0 eps n = relative eps (iterate (next n) a0)

-- 4.2 numerical differentiation

easydiff f x h = (f (x+h) - f x) / h

differentiate h0 f x = map (easydiff f x) (iterate (/2) h0)

-- diff1a h0 eps f x = within eps (differentiate h0 f x)
diff1 h0 eps f = within eps . differentiate h0 f 

elimerror n (a:b:rest) = (b*(2**n)-a)/(2**n-1) : elimerror n (b:rest)

-- need fromIntegral to make a non-integer out of the Int which comes out of round
order (a:b:c:rest) =  fromIntegral (round (logBase 2 ((a-c)/(b-c)-1)))

improve s = elimerror (order s) s 

--diff2a h0 eps f x = within eps (improve (differentiate h0 f x))
diff2 h0 eps f = within eps . improve . differentiate h0 f 

--super s = map second (iterate improve s) -- how can we make this point-free?
super :: (RealFrac t, Floating t) => [t] -> [t] 
           -- w/o this it wants to be [double]->[double]
super = map second . iterate improve

-- second (a:b:rest) = b
second = head . tail

diff3 h0 eps f = within eps . super . differentiate h0 f

-- 4.3 integration

easyintegrate f a b = (f a + f b)*(b-a)/2

-- addpair becomes (uncurry (+))

integrate f a b = integ f a b (f a) (f b) 

integ f a b fa fb = 
  (fa+fb)*(b-a)/2 : map (uncurry (+)) (zip (integ f a m fa fm) (integ f m b fm fb))
  where m = (a+b)/2 
        fm = f m 

-- test: following should be about pi
approxpi eps = within eps (improve (integrate (\x -> 4/(1+x*x)) 0 1))
superpi eps = within eps (super (integrate (\x -> 4/(1+x*x)) 0 1))

-- is there any way to keep track of the number of iterations? state monad, but seems like a lot of work...\ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-16T09:00:16.823

**4.1 Newton-Raphson 平方根**

这两行

```
sqroot a0 eps n = within eps (iterate (next n) a0)
relativesqrt a0 eps n = relative eps (iterate (next n) a0) 
```

几乎相同，因此您可以进一步抽象事物：

```
sqroot method a0 eps n = method eps (iterate (next n) a0)
relativesqrt = sqroot relative
withinsqrt   = sqroot within 
```

**4.2 数值微分**

我不认为将其`h0`作为函数的参数有什么意义，因为它只是限制序列`differentiate`的起点。`0`（在 Newton-Rhapson 案例中情况并非如此`a0`，起点可能很重要）。

我认为抽象出这个限制接近零的速率同样合适：

```
differentiate rate f x = map (easydiff f x) (iterate rate 1) 
```

当然，两者都可以做到：

```
differentiate rate h0 f x = map (easydiff f x) (iterate rate h0) 
```

无论如何，这是一个相当武断的决定。

**4.2 整合**

您可以使用

```
zipWith (+) (integ f a m fa fm) (integ f m b fm fb) 
```

代替

```
map (uncurry (+)) (zip (integ f a m fa fm) (integ f m b fm fb)) 
```

我认为更具可读性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-16T08:30:25.320

对于`within`并且`relative`我会使用受保护的符号：

```
within eps (a:b:rest)
  | abs(a-b)<=eps = b
  | otherwise = within eps (b:rest) 
```

因为`second`，你可以写`!! 1`。特别是最后一个是个人喜好，我猜。

您还应该给出类型签名。

**编辑**：如果您陷入混淆，请尝试：

```
within :: (Ord a, Num a) => a -> [a] -> a
within eps l@(_:xs) = snd. head . filter ((<= eps) . fst) $ zip zs xs
   where
    zs = zipWith (\ a b -> abs (a-b)) l xs 
```

（类型检查，未测试 - 我永远不知道我是否正确使用过滤器或是否必须取消过滤器；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-21T12:39:38.307

Roger Costello 撰写了 John Hughes[论文](http://www.cse.chalmers.se/~rjmh/Papers/whyfp.html)的两部分摘要，将原始 Miranda 代码翻译成 Haskell。这是他的文章的[第一部分](http://xfront.com/Haskell/Why-Functional-Programming-Matters.pdf)和[第二部分](http://www.xfront.com/Haskell/Why-Functional-Programming-Matters-Part-2.pdf)。

# apache-flex - Flex 绘图示例错误

> ID：1000155
> 
> 赞同：0
> 
> 时间：2009-06-16T08:21:12.310
> 
> 标签：apache-flex, flex3, flexbuilder

我是 flex 新手，我正在尝试运行以下路径中给出的 flex 绘图应用程序示例的代码：http: [//www.flashcomguru.com/components/flex_whiteboard/whiteboard_demo/srcview/index.html](http://www.flashcomguru.com/components/flex_whiteboard/whiteboard_demo/srcview/index.html)

但是我在编译时收到以下错误：

''无法为组件类'Whiteboard.Whiteboard'找到指定的基类'Whiteboard.WhiteboardManager'。''

请有人建议我为什么会出现它以及我如何克服这个问题。我正在为该项目使用 Flash 播放器版本 10 和 flex 3.0 sdk。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T08:55:09.097

您需要在项目中包含 WhiteBoard.swc 库。如果您使用的是 Eclipse/Flex Builder，请转到项目属性 -> flex 构建路径 -> 库路径 -> 添加 swc。或者将它移动到 libs 文件夹就足够了。该组件的源代码不包含在该演示中，因为它不是免费组件。我也没有看到演示版本，所以除非你购买它，否则你可能无法在本地运行这些源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T08:25:35.483

在我看来，您的源路径设置不正确。阅读本文以了解如何设置源路径

[http://www.cove.org/ape/quickstart_fb.htm](http://www.cove.org/ape/quickstart_fb.htm)

# mysql - 根据多对多表中的 Count() 更新表

> ID：1000158
> 
> 赞同：0
> 
> 时间：2009-06-16T08:21:38.860
> 
> 标签：mysql

我有一张由人组成的小组表和一张由多对多对组成的`group_id`表格`person_id`。 `group`有一个计数列，它应该存储每个组中的当前人数。如果可以的话，我想在一个 SQL 命令中更新这些信息。我想某种子查询可以让我完成这个，但我不确定如何。

这个查询成功地给了我一个 group_ids 到他们的计数的映射

```
SELECT `group_id`, COUNT(`group_id`) FROM `group-person` GROUP BY `group_id`; 
```

此查询失败，但如果它有效，这将是我想要做的

```
UPDATE `group`,`group-person` WHERE `group`.`id` = `group-person`.`group_id`
SET `group`.`count` = COUNT(`group-person`.`group_id`)
GROUP BY `group-person`.`group_id`; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T08:25:39.977

```
UPDATE `group`
SET `group`.`count` = (
    SELECT COUNT(*)
    FROM   `group_person`
    WHERE  `group_person`.`group_id` = `group`.`id`
) 
```

# database - 基于图的数据库（http://neo4j.org/）有哪些用例？

> ID：1000162
> 
> 赞同：135
> 
> 时间：2009-06-16T08:23:47.813
> 
> 标签：database, neo4j, graph-databases

我使用了很多关系数据库，并决定冒险尝试其他可用的类型。

这个特殊的产品看起来不错而且很有前途： http: [//neo4j.org/](http://neo4j.org/)

有人用过基于图的数据库吗？可用性方面的优缺点是什么？

你在生产环境中使用过这些吗？促使您使用它们的要求是什么？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2009-06-16T11:07:10.343

我在以前的工作中使用了图形数据库。我们没有使用 neo4j，它是建立在 Berkeley DB 之上的内部产品，但它是相似的。它被用于生产（现在仍然如此）。

我们之所以使用图数据库，是因为系统存储的数据以及系统对数据所做的操作，正是关系型数据库的弱点，也正是图型数据库的强项。系统需要存储缺乏固定模式并通过关系链接在一起的对象集合。为了对数据进行推理，系统需要执行大量操作，这些操作将是图数据库中的几次遍历，但这将是 SQL 中相当复杂的查询。

图模型的主要优点是快速的开发时间和灵活性。我们可以在不影响现有部署的情况下快速添加新功能。如果潜在客户想要导入他们自己的一些数据并将其移植到我们的模型之上，通常可以由销售代表在现场完成。当我们设计新功能时，灵活性也有所帮助，使我们免于尝试将新数据压缩到僵化的数据模型中。

拥有一个奇怪的数据库让我们可以构建许多其他奇怪的技术，为我们提供许多秘密调味料，以将我们的产品与竞争对手的产品区分开来。

主要缺点是我们没有使用标准的关系数据库技术，当您的客户是企业时，这可能是一个问题。我们的客户会问为什么我们不能只在他们的巨型 Oracle 集群上托管我们的数据（我们的客户通常拥有大型数据中心）。其中一个团队实际上重写了数据库层以使用 Oracle（或 PostgreSQL，或 MySQL），但它比原来的速度稍慢。至少有一家大型企业甚至制定了仅甲骨文的政策，但幸运的是甲骨文收购了 Berkeley DB。我们还必须编写很多额外的工具——例如，我们不能只使用 Crystal Reports。

我们的图形数据库的另一个缺点是我们自己构建了它，这意味着当我们遇到问题（通常是可伸缩性）时，我们必须自己解决它。如果我们使用关系数据库，供应商在十年前就已经解决了这个问题。

如果您正在为企业客户构建产品并且您的数据适合关系模型，请尽可能使用关系数据库。如果您的应用程序不适合关系模型，但适合图形模型，请使用图形数据库。如果它只适合其他东西，请使用它。

如果您的应用程序不需要适应当前的 blub 架构，请使用图形数据库、CouchDB 或 BigTable，或者任何适合您的应用程序并且您认为很酷的东西。它可能会给您带来优势，并且尝试新事物很有趣。

无论您选择什么，都尽量不要自己构建数据库引擎，除非您真的喜欢构建数据库引擎。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-06-16T19:20:34.290

我们已经与 Neo 团队合作了一年多，并且非常高兴。我们对学术工件及其关系进行建模，这对于图形数据库来说是很重要的，并在网络上运行推荐算法。

如果您已经在使用 Java，我认为使用 Neo4j 进行建模非常简单，并且在我们尝试过的任何其他解决方案中，它具有最平坦/最快的 R/W 性能。

老实说，我很难*不*考虑图形/网络，因为它比设计复杂的表结构来保存对象属性和关系要容易得多。

话虽如此，我们确实在 MySQL 中存储了一些信息，只是因为业务方面更容易对其运行快速 SQL 查询。要使用 Neo 执行相同的功能，我们需要编写我们现在根本没有带宽的代码。不过，一旦我们这样做了，我就会将所有这些数据转移到 Neo 上！

祝你好运。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-06-26T18:48:10.313

两点：

首先，关于我过去 5 年在 SQL Server 中处理的数据，我最近在 SQL 中遇到了我们需要运行的查询类型的可伸缩性墙（嵌套关系...你知道...图表）。我一直在玩 neo4j，当我需要这种查找时，我的查找时间要快几个数量级。

其次，图数据库已经过时了。不。早期，当人们试图弄清楚如何有效地存储和查找数据时，他们创建并使用了图形和网络风格的数据库模型。这些都是为了物理模型反映逻辑模型而设计的，所以它们的效率并没有那么高。这种类型的数据结构适用于半结构化数据，但不适用于结构化密集数据。因此，这个名叫 Codd 的 IBM 家伙正在研究安排和存储结构化数据的有效方法，并提出了关系数据库模型的想法。这很好，人们很高兴。

我们有什么在这里？两种工具用于两种不同的目的。图数据库模型非常适合表示半结构化数据和实体之间的关系（可能存在也可能不存在）。关系数据库适用于具有非常静态模式的结构化数据，并且连接深度不会很深。一种适用于一种数据，另一种适用于其他类型的数据。

为了创造这句话，没有银弹。说图数据库模型已经过时并且使用一个放弃了 40 年的进步是非常短视的。这就像说使用 C 放弃了我们为获得 Java 和 C# 之类的东西而经历的所有技术进步。但这不是真的。C 是某些任务所需的工具。Java 是用于其他任务的工具。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-06-16T12:58:06.063

多年来我一直在使用 MySQL 来管理工程数据，它运行良好，但我们遇到的问题之一（但没有意识到我们遇到的问题）是我们总是必须预先规划架构。我们知道我们遇到的另一个问题是将数据映射到域对象并返回。

现在我们刚刚开始尝试 neo4j，看起来它为我们解决了这两个问题。为每个节点（和关系）添加不同属性的能力使我们能够重新思考我们处理数据的整个方法。它就像动态语言与静态语言（Ruby 与 Java），但针对的是数据库。在数据库中构建数据模型可以以更加灵活和动态的方式完成，这极大地简化了我们的代码。

而且由于代码中的对象模型通常是图结构，从数据库映射也更简单，代码更少，因此错误更少。

作为额外的奖励，我们用于将数据加载到 neo4j 的初始原型代码实际上比以前的 MySQL 版本执行得更快。我对此（还）没有可靠的数字，但这是一个很好的附加功能。

但归根结底，选择可能应该主要基于您的域模型的性质。它是否更好地映射到表格或图表？决定做一些原型，加载数据并使用它。使用 neoclipse 查看数据的不同视图。一旦你这样做了，希望你知道你是否在做一件好事。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-06-30T23:06:28.800

这是一篇很好的文章，讨论了非关系数据库满足的需求：[http ://www.readwriteweb.com/enterprise/2009/02/is-the-relational-database-doomed.php](http://www.readwriteweb.com/enterprise/2009/02/is-the-relational-database-doomed.php)

它很好地指出（除了名称）关系数据库没有缺陷或错误，只是现在人们开始在主流软件和网站中处理越来越多的数据，而关系数据库只是不会扩展对于这些需求。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-01-12T14:20:33.330

我正在我的公司建立一个内部网。

我有兴趣了解如何加载存储在表（Oracle、MySQL、SQL Server、Excel、Access、各种随机列表）中的数据并将其加载到 Neo4J 或其他一些图形数据库中。具体来说，当公共数据与系统中已有的数据重叠时会发生什么。

是的，我知道在 RDBMS 中最好对某些数据进行建模，但是我有一个想法让我很痒，当您需要叠加几个不同的表时，图模型比表结构更好。

例如，我在制造环境中工作。我们正在进行一个重大项目，由于其复杂性，每个部门都创建了一个单独的 Excel 电子表格，该电子表格在左侧的一列中有一个[BOM（材料清单）](http://en.wikipedia.org/wiki/Bill_of_materials)层次结构，然后是几列由个人进行的注释和检查谁制作了这些床单。

所以问题之一是将所有这些注释合并到一个“视图”中，以便有人可以看到任何特定部分需要解决的所有问题。

第二个问题是，当一个通用组件用于多个子装配时，Excel 电子表格在表示分层 BOM 时很糟糕。这意味着，如果有人在点火子组件中写了关于 P34 继电器的注释，那么相同的注释应该与电机驱动器子组件中使用的 P34 继电器相关联。这不会发生在 Excel 电子表格中。

对于公司内部网，我希望能够轻松搜索任何内容。例如与零件编号、BOM 结构、电话号码、电子邮件地址、公司政策或程序相关的数据。我什至想扩展它来管理计算机硬件资产和安装的软件。

我设想，一旦信息网络开始填充，您就可以开始进行很酷的遍历，例如“我想给从事 XYZ 项目的每个人写一封电子邮件”。人们将与该项目相关联，因为他们将被标记为在 XYZ 项目中创建和修改数据。因此，通过使用 XYZ 项目作为搜索键，将创建一个包含与 XYZ 项目相关的所有内容的巨大集合。包括指向构建 XYZ 项目的人员的链接。人员链接将连接到他们的电子邮件地址。因此，通过他们参与 XYZ 项目，他们将包含在我的电子邮件中。这与一些试图维护参与该项目的人员名单的秘书形成鲜明对比。我们生成了很多列表。我们花费大量时间维护列表并确保它们是最新的。

另一个很酷的遍历可以按版本报告所有安装了某个软件的计算机。该报告可用于生成任务以删除旧软件的额外副本并更新需要最新副本的人。它对于许可证跟踪也很有用。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-09-12T08:36:02.067

可能有点晚了，但是使用 Neo4j 的项目越来越多，在[Neo4j](http://wiki.neo4j.org/content/Neo4j_In_The_Wild)中列出的更广为人知的项目。Neo4j 背后的公司 NeoTechnology 在[其客户页面上也有一些参考资料](http://neotechnology.com/customers)

[注意：我是 Neo4j 团队的一员]

# java - 我可以从单个模型描述创建服务器端 Java 类、OR 映射和客户端 AS 类吗？

> ID：1000163
> 
> 赞同：1
> 
> 时间：2009-06-16T08:24:02.117
> 
> 标签：java, apache-flex, code-generation, remoting

我有一个 Java 服务器应用程序和一个 Flex 客户端应用程序。对于我的数据模型，我有典型的对象，如 User 等，在数据库、服务器端 Java 代码和客户端 AS 代码中基本相同。即，我的 AS 和 Java 类的公共字段名称相同，并且与数据库表中与这些类同名的相应字段具有相同的类型和值。

对于要匹配的 Java 类和数据库表，我可以使用任何 ORM。是否有任何工具也可以从 Java 类中自动生成 AS 类（理想情况下，还有匹配的 Remoting 样板代码）？我看了一眼[BlazeDS](http://opensource.adobe.com/wiki/display/blazeds/BlazeDS/)，但它似乎没有这样的工具，至少我找不到任何关于它的东西。

当然，在理想情况下，我会描述我的数据项一次，然后自动生成 DDL、Java 代码和 AS 代码。是否存在这样的工具，它是否足够可用？

哦，是的，如果源格式可以是 protobuf 文件，那就太好了……

***注意：****这似乎与这个问题[相同](https://stackoverflow.com/questions/222359/generating-actionscript-value-objects-from-middle-tier-java-classes)。那里的答案似乎表明，至少没有“每个人都使用”或以高质量而闻名的通用工具。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T08:30:46.163

你可以从这里开始：http: [//www.graniteds.org/confluence/display/DOC/2.+Gas3+Code+Generator](http://www.graniteds.org/confluence/display/DOC/2.+Gas3+Code+Generator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-16T03:27:47.540

我所知道的用于从服务器代码生成 AS 类的唯一工具是 Flex builder 中内置的向导，用于从 ColdFusion CFC 自动生成 AS 远程类，以便与基于 ColdFusion 的 AMF 服务一起使用。

但可能有用的是，一旦 Flex 接收到序列化对象并`mx.utils.ObjectProxy`为其创建了一个实例（这与 flex`RemoteObject`类和基于 AMF 的服务有关，但我想协议缓冲区扩展将遵循相同的模式），将代理转换为 Actionscript 类的过程并不是那么复杂。只要您的 Actionscript 类具有名称与序列化对象上的属性匹配的属性或访问器，以及与序列化对象的类型匹配的远程对象别名，那么您就可以将对象代理强制转换为远程类，而无需执行任何额外的工作。

就像我说的，我不知道有什么工具可以满足你的需求，但是创建一个工具来从你的 Java 类中读取类型和公共属性，或者从你的协议中提取相同的元数据并不难缓冲文件，并从该元数据中写入一些 Actionscript 代码。如果您找不到适合您需要的解决方案，您可能会考虑编写一个 Ant 任务或脚本或其他东西来为您完成它。这就是我无论如何都会做的。

# java - 数据库行中的公式 - Java

> ID：1000164
> 
> 赞同：0
> 
> 时间：2009-06-16T08:24:20.057
> 
> 标签：java, parsing, dsl, formula

要么这个要求很奇怪，要么我应该让自己太困惑我有一个包含 30 列的规则表。提要文件中的每一行都会根据提要类型与部分或所有条件进行比较。域是银行业务，应用程序用于贷款报告（例如，报告有担保贷款和无担保贷款的总额）

这是我的问题：

```
If the (total of collateral amount)> loan principal amount, then consider the principal amount for consolidation

Else if the (total of collateral amount)<loan principal amount, then consider only the amount covered by collateral 
```

我有大约 5 个这样的场景（应该是可定制的）用户（例如，如果抵押品是现金/股票，那么只考虑现金抵押品/股票抵押品）。

可能会出现更多这种情况。我不确定我应该如何解决这个问题。我的计划是在规则表中创建一个列，并在其中包含一些预先格式化的简单英语条件（记录并教授用户），使用正则表达式解析它们，然后将其转换为数字。我对 DSL 没有知识/经验，这是最好的？？！！我能想到的。任何帮助对我来说都是重要的知识来源。谢谢。阿伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T08:28:25.293

您可以使用业务规则引擎来实现这一点，而不是实现自己的解析逻辑或编写 DSL。

有关详细信息，请参阅[业务规则引擎](http://en.wikipedia.org/wiki/Business_rules_engine)。大多数规则引擎将允许您用简单的英语创建语法来定义此类规则。我们使用[ilog JRULES](http://www.ilog.com/products/jrules/)来定义此类规则。还有其他几个可用的商业和开源规则引擎。一种流行的开源软件是[drools](http://www.jboss.org/drools/)。

# c++ - 错误 C2593：运算符 = 不明确

> ID：1000167
> 
> 赞同：1
> 
> 时间：2009-06-16T08:25:31.523
> 
> 标签：c++, visual-studio-2008, porting, visual-c++-6, wstring

```
typedef map<wstring , IWString> REVERSETAG_CACHE ;
REVERSETAG_CACHE::iterator   revrsetagcacheiter;
.
.
.
wstring strCurTag;
strCurTag =  revrsetagcacheiter->second; //Error C2593 
```

> 错误 C2593：运算符 = 不明确

为什么上述作业会出现此错误？它适用于VC6。不能在 VC9 中编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T08:29:32.700

猜测一下，VC6 允许应用多个用户定义的转换，而（正确地）VC9 不允许。查看[C++ 隐式转换](https://stackoverflow.com/questions/867462/c-implicit-conversions)以讨论一般问题。

一般的解决方案是自己提供所需的转换，而不是让编译器尝试去做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T08:31:12.683

`revrsetagcacheiter->second`是类型`IWString`。因此它不会编译。我认为它也不会在 VC6 中编译。

**我会尝试最后一次**：您的 BasicString 类是 c_str() 方法吗？如果是这样，请尝试使用将其转换为 wstring`std::wstring str(iter->second.c_str());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T08:31:03.620

尝试将您分配的内容转换为正确的类型。

如：

```
strCurTag =  (wstring)revrsetagcacheiter->second; 
```

更好的是，您可能的意思是：

```
IWstring strCurTag; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T10:01:21.757

您通常应该避免隐式转换，即让您的所有分配在一侧和另一侧使用完全相同的类型，尤其是当知道涉及哪些类型很简单时。依赖或试图依赖隐式转换不是一个好主意。

因此，如果：

```
strCurTag =  static_cast<wstring>(revrsetagcacheiter->second); 
```

不编译，那我们就该开始思考问题了。

# java - Java：弃用的工具

> ID：1000171
> 
> 赞同：5
> 
> 时间：2009-06-16T08:26:13.363
> 
> 标签：java, refactoring, deprecated

一旦方法被标记为已弃用，是否有任何工具可以用未弃用的解决方法替换这些方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-16T08:29:01.627

如果您想自动执行此操作 -*不*。

该工具称为*程序员*。

* * *

原因是这些工具需要深入了解弃用、“取消弃用”、您的程序和目标编程语言。

例如，`java.util.Date.setMonth`不推荐使用`Calendar.set(Calendar.MONTH, int month)`.

这是一个非常重要的更改，因为它需要替换对象实例化、方法调用，同时考虑到同步。实际上噩梦般的自动做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-16T08:38:07.773

自动化工具只能合理地处理有新的首选方法或类用于完成完全相同的任务的情况。任何由于设计缺陷（想想在 Java 中处理日期的任何事情）或因为现在支持“更好”的方式（想想 AWT 到 Swing 或 SWT）而弃用方法的任何情况都需要大量考虑自动化。

简而言之，没有这样的工具。我怀疑将来也会有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T09:06:51.943

通常，您应该使用正则表达式、ANTLR 或 JavaCC 之类的东西来实现您自己的工具。

此外，一些 IDE 提供了相对更高级别的工具来促进这一点。在 IntelliJ IDEA 中，这些是“结构搜索和替换”和“迁移”重构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T08:31:04.697

我现在看不出这将如何工作。通常，至少需要*一些*想法来更改客户端代码。理想情况下，不推荐使用的方法将包含一条注释，说明“使用方法 X 代替，传入 null 作为最终参数”或类似的东西，但只有在最简单的情况下才能完全自动化。通常会有类似“如果您需要处理空条目，请使用 X。否则，请使用 Y”。

（此外，即使在最简单的情况下，目前也没有以​​机器可读格式表示转换的方法——据我所知，基本上还没有定义适当的协议。）

这是一个好主意，但我怀疑以一种有用的方式实现它会引入比它消除的更多的复杂性。此外，我会非常警惕完全自动为我执行此操作的工具-无论如何我可能都想预览每个更改。那时，通常不会比手动开始节省太多时间。

# html - Internet Explorer 中的列表类型问题

> ID：1000173
> 
> 赞同：0
> 
> 时间：2009-06-16T08:26:59.633
> 
> 标签：html, css

```
.work .nav {
    list-style: none;
    margin: 0 0 5px 5px;
    padding: 0;
    position:absolute;
    top:248px;
    left:15px;
    z-index: 2;
}
.work .nav:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
.work .nav li {
    float: left;
    margin-right: 5px;
}
.work .nav li a {
    float: left;
    display: block;
    padding-top: 10px;
    width: 10px;
    height: 0;
    border: 1px solid #ccc;
    overflow: hidden;
}
.work .nav li a:hover {
    background: #bbb;
}
.work .nav li a.on {
    background: #ccc;
} 
```

[这](http://img132.imageshack.us/img132/8863/bugciv.jpg)就是它在 Firefox 和 Internet Explorer 中的外观。它在 Firefox 中看起来很完美，但在 IE 中却很糟糕。

我该如何解决这个问题？

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T08:41:50.760

一个可能的解决方法（在 IE8 和 Firefox 3 中对我有用）是删除 padding-top 并将其更改为 height:10px，然后使文本颜色与背景相同，例如：

```
.work .nav li a {
    float: left;
    display: block;
    width: 10px;
    height: 10px;
    border: 1px solid #ccc;
    color:#fff;
    overflow: hidden;
}

.work .nav li a:hover {
    background: #bbb;
    color:#bbb;
}
.work .nav li a.on {
    background: #ccc;
    color:#ccc;
} 
```

（编辑：对于我使用的 HTML：

```
<div class="work">
<ul class="nav">
 <li><a href="">1</a></li>
 <li><a href="">2</a></li>
 <li><a href="">3</a></li>
</ul>
</div> 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T08:50:52.083

更改以下 CSS：

```
.work .nav li {
    float: left;
    margin-right: 5px;
    height: 10px;
    line-height: 0px;
} 
```

这将使它正常运行，尽管我没有方便的 IE8 进行测试。我用于`&nbsp;`链接的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T09:59:12.617

使用您的 CSS 和 Alistair Knock 的 HTML，我能够通过将 IE（IE7 模式下的 IE8 和 IE8）置于[quirks mode](http://en.wikipedia.org/wiki/Quirks_mode)来复制问题。它在标准模式下呈现良好，这让我认为您可以通过在 HTML 中 包含有效的[DOCTYPE](http://en.wikipedia.org/wiki/Doctype)来解决您的问题。

我使用 IE [Developer Toolbar](http://www.microsoft.com/downloads/details.aspx?FamilyID=E59C3964-672D-4511-BB3E-2D5E1DB91038&displaylang=en)在怪癖和标准模式（以及 IE8 和 IE7 模式）之间切换。它非常方便。

# visual-studio-2008 - VS 2008 Debug期间localhost的物理路径

> ID：1000175
> 
> 赞同：0
> 
> 时间：2009-06-16T08:28:05.557
> 
> 标签：visual-studio-2008

提供网页的 aspx 文件的物理路径在哪里？我在我的 VS 2008 中按 F5，我想知道 VS 在调试过程中将我的 aspx 文件存储在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T08:30:58.923

它只是将本地 Web 服务器连接到您的应用程序目录 - 文件不会存储在其他地方。

# opera - 我在哪里可以找到有关如何为 Opera Unite 开发的信息？[关闭]

> ID：1000178
> 
> 赞同：4
> 
> 时间：2009-06-16T08:28:29.847
> 
> 标签：opera

[Opera Unite](http://unite.opera.com/)（一种可以充当服务器的网络浏览器）刚刚发布，他们声称您可以构建网络服务，以便其他人可以访问您的浏览器。我有兴趣为该平台制作程序。

有人可以指出我如何为 Opera Unite 开发的网站吗？

* * *

关闭：没关系，我链接到的页面有一个指向[开发人员指南](http://dev.opera.com/articles/unite/)的链接。愚蠢的我，但是当我在 reddit 上看到链接时它并不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-01-26T18:17:52.370

只是为了让问题不再出现在未回答的列表中；）

*   [Opera Unite](http://unite.opera.com/applications/)的官方网站
*   Opera Unite 开发者[指南](http://unite.opera.com/develop/)
*   [开发人员](http://dev.opera.com/articles/view/opera-unite-developer-primer-revisited/)入门指南将指导人们完成这些步骤。
*   还有重要的[Unite API 库](http://dev.opera.com/libraries/unite/)
*   有一个关于[Opera Unite](http://my.opera.com/community/forums/forum.dml?id=15515)的论坛可以帮助您解决问题。

# java - Java项目中的类路径问题

> ID：1000181
> 
> 赞同：0
> 
> 时间：2009-06-16T08:29:11.500
> 
> 标签：java, jar, tibco

我目前正在开发一个使用 Tibco 集合控制的 Java 项目。

我的`build`路径上有 tibrvj.jar 文件。但是我看不到包“ `com.tibco.tibrv`”中的类。

这个包在我的构建路径上的 jar 中。

当我尝试打开该包中的类时，类编辑器上显示的消息是：“**找不到源。jar 文件 tibrvj.jar 没有源附件**”。

有什么可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T08:37:48.943

这看起来像是 IDE 特定的消息。您使用的是哪个 IDE？

类路径中的 jar 仅包含 java 类（字节码）而不包含源文件（.java 文件）。看起来您正试图在 IDE/编辑器中打开该类。由于您没有与这些类相对应的 java 文件，因此编辑器正在抱怨。

由于这些是 Tibco 特定的类，唯一的选择是“反编译”这些类以查看相应的 java 代码。考虑使用像[DJ Java Decompiler这样的反编译器](http://members.fortunecity.com/neshkov/dj.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T08:35:26.280

这取决于您所说的“我看不到课程”是什么意思。如果您的意思是您遇到构建失败，那可能是因为您的构建路径中*实际上*没有正确安装它（您是如何构建的？）或者可能没有正确的导入。

如果您的意思是看不到源代码，则需要以某种方式获取它（Tibco 是开源的吗？），然后配置您的 IDE，以便它知道源代码在哪里。当然，您不需要仅仅为了能够构建使用 Tibco 的应用程序而进行采购。

如果您可以提供有关您所面临的确切问题的更多信息，以及您正在使用的 IDE（如果有的话），我们可能会提供更多帮助。

# .net - FluentNHibernate 为 bool 设置默认列值

> ID：1000182
> 
> 赞同：4
> 
> 时间：2009-06-16T08:29:22.890
> 
> 标签：.net, sql-server-2005, fluent-nhibernate

如何使用 FluentNHibernate 为从我的实体为 bool 类型的字段生成的表的 BIT 列设置默认值 1 或 0。我认为没关系，但无论如何数据库是sqlserver2005。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-10-14T20:37:54.870

你有没有尝试过这样的事情

> ```
>  this.Map(x => x.SomeBitColumn)
>      .Access.Property()
>      .Default("1"); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T08:45:07.837

您可能想看看为此使用 NHibernate Validator，这里有一个与您正在寻找的东西接近的[ayende 示例。](http://ayende.com/Blog/archive/2009/05/01/nhibernate-validator.aspx)它们还可以更好地控制在模式导出中创建的内容。

# java - Windows 上可靠的 File.renameTo() 替代方案？

> ID：1000183
> 
> 赞同：98
> 
> 时间：2009-06-16T08:29:29.050
> 
> 标签：java, windows, file, file-io

Java`File.renameTo()`似乎存在问题，尤其是在 Windows 上。正如[API 文档](http://java.sun.com/javase/6/docs/api/java/io/File.html#renameTo%28java.io.File%29)所说，

> 此方法的行为的许多方面本质上是平台相关的：重命名操作可能无法将文件从一个文件系统移动到另一个文件系统，它可能不是原子的，并且如果具有目标抽象路径名的文件可能不会成功已经存在。应始终检查返回值以确保重命名操作成功。

就我而言，作为升级过程的一部分，我需要移动（重命名）一个可能包含千兆字节数据的目录（许多子目录和不同大小的文件）。移动总是在同一个分区/驱动器内完成，因此实际上不需要物理移动磁盘上的所有文件。

*要移动的目录的内容不应该*有任何文件锁定，但是，renameTo() 仍然经常无法完成它的工作并返回 false。（我只是猜测可能某些文件锁在 Windows 上有些随意过期。）

目前我有一个使用复制和删除的后备方法，但这很糟糕，因为它可能需要**很多**时间，具体取决于文件夹的大小。我还在考虑简单地记录用户可以手动移动文件夹以避免等待数小时的事实。但正确的道路显然是自动的和快速的。

所以我的问题是，**您是否知道另一种可靠的方法来在 Windows 上使用 Java 进行快速移动/重命名**，无论是使用普通 JDK 还是使用一些外部库。或者，如果您知道一种*简单*的方法来检测和释放给定文件夹及其*所有内容*（可能是数千个单独的文件）的任何文件锁定，那也可以。

* * *

**编辑**：在这种特殊情况下，似乎我们只是`renameTo()`考虑了更多的事情就逃脱了；看到[这个答案](https://stackoverflow.com/questions/1000183/reliable-file-renameto-alternative-on-windows/1006489#1006489)。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2011-03-27T18:01:50.120

另请参阅[`Files.move()`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move(java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...))JDK 7 中的方法。

一个例子：

```
String fileName = "MyFile.txt";

try {
    Files.move(new File(fileName).toPath(), new File(fileName).toPath(), java.nio.file.StandardCopyOption.REPLACE_EXISTING);
} catch (IOException ex) {
    Logger.getLogger(SomeClass.class.getName()).log(Level.SEVERE, null, ex);
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-06-17T11:38:50.913

对于它的价值，一些进一步的概念：

1.  在 Windows 上，`renameTo()`如果目标目录存在，即使它是空的，它似乎也会失败。这让我感到惊讶，因为我在 Linux 上尝试过，`renameTo()`如果目标存在，只要它是空的，它就会成功。

    （显然我不应该假设这种事情在不同平台上都是一样的；这正是 Javadoc 所警告的。）

2.  如果您怀疑可能存在一些挥之不去的文件锁，那么在移动/重命名之前稍等片刻*可能会*有所帮助。（在我们的安装程序/升级程序中，我们添加了一个“睡眠”操作和一个持续约 10 秒的不确定进度条，因为可能有一项服务挂在某些文件上）。甚至可以做一个简单的重试机制，尝试`renameTo()`，然后等待一段时间（可能会逐渐增加），直到操作成功或达到某个超时。

在我的例子中，大多数问题似乎已经通过考虑以上两点来解决，所以我们不需要进行本地内核调用，或者类似的事情，毕竟。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2010-05-28T18:02:38.593

最初的帖子要求“一种替代的、可靠的方法，可以在 Windows 上使用 Java 进行快速移动/重命名，可以使用普通的 JDK 或一些外部库。”

此处未提及的另一个选项是[apache.commons.io](http://commons.apache.org/io/)库的 v1.3.2 或更高版本，其中包括[FileUtils.moveFile()](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#moveFile%28java.io.File,%20java.io.File%29)。

它抛出一个 IOException 而不是在出错时返回布尔值 false。

另请参阅*big lep在*[此其他线程](https://stackoverflow.com/questions/2014586/renaming-a-file-in-java-without-using-renameto)中的响应。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-02T13:59:26.783

在我的情况下，它似乎是我自己的应用程序中的一个死对象，它保留了该文件的句柄。所以这个解决方案对我有用：

```
for (int i = 0; i < 20; i++) {
    if (sourceFile.renameTo(backupFile))
        break;
    System.gc();
    Thread.yield();
} 
```

优点：它非常快，因为没有 Thread.sleep() 具有特定的硬编码时间。

缺点：20 的限制是一些硬编码的数字。在我所有的测试中， i=1 就足够了。但可以肯定的是，我把它留在了 20 岁。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-02-17T00:15:13.197

以下代码不是“替代方案”，但在 Windows 和 Linux 环境中都可靠地为我工作：

```
public static void renameFile(String oldName, String newName) throws IOException {
    File srcFile = new File(oldName);
    boolean bSucceeded = false;
    try {
        File destFile = new File(newName);
        if (destFile.exists()) {
            if (!destFile.delete()) {
                throw new IOException(oldName + " was not successfully renamed to " + newName); 
            }
        }
        if (!srcFile.renameTo(destFile))        {
            throw new IOException(oldName + " was not successfully renamed to " + newName);
        } else {
                bSucceeded = true;
        }
    } finally {
          if (bSucceeded) {
                srcFile.delete();
          }
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-01-11T15:40:19.377

在 Windows 上，我使用`Runtime.getRuntime().exec("cmd \\c ")`然后使用命令行重命名功能来实际重命名文件。它更加灵活，例如，如果要将目录中所有 txt 文件的扩展名重命名为 bak，只需将其写入输出流：

重命名 *.txt *.bak

我知道这不是一个好的解决方案，但显然它一直对我有用，比 Java 内联支持要好得多。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2010-11-30T03:06:00.753

我知道这似乎有点 hacky，但是对于我一直需要它的东西，似乎缓冲的读者和作者在制作文件时没有问题。

```
void renameFiles(String oldName, String newName)
{
    String sCurrentLine = "";

    try
    {
        BufferedReader br = new BufferedReader(new FileReader(oldName));
        BufferedWriter bw = new BufferedWriter(new FileWriter(newName));

        while ((sCurrentLine = br.readLine()) != null)
        {
            bw.write(sCurrentLine);
            bw.newLine();
        }

        br.close();
        bw.close();

        File org = new File(oldName);
        org.delete();

    }
    catch (FileNotFoundException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

} 
```

作为解析器的一部分，它适用于小型文本文件，只需确保 oldName 和 newName 是文件位置的完整路径。

干杯仙人掌

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-04-02T06:20:01.193

我有一个类似的问题。文件在 Windows 上被复制而不是移动，但在 Linux 上运行良好。我通过在调用 renameTo() 之前关闭打开的 fileInputStream 解决了这个问题。在 Windows XP 上测试。

```
fis = new FileInputStream(originalFile);
..
..
..
fis.close();// <<<---- Fixed by adding this
originalFile.renameTo(newDesitnationForOriginalFile); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-10-25T08:24:55.227

为什么不....

```
import com.sun.jna.Native;
import com.sun.jna.Library;

public class RenamerByJna {
    /* Requires jna.jar to be in your path */

    public interface Kernel32 extends Library {
        public boolean MoveFileA(String existingFileName, String newFileName);
    }

    public static void main(String[] args) {
        String path = "C:/yourchosenpath/";
        String existingFileName = path + "test.txt";
        String newFileName = path + "renamed.txt";

        Kernel32 kernel32 = (Kernel32) Native.loadLibrary("kernel32", Kernel32.class);
            kernel32.MoveFileA(existingFileName, newFileName);
        }
} 
```

适用于nwindows 7，如果existingFile 不存在则什么都不做，但显然可以更好地解决这个问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-16T23:41:16.663

就我而言，错误出现在父目录的路径中。也许是一个错误，我不得不使用子字符串来获得正确的路径。

```
 try {
            String n = f.getAbsolutePath();
            **n = n.substring(0, n.lastIndexOf("\\"));**
            File dest = new File(**n**, newName);
            f.renameTo(dest);
        } catch (Exception ex) {
           ... 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-02-03T07:58:25.220

好吧，我找到了一个非常直接的解决方案来解决这个问题 -

```
boolean retVal = targetFile.renameTo(new File("abcd.xyz"));
while(!retVal) {
    retVal= targetFile.renameTo(new File("abcd.xyz"));
} 
```

正如 Argeman 所建议的，您可以放置​​一个计数器并限制 while 循环运行的次数，以便在另一个 Windows 进程正在使用某个文件的情况下它不会进入无限循环。

```
int counter = 0;
boolean retVal = targetFile.renameTo(new File("abcd.xyz"));
while(!retVal && counter <= 10) {
        retVal = targetFile.renameTo(new File("abcd.xyz"));
        counter = counter + 1;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-16T19:20:20.547

我知道这很糟糕，但另一种方法是创建一个 bat 脚本，它输出简单的内容，如“SUCCESS”或“ERROR”，调用它，等待它执行，然后检查它的结果。

Runtime.getRuntime().exec("cmd /c start test.bat");

这个线程可能很有趣。还要检查 Process 类，了解如何读取不同进程的控制台输出。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2009-06-16T08:34:03.100

你可以试试[robocopy](http://en.wikipedia.org/wiki/Robocopy)。这并不完全是“重命名”，但它非常可靠。

> Robocopy 专为目录或目录树的可靠镜像而设计。它具有确保复制所有 NTFS 属性和属性的功能，并包括用于可能中断的网络连接的额外重启代码。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2009-06-16T08:58:35.687

要移动/重命名文件，您可以使用此功能：

```
BOOL WINAPI MoveFile(
  __in  LPCTSTR lpExistingFileName,
  __in  LPCTSTR lpNewFileName
); 
```

它在 kernel32.dll 中定义。

* * *

## 回答 #15

> 赞同：-8
> 
> 时间：2012-04-07T13:58:22.270

```
 File srcFile = new File(origFilename);
 File destFile = new File(newFilename);
 srcFile.renameTo(destFile); 
```

以上是简单的代码。我已经在 Windows 7 上进行了测试，并且运行良好。

# php - 对 ping 程序的 PHP 输入进行消毒

> ID：1000192
> 
> 赞同：2
> 
> 时间：2009-06-16T08:30:48.190
> 
> 标签：php, sanitization, sanitize

我想将一个php页面连接到linux命令行程序ping。

我意识到有卫生问题。是否有可以处理所有事情的内置库或函数，还是我必须依赖正则表达式解析器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T08:35:24.003

你的意思是[`escapeshellcmd`](http://www.php.net/escapeshellcmd)和[`escapeshellarg`](http://www.php.net/escapeshellarg)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T08:33:33.117

你的意思是清理变量 [http://php.net/filter_var](http://php.net/filter_var)吗？

好教程

[http://www.phpro.org/tutorials/Filtering-Data-with-PHP.html](http://www.phpro.org/tutorials/Filtering-Data-with-PHP.html)

# php - 图像大小调整 Web 服务

> ID：1000195
> 
> 赞同：6
> 
> 时间：2009-06-16T08:31:02.963
> 
> 标签：php, python, ruby, web-services, image-processing

有人知道调整图像大小的好网络服务吗？开源（PHP/Python/Ruby）应用程序，或提供 Web 服务 api 的公司。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-11-10T01:46:52.307

[在 Utility Mill ( http://utilitymill.com](http://utilitymill.com) )提供您自己的服务。这是我写的一个添加了模拟画廊包装的文章 - [`http://utilitymill.com/utility/Gallery_Wrap_Image`](http://utilitymill.com/utility/Gallery_Wrap_Image). 定义您自己的接口、参数、处理逻辑，您不仅可以获得交互式 Web 服务，还可以获得可调用的 API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-06-13T01:25:54.927

另一种选择是[www.lightspun.com](http://www.lightspun.com)上的图像处理 Web 服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-23T16:04:27.853

所以你问的是网站？

[http://www.picnik.com/](http://www.picnik.com/)是 Fl​​ickr 使用的。

[http://www.shrinkpictures.com/](http://www.shrinkpictures.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T08:41:15.880

PHP 使用图像魔法提供图像大小调整支持。Smart Image Resizer 是一个可供使用的 PHP 脚本。看看[http://shiftingpixel.com/2008/03/03/smart-image-resizer/](http://shiftingpixel.com/2008/03/03/smart-image-resizer/)

要构建您自己的 PHP 应用程序，请查看[http://www.php.net/manual/de/ref.image.php](http://www.php.net/manual/de/ref.image.php)

# asp.net - 加入 nhibernate 和 ASP.NET 成员/角色/配置文件服务的最佳实践

> ID：1000204
> 
> 赞同：12
> 
> 时间：2009-06-16T08:34:29.183
> 
> 标签：asp.net, nhibernate, asp.net-membership, persistence

我有一个通用的 ASP.NET (MVC) 应用程序，它使用 NHibernate 作为模型持久层，并使用 ASP.NET Membership/role/profile services 作为用户管理层。

问题是什么可以被认为是在域数据和用户之间创建链接的最佳实践。（例如，我想创建一个论坛系统，我想将每个主题/帖子链接到特定用户，并希望在每次请求时显示用户）。

这些是我一直在考虑的可能性：

1.  将用户 ID 存储在 NHibernate 中（例如在需要引用用户的所有域类（帖子、主题等）中都有一个 Guid 列）并在每次需要来自 guid 的用户名时使用 GetUser（这可能会导致在 n+1 个查询中）

    B 变体：也可以存储用户名。

2.  使用相同的数据库，并创建一个只读的 NHibernate 维护域对象用户，它映射到与 M/R/P 服务相同的数据。

3.  忘掉 M/R/P，基于 NHibernate 创建单独的用户管理服务

4.  忘记这两者并使用 J2EE/RoR/merb/DJango/等。（请不要选择这个选项:)）

5.  其他...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-16T15:40:35.703

我会进行第 2 步（几乎，因为它不一定需要是只读的）并为 NHibernate 创建一个自定义成员资格提供程序。

为了节省时间，您可以使用现有的，例如[Manuel Abadia](http://www.manuelabadia.com/blog/PermaLink,guid,3b6ccb3f-2f2a-4dcb-a414-605371a00618.aspx)的。

这样您就可以保持 NHibernate 的全部功能（延迟加载等）并享受 M/R/P 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-10-18T21:13:24.237

[CodePlex](http://nhmemberprovider.codeplex.com/ "CodePlex")上还有一个基于 NHibernate 的会员资格提供程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-25T13:23:39.530

如果您想在 asp.net 会员 API 之上构建您自己的提供商，那么来自 rolla 的 4 个家伙有一篇很棒的帖子：[http ://www.4guysfromrolla.com/articles/110310-1.aspx](http://www.4guysfromrolla.com/articles/110310-1.aspx)

# c# - 抽象新/虚拟/覆盖/抽象关键字的一些真实示例是什么？

> ID：1000209
> 
> 赞同：2
> 
> 时间：2009-06-16T08:35:26.373
> 
> 标签：c#, abstract-class

我正在从 PHP 迁移到 C#。

**在 PHP 中，使用抽象类创建“级联覆盖**”模式非常简单明了，基本上“**除非继承类具有具有相同签名的方法，否则基类方法将处理它**”。

然而，在 C# 中，我只花了大约 20 分钟在**基**类和**继承**类中尝试了关键字**new**、**virtual**、**abstract**和**override**的各种组合，直到我最终得到了执行这种简单级联覆盖模式的正确组合。

 ****因此，即使下面的代码按照我想要的方式工作，这些添加的关键字也向我表明 C# 可以用抽象类做更多的事情。我已经查看了这些关键字的示例并基本上了解了它们的作用，但仍然无法想象除了这种简单的“级联覆盖”模式之外我会使用它们的真实场景。**您在日常编程中实现这些关键字的*****实际*****方法有哪些？**

 *有效的代码：

```
using System;

namespace TestOverride23433
{
    public class Program
    {
        static void Main(string[] args)
        {
            string[] dataTypeIdCodes = { "line", "wn" };
            for (int index = 0; index < dataTypeIdCodes.Length; index++)
            {
                DataType dataType = DataType.Create(dataTypeIdCodes[index]);
                Console.WriteLine(dataType.GetBuildItemBlock());
            }

            Console.ReadLine();
        }
    }

    public abstract class DataType
    {
        public static DataType Create(string dataTypeIdCode)
        {
            switch (dataTypeIdCode)
            {
                case "line":
                    return new DataTypeLine();
                case "wn":
                    return new DataTypeWholeNumber();
                default:
                    return null;
            }
        }

        //must be defined as virtual
        public virtual string GetBuildItemBlock()
        {
            return "GetBuildItemBlock executed in the default datatype class";
        }
    }

    public class DataTypeLine : DataType
    {
        public DataTypeLine()
        {
            Console.WriteLine("DataTypeLine just created.");
        }
    }

    public class DataTypeWholeNumber : DataType
    {
        public DataTypeWholeNumber()
        {
            Console.WriteLine("DataTypeWholeNumber just created.");
        }

        //new public override string GetBuildItemBlock()  //base method is erroneously executed
        //public override string GetBuildItemBlock() //gets error "cannot override inherited member because it is not marked virtual, abstract, or override"
        public override string GetBuildItemBlock()
        {
            return "GetBuildItemBlock executed in the WHOLENUMBER class.";
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-16T08:43:33.520

`virtual`/`override`是核心多态对；听起来你已经破解了这些

`abstract`就像`virtual`，但**没有**合理的基础实现；用例：也许是 a `Stream`，实际实现**需要**对字节做一些事情。这迫使班级成为`abstract`

`new`通常应该避免；它破坏了多态性......最常见的情况是使用更具体的签名/返回类型重新公开（可能在密封类中，因为它不会在链上变得更漂亮......） - 请参阅[`SqlConnection.CreateCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.createcommand.aspx)(vs [`DbConnection.CreateCommand`](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection.createcommand.aspx)) , 或 (也许更显着) [`IEnumerator<T>.Current`](http://msdn.microsoft.com/en-us/library/58e146b7.aspx)(vs [`IEnumerator.Current`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.current.aspx))

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T08:45:18.540

看来您已经从您的示例中弄清楚了，因此`virtual`：`override`

*   ' `abstract`' 也可以应用于成员而不是 ' `virtual`'，在这种情况下，您无需指定方法的实现（`;`直接在签名后使用 ' '）。这会强制所有具体的后代实现该方法。

*   ' `new`' 与继承无关，但可以在成员的后代类中使用，以隐藏具有完全相同签名的基类中的成员。

简而言之 ;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T08:52:46.590

进一步的其他答案。

当您希望允许子类执行自己的处理、不处理甚至只是调用父类处理函数时，覆盖。不必在后代类中实现覆盖或虚函数。

当您不希望在基类中执行任何处理但希望该方法由任何继承类实现时抽象。（最好是在继承类行为可能有很大差异的情况下）。如果一个类只包含抽象方法，那么它实际上是一个接口类型。指定为抽象的函数必须在子类中实现（否则编译器将抛出错误）。*****

# javascript - 脚本堆栈空间耗尽Firefox

> ID：1000211
> 
> 赞同：3
> 
> 时间：2009-06-16T08:35:55.217
> 
> 标签：javascript, jquery, xml, mozilla

我正在处理来自 Web 服务的大型 XML 响应。当我尝试使用 URL 获取它时，一段时间后它在 Firebug 中显示错误“脚本堆栈空间配额已用完”我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T08:38:44.853

*听起来*在处理 xml 时会发生一些递归，这本质上会导致堆栈溢出（以任何名称）。

想法：

*   使用更少的数据
*   如果您正在手动处理数据，请尝试使用较少的递归？也许是手动尾调用或基于队列/堆栈
*   考虑 json - 然后您可以卸载到脚本主机以重新水化对象而无需任何额外处理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-15T16:18:13.210

我有一个类似的问题，也许是一样的。如果您尝试使用 jQuery $(html) 解析大量 html，就会发生这种情况。

在我的测试中，这只发生在 Windows 上的 Firefox 3.6.16 上。Ubuntu 上的 Firefox 4.0.1 表现得更好。可能与操作系统无关，只是 4.x 中的脚本引擎要好得多..

解决方案：代替

```
var $divRoot = $(html); 
```

我做了

```
var $temp = $('<div style="display:none;">');  // .appendTo($('body'));  // (*)
$temp.html(html);  // using the client's html parsing
var $divRoot = $('> div', $temp);  // or .children() or whatever
// $temp.remove();  // (*) 
```

(*) 我记得在某些情况下，您需要在 jquery 可以应用任何选择器之前将临时节点添加到主体。但是，在这种情况下，如果没有它，它似乎工作得很好。

FF 4.x 上绝对没有区别，但它确实可以避免 FF 3.x 上的堆栈空间溢出错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-16T10:06:51.207

从 Firefox 3 开始，可用堆栈空间已从 4MB 下降到 ~= 640KB（我在此通过口耳相传）。

你碰巧在玩FF3吗？

[https://bugzilla.mozilla.org/show_bug.cgi?id=420874](https://bugzilla.mozilla.org/show_bug.cgi?id=420874)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T08:39:05.960

您是否尝试过禁用 Firebug？

# asp.net-mvc - 使用自动生成的控件正确提交表单

> ID：1000217
> 
> 赞同：0
> 
> 时间：2009-06-16T08:38:02.330
> 
> 标签：asp.net-mvc, unit-testing, checkbox, viewmodel

基于： [MVC Html.CheckBox 和表单提交问题](https://stackoverflow.com/questions/658458/mvc-html-checkbox-and-form-submit-issue)

让我们考虑以下示例。看法：

```
 <% using(Html.BeginForm("Retrieve", "Home")) %>
       <% { %>
    <%foreach (var app in newApps)              { %>  
  <tr> 
       <td><%=Html.CheckBox(""+app.ApplicationId )%></td>      

   </tr>  
<%} %>
 <input type"submit"/>
<% } %> 
```

控制器：

```
 List<app>=newApps; //Database bind
 for(int i=0; i<app.Count;i++)
 {

    var checkbox=Request.Form[""+app[i].ApplicationId];
    if(checkbox!="false")// if not false then true,false is returned
 } 
```

提出的解决方案是关于手动解析 Request.Form 对我来说似乎超出了 MVC 概念。它在对该控制器方法进行单元测试时出现问题。在这种情况下，我需要生成模拟 Request.Form 对象，而不是作为输入参数传递的一些 ViewModel。

问：有没有其他类似的提交表单的解决方案，以便包含提交的控件集合的 ViewModel 对象作为输入参数传递给控制器​​方法？

例如：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Retrieve(AppList[] applist) 
```

或者

```
public ActionResult Retrieve(AppList<App> applist) 
```

ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T10:09:28.853

控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Retrieve(AppList[] applist) 
```

看法：

```
<% using(Html.BeginForm("Retrieve", "Home")) %> { %>
    <%foreach (var app in newApps) { %>
    <tr>
        <td><%=Html.CheckBox(String.Format("appList[{0}].AProperty", app.ApplicationId) %></td>
    </tr>
    <% } %>
    <input type"submit" />
<% } %> 
```

阅读：[Scott Hanselman 的 ComputerZen.com - 用于模型绑定到数组、列表、集合、字典的 ASP.NET 有线格式](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

**更新：**

如果 ApplicationId 是来自 DB 的键，则最好`AppList<App>`用作 Action 参数。那么您的表格将如下所示：

```
<% using(Html.BeginForm("Retrieve", "Home")) %> { %>
<% var counter = 0; %>
    <% foreach (var app in newApps) { %>
    <tr>
        <td><%=Html.CheckBox(String.Format("appList[{0}].Key", counter), app.ApplicationId) %></td>
        <!-- ... -->
        <td><%=Html.Input(String.Format("appList[{0}].Value.SomeProperty1", counter), app.SomeProperty1) %></td>
        <td><%=Html.Input(String.Format("appList[{0}].Value.SomePropertyN", counter), app.SomePropertyN) %></td>
        <% counter = counter + 1; %>
    </tr>
    <% } %>
    <input type"submit" />
<% } %> 
```

# java - Java 堆空间（带有大文件的 CMS）

> ID：1000219
> 
> 赞同：2
> 
> 时间：2009-06-16T08:38:35.260
> 
> 标签：java, memory, tomcat

编辑：

得到了生活的目录。现在看到了另一个问题：

存储中的文件以它们的 DB id 作为文件名的前缀存储。当然，我不希望用户看到这些。

有没有办法将 response.redirect 和头文件设置为文件名和大小？

最好的，

```
 A 
```

你好，我们又见面了，

新的方法：

是否可以在 tomcat 中创建类似 IIS 的虚拟目录以避免流式传输并仅使用标头重定向？我玩弄了上下文，但无法让它继续......

有任何想法吗？

```
 thx 
```

一个

你好 ％，

我正面临一个 java 堆空间的有线问题，这接近于把我带到绳索上。

简短的版本是：

我编写了一个 ContentManagementSystem ，它也需要处理大文件（> 600mb）。Tomcat 堆设置：

-Xmx700m -Xms400m

问题是，即使速度很慢，也可以上传大文件。下载文件会导致 java 堆空间异常。

尝试下载 370mb 文件会使 tomcat 跳转到 500mb 堆（应该没问题）并以 Java 堆空间异常结束。

我不明白，为什么上传有效而下载无效？这是我的下载代码：

```
byte[] byt = new byte[1024*1024*2];

response.setHeader("Content-Disposition", "attachment;filename=\"" + fileName + "\""); 

FileInputStream fis = null;
OutputStream os = null;

fis = new FileInputStream(new File(filePath));
os = response.getOutputStream();

BufferedInputStream buffRead = new BufferedInputStream(fis);

while((read = buffRead.read(byt))>0)            
{
    os.write(byt,0,read);
    os.flush();
}

buffRead.close();
os.close(); 
```

如果我做对了，缓冲阅读器应该处理任何内存问题，对吗？

任何帮助将不胜感激，因为我没有想法

此致，

W

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T08:53:27.803

> 如果我做对了，缓冲阅读器应该处理任何内存问题，对吗？

不，这与内存问题无关，实际上没有必要，因为您已经在使用缓冲区来读取文件。你的问题是写作，而不是阅读。

我看不出你的代码有什么问题。看起来好像 Tomcat 正在缓冲整个响应而不是流式传输它。我不确定是什么原因造成的。

返回什么`response.getBufferSize()`？你应该尝试设置`response.setContentLength()`文件的大小；我隐约记得，在某些情况下，Web 容器会缓冲整个响应以确定内容长度，所以也许这就是正在发生的事情。无论如何都这样做是一个好习惯，因为它使客户端能够显示下载大小并为下载提供 ETA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T11:13:52.060

Are you required to serve files using Tomcat? For this kind of tasks we have used separate download mechanism. We chained Apache -> Tomcat -> storage and then add rewrite rules for download. Then you just by-pass Tomcat and Apache will serve the file to client (Apache->storage). But if works only if you have files stored as files. If you read from DB or other type of non-file storage this solution cannot be used successfully. the overall scenario is that you generate download links for files as e.g. domain/binaries/xyz... and write redirect rule for domain/files using Apache mod_rewrite.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T09:09:29.020

尝试使用 ServletResponse 的[setBufferSize](http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletResponse.html#setBufferSize(int))和[flushBuffer](http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletResponse.html#flushBuffer())方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T09:14:29.400

为此，您最好使用**[java.nio](http://java.sun.com/javase/6/docs/api/java/nio/channels/package-summary.html)**，这样您就可以部分读取资源并释放已经流式传输的资源！

否则，尽管您对 JVM 环境进行了设置，但最终还是会出现内存问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T09:23:18.073

我的建议：

***Quick-n-easy：***使用更小的阵列！是的，它循环更多，但这不会成为问题。5 KB 就可以了。您会在几分钟内知道这是否适合您。

```
byte[] byt = new byte[1024*5]; 
```

***有点困难：***如果您可以访问 sendfile（例如在 Tomcat 中使用 --documentation`Http11NioProtocol`here[）](http://tomcat.apache.org/tomcat-6.0-doc/aio.html)，然后使用它

***再难一点：***将您的代码切换到 Java NIO 的 FileChannel。我有非常非常相似的代码在同样大的文件上运行，具有数百个并发连接和类似的内存设置，没有问题。在这些情况下，NIO 比普通的旧 Java 流更快。它使用 DMA（[直接内存访问](http://en.wikipedia.org/wiki/Direct_memory_access)）的魔力，允许数据从磁盘传输到 NIC，而无需通过 RAM 或 CPU。这是我自己的代码库的代码片段......我已经撕掉了很多来展示基础知识。FileChannel.transferTo() 不保证发送每个字节，所以它在这个循环中。

```
WritableByteChannel destination = Channels.newChannel(response.getOutputStream());
FileChannel         source      = file.getFileInputStream().getChannel();

while (total < length) {
    long sent = source.transferTo(start + total, length - total, destination);
    total += sent;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T09:31:06.137

以下代码能够将数据流式传输到客户端，仅分配一个小缓冲区（BUFFER_SIZE，这是一个软点，因为您可能需要调整它）：

```
private static final int OUTPUT_SIZE = 1024 * 1024 * 50; // 50 Mb
private static final int BUFFER_SIZE = 4096;

@Override
protected void doGet(HttpServletRequest request,HttpServletResponse response) 
                     throws ServletException, IOException {
    String fileName = "42.txt";

    // build response headers
    response.setStatus(200);
    response.setContentLength(OUTPUT_SIZE);
    response.setContentType("text/plain");
    response.setHeader("Content-Disposition", 
                        "attachment;filename=\"" + fileName + "\"");
    response.flushBuffer(); // write HTTP headers to the client

    // streaming result
    InputStream fileInputStream = new InputStream() { // fake input stream
        int i = 0;

        @Override
        public int read() throws IOException {
            if (i++ < OUTPUT_SIZE) {
                return 42;
            } else {
                return -1;
            }
        }
    };

    ReadableByteChannel input = Channels.newChannel(fileInputStream);
    WritableByteChannel output = Channels.newChannel(
                                    response.getOutputStream());
    ByteBuffer buffer = ByteBuffer.allocate(BUFFER_SIZE);

    while (input.read(buffer) != -1) {
        buffer.flip();
        output.write(buffer);
        buffer.clear();
    }

    input.close();
    output.close();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T08:46:18.037

应用程序中有过滤器，还是使用 tcnative 库？您可以尝试使用 jvisualvm 对其进行分析吗？

**编辑**：小备注：请注意，如果您不清理文件名，则 setHeader 中有 HTTP 响应拆分攻击的可能性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-16T09:37:53.363

为什么不用tomcat自带的FileServlet呢？

它肯定可以提供比您想象的更好的文件。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-06-16T10:02:39.630

2 MB 的缓冲区太大了*！*几k应该足够了。兆字节大小的对象对于垃圾收集器来说是一个真正的问题，因为它们通常需要与“正常”对象分开处理（正常 == 比堆生成小得多）。要优化 I/O，您的缓冲区只需比您的 I/O 缓冲区大小稍大，即至少与磁盘块或网络包一样大。

# delphi - 如何在 Delphi 控制台应用程序中处理 Ctrl+C？

> ID：1000223
> 
> 赞同：9
> 
> 时间：2009-06-16T08:39:46.943
> 
> 标签：delphi, console

是否有显示如何在 Delphi 控制台应用程序中处理 Ctrl+C 的最佳实践和代码片段？

我发现一些文章提供了一些关于调试器可能出现的问题的信息，包括异常处理、DLL 的卸载、标准输入的关闭和最终确定[，例如这个 CodeGear 论坛线程](https://forums.codegear.com/thread.jspa?threadID=15832)。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-16T09:13:48.217

从 Windows API ( [MSDN](http://msdn.microsoft.com/en-us/library/ms686016.aspx) ):

```
BOOL WINAPI SetConsoleCtrlHandler(
    PHANDLER_ROUTINE HandlerRoutine,    // address of handler function  
    BOOL Add    // handler to add or remove 
   ); 
```

HandlerRoutine 函数是控制台进程指定的用于处理进程接收到的控制信号的函数。该函数可以有任何名称。

```
BOOL WINAPI HandlerRoutine(
    DWORD dwCtrlType    //  control signal type
   ); 
```

* * *

在 Delphi 中，处理程序例程应如下所示：

```
function console_handler( dwCtrlType: DWORD ): BOOL; stdcall;
begin
  // Avoid terminating with Ctrl+C
  if (  CTRL_C_EVENT = dwCtrlType  ) then
    result := TRUE
  else
    result := FALSE;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T08:36:14.477

我编写了一个小程序来向您展示如何正确停止后台任务。希望它更清楚。

ThreadConsoleApplication.dpr 文件的内容：

```
program ThreadConsoleApplication;

{$APPTYPE CONSOLE}

uses
  SysUtils,
  Windows,
  Classes;

type
  { **
    * Classe TQueueReaderTestApplication
    * }
  TThreadConsoleApplication = class(TThread)
  public
    procedure Execute; override;

    constructor Create; virtual;
    destructor Destroy; override;

    class function getInstance: TThreadConsoleApplication;
  end;

function TThreadConsoleApplication_consoleCtrlHandler(dwCtrlType: DWORD): BOOL;
  stdcall; forward;

{ **
  * Classe TQueueReaderTestApplication
  * }

constructor TThreadConsoleApplication.Create;
begin
  inherited Create(True { CreateSuspended } );
  Windows.setConsoleCtrlHandler(@TThreadConsoleApplication_consoleCtrlHandler,
    True { add } );
end;

var
  threadConsoleApplicationInstance: TThreadConsoleApplication = nil;

destructor TThreadConsoleApplication.Destroy;
begin
  threadConsoleApplicationInstance := nil;
  inherited;
end;

procedure TThreadConsoleApplication.Execute;
begin
  System.Writeln('[TThreadConsoleApplication.Execute] begin');
  try
    while not Terminated do
    begin
      System.Writeln('[TThreadConsoleApplication.Execute] running ...');
      Windows.Sleep(1000 { dwMilliseconds } );
    end;
  finally
    System.Writeln('[TThreadConsoleApplication.Execute] end');
  end;
end;

class function TThreadConsoleApplication.getInstance: TThreadConsoleApplication;
begin
  if nil = threadConsoleApplicationInstance then
  begin
    threadConsoleApplicationInstance := TThreadConsoleApplication.Create;
  end;
  Result := threadConsoleApplicationInstance;
end;

function TThreadConsoleApplication_consoleCtrlHandler(dwCtrlType: DWORD): BOOL;
begin
  Result := False;
  if Windows.CTRL_C_EVENT = dwCtrlType then
  begin
    TThreadConsoleApplication.getInstance.Terminate;
    Result := True;
  end;
end;

var
  thread: TThread;

begin
  System.Writeln('[program] begin');
  try
    thread := nil;
    try
      thread := TThreadConsoleApplication.getInstance;
      thread.Resume;
      System.Writeln('[program] press a CTRL+C to stop running');
      thread.WaitFor;
    finally
      thread.Free;
    end;
    System.Writeln('[program] end');
  except
    on E: Exception do
    begin
      System.Writeln(System.ErrOutput, '[program] end with error');
      System.Writeln(System.ErrOutput, E.ClassName, ': ', E.Message);
    end;
  end;
  System.Writeln('[program] press a key to quit');
  System.Readln;

end. 
```

# php - 通过函数调用使用 php GD 库输出图像

> ID：1000231
> 
> 赞同：0
> 
> 时间：2009-06-16T08:42:38.123
> 
> 标签：php, zend-framework, gd

我知道我可以使用 GD 输出图像

```
 <img src='draw.php'> 
```

其中 draw.php 是一个包含创建图像的代码的文件。我怎样才能通过函数调用输出图像（我使用 Zend 框架，所以将使用 View Helper）而不是像上面那样简单地指向 img 标记中的 .php 文件？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T09:02:31.047

你不能。

至少不是以可用的方式 - 您可以使用 base64 对图像进行编码：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANS..." alt=""/> 
```

我不知道哪些浏览器支持这个，虽然......快速测试：

*   火狐：好的
*   铬：好的
*   歌剧：好的
*   ie6：失败
*   ie7：失败
*   野生动物园：失败

好吧，算了。

但是，您可能正在尝试做一些不同的事情 - 通过 ZF 传递文件。我帮不了你，但它应该大致像这样工作：

在您的控制器中，将输出类型设置为 image/png（然而 ZF 会处理它）通过您的图像并确保 ZF 不会向输出添加任何内容（例如额外的 html 和其他内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T09:25:49.703

为什么不让您的 View Helper 创建图像，将其写入磁盘，然后输出/返回具有正确源属性的 img 标签？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T16:55:32.403

发送适当的标题（内容类型），然后使用[http://www.php.net/image_jpeg](http://www.php.net/image_jpeg)

# security - 将用户从禁区重定向，而不是告诉他发生了什么或告诉他它受到限制，有什么更好的方法？

> ID：1000232
> 
> 赞同：0
> 
> 时间：2009-06-16T08:42:57.903
> 
> 标签：security, http, browser

例如：用户“正在尝试”进入限制区域（即网页上的管理区域），最好一言不发地把他从那里踢出去，或者告诉他这是管理区域，他被禁止进入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T08:50:36.423

让他知道它的限制。否则会通过晦涩难懂的方式进行安全操作，并且还会阻碍由于某些其他原因（例如，他们输入错误的密码）而无法访问该区域的真实用户。至少如果您让他们知道“这是一个禁区，访问被拒绝），那么他们就可以消除他们访问错误网址的可能性，例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T09:00:06.857

如果他们不应该首先访问该页面，并且他们没有合法的方式可以到达那里，我不会打扰任何礼貌的信息。

您拥有一个的唯一原因是为了合法用户的利益。对潜在的攻击者没有任何帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T08:44:40.460

我通常会清除他的会话并将他重定向到登录页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T08:44:57.417

如果他有兴趣，他会通过 HTTP 重定向代码（302 等）知道，所以你不妨告诉他。每次重定向页面时，IE 也可能会令人讨厌的“点击”“点击”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T08:45:50.720

根据您使用的技术，该用户可能会被自动重定向到登录页面并有机会将自己标识为管理员。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T08:45:59.130

您可以发回 404 响应，就好像管理页面根本不存在一样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T08:47:21.950

如果他们“试图”进入，这意味着他们已经知道这是一个管理区域，因此，只需拒绝登录即可。更好的是，保护管理区域，使他们甚至无法“尝试”登录或进入该区域（禁止、IP 限制等）

# c - 定义一个大于 unsigned int 限制的大数组

> ID：1000235
> 
> 赞同：3
> 
> 时间：2009-06-16T08:43:46.123
> 
> 标签：c, arrays, declaration

我需要静态定义一个数组（在 *.h 中）大小为 12884901888 的文件，如。

```
unsigned char sram[12884901888]; //All of my code is C. 
```

上面的声明给出了错误并且不起作用。

因为数组声明中使用的常量是无符号整数。但是我需要使用的常量（12884901888）大于无符号整数限制。

我如何定义上面的数组，大小为 12884901888 ？

谢谢你。

-广告

PS我知道很多人会说，优化那个巨大的数组大小，但由于某些特定于我的情况的原因，我需要使用相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T08:52:55.420

使数组维度为 unsigned long long。

```
unsigned char sram[12884901888ULL]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T08:53:58.240

这适用于嵌入式微控制器吗？你经常可以逃脱类似的事情：

```
#define sram (*((unsigned char (*)[1]) 0)) 
```

除非您的编译器实现边界检查，否则数组大小无关紧要。在任何情况下，您都不希望编译器尝试保留 12884901888 字节，因为链接将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-02T02:10:42.413

将 12884901888 转换为十六进制给出：0x3-0000-0000（我分隔了每组 16 位）

换句话说，这个无符号字节数组需要 3 乘以 4 Gig 编译器应该生成 34 位地址指针以使其工作

我同意 finnw，你不需要告诉编译器数组的大小。如果您确实指定了大小，您将获得一个用于模块的大型 OBJ 文件，以及用于最终可执行文件的类似大型 ELF/EXE。

# birt - 如何将 BIRT 与需要身份验证的远程 (http/https) 数据源一起使用？

> ID：1000237
> 
> 赞同：0
> 
> 时间：2009-06-16T08:43:57.183
> 
> 标签：birt

是否可以将 BIRT 与需要身份验证的远程 (http/https) XML 数据源一起使用？

*   基于 Cookie
*   HTTP 身份验证
*   SSL 客户端证书

以上任何一种都足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T20:09:33.277

尝试通过以下语法使用基于 HTTP 的身份验证：

```
http://username:password@hostname:portnumber/path 
```

但无论如何，您都可以使用脚本数据源并通过 API 构建报告。即，您可以编写一个通过身份验证并获取数据的 Java 软件，将它们绑定到 BIRT 并以 BIRT 内部或标准格式（html、pdf、doc、xls 等）生成输出。

# exception - Groovy：部署战争文件

> ID：1000240
> 
> 赞同：1
> 
> 时间：2009-06-16T08:44:06.293
> 
> 标签：exception, grails, war-filedeployment

我在我的桌面上本地运行了一个 groovy 应用程序。显然它运行时没有错误。至少我写的所有单元测试都完成了。我想使用**war**文件部署应用程序。为此，我使用命令

```
grails war 
```

在应用程序的主目录中。这样做时，我收到以下异常：

```
Error executing script War: java.lang.NullPointerException
gant.TargetExecutionException: java.lang.NullPointerException
    at gant.Gant$_dispatch_closure4.doCall(Gant.groovy:331)
    at gant.Gant$_dispatch_closure6.doCall(Gant.groovy:334)
    at gant.Gant$_dispatch_closure6.doCall(Gant.groovy)
    at gant.Gant.withBuildListeners(Gant.groovy:344)
    at gant.Gant.this$2$withBuildListeners(Gant.groovy)
    at gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
    at gant.Gant.dispatch(Gant.groovy:334)
    at gant.Gant.this$2$dispatch(Gant.groovy)
    at gant.Gant.invokeMethod(Gant.groovy)
    at gant.Gant.processTargets(Gant.groovy:495)
    at gant.Gant.processTargets(Gant.groovy:480)
Caused by: java.lang.NullPointerException
    at        _GrailsWar_groovy$_run_closure5_closure25_closure26_closure28.doCall(_GrailsWar_groovy:289)
    at _GrailsWar_groovy$_run_closure5_closure25_closure26_closure28.doCall(_GrailsWar_groovy)
    at _GrailsWar_groovy$_run_closure5_closure25_closure26.doCall(_GrailsWar_groovy:282)
    at _GrailsWar_groovy$_run_closure5_closure25_closure26.doCall(_GrailsWar_groovy)
    at _GrailsWar_groovy$_run_closure5_closure25.doCall(_GrailsWar_groovy:258)
    at _GrailsWar_groovy$_run_closure5.doCall(_GrailsWar_groovy:256)
    at _GrailsWar_groovy$_run_closure4.doCall(_GrailsWar_groovy:239)
    at War$_run_closure1.doCall(War.groovy:38)
    at gant.Gant$_dispatch_closure4.doCall(Gant.groovy:324)
    ... 10 more 
```

任何提示为什么？

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T09:03:35.070

我认为你必须找到它的来源，`Gant.groovy`看看它在那条线上做了什么。显然，您的项目的特定配置导致了一些问题（因为如果总是发生这样的显示停止错误会被捕获），但错误消息不包含太多信息。

或者，您可以尝试将 Grails 升级到最新版本 1.1.1（如果您还没有的话）。

# xml - 最优xml存储引擎

> ID：1000241
> 
> 赞同：3
> 
> 时间：2009-06-16T08:44:09.493
> 
> 标签：xml, storage

我正在考虑存储 xml 文档并有效地进一步查询它们的最佳开源解决方案。数据量会很小。据我了解，本机 xml 数据库可能会为我的情况提供适当的解决方案。他们显然以高效的方式存储 xml 文档。学习你的经验会很棒。关于适当解决方案的任何建议？您是否有在应用程序中使用 xml 存储引擎的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T08:58:14.597

我们在工作中一直使用原生 XML 服务器。如果您的数据低于 100-200MB-s，它们很好，但之后我找不到可以处理数据的合适服务器。我尝试了以下方法：

*   eXist：基于 Java 的原生 XML 服务器（开源）：对于大文件，它通常会占用 JVM 的内存，然后抛出内存不足异常
*   sedna：基于 C 的原生 XML 服务器（开源）：可以处理非常大的数据库，但如果您尝试从数据库中查询非索引数据，则会出现段错误
*   Tamino XML 数据库（专有）：最早的 XML 数据库之一，成熟但对 xquery 的支持很糟糕（至少我们使用的最新版本对 XQuery 的支持很差），正如我们所见，即使是训练有素的专业人员也无法'没有正确设置它足够快。

以下是我的建议：

*   对于小数据和基于 Java 的系统，请尝试 eXist。它甚至有一个类似 SQlite 的基于文件的数据库支持，可能很有用。
*   对于性能很重要的中小型数据，请使用 sedna。根据我的测试，它是三个中最快的。
*   如果您需要支持，请使用 Tamino。它至少有支持。

对于大型数据库（1GB 及以上），我不推荐其中任何一个（目前）。eXist 通常会在 200MB 大小的数据库中崩溃。sedna 在查询未编入索引的内容时会因 1GB 大小的数据库而崩溃，而 tamino 在整个系统崩溃之前甚至无法在一次运行中加载 500MB 的数据。当然，所有这些系统都在不断发展，所以也许稍后它们可以安全使用，但不幸的是，原生 XML 数据库仍然不成熟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T09:04:40.747

您是否查看过主要供应商提供的解决方案，例如[Oracle XML DB](http://www.oracle.com/technology/tech/xml/xmldb/index.html)。我没有尝试过，但如果你有预算的话，它肯定值得评估！

Wikipedia 也有[一个很好的 XML Dbs 列表](http://en.wikipedia.org/wiki/XML_database)，您可能希望对其进行评估。

# jquery - 选择表单内的元素在 JQuery 中不起作用

> ID：1000246
> 
> 赞同：-1
> 
> 时间：2009-06-16T08:45:11.050
> 
> 标签：jquery

我有以下 HTML 表单：

```
<div id="main">
  <form Id="search-form" action="/ViewRecord/AllRecord" method="post">
    <div>
        <fieldset>
            <legend>Search</legend>
           <p>
                <label for="username">Staff name</label>
                <input id="username" name="username" type="text" value="" />
                <label for="softype"> software type</label>

                <input type="submit" value="Search" />
            </p>
        </fieldset>
    </div>
  </form>
</div> 
```

我想在单击该字段`alert`时显示一个框。`username`这是我的 JQuery 代码：

```
$(function() {
$("#username").click(function() {
        $.getJSON("ViewRecord/GetSoftwareChoice", {},
    function(data) {
        alert(data);
    });
    });
}); 
```

出于某种原因，`Click`它从未被解雇；我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T08:48:05.443

您可能需要该[`focus`](http://www.w3schools.com/HTMLDOM/met_text_focus.asp)事件，因为`click`只有当您明确单击元素时才会触发：

```
$(function() {
    $("#username").focus(function() {
        $.getJSON("ViewRecord/GetSoftwareChoice", {}, function(data) {
            alert(data);
        });
    });
}); 
```

除此之外，您可能需要查看[Firebug](http://www.getfirebug.com)以确保请求成功完成。或者，更好的是，您可以使用较低级别的`$.ajax`调用来查看请求是否未完成：

```
$(function() {
    $("#username").focus(function() {
        $.ajax({
            url: 'ViewRecord/GetSoftwareChoice',
            dataType: 'json',
            type: 'GET',
            success: function(data) { alert(data); },
            error: function() { alert('something went wrong!'); }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T08:51:15.797

您的代码是正确的，应该触发该事件。问题可能出在 AJAX 调用上。在 ajax 调用之前发出警报，以确保这确实是问题所在。

# c# - File.Copy 和字符编码

> ID：1000249
> 
> 赞同：0
> 
> 时间：2009-06-16T08:45:36.510
> 
> 标签：c#, .net, file-io

我注意到`File.Copy()`.NET 3.5SP1 中的一个奇怪行为。我不知道这是一个错误还是一个功能。但我知道这让我发疯。我们`File.Copy()`在自定义构建步骤中使用，它搞砸了字符编码。

当我在 UTF-8 编码的文本文件上复​​制 ASCII 编码的文本文件时，目标文件仍然是 UTF-8 编码的，但具有新文件的内容加上 UTF-8 的 3 个前缀字符。这对于 ASCII 字符很好，但对于 ANSI 代码页的其余字符 (128-255) 不正确。

这是要重现的代码。我首先将 UTF-8 文件复制到目标，然后将 ANSI 文件复制到同一目标。注意第二个控制台输出的输出：`Content of copy.txt : this is ASCII encoded: / Encoding: utf-8`

```
File.WriteAllText("ANSI.txt", "this is ANSI encoded: é", Encoding.GetEncoding(0));
File.WriteAllText("UTF8.txt", "this is UTF8 encoded: é", Encoding.UTF8);

File.Copy("UTF8.txt", "copy.txt", true);

using (StreamReader reader = new StreamReader("copy.txt", true))
{
    Console.WriteLine("Content of copy.txt : " + reader.ReadToEnd() + " / Encoding: " +
                reader.CurrentEncoding.BodyName);
}

File.Copy("ANSI.txt", "copy.txt", true);

using (StreamReader reader = new StreamReader("copy.txt", true))
{
    Console.WriteLine("Content of copy.txt : " + reader.ReadToEnd() + " / Encoding: " + 
                reader.CurrentEncoding.BodyName);
} 
```

任何想法为什么会发生这种情况？我的代码有错误吗？任何想法如何解决这个问题（我目前的想法是如果文件存在就删除它）

编辑：纠正 ANSI/ASCII 混淆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T08:54:46.960

你在哪里写ASCII.txt？您在第一行写的是 ANSI.txt，但这肯定不是 ASCII，因为 ASCII 不包含任何重音字符。ANSI 文件不包含任何表明它是 ANSI 而不是 ASCII 或 UTF-8 的前导码。

基本上，在编写示例的过程中，您似乎在 ASCII 和 ANSI 之间改变了主意。

我希望任何 ASCII 文件都被“检测”为 UTF-8，但编码检测依赖于具有字节顺序标记的文件，因为它是 UTF-8 以外的任何东西。它不像是读取整个文件然后猜测编码是什么。

来自 StreamReader 的文档：

> 此构造函数将编码初始化为 UTF8Encoding，使用流参数初始化 BaseStream 属性，并将内部缓冲区初始化为默认大小。
> 
> detectEncodingFromByteOrderMarks 参数通过查看流的前三个字节来检测编码。如果文件以适当的字节顺序标记开头，它会自动识别 UTF-8、little-endian Unicode 和 big-endian Unicode 文本。有关详细信息，请参阅 Encoding.GetPreamble 方法。

现在`File.Copy`只是将原始字节从一个地方复制到另一个地方 - 它不应该在字符编码方面改变*任何东西*，因为它首先不会尝试将文件解释为文本文件。

我不太清楚你在哪里看到问题（部分是由于 ANSI/ASCII 部分）。我建议您将“File.Copy 是否改变事物？”的问题分开。和“StreamReader 检测到什么字符编码？” 在你的脑海和你的问题。答案应该是：

*   `File.Copy`根本不应该更改文件的内容
*   `StreamReader`只能检测UTF-8和UTF-16；如果您需要读取使用任何其他编码编码的文件，则应在构造函数中明确说明。（我个人建议使用`Encoding.Default`而不是`Encoding.GetEncoding(0)`顺便说一句。我认为它更清楚。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T08:55:51.450

我怀疑这与 File.Copy 有什么关系。我认为您看到的是 StreamReader 默认使用 UTF-8 进行解码，并且由于 UTF-8 向后兼容，StreamReader 永远没有任何理由停止使用 UTF-8 来读取 ANSI 编码的文件。

如果您在十六进制编辑器中打开 ASCII.txt 和 copy.txt，它们是否相同？

# compiler-construction - 与 gprof 兼容的编译器？

> ID：1000252
> 
> 赞同：1
> 
> 时间：2009-06-16T08:46:12.220
> 
> 标签：compiler-construction, gprof

我正在寻找能够生成 gprof 输出的编译器列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T09:06:43.003

gprof 支持超出 gcc。例如，Sun Studio 和 berkeley 编译器都支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T08:57:23.880

根据您的平台，您可能会发现动态运行时工具（例如 dtrace 或 oprofile）可以提供帮助。

这些不是编译器，但可以提供与 gprof 相同类型的数据，并且可以应用于现有程序而无需源代码或重新编译它们。

oprofile 有一种直接输出 gprof 兼容数据的模式：

[http://oprofile.sourceforge.net/doc/opgprof.html](http://oprofile.sourceforge.net/doc/opgprof.html)

# vb.net - 从 exe 文件中提取 VB.NET 代码

> ID：1000254
> 
> 赞同：11
> 
> 时间：2009-06-16T08:46:25.090
> 
> 标签：vb.net, decompiling

我使用 VB 制作了一个程序，但我丢失了源代码，但我有 exe 文件。如何从exe文件中提取代码？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-16T08:48:57.860

假设您的 exe 是一个 .NET 程序集（您将问题标记为 VB.NET），您可以使用[Reflector](http://www.red-gate.com/products/reflector/)等工具对您的 exe 进行反向工程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-16T08:50:01.167

如果是 VB.NET，您可以使用[RedGate Reflector](http://www.red-gate.com/products/reflector/)工具和[FileDisassemler](http://www.denisbauer.com/NETTools/FileDisassembler.aspx)插件来生成源代码。那就是如果exe没有被混淆

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-16T08:52:34.203

由于您标记了您的问题 vb.net，您可能能够使用 .NET 反汇编程序检索相当多部分代码。例如，尝试[Lutz Roeder 的 .Net Reflector](http://www.red-gate.com/products/reflector/)或 .NET 编译器附带的 MS ildasm。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T08:49:55.673

使用[Reflector](http://www.red-gate.com/products/reflector/)（假设为 .NET）将 exe 反汇编为代码。您将需要创建自己的类结构，但您可以将代码恢复为任何受支持的 CLR 语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T08:51:40.773

您是否尝试过[Salamander](http://www.remotesoft.com/salamander/)或许多其他 .net 反编译器之一？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T08:51:55.203

Trey [VB Decompiler](http://www.vb-decompiler.org)，看看它是否有效。

# javascript - 如何避免 javascript 从不存在的元素中检索值

> ID：1000261
> 
> 赞同：1
> 
> 时间：2009-06-16T08:48:45.317
> 
> 标签：javascript, dom, cookies

**更新：澄清问题（我希望）** 嗨。

我正在 Wordpress 中开发一个插件，我正在根据用户权限 A 和 B 输出元素。

在 A 的情况下，我输出元素“Foo”。
在 B 的情况下，我输出元素“Bar”。

到目前为止，在尝试检索值之前，我还没有检查元素是否存在。这当然会给我一些浏览器（如 IE7）中的 javascript 错误。

我看过使用该`typeof()`功能：

```
if(typeof(element) == 'undefined') {
    //do something...
} 
```

我也在使用 jQuery。所以一种解决方案可能是使用这个：

```
if ($("#mydiv").length > 0){
    // do something here
} 
```

使用上述方法，我不得不在尝试检索任何值之前检查每个元素。

“理想”的解决方案是根据用户权限获取值。例如：

```
if (userPriv == A) {
    //get values from element 'Foo'
} 
```

这样我可以检查**一次**，然后进行数据收集。我能想到的唯一解决方案是设置隐藏输入元素的值或使用 cookie。

```
<input type="hidden" id="userPriv" value="A" /> 
```

另一种解决方案是向 cookie 添加一个值。

```
setcookie("userPriv", "A"); 
```

不幸的是，最后一个选项给了我一条警告消息，说必须在标题中设置 cookie（在 html 输出之前）。我认为这是因为我在 Wordpress 中这样做。

我正在寻找关于哪种方法是实现这一目标的“最佳方式”的意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T09:04:41.590

如果我遗漏了什么，请原谅我，但是在 javascript 中检查 DOM 元素通常很容易。

```
var elementA = document.getElementById('id_of_a');
var elementB = document.getElementById('id_of_b');
if (elementA) {
    //...
} else if (elementB) {
    //...
} 
```

关键是 if 语句。~~如果未找到该元素，则将不~~`getElementById`返回null，这将在 if 语句中评估为 false。

 ~~* * *

或者，如果您*真的*不想检查单个 DOM 元素是否存在，您可以将用户 priv 发送到隐藏输入中并采取行动吗？这是一种在客户端发送值的无 cookie 方式。类似的东西（编辑为使用 jQuery 代码）

```
<input type="hidden" id="userPriv" value="A" />
...

var priv = $('#userPriv').val();
if (priv == 'A') {
    //...
} 
```

我仍然建议检查单个元素而不是检查隐藏的输入。它对我来说似乎更干净，更多的是不显眼的线条

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T08:55:20.827

您可以将对象用作关联数组：

```
var map = new Object();
map[A.toString()] = new Foo();
map[B.toString()] = new Bar(); 
```

在这种情况下，检查起来要简单得多，您将避免“意大利面条代码”。~~

# audio - 将声音集成到网站的最佳方式

> ID：1000263
> 
> 赞同：5
> 
> 时间：2009-06-16T08:49:08.810
> 
> 标签：audio

我希望将声音集成到网站中。基本上是一个聊天网站，用户在收到新消息时会听到声音。您认为整合声音的最佳方式是什么？

1.  Javascript 播放声音
2.  Javascript调用播放声音的flash swf
3.  还有其他我想不到的方法吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-16T08:52:51.143

一个带有 javascript 控制声音的小型 swf 将是跨平台和跨浏览器的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T08:57:33.240

我会选择＃2。但是，在将任何声音集成到网站时要小心一点，当声音突然出现时，人们常常会觉得很烦人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-22T06:30:01.393

Setting aside the ethics of whether to make a sound play in a web page automatically...

I've got this working with XHTML 1.0 Strict in FF 3.x+, Opera 9.x+, IE6+, but not in Chrome (3.0.195.38) or Safari (4.0.4). So, I can't figure out how to get Webkit to accept it. Note this likely **will not pass XHTML validation**. And also note that my doctype stuff starts off like this:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

Anyway, although the following code doesn't work yet in Webkit browsers, it works in other browsers:

```
<bgsound src="http://example.com/sound.wav" loop="0" />
<audio src="http://example.com/sound.wav" autoplay loop="false" /> 
```

If anyone know how to get this working in Webkit browsers, I'd like to know how.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T08:59:22.100

正如康拉德所说，使用 javascript 和 swf。你也可以看看其他人使用什么。我喜欢的一个例子是[Campfire](http://campfirenow.com/)聊天。它适用于我尝试过的所有浏览器和操作系统：es。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T09:01:04.967

最优雅的解决方案是使用即将推出的 HTML5`<audio>`标签。您可以使用 JavaScript 编写脚本。然而，对此的支持很差。

正如其他人所说，替代方案是 Flash 解决方案。

我建议`<audio>`尽可能使用标签并将 Flash 作为后备内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T09:01:27.930

我个人不喜欢需要激活 JavaScript 才能在 Flash 中完成某些事情的网站（例如 youtube），因为一般来说我已经停用了 JavaScript。因此，我建议只使用 Flash。不过，这是个人的事情。大多数用户可能不介意。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T09:19:26.863

我个人不喜欢网站上的背景音乐或声音。让我想起了糟糕的过去，每个站点都有一个背景 MIDI 文件。

至少可以选择关闭它:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-16T09:24:08.867

# 3 使用闪光灯。它受到广泛支持，并且比 Java 小程序运行得更好。

请也制作一个清晰可见的静音按钮！:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-16T09:39:51.207

这是一个非常好的 API，它使用 flash 和 javascript 使在您的网页中嵌入声音变得非常容易：[http ://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)

# sharepoint - MOSS 2007：显示来自 SQL Server 数据库的数据

> ID：1000264
> 
> 赞同：4
> 
> 时间：2009-06-16T08:49:39.340
> 
> 标签：sharepoint, moss, sharepoint-2007

我需要从数据库 (SQL Server) 的表中选择一些数据并将其显示在 SharePoint 网站 (MOSS 2007) 的页面上。

我对 MOSS 有一点经验，所以我知道我有两种选择：

*   BDC
*   SSRS
*   甚至可能是自定义 ASPX 页面。

我从来没有真正使用过这些。任何人都可以就每个的+/-提供建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T10:29:07.767

这完全取决于表格在 SharePoint 中显示后所需的功能。您是否需要额外的花里胡哨，或者数据转储是否足够？（想想未来。）这里有一些想法......

**业务数据目录 (BDC)**

如果您想很好地将 SharePoint 外观与您的数据集成并获得一些很酷的功能，那么 BDC 是一个很好的解决方案。无需编写任何程序，[这些就是您获得的功能](http://msdn.microsoft.com/en-us/library/ms551230.aspx)。但是，如果此数据仅以一种方式使用一次，那么它可能是矫枉过正的。

您需要[滚动您自己](http://msdn.microsoft.com/en-us/library/ms566019.aspx)的数据 XML 描述，以便 SharePoint 知道如何从数据库中提取数据（或使用第三方工具，如[Lightning Tools](http://www.lightningtools.com/)）。正如[Colin](https://stackoverflow.com/questions/1000264/moss-2007-displaying-data-from-sql-server-database/1000506#1000506)所说，它需要 MOSS 的 Enterprise 许可证。

**SQL Server 报告服务 (SSRS)**

如果 Reporting Services 已经可以使用，那么这是最快和最简单的解决方案。它运行良好，但可能会因为报告中需要更高级的功能而变得痛苦。

您应该能够使用报表设计器向导指向您的表格并为您设置所有内容。可以在 SharePoint 中使用 SSRS Web 部件，或者实际上您可以使用[SharePoint 集成模式](http://msdn.microsoft.com/en-us/library/bb326356.aspx)在 SharePoint 中运行 SSRS 。

**申请页面**

[Steven](https://stackoverflow.com/questions/1000264/moss-2007-displaying-data-from-sql-server-database/1000333#1000333)提到的这种方法允许您将 ASP.NET 应用程序集成到 SharePoint 中（以便可以通过 SharePoint 站点中的 URL 访问它）。这允许 ASP.NET 所做的任何事情，并且代码隐藏将知道 SharePoint，因此您也可以在需要时利用它。这里的缺点是代码访问安全性和部署。

请参阅[此网络广播](http://msdn.microsoft.com/en-us/library/bb418732.aspx)了解如何操作。

**Web 部件**

与开发应用程序页面类似，但与 SharePoint 的集成度更高。自定义 Web 部件非常强大，允许您在 SharePoint 页面上集成 ASP.NET 代码。如您所知，可以将 Web 部件拖到任何位置并提供一致的属性窗格。同样，需要考虑代码访问安全性和部署。

如果您喜欢 Visual Studio 中的设计器视图，请注意这[不是 Microsoft 推动的方法](http://msdn.microsoft.com/en-us/library/ms367238.aspx)。[但是，您可以使用SmartPart](http://www.codeplex.com/smartpart)之类的东西，您可以在其中将自定义应用程序开发为用户控件，然后 SmartPart 将其包装到 Web 部件中。我现在已经习惯了 MS 的方式，实际上更喜欢它提供的额外控制，但它可能需要更多时间。

**页面查看器 Web 部件**

如果您根本不想接触您的 SharePoint 安装，请查看此 Web 部件。它以 URL 作为参数并显示一个 IFrame，其中包含将成为您的报告的页面，无论是在 SSRS 还是在标准 ASP.NET 中。

这种缺乏集成的缺点是 IFrame 的大小存在问题，如果在不同的域中访问 URL，浏览器可能会发出安全警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T22:01:17.777

不要忘记[DataView Webpart](http://ari.provoke.co.nz/archive/2007/04/17/data-view-web-part-introduction-1.aspx)。它的开发足迹非常小，如果您不确定最终结果需要多硬，它作为第一次“剪辑”非常有效。

它使用 XSLT 呈现，让您完全控制最终的 HTML，因此它可以使用 Javascript 和 co 做一些漂亮的事情。

[对于一个非常简单的图表示例](http://msdn.microsoft.com/en-us/library/cc300164.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-22T18:33:03.127

正如 Nat 所说——如果只需要在页面上显示来自数据库的一些数据——DVWP 是一个很好的解决方案。只需在 SharePoint Designer 中打开您的页面，添加数据库连接，然后将 Web 部件拖放到您的页面上。您可以使用几种预先格式化的布局中的任何一种，或者设计/调整自己的布局，以便根据需要显示数据。

相对简单，有很多在线 HowTos，并且比 BDC 之类的设置更快/更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T09:47:48.350

如果你想保持“严格的 Sharepoint”，BDC 就是你要走的路。问题是，它只包含在 SharePoint 的企业版中。如果您有标准版，则可以选择 SSRS 和 SSRS webpart，或者创建自己的 webpart。这样您就可以在站点的任何地方使用您的数据显示，并且它也与 ASP.NET 兼容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T09:04:27.313

你有没有使用过.NET Framework 来开发网页？MOSS 2007 将此框架用于主/模板文件。

因此，您最好的选择是创建一个 ASPX 模板文件以在网页上显示结果。

# c# - AD Provider Membership.GetUser() 导致错误提示：“参数'用户名'不能为空。”

> ID：1000276
> 
> 赞同：0
> 
> 时间：2009-06-16T08:52:11.787
> 
> 标签：c#, visual-studio, unit-testing, active-directory, asp.net-membership

使用 ActiveDirectory 提供程序，当我执行时，`Membershhip.GetUser()` 我收到一条错误消息：

> 参数“用户名”不能为空。

这是会员配置：

```
<membership defaultProvider="AspNetActiveDirectoryMembershipProvider" >
  <providers>
    <clear/>
    <add name="AspNetActiveDirectoryMembershipProvider"
         type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.3600.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
         connectionStringName="ADConnectionString"
         attributeMapUsername="sAMAccountName"/>
  </providers>
</membership>
<authentication mode="Windows"/>
<authorization>
  <deny users="?"/>
  <allow users="*"/>
</authorization> 
```

我正在尝试从 Visual Studio 单元测试方法中访问此方法。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T09:58:31.993

问题是当前线程主体尚未设置。添加以下行： Thread.CurrentPrincipal = new WindowsPrincipal(WindowsIdentity.GetCurrent());
是初始化当前的principlal，GetUser() 重新开始工作。

# .net - 在 64 位平台上为 32 位编译程序集

> ID：1000278
> 
> 赞同：1
> 
> 时间：2009-06-16T08:52:25.623
> 
> 标签：.net, windows-vista, 64-bit, 32-bit, publish

我应该选择什么选项来为 32 位平台服务器在 64 位平台上编译程序集。目前我正在尝试发布到 32 位服务器。我在 Windows Vista 机器上使用 VS2005 来构建我的项目，然后在服务器上发布，但我遇到了错误。知道如何解决这个问题。

我应该在 64 位机器上使用 AnyCPU 选项还是混合平台选项。x86 的选项也被禁用，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T08:57:13.367

使用任何CPU。只要您的程序集没有任何直接的非托管依赖项或对标记为特定 CPU 的程序集的依赖项，那么您的程序集就可以在 64 位或 32 位上正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T08:58:54.050

假设您使用托管语言工作，那么编译到“AnyCPU”应该是跨平台的（64/32 位），因为生成的 IL 不会变成机器指令，直到代码在运行时被 JITted。

如果您使用某些依赖于指针大小等的结构，则有极少数例外情况可能会导致位依赖，但这些通常不会出现在您的代码中，尽管在您的代码上运行 FxCop 并没有什么坏处确保代码（在 FxCop 中有一节处理涉及这些问题的可移植性）

# security - 在表中存储密码和摘要式身份验证

> ID：1000281
> 
> 赞同：9
> 
> 时间：2009-06-16T08:52:38.960
> 
> 标签：security, authentication

如何在表格中存储网站用户密码的主题已经在 SO 上出现过多次，一般建议是存储密码的哈希，最终是 HMAC 哈希。这适用于基本身份验证或基于表单的身份验证（实际上是同一件事）。我的问题是我还必须提供摘要式身份验证，针对连接到我的服务的自动化工具。我一直在研究这个问题，正如我所见，我可以存储的唯一哈希是[Digest 的 HA1 部分](http://en.wikipedia.org/wiki/Digest_access_authentication)：`username : realm : password`. 这样我就可以验证 Basic/forms 和 Digest。

我的问题是我认为这样做没有任何好处。现在确实，如果攻击者掌握了我的密码表，他就不能使用基本或基于表单的身份验证（因为他只有散列值并且他需要发送明文密码），但没有什么能阻止他使用摘要式身份验证并给出有效的响应对于我的服务挑战：他只是从表中预先计算的 HA1 开始，然后从那里继续制作响应（即，我会做同样的事情来验证后端的用户）。

我错过了什么吗？添加摘要要求是否基本上使存储散列密码成为安全 pov 的无操作，充其量是一种混淆？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T08:59:06.280

我使用预先计算的哈希的原因不是为了防止攻击，而是为了保护用户的隐私。

攻击者确实可以进行身份​​验证，但他不能（轻易地）看到我宝贵用户的密码并破坏他们正在使用的其他服务等。

# c# - SQL 异常截断字符串或 二进制数据的奇怪问题

> ID：1000299
> 
> 赞同：1
> 
> 时间：2009-06-16T08:56:24.257
> 
> 标签：c#, sql

我目前正在为我的工作构建一个应用程序，它可以在我的 PC 上完美运行，但是我使用 sqlserver 2005 将编译代码放到 2008 服务器上并运行它，我得到一个 sql 错误 truncat 数据。

奇怪的是，它针对同一个数据库中的同一个表，并尝试发送到相同的数据。

有人有想法吗？

错误：

```
Unhandled Exception: System.Data.SqlClient.SqlException: String or binary data w
ould be truncated.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolea
n breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObj
ect stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cm
dHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, Tds
ParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, Run
Behavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBe
havior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehav
ior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult
 result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehav
ior, RunBehavior runBehavior, Boolean returnStream, String method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T09:03:11.793

你能说明一下你现在在做什么吗？一种选择是 i18n 问题 - 即 2008 服务器是否对您的机器有不同的区域设置？这可能意味着您正在构建一些不同的 TSQL（例如，以不同的方式格式化日期），并且它不再适合指定的字段（`varchar(10)`例如，将采用某些日期格式而不是其他格式）。当然，这里*真正的*解决方法是使用`datetime`- 但这只是一个示例！

我认为您最好的选择来自使用 sql 开发工具进行 sql 跟踪；这将使实际发送的内容一目了然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T09:02:08.973

运行 SQL Server Profiler 以确保您发送的数据确实相同。您的假设之​​一是错误的应该很快就会变得明显。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T09:05:29.123

检查表或触发器的默认值。例如，插入的用户名 (suser_name) 或主机名 (host_name) 值可能在不同的服务器上有所不同。其中之一可能与字段大小不兼容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T10:56:47.493

我不得不在服务器上运行远程调试器，而愚蠢的帐户对于表 login.lenght = 16 table table_login(varchar15) 来说是 1 char to big...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-12T09:36:39.720

确保您的表定义和存储过程定义相同。即如果你声明`pro_id`为`varchar(10)`存储过程也应该有相同的定义`varchar(10)`

# ruby-on-rails - RAILS：Authlogic gem 和 Userstamp 插件

> ID：1000301
> 
> 赞同：1
> 
> 时间：2009-06-16T08:56:59.700
> 
> 标签：ruby-on-rails, authlogic

我有一个使用[*Authlogic* gem](http://github.com/binarylogic/authlogic/tree/master)并且需要[*Userstamp*插件](http://github.com/delynn/userstamp/tree/master)的功能的应用程序。

AFAIK *Userstamp与*[*RestfulAuthentication*](http://github.com/technoweenie/restful-authentication/tree/master)配合得很好，尽管我找不到任何提到将它与*Authlogic*一起使用的内容。

你们有没有人尝试将它们结合起来？有没有我应该注意的问题？我应该使用完全不同的插件/宝石来获得Userstamp 与*Authlogic*结合的*功能*吗？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-19T13:05:08.237

好吧，我只是很难找到它。;-)

如果您将 Authlogic (2.0.11) 与 Userstamp (2.0) 结合使用，请确保`current_user`ActionController 中的 Authlogic 方法是`protected`和不是`private`（默认情况下）。或者你会**在 User sessionsController#new 中得到一个 NoMethodError**。

除此之外，它就像一个魅力。

PS：不需要手动实现`set_stamper`ActionController中的方法。Authlogic 和Userstamp 与Userstamp 插件定义的方法配合得很好。如果你不知道我在说什么，请忽略这个。:-)

# c++ - 有没有比使用 dynamic_cast 在运行时检测对象类型更快的方法？

> ID：1000303
> 
> 赞同：6
> 
> 时间：2009-06-16T08:57:22.133
> 
> 标签：c++, visual-c++, dynamic, polymorphism

我有一个类型的层次结构 - GenericClass 和许多派生类，包括 InterestingDerivedClass，GenericClass 是多态的。有一个界面

```
interface ICallback {
    virtual void DoStuff( GenericClass* ) = 0;
}; 
```

我需要实施。然后我想检测传递给 ICallback::DoStuff() 的 GenericClass* 指针实际上是一个指向 InterestingDerivedClass 的指针的情况：

```
class CallbackImpl : public ICallback {
    void DoStuff( GenericClass* param ) {
        if( dynamic_cast<InterestingDerivedClass*>( param ) != 0 ) {
            return; //nothing to do here
        }
        //do generic stuff
    }
} 
```

GenericClass 和派生类不在我的控制范围内，我只控制 CallbackImpl。

我对 dynamic_cast 语句进行了计时——它需要大约 1400 个周期，目前可以接受，但看起来不是很快。我试图阅读调试器中 dynamic_cast 期间执行的反汇编，发现它需要很多指令。

由于我真的不需要指向派生类的指针，有没有一种更快的方法可以在运行时仅使用 RTTI 来检测对象类型？也许一些特定于实现的方法只检查“是”关系但不检索指针？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-16T09:01:08.367

我总是将使用`dynamic_cast`视为代码气味。您可以在所有情况下用多态行为替换它并提高代码质量。在你的例子中，我会做这样的事情：

```
class GenericClass
{
  virtual void DoStuff()
  {
    // do interesting stuff here
  }
};

class InterestingDerivedClass : public GenericClass
{
  void DoStuff()
  {
    // do nothing
  }
};

class CallbackImpl : public ICallback {
    void DoStuff( GenericClass* param ) {
        param->DoStuff();
    }
} 
```

在您的情况下，您无法修改目标类，您正在按照`GenericClass`类型声明所暗示的合同进行编程。因此，您不可能做任何比实际更快的`dynamic_cast`事情，因为其他任何事情都需要修改客户端代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T09:18:52.543

正如其他人所说，使用虚函数是一种很好的做法。使用它还有另一个原因，不适用于您的情况，因为您无法添加 VF，但我认为仍然值得一提 - 它可能比使用动态投射要快得多。在我用 g++ 完成的一些（不是很严格的）测试中，虚函数的性能比 dynamic_cast 高 4 倍。

因为存在这样的差异，可能值得创建自己的继承层次结构来包装您无法控制的代码。您将使用 dynamic_cast （一次）创建包装器的实例来决定要创建什么派生类型，然后从那里使用虚函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T09:48:28.537

对我来说，这似乎是一个非常骇人听闻的设计。（正如其他人所提到的，必须使用`dynamic_cast`通常表明您有设计问题。）。但是，如果大部分代码都超出了您的控制范围，我想您对此无能为力。

但是不，我知道的唯一通用解决方案是`dynamic_Cast`. `typeid`仅匹配最派生的类型，这*可能*适用于您的情况。

附带说明一下，之所以`dynamic_cast`如此昂贵，可能是因为它必须遍历整个类层次结构。如果你有一个很深的层次结构，那会变得很昂贵（换句话说，一般来说，没有很深的层次结构，*尤其是*在 C++ 中）。

（当然，第一次执行强制转换时，大多数类描述符查找可能是缓存未命中，这可能会扭曲您的基准测试并使其看起来比实际更昂贵）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T09:00:18.743

比较`type_info`会更快吗？（调用`typeid`参数`param`）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T09:01:42.810

首先，不要过早优化。其次，如果您确实查询一个对象以获取内部的具体实现，那么您的设计很可能有问题（想想双重分派）。

至于最初的问题，向 a 引入一个`GetRuntimeType()`函数`ICallback`会做得很好：请参阅 MFC 了解如何做到这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T09:29:00.353

在您的具体用例中，答案是使用虚函数。

但是，在某些情况下，您需要动态向下转换。有一些技术可以使这个操作更快（或者更快，取决于你的编译器实现的智能程度`dynamic_cast`），特别是如果你将自己限制为单继承。主要思想是，如果您以某种方式知道确切的类型，则 a`static_cast`会快得多：

```
f(A* pA)
{
  if (isInstanceOfB(pA))
  {
    B* pB = static_cast<B*>(pA);
    // do B stuff...
  }
} 
```

当然，现在的问题是快速实现 isInstanceOfB()。

例如，参见[boost::type_traits](http://www.boost.org/doc/libs/1_39_0/libs/type_traits/doc/html/index.html)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-16T12:17:44.180

标准 dynamic_cast 非常灵活，但通常很慢，因为它处理了许多您可能不感兴趣的角落情况。如果你使用单继承，你可以用一个基于虚函数的简单实现来代替它。

示例实现：

```
// fast dynamic cast
//! Fast dynamic cast declaration
/*!
Place USE_CASTING to class that should be recnognized by dynamic casting.
Do not forget do use DEFINE_CASTING near class definition.
*\note Function dyn_cast is fast and robust when used correctly.
Each class that should be used as target for dyn_cast
must use USE_CASTING and DEFINE_CASTING macros.\n
Forgetting to do so may lead to incorrect program execution,
because class may be sharing _classId with its parent and IsClassId
will return true for both parent and derived class, making impossible'
to distinguish between them.
*/
#define USE_CASTING(baseType) \
  public: \
  static int _classId; \
  virtual size_t dyn_sizeof() const {return sizeof(*this);} \
  bool IsClassId( const int *t ) const \
  { \
    if( &_classId==t ) return true; \
    return baseType::IsClassId(t); \
  }

//! Fast dynamic cast root declaration
/*!
Place USE_CASTING_ROOT to class that should act as
root of dynamic casting hierarchy
*/

#define USE_CASTING_ROOT \
  public: \
  static int _classId; \
  virtual size_t dyn_sizeof() const {return sizeof(*this);} \
  virtual bool IsClassId( const int *t ) const { return ( &_classId==t ); }

//! Fast dynamic cast definition
#define DEFINE_CASTING(Type) \
  int Type::_classId;

template <class To,class From>
To *dyn_cast( From *from )
{
  if( !from ) return NULL;
  if( from->IsClassId(&To::_classId) )
  {
    assert(dynamic_cast<To *>(from));
    return static_cast<To *>(from);
  }
  return NULL;
} 
```

也就是说，我完全同意其他人的观点，dynamic_cast 是可疑的，您通常能够以更清洁的方式实现相同的目标。也就是说，与 goto 类似，在某些情况下它可能非常有用且更具可读性。

另一个注意事项：如果您说有问题的类不在您的控制范围内，此解决方案将无济于事，因为它需要您修改类（不多，只需添加几行，但您需要修改它们）。如果确实如此，则需要使用该语言提供的内容，即 dynamic_cast 和 typeinfo。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-16T12:11:16.440

您可以使用[http://www.boost.org/doc/libs/1_39_0/boost/type_traits/is_convertible.hpp](http://www.boost.org/doc/libs/1_39_0/boost/type_traits/is_convertible.hpp) 并检查 CPU 性能吗？

您还可以检查实施..

参考： http: [//www.boost.org/doc/libs/1_39_0/libs/type_traits/doc/html/boost_typetraits/reference/is_convertible.html](http://www.boost.org/doc/libs/1_39_0/libs/type_traits/doc/html/boost_typetraits/reference/is_convertible.html)

# aop - 什么是aopalliance？为什么 guice 使用它？

> ID：1000310
> 
> 赞同：29
> 
> 时间：2009-06-16T08:58:59.883
> 
> 标签：aop, guice, aopalliance

我正在使用来自[aopalliance](http://aopalliance.sourceforge.net/)的 aop 进行依赖注入。我不太清楚 aopalliance 到底是什么以及谁实现了他们的 sourceforge 页面上的版本（从 2004 年开始）。为什么 guice 使用这个版本而不是更知名的包，例如 AspectJ？

另外，你知道关于 aopalliance 版本的任何教程吗？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-06-16T16:30:12.507

AOP Alliance 是一组由多个框架实现的接口（请参阅[AOP Alliance Motivations](http://aopalliance.sourceforge.net/motivations.html)），包括 Guice 和 Spring。

Guice 选择了 AOP 联盟，因为它具有强大的功能和简单的 API。

Guice wiki 有一个[AOP 指南](https://github.com/google/guice/wiki/AOP)。

# java - Java 反射 isArray() 总是假的

> ID：1000311
> 
> 赞同：0
> 
> 时间：2009-06-16T08:59:04.890
> 
> 标签：java, arrays, reflection

我有一个关于 Java 反射的问题：如果类的某个字段是数组，我必须检查。但我的问题是：如果我直接在类的属性上运行 isArray() ，它就可以工作。但是，如果我以下面的方式使用它，它将无法工作。我猜是因为“真实”数组在这个 Field 类中？知道我是如何让它工作的 - 我认为缺少一个演员或类似的东西？ 谢谢！

```
Field fields[] = object.getClass().getDeclaredFields();

for (Field field : fields) {
    if (field.getClass().isArray()) {
        //Always false.
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T08:59:52.877

[`field.getType()`](http://java.sun.com/javase/6/docs/api/java/lang/reflect/Field.html#getType())！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-16T09:05:20.743

您的代码应阅读

```
Field fields[] = obj.getClass().getDeclaredFields();

for(Field field : fields) {
  if(field.getType().isArray()){
     //Actually works
  }
} 
```

使用 field.getClass() 将始终返回 Field.class 或 Field* 子类的 Class 实例。

*我为这样一个措辞混乱的句子道歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T09:04:56.470

您正在测试 Fields 的各个元素，而不是数组本身。

# sharepoint - 在共享点门户中实施模糊搜索

> ID：1000326
> 
> 赞同：1
> 
> 时间：2009-06-16T09:02:27.973
> 
> 标签：sharepoint, search, portal, fuzzy-search

我正在为建议和奖励系统开发一个共享点门户，并且需要提醒重复的建议。建议将采用自由文本格式，因此需要模糊搜索。我知道“Damerau-Levenshtein 算法”会进行模糊搜索，但如何在 Sharepoint 门户中实现？Microsoft 搜索服务器可以提供帮助吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T10:12:02.997

你有点坚持使用 SharePoint 提供的内置搜索，但我认为 FullTextSqlQuery 类可以做很多你正在寻找的事情。如果您愿意，它将过滤掉重复项。我建议你看看这门课。

可以使用 FullTextSqlQuery.TrimDuplicates = false 或 true 启用/禁用修剪重复项

# php - 使用 javascript 和 php 验证 URL

> ID：1000327
> 
> 赞同：0
> 
> 时间：2009-06-16T09:02:30.297
> 
> 标签：php, javascript

我只想验证 url，对于以下两种格式 [http://www.XYZ.com](http://www.XYZ.com) 和 www.XYZ.com 我也想要这个在 Javascript 和 PHP 中的验证脚本。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T09:26:02.263

正则表达式就像一个冠军。

你可以自己写一个，这里有一个简单的例子：

```
(https?://)?.+$ 
```

在更严格的验证方面，有点谷歌搜索发现我更特别：

```
^(https?://)?(([0-9a-z_!'().&=$%-]: )?[0-9a-z_!'().&=$%-]@)?(([0-9]{1,3}\.){3}[0-9]{1,3}|([0-9a-z_!'()-]\.)([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\.[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!*'().;?:@&=$,%#-])/?)$ 
```

来源：[http](http://www.geekzilla.co.uk/view2D3B0109-C1B2-4B4E-BFFD-E8088CBC85FD.htm) ://www.geekzilla.co.uk/view2D3B0109-C1B2-4B4E-BFFD-E8088CBC85FD.htm （显然测试复制和粘贴的正则表达式，就像使用任何复制粘贴的代码一样）

如果你不知道如何在 PHP 中使用正则表达式，它很简单：

```
$valid = preg_match($pattern, $urlOrStringToValidate); 
```

其中 $pattern = "/(https?://)?.+/" 或类似的东西，在 / 和 / 之间

Javascript 在 String 类型上有一个名为 match 的对象方法。

```
var urlString = "http://www.XYZ.com";
var isValidURL = urlString.match(/(https?:\/\/)?.+/); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T09:26:51.857

您最好使用正则表达式来执行此操作。像这样的东西：

```
^((ht|f)tp(s?)\:\/\/|~/|/)?([\w]+:\w+@)?([a-zA-Z]{1}([\w\-]+\.)+([\w]{2,5}))(:[\d]{1,5})?((/?\w+/)+|/?)(\w+\.[\w]{3,4})?((\?\w+=\w+)?(&\w+=\w+)*)? 
```

您可以在 PHP 中使用该函数使用正则表达式，[`preg_match`](http://uk.php.net/manual/en/function.preg-match.php)在 JavaScript 中使用该`match()`函数。

例如（Javascript）。

```
function validateUrl(url)
{
    var pattern = '^((ht|f)tp(s?)\:\/\/|~/|/)?([\w]+:\w+@)?([a-zA-Z]{1}([\w\-]+\.)+([\w]{2,5}))(:[\d]{1,5})?((/?\w+/)+|/?)(\w+\.[\w]{3,4})?((\?\w+=\w+)?(&\w+=\w+)*)?';

    if(url.match(pattern))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T10:21:47.330

使用[Jquery 验证器](http://docs.jquery.com/Plugins/Validation)。

# serial-port - 如何使用 telnet 或其他 windows 工具从 COM 端口预览数据

> ID：1000335
> 
> 赞同：0
> 
> 时间：2009-06-16T09:04:39.263
> 
> 标签：serial-port, telnet, peripherals

我想看看什么数据来自 COM 串行端口。是否可以使用 telnet 或其他 Windows 工具来完成？如果是这样，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T11:46:49.373

超级终端可用于通过串行端口进行通信/读取。但是周围可能有更好、更专业的工具。

（请注意，超级终端不再包含在 Vista 中，但 XP 仍然有。）

# iis-7 - Windows 2008 服务器上的 IIS 7.0。500.19 错误

> ID：1000342
> 
> 赞同：1
> 
> 时间：2009-06-16T09:06:09.777
> 
> 标签：iis-7

我尝试在 Windows 2008 服务器上的 IIS7.0 上设置一个虚拟文件夹。尝试浏览 aspx 页面时，我收到类似“HTTP 错误 500.19 - 内部服务器错误”之类的错误，并且还有几行表明配置文件不正确。

很少有指向 applicationHost.config 文件的谷歌结果可能不正确。

只是通过反复试验，我检查了服务器中的空间，发现它只有 1MB 的可用空间。

所以释放了 1 GB 空间，然后错误消失了

我的问题：每当在 IIS7.0 中第一次访问网站时，它是否会尝试更新 applicationHost 文件？

IIS7.0中applicationHost的作用是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T10:28:23.557

500.19错误确实是由配置文件中的错误引起的，但不一定是applicationHost.config，它也可能是由应用程序的web.config文件或适用于应用程序/虚拟文件夹/站点的任何web.config文件中的错误引起的

链接到有关此错误的 MS 支持文章 - [http://support.microsoft.com/kb/942055](http://support.microsoft.com/kb/942055)

以下链接是一篇介绍applicationHost.config文件的文章 ——http: [//learn.iis.net/page.aspx/128/iis-7-configuration-reference/](http://learn.iis.net/page.aspx/128/iis-7-configuration-reference/)

如果您阅读它，您会发现该文件的主要作用是配置 Web 服务器的一般设置并控制在 web.config 文件中可以覆盖哪些配置。它还告诉 IIS 其上运行的所有站点、虚拟文件夹和应用程序。

鉴于您的 Web 服务器只有区区 1MB 的可用空间（您是如何在整个机器崩溃的情况下获得这么低的空间的！！？？）我怀疑 IIS 7 可能会对文件做一些事情并且无法在磁盘上正确更新它，因为导致配置损坏的空间不足。

# c++ - Boost序列化问题

> ID：1000343
> 
> 赞同：1
> 
> 时间：2009-06-16T09:06:31.397
> 
> 标签：c++, exception, templates, boost-serialization

我有这样的情况：

```
class IData 
{
  virtual void get() = 0;
  virtual void set() = 0;
}
BOOST_ASSUME_IS_ABSTRACT(IData)
BOOST_EXPORT_CLASS(IData)

template<typename T>
class ConcreteData : public IData
{
public:

protected:
 template<typename Archive>
 void serialize(Archive& ar, const unsigned version)
 {
   ar & data;
 }
private:
 std::vector<T> mData;
}
BOOST_EXPORT_CLASS(ConcreteData<float>)
BOOST_EXPORT_CLASS(ConcreteData<int>)
BOOST_EXPORT_CLASS(ConcreteData<double>) 
```

我想通过增强序列化序列化和反序列化“IData”实例，但它似乎不起作用。以前有没有人这样做过，或者你有什么建议吗？顺便说一下我在 VS 2005 中使用的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-26T20:55:13.163

尝试`BOOST_CLASS_EXPORT_GUID`改用：

```
BOOST_CLASS_EXPORT_GUID(ConcreteData<float>, "ConcreteData<float>")
BOOST_CLASS_EXPORT_GUID(ConcreteData<int>, "ConcreteData<int>")
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-03-29T08:09:19.013

如果您的类位于命名空间中，请不要忘记添加命名空间：

```
BOOST_CLASS_EXPORT_GUID(NameSpace::ConcreteData<float>, "NameSpace::ConcreteData<float>")
BOOST_CLASS_EXPORT_GUID(NameSpace::ConcreteData<int>, "NameSpace::ConcreteData<int>") 
```

# c# - 如何访问 ItemsControl 的子项？

> ID：1000345
> 
> 赞同：37
> 
> 时间：2009-06-16T09:06:44.517
> 
> 标签：c#, wpf, itemscontrol

如果我有一个派生自 的组件`ItemsControl`，我可以访问它的子组件的集合，以便我可以遍历它们以执行某些操作吗？目前我似乎找不到任何简单的方法。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2009-06-16T09:42:42.057

类似于[Seb 的](https://stackoverflow.com/a/1000438/3195477)解决方案，但可能具有更好的性能：

```
for(int i = 0; i < itemsControl.Items.Count; i++)
{
    UIElement uiElement =
        (UIElement)itemsControl.ItemContainerGenerator.ContainerFromIndex(i);
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-06-16T09:31:22.003

看看这是否对您有帮助：

```
foreach(var item in itemsControl.Items)
{
    UIElement uiElement =
        (UIElement)itemsControl.ItemContainerGenerator.ContainerFromItem(item);
} 
```

控件中的逻辑项与`UIElement`.

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2009-12-09T20:11:10.327

要识别`ItemsControl`的数据绑定子控件（如 a `ToggleButton`），您可以使用：

```
for (int i = 0; i < yourItemsControl.Items.Count; i++)
{

    ContentPresenter c = (ContentPresenter)yourItemsControl.ItemContainerGenerator.ContainerFromItem(yourItemsControl.Items[i]);
    ToggleButton tb = c.ContentTemplate.FindName("btnYourButtonName", c) as ToggleButton;

    if (tb.IsChecked.Value)
    {
        //do stuff

    }
} 
```

# java - 如何使用 rsa 私钥解密数据

> ID：1000347
> 
> 赞同：-1
> 
> 时间：2009-06-16T09:06:55.327
> 
> 标签：java, encryption, rsa

我正在使用 JAVA 我的朋友使用 SYMBIAN

我和我的朋友有相同的 rsa 模数。如果我使用公钥加密数据，那么我的朋友可以解密相同的数据。但是如果我的朋友用公钥加密数据，那么我就无法解密数据。我收到一个错误，因为“数据必须从零开始”

```
public static byte[] encrypt(byte[] encrptdByte) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
    byte[] encryptionByte = null;
    Cipher cipher = Cipher.getInstance("RSA");
    cipher.init(Cipher.ENCRYPT_MODE, publicKey);
    encryptionByte = cipher.doFinal(encrptdByte);
    return encryptionByte;
}

public static void decrypt(byte[] encrptdByte) throws NoSuchAlgorithmException, NoSuchPaddingException, IllegalBlockSizeException, BadPaddingException, InvalidKeyException {
    byte[] encryptionByte = null;
    Cipher cipher = Cipher.getInstance("RSA");
    cipher.init(Cipher.DECRYPT_MODE, publicKey);
    encryptionByte = cipher.doFinal(encrptdByte);

    System.out.println("Recovered String     :::  " + new String(encryptionByte));
} 
```

谢谢苏尼尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-16T10:47:00.273

`decrypt`函数使用——`publicKey`它从何而来？请注意，使用公钥加密的数据必须使用相应的私钥解密，而不是使用相同的公钥。RSA 等非对称加密具有密钥对的概念，其中密钥对中的每个密钥都可以解密使用另一个密钥加密的数据，而对称加密（例如 AES）则使用相同的密钥进行加密和解密。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T11:04:17.277

添加上一篇文章，使用非对称加密大规模加密/解密数据是不切实际的（因为它比对称加密慢得多）。非对称加密（如 RSA）最实际的用途是加密用于加密数据的对称密钥（用于 AES 或类似算法），并签署消息摘要的安全散列（SHA-256 等）。

加密消息通常密封在一个“信封”中，其中包含加密消息以及用于加密的密钥。密钥当然是用接收者的公钥加密的，从而确保只有私钥的持有者才能取回密钥。

最后，消息的发送者可以选择计算消息的安全散列并使用发送者的私钥对其进行加密。收件人解密加密的散列（使用发件人的公钥）并与计算的散列进行比较以验证发件人的身份。

# javascript - 如何将数组 argu 从 object_c 转换为 javascript？

> ID：1000351
> 
> 赞同：1
> 
> 时间：2009-06-16T09:07:32.440
> 
> 标签：javascript, cocoa

现在我想将一个数组从 object_c 转换为 javascript，就像数组中的 label1 、 label2 、 label3 ... 一样。我使用这种方法：

```
WebScriptObject* win = [webview windowScriptObject];
NSMutableArray *nameArray; // in this have some file name : label1,label2...
[win callWebScriptMethod:@"transArray" withArguments:nameArray]; 
```

然后在 javascript 中我 var 一个数组并实现一个函数：

```
var labelArray= []; // maybe var labelArray = new Array (%@);but it didn't work
function transArray(param)
{
    for(var i=0;i < param.length;i++)
    labelArray[i] = param[i];
} 
```

然后我发现 labelArray 不是我想要的。它就像：`labelArray[0] = l,labelArray[1] = a; labelArray[2] = b`......。我想也许我可以`var labelArray = new Array (%@)`。但它没有用。我不清楚javascript，如果我可以将数组从object_c转换为javascript，怎么办？谢谢！

* * *

现在我找到了将 argu 从 object_c 转换为 Javascript 的方法。但是我不知道如何在javascript中获取数组，我想也许我的方法是错误的，但是如何获取数组和var数组，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T09:24:22.673

```
id win = [webView windowScriptObject];

NSArray *args = [NSArray arrayWithObjects:
                    @"sample_graphic.jpg",
                    [NSNumber numberWithInt:320],
                    [NSNumber numberWithInt:240],
                    nil];

[win callWebScriptMethod:@"addImage"
            withArguments:args]; 
```

来自[WebKit Objective-C 编程指南](http://developer.apple.com/documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/JavaScriptFromObjC.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T10:11:06.243

您可以看一下 JSON 编码/解码。这是迄今为止我所知道的从 javascript 获取数据的最简单方法。

[http://www.json.org/](http://www.json.org/)在主页底部有一个可用类的列表。我很确定有一个可以满足您的需求。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-30T07:54:20.540

好的，我找到了答案：function addImage() { for(var i=0;i

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-17T03:57:36.977

你应该这样编码：

```
[win callWebScriptMethod:@"transArray" withArguments:@[nameArray]]; 
```

# gwt - gwt 库

> ID：1000353
> 
> 赞同：0
> 
> 时间：2009-06-16T09:08:40.020
> 
> 标签：gwt, choice

您建议我将哪个 GWT 库用于项目？有人可以告诉我各种库（SmartGWT、Ext-GWT、GWT-Ext 等）的优缺点总结。是否有一个基本上“每个人”都可以使用的最佳全能库，或者是否有一些库比其他库更适合特定应用程序？谢谢！

**可能重复：** [最佳 GWT 小部件库？](https://stackoverflow.com/questions/867451/best-gwt-widget-library)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-23T19:10:20.537

尽管我最近在 GXT 上花费了更多时间，但我对这两种 GWT Ext 库都进行了大量的工作。

我的第一个一般性回答是向您提出一个问题，您是在构建用于部署到整个世界的东西，还是用于 Intranet 应用程序？

关于一些优点和缺点

**优点**

*   很多漂亮的小部件，有些非常强大*   非常漂亮的默认样式，对于许多内部使用来说当然足够好*   演示应用程序源非常适合快速运行。这可以通过文档上的 con 来平衡......

    **缺点**

    *   定制->痛苦，很多很多的痛苦*   附带的“MVC”不是很好，如果您重视自己的理智，可能不应该使用。( [http://blog.gerardin.info/archives/40](http://blog.gerardin.info/archives/40) )*   文档非常缺乏，一些小部件在幕后发生了一些相当复杂的事情，而这一切都没有记录。

    为了说明这一点，我们目前正在从 GXT 迁移，因为我们发现我们现在花费更多时间围绕库工作并修复它的缺陷，而不是通过使用库来节省时间。

    一般来说，如果小部件看起来对您有用，并且您在 GXT 演示中看到的功能正是您所需要的，那么 GXT 是一个非常好的库。如果您想以任何轻微未经批准的方式使用小部件或扩展它们，我强烈建议您远离库，因为您只是为将来进行一些痛苦的迁移做好准备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T13:40:06.167

我只使用过 SmartGWT，所以我不能告诉其他库，但也许这对你有帮助。

**优点**

*   数据源概念：数据源用于获取和发送请求。一旦它接收到 json 或 xml 数据，它就会将数据填充到绑定到数据源的小部件中。

*   文档：文档真的很棒，每个函数都有很好的文档，很多类都有示例代码。

*   Showcase：Showcase 为 SmartGWT 中的几乎每个小部件提供示例代码

*   自动数据绑定拖动（尚未使用）：假设您有典型的电子邮件程序，带有树和消息列表，如果您将消息拖到不同的文件夹中，它会自动向服务器发送正确的请求到更新数据库

*   论坛：论坛没有 ExtJS 的论坛那么大，但是您可以很快从开发人员那里得到答复

**缺点**

*   “只是”一个包装器：SmartGWT 是 JvaScript 框架 Smartclient 的一个包装器，因此您必须包含大量 JS 代码，这会使您的应用程序的整体大小变得非常大。对于无关紧要的内部应用程序。尺寸是我放弃 SmartGWT 的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T05:33:07.793

请检查 gwt-jet。我们在 2011 年制作了这个库，现在它是我们每个 GWT 项目的必备品。基本上，它会自动填充 pojo，将它们与网格和其他小部件同步。

[http://code.google.com/p/gwt-jet/](http://code.google.com/p/gwt-jet/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T09:20:14.380

GXT是我的最爱！它还包含一个小的 MVC 实现和许多很棒的小部件。

[http://extjs.com/products/gxt/download.php](http://extjs.com/products/gxt/download.php)

# wcf - 为什么当我关闭客户端应用程序而不在客户端调用“关闭”方法时 WCF 不销毁对象？

> ID：1000355
> 
> 赞同：4
> 
> 时间：2009-06-16T09:08:52.750
> 
> 标签：wcf, destructor

我有一个 net tcp WCF 服务如下

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
    public class AVService : IAVService
    {
        static int _numberofInst = 0;
        public AVService()
        {
            ++_numberofInst;
            Console.WriteLine("Number of instances "+_numberofInst);
        }
        ~AVService()
        {
            --_numberofInst;
            Console.WriteLine("Number of instances " + _numberofInst);
        }
        public void Foo(){}
    } 
```

当我在客户端创建一个对象如下

```
AVService client = new AVService();
client.Foo(); 
```

构造函数被调用，但是当我关闭客户端应用程序而不调用close mehotd时，没有调用析构函数？为什么？这是否意味着服务对象仍然在服务器上工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T10:24:17.387

是的 - 如果您没有明确处置您的客户端，服务器将“徘徊”一段时间（因为您指定[了 PerSession](http://msdn.microsoft.com/en-us/library/system.servicemodel.instancecontextmode(v=vs.110).aspx)模式）。

它最终会超时（由`InactivityTimeout`绑定配置上的设置指定），并将被销毁。但这可能需要一些时间（几分钟到几个小时，具体取决于您的设置）。

```
<bindings>
   <netTcpBinding>
      <binding name="NetTcp_Reliable" receiveTimeout="00:20:00">
         <reliableSession enabled="true" ordered="false" 
                          inactivityTimeout="00:15:00" />
      </binding>
   </netTcpBinding>
</bindings> 
```

因此，最好**在关闭应用程序之前处理掉您的客户端**。

# python - Python - 在“终端”上的标准输出上打印

> ID：1000360
> 
> 赞同：3
> 
> 时间：2009-06-16T09:11:51.497
> 
> 标签：python, stdout

在开始之前，我请大家为这个问题道歉。也许这很愚蠢，但我找不到解决方案。我在远程机器上工作，不知道是什么类型。

我的 python 代码似乎有效，是下面的代码。问题是我试图在屏幕上打印一些输出但没有任何反应。我已经尝试了 print 和 raw_input 但没有任何反应......你知道其他方法吗？

```
# Set up fields of reply message based on query
def prepareReply():
    global authorReply, authorReplyLen, localConvId, originConvId, blbContentAndUntUnz, linkName

    print "PLOP!"
    raw_input("blabla")

    #print "="*10 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-16T09:32:10.580

```
import sys
print "Hi!"
sys.stdout.flush() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T09:22:58.243

这是一个疯狂的猜测，但查看您评论中的措辞表明它可能是一个 Web 服务器应用程序（提示：有关您的环境的更多详细信息会有所帮助）。在这种情况下，stdout 可能会转到其他地方，至少不会转到浏览器。

您实际上是如何运行该代码的？您是在 shell 提示符下键入“python myprogram.py”，还是在浏览器中点击重新加载？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T09:27:56.923

要将标准输出重定向到您可以阅读的内容，在这种情况下是一个文件：

```
class PyLogger:

  def __init__(self, source):
    self.file_handle = open('Python_Log.txt', 'a')
    self.source=source
    self.buf = []

  def write(self, data):
    self.buf.append(data)
    if data.endswith('\n'):
      self.file_handle = open('Python_Log.txt', 'a')
      self.file_handle.write('\t' * indent_level)
      self.file_handle.write(self.source + "::" + ''.join(self.buf))
      self.file_handle.close()
      self.buf = []

  def __del__(self):
    if self.buf != []:
      self.file_handle = open('Python_Log.txt', 'a')
      self.file_handle.write('\t' * indent_level)
      self.file_handle.write(self.source + "::" + ''.join(self.buf) + '\n')
      self.file_handle.close()      
    self.file_handle.close()

import sys
sys.stdout = PyLogger('stdout')
sys.stderr = PyLogger('stderr') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-09-19T16:21:30.283

除了 Jori 对 sys.stdin 和 stdout 的重载之外，将 stdin 和 stdout 的原始值存储如下也是明智的：

```
import sys
savestreams = sys.stdin, sys.stdout
sys.stdout = PyLogger('stdout')
sys.stderr = PyLogger('stderr')
... 
...
...
sys.stdin, sys.stdout = savestreams 
```

另一种简单的方法是：

```
sys.stdout = sys.__stdout__
sys.stdin = sys.__stdin__ 
```

如果您不这样做，您可能会摸不着头脑，为什么您的打印功能不再向屏幕发送文本。

# vb.net - 如何将此 Linq 移植到 VS 2005

> ID：1000364
> 
> 赞同：0
> 
> 时间：2009-06-16T09:12:51.633
> 
> 标签：vb.net, linq, .net-2.0

我在VS2008中有以下代码

```
If Linq.Enumerable.Contains(Of String)(selectedUsersRoles, RoleCheckBox.Text) Then
    RoleCheckBox.Checked = True
Else
    RoleCheckBox.Checked = False
End If 
```

我在VS2005中需要上面的代码

在上面的代码中，我可以做什么来代替 linq？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T09:20:42.837

```
bool containsRole = false;
foreach(string entry in selectedUsersRoles)
{
  if(entry == RoleCheckBox.Text)
  {
    containsRole = true;
    break;
  }
}

RoleCheckBox.Checked = containsRole; 
```

代码是 C# 但我想你会明白的。这是针对 IEnumerable 的。如果您有列表，请尝试 Binary Worrier 的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T09:36:40.120

```
RoleCheckBox.Checked = False
For Each str As String in selectedUsersRoles
     If str = RoleCheckBox.Text Then
          RoleCheckBox.Checked = True
          Exit For
     End If
Next 
```

如果您不想更改 RoleCheckBox.Checked 两次（当实际找到 str 时），则声明一个带有初始 False 值的布尔标志（即 boolFound），找到时将其更改为 true，并在之后分配 RoleCheckBox.Checked = boolFound “for each”循环....

# mysql - 为什么 CakePHP 的查询结果中没有新的表格列？

> ID：1000365
> 
> 赞同：5
> 
> 时间：2009-06-16T09:12:57.483
> 
> 标签：mysql, cakephp

我已经在我的表 Attributes 中添加了一个新列，该列已经具有 (id , form_id(foreign key),type,label,size,sequence no,instr) 其中 instr 是我添加的新列。

我的应用程序在 CakePHP 和 MySQL 中。

我已经使用以下代码插入到表 Attributes 中，但是单独的字段 instr 没有插入。

```
function saveFieldname($data)//from untitledfieldname
{   
    $this->data['Attribute']['form_id'] = $this->find(  'all', array(
                                                        'fields' => array('Form.id'),
                                                        'order' => 'Form.id DESC'
                                                     ));

    $this->data['Attribute']['form_id'] = $this->data['Attribute']['form_id'][0]['Form']['id'];

    $this->data['Attribute']['label'] = 'Label';
    $this->data['Attribute']['size'] ='50';
    $this->data['Attribute']['instr'] ='Fill';

    $this->data['Attribute']['type'] = $data['Attribute']['type'];
    $this->data['Attribute']['sequence_no'] = $data['Attribute']['sequence_no'];

    $this->Attribute->save($this->data);
} 
```

请建议我..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T09:34:25.727

有关表结构的信息可能已被缓存。删除“app/tmp/cache/models”的内容，再试一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T18:28:03.787

请注意，在开发过程中，app/config/core.php 中的调试级别通常设置为 > 1。这意味着您不应在开发过程中遇到问题，因为 Cake 不会缓存。但是，在生产中，core.php 中的 debug 设置为 0，从而导致 cake 开始缓存。

除此之外，我已经删除了 app/tmp/cache/models 中的缓存文件作为我的生产 CakePHP 应用程序中指定的 dhofstet 并且查找查询仍然没有抓住我的新专栏。

--

除了清除模型缓存文件外，我还在生产站点上将调试级别设置为 2 并进行了页面刷新，然后将其设置回 0 并让它再次工作。我知道这是一种丑陋的方法，但是当没有其他方法有效时，它为我修复了它。

# c# - 将“导出到 XML”添加到动态数据站点

> ID：1000369
> 
> 赞同：0
> 
> 时间：2009-06-16T09:14:10.213
> 
> 标签：c#, asp.net, dynamic-data-site

我正在为复杂的 Web 应用程序开发业务层，并且正在临时使用动态数据站点功能来允许将数据输入到我需要维护的许多表中。我不想在这个 DDS 上花太多时间，因为业务层需要先完成。一旦业务层完成，它就会被运送给其他人以添加更好的用户界面。

然而，虽然 DDS 以一种非常简单的方式提供了很多功能，但我只想通过“导出到 XML”按钮或链接来扩展它。（稍后我可能会添加一个“导出到 Excel”按钮。）

那么，有没有人做过这样的事情呢？在 .NET 中实现这一点而不重写 DDS 的最简单方法是什么？

（我使用实体模型进行数据库连接，并且大部分业务层都建立在这个实体模型之上。一旦业务层完成，将为这个 Web 应用程序开发真正的 GUI 界面，但现在我只需要一个好方法输入/输出此数据。）

* * *

将实体集转换为 XML 没有问题。那是容易的部分。我的问题在于使用用户可以单击的附加按钮扩展“ListDetails.aspx”。单击后，它应该将数据集导出为 XML。有趣的是，如果用户设置了一个或多个过滤器，它应该只导出那些过滤的记录。我想我必须查看此页面上的“GridDataSource”对象并进行试验。它会返回整个表还是只返回过滤后的数据集？或者只是当前页面上的记录？

* * *

现在，通过导出，我只想将数据集转储到 XML。基本上，您看到的内容应该最终出现在最终的 XML 中。如果我可以访问过滤后的数据集，那么创建 XML 将很容易。（在此之上创建 Excel 工作表也是小菜一碟。）通常，导出只是用于帮助开发我正在处理的项目的业务层。大多数代码是业务逻辑，将在其他（Web/桌面）客户端应用程序中使用，但当项目仍在进行中时，需要 DDS 以便更轻松地为项目输入数据。一旦完成（我猜是从现在开始的数亿年），DDS 将不再被使用。我们也不会使用 XML 导出或导出表。但就目前而言，这些导出对于评估数据很有用。（因为我仍然需要开发更复杂的分析工具。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T07:49:23.687

也许你可以用[FileHelpers 做点什么](http://filehelpers.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T08:13:31.983

这很简单，您必须解决几个问题：

*   提供触发导出的方法
*   生成 XML
*   使 XML 可用（作为链接）以供下载 - 假设这是您想要做的。

有一个稍微不那么直接的替代方法是创建一个服务来生成和返回 XML。

就第一个而言 - 没有什么可以阻止您编辑母版页或默认页面以添加您自己的功能，即按钮或指向 XML 生成页面的链接。

就第二个而言 - Linq 使得从您的实体模型生成 XML 几乎是微不足道的。

一旦你得到了你的 XML，你就有了各种选择，这里的关键是你可以根据需要将自己的页面添加到站点中——动态数据中的魔力只是一个*起点，*而不是最终产品（尽管如果它确实如此）所有你需要的，然后你就可以带着微笑走开）。

我很欣赏这些是通用的答案，但它是一个相当通用的问题，更具体的页面将更好地解决实现的细节。

具体而言，我有一个需要生成 XML 的动态数据站点，第一次迭代只是默认页面上的一个按钮，将文件保存到磁盘（一个文件名，一种文件格式，单击，生成，保存，完成）。XML 的原因是作为另一个站点的源数据，因此我随后添加了一个 WCF 服务，该服务公开了相同的 XML。花费的总时间（让我了解 WCF 的时间少了一点）可能不到半天——其中大部分时间都花在了摆弄 XML 输出上。

# bash - 在 bash 中添加（收集）退出代码

> ID：1000370
> 
> 赞同：12
> 
> 时间：2009-06-16T09:14:28.353
> 
> 标签：bash, scripting, shell, exit-code

我需要依赖脚本中的几个单独的执行，并且不想将它们全部捆绑在一个丑陋的“if”语句中。我想使用退出代码“$？” 每次执行并添加它；最后，如果这个值超过阈值 - 我想执行一个命令。

伪代码：

```
ALLOWEDERROR=5

run_something
RESULT=$?
..other things..

run_something_else
RESULT=$RESULT + $?

if [ $RESULT -gt ALLOWEDERROR ] 
   then echo "Too many errors"
fi 
```

问题：即使 Internet 声称并非如此，bash 也拒绝处理 RESULT 和 $? 作为整数。什么是正确的语法？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-16T18:57:26.700

你可能想看看`trap`内置的，看看它是否有帮助：

```
help trap 
```

或者

```
man bash 
```

您可以为这样的错误设置陷阱：

```
#!/bin/bash

AllowedError=5

SomeErrorHandler () {
    (( errcount++ ))       # or (( errcount += $? ))
    if  (( errcount > $AllowedError ))
    then
        echo "Too many errors"
        exit $errcount
    fi
}

trap SomeErrorHandler ERR

for i in {1..6}
do
    false
    echo "Reached $i"     # "Reached 6" is never printed
done

echo "completed"          # this is never printed 
```

如果您像这样计算错误（并且仅当它们是错误时）而不是使用“ `$?`”，那么您不必担心返回值不是零或一。例如，单个返回值 127 会立即使您超过阈值。除了 之外，您还可`trap`以为其他信号注册 s `ERR`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-06-16T09:21:43.613

快速实验并深入了解 bash 信息 说：

```
declare -i RESULT=$RESULT + $? 
```

由于您要多次添加结果，因此可以在开始时使用声明，如下所示：

```
declare -i RESULT=0

true
RESULT+=$?
false
RESULT+=$?
false
RESULT+=$?

echo $RESULT
2 
```

看起来更干净。

`declare -i`表示变量是整数。

或者，您可以避免声明和使用算术表达式括号：

```
RESULT=$(($RESULT+$?)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T09:26:16.583

使用`$(( ... ))`构造。

```
$ cat st.sh
RESULT=0
true
RESULT=$(($RESULT + $?))
false
RESULT=$(($RESULT + $?))
false
RESULT=$(($RESULT + $?))
echo $RESULT
$ sh st.sh
2
$ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T10:04:14.340

有关如何在 Bash 中添加数字，另请参阅：

```
help let 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T19:18:37.930

如果您想在脚本中使用 ALLOWEDERROR，请在其前面加上 $，例如 $ALLOWEDERROR。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T09:55:48.803

正如 mouviciel 提到的那样，收集返回码的总和看起来相当没有意义。可能，您可以使用数组来累积非零结果代码并检查其长度。这种方法的示例如下：

```
#!/bin/sh

declare RESULT
declare index=0
declare ALLOWED_ERROR=1

function write_result {
    if [ $1 -gt 0 ]; then
        RESULT[index++]=$1
    fi
}

true
write_result $?

false
write_result $?

false
write_result $?

echo ${#RESULT[*]}
if [ ${#RESULT[*]} -gt $ALLOWEDERROR ] 
   then echo "Too many errors"
fi 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T09:30:09.617

以下是一些在 bash 或 sh 中执行加法的方法：

```
RESULT=`expr $RESULT + $?`
RESULT=`dc -e "$RESULT $? + pq"` 
```

其他一些仅在 bash 中：

```
RESULT=$((RESULT + $?))
RESULT=`bc <<< "$RESULT + $?"` 
```

无论如何，错误退出状态并不总是 1，并且它的值不依赖于错误级别，因此在一般情况下，根据阈值检查状态总和没有多大意义。

# php - PHP中的连续if

> ID：1000372
> 
> 赞同：0
> 
> 时间：2009-06-16T09:14:31.287
> 
> 标签：php, oop, switch-statement, if-statement

我现在在 PHP 中进行一些验证，并且正在运行分配条件语句，例如：

```
 if ($this->email->isValid($email))
return false;
if ($this->username->isValid($username))
return false; 
```

等等。。

有没有很好的方法来做到这一点？还是我只运行十个像上面那样的 If 语句？我显然不能使用`switch`，但我正在寻找那种类型的解决方案..

PS ..我正在使用 Zend Framework 进行验证

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T09:17:09.753

你可以像这样 OR 他们：

```
if(cond1||
   cond2||
   cond3||
   cond4)
{
  return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T10:58:48.753

做这样的事情被称为监护人条款。它可以改进，因此返回相同值的子句应该组合在一起。

```
if ($this->email->isValid($email) || $this->username->isValid($username))
{
    return false;
} 
```

或者像这样，如果有很多（顺便说一句，我如何格式化 if 只是为了让它更好地阅读，任何其他方式也应该没问题）

```
if (
    $this->email->isValid($email) || 
    $this->username->isValid($username) || 
    $this->somethingelse()
   )
{
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-05T11:41:10.313

做这样的事情：

```
$errlvl = 0;

if($errlvl == 0 && $this->email->isValid($email)){
    $errlvl++;
}

if($errlvl == 0 && $this->username->isValid($username)){
    $errlvl++;
}

// your validation list keeps going

if($errlvl > 0){
    return false;
} 
```

这将

1.  减少冗余，因为如果前面有错误，后面的就不会检查了。
2.  你可以继续添加到列表中
3.  如果您想知道发生了多少错误，可以在语句中删除 $errlvl == 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T12:30:17.930

我会让他们成为我班级的数据成员。显然在这里你必须有一个表单驱动的类。因此，例如，这里可以将电子邮件包装到一个类中，并在将它们作为成员变量的类的构造函数中进行初始化。现在电子邮件包装类将在初始化/构造时对电子邮件进行验证。

恕我直言，这看起来不那么混乱，您可以将任何验证或特定方法包装到电子邮件包装器类中。

我知道在某些情况下它可能是一把大锤。所以明智地选择！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T10:18:38.537

也许是这样的：

```
foreach( $form->getElements as $element => $value )
{ 
    if( !$element->isValid( sanitize($value))){
       return false;
    }
} 
```

但是，如果您使用的是 ZF，这是您的 oneliner 答案，因为您在一个而不是单个字段中检查所有表单：

```
$form = new My_Zend_Form(); // in the controller action that you send the form to

if ( $form->isValid($_POST)) {
    // Success /// do whatever you want with the data
    $data = $form->getValues();
} else {
    //error
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T09:17:35.773

如果这是来自表单的数据，请查看 Zend_Form，正如您[其他问题中的海报所推荐的那样](https://stackoverflow.com/questions/981094/recommendation-for-a-php-validation-framework/981113#981113)

我发布了一些[示例代码](http://pastebin.com/m3a0b3857)，详细说明了向表单元素添加验证器

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T09:17:49.503

只需确保将最明显的验证放在顶部，因此如果它失败，它会在运行每个语句之前跳闸。另外，我不喜欢没有大括号的 if 语句，但这只是一个见仁见智的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-16T09:18:04.353

```
if ($this->email->isValid($email) || 
    $this->username->isValid($username))
        return false; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-16T09:26:45.053

使用一些 var 总比多次返回好

如果这些是唯一的返回条件。我们不需要检查所有条件。像只检查真条件默认返回假，反之亦然。

$结果=假；//默认返回false。

if (cond1 || cond2) { //仅检查导致返回 true 的条件。:)

```
 $result = true; 
```

}

返回$结果；

干杯，

-拉特内什

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-08-05T14:58:19.313

将所有对象添加到数组并对其进行迭代（我猜你或 Zend 正在使用接口“验证器”或类似的东西，每个组件（用户名、电子邮件等）都实现了“isValid”方法）：

```
$validators = array();
$validators[] = $this->email;
$validators[] = $this->username;

foreach ($validators as $validator)
{
    if (!$validator->isValid())
    {
        return false;
    }
} 
```

# mysql - 为什么这个 MySQL 查询不起作用？

> ID：1000373
> 
> 赞同：2
> 
> 时间：2009-06-16T09:14:41.910
> 
> 标签：mysql

这两个查询有什么问题？

```
SELECT (DATE_ADD('2008-11-31',INTERVAL 365 DAY) + INTERVAL 0 DAY) as occursOn
Result:
(
    [0] => Array
        (
            [occursOn] => 
        )

) 
```

和：

```
SELECT (DATE_ADD('2008-11-31',INTERVAL 730 DAY) + INTERVAL 0 DAY) as occursOn
Result:
(
    [0] => Array
        (
            [occursOn] => 
        )

) 
```

可以看到，`occursOn`每次的返回值都是空白。

这些查询是动态生成的，因此`+INTERVAL 0 DAY`需要第二个并且不能消除。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-16T09:21:01.633

大概是因为`November`有`30`天？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T09:22:47.917

2008-11-31 第 11 个月（11 月）仅 30 天无效日期

# inversion-of-control - StructureMap：具有非字符串构造函数参数的 EqualToAppSetting

> ID：1000374
> 
> 赞同：3
> 
> 时间：2009-06-16T09:14:50.337
> 
> 标签：inversion-of-control, structuremap

给定

```
public class Blah : IBlah 
{
    public Blah(decimal argument)
    {
    }
} 
```

什么时候

```
ForRequestedType<IBlah>()
    .TheDefault.Is.OfConcreteType<Blah>()
    .WithCtorArg("argument")
    .EqualToAppSetting("argument_app_setting_key") 
```

然后 StructureMap 抛出以下异常

```
No Default Instance defined for PluginFamily System.Decimal 
```

有没有办法将 EqualToAppSetting 与非字符串参数一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T17:20:18.490

我不认为你可以用 EqualToAppSetting 方法做到这一点。您不能只引用 System.Configuration 并自己投射应用程序设置吗？像这样...

```
 ForRequestedType<IBlah>()
        .TheDefault.Is.OfConcreteType<Blah>()
        .WithCtorArg("blah")
        .EqualTo(Convert.ToDecimal(ConfigurationManager.AppSettings["argument_app_setting_key"])); 
```

# seo - 谷歌的片段中出现了一些不受欢迎的词，如何阅读？

> ID：1000383
> 
> 赞同：-2
> 
> 时间：2009-06-16T09:18:22.327
> 
> 标签：seo

我知道谷歌创建网站的标题和描述（或“片段”）主要来自 META 描述。然而，当我的一个网页出现时，有一些不受欢迎的词，比如价格（这根本不好）。我希望它显示的只是产品的描述，而不是它的价格。实际上整个页面只提到了两次价格。

这怎么可能发生？我该如何补救？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T16:12:22.637

对于大多数人来说，在代码段中包含价格实际上是非常可取的。如果您的价格高于竞争对手相同产品的价格，他们可能不想从您那里购买并查看其他结果。

为确保搜索引擎看不到价格（因此不在结果中显示），您应该使用 JavaScript。我认为即使是亚马逊也这样做是为了在某些情况下防止屏​​幕刮擦。它应该很容易，尤其是像 jQuery 这样的东西。

```
$('#priceForProduct987A').html("$125") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T09:35:32.523

您应该能够通过使用元标记来控制 google 显示的代码段： [http ://www.google.com/support/webmasters/bin/answer.py?hl=en&answer=79812](http://www.google.com/support/webmasters/bin/answer.py?hl=en&answer=79812)

但是，如果有人尝试对产品进行一些搜索，则在这种情况下 Google 显示的结果可能会有所不同。然后，Google 会认为您正在购买该产品并尝试显示其价格。这可能是你的情况。

# .net - MEF：标记接口用于导出

> ID：1000396
> 
> 赞同：4
> 
> 时间：2009-06-16T09:22:02.833
> 
> 标签：.net, mef

是否可以将接口标记为导出，以便所有派生类都可用于导入？

```
[Export( typeof( IMyInterface ) )]
public interface IMyInterface { ... }

[Import( typeof( IMyInterface ) )]
private readonly ICollection<IMyInterface> m_Concretes = new Collection<IPlugin>(); 
```

我不知道`IMyInterface`这个例子中实现了哪些类。这些类本身对 MEF 一无所知 - 并且不使用该`[Export]`属性。

只要我不标记每一堂课，`[Export]`它似乎对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T13:45:18.683

在当前预览中，您可以尝试在界面上放置一个 [PartExportsInherited] 属性（与 Export 属性一起）。不过，我不确定这是否适用于接口。

我们确实计划增加对将导出放在接口上的支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T02:31:44.760

是的，在 codeplex 的当前预览中，您可以使用 PartExportsInherited 和 Export 标记接口，以自动导出所有实现者。在即将发布的预览版中，我们可能会对其进行简化，以简单地放置一个属性，可能类似于 [InheritedExport]。

编辑：使用 MEF 预览版 6，现在可以通过在界面上放置 InheritedExport 属性来完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-23T09:46:47.153

更新：使用 MEF v4。

```
[InheritedExport(typeof(IMyInterface))]
public interface IMyInterface
{
} 
```

正如预期的那样，从 IMyInterface 继承的任何东西都将作为一个导出。

使用 [ImportMany] 将它们全部注入：

```
[ImportingConstructor]
public void MyClass([ImportMany] IEnumerable<IMyInterface> myDerivedObjects) 
```

# php - 使用 PHP 为各种文件格式生成缩略图

> ID：1000397
> 
> 赞同：1
> 
> 时间：2009-06-16T09:22:05.483
> 
> 标签：php, imagemagick, ghostscript

我有一个客户要求为他的客户提供上传设施，但在上传之后要创建一个图像缩略图。

所有正常图像都可以，但他在谈论 .psd、.pdf、.eps、.ppt

环顾四周，我认为 imagemagick 和 ghostscript 可以满足其中的大部分需求，但我找不到 PPT 或 EPS 的解决方案。

我希望 imagemagick 能够像 psd 一样做 eps。

关于 EPS 或 PPT 文件格式的任何建议。

如果您能提供建议，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-02T12:48:02.940

我参加我认识的聚会迟到了，但是...

这是我用于 .PDF、.EPS 和 .AI 缩略图的内容。（假设安装了所有必要的 ImageMagick 发行版）

```
$file = 'filename.pdf.eps.ai';

$cache = $_SERVER['DOCUMENT_ROOT'].'/cache/';//ensure dir is writeable

$ext = "jpg";//just the extension

$dest = $cache.$file.'.'.$ext;

if (file_exists($dest)){
    $img = new imagick();
    $img->readImage($dest);
    header( "Content-Type: image/jpg" );
    echo $img;
    exit;

 } else {

    $img = new imagick($_SERVER['DOCUMENT_ROOT'].'/'.$file.'[0]');
    $img->setImageFormat($ext);

    $width = $img->getImageheight();
    //$img->cropImage($width, $width, 0, 0);
    $img->scaleImage(105, 149, true);

    $img->writeImage($dest);

    header( "Content-Type: image/jpg" );
    echo $img;
    exit;
} 
```

不知道它为什么有效，但它确实有效 - 一个代码来统治他们好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T10:53:47.390

PPT是一个PowerPoint演示文稿。因此，创建一个 PPT 图像需要一些可以完成此操作的库。

这里有一些资源可以帮助您。

*   [即时生成 Powerpoint 文件](https://stackoverflow.com/questions/381445/asp-net-generate-powerpoint-file-on-the-fly)

EPS 是一种矢量格式，因此除非您将图像作为矢量对象，否则您将无法正确执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T17:44:24.680

您可以找到一些免费的图标集，并为所有 .ppt 文件使用默认图标，为所有 .eps 文件使用另一个图标。然后，您可以为所有无法转换为图像的文件格式（例如音频文件）进一步扩展此功能。不是完美的解决方案，但用户可能会觉得比仅仅拥有文本更舒服。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T11:30:25.973

只是一些想法 - 这些东西都没有经过我自己的测试。

**每股收益**：

您应该能够使用[ghostscript](http://pages.cs.wisc.edu/~ghost/doc/cvs/Ps2pdf.htm#Usage)将您的 EPS 转换为 PDF 。使用 imagemagick 和 ghostscript，您可以将 PDF 转换为某种位图格式（GIF、PNG 或 JPG）。

**PPT**：

这似乎有点复杂。如果您使用的是 Windows 计算机，则可以在一个小型手写转换器中使用 Powerpoint API。另一种可能性可能是使用 Apache [POI-HSLF](http://poi.apache.org/slideshow/index.html)，它是 Powerpoint 文件格式的 Java API。这将需要用于转换过程的 Java 程序。最后的手段可能是研究[Powerpoint 二进制文件格式](http://www.microsoft.com/interop/docs/OfficeBinaryFormats.mspx)，看看是否有嵌入的缩略图（可能是用于 Windows 资源管理器中的文件图标）可以提取。

# css - 什么是行高：1？

> ID：1000398
> 
> 赞同：40
> 
> 时间：2009-06-16T09:22:22.380
> 
> 标签：css

这是一个关于指定行高的问题。

我开始学习css。line-height：经常出现指定20px或单位的例子。有时是 line-height：有 1 和没有单位的东西，但这变成了什么样的含义？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-06-16T09:27:11.480

> 可能的值

**号码**：

设置将与当前字体大小相乘的数字以设置行之间的距离

**长度** ：

设置线之间的固定距离

**%** :

以当前字体大小的 % 设置行之间的距离

取自[http://www.w3schools.com/css/pr_dim_line-height.asp](http://www.w3schools.com/css/pr_dim_line-height.asp)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-16T09:27:25.270

似乎[`line-height`不需要单位（详细文章）](http://meyerweb.com/eric/thoughts/2006/02/08/unitless-line-heights/)。

> 属性 line-height 可以接受无单位的数值。您也可以提供 line-height 统一值，但通常不应该这样做。但是无单位的数字对于这个属性很好。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-21T19:31:28.543

另请注意：“1”不等于“正常” - 1 与字体大小完全相同，因此多行元素（如段落）中的行将相互紧贴，而正常添加行之间的预期间距。

使用字体速记：

```
font: font-style font-variant font-weight font-size/line-height font-family; 
```

如果未指定，则似乎将行高默认为正常。例如：

```
body{
    line-height:1; /* as seen in Eric Meyer's reset css */
}
p{
    font:normal normal normal 14px "Times New Roman", Times, serif;
} 
```

将导致所有段落具有正常的行高，覆盖正文的 1 集，而

```
p{
    font:normal normal normal 14px/1 "Times New Roman", Times, serif;
} 
```

将保留 1 的行高（在本例中为 14px）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-16T09:28:52.943

根据[w3schools](http://www.w3schools.com/css/pr_dim_line-height.asp)和[w3.org](http://www.w3.org/TR/CSS2/visudet.html#line-height) line-height:1；有效，含义如下： 设置一个数字，该数字将乘以当前字体大小以设置行之间的距离。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-16T09:27:28.407

如果没有提供单位，例如`"line-height: 1.5"`行之间的距离被设置为这个数字乘以当前字体大小。

1.5 x 字体大小

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-16T09:29:48.917

它是字体大小的倍数。来自 CSS 2.1 候选推荐：»属性的使用值是这个数字乘以元素的字体大小。«

# php - XML-RPC 与 PHP 和 GoDaddy？混乱开始

> ID：1000401
> 
> 赞同：1
> 
> 时间：2009-06-16T09:23:13.157
> 
> 标签：php, xml-rpc, fatal-error, shared-hosting

我正在尝试在 GoDaddy 服务器上通过 PHP 使用 XML-RPC。

同一台服务器正在托管一个使用 XML-RPC 并且正在运行的 Wordpress 博客，尽管这可能不相关......

每当我尝试使用任何集成到 PHP 中以与 XML-RPC 一起使用的函数时，我都会收到一个错误（此处的函数列表：http: [//us3.php.net/manual/en/ref.xmlrpc.php](http://us3.php.net/manual/en/ref.xmlrpc.php)），例如：

```
Fatal error: Class 'xmlrpc_client' not found 
```

这是因为我的服务器上没有启用 XML-RPC 的 PHP 功能吗？如果是这样，我该如何启用它们 - 看来我必须安装 XML-RPC 库才能这样做，当然我不能在共享服务器上这样做。Wordpress 不是使用同一批 XML-RPC 函数吗（它工作正常）？

我想我已经设法彻底混淆了自己。我对 XML-RPC 的经验为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T09:53:29.227

关于托管支持 XML-RPC 的站点的同一服务器，您提出的第一点很奇怪，因为 XML-RPC 在编译时启用。php.ini 文件中没有要使用的指令，因此您无法在运行时使用`ini_set()`. 这将指向不同的服务器或在同一服务器上运行的多个 PHP 实例。

无论哪种方式，您都需要在编译时启用此扩展，这是您无法控制的。因此，您必须联系 GoDaddy 的某个人才能使其正常工作。

另一种方法是查看[Zend_XmlRpc](http://framework.zend.com/manual/en/zend.xmlrpc.html)之类的东西，它得到很好的支持并且不需要 PHP XML-RPC 扩展来工作。

祝你好运。

# java - 在 XUL 中为 java 类（jar 文件）设置类路径，以通过 javascript 访问

> ID：1000403
> 
> 赞同：1
> 
> 时间：2009-06-16T09:23:50.910
> 
> 标签：java, javascript, classpath, xul

我正在使用 XUL 实现 Firefox 扩展。我有一组压缩为 jar 的 java 类，需要通过 javascript 访问。如果我将我的 jar 复制到 jre 的 lib/ext 中，那么 javascript 将能够调用我的 java 类。如果我从 ext 中删除并将这个 jar 打包到 xpi 中，Javascript 将无法找到我的 jar 文件的类路径。请让我知道如何在 XUL 环境中为我的 java 类（jar 文件）设置类路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T10:02:03.487

我建议看看这个扩展

[XQuery 使用我 1.4.7](https://addons.mozilla.org/en-US/firefox/addon/5515)

以及以下文章

[从 XUL 应用程序调用 java](http://stanislavvitvitskiy.blogspot.com/2009/04/calling-java-from-xul-applications.html)

[Firefox 扩展中的 Java](https://developer.mozilla.org/En/Java_in_Firefox_Extensions)

# linq - 完整的 LINQ 支持是什么意思？

> ID：1000409
> 
> 赞同：1
> 
> 时间：2009-06-16T09:25:46.320
> 
> 标签：linq

一些 O/RM 工具声称它们具有“完整的 LINQ 支持”。这意味着什么？他们支持所有的 LINQ 运算符吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T09:32:06.137

我认为“完全 Linq 支持”意味着您可以使用他们自己的 IQueryable 和 IQueryProvider 实现来针对他们的对象编写 linq 查询，并让它支持所有标准的 LINQ 扩展方法。

至少，我希望它支持所有的 LINQ 查询语法（来自.. where.. select.. group 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T09:29:02.117

我想这意味着它们支持 LINQ to SQL，而不仅仅是在集合对象上运行 LINQ 查询

# asp.net-mvc - 将简单的排序下拉列表绑定到 MVC 中的列表

> ID：1000424
> 
> 赞同：1
> 
> 时间：2009-06-16T09:27:49.687
> 
> 标签：asp.net-mvc, drop-down-menu, html-select, selectlistitem

我试图将 ASP.NET MVC 中的下拉列表绑定到一个类。幸运的是，这将是一个介于 1 和 10 之间的数字，但是我没有得到我期望的 HTML 输出。我已经在视图中设置了值和文本属性，但所选值拒绝呈现。这是在我的控制器的初始 Edit 方法中。有任何想法吗？

```
 Dim SC As SuperCategory = Model.Fast.Pull(DB.SuperCategory, ID)

    Dim list As New List(Of SelectListItem)
    list.Add(New SelectListItem With {.Value = 1, .Text = "1", .Selected = (.Value = SC.Sort)})
    list.Add(New SelectListItem With {.Value = 2, .Text = "2", .Selected = (.Value = SC.Sort)})
    list.Add(New SelectListItem With {.Value = 3, .Text = "3", .Selected = (.Value = SC.Sort)})
    list.Add(New SelectListItem With {.Value = 4, .Text = "4", .Selected = (.Value = SC.Sort)})
    list.Add(New SelectListItem With {.Value = 5, .Text = "5", .Selected = (.Value = SC.Sort)})
    list.Add(New SelectListItem With {.Value = 6, .Text = "6", .Selected = True})
    list.Add(New SelectListItem With {.Value = 7, .Text = "7", .Selected = (.Value = SC.Sort)})
    list.Add(New SelectListItem With {.Value = 8, .Text = "8", .Selected = (.Value = SC.Sort)})
    list.Add(New SelectListItem With {.Value = 9, .Text = "9", .Selected = (.Value = SC.Sort)})
    list.Add(New SelectListItem With {.Value = 10, .Text = "10", .Selected = (.Value = SC.Sort)})

    ViewData("Sort") = list 
```

视图中的 HTML 如下所示：

排序：<%=Html.DropDownList("Sort", CType(ViewData("Sort"), IEnumerable(Of SelectListItem)))%>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T11:26:17.527

如果`ViewData["Sort"]`实现`IEnumerable<SelectListItem>`，则不需要第二个参数。你试过这个吗？：

```
<%= Html.DropDownList("Sort") %> 
```

# iphone - iPhone SDK 相机错误：图像有时不保存？

> ID：1000429
> 
> 赞同：1
> 
> 时间：2009-06-16T09:29:11.553
> 
> 标签：iphone, iphone-sdk-3.0, camera

我查找了 iPhone SDK 的各种错误报告，但没有看到与此错误直接相关的任何内容。

我在设备上使用 UIImagePickerController 使用相机拍照。有时（通常是在手机运行了一段时间而没有重置之后），我拍照，然后选择“使用”——但我从 UIImagePickerController 的委托中返回了一个 nil 图像。一旦我重新启动手机，一切都会恢复正常一段时间，但似乎最终会再次发生。

对于使用 2.2.1、3.0 beta 和最终 SDK（及其相关 ROM 版本）编译的应用程序，此行为会出现在 iPhone 设备上。

有没有其他人遇到过这个错误，或者你能解释一下，或者提供这个问题的解决方案吗？

# php - 诺基亚 HTTP_REFERER 问题

> ID：1000443
> 
> 赞同：0
> 
> 时间：2009-06-16T09:32:26.370
> 
> 标签：php, mobile, nokia

我们正在使用 CodeIgniter PHP 框架开发移动应用程序。应用在多款硬件手机和模拟器上进行了测试。任何地方都可以正常工作 - 除了诺基亚 S40 内置浏览器。通过 thatbrowser 浏览时，它显示 $_SERVER['HTTP_REFERER'] 根本没有设置 - 即使使用没有框架的直接 PHP 也是如此。具体来说，应用程序在诺基亚 3500 Classic 和 6300 上进行了测试。此外，当在同一部手机上使用 Opera Mini 时，一切都像魅力一样。服务器是 Apache2 和 PHP5，CodeIgniter 1.7，但我不认为这是一个框架问题。

奇怪的是，世界上似乎只有少数人得到或提到了这个问题，却没有答案。好吧，问题是——我们错过了什么吗？诺基亚 S40 内置浏览器真的去掉了 HTTP_REFERER，还是服务器问题？可以做些什么来修复或减轻它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T10:01:41.113

任何浏览器都不需要发送推荐人。不要构建任何东西，假设您将从浏览器中获取它们；还有其他可以阻止其外观的东西（浏览器插件、安全软件等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T20:53:26.343

是的，HTTP_REFERER 是[可选](http://tech.groups.yahoo.com/group/wmlprogramming/message/20162)的http 标头。某些运营商或他的转码器（代理）正在删除 HTTP_REFERER 标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T10:03:53.933

为了使 HTTP_REFERER 存在，需要有一个 HTTP_REFERER 标头。如果有人直接输入 URL（即：不跟随指向页面的链接），则此标头不存在。它仅在有人单击另一个页面的链接时才存在。而且，有些浏览器不发送它们。

# python - 在 Windows 上使用 XAMPP 托管 Django

> ID：1000444
> 
> 赞同：14
> 
> 时间：2009-06-16T09:32:33.420
> 
> 标签：python, django, xampp

我可以在 Windows 上使用 XAMPP 运行 Django（Python 框架）基础站点吗？请指导我。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-06-16T11:56:55.093

[XAMPP](http://www.apachefriends.org/en/xampp.html) for windows 包含：Apache, MySQL, PHP + PEAR, Perl, `mod_php`, `mod_perl`, `mod_ssl`, OpenSSL, phpMyAdmin, Webalizer, Mercury Mail Transport System for Win32 and NetWare Systems v3.32, Ming, JpGraph, FileZilla FTP Server, mcrypt, eAccelerator, SQLite , 和 WEB-DAV + `mod_auth_mysql`.

缺少运行 django 有两个要求：

*   [Python](http://python.org)
*   [`mod_wsgi`](https://pypi.python.org/pypi/mod_wsgi)

所以，**不**，你**不能**单独使用 XAMPP 运行 django。您需要安装其他软件。

但是运行 django 非常容易。如果你只是想开发一个应用程序，你只需要python和django。Django 本身包含一个可用于开发的内部 Web 服务器。

如果你想在 Windows 上使用 django 作为生产服务器，你甚至不需要 apache web 服务器。你可以只安装：

*   [Python](http://python.org)
*   [樱桃小丸子](http://cherrypy.org)

这足以让一个好的 django 生产服务器启动并运行，因为cherrypy 的 web 服务器是用 python 编写的，并且非常适合为 django（或任何其他[wsgi](http://wsgi.org)兼容的）应用程序提供服务。如果您没有将 apache 用于其他任何事情，我认为此设置实际上更好更容易。您可以使用其他网络服务器来代替cherrypy。但是如果你真的想使用 apache，你还需要`mod_wsgi`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-11-29T20:41:48.550

The running django on xampp can be divided into two steps.

*   Step 1 : install wsgi and check if everything is OK
    *   follow the steps in the answer of this post - [Setting Python Path in Windows XAMPP using WSGI](https://stackoverflow.com/questions/3891996/setting-python-path-in-windows-xampp-using-wsgi)
*   Step 2 : install and run django
    *   run **easy_install django** to install django on PC
    *   test django
    *   follow the example in "[http://docs.djangoproject.com/en/dev/intro/tutorial01/](http://docs.djangoproject.com/en/dev/intro/tutorial01/)"
    *   I assume the generated django code is in **C:\xampp\htdocs\django\mysite**
    *   Make the mysite.wsgi in **C:\xampp\htdocs\wsgi\scripts**

### mysight.wsgi

```
import os
import sys    
mysite = r'C:/xampp/htdocs/django'
if mysite not in sys.path:sys.path.insert(0,mysite)
mysite = r'C:/xampp/htdocs/django/mysite'
if mysite not in sys.path:sys.path.insert(0,mysite)

os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

*   You can add *WSGIScriptAlias /mysite "C:/xampp/htdocs/wsgi/scripts/mysite.wsgi"* in wsgi.conf to run **[http://YOURSITE/mysite](http://YOURSITE/mysite)**, or you can just run **[http://YOURSITE/wsgi/mysite.wsgi](http://YOURSITE/wsgi/mysite.wsgi)**
*   Relaunch apache if necessary.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-16T10:31:19.073

我不确定你想要什么，所以这可能不是一个正确的答案。

如果您只想（为自己）运行一个开发服务器，使用 Django 框架提供的 Web 服务器会更容易。在书中阅读更多相关信息：http: [//www.djangobook.com/en/2.0/chapter02/](http://www.djangobook.com/en/2.0/chapter02/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-08-04T07:00:40.597

您可能想签[出 DjangoStack](http://bitnami.org/stack/djangostack)。它类似于 XAMPP，它是免费的、多平台的和自包含的，但它默认安装了 Django。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T14:03:56.493

是的，你可以，但首先你必须安装 Python 和 mod_python。请参阅[此常见问题解答](http://www.apachefriends.org/en/faq-xampp-windows.html#addons)。

然而，出于开发目的，使用内置的 Django 开发服务器要容易得多。这将更容易使用和设置以帮助您入门。

# language-agnostic - 类事务的编程风格或明智的异常处理

> ID：1000445
> 
> 赞同：2
> 
> 时间：2009-06-16T09:32:36.493
> 
> 标签：language-agnostic, architecture, exception-handling

## 通过抽象示例提问

假设您有 2 个方法：`DoJob1()`, `DoJob2()`. 它们中的每一个都具有类似事务的行为，即要么完成其工作，要么报告错误。

我应该如何编写一个执行`DoJob1()`then的方法，但它本身类似于事务，即保证在处理时发生错误时`DoJob2()`回滚所执行的操作？`DoJob1()``DoJob2()`

当然，你可以自由选择错误处理的方式（bool 返回值、真正的异常、全局错误变量——你随便说）。

## 背景

这个想法是编写（一些）类似事务的方法。并且当发生异常时，建议用户重复“事务”。

我对解决问题的可能方法有一个想法，我将在一段时间后发布；（为了不限制你的想象力）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T09:44:16.533

一般来说，我会：

```
transactionalJob1()
    transaction_begin()
    doJob1()
    transaction_end()
    exception:
        log
        transaction_rollback()

transactionalJob2()
    transaction_begin()
    doJob2()
    transaction_end()
    exception:
        log
        transaction_rollback()

transactionalJob1And2()
    transaction_begin()
    doJob1()
    doJob2()
    transaction_end()
    exception:
        transaction_rollback() 
```

如果您选择的语言支持模板方法，则可以将其全部包装起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-23T20:37:31.203

我采用的第二种方法只是在一个单独的类中记录回滚操作。

```
class Transaction
{
    IList<Action> _rollBacks = new List<Action>();

    public void AddRollBack(Action action)
    {
        _rollBacks.Add(action);
    }

    public void Clear()
    {
        _rollBacks.Clear();
    }
    public void RollBack()
    {
        for (int i = _rollBacks.Count - 1; i >= 0; --i)
        {
            _rollBacks[i]();
            _rollBacks.RemoveAt(i);
        }
    }
} 
```

实际代码是成对编写的，例如：

```
File.Move(file, file + "__");
string s = (string) file.Clone();
tr.AddRollBack(() => File.Move(s + "__", s)); 
```

当我需要做一些*事务性*的事情时，我会创建一个事务对象，并将敏感代码覆盖到`try ... catch ... finally`

```
Transaction tr = new Transaction();

UpdateLogic ul = new UpdateLogic();
ul.Transaction = tr;

// ........ more initialization (of classes)

try
{
    // .... more initialization, which is a part of transaction
    ul.DoPreparation();
    ul.DoCopying();

    tr.Clear();                         // at this point most of update is ok

    ul.DoCleanup();

    ShowMessage("Update completed", "Update completed successfully.", false);
}
catch (Exception ex)
{
    // handel error
}
finally
{
    // show message in UI
    try
    {
        tr.RollBack();
    }
    catch (Exception ex)
    {
        ShowMessage("Error while performing rollback of actions", ex.Message, true);
    }

    // ... update is done        
} 
```

这非常方便，因为这样可以保证文件的完整性。通过明智的编码，即使进程在执行操作或回滚之间被终止（但在文件系统中留下一些垃圾），也可以保持完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T22:39:39.667

## 我的想法

我有相同的想法。

这是一种测试方法（C#）：

```
class Program
{
    Random rnd = new Random();

    void DoJob1()
    {
        if (rnd.NextDouble() <= 0.5)
            throw new ArgumentException("First case");

        Console.WriteLine("First job done.");
    }

    void DoJob1Rollback()
    {
        Console.WriteLine("First job rollback.");
    }

    void DoJob2()
    {
        if (rnd.NextDouble() <= 0.5)
            throw new ArgumentException("Second case");

        Console.WriteLine("Second job done.");
    }

    void DoJob2Rollback()
    {
        Console.WriteLine("Second job rollback.");
    }

    void Run()
    {
        bool success = false;

        while (true)
        {
            try
            {
                TransactHelper.DoTransaction(
                    DoJob1,
                    DoJob2
                );
                success = true;
            }
            catch (Exception ex)
            {
                Console.WriteLine("--------------------------------------");
                Console.WriteLine("Exception: " + ex.Message);
                // Console.WriteLine("Stack trace:");
                // Console.WriteLine(ex.StackTrace);
                // Console.WriteLine();
            }

            if (!success)
            {
                // ask the user for another chance
                Console.Write("Retry? ");
                if (Console.ReadLine().ToLower() != "yes")
                    break;
            }
            else
                break;
        }

        Console.WriteLine("Batch job {0}", success ? "succeeded." : "did not succeed.");

        Console.WriteLine("Press Enter to exit.");
        Console.ReadLine();
    }

    static void Main(string[] args)
    {
        (new Program()).Run();
    }
} 
```

这看起来和运行 TransactHelper.DoTransaction 一样好

```
class TransactHelper
{
    public static void DoTransaction(params ThreadStart[] actions)
    {
        int i = 0;
        int n = actions.Length;

        // exception to pass on
        Exception ret_ex = null;

        // do the list of jobs
        for (; i < n; ++i)
        {
            try
            {
                ThreadStart ts = actions[i];
                ts();
            }
            catch (Exception ex)    // register exception
            {
                ret_ex = ex;
                break;
            }
        }

        if (ret_ex != null)         // exception registered, rollback what's done
        {
            int k = i;              // method which failed
            for (; i >= 0; --i)
            {
                MethodInfo mi = actions[i].Method;
                string RollbackName = mi.Name + "Rollback";

                // set binding flags - the same as the method being called
                BindingFlags flags = (mi.IsStatic) ? BindingFlags.Static : BindingFlags.Instance;
                if (mi.IsPrivate)
                    flags |= BindingFlags.NonPublic;
                if (mi.IsPublic)
                    flags |= BindingFlags.Public;

                // call rollback
                MethodInfo miRollback = mi.DeclaringType.GetMethod(RollbackName, flags);
                miRollback.Invoke(actions[i].Target, new object[] { });
            }

            throw new TransactionException("Transaction failed on method " + actions[k].Method.Name, ret_ex);
        }
    }
}

[global::System.Serializable]
public class TransactionException : Exception
{
    public TransactionException() { }
    public TransactionException(string message) : base(message) { }
    public TransactionException(string message, Exception inner) : base(message, inner) { }
    protected TransactionException(
      System.Runtime.Serialization.SerializationInfo info,
      System.Runtime.Serialization.StreamingContext context)
        : base(info, context) { }
} 
```

但是，也有一些陷阱。

*   通过保持两种方法而不是一种方法来增加痛苦
*   如果 xRollback 方法中发生异常怎么办？（但是，它与在 catch{} 块中发生的情况相同）
*   （目前的设计只运行没有参数的方法——这很容易扩展）

当我在一个产生大量代码的团队中工作时，我最初考虑过这个问题，例如：

```
_field = new Field();
_field.A = 1;
_filed.B = "xxx"; 
```

代替

```
Field tmp = new Field();
tmp.A = 1;
tmp.B = "xxx";

_field = tmp; 
```

交易的美妙之处在于：

*   数据的完整性 （！）
*   您可以建议用户重复操作

## 附言

也许我正在尝试重新发明轮子？有没有更明智的方法的图书馆？我没有预见到这种设计的陷阱是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-23T20:57:22.223

这取决于该方法应该做什么样的工作。通常，首先将事务的副作用存储到一个临时位置，然后在事务提交时，将副作用存储到一个原子操作中的永久位置。如何做到这一点的细节非常不同，具体取决于您是否正在修改文件系统中的某些内容（从一些书籍中了解数据库事务日志的工作方式）、某些内存数据结构、网络上的某些内容或其他内容。

例如，我曾经编写过一个事务性内存键值数据库（[http://dimdwarf.sourceforge.net/](http://dimdwarf.sourceforge.net/)的一部分）。它保留在事务期间完成的所有修改的临时列表。然后当事务提交时，修改后的keys被锁定在数据库中，修改后的内容存储在数据库中（这个操作一定不能失败），之后keys被解锁。一次只能提交一个事务，在该事务完全提交之前，其他事务不能看到更改。

# python - list() 在 Google App Engine 中不起作用？

> ID：1000448
> 
> 赞同：0
> 
> 时间：2009-06-16T09:33:18.193
> 
> 标签：python, django, google-app-engine

我正在尝试在 App Engine 中使用 set 函数来准备一个包含独特元素的列表。当我编写一个在 Python Shell 中运行良好但在 App Engine + Django 中运行良好的 Python 代码时遇到了障碍

这就是我打算做的（在 IDLE 中运行这个脚本）：

```
import re
value='   r.dushaynth@gmail.com, dash@ben,,  , abc@ac.com.edu    '
value = value.lower()
value = list(set(re.split('^\s*|\s*,+\s*|\s*$', value)))
if (value[0] == ''):
    value.remove('')
print value 
```

所需的输出是（在 IDLE 中得到这个输出）：

```
['dash@ben', 'abc@ac.com.edu', 'r.dushaynth@gmail.com'] 
```

现在，当我在 App Engine 中的 views.py 文件中执行等效操作时：

```
import os
import re
import django
from django.http import HttpResponse
from django.shortcuts import render_to_response # host of other imports also there
def add(request):

    value='   r.dushaynth@gmail.com, dash@ben,,  , abc@ac.com.edu    '
    value = value.lower()
    value = list(set(re.split('^\s*|\s*,+\s*|\s*$', value)))
    if (value[0] == ''):
        value.remove('')

    return render_to_response('sc-actonform.html', {
        'value': value,
    }) 
```

转到相应页面时出现此错误（粘贴回溯）：

```
Traceback (most recent call last):
File "G:\Dhushyanth\Google\google_appengine\lib\django\django\core\handlers\base.py" in get_response
  77\. response = callback(request, *callback_args, **callback_kwargs)
File "G:\Dhushyanth\development\AppengineProjects\trunk_sanjhachoolha\sandbox\dushyanth\sanjhachoolha\views.py" in add
  148\. value = list(set(re.split('^\s*|\s*,+\s*|\s*$', value)))
File "G:\Dhushyanth\development\AppengineProjects\trunk_sanjhachoolha\sandbox\dushyanth\sanjhachoolha\views.py" in list
  208\. return respond(request, None, 'sc-base', {'content': responseText})
File "G:\Dhushyanth\development\AppengineProjects\trunk_sanjhachoolha\sandbox\dushyanth\sanjhachoolha\views.py" in respond
  115\. params['sign_in'] = users.create_login_url(request.path)

  AttributeError at /sanjhachoolha/acton/add
  'set' object has no attribute 'path' 
```

关于评论：

```
#value = list(set(re.split('^\s*|\s*,+\s*|\s*$', value))) 
```

我在相应的网页中获得了所需的输出：

```
r.dushaynth@gmail.com, dash@ben,, , abc@ac.com.edu 
```

我确信 list() 是我麻烦的根源。任何人都可以提出为什么会这样。还请提出替代方案。目的是从列表中删除重复项。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-16T09:51:11.493

好像您实现了自己的 list() 函数。它的`return`语句应该在文件 (views.py) 的第 208 行。您应该将您的`list()`函数重命名为其他名称（甚至`list_()`）。

编辑：你也可以改变你的正则表达式，像这样：

```
import re
value='   r.dushaynth@gmail.com, dash@ben,,  , abc@ac.com.edu    '
value = value.lower()

#value = list(set(re.split('^\s*|\s*,+\s*|\s*$', value)))
#if (value[0] == ''):
#    value.remove('')

value = set(re.findall(r'[\w\d\.\-_]+@[\w\d\.\-_]+', value))

print value 
```

`re.findall()`返回`list`所有匹配事件的 a。

# c - 关于指针的知识有多重要？

> ID：1000450
> 
> 赞同：-1
> 
> 时间：2009-06-16T09:33:26.523
> 
> 标签：c, pointers

我在指针方面很薄弱，将其归咎于无法获得一些好书..在用 c 设计编译器时，对指针有很好的了解有多重要？...有什么好书吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-16T09:34:52.837

从 1 到 10，大约是 12。它是语言的重要组成部分，也是编译器更重要的部分。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-06-16T09:36:55.673

尤其是在使用 C（或 C++）时，完全理解指针是非常非常重要的。很多事情都归结为操作指针和内存，并且在 C 编译器开发过程中可能会出现很多与指针相关的“技巧”。
“好书”并不能真正帮助您，它只是一个您需要了解的概念。
谷歌在网上寻找指针教程，并通过它们直到它点击。例如： [http ://home.netcom.com/~tjensen/ptr/pointers.htm](http://home.netcom.com/~tjensen/ptr/pointers.htm)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-06-16T09:34:26.693

这是至关重要的。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-06-16T09:35:15.583

这是非常基本的。如果您不知道这一点，那么您离用 C 编写编译器还很远，因为这完全是关于动态结构（树）以及对它们的操作。

解析通常会产生一棵树，该树有时会在语义分析后转换为另一棵树，然后修改（例如优化），然后写出更线性的格式（IL 或比标签组装器高出一步的东西）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-16T09:40:47.600

编译器编写者需要了解指针，因为她或他将设计一台机器以将高级语言（如 c、pascal 或 perl）转换为汇编代码或机器代码。

不了解指针就无法编写汇编代码，这是不可能的，除非您永远不想拥有对象或全局变量或通过引用传递或与操作系统交互以打开文件读取或写入显示缓冲区。

对于编译器的用户来说，所有这些都是方便的东西。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-16T09:37:57.870

这是非常重要的。我在没有任何知识的情况下开始开发（C、C++ 和现在的 Objective-C），当然也没有耐心阅读指针。与他们一起工作让我了解了基础知识，但仅此而已。

起初它并没有引起任何真正的问题，虽然我的程序很简单，但从长远来看，当我的程序变得更加复杂并且我的工作更加重要（即：其他人依赖它们）时，我对指针的了解不足赶上了我，我不得不重写和重新理解我的大部分代码..这是痛苦的现实，也是我不关心在低级编程中如此重要的事情的后果..

还要对垃圾收集或保留计数（malloc、dealloc、new 等）有很好的理解。在正确的时间释放和创建对象也非常非常重要，并且与指针密切相关。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-16T09:37:50.460

即使程序员在现代托管代码语言中并没有大量使用指针，它们仍然在编译器中使用，并且可以帮助程序员生成更好、更快、更稳定的程序。

作为一个例子，我不知道如何解释为什么在连接大量字符串而不说单词指针时应该使用 StringBuilder 而不是字符串:)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-16T09:38:44.907

在 C? 字符串表示为指针（指向以 null 结尾的序列）。几个标准库函数采用指向其他函数的指针 ( [`qsort`](http://www.opengroup.org/onlinepubs/009695399/functions/qsort.html))。没有必要编写自己的链表或二叉树实现，但是那里的每个人都会使用指针，并希望您理解它们。

此外，如果你想把东西放在堆栈以外的地方，你需要使用指针。通常，您将打开文件并取回一个“文件指针”，它是您作为指针与之交互的结构。

然后，如果您打算编译一种本身具有指针的语言，...

总的来说，这是你不能没有的东西。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-16T09:39:52.110

为了在 C 中成功编程，您确实必须掌握指针。没有它们，您将无法正确处理内存管理、实现最先进的数据结构和几乎任何其他资源管理。您在处理数组时也会遇到问题（因为它们可以并且在某些情况下会降级为指针），所以恐怕您必须学习如何正确使用它们。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-16T09:39:41.627

在 C 中，您总是以一种或另一种方式处理指针。不使用它们几乎是不可能的，性能方面非常重要。所以基本上要开发快速、安全和可读的代码，你应该让自己熟悉这个主题。那里有很多好书...让我看看...我真的很喜欢“C Unleashed”，但是那里有很多[很好](http://www.augustcouncil.com/~tgibson/tutorial/ptr.html)[的](http://boredzo.org/pointers/) [教程](http://publications.gbdirect.co.uk/c_book/chapter5/pointers.html) 。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-16T11:44:21.377

如果您开始使用 C/C++ 编写，那么您应该首先了解，否则使用 C 编写将是一件可怕的事情。学习如何通过指针向函数传递指针和数据，如何使用指针调试程序以及学习指针的数学。如果你能很好地了解这一点，你以后就不会遇到很多问题

# c# - 卡在 C# 中的 BinaryExpression

> ID：1000451
> 
> 赞同：3
> 
> 时间：2009-06-16T09:33:35.023
> 
> 标签：c#, expression-trees

我要实施

```
Expression<Func<int, int, int>> Max = (p1,p2) => p1 > p2 ? p1:p2; 
```

作为表达式树并尝试过

```
ParameterExpression LeftEx = Expression.Parameter(typeof(int), "p1");
ParameterExpression RightEx = Expression.Parameter(typeof(int), "p2");
BinaryExpression GroesserAls =  Expression.GreaterThan(LeftEx, RightEx);
ConditionalExpression Cond = BinaryExpression.Condition(GroesserAls, LeftEx, RightEx);
Expression main = Cond.Test;
Expression<Func<int, int, bool>> Lam = Expression.Lambda<Func<int, int, bool>>(main,
  new ParameterExpression[] { LeftEx, RightEx });
Console.WriteLine(Lam.Compile().Invoke(333, 1200)); 
```

使用 Cond 我要么得到真/假，但不能得到 Condition 应该返回的 LeftEx 或 RightEx。

我在文档中找不到任何内容。

彼得

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-16T09:37:00.680

我想你只需要：

```
Expression<Func<int, int, int>> Lam =
    Expression.Lambda<Func<int, int, int>>(Cond, // <=== HERE
        new ParameterExpression[] { LeftEx, RightEx }); 
```

编辑 - 顺便说一句 -`var`你的朋友在这里：

```
 var p1 = Expression.Parameter(typeof(int), "p1");
    var p2 = Expression.Parameter(typeof(int), "p2");
    var body = Expression.Condition(Expression.GreaterThan(p1, p2), p1, p2);
    var lambda = Expression.Lambda<Func<int, int, int>>(body, p1, p2);
    var func = lambda.Compile();
    Console.WriteLine(func(333,1200));
    Console.WriteLine(func(1200,333)); 
```

# asp.net - safari 浏览器无法处理基于 cookie 的 asp.net 会话

> ID：1000462
> 
> 赞同：4
> 
> 时间：2009-06-16T09:36:21.477
> 
> 标签：asp.net, safari

任何想法为什么我的 SESSION 代码适用于 IE+Firefox+chrome 但在 safari 中失败..

page1.aspx 有代码：

```
 Session("sessioncreated") = Now.Ticks 
```

page2.aspx : 问题就在这里（当用户来到 page2 时:)

```
If Session("sessioncreated") Is Nothing Then
  ' critical error - SAFARI comes here, data is lost

else
  ' all other browsers come here OK
end if 
```

如何进一步调试？

我的 web.config 没有什么特别的 - 我只使用默认值进行会话处理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-04-26T00:52:18.680

您的重定向导致 safari 将 cookie 视为第三方 cookie，并且 Safari 不允许在 IFrame 内使用第三方 cookie（现在每个 facebook 应用程序都在 IFrame 内）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T09:48:38.037

您是否在 Safari 上启用了 cookie？[此外，如果您在主机名上有下划线（例如http://ex_ample/mysite](http://ex_ample/mysite) - [source](http://www.ruby-forum.com/topic/151965)）
，Safari 似乎不会接受 cookie 。

# mysql - 帮我解决这个 MySql 游标代码

> ID：1000466
> 
> 赞同：1
> 
> 时间：2009-06-16T09:37:07.653
> 
> 标签：mysql, stored-procedures, cursor, fetch

尝试从 MSSQL 迁移到 MySQL。此存储过程正在为永久表中的某些列创建临时表，然后使用游标用随机数更新每条记录的 RandNum 列并选择数据集。在我写这篇文章时，我认为我可以绕过光标，然后......

```
SELECT Id, Title, DateStart, Rand() FROM cms_News; 
```

但我不想改变任何过于激烈的东西，因为现在我只是想转换数据库。我稍后会回去优化这些东西。这是 SP：**编辑：**我从这个示例中删除了所有与错误无关的代码。另外，我今天在网上看到了[这个](http://forums.mysql.com/read.php?102,238983,238983)，看来我不是唯一一个遇到这个问题的人。MySQL 不喜欢我的游标声明的语法。有任何想法吗？

```
DELIMITER ;//

DROP PROCEDURE IF EXISTS `cms_NewsSelectMainPageNews`;//
CREATE PROCEDURE `cms_NewsSelectMainPageNews`
()
BEGIN
  CREATE TEMPORARY TABLE tempNews
  (
    Id int NOT NULL, 
    Title nvarchar(250),
    DateStart datetime,
    RandNum float NULL
  );

  DECLARE Randomizer CURSOR
      FOR SELECT Id FROM tempNews;
END;// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T09:42:24.913

```
 REPEAT
    FETCH Randomizer INTO cursor_id;
    IF NOT done THEN
      UPDATE tempNews SET RandNum = rand();
       WHERE id = @cursor_id;
    END IF;
  UNTIL done END REPEAT; 
```

您正在使用未初始化的会话变量`@cursor_id`而不是过程声明的变量`cursor_id`

改写如下：

```
 REPEAT
    FETCH Randomizer INTO cursor_id;
    IF NOT done THEN
      UPDATE tempNews SET RandNum = rand();
       WHERE id = cursor_id;
    END IF;
  UNTIL done END REPEAT; 
```

甚至更好，就像您最初建议的那样，完全摆脱您的临时表。

* * *

至于这个说法：

> 但我不想改变任何过于激烈的东西，因为现在我只是想转换数据库。我稍后会回去优化这些东西。

`SQL Server`并且`MySQL`是*截然不同*的平台。

当你决定切换时，你已经改变了一切。

在大多数情况下，您不能只是复制旧代码并将其锤击到`MySQL`.

它可能会`SQL Server`在`MySQL`.

我要做的是获取你的每一段代码，并确保它产生与旧代码相同的*结果*，使用尽可能简单和可预测的*方法。*

在您的情况下，`@cursor_id`变量可以在代码的早期初始化，并且它的值可以被存储过程使用，这会导致任何类型的意外行为。

这是因为在`SQL Server`变量中具有批处理范围，而在`MySQL`它们中具有会话范围。

# user-interface - NSIS 的默认和 sdbarker_tiny GUI

> ID：1000467
> 
> 赞同：0
> 
> 时间：2009-06-16T09:37:30.023
> 
> 标签：user-interface, nsis

我正在尝试修改和调整 default.exe 的窗口，您可以在 NSIS 的 Contrib/UI 子文件夹中找到它。但是，在保存对它的修改后，我无法在安装程序的 GUI 中看到更改。

我尝试删除 default.exe 只是为了发现它不是 NSIS 在您不使用 MUI 时使用的默认 GUI。我的第一个问题是，我在哪里可以找到 NSIS 的默认 GUI？

无论如何，有一个更小的 GUI，名为 sdbarker_tiny.exe。我的第二个问题是，您如何在安装程序中使用它？

请帮忙。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T12:39:58.877

default.exe与默认 UI*相同*，但真正的默认 UI 嵌入在 Stubs 子目录的 exeheaders 中。

要更改页面或所有 UI，请使用 ChangeUI。

例如：ChangeUI all "${NSISDIR}\Contrib\UIs\sdbarker_tiny.exe"

# email - 在哪里可以得到英国手机到电子邮件网关

> ID：1000468
> 
> 赞同：0
> 
> 时间：2009-06-16T09:37:32.257
> 
> 标签：email, sms, gateway

我需要的是： - 英国的 3-5 个电话号码，可能在不同的网络上 - 用信用卡为手机充电 - 这些号码收到的短信会通过电子邮件发送给我（一个接一个） - 需要使用高级短信，即您作为收件人支付的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T09:39:58.303

[Clickatell](http://www.clickatell.com/)是此类服务最常被推荐的提供商之一。他们还提供了大量的开发人员支持，API 和代码示例几乎涵盖了所有需求。

但是，如果您打算货比三家，请注意：SMS 网关是一个棘手的领域——SMS 的成本、规则和服务质量因国家而异，而且有很多小型中间商转售 SMS 网关服务，其中一些是声名狼藉的垃圾邮件发送者。

如果您在 StackOverflow 中搜索 SMS，您应该会看到许多类似/重叠的问题有更多详细信息，并讨论不同提供商的优缺点：

*   [通过 Web 应用程序接收 SMS 消息](https://stackoverflow.com/questions/526046/receive-sms-messages-by-web-application)
*   [发送和接收短信到 PHP 脚本？](https://stackoverflow.com/questions/410022/send-and-receive-smss-to-a-php-script)
*   [https://stackoverflow.com/questions/238579/free-sms-api](https://stackoverflow.com/questions/238579/free-sms-api)（注意接受的答案）
*   [在 .NET 应用程序中接收 SMS 消息](https://stackoverflow.com/questions/388657/receiving-a-sms-message-in-a-net-application)

# c++ - 可以禁用使用 SetWindowsHookEx 运行时制作的挂钩吗？

> ID：1000472
> 
> 赞同：5
> 
> 时间：2009-06-16T09:38:02.783
> 
> 标签：c++, windows, hook

如果一个名为 SetWindowsHookEx 的应用程序（例如我的，或在外部进程中），我可以解开挂钩吗？请记住，不是我把钩子放在首位，所以我没有任何变量或指向原始钩子的指针。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T09:55:00.677

不，没有。

回到过去（NT 之前的时代），您可能已经使用您获得的 HHOOK 玩了一些游戏，因为返回的HHOOK 是要调用[的钩子链中的一个链接。](http://blogs.msdn.com/oldnewthing/archive/2006/08/09/693280.aspx)即使那样，我也不确定这是否可能。

今天，Windows 不会将链中下一个钩子的调用委托给您（因此不推荐使用[CallNextHookEx](http://msdn.microsoft.com/en-us/library/ms644974(VS.85).aspx)的参数），并且 HHOOK 不会让您接触到您不再注册的钩子。

* * *

更准确地说，没有**好的和受支持**的方法可以做到这一点。
您可以安装一个 rootkit，深入研究 Windows 内部结构并通过这种方式找到钩子链；但这显然是荒谬和危险的。

挂钩（通过那里的无数 API 挂钩解决方案之一，[Detours](http://research.microsoft.com/en-us/projects/detours/)似乎很受欢迎）[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx)和[CallNextHookEx](http://msdn.microsoft.com/en-us/library/ms644974.aspx)可以为您提供符合 pre-NT 约定的应用程序的大部分方式。要点是在调用 SetWindowsHookEx 后立即解开新的钩子，解开任何传递的钩子（不是你自己的）到 CallNextHookEx。为了保证一个“干净”的应用程序，您还必须模拟一些事件来强制调用任何已调用的钩子，以便它们可以被取消钩子。此外，一旦您遇到在过去 8 年以上编写的任何将 NULL 传递给 CallNextHookEx 的应用程序，此机制就会失败。

因此，即使从*技术上*来说（可能）解开您的应用程序未注册的 HHOOK，您最好还是尝试以一种不同的、不那么可怕的脆弱方式来完成您正在做的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T09:51:00.840

我不认为你可以。**您需要使用SetWindowsHookEx()**注册的挂钩的句柄，以便您可以使用**UnhookWindowsHookEx()取消挂钩**

嗯，顺便说一句，如果您可以在注册任何其他挂钩之前（即在应用程序启动期间）以某种方式创建自己的挂钩，您可以在该挂钩中选择不调用**CallNextHookEx()**从而防止调用后续挂钩。可能值得一试。我怀疑这可能不适用于所有类型的钩子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T12:38:36.117

实际上，我想我发现是的，这是可能的。Hooking CallNextHook 会给你钩子的钩子 id，你可以用它来解钩。

# ruby-on-rails - 在 Rails 中，如何更新模型中的表单字段？

> ID：1000482
> 
> 赞同：0
> 
> 时间：2009-06-16T09:40:02.827
> 
> 标签：ruby-on-rails, forms, model

假设我想将我指定的所有字段设置为 = "frog"

在模型中，我可以使用以下方法手动设置每个：

```
self.field1 = 'frog'
self.desc_field = 'frog'
self.fieldx = 'frog'
etc.... 
```

但是如何通过将字段名称放入数组中来做到这一点？

当我尝试

```
fields_array=['field1','desc_field','fieldx']    
fields_array.each { |field|    
  self.field = 'frog'
} 
```

这没用。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T11:47:03.290

上面 John Topley 的回答基本上是正确的，但是由于您想要分配值，因此您想要执行以下操作：

```
fields_array=['field1','desc_field','fieldx']    
fields_array.each { |field|    
  self.send("#{field}=", 'frog')
} 
```

注意添加的等号。有了它，你正在做`self.field1='frog'`而不是`self.field1('frog')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T09:52:52.897

尝试使用以下`send`方法：

```
fields_array=['field1','desc_field','fieldx']    
fields_array.each { |field|    
  self.send("#{field}", 'frog')
} 
```

# .net - 实体框架支持 COM+ 事务？

> ID：1000483
> 
> 赞同：4
> 
> 时间：2009-06-16T09:40:03.263
> 
> 标签：.net, entity-framework

ADO 实体框架是否支持 COM+ 事务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T09:54:06.480

它与其说是 COM+ 支持的案例，不如说是“实体框架操作可以加入企业事务范围吗？” 答案是肯定的。EF 不需要知道事务中的其他操作是通过 COM+ 进行的。它只需要符合 .NET 对分布式事务的支持。碰巧这仍然是通过 MSDTC 完成的，但这更多的是 EF 并不真正需要知道的实现细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T10:02:57.477

如果您想将“支持 COM+”事务的东西与实体框架之类的东西结合使用，您可能会发现[EnterpriseServicesInteropOption 枚举](http://msdn.microsoft.com/en-us/library/system.transactions.enterpriseservicesinteropoption.aspx)很有帮助（尤其是 Automatic 值）。

这就是我为使 WebSphere MQ 与 TransactionScope 一起工作所做的工作。[MSDN 在这里有一篇有用的文章](http://msdn.microsoft.com/en-us/library/aa751796.aspx)。

# image - 直接将剪贴板中的图像保存到本地或 iis 上的磁盘

> ID：1000484
> 
> 赞同：0
> 
> 时间：2009-06-16T09:40:04.357
> 
> 标签：image, save, clipboard

用户必须按 Alt prtScr 将图像保存到剪贴板，然后可能打开 word (Ctrl V) 并从提交表单页面获取将其保存到的路径并保存文档？

或者是否可以在本地或 iis 上以某种方式将剪贴板图像直接保存到磁盘？数据库可以记录路径。

我正在尝试在表单提交错误症状的错误提交系统中使用这种方法，并且我想要错误的屏幕截图以进行调试。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T11:04:02.123

看看[这个相关的帖子。](https://stackoverflow.com/questions/999847/client-system-clipboard-print-screen-image-save-in-server-system)

# javascript - 使用正则表达式检查复选框

> ID：1000488
> 
> 赞同：2
> 
> 时间：2009-06-16T09:41:09.253
> 
> 标签：javascript, regex

检查是否在javascript中选中复选框的正确正则表达式是什么？

更新：我知道这通常不是用正则表达式完成的。但是由于它是表单模块的一部分，并且所有验证都是使用正则表达式完成的。我认为这也可以用正则表达式检查。我的问题是如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T09:44:53.300

您真的只想访问该`checked`属性。（真的，正则表达式在这里没有位置 - 它应该只在没有更好的情况下使用。）

试试这个：

```
var checkbox = document.getElementById("myCheckbox");
if (checkbox.checked)
{
    alert("Checkbox is CHECKED.");
}
else
{
    alert("Checkbox is UNCHECKED.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T09:43:54.113

正则表达式？只看`.checked`楼盘怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T09:49:37.333

```
/true/.test(document.getElementById("myCheck").checked.toString()) 
```

/您可能还想查看其他答案...，除非您喜欢用冰淇淋勺钓鱼。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T10:00:07.077

好吧，如果您必须这样做，您可以在选中的属性上使用正则表达式

```
element.checked.toString().match(/true/) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T10:01:49.663

**假设**您正在使用的库检查`value`dom 元素的属性，以下可能会有所帮助。

对于带有 的复选框，如果选中`value="foo"`，则该`.value`属性返回“foo”，如果没有选中，则返回任何内容（null？）。因此，正确的正则表达式应该是“至少一个字符”的意思。我不是正则表达式大师，所以我什至不会尝试:)

# ruby-on-rails - Rails 现在可以使用 Ruby 1.9 了吗？

> ID：1000495
> 
> 赞同：2
> 
> 时间：2009-06-16T09:42:45.957
> 
> 标签：ruby-on-rails, ruby

> **可能重复：**
> [是否可以使用 Ruby 1.9x 运行 Ruby on Rails？](https://stackoverflow.com/questions/783651/is-it-possible-to-run-ruby-on-rails-with-ruby-1-9x)

浏览网页说 Rails 与 Ruby 1.9 不兼容，但我想知道是否总是这样？

我们应该等多久才能看到 Rails 版本与 Ruby 1.9 一起使用？是否正在进行中？在开发阶段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T12:49:16.610

**是的，最新的 Rails 与 Ruby 1.9.1 完全兼容。**

您遇到的问题将围绕可能尚不兼容的 gem/插件。但是越来越多的流行 gem/插件现在使用 1.9。（正如 Rahul 的链接中所指出的那样。）有关兼容性信息，请参阅[isitRuby19.com](http://www.isitRuby19.com)。

另一方面，如果你在 Windows 上开发，还没有 Ruby 1.9 的一键式安装程序，因此在本地进行设置可能比它的价值更痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T09:46:37.293

希望这可以帮助：

[Rails 2.3 与 Ruby 1.9](http://blog.nextlogic.net/2009/05/rails-23-with-ruby-19.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T16:24:44.490

好的，我找到了这个链接：

[http://guides.rubyonrails.org/2_3_release_notes.html](http://guides.rubyonrails.org/2_3_release_notes.html)

实际上，**rails 2.3 与 ruby​​ 1.9 一起使用**。这很酷！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T18:36:34.503

是的，但是你会在插件上遇到很多麻烦

# design-patterns - Zend_Form 和 OOP 设计模式

> ID：1000503
> 
> 赞同：1
> 
> 时间：2009-06-16T09:45:52.520
> 
> 标签：design-patterns, oop, zend-framework, zend-form

使用 Zend_Form 创建具体应用程序表单的正确方法是什么

1）使用“扩展”和派生类

```
class MyForm extends Zend_Form {

 public function __construct() {
  $el = $this->createElement('text', 'el');
  $this->addElement($el);
  // ...
 }

} 
```

2）或使用委托/代理模式

```
class MyForm {

 private $_form;

 public function __construct() {
  $this->_form = new Zend_Form();
  $el = $this->createElement('text', 'el');
  $this->_form->addElement($el);
  // ...
 }

 public function __call($I_method, $I_params) {
   // ... forwarding calls to private delegate
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T09:56:21.517

我根据[这个示例](http://pastebin.com/m3a0b3857)创建表单类并使用帮助程序来实例化它们。灵感来自采埃孚项目负责人 Matthew Weier O'Phinney，因此我很高兴将其视为良好实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T16:51:07.243

我在用着

```
My_Form extends Zend_Form 
```

接着

```
My_Form_ConcreteImplementation extends My_Form 
```

My_Form 类用于设置默认装饰器和东西，具体实现添加元素并在必要时处理业务。它使它干燥，这就是你所需要的。无需遵守*学术原则*：P

# sql-server - 在用分隔符连接特定列的同时对行进行分组

> ID：1000507
> 
> 赞同：2
> 
> 时间：2009-06-16T09:47:55.370
> 
> 标签：sql-server

我必须在连接某个列时以某种方式对行进行分组，我不确定我将如何去做。以下是我需要的示例。

```
CREATE TABLE People(
PersonName varchar(100),
PersonAge int
)

INSERT INTO People
SELECT 'bill', 21

INSERT INTO People
SELECT 'harry', 21

INSERT INTO People
SELECT 'wesley', 21

INSERT INTO People
SELECT 'tom', 42

INSERT INTO People
SELECT 'paul', 42

INSERT INTO People
SELECT 'phil', 53 
```

从此表中正常选择将产生以下结果：

```
bill    21
harry   21
wesley  21
tom     42
paul    42
phil    53 
```

我需要的是以下内容：

```
bill, harry, wesley    21
tom,paul               42
phil                   53 
```

我不确定这是否可行，但如果有人知道该怎么做，那将非常有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T21:35:57.673

SELECT p1.personage, ( SELECT personName + ',' FROM people p2 WHERE p2.personage = p1.personage ORDER BY personName FOR XML PATH('') ) AS 结果来自 people p1 GROUP BY personage ;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T10:07:35.113

这是一个难题。有关它的深入处理，请参阅这篇出色的帖子：

[http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)

对于一个简单的解决方案，我使用了一个游标，它完成了这项工作：

```
create procedure
doIt
as

create table #out
(people varchar(2000) null, -- assumed max length of concatenated string
age int)

insert into #out(age)
select distinct personAge from people

declare @str varchar(2000)
select @str = isnull(@str,'') + personname +',' from people

declare @age int
declare cur cursor for select age from #out

open cur
fetch next from cur into @age

while @@fetch_status =0
begin 
    set @str = ''
    select @str = isnull(@str,'') + personname +',' from people where personage = @age
    update #out set people = left(@str,len(@str)-1) where age=@age
    fetch next from cur into @age   
end

close cur
deallocate cur

select * from #out 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T10:51:05.290

这是使用 tekBlues 在他的帖子中放置的链接的一种没有光标的方法：

```
WITH CTE ( PersonAge, person_list, person_name, length )
AS 
( 
SELECT PersonAge, CAST( '' AS VARCHAR(8000) ), CAST( '' AS VARCHAR(8000) ), 0
FROM People
GROUP BY PersonAge
UNION ALL
SELECT p.PersonAge, 
    CAST( person_list + CASE WHEN length = 0 THEN '' ELSE ', ' END + PersonName AS VARCHAR(8000) ),
    CAST( PersonName AS VARCHAR(8000)), length + 1
FROM CTE c
INNER JOIN People p ON c.PersonAge = p.PersonAge
WHERE p.PersonName > c.person_name 
)
SELECT PersonAge, person_list
FROM 
( 
SELECT PersonAge, person_list, RANK() OVER ( PARTITION BY PersonAge ORDER BY length DESC )
FROM CTE 
) D ( PersonAge, person_list, rank )
WHERE rank = 1 ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T11:41:44.220

这是 Sql Server 中的一个难题。例如，您可以创建[自定义字符串连接聚合](http://msdn.microsoft.com/en-us/library/ms182741.aspx)。但这需要您将 .NET 程序集加载到 Sql Server 中；并非所有 DBA 都会同意这一点。

在客户端，这真的很容易。你为什么不考虑解决这个客户端？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-08T09:34:29.947

如果您使用的是 MySQL，它会尽可能简单

```
SELECT GROUP_CONCAT(PersonName SEPARATOR ', ') as name, PersonAge 
FROM People GROUP BY PersonAge 
```

还有 ORDER 和 DISTINCT 选项:)

# vb.net - 如何获取资源文件中所有资源的名称

> ID：1000510
> 
> 赞同：5
> 
> 时间：2009-06-16T09:48:49.970
> 
> 标签：vb.net, visual-studio, resx

在 Visual Basic 项目中，我添加了一个包含一堆图像的资源文件 (resx)。

现在我想查询图像的名称。如果我在 Visual Studio IDE 的设计器视图中打开 resx 文件并选择一个图像，属性网格会显示一个名称属性（默认为“没有扩展名但可以更改的文件名）。

背景是我有一个在运行时创建的图像列表，并用资源文件中的图像填充。为了能够通过密钥访问这些图像，我必须进行设置。

我的代码看起来像这样（所有内容都是硬编码的）：

```
Dim imagelist as new Imagelist
imageList.Images.Add("A", My.Resources.MyImages.A)
imageList.Images.Add("B", My.Resources.MyImages.B)
imageList.Images.Add("C", My.Resources.MyImages.C)
imageList.Images.Add("D", My.Resources.MyImages.D)
imageList.Images.Add("E", My.Resources.MyImages.E)
....
imageList.Images.Add("XYZ", My.Resources.MyImages.XYZ) 
```

我想实现这一点：

```
Dim imagelist as new ImageList

For Each img in GetMeAllImagesWithNameFromMyResourceFile
    imageList.Images.Add(img.Name, img.ImageFile)
Next 
```

其中 Name 是一个字符串，ImageFile 是一个 System.Drawing.Bitmap

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-16T16:41:22.657

看看这段代码是否有帮助。

```
 Dim runTimeResourceSet As Object
    Dim dictEntry As DictionaryEntry

    runTimeResourceSet = My.Resources.ResourceManager.GetResourceSet(System.Globalization.CultureInfo.CurrentCulture, False, True)
    For Each dictEntry In runTimeResourceSet
        If (dictEntry.Value.GetType() Is GetType(Icon)) Then
            Console.WriteLine(dictEntry.Key)
        End If
    Next 
```

我以 Icon 为例，如果您使用的是 Bitmap，则必须更改它。

编辑：您将不得不使用 dictEntry.Value 的参考并查看它如何用于将其添加到 imagelist。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T11:27:26.870

以下是用 C# 编写的，您应该能够轻松地将其转换为 VB。

```
Assembly executingAssembly = GetExecutingAssembly();

foreach (string resourceName in executingAssembly.GetManifestResourceNames())
{
    Console.WriteLine( resourceName );
} 
```

现在您拥有所有资源名称，您可以遍历列表并执行以下操作：

```
foreach(string s in executingAssembly.GetManifestResourceNames())
{
    if (s.EndsWith(".bmp"))
    {
        imgStream = a.GetManifestResourceStream(s);
        if (imgStream != null)
        {                    
            bmp = Bitmap.FromStream(imgStream) as Bitmap;
            imgStream.Close();
        }   
    }
} 
```

我没有尝试过，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T11:13:53.030

尝试这样的事情：

```
Dim reader As New ResXResourceReader(resxFilePath)

Dim en As IDictionaryEnumerator
en = reader.GetEnumerator()

While en.MoveNext()
    Console.WriteLine("Resource Name: [{0}] = {1}", en.Key, en.Value)
End While

reader.Close() 
```

[您可以在此链接](http://www.java2s.com/Code/CSharp/Development-Class/Resource-ResX.htm "java2s.com")中找到更多可以帮助您的示例。这些示例是用 C# 编写的，但是为 vb.net 修改它们并不难

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-08T02:32:31.257

虽然上面的答案为我指明了正确的方向，但我添加了一个单独的答案来阐明 GetResourceSet 的使用和随后的图像加载：

```
 Dim resSet As Resources.ResourceSet = My.Resources.ResourceManager.GetResourceSet(Globalization.CultureInfo.InvariantCulture, True, False)
        For Each de As DictionaryEntry In resSet
            If (de.Value.GetType() Is GetType(Bitmap)) Then
                m_Icons.Add(de.Key, My.Resources.ResourceManager.GetObject(de.Key))
            End If
        Next 
```

请注意以下**My.Resources.ResourceManager.GetResourceSet**中的参数：

*   使用 **InvariantCulture**
*   **加载资源需要True**，因为此时在我的类库中我还没有访问资源集，这会强制加载它。这似乎是@bcrgen-steinblock 在他的评论中的意思，但在随后的编辑中被误解了
*   **false**对我来说没问题，因为我没有后备/默认资源集

# version-control - 合并 IntelliJ IDEA .IPR 和 .IWS 文件

> ID：1000512
> 
> 赞同：27
> 
> 时间：2009-06-16T09:49:22.653
> 
> 标签：version-control, merge, intellij-idea, projects-and-solutions

我们将 IntelliJ .IPR 和 .IWS 文件保存在我们的源代码控制中，但只要打开它们，它们就会不断被 IntelliJ 修改，即使没有对项目进行任何工作。

我们做错了什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-06-23T07:35:23.227

> “我们将 IntelliJ .IPR 和 .IWS 文件保存在我们的源代码控制中，但只要打开它们，它们就会不断被 IntelliJ 修改，即使没有对项目进行任何工作。”

.IWS 文件绝对是每个开发人员的文件，因此不应受源代码控制。

至于最近一个项目中的 .IPR 文件，我们最初尝试对这个文件进行版本化，在概念上接近它，就像使用 .Net 项目和 VS.Net .SLN 文件一样。我们的目标是在 15 分钟内让开发人员在干净的 PC 上启动并运行，其中包括安装 IDE 或本地数据库等依赖软件所需的时间。最后，我们接近了一些时间来调整本地配置，如下所示。

问题是 .IPR 文件存储的设置多于 .sln 文件 - 例如单个插件的设置。因此，覆盖的主要原因是如果具有不同插件配置的开发人员打开 IPR 文件，插件的一些默认设置将写入文件。我们认为开发人员不应该将自己限制在给定的插件超集（只是最低配置）。

我们缓解问题的方法（虽然没有完全解决）是切换到 .idea 文件夹格式。这将获取 .IPR 文件的内容并将许多节点拆分为 .idea 子文件夹中的单独文件和文件夹。从这里我们能够从源代码控制中排除许多经常写入文件的文件。我们排除的一些文件是：

*   工作区.xml
*   数据源.xml
*   sqlDataSources.xml
*   动态的.xml

我们希望 IntelliJ 不理会的一些文件是（尽管责任也可能归咎于插件开发人员，而不仅仅是 Jetbrains）：

*   projectCodeStyle.xml（因此我们可以在项目中获得一致的代码格式 - 同样可以根据开发人员的本地插件组合覆盖）。
*   runConfigurations 文件夹下的任何文件。配置运行配置可能非常耗时，特别是如果您有一个包含许多方面的复杂应用程序。只需打开 IDE 或构建即可更改的最常见愚蠢的事情是 RunnerSettings 下的“DEBUG_PORT”选项。我的观点是，如果它是动态分配的，为什么不具有“动态”值？
*   杂项.xml。该文件还包含插件配置。一些设置看起来很容易分享，而另一些则更适合个人配置。例如，IvyIDEA 插件为您的 ivy 配置文件放置了一个绝对路径。
*   模块文件。这些大部分都被单独留下，但一个不必要的覆盖示例是 IvyIDEA 插件将本地 ivy-cache 位置的详细信息放在此文件中。但这又是插件的错，而不是真正的 Jetbrains。

希望这可以帮助。

基督教。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-22T08:17:07.550

在不确切知道发生了什么变化的情况下，这有点难以自信地回答，但我会说：

*   IWS 文件包含描述如何为该项目*安排*开发人员的 IDE 的信息（包括最近的更改历史、每个编辑器窗口的当前状态、哪些可停靠窗口可见以及哪些已折叠）。鉴于应该允许每个开发人员按照他们喜欢的方式安排他们的工作区，这些**不**应该在源代码控制中。

*   IPR 文件描述了项目*代码*的结构——我的意思是，哪些模块是项目的一部分，要使用哪些 build.xml 文件，在哪里可以找到编译代码的库等。这*可以*在源代码控制中，但是如果您允许这些设置从一个开发人员的项目副本到下一个项目副本不同，那么您将陷入困境。

**如果您的 IPR 文件中有 libraryTable 组件：**

几乎可以肯定的是，每个开发人员都将共享库（JAR）——构建代码所需的——保存在不同地方的本地机器上；当他们提交更改时，他们的库的位置将被写入 IPR 文件。如果你这样做，当我更新项目时，我的 IPR 副本和你的 IPR 副本将在这些 JAR 的位置上发生冲突。

我们通过将 JAR 文件定位在共享位置（例如映射的网络驱动器）然后确保每个开发人员将这些文件下载到同一个位置（项目根目录下的 lib 子文件夹运行良好）来解决这个问题。不利的一面是，您最终会在项目中获得相同 JAR 的多个副本（每个项目将引用其自己的 lib 文件夹），但有利的一面是，由于每个开发人员都使用相同的项目结构，更新 IPR 应该会更好。

**否则：**

看看 IntelliJ 正在尝试合并什么（更新时，您应该可以选择手动合并文件或查看差异，否则使用您最喜欢的 diff 工具）。如果您可以使用有关合并冲突的更多信息来更新您的问题，则可能会更容易查看轮子脱落的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-23T00:21:46.923

我们为签入源代码管理 (.deleteme) 的文件添加扩展名。然后新人可以签出项目，更改扩展，然后继续。如果我们进行配置更改，我们会更新签入的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T09:53:55.280

一种解决方案是不要将您的 IntelliJ 项目置于源代码控制中。这意味着它们很容易重新创建。

你可以告诉 Subversion 它应该忽略的文件。将您的 IntelliJ 文件添加到该列表中。

“......即使没有对项目进行任何工作......” - 这表明您经常打开 IntelliJ 而不对项目做任何有用的工作。也许这才是真正的问题。我不明白为什么你会打开 IDE 而不做一些值得检查的事情。修订号增加的成本是多少？小，在我看来。

所以现在我改变了主意。签入 IntelliJ 项目文件，不必担心修订号上升。他们不会花费你太多。

# objective-c - 旋转时钟指针的问题

> ID：1000517
> 
> 赞同：2
> 
> 时间：2009-06-16T09:50:59.763
> 
> 标签：objective-c, iphone

我是Objective-C的初学者，我正在尝试制作一个时钟。我现在只是在测试，我的问题是，对于每个循环，针都从其初始位置旋转，而不是从最后一个位置旋转。所以，我的问题是如何`for`从针的最后一个位置开始循环中的下一次旋转？

请帮帮我，我正在做我最后一学年的实习。这是我的代码：

```
#import "MainView.h"
#include < math.h>

static inline double radians (double degrees) {return degrees * M_PI/180;}

@implementation MainView

int cranTest = 3.1415279;
int tps = 0; 

@synthesize aiguille;
@synthesize tempsEcoule;
@synthesize timer;

- (IBAction)go {
    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(checkTime) userInfo:nil repeats:YES];
}

-(void)checkTime{
    if(tps < 12){
        [self updateLabel];
        [self tourne];
    }else{
        [timer invalidate];
        tempsEcoule.text = @"terminé";
    }
}

-(void)updateLabel{
    tps += 1;
    tempsEcoule.text = [NSString stringWithFormat:@"%i",tps];
}

-(void)tourne{      
    CABasicAnimation *spinAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    spinAnimation.fromValue = 0;
    spinAnimation.toValue = [NSNumber numberWithFloat:cranTest];
    spinAnimation.duration = .5;

    [aiguille.layer addAnimation:spinAnimation forKey:@"spinAnimation"];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T10:50:53.997

您的代码使用计时器每秒启动一次 CAAnimation。您应该使用 CAAnimation 的 repeatCount 属性（来自 CAMediaTiming 协议）来启用连续动画。

使用累积或附加属性，您可以将动画设置为从上次停止的地方开始下一个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T13:34:00.110

`CABasicAnimation`（此处的[文档）是（此处](http://developer.apple.com/documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html)`CAPropertyAnimation`的[文档](http://developer.apple.com/documentation/GraphicsImaging/Reference/CAPropertyAnimation_class/Introduction/Introduction.html)）的子类

`CAPropertyAnimation`具有累积性和可加性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-19T05:33:05.467

尝试这样做：

```
spinAnimation.byValue = [NSNumber withFloat:(M_PI/6)]; 
```

我相信这不应该给任何问题。并记住进行我告诉过您的其他更改，例如将 cranTest 从 int 更改为 float。

此外，当您回复时，不要添加答案，而是在答案中添加评论。呃.. *répondre à ma réponse avec un comment, pas une autre reponse。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T07:44:06.957

我不确定，没有使用 CoreAnimation 的经验，但我相信你必须设置[byValue](http://developer.apple.com/documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html#//apple_ref/occ/instp/CABasicAnimation/byValue "苹果文档")属性：

> 定义接收器用于执行相对插值的值。

所以试试：

```
spinAnimation.byValue = M_PI/6; 
```

我不确定您是否必须对浮点数进行显式强制转换，因为该属性是一个 id，我也是 Objective-C 的新手。所以我想你必须这样做：

```
spinAnimation.byValue = (float)(M_PI/6); // not sure if this is needed or correct 
```

我不确定您是否需要设置累积和附加属性，请尝试将它们注释掉：

```
// spinAnimation.cumulative = YES;
// spinAnimation.additive = YES; 
```

就像 David 作为对您原始帖子的评论所说的那样，您将希望设置`cranTest`为浮点数而不是整数，否则该值将被截断为 3：

```
float cranTest = 3.1415279f; 
```

# java - Java + Google App Engine 中的网站登录

> ID：1000522
> 
> 赞同：22
> 
> 时间：2009-06-16T09:52:16.703
> 
> 标签：java, google-app-engine, login

我是网络编程的新手，来自视频游戏开发背景 (c++)，我真的开始感到信息过载。有如此多的竞争库，它们都在其他库中选择了他们不喜欢的东西，并构建了一种全新的方式来做同样的事情！我相信这有充分的理由，我不想抱怨，所以我会解释我的问题。

为了简化我的旅程，我决定开始学习 Google App Engine + GWT + Java。我喜欢它，因为它是开箱即用的分布式服务器架构，而且我选择 Java 是因为我的 C++ 背景。

首先，我编写了一个类似 Twitter 的小应用程序，因为它测试了 Web 开发的各个方面，即：REST、JSON 解析/创建、AJAX 通信和 HTML 生成。我很快就创建了一个小网站，允许用户在浏览器的页面中输入他们的姓名和密码，将数据发送到我的应用程序，我代表他们登录，获取他们的朋友列表，然后发出它以 JSON 格式返回给客户端，我在其中解析并显示它。

很简单的东西。

因此，下一步是我不喜欢将用户通过网络输入的密码以纯文本形式发送（显然）。这让我想到了我需要的所有管道：

1.  根据我自己的数据库验证用户，而不是 Google 的。（登录/丢失密码/注销）
2.  进入/退出（跟踪）会话（登录/注销）。
3.  将用户数据存储在我的 Google 应用程序的数据库中。

所有非常标准的东西一直存在。好吧，我开始四处寻找 Java 身份验证库，并且有如此庞大的单体库，它们具有巨大的学习曲线，有些已经过时或不再受欢迎……我感觉自己又像一个完全的初学者程序员了！我只想有一个登录页面！:)

因此，我开始阅读有关身份验证管道的工作原理，并且有大量内容需要学习。显然，人们（不安全地）自己动手是很常见的。我宁愿采用一个存在且可靠的解决方案。

那么问题就变成了，人们会怎么做呢？Twitter 支持 HTTP 和 HTTPS，但它的 REST API 默认使用 HTTP，这是否意味着人们的密码在不受保护的情况下四处乱窜，准备被中间人黑客拦截？

我还查看了 OAuth，它看起来很棒，但它并没有一个很好的旧案例“我不想知道或关心 OpenID 是什么”。我向 OpenID 展示过的非技术人员就像“什么？我只想输入我的用户名/密码”。

附带说明一下，有人对 Google App Engine 上的 Spring.Security 有什么好运吗？

反正我在吐槽。我只想知道人们在做什么（不是在 Python、Rails 等中，而是在古老的 Java 中）。我希望有一个像 Digg 这样的登录页面，甚至有一天可以选择 OpenID :)

干杯，谢恩

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-16T15:14:58.953

我无法与 Google App Engine 一起与 Spring Security 交谈，但我可以对它说几句可能会有所帮助的事情。

首先，它的设置非常简单，而且他们有很好的教程来启动它。就个人而言，我第一次使用[宠物诊所教程](http://static.springframework.org/spring-security/site/petclinic-tutorial.html)作为指南，了解如何将 Spring Security 应用到我的项目中。我能够在一两个小时内完成设置，并且在几个不同的页面上使用我的数据库具有基本的安全性。当然，您的里程可能会有所不同，但最坏​​的情况是您拥有完整的教程，您可以戳戳并查看它的反应。

其次，该库是非常可配置的。如果您搜索[手册](http://static.springframework.org/spring-security/site/docs/3.0.x/reference/springsecurity.html)，您会很好地了解您可以做的事情，并且我可以毫无问题地重新设计我需要为我的项目更改的区域。我相信您应该能够将 Spring Security 和 Google App Engine 一起工作。总的来说，我对 Spring 源代码的远见和与其他库交互的能力感到满意。

最后，Spring Security 支持 OpenID，如果你决定要分层的话。我还没有玩过这部分，但从教程来看，它看起来也很直观。这里的好处是，如果事实证明您毕竟应该支持 OpenID，那么您应该能够在事后添加它。

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-12-22T18:00:08.207

我刚刚偶然发现了你的帖子。您似乎（过去时，因为它已经很长时间了）对 HTTP / HTTPS 的使用和身份验证感到困惑。如果您使用的是 HTTP，则您的密码不会以纯文本形式反弹。通常，登录信息通过 HTTPS 发布。此时，已经建立了一个会话，该会话通过 cookie 中随机生成的大型标识符进行跟踪。用户在服务器上经过身份验证，并且他们的 id 存储在会话中（存储在服务器上）以标记他们已登录。

从那时起，通过会话跟踪用户。是的，中间人可能会劫持 cookie 并冒充您的身份。100% 通过 HTTP 工作的网站都是这种情况，但这显然不是问题，或者您会听到更多关于它的信息。对于 HTTPS，会话 cookie 可以标记为安全，这意味着它只会通过 HTTPS 从浏览器发送。过去，我发现浏览器的行为不同，有时为安全和非安全的同名 cookie 共享相同的值（这是一个愚蠢的想法）。您最好的选择是使用单独命名的安全 cookie 来确保用户登录以使用您网站上的安全功能。

我同意你的观点，JAAS 框架非常糟糕。一定是一群没有常识的疯子写的。

至于使用 Google App Engine - 他们将为您处理所有身份验证。看起来您别无选择，只能使用 Google 帐户，这很可惜。他们坚持让您重定向到他们的登录页面也是一种耻辱，因为这破坏了 GWT 应用程序的工作方式。我目前正在考虑管理自己的帐户，因为我不希望谷歌拥有它们，也不希望在我的网站上出现这种脱节的体验。

但是，似乎不可能在没有会话的情况下跟踪用户（GAE 可以支持会话，但强烈建议不要在 GAE 中促进可伸缩性）。如果没有会话，我确实需要发送密码并使用每个 RPC 请求对用户进行身份验证。谷歌正在使用一些技巧来使 getUserPrincipal() 方法在他们的服务器集群中工作——而且似乎只有使用谷歌帐户才能获得这种魔力。

也许我遗漏了一些东西，但谷歌文档只是略过了这个大洞:(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T07:37:40.730

嘿，如果你想使用 java，你可能想研究一下[WICKET](http://wicket.apache.org/ "便门") ......这是一个非常简洁的 java 框架，提供了很多东西。它是面向组件的，并且通过示例非常容易理解（请参阅扩展示例页面上的登录示例......我让它运行得非常快）。它也适用于其他 js 框架，但也提供了自己的 ajax 实现。它还有一个很棒的邮件列表！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T10:06:33.413

我正在尝试使用 servlet 的[security-constraint element](http://edocs.bea.com/wls/docs61/webapp/web_xml.html)做同样的事情。在我的应用程序中，https 下的基本/摘要身份验证很好。

第二天，我还将尝试使用 restlet 和/或 JAX-RS 实现另一个应用程序。两个框架都提供了安全钩子。

> 进入/退出（跟踪）会话（登录/注销）。

这可以使用 servlet 过滤器轻松实现（同样，GAE 完全支持）

> 附带说明一下，有人对 Google App Engine 上的 Spring.Security 有什么好运吗？

支持弹簧安全

# c# - WCF 请求/响应包大小

> ID：1000528
> 
> 赞同：2
> 
> 时间：2009-06-16T09:53:11.053
> 
> 标签：c#, wcf, request, response

我想知道是否有可配置的设置来限制 WCF 的最大请求/响应数据包大小？我正在使用 VSTS 2008 + WCF 3.5。我是作为 Windows 服务的自托管 WCF 服务。

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T10:03:06.383

是的，**绑定**具有获取/设置最大接收数据字节的属性：检查“maxReceivedMessageSize”属性（以字节为单位表示大小）。

但是，将其设置为一个大值并不是一个好主意，因为如果传输中发生错误，您必须重新发送整个（大）消息。

编辑：[在这里](http://msdn.microsoft.com/en-us/library/ms731299.aspx)您可以找到有关所有绑定配置属性的详细信息。

# matlab - 如何在 MATLAB 中基于向量创建三角矩阵？

> ID：1000535
> 
> 赞同：11
> 
> 时间：2009-06-16T09:55:13.890
> 
> 标签：matlab, matrix, triangular

假设我有一个像这样的向量：

```
A = [101:105] 
```

这真的是：

```
[ 101, 102, 103, 104, 105 ] 
```

而且我只想使用向量/矩阵函数和运算符来生成矩阵：

```
101 102 103 104 105
102 103 104 105 0
103 104 105 0   0
104 105 0   0   0
105 0   0   0   0 
```

或以下矩阵：

```
101 102 103 104 105
0   101 102 103 104
0   0   101 102 103
0   0   0   101 102
0   0   0   0   101 
```

有什么想法吗？

（我是 MATLAB 的新手，但我一直背负着这些东西......）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-06-16T11:28:28.350

`hankel(A)`会给你第一个矩阵

`triu(toeplitz(A))`会给你第二个。

——洛伦

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T15:20:05.467

[Loren](https://stackoverflow.com/questions/1000535/how-can-i-create-a-triangular-matrix-based-on-a-vector-in-matlab/1000889#1000889)列出了最佳解决方案。也可以使用[SPDIAGS](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/spdiags.html)创建这些矩阵：

```
vec = 101:105;
A = full(spdiags(repmat(vec,5,1),0:4,5,5));  % The second matrix
B = fliplr(full(spdiags(repmat(fliplr(vec),5,1),0:4,5,5)));  % The first matrix 
```

我记得在我发现 Loren 提到的一些内置函数之前创建了这样的带状矩阵。它不像使用它们那么简单和干净，但它确实有效。=)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T10:03:26.977

我的方法是创建一个矩阵`A`：

```
101 102 103 104 105
101 102 103 104 105
101 102 103 104 105
101 102 103 104 105
101 102 103 104 105

```

然后找到一个矩阵`B`，这样当你乘以`A*B`你会得到你想要的结果。基本上先在纸上做线性代数，然后让 Matlab 做计算。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T12:25:49.187

要生成具有此类规则模式的此类三角矩阵，请使用 toeplitz 函数，例如

```
m=toeplitz([1,0,0,0],[1,2,3,4]) 
```

对于另一种情况，使用`rot90(m)`

# python - 是否有在 memcached 中配置优先级的选项？（类似于到期）

> ID：1000540
> 
> 赞同：0
> 
> 时间：2009-06-16T09:56:53.980
> 
> 标签：python, database, session, caching, memcached

memcached 中的哈希表在过期或内存不足时将被丢弃，并且根据最近最少使用算法选择死亡。

我们可以设置优先级来提示或影响 LRU 算法吗？我想使用 memcached 来存储 Web 会话，这样我就可以使用便宜的循环。

我需要给 Sessions 最高优先级，除了他们自己的 Max_Expiry 之外，没有什么可以杀死他们（即使它是最近最少使用的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-15T09:13:33.510

从来没听说过。memcached 的设计非常快速且非常简单，没有花哨的权重和优先级使其保持简单。

您不应该依赖 memcache 来进行持久会话存储。您应该将会话保存在数据库中，但您可以将它们缓存在内存缓存中。这样您就可以享受两个世界。

# ldap - LDAP AD - range 属性，如何使用它？

> ID：1000541
> 
> 赞同：3
> 
> 时间：2009-06-16T09:57:28.050
> 
> 标签：ldap

我正在尝试使用范围属性。

为了测试，我使用没有范围的搜索返回 3 个条目，并将范围设置为 0-1，这应该只返回前 2 个。但是，我得到了所有 3 个结果。

我就是这样做的：

```
String rangeStr = attribute + ";range=0-1";
String returnedAttrs[] = {rangeStr, attribute};
_searchControls.setReturningAttributes(returnedAttrs);
_searchControls.setSearchScope(scope);
NamingEnumeration<SearchResult> answer = _context.search(name, filter, _searchControls);
List<String> result = new LinkedList<String>();
while (answer != null && answer.hasMoreElements())
{
    Attribute currentAttr = answer.next().getAttributes().get(attribute);
    if (currentAttr == null)
        continue;
    for (int i=0; i<currentAttr.size(); i++)
    {
        String val = currentAttr.get(i).toString();
        result.add(val);
    }
} 
```

我究竟做错了什么？

我使用 1000 的页面大小，但如果我理解正确，那不应该影响范围搜索（假设页面大小大于请求的范围）。那是对的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-11-10T23:01:39.260

```
#!/usr/bin/env python

import ldap

def msad_flatten_ranges(conn, dn, ldap_dict):
  for attrname in ldap_dict:
    if ';range=' in attrname:
      #
      # parse range attr
      #
      actual_attrname, range_stmt = attrname.split(';')
      bound_lower, bound_upper = [
        int(x) for x in range_stmt.split('=')[1].split('-')
      ]

      step = bound_upper - bound_lower + 1
      while True:
        attr_next = '%s;range=%d-%d' % (
          actual_attrname, bound_lower, bound_upper
        )

        dn, attrs = conn.search_s(
          dn, ldap.SCOPE_BASE, attrlist = [attr_next])[0]

        assert len(attrs) == 1

        ret_attrname = attrs.keys()[0]

        ldap_dict[actual_attrname].extend(attrs[ret_attrname])
        if ret_attrname.endswith('-*'):
          break

        bound_lower = bound_upper + 1
        bound_upper += step 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-18T03:52:59.600

我还没有对 Russell 的帖子发表评论的声誉，但我不得不稍微调整他的答案才能在 python3 + ldap 3.3.1 下工作。（但是，谢谢，Russell，为您提供最初的解决方案。）

首先，我用另一个函数包装了他的函数，以循环浏览我之前搜索的结果：

```
 for result in results:
      dn, obj = result

      msad_flatten_ranges(conn dn, obj) 
```

（对不起，我知道这几乎太明显了——我是为新手添加的。）

然后我修改了他的功能：

```
def msad_flatten_ranges(conn, dn, ldap_dict):
  ranged_attrs = [ attrib for attrib in ldap_dict if ';range=' in attrib ]

  for attrname in ranged_attrs:
    #
    # parse range attr
    #
    actual_attrname, range_stmt = attrname.split(';')

    ldap_dict[actual_attrname] = ldap_dict.pop(attrname)

    bound_lower, bound_upper = [ 
      int(x) for x in range_stmt.split('=')[1].split('-')
    ]

    step = bound_upper - bound_lower + 1

    while True:
      bound_lower = bound_upper + 1
      bound_upper += step

      attr_next = '%s;range=%d-%d' % (
        actual_attrname, bound_lower, bound_upper
      )

      dn, attrs = conn.search_s(
        dn, ldap.SCOPE_BASE, attrlist = [attr_next])[0]

      assert len(attrs) == 1

      ret_attrname = tuple(attrs.keys())[0]

      ldap_dict[actual_attrname].extend(attrs[ret_attrname])
      if ret_attrname.endswith('-*'):
        break 
```

变化如下：

1.  我预先确定了需要扩展的属性 (ranged_attrs)，因为我不希望对 ldap_dict 键进行任何更改来破坏外循环。
2.  我将现有的（初始）范围转换为actual_attrname条目，以避免再次重新获取相同的范围（参见ldap_dict.pop（attrname）的行），这解决了该dict键已经存在的需要，因为后者“扩展”电话对我来说被打破了。并且“pop”删除了键值的范围版本。
3.  然后我将 bound_lower 和 bound_upper 的移位移动到循环的前面，因为我已经有了初始范围。
4.  我将 attr.keys() 转换为一个元组，以便可以对其进行索引。事实上，那是失败的。

# eclipse - 关于运行配置中的 Eclipse 和类路径的问题

> ID：1000546
> 
> 赞同：5
> 
> 时间：2009-06-16T09:59:07.703
> 
> 标签：eclipse, classpath

我刚刚开始第一次使用 Log4J。我创建了一个 log4j.properties 文件并将其放在 Eclipse 中我的项目文件夹中。我还为我的应用程序创建了一个运行配置（它只是一个默认的运行配置，没有额外的选项）。

现在，我尝试运行应用程序，但收到一条关于 log4j 无法自行初始化的错误消息（读取属性文件）。我知道属性文件必须在类路径中，所以显然运行配置没有正确设置类路径。

如果我转到我的运行配置的 Classpath 选项卡，我有以下内容：

*   引导条目
*   用户条目
    *   MyApplication（默认类路径）
    *   log4j-1.2.15.jar - C:\Workspace\MyApplication\lib

但是，如果我手动添加我的项目文件夹（我单击添加文件夹、高级、MyApplication），log4j 将能够自行初始化。

为什么呢？为什么 log4j 找不到属性文件，除非我手动添加项目的文件夹？默认情况下，这个文件夹不是在类路径中吗？（上面的输出表明它是。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T10:06:00.637

不，默认情况下，项目文件夹本身不在类路径中 - 项目的输出文件夹在（通常是一个名为 bin 或 classes 的子文件夹）。

如果您将 log4j.properties 放入项目的源文件夹而不是其根文件夹，那么一切都应该正常工作（源文件夹中的非源文件会自动复制到输出文件夹）。

通常，您不必弄乱运行配置的类路径 - 在大多数情况下，更改（或在您的情况下正确使用）项目属性中的构建路径更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T10:04:47.037

默认情况下，项目文件夹不会添加到类路径中。默认情况下，类路径仅包含类文件夹。

您必须手动将任何其他文件夹添加到类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T10:05:28.113

你有两个选择：

*   将 log4j.properties 文件放在 src 文件夹下
*   创建一个额外的源文件夹，通常命名资源或资源，并将 log4j.properties 文件放在那里

它现在不起作用的原因是该文件不在项目的类路径中。您可以从 Project > Properties > Java Build Path 查看类路径

# web-services - 使用 Web 服务时设置请求的文化

> ID：1000550
> 
> 赞同：0
> 
> 时间：2009-06-16T09:59:29.403
> 
> 标签：web-services, culture

我正在寻找一些解决方案，我可以如何轻松地在客户端设置请求的文化并在服务器上获取它。因此，例如，我会以请求的语言返回错误消息。
有没有办法在 WebRequest 或 WebMethod 上设置它？

任何建议都非常受欢迎。谢谢 X。

编辑：最后我使用 Soap 标头将cultureinfo 设置从客户端传送到服务器。我想这很好。我只是更希望它可以设置在较低级别，而不是通过使用 SoapHeader 的自定义。无论如何它有效。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T10:12:54.213

您可以将所需的文化作为参数传递并在服务器端设置文化：

```
Thread.CurrentThread.CurrentUICulture = new CultureInfo(lang); 
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(lang); 
```

# nhibernate - NHibernate：未找到“扩展”引用的这些类

> ID：1000551
> 
> 赞同：3
> 
> 时间：2009-06-16T09:59:31.337
> 
> 标签：nhibernate

我有一个简单的例子；继承实现接口的抽象泛型类的具体类。

IE。StringProperty -> AbstractProperty<T> -> IProperty

我收到以下错误...

```
NHibernate.MappingException: These classes referenced by 'extends' were not found:
NhibernateTest.AbstractGenericProperty`1[[System.String, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], PromoNhibernateTest
   at NHibernate.Cfg.MappingsQueue.CheckNoUnavailableEntries()
   at NHibernate.Cfg.Configuration.SecondPassCompile()
   at NHibernate.Cfg.Configuration.BuildSessionFactory() 
```

我使用产生以下映射的 NHibernate 属性...

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="NhibernateTest.AbstractGenericProperty`1, PromoNhibernateTest" lazy="false" table="Properties">
    <id>
      <generator class="identity" />
    </id>
    <discriminator column="Name" type="String" />
  </class>
  <subclass name="NhibernateTest.StringProperty, PromoNhibernateTest" lazy="false" extends="NhibernateTest.AbstractGenericProperty`1[[System.String, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], PromoNhibernateTest" discriminator-value="string" />
</hibernate-mapping> 
```

请告知映射有什么问题。

谢谢，

特德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:59:43.593

问题是无法映射 AbstractProperty。

您无法映射开放的泛型类型，即使您还创建了定义泛型类型的子类映射。

我不太清楚为什么 NHibernate 只在到达子类映射时才开始抱怨，但我很确定问题出在 AbstractProperty 映射上，而不是子类上。

# .net - System.Xml.XmlDocument.OuterXml 中的 SQL 2005 XML 特殊/转义字符

> ID：1000555
> 
> 赞同：0
> 
> 时间：2009-06-16T10:00:30.757
> 
> 标签：.net, sql, xml, sql-server-2005

我有一些在 C# 中使用 XmlDocument 对象创建的 XML。

然后，我使用 XmlDocument.OuterXml 方法将 xml 数据插入到 SQL 2005 中的 XML 列中，以获取原始 xml。

我遇到的问题是 xml 包含一些特殊字符。即：`&#x1F;&#x1C;`这是因为 xml 是根据来自各种来源的用户输入构建的。

当我执行插入时，我收到一条 SQL 错误消息，指出 XML 解析：非法 xml 字符。

```
CREATE TABLE #MyTable (MyColumn XML)
INSERT INTO #MyTable VALUES ('<Element>&#x1F;&#x1C;</Element>') 
```

消息 9420，第 16 层，状态 1，第 2 行

XML 解析：第 1 行，字符 15，非法 xml 字符

有人可以指出我如何解决这个问题的方向吗？

我很难更改 XmlDocument 对象或原始 xml 本身的任何内容，但是，我可以更改用于获取 RAW XML 的机制。如果需要，我还可以更改我的数据库设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T10:02:37.213

如果您有一个包含无效字符的 XmlDocument，那么您基本上没有有效的 XML。除了制表符、回车和换行符之外，没有其他方法可以表示 U+0020 以下的任何内容。我不完全确定为什么，但根据规范它是无效的 XML。

您可以将无效 XML 的原始*文本*存储在数据库中，但我认为您首先希望它成为 XML 列是有原因的 :)

你真的想保留这个无效的 XML 吗？您知道它来自哪里以及是否需要它吗？我个人会尽可能地尝试清理数据。

（顺便说一句，第一个 Stack Overflow 数据转储有一个非常相似的问题，所以不仅仅是你 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-13T19:27:49.913

这是可能的 INSERT INTO #MyTable VALUES ('')

为了清楚起见，我现在添加空格

INSERT INTO #MyTable VALUES ('<元素> &# x 1 F;</元素>')

# c - %*s 格式说明符是什么意思？

> ID：1000556
> 
> 赞同：57
> 
> 时间：2009-06-16T10:00:41.133
> 
> 标签：c, printf, format-specifiers

在我必须维护的一些代码中，我看到了格式说明符`%*s`。谁能告诉我这是什么以及为什么使用它？

其用法示例如下：

```
fprintf(outFile, "\n%*s", indent, ""); 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-06-16T10:04:03.137

[它用于以动态方式指定字段的宽度](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)：

> *   宽度未在格式字符串中指定，而是作为必须格式化的参数之前的附加整数值参数。

所以“缩进”指定为参数列表中跟随它的字符串分配多少空间。

所以，

```
printf("%*s", 5, ""); 
```

是相同的

```
printf("%5s", ""); 
```

这是在文件中放置一些空格，避免循环的好方法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-19T15:24:40.800

不要在不是 NULL 终止（打包）的缓冲区上使用“%*s”，认为它只会打印“长度”字段。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-14T11:21:48.013

格式说明符 %4s 输出一个字段宽度为 4 的字符串，即 printf 显示的值至少有 4 个字符位置。

如果要输出`less`的值的宽度超过 4 个字符位置，则默认情况下该值`right justified`在字段中。

如果该值`greater`的宽度大于 4 个字符位置，则字段宽度`expands`以容纳适当数量的字符。

要左对齐值，请使用负整数指定字段宽度。

参考资料：[Java™ 如何编程（早期对象），第十版](https://www.safaribooksonline.com/library/view/javatm-how-to/9780133813036/ch05lev2sec44.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-29T07:52:53.697

**在 printf 和 fprintf 中使用时：**

```
printf("%*s", 4, myValue); is equivalent to printf("%4s", myValue); 
```

它显示具有最小宽度的变量，其余右对齐空格。要左对齐该值，请使用负整数。

**在 scanf 和 sscanf 中使用时：**

```
/* sscanf example */
#include <stdio.h>

int main ()
{
  char sentence []="Rudolph is 12 years old";
  char str [20];
  int i;

  sscanf (sentence,"%s %*s %d",str,&i);
  printf ("%s -> %d\n",str,i);

  return 0;
} 
```

输出：

```
Rudolph -> 12 
```

它用于忽略字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T10:07:26.547

* 导致 fprintf 填充输出直到它有 n 个字符宽，其中 n 是存储在 a 函数参数中的整数值，就在修改后的类型表示的参数之前。

```
printf("%*d", 5, 10) //will result in "10" being printed with a width of 5. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T10:08:45.203

[http://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)

> 宽度未在格式字符串中指定，而是作为必须格式化的参数之前的附加整数值参数。

例如：`printf("%*s", 4, myValue);`等价于`printf("%4s", myValue);`。

# iphone - 为什么 [[UIApplication sharedApplication] 委托]; 返回一个零对象

> ID：1000560
> 
> 赞同：5
> 
> 时间：2009-06-16T10:01:56.917
> 
> 标签：iphone

我有一个带有多个视图和相关控制器和 xib 文件的 iphone 应用程序。在加载的第一个视图的控制器中，我试图访问应用程序的委托，但返回的对象是 nil

```
MyAppDelegate *appDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

任何想法为什么它会为零？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-16T10:41:41.690

因为它（尚未）设置。UIApplication 委托通常从 MainWindow nib 文件中实例化和设置。如果您在 nib 完全加载之前访问它（例如，在同一个 nib 中的控制器中的 init 方法），它是 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-30T13:00:06.407

也可能是因为您试图`UIApplication.shared.delegate`从 AppDelegate 的 init 方法中（或触发的代码）中读取代码。

`UIApplication.shared.delegate`直到 AppDelegate 的 init 方法返回后才设置。

# usability - 您应该向用户体验 (ux) 开发人员/设计师询问哪些面试问题

> ID：1000561
> 
> 赞同：5
> 
> 时间：2009-06-16T10:01:59.227
> 
> 标签：usability, user-experience

我们正在招聘一名 UX 顾问，与公司进行了一次广泛的交流，喜欢他们的工作，认为候选人还可以，现在希望与将嵌入 Scrum 团队的特定 UX 顾问进行更集中的面试。

应该问什么问题可以淘汰任何自重的候选人。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-16T10:04:46.663

[Ask Tog 有一个很好的测验](http://www.asktog.com/columns/022DesignedToGiveFitts.html)。我还会询问有关[格式塔原则](http://tinyurl.com/y6ao7k)的内容，但这可能是因为我拥有 HCI 硕士学位（因为那可能有点学术性）。也就是说，格式塔原则非常重要，尤其是对于表单设计之类的东西。

我想你也可以问他们最喜欢的用户体验设计书是什么，如果他们不能列出任何对我来说很奇怪的书。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-11-05T16:24:43.220

**个人经验**一个好的用户体验从业者应该对他们个人使用的东西感兴趣。我会问他们个人使用什么 - 明显的技术项目，如电话和网站，以及不太明显的东西，如厨房用具和自动售货机。如果 UX 候选人不能告诉我他们在一天中观察到了什么（例如，他们用来参加面试的汽车或公共交通工具），那是一个很好的方式来消除那里的自重。

**实际问题**与编程一样，评估某人的最佳方法是给他们一个您正面临（或面临）的现实问题，然后看看他们如何处理它。他们的思考过程比答案更重要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-12-09T05:14:47.620

我是一名 UI 设计师/开发人员，有一次我接受了 Verizon 的 UX 设计师职位面试。顺便说一句，这是一次电话采访。我以前从未担任过用户体验设计师。面试我的人问我过去的工作经验、技能组合，并问我以前是否曾作为 UX 设计师做出过贡献。关于技术问题，他实际上给我发了一份文档，里面有一些简短的信息（应用程序的一部分），然后是一个小界面（就像一个带有一些基于图形信息的表格，基于这些信息，呼叫中心的人将响应用户请求）。我被要求仔细研究这张桌子，然后我得到了 24 小时的时间来建议改变桌子/设计，并被要求解释为什么我会建议这些改变。只是看那个单页文件，我没有 不了解问题本身，也不知道该建议什么。我花了 23 个小时来查看问题，并在第 24 个小时提出了建议并将我的回复发送给他们。但是没有用.....我从来没有收到Verizon的回复。

作为一名 UI 设计师，我曾与很多 UX 设计师一起工作，我所知道的关于 UX 设计的所有知识就是你必须非常仔细地理解问题。您需要寻找所有可能的解决方案并使用最能满足用户需求的解决方案。然后你必须知道如何创建线框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T10:06:18.983

询问他们将如何为某些系统设计 UI。告诉他们为您熟悉的某个领域（例如您最近的一个项目）设计一个解决方案，以便在面试中您可以扮演用户的角色。然后UX顾问需要从你那里挖掘必要的需求，找出需要解决的问题，然后设计和测试解决方案。

或者，如果您想让它更容易/更快，请使用每个人都知道的域，这样他就不需要从您那里挖掘需求。例如，设计一个系统来找出您想在附近的哪家餐厅用餐。在一小时内，您应该了解顾问是什么样的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T10:17:44.420

给他们一些来自精选网站的示例页面的屏幕截图*，其中一些您认为是好的，一些是坏的，而且程度不同。要求他们指出每个网站的优点和缺点（每个站点都有*一些*优点和缺点）并解释他们的想法。如果他们没有发现明显的东西，用中性的“X 怎么样？”提示他们。看看他们是如何分析的。

* 找到这些并不难，但可能会耗费一些时间。如果您可以让他们访问实际的浏览器，那就更好了，这样您就可以查看“实时”元素

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-13T10:37:13.430

UX 工作由两部分组成：研究和设计。你需要明确你最想强调哪一个：一个可以在睡梦中摸索出大量分类法并构建线框的人，还是一个拥有数百小时可用性实验室经验的人。（你可以找到同时具有这两个专业领域的人，但人们通常倾向于一个方向）。

提防以前从未加入 Scrum 团队的 UX 顾问。他们将需要一些被褥。如果他们习惯于在代理方而不是客户方工作，他们将习惯于做短暂的研究项目然后离开。[这种“小冲突”](http://www.90percentofeverything.com/2009/02/03/user-experience-research-skirmishes-are-you-guilty/)与您在客户端工作时必须采取的长远观点完全不同。

# c# - SQL 2005 随机连接超时/关于数据库超时的最佳实践

> ID：1000567
> 
> 赞同：3
> 
> 时间：2009-06-16T10:02:55.510
> 
> 标签：c#, .net, sql-server, sql-server-2005

我正在使用 ADO.Net SqlCommand 类型，并将 CommandTimeout 设置为 30 秒。

我的问题是连接/命令不断超时导致未处理的异常导致我的系统崩溃！

我试图检索的数据对系统至关重要——所以我想修复超时而不是添加异常处理重试逻辑。

所以我的问题是；您如何避免/修复数据库超时问题？

我不想将超时设置为大于 30 秒的值，因为我有时间关键代码。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T10:18:15.123

1.  处理异常，这样它们就不会使您的系统崩溃
2.  修复您的数据库调用，使其不会超时

上述两个问题都必须落实。无论您采取什么预防措施，数据库调用总是会引发异常，因此您必须处理异常，期间。

如果您的通话时间超过 30 秒，则意味着您要么进行大量处理，要么一直被阻止。很可能你一直被阻止。要减少阻塞，请减少锁定的范围和持续时间。对这样一个通用问题给出更详细的回答将意味着基本上重申事务处理理论的所有原则......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T10:23:19.340

我的应用程序安装在非常不可靠的客户网络上......我们不得不在失去连接后重试命令的执行，因为它通常第二次通过（我们在这里谈论的是 SQL Server 2005）。

假设您正在使用事务（如果不是，那么您应该），这是我的 Commit Transaction 包装器，它可以很好地处理丢失的连接（我猜可以优化......但它只是我的代码的复制/粘贴）：

```
Public Shared Function SafeCommitRollback(ByVal Trans As SqlClient.SqlTransaction, Optional ByVal Action As TROperation = TROperation.Commit, Optional ByVal QuietMode As Boolean = False) As Boolean
    SafeCommitRollback = False
Dim TryRollback As Boolean = False
Dim ConnLost As Boolean = False
Dim msgErr As String = ""

If Action = TROperation.Commit Then
    Try
        Trans.Commit()
        SafeCommitRollback = True
    Catch ex As SqlClient.SqlException When ex.Class = 20 OrElse (ex.Class = 11 And ex.Number = -2)
        ConnLost = True
    Catch ex As System.InvalidOperationException When ex.Source = "System.Data" 'AndAlso ex.Message.StartsWith("Timeout expired.")
        ConnLost = True
    Catch ex As Exception
        TryRollback = True
        msgErr &= clsErrorHandling.ParseException(ex, True)
    End Try

    If ConnLost Then
        Try
            Trans.Commit()
            SafeCommitRollback = True
        Catch ex2 As Exception
            TryRollback = True
            msgErr &= clsErrorHandling.ParseException(ex2, True)
        End Try
    End If
Else
    TryRollback = True
End If

If TryRollback Then
    Try
        Trans.Rollback()
        If Action = TROperation.Rollback Then SafeCommitRollback = True
    Catch ex3 As Exception
        msgErr &= clsErrorHandling.ParseException(ex3)
    End Try
End If

    If Not QuietMode AndAlso msgErr.Trim <> "" Then clsMessageBox.ShowError(msgErr)
End Function 
```

我希望这有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T10:24:17.870

同意 Remus，如果发生超时，请处理。

优化数据库查询的空间很大。除非我有详细信息，否则它并不具体，但您可以尝试

使用 sql 配置文件来优化查询 使用存储过程，而不是内联代码 优化数据库架构，在 where 列上包含索引可能会有所帮助。如果返回很多行，请尝试分页只返回您需要的内容。如果超时不是由于阻塞，这里有一篇很棒的文章 -

[http://searchsqlserver.techtarget.com/generic/0,295582,sid87_gci1339694,00.html](http://searchsqlserver.techtarget.com/generic/0,295582,sid87_gci1339694,00.html)

[http://vyaskn.tripod.com/sql_odbc_timeout_expired.htm](http://vyaskn.tripod.com/sql_odbc_timeout_expired.htm)

# apache-flex - Flex 垂直滑动缩略图

> ID：1000572
> 
> 赞同：1
> 
> 时间：2009-06-16T10:03:51.063
> 
> 标签：apache-flex, actionscript-3, flex3

是否可以构建图像的垂直滑动缩略图。该示例显示在以下路径： [http ://www.rburman.com/#a=0&at=0&mi=2&pt=1&pi=10000&s=1&p=0](http://www.rburman.com/#a=0&at=0&mi=2&pt=1&pi=10000&s=1&p=0)

由于我是 flex 新手，请提出解决方案或参考任何带有源代码的示例。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T11:20:29.520

我很确定这一定是 flex 最需要做的事情之一。你试过谷歌吗？无论如何，请查看[http://blog.flexexamples.com/2008/03/08/creating-a-simple-image-gallery-with-the-flex-tilelist-control/](http://blog.flexexamples.com/2008/03/08/creating-a-simple-image-gallery-with-the-flex-tilelist-control/) 或

[土坯交换](http://www.adobe.com/cfusion/exchange/index.cfm?searchfield=gallery&search_exchange=15&search_category=-1&search_license=&search_rating=&search_platform=0&search_pubdate=&num=25&startnum=1&event=search&sticky=true&sort=0&Submit=)

或[adobe 照片库示例](http://www.adobe.com/devnet/flex/samples/photo_explorer/)

高温高压

# c++ - 我可以阻止 COM 在被调用者进程中吞下未捕获的 C++ 异常吗？

> ID：1000577
> 
> 赞同：4
> 
> 时间：2009-06-16T10:04:22.873
> 
> 标签：c++, exception, com

我正在维护一个使用 C++ 的进程间 COM 的项目。在被调用函数的顶层，直接在通过 COM 返回之前有 try/catch 语句。catch 将任何 C++ 异常转换为自定义错误代码，并通过 COM 层传回调用者。

出于调试的目的，我想禁用此 try/catch，并简单地让异常导致被调用进程崩溃（通常会发生未捕获的 C++ 异常）。对我来说不幸的是，COM 边界似乎吞下了这些未捕获的 C++ 异常，我没有崩溃。

**有没有办法改变 COM 中的这种行为？即，我希望它允许未捕获的 C++ 异常导致被调用进程崩溃。**

我希望发生这种情况，以便我可以附加一个调试器并查看引发异常的上下文。如果我只是将我们的 try/catch 留在原处，并在 catch 上设置断点，那么堆栈已经展开，所以这对我来说为时已晚。

最初编写此应用程序的“COM 大师”要么不可用，要么记不住足够的细节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-01-25T07:32:06.360

就在问这个问题一年半之后——

Raymond Chen 写了一篇关于“[如何关闭 COM '有用地'包裹在你的服务器周围的异常处理程序](http://blogs.msdn.com/b/oldnewthing/archive/2011/01/20/10117963.aspx)”的帖子。似乎是这个问题的最终答案。如果不是为了 OP，对于未来的读者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T10:13:32.090

我不认为您可以禁用此行为，但是如果您使用 Visual Studio 并且不介意被异常淹没，则有一种解决方法。如果你去 VS 中的 Debug>Exceptions 并为 C++ 异常选择“When the exception is throwed>Break into the Debugger”，它会在抛出异常的地方进入调试器。不幸的是，您随后开始计算可以忽略哪些异常以及您感兴趣的异常。

默认设置为“继续”，其中“如果未处理异常”设置为“进入调试器”。如果它还没有这样做，这将表明您必须准确找出异常被捕获的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T10:43:43.230

如果我理解正确，您的问题本质上是无法从 C++ 异常中获取堆栈跟踪。我自己从未尝试过，但实际上应该可以从 catch 块中获取堆栈跟踪。

请参阅：[从 catch 块中获取异常调用堆栈](http://blogs.msdn.com/slavao/archive/2005/01/30/363428.aspx)

本文描述了使用调试器获取堆栈跟踪的过程，但如果您不希望附加一个，可以在 catch 子句中创建转储（[一种方式](http://msdn.microsoft.com/en-us/library/ms680360.aspx)，[另](http://support.microsoft.com/kb/241215)一种方式），然后在闲暇时完成该过程.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T11:52:39.753

查看[Vectored Exception Handlers——](http://msdn.microsoft.com/en-us/library/ms679274(VS.85).aspx)根据您的具体用例，VEH 可用于拦截 SEH 异常处理并强制崩溃/转储/其他。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T10:32:05.500

[您可以使用sxe/sxd -c2 eh](http://msdn.microsoft.com/en-us/library/cc266754.aspx)在调试器中设置 2 级中断，该中断将仅捕获未处理的 C++ 异常。您还可以使用[GFlags](http://msdn.microsoft.com/en-us/library/cc265875.aspx)在加载时将调试器动态附加到您的进程。当然，您必须放弃[米老鼠调试器](http://msdn.microsoft.com/en-us/library/sc65sadd.aspx)并使用[真正的交易](http://msdn.microsoft.com/en-us/library/cc267445.aspx)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-06-16T10:10:29.553

您需要在调试器中启用“抛出异常时中断”。这样，当抛出异常时，您将立即停止并让整个调用堆栈为您服务。

# c# - 即使正确发送 SOAP 请求，Axis2 总是接收空参数？

> ID：1000578
> 
> 赞同：3
> 
> 时间：2009-06-16T10:04:45.210
> 
> 标签：c#, java, web-services, soap, axis2

我有一个用 Java 编写的 Web 服务，托管在 Axis2 / Tomcat / Apache 服务器上。我的客户端软件是用 C# 编写的。

我在 java2wsdl 生成 wsdl 文件的方式上遇到了一些恼人的问题，这在早期确实让我有些头疼，但是对于这个问题，我完全被难住了。

基本上正在发生的事情是客户端看到 Web 服务很好，并发送了一个完全有效的（或者至少在我看来是有效的）带有参数的 SOAP 请求。

在服务器上，执行了正确的 web 方法，但参数全部为空。我的 Web 服务检测到这一点并建立一个响应，客户端接收并很好地理解该响应。

我的预感是 Axis2 在某处倒塌，但考虑到我对 java2wsdl 的头痛，也许我需要的只是更改我的 wsdl 文件。

这是wsdl文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:axis2="http://stws/" xmlns:ns1="http://org.apache.axis2/xsd" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:ns0="http://stws/xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://stws/">
    <wsdl:types>
        <xs:schema xmlns:ns="http://stws/xsd" attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://stws/xsd">
            <xs:element name="GetGroups">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="0" name="serialcode" nillable="true" type="xs:string"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element name="GetGroupsResponse">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="unbounded" minOccurs="0" name="return" nillable="true" type="ns0:Group"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:complexType name="Group">
                <xs:sequence>
                    <xs:element minOccurs="0" name="ID" type="xs:int"/>
                    <xs:element minOccurs="0" name="Name" nillable="true" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
            <xs:element name="GetMessages">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="0" name="serialcode" nillable="true" type="xs:string"/>
                        <xs:element maxOccurs="unbounded" minOccurs="0" name="groupids" type="xs:int"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element name="GetMessagesResponse">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="unbounded" minOccurs="0" name="return" nillable="true" type="ns0:Message"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:complexType name="Message">
                <xs:sequence>
                    <xs:element minOccurs="0" name="date" nillable="true" type="xs:string"/>
                    <xs:element minOccurs="0" name="group" type="xs:int"/>
                    <xs:element minOccurs="0" name="messageID" type="xs:int"/>
                    <xs:element minOccurs="0" name="text" nillable="true" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
        </xs:schema>
    </wsdl:types>
    <wsdl:message name="GetMessagesRequest">
        <wsdl:part name="parameters" element="ns0:GetMessages"/>
    </wsdl:message>
    <wsdl:message name="GetMessagesResponse">
        <wsdl:part name="parameters" element="ns0:GetMessagesResponse"/>
    </wsdl:message>
    <wsdl:message name="GetGroupsRequest">
        <wsdl:part name="parameters" element="ns0:GetGroups"/>
    </wsdl:message>
    <wsdl:message name="GetGroupsResponse">
        <wsdl:part name="parameters" element="ns0:GetGroupsResponse"/>
    </wsdl:message>
    <wsdl:portType name="MyProjectPortType">
        <wsdl:operation name="GetMessages">
            <wsdl:input message="axis2:GetMessagesRequest" wsaw:Action="urn:GetMessages"/>
            <wsdl:output message="axis2:GetMessagesResponse" wsaw:Action="urn:GetMessagesResponse"/>
        </wsdl:operation>
        <wsdl:operation name="GetGroups">
            <wsdl:input message="axis2:GetGroupsRequest" wsaw:Action="urn:GetGroups"/>
            <wsdl:output message="axis2:GetGroupsResponse" wsaw:Action="urn:GetGroupsResponse"/>
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="MyProjectSOAP11Binding" type="axis2:MyProjectPortType">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <wsdl:operation name="GetMessages">
            <soap:operation soapAction="urn:GetMessages" style="document"/>
            <wsdl:input>
                <soap:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetGroups">
            <soap:operation soapAction="urn:GetGroups" style="document"/>
            <wsdl:input>
                <soap:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:binding name="MyProjectSOAP12Binding" type="axis2:MyProjectPortType">
        <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <wsdl:operation name="GetMessages">
            <soap12:operation soapAction="urn:GetMessages" style="document"/>
            <wsdl:input>
                <soap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetGroups">
            <soap12:operation soapAction="urn:GetGroups" style="document"/>
            <wsdl:input>
                <soap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:binding name="MyProjectHttpBinding" type="axis2:MyProjectPortType">
        <http:binding verb="POST"/>
        <wsdl:operation name="GetMessages">
            <http:operation location="MyProject/GetMessages"/>
            <wsdl:input>
                <mime:content type="text/xml" part="GetMessages"/>
            </wsdl:input>
            <wsdl:output>
                <mime:content type="text/xml" part="GetMessages"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GetGroups">
            <http:operation location="MyProject/GetGroups"/>
            <wsdl:input>
                <mime:content type="text/xml" part="GetGroups"/>
            </wsdl:input>
            <wsdl:output>
                <mime:content type="text/xml" part="GetGroups"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="MyProject">
        <wsdl:port name="MyProjectSOAP11port_http" binding="axis2:MyProjectSOAP11Binding">
            <soap:address location="http://localhost:8080/axis2/services/MyProject"/>
        </wsdl:port>
        <wsdl:port name="MyProjectSOAP12port_http" binding="axis2:MyProjectSOAP12Binding">
            <soap12:address location="http://localhost:8080/axis2/services/MyProject"/>
        </wsdl:port>
        <wsdl:port name="MyProjectHttpport" binding="axis2:MyProjectHttpBinding">
            <http:address location="http://localhost:8080/axis2/services/MyProject"/>
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

这是一个示例请求和响应：

要求：

```
<?xml version='1.0' encoding='utf-8'?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soap:Body>
    <GetGroups xmlns="http://stws/xsd">
      <serialcode>123456-654321</serialcode>
    </GetGroups>
  </soap:Body>
</soap:Envelope> 
```

回复

```
<?xml version='1.0' encoding='utf-8'?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <GetGroupsResponse xmlns="http://stws/xsd">
      <return>
        <ID>-101</ID>
        <name>ERROR: Empty Serial</name>
      </return>
    </GetGroupsResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

有谁知道可能出了什么问题？

响应中的错误消息只能在请求中的serialcode参数为空/null时发送，所以我猜测Axis2读取我的参数的方式有问题。

==================================================== ==========

如何解决这个问题：

这是为了响应 Aldo 关于我如何解决此问题的更多信息的请求。

我不确定为什么这个修复有效 - 也许它只是 Axis2 中的一个错误或其他什么。无论哪种方式，YMMV，因为我不知道问题是由我的设置还是其他原因引起的。我只能说，通过执行以下操作，一切都开始工作了。

无论如何，自动生成的 WSDL 文件会为 Web 请求及其参数创建复杂元素类型，即使唯一的参数是简单类型，例如字符串或整数。我所做的是检查并为参数创建正确的简单类型标记（例如“序列码”或“日期字符串”），然后将 WSDL 文件中对复杂类型的引用替换为对简单类型的引用。

下面是一个例子：

**自动生成的 WSDL 方法和参数**

```
<!--Requests-->    
<wsdl:message name="RegisterClientRequest">
    <wsdl:part name="parameters" element="ns0:RegisterClient"/>
</wsdl:message>
<wsdl:message name="GetGroupsRequest">
    <wsdl:part name="parameters" element="ns0:GetGroups"/>
</wsdl:message>

<!--Parameters-->
<xs:element name="RegisterClient">
    <xs:complexType>
        <xs:sequence>
           <xs:element minOccurs="0" name="serialcode" nillable="true" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="GetGroups">
    <xs:complexType>
        <xs:sequence>
            <xs:element minOccurs="0" name="serialcode" nillable="true" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
 </xs:element> 
```

基本上你应该做的是丢弃自动生成的参数并创建简单类型。然后修改“请求”标签以使用“类型”而不是“元素”，并使用新创建的简单类型。

**修改/固定 WSDL**

```
<!--Requests-->    
<wsdl:message name="RegisterClientRequest">
    <wsdl:part name="parameters" type="ns0:SerialCode"/>
</wsdl:message>
<wsdl:message name="GetGroupsRequest">
    <wsdl:part name="parameters" type="ns0:SerialCode"/>
</wsdl:message>

<!--Parameters-->
<xs:simpleType name="SerialCode">
    <xs:restriction base="xs:string"/>
</xs:simpleType> 
```

显然，这取决于您的参数实际上是什么。就我而言，它们都是标准的简单类型，例如字符串和整数。如果您传递了多个参数，您可能需要保留自动生成的元素，但要确保该元素引用简单类型，而不是仅仅将 type 属性包含为 'xs:string' 或类似性质的东西.

抱歉，我对此不能说得更清楚，但正如我之前所说 - 我不知道为什么会这样。

最后一件事：通过删除请求标签中的“元素”引用属性 - 您可能会在 Axis2 日志中收到解析器警告。到目前为止，这并没有给我带来任何问题，但如果您遇到麻烦，请注意这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-29T13:00:51.357

我通过查看我的 WSDL 文件解决了这个问题，并尽可能将元素分解为它们的简单类型对应物并相应地更新 XML 元素之间的引用。

我不确定为什么会这样，但无论如何它已经解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-04T08:06:09.457

如果你有一个复杂的属性，你可以这样做

前

```
 <xs:element name="getMyMenu">
            <xs:complexType>
                <xs:sequence>
                    <xs:element minOccurs="0" name="number" nillable="true" type="xs:string"/>
                    <xs:element minOccurs="0" name="var2" nillable="true" type="xs:string"/>
                    <xs:element minOccurs="0" name="var3" nillable="true" type="xs:string"/>
                    <xs:element minOccurs="0" name="var4" nillable="true" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element> 
```

后

```
 <xs:complexType name="getMyMenu">
                <xs:sequence>
                    <xs:element minOccurs="0" name="number" nillable="true" type="xs:string"/>
                    <xs:element minOccurs="0" name="var2" nillable="true" type="xs:string"/>
                    <xs:element minOccurs="0" name="var3" nillable="true" type="xs:string"/>
                    <xs:element minOccurs="0" name="var4" nillable="true" type="xs:string"/>
                </xs:sequence>
            </xs:complexType> 
```

然后改变这个

```
<wsdl:message name="getMyMenuRequest">
    <wsdl:part name="parameters" type="ns0:getUssdMenu"/>
</wsdl:message> 
```

到

```
<wsdl:message name="getMyMenuRequest">
    <wsdl:part name="parameters" type="ns:getUssdMenu"/>
</wsdl:message> 
```

应该是这样！它为我做到了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T13:54:38.337

这只是一种预感，但也许您遇到了命名空间问题。如果您关注 wsdl 的这一部分，请注意您的参数有一个用于元素的“ns0”命名空间，但在稍后定义的操作中，看起来您正在使用“axis2”命名空间。对于我所有的 Axis2 生成的 WSDL，这两个名称空间是相同的。

```
<wsdl:message name="GetMessagesRequest">
    <wsdl:part name="parameters" element="ns0:GetMessages"/>
</wsdl:message>
<wsdl:message name="GetMessagesResponse">
    <wsdl:part name="parameters" element="ns0:GetMessagesResponse"/>
</wsdl:message>
<wsdl:message name="GetGroupsRequest">
    <wsdl:part name="parameters" element="ns0:GetGroups"/>
</wsdl:message>
<wsdl:message name="GetGroupsResponse">
    <wsdl:part name="parameters" element="ns0:GetGroupsResponse"/>
</wsdl:message>

<wsdl:portType name="MyProjectPortType">
    <wsdl:operation name="GetMessages">
        <wsdl:input message="axis2:GetMessagesRequest" wsaw:Action="urn:GetMessages"/>
        <wsdl:output message="axis2:GetMessagesResponse" wsaw:Action="urn:GetMessagesResponse"/>
    </wsdl:operation>
    <wsdl:operation name="GetGroups">
        <wsdl:input message="axis2:GetGroupsRequest" wsaw:Action="urn:GetGroups"/>
        <wsdl:output message="axis2:GetGroupsResponse" wsaw:Action="urn:GetGroupsResponse"/>
    </wsdl:operation>
</wsdl:portType> 
```

您可以检查的另一件事是验证您从 java2wsdl 获得的 wsdl 是否与axis2 生成的相同。除非您在 services.xml 中更改了“useoriginalwsdl”的默认设置，否则这些 wsdl 可能“看起来”不同。我从来不需要手动执行 java2wsdl 来让我的 web 服务正常运行......

所以基本上，在浏览器中点击您的服务 URL 并在 url 末尾添加 ?wsdl ...您应该获得一个 wsdl 以进行比较。

此外，让您的客户端从服务器的 wsdl 生成存根，而不是由 java2wsdl 生成的存根（假设您最初使用的是 java2wsdl 中的 wsdl）。同样，我们不必将手动生成的 wsdl 传递给任何人……他们只是简单地使用了从服务器动态生成的……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-26T13:20:00.487

您是否尝试过发送这样的请求？

```
<?xml version='1.0' encoding='utf-8'?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soap:Body>
    <request>
      <GetGroups xmlns="http://stws/xsd">
        <serialcode>123456-654321</serialcode>
      </GetGroups>
    </request>
  </soap:Body>
</soap:Envelope> 
```

我所有的请求在实际请求参数之前都有**请求标签。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-24T15:34:11.347

试试这个：123456-654321

将 xmlns="" 放入参数标签中。我有同样的问题，我不知道我可以修改什么来接收没有 xmlnx 的参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-04T00:36:58.890

我有另一个修复。我最终发现，如果我不让我的 IDE (Netbeans 6.8) 生成 WSDL，那么 Web 服务就会起作用。或者，如果我删除它，取消选中生成选项并重新部署，那么它就可以工作了。

将 Netbeans 生成的 WSDL 与服务器生成的 WSDL 进行比较，我注意到以下差异：

*   xmlns:ns0="http:///xsd"
*   wsdl:definitions 标记末尾的目标命名空间有一个斜杠
*   ns0 用于选择组成 wsdl:message 标记的元素

删除所有这些并重新部署工作！

# vba - Word 宏，存储当前选择（VBA）

> ID：1000582
> 
> 赞同：7
> 
> 时间：2009-06-16T10:05:40.280
> 
> 标签：vba, ms-word

我有一个 Word 文档，其中包含大约 4000 个表单字段，之后我必须将其导出到数据库。问题是4000个字段中没有一个在“书签”字段中有信息，因此我无法获取存储在其中的信息。

我正在尝试创建一个宏来帮助编写书签（FormField.Name）的过程，但无法做到正确。问题是我想更改用户选择中包含的 FormFields 的名称，并且只有它们。我设法找到了这个解决方案：

```
Sub Macro2()
    Dim myFile As String
    Dim fnum As Integer
    Dim sFileText As String
    Dim currentField As FormField

    myFile = "c:\testMacro.txt"
    fnum = FreeFile()
    Open myFile For Input As fnum

    For Each currentField In Selection.FormFields
        Input #fnum, sFileText

        With currentField
            .StatusText = sFileText
            .OwnStatus = True
        End With

        currentField.Select
        Application.WordBasic.FormFieldOptions Name:=sFileText
    Next currentField
End Sub 
```

但它不起作用，因为在 For Each 循环中更改了 Selection 对象，之后它只包含选择的第一个 FormField。

所以这是我的问题，有没有办法保存当前选择并在更改后将其加载回来。

我试过了 ：

```
Dim mySelection as Selection
Set mySelection = Selection 
```

但是如果我改变了选择，变量 mySelection 也会改变（这是很正常的......）而且我没有找到任何方法来克隆对象。

有人知道如何做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-16T11:04:02.907

为您的“副本”使用不同的参考：

```
Dim selBkUp As Range
Set selBkUp = ActiveDocument.Range(Selection.Range.Start, Selection.Range.End) 
```

或使用副本：

```
Dim selBkUp As Range
selBkUp = Selection.Range.Duplicate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T15:20:17.227

`Selection.Range`是自动重复的，所以你可以这样做：

```
Dim selBkUp As Range
Set selBkUp = Selection.Range 
```

# c# - 单击主应用程序窗口时如何聚焦模态 WPF 窗口

> ID：1000588
> 
> 赞同：13
> 
> 时间：2009-06-16T10:07:00.870
> 
> 标签：c#, wpf, window

我有我的 MainApplication 窗口，它使用 .ShowDialog() 启动一个新窗口，因此它是模态的。

```
UploadWindow uploadWindow = new UploadWindow();
uploadWindow.ShowDialog(); 
```

现在用户经常打开这个窗口，它可能会在其他窗口下丢失。当单击 MainApplication 时，您会收到类似错误的哔声并且无法与之交互，因此模态窗口按预期正确阻塞，但如果模态窗口此时聚焦于向用户显示它会很好还开着。

目前，它看起来好像 MainApplication 窗口已锁定。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-06-16T10:16:04.847

尝试设置对话框的所有者：

```
var uploadWindow = new UploadWindow();
uploadWindow.Owner = this;
uploadWindow.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-05T09:29:58.673

我有问题，我不能用这个，如果有人有同样的问题，你可以用

```
Window.GetWindow(this) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-02T01:40:05.467

因为我使用的是 MVVM，所以我没有从 GUI 创建代码。我用过这个。

```
var uploadWindow = new UploadWindow();
uploadWindow.Owner = Application.Current.MainWindow;
uploadWindow.ShowDialog(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T06:53:15.370

如果上述所有解决方案都尝试过但仍然面临同样的问题，那么这是您经过测试和验证的解决方案，请转到您的窗口 xaml 并添加

ResizeMode = "NoResize"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-22T09:11:40.463

现在你可以设置`Topmost = true`

```
var uploadWindow = new UploadWindow();
uploadWindow.Topmost = true; 
```

# .net - 如何使用 silverlight 3 DataGrid 插入新行（而不使用 DataForm）？

> ID：1000591
> 
> 赞同：3
> 
> 时间：2009-06-16T10:07:59.370
> 
> 标签：.net, silverlight, silverlight-3.0, ria

在 silverlight 2 中，可以通过 DataGrid 向集合中添加新行。但在silverlight 3 中，如果不使用DataForm，我无法弄清楚如何做到这一点。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-04-23T00:13:40.077

在源中添加空白

```
lst = New genericList With { _
                      .field1 = "", _
                      .field2 = "", _
                      .field3 = "", _
                      .field4 = ""}
rtnlst.Add(lst) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-26T16:54:39.417

过去我很幸运，只需在数据源中添加一个空白行，然后在更新数据网格时检查非空值。用户只需单击空行并添加信息，更新例程就可以从那里插入值。

# mysql - 是否可以在 RAM 中加载数据库？

> ID：1000595
> 
> 赞同：15
> 
> 时间：2009-06-16T10:09:00.833
> 
> 标签：mysql

我想将 MYSQL 数据库加载到计算机的 RAM 中，有没有办法做到这一点？我在 Linux 下运行这个数据库。另外，如果可以的话，有没有一个好的备份方法，因为如果计算机意外关闭，我会丢失所有数据。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-06-16T10:26:12.377

如果您的缓冲池足够大，那么您的数据实际上就是一个带有磁盘备份副本的内存数据库。不要玩弄 RAM 数据库，只需将缓冲池的大小设置为尽可能大即可。

读这个：

[http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_buffer_pool_size](http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_buffer_pool_size)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-16T10:11:22.547

是的，您可以使用[MEMORY 引擎](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)。至于备份，这是你的电话。您从未说过，例如您想多久存储一次磁盘。但是您可以使用传统的[MySQL 复制](http://dev.mysql.com/doc/refman/5.0/en/replication.html)或您自己的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-16T11:44:29.317

如果您使用的是 innodb 表，那么我建议您像上面建议的 S.Lott 那样调整缓冲池大小。如果您有内存，则将其设置为数据库大小的 110% 左右。

如果您的数据库大于 50mb，您还需要考虑增加 innodb_log_file_size。请参阅[http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_log_file_size](http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_log_file_size) 可能约为缓冲池大小的 25-50%，但最大为 1gb。

innodb_log_file_size 调整起来有点棘手。您需要关闭数据库，将当前日志文件移动到备份位置，并让 mysql 在重新启动时重新创建它们（即在您更改 my.cnf 中的值之后）。谷歌它，你会找到一些答案。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-16T10:11:00.660

绝对，例如在 linux 下，您可以将数据库挂载到[tmpfs](http://en.wikipedia.org/wiki/TMPFS)

# javascript - event.preventDefault() 函数在 IE 中不起作用

> ID：1000597
> 
> 赞同：206
> 
> 时间：2009-06-16T10:09:03.923
> 
> 标签：javascript, internet-explorer, events, mootools, preventdefault

以下是我的 JavaScript (mootools) 代码：

```
$('orderNowForm').addEvent('submit', function (event) {
    event.preventDefault();
    allFilled = false;
    $$(".required").each(function (inp) {
        if (inp.getValue() != '') {
            allFilled = true;
        }
    });

    if (!allFilled) {
        $$(".errormsg").setStyle('display', '');
        return;
    } else {
        $$('.defaultText').each(function (input) {
            if (input.getValue() == input.getAttribute('title')) {
                input.setAttribute('value', '');
            }
        });
    }

    this.send({
        onSuccess: function () {
            $('page_1_table').setStyle('display', 'none');
            $('page_2_table').setStyle('display', 'none');
            $('page_3_table').setStyle('display', '');
        }
    });
}); 
```

在除 IE 之外的所有浏览器中，这都可以正常工作。但在 IE 中，这会导致错误。我有 IE8，所以在使用它的 JavaScript 调试器时，我发现该`event`对象没有`preventDefault`导致错误的方法，因此表单正在提交。在 Firefox（我使用 Firebug 发现）的情况下支持该方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：480
> 
> 时间：2009-06-16T10:10:20.707

在 IE 中，您可以使用

```
event.returnValue = false; 
```

达到同样的效果。

并且为了不出错，你可以测试一下preventDefault的存在：

```
if(event.preventDefault) event.preventDefault(); 
```

您可以将两者结合起来：

```
event.preventDefault ? event.preventDefault() : (event.returnValue = false); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-21T14:29:52.503

如果您通过 mootools 的 addEvent 函数绑定事件，您的事件处理程序将获得作为参数传递的固定（增强）事件。它将始终包含 preventDefault() 方法。

试试这个小提琴看看事件绑定的区别。 [http://jsfiddle.net/pFqrY/8/](http://jsfiddle.net/pFqrY/8/)

```
// preventDefault always works
$("mootoolsbutton").addEvent('click', function(event) {
 alert(typeof(event.preventDefault));
});

// preventDefault missing in IE
<button
  id="htmlbutton"
  onclick="alert(typeof(event.preventDefault));">
  button</button> 
```

对于所有**jQuery**用户，您可以在需要时修复事件。假设您使用 HTML onclick=".." 并获取缺少 preventDefault() 的 IE 特定事件，只需使用此代码即可获取它。

```
e = $.event.fix(e); 
```

之后 e.preventDefault(); 工作正常。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-12-13T13:55:36.313

我知道这是一篇很老的帖子，但我只是花了一些时间试图在 IE8 中完成这项工作。

IE8 版本似乎存在一些差异，因为此处和其他线程中发布的解决方案对我不起作用。

假设我们有以下代码：

```
$('a').on('click', function(event) {
    event.preventDefault ? event.preventDefault() : event.returnValue = false;
}); 
```

在我的 IE8`preventDefault()`方法中，由于 jQuery 存在，但无法正常工作（可能是因为以下几点），所以这将失败。

即使我将`returnValue`属性直接设置为false：

```
$('a').on('click', function(event) {
    event.returnValue = false;
    event.preventDefault();
}); 
```

这也行不通，因为我只是设置了 jQuery 自定义事件对象的一些属性。

唯一对我有用的解决方案是像这样设置**全局变量**`returnValue`的属性： **`event`**

 **```
$('a').on('click', function(event) {
    if (window.event) {
        window.event.returnValue = false;
    }
    event.preventDefault();
}); 
```

只是为了让那些试图说服 IE8 工作的人更容易。我希望 IE8 很快就会在痛苦的死亡中死去。

**更新：**

正如[sv_in](https://stackoverflow.com/users/22550/sv-in)指出的那样，您可以使用`event.originalEvent`获取原始事件对象并`returnValue`在原始事件对象中设置属性。但我还没有在我的 IE8 中测试过它。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-16T10:26:16.090

Mootools 重新定义了 Event 对象中的 preventDefault。所以你的代码应该在每个浏览器上都能正常工作。如果不支持，则 mootools 中的 ie8 支持存在问题。

您是否在 ie6 和/或 ie7 上测试过您的代码？

医生说

> 使用 addEvent 添加的每个事件都会自动获取 mootools 方法，而无需手动实例化它。

但如果没有，你可能想试试

```
new Event(event).preventDefault(); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-09T22:52:54.940

```
if (e.preventDefault) {
    e.preventDefault();
} else {
    e.returnValue = false;
} 
```

在 IE 9 和 Chrome 上测试。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-11-14T15:27:19.907

要在 IE9 之后禁用键盘键，请使用：`e.preventDefault();`

要在 IE7/8 下禁用**常规键盘键**`e.returnValue = false;`，请使用：或`return false;`

如果您尝试禁用**键盘快捷键**（使用 Ctrl，如`Ctrl+F`），则需要添加这些行：

```
try {
    e.keyCode = 0;
}catch (e) {} 
```

这是仅适用于 IE7/8 的完整示例：

```
document.attachEvent("onkeydown", function () {
    var e = window.event;

    //Ctrl+F or F3
    if (e.keyCode === 114 || (e.ctrlKey && e.keyCode === 70)) {
        //Prevent for Ctrl+...
        try {
            e.keyCode = 0;
        }catch (e) {}

        //prevent default (could also use e.returnValue = false;)
        return false;
    }
}); 
```

参考：[如何在 IE7 / IE8 中禁用键盘快捷键](http://social.msdn.microsoft.com/Forums/ie/en-US/0d69b007-34de-4d7c-b8fc-fe7bb88b95d4/how-to-disable-keyboard-shortcuts-in-ie7-ie8?forum=iewebdevelopment)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-09-18T05:29:01.527

这是我一直在使用 jquery 1.3.2 和 09-18-2009 的夜间构建测试的功能。让我知道你的结果。在 OSX 上的 Safari、FF、Opera 中，一切都运行良好。它专门用于修复有问题的 IE8 错误，可能会产生意想不到的结果：

```
function ie8SafePreventEvent(e) {
    if (e.preventDefault) {
        e.preventDefault()
    } else {
        e.stop()
    };

    e.returnValue = false;
    e.stopPropagation();
} 
```

用法：

```
$('a').click(function (e) {
    // Execute code here
    ie8SafePreventEvent(e);
    return false;
}) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-11-11T18:57:49.777

`preventDefault`是一个普遍的标准；每次想要兼容旧的 IE 版本时使用 adhoc 很麻烦，最好使用 polyfill：

```
if (typeof Event.prototype.preventDefault === 'undefined') {
    Event.prototype.preventDefault = function (e, callback) {
        this.returnValue = false;
    };
} 
```

这将修改 Event 的原型并添加此功能，这是一般 javascript/DOM 的一个很棒的功能。现在您可以`e.preventDefault`毫无问题地使用了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-05T10:37:11.590

`return false`在您的侦听器中应该可以在所有浏览器中使用。

```
$('orderNowForm').addEvent('submit', function () {
    // your code
    return false;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-22T22:51:11.990

FWIW，如果以后有人重新讨论这个问题，你也可以检查你正在传递给你的 onKeyPress 处理函数的内容。

当我错误地传递 onKeyPress(this) 而不是 onKeyPress(event) 时，我遇到了这个错误。

只是要检查其他东西。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-16T11:37:15.313

我得到了一种功能检查方法的帮助。此方法适用于 IE8

```
if(typeof e.preventDefault == 'function'){
  e.preventDefault();
} else {
  e.returnValue = false;
} 
```**

# c# - 使用空参数调用 Type.MakeGenericType()

> ID：1000603
> 
> 赞同：3
> 
> 时间：2009-06-16T10:10:01.957
> 
> 标签：c#, generics

我有一个通用类型：

```
MyType<T1, T2, T3> 
```

我想这样做：

```
typeof(MyType<,,>).MakeGenericType(new [] { null, null, string}); 
```

所以我最终得到：

```
MyType<,,string> 
```

但是，您不能将 null 类型传递给 MakeGenericType（请参阅：http: [//msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)）。

我如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-16T10:19:42.060

好的，我像这样避免了它：

```
var args = typeof(MyType<,,>).GetGenericArguments();
args[2] = typeof(string);
typeof(MyType<,,>).MakeGenericType(args); 
```

# c# - 绑定到另一个绑定列表中的项目的属性

> ID：1000608
> 
> 赞同：1
> 
> 时间：2009-06-16T10:10:54.467
> 
> 标签：c#, .net, data-binding

我有一个**验证**对象列表 - 验证。

```
public class Validation
{
       public IList<KeyValuePair<string, string>> Arguments
       { //(...) }
} 
```

在表单上有一个绑定到验证列表的列表和一个绑定到验证列表中当前**验证的****参数**列表的 DataGridView 。我允许用户在对话框窗口中编辑选定的**验证对象。**用户可以修改**Arguments**集合。关闭窗口后，DataGridView 中显示的项目应刷新。他们没有。此外，如果编辑后**参数**列表为空，则会引发 IndexOutOfRangeException。

 ******我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T10:41:51.783

数据绑定有几个重要的接口；特别是`IBindingList`，它具有可以侦听的`ListChanged`事件。`DataGridView`

是否可以将具体列表更改为 a `BindingList<T>`？那应该免费为您提供大部分内容吗？您不需要更改返回类型 as `BindingList<T> : IList<T>`，并且`DataGridView`只知道**实际**对象（它不关心您是否调用它`IList<T>`）。

另一个实用的选项是简单地重置 - 上的数据绑定`DataGridView`- 可能设置`DataSource`为`null`然后返回：

```
object tmp = grid.DataSource;
grid.DataSource = null;
grid.DataSource = tmp; // low-tech data-source reset 
```******

# sql - 在 MySQL 中更新电子邮件地址（正则表达式？）

> ID：1000612
> 
> 赞同：7
> 
> 时间：2009-06-16T10:11:09.503
> 
> 标签：sql, mysql, regex

有没有办法用正则表达式更新 MySQL 中的每个电子邮件地址？我想要做的是将something@domain.xx 地址更改为something@domain.yy。是否可以使用 SQL 或我应该使用 PHP 例如？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-06-16T10:25:00.880

您可以搜索 a `REGEXP`with `MySQL`，但不幸的是，它无法返回匹配的部分。

可以这样做`SQL`：

```
UPDATE  mytable
SET     email = REPLACE(email, '@domain.xx', '@domain.yy')
WHERE   email REGEXP '@domain.xx$' 
```

您可以省略该`WHERE`子句，但它可能会导致意外结果（例如`@example.xxx.com`将替换为`@example.yyx.com`），因此最好保留它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-10T05:34:37.547

```
UPDATE tableName
SET email = CONCAT(SUBSTRING(email, 1, locate('@',email)), 'domain.yy')
WHERE email REGEXP '@domain.xx$'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T10:29:05.303

如果可能的话，我宁愿用 PHP 来做。不幸的是，Mysql 不允许在正则表达式中捕获匹配的部分。甚至更好：您可以像这样将两者结合起来，例如：

```
$emails = fetchAllDistinctEmailsIntoAnArray();
# Make the array int-indexed:
$emails = array_values($emails);
# convert the mails
$replacedEmails = preg_replace('/xx$/', 'yy', $emails);
# create a new query
$cases = array();
foreach ($emails as $key => $email) {
    # Don't forget to use mysql_escape_string or similar!
    $cases[] = "WHEN '" . escapeValue($email) .
               "' THEN '" . escappeValue(replacedEmails[$key]) . "'";
}
issueQuery(
    "UPDATE `YourTable`
    SET `emailColumn` =
        CASE `emailColumn`" .
            implode(',', $cases) .
        " END CASE"); 
```

请注意，此解决方案将需要相当长的时间，如果您的数据库中有许多条目，您可能会耗尽内存或达到执行限制。您可能想要查看[`ignore_user_abort()`](http://de.php.net/manual/en/function.ignore-user-abort.php)并[`ini_set()`](http://de.php.net/manual/en/function.ini-set.php)更改此脚本的内存限制。

免责声明：脚本未经测试！不要在不理解/测试代码的情况下使用（可能会弄乱你的数据库）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T10:19:52.000

没有检查它，因为没有安装 mysql，但似乎它可以帮助你

```
update table_name 
set table_name.email = substr(table_name.email, 0, position("@" in table_name.email) + 1) 
                       + "new_domain"; 
```

PS。正则表达式不会帮助您进行更新，因为它只能帮助您在字符串中找到子字符串的特定入口，而不是在字符串与模式匹配时进行检查。[在这里](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_position)您可以找到相关功能的参考。

# .net - ComponentOne 3D Surface Map Chart 的替代品

> ID：1000623
> 
> 赞同：6
> 
> 时间：2009-06-16T10:13:08.407
> 
> 标签：.net, winforms, controls, charts, componentone

我们正在为我们正在进行的一个新项目研究替代控制库。要求之一是以表面图的形式显示数据，如下面的 ComponentOne 图表所示。

![替代文字](../Images/b19b7c199fbd02631e2750e6d095b673.png)

我们过去使用过 C1 控件，但对它并不完全满意 - 所以想知道是否有人可以推荐一些替代品。

有一些麻烦找到任何，所以所有的帮助表示赞赏。

注意：这是一个 .NET 3.5 WinForms 应用程序

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-18T13:59:19.087

以下是一些具有您正在寻找的图表类型的商业提供商：

1.  [ChartFX for .NET](http://www.softwarefx.com/sfxNetProducts/ChartFX/) -包含 3D 表面的[可用图表库](http://www.softwarefx.com/sfxGallery/)
2.  [Nevron Chart for .NET](http://www.nevron.com/Products.ChartFor.NET.Overview.aspx) -[可用曲面图库](http://www.nevron.com/Gallery.ChartFor.NET.ChartTypes.GridSurfaceChartGallery.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-19T10:25:22.770

您可能已经遇到过这个问题，但我想我会指出 CodeProject 文章[*Plot 3Dsurfaces*](http://www.codeproject.com/KB/graphics/surfacePloter.aspx?fid=388443&df=180&mpp=25&noise=3&sort=Position&view=None)。我不确定它的功能集是否足以满足您的要求，但如果您还没有，那么值得研究一下。明显的优势是它是免费和开源的（因此您可以根据您的特定需求对其进行扩展）。

示例截图：

![](../Images/0c5d110d9e31cb10af89c5ab45f47f00.png)

另一个看起来相当完整的可能替代方案是[F# for Visualization](http://www.ffconsultancy.com/products/fsharp_for_visualization/index.html)库。这是商业用途，但从外观上看，它的功能可能*超出*您的需要。不要让它为 F# 设计的事实让您失望 -*您仍然应该直接从 C# 使用它*（或者可能使用少量互操作以使事情更清洁）。当然，C# 提供的函数式编程支持应该使这项工作相对容易。

示例截图：

[![](../Images/7961a23f12eb5bbf0969c3baac7d6e4e.png)](https://i.stack.imgur.com/l6c0m.jpg)
[（来源：[ffconsultancy.com](http://www.ffconsultancy.com/products/fsharp_for_visualization/images/surface_big.jpg)）]

我建议了第一个（CodeProject）选项，以防万一满足您的要求，尽管很可能不是。F# 几乎肯定会足够好。请注意，F# 是一种函数式语言（因此通常用于数学和科学应用程序），它可能是与绘图相关的任何功能的绝佳选择 - 您甚至可能需要考虑编写程序的部分绘图语言，尤其是当它变得相对复杂时。

希望有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-18T13:52:19.973

这可能不关我的事，因为我从未使用过 C#/.NET 框架/等，但这看起来像是矩阵的网格图。

我们在 Uni 中被介绍到[Octave](http://www.network-theory.co.uk/docs/octave3/octave_159.html)，其中一个包允许我们对矩阵进行网格绘制。Octave 用于绘图的包是[GNUPlot](http://www.gnuplot.info/)。我不知道您是否可以将其与 .NET 3.5 挂钩，所以它可能没有多大帮助，但[看看它是可行的](http://www.gnuplot.info/screenshots/index.html#demos)。

[![八度网格图](../Images/f2143ed5c9b2a8d46524323deb298a26.png)](https://i.stack.imgur.com/Z2C5Y.png)
[（来源：[network-theory.co.uk](http://www.network-theory.co.uk/docs/octave3/mesh.png)）]

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-18T14:00:04.717

取决于你想花多少钱，有很多选择，我们在 3D 图形方面做了各种各样的工作，并且在过去进行了广泛的探索下面我提供了一些链接来帮助你开始

*   来自 Gigasoft 的 3D 科学图表 - [http://www.gigasoft.com](http://www.gigasoft.com)

*   Gino Graphics 的 Ginosurf - [http://www.gino-graphics.com/products/surf.htm](http://www.gino-graphics.com/products/surf.htm)

*   .Net 的 Matlab 构建器 - [http://www.mathworks.com/products/netbuilder](http://www.mathworks.com/products/netbuilder/)

*   Mercury Systems 的 Meshviz 和 OpenInventor - [http://www.vsg3d.com/](http://www.vsg3d.com/)

*   总是有 Directx 及其对托管代码的端口

希望这是有用的

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-07-24T09:34:19.983

我建议对 Nevron 保持谨慎。我拥有丰富的经验，因为在过去的 5 年里，我一直在将它们用于企业 BI 应用程序中的所有图表。

Nevron 有很多值得喜欢的地方：

*   图表看起来很棒
*   API 很不错
*   有很多图表类型
*   价格合适（它们比许多竞争对手如 Dundas 便宜）
*   技术支持还不错，一般可以直接给开发者发邮件，得到他们的好评。如果您准备好为要求提供一些输入，他们非常乐意为您添加新的图表类型。他们为我构建了一个很棒的维恩图组件:)

到目前为止一切都好吗？对我来说，杀手必须是新版本套件发布时所涉及的痛苦。我们将 Nevron 用于我们的图表，将 Infragistics 用于我们的 UI 组件。我一般可以在半天之内将我们的应用程序升级到 Infragistics 的新版本。新的 Nevron 升级可能需要长达 4 周的时间。

他们已经多次更改了他们的对象模型，并且在打破界面兼容性和改变你做事的方式方面有着良好的记录。每次我必须进行 Nevron 升级时，我都有一种恐惧感……

另一个警告词，他们对轴标签的处理还有很多不足之处。我花了很多时间试图让轴标签看起来不错。在过去的几个版本中，对此的支持有所改进，但还没有。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-25T01:48:53.887

我们以前使用过 Nevron 来制作其他 WinForms 图表，它们非常棒——产品有效，技术支持真的很有帮助。

他们似乎在做表面图表（至少据我了解）： www.nevron.com/Gallery.ChartFor.NET.ChartTypes.GridSurfaceChartGallery.aspx www.nevron.com/Gallery.ChartFor.NET.ChartTypes.MeshSurfaceChartGallery.aspx www .nevron.com/Gallery.ChartFor.NET.ChartTypes.TriangulatedSurface.aspx

（我试图让它们成为正确的链接，但因为我是新人，所以不允许添加多个链接）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-07-22T07:33:32.650

我建议使用[http://www.obacs.com](http://www.obacs.com)的 Scinet Chart 。与替代品相比，它有很多图表选项并且便宜得多。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-06-20T19:38:11.437

您可能需要考虑来自[Software Siglo XXI的](http://www.softwaresigloxxi.com)**Super 2d/3d Graph Library**（它是免版税且非常便宜的）。

示例代码：

```
Imports Super2d3dGraphLibrary
Public Class Form1
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
  Dim sf As New SeriesFactory
  Dim x, y, z As Integer
  For x = 0 To 100 Step 5
    For z = 0 To 100 Step 5
      y = 30 - Math.Sqrt((x - 50) * (x - 50) + (z - 50) * (z - 50)) + Rnd() * 5
      If y < 0 Then
        y = 0
      End If
      sf.AddPoint(x, y, z)
    Next
  Next
  sf.GenerateMesh()
  With Super2d3dGraph1
    .LicenseeIdentifier = "PROF"
    .Title = "Surface chart from random X/Y/Z points"
    .Style = Super2d3dGraphLibrary.STYLE2D3D.STYLE3D_XYZ_SURFACE_TRIANGLE
    .BackStyle = STYLEBACKGROUND.STYLEBACKGROUND_GRADIENT
    .ShowXAxis = True
    .XAxisTitle = "X-Axis"
    .XAxisScaleMaximum = 100
    .XAxisScaleMinimum = 0
    .XAxisScaleMode = SCALEMODE.SCALEMODE_FIXED
    .XAxisNumericFormat = "0"
    .ShowDividersX = True
    .ShowYAxis = True
    .YAxisTitle = "Y-Axis"
    .YAxisNumericFormat = "0"
    .ShowZAxis = True
    .ZAxisTitle = "Z-Axis"
    .ZAxisScaleMaximum = 100
    .ZAxisScaleMinimum = 0
    .ZAxisScaleMode = SCALEMODE.SCALEMODE_FIXED
    .ZAxisNumericFormat = "0"
    .ShowDividersZ = True
    .ShowLegend = False
    .ShowValues = False
    .ShowDataTable = False
    .SurfaceBrushStyle = New SolidBrush(Color.LightGreen)
    .SurfaceBrushMinBrightness = 30
    .SeriesLineStyle = New Pen() {New Pen(Color.Black)}
    sf.ApplyTo(Super2d3dGraph1)
  End With
End Sub
End Class 
```

这是链接： [Super 2d/3d Graph Library 产品页面](http://www.softwaresigloxxi.com/Super2d3dGraphLibrary.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-17T17:55:07.570

如果不至少提及[ILNumerics](http://ilnumerics.net/surface-plots.html) ，这个列表怎么可能是完整的？

免责声明：我在 ILNumerics 团队工作时有偏见。但我们的[可视化引擎](http://ilnumerics.net/Visualization-API.html)带来了当今最灵活、最快速的曲面图。这是我们的客户所说的。您可以免费试用 - 甚至可以直接在我们的网站上试用。

编辑：在 ILNumerics 中对曲面图进行非常简单的设置，如下所示：

[![在此处输入图像描述](../Images/ba42ee8dcc44a3fc14d4210f9b305f9d.png)](https://i.stack.imgur.com/WGGTh.png)

```
var scene = new ILScene() {
  new ILPlotCube(twoDMode: false) {
    // we could define concrete data as matrix here. But for now
    // we go with an analytic expression instead: 
    new ILSurface(
      (x, y) => (float)(Math.Sin(x) * Math.Cos(y) 
                * Math.Exp(-(x * x + y * y) / 46)),
       colormap: Colormaps.Flag) // { new ILColorbar() }
  }
}; 
```

所有场景都由场景图中的简单对象组成。您可以修改和控制一切。这是专门用于科学数据的。尝试在线修改此示例：

[http://ilnumerics.net/ilcc.php?ilc=ia13490](http://ilnumerics.net/ilcc.php?ilc=ia13490)

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2009-06-16T10:17:49.490

[过去我对Dundas Chart](http://www.dundas.com/Products/Chart/NET/index.aspx)非常满意——你可以看看它是否适合你的需要。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2009-06-25T01:35:12.197

您可能还想尝试：

*   Telerik[图表](http://www.telerik.com/products/winforms/chart.aspx)
*   DevExpress[图表](http://www.devexpress.com/Products/NET/Controls/Charting/)
*   Perpetuum 软件[图表模型套件](http://www.perpetuumsoft.com/Product.aspx?lang=en&pid=42)
*   Infragistics [NetAdvantage WebChart](http://www.infragistics.com/dotnet/netadvantage/winforms/winchart.aspx#Overview)

# jquery - 表格布局中的 Jquery 选项卡

> ID：1000629
> 
> 赞同：0
> 
> 时间：2009-06-16T10:14:22.290
> 
> 标签：jquery

我要“制表符”的部分位于嵌套表格布局内。

它在这样的桌子混乱之后开始：

```
<table> <tr> <td> <table> <tr> <td> <table> <tr> <td> 
        <div id ="SearchModuleContainer">
       <ul class="tabNavigation">
          <li><a href="#PersonSearchPanel"></a></li>
          <li><a href="#TypeSearchPanel"></a></li>
       </ul>

      <div id="PersonSearchPanel" runat="server">
        <table width="100%" border="0" cellspacing="0">
           <tr>
             <td align="center" valign="top">
                <table width="100%" border="0" cellpadding="0" cellspacing="0">
                   <tr>
            ...
            ...
      </div>
      <div id="TypeSearchPanel" runat="server">
        <table width="100%" border="0" cellspacing="0">
           <tr>
             <td align="center" valign="top">
                <table width="100%" border="0" cellpadding="0" cellspacing="0">
                   <tr>
            ...
            ...
      </div>
    </div> 
```

我已经向 jquery-ui-1.7.1 添加了一个引用，并且在我的 js 文件中，我有：

```
$(document).ready(function() {
    $("#SearchModuleContainer").tabs();
}); 
```

我的问题是，我是否遗漏了什么，或者在像这样的“老式”混乱表格布局中使用 jquery 时是否存在一些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T11:46:42.807

您需要确保为**ui-tabs-hide、ui-tabs-selected**类正确实现了 css。如果您没有正确执行此操作，则该脚本似乎无法正常工作。检查它的最简单方法是添加以下内容：

```
<link type="text/css" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7/themes/smoothness/jquery-ui.css" /> 
```

只需在您的 javascript 文件之前的 html 页面的 head 部分中添加它。我测试了您的示例，并且选项卡功能适用于表格。

[[编辑] 我在这里](http://snipplr.com/view/15989/stackoverflow-answer-jquery-tabs/)粘贴了我的测试示例中的源代码。

# c# - C# - 比较字符串时显示差异

> ID：1000635
> 
> 赞同：5
> 
> 时间：2009-06-16T10:15:10.730
> 
> 标签：c#, asp.net, string

在我的 asp.net 项目中，我有两个字符串（实际上，它们存储在 Session 对象中，然后我执行 .ToString() ）

这个项目是我网站上免费日语练习的一部分（现在只有意大利语，所以我不会链接/垃圾邮件）

现在我做一个`if (original == inputted.ToLower())`，但我想比较字符串并突出显示屏幕上的差异

像这样：

原文：hiroyashi
作者：hiro **yo** shi

我正在考虑比较两个字符串并将差异保存在另一个变量中，使用 HTML 标签，然后在文字控件上显示它......但是......如果差异很多，或者输入更短......如何要做到这一点？

看起来需要大量的编码……还是不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T10:20:22.667

我似乎记得不久前有人问过这个问题，基本上他们是针对差异引擎的。

快速搜索 codeplex 会出现： [http ://www.codeplex.com/site/search?projectSearchText=diff](http://www.codeplex.com/site/search?projectSearchText=diff)

可能值得通过一些出现的内容进行搜索 - 您可以将某些内容插入现有代码？

干杯，特里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T10:50:56.960

John Resig 编写了一个[javascript diff 算法](http://ejohn.org/files/jsdiff.js)，但他从他的网站上删除了解释它的作用的页面。不过，它仍然可以通过[谷歌缓存](http://74.125.153.132/search?q=cache:mJ-TvGeQO4sJ:ejohn.org/projects/tags/diff/+site:ejohn.org+resig+javascript+diff&cd=15&hl=en&ct=clnk&gl=au)获得。*抱歉，如果链接不好 John*。它应该做你想做的事，别人拿走了它，调整了它，并在[这里](http://blog.lotusnotes.be/domino/archive/2007-10-29-js-diff.html)发表了一篇关于它的文章——完整的[测试页面](http://blog.lotusnotes.be/domino/js-diff.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T10:32:37.900

我不确定这是否会有所帮助，但这是我会做的一种方式：

我会使用哈希图，并将所有单词以空格分隔。然后使用它，我将与原件进行映射。

您可以添加 html 标签或其他标签（如果它们不同）。

在大型词典中肯定会出现性能问题。尽管编码本身不会很长。

# mysql - MySQL ODBC 3.51 驱动程序 UTF-8 编码

> ID：1000636
> 
> 赞同：3
> 
> 时间：2009-06-16T10:15:30.337
> 
> 标签：mysql, utf-8, odbc

目前我正在将 MSSQL 迁移到 MySQL。我正在使用 MySQL ODBC 3.51 驱动程序通过 ODBC 连接连接到 MySQL。我在表中存储了泰卢固语字符。它们在使用 MySQL ODBC 驱动程序时无法正确显示，但在使用 sqlserver ODBC 驱动程序时它们会正确显示。

我的连接字符串是

```
Driver={MySQL ODBC 3.51 Driver};Server=localhost;Database=dbtest; User=user1;Password=mysql;Option=3;CharSet=utf8; 
```

请提出解决此问题的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T11:51:12.137

据此，[您](http://www.mysqltalk.org/unicode-utf-8-question-vt188135.html)可以通过将 DNS 的“连接选项”->“初始语句”设置为“设置名称 utf8”来使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T19:12:23.437

我遇到了类似的问题。除了上面的答案之外，我还可以通过将数据库列中的字符集更改为 ASCII 或 Latin1 来正确传输数据。我相信 ODBC 不会转换可能导致与数据库不匹配的编码。

# coldfusion - ColdFusion 类定义错误

> ID：1000639
> 
> 赞同：1
> 
> 时间：2009-06-16T10:16:37.653
> 
> 标签：coldfusion, cfc, application.cfc

我有以下 Applicaton.cfc

```
<cffunction name="onApplicationStart" access="public" returntype="Object">
 <cfset application.dsn = "myDB" />
 <cfset application.userGateway = createObject("component","cfc.UserGateway").init(dsn = application.dsn) />
 <cfreturn this />
</cffunction> 
```

这是我的组件 UserGateway.cfc

```
<cfcomponent name="UserGateway" hint="Data Access Object" output="false">
 <cffunction name="init" access="public" hint="constructor" output="false" returntype="UserGateway">
  <cfargument name="dsn" type="string" required="true" hint="datasource" />
   <cfset variables.dsn = arguments.dsn />
 <cfreturn this />
 </cffunction>

 <cffunction name="getUsers" access="public" output="false" returntype="query">
  <cfargument name="id" type="String" default="" />
  <cfargument name="name" type="String" default="" />
  <cfargument name="district" type="String" default="" />
  <cfset var qQuery = "" />
  <cfquery name="qQuery" datasource="#variables.dsn#">
    SELECT *
    FROM A INNER JOIN B
    ON A.X = B.Y
    WHERE 0=0
    <cfif "#arguments.id#" neq "">
     AND B.X LIKE '%#arguments.id#%'
    </cfif>
    <cfif "#arguments.name#" neq "">
     AND (A.I LIKE '#arguments.name#%'
      OR A.J LIKE '#arguments.name#%')
    </cfif>
    <cfif "#arguments.district#" neq "">
     AND A.O LIKE '%#arguments.district#%'
    </cfif>
  </cfquery>
  <cfreturn qQuery />
 </cffunction>
</cfcomponent> 
```

这是我的同一个.cfm

```
<cfform action="same.cfm" method="post" preservedata="true">
 <p>ID: <cfinput type="text" name="id" size="20" maxlength="4" /></p>
 <p>Name: <cfinput type="text" name="name" size="20" maxlength="64" /></p>
 <p>District: <cfinput type="text" name="district" size="20" maxlength="3" /></p>
 <p><cfinput class="button" type="submit" name="submit" value="OK" /></p>
</cfform>

<cfif IsDefined("form.submit")>
 <table>
  <cfset qQuery = application.userGateway.getUsers(id = form.id, name = form.name, district = form.district) />
  <cfoutput query="qQuery">
   <tr>
    <td>#qQuery.currentRow#.</a></td>
    <td>#qQuery.I#</a></td>
    <td>#qQuery.M#, #qQuery.N#</a></td>
    <td>#qQuery.D#</a></td>
   </tr>
  </cfoutput>
 </table>
</cfif> 
```

我收到以下错误：

```
Element USERGATEWAY is undefined in a Java object of type class [Ljava.lang.String;.
The error occurred in same.cfm: line 10 
```

我错过了什么？

```
-------------------------------------------
------------------------------------------- 
```

当我这样做时，它会起作用。这一定是我作为初学者没有得到的微不足道的东西。

应用程序.cfc

```
<cffunction name="onRequestStart" access="public" returntype="String">
 <cfset request.dsn="myDB" />
</cffunction> 
```

相同的.cfm

```
 <cfset userGateway = createObject("component","cfc.UserGateway").init(dsn = request.dsn) />
    <cfset qGetUser = userGateway.getUsers(id = form.personid, name = form.name, district = form.district) />
  <cfoutput query="qQuery">
   <tr>
    <td>#qQuery.currentRow#.</a></td>
    <td>#qQuery.I#</a></td>
    <td>#qQuery.M#, #qQuery.N#</a></td>
    <td>#qQuery.D#</a></td>
   </tr>
  </cfoutput> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T04:42:03.180

There are two things I see wrong here:

First, To my understanding, using the 'this' scope in application.cfc doesn't work the way you're trying to do it. By setting your userGateway object to an application scoped value, it becomes globally available and really makes returning it in onApplicationStart unnecessary. In your application.cfc, change your returntype to boolean and just return true; that should fix your problem.

Second, if in your query, your arguments and conditionals are not proxies of what you actually have, you're referencing an argument 'personid' which does not exist in your function. When calling that query through an object call in the application scope, I've seen the java string error returned as an error before as opposed to the CF Friendly 'variable doesn't exist' error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T12:09:47.173

在 same.cfm 中，运行以下命令：

```
<cfset OnApplicationStart()> 
```

然后再次刷新页面。它现在有效吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T12:14:27.947

```
<cffunction name="init" access="public" hint="constructor" output="false" returntype="UserGateway"> 
```

应该：

```
<cffunction name="init" access="public" hint="constructor" output="false" returntype="Any"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T13:52:46.547

以下行不正确：

```
<cfset application.userGateway = createObject("component","cfc.UserGateway").init(dsn = application.dsn) /> 
```

它应该在没有“cfc”的情况下读取。在您想要的组件名称的开头：

```
<cfset application.userGateway = createObject("component","UserGateway").init(dsn = application.dsn) /> 
```

此外，请仔细检查 application.cfc 的其余部分是否正确，因为某些内容运行不正确，因为您应该已经看到了找不到组件 cfc.UserGateway 的错误。

**EDIT:** I also forgot to mention that onApplicationStart does not need to return anything. The return type should be void and no `<return this/>` needs to be present.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T18:07:53.940

Could it be this:

[http://kathylynnward.wordpress.com/2008/04/14/lyra-captcha-error-element-captcha-is-undefined-in-a-java-object-of-type-class-ljavalangstring/](http://kathylynnward.wordpress.com/2008/04/14/lyra-captcha-error-element-captcha-is-undefined-in-a-java-object-of-type-class-ljavalangstring/)

(I'll elaborate the post if this is the problem)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T18:42:43.353

restart your CF service might help.

# apache-flex - ActionScript RemoteObject 响应标头

> ID：1000643
> 
> 赞同：0
> 
> 时间：2009-06-16T10:18:13.547
> 
> 标签：apache-flex, actionscript, header, remoteobject

**我可以从 RemoteObject 请求中获取响应标头吗？如果是这样，怎么做？**

我正在使用 Cairngorm 框架在 Flex 3.3 中编写一个应用程序，以部署为 AIR 应用程序。该应用程序大量利用 RemoteObject 服务从 Web 服务器获取数据。

我的每个服务委托都扩展了一个公共类，该类提供了一种在 RemoteObject 上调用服务方法的方法。

所以，我以前用过的地方

```
ServiceLocator.getInstance().getRemoteObject('myService').myOperation.send(); 
```

我改为使用

```
this.send('myOperation', 'myService'); 
```

我使用此方法而不是直接调用 RemoteObject 操作，因为此方法向操作调用添加了另一个全局响应器。这个额外的响应者分析来自服务器的响应标头中的数据。

或者至少应该——这就是问题所在。在`result`数据 ( `event as mx.rpc.events.ResultEvent`) 中，`headers`尽管标头肯定是从服务器发送的，但该属性始终为空。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T20:12:11.197

不幸的是，响应标头仅适用于 URLLoader，并且仅在 AIR 应用程序中使用时才可用：

[访问 flash.net.URLLoader 对象的 HTTP 响应标头？](https://stackoverflow.com/questions/185761/access-http-response-headers-in-for-flash-net-urlloader-object)

# .net - .net2.0中的GridView中过滤数据

> ID：1000646
> 
> 赞同：0
> 
> 时间：2009-06-16T10:18:49.817
> 
> 标签：.net, gridview, .net-2.0

我有一个页面，它使用 GridView 显示从存储过程中获取的一些数据

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:DBConnectionString1 %>"
            SelectCommand="p_get_all_students" SelectCommandType="StoredProcedure">
        </asp:SqlDataSource> 
```

返回的列之一是**studyYear**可能的值：1,2,3

我想添加一组 3 个复选框，以允许按**studyYear过滤显示的结果**

我怎么能这样做？

~~理想情况下，我希望将存储过程保留为 p_get_all_students 并仅过滤显示的信息 - 因此只有一次对数据库的初始调用。~~

**编辑** 存储过程返回的行数从 20 到 200

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T10:30:47.810

我个人会改变应用程序的架构方式。如果你想保持代码不变，你可以挂钩到 RowDataBound 事件。

更新 -[这是一个可以帮助你的例子](http://forums.asp.net/p/1357949/2793169.aspx#2793169)。

# gui-designer - GUI 构建器如何工作？

> ID：1000657
> 
> 赞同：2
> 
> 时间：2009-06-16T10:21:24.990
> 
> 标签：gui-designer

我很好奇，GUI 构建器/设计器是如何工作的？我的猜测（对于 Java）是它实际上创建了一个 JFrame 并以某种方式覆盖了事件。然而，这只是一个猜测。你能提供一些见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T10:24:29.400

你真是太棒了...

在**Glade**中，允许您拖放组件的假窗口处理您的鼠标/键盘事件并进​​行后端调用以将 GUI 元素放置到位。然后将这些元素附加到处理程序，例如“单击按钮，转到源元素”

当你想到它时，这一切都是微不足道的。

查看**林间空地的来源**可能会深入了解它是如何完成的。

IIRC，Glade 编写 XML，然后使用 libglade 将其呈现给设计人员，而不是您的 d'n'ds 实际创建元素。您的事件构建包含 UI 元素和内部设计器处理程序的 XML 文件。

**祝你好运**

# visual-c++ - 如何通过按 ESC 来阻止 mfc 对话框应用程序关闭

> ID：1000661
> 
> 赞同：3
> 
> 时间：2009-06-16T10:23:40.727
> 
> 标签：visual-c++, mfc, modal-dialog

如何通过按 ESC（Escape 键）来停止关闭 mfc 对话框应用程序。执行我的应用程序后，如果我按 ESC 键，则窗口将关闭。这怎么能阻止？我正在使用 VC++ 6.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T10:35:57.223

您可以覆盖 OnCancel 事件，并且仅在 IDCANCEL 是焦点项时继续使用 OnCancel 调用。

```
void CMyDialog::OnCancel(void)
{
   if(GetDlgItem(IDCANCEL) ==  GetFocus())
    {  
        CDialog::OnCancel();
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T10:35:45.867

有不同的方法可以做到这一点。你可以：

1.  创建一个 OnCancel 处理程序并使用 Cancel 通知做任何你想做的事情
2.  您可以处理 OnClose 事件并做任何您想做的事情。
3.  您可以覆盖 PreTranslateMessage 并在那里检查 Esc 键并做任何您想做的事情。

检查[此](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/f0fba0e3-7569-4ed0-9619-32b3de873301/)代码示例。

对于 PreTranslateMessage 示例，请参阅[此](http://justcheckingonall.wordpress.com/2008/02/29/how-to-prevent-dialog-from-closing-on-enterescape-in-mfc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T21:38:47.167

覆盖 OnCancel 并且*不*调用基类实现。

除非您知道自己在做什么，否则不要靠近 OnClose，否则可能会破坏 Alt-F4 和 X 按钮的行为。

我一直认为 PreTranslateMessage 这样的事情是使用热核武器来破解坚果，但如果它漂浮你的船......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-21T15:56:46.283

假设我们在这里处理一个作为 CDialog 子类实现的顶级窗口，该窗口可以接收两种“类型”的关闭事件：

*   应用程序关闭事件（ID 为 SC_CLOSE 的 WM_SYSCOMMAND）
*   窗口关闭事件（ID 为 IDOK 或 IDCANCEL 的 WM_COMMAND）

然而，当前一类事件被发送到对话框时，MFC 默认通过 CDialog::OnCancel 有效地路由前一类事件，这意味着重写 OnCancel*也会*破坏 Alt-F4 和 X 按钮。这意味着为了区分两者，您需要在 OnSysCommand 中处理前者事件，同时使用 OnOK 和 OnCancel 的覆盖来处理后者。

生成的代码如下所示：

```
class CTopLevelDlg: public CDialog
{
  afx_win void OnSysCommand(UINT id, LPARAM lparam) override
  {
    if (id == SC_CLOSE)
      CDialog::OnCancel();
  }
  void OnOK() override {}
  void OnCancel() override {}
}; 
```

# c++ - 使用 C++ 类成员函数作为 C 回调函数

> ID：1000663
> 
> 赞同：60
> 
> 时间：2009-06-16T10:24:07.573
> 
> 标签：c++, c, interop, callback

我有一个 C 库，需要注册一个回调函数来自定义一些处理。回调函数的类型是`int a(int *, int *)`.

我正在编写类似于以下内容的 C++ 代码，并尝试将 C++ 类函数注册为回调函数：

```
class A {
  public:
   A();
   ~A();
   int e(int *k, int *j);
};

A::A()
{
   register_with_library(e)
}

int
A::e(int *k, int *e)
{
  return 0;
}

A::~A() 
{

} 
```

编译器抛出以下错误：

```
In constructor 'A::A()',
error:
 argument of type ‘int (A::)(int*, int*)’ does not match ‘int (*)(int*, int*)’. 
```

我的问题：

1.  首先，是否可以像我尝试做的那样注册一个 C++ 类成员函数，如果可以，怎么做？[（我在http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html)阅读了 32.8 。但在我看来它并不能解决问题）
2.  有没有替代/更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-06-16T10:26:41.640

如果成员函数是静态的，则可以这样做。

类 A 的非静态成员函数有一个隐含的类型的第一个参数，`class A*`它对应于*这个*指针。这就是为什么只有在回调的签名也具有类型的第一个参数时才能注册它们的原因`class A*`。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-04-23T07:52:22.933

如果成员函数不是静态的，您也可以这样做，但它需要更多的工作（另请参阅[将 C++ 函数指针转换为 c 函数指针](https://stackoverflow.com/questions/19808054/convert-c-function-pointer-to-c-function-pointer/19809787)）：

```
#include <stdio.h>
#include <functional>

template <typename T>
struct Callback;

template <typename Ret, typename... Params>
struct Callback<Ret(Params...)> {
   template <typename... Args> 
   static Ret callback(Args... args) {                    
      return func(args...);  
   }
   static std::function<Ret(Params...)> func; 
};

template <typename Ret, typename... Params>
std::function<Ret(Params...)> Callback<Ret(Params...)>::func;

void register_with_library(int (*func)(int *k, int *e)) {
   int x = 0, y = 1;
   int o = func(&x, &y);
   printf("Value: %i\n", o);
}

class A {
   public:
      A();
      ~A();
      int e(int *k, int *j);
};

typedef int (*callback_t)(int*,int*);

A::A() {
   Callback<int(int*,int*)>::func = std::bind(&A::e, this, std::placeholders::_1, std::placeholders::_2);
   callback_t func = static_cast<callback_t>(Callback<int(int*,int*)>::callback);      
   register_with_library(func);      
}

int A::e(int *k, int *j) {
   return *k - *j;
}

A::~A() { }

int main() {
   A a;
} 
```

这个例子在它编译的意义上是完整的：

```
g++ test.cpp -std=c++11 -o test 
```

您将需要`c++11`旗帜。在你看到的`register_with_library(func)`被调用的代码中，`func`静态函数在哪里被动态绑定到成员函数`e`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-16T10:33:41.347

问题是方法！=函数。编译器会将您的方法转换为类似的东西：

```
int e( A *this, int *k, int *j ); 
```

所以，你肯定不能传递它，因为类实例不能作为参数传递。一种解决方法是将方法设为静态，这样它就会有好的类型。但它不会有任何类实例，并且访问非静态类成员。

另一种方法是声明一个带有指向第一次初始化的 A 的静态指针的函数。该函数仅将调用重定向到类：

```
int callback( int *j, int *k )
{
    static A  *obj = new A();
    a->(j, k);
} 
```

然后就可以注册回调函数了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-16T11:09:20.730

好吧...如果您在win32平台上，总会有讨厌的Tunking方式...

[Win32 中的 Thunking：简化对非静态成员函数的回调](http://www.codeguru.com/cpp/misc/misc/assemblylanguage/article.php/c12667)

这是一个解决方案，但我不建议使用它。
它有一个很好的解释，很高兴知道它的存在。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-10T22:21:31.973

在这个解决方案中，我们有一个带有静态方法的模板类，作为回调传递给“c 函数”。此类拥有一个“普通”对象（带有一个名为 callback() 的成员函数，最终将被调用）。

一旦定义了您的类（此处为 A），就可以轻松使用它：

```
int main() {

  Holder<A> o ( A(23, 23) );

  std::cout << o().getN() << "\n";

  callACFunctionPtr( fun );

  callACFunctionPtr( o.callback );

} // () 
```

完整示例：

```
#include <iostream>

// ----------------------------------------------------------
// library class: Holder
// ----------------------------------------------------------
template< typename HeldObjectType >
class Holder {
public:
  static inline HeldObjectType object;

  static void callback( ) {
    object.callback();
  } // ()

  HeldObjectType &  operator() ( ) {
    return object;
  }

  Holder( HeldObjectType && obj )
  {
    object = obj;
  }

  Holder() = delete;

}; // class

// ----------------------------------------------------------
// "old" C function receivin a ptr to function as a callback
// ----------------------------------------------------------
using Callback = void (*) (void);

// ..........................................................
// ..........................................................
void callACFunctionPtr( Callback f ) {
  f();
} // ()

// ----------------------------------------------------------
// ----------------------------------------------------------
void fun() {
  std::cout << "I'm fun\n";
} // 

// ----------------------------------------------------------
// 
// Common class where we want to write the
// callback to be called from callACFunctionPtr.
// Name this function: callback
// 
// ----------------------------------------------------------
class A {
private:
  int n;

public:

  A(  ) : n( 0 ) { }

  A( int a, int b ) : n( a+b ) { }

  void callback( ) {
    std::cout << "A's callback(): " << n << "\n";
  }

  int getN() {
    return n;
  }

}; // class

// ----------------------------------------------------------
// ----------------------------------------------------------
int main() {

  Holder<A> o ( A(23, 23) );

  std::cout << o().getN() << "\n";

  callACFunctionPtr( fun );

  callACFunctionPtr( o.callback );

} // () 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T10:29:06.240

使用成员函数的问题是它需要一个对象来执行 - 而 C 不知道对象。

最简单的方法是执行以下操作：

```
//In a header file:
extern "C" int e(int * k, int * e);

//In your implementation: 
int e(int * k, int * e) { return 0; } 
```

# maven-2 - 如何更改 Maven Glassfish 插件部署到的 ContextRoot？

> ID：1000669
> 
> 赞同：2
> 
> 时间：2009-06-16T10:25:25.683
> 
> 标签：maven-2, plugins, glassfish

我正在使用 Maven Glassfish 插件部署一个 webapp（比如 WebApp.war）。而不是将它部署到[http://localhost/WebApp](http://localhost/WebApp)我希望它部署到[http://localhost/AnotherName](http://localhost/AnotherName) - 也就是说，我想更改它部署到的上下文根。我不知道如何使用插件来做到这一点，这是一个选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T15:21:51.763

上下文根由 WAR 中的 XML 文件定义。检查 sun-web.xml，它应该定义这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-03T14:27:33.550

当您使用 Netbeans 时，您可以在项目属性/运行下选择上下文根。当您通过 Glassfish 管理员部署它时，您可以在那里输入它。

# php - 我如何处理我刚刚从 dbpedia 下载的这个 csv 数据集？

> ID：1000680
> 
> 赞同：1
> 
> 时间：2009-06-16T10:28:32.120
> 
> 标签：php, data-mining, wikipedia

我刚刚从 dbpedia 下载了维基百科信息框的 csv。但是我不知道如何使用它：-SI 想将所有这些数据导入数据库，但不太确定如何从这里获取。我从[http://wiki.dbpedia.org/Downloads32#infoboxes下载了它](http://wiki.dbpedia.org/Downloads32#infoboxes)

我在 PHP 工作

* * *

仅作记录 - 这个 csv 文件大约为 1.8 GB。我实际上正在经历所有这些麻烦，只是为了从维基百科的一组精选文章中获取一组精选的信息框。我会手动完成，除非我需要包含国家和城市的超过 10 000 个条目的信息框。我只是在寻找一种简单的方法来做到这一点，坦率地说，我一直在使用我所有的选择:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T10:43:03.980

要将 CSV 数据导入 MySQL，您可以使用[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)语句，例如

```
LOAD DATA LOCAL INFILE '/importfile.csv'
INTO TABLE test_table
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
(field1, filed2, field3); 
```

有时这样的数据可能需要一点点按摩，用 Perl 或类似的脚本来逐行解析文件并吐出 SQL 语句并不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T10:49:07.650

如果您想在导入数据之前对其进行处理，您可以查看我的 CSV 流编辑器[CSVfix](http://code.google.com/p/csvfix/) - 它是 FOSS。如果由于某种原因您的数据库批量加载 CSV 数据不适合您，它还可以为您的数据库生成 SQL INSERT 语句。

# perl - 如何创建其派生类由创建属性隐式指定的对象？

> ID：1000681
> 
> 赞同：3
> 
> 时间：2009-06-16T10:28:39.517
> 
> 标签：perl, inheritance, constructor, design-patterns, creation

我正在寻找以下模式。（我在 Perl 工作，但我认为该语言并不特别重要）。

有一个父类 Foo，以及子类 Bar、Baz、Bazza。

构造 Foo 的方法之一是解析字符串，该字符串的一部分将隐式指定要创建的类。例如，如果它以 'http:' 开头，那么它是一个 Bar，但如果它不是，但它包含 '[Date]'，那么 Baz 喜欢它，依此类推。

现在，如果 Foo 知道它的所有子节点，以及什么是 Bar，什么是 Baz 等，它可以调用适当的构造函数。但是基类不应该对其子类有任何了解。

我想要的是 Foo 的构造函数能够依次尝试它的孩子，直到其中一个说“是的，这是我的，我会创造这个东西”。

我意识到在一般情况下这个问题没有明确定义，因为可能有不止一个孩子会接受字符串，所以他们被称为的顺序很重要：忽略这个并假设字符串的特征这样只有一个子类会喜欢该字符串。

我想出的最好的方法是让子类在初始化时向基类“注册”，以便它获取构造函数列表，然后遍历它们。但是我错过了更好的方法吗？

示例代码：

```
package Foo;

my @children;

sub _registerChild
{
  push @children, shift();
}

sub newFromString
{
  my $string = shift;
  foreach (@children) {
    my $object = $_->newFromString(@_) and return $object;
  }
  return undef;
}

package Bar;
our @ISA = ('Foo');

Foo::_registerChild(__PACKAGE__);

sub newFromString
{
  my $string = shift;
  if ($string =~ /^http:/i) {
    return bless(...);
  }
  return undef;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T12:03:43.833

也许你可以用[Module::Pluggable](http://search.cpan.org/~simonw/Module-Pluggable-3.9/lib/Module/Pluggable.pm)来实现它？这将消除注册的需要。

我之前采用的方法是使用 Module::Pluggable 加载我的子模块（这允许我通过简单地编写和安装它们来添加新的子模块）。每个子类都有一个构造函数，它要么返回一个祝福对象，要么返回 undef。你循环你的插件，直到你得到一个对象，然后返回它。

就像是：

```
package MyClass;
use Module::Pluggable;

sub new
{
    my ($class, @args) = @_;
    for my $plugin ($class->plugins)
    {
       my $object = $plugin->new(@args);
       return $object if $object;
    }
} 
```

还有[Class:Factory](http://search.cpan.org/~phred/Class-Factory-1.06/lib/Class/Factory.pm)，但这可能有点超出您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T15:56:54.973

看来您正试图让一个类既是基类又是工厂。不。使用 2 个单独的类。像这样的东西：

```
package Foo;

package Bar;
use base 'Foo';

package Baz;
use base 'Foo';

package Bazza;
use base 'Foo';

package Factory;
use Bar;
use Baz;
use Bazza;

sub get_foo {
    my ($class, $string) = @_;
    return Bar->try($string) || Baz->try($string) || Bazza->try($string);
} 
```

然后像这样使用它：

```
my $foo = Factory->get_foo($string); 
```

这样你的基类就不需要知道你的子类，只有你的工厂知道。并且子类也不需要相互了解，只有 Factory 需要知道尝试哪些子类以及以何种顺序尝试的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T11:31:11.510

您可以在类 Foo 中实现任意查找算法，以搜索现有的子类。可能基于子类提供的配置文件，或者您可能想到的任何其他机制。

然后类 Foo 将在运行时检测现有的客户端类并依次调用它们。

另外，您可以缓存查找结果并接近您已经描述过的注册表解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T12:26:37.563

如果您对父类的评论不包含有关儿童的信息以及您将建立子类适用性的任务委派给类本身的方法，那么从父类中排除类选择并创建一个可能是正确的这个任务的单身人士。

至少那将是我的偏好......从这个你当前的父类（它可能在你的子类中具有一些通用功能）可能会变成抽象或接口。

然后单例可以管理所有子类的构建及其分布（如果它们不起作用，则克隆它们？）......此外，可以将子类移动到单独的 dll 中以促进分离。

抱歉，这不是一个直接的解决方案。我过去通过管理单例中的类列表来完成此操作，就像您在这里一样。单例背后的想法是，如果您确实想使用任何昂贵的反射，您只需执行一次。

# php - 过滤基于 Internet 的电子邮件地址

> ID：1000686
> 
> 赞同：0
> 
> 时间：2009-06-16T10:29:55.973
> 
> 标签：php, javascript

我如何才能对电子邮件地址进行客户端验证，其中电子邮件地址必须尽可能地基于非互联网。即 yahoo、gmail 和数百是不允许的。它不一定是完美的，但我只想尽量减少此类电子邮件地址有效的所有显而易见的场景。

目前我只是使用正则表达式来检查有效（嗯......几乎有效）的电子邮件地址。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T10:40:59.990

假设“非互联网”是指“本地”，那么解决方案应该相当简单：将允许托管您接受的邮件地址的主机名列入白名单。

一个稍微复杂一点的解决方案（可能需要更少的维护（取决于您的系统））是将所有以某个国家或全球顶级域结尾的主机名列入黑名单，然后为您自己的域创建一个例外列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T11:33:36.967

在这一点上，我所阅读的非网络邮件帐户要求的实用性值得怀疑，而且几乎不可能真正保证。如果这确实是您的硬性要求的一部分，则意味着已迁移到 gmail-as-primary-email 的人将需要注册一个辅助帐户，对我来说，这会增加我认为您的网站不值得的几率注册开启。

也就是说，一个正确验证 RFC2822 地址的正则表达式，加上一个排除列表，将像罪一样丑陋（因为 RFC2822 验证正则表达式也像罪一样丑陋）。

最后，请记住您还需要在服务器端验证此提交，因为您不能相信客户端上的验证确实运行了。

# .net - 如何在 VB.NET 中使用多线程？

> ID：1000687
> 
> 赞同：0
> 
> 时间：2009-06-16T10:29:59.920
> 
> 标签：.net, multithreading

我在 VB 中有示例多线程。Net，我使用线程来蜘蛛站点，我有一个问题：

我必须 syncLock 锁定 sql 查询 select top 1 link from tblSite where process = 0 and i update process = 1 , End SyncLock

我使用链接蜘蛛内容，并更新数据库中的 LastUpdate，An Proces = 0... ..

我做的很慢，我可以帮助提高多线程的性能。我用蜘蛛？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T10:54:57.623

您必须使用的异步 IO。并且同步表不在进程中，而是服务器放置锁。

# ruby - 在 Ruby 中修剪字符串而不创建新字符串的规范方法是什么？

> ID：1000688
> 
> 赞同：199
> 
> 时间：2009-06-16T10:30:34.347
> 
> 标签：ruby, string

这就是我现在所拥有的——对于它正在做的工作来说，这看起来太冗长了。

```
@title        = tokens[Title].strip! || tokens[Title] if !tokens[Title].nil? 
```

假设令牌是通过拆分 CSV 行获得的数组。现在像条一样的功能！咬！等。如果字符串没有被修改，全部返回 nil

```
"abc".strip!    # => nil
" abc ".strip!  # => "abc" 
```

如果它包含额外的前导或尾随空格而不创建副本，Ruby 的方式是什么？

如果我想做就会变得更丑`tokens[Title].chomp!.strip!`

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2009-06-16T11:29:51.017

我猜你想要的是：

```
@title = tokens[Title]
@title.strip! 
```

如果它没有剥离任何东西，该[`#strip!`](http://ruby-doc.org/core-2.1.5/String.html#method-i-strip)方法将返回，如果它被剥离，则返回变量本身。`nil`

根据 Ruby 标准，以感叹号为后缀的方法会更改变量。

希望这可以帮助。

**更新：**这是`irb`用于演示的输出：

```
>> @title = "abc"
=> "abc"
>> @title.strip!
=> nil
>> @title
=> "abc"
>> @title = " abc "
=> " abc "
>> @title.strip!
=> "abc"
>> @title
=> "abc" 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-04-08T10:46:47.407

顺便说一句，现在 ruby​​ 已经支持不带“！”的剥离。

比较：

```
p "abc".strip! == " abc ".strip!  # false, because "abc".strip! will return nil
p "abc".strip == " abc ".strip    # true 
```

`strip`没有重复也是不可能的。请参阅 string.c 中的来源：

```
static VALUE
rb_str_strip(VALUE str)
{
    str = rb_str_dup(str);
    rb_str_strip_bang(str);
    return str;
} 
```

*红宝石 1.9.3p0 (2011-10-30) [i386-mingw32]*

更新 1：正如我现在所看到的 - 它创建于 1999 年（参见SVN 中的[rev #372 ）：](http://svn.ruby-lang.org/cgi-bin/viewvc.cgi/trunk/string.c?r1=11&r2=372&diff_format=h)

更新 2 ： `strip!`不会创建重复项——在 1.9.x、2.x 和主干版本中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-06-16T11:44:49.520

没有必要同时剥离和咀嚼，因为剥离也会删除尾随回车 - 除非您更改了默认记录分隔符并且这就是您要咀嚼的内容。

Olly 的答案已经有在 Ruby 中执行此操作的规范方法，但如果您发现自己经常这样做，您总是可以为它定义一个方法：

```
def strip_or_self!(str)
  str.strip! || str
end 
```

给予：

```
@title = strip_or_self!(tokens[Title]) if tokens[Title] 
```

另请记住，如果`@title`令牌为 nil，if 语句将阻止分配，这将导致它保持其先前的值。如果您希望或不介意`@title`总是被分配，您可以将检查移到方法中并进一步减少重复：

```
def strip_or_self!(str)
  str.strip! || str if str
end 
```

作为替代方案，如果您喜欢冒险，您可以在 String 本身上定义一个方法：

```
class String
  def strip_or_self!
    strip! || self
  end
end 
```

给出以下之一：

```
@title = tokens[Title].strip_or_self! if tokens[Title]

@title = tokens[Title] && tokens[Title].strip_or_self! 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-10-27T21:56:43.987

如果您使用的是 Ruby on Rails，则会出现**squish**

```
> @title = " abc "
 => " abc " 

> @title.squish
 => "abc"
> @title
 => " abc "

> @title.squish!
 => "abc"
> @title
 => "abc" 
```

如果你只使用 Ruby，你想使用**strip**

这就是问题所在。在您的情况下，您想使用条而不用爆炸！

同时脱衣舞！如果没有任何操作，它肯定会返回 nil，它仍然会更新变量，所以剥离！不能内联使用。如果你想使用带内联，你可以使用没有爆炸的版本！

**条！**使用多线方法

```
> tokens["Title"] = " abc "
 => " abc "
> tokens["Title"].strip!
 => "abc"
> @title = tokens["Title"]
 => "abc" 
```

**带**单线方法...您的答案

```
> tokens["Title"] = " abc "
 => " abc "
> @title = tokens["Title"].strip if tokens["Title"].present?
 => "abc" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-06-16T11:33:02.367

我认为您的示例是一种明智的方法，尽管您可以将其稍微简化为：

```
@title = tokens[Title].strip! || tokens[Title] if tokens[Title] 
```

或者你可以把它放在两行：

```
@title = tokens[Title] || ''
@title.strip! 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-12-01T12:18:52.107

如果你想在需要这样的东西之后使用另一种方法：

```
( str.strip || str ).split(',') 
```

这样你就可以剥离并在之后仍然做一些事情:)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-11-15T20:39:56.237

如果你有 ruby​​ 1.9 或 activesupport，你可以简单地做

```
@title = tokens[Title].try :tap, &:strip! 
```

这真的很酷，因为它利用了`:try`和`:tap`方法，在我看来，这是 ruby​​ 中最强大的功能构造。

一种更可爱的形式，完全将函数作为符号传递：

```
@title = tokens[Title].send :try, :tap, &:strip! 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-08T10:51:45.027

我的方式：

```
> (@title = " abc ").strip!
 => "abc" 
> @title
 => "abc" 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-10-30T04:48:04.567

```
@title = tokens[Title].strip! || tokens[Title] 
```

我完全有可能不理解这个话题，但这不是你需要的吗？

```
" success ".strip! || "rescue" #=> "success"
"failure".strip! || "rescue" #=> "rescue" 
```

# html - 通过 DIV 进行 3 列布局（中间灵活，高度灵活，STRICT 模式）

> ID：1000691
> 
> 赞同：1
> 
> 时间：2009-06-16T10:31:10.727
> 
> 标签：html, css, layout

嘿伙计们，我已经为此苦苦挣扎了一段时间，似乎没有找到解决方案。需要一个建议或简单的声明说这是不可能的（到目前为止，我认为这是 - 不可能的）。问题是：需要 3 列灵活宽度布局，左侧固定宽度，右侧，中间 - 占用 body 或其他提供的所有空间。诀窍是右列或左列可能比中间高，我们需要它们不要与页脚重叠。docmode 也是严格的。我知道 Table 可以在几秒钟内解决问题，但我想知道是否有 Div 解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T10:36:15.040

这就是你要找的我认为：

[http://matthewjamestaylor.com/blog/perfect-3-column.htm](http://matthewjamestaylor.com/blog/perfect-3-column.htm) 或像素宽度： http: [//matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-pixels.htm](http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-pixels.htm)

它是 XHTML 严格的，并且支持所有当前的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T11:01:53.053

对我来说，没有牌桌挑战有点像向公牛挥舞红旗：

[http://edeverett.co.uk/experiments/noTables2.html](http://edeverett.co.uk/experiments/noTables2.html)

在 IE7、FF3、Chrome 2 中测试。

这应该能让你大部分时间到达那里，主要思想是在两侧列上使用负边距，主列设置为 100% 宽度。它将受益于页面宽度的下限。

（我已经编辑了示例 html 以显示如何在中心部​​分包​​含内容）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T10:36:10.233

[YUI Grid CSS](http://developer.yahoo.com/yui/grids/)可能是您想要的。我不熟悉所涉及的 CSS 魔法，但它支持多种不同的布局。它似乎不支持固定的左右列。

# .net - .NET EDIFACT/X12 框架

> ID：1000697
> 
> 赞同：8
> 
> 时间：2009-06-16T10:32:04.267
> 
> 标签：.net, components, edi, x12, edifact

我们需要为客户处理一些 EDI 消息，我想知道你们中是否有人可以推荐一些可以完成任务的组件（不一定是免费的）。我对可以将 EDI 消息解析为 .NET 结构和某种传输协议（SMTP、FTP、HTTP、AS2）等实现的框架感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2011-06-29T00:53:48.173

[http://x12parser.codeplex.com](http://x12parser.codeplex.com)上有一个开源的 .NET x12 解析器，它已经存在了一段时间，现在已经相当成熟了。它已经支持超过 15 个事务集，包括 HIPAA 集中的大部分事务集。注入您自己的规范非常可扩展，网站上有相关说明。查看该站点以获取已解析的 X12 消息的 html 序列化。

我喜欢的好处是它允许您将 X12 拆分为单独的 X12 消息，以便您可以单独处理它们。例如，如果您想解绑声明，您只需通过循环 ID“2300”解绑它。它将以缩进格式重新序列化您的 X12，因此更易于阅读。例如，下面是一个 837 声明，它被解析为一个 Interchange 对象，然后用空格序列化：

```
ISA*00*          *01*SECRET    *ZZ*SUBMITTERS.ID  *ZZ*RECEIVERS.ID   *030101*1253*^*00501*000000905*1*T*:~
  GS*HC*SENDER CODE*RECEIVER CODE*19991231*0802*1*X*005010X222~
    ST*837*0021*005010X222~
      BHT*0019*00*244579*20061015*1023*CH~
      NM1*41*2*PREMIER BILLING SERVICE*****46*TGJ23~
        PER*IC*JERRY*TE*3055552222*EX*231~
      NM1*40*2*KEY INSURANCE COMPANY*****46*66783JJT~
      HL*1**20*1~
        PRV*BI*PXC*203BF0100Y~
        NM1*85*2*BEN KILDARE SERVICE*****XX*9876543210~
          N3*234 SEAWAY ST~
          N4*MIAMI*FL*33111~
          REF*EI*587654321~
        NM1*87*2~
          N3*2345 OCEAN BLVD~
          N4*MAIMI*FL*33111~
        HL*2*1*22*1~
          SBR*P**2222-SJ******CI~
          NM1*IL*1*SMITH*JANE****MI*JS00111223333~
            DMG*D8*19430501*F~
          NM1*PR*2*KEY INSURANCE COMPANY*****PI*999996666~
            REF*G2*KA6663~
          HL*3*2*23*0~
            PAT*19~
            NM1*QC*1*SMITH*TED~
              N3*236 N MAIN ST~
              N4*MIAMI*FL*33413~
              DMG*D8*19730501*M~
            CLM*26463774*100***11:B:1*Y*A*Y*I~
              REF*D9*17312345600006351~
              HI*BK:0340*BF:V7389~
              LX*1~
                SV1*HC:99213*40*UN*1***1~
                DTP*472*D8*20061003~
              LX*2~
                SV1*HC:87070*15*UN*1***1~
                DTP*472*D8*20061003~
              LX*3~
                SV1*HC:99214*35*UN*1***2~
                DTP*472*D8*20061010~
              LX*4~
                SV1*HC:86663*10*UN*1***2~
                DTP*472*D8*20061010~
    SE*42*0021~
  GE*1*1~
IEA*1*000000905~ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:51:14.450

[http://www.sparrow-technologies.com/ediparser.net.aspx](http://www.sparrow-technologies.com/ediparser.net.aspx)上有一个商业的 .NET X12 解析器，它已经存在了一段时间并且也相当成熟。它支持 X12、HL7 和 SCRIPT 标准。当我在我的一个项目中使用它时，它很容易理解。它附带了许多不同 EDI 消息类型的样本，因此它使我更容易编写我的第一个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-18T20:25:36.907

我对 .NET 中的 EDIFACT 文档做了一些工作，但从未找到我可以使用的框架。幸运的是，我只需要解析两种不同类型的文档。在我的情况下，最简单的方法是手动解析文件并创建友好的业务对象，以我可以使用的方式保存数据。框架会给你很大的灵活性和更友好的 API 来使用，但它可能不是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T14:47:05.143

如果您不严格依赖 .Net，我建议您使用最初由 SeeBeyond Corp.开发的[JCAPS B2B 套件。](https://jcaps-b2b.dev.java.net/)

否则，我听说过InterfaceWare关于[Chameleon的好消息](http://interfaceware.com)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-01T19:07:14.557

看看： [http ://www.orionhealth.com/products/symphonia/](http://www.orionhealth.com/products/symphonia/)

它可以满足您的需求，尽管您在使用它时会遇到各种限制。

# ruby-on-rails - Restful_authentication 与 Authlogic

> ID：1000704
> 
> 赞同：6
> 
> 时间：2009-06-16T10:34:31.360
> 
> 标签：ruby-on-rails, ruby

你有什么建议吗？

Authlogic 还是 restful_authentication？

将电子邮件激活步骤构建到 authlogic 中是否很难（据我所知，Authlogic 没有包含此功能）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-17T01:56:28.567

其实我不同意fig-gnuton。您可以做几件事。如果您想要一个基本的解决方案，请尝试使用 restful auth，但要注意基于生成器的方法有很大的缺点。主要缺点是您将大量代码喷射到您的应用程序中。因此，当出现问题时，您必须手动修补代码或清除您所做的任何自定义。最近版本的 restful auth 比以前的版本要好得多，早期版本会向左、向右和居中喷出代码，但我的建议是在可能的情况下让由 restful auth 生成的用户和会话代码单独放置。例如，如果您希望 User 的属性创建另一个对象，例如 Person 并将两者链接起来。

我更喜欢 authlogic 因为：

*   感觉就像你更有控制力。
*   我很欣赏 authlogic 被记录的程度，他们的示例应用程序作为指南也非常有用。
*   此外，我也为测试 restful_auth 应用程序而烦恼，而不是使用 authlogic。
*   与restful_auth相比，忘记密码重置、API密钥等扩展的自定义代码要少得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-16T10:36:57.783

别忘了[Clearance](http://giantrobots.thoughtbot.com/2009/2/9/clearance-rails-authentication-for-developers-who-write-tests)，街区里的另一个孩子。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-08T22:26:24.313

Restful 身份验证是废话。这就是让 Rails 生成器名声不好的东西。

我的意思是什么？Rails 附带的生成器（恕我直言）很好。它们生成了一个非常简约的骨架结构。它们生成的内容很小，易于理解，并且可以随时添加到您自己的代码中/替换为您自己的代码。所有复杂的、粗糙的部分都在它们所属的 Rails 库中，而不是在生成的代码中。

另一方面，Restful 身份验证带有生成器，这些生成器会产生大量难以使用和维护的生成代码。应该在一个不错的库中的功能可以很容易地随着框架的每个新版本进行升级，而是在生成的模型和控制器代码中喷涌而出，最终与您的代码混合在一起。它不是脚手架，而是自动生成代码的大量单向转储。

远离……远离……

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-09-30T12:07:47.253

你最好使用 authlogic。

看看我的推理在这里 [http://blog.platform45.com/2009/09/30/user-authentication-with-authlogic](http://blog.platform45.com/2009/09/30/user-authentication-with-authlogic)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T12:42:44.970

**Restful_Auth**是一个插入式解决方案。

**Authlogic**很棒，可以做任何 restful_auth 可以做的事情（还有更多，afaik），但是 Authlogic 是面向定制的，因此它缺乏生成器方面（通过设计而不是监督）。

底线，如果你是新手（听起来你可能是），我会从 restful_auth 开始。

# asp.net - Firefox 和更新面板

> ID：1000705
> 
> 赞同：1
> 
> 时间：2009-06-16T10:35:00.890
> 
> 标签：asp.net, firefox, updatepanel

我对 FireFox 和 ASP.NET UpdatePanel 有疑问。我有一个复选框和一个更新面板。当我选中该复选框时，应该可以看到位于 UpdatePanel 中的 asp:panel。

```
<asp:CheckBox ID="cbMoreOptions" runat="server" Text="plus d'options" AutoPostBack="True" OnCheckedChanged="cbOptions_CheckedChanged" /> 

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <ContentTemplate>
    <asp:Panel ID="Panel1" runat="server" Visible="false"> 
       sssssssss
    </asp:Panel>
  </ContentTemplate>
  <Triggers>
    <asp:AsyncPostBackTrigger ControlID="cbMoreOptions" EventName="CheckedChanged" /> 
  </Triggers>
</asp:UpdatePanel> 
```

一切正常，但在选中复选框时刷新页面后却没有。如果发生这种情况，选中的复选框会检查页面不会将更多回发到服务器。萤火虫显示页面得到响应，当我验证其内容时，我遇到错误 500，表明页面信息已损坏。所有这一切都只发生在 Firefox 中。在 IE8 和 Google Chrome 中一切正常。

有谁知道我该如何避免这种情况？是火狐的bug吗？所有奇怪的行为都会继续，直到我输入 URL 文本框。即使我做出 F5 也没有任何反应。F5 和进入 URL 有什么区别？他们不应该有相同的结果吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-11T03:25:32.223

我们很久以前就遇到过这个问题，它是 firefox 使用内存缓存来存储页面状态的方式，这弄乱了 ASP.NET 处理 VIEWSTATE 隐藏字段的方式。检查是否为您的 aspx 页面打开缓存并将其禁用。

**编辑：**这是一个详细解释它的[链接。](http://www.telerik.com/help/aspnet-ajax/ajaxviewstatefirefox.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-09T22:08:14.893

您是否尝试将复选框“cbMoreOptions”放置在 UpdatePanel 中？

放置在 UpdatePanel ContentTemplate 部分中，并为 CheckBox 设置一个 AsyncPostBackTrigger。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-08-17T02:00:40.043

> F5 和进入 URL 有什么区别？他们不应该有相同的结果吗？

如果您在地址栏中按回车，它会执行 GET 请求，即您使用 . 输入页面的生命周期`!IsPostBack`。当你按 F5 时，我观察到 firefox 会重复最后一个请求，所以如果最后一个请求是 POST，它会重复它。这就是为什么您的页面处于错误状态的原因。如果第一次回发导致错误（复选框'checkedChanged），按 F5 只会重复该错误。

所以，*不*，没有相同的结果。

我没有任何文档来备份此声明，但这是我观察到的。如果有人能指出来源，我会很高兴看到它。

# nhibernate - NHibernate 枚举映射

> ID：1000706
> 
> 赞同：0
> 
> 时间：2009-06-16T10:35:06.523
> 
> 标签：nhibernate

谁能告诉我如何使用 vb.net 在 nhibernate 中映射枚举。当我搜索谷歌时，我在 c# 中找到了所有示例，但我想要 vb.net（我是 vb.net 的新手）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T15:45:24.493

只需在您的 xml 映射文件中创建一个与属性本身同名的属性节点。NHibernate 将使用反射自动获取类型（在这种情况下为枚举）。

```
<property name="YourEnumPropertyName" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T12:20:32.037

你在使用 Fluent NHibernate 吗？如果不是，则 XML 映射是相同的。

# objective-c - Java包的Objective-C等价物？

> ID：1000707
> 
> 赞同：16
> 
> 时间：2009-06-16T10:35:32.420
> 
> 标签：objective-c

Java包的Objective-C等价物是什么？您如何在 Objective-C 中对课程进行分组和组织？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-06-16T15:50:32.070

## 问题 1：Objective-C 等价于 Java 包？

Objective-C 没有与 Java 包或 C++ 命名空间等效的东西。部分原因是，Objective-C 最初是 C 之上的一个非常薄的运行时层，并且在 C 中添加对象时非常简单。现在对我们来说不幸的是，命名冲突是我们在使用 Objective-C 时必须处理的问题。你赢了一些，你失去了一些……

一个小的澄清（尽管它并没有多少安慰）是 Objective-C 实际上有两个平面命名空间——一个用于类，一个用于协议（如 Java 的接口）。这并不能解决任何类命名冲突，但它确实意味着您可以拥有一个具有相同名称的协议和类（如[<NSObject>](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/)和[NSObject](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/)），后者通常采用（“实现”）前者。此功能可以防止“Foo / FooImpl”模式在 Java 中猖獗，但遗憾的是对类冲突没有帮助。

## 问题 2：如何 [命名] 和组织 Objective-C 类？

**命名**

以下规则是主观的，但它们是命名 Objective-C 类的体面准则。

1.  如果您的代码不能由其他代码运行（它不是框架、插件等，而是最终用户应用程序或工具），您只需避免与您链接的代码发生冲突。通常，这意味着您可以完全不使用前缀，只要您使用的框架/插件/捆绑包具有适当的名称空间。
2.  如果您正在开发“组件化”代码（如框架、插件等），您应该选择一个前缀（希望是唯一的）并在可见的地方记录您对它的使用，以便其他人知道以避免潜在的冲突。例如，[CocoaDev wiki “registry”](http://www.cocoadev.com/index.pl?ChooseYourOwnPrefix)是一个事实上的公共论坛，用于在前缀上调用“dibs”。但是，如果您的代码类似于公司内部框架，则您可以使用其他人已经使用的前缀，只要您不使用带有该前缀的任何东西。

**组织**

不幸的是，许多 Cocoa 开发人员忽略了在磁盘上组织源文件。在 Xcode 中创建新文件时，默认位置是项目目录，就在项目文件旁边等。我个人将应用程序源放在**source/**中，测试代码（OCUnit 等）放在**test/**中，所有资源（NIB/XIB 文件、Info.plist、图像等）在**resources/**等。如果您正在开发一个复杂的项目，那么根据功能将源代码分组到目录层次结构中也是一个很好的解决方案。无论如何，一个组织良好的项目目录可以让你更容易找到你需要的东西。

Xcode 真的不在乎你的文件在哪里。项目侧边栏中的组织完全独立于磁盘位置——它是一个逻辑（而非物理）分组。您可以在侧边栏中随意组织，而不会影响磁盘位置，当您的源存储在版本控制中时，这很好。另一方面，如果您在磁盘上移动文件，修补 Xcode 引用是手动且乏味的，但可以完成。最简单的方法是从一开始就创建您的组织，并在它们所属的目录中创建文件。

## 我的意见

尽管有一个包/命名空间机制可能会很好，但不要屏住呼吸让它发生。**类冲突在实践中非常罕见**，并且在发生时通常非常明显。命名空间确实是解决 Objective-C 中非问题的解决方案。（此外，添加命名空间将消除对前缀等变通方法的需求，但可能会在方法调用等方面引入更多复杂性。）

更微妙和狡猾的错误来自**方法冲突**，当方法被添加和/或覆盖时，不仅是子类，还有类别，这可能会导致严重的错误，因为类别的加载顺序是未定义的（不确定的）。实现类别是 Objective-C 最锋利的优势之一，只有在您知道自己在做什么的情况下才应该尝试，尤其是对于第三方代码，**尤其是**对于 Cocoa 框架类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-16T10:37:10.420

他们使用长名称...

*   [关于 Cocoa / Objective-C 中的编码风格和命名的文章](http://www.cocoadevcentral.com/articles/000082.php#2)
*   [讨论 Obj-C 是否需要命名空间（已删除，](http://dotnetaddict.dotnetdevelopersjournal.com/objc_namespaces.htm)[在此处](http://web.archive.org/web/20100903053941/http://dotnetaddict.dotnetdevelopersjournal.com/objc_namespaces.htm)存档）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-16T10:39:34.767

请参阅 [解决 Objective-C 命名空间冲突的最佳方法是什么？](https://stackoverflow.com/questions/178434/what-is-the-best-way-to-solve-an-objective-c-namespace-collision) 讨论 Objective-C 如何没有命名空间，以及由此产生的痛苦 hack。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T12:22:31.827

不幸的是，客观 c 没有任何等同于 C#、c++ 和 java 包的命名空间......

命名冲突可以通过给出上下文名称来解决，例如，如果你要为方法命名，它应该暗示它所在的类和模块，这样……这些问题就可以避免。

按照苹果的建议，通过以下网址了解有关命名约定的更多信息

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/Conventions/Conventions.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/Conventions/Conventions.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-05-16T01:46:16.703

像这样的东西（在目录内）呢？

```
 #define PruebaPaquete ar_com_oxenstudio_paq1_PruebaPaquete
@interface ar_com_oxenstudio_paq1_PruebaPaquete : NSObject { 
```

并像这样导入它：

```
 #import "ar/com/oxenstudio/paq1/PruebaPaquete.h"
 PruebaPaquete *p = [[PruebaPaquete alloc] init]; 
```

当你有名字冲突时：

```
 #import "ar/com/oxenstudio/paq1/PruebaPaquete.h"
 #import "ar/com/oxenstudio/paq2/PruebaPaquete.h"

ar_com_oxenstudio_paq1_PruebaPaquete *p = [[ar_com_oxenstudio_paq1_PruebaPaquete alloc] init];
ar_com_oxenstudio_paq2_PruebaPaquete *p2 = [[ar_com_oxenstudio_paq2_PruebaPaquete alloc] init]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-22T07:55:11.650

好吧，我认为这里的所有其他答案似乎都集中在命名冲突上，但至少错过了一个重要特性，即 java 包提供的**包私有访问控制。**

当我设计一个类时，我经常发现我只希望一些特定的类来调用它的方法，b/c 他们一起工作来完成一项任务，但我不希望所有其他不相关的类调用这些方法。这就是java包访问控制派上用场的地方，所以我可以将相关的类分组到一个包中，并使这些方法封装私有访问控制。但是在目标 c 中没有办法做到这一点。

如果没有包私有访问控制，我发现很难避免人们编写这样的代码，`[[[[[a m1] m2] m3] m4] m5] or [a.b.c.d m1]`.

更新：Xcode 4.4 引入了“An Objective-C 类扩展头”，在我看来，就是在某种程度上提供“包私有访问控制”，所以如果你包含扩展头，你可以调用我的“包私有”方法; 如果只包含我的公共标头，则只能调用我的公共 API。

# php - php 列表到一个表中

> ID：1000716
> 
> 赞同：0
> 
> 时间：2009-06-16T10:37:24.693
> 
> 标签：php, algorithm, list

[我昨天](https://stackoverflow.com/questions/997041/mysql-php-querying-a-list-to-build-a-table)问了一个问题，我得到的答案已经回答了我的问题的第一部分——我现在有一个查询，它会生成一个类似这样的列表：

```
fname, sname, uname, assignment, task, grade
joe, blogs, joe.blogs, 1, 1, 52
joe, blogs, joe.blogs, 1, 2, 58
jim, blogs, jim.blogs, 1, 1, 95
jim, blogs, jim.blogs, 1, 2, 86
amy, blogs, amy.blogs, 1, 1, NULL
amy, blogs, amy.blogs, 1, 2, 76 
```

依此类推。它从列表中获取最近的成绩，并且在学生没有收到任务成绩的情况下仍然有效。

我接下来想要的是生成一个类似于此的表：

```
 | Assignment 1    | Assignment 2    |
 Name |-----------------|-----------------|
      | Task 1 | Task 2 | Task 1 | Task 2 |
===========================================
Joe.. |  52    |  58    |  ..    |  ..    |
Jim.. |  95    |  86    |  ..    |  ..    |
Amy.. |  U     |  76    |  ..    |  ..    |
... 
```

再一次，我以前做过类似的事情，但我知道它们的效率非常低 - 理想情况下，我希望能够通过一次数组传递来生成这张表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T11:23:25.803

您需要做的是在遍历行时添加列。首先执行一个小查询，选择列可能会很有效：

```
SELECT
  *
FROM assignment_tasks
ORDER BY
  Assignment_ID ASC,
  Task_ID ASC; 
```

然后根据用户、分配、任务调整加载您描述的数组的查询。这样，数组中的值与表中的顺序相同（逐行，从左到右）。如果缺少值（或 NULL，没关系），则打印 U。

当然，这是假设分配和任务的数量与数组中的条目数量相比很小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-23T23:06:48.970

看一下`group by`条款。我个人不使用它，因为我发现我仍然必须结束`foreach`结果集才能创建我想要的嵌套数组 - 但它可能是您正在寻找的。这是一个[使用 sum 的链接，](http://www.w3schools.com/sql/sql_groupby.asp)因此并不理想，但它向您展示了有关 SQL 的更多信息。

# jquery - 我们可以向用户隐藏 javascript 加载吗？

> ID：1000718
> 
> 赞同：0
> 
> 时间：2009-06-16T10:38:16.220
> 
> 标签：jquery, onload

如果我有一个使用 PHP 生成的页面，然后使用运行的 JS 进行修改：

`window.onload=myFunction;`

然后用户会看到原始页面，然后随着 js 代码运行并将其自己的位添加到页面上，该页面似乎会四处滑动。

有没有办法避免用户看到这个过程，或者至少让他们不那么明显？也许有一种比 window.onload 更合适的加载 javascript 的方法（一种可以在图像等下载时开始工作的方法）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T10:51:46.380

我建议首先在 body 上设置一些类，这将切换某些元素的可见性。

```
<body class="loading"> .... </body> 
```

然后，当脚本完成加载时，您可以删除此类并显示您需要的所有内容。您甚至可以使用“加载”类来显示一些花哨的背景，例如 Mozilla 中的旋转圆点。

还有一些项目使用另一种加载脚本的方法而不是“onLoad”。首先你创建一个全局数组，比方说，命名为“domReady”。

```
window.domReady = []; 
```

当您需要添加一些将在页面加载时运行的函数时，您只需将其推送到此数组中：

```
window.domReady.push( function foo(){ alert('Hey!'); } ); 
```

在文档的最后一行，您放置了将运行所有推送过程的函数：

```
for (procedure in window.domReady) {
    window.domReady[procedure].call();
} 
```

由于它将是结束标记之前文档的最后一行，因此 DOM 将准备就绪，您不必等到所有图像都加载完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T10:45:15.147

好的，我发现了这个 jquery 的小块，它很有效：

```
$(document).ready(function() {
  //Call your function here
}); 
```

# iphone - 是否可以将单独的应用程序加载到 iphone 中？

> ID：1000721
> 
> 赞同：0
> 
> 时间：2009-06-16T10:39:12.053
> 
> 标签：iphone, iphone-sdk-3.0, ios-simulator, jailbreak

我有一部 iphone，我使用 Xcode 创建了一个应用程序。现在我想将此应用程序移动到我的 iphone 中供我使用。怎么做到呢？

我尝试使用电话查看软件将我的应用程序复制到 iphone 应用程序文件夹，但我无法在 iphone 中打开我的应用程序。它显示错误

> “您的 Myapp.app 无法打开”

有没有其他方法可以将我的应用程序安装到 iphone 中？请指导我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T11:13:59.690

You'll need to register as an iPhone developer to get the correct keys for signing and loading an application onto an iPhone. If you are writing an application that you plan to sell via the AppStore then this is $99 to register, if it's for internal use only then $199.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T11:14:23.870

First did you use the real SDK or the simulator?

The simulator SDK only hides some OS X calls that don't exist on iPhone, but is otherwise the normal OS X SDK. So first make sure you link against the (ARM) iPhone SDK.

Then comes the licensing bit. Afaik in a non jailbroken iPhone you can only load signed apps (via the AppStore, or using a license obtained from Apple to sign your own)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T11:19:43.157

Xcode will automatically install and run an application on your iphone if you use the correct project setting.

Project -> Set Active SDK -> iPhone Device 3.0

Note that you will need a provisioning key before this becomes possible.

visit [http://developer.apple.com/iphone](http://developer.apple.com/iphone) to view some easy-to-understand tutorials on how to get one of these.

I assume you have signed up as an iPhone developer on that website (costs $99).

# java - 从 Java 调用 Windows 内核函数的最简单方法是什么？

> ID：1000723
> 
> 赞同：7
> 
> 时间：2009-06-16T10:40:20.023
> 
> 标签：java, windows, winapi, java-native-interface, jna

在寻找如何做到这一点时，我发现了一些关于不同选项的模糊讨论，比如 JNI 与 JNA，但具体示例不多。

上下文：如果 Java`File.renameTo()`不能完成它的工作（无论出于何种原因；[它有点问题](https://stackoverflow.com/questions/1000183/reliable-file-renameto-alternative-on-windows)），我想直接使用这个在 kernel32.dll 中定义的本机 Windows 函数（[来自这个答案](https://stackoverflow.com/questions/1000183/reliable-file-renameto-alternative-on-windows/1000308#1000308)）：

```
BOOL WINAPI MoveFile(
  __in  LPCTSTR lpExistingFileName,
  __in  LPCTSTR lpNewFileName
); 
```

那么，无论使用哪种方法，您将如何从 Java 代码中调用该函数呢？我正在寻找最简单的方法，使用最少的非 Java 代码或额外的步骤（例如在编译或部署中）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T11:50:20.287

如果您使用 JNA，请考虑直接调用[MoveFileW](http://msdn.microsoft.com/en-us/library/aa365239(VS.85).aspx) - 它不必提供配置信息以在 Unicode 和 ANSI 调用之间进行选择。

```
import java.io.*;
import com.sun.jna.*;

public class Ren {

  static interface Kernel32 extends Library {
    public static Kernel32 INSTANCE = (Kernel32) Native
        .loadLibrary("Kernel32", Kernel32.class);

    public static int FORMAT_MESSAGE_FROM_SYSTEM = 4096;
    public static int FORMAT_MESSAGE_IGNORE_INSERTS = 512;

    public boolean MoveFileW(WString lpExistingFileName,
        WString lpNewFileName);

    public int GetLastError();

    public int FormatMessageW(int dwFlags,
        Pointer lpSource, int dwMessageId,
        int dwLanguageId, char[] lpBuffer, int nSize,
        Pointer Arguments);
  }

  public static String getLastError() {
    int dwMessageId = Kernel32.INSTANCE.GetLastError();
    char[] lpBuffer = new char[1024];
    int lenW = Kernel32.INSTANCE.FormatMessageW(
        Kernel32.FORMAT_MESSAGE_FROM_SYSTEM
            | Kernel32.FORMAT_MESSAGE_IGNORE_INSERTS, null,
        dwMessageId, 0, lpBuffer, lpBuffer.length, null);
    return new String(lpBuffer, 0, lenW);
  }

  public static void main(String[] args) throws IOException {
    String from = ".\\from.txt";
    String to = ".\\to.txt";
    new FileOutputStream(from).close();
    if (!Kernel32.INSTANCE.MoveFileW(new WString(from),
        new WString(to))) {
      throw new IOException(getLastError());
    }
  }
} 
```

* * *

编辑：我在检查代码后编辑了我的答案 - 我误认为在签名中使用 char[] - 最好使用[WString](https://jna.dev.java.net/javadoc/com/sun/jna/WString.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T10:47:23.817

如果这确实是必要的（ renameTo 不起作用并且您确定 MoveFile 会），我会使用[JNA](https://github.com/twall/jna/)。看起来大部分工作已经在 com.mucommander.file.util 中完成。[内核32.java/](http://trac.mucommander.com/browser/trunk/source/com/mucommander/file/util/Kernel32.java)[内核](http://trac.mucommander.com/browser/trunk/source/com/mucommander/file/util/Kernel32API.java)32API.java 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T11:37:14.977

基于[NativeCall 库](http://johannburkard.de/software/nativecall/)，我做了以下[POC Application](http://www.file-upload.net/download-1706268/MoveFile.zip.html)。

它使用*kernel32.dll*`MoveFileA`中的函数

 *它作为完整的工作示例提供，带有 run.bat 和所有 jar 和 dll。

它将包含的 test.txt 移动到 test2.txt

* * *

如果您不喜欢 NativeCall 库版本，我基于[Java Native Access (JNA)库创建了另一个](https://github.com/twall/jna/)[POC 应用程序](http://www.file-upload.net/download-1706893/jna.zip.html)。这一次并被实施和演示。`MoveFileA``MoveFileW`*

# svn - 如何获取哪些文件已从以前的版本更改为此版本以及谁在 subversion 中进行了更改

> ID：1000730
> 
> 赞同：2
> 
> 时间：2009-06-16T10:42:08.723
> 
> 标签：svn

是否有可能将文件从上一个版本更改为下一个版本以及谁进行了更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T10:46:42.617

如果您知道两个版本的修订号，您可以使用[`svn log`](http://svnbook.red-bean.com/en/1.0/re15.html)：

```
svn log -r <previous rev>:<next rev> 
```

例如：

```
svn log -r 1066:1105 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T10:59:25.350

要发现更改，请使用

```
svn blame <filename> 
```

这将向您显示谁负责哪一行代码 - 如果您想要特定版本，请使用

```
svn blame <filename>:<rev> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T11:18:03.690

```
svn diff --summarize -c 123 
```

显示在变更集 123 中更改的文件，即在将修订版 122 变为修订版 123 的提交中。

```
svn log -c 123 
```

向您展示谁做出了该提交。你可以更换

```
-c 123 
```

经过

```
-r COMMITTED:HEAD 
```

获取最后的更改（这假设您的工作副本是最新的；请致电`svn up`确认）。

# ruby-on-rails - 摆脱不会死的红宝石

> ID：1000731
> 
> 赞同：22
> 
> 时间：2009-06-16T10:42:16.727
> 
> 标签：ruby-on-rails, ruby, rubygems

我有一些不会消失的红宝石。

我认为这与我安装它们时有关。有时我在执行 gem 安装之前忘记使用“sudo”，这会导致写入错误，并且我可以收集的内容将 gem 的副本放在我的用户目录中，而不是它可以运行的地方。但是 gem 卸载不起作用。它不断出现在“宝石列表”中，但无法从 gem 卸载或 sudo gem 卸载中卸载它。在我的“宝石环境”中找到路径后，我尝试直接删除一个宝石，但这仍然将宝石留在列表中。

还有可能只是删除所有宝石并从头开始吗？这些让我发疯。

我正在运行 OS X。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-06-16T11:17:01.883

假设`gem clean`(or `sudo gem clean`) 不起作用，我会尝试以下方法从您的系统中完全删除所有 gem：

您可以通过运行以下命令查看 gem 的安装位置：

```
gem env paths 
```

要删除系统上的所有 gem，只需删除此命令返回的文件夹即可。

此外，在 OSX Leopard 上，默认 gem 安装在此文件夹中：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8 
```

如果您的系统上存在此文件夹，则可以像以前一样删除此文件夹以确保删除所有 gem。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2010-06-12T12:32:16.453

您还可以执行以下操作来摆脱已安装的 gem。

```
gem list -d [gem name]
gem uninstall --install-dir [install directory] [gem name] 
```

如果前面提到的事情不起作用，我今天必须自己做。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-07-23T22:04:15.433

我有一个类似的问题，但根本问题原来是由于某种未知原因而存在的 gemspecs。

在我以为我已经卸载了所有宝石之后：

```
matt$ gem1.9 list
*** LOCAL GEMS ***
minitest (1.6.0)
rake (0.8.7)
rdoc (2.5.8) 
```

这里没有宝石：

```
matt$ ls -al /opt/local/lib/ruby1.9/gems/1.9.1/gems/
total 0
drwxr-xr-x  2 root  admin   68 Jul 23 14:54 .
drwxr-xr-x  8 root  admin  272 Mar  3 14:56 .. 
```

他们在那儿！

```
matt$ ls -al /opt/local/lib/ruby1.9/gems/1.9.1/specifications/
total 24
drwxr-xr-x  5 root  admin  170 Jul 23 14:54 .
drwxr-xr-x  8 root  admin  272 Mar  3 14:56 ..
-rw-r--r--  2 root  admin  129 Nov  1  2010 minitest.gemspec
-rw-r--r--  2 root  admin  121 Nov  1  2010 rake.gemspec
-rw-r--r--  2 root  admin  121 Nov  1  2010 rdoc.gemspec 
```

删除 gemspecs：

```
matt$ sudo rm /opt/local/lib/ruby1.9/gems/1.9.1/specifications/* 
```

现在宝石不见了：

```
matt$ gem1.9 list
*** LOCAL GEMS *** 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-27T15:32:46.163

如果您有多个版本的 gem，则必须先进行清理，然后删除最终的 gem。

```
 gem cleanup <gemname>
 gem uninstall <gemname> --version 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-06T22:25:29.183

我有一颗不会死的宝石，必须通过使用命令删除所有宝石来走“核弹一切”路线`gem uninstall -aIx`。然后就`gem install <gemname>`和我恢复并运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-22T17:53:01.227

通过运行更新您的 ruby​​ gems 版本，`gem update --system`然后，希望它`gem uninstall xxx`可以工作。[这是旧版本中的错误。]

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-12T15:31:27.507

查看[RVM](http://rvm.beginrescueend.com/)，它允许您在您的用户下而不是在系统目录中完全管理您的 ruby​​ 环境。我发现使用它来管理红宝石版本和宝石要容易得多。

# flash - 使用 Jpgs/png 动态构建 Flash 电影

> ID：1000739
> 
> 赞同：1
> 
> 时间：2009-06-16T10:46:02.397
> 
> 标签：flash

我想在服务器上使用 jpg 和其他数据动态创建 Flash 电影。是否有任何服务器端软件可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T04:23:27.700

PHP 带有[Ming 库](http://us3.php.net/manual/en/book.ming.php)。这是相当基本的，但它应该可以满足您的需要（创建一系列 SWFBitmap 对象，将每个对象添加到 SWFMovie 的新帧中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T04:35:01.017

请参阅[swftools](http://www.swftools.org/)。这是一个例子：

```
$ jpeg2swf -o movie.swf -3 1 -X 640 -Y 480 -f -z *.jpg 
```

使用目录中的所有 JPEG 文件创建影片。

另一种选择是使用 Perl 模块[SWF::Builder](http://search.cpan.org/perldoc/SWF::Builder)。

# c# - 验证电子邮件地址

> ID：1000747
> 
> 赞同：29
> 
> 时间：2009-06-16T10:49:42.530
> 
> 标签：c#, .net, email

我正在尝试使用以下代码使用 c# 发送电子邮件。

```
MailMessage mail = new MailMessage();
mail.From = new MailAddress(fromAddress, friendlyName);
mail.To.Add(toAddress);
mail.CC.Add(ccAddress);

//set the content
mail.Subject = emailSubject;
mail.Body = emailHeader + "\n" + emailBody;

//send the message
SmtpClient smtp = new SmtpClient(ServerAddress);
smtp.Credentials = CredentialCache.DefaultNetworkCredentials;
mail.IsBodyHtml = true;
smtp.Send(mail); 
```

现在我的函数接收到的“toAddress”字符串可能包含一个地址，或者它可能有许多逗号分隔的地址。

现在的问题是，如果有多个以逗号分隔的地址，其中一两个可能是错误的电子邮件地址格式。

因此，当我尝试使用此代码发送电子邮件时，出现异常：

“指定的字符串不是电子邮件地址所需的格式。”

有没有办法验证逗号分隔的电子邮件地址？我在某处读到验证电子邮件地址的唯一方法是向其发送电子邮件，因为验证电子邮件地址的正则表达式可能非常庞大。

另外，我无法控制设计，或者地址字符串如何进入我的功能，我无法在 UI 中添加电子邮件验证，所以我无能为力......

我的问题是电子邮件不会发送到逗号分隔字符串中的**所有**地址，即使只有**一些**地址的格式错误。

有什么方法可以正确验证 .NET 中的电子邮件地址吗？有没有办法清除坏的电子邮件地址并只将邮件发送给好的电子邮件地址？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-06-16T11:13:17.350

这是我们在生产中的代码（甚至为您添加了一个逗号）。通常你不应该使用 try/catch 进行验证，但它在这里工作得很好。我相信这比尝试重新编码验证器要好。

```
string[] allToAddresses = to.Split(";,".ToCharArray(),
                                 StringSplitOptions.RemoveEmptyEntries)
foreach (string toAddress in allToAddresses)
{
    try
    {
        message.To.Add(toAddress);
    }
    catch (FormatException)
    {
        //do nothing, ill-formed address. 
    }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-06-16T10:55:02.490

您可以使用逗号分隔电子邮件字符串，并使用简单（或巨大）电子邮件正则表达式验证每个电子邮件地址。或者，尝试创建一个`MailAddress`对象；它也支持地址的一些基本验证。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-06-16T11:00:09.360

目前我们正在使用以下功能，它对我们来说效果很好:)

```
public static bool IsValidEmail(string email)
{
    // source: http://thedailywtf.com/Articles/Validating_Email_Addresses.aspx
    Regex rx = new Regex(
    @"^[-!#$%&'*+/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z{|}~])*@[a-zA-Z](-?[a-zA-Z0-9])*(\.[a-zA-Z](-?[a-zA-Z0-9])*)+$");
    return rx.IsMatch(email);
} 
```

请使用这个：

```
(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]) 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-12-28T19:56:24.557

拥有 100% 符合 RFC 的电子邮件验证[很难](http://ex-parrot.com/%7Epdw/Mail-RFC822-Address.html)，请参阅[此答案](https://stackoverflow.com/a/201378/625332)了解详细信息。在 .NET 中，两种相对简单的方法是使用[MailAddress](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)

```
try {
    new MailAddress("invalid_email");
} catch (FormatException) {
    // invalid
}
// TODO: ask MS to implement MailAddress.TryParse to avoid exception 
```

[或者来自MSDN](http://msdn.microsoft.com/en-us/library/01escwtf.aspx)的更严格的基于正则表达式的方法（处理 .NET 4.5 的 IDN 和正则表达式解析超时）：

```
// NET 4.0
Boolean mappingInvalid = false;
emailString = Regex.Replace(emailString, @"(@)(.+)$", match => {
    String domainName = match.Groups[2].Value;
    try {
        domainName = new IdnMapping().GetAscii(domainName);
    } catch (ArgumentException) {
        mappingInvalid = true;
    }
    return match.Groups[1].Value + domainName;
});
if (mappingInvalid) {
    return false;
}
return Regex.IsMatch(emailString,
        @"^(?("")(""[^""]+?""@)|(([0-9a-z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-z])@))" +
        @"(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-z][-\w]*[0-9a-z]*\.)+[a-z0-9]{2,17}))$",
        RegexOptions.IgnoreCase); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-08-03T15:18:16.270

```
using System.ComponentModel.DataAnnotations;

return new EmailAddressAttribute().IsValid(strIn); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-06-16T11:01:21.573

以下将检查电子邮件地址的格式是否正确（不是实际存在的）：

```
private bool isEmail(string inputEmail)
{
    Regex re = new Regex(@"^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$",
                  RegexOptions.IgnoreCase);
    return re.IsMatch(inputEmail);
} 
```

我用一个更简单的表达式（包括不区分大小写）更新了它，希望让它更清晰一些。

以下是验证域实际存在的基本代码：

```
private bool isRealDomain(string inputEmail)
{
    bool isReal = false;
    try
    {
        string[] host = (inputEmail.Split('@'));
        string hostname = host[1];

        IPHostEntry IPhst = Dns.GetHostEntry(hostname);
        IPEndPoint endPt = new IPEndPoint(IPhst.AddressList[0], 25);
        Socket s = new Socket(endPt.AddressFamily,
                SocketType.Stream, ProtocolType.Tcp);
        s.Connect(endPt);
        s.Close();
        isReal = true;
    }
    catch (<specific exceptions here>)
    {
    }

    return isReal;
} 
```

您还可以做很多事情，例如实际尝试连接，以验证域是否会接收邮件。另外，您需要确保捕获必要的异常并正确处理它们。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-08-31T02:33:40.403

微软刚刚更新了他们关于验证电子邮件的文档，效果很好。链接：[https ://docs.microsoft.com/en-us/dotnet/standard/base-types/how-to-verify-that-strings-are-in-valid-email-format](https://docs.microsoft.com/en-us/dotnet/standard/base-types/how-to-verify-that-strings-are-in-valid-email-format)

片段：

```
using System;
using System.Globalization;
using System.Text.RegularExpressions;

public class RegexUtilities
{
   bool invalid = false;

   public bool IsValidEmail(string strIn)
   {
       invalid = false;
       if (String.IsNullOrEmpty(strIn))
          return false;

       // Use IdnMapping class to convert Unicode domain names.
       try {
          strIn = Regex.Replace(strIn, @"(@)(.+)$", this.DomainMapper,
                                RegexOptions.None, TimeSpan.FromMilliseconds(200));
       }
       catch (RegexMatchTimeoutException) {
         return false;
       }

        if (invalid)
           return false;

       // Return true if strIn is in valid email format.
       try {
          return Regex.IsMatch(strIn,
                @"^(?("")("".+?(?<!\\)""@)|(([0-9a-z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-z])@))" +
                @"(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-z][-0-9a-z]*[0-9a-z]*\.)+[a-z0-9][\-a-z0-9]{0,22}[a-z0-9]))$",
                RegexOptions.IgnoreCase, TimeSpan.FromMilliseconds(250));
       }
       catch (RegexMatchTimeoutException) {
          return false;
       }
   }

   private string DomainMapper(Match match)
   {
      // IdnMapping class with default property values.
      IdnMapping idn = new IdnMapping();

      string domainName = match.Groups[2].Value;
      try {
         domainName = idn.GetAscii(domainName);
      }
      catch (ArgumentException) {
         invalid = true;
      }
      return match.Groups[1].Value + domainName;
   }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-08-17T23:08:28.790

似乎没有验证电子邮件地址的好方法。

迄今为止，我还没有找到可以正确验证的正则表达式。我遇到过电子邮件地址被正则表达式阻止的情况。所以我们的重点是确保 MailMessage 在发送过程中不会抛出异常。如果是，我们可以通知用户。但除此之外，如果您提供错误的电子邮件地址，您将不会收到电子邮件。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-09-22T09:49:22.163

因为其他答案似乎都没有显示 100% 有效的正则表达式，所以我会试一试。这取自生产代码，不受单字母 TLD 问题 (me@mydomain.x) 的影响。

```
private bool IsEmailSyntaxValid(string emailToValidate)
{
    return System.Text.RegularExpressions.Regex.IsMatch(emailToValidate,
        @"^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$");
} 
```

不记得我从哪里得到的，但正如我所说，它在生产中对我有用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-27T06:21:18.373

您始终可以在[此站点上](http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html)使用正则表达式，它**庞大**且完全不可读，但它会遇到大多数边缘情况。

```
(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:
\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(
?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ 
\t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\0
31]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\
](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+
(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:
(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)
?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\
r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[
 \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)
?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t]
)*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[
 \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*
)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)
*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+
|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r
\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:
\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t
]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031
]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](
?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?
:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?
:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?
:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?
[ \t]))*"(?:(?:\r\n)?[ \t])*)*:(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|
\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>
@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"
(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?
:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[
\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-
\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(
?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;
:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([
^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\"
.\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\
]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\
[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\
r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]
|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \0
00-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\
.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,
;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?
:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[
^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]
]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)(?:,\s*(
?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(
?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[
\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t
])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t
])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?
:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|
\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:
[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\
]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)
?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["
()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)
?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>
@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[
 \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,
;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:
\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\[
"()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])
*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])
+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\
.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(
?:\r\n)?[ \t])*))*)?;\s*) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-16T11:12:30.130

是的，在分隔符上拆分电子邮件字符串，然后验证每个电子邮件地址。这是一个示例，它将在第二个电子邮件地址 (foo#bar.com) 上失败。我使用了来自 asp.net 正则表达式控件的正则表达式来验证地址。

```
String email = "bar@foo.com;foo#bar.com";

String expression = @"\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*";

Regex regex = new Regex(expression);

String[] emails = email.Split(new Char[] { ';' });

foreach (String s in emails)
{

    Match m = regex.Match(s);

    if (!m.Success)
     {
        // Validation fails.

     }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-04-22T14:02:38.153

```
string uname = Convert.ToString(string);
string expression = @"\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*";

Regex regex = new Regex(expression);
Match m = regex.Match(uname);

if (m.Success)
{
    emailId = uname; 
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-08-09T11:33:24.130

您可以使用正则**表达式**。只需写下面的代码。

```
public static bool IsValidEmail(this string email)
{
   const string pattern = @"^(?!\.)(""([^""\r\\]|\\[""\r\\])*""|" + @"([-a-z0-9!#$%&'*+/=?^_`{|}~]|(?<!\.)\.)*)(?<!\.)" + @"@[a-z0-9][\w\.-]*[a-z0-9]\.[a-z][a-z\.]*[a-z]$";    
   var regex = new Regex(pattern, RegexOptions.IgnoreCase);    
   return regex.IsMatch(email);
} 
```

# ruby - 如何快速初始化ruby项目开发环境？

> ID：1000749
> 
> 赞同：0
> 
> 时间：2009-06-16T10:50:20.313
> 
> 标签：ruby, rubygems, rake

如何以仅安装 ruby​​、rake 和 ruby​​gems 的用户可以发出单个 rake 命令来安装所需的所有依赖项的方式指定 gem 依赖项？使用 GemBuildTask 构建 gem 时是否可以使用相同的依赖规范？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-07-02T03:19:27.450

设置一个安装一堆 gem 的 rake 任务实际上很容易：

```
task :install_gems do
  require "rubygems"
  require "rubygems/dependency_installer"

  installer = Gem::DependencyInstaller.new

  [["rack"], ["merb-core", "1.0.12"]].each do |args|
    installer.install(*args)
  end
end 
```

当然，您可以将其提取到一个方法中并编写一个更漂亮的方式来指定您的依赖项，但这应该很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T12:41:07.940

我认为目前您必须编写一个与 Gem 库对话的自定义 rake 任务。

[rip](http://hellorip.com/about.html)，这个（非常）新来的孩子，可能会让这一切变得更容易，但现在还为时过早。

但其他人可能有更好的方法......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T23:23:05.600

如果您的应用程序被打包为 gem，您可以将依赖项添加到 gemspec 中，并且 ruby​​gems 将在您安装 gem 时尝试为您安装它们。

有很多方法可以用一些 ruby​​ 代码制作 gem。最近我开始使用[珠宝商](http://github.com/technicalpickles/jeweler/tree/master)。

有了它，您可以通过运行将项目安装为 gem `rake install`。有一些关于如何在其 github wiki 上进行依赖的说明。

# wcf - 通过 wcf 将 byte[]（超过 20 KB）发送到 silverlight

> ID：1000765
> 
> 赞同：4
> 
> 时间：2009-06-16T10:54:30.370
> 
> 标签：wcf, silverlight, image, bytearray

我通过 wcf 将 byte[]（图像）发送到 silverlight，从 silverlight 到 wcf，只要 byte[]（图像）小于 20KB，一切正常，但是当它更大时，它不起作用我尝试保存在silverlight中上传的图像并将其发送到wcf以将其保存在数据库中

我收到：远程服务器返回错误：NotFound”并且调试器没有到达 wcf 服务中的保存方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T11:02:35.377

检查绑定配置。它具有获取/设置最大接收数据字节数的属性：检查“maxReceivedMessageSize”属性（以字节为单位表示大小）。

编辑：[在这里](http://msdn.microsoft.com/en-us/library/ms731299.aspx)您可以找到有关所有绑定配置属性的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T11:07:22.260

如果您通过网络对对象进行序列化，还要确保您的 maxItemsInObjectGraph 足够大。我遇到了这个问题，以为它是字节，但实际上结果是我的 List<> 中的项目数。

# windows - 将所需的 DLL 包含到 Windows 项目中可以解决一个感知问题吗？

> ID：1000770
> 
> 赞同：0
> 
> 时间：2009-06-16T10:57:31.267
> 
> 标签：windows, deployment

我们最近决定开始随产品本身一起提供产品所需的某些 DLL 文件的版本。

这是为了防止出现以下情况：（例如）MVC DLL 文件在部署软件的服务器上更新，并且产品无法正常工作，因为它是针对现在以前的 DLL 版本编写的。

如果特定版本的 MVC DLL 文件包含在产品中并且“本地”引用，则可以防止此问题发生。（在理想情况下，将安装到目标服务器上的每个产品都将更新到最新版本，但这并不总是可行的）

我的担忧和问题是，这是否会给人一种虚假的安全感，或者实际上不能解决以下情况下的问题：如果 MVC DLL 文件的 1.0 版依赖于标准 Microsoft DLL 库 Y 的方法 X 和这个 DLL文件 Y 已更新，我们是否会遇到产品损坏的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T11:49:03.503

假设您指的是 MSVC (Microsoft Visual C++) DLL，正确的解决方案是使用应用程序清单。MSVC DLL 支持并行安装 (SxS)。这意味着这些 DLL 的新版本不会替换旧版本。你的应用程序清单告诉 Windows 你想要哪个 DLL 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T11:15:13.760

Depending on how big it would make your final product, consider statically linking your program. This will prevent the much dreaded DLL hell since you wont have to give DLLs out.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T11:10:58.743

我不具体了解 MVC，但是如果将冲突版本的依赖 dll 安装到目标机器上的 GAC 中，则会出现更大的问题，因为它将优先于本地文件使用。

# php - Facebook API 没有针对公共内容的客户端身份验证

> ID：1000773
> 
> 赞同：12
> 
> 时间：2009-06-16T10:58:49.457
> 
> 标签：php, api, authentication, facebook

我正在为一个已经在 Facebook 上拥有他的产品照片的客户开发一个网站，他希望在他的网站上复制相同的相册。我已经在使用 Facebook Connect，所以我放弃了`photos.getAlbums`和的组合`photos.get`来动态创建画廊。

到目前为止一切顺利，但后来我意识到，如果没有用户通过 FBC 登录，则不会创建会话并且 API 变得不可用，即使对于公开可用的内容也是如此。我显然想向所有人展示这些专辑，而不仅仅是连接他们帐户的人。

Facebook API 中的所有功能都是这样工作的吗？对于这种情况，最好（更容易实施）的解决方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2010-09-21T01:54:53.917

自 2010 年 9 月起，您现在可以仅作为应用程序进行身份验证，而无需关联用户。有关详细信息，请参阅[http://developers.facebook.com/docs/authentication/](http://developers.facebook.com/docs/authentication/)。或者您可以运行此示例代码来获取访问令牌：

```
curl -F grant_type=client_credentials \
 -F client_id=your_app_id \
 -F client_secret=your_app_secret \
 https://graph.facebook.com/oauth/access_token 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-10-17T17:39:11.780

作为记录，我设法通过开发一个小型后端来解决这种情况，该后端要求客户端登录 Facebook 一次并为 FB 应用程序提供`offline_access` [扩展权限](http://wiki.developers.facebook.com/index.php/Extended_permissions)，因此我可以保存他的会话密钥并使用它来验证 Facebook API 客户端时间我需要使用 FQL 来获取非公开内容。

显然可以在中间添加一些缓存以避免对 Facebook 的不必要请求，但它已经工作了几个月，没有达到我所知道的任何限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T15:47:22.597

这对我来说没有意义 - 我有一个（相对简单的）应用程序，即使用户以前从未登录过 facebook（在这种情况下它显示演示数据），它也会在 facebook 中呈现。

使用 facebook PHP 库时，我只是这样做：

$facebook = 新 Facebook($api_key, $secret);

不需要会话 ID - 但显然，依赖于用户信息的 api 函数将无法工作。

您还可以查看您的应用程序的[“无限会话”](http://developers.facebook.com/news.php?blog=1&story=18) - 您可以为自己创建一个无限会话密钥并使用该会话来访问 API。

# nhibernate - 使用 NHibernate 从嵌套集合返回类

> ID：1000783
> 
> 赞同：3
> 
> 时间：2009-06-16T11:01:50.633
> 
> 标签：nhibernate

域：

```
class Action
    Products: IList of class ActionProducts: 
          Category: class Category
                Products: IList of class Product 
```

现在，我想要这个：

```
 var products = from a in Session.Linq<Action>()
                from ap in a.Products
                from p in ap.Category.Products
                where a.Name == name
                select p; 
```

这个 Linq 实际上可以工作，但是： 1\. 为所有表生成选择，而不仅仅是 Products 2\. 生成左外连接，而不是内部 3\. 查询上的 Distinct() 不起作用（尽管 ToList().Distinct() 有效） .

也可以使用 SelectMany(a => a.Products).SelectMany(ap => ap.Category.Products) 来完成，但它根本不适用于当前的 NHibernate.Linq。

所以我想使用ICriteria。但我看不到如何退回产品，而不是行动？

```
 ICriteria criteria = Session.CreateCriteria(typeof(Action))
    .Add(Expression.Eq("Name", name))
    .CreateAlias("Products", "ap")
    .CreateAlias("ap.Category.Products", "p")
    .SomehowReturnMeOnly("p"); 
```

那么我该如何以某种方式返回MeOnly（“p”）？这样我就可以做到

```
return criteria.List<Product>(); 
```

哪个会因为 ICriteria 选择操作而不是产品而失败？

我可能会考虑 HQL，但我实际上不喜欢字符串查询......例如，这是 HQL 可以工作并准确生成我需要的 SQL：

```
 IQuery query = Session.CreateQuery("select distinct p from Action a inner join a.Products as ap inner join ap.Category.Products as p");
 return query.List<Product>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T12:56:56.673

现在，可以做类似的事情（记住 CreateAlias 只能做 1 级）使用

```
 DetachedCriteria dq = DetachedCriteria.For<Action>()
     .Add(Expression.Eq("Name", name))
     .CreateAlias("Products", "ap")
     .CreateAlias("ap.Category", "c")
     .CreateAlias("c.Products", "p")
     .SetProjection(Projections.Property("p.Id"));
  ICriteria criteria = Session.CreateCriteria(typeof(Product))
     .Add(Subqueries.PropertyIn("Id", dq));
  return criteria.List<Product>(); 
```

This works and passes test, but produces "SELECT FROM products WHERE id in (subquery)" which may be even better (no DISTINCT required) but is not what I wanted to achieve. Seems like Criteria API is very, very restrictive. So we have:

1.  HQL with string-query drawbacks
2.  Criteria API with lots of restrictions and sometimes awful code to achieve simple results
3.  NH-Linq which looks very promising but is incomplete now.

So I guess I'll stick with HQL until Linq is ready.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T11:52:38.333

您需要使用 Projections，如下所示：

```
ICriteria criteria = Session.CreateCriteria(typeof(Action))
    .Add(Expression.Eq("Name", name))
    .CreateAlias("Products", "ap")
    .CreateAlias("ap.Category.Products", "p")
    .SetProjection(Projections.Property("ap.Category.Products"))
    .List<Product>(); 
```

[在这里](http://nhforge.org/doc/nh/en/index.html#querycriteria-projection)查看nhibernate 文档以获取一些示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T12:17:49.280

好吧，在考虑了克里斯的回答之后......我尝试了这个，它似乎有效：

```
 ICriteria criteria = Session.CreateCriteria(typeof(Action))
    .Add(Expression.Eq("Name", name))
    .CreateAlias("Products", "ap")
    .CreateAlias("ap.Category", "c")
    .SetProjection(Projections.Distinct(Projections.Property("c.Products"))); 
```

看起来 NHibernate 不允许深度嵌套投影属性，这很奇怪。而且它也不起作用，查看生成的 SQL 我发现它只选择

```
SELECT distinct c2_.Id as y0_ FROM ... Categories c2_ ... 
```

即它并没有真正获取产品，这使我的单元测试失败，因为返回的列表只包含空值而不是产品实例。

# c# - 读取 .DXF 文件

> ID：1000785
> 
> 赞同：20
> 
> 时间：2009-06-16T11:02:15.423
> 
> 标签：c#, autocad, dxf

有谁知道源代码，最好是 C# 或类似的，用于读取 .DXF 文件（由 AutoCAD 等使用）？如果不是代码，那么表格会显示各种代码（元素/块/等）及其含义？

我自己正在编写一个阅读器，并且有详细说明格式的死树文档，但我试图避免编写例如从 255 种 ACI 颜色到 RGB 的转换器……谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-02-26T14:49:00.153

几年来，我[一直在用 Java 开发自己的 DXf-Viewer](http://www.hauk-sasko.de/fileadmin/dxf_viewer/dxf_viewer_applet.html)（您可以将自己的 DXF 文件或 URL 放在查看器上）以用于 2D 绘图。
AutoCAD 发布的信息是一个很好的基础，但没有解释它是如何工作的。
成为开放设计联盟的成员，您可以将多种 CAD 格式转换为 DXF。如果您正在开发商业产品，这可能是一个好主意。
有一本关于 DXF 的德国书 ( [http://www.crlf.de/Verlag/DXF-intern/DXF-intern.html](http://www.crlf.de/Verlag/DXF-intern/DXF-intern.html) ) 真正解释了这种格式。它很昂贵，但可以节省几天的搜索时间。
DXF 格式的颜色是索引的，你必须有一个从 ACI 到 RGB 的转换器。请注意具有特殊含义的值 0 和 1。

问候。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-24T14:43:36.103

[来自WoutWare](http://www.woutware.com/cadlib.html)的 Cadlib 我已经在几个项目中使用并取得了不错的效果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-16T11:12:18.197

幸运的是 AutoCAD 在此处发布了 DXF 格式信息：[DXF 格式](https://web.archive.org/web/20090206091720/http://usa.autodesk.com/adsk/servlet/item?siteID=123112&id=12272454&linkID=10809853)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-19T02:32:03.640

更新以防有人仍在寻找...
这是同一个库，仅包括两个链接。

[https://github.com/haplokuon/netDxf](https://github.com/haplokuon/netDxf)
[https://www.nuget.org/packages/netDXF/](https://www.nuget.org/packages/netDXF/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-16T11:13:09.007

您可能想尝试[开放设计联盟](http://www.opendesign.com/home)。自从我自己查看它已经有一段时间了，但是他们有大量的 C 库来处理各种 AutoCAD 文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-17T08:58:02.470

[这](http://www.codeproject.com/KB/cs/dxfreader.aspx)是 CodeProject dxf 阅读器的链接；不过，它似乎非常有限（而且做得不是特别好）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-24T12:27:02.180

[这](http://sourceforge.net/projects/dxf)是另一个用 Java 编写的开源 dxf 阅读器。越野车！

# visual-studio-2008 - VS2008 优先 GAC 引用解决方案文件夹中的程序集

> ID：1000792
> 
> 赞同：0
> 
> 时间：2009-06-16T11:04:30.910
> 
> 标签：visual-studio-2008, assemblies, reference, gac

我在我的解决方案中使用了一些 3rd 方库，并将它们保存在一个名为 3rdParty 的单独的源代码控制文件夹中。我已经从 VS2008 IDE 添加了对这个文件夹中 DLL 的引用。但是，我发现在保存、关闭和打开解决方案后，引用已更改为指向 GAC 中的程序集。

使用 3rdParty 文件夹的原因是我可以轻松地从任何机器获取最新版本并构建我的项目，而无需在 GAC 文件夹中安装任何东西。如何让 VS2008 不影响我的参考？

**编辑：**看到 Benjol 的回答后，我一直想知道是否可以使用程序集清单来解决这个问题。这会帮助解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T12:42:02.383

引用有一个“CopyLocal”设置，如果您将其设置为 true 并将 SpecificVersion 设置设置为 false，那么它应该使用本地引用而不是 GAC 引用。

GAC dll 先于本地引用，因为它们旨在共享，但只有在指定特定版本时才应选择。

如果这些程序集继续导致问题，您是否可以从 GAC 中删除这些程序集？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-23T09:39:33.600

即使您可以让 VS 查看您的本地文件夹，这在运行时也无济于事（我的意思是 F5/调试运行时），因为 .Net 无论如何都会首先查看 GAC。

参考 CopyLocal，AFAIK，它只是告诉编译器将引用的 DLL 的一个版本复制到项目的 /bin 文件夹中，因此“复杂”路径不应该有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-09T08:09:24.510

为了让它获取您的本地程序集，您必须进入项目属性，在“参考路径”选项卡下，并将本地目录（在您的情况下为第 3 方）添加到目录列表中。这应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-06-16T11:11:44.467

我们在我工作的地方使用了类似的方法，虽然我们称之为文件夹`ReferencedDLLs`，到目前为止我们还没有遇到任何问题。

但是，您可以尝试的一件事是编辑项目文件以删除有`PathHint`问题的引用，这样 VS2008 不知道在哪里查找，它将开始正常的方法。

# tsql - 使用最新日期在 t-sql 中分组

> ID：1000794
> 
> 赞同：2
> 
> 时间：2009-06-16T11:04:50.737
> 
> 标签：tsql, grouping

我有一张这样的桌子

```
事件 ID | 合同编号 | 活动日期 | 金额 |
----------------------------------------------
1 | 1 | 2009-01-01 | 100 |
2 | 1 | 2009-01-02 | 20 |
3 | 1 | 2009-01-03 | 50 |
4 | 2 | 2009-01-01 | 80 |
5 | 2 | 2009-01-04 | 30 |

```

对于每份合同，我需要获取与该事件相关的最新事件和金额并获得类似的内容

```
事件 ID | 合同编号 | 活动日期 | 金额 |
----------------------------------------------
3 | 1 | 2009-01-03 | 50 |
5 | 2 | 2009-01-04 | 30 |

```

我不知道如何正确分组数据。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-16T11:14:25.243

SQL 2k5/2k8：

```
with cte_ranked as (
 select *
    , row_number() over (
         partition by ContractId order by EvantDate desc) as [rank]
    from [table])
select * 
   from cte_ranked
   where [rank] = 1; 
```

SQL 2k：

```
 select t.*
    from table as t
    join (
        select max(EventDate) as MaxDate
            , ContractId 
            from table 
            group by ContractId) as mt
       on t.ContractId = mt.ContractId
          and t.EventDate = mt.MaxDate 
```

# javascript - 在 JavaScript 中创建隐藏字段

> ID：1000795
> 
> 赞同：51
> 
> 时间：2009-06-16T11:05:20.627
> 
> 标签：javascript

如何在 JavaScript 中将隐藏字段创建为特定表单？

```
 <html>
    <head>
      <script type="text/javascript">
      var a =10;
function test() {
      if (a ==10)  {
        //  ... Here i need to create some hidden field for form named = chells
      }
}
      </script>  
    </head>   
    <body >
      <form id="chells" name="formsdsd">
      <INPUT TYPE=BUTTON OnClick="test();">
     </form> 
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2009-06-16T11:09:47.903

```
var input = document.createElement("input");

input.setAttribute("type", "hidden");

input.setAttribute("name", "name_you_want");

input.setAttribute("value", "value_you_want");

//append to form element that you want .
document.getElementById("chells").appendChild(input); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-06-11T08:48:40.993

您可以使用 jquery 即时创建元素

```
$('#form').append('<input type="hidden" name="fieldname" value="fieldvalue" />'); 
```

或其他方式

```
$('<input>').attr({
    type: 'hidden',
    id: 'fieldId',
    name: 'fieldname'
}).appendTo('form') 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-06T16:05:18.017

我发现这个工作：

```
var element1 = document.createElement("input");
element1.type = "hidden";
element1.value = "10";
element1.name = "a";
document.getElementById("chells").appendChild(element1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-06T05:07:42.577

您可以使用此方法创建带/不带表单的隐藏文本字段。如果您需要表单，只需将表单与 object 一起传递`status = true`。

您还可以添加多个隐藏字段。使用这种方式：

```
CustomizePPT.setHiddenFields( 
    { 
        "hidden" : 
        {
            'fieldinFORM' : 'thisdata201' , 
            'fieldinFORM2' : 'this3' //multiple hidden fields
            .
            .
            .
            .
            .
            'nNoOfFields' : 'nthData'
        },
    "form" : 
    {
        "status" : "true",
        "formID" : "form3"
    } 
} ); 
```

```
var CustomizePPT = new Object();
CustomizePPT.setHiddenFields = function(){ 
    var request = [];
	var container = '';
	console.log(arguments);
	request = arguments[0].hidden;
    console.log(arguments[0].hasOwnProperty('form'));
	if(arguments[0].hasOwnProperty('form') == true)
	{
		if(arguments[0].form.status == 'true'){
			var parent = document.getElementById("container");
			container = document.createElement('form');
			parent.appendChild(container);
			Object.assign(container, {'id':arguments[0].form.formID});
		}
	}
	else{
		 container = document.getElementById("container");
	}

	//var container = document.getElementById("container");
	Object.keys(request).forEach(function(elem)
	{
		if($('#'+elem).length <= 0){
			console.log("Hidden Field created");
			var input = document.createElement('input');
			Object.assign(input, {"type" : "text", "id" : elem, "value" : request[elem]});
			container.appendChild(input);
		}else{
			console.log("Hidden Field Exists and value is below" );
			$('#'+elem).val(request[elem]);
		}
	});
};

CustomizePPT.setHiddenFields( { "hidden" : {'fieldinFORM' : 'thisdata201' , 'fieldinFORM2' : 'this3'}, "form" : {"status" : "true","formID" : "form3"} } );
CustomizePPT.setHiddenFields( { "hidden" : {'withoutFORM' : 'thisdata201','withoutFORM2' : 'this2'}});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id='container'>

</div>
```

# javascript - 使用javascript直接将剪贴板图像保存到客户端

> ID：1000797
> 
> 赞同：0
> 
> 时间：2009-06-16T11:05:51.967
> 
> 标签：javascript, save, clipboard

如何使用javascript直接将剪贴板图像保存到客户端？

任何示例源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T11:11:41.597

在典型的浏览器环境中，JavaScript 不能：

*   访问剪贴板
*   访问文件系统

所以你想要的在正常情况下是不可能的。

如果您有一个不寻常的环境（例如 WSH 环境，或具有低安全设置和访问 ActiveX 的 Internet Explorer），那么它可能是可以实现的，但是您如何实现它取决于您运行代码的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T11:04:42.200

查看[此相关帖子](https://stackoverflow.com/questions/999847/client-system-clipboard-print-screen-image-save-in-server-system)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-09-21T08:38:54.937

在实现[剪贴板 API](http://dev.w3.org/2006/webapi/clipops/)的浏览器中很容易。使用谷歌浏览器查看这个现场演示：http: [//strd6.com/2011/09/html5-javascript-pasting-image-data-in-chrome/](http://strd6.com/2011/09/html5-javascript-pasting-image-data-in-chrome/)

# vim - vim 映射

> ID：1000799
> 
> 赞同：2
> 
> 时间：2009-06-16T11:06:25.977
> 
> 标签：vim, mapping

我正在尝试设置一个 vim 键映射，它将映射键 ';' 到A；- 即我想自动附加';' 到行尾。但是，我在设置此映射时遇到了困难。如果可能，我还想将其限制为仅 java 文件。这可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T12:36:25.873

如果您想将此功能限制为 java 缓冲区，请查看 ftplugins。然后映射变为：

```
nnoremap <buffer> ; A;<esc> 
```

顺便说一句，我建议不要在 ' `;`' 上进行映射，因为它是一个非常有用的命令，可用于其他定义错误的映射（太多的 vimer 正在使用`:*map`而不是`:*noremap`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T12:59:53.767

使用 Luc Hermitte 所说的 ftplugins 或将以下内容添加到您的 .vimrc

```
autocmd filetype java :nnoremap <buffer> ; A;<esc> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T11:09:57.840

映射本身是这样完成的：

```
:map ; A;<esc> 
```

我建议将这一行放在你的 .vimrc 中并使用它（它不应该打扰你，因为映射只在命令模式下工作）。如果您确实必须将此行为限制为某些文件，则需要查看`autocmd`函数 ( `:help autocmd`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T11:11:34.843

作为一个快速的实现，怎么样：

```
map ; $a;cntl-vESC 
```

然后点击返回

我会考虑仅对 Java 文件启用此功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T16:47:26.503

把它放在 ~/.vim/after/ftplugin/java.vim

```
nnoremap <buffer> ; A;<Esc>
```

现在这个映射应该只对 java 缓冲区是本地的

# c# - 将 DatagridView 与 Linq to SQL 一起使用的最简单方法

> ID：1000801
> 
> 赞同：8
> 
> 时间：2009-06-16T11:06:46.927
> 
> 标签：c#, .net, linq-to-sql, datagridview

我从未使用过数据网格等，但今天我遇到了一个简单的问题，并决定“数据绑定”东西以更快地完成这项工作，但是我发现它并没有像我预期的那样工作。

我虽然通过做一些简单的事情来做到这一点：

```
 var q = from cust in dc.Customers
         where cust.FirstName == someString
         select cust;

 var list = new BindingList<Customer>(q.ToList());
 return list; 
```

然后在 DataGridView1.DataSource 中使用该列表就是我所需要的，但是，无论我用多少谷歌搜索，我都找不到一个关于如何填充（用于添加/编辑/修改）单个表的结果的体面示例查询到 DataGridView1。大多数示例都在谈论我缺乏的 ASP.NET，这是 WinForms。

有任何想法吗？

我遇到过其他帖子和 GetNewBindingList，但这似乎并没有太大变化。

我错过了什么（必须很明显）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T11:21:19.893

You can just bind the IQueryable result to the DataGridView, not sure why you converting it to a BindingList, is there a specific reason for that?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T11:44:40.703

您可能会`TableList<T>`从[这篇文章](http://groups.google.com/group/microsoft.public.dotnet.languages.csharp/browse_thread/thread/49fd93763695c4ad/)中看到基于 的`BindingList<T>`，但带有数据上下文的钩子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-02-03T23:23:33.813

试试这个，看看thedugas的答案：[unable-to-edit-datagridview-populated-with-results-of-linq-query](https://stackoverflow.com/questions/2311683/unable-to-edit-datagridview-populated-with-results-of-linq-query)

在 BindingList 旁边，它使用 BindingSource。而不是`MergeEntry`类，你使用你的`Customer`类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T07:01:23.497

绑定就行了。

```
 var q = from cust in dc.Customers
            where cust.FirstName == someString
            select cust;
    DataGridView1.DataSource = q 
```

无需将其转换为列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-26T19:53:00.540

> 字符串 = “2014 年 12 月 11 日”

尝试这个：

```
try
{
    con_a_refacionesDataContextDataContext con = new con_a_refacionesDataContextDataContext();
    BindingSource b = new BindingSource();
    b.DataSource = from eq in con.Venta 
                   where eq.fecha_dia == st 
                   select eq;
    dataGridView1.DataSource = b;
}
catch
{
} 
```

# linux - 从 linux 终端重用 vim 实例

> ID：1000804
> 
> 赞同：11
> 
> 时间：2009-06-16T11:07:14.617
> 
> 标签：linux, vim, ide, editor, terminal

通过使用 vim 中的远程功能，是否可以根据需要重用 vim 的实例来加载多个文件。

在同一个终端实例中拥有该设施会很好。

我更渴望有一个基于选项卡的界面，它在 vim 7+ 中可用 场景应该是

1.  打开终端
2.  vim文件1.cpp
3.  编辑 - 保存 - Ctrl+Z 进入提示
4.  打开另一个文件
    *   vim文件2.cpp
5.  现在我们在同一个编辑器中打开了 file1.cpp 和 file2.cpp

那可能吗？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-16T13:05:29.730

我不确定这是否可以完全按照您指定的方式完成，但是可以使用在本地计算机上运行的 vim 服务器来完成非常相似的事情。

`:help remote.txt`在 Vim 中查看。

如果您的 vim 版本是用您编译的，`+clientserver`您可以使用 vim 创建一个 vim 服务器，然后在其上执行命令，例如打开另一个文件。交换机可以创建一个新的服务器，并且
交换机可以向它发送额外的命令或文件。`--servername``--remote`

例如

```
vim --servername test file1.txt
vim --servername test --remote file2.txt 
```

我看过了，我在我的一台计算机上的 xubuntu 上作为标准使用的 vim 没有它，但是如果你的编译了它，这里有一些说明可能会有所帮助[。](http://vim.wikia.com/wiki/Enable_servername_capability_in_vim/xterm)如果不是，安装 gvim 和符号链接显然是一个选项（因为 gvim 默认包含它），或者从源代码编译二进制文件。

**编辑：**
我在 gvim 上玩了很多，这看起来不可能在终端中做到这一点。Control-Z 在进程级别暂停作业。我认为它可能适用于屏幕，但除非 gvim 在图形窗口中启动，否则似乎没有通信发生，

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-21T07:49:25.923

如果您使用 编译 VIM，这很容易做到`+clientserver`，正如[Andy 在之前的回答中所建议的那样](https://stackoverflow.com/questions/1000804/reuse-vim-instance-from-linux-terminal/1001356#1001356)。

我做了以下事情：

我将 VIM 作为服务器启动：

```
vim --servername abc 
```

我暂停了它`CTRL+Z`并做了：

```
vim --servername abc --remote ~/.cshrc
fg 
```

现在 VIM 已经`~/.cshrc`打开了。

然后我做了：

```
vim --servername abc --remote ~/.aliases
fg 
```

现在 VIM 有一个`~/.cshrc`带有`~/.aliases`.

然后我做了：

```
vim --servername abc --remote-tab ~/foo_bar
fg 
```

现在我的 VIM 有一个选项卡，前面的两个缓冲区打开，另一个选项卡`~/foo_bar`打开。

在调用情况下，VIM 在终端中运行，而不是作为 GUI。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-16T11:12:58.427

您可以通过以下方式拆分当前屏幕并打开两个（或多个）文件：

对于水平拆分，请执行以下操作：

```
:sp 'filename' 
```

对于垂直分割，请执行以下操作：

```
:vsp 'filename' 
```

要在两者之间切换，请按 ctrl+w，然后使用箭头键导航到要编辑的任何文件。

此外，如果您只想切换文件（并且只打开一个），您可以这样做：

```
:e 'filename' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-16T21:18:13.997

我有几个建议给你，但都不是你在说的。第一个是[NERD Tree](http://www.vim.org/scripts/script.php?script_id=1658)，它为您提供了一个不错的基于树的文件浏览器，用于打开其他文件。非常便利。我还设置了一个热键 ( `ctrl+o`) 来为我打开[NERD 树](http://www.vim.org/scripts/script.php?script_id=1658)。我保留了我`~/curr/trunk`正在进行的任何项目的别名，所以这总是对我有用：

```
map <C-O> :NERDTreeToggle ~/curr/trunk/<CR> 
```

我建议的另一件事是取消 ctrl+z。它有点笨拙，我认识的每个使用这种方法的人都会迷失方向，最终会在后台运行 3 或 4 个 vim。看看如何为自己打开一个shell。我使用 ;s 的映射来执行 shell 脚本：

```
map ;s :!~/.vim/shell.sh<CR> 
```

执行：

```
#!/bin/sh
/usr/local/bin/bash -l; 
```

我的 .profile 中也有一点魔力，可以让我很明显我在 VIM 中：

```
if [ "$VIMRUNTIME" != "" ] ; then
    export PS1="\u@\h \W \t$ vim> "
fi 
```

</2 美分>

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-16T11:22:10.140

天，

或者，如果您想拥有多个文件，但一次将整个 vim 窗口用于一个文件，您只需输入

```
:e 'filename' 
```

打开新文件。您可以多次执行此操作。要查看您当前打开的内容，请输入

```
:ls 
```

要在您打开的文件之间跳转，您可以使用 cntl-^ (shift-cnt-6)，它将在主文件和辅助文件之间交替（在文件列表中显示为 % 和 #）

或者你可以输入

```
:n b 
```

其中 n 是 'ls' 命令显示的列表中所需文件开头的编号。

高温高压

干杯，

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T11:21:39.767

您可以`hidden`在 vim 上设置该功能，以允许它打开多个文件：

```
:set hidden 
```

然后，您可以根据需要打开任意数量的文件，而无需在每次要切换“缓冲区”时都保存它们：

```
:e 'filename' 
```

您有几个命令来导航缓冲区：

```
:bnext
:bprev
:buffers 
```

当然，正如 samoz 所提到的，您可以拆分屏幕以在同一个窗口中查看多个缓冲区。

我建议阅读[这篇](http://blog.interlinked.org/tutorials/vim_tutorial.html)文章以获得有关 vim 的良好介绍，它将为您节省大量时间。

祝你好运！

# python - 如何展平鱼眼图片（使用python）？

> ID：1000806
> 
> 赞同：1
> 
> 时间：2009-06-16T11:07:46.847
> 
> 标签：python, image-processing, fisheye, photography

我找到了将鱼眼图片变成平面图片的程序。

我想了解幕后的过程。

有人可以分享他们对这项技术的了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T12:17:54.647

我的理解是鱼眼效果基本上是半球体上的投影，对吧？要扭转这种情况，您需要使用方程式将半球体投影到平面中。快速搜索发现了那些鱼眼投影[方程](http://wiki.panotools.org/Fisheye_Projection)，反转它们应该很容易。我希望这能让你朝着正确的方向前进。

# iphone - 在 iPhone 上使用导航控制器旋转视图

> ID：1000815
> 
> 赞同：1
> 
> 时间：2009-06-16T11:11:30.880
> 
> 标签：iphone, uinavigationcontroller, rotation

我的应用程序有一个包含导航控制器的选项卡栏。

当我旋转到横向时，我通过将横向视图推送到导航控制器堆栈来切换到不同的视图，如下所示：

```
 - (void) orientationDidChange: (NSNotification *) notification {    
if (self.tabBarController.selectedViewController == self.navigationController) {
    if (self.navigationController.topViewController == self && 
        [[notification name] isEqualToString: kOrientationLandscape]) {
        [self.navigationController pushViewController: landscapeViewController animated: NO];
    } 

    if (self.navigationController.topViewController != self && 
        [[notification name] isEqualToString: kOrientationPortrait]) {
        [self.navigationController popViewControllerAnimated: NO];
    }
} 
```

}

这很好用，但是当我旋转回纵向时，视图会正确显示，然后根据我猜测的导航栏的高度“跳跃”。然后视图的顶部隐藏在导航栏后面。

如果我以通常的方式将另一个控制器推到顶部，然后弹回它正确显示的纵向视图 - 这仅在从横向旋转回来时发生。

此外，它在模拟器中运行良好，但在 iPhone 上却不行。我正在为 2.0 构建，但对于以后的版本似乎也是一样的。

有任何想法吗？

干杯灰

# c# - TypeDescriptor.CreateProperty 不添加属性

> ID：1000819
> 
> 赞同：2
> 
> 时间：2009-06-16T11:11:51.067
> 
> 标签：c#, data-binding, typedescriptor, system.componentmodel

我正在尝试使用 TypeDescriptor.CreateProperty 将属性添加到类型中，以便在属性网格中显示其他属性，但是未添加此新属性，并且当我在该类型上调用 TypeDescriptor.GetProperties 以检查属性时，此属性不存在。

我可能会遗漏或忽略某些东西吗？据我所知，这是一个基本而简单的场景。

这是调用：TypeDescriptor.CreateProperty(typeof (MovieMenuItem), "ExternalMediaLocation", typeof (string), null);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T11:22:48.657

`CreateProperty`只是给你一个基于反射`PropertyDescriptor`的类型（例如，它不是`AddProperty`）。这里的场景是什么？如果您只需要在 中显示额外的数据`DataGridView`，最简单的选择就是在网格中添加一个额外的未绑定列。

您*可以*在运行时扩展类型，但对于列表，您有两个主要选项：

*   `ITypedList`（如果列表的每个实例可以有不同的列） - 看到[这个答案](https://stackoverflow.com/questions/882214/data-binding-dynamic-data/882246#882246)
*   `TypeDescriptionProvider`- 允许您为每种类型添加自定义属性（最终归结为编写 a `PropertyDescriptor`，就像第一个示例一样 - 但不同的钩子）

如何获取基于列表的元数据的完整规则在[这个答案中](https://stackoverflow.com/questions/927383/c-grid-datasource-polymorphism/954715#954715)

# .net - 在 ASP.NET 中更改列表框滚动条的颜色

> ID：1000827
> 
> 赞同：0
> 
> 时间：2009-06-16T11:13:46.773
> 
> 标签：.net, asp.net, listbox, scrollbar, backcolor

如何在 ASP.NET 中更改列表框的滚动条颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T11:18:05.703

使用 CSS 更改颜色，这将允许您播放并帮助为您生成 CSS。 [CSS 彩色滚动条代码](http://www.maketemplate.com/scrollbar/)

# c# - How can i split the string only once using C#

> ID：1000831
> 
> 赞同：13
> 
> 时间：2009-06-16T11:14:07.333
> 
> 标签：c#

Example : a - b - c must be split as a and b - c, instead of 3 substrings

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-06-16T11:16:11.917

Specify the maximum number of items that you want:

```
string[] splitted = text.Split(new string[]{" - "}, 2, StringSplitOptions.None); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-06-16T11:16:39.373

```
string s = "a - b - c";
string[] parts = s.Split(new char[] { '-' }, 2);
// note, you'll still need to trim off any whitespace 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-16T11:19:09.633

```
"a-b-c".Split( new char[] { '-' }, 2 ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-16T11:18:38.760

You could use indexOf() to find the first instance of the character you want to split with, then substring() to get the two aspects. For example...

```
int pos = myString.IndexOf('-');
string first = myString.Substring(0, pos);
string second = myString.Substring(pos); 
```

This is a rough example - you'll need to play with it if you don't want the separator character in there - but you should get the idea from this.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T11:22:15.617

```
string[] splitted = "a - b - c".Split(new char[]{' ', '-'}, 2, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T11:25:07.310

```
var str = "a-b-c";
int splitPos = str.IndexOf('-');
string[] split = { str.Remove(splitPos), str.Substring(splitPos + 1) }; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T11:56:22.973

我加入晚了，上面的许多答案都与我的以下话相匹配：

字符串有自己的

> 分裂

您可以使用相同的方法找到问题的解决方案，以下是根据您的问题的示例：

```
using System;

public class Program
{
    public static void Main()
    {
        var PrimaryString = "a - b - c";
        var strPrimary  = PrimaryString.Split( new char[] { '-' }, 2 );
        Console.WriteLine("First:{0}, Second:{1}",strPrimary[0],strPrimary[1]);

    }
} 
```

* * *

```
Output:
First:a , Second: b - c 
```

# nhibernate - Avoiding N+1 selects using business rules in NHibernate

> ID：1000844
> 
> 赞同：2
> 
> 时间：2009-06-16T11:17:37.390
> 
> 标签：nhibernate, business-logic

I know the basic ways to avoid the N+1 selects problem in Hibernate/NHibernate, but have run into a variant of the problem that I can't find a good solution to.

I have the following three entities mapped: Item, Category and Customer. An item is associated many-to-many to Category, and a Category is mapped many-to-one to Customer. So far, nothing special.

A standard query in my application is to get all the items for a given customer. I do this using the following criteria, trying to fetch the items' categories eagerly, to avoid N+1 selects when examining the items' Categories property:

```
ICriteria criteria = mySession.CreateCriteria(typeof(Item));
    .CreateCriteria("Categories", NHibernate.SqlCommand.JoinType.InnerJoin)
        .Add(Expression.Eq("Customer", c));
criteria.SetFetchMode("Categories", FetchMode.Eager);

return criteria.List(); 
```

However, this doesn't work, NHibernate still fetches the categories with one select per item later on.

What I believe is going on is that NHibernate knows that the result from the first query is filtered (on Customer), and that the categories returned by the query might not be complete, hence it later has to do a separate query to get the categories. (Is this assumption correct? It seems reasonable to me that NHibernate must work this way to ensure correct results.)

However, according to my business rules (or what you want to call them), an item can't belong to categories from more than one customer, so in reality I know the result from the first query is actually complete.

My question is: can I tell NHibernate about this business rule in any way? Is there another way to avoid N+1 selects in this type of situation (which seems pretty common)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-23T12:37:16.487

将尝试回答我自己的问题，因为到目前为止我还没有得到任何答案。

我的解决方案是将问题分为两个查询：首先获取属于相关客户的商品的 ID：

```
IQuery query = mySession.CreateQuery("select item.Id from Item as item "
    + "join item.Categories as category "
    + "join category.Customer customer "
    + "where customer.id=:id")
    .SetInt32("id", c.Id);
IList itemIds = query.List(); 
```

然后，我只使用 ID 就可以在不涉及任何客户限制的情况下获取实际项目。这样，NHibernate 知道它可以从单个连接中获取所有类别，避免了问题中提到的 N+1 选择：

```
ICriteria criteria = mySession.CreateCriteria(typeof(MapItem))
    .SetFetchMode("Categories", FetchMode.Eager)
    .SetResultTransformer(new DistinctRootEntityResultTransformer())
    .Add(Expression.In("Id", itemIds));
IList items = criteria.List(); 
```

我想不出任何解决方案来将其简化为一个有效的单一查询。此外，这种方法迫使程序员对 NHibernate 的内部工作了解得太多，在编写新的查询或条件时很容易错过。更通用的解决方案将是可取的。

# c# - 如何获取 WinForm 应用程序中最顶层表单的句柄？

> ID：1000847
> 
> 赞同：9
> 
> 时间：2009-06-16T11:17:49.790
> 
> 标签：c#, winforms, winapi, topmost

我有一个 WinForm 应用程序，它有其他子表单（不是 mdi）。如果用户按下“Esc”，即使没有焦点，最顶层的表单也应该关闭。

我可以使用键盘挂钩来全局捕获 Escape，但我还需要关闭表单的句柄。

我想有一种方法可以使用 Win32 API，但是有没有使用托管代码的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-17T08:34:50.817

这是获得使用 Win32 的最顶层表单的一种方法（不是很优雅，但它有效）：

```
public const int GW_HWNDNEXT = 2; // The next window is below the specified window
public const int GW_HWNDPREV = 3; // The previous window is above

[DllImport("user32.dll")]
static extern IntPtr GetTopWindow(IntPtr hWnd);

[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool IsWindowVisible(IntPtr hWnd);

[DllImport("user32.dll", CharSet = CharSet.Auto, EntryPoint = "GetWindow", SetLastError = true)]
public static extern IntPtr GetNextWindow(IntPtr hwnd, [MarshalAs(UnmanagedType.U4)] int wFlag);

/// <summary>
/// Searches for the topmost visible form of your app in all the forms opened in the current Windows session.
/// </summary>
/// <param name="hWnd_mainFrm">Handle of the main form</param>
/// <returns>The Form that is currently TopMost, or null</returns>
public static Form GetTopMostWindow(IntPtr hWnd_mainFrm)
{
    Form frm = null;

    IntPtr hwnd = GetTopWindow((IntPtr)null);
    if (hwnd != IntPtr.Zero)
    {
        while ((!IsWindowVisible(hwnd) || frm == null) && hwnd != hWnd_mainFrm)
        {
            // Get next window under the current handler
            hwnd = GetNextWindow(hwnd, GW_HWNDNEXT);

            try
            {
                frm = (Form)Form.FromHandle(hwnd);
            }
            catch
            {
                // Weird behaviour: In some cases, trying to cast to a Form a handle of an object 
                // that isn't a form will just return null. In other cases, will throw an exception.
            }
        }
    }

    return frm;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-02-13T23:40:46.280

[使用Application.Openforms](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)怎么样

```
Form GetTopMostForm()
{
    return Application.OpenForms
        .Cast<Form>()
        .First(x => x.Focused);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-07T23:22:54.953

我知道这是一个已有 4 年历史的线程，但我遇到了类似的问题，只是想出了一个替代解决方案，以防万一其他人偶然发现这个问题并且不想搞乱 Win32 调用。

我假设最顶层的表单将是最后激活的表单。因此，您可以保留一个单独的表单集合，类似于 Application.OpenForms，除了此集合将按每个上次激活的时间排序。每当激活表单时，将其移动到集合的第一项。每当您看到 ESC 键时，您都会关闭 collection[0] 并将其删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T13:04:40.217

FormCollection 由 Application 对象使用，通过 OpenForms 属性列出应用程序中当前打开的表单

请参阅[http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)

然后您可以检查每个表单的 TopMost() 属性。当你找到一个最顶层的表单时，你关闭它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T15:04:08.150

您可以在最顶层的表单中实现类似单例的模式，并提供一个静态属性，该属性返回自身的一个实例并简单地关闭它。

```
 public class MainForm : Form
   {
      private static MainForm mainForm;

      public static MainForm { get { return mainForm; } }

      public MainForm()
      {
         mainForm = this;
      }
   }

   // When the ESC key is pressed...
   MainForm.MainForm.Close(); 
```

# html - 使用 Flash 播放器将 MP4 嵌入 HTML

> ID：1000851
> 
> 赞同：14
> 
> 时间：2009-06-16T11:18:33.033
> 
> 标签：html, flash, mp4

我可以使用 Flash 播放器嵌入 MP4 文件流吗？我发现有几个地方提到了它，但有些地方还提到可能需要 flash-10，它现在可能适用于流媒体等......

有什么我应该注意的限制吗？哪个嵌入式 Flash 播放器效果很好？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-16T11:48:45.737

是的你可以。需要闪存 9.0.115。

[Flowplayer](http://flowplayer.org/)是我的最爱。免费和开源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-06-02T03:04:25.543

MP4 文件需要使用实用程序或服务器代码进行编码或修复才能快速启动 - 文件开头而不是结尾的标题信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-10-14T03:30:24.027

将元数据移动到文件前面的程序在这里： [http ://rndware.info/products/metadata-mover.html](http://rndware.info/products/metadata-mover.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T23:10:34.927

使用 Video.Js .. [http://videojs.com/](http://videojs.com/) .. 最好的 Html5 视频播放器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-02T16:26:38.760

这里有几个玩家：

*   [MediaElement](http://mediaelementjs.com/)：支持 HTML5 和 Flash（如果浏览器需要，自动支持）。免费且适用于基本配置。警告：这个项目有[很多](https://github.com/johndyer/mediaelement/issues)未解决的问题，所以如果你的配置有问题，你就不走运了
*   [f4player](https://github.com/gokercebeci/f4player)：它是最小的之一，只有 10kb，在 GPL 许可下免费。它支持flv、f4v、mp4、流和实时流。虽然它已经有一段时间没有更新了。
*   [Video.js](http://videojs.com/)：不要让超级蹩脚的项目名称欺骗了你。这个项目很棒，并且得到了最好的支持。多年来，我们一直在生产软件上使用它，没有任何问题。这是你最好的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T04:34:51.070

我认为这对网站上的视频也有帮助：Jwplayer

[www.longtailvideo.com/players/jw-flv-player/](http://www.longtailvideo.com/players/jw-flv-player/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-19T18:17:44.840

我还知道一个支持 MP4、Flv 和 MP4 格式的出色视频播放器：它是 KAWA Player -> [http://monmoulin.fr/kawa_player_video_flash.html](http://monmoulin.fr/kawa_player_video_flash.html)

当然，它是完全免费的！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-21T07:43:07.470

这是一个开源播放器

[http://hdflvplayer.net/](http://hdflvplayer.net/)

支持 MP4 视频和更多惊人的功能！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-20T15:12:14.357

FlashFox 运行良好，而且非常小。见[https://code.google.com/p/flashfox/](https://code.google.com/p/flashfox/)

从[http://flashfox.googlecode.com/svn/trunk/下载并在](http://flashfox.googlecode.com/svn/trunk/)[http://v4e.thewikies.com/](http://v4e.thewikies.com/)上查找使用信息。您需要为视频提供完整的 URL，即使它是本地的。

# xslt - 在 for-each 中仅显示一次标题

> ID：1000854
> 
> 赞同：2
> 
> 时间：2009-06-16T11:19:20.693
> 
> 标签：xslt

假设我有以下 XML：

```
<a>
  <b>1</b>
  <b>2</b>
  <b>3</b>
</a> 
```

...并要求：

```
Header
1
2
3 
```

...但是像这样的xslt：

```
<xsl:template match = "/" >  
  <xsl:variable name="headed" select="false()"/>
  <xsl:for-each select = "a/*" >
    <xsl:if test="not($headed)">
      <xsl:text>Header</xsl:text>
      <!-- 
        this next line causes a problem due to 
        the attempted reassignment of $headed
      -->
      <xsl:variable name="headed" select="true()"/>
    </xsl:if>
    <xsl:value-of select="." />
    <xsl:value-of select="'&#x0a;'"/>
  </xsl:for-each>
</xsl:template> 
```

无效，有人可以推荐一个简短易读的解决方案吗？也许是一本可以从中学习功能性思维方式的好书:)

干杯

西蒙

------------------------------ 附录 ------------------- --------

在思考了我得到的答案后，我意识到我已经失去了我试图解决的问题的一些关键组成部分。

我的数据更像：

```
<address>
  <line1>street</line1>
  <line2>town</line2>
  <line3>city</line3>
  <country>uk</country>
</address> 
```

我想要的输出更像是：

```
<table>
  <tr><td rowspan="6" valign="top">Address</td><td>street</td></tr>
  <tr><td>town</td></tr>
  <tr><td>city</td></tr>
  <tr><td>uk</td></tr>
</table> 
```

任何进一步的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T11:28:21.063

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="a">Header
   <xsl:apply-templates/>
</xsl:template>

<xsl:template match="a/b">
  <xsl:apply-templates/>
</xsl:template>

</xsl:stylesheet> 
```

实际上是您想要的，并且比您现在拥有的更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T11:27:01.443

只需从 for-each 中取出 <xsl:text>Header</xsl:text> ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T12:52:25.060

最终结果更像是：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
        <xsl:stylesheet  version = "1.0"
        xmlns:xsl = "http://www.w3.org/1999/XSL/Transform" >

          <xsl:template match="/a">
            <html><body><table>
                <xsl:apply-templates select="*"/>
            </table></body></html>
          </xsl:template>

          <xsl:template match="a/*">
            <xsl:if test="not(.='')">
              <TR>
                <xsl:if test="position()=1">
    <!--
                  <TD rowspan="6" valign="top">Address</TD>
                 improved based on Tomalak's suggestion
    -->
              <xsl:element name="TD">
                <xsl:attribute name="rowspan" >
    <!--
                  <cough />
                  <xsl:value-of select="count(*)"/>
    -->
                  <xsl:value-of select="count(*[not(.='')]"/>
                </xsl:attribute>
                <xsl:attribute name="valign" >
                  <xsl:text>top</xsl:text>
                </xsl:attribute>
                <xsl:text>Address</xsl:text>
              </xsl:element>

                </xsl:if>
                <TD>
                  <xsl:value-of select="."/>
                </TD>
              </TR>
            </xsl:if>
          </xsl:template>
        </xsl:stylesheet> 
```

# php - twitter status message update through bot using php and twitter oauth

> ID：1000860
> 
> 赞同：0
> 
> 时间：2009-06-16T11:21:19.427
> 
> 标签：php, twitter, oauth, bots

I have followed the steps defined in the following link for twitter oauth implementation.

**[https://docs.google.com/View?docID=dcf2dzzs_2339fzbfsf4](https://docs.google.com/View?docID=dcf2dzzs_2339fzbfsf4)**

Its working fine when i run through web browser but i want a user should be able to update status of twitter account through gmail chat i.e. he should only be authenticated once through web then he should be able to send the status message through gmail chat and his twitter account should be updated

How can i inegrate this because gmail id can be different from twitter id?

Please guide.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-04T15:56:15.927

这可能会有所帮助，我以前也遇到过同样的问题，现在已经解决了。

[http://ruckuus.wordpress.com/2009/09/04/pecl-and-twitter-oauth/](http://ruckuus.wordpress.com/2009/09/04/pecl-and-twitter-oauth/)

基本上，在您向用户请求授权后，您将访问 /access_token，您将获得经过身份验证的 oauth_token 和持久性的 oauth_token_secret。因此，如果您已经拥有这些变量，则不再需要访问 access_token 。

存储它非常简单，可以将它们放入数据库、cookies（如果您使用 Web 应用程序）或明文中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T11:36:32.843

当您使用 oauth 向 twitter 进行身份验证时，您可以存储并在稍后发布更新时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-08T17:42:03.483

这篇文章包含了我设置一个使用 OAuth 进行身份验证的 Twitter 发布机器人所需的一切：http: [//masnun.com/blog/2010/04/30/setting-up-twitter-bots-with-oauth/](http://masnun.com/blog/2010/04/30/setting-up-twitter-bots-with-oauth/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-16T06:04:22.317

尝试使用这个库，

[http://emmense.com/php-twitter/](http://emmense.com/php-twitter/)

干杯

# svn - Subversion 和 MKS 的区别

> ID：1000867
> 
> 赞同：3
> 
> 时间：2009-06-16T11:22:52.027
> 
> 标签：svn, mks, mks-integrity

请让我知道 Subversion 和 MKS 之间的区别

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-06-16T11:29:41.547

**Subversion：**集中式 VCS、合并或锁定语义、基于存储库、开源、巨大的市场份额（尽管它已经被 Mercurial 和 Git 等 DVCS 条目所占据）、免费、优秀的工具集和支持基础设施。

**MKS：**集中式 VCS，仅锁定语义，基于存储库，封闭源代码，市场份额相对有限，不是免费的（999 美元以上/许可），开发的工具集明显不足。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-05-04T16:41:20.803

如果您需要 Forrester 告诉您最好的 SCM 是什么，那么您已经遇到了麻烦。任何白痴“分析师”都可以就 MKS 提供的惊人管理功能编写一份精彩的报告，但如果问一个曾经使用过 MKS 的值得他/她盐分的开发人员绝不会推荐它。

MKS 设法完全破坏了 Eclipse/WSAD 集成（SVN/CVS 完美集成）。

MKS 是我在 SCM 中使用过的最大的一堆废话（这说明了很多，因为我在早期也使用过 Microsoft Visual Source Safe）。

是的，Subversion 不是“免费”支持的，但任何人都可以设置它，任何有头脑的系统管理员都可以管理它并进行适当的备份。

不过，这取决于你。如果您想取悦管理层并选择勾选所有框的“正确”选择，请选择 MKS。如果您希望您的开发人员真正完成一些工作，那么就一直使用 SVN。

但是，由于不得不使用 MKS，我将在 CruiseControl for CI 上发布早期的海报，它确实有效，但它有点过时了。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-02-02T23:42:09.727

正如 Doyle 所提到的，MKS 和 SVN 之间的最大区别在于 SVN 是一个专用的版本控制系统，而 MKS 是一整套应用程序，涵盖了从需求管理和错误跟踪到测试管理的整个生命周期。顺便说一句，它还包括版本控制。

下面列出了我遇到的一些具体问题。请记住，这是截至 2008 年的时间范围，所以我不知道它在新版本中是否仍然适用：

*   慢（主要适用于大型项目；对于较小的项目还不错）
*   无法找到与之集成的 3rd 方工具
*   声称与之集成的工具具有易碎的集成（特别是 Visual Studio 和 Code Collaborator）
*   分支策略令人困惑；有很多空白的表情试图解释开发路径和共享子项目
*   分支之间的合并既尴尬又麻烦
*   与其他错误工具相比，错误跟踪器缺乏一些工作流程灵活性
*   管理工具不够完善

我不*讨厌*它，但我也不能推荐它。

# wpf - ResourceDictionary in WPF Control Library

> ID：1000875
> 
> 赞同：2
> 
> 时间：2009-06-16T11:25:08.043
> 
> 标签：wpf, vsto, resourcedictionary

We are creating an office ribbon that opens up a WPF window that is stored in another WPF Control library project. That WPF window has some themes attached to it that is stored in a ResourceDictionary that is compiled in a separate project.

However when we load up the WPF window, all the themes from the ResourceDictionary are lost.

We can fix this by manually/forcing the theme on the window itself, but this seems like a bad solution. So my question is: how can I load the theme of the new WPF window from the Office Addin application?

```
Uri uri = new Uri("/Nov.Presentation.RigDoc.WpfResources;component/Shared.xaml", UriKind.Relative);
            Resources.MergedDictionaries.Add(Application.LoadComponent(uri) as ResourceDictionary); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-01-27T15:18:52.270

我刚刚在 Office 2010 上尝试过这个（实际上使用的是 2007 VSTO 插件，但在 2010 年运行它）并且效果很好。我在 VSTO 项目中引用了一个外部项目的库，我在控件中使用以下 xaml 来链接资源字典。

```
<UserControl.Resources>
    <ResourceDictionary>

        <!-- Link in th general styles -->
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/MyAssemblyName;component/MyResourceDictionaryName.xaml" />
        </ResourceDictionary.MergedDictionaries>

        <!-- Other style... -->

    </ResourceDictionary>        

</UserControl.Resources> 
```

否则我会认为这是一个问题，因为您的样式被后来的一些显式或隐式链接的样式覆盖。如果它找不到您引用的程序集，它应该抛出一个示例，因此问题不应该存在。

# jakarta-ee - 如何使用 JSTL 选择集合的第一个元素？

> ID：1000876
> 
> 赞同：52
> 
> 时间：2009-06-16T11:25:43.347
> 
> 标签：jakarta-ee, jstl

我设法用下一个代码做到了，但必须有一个更简单的方法。

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<c:if test="${fn:length(attachments) > 0}">
    <c:forEach var="attachment" items="${attachments}" varStatus="loopCount">
        <c:if test="${loopCount.count eq 1}">
         attachment.id
        </c:if>
    </c:forEach>
</c:if> 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2009-06-17T07:02:37.440

您可以使用数组 [] 运算符访问单个元素：

```
<c:out value="${attachments[0].id}" /> 
```

这适用于数组和列表。它不适用于地图和场景。在这种情况下，您必须将元素的键放在括号内。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2011-05-26T21:53:23.547

集合没有顺序，但如果您仍想获得第一个元素，您可以使用以下内容：

```
<c:forEach var="attachment" items="${attachments}" end="0">
     <c:out value="${attachment.id} />
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-08-18T16:28:53.580

仅适用于数组和列表，不适用于集合。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-06-23T16:01:36.797

由于我的 Set 中只有一个元素，因此顺序并不重要所以我可以像这样访问第一个元素：

```
${ attachments.iterator().next().id } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-12-11T15:45:25.207

[在此处](http://blog.andrewbeacock.com/2009/04/jstl-foreach-looping-tricks-using.html)查找statusVar 变量的描述。您可以执行以下操作，其中“状态”变量包含迭代的当前状态。如果您需要第一个和最后一个迭代的特殊注释，这非常有用。在下面的情况下，我想省略最后一个标签后面的逗号。当然，您可以替换`status.last`为`status.first`在第一次迭代中做一些特别的事情：

```
<td>
    <c:forEach var="tag" items="${idea.tags}" varStatus="status">
        <span>${tag.name not status.last ? ', ' : ''}</span>
    </c:forEach>
</td> 
```

可能的选项是：**`current, index, count, first, last, begin, step,`**和**`end`**

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-07T20:29:07.360

如果您只想要集合的**第一个**元素（并且您确定至少有一个元素），您可以执行以下操作：

```
<c:choose>
    <c:when test="${dealership.administeredBy.size() == 1}">
        Hello ${dealership.administeredBy.iterator().next().firstName},<br/>
    </c:when>
    <c:when test="${dealership.administeredBy.size() > 1}">
        Hello Administrators,<br/>
    </c:when>
    <c:otherwise>
    </c:otherwise>
</c:choose> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-20T11:37:20.423

您可以使用 EL 3.0 Stream API。

```
<div>${attachments.stream().findFirst().get()}</div> 
```

**当心！**[EL 3.0 Stream API是在](https://tomcat.apache.org/tomcat-8.5-doc/api/index.html?org/apache/el/stream/Stream.html)[Java 8 Stream](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html) API之前完成的，它与此不同。他们不能 sunc 两个 api，因为它会破坏向后兼容性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-10-07T11:33:49.393

使用 ${mySet.toArray[0]} 不起作用。

我认为如果没有 forEach 循环至少一次迭代是不可能的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-20T16:11:36.400

使用 begin 和 end 似乎对我选择一系列元素有用。这给了我三个单独的列表。第一个列表包含项目 1-9，第二个列表包含项目 10-18，最后一个列表包含项目 11-25。

```
 <ul>
                        <c:forEach items="${actionBean.top25Teams}" begin="0" end="8" var="team" varStatus="counter">
                            <li>${team.name}</li>                               
                        </c:forEach> 
                    </ul>

                    <ul>
                        <c:forEach items="${actionBean.top25Teams}" begin="9" end="17" var="team" varStatus="counter">
                            <li>${team.name}</li>                               
                        </c:forEach> 
                    </ul>

                    <ul>
                        <c:forEach items="${actionBean.top25Teams}" begin="18" end="25" var="team" varStatus="counter">
                            <li>${team.name}</li>                               
                        </c:forEach> 
                    </ul> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-08T15:25:23.077

如果是一套`${attachments[0].id}`就不行了。改用这个

`${attachments.first().key}`或者`${attachments.first().value}`

# user-interface - 静态 UI 与动态 UI

> ID：1000878
> 
> 赞同：14
> 
> 时间：2009-06-16T11:26:27.573
> 
> 标签：user-interface

在一些带有 UI 的应用程序中，什么对用户来说更好（简单、友好等）：

1.  UI 是静态的（不依赖于用户状态）。例如，用户看到某个按钮，但它是灰色的，或者当它被点击时，会显示一条消息，表明此操作现在不适用。

或者

2.  UI 是动态的（取决于用户状态）。例如，用户看不到按钮，这些按钮现在不适用。但是经过一些操作后，按钮可能会出现/消失。

对不起我的法语:)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-06-16T11:32:04.630

在我看来，带有禁用控件的静态 GUI 更可取。
当某些选项不可见时，用户将不知道它们存在。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-06-16T11:36:46.650

这两种风格都有其用途。请记住，您应该始终使用正确的工具来完成工作，并且（几乎）在创建软件方面没有绝对性。

在大多数情况下，最好使用带有灰色元素的静态 UI。通过在用户单击或尝试与灰显元素交互时提供简单的非侵入性消息（例如，不显示模态消息框），您可以训练您的用户。

在大多数情况下，真正发生的是有一个灰色的菜单，您的用户想知道他们需要修复什么才能点击该元素。这是糟糕的用户界面设计。

如果您有一个登录用户永远无法使用的广泛管理部分，那么动态 UI 也很重要。通过隐藏管理部分，您可以避免永远不会与隐藏的界面元素交互的用户的混淆和界面“过载”。

Adobe Photoshop 等应用程序需要动态 UI。Adobe Photoshop 中有数以千计的命令和菜单项。任何用户可以理解界面的唯一方法是根据应用程序的状态隐藏和显示用户界面元素。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-06-16T11:29:20.143

我总是推荐一个尽可能不变的 UI：

*   不要让用户感到惊讶

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-16T11:35:03.563

我认为这个问题没有正确或错误的答案，我认为这只是意见/偏好问题。

就个人而言，我会向用户公开所有功能，并在无法访问时将其灰显。但是，在某些情况下，我会考虑从视图中删除按钮，例如

*   管理选项（可能不希望将此暴露给具有较低权限的用户）
*   RunOnce 功能（激活产品/注册）

这样做的原因是，当用户不打算访问它们时，或者如果该功能将永远处于灰色状态，那么公开功能是没有意义的......

希望有帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-06-16T11:48:08.467

*   如果由于用户的个人资料禁止使用而导致操作不可用，则根本不显示

*   如果某项操作仅因为必须先完成另一项操作而无法使用：

    *   将其变灰或

    *   保持激活状态，但在执行时会显示一条消息，并清楚说明为什么无法执行

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-06-16T12:13:01.070

仅当该操作对于任务的当前状态在逻辑上是不可能的，或者对某些用户被允许执行的操作（例如，特权/权限）。尽可能使用户操作始终可用：

*   使用状态指示器来阻止不必要的操作，但无论如何都要允许它们。

*   使用验证和撤消来防止不明智的操作造成永久性损坏，而不是禁止这些操作。用户有一天可能需要做一些通常“不可取的”事情。</p>

*   更改应用程序设计以使操作始终以某种方式成为可能。例如，如果需要先填写某个字段才能完成某项操作，请提示用户输入该字段，而不是禁止该操作。

*   通过组织策略而不是软件来控制用户行为。当业务规则发生变化或出现异常或紧急情况时，策略更容易更改。

在以下情况下使用禁用：

*   用户可以在应用程序中执行某些操作以使操作可用。

*   可用性是通过同一窗口或其父窗口中的控件来实现的。

*   用户可以很容易地找出执行此操作的控件。

使用切换控件而不是禁用来打开和关闭进程。

对于适用于用户不可更改的当前状态的数据，请使用只读文本框而不是禁用的文本框。

使用隐藏（“动态 UI”）：

*   对于用户在当前工作中永远无法使用的操作。

*   用于指示不同的虚拟位置或事物（例如，选项卡控件上的页面，其中每个“选项卡”是不同的位置或事物）。确保视觉设计与此兼容：如果您代表不同的地方，那么让它看起来像不同的地方（例如，标签的方式）

*   用于将大量控件与替代控件*交换。*

使用布局、符号和文本来解释不可用，尤其是禁用。例如，标记您的必填字段；使用工具提示说明按钮被禁用的原因。

当没有其他方式以图形或文本方式指示如何使操作可用时，使用错误消息而不是禁用或隐藏。

[http://www.zuschlogin.com/?p=40](http://www.zuschlogin.com/?p=40)上的更多详细信息和基本原理。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-16T11:31:23.570

我几乎总是让 UI 保持静态，并简单地禁用（灰显）此时不适用的组件。如果组件随着状态的变化而显示/隐藏它们时移动，这可能会让用户感到不安和困惑。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-16T11:29:09.550

我看到了两者的好例子，也看到了两者的坏例子。

您的主要目标应该是确保您的 UI 设计（无论您选择什么路线）使整个过程在逻辑上对您的目标受众来说是合理的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-16T11:30:01.700

如果您不想让用户感到沮丧，动态会更好

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-06-16T11:45:15.553

嗯，这就是最新的 MS Office 背后的想法，对吧？基于上下文的控件。这与具有大量灰色菜单和工具栏按钮的旧版本相比。

我在控制系统上工作了很多年，在这些环境中，我们模仿了硬件控制（拨动开关、转盘、按钮），这些当然是静态的，但并不总是可用。这是客户的要求，他们的立场是使用系统的操作员希望按钮 X 总是在同一个地方。但是从设计师和开发人员的角度来看，我对混乱的 UI 感到沮丧，并且不喜欢屏幕上 95% 的按钮都是灰色的。

我认为这将取决于您的受众以及领域和客户的要求。在我的商店中，我使事物动态化，并提供基于上下文有意义的控件。通常，我们不会显示在当前上下文中不可用的灰色按钮或菜单选项。一旦用户认识到他们遵循某些工作流程并且在适当的时候涉及特定的 UI 元素，他们对（并且可能更喜欢）动态 UI 没有任何问题。

越少越好。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-06-16T11:56:17.203

为什么不两者都做，让[A/B 测试](http://en.wikipedia.org/wiki/A/B_testing)告诉你用户喜欢什么？

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-06-16T12:17:17.440

我认为最好关注用户生产力和软件正在实施的业务。

显示对特定用户或在特定时刻没有意义的操作将无济于事，无论是否禁用。

例如，如果您有一个在组织的多个部门中使用的软件，每个用户/部门只会对实现他所涉及的业务部分的软件部分感兴趣。其他任何东西对他来说都是无用的，只会让软件体验变得最差。这同样适用于对用户有用但显示无用选项的屏幕。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-06-16T11:31:34.257

我建议对两者进行原型设计并询问您的用户（或代表性样本）他们喜欢哪个以及为什么。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-06-16T11:32:27.670

模态 UI 引入了模式错误。总是。

您目前似乎想要在两种不同的方式呈现模态 UI 之间进行选择。从那些我会说第一个是优越的（除非你真的有很多可能的命令，请参阅 Office 2007 UI 以获得如何处理这个的一个很好的示例，但拥有那么多命令并不常见）。

如果您有空间并且没有太多控件，那么我真的会使用禁用控件，因为它向用户展示了可能的功能。此外，您可能希望非常清楚 UI 处于哪种模式（不仅仅是启用的按钮）。我见过你禁用按钮的用户界面，但用户无法弄清楚他必须做什么才能启用它们。

在任何情况下，请务必进行可用性测试，以代表您的用户找出更不容易出错的方法。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-06-16T11:34:16.747

只是为了重申 Mitch Wheat 所说的话。

如果您根据用户操作使按钮消失和重新出现，那么用户可能会认为他们所做的事情破坏了应用程序。

您还向用户隐藏了操作，因此他们将更难发现它可以做什么。

禁用按钮是一种众所周知的范例，用户将能够看到您的应用程序可以执行的所有操作，并将尝试了解如何启用它们。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-06-16T11:35:01.877

我认为这取决于您要为哪些用户隐藏设计，但总的来说我会选择静态版本。不要忘记用户界面不仅提供功能，还提供信息。如果你将一个按钮变灰，你会比删除按钮更清楚地通知用户它的状态（他能做什么，不能做什么）。

删除按钮方法适用于通常对系统有很好理解的用户，如管理员。但我认为你应该谨慎使用它

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-06-16T11:35:43.937

灰色按钮更好，因为这样用户就会知道在某些情况下这样的功能是可用的（并且根据上下文用户可能能够猜测它何时启用），并且灰色的视觉提示将发出信号告诉用户该按钮不能被点击，所以用户不会尝试点击它（点击后消息的问题是它来得太晚了——用户已经犯了错误）。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-06-16T11:37:15.400

无论您选择什么，请使用按钮的固定位置。用户通常不会阅读按钮上的文本。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-06-16T11:37:34.307

依靠。但是拥有一个清晰紧凑的 GUI 是一件好事。为什么要打扰您根本无法更改或使用的 10 个字段/控件。例如，在 stackoverflow 上，如果您的声誉较低，那么您的 UI 就会减少，因为对于用户来说，有一天他可能能够使用它们并不重要。另一件事是控件（带边框）通常占用比文本更多的空间。如果您有当前无法更改的信息，我会将它们显示在一个非常紧凑的文本字段/标签中。根据信息，它甚至可以放置在表格之外或远离表格的地方。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-06-16T11:40:11.150

根据乔尔的说法-[两者都不是](http://www.joelonsoftware.com/items/2008/07/01.html):-)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-06-16T11:40:28.373

只要您使用用户熟悉的范例，两者都有意义。

选项卡控件基本上是一个动态 UI，会根据状态而变化。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-06-16T12:18:43.973

在设计 UI 时，一致性可能是最重要的事情。如果按钮弹出和弹出，它们被视为一种视觉刺激，用户将“花费”注意力看着它们。

一个微妙但明显禁用的按钮（不会消失）是我设计 UI 时的首选......

..所以我想这是选项1 :)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-06-16T12:35:46.950

两者的结合。

如果某项功能在当前状态下不适用，请禁用该按钮*，但*同时在该按钮旁边放置一个图标并将工具提示与该图标相关联。工具提示应该解释为什么用户现在不能使用该按钮。

将工具提示直接附加到按钮效果不佳。大多数用户甚至不会将鼠标悬停在按钮上，因为他们不希望它做任何事情。

并避免感叹号图标。他们建议用户输入了一个无效的值（除非他们实际上有。）

我想说我总是这样做，但不幸的是它确实需要更多的编码时间，而且客户并不总是愿意为此付费。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-06-17T15:45:17.373

我喜欢将所有高级选项隐藏在“更多>>”/“更少<<”按钮或“高级模式”复选框下，具体取决于上下文和应用程序。

单击/选中后，窗口将展开以显示更多选项。

但是，就操作可用性而言（例如具有下一个/上一个按钮的向导），我总是显示它们，并根据可能的功能启用/禁用它们。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2014-07-21T11:00:14.970

动态 UI 就像 UI 可能会不断变化一样。这些字段可能会不断变化。因此，根据从互联网获取的字段信息，设计了 ui。记住！所有类似的领域都有相同的设计，所以你可以不断改变 UI 设计，从而改变应用程序。无需将较新版本的应用程序上传到云或 Play 商店，您就可以更改 UI 的设计。例如，在 Excel 表中填写 UI 模式和字段并上传到云端，应用程序可以访问下载 excel 表。

以上解释适用于android动态应用程序开发

# asp.net - CheckboxList - Use web.config value in text field

> ID：1000880
> 
> 赞同：0
> 
> 时间：2009-06-16T11:27:01.537
> 
> 标签：asp.net, data-binding, checkboxlist

The scenario I'm dealing with is I have a set of entries in a database that have an image associated with them. This image needs to be 'accepted' or 'rejected' via a web interface.

I'm using ASP.NET WebForms.

I'm attempting to databind my recordset of entires to a CheckBoxList control. I would like to combine data from my dataset with information from the web.config file and plain text to display an image:

```
<asp:CheckBoxList ID="CheckBoxList1" runat="server" 
    DataSourceID="DataSource1" 
    DataTextField="ImageIdentifier" 
    DataValueField="EntryId"        
    DataTextFormatString="<img src='<%$ AppSettings:GetImageUrl %>{0}' />" /> 
```

This approach correctly outputs the plain text and the DataTextField value, however it does not interpret the code inside the <% %> block and prints the whole thing literally in the generated HTML, in spite of it being correctly highlighted in the editor.

Is this possible to achieve declaratively? If not, is there a better way than iterating through the entries in the list in code on the OnDataBound event?

Thanks in advance,

Jamie

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-23T16:02:58.073

我相信您使用了错误的 <% 标签。为了在这样的绑定表达式中进行评估，它应该是 <%#

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T11:32:26.110

您的 web.config 是什么样的？您将无法在此处使用该绑定语法 - 您必须挂钩复选框的数据绑定事件并迭代每个复选框，并根据需要从 web.config 中的值更新它们。

编辑

如果您不想在复选框列表数据绑定后迭代每个复选框，则必须先更新您的数据集，然后再绑定到它。

# javascript - 动态更新一个

> ID：1000884
> 
> 赞同：0
> 
> 时间：2009-06-16T11:27:57.960
> 
> 标签：javascript, html, rss

我们尝试在 HTML 文档的 head 部分动态更新我们的 rss 链接（使用 JavaScript），以反映由于使用 AJAX 过滤而在页面上发生的变化。似乎这些并没有在浏览器之间持续更新（去图......）。

（**编辑**：不正确更新是指地址栏中的链接，而不是 DOM 本身。）

*   有谁知道使这成为可能的方法（无需页面加载）？
*   你能发布一个例子来说明它是如何完成的吗？

非常感谢。

**编辑**：我没有任何代码示例，但我们尝试了以下方法：

1.  [使用 PrototypeJS writeAttribute](http://www.prototypejs.org/api/element#method-writeattribute)更改了 href 属性
2.  删除旧标签并将新的链接元素插入头部

**edit2**：以下是无效的代码示例（serverResponse 是传递给包含此代码的函数的对象。rssLink 是该对象的属性，并且始终被定义）：

```
// Update <link> 
var headLink = $('rssHead1'); 
// if we don't have a link in the header, create that element 
if(!headLink) { 
   var head = $$('head').first(),
       tag = '<link id="rssHead1" type=\"application/rss+xml\" rel="alternate">'
   head.insert(tag); 
   headLink = $('rssHead1'); 
} 
headLink.writeAttribute('href', serverResponse.rssLink); 
headLink.writeAttribute('title', 'Monitor this search'); 
```

第二次尝试：

```
// Update <link> 
var headLink = $('rssHead1'); 
if(headLink) { headLink.remove(); }

headLink = new Element('link', {'id' = 'rssHead1',
                                'type' = 'application/rss+xml',
                                'rel' = 'alternate',
                                'href' = serverResponse.rssLink,
                                'title' = 'Monitor this search'});
$$('head').first().insert({bottom: headLink}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T14:38:07.000

您的第一个示例实际上有效，DOM 已正确修改。但是在考虑 Firefox 时，例如，地址栏中的 rss 签名没有更新:(

编辑：您的第二次尝试应该是：

```
// Update <link> 
var headLink = $('rssHead1'); 
if(headLink) { headLink.remove(); }
headLink = new Element('link', {
  'id': 'rssHead1',
  'type': 'application/rss+xml',
  'rel': 'alternate',
  'href': serverResponse.rssLink,
  'title': 'Monitor this search'
});
$$('head').first().insert({bottom: headLink}); 
```

它也正确地改变了 head 元素，但地址栏中的 rss 链接没有更新。

# python - 如何保持 Python 脚本输出窗口打开？

> ID：1000900
> 
> 赞同：214
> 
> 时间：2009-06-16T11:31:16.737
> 
> 标签：python, windows

我刚刚开始使用 Python。当我在 Windows 上执行 python 脚本文件时，输出窗口出现但瞬间消失。我需要它留在那里，这样我就可以分析我的输出。我怎样才能让它保持打开状态？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2009-06-16T11:43:55.933

你有几个选择：

1.  从已经打开的终端运行程序。打开命令提示符并键入：

    ```
    python myscript.py 
    ```

    为此，您需要路径中的 python 可执行文件。只需检查[如何](https://superuser.com/questions/284342/what-are-path-and-other-environment-variables-and-how-can-i-set-or-use-them)在 Windows 上编辑环境变量，然后添加`C:\PYTHON26`（或您安装 python 的任何目录）。

    当程序结束时，它会让你回到**cmd**提示符而不是关闭窗口。

2.  添加代码以在脚本末尾等待。对于 Python2，添加 ...

    ```
    raw_input() 
    ```

    ...在脚本的末尾使其等待`Enter`密钥。该方法很烦人，因为您必须修改脚本，并且必须记住在完成后将其删除。测试其他人的脚本时特别烦人。对于 Python3，使用`input()`.

3.  使用为您暂停的编辑器。一些为python准备的编辑器在执行后会自动为你暂停。其他编辑器允许您配置用于运行程序的命令行。我发现在运行时将其配置为“ `python -i myscript.py`”特别有用。程序结束后，您将进入 python shell，加载程序环境，因此您可以进一步使用变量并调用函数和方法。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2009-06-23T11:03:09.407

`cmd /k`是打开任何控制台应用程序（不仅是 Python）的典型方式，其控制台窗口将在应用程序关闭后保留。我能想到的最简单的方法是按 Win+R，键入`cmd /k`然后将所需的脚本拖放到“运行”对话框中。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2009-06-16T11:33:39.917

从已经打开的 cmd 窗口启动脚本或在脚本末尾添加类似这样的内容，在 Python 2 中：

```
 raw_input("Press enter to exit ;)") 
```

或者，在 Python 3 中：

```
input("Press enter to exit ;)") 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-03-12T13:15:04.880

在出现异常时保持窗口打开（但是，在打印异常时）

# 蟒蛇2

```
if __name__ == '__main__':
    try:
        ## your code, typically one function call
    except Exception:
        import sys
        print sys.exc_info()[0]
        import traceback
        print traceback.format_exc()
        print "Press Enter to continue ..." 
        raw_input() 
```

要在任何情况下保持窗口打开：

```
if __name__ == '__main__':
    try:
        ## your code, typically one function call
    except Exception:
        import sys
        print sys.exc_info()[0]
        import traceback
        print traceback.format_exc()
    finally:
        print "Press Enter to continue ..." 
        raw_input() 
```

# 蟒蛇 3

对于 Python3，您必须[使用`input()`代替`raw_input()`](https://stackoverflow.com/a/30991566/2436175)，当然还要调整`print`语句。

```
if __name__ == '__main__':
    try:
        ## your code, typically one function call
    except BaseException:
        import sys
        print(sys.exc_info()[0])
        import traceback
        print(traceback.format_exc())
        print("Press Enter to continue ...")
        input() 
```

要在任何情况下保持窗口打开：

```
if __name__ == '__main__':
    try:
        ## your code, typically one function call
except BaseException:
    import sys
    print(sys.exc_info()[0])
    import traceback
    print(traceback.format_exc())
finally:
    print("Press Enter to continue ...")
    input() 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-02-10T18:01:31.577

你可以结合之前的答案：（对于记事本++用户）

按 F5 运行当前脚本并输入命令：

```
cmd /k python -i "$(FULL_CURRENT_PATH)" 
```

通过这种方式，您在执行 Notepad++ python 脚本后保持交互模式，并且您可以使用您的变量等等:)

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2015-05-16T17:53:09.633

使用以下 2 行创建一个 Windows 批处理文件：

```
python your-program.py

pause 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-12-03T17:56:08.180

使用[`atexit`](https://docs.python.org/3/library/atexit.html)，您可以在程序退出时暂停程序。如果错误/异常是退出的原因，它将在打印堆栈跟踪后暂停。

```
import atexit

# Python 2 should use `raw_input` instead of `input`
atexit.register(input, 'Press Enter to continue...') 
```

在我的程序中，我将调用`atexit.register`放在`except`子句中，这样它只会在出现问题时暂停。

```
if __name__ == "__main__":
    try:
        something_that_may_fail()

    except:
        # Register the pause.
        import atexit
        atexit.register(input, 'Press Enter to continue...')

        raise # Reraise the exception. 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-08-18T22:51:08.477

在 python 2 中，您可以使用： raw_input()

```
>>print("Hello World!")    
>>raw_input('Waiting a key...') 
```

在 python 3 中，您可以使用：input()

```
>>print("Hello world!")    
>>input('Waiting a key...') 
```

此外，您可以使用 time.sleep(time)

```
>>import time
>>print("The program will close in 5 seconds")
>>time.sleep(5) 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2018-05-27T11:22:33.890

在 Python 3 上

```
input('Press Enter to Exit...') 
```

会成功的。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2020-07-12T21:17:09.007

你可以写

```
input() 
```

在您的代码末尾

因此，当您运行脚本时，它会等待您输入一些内容

```
{ENTER for example} 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2010-12-18T09:36:23.147

我有一个类似的问题。使用 Notepad++ 我曾经使用命令 :`C:\Python27\python.exe "$(FULL_CURRENT_PATH)"`在代码终止后立即关闭 cmd 窗口。
现在我正在使用`cmd /k c:\Python27\python.exe "$(FULL_CURRENT_PATH)"`它来保持 cmd 窗口打开。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-10-05T16:11:47.030

为了保持窗口打开，我同意 Anurag 的观点，这就是我为简短的小型计算类型程序保持窗口打开所做的。

*这只会显示一个没有文本的光标：*

```
raw_input() 
```

*下一个示例将为您提供一个明确的消息，即程序已完成并且无需等待程序中的另一个输入提示：*

```
print('You have reached the end and the "raw_input()" function is keeping the window open') 
raw_input() 
```

> 笔记！
> (1) 在 python 3 中，没有**raw_input()**，只有 **input()**。
> (2) 使用单引号来表示字符串；否则，如果您在任何内容周围键入双精度，例如“raw_input()”，它会认为它是一个函数、变量等，而不是文本。

*在下一个示例中，我使用了双引号，但它**不起作用**，因为它认为“the”和“function”之间的引号中有一个中断，即使当您阅读它时，您自己的大脑也可以完全理解它：*

```
print("You have reached the end and the "input()" function is keeping the window open")
input() 
```

希望这可以帮助其他可能刚开始但还没有弄清楚计算机如何思考的人。可能需要一段时间。:o)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-03-03T14:31:34.143

如果您想从桌面快捷方式运行脚本，请右键单击您的 python 文件并选择`Send to|Desktop (create shortcut)`. 然后右键单击快捷方式并选择属性。在快捷方式选项卡上选择目标：文本框并`cmd /k` 在路径前面添加，然后单击确定。快捷方式现在应该在不关闭的情况下运行您的脚本，并且您不需要`input('Hit enter to close')`

请注意，如果您的机器上有多个版本的 python，请在 cmd /k 和 scipt 路径之间添加所需的 python 可执行文件的名称，如下所示：

```
cmd /k python3 "C:\Users\<yourname>\Documents\your_scipt.py" 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-05-16T23:34:47.953

除了`input`and `raw_input`，您还可以使用无限`while`循环，如下所示： `while True: pass`(Python 2.5++/3) 或`while 1: pass`(Python 2/3 的所有版本)。不过，这可能会使用计算能力。

您也可以从命令行运行该程序。键入`python`命令行（Mac OS X 终端），它应该`Python 3.?.?`显示（您的 Python 版本）它不显示您的 Python 版本，或者说`python: command not found`，查看更改 PATH 值（环境值，上面列出）/type `C:\(Python folder\python.exe`。如果成功，请键入`python`或`C:\(Python installation)\python.exe`和程序的*完整目录*。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-09-06T20:39:10.433

一个很晚的答案，但我创建了一个名为 Windows 批处理文件，`pythonbat.bat`其中包含以下内容：

```
python.exe %1
@echo off
echo.
pause 
```

然后指定`pythonbat.bat`为`.py`文件的默认处理程序。

现在，当我在文件资源管理器中双击一个`.py`文件时，它会打开一个新的控制台窗口，运行 Python 脚本，然后暂停（保持打开状态），直到我按下任意键...

无需更改任何 Python 脚本。

我仍然可以打开控制台窗口并指定`python myscript.py`是否要...

（我刚刚注意到@maurizio 已经发布了这个确切的答案）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-10-10T14:33:38.483

如果您想保持 cmd-window 打开并位于运行文件目录中，这适用于 Windows 10：

```
cmd /k cd /d $(CURRENT_DIRECTORY) && python $(FULL_CURRENT_PATH) 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-03-25T02:17:04.130

我在win10的py3环境中发现解决方案只是以管理员身份运行cmd或powershell，输出将保持在同一个控制台窗口，任何其他类型的用户运行python命令都会导致python打开一个新的控制台窗口。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-09-16T17:37:40.103

```
`import sys,traceback
sys.exc_info()[0]
traceback.format_exc()
print("Press Enter to exit ...")
input()` 
```

只需在您的实际代码之后编写上面的代码。例如。我正在从用户那里获取输入并在控制台上打印，因此我的代码将如下所示-->

```
`import sys,traceback
nam=input("enter your name:")
print("your name is:-{}".format(nam)) #here all my actual working is done
sys.exc_info()[0]
traceback.format_exc()
print("Press Enter to exit ...")
input()` 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-12-25T15:07:40.043

试试这个，

```
import sys

stat='idlelib' in sys.modules

if stat==False:
    input() 
```

这只会停止控制台窗口，而不是 IDLE。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-11-08T08:27:16.063

您可以使用该选项启动 python`-i`或设置环境变量`PYTHONINSPECT=x`。从文档：

> 运行脚本后进行交互检查；即使 stdin 看起来不是终端也强制提示；还有 PYTHONINSPECT=x

所以当你的脚本崩溃或完成时，你会得到一个 python 提示并且你的窗口不会关闭。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2013-06-25T13:38:01.993

1.  去[这里](http://notepad-plus-plus.org/)下载并安装 Notepad++
2.  去[这里](http://python.org/download)下载并安装 Python 2.7 而不是 3。
3.  开始，运行 Powershell。输入以下内容。 `[Environment]::SetEnvironmentVariable("Path", "$env:Path;C:\Python27", "User")`
4.  关闭 Powershell 并重新打开它。
5.  为您的程序创建一个目录。mkdir 脚本
6.  打开那个目录 cd scripts
7.  在 Notepad++ 中，在一个新的文件类型中：`print "hello world"`
8.  将文件另存为 hello.py
9.  返回 powershell 并通过键入 dir 确保您位于正确的目录中。您应该在那里看到您的文件 hello.py。
10.  在 Powershell 提示符下键入：`python hello.py`

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2019-06-29T09:50:35.080

您可以打开 PowerShell 并键入“python”。导入 Python 后，您可以从您喜欢的文本编辑器中复制粘贴源代码以运行代码。

窗户不会关闭。

* * *

## 回答 #23

> 赞同：-3
> 
> 时间：2017-01-27T22:19:09.863

在 Windows 10 上，在开始时插入：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*- 
```

奇怪，但它对我有用！（当然还有最后的 input() ）

* * *

## 回答 #24

> 赞同：-3
> 
> 时间：2018-10-13T18:26:20.340

保持窗口打开的简单技巧：

```
counter = 0

While (True):

    If (counter == 0):

        # Code goes here

    counter += 1 
```

计数器是这样的，代码不会重复。

* * *

## 回答 #25

> 赞同：-3
> 
> 时间：2019-11-25T17:39:10.987

最简单的方法：

```
import time

#Your code here
time.sleep(60)
#end of code (and console shut down) 
```

这将使代码保持 1 分钟，然后将其关闭。

# comparison - 被比较的项目顺序？

> ID：1000905
> 
> 赞同：1
> 
> 时间：2009-06-16T11:32:07.920
> 
> 标签：comparison, multilingual

我已经看到了这个，但从来没有听到过关于为什么的明确解释......这真的适用于任何语言，而不仅仅是 C# 或 VB.NET 或 Perl 或其他任何语言。

比较两个项目时，有时“检查”值放在左侧而不是右侧。从逻辑上对我来说，您首先列出您的变量，然后列出您要比较的值。但是我看到了相反的情况，首先列出了“常数”。

这种方法有什么（如果有的话）收益？

所以而不是：

```
if (myValue > 0) 
```

我见过：

```
if (0 < myValue) 
```

或者

```
if (Object.GimmeAnotherObject() != null) 
```

替换为：

```
if (null != Object.GimmeAnotherObject()) 
```

对此有什么想法吗？

蒂亚！凯文

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-16T11:38:21.840

一些开发人员将常量放在左侧

```
if(0 = myValue) 
```

这是因为你会从编译器中得到一个错误，因为你不能给 0 赋值。相反，您必须将其更改为

```
if(0 == myValue) 
```

这可以防止许多痛苦的调试，因为输入

```
if(myValue = 0) 
```

是完全合法的，但很可能你的意思是

```
if(myValue == 0) 
```

第一个选择不是你想要的。它会巧妙地改变你的程序并引起各种头痛。希望澄清！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T11:38:16.770

我不认为一个简单的规则，比如but the constant first or but the constant last 不是一个非常聪明的选择。我相信支票应该表达它的语义。例如，我更喜欢在范围检查中使用这两个版本。

```
if ((low <= value) && (value <= high))
{
    DoStuff(value);
} 
```

但我同意你提到的例子——我会坚持最后一个，并且看不出以另一种方式这样做的明显理由。

```
if (object != null)
{
    DoStuff(object);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T11:38:32.043

在 C++ 中，这两个都是有效的并且可以编译

```
if(x == 1) 
```

和

```
if(x=1) 
```

但是如果你这样写

```
if(1==x) 
```

和

```
if(1=x) 
```

然后对 1 的赋值被捕获并且代码不会编译。

将 const 变量放在左侧被认为“更安全”。

一旦养成将 const 变量放在左侧进行赋值的习惯，它往往会成为您的默认操作模式，这就是为什么您会在相等检查中看到它的原因

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-09-14T10:16:28.303

对于 .Net，这无关紧要，因为编译器不会让您在以下条件下进行赋值：

```
if(x=1) 
```

因为（正如其他人所说）这是不好的做法（因为很容易错过）。

一旦您不必担心这一点，将变量放在第一位然后将值放在第二位会更易读，但这是唯一的区别 - 双方都需要评估。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T11:44:51.000

例如，它是一种编码实践来捕捉像 '!=' 这样键入为 '=' 的错别字。

如果左侧有一个 CONSTANT，则编译器将捕获所有赋值运算符，因为您无法分配给常量。

许多语言（特别是`C`）在编写代码时提供了很大的灵活性。虽然左边的常数对您来说似乎很不寻常，但您也可以将赋值和条件一起编程为，

```
if (var1 = (var2 & var3)) { /* do something */ } 
```

如果结果为真，此代码会将布尔结果输入`var1`并 /* 做某事 */。

一个相关的编码实践是避免编写条件表达式中有赋值的代码；尽管编程语言允许这样的事情。你不会经常遇到这样的代码，因为条件中的赋值是不寻常的，所以典型的代码没有这样的东西。

[IBM DeveloperWorks](http://www.ibm.com/developerworks/aix/library/au-hook_duttaC.html)站点上有一篇很好的`C`语言编码实践文章，可能仍然与使用该语言编写的人相关。

# c++ - 是否可以在编译时禁止从类派生？

> ID：1000908
> 
> 赞同：11
> 
> 时间：2009-06-16T11:32:27.763
> 
> 标签：c++

根据“C++ 编码标准”第 32 项中的描述，我有一个值类。简而言之，这意味着它提供了值语义并且没有任何虚拟方法。

我不希望从这个类派生一个类。除其他外，一个原因是它具有公共的非虚拟析构函数。但是基类应该有一个公共的和虚拟的或受保护的和非虚拟的析构函数。

我不知道编写值类的可能性，因此不可能从中派生。我想在编译时禁止它。是否有任何已知的习语可以做到这一点？如果没有，也许即将到来的 C++0x 中会有一些新的可能性？还是有充分的理由证明没有这种可能性？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-06-16T11:39:40.310

[Bjarne Stroustrup在这里](http://www.research.att.com/~bs/bs_faq2.html#no-derivation)写过这个。

* * *

链接中的相关位：

**我可以阻止人们从我的班级派生吗？**

是的，但你为什么要这样做？有两个常见的答案：

*   为了效率：避免我的函数调用是虚拟的。
*   为了安全：确保我的类不被用作基类（例如，确保我可以复制对象而不必担心切片）

以我的经验，效率原因通常是放错地方的恐惧。在 C++ 中，虚函数调用是如此之快，以至于与使用普通函数调用的替代解决方案相比，使用虚函数设计的类的实际使用不会产生可测量的运行时开销。请注意，虚函数调用机制通常仅在通过指针或引用调用时使用。当直接为命名对象调用函数时，虚函数类开销很容易被优化掉。

如果确实需要“封顶”类层次结构以避免虚函数调用，人们可能会问为什么这些函数首先是虚函数。我见过一些例子，其中性能关键的功能没有充分的理由被虚拟化，只是因为“这是我们通常这样做的方式”。

这个问题的另一个变体，如何防止出于逻辑原因推导，有一个解决方案。不幸的是，这个解决方案并不漂亮。它依赖于这样一个事实，即层次结构中最派生的类必须构造一个虚拟基。例如：

```
class Usable;

class Usable_lock {
    friend class Usable;
private:
    Usable_lock() {}
    Usable_lock(const Usable_lock&) {}
};

class Usable : public virtual Usable_lock {
    // ...
public:
    Usable();
    Usable(char*);
    // ...
};

Usable a;

class DD : public Usable { };

DD dd;  // error: DD::DD() cannot access
        // Usable_lock::Usable_lock(): private  member 
```

（来自[D&E](http://www.research.att.com/~bs/dne.html)第 11.4.3 节）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-16T11:34:15.407

如果您愿意只允许通过工厂方法创建类，则可以使用私有构造函数。

```
class underivable {
    underivable() { }
    underivable(const underivable&); // not implemented
    underivable& operator=(const underivable&); // not implemented
public:
    static underivable create() { return underivable(); }
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-16T03:17:09.507

即使问题没有针对 C++11 标记，但对于到达这里的人来说，应该提到 C++11 支持新的上下文标识符`final`。见[维基页面](http://en.wikipedia.org/wiki/C++11#Explicit_overrides_and_final)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-16T11:48:03.537

好好看看[这里](http://www.parashift.com/c++-faq-lite/strange-inheritance.html#faq-23.11)。
这真的很酷，但它是一个黑客。
自己想知道为什么 stdlib 不使用它自己的容器来执行此操作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-16T11:43:26.353

好吧，我有一个类似的问题。这是在 SO 上发布[的。](https://stackoverflow.com/questions/805413/restrict-inheritance-to-desired-number-of-classes-at-compile-time)问题是另一种方式。即只允许派生您允许的那些类。检查它是否能解决您的问题。

这是在**编译时完成的**。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T15:18:29.150

我通常会按如下方式实现：

```
// This class is *not* suitable for use as a base class 
```

注释位于标题和/或文档中。如果您班级的客户不遵循数据包上的说明，那么在 C++ 中，他们可能会遇到未定义的行为。未经许可的推导只是这种情况的一个特例。他们应该改用组合。

顺便说一句，这有点误导：“基类应该有一个公共和虚拟或受保护和非虚拟的析构函数”。

对于用作运行时多态性基础的类来说，情况确实如此。但是，如果派生类永远不会通过指向基类类型的指针来引用，则没有必要。拥有一个仅用于静态多态性的值类型可能是合理的，例如模拟动态绑定。令人困惑的是，继承可以在 C++ 中用于不同的目的，需要基类提供不同的支持。这意味着尽管您不希望类具有动态多态性，但如果正确使用派生类，创建派生类可能还是可以的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T15:11:10.227

此解决方案不起作用，但我将其作为不做什么的示例。

* * *

我已经有一段时间没有使用 C++了，但据我记得，你可以通过将析构函数设为私有来获得你想要的东西。

更新：

在 Visual Studio 2005 上，您将收到警告或错误。检查以下代码：

```
class A
{
public:
    A(){}
private:
    ~A(){}
};

class B : A
{
}; 
```

现在，

乙乙;

将产生错误“错误 C2248: 'A::~A': 无法访问在类 'A' 中声明的私有成员”

尽管

```
B *b = new B(); 
```

将产生警告“警告 C4624：'B'：无法生成析构函数，因为基类析构函数不可访问”。

它看起来像一个半解决方案，但正如 orsogufo 指出的那样，这样做会使 A 类无法使用。留下答案

# hibernate - 休眠级联删除

> ID：1000910
> 
> 赞同：0
> 
> 时间：2009-06-16T11:33:19.603
> 
> 标签：hibernate

我有一堂课叫做课程，一堂课叫做教程我有一组教程。我删除课程我希望删除与该课程相关的所有教程。但是目前，当我删除所有者课程时，教程没有被删除，只有教程表中的外键 courseid 变为空；

我在 course.hhm.xml 中使用以下代码 cascade="delete-orphan,all" inverse="true"

当我删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T14:44:54.100

尝试

```
cascade="all-delete-orphan" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-10T05:15:42.200

请注意，“孤儿”部分与将课程的删除级联到教程的删除没有任何关系，它允许

```
c.getTutorials().remove(tutorialToDelete);
session.merge( c ); 
```

要删除在集合实例中删除的教程，我不知道是否存在与孤立标志相关的性能问题，但如果您不依赖该行为，您可能只想将其切换到

```
cascade="delete" 
```

# subsonic - 更新查询中 SqlExpression 中 SQL Server 函数的使用

> ID：1000922
> 
> 赞同：0
> 
> 时间：2009-06-16T11:35:12.847
> 
> 标签：subsonic, sql-update

在 SubSonic 2.2 版中，以下（特定于 MSSQL 的）代码失败：

```
SqlQuery update = 
  new Update(SomeTable)
      .SetExpression(SomeTable.SomeDateTimeColumn).IsEqualTo("GETDATE()")
      .Where(SomeTable.IdColumn).IsEqualTo(id); 
```

此时`update.ToString()`产生了一个完全合法的 SQL 语句：

```
UPDATE [dbo].[SomeTable] SET [SomeDateTime]=GETDATE()
WHERE [dbo].[SomeTable].[ID] = @ID0 
```

`update.Execute()`但是失败了：

```
{"Failed to convert parameter value from a String to a DateTime."}
  at SubSonic.Update.Execute() 
```

是否有可能在表达式中使用 sql server 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T12:08:04.790

好的，我找到了一种解决方法——可以在 InlineQuery 之外使用 SQL Server 函数。诀窍是您不能使用使用 TableColumn 参数的“强类型”版本的 SetExpression，而是传递列名字符串，如下所示：

```
SqlQuery update = 
  new Update(SomeTable)
      .SetExpression(SomeTable.Columns.SomeDateTime).IsEqualTo("GETDATE()")
      .Where(SomeTable.IdColumn).IsEqualTo(id); 
```

重要的部分是：**`SomeTable.Columns.SomeDateTime`**而不是**`SomeTable.SomeDateTimeColumn`**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T11:40:36.110

对于您发布的特定示例，您可以执行以下操作：

```
SqlQuery update = new Update(SomeTable)
  .SetExpression(SomeTable.SomeDateTimeColumn).IsEqualTo(DateTime.Now)
  .Where(SomeTable.IdColumn).IsEqualTo(id); 
```

# php - 检测用户是否在代理后面

> ID：1000924
> 
> 赞同：4
> 
> 时间：2009-06-16T11:35:48.337
> 
> 标签：php, http, proxy

我试图弄清楚如何检测登录我网站的人是否在代理后面。我读到您可以通过可嵌入对象（Flash 和 Java）检测一个人的真实 IP 地址。但是，我实际上无法找到任何示例或来源。

我正在使用 PHP，并且我已经读过寻找`$_SERVER['HTTP_X_FORWARDED_FOR'], $_SERVER['HTTP_CLIENT_IP']`等会检测到大多数代理，但到目前为止我还无法通过使用 TOR 进行测试（也许 TOR 不会标记这些，但我已经阅读了匿名代理仍然显示`HTTP_X_FORWARDED`）。如果可能的话，我想尝试使用 java servlet。谁能指出我正确的方向（最好是示例？）我在 hackers.org 上看到了一些代码，但它们只显示了客户端而不是服务器端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T13:53:04.843

TOR 不提供任何服务器标头，例如 X_FORWARDED_FOR，因此最好的办法是使用所有已知出口节点的列表。可以在[https://torstat.xenobite.eu/](https://torstat.xenobite.eu/)找到一个列表。

对于其他代理，您可以查看服务器标头。可能感兴趣的服务器标头包括：

```
HTTP_VIA 
HTTP_X_FORWARDED_FOR
HTTP_FORWARDED_FOR 
HTTP_X_FORWARDED
HTTP_FORWARDED 
HTTP_CLIENT_IP
HTTP_FORWARDED_FOR_IP 
VIA
X_FORWARDED_FOR 
FORWARDED_FOR
X_FORWARDED FORWARDED
CLIENT_IP
FORWARDED_FOR_IP
HTTP_PROXY_CONNECTION 
```

在 PHP 中，您可以在`$_SERVER[] superglobal`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-28T14:00:15.477

如果您想检查用户是否使用代理的天气，您可以进行端口扫描并在发出请求时检查标头。如果代理不透明，这些方法将显示公共 IP（顺便说一下，有两种类型的 IP 地址公共和私有 IP 地址）。但如果它是透明代理，这将不起作用。

```
function detectProxy() {
  $sockport = false;

     $proxyports=array(80,8080,6588,8000,3128,3127,3124,1080,553,554);
 for ($i = 0; $i <= count($proxyports); $i++) {
 if(@fsockopen($ipaddress,$proxyports[$i],$errstr,$errno,0.5)){
 $sockport=true;
 }
 }

 if(
     isset($_SERVER['HTTP_VIA'])
     || isset($_SERVER['HTTP_X_FORWARDED_FOR'])
     || isset($_SERVER['HTTP_FORWARDED_FOR'])
     || isset($_SERVER['HTTP_X_FORWARDED'])
     || isset($_SERVER['HTTP_FORWARDED'])
     || isset($_SERVER['HTTP_CLIENT_IP'])
     || isset($_SERVER['HTTP_FORWARDED_FOR_IP'])
     || isset($_SERVER['VIA'])
     || isset($_SERVER['X_FORWARDED_FOR'])
     || isset($_SERVER['FORWARDED_FOR'])
     || isset($_SERVER['X_FORWARDED'])
     || isset($_SERVER['FORWARDED'])
     || isset($_SERVER['CLIENT_IP'])
     || isset($_SERVER['FORWARDED_FOR_IP'])
     || isset($_SERVER['HTTP_PROXY_CONNECTION'])
     || $sockport === true
 ) {
     echo 'User is using proxy';
 }
 else{
     echo ''user is not using proxy';
  }
 } 
```

第二种方法是通过为每个用户分配子域来使用 DNS 服务器。

您还可以检查此站点[代理检查器](https://www.sabiduria.in/tracker/Do-you-think-you-know-more-about-your-device-than-we-know/)，即使您使用代理，它也会显示公共和私有 IP 地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T12:01:46.677

Java Applet 或 Flash 都不应该泄露客户端 IP。我知道旧版本的 Flash 存在一个安全漏洞，这使得它成为可能。很可能现在已经修补了。

我从未使用过 TOR，但从我读到的内容看来，它似乎是作为一种 VPN 实现的，因此浏览器根本不会意识到它。

为什么你需要知道用户是否在代理后面？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T11:54:19.110

如果这是一个选项，您可以尝试使用 https。然后，您应该可以看到用户 IP。但是不了解 SSL 代理背后的办公室用户。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T12:03:02.913

通过查找以下标头字段，您应该有一些代理。

```
VIA
FORWARDED
USERAGENT_VIA
X_FORWARDED_FOR
PROXY_CONNECTION
XPROXY_CONNECTION
HTTP_PC_REMOTE_ADDR
HTTP_CLIENT_IP 
```

至于阻止 TOR，您最好使用 iptables 阻止 TOR 出口节点。

如果你真的必须确定你可以尝试一些“半恶意”的东西，比如在你的页面中嵌入一些 flash 或 java，这会将你发送回真实的客户端 ip。但这只有有限的范围，因为如果他在例如 LAN 中，您可能只会获得本地 ip，您会得到类似 192.168.1.x 的东西

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-06-28T19:21:34.827

获得客户端 IP 地址后，最简单的方法是将其传递给维护最新 TOR 出口节点列表的服务。例如，您可以使用[Ipregistry](https://ipregistry.co)（免责声明：我运行该服务）：

[https://api.ipregistry.co/89.187.143.81?key=tryout](https://api.ipregistry.co/89.187.143.81?key=tryout)

where`89.187.143.81`必须替换为您的客户端 IP 和`tryout`您的 API 密钥。

在输出中，查看字段`security -> is_tor_exit`。如果布尔值为真，那么您的客户端正在使用 Tor。

# xcode - 重构似乎真的从我的 Xcode 中消失了

> ID：1000929
> 
> 赞同：0
> 
> 时间：2009-06-16T11:37:02.217
> 
> 标签：xcode, refactoring

我在这里以及 Apple iPhone Dev 论坛上阅读了类似的（好的，几乎相同的）线程。我仔细查看了引用的链接。我已经尝试了所有方法，但我所做的一切都没有让 XCode 中的重构重新焕发生机。叹。

我采用了一个 100% 的 Cocoa Touch 工作项目（即实用程序员 - Objective-C 2.0 中的编码 - 电影播放器​​）并尝试选择和重构一个 ivar。没有什么。纳达。

这很奇怪，因为大约一个月前它还在工作。事实上，在一个将 C++ 与 Obj-C 混合的项目中。

我应该求助于重新安装 XCode 吗？似乎有点矫枉过正，不是吗？

总之，很郁闷。

任何指导将不胜感激。

干杯，

道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T12:27:47.030

您是否尝试过从项目检查器窗口重建代码感知索引？

# javascript - 通过 AJAX 在 HTML 中刷新时间

> ID：1000940
> 
> 赞同：0
> 
> 时间：2009-06-16T11:38:47.173
> 
> 标签：javascript, html, ajax

每当我刷新图表刷新的 HTML paget 时，我都有一个带有图表链接的 html 页面。

我从我的朋友那里听说，在 AJAX 的帮助下，图表将在给定的时间间隔内自动刷新，而无需刷新该 html 页面。

请帮助我使用相同的html代码。

问候， 拉吉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T11:41:57.997

您可以在 javascript 中使用[setInterval()](http://www.switchonthecode.com/tutorials/javascript-tutorial-using-setinterval-and-settimeout)方法，以及用于[AJAX](http://docs.jquery.com/Ajax)的 jQuery 等简单框架。

它看起来像这样：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
  <head>
    <title>My AJAX Chart</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script type="text/javascript">

      $(document).ready(function(){
        setInterval("refreshChart", 5000); // Refresh every 5 seconds
      });

      function refreshChart() {
        $.get("myChart.php", function(data) {
          $("div.chartHolder").html(data);
        });
      }

    </script>
  </head>
  <body>

    <h1>My Chart</h1>
    <div class="chartHolder"></div>

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T11:43:59.693

因为听起来你是 JavaScript 的新手，所以我建议你看看 jQuery 库，它可以用最少的复杂性做你想做的事：

像这样的东西会起作用：

```
function updateChart() {
  $('#someTable tbody').load('updateChart.html');
}

$(function() {
  setInterval(updateChart, 20000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T11:46:26.847

如果你结合像这样的东西; [http://ra-ajax.org/Docs.aspx?class=Ra.Extensions.Widgets.Timer](http://ra-ajax.org/Docs.aspx?class=Ra.Extensions.Widgets.Timer)这个；[http://ra-ajax.org/samples/Chart-Sample.aspx](http://ra-ajax.org/samples/Chart-Sample.aspx)你很容易到达那里。

以上示例适用于.Net，但其他平台也存在类似的构造（和框架）......

# .net - 如何制作每秒更新的 WPF 控件？

> ID：1000942
> 
> 赞同：0
> 
> 时间：2009-06-16T11:39:08.140
> 
> 标签：.net, wpf, multithreading, timer, dispatcher

[这个问题与我问的另一个](https://stackoverflow.com/questions/949458/)问题相似，但是在那种情况下，我想知道强制绑定从 XAML 或视图模型更新，在这种情况下，我想知道如何将其包装到自定义 WPF`FrameworkElement`中。

我所追求的功能是一段文本，表明某件事发生了多久。

```
<TextBlock Text="It happened " />
<my:AgeTextBlock SinceTime="{Binding OccurredAtUtc}" />
<TextBlock Text=" ago" /> 
```

这将呈现为（例如）：

> *发生在 1 分 13 秒前*

我有从 a 转换为`TimeSpan`显示的人类可读形式的代码。

为了让 UI 每秒更新一次，我正在考虑使用静态`DispatcherTimer`（来自[Kent Boogaart 的回答的](https://stackoverflow.com/questions/949458/how-to-have-a-wpf-binding-update-every-second/949616#949616)想法）。

所以这就是我所拥有的：

```
public class AgeTextBlock : TextBlock
{
    private static readonly DispatcherTimer _timer;

    static AgeTextBlock()
    {
        _timer = new DispatcherTimer { Interval = TimeSpan.FromSeconds(1) };
    }

    public AgeTextBlock()
    {
        _timer.Tick += ...;
    }

    // How can I unsubscribe from the Tick event to avoid a memory leak?
} 
```

评论表明我的问题。我看不出如何用这种方法正确清理。没有`Dispose`方法可以覆盖和删除事件处理程序。

这里推荐的模式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T12:12:49.477

为什么不在控件的Loaded事件中订阅Tick事件，在Unloaded事件中取消订阅呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T11:46:50.013

仅仅因为 TextBlock 没有实现 IDisposable 并不意味着您不能自己添加接口要求和实现。您可以自己实现 dispose （不覆盖基础中的任何内容）并在那里处理您的计时器。

您显然将负责处理您的 AgeTextBlock 类。例如，您可以在关闭窗口的事件中执行此操作或类似的操作。

（或者，如果您遵循[MVVM 模式](http://www.orbifold.net/default/?p=550)，并将计时器放在视图模型上，您可以使您的视图模型 IDisposable 并将视图绑定到视图模型上的计时器值。）

[编辑：是的，考虑到这一点，我真的不认为这应该是与 Winforms 不同的自定义控件，WPF 不需要自定义控件，相反我认为我会在我的视图模型上公开一个计时器属性（可能是一个预先格式化的属性，所以你有一个很好的可读字符串）并将该属性绑定到一个普通的文本框 - 没有自定义控件 - 然后我会使用样式或模板来调整文本框的视觉属性，看看我想要的. 听起来怎么样？]

# sql-server - T-SQL 时间平均

> ID：1000943
> 
> 赞同：7
> 
> 时间：2009-06-16T11:39:27.937
> 
> 标签：sql-server, tsql, datetime, average

我在 SQL Server 中有一个表，用于存储硬件的统计信息，表中的行表示给定秒的数据。例如，它包含以下列：

```
timestamp (DateTime)
value (int) 
```

我想要做的是从表中选择给定日期/时间范围内的数据，但以给定时间段（例如 1 分钟、5 分钟、1 天等）在给定日期/时间范围内取平均值的方式返回它范围。所以一个小时我会有 60 行 1 分钟的平均值。

我从哪里开始？有人有任何观点或想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-16T11:44:21.017

您可以在时间戳的 DatePart 上进行选择和分组。

例如：

```
SELECT
    DATEPART(hh, [timestamp]),
    DATEPART(mi, [timestamp]),
    AVG([value])
FROM
    YourTable
WHERE
    [timestamp] BETWEEN '2009-01-01 00:00:00.000' AND '2009-02-01 00:00:00.000'
GROUP BY
    DATEPART(hh, [timestamp]),
    DATEPART(mi, [timestamp]) 
```

编辑：对于您更复杂的时间跨度（例如 5 分钟），您可以按如下方式对日期部分进行划分。

```
DATEPART(mi, [timestamp]) / 5 * 5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T11:48:22.367

```
WITH    cal(m) AS
        (
        SELECT  1
        UNION ALL
        SELECT  m + 1
        FROM    cal
        WHERE   m < 60
        )
SELECT  DATEADD(minute, m, @start), AVG(value)
FROM    cal
LEFT JOIN
        timestamp
ON      timestamp > DATEADD(minute, m, @start)
        AND timestamp <= DATEADD(minute, m + 1, @start)
GROUP BY
        m 
```

这将选择给定小时内所有分钟的平均值，即使是那些没有记录的分钟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T11:48:58.120

除了 Robin Day 的帖子之外，您还可以按 5 分钟的间隔分组，例如：

```
GROUP BY
    DATEPART(hh, [timestamp]),
    DATEPART(mi, [timestamp]) / 5 
```

如果您想跨越几天，请在 dy 上分组，表示一年中的某一天：

```
GROUP BY
    DATEPART(dy, [timestamp]),
    DATEPART(hh, [timestamp]),
    DATEPART(mi, [timestamp]) / 5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T13:40:11.627

如果您要对此数据具有较高的读/写比率，您可能需要考虑索引视图。我在各地都使用这种方法来按时间段进行汇总。我刚刚开始[写博客示例](http://hainstech.wordpress.com/2009/06/16/using-sql-server-indexed-views-for-time-averaged-aggregations/)，代码如下：

```
create table timeSeries (
    timeSeriesId int identity primary key clustered
    ,updateDate datetime not null
    ,payload float not null
)

insert timeSeries values ('2009-06-16 12:00:00', rand())
insert timeSeries values ('2009-06-16 12:00:59', rand())
insert timeSeries values ('2009-06-16 12:01:00', rand())
insert timeSeries values ('2009-06-16 12:59:00', rand())
insert timeSeries values ('2009-06-16 01:00:00', rand())
insert timeSeries values ('2009-06-16 1:30:00', rand())
insert timeSeries values ('2009-06-16 23:59:00', rand())
insert timeSeries values ('2009-06-17 00:01:00', rand())
insert timeSeries values ('2009-06-17 00:01:30', rand())

create view timeSeriesByMinute_IV with schemabinding as
select
    dayBucket = datediff(day, 0, updateDate)
    ,minuteBucket = datediff(minute, 0, (updateDate - datediff(day, 0, updateDate)))
    ,payloadSum = sum(payLoad)
    ,numRows = count_big(*) 
from dbo.timeSeries
group by 
    datediff(day, 0, updateDate)
    ,datediff(minute, 0, (updateDate - datediff(day, 0, updateDate)))
go

create unique clustered index CU_timeSeriesByMinute_IV on timeSeriesByMinute_IV (dayBucket, minuteBucket)
go

create view timeSeriesByMinute as
select
    dayBucket
    ,minuteBucket
    ,payloadSum
    ,numRows
    ,payloadAvg = payloadSum / numRows
from dbo.timeSeriesByMinute_IV with (noexpand)
go

declare @timeLookup datetime, @dayBucket int, @minuteBucket int
select 
    @timeLookup = '2009-06-16 12:00:00'
    ,@dayBucket = datediff(day, 0, @timeLookup)
    ,@minuteBucket = datediff(minute, 0, (@timeLookup - datediff(day, 0, @timeLookup)))

select * from timeSeriesByMinute where dayBucket = @dayBucket and minuteBucket = @minuteBucket 
```

您可以在代码块的末尾看到示例查找。显然，您可以定义要查询的范围，而不仅仅是寻找特定的 dayBucket/minuteBucket 对。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-07T16:37:44.603

如果没有以下更改，我无法得到 Quassnoi 的回答：

```
WITH    cal(m) AS
    (
    SELECT  1
    UNION ALL
    SELECT  m + 1
    FROM    cal
    WHERE   m < 60
    )
SELECT  DATEADD(minute, m, @start) m, AVG(value)
FROM    cal
LEFT JOIN
    YourTable
ON      timestamp > DATEADD(minute, m, @start)
    AND timestamp <= DATEADD(minute, m + 1, @start)
GROUP BY
    m 
```

# .net - 将 MIME 树转换为 MailMessage

> ID：1000954
> 
> 赞同：3
> 
> 时间：2009-06-16T11:41:21.787
> 
> 标签：.net, mime, mailmessage

我正在编写一个处理和转发电子邮件的 C# 程序。我有一个 POP3 库和一个 MIME 解析器，我需要将 MIME 树复制到一个`System.Net.Mail.MailMessage`.

将不同的 MIME 部分映射到`AlternateView`s、`LinkedResource`s 和`Attachment`s 的最佳方法是什么？

**编辑**：这将适用于所有邮件客户端（发送和接收）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T14:33:10.490

从 10,000 英尺的概览来看，这就是我要做的。

将你的 mime 部分展平成一棵树。确保每个部分包含 1 个，并且仅包含 1 个部分（不是像 multipart/related 之类的父级，或类似的东西）。

1.  检查身体的以下情况：

    1.  如果第一部分是 HTML，则将其设置为邮件正文

    2.  如果第 1 部分是纯文本，而第 2 部分*不是*html，则将纯文本部分设置为邮件正文。

    3.  如果第一部分是普通的，而第二部分是 html，则创建 2 个替代视图。***这假设这些部分都没有 Content-Disposition:attachment 标头。

2.  循环遍历其余部分。将其他所有内容添加为附件，除了

    1.  具有 content-id 标头集的图像，或

    2.  具有内容位置标头集的图像。

        如果这些标题之一存在，那么我会将这些图像作为 LinkedResource 添加（仅当实际上存在 HTML 正文部分时）。

这应该让你开始，并涵盖大约 99% 的普通电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-28T19:16:28.147

将包含在 multipart/alternative 部分中的任何文本部分（text/plain、text/html 等）映射到 AlternateView。还将遇到的第一个文本部分映射到 AlternateView，而不管其父类型如何，以适应消息仅包含单个文本部分的情况。

根据 Content-Disposition 标头，将剩余部分映射到 Attachment 或 LinkedResource。

将那些带有附件 Content-Disposition 的部分映射到附件。

将那些具有内联 Content-Disposition 或没有 Content-Disposition 标头的部分映射到 LinkedResource。最后一步可以通过检查 Content-ID 是否与从特定文本部分引用的 Content-ID 匹配来解决，但出于实际目的，可以假设以这种方式创建的所有 LinkedResources 都属于第一个 text/html AlternateView （或最后创建的 AlternateView，如果没有 text/html 类型的 AlternateView）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T11:44:18.193

现在，我正在将任何具有`Content-Disposition`which is not`inline`或具有除 Text 或 Image 之外的任何 MIME 类别的任何内容`Attachment`复制到HTML 视图或最后一个视图`inline`中具有 MIME 类别的任何内容，以及任何其他作为. （我还没有测试过这个）`Image``LinkedResource``AlternateView`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T11:46:06.303

可能不是最好的方法，但我会尝试获取“原始”电子邮件，然后用新电子邮件替换 to

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T11:58:07.583

嗯，你绝对需要使用 System.Net.Mail.MailMessage 吗？

System.Net.Mail.MailMessage 仅提供 MIME 提供的一小部分。因此，如果您的 MIME 解析器旨在支持所有/大多数标准功能，那么您将 MIME 消息复制到 MailMessage 中的目标充其量是困难的，而在最坏的情况下是不可能的。提供 POP3 访问的库不也提供 SMTP 访问吗？如果是这样，我会单独留下 System.Net.Mail.MailMessage 并使用第三方库提供的任何内容。

# javascript - Emacs 中的 Javascript 主要模式

> ID：1000956
> 
> 赞同：10
> 
> 时间：2009-06-16T11:41:25.780
> 
> 标签：javascript, emacs

Emacs 中存在哪些 javascript 主要模式，它们的主要功能是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-16T11:49:30.413

> js2-mode：Emacs 的新 JavaScript 模式
> 
> * * *
> 
> 这是一个更大的项目的一部分，正在进行中，以允许用 JavaScript 而不是 Emacs-Lisp 编写 Emacs 扩展。
> 
> **特征：**
> 
> *   MX 定制
> *   准确的语法高亮
> *   缩进
> *   代码折叠
> *   注释和字符串填充
> *   语法错误
> *   严格警告
> *   jsdoc 高亮显示

[http://steve-yegge.blogspot.com/2008/03/js2-mode-new-javascript-mode-for-emacs.html](http://steve-yegge.blogspot.com/2008/03/js2-mode-new-javascript-mode-for-emacs.html)

带有一些文档。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-16T11:46:35.210

我想你想要的是这样的：

[http://www.corybennett.org/download/javascript-mode.el](http://www.corybennett.org/download/javascript-mode.el)

[再说一次，也许这就是你要找的？](http://www.emacswiki.org/emacs/JavaScriptMode)

还是[这个？](http://code.google.com/p/js2-mode/)

人们似乎更喜欢（至少给出最高评分的答案）：

**更新：** [http ://steve-yegge.blogspot.com/2008/03/js2-mode-new-javascript-mode-for-emacs.html](http://steve-yegge.blogspot.com/2008/03/js2-mode-new-javascript-mode-for-emacs.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-17T18:45:34.580

我使用 Steve Yegge 的[js2-mode](http://code.google.com/p/js2-mode/)，非常喜欢它。它非常可配置，它的缩进想法与我的一致，最令人印象深刻的是，它有一个完整的 JavaScript 解析器，所以它可以在我键入时提醒我语法错误（对于像 IE 的属性列表中的尾随逗号这样的小事情是必不可少的）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-17T21:13:09.097

浓缩咖啡模式也应该很好。

# c# - 为从本机 .NET 控件派生的控件自定义 ControlDesigners 的行为

> ID：1000961
> 
> 赞同：1
> 
> 时间：2009-06-16T11:42:13.783
> 
> 标签：c#, winforms, windows-forms-designer

我的问题与这个问题有关： [自定义 Winforms 控件中的基线对齐线](https://stackoverflow.com/questions/93541/baseline-snaplines-in-custom-winforms-controls)

但是，就我而言，我创建了一个`derives`来自 TextBox 而不是`containing`TextBox 的新控件。我想要一个自定义的 ControlDesigner，但我想修改 TextBox 设计器的行为，而不是自己编写一个完整的设计器。特别是，我希望能够在提供一些自定义动词的同时返回 TextBox 的 SnapLines。有没有好的方法来做到这一点？

编辑：澄清一下，这适用于 .NET 2.0 中的 Windows 窗体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-03-26T11:00:53.833

最后，我确定的解决方案是在设计器中创建一个虚拟控件，将相关属性与实际控件同步，获取虚拟控件的设计器，然后从虚拟控件的设计器返回对齐线。这是一个可怕的 hack，但它似乎是不使用反射来“扩展”设计师的唯一方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-06-16T14:44:39.530

让您的 ControlDesigner 从 TextBox 使用的那个派生怎么样？你试过了，发现问题了吗？

# build - 如何在文本文件中获取最后一个构建标签

> ID：1000962
> 
> 赞同：2
> 
> 时间：2009-06-16T11:42:14.563
> 
> 标签：build, label, text-files, cruisecontrol

我有一个项目处于巡航控制之下。我想编写一个控制台应用程序，它将该项目的最后一个构建标签写入一个文本文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T12:49:25.940

CruiseControl 将 CCNetLabel 参数传递给它调用的脚本。您可以将其从脚本打印到文件中，而无需编写控制台应用程序。

如果您需要从 CruiseControl 外部检索项目版本，那么您可以访问此文件（即：通过 IIS 公开它）或轮询和解析 CruiseControl 仪表板的 XML 报告（位于*[http://BuildServer/XmlServerReport .aspx](http://BuildServer/XmlServerReport.aspx)* )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-01T08:52:52.590

取决于你使用什么风格的巡航控制？默认情况下，java版本，我有这样的东西

```
<schedule showProgress="true">
  <composite showProgress="true">       
    <exec timeout="2400" command="${homedir}/bin/updatebuildid" args="${sbhomedir}/projects/${project.name} ${label}"/>
    ..... etc .. 
```

updatebuild 脚本基本上是一个 shellscript，用于调用 sed 为打包文件中的版本号添加后缀。对你来说可能只是简单的“echo $1 > $yourfile”

# css - CSS - 什么是@page？

> ID：1000979
> 
> 赞同：4
> 
> 时间：2009-06-16T11:46:13.337
> 
> 标签：css

我的样式表中有这个：

```
 @page 
{
    margin: 0.5in;
    padding: 1em;

    @bottom-right 
    {
        content: counter(page);
        font-family: ConfluenceInstalledFont, Helvetica, Arial, sans-serif;
        font-size: 8pt;
    }

    @bottom-left
    {
        content: "Some text";
        font-family: ConfluenceInstalledFont, Helvetica, Arial, sans-serif;
        font-size: 8pt;
    }
} 
```

* * *

@page 是什么，我还能用它做什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-16T11:49:37.480

[@page](http://www.w3.org/TR/CSS2/page.html#page-box)设置分页媒体的样式。[这介绍](http://www.w3.org/TR/CSS2/page.html#page-intro)了分页媒体是什么，但据我所见，它几乎只在您想要控制页面的打印时才需要。

[w3 对 CSS 3 下@page](http://www.w3.org/TR/css3-page/#page-box-page-rule)的描述有更好的描述，但自然只适用于 css3。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T11:52:53.527

使用该[`@page`规则](http://www.w3.org/TR/css3-page/)，您可以指定可打印页面的属性。`@bottom-right`您可以在样式表中添加页边距或定义和`@bottom-left`规则所做的每页页脚。

# delay - 延迟或停止加载谷歌广告

> ID：1000986
> 
> 赞同：0
> 
> 时间：2009-06-16T11:47:04.257
> 
> 标签：delay

如果互联网连接速度慢或其他情况，如何告诉谷歌联合不要永远等待加载广告？我们可以修复一个时间，说好的去搜索 5 毫秒以获取广告，否则不会延迟页面其余部分的加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T11:50:20.163

假设您的意思是这是在*您的*网站上，请确保您的 javascript 在页面末尾加载，以便您的其他内容可以首先加载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T12:01:48.313

Firebug的[YSlow](http://developer.yahoo.com/yslow/)扩展非常适合这类事情，它对您的页面加载进行基准测试并告诉您什么是慢的，并建议您可以使用哪些技术来改进事情。

例如，它会为您提供有关将 javascript 放置在何处的建议，以帮助用户感知您的网站速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-08-12T15:27:35.533

请参阅此博客项目“ [Google Ads Async（异步）](http://blog.figmentengine.com/2011/08/google-ads-async-asynchronous.html) ”可能会为您提供一个很好的起点：

```
<script type="text/javascript"><!--
// dynamically Load Ads out-of-band
setTimeout((function ()
{
    // placeholder for ads
        var eleAds = document.createElement("ads");  
        // dynamic script element
        var eleScript = document.createElement("script");  
        // remember the implementation of document.write function
        w = document.write;
        // override and replace with our version
        document.write = (function(params)
        {
        // replace our placeholder with real ads
        eleAds.innerHTML = params;
        // put the old implementation back in place
        document.write=w;
        });
        // setup the ads script element
        eleScript.setAttribute("type", "text/javascript");
        eleScript.setAttribute("src", "http://pagead2.googlesyndication.com/pagead/show_ads.js");
        // add the two elements, causing the ads script to run
        document.body.appendChild(eleAds);              
        document.body.appendChild(eleScript);           
}), 1);
                //-->
        </script> 
```

# git - 来自 git 的 Emacs 自定义构建

> ID：1000989
> 
> 赞同：1
> 
> 时间：2009-06-16T11:47:48.903
> 
> 标签：git, emacs

我已经克隆了 emacs git repo。我想要做的是修改它，以便 site-list.el 包含一行代码，告诉 emacs 在加载时加载我的自定义 emacs 库。但是我想在一个分支中进行，这样我就可以跟上错误修复的步伐，但是每次我构建它时，它都会使用我的自定义 site-lisp 文件进行构建。

但我似乎无法确定文件的位置或创建位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T03:08:42.307

我会这样设置：

```
git clone <repository>
git checkout -b my-work  # do all your work on the my-work branch.
<do some work>
git add <list of new files>
git commit 
```

从远程存储库更新时：

```
git checkout master # keep a clean master branch free from your changes
git pull
git checkout my-work
git merge master 
```

我的观点是要注意保持一个干净的分支和一个单独的开发分支。还要记住**git pull = git fetch + git merge**所以当你拉取时你需要注意你签出的分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T09:12:10.383

[Alex Ott 的Emacs](http://xtalk.msk.su/~ott/en/writings/emacs-vcs/EmacsGit.html)中有一篇关于使用 Git 的精彩文章介绍了为 git 提供接口的主要包。就我个人而言，我更喜欢[magit](http://xtalk.msk.su/~ott/en/writings/emacs-vcs/EmacsGit.html#sec12)，但在你的情况下，我也向你推荐它，因为使用它来管理分支非常方便。

# reverse-engineering - 反编译器的ANN？

> ID：1000994
> 
> 赞同：1
> 
> 时间：2009-06-16T11:48:55.343
> 
> 标签：reverse-engineering, neural-network, decompiler

有没有尝试在反编译中使用人工神经网络？如果可以将经过修剪的源语义连同代码一起提供给神经网络，这样它就可以学习两者之间的联系，那就太好了。我认为当有优化时这可能会失去它的有效性，并且可能对高级语言也更好，但我有兴趣听到任何人对此进行的任何尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-28T19:26:38.560

我将此添加为评论，但我想我也会继续将其发布为答案。看起来在 11 年的意义上这个问题已经发布，在这个方向上已经做了一些工作。这是一个链接： [https ://www.groundai.com/project/a-neural-based-program-decompiler/1](https://www.groundai.com/project/a-neural-based-program-decompiler/1)

这是摘要

## 基于神经的程序反编译器

> 二进制可执行文件的逆向工程是计算机安全领域的一个关键问题。一方面，恶意方可以从软件产品中恢复可解释的源代码以获得商业优势。另一方面，二进制反编译可用于代码漏洞分析和恶意软件检测。然而，有效的二进制反编译具有挑战性。传统的反编译器具有以下主要限制：（i）它们仅适用于特定的源-目标语言对，因此会导致新语言任务的开发成本不高；(ii) 它们的输出高级代码不能有效地保留输入二进制文件的正确功能；(iii) 他们的输出程序没有捕捉到输入的语义，而且逆向的程序很难解释。针对以上问题，我们建议 Coda111Coda 是 CodeAttack 的缩写，这是第一个基于神经的端到端代码反编译框架。Coda 将反编译任务分解为两个关键阶段：首先，Coda 使用指令类型感知编码器和树解码器在代码草图生成阶段生成带有注意力馈送的抽象语法树 (AST)。其次，Coda 然后使用由集成神经错误预测器引导的迭代纠错机更新代码草图。通过找到一个好的近似候选，然后将其修复为完美，与基线方法相比，Coda 实现了卓越的性能。我们通过对各种基准的广泛实验来评估 Coda 的性能。评估结果表明，Coda 在未见过的二进制样本上实现了平均 82% 的程序恢复精度，最先进的反编译器产生 0% 的准确度。此外，Coda 在注意力方面优于序列到序列模型，程序准确度高出 70%。我们的工作揭示了二进制可执行文件的脆弱性，并对软件开发的知识产权 (IP) 保护构成了新的威胁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-23T04:37:26.927

I'm assuming you mean decompilation to human readable C/C++ as compared to Assembly then,

Given the input size (optimized/compiled code) and the output size of succinct code, and the multi-line stateful nature of decomplilation process, I would have though this is a larger problem that a ANN could ever handle.

# php - PHP 中的目标搜索功能

> ID：1000998
> 
> 赞同：1
> 
> 时间：2009-06-16T11:49:22.880
> 
> 标签：php, algorithm, excel

我想在 PHP 中实现类似于 Microsoft Excel 中的 Goal Seek 的功能。

这样的事情可以在 PHP 中实现吗？

**这里有详细的故事**

我们正在为一家金融公司编写个人贷款管理申请。他们目前正在使用 Excel 表格进行各种负载、EMI 等计算。现在他们想在网上实现这一点，以便他们的员工可以从任何地方访问它。

在此我们必须对利息计算进行编程。这种利息计算非常复杂，但可以说，利息是用减法计算的，但是，它总是比平利息少一点。

例如，有人以 10% 的利率贷款 10000 美元，为期 12 个月（1 年）。

在这种情况下，固定利息将为 1000 (10000 * (10/100))。

我们必须在减少方法中显示借款人的利息计算，并且在减少方法中的总利息应该总是比固定利息少一点。

为此，我们必须计算实际高于 10% 的利率。为了达到准确的价值，他们（客户）目前正在使用 Goal Seek 功能，因为这非常快。

在我们正在开发的在线软件中，我们已经实现了执行此计算的逻辑，但这需要很长时间，因为我们必须执行一个循环，该循环有时迭代超过 100000 次才能达到可接受的值。

我希望我已经正确解释了整个情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T20:58:55.220

There is a bit (a little bit) about what Goal Seek does [here, on the Microsoft support site](http://support.microsoft.com/kb/100782). That might be enough for you to get started with.

In your case, an even faster-performing method would be to use something like [Newton-Raphson](http://en.wikipedia.org/wiki/Newton-Raphson), since you have a known formula to start with. If the wikipedia page doesn't help sufficiently, now you know what to google for you may be able to find a nice php walkthrough.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-08T19:30:20.497

> Goal-seek-formula(PHP 公式)

```
<?php 

/* PMT Function for goal seek formula 
 * PMT = (PV(1+i)^n) + FV)i
 *      -------------------
 *            1-(1 + i)^n
 *             
 *
 * $i = annual interest rate
 * $n = total months
 * $p = total loan amount (Principle Amount)
 */

function PMT($i,$n,$p)
{
    return $i * $p * pow((1 + $i),$n) / (1 - pow((1 + $i),$n));
} 
echo"goal seek = ",(number_format(PMT(7/1200,120,60000),2)); // This will Display result

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T13:56:14.433

如果您有要计算的函数并且需要运行 100K 次，则该函数的数据馈送不是最佳的。您应该先为函数提供粗粒度数据（值之间的大差距），然后再提供更精细的数据。

当然，您需要编写比 biiiig while 循环更复杂的控制流。

最简单的方法（编码）

*   你处于目标的高位
*   以 rate*0.5 输入数据，看看它是否会偏低
*   平等：你准备好了；低于目标：进给率*0.75 仍然更高：进给率*0.25

重复直到收敛。请记住，您想消除剩余值的 1/2。

它会很快。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2009-06-16T11:53:03.370

由于 PHP 是图灵完备的，所以是的，这是可能的。当然，您需要为此实现自己的算法和用户界面。请详细说明此类功能的设计，您如何看待它，然后也许我可以给您一些进一步的指示。